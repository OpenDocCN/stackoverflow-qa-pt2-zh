# StackOverflow 问答 15366000-15366999

# php - Shopify - 如何在 index.liquid 上显示“按子类别浏览”表单？

> ID：15366000
> 
> 赞同：2
> 
> 时间：2013-03-12T15:57:06.393
> 
> 标签：php, html, css, shopify

我正在尝试做的是在索引页面上为目录页面中的子类别创建一个快捷方式。在目录页面上，我有以下代码用于浏览集合：

```
<form action="" class="navigation">
    <div class="category-selector-wrapper">
        <label>Browse by collection:</label>
        <div class="category">
            <select class="navigationSelector">
                <option value="/collections/all">All</option>
                {% for col in collections %}
                    <option value="{{ col.url }}"{% if collection.handle == col.handle %}selected="selected"{% endif %}>{{ col.title }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    {% assign colItems = collection.all_tags | size %}
    {% if colItems > 0 %}
    <div class="category-selector-wrapper">
        <label>Subcategory:</label>
        <div class="category">
            <select class="navigationSelector">
                {% if collection.handle %}
                    <option value="/collections/{{ collection.handle }}">All</option>
                {% elsif collection.products.first.type == collection.title %}
                    <option value="{{ collection.title | url_for_type }}">All</option>
                {% elsif collection.products.first.vendor == collection.title %}
                    <option value="{{ collection.title | url_for_vendor }}">All</option>
                {% endif %}

                {% for tag in collection.all_tags %}
                    {% if current_tags contains tag %}
                        <option value="/collections/{{ collection.handle }}/{{ tag | handleize }}" selected="selected">{{ tag }}</option>
                    {% else %}
                        <option value="/collections/{{ collection.handle }}/{{ tag | handleize }}">{{ tag }}</option>
                    {% endif %}
                {% endfor %}
            </select>
        </div>
    </div>
    {% endif %}
    <label class="total">{{ collection.products_count }} {{ collection.products_count | pluralize: 'item', 'items' }} total</label>
</form> 
```

我尝试过的是在 index.liquid 中输入以下代码：

```
 <form action="" class="navigation">
    <div class="category-selector-wrapper">
            <label>Subcategory:</label>
            <div class="category">
                <select class="navigationSelector">
                    {% if collection.handle %}
                        <option value="/collections/{{ collection.handle }}">All</option>
                    {% elsif collection.products.first.type == collection.title %}
                        <option value="{{ collection.title | url_for_type }}">All</option>
                    {% elsif collection.products.first.vendor == collection.title %}
                        <option value="{{ collection.title | url_for_vendor }}">All</option>
                    {% endif %}

                            <option value="/collections/{{ collection.handle }}/{{ tag | handleize }}" selected="selected">{{ tag }}</option>

                            <option value="/collections/{{ collection.handle }}/{{ tag | handleize }}">{{ tag }}</option>

                </select>
            </div>
        </div>

    </form> 
```

这段代码的作用是显示快捷方式，但我只能选择“全部”。下拉列表不显示任何其他子类别。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:13:09.563

在索引页面上，`collection`未设置变量。您需要使用以下内容自己分配它：

```
{% assign collection = collections.all %} 
```

（在您已经拥有的代码之上）

`collections.all`是一个[自动集合](http://wiki.shopify.com/Collections#Automatic_collections)。

# javascript - jquery $.proxy 和 $.on 函数

> ID：15366003
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:09.357
> 
> 标签：javascript, jquery

我想概括我的 javascript 插件，代码（取自 bootstrap 的工具提示插件并稍作更改）：

```
!function ($) {

   "use strict"; // jshint ;_;

   var Conversation = function (element, options) {
      this.init('conversation', element, options);
   };

   // PROTOTYPE DEFINITIONS

   Conversation.prototype = {

      constructor: Conversation,

      init: function (type, element, options) {

         this.type = type;
         this.$element = $(element);
         this.options = this.getOptions(options);
         var $that = $(this);

         this.$element.find('[data-toggle]').on('click', /*HERE*/);

      },

      getOptions: function (options) {
         return $.extend({}, $.fn[this.type].defaults, options, this.$element.data());
      },

      starConversation: function(e){

          console.log('starConversation called!');
      },

      selectConversation: function(e, arg){

         console.log('selectConversation called!');

      },

      selectAllConversations: function(e){
         console.log('selectConversation called!');
      }

   };

   $.fn.conversation = function ( option ) {
      return this.each(function () {
         var $this = $(this)
            , data = $this.data('conversation')
            , options = typeof option == 'object' && option;
         if (!data) $this.data('conversation', (data = new Conversation(this, options)));
         if (typeof option == 'string') data[option]()
      })
   };

   $.fn.conversation.Constructor = Conversation;

   $.fn.conversation.defaults = {
      selectAllButtonSel: '#selectAll'
   };

}(window.jQuery); 
```

问题是我想像“所有具有 data-toggle 的元素都应该调用与它们的 data-toggle 属性一样命名的函数”。

一般，

```
this.$element.find('[data-toggle]').on('click', $.proxy(this['starConversation'], this)); 
```

作品。但我想知道我是否可以在`this['starConversation']`. 我也试过这个：

```
$.proxy($that[$(this).data('toggle')], $that); 
```

然而`$that`变量不知何故没有`starConversation`函数变量。范围是否在`$.proxy`函数内部（或因为`on()`函数）发生了变化？我不想在这里打破插件模式。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:17:48.230

我假设当有人单击具有`[data-toggle]`属性的元素时，应该调用一个函数，其名称等于`[data-toggle]`.

可能的解决方案：

```
this.$element.find('[data-toggle]').on('click', function(event) {
  var methodName = $(this).data('toggle');
  $that[methodName](event);
}); 
```

# ruby-on-rails - Ruby 模块中的访问控制器方法

> ID：15366008
> 
> 赞同：1
> 
> 时间：2013-03-12T15:57:22.583
> 
> 标签：ruby-on-rails, ruby, methods, module, mixins

在我的 Rails 应用程序中，我需要在模块中使用 ApplicationController 中定义的方法。该模块还需要可供所有控制器/助手访问。我不确定让模块访问此方法的最佳方法是什么。我认为有一种方法可以通过包装模块然后将其包含到 ApplicationController 中来实现。

我还想保留命名空间，而不是将模块方法直接包含在控制器中。例如 controller.Module.foo 而不仅仅是 controller.foo

这就是我想要做的：

```
module Analytics
  module Events
    extend self

    def create_event name
      # do some stuff
      controller_method name
    end
  end
end

class ApplicationController < ActionController::Base
  include Analytics

  def controller_method
     # ...
  end

  def some_other_method
    Events.create_event :test
  end
end 
```

现在我知道我可以向 Analytics 模块添加一个 self.included 方法，它为我提供传入的基础对象，但我不知道如何在 KissMetrics 模块中使用该基础。

这是可能的还是有更好的方法来做到这一点？

## 编辑：

为了进一步澄清，我使用了一个扩展/包含在 ActionController::Base 中的 gem。[请参阅此脚本](https://github.com/jkrall/analytical/blob/master/lib/analytical.rb)的底部。然后在 ApplicationController 中配置这个库。我想要做的就是拥有一个包含使用此 gem 的已定义事件的模块。它使我更容易在我的所有控制器中拥有一致的事件，例如

```
module Events
  def sign_up_event
    analytical.event "sign up" # calls the library that was loaded into the app controller
  end
end

# in some controller
Events.sign_up_event
# instead of this, which is totally usable but not DRY
analytical.event "sign up" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:46:10.217

据我所知，您不应该从库中调用控制器操作，而是反过来。

我建议创建一个库，因为我不知道您要构建什么我已经设置了一个示例：

在 lib/analytics.rb 中

```
class Analytics
  def initialize(object_id, event_id)
    # insert object to event relation logic here
    @object = Object.find(object_id)
    @event = Event.find(event_id)
  end

  def add_instance_method
    # add logic for instantiated Analytics object
    @object.event_collection.create(event_id: @event.id)
  end

  def self.check_class_method?(object_id, event_id)
    # check logic for Analytic Class taking 2 arguments
    @object = Object.find(object_id)
    @event = event.find(event_id)
    @object.events.include?(@event)
    # return true/false
  end
end 
```

所以现在在你的控制器中：

```
def action
  @object = Object.find(params[:id])
  @event = Event.find_by_identifier("logged_in")

  unless Analytics.check_class_method?(@object_id, @event_id)
    analytic = Analytics.new(@object.id, @event.id)
    raise "Failed" unless analytic.add_instance_method
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:51:33.233

决定通过将模块更改为一个类并在 ApplicationController 的 before_filter 回调中实例化它来解决这个问题。我将初始化的分析对象传递给它，一切都很好。本来希望使用模块，但这可以解决问题。

# ios - 如何为 textfield-ios 设置两种不同的边框笔触颜色

> ID：15366009
> 
> 赞同：2
> 
> 时间：2013-03-12T15:57:27.453
> 
> 标签：ios, uitextfield, stroke

在我们的应用程序中，我们希望在文本字段周围有 2 种不同的边框颜色（例如：一种颜色的上边缘和左边缘，另一种颜色的下边缘和右边缘） - 这可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:17:12.620

没有**预先构建的方法可以**为每个边框边设置不同的颜色，但是**您可以使用 layers 来伪造它**。可能比它的价值更多的工作，但基本上你想要做的是为每个边框绘制单独的 calayers，然后将它们添加到文本字段。

```
#import <QuartzCore/QuartzCore.h> //This goes up top, but you already know that :-)

CALayer *topBorder = [CALayer layer];
topBorder.frame = // cgrect of where you want the bottom border. Use the textfields frame as reference, but treat the border as a solid rectangle
topBorder.backgroundColor = [UIColor greenColor].CGColor; // the .CGColor is important, don't forget it

[toScrollView.layer addSublayer:topBorder]; 
```

然后只需冲洗并重复每一面。您甚至可以正常设置主色，然后只需添加不同的边（减少工作量）

# jquery - HTML5，定位验证错误信息

> ID：15366011
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:28.560
> 
> 标签：jquery, html

如果我有一个表单并且我使用以下 jQuery 代码：

```
$(document).ready(function() {
    var elements = document.getElementsByTagName("input");
    for (var i = 0; i < elements.length; i++) {
        elements[i].oninvalid = function(e) {
            e.target.setCustomValidity("");
            if (!e.target.validity.valid) {
                e.target.setCustomValidity("This field cannot be left blank");
            }
        };
        elements[i].oninput = function(e) {
            e.target.setCustomValidity("");
        };
    }
}); 
```

如何将错误消息放置在图像中的正确位置： ![http://i.stack.imgur.com/UIj5V.gif](../Images/0353e332c65c592d1014190c5e0234d4.png)

# solr - Solr 中的条件过滤器查询

> ID：15366012
> 
> 赞同：2
> 
> 时间：2013-03-12T15:57:29.093
> 
> 标签：solr, lucene

是否可以有条件地执行 FilterQuery (fq)？

换句话说：只有在某个条件为真时才执行它。

例子：

我的 solr 数据库中有多个城市及其地理位置。我还存储它们是否重要。现在我想查询某个地理位置范围内的所有城市，但也总是返回重要的城市。

或者在类似 SQL 的语法中（***我知道这很可怕，甚至不正确的 SQL***，但它解释了我的需求）：

```
select *
from cities
having distance(cityname, 30, 30) or important(cityname) 
```

到目前为止，我还没有发现类似的东西。我可以在自定义过滤器查询中做到这一点，但我不想这样做:)。

提前致谢。

编辑：

我想用它来做类似真实世界的事情：

```
{!geofilt pt=30.2,23.0 sfield=locationCoordinates d=20 cost=20} or nationWide:true 
```

编辑2：

解决方案：

```
map(query({!geofilt pt=20.3,30.2 sfield=locationCoordinates d=1}, -1), -1, -1,   nationWide:true) 
```

在这种情况下应该可以使用负值：http: [//www.solrtutorial.com/solr-search-relevancy.html](http://www.solrtutorial.com/solr-search-relevancy.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:03:08.287

您可以尝试使用[FunctionQuery](http://wiki.apache.org/solr/FunctionQuery)。有可用的预构建函数，或者您可以[编写自定义函数查询](http://www.supermind.org/blog/756/how-to-write-a-custom-solr-functionquery)。

既然您提到了城市，我很想向您指出[Geohash 功能](http://wiki.apache.org/solr/FunctionQuery#geohash_-_Convert_to_geohash)，但不确定这是否是您正在寻找的。

# android - 评分栏没有占用所有可用空间

> ID：15366013
> 
> 赞同：2
> 
> 时间：2013-03-12T15:57:30.357
> 
> 标签：android, android-ui, ratingbar

我有一个 ratingbar 的列表视图，用户需要在 1 到 7 的范围内对不同的项目（图像）进行评分。我使用了带有 imageview 和 ratingbar 的线性布局作为我的列表视图的布局。然而，由于某些未知原因，评级栏没有占用完整的可用空间，我的最后一颗星显示不完整。

![在此处输入图像描述](../Images/56c1c8adb15e71004f60279e0aa5a6f9.png)

我的布局文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="40dp"
    android:padding="10dp" >

    <ImageView
        android:id="@+id/logo"
        android:layout_width="80dp"
        android:layout_height="match_parent"
        android:padding="5dp"
        android:scaleType="centerInside" />

    <RatingBar
        android:id="@+id/ratingbar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:isIndicator="false"
        android:paddingLeft="15dp"
        android:stepSize="1.0" >
    </RatingBar>

</LinearLayout> 
```

我在我的代码中设置了 numStars 。如果我将 numstars 增加到 8，同样的事情会发生，7 颗星显示为完整，最后一颗星显示为不完整。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:40:24.997

填充偏移 a 的内容`View`（在您的情况下将内容向右推），而不是：

```
android:paddingLeft="15dp" 
```

尝试使用：

```
android:layout_marginLeft="15dp" 
```

# jquery - 在php之后执行jquery并读取一个类

> ID：15366014
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:30.603
> 
> 标签：jquery, drupal

这几乎令人尴尬......几乎是因为我只是没有看到我通常做的事情。

我正在尝试在 Drupal 站点中的 jquery 中执行一个函数。

功能是：

```
 if ($('body').hasClass('.logged-in')) {
    $('ul.dropmenu').append('<li class="loggedInOverride">' + '<a href="/logout">' + 'Log out' + '</a>' + '</li>');
}; 
```

我为网站的某个部分提供了一个新菜单，该部分正在获得一个全新的主题，并且当前的主导航是用旧的 javascript 构建的，并且是一个大黄蜂巢，只是为了重新设计，所以我创建了一个新菜单，将其卡在一个块中，然后一切都很好，除了登录/退出行为。

由于它是自定义的 html/css/jquery 而不是 Drupal 中的“菜单”，因此显示适当注销链接的自动功能在这里不适用。Drupal 6.28 顺便说一句。

该语句在萤火虫控制台中运行良好，但我已经在一个单独的 js 文件中尝试过这个（其他功能正常工作，因此文件确实加载并且没有错误......除了不工作！），我尝试将它粘贴在在我的 page.tpl.php 文件中的底部，但即使首先处理了 php，正文也会返回未定义。

我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:01:10.470

你把这个放在`$(document).ready()`容器里还是放在里面`Drupal.behaviors.yourtheme`？如果您不这样做，则在运行时未定义主体。

# c# - 支持 5.2.0.0 (Microsoft.Data.Services.Client.WindowsStore) 的 WinRT DataServiceContext 服务参考

> ID：15366015
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:30.677
> 
> 标签：c#, json, windows-runtime, wcf-data-services

是否有计划更新[Windows 应用商店应用的 WCF 数据服务工具](http://www.microsoft.com/en-us/download/details.aspx?id=30714)以处理 v5.2（甚至更好的 5.3）

JSON light 格式是我在推/拉实体时偶尔连接的远程工作人员的先决条件。

自去年四月以来就没有更新过......（或者我只是在网上错过了它！？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:19:20.753

MSDN[在这里](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/7c9a5338-be38-443e-a520-e98f9902b4ea)回答我认为/希望 MS 的数据服务团队正在使库可移植。

# c# - 使用 asp.net 输出

> ID：15366018
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:34.263
> 
> 标签：c#, asp.net, asp.net-mvc

在投票结束“非建设性”之前，我想指出，MS 曾一度发现此信息很重要，否则他们一开始就不会创建[从 ColdFusion 迁移到 ASP.NET](http://msdn.microsoft.com/en-us/library/aa479305.aspx)。

此外，这个问题有可靠的答案，不值得辩论。

我们正在研究一个 ColdFusion 由于各种原因无法工作的项目，因此我们将 asp.net mvc 作为解决方案。我做了一些初步研究，但很多结果都过时了，所以我不能确定它们是否准确。例如“从 ColdFusion 迁移到 ASP.NET”是从 2003 年开始的。

无论如何，ColdFusion 有一些非常方便的内置功能，我知道我们将在这个项目中使用这些功能，我已经研究了如何在 asp.net 中完成这些功能，但正如我所说，结果是几年前的或更旧并且与MS更新MVC / CLR / EF一样频繁我不知道这些答案是否有效。我们这里没有人对 .net 有太多经验，因此我们没有丰富的功能历史。

我的直接问题是，ASP.net (MVC) 中是否有针对这些 ColdFusion 功能的内置解决方案？如果不是，目前最好的 3rd 方解决方案是什么？链接到文档、网站等就可以了。我不是要求任何人为我编写解决方案。下面是 ColdFusion 文档的链接，其中包含我需要知道如何解决的功能。提前致谢。

1.  [CFDocument](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c21.html) / [CFPDF](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7995.html) - 使用 HTML 和 CSS 生成 PDF
2.  [CFSpreadsheet](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec17cba-7f87.html) - 创建 Excel 文档。
3.  [CPresentation](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7910.html) - 创建 PowerPoint 文档。
4.  [CFChart](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7930.html) - 图表 HTML5 / 图片 / flash
5.  [CFImage](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7945.html) - 图像处理。（缩略图、旋转、转换等）
6.  [CFExchangeConnection](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-782d.html) - 连接到交换邮箱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:05:36.317

没有对 1.、2\. 和 3\. 的内置支持。实际上，更准确地说，通过[Open XML SDK](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)对 Open XML 提供了对 2\. 和 3\. 的支持。您还可以阅读许多关于使用此 SDK 构建 Open XML 文档的[教程。](http://msdn.microsoft.com/en-us/library/office/ee361882%28v=office.12%29.aspx)

> 4) CFChart - 图表 HTML5/图像/flash

有一个插入[图表控件](http://weblogs.asp.net/scottgu/archive/2010/02/07/built-in-charting-controls-vs-2010-and-net-4-series.aspx)。

> 5) CFImage - 图像处理。（缩略图、旋转、转换等）

.NET 中有许多图像处理技术。`System.Drawing.Graphics`和[WIC](http://msdn.microsoft.com/en-us/library/windows/desktop/ee719654%28v=vs.85%29.aspx)就是其中之一，但也有现成的解决方案，例如[ImageResizer](http://imageresizer.codeplex.com/)。

> 6) CFExchangeConnection - 连接交换邮箱。

您可以使用[Exchange 绑定](http://msdn.microsoft.com/en-us/library/bb408521.aspx)。

# spring-mvc - 带有 Dojo 的 QueryReadStore 的 Spring MVC 3

> ID：15366019
> 
> 赞同：0
> 
> 时间：2013-03-12T15:57:35.997
> 
> 标签：spring-mvc, dojo, spring-roo

我有一个基于 Spring Roo 模板的 Spring 项目。我想在组合框中实现自动完成。经过数小时的研究，我发现使用 dojox.data.QueryReadStore 是我最好的选择，因为我将从服务器端获取数据，因此只需要一个简短的选项列表。

我的问题是我仍然是在 Spring 中实现 dojo 的新手，并且不知道如何将我的组合框连接到 QueryReadStore。这个想法是调用控制器的方法并在用户键入 de comboBox 时获取结果。

**编辑：**

```
var store = dojox.data.queryReadStore({url:'/.../something'})
Spring.addDecoration(new Spring.ElementDecoration({elementId : ${fn:escapeXml(fieldname)}, widgetType: 'dijit.form.ComboBox', 
        widgetAttrs : {                   
            hasDownArrow : false,
            store:store,
            searchAttr:"name",
            autoComplete:false,
        }

    })); 
```

控制器：

```
@Controller
Class controller{
    @RequestMapping(value = "/something", method = RequestMethod.GET)
    public @ResponseBody List<String> someMethod(@RequestParam("name") String queryString){
        //use queryString here
        return listOfStrings;
    }
} 
```

任何提示或想法表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:22:53.020

queryReadstore 将接受一个参数作为 url:giveyour url here

```
var store = dojox.data.QueryReadStore({url:http:// ... .. /someString})
var filteringSelect = new FilteringSelect({
            id: "stateSelect",
            name: "state",
            value: "CA",
            store: stateStore,
            searchAttr: "name"
        }, "stateSelect"); 
```

现在在 dispatcher-servlet.xml 或使用注释将此 url 映射到您的控制器。

```
@Controller
Class controller{
    @RequestMapping("someString")
    public void someMethod(@RequestParam("name") String queryString){
        //use queryString here
        out.write(response in JSON string format);
    }
} 
```

*   请注意 @RequestParam(parametername) 中的参数名称，这将与过滤选择属性中的 searchAttr 相同。

# git - 如何为通过 GitHub 共享的 CodeIgniter 项目设置系统和应用程序文件夹名称？

> ID：15366030
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:04.517
> 
> 标签：git, codeigniter, github

我正在和一个朋友一起使用 CodeIgniter 开发一个 PHP 项目。每当我们合并我们的一个分支时，系统和应用程序文件路径都特定于我们自己的机器。例子：

```
 $system_path = '/Users/otherGuy/Documents/Aptana/Systems-A-D-Project-Code/code_igniter/system';

    $application_folder = '/Users/otherGuy/Documents/Aptana/Systems-A-D-Project-Code/code_igniter/application'; 
```

我们都在本地环境中进行测试。我们可以做些什么来标准化这条路径，以便我们中的一个人在另一个合并他们的分支时不必更改路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:29:23.760

如果您可以在集成中手动部署，您可以尝试将 config.php 添加到 gitignore。

更好的解决方案是评估为什么需要配置中的完整路径。

为什么

```
$system_path = 'system'; 
```

不行？

# java - 等于 Java 7 中 2 个对象的比较

> ID：15366034
> 
> 赞同：-2
> 
> 时间：2013-03-12T15:58:12.677
> 
> 标签：java, object, equals

```
public class ObjectEqualsComparison {
      public static void main(String[] args) {      
           Object ob1 = new Object();  // address location 0×1234 
           Object ob2 = new Object();  // address location 0×2345 

           System.out.println(ob1 == ob2); // prints false correct
           System.out.println(ob1.equals(ob2)); //prints false which is incorrect//it should be true.

           //ob1 == ob2 gives false which is correct since you are comparing address/references .
           //ob1.equals(ob2) is also giving false.can you tell me why since we are comparing contents       
        }
} 
```

**编辑::我的问题是我是否需要覆盖 equals() 方法。如果这样，equals() 覆盖的方法应该是什么样子。请帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:59:30.973

的输出`System.out.println(ob1.equals(ob2));`是正确的，因为您正在比较 type 的实例`object`。如果您正在比较覆盖类型的实例，`equals`那将是另一回事！

例如，如果您有：

```
class SomeType{

    private Object comparisonField;

    public SomeType(Object comparisonValue){
        this.comparisonField = comparisonValue;
    }

    @overrides
    public int getHashCode(Object other){
        if(this.comparisonField == null)
            return super.getHashCode();

        return this.comparisonField.getHashCode();
    }

    @overrides
    public boolean equals(Object other){
        if(comparisonField == null || other == null)
           return super.equals(other);

        return comparisonField.equals(((SomeType)other).comparisonField);
    }
} 
```

比较时：

```
SomeType inst1 = new SomeType("SAME VALUE");
SomeType inst2 = new SomeType("SAME VALUE");

bool areEqual = inst1.equals(inst2);  // calls the overriden equals method on SomeType
                                      //   which would return TRUE 

// but if you use object:

Object obj1 = new Object();
Object obj2 = new Object();

bool areEqual = obj1.equals(obj2);    // will call equals on Object;
                                      //   and always return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:05:02.577

只有当两个对象是相同的实例，即内存中的相同对象时，Object 中的 equals() 的默认实现才会返回 true。每当您像以前那样创建 2 个单独的 Object 实例时，它们不会引用内存中的同一个对象，这就是它返回 false 的原因。

正如 Miky 所指出的，您可以通过在类中覆盖 equals() 来修改默认行为以提供自定义等效语义。

然而，Miky 的错误在于将你的类（例如，他的示例中的 SomeType 实例）转换为 Object 会改变 equals() 的结果。

```
boolean areEqual = obj1.equals(obj2); 
```

仍然会调用 SomeType 定义的被覆盖的 equals() 方法，而不管它被一般地引用为其超类型 Object 的事实。这就是多态的力量。

因此，要回答您最初的问题，您必须创建自己的类并在该类中覆盖 equals()，并使用执行对您的类有意义的任何等效检查的实现。例如，如果您有一个 Customer 类并且客户由他们的电子邮件地址唯一定义，那么在 Customer.equals() 中，您将比较电子邮件地址，如果它们相同则返回 true。

请记住，equals() 的签名接受 Object 参数。正确构造的 equals 实现将检查参数是否为 null 以及它是否是相同类型的实例。另请注意，当您覆盖 equals() 时，您必须覆盖 hashCode()。

有大量关于覆盖 equals() 和 hashCode() 的信息很容易找到，我建议您进行更多研究。一个好的起点总是“Effective Java”一书。

# c++ - 使用 boost::bind 调用 boost::Statechart 中的函数

> ID：15366038
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:22.817
> 
> 标签：c++, boost-bind, boost-function, boost-statechart

我正在尝试编写一个程序来将文件上传到 arduino。该程序可以打开一个串行端口并从 arduino 接收数据。当我尝试对处于状态图状态的函数使用回调时，问题就出现了，程序崩溃了。

我以前从未使用过 boost，并决定这是一个尝试的好机会。

我有一个带有基本转换的状态图对象：空闲；-> 开港；-> 端口开放；-> 等待曲线选择确认；-> 选择文件；-> 等待文件接收；-> 比较文件；-> 关闭程序；

还有一个端口关闭状态，但工作正常。

我的主程序只有以下

```
int main(int argc, char* argv[]){

  if(argc!=4){

    cerr<<"Usage: serialPort baudRate file"<<endl;

    return 1;

  }

  try {

    myInterface deviceInterface;
    stateMachine fsm(deviceInterface);
    fsm.initiate();

  } catch (std::exception& e) {

    cerr<<"Exception: "<<e.what()<<endl;

  }

} 
```

我可以打开串口并完美接收数据。当我尝试对处于 WaitForCurveChoiceConfirmation 状态的函数使用回调时，问题就出现了。arduino 每隔几秒钟发送一条消息，当程序收到完整消息时，我使用回调。一旦收到消息并调用回调，我的程序就会崩溃。

WaitForCurveChoiceConfirmationState 如下

```
class WaitForCurveChoiceConfirmation: public sc::state< WaitForCurveChoiceConfirmation, Active > {

    public:
        WaitForCurveChoiceConfirmation(my_context ctx);
        typedef boost::mpl::list<
            sc::custom_reaction< EvSensorChoiceConfirm > ,
            sc::custom_reaction< EvSensorChoiceTimeout >
        > reactions;

    sc::result react( const EvSensorChoiceConfirm & );
    sc::result react( const EvSensorChoiceTimeout & );
    void curveChoiceConfirmed(myMessage & msg);
};

WaitForCurveChoiceConfirmation::WaitForCurveChoiceConfirmation(my_context ctx): my_base(  ctx ){
    context< stateMachine >().getInterface().setfullMsgReceivedCallback(boost::bind(&WaitForCurveChoiceConfirmation::curveChoiceConfirmed, this, _1));
}

void WaitForCurveChoiceConfirmation::curveChoiceConfirmed(my1100Message & msg){
    std::cout << "curveChoiceConfirmed callback " << std::endl;
    if(msg.isExpectingTemperatureCurve()){

        post_event( EvSensorChoiceConfirm() );
    }
}

sc::result WaitForCurveChoiceConfirmation::react( const EvSensorChoiceConfirm & ){
    std::cout<<"EvSensorChoiceConfirm"<<std::endl;
    return transit<ChooseFile>();
}

sc::result WaitForCurveChoiceConfirmation::react( const EvSensorChoiceTimeout & ){
    return transit<PortClosing>();
} 
```

myInterface类的相关部分如下

```
class myInterface: public CallbackAsyncSerial
{

        /** Default constructor */
        myInterface();
        /** Default destructor */
        virtual ~myInterface();

        void processReceivedData(const char *data, unsigned int len);
        void setfullMsgReceivedCallback( boost::function<void(myMessage &msg )>);
        void clearfullMsgReceivedCallback( );

    private:

        boost::circular_buffer<char> * incomingMsg;
        static const int MESSAGE_DATA_LENGTH = 73; //length of data, not including flags or checksum
        static const uint8_t PROTOCOL_OUTGOING_LENGTH = 22; // number of characters in received message
        uint8_t receive_buffer[MESSAGE_DATA_LENGTH + 2]; // plus 2 for checksum
        char outgoingMsg[PROTOCOL_OUTGOING_LENGTH + 1];
        uint8_t statusByte;
        uint8_t statusByte2;
        uint8_t userByte;
        uint8_t userByte2;
        uint8_t notificationByte;
        uint8_t errorByte;
        uint8_t actionByte;

        int msgIndex ;
        int flagIndex ;
        int byteCount;
        int checkSum ;
        int dispPreambleCount ;
        int rcvCalculatedCheckSum ;
        char rcvdFlag;
        dispMsgState_t dispMsgState ;

        static const int FLAG_COUNT = 17;
        static const char flags[FLAG_COUNT] ;
        boost::function<void(myMessage & msg )> fullMsgReceivedCallback;

};

// this is used as a callback in CallBackAsyncSerial. It takes the data received by serial and processes it
void myInterface::processReceivedData(const char *data, unsigned int len)
{

    for (unsigned int i = 0; i < len; i++)
    {
        incomingMsg->push_back(data[i] );
        switch (dispMsgState){
                case DISP_PREAMBLE: {//msg start flags
                    //std::cout << "DISP_PREAMBLE "  <<std::endl;
                    if(incomingMsg->back() == START_FLAG){
                        dispPreambleCount++;
                        if (dispPreambleCount == 5){
                            dispMsgState = DISP_BYTE;
                            msgIndex = 0;
                            flagIndex = 0;
                            rcvCalculatedCheckSum = 5 * START_FLAG;
                            dispPreambleCount = 0;
                            rcvdFlag = 0;
                        }
                    }
                    else{
                        dispPreambleCount = 0; //reset counter if a different character was found

                    }
                    incomingMsg->pop_back();
                }
                break;
                case DISP_BYTE:{ //status, user, notification, error bytes
                    rcvCalculatedCheckSum += incomingMsg->back();
                    receive_buffer[msgIndex] = incomingMsg->back();
                    msgIndex++;
                    incomingMsg->pop_back();
                    if (msgIndex == 7){
                         dispMsgState = DISP_INTEGER_FLAG;
                    }
                }
                break;
                case DISP_INTEGER_FLAG:{ //integer flag
                    rcvCalculatedCheckSum += incomingMsg->back();
                    rcvdFlag = incomingMsg->back();
                    incomingMsg->pop_back();
                    dispMsgState = DISP_INTEGER;
                }
                break;
                case DISP_INTEGER:{ // integers
                    rcvCalculatedCheckSum += incomingMsg->back();
                    if(rcvdFlag == flags[flagIndex]){
                        receive_buffer[msgIndex] = incomingMsg->back();
                    }
                    incomingMsg->pop_back();
                    msgIndex++;

                    byteCount++;
                    if (byteCount >= 2){
                        if(msgIndex < 21){
                            dispMsgState = DISP_INTEGER_FLAG;
                        }
                        else{
                            dispMsgState = DISP_FLOAT_FLAG;
                        }
                        byteCount = 0;
                        flagIndex++;
                    }
                }
                break;
                case DISP_FLOAT_FLAG:{ // float flag
                    rcvCalculatedCheckSum += incomingMsg->back();
                    rcvdFlag = incomingMsg->back();
                    incomingMsg->pop_back();
                    dispMsgState = DISP_FLOAT;
                }
                break;
                case DISP_FLOAT:{ // floats
                    rcvCalculatedCheckSum += incomingMsg->back();
                    if(rcvdFlag == flags[flagIndex]){
                        receive_buffer[msgIndex] = incomingMsg->back();
                    }
                    incomingMsg->pop_back();

                    msgIndex++;

                    byteCount++;
                    if (byteCount >= 4){
                        if(msgIndex < 49){
                            dispMsgState = DISP_FLOAT_FLAG;
                        }
                        else{
                            dispMsgState = DISP_STRING_FLAG;
                        }
                        byteCount = 0;
                        flagIndex++;
                    }
                }
                break;
                case DISP_STRING_FLAG:{ // pressure flag
                    rcvCalculatedCheckSum += incomingMsg->back();
                    rcvdFlag = incomingMsg->back();
                    incomingMsg->pop_back();
                    dispMsgState = DISP_STRING;
                }
                break;
                case DISP_STRING:{ // pressure string
                     rcvCalculatedCheckSum += incomingMsg->back();
                    if(rcvdFlag == flags[flagIndex]){
                        receive_buffer[msgIndex] = incomingMsg->back();
                    }
                    incomingMsg->pop_back();
                    msgIndex++;

                    byteCount++;
                    if (byteCount >= 8){
                        if(msgIndex < 73){
                            dispMsgState = DISP_STRING_FLAG;
                        }
                        else{
                            dispMsgState = DISP_CHECKSUM;
                        }
                        byteCount = 0;
                        flagIndex++;
                    }
                }
                break;
                case DISP_CHECKSUM:{ // rcv checksum
                    if (byteCount == 0){
                         receive_buffer[msgIndex  ] = incomingMsg->back() ;
                         byteCount ++;

                    }
                    else{

                         receive_buffer[msgIndex ] = incomingMsg->back();

                        if (rcvCalculatedCheckSum == ((receive_buffer[msgIndex - 1 ] << 8) | receive_buffer[msgIndex ])) {

                            std::cout<<"FULL MSG CONFIRMED "<<std::endl;
                            statusByte = receive_buffer[0];
                            statusByte2 = receive_buffer[1];
                            userByte = receive_buffer[2];
                            userByte2 = receive_buffer[3];
                            notificationByte = receive_buffer[4];
                            errorByte = receive_buffer[5];
                            actionByte = receive_buffer[6];

                            myMessage * msg = new myMessage();
                            msg->initialise(statusByte,statusByte2,userByte,userByte2,notificationByte,errorByte,actionByte) ;
                            std::cout<<"made new msg"<<std::endl;
                            fullMsgReceivedCallback(*msg); //THIS IS WHERE IT CRASHES
                            std::cout<<"callback returned"<<std::endl;
                            delete msg;
                            std::cout<<"msg deleted"<<std::endl;

                            /* to convert string to float
                            #include <sstream>
                            using namespace std;
                            string s = "1.60000000000000000000000000000000000e+01";
                            istringstream os(s);
                                double d;
                            os >> d;
                            cout << d << endl;
                            */

                        }
                        else{
                            std::cout<<"FULL MSG NOT CONFIRMED "<<std::endl;
                            std::cout << std::hex << rcvCalculatedCheckSum <<"  " << std::hex<<  int((receive_buffer[msgIndex - 1 ] ) )<<" "<< std::hex << int(receive_buffer[msgIndex ] )<<std::endl;

                        }

                        dispMsgState = DISP_PREAMBLE;
                        rcvCalculatedCheckSum = 0;
                        msgIndex = 0;
                        byteCount = 0;

                    }
                    msgIndex++;
                    incomingMsg->pop_back();

                }
                break;

        }

    }
    //incomingMsg->insert( incomingMsg->end(), data, data + len );
    //for( boost::circular_buffer<char>::const_iterator i = incomingMsg->begin(); i != incomingMsg->end(); ++i)
    //    std::cout << *i   ;

    for( int i = 0; i < MESSAGE_DATA_LENGTH + 1; i++){
        //std::cout << std::hex<< (uint8_t)*i << ' '   ;

        std::cout << std::hex << receive_buffer[i] << ' ';

    }
    std::cout <<endl;

}

void myInterface::setfullMsgReceivedCallback(boost::function<void(my0Message & msg)> cb){
    fullMsgReceivedCallback = cb;
}

void myInterface::clearfullMsgReceivedCallback( ){
    fullMsgReceivedCallback = NULL;
} 
```

崩溃发生在“fullMsgReceivedCallback(*msg);”行 在处理接收数据中。我确定我只是错误地绑定了函数或错误地声明了函数指针对象。

谁能看到我哪里出错了？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:14:35.927

我已经设法解决了。这与状态图、绑定或函数无关。

调用回调是我的错误。我正在调用“收到完整消息”回调，即使它没有分配回调并且只是 NULL。我通过添加 and if 子句解决了这个问题：

```
if (fullMsgReceivedCallback!= NULL){
    Message * msg = Message ;
    std::cout<<"made new msg"<<std::endl;
    msg->initialise(statusByte,statusByte2,userByte,userByte2,notificationByte,errorByte,actionByte);
    std::cout<<" msg initialised"<<std::endl;
    fullMsgReceivedCallback(*msg);
    delete msg;
    std::cout<<"msg deleted"<<std::endl;
} 
```

# email - 如何使用 Mailchimp 嵌入内联附件？

> ID：15366039
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:26.063
> 
> 标签：email, inline, mailchimp

Mailchimp 没有附加文件的功能，但是，我试图通过将多部分标题设置为纯文本模式，然后粘贴下面的文件内容（设置正确的标题）来破解它。不幸的是，我不能完全让它工作。

我正在尝试发送日历邀请。

它在我的日历标题上方设置了一个纯文本标题。

[这是电子邮件如何通过的示例](http://pastebin.com/yHh1FVRa)（已删除个人详细信息）。Gmail 没有收到日历邀请 - 任何人都知道为什么吗？

[http://pastebin.com/yHh1FVRa](http://pastebin.com/yHh1FVRa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-12T15:59:34.710

正确，Mailchimp 不会让您发送电子邮件。请在此处查看有关原因的更多信息：[https ://blog.mailchimp.com/adding-file-attachments-to-mailchimp-email-campaigns/](https://blog.mailchimp.com/adding-file-attachments-to-mailchimp-email-campaigns/)

由于 Mailchimp 不希望您发送附件，因此我不建议您绕过这个。我还想象 Mailchimp 为此添加了一些保护，例如在发送之前删除部分消息。

您应该按照博客文章的描述链接您的内容。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-18T14:25:20.490

MailChimp 允许您输入文件的链接（并将文件托管在 MailChimp 上）。这可能会完成你想要的。请参阅[此知识库文章](http://kb.mailchimp.com/article/can-i-send-attachments-with-mailchimp)

我现在也在考虑发送一个谷歌日历邀请..一旦我成功我会回复。

# html - 清除浮动不起作用

> ID：15366043
> 
> 赞同：1
> 
> 时间：2013-03-12T15:58:32.783
> 
> 标签：html, css

我有一个网站在 FF 19（什么时候变得这么高？）、IE、Opera 中按预期工作，但在 Chrome 或 Safari 中没有。有时它在 Chrome/Safari 中的布局是正确的，但如果你按 F5 足够多，最终其中一个渲染会意外地布局它。

这是链接[http://www.spokanewastewater.org/Businesses.aspx](http://www.spokanewastewater.org/Businesses.aspx)

左侧边栏是`float:left`，内容都在一个 div 中`display:inline-block`，所有 3 个链接列表都是`float:left`如此，然后在“行业的角色”它`<br style="clear:both" />`前面有一个。然而有时 chrome/safari 喜欢将段落放在“重要链接”部分之上？这与webkit渲染有关吗？奇怪的是，它只是有时会被破坏，并且击中 f5 足以破坏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:01:09.303

不要使用 a`br`来控制`clear`. 将您的更改`br`为更合适的（`div`实际上）：

```
<div style="clear: both"></div> 
```

使用您网站上 Chrome 中的开发工具进行更改可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:20:37.937

在当今时代使用额外的标记来清除浮动是非常过时的。有 2 种被广泛接受的技术用于清除不需要额外标记的浮动。

[http://codepen.io/cimmanon/pen/qDjdr](http://codepen.io/cimmanon/pen/qDjdr)

溢出：

```
.parent {
    overflow: hidden;
} 
```

微清除修复：

[http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

```
.parent:before,
.parent:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.parent:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.parent {
    *zoom: 1;
} 
```

# ios - UIimageView在设置变换后丢失帧原点位置

> ID：15366047
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:36.337
> 
> 标签：ios, uiview, uiimageview

我有一个带有人脸图像的 UIImageView，然后我将旋转变换动画应用于该 UIImageView。

```
 self.transform = CGAffineTransformRotate(self.transform, M_PI / 16);

[UIView animateWithDuration:0.5
                  delay:0.0
                options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
             animations:^{

                 self.transform = CGAffineTransformRotate(self.transform, -1 * (M_PI/8));

             }
             completion:^(BOOL completed) {}]; 
```

然后我有另一个在 y 轴上上下移动的相同面部图像的动画。

```
[UIView animateWithDuration:0.2
                      delay:0.0
                    options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
                 animations:^{

                     self.transform = CGAffineTransformMakeTranslation(0, 10);
                 }
                 completion:^(BOOL completed){}]; 
```

执行第一个动画后，我需要更改 UIImageView 位置，然后启动第二个动画。

我有一个 stopAnimation 方法，可以删除动画、重置变换并设置 UIImageView 的位置。

```
-(void)stopAnimation:(NSInteger)currentAnimation{

    [self.layer removeAllAnimations];

    [self setTransform:CGAffineTransformIdentity];
    [self setFrame:initFrame];

    CGPoint position = [self getNextPosition:currentAnimation];
    //[self setTransform:CGAffineTransformMakeTranslation(0, 0)];
    CGRect frame = self.frame;
    frame.origin.x = position.x;
    frame.origin.y = position.y;
    self.frame = frame;
}

-(CGPoint)getNextPosition:(NSInteger)currentAnimation{

    CGPoint position = [[positions objectAtIndex:(currentAnimation-1)] CGPointValue];
    NSLog(@"Current animation:%u %f:%f", currentAnimation,position.x,position.y);
    return position;
} 
```

如果我在没有动画的情况下执行位置更改，则 UIImageView 位于屏幕的正确位置，但如果我使用动画运行，则动画效果很好，但 UIImageView 位置错误。

我尝试对 UIImageView 的中心进行相同的设置，但我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:12:53.217

尝试将第二个动画偏移第一个动画的持续时间。

```
[UIView animateWithDuration:0.2
                      delay:0.51 //delay by the duration of the first animation
                    options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse
                 animations:^{
                     self.transform = CGAffineTransformConcat(self.transform, CGAffineTransformMakeTranslation(0, 10));
                 }
                 completion:^(BOOL completed){}]; 
```

您也可以尝试将第二个动画块放在第一个动画的完成块中。

# android - HttpPost 返回一个 json 字符串，与浏览器不同

> ID：15366048
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:38.623
> 
> 标签：android, json, post, https

当我去

> [https://api.github.com/users/jkirkell/gists](https://api.github.com/users/jkirkell/gists)

我收到一个包含良好数据的 json。

**IE**

```
[
  {
    "url": "https://api.github.com/gists/5143977",
    "forks_url": "https://api.github.com/gists/5143977/forks",
    "commits_url": "https://api.github.com/gists/5143977/commits",
    "id": "5143977",
    etc. 
```

但是，如果我使用此代码读取相同的地址：

```
String jsonString = null;
InputStream is = null;

HttpResponse response = null;
try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("https://api.github.com/users/jkirkell/gists");
        response = httpclient.execute(httppost);
}catch(Exception e){
        throw e;
} 
```

我收到这个 json 字符串：

```
{"message":"Not Found"} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:59:36.810

它是`Get`请求，但您使用的是 HTTP 发布。

试着像这样阅读

诠释 k=0;

```
 URL url = new URL(yoururl);
         InputStream input=url1.openStream();
         BufferedInputStream bis=new BufferedInputStream(input);
         ByteArrayBuffer baf=new ByteArrayBuffer(1000);
         while((k=bis.read())!=-1)
         {
         baf.append((byte)k);
         }
        String data=new String(baf.toByteArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:01:48.400

您应该使用`HttpGet`而不是`HttpPost`：

```
HttpClient httpclient = new DefaultHttpClient();
HttpGet request = new HttpGet("https://api.github.com/users/jkirkell/gists");
response = httpclient.execute(request); 
```

# node.js - 如何使用 Socket.io-client 获取 Node.js 实例以与另一个在 cloudfoundry 上运行 Socket.io 的 Node.js 实例通信？

> ID：15366049
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:39.650
> 
> 标签：node.js, socket.io

我正在尝试使用 Socket.io 和 Socket.io-client 使用 cloudfoundry 连接 2 个独立的 Node.js 服务器。当我使用本地运行的两个实例测试代码时，下面的 socket.io-client Node.js 代码按预期工作。当 socket.io 服务器是 cloudfoundry 时，浏览器中的一个简单的 javascript 客户端能够连接并正常工作。但是，当我尝试使用 socket.io-client Node.js 连接到在 cloudfoundry 上运行的实例时，它会以几种不同的方式失败。它要么什么都不做，尝试连接两次然后失败，要么只连接以立即断开连接。

我唯一能想到的是 cloudfoundry 上的 nginx 导致了一些问题。对我来说，浏览器中的 javascript 客户端可以连接并发送和接收数据是没有意义的，而基本相同的 Node.js 代码运行在与 Web 浏览器无法连接的同一台机器上。有什么想法，还是我应该离开 Cloudfoundry？

```
var socketioclient = require('socket.io-client').connect('http://someapiaddress.cloudfoundry.com');

socketclient = socketioclient.socket;
socketclient.on('connect_failed', function(){
    console.log('Connection Failed');
});

socketclient.on('connecting', function(){
    console.log('connecting')
});

socketclient.on('connect', function(socket) {
    console.log('Connected!');

    socketclient.on('message', function(data){
       console.log(data)
    });
    socketclient.on('disconnect', function(){
       console.log('disconnect')
 }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:22:02.053

是的，`nginx`如果您运行多个服务器实例，每次都拦截请求并将 socket.io 请求发送到不同的服务器实例，则会产生问题。这就是为什么您会收到许多不同的错误：

1.  什么也没做，
2.  尝试连接两次然后失败，或者
3.  确实连接只是为了立即断开连接。

你必须使用调用的东西`sticky sessions`来处理这个问题。请参阅此[链接](http://blog.cloudfoundry.com/2013/01/24/scaling-real-time-apps-on-cloud-foundry-using-node-js-and-redis/)，该链接解释了问题并提供了解决方案。

# java - 堆栈和堆的内存分配

> ID：15366050
> 
> 赞同：0
> 
> 时间：2013-03-12T15:58:39.960
> 
> 标签：java, memory-management

当我使用 xms 和 xmx 指定内存时，它是仅为堆分配内存还是包含用于所有目的的内存？

我遇到的问题是，如果 xmlx 仅用于堆，那么我们如何限制 Java 的总内存分配？

并说如果我指定 xss 选项，那么这将是除了 xmlx 分配吗？

# python - 将可变大小子列表的嵌套列表展平为 SciPy 数组

> ID：15366053
> 
> 赞同：11
> 
> 时间：2013-03-12T15:58:51.817
> 
> 标签：python, numpy, scipy

如何使用 numpy/scipy 来展平具有不同大小子列表的嵌套列表？速度非常重要，而且列表很大。

```
 lst = [[1, 2, 3, 4],[2, 3],[1, 2, 3, 4, 5],[4, 1, 2]] 
```

有什么比这更快的吗？

```
 vec = sp.array(list(*chain(lst))) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T16:11:28.583

[np.fromiter](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromiter.html)怎么样：

```
In [49]: %timeit np.hstack(lst*1000)
10 loops, best of 3: 25.2 ms per loop

In [50]: %timeit np.array(list(chain.from_iterable(lst*1000)))
1000 loops, best of 3: 1.81 ms per loop

In [52]: %timeit np.fromiter(chain.from_iterable(lst*1000), dtype='int')
1000 loops, best of 3: 1 ms per loop 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T16:07:59.080

你可以试试[numpy.hstack](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html)

```
>>> lst = [[1, 2, 3, 4],[2, 3],[1, 2, 3, 4, 5],[4, 1, 2]]
>>> np.hstack(lst)
array([1, 2, 3, 4, 2, 3, 1, 2, 3, 4, 5, 4, 1, 2]) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-12T16:11:37.197

从迭代器创建 numpy 数组的最快方法是使用`numpy.fromiter`：

```
>>> %timeit numpy.fromiter(itertools.chain.from_iterable(lst), numpy.int64)
100000 loops, best of 3: 3.76 us per loop
>>> %timeit numpy.array(list(itertools.chain.from_iterable(lst)))
100000 loops, best of 3: 14.5 us per loop
>>> %timeit numpy.hstack(lst)
10000 loops, best of 3: 57.7 us per loop 
```

如您所见，这比转换为列表要快，而且比`hstack`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-12T16:08:22.853

试试怎么样：

```
np.hstack(lst) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T16:07:08.390

使用[`chain.from_iterable`](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)：

```
vec = sp.array(list(chain.from_iterable(lst))) 
```

`*`如果 iterable 有很多子列表，这可以避免使用which 处理起来非常昂贵。

另一个选项*可能*是`sum`列表：

```
vec = sp.array(sum(lst, [])) 
```

但是请注意，这将导致[二次重新分配](http://www.python.org/doc/essays/list2str.html)。像这样的东西表现*得*更好：

```
def sum_lists(lst):
    if len(lst) < 2:
        return sum(lst, [])
    else:
        half_length = len(lst) // 2
        return sum_lists(lst[:half_length]) + sum_lists(lst[half_length:]) 
```

在我的机器上，我得到：

```
>>> L = [[random.randint(0, 500) for _ in range(x)] for x in range(10, 510)]
>>> timeit.timeit('sum(L, [])', 'from __main__ import L', number=1000)
168.3029818534851
>>> timeit.timeit('sum_lists(L)', 'from __main__ import L,sum_lists', number=1000)
10.248489141464233
>>> 168.3029818534851 / 10.248489141464233
16.422223757114615 
```

如您所见，速度提高了 16 倍。`chain.from_iterable`甚至更快：

```
>>> timeit.timeit('list(itertools.chain.from_iterable(L))', 'import itertools; from __main__ import L', number=1000)
1.905594825744629
>>> 10.248489141464233 / 1.905594825744629
5.378105042586658 
```

另一个 6 倍加速。

* * *

我寻找一个“纯python”解决方案，不知道numpy。我相信~~Abhijit~~ unutbu/senderle 的解决方案是您的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-19T02:28:39.503

使用函数展平列表

```
>>> flatten = lambda x: [y for l in x for y in flatten(l)] if type(x) is list else [x]
>>> flatten(lst) 
```

# maven - 如何让 maven-site-plugin 解析我的多模块 Maven 项目的父 pom.xml？

> ID：15366056
> 
> 赞同：4
> 
> 时间：2013-03-12T15:58:57.387
> 
> 标签：maven, maven-site-plugin

我有一个花园品种的 Maven 项目。它有几个模块。因此，根`pom.xml`以大 Maven 方式充当父节点和聚合器。

该项目可以正常构建和安装。

根`pom.xml`继承自一个公司`pom.xml`，其节如下：

```
<parent>
  <groupId>foo</groupId>
  <artifactId>bar</artifactId>
  <version>16</version> <!-- look, Ma, no SNAPSHOT -->
</parent> 
```

当我`mvn site`针对这个 root运行时`pom.xml`，`maven-site-plugin`版本 3.2 报告它无法解析父级。

父级当然存在于我的本地存储库和本地 Nexus 中。生命周期的任何其他阶段都没有解决父级问题。

其他人[报告](http://mail-archives.apache.org/mod_mbox/maven-users/201211.mbox/%3CDUB104-W20C0148497A79BC339A494A6600@phx.gbl%3E)了这个问题。关于这个主题还有[另一个 StackOverflow 问题，](https://stackoverflow.com/questions/11260717/non-resolvable-parent-pom-when-building-maven-3-project-site)但它的问题与我的问题完全一样并不是很明显。

添加`<relativePath/>`到`<parent>`上面的节（我的第一个想法）并没有以任何方式改变行为。

我怎样才能得到`maven-site-plugin`解决父母的问题`pom.xml`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T20:30:56.783

这是Maven 站点插件中的一个[错误。](https://issues.apache.org/jira/browse/MSITE-640)由于各种原因，Maven 站点插件只会在它认为是 Maven 中心的地方寻找依赖关系。

因此，您要么必须：

1.  拥有一个`<mirror>`通过您自己的 Nexus 服务器代理中心的元素。
2.  在本地 Maven 存储库中，找到父`pom`工件区域。编辑其`_maven.repositories`文件，以便将任何提及存储库名称本身的内容替换为空字符串。

我选择了后一个选项。在此之后，构建运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T16:01:36.447

显然降级到 3.3 的站点插件也可以工作。:-(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T05:12:29.903

2.  文件名是`_remote.repositories`(Maven 3.1.1) 注释掉这些行也可以。

# ruby-on-rails - 在 Angular 和 Rails 中访问数据对象

> ID：15366057
> 
> 赞同：1
> 
> 时间：2013-03-12T15:59:02.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, angularjs

我刚开始学习 Angular 并观看了 Ryan Bates 的[Railscast](http://railscasts.com/episodes/405-angularjs)以及 BerylliumWork 的[教程](http://blog.berylliumwork.com/2012/09/tutorials-on-angularjs-and-rails-2.html)，但我仍在努力弄清楚如何从我的 Rails 服务器访问数据。

我在这里有一个非常简单的用例。我想在视图中访问用户的名字。

这是查看代码：

```
 <div ng-controller="UserCtrl">
  {{user.first_name}}
 </div> 
```

这是咖啡脚本文件：

```
app = angular.module("app", ["ngResource"])
app.factory "User", ["$resource", ($resource) ->
  $resource("/users/:id", {id: "@id"}, {
    show: {method: "GET"}
    })
]

@UserCtrl = ["$scope", "User", ($scope, User) ->
  $scope.users = User.query()
  $scope.user = User.show(id: **1**)
] 
```

这是我的控制器：

```
def show
  respond_with User.find(params[:id])
end 
```

如您所见，我在 $scope.user 中有一个硬编码的 id，它显示在页面上。同样，如果我使用 ng-app="user in users"...{user.first_name} 之类的东西，我会得到完整的用户列表。

我如何获得一个用户实例？使用实例变量，而不是我的硬编码“1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:05:17.350

默认情况下：

*   $resource.query() 用于获取对象列表。
*   $resource.get({params}) 用于获取单个对象

在您的情况下，您需要`$scope.user = User.get({id: 1})`.

# perl - Perl Rose::DB 非静态数据源注册

> ID：15366067
> 
> 赞同：0
> 
> 时间：2013-03-12T15:59:16.900
> 
> 标签：perl, orm, rose-db-object

我正在编写一个使用 Rose::DB 进行持久性抽象的 perl 应用程序，但是在使用配置文件中的值初始化我的 Rose::DB 子类时遇到了问题。

该文档始终提供硬编码示例，例如：

```
# Register your lone data source using the default type and domain
__PACKAGE__->register_db(
  driver   => 'pg',
  database => 'my_db',
  host     => 'localhost',
  username => 'joeuser',
  password => 'mysecret',
); 
```

但是，为了可维护性，我想在运行时从单独的配置文件中填写这些值。

正在使用的配置文件（Config::General 格式）部分：

```
<database> 
    active_domain       development

    <db_domain development>
        db_driver       mysql
        db_name         stats_dev
        db_host         localhost
        db_user         stats_dev
        db_password     stats_dev
    </db_domain>
    <db_domain production>
        db_driver       mysql
        db_name         stats_prd
        db_host         localhost
        db_user         stats_prd
        db_password     stats_prd
    </db_domain>
</database> 
```

我的 Rose::DB 子类，带有初始化方法：

```
package Utils::DBUtils;

use strict;
use base qw(Rose::DB);

__PACKAGE__->use_private_registry;

sub registerAllDBs {
    my ($self,$config_obj) = @_;
    my $db_config = $config_obj->getDatabaseSection(); ## subconfig starts here
    my $def_domain = $db_config->{"active_domain"};

    __PACKAGE__->default_domain($def_domain);
    __PACKAGE__->default_type('main');

    my $db_domains = $db_config->{'db_domain'};
    foreach my $domain (keys %$db_domains) {
        my $domain_conf = $db_domains->{$domain};

        __PACKAGE__->register_db(
            domain => $domain,
            type => __PACKAGE__->default_type(),
            driver   => $domain_conf->{'db_driver'},
            database => $domain_conf->{'db_name'},
            host     => $domain_conf->{'db_host'},
            username => $domain_conf->{'db_user'},
            password => $domain_conf->{'db_password'}
        );          
    }
}
1; 
```

然后在我的主脚本上，我调用该方法一次以注册所有数据源：

```
 Utils::DBUtils->registerAllDBs($conf); 
```

我的持久对象都继承自 PersistentObject 包，该包使用以下命令初始化 DB 对象：

```
 sub init_db { Utils::DBUtils->new() } 
```

但是，这并不像我预期的那样工作。我收到一个编译时错误，说明：

```
 No database information found for domain 'default' and type 'default' and no driver type specified in call to Utils::DBUtils->new(...) at PersistentObject.pm line 9 
```

问题似乎在于 Rose::DB 期望在编译时拥有完整的配置数据，这是不可能提供的，因为它来自配置文件。

我在这里错过了什么吗？不能动态初始化 Rose::DB 对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:54:34.970

我已经设法让它工作，似乎 Rose::DB 子类在编译时至少需要一个 register_db 语句。

（丑陋的）解决方案是添加

```
__PACKAGE__->register_db(
  driver   => 'mysql',
  database => 'fake',
  host     => 'localhost',
  username => 'fake',
  password => 'fake'
); 
```

到包定义。

# php - 提取字符串的某个部分

> ID：15366069
> 
> 赞同：0
> 
> 时间：2013-03-12T15:59:23.657
> 
> 标签：php, string

我有一个数组，其中包含以下值之一

```
<meta itemprop="datePublished" content="Mon Mar 04 08:52:45 PST 2013"/> 
```

我如何从那里提取 2013 年 3 月 4 日？这是一个动态的领域，并且永远在变化。我似乎找不到正确的方法

我希望能够回显 $datepub; 只是有日期。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:12:25.263

一个非常简单的方法可能是爆炸它：

```
//dividing the string by whitespaces
$parts = explode(' ', $datepub);  

echo $parts[1]; //month (Mar)
echo $parts[2]; //day (04)
echo $parts[5]; //year (2013) 
```

然后您可以使用[createFromFormat](http://www.php.net/manual/en/datetime.createfromformat.php)函数将其转换为任何其他所需的格式：

```
//creating a valid date format
$newDate = DateTime::createFromFormat('d/M/Y', $parts[1].'/'.$parts[2].'/'.$parts[5]);

//formating the date as we want
$finalDate = $newDate->format('F jS Y'); //March 4th 2013 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:17:27.277

使用[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)使用代码示例扩展[Marc B](https://stackoverflow.com/users/118068/marc-b)的答案：

```
$data = '<?xml version="1.0"?><meta itemprop="datePublished" content="Mon Mar 04 08:52:45 PST 2013"/>'; // your XML
$xml = simplexml_load_string($data);

// select all <meta> nodes in the document that have the "content" attribute
$xpath1 = $xml->xpath('//meta[@content]');
foreach ($xpath1 as $key => $node) {
    echo $node->attributes()->content; // Mon Mar 04 08:52:45 PST 2013
}

// Marc B's select "content" attribute for all <meta> nodes in the document
$xpath2 = $xml->xpath('//meta/@content');
foreach ($xpath2 as $key => $node) {
    echo $node->content; // Mon Mar 04 08:52:45 PST 2013
} 
```

# asp.net-mvc - MVC RedirectAction 从创建到编辑

> ID：15366070
> 
> 赞同：0
> 
> 时间：2013-03-12T15:59:24.173
> 
> 标签：asp.net-mvc, vb.net

```
 <HttpPost()> _
        Function Create(ByVal cbadata As CBAData) As ActionResult
            If ModelState.IsValid Then
                db.CBADatas.Add(cbadata)
                '    db.SaveChanges()
                Return RedirectToAction("Edit", "CBAData", cbadata)
            End If
        End Function

    '
    ' GET: /CBAData/Edit/5

    Function Edit(Optional ByVal id As Integer = Nothing) As ActionResult
        Dim cbadata As CBAData = db.CBADatas.Find(id)
        If IsNothing(cbadata) Then
            Return HttpNotFound()
        End If
        ViewBag.idCustomer = New SelectList(db.Customers, "id", "Name", cbadata.idCustomer)

        Return View(cbadata)
    End Function

    '
    ' POST: /CBAData/Edit/5

    <HttpPost()> _
    Function Edit(ByVal cbadata As CBAData) As ActionResult
        If ModelState.IsValid Then
            db.Entry(cbadata).State = EntityState.Modified
            db.SaveChanges()
            Return RedirectToAction("Index")
        End If

        ViewBag.idCustomer = New SelectList(db.Customers, "id", "Name", cbadata.idCustomer)
        Return View(cbadata)
    End Function 
```

我正在尝试使用 Create 视图作为创建新 CBAData 项目的启动点。我希望他们选择一些简单的信息，然后继续进入编辑视图，如果模型有效，数据最终将被保存。

上面的代码不能正确导航。当它到达 db.CBADatas 上的 Find 方法时，它不存在于列表中。这可能吗？

是不是因为包括上下文在内的所有内容都为编辑视图而被处理和重新创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:10:24.153

调用编辑操作，如

```
<HttpPost()> _
    Function Create(ByVal cbadata As CBAData) As ActionResult
        If ModelState.IsValid Then
            db.CBADatas.Add(cbadata)
            '    db.SaveChanges()
            Return RedirectToAction("Edit", "CBAData", new{ id = cbadata})
        End If
    End Function 
```

# c++ - 用于字符串的 C++ fwrite 和 fread

> ID：15366073
> 
> 赞同：2
> 
> 时间：2013-03-12T15:59:27.997
> 
> 标签：c++, arrays, string, fwrite, fread

这是在二进制文件中写入字符串的一段代码：

```
std::string s("Hello");
unsigned int N(s.size());
fwrite(&N,sizeof(N), 1 ,bfile);
fwrite(s.c_str(),1, N ,bfile);
fflush(bfile); 
```

读取字符串的部分：

```
std::string new_s("");
unsigned int N(0);
fread(&N,sizeof(N),1,bfile);
char* c(new char[N+1]);
fread(c,1,N,bfile);
c[N] = '\0';
new_s = c;
delete[] c; 
```

问题 ：

*   有没有更简单的方法来做到这一点？
*   当我写/读文件时，我应该考虑`'\0'`来自的空字符`c_str()`吗？

我有一个与以下相关的附带问题`char* c(new char[N])`：

*   我知道 C++ 不允许使用例如 int 创建静态数组`a[size_of_array]`，因此解决方案是使用创建`new[]`和删除的指针`delete[]`。这是唯一的解决方案（如果我不能使用 a `std::vector < int >`），这个解决方案会有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:18:47.543

首先，`std::string::size()`不考虑 NUL 字符，因此您的二进制文件将不包含该字符。您的序列化策略很好（首先是大小，然后是字符集。）

至于阅读，最好使用 a `vector`（在 c++03 中，或`string`直接在 c++11 中）。

因此，一旦您确定了大小 ( `N`)，那么：

```
std::vector<char> content(N, 0); // substitute std::string if possible
fread(&content[0],1,N,bfile);
// Construct the string (skip this, if you read into the string directly)
std::string s(content.begin(), content.end()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:12:08.470

保持您对 cstdio 的选择，最好是：

```
fprintf(bfile,"%d ",N);
fwrite(s.data(),1,N,bfile);
if ( ferror(bfile) ) die("writing bfile"); 
```

```
char c;
if ( fscanf(bfile,"%d%c",&N,&c)  != 2 
  || c != ' ' ) die("bfile metadata");
vector<char> buf(N);
if ( fread(&buf[0],1,N,bfile) != N ) die("bfile data");
s.assign(&buf[0],N); 
```

二进制序列化格式是痛苦的秘诀。在没有具体证据表明它们会为您带来一些值得您花费数天或数周时间的好处的情况下，完全避免使用它们。

C++ 字符串实际上可以包含空字节。序列化代码不是施加限制的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:12:03.617

像这样的东西：

```
#include <iostream>
#include <fstream>

int main(int argc, char** argv) {

        std::string someString = argc > 1? argv[1]:"Hello World";
        std::ofstream out("fileName.txt",std::ios::binary | std::ios::out);
        size_t len = someString.size();
        out.write((const char*)&len, 4);
        out<<someString; // out.write(someString.c_str(), someString.size())
        out.flush();
        out.close();

        std::ifstream in("fileName.txt",std::ios::binary | std::ios::in);
        in.read((char*)&len, 4);
        char *buf = new char[len];
        in.read(buf, len);
        std::string someStringRead(buf, len);
        delete[] buf; // this might be better with scoped_array
        in.close();

        std::cout<<"Read ["<<someStringRead<<"]"<<std::endl;
        return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T16:10:51.277

```
#include <fstream.h>
...
char buffer[100];
ofstream bfile("data.bin", ios::out | ios::binary);
bfile.write (buffer, 100); 
```

# python - 如何创建一个从 0 到 1 的随机浮点数组

> ID：15366078
> 
> 赞同：0
> 
> 时间：2013-03-12T15:59:45.120
> 
> 标签：python, list, random

我想创建一个大小为 100 的随机浮点数组，数组中的值从 0 到 1 不等。我已经尝试过`random.sample(range(1),100)`，但这不起作用。我怎样才能得到我想要达到的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:00:23.360

```
[random.random() for _ in range(100)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:34:44.217

如果您将进行大量数组计算，请考虑使用 numpy 库 ( [http://www.numpy.org/](http://www.numpy.org/) )。使用 numpy，您可以使用以下功能`numpy.random.random`：

```
>>> a = numpy.random.random(100) 
```

# java - 保存操作 - 文件不可外部编辑

> ID：15366080
> 
> 赞同：0
> 
> 时间：2013-03-12T15:59:50.883
> 
> 标签：java, jfilechooser

我正在使用 JFileChooser，它工作正常。

```
File a = new File(strSavepath);
JFileChooser fc = new JFileChooser(a); 
```

问题是我无法使用记事本或其他编辑器手动编辑保存的文件，除非我使用 VisualVM 手动运行垃圾收集器。

我是否遗漏了什么或其他人也观察到了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:58:54.310

正如@TomG 指出的那样，关闭流意味着流（即，如果您不再使用该文件，则您的应用程序）不再具有该文件的句柄，但这并不意味着 VisualVM 也释放该句柄（尽管它应该，我认为）。要检查是否出于某种错误或类似原因，VisualVM 在您的应用程序发布后是否保留文件的句柄，请在 VisualVM 之外运行您的应用程序，然后尝试手动保存文件。如果还不可能，您将打开流。否则，您可以使用[Windows 句柄](http://technet.microsoft.com/en-us/sysinternals/bb896655.aspx)或类似工具来确定文件中实际保留句柄的是 VisualVM 还是其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:50:45.027

*“当你消除了不可能的事情后，剩下的无论多么不可能，都必须是真相”*（SH）

你必须有一个*无限循环*。调试、记录可能有助于说服自己。或者以其他方式混淆了另一个文件路径。

（还要说清楚：`a`是目录，而不是文件本身。）

# iphone - RestKit XML 对 NSDictionary 的响应

> ID：15366082
> 
> 赞同：1
> 
> 时间：2013-03-12T16:00:01.063
> 
> 标签：iphone, ios, restkit

我是 RestKit 的新手，我正在使用 0.20。

我有一种情况，我调用检索和 XML 文件。XML 文件包含一个或多个 XML 标记，其值类似于以下内容：

```
<Configuration>
  <CustomParm1>value1</CustomParm1>
  <SomeUnknownKey>anotherValue</SomeUnknownKey>
  <AnotherUnknownKey>yetAnotherValue</AnotherUnknownKey>
</Configuration> 
```

在拨打电话之前，我不知道标签名称。我只需要在字典中返回 XML，其中每个标签名称作为键，相关值作为字典中的值。

我已经设置了对象管理器并按如下方式进行调用：

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://someurl.com"]];
[RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"application/xml"];
[RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"text/xml"];

[manager getObjectsAtPath:@"/somepath/somefile.xml" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSLog(@"success");
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog (@"failure: operation: %@ \n\nerror: %@", operation, error);
}]; 
```

我得到以下回复：

> 错误：错误域=org.restkit.RestKit.ErrorDomain Code=1001“没有响应描述符与加载的响应匹配。” UserInfo=0xce67120 {NSErrorFailingURLStringKey= [http://someurl.com/somefile.xml](http://someurl.com/somefile.xml) , NSLocalizedFailureReason=从 URL ' [http://someurl.com/somefile.xml](http://someurl.com/somefile.xml) ' 加载了 200 响应，未能匹配所有 (0)响应描述符:, NSLocalizedDescription=没有响应描述符与加载的响应匹配。, keyPath=null, NSErrorFailingURLKey= [http://someurl.com/somefile.xml](http://someurl.com/somefile.xml) , NSUnderlyingError=0xce6c950 "在搜索的关键路径中找不到可映射的对象表示。" }

我看到的所有映射示例我必须知道标记名称是什么才能完成映射。

有没有一种方法可以在不知道映射的标签名称的情况下简单地将结果返回到字典中？

# javascript - 快速按钮单击会导致在按钮下方的字段上进行选择

> ID：15366083
> 
> 赞同：1
> 
> 时间：2013-03-12T16:00:01.253
> 
> 标签：javascript, jquery, css, slider

我试图使用 jQuery 创建一个滑块，但我遇到了一些新手问题。我制作了一个动态插入的按钮和一个动态插入的支架。当我单击此按钮的速度超过 2 秒时，它会选择按钮后面的支架字段。

我的 HTML：

```
<div id="slidingmenu">
    <img src="http://www.hayvansevgisi.net/resimler/wallpaper/ceylan-1.jpg" alt="main1.png" />
    <img src="http://www.belgeselizlesek.com/wp-content/uploads/hayvanlar-resimi-4.jpeg" alt="main2.png" />
    <img src="http://img03.blogcu.com/v2/images/orj/h/a/y/hayvanlaralemi/hayvanlaralemi_13323141966.jpg" alt="main3.png" />
    <img src="http://img03.blogcu.com/v2/images/orj/h/a/y/hayvanlaralemi/hayvanlaralemi_1333958876147.jpg" alt="main4.png" />
    <img src="http://www.hayvansevgisi.net/resimler/wallpaper/kus-1503.jpg" alt="main5.png" />
    <img src="http://ipekbozbay.files.wordpress.com/2011/04/hayvanlar0034qm5.jpg" alt="main6.png" />
    <img src="http://g.mynet.com/i/42/122715-hayvanlar-noel---13.jpg" alt="main7.png" />
    <img src="http://elmusavvir.files.wordpress.com/2008/10/koala-doga-canli-agac-resim-hayvanlar.jpg" alt="main8.png" />
    <img src="http://www.herseyebedel.com/wp-content/uploads/2012/09/Hayvanlar-Duvar-Ka%C4%9F%C4%B1tlar%C4%B1-25.jpg" alt="main9.png" />
    <img src="http://www.hayvanresim.com/wp-content/uploads/Memeli-hayvanlar-7.jpeg" alt="main10.png" />
</div> 
```

CSS：

```
#slidingmenu {
    width: 380px;
    height: 225px;
} 
```

我如何使用它：

```
$(document).ready(function () {
    $('#slidingmenu').bslider();
}); 
```

我的新手功能：

```
; (function () {
    // Main function
    $.fn.bslider = function () {
        // Static
        var i = 0,
            img = "",
            here = 0,
            result = 0,
            butwidth = 45,
            interval = 5000,
            loc = new Array([]),
            mywidth = this.width(),
            myheight = this.height(),
            count = this.children('img').length,
            midwidth = mywidth * count,
            urlLeft = 'http://img842.imageshack.us/img842/613/arrowleftr.png',
            urlRight = 'http://img7.imageshack.us/img7/4593/arrowrightq.png';
        // Cache Images and calgulate locations first
        for (i = 0; i < count; i++) {
            // Cache Images
            var elem = this.children('img').eq(i);
            img = img + '<img src="' + elem.attr('src') + '" alt="' + elem.attr('alt') + '" />';
            // Calgulate locations
            loc[i] = result;
            result = result - mywidth;
        }
        // Clean
        this.empty();
        // Slider
        var obj = this.addClass("bslider").css({
            padding: 0,
            width: mywidth,
            height: myheight,
            margin: '20px auto',
            borderRadius: '20px 20px 20px 20px'
        });
        // Append Image container
        var mid = $('<div class="mid"></div>').appendTo(obj).css({
            padding: 0,
            width: mywidth,
            height: myheight,
            overflow: 'hidden',
            position: 'absolute',
            display: 'inline-block',
            zIndex: 0
        });
        $('<div class="container">' + img + '</div>').appendTo(mid).css({
            padding: 0,
            width: midwidth,
            height: myheight,
            position: 'relative',
            display: 'inline-block',
            zIndex: -1
        }).children('img').css({
            width: mywidth,
            height: myheight,
            float: 'left',
            clear: 'none'
        });
        // Append Left button
        $('<div class="left"></div>').insertBefore(mid).css({
            float: 'left',
            clear: 'none',
            display: 'block',
            position: 'absolute',
            zIndex: 1,
            margin: 0,
            opacity: 0,
            width: butwidth,
            height: myheight,
            cursor: 'pointer',
            background: 'url(' + urlLeft + ') no-repeat left center'
        }).hover(function () {
            $(this).animate({ opacity: 0.6 }, 'fast');
        }).mouseleave(function () {
            $(this).animate({ opacity: 0 }, 'fast');
        }).click(function (e) {
            e.preventDefault();
            if (here > 0) { here--; } else { here = count - 1; }
            $('.mid .container').animate({ left: loc[here] }, 'fast');
        });
        // Append Right button
        $('<div class="right"></div>').insertBefore(mid).css({
            float: 'right',
            clear: 'none',
            display: 'inline',
            position: 'relative',
            zIndex: 1,
            margin: 0,
            opacity: 0,
            width: butwidth,
            height: myheight,
            cursor: 'pointer',
            background: 'url(' + urlRight + ') no-repeat right center'
        }).hover(function () {
            $(this).animate({ opacity: 0.6 }, 'fast');
        }).mouseleave(function () {
            $(this).animate({ opacity: 0 }, 'fast');
        }).click(function (e) {
            e.preventDefault();
            if (here < count - 1) { here++; } else { here = 0; }
            $('.mid .container').animate({ left: loc[here] }, 'fast');
        });
        // Default behavior
        function doIt() { obj.find('.right').click(); }
        var int = setInterval(doIt, interval);
        // Allow chain
        return obj;
    };
} ()); 
```

如何停止在此字段上的选择？

小提琴：http: [//jsfiddle.net/BerkerYuceer/yTWnN/](http://jsfiddle.net/BerkerYuceer/yTWnN/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:09:39.060

您可以使用 css 停止选择。

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:08:52.980

我想“破解”是使用合适的回调（例如 onSlideAfter）清除文档选择。例如：

```
window.getSelection().removeAllRanges(); 
```

编辑 - 这是一种更跨浏览器的方式：

```
function clearSelection() {
    var sel;
    if(document.selection && document.selection.empty) {
        document.selection.empty();
    } else if(window.getSelection) {
        sel = window.getSelection();
        if(sel.empty) sel.empty();
        if(sel.removeAllRanges) sel.removeAllRanges();
    }
} 
```

来源：[http ://upshots.org/javascript/javascript-cross-browser-clear-selection](http://upshots.org/javascript/javascript-cross-browser-clear-selection)

# objective-c - 只合成需要的东西是一种好的内存管理实践吗？

> ID：15366087
> 
> 赞同：0
> 
> 时间：2013-03-12T16:00:14.657
> 
> 标签：objective-c

我正在创建一个具有超过 1 种样式的自定义视图类。这意味着某些属性有时可能会被初始化，而另一些可能不会。只合成每次都会用到的属性是否明智？

例如：

这是它包含的属性：

```
@property (nonatomic, assign) NSUInteger style;
@property (nonatomic, retain) UIImageView *imageView;
@property (nonatomic, retain) UILabel *descriptionLabel;
- (id)initWithStyle:(NSUInteger)style; 
```

如果样式为**StyleDefault**，则上述所有内容都将被初始化并使用。如果样式是**StyleMinimal** ，则只有 imageView 将被初始化和使用。

仅合成 imageView 是一种良好的内存管理做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:06:53.747

我认为您误解了合成属性的性质。

声明该属性不会为该属性创建内存，您可以自己执行此操作。Synthesizing 只是设置了 KVC 的 setter 和 getter——而对于现代版本的 Xcode，你甚至不需要这样做。

因此，在您的问题中 - 无论您合成可能会或可能不会使用的属性，这对您的应用程序的内存使用没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:02:50.957

最近的编译器版本将自动合成您的属性。它们都应该用 nil 值初始化，因此在尝试访问代码中的这些属性时请记住这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:04:24.257

**如果您已经创建了属性（XCode4.3 及以下编译器），那么您应该合成它，否则您会收到警告消息。**

在 XCode4.4+ 编译器中，您无需显式合成，编译器会为您完成。所以你不能在那里做任何事情

# jquery - CSS jQuery 冲突

> ID：15366088
> 
> 赞同：0
> 
> 时间：2013-03-12T16:00:16.233
> 
> 标签：jquery, css, pagination, jquery-pagination

我有一个包含数据的表，并且行被归类为 .paginate，这些将使用 jquery 脚本进行分页。有两行代码弄乱了我的 CSS，所有 < td > 都出现在表格的第一列中，而不是均匀分布。这是 jQuery 代码搞砸了。两条线都需要。

```
//hide all the elements inside content div
$('.paginate').css('display', 'none');

//and show the first n (show_per_page) elements
$('.paginate').slice(0, show_per_page).css('display', 'block'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:04:40.657

我建议创建一个这样的类：

**CSS**

```
.displayNone {
    display: none;
} 
```

并根据需要删除课程

**JS**

```
$('.paginate').addClass('displayNone');

$('.paginate').slice(0, show_per_page).removeClass('displayNone'); 
```

# xml - 如何从 Web API 方法返回 Xml 数据？

> ID：15366096
> 
> 赞同：21
> 
> 时间：2013-03-12T16:00:31.910
> 
> 标签：xml, asp.net-mvc, asp.net-web-api

我有一个 Web Api 方法，它应该返回一个 xml 数据，但它返回字符串：

```
 public class HealthCheckController : ApiController
    {       
        [HttpGet]
        public string Index()
        {
            var healthCheckReport = new HealthCheckReport();

            return healthCheckReport.ToXml();
        }
    } 
```

它返回：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
<myroot><mynode></mynode></myroot>
</string> 
```

我已经添加了这个映射：

```
 config.Routes.MapHttpRoute(
              name: "HealthCheck",
              routeTemplate: "healthcheck",
              defaults: new
              {
                  controller = "HealthCheck",
                  action = "Index"
              }); 
```

如何让它只返回 xml 位：

```
<myroot><mynode></mynode></myroot> 
```

如果我只使用 MVC，我可以使用以下但 Web API 不支持“内容”：

```
 [HttpGet]
        public ActionResult Index()
        {
            var healthCheckReport = new HealthCheckReport();

            return Content(healthCheckReport.ToXml(), "text/xml");
        } 
```

我还在 WebApiConfig 类中添加了以下代码：

```
 config.Formatters.Remove(config.Formatters.JsonFormatter);
 config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-12T21:22:44.970

最快的方法是这样

```
 public class HealthCheckController : ApiController
 {       
     [HttpGet]
     public HttpResponseMessage Index()
     {
         var healthCheckReport = new HealthCheckReport();

         return new HttpResponseMessage() {Content = new StringContent( healthCheckReport.ToXml(), Encoding.UTF8, "application/xml" )};
     }
 } 
```

但也很容易构建一个从 HttpContent 派生的新 XmlContent 类以直接支持 XmlDocument 或 XDocument。例如

```
public class XmlContent : HttpContent
{
    private readonly MemoryStream _Stream = new MemoryStream();

    public XmlContent(XmlDocument document) {
        document.Save(_Stream);
            _Stream.Position = 0;
        Headers.ContentType = new MediaTypeHeaderValue("application/xml");
    }

    protected override Task SerializeToStreamAsync(Stream stream, System.Net.TransportContext context) {

        _Stream.CopyTo(stream);

        var tcs = new TaskCompletionSource<object>();
        tcs.SetResult(null);
        return tcs.Task;
    }

    protected override bool TryComputeLength(out long length) {
        length = _Stream.Length;
        return true;
    }
} 
```

并且您可以像使用 StreamContent 或 StringContent 一样使用它，除了它接受 XmlDocument，

```
public class HealthCheckController : ApiController
{       
    [HttpGet]
    public HttpResponseMessage Index()
    {
       var healthCheckReport = new HealthCheckReport();

       return new HttpResponseMessage() {
           RequestMessage = Request,
           Content = new XmlContent(healthCheckReport.ToXmlDocument()) };
    }
} 
```

# css - CSS: display:inline-block 不可见填充

> ID：15366099
> 
> 赞同：1
> 
> 时间：2013-03-12T16:00:34.077
> 
> 标签：css

[http://jsfiddle.net/QYtnL/](http://jsfiddle.net/QYtnL/)

```
<div id="wr">
    <div></div>
    <div></div>
    <div></div>
</div>

#wr {
    background:red;
    text-align:center;
}
#wr > div {
    display:inline-block;
    background:black;
    font-size:0px;
    line-height:0px;
    margin:0px;
    padding:0px;
} 
```

如何删除烦人的填充，使所有 div 的高度为 0px？如果我要删除`display:inline-block;`，它就消失了，但我需要`inline-block`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:31:33.657

正如@pete 在上述评论中所建议的那样，`font-size:0px; line-height:0px`给`div#wr`.
在我看来，付出就`font-size:0px`足够了，因为`line-height`价值取决于`font-size`价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:24:39.287

你可以`float:left`这样添加..

```
#wr>div{
    display:inline-block;
    background:black;
    font-size:0px;
    line-height:0px;
    margin:0px;
    padding:0px;
    float:left;
} 
```

# facebook - 无法检索某些用户的帖子

> ID：15366104
> 
> 赞同：0
> 
> 时间：2013-03-12T16:00:44.390
> 
> 标签：facebook, facebook-graph-api

对于少数用户，我无法使用图形 api 检索帖子。当通过 javascript sdk 和 graph api explorer 请求帖子时都会发生这种情况，帖子的隐私没有任何区别，因为它也发生在公共帖子上。

有什么明显的事情我可能会忽略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:48:27.400

原来是隐私设置“应用程序设置>其他人使用的应用程序”。要向 user1 显示来自 user2 的任何信息（帖子等），user2 必须手动允许它。

# android - Android模拟器困难

> ID：15366106
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:00:51.720
> 
> 标签：android, eclipse, android-emulator, emulation, adt

我是从 iOS 背景来到 Android 的。我也有相当多的 Java 经验，所以我相信转换应该不会那么困难。但出于实际编码之外的原因，它一直存在。

我遇到的主要问题是模拟器。看来我必须为我所做的每个构建/测试重新启动模拟器。以我所经历的速度，由于我花费大量时间等待模拟器启动，这可能会增加我的开发时间很多倍。我想找到一个不需要这么多等待时间的裸机模拟器。我真的必须为每个小测试重新启动模拟器吗？当然，这不是 Android 开发人员每天都在处理的问题。我正在为 Mac OS 使用 ADT 包。

谁能帮我？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:45:50.857

> 看来我必须为我所做的每个构建/测试重新启动模拟器

不正常。大多数开发人员启动模拟器一次并运行一整天。某些场景（例如，在启动时测试获得控制权）需要重新启动模拟器。

> 我真的必须为每个小测试重新启动模拟器吗？

不。

> 那么，模拟器在Android开发中被认为毫无用处吗？

不。特别是如果您使用[x86 仿真器图像](http://developer.android.com/tools/devices/emulator.html#accel-vm)，仿真器比硬件快。

> 如果我使用物理设备，是否允许使用断点等，就像我使用标准调试器一样？

一般来说，是的。在 OS X 上，它应该适用于在设置中具有“允许 USB 调试”选项的任何设备（精确位置因操作系统版本和可能的设备而异）。Windows 变得有点冒险，因为您需要特定于设备的驱动程序，这些驱动程序可能存在也可能不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:11:05.143

通过 USB 在物理设备上进行开发要容易得多，但如果您无法使用，那么仿真器是您唯一的选择，除了您正在使用的仿真器之外，我不知道还有任何其他仿真器。

对应用程序进行更改时，模拟器不应要求重新启动，但要确保更改生效，您可能需要运行

```
adb uninstall com.example.yourapp.main 
```

从命令行，替换您的应用程序的标识符，以确保已安装的已删除，新的将取而代之。

# networking - 如何从安装在具有桥接网络设置的 VM 上的 localhost 访问 chef-server 11？

> ID：15366107
> 
> 赞同：2
> 
> 时间：2013-03-12T16:00:53.140
> 
> 标签：networking, ubuntu-12.04, virtual-machine, chef-infra, vagrant

我正在尝试通过 vagrant（Vagrant 版本 1.0.6）在虚拟机上安装 chef-server 11。

在 Vagrantfile 中设置如下：

```
config.vm.box_url = "opscode-ubuntu-12.04.box"
config.vm.network :bridged
config.vm.forward_port 80, 8080 
```

我无法通过受保护的 localhost 或受保护的 localhost:8080（重定向到[https://vagrant.vm/](https://vagrant.vm/)）访问 chef-server。

当我将网络设置为 hostonly 时它工作正常

但我对桥接感兴趣，因为它需要被任何外部网络访问。

我正在遵循的步骤：

1.  流浪起来
2.  流浪者 ssh
3.  在虚拟机中：dpkg -r chef（因为 chef 10 已经在 opscode-ubuntu-12.04.box 中）
4.  然后 dpkg -i chef-server_11.0.6-1.ubuntu.12.04_amd64.deb
5.  sudo chef-server-ctl 重新配置
6.  sudo chef-server-ctl status ：一切都好
7.  sudo chef-server-ctl test : 所有 70 个示例绿色

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T17:10:20.713

Chef 服务器尝试将您重定向到`https://hostname/`. 这就是为什么尝试更改 vm 的主机名和/或添加主机的主机文件记录的原因。

您的虚拟机中还有两个接口。解决方案：

eth0 - NAT，仅转发两个端口。打开 https 并在 hosts-file 中使用 eth0s 的 ipaddres

或者

在 hosts-file 中使用 eth1 的 ipaddress，因为该接口实际上是桥接的。

/etc/主机：

```
...
<ip_address> <hostname_of_vm> 
```

PS。在组织网络中，桥接网络应该可以工作，因为服务器自动在网络中注册了 dhcp/dns（当然，如果组织支持它）。

OHAI 也可能返回错误的 fqdn/ip，因为它尝试绑定到第一个接口 (eth0/10.0.2.15)。

尝试这个：

```
vagrant up --no-provision
vagrant ssh
sudo route del default
sudo route add default dev eth1 # just find a way to get eth1' route as default
^D
vagrant provision 
```

# android - Android MediaRecorder RuntimeException on start() / 损坏的视频

> ID：15366109
> 
> 赞同：0
> 
> 时间：2013-03-12T16:00:56.040
> 
> 标签：android, exception, video, runtime, mediarecorder

我有适用于 android 2.3.6 的 MediaRecorder 活动。现在我在三星 Galaxy S2 (4.044) 和 mRecorder.start() 上尝试使用所有 CamcorderProfiles 给 RuntimeException。它仅适用于 480P，但视频因线条而损坏。我尝试了这个解决方案。

```
Camera.Parameters params = camera.getParameters();
params.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY);
params.set("cam_mode",1);
camera.setParameters(params); 
```

但它不起作用。还有其他解决方案吗？

手机闪过android，可能是这个问题？

我的代码

```
 @Override
    public void surfaceCreated(SurfaceHolder holder) {
        if (camera == null) {
            camera = Camera.open();
        }
        Camera.Parameters params = camera.getParameters();
        params.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY);
        params.set("cam_mode",1);
        camera.setParameters(params);
        if (camera != null) {
            try {
                camera.setPreviewDisplay(holder);
                camera.startPreview();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            Toast.makeText(getApplicationContext(), "Camera not available.", Toast.LENGTH_LONG).show();
            finish();
        }

    }
    public void startRecording() throws IOException {
            camera.stopPreview();
            prepareRecord();
            recordButton.setImageResource(R.drawable.record_button_stop);
            startRecord();
        }

    public void prepareRecord() throws IllegalStateException, IOException {
        if (camera == null) {
            camera = Camera.open();
        }
        if (mRecorder == null) {
            mRecorder = new MediaRecorder();
        }
        camera.lock();
        camera.unlock();

        mRecorder.setCamera(camera);
        mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);

        CamcorderProfile cProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
        mRecorder.setProfile(cProfile);

        mRecorder.setPreviewDisplay(surfaceHolder.getSurface());
        mRecorder.setOutputFile(pathName + "/" + fileName + ".mp4");
        mRecorder.prepare();
    }
    public void startRecord() {
        if (recording == false) {
            mRecorder.start();
            recording = true;
        }
    } 
```

日志猫

```
02-21 01:49:38.505: E/AndroidRuntime(4210): FATAL EXCEPTION: main
02-21 01:49:38.505: E/AndroidRuntime(4210): java.lang.RuntimeException: start failed.
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.media.MediaRecorder.native_start(Native Method)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.media.MediaRecorder.start(MediaRecorder.java:704)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at com.olos.videogpsrecorder.VideoRecorderActivity.startRecord(VideoRecorderActivity.java:401)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at com.olos.videogpsrecorder.VideoRecorderActivity.startRecording(VideoRecorderActivity.java:343)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at com.olos.videogpsrecorder.VideoRecorderActivity$1.onClick(VideoRecorderActivity.java:129)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.view.View.performClick(View.java:3511)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.view.View$PerformClick.run(View.java:14105)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.os.Handler.handleCallback(Handler.java:605)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.os.Looper.loop(Looper.java:137)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at android.app.ActivityThread.main(ActivityThread.java:4575)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at java.lang.reflect.Method.invokeNative(Native Method)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at java.lang.reflect.Method.invoke(Method.java:511)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-21 01:49:38.505: E/AndroidRuntime(4210):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-15T11:31:40.467

`CamcorderProfile cProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH); mRecorder.setProfile(cProfile);`用下面的行替换上面的两行。 `mRecorder.setProfile(CamcorderProfile.get(mCurrentCameraId, CamcorderProfile.QUALITY_720P));`这里 mCurrentCameraId 是相机 ID

# sql - 基于聚合函数的 SQL 返回

> ID：15366121
> 
> 赞同：1
> 
> 时间：2013-03-12T16:01:17.230
> 
> 标签：sql, postgresql, aggregate-functions

我有这个有效的查询，但它返回所有城市的信息，我只想根据一个国家/地区每一行的城市最大人口返回，但聚合函数不能在 where 子句中使用。如何将我的结果限制为每个国家/地区一个？

```
SELECT lab6.country.name, max(lab6.city.population) AS largest_pop 
  FROM lab6.country, lab6.city 
 WHERE lab6.country.country_code = lab6.city.country_code 
 GROUP BY lab6.country.name, lab6.city.name" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:07:27.687

PostgreSQL 支持您可以利用的窗口函数。

```
SELECT  countryName, cityName, largest_pop
FROM
        (
            SELECT  a.name countryName, 
                    b.name cityName, 
                    b.population AS largest_pop,
                    DENSE_RANK() OVER (PARTITION BY a.name 
                                        ORDER BY b.population DESC) rn
            FROM    lab6.country a, lab6.city b 
            WHERE   a.country_code = b.country_code 
        ) x
WHERE   rn = 1 
```

*   [窗口函数](http://www.postgresql.org/docs/9.2/static/functions-window.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:20:50.430

也许我理解错了，你只想返回每个国家最大的城市吗？

如果是这样，您只需按国家/地区分组，而不是按国家*和*城市分组。您需要在`GROUP BY`声明中包含标识国家/地区的属性以及该国家/地区的名称。您的查询最终将如下所示：

```
SELECT lab6.country.name AS cName, max(lab6.city.population) AS largest_pop 
FROM lab6.country, lab6.city 
WHERE lab6.country.country_code = lab6.city.country_code 
GROUP BY lab6.country.country_code, lab6.country.name 
```

如果您还想包含最大城市的名称，您首先需要决定如果有多个最大城市（有两个或多个城市的人口相同、最大的国家）该怎么做。我假设您可以将它们全部包含在内。在这种情况下，您可以简单地在 FROM 子句中执行子查询，加入具有相同人口的城市：

```
SELECT lc.cName, lab6.city.name, lc.largest_pop
FROM (
      SELECT lab6.country.country_code AS cCode
             lab6.country.name AS cName, 
             max(lab6.city.population) AS largest_pop 
      FROM lab6.country, lab6.city 
      WHERE lab6.country.country_code = lab6.city.country_code 
      GROUP BY lab6.country.country_code, lab6.country.name
     ) AS lc
     JOIN lab6.city ON lc.cCode = lab6.city.country_code 
WHERE lab6.city.population = lc.largest_pop 
```

# android - 在 Android 模拟器上测试触控功能

> ID：15366126
> 
> 赞同：0
> 
> 时间：2013-03-12T16:01:28.383
> 
> 标签：android, touch, zooming, emulation, pan

我有这段代码，我在这里看到了平移+缩放功能。我在模拟器中测试，但是只能在模拟器中点击，所以不知道它是否真的有效。我该如何检查？

```
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.ScaleGestureDetector;
import android.widget.ImageView;

public class MyImageView extends ImageView {
private static final int INVALID_POINTER_ID = -1;

private float mPosX;
private float mPosY;

private float mLastTouchX;
private float mLastTouchY;
private float mLastGestureX;
private float mLastGestureY;
private int mActivePointerId = INVALID_POINTER_ID;

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

public MyImageView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
    mScaleDetector = new ScaleGestureDetector(getContext(), new ScaleListener());
}

public MyImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Let the ScaleGestureDetector inspect all events.
    mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
   switch (action & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN: {
            if (!mScaleDetector.isInProgress()) {
                final float x = ev.getX();
                final float y = ev.getY();

                mLastTouchX = x;
                mLastTouchY = y;
                mActivePointerId = ev.getPointerId(0);
            }
            break;
        }
        case MotionEvent.ACTION_POINTER_1_DOWN: {
            if (mScaleDetector.isInProgress()) {
                final float gx = mScaleDetector.getFocusX();
                final float gy = mScaleDetector.getFocusY();
                mLastGestureX = gx;
                mLastGestureY = gy;
            }
            break;
        }
        case MotionEvent.ACTION_MOVE: {

            // Only move if the ScaleGestureDetector isn't processing a gesture.
            if (!mScaleDetector.isInProgress()) {
                final int pointerIndex = ev.findPointerIndex(mActivePointerId);
                final float x = ev.getX(pointerIndex);
                final float y = ev.getY(pointerIndex);

                final float dx = x - mLastTouchX;
                final float dy = y - mLastTouchY;

                mPosX += dx;
                mPosY += dy;

                invalidate();

                mLastTouchX = x;
                mLastTouchY = y;
            }
            else{
                final float gx = mScaleDetector.getFocusX();
                final float gy = mScaleDetector.getFocusY();

                final float gdx = gx - mLastGestureX;
                final float gdy = gy - mLastGestureY;

                mPosX += gdx;
                mPosY += gdy;

                invalidate();

                mLastGestureX = gx;
                mLastGestureY = gy;
            }

            break;
        }
        case MotionEvent.ACTION_UP: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }
        case MotionEvent.ACTION_CANCEL: {
            mActivePointerId = INVALID_POINTER_ID;
            break;
        }
        case MotionEvent.ACTION_POINTER_UP: {

            final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                    >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
            final int pointerId = ev.getPointerId(pointerIndex);
            if (pointerId == mActivePointerId) {
                // This was our active pointer going up. Choose a new
                // active pointer and adjust accordingly.
                final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                mLastTouchX = ev.getX(newPointerIndex);
                mLastTouchY = ev.getY(newPointerIndex);
                mActivePointerId = ev.getPointerId(newPointerIndex);
            }
            else{
                final int tempPointerIndex = ev.findPointerIndex(mActivePointerId);
                mLastTouchX = ev.getX(tempPointerIndex);
                mLastTouchY = ev.getY(tempPointerIndex);
            }

            break;
        }
    }

    return true;
}

@Override
public void onDraw(Canvas canvas) {

    canvas.save();

    canvas.translate(mPosX, mPosY);

    if (mScaleDetector.isInProgress()) {
        canvas.scale(mScaleFactor, mScaleFactor, mScaleDetector.getFocusX(), mScaleDetector.getFocusY());
    }
    else{
        canvas.scale(mScaleFactor, mScaleFactor, mLastGestureX, mLastGestureY);
    }
    super.onDraw(canvas);
    canvas.restore();
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(0.1f, Math.min(mScaleFactor, 10.0f));

        invalidate();
        return true;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:04:41.163

Android 模拟器不支持多点触控，除非您有可用于提供触控点的实际设备。

从 sdk-r20 您可以在模拟器中使用[连接到计算机的真手机](http://tools.android.com/tips/hardware-emulation)来使用多点触控。

# exif - 添加自定义 XMP 标签

> ID：15366128
> 
> 赞同：0
> 
> 时间：2013-03-12T16:01:31.800
> 
> 标签：exif, xmp

我正在寻找一种工具或方法（.NET）来添加自定义 XMP 字段。另外，有人可以解释需要知道 XMP 标记是文本字段、文本区域还是选择的目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:19:28.410

XMP 作为 XML 数据包或单独的 XML 文件写入文件中。XMP 规范使用 RDF/XML 的一个子集。因此，您可以查看 (RDF/)XML 操作工具。
然而，对于嵌入式 XPackets，需要在数据包的开头计算和写入数据包长度，因此拥有一个专门构建的库可能会有所帮助。Adobe 为此提供了[XMP SDK](http://www.adobe.com/devnet/xmp.html) (C++)。

XMP 支持多种字段内容类型，例如文本、数字或 URL。*例如，文本字段可以限制为来自受控词汇表的值，为此在 GUI 中使用选择*或*下拉*表单元素可能是有意义的。

# java - 处理从服务器收到的 JSON 格式的 POST

> ID：15366129
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:01:40.380
> 
> 标签：java, javascript, html, json

我将如何去接收一个 JSON 文件被发布到服务器并处理它足够远它可以输入到 MySQL 数据库

下面是应该发送到服务器的 JSON 示例，

```
 {"messages":[{
    "messageId": "9ebd1279-d232-49a6-b074-b43b48b8332c",
    "userFromId": 1,
    "scope": 0,
    "messageContent": "hello 123\r\n",
    "messageSentDate": 1363090081570,
    "messageRecievedDate": 0,
    "messageReadDate": 0,
    "messageLastModified": 0,
    "readReceiptRequired": false
    },{
    "messageId": "c7b6005a-e493-4074-86bd-6b6462ea3f48",
    "userFromId": 1,
    "scope": 1,
    "messageContent": "hello ",
    "messageSentDate": 1363084238352,
    "messageRecievedDate": 0,
    "messageReadDate": 0,
    "messageLastModified": 0,
    "readReceiptRequired": false
    }]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:37:54.170

发帖时：

```
/* i would use a hidden field for maintaing count, say totalmessages */

/* use a loop for appending the name with a value (message0, message1, message2) */

for example when generating html from php.. 
for($i=0; i<$messagecount;$ i++)
{
    echo "<input type=text name=messageid$i>"; /*in case you are taking messages from input box*/   
} 
```

在服务器中，执行相反的操作。

```
/*Read the total messages first. $count = $_POST["totalmessages"];*/

//Then use a loop
for($i=0; $i < $count; $i++)
{
    /*Read the posted value using $i*/
    $messageid=$_POST["messageId$i"];
    .......

    /*Write it into database */
} 
```

希望这与您正在寻找的内容接近

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:07:09.983

```
$(function(){
   $.ajax(
   {
      data: mydata,   // mydata is your json 
      method:POST,
      url: ../MyServlet,
      success: function(response){alert(response);
   }
}); 
```

在 MyServlet 中

```
 public doPost(HTTPServletRequest req, HTTPServletResponse res)
    {
    JSONObject jObj = new JSONObject(request.getParameter("mydata")); // this parses the json
    Iterator it = jObj.keys(); //gets all the keys

    while(it.hasNext())
    {
        String key = it.next(); // get key
        Object o = jObj.get(key); // get value
        session.putValue(key, o); // store in session
    }

} 
```

现在在mysql中发送数据。

# c++ - C++：使用 owl 重新编译旧代码

> ID：15366136
> 
> 赞同：0
> 
> 时间：2013-03-12T16:01:49.990
> 
> 标签：c++, c++builder, owlnext

我正在尝试使用新的 Borland C++-Builder (Embarcadero Studio XE2) 编译一个旧程序。

我认为这很容易，但我得到了很多错误。例如，当它期望引用时，使用类似的东西`somefunction(TPoint(0,0))`不起作用，所以我不得不写`TPoint t=TPoint(0,0);somefunction(t)`......还有一些像math.log这样的错误可以使用double of float但得到uint，所以它无法决定......

但主要问题似乎与 OWL 有关。我有一个代码行，其中说明了不匹配的函数参数类型：

> DEFINE_RESPONSE_TABLE1（TTSCalibDialog，TDialog）EV_LVN_ENDLABELEDIT（IDC_CALIBMASSES，MassCol_EndLableEditResp），EV_COMMAND（IDC_CALIBRATEBUT，CalibrateResp），EV_COMMAND（IDC_CALIBSAVEBUT，CalibSaveResp），EV_COMMAND（IDC_CALIBLOADBUT，CalibLoadResp），EV_COMMAND（IDC_CALIBRESTORE，CalibRestoreResp），EV_COMMAND（IDC_CALIBSETNUMMASSES，CalibSetNumMassesResp），EV_WM_DESTROY， // Ev_WM_Destroy END_RESPONSE_TABLE;

线

`EV_LVN_ENDLABELEDIT(IDC_CALIBMASSES, MassCol_EndLableEditResp)`

给出错误

> [BCC32 Fehler] AcMode_TS_Dial.CPP(13): E2285 Keine Übereinstimmung für 'b_LV_DISPINFO_NOTIFY_Sig(void (TTSCalibDialog::*)(TLvDispInfoNotify &))' gefunden 而第二个参数声明为 void MassCol_EndLableEditResp(TLwDispInfoNotify& nmHdr)
> {MassCol->EndLEditRespable nmHdr);};

第一个论点似乎也可以在这里使用......

后来有一条线使用

> EV_LVN_ENDLABELEDIT(IDC_SIMWEIGHTCOL,AddCol0_EndLableEditResp),

有同样的错误，所以我认为可能缺少包含或命名空间......

有谁知道这个功能或什么可能导致错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T22:54:44.460

过了一段时间，我也在 OWLNext-Forum 上提问，在那里得到了正确的答案：

[http://sourceforge.net/p/owlnext/discussion/97175/thread/a0cc4131/](http://sourceforge.net/p/owlnext/discussion/97175/thread/a0cc4131/)

```
void TTSCalibDialog::MassCol_EndLableEditResp(TLwDispInfoNotify& nmHdr) 
{MassCol->EndLableEditResp(nmHdr);} 
```

此函数返回 void，但是，bool 是必需的。更改类型并在内部返回 true 解决了这个问题。

还有一些其他问题，但现在该程序正在 XE2-Studio 上愉快地编译。

# matlab - 八度：使用“补丁”命令的顶点颜色

> ID：15366137
> 
> 赞同：0
> 
> 时间：2013-03-12T16:01:52.390
> 
> 标签：matlab, octave

我正在使用 Octave，但我遇到了`patch`命令问题。基本上我想要做的是绘制一个没有边缘但有（红色）顶点的（黑色）正方形。我通过指定`'EdgeColor','none'`选项删除了边框：例如

```
patch([x1,x2,x3,x4],[y1,y2,y3,y4],'red','EdgeColor','none') 
```

但我似乎找不到添加彩色顶点的方法。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:20:04.897

你的意思是你想在顶点标记？您可以使用该`marker`选项（正如@H.Muster 在评论中建议的那样），或使用`plot`单独添加标记。

使用以下`marker`选项`patch`：

```
octave:69> clf
octave:70> hold on
octave:71> xlim([0 3])
octave:72> ylim([0 3])
octave:73> patch(x, y, 'red', 'EdgeColor', 'none', 'marker', 'o', 'MarkerFaceColor', 'b', 'MarkerSize', 30, 'LineStyle', 'none') 
```

或用于`plot`添加标记：

```
octave:48> clf
octave:49> hold on
octave:50> xlim([0 3])
octave:51> ylim([0 3])
octave:52> x = [1 2 2 1];
octave:53> y = [1 1 2 2];
octave:54> patch(x, y, 'red', 'EdgeColor', 'none')
octave:55> plot(x, y, 'o', 'MarkerSize', 12, 'MarkerFaceColor','b') 
```

![例子](../Images/b91944d9dc6bdc0aa8909bf7fe8f9633.png)

# msdeploy - 如何在 dirPath 提供程序中使用“wmsvc=[server]”语法？

> ID：15366138
> 
> 赞同：3
> 
> 时间：2013-03-12T16:01:55.977
> 
> 标签：msdeploy

我正在尝试使用 dirPath 提供程序将 Windows 应用程序部署到远程服务器上的特定路径。我可以使用如下语法将网站毫无问题地部署到同一台服务器：

`msdeploy.exe -verb:sync -source=iisApp=C:\SomePath -dest:authType=basic,wmsvc=MyServer,userName=MyUser,password=MyPassword,iis=MySite/MyApp -allowUntrusted`

但是，在尝试使用 dirPath 执行类似命令时，出现 401 Unauthorized 错误（原因不明）：

`msdeploy.exe -verb:sync -source=dirPath=C:\SomePath -dest:authType=basic,wmsvc=MyServer,userName=MyUser,password=MyPassword,dirPath=C:\SomeRemotePath -allowUntrusted`

我发现在这里工作的唯一方法是切换到使用 computerName 语法，如下所示：

`msdeploy.exe -verb:sync -source=dirPath=C:\SomePath -dest:authType=basic,computerName=https://MyServer:8172/msdeploy.axd?site=MySite,userName=MyUser,password=MyPassword,dirPath=C:\SomeRemotePath -allowUntrusted`

这很好，但 computerName 要求将站点作为查询字符串参数传递，在这种情况下，“MySite”实际上是“默认网站”。鉴于我实际上是使用 MSBuild 文件生成此命令行（并使用 Exec 语句执行它），因此我终生无法弄清楚如何正确转义此处的空格。如果我在 MSBuild 文件中指定 %20（例如 Default%20Web%20Site），它会在执行命令之前将其解析回空格，这会导致语法无效。如果我尝试双重转义（分别转义 %、2 和 0，例如 Default%25%32%30Web%25%32%30Site），我会返回 401 Unauthorized 错误。

那么，是否有一些语法或服务器配置允许我在此命令中使用“wmsvc=[server]”，因为它不需要有问题的（不可避免的？）站点查询参数？或者有人可以告诉我如何在执行上述 MSDeploy 命令的 MSBuild Exec 命令中正确地转义“？site=Default Web Site”？

编辑：在有人建议我将默认网站重命名为没有空格的东西之前，是的，这可行，但我正在尝试找到一种方法来避免这种情况，因为我想要一个可以使用默认名称的通用解决方案任何给定服务器上的 IIS 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:21:42.140

转义站点参数的正确方法（使用计算机名语法时）来自[另一个](https://stackoverflow.com/questions/9092942/msbuild-exec-and-curl-quoting-nightmare)关于使用 curl 的 SO 帖子，即通过将 % 符号加倍来转义它，例如 Default%25%2520Web%25%2520Site。如果没有办法使用 wmsvc，因此根本不指定站点，这对我有用。

编辑：正如 The Muffin Man 刚刚指出的那样，只需在整个 computerName 参数（包括 Site 查询参数）周围加上引号即可避免需要对站点名称进行任何棘手的转义。

# azure - 无法在管理门户中启用 Azure Connect

> ID：15366141
> 
> 赞同：1
> 
> 时间：2013-03-12T16:02:06.853
> 
> 标签：azure, load-testing, azure-connect

我是 Windows Azure 平台的新手，我正在尝试设置 Azure 负载测试。我已经设置了存储帐户、托管服务和虚拟网络。但是，我在网络 -> 虚拟网络下找不到连接选项卡。已经安装了用于 VS 2010 的先决条件，即 Windows Azure SDK 和 Windows Azure 工具。我的本地机器操作系统是 64 位 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:42:44.083

您必须使用[以前的管理门户](http://windows.azure.com)来管理 Connect VPN。新的管理门户还不能管理它们。它位于“虚拟网络”选项卡下。此外，必须为您的订阅启用此 CTP，否则它可能不会出现在门户中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:23:48.647

首先，Azure Connect 仍处于预览阶段，并且该组件多年来没有显着改进，因此我建议不要使用它。

如果您真的想查看 Windows Azure Connect，它仅在旧版门户中可用，因此请前往旧版门户查看。

# java - 用反射覆盖注释？

> ID：15366146
> 
> 赞同：2
> 
> 时间：2013-03-12T16:02:14.247
> 
> 标签：java, reflection, annotations, config, oval

我正在使用 Oval 进行验证，所以我们的代码如下所示：

```
 @NotNull(errorCode = "NumberInvalid")
   @NotNegative(errorCode = "NumberInvalid")
   @Range(errorCode = "NumberInvalid", min=1, max=10)
   protected Integer dollarAmount; 
```

如果需要，我希望能够动态更新范围，例如，如果我们有一个每个月左右更改的配置文件，我希望能够在验证中反映这些更改。

有没有一种方法可以通过反射来做到这一点，这样我就不必对 Oval 中的每个注释进行子类化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:23:32.603

反射的目的是**访问**类成员（包括设置字段），但不包括添加新成员或修改现有声明。你想要的更类似于[字节码编辑](http://en.wikipedia.org/wiki/ObjectWeb_ASM)或[代码重构](http://sourceforge.net/apps/mediawiki/recoder/index.php?title=Features)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:12:34.810

虽然使用静态代码的注释看起来更干净 :) 但是......有一种方法......你尝试过使用反射吗？你能发布方法吗？你可以看看[这个](http://ayoubelabbassi.blogspot.in/2011/01/how-to-add-annotations-at-runtime-to.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:14:10.173

据我所知，这是不可能的。假设您的注释保留设置为 RUNTIME（它必须是验证才能工作），那么您将有效地拥有一个实现注释接口的代理类，您将无法通过反射修改值。

# eclipse - 是否有任何 Eclipse 插件可用于在任何代码行上编写备忘录？

> ID：15366147
> 
> 赞同：1
> 
> 时间：2013-03-12T16:02:17.460
> 
> 标签：eclipse, eclipse-plugin

有谁知道 eclipse 插件，它可以用来插入短文本（以备忘录的形式）以记住那行代码或代码块的作用，以帮助我更好地理解现有代码，我也可以参考稍后再回来。

就像“任务”可以添加到一行代码一样，虽然我可以使用“任务”来达到这个目的，但这不是很方便和直观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:06:54.117

如果您想添加一个简短的文本来“记住那行代码或一段代码的作用以帮助我更好地理解现有代码”，请使用注释。这就是它们的用途，几乎世界上所有的正式语言都有它们。

如果您希望能够快速跳转到代码中的任意点，使用书签是一个方便的选项 - 右键单击​​文本左侧的栏并选择添加书签。然后，您可以使用“书签视图”轻松地在书签之间跳转，您可以从“窗口”->“显示视图”菜单启用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:07:05.960

我能想到的最接近的事情是书签支持。Eclipse 中有本机书签支持，其他几个供应商也提供了更多功能。

我假设您不想或不能修改代码是有充分理由的。

# sql-server - 插入到pgsql中的标识列

> ID：15366148
> 
> 赞同：0
> 
> 时间：2013-03-12T16:02:23.660
> 
> 标签：sql-server, amazon-redshift

```
SET IDENTITY_INSERT table1 ON 
```

这个命令给了我错误，我需要在 Postgresql 的标识列中插入一个值。

# php - 在 PHP 中连接 lang CONST 和 STR CONST

> ID：15366149
> 
> 赞同：0
> 
> 时间：2013-03-12T16:02:24.293
> 
> 标签：php, constants, concatenation, string-concatenation

尝试连接：

```
<?php
class MD_ImpFormularios extends CI_Model {
  private $dir_forms = __DIR__ . 'Hola'; 
```

给出：

```
PHP Parse error:  syntax error, unexpected '.', expecting ',' or ';' in md_impformularios.php on line 3 
```

但我在这里没有看到任何问题，它不是 CONST 或静态的，它是一个简单的变量。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:06:11.293

声明类常量或变量时不能使用连接（直到 php5.5，从 php5.6 开始，您可以使用连接定义类属性，我发现在构造函数中做这样的事情更好）。您应该声明为空字符串，并在构造函数中为该变量赋值。

```
 <?php
          class MD_ImpFormularios extends CI_Model {
                private $dir_forms = ''; 
                ....
                public function __construct(){
                      $this->dir_forms = __DIR__ . 'Hola'
                } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:04:41.453

声明类变量时不要进行连接。

```
private $dir_forms = __DIR__ . 'Hola';
                          // ^ This is NOT allowed during declaration 
```

您可以使用构造函数来设置此类变量。

```
private $dir_forms;
public function __construct() {
    $this -> dir_forms = __DIR__ . 'Hola';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:06:58.827

这是因为您正在连接一个字符串来设置一个属性，这是不允许的。[你可以在PHP 文档](http://www.php.net/manual/en/language.oop5.properties.php)中看到这个例子：

```
 // invalid property declarations:
   public $var1 = 'hello ' . 'world'; 
```

您应该改为在构造函数中设置值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:06:43.850

您不能在类属性声明中这样做。您必须在构造函数中执行此操作：

```
<?php
class MD_ImpFormularios extends CI_Model {
  private $dir_forms;

  public function __construct() {
    $this->dir_forms = __DIR__ . 'Hola';
  }
} 
```

# testing - 如何在 Clojure 中运行测试文件

> ID：15366153
> 
> 赞同：3
> 
> 时间：2013-03-12T16:02:34.310
> 
> 标签：testing, clojure, jedit

我正在使用 jEdit，我想做的是编写一个文件并对其运行测试。我对运行测试的过程感兴趣，而不是文件本身。

所以我写了这个简单的函数`File.clj`

```
(defn abs [n]
  (if (neg? n) (- n) n)) 
```

而这个测试在`TheTest.clj`

```
(use 'clojure.test)

(load-file "File.clj")

(deftest sample-test
  (testing "abs"
    (is (= 5 (abs (5))))))

(run-tests) 
```

然后我运行该文件`TheTest.clj`，但它说：

`java.io.FileNotFoundException: File.clj (The system cannot find the file specified) (TheTest.clj:49)`

有人可以告诉这是做这些事情的方法吗，如果不是如何运行测试:(没有必要在jEdit中，如果应该的话，它可能在命令提示符中。另外我已经安装了leiningen`File.clj`并且`TheTest.clj`在同一目录中。我也尝试在加载文件函数中提供文件的完整路径，但没有成功。

非常感谢你们，好人！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T17:47:06.293

在没有 Leingingen 的情况下，当然可以让您的示例正常工作。它可以在我的电脑上运行，只需稍作改动：删除 周围的括号`5`，因此测试行显示为

```
(is (= 5 (abs 5))) 
```

要成功运行脚本，请找到 Clojure JAR 的位置，打开终端并切换到源文件所在的目录，然后执行以下命令：

```
java -cp /path/to/clojure/clojure-1.4.0.jar clojure.main TheTest.clj 
```

显然替换`/path/to/clojure/clojure-1.4.0.jar`为系统上 Clojure 的实际路径。如果您完全使用过 Leiningen，那么您的 Maven 存储库中会有一个副本（我在`~/.m2/repository/org/clojure/clojure/1.4.0/clojure-1.4.0.jar`）

我跑`TheTest.clj`了，输出是：

```
Testing user

Ran 1 tests containing 1 assertions.
0 failures, 0 errors. 
```

# c++ - 将文件映射多线程化到缓冲区数组中

> ID：15366154
> 
> 赞同：0
> 
> 时间：2013-03-12T16:02:35.587
> 
> 标签：c++, multithreading, winapi, buffer

我正在尝试使用令人讨厌的大型 xml 和文本文档：~40GBs。我在 Windows 7 上使用 Visual Studio 2012。

我将使用“Xerces”从 xml 中获取页眉/“页脚标签”。

我想映射文件的一个区域，比如说.. 60-120MBs。

将地图分成（3 * 个处理器/核心）相等的部分。将每个部分设置为缓冲区并将缓冲区加载到数组中。

然后在新线程中使用 (#processors/cores) while statments，我将在浏览缓冲区数组时同步计算字符/行/xml 周期。当一个缓冲区完成时，该进程将跳转到下一个“可用”缓冲区，并且完成的缓冲区将从内存中删除。最后，我会将总结果添加到项目日志中。

之后，我将参考日志，按字符数/大小（或其他选项）将文件拆分到最近的行或循环，并将页眉和“页脚标签”放入所有拆分中。

我这样做是为了可以通过具有多台计算机的网络将大量数据导入 MySQL 服务器。

我的问题是，如何使用新线程创建缓冲区数组和文件映射？

我可以用吗 ：

赢得创建文件

赢得 CreateFileMapping

赢得 MapViewOfFile

使用标准 ifstream 操作和 char 缓冲区还是应该选择其他东西？

进一步澄清：我的想法是，如果我可以让硬盘驱动器从一个地方和一个方向将文件流式传输到内存中，我可以利用机器的全部处理能力来咀嚼单独但相等的缓冲区。

〜味道：这有点像一个牧羊人试图从一个带有 3-6 个大桶的大箱子里舀出食物，只有两条手臂用于需要留在围栏区域内的 X 只羊。但它们都以光速运动。

一些想法或建议可能会对我有所帮助。任何想法都是最受欢迎的。谢谢。

```
while(getline(my_file, myStr))
{
   characterCount += myStr.length();

   lineCount++;

   if(my_file.eof()){

      break;

   }
} 
```

这是测试运行时唯一的代码。2小时30+分钟。在具有 2GB RAM 的双核 1.6Mhz 笔记本电脑上运行程序的总处理器为 45-50%。现在加载的大部分 RAM 是 600+MB，来自在 Firefox 中打开的约 50 个选项卡，Visual Studio 为 60MB，然后是等。

重要提示：在测试过程中，运行代码的程序，它只是一个窗口和一个对话框，似乎转储了它自己的工作和私有内存集，下降到像 300K ish，并且没有响应的长度考试。我确定我需要为 while 语句创建另一个线程。但这意味着没有文件被读入缓冲区。CPU 在整个运行过程中都在努力跟上硬盘驱动器的最小努力。

PS 进一步证明 CPU 瓶颈。通过我的无线网络将整个文件传输到另一台计算机可能需要 20 分钟。其中包括读取进程和套接字捕获以在另一台计算机上写入进程。

**更新**

我用这个可爱的小东西从之前的测试时间缩短到大约 15-20 分钟，这与 Mats Petersson 所说的一致。

```
while (my_file.read( &bufferOne[0], bufferOne.size() )) 
```

{

```
int cc = my_file.gcount();

for (int i = 0; i < cc; i++)
{

    if (bufferOne[i] == '\n')
        lineCount++;

    characterCount++;

}

currentPercent = characterCount/onePercent;

SendMessage(GetDlgItem(hDlg, IDC_GENPROGRESS), PBM_SETPOS, currentPercent, 0); 
```

}

当然，这是一个单循环，它实际上比之前的测试表现得更合适。该测试比上面显示的使用 Getline 的紧密循环快约 800%。我将此循环的缓冲区设置为 20MB。[我从： SOF - Fastest Example](https://stackoverflow.com/questions/843154/fastest-way-to-find-the-number-of-lines-in-a-text-c)中提取了这段代码

**但...**

我想指出的是，在资源监视器和任务管理器中轮询进程时，它清楚地显示第一个核心的使用率为 75-90%，第二个核心的使用率为 25-50%（对于我打开的一些小背景内容来说，这是相当标准的） ), 硬盘在.. 等待它... 50%。一些 100% 的磁盘时间峰值，但也有一些 25% 的低点。所有这些基本上意味着在两个不同线程之间拆分缓冲区处理很可能是一个好处。它将使用所有系统资源，但是..这就是我想要的。当我有工作原型时，我将在今天晚些时候更新。

**主要更新：经过大量学习，我终于完成了我的项目。不需要文件映射。只有一堆矢量字符。我已经成功构建了一个动态执行的文件流线和字符计数器。好消息是，从之前的 10-15 分钟标记到 5.8GB 文件的 ~3-4 分钟，BOOYA！~**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:14:25.197

非常简短的回答：是的，您可以使用这些功能。

对于读取数据，将文件内容映射到内存可能是最有效的方法，因为它不必将内存复制到应用程序的缓冲区中，只需将其直接读取到它应该去的地方。所以，只要你有足够的可用地址空间就没有问题 - 64 位机器当然应该有足够的，在 32 位系统中它可能是一种稀缺资源 - 但对于几百 MB 的部分，它应该不是一个大问题。

但是，使用多个线程，我一点也不相信。我有一个公平的想法，即读取一个非常大的文件的多个部分会适得其反。这将增加磁盘上的磁头移动量，这是传输速率的很大一部分。对于“普通”系统，您可以指望大约 50-100MB/s 的传输速率。如果系统有某种raid控制器或类似的，可能会翻倍——非常奇特的raid控制器可能会达到三倍。

所以读取 40GB 需要大约 3-15 分钟。

CPU 可能不会很忙，运行多个线程很可能会降低系统的整体性能。

您可能希望保留一个用于读取的线程和一个用于写入的线程，并且只有在您拥有足够数量的数据时才实际写出数据，以避免磁盘上读/写磁头的不必要移动。

# html - 旋转的 CSS 盒子阴影

> ID：15366155
> 
> 赞同：0
> 
> 时间：2013-03-12T16:02:41.813
> 
> 标签：html, css

任何人都可以告诉我如何使用 CSS 将这个旋转的阴影添加到图像上？

如果可能，还可以在 CSS 中使用边框半径

![图片](../Images/f964372f9aeed1f64961abe7c942e545.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:04:54.137

您可能必须创建一个应用了阴影的透明元素并在图像后面旋转它。就像是：

```
<div class="img-wrapper" style="position: relative;">
    <div class="img-shadow" style="position: absolute; z-index: 1;"></div>
    <div class="img" style="position: absolute; z-index: 2;"></div>
</div> 
```

SO 不是“免费的自由职业者”服务，因此请尝试使用您遇到的任何问题更新您的问题。

# response - 响应注释添加到错误的父文档

> ID：15366159
> 
> 赞同：2
> 
> 时间：2013-03-12T16:03:00.940
> 
> 标签：response, parent-child, xpages, repeat

我有一个视图数据源，它使用视图键来访问文档并使用 var“posts”重复显示它们。在重复中，我有一个带有var“post”的文档数据源，它使用posts.getUniversalID（）获取文档的unid。

再往下重复，我有另一个文档数据源“newcomment”，它是一个响应，并将父 ID 设为：post.getDocument().getUniversalID()

在 newcomment 数据源下方，我有一个编辑框和一个提交按钮，它使用 newcomment.save() 将评论保存为对“帖子”的响应

这是我的问题

两个人访问同一个 xpage。personA 进入页面并开始为帖子写评论。同时，personB 创建一个新帖子并在 personA 提交评论之前提交。现在发生的情况是，评论被绑定到最新的帖子，而不是 personA 回复的帖子。

我也尝试了另一件事，假设该数据库中有 10 个帖子。personA 和 personB 访问 xpages。personA 开始为 8 号帖子写评论。同时 personB 在数据库中创建了两个新帖子。当 personA 现在提交评论时，它似乎绑定到同一个索引，现在是两个帖子。但仍然是索引 8。这当然是错误的帖子。

如果我将重复更改为“createControlsAtPageCreation”，即repeatControls=true，评论将附加到正确的帖子，但随后我遇到了另一个问题，即视图未更新以显示最新帖子。

我的重复是使用 extlib 中的动态内容控件动态加载的自定义控件。

因为这里的信息是我发现的关于 repeatControls 设置的信息

*   将 repeatControls 属性设置为 true 会指示重复控件为数据集上的每次迭代创建其子项的新副本。
*   当使用属性 repeatControls=“true” 配置重复控件时，它只会在页面加载时重复其内容一次

所以我的问题是我不明白发生了什么。为什么我的评论附加到错误的父文档？有没有办法可以防止这种情况并且仍然可以正确显示新帖子

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:50:30.573

如果没有代码，很难想象这里到底发生了什么，但这看起来与我在重复控制和值绑定中遇到的问题非常相似。

长话短说，问题在于repeatControls 属性设置为false。当数据绑定仅适用于集合中的第一个元素时 - 所有数据都以某种方式神奇地保存到第一个对象！我设法通过结合使用动态内容控件重建和repeatControls 设置为true 来完成这项工作。只有那时数据绑定才是有效的属性。

看起来如果您只重复渲染（这就是 repeatControls 设置为 false 所做的），jsf 生命周期的解码阶段进入 foobar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:58:36.703

如果没有您的 XSP 标记，很难绝对确定，但您的应用程序代码似乎在页面加载期间每行创建和保存数据源和组件 - 因此也增加了组件树的整体大小和复杂性。您也应该尝试一种仅在最终用户请求时才延迟加载数据源的方法（例如：编辑/回复）。

有关使用这种动态方法的示例，请参阅 XPages 扩展库演示应用程序 (XPagesExt.nsf)。特别是，查看 Core_InPlaceForm.xsp，它演示了在 xp:repeat 中使用 xe:inPlaceForm 控件。另请参阅 Domino_ForumView.xsp，它演示了使用 xe:forumView 和 xe:forumPost 控件来管理和可视化分层线程。在实际保存任何给定的帖子或评论（失败、创建冲突、强制、异常）和针对高争用情况的文档锁定时，还要考虑最适合您要求的并发模式。上述控件都提供了最高级别的动态控制和数据源的创建和销毁。

请随时向我发送一个工作示例数据库，在那里我可以了解您的确切用例 - 给我发邮件或给我发电子邮件。

# fluent-migrator - 在 Execute.WithConnection 操作中调用 FluentMigrator 方法

> ID：15366162
> 
> 赞同：7
> 
> 时间：2013-03-12T16:03:06.657
> 
> 标签：fluent-migrator

在我传递给的操作中调用 FluentMigrator 的构建器方法`Execute.WithConnection`会导致抛出空引用异常。

我想要做的是选择一些数据，以便我可以在 c# 中操作它，因为这比在 T-SQL 中操作它更容易，并使用我的 c# 操作的结果来更新数据或插入新数据（将更具体地说，我需要从存储的 url 字符串中选择一个查询字符串参数并将其插入到其他位置）。

我看到在迁移中选择数据的唯一方法是自己使用`Execute.WithConnection`和检索数据（FluentMigrator 不提供用于选择数据的帮助器），但如果我尝试在操作中使用任何流利的迁移器表达式，我传递给`Execute.WithConnection`空引用异常是抛出。

这是我的代码的简化版本：

```
[Migration(1)]
public class MyMigration : Migration 
{
  public void Up() 
  {
    Execute.WithConnection(CustomDml);
  }

  public void CustomDml(IDbConnection conn, IDbTransaction tran)
  {
    var db = new NPoco.Database(conn).SetTransaction(tran); // NPoco is a micro-ORM, a fork of PetaPoco
    var records = db.Fetch<Record>("-- some sql"); // this is immediately evaluated, no reader is left open
    foreach (var r in records) {
      var newValue = Manipulate(r.OriginalValue);
      Insert.IntoTable("NewRecords").Row(new { OriginalValueId = r.Id, NewValue = newValue }); // <-- this line causes the exception
    }
  }

  public void Down() {}
} 
```

调用 Inser.IntoTable 的行会导致从第 36 行抛出空异常`FluentMigrator\Builders\Insert\InsertExpressionRoot.cs`- 此时 _context 变量似乎可能为空，但我不明白为什么会这样。（在测试 Create.Table 时，例如，它发生在第 49 行`FluentMigrator\Builders\Create\CreateExpressionRoot.cs`）

任何帮助，将不胜感激。也许对于 DML 在迁移中是否合适存在分歧，我愿意接受建议，但这种情况仅在本周就出现了两次。现在，我只是在操作中使用我的微 ORM 而不是 FluentMigrator 执行插入，这确实有效，但我想做的似乎应该有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:19:46.553

使用 Execute.WithConnection 表达式时，您得到的只是数据库连接和事务。

使用 Execute.WithConnection 创建一个[PerformDBOperationExpression](https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator/Builders/Execute/ExecuteExpressionRoot.cs?#L63-L77)表达式。处理表达式时，处理器调用 Operation 属性（[SqlServerProcessor 中的示例](https://github.com/schambers/fluentmigrator/blob/master/src/FluentMigrator.Runner/Processors/SqlServer/SqlServerProcessor.cs#L208-L219)）并且处理器没有对 MigrationContext 的引用。但即使它确实可以访问 MigrationContext，但当 FluentMigrator 进入处理阶段时，已经为时已晚。您将尝试在表达式中处理表达式，而目前 FluentMigrator 不是为处理这种类型的嵌套而构建的。

另一种方法是使连接字符串在迁移上下文中可用，请参阅此问题：[https ://github.com/schambers/fluentmigrator/issues/240](https://github.com/schambers/fluentmigrator/issues/240)

那会是更好的方法吗？

# c# - 尝试加载使用 C# 代码提供程序编译的程序集时出现奇怪的 Assembly.Load 错误

> ID：15366165
> 
> 赞同：6
> 
> 时间：2013-03-12T16:03:13.670
> 
> 标签：c#, unit-testing, nunit, csharpcodeprovider, assembly.load

我正在尝试使用 C# 代码提供程序从我的代码编译程序集。

当我使用 compilerResult.CompiledAssembly 访问已编译的程序集时，一切正常。但是，当我改为执行 Assembly.Load(path) 时，会出现以下异常：

> System.IO.FileLoadException：无法加载文件或程序集“C:\Users\Name\Desktop\output.dll”或其依赖项之一。给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）

我究竟做错了什么？

这是代码：

```
[Test]
public static void CompileCodeIntoAssembly()
{
    var code = "public class X { }";
    var file = Path.Combine(
        Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "output.cs");
        File.WriteAllText(file, code);

    using (var provider = new CSharpCodeProvider())
    {
        var parameters = new CompilerParameters
        {
            GenerateInMemory = false, // we want the dll saved to disk
            GenerateExecutable = false,
            CompilerOptions = "/target:library /lib:\"" + typeof(Class2).Assembly.Location + "\"",
            OutputAssembly = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "output.dll"),
        };
        parameters.ReferencedAssemblies.AddRange(new[]
        {
            "System.dll",
            typeof(Class1).Assembly.Location,
        });

    var compilerResult = provider.CompileAssemblyFromFile(parameters, file);
    if (compilerResult.Errors.Count > 0)
    {
        compilerResult.Errors.Cast<object>().ToDelimitedString(Environment.NewLine).Dump();
        throw new Exception();
    }

    var assembly = Assembly.Load(parameters.OutputAssembly);
    //var assembly = compilerResult.CompiledAssembly; // this method works
    var type = assembly.GetTypes().Single(t => t.Name == "X");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T16:13:43.043

[**`.LoadFile`**](http://msdn.microsoft.com/en-us/library/b61s44e8.aspx)如果要从文件路径加载程序集，则需要使用该方法：

```
var assembly = Assembly.LoadFile(parameters.OutputAssembly);
                            ^^^^ 
```

根据文档，方法[**`.Load`**](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)：

> 加载给定长格式名称的程序集。

它需要一个程序集名称，例如`SampleAssembly, Version=1.0.2004.0, Culture=neutral, PublicKeyToken=8744b20f8da049e3`

# javascript - 收缩盒

> ID：15366168
> 
> 赞同：0
> 
> 时间：2013-03-12T16:03:21.453
> 
> 标签：javascript, jquery, html, algorithm, math

我正在拔头发，试图解决一个简单的问题。我知道这里缺少一些数学步骤，我觉得我正处于解决方案的边缘，但我无法到达那里。

我想做的是编写一个算法来用正方形填充元素，一旦元素被填充，调整正方形的大小，创建一个新行并继续填充。填满两个新行后，追加另一行。基本上是换行类型的算法？

所以到目前为止我在第一行上工作，但在那之后失败了，因为它不断调整不必要的大小。

```
$(function(){ //DOM Ready

  //get columns of even squares
  var columns = parseInt($(".grid").width()/$(".grid").height());
  var rows = 1;  

  function checkSize(ico,index){

   var grid,gridWidth,gridHeight
   var icon,iconWidth,iconHeight

   //get our grid info
     grid  = $(".grid");
     gridWidth = grid.width();
     gridHeight= grid.height();

   //get our icon info
     icon = $(ico);
     iconWidth = icon.outerWidth();
     iconHeight = icon.outerHeight();

    //will go over columns?
    if(index >= columns){

     //do we need another row?
      if(Math.floor(gridHeight/iconHeight) === rows){

          //add row
          rows++;

         //reset columns
        columns = gridWidth / Math.floor(gridHeight / rows);  

         //resize boxes
         size();

          };

    }

   };

  function size(){

    var grid,icon,newHeight;

    grid = $(".grid");
    newHeight = (grid.height()/rows)

    $.each(grid.children(".icon"),function(index,value){

      icon = $(value);
      icon.css("height",newHeight+'px');
      icon.css("width",newHeight+'px');
     });

  }

  //fill
  var counter = 0;
  function fillGrid(){

   var icon,grid,r,g,b,a

   icon = $('<div class="icon"></div>');

   //random color 
   r = Math.floor(Math.random()*256);
   g = Math.floor(Math.random()*256);
   b = Math.floor(Math.random()*256);
   a = 1;
   icon.css('background-color','rgba('+r+','+g+','+b+','+a+')')

   grid = $(".grid");

   grid.append(icon);
   size(icon);
   checkSize(icon,counter);
   counter++; 

  };

  var timeoutID;
  function start(){
    if(timeoutID){
      clearInterval(timeoutID);
      timeoutID = undefined;
    }else{
       timeoutID = window.setInterval(fillGrid, 1000);
    }

    };

   //START THE TIMER
  $('#start').on('click',start);

}); 
```

请参阅此处的工作示例-

[http://jsbin.com/ovewib/7/edit](http://jsbin.com/ovewib/7/edit)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:19:04.490

这是问题所在：

```
 //will go over columns?
 if (index >= columns) { 
```

当有不止一排时，这是错误的。试试这个：

```
 //will go over columns?
 if (index >= Math.floor(columns)*rows) { 
```

[http://jsfiddle.net/mblase75/zXeHG/](http://jsfiddle.net/mblase75/zXeHG/)

# javascript - 在 javascript 条件中使用 asp.net 内联标签

> ID：15366171
> 
> 赞同：0
> 
> 时间：2013-03-12T16:03:34.917
> 
> 标签：javascript, asp.net

在本地测试我的 Asp.Net webforms 页面时，我厌倦了我所有的 jscript 社交小部件/分析初始化使我的调试输出混乱。所以我在我的 HTML 标记中尝试了这个：

```
<script>
if (<%= !Request.IsLocal ? "true" : "false" %>) { 
```

这实际上会发出正确的 jscript 代码（“if (true)”），没有运行时错误，但 Visual Studio 不喜欢它。我在结束时遇到语法错误')'。绝对不喜欢看到编译错误，即使它们是虚假的，我每次编译。

我将其更改为比较字符串，例如

```
if ("<%= Request.IsLocal %>" === "False") { 
```

它可以工作并发出像'if（“True”===“False”）'这样的代码，但是......这只会让我紧张并且看起来很难看。这只是 Visual Studio 的怪事，还是有更好的方法在 jscript 条件中使用 asp.net 服务器布尔值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:46:35.777

你能做类似的事情：

```
<script>
  var isLocal = "<%= Request.IsLocal %>" == "True";
  ...

  if(isLocal) {
    // do local stuff
  }
</script> 
```

VS 没有抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:08:27.437

javascript/html/css + server 标签的组合将根据它们的位置等显示波浪线。

如果你真的想避免这种情况，你必须在后面的代码中创建你的 javascript。

```
<asp:Literal id="script" runat="server"> 
```

并在后面的代码中。

```
if (Request.IsLocal) {
    script.Text = "<script>function(){}</script>";
} 
```

# c#-4.0 - 从带有 JSON 的表单测试 WebAPI 中的帖子

> ID：15366172
> 
> 赞同：1
> 
> 时间：2013-03-12T16:03:35.337
> 
> 标签：c#-4.0, asp.net-web-api

我有一些 JSON 示例，我想发布到我的 WebAPI 进行测试，但我看不到它可以对我传入的对象进行反序列化。

这是我的表格：

```
<form  action="/api/orders" method="post" >
              <textarea type="text" id="order" name="order"></textarea>
              <input type="submit"/>
</form> 
```

这是我的方法：

```
 [HttpPost]
        public HttpResponseMessage Post(Model.Order order)
        {
            var response = Request.CreateResponse<Order>(HttpStatusCode.Created, order);
            string uri = Url.Link("DefaultApi", new { id = order.OrderID });
            response.Headers.Location = new Uri(uri);
            return response;
        } 
```

这是我在提交表单中粘贴的内容：

```
{
  "ShipToContactPhone" : "9999999999",
  "ContactPhone" : "9999999999",
  "IsPlaced" : 0,
  "ContainerName" : null,
  "Terms" : "3",
  "ShipDate" : null,
  "OrderGUID" : "6D55FB6E-36A2-43F3-8316-2BE740ACC8E1",
  "CatalogName" : null,
  "ShipToCountry" : "USA",
  "SalesRepID" : 0,
  "OrderType" : null,
  "ShipVia" : null,
  "IsContainer" : null,
  "BillingAddress1" : "TEST ACCOUNT",
  "BillingCity" : "BROOK",
  "CustomerID" : 721182,
  "BillingAddress2" : "",
  "OrderStatus" : "Accept",
  "TaxTotal" : 0,
  "Source" : null,
  "Discount" : 0,
  "OrderDate" : "3\/8\/13",
  "CustomerNumber" : "26",
  "OrderTotal" : 2160,
  "ShippingTotal" : 0,
  "ShipToZip" : "07663",
  "CurrencyCode" : "USD",
  "TaxRate" : 0,
  "Origin" : null,
  "CancelDate" : null,
  "WrittenByName" : "(null)",
  "BillingState" : "NJ",
  "Exported" : null,
  "ShipToAddress1" : "6 ANYWHERE STREET",
  "ShipToAddress2" : "",
  "Notes" : "",
  "FreightTerm" : null,
  "ShipToContactEmail" : "test@test.com",
  "ContactEmail" : "test@test.com",
  "ShipToFax" : "9999999999",
  "ContactName" : "",
  "PONumber" : "",
  "ShipToContactName" : null,
  "WrittenForName" : null,
  "CatalogCode" : null,
  "ManufacturerID" : 3456,
  "ShipToCompanyName" : "TEST",
  "ShipToState" : "NJ",
  "isDefault" : 1,
  "PriceLevel" : 5,
  "ShipToCity" : "BROOK",
  "ContainerCubes" : 0,
  "WrittenForRepnumber" : null,
  "MarketName" : "",
  "DoNotShipBefore" : null,
  "RepNumber" : null,
  "FOB" : null,
  "IsDeleted" : null,
  "SubTotal" : 0,
  "ContactFax" : "9999999999",
  "BillingZip" : "07663",
  "CustomerName" : "TEST",
  "ExportDate" : null,
  "OrderID" : 0,
  "WrittenForRepNumber" : null,
  "BillingCountry" : "USA"
} 
```

我认为这可能是因为内容类型不是**`application/json`**来自表单。

我怎样才能简单地测试它并让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:10:47.743

尝试使用[`jQuery.post`](http://api.jquery.com/jQuery.post/)函数。也看看[这个答案](https://stackoverflow.com/a/6323528/2124070)

# jquery - jQuery .append 问题

> ID：15366180
> 
> 赞同：2
> 
> 时间：2013-03-12T16:03:56.837
> 
> 标签：jquery

这是我的代码：

```
$('.add').click(function(){
    $('#test').append("<div class='tab selected'>TEST</div>");
});
$('.tab').click(function(){
    $('.tab').removeClass('selected').addClass('unselected');
    $(this).removeClass('unselected').addClass('selected');
});

<input type='button' value='add' class='add' />
<div id='test'>
    <div class='tab unselected'>TEST</div>
</div> 
```

这是我的问题：

当我单击`.tab`已在 html 中定义的 div 时，该功能工作正常。但是，如果我使用输入添加另一个`.tab`div `.add`，则该功能不起作用。

我在这里到底做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:05:37.327

事件处理程序绑定到执行时存在的元素。在动态内容更新的情况下，您的赌注是重新绑定处理程序或使用如下委托事件。

```
$('#test').on('click', '.tab', function(){
    $('.tab').removeClass('selected').addClass('unselected');
    $(this).removeClass('unselected').addClass('selected');
}); 
```

或者你可以像下面这样重新绑定，

```
$('.add').click(function(){
    $('.tab').removeClass('selected'); //comment from @MG_Bautista
    var newTab = $('<div />')
                   .addClass('tab selected')
                   .click(tabFx)
                   .text('Test');
    $('#test').append(newTab);
});

$('.tab').click(tabFx);

function tabFx(){
    $('.tab').removeClass('selected').addClass('unselected');
    $(this).removeClass('unselected').addClass('selected');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:16:52.587

用这个...

```
$('.add').click(function(){
    $('.tab').removeClass('selected').addClass('unselected');
    $('#test').append("<div class='tab selected'>TEST</div>");
});

$('#test').on('click', '.tab', function(){
    $('.tab').addClass('unselected');
    $(this).removeClass('unselected');
    $('.tab').removeClass('selected');
    $(this).addClass('selected');
}); 
```

并查看[**演示**](http://jsfiddle.net/Dbvf2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:11:56.050

使用“live”或“on”...如果您引用 jquery 1.7 或更低版本，那么 live 将工作....如果您使用最新的 jquery，请使用“on”

```
$('#test').on('click', '.tab', function(){
    $('.tab').removeClass('selected').addClass('unselected');
    $(this).removeClass('unselected').addClass('selected');
}); 
```

或者

```
$('#test').live('click', '.tab', function(){
    $('.tab').removeClass('selected').addClass('unselected');
    $(this).removeClass('unselected').addClass('selected');
}); 
```

# intellij-idea - Intellij 12 插件加载

> ID：15366181
> 
> 赞同：1
> 
> 时间：2013-03-12T16:03:57.320
> 
> 标签：intellij-idea

我在安全环境中使用 IntelliJ 12 #IU-123.72，即不能直接安装插件。

安装在 C:\Users\username.IntelliJIdea12\config\plugins 下查找插件我有一个下载的 python 插件版本作为 zip，我解压缩插件文件夹中的内容。

然而，这并没有带来 python 插件。文件 -> 设置 -> 插件不显示 python。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:23:58.110

[更新到 12.0.4](http://www.jetbrains.com/idea/download/index.html)并使用`Install plugin from disk...`按钮。注意兼容性。IDEA 12.0.x 兼容的 Python 插件[可以在这里下载](http://plugins.jetbrains.com/plugin/download?pr=idea&updateId=12224)。

[存储库中可用](http://plugins.jetbrains.com/plugin/?idea&pluginId=631)的最新插件版本专为[IDEA 12.1 EAP](http://confluence.jetbrains.com/display/IDEADEV/IDEA+12.1+EAP)设计。

# c# - 构建我自己的 SqlDataReader 对象

> ID：15366184
> 
> 赞同：0
> 
> 时间：2013-03-12T16:04:03.940
> 
> 标签：c#, sqldatareader

我需要帮助。我一直在我应该去的方向上来回走动，并且有一些我不喜欢或不能使用的选项。

我编写了一个通用的数据转储工具，它从指定的服务器中提取数据并将其转储到逗号分隔的文件中。它的配置和要运行的查询来自专门为此工具创建的 SQL 表。但是，我有一个新要求，即有一些数据转储需要从不同的服务器中提取数据并合并在一起，但我不想为这种“自定义”类型的 pull/dump 更改工具。我试图保持它的通用性，所以我不会经常对其进行编码。我的想法是创建一个库，我的报告工具可以在其中使用这些自定义类型的拉取，并且此库返回的数据是一个 SqlDataReader 对象。但是，由于该库必须从不同的服务器中提取并合并数据，因此该库是否可能创建它的 SqlDataReader？

我不想返回一个数组，因为这不是工具现在循环数据的方式，主要是因为我现有的一些数据转储是数百万行，所以我现有的循环是一个 datareader 循环来保持内存下降。但是，库可以创建一个二维数组，只要它可以在返回之前转换为 SqlDataReader 对象。这样我就不必对应用程序中的循环进行太多更改。

希望一切都说得通。我脑子里一直在蹦蹦跳跳，所以我最终写了 10 次。

编辑：请记住，每条记录将分散在 3 个服务器上，并且必须合并。这是三个不同的进程，它们一起工作，但有自己的服务器。例如，来自服务器 1 的 ID 将与 Server2 上的 Server1ID 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:06:05.853

所有 ADO.NET 数据访问类都实现了通用接口，因此您可以返回一个`IDataReader`而不是`SqlDataReader`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:00:13.513

我想出了一个解决方案。我将编写对象，它将根据要生成的“自定义”报告动态生成。该对象将从第一台服务器中提取数据并将其插入本地表/SQL Server。然后它将转到下一个服务器，根据提取的第一个数据提取数据并在同一服务器内更新它。最后是最后一个服务器来提取最终数据，这些数据也需要合并到我的本地表中。正确合并所有内容后，我将选择 * 作为原始调用方 Data/Dump exe 所需的 DataReader。似乎是在不修改每个自定义数据拉取的原始 exe 的情况下完成这项工作的唯一真正方法。

感谢大家的意见。

# android - android：与 PC 桌面应用程序和远程媒体播放器控制器通信

> ID：15366185
> 
> 赞同：0
> 
> 时间：2013-03-12T16:04:05.380
> 
> 标签：android, http, android-wifi, remote-server

请不要生我的气。我有两个问题，我认为主题非常相似，所以我决定将它们合并为一个。我在 android 上有我的应用程序，它使用传感器进行一些计算。我将结果存储在我的数据库中。我想要做的是将我的数据从我的手机发送到我的桌面应用程序，还带有一个数据库（点击按钮）。

更准确地说，这里有一个例子：我的光传感器读取当前的光强度。可以说它是1000lux。现在，当我在我的 android 应用程序中单击“发送”按钮时，它会将此值发送到我的桌面应用程序数据库。该桌面应用程序将读取该值并将其显示给用户。

可以通过WIFI吗？或者通过网络更好，所以我不会受到距离的限制？android如何管理这种通信？

我的第二个问题是，如果在我的 PC 上控制媒体播放器与我所说的相似。

编辑：

我做了一些研究，发现了一个 Socket 教程。我试过了，就像它在那里一样。所以我在我的 android 应用程序中有这个：

```
public class Client extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_client);
    Client myCli = new Client();
    try {
        myCli.run();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_client, menu);
    return true;
}

public void run() throws Exception {

    Socket mySkt = new Socket("192.168.1.6", 9999);

     PrintStream myPS = new PrintStream(mySkt.getOutputStream());

     myPS.println("Hello server");

     BufferedReader myBR = new BufferedReader
    (new InputStreamReader(mySkt.getInputStream()));

} 
```

}

这在netBeans中：

```
//Author: WarLordTech
//Website: http://www.youtube.com/user/WarLordTech
import java.io.*;
import java.net.*;

public class Server {
  public static void main(String[] args) throws Exception{
      Server myServ = new Server();
      myServ.run();
  }

  public void run() throws Exception{
      ServerSocket mySS = new ServerSocket(9999);
      Socket SS_accept = mySS.accept();

      BufferedReader SS_BF= new BufferedReader(new InputStreamReader
        (SS_accept.getInputStream()));

      String temp = SS_BF.readLine();
      System.out.println(temp);

      if (temp!=null) {
        PrintStream SSPS = new PrintStream(SS_accept.getOutputStream());
        SSPS.println("Got something");
      }
   }
} 
```

它仍然无法正常工作。我必须以某种方式设置我的网络吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:11:52.400

您可以使用 TCP 套接字来做到这一点。许多语言都有 Socket 编程的实现，因此您将“需要”用 Java 对桌面应用程序进行编程（当然这总是可能的！）。

[Java中的套接字教程](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)

这将通过网络和本地 wifi 工作。您可以对本地 wifi 使用其他方法，例如 UDP 连接。您需要设置 TCP 服务器并确保您可以访问等。

可能还有其他方法可以做到这一点，但这并不是一件容易的事！

# python - Django模板反向url解析而不为变量创建组

> ID：15366186
> 
> 赞同：2
> 
> 时间：2013-03-12T16:04:07.177
> 
> 标签：python, regex, django, url

我想创建这样的网址；

```
.../film/slug-of-the-film/id-of-film
.../film/id-of-film 
```

例子;

```
../film/fight-club/1040
../film/1040 
```

两个链接是一样的。

当我这样做时；

```
url(r'^(?P<slug>[-\w]+/)?(?P<id>[0-9]+)/$', views.summary, name="film_summary") 
```

我可以从模板中反转 url`{% url film_summary film.slug film.id %}`

我不使用蛞蝓。它只是为了可读性。所以我尝试这样的事情；

```
url(r'^(?:[-\w]+/)?(?P<id>[0-9]+)/$', views.summary, name="film_summary") 
```

但我无法从模板中扭转这一点。有没有办法做到这一点？

除了这样的解决方案；`/film/{{film.slug}}/{{film.id}}`

其实我不知道有没有必要这样做。我只是打算不要在我不会使用的视图函数中添加参数。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:45:07.977

我会将它们作为单独的网址处理。这也为人类读者简化了正则表达式。

```
url(r'^(?P<id>[0-9]+)/$', views.summary, name="film_summary"),
url(r'^(?P<slug>[-\w]+/)?(?P<id>[0-9]+)/$', views.summary) 
```

# php - php用另外2个随机字符替换2个字符

> ID：15366193
> 
> 赞同：-4
> 
> 时间：2013-03-12T16:04:39.920
> 
> 标签：php

我想将字符串中的 2 个字符与其他 2 个字符交换。

开始字符串 = "`bHello `!how `Qare `%you."

随机字符串 = "1234567890abcdefghijklmnopqrstuvwxyz!£$%^&@"

我如何交换`b`！`Q `% 随机的所以看起来像这样

最终结果字符串 = "`4Hello `^how `$are `@you."

到目前为止我已经尝试过了

我试过到目前为止

$out = "`vHow `!are `@you."

$patterns = array("`1","`J","`2","`3","`4","`5","`6","`7","`!", "`$","`%","`^","`&","`)","`~","`#","`@","`q","`e", "`y","`t","`p","`j","`k","`l","`M","`x","`v","`m", "`Q","`E","`R","`T","`Y","`P","`G","`K","`L","`X", "`V");

$pretest = array("`1","`J","`2","`3","`4","`5","`6","`7","`!", "`$","`%","`^","`&","`)","`~","`#","`@","`q","`e", "`y","`t","`p","`j","`k","`l","`M","`x","`v","`m", "`Q","`E","`R","`T","`Y","`P","`G","`K","`L","`X", "`V");

$tempstr = $pretest[rand(0, strlen($pretest)-1)];

$substs = "`".$tempstr;

$out = preg_replace($patterns, $substs, $out);

然而最终的结果是

$out = "`%How `%are `%you."

它只随机选择 1 个并将它们全部更改为那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:12:18.607

```
<?php
function randomChar() { 
    $rand = "1234567890abcdefghijklmnopqrstuvwxyz";
    return substr($rand, rand(0, strlen($rand)), 1);  
} 

echo preg_replace_callback("/`./", 'randomChar', "`bHello `!how `Qare `%you."); 
```

# ruby - ?: ruby 中的运算符和变量定义

> ID：15366198
> 
> 赞同：0
> 
> 时间：2013-03-12T16:04:47.397
> 
> 标签：ruby

我对变量定义很感兴趣。我知道变量定义，只是为了了解它是如何工作的。这个想法是如果未定义 myvar 则将其设置为 0。我不想使用 false，因为 false 或 nil 可能会返回 false。

```
def foo
  myvar=1000

  myvar = ((defined? myvar)==nil) ? 0 : myvar
  puts myvar
end

foo # => 1000 
```

但

```
def foo
  # myvar=1000

  myvar = ((defined? myvar)==nil) ? 0 : myvar
  puts myvar
end

foo # => nil 
```

但

```
def foo
  mybool = ((defined? myvar)==nil)
  myvar = mybool ? 0 : myvar
  puts myvar
end

foo # => 0 it rocks ! 
```

这就像布尔测试是否在评估最终测试之前影响到 myvar 。 `((defined? myvar)==nil)`给出了定义的 2 种可能性？myvar 可能是`nil`，或者 test 的右侧`nil`可能是`nil`(it's `nil`)。

为了摆脱这个测试的 nil 部分，我尝试了这段代码：

```
def foo    
  mylocalvariable = 2 # it gives 'local-variable' and not nil
  puts ((defined? myvar) == (defined? mylocalvariable ))
  myvar = ((defined? myvar)!=(defined? mylocalvariable )) ?  0 : myvar
  puts myvar
end

foo # => nil 
```

似乎测试的第一部分受到了 myvar 的影响，但是赋值运算符出现在 () 或比较运算符之后。你有想法吗？我不想要其他代码，只是为什么它会这样工作。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:06:05.037

您可能不想要其他代码，但您需要一些代码，因为您要走很长一段路才能完成一些简单的事情。如果要将未定义的变量设置为 0，请使用：

```
myvar ||= 0 
```

它是如何工作的？`||=`是一个条件赋值运算符，它基本上查看左侧分配给的变量，如果它是 nil 或 false，则将右侧的值分配给它。这是在许多语言中发现的一个技巧。

三元 ( `?:`) 语句对于小`if/then/else`语句很有用，但对于您想要做的事情来说并不是真正的正确选择。相反，如果您想使用除 之外的东西`||=`，请使用：

```
myvar = 0 unless myvar 
```

同样，`myvar`如果它恰好是一个`false`值，所有这些都将重新分配，而不仅仅是它为零。这是一个潜在的问题，但是，作为开发人员，我们应该能够控制并且应该清楚地知道变量在任何时候持有什么类型的值，所以它不应该是那么大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:47:52.653

嗨，这种运算符是三元运算符。

```
Example:
@x = 1
@y = 2
@x>2 ? puts "YES" : puts "NO" 
```

您还可以检查它是否为 ActiveRecord

```
Example:
@x = User.find(:all, :conditions => ["id = ?", 1])
@x.nil? ? puts "Null" : puts "Not Null" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:05:34.540

我知道为什么。当您编写 myvar= 并测试 defined?myvar 时，ruby 认为 myvar 已定义。如果您删除 myvar= ，则 myvar 在测试中被视为未定义。左侧部分在右侧部分之前读取。

# validation - 何时触发电子邮件唯一性验证器？

> ID：15366199
> 
> 赞同：1
> 
> 时间：2013-03-12T16:04:50.750
> 
> 标签：validation, ruby-on-rails-3.2

[我对 Michael Hartl 教程中的这个测试](http://ruby.railstutorial.org/chapters/modeling-users#code-validates_uniqueness_of_email_case_insensitive_test)有疑问：

**模型：**

```
class User < ActiveRecord::Base
  .
  .
  .
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: true
end 
```

**测试：**

```
require 'spec_helper'

describe User do

  before do
    @user = User.new(name: "Example User", email: "user@example.com")
  end
  .
  .
  .
  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end
end 
```

我对电子邮件唯一性验证器的理解是它不能在数据库中添加两次。但是在这个测试中，用户只是用一个新的实例化，而不是一个创建。

所以这就是我认为会发生的事情：

*   `@user = User.new`（只是在记忆中）
*   ...
*   `user_with_same_email = @user.dup`我们在内存中有两个用户
*   ...
*   `user_with_same_email.save`我们在数据库中插入第一个用户，所以它应该是有效的，但测试`it { should_not be_valid }`通过了。

我怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:35:47.403

真正发生的事情：

在`before`：

*   `@user = User.new`（只是在记忆中）

在`describe`：

*   `user_with_same_email = @user.dup`我们在内存中有两个用户
*   `user_with_same_email.save`我们在数据库中插入第一个用户，所以它应该是有效的，它是！但这不是这里正在测试的

在`it`：

*   `should_not be_valid`调用`.valid?`@user，由于我们刚刚插入了具有相同电子邮件的用户，@user 无效。所以测试通过了。

# ibm-mq - 成功连接后，WebSphere MQ Explorer 不显示队列

> ID：15366203
> 
> 赞同：1
> 
> 时间：2013-03-12T16:04:55.473
> 
> 标签：ibm-mq

我对 WebSphere MQ Explorer 7.x 有一个奇怪的问题。

我已将 MQ Explorer 配置为与队列管理器正确连接。它运行了几个月，您可以在左侧的树中，在队列管理器下看到一个名为“Queues”的列出节点。单击它会在右侧打开队列列表。

但是现在，我无法列出这些队列，甚至看不到节点“队列”，如下面的屏幕截图所示。

我尝试刷新视图（Ctrl+R，F5），重置视角。没有什么帮助。

我该如何解决？

我尝试使用 v7.1 和 v7.5。

![WebSphere MQ 资源管理器屏幕截图](../Images/6fa5743c28cef5b8a28f8c756c65d12c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:47:49.833

I resolved the problem in the following way.

1.  Right clicked on `Queue Managers` node.
2.  Selected `Show/Hide Queue managers...`.
3.  Hidden my queue manager and applied the change.
4.  Shown your queue manager and applied the change. Queue manager appeared in the list on the left.
5.  Clicked on the manager node in the list to connect. `Queues` node appeared.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T07:35:55.767

单击导航面板上的 IBM WebSphere MQ，您将看到一个图标列表（在右侧窗口中），这些图标指示您的队列管理器的可能状态。

如果您的队列管理器“正在运行但与 WebSphere MQ Explorer 断开连接”，那么您可能连接到一个无权查看队列的用户。

# javascript - 从 PhantomJS 启动另一个 API

> ID：15366208
> 
> 赞同：1
> 
> 时间：2013-03-12T16:05:09.877
> 
> 标签：javascript, api, shell, phantomjs

我使用 PhantomJS 开发一个将在服务器端执行的脚本。

总之，我的脚本会为我生成一个页面截图。我使用 API 端 PhantomJS 另一个 API，它将为我提供有关上面生成的图像的信息。

要启动 PhantomJS 我的屏幕，我必须在服务器的控制台中输入：phantomjs MyScript.js

该脚本为我生成一个图像以使用我必须在控制台中输入的第二个 API：nameofmyapi image.png

是否有可能在我的脚本 PhantomJS 中像这样调用我的第二个 API？

```
page.open(function(){

    page.render();

    WRITE IN CONSOLE -> nameofmyapi image.png

} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T07:20:05.153

也许为时已晚，但这种情况有两种可能性：

**1\. 使用新的 child_process 模块（1.9 新增）**

[你可以在这里](https://github.com/ariya/phantomjs/blob/master/examples/child_process-examples.js)找到一个例子。

```
var execFile = require("child_process").execFile

execFile("nameofmyapi ", ["image.png"], null, function (err, stdout, stderr) {
  console.log("execFileSTDOUT:", JSON.stringify(stdout))
  console.log("execFileSTDERR:", JSON.stringify(stderr))
}) 
```

**2\. 在 phantomJS 中注入你的 API**

PhantomJS 支持脚本注入到 Phantom 外层空间。如果您的代码是纯 JS API，您可以轻松使用它而无需流程执行成本。[请参阅此处](http://phantomjs.org/api/phantom/method/inject-js.html)
的 文档。

# iphone - iPhone 4 捕获 max-width:480px 媒体查询

> ID：15366213
> 
> 赞同：1
> 
> 时间：2013-03-12T16:05:28.203
> 
> 标签：iphone, css, responsive-design, media-queries, iphone-4

分辨率为**640×960**的 iPhone 4属于以下指定的媒体查询：

```
@media only screen and (max-width:480px) 
```

这个媒体查询在我的 CSS 样式表的*最后......*

**此查询上方**是那些适用于 iPad (1024) 和台式机等的出色...

我错过了什么？？

我希望 iPhone4 响应样式表中前面指定的媒体查询，目标为：**(max-width:640px)**，当然......

作为记录，我的视口标签目前是：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:15:39.420

您已经混淆了 css px 和 display px。这是可以理解的，因为它们都以 px 为单位。叹。

从 css 的角度来看，一个 Retina 显示器只有 320px 宽。但是，它的像素比是 2，这意味着 css-land 中的每 1px 在显示器上实际上是 2px。

[从这里](http://css-tricks.com/snippets/css/retina-display-media-query/)您可以使用不同的选择器来识别视网膜显示器：

```
@media 
  (-webkit-min-device-pixel-ratio: 2), 
  (min-resolution: 192dpi) { 
    /* Retina-specific stuff here */
} 
```

# android - 在Android中获取出站电话号码

> ID：15366222
> 
> 赞同：1
> 
> 时间：2013-03-12T16:05:47.363
> 
> 标签：android

下面显示了我的一段简化代码。重要的是，当呼叫状态为 CALL_STATE_RINGING 并且呼叫是入站时，我现在有了电话号码。现在我还想要电话出站时的电话号码（所以接收端的电话号码）。我在这里想念什么？

```
@Override
public void onCallStateChanged(int state, String number) {
    Log.d("BackgroundService", "State: "+  state +" Number: " + number);
}

telephonyManager.listen(phoneStateListener,
                PhoneStateListener.LISTEN_CALL_STATE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:42:20.170

使用 ACTION_NEW_OUTGOING_CALL 注册广播接收器。在 onReceive 回调函数中你会知道拨出电话的数量

```
 public void onReceive(Context context, Intent intent) {
            String phone = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
        } 
```

和offcourse使用权限`android.permission.PROCESS_OUTGOING_CALLS`

# java - 无法将 JSON 数组解析为 Jackson 中的 LinkedHashMap

> ID：15366224
> 
> 赞同：2
> 
> 时间：2013-03-12T16:05:56.330
> 
> 标签：java, android, json, jackson, linkedhashmap

我正在开发一个 Android REST 客户端。我们使用 JSON 作为数据交换格式，所以我使用 Jackson 解析器。我从服务器得到不同的 Json 响应，比如简单的数组：

```
{"user_id":"332","user_role":"1"} 
```

或者是其他东西。我解析所有这些东西`LinkedHashMap<String, Object>`并且一切正常，但是当我从服务器得到这个响应时：

```
[ { "user_id":"352",
    "user_role":"expert",
    "name":"Test 12-18",
    "description":"Test" },

  { "user_id":"263",
    "user_role":"novice lab",
    "name":"Tom's Desk",
    "description":"Desk"}
] 
```

解析后我得到了 null: {}。这是我使用 Jackson 的代码：

```
 ObjectMapper mapParametersToJSON = new ObjectMapper();
 String serverResponseBody = responseFromServer.getBody();
LinkedHashMap<String, Object> resultofOperation = new LinkedHashMap<String,
     Object>();
TypeReference<LinkedHashMap<String,Object>> genericTypeReferenceInformation = new
    TypeReference<LinkedHashMap<String,Object>>() {};
    try {
     resultofOperation =  mapParametersToJSON.readValue(serverResponseBody,
         genericTypeReferenceInformation); 
```

那么，为什么杰克逊没有解析这个呢？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T17:02:13.947

其他人提出了这个问题，但解决方案有点不完整。如果你需要处理 JSON 对象和数组，你可以绑定到`java.lang.Object`，检查类型：

```
Object stuff = objectMapper.readValue(json, Object.class); 
```

你会得到`List`or `Map`（特别是`ArrayList`or `LinkedHashMap`，默认情况下；这些默认值可以更改）。

或者您可以使用以下方法创建 JSON 树`JsonNode`：

```
JsonNode root = objectMapper.readTree(json);
if (root.isObject()) { // JSON Object
} else if (root.isArray()) { ...
} 
```

后者通常更方便。

一件好事是您仍然可以从中创建常规 POJO，例如：

if (root.isObject()) { MyObject ob = objectMapper.treeToValue(MyObject.class); } // 或 with `Object`, 使用`objectMapper.convertValue(ob, MyObject.class)`

所以你甚至可以对不同的类型进行不同的处理；来回不同的表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:17:10.280

您问题中的第一个 JSON 是地图或对象。第二个是数组。您不是在解析数组，而是在解析地图。

你需要做这样的事情：

```
List<MyClass> myObjects = mapper.readValue(jsonInput, new TypeReference<List<MyClass>>(){}); 
```

[与这里](https://stackoverflow.com/questions/6349421/how-to-use-jackson-to-deserialise-an-array-of-objects)的答案几乎相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:19:41.340

在 JSON 中`{"key": "value"}`是对象，`["this", "that"]`是数组。

因此，如果您收到对象数组，您应该使用类似`List<Map<Key, Value>>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:24:36.513

你正面临一个错误，因为`[]`构造不能被翻译成`Map`引用，只能在`List`或数组中。

我建议这样做：

```
ObjectMapper objectMapper = new ObjectMapper();

List<Map<String,String>> parsedResult = objectMapper.reader(CollectionType.construct(LinkedList.class, MapType.construct(LinkedHashMap.class, SimpleType.construct(String.class), SimpleType.construct(String.class)))).readValue(serverResponseBody);

//if you need the one result map
Map<String, String> resultMap = new LinkedHashMap<String, String>();

for (Map<String, String> map: parsedResult){
    resultMap.putAll(map);
} 
```

# c# - 插入记录后获取记录ID

> ID：15366229
> 
> 赞同：1
> 
> 时间：2013-03-12T16:06:11.763
> 
> 标签：c#, sql, sql-server

我需要获取记录的 ID，以便我可以将用户转发到包含他们刚刚提交的信息的另一个页面。我查看了有关此的其他问题，人们建议使用 SELECT SCOPE_IDENTITY() 或 OUTPUT 但我对 c# 和 SQL 真的很陌生，所以我不知道如何将它与现有代码一起使用。任何帮助将不胜感激。

可以看到我需要把刚才插入的记录的ID放到response.redirect中。

```
pcn.Open();
pcm.Connection = pcn;

string logon_user = Request.ServerVariables["LOGON_USER"].Substring(7);

var sql = String.Format(@"INSERT INTO Transfer (Status, Type, Name) values ('{0}','{1}','{2}')", '0', TypeTxtBox.Text.Replace("'", "''"), logon_user);

pcm.CommandText = sql;
pcm.ExecuteNonQuery();
pcn.Close();

Response.Redirect("View.aspx?ID=" + id); 
```

是的，我看到还有其他类似的问题，但我正在寻找我上面代码的确切帮助，不要标记这个重复，因为它不是！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:10:39.450

首先阅读参数化 SQL，永远不要对 SQL 使用字符串连接，因为你更有可能遇到 SQL 注入！

要获取 ID，您需要将代码更新为如下所示：

```
pcm.CommandText = "INSERT INTO Transfer (Status, Type, Name) values (@status, @type, @name);SELECT SCOPE_IDENTITY();";
object identifier = pcm.ExecuteScalar(); 
```

如果您的标识符是整数，则可以`identifier`转换为 int 以获取值（针对 Guid 等进行相应调整）

```
int id = (int)identifier; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:10:37.387

您将需要使用 ExecuteScalar 而不是 ExecuteNonQuery。有多种获取 ID 的方法，但 SCOPE_IDENTITY() 是我会使用的。

您可以在此处查看 MSDN 上的示例：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:10:44.610

`SCOPE_IDENTITY`获取插入到范围内的标识列中的最后一个标识值。 `SqlCommand.ExecuteScalar`执行脚本并检索 ID。

```
 var sql = String.Format(@"INSERT INTO Transfer (Status, Type, Name) values ('{0}','{1}','{2}')  
        SELECT CAST(scope_identity() AS int)"
    , '0', TypeTxtBox.Text.Replace("'", "''"), logon_user);

int ID = (int)pcm.ExecuteScalar(); 
```

# java - 在Java中添加边框

> ID：15366232
> 
> 赞同：1
> 
> 时间：2013-03-12T16:06:16.643
> 
> 标签：java

我正在尝试创建一个图像，通过将像素从旧位置复制到新坐标来为 Java 上的现有图像添加边框。我的解决方案正在运行，但我想知道是否有更有效/更短的方法来做到这一点。

```
 /** Create a new image by adding a border to a specified image. 
 * 
 * @param p
 * @param borderWidth  number of pixels in the border
 * @param borderColor  color of the border.
 * @return
 */
    public static NewPic border(NewPic p, int borderWidth, Pixel borderColor) {
    int w = p.getWidth() + (2 * borderWidth); // new width
    int h = p.getHeight() + (2 * borderWidth); // new height

    Pixel[][] src = p.getBitmap();
    Pixel[][] tgt = new Pixel[w][h];

    for (int x = 0; x < w; x++) {
        for (int y = 0; y < h; y++) {
            if (x < borderWidth || x >= (w - borderWidth) || 
                y < borderWidth || y >= (h - borderWidth))
                    tgt[x][y] = borderColor;
            else 
                tgt[x][y] = src[x - borderWidth][y - borderWidth];

        }
    }

    return new NewPic(tgt);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:09:02.037

如果只是为了呈现到屏幕上，并且意图不是实际为图像添加边框，而是让图像带有边框呈现到屏幕上，[则可以为显示图像的组件配置边框](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html).

```
component.setBorder(BorderFactory.createMatteBorder(
                                4, 4, 4, 4, Color.BLACK)); 
```

将呈现一个以黑色绘制的 4 像素（在每个边缘上）边框。

但是，如果意图是真正重绘图像，那么我会通过抓取每个行数组来接近它，然后使用 ByteBuffer 并通过批量`put(...)`操作复制行数组（和边框元素），然后抓取整个 ByteBuffer内容作为数组填充回图像。

这是否会对性能产生任何影响是未知的，在尝试优化之前和之后进行基准测试，因为生成的代码实际上可能会更慢。

主要问题是虽然系统 Arrays 函数允许批量复制和填充数组内容，但它没有提供实用程序来执行目标数组的偏移量；但是，NIO 包中的 Buffers 让您可以很容易地做到这一点，所以如果存在解决方案，它就在 NIO ByteBuffer 或者它的同类中。

# php - PHP电子邮件表单多选，在电子邮件收件箱中获取数组而不是值

> ID：15366235
> 
> 赞同：0
> 
> 时间：2013-03-12T16:06:32.613
> 
> 标签：php, html, forms

我正在尝试设置一个简单的 PHP 联系人，问题是当我从 Multiple List 中选择一个值时，我得到了**ARRAY**。结果在电子邮件收件箱中，而不是以下值：查询主题：**数组**

```
 <SELECT class=matter multiple size=3 
              name=subject[]>
                        <OPTION value="ACMI / Wet Lease">ACMI / Wet 
                          Lease</OPTION>
                        <OPTION value="Dry Lease">Dry Lease</OPTION>
                        <OPTION value="Charter Services">Charter Services</OPTION>
                        <OPTION value="Religious Pilgrimage">Religious 
                          Pilgrimage</OPTION>
                        <OPTION 
                value=Consulting>Consulting</OPTION>
                      </SELECT>
                        <span class="aircraft">Control Click for Multiple Selection</span></TD> 
```

这是PHP代码：

```
<?php

if(isset($_POST['name'])) {
$to = 'mail.com';
$subject = "Request Form Submission – ".$_POST['company' ];  
$message = '<br>- Name: '.$_POST['name'].'<br>- Title:  '.$_POST['title'].'<br>- Company: '.$_POST['company'].'<br>- Email:  '.$_POST['email'].'<br>- Telephone:  '.$_POST['telephone'].

 $data =  '<br>- Subject of enquiry:  '.$_POST['subject'];

$message .= '<br>- Type of Aircraft: '.$_POST['aircraft'].'<br>- Monthly Utilization: '.$_POST['utilization'].'<br>- Lease Duration: '.$_POST['duration'].'<br>- Route Structure: '.$_POST['route'].'<br>- Comment:  '.nl2br($_POST['comment']).'<br>- Reference: '.$_POST['ref'].'<br>- Region: '.$_POST['region'];

$from = "visitor.com";
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
$headers .= "From:" . $from;
if(mail($to,$subject,$message,$headers)) {
    $msg = "Thank you for your request.  Your inquiry has been forwarded to our 

Leasing Department for review.   Should we have any questions or meet your required needs, one of our qualified staff will contact you in regards to your inquiry for further discussion.

Thank you and have a nice day.";

}
?> 
```

我在收件箱中得到的结果是数组而不是这些主题之一：

*   **查询主题：数组**

如果您在此代码中看到： name=subject* *[] * 删除此***[]**后有一个数组，我将在选择多个选项后仅得到一个结果。

这是页面[提交请求的链接](http://akbarbarca.vacau.com/submitrequest.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:08:48.073

`$_POST['subject']`是一个数组。你可以使用：

```
 $data =  '<br>- Subject of enquiry:  '.print_r($_POST['subject'],true); 
```

或者

```
$data =  '<br>- Subject of enquiry:  '.join(',',$_POST['subject']); 
```

# javascript - 从异步函数设置全局变量

> ID：15366236
> 
> 赞同：1
> 
> 时间：2013-03-12T16:06:33.987
> 
> 标签：javascript, jquery

嗨，我有以下内容。

```
var g = new Array() ; 

$.getJSON(google, function(data) {
  var i = 0 ; 
  $.each(data.items, function() {
    var obj = new res(i, this.title, this.snippet, this.formattedUrl, 0) ; 
    g.push(obj) ; 
    i=i+1 ;
  });
}); 
```

我需要能够访问异步函数之外的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:09:03.053

严格回答有关如何设置全局的部分，一种常见的方法是为您的应用创建命名空间，例如

```
window.App = {}; // or just App = {}; 
```

然后把全球的东西放在那里

`App.g = [];`

现在您可以从任何地方访问您的命名空间。

请注意，您仍然需要注意何时可能有修改全局变量的未完成请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:09:53.183

您可以选择使用`.data()`比全局变量更简单的。

它的工作方式是你设置这样的元素：

```
$('body').data('g', mydata); 
```

任何地方，并像这样检索它：

```
$('body').data('g'); 
```

当然，它可以在任何元素上，而不仅仅是`body`.

# symfony - Symfony2 为徽标加载资产

> ID：15366243
> 
> 赞同：1
> 
> 时间：2013-03-12T16:06:47.880
> 
> 标签：symfony

我正在尝试在`base.html.twig`. 其实我认为这应该是非常基本和容易的。但是，我希望此资产不位于 Bundle 中，而是位于 Bundle 中`app/Resource/`，因为就我而言，这应该是 App-Wide Resources 的正确位置。但是我无法加载让它加载甚至复制到 web 文件夹。我做错了什么可怕的事情，因为感觉如此吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:29:45.630

这些文件（应用程序的一部分，而不是特定的捆绑包）属于`web`文档中所述的目录：

> Web 根目录是所有公共和静态文件的主目录，包括图像、样式表和 JavaScript 文件。

[http://symfony.com/doc/current/book/page_creation.html#the-web-directory](http://symfony.com/doc/current/book/page_creation.html#the-web-directory)

**编辑**

如果您希望压缩 js 和 css，只需使用：

```
{% stylesheets 'public/css/*' filter='yui_cs' %}
      <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
{% endstylesheets %} 
```

和

```
{% javascripts 'public/js/*' filter='yui_js' %}
      <script src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

*您可能需要根据您的配置更改过滤器名称*

# mongodb - 如何存储和调用一个简单的mongodb过程

> ID：15366246
> 
> 赞同：2
> 
> 时间：2013-03-12T16:06:54.847
> 
> 标签：mongodb

我经常在 MongoDb 命令 shell 中调用相同的命令，例如：

```
db.user().find().pretty(); 
```

您将如何存储和回调此命令？

理想情况下将其转换为以下内容：

```
db.findp( 'user' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:23:48.960

我相信这不是您想要的，现在我再次阅读了您的问题：http: [//docs.mongodb.org/manual/applications/server-side-javascript/](http://docs.mongodb.org/manual/applications/server-side-javascript/)

相反，您希望以这种方式修改控制台以使您的生活更轻松。

我现在应该注意到，实际上有一个扩展可以为你做这种由 10gen 制作的自动格式化：[https ://github.com/TylerBrock/mongo-hacker](https://github.com/TylerBrock/mongo-hacker)

但是，如果您希望稍微修改 MongoDBs 控制台后面的文件，那么您将需要做一些体力劳动。

在您的主目录中有一个`rc`名为`.mongorc.js`. 在此文件中，您可以放置​​您喜欢的任何自定义代码（如@Asya 所述），它实际上将成为控制台中的命令。

在您`rc`的文件中，您可以放置​​如下函数：

```
DB.prototype.pfind = function(col){
    return this[col].find().pretty();
}; 
```

或者你可以写：

```
DBCollection.prototype.pfind = function(){
    return this.find().pretty();
}; 
```

然后你应该能够做到：

```
db.pfind('users'); 
```

或者使用第二个命令：

```
db.users.pfind(); 
```

当然，这种方法适用于 Linux，我不确定 Windows，但是，Windows 应该在`rc`我相信的某个地方有一个类型脚本。

# java - 在清理和（重新）构建之后创建 apk

> ID：15366247
> 
> 赞同：1
> 
> 时间：2013-03-12T16:06:54.893
> 
> 标签：java, android, apk

我决定清理并重建我的应用程序，因为 apk 没有显示代码更改。现在，在构建之后，我的 bin 文件夹中没有 apk，我无法在智能手机上运行该应用程序。

我怎样才能创建apk？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:11:06.750

在模拟器上运行项目时，`.apk`会在 bin 目录中生成 。请记住，仅构建项目（而不是运行它）不会将`apk`文件输出到 bin 目录中。

`.apk`要从Eclipse 中导出未签名的项目，**请右键单击**Package Explorer 中的项目并选择**Android Tools > Export Unsigned Application Package**。然后指定 unsigned 的文件位置`.apk`。

对于已签名的 apk：-

**导出 -> Android -> 导出 Android 应用程序 -> YOUR_PROJECT_NAME -> 创建新的密钥存储路径 -> 填写详细信息 -> 设置 .apk 位置 -> 现在您可以获取 .apk 文件**

现在将生成的安装`apk`在您的手机中。

**注意：-**我假设项目中没有错误。

**编辑： -**附上快照。

![图 1](../Images/a5312849bb21644746af5bb812e92ccc.png)

![图 2](../Images/191d40243adfa8867fd36d16e55d5832.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:08:27.293

> 我的 bin 文件夹中没有 apk

这可能是因为您的代码中有错误。当您从 Eclipse 运行项目时，它将由 apk builder 自动创建。

在 Eclipse 中，在 Project Props 的 Build Path 选项下，我们可以手动设置输出文件夹。确保你没有编辑这个。

# c# - 播放 FLV 文件

> ID：15366249
> 
> 赞同：0
> 
> 时间：2013-03-12T16:06:58.467
> 
> 标签：c#, winforms

我想直接从 Internet 或 C# 中的本地文件播放 FLV 文件我曾尝试使用 Shockwave Flash Object，但我遇到了很多问题，所以

问题：是否有用于在 c# 中播放 FLV 文件的库，具有 PLAY、PAUSE、STOP、SEEK 等功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:46:40.183

有一个[.NET VLC 库](http://vlcdotnet.codeplex.com/)可以让您播放这些视频。

# windows - 如何获得调试 Haxe for windows 的错误行？

> ID：15366251
> 
> 赞同：3
> 
> 时间：2013-03-12T16:07:02.743
> 
> 标签：windows, debugging, haxe, haxeflixel, nme

我正在 FlashDevelop 中使用带有 HaxeFlixel 的 Haxe 构建游戏，目前针对 Windows 平台。

当我在控制台中收到错误消息时，我想知道我是否也可以得到错误行（就像 flash 一样）。

我只得到这样的自动取款机

> 错误：空对象引用

我正在使用 NME 命令行进行编译`nme test windows -debug`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:01:10.830

[我在Haxe Google Group](https://groups.google.com/forum/?fromgroups=#!topic/haxelang/N_I8PJmDRNM)上发布了这个问题，这里是 hxcpp 的创建者 Hugh 的“官方答案”：

> 您好，在这种情况下，3.0 HXCPP 版本中有一个错误会阻止在调试模式下正确的堆栈转储。这在 SVN 版本中已修复。您还可以附加 Visual Studio 并在“hx::CriticalError”中放置一个函数断点并在那里检查堆栈。
> 
> 休

下一版本的 hxcpp 将修复此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:19:26.950

您是否尝试将以下几行添加到项目文件中？

```
<haxedef name="HXCPP_STACK_TRACE" />
<haxedef name="HXCPP_STACK_LINE" />
<haxedef name="HXCPP_DEBUG_LINK" /> 
```

我有同样的问题，但在 linux 下 - [http://www.nme.io/community/forums/general-discussion/how-get-stack-trace-if-segmentation-fault-ocured-cpp-target/](http://www.nme.io/community/forums/general-discussion/how-get-stack-trace-if-segmentation-fault-ocured-cpp-target/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:15:45.843

尝试从 cmd 运行。我敢肯定，异常信息将在那里打印。并且不要忘记设置“-debug”模式。

# python - 将随机分布的数据排序到规则网格中

> ID：15366255
> 
> 赞同：0
> 
> 时间：2013-03-12T16:07:06.413
> 
> 标签：python

我正在尝试在常规纬度/经度网格上订购分散在全球各地的数据。我可以浏览所有数据并检查它们属于哪个网格单元格，然后将它们附加到每个单元格的列表中。这种方法在我看来很长而且效率不高。

我确信这不是一个新问题，但我一直无法在网上找到解决方案。有没有人有建议或可以指出我的例子或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:35:18.777

我相信 geohashing 会很有用，在这种特殊情况下，您可以使用[Morton number](http://en.wikipedia.org/wiki/Morton_number_%28number_theory%29)。这个名为[“空间键 - 内存高效 Geohashes”](http://karussell.wordpress.com/2012/05/23/spatial-keys-memory-efficient-geohashes/)的博客有示例实现，它是用 Java 编写的，但 Python 版本并没有太大的不同。

```
long hash = 0;
double minLat = minLatI;
double maxLat = maxLatI;
double minLon = minLonI;
double maxLon = maxLonI;
int i = 0;
while (true) {
    if (minLat  midLat) {
            hash |= 1;
            minLat = midLat;
        } else
            maxLat = midLat;
    }

    hash <<= 1;
    if (minLon  midLon) {
            hash |= 1;
            minLon = midLon;
        } else
            maxLon = midLon;
    }

    i++;
    if (i < iterations)
        hash <<= 1;
    else
        break;
}
return hash; 
```

Morton 代码的优点是您可以为更大的网格计算更少的位（上面的迭代更少），为更精细的网格计算更多的位。或者计算细粒度的代码，只为更大的网格使用前缀。

# php - Typo3 文件路径到 url

> ID：15366256
> 
> 赞同：0
> 
> 时间：2013-03-12T16:07:08.207
> 
> 标签：php, typo3

我的 Typo3 扩展程序可以生成一个文件，该文件保存在一个目录中，并使用这个完整的文件路径更新一个数据库字段，它可能看起来像这样：

```
/var/www/website/fileadmin/user_upload/extension/gen/generated.xlsx 
```

我希望通过 http 提供这个文件，所以我需要访问`http://example.com/fileadmin/user_upload/extension/gen/generated.xlsx`. Typo3 中最好的方法是什么？

我显然希望以一种不对文档根目录进行硬编码的方式来执行此操作，以便我可以将我的扩展安装在不同的 Typo3 实例上。

Typo3 (4.5.22) 中是否有允许我传入文件路径并获取可在浏览器中用于下载文件的 url 的函数？或者我应该使用普通的 php 函数来做到这一点？

**编辑**：我这个问题的第一个版本有点欠发达。我不需要有人解释用 / 替换 DOCUMENT_ROOT，我想知道typo3 是否有一个实用功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T20:27:04.573

您可以`PATH_site`为此使用常量。

```
$file = 'generated.xlsx'; // this one probably fetched dinamically...
$fullpath =  PATH_site . 'fileadmin/user_upload/extension/gen/' . $file; 
```

您也可以尝试使用常见的`$_SERVER['DOCUMENT_ROOT']`

[TYPO3 API 概述](http://docs.typo3.org/typo3cms/CoreApiReference/ApiOverview/GlobalValues/Constants/Index.html)中描述了所有 TYPO3 常量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:56:57.913

在 TypoScript 中：

```
10 = TEXT
10.value = download this file
10.typolink.parameter = fileadmin/filepath/to/file.txt 
```

# sql-server-2008 - SQL Server 2008 - 语法不正确

> ID：15366264
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:07:31.367
> 
> 标签：sql-server-2008

我正在编辑从 FireBird 到 SQL Server 2008 的代码，但语法有问题。我不确定错误在哪里。我没有编写这段代码，我对 SQL Server 的理解并不完全，所以我需要建议。

```
select *
from(
  select A.*,floor(Hotove) Hotove,floor(Rozpracovane) Rozpracovane,floor(buffer) buffer from (
  select typ,min(ID) ID ,
   convert(varchar(10), cast(min(case when PocetDnuMy<>-1000 then Dat2 else 
     cast(Dateadd(year, 5, getDate()) as float) end ) as datetime), 104) Datum, 
   min(dat2) dat2, min(Description) Description,
   min(Rada) Rada, min(CisloDokladu) CisloDokladu,
   min(JmenoFirmy) JmenoFirmy, min(Produkt) Produkt, 
   min(CastProduktu) CastProduktu, min(ResStrana) ResStrana, 
  Resitel, min(IC) IC, min(ICID) ICID, 
    case when max(PocetDnuMy)>182 then 'color: red;font-weight:bold;Text-decoration:underline'
         when max(PocetDnuMy )>10  then 'color: red;font-weight:bold'
         when max(PocetDnuMy )>0   then 'color: red'
         when max(PocetDnuMy )<0   then 'color: green' 
    end Color,
   count(ID) Pocet, max( PocetDnuMy ) NejviceMy,
   sum(case when  PocetDnuMy>0 then PocetDnuMy else 0 end) CelkemDnuMy,
   ResitelID, sum(case when PocetDnuMy>0 then 1 else 0 end) PocetProdleni
from( 
select 'b' typ,
       DVB.id as Id, 
       convert(varchar(10), cast(DVB.[DocDate$DATE] as datetime), 104) as Datum,
       DVB.[DocDate$DATE] Dat2,
       DVB.ShortDesc AS Description,
       DQ.code as Rada, 
       DVB.ordnumber as CisloDokladu, 
       F.name as JmenoFirmy,
       DVPR.Code as Produkt, 
       DVPA.Code as CastProduktu,   
       case 
         when (US.userstatuscode='Čeká se na řešitele')or
              (US.userstatuscode='Nezač.-Čeká na přiděl.řešitel')or
              (US.userstatuscode='Odsouhlaseno zákazníkem')   
         then cast(getDate() as float)-DVB.[DocDate$DATE]
         else -1000
       end        PocetDnuMy,
       case 
         when (US.userstatuscode='Čeká se na řešitele')or
              (US.userstatuscode='Nezač.-Čeká na přiděl.řešitel')or
              (US.userstatuscode='Odsouhlaseno zákazníkem')   
         then 0
         else cast(getDate() as float)-DVB.DocDate$DATE
       end        PocetDnuoni,
       CONVERT(VARCHAR(4),cast(DVB.[DocDate$DATE] as datetime),112) test2,
       case 
         when (US.userstatuscode='Čeká se na řešitele')or
              (US.userstatuscode='Nezač.-Čeká na přiděl.řešitel')or
              (US.userstatuscode='Odsouhlaseno zákazníkem')   
         then 'flores.png'
         else 'nopic.jpg'
       end AS ResStrana,
       SU.Name AS Resitel,
       SU.ID as ResitelID,
       case
         when LEFT(DVB.X_Zkratka2, 1)='C' then DVB.X_Zkratka2
         when LEFT(DVB.X_Zkratka2, 1)<>'C' then ''
       end AS IC,
       RIGHT(DVB.X_Zkratka2, 6) AS ICID
from DEVBUGS DVB
join devproducts AS DVPR on DVB.Product_ID=DVPR.ID
join devparts AS DVPA on DVB.Part_ID=DVPA.ID and CHARINDEX('H',DVPA.Code)<>1
join userstatuses US on DVB.status_id=US.id
join periods P on DVB.period_id=P.id
join docqueues DQ on DVB.docqueue_id=DQ.id and DQ.Code<>'POZ' 
join firms F on DVB.firm_id=F.id
join SecurityUsers AS SU on DVB.ResponsibleUser_ID=SU.ID
where
  (US.userstatuscode<>'Hotovo' and 
  US.userstatuscode<>'Uzamčeno' and
  US.userstatuscode<>'Odloženo' and
  US.userstatuscode<>'Zamítnuto')
AND (DVPA.Code='A' or DVPA.Code='B' or DVPA.Code='C' or DVPA.Code='HA' or DVPA.Code='HB' or DVPA.Code='HC' or DVPA.Code='Z' or DVPA.Code='OBJ' or DVPA.Code='-') ) B
group by Resitel,ResitelID, typ) A
left outer join (SELECT sum(A.X_Ef_Cas) EfCas,sum(A.X_Ef_Cas*Pomer) HodPrem,A.Worker_ID,
    sum(case when ((S.UserStatusCode  in ('Hotovo','Uzamčeno','Zamítnuto')) or D.X_Zkratka2='Telefonista') then A.X_Ef_Cas*Pomer else 0 end) Hotove,
    sum(case when ((S.UserStatusCode  in ('Hotovo','Uzamčeno','Zamítnuto')) or D.X_Zkratka2='Telefonista') then 0 else A.X_Ef_Cas*Pomer end) Rozpracovane
 FROM DevBugs as D 
  join  DevTimeRecords A on D.id =A.DevDocument_ID
  JOIN UserStatuses as S ON S.ID = D.Status_ID
  join DevProducts DP ON DP.ID=D.Product_ID 
  join devparts AS DVPA on D.Part_ID=DVPA.ID and CHARINDEX('H',DVPA.Code)<>1
  join 
   (select D.ID,case when sum(A.X_Ef_Cas)>EstimatedTime then EstimatedTime/sum(A.X_Ef_Cas) else 1 end Pomer
     FROM DevBugs as D 
     join  DevTimeRecords A on D.id =A.DevDocument_ID
     join DevProducts DP ON DP.ID=D.Product_ID 
       WHERE  x_PremieObd=0
       and  (CHARINDEX('Cestovné Km', D.ShortDesc)<=0)
       and  (CHARINDEX('Čas na cestě', D.ShortDesc)<=0)
       and  (CHARINDEX('ST', D.X_Zkratka2)<>1)
      and (D.X_Zkratka2<> 'RE')
      and DP.Code in ('ZP','SI','FLORES')
      and (DP.Code<>'FLORES' or (DP.Code='FLORES' and not A.Worker_ID in ('DD00000101','FD00000101')))  
     group by D.ID,D.EstimatedTime) Pomery on Pomery.ID=D.ID
  WHERE    
      (D.X_Zkratka2<> 'RE')
       and  (CHARINDEX('Cestovné Km', D.ShortDesc)<=0)
       and  (CHARINDEX('Čas na cestě', D.ShortDesc)<=0)
       and  (CHARINDEX('ST', D.X_Zkratka2)<>1)
      and DP.Code in ('ZP','SI','FLORES')
      and (DP.Code<>'FLORES' or (DP.Code='FLORES' and not A.Worker_ID in ('DD00000101','FD00000101')))  
     and x_PremieObd=0
     group by Worker_ID ) premie on Worker_ID=ResitelID
left outer join (select sum(buffer) buffer,ResponsibleUser_ID from 
    (select D.ID, ResponsibleUser_ID, case when (sum(A.X_Ef_Cas)>EstimatedTime )  then 0 when  sum(A.X_Ef_Cas)is  null then EstimatedTime else (EstimatedTime- sum(A.X_Ef_Cas)) end buffer
     FROM DevBugs as D 
     left outer join  DevTimeRecords A on D.id =A.DevDocument_ID
     join DevProducts DP ON DP.ID=D.Product_ID 
     join userstatuses US on D.status_id=US.id
     join devparts AS DVPA on D.Part_ID=DVPA.ID and CHARINDEX('H',DVPA.Code)<>1
      WHERE 
        (CHARINDEX('Cestovné Km', D.ShortDesc)<=0)
        and  (CHARINDEX('Čas na cestě', D.ShortDesc)<=0)
        and  (CHARINDEX('ST', D.X_Zkratka2)<>1)
        and (D.X_Zkratka2<> 'RE')
        and D.X_Zkratka2<>'Telefonista'
      and DP.Code in ('ZP','SI','FLORES')
      and (DP.Code<>'FLORES' or (DP.Code='FLORES' and not A.Worker_ID in ('DD00000101','FD00000101')))  
   and  
  US.userstatuscode<>'Hotovo' and 
  US.userstatuscode<>'Uzamčeno' and
  US.userstatuscode<>'Odloženo' and
  US.userstatuscode<>'Zamítnuto'
group by D.ID, D.ResponsibleUser_ID, D.EstimatedTime)
group by ResponsibleUser_ID ) buffer on buffer.ResponsibleUser_ID =ResitelID
union  all
select 'a' typ,
       DVB.id as Id, 
       convert(varchar(10), cast(DVB.[DocDate$DATE] as datetime), 104) as Datum,
       DVB.[DocDate$DATE] Dat2,
       DVB.ShortDesc AS Description,
       DQ.code as Rada, 
       DVB.ordnumber as CisloDokladu, 
       F.name as JmenoFirmy,
       DVPR.Code as Produkt, 
       DVPA.Code as CastProduktu,   
       case 
         when (US.userstatuscode='Čeká se na řešitele')or
              (US.userstatuscode='Nezač.-Čeká na přiděl.řešitel')or
              (US.userstatuscode='Odsouhlaseno zákazníkem')   
         then 'flores.png'
         else 'nopic.jpg'
       end AS ResStrana,
       SU.Name AS Resitel,
       case
         when LEFT(DVB.X_Zkratka2, 1)='C' then DVB.X_Zkratka2
         when LEFT(DVB.X_Zkratka2, 1)<>'C' then ''
       end AS IC,
       RIGHT(DVB.X_Zkratka2, 6) AS ICID,
 case
   when 
    (DVB.[DocDate$DATE]< cast(getDate() as float)-182)
    then 'color: red;font-weight:bold;Text-decoration:underline'
   when 
    (DVB.[DocDate$DATE]< cast(getDate() as float)-10)
    then 'color: red;font-weight:bold'
   when 
    (DVB.[DocDate$DATE]< cast(getDate() as float))
    then 'color: red'
   when 
    (DVB.[DocDate$DATE]> cast(getDate() as float) )
    then 'color: green'
 end as Color,
 0 as Pocet, 0 as NejviceMy, 0 as CelkemMy, ' ' ResitelID,
 0 Hotove, 0 Rozpracovane, 0 buffer, 0 PocetProdleni
from DEVBUGS DVB
join devproducts AS DVPR on DVB.Product_ID=DVPR.ID
join devparts AS DVPA on DVB.Part_ID=DVPA.ID
join userstatuses US on DVB.status_id=US.id
join periods P on DVB.period_id=P.id
join docqueues DQ on DVB.docqueue_id=DQ.id and DQ.Code<>'POZ'
join firms F on DVB.firm_id=F.id
join SecurityUsers AS SU on DVB.ResponsibleUser_ID=SU.ID
where
  (US.userstatuscode<>'Hotovo' and 
  US.userstatuscode<>'Uzamčeno' and
  US.userstatuscode<>'Odloženo' and
  US.userstatuscode<>'Zamítnuto')
AND (DVPA.Code='A' or DVPA.Code='B' or DVPA.Code='C' or DVPA.Code='HA' or DVPA.Code='HB' or DVPA.Code='HC' or DVPA.Code='Z' or DVPA.Code='OBJ' or DVPA.Code='-')
) A 
ORDER BY typ,NejviceMy desc,Dat2, Resitel ASC 
```

我得到的错误是

> *SQL 错误 [156] [S1000]：关键字“组”附近的语法不正确。
> SQL 错误 [102] [42000]：')' 附近的语法不正确。
> 关键字“组”附近的语法不正确*

请问问题出在哪里？感谢所有建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T16:09:57.547

你有：

```
group by D.ID, D.ResponsibleUser_ID, D.EstimatedTime)
group by ResponsibleUser_ID ) 
```

你需要：

```
group by D.ID, D.ResponsibleUser_ID, D.EstimatedTime) AS some_alias
group by ResponsibleUser_ID ) 
```

但是，我对解析该意大利面条以确定它是否需要*特定*别名或只是*任何*别名没有兴趣。

这可能不是您的语法问题的结束。不要个人认为，但这段代码很糟糕。您应该尝试以合乎逻辑的方式简化和构建您试图通过查询完成的内容，而不是仅仅寻找和啄以使语法“工作”。

# php - 如何使java脚本在AJAX返回的元素上运行

> ID：15366265
> 
> 赞同：0
> 
> 时间：2013-03-12T16:07:36.733
> 
> 标签：php, javascript, jquery, ajax

我的问题是如何让我的 java 脚本在 AJAX 返回的元素上运行。javascript 不适用于 AJAX 返回的内容。在我的脚本中，它假设会弹出一个带有“Hello”的对话框，但事实并非如此。我怎样才能使它起作用，或者还有其他方法可以做到这一点？感谢您的建议。

下面是我的代码...

**索引.html**

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>

        <script type="text/javascript">
            $(document).ready(function() {
                $("#box_1").on("click", function() {
                    alert("Hello!");
                });

                changeDisplay();
            });

            function changeDisplay() {
                if (window.XMLHttpRequest)
                {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                }

                else
                {// code for IE6, IE5
                    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }

                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        document.getElementById("text").innerHTML=xmlhttp.responseText;
                    }

                }
                xmlhttp.open("POST","ajaxHandling.php",true);
                xmlhttp.send();

            };
        </script>    
    </head>
    <body>
        <h1>Ajax Test</h1>
        <div id="text">

        </div>
    </body>
</html> 
```

**ajaxHandling.php**

```
<?php
    echo '<div id="box_1" class="box">Click me</div>';
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:09:44.970

一个常见问题是，您需要通过将`on()`未来元素绑定到脚本运行时存在的未来元素的父元素来为未来元素使用正确的语法。

```
$(document).on("click", "#box_1", function() {
    alert("Hello!");
}); 
```

我使用过文档，但使用最接近的现有父级更好。例子：

```
$("#wrapper").on("click", "#box_1", function() {
    alert("Hello!");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:12:46.087

我的简短回答是，您需要使用[jQuery.on](http://api.jquery.com/on/)稍微不同地绑定 click 事件：

```
$('#text').on('click', '#box_1', function() {
    alert('Hello!');
}); 
```

这会将 click 事件动态绑定到元素中与您的选择器匹配的任何项目`#text`（或稍后添加到元素中的项目） 。`#text``#box_1`

我的长答案是，如果你使用 jQuery，你也应该利用它的 AJAX 库而不是自己动手。

```
$.ajax({
    url: '/ajaxHandling.php',
}).done(function ( data ) {
    $('#text').html(data);
}); 
```

# .net - .NET 4.5 中的 Web 客户端重大更改

> ID：15366267
> 
> 赞同：0
> 
> 时间：2013-03-12T16:07:43.917
> 
> 标签：.net, .net-4.5

我有一个使用 Web 客户端下载数据的应用程序，该程序在 .NET 4.0 下没有任何问题，但在 .NET 4.5 下抛出以下异常：

“System.uriParser”的类型初始值设定项引发异常

此处列出了涉及 System.URI 的几个重大更改：http: [//msdn.microsoft.com/en-us/library/hh367887.aspx](http://msdn.microsoft.com/en-us/library/hh367887.aspx)

但是，我不知道哪一个适用于使用 webclient 从 web 下载文件的场景。我的问题是这个异常的可能原因和适当的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:10:49.820

查看您在问题中链接的重大更改文档`System.Uri`中**核心部分的更改。**异常详细信息（即消息）将帮助您缩小受影响的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T09:24:42.963

很奇怪的问题。解决方案是将目标框架从 .NET 4.0 Client Profile 更改为 .NET 4.0。这是仅在安装 .NET 4.5 时才会发生的重大更改。

这种“就地”升级的东西真的很糟糕。

# azure - Windows Azure 静态内容网站/Azure Blob 存储 - 出站数据传输 价格比较

> ID：15366269
> 
> 赞同：1
> 
> 时间：2013-03-12T16:07:46.207
> 
> 标签：azure, bandwidth, azure-blob-storage, azure-web-app-service, static-site

我在网络角色中有一些脚本和图像（总大小为 1MB）。我打算将这些移动到一些 blob 存储（CDN/Https/Query 字符串）或静态网站。

出站数据传输的价格（即从 Windows Azure 数据中心传出的数据）

前 10 TB/月* 每 GB源0.12 美元( [http://www.windowsazure.com/en-us/pricing/details/#header-11](http://www.windowsazure.com/en-us/pricing/details/#header-11) )

我想知道如果我将脚本和图像移动到以下位置

1.静态内容网站（或） 2\. Blob 存储（Https）

出境转账的价格一样吗？谁能证实这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:10:42.970

来自微软网站。

> 发送到 Windows Azure 的所有入站数据都是免费的。出站数据根据给定计费周期内通过 Internet 移出 Windows Azure 数据中心的数据总量收费。位于同一数据中心内的 Windows Azure 服务之间的数据传输不收取任何费用。每个计费月的前 5 GB 出站数据传输也是免费的。
> 
> 完整详情[http://www.windowsazure.com/en-us/pricing/details/#header-11](http://www.windowsazure.com/en-us/pricing/details/#header-11)

他们没有提及有关特定服务的详细信息，因为他们仅根据该信息监控出站转机以进行计费。

**编辑**

使用 blob 存储时要记住的一件事是，您受限于每秒的访问次数（我认为这是 500），因此负载很重的站点将需要使用 CDN 以及仅使用 blob 存储。

# python - 正则表达式python字符串忽略特殊字符

> ID：15366282
> 
> 赞同：0
> 
> 时间：2013-03-12T16:08:21.950
> 
> 标签：python, regex

这就是我现在拥有的：

```
import re

x = "From: Joyce IP: 192.111.1.1 Source: 192.168.1.1"    
x = x.replace(' ', '')
m = re.findall('(?<=:)\S+', x)
print m 
```

我想有这样的输出来制作这个**$ script.py > result.txt**：

```
Joyce 192.111.1.1 192.168.1.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:13:50.293

而不是找到你想要的文本的匹配结果，它可能更容易替换你不想要的东西：

```
>>> import re
>>> x = "From: Joyce IP: 192.111.1.1 Source: 192.168.1.1"
>>> re.sub(r'\w+:\s', '', x)
'Joyce 192.111.1.1 192.168.1.1' 
```

但是，如果您更喜欢在`re.findall()`此处使用与您当前方法类似的一个选项：

```
>>> ' '.join(re.findall(r'(?<=:\s)\S+', x))
'Joyce 192.111.1.1 192.168.1.1' 
```

您需要`\s`在否定的lookbehind 中，因为输入字符串中的每个冒号后面都有一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:17:12.693

对您的代码稍作更改（不要删除空格，并将它们包含在后面的外观中）可以完美地工作：

```
import re

x = "From: Joyce IP: 192.111.1.1 Source: 192.168.1.1"    
m = re.findall('(?<=:\s)\S+', x)
print " ".join(m) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-26T23:55:05.663

```
重新进口

x =“来自：乔伊斯 IP：192.111.1.1 来源：192.168.1.1”    

reg = r"\d{1,3}(?:[.]\d+){3}"

m = re.findall(reg, x)

对于我在 m 中：
  打印（一）

```

结果：192.111.1.1 192.168.1.1

# javascript - 使用 node.js 和 node-mysql 执行 MySQL 查询

> ID：15366291
> 
> 赞同：4
> 
> 时间：2013-03-12T16:08:35.817
> 
> 标签：javascript, node.js, node-mysql

我主要来自 PHP / MySQL 背景，并涉足 node.js 以创建一个博客系统，用于我自己的测试和学习如何做事。我在这里遇到的问题是我似乎无法弄清楚如何进行正确的查询。我已经检查了 node-mysql 的文档，但还没有找到很多关于查询的信息。

如果我这样做，`var posts = rows[0];`我会得到表格的数组，它看起来不错，但我正在尝试将特定字段传递给变量，但是当我执行下面的代码时，我得到了一堆“未指定”。我知道这里有问题，我通常会`mysql_fetch_array`在 PHP 中执行此操作，但我不知道在 node.js 和 node-mysql 中执行此操作的方法。

```
connection.query('SELECT * FROM posts ORDER BY date', function(err, rows, fields) {
  if (err) throw (err);

  var post_date = rows[1];
  var post_author = rows[2];
  var post_content = rows[3];

  console.log('Date: ', post_date);
  console.log('Author: ', post_author);
  console.log('Content: ', post_content);
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:38:58.350

`rows`实际上包含数据行，每一行都是一个包含该行所有字段的对象。因此，您应该遍历行并获取每一行的字段，如下所示：

```
for (var i = 0; i < rows.length; i++) {
    console.log('Date: ', rows[i].date);
} 
```

# ruby-on-rails-3 - 从 Refinery cms 中的 menu_branch 获取页面主标题的最佳方法？

> ID：15366292
> 
> 赞同：0
> 
> 时间：2013-03-12T16:08:41.587
> 
> 标签：ruby-on-rails-3, refinerycms, refinery

我正在建立一个 RefineryCMS 网站，我希望菜单链接在悬停时显示页面完整标题。换句话说，菜单的每个 li 元素都应该是这种形式：

```
<li><a href="/my_page_url" title="my_page_main_title">my_page_menu_title</a></li> 
```

其中“my_page_main_title”是管理员在页面表单顶部输入的内容，“my_page_menu_title”是高级选项中的内容。

我想我必须重写`_menu_branch.html.erb`，但我应该在后面放`title:`什么？

```
<%= link_to(menu_branch.title, refinery.url_for(menu_branch.url), title:  ) -%> 
```

谢谢你。

PS：我骑的是refinerycms-core v.2.0.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:10:25.740

如果您只想将页面标题显示为标题属性，将菜单标题显示为链接标签中的标题，如下所示：

```
<a href='/my_page_url' title='Entered Top Of Page Form'>Menu Title</a> 
```

然后你必须像这样装饰模型并覆盖分支：[https ://gist.github.com/parndt/5147926](https://gist.github.com/parndt/5147926)

# c# - c#中的列表视图与图像

> ID：15366294
> 
> 赞同：3
> 
> 时间：2013-03-12T16:08:50.250
> 
> 标签：c#, listview

我希望列出带有图片的项目，项目的数量可以从 1 到 60 不等，并且对于每个项目我还希望显示数据。我相信解决这个问题的最好方法是在 c# 中使用 ListView。这是真的吗？如果是这样，我该怎么做？我还考虑过在滚动窗口中使用交互式图像

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T16:16:57.640

如果要在设计器中执行此操作，可以采取以下步骤将图像添加到 ListView 控件：

1.  切换到设计器，点击Component Tray上的ImageList组件，ImageList右上角会出现一个智能标签。
2.  单击智能标签，然后单击窗格上的“选择图像”。
3.  在弹出的图像集编辑器对话框中，从您想要的文件夹中选择图像。
4.  单击确定以完成将图像添加到 ImageList。
5.  点击表单上的ListView，右上角会出现一个智能标签。
6.  点击智能标签，你会发现那里有三个ComboBox，你可以从列表中选择一个ImageList。
7.  点击智能标签上的“添加项目”选项，会出现一个ListViewItem Collection Editor，您可以向ListView添加项目，这里设置ImageIndex或ImageKey属性很重要，否则图像不会出现。
8.  单击确定完成项目编辑，现在您会发现图像显示在 ListView 上。

如果你想通过代码将图像添加到 ListView，你可以这样做`

**代码片段**

* * *

```
 private void Form10_Load(object sender, EventArgs e)
    {
        DirectoryInfo dir = new DirectoryInfo(@"c:\pic");
        foreach (FileInfo file in dir.GetFiles())
        {
            try
            {
                this.imageList1.Images.Add(Image.FromFile(file.FullName));
            }
            catch{
                Console.WriteLine("This is not an image file");
            }
        }
        this.listView1.View = View.LargeIcon;
        this.imageList1.ImageSize = new Size(32, 32);
        this.listView1.LargeImageList = this.imageList1;
        //or
        //this.listView1.View = View.SmallIcon;
        //this.listView1.SmallImageList = this.imageList1;

        for (int j = 0; j < this.imageList1.Images.Count; j++)
        {
            ListViewItem item = new ListViewItem();
            item.ImageIndex = j;
            this.listView1.Items.Add(item);
        }
    } 
```

[来源](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/876b6517-7306-44b0-88df-caebf3b1c10f)

# c# - WCF 服务对没有成员资格提供程序的服务功能的授权

> ID：15366298
> 
> 赞同：0
> 
> 时间：2013-03-12T16:09:01.713
> 
> 标签：c#, .net, wcf, windows-identity

我有一个 WCF 服务，它使用 UserNamePasswordValidator 进行身份验证。我检查用户名和密码。如果没问题，那么我允许访问服务调用。

```
class CustomUserNameValidator : UserNamePasswordValidator
{
    WebServiceDM entity = new WebServiceDM();

    public override void Validate(string userName, string password)
    {

        string encrypted = CryptographyManager.EncryptSymmetric(password);

        Kullanici _user = entity
                          .Kullanici
                          .FirstOrDefault(h => h.Username == userName && h.Password == encrypted);

        if (_user == null || _user.Username == "")
        {
            //Invalid User ...
            throw new Exception("Username and password failed");
        }

    }

} 
```

现在我需要一个基于函数的授权，比如**PrincipalPermission**。但在这种情况下，我没有任何会员提供者。

```
[ServiceContract]
public interface IEglenceServices
{

    [OperationContract]
    List<EGLENCEBEYAN> GetEglenceBeyan(int yil);

} 
```

那么我能为这种情况做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:58:14.550

要连接自定义主体权限，您可以使用自定义 IAuthorizationPolicy 实现。有关示例，请参见[http://leastprivilege.com/2007/08/08/custom-principals-and-wcf/ 。](http://leastprivilege.com/2007/08/08/custom-principals-and-wcf/)

# django - Django 1.5 and old syntax _(

> ID：15366309
> 
> 赞同：1
> 
> 时间：2013-03-12T16:09:44.723
> 
> 标签：django

I'm new to Django and looking at some old packages. I have 1.5 installed and see that one some of the older apps they use the syntax `_(` a lot for example...

```
help_text=_(u'something') 
```

What is this? Was it depreciated? Will it give me issues with 1.5?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:12:20.307

That is [`gettext`](http://docs.python.org/2/library/gettext.html) for internationalizing an application

Django provides [documentation](https://docs.djangoproject.com/en/dev/topics/i18n/translation/) on their site.

according to the docs, In django 1.5 it is located at

`from django.utils.translation import ugettext as _`

It was not deprecated

# c++ - 如何在 C++ 中读取二进制文件

> ID：15366319
> 
> 赞同：0
> 
> 时间：2013-03-12T16:10:18.727
> 
> 标签：c++, visual-c++, file-io, binaryfiles

我想编写一个程序来打开二进制文件并使用 DES 对其进行加密。

但是我怎样才能读取二进制文件呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T16:23:23.993

> *“我怎样才能读取二进制文件？”*

如果您想读取二进制文件然后处理其数据（加密、压缩等），那么以易于使用的形式将其加载到内存中似乎是合理的。我建议您使用`std::vector<BYTE>`where `BYTE`is an `unsigned char`：

```
#include <fstream>
#include <vector>
typedef unsigned char BYTE;

std::vector<BYTE> readFile(const char* filename)
{
    // open the file:
    std::streampos fileSize;
    std::ifstream file(filename, std::ios::binary);

    // get its size:
    file.seekg(0, std::ios::end);
    fileSize = file.tellg();
    file.seekg(0, std::ios::beg);

    // read the data:
    std::vector<BYTE> fileData(fileSize);
    file.read((char*) &fileData[0], fileSize);
    return fileData;
} 
```

使用此功能，您可以轻松地将文件加载到向量中，如下所示：

```
std::vector<BYTE> fileData = readfile("myfile.bin"); 
```

希望这可以帮助 ：）

# ruby - 在 Ruby 中抽象/通用类层次结构变量

> ID：15366320
> 
> 赞同：0
> 
> 时间：2013-03-12T16:10:27.113
> 
> 标签：ruby

我有几个类，我希望每个类都在类级别上维护为将来查找而创建的所有实例的哈希。类似于：

```
class A
  def initialize(id, otherstuff)
    # object creation logic
    @@my_hash[id]=self
  end

  def self.find(id)
    @@my_hash[id]
  end
end 
```

所以我可以然后`A.find(id)`取回正确的实例。

其中有几个类（A、B 等），都有 id，我希望所有这些都有这个功能。

我可以让它们都继承自一个超类，该超类具有它们可以利用的通用版本，因此我不必为每个类重新实现很多东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:19:26.840

是的，您可以从同一个超类继承，也可以使用模块和`include`：

```
module M
  def initialize(id)
    @@all ||= {}
    @@all[id] = self
  end

  def print
    p @@all
  end
end

class C
  include M
  def initialize(id)
    super
    puts "C instantiated"
  end
end 
```

如果要为每个子类保留单独的索引，可以执行以下操作：

```
def initialize(id)
  @@all ||= {}
  @@all[self.class] ||= {}
  @@all[self.class][id] = self
end 
```

编辑：在您发表评论后，我发现您需要保留每类索引。所以：

```
class A
  def initialize(id)
    self.class.index(id, self)
  end

  def self.index id, instance
    @all ||= {}
    @all[id] = instance
  end

  def self.find(id)
    @all[id]
  end
end

class B < A
end

class C < A
end

a = A.new(1)
b = B.new(2)
c = C.new(3)
p A.find(1)
#=> #<A:0x10016c190>
p B.find(2)
#=> #<B:0x10016c140>
p C.find(3)
#=> #<C:0x10016c118>
p A.find(2)
#=> nil 
```

# php - 如何将 $_GET 与分页器一起使用？

> ID：15366327
> 
> 赞同：1
> 
> 时间：2013-03-12T16:10:39.493
> 
> 标签：php, get, zend-framework2, zend-paginator

我通过 $GET-variables 的 select->order 在我的项目中添加了排序数据。但是当我通过分页器浏览页面时，这些变量当然不会传递到下一页。传递此变量并将其与分页器一起使用的最佳方法是什么？

控制器：

```
public function indexAction()
{
    $sortForm = new \Records\Form\SortingForm();
    $field = 'date';
    $order = 'desc';
    $request = $this->getRequest();

    if ($request->isGet()){
        $sortForm->setValidationGroup(array('field', 'order'));
        $sortData = $request->getQuery()->toArray();
        $sortForm->setData($sortData);

        if($sortForm->isValid()) {
            $sortForm->getData($sortData);
            $field = (string) $this->params()->fromQuery('field', 'date');
            $order = (string) $this->params()->fromQuery('order', 'desc');
        }
    }
    $query = $this->getRecordsTable()->fetchAll($field, $order);

    $paginator = new Paginator\Paginator(new Paginator\Adapter\Iterator($query));
    $paginator->setCurrentPageNumber($this->params()->fromRoute('page', 1));
    $paginator->setItemCountPerPage(25);

    $vm = new ViewModel(array('records' => $paginator)); 
```

模型：

```
public function fetchAll($field, $order)
    {
        $this->field = $field;
        $this->order = $order;
        $resultSet = $this->tableGateway->select(function (Select $select) {
        $select->columns(array('date', 'name', 'email', 'homepage', 'text', 'image', 'file'));
        $select->order($this->field.' '.$this->order);        
        });
        $resultSet->buffer();
        $resultSet->next();

        return $resultSet;
    } 
```

形式：

```
public function __construct($name = null)
    {
        parent::__construct('records');
        $this->setAttribute('method', 'get');

        $this->add(array(
            'name' => 'field',
            'required' => false,
            'type'  => 'Zend\Form\Element\Select',
            'options' => array(
                'label' => 'Sort by: ',
                'value_options' => array(
                    'date' => 'Date', 
                    'email' => 'E-mail', 
                    'name' => 'Username',
            ),
        )));
        $this->add(array(
            'name' => 'order',
            'required' => false,
            'type'  => 'Zend\Form\Element\Select',
            'options' => array(
                'value_options' => array(
                    'asc' => 'ascending', 
                    'desc' => 'descending', 
            ),
        )));
        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type'  => 'submit',
                'value' => 'Go',
                'id' => 'submitbutton',
            ),
        ));
    } 
```

分页器视图：

```
<!-- Numbered page links -->
<?php foreach ($this->pagesInRange as $page): ?>
  <?php if ($page != $this->current): ?>
    <a href="<?php echo $this->url($this->route, array('page' => $page)); ?>">
        <?php echo $page; ?>
    </a> |
  <?php else: ?>
    <?php echo $page; ?> |
  <?php endif; ?>
<?php endforeach; ?> 
```

还有一个：当我传递 get-variables 时，查询字符串看起来像[http://guest-book.me/page/7?field=date&order=asc](http://guest-book.me/page/7?field=date&order=asc) **&submit=Go**我怎么能不发送对 submit=>value？

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:31:54.487

首先，您需要确保用于 Paginator 的路由具有 Query String 子路由，我建议您使用专门用于分页列表的路由，例如：

```
'router' => array(
    'routes' => array(
       'paginator_route' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/list/:controller/:action[/page/:page][/]',
                'constraints' => array(
                    //'__NAMESPACE__' => 'Application\Controller',
                    'controller'    => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'page'          => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'index',
                    'action'     => 'list',
                    'page'       => 1,
                ),
            ),
            'may_terminate' => true, // with or without Query string
            'child_routes'  => array(
                'query' => array( // allows us to match query string
                    'type' => 'Query',
                    'options' => array(
                        'defaults' => array(
                            // Query string defaults here..
                        )
                    )
                ),
            ),
        ), 
```

您现在需要修改分页视图，以允许我们在生成新链接时使用当前参数作为基础：

```
<!-- Numbered page links -->
<?php foreach ($this->pagesInRange as $page): ?>
  <?php if ($page != $this->current): ?>
    <?php // the last param allows us to reuse the matched params ?>
    <a href="<?php echo $this->url($this->route, array('page' => $page), TRUE); ?>">
        <?php echo $page; ?>
    </a> |
  <?php else: ?>
    <?php echo $page; ?> |
  <?php endif; ?>
<?php endforeach; ?> 
```

您的分页链接现在应该保留查询字符串值:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:38:45.673

您也可以创建一个将 GET 参数传递给 url 的助手。我为此创建了一个示例模块：[https ://github.com/samsonasik/SanSamplePagination](https://github.com/samsonasik/SanSamplePagination)

# c# - RGBA 图像格式（由 Scintilla 使用）

> ID：15366328
> 
> 赞同：2
> 
> 时间：2013-03-12T16:10:39.630
> 
> 标签：c#, rgba, scintilla

我正在使用[Scintilla](http://www.scintilla.org/)（不是[ScintillaNET](http://scintillanet.codeplex.com/)），我正在尝试设置自动完成列表中使用的图像。Scintilla 需要 RGBA 格式的字节/像素字符串。

**Scintilla 对此 RGBA 格式的描述：（**引用[自文档](http://www.scintilla.org/ScintillaDoc.html#Images)）

> RGBA 格式允许半透明，每个像素都有一个 alpha 值。它比 XPM 更简单，功能更强大。
> 
> 数据是一个 4 字节像素值序列，从顶行的像素开始，最左边的像素在前，然后是后续行的像素。由于对齐原因，线之间没有间隙。
> 
> 每个像素依次由​​一个红色字节、一个绿色字节、一个蓝色字节和一个阿尔法字节组成。颜色字节不预乘 alpha 值。也就是说，25% 不透明的全红色像素将是 [FF, 00, 00, 3F]

我希望我误解了上面解释的格式，文档不是很清楚。

**我的转换方法：**

我编写了这个函数来将 PNG 转换为这个字节串：

```
public static string ConvertFromPNG(Bitmap PNG)
{
    string rgba = "";

    int pixWidth = PNG.Width;
    int pixHeight = PNG.Height;

    for (var y = 0; y < pixHeight; y++)
    {
        for (var x = 0; x < pixWidth; x++)
        {
            Color pix = PNG.GetPixel(x, y);

            rgba += pix.R.ToString("X2") + pix.G.ToString("X2") + pix.B.ToString("X2") + pix.A.ToString("X2");
        }
    }

    return rgba;
} 
```

**结果图像：**

但 Scintilla 只是将图像显示为灰色框：

![自动完成框](../Images/b20eede4a9c8b9883dc3b728c0cdb60a.png).

[有问题的图像是Microsoft 的 Babel 图像](http://msdn.microsoft.com/en-us/library/bb166402%28v=vs.80%29.aspx)之一的副本：![通天塔图标](../Images/c00467157c9c0cea376e03f39b8cf63a.png).

我知道这组字节是正确的，因为有趣的是，如果我将它们格式化并缩小它们，我可以看到图像的轮廓：

![字节（在图像编辑器中缩小）](../Images/edc43247fd69bfcc147a099695e9971e.png)

**生成的字节数：**

```
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000009F000000EC0000001B00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000815B0000DF9B0000F8000000B40000002F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B0000007F4E0000FDC80000FFFF0000FF720000FF1D0000B50000003E00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001613000085350000FFDE0000FFFF0000FFFF0000FFFF0000FF750000FF230000C4000000240000000000000000000000000000000000000000000000000000000000000000000000000000000000000085400000EADB0000FFF90000FFFF0000FFFF0000FFFF0000FFF60000FFA70000F5000000DA00000000000000000000000000000000000000000000000000000000000000000000000000000091810000EACA0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFBB0000FF460000FF000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000FF7E0000FFE80000FFFF0000FFFF0000FFFF0000FFFB0000FFB30000FF460000FF0C0000FF000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000FF000000FF660000FFFF0000FFFF0000FFFF0000FFC70000FF0D0000FF590000FF7A0000FF000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000FF8C0000FF7D0000FF2E0000FFFF0000FFBB0000FF1C0000FF510000FFB40000FF7B0000FF000000FF000000000000000000000000000000000000000000000000000000000000000000000000000000FFE20000FFE40000FF410000FF8B0000FF510000FF350000FFB60000FF8F0000FF3A0000EA00000091000000000000000000000000000000000000000000000000000000000000000000000000000000DA910000F5F30000FFFF0000FF0C0000FF270000FFC10000FF930000FF220000EA0000008500000000000000000000000000000000000000000000000000000000000000000000000000000000000000241D0000C4870000FFFF0000FF270000FF420000FF9E0000FF230000FF090000860000001600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003E2D0000B5610000FF120000FF1C0000FF370000FD0000007F0000001B000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002E000000B4000000F8000000DF00000081000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B000000EC0000009F0000000000000000000000000000000000000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:16:49.040

您将字节格式化为十六进制值并将它们放在一个字符串中。Scintilla 只想要字节本身。

我怀疑您想创建一个字节数组而不是字符串，并将 , , 和 的值直接存储到其中`pix.R`，`pix.G`而`pix.B`不是`pix.A`将它们格式化为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:58:32.013

接受 JasonD 的回答后，我更新了我的代码并且它正在工作。如果它对其他人有帮助，这里是工作代码：

```
public static byte[] ConvertFromPNG(Bitmap PNG)
{
    byte[] rgbaB = new byte[4 * (PNG.Width * PNG.Height)];

    int i = 0;

    for (var y = 0; y < PNG.Height; y++)
    {
        for (var x = 0; x < PNG.Width; x++)
        {
            Color pix = PNG.GetPixel(x, y);

            rgbaB[i++] = pix.R;
            rgbaB[i++] = pix.G;
            rgbaB[i++] = pix.B;
            rgbaB[i++] = pix.A;
        }
    }

    return rgbaB;
} 
```

# php - Doctrine 正在制作重复的文档条目

> ID：15366329
> 
> 赞同：0
> 
> 时间：2013-03-12T16:10:42.820
> 
> 标签：php, mongodb, doctrine

我正在尝试使用以下代码将嵌入式文档插入到我的文档中。

```
 // Add states, for the joining player.
  $state = new PlayerState();
  $state->setReady(false);
  $state->setPlayer($player->getId());
  $game->addPlayerState($state);

  // Save element.
  $dm->persist($game);
  $dm->flush(); 
```

问题是，这会生成 2 个像这样的 PlayerState 文档。

```
{ "_id" : ObjectId( "513f50a58ead0ee9ac00000f" ),
  "ready" : false,
  "player" : "513f509f8ead0e8bac00000b" }, 
{ "_id" : ObjectId( "513f50af8ead0ecdac000015" ),
  "ready" :false,
  "player" : "513f509f8ead0e8bac00000b" } 
```

我是否以不正确的方式保存它？如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:33:39.817

这似乎奏效了。

```
 $state = new PlayerState();
  $state->setReady(false);
  $state->setPlayer($player->getId());
  $dm->persist($state);
  $dm->flush();
  $game->addPlayerState($state);
  // Save element.
  $dm->flush(); 
```

这很难解释，但我会试一试。您需要先持久化嵌入的文档，否则 Doctrine 将首先持久化文档，使嵌入的文档仅具有设置的值，就像一个简单的数据容器一样。

```
 $state->setReady(false);
  $state->setPlayer($player->getId()); 
```

之后，教义将再次持久化嵌入的文档，但这次查看 Document 对象，分配 ID，默认值等。

产生2个条目。

# .net - 在datagrid中格式化的数据以未格式化的方式导出到excel

> ID：15366340
> 
> 赞同：1
> 
> 时间：2013-03-12T16:10:54.413
> 
> 标签：.net, export-to-excel, vb.net-2010

我需要您在这个问题上的指导/帮助。我在数据网格视图中以这种格式 00-00-00-00-00-000 格式化了数据。但是，当我将此数据导出到 Excel 表时，此格式已消失，数据采用此格式 - 0000000000000。excel 中的格式已消失。我在 vb.net 上写过。请在这件事上为我提供帮助\解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:07:28.113

您可以将所需单元格的样式设置为以下内容： `NumberFormat`

```
 Imports Excel = Microsoft.Office.Interop.Excel

 Public Class Form1
     Dim ExcelApp As Excel.Application
     Dim ExcelWorkBk As Excel.Workbook
     Dim ExcelWorkSht As Excel.Worksheet

 Public Function exportToExcel(ByVal dgv As DataGridView)
    Try
        exportToExcel = True
        ExcelApp = New Excel.Application
        ExcelWorkBk = ExcelApp.Workbooks.Add()
        ExcelWorkSht = ExcelWorkBk.Sheets("Sheet1")

        ''// Rename the sheet
        ExcelWorkSht.Name = "MySheet"
        ExcelWorkSht.Tab.ThemeColor = Excel.XlThemeColor.xlThemeColorAccent1

        Dim style As Excel.Style = ExcelWorkSht.Application.ActiveWorkbook.Styles.Add("StyleName")
        style.Font.Bold = True
        style.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.LightGreen)
        style.NumberFormat = format

        Dim styleHeader As Excel.Style = ExcelWorkSht.Application.ActiveWorkbook.Styles.Add("Header")
        styleHeader.Font.Bold = True
        styleHeader.ShrinkToFit = True
        styleHeader.Orientation = Excel.XlOrientation.xlHorizontal
        styleHeader.VerticalAlignment = Excel.XlVAlign.xlVAlignJustify
        styleHeader.WrapText = False
        styleHeader.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.WhiteSmoke)

        ''// get all visible columns in display index order
        Dim ColNames As List(Of String) = (From col As DataGridViewColumn _
                                           In dgv.Columns.Cast(Of DataGridViewColumn)() _
                                           Where (col.Visible = True) _
                                           Order By col.DisplayIndex _
                                           Select col.Name).ToList

        Dim colcount = 0
        For Each s In ColNames
            colcount += 1

            ExcelWorkSht.Cells(1, colcount) = dgv.Columns.Item(s).HeaderText
            ExcelWorkSht.Cells(1, colcount).style = "Header"
        Next

        ''// get the values and formatt them

        For rowcount = 0 To dgv.Rows.Count - 1  ''// for each row
            colcount = 0
            For Each s In ColNames ''// for each column
                colcount += 1
                ''xlWorkSheet.Cells(rowcount + 2, colcount) = dgv.Rows(rowcount).Cells(s).Value
                ExcelWorkSht.Cells(rowcount + 2, colcount) = dgv.Rows(rowcount).Cells(s).FormattedValue
                If colcount = 4 Then ''// current Column by it's Index
                    If dgv.Rows(rowcount).Cells(s).FormattedValue = 1 Then
                        ''//  formatt this column with the style 'StyleName'
                        ExcelWorkSht.Cells(rowcount + 2, colcount).Style = "StyleName"
                    End If
                End If
            Next
        Next

        ExcelWorkSht.Range("$D$1:$D$100").AutoFilter(Field:=1, Criteria1:="", Operator:=Excel.XlAutoFilterOperator.xlFilterAutomaticFontColor)

        MsgBox("Exported successfully to Excel")
        ExcelApp.Visible = True
    Catch ex As Exception
        exportToExcel = False
        MsgBox(ex.Message, MsgBoxStyle.Exclamation)
    End Try

End Function 
```

# c# - OrmLite 是否支持 MetadataType 属性？

> ID：15366345
> 
> 赞同：1
> 
> 时间：2013-03-12T16:11:12.363
> 
> 标签：c#, servicestack, ormlite-servicestack

我正在学习 servicestack.ormlite，我遇到了这个问题。

当我使用这个 POCO 时，我得到一个主键错误。

这让我觉得 MetadataType 属性没有任何作用，我将 autoincrement 属性赋予了名为 User 的类中的属性“Id”。

这样，代码就可以正常工作。可能是因为使用错误的属性 MetadataType 或 ORMLITE 对 MetadataType 属性的支持..？

```
[MetadataType(typeof(UserMetadata))]
public partial class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string SurName { get; set; }
}

public class UserMetadata
{
    [AutoIncrement]
    public int Id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:41:26.413

ServiceStack 的[OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite/)不支持 MetadataType 属性。

# ruby - 许多客户端连接 Ruby

> ID：15366346
> 
> 赞同：4
> 
> 时间：2013-03-12T16:11:21.330
> 
> 标签：ruby

基本上，我们有大量（100 多个）远程嵌入式设备需要从中流式传输数据。

我可以使用以下代码连接到任何单独的远程主机：

```
require 'socket'

socket = TCPSocket.new '192.168.1.115', 8016

loop do
  socket.write("GET_DATA")
  data = socket.read(32)
end

s.close 
```

但我想一次连接到其中的许多。有推荐的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:33:05.973

使用线程：

```
ips = ['192.168.1.115', '...', '...']
threads = []

ips.each do |ip|
  threads << Thread.new do
     # Connect here, do some stuff with the socket
  end
end

threads.each { |t| t.join } 
```

请注意，如果您想要真正的线程，您应该使用 Jruby 或 Ruby >= 1.9，MRI ruby​​ < 1.9（标准 ruby​​）线程实现模拟线程（[绿色线程](http://en.wikipedia.org/wiki/Green_threads)），并且仅在一个线程等待 I/O 时才进行真正的线程.

# ios - 如何设置 UIImage 边界？

> ID：15366347
> 
> 赞同：0
> 
> 时间：2013-03-12T16:11:27.970
> 
> 标签：ios, objective-c, uiimageview, uiimage, bounds

我在为 a 设置正确的图像位置时遇到了一些问题`UIImageView`，我将其作为子视图添加到 a `UIButton`。我首先创建按钮并添加一些子层：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setFrame:bounds];
//add gradient background
CAGradientLayer *gradient = [CAGradientLayer layer];
gradient.frame = button.bounds;
gradient.colors = [NSArray arrayWithObjects:(id)[UIColor colorWithRed:.5 green:.5 blue:.5 alpha:1.0].CGColor, (id)[[UIColor blackColor] CGColor], nil];
[button.layer insertSublayer:gradient atIndex:0];

//set green background
CALayer *layer = [CALayer layer];
layer.frame = CGRectInset(button.bounds, 5, 5);
layer.backgroundColor = [UIColor colorWithRed:.55 green:.8 blue:.5 alpha:1.0].CGColor;
[button.layer insertSublayer:layer above:gradient]; 
```

然后我使用两种方法来设置图像。第一个（如果没有保存图像，我会使用它）使用缩放为正确大小的图像资源，并且是应用程序包的一部分。我使用以下代码进行设置：

```
UIImageView *v = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
[v setBounds:CGRectInset(button.bounds, 8, 8)];
[button addSubview:v]; 
```

问题出在我使用通过相机拍摄并保存到文件系统的图像时。我使用以下代码将其设置为背景：

```
//path is an NSString set the the documents location of the image.
UIImageView *v = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:path]];
[v setBounds:CGRectInset(button.bounds, 8, 8)];
[v setContentMode:UIViewContentModeScaleToFill];
[button addSubview:v]; 
```

屏幕的输出现在显示图像偏离它应该在的位置：

![例子](../Images/7733b6985d59d131f4b7a85299f3a5d0.png)

我究竟做错了什么？如何在其父视图中正确缩放/适合图像？我试过简单地设置按钮图像，但什么也没出现（也许图像在子层后面？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:35:20.813

使用 -`setFrame`方法设置 imageview 的框架，而不是`bounds`

```
[v setFrame:CGRectInset(button.bounds, 8, 8)]; 
```

因此代码变成

```
UIImageView *v = [[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:path]];
[v setFrame:CGRectInset(button.bounds, 8, 8)];
[v setContentMode:UIViewContentModeScaleToFill];
[button addSubview:v]; 
```

# sql-server-2008 - 如何获取小于或大于动态 SQL 的行？

> ID：15366350
> 
> 赞同：0
> 
> 时间：2013-03-12T16:11:33.863
> 
> 标签：sql-server-2008

我有一个动态 SQL，其中包含有关此人的信息，例如

桌子

```
ID   Name   Address  Age(int)
1    a       Main     30
2    b       CT       35 
```

现在我怎样才能得到所有 Person 他们的`Age < 40 or Age >= 30 or Age <= 50`等。我想做的是传递“ <30 ”或“ >40 ”等作为参数并进行相应的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:25:20.700

假设您使用的是 MSSQL，您可以使用 EXEC 来实现这种间接性。例如：

```
DECLARE @age_constraint AS VARCHAR(100) = '<30'
DECLARE @query AS VARCHAR(255)
SET @query = 'SELECT * FROM Table WHERE Age' + @age_constraint
EXEC(@query) 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms188332.aspx](http://msdn.microsoft.com/en-us/library/ms188332.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:08:18.763

我很好奇的一件事是，您是自己编写脚本，还是让 UI 组件执行此操作。后者的主要问题是，例如，如果您允许用户仅输入“<40”，则会引入 SQL 注入问题。

为了帮助防止这种情况并确保您的数据类型对您正在检查的列有意义，您可以使用 sp_executesql，但您必须将您的运算符与您的数值分开。这些方面的东西应该起作用：

```
 DECLARE @sql NVARCHAR(4000), @parameterlist NVARCHAR(500), @ageParameter INT, @equality NVARCHAR(2)
    SET @ageParameter = 40
    SET @equality = '='

    SET @sql = 
        'SELECT * FROM SomeTable 
        WHERE @equality = ''='' AND Age = @ageParameter
        UNION ALL 
        SELECT * FROM SomeTable 
        WHERE @equality = ''<'' AND Age < @ageParameter
        UNION ALL   
        SELECT * FROM SomeTable 
        WHERE @equality = ''>'' AND Age > @ageParameter 
    '

    SET @parameterlist = '@ageParameter INT, @equality NVARCHAR(2)'
    EXEC sp_executesql @sql, @parameterlist, @ageParameter = @ageParameter, @equality = @equality 
```

有关 sp_executesql 如何工作的更多信息：http: [//msdn.microsoft.com/en-us/library/ms188001 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188001(v=sql.100).aspx)

# java - 保持一定数量的运行线程（JAVA）

> ID：15366352
> 
> 赞同：1
> 
> 时间：2013-03-12T16:11:40.730
> 
> 标签：java, multithreading

我想实现一个软件，它可以确保 10 人`threads`一直在运行同一个课程

所有人`threads`都会在随机的几秒钟后终止，但是，我想确保一旦它们被终止，它们就会立即被 new created 替换`threads`。

你知道是否有可用的图书馆吗？

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:13:56.553

而是使用线程池。Java`Executor`框架提供了它。

```
ExecutorService executor = Executors.newFixedThreadPool(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:20:16.733

```
 ExecutorService  executorPool = Executors.newFixedThreadPool(noOfThreads); 
```

公共静态 ExecutorService newFixedThreadPool(int nThreads)

```
Creates a thread pool that reuses a fixed set of threads operating off a

shared unbounded queue. If any thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks.

Parameters:
    nThreads - the number of threads in the pool 
Returns:
    the newly created thread pool 
```

# php - 更新了 PHP/MYSQL 中的单个行

> ID：15366353
> 
> 赞同：1
> 
> 时间：2013-03-12T16:11:40.880
> 
> 标签：php, mysql, sql-update

我正在从我正在以表格形式存储的 SQL 数据库中检索数据。但是，我有一个更新页面，我不知道如何根据用户希望更改的内容更新表，从而更新数据库。

这就是我的意思。运行查询后说我有输出：

```
Product  | Descption  | Quantity   | Price   | StartDate  | End Date
chcolates   xyz           2.0         4.99     2013-03-11    2013-03-20      
sweets      yum!          1.0         1.99     2013-03-15    2013-03-27 
```

所以这是通过排队db在php中作为表格输出的。（即这个卖家正在销售提到的2种产品）。

现在假设用户想要更新第一行并更改数量。那我该怎么做呢？我知道我可以使用 SQL QUERY UPDATE TABLE 卖家 WHERE ??

我应该输出表格还是表格？用户可以更新他们希望的任何行以及任何字段。（即可以更新他们希望销售的产品、descp、数量等）

我该怎么做这样的事情？请问有什么想法吗？

**====编辑======** 感谢大家的建议。我有一个格式错误。我在我的 php 标签内，并在运行查询后：

```
while($rows = mysql_fetch_assoc($querySellers)){
echo 'Product:'.'<br />'.'<input type="text" value = $rows[\'ProductName\']>'; 
```

这似乎不是从数据库打印查询的 VALUE 而是打印

```
$rows['ProductName'] 
```

在文本框中，这是格式错误吗？我能做些什么来解决这个问题？而且最初 productName 是一个下拉组合框...有没有办法可以做到这一点，以便在我运行查询时输出显示为 SELECTED 组合框选项？

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:16:23.347

您应该做的最好的事情是为表中的项目实现一个`ID`列（可能是自动增量？）或一些唯一标识符（`Primary Key`）。这样，您可以通过执行轻松编辑一个项目

```
UPDATE table SET value = 'value' WHERE id = $id 
```

在您的情况下，您没有任何唯一标识符，因此您必须构建一个大型`WHERE`语句来包含所有内容，即。

```
WHERE Product = 'chocolates' AND Description = 'xyz' AND .. AND.. 
```

这可能不是完全独一无二的。

**编辑**：（参考编辑）问题是PHP如何处理单引号与双引号。PHP 不会**在**单引号中计算变量，而是在双引号中。

```
$myvar = "value";
echo '$myvar'; // output: $myvar
echo "$myvar"; // output: value 
```

所以你需要改变你的结构

```
echo "Product: <br /> <input type=\"text\" value = \"{$rows['ProductName']}\">"; 
```

注意单引号变为双引号以及双引号的转义。至于您对所选选项的问题。您需要一种方法来确定选择了哪个，并`IF`使用代码添加语句以将`Selected`属性添加到选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:31:29.820

您需要有一个主键自动递增的 id，而不是 null。然后

```
UPDATE `your_db_table`.`column_table` SET `Product` 
= 'Sweet Stuff' WHERE 'Product`.`prod_id` = 1 LIMIT 1; 
```

然后@UnholyRanger 清楚地解释了其余的东西

# javascript - 对 Javascript 数组进行排序

> ID：15366355
> 
> 赞同：1
> 
> 时间：2013-03-12T16:11:52.447
> 
> 标签：javascript, arrays

我在javascript中有以下关联数组...

```
opt_array["wta"] = 23;
opt_array["cdp"] = 54;
opt_array["cdm"] = 54;
opt_array["ppv"] = 44; 
```

我需要按值（降序）排序，然后按键（按特定顺序）。因此，例如在上面我需要输出 54,54,44,23 并且如果有平局，则按此顺序排列键。wta、cdp、cdm、ppv。

所以返回的数组将是......

```
opt_array["cdp"] = 54;
opt_array["cdm"] = 54;
opt_array["ppv"] = 44;
opt_array["wta"] = 23; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T16:12:56.787

您不是将`opt_array`其用作数组，而是将其用作对象。

对象的属性在 JavaScript 中是无序的，您不能将它们按任何特定顺序排列。

唯一出现的时间顺序似乎是当您将数组用作数组并使用数组“索引”时，它们是数字字符串。（是的，[真的](http://blog.niftysnippets.org/2011/01/myth-of-arrays.html)。虽然我们倾向于将它们写成数字，但它们实际上是属性名称，而属性名称始终是字符串。）

您可以从`opt_array`数组中获取所有属性名称，然后对它们进行排序，然后循环以产生输出。例如：

```
var index;
var names = Object.keys(opt_array);
names.sort();
for (index = 0; index < names.length; ++index) {
    console.log(names[index] + ": " + opt_array[names[index]]);
} 
```

（使用`Object.keys`，这是一个[ES5](http://www.ecma-international.org/ecma-262/5.1/)功能，并非所有浏览器都存在。您可以为早期的浏览器填充它。）

或者，如果您愿意，您可以拥有一个对象数组，并按这些对象的属性对数组进行排序：

```
opt_array = [
    {key: "wta", value: 23},
    {key: "cdp", value: 54},
    {key: "cdm", value: 54},
    {key: "ppv", value: 44}
];
opt_array.sort(function(a, b) {
    var rv;

    if (a.key < b.key) {
       rv = -1;
    }
    else if (a.key > b.key) {
       rv = 1;
    }
    else {
       rv = 0;
    }
    return rv;
}); 
```

但这对于您使用的任何东西都可能没有用`opt_array`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:13:18.903

JavaScript 中没有关联数组之类的东西。你所拥有的是一个对象。

对象没有顺序。无论您设置键的顺序如何，它都会以它认为合适的方式排列它们。因此，您无法对它们进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:46:39.570

布赖恩：

Javascript 函数有时不足以处理数组。

我使用了这个 javascript 库[PHPJS](http://phpjs.org/)：

使用 javascript 排序：http: [//phpjs.org/functions/asort/](http://phpjs.org/functions/asort/)

祝你好运！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:24:25.367

您可以使用 Object.keys 获取排序键的数组

```
var sortedKeys = Object.keys(opt_array).sort();

for(var i = 0; i < sortedKeys.length; i++){
    console.log("opt_array['" + sortedKeys[i] +"'] = "+ opt_array[sortedKeys[i]]+ ";");
} 
```

输出：

```
opt_array['cdm'] = 54;
opt_array['cdp'] = 54;
opt_array['ppv'] = 44;
opt_array['wta'] = 23; 
```

# android - 停止在背景单击/返回时关闭上下文菜单

> ID：15366356
> 
> 赞同：0
> 
> 时间：2013-03-12T16:11:53.710
> 
> 标签：android, android-contextmenu

我可以显示一个上下文菜单，这很棒。

现在我不希望用户能够在不选择选项的情况下关闭上下文菜单，我将如何执行此操作？还是我应该停止懒惰并转向对话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:15:31.620

没有公共 API 来控制上下文菜单上的后键行为。正如您所建议的，您最好的选择是转到对话框。

# asp.net-mvc-4 - mvc4 web api route sheme

> ID：15366358
> 
> 赞同：0
> 
> 时间：2013-03-12T16:11:59.903
> 
> 标签：asp.net-mvc-4, asp.net-web-api-routing

我想要这样的访问资源：

```
 /api/adddevice/12345 
```

这条路线有什么不正确的？

```
 routes.MapRoute(
            name: "AddDevice",
            url: "adddevice/{id}",
            defaults: new { controller = "some controller", action = "adddevice", id = UrlParameter.Optional }
    );

    public string AddDevice(int id)
    {
        return "Device " + id.ToString() + " succesfully added";
    } 
```

**编辑**

以下是错误详情：

```
 <MessageDetail>
        No type was found that matches the controller named 'some controller'.
     </MessageDetail> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:50:11.087

你说你希望网址是这样的：

```
/api/adddevice/12345 
```

但你的路线映射有这个：

```
url: "adddevice/{id}", 
```

看看怎么不匹配？映射`api/`在开始时没有。调用中声明的 URL`MapRoute()`必须匹配*所有*的 URL（当然除了主机部分）。`/api/`从您正在输入的 URL中删除，或将其添加到您正在映射的 URL。

顺便说一句，`routes.MapRoute()`是针对 MVC 的；对于你想要的 WebApi `config.Routes.MapHttpRoute()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:18:33.127

您错过了路由中的“api”，并且您似乎正在使用 MVC 路由。

请注意，这需要添加到 WebApiConfig 而不是 RouteConfig：

```
config.Routes.MapHttpRoute(
                name: "AddDevice",
                routeTemplate: "api/adddevice/{id}",
                defaults: new { controller = "somecontroller", action = "adddevice", id = UrlParameter.Optional }
                ); 
```

# makefile - Fortran makefile 每次都重新编译

> ID：15366365
> 
> 赞同：1
> 
> 时间：2013-03-12T16:12:10.560
> 
> 标签：makefile, fortran

我正在尝试编写一个 Fortran 生成文件：只有一个“主”文件，但我已将模块放在单独的 .f90 文件中。附加的makefile有效，但是即使我不做任何更改，它也会强制重新编译。我正在使用 gfortan 4.7.2 和 GNU Make 3.81 运行 x86-64 Linux。

```
FC = gfortran

FCFLAGS += -ffree-line-length-none -finit-local-zero 

#FCFLAGS += -fbounds-check -ffpe-trap=invalid

all: new

new: ALE.o curvilinear.o new.o
    $(FC) $(FCFLAGS) -o new new.o ALE.o curvilinear.o

new.o: ALE.mod curvilinear.mod new.f90
    $(FC) $(FCFLAGS) -c new.f90

ALE.o: ALE.f90
    $(FC) $(FCFLAGS) -c ALE.f90

ALE.mod: ALE.o ALE.f90

curvilinear.o: ALE.o curvilinear.f90
    $(FC) $(FCFLAGS) -c curvilinear.f90

curvilinear.mod: curvilinear.o curvilinear.f90

clean:
    rm ale.mod curvilinear.mod ALE.o curvilinear.o new new.o 
```

输出：

```
$ make clean
rm ale.mod curvilinear.mod ALE.o curvilinear.o new new.o
$ make
gfortran -ffree-line-length-none -finit-local-zero  -c ALE.f90
gfortran -ffree-line-length-none -finit-local-zero  -c curvilinear.f90
gfortran -ffree-line-length-none -finit-local-zero  -c new.f90
gfortran -ffree-line-length-none -finit-local-zero  -o new new.o ALE.o curvilinear.o
$ make
gfortran -ffree-line-length-none -finit-local-zero  -c new.f90
gfortran -ffree-line-length-none -finit-local-zero  -o new new.o ALE.o curvilinear.o 
```

为什么在没有进行任何更改的情况下重新编译“新”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:58:24.877

Didier 的回答可能已经解决了您的问题，但我想为 Fortran makefile 添加一个漂亮而干净的建议（一个主程序的示例）：

```
# Main program
all: program
program: mod1.o mod2.o mod3.o

# Fortran module dependencies
mod1.o: mod2.o mod3.o

# Binary/object rules
%: %.o
        $(FC) $(FCFLAGS) -o $@ $^ $(LDFLAGS)

%.o: %.f90
        $(FC) $(FCFLAGS) -c $< 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:20:08.080

根据您的`Makefile`,`new.o`取决于`ALE.mod`and `curvilinear.mod`。

我猜这些文件永远不存在，因为它们有依赖关系，但没有规则来制作它们。

确实，在尝试构建`new`时，`make`没有找到`*.mod`文件。因此，`make`运行规则来制定它们，但没有规则。但是，`make`认为它已经构建了它们，并继续构建操作，认为这些`*.mod`依赖关系刚刚重建，因此是最近的，从而触发了`new`.

要解决此问题，您应该替换该行

```
new.o: ALE.mod curvilinear.mod new.f90 
```

经过

```
new.o: new.f90 
```

# c# - 无法从 int 转换为 system.collections.generic.icomparer

> ID：15366372
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:12:20.240
> 
> 标签：c#, list, compilation, foreach, int

刚接触 C# 只是想知道错误是什么，无法理解错误。无需更正，只想知道错误。错误：“Systems.Collections.Generic.List.BinarySearch(int,System.Collections.Generic.Icomparer)”的最佳重载方法匹配有一些无效参数 Argument1：无法从 system.collections.generic.list 转换为 int Argument2：无法从 int 转换为 system.collections.generic.icomparer

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;enter code here
using System.Windows.Forms;

namespace LotoNumbers
{
    public partial class FrmLotto : Form
{
    // declare class level variables
    List<int> player = new List<int>(7);
    List<int> computer = new List<int>(6);

    public FrmLotto()
    {
        InitializeComponent();
    }

    // event method to generate player's numbers
    private void btnPlayer_Click(object sender, EventArgs e)
    {
        // declare and initalize local variables
        string display = "";

        // reset the winning number label before generating the player's numbers
        lblComputerNumber.Text = "00  00  00  00  00  00";

        // generate unique random numbers
        GenerateRandomNumbers(player);
        player.Sort();
        // build display string
        display = BuildDisplayString(player);

        // display winning number in label
        lblPlayerNumber.Text = display;
    }

    // method to generate computer's random numbers (the 'winning numbers')
    // and determine how many winning numbers
    private void btnComputer_Click(object sender, EventArgs e)
    {
        // declare and initalize local variables
        int winCount = 0;
        string display = "";

        // generate unique random numbers
        GenerateRandomNumbers(computer);

        // sort the array in ascending order
        computer.Sort();

        // build display string
        display = BuildDisplayString(computer);

        // display winning number in label
        lblComputerNumber.Text = display;

        // determine if this number matches any of the players numbers
        winCount = CompareTwoList(player, computer);

        // display the total winning numbers
        lblMatching.Text = winCount.ToString("D2");
    }

    private void GenerateRandomNumbers(List<int> numberList)
    {

        Random lucky = new Random();

        // generate unique random numbers
        for (int index = 0; index < numberList.Capacity; index++)
        {
            int temp = lucky.Next(1, 50);
            if (numberList.IndexOf(temp) < 0)
            {
                numberList.Add(temp);
            }
            else
            {
                index--;
            }
        }

    }

    private string BuildDisplayString(List<int> numberList)
    {
        // declare method variable
        string display = "  ";

        // loop through the array and build a display string
        foreach (int number in numberList)
            display += number.ToString("D2") + "  ";

        // return display string
        return display;
    }

    private int CompareTwoList(List<int> list1, List<int> list2)
    {
        // declare method variable
        int numberMatching = 0;

        // loop through each element in the first array looking for a match in the second array
        foreach (int value in list1)
        {
            if (player.BinarySearch(list2, value) >= 0)
                numberMatching++;  // a matching value is found
        }

        return numberMatching;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:16:08.810

看起来你想要：

```
if (list2.BinarySearch(value) >= 0)
    numberMatching++;  // a matching value is found 
```

您目前正在调用[List<int>.BinarySearch(int, IComparer<int>)](http://msdn.microsoft.com/en-us/library/ftfdbfx6.aspx)。因为`value`是一个`int`你得到一个类型错误。

请注意，您还可以执行以下操作：

```
int numberMatching = list2.Intersect(list1).Count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:16:33.177

没有`List<int>.BinarySearch()`接受 a`List<int>`和`int`作为参数的重载。[见 MSDN](http://msdn.microsoft.com/en-us/library/3f90y839.aspx)

你需要使用`player.BinarySearch(value)`

# asp.net-mvc - 什么是最佳实践，实体框架模型或 MVC 模型？

> ID：15366373
> 
> 赞同：1
> 
> 时间：2013-03-12T16:12:22.610
> 
> 标签：asp.net-mvc, entity-framework, data-layer

将实体框架与 Code-First 结合使用时，调用数据库数据时的最佳做法是什么？

这是我第一次将实体框架与 MVC 一起使用，并注意到它会自动在我的 DataLayer 中构建模型。我的 MVC UI 中也有基本模型，允许我在视图中操作和显示数据。我目前使用我的工作流层抓取数据，然后将数据库模型自动映射到我的 UI 模型以显示数据。

这是最佳做法吗？我应该使用实体框架模型而不是我的 UI 模型吗？或者这甚至可以干净地做？

任何有关此事的信息将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T04:53:22.750

这真的取决于你。如果您也想为您的视图模型重用相同的 EF 实体；前进。就个人而言，我宁愿不这样做。这是因为您通常最终会向类中添加一堆与数据中存储的内容无关的属性，是的；我知道你可以使用这样的`NotMapped`属性：

```
[NotMapped]
public string MyExtraProperty { get; set; } 
```

但我不喜欢。此外，您最终会在属性中添加`[Display]`和其他属性，并且在不知不觉中，您已经得到了一些装饰有数据特定和 UI 特定属性的东西，如果您不小心，它可能会变得混乱。

所以对我来说；我有以下内容：

1.  域实体
2.  查看模型
3.  服务/外观/存储库

控制器调用存储库来获取域实体并将其转换为视图模型以进行显示。

我发现这是一种更清洁的方法，但也许这只是我.. 最重要的是选择一种方法并坚持使用它以保持代码的一致性和清晰性，但任何一种方法都是可以接受的.. “无论浮动你的船”正如他们所说...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:04:25.660

EF 创建的 POCO 应该用作您的模型。一般的想法是你有 EF 提供对你的数据库的访问。您使用 LINQ 和/或扩展方法查询 EF，并通过将它们绑定到 WPF 中来最终得到您在 UI 上显示的对象或对象集合。当然，如果您使用的是 WPF 而不是较旧的 WinForms。我可以从经验告诉你，一旦你熟悉了这些技术，这是一个非常简化的过程。这就是一个非常基本的设置的工作方式。

一种更高级的解决方法是将诸如模型-视图-视图模型 (MVVM) 之类的架构以及可能的存储库模式添加到混合中，此时您可以更好地分离代码和表示，但会增加复杂性。

我不知道您使用的是哪种风格的 MVC，以及如何将其与上述混合，但如果您想了解更多关于 EF 的设想如何工作，您应该研究我上面列出的技术.

# matlab - 如何在 MATLAB 中一步加载 100 个具有相似名称和/或字符串的文件？

> ID：15366374
> 
> 赞同：1
> 
> 时间：2013-03-12T16:12:22.897
> 
> 标签：matlab, ascii, filenames, string-formatting, matlab-load

我的目录中有 100 个 ASCII 文件，名称如下：

> int_001.ASC
> int_002.ASC
> int_003.ASC
> 。
> .
> .
> int_099.ASC
> int_100.ASC

我必须使用 importdata 将它们全部导入 MATLAB，其工作方式如下：

```
A = importdata('int_001.ASC', ' ', 9)
x = A.data(:,1)
y = A.data(:,2) 
```

我的问题是：我怎样才能避免写 100 次`importdata`？有没有办法只写第一个字符串然后上传所有数据？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T16:14:37.487

```
fls = dir( 'int_*.ASC' );
for fi=1:numel(fls)
    A{fi} = importdata( fls(fi).name, ' ', 9 );
    % ...
end 
```

**更新：**
您可以使用[字符串格式](https://stackoverflow.com/questions/14213442/matlab-file-name-with-zero-padded-numbers?lq=1)根据文件编号读取文件：

```
for fi=1:100
    A{fi} = importdata( sprintf('int_%03d.ASC', fi ), ' ', 9 );
    % ...
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:19:03.827

您可以`strcat`在 for 循环中使用函数：

```
for k=1:n
    fileName = strcat('int_',num2str(k, '%03d'),'.ASC');
    A(k) = importdata(fileName, ' ', 9);
    x(k) = A(k).data(:,1);
    y(k) = A(k).data(:,2);
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T17:18:48.580

如果你想把这个有点过火：

```
alldata = arrayfun(...
    @(dirEntry)importdata(dirEntry.name, ' ', 9), ...
    dir('int_*.ASC'),...
    'uniformoutput',false); 
```

此行执行以下操作

1.  获取与部分文件名匹配的所有文件的列表，作为结构数组 (h/t Shai)
2.  对于该数组中的每个元素，`importdata`从您的原始帖子执行调用。
3.  将所有输出编译成一个元胞数组。

# java - 泛型和类>，EnumSet.allOf(class) vs class.getEnumConstants()

> ID：15366375
> 
> 赞同：13
> 
> 时间：2013-03-12T16:12:24.600
> 
> 标签：java, class, generics, enums

我有以下 BeanValidation 代码可以正常工作，并允许验证带有注释的 bean：

```
 @EnumValue(enumClass = MyTestEnum.class)
  private String field;

  public enum MyTestEnum {
    VAL1, VAL2;
  } 
```

仅当字段值为“VAL1”或“VAL2”时才会验证。

```
public class EnumNameValidator implements ConstraintValidator<EnumValue, String> {

  private Set<String> AVAILABLE_ENUM_NAMES;

  @Override
  public void initialize(EnumValue enumValue) {
    Class<? extends Enum<?>> enumSelected = enumValue.enumClass();
    Set<? extends Enum<?>> enumInstances = Sets.newHashSet(enumSelected.getEnumConstants());
    AVAILABLE_ENUM_NAMES = FluentIterable
            .from(enumInstances)
            .transform(PrimitiveGuavaFunctions.ENUM_TO_NAME)
            .toImmutableSet();
  }

  @Override
  public boolean isValid(String value, ConstraintValidatorContext context) {
    if ( value == null ) {
      return true;
    } else {
      return AVAILABLE_ENUM_NAMES.contains(value);
    }
  }

} 
```

我不明白为什么我的第一次尝试失败了。使用以下代码代替`enumSelected.getEnumConstants()`上面的代码：

```
Set<? extends Enum<?>> enumInstances = EnumSet.allOf(enumSelected); 
```

Intellij 12 没有突出显示任何错误，但编译器说：

```
java: method allOf in class java.util.EnumSet<E> cannot be applied to given types;
  required: java.lang.Class<E>
  found: java.lang.Class<capture#1 of ? extends java.lang.Enum<?>>
  reason: inferred type does not conform to declared bound(s)
    inferred: capture#1 of ? extends java.lang.Enum<?>
    bound(s): java.lang.Enum<capture#1 of ? extends java.lang.Enum<?>> 
```

* * *

我不明白这个问题，而且我也有可以正常工作的代码：

```
 private static <T extends Enum<T> & EnumAlternativeName> T safeGetByAlternativeName(Class<T> enumClass, String alternativeName) {
    for ( T t : EnumSet.allOf(enumClass) ) {
      if ( t.getAlternativeName().equals(alternativeName) ) {
        return t;
      }
    }
    return null;
  } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T16:36:01.430

我的猜测是`? extends Enum<?>`两者`?`可能不同，而`allOf`期望`T extends Enum<T>`两者`T`相同。

例如，考虑以下代码：

```
static enum MyEnum {}
static class EnumValue<T extends Enum<T>> {
    Class<T> enumClass;
    EnumValue(Class<T> enumClass) {
        this.enumClass = enumClass;
    }
    Class<T> enumClass() { return enumClass; }
} 
```

这些行将编译：

```
EnumValue<?> enumValue = new EnumValue(MyEnum.class); // raw constructor
Set<? extends Enum<?>> enumInstances = EnumSet.allOf(enumValue.enumClass()); 
```

因为我们知道两者`T`是`enumValue.enumClass()`相同的，但这不会：

```
EnumValue enumValue = new EnumValue(MyEnum.class);
Class<? extends Enum<?>> enumSelected = enumValue.enumClass();
Set<? extends Enum<?>> enumInstances = EnumSet.allOf(enumSelected); 
```

因为您使用 a`Class<? extends Enum<?>>`作为中间步骤丢失了信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T18:37:45.903

我对@assylias 解决方案的解释：

我们想要表达的关于类的类型是它是一个

```
Class<E>, for some E, that E <: Enum<E> 
```

但是 Java 不允许我们`E`在方法体中引入类型变量。

通常，我们可以利用通配符和通配符捕获来引入隐藏类型变量

```
class G<T extends b(T)> { ... }  // b(T) is a type expression that may contain T

G<? extends A>   --capture-->   G<T>, for some T, that T <: A & b(T) 
```

但这在我们的情况下不起作用，因为`T`in`Class<T>`没有使它起作用的界限。

所以我们需要引入一个具有所需边界的新类型

```
class EnumClass<E extends Enum<E>>   // called EnumValue in assylias's solution

    EnumClass(Class<E> enumClass) 

    Class<E> enumClass()

EnumClass<?>   --capture-->    EnumClass<E>, for some E, that E <: Enum<E> 
```

然后我们调用`EnumClass<E>.enumClass()`产生一个

```
Class<E>, for some E, that E <: Enum<E> 
```

这是我们一直在努力实现的目标。

但是我们如何调用 的构造函数`EnumClass`呢？问题的根源是我们没有正确的类型 for `enumClass`，但是 的构造函数`EnumClass`想要正确类型的`enumClass`。

```
Class<not-proper> enumClass = ...;
new EnumClass<...>(enumClass);  // wont work 
```

幸运的是（？）原始类型有助于禁用泛型类型检查

```
EnumClass raw = new EnumClass(enumClass);  // no generics
EnumClass<?> wild = raw; 
```

因此，我们需要执行的将类转换为所需类型的最少体操是

```
((EnumClass<?>)new EnumClass(enumClass)).enumClass() 
```

# php - 需要正则表达式来捕获 url 路径

> ID：15366379
> 
> 赞同：0
> 
> 时间：2013-03-12T16:12:35.237
> 
> 标签：php, regex

我正在使用 PHP，我一直在尝试创建一个正则表达式模式来捕获部分 URL 路径，但无济于事。

可能的 URL 路径可以是以下任何一种：

*   “产品/zzz”
*   “yyyyyyyy/产品/zzz”
*   “xxxxx/yyyyyyyy/产品/zzz”
*   “xxxxx/yyyyyyyy/.../product/zzz”（...表示其他可能的词）

我需要捕捉的是“产品”之前的部分。

对于第一种情况，结果应该是一个空字符串。其余的是“yyyyyyyy”、“xxxxx/yyyyyyyy”和“xxxxx/yyyyyyyy/...”

这里有人可以给我提示吗？谢谢！

PS。看起来我想要的部分是相同模式“xxxx/”的重复。但我不擅长使用正则表达式组。

更新：

我可能找到了一个解决方案，通过捕获具有零次或多次重复的模式“xxx/”：“([^/]+/)*”

所以完整的正则表达式应该是 "(([^/]+/)*)product/([^/]+)"

@SERPRO：它通过了您的“Live RegExp”中的测试。希望它是有帮助的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:27:23.230

我会使用`parse_url()`：

```
$path = parse_url($url, PHP_URL_PATH);
// Deal with $path to figure out what's after '/product/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:26:40.593

这应该适合你：

```
#(.*?)/?product.*\b# 
```

您可以在此处查看结果字符串的示例：

[http://xrg.es/#5awa10](http://xrg.es/#5awa10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:14:58.887

这应该这样做：

`^(.*[^/]|)/*product/[^/]+/*$`

它还将允许在路径末尾使用任意数量的斜杠。括号内的部分是您的结果。

# android - 如何避免以编程方式共享应用程序？

> ID：15366380
> 
> 赞同：0
> 
> 时间：2013-03-12T16:12:35.767
> 
> 标签：android

我正在开发一个自定义应用程序，因此我不希望通过蓝牙或任何其他来源未经授权分发应用程序。如何以编程方式从分发中保护其 .apk 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:21:15.683

解决方案是使用 android 许可证库。

**注意**：通过这样做，您将无法阻止自己共享**apk**，相反，您的应用程序将知道它是否已从*Play 商店*合法安装并据此采取行动。通常我只是通知用户从市场上下载该应用程序，如果没有获得许可则退出该应用程序。

这是一个指向 Android License Library [Application Licensing](http://developer.android.com/google/play/licensing/index.html)的链接，其中包括一个示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:15:45.633

您必须混淆和优化您的应用程序，这是唯一的方法......

如果您的应用程序不错，不幸的是，您会在数周后在 Internet 上找到 .APK！:(

使用最后一个**[Proguard](http://developer.android.com/tools/help/proguard.html)**工具来做到这一点！

# c# - 在 index.cshtml 中仅显示 x 个项目

> ID：15366382
> 
> 赞同：2
> 
> 时间：2013-03-12T16:12:45.697
> 
> 标签：c#, razor, visual-studio-2012

我正在 Visual Studios、MVC 3、Razor 引擎中制作一个新闻提要项目，并且我试图一次只显示 10 个提要数量。

目前，当我让数据库运行时，我使用了这个 index.cshtml：

```
@model IEnumerable<NyjiGrunnur.Models.Article>

@{
ViewBag.Title = "NewsFeed";
}

<h2>@ViewBag.Message</h2>

     @foreach (var item in Model)
    {
        <div id="eitt">
            <fieldset>
                <legend>@Html.ActionLink( item.Name, "Edit", new { id=item.Id } )</legend>
                <div>@item.Subject, @item.Created</div>
                <p>@Html.Raw(item.Content.Replace(Environment.NewLine, "<br/>"))</p>
            </fieldset>
        </div>
    } 
```

foreach 获取每一个项目，我想知道是否可以使用 for 循环或类似的东西来仅显示 10 个最新的提要。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:19:50.427

您可以保留一个计数器变量并在显示数据之前对其进行检查

```
@{
   int counter=0;
}
foreach (var item in Model)
{
   counter++;
   if(counter<=10)
   {
      <div id="eitt">@item.Name</div>
   }
} 
```

**但最好在您的 Action 方法中执行此操作**，并且只将 10 个项目返回到视图，这样您就不需要通过添加 if 语句来污染您的视图。您可以使用[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)LINQ 中的方法来获取 10 个项目。

```
public ActionResult Newsfeed()
{
 List<Article> articleList=new List<Article>();

 articleLsit=GetListOfItemsFromSomewhere();
 //now get only 10\. you may apply sorting if needed
 articleList=articleList.Take(10); 

 return View(articleList);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T08:27:08.290

会好起来的

```
 @foreach (var item in Model.Take(10))
    {
        <div id="eitt">
            <fieldset>
                <legend>@Html.ActionLink( item.Name, "Edit", new { id=item.Id } )</legend>
                <div>@item.Subject, @item.Created</div>
                <p>@Html.Raw(item.Content.Replace(Environment.NewLine, "<br/>"))</p>
            </fieldset>
        </div>
    } 
```

# binding - 通过委托绑定时，Groovy 闭包短格式方法调用不起作用？

> ID：15366385
> 
> 赞同：5
> 
> 时间：2013-03-12T16:12:50.590
> 
> 标签：binding, groovy

我创建了一个代码示例，显示了我遇到的问题：

```
class BindingExample {

    public static void main(String[] args) {

        Closure closure1 = {
            printit.call("Hello from closure 1")
        }

        Closure closure2 = {
            printit("Hello from closure 2")
        }

        Closure printit = { s ->
            println("printing: "+s)
        }

        Binding binding = new Binding()
        binding.setVariable("printit", printit)

        closure1.delegate = binding
        closure2.delegate = binding

        closure1()  //This works fine
        closure2()  //This does not.  

        //Why does .call() work and () alone not?  Most documentation says they're the same.
    }

} 
```

Printit 是一个`Closure`，[文档](http://groovy.codehaus.org/api/groovy/lang/Closure.html)表明它实现了 doCall，因此可以通过 () 以短格式调用。

但是，当此闭包通过绑定到委托而可用时，仅允许调用的长格式版本。输出是：

```
printing: Hello from closure 1
Exception in thread "main" groovy.lang.MissingMethodException: No signature of method: groovy.lang.Binding.printit() is applicable for argument types: (java.lang.String) values: [Hello from closure 2] 
```

有人可以解释为什么会这样吗？如果可能的话，我还想看看如何制作它，以便简短版本的工作。我可以通过将其定义`printit`为适当的静态方法（不是闭包）来使其工作，但这不适用于我的情况，因为我实际上需要为 printit 提供一些仅在方法范围内可用的数据（不包括在这个例子，因为我的问题与绑定本身有关）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:04:59.667

至于为什么会这样，很遗憾，我无法给出明确的答案。有一些关于隐式-“this”注释等的讨论。它似乎应该起作用，但是对于应该首先尝试什么（this-scope或delegate）有些模糊。

目前存在的问题似乎是正确的。我发现了以下其他同意的资源，并进行了一些讨论，但没有解决原因。

关于这个问题的 Nabble 讨论：http: [//groovy.329449.n5.nabble.com/Binding-Closure-property-not-called-as-method-td5562137.html](http://groovy.329449.n5.nabble.com/Binding-Closure-property-not-called-as-method-td5562137.html)

JIRA 票证结果： [https ://issues.apache.org/jira/browse/GROOVY-5367](https://issues.apache.org/jira/browse/GROOVY-5367)

# php - 投票限制

> ID：15366388
> 
> 赞同：0
> 
> 时间：2013-03-12T16:12:58.827
> 
> 标签：php, mysql

我以前问过这个问题，但现在我会更具体。我有一个投票系统，任何人都可以投票（无需成为注册用户）。我想只允许用户投票一次。最好的方法，我猜猜，会通过布尔值，不是吗？所以我只是要求你向我展示一个更好的方法。这是代码：

```
<?php
$tries=0;
if (((isset($_POST['hidden']))&&$tries<2) {
    $tries++;
    $likes++;
    $up = mysql_query("Update videos SET Likes='$likes' WHERE Name='$name'");
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:15:30.213

如果用户没有注册，你真的无法判断他之前是否投票过。一些常见的方法（远非防弹）是将每个 IP 的投票记录保留一段时间（因此，如果日志表包含此内容的 IP，则不接受投票），或者使用 cookie 来了解是否人已投票。

**以上都不**是100%！这就是为什么大多数公司不允许匿名投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:27:58.997

我知道一家初创公司需要的东西几乎和你一样。他们实施了一些控制，比如这个网站

> [https://panopticlick.eff.org/index.php?action=log&js=yes](https://panopticlick.eff.org/index.php?action=log&js=yes)

这告诉你：

> **在迄今为止测试的2,762,716 个**中，您的浏览器指纹似乎是独一无二的 。
> 
> 目前，我们估计您的浏览器的指纹至少能传达 21.4 位的识别信息。

这意味着它会生成您的用户代理、SO 和其他参数的指纹。这不是一个独立的实现，因为那**不是 100% 有效**的。他们还实施了一种手动投票验证方法，该方法处理那些不适合过滤器的指纹结果。

将此应用于您的案例。您将需要实施此**指纹**解决方案（或其他类似解决方案）并**手动检查**异常（用户/投票越多，异常越多）。

希望能帮助到你。

# php - 从变成一个变量 我目前正在从事一个小型大学项目。开发一个基本的电子商务php网站。我们在研讨会中获得了代码或提供了代码，然后我们将根据我们的需要进一步定制/开发。我正在尝试调整以下代码以添加额外的信息。cart.php 代码构建了一个购物车功能，它显示产品名称、数量，然后允许用户增加/减少数量。我正在尝试将用户（选定的）产品尺寸添加到购物车中。他们可以在 product.php 上选择。我已经在 product.php 中为此创建了数据库支持，我只需要用户选择的选项然后出现在 cart.p

> ID：15366396
> 
> 赞同：0
> 
> 时间：2013-03-12T16:13:31.770
> 
> 标签：php, arrays, action

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:25:32.707

前段时间我构建了类似的东西并面临相同（相当常见）的问题。

该解决方案要求您创建一个会话变量来存储选定的产品 ID。我想我在会话中存储了一个或多个数组，并使用这些信息来填充结帐页面。

我还将会话数据存储在一个表中，以便用户可以在会话之间访问它，但这是一个更高级的功能。

**带走：**使用会话变量来存储产品 ID 的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:28:10.227

这里有一些根本性的缺陷。

首先，创建有效的 HTML。确保表单包含在`<form></form>`标签中。该表格应该有一个动作：`<form action="cart.php" method="POST">`

您对“尺寸”的选择需要有一个名称：`<select name="productSize">`.

# php - 我的更新查询有什么问题？

> ID：15366398
> 
> 赞同：1
> 
> 时间：2013-03-12T16:13:40.203
> 
> 标签：php, mysql, sql

你能告诉我这个更新声明有什么问题吗？没有在 mysql 中更新我的数据库记录

```
$updateid = $row[id]; 

$result2 = mysql_query("UPDATE grades SET processed = 1
where 'id' = '$updateid'") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:14:20.933

`ColumnNames`（*以及 TableName*）不应用单引号括起来，因为它们是标识符而不是字符串文字。用单引号包裹标识符使其成为字符串文字。

```
UPDATE grades 
SET processed = 1
where id = '$updateid' 
```

如果您不确定您使用的 columnName (*或 TableName* ) 是否是保留关键字，请使用反引号而不是单引号将其分隔。例如，

```
UPDATE `grades` 
SET `processed` = 1
where `id` = '$updateid' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

*   [何时在 MySQL 中使用单引号、双引号和反引号](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:14:45.387

您正在引用您的列名。如果你想这样做（这里没有必要），你应该使用反引号：

```
$result2 = mysql_query("UPDATE grades SET processed = 1
             where `id` = '$updateid'") or die(mysql_error()); 
```

除此之外，您应该确保您的变量可以安全地用于 sql 查询，最好使用 PDO（或 mysqli）和准备好的语句。如果您真的想使用已弃用的`mysql_*`功能，您应该使用`mysql_real_escape_string()`.

# java - 条形码扫描仪扫描时在java中打印条形码

> ID：15366403
> 
> 赞同：0
> 
> 时间：2013-03-12T16:13:53.520
> 
> 标签：java, barcode

只要条码扫描到任何条码的顶部，我就想读取条码并将其打印在一个简单的 Java 程序中的控制台中。有什么办法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T16:17:24.573

```
final Scanner scanner;

    try 
    {
        scanner = new Scanner();

        try {
            scanner.release();
            scanner.close();
        } catch (Exception e) {

        }

        scanner.open("MotorolaScannerUSB");

        scanner.claim(100);
        scanner.setDeviceEnabled(true);
        scanner.setDataEventEnabled(true);

        scanner.addDataListener(new DataListener() 
        {
            public void dataOccurred(DataEvent arg0) {
                Scanner scn = (Scanner) arg0.getSource();

                if (scn.equals(scanner)) {                      
                    try {
                        scanner.claim(100);
                        System.out.println(new String(scanner.getScanData()));
                        scanner.claim(100);
                        scanner.setDeviceEnabled(true);
                        scanner.setDataEventEnabled(true);
                    } catch (JposException e) {
                        e.printStackTrace();
                    }
                }
            }
        });
    }
    catch (Exception e) {
        System.err.println("error");
    } 
```

# php - PHP shell_exec() 没有返回正确的状态

> ID：15366410
> 
> 赞同：0
> 
> 时间：2013-03-12T16:14:13.327
> 
> 标签：php, bash, shell-exec

我正在尝试从 php 函数运行 sh 脚本文件，`shell_exec()`但每次返回都不正确。

这是 sh 文件内容：

```
if [[ -z $1 ]]
then
        echo "svn st: NULL"
else
        command=$(ssh -q USER@IP_OF_THE_REMOTE_NODE "svn st $1")
        if [[ -z $command ]]
        then
                test="svn st: OK"
        else
                test="svn st: KO"
        fi
        echo $test
fi 
```

每次我从 shell 运行这个 sh 脚本时，回声总是正确的。“$1”包含我必须检查的工作目录。

但是如果我以这种方式运行相同的脚本：

```
$w_path = $working_path['path'];
$com = "sh /tmp/my_script_test.sh $w_path";

echo "content com ".$com;

$res = shell_exec($com);

echo "content res ".$res; 
```

最后一个回显打印总是“svn st：OK”，这对某些人来说是正确的`$w_path`，但对其他人来说完全不正确！为什么？我怎样才能找到错误？

我不认为这是一个 ssh 密钥问题，因为我使用了一个指南来解决这个问题，现在我不需要为远程服务器插入密码。

感谢和问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T08:09:42.603

改变

```
 command=$(ssh -q USER@IP_OF_THE_REMOTE_NODE "svn st $1")
        if [[ -z $command ]] 
```

到

```
 if ssh -q USER@IP_OF_THE_REMOTE_NODE "svn st $1" 
```

并记住：*每当某些事情不起作用时，那是因为它太复杂了*（不记得我在哪里读到的）。

# asp.net - asp.net 中心对齐复选框

> ID：15366413
> 
> 赞同：1
> 
> 时间：2013-03-12T16:14:16.673
> 
> 标签：asp.net, html

尝试居中对齐复选框，该复选框使用重复器显示每条记录。

```
asp:Repeater id="rptSelected" runat="server">
<HeaderTemplate>
  <table class="detailstable FadeOutOnEdit">
    <tr>
      <th style="width:200px;">Contacted</th>
    </tr>
 </HeaderTemplate>

<ItemTemplate>
  <tr>
    <th style="width:200px;">
      <input type="checkbox" class="AlignCheckBox" name='<%# CallUtilityChangeId((int)Eval("CompanyId")) %>'
       <%# SetCheckboxValue((bool)Eval("Contacted"))%> />
    </th>
  </tr>
</ItemTemplate>
<FooterTemplate>
</table>
</FooterTemplate>
</asp:Repeater> 
```

使用：

```
 .AlignCheckBox
{
    text-align: center;
} 
```

但无济于事......有什么想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:17:15.763

您在那里的 css 将使文本框中的文本居中*对齐*。为了对齐文本框**本身，您需要在 texbox 的***容器*上使用相同的 css 。

一个简单的例子是：

```
th {
    text-align: center;
} 
```

至于你的确切代码，你可以摆脱这个：

```
<ItemTemplate>
  <tr>
    <th style="width:200px; text-align: center;">
      <input type="checkbox" class="AlignCheckBox" name='<%# CallUtilityChangeId((int)Eval("CompanyId")) %>'
       <%# SetCheckboxValue((bool)Eval("Contacted"))%> />
    </th>
  </tr>
</ItemTemplate> 
```

将其添加到您的`th`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:19:33.363

在 ItemTemplate 中，我认为您想要“td”标签而不是“th”；）并添加“text-align：center；” 到样式属性：

```
<ItemTemplate>
  <tr>
    <td style="width:200px; text-align: center;">
      <input type="checkbox" name='<%# CallUtilityChangeId((int)Eval("CompanyId")) %>'
      <%# SetCheckboxValue((bool)Eval("Contacted"))%> />
    </td>
  </tr>
</ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:17:01.200

在复选框上应用居中对齐

# google-app-engine - “JsonParser$Feature 是一个受限类。” 授权 BigQuery 访问时出现 Google App Engine 错误

> ID：15366415
> 
> 赞同：0
> 
> 时间：2013-03-12T16:14:18.250
> 
> 标签：google-app-engine, google-bigquery

我有一个 Google App Engine 项目，我正在尝试实现用于 XML 缓存的 Google BigQuery。我正在使用 BQ 教程中的[CredentialUtils](https://developers.google.com/bigquery/docs/authorization)类进行离线 Web 服务器授权。我已经创建了 client_secrets 和所有这些。

我一直在尽力解决这个问题，尝试了最新的库版本但无济于事。你有什么建议？

这是错误日志。

```
Mar 12, 2013 3:58:52 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The server is running at http://localhost:56876/
Mar 12, 2013 3:58:52 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: The admin console is running at http://localhost:56876/_ah/admin
Mar 12, 2013 3:59:04 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error for /cachetest
java.lang.NoClassDefFoundError: org.codehaus.jackson.JsonParser$Feature is a restricted class. Please see the Google  App Engine developer's guide for more details.
at com.google.appengine.tools.development.agent.runtime.Runtime.reject(Runtime.java:51)
at org.codehaus.jackson.JsonFactory.<clinit>(JsonFactory.java:65)
at com.google.api.client.json.jackson.JacksonFactory.<init>(JacksonFactory.java:44)
at gigs.db.bigquery.CredentialUtils.<clinit>(CredentialUtils.java:31)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:171)
at com.google.appengine.tools.development.agent.runtime.RuntimeHelper.checkRestricted(RuntimeHelper.java:70)
at com.google.appengine.tools.development.agent.runtime.Runtime.checkRestricted(Runtime.java:64)
at gigs.engine.auth.XMLGetter.saveInCache(XMLGetter.java:156)
at gigs.engine.auth.XMLGetter.getEventXML(XMLGetter.java:74)
at gigs.CacheTestServlet.doGet(CacheTestServlet.java:42)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:50:33.113

不确定我是否理解这个问题，但为什么不使用 App Engine 服务帐户？[https://developers.google.com/bigquery/authorization#service-accounts-appengine](https://developers.google.com/bigquery/authorization#service-accounts-appengine)

# store - 内联数组在 ExtJS4 中存储数据？

> ID：15366427
> 
> 赞同：0
> 
> 时间：2013-03-12T16:14:57.827
> 
> 标签：store, extjs4.1

我无法将内联数组数据加载到商店中。特别是，这失败了。有人可以解释为什么吗？我什至尝试使用数组读取器添加内存代理，但仍然没有骰子。

```
Ext.define('MyApp.store.ComboboxState', {
extend: 'Ext.data.Store',

constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
    me.callParent([Ext.apply({
        autoLoad: true,
        storeId: 'ComboboxState',
        data: [
            [
                'AL',
                'Alabama'
            ]
           ]
        ,fields: [
            {
                name: 'state'
            },
            {
                name: 'name'
            }
        ]
    }, cfg)]);
}
}); 
```

仍然不适用于此内存代理/数组读取器：

```
 proxy: {
            type: 'memory',
            reader: {
                type: 'array'
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:59:42.457

只需从 ArrayStore 扩展，如下所示：

```
Ext.define('MyApp.store.ComboboxState', {
    extend: 'Ext.data.ArrayStore',

    constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
        me.callParent([Ext.apply({
            autoLoad: true,
            storeId: 'ComboboxState',
            data: [
                [
                    'AL',
                    'Alabama'
                ]
            ]
            ,fields: ['state', 'name' ]
        }, cfg)]);
    }
}); 
```

JsFiddle 尝试：http: [//jsfiddle.net/voidmain/hKwbJ/](http://jsfiddle.net/voidmain/hKwbJ/)

# android - doInBackground 在异步任务中运行时如何关闭对话框？

> ID：15366432
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:13.180
> 
> 标签：android

我试图在 AsyncTask 的“doInBackGround”方法运行时从主线程取消一个对话框。当我下载照片时，会弹出一个进度对话框，下载完成后，我在 onPostExecute 中关闭（）对话框。如果连接速度很慢，对话框会持续一段时间，我无法取消它，直到出现超时错误或完成下载。如何使用后退按钮以便主线程可以访问。这是我的代码的样子：

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

    protected void onPreExecute() {
        //this piece code doesn't seem to work
        progressDialog = ProgressDialog.show(context, "",
                "Image loading", true);
    }

    protected Bitmap doInBackground(String... urls) {
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        //bmImage.setImageBitmap(result);
        progressDialog.dismiss();
        someMethod(result);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:18:06.503

您可以拦截事件，并使用方法`onBackKeyPressed`取消任务。`cancel`

请参阅该链接： [取消正在执行的 AsyncTask 的理想方法](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:28:12.693

使用可取消的进度对话框，将取消侦听器传递给进度对话框并取消该方法中的任务，例如

```
protected void onPreExecute() {
    progressDialog = ProgressDialog.show(activity, "Searching files", "Scanning...", true, true,
            new DialogInterface.OnCancelListener() {
                @Override
                public void onCancel(DialogInterface dialog) {
                    // When dialog in cancelled, need to explicitly cancel task otherwise it keeps on running
                    cancel(true);
                }
            }
    );

    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:20:05.833

您可以尝试使用 a `ProgressDialog`which is `cancelable`。这是该方法的签名：-

```
public static ProgressDialog show (Context context, CharSequence title, CharSequence message, boolean indeterminate, boolean cancelable) 
```

# python - 当我尝试调用一个对象方法时，我得到了一个意想不到的答案

> ID：15366433
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:17.280
> 
> 标签：python

我正在为 python 制作一个 twitch.tv API 包装器，当我运行以下代码时，`print (t.getstatus)`它会打印 :`<bound method twitchchannel.getstatus of <__main__.twitchchannel instance at 0x0198D3A0>>`而不是变量的值。我究竟做错了什么？

```
import urllib2
import json

class twitchchannel():
    def __init__ (self,channel):
        self.channel = channel
        url = 'https://api.twitch.tv/kraken/channels/' + channel
        dict1 = json.loads(urllib2.urlopen(url).read())
        self.status = dict1 ['status']
        self.display_name = dict1 ['display_name']
        self.mature = dict1 ['mature']
        self.chanurl = dict1 ['url']
        self.created_at = dict1 ['created_at']
        self.teams = dict1 ['teams']
        self.game = dict1 ['game']
        self.updated_at = dict1 ['updated_at']
        print dict1
    def getstatus(self):
        return self.status

t = twitchchannel('ethotv')

print (t.getstatus)
print (t.status) #This works 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:17:18.877

您需要*调用*该`t.getstatus()`方法：

```
print (t.getstatus()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:17:33.230

你应该像函数一样调用函数:)

```
 print (t.getstatus()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:17:51.847

试试`print (t.getstatus())`。注意额外的括号。您收到的消息本质上是指向该方法`getstatus`所在的地址 ( `instance at 0x0198D3A0`)。原因`status`是因为它不是一种方法。

# python - Amazon SQS - 服务器之间的通信 URL

> ID：15366434
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:19.073
> 
> 标签：python, amazon-web-services, command-line, amazon-sqs

我想知道是否可以在 Amazon SQS 方面获得一些帮助。在我的示例中，我试图在服务器 A 上设置一个队列并从服务器 B 查询它。我遇到的问题是，当我在服务器 A 上创建一个队列时，它为我提供了这样的 URL：

```
https://sqs.us-east-1.amazonaws.com/599169622985/test-topic-queue 
```

然后在我的另一台服务器上，我显然需要查询此 URL 以获取有关队列的信息。问题是，我的服务器 B 不知道我在服务器 A 上创建的 URL。这似乎有点缺陷，我真的需要找到一种方法在服务器 B 连接之前将 URL 传递给它吗队列，如果是这样，是否有人对此有任何好的解决方案？

我试过在亚马逊上问，没有得到任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:50:22.730

当然，服务器 A 和 B 必须共享有关队列的某种信息。如果不是完整的 URL，您可以共享名称，并使用 GetQueueUrl API 端点检索服务器 B 上的队列 URL：

[http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/Query_QueryGetQueueUrl.html](http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/Query_QueryGetQueueUrl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:43:24.130

队列应该像任何其他资源（缓存、数据存储等）一样对待，并在某种类型的应用程序配置文件中提前定义。

如果您的用例涉及定期更改的队列端点，那么您可能希望将队列端点存储在两个实例都可以检查的地方。它可能是一个数据库，也可能是从 s3 中提取的配置文件。

# asp.net-mvc - 如何使 WebAPI 操作只能从我的应用程序访问？

> ID：15366436
> 
> 赞同：13
> 
> 时间：2013-03-12T16:15:22.823
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, security

WebAPI 的一个常见用例是让 MVC 控制器呈现 shell 视图，其中包含然后命中您的 API 以访问数据的 javascript。

但是，假设您有一些昂贵的 API 操作，并且您不希望人们远程访问这些端点——您只希望由您的应用程序提供的 MVC 视图访问它们。你怎么能保护他们？

在这种情况下`Request.IsLocal`不起作用，因为 javascript 正在从他们机器上的客户端浏览器调用它。即使它确实有效，您也需要深入挖掘`HttpContext`才能找到此属性——而该解决方案在自托管 WebAPI 中不起作用。

对于需要有效的 API 端点，您可以使用属性`IPrincipal`保护它们。`[Authorize]`但是，您希望您的应用程序能够为匿名用户访问的 API 端点呢？

我已经尝试了一个解决方案，并将其作为答案单独发布，因为我不确定它是否是最好的（甚至是好的）方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:21:01.410

如果您的 MVC 站点使用身份验证，您可以为您的 Web API 方法启用表单身份验证。您可以编写一个自定义`[Authorize]`属性，该属性将检查表单身份验证 cookie 是否存在，该 cookie 将从 AJAX 调用发送，如果存在则构造主体。

另一种可能的解决方案是保护您的 API，[`tokens`](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)它是一种更 RESTful 风格的。这里的想法是，当用户在您的 MVC 网站上进行身份验证时，您可以生成令牌并将其传递给视图，该令牌将在向 Web API 发送 AJAX 请求时使用，这反过来将验证令牌及其签名的有效性。

另一方面，如果您的站点不使用身份验证，那么事情将变得非常复杂，因为您无法知道请求是否来自受信任的客户端，因为您使用 javascript 来调用您的 API 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:23:01.567

在您谈论“您尝试过什么”之前，这是我尝试过的。有用。只是不确定是否有更好的方法。

1.  创建一个 MVC 操作过滤器并将其添加为`Application_Start`.

2.  创建一个 Http (WebAPI) 操作过滤器并将其用于应拒绝远程请求的操作。

全局 MVC 过滤器执行以下操作：

1.  在请求中查找特定的 cookie。如果 cookie 在那里，它的值被解密。解密后的值应该是 a 的字符串表示形式`DateTime`，因此请使用`DateTime.TryParse`它来获取。如果该值被正确解析为 a `DateTime`，并且`DateTime`还不到一天，请在此处停止并且不执行任何其他操作。

2.  如果 cookie 不存在，或者无法解密/解析，或者超过一天，则将新的 cookie 写入浏览器。使用当前`DateTime.UtcNow.ToString()`作为值，对其进行加密，并用`HttpOnly = false`.

WebAPI 过滤器执行以下操作：

1.  在请求中查找特定的 cookie。如果 cookie 存在，请解密其值并尝试将其解析为`DateTime`.

2.  如果该值是有效的`DateTime`并且小于 2 天，请在此处停止并且不执行任何其他操作。

3.  否则，抛出 403 Forbidden 异常。

关于我当前的实现的一些注意事项。首先，我使用带有共享密钥和盐的 AES 加密。共享密钥存储为`appSetting`web.config 中的一个。对于盐，我启用了匿名识别并用作`Request.AnonymousID`盐。我并不完全喜欢 salt，因为在 WebAPI 控制器中使用它会比较棘手，但只要它不是自托管的，也不是不可能的。

# ffmpeg - ffmpeg：哪些函数是多线程安全的？

> ID：15366441
> 
> 赞同：9
> 
> 时间：2013-03-12T16:15:35.733
> 
> 标签：ffmpeg

我已经读过（在某个地方，现在不记得并找到它了——也许这个问题对我来说已经过时了），一些 FFmpeg 函数不能安全地同时从多个线程调用。

FFmpeg 本身不是多线程安全的，因为您不应该同时从不同线程调用`av_read_frame`或`avcodec_decode_audio4`在同一上下文中调用 - 但这很明显。

但是例如，`avformat_find_stream_info`即使在不同的上下文中，同时从不同的线程调用似乎也不安全。所以为了保证安全，你需要一个全局互斥锁。

是否有不安全的功能列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T16:39:09.617

我发现的一些讨论：[这里](http://libav-users.943685.n4.nabble.com/Threads-safe-issue-with-ffmpeg-c-td945683.html)或[这里](http://ffmpeg.org/pipermail/libav-user/2011-November/000892.html)

从我到目前为止发现的情况来看，它似乎只是线程安全的`avcodec_open`并且`avcodec_close`不是线程安全的。

但是，正确的解决方案似乎是使用`av_lockmgr_register`在 FFmpeg 中注册一个互斥处理程序，然后 FFmpeg 在需要的位置自动调用该处理程序。见[这里](http://ffmpeg.sourcearchive.com/documentation/0.6/avcodec_8h_e120ec60cdf49cf0f793eff3ec731bcc.html#e120ec60cdf49cf0f793eff3ec731bcc)或[这里](http://www.mail-archive.com/libav-user@mplayerhq.hu/msg03730.html)。Chrome 也这样做，请参见[此处](http://src.chromium.org/svn/branches/1229_12/src/media/filters/ffmpeg_glue.cc)。

# android - 如何在android中突出显示图像

> ID：15366445
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:40.700
> 
> 标签：android

我的 Android 应用程序必须显示包含从服务器下载的 16 个部分（例如人体）的图像，用户可以触摸该图像的某些特定部分（例如头部或胃），并且该部分必须突出显示某种方式（例如，通过在图像周围显示一个深色透明层，以便高亮图像可以清楚地看到）那么我如何在仍然加载其他图像时突出显示图像。我可以从 2.1OS 支持它吗？提前致谢 ！对不起我糟糕的英语！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:21:33.503

如果您的大图像存在于较小的图片中，Java 有一个名为`MosaicDescriptor`

“马赛克”操作创建两个或多个源图像的马赛克。该操作可用于例如将一组重叠的地理空间校正图像组合成连续图像。它还可以用于创建照片的蒙太奇，例如全景图。

假设所有源图像都已几何映射到公共坐标空间。因此，每个图像的原点 (minX, minY) 被用来表示相应图像在源图像的公共坐标系中的位置。该坐标空间也将是目标图像的坐标空间。

[**细节和参考**](http://docs.oracle.com/cd/E17802_01/products/products/java-media/jai/forDevelopers/jai-apidocs/javax/media/jai/operator/MosaicDescriptor.html)

# ubuntu - 在 Ubuntu 指示器应用程序中插入文本而不是图标

> ID：15366447
> 
> 赞同：1
> 
> 时间：2013-03-12T16:15:44.703
> 
> 标签：ubuntu, indicator

我想使用 mono c# 开发一个指标应用程序。我想在指示器中显示文本而不是图标，我该怎么做？

# openmp - OpenMP 集成执行

> ID：15366448
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:45.287
> 
> 标签：openmp, fortran90

我是 OpenMP 的新手，目前无法访问我可以查看详细信息的工作站。在着手进行部分操作之前，有一个快速的问题来设置基础知识。

假设我有一个用 FORTRAN90 编写的串行程序，它通过迭代演化一个映射并在演化后给出变量的最终值，代码如下所示：

```
 call random_number(xi) !! RANDOM INITIALIZATION OF THE VARIABLE
 do i=1,50000  !! ITERATION OF THE SYSTEM
  xf=4.d0*xi*(1.d0-xi) !! EVOLUTION OF THE SYSTEM
  xi=xf
 enddo     !! END OF SYSTEM ITERATION
print*, xf 
```

我想针对 100 个不同的随机初始条件在集群上运行与独立进程相同的代码，并查看输出如何随初始条件而变化。用于此目的的串行程序如下所示：

```
do iter=1,100 !! THE INITIAL CONDITION LOOP
 call random_number(xi) !! RANDOM INITIALIZATION OF THE VARIABLE
 do i=1,50000  !! ITERATION OF THE SYSTEM
  xf=4.d0*xi*(1.d0-xi) !! EVOLUTION OF THE SYSTEM
  xi=xf
 enddo     !! END OF SYSTEM ITERATION
print*, xf 
```

我能想到的 OpenMP 实现会起作用吗？我能想出的代码如下：

```
!$ OMP PARALLEL PRIVATE(xi,xf,i)
!$ OMP DO
  do iter=1,100 !! THE INITIAL CONDITION LOOP
   call random_number(xi) !! RANDOM INITIALIZATION OF THE VARIABLE
    do i=1,50000  !! ITERATION OF THE SYSTEM
     xf=4.d0*xi*(1.d0-xi) !! EVOLUTION OF THE SYSTEM
     xi=xf
    enddo     !! END OF SYSTEM ITERATION
  print*, xf
!$ OMP ENDDO
!$ OMP END PARALLEL 
```

提前感谢您的任何建议或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:51:36.587

我认为这条线

```
 call random_number(xi) !! RANDOM INITIALIZATION OF THE VARIABLE 
```

可能会导致一些问题。您的系统上的实现是`random_number`线程安全的吗？我一无所知，我对您的编译器或操作系统一无所知。如果它不是线程安全的，那么当 OpenMP 线程都开始使用随机数生成器时，您的程序可能会做很多事情；这些事情包括崩溃或死锁。

如果实现是线程安全的，您将想弄清楚如何确保线程要么生成或不生成相同的随机数序列。编写在每个线程中使用相同随机数或在不同线程中使用不同序列的程序是完全明智的，但你应该弄清楚你得到的就是你想要的。

如果随机数生成器是线程安全的并且为每个线程生成不同的序列，那么这些序列是否通过了单线程随机数生成器可能通过的那种随机性测试？

在并行程序中生成适当独立的伪随机数序列是相当棘手的；当然不是我可以在 SO 答案的空间中涵盖的内容。

虽然您想出了一个可能有帮助的解决方法，但它可能是在代码的顺序部分中生成您需要的所有随机数（可能是到一个数组中），并让不同的线程从数组中读取不同的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:56:41.770

> 我想在集群上运行与独立进程相同的代码

那么你不想要 OpenMP。OpenMP 是关于**在单个地址空间内**利用并行性。

我建议你看看 MPI，如果你想在集群上操作

# ruby - 如何使用“each”方法从 ActiveRecord 对象数组中检索值数组？

> ID：15366450
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:46.627
> 
> 标签：ruby, arrays, ruby-on-rails-3.2

我正在尝试使用 Rails 执行此非基本查询：

```
proj_repartitions = ProjRepartition.includes(:proj_contributions).find( proj_project.proj_charges.each{|pc| pc.proj_repartition_id} ) 
```

关键是我需要将一个“ids”数组传递给该`find`方法。我想从 ActiveRecord 对象数组中提取这些“id”，其中每个对象都配备了“id”属性。

当我在 Rails 控制台上尝试时：

```
proj_project.proj_charges.each{|pc| pc.proj_repartition_id} 
```

我得到了完全相同的数组`proj_project.proj_charges`

我究竟做错了什么？

=== 更新 ===

根据答案，**我的最终工作代码是**：

```
proj_project.proj_charges.collect{|pc| pc.proj_repartition_id} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:20:40.067

而不是使用每个尝试映射或收集 - 他们应该返回一个数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:33:11.533

每个只为每个项目执行 do 块代码，但不“保存”返回值。

Collect and Map 为每个项目执行 do 块代码并返回数组中的值。

希望这是有道理的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:39:06.150

```
proj_project.proj_charges.map(&:proj_repartition_id) 
```

简短的写作方法

```
proj_project.proj_charges.map{|pc| pc.proj_repartition_id} 
```

# ios - 在使用一组图像制作动画时，我应该考虑 iPad 4 的哪些限制？

> ID：15366451
> 
> 赞同：0
> 
> 时间：2013-03-12T16:15:47.300
> 
> 标签：ios, ipad, animation, uiimageview

这就是我想要做的事情：我想要一个显示全屏图像的应用程序，并通过滑动 UISlider 使该图像动画化。不断变化的滑块值将通过创建动画的数组的图像进行排序。该动画是转台上的单个角色。当滑块更改值时，角色看起来好像正在围绕转盘旋转。

该项目是 3D 艺术家的作品集。艺术家给了我一系列 180 张以全屏视网膜分辨率渲染的角色图像。他还额外提供了 180 张以非视网膜全屏分辨率渲染的图像。这个想法是，当有人在视网膜 iPad 上从任何角度观看他的角色时，他们可以使用 UISwitch 在视网膜和非视网膜显示之间切换。下面发布的代码在模拟器上运行良好。

但是，在 iPad 4 上运行此代码时，它会运行一段时间，然后我会收到内存警告。然后它崩溃了。我假设有那么多这样大小的图像显示得和有人想要移动滑块一样快，这对于 iPad 4 来说太多了。

我很好奇在使用这样的图像时应该考虑哪些限制。180张图片太多了吗？什么是合理的金额？有没有更有效的方法来产生我想要的结果？我没有采用猜测和检查多少图像不会导致崩溃的方法，而是认为有人可能对我的问题有一些有用的见解。

```
@implementation RBViewController

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

_imageDisplay.image = [UIImage imageNamed:@"HyperReal_0.png"];

_arrayRetina = [[NSMutableArray alloc] initWithCapacity:180];
_arrayNormal = [[NSMutableArray alloc] initWithCapacity:180];

for(int i = 0; i < 179; i++)
{
    NSString *myImageString = [[NSString alloc] initWithFormat:@"HyperReal_%i.png", i];
    UIImage *myImageGraphic = [UIImage imageNamed:myImageString];
    [_arrayRetina addObject:myImageGraphic];
}

for(int i = 0; i < 179; i++)
{
 NSString *myImageString = [[NSString alloc] initWithFormat:@"lameHyperReal_%i.png", i];
    UIImage *myImageGraphic = [UIImage imageNamed:myImageString];
    [_arrayNormal addObject:myImageGraphic];
}
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)switchButton:(id)sender {

if (_switchOnForRetina.isOn == YES)
{
    _imageDisplay.image = [_arrayRetina objectAtIndex:_sliderBar.value];
}
else
    _imageDisplay.image = [_arrayNormal objectAtIndex:_sliderBar.value];

}

- (IBAction)changeSlider:(id)sender {

if (_switchOnForRetina.isOn == YES)
{

_imageDisplay.image = [_arrayRetina objectAtIndex:_sliderBar.value];
}
else

_imageDisplay.image = [_arrayNormal objectAtIndex:_sliderBar.value];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:03:06.280

预缓冲内存开销大致为：

((2048*1536*4 + 1024*768*4)*180)/1024/1024/1024 = 2.63671875 千兆字节

即使正在进行一些地下优化，您的 iPad 也没有足够的内存来安全地运行该程序。

作为解决崩溃的方法，不要预加载所有图像，而只需加载所需的图像

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [ self changeSlider: nil ];
}

- (IBAction)changeSlider:(id)sender {

    if (_switchOnForRetina.isOn == YES)
    {
        _imageDisplay.image =   nil;
        NSString*   pResourcePath   =   [ [ NSBundle mainBundle ] pathForResource: [ NSString stringWithFormat: @"HyperReal_%i", ( int )_sliderBar.value ] ofType: @"png" ];
        _imageDisplay.image =   [ UIImage imageWithContentsOfFile: pResourcePath  ];
    }
    else
    {
        _imageDisplay.image =   nil;
        NSString*   pResourcePath   =   [ [ NSBundle mainBundle ] pathForResource: [ NSString stringWithFormat: @"lameHyperReal_%i", ( int )_sliderBar.value ] ofType: @"png" ];
        _imageDisplay.image =   [ UIImage imageWithContentsOfFile: pResourcePath ];
    }
} 
```

这里更好的解决方案是从您的图像序列中创建 2 个 h264 电影

一个在前向动画顺序，第二个在后向动画顺序

然后根据滑块动画播放正确的电影

当然，这还有很多工作。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:52:19.000

我不太确定为什么您需要以编程方式在 Retina 和非 Retina 之间切换，因为 @2x 处理得非常好，但我假设有一个我不熟悉的用例，并将其保留在那里。

关于内存使用，我们正在开发具有类似功能的应用程序，我们的解决方案是使用引用所有单个帧的图像名称（或文件路径）的字符串填充数组。在您的情况下，您将存储引用`myImageString`而不是`myImageGraphic`.

然后，当您拖动滑块时，您将使用如下内容：

```
- (IBAction)changeSlider:(id)sender
{
    if (_switchOnForRetina.isOn == YES)
        _imageDisplay.image = [UIImage imageNamed:[_arrayRetina objectAtIndex:_sliderBar.value]];
    else
        _imageDisplay.image = [UIImage imageNamed:[_arrayNormal objectAtIndex:_sliderBar.value]];
} 
```

另外一点，我们使用[这个帖子](https://stackoverflow.com/questions/2907780/img-data-lock-iphone-imagenamed-vs-imagewithcontentsoffile)`imageWithContentsOfFile`是因为内存使用量较低，尽管在这种情况下缓存可能会有所帮助。`imageNamed`

编辑：

正如麦克拉格所指出的，上述方法仅在修饰时发生变化。这是我正在使用的示例，尽管我`UIGestureRecognizer`在 UIView 上使用以向方法发送百分比而不是依赖滑块。

```
- (void)dragPosition:(float)myPercent
{
    NSInteger index = (self.images.count - 1) * myPercent;
    NSString *imageName = [self.images objectAtIndex:index];
    NSString *imagePath = [[NSBundle mainBundle] pathForResource:imageName ofType:@"jpg"];
    self.image = [UIImage imageWithContentsOfFile:imagePath];
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:48:40.483

不是一次将所有 180 个图像加载到一个数组中，您不能实例化在滑块的连续 UIContolEventValueChanged 事件期间要显示的当前图像吗？

创建滑块

```
UISlider *slider = [[UISlider alloc] initWithFrame:CGRectMake(0, 0, 155, 20)];
slider.continuous = YES;
slider.value = 0.0f;
slider.minimumValue = 0.0f;
slider.minimumValue = 179.0f;
[slider addTarget:self action:@selector(handleContinuousSlider:) forControlEvents:UIControlEventValueChanged]; 
```

处理它的持续变化事件

```
- (void)handleContinuousSlider:(UISlider *)slider {
    //create a UIImage with file name that makes the current integer value of the slider
    NSString *myImageString = [[NSString alloc] initWithFormat:@"HyperReal_%i.png", slider.value];
    UIImage *myImageGraphic = [UIImage imageNamed:myImageString];

   //I assume this is a UIImageView
   [_imageDisplay setImage:myImageGraphic];

   [myImageGraphic release];
} 
```

# python - WTForms 如何使用在错误输入时生成正确字段错误的 DecimalField

> ID：15366452
> 
> 赞同：1
> 
> 时间：2013-03-12T16:15:54.277
> 
> 标签：python, wtforms, type-coercion

看看这个例子

```
class MyForm(ForM):
    ...snip...
    quantity = DecimalField(u'Quantity', [NumberRange(1, 8)])
    ...snip... 
```

如果用户合作并输入可以强制转换为数字类型的内容，这会很好地工作。但是，如果用户在浏览器的此字段中输入“asdf”，然后当我尝试在浏览器中呈现它时`DecimalField`会抛出一个。`Type Error`

以下是回溯的相关部分：

```
Traceback (most recent call last):
    File "/path/to/app/venv/local/lib/python2.7/site-packages/jinja2/environment.py", line 894, in render
      return self.environment.handle_exception(exc_info, True)
    File "/path/to/app/www/templates/submodule/user/submission.html", line 26, in block "submodule_content"
      {{form.quantity}}
    File "/path/to/app/venv/local/lib/python2.7/site-packages/wtforms/fields/core.py", line 139, in __call__
      return self.widget(self, **kwargs)
    File "/path/to/app/venv/local/lib/python2.7/site-packages/wtforms/widgets/core.py", line 123, in __call__
      kwargs['value'] = field._value()
    File "/path/to/app/venv/local/lib/python2.7/site-packages/wtforms/fields/core.py", line 542, in _value
      return format % self.data
TypeError: a float is required 
```

而不是这种行为，我希望该字段自身添加一个错误，以便我仍然可以渲染 t.

我当前的解决方案涉及使用 a`TextField`而不是 a`DecimalField`并为`IsNumeric`验证器提供如下调用方法：

```
def __call__(self, form, field):
    if field.data:
        try:
            field.data = float(field.data)
        except ValueError as e:
            raise ValidationError(self.message) 
```

这几乎完美地工作，并且是我目前的解决方案，但肯定必须有一种 wtforms 惯用的方式来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:33:14.447

我不得不处理类似的问题。`SelectMultipleField`with `coerce=text_type`（这是默认的 kwarg）将输入数据转换为`str`/ `unicode`。这意味着它“强制” `None`（当用户没有选择任何内容时输入我的字段的值）进入`"None"`- 这是调试的巨大痛苦。您的问题清楚地表明，不仅仅是我参与了 wtforms 内部验证过程。

我找到的正确解决方案是，您编写一个自定义子类`StringField`(textfield) 和 override `__call__`, `process_data`, 和`process_formdata`方法以满足您的需求。`__call__`用于将它们呈现为 html（应由另一个`widget`可调用对象完成），`process_data`通常用于从 python 对象（这意味着服务器端）获取数据，除了它处理用户提交的表单外，其他`process_formdata`类似。`process_data`或者，如果您想要 DRY（不要重复自己），您可以覆盖`__init__`并使您的自定义验证器成为默认值。

编辑：

的`DecimalField`白痴代码是什么原因造成的`TypeError`。看一下它的`_value()`方法，它被`DecimalField`的渲染小部件用来获取 X 的`<input type="text" ... value=X>`

```
def _value(self):
    if self.raw_data:
        return self.raw_data[0]
    elif self.data is not None:
        if self.places is not None: # <-- this line brings you the pain
            if hasattr(self.data, 'quantize'):
                exp = decimal.Decimal('.1') ** self.places
                if self.rounding is None:
                    quantized = self.data.quantize(exp)
                else:
                    quantized = self.data.quantize(exp, rounding=self.rounding)
                return text_type(quantized)
            else:
                # If for some reason, data is a float or int, then format
                # as we would for floats using string formatting.
                format = '%%0.%df' % self.places
                return format % self.data
        else:
            return text_type(self.data)
    else:
        return '' 
```

它在创建字段时声明-`field.places`的类型之前进行检查，并且只是说您需要 N 位精度；它并不表示您有 N 位作为您的，但是 wtforms 开发人员以某种方式决定检查足以假设该字段包含相应的浮点数。（代码检查是否有属性，但仅适用于小数）`field.data``field.places``Decimal``fields.data``field.places``quantize``field.data`

我认为您必须编写自己的`DecimalField`. 这是我写一个非白痴版本的尝试`DecimalField`：

```
from wtforms.fields.core import DecimalField as _DecimalField

class DecimalField(_DecimalField):
  def _value(self):
    try:
      float(self.data) #check whether you have a 'number'
      return super(DeciamlField, self)._value()
    except (TypeError, ValueError): #self.data is 'None', 'asdf' ...
      return text_type(self.data) if self.data else '' 
```

# c# - 使用多个或涉及相同变量的简化 if 语句？

> ID：15366458
> 
> 赞同：3
> 
> 时间：2013-03-12T16:16:12.653
> 
> 标签：c#

假设我有一个这样的 if 语句：

```
if (a > x || b > x || c > x || d > x) {} 
```

假设它总是涉及相同的重复变量（在本例中为 x）和相同的操作，但所有使用之间的操作并不相同。例如，另一个 if 语句可能使用：

```
if (x.Contains(a) || x.Contains(b) || x.Contains(c) || x.Contains(d)) {} 
```

有没有办法在 C# 中简化这些 if 语句，这样我们就不会一遍又一遍地输入相同的东西？我不想为这个实例调用额外的函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:18:41.650

您可以使用 LINQ，但如果您只有四个条件，它认为它不是很有用：

```
if (new[] {a,b,c,d}.Any(current => current > x)) 
```

和

```
if (new[] {a,b,c,d}.Any(current => x.Contains(current))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:19:54.513

您可以使用 Linq 的[`Any`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)方法将`||`多个条件一起使用。

```
var tests = new int[] { a, b, c, d };

if (tests.Any(y => y > x)) { }

if (tests.Any(y => x.Contains(y))) { } 
```

顺便说一句，如果您需要同时使用多个条件`&&`，您可以使用[`All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx).

```
if (tests.All(y => y > x)) { }

if (tests.All(y => x.Contains(y))) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:34:44.687

没有什么能阻止您进行自己的扩展以使事情变得更清晰；

```
public static class LinqExtension
{
    public static bool ContainsAny<TInput>(this IEnumerable<TInput> @this, IList<TInput> items)
    {
        return @this.Any(items.Contains);
    }
} 
```

# java - 为 jar 文件设置 Launch4j 的说明

> ID：15366461
> 
> 赞同：8
> 
> 时间：2013-03-12T16:16:18.980
> 
> 标签：java, launch4j

我在 U:/myproject 中创建了我的项目，其中所有 java 的东西都安装在 C: Drive 中。我通过 netbeans 创建的 jar 文件在 u:/myproject/dist/myproject.jar 中。有人可以向我提供如何设置launch4j的干净说明吗？我必须先创建一个.exe文件吗？

或者如果我只是签署 jar 文件，我会得到这个错误

```
output.exe is not a valid win32 application 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T16:20:18.167

使用 Launch4J 可以非常简单。你只需要你的 .JAR 文件来获取你的 .EXE

我通常为我的项目做最少的步骤：

1) 构建程序

2）在第一页中将.JAR文件的路径提供给Launch4j

3）在第一页设置.EXE文件和.XML结果文件的输出

4）在“JRE”页面，设置最小JRE版本（例如：1.1.0）

5) 执行！！！

它应该提供一个好的 .exe 文件。

希望这可以帮助 ！

# iphone - Objective-C 中的“推”动画

> ID：15366465
> 
> 赞同：8
> 
> 时间：2013-03-12T16:16:29.087
> 
> 标签：iphone, ios, objective-c, core-animation

我有两个视图：A 和 B。A 位于屏幕顶部，B 位于屏幕底部。

当用户按下按钮时，视图 B 会以 EaseInEaseOut 贝塞尔曲线向上动画，直到到达 y = 0。当 B 正在前往目的地的途中，它应该在碰到 A 时将 A 向上推。换句话说，当 B 有在从底部到顶部的过渡过程中通过了某个 y 坐标（A 的 y 原点 + 高度），A 应该粘在 B 上，所以看起来 B 将 A 向上推。

到目前为止我已经尝试过：

*   用户按下按钮后立即将目标 + 选择器注册到 CADisplayLink。在这个选择器中，通过访问它的presentationLayer 请求视图B 的y 坐标，并相应地调整A 的y 坐标。但是，这种方法结果不够准确：presentationLayer 的帧落后于 B 在屏幕上的当前位置（这可能是因为 -presentationLayer 重新计算了动画视图在当前时间的位置，这需要超过 1 帧） . 当我增加 B 的动画持续时间时，这种方法效果很好。
*   用户按下按钮后立即将目标 + 选择器注册到 CADisplayLink。在此选择器中，通过求解贝塞尔方程 x = 经过时间/动画持续时间（应返回行进距离商/总距离）来计算 B 的当前 y 坐标。为此，我使用了 Apple 的开源 UnitBezier.h ( [http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h](http://opensource.apple.com/source/WebCore/WebCore-955.66/platform/graphics/UnitBezier.h) )。然而，结果并不正确。

关于下一步我可以尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:13:21.403

两个简单的解决方案：

1.  仅使用`animationWithDuration`：您可以将动画分成两个嵌套动画，使用“ease in”为“B”向上移动到“A”设置动画，然后使用“ease out”为“B”和“A”的移动设置动画“剩下的路。这里唯一的技巧是确保这两个`duration`值有意义，这样动画的速度就不会发生变化。

    ```
    CGFloat animationDuration = 0.5;
    CGFloat firstPortionDistance = self.b.frame.origin.y - (self.a.frame.origin.y + self.a.frame.size.height);
    CGFloat secondPortionDistance = self.a.frame.size.height;
    CGFloat firstPortionDuration = animationDuration * firstPortionDistance / (firstPortionDistance + secondPortionDistance);
    CGFloat secondPortionDuration = animationDuration * secondPortionDistance / (firstPortionDistance + secondPortionDistance);

    [UIView animateWithDuration:firstPortionDuration
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         CGRect frame = self.b.frame;
                         frame.origin.y -= firstPortionDistance;
                         self.b.frame = frame;
                     }
                     completion:^(BOOL finished) {
                         [UIView animateWithDuration:secondPortionDuration
                                               delay:0.0
                                             options:UIViewAnimationOptionCurveEaseOut
                                          animations:^{
                                              CGRect frame = self.b.frame;
                                              frame.origin.y -= secondPortionDistance;
                                              self.b.frame = frame;

                                              frame = self.a.frame;
                                              frame.origin.y -= secondPortionDistance;
                                              self.a.frame = frame;
                                          }
                                          completion:nil];
                     }]; 
    ```

2.  您可以让`animateWithDuration`处理“B”的完整动画，然后使用`CADisplayLink`和使用`presentationLayer`来检索 B 的当前`frame`并相应地调整 A 的帧：

    ```
    [self startDisplayLink];
    [UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         CGRect frame = self.b.frame;
                         frame.origin.y = self.a.frame.origin.y;
                         self.b.frame = frame;
                     }
                     completion:^(BOOL finished) {
                         [self stopDisplayLink];
                     }]; 
    ```

    其中启动、停止和处理显示链接的方法定义如下：

    ```
    - (void)startDisplayLink
    {
        self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
        [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    }

    - (void)stopDisplayLink
    {
        [self.displayLink invalidate];
        self.displayLink = nil;
    }

    - (void)handleDisplayLink:(CADisplayLink *)displayLink
    {
        CALayer *presentationLayer = self.b.layer.presentationLayer;

        if (presentationLayer.frame.origin.y < (self.a.frame.origin.y + self.a.frame.size.height))
        {
            CGRect frame = self.a.frame;
            frame.origin.y = presentationLayer.frame.origin.y - self.a.frame.size.height;
            self.a.frame = frame;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T18:26:09.410

您说您尝试了“动画 B 并使用显示链接更新 A”技术，它导致“A”落后于“B”。理论上，您可以为新视图“C”设置动画，然后在显示链接中相应地调整 B 和 A 的帧，这应该消除任何滞后（相对于彼此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:22:01.517

您可以尝试以下算法：

1）把A和B放在UIView中（即UIview *gropedView）

2）更改 By 直到它等于 A.y+A.height（所以 B 将在 A 下方）

3）动画分组视图

# android - Android 使用 Intent.ACTION_INSTALL_PACKAGE 启动 Activity 并且额外的返回结果不返回

> ID：15366472
> 
> 赞同：4
> 
> 时间：2013-03-12T16:16:35.733
> 
> 标签：android, android-intent

我正在尝试对我正在编写的应用程序进行编程更新，因为它不是 Google Play 应用程序，我想提供一种进行更新的方法。

我一直在四处寻找，发现在下载更新的 APK 后如何启动 Android 安装程序，但我需要从安装程序中获取结果，告诉我更新是否成功，或者是否被取消由用户。

我在 StackOverflow 上看到了很多关于此的问题，而答案通常涉及使用广播接收器。这样做的问题是它只能接收关于正在安装的包的意图，而不是关于取消安装失败的意图。

我做了一些更多的研究，似乎 Intent API 提供了一些额外功能，例如 Intent.EXTRA_RETURN_RESULT，如果设置为 true，则应该返回安装程序活动的结果——我猜是通过 onActivityResult。不幸的是，这不起作用。有没有人让这个工作/它像这样工作？

这是我目前拥有的准备安装程序活动开始的代码：

```
 Intent installApp = new Intent(Intent.ACTION_INSTALL_PACKAGE);
            installApp.setData(downloadedApk);
            installApp.putExtra(Intent.EXTRA_NOT_UNKNOWN_SOURCE, true);
            installApp.putExtra(Intent.EXTRA_RETURN_RESULT, true);
            installApp.putExtra(Intent.EXTRA_INSTALLER_PACKAGE_NAME, context.getApplicationInfo().packageName);
            context.startActivityForResult(installApp, 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:17:27.490

你使用片段吗？onActivityResult 将从您调用 startActivity(...) 的 Activity 或 Fragment 中调用。Fragment#startActivity(...) 确实存在。使用它来调用 Fragment 的 onActivityResult(...)。如果您不使用 Fragments，此解决方法将起作用。

**解决方法伪代码**

```
// CURRENT_VERSION is a const with the current APK version as int

Activity#onStart() {
  super.onStart();
  checkForUpdaterResult();
  /*...*/
}

Activity#checkForUpdaterResult() {
  final int updateVersion = preferences.getInt(UPDATE_VERSION, -1);
  switch(updateVersion) {
    case -1:break;
    default: 
      // updateVersion = oldVersion is smaller than the new currentVersion
      boolean success = updateVersion < CURRENT_VERSION;
      onUpdaterPerformed(success, updateVersion , CURRENT_VERSION); 
    break;
  }
}

Activity#startUpdate(File pAPK) {
  perferences.putInt(UPDATE_VERSION, CURRENT_VERSION);
  /*...*/
}

Activity#onUpdaterPerformed(boolean pSuccess, int pFromVersion, int pToVersion) {
  Toast.show("Update success: " + pSuccess);
  /* e.g. migrate DB */
  /*...*/
} 
```

# mysql - 数据库设计 - 如何构建

> ID：15366477
> 
> 赞同：0
> 
> 时间：2013-03-12T16:16:53.513
> 
> 标签：mysql, database-design, database-optimization

目前，我有一张桌子，而且它的填充速度非常快。我有 50 台设备。我每 30 秒从每个设备收集一次数据。因此，在我们添加 10,000 台设备后，它们每月将生成 876,000,000 条记录——这非常多！

```
INSERT INTO unit_data
(`id`,`dt`,`id_unit`,`data1`,`data2`,
`ip`,`unique_id`,`loc_age`,`reason_code`,
`data3`,`data4`,`Odo`,`event_time_gmt_unix`,
`switches`,`on_off`,`data5`) 
```

这是我的人际关系

```
 PRIMARY KEY (`id`),
  UNIQUE KEY `id_unit_data_UNIQUE` `id`),
  KEY `fk_gp2` (`id_unit`),
  KEY `unit_dt_id` (`dt`,`id_unit`),
  KEY `unit_id_dt` (`id_unit`,`dt`),
  CONSTRAINT `fk_gp2` FOREIGN KEY (`id_unit`) REFERENCES `unit` (`id_unit`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1049392 DEFAULT CHARSET=utf8$$ 
```

我面临着非常复杂的查询和报告，当我这样做时，我们的系统没有响应并达到执行超时。（这是超过 200 万条记录）

我需要重新思考和重新实现数据库结构。目前我正在考虑

*   为每个单元创建新表
*   为每个月的每个单位创建新表

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:52:33.807

创建新表是个好主意，但你不需要实现它，MySql 已经有这样的工具 - google 关键字“mysql+partitioning”。我建议使用它，因为您不需要更改查询，mysql 本身关心它。只需在您的创建表语句中添加“partition by”关键字即可。

给您的另一个技巧：我建议您将大量信息收集到某个大表中，并且有时还从中选择一些数据。但是插入许多新行会导致表被锁定（对选择不可用）并重建索引（我确定您的表已被索引）。在我当前的项目中，我正在做与您类似的事情，我建议您执行以下操作：

1) 创建 BIG-TABLE 的表克隆。它应该与 BIG-TABLE 具有相同的结构，但有一个区别 - 表克隆没有索引。

2）当您从设备接收数据时，将其放入表克隆中。

3）编写一些机器人代理，它将每小时或每天将小表中的记录放入大表中 - 这取决于你，但最好的情况是选择这样的间隔，表的大小将足够小以进行全扫描（记住，它未编入索引）。

4）当你想执行 SELECT 查询时，你在 2 个表中执行 - 在索引 BIG 表中 - 足够快，因为没有人尝试将数据插入其中（有时只有机器人这样做），并且在小表中进行全扫描 - 也足够快，因为你可以保持小。

5) 机器人应该在平静的时间 c- 可能在晚上醒来。

# ruby - 从ruby on rails中的变量中提取数据

> ID：15366480
> 
> 赞同：-2
> 
> 时间：2013-03-12T16:17:00.823
> 
> 标签：ruby

我在 ruby​​ on rails 中有一个变量，其中包含这个值 **8,375 TND**

```
_result = _orig_account.formatted_balance(_currency) 
```

我想是否可以消除**TND**，然后**将其余部分乘以 1000** ，以便得到**8375**

同一个人可以帮我解决这个问题吗

我尝试使用此代码：

```
I try with : _tes = _orig_account.formatted_balance().tr(',', '.').to_f
         _te = _tes * 1000 
```

结果是： **8375.0**

但正如我所说，我想要**8375**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:21:57.870

**更新**：就用这个`'8,375 TND'.tr(',', '').to_i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:23:32.870

这是一个简单的操作：

```
'8,375 TND'.tr(',', '.').to_f
=> 8.375 
```

乘以 1000。

# python - 如何获取仅包含一项的字典的键/值对？

> ID：15366482
> 
> 赞同：5
> 
> 时间：2013-03-12T16:17:02.193
> 
> 标签：python, python-3.x

假设我有 dict。我不知道里面的键/值。如何在不执行 for 循环的情况下获取此键和值（字典中只有一项）。

你可能想知道为什么我在这种情况下使用字典。我的 API 中到处都有字典，我不希望用户迷路。这只是一致性的问题。否则，我会使用列表和索引。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T16:19:15.893

为作业使用正确的数据类型。您的目标应该是拥有可行的代码，而不是到处使用相同的数据类型。

如果您的字典仅包含*一个*键和*一个*值，则可以通过索引获得：

```
key = list(d)[0]
value = list(d.values())[0] 
```

或同时获得：

```
key, value = list(d.items())[0] 
```

这些`list`调用是必需的，因为在 Python 3 中，`.keys()`,`.values()`和`.items()`返回 dict 视图，而不是列表。

另一种选择是使用序列解包：

```
key, = d
value, = d.values() 
```

或同时为两者：

```
(key, value), = d.items() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T16:20:27.470

只需使用迭代器获取字典中的第一项

```
>>> d = {"foo":"bar"}
>>> k, v = next(iter(d.items()))
>>> k
'foo'
>>> v
'bar' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:25:56.967

你可以这样做：

```
>>> d={1:'one'}
>>> k=list(d)[0]
>>> v=d[k] 
```

在 Python 2 或 3 中工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:18:40.480

`d.popitem()`会给你一个键值元组。

# css - CSS继承问题

> ID：15366503
> 
> 赞同：0
> 
> 时间：2013-03-12T16:17:40.437
> 
> 标签：css, inheritance

我有一条旧的 CSS 行优先于我的新`<img>`ID CSS 我该如何覆盖它？

我正在寻找更改灰色条内图像的宽度，并且无法使用新 ID 更改图像宽度。

这是我的代码：

```
#greybar img {
    width: 75px;
    float: left;
    margin: 10px;  
}    

#rpmimage { 
    width: 125px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:21:59.687

您需要查找 CSS Specificity。简而言之，不同的选择器得到不同的分数。

ID 值 100，Class 值 10，标签选择器值 1。

这意味着`#greybar img`价值 101，而`#rpmimage`价值 100。因此，第一个“获胜”。

许多人建议不要为 CSS 使用 ID，也不要在需要帮助的地方过度限定选择器。

在你的情况下，试试吧`#rpmimage img`，或者重新考虑你在用这些新知识做什么！

有各种各样的“坏事”要做，包括使用内联样式（就像你下次遇到问题时会记得你这样做了！），或使用`!important`. 问题`!important`是它优先于一切，这意味着下次遇到此问题时，您无处可去。

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)是一篇很棒的文章，里面有一些很好的实践，真的值得每个人阅读！

对于帮助理解更复杂选择器的好工具，请尝试[http://specificity.keegan.st/](http://specificity.keegan.st/) - 这可以让您测试诸如`#id:after p > img`查看它们具有什么特异性之类的东西。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T16:20:49.177

我认为你应该能够做一个内联样式，至少作为一个快速而肮脏的把戏。

例如：

```
<img style="width:75px;" ... > 
```

# codeigniter - 使用 CodeIgniter 从控制器编辑 file.php

> ID：15366504
> 
> 赞同：0
> 
> 时间：2013-03-12T16:17:45.140
> 
> 标签：codeigniter, fopen, fwrite

我需要从 CodeIgniter 中的控制器向文件中添加一些内容，在我的本地环境中我这样做并且工作正常：

```
$handle = fopen(APPPATH."config/file.php", "a+");
fwrite($handle, $stuff);

fclose($handle); 
```

但是，当它在生产环境服务器中运行时，该文件似乎没有改变。

起初我虽然可能是权限问题，但是*chmoding* 777 目录似乎也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:20:37.540

在我看来，APPPATH 指向的是不同的路径。确保 APPPATH 正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:02:48.203

愚蠢的我，我对包含文件的文件夹而不是文件本身进行了*chmoded 。*

# java - Java 中带有 String.format 的 UnknownFormatConversionException

> ID：15366505
> 
> 赞同：1
> 
> 时间：2013-03-12T16:17:48.060
> 
> 标签：java

为什么我收到以下方法的错误 java.util.UnknownConversionException: Conversion = 'D'。我创建了一个初始字符串，然后从一个方法返回它以执行 String.format。它发生在 String.format 中。

```
String url = StringUtils.join(new String[] { BASE_URL,
                "/location/inst/", slug,
                "/coursesections/number%s.json?apiKey=", apiKey,
                "&token=", GetAuthTokenEncoded(authToken) })

String url2 = String.format(url, ("/" + callNumber)); 
```

**StringUtils 的输出**

```
http://test.com/location/inst/testy/coursesections/number%s;.json?apiKey=dfsdfsdfsadfsdf&token=2.0%7Cidm%7Cidm%7Ctest%3Dbesrlin_50d4s9dd25dsee56f3a1e95fb4f%26berlin%3D50d49dd2e2f28cf450b0caa9f449%26campus%3Dberlin%3A50d49dd25ee56f3a1e95fb4f%7C2013-03-12T16%3A25%3A23%2B00%3A00%7C2013-03-12T19%3A25%3A23%2B00%3A00%7C09161a6011f2dc2e3443bc40b2d3f4b3d4f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:31:36.597

`GetAuthTokenEncoded(authToken)`包含`%`导致错误的全部负载。为什么不以加入其余字符串的相同方式附加 callNumber 呢？

```
String url = StringUtils.join(new String[] { BASE_URL,
            "/location/inst/", part,
            "/coursesections/number/", number, ".json?apiKey=", apiKey,
            "&token=", GetAuthTokenEncoded(authToken) }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:31:02.233

`url`由于 URL 转义，要格式化的字符串中有“%3D” 。您需要将结果`GetAuthTokenEncoded`作为参数提供给它，`String.format`这样它就不会将“%3D”解释为占位符。

```
String url = StringUtils.join(new String[] { BASE_URL,
            "/location/inst/", part,
            "/coursesections/number%s.json?apiKey=", apiKey,
            "&token=%s");
String url2 = String.format(url, ("/" + callNumber), GetAuthTokenEncoded(authToken)); 
```

# javascript - 从 DOM 中移除同级元素时创建块元素的平滑过渡

> ID：15366510
> 
> 赞同：9
> 
> 时间：2013-03-12T16:17:53.320
> 
> 标签：javascript, jquery, css, css-transitions

我有一个容器，它的工作方式类似于 mac os 中的通知 - 元素被添加到队列中，并在特定超时后被删除。这很好用，但有一个不和谐的视觉副作用。

当它们从 DOM 中移除时，UI 会出现锯齿状更新，因为堆栈中的下一个元素会填充由前一个元素创建的空白。我希望堆栈中的下面的元素平稳地向上移动到该空间，理想情况下使用 css3，但是当它的兄弟被删除时`transition: all 0.5s ease-in-out`，向`.notice`类添加 a 对对象没有影响。

最小的 JS 交互：

```
$('#add').click(function(e) {
    e.preventDefault();
    $('#container').append('<p class="notice">Notice #</p>');
});

$('body').on('click','p.notice', function(e) {
    $(this).fadeOut();
}); 
```

更好的是在这里摆弄：

[http://jsfiddle.net/kMxqj/](http://jsfiddle.net/kMxqj/)

我正在使用 MVC 框架对这些对象进行数据绑定，因此一些原生 css / jQuery 优于 Jq 插件。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T16:34:16.067

这应该会删除具有淡出效果的单击元素，然后将下面的所有内容平滑地向上移动。这将适用于堆栈中的任何`notice`div，无论它在堆栈中的位置如何。

尝试：

```
$('body').on('click','p.notice', function(e) {
    $(this).fadeOut(500,function(){
        $(this).css({"visibility":"hidden",display:'block'}).slideUp();
    });
}); 
```

[在这里](http://jsfiddle.net/kMxqj/17/)提琴

**2018 年 8 月 7 日更新：**

正如一位用户询问有关使用纯 JS 执行 slideUp 功能的问题，我整理了一个使用[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)为元素的高度设置动画的快速演示。小提琴可以在[这里](https://jsfiddle.net/darshanags/6uy3apwn)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:30:24.647

[jQuery 的 Animate() 方法](http://api.jquery.com/animate/)是一个很好的学习工具，因为您不仅可以淡入淡出对象，还可以同时移动它们。

CSS：

```
.notice {
    position:relative;
    top:20px;
    width: 100%;
    height: 50px;
    background-color: #ccc;
    opacity:0;
} 
```

jQuery：

```
$('#add').click(function(e) {
    e.preventDefault();
    $('#container').append('<p class="notice">Notice #</p>');
    $('.notice').animate({opacity: 1, top:0}, 1000);
});

$('body').on('click','p.notice', function(e) {
    $(this).fadeOut();
}); 
```

还有我的[jsFiddle 演示](http://jsfiddle.net/blackhawx/kMxqj/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:29:36.093

一个简单的方法是为高度和边距属性设置动画 - [http://jsfiddle.net/kMxqj/14/](http://jsfiddle.net/kMxqj/14/)

```
$('#add').click(function(e) {
    e.preventDefault();
    $('#container').append('<p class="notice">Notice #</p>');
});

$('body').on('click','p.notice', function(e) {
    $(this).animate({'height':0,'margin':'0'});
    $(this).fadeOut();
}); 
```

这会将高度和边距设置为 0，同时淡出对象，从而实现平滑过渡。还将溢出隐藏到您的通知框，以便在动画发生时覆盖内部的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:31:09.370

[这个小提琴](http://jsfiddle.net/5rQhU/2/)怎么样

**CSS**

```
.notice {
    width: 0;
    height: 0;
    background-color: #ccc;
} 
```

**JS**

```
$('#add').click(function(e) {
    e.preventDefault();
    $('#container').append('<p class="notice">Notice #</p>');
    $('#container p.notice:last-child').animate({
        width: 100%,
        height: 50px
    });
});

$('body').on('click','p.notice', function(e) {
    $(this).fadeOut();
}); 
```

根据需要调整值，但是这样的事情应该可以完成您想要的 - 听起来 animate() 可能是您想要的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T22:39:36.507

没有 JQuery：

最好的方法是`max-width`：

HTML

```
<div id="wrapper">        
    <div class="myspan">
        child
    </div> 
    <div id="removable" class="myspan">
        removable child
    </div>        
    <div class="myspan">
        child
    </div> 
    <div class="">
        child
    </div>
</div> 
```

CSS

```
.myspan {
    display: inline-block;
    font-size: 30px;
    display: inline-block;
    max-width: 200px;
    transition: all 1s;
    overflow: hidden;
}
.myspan:hover {
    max-width: 0;
} 
```

# vba - 从 NewWorkbook 传递 NewSheet 事件

> ID：15366512
> 
> 赞同：1
> 
> 时间：2013-03-12T16:18:00.460
> 
> 标签：vba, excel

每当在 Excel 工作簿中创建新工作表时，我都会尝试打开一个消息框。我还希望在创建新工作簿时打开一个消息框。到目前为止，我能够像这样完成新的工作簿消息：

我有一个名为 cl_AppEvents 的类模块，其中包含：

```
Public WithEvents AppEvent As Application
Public WithEvents WB As Workbook
Public WithEvents Sh As Worksheet

Public Sub AppEvent_NewWorkbook(ByVal WB As Workbook)
    MsgBox ("New Workbook")
End Sub

Public Sub WB_NewSheet(ByVal Sh As Object)
    MsgBox ("New Worksheet")
End Sub 
```

这是我初始化应用程序事件的代码：

```
Dim myAppEvent As New cl_AppEvents
Sub InitializeAppEvent()
    Set myAppEvent.AppEvent = Application
End Sub 
```

我试过做这样的事情：

```
Public Sub AppEvent_NewWorkbook(ByVal WB As Workbook)
    MsgBox ("New Workbook")
    WB_NewSheet(ByVal Sh As Workbook)
End Sub 
```

但这只会给我一个对象属性错误。那么如何为 NewWorkbook 事件中引用的新工作簿 WB 启用 NewSheet 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:54:28.230

clsAppEvt：

```
Public WithEvents AppEvent As Application
Public WbColl As New Collection

Public Sub AppEvent_NewWorkbook(ByVal WB As Workbook)
    Dim oWB As clsWbEvt
    MsgBox ("New Workbook")
    Set oWB = New clsWbEvt
    oWB.Init WB
    WbColl.Add oWB
End Sub

Public Sub Init(app As Application)
    Set Me.AppEvent = app
End Sub 
```

clsWbEvt：

```
Public WithEvents WB As Workbook

Public Sub WB_NewSheet(ByVal Sh As Object)
    MsgBox ("New Worksheet")
End Sub

Public Sub Init(wbk As Workbook)
    Set Me.WB = wbk
End Sub 
```

常规模块：

```
Dim oApp As clsAppEvt

Sub Setup()
    Set oApp = New clsAppEvt
    oApp.Init Application
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:27:50.030

尝试将 Initialize 事件处理程序添加到您的类，并设置 Workbook 对象！

```
Private Sub Class_Initialize()
    Set WB = Application.ActiveWorkbook
End Sub

Public Sub WB_NewSheet(ByVal Sh As Object)
    MsgBox ("New Worksheet")
End Sub 
```

我用你的代码试过这个，效果很好..

顺便说一句，当然，这仅适用于第一个工作簿，工作表事件不会为新工作簿触发！

HTH 菲利普

# php - 谁能解释这个警告？

> ID：15366515
> 
> 赞同：1
> 
> 时间：2013-03-12T16:18:06.937
> 
> 标签：php

警告的含义是什么？

```
Warning: preg_replace() [function.preg-replace]: Compilation failed: PCRE does not support \L, \l, \N{name}, \U, or \u at offset 1 in 
```

它是由这个函数触发的：

```
file_put_contents($file,preg_replace('(\uid=\d+)', 'uid=' . $uid, file_get_contents($file))); 
```

即这种模式：

```
'(\uid=\d+)' 
```

它可以在本地运行，但不能在线运行，这意味着它可能是我主机的 PHP 版本。我试图用谷歌搜索解决方法，但找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:20:04.360

PCRE 不支持`\u`espace 序列。

换句话说，您的正则表达式不正确。尝试类似的东西`(uid=\d+)`。

正如评论中所说（感谢 Mellamokb），这里是[源代码](http://php.net/manual/en/reference.pcre.pattern.differences.php)。

如果你想知道什么是`\u`，你可以看[这里](http://perldoc.perl.org/perlrebackslash.html)

> \u 大写下一个字符。不在 [ ] 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:21:03.893

```
file_put_contents($file,preg_replace('/uid=\d+/', 'uid=' . $uid, file_get_contents($file))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:31:30.470

RegExp 模式应以`/`分隔符为界，您也可以使用 (`#`或`~`)。而且没有转义序列`\u`。你可能想试试这个 -

```
preg_replace('/\\uid=\d+/', 'uid=' . $uid, file_get_contents($file)) 
```

# javascript - 确定不定冠词的Javascript库

> ID：15366516
> 
> 赞同：16
> 
> 时间：2013-03-12T16:18:10.137
> 
> 标签：javascript, regex, string

是否存在用于确定名词的不定冠词（“a”与“an”）的任何 javascript 库？

我可以从一个简单的正则表达式开始，如下所示：

```
var pattern = /^([aeiou])/i;
pattern.test("umbrella"); 
```

但这不处理类似的情况：“用户”应该返回假（你不会说“用户点击*了*按钮”）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T16:28:51.380

Eamon Nerbonne 的以下 Javascript 库应该是您正在寻找的：
[http ://home.nerbonne.org/A-vs-An/AvsAn.js](http://home.nerbonne.org/A-vs-An/AvsAn.js)

这实际上是作为对 SO 上类似问题的回答而创建的：
[https ://stackoverflow.com/a/1288473/505154](https://stackoverflow.com/a/1288473/505154)

这里使用的方法是下载 Wikipedia，对其进行过滤，然后创建一个前缀数据库来确定 a/an，这应该比大多数基于规则的系统更准确。您可以在以下位置找到更多信息（也链接在上面的答案中）：
[http ://home.nerbonne.org/A-vs-An/](http://home.nerbonne.org/A-vs-An/)

Chad Kirby 还有一个替代实现的链接：
[https ://github.com/uplake/Articles](https://github.com/uplake/Articles)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T00:22:13.267

这是我不久前写的一个非常简单的：

[https://github.com/rigoneri/indefinite-article.js](https://github.com/rigoneri/indefinite-article.js)

我希望它有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-10T18:37:16.983

我发现这个库有用且易于使用：[https](https://www.npmjs.com/package/indefinite) ://www.npmjs.com/package/indefinite 。

文档示例：

```
var a = require('indefinite');

console.log(a('apple')); // "an apple"
console.log(a('banana')); // "a banana"
console.log(a('UFO')); // 'a UFO'
console.log(a('hour')); // 'an hour'
console.log(a('ukelele')); // 'a ukelele'
console.log(a('banana', { capitalize: true })); // 'A banana'
console.log(a('UGLY SWEATER', { caseInsensitve: true })); // 'an UGLY SWEATER'
console.log(a('2')); // 'a 2'
console.log(a('8')); // 'an 8' 
```

# winapi - 为什么属性表中的图标用这么少的颜色呈现？

> ID：15366517
> 
> 赞同：4
> 
> 时间：2013-03-12T16:18:12.160
> 
> 标签：winapi, explorer, windows-shell, shell-extensions, propertysheet

我正在创建一个[属性表外壳扩展](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144106%28v=vs.85%29.aspx)，并希望有一个小图标来从标准系统选项卡中设置我的属性选项卡。不幸的是，我的图标几乎完全呈现为灰色。

原图：

![](../Images/8c49f4bcbbb1a6cac70e29eeda1903a8.png)

在属性表选项卡中：

![](../Images/9ead77481009f774ff39aabfa3b20145.png)

起初我以为这是我的问题，但后来我发现 TortoiseSVN 似乎也有同样的问题：

![](../Images/d21ec6434dbaf172f153464447da05ea.png)

这在 Windows 7 和 Windows 8 中都会发生。

有谁知道为什么这些图像看起来如此静音？另外，尽管这种无色，但有人对如何使图标看起来不错有任何提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:51:45.750

该`PropertySheet`函数使用 16 色 (ILC_COLOR) ImageList 初始化其选项卡控件，并将为每个页面提供的图标复制到其中。似乎没有办法覆盖它并提供您自己的 ImageList（或指定创建的 ImageList 的位深度）。大概这是原始 Windows 95 代码的遗留问题，随着事情的发展，它从未得到更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T12:32:23.827

您可以使用选项卡控件代替属性表，这使选项卡管理更加灵活和清晰。当然，您可以使用任何类型的图标，因为您必须创建自己的 ImageList。

在这里您可以阅读有关选项卡控件的信息：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb760548(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760548(v=vs.85).aspx)

在这里您可以访问选项卡控件的示例用法：

[Win32 属性页中的图标很难看 - 4 位图标](https://stackoverflow.com/questions/20333377/icons-in-win32-property-pages-are-ugly-4-bit-icons)

# javascript - 如何在某些条件下从元素中删除 Bootstrap 词缀？

> ID：15366519
> 
> 赞同：13
> 
> 时间：2013-03-12T16:18:16.030
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个使用[Twitter Bootstrap Affix](http://twitter.github.com/bootstrap/javascript.html#affix)插件的元素。如果窗口垂直调整到小于项目高度的点，我想从元素中删除词缀功能，因为您将无法在窗口中看到所有它。

到目前为止，我已经在控制台中尝试过这个，只是为了看看它是否可以被删除，但它似乎没有工作。

```
$("#myElement")
  .removeClass("affix affix-top affix-bottom")
  .removeData("affix");

$(window)
  .off("scroll.affix.data-api, click.affix.data-api"); 
```

也许我会以错误的方式解决这个问题？如何以编程方式从已应用的元素中删除词缀？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T21:43:38.807

我最终选择了一个主要是 CSS 的解决方案，类似于 @Marcin Skórzewski 的建议。

当窗口的高度小于元素的高度时，这只是添加了一个新类。

```
var sizeTimer;
$(window).on("resize", function() {
    clearTimeout(sizeTimer);
    sizeTimer = setTimeout(function() {
        var isWindowTallEnough = $overviewContainer.height() + 20 < $(window).height();

        if (isWindowTallEnough) {
            $overviewContainer.removeClass("affix-force-top");
        } else {
            $overviewContainer.addClass("affix-force-top");
        }

    }, 300);
}); 
```

然后在 CSS 中，刚刚添加了这个类：

```
.affix-force-top{
    position:absolute !important;
    top:auto !important;
    bottom:auto !important;
} 
```

* * *

**编辑**

对于引导程序 3，这似乎是有效的：

```
$(window).off('.affix');
$("#my-element")
    .removeClass("affix affix-top affix-bottom")
    .removeData("bs.affix"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-12T20:48:21.043

**已弃用：答案是指 Twitter Bootstrap v2。当前版本是 v4。**

可以尝试的选择很少。

1.  使用函数`data-offset-top`。通常，您使用整数值作为固定元素的滚动像素数。根据[文档](http://twitter.github.com/bootstrap/javascript.html#affix)，您可以使用 JS 函数，该函数将动态计算偏移量。在这种情况下，您可以使您的函数根据您选择的条件返回不同的数字。
2.  使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)覆盖小窗口的附加 CSS 规则（例如高度 200 像素或更小）。

我认为，第二个变体应该适合你。就像是：

```
@media (max-height: 200px) {
  .affix {
    position: static;
  }
} 
```

如果您为您的问题提供 jsfiddle，其他人可以尝试实际解决它，而不是仅仅提供理论建议，这可能会也可能不会奏效。

PS。Bootstrap 的导航栏组件使用媒体查询 max-width 来禁用小型设备的固定样式。这样做很好，不仅因为导航栏的屏幕尺寸太小，而且在移动设备中`position: fixed;`CSS 的效果真的很丑。拿 w 看`navbar`里面的`bootstrap-responsive.css`文件。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-06T04:41:08.367

你`$(window).off`很接近，根据@fat（bootstrap-affix.js的作者），你可以像这样禁用插件：

```
$(window).off('.affix'); 
```

这将禁用词缀插件。

见：[https ://github.com/twitter/bootstrap/issues/5870](https://github.com/twitter/bootstrap/issues/5870)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-06T16:52:45.483

引导程序的第 1890 行是是否应阻止默认操作的条件。这允许您侦听事件，如果满足某些条件，则防止词缀发生。

引导程序中的第 1890 行：if (e.isDefaultPrevented()) return

例子：

```
$('someselector')
.affix()
.on(
    'affix.bs.affix affix-top.bs.affix affix-bottom.bs.affix'
    , function(evt){  
        if(/* some condition */){  
            evt.preventDefault();  
        }  
    }
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-19T20:35:00.130

即使这个问题得到了回答，我只是想给出我的解决方案，以防有人遇到与我类似的情况。

我将 offset top 选项修改为一个永远不会滚动到的荒谬数字。这样我就不必这样做了 $(window).off('.affix'); 并禁用所有东西的词缀。

```
$('#element-id').data('bs.affix').options.offset.top = 1000000000; 
```

# c# - ObservableCollection 的封装不起作用

> ID：15366520
> 
> 赞同：0
> 
> 时间：2013-03-12T16:18:22.457
> 
> 标签：c#, .net, properties, observablecollection, encapsulation

我的财产是：

```
private static ObservableCollection<Wynik> lottoWyniki = new ObservableCollection<Wynik>();
    public static ObservableCollection<Wynik> LottoWyniki
    {
        get { return lottoWyniki; }
        set { lottoWyniki = value; }
    } 
```

当稍后在代码中我想将对象添加到这个集合中时：

```
for(i=2;i<=7;i++)
                LottoWyniki.Add(new Wynik(i,Date)); 
```

我添加的每个新对象都在替换之前存在的所有对象。所以在这段代码的结尾，我得到了 ObservableCollection，它包含一个（最后一个）对象，重复了 6 次。我做错了什么？

编辑：在 Wynik 的构造函数中，我正在做：

```
public Wynik (int l, DateTime d) 
{  
    Liczba = l;  
    Data = d; 
} 
```

Wynik 类：

```
class Wynik
{
    private static DateTime data;
    public static DateTime Data
    {
        get { return data; }
        set { data = value; }
    }

    private static int liczba;
    public static int Liczba
    {
        get { return liczba; }
        set { liczba = value; }
    }

    public Wynik (int l, DateTime d)
    {
        Liczba = l;
        Data = d;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:56:02.360

您的类的变量很可能是静态的。尝试将所有属性更改为非静态成员，这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:00:33.160

将您的课程更改为：

```
class Wynik
{
    private DateTime data;
    public DateTime Data
    {
        get { return data; }
        set { data = value; }
    }

    private int liczba;
    public int Liczba
    {
        get { return liczba; }
        set { liczba = value; }
    }

    public Wynik (int l, DateTime d)
    {
        Liczba = l;
        Data = d;
    }
} 
```

您的问题是您的属性 all `static`，这意味着您的类的每个实例都共享*相同*的属性。并不是说你有一个包含同一个对象的数组 6 次，你有 6 个不同的对象，你只是无法区分它们，因为它们对于`Data`and都有相同的值`Liczba`。

# javascript - Passport 是否支持新的 Google+ 登录功能？

> ID：15366523
> 
> 赞同：4
> 
> 时间：2013-03-12T16:18:31.120
> 
> 标签：javascript, node.js, authentication, google-plus, passport.js

我正准备构建一个应用程序，我想在其中启用对包括 Google 在内的*多个*第三方的身份验证。该项目将使用[NodeJS](http://nodejs.org/)编写，因此我决定将[Passport](http://passportjs.org)用于我的身份验证模块。

我知道 Google[最近发布](http://googleplusplatform.blogspot.com/2013/02/google-plus-sign-in.html)了[Google+ 登录](https://developers.google.com/+/features/sign-in)功能，它提供了额外的功能。如果提供了 Passport，我想利用这些功能。

**问题是：**在阅读[Passport 文档](http://passportjs.org/guide/google/)时，我看不到任何东西让我相信 Passport 支持或不支持新的 Google+ 登录。有知道这方面知识的吗？

**注意：**我知道我可以直接进行身份验证，但是因为我正在向其他几个第三方提供身份验证，所以我希望将所有内容都保存在一个地方。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:32:54.973

事实证明这还不被支持。我已经在 GitHub 上提交[了一个功能请求。](https://github.com/jaredhanson/passport/issues/115)希望它很快就会被包括在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T12:53:47.883

仅对于正在搜索此页面并到达此页面的人，请在此处查看：[https ://github.com/jaredhanson/passport-google-oauth](https://github.com/jaredhanson/passport-google-oauth)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-18T20:31:49.083

[https://www.npmjs.org/package/passport-google-plus](https://www.npmjs.org/package/passport-google-plus)支持 Google+ 登录

该项目包括几个工作示例，值得一看。

# ubuntu - 制作：缺少分隔符错误，尽管使用了制表符

> ID：15366531
> 
> 赞同：0
> 
> 时间：2013-03-12T16:18:42.527
> 
> 标签：ubuntu, makefile, gedit

这让我发疯，这是我的文字复制粘贴代码，Gedit 使用 8 的制表符宽度。它仍然抱怨缺少分隔符。我完全遵循了手动语法。我没有使用某种自动将制表符更改为空格的设置。

```
Tubes : TubesWithVaryingRadiusAndColors.cxx
    gcc -c TubesWithVaryingRadiusAndColors.cxx 
```

在上面的代码中，它似乎将选项卡更改为 4 个空格（我可以看到，通过尝试选择它，在输入窗口中它是一个字符，但如果你检查它，它将是 4 个空格）。

编辑：

如果我使用leafpad，它可以工作。Gedit 做错了什么？

十六进制转储是：

```
0000000 494c 4442 5249 3d20 2f20 7375 2f72 696c
0000010 2f62 7476 2d6b 2e35 2f38 540a 6275 7365
0000020 3a20 5420 6275 7365 6957 6874 6156 7972
0000030 6e69 5267 6461 7569 4173 646e 6f43 6f6c
0000040 7372 632e 7878 090a 6367 2063 632d 5420
0000050 6275 7365 6957 6874 6156 7972 6e69 5267
0000060 6461 7569 4173 646e 6f43 6f6c 7372 632e
0000070 7878 2d20 2049 7b24 494c 4442 5249 007d
000007f 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:31:05.890

尝试`hexdump`在您的`Makefile`. 然后，您将绝对确定选项卡的实际编码方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:41:59.890

打开您`gedit`的编辑器首选项，即`Edit->Preferences->Editor`取消选中`Insert spaces instead of tabs`。

尝试在 中再次插入制表符`Makefile`，这一次它应该可以工作。

顺便说一句，8 个空格的制表符宽度不等于`hard-tab`. `Gedit`似乎自动替换制表符，`8 spaces`但`Makefile`希望制表符出现在每个`recipe`规则的开头。

如果您使用的编辑器`vim`会自动插入硬标签以指定规则，您可以使用手动插入标签`Ctrl-V-Tab`

# php - 如何在magento 1.7.0.2中将鼠标悬停在我的购物车上时预览购物车

> ID：15366532
> 
> 赞同：0
> 
> 时间：2013-03-12T16:18:43.470
> 
> 标签：php, xml, magento, preview, cart

我尝试使用扩展[http://www.magentocommerce.com/magento-connect/Vitalityshop/extension/6424/cartview](http://www.magentocommerce.com/magento-connect/Vitalityshop/extension/6424/cartview) 但它不适合我。

试过谷歌怎么做，但关于这个主题的帖子相对很少。没有答案解决了我的问题。

那么，当鼠标悬停在顶部链接中的“我的购物车”按钮上时，如何显示我的购物车中的商品？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:00:03.730

有一些不同的扩展可以做到这一点，包括[我自己的](http://www.magentocommerce.com/magento-connect/catalog/product/view/id/15566/s/ajax-cart-popup-9931/)，但简单来说，您需要做的是在页面中添加一个块，在其中呈现您的迷你购物车，然后在滚动我的购物车链接时显示/隐藏该块在相关元素上使用 JS 事件监听器。

# c# - 从 GUID 到完整路径

> ID：15366535
> 
> 赞同：2
> 
> 时间：2013-03-12T16:18:51.840
> 
> 标签：c#, path, wix, .net-2.0, guid

我正在尝试获取安装位置以便执行升级，我正在使用 WiX 安装程序，但我无法使用 WiX 自己的升级机制，因为它会破坏配置文件并且不会执行自定义中发生的检查动作的用户界面。

我有一个调用 .msi 的引导程序，我可以轻松地在该 .msi 中获取和设置参数。

在这种情况下 - 在 .msi 运行并核对所有内容之前，我如何从已知但动态的 GUID 到引导程序中其安装的文件位置。

注意我不能假设配置文件在安装之间会保持不变，或者我可以比卸载更快地获取文件可以杀死它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:43:48.953

你对升级机制有相当多的控制，你应该能够在升级期间做你想做的事。特别是，我会让新的 MSI 读取配置设置，然后将它们写回配置文件（您的新 MSI 肯定会在旧配置文件被删除之前运行）。这将使您的安装具有幂等性（理想状态）。

要回答您的问题，有多种方法可以做您想做的事。以下是我可能会如何去做：

1.  写 ARPINSTALLLOCATION -[我的这个旧博客条目有详细信息](http://robmensching.com/blog/posts/2011/1/14/arpinstalllocation-and-how-to-set-it-with-the-wix-toolset)。

2.  如果您知道`ProductCode`旧 MSI 的 ，请跳至步骤 3。如果您现在不知道`ProductCode`，则使用`UpgradeCode`MSI （如果您正在升级，您会知道）并使用[::MsiEnumRelatedProducts()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370103%28v=vs.85%29.aspx)查找`ProductCode`您之前安装的 MSI 的。

3.  如果您知道`ProductCode`您的 MSI，则调用[::MsiGetProductInfo()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370130%28v=vs.85%29.aspx)并询问该`INSTALLPROPERTY_INSTALLLOCATION`属性。

# asp.net - 根据父值设置选定值

> ID：15366546
> 
> 赞同：0
> 
> 时间：2013-03-12T16:19:16.910
> 
> 标签：asp.net, ajaxcontroltoolkit, cascadingdropdown

我有 2 个级联下拉列表，1 个是父级，一旦您在第一个/父级下拉列表中选择一个值，另一个/子级就会填充。

第一个在页面加载时填充，我可以根据保存在前一页上的数据库值来设置这个选择的值。

对于第二个级联下拉列表，当我在页面加载时为父 ID 设置所选值（基于数据库值）时，它会为我填充。

但是由于第二个/子下拉列表在页面加载之前没有设置/加载值，所以我无法设置选定的值（我在 Page_Load_Complete 上尝试过，但它在那里也不起作用）。

我需要知道如何在父下拉列表中设置选定的值（这工作正常），根据第一个下拉列表中的值填充第二个下拉列表。

这是我的aspx页面代码。我可以设置第一个选定的值，它会填充第二个选择框（但我不能设置选定的值，因为在我设置第一个选定的值时它没有被填充。

页面

```
<asp:Label ID="lblAffPartCat" Text="<%$ Resources:share,lblAffPartCat %>" runat="server"></asp:Label>
<asp:DropDownList ID="ddlPartCat" runat="server"></asp:DropDownList>

<ajaxToolkit:CascadingDropDown ID="CascadingDropDown2" runat="server" TargetControlID="ddlPartCat"
Category="BasePart"  PromptText="<%$ Resources:share,lblSelPartCat %>"  LoadingText="[Loading Part Cat...]"
ServicePath="PAIntExtPart.asmx" ServiceMethod="BindPartCat" 
ContextKey="" UseContextKey="True"/> 

<asp:Label ID="lblAffBasePart" Text="<%$ Resources:share,lblAffBasePart %>" runat="server"></asp:Label>

<asp:DropDownList ID="ddlBasePart" runat="server" ></asp:DropDownList>

<ajaxToolkit:CascadingDropDown ID="ddlBasePart_CascadingDropDown"  runat="server" Category="BasePart"
TargetControlID="ddlBasePart"  ParentControlID= "ddlPartCat" PromptText="<%$ Resources:share,lblSelBasePart %>" 
LoadingText="Loading Base Parts.."
ServicePath="PAIntExtPart.asmx" 
ServiceMethod="BindBasePart"
ContextKey="" UseContextKey="True" /> 
```

填充下拉列表的 asmx.cs 页面：

```
using System;
using System.Collections.Generic;
using System.Web.Services;
using System.Data;
using System.Collections.Specialized;
using AjaxControlToolkit;
using Hotline.DataAccess;

/// <summary>
    /// Summary description for PAIntExtPart
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    [System.Web.Script.Services.ScriptService()]
    public class PAIntExtPart : System.Web.Services.WebService
    {
        string _SiteLocation = MiscFunctions.getCurrentSiteLocation();

        /// <summary>
        /// WebMethod to Populate Part Category Dropdown
        /// </summary>
        [WebMethod]
        public CascadingDropDownNameValue[] BindPartCat(string knownCategoryValues, string category, string contextKey)
        {
            DataTable dsPartCat = null;

            // string passed for contextKey is FormType and Language split by ":"
            string[] arrcontextKey = contextKey.Split(':');

            string FormType = arrcontextKey[0].ToString();
            int LanguageID =  Int32.Parse(arrcontextKey[1].ToString());
            string PartCatValue = arrcontextKey[2].ToString();

            try
            {                
                dsPartCat = HarDB.getPartCat(_SiteLocation, LanguageID, FormType);

                //create list and add items in it by looping through dataset table
                List<CascadingDropDownNameValue> PartCatdetails = new List<CascadingDropDownNameValue>();
                foreach (DataRow dtrow in dsPartCat.Rows)
                {
                    string PartCatID = dtrow["PartCatID"].ToString();
                    string PartCat = dtrow["PartCat"].ToString();
                    PartCatdetails.Add(new CascadingDropDownNameValue(PartCat, PartCatID));

                }

                if (PartCatValue.Trim() != "")
                {                    
                    //SelectedValue = PartCatValue;
                }

                return PartCatdetails.ToArray();

            }
            catch (Exception ex)
            {
                Server.Transfer("Errorpage.aspx?function=getAttachInfo+Error=" + Server.UrlEncode(ex.Message));
                return null;
            }

        }

        /// <summary>
        /// WebMethod to Populate Base Part Dropdown
        /// </summary>
        [WebMethod]
        public CascadingDropDownNameValue[] BindBasePart(string knownCategoryValues, string category, string contextKey)
        {
            string PartCatID;
            //int LanguageID = Int32.Parse(contextKey); 

            string[] arrcontextKey = contextKey.Split(':');

            string FormType = arrcontextKey[0].ToString();
            int LanguageID = Int32.Parse(arrcontextKey[1].ToString());
            string BasePartValue = arrcontextKey[2].ToString();

            //This method will return a StringDictionary containing the name/value pairs of the currently selected values
            StringDictionary PartCatdetails = AjaxControlToolkit.CascadingDropDown.ParseKnownCategoryValuesString(knownCategoryValues);

            PartCatID = PartCatdetails["BasePart"];

            DataTable dsBasePart = null;
            try
            {
                dsBasePart = HarDB.getBasePart(_SiteLocation, LanguageID, PartCatID, FormType);

                //create list and add items in it by looping through dataset table
                List<CascadingDropDownNameValue> BasePartdetails = new List<CascadingDropDownNameValue>();
                foreach (DataRow dtrow in dsBasePart.Rows)
                {
                    string BasePartID = dtrow["BasePartNumID"].ToString();
                    string BasePart = dtrow["BasePartNum"].ToString();
                    BasePartdetails.Add(new CascadingDropDownNameValue(BasePart, BasePartID));
                }

                if (BasePartValue.Trim() != "")
                {
                    //SelectedValue = PartCatValue;
                }

                return BasePartdetails.ToArray();

            }
            catch (Exception ex)
            {
                Server.Transfer("Errorpage.aspx?function=getAttachInfo+Error=" + Server.UrlEncode(ex.Message));
                return null;
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:20:54.490

我发现了我的问题，我在尝试填充第二个下拉列表时没有使用正确的“选定值”。

# objective-c - 在 Objective-C 中创建和设置 typedef 结构值

> ID：15366547
> 
> 赞同：1
> 
> 时间：2013-03-12T16:19:17.197
> 
> 标签：objective-c, variables, struct, set, typedef

我在游戏中有一个经常使用的类，我认为通过将实例变量与 typedef 结构组合在一起来整理它会很好。我并不完全相信这是否会有所帮助。

**最初在我的类头接口中，我有这样的东西：**

```
@interface ThingClass : CCLayer {

     @public

          bool _invulnerableToggled;
          int _invulnerableCount;
          int _invulnerableMax;

}

@property(nonatomic, assign) bool invulnerableToggled;
@property(nonatomic, assign) int invulnerableCount;
@property(nonatomic, assign) int invulnerableMax; 
```

在我的.m

```
@synthesize

invulnerableToggled = _invulnerableToggled,
invulnerableCount = _invulnerableCount,
invulnerableMax = _invulnerableMax; 
```

此类的子类会将这些变量设置为它们在 init 中的默认值。另一个类可以访问该子类的实例并使用常规点符号相应地设置值，例如 tempThing.invulnerableToggled = YES;

现在我使用的是 typedef 结构，看起来好像我的值无法调整，我已经尝试了各种方法来克服它。虽然这可能是因为我一开始就没有正确设置，所以以防万一我会告诉你我现在在做什么。

**目前我的班级标题：**

```
typedef struct {

    bool toggled;
    int count;
    int max;

} Invulnerable;

@interface ThingClass : CCLayer {

     @public
          Invulnerable _invulnerable;

}

@property(nonatomic, assign) Invulnerable invulnerable; 
```

在我的.m

```
@synthesize

invulnerable = _invulnerable; 
```

我在子类 init 中设置这些值，如下所示：

```
_invulnerable.toggled = NO;
_invulnerable.count = 0;
_invulnerable.max = 50; 
```

当我尝试在另一个类中设置它时，我希望它将 1 添加到当前值。它始终保持为 1。这个 if 语句有时每秒检查 60 次，但计数没有改变：

```
Invulnerable invulnerable = tempBaddy.invulnerable;

// check baddy invulnerability and increment if needed

if(invulnerable.toggled == YES){

    int increase = invulnerable.count +1;

    invulnerable.count = increase;

    NSLog(@"invulnerable.count = %i", invulnerable.count);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T16:50:27.207

This is not a common way in ObjC but you can pass the struct by reference, i.e. return a pointer to the struct:

```
@interface ThingClass : CCLayer {
@protected
    Invulnerable _invulnerable;
}

@property(nonatomic, readonly) Invulnerable* invulnerable;

@end 
```

The *.m file:

```
@implementation ThingClass

- (Invulnerable*)invulnerable {
    return &_invulnerable;
}

@end 
```

Updating the data:

```
Invulnerable* invulnerable = tempBaddy.invulnerable;
// check baddy invulnerability and increment if needed
if(invulnerable->toggled == YES){
    invulnerable->count++;
    NSLog(@"invulnerable.count == %i", tempBaddy.invulnerable->count);
} 
```

**I guess** you are trying to perform some action on an instance of ThingClass (or its subclass). And the action affects the value of _invulnerable. In this case a more common way would be having a method in the Thing class that performs all the required updates:

```
@implementation ThingClass

- (void)headshot {
    if (_invulnerable.toggled) {
        _invulnerable.count++;

    } else {
        [self die];
    }
}

@end 
```

# ios - 相机对焦ios

> ID：15366550
> 
> 赞同：2
> 
> 时间：2013-03-12T16:19:20.697
> 
> 标签：ios, objective-c, cocoa-touch, camera

我有崩溃消息：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“此设备不支持设置 focusPointOfInterest。使用 isFocusPointOfInterestSupported'

代码后：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [device setFocusPointOfInterest:CGPointMake(100, 100)];
} 
```

有没有办法像***相机胶卷***一样聚焦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T16:15:15.760

答案的组合，但这应该可以帮助您。

您需要将触摸点从触摸开始或触摸手势转换为 0-1 比例。

所以，检查你的设备是否有焦点，然后转换点：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get device reference...

    if ([device isFocusPointOfInterestSupported]) {
        CGPoint point = [touch locationInView:self.myCameraView];
        float newX = point.x / self.myCameraView.frame.size.width;
        float newY = point.y / self.myCameraView.frame.size.height;
        [device setFocusPointOfInterest:CGPointMake(newX, newY)];
    }
    else {
        // Focus not supported
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:05:43.277

您需要`setFocusPointOfInterest`通过使用来检查是否被接受，`[device focusPointOfInterestSupported]`因为**并非所有 iOS 设备都支持它**，如果我没记错的话，它也因前置/后置摄像头而异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:36:51.683

乔科托帕西所说的。

所以基本上做一个 if 循环来检查 [device focusPointOfInterestSupported] 是否返回 true 然后做你的 [device setFocusPointOfInterest:CGPointMake(100, 100)];

编辑：

代码将类似于：

```
if ([device isFocusPointOfInterestSupported]){
    [device setFocusPointOfInterest:CGPointMake(100, 100)];
}else{
     // Not supported
} 
```

希望这可以帮助！

# maven - 单声道“Hello World”示例工作，但 Java 不是

> ID：15366563
> 
> 赞同：0
> 
> 时间：2013-03-12T16:20:03.063
> 
> 标签：maven, testing, selenium, maven-surefire-plugin, saucelabs

我正在使用 Java 和 C# Mono 运行 Sauce Labs 主页上的[入门示例](https://saucelabs.com/home)。

Mono 示例就像一个魅力，但 Java 的一个报告说

`Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.`

我尝试将 Java 示例重写为类似于 Mono 示例：

```
public class WebDriverTest {

    private WebDriver driver;

    @Before
    public void setUp() throws Exception {

        DesiredCapabilities capabilities = DesiredCapabilities.firefox();
        capabilities.setCapability("version", "10");
        capabilities.setCapability("platform", Platform.LINUX);
        capabilities.setCapability("name", "Testing Selenium 2 with C# on Sauce");
        capabilities.setCapability("username", "banksysan");
        capabilities.setCapability("accessKey", "MY-APP-KEY");

        driver = new RemoteWebDriver(
                new URL("http://ondemand.saucelabs.com:80/wd/hub"), capabilities);
    }

    @Test
    public void webDriver() throws Exception {
        driver.get("http://www.amazon.com/");
        assertEquals("Amazon.com: Online Shopping for Electronics, Apparel, Computers, Books, DVDs & more", driver.getTitle());
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
    }

} 
```

还有其他建议吗？

谢谢

**更新**

我已经尝试按照下面罗斯建议的[教程](https://saucelabs.com/java)中的描述运行，按照这个逐字逐句导致 Maven 退出并出现以下错误：

```
Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test (default-test) on project sauce-labs-tutorial: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.12.4:test failed: The forked VM terminated without saying properly goodbye. VM crash or System.exit called ? -> [Help 1] 
```

我已经编辑了酱文件，只是添加了`package`缺少的声明，但是添加它根本没有任何区别。

**更新 2**

完整的 Maven 堆栈跟踪：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Forking command line: /bin/sh -c cd /home/david/Documents/development/sauceLabs/java/sauce-labs-tutorial && /usr/java/jdk1.7.0_11/jre/bin/java -jar /home/david/Documents/development/sauceLabs/java/sauce-labs-tutorial/target/surefire/surefirebooter5443687714708881867.jar /home/david/Documents/development/sauceLabs/java/sauce-labs-tutorial/target/surefire/surefire4108475136019888668tmp /home/david/Documents/development/sauceLabs/java/sauce-labs-tutorial/target/surefire/surefire_08561306448128018862tmp
Running TestSuite

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3:16.389s
[INFO] Finished at: Wed Mar 13 20:17:58 GMT 2013
[INFO] Final Memory: 10M/213M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test (default-test) on project sauce-labs-tutorial: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test failed: There was an error in the forked process
[ERROR] java.lang.NullPointerException
[ERROR] at dave.WebDriverWithHelperTest.getSessionId(WebDriverWithHelperTest.java:78)
[ERROR] at com.saucelabs.testng.SauceOnDemandTestListener.markJobAsFailed(SauceOnDemandTestListener.java:103)
[ERROR] at com.saucelabs.testng.SauceOnDemandTestListener.onTestFailure(SauceOnDemandTestListener.java:97)
[ERROR] at org.testng.internal.Invoker.runTestListeners(Invoker.java:1895)
[ERROR] at org.testng.internal.Invoker.runTestListeners(Invoker.java:1879)
[ERROR] at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1292)
[ERROR] at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
[ERROR] at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
[ERROR] at org.testng.TestRunner.privateRun(TestRunner.java:767)
[ERROR] at org.testng.TestRunner.run(TestRunner.java:617)
[ERROR] at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
[ERROR] at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
[ERROR] at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
[ERROR] at org.testng.SuiteRunner.run(SuiteRunner.java:240)
[ERROR] at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
[ERROR] at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
[ERROR] at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
[ERROR] at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
[ERROR] at org.testng.TestNG.run(TestNG.java:1031)
[ERROR] at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77)
[ERROR] at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:189)
[ERROR] at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:105)
[ERROR] at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:117)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
[ERROR] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
[ERROR] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
[ERROR] at java.lang.reflect.Method.invoke(Method.java:601)
[ERROR] at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
[ERROR] at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)
[ERROR] -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test (default-test) on project sauce-labs-tutorial: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test failed: There was an error in the forked process
java.lang.NullPointerException
    at dave.WebDriverWithHelperTest.getSessionId(WebDriverWithHelperTest.java:78)
    at com.saucelabs.testng.SauceOnDemandTestListener.markJobAsFailed(SauceOnDemandTestListener.java:103)
    at com.saucelabs.testng.SauceOnDemandTestListener.onTestFailure(SauceOnDemandTestListener.java:97)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1895)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1879)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1292)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:189)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:105)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:117)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)

    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.14:test failed: There was an error in the forked process
java.lang.NullPointerException
    at dave.WebDriverWithHelperTest.getSessionId(WebDriverWithHelperTest.java:78)
    at com.saucelabs.testng.SauceOnDemandTestListener.markJobAsFailed(SauceOnDemandTestListener.java:103)
    at com.saucelabs.testng.SauceOnDemandTestListener.onTestFailure(SauceOnDemandTestListener.java:97)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1895)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1879)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1292)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:189)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:105)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:117)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)

    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.RuntimeException: There was an error in the forked process
java.lang.NullPointerException
    at dave.WebDriverWithHelperTest.getSessionId(WebDriverWithHelperTest.java:78)
    at com.saucelabs.testng.SauceOnDemandTestListener.markJobAsFailed(SauceOnDemandTestListener.java:103)
    at com.saucelabs.testng.SauceOnDemandTestListener.onTestFailure(SauceOnDemandTestListener.java:97)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1895)
    at org.testng.internal.Invoker.runTestListeners(Invoker.java:1879)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1292)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:189)
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:105)
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:117)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray2(ReflectionUtils.java:208)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:158)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:86)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:95)

    at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:475)
    at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:349)
    at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:152)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:806)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:701)
    at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:629)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    ... 20 more
[ERROR] 
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException 
```

浏览万维网，看起来万无一失已被认定为可能的罪魁祸首。我已经升级了 POM 中的版本，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:46:54.600

您可以尝试使用以下代码创建 RemoteWebDriver 实例：

```
 driver = new RemoteWebDriver(
            new URL("http://banksysan:MY-APP-KEY@ondemand.saucelabs.com:80/wd/hub"), capabilities); 
```

我们还创建了一个关于让 Java 测试与 Sauce Labs 一起工作的[更深入的教程，这可能也会有所帮助。](http://saucelabs.com/java)

* * *

更新：生成的基础错误是

```
org.openqa.selenium.remote.UnreachableBrowserException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.
Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.5.0-25-generic', java.version: '1.7.0_11'
Driver info: driver.version: RemoteWebDriver 
```

这又是由于代理服务器阻止了对 ondemand.saucelabs.com 的出站请求。

通过指定 Java 系统属性包含代理信息解决了该问题，例如。

```
System.setProperty("http.proxyHost", proxyHost);            
System.setProperty("http.proxyPort", proxyPort)            
System.setProperty("http.proxyUser", userName);            
System.setProperty("http.proxyPassword", password); 
```

# sql - SQL 需要内连接

> ID：15366567
> 
> 赞同：1
> 
> 时间：2013-03-12T16:20:07.637
> 
> 标签：sql, sql-server, tsql

请注意，我在系统下方的内容已经到位，因此更改它需要时间。因此，我知道最好的方法是正常化，但是......

我有以下 2 张桌子

```
Tbl1

CompId      CommaList
------      --------
2           '122','54','90'   
54          '53','76'
34          '87' 
22          '98'

Tbl2

ID     ClientId   
--     --------
1      122
2      76 
3      87
4      98 
```

我需要的是加入 Tbl1 和 Tbl2 然后返回 CompId 和 ID

连接应该从 tbl2.ClientId 和 tbl1.CommaList 完成（这是一个逗号分隔的列表，我需要从中找到匹配的值。

希望这是有道理的。

```
 select tbl1.CompId, tbl2.Id
    from tbl1  join tbl2 on CommaList = tbl2.ClientId 
```

显然这不起作用，因为它们属于不同类型，我还需要在 CommaList 中找到该列表。

最终结果应如下所示：

```
ID       CompId
--       ------
1        2 
2        54
3        34
4        22 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:25:21.767

**免责声明**：*在数据库列中存储逗号分隔的列表是一种代码异味，通常表明您需要规范化数据库结构。如果可能，请**不要**在您的代码中执行此操作。*

* * *

您可以通过匹配逗号分隔列表中的客户端 ID 值来解决`LIKE`：

```
select
  t2.ID, t1.CompId
from Tbl1 t1
join Tbl2 t2 on t1.CommaList
  like '%''' + cast(t2.ClientId as varchar(10)) + '''%' 
```

演示：[http ://www.sqlfiddle.com/#!3/6d416/6](http://www.sqlfiddle.com/#!3/6d416/6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:28:24.517

几乎可以肯定你想用一个连接表来做这个，扩展 CommaList。也就是说，你想要一张桌子

```
 Tbl3
 CompID      ClientID
 2            122
 2             54
 2             90
 54            53 
```

等等

一些数据库允许您存储`CommaList`为数组并使用`IN`运算符，但这既非标准又低效。（您也可以像 mellamokb 的答案一样进行字符串搜索，但请注意他的免责声明与我的相同。）现在您可以这样做

```
SELECT id, compID FROM Tbl3 NATURAL JOIN Tbl2; 
```

除特殊情况外，请避免非规范化数据，例如`Tbl1`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:28:45.810

我已经发布了一个我没有测试过但应该可以工作的解决方案。这样做感觉不对，我现在通过回答鼓励你感到不干净：

```
SELECT tbl1.CompId, tbl2.Id
FROM tbl1  
  JOIN tbl2 ON CommaList LIKE '%''' + CAST(tbl2.ClientId AS VARCHAR) + '%''' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T16:26:09.317

试试这个：

```
select tbl1.CompId, tbl2.Id
from tbl1, tbl2 
where CHARINDEX('''' + CONVERT(varchar(50),tbl2.ClientId) + '''', CommaList)<> 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T19:28:16.110

如果由于某种原因您不能使用`Char Index`or`like`解决方案，您可以拆分逗号列表然后加入。例如，如果您需要做概念上的等价物

> 从 CommaList 上的 tbl2 = tbl2.ClientId **LEFT** join tbl1 join

```
with split as (

SELECT 
       CompID,
       Substring(commalist, number, Charindex(',', commalist + ',', number) 
                                    - number) 
                                                                   AS clientID 
FROM   tbl1  
       JOIN master..spt_values v 
         ON number <= Len(commalist) 
            AND Substring(',' + commalist, number, 1) = ',' 
WHERE  v.type = 'P' )

SELECT 

    split.CompId,
    split.clientID,
    tbl2.id

FROM 

  split
  LEFT JOIN tbl2 
  on tbl2.clientID = split.clientID 
```

[演示](http://www.sqlfiddle.com/#!3/727d7/9)

**笔记：**

*   我没有费心处理引号分隔的部分，但你可以很容易地做到这一点`replace(commalist,'''','')`
*   照原样，这仅适用于长度 <= 2047 的 commalist 值。如果您正在处理更大的列表，您可以[在此答案中使用](https://stackoverflow.com/a/15294425/119477)[GarethD 的](https://stackoverflow.com/users/1048425/garethd)第二个示例来生成更大的数字表

# bash - Bash set -x echo 重定向以及命令

> ID：15366570
> 
> 赞同：12
> 
> 时间：2013-03-12T16:20:12.880
> 
> 标签：bash, pipe, io-redirection

我正在编写一个 Bash 脚本，我希望所有命令在它们发生时都被回显。我知道我需要分别使用`set -x`和`set +x`切换此行为（[此处为 SOF 帖子](https://stackoverflow.com/questions/2853803/in-a-shell-script-echo-shell-commands-as-they-are-executed)）。但是，它并没有回显所有内容，即 I/O 重定向。

例如，假设我有这个非常简单的 Bash 脚本：

```
set -x
./command1 > output1
./command2 arg1 arg2 > output2 
```

这将是输出

```
+ ./command1
+ ./command2 arg1 arg2 
```

Bash 没有将我的 stdout 重定向回显到*output1*和*output2*。为什么是这样？我怎样才能实现这种行为？也许`shopt`我必须在脚本中设置一个选项？

**注意：**我还注意到管道不会按预期打印。例如，如果我要使用这个命令：

```
set -x
./command3 | tee output3 
```

我会得到这个输出：

```
+ tee output3
+ ./command3 
```

如何使命令完全按照它们的编写方式回显，而不是让脚本重新排序管道？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-04T22:56:53.127

当使用某些构造时，调试陷阱和调试陷阱都`set -x`不会提供完整的信息。

例子是：

ex1.sh

```
for i in a b c
do
  echo $i # Where does the output go?
done > outfile # Here! 
```

ex2.sh

```
c="this"
case "$c" in
  this) echo sure ;; # Where does the output go?
  that) echo okay ;;
esac > choice # Here! 
```

ex3.sh

```
what="up"
while [ "$what" = "up" ]
do
    echo "Going down!" # Where does the output go?
    what="down"
    echo "Newton rulezzz!" > thelaw
done > trying # Here! 
```

还有更多类似的，更不用说各种嵌套的变体了。我不知道有什么简单的方法来处理这些，除了进入完整的 Bash 脚本解析领域，这是一个雷区......

编辑：如果不需要特定于 Bash 的功能，并且可以与 Bourne shell 向后兼容，则 Korn shell（ksh，使用版本 93u+ 2012-08-01 测试）在显示重定向信息方面做得更好：

```
$ ksh -x ex1.sh 
+ 1> outfile
+ echo a
+ echo b
+ echo c

$ ksh -x ex2.sh 
+ c=this
+ 1> choice
+ echo sure

$ ksh -x ex3.sh 
+ what=up
+ 1> trying
+ [ up '=' up ]
+ echo 'Going down!'
+ what=down
+ echo 'Newton rulezzz!'
+ 1> thelaw
+ [ down '=' up ] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-13T08:59:49.577

你应该使用`set -v`.

> `-v` 在读取 shell 输入行时打印它们。

输出似乎符合您的期望。

```
$ set -v
$ ./command1 > output1
./command1 > output1
sh: ./command1: No such file or directory
$ ./command2 arg1 arg2 > output2
./command2 arg1 arg2 > output2
sh: ./command2: No such file or directory
$ ./command3 | tee output3
./command3 | tee output3
sh: ./command3: No such file or directory 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-12T16:30:10.660

这是不可能的`set -x`。您唯一的选择是通过`DEBUG`陷阱查看当前命令。

```
trap 'printf %s\\n "$BASH_COMMAND" >&2' DEBUG 
```

这不会显示精确的论点`set -x`。将它们结合起来应该会给你一个完整的画面，尽管它有很多调试输出。

# asp.net-mvc - 如何使用 Oauth MVC4 传递电子邮件

> ID：15366574
> 
> 赞同：1
> 
> 时间：2013-03-12T16:20:17.167
> 
> 标签：asp.net-mvc, facebook, oauth

[http://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc](http://www.asp.net/mvc/tutorials/mvc-4/using-oauth-providers-with-mvc)

我正在使用本教程中的代码（当然，不是全部）。一切正常，但是当我尝试传递电子邮件时，我有`System.Collections.Generic.KeyNotFoundException`. 为什么？如何从 Facebook 传递电子邮件值？

```
 return View("ExternalLoginConfirmation", new RegisterExternalLoginModel { 
                UserName = result.UserName, 
                ExternalLoginData = loginData,
                FullName = result.ExtraData["name"],
                Email = result.ExtraData["email"],
                ProfileLink = result.ExtraData["link"],
            }); 
```

这有效：

```
 return View("ExternalLoginConfirmation", new RegisterExternalLoginModel { 
                UserName = result.UserName, 
                ExternalLoginData = loginData,
                FullName = result.ExtraData["name"],
                //Email = result.ExtraData["email"],
                ProfileLink = result.ExtraData["link"],
            }); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:34:29.727

默认情况下，Facebook 不共享电子邮件地址。有关更多信息，请参阅[此帖子](https://stackoverflow.com/a/12883880/65716 "这个")，但您可以更改您的注册模式以在为您的站点进行用户注册时要求电子邮件。此外，您可以先检查该集合是否具有密钥，然后再尝试访问它

```
AuthenticationResult result =
    OAuthWebSecurity
        .VerifyAuthentication(
            Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));

// Log in code

if (result.ExtraData.ContainsKey("email"))
    // Use email 
```

# less - 基于 CSS 类的 LESS 条件设置 LESS 变量

> ID：15366576
> 
> 赞同：14
> 
> 时间：2013-03-12T16:20:21.293
> 
> 标签：less

我需要设置一个 Less 变量来匹配网站的活动主题，即每个主题都有不同的颜色。

我想根据定义主题的 HTML 正文 CSS 类将 @themeColor 设置为正确的颜色。

例如：

```
body.themeBlue { @themeColor: blue; }
body.themeRed { @themeColor: red; } 
```

这样我只需要在其他 Less 文件中使用 @themeColor 变量。

任何人都可以帮忙吗？根据这个（[http://www.lesscss.org/#-scope](http://www.lesscss.org/#-scope)）可以做类似的事情，但我不能让它工作。这里发生了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-12T17:56:02.263

LESS 文件无法`body`在运行时读取应用于 html 元素的实际类（您可能需要实现一个 javascript 解决方案来执行类似的操作）。

如果您只想根据`body`类准备好所有主题 css，最好的实现方法是在 mixin 中包含所有必要的基于主题的 css，然后在主题类下应用它。这减少了代码重复。例如：

**较少的**

```
//mixin with all css that depends on your color
.mainThemeDependentCss() {
  @contrast: lighten(@themeColor, 20%);
  h1 {color: @themeColor;}
  p {background-color: @contrast;}
}

//use the mixin in the themes
body.themeBlue {
  @themeColor: blue;
  .mainThemeDependentCss();
}

body.themeRed {
  @themeColor: red;
  .mainThemeDependentCss();
} 
```

**CSS 输出**

```
body.themeBlue h1 {
  color: #0000ff;
}
body.themeBlue p {
  background-color: #6666ff;
}
body.themeRed h1 {
  color: #ff0000;
}
body.themeRed p {
  background-color: #ff6666;
} 
```

有关处理主题方面或方式的其他一些答案，请参阅：

*   [LESS CSS - 根据主体类更改主题颜色的变量值](https://stackoverflow.com/questions/15275829/less-css-change-variable-value-for-theme-colors-depending-on-body-class/15279979#15279979)
*   [LESS.css 变量取决于类](https://stackoverflow.com/questions/11599520/less-css-variable-depending-on-class/11641294#11641294)
*   [LESS CSS：嵌套时滥用 & 运算符？](https://stackoverflow.com/questions/11537260/less-css-abusing-the-operator-when-nesting/11544805#11544805)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T17:27:05.813

Less 中的变量实际上是常量，只会被定义一次。

Scope 在其代码大括号内工作，因此您需要将 CSS 嵌套在所需的每个主题中（这意味着重复）。

这并不理想，因为您需要这样做：

```
body.themeBlue {
  @color: blue;
  /* your css here */
}

body.themeRed {
  @color: red;
  /* your css here AGAIN :( */
} 
```

但是，您可以尝试使用如下变量：

```
@color: black;
@colorRed: red;
@colorBlue: blue;

h1 {
  color: @color; // black
  body.themeRed & {
    color: @colorRed; // red
  }
  body.themeBlue & {
    color: @colorBlue; // blue
  }
} 
```

您只需要声明一次颜色，但您需要不断地添加“body.themeRed”等前缀，其中颜色因主题而异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-05T15:01:09.647

您实际上可以使用@import 来加载您的主题！所以`common.less`将包含您所有的默认样式并将`@themeColor`应用于它。

```
.mainThemeDependentCss() {
  //file with all themed styles
  @import 'common.less';
}

//use the mixin in the themes
body.themeBlue {
  @themeColor: blue;
  .mainThemeDependentCss();
}

body.themeRed {
  @themeColor: red;
  .mainThemeDependentCss();
} 
```

顺便说一句，您应该避免在 中使用`body`选择器`common.less`，因为它不起作用。

# unit-testing - 相同的 JUnit 测试在 Ant 中工作，但在 Maven 中没有

> ID：15366577
> 
> 赞同：0
> 
> 时间：2013-03-12T16:20:21.320
> 
> 标签：unit-testing, maven, testing, ant, junit

我有一个非常奇怪的问题，并想了解它。

好吧，问题是当我尝试运行 Maven 测试时，我的一些 JUnit 测试崩溃了，但在 Ant 或 Eclipse 的插件中它运行良好。

调试其中一个单元测试我发现了问题：模拟类中的一个布尔属性，明确设置为“false”，当我将它运行到 Maven 中时，它总是“true”。这只发生在使用@Test 注释的一种方法中。

我想其他方法之一正在改变我的属性的值，比如类以不同的顺序执行或类似的东西......我不知道。

我解决了它，将变量再次设置为“false”到我的方法中，确保了我想要的值。

有人知道为什么会这样吗？？

谢谢！

**Maven版本：** 3.0.4

```
@After
public void limpa() {
  Mockit.restoreAllOriginalDefinitions();
}

@Test
public void testWithError() throws Exception {
    Mockit.redefineMethods(MyObject.class, MyObjectMock.class);
    MyOtherObject myOtherObject = createMyOtherObject();
    MyObjectMock.hasRules = false;
    try {
        myService.executeServiceA(myOtherObject);
        Assert.fail("Can't get here. Should throw as exception.");
    } catch (Exception e) {
        Assert.assertEquals("Exception  ", "You can't do this beacause of ...", e.getMessage());
    }
} 
```

我的模拟：

```
public class MyObjectMock{

    //Others attibutes  
    (...)
    public static boolean hasRules = false;

    //Setters and getters
    (...)
} 
```

我的pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myproject</groupId>
    <artifactId>myProject</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>war</packaging>

    <properties>
       <jmockit.version>0.0.1</jmockit.version>
    </properties>

    <build>
        <testSourceDirectory>src/test/java/junit</testSourceDirectory>
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
        </resources>

        <testResources>
            <testResource>
                <directory>src/test/java/selenium</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </testResource>
        </testResources>

        <pluginManagement>
            <plugins>
                <!-- Need Java 5, which is the default since v2.3 of the maven-compiler-plugin. -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.5.1</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <argLine>
                        -javaagent:"${settings.localRepository}"/mockit/jmockit/${jmockit.version}/jmockit-${jmockit.version}.jar
                    </argLine>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>asm</groupId>
            <artifactId>asm</artifactId>
            <version>1.5.3</version>
        </dependency>
        <dependency>
            <groupId>bouncycastle</groupId>
            <artifactId>bcprov-jdk14</artifactId>
            <version>140</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1</version>
        </dependency>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0-oracle-thin-extras</artifactId>
            <version>0.9.0.2</version>
        </dependency>
        <dependency>
            <groupId>commons-betwixt</groupId>
            <artifactId>commons-betwixt</artifactId>
            <version>0.7</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-email</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sf.ehcache</groupId>
            <artifactId>ehcache-core</artifactId>
            <version>2.4.2</version>
        </dependency>
        <dependency>
            <groupId>com.googlecode.ehcache-spring-annotations</groupId>
            <artifactId>ehcache-spring-annotations</artifactId>
            <version>1.1.3</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.4.0.GA</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.3.2.GA</version>
        </dependency>
        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sf.json-lib</groupId>
            <artifactId>json-lib</artifactId>
            <version>2.4</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>net.fckeditor</groupId>
            <artifactId>java-core</artifactId>
            <version>2.4</version>
        </dependency>
        <dependency>
            <groupId>backport-util-concurrent</groupId>
            <artifactId>backport-util-concurrent</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc14</artifactId>
            <version>10.2.0.1.0</version>
        </dependency>
        <dependency>
            <groupId>com.ibm.icu</groupId>
            <artifactId>icu4j</artifactId>
            <version>3.8</version>
        </dependency>
        <dependency>
            <groupId>mockit</groupId>
            <artifactId>jmockit</artifactId>
            <version>${jmockit.version}</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>com.lowagie</groupId>
            <artifactId>itext</artifactId>
            <version>2.1.0</version>
        </dependency>
        <dependency>
            <groupId>atg.taglib.json</groupId>
            <artifactId>json-taglib</artifactId>
            <version>0.4.1</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sourceforge.jexcelapi</groupId>
            <artifactId>jxl</artifactId>
            <version>2.6</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.8.5</version>
        </dependency>

        <dependency>
            <groupId>org.quartz-scheduler</groupId>
            <artifactId>quartz</artifactId>
            <version>1.8.4</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-server</artifactId>
            <version>2.25.0</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-agent</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>2.5.6.SEC03</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-config-browser-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-convention-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-jasperreports-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-jfreechart-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-spring-plugin</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity</artifactId>
            <version>1.6.3</version>
        </dependency>
        <dependency>
            <groupId>org.apache.velocity</groupId>
            <artifactId>velocity-tools</artifactId>
            <version>1.3</version>
        </dependency>
        <dependency>
            <groupId>com.yahoo.platform.yui</groupId>
            <artifactId>yuicompressor</artifactId>
            <version>2.4.6</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.5</version>
        </dependency>
        <dependency>
            <groupId>net.sf.jodreports</groupId>
            <artifactId>jodreports</artifactId>
            <version>2.4.0</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-oxm-tiger</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.ws</groupId>
            <artifactId>spring-ws-core-tiger</artifactId>
            <version>1.5.9</version>
        </dependency>
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-xjc</artifactId>
            <version>2.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom
            </groupId>
            <artifactId>axiom-api</artifactId>
            <version>1.2.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom
            </groupId>
            <artifactId>axiom-impl</artifactId>
            <version>1.2.5</version>
        </dependency>
        <dependency>
            <groupId>org.seleniumhq.selenium.client-drivers</groupId>
            <artifactId>selenium-java-client-driver</artifactId>
            <version>1.0.1</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
        </dependency>
        <dependency>
            <groupId>org.acegisecurity</groupId>
            <artifactId>acegi-security</artifactId>
            <version>1.0.7</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
        </dependency>

    </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:36:49.060

您不能指望 Ant 和 Maven 以相同的顺序执行测试。如果测试具有相互依赖关系，也很容易陷入单独运行时通过，但通过 Ant/Maven 运行时失败，反之亦然的情况；或者只有在首先运行其他一些测试或类似的情况下才能通过。

最好的办法是确保测试不相互依赖。如果测试由于某种原因必须修改静态数据，您应该确保它在运行后重置静态数据，以便每个测试都重新开始。例如：

```
public class NoRulesTest {

    private static boolean oldRulesVal;

    @BeforeClass
    public static void NoRulesSetup() {
        oldRulesVal = MyObjectMock.hasRules;
        MyObjectMock.hasRules = false;
    }

    @AfterClass
    public static void NoRulesTeardown() {
        MyObjectMock.hasRules = oldRulesVal;
    }
} 
```

# python - 在 python 3.3 列表中查找最小值

> ID：15366579
> 
> 赞同：5
> 
> 时间：2013-03-12T16:20:25.027
> 
> 标签：python, python-3.x

例如：

```
a=[-5,-3,-1,1,3,5] 
```

我想找到一个负数和一个正数最小值。

示例：否定

```
print(min(a)) = -5 
```

积极的

```
print(min(a)) = 1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T16:52:07.197

为了获得最小负数：

```
min(a) 
```

为了获得最小的积极性：

`min(filter(lambda x:x>0,a))`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-12T16:24:07.490

```
>>> a = [-5,-3,-1,1,3,5]
>>> min(el for el in a if el < 0)
-5
>>> min(el for el in a if el > 0)
1 
```

`a`如果不包含任何负值或任何正值，则可能需要特殊处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-07T18:22:55.500

```
x = [-5,-3,-1,1,3,5]

# First min is actual min, second is based on absolute 
sort = lambda x: [min(x),min([abs(i) for i in x] )]

print(sort(x)) 
```

```
[-5, 1]

[Program finished] 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T16:49:19.247

使用 functools.reduce

```
>>> from functools import reduce
>>> a = [-5,-3,-1,2,3,5]
>>> reduce(lambda x,y: x if 0 <= x <=y else y if y>=0 else 0, a)
2
>>> min(a)
-5
>>> 
```

注意：如果列表中没有数字 >= 0，这将返回 0。

# jquery - 将图表导出为带有图像的 PDF

> ID：15366584
> 
> 赞同：0
> 
> 时间：2013-03-12T16:20:35.143
> 
> 标签：jquery, charts, highcharts

我在以 pdf 格式导出图表时遇到问题。看下面的例子：

[http://jsfiddle.net/adrianCC/MLasL/28/](http://jsfiddle.net/adrianCC/MLasL/28/)

```
 var chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    width: 600,
                    height: 90,
                    borderColor: '#000000',
                    borderWidth: 0,
                    type: 'line',
                    spacingLeft: 175 
                },
... 
```

图表应导出嵌入图像，但图像不会导出为 pdf。我正在使用 ASP。有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:28:27.833

here is how i solve it :

*   use [google canvg](http://code.google.com/p/canvg/) It takes a URL to a SVG file or the text of an SVG file, parses it in JavaScript, and renders the result on a Canvas element.

*   render your chart svg to the canvas using

    ```
     canvg(document.getElementById('canvas'),getSVG()); 
    ```

*   convert what you have in the canvas to image

    ```
     var canvas = document.getElementById("canvas") ; 
      var img = canvas.toDataURL("image/png"); //img is data:image/png;base64
       img = img.replace('data:image/png;base64,', ''); 
    ```

*   render your image to a hidden field

    ```
     $("hidden field").val(img) ; 
    ```

*   to convert this string to byte array do

    ```
     Dim imageFile() As Byte = Convert.FromBase64String(YOUR HIDDEN FIELD .Value) 
    ```

**UPDATE**

get the highcharts SVG

*   use the `chart.getSVG()` method

[Highcharts API](http://www.highcharts.com/ref/#chart-object)

[jsFiddle Example](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/members/chart-getsvg/)

*   or simply use `$(your svg).html()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:13:56.850

导出工具使用不带动态内容的图表，例如在回调中使用渲染器。所以你应该在加载图表事件中使用渲染器，在图表初始化期间添加你的图像。（[http://api.highcharts.com/highcharts#chart.events.load](http://api.highcharts.com/highcharts#chart.events.load)）

看看例子：http: [//jsfiddle.net/MLasL/38/](http://jsfiddle.net/MLasL/38/)

```
events:{
                    load:function(){
                     this.renderer.image('http://87.106.176.87/Carel/Content/images/logo.jpg', 1, 1, 150, 50).add();

                    }
                } 
```

# sqlite - 使用 SQLite 将十六进制转换为文本

> ID：15366594
> 
> 赞同：3
> 
> 时间：2013-03-12T16:20:52.850
> 
> 标签：sqlite, casting, hex, ascii

我正在尝试使用纯 SQLite 语言将表示十六进制数据的字符串转换为十六进制数据的文本编码（ASCII、UTF-8 等）。本质上我想要`X'[hex]'`语法的功能，但应用于以编程方式派生的十六进制字符串。

例如，我想要 ，`select X(hex_data_string) from ...`这不是合法的 SQLite 语法。

显然，在上面的代码片段中，如果数据不是有效的文本编码，我不一定能够输出数据。也就是说，如果`hex_data_string`包含控制字符等，则`X()`应该以某种方式失败。如果可能，则必须有默认字符编码，或者必须以某种方式指定所需的字符编码。

我*不是*在询问如何从 SQLite 数据库中检索十六进制数据字符串值，然后使用 C 或其他工具进行转换。我正在尝试在纯 SQLite 中执行此转换，因为我有查询，我检查它返回表示二进制数据的十六进制字符的文本表示。大多数二进制数据是 ASCII，因此我希望能够在适用时快速查看查询输出中二进制数据的内容。

直观地说，我认为这可以通过将十六进制数据字符串转换为 blob 并使用来完成，`hex()`但仍然返回十六进制数据字符串。

有任何想法吗？

可能的重复：

[带有列数据的 SQLite X'...' 表示法](https://stackoverflow.com/questions/10213677/sqlite-x-notation-with-column-data)

[sqlite char，ascii 函数](https://stackoverflow.com/questions/11604766/sqlite-char-ascii-function)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-05-07T11:52:57.027

这已经很老了，但我一直在寻找同样的东西，所以我想我会发布：

看来您可以将十六进制数据转换为 varchar 以将其转换为 ascii。

即： `select cast(data as varchar) from some_table`将返回二进制字段（数据）的字符串表示形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:22:18.457

这在纯 SQLite 中是不可能的。

作为一个嵌入式数据库，SQLite 被设计成只提供纯数据库功能，而将程序逻辑留给应用程序。您*应该*从 SQLite 数据库中检索十六进制数据字符串值，然后使用 C 或其他工具对其进行转换。

如果您控制运行查询的程序，则可以安装执行此转换的用户定义函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T13:44:55.507

这不会完全有用，因为它不能真正内联使用，但我过去曾这样做过，当时我只想转换一行数据而不是创建/查找另一个实用程序。

```
WITH RECURSIVE test(c,cur) as (
     select '','686F77647921'
   UNION ALL
    select c || char((case substr(cur,1,1) when 'A' then 10 when 'B' then 11 when 'C' then 12 when 'D' then 13 when 'E' then 14 when 'F' then 15 else substr(cur,1,1) end)*16
               + (case substr(cur,2,1) when 'A' then 10 when 'B' then 11 when 'C' then 12 when 'D' then 13 when 'E' then 14 when 'F' then 15 else substr(cur,2,1) end)),
substr(cur,3)
from test where length(cur)>0
)
select * from test 
```

# asp.net - 这段代码有什么问题？为什么列表不识别？

> ID：15366595
> 
> 赞同：0
> 
> 时间：2013-03-12T16:20:54.050
> 
> 标签：asp.net, .net, asp.net-mvc

这段代码有什么问题？

```
bool claimExists;
        string currentClaimControlNo = "700209308399870";
        List<string> claimControlNo = new List<string>();
        claimControlNo.Add("700209308399870");

        if (claimControlNo.Contains(currentClaimControlNo.Substring(0, 14)))
            claimExists = true;
        else
            claimExists = false; 
```

为什么上面的 claimControlNo 会变成假？既然我知道该值存在，我该如何调整代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:25:35.193

它报告错误，因为您不是在询问列表是否包含`currentClaimControlNo`，而是在询问它是否包含一个字符串，该字符串是 15 个字符的前 14 个字符`currentClaimControlNo`。

试试这个：

```
 claimExists = claimControlNo.Any(ccn => ccn.StartsWith(currentClaimControlNo.Substring(0,14))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:23:31.203

你的计数是错误的。有 15 个字符。您的子字符串正在切断最后一个不符合条件的 0。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:23:31.827

因为列表中的 contains 查找整个项目，而不是子字符串：

```
currentClaimControlNo.Substring(0, 14)
"70020930839987" 
```

不一样

```
 700209308399870 
```

您缺少一个数字，因此您的列表搜索失败了。

我认为您正在尝试在包含该子字符串的列表中查找某些内容。不要使用列表包含方法。如果您试图在列表中找到包含子集的内容，请执行此操作

```
claimExists = claimControlNo.Any(item => item.Contains(currentClaimControlNo.Substring(0, 14))) 
```

这会遍历每个项目，`claimControlNo`然后每个项目都可以检查它是否包含子字符串。

为什么要这样做？`Contains`字符串上的方法

> 返回一个值，该值指示指定的 System.String 对象是否出现在此字符串中。

这就是你想要的。

`Contains`然而，在名单上

> 确定元素是否在 System.Collections.Generic.List 中。

它们不一样，因此您感到困惑

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T16:24:16.320

你真的需要这个解释吗？

当字符串长度为 15 时，您调用`Substring`14 个字符。然后您正在检查您的列表（只有一个长度为 15 的项目）是否包含长度为 14 的项目。它不需要检查值，长度足以确定它不匹配。

解决方案当然是不做`Substring`，这是没有意义的。

看起来像这样：

```
if (claimControlNo.Contains(currentClaimControlNo))
    claimExists = true;
else
    claimExists = false; 
```

* * *

再说一次，也许您知道您正在修剪搜索，并且实际上正在寻找列表中具有部分匹配的任何内容？

如果是这种情况，那么您可以简单地循环列表并对`Contains`每个项目执行 a 。像这样的东西：

```
bool claimExists = false;
string searchString = currentClaimControlNo.Substring(0, 14);
foreach(var s in claimControlNo)
{
   if(s.Contains(searchString))
   {
      claimExists = true;
      break;
   }
} 
```

或者使用一些稍微复杂的（肯定比我记得的更复杂）LINQ 查询。快速猜测（公平地说，我非常棒）：

```
bool claimExists = claimControlNo.Any(x => x.Contains(searchString)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T16:25:25.950

因为您正在删除子字符串中的最后一个数字。

如果你换行

```
if (claimControlNo.Contains(currentClaimControlNo.Substring(0, 14))) 
```

至

```
if (claimControlNo.Contains(currentClaimControlNo.Substring(0, 15))) 
```

有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T16:24:14.937

核实：

```
// str will be equal to 70020930839987
var str = currentClaimControlNo.Substring(0, 14);

List<string> claimControlNo = new List<string>();
claimControlNo.Add("700209308399870"); 
```

值 str 不包含在列表中。

# c - 为什么这个 print 语句改变了前一个指针？

> ID：15366598
> 
> 赞同：1
> 
> 时间：2013-03-12T16:20:59.493
> 
> 标签：c, pointers, printf

这是程序：

```
#include <stdio.h>

main() {
  int * i;
  int * j;
  printf("%d\n", i);
  printf("%d\n", j);
} 
```

我编译并运行它，输出是：

```
888086464
0 
```

但是，如果我注释掉第二个 printf

```
#include <stdio.h>

main() {
  int * i;
  int * j;
  printf("%d\n", i);
  //printf("%d\n", j);
} 
```

输出beomes：

```
0 
```

我想知道为什么第二个 printf 会更改指针 i。
而且，C 是如何初始化指针的？据我所知，如果指针未初始化，它的值 Null 将等于 0，对吗？为什么在第一个输出中， i 被初始化？

编辑：根据你们的建议，我做了一些改变：

```
#include <stdio.h>

main() {
  int * i;
  int * j;
  printf("%p\n", i);
  printf("%p\n", j);
} 
```

这使

```
0x7fff67a361b0
(nil) 
```

但是当我注释掉第二个 printf

```
#include <stdio.h>

main() {
  int * i;
  int * j;
  printf("%p\n", i);
  //printf("%p\n", j);
} 
```

输出为零。我很好奇为什么在有两个 printf 的第一个版本中，只有 j 是 nil 而 i 不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:22:46.523

您没有初始化任何一个指针。您正在查看的是未定义的行为。您看到的值只是堆栈中的垃圾值，每次运行时都可能更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:22:19.130

如果您没有初始化指针，它可以有任何值。

您**必须**初始化它们。否则你会得到一个`undefined behavior`.

指针打印的正确方法是：

```
printf("%p", pointer); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T17:29:47.380

您可以通过查看为两个版本生成的机器代码来回答您的问题（对于 gcc，这应该是 -S 选项）。

我*怀疑*在第二个版本中，`j`根本没有创建（因为它没有在任何地方使用），所以`i`在本来用于`j`. 无论出于何种原因，您的堆栈设置为使前 64 位`0x0000000000000000`后跟`0x00007fff67a361b0`

IOW，在第一个版本中，您的堆栈看起来像

```
 Item        Address            00  01  02  03  04  05  06  07   
 ----        -------            --  --  --  --  --  --  --  --
    j        0x8000             00  00  00  00  00  00  00  00
    i        0x8008             00  00  7f  ff  67  a3  61  b0 
```

而在第二个版本中，它看起来像

```
 Item        Address            00  01  02  03  04  05  06  07   
 ----        -------            --  --  --  --  --  --  --  --
    i        0x8000             00  00  00  00  00  00  00  00
             0x8008             ??  ??  ??  ??  ??  ??  ??  ?? 
```

（地址值仅用于说明，并不对应任何真实架构）。

对于傻笑，将打印语句修改为

```
printf("%p: %p\n", &i, i);
printf("%p: %p\n", &j, j); 
```

在第一个版本和

```
printf("%p: %p\n", &i, i); 
```

在第二。我敢打赌，在第二个版本中为（`&i`变量的地址）打印的值将与在第一个版本中为（变量的地址）`i`打印的值相同。 `&j``j`

**注意**- 这与 C*语言*无关，与您的特定实现（编译器、链接器等）有关。我不相信您正在调用未定义的行为（您没有通过那些无效指针访问任何内存），但是您看到了不显式初始化指针值的危险。

在没有关键字的块范围内声明的变量不会`static`被初始化；实例化变量时内存中的任何内容都是初始值，并且该位模式可能不代表该类型的有效值（这称为*陷阱表示*）。在文件范围（任何函数之外）或使用`static`关键字声明的变量初始化为 0 或 NULL，具体取决于它是标量类型还是指针类型。聚合类型（数组、结构和联合）的规则稍微复杂一些，但基本原理是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:26:36.363

`static`C 只会自动将全局变量（全局变量在函数*外部*声明）初始化为零。 *自动*变量（这就是您的两个指针所调用的）不会自动初始化，因此您正在打印“堆栈噪音”（即，当您的函数初始化时，堆栈上发生的任何值。打印的值甚至可能在运行之间发生变化你的程序。如果你想让它们被初始化，`NULL`你需要告诉编译器：

```
int *i = NULL;
int *j = NULL; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T16:23:23.713

“未初始化”与“初始化为 0”（或 NULL）非常不同。

变量`i`和`j`未初始化。他们留下了记忆中的东西。

当您注释掉第二个`printf`时，变量`j`不再使用。它可能已被编译器优化（意味着根本没有定义）。在这种情况下，`i`可能在不同的位置，具有不同的*未初始化*值。

这实际上是*未定义的行为*。我的最后一部分是纯粹的猜测，你永远无法确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T16:24:34.037

指针可以容纳任何东西。C 不会初始化本地（自动）变量，除非您告诉它这样做。如果您将它们定义为静态，它们将被初始化为 NULL。

此外，您应该使用`%p`打印指针，而不是`%d`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T16:25:04.487

如果您不初始化指针地址，您将获得**未定义的行为**

在这里，您将指针地址打印为 int ，这是不正确的，您应该使用`"%p"` 而不是`"%d"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T16:25:33.173

`And, how does C initialize pointers?`

C没有，你做。

`As far as I know, if a pointer is not initialized, it would have value Null which is equal to 0, correct?`

错误的。如果它没有被初始化，它就没有定义的值。会是垃圾。打印未初始化的变量将导致垃圾，这就是您无法预期输出的原因。

`Why in the first output, the i was initialized?`

不是，它只是碰巧指向 0。

旁注：`%p`打印指针时应该使用。

# coffeescript - Ember 数据（REST 适配器）创建模型实例但不发布

> ID：15366604
> 
> 赞同：0
> 
> 时间：2013-03-12T16:21:09.743
> 
> 标签：coffeescript, ember.js, ember-data

在编写我的第一个 Ember 应用程序的过程中，我无法弄清楚如何使用 REST 适配器将新资源发布到我的 API。

该应用程序成功检索资源列表并显示它，因此看来我的模型定义正确并且适配器和 API 之间的通信正常。当我单击 CreateBugView 按钮时，新实例会显示在列表中，因此这部分也可以正常工作。但是，我可以在检查器中看到没有对 API 发出 POST 请求，当我刷新页面时，可以预见，该实例无处可见。

我正在使用 1.0.0-rc.1 版本的 Ember 和我今天克隆和构建的 Ember Data 版本。

以下是我的代码，我会感谢任何可以帮助我找出问题所在的人。

```
App = Em.Application.create()

# Templates

require 'templates/application'
require 'templates/index'

# Models

App.Bug = DS.Model.extend
  name: DS.attr 'string'

# Views

App.CreateBugView = Em.View.extend
  tagName: 'button'

  click: (evt) ->
    bug = App.Bug.createRecord
      name: 'Sean'

# Routes

App.IndexRoute = Em.Route.extend
  model: -> App.Bug.find()
  setupController: (controller, bugs) ->
    controller.set 'bugs', bugs
    controller.set 'App', App

# Store

App.Store = DS.Store.extend
  revision: 12

# Router

App.Router.map ->
  @route 'index', path: '/'

App.initialize() 
```

索引模板

```
<ul>
  {{#each bugs}}
    <li>{{name}}</li>
  {{/each}}
</ul>

{{#view App.CreateBugView}}
  Create new bug!
{{/view}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:44:06.500

我相信只有在 store 上调用 commit() 后，模型才会持久化。

显然，如果不构建 REST api，我无法完全测试，但使用夹具适配器，我可以在我的控制器上调用 save() 方法，该方法会推送 @store.commit()。对于休息适配器，这应该产生 POST 事件。

请看看这个 jsFiddle：http: [//jsfiddle.net/nrionfx/uqRG5/5/](http://jsfiddle.net/nrionfx/uqRG5/5/)

```
 click: (evt) ->
    bug = App.Bug.createRecord
      name: 'Sean'
    @.get('controller').save() 
```

和

```
App.IndexController = Em.ArrayController.extend
    save: ->
        console?.log("Commiting changes to store")
        @store.commit() 
```

# eventbrite - 使用电子邮件验证单个与会者

> ID：15366606
> 
> 赞同：0
> 
> 时间：2013-03-12T16:21:14.433
> 
> 标签：eventbrite

有没有一种方法可以通过发送返回特定与会者的信息：

1) 与会者的电子邮件地址

2）我的用户密钥

3) 我的 app_key

我可以通过从这个“event_list_attendees”方法中搜索返回的 xml 来做到这一点，但是，我宁愿只接收一个结果（而不是每次调用数百个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:33:38.850

> 注意：我在 Eventbrite 的平台团队工作

目前无法使用 搜索特定与会者`event_list_attendees`。

但是，您可以通过对结果进行分页来减少返回的数据量，直到您找到参与者，或者`modified_after`如果您知道用户上次更新的时间，则使用该参数：http: [//developer.eventbrite.com/doc/events /event_list_attendees/](http://developer.eventbrite.com/doc/events/event_list_attendees/)

我意识到这个限制是不理想的。我们正在积极构建一个新的 API，它更加 RESTful 并且没有这样的问题。

# javascript - 根据带有类标签的下拉选择隐藏/显示表单字段

> ID：15366608
> 
> 赞同：0
> 
> 时间：2013-03-12T16:21:15.797
> 
> 标签：javascript, jquery, html, forms

我对应用程序表单上的显示/隐藏功能有疑问。应用程序表格在这里 -> [http://www.specialfinance.co.uk/introducers/submit-an-enquiry/secured-loans.html](http://www.specialfinance.co.uk/introducers/submit-an-enquiry/secured-loans.html)

目前，该表单作为多页表单（在 javascript 中）工作，这很好，它做得很好，但是根据我在这里查看的任何问答指南，我无法弄清楚（我已经通过许多谷歌搜索）是​​如何集成进一步的显示/隐藏脚本来隐藏申请人 2 列，如果顶部的下拉列表的值为 1。

该列是一个表格，所有输入都位于单独的行中，所以我认为最简单的方法是链接到一个类，然后隐藏该类，但我不知道该怎么做。

我用我的javascript知识到达那里，但这似乎是我无法克服的障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:34:54.660

[这](http://jsfiddle.net/7rZmC/1/)是一个快速而肮脏的例子。很容易看出如何扩展它。

```
$("#drop").change(function(){
    if( $(this).val() === "2" ) {
         $(".rest").slideDown("fast");   
    } else {
       $(".rest").slideUp("fast");     
   }
}); 
```

[点击查看演示](http://jsfiddle.net/7rZmC/1/) 编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:26:03.493

您可以使用带有下拉列表的 .change() (jQuery) 来查看值是什么，然后基于此，隐藏和显示您需要的值。

```
$("#idOfDropDown").change(function() {
    if ($(this).val() == 1) {
        //Show  or Hide what you need .show()
    }
    else {
        //Show or Hide .hide()
}); 
```

这是一个演示： http: [//jsfiddle.net/Szt59/1/](http://jsfiddle.net/Szt59/1/)使用一个类。

# wpf - 如何在 Windows 8 商店应用程序中访问 Parent 的 DataContext

> ID：15366609
> 
> 赞同：11
> 
> 时间：2013-03-12T16:21:16.747
> 
> 标签：wpf, xaml, windows-8, windows-runtime, winrt-xaml

这是基于 XAML 的应用程序 (WPF/Silverlight/WinRT) 中的常见情况。

WPF 相关链接 -> [WPF 数据绑定：如何访问“父”数据上下文？](https://stackoverflow.com/questions/1127933/wpf-databinding-how-do-i-access-the-parent-data-context)

`RelativeSource`，`AncestorType`并且`Mode=FindAncestor`通常会在 WPF 中进行救援。

WinRT API 中缺少这两者。如何访问父母的（可能不是直接的）`DataContext`，？

（我知道`TemplateBinding`，`ElementBinding`但两者都不适合在 DataTemplate 中使用）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T20:19:46.327

我只是有同样的问题。大概这很常见？？

这是一个有效的粗略解决方案：

*   将顶级元素的 Tag 属性绑定到 DataContext

    ```
    <Grid Name="gridTop" Tag="{Binding}" /> 
    ```

*   在嵌套元素中通过 ElementName 绑定你想要的属性，即

    ```
    {Binding Tag.SomeProp, ElementName=gridTop} 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:59:53.930

ElementName 绑定仍然是可能的，并且可能适用于您的情况。否则，您需要实现附加行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:50:14.560

有几种方法可以处理此问题：

正如 Filip 所指出的，ElementName 绑定是最常见的方法。

您可以遍历视觉树，直到找到父级。这就是 FindAcestor 在内部所做的。您可以将其修饰为易于重用的行为。

如果您使用视图模型，您可以使用消息而不是绑定，或者您可以将父上下文添加到每个子视图模型。

选择最佳解决方案将取决于您的具体情况。

# java - Java Web Start 应用程序适用于 Java 6，但前提是完全卸载 Java 7。(Win7)

> ID：15366611
> 
> 赞同：4
> 
> 时间：2013-03-12T16:21:19.063
> 
> 标签：java, windows-7, batch-file, java-web-start

我们正在使用基于 Web 的 KVM 切换器，它会打开 Java Web Start 启动器以启动控制台。当我使用 Java 6 更新 43 运行它时，一切正常。然后，我在旁边安装 Java 7 update 17，它得到一个套接字连接错误。我冒昧地编写了一个简单的批处理脚本，它强制选择 Java 主页以及 Web 启动应用程序。然后我保存了下载的 jnlp 文件，以便我可以随意调用它。我绝不是 Java 开发人员，因此对于任何冒犯性的做法，我深表歉意。

```
set JAVA_HOME="C:\Program Files (x86)\Java\jre6"
%JAVA_HOME%\bin\javaws.exe   "C:\opt\kvm\ui.jnlp" 
```

这是我收到的连接异常。

```
java.io.IOException: JNLP Jar download failure.
at com.sun.javaws.LaunchDownload.validateResults(Unknown Source)
at com.sun.javaws.LaunchDownload.downloadJarFiles(Unknown Source)
at com.sun.javaws.LaunchDownload.downloadEagerorAll(Unknown Source)
at com.sun.javaws.Launcher.downloadResources(Unknown Source)
at com.sun.javaws.Launcher.prepareResources(Unknown Source)
at com.sun.javaws.Launcher.prepareAllResources(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.prepareToLaunch(Unknown Source)
at com.sun.javaws.Launcher.launch(Unknown Source)
at com.sun.javaws.Main.launchApp(Unknown Source)
at com.sun.javaws.Main.continueInSecureThread(Unknown Source)
at com.sun.javaws.Main$1.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)' 
```

我想知道您是否知道安装多个 Java 版本时 Java 会有不同行为的任何原因？我能想到的最好的解释是图书馆冲突。如果是这种情况，那么我需要找到一种方法来手动设置库路径，以便只调用 Jre6 dlls/tools。如果有人有任何建议，我将不胜感激。我还附上了内部 jnlp 数据。非常感谢您的宝贵时间。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- JNLP File IRP EMS     -->
<jnlp
  spec="6.0+"
  codebase="https://<IP-Address>">
  <information>
    <title>TrippLite UI</title>
    <vendor>TrippLite</vendor>
    <homepage href="http://www.tripplite.com"/>
    <description kind="short">TrippLite Manager</description>
    <icon href="minicom_desktop.gif"/> 
  </information>

  <security>
      <all-permissions/>
  </security>
  <resources>
    <j2se version="1.6+" initial-heap-size="256m" java-vm-args="-Xnoclassgc -    XX:PermSize=64m" 
        href="http://java.sun.com/products/autodl/j2se"/> 
        <jar href="./boot.jar"/>
    <jar href="./app.jar"/>
    <jar href="./vendor.jar"/>
    <jar href="./miglayout15-swing.jar"/>
    <jar href="./jnlp.jar"/>
<jar href="./xstream-1.3.1.jar"/>
<jar href="./xpp3_min-1.1.4c.jar"/>
<nativelib href="./plugin.jar"/>

    <property name="devport" value="900"/>       
  </resources>
  <application-desc main-class="com.minicom.app.video.ui.ShowLogin">
  </application-desc>
</jnlp> 
```

## 更新

我使用 -verbose 运行脚本并得到以下输出。我是新来的，所以我不能发布图片。链接在这里。

[https://raw.github.com/marvins/temp_images/master/with_setting.png](https://raw.github.com/marvins/temp_images/master/with_setting.png)

现在看来问题是因为 vm 正在调用 jre7 的 javaw.exe 文件。你知道我如何覆盖“-Djnlpx.jvm=C:\Program Files (x86)\Java\jre7\bin\javaws.exe 并用 jre6 替换它吗？我正在尝试使用不同形式的“-J- Djnlpx.jvm=" 并且它的外观类似于下面的。它在那里显示它，但不会替换该值。

有没有更合适的方法来强制正确的 javaws？

```
%JAVA_HOME%\bin\javaws.exe  "-J-Djnlpx.jvm=C:\Program Files (x86)\Java\jre6\bin\javaw.exe" -verbose "C:\opt\kvm\ui.jnlp" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:09:17.890

在四处挖掘之后，我卸载了 Java 7，得到了一个工作配置，使用 javaws.exe 复制了 -verbose 的输出，然后将其集成到我的脚本中。最后，我重新安装了所有 java 版本，它现在可以工作了。这是我的脚本。

```
set JAVA_HOME="C:\Program Files (x86)\Java\jre6"
set CLASSPATH=%JAVA_HOME%\lib\deploy.jar

set BOOTCP=%JAVA_HOME%\lib\javaws.jar;%JAVA_HOME%\lib\deploy.jar;%JAVA_HOME%\lib\plugin.jar
set SECPOL=file:%JAVA_HOME%\lib\security\javaws.policy
set SPLASHPORT="-Djnlpx.splashport=49688"

%JAVA_HOME%\bin\javaw.exe -Xbootclasspath/a:%BOOTCP% -classpath %CLASSPATH% -Djava.security.policy=%SECPOL% -DtrustProxy=true -Xverify:remote -Djnlpx.home=%JAVA_HOME%\bin -Dsun.aws.warmpu=true -Djnlpx.origFilenameArg=C:\opt\kvm\ui.jnlp -Djnlpx.remove=false -Xnoclassgc -XX:PermSize=64m -Xms1028m -Djnlpx.heapsize=1028m,NULL %SPLASHPORT% com.sun.javaws.Main C:\opt\kvm\ui.jnlp 
```

它非常丑陋，但这就是它所要求的逐字记录。我没有意识到所有的 java 工具都是同一个 JVM 调用，只是对 main.js 进行了修改。现在说得通了，但作为一个 C++ 人，这东西有点神奇。

它仍然没有回答如何仅使用 javaws 自己配置它，但它确实使用它的输出解决了问题。

再次感谢你的帮助。

# java - 组件状态改变时的动作

> ID：15366612
> 
> 赞同：0
> 
> 时间：2013-03-12T16:21:21.053
> 
> 标签：java, arrays, swing, netbeans, jcheckbox

我有一系列作为数组生成并显示在 jPanel 中的单选按钮。

当单选按钮处于输出状态但不在输入中（输入或输出是单选选项）时，我希望在第二个面板中启用一系列复选框。

每当任何单选按钮状态发生更改但不知道如何执行此操作时，我都想调用检查状态方法，因为它们是在数组中创建的。

目前，仅当实际单击单选按钮面板时才调用该方法。

```
package my.ArduinoGUI;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.GridLayout;

public class ArduinoGUI extends javax.swing.JFrame {

public ArduinoGUI() {
    initCustomComponents();
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    buttonGroup1 = new javax.swing.ButtonGroup();
    jPanel1 = new javax.swing.JPanel();
    digitalPinPanel = new javax.swing.JPanel(new GridLayout(0, 3));
    jPanel3 = new javax.swing.JPanel(new GridLayout(0, 1));
    jPanel2 = new javax.swing.JPanel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder("Outputs"));
    jPanel1.setName("Outputs"); // NOI18N

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 209, Short.MAX_VALUE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 106, Short.MAX_VALUE)
    );

    digitalPinPanel.setBorder(javax.swing.BorderFactory.createTitledBorder("Digital Pin State"));
    digitalPinPanel.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseReleased(java.awt.event.MouseEvent evt) {
            digitalPinPanelMouseReleased(evt);
        }
    });
    digitalPinLabelArray = new javax.swing.JLabel[digitalPinTotal];
    digitalPinRadioButtonArray = new javax.swing.JRadioButton[digitalPinTotal][2];
    digitalPinGroupArray = new javax.swing.ButtonGroup[digitalPinTotal];
    for(int x = 0; x < digitalPinTotal ; x++) {
        digitalPinGroupArray[x] = new javax.swing.ButtonGroup(); // populate button group
        digitalPinLabelArray[x] = new javax.swing.JLabel(); // populate label array
        digitalPinLabelArray[x].setText("Pin " + (x +2));
        digitalPinPanel.add(digitalPinLabelArray[x]); // add label to panel
        for(int y = 0; y < 2; y++){
            digitalPinRadioButtonArray[x][y] = new javax.swing.JRadioButton(); // populate radio button array
            if (y == 0) {digitalPinRadioButtonArray[x][y].setText("Input");}
            if (y == 1) {digitalPinRadioButtonArray[x][y].setText("Output"); digitalPinRadioButtonArray[x][y].setSelected(true);
            }

            digitalPinGroupArray[x].add(digitalPinRadioButtonArray[x][y]); // assign radio buttons to group
            digitalPinPanel.add(digitalPinRadioButtonArray[x][y]); // add buttons to panel
        }

    }

    jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder("Generated Boxes"));
    digitalPinOutputArray = new javax.swing.JCheckBox[digitalPinTotal];

    for(int x = 0; x < digitalPinTotal ; x++) {
        digitalPinOutputArray[x] = new javax.swing.JCheckBox();
        digitalPinOutputArray[x].setText("Output Pin " + (x+2));

        jPanel3.add(digitalPinOutputArray[x]);

    }

    jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder("Analog Pin State"));

    javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 126, Short.MAX_VALUE)
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGap(18, 18, 18)
            .addComponent(digitalPinPanel, javax.swing.GroupLayout.PREFERRED_SIZE, 159, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(23, 23, 23)
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, 199, Short.MAX_VALUE)
                    .addGap(18, 18, 18)
                    .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(digitalPinPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
            .addContainerGap())
    );

    digitalPinPanel.getAccessibleContext().setAccessibleName("DigitalPins");

    pack();
}// </editor-fold>

private void digitalPinPanelMouseReleased(java.awt.event.MouseEvent evt) {

// if output selected enable checkbox otherwise disable it
    for (int x = 0; x < digitalPinTotal; x++) {

        if (digitalPinRadioButtonArray[x][0].isSelected() == true) {
            digitalPinOutputArray[x].setEnabled(false);
        }

        if (digitalPinRadioButtonArray[x][1].isSelected() == true) {
            digitalPinOutputArray[x].setEnabled(true);
        }

    }

}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Windows".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ArduinoGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new ArduinoGUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.ButtonGroup buttonGroup1;
private javax.swing.JPanel digitalPinPanel;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
// End of variables declaration
private int digitalPinTotal = 12;
private int analogPinTotal = 8;
private javax.swing.JCheckBox[] digitalPinOutputArray;
private javax.swing.JRadioButton[][] digitalPinRadioButtonArray;
private javax.swing.ButtonGroup[] digitalPinGroupArray;
private javax.swing.JLabel[] digitalPinLabelArray;

private void initCustomComponents() {
    //throw new UnsupportedOperationException("Not yet implemented");
    // create checkbox array
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:41:53.817

```
 digitalPinRadioButtonArray[x][y].addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    // TODO Auto-generated method stub
                    if(e.getActionCommand().equals("Output"))
                            {
                                    digitalPinOutputArray[2].setSelected(true);
                            }

                }
            }); 
```

尝试这个

# javascript - JavaScript OAuth2 库

> ID：15366617
> 
> 赞同：0
> 
> 时间：2013-03-12T16:21:35.857
> 
> 标签：javascript, node.js, oauth-2.0

是否有适用于 node.js 和浏览器的消费者 OAuth2 javascript 库？我正在开发一个 common.js 模块，该模块需要在两种环境中工作并具有 OAuth2 使用功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:45:59.907

目前 Google Web Toolkit OAuth2 库是单独提供的。

[https://code.google.com/p/gwt-oauth2/](https://code.google.com/p/gwt-oauth2/)

# javascript - DFP 中的多种广告/广告素材尺寸

> ID：15366618
> 
> 赞同：3
> 
> 时间：2013-03-12T16:21:35.970
> 
> 标签：javascript, jquery, google-dfp

我想知道如何在 DFP 中为不同的浏览器宽度/屏幕分辨率创建不同的广告/广告素材尺寸。我发现这篇关于这个问题的 DFP 文章，但它是专门针对移动用户的，他们没有提供任何代码，而只是一种方法。这是这篇文章：

[http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=2615435](http://support.google.com/dfp_premium/bin/answer.py?hl=en&answer=2615435)

在其中，他们提供了一个如下所示的代码方法：

```
if screen size < 300px
ad tag size = 216
else if screen size < 600px
ad tag size = 300
else
ad tag size = 600 
```

但本文仅适用于移动广告。:( 这是我的广告图片的 jsfiddle：http: [//jsfiddle.net/EptwH/3/](http://jsfiddle.net/EptwH/3/)

如果有人能告诉我是否有一种方法可以为不同的浏览器宽度提供多种创意/广告尺寸，那就太棒了。还有一件事要补充，我不想完全改变广告尺寸，比例将保持不变......例如，我想要一个 100x50 的广告，然后是 200x100，然后是 300x150，然后是 400x200等等如果有人可以帮助我，或者让我知道这是否可能......那将是惊人的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:26:56.183

如果您看到 DFP 要求您嵌入页面的 JS 代码，它们会分为三个“阶段”：

*   首先，您在页面上定义可用的插槽
*   其次，您启用该服务
*   第三，您要求填补空缺。

在第一步中，您可以有一些条件代码。所以你可以替换这个语句：

```
googletag.defineSlot('/1234567/my_slot', [728, 90], 'gpt-apps-large').addService(googletag.pubads()); 
```

有条件：

```
if(window.width>728) {
   googletag.defineSlot('/1234567/my_slot', [728, 90], 'gpt-apps-large').addService(googletag.pubads());
} else {
   googletag.defineSlot('/1234567/my_slot', [468, 60], 'gpt-apps-large').addService(googletag.pubads());
} 
```

**编辑：**额外提示 - 使用此处的信息[https://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=181070](https://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=181070)调试您的广告投放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T17:20:53.370

对我来说简单`window.width`没有工作，但这很好：

```
if(window.innerWidth>728) {
   googletag.defineSlot('/1234567/my_slot', [728, 90], 'gpt-apps-large').addService(googletag.pubads());
} else {
   googletag.defineSlot('/1234567/my_slot', [468, 60], 'gpt-apps-large').addService(googletag.pubads());
} 
```

# c++ - 初始化变量之前是否调用了父类构造函数？

> ID：15366621
> 
> 赞同：13
> 
> 时间：2013-03-12T16:21:41.960
> 
> 标签：c++, class, inheritance

是在初始化变量之前调用父类的构造函数，还是编译器会先初始化类的变量？

例如：

```
class parent {
  int a;
public:
  parent() : a(123) {};
};

class child : public parent {
  int b;
public:
            // question: is parent constructor done before init b?
  child() : b(456), parent() {};
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T16:26:29.567

是的，基类在派生类的成员之前和构造函数体执行之前被初始化。

### 12.6.2 初始化基和成员 [class.base.init]

> 在非委托构造函数中，初始化按以下顺序进行：
> 
> — 首先，并且仅对于最派生类 (1.8) 的构造函数，虚拟基类按照它们在基类的有向无环图的深度优先从左到右遍历中出现的顺序进行初始化，其中“左-to-right”是派生类基类说明符列表中基类的出现顺序。
> 
> — 然后，直接基类按照它们出现在 base-specifier-list 中的声明顺序进行初始化（无论 mem-initializers 的顺序如何）。
> 
> — 然后，非静态数据成员按照它们在类定义中声明的顺序进行初始化（同样不管 mem-initializers 的顺序）。
> 
> — 最后，执行构造函数主体的复合语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:23:11.063

是的，父构造函数总是在派生类之前调用​​。否则，派生类无法“更改”父类设置的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:27:51.483

就像一些建议一样，如果您不确定，通常可以自己测试这样的事情：

```
#include <iostream>
using namespace std;

class parent {
protected:
  int a;
public:
  parent() : a(123) { cout << "in parent(): a == " << a << endl; };
};

class child : public parent {
  int b;
public:
            // question: is parent constructor done before init b?
  child() : b(456), parent() { cout << "in child(): a == " << a << ", b == " << b << endl; };
};

int main() {
  child c;
  return 0;
} 
```

印刷

```
in parent(): a == 123
in child(): a == 123, b == 456 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:47:47.510

是的，对象的构造是从父类开始到子类的，所以构造函数的调用是按这个顺序来的。在破坏的情况下，情况正好相反。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T17:01:36.443

将派生类视为其基类的额外添加或扩展，添加因此它添加到某些东西（这个东西必须已经存在）。然后，另一个问题是成员的初始化。在这里，您提供了默认构造函数

```
public:
  parent() : a(123) {}; 
```

因此，即使您以这种方式创建父级，该成员也将默认初始化为 123：

```
parent p; 
```

如果没有用值初始化对象的默认构造函数

```
class parent {
public:
  int a;
}; 
```

比成员的默认值取决于，如果类是 POD，则 int 将默认初始化为 0，但如果不是，即您提供更多成员，例如字符串或向量

```
class parent {
public:
  int a;
  std::string s;
  std::vector<int> v;
}; 
```

如果没有初始化它的默认构造函数， int 将具有随机值。

# c# - 网格视图中的文本框未将其值保存在表中

> ID：15366634
> 
> 赞同：1
> 
> 时间：2013-03-12T16:22:22.457
> 
> 标签：c#, asp.net

我有一个 gridview`gv_Products`和一个 gridview `Gv_selected`。我的产品GridView有一个复选框，当检查在`gv_selected`GridView中输入所选行时。
我在`gv_selected`gridiew 中添加了一个文本框来输入我想重新订购的数量。在我按下提交按钮后，我输入的数量将失去其价值。

```
<asp:GridView ID="gvSelected" runat="server" 
    AutoGenerateColumns = "False" Font-Names = "Arial" CssClass="gridviewsSmall" Font-Size = "11pt" 
    OnRowDataBound="GridView_gvSelected_RowDataBound" EnableViewState="False"                                    
    EmptyDataText = "No Records Selected"  >
        <Columns>
         <asp:BoundField DataField="ProductId" HeaderText="Product ID" ReadOnly="True" 
            SortExpression="ProductId" />
        <asp:TemplateField HeaderText="Product No" SortExpression="ProductNo">
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Bind("ProductNo") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Product Name" SortExpression="Product_name">
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# Bind("Product_name") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
         <asp:BoundField DataField="SupplierId" HeaderText="Supplier ID" ReadOnly="True" 
            SortExpression="SupplierId" />
            <asp:TemplateField HeaderText="Quantity" SortExpression="Quantity">
                <ItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server"  Text='<%#Bind("Quantity") %>'></asp:TextBox>
                </ItemTemplate>
            </asp:TemplateField>
 </Columns>  
 </asp:GridView>
 <asp:Button ID="btnSendOrder" Visible="false" runat="server" Text="Send Order" 
onclick="btnSendOrder_Click" /> 
```

这是我在 gvSelected gridview 中添加行的代码

```
 private DataTable CreateDataTable()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("ProductId");
        dt.Columns.Add("ProductNo");
        dt.Columns.Add("Product_name");
        dt.Columns.Add("SupplierId");
        dt.Columns.Add("Quantity");

        dt.AcceptChanges();
        return dt;
    }

    private DataTable AddRow(GridViewRow gvRow, DataTable dt)
    {

        DataRow[] dr = dt.Select("ProductId = '" + gvRow.Cells[3].Text + "'");
        if (dr.Length <= 0)
        {
            dt.Rows.Add();
            dt.Rows[dt.Rows.Count - 1]["ProductId"] = gvRow.Cells[3].Text;
            dt.Rows[dt.Rows.Count - 1]["ProductNo"] = (gvRow.FindControl("Label2") as Label).Text;
            dt.Rows[dt.Rows.Count - 1]["Product_name"] = (gvRow.FindControl("Label3") as Label).Text;
            dt.Rows[dt.Rows.Count - 1]["SupplierId"] = (gvRow.FindControl("Label5") as Label).Text;
            dt.Rows[dt.Rows.Count - 1]["Quantity"] = 0;
            dt.AcceptChanges();
        }
        return dt;
    }

    protected void CheckBox_CheckChanged(object sender, EventArgs e)
    {
        GetData();
        SetData();
        BindSecondaryGrid();

    }

    private void BindSecondaryGrid()
    {
        DataTable dt = (DataTable)ViewState["SelectedRecords"];
        gvSelected.DataSource = dt;
        gvSelected.DataBind();
    } 
```

这是提交按钮！

```
protected void btnSendOrder_Click(object sender, EventArgs e)
    {

        t_supplier_orders newOrder = new t_supplier_orders();

        newOrder.UserName = User.Identity.Name;
        newOrder.Order_date = DateTime.Now;

        newOrder.Order_status = "Pending";
        MembershipUser myObject = Membership.GetUser();
        Guid UserID = new Guid(myObject.ProviderUserKey.ToString());
        newOrder.UserId = UserID;
        newOrder.SupplierId = Convert.ToInt32(ddl1.SelectedValue);
        newOrder.Received_date = null;

        Bohemian.t_supplier_orders.AddObject(newOrder);
        Bohemian.SaveChanges();

        //------------------------------------------------------------------------+
        //  Create a new OderDetail Record for each item in the gvSelected     |
        //------------------------------------------------------------------------+

        foreach (GridViewRow row in gvSelected.Rows)
        {

            {
                t_supplier_orders_details od = new t_supplier_orders_details();

                     TextBox txt1 = (TextBox)gvSelected.FindControl("TextBox1");

                    od.OrderId = newOrder.OrderId;
                    od.ProductId = Convert.ToInt32(row.Cells[0].Text);
                    od.Product_name = (row.FindControl("Label3") as Label).Text;
                    od.ProductNo = (row.FindControl("Label2") as Label).Text;

                    od.Quantity = Convert.ToInt32(txt1.text);

                    Bohemian.t_supplier_orders_details.AddObject(od);

            }
        }

       Bohemian.SaveChanges();
       lblSuccess.Text = "The Order has been successfully sent to supplier!!";
        lblSuccess.ForeColor=System.Drawing.Color.BlueViolet;
        lblSuccess.Font.Bold = true;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:25:12.560

我假设您在每次回发时都分配了`DataSource`和。这将覆盖所有更改。`DataBind``GridView`

因此，将您的代码包装在`!IsPostBack`支票中：

```
protected void Page_Load()
{
    if(!IsPostBack)
    {
        BindSecondaryGrid();
    }
} 
```

顺便说一句，您不应该将其存储`DataTable`在 ViewState 中，因为那样会炸毁它。

# symfony - Symfony：防火墙，多种登录表单

> ID：15366637
> 
> 赞同：10
> 
> 时间：2013-03-12T16:22:39.973
> 
> 标签：symfony

无论如何，我对 symfony 并不陌生，但我一直使用`FOSUserBundle`它，默认情况下会阻止一个人使用 2 个不同的登录表单来验证两种不同的用户类型。

我有两个实体，一个是`Admins`，另一个是`Users`。管理员只能在管理区域登录，同样用户也只能通过前端登录。

我关注了： [http](http://symfony.com/doc/2.1/book/security.html) ://symfony.com/doc/2.1/book/security.html 这也引导我访问[http://symfony.com/doc/2.1/cookbook/security/entity_provider.html](http://symfony.com/doc/2.1/cookbook/security/entity_provider.html)

我的 security.yml 是：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Symfony\Component\Security\Core\User\User: sha512
        Fm\AdminBundle\Entity\Admins: sha512
        Fm\MainBundle\Entity\Users: sha512

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        chain_provider:
            chain:
                providers: [in_memory, admin]
        in_memory:
            memory:
                users:
                    user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                    admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

        admin:
            entity: { class: Fm\AdminBundle\Entity\Admins, property: username }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
            anonymous: true

        alogin:
            pattern:  ^/admin/login
            security: false
        login:
            pattern:  ^/login
            security: false
        secured_area:
            pattern:    ^/admin
            anonymous: false
            provider: chain_provider
            switch_user: true
            form_login:
                check_path: /admin/login_check
                login_path: /admin/login
            logout:
                path:   /admin/logout
                target: /admin
        members_area:
            pattern: ^/
            anonymous: false
            form_login: ~
            logout:
                path: /logout
                target: /
            #anonymous: ~
            #http_basic:
            #    realm: "Secured Demo Area"

    access_control:
        - { path: ^/admin/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, roles: ROLE_ADMIN } 
```

在我的路线中，我已经定义了文档中的路线：（默认为 /admin/login 和 /admin/login_check 因为我的主要路由包括设置 /admin 的位置）

```
_admin_login:
    pattern:   /login
    defaults:  { _controller: FmAdminBundle:Security:login }

_admin_login_check:
    pattern:   /login_check 
```

我在浏览器中遇到的错误是：

`Unable to find the controller for path "/admin/login_check". Maybe you forgot to add the matching route in your routing configuration?`

堆栈跟踪告诉我： `WARNING - Unable to look for the controller as the "_controller" parameter is missing`

和

`ERROR - Symfony\Component\HttpKernel\Exception\NotFoundHttpException: Unable to find the controller for path "/admin/login_check". Maybe you forgot to add the matching route in your routing configuration? (uncaught exception) at /var/www/mysite.dev/symfony/app/bootstrap.php.cache line 1419`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-03T06:19:25.700

要在 symfony 2XX 中实现多重登录，请尝试以下代码

## 安全.yml

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext
        Company\AngularBundle\Entity\User: plaintext
        Company\AngularBundle\Entity\Admin: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
       users:
           entity: { class: CompanyAngularBundle:User, property: username }
       admin:
           entity: { class: CompanyAngularBundle:Admin, property: username }

    firewalls:
        admin_secured_area:
            pattern:   ^/admin
            anonymous: ~
            provider: admin
            form_login:
                login_path: /admin/login
                check_path: /admin/login_check
                default_target_path: /admin

        user_secured_area:
            pattern:   ^/
            anonymous: ~
            provider: users
            form_login:
                login_path: login
                check_path: login_check
                default_target_path: /home 
```

## 路由.yml

```
login_check:
    path: /login_check
admin_login_check:
   path: /admin/login_check 
```

## 树枝文件

```
Action of login form should be like this
<form action="{{ path('login_check') }}" method="post">

Action of admin/login form should be like this
<form action="{{ path('admin_login_check') }}" method="post"> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T08:14:30.250

问题是登录“secured_area”防火墙后，您会重定向到“members_area”防火墙后面的“/”。您无法使用来自“secured_area”的凭据访问“members_area”（至少默认情况下不会）。阅读[http://symfony.com/doc/current/reference/configuration/security.html#reference-security-firewall-context](http://symfony.com/doc/current/reference/configuration/security.html#reference-security-firewall-context)上的详细信息。

如果您查看安全配置 ( [http://symfony.com/doc/current/reference/configuration/security.html](http://symfony.com/doc/current/reference/configuration/security.html) )，您会看到 form_login 的 default_target_path 是“/”。只需将其更改为 /admin：

```
security:
    ...

    firewalls:
    ...
        secured_area:
            pattern:    ^/admin
            ...
            form_login:
                check_path: /admin/login_check
                login_path: /admin/login
                default_target_path: /admin
            logout:
    ... 
```

[另一种方法是按照第一个链接 ( http://symfony.com/doc/current/reference/configuration/security.html#reference-security-firewall-context](http://symfony.com/doc/current/reference/configuration/security.html#reference-security-firewall-context) )中的描述共享上下文。

# objective-c - 在 Objective-C 中的函数内部使用函数参数

> ID：15366639
> 
> 赞同：0
> 
> 时间：2013-03-12T16:22:43.030
> 
> 标签：objective-c, function, nsstring, arguments

我是 Objective-C 开发的新手，我已经遇到了第一个问题。我正在尝试编写一个将字符串作为参数并将该字符串与其他字符串进行比较的函数。该函数的伪代码如下：

```
String string2
String string3

function compare_string (String string) {
  if (string == "a specific string" &&
      string == string2 &&
      string == string3) {
        // do something
      }
} 
```

到目前为止，我只有以下内容：

```
NSString *string2 = @"Second string";
NSString *string3 = @"Third string";

(void) compare_string: (NSString *) string { 
```

但现在我已经卡住了，因为我不知道如何`string`在函数内调用输入字符串。我是否应该简单地做类似的事情

```
if (string == string2) { ... } 
```

还是有另一种在Objective-C中使用函数参数的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:26:21.743

这将是这样的：

```
-(void)compareString:(NSString *string){
    if ( [string isEqualToString:@"a specific string"] && [string isEqualToString:string2] && [string isEqualToString:string3] ){
        // do something
    }
} 
```

**注意：`str1==str2`将比较内存地址，并`isEqualToString:`比较字符串的内容。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:27:24.283

查看[NSString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW29)的文档，已经有很多方法可以为您执行此操作 - 因此您无需制作自己的字符串比较代码

一个例子看起来像

```
if ([string compare:string2] == NSOrderedSame) { ... } 
```

如果您希望进行复杂的比较（例如不区分大小写等），这很方便

对于简单的平等，您可以使用

```
if ([string isEqualToString:string2]) { ... } 
```

# 编辑

我误读了这个问题 - 这是一个实际上与你所问的问题相关的答案

您需要使用`isEqual:`对象上定义的方法进行同等检查。`==`只会检查指针值。

你可以这样写你的方法

```
- (void)compareString:(NSString *)string;
{
  if ([@[string, string, string] isEqual:@[ @"a specific string", string1, string2]]) {
    // do stuff
  }
} 
```

然后稍后调用它看起来像这样

```
[self compareString:@"A string to compare"]; 
```

**NB**
将其包装在数组中比单独比较它们要好一些

# ios - IOS 在视图之间切换

> ID：15366640
> 
> 赞同：0
> 
> 时间：2013-03-12T16:22:45.137
> 
> 标签：ios, views, rootview

我有带有情节提要的ios项目。故事板中有 4 个视图。导航控制器之后的第一个视图是“登录视图”。在所有其他视图中都有一个注销按钮。当您单击按钮时，我希望应用程序显示登录视图。但我找不到如何做到这一点。

请你能告诉我如何做到这一点的代码吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:36:39.020

本教程向您展示了如何在故事板中的 2 个不同视图之间来回切换，您应该能够将其应用于您的问题。

[http://howtomakeiphoneapps.com/using-storyboards-to-create-a-single-view-application/1363/](http://howtomakeiphoneapps.com/using-storyboards-to-create-a-single-view-application/1363/)

# javascript - 端口错误：无法建立连接。接收端不存在

> ID：15366646
> 
> 赞同：1
> 
> 时间：2013-03-12T16:22:56.253
> 
> 标签：javascript, google-chrome, google-chrome-extension, coffeescript, google-chrome-devtools

我一直在广泛搜索试图解决这个问题，但似乎无法找到解决方案。我正在尝试在我的 Chrome 扩展程序中设置侦听器和发送者的简单任务。

**我的清单**

```
{
  "manifest_version": 2,

  "name": "my app",
  "description": "text",
  "version": "0.1",
  "background":{
    "scripts":["background.js"]
  },

  "content_scripts": [
    {
      // http://developer.chrome.com/extensions/match_patterns.html
      "matches": ["http://myurl.com/*"],
      "js": ["jquery-1.9.1.min.js", "myapp.js"],
      "all_frames": true
    }
  ], 
  "browser_action": {
    "default_icon": "/icons/icon-mini.png",
    "default_popup": "popup.html"
  }
} 
```

**在我的后台JS**

```
chrome.tabs.getSelected(null, function(tab) {
  chrome.tabs.sendMessage(tab.id, {greeting: "hello"}, function(response) {
    console.log(response.farewell);
  });
}); 
```

**在我的 popup.js 中（由 coffeescript 渲染，请原谅那种奇怪的语法）**

```
(function() {

  $(function() {});

  chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    if (console.log(sender.tab)) {
      "from a content script:" + sender.tab.url;
    } else {
      "from the extension";
    }
    if (request.greeting === "hello") {
      return sendResponse({
        farewell: "goodbye"
      });
    }
  });

}).call(this); 
```

**在我的 myapp.js**

```
chrome.extension.sendMessage({
      greeting: "hello"
    }, function(response) {
      return console.log(response.farewell);
    }); 
```

我已按照[教程](http://developer.chrome.com/extensions/messaging.html#simple)进行操作。不知道为什么这不起作用。我对 JS 很满意，但不清楚为什么这会表现得很奇怪。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:07:47.957

这段代码有不止一个问题，所以让我分解一下。

从我看到的情况来看，您正试图从您的内容脚本向您的弹出窗口发送一条消息，并且有一个背景页面没有做任何事情。

**问题 #1**

popup.js 中的代码除了奇怪的复杂之外，还不是背景页面。它仅在`popup`打开时运行，因此无法收听消息。

**问题 #2**

后台页面中的代码正在使用 depreciated`getSelected`方法向内容脚本发送消息。内容脚本没有侦听器。

这两件事的结果是这样的：

```
Background page -> content script (no listener)
Content Script -> extension pages (no listener) 
```

我建议让你的背景页面成为你交流的中心。如果您需要在弹出窗口和内容脚本之间进行通信，请制作`popup -> content script`并用于`sendResponse()`回复。

编辑：这是您想要的消息传递示例。只需替换为您的变量即可。

**内容脚本**

```
...
//get all of your info ready here

chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  //this will fire when asked for info by the popup
  sendResponse(arrayWithAllTheInfoInIt);
}); 
```

**弹出窗口**

```
...
chrome.tabs.query({'active': true,'currentWindow':true},function(tab){
  //Be aware 'tab' is an array of tabs even though it only has 1 tab in it
  chrome.tabs.sendMessage(tab[0].id,"stuff", function(response){
    //response will be the arrayWithAllTheInfoInIt that we sent back
    //you can do whatever you want with it here
    //I will just output it in console
    console.log(JSON.stringify(response));
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T13:26:41.407

我在后台页面中遇到了类似的问题，我的解决方案是确保选项卡已完成加载，然后再尝试向其发送消息。

如果选项卡尚未完全加载，则内容脚本将不会启动并且不会等待消息。

这是一些代码：

```
 chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
   if (changeInfo.status === 'complete') {
     // can send message to this tab now as it has finished loading
   }
 } 
```

因此，如果您想向活动选项卡发送消息，您可以先确保它已完成加载。

# iis - IIS Windows 身份验证异常

> ID：15366649
> 
> 赞同：6
> 
> 时间：2013-03-12T16:23:02.567
> 
> 标签：iis, dns, windows-authentication

我有一个带有两个网站的网络服务器：a 和 b。
a 是生产。

b 是测试/分期。

在我之前编写这些应用程序的人依赖于

```
Request.ServerVariables("LOGON_USER") 
```

当用户通过 Windows 身份验证对服务器进行身份验证时分配。在 a 上，这很好用，在 b 上有些奇怪：

我得到了登录提示，但我无法使用 [domain]\myusername 登录，但我可以使用 \\myusername 登录，密码相同（基于 AD）。据我所知，IIS 配置是相同的，唯一的不一致是从 a.domain.com 指向 b.domain.com 的 DNS CNAME。更改该 DNS 记录以指向 IP 解决了问题，但我试图了解发生了什么。

以前的 DNS 记录：`b.domain.com > a.domain.com`

工作 DNS 记录：`b.domain.com > 10.0.x.131`

它应该是 b > a > 常规 Windows 身份验证，但由于某种原因，我发现自己使用 \\ ，它是在域名上添加两次还是什么？\\ 在身份验证方面到底是什么？

说得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:00:30.567

一些想法。

*   您的服务器在哪个特定版本的操作系统下运行？微软尤其倾向于在不同版本之间有一些不同的行为，并且文档是特定于版本的

*   很难回答“发生了什么”问题，因为无法确定什么是正确的。我可以抛出假设（并且将），如果您可以将问题表述为“我该如何解决这个问题”而不是“发生了什么”，您可以检查我是否正确并做出回应，可能已经获得了一点更多相关数据。

*   这听起来更像是对系统管理的深入理解，而不是对编程的理解——如果你在这里没有得到你需要的东西，你可能会更幸运地询问 serverfault。

话虽如此，在没有其他信息的情况下，“\”很可能是由两件事之一引起的。

您可能有两个不同的代码部分，每个部分都添加了一个“\”。在许多情况下，无论有无尾随“\”，域名都是有效的。因此，Windows 身份验证很可能会在域名之后和登录 ID 之前立即添加一个，以确保两者之间的分离。如果您的 DNS CNAME 查找出于类似原因自动在域名末尾添加一个，则两者可能会叠加。

有可能在 DNS 进程的某个地方，域可能已经通过转换器将控制字符更改为转义字符（作为避免某些安全漏洞的一种方式）。'\' 用作此类转义字符的基础，因此需要它自己的转义字符 ('\')。

# android - android中运行时的主题更改

> ID：15366651
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:06.007
> 
> 标签：android

我的活动有一个默认主题。当我按下按钮时，我想更改主题，但也希望活动的状态保持不变（如果我在 editText 中有一些文本，我想在更改主题后查看此文本）

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:26:16.077

不支持在创建视图后更改样式..所以你可以做的是：

1.  创建一个新的类型值的 android xml 文件
2.  添加新主题
3.  将您的元素添加到该主题及其值并保存文件

现在，当您动态创建新视图时，您将调用允许定义 defStyle .. 的构造函数，然后通过指向 R."the XML file name"."your style ID" 指向刚刚创建的样式 ID。

# c# - 连接字符串奇怪的错误

> ID：15366654
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:12.927
> 
> 标签：c#, asp.net, sql-server

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Text;
using System.IO;
using System.Configuration;

namespace Iknowyourbrain
{

    public partial class WebForm1 : System.Web.UI.Page
    {
        public static void ClearControls(Control Parent)
        {

            if (Parent is TextBox)
            { (Parent as TextBox).Text = string.Empty; }
            else
            {
                foreach (Control c in Parent.Controls)
                    ClearControls(c);
            }
        }
        private void ExecuteInsert(string username, string password, string age, string gender, string emailaddress)
        {
            SqlConnection conn = new SqlConnection(GetConnectionString());
            string sql = "INSERT INTO tblRegistration (UserName, Password, Age, Gender, Email Address) VALUES "
                   + " (@UserName,@Password,@Age,@Gender,@Email Address)";

            try
            {
                conn.Open();
                SqlCommand cmd = new SqlCommand(sql, conn);
                SqlParameter[] param = new SqlParameter[6];

                param[0] = new SqlParameter("@UserName", SqlDbType.VarChar, 50);
                param[1] = new SqlParameter("@Password", SqlDbType.VarChar, 50);
                param[2] = new SqlParameter("@Age", SqlDbType.Char, 10);
                param[3] = new SqlParameter("@Gender", SqlDbType.Int, 100);
                param[4] = new SqlParameter("@Email Address", SqlDbType.VarChar, 50);

                param[0].Value = username;
                param[1].Value = password;
                param[2].Value = age;
                param[3].Value = gender;
                param[4].Value = emailaddress;

                for (int i = 0; i < param.Length; i++)
                {
                    cmd.Parameters.Add(param[i]);
                }

                cmd.CommandType = CommandType.Text;
                cmd.ExecuteNonQuery();
            }
            catch (System.Data.SqlClient.SqlException ex)
            {
                string msg = "Insert Error:";
                msg += ex.Message;
                throw new Exception(msg);
            }
            finally
            {
                conn.Close();
            }

        }
        public string GetConnectionString()
        {
            //sets the connection string from your web config file "ConnString" is the name of your Connection String
            return System.Configuration.ConfigurationManager.ConnectionStrings["MyConsString"].ConnectionString;
        }

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

                //call the method to execute insert to the database
                ExecuteInsert(
                              TxtUserName.Text,
                              TxtPassword.Text,
                              DropDownListGender.SelectedItem.Text,
                              TxtAge.Text, TxtEmailAddress.Text);
                Response.Write("Record was successfully added!");
                ClearControls(Page);
            }

    }
} 
```

到目前为止是我网站的代码。在我的`web.config`文件中，我有

```
<configuration>
    <system.web>
        <compilation debug="true" targetFramework="4.0" />
    </system.web>

  <connectionStrings>
    <add name="MyConsString" connectionString="Data Source=WPHVD185022-9O0;
                             Initial Catalog=MyDatabase;
                             Integrated Security=SSPI;"
                             providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

当我尝试进行测试以注册帐户时，出现此错误：

> 用户代码未处理异常
> 
> 插入错误：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。
> 
> （提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:24:28.583

无论出于何种原因，您的应用程序都无法连接到连接字符串中指定的数据库。

这可能是错误的服务器或目录名称、错误的凭据（使用集成安全几乎永远不会在生产环境中工作，如果确实如此，您应该修复该问题）、权限不足、帐户禁用等。也可能是远程连接到数据库是不允许的，无论是在一般情况下还是从您所在的位置。

最重要的是，您需要确定您的连接字符串和 SQL 服务器配置。

# java - 如何将文本文件中的整数值翻四倍？

> ID：15366655
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:22.093
> 
> 标签：java

我想这归结为读取和写入同一个文件。我希望能够返回与输入相同的文本文件，但所有整数值都翻了两番。我是否应该尝试使用 Java 进行此操作，还是写入新文件并覆盖原始 .txt 文件更好？

从本质上讲，我正在尝试改变这个：

```
12
fish
55 10 yellow 3 
```

进入这个：

```
48
fish
220 40 yellow 12 
```

这是我到目前为止所得到的。目前，它不会修改 .txt 文件。

```
import java.io.*;
import java.util.Scanner;

public class CharacterStretcher 
{
public static void main(String[] args)
{
    Scanner keyboard = new Scanner( System.in );
    System.out.println("Copy and paste the path of the file to fix");
    // get which file you want to read and write
    File file = new File(keyboard.next());
    File file2 = new File("temp.txt");
    BufferedReader reader;
    BufferedWriter writer;
    try {
        // new a writer and point the writer to the file
        FileInputStream fstream = new FileInputStream(file);
        // Use DataInputStream to read binary NOT text.
        reader = new BufferedReader(new InputStreamReader(fstream));
        writer = new BufferedWriter(new FileWriter(file2, true));

        String line = "";
        String temp = "";
        int var = 0;
        int start = 0;
        System.out.println("000");
        while ((line = reader.readLine()) != null) 
        {
            System.out.println("a");
            if(line.contains("="))
            {
                System.out.println("b");
                var = 0;
                temp = line.substring(line.indexOf('='));
                for(int x = 0; x < temp.length(); x++)
                {
                    System.out.println(temp.charAt(x));
                    if(temp.charAt(x)>47 && temp.charAt(x)<58)  //if 0<=char<=9 
                    {
                        if(start==0)
                            start = x;
                        var*=10;
                        var+=temp.indexOf(x)-48;    //converts back into single digit
                    }
                    else
                    {
                        if(start!=0)
                        {
                            temp = temp.substring(0, start) + var*4 + temp.substring(x);
                            //writer.write(line.substring(0, line.indexOf('=')) + temp);
                            //TODO:  Currently writes a bunch of garbage to the end of the file, how to write in the middle?
                        //move x if var*4 has an extra digit
                            if((var<10 && var>2)
                                    || (var<100 && var>24)
                                    || (var<1000 && var>249)
                                    || (var<10000 && var>2499))
                                x++;
                        }
                        //start = 0;
                    }
                    System.out.println(temp + " " + start);
                }
                if(start==0)
                    writer.write(line);
                else
                    writer.write(temp);

            }
        }
        System.out.println("end");
        // writer the content to the file
        //writer.write("I write something to a file.");

        // always remember to close the writer
        writer.close();
        //writer = null;
        file2.renameTo(file); //TODO: Not sure if this works...
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:17:51.017

鉴于这是对格式化文本文件的快速简单的破解，我认为你不需要太聪明。

您决定是否查看数字的逻辑非常复杂，我会说这是矫枉过正。

我已经写了一个基本大纲，说明我在这种情况下要做什么。这不是很聪明或令人印象深刻，但我认为应该完成工作。我省略了覆盖和读取控制台输入的内容，因此您可以自己进行一些实现；-)

```
import java.io.*;

public class CharacterStretcher {

    public static void main(String[] args) {

        //Assumes the input is at c:\data.txt
        File inputFile = new File("c:\\data.txt");
        //Assumes the output is at c:\temp.txt
        File outputFile = new File("c:\\temp.txt");
        try {
            //Construct a file reader and writer
            final FileInputStream fstream = new FileInputStream(inputFile);
            final BufferedReader reader = new BufferedReader(new InputStreamReader(fstream));
            final BufferedWriter writer = new BufferedWriter(new FileWriter(outputFile, false));

            //Read the file line by line...
            String line;
            while ((line = reader.readLine()) != null) {
                //Create a StringBuilder to build our modified lines that will
                //go into the output file
                StringBuilder newLine = new StringBuilder();

                //Split each line from the input file by spaces
                String[] parts = line.split(" ");

                //For each part of the input line, check if it's a number
                for (String part : parts) {
                    try {
                        //If we can parse the part as an integer, we assume
                        //it's a number because it almost certainly is!
                        int number = Integer.parseInt(part);
                        //We add this to out new line, but multiply it by 4
                        newLine.append(String.valueOf(number * 4));
                    } catch (NumberFormatException nfEx) {
                        //If we couldn't parse it as an integer, we just add it
                        //to the new line - it's going to be a String.
                        newLine.append(part);
                    }

                    //Add a space between each part on the new line
                    newLine.append(" ");
                }
                //Write the new line to the output file remembering to chop the
                //trailing space off the end, and remembering to add the line
                //breaks
                writer.append(newLine.toString().substring(0, newLine.toString().length() - 1) + "\r\n");
                writer.flush();
            }

            //Close the file handles.
            reader.close();
            writer.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:45:01.727

您可能需要考虑其中之一：

1.  在内存中构建新文件，而不是尝试写入您正在读取的同一文件。你可以用`StringBuilder`这个。

2.  写入一个新文件，然后用新文件覆盖旧文件。[这个 SO Question](https://stackoverflow.com/questions/595631/how-to-atomically-rename-a-file-in-java-even-if-the-dest-file-already-exists)可以帮助你。

使用这两者，您将能够看到与输入文件分开的整个输出。此外，使用选项 (2)，您不会有操作在中间失败并给您带来混乱文件的风险。

现在，您当然*可以*就地修改文件。但对于您的情况来说，这似乎是不必要的复杂性，除非您有非常大的输入文件。

至少，如果您首先尝试这种方式，您可以缩小更复杂版本失败的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:45:19.990

您不能同时读取和写入同一个文件，因为这会修改您当前阅读的文本。这意味着，您必须首先编写修改后的新文件，然后将其重命名为原始文件。您可能需要在重命名之前删除原始文件。

对于重命名，您可以使用[`File.renameTo`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)或查看许多 SO 的[问题之一](https://stackoverflow.com/questions/tagged/java+rename+file)

您似乎通过收集单个数字并将它们相加来解析代码中的整数。您应该考虑使用 a[`Scanner.nextInt`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextInt%28%29)或employ [`Integer.parseInt`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)。

您可以逐行读取文件，在空白处[拆分单词，然后解析它们并检查它是整数还是其他单词。](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

# knockout.js - 如何将计算值分配给可观察对象

> ID：15366659
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:27.030
> 
> 标签：knockout.js

如果 ToStringStub 是计算的，我如何最好地将其当前值分配给 EmailList ，而不会传递任何计算的东西？

```
 self.EmailList = ko.observable(self.ToStringStub()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:58:37.713

如果我正确理解您的需求并且您想将 ToStringStub（计算的 observable）分配给 EmailList，而不需要创建 EmailList observable，只需执行以下操作：

```
self.EmailList = self.ToStringStub; //no need to use function parenthesis '()' 
```

现在，上面的代码将自动在 ToStringStub 上创建一个可观察的 EmailList，并且每当您的 ToStringStub 计算出的 observable 发生变化时，您的 EmailList 也会发生变化。

*但是您的 EmailList 和 ToStringStub 始终具有相同的值。*

[小提琴示例](http://jsfiddle.net/YPFcG/)

# python - Python PyQt4 中的对齐按钮

> ID：15366661
> 
> 赞同：2
> 
> 时间：2013-03-12T16:23:28.970
> 
> 标签：python, user-interface, pyqt4

这是我第一个使用 PyQt4 的应用程序。

我有以下两个问题

![在此处输入图像描述](../Images/c147b924ad7d40f77a62da297891aa4e.png)

1.  左侧框中的按钮。它们的间距不同。

2.  单选按钮是否可以使用斜体？（即，Ke*等人，* 而不是 Ke 等人）？

从 PyQt4 导入 sys 导入 QtGui，QtCore

```
class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)
        # title of the window
        self.setWindowTitle('Segmentation Accuracy')
        # fix window size
        self.setFixedSize(400,200)
        # status bar with initial message
        self.statusBar().showMessage('ready')

        # Layout
        # contiene gli altri widget
        cWidget = QtGui.QWidget(self)
        grid = QtGui.QGridLayout(cWidget) 

        # Box Left
        vBox_left = QtGui.QVBoxLayout()
        vBox_left.setSpacing(2) #set spacing

        Button_input1 = QtGui.QPushButton("Reference Polygons")
        vBox_left.addWidget(Button_input1)

        Button_input2 = QtGui.QPushButton("Segmented Polygons")
        vBox_left.addWidget(Button_input2)

        Button_output = QtGui.QPushButton("Save")
        vBox_left.addWidget(Button_output)

        Button_start = QtGui.QPushButton("Start")
        Button_start.setCheckable(True)

        vBox_left.addWidget(Button_input1)
        vBox_left.addWidget(Button_input2)
        vBox_left.addWidget(Button_output)
        vBox_left.addWidget(Button_start)

        # Box right
        vBox_rigth = QtGui.QVBoxLayout()
        vBox_rigth.setSpacing(10) #set spacing
        ke = QtGui.QRadioButton("Ke et al.", cWidget)
        pu = QtGui.QRadioButton("Pu et al.", cWidget)
        clinton = QtGui.QRadioButton("Clinton et al.", cWidget)
        ke.setChecked(True)
        vBox_rigth.addWidget(ke)
        vBox_rigth.addWidget(pu)
        vBox_rigth.addWidget(clinton)

        ke.setStatusTip("Ke et al., 2010\. Remote Sensing of Environment, 114, pp. 1141-1154")
        pu.setStatusTip("Pu et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")
        clinton.setStatusTip("Clinton et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")

        grid.addWidget(Button_input1, 0, 0)
        grid.addWidget(Button_input2, 1, 0)
        grid.addWidget(Button_output, 2, 0)
        grid.addWidget(Button_start, 3, 0)
        grid.addLayout(vBox_left, 0, 0)
        grid.addLayout(vBox_rigth, 0, 1)

        cWidget.setLayout(grid)
        self.setCentralWidget(cWidget)

def main():
    app = QtGui.QApplication(sys.argv)
    main = MainWindow()
    main.show()
    sys.exit(app.exec_())

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:53:04.737

您使用`QGridLayout`并放入`Button_input1`单元格 (0,0) 和`vBox_rigth`包含三个raido 按钮的布局放入单元格 (0,1)。它们被调整到相同的高度。这就是为什么你的四个按钮没有相同的间距。

```
 grid = QtGui.QGridLayout(cWidget)
    ......
    grid.addWidget(Button_input1, 0, 0)
    ......
    grid.addLayout(vBox_rigth, 0, 1) 
```

您不应该使用`addWidget`将这些按钮添加到`vBox_left`两次。

```
 Button_input1 = QtGui.QPushButton("Reference Polygons")
    **vBox_left.addWidget(Button_input1)**

    Button_input2 = QtGui.QPushButton("Segmented Polygons")
    **vBox_left.addWidget(Button_input2)**

    Button_output = QtGui.QPushButton("Save")
    **vBox_left.addWidget(Button_output)**

    Button_start = QtGui.QPushButton("Start")
    Button_start.setCheckable(True)

    **vBox_left.addWidget(Button_input1)**
    **vBox_left.addWidget(Button_input2)**
    **vBox_left.addWidget(Button_output)**
    vBox_left.addWidget(Button_start) 
```

而且，这四个按钮已经被添加到 QVBoxLayout`vBox_left`中，所以你不应该将它们添加到`grid`.

```
 grid.addWidget(Button_input1, 0, 0)
    grid.addWidget(Button_input2, 1, 0)
    grid.addWidget(Button_output, 2, 0)
    grid.addWidget(Button_start, 3, 0) 
```

您可以为小部件使用斜体。您只需要更改`font`属性。请参阅[http://doc.qt.digia.com/stable/qwidget.html#font-prop](http://doc.qt.digia.com/stable/qwidget.html#font-prop)。
例如：

```
 ke = QtGui.QRadioButton("Ke et al.", cWidget)
    font = QtGui.QFont("Times", 10)
    font.setItalic(True)
    ke.setFont(font) 
```

您还可以`QLabel`用来显示富文本。例如：

```
 ke_label = QtGui.QLabel("Ke <i>et al</i>.") 
```

因此，决赛`__init__`可能是

```
 def __init__(self):
        QtGui.QMainWindow.__init__(self)
        # title of the window
        self.setWindowTitle('Segmentation Accuracy')
        # fix window size
        self.setFixedSize(400,200)
        # status bar with initial message
        self.statusBar().showMessage('ready')

        # Layout
        # contiene gli altri widget
        cWidget = QtGui.QWidget(self)
        grid = QtGui.QGridLayout(cWidget)

        # Box Left
        vBox_left = QtGui.QVBoxLayout()
        vBox_left.setSpacing(2) #set spacing

        Button_input1 = QtGui.QPushButton("Reference Polygons")
        vBox_left.addWidget(Button_input1)

        Button_input2 = QtGui.QPushButton("Segmented Polygons")
        vBox_left.addWidget(Button_input2)

        Button_output = QtGui.QPushButton("Save")
        vBox_left.addWidget(Button_output)

        Button_start = QtGui.QPushButton("Start")
        Button_start.setCheckable(True)

        # vBox_left.addWidget(Button_input1)
        # vBox_left.addWidget(Button_input2)
        # vBox_left.addWidget(Button_output)
        vBox_left.addWidget(Button_start)

        # Box right
        vBox_right = QtGui.QVBoxLayout()
        vBox_right.setSpacing(10) #set spacing

        ke = QtGui.QRadioButton("", cWidget)
        pu = QtGui.QRadioButton("", cWidget)
        clinton = QtGui.QRadioButton("", cWidget)
        ke.setChecked(True)

        ke_label = QtGui.QLabel("Ke <i>et al</i>.", cWidget)
        pu_label = QtGui.QLabel("Pu et al.", cWidget)
        clinton_label = QtGui.QLabel("Clinton et al.", cWidget)

        grid_right = QtGui.QGridLayout()

        grid_right.addWidget(ke, 0, 0)
        grid_right.addWidget(pu, 1, 0)
        grid_right.addWidget(clinton, 2, 0)
        grid_right.addWidget(ke_label, 0, 1)
        grid_right.addWidget(pu_label, 1, 1)
        grid_right.addWidget(clinton_label, 2, 1)
        grid.addLayout(grid_right, 0, 1)

        grid.setColumnStretch(0, 1)
        grid.setColumnStretch(1, 1)
        grid_right.setColumnStretch(1, 1)

        ke.setStatusTip("Ke et al., 2010\. Remote Sensing of Environment, 114, pp. 1141-1154")
        pu.setStatusTip("Pu et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")
        clinton.setStatusTip("Clinton et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")

        ke_label.setStatusTip("Ke et al., 2010\. Remote Sensing of Environment, 114, pp. 1141-1154")
        pu_label.setStatusTip("Pu et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")
        clinton_label.setStatusTip("Clinton et al., 2012\. Remote Sensing of Environment, 124, pp. 516-533")

        # grid.addWidget(Button_input1, 0, 0)
        # grid.addWidget(Button_input2, 1, 0)
        # grid.addWidget(Button_output, 2, 0)
        # grid.addWidget(Button_start, 3, 0)
        grid.addLayout(vBox_left, 0, 0)
        #grid.addLayout(vBox_right, 0, 1)

        # cWidget.setLayout(grid)
        self.setCentralWidget(cWidget) 
```

# php - 不确定 php 网站中的 URL 是如何构造的

> ID：15366662
> 
> 赞同：1
> 
> 时间：2013-03-12T16:23:29.650
> 
> 标签：php, javascript, url, parameters, query-string

我的页面中有一个包含 3 列的 html 表格，每一列都包含这样的表格

```
<form id="filter" method="get" action="advanced_search_result.php">
<input type="hidden" value="Aurum" name="keywords">
<select onchange="this.form.submit()" name="maxnumber">
<option value="">10</option>
<option selected="selected" value="25">25</option>
<option value="50">50</option>
</select>
</form> 
```

下拉选择的结果是重新加载页面，其中包含类似“advanced_search_result.php?keywords=Aurum&maxnumber=25”的 url，我的问题是....这些查询字符串参数是如何构造的？我查看了 php 文件，但无法弄清楚。我想要做的是在发生此操作时向 url 添加另一个参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:24:43.740

这与php完全无关。您在`get`表单上使用了一种方法，因此所有表单字段名称/值都作为查询参数填充到 url 中。

如果页面是用 java、asp、ruby、perl 甚至是普通的静态 html 构建的，就会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:25:33.580

这是**HTTP**协议的默认行为，它有 4 种可能的操作： **GET**、**PUT**、**POST**、**DELETE**。它不是执行动作的语言。

关于 REST 和使用 HTTP 协议的最佳解释是[这里](http://tomayko.com/writings/rest-to-my-wife)。 [这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)还包含有关您可以使用 HTTP 执行的不同类型请求的更多信息。

**底线** 是创建该格式 URL 的协议。与所有现代 Web 语言一样，PHP 具有 HTTP 包装器方法，这些方法知道如何从其 URL 表示中提取参数，例如`$_GET`数组、`$_POST`数组或`$_REQUEST`数组。

**你应该知道的一件事** **幂等**用简单的英语来说，这意味着使用正确的请求类型来执行操作，以允许浏览器以更有效的方式完成其工作。您不会使用**POST**来简单地显示数据库内容，也不会使用**GET**来更新数据库。为什么？[在这里](https://stackoverflow.com/questions/705782/why-shouldnt-data-be-modified-on-an-http-get-request)阅读更多。

**幂等性解释**

幂等方法和 Web 应用程序

方法 PUT 和 DELETE 被定义为幂等的，这意味着多个相同的请求应该与单个请求具有相同的效果（注意幂等是指请求完成后系统的状态，所以当服务器采取的动作（例如删除记录）或后续请求返回的响应码可能不同，系统状态每次都相同）。

被规定为安全的方法 GET、HEAD、OPTIONS 和 TRACE 也应该是幂等的，因为 HTTP 是一种无状态协议。[1](http://tomayko.com/writings/rest-to-my-wife) 相比之下，POST 方法不一定是幂等的，因此多次发送相同的 POST 请求可能会进一步影响状态或导致进一步的副作用（例如金融交易）。

在某些情况下，这可能是可取的，但在其他情况下，这可能是由于意外，例如当用户没有意识到他们的操作将导致发送另一个请求，或者他们没有收到足够的反馈表明他们的第一个请求是成功的。虽然 Web 浏览器可能会在某些情况下显示警告对话框以警告用户，在某些情况下重新加载页面可能会重新提交 POST 请求，但通常由 Web 应用程序来处理不应多次提交 POST 请求的情况。

请注意，协议或 Web 服务器不强制执行方法是否具有幂等性。完全可以编写一个 Web 应用程序，其中（例如）数据库插入或其他非幂等操作由 GET 或其他请求触发。但是，如果用户代理认为重复相同的请求是安全的，而实际上并非如此，那么忽略此建议可能会导致不良后果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:27:19.140

正如其他人所说，参数的构造`GET`与PHP无关。

除此之外，如果你想添加一个新的参数，只需在表单中添加一个新的输入：

```
<input type="text" name="param_name" value="the_value" /> 
```

# javascript - 如何隐藏和显示应用单选按钮

> ID：15366667
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:34.140
> 
> 标签：javascript, jquery, forms

```
<input type="radio" name="sex" value="Male">Male</input>
<input type="radio" name="sex" value="Female">Female</input>
<input type="radio" name="sex" value="Unknown">Unknown</input>

<script>
$('input:radio[name=sex]')[1].checked = true;
</script> 
```

这是我必须使用的所有代码。我无法操作输入单选按钮，因为这些单选按钮是由第三方系统提供的。我需要知道的是如何编写 jQuery 来显示“女性”单选按钮，但在页面加载时隐藏“男性”和“未知”单选按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:27:50.397

利用：

```
$(function() {
  $('input:radio[name=sex]:not([value=Female])').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:26:23.543

尝试其中任何一种...

```
<script>
    $(function() {
        $('input:radio[value=Male]').hide();
        $('input:radio[value=Unknown]').hide();
    });
</script> 
```

它们都是一样的——这取决于你喜欢看什么

```
<script>
    $(function() {
        $('input:radio[value=Male], input:radio[value=Unknown]').hide();
    });
</script> 
```

# python - gae & python - 在 yaml 中设置不同的 url: 404 未找到

> ID：15366671
> 
> 赞同：0
> 
> 时间：2013-03-12T16:23:45.153
> 
> 标签：python, web-services, google-app-engine, http-status-code-404

我正在尝试将不同的 url 映射到不同的 python 脚本。

这是我的 yaml

```
application: myApp
version: 99
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: /deleteCustomers
  script: test.app

- url: /.*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.2"

builtins:
- remote_api: on 
```

如果我去[http://myapp.appspot.com/test](http://myapp.appspot.com/test)，它会说“404 not found”...如果我去[http://myapp.appspot.com](http://myapp.appspot.com)，就会启动正确的脚本（main.app）

这是我遇到的同样的问题 - > [HERE](https://stackoverflow.com/questions/11368106/python-app-engine-use-app-yaml-to-control-url-handler) 但给定的解决方案对我不起作用（即使它是相同的代码！！！）

这是处理程序（为了测试“2 路径 yaml”，我复制了 main.app，它包含客户和商店类以及 mainhandler，将其重命名为 test.app。所以 main.app 和 test.app 都是相同的）

```
class MainHandler(webapp2.RequestHandler):
    def get(self):
        customers = Customers.all()
        stores = Stores.all()

        countCustomers= 0
        countStores= 0

        for p in customers:
            p.delete()
            countCustomers+= 1
        for p in stores:
            p.delete()
            countStores+= 1

        self.response.out.write("\nDeleted Customers: " + str(countCustomers))
        self.response.out.write("\nDeleted Stores: " + str(countStores))

app = webapp2.WSGIApplication([
    ('/', MainHandler)
], debug=True) 
```

我想要实现的是将客户和存储删除拆分为两个单独的调用：

[http://www.myapp.appspot.com/deleteCustomers](http://www.myapp.appspot.com/deleteCustomers)和[http://www.myapp.appspot.com/deleteStores](http://www.myapp.appspot.com/deleteStores)

感谢您提前提供任何帮助，最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T08:47:02.423

如果您说两个脚本完全相同，那么我假设您使用相同的“/”来指向您的 MainHandler。我不太确定我是否正确理解你，但这是我试图帮助你的尝试。为了实现将商店删除和客户删除拆分为 2 个不同的脚本，您必须将代码拆分为映射到每个 url 的 2 个不同的处理程序，例如：

```
class StoreDeletionHandler(webapp2.RequestHandler):
def get(self):
    stores = Stores.all()

    countStores= 0

    for p in stores:
        p.delete()
        countStores+= 1

    self.response.out.write("\nDeleted Stores: " + str(countStores))        

app = webapp2.WSGIApplication([('/deleteStores', StoreDeletionHandler)], debug=True) 
```

以上将在您的 main.py 脚本中，通过 yaml 脚本中的以下调用路由：

```
- url: /.*
  script: main.app 
```

然后在这种情况下，对于不同脚本 test.py 中的第二个 url：

```
class CustomerDeletionHandler(webapp2.RequestHandler):
    def get(self):

        customers = Customers.all()
        countCustomers= 0

        for p in customers:
            p.delete()
            countcustomers+= 1

        self.response.out.write("\nDeleted Customers: " + str(countCustomers))

app = webapp2.WSGIApplication([
('/deleteCustomers', CustomerDeletionHandler)
], debug=True) 
```

在您的 yaml 文件中，您可以通过以下方式将 url 映射到脚本：

```
- url: /deleteCustomers
  script: test.app 
```

另请注意，为了将所有后续路由定向到 test.py 脚本，URL 必须以“/deleteCustomers”前缀开头

所以是这样的：

```
http://www.myapp.appspot.com/deleteCustomers/NewUrl1
http://www.myapp.appspot.com/deleteCustomers/SomethingElse
http://www.myapp.appspot.com/deleteCustomers/YetAnotherUrlForTestpy 
```

以上所有内容都将被定向到 test.py 脚本。要重定向到 main.py 脚本，您只需路由到除 /deleteCustomers 之外的任何其他内容

```
http://www.myapp.appspot.com/ThisGoesToMain
http://www.myapp.appspot.com/deleteStores #also goes to main
http://www.myapp.appspot.com/deleteStores/YetAnotherUrlForMain 
```

我希望这是你想要的。

# excel-2010 - excel中的Sumifs 3列中的标准

> ID：15366677
> 
> 赞同：0
> 
> 时间：2013-03-12T16:24:02.517
> 
> 标签：excel-2010

我正在研究一个 Sumifs，它在 Col B 中有 2 个不同的标准，在 Col F 中有第 3 个标准。如果满足所有 3 个标准，那么我将对 Col Q 中的值求和。

到目前为止我有这个，它返回一个 0。我试图以我知道的每一种方式调整它，但仍然没有运气。

```
=SUMIFS($Q$4:$Q$2700, $B$4:$B$2700, "=AUS", $B$4:$B$2700, "=VCO", $F$4:$F$2700, "=TRB") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:47:49.123

The formula you provided returns 0 every time because the value in `B` cannot be both `AUS` AND `VCO`, it's one or the other.

As far as I know (someone correct me if I'm wrong), there's currently no way to have a conditional statement in a single criteria range (e.g. `"=AUS" OR "=VCO"`). A workaround could be the following:

> =SUM(SUMIFS(Q4:Q8,B4:B8,{"AUS","VCO"},F4:F8,"=TRB"))

![enter image description here](../Images/454b22065500d79a2c13ff90135f61b1.png)

This sums the values in `Q` if `B` equals either `AUS` OR `VCO` **AND** `F` equals `TRB`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T16:34:45.937

问题是您引用了 $B$4:$B$2700 两次。因为该列不可能同时是 AUS 和 VCO 列 Q 永远不会相加。

为此，请在 B 列旁边添加一个新列。使单元格 C4 的值等于 B4 的值（=B4）并将此公式拖动到单元格 B2700（您也可以双击右下角单元格使其自动填充到 B2700）。然后，您可以使用以下公式：

```
=SUMIFS($Q$4:$Q$2700, $C$4:$C$2700, "=AUS", $B$4:$B$2700, "=VCO", $F$4:$F$2700, "=TRB") 
```

记得指出这个答案是否有效！

# c# - sql server 2008 中的大容量图像存储

> ID：15366680
> 
> 赞同：-3
> 
> 时间：2013-03-12T16:24:12.217
> 
> 标签：c#, .net, sql-server-2008-r2

我正在使用 VS 2008 和 MS SQL Server 2008 R2 在 C# .net 4.0 中创建一个 asp.net 应用程序。我想为每个订单上传图片（.bmp）并将其存储在与其订单对应的数据库中。当请求查看功能时，必须检索它。

我的要求是存储图像并检索它。每天的订单数量可能在 50 个左右。随着数量的增加，它可能会过度开销。请建议我克服内存问题的有效方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:39:20.957

好吧，您可以将它们作为 varbinary(max) 存储在数据库中，也可以将 URL 存储到文件中。如果您每天有 50 张图片，那么使用文件和 URL 方法可能会更好。

两者都有优点和缺点。但是正如您所说，您想将它们存储在数据库中：我认为数据库存储的一大特点是没有人可以随便重命名/删除文件夹，或者弄乱其中的文件。数据库的另一个优点是您可以还原数据库，而不必尝试保持文件夹同步。

您可以使用 ImageConverter 将字节数组转换为图像并返回

```
 var stream = new MemoryStream();
     var imageData = DataAccess.GetImageData(); //Returns a System.Linq.Binary for me
     var imgageBinaryData = imageData.ImageData.ToArray(); //This returns a byte array
     var img =  Image.FromStream(stream);      //Here is your image ready for displaying 
```

然后回去像

```
 var stream = new MemoryStream();
     img.Save(stream,System.Drawing.Imaging.ImageFormat.Jpeg);
     var myBytes = ms.ToArray(); 
```

编辑：哦，将它们存储为 Jpeg 而不是 Bmp 将节省大量空间

# c# - 使用列表视图中的多项选择填充网格视图中的数据？

> ID：15366694
> 
> 赞同：0
> 
> 时间：2013-03-12T16:24:35.697
> 
> 标签：c#, asp.net

我正在尝试使用列表视图中的多项选择来填充网格视图中的数据？

这是我的网格视图代码

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
        SelectCommand="SELECT employee.Empno, employee.Dptno, employee.Grade, employee.Employee FROM employee INNER JOIN grade ON employee.Grade = grade.Grade INNER JOIN empskill ON employee.Empno = empskill.Empno WHERE (empskill.Skillno = @Skillno)">
        <SelectParameters>
            <asp:ControlParameter ControlID="ListBox1" Name="Skillno" 
                PropertyName="SelectedValue" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

但我遇到的问题是数据不是来自列表视图中所有选定的行。

listview 是技能列表，gridview 中填充的数据是在列表框中选择的拥有这些技能的员工。因此，如果您选择 2 个技能，它应该显示同时具有所选技能的员工，而不是将它们结合起来。希望这能说明我的问题。

# objective-c - 如何使用 UIGestureRecognizers 交换视图

> ID：15366698
> 
> 赞同：0
> 
> 时间：2013-03-12T16:24:44.110
> 
> 标签：objective-c, user-interface, uinavigationcontroller, uigesturerecognizer, gesture-recognition

我已将导航控制器的左后退按钮项设置为自定义视图，并为其设置了点击手势识别器，现在当自定义视图接收到点击手势时，它会弹出当前视图控制器，与导航控制器堆栈相比。

我现在想在点击后退按钮时切换视图，并且仍然保持类似于按钮的功能，就像我长按它一样，一旦我松开它只会弹出当前视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:00:59.717

`UILongPressGestureRecognizer`除了点击识别器之外，您还可以将一个添加到您的自定义视图中。

请注意，这`UILongPressGestureRecognizer`是一个*连续*识别器：一次长按将生成多个动作消息。您需要检查`UIGestureRecognizerStateEnded`处理程序中的状态。

# android - Android 清单：第 1 行的语法错误

> ID：15366699
> 
> 赞同：0
> 
> 时间：2013-03-12T16:24:52.557
> 
> 标签：android, android-layout

我正在整理我的第一个 android 应用程序，我遇到了我认为是一个简单的问题，但我无法在任何地方找到解决方案。当我尝试在模拟器中运行代码时，我得到：

```
AndroidManifest.xml: line 1: syntax error near unexpected token `newline'
AndroidManifest.xml: line 1: `<?xml version="1.0" encoding="utf-8"?>' 
```

这是我清单的前两行：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
```

清单语法对我来说似乎完全正确。我在 OSX 上使用 Eclipse，如果这很重要的话。我能找到的唯一相关问题是： [Android：layoutopt 错误 - 意外标记“换行符”附近的语法错误](https://stackoverflow.com/questions/4823065/android-layoutopt-error-syntax-error-near-unexpected-token-newline)

但是那里没有答案，只是说这是一个错误，需要报告。它仍然是一个错误吗？

编辑：这是整个 AndroidManifest.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="onemorepallet.app"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="13" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".OnemorepalletActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:01:43.507

你有关于第 1 行的空行吗？

```
<?xml version="1.0" encoding="utf-8"?> 
```

必须是第一行，上面没有空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:14:01.860

乍一看，我会说这是一个文件编码问题。您是否将您的项目从 Linux 迁移到了 Windows，反之亦然？似乎它期待 Linux 风格的行尾（没有 \r 的 \n），并且你在最后给它额外的回车符（\r）。用十六进制编辑器打开文件，我打赌你会看到每行末尾都有一个额外的 0x0D 字符。

# android - Horizo ntalScrollView 问题

> ID：15366702
> 
> 赞同：3
> 
> 时间：2013-03-12T16:24:55.210
> 
> 标签：android, android-layout, horizontalscrollview

我想使用`HorizontalScrollView`. 作为第一步，我只是尝试`HorizontalScrollView`仅包含 a`Button`作为内容的内容。我希望`Button`填满整个屏幕，并将`Button`的文本居中。但到目前为止，它`Button`被卡在左侧。这是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:layout_marginTop="50dip"
    android:background="#000000"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="Button 1"
            android:textSize="20sp" />
    </LinearLayout>
</HorizontalScrollView> 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:58:39.687

> 如何解决这个问题呢？

尝试使用以下`fillViewport`属性`HorizontalScrollView`：

```
android:fillViewport="true" 
```

# sorting - 删除节点 XSLT 1.0 后重命名列表元素（elem0 elem2 到 elem0 elem1 ）

> ID：15366706
> 
> 赞同：1
> 
> 时间：2013-03-12T16:25:03.370
> 
> 标签：sorting, xslt, dynamic

更新：我感谢所有的帮助。在你们的帮助下，我能够让 Process elem 标签工作，但我的老板有一个新要求。我必须将元素移动到一个新位置（而不是删除它们）并正确放置元素编号。再次感谢你们，你们是最棒的！

**上一个问题：**

> 我是 xslt 的新手，所以请多多包涵。所以这就是问题所在。我有这个xml：
> 
> ```
>  <Process>
>           <elem0>
>              <pcode>xx<pcode>
>           </elem0>
>           <elem1>
>              <pcode>xy<pcode>
>           </elem1>
>           <elem2>
>              <pcode>ab<pcode>
>           </elem2>
>           <elem3>
>              <pcode>AD<pcode>
>           </elem3>               
>     </Process> 
> ```
> 
> 我必须用 pcode value='xy' 擦除元素，我用 xslt 成功地做到了这一点。但是，在这样做之后，您会看到元素 (elem0 elem2 elem3) 名称之间存在间隙。
> 
> ```
> <Process>
>       <elem0>
>          <pcode>xx<pcode>
>       </elem0>
>       <elem2>
>          <pcode>ab<pcode>
>       </elem2>
>       <elem3>
>          <pcode>AD<pcode>
>       </elem3>               
> </Process> 
> ```
> 
> 我希望它是
> 
> ```
> <Process>
>           <elem0>
>              <pcode>xx<pcode>
>           </elem0>
>           <elem1>
>              <pcode>ab<pcode>
>           </elem1>
>           <elem2>
>              <pcode>AD<pcode>
>           </elem2>               
>     </Process> so it shows up properly in front end, but I am stuck. Tried sorting but didn't work. elem identifications are 
> ```
> 
> 改变，所以我更难使用某种模板。谢谢指教！

**更新：新要求将某些元素移动到新位置，而不是删除它们。对于给您带来的不便，我深表歉意，并提前感谢您的所有帮助。**

我有这个xml：

```
 <Process>
          <elem0>
             <pcode>xx<pcode>
          </elem0>
          <elem1>
             <pcode>xy<pcode>
          </elem1>
          <elem2>
             <pcode>ab<pcode>
          </elem2>
          <elem3>
             <pcode>AD<pcode>
          </elem3>               
    </Process> 
```

而且我必须将 pcode value='xy' 的元素移动（擦除旧要求）到 EdProcess，我使用 xslt 成功完成了它。但是，在这样做之后，您会看到元素 (elem0 elem2 elem3) 名称之间存在间隙。此外，EdProcess 需要从 elem0 开始，任何被移动的新元素都应该按顺序排列，即 elem0、elem1、elem2 等。

```
<Process>
      <elem0>
         <pcode>xx<pcode>
      </elem0>
      <elem2>
         <pcode>ab<pcode>
      </elem2>
      <elem3>
         <pcode>AD<pcode>
      </elem3>               
</Process>

<EdProcess>
          <elem1>
             <pcode>xy<pcode>
          </elem1>
   </EdProcess> 
```

我希望它是

```
<Process>
          <elem0>
             <pcode>xx<pcode>
          </elem0>
          <elem1>
             <pcode>ab<pcode>
          </elem1>
          <elem2>
             <pcode>AD<pcode>
          </elem2>               
    </Process>

 <EdProcess>
          <elem0>
             <pcode>xy<pcode>
          </elem0>
   </EdProcess> 
```

所以它在前端正确显示，但我被卡住了。尝试排序但没有用。elem 标识正在发生变化，因此我很难使用某种模板。谢谢指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:01:15.840

假设您的源格式没有与`elem`s 混合的其他元素，有一种非常简单直接的方法可以做到这一点，不需要前置/后置兄弟或双通道：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="*[pcode != 'xy']" mode="elems" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="*" mode="elems">
    <xsl:element name="elem{position() - 1}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

应用于此输入时：

```
<Process>
  <elem0>
    <pcode>xx</pcode>
  </elem0>
  <elem1>
    <pcode>xy</pcode>
  </elem1>
  <elem2>
    <pcode>ab</pcode>
  </elem2>
  <elem3>
    <pcode>xy</pcode>
  </elem3>
  <elem4>
    <pcode>AD</pcode>
  </elem4>
</Process> 
```

产生：

```
<Process>
  <elem0>
    <pcode>xx</pcode>
  </elem0>
  <elem1>
    <pcode>ab</pcode>
  </elem1>
  <elem2>
    <pcode>AD</pcode>
  </elem2>
</Process> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:31:59.247

由于 XSLT 不做可更新变量，我能看到的最直接的方法是一个递归模板，一次处理一个兄弟

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:template match="/">
    <Process>
      <!-- start with the first child -->
      <xsl:apply-templates select="Process/*[pcode != 'xy'][1]" />
    </Process>
  </xsl:template>

  <xsl:template match="*">
    <xsl:param name="nextIndex" select="0" />
    <xsl:element name="elem{$nextIndex}">
      <xsl:copy-of select="node()" />
    </xsl:element>
    <!-- process the next applicable sibling, if any, incrementing the index -->
    <xsl:apply-templates select="following-sibling::*[pcode != 'xy'][1]">
      <xsl:with-param name="nextIndex" select="$nextIndex + 1" />
    </xsl:apply-templates>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:34:56.960

您可能需要使用两遍 XSLT 模式，并重命名第二遍中的所有元素：

```
<xsl:template match="/">
    <xsl:variable name="pass1">
      <xsl:apply-templates select="Process"/>
    </xsl:variable>
    <xsl:apply-templates select="exsl:node-set($pass1)" mode="pass2" />
<xsl:template>

<xsl:template match="Process" mode="pass2">
  <xsl:copy>
    <xsl:for-each select="*">
       <xsl:element name="{ concat('elem', position()) }">
          <xsl:apply-templates />
       </xsl:element>
    </xsl:for-each>
  </xsl:copy>
</xsl:template> 
```

请注意，对于 XSLT 1，您需要使用`node-set()`大多数 XSLT 1 处理器中包含的函数，但您需要在样式表的顶部包含名称空间声明。对于 ESLT 感知处理器（Saxon、xsltproc、Xalan-J、jd.xslt 和 4XSLT），使用`xmlns:exsl="http://exslt.org/common"`和`exsl:node-set()`. 对于 Xalan-C 使用`xmlns:xalan="http://xml.apache.org/xalan"`和`xalan:nodeset()`. 对于 MSXSL 使用`xmlns:msxsl="urn:schemas-microsoft-com:xslt"`和`msxsl:node-set()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:46:15.880

您可以使用`preceding-sibling`轴来计算出现*在*当前`elem*`元素之前的元素数量。然后减去将被删除的数字，就得到了当前的数字：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Process/*">
        <!-- only copy if not "xy" -->
        <xsl:if test="pcode!='xy'">
            <!-- number of preceding elements which are also not "xy" -->
            <xsl:element name="elem{count(preceding-sibling::*[pcode!='xy'])}">
                <xsl:apply-templates select="@*|node()"/>
            </xsl:element>
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

也就是说，这是一种糟糕的 XML 格式，如果可以的话，您应该更改这种格式，这样它就不会有未知的元素名称，例如`elem0`. 如果您需要知道一个元素在列表中的位置，您可以使用 、 等轻松获得它`position()`。`count(preceding-sibling::*)`如果您*确实*需要一个明确的数字，请将其放在属性中，而不是元素名称中，例如`<elem num="1">`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T03:26:06.483

**这是一个一次性解决方案，可以正确处理`elem`N 个元素，这些元素可以位于树中的任何位置——不仅仅是兄弟姐妹。其他答案均未正确处理此类 XML 文档。**

**它相当有效——在树的深度有限的情况下，它的效率接近线性 (O(N))。如果所有这些元素都是兄弟元素，则它*是*线性的**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:param name="pCount" select="0"/>
  <xsl:copy>
   <xsl:apply-templates select="node()[1]|@*">
     <xsl:with-param name="pCount" select="$pCount"/>
   </xsl:apply-templates>
  </xsl:copy>
  <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select=
      "$pCount + count(.//*[starts-with(name(), 'elem') and not(pcode='xy')])"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="*[starts-with(name(), 'elem') and not(pcode='xy')]">
  <xsl:param name="pCount" select="0"/>
  <xsl:element name="elem{$pCount}">
   <xsl:apply-templates select="node()[1]|@*">
     <xsl:with-param name="pCount" select="$pCount+1"/>
   </xsl:apply-templates>
  </xsl:element>
  <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select=
     "$pCount+1+ count(.//*[starts-with(name(), 'elem') and not(pcode='xy')])"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="*[starts-with(name(), 'elem') and pcode='xy']">
  <xsl:param name="pCount" select="0"/>

  <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select="$pCount"/>
  </xsl:apply-templates>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<Process>
  <a/>
  <elem0>
    <pcode>xx</pcode>
      <elem1>
        <pcode>xy</pcode>
      </elem1>
      <elem2>
        <pcode>xz</pcode>
      </elem2>
 </elem0>
  <b/>
  <elem3>
    <pcode>xy</pcode>
  </elem3>
  <c/>
  <elem4>
    <pcode>ab</pcode>
  </elem4>
  <d/>
  <elem5>
    <pcode>xy</pcode>
  </elem5>
  <e/>
  <elem6>
    <pcode>AD</pcode>
  </elem6>
  <f/>
</Process> 
```

**产生了想要的正确结果：**

```
<Process>
   <a/>
   <elem0>
      <pcode>xx</pcode>
      <elem1>
         <pcode>xz</pcode>
      </elem1>
   </elem0>
   <b/>
   <c/>
   <elem2>
      <pcode>ab</pcode>
   </elem2>
   <d/>
   <e/>
   <elem3>
      <pcode>AD</pcode>
   </elem3>
   <f/>
</Process> 
```

# android - 可用屏幕的大小

> ID：15366712
> 
> 赞同：5
> 
> 时间：2013-03-12T16:25:16.193
> 
> 标签：android

我正在使用 Nexus 7 1280x800 android 4.2.2 API 17

我想获得屏幕的大小以将其划分为相同高度和宽度的正方形部分。

我正在使用 FrameLayout，我的方块是 ImageView 的子类。

我这样做

`context.getResources().getDisplayMetrics().heightPixels; ----> 1205 context.getResources().getDisplayMetrics().widthPixels; ------> 800`

我想 1205 不是 1280 因为屏幕顶部和底部有两个 Android 菜单。

我的每个方块都是 30x30 像素。

要知道我最多可以画多少个正方形：

`int x=1205/30;`

当我尝试在坐标上绘制我的图像时，`(x-1)*30 ,y`它会部分地从屏幕上绘制出来。

我如何知道我的应用程序可以使用的屏幕部分？

我希望我能很好地解释我的问题。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:20:15.630

如果所有方块都在同​​一个 ImageView 中，那么我猜最简单的方法是创建自己的 imageView：

```
class MyImageView extends ImageView {
    Context context;
    int myWidth = 0;
    int myHeigh = 0;
    int numBoxesX = 0;
    int numBoxesY = 0;

    private final int boxWidth  = 30;
    private final int boxHeight = 30;

    ImageView(Context c) {
        super(c);
        context = c;
    }
} 
```

在类中，您覆盖 onSizeChange 函数

```
@Override
protected void onSizeChanged (int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    myWidth  = w;
    myHeight = h;
    // Set up other things that you work out from the width and height here, such as

    numBoxesX = myWidth / boxWidth;
    numBoxesY = myHeight / boxHeight;
} 
```

然后创建一个函数来绘制框：

```
public void drawSubBox(int x, int y, ...) {
    // Fail silently if the box being drawn doesn't exist ...
    if ((x<0) || (x>=numBoxesX)) return;
    if ((y<0) || (y>=numBoxesY)) return;

    // Your code to draw the box on the screen ...
} 
```

创建此视图后，您可以将其添加到布局中，并像任何其他视图一样访问它的功能，包括您添加的任何用于定义子框大小等的功能。所以在 Activity 的类中使用这个布局

```
MyImageView miv;

miv = topView.findViewById("idforMyImageViewSetInLayoutXMLfile");

miv.drawSubBox(0,0, ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:38:30.143

至于找出屏幕的像素尺寸，我认为您是正确的。`heightPixels`并将`widthPixels`为您提供您正在使用的屏幕的[绝对像素尺寸](http://developer.android.com/reference/android/util/DisplayMetrics.html#xdpi)。只是需要注意的一点-我担心使用 px 作为基本测量值，因为结果会[根据屏幕的密度而](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)变化。使用它似乎是一个更安全的想法，`dp`并且在找到屏幕中像素的绝对数量后，将该数字缩放，`dpi`以便矩形在每部手机上绘制相同。此外，绝对像素值并不代表实际可用空间，而只是像素总数。

Oherwise 我不知道这个布局是否完美地适合屏幕。`x = 1205/30 = 40.166667`. 将该号码插入`(x-1)*30 = 1,175`. 假设您手机上的 x 方向实际上包括 1205 像素（@JRowan - 它可能是横向），添加 30 像素似乎会使这些矩形适合屏幕。但是，这仅在任何矩形之间没有边界或偏移时才有效。使用您提供的数字，在 1205px 的屏幕宽度上只有 4.8px 的余地。在那个空间里有 40 个矩形，即使是一个很薄的边框也会把画从屏幕上推开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T00:39:32.483

我刚刚解决了这个问题，同时想知道利润率。

关键是标题栏，它实际上是应用程序屏幕的一部分，但在绘图屏幕之外。

如果我删除标题栏，它会完美运行。

`getWindow().requestFeature(Window.FEATURE_NO_TITLE);`

我花了两天时间做这个正确的问题才找到答案。我在这里留下了我找到它的帖子的链接。

[如何在 Android 应用程序中增加标题栏的大小？](https://stackoverflow.com/questions/6226538/how-to-increase-the-size-of-the-title-bar-in-an-android-application)

[Android中状态栏的高度](https://stackoverflow.com/questions/3407256/height-of-status-bar-in-android)

感谢您的回答。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-29T15:42:06.347

如果网格位于片段中，则问题是在片段视图膨胀之前获得可用的屏幕尺寸。在类似的场景中，我在托管活动中获取了片段容器的宽度和高度，并将这些作为参数传递给带有网格的片段

# c# - 使用反射从静态类中获取静态类的所有字段

> ID：15366725
> 
> 赞同：16
> 
> 时间：2013-03-12T16:25:39.273
> 
> 标签：c#, class, reflection, static

我有一个包含很多静态类的静态类。每个内部静态类都包含字段。我想获取所有内部静态类的所有字段。

```
public static class MyClass
{
    public static class MyInnerClass1
    {
        public const string Field1 = "abc";
        public const string Field2 = "def";
        public const string Field3 = "ghi";
    }
    public static class MyInnerClass2
    {
        public const int Field1 = 1;
        public const int Field2 = 2;
        public const int Field3 = 3;
    }
    ...
} 
```

我想打印出每个内部类的名称，然后是每个字段的名称和值。

例如：

> 我的内部类
> 
> 字段 1 = "abc"
> 
> ...

获取所有类的名称我没有问题：

```
var members = typeof(MyClass).GetMembers(BindingFlags.Public | BindingFlags.Static);

var str = ""; 
foreach (var member in members)
{
    str += member.Name +" ";             
} 
```

或者特定类中所有字段的名称和值：

```
var fields = typeof(MyClass.MyInnerClass1).GetFields();
foreach (var field in fields)
{
    str += field.Name + "-";
    str += field.GetValue(typeof(MyClass.MyInnerClass1));
} 
```

但是我该如何结合呢？内部静态类的名称和数量可能会改变。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T16:32:13.723

尝试以下

```
var builder = new StringBuilder();
foreach (var type in typeof(MyClass).GetNestedTypes(BindingFlags.Public | BindingFlags.NonPublic))
{
  if (!type.IsAbstract)
  {
     continue;
  }

  builder.AppendLine(type.Name);
  foreach (var field in type.GetFields(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static)) {
     var msg = String.Format("{0} = {1}", field.Name, field.GetValue(null));
     builder.AppendLine(msg);
  }
}

string output = builder.ToString(); 
```

使用`!type.IsAbstract`是为了清除非静态嵌套类型。C# 中的静态类型是在`abstract`后台生成的。

此外，我的解决方案将同时获取`public`非公共成员（类型和字段）。我不确定这是否是您的意图，因此您可能想要修改我的解决方案的那一部分。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-12T16:27:22.257

您需要递归循环`type.GetNestedTypes()`：

```
IEnumerable<FieldInfo> GetAllFields(Type type) {
    return type.GetNestedTypes().SelectMany(GetAllFields)
               .Concat(type.GetFields());
} 
```

# asp.net-mvc - 使用输出缓存以编程方式同时缓存一堆页面

> ID：15366729
> 
> 赞同：0
> 
> 时间：2013-03-12T16:25:45.240
> 
> 标签：asp.net-mvc, caching, azure, outputcache

我有一个 MVC4 网站，我正在使用 OutputCache 来缓存显示多页排名结果的视图的结果。缓存的输出因 Page 参数而异。排名是时间的函数，因此任何给定页面的结果都可能不同步，具体取决于它们何时被缓存，而我正在使用可以显示重复结果的无限滚动机制这一事实加剧了这种情况如果结果被推送到下一页。

这个问题的理想解决方案是一次缓存一些合理数量的页面。这将需要能够检查缓存的输出是否过期，如果缓存的结果过期则重新生成缓存结果，然后返回缓存的响应。这可能吗？

我还应该注意，我将 OutputCaching 与 Azure 输出缓存提供程序一起使用，并且我有一个专用的缓存角色（注意：*不是*共享缓存服务）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:29:19.767

> 这将需要能够检查缓存的输出是否过期，如果缓存的结果过期则重新生成缓存结果，然后返回缓存的响应。这可能吗？

这正是 OutputCaching 的工作原理——请求一个页面，如果它存在于缓存中并且未过期，则从缓存中检索它，否则，渲染页面并更新缓存。

如果数据确实是这种动态的，那么您可能会通过缓存输出而导致更多的工作/问题而没有实现任何性能提升（KISS 在这里适用！如果您可以首先避免问题，请不要为问题创建解决方案）。

但是，要按照您的描述（如果确实需要）构建解决方案，可以使用 Azure 队列和辅助角色来完成。添加/更新评分时，让您的评分引擎在队列中填充一个值。然后，让 Worker Role 每秒（例如）轮询 Queue 以获取值。如果找到值，则让 Worker Role 对缓存页面执行 Web 请求。如果它已过期，这将更新输出缓存。但是，您仍然受到缓存过期的限制。[除非你从这个 SO 帖子](https://stackoverflow.com/questions/376851/expire-output-cache-asp-net-mvc)中做类似的事情）：

> HttpResponse.RemoveOutputCacheItem() 可能是您要使用的方法。如果您可以确定动作缓存在什么名称下，您可以只删除特定动作（尝试设置断点或将所有缓存项目的名称转储到屏幕上）

# git - gitolite vs scm-manager

> ID：15366730
> 
> 赞同：0
> 
> 时间：2013-03-12T16:25:45.290
> 
> 标签：git

我有一个项目，我需要使用带有 Git 的远程服务器，你让我使用哪一个，例如 gitolite 或 scm-manager 或另一个？

我的任务不是由 git 和 gitolite 或 scm-manager 简单地工作，但我需要在 Cloud 上完成！

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:31:52.797

您应该考虑使用[Gerrit](https://code.google.com/p/gerrit/) - 代码审查引擎，它也恰好是完全兼容 git 的服务器。

即使您不使用它进行代码审查（您完全应该这样做），Gerrit 使用其 Web 界面自动为您的用户提供 ssh 密钥管理和访问控制非常方便 - 您无需在全部。

# mysql - 使用 vb.net 从 mysql 保存和检索图像

> ID：15366736
> 
> 赞同：0
> 
> 时间：2013-03-12T16:26:01.287
> 
> 标签：mysql, vb.net

这段代码现在可以工作了。我想将图像保存在数据库中，请帮助我如何处理

```
Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        OpenFileDialog1.ShowDialog()
    TextBox1.Text = OpenFileDialog1.FileName
    CaptionTextBox.Text = OpenFileDialog1.SafeFileName

    ' ImagePictureBox.Image = image.FromFile(TextBox1.Text)
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    updateRecord("insert into uploadimages(caption,image) values('" + CaptionTextBox.Text + "', '@ImagePictureBox' )")
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T19:10:40.420

```
 Imports MySql.Data.MySqlClient
    Imports System.Drawing.Imaging

    Dim cn As New MySqlConnection
        Dim con As New MySqlConnection
        Dim cmd As New MySqlCommand
        Dim dr As MySqlDataReader
        Dim da As MySqlDataAdapter
        Dim dt As New DataTable
        Dim abc As String

    private sub from1()
      cn.ConnectionString = "Server=localhost; user id=root; password=; database = school"
    cmd.Connection = cn
            cn.Open()
    end sub

 Private Sub images()
        Dim arrImage() As Byte
        Dim strImage As String
        Dim myMs As New IO.MemoryStream
        If Not IsNothing(Me.PictureBox5.Image) Then
            Me.PictureBox5.Image.Save(myMs, Me.PictureBox5.Image.RawFormat)
            arrImage = myMs.GetBuffer
            strImage = "1000"
        Else
            arrImage = Nothing
            strImage = "NULL"
        End If
        cmd.CommandText = "INSERT INTO admision(name, photo) VALUES('" & Me.TextBox1.Text & "'," & _
                               strImage & ")"

        If strImage = "1000" Then
            cmd.Parameters.Add(strImage, MySqlDbType.Blob).Value = arrImage

        End If

        MsgBox("Data save successfully!")
        clear()
        cmd.ExecuteNonQuery()

        cn.Close()

    End Sub 
```

# excel - Excel 宏报表创建

> ID：15366741
> 
> 赞同：0
> 
> 时间：2013-03-12T16:26:20.907
> 
> 标签：excel

我正在尝试创建一个 Excel 宏，它将获取原始数据（来自 Excel 工作表）并在该 Excel 文件中按月份组织工作表。例如，我有一个包含以下格式数据的日期列，`MM/DD/YYYY HH:MM:SS`我希望宏为每个月创建新的 Excel 工作表。因此，在流程结束时，月份（例如 1 月至 3 月）是每个单独的工作表，并且原始数据表仍然完好无损（未更改）。

我对编写 Excel 宏还很陌生，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:43:34.317

开始使用 excel 宏时，您可以做的最好的事情是记录您想要做什么，然后检查和重构 excel 为您生成的代码。在您的情况下，转到工具；宏；记录新宏。然后创建一个工作表。然后选择第一个包含日期的单元格并修改其值。然后选择该行并将其复制到新工作表。检查宏（工具；宏；Visual Basic 编辑器），您应该会看到插入新工作表、获取单元格的值和复制一行数据的基本内容。

现在加入一个 CDate 函数来将你的日期单元格变成一个日期，一个 DatePart 来提取月份和一个 for 循环来遍历你的源数据，你将有一个好的开始！

# php - 在 div 中加载 html 和 php 页面

> ID：15366751
> 
> 赞同：0
> 
> 时间：2013-03-12T16:26:42.197
> 
> 标签：php, javascript, ajax

单击按钮时如何在 div 中加载 html？

我有功能，但它不起作用：

```
function ajaxFunction(id, url){
document.getElementById("sh").style.visibility = 'hidden';
    var xmlHttp;
    try {// Firefox, Opera 8.0+, Safari
        xmlHttp = new XMLHttpRequest();     
    } catch (e) {// Internet Explorer
        try {
            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                alert("Your browser does not support AJAX!");
                return false;
            }
        }
    }

    xmlHttp.onreadystatechange = function(){
        if (xmlHttp.readyState == 4) {
            //Get the response from the server and extract the section that comes in the body section of the second html page avoid inserting the header part of the second page in your first page's element
            var respText = xmlHttp.responseText.split('<body>');
            elem.innerHTML = respText[1].split('</body>')[0];
        }
    }

    var elem = document.getElementById(id);
    if (!elem) {
        alert('The element with the passed ID doesn\'t exists in your page');
        return;
    }

    xmlHttp.open("GET", url, true);
    xmlHttp.send(null);
} 
```

我有按钮可以点击它。

```
<button type="button" name="new metere" value="" class="button" onclick="ajaxFunction('test','newmetere.html');">new metere</button> 
```

当我把 newmetere.php 函数不起作用并得到垃圾值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:32:56.243

试试[jQuery 的 load()](http://api.jquery.com/load/)：这是一种使用 Ajax 在网页中从另一个页面异步加载内容的快速而简单的方法！

# jquery - jquery multiselect selectedList 没有用 IE9 包装

> ID：15366752
> 
> 赞同：0
> 
> 时间：2013-03-12T16:26:45.477
> 
> 标签：jquery, internet-explorer-9, multi-select

在 IE9 下使用 Eric Hynds 的 Jquery Multiselect 小部件，选择列表项的显示不会像应有的那样包装。

IE9：

![在此处输入图像描述](../Images/22ea23540c2e9e7d9235a9a0be63539a.png)

预期的：

![在此处输入图像描述](../Images/82d24c237f0a950191e9fc9a4661e32d.png)

我确定它与怪癖模式有关，但我无法找到解决此问题的方法。我正在使用`<!DOCTYPE HTML>`，因为我也在为可以使用的浏览器使用一些 HTML5 功能。

有人对如何包装它有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:32:10.070

如果**怪癖模式**是您的问题，请在您的 head 标签中使用该元：

```
<head>
  ...
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  ...
</head> 
```

# skia - 在 ubuntu 上使用 Skia 库测试无法获得 UI 显示

> ID：15366754
> 
> 赞同：0
> 
> 时间：2013-03-12T16:26:51.617
> 
> 标签：skia

我按照[skia 站点](https://sites.google.com/site/skiadocs/user-documentation/quick-start-guides/linux)的步骤在我的Ubuntu 12.04 64 位机器上编译skia r1236。当我运行测试时，没有窗口显示图形结果。控制台上的输出是：

*[1/33] PDFPrimitives ................... [33/33] BitmapCopy ... 完成 33 次测试，0 次失败。*

如果我使用 SkImageEncoder::EncodeFile 将位图放到文件中，我会得到文件的图形输出。这确认该库工作正常，但无法调用 linux 窗口系统。

另一个问题是，在运行文本时，我收到以下错误

*SkFontHost::OpenStream 打开 1 失败 --- 字形 0 没有上下文*

[我已经按照Skia 网站](https://sites.google.com/site/skiadocs/user-documentation/quick-start-guides/linux)的描述安装了所有的 freetype 库，但是无论我在 SK_FONT_FILE_PREFIX 中使用哪个路径，我仍然有错误。

我的“/usr/share/fonts/”文件夹有

*   地图
*   真型
*   类型1
*   X11

我注意到有一个文件 SkOSWIndow_Unix.cpp 但似乎没有人从测试代码中调用它。所以我的问题是

1）我们如何让输出显示在窗口上？

2) SK_FONT_FILE_PREFIX 的值应该是多少？

PS：Windows 端口工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:04:57.930

Skia r1236 至少使用了两年；你应该使用更新的东西。网站上的说明不到一年。

Linux 测试和 Windows 测试产生相同的结果。您应该在 Linux 中看到与在 Windows 中相同的结果。

部分问题是您正在运行*哪些*特定测试。根据您对 Linux shell 输出的描述，这些是“gm”测试，不显示窗口。他们在屏幕外的画布上绘制图片。

使用“-w”选项，gm 会将图像作为 pngs 写入目录。使用“-r”选项，gm 将从目录中读取图像并将它们与它生成的图像进行比较。

Skia 中的 SampleApp 应用程序确实使用 Linux 窗口系统。但是，我们不支持用于创建它的“视图”库。Skia 是一个独立于平台的渲染引擎；您需要提供自己的 Windows 管理。

*   请注意，自 6000 年代或 7000 年代以来，gm 的功能略有不同；默认结帐将不再包含所有平台上所有 GM 的参考图像。

# html - 仅在 Safari 中进行 3d 变换期间的剪切问题

> ID：15366756
> 
> 赞同：5
> 
> 时间：2013-03-12T16:26:54.460
> 
> 标签：html, css, transform

我在执行 3d 旋转时遇到了一个有趣的裁剪问题。我正在使用以下方法旋转元素：

-webkit-transform: rotate3d(0, 1, 1, 180deg);

在动画期间，它在 Chrome、Firefox 和除 Safari 之外的任何其他浏览器中看起来都很好。

窗口正在剪切它后面的元素。这不应该是 z-index 问题，因为我已为这些元素分配了适当的 z-index。

任何人都知道是什么导致这种情况发生在 Safari 中？

这是动画期间 Safari 中的样子：

![苹果浏览器](../Images/08c1349192042988fe70a91b238c3fe7.png)

并在 Chrome 中正确设置动画 ![铬合金](../Images/bec3c4060dce7a2884086a74c2e569cf.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:21:36.913

可能是在您使用的 safari 版本中，z-index 没有得到很好的支持[Check can I use.com](http://caniuse.com/#search=z-index)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T20:56:51.120

尝试设置旋转模态的容器`transform-style: flat`和一个新的`perspective`. 您需要更改 3D 渲染上下文。

这是相关的答案[https://stackoverflow.com/a/18167565/1663572](https://stackoverflow.com/a/18167565/1663572) - 但您可能不想更改 Z 轴上的位置，因为它会显着改变外观。我也无法使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-28T13:58:20.523

已经有一段时间了，但我遇到了同样的问题，并且 actimel 与一个优雅的解决方法相关联。（尽管正如他们所说，它只适用于尚未转换为 3D 的背景元素。）

将这两行添加到背景元素（或其中包含这些元素的容器，或所有这些元素所属的类）：

```
-webkit-transform: translateZ(-1000px);
-webkit-perspective-origin: 100% 100% none; 
```

祝未来的读者好运！:)

# ruby-on-rails - 用于 ruby on rails 的可视化 sql 查询生成器

> ID：15366762
> 
> 赞同：0
> 
> 时间：2013-03-12T16:27:02.807
> 
> 标签：ruby-on-rails

在我的 RoR 应用程序中，我需要开发一个与 MS ACCESS 提供的尽可能相似的可视化查询生成器。（在 ms 访问中的示例截图）

![在此处输入图像描述](../Images/23536d05013bc2b32f53eb091cf161f2.png)

用户将能够选择数据库表，从表中选择字段，然后向字段添加条件。

您是否知道任何宝石/代码可以帮助我完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:38:55.023

这需要大量的 TLC 才能像 MS Access Query 一样，但您可以使用 Ransack gem 来完成查询和嵌套关联。

[http://railscasts.com/episodes/370-ransack](http://railscasts.com/episodes/370-ransack)

# c++ - 我应该用 htonl 包装 INADDR_ANY 吗？

> ID：15366764
> 
> 赞同：3
> 
> 时间：2013-03-12T16:27:05.290
> 
> 标签：c++, sockets

我正在检查现有代码。我找到了这样的行：

```
imr.imr_interface.s_addr  = INADDR_ANY; 
```

这意味着`INADDR_ANY`字节已经处于“TCP/IP 网络字节顺序”并且可以按原样使用。但是后来我发现了这样的行：

```
binda.sin_addr.s_addr = htonl(INADDR_ANY); 
```

这里作者将“a u_long from host to TCP/IP network byte order”

为什么有时`INADDR_ANY`需要被包裹`htonl`，有时不需要？或者这只是我试图理解的代码中的一个错误？

# jquery - Spectrum colorpicker 获得具有透明度的颜色

> ID：15366766
> 
> 赞同：9
> 
> 时间：2013-03-12T16:27:11.763
> 
> 标签：jquery, html, css, color-picker

我使用 jQuery 插件[Spectrum](http://bgrins.github.com/spectrum/)作为颜色选择器：

```
$('#backgroundColorPicker').spectrum({
    color: '#000',
    showAlpha: true,
    move: function(color){
        $('#result').css('background-color',color.toHexString());
    }
}); 
```

在此处查看此代码：http: [//jsfiddle.net/UkmXM/1/](http://jsfiddle.net/UkmXM/1/)。

如您所见，我设置`showAlpha`为`true`启用透明背景。但是，我没有得到透明的背景。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T16:28:08.953

十六进制字符串不支持透明度。改用`color.toRgbString()`：http: [//jsfiddle.net/UkmXM/2/](http://jsfiddle.net/UkmXM/2/)

```
$('#backgroundColorPicker').spectrum({
    color: '#000',
    showAlpha: true,
    move: function(color){
        $('#result').css('background-color',color.toRgbString());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-29T00:08:48.970

我在[TinyColor 文档](https://github.com/bgrins/TinyColor)中找到了它：`toHex8String`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-21T20:35:45.117

在这个 javascript 库中，toHex8String() 当前返回 RGBA 的 alpha 分量在 RGB 之前，例如一个白色的半透明十六进制代码，应该是：#FFFFFF80 而是返回 #80FFFFFF，它是青色的。

已建议修复：[https](https://github.com/seballot/spectrum/issues/31) ://github.com/seballot/spectrum/issues/31但与此同时，您可以通过独立提取 alpha 值并将其附加到十六进制字符串来获得透明颜色，如下所示：

`color.toHexString() + pad2(convertDecimalToHex(color._a)`

# javascript - 安卓/IOS浏览器。防止默认键盘显示在字段焦点上（Javascript）

> ID：15366767
> 
> 赞同：0
> 
> 时间：2013-03-12T16:27:14.283
> 
> 标签：javascript, android, ios

我正在用 javascript 编写一个自定义“组件”，而我不希望本机键盘在专注于输入元素时弹出。有人可以解释最好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T18:19:43.710

我想到了。我这样做的原因是 HTML5 的“日期”输入类型非常错误（在 Android 上），我们的用户无法接受。因此，我没有使用本地日期，而是将其更改为常规输入。然后在“焦点”事件中我停止传播并立即模糊它：IE：

```
focus: function(el, evt) {
                evt.stopPropagation();
                this.blur();
                openCustomComponent();
            } 
```

# sql - 尝试创建插入过程时出现 SQL Server 存储过程错误

> ID：15366774
> 
> 赞同：-1
> 
> 时间：2013-03-12T16:27:30.017
> 
> 标签：sql, sql-server, stored-procedures, sql-insert

我在 SQL Server 中创建了一个存储过程，但出现此错误，但我不确定它的含义。

以下是程序：

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
CREATE PROCEDURE [dbo].[Grant_Append]
    -- Add the parameters for the stored procedure here
    (@GrantNumber AS VARCHAR(50), 
     @GrantName AS VARCHAR(100),
     @ProjectCode AS VARCHAR(50),
     @LOCID AS INT,
     @Comments AS VARCHAR(100),
     @Provider AS VARCHAR(100),
     @ISAT AS NCHAR(10),
     @TypeID AS INT,
     @Slots AS FLOAT,
     @Patients AS FLOAT,
     @FundingMethod AS VARCHAR(50),
     @L1600 AS MONEY,
     @L1602 AS MONEY,
     @L1603 AS MONEY,
     @L1608 AS MONEY,
     @L1612 AS MONEY,
     @ADAAFunding AS MONEY,
     @ProgramBudget AS MONEY,
     @Jurisdiction AS INT,
     @VersionType AS VARCHAR(20),
     @VersionNum AS INT)
AS BEGIN
 INSERT INTO dbo.Grant
    (GrantNumber,
     GrantName,
     ProjectCode,
     LOCID,
     Comments,
     Provider,
     ISAT,
     TypeID,
     Slots,
     Patients,
     FundingMethod,
     [1600],
     [1602],
     [1603],
     [1608],
     [1612],
     ADAAFunding,
     ProgramBudget,
     Jurisdiction,
     VersionType,
     VersionNum, 
     SubmitDate)
      -- Insert statements for procedure here
    SELECT @GrantNumber, 
            @GrantName,
            @ProjectCode,
            @LOCID,
            @Comments,
            @Provider,
            @ISAT,
            @TypeID,
            @Slots,
            @Patients,
            @FundingMethod,
            @1600,
            @1602,
            @1603,
            @1608,
            @1612,
            @ADAAFunding,
            @ProgramBudget,
            @Jurisdiction,
            @VersionType,
            @VersionNum,
            getdate()
END 
```

这些是错误：

> *消息 156，级别 15，状态 1，过程 Grant_Append，第 30 行
> 关键字“Grant”附近的语法不正确。
> 消息 137，级别 15，状态 2，过程 Grant_Append，第 65 行
> 必须声明变量“@1600”*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:29:11.700

`GRANT`是保留关键字。它应该被分隔以避免错误，例如

```
INSERT INTO dbo.[Grant] .... 
```

*   [SQL Server 分隔标识符](http://msdn.microsoft.com/en-us/library/ms176027%28v=sql.105%29.aspx)
*   [SQL Server 保留关键字](http://msdn.microsoft.com/en-us/library/ms189822.aspx)

您的参数中也有拼写错误，

```
 @1600,
        @1602,
        @1603,
        @1608,
        @1612, 
```

什么时候应该

```
 @L1600,
        @L1602,
        @L1603,
        @L1608,
        @L1612, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:47:27.137

我建议将您的表名从保留关键字 [Grant] 更改为非保留关键字，即 [Grants]。另外，我建议不要以数字开头的列名。因此，例如，在 [1600] 前加上一些描述性的东西。我以“费用”为例。这是一个适合您的工作代码示例：

```
-- DROP TABLE dbo.Grants
CREATE TABLE dbo.Grants
(
GrantNumber VARCHAR(50), 
GrantName VARCHAR(100),
ProjectCode VARCHAR(50),
LOCID INT,
Comments VARCHAR(100),
Provider VARCHAR(100),
ISAT NCHAR(10),
TypeID INT,
Slots FLOAT,
Patients FLOAT,
FundingMethod VARCHAR(50),
Fee1600 MONEY,
Fee1602 MONEY,
Fee1603 MONEY,
Fee1608 MONEY,
Fee1612 MONEY,
ADAAFunding MONEY,
ProgramBudget MONEY,
Jurisdiction INT,
VersionType VARCHAR(20),
VersionNum INT,
SubmitDate DATETIME
);

SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
CREATE PROCEDURE [dbo].[GrantsInsert_sp]
    -- Add the parameters for the stored procedure here
    (@GrantNumber AS VARCHAR(50), 
     @GrantName AS VARCHAR(100),
     @ProjectCode AS VARCHAR(50),
     @LOCID AS INT,
     @Comments AS VARCHAR(100),
     @Provider AS VARCHAR(100),
     @ISAT AS NCHAR(10),
     @TypeID AS INT,
     @Slots AS FLOAT,
     @Patients AS FLOAT,
     @FundingMethod AS VARCHAR(50),
     @Fee1600 AS MONEY,
     @Fee1602 AS MONEY,
     @Fee1603 AS MONEY,
     @Fee1608 AS MONEY,
     @Fee1612 AS MONEY,
     @ADAAFunding AS MONEY,
     @ProgramBudget AS MONEY,
     @Jurisdiction AS INT,
     @VersionType AS VARCHAR(20),
     @VersionNum AS INT)
AS BEGIN
 INSERT INTO dbo.Grants
    (GrantNumber,
     GrantName,
     ProjectCode,
     LOCID,
     Comments,
     Provider,
     ISAT,
     TypeID,
     Slots,
     Patients,
     FundingMethod,
     Fee1600,
     Fee1602,
     Fee1603,
     Fee1608,
     Fee1612,
     ADAAFunding,
     ProgramBudget,
     Jurisdiction,
     VersionType,
     VersionNum, 
     SubmitDate)
      -- Insert statements for procedure here
    SELECT @GrantNumber, 
            @GrantName,
            @ProjectCode,
            @LOCID,
            @Comments,
            @Provider,
            @ISAT,
            @TypeID,
            @Slots,
            @Patients,
            @FundingMethod,
            @Fee1600,
            @Fee1602,
            @Fee1603,
            @Fee1608,
            @Fee1612,
            @ADAAFunding,
            @ProgramBudget,
            @Jurisdiction,
            @VersionType,
            @VersionNum,
            GETDATE();
END;

EXECUTE [GrantsInsert_sp] 'abc', 'abc', 'abc', 1, 'abc', 'abc', 'abc', 1, 1, 1, 'abc', 1, 1, 1, 1, 1, 1, 1, 1, 'abc', 1;

SELECT * FROM dbo.Grants; 
```

# c# - C# - 简单或复杂多线程函数的标准委托

> ID：15366775
> 
> 赞同：0
> 
> 时间：2013-03-12T16:27:34.780
> 
> 标签：c#, multithreading, delegates, signature

C# 中是否有我可以用于调用的标准委托。我是否必须为我必须调用的每个新函数签名声明一个新委托？

现在我只有那些签名。但是，如果我可以使用本机委托来处理任何复杂的返回和参数，那就太好了。

```
public bool isDone()
{...}
public void doStuff()
{...}
public void doMoreStuff(object o)
{...}
public void doEvenMoreStuff(string str)
{...}

// I'm declaring my "custom" delegates like this:
private delegate bool delegate_bool();
private delegate void delegate_void(string line);

// and calling via
if (InvokeRequired)
    Invoke(new delegate_void(doStuff), new object[] { });
else
    {...} 
```

* * *

编辑：答案似乎是[Action<>](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)和[Func<>](http://msdn.microsoft.com/en-us/library/bb549151.aspx)。

```
if (InvokeRequired)
    return Invoke(new Func<bool>(isDone), new object[] { });
else
    {...}
if (InvokeRequired)
    BeginInvoke(new Action(doStuff), new object[] { });
else
    {...}
if (InvokeRequired)
    BeginInvoke(new Action<string>(doEvenMoreStuff), new object[] { "hello world" });
else
    {...} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:29:08.213

您正在寻找`Action<*>`和`Func<*>`代表，它们正是这样做的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T16:29:41.390

`Action<>`和`Func<>`代表是您应该尽可能使用的“标准”代表。在极少数情况下不能使用它们。

特别是如果您有可选参数`ref`或`out`参数，超过 16 个参数，或者有一个`params`参数，那么您将需要使用另一个（或您自己的自定义）委托。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:29:22.067

[Action<>](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)和[Func<>](http://msdn.microsoft.com/en-gb/library/bb549151.aspx)代表将为您提供所需的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-12T16:29:33.277

[Action<>](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)和[Func<>](http://msdn.microsoft.com/en-us/library/bb549151.aspx)可以执行这些类型的任务。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T16:29:39.810

是的，您可以使用`Action`和 lambda。例如， Dispatcher.Invoke 需要一个委托，但我们可以将 lambda 转换为 Action，因此不需要为其定义新的委托：

```
Dispatcher.Invoke((Action)delegate() { ... }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T16:30:55.283

正如所有人所说。Action 和 Func 会做你想做的事。Action 应该用于不返回值的方法，如果需要返回值，您可以使用 Func。

# php - 检查两个复选框的值并将相应的值输入数据库 PHP

> ID：15366791
> 
> 赞同：0
> 
> 时间：2013-03-12T16:28:11.447
> 
> 标签：php, mysql, checkbox

所以我想要实现的是我有两个复选框。一个用于员工完成，另一个用于经理。当 BOTH 都被选中（值为 2）时，我想要的操作是选中名为 full complete 的第三个复选框并将值 2 输入到数据库中。

到目前为止，我有以下内容，但是，语法一定是错误的，因为它不允许我拥有这个 && 因为它是布尔值。

```
if($row['employee_complete'] == 2) && ($row['manager_complete'] == 2) { 
echo "<td>"."<input type = 'checkbox' checked='checked' name ='fullcomplete' value=      
'fullcomplete'/>"."</td>";
}
else
{
echo "<td>"."<input type = 'checkbox' name ='fullcomplete' value= 'full complete'/>"."  
</td>";
} 
```

这也不会在数据库中输入任何值，我是否需要执行完整的插入 SQL 查询？

可能需要考虑的事情： - 复选框在关联数组内的表格中回显。

谢谢你。

# ruby-on-rails - 使用 Elasticsearch、Tire 和 Kaminari 进行分页

> ID：15366795
> 
> 赞同：4
> 
> 时间：2013-03-12T16:28:21.910
> 
> 标签：ruby-on-rails, pagination, elasticsearch, tire, kaminari

我在使用 Elasticsearch、Tire 和 Kaminari 对搜索结果进行分页时遇到问题。

我正在搜索我的应用程序（新闻、绘画、书籍）中的所有模型作为一般站点搜索，因此，在我的站点控制器中需要一个用于轮胎搜索的块，以便进行更细粒度的控制，例如显示超过默认值10 个条目：

```
class SiteController < ApplicationController
  def search
    # @results = Painting.search(params[:query])
    query = params[:query]
    @results = Tire.search ['news','paintings', 'books'], :page => (params[:page]||1), :per_page=> (params[:per_page] || 3) do
      query { string query }
      size 100
    end
  end
end 
```

在我的搜索结果页面中，我有以下代码：

```
- if @results
  - @results.results.each do |result|
    = result.title
#pagination
  = paginate @results 
```

在我的所有模型中，我都有正确的映射并包括轮胎：

```
 # - - - - - - - - - - - - - - - - 
  # Elasticsearch
  # - - - - - - - - - - - - - - - - 
  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :id, index: :not_analyzed
    indexes :title, boost: 100
    indexes :slug, boost: 100, as: 'slug'
    indexes :content
    indexes :image, as: 'image.thumb.url'
    indexes :tags, as: 'tags'
    indexes :gallery_name, as: 'gallery.name'
    indexes :created_at, :type => 'date'
  end 
```

我确保我的所有条目都在 Elasticsearch 中正确编入索引。

我遇到的问题是我无法让它工作，最新的错误是：

> 未定义的方法`current_page'

任何想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T07:34:05.513

你可以试试这个？？？当我使用 per_page 选项时，我遇到了类似的问题。所以，我转向了轮胎提供的尺寸选项。我不确定出了什么问题。但是，显式设置和使用**from 和 size**对我有用......

```
class SiteController < ApplicationController
  def search
    # @results = Painting.search(params[:query])
    options = { :page => (params[:page] || 1), :size => 100 }
    query = params[:query]
    @results = Tire.search ['news','paintings', 'books'], options do
      query { string query }
      from options[:size].to_i * (options[:page].to_i-1)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:23:04.523

Tire 在其库中包含了 Will-paginate gem 的方法，所以我更喜欢那个而不是 Kaminari gem。如果在任何情况下您仍想与 Kaminari 在一起，请收集轮胎搜索的结果。

```
@results = @results.all.to_hash

paginate @results 
```

# macos - XCode 4.6 - 来自 MainMenu 的 Document.xib + MainMenu.xib 动作应在 Document.xib 中设置出口

> ID：15366799
> 
> 赞同：0
> 
> 时间：2013-03-12T16:28:35.847
> 
> 标签：macos, cocoa, interface-builder

我有一个 MainMenu，它应该调用 AppController 中的一个动作，然后它应该向 MainDocument 的出口发送一条消息。

据我所知，当我在 MainMenu.xib 的 Interface Builder 中实例化一个对象时，这无法将消息发送到不同 xib 中的插座。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:38:35.890

如果我理解正确，您希望在单击 MainMenu 中的菜单项时通知 MainDocument 对象？如果是这种情况，一种方法是使用 NSNotification 发布消息。您可以在此处查看有关如何执行此操作的 Apple 文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/ 10000043i](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:38:36.403

菜单中的大多数默认项目都连接到您在 Interface Builder 中看到的那个奇怪的“First Responder”占位符。您发送给它的任何操作消息都将[通过响应者链发送，](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html)这可能是您想要的。阅读该链接文档以获取更多信息。

（很少需要跨多个`.xib`文件连接一个插座。）

# paypal - Paypal IPN 模拟器现在会在每次“发送 IPN”后清除所有值

> ID：15366800
> 
> 赞同：1
> 
> 时间：2013-03-12T16:28:41.817
> 
> 标签：paypal, paypal-ipn

由于 PayPal 开发者网站的升级，IPN 模拟器的行为现在发生了巨大的变差。

以前，您可以填写一次表格，然后根据需要多次点击“发送 IPN”来调试后端。现在，每次单击“发送 IPN”时，您输入的所有数据都会重置为默认值。这意味着对于包含 30 多个字段的表单，您必须在每次要发送测试 IPN 时一遍又一遍地填写它。

没有办法无限期地保存信息已经够糟糕了，但是每次单击“发送 IPN”时清除每个字段真是太可怕了。

有没有办法让它保留现有的字段数据？

# c# - 如何持久化会话数据，可用于业务层

> ID：15366804
> 
> 赞同：2
> 
> 时间：2013-03-12T16:28:56.297
> 
> 标签：c#, asp.net, persistence

我正在构建一个 ASP.Net MVC 4 应用程序。用户必须登录并根据数据库检查帐户。在这个数据库中，用户与一个或多个部门相关联。要求规定用户一次只能为一个部门使用该应用程序。

这意味着在成功登录后，我会检查用户链接到多少个部门。如果这只是一个，它将是活跃的部门。如果超过一个，我会要求用户选择其中一个，这个选择将是活动部门。此值必须在整个会话期间保持不变。

应用程序中有许多用例必须只授予对属于活动部门的数据的访问权限。这些限制应用于业务层，即不了解 ASP.Net 上下文的 C# 类库。

我怎样才能最好地坚持用户对活动部门的选择？我不太喜欢将它存储在数据库中的想法，因为它在会话之外不会持久。另一方面，在我的业务层中，我找不到任何开箱即用的持久性配置。我的 ASP.net 应用程序提供了一个 Session，但这些对于业务层来说是不可见的。

我是否应该将此值存储在 Session 中并使用 AuthenticateRequest 事件或类似的东西将活动部门传递给业务层？

有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:34:56.070

这些对于业务层来说是不可见的？你什么意思？

您实际上可以从类库访问您的会话。你所要做的就是参考`System.Web`：

1) 在代码中导入命名空间

2)`var sessionValue = HttpContext.Current.Session["ActiveDepartment"];`

Alternatively, you can pass the `ActiveDepartment` to your business layer every time you need it instead of getting it from the session so you are not tied to a web application

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:34:36.987

存储活动部门可以在 Session 变量中完成：

`Session["ActiveDepartment"] = 1`

您的业​​务逻辑中不需要会话管理。围绕您的业务逻辑程序集编写一个包装器，该程序集需要提供给所有调用的 ActiveDepartmentID 才能有效。包装器始终返回由 ActiveDepartmentID 过滤的数据。

由于这是一个 MVC 应用程序，您还可以通过在所有 Controller 操作中要求 ActiveDepartmentID 在 Controller 级别强制执行此操作。

# ms-access - Access VBA：根据非绑定列在组合框中查找项目

> ID：15366805
> 
> 赞同：5
> 
> 时间：2013-03-12T16:28:58.893
> 
> 标签：ms-access, vba, ms-access-2010

我在 Access 表单上有一个两列组合框，表示键到代码的映射。组合框的第一列是“绑定列”（即`MyComboBox.Value`调用时使用的列）。

我需要`Value`根据第二列中的值动态设置我的组合框。例如，如果我的组合框源是：

```
Value | Code
===============
 A1    | ABCD
 A2    | EFGH
 A3    | IJKL 
```

我可以简单地使用 设置组合框的值`ComboBox.Value = "A2"`，但是如何使用第二列来做同样的事情呢？`ComboBox.Value = "EFGH"`显然是无效的。本质上是在寻找沿线的逻辑`ComboBox.Value = ComboBox.ValueWhereSecondColumnEquals("EFGH")`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:43:35.583

并假设它不是基于表/查询：

```
Dim i As Integer

For i = 0 To ComboBox.ListCount-1
    If ComboBox.Column(1, i) = "EFGH" Then
        ComboBox.Value = ComboBox.ItemData(i)
        Exit For
    End If
Next i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T16:32:09.517

假设您的组合基于表格，您可以 DLookUp 表格中的值：

```
 ComboBox.Value = Dlookup("Value","Table","Code='" & sCode & "'") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T01:02:16.370

如果源是组合框中选定的值，而目标是未绑定的组合框，则将目标组合框的 .BoundColumn 属性设置为适当的列，然后正常分配组合框值，如 cboX=cboY。即使绑定了目标组合框，您也可以根据需要动态更改绑定的列。

# c# - WPF：当 TextBox 具有焦点时为 ListBox 设置 IsSelected，而不会丢失 LostFocus 上的选择

> ID：15366806
> 
> 赞同：6
> 
> 时间：2013-03-12T16:28:59.433
> 
> 标签：c#, wpf, xaml, textbox, listbox

我有`ListBox`一个`ListBoxItems`模板，所以它们包含`TextBoxes`

![带有文本框的列表框](../Images/f5cc7cabf9d76f73d847c5fd9a767ad2.png)

当`TextBox`获得焦点时，我希望`ListBoxItem`被选中。我发现的一种解决方案如下所示：

```
<Style TargetType="{x:Type ListBoxItem}">
    <Style.Triggers>
        <Trigger Property="IsKeyboardFocusWithin" Value="True">
            <Setter Property="IsSelected" Value="True"></Setter>
        </Trigger>
    </Style.Triggers>
</Style> 
```

这很好用，但是当`TextBox`失去焦点时，选择也会失去焦点。

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T11:02:35.463

我发现在没有代码的情况下执行此操作的最佳解决方案是：

```
<Style TargetType="{x:Type ListBoxItem}">
    <Style.Triggers>
        <EventTrigger RoutedEvent="PreviewGotKeyboardFocus">
            <BeginStoryboard>
                <Storyboard>
                    <BooleanAnimationUsingKeyFrames
                        Storyboard.TargetProperty="(ListBoxItem.IsSelected)">

                        <DiscreteBooleanKeyFrame KeyTime="0" Value="True"/>
                    </BooleanAnimationUsingKeyFrames>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T16:02:03.710

您还可以将注意力集中在文本框上，但在任何给定时间只选择一个 ListBoxItem，并带有代码。

在列表框 XAML 中：

```
<ListBox
PreviewLostKeyboardFocus="CheckFocus">
</ListBox> 
```

然后，`CheckFocus()`在代码隐藏的方法中：

```
/* Cause the original ListBoxItem to lose focus
    * only if another ListBoxItem is being selected.
    * If a different element type is selected, the
    * original ListBoxItem will keep focus.
    */
private void CheckFocus(object sender, KeyboardFocusChangedEventArgs e)
{
    // check if focus is moving from a ListBoxItem, to a ListBoxItem
    if (e.OldFocus.GetType().Name == "ListBoxItem" && e.NewFocus.GetType().Name == "ListBoxItem")
    {
        // if so, cause the original ListBoxItem to loose focus
        (e.OldFocus as ListBoxItem).IsSelected = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T10:48:17.057

从建议的解决方案列表中，没有任何东西可以帮助我解决同样的问题。这是我制作的自定义解决方案：

**1）。**创建将强制执行焦点的行为（包含附加属性的类）：

```
public class TextBoxBehaviors
{
    public static bool GetEnforceFocus(DependencyObject obj)
    {
        return (bool)obj.GetValue(EnforceFocusProperty);
    }

    public static void SetEnforceFocus(DependencyObject obj, bool value)
    {
        obj.SetValue(EnforceFocusProperty, value);
    }

    // Using a DependencyProperty as the backing store for EnforceFocus.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty EnforceFocusProperty =
        DependencyProperty.RegisterAttached("EnforceFocus", typeof(bool), typeof(TextBoxBehaviors), new PropertyMetadata(false,
             (o, e) =>
             {
                 bool newValue = (bool)e.NewValue;
                 if (!newValue) return;

                 TextBox tb = o as TextBox;

                 if (tb == null)
                 {
                     MessageBox.Show("Target object should be typeof TextBox only. Execution has been seased", "TextBoxBehaviors warning",
                       MessageBoxButton.OK, MessageBoxImage.Warning);
                 }

                 tb.TextChanged += OnTextChanged;

             }));

    private static void OnTextChanged(object o, TextChangedEventArgs e)
    {
        TextBox tb = o as TextBox;
        tb.Focus();
       /* You have to place your caret at the end of your text manually, because each focus repalce your caret at the beging of text.*/
        tb.CaretIndex = tb.Text.Length;
    }

} 
```

**2）。**在 XAML 中使用此行为：

```
 <DataTemplate x:Key="MyDataTemplate">
    <TextBox behaviors:TextBoxBehaviors.EnforceFocus="True"
             Text="{Binding Path=MyProperty, UpdateSourceTrigger=PropertyChanged}" />
</DataTemplate> 
```

# css - 如果调整窗口大小，如何正确并排浮动两个元素而不会破坏

> ID：15366811
> 
> 赞同：2
> 
> 时间：2013-03-12T16:29:23.050
> 
> 标签：css

所以我有两个元素彼此相邻浮动，一个有一个固定的宽度，另一个需要一个百分比，这样当窗口/浏览器调整大小时，内容就会随之流动。但是，当窗口大小小于某个比例时，我无法让内容彼此相邻浮动。

这是我的CSS代码：

```
.box {
    width: 50px;
    height: 50px;
    float: left;
    margin-right: 10px;
    background-color: blue;
}

p {
    width: 95%;
    float: left;
    margin: 0;
    padding: 0;
} 
```

有没有解决的办法？这是我的小提琴，所以你可以看到发生了什么。 [我的例子](http://jsfiddle.net/3QhzS/)

如果你把尺寸变小，你会看到 P 标签下拉到框下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:48:00.387

如果您不知道`div.box`（如您在评论中所述）的宽度，那么您可以使用标签来解决问题`position:relative`。`p`

```
p{ 
  position:relative;
  /* anchoring top, left and right sides */
  top:0px;
  right:0px;
  left:0px; 
  margin:0; 
  padding:0; 
} 
```

[**工作小提琴**](http://jsfiddle.net/3QhzS/9/)

[**Working Fiddle**](http://jsfiddle.net/3QhzS/10/)(with two div's)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:49:03.163

If the box is a fixed width you can use the following styles:

```
.item {
    padding-left: 60px;
}

.box {
    width: 50px;
    height: 50px;
    float: left;
    margin-left: -60px;
    background-color: blue;
}

p {
    width: 100%;
    float: left;
    margin: 0;
    padding: 0;
} 
```

[http://jsfiddle.net/3QhzS/1/](http://jsfiddle.net/3QhzS/1/)

otherwise you will need to add a little bit of jquery to it to add styles on the fly:

[http://jsfiddle.net/3QhzS/6/](http://jsfiddle.net/3QhzS/6/)

# node.js - 舰队 NodeJS 部署教程

> ID：15366814
> 
> 赞同：0
> 
> 时间：2013-03-12T16:29:31.433
> 
> 标签：node.js, deployment, continuous-integration

我正在尝试使用 Fleet 部署一些 NodeJS 应用程序：[https](https://github.com/substack/fleet) ://github.com/substack/fleet 。我已经阅读了多次引用的博客文章，并获得了部分成功的设置。

我可以在**服务器**上：

创建舰队中心 -->`fleet hub --port=7000 --secret=beebop` 创建舰队无人机 -->`fleet drone --hub=localhost:7000 --secret=beebop`

我可以在我的**开发机器上**：

添加默认车队仓库 -->`fleet remote add default --hub=172.16.10.147:7000 --secret=beebop`

然后再次在**服务器**上，我可以生成一个节点进程 -->`fleet spawn -- app.js 3000`输出如下：

```
drone#ubuntu
└─┬ pid#bba906
  ├── status:   respawning
  ├── commit:   keystone-web/4eab770ded77b25a949795d0aed5727dd2783c4f
  └── command:  node app.js 
```

我在启动 Fleet 集线器的目录中看到已部署的应用程序：

```
drwxr-xr-x 4 root root 4096 Mar 12 10:49 .
drwxr-xr-x 4 root root 4096 Mar 12 10:10 ..
drwxr-xr-x 8 root root 4096 Mar 12 10:49 myapp.4eab770ded77b25a949795d0aed5727dd2783c4f
drwxr-xr-x 9 root root 4096 Mar 12 10:27 myapp.eb350403b214f1023aff8405552ca27454673463
user@ubuntu:/opt/nodeapps/test/deploy$ 
```

我的问题是我现在应该能够访问网络应用程序，例如 localhost//:3000 吗？

当我尝试这样做时，Web 浏览器报告该地址没有任何内容。

Fleet 的博客文章旁边是否有任何教程？我觉得我错过了一步。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:55:36.830

See the script for the details. This is what I did, and it works pretty well for my scenario:

```
#!/bin/bash
option1="development"
option2="test"
option3="demo"
chosen=""

echo please enter environment setting for fleet/node deployment 1: "'"development"'" 2: "'"test"'" 3: "'"demo"'"
read env

if [[ $env == 1 ]]
    then
        chosen=$option1
elif [[ $env == 2 ]]
    then
        chosen=$option2
elif [[ $env == 3 ]]
    then chosen=$option3
else
    echo "you didn't enter a valid environment setting"
            echo "your options are" "1:'"$option1"'" "or" "2:'"$option2"'"
            exit
fi

echo deploying to "'"$chosen"'"
sleep 1
echo starting fleet deploy
fleet deploy --remote=$chosen
echo running npm install
fleet exec --remote=$chosen npm install
echo spawning application
fleet spawn --remote=$chosen --env.NODE_ENV=$chosen node app.js
fleet ps --remote=$chosen 
```

# dynamic - 有或没有枚举

> ID：15366821
> 
> 赞同：0
> 
> 时间：2013-03-12T16:29:44.720
> 
> 标签：dynamic, enumeration

我将数据存储在数据库表中。使用相同的数据创建枚举。这是重复工作，每次我们更新数据库表时，我们都必须用新值更新枚举。

有一个公平的解决方案吗？像动态枚举之类的东西？或者你是如何在你的项目中解决这个问题的？

# perl - 传递“$”是否安全？到子程序？

> ID：15366823
> 
> 赞同：2
> 
> 时间：2013-03-12T16:29:47.693
> 
> 标签：perl, error-handling, system

```
#!/usr/bin/env perl
use warnings;
use strict;

my $ret = system( 'my_command' );

error_message( $? ) if $ret;

sub error_message {
    my $error = shift;
    if ( $error == -1 ) {
        print "failed to execute: $!\n";
    }
    elsif ( $error & 127 ) {
        printf "child died with signal %d, %s coredump\n", 
        ( $error & 127 ), ( $error & 128 ) ? 'with' : 'without';
    }
    else {
        printf "child exited with value %d\n", $error >> 8;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:48:54.437

的值`$?`表示来自另一个应用程序的错误，该错误是 Perl 代码已通过提示、`system`管道打开或可能通过对 的调用启动的`wait`。

只要您不使用多个子进程，那么通常您是安全的，但要确保您可以在调用 set 后立即捕获该值`$?`，如下所示

```
my $ret = system( 'my_command' );
my $child_error = $?;

error_message($child_error) if $ret; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:57:10.473

如果你也对 $! 感兴趣，你也应该传递它，在系统调用之后立即处理它，而不是依赖它在你的 sub 深处是正确的。只要在将参数从 @ 移开之前没有代码，就*可以了。如果你做任何可能改变 $! 还是美元？在将它们移出 @*或将它们设置为 @_ 中的值之前，您将查看更改后的值，而不是初始错误后的值。

# javascript - 错误：“this.jc 不是函数”（main.js 第 853 行）

> ID：15366826
> 
> 赞同：0
> 
> 时间：2013-03-12T16:29:57.197
> 
> 标签：javascript, google-maps, google-maps-api-2

我的地图表现得很奇怪。列出有关每个标记的数据的表格未正确突出显示，并且 tablabels 变量给出了一些奇怪的结果。我的一些标记不见了，firebug 给我一个错误，上面写着“this.jc 不是一个函数”，并把我引到 main.js 第 853 行。这个错误真的悄悄出现在我身上，我什至不知道该去哪里开始对其进行故障排除。有任何想法吗？有没有人见过这样的事情？

好的，在建议检查事件后，我检查了 myclick() 函数：

```
function myclick(i) {
      GEvent.trigger(gmarkers[i], "click");
    } 
```

firebug 说 main.js 第 140 行中关于这个函数的“a”是未定义的

这是附加代码，它可能会有所帮助

```
 //Highlights rows of all nested wells with same id as marker if it is a well marker
  GEvent.addListener(marker, "click", function() {
      marker.openInfoWindowHtml(html);

    //only highlight table for wells
    //markers with id = 2 are static wells, otherwise
    //we skip table highlighting
    if(marker.id==2)
    {
        var Table = document.getElementById("myTable3");
        var rows = Table.getElementsByTagName("tr");
        var f;
        for(f=0;f<rows.length;f++)
        {
            if(rows[f].id==marker.name)
                rows[f].className="selected";
            else
                rows[f].className="unselected"
        }
    }

    });

  //add marker, icon, and popup to global arrays
  gmarkers.push(marker);
  gmarkers[i] = marker;
  htmls[i] = popup_html;
  icons[i] = icon;
  /*Add data to each sidebar depending on id: 0=stream flow station, 1=rain gage, 2=well */
  if(id==0)
  {
      side_bar_html[0] += '<tr><td><a href="javascript:myclick(' + i + ')"  onmouseover="gmarkers['+i+'].blink(true,250)" onmouseout="gmarkers['+i+'].blink(false,0)">' + name + '</a><br></td>';
      side_bar_html[0] += '<td class="col1" align="center">' + number + '</td>' ;
      side_bar_html[0] += '<td class="col1" align="center">' + data2 + " " + ft +'</td>' ;
      side_bar_html[0] += '<td class="col1" align="center">' + update + '</td>';
      side_bar_html[0] += '<td class="col1" align="center"><a href=' + link + '>NWIS link</td></tr>' ;

  }
  if(id==2)
  {

     side_bar_html[2] += '<tr id=' + z + '><td><a href="javascript:myclick(' + i + ')"  onmouseover="gmarkers['+i+'].blink(true,250)" onmouseout="gmarkers['+i+'].blink(false,0)">' + number + '</a><br></td>'; 
     side_bar_html[2] += '<td class="col1" align="right">' + name + '</td>';
     side_bar_html[2] += '<td class="col1" align="right">' + data2 + '</td>';
     side_bar_html[2] += '<td class="col1" align="center">' + update + '</td>';
     side_bar_html[2] += '<td class="col1" align="center"><a href=' + link + '>NWIS Link</td></tr>' ;

     z++;
  }

  map.addOverlay(marker);
  ++i;

} 
```

我刚刚检查了我的标记变量的各个方面。似乎丢失的内容也在复制某些内容。这可能与 DupFlag 变量有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:44:14.630

我不敢相信这是多么容易解决。我不小心删除了一行代码：

```
map.addOverlay(marker); 
```

它应该是在将数据添加到侧边栏的循环之后

# awk - 如何使用awk根据前三列合并两个文件

> ID：15366829
> 
> 赞同：1
> 
> 时间：2013-03-12T16:30:04.460
> 
> 标签：awk

我想使用前三列作为键将两个文件逐行合并为一个文件。例子：

文件1.txt

```
a b c 1 4 7
x y z 2 5 8
p q r 3 6 9 
```

文件2.txt

```
p q r 11
a b c 12
x y z 13 
```

我对上述两个文件的期望输出是：

```
a b c 1 4 7 12
x y z 2 5 8 13
p q r 3 6 9 11 
```

每个文件中的列数不是固定的，它可能因行而异。此外，我在每个文件中有超过 27K 行。

它们没有被订购。他们唯一的事情是两个文件的前三个字段是相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:27:39.583

加入字段数可变*（四个或更多）*的前三个字段：

```
{
    # get the forth field until the last
    for (i=4;i<=NF;i++)
        f=f$i" "

    # concat fields
    arr[$1OFS$2OFS$3]=arr[$1OFS$2OFS$3]f;
    # reset field string
    f=""    
}    
END {
    for (key in arr)
        print key, arr[key]    
} 
```

像这样运行：

```
$ awk -f script.awk file1 file2
a b c 1 4 7 12 
p q r 3 6 9 11 
x y z 2 5 8 13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:12:24.690

您也可以使用`join`，它需要排序输入并且前 3 个字段被合并。下面的示例对每个文件进行排序，并允许`sed`合并和分隔字段：

```
join <(sort file1.txt | sed 's/ /-/; s/ /-/') \
     <(sort file2.txt | sed 's/ /-/; s/ /-/') |
sed 's/-/ /; s/-/ /' 
```

输出：

```
a b c 1 4 7 12
p q r 3 6 9 11
x y z 2 5 8 13 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:36:23.817

尝试这个：

```
 awk 'NR==FNR{a[$1$2$3]=$4;next}$1$2$3 in a{print $0, a[$1$2$3]}' file2 file1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:45:58.710

如果列的长度不同，您可以尝试使用以下方法`SUBSEP`：

```
awk 'NR==FNR{A[$1,$2,$3]=$4; next}($1,$2,$3) in A{print $0, A[$1,$2,$3]}' file2 file1 
```

* * *

对于 file1 和排序输出中的不同列，请尝试：

```
awk '{$1=$1; i=$1 FS $2 FS $3 FS; sub(i,x)} NR==FNR{A[i]=$0; next}i in A{print i $0, A[i]}' file2 file1 | sort 
```

# javascript - JsHint，我可以在函数定义中定位所有未使用的参数而不是最后一个吗？

> ID：15366832
> 
> 赞同：0
> 
> 时间：2013-03-12T16:30:17.943
> 
> 标签：javascript, jshint

这更像是一个健全性检查的想法。当前未使用：true 仅确保使用最后一个函数参数，但有时我想确保我使用的是传入的所有内容。是否有覆盖以查看所有未使用的函数参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:00:05.910

这似乎在 1.0.0 版和 1.1.0 版之间发生了变化。以下代码在 1.0.0 中引发了三个警告，但在 1.1.0 中只有一个警告：

```
/*jshint unused: true */
(function example(a, b, c) {
    /* Don't use any of the arguments */
}()); 
```

查看 JSHint 源代码（特别[是`warnUsed`function](https://github.com/jshint/jshint/blob/1.1.0/src/stable/jshint.js#L3463)），该`unused`选项似乎获得了一些新功能。您现在可以将其设置为 3 个新值中的 1 个（`last-param`默认设置为）：

```
var warnable_types = {
    "vars": ["var"],
    "last-param": ["var", "last-param"],
    "strict": ["var", "param", "last-param"]
}; 
```

通过将其设置为`strict`，上面的示例将再次引发 3 个警告，每个参数 1 个，而不是最后一个参数仅 1 个警告：

```
/*jshint unused: strict */
(function example(a, b, c) {
    /* Don't use any of the arguments */
}()); 
```

# django - Django 1.4，当 DEBUG=True 时检查静态文件是否存在

> ID：15366833
> 
> 赞同：5
> 
> 时间：2013-03-12T16:30:18.077
> 
> 标签：django, django-staticfiles

我正在尝试编写一些代码来检查在调试模式下是否存在静态文件，但我无法让它工作。这是我在控制台中尝试过的：

```
>> from django.conf import settings
>>> settings.DEBUG
True
>>> from django.contrib.staticfiles.storage import staticfiles_storage
>>> staticfiles_storage.exists('img/vi_crumbs_bkg.gif')
False 
```

尽管`vi_crumbs_bkg.gif`存在于我的应用程序的静态目录中，但此操作失败。如果我将其符号链接到`settings.STATIC_ROOT`，则一切正常。

那么，`staticfiles_storage.exists`在调试模式下有什么方法可以让我开始工作吗？

（注意：虽然我知道我可以运行 collectstatic 以使其正常工作，但我不想定期运行它以在我积极开发时从我的所有应用程序中收集所有资产）

提前致谢 -

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:46:48.530

我想我有一个解决办法。我将不使用`staticfiles_storage.exists`，而是依靠 Django 的静态文件查找器来为我查找文件。像这样：

```
>>> from django.contrib.staticfiles import finders
>>> finders.find('img/vi_crumbs_bkg.gif')
u'/home/myuser/django_project/app_root/static/img/vi_crumbs_bkg.gif' 
```

这应该非常适合我的需求，因为我需要做的就是检查一个文件是否存在于一个目录中而不是另一个目录中 - 无论它是在应用程序的根目录中还是`STATIC_ROOT`无关紧要。

希望这对其他人有帮助。

# asp.net - 在 MVC4 应用程序中生成连接字符串

> ID：15366835
> 
> 赞同：0
> 
> 时间：2013-03-12T16:30:18.867
> 
> 标签：asp.net, mysql, asp.net-mvc, web-config, global-asax

我想使用在 DbContext() 类中声明的类。为此，我还在我的 Model 文件夹中添加了一个类 SampleData()。我还在我的项目中添加了 App_Data 文件夹。

我在 Application_start() 中的 Global.asax 中编写代码时遇到问题，

```
protected void Application_Start()
        {
            System.Data.Entity.Database.SetInitializer(new MusicStore.Models.SampleData());
            AreaRegistration.RegisterAllAreas();

            WebApiConfig.Register(GlobalConfiguration.Configuration);
            FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
            RouteConfig.RegisterRoutes(RouteTable.Routes);
            BundleConfig.RegisterBundles(BundleTable.Bundles);
            AuthConfig.RegisterAuth();
        } 
```

但它在 Application_start() 内的第一行代码中给出错误

我还将连接字符串设置为，

```
 <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MusicStore-20130311211949;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MusicStore-20130311211949.mdf" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

请建议我如何解决我在 Applicatio_Start() 的第一行出错的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:04:19.350

`SetInitializer`将数据库初始化策略作为参数。这是现有策略之一（`CreateDatabaseIfNotExists`、`DropCreateDatabaseAlways`、`DropCreateDatabaseIfModelChanges`或`MigrateDatabaseToLatestVersion`）或`null`（对于没有初始化策略，即不做任何事情）。它不是种子数据的地方。这应该在您的`Seed`方法中`DbMigrationsConfiguration`（在 Migrations 文件夹中）。

# javascript - 从 jQuery 对象集合中获取可见性

> ID：15366839
> 
> 赞同：1
> 
> 时间：2013-03-12T16:30:25.037
> 
> 标签：javascript, jquery

我有这行代码：

```
var filterInputs = $(this).siblings('.filterInputs'); 
```

它对 filterInputs 执行一些工作。稍后，我想将我的 filterInputs 集合减少到仅可见的那些。

显然，我可以这样做：

```
var visibleFilterInputs = $(this).siblings('.filterInputs:visible'); 
```

但考虑到我已经参考了我希望减少的集合，这似乎效率低下。

有没有办法说这样的话：

```
//TODO: Example
var visibleFilterInputs = $(filterInputs:visible); 
```

无需再次遍历 DOM 树？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:32:07.287

您是绝对正确的，没有理由重新收集 DOM 元素，因为您已经在 jQuery 对象中拥有它们。这正是该`.filter()`方法的用途：[http ://api.jquery.com/filter/](http://api.jquery.com/filter/)

试试这个：

```
var visibleFilterInputs = filterInputs.filter(":visible"); 
```

这是一个例子：http: [//jsfiddle.net/FC9sH/](http://jsfiddle.net/FC9sH/)

请注意，最好以特定 HTML 标记为目标，例如`<div>`，以使`:visible`选择器更有效率（因为它不是 CSS 规范的一部分，并且无法通过本机方法进行优化）。至少在您的情况下，您已经在使用`filterInputs`该类。无论如何，也许是这样的：

```
var visibleFilterInputs = filterInputs.filter("div:visible"); 
```

但**只有**在适用的情况下。我的意思是，即使选择多个已知元素标签也可能更好：

```
var visibleFilterInputs = filterInputs.filter("div:visible, p:visible"); 
```

# c#-4.0 - MEF 的 GetExports () 未能在 CompositionContainer 中找到组成部分

> ID：15366840
> 
> 赞同：2
> 
> 时间：2013-03-12T16:30:26.370
> 
> 标签：c#-4.0, mef

尝试使用 GetExports() 加载实例化导出时（使用下面描述的 LINQ 查询），该方法返回 null。我注意到，当我在没有 LINQ 查询的情况下调用 GetExports 时，返回值为 Count: 0。这向我表明 MEF 无法找到已在容器中组合的任何导出。但是，在查看 Container.Catalog.Parts.ExportDefinitions 时，我可以看到 ExportDefinition。关于我哪里出错的任何想法？直到查询的一切似乎都工作正常。

我声明并实现了以下合同和元数据视图：

```
public interface IMap
{
    void Init();
    int ParseData();
}

public interface IMapMetadata
{
    string MapName { get; }
    string DocumentType { get; }
}

[Export(typeof(IMap))]
[ExportMetadata("MapName", "Map")]
public class Map
{
    public Map()
    {
    }
} 
```

我正在使用以下代码加载包含满足此合同的 DLL 的目录：

```
 public void LoadByDirectory(string zPath)
    {
        try
        {
            _catalog.Catalogs.Add(new DirectoryCatalog(zPath));
        }
        catch (Exception e)
        {
            String zErrMess = e.Message;
        }

    } 
```

使用 LINQ 查询获取导出：

```
public IMap GetMapInstance(string zMapName)
{
        IMap ndeMap;

        _container = new CompositionContainer(_catalog);
        _container.ComposeParts(this);

        try
        {
            ndeMap = _container.GetExports<IMap, IMapMetadata>()
                            .Where(p => p.Metadata.MapName.Equals(zMapName))
                            .Select(p => p.Value)
                            .FirstOrDefault();
        }
        catch (Exception ex) 
        {
            throw new Exception("Failed to load map " + zMapName + ": " + ex.Message, ex);
        }

        return ndeMap;
    } 
```

像这样调用上面的方法：

```
IMap map = mapFactory.GetMapInstance("Map"); 
```

返回空值。

**更新**

除了下面的答案，我忘记在地图类上声明接口，这解决了问题（注意我删除了 DocumentType 属性）：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public sealed class MapExportAttribute : ExportAttribute, IMapMetadata
{
    public MapExportAttribute()
        : base(typeof(IMap))
    {
    }

    public string MapName { get; set; }
}

[MapExport(MapName="Map")]
public class Map : IMap
{
    public Map()
    {
    }

    public void  Init()
    {
        throw new NotImplementedException();
    }

    public int  ParseData()
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:21:34.383

看起来您缺少`DocumentType`导出的元数据：

```
[Export(typeof(IMap))]
[ExportMetadata("MapName", "Map")]
[ExportMetadata("DocumentType", "???")]
public class Map
{
} 
```

确保您指定正确元数据的最简单方法是自定义导出属性：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public sealed class MapExportAttribute : ExportAttribute, IMapMetadata
{
   public MapExportAttribute() : base(typeof(IMap))
   {
   }

   public string MapName { get; set; }
   public string DocumentType { get; set; }
}

[MapExport(MapName = "Map")]
public class Map
{
} 
```

# jsf - f:convertDateTime 显示错误的小时

> ID：15366841
> 
> 赞同：1
> 
> 时间：2013-03-12T16:30:32.227
> 
> 标签：jsf, datetime, primefaces

我的数据库中有日期时间。当我尝试显示它时，“小时”是错误的（多 6 小时）。

```
DB          2013-03-12 10:05:49
Display     2013/03/12 16:05:49 
```

我正在使用 primefaces，这是代码：

```
<p:column id="fecha" headerText="Fecha" style="text-align: center">
  <h:outputText value="#{con.fecha}" >
    <f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss"  />
  </h:outputText>
</p:column> 
```

我尝试使用该模式`HH`，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T16:52:51.440

在您`web.xml`尝试粘贴这些行时：

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T13:37:07.480

您正面临时区问题...

[我解决了这个问题，从这里](http://www.jsftoolbox.com/documentation/help/12-TagReference/core/f_convertDateTime.html#timeZone)获取我的 timeZone并像这样更改 f:convertDateTime：

从

```
<f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss"  /> 
```

至

```
<f:convertDateTime pattern="yyyy/MM/dd HH:mm:ss" timeZone="America/Montevideo" /> 
```

这并不花哨，但它有效。

通过将此代码添加到 de web.xml中，您可以在[此处](https://stackoverflow.com/a/6110127/2359447)找到更好的解决方案

```
<context-param>
    <param-name>javax.faces.DATETIMECONVERTER_DEFAULT_TIMEZONE_IS_SYSTEM_TIMEZONE</param-name>
    <param-value>true</param-value>
</context-param> 
```

# asp.net-mvc-3 - nHibernate 具有 memcached 和随机无效强制转换的二级缓存

> ID：15366842
> 
> 赞同：7
> 
> 时间：2013-03-12T16:30:33.563
> 
> 标签：asp.net-mvc-3, nhibernate, caching, memcached

我有一个使用**nHibernate**和**memcached**作为二级缓存提供程序的**MVC3**应用程序。我们间歇性地（但最近更频繁地）遇到奇怪的铸造问题。它是随机发生的，使 memcached 缓存失效将暂时解决问题。

 ****它只发生在我们的*生产*环境中，因为我们不在其他环境中运行 memcached。但是，我在本地运行 memcached 并试图让它在本地发生，但没有运气。

我们**在 Windows 上使用 memcached 1.2.6**。这是堆栈跟踪。我知道这不会是足够的信息来确定任何事情，但如果有人对我如何调试它有任何想法，我将不胜感激。我正在尝试在我们的*生产*机器上进行远程调试，但这是一年中的繁忙时间并且有风险。

```
Unable to cast object of type 'System.Int32' to type 'System.String'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidCastException: Unable to cast object of type 'System.Int32' to type 'System.String'.]
   (Object , Object[] , SetterCallback ) +4270
   NHibernate.Tuple.Entity.PocoEntityTuplizer.SetPropertyValuesWithOptimizer(Object entity, Object[] values) +80

[PropertyAccessException: Invalid Cast (check your mapping for property type mismatches); setter of MyApplication.Business.Data.Program]
   NHibernate.Tuple.Entity.PocoEntityTuplizer.SetPropertyValuesWithOptimizer(Object entity, Object[] values) +207
   NHibernate.Tuple.Entity.PocoEntityTuplizer.SetPropertyValues(Object entity, Object[] values) +97
   NHibernate.Cache.Entry.CacheEntry.Assemble(Object[] values, Object result, Object id, IEntityPersister persister, IInterceptor interceptor, ISessionImplementor session) +306
   NHibernate.Cache.Entry.CacheEntry.Assemble(Object instance, Object id, IEntityPersister persister, IInterceptor interceptor, ISessionImplementor session) +147
   NHibernate.Event.Default.DefaultLoadEventListener.AssembleCacheEntry(CacheEntry entry, Object id, IEntityPersister persister, LoadEvent event) +434
   NHibernate.Event.Default.DefaultLoadEventListener.LoadFromSecondLevelCache(LoadEvent event, IEntityPersister persister, LoadType options) +800
   NHibernate.Event.Default.DefaultLoadEventListener.DoLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) +560
   NHibernate.Event.Default.DefaultLoadEventListener.Load(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) +229
   NHibernate.Event.Default.DefaultLoadEventListener.ProxyOrLoad(LoadEvent event, IEntityPersister persister, EntityKey keyToLoad, LoadType options) +438
   NHibernate.Event.Default.DefaultLoadEventListener.OnLoad(LoadEvent event, LoadType loadType) +943
   NHibernate.Impl.SessionImpl.FireLoad(LoadEvent event, LoadType loadType) +99
   NHibernate.Impl.SessionImpl.Get(String entityName, Object id) +117
   NHibernate.Impl.SessionImpl.Get(Object id) +70
   MyApplication.Business.Repositories.Repository`1.Get(Object id) +148 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T18:11:17.853

我们遇到了同样的问题，我们已经将问题定位为二级缓存中的无效缓存条目。在我们的例子中，当我们从缓存在二级缓存中的表/实体中添加或删除列/属性并部署更改时，就会出现问题。代码需要五列（为了参数），而缓存存储六列。

我们在存储库中采用的一种策略是捕获异常并使缓存无效。然后我们重试get。

```
 public override T Get(int id)
    {
        try
        {
            return base.Get(id);
        }
        catch (InvalidCastException)
        {
            _sessionFactory.EvictEntity(typeof (T).Name);
            return Get(id);
        }
    } 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T20:46:02.550

这很可能是由生产环境和本地查询返回的不同数据集引起的。对象映射器获取的数据与其预期不同。尝试转换数据时，您会遇到这些异常。****

# java - 除非我明确地传递内容长度，否则使用 InputStreamEntity 构建带有 httpclient 的 http put 请求将不起作用

> ID：15366843
> 
> 赞同：0
> 
> 时间：2013-03-12T16:30:33.927
> 
> 标签：java, scala, httpclient

我正在尝试使用 org.apache.httpcomponents 版本 4.23 中的 httpclient 在 scala 中执行 http 请求。特别是我想使用 InputStreamEntity 来构建请求，以避免复制内存中的大（~100Mb）字节数组。这是片段：

```
val req = new HttpPut(url)
req setEntity new InputStreamEntity(contentStream, -1/*contentlength*/)
val client = new DefaultHttpClient(connManager, httpParams)
val resp = client execute req 
```

在代码中的 url、connManager、httpParams 是在别处定义的。代码的结果是在所需位置创建一个没有内容的文件。我正在使用具有 3 个字节的 contentStream 进行测试。创建 InputStreamEntity 并将内容长度作为参数明确设置为 3 将导致代码以正确的方式创建文件。出于生产中的充分理由，我不知道流的长度，因此我想使用负数来确保发送整个流，直到如 InputStreamEntity 的 api 所宣传的那样，到达流的末尾。我究竟做错了什么？为什么我在没有明确设置内容长度时得到一个空文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:22:23.080

不设置 content-length，会导致 HTTP Client 切换到[chunked transfer-encoding](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)

为此，您发布到的 http 服务器必须符合 HTTP 1.1。是吗 ？

# python - G-WAN 所有 CSP 的响应内容类型为 text/plain

> ID：15366848
> 
> 赞同：1
> 
> 时间：2013-03-12T16:30:45.517
> 
> 标签：python, http-headers, g-wan

[[ **[已解决] G-WAN 的最新更新已经修复了这个默认的 MIME 类型。**]]

* * *

G-WAN 4.3.11 将我的所有 csp 文件都返回为“text/plain”类型。这怎么可能解决？！目前，它只不过是一个静态文件服务器。

例如，//127.0.0.1:8080/?hello.py 响应“Hello, Python!<br>”（文本/纯文本）

这应该返回“你好，Python！” 不显示 <br> （作为文本/html）

笔记：

以前版本的 GWAN 运行良好。运行 Fedora 18

csp 源正在编译并返回正确的输出，这只是服务器没有以正确的内容类型响应的问题。

.html 文件应返回 text/html。

Python： print(os.environ.get('CONTENT_TYPE')) 返回“无”

Python：os.environ['CONTENT_TYPE'] = 'text/html' 没有影响

```
请求 URL://localhost:8080/?hello.py
请求方法：GET
状态码：200 OK

请求标头
GET /?hello.py HTTP/1.1
主机：本地主机：8080
连接：保持活动
缓存控制：max-age=0
Pragma：无缓存
接受：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
用户代理：Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.160 Safari/537.22
接受编码：gzip、deflate、sdch
接受语言：en-US,en;q=0.8
接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3

查询字符串参数
你好.py：

响应标头
HTTP/1.1 200 正常
服务器：G-WAN
日期：2013 年 3 月 12 日星期二 18:50:33 GMT
最后修改时间：2013 年 3 月 12 日星期二 18:50:33 GMT
ETag：“c9ddeef-513f78fa-25”
变化：接受编码
接受范围：字节
内容类型：文本/纯文本；字符集=UTF-8
内容长度：37

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:27:19.980

> G-WAN 4.3.11 将我的所有 csp 文件都返回为“text/plain”类型。我怎样才能解决这个问题？

G-WAN 无法*猜测*脚本要使用的 MIME 类型。应用程序服务器不会这样做，因为 MIME 类型检测会太慢并且可能是错误的。

G-WAN C/C++/D/CS/Java 脚本让您可以直接使用 指定回复 MIME 类型`get_env()`，或者让您使用`build_headers()`，或者让您直接在回复缓冲区中写入 HTTP 标头。

但是对于像 Perl 或 Python 这样的 CGI 语言，如果您想更改特定 HTTP 标头（例如“Content-type”）的值，那么您必须编写自己的 HTTP 标头，并指定您认为相关的“Content-Type” ”。

G-WAN 导出 SERVER 环境变量，让 CGI 脚本知道 HTTP 请求标头而无需解析它们（这些变量不用于修改 G-WAN 自动生成的 HTTP 标头）。

有关如何从 G-WAN Python 脚本中获取 SERVER 环境变量，请查看[hello.py](http://gwan.ch/source/hello.py)示例。

* * *

更新

现在您的问题已被重写，很明显您的问题与 G-WAN 脚本的*默认MIME 类型有关。*我们发布了 v4.3.14 来修复这个 v4.3.11 问题。

关于支持的 MIME 类型，它们记录在 G-WAN PDF 手册中，并且如其中所示，我们会​​定期添加用户建议的条目（如果可以普遍使用）。

请注意，对于您讨论的情况（G-WAN 脚本），MIME 类型配置文件将毫无意义，因为 G-WAN 脚本*要么*选择默认 MIME 类型，要么在“Content-Type”HTTP 标头中明确覆盖它.

G-WAN 通过动态调整选项（如自适应超时，这比任何固定值更有效）或通过使用文件系统而不是依赖仅描述文件系统定义的配置文件来避免配置文件。

G-WAN 是由程序员制作并为程序员制作的工具，并非所有程序员都有时间学习他们必须使用的每台服务器的大量专有文件配置选项。请不要因为我们试图让 G-WAN 保持简单而开枪——这是一个罕见的例外。

# actionscript - 在 ActionScript 中创建 3d 坐标系和 3d 矢量？

> ID：15366854
> 
> 赞同：0
> 
> 时间：2013-03-12T16:31:05.727
> 
> 标签：actionscript, vector, 3d, coordinate-systems

我刚刚开始潜入 3D 对象和视角的世界，尤其是。在闪存中。

我的目标是拥有一个**带有网格的 3d 坐标系**以及定义要绘制的向量的 x、y、z 值的选项。

简单的例子：
![带矢量的 3d 坐标系](../Images/667bb11912a227969ef68c4a8716cf4e.png)

使用鼠标旋转坐标系也很棒，例如在这个[视频](http://www.youtube.com/watch?v=-GVaqm-4gfE)或[这里](http://www.youtube.com/watch?v=ylLR6gLRm-Y&NR=1)。

有人知道是否有提供这样一个 3d 坐标系的工具或库吗？我更喜欢 Flash AS2/AS3，但这不是必须的。唯一要求：该工具必须在浏览器中运行，不得使用 Blender 或 SketchUp 等软件。

也许有人已经写过这样的程序？

谢谢你。

PS：我知道有像[wolframalpha](http://www.wolframalpha.com/input/?i=vector%20%7B1%2C%201%2C%201%7D)这样的网络服务可以在 3d 中绘图，但我需要一个交互式工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:35:36.497

PaperVision3D 是一个开源的 actionscript3 库，可以处理各种 3D 渲染。 [http://code.google.com/p/papervision3d/](http://code.google.com/p/papervision3d/)。我已将它用于为您提供具有典型 6 个自由度的完整 3D 环境的程序。

# android - 同一用户的多台设备之间的 Android 数据同步

> ID：15366856
> 
> 赞同：4
> 
> 时间：2013-03-12T16:31:07.430
> 
> 标签：android

在做了一些研究之后，我得到的印象是 Android 目前不支持同一用户的设备之间的同步。

假设用户正在手机和平​​板电脑（或两部手机或平板电脑）上使用应用程序。我希望能够在它们之间同步数据。可能是设置之类的东西。

我查看了 Backup API 和 Google 云消息传递。我认为两者都不支持同步。备份 API 已关闭，但仅应在系统擦除或用户更改为新设备但不同步后用于备份。

我有任何其他方法可以在同一用户的设备之间同步应用数据，而无需引入用户登录。iOS 有 iCloud，它可以让应用程序同步他们的数据。Android上是否没有等效/类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:39:27.883

你能把它绑定到谷歌驱动器（免费云存储）吗？这应该已经为几乎每个 android 用户设置（必须有一个 google 帐户），并且将提供一个存储数据/设置的公共场所，并且可以从登录到同一个 google 用户帐户（同一个用户）的另一台设备上拉回）。

# java - 包含带有 android 应用程序的文本文档

> ID：15366860
> 
> 赞同：0
> 
> 时间：2013-03-12T16:31:25.157
> 
> 标签：java, android, resources, document

将文本文件实现到 android 应用程序的最佳方法是什么？

我正在创建一个需要使用文本文档作为资源的应用程序 - 我如何包含它，以便当用户安装应用程序时文档与它一起并且应用程序可以访问它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:33:17.857

`assets/`（通过访问`AssetManager`）或`res/raw/`（通过访问`Resources`）可能是打包“文本文档”的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:33:49.093

把它放在你的资产文件夹中，然后通过你的资产文件夹访问文本文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T17:13:59.090

我建议将您的文本文件放在两个地方，文件`assets/`夹或`res/raw/`文件夹。下面是在每个位置访问您的文件的示例。对于下面的示例，假设您的文件名为`example.txt`.

资产文件夹：

```
AssetManager assets = getAssets();
InputStream in = assets.open("example.txt");
/* Use the input stream to read in your file here. */ 
```

原始目录：

```
Resources res = getResources();
InputStream in = res.openRawResource(R.raw.example);
/* Use the input stream to read in your file here. */ 
```

请注意，这两个都假设您正在从`Context`诸如`Activity`or之类的类中打开资源`Service`。

# ruby - 如何在 Ruby 1.9.3 中获取今天的日期？

> ID：15366865
> 
> 赞同：23
> 
> 时间：2013-03-12T16:31:33.657
> 
> 标签：ruby, date

我正在使用 Ruby 1.9.3，当我执行时`Date.today`，我得到`NoMethodError: undefined method`了今天的 Date:Class`

我对此感到很困惑，因为它确实出现在[文档](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-c-today)中。虽然我知道这是 2.0 的文档，但我看到的答案可以追溯到它在 1.8.7 中实施的时候。这是在 1.9 中删除的吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-12T16:37:28.930

你有`require 'date'`吗？

```
> require 'date'
 => true
> Date.today
 => #<Date: 2013-03-12 ((2456364j,0s,0n),+0s,2299161j)> 
```

# node.js - 在 testacular 中使用节点模块

> ID：15366869
> 
> 赞同：1
> 
> 时间：2013-03-12T16:31:40.900
> 
> 标签：node.js, angularjs, karma-runner

是否可以在 Testacular 下运行的 Jasmine 测试中“要求”NodeJS 模块（以测试 AngularJS 端到端场景）？

背景：

我正在构建一个 NodeJS 服务，它提供一个 AngularJS 前端并提供许多服务来为其提供数据。一个功能是提供从 Node 服务传递到 Angular 控制器的文件列表。这些文件是从后端 FTP 服务器收集的。

对于我在 Testacular 中运行的端到端角度场景测试，我想在 Jasmine 测试运行期间将示例文件添加到本地 FTP 服务器的目录中。理想情况下，我想要求 NodeJS 'fs' 模块确实编写这些文件，但我以前没有见过这种测试配置的任何示例。

我不确定 RequireJS 适配器是否适合这个要求。有任何想法吗？

# plone - 向 plone.registry 添加新记录，无需重新运行 GenericSetup / 重新安装产品

> ID：15366880
> 
> 赞同：4
> 
> 时间：2013-03-12T16:32:10.397
> 
> 标签：plone, genericsetup

在 Plone 附加产品中，我有一个控制面板页面，可以在其中设置一些配置选项。它们存储在 plone.registry 中。`__init__`控制面板适配器通过查询接口来获取其方法中的不同字段，例如：

```
class MultiLanguageExtraOptionsAdapter(LanguageControlPanelAdapter):
    implementsOnly(IMultiLanguageExtraOptionsSchema)

    def __init__(self, context):
        super(MultiLanguageExtraOptionsAdapter, self).__init__(context)
        self.registry = getUtility(IRegistry)
        self.settings = self.registry.forInterface(
            IMultiLanguageExtraOptionsSchema) 
```

现在我在接口 IMultiLanguageExtraOptionsSchema 中添加一个附加字段并重新启动 plone。然后在控制面板页面上出现错误：

```
KeyError: 'Interface `plone.app.multilingual.interfaces.IMultiLanguageExtraOptionsSchema` defines a field `blah`, for which there is no record.' 
```

（如 plone.registry README 中所述，这对于方法是预期的`forInterface`。该记录不存在。）

当然，如果我通过 GenericSetup (registry.xml) 添加该字段，然后重新安装产品/重新运行“控制面板”步骤，一切都很好：

```
<registry>
 <records interface="plone.app.multilingual.interfaces.IMultiLanguageExtraOptionsSchema">
   <value key="blah"></value>
 <records>
<registry> 
```

但我不想强迫用户重新安装产品，仅仅因为产品特定的控制面板中有一个新选项。所以我的问题是：有没有推荐的方法来获取新字段的新记录到 plone.registry 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T17:46:04.947

您可以尝试/捕获 KeyError，然后确保已注册所有注册表设置：

```
try:
    self.settings = self.registry.forInterface(IMultiLanguageExtraOptionsSchema)
except KeyError:
    registry = getUtility(IRegistry)
    registry.registerInterface(IMultiLanguageExtraOptionsSchema) 
```

不过，我建议编写一个升级步骤（这当然会迫使您的用户重新安装产品）。

升级.py：

```
def update_registry(context):
    registry = getUtility(IRegistry)
    registry.registerInterface(IMultiLanguageExtraOptionsSchema) 
```

升级.zcml::

```
 <genericsetup:upgradeStep
      source="*"
      destination="1100"
      title="Update plone.app.multilingual setting registry"
      description=""
      profile="plone.app.multilingual:default"
      handler=".upgrades.update_registry"
      /> 
```

看

[https://github.com/collective/collective.mailchimp/blob/master/collective/mailchimp/upgrades.py](https://github.com/collective/collective.mailchimp/blob/master/collective/mailchimp/upgrades.py)

和

[https://github.com/collective/collective.mailchimp/blob/master/collective/mailchimp/upgrades.zcml](https://github.com/collective/collective.mailchimp/blob/master/collective/mailchimp/upgrades.zcml)

例如。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T05:45:55.290

如果将 False 作为第二个参数传递给 forInterface：

```
registry.forInterface(IMultiLanguageExtraOptionsSchema, False) 
```

那么如果注册表中缺少架构中的字段，它将不会引发错误，而只会返回该字段的默认值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-20T14:31:46.803

从注册表安全获取设置：

```
def get_registry_settings(interface, name):
    registry = getUtility(IRegistry)
    settings = registry.forInterface(interface, check=False)
    value = getattr(settings, name)
    if value == settings.__schema__[name].missing_value:
        value = settings.__schema__[name].default
    return value 
```

# php - 在本地 wamp 设置的批处理文件中通过 url 传递 php 变量

> ID：15366881
> 
> 赞同：0
> 
> 时间：2013-03-12T16:32:13.480
> 
> 标签：php, windows-7, cmd

环境：Windows 7、PHP 5.3.13、Apache 2.2.22 (WAMP) 在本地工作 访问外部 Web 服务

我试图通过批处理命令提示符内的 URL 在 PHP 中分配一个全局变量以调用 Web 服务。请参阅以下批处理行：

开始 /b "C:\wamp\bin\php\php5.3.13\php.exe" -q "C:\wamp\www\test\scripts\apiTest.php?itemID=%1" > API_Log%dtStamp%.文本文件

使用实际项目 ID 运行此 bat 文件时：C:\wamp\www\test\scripts\apiTest.bat 1234567

我得到一个未定义的索引错误并且找不到匹配的 404。检查 HTTP 数据包后，我注意到 URL 已丢弃（从未收到）我在执行字符串中指定的 itemID。HTTP 信息： http [://api.service.com/items//items.xml http://api.service.com/items/](http://api.service.com/items/(missing) [（](http://api.service.com/items//items.xml) 此处缺少标识信息）/items.xml

我绝对可以直接从 cmd/batch 使用参数访问特定的 url，并且我直接将变量输入到 url 并在浏览器中毫无问题地执行此过程。

我怀疑无法将 api url 直接发送到带有参数的 php 可执行文件。id 号没有正确附加，甚至根本没有附加。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:38:38.963

而不是像 GET 请求那样发送它，你应该使用类似的东西：

```
start /b "C:\wamp\bin\php\php5.3.13\php.exe" -q "C:\wamp\www\test\scripts\apiTest.php %1" > API_Log%dtStamp%.txt 
```

然后使用 argv 变量访问该数据。

```
echo $argv[1]; 
```

所以运行`C:\wamp\www\test\scripts\apiTest.bat 1234567`会回显`1234567`

另外，以防万一您需要它，命令 run in `$argv[0]`，我有时会在输出脚本的语法时使用它。例如：

```
echo "Syntax: {$argv[0]} [username]"; 
```

# sqlalchemy - sqlalchemy 在创建新连接后立即处理连接池

> ID：15366885
> 
> 赞同：1
> 
> 时间：2013-03-12T16:32:32.263
> 
> 标签：sqlalchemy, gunicorn, flask-sqlalchemy

由于某种原因，我对 sqlalchemy 处理连接池有疑问，我不知道为什么。这是我的日志：

```
2013-03-12 15:04:28 [19800] [DEBUG] Arbiter booted
2013-03-12 15:04:28 [19800] [INFO] Listening at: http://127.0.0.1:8000 (19800)
2013-03-12 15:04:28 [19800] [INFO] Using worker: gevent
2013-03-12 15:04:28 [19881] [INFO] Booting worker with pid: 19881
2013-03-12 15:04:29 [19881] [DEBUG] Created new connection <_mysql.connection open to 'XXX' at 8fb07a4>
2013-03-12 15:04:29 [19881] [INFO] SELECT DATABASE()
2013-03-12 15:04:29 [19881] [INFO] ()
2013-03-12 15:04:29 [19881] [INFO] Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0
2013-03-12 15:04:29 [19881] [INFO] Pool recreating 
```

这是在 solaris Oracle Solaris 10 9/10 s10x_u9wos_14a X86 上使用最新的 sqlalchemy 0.8.0 和 mysql 5.5

**编辑：**

这是失败的更详细的转储：

```
Created new connection <_mysql.connection open to 'XXXX' at 8bcb704>
SELECT DATABASE()
()
Pool disposed. Pool size: 10  Connections in pool: 0 Current Overflow: -10 Current Checked out connections: 0
Pool recreating
Traceback (most recent call last):
  File "/test/test_sqlalchemy.py", line 31, in <module>
    result = db.session.execute("select * from app_config")
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py", line 149, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 931, in execute
    return self._connection_for_bind(bind, close_with_result=True).execute(
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 801, in _connection_for_bind
    return self.transaction._connection_for_bind(engine)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 297, in _connection_for_bind
    conn = bind.contextual_connect()
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 1669, in contextual_connect
    self.pool.connect(),
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/pool.py", line 272, in connect
    return _ConnectionFairy(self).checkout()
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/pool.py", line 425, in __init__
    rec = self._connection_record = pool._do_get()
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/pool.py", line 777, in _do_get
    con = self._create_connection()
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/pool.py", line 225, in _create_connection
    return _ConnectionRecord(self)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/pool.py", line 322, in __init__
    exec_once(self.connection, self)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/event.py", line 392, in exec_once
    self(*args, **kw)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/event.py", line 409, in __call__
    fn(*args, **kw)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/strategies.py", line 167, in first_connect
    dialect.initialize(c)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/dialects/mysql/base.py", line 2055, in initialize
    default.DefaultDialect.initialize(self, connection)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/default.py", line 171, in initialize
    self._get_default_schema_name(connection)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/dialects/mysql/base.py", line 2022, in _get_default_schema_name
    return connection.execute('SELECT DATABASE()').scalar()
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 664, in execute
    params)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 808, in _execute_text
    statement, parameters
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 878, in _execute_context
    context)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 871, in _execute_context
    context)
  File "/test/bss/server/bss/lib/python2.7/site-packages/sqlalchemy/engine/default.py", line 320, in do_execute
    cursor.execute(statement, parameters)
  File "/test/bss/server/bss/lib/python2.7/site-packages/MySQLdb/cursors.py", line 201, in execute
    self.errorhandler(self, exc, value)
  File "/test/bss/server/bss/lib/python2.7/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
sqlalchemy.exc.InterfaceError: (InterfaceError) (0, '') 'SELECT DATABASE()' () 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:52:55.163

我不确定是什么导致了这个问题，但是使用 oursql 而不是 mysql-python 一切正常。

# python - Python - 在子文件夹中的另一个脚本中执行函数

> ID：15366886
> 
> 赞同：2
> 
> 时间：2013-03-12T16:32:33.220
> 
> 标签：python, variables, parent-child, working-directory

我有一个主脚本，它在主目录的子文件夹中执行几个子脚本。

文件夹层次结构如下所示：

```
MyFolder\MasterScript.py
MyFolder\ChildOneScript\ChildOne.py
MyFolder\ChildTwoScript\ChildTwo.py
MyFolder\ChildThreeScript\ChildThree.py 
```

从 MasterScript 中，我需要在 ChildOne“myChildFunction”中调用一个函数并将一些变量传递给它。问题是，我**不能**简单地做

```
import ChildOneScript.ChildOne as ChildOne
ChildOne.myChildFunction 
```

因为还有其他脚本依赖于 ChildOne 的相对路径。因此，如果我从 MasterScript 将 ChildOne 导入 MyFolder 目录并在那里调用 myChildFunction，我会收到回溯错误，指出找不到其他文件。这是由于另一个顽固的程序员的错误，他拒绝更改他的相对路径调用，因为这是很多手工工作。

那么，有没有办法从 MasterScript 中调用 myChildFunction**并**传递一些变量？

我知道我可以使用 subprocess.call 和它的 cwd 参数来更改工作目录，但我不知道是否可以调用特定的 myChildFunction 并使用 subprocess 传递它的变量。

***编辑：***是否可以使用 execfile 传递变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:02:51.200

你总是可以用这个`os`模块破解它。它不漂亮，但它可能是你能做到的最好的，而无需重写所有其他人的代码。如果您将大量使用其他脚本中的函数，我会为它们编写一个包装器，以便更容易调用它们：

```
import sys
import os

def call_legacy_func(func, *args, **opts):
    prev = os.path.abspath(os.getcwd()) # Save the real cwd
    try:
        # Get the child's physical location.
        func_path = sys.modules[func.__module__].__file__
    except:
        # Die; we got passed a built-in function (no __file__)
        # Or you could just call it, I guess: return func(*args, **opts)
        return None

    # Change to the expected directory and run the function.
    os.chdir(func_path)
    result = func(*args, **opts)

    # Fix the cwd, and return.
    os.chdir(prev)
    return result

import ChildOneScript.ChildOne as ChildOne
call_legacy_func(ChildOne.myChildFunction, 0, 1, kwarg=False) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:11:55.350

你能澄清你的问题吗？特别是，我不清楚文件夹布局和从下标导入的问题是什么。

例如，如果我创建以下目录结构：

```
/example
    __init__.py
    master.py
    /childone
        __init__.py
        childone.py
    /childtwo
        __init__.py
        childtwo.py 
```

其中`__init__.py`只是空文件，源文件如下：

```
# master.py
from childone.childone import childone_fxn
from childtwo.childtwo import childtwo_fxn

print "Calling child one"
childone_fxn()

print "Calling child two"
childtwo_fxn() 
```

--

```
# childone.py
def childone_fxn():
    print "hello from child one" 
```

--

```
def childtwo_fxn():
    print "hello from child two" 
```

`/example`然后我可以从内部运行`master.py`并获得预期的输出：

```
example $ python master.py 
Calling child one
hello from child one
Calling child two
hello from child two 
```

如果您想像对待任何其他可执行文件一样对待子脚本，您当然可以使用 subprocess 模块，但我看不出您不能直接导入子脚本的任何原因。但也许我误解了你的问题......

# php - PHP：向表单添加价格

> ID：15366887
> 
> 赞同：0
> 
> 时间：2013-03-12T16:32:45.603
> 
> 标签：php, html, forms

我正在尝试编辑我的 PHP 脚本，因此当用户单击提交时，我添加到表单中的价格将作为总计添加，但我不确定如何将这些值相加。

HTML

```
<select name="service">
<option value="Yes" value="10">Yes £10</option>
<option value="No">No</option>
</select>

<form method="post" action="example.php">
<select name="booking">
<option value="Double Room" value="50">Double Room £50</option>
<option value="Twin Room" value="70">Twin Room £70</option>
<option value="Family Room" value="100">Family room £100</option>
</select>
<br /> <br />
<input type="submit" value="submit" action="example.php" name="submit"><br />
</form> 
```

PHP

```
You have choosen the <?php echo $_POST["booking"]; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:37:26.327

您定义了标签`value`属性的两倍，这是一个*错误*。`options`

 *如果要访问价格，只需将价格设置为单个`value`属性。

更好的方法是使用 ID 标识每一行，并在 PHP 中使用相应的数组来获取名称和价格（再次作为数组，或者作为对象更好）。

希望能帮助到你*

# font-awesome - 更改按钮中字体真棒图标的位置

> ID：15366892
> 
> 赞同：1
> 
> 时间：2013-03-12T16:33:00.517
> 
> 标签：font-awesome

我想要一个按钮如下：

```
[ Sign in with FB] 
```

其中 FB 是字体很棒的图标，显示在文本之后。通常，如果我打电话

```
<i class="icon-facebook">Sign in with</i> 
```

然后FB图标将显示在文本前面。

是否可以使用 font-awesome（添加自定义类等）来实现这种效果？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:32:02.730

您可以在大多数元素中切换字体真棒图标的位置，但您可能需要设置自己的按钮样式：

```
Sign in with <i class="icon-facebook"></i> 
```

如果您在 twitter-bootstrap 中使用 font-awesome，那么可以将图标放置在按钮类或其他元素中您需要的位置：

```
<button class="btn" type="button">Sign in with <i class="icon-facebook"></i></button> 
```

或使用`icon-facebook-sign`图标（更清晰）和`type="submit"`：

```
<button class="btn" type="submit">Sign in with <i class="icon-facebook-sign"></i></button> 
```

分别产生以下内容：

![在此处输入图像描述](../Images/366a06a7d9d86e2e62896c6188ef37da.png)

# ios - 将对象添加到 NSMutableArray 时无法识别的选择器

> ID：15366894
> 
> 赞同：1
> 
> 时间：2013-03-12T16:33:03.640
> 
> 标签：ios, objective-c, nsmutabledictionary

我有一个带有 NSMutableArray 属性的单例类，我想向其中添加对象和删除对象。出于某种原因，我得到：

```
-[__NSDictionaryI setObject:forKey:]: unrecognized selector sent to instance 0x1edf24c0 
```

尝试添加时出现异常。下面是单例接口的相关代码：

```
//outbox item is the type of objects to be held in the dictionary
@interface OutboxItem : NSObject
@property (nonatomic, assign) unsigned long long size;
@end

@interface GlobalData : NSObject
@property (nonatomic, copy) NSMutableDictionary *p_outbox;
+ (GlobalData*)sharedGlobalData;
@end 
```

单例的实现：

```
@implementation GlobalData
@synthesize  p_outbox;
static GlobalData *sharedGlobalData = nil;
+ (GlobalData*)sharedGlobalData {
    if (sharedGlobalData == nil) {
        sharedGlobalData = [[super allocWithZone:NULL] init];
        sharedGlobalData.p_outbox = [[NSMutableDictionary alloc] init];
    }
    return sharedGlobalData;
}

+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self)
    {
        if (sharedGlobalData == nil)
        {
            sharedGlobalData = [super allocWithZone:zone];
            return sharedGlobalData;
        }
    }
    return nil;
}
- (id)copyWithZone:(NSZone *)zone {
    return self;
}
@end 
```

这是引发异常的代码：

```
GlobalData* glblData=[GlobalData sharedGlobalData] ;
OutboxItem* oItem = [OutboxItem alloc];
oItem.size = ...;//some number here
[glblData.p_outbox setObject:oItem forKey:...];//some NSString for a key 
```

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T16:38:32.020

问题出在您的财产上：

```
@property (nonatomic, copy) NSMutableDictionary *p_outbox; 
```

`copy`当您为属性赋值时，属性的语义会导致生成字典的副本。但是`copy`字典的方法总是返回一个不可变的`NSDictionary`，即使是在一个`NSMutableDictionary`.

要解决此问题，您必须为属性创建自己的 setter 方法：

```
// I'm a little unclear what the actual name of the method will be.
// It's unusual to use underscores in property names. CamelCase is the standard.
- (void)setP_outbox:(NSMutableDictionary *)dictionary {
    p_outbox = [dictionary mutableCopy];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T16:38:52.797

您的

```
@property (nonatomic, copy) NSMutableDictionary *p_outbox; 
```

正在创建您分配给它的该对象的副本。当您为其分配 a`NSMutableDictionary`时，它会创建一个`NSMutableDictionary`对象的副本，该副本`NSDictionary`不是可变副本。

所以改成

对于非 ARC

```
@property (nonatomic, retain) NSMutableDictionary *p_outbox; 
```

对于弧

```
@property (nonatomic, strong) NSMutableDictionary *p_outbox; 
```

# php - PHP 属性访问和美元符号

> ID：15366900
> 
> 赞同：9
> 
> 时间：2013-03-12T16:33:15.370
> 
> 标签：php

我最近一直在加强我的 PHP 游戏。来自 JavaScript，我发现对象模型更易于理解。

我遇到了一些怪癖，我想澄清一下我似乎在文档中找不到的东西。

在 PHP 中定义类时，您可以像这样定义属性：

```
class myClass {

    public $myProp = "myProp";
    static $anotherProp = "anotherProp";

} 
```

使用 public 变量，`$myProp`我们可以使用（假设`myClass`在名为 的变量中引用`$myClass`）访问它，`$myClass->myProp`而无需使用美元符号。

我们只能使用`::`. `$myClass::$anotherProp`因此，我们可以像使用美元符号一样访问静态变量。

问题是，为什么我们必须使用美元符号`::`而不是`->`？

**编辑**

这是我认为可以工作（并且确实）的代码：

```
class SethensClass {

    static public $SethensProp = "This is my prop!";

}

$myClass = new SethensClass;
echo $myClass::$SethensProp; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T16:35:55.287

使用范围运算符访问[类常量，](http://php.net/manual/en/language.oop5.constants.php)*没有美元符号*，因此需要在此处区分静态类属性和类常量。`::`*`$`*

 *```
class myClass {
  public static $staticProp = "static property";

  const CLASS_CONSTANT = 'a constant';
}

echo myClass::CLASS_CONSTANT;
echo myClass::$staticProp; 
```

所以要访问一个变量，`$`是必要的。但是`$`不能像这样放在类名的开头，`$myClass::staticProp`因为这样解析器就无法识别类名，因为也可以使用变量作为类名。因此，它必须附加到财产上。

```
$myClass = "SomeClassName";
// This attempts to access a constant called staticProp
// in a class called "SomeClassName"
echo $myClass::staticProp;

// Really, we need
echo myClass::$staticProp; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:38:21.343

它的贪婪！

有时在基类中引用函数和变量或在还没有任何实例的类中引用函数很有用。:: 运算符用于此目的。

```
<?php
class A
{
    function example()
    {
        echo "I am the original function A::example().<br>\n";
    }
}

class B extends A
{
    function example()
    {
        echo "I am the redefined function B::example().<br>\n";
        A::example();
    }
}

// there is no object of class A.
// this will print
//   I am the original function A::example().<br>
A::example();

// create an object of class B.
$b = new B;

// this will print 
//   I am the redefined function B::example().<br>
//   I am the original function A::example().<br>
$b->example();
?> 
```

**上面的例子调用了A类中的函数example()，但是没有A类的对象，所以我们不能写$a->example()之类的。相反，我们将 example() 称为“类函数”，即作为类本身的函数，而不是该类的任何对象。**

有类函数，但没有类变量。事实上，在调用的时候根本没有任何对象。因此，类函数可能不使用任何对象变量（但它可以使用局部变量和全局变量），并且可能根本不使用 $this。

在上面的例子中，B 类重新定义了函数 example()。类 A 中的原始定义被隐藏并且不再可用，除非您使用 :: 运算符专门引用类 A 中 example() 的实现。编写 A::example() 来执行此操作（实际上，您应该编写 parent::example()）。

在这种情况下，有一个当前对象，它可能有对象变量。因此，当从 WITHIN 对象函数中使用时，您可以使用 $this 和对象变量。*

# django - 生产环境中 URL 反向解析中的 TypeError

> ID：15366906
> 
> 赞同：0
> 
> 时间：2013-03-12T16:33:35.720
> 
> 标签：django, django-templates

关于 URL 的反向解析，我有一个仅生产错误。我的模板代码如下：

```
{% for result in result_list %}
<div class="result">

{% if grh_out %}
<form action= "{% url 'result_show' forloop.counter0 %}" method="post">
{% endif %}

...
{% endfor %} 
```

在 Django 开发服务器上一切正常，没有错误。但是，当迁移到生产服务器时，该行会`"{% url 'result_show' forloop.counter0 %}"`生成 TypeError。我在生产服务器上打开调试尝试跟踪错误，发现它发生在`...django/core/urlresolvers.py in _reverse_with_prefix`：

```
candidate = (prefix_norm + result) % dict(zip(prefix_args + params, unicode_args)) 
```

局部变量如下：

```
val             0
pattern         'result_show/(\\d+)'
self            <RegexURLResolver 'expofit_web.urls' (None:None) ^/>
args            (0,)
_prefix         u'/~amartino/'
possibility     [(u'result_show/%(_0)s', [u'_0'])]
unicode_args    [u'0']
possibilities   [([(u'result_show/%(_0)s', [u'_0'])], 'result_show/(\\d+)', {})]
lookup_view     u'result_show'
prefix_norm     u'/%7Eamartino/'
prefix_args     []
params          [u'_0']
result          u'result_show/%(_0)s'
defaults            {}
kwargs          {} 
```

生产环境中有什么不同可能会影响到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:42:55.270

这是[Django 1.5 中的一个错误](https://code.djangoproject.com/ticket/20022)。[该补丁应用于github](https://github.com/django/django)上的主分支 。

# php - 考勤系统标记学生存在/缺席复选框，更新 Mysql PHP

> ID：15366909
> 
> 赞同：0
> 
> 时间：2013-03-12T16:33:42.473
> 
> 标签：php, html, mysql

场景：我正在为一所大学制作考勤系统，但是我一直坚持更新 mysql 并使用复选框来标记学生缺席或出席。

所以目前我已经设法过滤了我想要显示的数据。这是 student_id、fname、lname、present。请看下面的代码

```
<strong>Class Register:</strong> </br>

<?php

$test3= "SELECT * FROM course_attendance, students, courses, attendance WHERE course_attendance.course_id=courses.course_id AND course_attendance.week_id=attendance.week_number_id AND course_attendance.student_id= students.student_id AND courses.course_id='101' AND attendance.week_number_id='2' ";
$result = mysql_query($test3)  or die(mysql_error());

echo "</br><table border='1' align='center'><tr> <th><strong>Student ID</strong></th> <th><strong>First Name </strong></th> <th><strong>Last Name</strong></th> <th><strong>Present</strong></th> </tr> ";

while($rows=mysql_fetch_array($result)){

    echo "<tr><td width='100' align='center'>" .$rows['student_id'].
"</td><td width='120' align='center'>" .$rows['fname'].
"</td><td width='120' align='center'>" .$rows['lname'].
"</td><td width='120' align='center'>" .$rows['present'].  
"</td><tr width='120' align='center'>";
}
echo "</table>";
?> 
```

所以目前，这显示了数据：student_id、fname、lname、present。

我的 MySQL 中的“Present”字段是一个未签名的 tinyint，我希望能够将其设为复选框，这将使用户能够标记学生存在或缺席，然后更新到 mysql。此外，我不希望编辑启用的学生 id、fname 和 lname，只是当前字段。这可能吗？

如果有人成功帮助我，请提前感谢，我将永远感激不尽！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:54:10.123

您可以在表单中有一个复选框：

`<input type='checkbox' class='form' value='Yes' name='checkbox_attendance'/> Present?`

然后检查该字段的值并将其存储在数据库中：

```
if(isset($_POST['checkbox_attendance']) && $_POST['checkbox_attendance'] == 'Yes') {
    //Store the value of checkbox_attendance (Yes) into the database
} else {
    //Store 'No' into the database
} 
```

student_id、fname 和 lname 将不可编辑，除非您创建它。互联网上有很多关于 PHP 表单的信息，看看那些。

# sql - rails，SQL，单表继承，表寻址为“子类”而不是类

> ID：15366910
> 
> 赞同：1
> 
> 时间：2013-03-12T16:33:43.700
> 
> 标签：sql, ruby-on-rails, postgresql, sti

我有以下设置，模型客户端是模型联系人的子类。STI 表是联系人。

然后在测试代码中调用时出现错误

```
it "should have the right clients in the right order" do
  @producer.clients.should == [a_client, b_client]
end 
```

SQL 语句错误地处理 ORDER BY 子句中不存在的客户表：

```
1) Producer clients associations should have the right clients in the right order
     Failure/Error: @producer.clients.should == [a_client, b_client]
     ActiveRecord::StatementInvalid:
       PGError: ERROR:  missing FROM-clause entry for table "clients"
       LINE 1: ...lient') AND "contacts"."producer_id" = 6 ORDER BY clients.na...
                                                                    ^
       : SELECT "contacts".* FROM "contacts"  WHERE "contacts"."type" IN ('Client') AND "contacts"."producer_id" = 6 ORDER BY clients.name DESC 
```

我还不够 SQL 专家，但是如果客户表被寻址，则应该设置某种别名，或者应该通过其真实姓名联系人来寻址该表。

降序来自Client中的default_scope顺序

```
class Client < Contact
  ...    
  default_scope order: 'clients.name DESC'
end 
```

这是在 rails 3.2.11 和 Postgres 9.1，pg gem 0.12.2 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:43:00.747

自己发现的：

默认范围应引用contacts.name，因为它似乎是按原样转发到数据库的SQL 语句的一部分。

# iphone - iOS中PhoneGap-2.1.0的安装说明？

> ID：15366911
> 
> 赞同：0
> 
> 时间：2013-03-12T16:33:46.870
> 
> 标签：iphone, ios, xcode, cordova

我需要使用 PhoneGap- **2.1.0**但我只能找到 PhoneGap/Cordova- **2.5.0**的安装说明。

我找到的说明是：[PhoneGap-2.5.0 的安装](http://docs.phonegap.com/en/2.5.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)

我试图在 2.1.0 版本中关注它们，但它指的是 2.1.0 版本中不存在的“bin”文件夹。

有人可以给我完整的说明来创建一个带有 phonegap- **2.1.0**的 iOS 项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:37:23.597

[在这里](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)。对于任何版本的 PhoneGap，只需更改 URL 中的版本即可！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:44:10.910

该帖子适用于 2.1 之后的所有版本，现在我专注于 2.7

[http://docs.phonegap.com/en/2.7.0/guide_getting-started_ios_index.md.html](http://docs.phonegap.com/en/2.7.0/guide_getting-started_ios_index.md.html)

这些说明非常清楚，即使您在提取 zip 文件后得到的目录树与它们显示的不完全一样。

安装所有要求后：

1.  将 phonegap-2.7.0.zip 的内容提取到任何你想要的地方
2.  转到 lib/ios/bin 并使用建议的参数运行 create 命令。
3.  打开查找器并转到您用作第一个参数的目录
4.  双击扩展名为 xcodeproj 的文件打开 XCode，项目将自动创建

# assembly - (ASM) 无法将字节加载到寄存器

> ID：15366913
> 
> 赞同：0
> 
> 时间：2013-03-12T16:33:54.133
> 
> 标签：assembly, mips

我正在尝试将一个字节加载到 MIPS 中的寄存器中。这是初学者课程，因此尚不允许高级说明。（没有循环等）

但是，它正在加载不正确的值。

我认为这条线是不正确的：

```
lb $10,2($8)            # load byte 133 
```

它正在加载 -123 以注册 10 美元！？

在本课中，我们刚刚学习了加载/存储字节。所以可能我在偏移量+base_address 上犯了一个错误。虽然，我看不出我的错误是什么。

**你能提供帮助/建议吗？:)**

```
## sum values, compute average, store result in memory ##
## $7=accumulator   $8=base address     $9=temp     $10=temp
## data segment starts at 0x10000000

.data
.byte 12
.byte 97
.byte 133
.byte 82
.byte 236

.text
main:

lui $8,0x1000       # initialise base address
lb $7,0($8)         # load byte 12
lb $9,1($8)         # load byte 97
ori $10,$0,5        # total amount of integers
lb $10,2($8)        # load byte 133
addu $7,$7,$9       # 12+97
lb $9,3($8)         # load byte 82
addu $7,$7,$10      # add 133 to subtotal
lb $8,4($8)         # load byte 236
addu $7,$7,$9       # add 82 to subtotal
addu $7,$7,$8       # add 236 to subtotal
                ##calculate average##
div $7,$10          # sum / number of items
mflo $10            # average
sb $10,10($8)       # store average in 0x10000010
sll $0,$0,0         # nop for load/store delay 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:40:16.117

你需要改变：

```
lb $10,2($8)        # load byte 133 
```

至：

```
lbu $10,2($8)        # load byte 133 
```

原因是 133 等于 0x85，当使用 8 位有符号表示时，这是一个负值。因此，您需要使用无符号加载字节指令 ,`lbu`以避免符号扩展。

实际上，您应该`lbu`为 5 个负载中的每一个使用，因为您的所有值都是无符号的。您将看到第五个值 (236) 的相同问题。

# javascript - 在函数内部调用变量

> ID：15366915
> 
> 赞同：1
> 
> 时间：2013-03-12T16:34:11.443
> 
> 标签：javascript

我有一个类似这样的功能：

```
var func1 = function () {
       var apple;
       //Some other code
}; 
```

我已经将该函数作为其他函数的参数传递

```
control(func); 
```

现在，我想访问控制函数中的变量 apple。`func1.apple`不起作用。有谁知道这是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:36:15.517

在不更改函数的情况下使用这种语法是不可能的。`func1.apple`不运行`apple`，类似的东西`func1().apple`已经运行`apple`。如果你只是想返回一些东西，那么使用`return`：

```
var func1 = function() {
    var apple;
    …
    return apple;
};

var apple = func1(); 
```

或者，如果您有多个要返回的值，则返回一个对象：

```
var func1 = function() {
    var apple;
    …
    return {apple: apple};
};

var apple = func1().apple; 
```

如果您在函数运行*期间*需要该值，则完成此操作的唯一方法是在回调中使用另一个回调：

```
var func1 = function(useApple) {
    var apple;
    …
    useApple(apple);
    …
};

func1(function(apple) {
    // Do something with apple
}); 
```

* 属性是另一种方式，但它们算作回调并且是邪恶的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:50:16.267

我认为您可能正在寻找的是构造函数模式

```
var func1 = function () {
       this.apple = "My Apple";
};

var myFuncInstance = new func1();

myFuncInstance.apple; // "My Apple" 
```

# iphone - 原因：“无法分叉：errno 35”在导入视频文件、转换和获取创建日期时

> ID：15366916
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:11.693
> 
> 标签：iphone, ios, multithreading, nstask

我正在尝试使用 ipad 上的 sdcard 读卡器从 sdCard 导入文件。从卡中导入 mts 文件时，我将它们转换为 mov 格式并将其保存到应用程序的文档目录中。如果我不调用下面提到的函数来获取日期，它会完全转换文件。当我在导入时调用此函数以获取视频文件的创建日期。它崩溃并给出以下堆栈跟踪....

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'couldn't fork: errno 35'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x32fba64f __exceptionPreprocess + 114
    1   libobjc.A.dylib                     0x35992c5d objc_exception_throw + 24
    2   CoreFoundation                      0x32fba491 +[NSException raise:format:arguments:] + 68
    3   CoreFoundation                      0x32fba4cb +[NSException raise:format:] + 34
    4   Foundation                          0x3582be8f -[NSConcreteTask launchWithDictionary:] + 2138
    5   Foundation                          0x3582af57 -[NSConcreteTask launch] + 22
    6   IRVideoEditor                       0x0002f917 +[IRVideoManager getCreatedDate:] + 358
    7   IRVideoEditor                       0x0002f65d +[IRVideoManager duplicateExists:] + 240
    8   IRVideoEditor                       0x0002d6c9 -[IRVideoEncoder wrapVideos] + 752
    9   IRVideoEditor                       0x00016d27 -[ImportVideoViewController importVideo] + 170
    10  Foundation                          0x357b0389 -[NSThread main] + 44
    11  Foundation                          0x358225cd __NSThread__main__ + 972
    12  libsystem_c.dylib                   0x36539311 _pthread_start + 248
    13  libsystem_c.dylib                   0x3653abbc start_wqthread + 0
)
terminate called after throwing an instance of 'NSException' 
```

下面是代码，我使用 nstask 获取日期

NSPipe *pipe = [NSPipe 管道];

```
 task = [[NSTask alloc] init];

    [task setLaunchPath: @"/bin/sh"];

    NSArray *arguments = [NSArray arrayWithObjects:@"-c", [NSString stringWithFormat:@"stat -c %%y %@", filePath], nil]; // iPad stat

    [task setArguments: arguments];

    [task setStandardOutput:pipe];

    [task setStandardError:[NSPipe pipe]]; 
```

// [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(taskExited:) name:NSTaskDidTerminateNotification object:task]; 【任务启动】；//[任务waitUntilExit];

```
 NSString * date = [[[NSString alloc] initWithData:[[pipe fileHandleForReading] availableData] encoding:NSASCIIStringEncoding] autorelease];
    return date; 
```

# php - 将托管在 Web 服务器上的 PHP 和 jQuery 结合起来使用 POST 函数提交表单？

> ID：15366919
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:17.313
> 
> 标签：php, jquery, mysql, forms, function

我创建了一个托管在 Web 服务器上的 PHP 函数。此处的代码旨在允许用户创建一个需要他们的名字、姓氏、电子邮件和密码的用户帐户。我可以使用*Apigee*提交数据，所以我知道一切正常。我的代码快照如下：

```
function student2_post() {
    $this->load->database();
    $StudentID = $_POST['StudentID'];
    $StudentForename = $_POST['StudentForename'];
    $StudentSurname = $_POST['StudentSurname'];
    $StudentEmail = $_POST['StudentEmail'];
    $StudentPassword = $_POST['StudentPassword'];
    $info = array('StudentID'=>null, 'StudentForename'=>$StudentForename, 'StudentSurname'=>$StudentSurname, 'StudentEmail'=>$StudentEmail, 'StudentPassword'=>$StudentPassword);
    $this->db->insert('StudentLogin', $info);
    $data->StudentID = $StudentID;
    $data->StudentForename = $StudentForename;
    $data->StudentSurname = $StudentSurname;
    $data->StudentEmail = $StudentEmail;
    $data->StudentPassword = $StudentPassword;
    $this->response($data, 200);
    } 
```

我下一步的开发是尝试开发一个“应用程序”或移动服务，它允许我使用自己的 GUI。我的代码如下：

```
<!-- Home -->
<div id="page2" class="ui-bar-a" data-role="page">
    <div data-role="header" data-theme="320CT_Coursework.min">
        <h3>
            320CT
        </h3>
    </div>

    <div data-role="content">

    <div data-role="fieldcontain" id="StudentID">
            <fieldset data-role="controlgroup">
                <label for="StudentID">
                    Name
                </label>

                <input name="" id="StudentID" placeholder="" value="" type="text">
            </fieldset>
        </div>

        <div data-role="fieldcontain" id="StudentForename">
            <fieldset data-role="controlgroup">
                <label for="StudentForename">
                    Surname
                </label>
                <input name="" id="StudentForename" placeholder="" value="" type="text">
            </fieldset>
        </div>

        <div data-role="fieldcontain" id="StudentSurname">
            <fieldset data-role="controlgroup">
                <label for="StudentSurname">
                    Email
                </label>

                <input name="" id="StudentSurname" placeholder="" value="" type="text">
            </fieldset>
        </div>

        <div data-role="fieldcontain" id="StudentPassword">
            <fieldset data-role="controlgroup">
                <label for="StudentPassword">
                    Password
                </label>
                <input name="" id="StudentPassword" placeholder="" value="" type="text">
            </fieldset>
        </div>

        <input type="submit" value="Submit">

    </div>
    <div data-role="footer" data-theme="a" data-position="fixed">
        <h3>
        </h3>
    </div>
</div> 
```

这有效并为我提供了一个 GUI 来输入数据，但显然它没有链接。我已经拥有了我需要的所有表单元素，其 ID 对 PHP 函数来说是符合犹太教规定的。

我一直找不到任何资源允许我在我的 jQuery 代码中使用 PHP 函数***student2_POST* 。**我发现的一切似乎都与非 PHP 函数有关。

TLDR：我有一个托管在提交表单的 Web 服务上的函数，我需要一种在 jQuery 中实现此函数的方法。预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:43:34.117

为了在客户端（html/js）和服务器（php）之间进行通信，您需要执行一个 HTTP 请求。

这通常可以使用 HTML 来完成`form`，或者动态地使用 AJAX 方法来完成，例如 (for JQuery) ：

*   [`$.ajax`](http://api.jquery.com/jQuery.ajax/)`( url [, settings ] )`

    > 执行异步 HTTP (Ajax) 请求。

*   [`$.post`](http://api.jquery.com/jQuery.post/)`( url \[, data \] \[, success(data, textStatus, jqXHR) \] \[, dataType \] )`

    > 使用 HTTP POST 请求从服务器加载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:40:49.487

您正在寻找： [$.ajax](http://api.jquery.com/jQuery.ajax/)或[$.post](http://api.jquery.com/jQuery.post/)

# asp.net - 如果用户处于管理员角色中，则显示管理 ActionLink

> ID：15366920
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:27.243
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010

如果用户的角色是“管理员”，我想在我的主页上显示一个管理员操作链接。我已经设法正确配置了角色，但我不确定如何去做。

到目前为止，我已经在 HomeController 中实现了以下代码：

```
 Function Admin() As ActionResult
        If Roles.IsUserInRole("Admin") Then
            Return View("Admin")
        Else
            Return View()
        End If
        End Function 
```

然后我在我的 Site.Master 中实现了以下 ActionLink：

```
<li><%: Html.ActionLink("Admin", "Admin", New With {.Controller = "Home"})%></li> 
```

我知道这不正确，但这不是我以前做过的事情，所以我不太确定如何正确实施它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:49:57.063

您在视图中使用 编写此代码`razor`，如下所示：

剃刀

```
@If User.IsInRole("Admin") Then
   <li>@Html.ActionLink("Admin", "Admin", New With {.Controller = "Home"})</li>
End if 
```

ASPX

```
<% If User.IsInRole("Admin") Then %>
   <li><%: Html.ActionLink("Admin", "Admin", New With {.Controller = "Home"})%></li> 
<% End if %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:50:56.683

我不熟悉`VB.NET`但是您可以通过编写如下自定义 Helper 函数来做到这一点：

```
 public static MvcHtmlString If(this MvcHtmlString value, bool evaluation)
    {
         return evaluation ? value : MvcHtmlString.Empty;
    } 
```

所以你可以使用这个：

```
 @Html.ActionLink("Admin", "Admin").If(User.IsInRole("Administrator")) 
```

# jquery - 通过 UpdatePanel 回发后访问 jQuery 到 Elements

> ID：15366921
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:29.700
> 
> 标签：jquery, asp.net, updatepanel

我有一个带有以下 aspx 标记的小页面

```
<fieldset style="width:40%; margin-left:50px;">
    <legend> Site User Role Management</legend>
    <asp:Label ID="lblSiteUserDDl" runat="server" AssociatedControlID="ddlSiteUsers"
         Text="Manage the roles in which a user is registered by selecting the user from the dropdown list below."></asp:Label>
    <asp:DropDownList ID="ddlSiteUsers" runat="server" CssClass="dropdowns" AutoPostBack="True" ClientIDMode="Static" />
    <br /><br />
    <asp:UpdatePanel ID="updplRoleChange"  runat="server" ClientIDMode="Static">
            <ContentTemplate>
                <fieldset id="rolemanagement" style="width:80%;" Visible="false" runat="server" >
                    <legend id="rolemgmtlegend" runat="server"></legend>

                                <asp:Label ID="lblCurrentRole" runat="server"  CssClass="literaltext"></asp:Label><br />
                                <asp:Label ID="lblSiteUserRole" runat="server" CssClass="literaltext"></asp:Label><br /><br />
                                <asp:RadioButtonList id="rblstRoleChange" runat="server">
                                   <asp:ListItem selected="true">Add Role to User</asp:ListItem>
                                   <asp:ListItem>Remove Role from User</asp:ListItem>                                      
                                </asp:RadioButtonList>
                                <asp:DropDownList ID="ddlUserRoles" CssClass="dropdowns" runat="server" AutoPostBack="True" ClientIDMode="Static" /><br />
                                <asp:Button ID="submitrolechange" Text="Submit Role Change" CssClass="buttons"  runat="server" ClientIDMode="Static" Visible="False" />
                </fieldset>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="ddlSiteUsers" EventName="SelectedIndexChanged"/>
                <asp:AsyncPostBackTrigger ControlID="submitrolechange" EventName="Click"/>
            </Triggers>
        </asp:UpdatePanel>
</fieldset> 
```

和下面的 JQuery

```
<script>
    $(document).ready(function () {
        $('#ddlSiteUsers').change(function() {
            $(this).css({ 'color': 'black', 'font-size': '1.1em', 'font-weight': 'bold' });
        });
        //

        $('#updplRoleChange select').change(function () {
            $('#submitrolechange').show();
            $(this).css({ 'color': 'black', 'font-size': '1.1em', 'font-weight': 'bold' });
        });
    });
</script> 
```

第一个功能有效，第二个无效。使用第一个下拉选择器后，更新面板中没有为标记生成 html，因此我什至不确定选择器 id 是否实际上保持静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:58:25.117

一旦您更改了第二个下拉列表（如您设置的那样`AutoPostBack="True"`），颜色将变为粗体，然后回传到服务器。

从服务器返回时，它不会保持先前的客户端状态，这是预期的行为。

![在此处输入图像描述](../Images/5fc0ddf1433da9e7d3f2fc649409e8f2.png)

如果你想保持以前的客户端状态，你需要在页面加载时做一些这样的事情。

```
<fieldset style="width: 40%; margin-left: 50px;">
    <legend>Site User Role Management</legend>
    <asp:Label ID="lblSiteUserDDl" runat="server" AssociatedControlID="ddlSiteUsers"
        Text="Manage the roles in which a user is registered by selecting the user from the dropdown list below."></asp:Label>
    <asp:DropDownList ID="ddlSiteUsers" runat="server" CssClass="dropdowns" AutoPostBack="True" ClientIDMode="Static">
        <asp:ListItem Text="One" Value="One" />
        <asp:ListItem Text="Two" Value="Two" />
    </asp:DropDownList>
    <br />
    <br />
    <asp:UpdatePanel ID="updplRoleChange" runat="server" ClientIDMode="Static">
        <ContentTemplate>
            <fieldset id="rolemanagement" runat="server">
                <legend id="rolemgmtlegend" runat="server"></legend>

                <asp:Label ID="lblCurrentRole" runat="server" CssClass="literaltext"></asp:Label><br />
                <asp:Label ID="lblSiteUserRole" runat="server" CssClass="literaltext"></asp:Label><br />
                <br />
                <asp:RadioButtonList ID="rblstRoleChange" runat="server">
                    <asp:ListItem Selected="true">Add Role to User</asp:ListItem>
                    <asp:ListItem>Remove Role from User</asp:ListItem>
                </asp:RadioButtonList>
                <asp:DropDownList ID="ddlUserRoles" CssClass="dropdowns" runat="server" AutoPostBack="True" 
                    ClientIDMode="Static" OnSelectedIndexChanged="ddlUserRoles_SelectedIndexChanged">
                    <asp:ListItem Text="One" Value="One" />
                    <asp:ListItem Text="Two" Value="Two" />
                </asp:DropDownList>
                <asp:Button ID="submitrolechange" Text="Submit Role Change" CssClass="buttons" runat="server" ClientIDMode="Static" Visible="False" />
            </fieldset>

        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddlSiteUsers" EventName="SelectedIndexChanged" />
            <asp:AsyncPostBackTrigger ControlID="submitrolechange" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>
</fieldset>
<script>
    $(document).ready(function () {
        $('#ddlSiteUsers').change(function () {
            $(this).css({ 'color': 'black', 'font-size': '1.1em', 'font-weight': 'bold' });
        });
        //

        $('#updplRoleChange select').change(function () {
            $('#submitrolechange').show();
            $(this).css({ 'color': 'black', 'font-size': '1.1em', 'font-weight': 'bold' });
        });

    });

    function roleChange() {
        if ($('#updplRoleChange select').val() == "Two") {
            $('#updplRoleChange select').css({ 'color': 'black', 'font-size': '1.1em', 'font-weight': 'bold' });
        }
    }
</script>

protected void ddlUserRoles_SelectedIndexChanged(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this, GetType(), UniqueID, "roleChange();", true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:44:32.243

我认为您想像这样使用 live ：

```
$('#updplRoleChange select').live("change", function(e) {
        // Do something exciting
}); 
```

# php - 我如何在提交之前获得一个表格来删除部分链接？

> ID：15366922
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:32.103
> 
> 标签：php, javascript, html, forms, submit

假设我有一个表单输入来提交一个 facebook 用户 ID，但是有些人没有阅读并提交整个链接我如何在表单提交之前删除我不想要的链接部分？

```
<form>
Facebook id: <input type="text" name="facebookid">
</form> 
```

用户输入：

> www.facebook.com/UserProfleID

我如何让它删除“www.facebook.com/”并留下 ID？在提交之前？

非常感谢您的时间，任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:39:52.987

**如果您是收到表单的人**，您可以在开始使用它之前先玩一下字符串。您可以使用[str_replace](http://php.net/manual/en/function.str-replace.php)删除不需要的子字符串：

```
str_replace('www.facebook.com/', '', $input);
str_replace('facebook.com/', '', $input);
str_replace('http://facebook.com', '', $input); 
```

尽管我建议您将正则表达式与[preg_match](http://php.net/manual/en/function.preg-match.php)一起使用。

**如果**表单提交后你无法控制，那么你可以使用 Javascript 并利用 split 功能：

```
//str = input string
var parts = str.split("facebook.com/");

//alerting the username
alert(parts[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:45:03.770

您可以使用 javascript 拦截表单提交并让用户知道他们犯了错误。但正如其他人所说，您仍然应该在服务器上进行验证。

```
document.forms[0].onsubmit = function(){
     var input = document.getElementsByName('facebookid')[0].split("/");
     if(input.length > 1){ 
         //should do this part with fancy CSS and not an alert box
         alert("Enter your id only plix plox");
         return false;
      }
     return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T16:55:26.900

```
<form>
Facebook id: <input type="text" id="userid" name="facebookid">
</form>

$("form").submit( function () {
var arr= $("#userid").val().split("facebook.com/");
$("#userid").val(arr[1]);
} ); 
```

它可能会帮助你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-12T16:38:19.067

如果您希望前缀是可预测的，那么您可以使用可以从输入中删除的字符串字典。

但是，如果您无法预测输入，那么正则表达式可以让您灵活地预测模式，但不能预测要删除的值。

如果这是我的代码，我会使用正则表达式……主要是因为我喜欢编写最少的代码来完成最多的工作。

# python - 带有 nltk.wordnet.synsets 的 Python IF 语句

> ID：15366924
> 
> 赞同：2
> 
> 时间：2013-03-12T16:34:43.080
> 
> 标签：python, nltk, wordnet

```
import nltk
from nltk import *
from nltk.corpus import wordnet as wn

output=[]
wordlist=[]

entries = nltk.corpus.cmudict.entries()

for entry in entries[:200]: #create a list of words, without the pronounciation since.pos_tag only works with a list
    wordlist.append(entry[0])

for word in nltk.pos_tag(wordlist): #create a list of nouns
    if(word[1]=='NN'):
        output.append(word[0])

for word in output:
    x = wn.synsets(word) #remove all words which does not have synsets (this is the problem)
    if len(x)<1:
        output.remove(word)

for word in output[:200]:
    print (word," ",len(wn.synsets(word))) 
```

我正在尝试删除所有没有同义词的单词，但由于某种原因它不起作用。运行程序后，我发现即使说一个词具有 len(wn.synsets(word)) = 0，它也不会从我的列表中删除。有人可以告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:40:24.807

您不能遍历列表并同时删除当前项目。这是一个演示问题的玩具示例：

```
In [73]: output = range(10)

In [74]: for item in output:
   ....:     output.remove(item) 
```

您可能希望`output`删除其中的所有项目。但其中一半仍然存在：

```
In [75]: output
Out[75]: [1, 3, 5, 7, 9] 
```

* * *

**为什么不能同时循环和删除：**

想象一下 Python 使用一个内部计数器来记住当前项目的索引，因为它通过`for-loop`.

当计数器等于 0 时（第一次通过循环），Python 执行

```
output.remove(item) 
```

美好的。中现在少了一项`output`。但随后 Python 将计数器增加到 1。所以 word 的下一个值是`output[1]`，它是原始列表中的*第三*项。

```
0  <-- first item removed
1  <-- the new output[0] ** THIS ONE GETS SKIPPED **
2  <-- the new output[1] -- gets removed on the next iteration 
```

* * *

**（解决方法）解决方案：**

相反，要么迭代 的副本`output`，要么构建一个新列表。在这种情况下，我认为构建一个新列表更有效：

```
new_output = []
for word in output:
    x = wn.synsets(word) 
    if len(x)>=1:
        new_output.append(word) 
```

# c# - 向用户显示通知

> ID：15366928
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:49.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

对于继续使用我的 MVC 应用程序要做出哪些选择，我有一个小问题。我正在尝试制作一个简单的 MVC 应用程序，在该应用程序中设置多个用户并将其保存到我的数据库中。而且我还运行了另一个应用程序，目前，我希望这是一个简单的控制台，其主要任务是将订单写到我为当前存在于我的 MVC 应用程序数据库中的用户创建的 XML 文件中。我要求他做的事情将作为节点内容插入到 XML 中，并且文件将保存在服务器存储中。

为了在用户登录我的站点时向用户显示此信息，我现在有两个选择，要么`[1]`简单地阅读整个 XML 文件并显示我给他的订单，要么`[2]`向他发送一封电子邮件，通知他所有的订单我做。

后者似乎有点尴尬，因为如果我要求他做 100 份工作，我必须发送 100 封电子邮件，而前者会增加服务器存储的负担，如果我的用户号是 1000，服务器存储应该需要保存 1000 个 XML 文件

由于我对并发性的了解有限，另一个重要问题是我不知道如何让我的 Web 应用程序始终检查保存在服务器上的最新 XML 文件，用户可以读取和显示输出。

# java - @ModelAttribute 人口

> ID：15366929
> 
> 赞同：0
> 
> 时间：2013-03-12T16:34:53.787
> 
> 标签：java, spring, jsp, spring-mvc

我正在使用方法创建一个对象`createDummyObjectModel`，然后流程转到一个`loadPage`方法，我在其中填充`dummyObject`并将其添加到模型中，以便该`showDummyObject`方法可以访问它（这是来自页面的 get 调用）。

`dummyObject`在我填充`loadPage`方法后出现问题，流程再次返回`createDummyObjectModel`并清除数据。

解决此问题的最佳方法是什么？我知道@`ModelAttribute`方法总是首先被调用。

```
 @Controller
    @SessionAttributes( value = {"abcModel"} )
    public class myController

{
    @RequestMapping( value = "/loadHomePage.html", method = RequestMethod.GET )
    public String loadPage( @ModelAttribute( "abcModel" ) DummyObject dummyObject,
           ModelMap model ) 
    {
           dummyObject = webService.getMyDummyObject("paramters");

           model.addAttribute( "abcModel", dummyObject );

        return "homepage";
    }

    @RequestMapping( value = "/getDummyObjectString.html" )
    public void showDummObject( @ModelAttribute( "abcModel" ) DummyObject dummyObject,
             ModelMap model,
            Writer out ) throws IOException
    {

        String dummyString = dummyObject.toString();
        out.write( dummyString );

    }

    @ModelAttribute( "abcModel" )
    public DummyObject createDummyObjectModel()
    {
        DummyObject dm = new DummyObject();

        return dm;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:47:20.653

在调用 @ModelAttribute 参数设置为 null 的方法时，应由 Spring 调用 @ModelAttribute 方法。您对网络服务的调用是否会`dummyObject = webService.getMyDummyObject("paramters");`返回一些东西？我猜 Spring 再次打电话给你`createDummyObjectModel()`，因为你`dummyObject`是空的。

# mysql - 如何在mysql中进行foreach类型查询，将每一行与另一个表中的几行进行比较？

> ID：15366933
> 
> 赞同：2
> 
> 时间：2013-03-12T16:34:57.693
> 
> 标签：mysql, sql, select, join

我需要检查每个 entryForm 行的名称，并检查该名称是否出现在 .siteid 和 entryForm.siteid 匹配的 SiteContacts 列表中。（没有必要检查站点不匹配的 entryForm 行。）我需要留下不匹配的 entryForms。

一个entryForm 有一个siteContact，一个siteContact 可以有多个entryForm。

```
select * from siteContacts, entryForm 
where siteContacts.siteid=entryForm.siteid 
and entryForm.name not like concat('%',siteContacts.lastname, '%') 
```

siteContacts 是这样的表：

```
id  |   lastname     |  siteid  
===============================
7   |   Cooper       |   2
8   |   Hofstadter   |   2
9   |   Wolowitz     |   3
10  |   Koothrappali |   3 
```

entryForms 是这样的表：

```
id  |   name           |  siteid  
==================================
1   |   Sheldon Cooper |   2
2   |   L. Hofstadter  |   2
3   |   Penny          |   3
4   |   Wolowitz       |   3
5   |   Dr Hofstadter  |   2 
```

结果应该是 Penny ：

```
3   |   Penny          |   3 
```

但它不是......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:37:11.580

你应该使用`LEFT JOIN`而不是`INNER JOIN`因为你在这里处理的是在其他表上没有匹配的记录。

```
SELECT  a.*
FROM    entryForms a
        LEFT JOIN siteContact b
            ON a.Name LIKE CONCAT('%',b.LastName,'%')
WHERE   b.LastName IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/51ae9/2)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔════╦═══════╦════════╗
║ ID ║ NAME  ║ SITEID ║
╠════╬═══════╬════════╣
║  3 ║ Penny ║      3 ║
╚════╩═══════╩════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:55:12.603

我认为这也是像上面 JW 一样的连接，但以另一种方式编写：

```
select * from entryForms
where entryForms.name not in (
  select entryForms.name from siteContacts, entryForms 
  where siteContacts.siteid=entryForms.siteid 
  and entryForms.name like concat('%',siteContacts.lastname, '%')
) 
```

[http://www.sqlfiddle.com/#!2/51ae9/16](http://www.sqlfiddle.com/#!2/51ae9/16)

# java - Java：启动主应用程序之前的新框架

> ID：15366938
> 
> 赞同：1
> 
> 时间：2013-03-12T16:35:03.507
> 
> 标签：java, multithreading

我正在尝试向我的程序添加一个新框架。现在使用一个简单的确认对话框（是/否）来设置一些变量，但我希望这些变量是可配置的。

它是这样工作的：执行 --> 确认对话框 --> "Main"

我想要什么：执行->确认框架->“主要”

我已经创建了一个新框架，我在 main 中声明，但是在启动时它不会加载组件，只是新框架窗口并冻结。（使用带有连接和等待/通知的线程）。

我应该如何以及在哪里创建新框架？

编辑：

```
private void initComponents() {

    mainPanel = new JPanel();
    jScrollPane2 = new javax.swing.JScrollPane();

    //Now
    /*int n= JOptionPane.showConfirmDialog(
        mainPanel.getParent(),
        "Question",
        "Q",
        JOptionPane.YES_NO_OPTION);*/

    //Should I create the frame here?
    newF = new newFrame();
    newF.setVisible(true);
    newF.setLocationRelativeTo(mainPanel);

    ...
} 
```

这种方式的问题是两个窗口都被启动了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:05:20.927

这是一个有关如何进行窗口链接的说明性示例。

```
public static void main(final String[] args) {

    final Window j1 = new JDialog() {
        {
            setTitle("Frame One");
            setSize(250, 250);
            setLocation(100, 100);
            setDefaultCloseOperation(DISPOSE_ON_CLOSE);
            setModal(true);
        }
    };

    final Window j2 = new JFrame() {
        {
            setTitle("Frame Two");
            setSize(250, 250);
            setLocation(350, 100);
            setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        }
    };

    // Will block here until the 1st window is dismissed.
    j1.setVisible(true);

    // Will not block 
    j2.setVisible(true);
} 
```

# c - 退格不擦除字符，类似于 BASH

> ID：15366940
> 
> 赞同：0
> 
> 时间：2013-03-12T16:35:08.600
> 
> 标签：c

我可以解析输入，在历史中上下遍历，但我的退格不起作用。这是为什么？

```
void printPrompt(void)
{ // prints working directory prompt
    char cwd[256];
    getcwd(cwd, 255);
    printf("%s> ", cwd);
    fflush(stdout);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T16:47:33.720

`DEL`当您应该发送`BS`(dec 8)时，您正在尝试打印(dec 127)。然后您可能还想发送一个空格和另一个`BS`来清除该字符（`BS`只需移动光标）。所以，当你得到 时`buf[0] == 8`，打印出`8`, `32`, `8`.

```
else if (buf[0] == 8)
{ // Backspace
    if (charsRead > 0)
    {
        line[charsRead - 1] = '\0';
        charsRead--;
        printf("%c%c%c", 8, 32, 8); // CHANGE HERE
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:49:34.203

退格键正在工作。问题是在退格后重新显示该行。您可能应该打印回车 (\r)，然后重新打印包含提示的行。

编辑：我也不确定我的建议是否可以 100% 跨终端移植。您可能需要使用诸如 curses 之类的东西来处理可移植性问题。

# backbone.js - 从 Backbone 中的 Model Fetch 检查 404

> ID：15366945
> 
> 赞同：2
> 
> 时间：2013-03-12T16:35:26.897
> 
> 标签：backbone.js

我有这个代码：

```
var quote = new kf.Models.Quote();
quote.id = id;
quote.fetch(); 
```

现在，我要做的是弄清楚如何从 REST API 中捕获 404，如果服务器上不存在指定的报价，

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T16:55:11.287

根据[Backbone 文档](http://backbonejs.org/#Model-fetch)，您可以将选项对象传递给`fetch`，并定义一个`error`回调：

```
var quote = new kf.Models.Quote();
quote.id = id;
quote.fetch({
  error: function(model, xhr, options) {
    console.log("something went wrong!");
  }
}); 
```

应该做的工作。`success`如果您的代码仅在 Ajax 调用成功时才需要运行，您还可以定义回调。

[This other SO question](https://stackoverflow.com/questions/6150514/global-error-handler-for-backbone-js-ajax-requests)定义了许多其他方法，包括定义一个为每个Ajax错误调用的函数。当出现问题时， Backbone 也会触发`"error"`事件，因此您可以在初始化模型时绑定到该事件：

```
this.bind("error", someFunc); 
```

# pandas - “重新索引仅对具有唯一值的索引对象有效”

> ID：15366949
> 
> 赞同：1
> 
> 时间：2013-03-12T16:35:47.193
> 
> 标签：pandas

当我运行这样的代码时：

```
import pandas as pd

A = pd.DataFrame([('a', -1.374201, 35),
                  ('b', 1.415697, 29),
                  ('a', 0.233841, 18),
                  ('b', 1.550599, 30),
                  ('a', -0.178370, 63),
                  ('b', -1.235956, 42),
                  ('a', 0.088046, 2),
                  ('b', 0.074238, 84)], columns='key value other'.split())

B = A.groupby('key')['value'].mean()

C = pd.DataFrame([('a', 0.469924, 44),
                  ('b', 1.231064, 68),
                  ('a', -0.979462, 73),
                  ('b', 0.322454, 97)], columns='key value other'.split())

D = C.set_index('key')
D['value'] -= B 
```

...最后一行因错误而失败：

```
Exception: Reindexing only valid with uniquely valued Index objects 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:25:40.513

如果我正确地按照您的示例进行操作（感谢您添加它，顺便说一句），我相信您需要的很简单：

`D.sub(B, axis='index')`

这给了我：

```
In [29]: D.sub(B, axis='index')
Out[29]: 
        value      other
key                     
a    0.777595  44.307671
a   -0.671791  73.307671
b    0.779919  67.548856
b   -0.128690  96.548856 
```

如您所见，这使`other`列混乱。如果这是一个问题，那么不幸的是，您又回到了相同的重复索引情况。

# java - 防止 opencsv 将引号写入 .csv 文件

> ID：15366954
> 
> 赞同：11
> 
> 时间：2013-03-12T16:35:56.230
> 
> 标签：java, opencsv

我正在从 resultSet 中填充一个文件，如下所示：

```
 while(rs.next()){

          String[] entries = new String[3];
          entries[0] = rs.getString(1);
          entries[1] = ",";
          entries[2] = rs.getString(2);

          println("entries : "+entries);
          writer.writeNext(entries);

      } 
```

当我打开 excel 文件时，值包含它们周围的双引号。所以 test1,test2,test3 从数据库读取并写入 .csv 文件时变为 "test1","test2","test3"

如何将文本写入文件但不包含引号？

当我将条目打印到控制台时，不会打印双引号，所以我不知道它们被添加到哪里？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-03-23T19:54:41.553

只是为了扩展 Matten 的答案，使用 CSVWriter 中的内置字符来指定`quotechar`. 所以你的作家看起来像下面这样：

```
CSVWriter writer = new CSVWriter(new FileWriter(fileName), CSVWriter.DEFAULT_SEPARATOR, CSVWriter.NO_QUOTE_CHARACTER); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-16T11:03:28.180

由于当有人查找 OpenCSV 和引号问题时，这个问题在谷歌搜索结果中首先出现，所以我将在此处添加更新的解决方案。

我使用的是 4.6 版，确实可以跳过引号，同时保留包含分隔符字符的完整引号。

示例代码：

```
List<SomeCsvEntryTO> csvEntries = new ArrayList<>();
csvEntries.add(new SomeCsvEntryTO("sdf1", "sdf2"));
csvEntries.add(new SomeCsvEntryTO("hgh1", "hgh2;hghgh2"));

Writer writer = new FileWriter(filePath);
StatefulBeanToCsv<SomeCsvEntryTO> csvWriter = new StatefulBeanToCsvBuilder<SomeCsvEntryTO>(writer)
        .withSeparator(';')
        .withApplyQuotesToAll(false)
        .build();
csvWriter.write(csvEntries);
writer.close(); 
```

SomeCsvEntryTO：

```
public class SomeCsvEntryTO{

   @CsvBindByName(column = "sample1colname")
   private String sample1;

   @CsvBindByName(column = "sample2colname")
   private String sample2;
} 
```

正如您在上面看到的，我使用分号作为分隔符，并且没有更改引号字符。只需更改`withApplyQuotesToAll`为`false`.

这会产生以下结果：

```
SAMPLE1COLNAME;SAMPLE2COLNAME
sdf1;sdf2
hgh1;"hgh2;hghgh2" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-11T10:20:02.497

**更新**（2019 年 10 月 16 日）：现在可以使用更高版本的 OpenCSV。请参阅[Sikor 的回答](https://stackoverflow.com/a/58411798/1389219)。

* * *

**TL;DR**你不能用 OpenCSV v2.3 做到这一点。但是您可以使用[Commons CSV](http://commons.apache.org/proper/commons-csv/)。

OpenCSV (v2.3) 似乎没有提供一种在不需要引号时关闭引号的安全方法。对于其中没有分隔符或行结束符的值，通常不需要引号。

`NO_QUOTE_CHARACTER`按照一些人的建议使用：

```
CSVWriter writer = new CSVWriter(new FileWriter("data.csv"), CSVWriter.DEFAULT_SEPARATOR, CSVWriter.NO_QUOTE_CHARACTER);
String[] someData = new String[] {"Black and white", "Red, yellow and blue"};
writer.writeNext(someData); 
```

生成**不正确**的CSV 表示为：

```
Black and white,Red, yellow and blue 
```

此数据的更有效表示形式（仅在需要时使用引号）是：

```
Black and white,"Red, yellow and blue" 
```

我没有使用过[Commons CSV](http://commons.apache.org/proper/commons-csv/)，但它似乎提供了这种能力，通过[`QuoteMode.MINIMAL`](https://commons.apache.org/proper/commons-csv/apidocs/org/apache/commons/csv/QuoteMode.html#MINIMAL)它可以执行以下操作：

> 引用包含特殊字符的字段，例如分隔符、引号字符或行分隔符中的任何字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-23T21:22:57.007

是的。在同一个包中有一个 CSVWriter，它遵循与 CSVReader 相同的语义。例如，要编写一个制表符分隔的文件：

```
CSVWriter writer = new CSVWriter(new FileWriter("yourfile.csv"), '\t');
// feed in your array (or convert your data to an array)
String[] entries = "first#second#third".split("#");
writer.writeNext(entries);
writer.close(); 
```

如果您更喜欢使用自己的引号字符，您可以使用构造函数的三个 arg 版本，它采用引号字符（或随意传入 CSVWriter.NO_QUOTE_CHARACTER）。

您还可以自定义生成文件中使用的行终止符（这在您从 Linux Web 应用程序导出到 Windows 客户端时很方便）。为此目的有一个构造函数参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-31T07:24:20.260

请参阅[此](https://stackoverflow.com/a/29362439/1454926)链接，了解如何在写入文件时使用 NO_QUOTE_CHARACTER 构造函数和正确编码：

[https://stackoverflow.com/a/29362439/1454926](https://stackoverflow.com/a/29362439/1454926)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T16:39:48.003

[writer](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVWriter.html)的构造函数代码允许您提供转义字符 ( `quotechar`)：

```
CSVWriter(Writer writer, char separator, char quotechar) 
```

如果这是错误的，还有另一个带有转义字符的构造函数:-)

```
CSVWriter(Writer writer, char separator, char quotechar, char escapechar) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-07T09:22:23.660

很长一段时间和许多可行的答案，但截至 2021 和 v5，我眼中最干净的解决方案是使用具有定义常量的构建器。与使用固定构造函数相比，这允许您对 CsvWriter 进行更多控制。

```
import static com.opencsv.ICSVWriter.*;

CSVWriterBuilder builder = new CSVWriterBuilder(new FileWriter("yourfile.csv"));
ICSVWriter csvWriter = builder
      .withQuoteChar(NO_QUOTE_CHARACTER)
      .build();
csvWriter.writeAll(rs, true); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-06T15:14:57.350

这是自 5.x 版以来对我有用的方法

```
import static com.opencsv.ICSVParser.*;

...
new CSVWriter(writer, DEFAULT_SEPARATOR, NO_QUOTE_CHARACTER, DEFAULT_ESCAPE_CHARACTER, DEFAULT_LINE_END) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-09T20:17:55.850

使用此模式防止双引号（在 5.3 版本上检查）

```
CSVWriter writer = new CSVWriter(new FileWriter(filename), CSVWriter.DEFAULT_SEPARATOR, CSVWriter.NO_QUOTE_CHARACTER, CSVWriter.NO_ESCAPE_CHARACTER, CSVWriter.DEFAULT_LINE_END); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-03-12T16:44:39.013

您可以使用`Constructor`@Matten 提到的 ，同时使用另一个[writeAll()](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVWriter.html#writeAll%28java.sql.ResultSet,%20boolean%29)的`CSVWriter`.

**OpenCSV**还支持将数据从 SQL 表直接转储到 CSV。为此，我们需要 ResultSet 对象。以下**API**可用于将数据从 ResultSet 写入 CSV。

```
java.sql.ResultSet myResultSet = getResultSetFromSomewhere();
writer.writeAll(myResultSet, includeHeaders); 
```

该`writeAll(ResultSet, boolean)`方法用于此。第一个参数是`ResultSet`您要写入**CSV**文件的参数。第二个参数`boolean`表示是否要将标题列（表列名称）写入文件。

# jquery - jQuery Maskedinput 插件焦点不正确

> ID：15366956
> 
> 赞同：1
> 
> 时间：2013-03-12T16:36:00.737
> 
> 标签：jquery, maskedinput

我正在使用来自 Digitalbush.com 的 jQuery 1.9.0、jQuery-ui-1.10.0 和 Maskedinput 1.3.1 插件。

我的电话号码掩码如下：

```
$('[ID*="strSponsorContactPhone"]').mask("(999)999-9999? x99999", { placeholder: " " }); 
```

我的日期掩码如下：

```
$('[ID*="strEventDateEnd"]').mask("9999-99-99", { placeholder: " " }); 
```

这似乎按预期工作，除了当输入字段通过 Tab 键或直接单击它获得焦点时，初始光标位置是右侧一个字符，第一个字符留一个空白数字。当用户离开场地（失去焦点）时，位置会被校正。这让用户有些不安。

这发生在 IE8 和 Firefox 19.0 中。

知道这是否常见和/或为什么会发生这种情况？

**更新**：更多信息，这似乎发生在使用 IIS 服务的 VB.NET 页面*和*使用 Apache 服务的 PHP 页面中。坦率地说，我没想到会有所不同，但我不得不尝试，我觉得有必要在此处添加结果。

# asp.net-mvc-3 - 在 MVC3 中使用下拉列表和操作

> ID：15366960
> 
> 赞同：0
> 
> 时间：2013-03-12T16:36:03.843
> 
> 标签：asp.net-mvc-3, drop-down-menu

我正在尝试构建一个表，您可以在其中查看 MVC3 中一个人的当前状态（从数据库加载）。用户可以选择更改和设置保存到数据库的状态。举个例子：

![例子](../Images/dd425f233f9964c6716c9a3fd4b8ca5a.png)

我对 MVC3 很陌生，我不确定如何将下拉菜单的值传递给控制器​​。

我显示下拉菜单/设置按钮的代码如下：

```
<td>
    <%= Html.DropDownList("Statuses",new SelectList(ViewData.Model.Statuses))%>
    <a href="/People/Set" class="btn btn-primary">Set</a>
</td> 
```

我设法让 Set 按钮调用“PeopleController”中的方法，但我不知道如何：

1.  从下拉列表中传入值
2.  确保我没有从错误的下拉列表中传递值（在此示例中，有 3 个下拉列表）。
3.  我必须确保我正在更改正确人员的状态 - 每个人都有一个唯一的姓名，如果我知道此人的姓名，我可以更改正确的状态。

注意：我正在使用 MVC3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:59:20.777

为了总结和澄清我上面的评论，将下拉列表包装在一个表单中，使 Set 链接成为 submint 按钮，并添加一个隐藏元素来传递 Id。

```
 <td>
        <% using(Html.BeginForm())
        {%>
           <%=Html.DropDownList("Statuses",new SelectList(ViewData.Model.Statuses))%>
           <%=Html.Hidden("Id")
           <input type="submit" value="Set" />
        <%}%>
    </td> 
```

（ps，考虑跳到剃刀视图引擎，它的读写要好得多）

# ember.js - Ember.JS 绑定时间？

> ID：15366968
> 
> 赞同：1
> 
> 时间：2013-03-12T16:36:34.110
> 
> 标签：ember.js

抱歉，如果措辞不正确，很难解释。基本上我有一个项目列表，它们旁边有一个指定的日期。如果它们超过 30 分钟，那么它们会变红。完美运行，但不是实时的。需要刷新才能看到该项目变红。

```
{{#each callback in App.callbackController}}
    <tr>
        <td align="center" {{bindAttr style="callback.urgent"}}>{{callback.formatted_time}}</td>
    </tr>
{{/each}}

App.Callback = Ember.Object.extend({
    date_time: null,
    urgent: function()
    {
        current_time  = new Date().getTime();
        callback_time = new Date(this.get('date_time')).getTime();

        if(((callback_time - current_time) / 1000 / 60 * -1) > 30)
        {
            return 'color: #FFF; font-weight: bold; background: #'+Helpers.colours.red;
        } else {
            return 'color: #FFF; font-weight: bold; background: #'+Helpers.colours.green;
        }
    }.property('date_time')
}); 
```

无论如何要不断刷新紧急值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:45:44.497

Richard Livsey 写[了一篇精彩的博客文章](http://livsey.org/blog/2013/02/20/tick-tock/)，基本上添加了一个应用程序范围的时钟模型，该模型通过注入连接到所有控制器。然后，您的计算属性可以绑定到时钟属性并在适当的时间“唤醒”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:14:44.593

您的计算属性仅查看“date_time”属性，在您的示例中，它看起来像是创建项目的时间。

您可能应该在应用程序的某处（有意义的地方）添加一个“date_time_now”属性并将其添加到您的计算属性中。不确定 ember 是否具有内置的“now”属性，但使用 setTimeout() 设置自己应该不会太难。

**编辑：**

重新阅读我的答案，并意识到我没有尽可能地解释它。由于您的计算属性只查看 date_time （它永远不会更改），因此它将被评估一次并在此之后缓存，因为默认情况下会缓存计算属性。添加 date_time_now 属性并进行更新，每次更改 date_time_now 时都会强制重新计算。

# ios - ARC 不允许将“int”隐式转换为“NSArray*”

> ID：15366976
> 
> 赞同：0
> 
> 时间：2013-03-12T16:36:56.140
> 
> 标签：ios, nsarray, nsnumber

我正在尝试用整数填充我的数组。然而，对我来说有些奇怪的是，这并不像我想的那样容易。以下是对所发生情况的描述。

代码的最后一行给了我错误。“不允许将 int 隐式转换为 NSArray”

```
//.h file
{
NSArray storeDisk[15];
}
property int virdCount;
property (nonatomic, strong)NSArray *storeDisk;

//.m file

virdCount+=virdCount;
storeDisk[0]=virdCount; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:45:16.147

如果要将整数放入 中`NSArray`，则需要使用`NSNumber`.

例如：

```
NSArray *a = [NSArray arrayWithObject:[NSNumber numberWithInt:virdCount]]; 
```

或者，有简写：

```
NSArray *a = @[@(virdCount)]; 
```

无论哪种方式，要恢复数据：

```
int value = [[a objectAtIndex:0] intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:47:29.287

It seems like you have a fundamental mistake of understanding NSArrays. I would suggest you read some iOS tutorials to learn the syntax and usage of core cocoa classes.

The following line:

```
NSArray storeDisk[10]; 
```

**Does not** produce an NSArray with 10 cells.

Neither will this work, as was in the unedited question:

```
NSArray* storeDisk[15]; 
```

That will simply produce an array of 15 NSArray pointers. That would be useful only if you tried creating an array of 15 NSArrays (and still, there would be better ways to do this in Objective-C).

You must read about NSArray and use the correct syntax to use it. Other than that, NSArray is not the right choice since it is immutable. If you want to add objects to the array, you must use a mutable array. Second, to insert an integer you must use the cocoa wrapper for numbers - NSNumber. NSArray can only hold objects.

In order to produce an NSArray with 20 cells, one possibility is using this code:

```
NSMutableArray* array = [NSMutableArray arrayWithCapacity:20];
[array insertObject:[NSNumber numberWithInt:virdCount] atIndex:10]; 
```

Still, I **highly suggest** that you take a pause and read [some](http://www.techotopia.com/index.php/Working_with_Objective-C_Array_Objects) [tutorials](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/FoundationTypesandCollections/FoundationTypesandCollections.html) or [documentation](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html).

Edited to reflect edited question.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T16:40:02.673

您应该通过以下方式创建一个数组：

在 .h 文件中：

```
{
    NSMutableArray *storeDisk;
}
property int virdCount;
property (nonatomic, strong)NSMutableArray *storeDisk;

NSMutableArray *storeDisk = [[NSMutableArray alloc] init];
[storeDisk addObject:virdLabel.text]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-16T16:56:56.760

您不能按原样将 int 添加到数组中。数组只能接受对象，因此它是使用 (id) 或任何其他目标 c 对象创建的。如果您想将 int 添加到 NSArray 使用...

```
[arrayObj addObject:[NSNumber numberWithInteger:0]];
[arrayObj addObject:[NSNumber numberWithInteger:1]]; 
```

# css - 处理 CSS 并将类移动到新文件的脚本？

> ID：15366983
> 
> 赞同：0
> 
> 时间：2013-03-12T16:37:24.670
> 
> 标签：css, sass, compass-sass

是否有脚本或工具可以删除某些类并将它们添加到单独的文件中。

我正在使用 SASS 并希望将触摸内容以及某些其他类移动到单独的 css 文件中，而不必手动将它们写入单独的文件中。

是否已经有一个工具可以做到这一点。或者这是否可能在 CSS 渲染之前的 SASS/Compass 端。

任何建议都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:04:08.887

目前，Sass/Compass 社区正在[讨论如何将其作为原生功能。](https://github.com/nex3/sass/issues/241)

虽然我们正在等待是否会实现这一点，但您至少可以尝试一种[方法](http://jakearchibald.github.com/sass-ie/)，该方法允许您将所有选择器的样式写入一个文件，同时将某些样式输出到单独的样式表。该方法利用了`@content`这一点，您可以阅读简短说明并查看[此处](https://github.com/nex3/sass/issues/408#issuecomment-6086901)的另一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:37:53.813

我有点不确定你所说的“是否有脚本或工具”来移动东西是什么意思？我怀疑会有一种自动化的方式。但是手动创建一个部分文件（例如_touch.scss）。如果它与您的主 scss 文件位于同一目录中，请添加 @import 'touch'; 到您的主文件，或者如果它位于子目录中 @import 'example/touch.scss'; . 然后将类和相关的东西移动到部分文件中。希望有帮助。

# vba - Excel 2010 - 带有 LIST 的单元格未排序

> ID：15366994
> 
> 赞同：0
> 
> 时间：2013-03-12T16:38:13.063
> 
> 标签：vba, excel

我正在使用以下代码对单元格进行排序：

```
Sub RecordSort()

Application.ScreenUpdating = False
Application.DisplayAlerts = False
ActiveSheet.Unprotect Password:="password"

Dim lastrow As Long
Dim ws As Worksheet
lastrow = ActiveSheet.UsedRange.SpecialCells(xlCellTypeLastCell).Row

ActiveSheet.Sort.SortFields.Clear
ActiveSheet.Sort.SortFields.Add Key:=Range( _
    "B3:B" & lastrow), SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:= _
    xlSortNormal

With ActiveSheet.Sort
    .SetRange Range("A3:P" & lastrow)
    .Header = xlGuess
    .MatchCase = False
    .Orientation = xlTopToBottom
    .SortMethod = xlPinYin
    .Apply
End With

ActiveSheet.Protect Password:="password"
Application.ScreenUpdating = True
Application.DisplayAlerts = True

Range("A3").Select
End Sub 
```

在 LI 列中有一个包含 5 个代码的下拉列表。当我在文件底部添加一个单元格时，它在 L 列中有下拉列表。一旦我对它进行排序（使用上面的宏），该行在 L 列中不再有下拉列表。有没有不同的方法我应该排序？

我正在根据列 B 的内容（这是一个姓氏）对列 A 到 P 进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T17:00:07.087

这是因为数据验证适用于单元格本身，而不是单元格中的值；因此，当您对值进行排序时，数据验证仍适用于原始单元格。最简单的解决方法可能是通过选择整个列并创建验证规则来将数据验证列表添加到整个列 L - 这是一个选项吗？