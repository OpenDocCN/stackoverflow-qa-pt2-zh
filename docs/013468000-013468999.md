# StackOverflow 问答 13468000-13468999

# asp.net - 如何将类方法注册为控件事件处理程序

> ID：13468001
> 
> 赞同：0
> 
> 时间：2012-11-20T06:53:47.917
> 
> 标签：asp.net, gridview, delegates

请原谅我对代表的无知。我正在尝试在 asp.net WinForms 页面中为 GridView 事件注册处理程序：

```
Class myClass
{
    void grid_rowDataBound(object sender, GridViewCommandEventArgs e)
    { blah blah }
}

myClass myClassInstance = new myClass(); //done in Page_Load

<asp:GridView ID="server_grid" runat="server" OnRowDataBound="myClassInstance.grid_RowDataBound">
    yadda yadda
</asp:GridView> 
```

我收到运行时错误“委托给实例方法不能有 null 'this'”。此时我唯一的解决方案是定义一个新的页面函数，它只调用我的类方法并在 OnRowDataBound 中注册该页面函数。但是没有直接的方法来为 GridView 事件注册类方法而没有间接性吗？还是所有页面控制事件都需要页面类中定义的处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:43:32.197

您可以使用以下内容，但这只是定义您已经建议的新功能的一种简短方法。

```
server_grid.RowDataBound += (s,e) => myClassInstance.grid_RowDataBound(s, e); 
```

# c# - 页脚中的 ClientScript.RegisterStartupScript

> ID：13468007
> 
> 赞同：2
> 
> 时间：2012-11-20T06:54:28.940
> 
> 标签：c#, asp.net

我们可以调用：

```
ClientScript.RegisterStartupScript(typeof(Page), "KyAUIDFCS", "<script language='javascript' type='text/javascript'>slidershow();</script>"); 
```

在用户控件中，我们如何实现这一点让我知道，因为用户控件中有页面对象。有没有替代的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:36:36.383

如果不需要在服务器端代码之后执行 javascript，您可以从按钮的 OnClientClick 属性中调用此 javascript 函数。

否则，您可以简单地将上面显示的代码添加到按钮单击处理程序中，例如：

```
private void Button1_Click(object sender, eventArgs e)
{
    // your code

    ClientScript.RegisterStartupScript(typeof(UserControl1), "KyAUIDFCS", "slidershow();", true);
} 
```

RegisterStartUpScript 为 AddscriptTags 获取一个参数，因此您可以摆脱标签并简单地添加一个 true 参数

或尝试

```
ScriptManager.RegisterStartupScript 
```

您可以使用任何类型的类来代替 typeOf(Page)。由于您的用户控件本身就是一个类，因此您只需传入用户控件的名称而不是 Page

# c# - 独立的图像和文本的 StatusStripLabel 事件

> ID：13468008
> 
> 赞同：0
> 
> 时间：2012-11-20T06:54:32.887
> 
> 标签：c#

我有一个放置文本和图像的 StatusStripLabel。现在我想为文本和图像调用独立事件..就像在文本单击时..它应该是 Text_Click.. 在图像单击时它应该是 Image_Click..

可能与否中的上述情况??????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:51:54.403

有点可能......您`MouseUp`可以`MouseEventArgs`根据`ToolStripStatusLabel`.

```
private void statusLabel_MouseUp(object sender, MouseEventArgs e)
{
    ToolStripStatusLabel statusLabel = (ToolStripStatusLabel)sender;
    GraphicsUnit unit = GraphicsUnit.Pixel;

    if (statusLabel.Image.GetBounds(ref unit).Contains(e.Location))
        MessageBox.Show("Clicked on image.");
    else
        MessageBox.Show("Clicked on text.");
} 
```

但是有一些先决条件：`ToolStripStatusLabel.TextImageRelation`必须设置为`TextImageRelation.ImageBeforeText`并且`ToolStripStatusLabel.ImageScaling`必须设置为`ToolStripItemImageScaling.None`。否则，您将不得不添加更多逻辑。

# java - 根据词频发现推文中的热门话题

> ID：13468011
> 
> 赞同：0
> 
> 时间：2012-11-20T06:54:52.497
> 
> 标签：java, twitter, data-mining, text-mining

我正在构建一个 Java Web 服务，用于根据 twits 中使用的单词的频率在特殊位置（纬度、经度）查找热门话题。

我正在使用 twitter4j api 来获取推特，我可以用它们的位置过滤它们。任何人都可以帮助我并告诉我如何处理数据并获得热门话题吗？

我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:52:46.050

我建议您研究“概率潜在语义索引”。您可以为此使用“topicmodels”包。

该视频可能对您有用：[关于概率潜在语义索引的视频](http://videolectures.net/mlss04_hofmann_irtm/)

# objective-c - glDrawElements 与堆栈内存

> ID：13468017
> 
> 赞同：0
> 
> 时间：2012-11-20T06:55:06.420
> 
> 标签：objective-c, opengl-es, opengl-es-2.0

我在函数的堆栈上声明了两个数组，并验证它们都包含完全相同的数据：

```
/// Rasters the textured quad using the specified parameters.
- (void)privateConfigureRasterWithTexture:(GLuint)theTexture
                          bottomLeftX:(GLfloat)bottomLeftX
                          bottomLeftY:(GLfloat)bottomLeftY
                            topRightX:(GLfloat)topRightX
                            topRightY:(GLfloat)topRightY
{

    const GLfloat texices[] =
      { bottomLeftX, bottomLeftY,   // bottom left corner
        bottomLeftX,   topRightY,   // top left corner
          topRightX,   topRightY,   // top right corner
          topRightX, bottomLeftY }; // bottom right corner

    const GLfloat texices2[] =
      { 0.0f, 0.0f,
        0.0f, 1.0f,
        1.0f, 1.0f,
        1.0f, 0.0f };

    for(int x=0;x<8;x++)
        if(texices[x] != texices2[x])
        {
            NSLog(@"Mismatch!");
            abort();
        } 
```

当我在该函数（底部）中执行以下代码行时

```
glVertexAttribPointer(_attributeTexturedTexCoords, 2, GL_FLOAT, GL_FALSE,
                      2*sizeof(GLfloat), texices2); 
```

我得到了预期的结果，但是如果我改为执行

```
glVertexAttribPointer(_attributeTexturedTexCoords, 2, GL_FLOAT, GL_FALSE,
                      2*sizeof(GLfloat), texices); 
```

我得到一个不好的结果。我不明白有什么区别。

**编辑：这是我调用这个函数的方式。**

```
[self privateConfigureRasterWithTexture:_atlasTexture1
                            bottomLeftX:0.0f
                            bottomLeftY:0.0f
                              topRightX:1.0f
                              topRightY:1.0f]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:24:32.367

没关系，我想我已经找到了（可能在 Martins 的同一时间）。看起来`glVertexAttribPointer`直到调用`glDrawElements`. 由于 my`glDrawElements`在该函数之外，因此堆栈内存正在被释放（但由于某种原因`texices2`仍然有效）。

我已经稍微重写了代码，以便在`texices`分配该类时分配一次堆，并且只是一遍又一遍地重用并在应用程序解除分配时释放。

# java - 启用连接池 Spring ibatis

> ID：13468019
> 
> 赞同：0
> 
> 时间：2012-11-20T06:55:07.673
> 
> 标签：java, performance, spring, ibatis

我在我的 java 应用程序中使用 spring Ibatis 进行数据库管理。我需要启用连接池以提高应用程序的性能。

我在 SqlMapConfig.xml 文件中添加了以下属性以启用连接池

```
 <transactionManager type="JDBC" commitRequired="false">
    <dataSource type="SIMPLE">
      <property name="JDBC.Driver" value="com.mysql.jdbc.Driver"/>
      <property name="JDBC.ConnectionURL" value="jdbc:mysql://localhost:3306/xxxxx"/>
      <property name="JDBC.Username" value="xxxxxx"/>
      <property name="JDBC.Password" value="xxxxxxx"/>
      <property name="Pool.MaximumActiveConnections" value="50"/>
      <property name="Pool.MaximumIdleConnections" value="20"/>

    </dataSource>
  </transactionManager> 
```

但我找不到任何可见的性能变化。是否需要进行任何其他更改或设置更改才能启用连接池？

在我的构建路径中添加了以下 JAR 文件

ibatis-2.3.4.726.jar ibatis2-common-2.1.6.589.jar ibatis2-dao-2.1.6.589.jar

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T09:08:49.177

尝试使用数据源类型 POOLED 而不是 SIMPLE。

```
<dataSource type="POOLED"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:55:23.447

我还注意到，您不能在启动期间设置最少的连接集。因此，测试开始时的 50 个同时请求都将尝试建立数据库连接。就像在单连接情况下一样。尝试使用带有 DataSource 的真实连接池实现。或者确保您在池已填满后测试您的性能。

尝试使用真正的池实现。JDBC 池非常流行，它避免了旧池实现的一些锁定问题。请参阅[http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)。

还要衡量您的性能并确保您确实在使用连接池。我已经看到在整个应用程序上共享一个连接，这也可以解释您正在经历的事情。

# android - Android中的高分辨率屏幕截图

> ID：13468020
> 
> 赞同：18
> 
> 时间：2012-11-20T06:55:17.583
> 
> 标签：android, screenshot

有没有办法获得活动中某个视图的**高分辨率屏幕截图。**

我想将我的 webview 的 html 内容转换为 PDF。为此，我尝试截取 webview 内容的屏幕截图，然后使用 itext 将其转换为 PDF。生成的 PDF 不是更清晰。

我的代码：

```
 protected void takeimg() {
    Picture picture = mWebView.capturePicture();
    Bitmap b = Bitmap.createBitmap(picture.getWidth(), picture.getHeight(),
            Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(b);
    picture.draw(c);

    // byte[] bt = b.getNinePatchChunk();

    // Bitmap b;
    // View v1 = mWebView.getRootView();
    // v1.setDrawingCacheEnabled(true);
    // b = Bitmap.createBitmap(v1.getDrawingCache());
    // v1.setDrawingCacheEnabled(false);

    FileOutputStream fos = null;
    try {
        File root = new File(Environment.getExternalStorageDirectory(),
                "Sample");

        if (!root.exists()) {
            root.mkdir();
        }
        String sdcardhtmlpath = root.getPath().toString() + "/"
                + "temp_1.png";

        fos = new FileOutputStream(sdcardhtmlpath);
        // fos = openFileOutput("samsp_1.jpg", MODE_WORLD_WRITEABLE);
        if (fos != null) {
            b.compress(Bitmap.CompressFormat.PNG, 100, fos);

            // fos.write(bt);
            fos.close();
        }
    } catch (Exception e) {
        Log.e("takeimg", e.toString());
        e.printStackTrace();

    }
}

protected void pdfimg() {
    Document mydoc = new Document(PageSize.A3);
    try {
        File root = new File(Environment.getExternalStorageDirectory(),
                "Sample");

        if (!root.exists()) {
            root.mkdir();
        }
        String sdcardhtmlpath = root.getPath().toString() + "/";
        mydoc.setMargins(0, 0, 0, 0);
        PdfWriter.getInstance(mydoc, new FileOutputStream(sdcardhtmlpath
                + PDFfilename));
        mydoc.open();
        Image image1 = Image.getInstance(sdcardhtmlpath + "temp_1.jpg");
        image1.scalePercent(95f);

        mydoc.add(image1);
        // mydoc.newPage();

        mydoc.close();
    } catch (Exception e) {
        Log.e("pdi name", e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T10:11:52.993

***更新：有关 op 原始问题的答案，请参阅编辑 3***

有两种选择：

1.  使用库将 HTML 转换为 PDF。这是迄今为止最好的选择，因为它将（可能）将文本保存为向量。

2.  获取 HTML 的高分辨率渲染并将其保存为 PNG（当然不是 PDF！）。

对于 HTML 到 PDF，[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)看起来是一个不错的选择，但它依赖于 Qt，而您无法在 Android 上真正使用它。还有其他一些库，但我怀疑它们是否能很好地渲染 PDF。

为了获得高分辨率的 web 视图，您可以尝试创建自己的`WebView`并调用`onMeasure(...)`并`onLayout(...)`传递适当的参数，以便视图非常大。然后调用`onDraw(myOwnCanvas)`，webview 将自己绘制到您的画布上，这可以由`Bitmap`using支持`Canvas.setBitmap()`。

您可能可以`WebView`使用类似的方式将状态复制到新的

```
screenshotterWebview.onRestoreInstanceState(mWebView.onSaveInstanceState()); 
```

或者甚至可以使用相同的`WebView`，只是暂时将其调整为大，`onDraw()`将其调整到您的画布，然后再次调整大小。但这变得非常hacky！

如果你把它做得太大，你可能会遇到内存问题。

# 编辑 1

我想到了第三种，正是你想要的选择，但它有点硬核。您可以创建一个`Canvas`写入 PDF 的自定义文件。事实上，这*几乎*很容易，因为底层`Canvas`是 Skia，它实际上包括一个 PDF 后端。不幸的是，您无法在 Android 上访问它，因此您基本上必须在 Android 上构建自己的副本（有说明），并复制/覆盖所有`Canvas`方法以指向您的 Skia 而不是 Android。请注意，有一种诱人的`Picture.writeToStream()`方法可以序列化 Skia 数据，但不幸的是，这种格式不能向前或向后兼容，因此如果您使用它，您的代码可能只能在少数几个版本的 Android 上运行。

如果/当我有完整的工作代码时，我会更新。

# 编辑 2

其实自己做“拦截”是不可能的`Canvas`。我开始这样做并经历了序列化所有函数调用的繁琐过程。有些你不能做，因为它们是隐藏的，但那些看起来并不重要。但是最后我开始序列化`Path`只是发现它是只写的。这对我来说似乎是一个杀手，所以唯一的选择是解释`Picture.writeToStream()`. 幸运的是，该格式只有两个版本在使用，而且几乎完全相同。

# 编辑 3 - 获得高分辨率`Bitmap`视图的非常简单的方法

好的，事实证明只是获得视图的高分辨率位图（可以是整个应用程序）是微不足道的。这是获得双分辨率的方法。显然所有的位图看起来都有点垃圾，但文本以全分辨率呈现：

```
View window = activity.getWindow().getDecorView()

Canvas bitmapCanvas = new Canvas();
Bitmap bitmap = Bitmap.createBitmap(window.getWidth()*2, window.getHeight()*2, Bitmap.Config.ARGB_8888);

bitmapCanvas.setBitmap(bitmap);
bitmapCanvas.scale(2.0f, 2.0f);
window.draw(bitmapCanvas);

bitmap.compress(Bitmap.CompressFormat.PNG, 0, myOutputStream); 
```

奇迹般有效。我现在已经放弃了获取带有矢量文本的 PDF 屏幕截图。这当然是可能的，但非常困难。相反，我正在努力获得一个高分辨率 PSD，其中每个绘制操作都是一个单独的图层，这应该更容易。

# 编辑 4

哇，这有点长，但是成功了！我生成了一个`.xcf`(GIMP) 和 PDF，其中每一层都是不同的画布绘图操作。它不像我预期的那么细粒度，但仍然非常有用！

实际上，我的代码只输出全尺寸的 PNG，我在 GIMP 中使用“作为图层打开...”和“自动裁剪图层”来制作这些文件，但当然，如果您愿意，您可以在代码中执行此操作。我想我会把它变成一篇博客文章。

下载[GIMP](http://concentriclivers.com/misc/android_layout_test.xcf)或[Photoshop](http://concentriclivers.com/misc/android_layout_test.xcf)演示文件（以 3 倍分辨率渲染）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T05:59:04.567

当您捕获视图时，只会捕获屏幕绑定（由于控制权重和 android 渲染管道）。

捕获屏幕截图以转换为 PDF 是一种棘手的方法。我认为两种方式是更合理的解决方案。

**解决方案#1**

编写一个解析器（很简单）将 webview 内容（即 HTML）转换为 iText 格式。
您可以参考这篇文章了解更多信息。
[http://www.vogella.com/articles/JavaPDF/article.html](http://www.vogella.com/articles/JavaPDF/article.html)

此外，要编写解析器，您可以使用 REGEX 并提供您自己的方法，如`parseTable`, `parseImage`, ...

**解决方案#2** *需要互联网*

提供一个 URL（或 web 服务）以使用 PHP 或 C# 将 HTML 转换为 PDF，其中包含许多不错的库。接下来，您可以将下载链接发送到客户端（Android 设备）。

因此，您还可以从服务器端向 PDF 动态添加一些标签、横幅等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T06:58:53.657

屏幕截图只不过是设备显示的图片，通常取决于您手机的绝对像素，如果您的手机是 480x800 屏幕截图将是相同的，并且通常适用于所有场景。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T07:00:04.697

当然，使用这个：

```
Bitmap bitmap;
View v1 = MyView.getRootView();
v1.setDrawingCacheEnabled(true);
bitmap = Bitmap.createBitmap(v1.getDrawingCache());
v1.setDrawingCacheEnabled(false); 
```

这里 MyView 是您需要截屏的视图。

# git - 跨合并丢失提交的奥秘

> ID：13468027
> 
> 赞同：21
> 
> 时间：2012-11-20T06:55:45.020
> 
> 标签：git, github

我在 Git 合并时遇到了这个奇怪的问题，我无法解释或分类。是否缺少提交。是不是合并出错了？是数据损坏了吗？这是存储库历史的样子：

```
master----\----commit A----cherry-picked changesets from topic---commit B--\----commit C----merge---
           \                                                                \              /
            topic-----------------------------------------------------------merge---------/ 
```

现在，我的问题是，当`master`合并到`topic`分支中时（使其与提交 A 和 B 保持同步），提交 B 引入的变更集不存在！如果提交 B 正在修改文件`foo`& `bar`，即使得到很多也不会显示这些文件随着合并而更改。文件中甚至没有任何冲突，`foo`并且`bar`

现在，当我`topic` 重新合并到时`master`，提交 B 被有效地反转，没有任何日志或反转的痕迹！

可能出了什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T08:04:55.427

```
master----\----commit A----cherry-picked changesets from topic---commit B--\----commit C----merge---
           \                                                                \              /
            topic-----------------------------------------------------------merge---------/
                                                                            ~~~~~
                                                                              ^
                                                                              + here you merged B in topic 
```

主题中已经有一个以提交 B 作为父级的合并。所以 B 完全合并到主题中，不会再合并到任何地方。

由于您没有主题更改，因此您显然在合并本身或后续提交中将它们还原为主题。这种反转是合并算法的常规提交，它不会合并到主控中。因此，当您将 topic 合并到 master 时，此提交的更改将被合并，恢复提交 B。

要从 B 取回更改，您必须：

*   查找并还原 B 对主题的更改的逆转。
*   选题B ( `git cherry-pick B`)。
*   重做合并，在新合并后重新设置主题并忘记原始分支，但由于这涉及倒带，您只能在控制所有具有该分支的存储库时执行此操作。

在你没有意识到的情况下，这些变化是如何被逆转的？如果您正在合并并遇到冲突，您可能会草率地使用“本地”解决它们，认为您还不需要这些更改。但是从 Git（或任何其他版本控制系统；3 路合并在所有这些系统中的工作方式相同）的角度来看，您已经看到了更改并拒绝了它们，所以您永远不会再得到它们，除非您手动重新应用它们。

冲突可能很容易由早期的樱桃挑选引起。虽然如果双方看起来相同，则算法不会声明冲突，因此如果您选择而不是合并，如果您修改一侧的樱桃选择代码，它将声明冲突。假设你有：

```
----\-- A -------- B' -- B2 --\
     \                         \
      D -- B -- E -----------merge 
```

where`B'`选择`B`和`B2`修改相同的代码`B`。在这种情况下，合并将看到一侧做`B`了，另一侧做了`B2`，因为樱桃选择被隐藏了，因此会声明and`B2`之间的冲突。如果你不仔细查看历史，你可能很容易解决这个错误。如果在选择提交时小心地将目标分支合并到源分支，则可以避免该问题，如下所示：`B``B2`

```
----\-- A --------\- B' -\- B2 --\
     \             \      \       \
      D -- B -- E --m1-----m2----merge 
```

哪里`m1`是正常合并，不涉及樱桃挑选，并`m2`用本地版本解决，因为它只有远程挑选的变化。这将确保进一步的合并将正常工作。

实际上应该可以为 git 编写一个合并策略来自动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:06:03.530

不知道为什么`B`不存在，但我建议重新`topic`设置基础`master`而不是合并`master`到`topic`.

您精心挑选的提交被复制到`master`中，并且在合并到已经存在相同提交`master`的分支 ( ) 时效果不佳。 当您在 :之上重新设置基准时，情况会有所不同：*不会*重播任何重复的提交。`topic`
`topic``master`

 *当然，rebase 的问题在于更改`topic`SHA1，如果您已经推`topic`送到上游仓库（并且其他人已经拉取`topic`），这将是有问题的。

一般来说，如“[什么是具有共享功能分支的正确 git 工作流？](https://stackoverflow.com/questions/12927566/what-is-the-right-git-workflow-with-shared-feature-branches/12927985#12927985) ”中所示，您会希望避免“反向合并”（`master`to `topic`）并主要仅以一种方式（`topic`to ）使用合并`master`。*

# c - 指针类型转换

> ID：13468033
> 
> 赞同：-1
> 
> 时间：2012-11-20T06:56:12.110
> 
> 标签：c

```
int main()
{
int *p,*q;
p=(int *)1000;
q=(int *)2000;
printf("%d:%d:%d",q,p,(q-p));
} 
```

输出

```
2000:1000:250 
```

1.我看不懂`p=(int *)1000;`行，这是否意味着p指向1000地址位置？如果我这样做`*p=22`，这个值是否存储在 1000 地址并覆盖现有值？如果它覆盖了这个值，如果另一个程序正在使用 1000 个地址空间怎么办？

1.  怎么样`q-p=250`？

**编辑：** 我试过`printf("%u:%u:%u",q,p,(q-p));`输出是一样的

```
int main()
{
int *p;
int i=5;
p=&i;
printf("%u:%d",p,i);
return 0;
} 
```

输出

```
3214158860:5 
```

1.  这是否意味着编译器使用的地址是整数？普通整数和地址整数之间没有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T06:59:01.237

> 这是否意味着 p 指向 1000 地址位置？

是的。

> 如果我这样做 *p=22

它正在调用未定义的行为 - 您的程序很可能会因段错误而崩溃。

请注意，在现代操作系统中，地址是虚拟的 - 您不能像这样覆盖其他进程的地址空间，但您可以尝试写入自己进程地址空间中的无效内存位置。

> qp=250怎么算？

因为指针算法是这样工作的（为了与数组索引兼容）。两个指针的差是它们的值除以 的差`sizeof(*ptr)`。类似地，添加到类型`n`指针会产生一个数值。`ptr``T``ptr + n * sizeof(T)`

[在指针上阅读此内容。](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)

> 这是否意味着编译器使用的地址是整数？

“编译器使用”部分甚至没有必要。地址*是*整数，它只是 C 中的一个抽象，我们有很好的指针来简化我们的生活。如果您在汇编中编码，您只需将它们视为无符号整数。

顺便说一句，写作

```
printf("%u:%d", p, i); 
```

也是未定义的行为 -`%u`格式说明符需要一个`unsigned int`，而不是指针。要打印指针，请使用`%p`：

```
printf("%p:%d", (void *)p, i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:10:40.703

的含义`p = (int *) 1000`是实现定义的。但是，是的，在典型的实现中，它会`p`指向 address `1000`。

之后做`*p = 22`确实会尝试存储`22`在 address `1000`。但是，在一般情况下，这种尝试会导致未定义的行为，因为您不能只将数据写入任意内存位置。您必须以一种或另一种方式分配内存才能使用它。在您的示例中，您没有努力在 address 分配任何东西`1000`。这意味着您的程序很可能会简单地崩溃，因为它试图将数据写入未正确分配的内存区域。（此外，在许多平台上，为了通过指针访问数据，这些指针必须指向正确*对齐*的位置。）

即使您以某种方式成功地编写了您`22`的地址`1000`，也不意味着它会以任何方式影响“其他程序”。在一些旧平台上它会（比如 DOS，举个例子）。但是现代平台为每个正在运行的程序（进程）实现了独立的虚拟内存。这意味着每个正在运行的进程都有自己独立的地址`1000`，它看不到其他程序的地址`1000`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T06:59:58.927

是的，和`*p=22`你一起写到 1000 地址。

`q-p`是 250 因为 int 的大小是 4 所以它是 2000-1000/4=250

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:06:44.247

将任意整数转换为指针是未定义的行为。任何事情都可能发生，包括什么都没有发生、分段错误或默默地覆盖其他进程的内存（在现代虚拟内存模型中不太可能）。

但是我们曾经在实模式 DOS 时代使用像这样的绝对地址来访问中断表和 BIOS 变量 :)

关于`q-p == 250`，是指针算术语义的结果。显然`sizeof int`是 4 在您的系统中。因此，当您将 1 添加到 int 指针时，它实际上会增加 4，因此它指向下一个`int`而不是下一个字节。此行为有助于数组访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:01:19.563

1.  是的，`p`是指向虚拟地址 1000。如果使用`*p = 22;`，很可能会出现分段错误；很多时候，整个前 1024 个字节对于读取或写入都是无效的。假设您有虚拟内存，它不会影响另一个程序；每个程序都有自己的虚拟地址空间。

2.  的值是两个地址的或或之间的`q - p`单元数。`sizeof(*p)``sizeof(*q)``sizeof(int)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-20T06:58:31.677

```
does this mean that p is pointing to 1000 address location? 
```

是的。但是这1000个地址可能属于其他一些进程的地址。在这种情况下，你非法访问了另一个进程的地址空间的内存。这可能会导致分段错误。

# android - Android 如何使用 int 和 int[] 参数从 Jni 调用 Java 方法？

> ID：13468041
> 
> 赞同：0
> 
> 时间：2012-11-20T06:56:57.793
> 
> 标签：android, java-native-interface

我想使用 int 和 int[] 参数从 Jni 代码中调用 Java 方法。为此，我进行了搜索并找到了以下示例。 [在 Android 中从 c++ 调用 java 方法](https://stackoverflow.com/questions/5198105/calling-a-java-method-from-c-in-android) 并且它与 String 参数一起工作得很好。但是在尝试使用 int 时，我遇到了问题。请帮我 。

**JNI代码：**

```
jstring Java_com_calljavafromjni_MainActivity_getJniString( JNIEnv* env, jobject obj){

    jstring jstr = (*env)->NewStringUTF(env, "RAJESH TEST from JNI ");
    jint sss=1111;
    jclass clazz = (*env)->FindClass(env, "com/calljavafromjni/MainActivity");

    jmethodID messageMe = (*env)->GetMethodID(env, clazz, "messageMe", "(Ljava/lang/String;)Ljava/lang/Integer;");
    jobject result = (*env)->CallObjectMethod(env, obj, messageMe, sss);

   const char* str = (*env)->GetStringUTFChars(env,(jstring) result, NULL); // should be released but what a heck, it's a tutorial :)
    printf("%s\n", str);

   return (*env)->NewStringUTF(env, str);

} 
```

Java 代码

```
public String messageMe(Integer text) {
    System.out.println( "aaaaaaaaaaaaaaaa "+text);

    return "test";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T14:17:35.867

我看不出`int[]`你的问题出在哪里，但`int`应该很容易解决。

您需要查看您的`GetMethodId()`调用，特别是方法签名参数（最后一个）。JNI 规范在此处提供了所有[类型签名](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp16432)的列表。当您最终也传递您的 int 数组时，这也应该对您有所帮助。

所以我们现在可以看到你的签名是：

`String messageMe(Integer text)`

但你告诉 JNI 是`(Ljava/lang/String;)Ljava/lang/Integer;`这样的：

`java.lang.Integer messageMe(String text)`

[类型签名](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/types.html#wp16432)告诉我们 an 的签名很`int`简单`I`，所以你的论点`GetMethodId()`应该是这样的：

`jmethodID messageMe = (*env)->GetMethodID(env, clazz, "messageMe", "(I)Ljava/lang/String;");`

我希望这会有所帮助。正如我之前所说，JNI 并不是最容易进入的东西，但答案确实都在[Specification](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html)中，你只需要非常努力地看。

**编辑：**我更正了我的签名。

基本上，您几乎就在那里 - 您只是在签名中以错误的方式获得了参数和返回值。应该是`(<arguments>)<return type>`。您还犯了一个简单的错误，即为 Integer 指定类，而不是原始类型。

# map - 在 sencha touch 中使用谷歌地图

> ID：13468043
> 
> 赞同：0
> 
> 时间：2012-11-20T06:57:03.147
> 
> 标签：map, sencha-touch-2

嗨，我在 sencha touch 2 中遇到了谷歌地图的问题。以下是代码..

```
 new Ext.application({
                    name:'Touch Start',
                launch:function(){
            var map = new Ext.Panel({
         fulscreen:true,
         items:[
         {
        xtype:'map',
        useCurrentLocation:true,

        }
 ]

         });
    this.viewport = map;
     }
  }); 
```

请帮助有谁知道这件事

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T12:25:06.573

首先，在您的问题结束之前，您并没有准确地告诉我们您的代码有什么问题。所以，我想你可能会面临两个不同的问题

**谷歌地图 API 是必需的**

请务必添加加载 Google Maps API 的脚本标记。[你可以在这里找到信息](https://developers.google.com/maps/documentation/javascript/tutorial)

**无布局**

您的主面板不包含任何布局，因此它不知道如何显示其项目

尝试将其添加到配置中：

```
layout: 'fit' 
```

这是一个异步加载 Google Maps API 的工作示例：

[http://www.senchafiddle.com/#MhAME](http://www.senchafiddle.com/#MhAME)

希望这有帮助

# objective-c - UIMenuController 未在子类 UITextView 中显示自定义 UIMenuItem

> ID：13468045
> 
> 赞同：0
> 
> 时间：2012-11-20T06:57:09.263
> 
> 标签：objective-c, ios, uitextview, uimenucontroller, uimenuitem

我有一个子类`UITextView`，`UIMenuItem`当用户按下并按住`UITextView`. 对于我的生活，我无法让我的自定义项目显示。这是我正在做的事情`viewDidLoad`：

```
UIMenuItem *customMenuItem1 = [[UIMenuItem alloc] initWithTitle:@"Keywords" action:@selector(insertKeywords)];
[[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObject:customMenuItem1]]; 
```

按住我的子类，`UITextView`我仍然只能看到“选择”和“全选”。

**我还需要做什么才能显示我的自定义项目？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T21:16:06.247

弄清楚了。我从未实现过该`insertKeywords`方法，因此`UIMenuItem`从未显示！

# jquery - jquery-UI 选项卡在其他组件上可见

> ID：13468046
> 
> 赞同：1
> 
> 时间：2012-11-20T06:57:14.300
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-tabs

我用了三个div。页眉，包装和页脚分别。标题位置是固定的。Wrapper 由几个组件组成，很少是 jqueryUI 选项卡。现在，当我向下滚动页面时，包装器以及所有内容开始隐藏，因为标题的位置是固定的，奇怪的是 UI 选项卡没有隐藏，而是它们重叠并导致设计失败，我尝试调整 CSS对于 UI 选项卡，没有用。我希望标签也位于标题下方，如果可以的话，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:17:16.307

进入显示选项卡的页面，打开视图源并查看选项卡的 z-index。将此添加到标题的 css 类中：

```
.headerClass{
position:relative;
z-index: [insert a value higher than tabs];
} 
```

# jquery - 在触发 click 事件时，首先触发 Radio Button selectedindexchanged 事件，然后触发 click 事件。

> ID：13468052
> 
> 赞同：1
> 
> 时间：2012-11-20T06:57:42.913
> 
> 标签：jquery, asp.net, selectedindexchanged, onclientclick

在编辑时，我正在分配单选按钮检查值，它被选中适合我的单选按钮值，但是当我单击更新按钮时，它首先触发单选按钮 **SelectedIndexChanged** 事件，然后触发更新按钮单击事件（单选按钮自动回发属性为真的）

***（在编辑按钮上，我为控件分配了值，为此我使用了完美完成的 jquery。当我单击更新按钮时，它首先触发单选按钮事件，然后触发更新单击事件。我必须避免单选按钮 SelectedIndexChanged 事件）***

对于分配，我正在使用此代码：

```
$('#ctl00_ContentPlaceHolder1_TabLTA_tbVouchers_rbtType_0').attr("checked", "checked"); 
```

# c# - 从 TaskManager 隐藏 Windows 应用程序进程

> ID：13468053
> 
> 赞同：2
> 
> 时间：2012-11-20T06:57:42.757
> 
> 标签：c#, winforms, taskmanager

我正在创建一个需要密码才能退出的应用程序。

所以我禁用了关闭按钮并从任务栏中删除。

我还可以从 TaskManager 应用程序选项卡中删除。但是当我在 TaskManagers Processes 选项卡中搜索时，它在其中可见，并且我能够结束进程，从而从那里结束应用程序。所以我需要从那里隐藏进程。

你能帮我做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:27:37.717

看这个话题： [如何防止任务管理器杀死我的程序？](https://stackoverflow.com/questions/1983564/how-can-i-keep-task-manager-from-killing-my-program) 有人要求同样的事情。

最佳答案：

> 像 Kaspersky 这样的 AV 程序可能使用驱动程序并使用钩子来防止终止。在您的情况下，我建议在进程上设置 ACL，这可以防止使用任务管理器或 cmdline 工具终止（如果用户没有调试权限）。当然，用户总是可以使用像 Process Explorer 这样的工具，获得进程的所有权，设置新的 ACL 和终止。
> 
> 如果用户不是管理员，则在不同的用户上下文中运行进程就足够了（例如，从服务启动它）。

这里有一些关于 msdn 的信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms684880 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684880(v=vs.85).aspx)

# textarea - 特殊字符未正确显示

> ID：13468060
> 
> 赞同：3
> 
> 时间：2012-11-20T06:58:25.827
> 
> 标签：textarea, special-characters

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:35:27.817

You are probably not using the Ascii apostrophe (') but some non-Ascii punctuation mark, such as the correct punctuation apostrophe (’). The problem arises because your HTML document is (probably) UTF-8 encoded but the browser interprets it as windows-1252 encoded. If there encoding is not declared in HTTP headers, adding the tag `<meta charset=utf-8>` into the `head` part would help. For general advice on encodings, see the W3C page [Character encodings](http://www.w3.org/International/O-charset.en.php).

The `textarea` element is meant for user input. For presenting your content, other elements (possibly styled with CSS) are usually a better choice. However, the encoding issue is the same.

# oracle - 创建而不是触发器时出现权限不足错误

> ID：13468061
> 
> 赞同：1
> 
> 时间：2012-11-20T06:58:29.397
> 
> 标签：oracle, plsql, oracle11g

我有一个视图，只要视图上有插入操作，我就需要在该视图上创建一个触发器。当我尝试创建一个代替触发器时，我收到一条错误消息，提示我没有足够的权限。是不是我在创建触发器的时候，选择权限就够了？如果不是，创建此触发器所需的权限是什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:02:47.253

> 要在您自己的架构或您自己的架构 (SCHEMA) 上的表上创建您自己的架构中的触发器，您必须具有 CREATE TRIGGER 系统权限。

[http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7004.htm)

# objective-c - iOS 6.0 方向支持，需要解决

> ID：13468067
> 
> 赞同：1
> 
> 时间：2012-11-20T06:58:36.200
> 
> 标签：objective-c, ios6, uiinterfaceorientation

我的应用程序中有 5 个控制器，我将这些控制器添加为 [window addSubview:navController.view]; 并将 5 个控制器的数组提供给 navController，即 UINavigationController。

请帮忙，关于如何在这 5 个视图控制器上应用方向支持？我已经尝试将 shouldAutoRotate 设置为 YES。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:09:30.100

更改您的代码：

```
[self.window addSubview:aController.view]; 
```

至

```
self.window.rootViewController = aController; 
```

还为方向支持添加以下方法

shouldAutorotate -return 是

supportedInterfaceOrientations- 返回 UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft;

# c - 在 C 中避免结构填充

> ID：13468068
> 
> 赞同：5
> 
> 时间：2012-11-20T06:58:42.283
> 
> 标签：c

除了使用 pragma pack aur 位字段外，我们如何避免 C 中的结构填充？有没有其他可用的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T07:03:35.920

在结构开始时打包最大的物品。将较小的物品打包到最后。

```
struct optimal_packing
{
     double d;
     int    i[4];
     short  j[3];
     char   s[24];
}; 
```

更准确地说，对齐要求最严格的项目需要最早出现（往往是指针和`double`或可能`long double`），以及最后对齐要求不太严格的项目（`short`和`char`）。如果组件的总长度加起来例如 35 个字节，您仍然可以使用尾部填充，但其中一种类型需要 8 字节对齐；会有5个字节的填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:32:05.417

避免结构填充的唯一完全可移植且可靠的方法是根本不使用真实成员`struct`。使用单个`char`数组成员，并定义访问其内容的宏：

```
struct paddingless {
    // char *p;
    // double d;
    // char c;

#define OFFSET_P 0
#define OFFSET_D (OFFSET_P + sizeof(char *))
#define OFFSET_C (OFFSET_D + sizeof(double))    
#define OFFSET_END (OFFSET_C + sizeof(char))    

    char data[OFFSET_END];
}; 
```

便携式 getter 和 setter 如下所示：

```
inline double paddingless_get_d(const struct paddingless *o) {
    double val;
    memcpy(&val, o->data + OFFSET_D, sizeof(val));
    return val;
}
inline void paddingless_set_d(struct paddingless *o, double val) {
    memcpy(o->data + OFFSET_D, &val, sizeof(val));
} 
```

如果您知道您的体系结构接受未对齐的访问，您可以摆脱使用强制转换定义的 setter：

```
#define paddingless_get_d(o) (*(double *) ((o)->data + OFFSET_D))
#define paddingless_set_d(o, val) (*(double *) ((o)->data + OFFSET_D) = (val)) 
```

这是不可移植的，但可能比替代方案更快。它适用于~~vax~~ x86 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:35:59.827

有一些事情需要考虑。首先，编译器添加填充是有原因的：它试图为其指定平台生成最佳的工作机器代码。所以通常填充是一件好事。除了要定义数据通信协议、硬件寄存器映射等情况外，字节数必须与特定规范匹配。

确实没有避免填充的标准方法。如果结构大小与其所有单个成员的总和不匹配，您可以实现的最好的结果是编译时断言给出错误。当断言失败时，您可以将编译器设置更改为块填充。最好：

`static_assert(sizeof(mystruct) == (sizeof(mystruct.x) + sizeof(mystruct.y) +...));`

如果您的 C 编译器中没有 static_assert（您需要一个兼容 C11 的编译器），那么使用一些“ct_assert”宏，您可以在此站点上找到很多内容。

但是，这并不能以可移植的方式解决问题，您将依赖于编译器设置。解决问题的唯一真正可移植的方法是这样的：

```
void mystruct_copy_from (uint8_t* raw_data, const mystruct_t* ms)
{
  memcpy(raw_data, &ms->x, sizeof(ms->x));
  raw_data += sizeof(ms->x);

  memcpy(raw_data, &ms->y, sizeof(ms->y));
  raw_data += sizeof(ms->y);

  // ... and so on
}

uint8_t protocol [EXPECTED_STRUCT_SIZE];
mystruct_copy_from (protocol, &mystruct);

send(protocol); // some data communication interface without padding 
```

# c++ - ANSI 到 Unicode 或向后转换：怎么可能？

> ID：13468073
> 
> 赞同：1
> 
> 时间：2012-11-20T06:59:12.890
> 
> 标签：c++, unicode, ansi

有几个函数可以将 ANSI 转换为 Unicode，反之亦然。这是那些函数`WideCharToMultiByte`, `MultiByteToWideChar`, `A2W`, `W2A`。

现在我不明白如何`A2W`工作`W2A`。**问题是，当您将某物转换为另一物时，您应该设置两个集合`A`，`B`以便集合中的每个元素都唯一地`A`映射到一个且只有一个元素`B`。**对此有几个问题：

1.  ANSI 是一个字节，而 UNICODE 至少是 2 个字节，这意味着并非 UNICODE 集中的所有元素都可以唯一地映射到 ANSI。

2.  Set`ANSI`和 set`Unicode`没有严格定义。我的意思是两者都有不同的编码。

因此，我的问题是：我们如何转换它们并确保我们没有破坏数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:18:25.933

正如其他人所提到的，没有像“ANSI”这样的字符集。不幸的是，Windows API 指`CP_ACP`的是“ANSI 代码页”，它指的是几个字符集之一，具体取决于您机器上选择的非 unicode 语言环境。

`CP_ACP`也就是说，关于您最初的问题，不，您不能总是在Unicode 编码之间往返。`CP_ACP`例如，在英语语言环境的 Windows 系统上，あ in 没有等价物。

发生这种情况时，如果`WideCharToMultiByte`已设置，则将替换没有等价的字符`lpDefaultChar`，并将其设置`*lpUsedDefaultChar`为 true。您可以传递一个指向布尔变量的指针，`lpUsedDefaultChar`并在调用后检查它，以查看您的字符串是否包含不可翻译的字符。`MultiByteToWideChar`但是，只要输入在您的本地代码页中有效，另一个方向就永远不会失败。要尝试检测无效文本，请传入`MB_ERR_INVALID_CHARS`标志并检查错误 - 也就是说，仅仅因为文本位于其他代码页中，并不意味着您会从中得到错误（很难判断文本是否实际上是无效的，或者只是胡言乱语）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:13:25.400

进行往返转换，然后将结果与原始结果进行比较。

如果您愿意，您可能可以调用转换函数，以便它们为未定义的结果抛出错误。

# android - 不同 API 的不同 UI

> ID：13468077
> 
> 赞同：2
> 
> 时间：2012-11-20T06:59:23.640
> 
> 标签：android, google-play

我正在寻找一种方法来为不同的 API 获得不同的 UI 设计。谷歌搜索给了我一个链接：http: [//developer.android.com/guide/google/play/publishing/multiple-apks.html#CreatingApks](http://developer.android.com/guide/google/play/publishing/multiple-apks.html#CreatingApks)

在此链接中，它指出最好为不同的 API 创建不同的 Apk，并且 Play 商店将负责为手机选择最好的 Apk。

这是唯一的方法还是有什么简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:03:10.820

无需构建多个 APK 即可实现此目的。

查看以下链接：http: [//developer.android.com/training/multiscreen/index.html](http://developer.android.com/training/multiscreen/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:08:43.653

如果你准备好编写更多代码，那是可能的，

如果您希望它使用不同的 UI 实现不同的 API 级别，您可以做的一件事是通过使用以下常量来检测 API 级别运行时：[`android.os.Build.VERSION.SDK_INT`](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK_INT). 它返回[这些值](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)之一。

现在根据这个版本，您可以将不同`layout xml`的内容设置为您的活动的内容**视图。**

**注意**：这有更多的维护危险。如果您想添加/删除任何 UI 元素，您必须修改应用程序中的所有布局 XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T07:12:24.200

尽可能不要使用不同的 APK；它造成了混乱。

例如，要使用 API 14 的特定布局，请使用文件夹`/res/layout-v14`而不是`/res/layout`. `/res/layout-v8`对于 API 8，等等……</p>

Android 将从与其最匹配的文件夹中获取资源。文件夹充当某种要求。因此，如果您有 API 15 并且没有`layout-v15`文件夹，它将从`layout-v14`. 如果你有`layout-v14`and `layout-v8`，如果它使用 API 10，它将使用`layout-v8`.

# iphone - 带有淡入淡出边框的清晰图像

> ID：13468078
> 
> 赞同：10
> 
> 时间：2012-11-20T06:59:23.750
> 
> 标签：iphone, objective-c, ios, core-graphics, cgcontext

我有两个`UIImageView`相同的框架。现在我正在使用[Core Graphics](http://developer.apple.com/library/ios/#documentation/coregraphics/reference/coregraphics_framework/_index.html)`imageView`擦除上一秒。我的问题是橡皮擦的边框非常锋利，我想要褪色的边框，即擦除上图后应该与下图相匹配。请参见下面的示例 - 我使用了这两个图像，下面是结果 - 正如您在此图像中看到的橡皮擦的边框非常清晰。我想让它像中间一样淡出，它应该是暗然后亮然后更亮等等，即我们看不到画笔的宽度和末端。这是我的 -[我的示例代码](http://dl.dropbox.com/u/74641080/FaceSwitching.zip)如果我的问题不够清楚，请告诉我。`imageView``imageView`
![在此处输入图像描述](../Images/c7572a68cc6ca7d9470b74f0874f54fb.png)![在此处输入图像描述](../Images/baac4a0f5428dea62b12bdffa5cf3f20.png)

![在此处输入图像描述](../Images/db4e421fbca18e0623dde8388203c053.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:52:08.833

你可以有一个像画笔这样的png图像（中间是暗的，角落是亮的），然后像这样在你的图像上绘制图像。

```
 [eraser drawAtPoint:location blendMode:kCGBlendModeDestinationOut alpha:1]; 
```

# c++ - sqlite c ++程序值仅在第一次第二次插入时才插入

> ID：13468079
> 
> 赞同：-3
> 
> 时间：2012-11-20T06:59:29.163
> 
> 标签：c++, sqlite

当我尝试插入值时，第一次一切正常，但第二次没有值，我该怎么办。？创建表后，我尝试插入工作正常的值，现在第二次如果我尝试插入它也不接受值，当我想选择它时它只显示第一列是用户 ID，但我希望整个列被显示

```
 #include <iostream>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>    
#include <iostream>
#include <sstream>
#include <string> 
 using namespace std;
#include "sqlite3.h"
 int main (int argc, const char * argv[]) {
int ch;
int userid;
string name;
 string sName;
int rc;
sqlite3 *db;
sqlite3_open("custom1.db", & db);
string createQuery = "CREATE TABLE IF NOT EXISTS items3 (uid INTEGER primary key ,name TEXT);";
std::stringstream insertQuery;
std::stringstream selectQuery;
std::stringstream removeQuery;
while(ch!=5){
cout<<endl<<"1:create table"<<endl<<"2:insert data"<<endl<<"3:select data"<<endl<<"4:remove"<<endl<<"5:exit"<<endl;
cout<<"enter choice"<<endl;

cin>>ch;
switch(ch) {
case 1 :
  sqlite3_stmt *createStmt;
  cout << "Creating Table Statement" << endl;
  sqlite3_prepare(db, createQuery.c_str(), createQuery.size(), &createStmt, NULL);
  cout << "Stepping Table Statement" << endl;
  if (sqlite3_step(createStmt) != SQLITE_DONE) cout << "Didn't Create Table!" << endl;
break;

case 2 :
  sqlite3_stmt *insertStmt;

  cout << "Creating Insert Statement" << endl;
cout<<"userid:";cin>>userid;cout<<"name:";cin>>name;
insertQuery << "INSERT INTO items3 (uid,name)"
               " VALUES (" << userid << ", '" << name<<"')";
  sqlite3_prepare(db, insertQuery.str().c_str(), insertQuery.str().size(), &insertStmt, NULL);
  cout << "Stepping Insert Statement" << endl;
if (sqlite3_step(insertStmt) != SQLITE_DONE) cout << "Didn't Insert Item!" << endl;
sqlite3_reset(insertStmt);
sqlite3_close(db);
break;
case 3:
  sqlite3_stmt *selectStmt;

     cout << "Creating select Statement" << endl;
cout<<"userid:";
cin>>userid;
selectQuery<<"select * from items3 where uid="<<userid;
    rc= sqlite3_prepare(db, selectQuery.str().c_str(), selectQuery.str().size(), &selectStmt, NULL);
     cout << "Stepping select Statement" << endl;
while (sqlite3_step(selectStmt) == SQLITE_ROW) {
    sName = (char*)sqlite3_column_text(selectStmt, 0);
   // Obj.Display(sName); //<== this is not display
    cout << "userid" << sName << endl;

  }
sqlite3_step(selectStmt);
     if (sqlite3_step(selectStmt) != SQLITE_DONE) cout << "Didn't Select Item!" << endl;
      else
     cout << "Success!" << endl;
sqlite3_close(db);
break;
case 4 :sqlite3_stmt *removeStmt;
cout<<"creating remove statement"<<endl;
cout<<"userid:";
cin>>userid;
removeQuery<<"delete from items3 where uid="<<userid;
sqlite3_prepare(db,removeQuery.str().c_str(),removeQuery.str().size(),&removeStmt,NULL);
cout<<"stepping remove statement"<<endl;
if(sqlite3_step(removeStmt)!=SQLITE_DONE)
cout<<"didn't remove item!"<<endl;
else
cout<<"success"<<endl;
sqlite3_close(db);
break;
}
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:06:26.103

因为您在每次插入后关闭数据库连接。

```
int main (int argc, const char * argv[])
{
    ...
    sqlite3 *db;
    sqlite3_open("custom1.db", & db);
    ...
    while(ch!=5)
    {
        ...
        switch(ch) {
        ...
        case 2:
           sqlite3_stmt *insertStmt;
           ...
           if (sqlite3_step(insertStmt) != SQLITE_DONE)
               cout << "Didn't Insert Item!" << endl;
           sqlite3_reset(insertStmt);
           sqlite3_close(db); // <-- ERROR HERE
           break; 
```

您在程序启动时打开一次数据库连接，因此您应该在程序结束时关闭一次数据库连接。

并回应 Emil 所说的话，看在上帝的份上，正确缩进你的代码！如果您的代码不是那么混乱，您可能已经发现了这一点。

# .net - 使用 RX 进行异常重试

> ID：13468087
> 
> 赞同：1
> 
> 时间：2012-11-20T07:00:39.597
> 
> 标签：.net, winforms, exception-handling, system.reactive

我正在尝试一个有趣的模式，使用 RX 扩展进行异常重试。我有以下代码。

```
Public Async Function InitializeCommunications() As Task
    Await Observable.Create(Of Unit)(Async Function(observer)
                                         MessageBox.Show("Please press reset")
                                         Await Me.Cockpit.LoadDriverToPLC()
                                         MessageBox.Show("Please press start")
                                         observer.OnNext(Unit.Default)
                                     End Function).Retry()
End Function 
```

该代码几乎可以完美运行。如果在 LoadDriverToPLC 中抛出异常，则重新订阅序列并重新运行主体，并要求用户再次按下重置。

这段代码只有一个问题。第一次通过 MessageBox 调用是正确的模态。这意味着它们位于主窗口上方，您无法通过意外单击主窗口来隐藏它们。但是，如果抛出异常并重试正文，则 MessageBox 调用不再是模态的。

我确定这与 RX 时间表有关。确保身体始终在相同的上下文中运行的诀窍是什么？

我打算稍后将这种模式包装起来，当我可以使它可靠时，像

```
Public Async Function InitializeCommunications() As Task
    Await RetryOn(of Exception)(Async Sub()
                                         MessageBox.Show("Please press reset")
                                         Await Me.Cockpit.LoadDriverToPLC()
                                         MessageBox.Show("Please press start")
                                End Sub)
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:36:56.213

解决方案似乎是捕获同步上下文并强制观察者收到正确上下文的通知，然后使用相同的上下文重试

```
Public Async Function InitializeCommunications(msgFeedback As Func(Of String, Task)) As Task
    Dim context = SynchronizationContext.Current
    Await Observable.Create(Of Unit)(
             Async Function(observer)
                 MessageBox.Show("Please press reset")
                 Await Me.Cockpit.LoadMessageLoopToPLC(111)
                 MessageBox.Show("Please press start")
                 observer.OnNext(Unit.Default)
             End Function).ObserveOn(context).Retry()
End Function 
```

另一种可能更好的方法是像这样在 Object 上创建一些扩展方法

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace FunctionalExtensions
{
    public static class ObjectMixins
    {
        public static T Retry<Ex, T>(this Object This, int count, Func<T> action)
        where  Ex : Exception
        {
            while (true)
            {
                try
                {
                    return action();
                }
                catch(Ex)
                {
                    if (count==0)
                    {
                        throw;
                    }
                    count--;
                }
            }
        }

        public static async Task<T> Retry<Ex, T>(this Object This, int count, Func<Task<T>> action)
        where  Ex : Exception
        {
            while (true)
            {
                try
                {
                    return await action();
                }
                catch(Ex)
                {
                    if (count==0)
                    {
                        throw;
                    }
                    count--;
                }
            }
        }

        public static void Retry<Ex>(this Object This, int count, Action action)
        where  Ex : Exception
        {
            This.Retry<Ex, bool>(count, () => { action(); return true; });
        }

        public static async Task Retry<Ex>(this Object This, int count, Func<Task> action)
        where  Ex : Exception
        {
            await This.Retry<Ex, bool>(count, async () => { await action(); return true; });
        }

        public static void Retry<Ex>(this Object This, Action action)
        where  Ex : Exception
        {
            This.Retry<Ex, bool>(() => { action(); return true; });
        }

        public static T Retry<Ex, T>(this Object This, Func<T> action)
        where Ex : Exception
        {
            while (true)
            {
                try
                {
                    return action();
                }
                catch(Ex)
                {
                }
            }
        }

    }
} 
```

它支持同步和异步操作。您可以像下面这样使用它在抛出异常之前重试 10 次

```
Public Async Function InitializeCommunications(msgFeedback As Func(Of String, Task)) As Task
    Await Retry(Of Exception)(10, 
        Async Function()
          MessageBox.Show("Please press reset on the NUM control unit then press ok here.")
          Await Me.Cockpit.LoadMessageLoopToPLC(111)
          MessageBox.Show("Please press start on control unit.")
       End Function)
End Function 
```

# c# - 在文件系统上缓存

> ID：13468090
> 
> 赞同：2
> 
> 时间：2012-11-20T07:01:02.263
> 
> 标签：c#, .net, caching

我正在使用 System.Runtime.Caching 进行内存缓存，但我也想要一个文件缓存。我遇到了一些麻烦，看看如何做到这一点。当然，我可以创建自己的简单方法。保存到光盘，如果存在则从光盘中获取。但是，我可以用 System.Runtime.Caching 做一些更聪明的事情吗？例如，获取项目的到期时间？在我的简单保存到磁盘缓存中，我真的不知道如何实现过期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:27:38.020

[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)是您可以在文件系统上实现这种缓存的关键。首先，您必须在文件系统上缓存一些对象。在其中包含到期时间因素以检查其到期时间（可以使用 Timer 实现），然后您只需要设计这些对象以支持序列化。

要了解有关序列化的更多信息，请使用以下参考：

1.  [什么是 [Serializable]，我应该什么时候使用它？](https://stackoverflow.com/questions/5877808/when-should-i-use-serializable-in-c)
2.  [.NET 序列化（使用 BinaryFormater、SoapFormatter 和 XmlSerializer）](http://www.dotneat.net/2009/03/22/NETSerializationUsingBinaryFormaterSoapFormatterAndXmlSerializer.aspx)

# javascript - 如何在 Jquery DatePicker 的 OnSelect 事件中获取 keyCode？

> ID：13468091
> 
> 赞同：1
> 
> 时间：2012-11-20T07:01:14.667
> 
> 标签：javascript, jquery, jquery-ui, events

基本上我想在用户按下回车键时停止日期选择

```
inputbox.datepicker({ onSelect: function (date, detail) {
if (detail.lastVal != '') {
if(KeyCode===13) return; // where do i get KeyCode Here
this.value = fromdate + ' to ' + date;
}
else {
fromdate = this.value;
}
},
dateFormat: 'dd-mm-yy'
}); 
```

我想在同一个输入框中选择两个日期，如果我按回车键，我的输入框也会搜索。

```
inputbox.on('keyup', function (e) {
if(e.keyCode===13){DoSearch();}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:07:11.583

明显的[谷歌搜索中的](https://www.google.com/search?q=jquery%20datapicker%20enter)[顶部链接](http://forum.jquery.com/topic/capture-return-enter-key-in-datepicker)

```
$('#myDate').datepicker().keydown(function(event) {
  if (event.which === $.ui.keyCode.ENTER) {
    event.preventDefault();
  }
}); 
```

# entity-framework - Entity Framework 5 - POCO 模板数据注解

> ID：13468092
> 
> 赞同：1
> 
> 时间：2012-11-20T07:01:16.630
> 
> 标签：entity-framework, validation, poco, t4, entity-framework-5

我下载了 EF5，它带有创建 POCO 类的 T4 模板。这对我有用（首先是数据库），但是没有像 [Required] 或 [MaxLength] 这样的基本数据注释可以很容易地来自 EDMX。

我的第一个问题是编辑 T4 模板，但我担心每次新的 EF 版本更新（模板更改时）都必须更新它，更不用说我确定这些注释的 T4 已经编码。

谁能指出我正确的方向，无论是现有的修改过的 EF5 模板还是从 EDMX 模型自动生成“基本”数据注释的其他方式？（我不是指 Fluent API）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T18:17:12.430

我知道有点晚了，但答案就在这里：

[T4 元数据和数据注释模板](http://t4metadatatemplate.codeplex.com/)

> 此 T4 模板处理从 Entity Framework 4 模型生成元数据类，并使用 [Required] 和 [StringLength] 等数据注释属性装饰属性。[DataType] 属性也会在适当的时候应用。它还将根据必填字段的属性名称生成 ErrorMessage 值。

# jetty - Jetty 8 作为使用 java service wrapper.on windows 的服务

> ID：13468095
> 
> 赞同：4
> 
> 时间：2012-11-20T07:01:28.283
> 
> 标签：jetty, java-service-wrapper

我正在尝试使用 JavaServiceWrapper 3.5.16 将码头设置为服务，并且我已经尝试了[JSW 网站上](http://wrapper.tanukisoftware.com/doc/english/integrate.html!)指定的所有四种集成方法，但我仍然面临这个问题：

我完全按照 JSW 的文档说明并配置`wrapper.conf`文件，我启动`jetty.bat`文件，它显示码头已启动。但是当我尝试从浏览器访问它时，我得到了

> 404 未找到错误

此外，当码头应该启动时，它不会在 webapps 文件夹中部署任何 .war 文件。

我`wrapper.conf`为第 4 种集成方法（WrapperJarApp）配置如下：

```
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperJarApp
wrapper.java.classpath.1=%WRAPPER_HOME%/lib/*.jar

wrapper.java.classpath.2=%JETTY_HOME%/lib/*.jar

wrapper.java.classpath.3=%JETTY_HOME%/start.jar
wrapper.java.library.path.1=%WRAPPER_HOME%/lib 
```

我应该在配置中更改什么才能让码头正确启动并在 webapp 文件夹中部署文件。

请帮忙！！

编辑：
`wrapper log file content`-

状态 | 包装 | 2012/11/20 13:43:55 | --> Wrapper 作为控制台启动

状态 | 包装 | 2012/11/20 13:43:55 | Java Service Wrapper 社区版 32 位 3.5.16 状态 | 包装 | 2012/11/20 13:43:55 | 版权所有 (C) 1999-2012 Tanuki Software, Ltd. 保留所有权利。
状态 | 包装 | 2012/11/20 13:43:55 | [http://wrapper.tanukisoftware.com](http://wrapper.tanukisoftware.com)
状态 | 包装 | 2012/11/20 13:43:55 |
状态 | 包装 | 2012/11/20 13:43:55 | 启动 JVM...
信息 | 虚拟机 1 | 2012/11/20 13:43:56 | WrapperManager：正在初始化...
信息 | 虚拟机 1 | 2012/11/20 13:43:56 | 2012-11-20 13:43:56.762:INFO:oejs.Server:jetty-8.1.3.v20120416
信息 | 虚拟机 1 | 2012/11/20 13:43:57 | 2012-11-20 13:43:56.965:INFO:oejus.SslContextFactory:启用协议 [SSLv2Hello, SSLv3, TLSv1] of [SSLv2Hello, SSLv3, TLSv1] 信息 | 虚拟机 1 | 2012/11/20 13:43:57 | 2012-11-20 13:43:56.965:INFO:oejs.AbstractConnector:Started SslSocketConnector@0.0.0.0:7443
信息 | 虚拟机 1 | 2012/11/20 13:43:57 | 2012-11-20 13:43:56.996:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8085

`wrapper.conf`-

```
 #encoding=UTF-8
# Configuration files must begin with a line specifying the encoding
#  of the the file.

#********************************************************************
# Wrapper License Properties (Ignored by Community Edition)
#********************************************************************
# Professional and Standard Editions of the Wrapper require a valid
#  License Key to start.  Licenses can be purchased or a trial license
#  requested on the following pages:
# http://wrapper.tanukisoftware.com/purchase
# http://wrapper.tanukisoftware.com/trial

# Include file problems can be debugged by removing the first '#'
#  from the following line:
##include.debug

# The Wrapper will look for either of the following optional files for a
#  valid License Key.  License Key properties can optionally be included
#  directly in this configuration file.
#include ../conf/wrapper-license.conf
#include ../conf/wrapper-license-%WRAPPER_HOST_NAME%.conf

# The following property will output information about which License Key(s)
#  are being found, and can aid in resolving any licensing problems.
#wrapper.license.debug=TRUE

#********************************************************************
# Wrapper Localization
#********************************************************************
# Specify the locale which the Wrapper should use.  By default the system
#  locale is used.
#wrapper.lang=en_US # en_US or ja_JP

# Specify the location of the Wrapper's language resources.  If these are
#  missing, the Wrapper will default to the en_US locale.
wrapper.lang.folder=../lang

#********************************************************************
# Wrapper Java Properties
#********************************************************************
# Java Application
#  Locate the java binary on the system PATH:
wrapper.java.command=java
#  Specify a specific java binary:
#set.JAVA_HOME=/java/path
#wrapper.java.command=%JAVA_HOME%/bin/java

# Tell the Wrapper to log the full generated Java command line.
#wrapper.java.command.loglevel=INFO

# Java Main class.  This class must implement the WrapperListener interface
#  or guarantee that the WrapperManager class is initialized.  Helper
#  classes are provided to do this for you.  See the Integration section
#  of the documentation for details.
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp 

# Java Classpath (include wrapper.jar)  Add class path elements as
#  needed starting from 1
wrapper.java.classpath.1=%JETTY_HOME%/lib/wrapper.jar
wrapper.java.classpath.2=%JETTY_HOME%/start.jar

# Java Library Path (location of Wrapper.DLL or libwrapper.so)
wrapper.java.library.path.1=%JETTY_HOME%/lib

# Java Bits.  On applicable platforms, tells the JVM to run in 32 or 64-bit mode.
wrapper.java.additional.auto_bits=TRUE

# Java Additional Parameters
wrapper.java.additional.1=wrapper.java.additional.1=-Djetty.home=%JETTY_HOME%
#wrapper.java.additional.2=-Djava.io.tmpdir=/tmp 

# Java Additional Parameters from File
wrapper.java.additional_file=

# Initial Java Heap Size (in MB)
#wrapper.java.initmemory=3

# Maximum Java Heap Size (in MB)
#wrapper.java.maxmemory=64

# Application parameters.  Add parameters as needed starting from 1
wrapper.app.parameter.1=org.eclipse.jetty.start.Main

#********************************************************************
# Wrapper Logging Properties
#********************************************************************
# Enables Debug output from the Wrapper.
# wrapper.debug=TRUE

# Format of output for the console.  (See docs for formats)
wrapper.console.format=PM

# Log Level for console output.  (See docs for log levels)
wrapper.console.loglevel=INFO

# Log file to use for wrapper output logging.
wrapper.logfile=../logs/wrapper.log

# Format of output for the log file.  (See docs for formats)
wrapper.logfile.format=LPTM

# Log Level for log file output.  (See docs for log levels)
wrapper.logfile.loglevel=INFO

# Maximum size that the log file will be allowed to grow to before
#  the log is rolled. Size is specified in bytes.  The default value
#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or
#  'm' (mb) suffix.  For example: 10m = 10 megabytes.
wrapper.logfile.maxsize=0

# Maximum number of rolled log files which will be allowed before old
#  files are deleted.  The default value of 0 implies no limit.
wrapper.logfile.maxfiles=0

# Log Level for sys/event log output.  (See docs for log levels)
wrapper.syslog.loglevel=NONE

#********************************************************************
# Wrapper General Properties
#********************************************************************
# Allow for the use of non-contiguous numbered properties
wrapper.ignore_sequence_gaps=TRUE

# Do not start if the pid file already exists.
wrapper.pidfile.strict=TRUE

# Title to use when running as a console
wrapper.console.title=Test Wrapper Sample Application

#********************************************************************
# Wrapper JVM Checks
#********************************************************************
# Detect DeadLocked Threads in the JVM. (Requires Standard Edition)
wrapper.check.deadlock=TRUE
wrapper.check.deadlock.interval=10
wrapper.check.deadlock.action=RESTART
wrapper.check.deadlock.output=FULL

# Out Of Memory detection.
# (Ignore output from dumping the configuration to the console.  This is only needed by the TestWrapper sample application.)
wrapper.filter.trigger.999=wrapper.filter.trigger.*java.lang.OutOfMemoryError
wrapper.filter.allow_wildcards.999=TRUE
wrapper.filter.action.999=NONE
#  Ignore -verbose:class output to avoid false positives.
wrapper.filter.trigger.1000=[Loaded java.lang.OutOfMemoryError
wrapper.filter.action.1000=NONE
# (Simple match)
wrapper.filter.trigger.1001=java.lang.OutOfMemoryError
# (Only match text in stack traces if -XX:+PrintClassHistogram is being used.)
#wrapper.filter.trigger.1001=Exception in thread "*" java.lang.OutOfMemoryError
#wrapper.filter.allow_wildcards.1001=TRUE
wrapper.filter.action.1001=RESTART
wrapper.filter.message.1001=The JVM has run out of memory.

#********************************************************************
# Wrapper Email Notifications. (Requires Professional Edition)
#********************************************************************
# Common Event Email settings.
#wrapper.event.default.email.debug=TRUE
#wrapper.event.default.email.smtp.host=<SMTP_Host>
#wrapper.event.default.email.smtp.port=25
#wrapper.event.default.email.subject=[%WRAPPER_HOSTNAME%:%WRAPPER_NAME%:%WRAPPER_EVENT_NAME%] Event Notification
#wrapper.event.default.email.sender=<Sender email>
#wrapper.event.default.email.recipient=<Recipient email>

# Configure the log attached to event emails.
#wrapper.event.default.email.attach_log=TRUE
#wrapper.event.default.email.maillog.lines=50
#wrapper.event.default.email.maillog.format=LPTM
#wrapper.event.default.email.maillog.loglevel=INFO

# Enable specific event emails.
#wrapper.event.wrapper_start.email=TRUE
#wrapper.event.jvm_prelaunch.email=TRUE
#wrapper.event.jvm_start.email=TRUE
#wrapper.event.jvm_started.email=TRUE
#wrapper.event.jvm_deadlock.email=TRUE
#wrapper.event.jvm_stop.email=TRUE
#wrapper.event.jvm_stopped.email=TRUE
#wrapper.event.jvm_restart.email=TRUE
#wrapper.event.jvm_failed_invocation.email=TRUE
#wrapper.event.jvm_max_failed_invocations.email=TRUE
#wrapper.event.jvm_kill.email=TRUE
#wrapper.event.jvm_killed.email=TRUE
#wrapper.event.jvm_unexpected_exit.email=TRUE
#wrapper.event.wrapper_stop.email=TRUE

# Specify custom mail content
wrapper.event.jvm_restart.email.body=The JVM was restarted.\n\nPlease check on its status.\n

#********************************************************************
# Wrapper Windows NT/2000/XP Service Properties
#********************************************************************
# WARNING - Do not modify any of these properties when an application
#  using this configuration file has been installed as a service.
#  Please uninstall the service before modifying this section.  The
#  service can then be reinstalled.

# Name of the service
wrapper.name=testwrapper

# Display name of the service
wrapper.displayname=Test Wrapper Sample Application

# Description of the service
wrapper.description=Test Wrapper Sample Application Description

# Service dependencies.  Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=

# Mode in which the service is installed.  AUTO_START, DELAY_START or DEMAND_START
wrapper.ntservice.starttype=AUTO_START

# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false

wrapper.ntservice.name=jetty
wrapper.ntservice.displayname=jetty deployment Server
wrapper.ntservice.description=jetty deployment Server 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:40:49.103

conf 文件中 wrapper.app.parameter.1 的值是多少？

我建议以下配置：

```
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperSimpleApp    
wrapper.java.classpath.1=%JETTY_HOME%/lib/wrapper.jar
wrapper.java.classpath.2=%JETTY_HOME%/start.jar
wrapper.java.library.path.1=%JETTY_HOME%/lib    
wrapper.java.additional.1=-Djetty.home=%JETTY_HOME%
#not necessary on windows 
#wrapper.java.additional.2=-Djava.io.tmpdir=/tmp    
wrapper.app.parameter.1=org.eclipse.jetty.start.Main 
```

希望这可以帮助你。

编辑：在我的码头主目录中，包装器二进制文件位于 bin 文件夹中，而 libwrapper.so (wrapper.dll) 和 wrapper.jar 位于 lib 目录中。所以我没有设置 WRAPPER_HOME ......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T10:41:03.173

启动 Jetty 也适用于 WrapperStartStopApp 集成方法。这是我的 jetty/solr 服务器的 wrapper.conf：

```
set.WRAPPER_HOME=D:/solr/solr_server4.1/service
set.JAVA_HOME=D:/Program Files/Java/jdk1.6.0_29
set.TMP=C:/TEMP

wrapper.working.dir=%WRAPPER_HOME%/..
wrapper.java.command=%JAVA_HOME%/bin/java
wrapper.java.mainclass=org.tanukisoftware.wrapper.WrapperStartStopApp

wrapper.java.classpath.1=%WRAPPER_HOME%/lib/wrapper.jar
wrapper.java.classpath.2=%WRAPPER_HOME%/../start.jar
wrapper.java.library.path.1=%WRAPPER_HOME%/lib

wrapper.java.additional.1=-Xmx1g
#wrapper.java.additional.2=-Djava.io.tmpdir=%TMP%

# StartStopApp START
wrapper.app.parameter.1=org.eclipse.jetty.start.Main
wrapper.app.parameter.2=0

# StartStopApp STOP
wrapper.app.parameter.3=org.eclipse.jetty.start.Main
wrapper.app.parameter.4=TRUE
wrapper.app.parameter.5=1
wrapper.app.parameter.6=--stop 
```

使用 start.ini 包含例如

```
STOP.PORT=8990
STOP.KEY=mysecretkey 
```

# iphone - OTA 注册：MDM 和 SCEP

> ID：13468096
> 
> 赞同：3
> 
> 时间：2012-11-20T07:01:36.413
> 
> 标签：iphone, ios, mdm, ota

**OTA的三个阶段**

阶段 1：通过简单的初始配置文件收集所需信息。

阶段 2：返回配置了 SCEP 有效负载的配置文件

阶段 3：返回带有 MDM 有效负载的配置文件

**我有两个问题：**

1.  scep 和 mdm 需要在同一个域上吗？

2.  我们如何从 scep 服务器获得控制权以执行阶段 3？我们是否需要配置 scep 以在证书交付后重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:33:43.127

1.  您的 SCEP 可以很容易地成为另一个域上的服务器。我正在运行一个设置，我的设备通过我的本地 MDM 服务器注册，但从具有不同域（实际上位于另一个国家/地区）的另一台服务器上的 SCEP 服务器接收到身份证书。

2.  设备从您的 SCEP 服务器成功接收到证书后，它将再次自动联系您的 MDM 服务器以完成注册。在我自己的情况下，我发现有必要将 MDM 有效负载与另一个 SCEP 有效负载打包，因为 MDM 有效负载具有强制性的 IdentityCertificateUUID 密钥。

我实际上是在尝试避免发送第二个 SCEP 有效负载，并且在寻找答案时偶然发现了您的问题。希望我的回答能对你有所帮助。

你读过苹果的[iPhone OTA 配置文件](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/iPhoneOTAConfiguration/iPhoneOTAConfiguration.pdf)吗？在实施过程中，这对我来说是非常宝贵的帮助，此外还有指向本文档中其他资源的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T05:00:46.697

1.  不，他们没有，因为当将带有 SCEP 有效负载的配置文件返回到设备时，SCEP 服务器 URL 包含在有效负载中。

2.  您不需要配置任何重定向。根据之前回答中提到的 iPhone OTA 配置文档，当设备完成 SCEP 注册时，它会向与第 2 阶段相同的 URL 发送请求，但这次它使用新获得的 SCEP 证书对请求进行签名。服务器验证请求的签名并了解该设备已完成 SCEP 注册并准备接收带有 MDM 有效负载的配置文件，因此服务器将其作为响应发送。总而言之，来自设备的 Phase 2 和 Phase 3 请求都发送到相同的 URL，但不同之处在于签署请求的证书： Phase 2 - Apple 颁发的设备证书 Phase 3 - SCEP 服务器颁发的证书

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T06:37:46.543

我很久以前就做过这个，但我可以说作为一个概述。请记住，在 SCEP 有效负载中，您已经提供了 MDM 服务器 url 。因此，一旦第二步（即 SCEP 注册）结束，设备将从有效负载中获取 MDM url，并将访问服务器。

请注意您在 SCEP 配置文件中提到的内容。

# python - 用于集合的 NOSQL 数据库（与字典/键值存储相对）？

> ID：13468098
> 
> 赞同：2
> 
> 时间：2012-11-20T07:01:37.397
> 
> 标签：python, couchdb, large-data, nosql

我正在尝试找到一个数据库来充当 Python 集。这是因为我的数据太大而无法存储在内存中。

我尝试使用 SQLite，但听说它可能对超过 10 GB 的数据有性能问题，所以我正在考虑尝试[CouchDB](http://couchdb.apache.org/)

问题是它似乎像字典一样工作，而不是像集合？

是否有作为 Python 集运行的数据库工具？也就是说，它只存储值而不是键值对？

（我必须用 Python 编写代码，所以我对易于使用 Python 的东西感兴趣）

编辑：

我会将它存储为一个巨大的集合，而不是几个小的集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:17:19.013

Redis可以存储Set数据类型：
[http ://redis.io/topics/data-types](http://redis.io/topics/data-types)

它有一个python客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:17:31.583

[根据如何实现set()](https://stackoverflow.com/questions/3949310/how-is-cpythons-set-implemented)的主要答案，键/值存储的行为类似于 a `dict`，但这几乎就是如何实现的。. 为什么不只使用一个小的虚拟值，然后对键进行设置操作？`set`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:30:30.067

为什么不使用设置值作为唯一键创建一个集合？

UPD：例如，您有这样的文件：

```
{
    _id: "someid",
    youset: {val1, val2, val3},
} 
```

您可以创建一个新集合，例如：

```
{
    _id: val1,
    owner: "someid"
}
{
    _id: val2,
    owner: "someid"
}
{
    _id: val3,
    owner: "someid"
}
... 
```

由于您不需要同时使用全部数据，因此无需将其嵌入到主文档中。

# tfs - TFS 2012 是否将源设置放在 SUO 文件中？

> ID：13468099
> 
> 赞同：2
> 
> 时间：2012-11-20T07:01:41.997
> 
> 标签：tfs

我想知道 TFS 2012 将其存储库设置放在哪里以用于解决方案。我在我的项目中发现了一堆隐藏的 .SUO 文件，当我删除它们时，它解决了我无法更改 TFS 源服务器的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:49:45.573

是的。虽然是二进制文件，但在使用记事本打开[.Suo 文件](http://msdn.microsoft.com/en-us/library/bb165909)时，您可以看到它包含有关最后一个 TFS 项目集合和与之关联的工作区的详细信息。您永远不应将 .Suo 和 .user 文件签入 TFS（或任何其他源代码控制）。

# url - 通配符 * 子域的 Google 优化

> ID：13468101
> 
> 赞同：0
> 
> 时间：2012-11-20T07:01:56.270
> 
> 标签：url, subdomain, web-search

大家早上好，

我创建了一个小型 cms 系统，用户可以在其中创建自己的网站。每个用户都会获得一个像 mywebsite.mycmsystem.com 这样的子域。这真的很好。这些网站是通过 php 脚本动态生成的，但通过 mod_rewrite 获得了静态 html url。所以一个 URL 有 mywebsite.mycmsystem.com/home_1234.html 而不是 mywebsite.mycmsystem.com/page.php?id=1234 我认为这对搜索引擎来说会更好。现在的问题是，谷歌不会真正从用户那里抓取所有网站。有没有办法告诉谷歌在哪里可以找到所有网站或类似的东西？我在网上搜索了几个小时，但找不到真正有用的东西。

最好的问候，卢卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:45:47.337

URL 中的数字不会导致您的索引问题。带有数字的 URL 被索引和抓取就好了。

告诉搜索引擎您的页面的最佳方式是[XML 站点地图](http://www.sitemaps.org/)。

# c# - 为什么 Freezables 已经被冻结并且在 Application.Resources 中存储时有一个空的 Dispatcher（与 Styles 相同）？

> ID：13468103
> 
> 赞同：6
> 
> 时间：2012-11-20T07:02:19.373
> 
> 标签：c#, .net, wpf, xaml

我对此感到非常困惑，它开始让我质疑我对 WPF 资源系统的整体理解

我有一个多窗口应用程序，其中每个 Window 派生对象在具有单独调度程序的单独线程上运行。

```
Thread t = new Thread(() => {
    Window1 win = new Window1();
    win.Show();
    System.Windows.Threading.Dispatcher.Run();
});
t.SetApartmentState(ApartmentState.STA);
t.Start(); 
```

我有一个 Dictionary1.xaml 资源字典，其中包含一个命名的 Style 对象（它只是将 Background 属性设置为 Red 并针对 TextBox）。在我的 App.xaml 中，我通过 ResourceDictionary.MergedDictionaries 集合引用 Dictionary1.xaml。在我的其他窗口的 XAML 中，我有一个静态资源到文本框控件中的样式键，它可以工作。

我可以打开多个窗口，但不应该出现跨线程错误吗？在其中一个窗口类的构造函数中，我这样做了：

```
Style s = (Style)TryFindResource("TestKey");
Console.WriteLine(((Setter)s.Setters[0]).Property.Name);    // no problem
s.Dispatcher == this.Dispatcher    // false 
```

由于 Style 对象是从 DispatcherObject 派生的，这是否意味着它只能由拥有它的线程访问？如果在 ResourceDictionary 中定义了一个对象，这是否意味着默认情况下它是一个静态实例？这怎么可能工作？为什么我没有收到跨线程错误？

（我错误地报告了一个我后来删除的关于由其他原因引起的跨线程错误的问题）

我对此感到非常困惑 - 我认为只有冻结的 Freezable 对象可以跨线程共享。为什么允许我访问其他线程上的 DispatcherObject？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T04:49:04.780

所以我终于有了一个答案——我挖掘了很多 .NET 框架代码并得出以下结论：

当资源字典是应用程序级字典、主题字典或只读时，存储在资源字典中的所有项目都将被“密封”

```
if (this.IsThemeDictionary || this._ownerApps != null || this.IsReadOnly)
{
    StyleHelper.SealIfSealable(value);
}

... 

internal static void SealIfSealable(object value)
{
ISealable sealable = value as ISealable;
if (sealable != null && !sealable.IsSealed && sealable.CanSeal)
{
    sealable.Seal();
}
} 
```

“密封”一个对象本质上使其不可变，并通过 ISealable 字典实现 - 实际上 Freezable 通过调用 Freeze() 来实现它的密封行为！Styles 也实现了它，它的实现防止了 Setters 或 Triggers 集合被修改。ISealable 由许多类实现！

```
public abstract class Freezable : DependencyObject, ISealable
public class Style : DispatcherObject, INameScope, IAddChild, ISealable, IHaveResources, IQueryAmbient 
```

更重要的是，我（到目前为止）见过的每个 WPF 类中的 Seal() 的每个实现都调用 DispatcherObject.DetachFromDispatcher() ，它将调度程序设置为 null！（Freeze() 在内部也调用它）

“密封”似乎实现了通常被宣传为 Freezable 独有的不变性行为，但实现 ISealable 的对象将表现出相同的行为并且是线程安全的 - Freezables 具有区分它的其他行为（例如子属性通知更改）

因此，总而言之，“密封”一个对象实际上可以跨线程共享，因为如果每个对象存在于应用程序级或主题资源字典或只读资源中，则它会自动与其调度程序分离字典

为了验证这个结论，反思 ResourceDictionary 并查看设置 ResourceDictionary 的逻辑父级（例如 FrameworkElement、FrameworkContentElement 或应用程序）的 AddOwner() 方法

这就是为什么可以从其他线程访问画笔和 Style 对象的原因，因为资源字典被合并到 Application.Resources 中，因此全部自动密封 - 毫不奇怪，将这些资源放在窗口级别会导致通常的跨线程异常.

我想您可以概括地说，ISealable 使 WPF 对象能够跨线程共享和只读，尽管从技术上讲，与 Dispatcher 分离并不是协议的要求（就像 DispatcherObjects 不需要在每个属性），因为从技术上讲，实现它自己的 Seal() 行为取决于每个对象，并且 ISealable 和 Dispatcher 之间没有直接关联

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T09:17:18.587

我也对你的“问题”感到很困惑。调度程序对象没有什么神奇之处，线程亲和性应该在继承自 DispatcherObject 的类中编码：每个不应该与多线程兼容的访问器都应该调用 DispatcherObject 提供的 base.VerifyAccess() 方法。这是 Style.Setters 属性的 getter 的定义方式：

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
public SetterBaseCollection Setters
{
    get
    {
        base.VerifyAccess();
        if (this._setters == null)
        {
            this._setters = new SetterBaseCollection();
            if (this._sealed)
            {
                this._setters.Seal();
            }
        }
        return this._setters;
    }
} 
```

所以在你的情况下，确实应该抛出一个异常......

也许您可以尝试调用 s.CheckAccess() 方法。您还可以尝试调度程序比较 Object.ReferenceEquals(A,B) 方法，以确保等于运算符没有被重载（尽管我没有发现任何重载......）。

这个主题很有趣，请随时通知我们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:47:39.277

很好的问题，有两点我想提一下，

第一点是，每次您请求样式时，它都会为您提供一个新的样式对象，因此样式中的对象永远不会在多个控件之间共享，因为样式就像包含样式信息的类的一部分。

第二点是，为什么调度程序应该抛出异常，因为您的调度程序总是在单线程上运行。因此，当您更改控件的调度程序时，线程关联规则使用调度程序并在 GUI 线程上呈现事物。

这个信息有帮助吗。

# java - 为什么会出现这个错误？- 加工

> ID：13468104
> 
> 赞同：0
> 
> 时间：2012-11-20T07:02:30.793
> 
> 标签：java, processing

谁能与我分享为什么我会收到此错误？基本上这是一个我想模拟基本植物生长的程序。我想这样做的方式是花瓣都存储在一个圆圈数组中。

```
Stem myStem;
Circle circles;

float scaleFactor=0.5;

void setup() {
  size(floor(400*scaleFactor), floor(800*scaleFactor));
  myStem = new Stem(200,800);

}

void draw() {

  background(150);
  smooth();
  Circle circles[];
  circles = new Circle[5];
  circles[0]  = new Circle(0, -40, 50, 50);
  circles[1]  = new Circle(0, -40, 50, 50);
  circles[2]  = new Circle(0, -40, 50, 50);
  circles[3]  = new Circle(0, -40, 50, 50);
  circles[4]  = new Circle(0, -40, 50, 50);

  for (int i = 0; i < circles.length; i++) {
   circles = ellipse(circles[i].c1, circles[i].c2, circles[i].c3, circles[i].c4);
   rotate(radians(72));
   circles[i] = Circle;
  }

  myStem.drawStem();

}

class Stem { 
  int initalloX=200;
  int initalloY=800;

  Stem(int tempInitalloX, int tempInitalloY) {
    initalloX = tempInitalloX;
    initalloY = tempInitalloY;

  }

  void drawStem() {
    background(#0DBADB);
    scale(scaleFactor, scaleFactor);
    stroke (12, 149, 11);
    fill (12, 149, 11);
    strokeWeight(10);
    line(initalloX, initalloY, initalloX, ((frameCount>250)?initalloY-500:initalloY-(2*frameCount)));
    //stem1
    if (frameCount>101) {
      noStroke();
      translate(initalloX, initalloY-200);
      scale(min((float)(frameCount-100)/100, 1), min((float)(frameCount-100)/100, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(1/min((float)(frameCount-100)/100, 1), 1/min((float)(frameCount-100)/100, 1));
      translate(-initalloX, -(initalloY-200));
    }
    //stem2
    if (frameCount>151) {
      noStroke();
      translate(initalloX, initalloY-300);
      scale(-min((float)(frameCount-150)/150, 1), min((float)(frameCount-150)/150, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(-1/min((float)(frameCount-150)/150, 1), 1/min((float)(frameCount-150)/150, 1));
      translate(-initalloX, -(initalloY-300));
    }
  }
}

class Circle {

  int c1 = 0;
  int c2 = -40;
  int c3 = 50;
  int c4 = 50;

  Circle(int tc1, int tc2, int tc3, int tc4) {
    c1 = tc1;
    c2 = tc2;
    c3 = tc3;
    c4 = tc4;
  }
 } 
```

在此先感谢...非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:27:50.060

除了已经指出的所有内容，请注意 ellipse() 是一个 void 方法，因此它不会返回任何内容。因此，像这样的行 `circle = ellipse(x,y,z,z)` 没有任何意义。您可能想使用存储在 ciclcle[i] 中的值来绘制椭圆，因此 `ellipse(circles[i].c1, circles[i].c2, circles[i].c3, circles[i].c4);` 无需分配它。我也不明白为什么要创建 5 个相等的圆圈。如果你的圆形对象只是存储数据，为什么要存储五次相同的数据呢？来电：

```
for (int i = 0; i < circles.length; i++) {
ellipse(0, -40, 50, 50);
rotate(radians(72));
} 
```

会有同样的效果。

除了在绘制结束时调用 background()（通过 myStem.drawStem()）将隐藏之前绘制的所有内容。然而，无需每秒重新创建数组并重新分配值 60 次，您可以将其移至设置。

我对您的代码进行了这些更改。它现在将编译。仍然在原点绘制“花瓣”，并且需要处理它们的填充/笔划，但至少它正在运行:)您可能想在您的圆形类中创建一个显示方法......更像我指出的在你发表的另一篇文章中。干杯！

```
Stem myStem;

//Circle circles; // double declaration
  Circle circles[]; // keeping the array one only

float scaleFactor=0.5;

void setup() {
  size(floor(400*scaleFactor), floor(800*scaleFactor));
  myStem = new Stem(200,800);

  //mpoved this to setup, no need to recreate each frame
  circles = new Circle[5];
  circles[0]  = new Circle(0, -40, 50, 50);
  circles[1]  = new Circle(0, -40, 50, 50);
  circles[2]  = new Circle(0, -40, 50, 50);
  circles[3]  = new Circle(0, -40, 50, 50);
  circles[4]  = new Circle(0, -40, 50, 50);
  // also smooth only needs to be called once
  // unless ther is a noSmooth() somewhere
  smooth();

}

void draw() {

  // moved this here
  background(#0DBADB);

  for (int i = 0; i < circles.length; i++) {
   ellipse(circles[i].c1, circles[i].c2, circles[i].c3, circles[i].c4);
   // note you may use this instead
   //ellipse(0, -40, 50, 50);
   rotate(radians(72));
  }

  myStem.drawStem();

}

class Stem { 
  int initalloX=200;
  int initalloY=800;

  Stem(int tempInitalloX, int tempInitalloY) {
    initalloX = tempInitalloX;
    initalloY = tempInitalloY;

  }

  void drawStem() {
    //background(#0DBADB); // this was hiding all other draws
    scale(scaleFactor, scaleFactor);
    stroke (12, 149, 11);
    fill (12, 149, 11);
    strokeWeight(10);
    line(initalloX, initalloY, initalloX, ((frameCount>250)?initalloY-500:initalloY-(2*frameCount)));
    //stem1
    if (frameCount>101) {
      noStroke();
      translate(initalloX, initalloY-200);
      scale(min((float)(frameCount-100)/100, 1), min((float)(frameCount-100)/100, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(1/min((float)(frameCount-100)/100, 1), 1/min((float)(frameCount-100)/100, 1));
      translate(-initalloX, -(initalloY-200));
    }
    //stem2
    if (frameCount>151) {
      noStroke();
      translate(initalloX, initalloY-300);
      scale(-min((float)(frameCount-150)/150, 1), min((float)(frameCount-150)/150, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(-1/min((float)(frameCount-150)/150, 1), 1/min((float)(frameCount-150)/150, 1));
      translate(-initalloX, -(initalloY-300));
    }
  }
}

class Circle {

  int c1 = 0;
  int c2 = -40;
  int c3 = 50;
  int c4 = 50;

  Circle(int tc1, int tc2, int tc3, int tc4) {
    c1 = tc1;
    c2 = tc2;
    c3 = tc3;
    c4 = tc4;
  }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:08:53.273

我想为声明一个数组学到了一些新东西。

至于出了什么问题，看起来您正在使用一个名为“circle”的 Circle 变量，并将其与 Circles 数组混淆，还称它为 circle，这可能会导致各种问题。这可能是您应该重点解决的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T07:23:42.020

猜...

类中有两种圆的定义

```
 Circle circles

        Circle[] circles 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T07:24:23.063

我认为这`circles[i] = Circle;`是错误。您不能将类型（类 Circle）分配给变量（即对象或类的实例）

# c# - C# 正则表达式

> ID：13468111
> 
> 赞同：0
> 
> 时间：2012-11-20T07:03:03.163
> 
> 标签：c#, regex

我想使用正则表达式从行中获取文本

例如：

```
 string xyz = "text/plain; charset=US-ASCII; name=\"anythingfile.txt\""; 
```

我想从那行获取**anythingfile.txt**

这意味着我想创建与模式**name=""**匹配的正则表达式，并在我尝试过的双引号之间获取字符串

```
regex re= new regex(@"name="\"[\\w ]*\""") 
```

但没有得到正确的结果....请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:07:29.580

试试这个正则表达式模式，

```
(?<=name="").*(?="") 
```

*   [前瞻和后瞻零宽度](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:09:27.807

你真的需要正则表达式吗？简单的字符串操作可能就足够了：

```
var NameValue = xyz.Split(';')
                   .Select(x => x.Split('='))
                   .ToDictionary(y => y.First().Trim(), y => y.LastOrDefault()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:10:31.367

最好的方法是使用命名组：

```
using System;
using System.Text.RegularExpressions;

class Program
{
    static void Main()
    {
        string xyz = "text/plain; charset=US-ASCII; name=\"anythingfile.txt\"";
        Match m = Regex.Match(xyz, "name=\"(?<name>[^\"]+)\"");
        Console.WriteLine(m.Groups["name"].Value);
        Console.ReadKey();
    }
} 
```

# stream - 通过 live555 代理 rtp 源流到 rtsp

> ID：13468117
> 
> 赞同：3
> 
> 时间：2012-11-20T07:03:59.510
> 
> 标签：stream, streaming, rtsp, rtp, live555

我有一个由 ffmepg 生成的 RTP 流，现在我需要使用 live555 重新流式传输到[RTSP](http://www.live555.com/liveMedia/ "直播555")。

有一种方法可以从 RTSP 重新流式传输到另一个 RTSP：[LIVE555 代理服务器](http://www.live555.com/proxyServer/)。

但是如何修改代理服务器以将 RTP 源重新流式传输到 RTSP（我可以获得 sdp 描述）？

IE

*   源流：rtp://192.168.1.10:55555
*   转发到：rtsp://:554/stream1

任何建议将被认真考虑。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T10:59:00.870

好的，我找到了解决方案。

继承`OnDemandServerMediaSubsession`类，使用`MPEG4ESVideoRTPSource`'MPEG4VideoStreamDiscreteFramer' 来获取 RTP 输入。

`DynamicRTSPServer`然后通过替换`createNewSMS`功能进行一些更改。

这个 RTP 代理开始工作了！

# javascript - 如何使用 jquery 或 javascript 获取所有必需的值

> ID：13468123
> 
> 赞同：-1
> 
> 时间：2012-11-20T07:04:58.693
> 
> 标签：javascript, jquery, kendo-ui

我有 2 个动态出现的剑道网格，网格中的行和列也动态出现。网格末尾只有一个保存按钮。

我的问题是当我单击保存按钮时，我想保存在网格中修改的所有值。希望你能理解我的问题。我怎么能做到这一点。谁能给我帮助

谢谢和问候， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:15:15.110

假设你有类似的东西：

```
var grid1 = $("#grid1").kendoGrid({...}).data("kendoGrid");
var grid2 = $("#grid2").kendoGrid({...}).data("kendoGrid");

$("#save_both").click(function() {
    grid1.saveChanges();
    grid2.saveChanges();
}); 
```

基本上，当单击按钮时，您会调用`saveChanges`两个网格的方法（ 有关更多信息，请参见[http://docs.kendoui.c](http://docs.kendoui.com/api/web/grid#savechanges)`saveChanges` ​​om/api/web/grid#savechanges ）。

# python - 更快的strptime？

> ID：13468126
> 
> 赞同：17
> 
> 时间：2012-11-20T07:05:15.623
> 
> 标签：python, performance, datetime, strptime

我有以“YYYY-MM-DD”格式读取大量日期的代码。解析所有这些日期，以便它可以添加一、两天或三天，然后以相同的格式写回，这大大减慢了速度。

```
 3214657   14.330    0.000  103.698    0.000 trade.py:56(effective)
 3218418   34.757    0.000   66.155    0.000 _strptime.py:295(_strptime)

 day = datetime.datetime.strptime(endofdaydate, "%Y-%m-%d").date() 
```

有什么建议可以加快速度（或很多）吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-20T07:08:28.230

因子 7 足够吗？

```
datetime.datetime.strptime(a, '%Y-%m-%d').date()       # 8.87us

datetime.date(*map(int, a.split('-')))                 # 1.28us 
```

**编辑：**显式切片的好主意：

```
datetime.date(int(a[:4]), int(a[5:7]), int(a[8:10]))   # 1.06us 
```

这使得因子 8。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-05-10T10:22:24.667

### Python 3.7+：`fromisoformat()`

从 Python 3.7 开始，`datetime`该类有一个方法`fromisoformat`. 需要注意的是，这也可以应用于这个问题：

### 性能对比`strptime()`

与 normal 相比，显式字符串切片可能使您的性能提高约 9倍，但**使用内置**`strptime`方法可以提高约90 倍**！****`fromisoformat`**

```
%timeit isofmt(datelist)
569 µs ± 8.45 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)

%timeit slice2int(datelist)
5.51 ms ± 48.9 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)

%timeit normalstrptime(datelist)
52.1 ms ± 1.27 ms per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

```
from datetime import datetime, timedelta
base, n = datetime(2000, 1, 1, 1, 2, 3, 420001), 10000
datelist = [(base + timedelta(days=i)).strftime('%Y-%m-%d') for i in range(n)]

def isofmt(l):
    return list(map(datetime.fromisoformat, l))

def slice2int(l):   
    def slicer(t):
        return datetime(int(t[:4]), int(t[5:7]), int(t[8:10]))
    return list(map(slicer, l))

def normalstrptime(l):
    return [datetime.strptime(t, '%Y-%m-%d') for t in l]

print(isofmt(datelist[0:1]))
print(slice2int(datelist[0:1]))
print(normalstrptime(datelist[0:1]))

# [datetime.datetime(2000, 1, 1, 0, 0)]
# [datetime.datetime(2000, 1, 1, 0, 0)]
# [datetime.datetime(2000, 1, 1, 0, 0)] 
```

* * *

Python 3.8.3rc1 x64 / Win10

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T10:31:13.913

对于 ISO 格式的无时区字符串，例如`"2021-01-04T14:30:03.123"`：：

```
datetime.datetime(int(d[:4]), int(d[5:7]), int(d[8:10]), int(d[11:13]), int(d[14:16]), int(d[17:19]), int(d[20:])) 
```

似乎比`strptime()`和运行得更快`fromisoformat()`。

# c# - 如何使用 c# 在 asp.net 网站项目中使用 Codebehind？

> ID：13468127
> 
> 赞同：1
> 
> 时间：2012-11-20T07:05:19.697
> 
> 标签：c#, asp.net, code-behind, asyncfileupload

我正在使用这个：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MainMaster.master" AutoEventWireup="true"
Codefile="Admin1.aspx.cs" Inherits="admin1" %> 
```

但我的网站功能之一在托管服务器中不起作用（asyncfileupload），但它在本地主机中工作......

不知何故，我知道它正在发生的事情是我正在使用`codefile`而不是`codebehind`所以我的查询是我如何使用`codebehind`我已经尝试过这个：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MainMaster.master" AutoEventWireup="true"
CodeBehind="Admin1.aspx.cs" Inherits="admin1" %> 
```

但它给出错误说无法加载`admin1`所以现在该怎么办？我怎样才能让我的网站正常工作？

**更新：-**

这是我的 .cs 文件代码

```
 public partial class admin1 : System.Web.UI.Page
{
   //all the codes
} 
```

# asp.net - Eval & AppSettings 在同一个表达式中？

> ID：13468128
> 
> 赞同：0
> 
> 时间：2012-11-20T07:05:39.647
> 
> 标签：asp.net, data-binding, expression, appsettings

这是我的标记：

```
<asp:GroupRadioButton ID="GroupRadioButtonYes" runat="server" Text='<%$Resources:RATResource,YesHeader%>'
Value='<%#Eval("MLTFQuestionId","{0}_1") %>' GroupName='<%#Eval("MLTFQuestionId")%>' 
Visible='<%# (int)Eval("MLTFAnswerTypeId") == 1 %>'
class="GroupSelection" /> 
```

我希望从 appsettings 驱动数字“1”。

这显然行不通

```
Visible='<%# (int)Eval("MLTFAnswerTypeId") == $ AppSettings: SingleSelect %> 
```

是否可以在同一个表达式中使用 AppSettings 和 Eval ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:13:32.123

你为什么不试试这样

```
<asp:Label ID="Label1" runat="server" 
     Text='<%# getDAta() %>'></asp:Label> 
```

代码隐藏

```
public string getDAta(0
{
  return "MLTFAnswerTypeId" + appsettingdatayouwant;
} 
```

# android - 失去对使用文本切换器移动下一个文本字段的关注

> ID：13468131
> 
> 赞同：3
> 
> 时间：2012-11-20T07:06:13.750
> 
> 标签：android

即时使用 TextSwitcher 移动到下一个文本字段它会自动完美地移动到下一个字段但是当光标移动到下一个字段时它仍然关注上一个文本字段此代码如下

```
public void textWatcher(){

        pin.addTextChangedListener(new TextWatcher() {

            @Override

            public void onTextChanged(CharSequence s, int start, int before, 

                            int count) {

                if(pin.getText().toString().length()==1)

                {

                    pin2.requestFocus();

                    pin.clearFocus();

                }

            }

            @Override

            public void beforeTextChanged(CharSequence s, int start, int count,

                    int after) {

                // TODO Auto-generated method stub

            }

            @Override

            public void afterTextChanged(Editable s) {

                // TODO Auto-generated method stub

            }

        });
} 
```

任何建议的帮助都会非常感激乌斯曼库尔德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:16:46.070

请用

pin2.setFocusable(true);

那么它将完美地工作。

请试试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:21:43.847

```
public void textWatcher(){
   pPin1.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
      int after) {
     // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable s) {
     if(pPin1.getText().toString().length()==1)
     {
      pPin2.requestFocus();
     }
     // TODO Auto-generated method stub

    }

   });
} 
```

请尝试此代码..它将完美运行。

# php - MYSQL/PHP 查询没有给出正确的值

> ID：13468132
> 
> 赞同：0
> 
> 时间：2012-11-20T07:06:13.733
> 
> 标签：php, mysql

我有一个从数据库中提取最大值的文本框。但它给出了错误的值。

你能帮忙弄清楚这里出了什么问题吗？

**基本信息功能：**

```
private function basicInformation() {
            // initialize variables
    $host = "localhost";
    $db_name = "test";
    $tbl_name = "ballpark_details";
    $username = "root";
    $password = "";

    // connect to database
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB"); # ORDER BY ballpark_details_id DESC
    $query = mysql_query("SELECT MAX(ballpark_details_booking_ref) as max_booking_ref FROM `ballpark_details`");
    //Getting the max ref_id
    $values = mysql_fetch_assoc($query);    
    while ($query !=-1 && $row = mysql_fetch_assoc($query)) {
    $max = $row['max_booking_ref'];
    }
    echo print_r($values, true);
    $html = "";
    $html .= '<fieldset id="basic-information" class="ui-widget">' . PHP_EOL;
    $html .= '<legend>Basic Ballpark Information</legend>' . PHP_EOL;
    $rowClass = "input-row";

    //$html .= $this->wrapLabelTextbox($this->inputBookingRef($values['max_booking_ref)']), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputBookingRef($max), $rowClass);
    //$html .= $this->wrapLabelTextbox($this->inputBookingRef(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputBank(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputRegion(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputDescription(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputNotes(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputStartDate(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputRequestedDeliveryDate(), $rowClass); #$this->inputEndDate()
    $html .= $this->wrapLabelTextbox($this->inputExpiryDate(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputURL(), $rowClass);
    $html .= $this->wrapLabelTextbox($this->inputCAR(), $rowClass);
    (strcmp($_GET["page"], "createballpark"))?
        $html .= $this->wrapLabelTextbox($this->inputProjectStatusEdit(), $rowClass) :
        $html .= $this->wrapLabelTextbox($this->inputProjectStatusCreate(), $rowClass);         
    $html .= '</fieldset>';
    return $html;
} 
```

**和我的 inputBookingRef 函数：**

```
private function inputBookingRef($values){ 
    //$values = $this->bookingRef;
    $html = "";
    $values++;
    $html .= '<label for="ref">Booking Ref: </label>';
    $html .= HTML::inputText("ref", 20, $values) . PHP_EOL;
    return $html;
} 
```

**在这一行：**

```
echo print_r($values, true); 
```

它显示最后一个最大值。但在我的文本框中，它只是给出数值 1。我不知道我的编码有什么问题。非常感谢任何帮助，所以我可以继续我的程序。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:24:56.993

每次打电话

```
mysql_fetch_assoc($query) 
```

它会给你结果的下一个值。查询中只有 1 行（如果这是真实的）。行值分配给 $values 并且您的 WHILE 循环根本不应该执行。

只留下其中一个陈述，应该没问题；）

评论后编辑：还有什么是 `$values++;`inputBookingRef **()**方法的目的

$values 可能是字符串类型 .. ++ 会使它变得有趣。

# objective-c - 您如何在没有用户共享/授予权限的情况下使用核心位置？

> ID：13468134
> 
> 赞同：3
> 
> 时间：2012-11-20T07:06:16.980
> 
> 标签：objective-c, ios, xcode, core-location

我已经在我的应用程序中实现了核心位置。

当用户允许在应用程序启动时共享位置时，一切正常。
但是当用户不分享他的位置时，“南大西洋”会显示在应用程序的位置字段中。

应该做些什么来避免这种情况以及当用户不共享他的位置时应该显示什么。

我正在使用此代码获取位置：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    [self.window makeKeyAndVisible];

    locationManager = [[CLLocationManager alloc] init];
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];

    CLGeocoder *ceo = [[CLGeocoder alloc]init];
    CLLocation *loc = [[CLLocation alloc]initWithLatitude:locationManager.location.coordinate.latitude longitude:locationManager.location.coordinate.longitude]; //insert your coordinates

    [ceo reverseGeocodeLocation: loc completionHandler:
     ^(NSArray *placemarks, NSError *error)
     {
         CLPlacemark *placemark = [placemarks objectAtIndex:0];
         NSLog(@"placemark %@",placemark);
         //String to hold address
         locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
         NSLog(@"addressDictionary %@", placemark.addressDictionary);

         NSLog(@"placemark %@",placemark.region);
         NSLog(@"placemark %@",placemark.country);  // Give Country Name
         NSLog(@"placemark %@",placemark.locality); // Extract the city name
         NSLog(@"location %@",placemark.name);
         NSLog(@"location %@",placemark.ocean);
         NSLog(@"location %@",placemark.postalCode);
         NSLog(@"location %@",placemark.subLocality);

         NSLog(@"location %@",placemark.location);
         //Print the location to console
         NSLog(@"I am currently at %@",locatedAt);
     }];

    return YES;
}

- (NSString *)deviceLocation
{
    NSString *theLocation = [NSString stringWithFormat:@"latitude: %f longitude: %f", locationManager.location.coordinate.latitude, locationManager.location.coordinate.longitude];
    return theLocation;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:11:55.083

您可以检查`[CLLocationManager authorizationStatus]`以验证用户是否允许使用类似的位置服务

```
int result = [CLLocationManager authorizationStatus]; 
```

它有返回值

```
typedef enum {
    kCLAuthorizationStatusNotDetermined = 0,
    kCLAuthorizationStatusRestricted,
    kCLAuthorizationStatusDenied,
    kCLAuthorizationStatusAuthorized
} CLAuthorizationStatus; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:12:18.197

有关如何获取用户位置的信息，请参阅[位置感知编程指南。](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)最重要的是，您必须创建[`CLLocationManager`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)位置管理器（就像您一样），然后启动位置服务（低功耗显着变化位置服务或标准位置服务）并等待该[`CLLocationManagerDelegate`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html%23//apple_ref/doc/uid/TP40007124)方法[`didUpdateLocations`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidUpdateLocations%3a)返回位置（或用于[`didFailWithError`](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intfm/CLLocationManagerDelegate/locationManager%3adidFailWithError%3a)报告错误，或者是因为应用授权失败，或者因为设备由于某种原因无法满足位置请求）。但是，您不能只从`CLLocationManager`. `didUpdateLocations`在可靠地开始使用经度和纬度之前，您必须等待服务调用。

[位置感知编程指南](http://developer.apple.com/library/ios/documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW9)将引导您完成所有这些，包括一些非常有用的代码示例。

# heroku - hover.com 和 Heroku.com 集成

> ID：13468135
> 
> 赞同：2
> 
> 时间：2012-11-20T07:06:22.050
> 
> 标签：heroku, dns

我一直在尝试了解如何设置我的 heroku 应用程序，以使用我购买的域。

阅读这篇文章[https://devcenter.heroku.com/articles/zerigo_dns#configure-dns-servers](https://devcenter.heroku.com/articles/zerigo_dns#configure-dns-servers) - 我不明白我应该在“配置 DNS 服务器”中做什么。

为了在 hover.com 中配置 DNS，究竟应该做什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:33:17.650

这些是[zerigo](http://www.zerigo.com)的具体说明。如果您想使用悬停，您只需按照本[指南](https://devcenter.heroku.com/articles/custom-domains)操作即可。

我应该注意，hover 并不真正以这种方式支持裸域，但您可以依赖其他服务。我曾经为此困扰过他们一次，他们说他们正在研究它，因此您将来可能可以将裸域悬停在悬停状态。

# java - 如何在 JavaFX Table Mouse-Over 的每个单元格上设置工具提示？

> ID：13468137
> 
> 赞同：19
> 
> 时间：2012-11-20T07:06:29.460
> 
> 标签：java, tooltip, render, javafx-2, cell

我是 JavaFX 的新手。我创建了一个`TableView`看起来像附加的图像。

当我鼠标悬停时，我想在表格的每个单元格上显示一个工具提示。我已经设置了两个`CellFactory`；一个在第一列显示复选框，一个在第二列显示图像。

所以显示工具提示一定不能影响这两个渲染的列。有没有办法在鼠标悬停时在表格的每个单元格上显示工具提示，并且不应该影响其他单个列单元格的渲染。

![我正在尝试复制的表的屏幕截图](../Images/21192f30e2fdc85adf166d9a55639553.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-09T19:55:41.807

当我需要某个列的单元格中的工具提示时，这是我所做的：

```
TableColumn<Person, String> nameCol = new TableColumn<Person, String>("Name");

nameCol.setCellFactory
 (
   column ->
    {
      return new TableCell<Person, String>()
       {
         @Override
         protected void updateItem(String item, boolean empty)
          {
             super.updateItem(item, empty);
             setText( item );
             setTooltip(new Tooltip("Life is short, make most of it..!"));
          }
       };
    }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-03T02:46:57.710

![工具提示在行动](../Images/3e2715386a9bc688da70a7b46e725678.png)

如果有人正在寻找简单的东西，这是一个通用的解决方案。它遵循与其他自定义单元工厂相同的约定。

只需创建一个新类并将[TooltippedTableCell](https://github.com/TurekBot/TooltippedTableCell/blob/master/src/TooltippedTableCell.java)粘贴到其中；然后设置所需列的自定义单元工厂，如下所示：

```
someColumn.setCellFactory(TooltippedTableCell.forTableColumn()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T06:36:27.967

只需创建工具提示并安装在您想要的节点上

```
 Cell c = new Cell();
    Tooltip.install(c, new Tooltip("text")); 
```

# c# - 在silverlight ie插件加载之前修改.xap文件

> ID：13468138
> 
> 赞同：0
> 
> 时间：2012-11-20T07:06:35.167
> 
> 标签：c#, c++, silverlight, debugging, visual-c++

Q1) 如何获得有关 .xap 文件已开始下载并完成的通知？

Q2) 是否有任何特定的 api 开始在 ie 环境中加载 xap 文件？

欢迎参考编程示例。

我需要这些信息才能在 silverlight 应用程序中进行文本翻译。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:55:10.430

答案 1：没有这样的事件来检查应用程序是否被下载。这取决于浏览器和网络速度。它被视为浏览器的简单文件。之前也有人问过这个问题 [浏览器如何处理 XAP 包的缓存？](https://stackoverflow.com/questions/6344496/how-do-browsers-handle-caching-of-xap-packages)

答案 2：不，没有特定的 API，它的浏览器执行下载并将其视为文件

您正在寻找什么类型的翻译？本土化？可能尝试 WebService API 来创造奇迹。

# tfs - 如何将 Fogbugz 项目导出到 TFS 2012 工作项目？

> ID：13468140
> 
> 赞同：0
> 
> 时间：2012-11-20T07:06:38.007
> 
> 标签：tfs, fogbugz, fogbugz-on-demand

我在fogbugz 中有一个项目和错误项目列表。我想将它们导出到 TFS，而不是使用 VS Fogzbug 工具。有没有可用的工具来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:01:01.440

您可以使用 TFS 集成平台，并为 Fogbugz 编写适配器，但这是一个昂贵的解决方案。此解决方案的好处是您可以保留历史记录。

另一个更便宜的解决方案是使用 TFS 中的 Excel 集成来导入 TFS 中的项目。

# assembly - LPC2103中的ARM7不支持CLZ吗？

> ID：13468141
> 
> 赞同：1
> 
> 时间：2012-11-20T07:06:39.613
> 
> 标签：assembly, embedded, arm, gnu-toolchain

我只在谷歌上搜索了几个小时左右，但如果有人对此有一个快速的答案，我想回到编程。这是我的错误：

```
jcomeau@intrepid:~/rentacoder/jcomeau/armmite$ make
/usr/local/bin/preasm.tcl minimal.asm minimal.s 
"/usr/arm-linux-gnueabi/bin/as" -mcpu=arm7tdmi-s -mapcs-32 \
     -gstabs -ahls=minimal.lst  -o minimal.o minimal.s
minimal.s: Assembler messages:
minimal.s:183: Error: selected processor does not support `clz r0,r0'
make: *** [minimal.o] Error 1
rm minimal.s 
```

我也尝试过使用 -mcpu=arm7tdmi，这是 Coridium 用于我正在使用的板子 ARMmite v.2 的代码的。但他们的代码中显然没有任何 clz 指令。我的问题是，它*是否*可以工作，只是我的汇编程序没有意识到它，或者这个芯片真的没有实现CLZ？

[更新：根据[http://www.keil.com/dd/chip/3974.htm](http://www.keil.com/dd/chip/3974.htm)， arm7tdmi-s 是正确的架构规范]

[进一步更新：我手动编写了指令，`.word 0xe16f0f10`而不是预期的未定义指令错误，我得到了数据中止。奇怪的。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:42:28.363

该`CLZ`指令是在 ARMv5 中引入的。ARM7TDMI 和 ARM9 没有此指令。

# android - 如何从 WordPress 网站获取 JSON 响应？

> ID：13468145
> 
> 赞同：0
> 
> 时间：2012-11-20T07:06:46.370
> 
> 标签：android, wordpress

我在我的网站中使用 WordPress。我从服务器得到的响应是 HTML。

我需要做什么才能获得 JSON 格式的服务器响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:37:07.020

看看这里[Android HTTP Request for CakePHP URL](https://stackoverflow.com/questions/13267806/android-http-request-for-cakephp-url/13268739#13268739)，它不完全一样，但要接近你的问题。

# batch-file - BAT 命令删除特定子文件夹

> ID：13468151
> 
> 赞同：0
> 
> 时间：2012-11-20T07:07:25.727
> 
> 标签：batch-file, cmd

我有一个跟随 bat 命令，当我给出相应的文件扩展名时，它将删除不必要的文件

```
@ECHO OFF
REM Change the path and the extension...
DEL /s /f /q "C:\Users\dell\Desktop\test\*.pdf"
DEL /s /f /q "C:\Users\dell\Desktop\test\*.csv"
ECHO Are you sure ? Press a key to continue.
PAUSE > NUL
ECHO Done
PAUSE 
```

我需要插入特定的子文件夹以与文件一起删除。假设特定的子文件夹名称可能是**abc**

任何人都可以帮助我如何插入“删除特定子文件夹”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:01:29.663

使用该`RD`命令删除（子）目录。由于目录可能不为空，您可能需要添加`/S`开关以删除整个目录树。而且由于您还将在批处理脚本中使用该命令，因此您可能还需要`/Q`切换，以避免出现确认提示。

因此，将这样的命令添加到您的脚本中：

```
RD /S /Q "C:\Users\dell\Desktop\test\Specific\Subfolder" 
```

# ant - 从 ant build.xml 中的本地 lib 目录加载 JSCH 库

> ID：13468153
> 
> 赞同：0
> 
> 时间：2012-11-20T07:07:43.880
> 
> 标签：ant

我可以在将 jsch-0.1.44.jar 添加到 ant/lib 目录时执行 SCP 任务。但是我想从本地 lib 目录加载并将其添加到类路径中。请您帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:32:02.667

内置任务用于自定义类路径的选项有限。

1) 将您的自定义 jars 放在 ${user.home}/.ant/lib 目录中

```
/home/mark/.ant
└── lib
    ├── ivy.jar
    └── jsch.jar 
```

这是我安装 jar 的地方，这些 jar 是我对标准 ANT 发行版的个人扩展

2) 在命令行中提供 jar 目录的位置

```
ant -lib /path/to/jsh/jar 
```

3）您可以尝试按照此处的建议声明一个新任务：

*   [为内置的 ant 任务指定类路径](https://stackoverflow.com/questions/2536140/specifying-classpath-for-built-in-ant-tasks)

# css - 如何在所有浏览器中设置最小高度

> ID：13468156
> 
> 赞同：1
> 
> 时间：2012-11-20T07:08:05.713
> 
> 标签：css

我的问题是我需要在不同的浏览器中设置低于最小高度

```
>min-height: 154px in firefox
>min-height: 180px in chrome
>min-height: 135px in opera 
```

是否有任何代码可以为我提供通用解决方案。或像 -moz- 和 -webkit- 这样的伎俩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:33:54.250

我的建议是修复你的 CSS，这样你就不需要这样做了。该浏览器应该几乎相同地显示您的页面，因此您可能正在做一些非常奇怪的事情。

话虽如此，最简单的解决方案（如果您绝对肯定的话）需要这样做是使用 CSS hack 来针对不同的浏览器。有关示例，请参见此处：http: [//css-tricks.com/snippets/css/browser-specific-hacks/](http://css-tricks.com/snippets/css/browser-specific-hacks/)

# .net - 在非当前 AppDomain 上使用 DefineDynamicAssembly 动态创建程序集时出现异常

> ID：13468157
> 
> 赞同：6
> 
> 时间：2012-11-20T07:08:16.880
> 
> 标签：.net, dynamic, reflection, .net-assembly, reflection.emit

我想在集成测试中动态创建程序集，以测试某些程序集操作类。如果我使用以下代码创建测试程序集：

```
var domain = AppDomain.CurrentDomain;

var builder = domain.DefineDynamicAssembly(
    new AssemblyName(assemblyName),
    AssemblyBuilderAccess.Save,
    directory);

builder.Save(fileName); 
```

然后一切正常，程序集在所需位置创建，但作为其中的一部分，它们也被加载到 current `AppDomain`，这是我不想要的。

所以我想使用单独的创建程序集`AppDomain`：

```
var domain = AppDomain.CreateDomain("Test");

... 
```

但是运行代码会在该行引发异常`var builder = domain.DefineDynamicAssembly(...);`：

> System.Runtime.Serialization.SerializationException：在程序集“mscorlib，版本=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中键入“System.Reflection.Emit.AssemblyBuilder”未标记为可序列化。

我不知道这与调用`DefineDynamicAssembly`non-current有何关系`AppDomain`。我在网上找到的主要是关于在不同的域中执行程序集。也许我在这里尝试做的事情太具体、太高级甚至根本不推荐，但它可以让我测试我们所有的汇编操作代码。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:05:54.367

我通过在另一个 AppDomain 中执行代码来让它工作，就像[建议](https://stackoverflow.com/questions/13468157/exception-while-dynamically-creating-assemblies-using-definedynamicassembly-on-n#comment18465427_13468157)的那样。

```
var appdomain = AppDomain.CreateDomain("CreatingAssembliesAndExecutingTests", null,
   new AppDomainSetup { ApplicationBase = AppDomain.CurrentDomain.SetupInformation.ApplicationBase });

appdomain.DoCallBack(() =>
{
   var assembly = AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName("temp"), AssemblyBuilderAccess.Run);
   var module = assembly.DefineDynamicModule("DynModule");
   var typeBuilder = module.DefineType("MyTempClass", TypeAttributes.Public | TypeAttributes.Serializable);
}); 
```

备注您必须在 AppDomainSetup 上指定 ApplicationBase 才能在另一个 AppDomain 中找到委托。

# java - 在适用于 Android 的 Google 云消息传递中

> ID：13468159
> 
> 赞同：1
> 
> 时间：2012-11-20T07:08:24.257
> 
> 标签：java, android, push-notification, google-cloud-messaging, sencha-touch

在我的 android 应用程序中，我需要做推送通知，所以我搜索了它，我在 android 指南中找到了 Google Cloud Messaging，[一步一步的过程](http://developer.android.com/guide/google/gcm/gs.html)。

在编写 Android 应用程序时

第 3 步：编写 my_app_package.GCMIntentService 类

我需要创建从 GCMBaseIntentService 扩展的 GCMIntentService 类，我需要在 GCMBaseIntentService 和 onRegistered 方法中实现抽象方法（onRegistered、onUnregistered 等），我应该将 regid 发送到您的服务器，以便它可以使用它向设备发送消息。

我从[这里获得了适用于 Android 的 Cordova GCM 推送通知插件示例](https://github.com/marknutter/GCM-Cordova)

1）在那里我看到他们实现了 GCMIntentService 类（在 src/com/cordova2/gcm），在那个类中，看到 onRegistered 方法，在获取 json 之后我不知道他们为什么在第 39 行调用 GCMPlugin.sendJavascript( json )？ .

2）如何使用谷歌云消息来开发推送通知的客户端和服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:35:29.650

检查以下链接以获取带有服务器代码的 Android 推送通知 = [http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

# java - 强制至少一组

> ID：13468162
> 
> 赞同：6
> 
> 时间：2012-11-20T07:08:38.860
> 
> 标签：java, regex

我对 Java 中的正则表达式有疑问，尽管我认为这也可能适用于其他语言。

我有一个正则表达式来解析用户可能输入类似`4d 8h 42m`. 当然，我想让它尽可能灵活，这样用户就不必输入所有数字（`15h`例如仅输入一个数字）。

关于这一点，我的正则表达式非常令人满意：`(?:([\d]+)d)?[\s]*(?:([\d]+)h)?[\s]*(?:([\d]+)m)?`

现在我的问题是它也会匹配一个空字符串，尽管我希望它确保至少一个时间单位被填充。

当前的解决方案是任意选择其中一个为强制性的，但我对此并不满意，因为我试图避免强制性字段。

另外，做一个*或*不适合我，因为我必须在之后解析正则表达式时测试组，而不是仅仅访问 group(1) 几天， group(2) 几个小时，......（这就是我的想法of 当谈到*or*时`(?:([\d]+)d[\s]*(?:([\d]+)h)?[\s]*(?:([\d]+)m)?|(?:([\d]+)d)?[\s]*([\d]+)h[\s]*(?:([\d]+)m)?|(?:([\d]+)d)?[\s]*(?:([\d]+)h)?[\s]*([\d]+)m)`，被理解为*强制天数或强制小时数或强制分钟数*）。

那么我如何修改我的正则表达式以确保我现在非捕获组中的至少一个不为空，无论是几天、几小时还是几分钟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T07:13:52.327

您可以使用前瞻断言来确保至少出现`d` `h`or之一`m`。

```
(?=.*[mhd])(?:(\d+)d)?\s*(?:(\d+)h)?\s*(?:(\d+)m)? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:13:23.750

正如 OmnipotentEntity 所建议的那样，您可以使用积极的前瞻来确定数字后面是否跟着a`d`或。`m``h`

另一种写法可能是：

```
(\d+(?=[dhm])[dhm]\s*){1,3} 
```

这将匹配以下内容：

```
4d 8h 42m
3d
15h
28m
12d 24m
2h 55m
7d  11h  24m
5d2h5m 
```

# javascript - 我可以在打字稿中声明一个静态私有函数吗？

> ID：13468166
> 
> 赞同：1
> 
> 时间：2012-11-20T07:08:45.893
> 
> 标签：javascript, typescript

我有以下代码：

```
module Dialog {
    export class Modal {
        static createAccessModal(link: Link) {
            createModal(link);
        }
        static createAdminModal(link: Link) {
            link.Modal.MaxHeight = 600;
            link.Modal.Width = false;
            createModal(link);
        }
        static private createModal(link: Link) {

            ...
        }
    }
} 
```

我不想被允许直接调用 createModal 所以我试图将其设为私有。当我使用智能感知时，它会显示一个小锁符号，但是当我使用它时它不会给出任何错误。有没有其他方法可以做到这一点。这是我调用该函数的方式：

```
Dialog.Modal.createAccessModal(link); // I want this to be allowed
Dialog.Modal.createModal(link); // I don't want this to be allowed 
```

顺便说一句，我对所有东西都使用静态函数，因为这些函数除了在屏幕上创建对象之外什么都不做，然后对象会照顾自己，因为它们有自己的提交按钮等。这是合理的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:15:58.080

```
module Dialog {
    export module Modal {
        export function createAccessModal(link: Link) {
            createModal(link);
        }
        export function createAdminModal(link: Link) {
            link.Modal.MaxHeight = 600;
            link.Modal.Width = false;
            createModal(link);
        }
        function createModal(link: Link) {

            ...
        }
    }
} 
```

# javascript - 让手风琴js更好

> ID：13468168
> 
> 赞同：0
> 
> 时间：2012-11-20T07:08:47.200
> 
> 标签：javascript, jquery, accessibility, accordion, jquery-ui-accordion

我已经使用 jQuery 编写了一个简单的手风琴常见问题解答列表，但正在寻找一些关于如何更好地改进它的反馈。

我的标记看起来像这样：

```
<ul class="faqs">
   <li><h4>Question</h4>
       <div class="answer">answer</div>
   </li>
   <li><h4>Question</h4>
       <div class="answer">answer</div>
   </li>
   <li><h4>Question</h4>
       <div class="answer">answer</div>
   </li>
</ul> 
```

我的 JS 看起来像这样：

```
var question = $('.faqs h4');
question.click(function() {
    $(this).next('div').slideToggle('fast');
}); 
```

所有 .answer div 在页面加载时都设置为 display:none，但如果禁用 js，则默认显示所有 .answer div。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:14:03.823

我建议添加`$(".answer").slideUp()`，以便一次只能打开一个手风琴项目：

```
var question = $('.faqs h4');
question.click(function() {
    $(".answer").slideUp();
    $(this).next('div').slideToggle('fast');
}); 
```

（另外，可能会添加一些样式，例如`:hover`伪类。可能会添加一些其他动画。）

*   [小提琴](http://jsfiddle.net/T9MQC/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:14:06.473

**我想知道，既然有这么多好手风琴**，为什么要从头开始尝试一些东西......

您尝试过**Bootstrap Collapse**吗？

> [http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

简单的标记，您可以将其用作 Hole Bootstrap 框架的一部分，或者[简单地**独立**](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-collapse.js)于其他任何东西使用它（尽管您需要 jQuery）

# nhibernate - NHibernate.PropertyAccessException 未处理

> ID：13468173
> 
> 赞同：2
> 
> 时间：2012-11-20T07:08:58.447
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我是 NHibernate 的新手。刚开始学习NHibernate。

我的 C# 代码出现运行时错误

NHibernate.PropertyAccessException 未处理

```
 Message=Invalid Cast (check your mapping for property type mismatches); setter of NHibernateDemo.Customer
 InnerException: System.InvalidCastException
     Message=Unable to cast object of type 'NHibernate.Collection.Generic.PersistentGenericSet`1[NHibernateDemo.Order]' to type 'System.Collections.Generic.ISet`1[NHibernateDemo.Order]'. 
```

以下是我编写的 C# 代码

```
public class Customer {
    public Customer()
    {
        MemberSince = DateTime.UtcNow;
        Orders = new HashSet<Order>();
    }

    public virtual Guid Id { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }

    public virtual Location Address { get; set; }

    public virtual ISet<Order> Orders { get; set; } 
} 
```

它的hbm文件如下

```
<class name="Customer" table="Customer" lazy="true" >
    <id name="Id">
        <generator class="guid.comb" />
    </id>
    <property name="FirstName" />
    <property name="LastName" />

    <component name="Address" >
      <property name="Street" />
      <property name="City" />
      <property name="State" />
      <property name="Country" />
    </component>

    <set name="Orders" table="`Order`" order-by="Ordered desc">
        <key column="CustomerId" />
        <one-to-many class="Order" />
    </set>
</class> 
```

```
public class Order {
    public virtual Guid Id { get; set; }
    public virtual DateTime Ordered { get; set; }
    public virtual DateTime Shipped { get; set; }
    public virtual Location ShipAddress { get; set; }

    public virtual Customer Customer { get; set; }
}

<class name="Order" table="`Order`">
    <id name="Id">
        <generator class="guid.comb" />
    </id>
    <property name="Ordered" />
    <property name="Shipped" />

    <component name="ShipAddress" >
        <property name="Street" />
        <property name="City" />
        <property name="State" />
        <property name="Country" />
    </component>

    <many-to-one name="Customer" column="CustomerId" />

</class> 
```

如果我在客户 HBM 文件中将“设置”部分更改为“列表”并在客户类中进行必要的更改。程序运行正常。另外，如果我从客户 HBM 文件中删除“设置”部分；这是工作。

您能帮我找出客户 HBM 文件的“设置”部分有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:38:05.253

您的映射几乎是正确的，但`ISet`接口不是来自 System 命名空间，而是来自`iesi`库（与 NHibernate 一起分发）所以您可以引用`iesi`和更改您的映射：

```
public virtual Iesi.Collections.Generic.ISet<Order> Orders { get; set; } 
```

或使用`IList<>`

和映射`bag`

```
<bag name="Orders" table="`Order`" order-by="Ordered desc">
  <key column="CustomerId" />
  <one-to-many class="Order" />
</bag> 
```

*注意也不要忘记初始化**列表**，以防该实体是通过 new 运算符创建而不是由 NHibernate 加载的*

# iphone - 按键排序/分组 NSDictionary

> ID：13468176
> 
> 赞同：1
> 
> 时间：2012-11-20T07:09:06.033
> 
> 标签：iphone, ios, nsdictionary

我在 NSDictionary 中有如下数据：

```
Value : Football, Key: SPORT 
Value : Cricket, Key: SPORT 
Value : Fastrack, Key: PRODUCT/SERVICE 
Value : Audi USA, Key: CARS 
Value : BMW, Key: CARS 
Value : Facebook, Key: PRODUCT/SERVICE 
Value : TED, Key: WEBSITE 
Value : National Geographic, Key: MEDIA/NEWS/PUBLISHING 
Value : MyWebProduct, Key: WEBSITE 
```

我想根据键对值进行分组。在这种情况下我需要做什么或另一个合适的想法来实现这一点。我希望结果显示如下：

```
 SPORT : Football, Cricket
 CARS  : Audi, BMW
 ... 
```

任何可观的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:36:16.063

作为 NSMutableDictionary 上的一个类别，这对你有用吗：

```
- (void)setObject:(id)object inArrayForKey:(id <NSCopying>)key
{
    id current = [self objectForKey:key];
    if (!current || ![current isKindOfClass:[NSArray class]]) {
        [self setObject:@[object] forKey:key];
    } else {
        [self setObject:[(NSArray *)current arrayByAddingObject:object] forKey:key];
    }
} 
```

基本上，您将拥有一个干净的界面，将项目添加到与键关联的数组中。如果有多个项目，您可以选择仅将其设为数组，如果这是您的偏好。

如果您不熟悉添加类别，它们允许您向现有类添加方法。在 Xcode 中，只需执行新文件 > Objective-C 类别并将类别添加到`NSMutableDictionary`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:00:29.180

由于您将多个对象分组在同一个键下，因此数组字典将是包含您的数据的合适结构。

```
NSMutableDictionary *dict = [ [ NSMutableDictionary alloc ] init ];
NSArray *myItems = [ [ NSArray alloc ] initWithObjects:@"item one", @"item two", nil ];
[ dict setObject:myItems forKey:@"group of items" ]; 
```

然后您可以使用

```
[dict objectForKey:@"group of items"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:15:59.217

`NSDictionary`默认无法排序。如果您想要排序字典，请继续并实现您自己的子类（这是您可以对标准容器对象进行子类化的少数有效原因之一）。

# javascript - HTML、CSS、Javascript 在彼此内部创建圆圈

> ID：13468180
> 
> 赞同：1
> 
> 时间：2012-11-20T07:09:29.490
> 
> 标签：javascript, html, css, geometry

我需要使用 HTML、CSS 和 Javascript 在彼此内部制作圆圈，并可以单击一个按钮，这将自动向其添加另一个圆圈。新添加的圆圈将是最外面的圆圈。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:19:45.807

对于圆圈，您需要将border-radius 设置为足够大的值（通常超过最大宽度和高度的一半）。

要添加更大的圆圈，您需要复制以前的圆圈，创建另一个更大的圆圈，然后将复制的圆圈粘贴到其中。这是一个 jQuery 片段，但你可以使用任何框架，甚至是普通的 js：

```
var $container = $('#container'),
    $previous_circles = $container.html()

$container
  .html('<div class="circle bigger_circle"></div>')
  .find('.bigger_circle')
  .append($previous_circles)
  .end() 
```

# postgis - 在 PostGIS 中创建数据库

> ID：13468181
> 
> 赞同：-1
> 
> 时间：2012-11-20T07:09:38.420
> 
> 标签：postgis, postgresql-9.1

目前，我已经安装了 postGreSql 9.1 for windows，上面有 postGIS 的扩展。

现在，我想在 PostGIS 中创建一个新的数据库。

有人可以用一个易于遵循和准确的程序指导我如何去做，已经阅读了文档，但它太混乱了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:07:30.287

创建数据库：

```
createdb mygeodatabase 
```

向其中添加 PostGIS 函数（PostGIS 2.0、PostgreSQL 9.2）：

```
psql mygeodatabase
CREATE EXTENSION postgis; 
```

使用较旧的 PostGIS/PostgreSQL 版本（您的文件夹取决于操作系统）：

```
psql -d mygeodatabase -f /usr/share/postgresql/9.1/contrib/postgis-1.5/postgis.sql
psql -d mygeodatabase -f /usr/share/postgresql/9.1/contrib/postgis-1.5/spatial_ref_sys.sql 
```

# ios6 - 在没有 Storyboard 的 iOS 6 上保存和恢复应用程序状态

> ID：13468182
> 
> 赞同：3
> 
> 时间：2012-11-20T07:09:46.480
> 
> 标签：ios6, storyboard, xib, state-saving

我已经按照本[教程完成了测试应用程序](http://www.techotopia.com/index.php/An_iOS_6_iPhone_State_Preservation_and_Restoration_Tutorial)

我尝试在不使用 Storyboard 的情况下做同样的事情，但它不起作用。我在 AppDelegate 中启用了状态保存和恢复。我已将 restoreIdentifier 分配给我的所有控制器及其视图。我想我必须在 AppDelegate 中实现一些额外的代码来恢复 rootviewcontroller，但我找不到正确的方法来做到这一点。

```
-(BOOL)application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder
{
    return YES;
}

-(BOOL)application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder
{
    return YES;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[[StateTestFirstViewController alloc] initWithNibName:@"StateTestFirstViewController" bundle:nil] autorelease];
    UIViewController *viewController2 = [[[StateTestSecondViewController alloc] initWithNibName:@"StateTestSecondViewController" bundle:nil] autorelease];
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.restorationIdentifier = @"TabBarController";
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T23:39:01.590

实际上，`application:willFinishLaunchingWithOptions:`如果`application:didFinishLaunchingWithOptions:`您将代码更改为：

```
- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    UIViewController *viewController1 = [[[StateTestFirstViewController alloc] initWithNibName:@"StateTestFirstViewController" bundle:nil] autorelease];
    UIViewController *viewController2 = [[[StateTestSecondViewController alloc] initWithNibName:@"StateTestSecondViewController" bundle:nil] autorelease];
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.restorationIdentifier = @"TabBarController";
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;
    return YES;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {                
    [self.window makeKeyAndVisible];

    return YES;
} 
```

它对我有用。我还建议您观看[WWDC 2012 Session 208 — Saving and Restoreing Application State on iOS](https://developer.apple.com/videos/wwdc/2012/?id=208)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T11:37:15.813

我在尝试实现这一点时也遇到了很多问题。

首先，您是否成功地**使用故事板完成了这项工作？**

您的代码看起来不错，您不需要其他任何东西，因为只有 2 个要求：

1.  在 AppDelegate 中将 shouldRestoreApplicationState 和 shouldSaveApplicationState 设置为 YES
2.  将恢复 ID 设置为所有 UIViewControllers（UIViews 不需要它）

我建议您**注意“杀死”应用程序的方式**。

在模拟器中：

*   点击模拟器主页按钮。
*   使用 Xcode 停止应用程序。
*   使用 Xcode 播放应用程序。

事实上，一旦你从多任务栏中杀死应用程序，系统就会删除你的应用程序状态。

如果您希望它使用多任务栏正常工作，您必须**在 Info.plist 文件中将“应用程序不在后台运行”设置为“是”。**

希望能帮助到你 ;）

# android - android 相当于 iOS 的 imageView.addArrayOfImages()

> ID：13468183
> 
> 赞同：1
> 
> 时间：2012-11-20T07:09:48.030
> 
> 标签：android, ios, uiimageview, android-imageview

是否有一个相当于 iOS 的 UIImageView 方法的 android 允许您提供一组图像，然后它会循环显示图像？就像幻灯片或 gif 一样。

如果不是，模拟这种行为的最佳方法或控制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:27:37.207

我只会投入我的2美分...

我不明白为什么您不能使用 an`ArrayList<ImageView>`来执行此操作。您可以向其中添加任何类型的对象，并且可以轻松地循环浏览列表。您可以在一秒钟内创建自己的方法。（请记住，我不确定如何`UIImageView`工作）

# android - GCM 无法使用公司 Google 帐户

> ID：13468189
> 
> 赞同：2
> 
> 时间：2012-11-20T07:10:13.350
> 
> 标签：android, android-c2dm, google-cloud-messaging

我有一个完美运行的 GCM 通知实现。但是，如果我将发件人 ID /（项目 ID）从我的 Google 帐户更改为与 Google 绑定的公司帐户/企业帐户，则 GCM 通知消息会从服务器成功发送，但不会在接收器设备上收到。

我想知道，使用公司 Google 帐户实施 GCM 是否需要遵循任何特定的先决条件。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:23:32.813

> 我想知道，使用公司 Google 帐户实施 GCM 是否需要遵循任何特定的先决条件。

答案是不。我刚刚使用 Google App（企业）帐户完成了 GCM 的实施，我只是遵循[Google 文档](http://developer.android.com/google/gcm/index.html)中描述的标准指南。

您的问题应该来自其他地方，但我们需要更多信息来帮助您。它可能会出现，因为您的客户端应用程序必须在您更改`SENDER_ID`.

# css - CSS水平对齐图像

> ID：13468194
> 
> 赞同：22
> 
> 时间：2012-11-20T07:11:09.703
> 
> 标签：css

我是 CSS 新手，我正在尝试将我的图像水平对齐在 div 元素内。

我尝试了 float 和 display: inline 但它们仍然垂直对齐。

```
#maincontainer {
   left : 50px;
 top : 80px;
 width : 300px;
 height : 100px;
 border : solid 2px #0f0f0f;
 position : absolute;
 overflow : scroll;

 }

 #maincontainer img {
    top : 10px;
    left : 10px;
    width : 80px;
    height : 80px;
    padding : 10px;
    position :relative; 
    float : left; 
   } 
```

如果我在哪里错了，请帮助并告诉我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-13T21:43:24.103

```
display: block;
margin-left: auto;
margin-right: auto 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-20T11:15:02.833

水平对齐的
html

```
<div id="maincontainer">
    <img />
</div> 
```

css

```
 #maincontainer {
     width : 300px;
     height : 100px;
     border : solid 2px #0f0f0f;
     }
     #maincontainer img {
        width : 80px;
        height : 80px;
        margin:0 auto;
        display:block;
        background:red;
    }​ 
```

垂直和水平对齐的
html

```
 <div id="maincontainer">
        <div><img /></div>
    </div> ​ 
```

css

```
 #maincontainer {
     width : 300px;
     height : 100px;
     border : solid 2px #0f0f0f;
     display:table;
     }
     #maincontainer div img {
        width : 80px;
        height : 80px;
        background:red;
        display:inline-block;
    }
    #maincontainer div{
     display:table-cell;
       text-align: center;
        vertical-align: middle;
    }​ 
```

只需从 img 中删除 background:red

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T08:17:39.540

只要父容器对图像足够宽，它们自然会并排放置。当图像行变得对于容器来说太宽时，图像将开始换行到新的文本行。

此外，空白（空格、制表符和换行符）将呈现为两个图像之间的文本空间。`IMG`为防止这种情况，请确保标签之间没有空格字符。

`white-space: nowrap;`通过在父元素上设置 CSS，可以强制图像溢出父容器的宽度。如果容器太窄，这可能会导致不良影响，但也可以通过添加`overflow: auto;`到包含元素来创建水平滚动条。

最后，图像标签可以有一个`vertical-align`CSS 属性。默认情况下是`vertical-align: baseline;`. 这会在图像下方创建几个像素的空白区域。您可以通过`vertical-align: top;`在 CSS 中设置图像来解决此问题。

有关图片的一些示例，请参见[this fiddle](http://jsfiddle.net/Jwv7n/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T07:52:22.207

如果您的 div 足够宽以在一行中包含所有图像，那么您可以简单地尝试这样的事情：

```
#maincontainer img {
float:left;
margin-right:10px;
} 
```

现场观看： http: [//tinkerbin.com/mIBcXNcS](http://tinkerbin.com/mIBcXNcS) 这是基本代码，但可能因您的 html 代码而异......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:14:14.530

你好 现在根据这个换成你的位置

现在定义你的**父母**位置`relative`并给孩子`absolute`

```
#maincontainer {
 position : relative;
 }

 #maincontainer img {
    position :absolute; 
   } 
```

## -----

**我想你想要这个**

现在改变`properties`你的一些`css`

现在在**你的父母**中**添加**`margin-top`和`margin-left` **删除** `top`或`left` **`id maincontainer`**

 **像**这样**

```
#maincontainer {
 width : 300px;
 height : 100px;
  margin-top:80px;
  margin-left:50px;
 border : solid 2px #0f0f0f;
 position : relative;
 overflow : scroll;

 }

 #maincontainer img {
    top : 10px;
    left : 10px;
    width : 80px;
    height : 80px;
    padding : 10px;
    position :absolute; 
  vertical-align:top;
   } 
```

***[现场演示](http://tinkerbin.com/LXo1jbd9)***

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-21T20:05:00.313

1.  您需要应用`display:block;`到 IMG 元素才能使浮动生效。内联元素不能浮动。
2.  或者，将 IMG 定义为`display:inline-block;`，但请注意旧版浏览器不支持此功能
3.  作为旁注，尽量避免在 CSS 中定义高度（或使用最小高度）。与宽度不同，许多元素的高度，尤其是主容器，应该是灵活的。**

# c# - 在 Membership.GetUser() 和 Page.Identity.User 中获取“null”

> ID：13468195
> 
> 赞同：1
> 
> 时间：2012-11-20T07:11:16.667
> 
> 标签：c#, asp.net

我已经实现了 ASPNET 成员资格提供程序，并且在`Login1_LoggedIn`活动中，我尝试获取`Membership.GetUser()`或`Page.Identity.User`但它们都返回 null。

我尝试了其他人建议的不同解决方案，包括改变形式`path="/"`，但没有运气。然而，`LoginName`控制工作并`username`正确显示。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:17:49.397

尝试在 web.config 中禁用未经身份验证的用户：

```
<authorization>
   <deny users="?" />
</authorization> 
```

HttpContext.Current.User 在您调用之前不会填充：

```
FormsAuthentication.SetAuthCookie(UserName, False) 
```

或者

```
FormsAuthentication.RedirectFromLoginPage(UserName, False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:20:33.043

我找到了原因，ScottGu 在他的博客文章中很好地解释了这一点。

[http://forums.asp.net/t/982749.aspx](http://forums.asp.net/t/982749.aspx)

# java - 如何不通过查询字符串更改 I18N 语言环境？

> ID：13468201
> 
> 赞同：1
> 
> 时间：2012-11-20T07:12:01.283
> 
> 标签：java, javascript, struts2

这是一个`struts2`问题。

目前，我在我的 webapp 中使用 i18n 进行国际化。我的一些 jsp 页面有查询字符串来存储请求信息。例如，

```
http://myWebsite.com/myWebsite/myPage?productId=12345 
```

当用户尝试切换语言时，我将 URL 重写`javascript`为

```
http://myWebsite.com/myWebsite/myPage?request_locale=zh_CN 
```

**它会丢失查询字符串。**

我的网址以不同的方式使用：

```
http://myWebsite.com/myWebsite/myPage
http://myWebsite.com/myWebsite/myPage?productId=12345#myAnchor
http://myWebsite.com/myWebsite/myPage?productId=12345&key2=value2&key3=value3#myAnchor
http://myWebsite.com/myWebsite/myPage?productId=12345&key2=value2&key3=value3&request_locale=zh_CN
http://myWebsite.com/myWebsite/myPage?productId=12345&key2=value2&key3=value3
... 
```

当我尝试处理所有这些差异时`javascript`，它变得如此复杂。

切换语言环境后有什么好的方法可以保留查询字符串和锚点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:23:50.647

使用 JS 重写 URL 时，应该基于当前 URL 进行。

所以，如果在浏览器中显示

```
http://myWebsite.com/myWebsite/myPage?productId=12345 
```

你应该把它重写为

```
http://myWebsite.com/myWebsite/myPage?productId=12345&request_locale=zh_CN 
```

为此，使用 JS 您应该显示当前 URL。看看这个[问题](https://stackoverflow.com/q/1034621/980472)如何。

# javascript - JqPlot BarChart 不刷新...异常没有要绘制的数据

> ID：13468202
> 
> 赞同：1
> 
> 时间：2012-11-20T07:12:04.140
> 
> 标签：javascript, jquery, graph, jqplot

我在两个场景下有这个代码。一个是在 html 加载，第二个是在下拉项更改。页面加载场景是没有 ajax 调用的相同代码。下拉场景是使用 Ajax 调用，如下面的代码所述。
页面加载方案没有给出任何错误并正确显示条形图。dropwdown Ajax 场景给了我这个错误“No data to Plot”

```
 $.jqplot.config.enablePlugins = true;
    $("#CategoryList").change(function () {

        var url = '<%= Url.Content("~/") %>' + "Home/GetExpenseSummaryByMonthByCategoryID";
        var ddlsource = $("#CategoryList").val();

        $.getJSON(url, { CatID: ddlsource }, function (data) {

            var label = 'Test Control';
            var ticksString = '<%=((List<TPS.PFM.Application.Contract.DataTransferObjects.BarChartDTO>)ViewData["BarCharts"])[1].Ticks%>'.split(',');

            data2[1] = new Array();
            data3[1] = new Array();
            $.each(data, function (index, optionData) {
                data2[1].push(optionData.Value);
                data3[1].push(optionData.Name);
            });
            try {
                plot1 = $.jqplot('BarChartControl3', data2[1], {

                    title: label,
                    animate: true,
                    seriesDefaults: {
                        renderer: $.jqplot.BarRenderer,
                        pointLabels: {
                            show: true
                        },
                        rendererOptions: { fillToZero: true }
                    },
                    series: getLabels(data3[1]),
                    legend: {
                        show: true,
                        placement: 'outsideGrid'
                    },

                    axes: {
                        xaxis: {
                            renderer: $.jqplot.CategoryAxisRenderer,
                            ticks: ticksString
                        },
                        yaxis: {

                            tickOptions: { formatString: 'Rs%d' }
                        }
                    }
                });

            }
            catch (Err) {
                alert(Err.message);
            }

        });
    }); 
```

我很困惑。因为页面加载上的相同代码成功显示了条形图。但是使用 ajax 调用它不会刷新条形图。分别push data2和data3后，它们在alerting上的确切内容是：- data2[1]数据是这样的：- 0,0,0,0,1000,0,0,0,0,0,2010,0 data3 [1] 数据是这样的：- 一月，二月，三月，四月，五月，六月，七月，八月，九月，十月，十一月，十二月

我检查了ajax调用。数据成功返回。

# android - Kindle Fire USB 调试模式

> ID：13468204
> 
> 赞同：4
> 
> 时间：2012-11-20T07:12:08.947
> 
> 标签：android, kindle-fire

我正在将 android 应用程序移植到 Eclipse 中的 Kindle Fire。问题是我不知道如何打开/关闭 Kindle Fire 的 USB 调试模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:28:27.033

您只需将 Fire 的设备 ID 添加到您的`android_usb.ini`文件中，以便 Google ADB 驱动程序可以找到它。您可以使用以下命令轻松地从命令行执行此操作：

```
echo 0x1949 >> "%USERPROFILE%\.android\adb_usb.ini 
```

然后重启adb

```
adb kill-server
adb start-server 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:40:52.703

这是一个简单的方法

[调试模式](http://answers.groovypost.com/questions/668/how-do-i-enable-usb-debugging-on-kindle-fire)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-21T10:33:32.583

这是我在 Kindle 设备上启用 USB 调试的方法

在 Kindle Fire 中，打开“设置”。

根据您的设备执行以下操作之一：

原装 Kindle Fire – 无需任何操作。默认情况下启用 ADB。

Kindle Fire HD - 选择“安全”。

HDX 和更新型号 - 点击“设备”或“设备选项”，然后点击“序列号”7 次，直到“开发者选项”解锁。

选择“开发者选项”。将“启用 ADB”设置为“开”并允许 USB 调试。

您现在可以在尝试运行应用程序时在设备列表中看到您的设备。您可以转到相同的选项来关闭 USB 调试。

我不必为 Kindle 设备下载任何单独的驱动程序，但我始终确保我的 Android SDK 工具和平台保持最新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-10T07:34:59.080

## 启用开发人员选项

转到设置 > 设备选项并查找开发人员选项菜单。如果它不存在，请执行以下操作：

*   转到**设置 > 设备选项 > 关于 Fire 平板电脑**。
*   点击您的**序列号**七次。
*   返回**设备选项**。出现一个名为“开发人员选项”的新菜单。

点击**开发者选项**。（2013 型号可能将此选项称为“安全性”。）将**开发人员选项**和**USB 调试**设置为开。如果您有第一代 Kindle Fire，则默认启用 ADB。

欲了解更多信息，请访问[这里](https://developer.amazon.com/docs/fire-tablets/connecting-adb-to-device.html)

# ruby-on-rails - Rails 创建条件链接的最佳方法

> ID：13468214
> 
> 赞同：0
> 
> 时间：2012-11-20T07:13:02.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有下面的 link_to 标签，我很好奇创建此链接的​​最佳方法是什么，并检查 first_name 和 last_name 是否为零？

如果只有一个名字是 nil（第一个或最后一个），我仍然想要一个链接。

```
<%= link_to "#{u.user_details.first_name+" "+u.user_details.last_name}", profile_path(u), :class => 'name' %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:35:52.573

实现这一目标的一种干净方法是

```
class UserDetails
  def full_name
    [self.first_name,
     self.last_name].compact.join(' ')
  end
end 
```

然后，在控制器中

```
<%= link_to(u.user_details.full_name,
            profile_path(u),
            :class => 'name') if u.user_details.full_name.present? %> 
```

使用`link_to_if`，`'name'`如果条件不满足，则返回参数，并且您不需要它，因为它将是一个空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:09:29.637

根据我的口味，视图中有太多代码。我更喜欢使用模型和助手：

```
# user_details.rb
def full_name
  "#{first_name} {last_name}"
end

# helper.rb
def my_link_to(user)
  name = user.user_details.full_name
  return "" if name.blank?
  link_to name, profile_path(user), :class => 'name'  
end

# view.erb
<%= my_link_to user %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:21:42.307

您可以像这样使用锚字符串：`"#{[u.user_details.first_name, u.user_details.last_name].join(' ')}"`.

先看看[`#join`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)效果如何。

这个解决方案的缺点是即使没有提供用户详细信息也会创建链接，但它会有空的锚字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:24:50.067

一种工作方法是：

```
<%= link_to "#{u.user_details.first_name+" "+u.user_details.last_name}", profile_path(u), :class => 'name' if u.user_details.first_name.blank? or u.user_details.last_name.blank?  %> 
```

但我不确定这是最好的方法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:35:28.043

迅速地：

```
<%= link_to_if u.user_details.first_name || u.user_details.last_name,
[u.user_details.first_name, u.user_details.last_name].compact.join(' '),
profile_path(u), :class => 'name' %> 
```

但是，我可能会将其重构为：

```
<% a = [u.user_details.first_name, u.user_details.last_name].compact %>
<%= link_to_unless a.empty?, a.join(' '), profile_path(u), class: 'name' %> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T07:45:22.147

我还会检查它们是否为[空白](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)并使用`join`：

```
<% name = [u.user_details.first_name, u.user_details.last_name].reject(&:blank?).join(" ") %>
<%= link_to name, profile_path(u), :class => 'name' unless name.blank? %> 
```

# html - HTML5 将视频/画布标签保存到文件

> ID：13468217
> 
> 赞同：0
> 
> 时间：2012-11-20T07:13:08.963
> 
> 标签：html, html5-video, html5-canvas

我有一个页面可以播放来自本地来源的 4 个视频，然后我将它们全部组合到一个画布中，以便所有内容都通过一个元素显示（我每 X 秒更新一次画布上的图像）。有什么办法可以将它保存到视频文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:29:28.637

第一：对于大数据我不推荐下面的方法！！

您可以创建一个大小足以存储整个视频的数组：

```
//Size: Colour channels * width * height * noOfFrames
//THIS WILL GET BIG!!
var video = new Uint8Array(3*640*480*24); 
```

然后将视频的每一帧存储在数组中

现在您可以使用此代码段作为开始将其转换为 DataUrl：

```
var base64String = btoa(String.fromCharCode.apply(null, video)); 
```

(http://stackoverflow.com/a/11562550/1554114)

这会给你类似 RAW-Video 的东西。
这是一个带有 DataUrl 的链接，通过右键单击保存它/另存为../“Test.mp4”
（让我们看看 SO 是否可以处理这个：D - 不，它不能 :( - 按'编辑'按钮，看看它的样子）

那么在 JavaScript 中实现 h264 取决于您；）

# linux - Linux 时间和日期

> ID：13468218
> 
> 赞同：2
> 
> 时间：2012-11-20T07:13:09.587
> 
> 标签：linux, time, amazon-ec2

我只是在 AWS amazon AMI 中创建一个实例。并想设置时间和日期。

我使用了这个命令。

```
date -s "20 NOV 2012 16:10:00" 
```

但是当我重新启动时，日期值会回到开头（在我改变之前）

我应该使用什么命令？

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:49:52.857

在 Linux 上，更新时间的正常方法（在物理硬件上，没有[NTP](http://en.wikipedia.org/wiki/Network_Time_Protocol)）是：

1.  日期与相关参数设置时间
2.  更新硬件 RTC `# hwclock -w`（这通常在您关机时由初始化脚本完成，但如果您不打算关机，这很有用）

在 Amazon 上，硬件时钟可能是只读的（也可能涉及 NTP，但虚拟化通常会同步时钟）。VMWare 在 vmware-tools 中有一个时钟同步选项，可以使操作系统时钟保持同步，Xen linux 内核有[一个禁用时间同步的设置](http://docs.vmd.citrix.com/XenServer/4.0.1/guest/ch04s06.html)。

修复时区可能是您真正想要的解决方案，除非您想故意设置错误的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:40:03.317

我认为您的 AMI 很可能已设置为通过 NTP 自动同步时间并在重新启动时自动同步时间。

由于时区对您来说似乎是错误的，您可能看到了错误的时间，因此您试图“修复”时间。

正确的解决方案是使用`tzselect`命令来设置您最喜欢的时区。

# javascript - 将 2 个 jQuery 脚本添加到 1 个文件中

> ID：13468219
> 
> 赞同：1
> 
> 时间：2012-11-20T07:13:11.727
> 
> 标签：javascript

```
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jquery.cycle.all.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen"/>

<script type="text/javascript">
$(document).ready(function() {
$('#slider').cycle({
    fx: 'scrollHorz',
    next:   '#next', 
    prev:   '#previous' 

});
});

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/jquery.lightbox-0.5.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen"/>

<script type="text/javascript">
$(function() {
    $('a. lightbox').lightBox();
});
</script>
</script> 
```

1.  问题：当我在单独的文件中使用代码时，它工作得很好，但是当我将灯箱添加到轮播脚本时，反之亦然。他们俩都停止工作。

我刚开始使用`jQuery and plugins`. 遇到问题，我不太知道如何解决它，或者出了什么问题。我想在我的网站上有一个轮播和一个灯箱，但是每当我添加脚本时，它就会停止工作。

[从http://leandrovieira.com/projects/jquery/lightbox/](http://leandrovieira.com/projects/jquery/lightbox/)获取灯箱的源文件，从 jquery 网站获取 jquery 库。轮播和灯箱。

回复将不胜感激。

现在灯箱只能工作，而不是轮播

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="jquery.cycle.all.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen"/>

<script type="text/javascript">
$(document).ready(function() {
$('#slider').cycle({
    fx: 'scrollHorz',
    next:   '#next', 
    prev:   '#previous' 

     // choose your transition type, ex: fade, scrollUp, shuffle, etc...
});
});
</script>
<script type="text/javascript" src="js/jquery.js"></script><script
type="text/javascript" src="js/jquery.lightbox-0.5.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen"/>

<script type="text/javascript">
$(function() {
    $('a.lightbox').lightBox();
});
</script> 
```

# php - PHP - 列出一年中一个月中的所有日子

> ID：13468223
> 
> 赞同：3
> 
> 时间：2012-11-20T07:13:33.747
> 
> 标签：php

> **可能重复：**
> [我在 PHP 中有 2 个日期，我如何运行一个 foreach 循环来度过所有这些日子？](https://stackoverflow.com/questions/3207749/i-have-2-dates-in-php-how-can-i-run-a-foreach-loop-to-go-through-all-of-those-d)

我是 PHP 新手。我怎样才能列出一年中的所有日子？（或从给定日期开始？）

我想做的是生成一个包含一个月内所有天数的表格，这样我就可以填写预算。它应该在年底结束，但它应该能够从随机日期开始。

关于我应该如何做到这一点的任何例子？我也应该能够看到日期的名称。示例“ **5 月 21 日 - 星期一**”并列出 2013 年之前的所有日期和月份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:00:20.287

您可以使用它，但可能有更优雅的方式：

```
$start_date = '2012-06-01'; // Give in your own start date
$start_day = date('z', strtotime($start_date)); // 6th of June
$days_in_a_year = date('z', strtotime('2012-12-31')); // 31th of december

$number_of_days = ($days_in_a_year - $start_day) +1 ; // Add the last of december also
for ($i = 0; $i < $number_of_days; $i++) {
    $date = strtotime(date("Y-m-d", strtotime($start_date)) . " +$i day");
    echo date('d F - l', $date) .'<br />';
} 
```

# javascript - $.post jquery 函数返回不起作用

> ID：13468225
> 
> 赞同：0
> 
> 时间：2012-11-20T07:13:36.117
> 
> 标签：javascript, jquery, jquery-ui

我有这样的 HTML 代码：

```
<button class="btn btn-large btn-primary" type="button" onclick="addtocart();">Tambah Item</button> 
```

我想执行这个jQuery函数：

```
function addtocart() {
    var url = '<?php echo BASE_URL."modul/penjualan_barang/content/cart.php"?>'
    $.post(url+'?act=addcart',{barcode:$(".combo-value").val()},function(result){
        alert(result);

        if (result.success){
            $.messager.alert('Benar','Terdapat kesalahan ketika proses menginput, coba refresh halaman anda','error');  
        } else {
            $.messager.alert('Kesalahan','Terdapat kesalahan ketika proses menginput, coba refresh halaman anda','error');  
        }
    },'json');      

} 
```

但是我无法获得该功能的任何结果，所以我不知道它是否有效。

请问有什么建议吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:16:01.090

如果您没有收到结果，很可能是您从服务器收到了错误，没有发送发布请求（同源问题），或者您没有收到来自服务器的响应服务器。

为了快速识别问题，我建议启动[Fiddler2](http://www.fiddler2.com/fiddler2/)并查看您的 Post 请求的请求和响应是什么。

[Fiddler2 是由Eric Lawrence](https://stackoverflow.com/users/126229/ericlaw)编写的 HTTP 调试实用程序，其中一个功能是显示请求及其匹配响应的检查器。如果您的服务器返回 HTTP 错误，您应该在那里看到它。

Chrome 开发者工具也可以提供帮助，但我建议安装并学习如何使用 Fiddler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:19:07.150

回调仅在 POST 请求返回 HTTP 200（成功）时执行。您必须从服务器获得错误代码响应。

Chrome 插件“REST 控制台”可以帮助调试响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:28:41.307

我认为您的代码（函数 addtocart）中存在额外的右大括号（“}”）。请检查一次。

# ios - 无法在横幅广告上更改（设置）.isHidden

> ID：13468232
> 
> 赞同：0
> 
> 时间：2012-11-20T07:14:02.700
> 
> 标签：ios, iad

我的故事板中有一个 iAd 横幅，并将一个插座拖到我的班级。我现在只是尝试做一个简单的实现（没有动画），但是当我尝试设置 self.adBanner.isHidden 时，不明白为什么“没有 setter method 'setIsHidden' for assignment to property”作为错误抛出? 我已经包含了 iAd 框架。

```
#import "MyClass.h"
#import <iAd/iAd.h>

@interface MyClass () <ADBannerViewDelegate>
@property (weak, nonatomic) IBOutlet ADBannerView *adBanner;
@end

@implementation MyClass
@synthesize adBanner = _adBanner;

- (void)viewDidLoad {
  [super viewDidLoad];
  self.adBanner.delegate = self;
  self.adBanner.isHidden = YES;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
  self.adBanner.isHidden = NO;
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
  self.adBanner.isHidden = YES;
}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:21:56.927

你正试图在那里“变异”（设置）一个吸气剂。改为使用`self.adBanner.hidden = YES`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:22:23.413

啊，愚蠢的错误。 `isHidden`是一个只读属性。我把那个属性误认为`hidden`. 这是最终的工作代码供参考：

```
#import "MyClass.h"
#import <iAd/iAd.h>

@interface MyClass () <ADBannerViewDelegate>
@property (weak, nonatomic) IBOutlet ADBannerView *adBanner;
@end

@implementation MyClass
@synthesize adBanner = _adBanner;

- (void)viewDidLoad {
  [super viewDidLoad];
  self.adBanner.delegate = self;
  self.adBanner.hidden = YES;
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner {
  self.adBanner.hidden = NO;
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
  self.adBanner.hidden = YES;
}

@end 
```

# filelock - 使用 C 程序在 Linux 中锁定文件

> ID：13468238
> 
> 赞同：3
> 
> 时间：2012-11-20T07:14:14.293
> 
> 标签：filelock

我想从 c 程序创建一个文件，我想在我的 c 二进制文件中使用很长时间。但我想以这样的方式创建文件，直到我的 c 程序完成处理文件创建并解锁它之前没有人（可能使用 vim 或任何其他编辑器）能够打开和读取文件内容。

请提前帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:56:45.753

为此，您可以在 Unix 上定义强制文件锁定。但是，有必要（重新）挂载文件系统，以便它遵守强制锁。

1 例如，要重新挂载 root fs，请使用（作为 root）：

```
mount -oremount,mand / 
```

2 现在，让我们创建我们的秘密文件：

```
echo "big secret" > locked_file 
```

3 我们需要设置-group-id，并禁用文件的组执行权限：

```
chmod g+s,g-x locked_file 
```

以及我们锁定那个文件的C代码：（代码会锁定文件，并保持锁定一段时间，你可以尝试另一个终端读取它，读取将延迟到锁定释放）

```
#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

int main() {

struct flock fl;
int fd;

fl.l_type   = F_WRLCK;  /* read/write lock */
fl.l_whence = SEEK_SET; /* beginning of file */
fl.l_start  = 0;        /* offset from l_whence */
fl.l_len    = 0;        /* length, 0 = to EOF */
fl.l_pid    = getpid(); /* PID */

fd = open("locked_file", O_RDWR | O_EXCL); /* not 100% sure if O_EXCL needed */

fcntl(fd, F_SETLKW, &fl); /* set lock */

usleep(10000000);

printf("\n release lock \n");

fl.l_type   = F_UNLCK;
fcntl(fd, F_SETLK, &fl); /* unset lock */

} 
```

更多信息请访问 [http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt](http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T09:53:51.350

可以使用flock() 锁定文件。它的语法是

```
#include <sys/file.h>
#define   LOCK_SH   1    /* shared lock */
#define   LOCK_EX   2    /* exclusive lock */
#define   LOCK_NB   4    /* don't block when locking */
#define   LOCK_UN   8    /* unlock */

int flock(int fd, int operation); 
```

第一个文件使用 fopen() 或 open() 打开。然后使用flock() 锁定这个打开的文件，如下所示

```
int fd = open("test.txt","r");
int lock = flock(fd, LOCK_SH);  // Lock the file . . .
// . . . .
// Locked file in use 
// . . . .
int release = flock(fd, LOCK_UN);  // Unlock the file . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-14T13:41:11.227

我喜欢第一个答案（简短而甜蜜），但它在 CentOS-7 上的 gcc 无法正常工作。这个小技巧满足了我使用涉及 procmail 的小应用程序的需求（注意：如果您正在更新数据文件内容，请确保在释放锁定之前调用 fflush。否则，跳过锁定释放并调用 fclose，因为它看起来锁在那个时候被移除）

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <sys/file.h>
//
#define LOCK_SH 1   // shared lock
#define LOCK_EX 2   // exclusive lock
#define LOCK_NB 4   // don't block when locking
#define LOCK_UN 8   // unlock
extern int errno;   // this is located elsewhere
//
void debug(int rc){
    if ((rc>0)||(errno>0)){
    printf("rc: %d err: %d\n", rc, errno);
        errno = 0;  // clear for next time
    }
}   
//
void main(){
    FILE *fp;
    int rc;
    //
    printf("fopen\n");
    fp = fopen("flock_demo.dat","r+");
    if (fp == NULL){
        printf("err: %d\n", errno);
    perror("-e-cannot open file");
    exit(2);
    }
    printf("flock\n");
    rc = flock( fileno(fp), LOCK_EX );
    debug(rc);
    printf("now run this program on another session\n");
    printf("then hit <enter> to continue");
    getchar();
    printf("\n");
    printf("funlock\n");
    rc = flock( fileno(fp), LOCK_UN );
    debug(rc);
    printf("fclose\n");
    rc = fclose(fp);
    debug(rc);
} 
```

# c# - 如何在 C# 中将 g729 编码字节数组转换为 .WAV？

> ID：13468240
> 
> 赞同：6
> 
> 时间：2012-11-20T07:14:27.270
> 
> 标签：c#, audio, converter, wav, codec

我一直在用 C 语言开发一个 VoIP 应用程序。该项目的目的是VoIP通话录音。它使用 g729 编解码器。我可以从 RTP 有效负载中提取语音部分。如何将此字节数组转换为 .wav 格式？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:59:04.910

您可以尝试使用[ffmpeg.exe](http://www.ffmpeg.org/)并通过命令行使用它

# c# - 如何在 C# 中应用多个 .Tag 属性？

> ID：13468241
> 
> 赞同：3
> 
> 时间：2012-11-20T07:14:29.720
> 
> 标签：c#, asp.net, winforms, datagrid, tags

当我想存储/传递一个值时，我总是使用 .Tag 属性。例如，当我存储值时：

```
Form prosesEdit = new FormProsesChemicalRawWbEdit();
                        prosesEdit.Tag = (int)this.proses_chemicalDataGridView.Rows[e.RowIndex].Cells[1].Value;
                        prosesEdit.ShowDialog(); 
```

然后，我会将值传递到我的 EDIT 表单中，如下所示：

```
proses_chemical_id = (int) this.Tag;
            this.proses_chemicalTableAdapter.FillByChemId(this.mcd_softwareDataSet.proses_chemical, proses_chemical_id);
            this.proses_chemical_listTableAdapter.FillByChemId(this.mcd_softwareDataSet.proses_chemical_list, proses_chemical_id); 
```

但最近，我应该存储并传递 2 个不同的值。比方说`(int)this.proses_chemicalDataGridView1.Rows[e.RowIndex].Cells[1].Value;`，`(int)this.proses_chemicalDataGridView2.Rows[e.RowIndex].Cells[1].Value;` 我到底该怎么做？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T23:38:04.383

到目前为止给出的两个答案都有效，但我想稍微详细说明一下答案并提供一个替代方案。假设您像这样创建自己的类：

```
public class YourClass
{
    public int ProsesChemicalId1 { get; set; }
    public int ProsesChemicalId2 { get; set; }
} 
```

然后您可以将您的类的实例分配给 Tag 属性，如下所示：

```
YourClass yourClass = new YourClass();
yourClass.ProsesChemicalId1 = this.proses_chemicalDataGridView1.Rows[e.RowIndex].Cells[1].Value;
yourClass.ProsesChemicalId2 = this.proses_chemicalDataGridView2.Rows[e.RowIndex].Cells[1].Value;

Form prosesEdit = new FormProsesChemicalRawWbEdit();
prosesEdit.Tag = yourClass;
prosesEdit.ShowDialog(); 
```

您可以像这样从 Tag 属性中获取类的实例：

```
yourClass = (YourClass) this.Tag;
this.proses_chemicalTableAdapter.FillByChemId(this.mcd_softwareDataSet.proses_chemical, yourClass.ProsesChemicalId1); 
```

但是，使用 Tag 属性在表单中传递值通常是不好的做法，因为它需要大量类型转换和每个标签中存储的内容的知识。

更健壮的方法是使用构造函数注入，因为您知道要创建的表单类型：

```
int value1 = this.proses_chemicalDataGridView1.Rows[e.RowIndex].Cells[1].Value;
int value2 = this.proses_chemicalDataGridView2.Rows[e.RowIndex].Cells[1].Value;

Form prosesEdit = new FormProsesChemicalRawWbEdit(value1, value2);  
prosesEdit.ShowDialog(); 
```

然后，您很可能必须将这些值存储为表单内的属性或字段。这是一种更强大的方法的原因是它可以抵抗意外更改。换句话说，如果您将来需要传入第三个值，那么您不太可能忘记更改需要更改的代码。

你也可以在这里使用属性注入，但我不确定你的要求，所以我会留给你决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:52:21.157

为它创建一个新类。在其中创建两个属性。在标签中发送该类的对象。明天如果需要第三个值，则添加一个新属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:48:10.377

您可以按照已经建议的方式创建一个包含两个以上字段的类 - 或者 - 在标签上创建一个列表（或一个数组，任何最适合的）：

```
this.Tag = new List<int>();
((List<int>)this.Tag).Add(value1);
((List<int>)this.Tag).Add(value2);
... 
```

很少值转换不是问题，但是如果您需要很多值，您当然会在标签外部处理列表，然后在完成后将其设置在标签上。

（我不是真正的 ac# 家伙，所以提前为可能的语法错误道歉）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:41:03.693

将您的两个值存储在一个元组中并将其分配给标签。

# c# - 如何获取当前单词的段落并将其删除？

> ID：13468243
> 
> 赞同：2
> 
> 时间：2012-11-20T07:14:46.193
> 
> 标签：c#

我正在做一个单词关系应用程序，现在我有一个书签在一个位置，我怎样才能得到当前段落并删除它？谢谢。代码如下。

```
 /// <summary>
/// Word Application class
/// </summary>
public class WordApplication
{
    object nullobj=Missing.Value;
    _Application app;
    _Document doc;

    public WordApplication()
    {
        app=new ApplicationClass();
        Config config = new Config();
        object file = config.InputFilePath;
        try {
            doc=app.Documents.Open(ref file,ref nullobj,ref nullobj,
                ref nullobj,ref nullobj,ref nullobj,
                ref nullobj,ref nullobj,ref nullobj,
                ref nullobj,ref nullobj,ref nullobj,
                ref nullobj,ref nullobj,ref nullobj,ref nullobj) as _Document;
            doc.Activate();
        } catch(Exception ex) {
            Logger.Log(ex);
            throw ex;
        }
    }
    /// <summary>
    /// Remove current paragraph
    /// </summary>
    /// <param name="bookmark"></param>
    public void RemoveParaghRange(string bookmark)
    {
        foreach (Bookmark bm in doc.Bookmarks) {
            if (bm.Name.Equals(bookmark)) {
                //TODO:That's the point.How can I do it?
            }
        }
    }
} 
```

重点是：我怎样才能得到当前段落，然后我可以删除这个段落。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:59:00.777

您可以使用 Bookmark.Select 将当前选择移动到[书签](http://msdn.microsoft.com/en-us/library/office/bb240818%28v=office.12%29.aspx)：

```
bm.Select(); 
```

然后，您可以使用*Selection*对象来处理书签引用的[段落：](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.selection.paragraphs.aspx)

```
var paragraphs = app.Selection.Paragraphs; 
```

# asp.net - .NET 图表 - 动态值标签

> ID：13468246
> 
> 赞同：0
> 
> 时间：2012-11-20T07:15:10.810
> 
> 标签：asp.net, labels, asp.net-charts

我正在使用 System.Web.UI.DataVisualization.Charting 创建柱形图，它具有可变数量的系列和 X 数据点值。

我可以使用以下方法打开价值标签：

```
myChart.Series[0].IsValueShownAsLabel = true; 
```

然而，根据有多少系列和数据点，这些标签可能变得不可读。有没有办法拥有价值标签，但前提是它们是可读的？

我的一个想法是这样的：

```
int datapointsCount = ?????;
int labelPixelSize = 15;
int chartPixelSize = ?????;

if ((myChart.Series.Count * datapointsCount * labelPixelSize) > chartPixelSize) {
    foreach (Series mySeries in myChart.Series) {
        mySeries.IsValueShownAsLabel = false;
    }
} 
```

然而，这非常混乱，远非理想。

谢谢！！;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T09:00:35.983

启用该`Smart Label`功能。

```
myChart.Series[0].SmartLabelStyle.Enabled = true; 
```

控件最初尝试在数据点本身附近绘制重叠标签。如果这不起作用，它会在下一个可用空间中绘制标签，并绘制一条连接标签和数据点的线。

# java - 对象列表到 Hashmap

> ID：13468248
> 
> 赞同：0
> 
> 时间：2012-11-20T07:15:29.970
> 
> 标签：java, hashmap

我有一个类型对象列表如下，

`List<object>`记录列表

它将包含数据库记录（整数，字符串），如下所示，

```
[[1,AAAAAAAA],[2,BBBBBB]] 
```

我需要将列表中的数据拆分并放入 `Hashmap<Integer,String>`如下，

我知道如何从对象列表中拆分数据并填充哈希图。如何使用列表中的数据填充 Hashmap？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:20:27.227

```
List<String> l = new ArrayList<String>();
Map<Integer,String> m = new HashMap<Integer, String>();
Iterator<String> ite = l.iterator();
while(ite.hasNext())
{
    String sTemp[] =ite.next().split(",");
    m.put(Integer.parseInt(sTemp[0]), sTemp[1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:27:23.260

```
package listHashMap;
import java.util.*;
public class MyList {
    public static void main(String [] args)
    {
        List<String> aList=new ArrayList<String>();
        Map<Integer,String> aMap = new HashMap<Integer, String>();
        aList.add("AAAA");
        aList.add("BBBB");
        for(int i=0;i<aList.size();i++){
            aMap.put(i+1,aList.get(i));
        }
        System.out.println(aMap.toString());

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:23:51.877

```
 HashMap<Integer, String> map = new HashMap<Integer, String>();

   for (MyObject element : list) {
       if (element != null)
           map.put(element.getInt(), element.getString());
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:26:08.703

如果你`List<object>`包含`Object[]`，你可以这样做

```
HashMap<Integer,String> map  = new HashMap<Integer, String>();
for( Object obj : recordList) {
   Object[] objA = (String[]) obj ;
   map.put((Integer) objA[0],(String) objA[1]);
} 
```

# mysql - 在 VB.NET 中循环遍历 Datagridview

> ID：13468249
> 
> 赞同：0
> 
> 时间：2012-11-20T07:15:34.290
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010, datagridview

有没有办法遍历datagridview中的所有行，搜索列中具有相同数据的所有行...

示例：DGV1 有列`ID, TransID, Name, Desc`

假设我在那个 DGV 中有 3 行，

2行有相同的`TransID = 1`

最后一行有一个`TransID = 2`.

在我`Textbox1`输入“2”并按下按钮。

我想遍历 DGV1 以找到与我在文本框中输入的 TransID 相同的所有行，并将这些数据以另一种形式复制到 DGV2 ...

我早些时候问了一个问题，但似乎没有人能帮助我，我真的需要帮助......要了解更多关于我的困境，这里是我之前问题的链接......

[如何循环遍历datagridview 1并将循环结果以不同的形式和数据库表复制到datagridview2](https://stackoverflow.com/questions/13466028/how-to-loop-through-datagridview-1-and-copy-loop-results-to-datagridview2-in-a-d#comment18421620_13466028)

* * *

@HaBouF 这是我从您的代码中所做的，现在我设法过滤了 DGV

数据库名称是`test`DGV1(Form1) 的`tested`表名是 DGV2(Form2) 的表名是`testing`

**代码**

`Dim ta As New testDataSetTableAdapters.testedTableAdapter` `Dim f2 As New Form2`

```
 dv.Table = TestDataSet.tested
      dv.RowFilter = "TransID LIKE '%" & TextBox1.Text & "%'"
      f2.DGV2.DataSource = dv
      f2.Show() 
```

此代码过滤数据并显示它，`DGV2`但是因为我们替换了数据源`DGV2`，DGV2中的现有数据被暂时删除，我如何将过滤后的数据添加到表中`testing(DGV2)` 而不必删除现有数据`DGV2` **或**直接将其添加到`Database`因为我可以管理只需添加一个`Refresh button`以将数据源更改`DGV2`回`testing`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:31:05.310

试试这个：我想象你有一个数据表（dtOriginalData），你用数据填充它，然后你做：

```
dgv1.DataSource=dtOriginalData 
```

您需要过滤这些数据：

```
dtOriginalData.DefaultView.RowFilter = "TransID = " & textToFilter.Text

Dim MyNewTable As DataTable = dt.DefaultView.ToTable 
```

您现在需要的是打开新表单并提供过滤后的数据：

```
dim f2 as new Form2
f2.DGV2.DataSource=MyNewTable
f2.Show 
```

如果 form2 已经打开并且您想要更新它，这是可能的。

如果您显示为您的代码并更好地解释您想要实现的目标，我们将能够为您提供更多帮助。

# php - 如何将 php 中的这个字符串 var 传递给 JS 函数？

> ID：13468250
> 
> 赞同：1
> 
> 时间：2012-11-20T07:15:36.533
> 
> 标签：php, javascript, html, mysql

我查找与口袋妖怪关联的图像并用 php.ini 显示它。然后我希望能够通过单击它来“翻转卡片”。我已经第一次单击向下，但是第二次单击以将卡翻转过来是行不通的。我认为这是我在 JS 中的 php 变量的语法：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">

<title>
'Murica!
</title>

<script>

function changeImage()
{

element=document.getElementById('pokemon_card')

if 
(element.src.match("http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-     back.jpg?w=750"))
{element.src="'.$result['image_url'].'";} //<- no idea how to express the php string variable here

else
{element.src="http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg?     w=750";}

}

</script>

</head>

<body>

<?php

$dbhost = 'databasePlace';
    $dbname = 'mine';
    $dbuser = 'me';
    $dbpass = '******';

    $link = mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);

    mysqli_select_db($link,$dbname);    

$name = $_GET["fname"];

                $query = sprintf("SELECT image_url, Type
                                  FROM Pokemon c
                                  WHERE c.name='%s'",
                mysqli_real_escape_string($link,$name));

    $result = mysqli_fetch_assoc(mysqli_query($link,$query));

    echo '<img id="pokemon_card" onclick="changeImage()" height="225" 
width="165" src="'.$result['image_url'].'"/>';

mysqli_close($link);

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T07:18:34.343

最简单的方法是将一个小的 PHP 脚本放在 Javascript 中，就像这样......

```
<script type="text/javascript">
function bla() {
    var thevar = "<?php echo $thevar; ?>";
}
</script> 
```

换句话说，根据您的问题，您将用该行替换该`{element.src="'.$result['image_url'].'";}`行`{element.src="<?php echo $result['image_url']; ?>";}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:19:05.667

用这个替换你的行：

```
element.src = "<?= $result['image_url'] ?>"; 
```

或者您可以设置一个 javascript var 并调用它：

```
var imageUrl = "<?= $result['image_url'] ?>";

// ...

element.src = imageUrl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T07:20:33.933

你必须使用

```
 json_encode

 <?php
  $arr = array ('a'=>1,'b'=>2,'c'=>3,'d'=>4,'e'=>5);
  echo $t=json_encode($arr); // {"a":1,"b":2,"c":3,"d":4,"e":5}

 ?> 
```

现在 $t 你可以传入 js 函数

在js代码中：

```
<script type="text/javascript">
function you_fun_nm() {
    var val = <?php echo $t; ?>
     alert(val);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T07:21:00.360

尝试在javascript中编写php变量如下

```
{element.src="'<?php echo $result['image_url']; ?>'";} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T07:39:13.407

1.  您必须修改您的 Javascript 函数，以下是修改后的版本

    ```
    function changeImage(image_from_db)
    {
        element=document.getElementById('pokemon_card')

        if 
        (element.src == "http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg?w=750")
        {
            element.src = image_from_db;} //<- image_from_db is being passed by you PHP script
        else
        {
            element.src="http://dmisasi.files.wordpress.com/2010/12/david-pokemon-card-back.jpg?w=750";
        }
    } 
    ```

2.  然后像这样在您的图像标签上调用上述函数

[![在此处输入图像描述](../Images/f222b9d8b1875c8f1c654a526737f453.png)](https://i.stack.imgur.com/5ljeL.png)

# ruby - linux 在 ruby (+Qt) 中定义全局键盘快捷键

> ID：13468251
> 
> 赞同：0
> 
> 时间：2012-11-20T07:15:37.923
> 
> 标签：ruby, qt, keyboard-shortcuts

如何在 ruby​​ 桌面应用程序中定义+处理全局键盘？我正在运行 Linux 并使用 Qt。我的程序应该在系统托盘中，每当按下某个全局键盘快捷键时，它应该处理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T09:24:39.077

[您可以使用libqxt](http://dev.libqxt.org/libqxt/wiki/Home)获得全局快捷方式（因为您已经在使用 Qt，它不应该打扰您）。如果您需要直接在 Ruby 中使用它们，那么您应该检查这个问题：[How can I call C++ functions from inside ruby](https://stackoverflow.com/questions/1542520/how-can-i-call-c-functions-from-within-ruby)

# javascript - 如何手动关闭推特登录弹出窗口？

> ID：13468260
> 
> 赞同：2
> 
> 时间：2012-11-20T07:16:17.520
> 
> 标签：javascript, jquery, html

[我已经使用@Anywhere](https://dev.twitter.com/docs/anywhere/welcome)为我的网站创建了自定义的 Twitter 登录按钮 。我的问题是我想手动关闭 twitter 登录弹出窗口，因为我的弹出窗口不会自动关闭，因为它重定向到我提供的 url 并且不会关闭。

下面是我正在工作的代码：

```
 twttr.anywhere(function (T) {

           var currentUser,

            screenName,

            profileImage,

            profileImageTag;

    document.getElementById("tweet").onclick = function () {

      T.signIn();

    };
     T.bind("authComplete", function (e, user) {

     window.location.reload();

    });
        if (T.isConnected()) {

          currentUser = T.currentUser;        
          var add = currentUser.data('name'); //Getting user name from its twitter account

          var n = add.split(" ");

          document.getElementById('firstName').value = n[0];
          alert(document.getElementById('firstName').value);
          document.getElementById('LastNm').value = n[1];
          //T("#twitter-connect-placeholder").connectButton();
            twttr.anywhere.signOut();
            } else {

          //T("#twitter-connect-placeholder").connectButton();

           /* Making the text box value empty*/
           document.getElementById('firstName').value = "";
          document.getElementById('LastNm').value = "";

          /* Making the text box value empty*/
        };

  }); 
```

# c#-3.0 - 使用组合框过滤数据网格

> ID：13468264
> 
> 赞同：0
> 
> 时间：2012-11-20T07:16:51.043
> 
> 标签：c#-3.0

我创建了一个这样的datagridview

```
public void gridviewsetup()
    {
      tbl_Aplication.Columns.Add("1", "Empid");
        tbl_Aplication.Columns.Add("2", "Emp no");
        tbl_Aplication.Columns.Add("3", "Emp Name");
        tbl_Aplication.Columns.Add("4", "Department ");
        tbl_Aplication.Columns.Add("5", "Designation");
        tbl_Aplication.Columns.Add("6", "Shift");
        tbl_Aplication.Columns.Add("7", "Start Time");
        tbl_Aplication.Columns.Add("8", "End Time");
        tbl_Aplication.Columns.Add("9", "OT");
        tbl_Aplication.Columns.Add("10", "Reversed Swipe Out");            
        tbl_Aplication.RowTemplate.Height = 18;            
    } 
```

我已经填充了一个数据表来填充数据 dgridview

```
 public void filldatagrid()
    {
        if (cmb_dept.Text.Trim() != "")
        {

Datatable employedata = empreg.getallemployeeshiftdetails(int.Parse(cmb_dept.SelectedValue.ToString()), Program.LOCTNPK);

          tbl_Aplication.Rows.Clear();
        tbl_Aplication.DataSource = null;
        for (int i = 0; i < employedata.Rows.Count; i++)
        {

            tbl_Aplication.Rows.Add();
            tbl_Aplication.Rows[i].Cells[1].Value = employedata.Rows[i][0];

            tbl_Aplication.Rows[i].Cells[2].Value = employedata.Rows[i][1];
            tbl_Aplication.Rows[i].Cells[3].Value = employedata.Rows[i][2];
            tbl_Aplication.Rows[i].Cells[4].Value = employedata.Rows[i][3];
            tbl_Aplication.Rows[i].Cells[5].Value = employedata.Rows[i][4];
            tbl_Aplication.Rows[i].Cells[6].Value = employedata.Rows[i][5];
            tbl_Aplication.Rows[i].Cells[7].Value = employedata.Rows[i][6];   
            tbl_Aplication.Rows[i].Cells[8].Value = employedata.Rows[i][7];
            tbl_Aplication.Rows[i].Cells[9].Value = 0;
            tbl_Aplication.Rows[i].Cells[10].Value = employedata.Rows[i][7];           

        }
    } 
```

}

现在我想用组合框中选择的名称过滤数据网格中的数据而不返回数据库，我这样做了，但它显示错误

```
 private void cmb_designation_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (desgflag != 0)
        {
            if (cmb_dept.SelectedValue!=null )
            {

           // tbl_Aplication.DataSource = employedata;
                ((DataTable)tbl_Aplication.DataSource).DefaultView.RowFilter = " designationnName like '%" + cmb_dept.Text.Trim() + "%' ";
         }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T07:59:10.457

我已经做到了

```
private void cmb_department_SelectedIndexChanged(object sender, EventArgs e)
        {

            try
            {
                if (cmb_department.Text.Trim() == "" || cmb_department.Text.Trim() == null)
                {

                    tbl_DestinationData.DataSource = dt;
                }

                else
                {
                    ((DataTable)tbl_DestinationData.DataSource).DefaultView.RowFilter = " Dept like '%" + cmb_department.Text.Trim() + "%' ";

                }

            }
            catch (Exception )
            {
                throw;
            }

    } 
```

# android - 我的图片无法填满标签

> ID：13468265
> 
> 赞同：1
> 
> 时间：2012-11-20T07:16:52.507
> 
> 标签：android

我开发了一个像下面这样的应用程序，在mainActivity中，当我尝试向TAB1添加图像时，图片无法填满选项卡，它有一个边框丢失。

![活动图片](../Images/003536c8974229b05ff4ecf48285321b.png)

黄色部分是 TAB1，我需要用 TAB1 填充黄色。任何帮助将不胜感激:)，谢谢

## 编辑：

我更新了我的密钥代码

```
public class MainActivity extends TabActivity implements OnTabChangeListener{

    private TabSpec ts1,ts2,ts3;//declare three page
    private TabHost tableHost;

    @override
    public void onCreate(Bundle savedInstanceState){
    super.onCreat(savedInstanceState);
    tableHost=this.getTabHost();
    LayoutInflater.from(this).inflate(R.layou.activity_main,tableHost.getTabContentView());
    ts1=tableHost.newTabSpec("Tabone");
    ts1.setIndicator("TAB1",getResources().getDrawable(R.drawable.read2));
    ts1.setContent(R.id.btn);
    ts2=tableHost.newTabSpec("Tabtwo");
    ts2.setIndicator("TAB2");
    ts2.setContent(R.id.et);
    ts3=tableHost.newTabSpec("Tabthree");
    ts3.setIndicator("TAB3");
    ts3.setContent(R.id.mylayout);
    tableHost.addTab(ts1);
    tableHost.addTab(ts2);
    tableHost.addTab(ts3);
    tableHost.setOntabChangedListener(this);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:25:02.533

尝试使用[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)创建选项卡图标。您将获得“本机选项卡图标”外观所需的所有资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:46:15.763

尝试这个，

```
In this coding you should use two images that one is actual image and another one  that's you added yellow color background with your image. 
```

## tab1_mainxml : //这个xml文件应该存储到drawable文件夹中

```
 <?xml version="1.0" encoding="utf-8"?>
     <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/tab1icon"

      android:state_selected="true"/>
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/tab1icon2" />
    </selector> 
```

## 标签主机活动：

```
 tabHost.addTab(tabHost
            .newTabSpec("Tab1")

            .setIndicator("Tab1", res.getDrawable(R.drawable.tab1_mainxml))
            .setContent(intent)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:47:15.430

您是否在模拟器或真实设备上尝试过您的应用程序？如果您已将“match_parent”设置为您的布局，它应该可以工作。但是我的三星 Galaxy S3 也遇到了类似的问题，这可能是硬件错误，而不是您的故障。

## 编辑

好的，所以如果您只使用没有 xml 定义的 Java-Code，也许您应该为 tabhost 设置布局参数。我真的不知道，只是一个假设。

```
 tableHost = new TabHost(this);
    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    tableHost.setLayoutParams(params); 
```

但是有很多 LayoutParams，不知道 LinearLayout.LayoutParams 是否适合您。如果它不起作用，您必须尝试其他一些 LayoutParams。

# windows-phone-7 - WP7 应用内购买

> ID：13468269
> 
> 赞同：8
> 
> 时间：2012-11-20T07:17:07.623
> 
> 标签：windows-phone-7, in-app-purchase, in-app-billing

你能告诉我如何将 In-App 集成到 Windows Phone **7**吗？我知道对于 Windows Phone 8，此功能是本机的。但是我们也需要将它实现到 WP7 中。

服务应提供通过卡（Master、Visa）、SMS 或其他方式支付的机会。

我知道 Linxter，但它是私人测试版，开发人员不会回复我们。也许其他服务存在？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T07:38:23.740

据我所知，您无法在 Windows Phone 7 中集成 IAP（应用内购买），因为它依赖于一些不适用于 Windows Phone 7 Mango(7.5) 的库，并且它仅适用于 Windows Phone 8。

但是你可以做两件事。

1.  如果您的应用程序是使用 Windows Phone 7.5 编译的，并且如果它在 Windows Phone 8 设备上运行，那么我们可以通过反射方法放置 IAP。因此，如果您的 Windows Phone 7.5 编译应用程序在 7.5 固件设备上运行，则不会有 IAP，但如果相同的应用程序在 8.0 固件设备上运行，那么它将实现 IAP。

[http://channel9.msdn.com/Shows/Inside+Windows+Phone/Inside-Windows-Phone-45--Adding-In-App-Purchase-as-a-light-up-feature-to-your-Windows -Phone-7-Games](http://channel9.msdn.com/Shows/Inside+Windows+Phone/Inside-Windows-Phone-45--Adding-In-App-Purchase-as-a-light-up-feature-to-your-Windows-Phone-7-Games)

1.  您可以使用任何支付网关并集成到您的网络中，一旦用户点击支付，您应该在网络浏览器任务中打开该支付页面，网络将通过安全连接“HTTPS”进行通信。

我希望它会帮助你:)

# java - Apache CXF 中用于在 Exception_Exception 中获取服务器堆栈跟踪的问题

> ID：13468270
> 
> 赞同：1
> 
> 时间：2012-11-20T07:17:13.257
> 
> 标签：java, web-services, apache, exception, cxf

我已经实现了 Apache CXF WebService 并尝试通过 Swings 应用程序访问 WebService。我面临的问题是 CXF 在客户端从 WSDL 创建了一个名为 Exception_Exception 的类。当服务器端发生异常时，客户端 Exception_Exception 会被调用，但我在 Exception_Exception 堆栈跟踪中没有收到与服务器相同的堆栈跟踪。下面是 CXF 生成的类：

```
package com.abc.it.vcare.service;

import javax.xml.ws.WebFault;

/**
 * This class was generated by the JAX-WS RI.
 * JAX-WS RI 2.2-hudson-752-
 * Generated source version: 2.2
 * 
 */
@WebFault(name = "Exception", targetNamespace = "http://service.vcare.it.abc.com/")
public class Exception_Exception
    extends java.lang.Exception
{

/**
 * Java type that goes as soapenv:Fault detail element.
 * 
 */
private com.axiom.it.vcare.service.Exception faultInfo;

/**
 * 
 * @param message
 * @param faultInfo
 */
public Exception_Exception(String message, com.axiom.it.vcare.service.Exception faultInfo) {
    super(message);
    this.faultInfo = faultInfo;
}

/**
 * 
 * @param message
 * @param faultInfo
 * @param cause
 */
public Exception_Exception(String message, com.axiom.it.vcare.service.Exception faultInfo, Throwable cause) {
    super(message, cause);
    this.faultInfo = faultInfo;
}

/**
 * 
 * @return
 *     returns fault bean: com.axiom.it.vcare.service.Exception
 */
public com.axiom.it.vcare.service.Exception getFaultInfo() {
    return faultInfo;
}

} 
```

请帮忙，我应该怎么做才能在我的客户端 Exception_Exception 中获得服务器异常中给出的相同 StackTrace。

谢谢，杰·G。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:12:32.920

What version of CXF are you using? This is an old CXF issue that has been addressed in the most recent versions. Try using version 2.7.0 of CXF, that should solve the problem.

# php - 函数中的 PHP 命名空间全局关键字

> ID：13468274
> 
> 赞同：0
> 
> 时间：2012-11-20T07:17:28.903
> 
> 标签：php, function, namespaces

```
<?php
namespace Top
{
    $a = "Robert";
    $b = "Richard";
    $c = "Maurice";
    function get_a()
    {
    global $a;
    return $a;
    }
    function get_b()
    {
    global $b;
    return $b;
    }
    function get_c()
    {
    global $c;
    return $c;
    }
    echo namespace\Middle\get_a();
    echo namespace\Middle\Bottom\get_c();
    echo namespace\get_b();
}

namespace Top\Middle
{
    $a = "Dauraun";
    $b = "Khalid ";
    $c = "Humberto";
    function get_a()
    {
        global $a;
        return $a;
    }
    function get_b()
    {
        global $b;
        return $b;
    }
    function get_c()
    {
        global $c;
        return $c;
    }
}

namespace Top\Middle\Bottom
{
    $a = "Terry";
    $b = "Jesse";
    $c = "Chris";
    function get_a()
    {
        global $a;
        return $a;
    }
    function get_b()
    {
        global $b;
        return $b;
    }
    function get_c()
    {
        global $c;
        return $c;
    }
} 
```

?>

因此，在上面的代码片段中，我尝试使用带有相应命名空间的 global 关键字的函数显示正确的变量内容，但没有发生预期的结果。返回的变量内容是使用 echo 语句的命名空间的内容，而不是来自指定的命名空间。输出为“RobertMauriceRichard”。有人可以解释一下吗？也许这是我对命名空间中函数内的“全局”关键字的误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:56:45.933

因为[只有 4 种类型的代码受命名空间影响](http://www.php.net/manual/en/language.namespaces.definition.php)：类、接口、函数、常量。

因此，您的,`$a`和语句在整个文件中都可用 - 实际上是相同的。`$b``$c``echo`

当您调用 时`namespace\Middle\get_a();`，`$a`仍然是“Robert”，因此返回了“Robert”。

尝试将`echo`组放入不同的命名空间，您会观察到不同的结果：

```
namespace Top\Middle
{
    /*...*/
    echo \Top\Middle\get_a();
    echo \Top\Middle\Bottom\get_c();
    echo \Top\get_b();
}
/* outputs "DauraunHumbertoKhalid" */

namespace Top\Middle\Bottom
{
    /*...*/
    echo \Top\Middle\get_a();
    echo \Top\Middle\Bottom\get_c();
    echo \Top\get_b();
}
/* outputs "TerryChrisJesse" */ 
```

# java - 如何在 Hibernate 中使用 mysql 的语法，例如 ifnull(max(Id),0)

> ID：13468276
> 
> 赞同：8
> 
> 时间：2012-11-20T07:17:29.897
> 
> 标签：java, mysql, hibernate

看起来 Hibernate 没有这种语法，对吗？![在此处输入图像描述](../Images/a45e41557d72fd5c3130cec42fb41eb8.png)

```
public int MaxIdenx() {
    int max = 0;
    String hql = "select ifnull(max(empId),0)from Emp";
    Query query = session.createQuery(hql);
    List currentSeq = query.list();
    if (currentSeq == null) {
        return max;
    } else {
        max = (Integer) currentSeq.get(0);
        return max + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T09:37:02.813

这有几个问题......

*   `IFNULL`在`COALESCE`HQL[中（休眠查询语言中的 IFNULL 等效项？](https://stackoverflow.com/questions/1657637/ifnull-equivalent-in-hibernate-query-language)。）
*   如果您只想返回一个对象，请使用 uniqueResult() 而不是`list().get(0)`.
*   HQL 没有 MySQL 的所有语言结构。使用原始 SQL 可能会更好`session.createSqlQuery()`。
*   正如 zerkms 所说，看起来您正在管理自己的序列。看看`IdentifierGenerator`（[http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/](http://blog.anorakgirl.co.uk/2009/01/custom-hibernate-sequence-generator-for-id-field/)）。

无论如何，代码将是......

```
public int MaxIdenx() {
    int max = (Integer)session
        .createQuery("SELECT COALESCE(MAX(empId), 0) FROM Emp")
        .uniqueResult();

    return max + 1;
} 
```

# c# - 如何在 asp.net 中制作“添加到剪贴板”功能

> ID：13468284
> 
> 赞同：3
> 
> 时间：2012-11-20T07:17:51.927
> 
> 标签：c#, asp.net, .net

如果我必须在文本框或标签中复制文本，如何在 asp.net 网站中实现**添加到剪贴板功能。**请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T07:20:10.597

您需要使用 JavaScript 来实现这一点，因为复制到用户的剪贴板必须在客户端机器上完成，而不是在服务器上完成。看到这个帖子：

[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

# c - 如何阅读、理解、分析和调试 Linux 内核恐慌？

> ID：13468286
> 
> 赞同：51
> 
> 时间：2012-11-20T07:17:56.263
> 
> 标签：c, linux, debugging, linux-kernel, panic

考虑以下 Linux 内核转储堆栈跟踪；例如，您可以通过调用从内核源代码触发恐慌`panic("debugging a Linux kernel panic");`：

```
[<001360ac>] (unwind_backtrace+0x0/0xf8) from [<00147b7c>] (warn_slowpath_common+0x50/0x60)
[<00147b7c>] (warn_slowpath_common+0x50/0x60) from [<00147c40>] (warn_slowpath_null+0x1c/0x24)
[<00147c40>] (warn_slowpath_null+0x1c/0x24) from [<0014de44>] (local_bh_enable_ip+0xa0/0xac)
[<0014de44>] (local_bh_enable_ip+0xa0/0xac) from [<0019594c>] (bdi_register+0xec/0x150) 
```

*   代表`unwind_backtrace+0x0/0xf8`什么`+0x0/0xf8`？
*   我怎样才能看到 C 代码`unwind_backtrace+0x0/0xf8`？
*   如何解读恐慌的内容？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-20T07:30:33.877

这只是一个普通的回溯，这些函数以相反的顺序调用（第一个调用被前一个调用，依此类推）：

```
unwind_backtrace+0x0/0xf8
warn_slowpath_common+0x50/0x60
warn_slowpath_null+0x1c/0x24
ocal_bh_enable_ip+0xa0/0xac
bdi_register+0xec/0x150 
```

这是符号 + 偏移量/长度，在[了解内核糟糕](https://opensourceforu.com/2011/01/understanding-a-kernel-oops/)以及如何调试内核糟糕 `bdi_register+0xec/0x150`中有更多信息。还有这个关于[调试内核的优秀教程](http://www.freebsd.org/doc/en/books/developers-handbook/kerneldebug.html)

注意：正如 Eugene 下面的建议，您可能想先尝试[addr2line](http://linux.die.net/man/1/addr2line)，但它仍然需要带有调试符号的图像，例如

`addr2line -e vmlinux_with_debug_info 0019594c(+offset)`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-23T18:04:29.713

以下是`addr2line`. 假设您拥有正确的目标工具链，您可以执行以下操作之一：

**使用`objdump`：**

1.  在内核根目录下找到您的`vmlinux`或文件，然后反汇编目标文件：`.ko`

    ```
    objdump -dS vmlinux > /tmp/kernel.s 
    ```

2.  打开生成的程序集文件，`/tmp/kernel.s`. 使用文本编辑器，例如`vim`. 转到 `unwind_backtrace+0x0/0xf8`，即搜索`unwind_backtrace`+的地址`offset`。最后，您在源代码中找到了有问题的部分。

**使用`gdb`：**

IMO，一个更优雅的选择是使用唯一的`gdb`. 假设您的主机上有合适的工具链：

1.  运行`gdb <path-to-vmlinux>`。
2.  在 gdb 的提示符下执行：`list *(unwind_backtrace+0x10)`.

* * *

*有关更多信息，您可以查看以下资源：*

1.  [内核调试技巧](https://wiki.ubuntu.com/Kernel/KernelDebuggingTricks)。
2.  [使用 Gdb 调试 Linux 内核](http://elinux.org/Debugging_The_Linux_Kernel_Using_Gdb)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-05-23T23:05:15.593

> 代表`unwind_backtrace+0x0/0xf8`什么`+0x0/0xf8`？

第一个数字 ( `+0x0`) 是**函数开头的偏移量**（`unwind_backtrace`在这种情况下）。第二个数字 ( `0xf8`) 是**函数的总长度**。鉴于这两条信息，如果您已经对故障发生的位置有预感，这可能足以证实您的怀疑（您可以（粗略地）告诉您在函数中走了多远）。

要获得相应指令的确切源代码行（通常比预感更好），`addr2line`请在其他答案中使用或其他方法。

# c - 无法在 VS 2010 中调试应用程序，抛出错误：无法打开 pdb 文件

> ID：13468288
> 
> 赞同：0
> 
> 时间：2012-11-20T07:18:12.847
> 
> 标签：c

以下是错误字符串：

Automation.exe'：已加载 'D:\Automation\debug\Automation.exe'，已加载符号。“Automation.exe”：已加载“C:\WINDOWS\system32\ntdll.dll”，已加载符号（源信息已剥离）。“Automation.exe”：已加载“C:\WINDOWS\system32\kernel32.dll”，已加载符号（源信息已剥离）。“Automation.exe”：已加载“D:\Automation\debug\libxml2.dll”，二进制文件未使用调试信息构建。“Automation.exe”：已加载“C:\WINDOWS\system32\wsock32.dll”，已加载符号（已删除源信息）。“Automation.exe”：已加载“C:\WINDOWS\system32\ws2_32.dll”，已加载符号（已删除源信息）。“Automation.exe”：已加载“C:\WINDOWS\system32\advapi32.dll”，已加载符号（已删除源信息）。'Automation.exe'：加载'C：\WINDOWS\system32\rpcrt4.dll'，符号加载（源信息剥离）。“Automation.exe”：已加载“C:\WINDOWS\system32\secur32.dll”，已加载符号（已删除源信息）。“Automation.exe”：已加载“C:\WINDOWS\system32\msvcrt.dll”，已加载符号（已删除源信息）。“Automation.exe”：已加载“C:\WINDOWS\system32\ws2help.dll”，已加载符号（已删除源信息）。“Automation.exe”：已加载“D:\Automation\debug\iconv.dll”，二进制文件未使用调试信息构建。“Automation.exe”：已加载“D:\Automation\debug\zlib1.dll”，找不到或打开 PDB 文件“Automation.exe”：已加载“D:\Automation\debug\hasp_windows_37517.dll”，二进制文件没有使用调试信息构建。'Automation.exe'：已加载'D：\Automation\debug\sntl_licgen_windows.dll'，二进制文件未使用调试信息构建。'Automation.exe'：已加载 'C:\WINDOWS\system32\user32.dll'，已加载符号（已删除源信息）。'Automation.exe'：已加载 'C:\WINDOWS\system32\gdi32.dll'，已加载符号（已删除源信息）。“Automation.exe”：已加载“C:\WINDOWS\system32\msvcr100.dll”，已加载符号（已删除源信息）。'Automation.exe'：已加载 'C:\WINDOWS\system32\imm32.dll'，已加载符号（已删除源信息）。Automation.exe 中 0x007ff9ba 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000000。Automation.exe 中 0x007ff82f 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000000。程序“[400] Automation.exe：本机”

之前使用相同的配置，我成功地调试了应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:46:50.037

日志的最后几行表明您的应用程序在启动时崩溃。

> Automation.exe 中 0x007ff9ba 处的第一次机会异常：**0xC0000005：访问冲突读取位置 0x00000000。**Automation.exe 中 0x007ff82f 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000000。程序“[400] Automation.exe: Native”已退出，代码为 1 (0x1)。

在 main 上设置断点，然后单步执行代码以查看崩溃的位置。在 VS 下，您应该在抛出异常时看到一个对话框。您可以在此处单击`Debug`以停止执行并查看堆栈跟踪。

# javascript - 注册表单验证：前端 Javascript 与后端 Python？

> ID：13468289
> 
> 赞同：-4
> 
> 时间：2012-11-20T07:18:20.553
> 
> 标签：javascript, python, web-applications, web, client-server

客户端 Javascript 与服务器端 Python

如果我想创建一个注册表单，通过每种方法验证 - 检查 - 输入错误的优缺点是什么。你有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T07:23:12.273

您**需要**服务器端（后端）代码来创建注册系统。毕竟，您需要以某种方式创建用户并存储用户输入的数据，而这无法在客户端上完成。

混合服务器端和客户端的最常见情况是这样的：

*   使用客户端代码来改善用户体验。这意味着： 初始验证，可能是 AJAX 请求以检查例如所选用户名是否有效且可用。
*   使用服务器端代码进行最终验证（您不能信任来自客户端的*任何内容），并且显然通过创建新用户并将其存储在数据库中来最终执行实际注册。*

假设您的绝大多数用户都启用了 JavaScript，并且您也不想为没有启用 JavaScript 的用户提供出色的 UX，您*可以*通过在客户端中提供详细的错误消息（例如，涉及突出显示错误字段）来简化事情- 端验证逻辑，如果服务器端验证失败，则仅显示一般错误消息。
但是，如果您无法在客户端上正确验证某些事情（即使在他启用 JS 的情况下不太可能，因为您可以使用 AJAX），您应该确保服务器端验证确实显示正确的错误消息，所以用户知道出了什么问题。

如果用户没有提交任何巨大的东西（例如文件上传）并且您有一些干净的方法来重新填写所有表单字段以防提交无效，那么最简单的解决方案将只进行服务器端验证，因为这样可以避免创建验证逻辑两次（假设您没有某种方法可以以服务器端和客户端代码都可以访问的抽象方式指定它）。

另一种可能性 - 特别是在涉及密码字段时是一个好主意（对于良好的用户体验，即使在提交错误之后您也希望保留用户输入的内容，但从安全角度来看，您不应该将用户的密码发回以避免它被缓存某处） - 将使用 AJAX 提交整个表单，例如发送回一个 JSON 有效负载，其中包含在成功的情况下应该重定向用户的 URL，或者在失败的情况下发送错误列表。这尤其具有优势，您可以轻松地编写服务器端代码，在 AJAX 请求的情况下返回 JSON 有效负载，在正常请求的情况下返回完整的 HTML 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:27:03.977

**JavaScript**
- 优点：
易于测试和实现。在进行表单验证时，JavaScript 可以进行即时验证，并具有许多用于正则表达式检查和 DOM 遍历 (jQuery) 的实用程序。此外，处理被卸载到客户端（尽管这可能可以忽略不计）。
- 缺点：
不支持 JavaScript 的用户

**Python**
- 优点：
支持没有 JavaScript 的用户。隐藏，因此更安全。
- 缺点：
需要刷新页面才能显示结果。这可能会让一些用户感到沮丧，因为并非所有字段（例如密码字段）都应保存。

我会使用 JavaScript 进行即时反馈，使用 Python 进行最终结果错误检查，并作为没有 JavaScript 的用户的后备。

# asp.net - 为什么我看不到动态创建的控件？

> ID：13468291
> 
> 赞同：-1
> 
> 时间：2012-11-20T07:18:22.877
> 
> 标签：asp.net

当我单击按钮时，什么也没有发生！

```
public void cmdButton1_OnClick(object sender, EventArgs e)
        {
            Panel myPanel = new Panel();
            myPanel.ID = "Panel1";

            for (int i = 0; i < numtourist; i++)
            {
                Label myLabel = new Label();
                myLabel.ID = "lblNameL" + i.ToString();
                myLabel.Text = "Трите имена на латиница ";
                TextBox myTextBox1 = new TextBox();
                myTextBox1.ID = "txtNameL" + i.ToString();
                myPanel.Controls.Add(myLabel);
                myPanel.Controls.Add(myTextBox1);

                Label mylabel2 = new Label();
                mylabel2.ID = "lblNameK" + i.ToString();
                mylabel2.Text = "Трите имена на кирилица";
                TextBox myTextBox2 = new TextBox();
                myTextBox2.ID = "txtNameK" + i.ToString();
                myPanel.Controls.Add(mylabel2);
                myPanel.Controls.Add(myTextBox2);

                Label myLabel3 = new Label();
                myLabel3.ID = "lblEGN" + i.ToString();
                myLabel3.Text = "EГН";
                TextBox myTextBox3 = new TextBox();
                myTextBox3.ID = "txtEGN" + i.ToString();
                myPanel.Controls.Add(myLabel3);
                myPanel.Controls.Add(myTextBox3);

                Label myLabel4 = new Label();
                myLabel4.ID = "lblPersonalCardNum" + i.ToString();
                myLabel4.Text = "Номер на лична карта";
                TextBox myTextBox4 = new TextBox();
                myTextBox4.ID = "txtPersonalCardNum" + i.ToString();
                myPanel.Controls.Add(myLabel4);
                myPanel.Controls.Add(myTextBox4);

                Label myLabel5 = new Label();
                myLabel5.ID = "lblDateOfIssuePC " + i.ToString();
                myLabel5.Text = "Дата на издаане на лична карта:";
                TextBox myTextBox5 = new TextBox();
                myTextBox5.ID = "txtDateOfIssuePC" + i.ToString();
                myPanel.Controls.Add(myLabel5);
                myPanel.Controls.Add(myTextBox5);

                Label myLabel6 = new Label();
                myLabel6.ID = "lblDateOfExpiryPC " + i.ToString();
                myLabel6.Text = "Дата на валидност на лична карта:";
                TextBox myTextBox6 = new TextBox();
                myTextBox6.ID = "txtDateOfExpiryPC" + i.ToString();
                myPanel.Controls.Add(myLabel6);
                myPanel.Controls.Add(myTextBox6);

                Label mylabel6_1 = new Label();
                mylabel6_1.ID = "lblIssuedFrom" + i.ToString();
                mylabel6_1.Text = "Издадеа от";
                TextBox myTextBox6_1 = new TextBox();
                myTextBox6_1.ID = "txtIssuedFrom" + i.ToString();
                myPanel.Controls.Add(mylabel6_1);
                myPanel.Controls.Add(myTextBox6_1);

                Label myLabel7 = new Label();
                myLabel7.ID = "lblDateOfIssuePass " + i.ToString();
                myLabel7.Text = "Дата на издаване на международен паспорт:";
                TextBox myTextBox7 = new TextBox();
                myTextBox7.ID = "txtDateOfIssuePass" + i.ToString();
                myPanel.Controls.Add(myLabel7);
                myPanel.Controls.Add(myTextBox7);

                Label myLabel7_1 = new Label();
                myLabel7_1.ID = "lblPassportNum" + i.ToString();
                myLabel7_1.Text = "Номер на паспорт:";
                TextBox myTextBox7_1 = new TextBox();
                myTextBox7_1.ID = "txtPassportNum" + i.ToString();
                myPanel.Controls.Add(myLabel7_1);
                myPanel.Controls.Add(myTextBox7_1);

                Label myLabel8 = new Label();
                myLabel8.ID = "lblDateOfExpiryPass " + i.ToString();
                myLabel8.Text = "Дата на валидност на международен паспорт:";
                TextBox myTextBox8 = new TextBox();
                myTextBox8.ID = "txtDateOfExpiryPass" + i.ToString();
                myPanel.Controls.Add(myLabel8);
                myPanel.Controls.Add(myTextBox8);

                Label myLabel9 = new Label();
                myLabel9.ID = "lblHomeContact" + i.ToString();
                myLabel9.Text = "Домашен телефон";
                TextBox myTextBox9 = new TextBox();
                myTextBox9.ID = "txtHomeContact" + i.ToString();
                myPanel.Controls.Add(myLabel9);
                myPanel.Controls.Add(myTextBox9);

                Label myLabel10 = new Label();
                myLabel10.ID = "lblMobContact" + i.ToString();
                myLabel10.Text = "Мобилен телефон";
                TextBox myTextBox10 = new TextBox();
                myTextBox10.ID = "txtMobContact" + i.ToString();
                myPanel.Controls.Add(myLabel10);
                myPanel.Controls.Add(myTextBox10);

                Label myLabel11 = new Label();
                myLabel11.ID = "lblEmail" + i.ToString();
                myLabel11.Text = "E-mail адрес";
                TextBox myTextBox11 = new TextBox();
                myTextBox11.ID = "txtEmail" + i.ToString();
                myPanel.Controls.Add(myLabel11);
                myPanel.Controls.Add(myTextBox11);

                Label myLabel12 = new Label();
                myLabel12.ID = "lblAddress" + i.ToString();
                mylabel2.Text = "Адрес";
                TextBox myTextBox12 = new TextBox();
                myTextBox12.ID = "txbAddress" + i.ToString();
                myPanel.Controls.Add(myLabel12);
                myPanel.Controls.Add(myTextBox12);

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:46:02.173

您已经创建了一个*面板*并在其上添加了其他*控件*，但是您忘记将此创建的面板 (myPanel) 添加到您的*表单*中。

您缺少以下代码行：

```
myForm.Controls.Add(myPanel); 
```

*将myForm*更改为您的表单名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:23:08.060

你又少了一步。现在将您的面板控件添加到另一个控件容器*或*至少您的页面控件。

# objective-c - 在使用 MPMoviePlayerController 播放视频的视图上添加 CCLayer？

> ID：13468298
> 
> 赞同：1
> 
> 时间：2012-11-20T07:19:01.533
> 
> 标签：objective-c, ios, xcode, cocos2d-iphone

我创建了一个使用 MPMoviePlayerController 播放视频的视图。现在我希望在视频播放时显示一个 CCLayer 覆盖/重叠此视图。如何继续前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:16:18.840

//这是您提供视频路径并对其进行初始化的地方。

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"video_file_name" ofType:@"mp4/mov"]];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
moviePlayer.controlStyle = MPMovieControlStyleNone;
moviePlayer.shouldAutoplay = YES;
NSLog(@"%f", [[CCDirector sharedDirector] view].frame.size.width);
moviePlayer.view.frame = [[CCDirector sharedDirector] view].frame;
[[[CCDirector sharedDirector] view] addSubview:moviePlayer.view];
[[[CCDirector sharedDirector] view] bringSubviewToFront:moviePlayer.view];
[moviePlayer play];

[[NSNotificationCenter defaultCenter] addObserver:self // the object listening / "observing" to the notification
selector:@selector(playbackComplete:) // method to call when the notification was pushed
name:MPMoviePlayerPlaybackDidFinishNotification // notification the observer should listen to
object:moviePlayer]; // the object that is passed to the method

//[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:1.0 scene:[MainMenu scene] withColor:ccWHITE]];

} 
```

//这是你定义播放完成后会发生什么的地方

```
-(void)playbackComplete:(id)sender {
//    [(MPMoviePlayerController *)sender stop];
//    ((MPMoviePlayerController *)sender).view.hidden=YES;

//    [((MPMoviePlayerController *)sender) removeFromParentAndCleanup:YES];
[moviePlayer.view removeFromSuperview]; 
```

//这是您加载另一个场景的地方（例如：图像，动画等）

```
NSLog(@"Make transition");
CGSize size = [[CCDirector sharedDirector] winSize];
[[CCDirector sharedDirector] replaceScene:[CCTransitionSlideInT transitionWithDuration:1.0 scene:[GameLayer scene] ]];

} 
```

# c# - 用于在 C# .Net 中的 Xelement 文件中添加或删除 Xelement 的编程查询

> ID：13468299
> 
> 赞同：-2
> 
> 时间：2012-11-20T07:19:04.090
> 
> 标签：c#, .net, xml, xml-parsing

我有以下 XML 文件...

```
<TrebuchetWorkspaceTemplate>
 <InputDocument>
  <BusinessDocument>
   <BusinessRequirement />
   <ProcessModel />
  </BusinessDocument>
  <FunctionalDocuments />
  <UseCases />
  <Agile />
</InputDocument>
<Miscellaneous />
</TrebuchetWorkspaceTemplate> 
```

现在，如果我想要 1) 找到任何特定的 XElement 说“<BusinessRequirement/>”，我可以编写什么代码 2) 向其添加另一个新的 xelement 子项 3) 还在 xml 文件中找到任何 Xelement 以将其删除..

如果您回复具体的答案会很有帮助....或任何预先存在的代码....再次感谢您以前的答案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:23:06.013

> 现在我可以写什么代码，如果我想 1) 找到任何特定的 XElement 说`<BusinessRequirement/>`

出色地，

```
var element = doc.Descendants("BusinessRequirement").First(); 
```

会找到第*一个*这样的元素 - 但如果没有，你想做什么？或者如果有多个？

> 2) 向其中添加另一个新的 xelement 子项

之后调用`Add`：

```
element.Add(new XElement("foo")); 
```

> 3) 还可以在 xml 文件中找到任何 Xelement 以将其删除。

致电`Remove`：

```
element.Remove(); 
```

不过，您应该能够通过使用有关 LINQ to XML 的优秀教程或书籍来找到所有这些 - 您不应该仅仅通过在这里提问来尝试学习新技术；通过良好的指导系统地学习它很重要。LINQ to XML 是一个*很棒*的 AP ​​I，但您确实需要了解它的用法。

我建议您从 MSDN [LINQ to XML 主页](http://msdn.microsoft.com/en-us/library/bb387098.aspx)开始。

# wix - WiX 安装程序：无法安装到网盘

> ID：13468307
> 
> 赞同：1
> 
> 时间：2012-11-20T07:19:30.207
> 
> 标签：wix

我用 Visual Studio 2012 和 WiX 3.7 创建了一个安装程序。当我尝试在隐藏本地磁盘的终端服务器上安装它时，我需要能够选择网络路径来安装文件。如果我现在选择网络磁盘，我会收到一个消息框，提示“安装目录必须在本地硬盘驱动器上。”。

我试图将此行添加到 WiX 源：

```
<Property Id="WIXUI_DONTVALIDATEPATH" Value="1"/> 
```

但没有任何运气...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-12T03:30:31.760

至少在 3.10 中绝对有可能。将以下属性添加到您的主要 product.wxs ...

您必须输入要完全安装的路径。

如果您尝试更改它，请更改更改文件夹对话框，您将收到错误“安装目录必须是本地硬盘驱动器”

这是一个 WiX 错误，计划在 WiX 4.0 中修复 - [https://github.com/wixtoolset/issues/issues/4737](https://github.com/wixtoolset/issues/issues/4737)

希利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:04:37.590

我不认为这是可能的。您需要绘制网络位置以使其工作。

查看*[固件：关于在映射/共享驱动器上安装的问题](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/FW-Issue-Regarding-Install-on-mapped-shared-drives-td2101631.html)*。

# java - 在应用程序中添加签名栏

> ID：13468309
> 
> 赞同：1
> 
> 时间：2012-11-20T07:19:44.030
> 
> 标签：java, android, digital-signature, stylus-pen

我正在使用 android 做一个简单的快递系统。如果在交付过程结束时客户必须在电话上签名以确认他们收到了快递，我该怎么办。我如何使用android做到这一点。任何建议，建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:27:46.287

执行签名会占用大量空间，并且手机设备中的小区域不足以在交付过程结束时从客户那里获取签名，这是我的想法。

生成包含交货详细信息的列表。

--> 在交付时单击交付的项目会打开一个视图。

--> 在那个视图中客户端可以执行签名。

--> 您可以将该签名与交付详细信息一起保存在数据库中

--> 删除或转移项目从交付列表到交付项目（这应该是您的另一种视图方法）

这是我的想法

米那个任务。对于签名，您可以应用绘画方法和签名方法问我是否也需要帮助。谢谢

```
package com.paintexample;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.RectF;
import android.view.MotionEvent;
import android.view.View;

public class DrawView extends View {

    private static final float STROKE_WIDTH = 5f;

    /** Need to track this so the dirty region can accommodate the stroke. **/
    private static final float HALF_STROKE_WIDTH = STROKE_WIDTH / 2;

    private Paint paint = new Paint();
    private Path path = new Path();

    /** Optimizes painting by invalidating the smallest possible area. */
    private float lastTouchX;
    private float lastTouchY;
    private final RectF dirtyRect = new RectF();

    public DrawView(Context context) {
        super(context);

        paint.setAntiAlias(true);
        paint.setColor(Color.BLACK);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeWidth(STROKE_WIDTH);
    }

    /** Erases the signature. */
    public void clear() {
        path.reset();

        // Repaints the entire view.
        invalidate();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawPath(path, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            lastTouchX = eventX;
            lastTouchY = eventY;
            // There is no end point yet, so don't waste cycles invalidating.
            return true;

        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_UP:
            // Start tracking the dirty region.
            resetDirtyRect(eventX, eventY);

            // When the hardware tracks events faster than they are delivered,
            // the
            // event will contain a history of those skipped points.
            int historySize = event.getHistorySize();
            Logger.debug("historySize : " + historySize);
            for (int i = 0; i < historySize; i++) {
                float historicalX = event.getHistoricalX(i);
                float historicalY = event.getHistoricalY(i);
                expandDirtyRect(historicalX, historicalY);
                path.lineTo(historicalX, historicalY);
            }

            // After replaying history, connect the line to the touch point.
            // Logger.debug("eventX " + eventX);
            // Logger.debug("eventY " + eventX);
            //
            // Logger.debug("lastTouchX " + lastTouchX);
            // Logger.debug("lastTouchY " + lastTouchY);
            //
            // if (eventX == lastTouchX && eventY == lastTouchY) {
            //
            // path.addCircle(eventX, eventY, 20, Path.Direction.CW);
            //
            // }

            path.lineTo(eventX, eventY);

            break;

        default:
            Logger.debug("Ignored touch event: " + event.toString());
            return false;
        }

        // Include half the stroke width to avoid clipping.
        invalidate((int) (dirtyRect.left - HALF_STROKE_WIDTH), (int) (dirtyRect.top - HALF_STROKE_WIDTH), (int) (dirtyRect.right + HALF_STROKE_WIDTH), (int) (dirtyRect.bottom + HALF_STROKE_WIDTH));

        lastTouchX = eventX;
        lastTouchY = eventY;

        return true;
    }

    /** Called when replaying history to ensure the dirty region includes all
     * points. */
    private void expandDirtyRect(float historicalX, float historicalY) {
        if (historicalX < dirtyRect.left) {
            dirtyRect.left = historicalX;
        } else if (historicalX > dirtyRect.right) {
            dirtyRect.right = historicalX;
        }
        if (historicalY < dirtyRect.top) {
            dirtyRect.top = historicalY;
        } else if (historicalY > dirtyRect.bottom) {
            dirtyRect.bottom = historicalY;
        }
    }

    /** Resets the dirty region when the motion event occurs. */
    private void resetDirtyRect(float eventX, float eventY) {

        // The lastTouchX and lastTouchY were set when the ACTION_DOWN
        // motion event occurred.
        dirtyRect.left = Math.min(lastTouchX, eventX);
        dirtyRect.right = Math.max(lastTouchX, eventX);
        dirtyRect.top = Math.min(lastTouchY, eventY);
        dirtyRect.bottom = Math.max(lastTouchY, eventY);
    }
} 
```

以上是绘制类

现在像这样在您的活动中添加绘图视图。

```
//Assigning Drawing Board
        drawView = new DrawView(this);
        setContentView(view);
        drawView.requestFocus();
        linearLayout.addView(drawView); 
```

您可以使用 DrawView 类的不同方法来清晰/绘画并享受更多乐趣

# github-pages - 部署项目（index.html）不是根文件夹的 Git Hub Pages 项目

> ID：13468311
> 
> 赞同：1
> 
> 时间：2012-11-20T07:19:56.383
> 
> 标签：github-pages

我有一个 github 存储库，我使用 gruntjs 来构建我的静态站点。这会将所有文件构建到 dist 文件夹（即不在根目录中的文件夹）。所以 index.html 文件和所有内容都在 /dist 文件夹中

目前，我将 dist 文件夹的内容复制到另一个 github 存储库（因此内容位于根目录中），因此我可以作为 github 页面推出，由于手动容易出错，这显然很糟糕。

理想情况下，我只想将包含 dist 文件夹的项目推送到 gh-pages 并以某种方式告诉 github 从 dist 文件夹而不是 root 中读取。这可能吗？我怎样才能让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:23:51.943

我不熟悉 GH 页面的工作方式，但我怀疑您可以将该`dist`文件夹设为您的 git 存储库（而不是父目录），这样您就可以直接推送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T04:07:17.037

一种方法是使用重定向。如果您的根目录位于，那么您可以创建一个像这样`some/other/folder`的顶级：`index.html`

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title>Redirecting</title>
        <meta http-equiv="REFRESH" content="0;url=some/other/folder">
    </head>
    <body>
        <center>
            Redirecting to the real root folder.
        </center>
    </body>
</html> 
```

显然，您不必在 `<body>`and`</body>`标记之间包含任何内容。

唯一的缺点是额外的目录名称将作为 URL 的一部分显示在浏览器中。但是如果路径很长，您可以使用符号链接缩短它。

# javascript - css3 或 jquery 不透明度动画效果

> ID：13468312
> 
> 赞同：2
> 
> 时间：2012-11-20T07:20:06.190
> 
> 标签：javascript, jquery, css

好的，我有这个 html 代码。

```
<a class="fade fade1" href="#"></a>
<a class="fade fade2" href="#"></a>
<a class="fade fade3" href="#"></a> 
```

和上面那些 html 元素的这个 css

```
a.fade
{
width: 249px;
height: 90px;
float: none;
clear: both;
margin: 8px auto;
overflow: auto;
display: block;

/*fade*/
/* Theoretically for IE 8 & 9 (more valid) */   
    /* ...but not required as filter works too */
    /* should come BEFORE filter */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";

    /* This works in IE 8 & 9 too */
    /* ... but also 5, 6, 7 */
    filter: alpha(opacity=50);

    /* Older than Firefox 0.9 */
    -moz-opacity:0.5;

    /* Safari 1.x (pre WebKit!) */
    -khtml-opacity: 0.5;

    /* Modern!
    /* Firefox 0.9+, Safari 2?, Chrome any?
    /* Opera 9+, IE 9+ */
    opacity: 0.5;
}
a.fade1
{
background: transparent url(http://jameskbrooks.com/wp-    content/uploads/2012/11/MC2151023682-e1353394381773.gif) no-repeat top left;
}
a.fade2
{
background: transparent url(http://jameskbrooks.com/wp-    content/uploads/2012/11/MC2151023684-e1353394564665.gif) no-repeat top left;
}
a.fade3
{
background: transparent url(http://jameskbrooks.com/wp-            content/uploads/2012/11/MC2151023683-e1353394572666.gif) no-repeat top left;
}
a.fade:hover
{

/*fade*/
/* Theoretically for IE 8 & 9 (more valid) */   
    /* ...but not required as filter works too */
    /* should come BEFORE filter */
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";

    /* This works in IE 8 & 9 too */
    /* ... but also 5, 6, 7 */
    filter: alpha(opacity=100);

    /* Older than Firefox 0.9 */
    -moz-opacity:1.0;

    /* Safari 1.x (pre WebKit!) */
    -khtml-opacity: 1.0;

    /* Modern!
    /* Firefox 0.9+, Safari 2?, Chrome any?
    /* Opera 9+, IE 9+ */
    opacity: 1.0;

  -webkit-transition: opacity 600ms linear;
  -moz-transition: opacity 600ms linear;
  -o-transition: opacity 600ms linear;
  transition: opacity 600ms linear;

} 
```

因此，基于上面声明的那些 css3，默认情况下 a.fade 设置为不透明度一半，然后每当用户将鼠标悬停或鼠标悬停在这些元素上时，不透明度设置为完整，上面有动画，就像从半不透明度淡入到完全不透明度，但问题是每当我将鼠标从这些元素中撤出时，没有动画像从完全不透明度淡出然后回到其默认不透明度 50%。我知道这可以通过 jquery 来完成，所以我在这里找人给我一个关于如何做的线索。首选css3。

希望我能找到可以解决我的问题的东西，谢谢。

我对任何想法、建议和建议持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:27:16.080

是的，你可以在 jQuery 中做到这一点：

```
$('#container')
  .on('mouseover', 'a.fade', function(){
   $(this).animate({'opacity': 1}, 500) // animate to 100%, in 500 ms
  })
  .on('mouseout', 'a.fade', function(){
   $(this).animate({'opacity': 0.5}, 500) // animate to 50%, in 500 ms
  }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:26:26.893

jQuery 提供`fadeIn()`,`fadeOut()`并`fadeIn()`为您更改任何对象的不透明度。只需触发`fadeIn()`，`fadeOut()`或`fadeIn()`为`$("a.fade").hover()`。

例如，

```
$("a.fade").hover(
    function() { $(this).fadeTo("slow", 0.5); },
    function() { $(this).fadeTo("slow", 1); }
); 
```

供您参考，[http://api.jquery.com/fadeTo/](http://api.jquery.com/fadeTo/)

# gcc - 无法在 ubuntu 中编译 cc、gcc | 没有相应的文件和目录

> ID：13468319
> 
> 赞同：1
> 
> 时间：2012-11-20T07:20:46.970
> 
> 标签：gcc, ubuntu, compiler-errors, cc

在这方面真的需要帮助。当我尝试使用 cc 编译时，它显示

```
 -bash: /usr/bin/cc: No such file or directory 
```

但所有必要的文件 cc、gcc、c++ 都存在于 /usr/bin 目录中。我尝试安装 gcc-multilib 包，之后出现此错误。需要尽快修复它，因为它运行一些重要的程序。当我这样做时：`update-alternatives --list cc`它显示了`/usr/bin/gcc`。然后我尝试 `update-alternatives --set cc /usr/bin/gcc`了，它给了 `update-alternatives: warning: forcing reinstallation of alternative /usr/bin/gcc because link group cc is broken. update-alternatives: warning: not replacing /usr/bin/cc with a link.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:41:27.170

/usr/bin/cc 应该是 Ubuntu 上的符号链接。

检查其目的地是否有效`update-alternatives --list cc`。

`update-alternatives --set cc /usr/bin/gcc`（作为 root，sudo 应该可以工作）如果 /usr/bin/gcc 是有效的可执行文件，则应该修复它。

# objective-c - 访问全局变量在目标 C 中给出链接器错误

> ID：13468321
> 
> 赞同：1
> 
> 时间：2012-11-20T07:20:55.867
> 
> 标签：objective-c, global-variables, linker-errors, extern

我已经声明了一个如下所示的全局变量

```
extern NSString *name;
@interface viewcontrollerOne{} 
```

在实现文件中，我正在以某种方法访问该全局变量，例如

```
-(void)someMethod
{
name = @"hello";
} 
```

但这会导致链接器错误。

> “名称”，引用自：viewcontrollerOne.o ld 中的 -[viewcontrollerOne someMethod]：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:33:14.557

以下仅为声明：

```
extern NSString * const name; // << side note: this should typically be const 
```

它声明有一个`NSString*`named符号`name`。它不创建存储。

为此，您需要为`name`. 为此，请将以下内容添加**到您的 .m**文件中：

```
NSString * const name = @"hello"; 
```

* * *

如果您想在实例方法中设置它，如您的示例中所示，那么您可以声明它：

MONFile.h

```
extern NSString * name; 
```

定义它：

MON文件.m

```
NSString * name = 0; 
```

`name = @"hello";`然后你可以在你的实例方法中编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:35:14.670

extern 通常用于创建内容。如果要创建全局变量字符串，可以通过以下方式进行：

。H

```
+ (void)setName:(NSString*)name_in;

+ (NSString*)name; 
```

.m

```
NSString* gName;

@implementation ...

+ (void)setName:(NSString*)name_in{
   gName = name_in;
}

+ (NSString*)name{
  return gName;
} 
```

# android - HttpUrlConnection 安卓

> ID：13468326
> 
> 赞同：0
> 
> 时间：2012-11-20T07:21:12.573
> 
> 标签：android, httpurlconnection

我是新的安卓开发者。

我正在尝试使用此代码从我的网络服务器访问数据....

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    URL url;
    try {
        url = new URL("http://www.mysite.net/LEDstate.txt");

        HttpURLConnection urlConnection = (HttpURLConnection) url
                .openConnection();

        InputStream in = urlConnection.getInputStream();

        InputStreamReader isw = new InputStreamReader(in);

        int data = isw.read();
        while (data != -1) {
            char current = (char) data;
            data = isw.read();
            //System.out.print(current);

            TextView t = (TextView) findViewById(R.id.ledstate);

            t.setText(current); 
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

但是数据没有出现在屏幕上。Textview 没有变化。

我检查了权限，他们没问题。

有什么帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T07:37:52.917

我猜你得到了`NetworkOnMainThreadException`，但是由于你正在捕获所有异常，所以错误被抑制了。

您不能在 Ui 线程上发出网络请求。将网络操作移至 Asynctask。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:41:19.477

将while循环放在`TextView`外面

```
StringBuilder sb = new StringBuilder();
while (data != -1) {
        char current = (char) data;
        data = isw.read();
        sb.append(current); 
}

TextView t = (TextView) findViewById(R.id.ledstate);
t.setText(sb.toString()); 
```

# sql - 实现表级检查约束

> ID：13468327
> 
> 赞同：3
> 
> 时间：2012-11-20T07:21:27.243
> 
> 标签：sql, oracle, relational-database, constraints, range

我们有一个表格，其中包含取决于基本金额的价格。例如，如果基础金额小于或等于 100，则价格为 10，但如果基础金额大于 100 但小于或等于 1000，则价格为 20，最后如果基础金额大于1000 那么价格是 30。我们的表格的简化版本应该是这样的：

```
PRICE_CODE START_RANGE     END_RANGE  PRICE_AMOUNT 
100               0,00        100,00         10,00           
100             100,01       1000,00         20,00          
100            1000,01   99999999,99         30,00           
110               0,00   99999999,99         15,00 
```

使用列级别检查约束，您可以轻松确保每条记录都包含有效的范围信息。问题是我们还应该需要某种**表级检查约束**，以确保每个价格代码的范围信息不包含任何重叠或间隙，如本例所示：

```
PRICE_CODE START_RANGE     END_RANGE  PRICE_AMOUNT 
100               0,00        200,00         10,00           
100             100,01       1000,00         20,00          
100            1100,01   99999999,99         30,00 
```

我创建了一个有效的验证过程，但问题是我没有在数据库中找到任何可以调用验证逻辑的地方。当然，您不能放置在记录级触发器中，但是当可以进行单独的插入、更新和删除并且范围应该只针对最终结果进行验证时，语句级触发器也不会工作。验证逻辑应该是这样的：

```
SELECT * FROM (              
SELECT price_code, start_range, end_range, price_amount
     , lag (end_range) OVER (PARTITION BY price_code ORDER BY end_range) prev_end
     , lead (start_range) OVER (PARTITION BY price_code ORDER BY start_range) next_start
  FROM my_test
ORDER BY price_code, start_range, end_range) 
 WHERE start_range <= prev_end
    OR end_range >= next_start
    OR (next_start - end_range) > 0.01
    OR (start_range - prev_end) > 0.01 
```

一种方法当然是将验证逻辑放在数据访问层，但仍然可以通过直接使用 SQL 来绕过验证。我感兴趣的是，是否有人对如何在数据库中实现这种“表级约束”有一些想法，以确保没有人能够提交无效的范围数据。我们正在使用 Oracle，所以我对基于 Oracle 的解决方案很感兴趣，但我也对任何其他 RDBMS 如何解决这个问题感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:40:43.310

end_range 列是否必要？end_range 值也可以是下一个更高的 start_range 值。如果你这样做，间隙和重叠是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:21:45.897

我已经看到了使用快速刷新的物化视图的表级（或集合级）约束实施方法的概念。

这个想法是将集合级需求转换为 MV 查询中的行级需求，然后将传统的基于行的检查约束应用于物化视图行。

例如，如果您想将用户的条目数量限制在一定数量，您可以创建一个 select-count-group-by-user mat。查看，然后应用`check(mv_count_column <= desired_max)`约束。

但是，由于对快速刷新的 matview 有许多限制，这种方法实施和支持肯定会很棘手。我不确定它是否适用于您的情况，因为快速刷新的 MV 不支持分析功能 - 也许您可以解决它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T08:32:19.813

实现这一点的一种方法是相互引用外键。

为此，您往往需要一个支持`MERGE`语句或延迟约束的数据库，并且该`UNIQUE`约束只允许单个`NULL`（或一些解决方法）。

您要做的是首先切换到使用半开区间来表示您的范围。您这样做是为了使一个间隔的结尾可以是对另一行的外键引用的开始，反之亦然。

如果我在任何地方使用方言，很可能是 TSQL，而不是 Oracle，因为这是我习惯的，但同样的概念应该适用

您创建一个如下所示的表：

```
CREATE TABLE T (
    PRICE_CODE int not null,
    START_RANGE decimal(10,2) null,
    END_RANGE decimal(10,2) null,
    constraint UQ_T_START UNIQUE (PRICE_CODE,START_RANGE),
    constraint UQ_T_END UNIQUE (PRICE_CODE,END_RANGE),
    constraint FK_T_PREV FOREIGN KEY (PRICE_CODE,START_RANGE) references T (PRICE_CODE,END_RANGE),
    constraint FK_T_NEXT FOREIGN KEY (PRICE_CODE,END_RANGE) references T (PRICE_CODE,START_RANGE),
    constraint CK_T_SANERANGE CHECK (START_RANGE < END_RANGE)
) 
```

通过只允许单行具有`NULL` `START_RANGE`，只有一行可以表示最低范围。同样，对于`END_RANGE`和最高范围。中间的所有行都必须引用它们的上一个和下一个范围行。

您需要延迟约束或`MERGE`语句，例如，为了在末尾插入新行，您需要插入此行（引用前一行）和更新前一行（引用新行）所有要满足的约束。这需要 an`INSERT`和 an`UPDATE`两者之间不发生约束检查，或者`MERGE`可以在单个语句中完成两者的语句。

* * *

如果您不想将最低和最高范围保留为未定义的范围，则只需强加一个规则，即带有 a`NULL` `START_RANGE`或`END_RANGE`不代表*有效*范围的行。但是将这些行保留在表中以允许上述结构工作。

# c# - EF POCO 作为 WCF 数据合约

> ID：13468328
> 
> 赞同：0
> 
> 时间：2012-11-20T07:21:33.960
> 
> 标签：c#, wcf, entity-framework

为了纠正历史错误，May 团队一直在进行一些重构。我们将 DataContracts 和 OperationContracts 移出 BL 层并移入单独的程序集，我们切断了从接口程序集到 BL 对象的依赖关系，现在通过 ChannelFactory 而不是生成的代理来使用服务。

现在我们要开始将 EF 集成到我们的 DAL 中，它支持 BL 层。由于 EF 团队在每个版本中都进行了重大的概念更改（并不是说这是一件坏事:)），我有点迷茫。

我想将 EF 与 POCO 一起使用，并使这些 POCO 成为服务的数据合同。没有更新返回到数据库。只有数据进入 Web 服务器。我的问题是我看到了来自不同版本 EF 的各种解决方案，我不知道当前的最佳实践是什么......

有人可以帮我解决这个问题吗？当前的最佳实践是什么？是否需要在我的 POCO 上设置任何特殊属性或方法才能将它们用作数据合约？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:59:05.357

从 EF 生成 POCO 以进行网络传输的最简单和最强大的方法是使用 T4 模板。事实上 - 如果您使用 .net 4.5，EF 设计器现在使用 T4 模板而不是通常的 Visual Studio 代码生成。

T4 生成的 POCO 应该可以在不添加任何属性的情况下通过网络传输，但即使它们是 - 更改 T4 模板以满足您的需要也很简单。

就最佳实践而言，我认为没有一个“答案”，并且根据您的需要有不同的方法。在我看来，通过 T4 生成 POCO 是大多数情况下的最佳方法，因为您不需要编写任何映射代码，并且您拥有一个与数据层表示无关的 POCO 库。

这里是模板下载

[http://visualstudiogallery.msdn.microsoft.com/23df0450-5677-4926-96cc-173d02752313](http://visualstudiogallery.msdn.microsoft.com/23df0450-5677-4926-96cc-173d02752313)

这是一些教程/资源

[http://sharedtolearn.blogspot.co.uk/2010/06/entity-framework-40-and-t4-templates-to.html](http://sharedtolearn.blogspot.co.uk/2010/06/entity-framework-40-and-t4-templates-to.html)

[http://msdn.microsoft.com/en-us/data/ff717739.aspx](http://msdn.microsoft.com/en-us/data/ff717739.aspx)

# c# - 当目标应用程序以管理员身份运行时，ShowWindow 功能不起作用

> ID：13468331
> 
> 赞同：6
> 
> 时间：2012-11-20T07:21:47.423
> 
> 标签：c#, windows-8, administrator, showwindow

我正在编写一个显示/隐藏某些目标应用程序窗口的程序。我之前正在测试它，并注意到一些奇怪的东西。如果我以管理员身份运行目标应用程序（右键单击-> 属性，“兼容性”选项卡，“以管理员身份运行此程序”）它不起作用。

为了演示，我编写了一个名为“TargetApplication”的简单 GUI 应用程序，然后编写了以下代码来测试显示/隐藏此应用程序：

```
class Program
{
  static void Main(string[] args)
  {
    IntPtr windowPtr = FindWindow(null, "TargetApplication");
    ShowWindow(windowPtr, 0); // 0 = Hide            
    Console.WriteLine("The window is now hidden. Press Enter to restore");
    Console.ReadLine();
    ShowWindow(windowPtr, 9); // 9 = Restore
    Console.WriteLine("The window is now restored. Press Enter to exit.");            
    Console.ReadLine();
  }

  [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
  static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

  [DllImport("user32.dll")]
  static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);
} 
```

如果我在没有管理员权限的情况下启动窗口应用程序，它就不起作用。

有人介意为我测试这个吗？我在这里上传了这两个应用程序的 .exe：

[TestShowWindow 下载](https://www.box.com/s/k0y8kcb1u8bjoxi4q60j)

您所要做的就是下载它们并运行TestApplication.exe，然后运行TestShowWindow.exe。您会发现，将 TestApplication.exe 更改为以管理员身份运行会导致 ShowWindow 不再工作。

当然，如果您不信任下载我的东西，您可以随时编译我的代码并在 Windows 中您能够更改兼容模式的任何目标应用程序上对其进行测试。

PS 我不确定它是否有区别，但我正在运行 Windows 8 Pro。64 位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T12:30:50.107

这是设计使然。它是 UAC 鲜为人知的双胞胎，称为[UIPI](http://en.wikipedia.org/wiki/User_Interface_Privilege_Isolation)或用户界面特权隔离。未提升的程序不能征用提升的程序。鉴于 UI 自动化的功能，这是阻止程序劫持提升进程功能的明显对策。一种称为[*粉碎攻击*](http://en.wikipedia.org/wiki/Shatter_attack)的安全违规行为。

解决方法是为存储在 c:\windows 或 c:\program 文件中并提供证书的程序提供 uiAccess = true 的清单。并为目标程序调用 ChangeWindowMessageFilter 以允许发送某些消息。在您的情况下，应该是 WM_SHOWWINDOW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T08:04:19.413

如果您不介意窗口的行为就像您将其最小化到任务栏一样；通常，您可以通过使用 SC_RESTORE 或 SC_MINIMIZE 的 wParam 发布 WM_SYSCOMMAND 来显示和隐藏提升进程的窗口。

# jquery - jquery ajax 调用 - 出错但没有错误

> ID：13468337
> 
> 赞同：0
> 
> 时间：2012-11-20T07:21:59.200
> 
> 标签：jquery

下面的 ajax 调用没有通过。该函数简单地退出，并且没有显示下面的任何警报消息。任何想法为什么？我在 ajax 调用上方的 click 函数中放置了一个单独的警报，它表明该函数被正确调用。这是我第一次使用 jquery ajax 并且我正在尝试它。

我有很多问题，我看到了很多不同的东西。我看到有和没有 .php 在 url 名称上的人。我看到人们在数据和 url 周围有引号和没有引号。有谁知道比例约定？谢谢。

```
$(document).ready(function() {
    $(".folderopen a").click(function(event) {
        e.preventDefault();        
        $.ajax ({
        type:'GET',
            url:'FolderOpen.php',
            data: {userid:10},
            success: function() {    alert('success');},
            error: function(){       alert('failure');}
            });  

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:27:21.873

尝试使用此代码：

```
$.ajax({
                type: "GET",
                url: "FolderOpen.php",
                data: {userid:10},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    alert('success');
                },
                error: function () {
                    alert('error');
                }
            }); 
```

# c# - 垃圾收集 - 通过强引用访问对象总是安全的吗？

> ID：13468338
> 
> 赞同：3
> 
> 时间：2012-11-20T07:22:03.990
> 
> 标签：c#, garbage-collection

我的理解是，当 GC 从主图中找到不再可访问（通过强引用）的对象的子图时，它将收集它们并回收内存。我的问题是关于删除不可访问对象的顺序。这是否作为原子操作发生？是否所有不可访问的对象都一次完成，或者 GC 是否在应用程序仍在执行时一个接一个地完成每个对象？如果对象是一个一个完成的，是否遵循特定的顺序？

如果我有一个对象 A 持有对对象 B 的弱引用，那么很明显 A 在调用 B 的任何实例方法之前必须检查 B 是否仍然存在。现在假设 B 持有对另一个对象 C 的强引用。如果 B 还活着，我是否总是保证 C 也仍然活着？GC是否有可能将B和C都标记为收集，但C在B之前完成？

我的猜测是从 B 访问 C 总是安全的（因为这是一个强参考）。但我想确认这个假设，因为如果我错了，我可能会引入一个非常间歇性的难以追踪的错误。

```
public class ClassA
{
    private readonly WeakReference objBWeakRef;

    public ClassA(ClassB objB)
    {
        objBWeakRef = new WeakReference(objB);
    }

    public void DoSomething()
    {
        // The null check is required because objB 
        // may have been cleaned-up by the GC
        var objBStrongRef = (ClassB) objBWeakRef.Target;
        if (objBStrongRef != null)
        {
            objBStrongRef.DoSomething();
        }
    }
}

public class ClassB
{
    private readonly ClassC objCStrongRef;

    public ClassB(ClassC objC)
    {
        objCStrongRef = objC;
    }

    public void DoSomething()
    {
        // Do I also need to do some kind of checking here?
        // Is it possible that objC has been collected, but 
        // the GC has not yet gotten around to collecting objB?
        objCStrongRef.DoSomething();
    }
}

public class ClassC
{
    public void DoSomething()
    {
        // do something here... if object is still alive.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:29:37.450

是的，如果你`ClassB`通过 引用了一个`ClassC`实例`objCStrongRef`，那么如果`ClassB`它还活着，你就不必担心`the ClassC`随机蒸发。例外情况是如果您编写终结器，即

```
~ClassB() { ...} 
```

在*那里*，你*根本***不应该**尝试与之交谈；因为您不知道哪个对象首先完成。如果在终结时需要某些东西，它应该有一个单独的- 尽管实际上终结器方法非常罕见，你不应该在没有充分理由的情况下添加它们（非托管句柄等）`objCStrongRef` *`ClassC``~ClassC()`*

 *重新确定顺序：不，没有特定的顺序，因为完整的循环是可能的 - 它需要在某个地方任意中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:29:23.273

在正常的托管方法中，只要 B 还活着，您就可以依赖 B 使用强引用引用的所有内容。B 对 C 的引用对 B 的整个生命周期都有好处。

例外是在完成代码中。如果你实现了一个终结器（这应该被认为是一种不寻常的情况，而不是常态），那么所有的赌注都在终结器的调用链中。在 GC 注意到对象不再被活动对象引用后，终结器可能不会执行很长时间 - 具有终结器的对象往往比“普通”对象停留的时间更长，这是不使用终结器的另一个原因。在极端恐慌关闭的极端情况下，终结器可能根本不会执行。您不能假设终结器将在哪个线程上执行，或者终结器将执行的顺序。并且您应该避免引用对象中的任何引用变量，因为您不知道它们是否已经被终结。

不过，这都是学术性的。您的代码示例没有实现终结器，因此您无需担心 Bizzarro 终结器世界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:29:12.610

来自 Jeffrey Richter 的“CLR via C#”：

> 此外，请注意您无法控制 Finalize 方法何时执行。Finalize 方法在垃圾收集发生时运行，这可能在您的应用程序请求更多内存时发生。此外，CLR 不保证 Finalize 方法的调用顺序，因此您应该避免编写访问其他类型定义了 Finalize 方法的对象的 Finalize 方法；那些其他对象可能已经完成。但是，访问没有定义 Finalize 方法的值类型实例或引用类型对象是完全可以的。调用静态方法时还需要小心，因为这些方法可以在内部访问已完成的对象，从而导致静态方法的行为变得不可预测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T23:13:52.103

如果不存在可以到达对象的任何类型的引用路径，则将无法检查该对象曾经占用的内存空间，除非或直到 GC 运行并使该内存空间可用于重用，并且创建了一些使用它的新对象；到那时，旧对象将不再存在。无论 GC 何时运行，对象在对它的最后一个引用被销毁或变得不可访问时立即变得不可访问。

具有活动终结器的对象始终具有引用路径，因为称为“终结队列”的数据结构包含对每个此类对象的引用。这个队列中的对象是GC最后处理的东西；如果发现一个对象被队列引用，但没有其他引用，则引用将存储在一个名为“freachable”队列的结构中，该队列列出了`Finalize`应在第一时间运行其方法的对象。一旦一个 GC 周期完成，这个列表将被认为是一个强根引用，但终结器线程将开始从中提取东西。通常，一旦从列表中拉出项目，任何地方都不会引用它们，它们就会消失。

弱引用增加了另一个问题，因为即使存在对它们的弱引用，对象也被认为符合收集条件。将这些视为有效的最简单方法是，一旦确定了每个需要保留的对象，系统将通过并使其`WeakReference`目标不需要保留的每个对象无效。一旦每个此类`WeakReference`实例都无效，该对象将无法访问。

原子语义可能很重要的唯一情况是当两个或多个`WeakReference`实例针对同一个对象时。在这种情况下，理论上一个线程可能在 GC 使另一个具有相同目标的线程无效的确切时刻访问`Target`a 的属性。我认为这种情况实际上不会出现；可以通过让多个共享相同目标的实例也共享它们的. 在这种情况下，要么对目标的访问很快就会发生以使对象保持活动状态，要么句柄将无效，从而有效地使所有持有对它的引用的实例无效。`WeakReference``WeakReference``WeakReference``GCHandle``WeakReference`*

# php - 为每一行调用 jQuery

> ID：13468339
> 
> 赞同：1
> 
> 时间：2012-11-20T07:22:04.973
> 
> 标签：php, jquery, jqmodal

我想建立一个链接来调用每一行。

这是代码：

```
foreach($docs as $row) {
echo "<td><h5><a href='' id='onclick' class='onclickcalldocEdit_".$row->dId."'>".$row->dName."</a></h5></td>";
echo "<div id='response_proj' class='container_proj_".$row->dId."'>
/* container code here */
} 
```

所以，基本上我为每一行创建一个容器，名称仅因 id 而异。我已经使用这个脚本来尝试让它工作：

```
$(document).ready(function(){
    var className = $('#onclick').attr('class');
    var contName = $('#response_proj').attr('class');
    $(className).jqm({trigger:contName, toTop: true});
});
</script> "; 
```

甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:02:29.187

尝试这个：

```
$(document).ready(function(){
  $("#onclick").each(function(){
    var className = this.attr('class');
    var contName = this.closest('td').next('#response_proj').attr('class');
    $(className).jqm({trigger:contName, toTop: true })
  })
}) 
```

坦率地说，我认为更好的方法是使用 data-id 和 class 属性（没有 id）：

```
<a href='' class='onclick' data-id='".$row->dId."'>".$row->dName."</a> 
```

并通过访问 id

```
var id = $('.onclick').data('id'); 
```

# java - 没有构建带有 ActionBarSherlock 的 Android 项目

> ID：13468341
> 
> 赞同：0
> 
> 时间：2012-11-20T07:22:16.783
> 
> 标签：java, android, eclipse, android-sdk-tools

我在我的 Android 项目中实现了当前版本的 ActionBarSherlock。一切正常，我没有收到任何错误。

但是当我尝试调试或导出我的项目时，我没有从我的项目中得到一个 .apk 文件。只是一个带有我的项目名称的 .jar 文件。

我已经阅读了 SDK 在构建包含外部库的项目时遇到的一些问题，但这是在 SDK 版本 14 上，所以我希望这个错误已得到修复......

所以这个问题可能还有另一个原因。

有人知道可能的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:12:45.090

由于构建 Android 项目，您无法获取 *.jar 文件。这对我来说似乎很奇怪。您的项目设置一定有问题（如果您更改了它们），或者您构建的项目类型错误（即它是*Java Application*而不是*Android Application*）。

您没有提到您使用哪个 IDE，但我假设您使用的是 Eclipse。确保您已正确安装**Android SDK**和**Eclipse ADT**（以防万一）。接下来要尝试的是从现有源创建一个新的 Android 应用程序项目（在创建过程中应该有这样的选项）。

# objective-c - 集合中的数组：为什么 NSSet 使用 allObjects，而 NSOrderedSet 使用数组？

> ID：13468344
> 
> 赞同：20
> 
> 时间：2012-11-20T07:22:25.410
> 
> 标签：objective-c, nsorderedset

在 Foundation 中，如果我想将一个集合转换为一个`NSArray`，我可以使用：

*   `-[NSSet allObjects]`
*   `-[NSOrderedSet array]`

为什么这些不同？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-20T07:42:21.583

推测，但是：

因为在创建 NSSet 时，唯一的其他主要集合类型是 NSArray，它是（并且仍然是，很大程度上）最常见的集合类型。因此，一个名为“allObjects”的方法显然会返回一个 NSArray。

当 NSOrderedSet 最近被添加时，它必须处理先前集合的存在——主要是 NSArray 和 NSSet。因此，“allObjects”方法将是模棱两可的。因此它有两种方法，-array 和 -set。

和/或，-array 和 -set 方法将代理返回到内部使用的可能相同或相似的类。所以在功能上它们有点不同——那些代理会看到原始 NSOrderedSet 上的突变。另一方面 -allObjects 不会 - 它真正创建了一个独立的数组，因为它的内部存储可能是一个不容易代理的哈希表或类似的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-03T21:08:59.887

虽然存在其他差异†，`.allObjects`但并不意味着确定的顺序，`.array`但确实如此；这正是你得到的。

* * *

†`.array`返回底层的实时代理`NSOrderedSet`，如果底层有序集发生变化，代理将随之变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T19:08:37.347

另外... 'allObjects' 返回的 NSArray 是集合中值的副本。

但是 'array' 返回的 NSArray 是集合中对象的代理。

因此，如果您更改集合中任何对象的值，您将更改数组中对象的值。未制作订购集的副本。所以这两个属性有不同的名称，因为它们做不同的事情。

# php - 如何对使用 mysql 查询但使用 PHP usort 函数排序的项目进行分页？

> ID：13468356
> 
> 赞同：2
> 
> 时间：2012-11-20T07:23:24.610
> 
> 标签：php, mysql, pagination, usort

我进行查询以获取我的 mysql 数据库中的所有餐馆。之后，我使用 PHP 的 usort 函数根据他们的 lat/lng 坐标对用户的距离进行排序。

对排序后的数组进行分页的最有效方法是什么，而不需要对每个新的分页页面的所有项目进行查询和排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:27:41.183

你不应该在 PHP 中这样做。MySQL 会更好地对结果集进行排序。

[这里](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)有一篇关于在 MySQL 中执行此操作的论文，在[此处](https://stackoverflow.com/questions/1813460/database-best-performance-way-to-query-geo-location-data)引用。

无论您使用哪种公式，您都应该能够使用 MySQL 来执行此操作，即使您必须使用[存储过程](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)。

# firefox - 带有 .Net selenium 的 Aurora 5 未打开侦听端口 7055

> ID：13468357
> 
> 赞同：0
> 
> 时间：2012-11-20T07:23:26.687
> 
> 标签：firefox, selenium, webdriver

我正在尝试使用 selenium 2.6 自动化 Firefox aurora 5（我不能使用较新的版本，因为它是经过修改的 Firefox 版本，并且在较新的 aurora 中进行更改是一个大问题）。

我打电话给：

```
FirefoxBinary binary = new FirefoxBinary(aurora_exe_path);
FirefoxDriver driver = new FirefoxDriver(); 
```

正在执行 Aurora，但 selenium 无法连接 firefox WebDriver。我注意到 Aurora 没有在 7055 上打开监听端口，但我就是不明白为什么，或者如何修复它。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:28:27.297

我可以让它运行的唯一方法是使用 selenium 服务器。

我执行了 selenium 服务器（监听端口 4444），然后我只使用了 DefaultSelenium 类：

```
Selenium selenium = new DefaultSelenium("localhost", 4444, "*firefox "+aurora_full_path, browserURL); 
```

这样，selenium 客户端连接到成功自动化极光的服务器。

# android - 我的 Android 应用程序如何打开监听端口？

> ID：13468358
> 
> 赞同：0
> 
> 时间：2012-11-20T07:23:33.860
> 
> 标签：android, port

我希望我的 Android 应用程序充当客户端并侦听特定端口。我尝试过的所有代码都不起作用。我尝试[了本教程](http://myandroidsolutions.blogspot.com/2012/07/android-tcp-connection-tutorial.html)来创建一个小型聊天应用程序。服务器端工作正常，但应用程序在我的设备上崩溃。我的手机和服务器都在 VPN 上。

返回的 logcat 文本：

```
11-20 12:39:12.789: W/dalvikvm(12045): threadid=1: thread exiting with uncaught exception (group=0x4017c560)
11-20 12:39:12.799: E/AndroidRuntime(12045): FATAL EXCEPTION: main
11-20 12:39:12.799: E/AndroidRuntime(12045): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.android_port/com.example.android_port.MainActivity}: java.lang.ClassNotFoundException: com.example.android_port.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.android_port-1.apk]
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.os.Looper.loop(Looper.java:130)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread.main(ActivityThread.java:3687)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at java.lang.reflect.Method.invokeNative(Native Method)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at java.lang.reflect.Method.invoke(Method.java:507)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at dalvik.system.NativeStart.main(Native Method)
11-20 12:39:12.799: E/AndroidRuntime(12045): Caused by: java.lang.ClassNotFoundException: com.example.android_port.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.android_port-1.apk]
11-20 12:39:12.799: E/AndroidRuntime(12045):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-20 12:39:12.799: E/AndroidRuntime(12045):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
11-20 12:39:12.799: E/AndroidRuntime(12045):    ... 11 more 
```

# python - 如何在 QTableView 内的 QComboBox 中添加项目

> ID：13468366
> 
> 赞同：1
> 
> 时间：2012-11-20T07:23:52.217
> 
> 标签：python, pyqt4, qtableview, qcombobox, qitemdelegate

我在 QComboBox 中添加项目时遇到问题。如果可能的话，谁能告诉我如何使用下面的代码添加项目？

```
class ComboBoxDelegate(QtGui.QItemDelegate):

    def __init__(self, owner, itemslist):
        QtGui.QItemDelegate.__init__(self, owner)
        self.itemslist = itemslist

    def paint(self, painter, option, index):        
        # Get Item Data
        value = index.data(QtCore.Qt.DisplayRole).toInt()[0]
        #print value
        # fill style options with item data
        style = QtGui.QApplication.style()
        opt = QtGui.QStyleOptionComboBox()
        opt.currentText = str(self.itemslist[value])
        opt.rect = option.rect

        # draw item data as ComboBox
        style.drawComplexControl(QtGui.QStyle.CC_ComboBox, opt, painter)

    def createEditor(self, parent, option, index):

        ##get the "check" value of the row
        # for row in range(self.parent.model.rowCount(self.parent)):
            # print row

        self.editor = QtGui.QComboBox(parent)
        self.editor.addItems(self.itemslist)
        self.editor.setCurrentIndex(0)
        self.editor.installEventFilter(self)    
        self.connect(self.editor, 
            QtCore.SIGNAL("currentIndexChanged(int)"), self.editorChanged)

        return self.editor

    def setEditorData(self, editor, index):
        value = index.data(QtCore.Qt.DisplayRole).toInt()[0]
        editor.setCurrentIndex(value)

    def setModelData(self,editor,model,index):
        value = editor.currentIndex()
        model.setData(index, QtCore.QVariant(value))

    def updateEditorGeometry(self, editor, option, index):
        editor.setGeometry(option.rect)

    def editorChanged(self, index):
        check = self.editor.itemText(index)
        id_seq = self.parent.selectedIndexes[0][0]
        update.updateCheckSeq(self.parent.db, id_seq, check) 
```

这是我现在的输出，但我想在我的组合框中添加某些项目。

![输出](../Images/f84e2d15b103859916a18357eabc8300.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T13:28:08.540

我已经更正了你的代码。当子类创建编辑器而不是在绘画中时，您必须在组合框中添加项目。我只发布了编辑过的代码（其他代码部分是正确的）：

```
class ComboBoxDelegate(QtGui.QItemDelegate):

    def __init__(self, owner, itemlist):
        QtGui.QItemDelegate.__init__(self, owner)
        self.itemslist = itemlist

    def createEditor(self, parent, option, index): 
        self.editor = QtGui.QComboBox(parent)
        for i in range(0, len(self.itemslist)):
            self.editor.addItem(str(self.itemslist[i]))

        self.editor.installEventFilter(self)    
        self.connect(self.editor, QtCore.SIGNAL("currentIndexChanged(int)"), self.editorChanged)

        return self.editor

    def paint(self, painter, option, index):        

        value = index.data(QtCore.Qt.DisplayRole).toInt()[0]
        opt = QtGui.QStyleOptionComboBox()
        opt.text = str(self.itemslist[value])
        opt.rect = option.rect

        QtGui.QApplication.style().drawControl(QtGui.QStyle.CE_ItemViewItem, opt, painter) 
```

# java - 我怎样才能得到通用参数的类

> ID：13468367
> 
> 赞同：2
> 
> 时间：2012-11-20T07:23:54.233
> 
> 标签：java

> **可能重复：**
> [通过反射在java中获取泛型参数的类型](https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection)
> [如何获取泛型的类](https://stackoverflow.com/questions/2223233/how-to-get-generics-class)

我怎样才能获得通用参数的类。

```
 public <T extends BeanProxiable> void method(){
    Class claz = T.class
 } 
```

这是错的。为什么？如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:28:21.717

你不能。

T 的类型仅在编译时才知道。

一旦程序开始运行，T 的类型将是 Object。

这就是泛型在 Java 中的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:28:19.713

您可以动态提供类型，但编译器不会自动为您执行此操作。

```
public abstract class LastActionHero<H extends Hero>(){
    protected final Class<H> hClass;
    protected LastActionHero(Class<H> hClass) {
        this.hClass = hClass;
    }
    // use hClass how you like.
} 
```

顺便说一句：动态获取它并非不可能，但这取决于它的使用方式。例如

```
public class Arnie extends LastActionHero<MuscleHero> { } 
```

可以确定 Arnie.class 有一个超类，其 Generic 参数为 MuscleHero。

```
public class Arnie<H extend Hero> extends LastActionHero<H> { } 
```

在这种情况下，超类的通用参数将只是 H。

# vbscript - 错误：ActiveX 组件无法创建对象：Windows XP 中的“Word.Application”

> ID：13468369
> 
> 赞同：0
> 
> 时间：2012-11-20T07:23:58.540
> 
> 标签：vbscript

下面的代码在 Windows 7 中运行良好。我在 Windows XP 中收到错误“ **ActiveX 组件无法创建对象：'Word.Application'** ”。XP中没有安装Microsoft Word，这是错误的原因吗？我是 vbscript 的新手。解决方案是什么？

```
Const msoFileDialogOpen = 1

Set fso = CreateObject("Scripting.FileSystemObject")
Set objWord = CreateObject("Word.Application")
Set WshShell = CreateObject("WScript.Shell")

strInitialPath = WshShell.ExpandEnvironmentStrings("%USERPROFILE%") & "\Desktop\"

objWord.ChangeFileOpenDirectory(strInitialPath)

With objWord.FileDialog(msoFileDialogOpen)

   .Title = "Select the file to process"
   .AllowMultiSelect = False

   .Filters.Clear

   .Filters.Add "All Files", "*.*"
   .Filters.Add "Excel Files", "*.xls;*.xlsx"
   .Filters.Add "Text Files", "*.txt"
   .Filters.Add "Various Files", "*.xls;*.doc;*.vbs"
   If .Show = -1 Then  'short form

      For Each File in .SelectedItems  'short form
         Set objFile = fso.GetFile(File)
         WScript.Echo objFile.Path
      Next    
   Else 
   End If
End With

'Close Word
objWord.Quit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:48:08.933

是的，如果计算机中没有安装 MS Word，则无法创建“Word.Application”，因为它甚至不存在于您的系统中。

解决此问题的最简单方法是在计算机中安装 MSWord。困难的方法是找到 activeX 程序集及其依赖项，并手动将其注册到计算机中。

您可以使用[http://www.nirsoft.net/utils/axhelper.html](http://www.nirsoft.net/utils/axhelper.html)查看计算机中安装的 ActiveX 组件列表。

-- Openoffice 可以代替 MS Word 解决这个问题吗？

当然，请查看此[链接](http://wiki.openoffice.org/wiki/Documentation/DevGuide/ProUNO/Bridge/Automation_Bridge)

# jsf-2 - JSF2（和 Primefaces）：在另一个“正常”表单中用于文件上传的表单，如何做到这一点？

> ID：13468380
> 
> 赞同：3
> 
> 时间：2012-11-20T07:24:46.697
> 
> 标签：jsf-2, primefaces

我有以下要求：我们有一个页面，要求用户将一些数据输入到由各种输入字段和下拉列表组成的表单中。特别是，恕我直言，在这个表单中是文件上传的一部分。用户应该能够上传一些（多个）文件。然后当他/她在页面末尾按下提​​交时，整个输入将被提交并写入一个对象。在此对象中，还必须保存上传文件的路径。我想用 primefaces' (3.4) 组件实现文件上传。

现在面对我的挑战：fileUpload 需要它自己的 h:form，enctype 为“multipart/form-data”。其他数据在“正常”范围内。对我来说，这意味着我必须在页面内将表单一个接一个地放置。但是fileUpload组件应该显示在另一个表单的中间。

我怎样才能做到这一点？有任何想法吗？

最好的问候，弗洛里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T13:26:16.103

> *现在面对我的挑战：fileUpload 需要它自己的 h:form，enctype 为“multipart/form-data”。其他数据在“正常”范围内。对我来说，这意味着我必须在页面内将表单一个接一个地放置。*

老实说，这没有任何意义。我不知道你是怎么得出这个结论的。也许您是基于对问题的错误观察得出的结论。也许您使用了错误的 bean 范围，并且在处理表单提交时遇到了所有迄今为止输入的输入和先前上传的文件的空值。`@ViewScoped`只要您通过多个 ajax 请求与同一个视图进行交互，您就应该使用相同的 bean 实例。

您可以将“普通”输入字段完美地放在`<h:inputText>`与`multipart/form-data`编码相同的形式中。使用这种编码，HTTP 请求*只是*以稍微不同的格式发送，从而为二进制内容留出空间。有关详细背景说明，另请参阅[rich:popupPanel 和 t:dataList 下的 h:commandLink 的参数未传递给支持 bean 。](https://stackoverflow.com/questions/12156068/params-not-getting-passed-to-backing-bean-for-hcommandlink-under-richpopuppane/12159693#12159693)

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)
*   [图片未更新](https://stackoverflow.com/questions/12411698/image-not-getting-updated)
*   [primefaces中的多个图像上传](https://stackoverflow.com/questions/11098690/multiple-image-upload-in-primefaces)

* * *

**与具体问题无关**，我不知道如何解释

> *在此对象中，还必须保存上传文件的路径*

但我想指出，您绝对不能依赖发送到服务器的完整客户端文件路径。这只会在使用 IE 浏览器时发生，因为该浏览器中存在安全漏洞。您应该对或风格的文件**内容**感兴趣。您应该自己自动生成一个具有唯一名称的（临时）文件，如有必要，基于唯一的文件名（并确保第二个上传的文件巧合相同的文件名不会覆盖它）。另请参阅[如何从 Firefox 3 中的 HTML 输入表单获取文件路径](https://stackoverflow.com/questions/81180/how-to-get-the-file-path-from-html-input-form-in-firefox-3/3374408#3374408)`InputStream``byte[]`

# android - 有没有办法将现有网站用作 Android 应用程序？

> ID：13468383
> 
> 赞同：6
> 
> 时间：2012-11-20T07:24:52.170
> 
> 标签：android, mysql, web-applications

我需要您的专业知识来了解 Android 应用程序如何与现有网站进行通信。

*   使用相同的 Web 界面，但应显示为 Android 应用程序
*   使用相同的数据库，当我们尝试搜索时，结果应该显示在应用程序中
*   使用相同的身份验证，因此如果我们在我们的 Android 应用程序上接受用户名/密码，它应该使用可以进行身份​​验证的现有网站脚本，并且返回的任何内容都应该显示在应用程序中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:37:06.007

据我所知，您需要访问网站的网络服务才能将数据从网站取回到应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:39:23.470

好吧，您可以使用 webview 来显示应该为手机上的最佳用户体验而优化的页面，您可以查询数据库并在 android 上显示响应 - 为此您需要在可以接受某种查询并返回响应的网页上构建解析器例如 json 或 xml 格式。认证也是一样，其实很简单

# c# - 以编程方式选择一行 DataGridView

> ID：13468388
> 
> 赞同：2
> 
> 时间：2012-11-20T07:25:24.000
> 
> 标签：c#, winforms, datagridview

在我的表单应用程序中，有一个 ( `buttonNEW`) 选择`NewIndexRow`，`DataGridView`我想使用此按钮更改 datagridview 的索引。

```
private void buttonNew_Click(object sender, EventArgs e)
    {
        if (dataGridView.CurrentRow.Index!=dataGridView.NewRowIndex)
        {
            dataGridView.ClearSelection();
            dataGridView.Rows[dataGridView.NewRowIndex].Selected = true;
            label1.Text = dataGridView.CurrentRow.Index.ToString();

        }
    } 
```

但是单击按钮后，索引`DataGridView`不会改变。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:08:02.683

这应该工作： -

```
int numofRows = dataGridView.rows.count;

dataGridView.CurrentCell = dataGridView.Rows[numofRows - 1].Cells[0]; 
```

或者我认为你也可以这样做：-

```
dataGridView.CurrentCell = dataGridView.Rows[dataGridView.NewRowIndex].Cells[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:36:58.897

尝试使用 Linc：

```
private void buttonNew_Click(object sender, EventArgs e)
    { 

     dataGridView.Rows.OfType<DataGridViewRow>().Last().Selected = true;

   } 
```

# java - 使用 Apache Common Digester 解析 XML

> ID：13468390
> 
> 赞同：0
> 
> 时间：2012-11-20T07:25:25.073
> 
> 标签：java, xml, apache-commons-digester

我有一个xml：

```
<element name="PersonalNote" enabled="true" > 
```

和消化器 xml：

```
<set-properties-rule>
          <alias attr-name="name" prop-name="name" />
          <alias attr-name="enabled" prop-name="enabled" />          
</set-properties-rule> 
```

现在我想添加一些新属性：

```
<element name="PersonalNote" enabled="true" mandatory=”true” minLength=”0” maxLengh=”100”&gt; 
```

可能以后还需要添加更多的属性，那么如何在不修改digester xml的情况下实现这个，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:41:17.087

如果我正确理解您的问题，您应该能够删除这些`<alias>`元素。

默认情况下`<set-properties-rule>`会将所有属性映射到等效的 bean 属性。如果您的 bean 属性与您的 XML 属性不匹配，您只需要别名。

完全删除这些`<alias>`元素，并保持您的 XML 和 JavaBean 同步，一切都应该正常工作。

# sql - ASP.net 内连接不支持错误

> ID：13468391
> 
> 赞同：0
> 
> 时间：2012-11-20T07:25:25.620
> 
> 标签：sql, join

从我查找的内容来看，这应该可以工作。为什么它不是我需要帮助的事情。删除 AS 语句有什么好处吗？

```
SELECT td.Title, ti.Path, td.ImageID, ti.ImageID, td.Description 
FROM TravelImage as ti 
Inner JOIN TravelImageDetails as td ON (ti.ImageID=td.ImageID) 
AND Title LIKE '%" + @query + "%' OR Description LIKE '%" + @query + "%' 
```

编辑：我得到的错误是它说不支持加入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:50:50.320

试试这个查询，我认为**缺少**条件？

```
SELECT  td.Title, ti.Path, td.ImageID, ti.ImageID AS Expr1, td.Description
    FROM  TravelImage AS ti INNER JOIN
    TravelImageDetails AS td ON ti.ImageID = td.ImageID 
    Where  Title LIKE '%" + @query + "%' OR Description LIKE '%" + @query + "%' 
```

# c - 被调用的库过程在 gnu/linux 上无限循环运行

> ID：13468397
> 
> 赞同：-1
> 
> 时间：2012-11-20T07:26:04.967
> 
> 标签：c, gcc

我有一个库，它必须通过调用从 sqlite 数据库中读取数据

```
extern int read(char** argv, int argc); // from header 
```

它必须处理：

```
int read(char** argv, int argc) {
    char* lineborder1;
    char* lineborder2;
    char* spaces1;
    char* spaces2;
    int maxl2 = 0, maxl1 = 0;
    int i, maxi1, maxi2;
    if (prelude() == -1) return -1;
    // etc... 
```

其中 prelude 是 sqlite 连接的内部过程：

```
int prelude() {
    timefile = 0;
    f = NULL;
#ifndef WIN32
    char* temp = (char*)calloc(200, sizeof(char));
#endif
    queries = (char**)malloc(sizeof(char*) * q_cnt);
    for (x = 0; x < q_cnt; x++) {
        queries[x] = (char*)malloc(sizeof(char) * q_size);
        }
#ifdef WIN32
    retval = sqlite3_open("todo.db3", &handle);
#else
    home = (char*)getenv("HOME");
    strcpy(temp, home);
    retval = sqlite3_open(strcat(temp, "/.todo.db3"), &handle);
    free(temp);
#endif
    if (retval) {
        printf("Database connection failed\n\r");
        return -1;
        }
    return 0;
    } 
```

整个来源在这里：[bitbucket：ctodo.c](https://bitbucket.org/Cynede/ctodo/src/42629babb8b0362f08f43918ee331bb6371d4e82/ctodo.c?at=default)

我称这是从我的应用程序中读取的：

```
else if ((strcmp(argv[1], "read") == 0) || (strcmp(argv[1], "r") == 0)) {
    return read(argv, argc); 
```

但得到这个`read`调用的无限循环：

```
>>./todo r
Database connection failed
Database connection failed
Database connection failed
.... etc 
```

这是我如何构建它：

```
gcc -I . -c -o todo.a ctodo.c -lsqlite3 -O3
gcc -I . -o todo cctodo.c -lsqlite3 -O3 todo.a 
```

`help`或`version`调用 wrok 和 read 在 Windows 上工作正常，我的 linux 版本特定的东西在这里，但到目前为止我找不到错误。什么叫它`read`像这样在无限循环中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:39:53.117

该`read`函数在 中定义`libc.so`，用于读取数据。

极有可能`sqlite3_open()`调用它。

通过引入你自己的函数`read()`，你已经让你的程序进入了无限循环。如果您等待的时间足够长，您的程序将耗尽堆栈并崩溃。

医生，我这样做的时候很痛。好吧，不要那样做:-)

# javascript - jQuery提交表单不起作用

> ID：13468398
> 
> 赞同：1
> 
> 时间：2012-11-20T07:26:05.337
> 
> 标签：javascript, jquery, html, forms

```
<form accept-charset="UTF-8" action="/twitts" class="dialog   " id="twitt-form" method="post" title="Dialog" selected="true">
    <div style="margin:0;padding:0;display:inline">
        <input name="utf8" type="hidden" value="✓">
        <input name="authenticity_token" type="hidden" value="BkLNJsJfbEzfQrCTDWHW4OvvOh0l2pLPxxEJ/bGt2IY="></div>

        <input id="anonymous_id" name="anonymous[id]" type="hidden" value="22">
        <fieldset>

            <h1>Отправить сообщение</h1>
            <a class="button leftButton" type="cancel">Отмена</a>
            <a id="submit-twitt" class="button blueButton">Отправить</a>
            <!-- <input class="button blueButton" id="submit-twitt" name="commit" type="submit" value="Отправить" /> -->

            <input id="twitt-text" name="twitt[text]" size="30" type="text">

        </fieldset>
    <div class="spinner"></div>      
</form> 
```

当我打电话时

```
$('#twitt-form').submit(); 
```

在调试器或内部点击事件处理程序中什么也没发生。即使将 .submit 处理程序设置为表单

```
 $('#twitt-form').submit(function() {
        $('#twitt-text').val('');
        $('#twitt-form').attr('selected', false);
        return false;
    }); 
```

处理程序确实有效，但表单不提交任何数据。为什么 ？

还有更多：当我在表单字段表单上按 Enter 时，`#twitt-text`只需很好地提交，.submit 处理程序也可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:28:30.007

```
 $('#twitt-form').submit(function() {
        $('#twitt-text').val(''); <---  this it will make form value  empty 
        $('#twitt-form').attr('selected', false);
        return false;             
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:12:57.523

我看到这段代码存在三个问题，其中两个现在已经提出：

1.  在您的提交函数中，第一行将清除输入文本字段，因此即使提交，也不会提交任何内容。
2.  第二件事是`#twitt-form`表单本身，所以它没有`selected`属性。
3.  表单提交将通过使用取消`return false;`。

现在，如果您试图通过 AJAX 提交表单来阻止页面移动，这是您可以执行的操作的示例：

```
$('#twitt-form').submit(function(e) {

    $.ajax({
        url: $(this).attr('action'),
        data: $(this).serialize(),
        type: $(this).attr('method'),
        success: function(dataFromTheServer) {
            // do whatever
        }
    });

    $('#twitt-text').val('');

    e.preventDefault();
    return false;
}); 
```

但除此之外，我不确定您要在这里做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:33:39.697

为什么您在没有任何条件的情况下使用 return false 。

```
return false; 
```

是为了防止默认的表单动作。这就是为什么没有提交表格的原因。

# jboss5.x - JBOSS 5.0.0.GA 启动异常：org.jboss.resource.JBossResourceException：无法注册驱动程序：SQLServerDriver

> ID：13468401
> 
> 赞同：0
> 
> 时间：2012-11-20T07:26:12.887
> 
> 标签：jboss5.x, startup-error

从 eclipse indigo IDE 启动 JBoss Server 版本 5.0.0.GA 时出现以下异常：

```
12:10:21,394 WARN  [JBossManagedConnectionPool] Throwable while attempting to get a new connection: null
org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}))
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:225)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:195)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:611)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:257)
    at org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:607)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:404)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:381)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:496)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:941)
    at org.jboss.resource.adapter.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:89)
    at org.quartz.utils.JNDIConnectionProvider.getConnection(JNDIConnectionProvider.java:160)
    at org.quartz.utils.DBConnectionManager.getConnection(DBConnectionManager.java:112)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.getConnection(JobStoreSupport.java:686)
    at org.quartz.impl.jdbcjobstore.JobStoreTX.getNonManagedTXConnection(JobStoreTX.java:72)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.doCheckin(JobStoreSupport.java:3167)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.manage(JobStoreSupport.java:3811)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.run(JobStoreSupport.java:3847)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}})
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:489)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:206)
    ... 16 more
Caused by: java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}
    at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:385)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:474)
    ... 17 more
12:10:21,497 WARN  [JBossManagedConnectionPool] Throwable while attempting to get a new connection: null
org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}))
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:225)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:195)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:611)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:257)
    at org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:607)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:404)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:381)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:496)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:941)
    at org.jboss.resource.adapter.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:89)
    at org.quartz.utils.JNDIConnectionProvider.getConnection(JNDIConnectionProvider.java:160)
    at org.quartz.utils.DBConnectionManager.getConnection(DBConnectionManager.java:112)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.getConnection(JobStoreSupport.java:686)
    at org.quartz.impl.jdbcjobstore.JobStoreTX.getNonManagedTXConnection(JobStoreTX.java:72)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.doCheckin(JobStoreSupport.java:3167)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.manage(JobStoreSupport.java:3811)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.run(JobStoreSupport.java:3847)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}})
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:489)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:206)
    ... 16 more
Caused by: java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}
    at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:385)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:474)
    ... 17 more
12:10:21,598 WARN  [JBossManagedConnectionPool] Throwable while attempting to get a new connection: null
org.jboss.resource.JBossResourceException: Could not create connection; - nested throwable: (org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}))
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:225)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.createManagedConnection(LocalManagedConnectionFactory.java:195)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.createConnectionEventListener(InternalManagedConnectionPool.java:611)
    at org.jboss.resource.connectionmanager.InternalManagedConnectionPool.getConnection(InternalManagedConnectionPool.java:257)
    at org.jboss.resource.connectionmanager.JBossManagedConnectionPool$BasePool.getConnection(JBossManagedConnectionPool.java:607)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:404)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.getManagedConnection(BaseConnectionManager2.java:381)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2.allocateConnection(BaseConnectionManager2.java:496)
    at org.jboss.resource.connectionmanager.BaseConnectionManager2$ConnectionManagerProxy.allocateConnection(BaseConnectionManager2.java:941)
    at org.jboss.resource.adapter.jdbc.WrapperDataSource.getConnection(WrapperDataSource.java:89)
    at org.quartz.utils.JNDIConnectionProvider.getConnection(JNDIConnectionProvider.java:160)
    at org.quartz.utils.DBConnectionManager.getConnection(DBConnectionManager.java:112)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.getConnection(JobStoreSupport.java:686)
    at org.quartz.impl.jdbcjobstore.JobStoreTX.getNonManagedTXConnection(JobStoreTX.java:72)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport.doCheckin(JobStoreSupport.java:3167)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.manage(JobStoreSupport.java:3811)
    at org.quartz.impl.jdbcjobstore.JobStoreSupport$ClusterManager.run(JobStoreSupport.java:3847)
Caused by: org.jboss.resource.JBossResourceException: Failed to register driver for: com.microsoft.jdbc.sqlserver.SQLServerDriver; - nested throwable: (java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}})
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:489)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getLocalManagedConnection(LocalManagedConnectionFactory.java:206)
    ... 16 more
Caused by: java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver from BaseClassLoader@64b5ab{VFSClassLoaderPolicy@1d30b80{name=vfsfile:/D:/jboss-5.0.0.GA/server/default/deploy/quartz-service.xml domain=ClassLoaderDomain@18adae2{name=DefaultDomain parentPolicy=BEFORE parent=org.jboss.system.NoAnnotationURLClassLoader@df8ff1} roots=[MemoryContextHandler@9967091[path= context=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a real=vfsmemory://5c4o3p4z-92x3ci-h9qonarz-1-h9qonw1u-1a]]  delegates=null exported=[] <IMPORT-ALL>NON_EMPTY}}
    at org.jboss.classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:385)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.jboss.resource.adapter.jdbc.local.LocalManagedConnectionFactory.getDriver(LocalManagedConnectionFactory.java:474)
    ... 17 more 
```

但是当我在 Eclipse 之外运行 debug.bat 时它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T05:04:18.063

你看到最后的异常了吗

```
java.lang.ClassNotFoundException: com.microsoft.jdbc.sqlserver.SQLServerDriver 
```

检查您的类路径，看起来它无法找到该类。

谢谢，拉胡尔

# html - 访问的链接属性覆盖当前页面项

> ID：13468403
> 
> 赞同：1
> 
> 时间：2012-11-20T07:26:19.983
> 
> 标签：html, css, wordpress

我编码了很长一段时间，但似乎我以前从未遇到过这个问题，或者我只是忘记了调整，所以很讨厌:)

我有一个 wordpress 网站设置，菜单链接是：（文本）

CSS定义（部分）：

```
link (color:white;)
visited (color:white;)
hover (color:black;)
active (color:black) 
```

现在的问题是，我定义了

当前菜单项

在wordpress中，除了字体颜色外，所有东西都需要改变......似乎“已访问”正在覆盖颜色......如何解决这个问题？

CSS：

```
#pages ul li { 浮动：对；显示：块；高度：37px；填充：0px；}
        #pages ul li a:link { float: left; 颜色：#FFF；显示：块；高度：29px；字体大小：11px；填充：7px 20px 0px 20px；边距：0px；}

#pages ul li a:visited {float: left; 颜色：#fff; 显示：块；高度：29px；字体大小：11px；填充：7px 20px 0px 20px；边距：0px;}

#pages ul li a:hover { background-position: top; 背景重复：不重复；边距：0px；颜色：黑色;}
#pages ul li a:active {背景位置：顶部；背景重复：不重复；边距：0px；颜色：黑色;}
.current-menu-item a:link, .current-post-ancestor a:link, .current-menu-parent a:link, .current-post-parent a:link {background-position: top; 背景重复：不重复；边距：0px；颜色：黑色; }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:19:57.320

CSS层次结构

您的选择器只有 2 级深 .current-menu-item a:link, .current-post-ancestor a:link, .current-menu-parent a:link, .current-post-parent a:link

wordpress 选择器有 4 层深#pages ul li a:visited，而且它还有一个 ID，使它的权重超过你的 css 规则。

尝试在您的 css 规则上添加一个 id 和选择器以供浏览器读取并覆盖 WP 的 css 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:44:56.657

确保在设置链接、访问、悬停等样式的 css 文件之后加载菜单 css。

或者如果前一个是不可能的，则使当前菜单项样式的颜色属性！重要：

```
.current-menu-item {
    color: #000 !important;
} 
```

# mysql - SQL Server 相当于 MySQL 中的 DECLARE CONTINUE HANDLER？

> ID：13468404
> 
> 赞同：0
> 
> 时间：2012-11-20T07:26:19.783
> 
> 标签：mysql, sql, sql-server

我正在尝试执行以下 mySql 语句

```
"DECLARE DONE INT(1) default 0;    
DECLARE CONTINUE HANDLER FOR NOT FOUND SET DONE = 1;" 
```

在 SQL Server 2005 中

```
" DECLARE @DONE INT,    
DECLARE CONTINUE HANDLER FOR NOT FOUND SET DONE = 1" 
```

它给出了类似的错误

```
"Msg 156, Level 15, State 1, Line 1
Incorrect syntax near the keyword 'CONTINUE'.
Msg 136, Level 15, State 1, Line 1
Cannot use a CONTINUE statement outside the scope of a WHILE statement." 
```

[MySQL DECLARE ... HANDLER 命令](http://dev.mysql.com/doc/refman/5.0/en/declare-handler.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:01:07.880

SQL Server 没有直接等效于上面链接的[文档](http://dev.mysql.com/doc/refman/5.0/en/declare-handler.html)中描述的处理程序机制。最明显的替代方案是：

*   [`TRY...CATCH...`](http://msdn.microsoft.com/en-us/library/ms175976.aspx)
*   编写一个[CLR 存储过程](http://msdn.microsoft.com/en-us/library/ms131094.aspx)并使用 .NET 代码来实现您需要的任何处理代码；[这个问题](https://stackoverflow.com/questions/4956027/global-exception-handler-in-clr-stored-procedure)也有一些有用的信息

# javascript - jQuery click 在 tr 上可以正常工作，但在 td 上不行

> ID：13468407
> 
> 赞同：2
> 
> 时间：2012-11-20T07:26:47.523
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试使用 Jquery 创建实时表编辑，但我无法让它在我的 td 而不是 tr 上触发

这是我的代码。 [http://jsfiddle.net/y7Zck/1/](http://jsfiddle.net/y7Zck/1/)

这几乎可以按预期工作。我想更改的是，如果您在本例中使用值为 150 的 frameTot 时，该函数不会触发。您应该只能单击前两个字段并显示编辑框。我该怎么做呢？

我的改变尝试

```
$(".edit_tr").click(function() 
```

到

```
$(".edit_td").click(function() 
```

似乎一点帮助都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:34:16.550

它不起作用，因为这一行`var ID = $(this).attr('id');`它在您使用时是正确的`tr`，它会返回`tr`ID。当您将其更改为`TD`单击时，ID 会更改。您需要获取`TR`id 才能使其正常工作。

将其更改为

```
var ID = $(this).parent().attr('id'); 
```

检查这里，[http://jsfiddle.net/muthkum/y7Zck/2/](http://jsfiddle.net/muthkum/y7Zck/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:30:34.737

您的脚本正在访问`$(this).attr('id')`哪个（当然）与您的 td 和您的 tr 不同。

您需要更新两个侦听器以使用`$(this).closest('tr').attr('id')` *或* `parseInt($(this).attr('id'), 10)`（仅从您的 td 的 ID 中获取数字部分）。

# bash - 需要使用 Shell 脚本从目录中选择最新文件

> ID：13468411
> 
> 赞同：2
> 
> 时间：2012-11-20T07:27:00.437
> 
> 标签：bash, shell, ksh

我是 Shell 脚本的新手，我需要使用 Shell 脚本从目录中选择最新文件

目录名称：FTPDIR

此目录中的文件将是

```
APC5502015VP072020121826.csv
APC5502015VP082020122314.csv
APC5502015VP092020121451.csv
CBC5502015VP092020122045.csv
CBC5502015VP102020122045.csv
S5502015VP072020121620.csv
S5502015VP072020122314.csv
S5502015VP092020122045.csv 
```

注意：（需要从每个组中选择一个最新的）- 下面是我执行 shell 脚本后需要得到的输出

```
APC5502015VP092020121451.csv
CBC5502015VP102020122045.csv
S5502015VP092020122045.csv 
```

例如：在最新的文件`APC5502015VP092020121451.csv`中，没有 092020121451 是格式中的日期部分：`MMDDYYYYHHMM` 并且字符串部分是 APC5502015VP（字符串部分中的长度不固定）

我需要使用 shell 脚本从目录中选择这三个文件

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:20:43.967

仅在 bash 中安全地执行此操作将是非常有问题的。正如乔纳森所说，空格或换行符等“特殊”字符可能会破坏您的脚本。

如果我们可以假设不会有任何这些，那么我们可以在 bash 中完成大部分工作，而无需涉及其他工具。

```
# Make an associative array to record types, in the second loop...
declare -A a

for file in *.csv; do
    # First, we convert the filenames into something that can be sorted.
    # The next three lines account for your "unknown length" in the first part
    # of the filename. We assume the date+time is the 12 chars before ".csv".
    new="$(rev <<<"$file")"
    new="${new:4:12}"
    new="$(rev <<<"$new")"
    new="${new:4:4}${new:0:2}${new:2:2}${new:8:4}"
    len=$(( ${#file} - 16 ))
    echo "$new ${file:0:$len} $file"
done | sort | while read date type file; do
    # Next, we print only the first of each "type"...
    if [[ ${a[$type]} -eq 0 ]]; then
        a[$type]=1
        echo "$file"
    fi
    # And stop once we have collected three types.
    if [[ ${#a[*]} -ge 3 ]]; then
        break
    fi
done 
```

正如我所说，这不处理文件名中的换行符。

另请注意，这使用`rev`and `sort`，它们不是 bash 内置的。这些`rev`部分*可以*在内部完成，使用更多代码，这*可能*会使它们执行得更快，但您只会在非常极端的情况下看到差异。我们无能为力`sort`，因为 bash 中没有内置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:38:45.270

这个 Perl 脚本适用于给定的数据。毫无疑问，它可以改进。

```
#!/usr/bin/env perl
use strict;
use warnings;

my %bases;

while (<>)
{
    chomp;
    my $name = $_;
    my($prefix, $mmdd, $yyyy, $hhmm) = ($name =~ m/(.*)(\d{4})(\d{4})(\d{4})\.csv/);
    #print "$name = $prefix $yyyy $mmdd $hhmm\n";
    my $stamp = "$yyyy$mmdd$hhmm";
    if (!exists($bases{$prefix}) || ($stamp > $bases{$prefix}->{stamp}))
    {
        $bases{$prefix} = { name => $name, stamp => $stamp };
    }
}

foreach my $prefix (sort keys %bases)
{
    print "$bases{$prefix}->{name}\n";
} 
```

输出：

```
APC5502015VP092020121451.csv
CBC5502015VP102020122045.csv
S5502015VP092020122045.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:32:35.957

这是 awk 解决方案：

```
cd FTPDIR
ls -1|awk -F"VP" '{split($2,a,".");if(a[1]>b[$1]){b[$1]=$2}}END{for(i in b)print i"VP"b[i]}' 
```

测试如下：

```
> cat temp
APC5502015VP072020121826.csv
APC5502015VP082020122314.csv
APC5502015VP092020121451.csv
CBC5502015VP092020122045.csv
CBC5502015VP102020122045.csv
S5502015VP072020121620.csv
S5502015VP072020122314.csv
S5502015VP092020122045.csv
> awk -F"VP" '{split($2,a,".");if(a[1]>b[$1]){b[$1]=$2}}END{for(i in b)print i"VP"b[i]}' temp
CBC5502015VP102020122045.csv
S5502015VP092020122045.csv
APC5502015VP092020121451.csv 
```

# python - 用字典中的值交换键的改进？

> ID：13468419
> 
> 赞同：3
> 
> 时间：2012-11-20T07:27:26.537
> 
> 标签：python, dictionary

我读过两个关于用字典中的值交换键的问题：[Python: Best Way to Exchange Keys with Values in a Dictionary?](https://stackoverflow.com/questions/1031851/python-best-way-to-exchange-keys-with-values-in-a-dictionary) ; [如何交换字典中的值的键？](https://stackoverflow.com/questions/1087694/how-to-swap-keys-for-values-in-a-dictionary).

推广的最佳方法是：

```
dict((v,k) for k,v in d.items()) 
```

但是，如果像这样的字典：

```
d = {"one":1, "two":2, "a":1} 
```

mothed 得到交换的字典：

```
{1: 'one', 2: 'two'} 
```

项目 (1:'a') 丢失。那么我怎样才能得到这样的字典 {1: ('one', 'a'), 2: 'two'}？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:33:30.967

这是一种方法：

```
In [101]: d = {"one":1, "two":2, "a":1}

In [102]: answer = collections.defaultdict(list)

In [103]: for k,v in d.iteritems():
   .....:     answer[v].append(k)

   .....:     

In [104]: answer
Out[104]: defaultdict(<type 'list'>, {1: ['a', 'one'], 2: ['two']})

In [105]: dict(answer)
Out[105]: {1: ['a', 'one'], 2: ['two']}

In [106]: dict((k, tuple(v)) for k,v in answer.iteritems())
Out[106]: {1: ('a', 'one'), 2: ('two',)} 
```

如果你真的想要一个单线（我强烈建议不要这样做 - 它非常低效）：

```
In [110]: d
Out[110]: {'a': 1, 'one': 1, 'two': 2}

In [111]: dict((v, tuple([key for key in d if d[key]==v])) for k,v in d.iteritems())
Out[111]: {1: ('a', 'one'), 2: ('two',)} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T07:33:38.267

你可以使用`dict.setdefault()`：

```
In [6]: dd={}

In [7]: for x,y in d.items():
   ...:     dd.setdefault(y,[]).append(x)
   ...:     

In [8]: dd
Out[8]: {1: ['a', 'one'], 2: ['two']} 
```

或者您也可以使用`defaultdict()`：

```
In [1]: from collections import defaultdict

In [2]: d = {"one":1, "two":2, "a":1}

In [3]: dd=defaultdict(list)

In [4]: for x,y in d.items():
   ...:     dd[y].append(x)
   ...:     

In [5]: dd
Out[5]: defaultdict(<type 'list'>, {1: ['a', 'one'], 2: ['two']}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T07:35:02.963

```
d = {"one":1, "two":2, "a":1}
a = {}
for k,v in d.iteritems():
    a.setdefault(v, []).append(k) 
```

如果它必须是单线：

```
import itertools as it
import operator as op

a = {k:tuple(b[0] for b in v) for k,v in it.groupby(sorted(d.items(), key=op.itemgetter(1)), key=op.itemgetter(1))} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:33:39.000

我不确定一个班轮，但这有效：

```
old = {"one": 1, "two": 2, "a": 1}
new = {}

for key, val in old.iteritems():
    new[val] = new.get(val, []) + [key] 
```

# php - 使用 drupal_get_form 时通过菜单项传递错误的值

> ID：13468420
> 
> 赞同：1
> 
> 时间：2012-11-20T07:27:34.743
> 
> 标签：php, drupal-6

我想在菜单项中使用 drupal_get_form() 向我的函数发送一个参数，但不起作用并且发送错误的值我对此错误一无所知。

首先，我在另一个文件中从这一行调用菜单项：

```
drupal_goto( 'a/b/c/d/'.$form_state['values']['number']); 
```

这是我在另一个文件中的菜单项代码：

```
$items['a/b/c/d/%'] = array(
    'title' =>t('report'),
    'description' => 'my report',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('make_report',1),
    'access callback' => 'user_access',
    'access arguments' => array('admin'),
    'file' => 'report_file.inc',        
); 
```

这是我在 report_file.inc 中的函数头：

```
function make_report(&$form_state,$back=0){
.
. 
```

这是 $form_state 的变量转储：

storage (NULL)
已提交 (Boolean) FALSE
post (Array, 0 个元素)

这是 $back 的变量转储：
b

我想要 $back pass '1' 但它得到了我的网址的第二级。

# visual-studio-2010 - 测试永远处于“待定”状态

> ID：13468421
> 
> 赞同：4
> 
> 时间：2012-11-20T07:27:36.200
> 
> 标签：visual-studio-2010, unit-testing

在 Visual Studio Pro 2010 中，我无法运行单元测试。他们只是在“测试结果”窗口中显示“待定”的结果。

为简单起见，我创建了一个空解决方案，并添加了一个新的 C# 测试项目并单击“在解决方案中运行所有测试”。显示“测试结果”窗口，显示默认的“TestMethod1”测试，但随后什么也没有发生，状态永远显示“测试运行进行中”。从那里，单击停止按钮将状态永久更改为“测试运行停止...”。

经过一番探索，我在进程资源管理器中发现 devenv 启动了 QtAgent32 - 但都不使用任何 CPU。

这是我第一次尝试在 Visual Studio 中运行单元测试。我是否需要执行必要的设置步骤才能运行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:47:12.500

安装 Service Pack 1 以进行修复。

我最终找到了一个副本，也在这里提供了答案：[VS 2010 Ultimate web performance test always pending](https://stackoverflow.com/questions/10659741/vs-2010-ultimate-web-performance-test-always-pending)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T09:03:34.000

我知道这有点晚了。我遇到了同样的问题，在我的情况下，是控制器全盘创建了 truble

# java - 如何从外部可配置的属性文件动态加载 @scheduled 注释的 cron 表达式

> ID：13468426
> 
> 赞同：2
> 
> 时间：2012-11-20T07:27:43.010
> 
> 标签：java, spring

我需要从属性文件动态加载 @scheduled 注释的 cron 表达式。我知道解决方案是使用属性占位符，但我的问题是，可以动态修改包含 cron 表达式的属性文件，并且它的位置来自另一个属性文件。

application-context.xml 看起来像这样，

```
 <util:properties id="dynamicProps" location="${configurable.property.file.path}"
    <context:property-placeholder properties-ref="dynamicProps"  /> 
```

可配置的.property.file.path 属性存在于位于 WEB-INF/classes 下的属性文件中，其值类似于这样，

```
 configurable.property.file.path=${static.assets.path}/config/configuration.properties 
```

使用上述设置启动服务器婴儿床时出现以下错误，

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#1': Cannot resolve reference to bean 'dynamicProps' while setting bean property 'properties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dynamicProps': Invocation of init method failed; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/${configurable.property.file}] 
```

我猜这可能是因为此时属性文件还不可见。解决方案是什么？有人可以帮我吗？

# javascript - @font-face 套件预加载器

> ID：13468429
> 
> 赞同：1
> 
> 时间：2012-11-20T07:28:06.817
> 
> 标签：javascript, html, fonts, font-face, webfonts

我正在使用[Font Squirrel](http://www.fontsquirrel.com/fontface/generator) 为我的网站生成自定义图标字体文件。有没有办法在 Internet Explorer 9 和其他浏览器中呈现页面之前预加载字体。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:53:39.073

有[链接预取](http://en.wikipedia.org/wiki/Link_prefetching)。这可能适用于 IE 9。

如果一切都失败了，[这篇](http://paulirish.com/2009/fighting-the-font-face-fout/)文章可能会有所帮助。

# javascript - 每 10 秒停止选取框 5 秒

> ID：13468441
> 
> 赞同：0
> 
> 时间：2012-11-20T07:28:53.380
> 
> 标签：javascript, html, timer

我想创建一个首先开始的选取框，但每隔 10 秒，选取框将在重新开始之前停止 5 秒。

我怎样才能做到这一点？

我只设法创建一个在 5 秒后停止选取框的计时器：

```
<script>
    function startLoop() {
    setInterval( "doSomething()", 5000 ); }
    function doSomething() {
    document.getElementById('myMarquee').stop(); }
</script> 
```

HTML

```
<body onload="startLoop();">
   <marquee direction="right" id="myMarquee">This is a marquee.</marquee>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:46:52.273

几天前，我需要与您的问题类似的东西。我很快发现 marquee 不是标准元素，所以你不能在跨浏览器解决方案中使用它。

我已经提取了动画部分，基于jQuery，我在我的解决方案中使用，你可以在这个[jsFiddle中看到效果](http://jsfiddle.net/FErqP/)

**HTML**

```
<div id="container">
    <div id="mytext">
        this is a simple text to test custom marquee
    </div>
</div>​ 
```

**CSS**

```
#container
{
    display: inline-block;
    background-color: #cccccc;
    width: 100px;
    height: 100px;
    overflow: hidden;
}
#mytext
{
    display: inline-block;
    position: relative;
    white-space: nowrap;
}
​ 
```

**JavaScript**

```
$(function() {
    var txt = $("#mytext");
    txt.bind('scroll', function () {
        var el = $(this);
        // Scroll state machine
        var scrollState = el.data("scrollState") || 0;
        el.data("scrollState", (scrollState + 1) % 4);
        switch (scrollState) {
            case 0: // initial wait
                el.css({ left: 0 });
                el.show();
                window.setTimeout(function () {
                    el.trigger("scroll");
                }, 5000);
                break;
            case 1: // start scroll
                var delta = el.parent().width() - el.width();
                if (delta < 0) {
                    el.animate({ left: delta }, 2000, "linear", function () {
                        el.trigger("scroll");
                    });
                }
                break;
            case 2: // delay before fade out
                window.setTimeout(function () {
                    el.trigger("scroll");
                }, 2000);
                break;
            case 3: // fade out
                el.fadeOut("slow", function () {
                    el.trigger("scroll");
                });
                break;
        }
    }).trigger("scroll");
});​ 
```

它与您的要求不完全相同，但是如果您阅读代码并对状态机进行一些更改，您将使其正常工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:57:43.387

如果您想继续使用选取框，这应该可以工作（在支持选取框的浏览器中）：

```
<script>
    function stopRunning() {
        document.getElementById('myMarquee').stop();
        setInterval("startRunning()", 5000);
    }
    function startRunning() {
        document.getElementById('myMarquee').start();
        setInterval("stopRunning()", 10000);
    }

    //You don't really need a function to start the loop, you can just call startRunning();
    startRunning();
</script> 
```

这将使选取框开始运行，10 秒后停止，5 秒后再次启动，然后重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:48:47.063

要实现`every 10 seconds, the marquee will stop for 5 seconds before the marquee start again`您需要一些逻辑，例如。我使用 step 变量来控制进度。希望它清楚

```
<script>
var step = 1; // marquee is run on load time
function startLoop()
{
    setInterval("doSomething()", 5000 );
}
function doSomething()
{
    if (step == 0) {
        // 5 seconds are passed since marquee stopped
        document.getElementById('myMarquee').start();
        step = 1;
    }
    else
    {
        if (step == 1) {
            // 5 seconds are passed since marquee started
            step = 2; // Just delay of another 5 seconds before stop
        }
        else
        {
            if (step == 2) {
                // 10  seconds are passed since marquee started
                document.getElementById('myMarquee').stop();
                step = 0;
            }
        }
    }              
}
</script> 
```

[**查看它在 Jsfiddle 上的工作**](http://jsfiddle.net/gjwYh/1/)。我还在 div 中添加了一个计时器，它可以让您轻松检查停止和启动的行为

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:59:47.953

尝试这个：

```
var myMarquee = document.getElementById('myMarquee'); 
run();
function run() {
    setTimeout(function() {
        myMarquee.stop();
        setTimeout(function(){
            myMarquee.start();
            run();    
        },5000);   
    },10000);
} 
```

看到它在[http://jsfiddle.net/gjwYh/上运行](http://jsfiddle.net/gjwYh/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-05T04:09:51.467

如果你想在角度上应用相同的，那么你会这样做

```
import { Component, OnInit , ElementRef, ViewChild} from '@angular/core'; 
```

在课下写这个

```
@ViewChild('myname', {static: false}) myname:ElementRef; 
```

开始循环在 ngOnInit 下写这个

```
setTimeout(()=>{    //<<<---    using ()=> syntax
  this.startRunning()
  console.log("aaa") 
```

}, 1000);

将此代码放在 ngOnInit 之外

```
startRunning() {
setInterval(() =>{
  this.myname.nativeElement.stop();
  setTimeout(() =>{
    this.myname.nativeElement.start();
    console.log("start")
  },2000) 
          console.log("stop")
}, 4000); 
```

}

# c# - 客户端是否需要证书用于 WCF 中的用户名身份验证

> ID：13468443
> 
> 赞同：0
> 
> 时间：2012-11-20T07:29:11.707
> 
> 标签：c#, .net, wcf, web-services, certificate

当在带有 WCF 的 wsHttpBinding 上使用用户名认证时，客户端是否需要安装证书，还是仅在主机上需要？在任何情况下，此证书是否需要由第三方签名，或者它也可以与自签名证书一起使用？

我的理解是我可以使用自签名证书并设置

```
<authentication certificateValidationMode="None" /> 
```

在服务器端。这个对吗？

还有一件事情。如果我使用自签名证书，我是否需要将证书放在任何特定的商店中，还是都一样？*- 对自己的回答：只要在代码中设置了正确的商店，商店并不重要。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:00:22.617

WCF 不允许没有传输模式安全性的用户名身份验证，这意味着您需要证书。

据我所知，有两种方法可以获得正确的证书：

1.  从受信任的证书颁发机构购买一个。
2.  自己成为证书颁发机构并创建证书。除非您控制对话的双方，否则这不是很常用。如果您决定制作自己的证书，您可以使用[MakeCert](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386968%28v=vs.85%29.aspx)和[Pvk2Pfx](http://www.google.gr/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&sqi=2&ved=0CCsQFjAA&url=http://msdn.microsoft.com/en-us/library/windows/hardware/ff550672%28v=vs.85%29.aspx&ei=ppDCUJGMDdDdsgbN0oHICg&usg=AFQjCNHOtRWG_O8epg_wrEgtZ_Q6i1uVDA&sig2=4NW5ixkSWIm55DemhVm0kw)或[OpenSSL](http://www.openssl.org/)创建链式加密证书。查看这篇使用 OpenSSL[的操作指南文章。](http://blog.didierstevens.com/2008/12/30/howto-make-your-own-cert-with-openssl/)最后但并非最不重要的一点是，您应该将私钥保存在安全的位置。

现在您应该有以下文件（名称用于说明目的）：

*   server.cer（服务器的公钥）
*   server.pfx（服务器的密钥交换文件）
*   client.cer（客户端的公钥）
*   client.pfx（客户端的密钥交换文件）

然后您可以执行以下操作：

*   在服务器上，在本地计算机证书存储中：

    1.  将 server.pfx 导入个人文件夹。这将允许服务器使用其私钥加密消息并解密已使用其公钥加密的消息。
    2.  将 client.cer 导入到 Trusted People 文件夹。这将允许服务器使用客户端的公钥加密消息并解密使用客户端的私钥加密的消息。
*   在客户端上，在本地计算机证书存储中：

    1.  将 client.pfx 导入个人文件夹。这将允许客户端使用其私钥加密消息并解密已使用其公钥加密的消息。
    2.  将 server.cer 导入到 Trusted People 文件夹。这将允许客户端使用服务器的公钥加密消息并解密已使用服务器的私钥加密的消息。

最后在客户端和服务集的配置文件上：

```
<authentication certificateValidationMode="ChainTrust"/> 
```

这将确保只有可以链接到受信任的根存储中的证书颁发机构的证书才有效。

# regex - 由其他字符包围的正则表达式填充数字

> ID：13468450
> 
> 赞同：2
> 
> 时间：2012-11-20T07:29:44.860
> 
> 标签：regex, lookaround

我正在寻找一个正则表达式，它捕获由字符串模式包围的一系列数字，并用前导零填充该系列数字，最多 4 位。同时，应从整个字符串中删除所有空格。一些示例：“F12b”应该捕获“12”并返回“F0012b”“AB 214/3”应该捕获“214”并返回“AB0214/3”“G0124”应该捕获“0124”并返回原字符串不变

源字符串应遵循以下规则： - 应以 [a-zA-Z] 开头 - 在上述模式之后可以是任意数量的可选空格 - 数字序列后面可以跟另一个字符串 - 数字序列可以是任何位数。只有少于 4 位的序列才用前导零填充，否则保持不变。- 我只对字符串中的第一次出现感兴趣

我在这里发布这个问题是因为我没有经常使用 RegEx 来解决这个问题，但我知道这是 RegEx 的完美案例。非常感谢任何帮助，对表达式的解释肯定会帮助我理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:46:19.147

为了匹配它并提取你想要的信息，正则表达式很好，你可以使用这个：

```
^([a-zA-Z]+)\s*(\d+)(.*) 
```

[在 regexr 上](http://regexr.com?32s50)查看。您只看到在第二个示例中该空间已被删除，但所有需要的信息都在`$1`,`$2`和`$3`

正则表达式是匹配模式的工具。在替换方法中使用该模式以及如何构建替换字符串完全取决于语言，与正则表达式无关。在不懂语言的情况下，这部分无法回答。

# javascript - 使用具有静态函数的类与模块相比有什么优势吗？

> ID：13468451
> 
> 赞同：2
> 
> 时间：2012-11-20T07:30:01.253
> 
> 标签：javascript, typescript

我想要一些建议。我正在使用打字稿来创建对话框。一旦创建，他们就会照顾好自己，因为他们有自己的提交按钮并在那里进行自己的检查。

以下两种编码方式有什么优点或缺点吗？到目前为止，我唯一能看到的是带有导出的模块方法允许我隐藏一个函数并在我不导出它时将其设为私有。当我使用静态并尝试使用私有修饰符时，它会在智能感知中显示一个锁定图标，但仍然允许我使用它。

```
module Dialog {
    export class Modal {
        static createAccessModal(link: Link) {
            createModal(link);
        }
        static createAdminModal(link: Link) {
            link.Modal.MaxHeight = 600;
            link.Modal.Width = false;
            createModal(link);
        }
        static private createModal(link: Link) {

            ...
        }
    }
} 
```

或做：

```
module Dialog {
    export module Modal {
        export function createAccessModal(link: Link) {
            createModal(link);
        }
        export function createAdminModal(link: Link) {
            link.Modal.MaxHeight = 600;
            link.Modal.Width = false;
            createModal(link);
        }
        function createModal(link: Link) {

            ...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:05:24.813

对于您要实现的目标，模块方法是首选。

如果使用类形式，您实际上是在定义一个构造函数，即使您永远不会新建对象实例，并且直接在构造函数上添加不能真正私有的成员（如您所见）。

使用模块方法，您只需构建一个对象，并且您不导出的成员包含在设置对象的闭包中 - 为您提供真正的隐私。

查看两者效果的一个好方法是将每个代码粘贴到[http://www.typescriptlang.org/Playground/](http://www.typescriptlang.org/Playground/)并分析生成的代码。

# ios - 在开始 UItextview 移动光标

> ID：13468454
> 
> 赞同：2
> 
> 时间：2012-11-20T07:30:30.830
> 
> 标签：ios, uitextview

> **可能重复：**
> [将光标移动到 UITextField 的开头](https://stackoverflow.com/questions/4180263/moving-the-cursor-to-the-beginning-of-uitextfield)

您好，我有一个带有文本的文本视图，我想在开始时移动光标位置我使用了 NSMakeRange，但我不知道为什么它不起作用。我写过 NSMakeRange is different places ，希望它至少能运行一次但没有用。这是代码。提前谢谢

```
- (void)viewDidLoad
{
    [super viewDidLoad];    
    apnatxtView.textColor=[UIColor lightGrayColor];
    apnatxtView.text=@"Description goes here";
    totalLenght=apnatxtView.text.length;
     apnatxtView.selectedRange=NSMakeRange(0,0);    
}

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{

apnatxtView.selectedRange=NSMakeRange(0,0);  
    return YES;

}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    [apnatxtView resignFirstResponder];

}

- (void)textViewDidChange:(UITextView *)textView{

    if (apnatxtView.text.length == 0) {
        apnatxtView.textColor= [UIColor lightGrayColor];
        apnatxtView.text=@"Description goes here";
        apnatxtView.selectedRange=NSMakeRange(0, 0);
    }

}

- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

    if (apnatxtView.textColor == [UIColor lightGrayColor]) {
        apnatxtView.textColor=[UIColor blackColor];
       // apnatxtView.text=@"Description goes here";
        apnatxtView.text=nil;
        return YES;
    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-20T08:01:54.013

这适用于我在 iOS 6.0 模拟器上的测试：

```
- (void)textViewDidBeginEditing:(UITextView *)textView {
    dispatch_async(dispatch_get_main_queue(), ^{
        textView.selectedRange = NSMakeRange(0, 0);
    });
} 
```

我猜它在发送消息*后*会根据触摸位置更新选择。围绕它`textViewDidBeginEditing:`的作品。`dispatch_async`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:46:34.800

K 我找到了解决方案。我在光标出现之前设置光标位置我在 KeyBoardDidShow 通知中剪切并粘贴代码，它工作得很好。

# c# - 使用 javascript（客户端验证）更改 ASP.NET 自定义验证器的错误消息？

> ID：13468459
> 
> 赞同：6
> 
> 时间：2012-11-20T07:30:47.763
> 
> 标签：c#, asp.net

如何使用 javascript（客户端验证）更改 ASP.NET 自定义验证器的错误消息？

我知道我们可以使用服务器端功能轻松更改它，即

```
customvalidtor1..ErrorMessage = "Error" 
```

这将更改 CustomValidator 的错误消息。我们如何使用客户端功能做同样的事情？我很努力，但没有找到任何答案......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T08:22:51.973

我已经尝试过了，对我来说效果很好。这是解决这个问题的简单方法

```
$(source).text("* Not a NA Phone #"); 
```

# php - 使用 MySQL 和 PHP 的最佳匹配

> ID：13468467
> 
> 赞同：2
> 
> 时间：2012-11-20T07:31:25.840
> 
> 标签：php, mysql

我正在使用 PHP/MySQL 处理我的第一个项目，其中我有一个城市列表和某些类别（食品、购物等）中从 1 到 5 的评级。我想要做的是评估每一行（每个城市），当提交一个关于类别是否重要的​​表格时。

这就是我希望它工作的方式。

例如：
1.**芝加哥**美食：4，购物：4，夜生活：4
2.**纽约**美食：4，购物：5，夜生活：5
3.**波士顿**美食：5，购物：4，夜生活：3
（评级只是举例）

用户说食物不重要。因此代码只会评估购物和夜生活...纽约以 10 结尾，芝加哥以 8 结尾，波士顿以 7 结尾。

因为我有一个大约 35-40 个城市的列表，我想动态评估每个类别（如果用户认为它“重要”），并且获胜者将是评估结束时的最高数字。

有人对如何解决这个问题有任何想法吗？我在 MySQL 中建立了包含所有评级的表，现在只需要编写代码。

我尝试过：使用数组引入所有值，但我发现很难遍历每一行......帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:52:25.893

假设数据库表与此类似（至少，它们*应该*以这种方式规范化）：

```
city ( id, name );
category ( id, name );
rating ( city_id, category_id, rating ); 
```

...具有与此类似的一系列兴趣：

```
$interests = array(
    'Food',
    'Shopping'
); 
```

...以下sql：

```
$sql = 'SELECT
          city.name as city,
          GROUP_CONCAT( category.name || ": " || rating.rating, ", " ) as ratings,
          SUM( rating.rating ) as totalRating
        FROM
          rating
        JOIN
          city
          ON city.id = rating.city_id
        JOIN
          category
          ON category.id = rating.category_id
        WHERE
          category.name IN( ' . implode( ',', array_map( array( $db, 'quote' ), $interests ) ) . ' )
        GROUP BY
          city.name
        ORDER BY
          totalRating DESC'; 
```

*（我假设在这里使用[`PDO`](http://www.php.net/manual/en/book.pdo.php),用于转义，但是用你的 mysql 库提供的任何引用/转义机制[`PDO::quote()`](http://php.net/manual/en/pdo.quote.php)替换回调）`array( $db, 'quote' )`*

... 将产生与此类似的结果集（我已经为我的示例填充了随机评级数据）：

```
array (
  0 => array (
    'name' => 'Chicago',
    'ratings' => 'Food: 3, Shopping: 3',
    'totalRating' => '6'
  ),
  1 => array (
    'name' => 'New York',
    'ratings' => 'Food: 1, Shopping: 4',
    'totalRating' => '5'
  ),
  2 => array (
    'name' => 'Seattle',
    'ratings' => 'Food: 4, Shopping: 1',
    'totalRating' => '5'
  ),
  3 => array (
    'name' => 'Los Angeles',
    'ratings' => 'Food: 2, Shopping: 2',
    'totalRating' => '4'
  ),
  4 => array (
    'name' => 'Boston',
    'ratings' => 'Food: 1, Shopping: 2',
    'totalRating' => '3'
  ),
  5 => array (
    'name' => 'San Francisco',
    'ratings' => 'Food: 1, Shopping: 1',
    'totalRating' => '2'
  )
) 
```

如果您只需要第一个结果，请附加`LIMIT 1`到 sql 查询。

这应该让你知道如何去完成你想要的。

**最重要的是：**让 MySQL 完成所有工作（过滤、排序）——而不是 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:41:37.277

只需一点 PHP 代码和适当的 SQL 语句，您就可以完成这项任务。
这是一个可能的解决方案：

```
$important_cat = $_POST['categories']; //which is an array
$sql = "SELECT city, sum(".implode(' + ',$important_cat).") AS cat
        FROM tbl
        ORDER BY cat DESC";
//query sql 
```

# android - 打破阿拉伯语字体

> ID：13468468
> 
> 赞同：1
> 
> 时间：2012-11-20T07:31:33.750
> 
> 标签：android, webview, font-face, arabic

我正在制作 android 应用程序，其中我必须为那些不存在阿拉伯语的手机提供阿拉伯语文本的支持。

我通过添加以下代码在小部件（文本视图、按钮等）中成功地做到了这一点。

我`dejavusans.ttf`在assets文件夹中添加了文件。在我添加的代码中

```
 TypeFace typeFace = Typeface.createFromAsset(context.getAssets(), "dejavusans.ttf"); 
fieldName.setTypeface(typeFace);   
fieldName.setText(ArabicUtilities.reshape(resources.getString(R.string.bring_financial_arabic))); 
```

但问题出在 WebView 上。webView 的文本正在中断。我看到了不同的解决方案，包括[如何在 Android 中更改 Webview 的字体？](https://stackoverflow.com/questions/3900658/how-to-change-font-face-of-webview-in-android). 但是没有人工作正常。这是快照。![在此处输入图像描述](../Images/8e432b269eeefb6377f20581322ba7d4.png) 标题（TextView）看起来不错，但网页文本正在中断。

如果有人知道它的答案，请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:16:49.663

我找到了这个问题的解决方案。

我使用了以下工具[http://www.arabic-keyboard.org/photoshop-arabic/](http://www.arabic-keyboard.org/photoshop-arabic/)

我将我的阿拉伯语粘贴在其中并复制结果，然后将结果粘贴到我的 html 文件中。结果是这样的。

![在此处输入图像描述](../Images/7b9602a2905777a8069373d23bb3c5cc.png)

虽然它不是 100% 准确，但它比以前的要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T21:12:28.677

您可以使用 adobe indesign 为您的阿拉伯语文本，将所有段落文本粘贴到 indesign 后，您应该复制，然后从 adobe indesign 粘贴到 Photoshop，每个文本都可以。

# c++ - 带有原始音频记录和播放示例的跨平台 C/C++ 库

> ID：13468470
> 
> 赞同：3
> 
> 时间：2012-11-20T07:31:51.323
> 
> 标签：c++, c, audio, cross-platform

我正在开发一个笔记实用程序，并希望在全双工异步模式下添加一个用于录音和播放的功能。
我可以针对我的目的评估哪些跨平台 c/c++ 库/API？在这种情况下，谷歌并没有太大的帮助，而现有的 QA 并没有完全涵盖这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:37:25.207

[PortAudio](http://www.portaudio.com/)可以完成你想要的。它有许多不同技术的后端，如 ALSA、ASIO、DirectSound 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T07:41:05.157

看看[聚思](http://www.rawmaterialsoftware.com/juce.php)。有许多音频助手和许多其他实用程序，可以实现快速开发。

# html - 如何在html页面上分隔超链接

> ID：13468471
> 
> 赞同：0
> 
> 时间：2012-11-20T07:31:52.560
> 
> 标签：html, hyperlink

我有一个包含近 100 个超链接的 html 页面。

有没有办法分离所有这些链接并给我 100 个不同的 html 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:37:44.537

在这种情况下，动态站点比为每个链接创建 100 个不同的文件更好。假设大多数页面将具有相同的布局。动态站点只需要几行编码和几个文件即可。

# javascript - Javascript：将（十六进制）有符号整数转换为 javascript 值

> ID：13468474
> 
> 赞同：15
> 
> 时间：2012-11-20T07:32:05.737
> 
> 标签：javascript, sign

例如，我有一个以十六进制数字形式给出的有符号值，`0xffeb`并希望将其转换`-21`为“普通”Javascript 整数。

到目前为止，我已经编写了一些代码：

```
function toBinary(a) { //: String
    var r = '';
    var binCounter = 0;
    while (a > 0) {
        r = a%2 + r;
        a = Math.floor(a/2);
    }
    return r;
}

function twoscompl(a) { //: int
    var l = toBinaryFill(a).length;
    var msb = a >>> (l-1);

    if (msb == 0) {
        return a;
    }

    a = a-1;
    var str = toBinary(a);
    var nstr = '';
    for (var i = 0; i < str.length; i++) {
        nstr += str.charAt(i) == '1' ? '0' : '1';
    }
    return (-1)*parseInt(nstr);
} 
```

问题是，我的函数返回 1 作为两个数字的 MSB，因为仅在二进制表示“字符串”的 MSB 处查看。对于这种情况，两个数字都是 1：

```
-21 => 0xffeb => 1111 1111 1110 1011
 21 => 0x15   =>              1 0101 
```

你有什么想法来实现这个更有效和更好的吗？

问候，神话

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-20T07:42:37.680

用于`parseInt()`转换（只接受您的十六进制字符串）：

```
parseInt(a); 
```

然后使用掩码来确定是否设置了 MSB：

```
a & 0x8000 
```

如果返回一个非零值，你就知道它是负数。

总结一下：

```
a = "0xffeb";
a = parseInt(a, 16);
if ((a & 0x8000) > 0) {
   a = a - 0x10000;
} 
```

请注意，这仅适用于 16 位整数（`short`在 C 中）。如果您有 32 位整数，则需要不同的掩码和减法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-01-08T14:22:05.007

我想出了这个

```
function hexToInt(hex) {
    if (hex.length % 2 != 0) {
        hex = "0" + hex;
    }
    var num = parseInt(hex, 16);
    var maxVal = Math.pow(2, hex.length / 2 * 8);
    if (num > maxVal / 2 - 1) {
        num = num - maxVal
    }
    return num;
} 
```

和用法：

```
var res = hexToInt("FF"); // -1
res = hexToInt("A"); // same as "0A", 10
res = hexToInt("FFF"); // same as "0FFF", 4095
res = hexToInt("FFFF"); // -1 
```

所以基本上十六进制转换范围取决于十六进制的长度，这就是我想要的。希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-22T19:15:22.400

基于[@Bart Friederichs](https://stackoverflow.com/users/1145666/bart-friederichs)，我附带了：

```
function HexToSignedInt(num, numSize) {
    var val = {
        mask: 0x8 * Math.pow(16, numSize-1), //  0x8000 if numSize = 4
        sub: -0x1 * Math.pow(16, numSize)    //-0x10000 if numSize = 4
    }
    if((parseInt(num, 16) & val.mask) > 0) { //negative
        return (val.sub + parseInt(num, 16))
    }else {                                 //positive
        return (parseInt(num,16))
    }
 } 
```

所以现在您可以指定确切的长度（以半字节为单位）。

```
var numberToConvert = "CB8";
HexToSignedInt(numberToConvert, 3);
//expected output: -840 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-21T10:57:32.787

```
function hexToSignedInt(hex) {
    if (hex.length % 2 != 0) {
        hex = "0" + hex;
    }
    var num = parseInt(hex, 16);
    var maxVal = Math.pow(2, hex.length / 2 * 8);
    if (num > maxVal / 2 - 1) {
        num = num - maxVal
    }
    return num;
}

function hexToUnsignedInt(hex){
    return parseInt(hex,16);
} 
```

第一个用于有符号整数，第二个用于无符号整数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-14T08:06:45.387

由于我必须将绝对数值转换为范围从 -2^24 到 2^24-1 的 int32 值，因此我想出了这个解决方案，您只需将输入更改为一个数字`parseInt(hex, 16)`，在您的情况下，nBytes 是2.

```
function toSignedInt(value, nBytes) { // 0 <= value < 2^nbytes*4, nBytes >= 1, 
  var hexMask = '0x80' + '00'.repeat(nBytes - 1);
  var intMask = parseInt(hexMask, 16);
  if (value >= intMask) {
    value = value - intMask * 2;
  }
  return value;
}

var vals = [       // expected output
  '0x00',          // 0
  '0xFF',          // 255
  '0xFFFFFF',      // 2^24 - 1 = 16777215
  '0x7FFFFFFF',    // 2^31 -1 = 2147483647
  '0x80000000',    // -2^31 = -2147483648
  '0x80000001',    // -2^31 + 1 = -2147483647
  '0xFFFFFFFF',    // -1
];
for (var hex of vals) {
  var num = parseInt(hex, 16);
  var result = toSignedInt(num, 4);
  console.log(hex, num, result);
}

var sampleInput = '0xffeb';
var sampleResult = toSignedInt(parseInt(sampleInput, 16), 2);
console.log(sampleInput, sampleResult); // "0xffeb", -21 
```

# bash - 何时使用 set -e

> ID：13468481
> 
> 赞同：33
> 
> 时间：2012-11-20T07:32:52.257
> 
> 标签：bash, shell

`set -e`我前段时间遇到过，我承认我喜欢它。现在，过了一段时间我回来写一些 bash 脚本。

我的问题是是否有一些最佳实践何时使用`set -e`和何时不使用它（例如在小/大脚本等中），还是我应该使用像`cmd || exit 1`跟踪错误这样的模式？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-20T17:23:09.150

是的，您应该始终使用它。人们总是取笑 Visual Basic，说它不是真正的编程语言，部分原因是它的“On Error Resume Next”声明。然而，这是 shell 中的默认设置！`set -e`应该是默认的。灾难的可能性太高了。

* * *

在可以让命令失败的地方，您可以使用`|| true`或其缩写形式`||:`，例如

```
grep Warning build.log ||: 
```

* * *

事实上，你应该更进一步，并且拥有

```
set -eu
set -o pipefail 
```

在每个`bash`脚本的顶部。

`-u`引用不存在的环境变量（例如`${HSOTNAME}`, 会导致错误），代价是在引用,`${#}`之前需要进行一些检查，等等。`${1}``${2}`

`pipefail`使诸如`misspeled-command | sed -e 's/^WARNING: //'`引发错误之类的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T11:02:22.047

如果您的脚本代码在必要时仔细和正确地检查错误，并以适当的方式处理它们，那么您可能永远不需要或不想使用`set -e`.

另一方面，如果您的脚本是一个简单的顺序命令列表，要一个接一个地运行，并且如果您希望脚本在其中任何一个失败时终止，那么坚持`set -e`在顶部将正是您想要做的保持你的脚本简单和整洁。一个完美的例子是，如果您正在创建一个脚本来编译一组源代码，并且您希望在遇到第一个有错误的文件后停止编译。

更复杂的脚本可以组合这些方法，因为您可以使用`set +e`它来再次关闭其效果并返回显式错误检查。

请注意，虽然`set -e`应该导致 shell 退出*IFF*任何*未经测试*的命令失败，但明智的做法是在您的代码进行自己的错误处理时再次将其关闭，因为很容易出现命令返回非零的奇怪情况您没有预料到的退出状态，甚至可能是您在测试中可能无法捕捉到的情况，以及脚本的突然致命终止会使某些东西处于不良状态。因此，请勿使用`set -e`，或在短暂使用后将其打开，除非您真的知道自己想要它。

另请注意，您仍然可以定义一个错误处理程序，`trap ERR`以便在错误条件`set -e`生效时执行某些操作，因为它仍然会在 shell 退出之前运行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T16:51:17.973

你**喜欢**它！？

对于我自己，我更喜欢宽泛的，`.bashrc`像这样的一行：

```
trap '/usr/games/fortune /usr/share/games/fortunes/bofh-excuses' ERR 
```

（在Debian上：`apt-get install fortunes-bofh-excuses`:-)

但这只是我的偏好;-)

**更严重**

```
lastErr() {
    local RC=$?
    history 1 |
         sed '
  s/^ *[0-9]\+ *\(\(["'\'']\)\([^\2]*\)\2\|\([^"'\'' ]*\)\) */cmd: \"\3\4\", args: \"/;
  s/$/", rc: '"$RC/"
}
trap "lastErr" ERR

Gna
bash: Gna : command not found
cmd: "Gna", args: "", rc: 127

Gna gna
cmd: "Gna", args: "gna", rc: 127

"Gna gna" foo
cmd: "Gna gna", args: "foo", rc: 127 
```

那么，从那里，你可以：

```
trap "lastErr >>/tmp/myerrors" ERR
"Gna gna" foo

cat /tmp/myerrors 
cmd: "Gna gna", args: "foo", rc: 1 
```

或更好：

```
lastErr() {
local RC=$?
history 1 |
     sed '
  s/^ *[0-9]\+ *\(\(["'\'']\)\([^\2]*\)\2\|\([^"'\'' ]*\)\) */cmd: \"\3\4\", args: \"/;
  s/$/", rc: '"$RC/
  s/^/$(date +"%a %d %b %T ")/"
}
"Gna gna" foo

cat /tmp/myerrors 
cmd: "Gna gna", args: "foo", rc: 1
Tue 20 Nov 18:29:18 cmd: "Gna gna", args: "foo", rc: 127 
```

...您甚至可以添加其他信息，例如`$$, $PPID, $PWD`或者您的..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:37:53.010

当此选项打开时，如果简单命令由于 Shell 错误的后果中列出的任何原因而失败或返回退出状态值 >0，并且在一段时间、直到或 if 关键字之后不属于复合列表的一部分，并且不是 AND 或 OR 列表的一部分，也不是前面有 ! 的管道 保留字，则shell应立即退出。

# c# - 文本块打开视图框而不是导航

> ID：13468482
> 
> 赞同：0
> 
> 时间：2012-11-20T07:32:53.323
> 
> 标签：c#, silverlight-5.0, windows-phone-8

我的文本块导航到新页面时遇到问题！，导航不是问题！，我有一个与故事板相连的视图框，所以当我点击它时，视图框会展开或折叠，但在这个视图框旁边我有一个文本块，上面有颜色，当我单击该彩色文本框时，它应该导航到另一个屏幕，但它的作用是，它首先扩展视图框，然后导航！，有什么想法吗？

![没有被点击](../Images/2a09989c66ba6518fa47c2b84be91ed9.png) 单击后打开，然后导航，希望在单击绿色块时不展开

![单击后，它会展开，然后导航](../Images/b42774958d5e5275b75638a52b582ad0.png)

这是 viewbox 和 textblock_tap 事件的编码：

```
 private void viewboxHeader_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {

        vb = (Viewbox)sender;
        Storyboard sbExpand = new Storyboard();
        Storyboard sbCollapse = new Storyboard();
        sbExpand = (Storyboard)vb.TryFindResource("Expand");
        sbCollapse = (Storyboard)vb.TryFindResource("Collapse");

        string Status = vb.Tag.ToString();

        if (Status == "1")
        {
            descend = false;
            sbCollapse.Begin();
            vb.Tag = 0;
        }
        if (Status == "0")
        {
            descend = true;
            sbExpand.Begin();
            vb.Tag = 1;
        }
    }

    private void TextBlock_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
    {

        this.NavigationService.Navigate(new Uri("/UI/frmWFDocumentDetail.xaml", UriKind.Relative));
    } 
```

提前致谢！我使用 Visual Studio 2012/silverlight/windows phone 8 应用程序！视窗 8 sdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:20:20.427

只需将事件标记为已处理，以防止它传播到父控件：

```
private void TextBlock_Tap_1(object sender, System.Windows.Input.GestureEventArgs e)
{
    e.Handled = true;
    this.NavigationService.Navigate(new Uri("/UI/frmWFDocumentDetail.xaml", UriKind.Relative));
} 
```

# xslt - xslt 将返回数字与 E

> ID：13468484
> 
> 赞同：1
> 
> 时间：2012-11-20T07:33:08.377
> 
> 标签：xslt, xslt-2.0

在 xslt 中，当我除数时，比如

```
<xsl:value-of select="number( $field ) div number( $factor )"/> 
```

结果值可以包含 E（10 次方），例如`8.004091E9`

如何使它返回*正确的*值 =>`8004091000`没有`E`s ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:00:40.353

在 XSLT 1.0 中，输出永远不应该是科学记数法，所以我假设您使用的是 XSLT 2.0。

在 XSLT 2.0 中，如果 (a) 它是一个浮点数或双精度数，(b) 它的绝对值在 1e-6 到 1e+6 范围之外，则输出应该是科学计数法。

避免以科学计数法输出的一种方法是使用 format-number() 对其进行格式化。

另一种方法是避免浮点：例如，代替

```
<xsl:value-of select="number( $field ) div number( $factor )"/> 
```

采用

```
<xsl:value-of select="xs:decimal( $field ) div xs:decimal( $factor )"/> 
```

# php - 每年和每月的子目录错误

> ID：13468491
> 
> 赞同：0
> 
> 时间：2012-11-20T07:33:31.067
> 
> 标签：php, codeigniter, function

我在 codeigniter 中使用这个函数来尝试检查和创建目录和子目录，只有当它们不存在时。仅制作了 k_uploads，但在主目录“k_upoloads”中制作子目录时发生错误。结构应该是

```
 k_uploads (main directory)
       -2012 (subdirectory in main directory - made per year in k_uploads)
          -Jan(subdirectory in 2012 - made every month in 2012)
            -subdirx (subdirectory in Jan - holds the excel files for that month)
          xxyyy.xlsx (month files in subdirx) 
```

每年和每月都应该创建目录和子目录。我不知道问题出在哪里，它适用于普通的 php，但不适用于 codeigniter。

```
public function makeDir(){
            $labref = $this->uri->segment(3);
            $dirName='k_uploads';
             echo  $store_dir= date('Y').'/'.date('M').'/'.$subdirx;          

             if(!is_dir($dirName))
             $k= mkdir($dirName, 0777);
            if($k){
                echo $dirName. 'dir has been created';
            }else{
                echo 'An error occured';
            }
            if(is_dir($dirName))
                $w=  mkdir($store_dir,0777);
            if($w){
                echo $sore_dir. 'subdirs have been created';
            }else{
               echo 'An error occured';  
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:59:38.640

`mkdir`有一个可以设置的递归标志。这将创建完整路径。见[PHP：mkdir](http://php.net/manual/en/function.mkdir.php)

所以你应该使用`mkdir($store_dir,0777, true)`

该函数可能如下所示：

```
public function makeDir(){
  $subdirx = $this->uri->segment(3);
  $store_dir= APPPATH . 'k_uploads/' . date('Y').'/'.date('M').'/'.$subdirx;          

  if(!is_dir($store_dir)) {
    return mkdir($dirName, 0777, true);
  } else {
    return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:12:25.307

为此，您需要按顺序创建每个子目录，因为 PHP 不会为您执行此操作。您可能希望`is_dir()`在执行此操作时检查目录是否已存在。

这是一个例子：

```
function createDir($dirToMake) {
   $root = "/home/sites/test/www/";
   $dArray = explode("/",$dirToMake);
   if (file_exists($root) && is_dir($root)) {
       // just a quick check
       if (substr($root,0,-1) !== "/") $root .= "/";
       foreach ($dArray as $v) {
          if (strlen($v) == 0) continue;
          $root = $root.$v."/";
          if (file_exists($root) && is_dir($root)) continue;
          mkdir($root);
       }
   }
   else throw new Exception("Root directory does not exist");
} 
```

此函数还允许常见错误（// 是其中之一），并且将循环遍历，创建所需的子目录架构（如果它不存在）。

# windows-8 - 0x800a1391 - JavaScript 运行时错误：“WinJS”未定义

> ID：13468492
> 
> 赞同：2
> 
> 时间：2012-11-20T07:33:31.183
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我已经从[CodePlex](http://codeshow.codeplex.com/)下载了代码 然后我安装了 live、telerik 等的 sdk

安装后我运行代码，我收到以下错误

```
 `0x800a1391 - JavaScript runtime error: 'WinJS' is undefined` 
```

Converters.Js 文件中发生的错误是

```
(function() {
   var r = Windows.Storage.ApplicationData.current.roamingSettings.values;

    // Export shortDate
    WinJS.Namespace.define("codeSHOW.Converters", {  // Error Occured here

   });

})(); 
```

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:28:12.743

您是否在您的 htm 文件中包含了 base.js 在哪个文件进行该调用之前？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-18T13:46:32.073

在您的 default.htm 页面（或具有相同代码的其他 html 页面）上，将 WINJS 引用更改为您的应用程序中此位置的位置，即

参考 > 适用于 JavaScript 2.0 的 Windows 库 > js > base.js

我遇到了同样的问题，只需要从 URL 引用中删除 .preview

```
<!-- WinJS references -->
<link href="//Microsoft.WinJS.2.0.Preview/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.2.0.Preview/js/base.js"></script>
<script src="//Microsoft.WinJS.2.0.Preview/js/ui.js"></script> 
```

到

```
<!-- WinJS references -->
<link href="//Microsoft.WinJS.2.0/css/ui-dark.css" rel="stylesheet" />
<script src="//Microsoft.WinJS.2.0/js/base.js"></script>
<script src="//Microsoft.WinJS.2.0/js/ui.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T19:25:53.697

您应该添加到 Javascript 的参考 Windows 库

# asp.net-mvc - 如何忽略 MVC4 WebAPI 配置中的路由？

> ID：13468494
> 
> 赞同：5
> 
> 时间：2012-11-20T07:33:36.740
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-web-api-routing

我有一个添加了 elmah 的 MVC4 项目。我 global.asax 的 Application_Start() 有

```
WebApiConfig.Register(GlobalConfiguration.Configuration); // #1
FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
RouteConfig.RegisterRoutes(RouteTable.Routes);   // #2 
```

#1和#2如下

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional } );
    }
    ...
}

public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

模板是相同的，并且路由到控制器的工作方式完全符合我们的要求（从 URI 规范的角度来看）。问题是在添加 WebAPI 路由之后添加了忽略路由。因此，MVC4s 路由应该忽略并由 Elmah（例如`/elmah.axd/styles`）处理的内容被 WebAPI 拦截并且请求失败 => 所以我的 elmah.axd 页面中没有 CSS。我尝试在 global.asax 中翻转 #1 和 #2 但这导致所有 WebAPI 路由失败 - 比 CSS 在 Elmah 中不起作用更糟糕！

我基本上需要一些方法来指示 WebAPI 的路由忽略`{resource}.axd/{*pathInfo}`作为第一条路由 - 我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T06:25:30.183

这对我们有用 - 将忽略从包装中移出并作为第一个。

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        //ignore route first
        RouteTable.Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        // And taken out of the call below
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T16:29:06.367

听起来您需要更好地控制路由定义的顺序。您可以直接在 global.asax.cs 中定义它们，而不是从单独的 RouteConfig 和 WebApiConfig 类中提取它们，如下所示：

```
RouteTable.Routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "DefaultApi",
    routeTemplate: "{controller}/{action}/{id}",
    defaults: new {id = RouteParameter.Optional});

RouteTable.Routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

# magento - magento：如何为简单产品添加多种尺寸和不同数量

> ID：13468497
> 
> 赞同：0
> 
> 时间：2012-11-20T07:33:44.200
> 
> 标签：magento, size

我希望将数量添加到 magento 简单产品中的每个尺寸，在这里，我已经在自定义选项中配置了尺寸，因为它没有添加数量的选项。

银河系

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:04:13.193

简单的产品无法实现您想要实现的目标。您应该改用可配置产品。[例如，您可以在此处](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)阅读有关可配置产品的信息。

# iphone - 按钮不响应触摸

> ID：13468507
> 
> 赞同：1
> 
> 时间：2012-11-20T07:35:04.317
> 
> 标签：iphone, uiimageview, uibutton

在我的应用程序中，我将 a添加`UIImageview`到 a`UIView`并`UIButton`添加到 that `UIImageView`。该按钮未响应触摸事件，并且未调用操作选择器。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:37:37.597

因为`UIImageView`它的`userInteractionEnabled`属性`NO`默认设置为。将其设置为`YES`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:38:48.160

确保您已将 IBAction 附加到您的按钮。然后检查它是否启用了用户交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T10:33:24.957

```
UIIMageView *image;
image.userInteractionEnabled=YES; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T11:01:12.180

首先你添加imageview然后添加按钮然后按钮像这段代码一样正常工作

```
 UIView *AddView=[[UIView alloc]initWithFrame:CGRectMake(55, 0, 100, 100)];
 UIImageView *imgview=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];

                UIButton *btnRemove = [[UIButton alloc]init];
                UIImage *btnImage = [UIImage imageNamed:@"close.png"];
                [btnRemove setImage:btnImage forState:UIControlStateNormal];
                [btnRemove addTarget:self
                              action:@selector(btnREmoveAction:)
                    forControlEvents:UIControlEventTouchUpInside];
                btnRemove.frame = CGRectMake(0,0, 29, 29);

                btnRemove.tag=indexStart;

                [AddView addSubview:imgview]; // add the imageview
                [AddView addSubview:btnRemove];  // add the button 
```

# php - php签入功能，如foursquare

> ID：13468509
> 
> 赞同：1
> 
> 时间：2012-11-20T07:35:12.043
> 
> 标签：php, checkin

如何继续**在 php 中制作像foursquare 这样的签到功能的系统？**

我想构建一个这样的功能，但我不知道如何启动它（只是签入功能）。您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:46:28.937

一种简单的方法是使用用户、位置和签入 SQL 表，并在签入表中设置外键。任何时候有人在某个位置签到，您都可以在该表中添加一个条目。

显然，架构在foursquare这样的规模上会有所不同。您可能希望使用 NoSQL 或类似的东西（JSON、MongoDB）和相同的“签入表”方法，但为更快的遍历而构建。

# php - PHP 类自动增量

> ID：13468518
> 
> 赞同：1
> 
> 时间：2012-11-20T07:35:38.273
> 
> 标签：php, loops, for-loop

我想在 Wordpress 循环中自动生成以下代码：

```
<ul class="content">
  <li class="box it" data-id="id-1" data-type="it">
    <h1>No# 01</h1>
  </li>
  <li class="box medical" data-id="id-2" data-type="medical">
            <h1>No# 02</h1>
  </li>
  <li class="box education" data-id="id-3" data-type="education">
            <h1>No# 03</h1>
  </li>
</ul> 
```

我希望它让我的 php 代码从 Wordpress 循环中回显“data-id=”+（如上例中的自动递增数字）。

我将如何构建循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:37:32.383

尝试

```
<ul class="content">
 <?php for($i=1;$i<some_num;$i++) {?>
 <li class="box it" data-id="id-<?php echo $i; ?>" data-type="it">
    <h1>No# <?php echo $i; ?></h1>
  </li>
  <?php  } ?>
</ul> 
```

# c# - C# udp 套接字未接收到整个消息

> ID：13468519
> 
> 赞同：2
> 
> 时间：2012-11-20T07:35:44.943
> 
> 标签：c#

我有以下方法将 rcon 命令发送到游戏服务器。

```
public string sendCommand(string command)
{
byte[] bufferTemp = Encoding.ASCII.GetBytes(command);
byte[] bufferSend = new byte[bufferTemp.Length + 4];

//big enough to receive response
byte[] bufferRec = new byte[65000];

//intial 4 characters as per standard
bufferSend[0] = byte.Parse("255");
bufferSend[1] = byte.Parse("255");
bufferSend[2] = byte.Parse("255");
bufferSend[3] = byte.Parse("255");
int j = 4;

for (int i = 0; i < bufferTemp.Length; i++)
{
    bufferSend[j++] = bufferTemp[i];
}

//send rcon command and get response
try
{
    this.server.Socket.Send(bufferSend, SocketFlags.None);
    this.server.Socket.Receive(bufferRec);
}
catch (SocketException e)
{
    MessageBox.Show(e.ToString(), "Error occured");
}

string response = Encoding.ASCII.GetString(bufferRec);

return response;
} 
```

在我可能发送的所有命令中，其中 1 个返回的数据比其他命令多得多，而且 *buffer_rec* 字节数组似乎只收到大约 1/4 的消息，但该数组已被声明为足够大包含所有数据。在随后的 3 个请求中，其余数据得到输出，就好像它以某种方式被缓冲了一样。

我不知道为什么会这样。如果你这样做，你能告诉我如何解决这个问题吗？

谢谢克鲁兹

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-20T14:08:01.393

好的，经过6个小时的研究，我终于想出了一个解决方案，所以这里对数据的接收做了一个小改动，注意线程休眠10ms，这似乎是让数据报所必需的准时到达。

```
 //send rcon command and get response
    string response = "";
    try
    {
        this.server.Socket.Send(bufferSend, SocketFlags.None);

        do
        {
            int bytesReceived = this.server.Socket.Receive(bufferRec);
            response += Encoding.ASCII.GetString(bufferRec, 0, bytesReceived);
            System.Threading.Thread.Sleep(10);
        } while (this.server.Socket.Available > 0);
    }
    catch (SocketException e)
    {
        MessageBox.Show(e.ToString(), "Error occured");
    } 
```

如果您认为有更好或更优雅的方法来处理这个问题，请不要犹豫，猛烈抨击我的代码，但可以通过提供替代方法来做到这一点，因为我总是乐于学习新事物。问候， 克鲁兹

# c# - 如何以 Win 形式嵌入 Microsoft Office？

> ID：13468523
> 
> 赞同：0
> 
> 时间：2012-11-20T07:36:00.433
> 
> 标签：c#, winforms, activex

我无法以 Win 形式托管 MS Office。在做谷歌之后，我发现微软已经删除了 dsoframer.ocx。那么任何人都可以帮助我如何在winform中托管MS office？我找到了一些第三方工具，比如亿图。但是我想自己做而不使用任何第三方工具？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T10:38:15.717

您正在寻找的是所谓的 OLE、对象链接和嵌入。Microsoft Office 最初于 1990 年发布，是最后一个仍然支持它的主要 Microsoft 产品。时间对 OLE 并不友好，协议很复杂，很难做到正确。对程序稳定性也非常不利，您不仅会导入另一个程序的窗口和 UI，还会导入它的所有错误。

值得注意的是，.NET 框架在发布时根本没有任何支持。Office 2007 是最后一个支持它的版本，但它存在一些令人讨厌且无法解决的问题。就在 Office 2010 测试版发布之前，DsoFramer 已从 Microsoft 服务器中删除。

这已经一去不复返了，再也不会回来了。通过将 UI 嵌入到 Office 程序中前进，而不是相反。VS 的 Office 项目模板得到了很好的支持。有支持在您自己的程序中嵌入文字处理器或电子表格的 3rd 方产品。

# javascript - 使用 KO 将模型作为参数传递给链接按钮单击

> ID：13468524
> 
> 赞同：0
> 
> 时间：2012-11-20T07:36:05.280
> 
> 标签：javascript, knockout.js

在下面的示例中，我需要在链接按钮单击 (List, range) 中将模型作为参数传递。如何实现这一点

```
<div data-bind = "foreach:modelList" >
        <div class="BDCRQuery">
            <div class= "Body" > 
                <div>
                    <select id ="SELECT" data-bind="options: Attributes, optionsText: 'AttributeName', optionsValue: 'Id', optionsCaption: 'Select Attribute...',value : SelectedAttribute"></select>
                </div>
                <div>
                    <span>with any of the following values:</span>
                </div>
                <div class="option">
                    <a href="#"  id = "List" class="link">List</a> | <a href="#"  id= "Range" class="link">Range</a>
                </div>
               </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:44:38.000

luse $parent 和 bind 关键字

```
<a data-bind="click: $parent.functionName.bind($parent)" /> 
```

$parent 将指向持有 modelList 数组的对象，它会调用一个名为 functionName 的函数，bind 将确保`this`关键字是正确的上下文。该函数将单击的项目作为参数

# migration - joomla 迁移 1.5 到 2.5 错误未定义

> ID：13468525
> 
> 赞同：0
> 
> 时间：2012-11-20T07:36:08.317
> 
> 标签：migration, joomla1.5, joomla2.5

我尝试使用 jUpgrade 将 Joomla 中的网站从 1.5 迁移到 2.5，但收到“未定义的迁移”错误。

这是我启用调试时的错误：

```
==========
[checks]

1

==========
[cleanup]

1

==========
[decompress]

1

==========
[install_config]

1

==========
[install_db]

==========
[1] [users]

==========
[2] [categories]

.

==========
[3] [content]

==========
[undefined] [undefined]

==========
[undefined] [undefined]

==========
[undefined] [undefined] 
```

似乎无法通过菜单迁移。我试图清空菜单表，但发生了同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T23:00:54.783

对我来说，解决方案是暂时增加 PHP 时间限制，以便您可以完成迁移过程，如果您有很多内容并且 jupgrade 从内容表中获取的行数超过您的时间限制可以处理的行数，这似乎会出现问题，从而导致 PHP 错误和停止整个过程

# python - 运行 python 脚本后如何查找 CPU 利用率和内存使用情况

> ID：13468528
> 
> 赞同：2
> 
> 时间：2012-11-20T07:36:17.853
> 
> 标签：python, memory, cpu-usage

我在 python 中工作，我有一个 python 脚本，它从文本文件中读取数据并保存到数据库中。

我有一些要求，比如找到低于 3 分

```
1\. Total execution time taken by the script for running
2\. CPU utilization (For process performing by the python script)
3\. Memory usage (For process performing by the python script) 
```

对于第一点，即，我找到了脚本处理（读取文本文件并保存到数据库）所花费的总执行时间，如下所示

```
python -m cProfile script_that_runs_process.py 
```

但我无法理解如何找到另外两点？我用谷歌搜索并找到了一些python模块[psutil](http://code.google.com/p/psutil/)，但我很困惑，真的不知道如何用这个实现另外两点......

任何人都可以让我知道如何查找`CPU Memory utilization`，`Memory Usage`当运行 python 脚本时（执行某些任务）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:48:11.827

查看用于 CPU 分析的[RunSnakeRun](http://pypi.python.org/pypi/RunSnakeRun/2.0.2b1)（[主页）和用于内存分析的](http://www.vrplumber.com/programming/runsnakerun/)[meliae](https://launchpad.net/meliae)。

我以前使用过 RunSnakeRun，对它的表现非常满意。它甚至为您将 cProfile 转储处理为可视化文件，因此您可以轻松查看代码大部分时间花在哪里。

Meliae 对记忆做同样的事情。

至于 CPU 使用率，您可能只想`top`在命令行中点击（假设是 linux 发行版）并跟踪您的进程以查看它占用了多少 CPU

希望这可以帮助

# linux - bash中if语句的表达式中的语法错误

> ID：13468529
> 
> 赞同：0
> 
> 时间：2012-11-20T07:36:21.610
> 
> 标签：linux, bash, shell, if-statement

代码如下，我想检查一些文件大小小于 410Bytes 的文件：

```
for file in *; do
    if [[ "$file" =~ ^dataset([0-9]+)$ && `du -b $file/${BASH_REMATCH[1]}_conserv.png` -lt 410 ]]; then
    cd $file
    $some_commands
    cd ..
    fi
done 
```

但是，当我运行这个脚本时，它会这样抱怨：

```
less_than_410.bash: line 2: [[: 13605   dataset4866/4866_conserv.png: syntax error in expression (error token is "dataset4866/4866_conserv.png") 
```

有没有人有关于如何解决这个问题的想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:46:47.353

```
du -b file 
```

它将打印文件大小和名称。仅用于`cut`获取大小：

```
du -b file | cut -f 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:56:10.210

而不是使用如此复杂的表达式，只需执行以下操作：

```
find . -maxdepth 1 -regex '.*/dataset[0-9]+' -size -410c 
```

（请注意， -maxdepth 和 -regex 都是要查找的 gnu 扩展。由于您的问题被标记为 linux，因此这些选项可能可用。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:26:06.217

使用 bash 扩展通配符来限制文件循环：

```
shopt -s extglob
for file in dataset+([0-9]); do
    num=${file#dataset}
    (( $(stat -c %s "$file/${num}_conserv.png") >= 410 )) && continue
    do stuff here
done 
```

# talend - 在 talend 中将数据库值设置为上下文变量

> ID：13468536
> 
> 赞同：0
> 
> 时间：2012-11-20T07:36:59.003
> 
> 标签：talend

我有一份像这样流动的工作。

```
 tAccessDatabse_1 ---> tFileOutputXML_1\. 
```

现在，我的数据库有一个带有用户名和用户 ID 的模式。我的任务是从数据库创建/发送数据到 xml 文件，文件名带有用户名，即，一个文件必须为每个用户创建一个带有他/她名字的文件。

我尝试创建一个 conetxt 变量，但是如何从数据库中将用户名设置为该上下文变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:34:08.550

1.  从表中选择不同的用户名。
2.  使用 tFlowToIterate 迭代每个用户名。（使用主链接将表格组件连接到该组件）
3.  使用 Iterate 链接连接到 tJava 组件。
4.  使用 tjava 组件将用户名分配给上下文变量。例如。如果表格组件的输出行是第 1 行，则`context.username=row1.username`.
5.  `'OnComponentOk'`使用to Select data from table based on the where 条件将 tJava 连接到表组件：`username='"+context variable+"'`
6.  将数据写入文件。将文件名指定为`"<path>\"+context.username`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-24T13:11:36.120

`tYOURDBInput -> [row1] -> tFlowToItterate -> [itterate] -> tJava -> "globalMap.put("DESC", (String)row1.column);"`

如果您只有一条线，请通过

`(String) globalMap.get("DESC")`

我使用此设置来检索存储在要定期刷新的表中的外部系统的密码。这可以防止每次密码更改时重新生成代码。自然保护你的桌子。

# html - 网站视频不起作用

> ID：13468545
> 
> 赞同：3
> 
> 时间：2012-11-20T07:37:27.737
> 
> 标签：html, hostmonster

我正在制作一个包含 .ogg 和 .mp4 视频的网站，但由于某种原因，当我在 chrome 中访问我的网站时，它在由 hostmonster 托管时无法播放。该视频在本地主机上运行良好，所以我不知道为什么它不起作用。

如果有帮助，这是我的代码：

```
<video width="100%" height="100%" >

 <source src="web.ogg" type="video/ogg" autoplay="autoplay">
  <source src="web.mp4" type="video/mp4" autoplay="autoplay">

 Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T09:06:24.370

您的代码没问题，它应该适用于支持 HTML5 视频的所有浏览器，问题是您的服务器没有响应 mime-type such `.ogg`or `.mp4`. 默认情况下，Apache 通过检查文件的扩展名来决定与每个文件一起发送的媒体类型。扩展类型映射存储在*httpd/conf*目录中的 mime.types 文件中。如果错过了一对扩展类型，那么您就有这个问题。这就是为什么它可以在 localhost 上工作，但不能在您的服务器上工作的原因，不同的 mime.types 文件

如果您有权访问 mime.types 文件，请搜索以下行：

```
video/mp4                   mp4 mp4v mpg4
video/ogg                   ogv 
```

如果您无法修改主配置文件，请编辑`.htaccess`位于根目录中的文件（如果不存在，请随意创建它）。添加此行：

```
AddType video/mp4 mp4 mp4v mpg4
AddType video/ogg ogv 
```

# vb.net - 如何使用 Listview 控件删除数据库记录？

> ID：13468558
> 
> 赞同：1
> 
> 时间：2012-11-20T07:38:09.887
> 
> 标签：vb.net

**你好，早上好，**

我一直在做一个小项目，将一些数据存储在 MySQL 数据库中。到目前为止，我已经能够关注在线教程并从这个论坛上的朋友和其他人那里获得有关我的代码的帮助。但是现在，我想做一些我似乎找不到任何教程的事情。因此我来到这里。

我在 MySQL 数据库中有数据，我知道如何使用 SELECT 语句来检索记录并分配给 DataTable，然后使用 DataTable 的内容填充 ListView 控件。现在，我想帮助您了解如何删除这些记录（通过使用按钮单独和集体删除）。我知道 ListView 控件有一个属性，它允许在每一行上使用复选框，但我不知道如何使用它来选择我想要删除的行。另外，我做了一些阅读，发现我可以使用 .Remove() 方法来执行此操作，但是如何将其传递回数据库？

如果有人知道可以帮助我的教程，请指出正确的方向。或者，如果您也愿意在这里为我提供帮助，我将不胜感激。

//Kismet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:10:57.020

您可以使用 Listview 的 onitemcommand 事件。

在 Listview 中提供数据库主键作为 dataKeyNames。

```
 <asp:ListView ID="ListView1" runat="server" DataSourceID="AccessDataSource1" 
    GroupItemCount="3"  ItemPlaceholderID="itemPlaceholder" DataKeyNames="Id"> 
```

将链接按钮作为删除按钮。

```
<asp:LinkButton ID="lnkDeletebtn" runat="server" ForeColor="Blue" Font-Underline="true" CommandName="Delete" >Delete</asp:LinkButton>

  protected void ListView1_ItemCommand(object sender, ListViewCommandEventArgs e)
{       
    if (e.CommandName.ToString()=="Delete")
    {
        //here get your datakey
        string id = listview1.DataKeys[e.ItemIndex].Value.ToString();

           //Now you can fire your delete query 
}
} 
```

# iphone - kobold2d ios 设备构建失败

> ID：13468562
> 
> 赞同：1
> 
> 时间：2012-11-20T07:38:18.297
> 
> 标签：iphone, objective-c, cocos2d-iphone, kobold2d

我试图在我的 iphone 4 上运行我的 kobold2d 项目，但它让我构建失败，

Apple Mach-O 链接器错误。

Cocos2d 项目运行良好，所以我的配置文件没有任何问题。我正在打开 kobold2-0-4.xworkspace。顺便说一句，同一个项目在 ios Simulator 上运行完美

错误是：找不到文件：/Users/bigayvaz/Library/Developer/Xcode/DerivedData/Kobold2D-canokjowlgyrikflbvkipwwnizsr/Build/Products/Debug-iphoneos/libkobold2d-ios.a

链接器命令失败，退出代码为 1

顺便说一句，我使用 xcode 4.5.2

# html - 如何防止用户从我的 HTML 页面下载演示文稿 (PPT) 和视频

> ID：13468565
> 
> 赞同：-2
> 
> 时间：2012-11-20T07:38:28.223
> 
> 标签：html

> **可能重复：**
> [如何防止从我的网站下载图像和视频文件？](https://stackoverflow.com/questions/1294501/how-to-prevent-downloading-images-and-video-files-from-my-website)

我有一个 HTML 页面，它驻留在我的机器上。我每页有 2 个项目 1 - PPT 演示 2 - 视频教程。我想阻止用户下载内容供个人使用。如何做到这一点？

提前致谢 ！

麦迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:42:05.773

不幸的是，简短的回答是，如果内容应该同时在您的网站上可用，它就不能以一种好的方式完成。

有一些解决方案可以在将文件发送到浏览器时混淆文件的路径，然后使用 JavaScript 在客户端“解密”路径。但这些解决方案绝不是万无一失的，因为解密技术也必须发送给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:47:09.060

这并不容易，特别是如果您已经在页面上显示它们。当您这样做时，它们将被下载到浏览器上，这是不可能的，至少我知道您可以轻松地做到这一点！

你所能做的就是让它变得更难......但它仍然是可能的！即使您可以阻止他们下载文件，您也无法阻止他们将 VCR 连接到他们的视频卡并重新录制。即使您使用一些保护路径技术来阻止这种情况，您也无法阻止他们将摄像机指向屏幕。

同样适用于 ppt 演示文稿......因为他们可以查看它们......用户可以截取屏幕截图或做任何事情来创建自己的副本！

# mkmapview - IOS 6.0 MKAnnotation标注气泡奇怪行为

> ID：13468566
> 
> 赞同：2
> 
> 时间：2012-11-20T07:38:33.690
> 
> 标签：mkmapview, mkannotation

我最近在 IOS 6.0 上遇到了一些与 MKAnnotation（MKMap Kit 的一部分）相关的奇怪问题，可能你们中的一些人也有同样的想法，或者有想法或建议如何跳过/避免/解决它。

这是我的地图上需要一些带有标注气泡的引脚（仅包含标题和字幕）当我按下它时，标注开始。由于用户舒适，我在中心引脚上添加了观察者：

```
(void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context{
    NSString *action = (NSString*)context;
    if([[change valueForKey:@"new"] intValue] == 1 && [action isEqualToString:@"GMAP_ANNOTATION_SELECTED"])  {
        if ([((MKAnnotationView*) object).annotation isKindOfClass:[CustomPlacemark class]]) {
            CustomPlacemark *place = ((MKAnnotationView*) object).annotation;

                       [mapView setCenterCoordinate:place.coordinate animated:YES];            
        }
    }
} 
```

在 ios 5.1 或更高版本上，一切看起来和工作正常（按下后引脚居中，标注气泡显示在上方水平居中），但在 IOS 6.0 上，行为是奇怪的，引脚居中也是如此，但标注气泡不是，即使它的宽度足以填满屏幕在水平方向上，它可能会部分出现在屏幕之外。

尚未找到任何手动设置外观行为的解决方案或选项。有什么建议吗？

谢谢进一步的回答，对不起我的英语。

# csv - 导入csv并在循环中一次一行使用单元格值

> ID：13468570
> 
> 赞同：1
> 
> 时间：2012-11-20T07:39:00.607
> 
> 标签：csv, loops, cells

我正在尝试在 python 中编写一段代码，它将访问 csv 文件中的数据，逐行获取值并在循环中使用表达式中的值迭代这些值，然后再移动到下一个。

我的 csv 文件有两列和 298 行，第一列是标题。

我想写一些内容：对于除第一行之外的每一行（一次一个），将 var1 设置为单元格 1，将 var2 设置为单元格 2，然后使用这些值来做某事。在做了一些研究之后，我似乎无法直接从 csv 文件中执行此操作，因此我编写了一个空的本地数组来保存数据。到目前为止，我有：

```
import csv
filename=open("pathway/filename.csv",'rb')
datareader=csv.reader(filename)
datareaderList=[]

for data in datareader:
    datareaderList.append(data) 
```

这给了我一个数组，其中包含来自 csv 文件的数据。当我打印 datareaderList 我得到 [['Min',;Max'],['0','1'],['0',2'] 等。

我现在希望能够处理数据列表并访问一行中的单元格，以将它们添加到要在表达式中使用的变量中。我不知道如何做到这一点——事实上，我什至不知道如何从数据中的各个位置获取值。

在文本中，我要编码的是：

```
for each row in the list of data:
    set var1 to cell position 2,1 (ie. 1st cell below header), var2 to cell position 2,2
        run con expression using var1 and var2 as variables
#iterate through each row of data in the list moving onto the next once the con expression is completed,
#i.e. next run var1 will be cell position 3,1, var2 will be cell position 3,2 etc. 
```

如果有人对如何做到这一点有任何想法，我会非常感激，因为我真的很好并且真正被卡住了！如果您需要更多信息或澄清，请告诉我。提前致谢。

# sql - 内连接更新

> ID：13468574
> 
> 赞同：1
> 
> 时间：2012-11-20T07:39:22.070
> 
> 标签：sql, oracle11g

我有以下两个表 TAB_1

```
FID   T_NAME_1 NAME2
--------------------- 
```

选项卡_2

```
FID   T_NAME_2   NAME3
---------------------- 
```

对于 tab_1 和 tab_2 的所有匹配 fid，T_NAME_1 和 T_NAME_2 的一些不匹配字段不应该存在。所以我想用 t_name_2 的所有未匹配值更新表 tab_1 的 t_name_1。我尝试了以下返回错误的查询

```
update tab_1 set t_name_1 = (  select  t2.t_name_2 from tab_2 t2 left join tab_1 t1 on 
t1.fid = t2.fid where t1.t_name_1 <> t2.t_name_2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:48:34.657

尝试：

```
update tab_1 t1
   set t_name_1 = (select t2.t_name_2
                     from tab_2 t2
                    where t1.fid = t2.fid
                      and t1.t_name_1 <> t2.t_name_2)
 where exists (select 1
          from tab_2 t2
         where t1.fid = t2.fid
           and t1.t_name_1 <> t2.t_name_2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:41:23.673

试试这个解决方案：

```
update tab_1 t1 set t_name_1 = (  select  t2.t_name_2 
                                  from tab_2 t2 
                                  where t1.fid = t2.fid 
                                  and t1.t_name_1 <> t2.t_name_2)
where exists (select *
              from tab_2 t2
              where t1.fid = t2.fid
              and t1.t_name_1 <> t2.t_name_2) 
```

# c - 当源从 ipv6 侦听时无法连接回环地址

> ID：13468583
> 
> 赞同：3
> 
> 时间：2012-11-20T07:39:58.827
> 
> 标签：c, sockets, tcp, cgi, ipv6

我有一个正在监听端口的服务器

```
sockfd = socket(PF_INET6,SOCK_STREAM,IPPROTO_TCP);
memset(&addr,0,len = sizeof(addr));
addr.sin6_family = AF_INET6;
addr.sin6_port = htons(2000);
addr.sin6_flowinfo = 0;
addr.sin6_scope_id = 0;
addr.sin6_addr = in6addr_any;

bind(sockfd,(struct sockaddr*)&addr,len);
listen(sockfd,4); 
```

它正在等待接受

```
.....    
socket = accept(sockfd,(struct sockaddr*)&addr,&len); 
```

我用 netstat -tan 看到了“tcp 0 0 :::2000 :::* LISTEN”

我有一个客户端正在尝试连接该服务器但出现错误连接（）失败，连接被拒绝

```
memset(&addr,0,sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
addr.sin_port = htons(2000);

if ((sockfd = socket(PF_INET,SOCK_STREAM,IPPROTO_TCP)) == -1)
     printf("ERROR opening socket\n");

memset(buffer,0x00,sizeof(buffer)); 
```

我在这里填充缓冲区。

```
if (connect(sockfd,(struct sockaddr *)&addr,sizeof(addr)) < 0)
 printf("connect() failure, %s-\n", strerror(errno)); 
```

我可以用 telnet xx.xx.xx.xx 2000 连接。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:09:49.607

要连接到 IP6 服务器，客户端应尝试建立 IP6 连接。

所以你可能想改变这个：

```
addr.sin_family = AF_INET;
addr.sin_port = htons(2000);
addr.sin_addr.s_addr = htonl(INADDR_LOOPBACK); 
```

成为：

```
addr.sin6_family = AF_INET6;
addr.sin6_port = htons(2000);
addr.sin6_addr = in6addr_loopback; 
```

* * *

telnet 客户端可在内部使用`getaddrinfo()`来查询通过 telnet 命令行中给出的 IP4 地址指定的主机是否有可用的 IP6 服务。

* * *

顺便说一句：`bind()` and的最后一个参数`connect()`是`socklen_t`. 的最后一个参数`accept()`是类型`socklen_t *`。

# php - 使用 php 和 Mysql 按最高数字排序并确认

> ID：13468585
> 
> 赞同：0
> 
> 时间：2012-11-20T07:40:06.527
> 
> 标签：php, mysql, post, rows

好吧，我有这个 mysql 表，其中一列中有数字，确认布尔值为 0 或 1，我有大约 1,000 行，所以这不是我可以手动执行的操作，但无论如何...我想按最高值对行进行排序并获取前 5 个人的姓名，并将这 5 个人放在另一个表格的列中，然后将它们设置为已确认并继续，直到表格中没有人未确认...例如：

```
Name:Rank:Confirm
Bob:5000:0
James:34:0
Josh:59:1
Alex:48:0
Romney:500:0
Rolf:24:0
Hat:51:0 
```

因此，当您运行代码时，它将执行以下操作：

```
Squad:Name1:Name2:Name3:Name4:Name5
1:Bob:Romney:Hat:Alex:James 
```

（你可以看到 Josh 被排除在外，Rolf 太低了）

而且由于罗尔夫一个人，没有其他人，他不会被分到一个团队中，并且不会被确认......

我在 mysql 方面并不是真正的专业人士，所以我对此感到困惑，最多能够按等级组织整个事情，仅此而已._。

编辑：我对此的可怕尝试：

```
<?php 
$parse = mysql_query("SELECT MAX(rank) AS rank FROM users AND confirm='0'");
mysql_query("Insert into squad (nameone)values($parse)");
mysql_query("Update squad set confirm = '1' where name = $parse");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:06:10.070

假设确认将只有 1 或 0。

```
CREATE TABLE table2 (id INT PRIMARY KEY AUTO_INCREMENT, name varchar(255));
CREATE PROCEDURE rank()
BEGIN
   DECLARE count INT DEFAULT 1;
   WHILE count > 0 DO
      UPDATE table1 SET Confirm=2 WHERE Confirm=0 ORDER BY Rank DESC LIMIT 5; 
      INSERT INTO table2 (SELECT GROUP_CONCAT(Name) FROM table1 WHERE Confirm=2);
      UPDATE table1 SET Confirm=1 WHERE Confirm=2;
      SELECT count(*) FROM table1 WHERE Confirm=0;
   END WHILE;
END; 
```

随时调用过程 rank() `CALL rank();`

# http - jsf facelets 和 http post

> ID：13468588
> 
> 赞同：2
> 
> 时间：2012-11-20T07:40:30.300
> 
> 标签：http, jsf, soap, facelets

我已经在 jsf 中制作了一个按本书工作的 Web 应用程序。我使用 facelets 和许多支持 bean 进行演示，并使用 JPA 进行 DB 访问，现在我有一个涉及 HTTP 消息的要求。也就是说，我会定期从路由器接收有关其状态的 SOAP 消息作为 HTTP POST 请求的内容。此请求与我的客户与我的网站的通信无关，它是一条以肥皂消息为内容的常规 POST 消息，并且标头中没有资源路径。

例子：

`POST / HTTP/1.0 Host: something Content-Length: 23149 Content-Type: application/soap+xml; charset=utf-8 SOAPAction: "urn:ddce" Connection: close`

 `My SOAP message is here`  `* * *

我需要使用 premefaces push 技术或类似技术向网站上的客户显示该消息，但问题是我不知道我的 faces servlet 如何响应接收到此消息并将其转发到托管 bean。我应该制作一个自定义 servlet 并将其与我的 faces servlet 连接，还是可以将 faces servlet 配置为在我的客户请求网页的同一端口上响应此 post 请求。

任何的建议都受欢迎`

# java - 如何可信地分发 Java 桌面应用程序？

> ID：13468589
> 
> 赞同：0
> 
> 时间：2012-11-20T07:40:30.040
> 
> 标签：java, jar, security, executable-jar, software-distribution

我已经阅读[了这个问题](https://stackoverflow.com/questions/80105/whats-the-best-way-to-distribute-java-applications)，它非常详细地介绍了技术方面。

对于我的应用程序（在线游戏客户端），我创建了可执行 JAR 并将其发布到网站。

由于我刚刚开始推广，我面临一些关于信任的问题。人们说它可能是病毒或木马或其他一些恶意软件。如果我需要自己下载它，我也会有这些担忧。

那么我怎样才能说服人们它不是恶意软件呢？

我想想：

*   Java 应用市场
*   一些在线杀毒服务
*   罐子签名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:49:08.983

我认为您可以`Installable Setup`使用名为[Inno Setup](http://www.jrsoftware.org/isdl.php)的免费工具制作文件。这是我用过的很酷、简单、可配置（当然免费）的安装程序制作工具。我已经在我的众多 java 桌面项目中使用了这个工具。

# events - 命令发生的事件的标识

> ID：13468591
> 
> 赞同：1
> 
> 时间：2012-11-20T07:40:35.847
> 
> 标签：events, command, identity, cqrs

当命令在 CQRS 系统中执行时发生的事件是否与命令具有相同的 id，以便它们可以与命令相关联。

我目前正在我的 CQRS 系统中实现 Saga，据我所知，saga 的概念是它们处理特定事件，然后定义和执行命令以完成由 Saga 表示的过程。

我现在的问题是 Saga 如何知道它正在处理的事件是它正在等待的事件。

我是否应该存储传递给 Saga 中 CommandBus 的命令的 ID 以等待具有相同 ID 的事件？如果命令的执行导致许多不同的事件，它们都具有相同的 Id 怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:11:42.520

对于 sagas，必须有一些关于组成消息的相关键。有时这可能是一个自然的业务域键，例如 OrderId。其他时候，全局唯一键更合适，例如 Guid。此键关联与 saga 实现的单个任务相关的消息。

在您的情况下，这个相关 ID 似乎是启动传奇的命令的 ID。

> 我是否应该存储传递给 Saga 中 CommandBus 的命令的 ID 以等待具有相同 ID 的事件？

是的。如果您可以断言此 ID 是唯一的并且完全标识了 saga 实现的任务，那么这应该是 saga 的相关 ID。

> 如果命令的执行导致许多不同的事件，它们都具有相同的 Id 怎么办？

它们都共享一个相关 ID，但我不认为它是事件的 ID。事件本身可能有一个单独的 ID，但要让 saga 发挥作用，它必须有一个相关 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T09:42:20.880

我同意 eulerfx 并想补充一点：

如果 Saga 与特定的聚合相关，聚合的 ID 就足够了。

```
Command: CreateCustomer { CustomerId = New Guid }
- Creates Customer Aggregate with CustomerId
- Emits Event CustomerCreated { CustomerId = Customer.CustomerId }

Command: BlackListCustomer { CustomerId = Customer.CustomerId }
- Blacklists Customer
- Emits Event CustomerBlacklisted { CustomerId = Customer.CustomerId }

Saga: CustomerLifecycle
- Listens to Event CustomerCreated
- Stores created customer's CustomerId
- Listens to Event BlacklistCustomer and only acts if CustomerIds match 
```

# c# - 如何在按钮单击事件的中继器中找到控件，并将中继器放置在asp.net C#的gridview中

> ID：13468594
> 
> 赞同：0
> 
> 时间：2012-11-20T07:40:45.777
> 
> 标签：c#, asp.net, button, gridview, repeater

我需要检查是否选中了单选按钮，或者不需要将其值设置为变量。

我如何遍历转发器中的 radioButtonList 以检查用户在按钮单击时选择 True 或 false 并且按钮放置在 gridview 和转发器之外。

我试过这个：protected void btnsave_Click(object sender, EventArgs e) { if (!Page.IsValid) return; 整数 tcounter = 0; int fcounter = 0;

```
 for (int i = 0; i < gridMainSurveyQuestion.Rows.Count; i++)
        {
            GridView grid = (GridView)gridMainSurveyQuestion.Rows[i].FindControl("RptQuestions");

            Repeater repea = (Repeater)grid.Rows[i].FindControl("RptQuestions");
            for (int j = 0; j < repea.Items.Count; j++)
            {
                RepeaterItem currentitem = repea.Items[j];
                RadioButtonList rlist = (RadioButtonList)currentitem.FindControl("rblanswer");
                if (rlist.SelectedItem.Value == "0")
                {
                    fcounter++;
                    lblfalse.Text = fcounter.ToString();
                }
                if (rlist.SelectedItem.Value == "1")
                {
                    tcounter++;
                    lbltrue.Text = tcounter.ToString();
                }
            }
        }
    } 
```

但显示错误：无法将“System.Web.UI.WebControls.Repeater”类型的对象转换为“System.Web.UI.WebControls.GridView”。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidCastException：无法将“System.Web.UI.WebControls.Repeater”类型的对象转换为“System.Web.UI.WebControls.GridView”类型。

源错误：

第 89 行：for (int i = 0; i < gridMainSurveyQuestion.Rows.Count; i++) 第 90 行：{ 第 91 行：GridView grid = (GridView)gridMainSurveyQuestion.Rows[i].FindControl("RptQuestions"); 第 92 行：第 93 行：Repeater repea = (Repeater)grid.Rows[i].FindControl("RptQuestions");

源文件：C:\Users\madiha.rahman\Desktop\PICG_SurveyModule\PICG_SurveyModule\Survey.aspx.cs 行：91

你能改正吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:53:07.093

您首先需要遍历 GridView Rows 以查找每个中继器。然后从每个中继器中找到每个单选按钮列表，如下所示。

```
 protected void Button1_Click(object sender, EventArgs e)
  {
        foreach (GridViewRow gvRow in gvTemp.Rows)
        {
            Repeater repeater = (Repeater)gvRow.FindControl("repeater1");

            foreach (RepeaterItem repItem in repeater.Items)
            {
                RadioButtonList rbList = (RadioButtonList)repItem.FindControl("radiobuttonlist1");

                foreach (ListItem item in rbList.Items)
                {
                    if (item.Selected)
                    {
                        //code for selected items goes here...
                    }
                    else
                    {
                        //code for not selected items goes here...
                    }

                    if (item.Value == "0")
                    { 
                        //code for items with value == "0" goes here...
                    }

                    if (item.Value == "1")
                    {
                        //code for items with value == "1" goes here...
                    }
                }
            }
        }
  } 
```

快乐编码……；）

**编辑：**删除复选框并根据提问者的要求放置单选按钮列表。

**编辑：**根据提问者的要求，添加了遍历单选按钮列表中每个单选按钮的内部 foreach 循环。

# javascript - wordpress 通过 jquery 自定义字段值

> ID：13468597
> 
> 赞同：3
> 
> 时间：2012-11-20T07:40:53.170
> 
> 标签：javascript, jquery, wordpress

我正在开发一个底部有缩略图的 jquery 滑块，我希望它们与相关视频链接。我正在做的是我正在添加一个来自管理员的帖子，标题包含图像的标题，内容区域包含缩略图，并且我正在添加一个自定义字段的视频链接。

如果我只对图像（不是视频）进行相同的处理，请再次使用滑块，它工作正常。我单击底部的缩略图并在滑块中显示大图像。我正在通过这行代码获取我单击的图像源

```
 var url = $(this).attr("src"); 
```

它为我提供了来自 img 标签的图像来源。一切都很好。但现在我的确切观点是我想通过上面的代码获取自定义字段值，但我不知道该怎么做，因为我从互联网上随机尝试了这么多方法，但对我来说没有任何效果。

希望你们能理解我在说什么，如果不是的话，如果需要，我会提供更多详细的代码。

任何帮助将不胜感激。

这是我的完整代码（php和html）

```
 </div>
        <div class="video-gallery">
            <a class="prev browse left"><<</a>
            <div class="scrollable" id="scrollable">
                <div class="items">
                    <?php if (have_posts()) : ?>
   <?php
  $thePosts = get_posts('numberposts=50&category=4');
  foreach($thePosts as $post) :
  setup_postdata($post);
  $custom_field = get_post_meta($post->ID,'video path', true);
  echo '<div class="myclass" style="display:none" id="'.$custom_field.'"></div>';
  the_content();?>
  <?php endforeach; ?>
  <?php else : ?>
   No Results
  <?php endif; ?>
                </div> 
            </div> 
```

这是javascript jquery

```
 <script type="text/javascript">
$(".video-gallery img").click(function() {
// see if same thumb is being clicked
if ($(this).hasClass("active")) { return; }

// calclulate large image's URL based on the thumbnail URL (flickr specific)
var url = $('.myclass').attr('id');
alert(url);
// get handle to element that wraps the image and make it semi-transparent
var wrap = $(".image_wrap").fadeTo("medium", 0.5);

// the large image from www.flickr.com
var img = new Image();

// call this function after it's loaded
img.onload = function() {

    // make wrapper fully visible
    wrap.fadeTo("fast", 1);

    // change the image
    wrap.find("iframe").attr("src", url);

};

// begin loading the image from www.flickr.com
img.src = url;

// activate item
$(".video-gallery img").removeClass("active");
$(this).addClass("active");

  // when page loads simulate a "click" on the first image
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:51:38.417

您需要使用[get_post_meta()](http://codex.wordpress.org/Function_Reference/get_post_meta)函数来检索所需的自定义字段，如下所示：

```
$custom_field = get_post_meta($post->ID,'CustomFieldName', true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:19:33.457

您可以使用以 data- 为前缀的自定义属性，在检索每个缩略图时添加：

```
<img data-video="get_post_meta($post->ID,'video_ulr', true);" src="..."> 
```

您可以使用 Jquery 操作这些“数据”。例如，要在您的示例中检索数据，请使用以下命令：

```
var url = $('this').data('video'); 
```

查看[jQuery 文档](http://api.jquery.com/data/)以获取更多信息/示例。

# iphone - 如何将 Facebook 访问令牌添加到 Web 服务（json）以访问 iPhone 中的 URL

> ID：13468607
> 
> 赞同：1
> 
> 时间：2012-11-20T07:41:29.113
> 
> 标签：iphone, ios6

我必须获取 Facebook 访问令牌并通过 URL 传递它以获取 ttsid，然后解析 json 以获取 Web 服务内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:47:52.857

请检查这个 facebook 图表。它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:48:05.837

请查看[链接](http://developers.facebook.com/docs/howtos/ios-6/)和 [Fb ios6](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)。你可以在那里查看[官方教程](http://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/)。[Fb 图表](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)可能会有所帮助。

# d3.js - d3.js：为什么 d3.geo.path() 给出 NaN？

> ID：13468609
> 
> 赞同：2
> 
> 时间：2012-11-20T07:41:33.730
> 
> 标签：d3.js, geojson

我正在尝试使用 d3 进行一些在线映射，但是当我尝试在两点之间绘制一条线时遇到了问题。

我已经计算了两个多边形（源和目标）的质心

在代码中：

```
var projection = d3.geo.mercator()
    .scale(width)
    .translate([0, 0]);

var path = d3.geo.path()
    .projection(projection); 
```

从 JS 控制台：

```
> path({type: "LineString",
      coordinates: [path.centroid(source_country), path.centroid(target_country)]});

"M277.05056877663407,121.67976219138909L-694.1792414247936,NaN" 
```

然而，质心计算似乎工作正常（绘制这些点在地图上显示它们）

```
> [path.centroid(source_country), path.centroid(target_country)]

[
Array[2]
0: 103.89396329123777
1: -41.453727169465765
length: 2
__proto__: Array[0]
, 
Array[2]
0: -260.3172155342976
1: -245.57309459883245
length: 2
__proto__: Array[0] 
```

任何想法为什么 NaN 出现在为我的 LineString 生成的路径的末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:58:06.007

这里的问题是您要投影纬度/经度坐标两次。`path()`操作员期望采用纬度/经度并投影到像素；该`path.centroid()`方法还需要一个纬度/经度几何，并且还产生一个基于像素的投影。

因此，当您调用`path`时`[path.centroid(...), path.centroid(...)]`，您正在尝试投影已经投影的坐标。`NaN`因为像素坐标的 y 位置 -245 超出了经度值的范围，所以您得到了。

解决此问题的最简单方法可能是使用`d3.svg.line`创建质心-质心路径。我没有对此进行测试，但我认为它看起来像：

```
var line = d3.svg.line();
line([path.centroid(source_country), path.centroid(target_country)]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-08T08:14:42.337

好的，刚才我遇到了同样的错误，

对于遇到 NAN 问题的任何人：

1.  坐标格式必须正确。例如对于 type `Polygon`，坐标必须有一个 3 级嵌套数组。例如`[[[1,2],[2,3]]]`

2.  坐标必须是浮点数/整数，但不能是字符串（例如`1`正确、`"1"`错误）

3.  您可以查看错误结果的详细内容，例如`M...L...Z...`找出错误在哪里。

# java - 如何让 XSLT 在 Java 中返回 UTF-8

> ID：13468612
> 
> 赞同：2
> 
> 时间：2012-11-20T07:41:37.913
> 
> 标签：java, xml, xslt, encoding, utf-8

我试图让我的 XSL 脚本使用 UTF-8 编码。åäö 和希腊字符之类的字符就像垃圾一样出现。让它工作的唯一方法是将结果写入文件。如果我将它写入输出流，它只会返回垃圾（System.out 有效，但这可能是因为它被重定向到文件）。

结果需要从 servlet 返回，请注意这不是 servlet 配置问题。我可以从 servlet 返回一个带有希腊字符的硬编码字符串，它工作正常，所以这是转换的问题。

这是我当前的（简化的）代码。

```
protected void doGet(final HttpServletRequest request, final HttpServletResponse response) throws ServletException,
IOException {
    try {
        response.setCharacterEncoding("UTF-8");
        response.setContentType("text/html; charset=UTF-8");

        final TransformerFactory factory = this.getFactory();

        final File inFile = new File("infile.xml");
        final File xslFile = new File("template.xsl");
        final File outFile = new File("outfile.html");

        final Templates templates = factory.newTemplates(new StreamSource(xslFile));
        final Transformer transformer = templates.newTransformer();
        transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");

        final InputStream in = new FileInputStream(inFile);
        final StreamSource source = new StreamSource(in);

        final StreamResult result1 = new StreamResult(outFile);
        final StreamResult result2 = new StreamResult(System.out);
        final ByteArrayOutputStream out = new ByteArrayOutputStream();
        final StreamResult result3 = new StreamResult(out);

        //transformer.transform(source, result1);
        //transformer.transform(source, result2);
        transformer.transform(source, result3);

        final Writer writer = response.getWriter();
        writer.write(new String(out.toByteArray()));
        writer.close();
        in.close();

    } catch (final TransformerConfigurationException e) {
        e.printStackTrace();
    } catch (final TransformerException e) {
        e.printStackTrace();
    }
} 
```

此外，我的 XSL 脚本包含以下内容

```
<xsl:output method="html" omit-xml-declaration="yes" encoding="UTF-8" indent="yes" /> 
```

什么是让它工作的正确方法？如果这可能有任何帮助，我正在使用撒克逊人进行转型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T07:47:34.670

这几乎肯定是问题所在：

```
writer.write(new String(out.toByteArray())); 
```

您已经仔细地将文本编码为 UTF-8，然后*使用平台默认编码*转换为字符串。您几乎*不*应该使用使用平台默认编码的`String`构造函数和方法。即使您*想*使用该编码，也要明确地这样做。

如果你还是要写信给 a `Writer`，你为什么要开始写信给 a `ByteArrayOutputStream`？为什么不直接去呢`Writer`？

但是，最好直接写入响应的输出流 ( `response.getOutputStream()`)，并将响应的内容类型设置为指示它是 UTF-8。

请注意，如果您真的想`String`事先获得结果，请使用`StringWriter`. `ByteArrayOutputStream`写入 a然后转换为字符串是没有意义的。

# android - 添加 android:widgetCategory="keyguard|home_screen" 同时仍支持旧的 sdk

> ID：13468618
> 
> 赞同：8
> 
> 时间：2012-11-20T07:42:04.657
> 
> 标签：android, android-widget, android-4.2-jelly-bean

我正在尝试修改我的小部件，使其支持放置在 4.2 锁屏上。但是我仍然想支持旧的 SDK。

我添加了

```
android:widgetCategory="keyguard|home_screen" 
```

到我在 res/xml 中的 appwidget-provider，但 eclipse 抱怨说“在包 android 中找不到属性widetCategory 的资源标识符”

如果我将 minSdkVerion 提高到 17 一切正常，但我仍想支持较旧的 SDK。

我尝试使用资源限定符创建一个单独的 res/xml-v17/mywidget.xml 并且只在那里添加标签，但错误仍然出现。

谢谢你的帮助。

**编辑：** 我想通了。使用 res/xml-v17/ 文件夹就是答案。我只需要将项目的构建目标更改为 17 / 4.2。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T08:22:57.483

我认为设置`targetSdk`为`17`就足够了。在旧 SDK 上没有意义的 XML 元素会被忽略。

无需将 mywidget.xml 放入`res/xml-v17`文件夹

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T08:49:06.053

*将 mywidget.xml 的副本放在 res/xml-v17/ 文件夹中。这以 Android 4.2 为目标，并且 appwidget-provider 元素上的所有新“属性都将可用。还在 Eclipse 中右键单击您的项目并将构建目标更改为：API 级别 17/Android 4.2*

我看到了你的编辑。但我认为这更清楚地表明这个问题有答案。

**更新：**我可以确认 Tomáš Hubálek 的回答。不需要 xml-v17。更改构建目标就足够了。在 Eclipse 中右键单击您的项目并将**构建目标**更改为：API 级别 17/Android 4.2

# iphone - 如何减小图像 jpeg/png 的大小

> ID：13468625
> 
> 赞同：0
> 
> 时间：2012-11-20T07:42:30.453
> 
> 标签：iphone, ios, ios4, ios-simulator

我通过传递两个参数使用以下方法创建图像，一个是`UIImage`对象是 imagdata，`NSString`对象是 storeImage

JPG：`[UIImageJPEGRepresentation(imageData, 1.0) writeToFile:storeImage atomically:YES];` 或 PNG： `[UIImagePNGRepresentation(imageData) writeToFile:storeImage atomically:YES];`

我的问题是，在我使用上述方法后，原始图像大小为 2.1 MB，模拟器中的图像大小为 4.2 MB。

我不想使用任何压缩方法，也不想损失任何图像质量。我想复制给定路径中的图像。在实际大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:04:57.123

使用图像的简单数据对象。尝试以下代码，其中图像数据位于 NSData 对象中。

> [imageData writeToFile:storeImage atomically:YES];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:11:51.407

你能告诉我原始尺寸和格式是什么吗？
减小尺寸的一种方法是损失一点质量。

```
[UIImageJPEGRepresentation(imageData, 0.5) writeToFile:storeImage atomically:YES] 
```

另一种方法是使用 ImageIO 框架。

# jquery - 如何在使用 jquery 提交时将项目从一个 div 移动到另一个选定的复选框

> ID：13468628
> 
> 赞同：1
> 
> 时间：2012-11-20T07:42:50.297
> 
> 标签：jquery

大家好，我正在研究 jquery，我有一个像这样的 html 代码

```
<div>
    <span class="span1">
      <label class="checkbox" />
          <input type="checkbox" class="regular-checkbox" id="Header" />
          <label for="Header"></label>
      </label>
    </span> 
    <span class="span1">Images</span> 
    <span class="span1">SKU</span>
    <span class="span2">Name</span> 
    <span class="span1">Price</span>                             
</div>

<div id="separate"></div>
      <input type="button" id="button" /> 
```

我试过这样它不起作用

```
<script type="text/javascript">
    $(document).ready(function(){
    $(#button).click(function(){
   $(function () {

      $("input:checkbox").toggle(function () {
         $("#Header").appendTo("#separate");
      },function () {
         $("#separate").appendTo($(this));
      });
      });

   });
</script> 
```

我有这个`DIV`，我有一个`checkbox`从这里我有一个图像，价格和名称（手机）。这是我的代码，当我选择 时，我有一个“href”图标，我提交了`checkbox`图像，价格和名称应该移动到另一个`DIV`我该怎么做，当我取消选择时`checkbox`？它应该切换。你能帮我解决这个问题吗，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:59:33.937

我就是这样做的。[http://jsbin.com/umivoc/1/](http://jsbin.com/umivoc/1/)

JavaScript：

```
$(function () {
  // Check if user clicks on the checkbox
  $("#Header").click(function() {

    if($('#Header').is(':checked')){

      // If the checkbox becomes checked, 
      // move the contents to our new div (div2)
      $("#div1").contents().appendTo("#div2");
    } else {

      // Otherwise we can assume it is being unchecked, 
      // so move everything back to it's original div (div1)
      $("#div2").contents().appendTo("#div1");
    }
  });
}); 
```

HTML 标记：
我清理了你的标记，你有开放的标签标签，你可能应该把你想要移动的元素放在他们自己的包装器 div 中，以使事情变得简单。

```
<span class="span1">
   <label for="Header"></label>
   <input type="checkbox" class="regular-checkbox" id="Header" />
</span> 
<div id="div1">
   <span class="span1">Images</span> 
   <span class="span1">SKU</span>
   <span class="span2">Name</span> 
   <span class="span1">Price</span>                             
</div>
<div id="div2"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:04:57.950

目前还不是很清楚你需要什么，但可能会导致解决方案：

```
<input type="checkbox" class="regular-checkbox" id="Header" />
<br/>
Pos:1
<div id="oryginal">
    <span class="span1">Images</span> 
    <span class="span1">SKU</span>
    <span class="span2">Name</span> 
    <span class="span1">Price</span>
</div>                           
<br/>
Pos:2
<div id="separate"></div>​

$("input:checkbox").toggle(
   function () {
         $("#oryginal span").appendTo("#separate");
      },function () {
         $("#separate span").appendTo("#oryginal");
      }); 
```

# wordpress - RSS 错误 utf-8 wordpress

> ID：13468629
> 
> 赞同：0
> 
> 时间：2012-11-20T07:42:52.230
> 
> 标签：wordpress, rss

当我尝试打开客户页面的 RSS Feed 时出现以下错误：

“此页面包含以下错误：

第 28 列第 742 行的错误：输入不是正确的 UTF-8，表示编码！字节：0x1B 0x1B 0x3C 0x61 下面是页面的渲染，直到第一个错误。”

我该如何解决这个错误？谢谢！

页面网址是：[WEBSITE LINK](http://vietnam-cooking-experience.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:06:58.740

Wordpress 为您处理。如果您不使用它，请将这些行添加到您的标题中：

```
<head>
  <link rel="alternate" type="application/rss+xml" title="Vietnam Cooking" href="http://vietnam-cooking-experience.com/feed/" />
  <link rel="alternate" type="text/xml" title="RSS .92" href="http://vietnam-cooking-experience.com/feed/rss/" />
  ...
</head> 
```

但是，必须正确生成 RSS 提要。

# python - mysqldb.exeute 中的字符串替换问题

> ID：13468632
> 
> 赞同：0
> 
> 时间：2012-11-20T07:43:12.277
> 
> 标签：python, mysql-python

我有一个小问题。而且我认为我在做一些愚蠢的事情，但无法弄清楚

首先：我想从 python 的 mysql 上触发一个动态构造的 sql。它的简单插入语句，但值可以包含双引号和其他特殊字符。所以，我不知道该怎么做。然后我遇到了这个线程 - [Stackoverflow](https://stackoverflow.com/questions/11642283/python-mysqldb-error-what-is-causing-this)

据此，我尝试了以下代码

```
def fire_statement(stmt, value_tuple=None):

    try:
        if value_tuple == None:
            cur.execute(stmt)
            return True
        else:
            v = tuple(value_tuple)                
            cur.execute(stmt % v)
            return True
    except Exception, ex:
        print ex
        print "Query: '"+stmt+"'"
        return False 
```

我必须在这个函数中传递动态创建的 stmt 和 value_tuple 我没有其他方法，因为列名和值都将取决于外部条件。q还有一条信息是传递的value_tuple原来是一个列表。

这段代码中出现了两种情况，可惜这些方法都不起作用

条件 1：当 value_tuple = ('269', '1', '69', '1096', '1', '3070801', 'BE', '1963', '6') 且 stmt = INSERT INTO XXX ( `NCLASS`, `CRECEIVE`, `SUBCAT`, `GDATE`, `ASSCODE`, `PATENT`, `COUNTRY`, `GYEAR`, `CAT`) 值 (?, ?, ?, ?, ?, ?, ?, ?, ?) 我收到此错误 - 并非所有参数都在字符串格式化期间转换

（显然，对于这种情况，行 - cur.execute(stmt % v) 更改为 cur.execute(stmt , v)）。

条件 2：当 value_tuple = ('269', '1', '69', '1096', '1', '3070801', 'BE', '1963', '6') 并且 stmt = INSERT INTO XXX ( `NCLASS`, `CRECEIVE`, `SUBCAT`, `GDATE`, `ASSCODE`, `PATENT`, `COUNTRY`, `GYEAR`, `CAT`) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s) 它抛出这个错误 - (1054, "Unknown '字段列表'中的列 'BE'") 查询：'INSERT INTO XXX ( `NCLASS`, `CRECEIVE`, `SUBCAT`, `GDATE`, `ASSCODE`, `PATENT`, `COUNTRY`, `GYEAR`, `CAT`) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)'

似乎它根本没有取代。但是如果我在 cur.execute 之前进行打印 (stmt % v)，则结果显示为 - INSERT INTO XXX ( `NCLASS`, `CRECEIVE`, `SUBCAT`, `GDATE`, `ASSCODE`, `PATENT`, `COUNTRY`, `GYEAR`, `CAT`) VALUES (269, 1, 69, 1096, 1, 3070801, BE, 1963, 6)

这显然是不正确的，因为它没有将字符串值括在引号内。我相信这可能会导致错误。为此，我在开发周期中严重停止了几个小时。请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:44:14.223

您想使用传递参数

```
cur.execute(stmt, v) 
```

并不是

```
cur.execute(stmt % v) 
```

如果你有

```
"INSERT INTO tab (col1, col2) VALUES (%s, %s)" 
```

`('val1', 'val2')`并且您使用传递两个字符串`%`，它将变为：

```
"INSERT INTO tab (col1, col2) VALUES (val1, val2)" 
```

这被解释为列名，显然不存在。

如果你这样做

```
cur.execute(stmt, v) 
```

它将被正确解释为

```
"INSERT INTO tab (col1, col2) VALUES ('val1', 'val2')" 
```

你也可以使用

```
print cur.mogrify(stmt, v) 
```

查看格式正确的查询，因为它可以在您的数据库中执行。

# selenium - Selenium webdriver 脚本中的 UnreachableBrowserException

> ID：13468642
> 
> 赞同：0
> 
> 时间：2012-11-20T07:44:17.797
> 
> 标签：selenium, selenium-webdriver, webdriver

```
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_29'
Driver info: driver.version: RemoteWebDriver 
```

这是我尝试运行脚本时显示的错误消息？场景：我的一个java文件有登录功能，第二个有登录后创建一个新帐户请指教。

登录.java：

```
public class LoginPage 
{ 

    public static WebDriver driver;  

    public static final LoginPage login = new LoginPage(new FirefoxDriver()); 

    public LoginPage(WebDriver driver) 
    {    
        LoginPage.driver = driver;  
    } 

    public static void loginAs(String username, String password) 
    {  
        DesiredCapabilities ieCapabilities = DesiredCapabilities.firefox();

        ieCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true); 

        Proxy proxy = new Proxy(); 

        proxy.setProxyAutoconfigUrl("http://www.config.barclays.co.uk:9000/");

        driver.close();

        ieCapabilities. setCapability(CapabilityType.PROXY, proxy); 

        FirefoxDriver driver = new FirefoxDriver(ieCapabilities);

        driver.get("https://login.salesforce.com"); 

        driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS);

        //Login to Salesforce Application
        try
        {
            driver.findElement(By.id("username")).sendKeys(username);

            driver.findElement(By.id("password")).sendKeys(password);   

            driver.findElement(By.id("Login")).click();

            driver.manage().timeouts().implicitlyWait(75, TimeUnit.SECONDS);

        }
        catch(Exception e1)
        {

            System.out.println(e1 +"Your login attempt has failed. The username or password may be incorrect, or your location or login time may be restricted. Please contact the administrator at your company for help.");
        }

    }

    public static void main(String[] args)
    {
        login.loginAs("me@example.com", "Pa$$word"); 
    }
} 
```

我试图单击销售队伍应用程序的机会选项卡的第二个文件：CreatOpportunity.java 这些行在我的主要论点下

```
LoginPage.login.loginAs("username", "password");

LoginPage.login.driver.findElement(By.id("Opportunity_Tab")).click(); 
```

运行我的第二个文件允许我启动我的应用程序，但没有检测到 Opprtunity 选项卡上的点击，并抛出上述错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:41:19.713

只需在登录后输入以下行即可尝试。

```
driver.switchTo.defaultContent(); 
```

试试下面的代码。

```
public class LoginPage {
    public static WebDriver driver;  

    public LoginPage() 
    {    
         DesiredCapabilities ieCapabilities = DesiredCapabilities.firefox();
         ieCapabilities.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true); 
         Proxy proxy = new Proxy(); 
         proxy.setProxyAutoconfigUrl("http://www.config.barclays.co.uk:9000/");
         ieCapabilities. setCapability(CapabilityType.PROXY, proxy); 
         LoginPage.driver = new FirefoxDriver(ieCapabilities); 
         driver.manage().timeouts().implicitlyWait(100, TimeUnit.SECONDS);
    } 

    public static void loginAs(String username, String password) {  

        driver.get("https://login.salesforce.com"); 
        //Login to Salesforce Application
        try
            { 
            driver.findElement(By.id("username")).sendKeys(username);
            driver.findElement(By.id("password")).sendKeys(password);   
            driver.findElement(By.id("Login")).click();
            driver.manage().timeouts().implicitlyWait(75, TimeUnit.SECONDS);
            }
        catch(Exception e1) {

            System.out.println(e1 +"Your login attempt has failed. The username or password may be incorrect, or your location or login time may be restricted. Please contact the administrator at your company for help.");
        }
}

    public static void main(String[] args)
    {
        LoginPage login = new LoginPage(); 
        login.loginAs("me@example.com", "Pa$$word"); 
        FileTwo.clickOpportunity(driver);
    }

} 
```

文件二

```
public class FileTwo
{
 public static void clickOpportunity(WebDriver driver)
 throws Exception
 {
      driver.findElement(By.id("Opportunity_Tab")).click();
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T06:15:04.050

如果您调用 quit() 方法并尝试再次启动浏览器，Selenium 会抛出此错误。解决方法是使用 close() 方法而不是 quit()

# hadoop - map reduce 从 ftp 读取文件

> ID：13468643
> 
> 赞同：0
> 
> 时间：2012-11-20T07:44:19.153
> 
> 标签：hadoop, ftp, parallel-processing, mapreduce, hadoop-streaming

我们有一个从 FTP 服务器下载文件的应用程序。我们计划使用 Map reduce 从 ftp 下载文件来提高其效率。我的第一个问题是，使用 Map reduce 是否真的可以提高效率？我们从逻辑上认为，多个映射器和每个映射器中的读取通道实际上会使并行下载过程更快。但我们不确定是否存在技术障碍。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:33:23.500

如果您希望通过使用 Map Reduce 来提高下载速度，那么这不会有太大帮助。

您可以使用 Map Reduce 执行的操作类似于如果您有 100Gb 的文件并且您想要处理它们并有效地查找特定单词的计数。但即使是 Map Reduce 也无法立即处理 FTP 中可用的文件。为了使 Map Reduce 工作，您需要该文件在 Hadoop 分布式文件系统 (HDFS) 中可用。

要了解什么是 hadoop，什么不是 hadoop，请阅读[这篇](http://hadoop.apache.org/#What+Is+Apache+Hadoop%3F)文章。

# backbone.js - 将模型从本地存储中查看的问题

> ID：13468645
> 
> 赞同：0
> 
> 时间：2012-11-20T07:44:28.980
> 
> 标签：backbone.js, local-storage

在我的应用程序的初始化功能期间，我想默认为我的搜索页面并将我的 LeagueCollection 作为模型传递。

我遇到了一个问题，我可以在我的应用程序初始化中向 this.searchResults 添加手表并按预期查看模型：数组 [3]，但是当调用视图中的 this.model.toJSON() 时，我得到了错误对象没有方法 toJSON。

这段代码在内存集合中运行良好，然后我切换到使用backbone.localstorage.js 在本地存储应用程序数据。

所以我的问题是：为什么视图中没有填充模型？

在我的 main.js 我有

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "": "list",
    ...
    },
    initialize: function () {

        this.searchResults = new LeagueCollection();
        this.searchPage = new SearchPage({
            model: this.searchResults.fetch()
        });
        this.searchPage.render();

    },
    ...
}); 
```

在我的搜索页面视图中

```
window.SearchPage = Backbone.View.extend({

    initialize:function () {
        this.template = _.template(tpl.get('search-page'));
    },

    render:function (eventName) {
        var self = this;

        $(this.el).html(this.template(this.model.toJSON()));
        this.listView = new LeagueListView({el: $('ul', this.el), model: this.model});
        this.listView.render();

        return this;
    },
    ...
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:03:51.353

该方法[`collection.fetch`](http://backbonejs.org/#Collection-fetch)不返回集合——它是异步的。您可能想要的是使用它的`success`回调：

```
this.searchResults = new LeagueCollection();

var self = this;
this.searchResults.fetch({ 
    success: function(collection, response) {
        self.searchPage = new SearchPage( { model: collection } );
        self.searchPage.render();
    } 
}); 
```

# database - 如何从数据库中获取属性对象

> ID：13468650
> 
> 赞同：2
> 
> 时间：2012-11-20T07:44:50.853
> 
> 标签：database, image, object, model, asp.net-mvc-4

我有一些疑问，也许是新手的疑问，但我刚刚进入 ASP.NET MVC 4 基本上我想知道在模型中获取对象细节的正确方法。在这种情况下，承包商内部的图像。

模型：

```
public class Contractor {

    [Key]
    public int ContractorID { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public string Address { get; set; }
    public Image Avatar { get; set; }
    }

public class Image {

    [Key]
    public int ImageID { get; set; }
    [Required]
    public string File_name { get; set; }
    [Required]
    public byte[] File_data { get; set; }

}

public class DATACRUD : DbContext {

    public DbSet<Contractor> Companies { get; set; }
    public DbSet<Image> Images { get; set; }
} 
```

控制器：

```
private DATACRUD db = new DATACRUD();

public ActionResult GetContractorAvatar(int id)
{
        Contractor contractor = db.Contractors.Find(id);

        if (contractor == null)
        {
            return HttpNotFound();
        }

        Image avatar = contractor.Avatar; 
```

* * *

问题 1)

avatar == null，但不应该是因为当我创建对象 Contractor 时，我成功添加了图像（我检查了数据库并且它在那里）

我看到的解决方案不是在 Contractor.cs 模型中使用 Image 属性，而是将字符串属性与 image 键放在一起。

* * *

问题2）

即使可以像我在上一个问题中所说的那样抓住图像密钥，当我在调试模式下将鼠标传递到 private DATACRUD db = new DATACRUD ();

db.Images 也是空的...

* * *

```
 return File(avatar.File_data, "image");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:51:59.243

因为您尚未将`Image`导航属性定义为，所以您必须在加载 a 时`virtual`急切加载：`Image``Contractor`

```
db.Contractors.Include("Avatar").SingleOrDefault(c => c.ContractorID == id); 
```

或者

```
// using System.Data.Entity;
db.Contractors.Include(c => c.Avatar).SingleOrDefault(c => c.ContractorID == id); 
```

# svn - svn 的默认提交消息存储在哪里？

> ID：13468657
> 
> 赞同：6
> 
> 时间：2012-11-20T07:45:36.153
> 
> 标签：svn, commit, freebsd

我刚刚在 FreeBSD 8.2 RELEASE 上升级了 subversion。现在，当我使用 svn commit 提交时，svn-commit.tmp 已经预先填充了这个：

```
公关：             
由...所提交：   
审核人：    
由通过：    
从...获取：  
MFC 之后：      
安全：       
--这一行以及下面的行将被忽略--
> 上面要填写的字段说明：76列--|
> PR：如果 GNATS PR 受到更改的影响。
> 提交者：如果其他人在更改中发送。
> 审核人：如果其他人审核了您的修改。
> 批准人：如果您需要对此提交的批准。
> 获取自：如果更改来自第三方。
> MFC 之后：N [day[s]|week[s]|month[s]]。请求提醒电子邮件。
> 安全性：漏洞参考（每行一个）或描述。
> 上面的空白字段将被自动删除。

```

我试过谷歌在哪里关闭它，但没有运气。我希望 svn-commit.tmp 预填充文本像以前一样，简单地说：

```
--这一行以及下面的行将被忽略--

```

有谁知道 svn 提交的默认提交文本存储在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T16:56:18.417

SVN 的 FreeBSD 版本在可执行文件中包含此文本。删除这些行的唯一方法是自己构建`devel/subversion`端口并关闭该`FREEBSD_TEMPLATE`选项。

# ios - 如何明智地恢复我的项目

> ID：13468662
> 
> 赞同：0
> 
> 时间：2012-11-20T07:46:14.123
> 
> 标签：ios, xcode

所以，它从一个简单的测试开始，我不得不从我的 iPhone (iOS4.3) 中删除我的应用程序，只是为了检查应用程序在第一次运行时的行为。（我正在开发以支持到 iOS4.3）。

删除后，由于某种原因，我无法在 iPhone 上运行该应用程序。会`"Active Scheme"`显示`iOS Device`，虽然我可以从列表中手动选择我自己的设备，但该项目默认情况下不会设置我的设备。XCode 会从顶部删除一条消息：

```
Could not launch “project1” No such file or directory  
(/Users/portal/Library/Developer/Xcode/DerivedData/project1-  
cfjhjgezzcapwoadaivpptyywptu/Build/Products/Debug-iphoneos/project1.app/project 
```

我浏览了这篇[SO 帖子](https://stackoverflow.com/questions/13460875/xcode-wont-set-my-iphone-as-active-scheme)（**编辑**：因此，重新启动 XCode，iPhone 做干净的项目，硬重置我的 iPhone）但这并没有改变任何东西，除了我现在可以删除管理器中的派生数据。

不过，我手头有一个工作备份。事情是它有点过时了，因为我对项目做了很多更改。我可以运行备份的项目，而且看起来很正常。

现在我的问题是如何将文件合并回健全的项目中？XCode 项目本身发生了一些变化，加入了框架以及一些设置。

我试图简单地将更改的文件复制到旧项目中，但我得到的只是第一次运行时的 SIGABRT。我查看了 FileMerge，发现由于某种原因我的 projectAppDelegate.m 在 .xcodeproj 文件的 PBXBuild 部分中不存在。我没有碰。这里似乎一团糟。

如何正确地将新项目合并到旧项目？

# opengl-es - 将 glGenerateMipmap() 与 glCopyTexImage2D() 一起使用

> ID：13468663
> 
> 赞同：0
> 
> 时间：2012-11-20T07:46:15.450
> 
> 标签：opengl-es, opengl-es-2.0, textures, mipmaps

我希望使用 glCopyTexImage2D() 上传具有非零 mipmap 级别的纹理。我正在使用以下代码：

```
// Render Some Geometry

GLint mipmap_level = 1;

glGenTextures(1, &textureId);
glBindTexture(GL_TEXTURE_CUBE_MAP, textureId);

glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);  

glCopyTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X,mipmap_level,GL_RGBA16_SNORM,0,0,128,128,0);
// Five other glCopyTexImage2D() calls to load textures

glGenerateMipmap(GL_TEXTURE_CUBE_MAP);

//Render geometry 
```

在这里，如果我使用 mipmap_level = 1，则根本不会绘制几何图形。mipmap 级别如何与 glCopyTexImage2D() API 结合使用？我想使用 level = 1 加载 64x64 纹理，即第一个采样的 mipmap。在 glCopyTexImage2D() 之前使用 glGenerateMipmap() 调用没有任何意义。那么驱动程序将如何使用 glCopyTexImage2D() 加载非零 mipmap 级别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:02:19.957

您首先为 mipmap 级别 1 设置图像，然后调用`glGenerateMipmap`以从第一个 mipmap 级别（**即 mipmap 级别 0）**的图像自动生成 mipmap 。因此，所有级别 0 之后的 mipmap 图像都会被自动生成的图像覆盖。`glGenerateMipmap`不在乎您如何为 mipmap 级别 0 设置图像，它只是假设您这样做了。另一方面，我没有看到您为级别 0 指定图像，因此它可能只是包含垃圾或被视为不完整，这将使相应纹理的任何使用都失败。

最后，我希望这个问题不仅仅意味着知道在大多数编程语言中，通常从 0 而不是 1 开始计数，OpenGL 也是如此。

**编辑：**正如*datenwolf*在他的评论中指出的那样，您可以更改用于 mipmap 过滤的基本 mipmap 级别，并`glGenerateMipmap`通过执行

```
glTexParamteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_BASE_LEVEL, 1); 
```

但是不要仅仅因为你想从 1 而不是 0 开始计数就这样做。另一方面，如果你有一个适用于 mipmap 级别 0 的有效图像并且想要为级别 1 设置一个并将其用于计算其他级别，然后在调用之前将基本级别更改为 1 `glGenerateMipmap`（可能之后再更改为 0）可能是一个好主意，尽管我无法立即为这种方法提出一个用例。

# php - 重定向到具有焦点文本区域的页面

> ID：13468668
> 
> 赞同：0
> 
> 时间：2012-11-20T07:46:21.533
> 
> 标签：php, html, mysql, css, redirect

在点击事件我重定向到另一个页面。当它登陆该页面时，它应该将文本区域集中在该页面的底部。我正在尝试很长时间。我正在开发 PHP 平台。希望我的问题清楚。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:51:54.877

将 #focus 添加到您的网址末尾（即[http://www.test.com/news/message1#focus](http://www.test.com/news/message1#focus)。然后使用下面的代码

```
<a name="focus"><a>
<textarea id="textarea_1">

</textarea>

<script type="text/javascript">
    if ( document.location.hash == '#focus' )
        document.getElementById('textarea_1').focus();
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:48:12.560

给 textarea 一个`autofocus`属性，或者添加在页面加载时触发焦点事件的 javascript。

```
var textarea = document.getElementsByTagName("textarea")[0];
textarea.focus(); 
```

# java - 从 Spring MVC 控制器访问服务层

> ID：13468672
> 
> 赞同：0
> 
> 时间：2012-11-20T07:46:36.760
> 
> 标签：java, spring, spring-mvc, dependency-injection

在 Spring MVC 中从 Controller 访问服务层的最佳方法是什么？我正在为 SpringMVC 使用注释。

早些时候，我每次都通过在控制器的每个方法中调用 ClassPathXMLApplicationContext(spring-bean-name.xml) 从 bean 工厂获取 bean。

从解决方案到问题[从 Spring MVC 中的自定义控制器访问服务层，](https://stackoverflow.com/questions/11034545/accessing-service-layer-from-custom-controller-in-spring-mvc)我知道服务 bean 必须是自动装配的。

但是，假设一个控制器访问多个服务，我们是否必须注入多个 bean？但这不是一个好的做法，因为我们只能在控制器中的 1-2 种方法中使用特定服务，并且将其设为类变量而不是函数变量并不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:20:56.480

你是对的，你需要自动装配你打算使用的服务。不用担心类变量与本地（函数）变量，这就是 DI 模式的实现方式。

在最严格的 OO 设计意义上，您有一点不应该在类级别上声明变量，除非它们涉及描述对象的状态。然而，DI（依赖注入）是一种非常成熟的模式，无论有多少方法实际使用该服务，开发人员都不会反对将服务 bean 作为自动装配的类成员。

附带说明一下，`new ClassPathXMLApplicationContext("spring-bean-name.xml")`在每种方法中都做绝对是 100%**错误**的方法。**这涉及每次执行该方法时**创建一个新的 bean-factory 和 bean-context ，这是一个很大的开销并且完全没有必要。bean-factory 应该创建**一次**（如果您在 servlet 引擎环境中，使用 DispatcherServlet 或 ContextLoaderListener）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:31:55.137

您可以拥有一个实例化 bean 工厂的静态类，然后使用该静态类的自定义静态 getBean 方法

```
static class SpringConfig()
{
    private static ApplicationContext ctx = null;
    static
    {
        ctx=new ClassPathXmlApplicationContext("context.xml");
    }

    public static Object getBean(String beanName)
    {
        return ctx.getBean(beanName);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T19:59:10.923

这就是为什么您必须尝试将所有使用相同依赖项的方法保持在一起，这是低耦合的。不好的做法是不将您的依赖项作为全局变量注入。不好的做法是不要对方法进行分组以减少类耦合。

# c# - 如何向 Request.Form 集合添加值

> ID：13468677
> 
> 赞同：2
> 
> 时间：2012-11-20T07:46:52.633
> 
> 标签：c#, asp.net-mvc, reflection, httprequest, formcollection

我需要向 Request.Form 集合添加值，但我不明白如何`HttpRequest`使用指定的表单值初始化实例。我试图覆盖`Initialize`控制器中的方法并像这样初始化`HttpRequest`：

```
protected override void Initialize(System.Web.Routing.RequestContext requestContext)
{
   var requestField = typeof (HttpRequestWrapper).GetField("_httpRequest", BindingFlags.NonPublic |
                                                                               BindingFlags.Instance);
   var responseField = typeof(HttpResponseWrapper).GetField("_httpResponse", BindingFlags.NonPublic | BindingFlags.Instance);

   var req = (HttpRequest) requestField.GetValue(requestContext.HttpContext.Request);
   var res = (HttpResponse)responseField.GetValue(requestContext.HttpContext.Response);
//**************** HERE I TRY TO INITIZLIZE FORM COLLECTION WITH MY VALUE 'additional_form_value' but nothing  
   var newReq = new HttpRequest(null, req.Url.ToString(), "?additional_form_value=test");
   newReq.RequestType = "POST";
//***************

   var r = new RequestContext(new HttpContextWrapper(new HttpContext(newReq, res)), requestContext.RouteData);

   base.Initialize(r);
} 
```

有什么方法可以将新项目添加到`Request.Form`Collection 中吗？

编辑：

当我尝试这种方法时，我遇到了一个异常（对象引用未设置为对象的实例。）：

```
NameValueCollection oQuery = requestContext.HttpContext.Request.QueryString;
oQuery = (NameValueCollection)requestContext.HttpContext.Request.GetType().GetField("_form", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(requestContext.HttpContext.Request); //exception here
PropertyInfo oReadable = oQuery.GetType().GetProperty("IsReadOnly", BindingFlags.NonPublic | BindingFlags.Instance);
oReadable.SetValue(oQuery, false, null);
oQuery["foo"] = "bar";
oReadable.SetValue(oQuery, true, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:36:44.500

在将数据添加到帖子之前建立您的数据。

您需要将数据添加到请求的流中，这样应该可以：

```
using(HttpWebRequest myHttpRequest = (HttpWebRequest)WebRequest.Create(myUrl)
{
   byte[] bytes = Encoding.UTF8.GetBytes(myFormData);
   Stream requestStream = null;
   try
   {
      myHttpRequest.ContentLength = bytes.Length;
      requestStream = myHttpRequest.GetRequestStream();
      requestStream.Write(bytes, 0, bytes.Length);
   }
} 
```

您可能需要更改编码类型，但希望这可以帮助您，除非我完全弄错了您的问题。

# node.js - 我可以将当 前的 nconf 配置转储到一个对象吗？

> ID：13468683
> 
> 赞同：14
> 
> 时间：2012-11-20T07:47:17.600
> 
> 标签：node.js, flatiron.js

是否有任何方法`nconf`可以将所有商店中的所有密钥收集到一个对象中？

想象一下我有这个小脚本：

```
assert = require('assert');
nconf = require('nconf');

nconf.argv().env().defaults({'C': 3});
assert.equal(nconf.get('A'), 1);
assert.equal(nconf.get('B'), 2);
assert.equal(nconf.get('C'), 3);
assert.deepEqual({'A':1, 'B':2, 'C':3}, nconf.X); // <-- What's X? 
```

我和我一起跑

```
A=1 node script.js -B 2 
```

有没有`nconf.X`能通过测试的？我什至会满足于列出所有配置的键。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T02:23:52.173

是的，要获取对象，您可以执行以下操作；

```
nconf.get(); 
```

它将无法通过测试，因为 argv 将使用 exec 字符串，而 env 将有更多变量。

您可以使用以下命令将 env 调用列入白名单

```
nconf.env({whitelist: 'A'}); 
```

此外，默认值会在结果输出中添加一个值为 'literal' 的 'type'。

对于通过的测试，您可以使用它；

```
var assert = require('assert'),
nconf = require('nconf');

nconf.argv().env({whitelist: ['A']}).defaults({'C': 3});
assert.equal(nconf.get('A'), 1);
assert.equal(nconf.get('B'), 2);
assert.equal(nconf.get('C'), 3);

var object = nconf.get();

delete object.type;
delete object['$0'];
delete object['_'];

assert.deepEqual({'A':1, 'B':2, 'C':3}, object); 
```

# hive - WSO2 bam - 许多打开的游标运行 Hive 脚本

> ID：13468684
> 
> 赞同：1
> 
> 时间：2012-11-20T07:47:24.503
> 
> 标签：hive, wso2, wso2bam

我已经运行 wso2 bam 2.0.1 一段时间了，没有任何问题，但最近几天我看到错误：java.sql.SQLException: ORA-01000: maximum open cursors exceeded running the same script。

目前，Cassandra 中有大约 140000 行。Oracle 数据库将 max_open_cursors 设置为 3000。

我正在使用默认配置运行，但正在使用类似于 Service_Statistics_Monitoring 工具箱的 Hive 脚本更新某些 Oracle 表中的相关数据。

有什么方法可以控制使用多少个游标，还是有其他方法可以控制它？

来自日志的错误 ->

```
TID: [0] [BAM] [2012-11-19 16:38:28,247] ERROR {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBOperation} -  Failed to write data to database {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBOperation}java.sql.SQLException: ORA-01000: maximum open cursors exceeded

    at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:331)
    at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:288)
    at oracle.jdbc.driver.T4C8Oall.receive(T4C8Oall.java:743)
    at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:216)
    at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:955)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1168)
    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3285)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3368)
    at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBOperation.updateData(DBOperation.java:115)
    at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBOperation.writeToDB(DBOperation.java:60)
    at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordWriter.write(DBRecordWriter.java:35)
    at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:589)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.forward(GroupByOperator.java:959)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.processAggr(GroupByOperator.java:798)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:724)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:247)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:518)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:419)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:256)
TID: [0] [BAM] [2012-11-19 16:38:28,259] FATAL {ExecReducer} -  org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row (tag=0) {"key":{"_col0":"rds-program-nownext","_col1":2012,"_col2":11,"_col3":6,"_col4":2,"_col5":"2012-11-06 02"},"value":{"_col0":18,"_col1":{"count":18,"sum":21541.0},"_col2":1184,"_col3":1205,"_col4":21541},"alias":0}
    at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:256)
    at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:518)
    at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:419)
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:256)
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.NullPointerException
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:737)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.ExecReducer.reduce(ExecReducer.java:247)
Caused by: java.lang.NullPointerException
    at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBOperation.writeToDB(DBOperation.java:80)
    at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordWriter.write(DBRecordWriter.java:35)
    at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:589)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:84)
    at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:471)
    at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:762)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.forward(GroupByOperator.java:959)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.processAggr(GroupByOperator.java:798)
    at org.apache.hadoop.hive.ql.exec.GroupByOperator.processOp(GroupByOperator.java:724)
    ... 5 more
 {ExecReducer} e(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:599)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:536)
    at org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.include(RequestDispatcherAdaptor.java:37)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor$RequestDispatcherAdaptor.include(ContextPathServletAdaptor.java:265)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:966)
    at org.apache.jasper.runtime.PageContextImpl.doInclude(PageContextImpl.java:643)
    at org.apache.jasper.runtime.PageContextImpl.include(PageContextImpl.java:637)
    at sun.reflect.GeneratedMethodAccessor43.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tiles.jsp.context.JspUtil.doInclude(JspUtil.java:87)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.include(JspTilesRequestContext.java:88)
    at org.apache.tiles.jsp.context.JspTilesRequestContext.dispatch(JspTilesRequestContext.java:82)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:465)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:140)
    at org.apache.tiles.jsp.taglib.InsertAttributeTag.render(InsertAttributeTag.java:117)
    at org.apache.tiles.jsp.taglib.RenderTagSupport.execute(RenderTagSupport.java:171)
    at org.apache.tiles.jsp.taglib.RoleSecurityTagSupport.doEndTag(RoleSecurityTagSupport.java:75)
    at org.apache.tiles.jsp.taglib.ContainerTagSupport.doEndTag(ContainerTagSupport.java:80)
    at org.apache.jsp.admin.layout.template_jsp._jspx_meth_tiles_insertAttribute_7(template_jsp.java:539)
    at org.apache.jsp.admin.layout.template_jsp._jspService(template_jsp.java:290)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:332)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:314)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:264)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.ui.JspServlet.service(JspServlet.java:161)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:690)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:477)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.eclipse.equinox.http.servlet.internal.RequestDispatcherAdaptor.forward(RequestDispatcherAdaptor.java:30)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor$RequestDispatcherAdaptor.forward(ContextPathServletAdaptor.java:258)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.forward(ServletTilesRequestContext.java:198)
    at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:185)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:419)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:370)
    at org.wso2.carbon.ui.action.ActionHelper.render(ActionHelper.java:52)
    at org.wso2.carbon.ui.TilesJspServlet.service(TilesJspServlet.java:101)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.eclipse.equinox.http.helper.ContextPathServletAdaptor.service(ContextPathServletAdaptor.java:36)
    at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
    at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.wso2.carbon.tomcat.ext.servlet.DelegationServlet.service(DelegationServlet.java:68)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.wso2.carbon.tomcat.ext.filter.CharacterSetFilter.doFilter(CharacterSetFilter.java:61)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.wso2.carbon.tomcat.ext.valves.CompositeValve.invoke(CompositeValve.java:172)
    at org.wso2.carbon.tomcat.ext.valves.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:156)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.wso2.carbon.tomcat.ext.valves.CarbonContextCreatorValve.invoke(CarbonContextCreatorValve.java:52)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1653)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:02:36.480

感谢您报告问题。我们已经为 BAM 2.0.2[1] 修复了它，所以这个修复将在下一个 BAM 版本中可用。

[1] [https://wso2.org/jira/browse/BAM-993](https://wso2.org/jira/browse/BAM-993)

谢谢，卡松。

# javascript - 使用 jquery 过滤带有选择框选项值的 json

> ID：13468686
> 
> 赞同：1
> 
> 时间：2012-11-20T07:47:29.520
> 
> 标签：javascript, jquery, html

如何根据年份过滤“Make”值。例如：当我选择“年份”作为“2012”时，相关数据即；只有“def”应该显示在下拉框中。另一个问题是当我选择下一个值时，表中的先前数据再次显示。请参阅演示以获得更好的理解。

我试过这个。

```
$.each(g_Vehicle, function(index) {
 var sMake = g_Vehicle[index].Make;
  if($('#DropDown_Year').val())=='2011'){  /* for testing purpose i give year as 2011*/
   if ($.inArray(sMake, g_MakesArray) == -1) {
    g_MakesArray.push(sMake);
        } 
 }
}); 
```

[演示](http://jsfiddle.net/NFXzn/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:37:12.577

要过滤集合/数组，请使用 $.grep，要了解更多信息，请查看[jqfaq.com](http://jqfaq.com/how-to-filter-json-data-using-jquery/)文章，这将对此进行更多解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:56:16.247

```
function filter() {
    switch($(this).text()) {
    case "2012":
        //filter logic
        $("#dropdown2").html("<select>....</select><select>...</select>");
        break;
    ....
    }
}

$("#dropdown").change(filter); 
```

您可以在开始时将第二个下拉框设为空，并在有人选择年份后用适当的选择填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T12:53:35.583

我会为此使用[grep](http://docs.jquery.com/Utilities/jQuery.grep#arraycallbackinvert)

例如

```
var newArray = jQuery.grep(g_Vehicle , function(element, index){
  return element.Make == "abc" ; 
}); 
```

# django - mongoengine +django 如何统计相同内容的项数

> ID：13468687
> 
> 赞同：0
> 
> 时间：2012-11-20T07:47:33.390
> 
> 标签：django, mongodb, mongoengine

我想计算一个字段中所有不同值的数量。在mongoengine中没有“annotate（）”可以使用，那么我怎么能计算数字并按数字排序

我想解决这个问题的唯一方法是使用“distinct()”找出不同的值，然后使用“count()”计算每个值，这是实现我想要的结果的愚蠢方法

你还有其他方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T09:40:32.010

MongoEngine 有一些地图减少助手应该可以满足您的需求。Queryset 方法`item_frequencies`[1] 将满足您的需求。新的聚合框架没有任何特殊支持，但将来可能会添加支持。

示例用法：

```
BlogPost.objects.item_frequencies('tags') 
```

[1] [http://docs.mongoengine.org/en/latest/apireference.html?highlight=item_frequencies#mongoengine.queryset.QuerySet.item_frequencies](http://docs.mongoengine.org/en/latest/apireference.html?highlight=item_frequencies#mongoengine.queryset.QuerySet.item_frequencies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T20:08:33.747

MongoEngine 本身并没有特殊的方法来实现这一点，但是 MongoDB 2.2 聚合框架允许您对文档进行计数，按字段分组。我建议直接使用 PyMongo 的聚合方法和聚合管道来执行此查询：

[http://api.mongodb.org/python/current/examples/aggregation.html](http://api.mongodb.org/python/current/examples/aggregation.html)

# select - 如何从许多表中加入 IN SELECT 和 LIKE？

> ID：13468692
> 
> 赞同：4
> 
> 时间：2012-11-20T07:47:58.597
> 
> 标签：select, sql-like

我正在尝试创建一个查询来搜索所有具有类似属性的记录，如下所示：

```
select * from table_A 
where fullname like in (select firstname from employees where X) 
```

唯一的问题是这只是我的伪代码，我实际上是在对许多表进行排序，所以我目前的真实查询看起来像：

```
select * from devices 
where devicename like in (select X from X1 where T in (select T from T1 where Y in     (select Y from Y1 where Z in (select Z from Z1 where AreaName = '74'; 
```

我正在尝试使用 join 命令，但对如何将其应用于这种情况感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:56:44.700

干得好 ....

```
SELECT D.* 
from Devices D
    inner join X1 X on D.devicename like X.X 
    inner join  T1 T on T.T = X.T
    inner join Y1 Y on Y.Y = T.Y
    inner join Z1 Z on Y.Z = Z1.Z AND Z.Areaname = '74'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:38:21.073

尝试：

```
SELECT d.*
  FROM devices d
 INNER JOIN X1 ON d.devicename like '%'||x1.X||'%'
 INNER JOIN T1 ON x1.T = T1.T
 INNER JOIN Y1 ON T1.Y = Y1.Y
 INNER JOIN Z1 ON Y1.Z = Z1.Z
 WHERE Z1.AreaName = '74' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:59:42.727

“join”命令运行两个表的叉积，然后只选择公共列名具有相同值的元组/行。

因此，对于您的查询：

```
select * from table_A
where fullname like in (select firstname from employees where X) 
```

将会：

```
select * from table_A
left join employees
on table_A.fullname = employees.firstname
where X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:55:48.953

好的，我用 Join 语法给你第二个查询（好吧，我尝试）：

```
select * from  Z1 Z1_1 
    JOIN Y1 Y_1 ON Y_1.Z=Z1_1.Z 
    JOIN T1 ON T1.Y=Y_1.Y 
    JOIN X1 X1_2 ON X1_2.T=T1.T 
    JOIN devices  d ON d.devicename=X1_2.X
    where Z1_1.AreaName = '74'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T07:56:02.627

尝试这个：

```
SELECT d.*
FROM devices d
INNER JOIN X1 ON d.`like` = x1.X
INNER JOIN T1 ON x1.T = T1.T
INNER JOIN Y1 ON T1.Y = Y1.Y
INNER JOIN Z1 ON Y1.Z = Z1.Z
WHERE Z1.AreaName = '74' 
```

# header - php 使用 "Content-Disposition:attachment; 和 Content-type:application/octet 流，给出 "/n"

> ID：13468697
> 
> 赞同：1
> 
> 时间：2012-11-20T07:48:14.353
> 
> 标签：header

> $file_name="test.key"; $key="1111111";
> header("内容配置：附件；文件名=$file_name");
> header("内容类型：应用程序/八位字节流"); 回声修剪（$key）；

上面列出的是我的一段代码，但是当它被调用时，在打开文档时，我必须在“11111111”之前换行。

我可以知道，如何避免换行符，这是一个问题还是我使用了错误的标题，

这里的场景是我将从数据库中获取密钥并将该密钥作为下载选项提供。

提前致谢

# vim - 复制时如何保留我的缓冲区，然后用 Vim 剪切然后粘贴一个单词？

> ID：13468699
> 
> 赞同：0
> 
> 时间：2012-11-20T07:48:30.393
> 
> 标签：vim

我在使用 Vim 时遇到了一个简单的问题：我想复制一个单词，然后剪切另一个单词以将第一个单词粘贴到第二个位置

例如 ：

```
Platea, integer nisi velit! 
```

我想将其转换为：

```
Platea, integer nisi integer! 
```

我怎样才能使它成为最简单的方法？如果我复制整数`y`然后用 velit 剪切，`d`我不能再复制第一个单词，缓冲区包含 velit ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:59:07.260

您可以按照以下步骤操作：

*   扬克`integer`( `yiw`)
*   视觉选择`velit`( `viw`)
*   粘贴 ( `p`)

* * *

也试试`YangRing.vim`插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:56:22.360

您可以尝试`yank`进入寄存器。例如，将光标放在 上`integer`：

```
"xyiw 
```

它将拉`integer`入`x`寄存器（任意字母），然后删除后`velit`，您可以使用`"xp`. 您也可以将它与多个寄存器一起使用，因此如果您需要使用不同组合的相同单词进行各种复制/粘贴，它可能会很有用。我相信 Vim 大师会提供一种更优雅的方式，但如果你需要一些东西来帮助你渡过难关，那应该可以工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T08:28:58.983

那是“寄存器”，而不是“缓冲区”，`:help registers`.

这是我有一段`~/.vimrc`时间的映射：

```
vnoremap <leader>p "_dP 
```

它将选定的文本删除到“黑洞”寄存器中，并将未命名寄存器的内容放入。简单的。

另一种选择是使用寄存器零：`"0p`.

# php - 贝宝形式的php脚本

> ID：13468704
> 
> 赞同：0
> 
> 时间：2012-11-20T07:48:53.533
> 
> 标签：php, paypal, payment

我正在以 Paypal 形式编写一个 php 脚本。我正在使用 $testUrl 变量发送返回 url，该变量将在成功付款后起作用，但不会重定向到该 url。

```
 <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
   <select name="amount">
      <option value="10">10 SEK</option>
      <option value="20">20 SEK</option>
      <option value="30">30 SEK</option>
   </select>
    <?php $testUrl= "http://www.google.com"; ?> 
     <input type="hidden" name="cmd" value="_s-xclick" />
     <input type="hidden" name="hosted_button_id" value="3FWC3TJEYANK4" />
     <input type="image"  src="https://www.sandbox.paypal.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
     <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
     <input type="hidden" name="notify_url" value="http://beeurban.ayond.com/wp-content/payment/ipn.php" />
     <input type="hidden" name="currency_code" value="SEK" />
     <input type="hidden" name="return" value="<?php echo $testUrl ; ?>" />  
   </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:55:27.277

需要在您的贝宝帐户中激活自动退货选项。

请参见此处：[设置 PayPal 退货 URL 并使其自动退货？](https://stackoverflow.com/questions/7642895/setting-paypal-return-url-and-making-it-auto-return)

请看下面@andrew 的回答：[https ://stackoverflow.com/a/13468873/1722914](https://stackoverflow.com/a/13468873/1722914)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:03:09.233

您的问题是您使用的是托管按钮。当您使用托管按钮时，您不能像这样向按钮代码添加其他字段。一切都必须在您的 PayPal 帐户的按钮管理器中进行配置。从我所看到的情况来看，您的 notify_url 可能也不起作用，因为这也必须在按钮管理器中进行设置……除非您在即时付款通知首选项下的个人资料中设置了相同的通知 URL。然后这将生效，但你在这里传递的内容将被忽略。

在按钮管理器的第 3 步 - 自定义高级功能中，有一个“在客户完成结帐时将其带到此 URL”选项，您需要启用该选项并在此处填写您的返回 URL。您还将在“高级变量”下看到您可以在那里添加 notify_url。

不幸的是，您不能像尝试对返回 URL 的 PHP 变量那样使用动态值。如果返回 URL 可以根据顺序更改，则您需要使用非托管按钮。

为此，在第 2 步 - 跟踪库存、利润和损失中，您需要取消选中 PayPal 框上的保存按钮。这将为您提供包含更多字段的不同 HTML 代码，然后您可以为 return、notify_url 等添加自己的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:08:12.067

[http://jream.com/public/lab/paypal_ipn.class.php](http://jream.com/public/lab/paypal_ipn.class.php) 这可能有助于指导您

# ios - NSManagedObjectContext 的 performBlock 中的 dispatch_async

> ID：13468705
> 
> 赞同：3
> 
> 时间：2012-11-20T07:49:02.400
> 
> 标签：ios, core-data, grand-central-dispatch

根据 WWDC 2012 视频，“Core Data Best Practices”，`dispatch_sync`应该用于在上下文中运行某种回调`performBlock`，它被创建为`NSPrivateQueueConcurrencyType`.

这是为什么？

我可以使用`dispatch_async(dispatch_get_main_queue(), 0)`... 在私有队列的上下文中调用一些与 UI 相关的回调`performBlock`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:53:49.287

不。 `NSPrivateQueueConcurrencyType`管理它自己的内部队列，并且不喜欢你试图让其中一个线程去做你想做的事情（事实上，我相信当这种行为发生时它会抛出异常）。有几种方法可以处理这个问题，当然信号量是更可接受的设计模式以获得真正的“异步感觉”，但正如您所注意到的，`dispatch_sync`通常是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T05:11:41.770

谷歌把我带到了这里，所以如果有人像我一样对这些东西不熟悉，并且会从代码示例中受益，这里有一个：

```
__block dispatch_queue_t currentQ =  dispatch_get_current_queue();

[managedObjectContext performBlock:^{

    //do the stuff you need to do in a background thread

    dispatch_sync(currentQ, ^(){

        //callback code for once the background stuff is complete

    });
}]; 
```

# android - Android - 使用应该从底部抬起的画布绘制一个矩形

> ID：13468706
> 
> 赞同：1
> 
> 时间：2012-11-20T07:49:04.213
> 
> 标签：android, animation, android-canvas, drawrect

我想画一个应该从底部加注的堆栈。例如，堆栈高度是 400，从高度 10 开始它应该增长到 400。

我想使用油漆和画布来做到这一点。

我不想用图像视图/位图和缩放动画来做。

可以用画布和油漆做到这一点吗？如果是这样如何实现呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:17:40.550

您可以尝试使用这样的东西（自己没有测试过）：

```
Paint paint = new Paint();
paint.setColor(Color.BLACK);
for(int i = 10; i < 400; i = i + 10)
{
    try 
    {
        // To slow the for loop down, can change 100 accordingly or remove altogther
        Thread.sleep(100);
    } 
    catch (InterruptedException e) 
    {
        e.printStackTrace();
    } 
    canvas.drawRect(0, i, 10, 0, paint); // this will make 10 x 10 square starting from bottom
    invalidate();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T09:44:53.447

无论你用画布做什么，即使你尝试循环或无效，睡觉，毕竟它在一次拉伸中绘制形状。我通过以下方式找到了结果。可能对其他人有帮助，因此在此处添加代码。

```
import android.os.Bundle;
import android.os.CountDownTimer;
import android.app.Activity;
import android.graphics.Color;
import android.util.Log;
import android.view.Menu;

public class AndroidDraw extends Activity {

private DrawView drawView;
private int height = 300;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_android_draw);

    CountDownTimer timer = new CountDownTimer(2000, 50) {

        @Override
        public void onTick(long millisUntilFinished) {

            height = height - 10;
            drawView = new DrawView(AndroidDraw.this, height);
            drawView.setBackgroundColor(Color.WHITE);
            setContentView(drawView);
        }

        @Override
        public void onFinish() {

        }
    };
    timer.start();
}

}

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.view.View;

public class DrawView extends View {
Paint paint = new Paint();
private int height;

public DrawView(Context context, int height) {
    super(context); 
    this.height = height;
}

@Override
public void onDraw(Canvas canvas) {
paint.setColor(Color.RED);
    canvas.drawRect(30, height, 60, 300, paint );

}
} 
```

# android - 在 Android 中打开 PDF

> ID：13468710
> 
> 赞同：0
> 
> 时间：2012-11-20T07:49:21.027
> 
> 标签：android, pdf

我想从我的 android 应用程序中打开一个 PDF 文件。我已经在互联网上搜索了如何做到这一点，看起来很容易，但它不起作用，至少在我的手机（Sony XPeria P）中是这样。

```
File file = ....

Intent intent = new Intent(Intent.ACTION_VIEW, 
                  Uri.fromFile (file));             
intent.setType("application/pdf");                  
startActivity(intent); 
```

执行此代码时，会打开一个窗口，要求选择一个应用程序来显示 PDF。当我选择 Adob​​e Reader 时，它打开时没有显示任何文档。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:15:44.600

试试这个，它对我有用

//在PDF Viewer中打开pdf文件的方法

```
public void OpenPDFFile() {
    File pdfFile = new File(Environment.getExternalStorageDirectory(),"PdfFile.pdf");//File path
    if (pdfFile.exists()) //Checking for the file is exist or not
    {
        Uri path = Uri.fromFile(pdfFile);
        Intent objIntent = new Intent(Intent.ACTION_VIEW);
        objIntent.setDataAndType(path, "application/pdf");
        objIntent.setFlags(Intent. FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(objIntent);//Staring the pdf viewer
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:27:17.397

setType("application/pdf") 函数删除所有以前的数据。

# iphone - 如何从中间消费字符串并在 UILabel 中显示

> ID：13468711
> 
> 赞同：1
> 
> 时间：2012-11-20T07:49:33.697
> 
> 标签：iphone, objective-c, uitableview, uilabel

我有一个字符串“WAKEFIELD - TRINITYIGINY - (3.15 英里)”，需要在 UILabel 中这样显示。这意味着 char 是从中间消耗的。

![在此处输入图像描述](../Images/ad186a872013a5111f2deee740b0bd0d.png)

请注意，它应该是动态的，需要显示到 UITableViewCell 中。字符串长度不固定。很明显，它只是字符串。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T07:57:09.090

UILabel 具有截断属性（lineBreakMode） [http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)

如果将其设置为`NSLineBreakByTruncatingMiddle`它将在中间截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:54:04.737

您还可以使用原始字符串中的组件`[myString componentsSeparatedByString:@" - "]`，然后得到一个数组。然后，在单元格中创建三个具有不同字体的 UILabel 并设置`lineBreakMode`为第二个。如果你想用cellWidth创建这三个标签，你可能会创建你的cellWidth，你把你的第一个标签放在单元格的左边，第三个放在右边，中间可能还有一些地方。这是您的第二个标签的位置。您可以计算第一个和第三个标签的大小：

```
 CGSize labelSize = [label.text sizeWithFont:label.font constrainedToSize:maxPossibleSizeOfTheLabel]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-20T21:34:24.990

使用[`lineBreakMode`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/index.html#//apple_ref/occ/instp/UILabel/lineBreakMode)UILabel 的属性：

```
UILabel *label = ...
label.lineBreakMode = NSLineBreakByTruncatingMiddle; 
```

# delphi - LARGE_INTEGER 还是 TLargeInteger？

> ID：13468718
> 
> 赞同：6
> 
> 时间：2012-11-20T07:49:58.670
> 
> 标签：delphi

中`Windows.pas`，有：

```
 LARGE_INTEGER = record
    case Integer of
    0: (
      LowPart: DWORD;
      HighPart: Longint);
    1: (
      QuadPart: LONGLONG);
  end;

  TLargeInteger = Int64; 
```

我看到几个 Windows 函数和结构成员，它们最初声明为`LARGE_INTEGER`已翻译`TLargeInteger`为：

```
 function QueryPerformanceCounter(var lpPerformanceCount: TLargeInteger): BOOL;
      stdcall; 
```

另一个例子是：

```
 WIN32_STREAM_ID = record
    dwStreamId        : DWORD;
    dwStreamAttributes: DWORD;
    Size              : TLargeInteger;
    dwStreamNameSize  : DWORD;
    cStreamName       : array[0..0] of WCHAR;
  end; 
```

可以`TLargeInteger`替代`LARGE_INTEGER`Windows 头文件中的每个函数参数和结构成员吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T08:17:42.480

您始终可以在 API 翻译中安全地互换使用这两种类型。尽管很明显，一旦您为特定函数选择了一种类型，则无论何时调用该函数都必须坚持使用该类型。

*   使用`TLargeInteger`使得赋值更容易，因为不需要引用记录字段。
*   使用`LARGE_INTEGER`可以更容易地分成低和高 32 位部分。

既然编译器对 64 位整数有很好的支持，使用`TLargeInteger`. 因为，通常不需要将 64 位整数分成低位和高位部分。但是当编译器无法处理 64 位整数类型时，没有其他选项可以处理 64 位整数。

# java - 为什么第一个 if case 打印 Equal 和 Second Not Equal？

> ID：13468720
> 
> 赞同：1
> 
> 时间：2012-11-20T07:50:40.033
> 
> 标签：java

> **可能的重复：**
> [奇怪的 Java 拳击](https://stackoverflow.com/questions/3130311/weird-java-boxing)

```
public class example {
    public static void main(String[] args) {

        Integer a=127,b=127;
        if(a==b)
            System.out.println("Equal");
        else
            System.out.println("Not Equal");
        Integer c=128,d=128;
        if(c==d)
            System.out.println("Equal");
        else
            System.out.println("Not Equal");
    }

} 
```

输出：

```
Equal
Not Equal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T07:53:54.427

基本上 -127 和 127 之间的整数以这样的方式“缓存”，当你使用这些数字时，你总是在内存中引用相同的数字，这就是你的 == 起作用的原因。

该范围之外的任何整数都不会被缓存，因此引用是不一样的。

因此，当您尝试将 127 与 127 进行比较时，只制作了一个对象并且它工作正常，但是当您尝试使用 128 时，它超出了范围并创建了两个对象，因此您无法使用 == 运算符比较它们。

为此，请使用**.equals()**（比较对象参考） 方法。有关详细信息，请参阅[此。](http://www.velocityreviews.com/forums/t735367-re-integer-128-integer-128-a.html)

```
Integer c=128,d=128;
if(c.equals(d))
        System.out.println("Equal");
    else
        System.out.println("Not Equal"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:58:48.807

来自 Integer.java 的源代码

```
private static class IntegerCache {

private IntegerCache(){}

static final Integer cache[] = new Integer[-(-128) + 127 + 1];

static {
    for(int i = 0; i < cache.length; i++)
    cache[i] = new Integer(i - 128);
}
}

/**
 * Returns a <tt>Integer</tt> instance representing the specified
 * <tt>int</tt> value.
 * If a new <tt>Integer</tt> instance is not required, this method
 * should generally be used in preference to the constructor
 * {@link #Integer(int)}, as this method is likely to yield
 * significantly better space and time performance by caching
 * frequently requested values.
 *
 * @param  i an <code>int</code> value.
 * @return a <tt>Integer</tt> instance representing <tt>i</tt>.
 * @since  1.5
 */
public static Integer valueOf(int i) {
final int offset = 128;
if (i >= -128 && i <= 127) { // must cache 
    return IntegerCache.cache[i + offset];
}
    return new Integer(i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T07:54:58.563

发生这种情况是因为`Integer`[-128, 127] 范围内的数字存储在堆中。因此，当您比较对象引用而不是对象值并且两者都`Integer a = 127`指向`Integer b = 127`堆中的同一个对象时，您的表达式被评估为`true`.

当`Integer`值超出该范围时，您将获得两个不同的对象，因此引用比较返回`false`

# javascript - javascript google maps Geocoder 调用函数在被调用函数之前结束

> ID：13468724
> 
> 赞同：2
> 
> 时间：2012-11-20T07:50:55.860
> 
> 标签：javascript, google-maps, geocode

我在 javascript 上使用地理编码器。我有一个名为 codeAddress 的函数，它接受地址并正确给出坐标。但是，当我在另一个函数中调用此函数时，我无法获得正确的结果，因为调用者函数在 codeAddress 函数之前结束。这是我的代码：

```
 var geocoder = new google.maps.Geocoder();
    var lokasyon ={ id:0,lat:0,lng:0 };
    var lokasyonlar=[];
    function codeAddress(adres, id) {
        geocoder.geocode({ 'address': adres }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                lokasyon.id = id;
                lokasyon.lat = results[0].geometry.location.lat();
                lokasyon.lng = results[0].geometry.location.lng();
                lokasyonlar.push(lokasyon);
                alert("codeAddress");
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }
        });
    }
    function trial2() {
        codeAddress("1.ADA SOKAK, ADALET, OSMANGAZİ, Bursa", 12);
        alert("trial2");
    }
    window.onload = trial2; 
```

当我运行此代码时，首先显示“trial2”，然后显示“codeAddress”。这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:05:46.153

因为 geocoder.geocode() 方法要求谷歌服务器，它需要几秒钟。这意味着 geocode() 方法是异步的，并且 alert("trial2") 比回调更快。

如果你想在回调后执行代码'alert("trial2")'，你需要改成这样：

```
function codeAddress(adres, id, callback) {
    geocoder.geocode({ 'address': adres }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            lokasyon.id = id;
            lokasyon.lat = results[0].geometry.location.lat();
            lokasyon.lng = results[0].geometry.location.lng();
            lokasyonlar.push(lokasyon);
            alert("codeAddress");
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
        callback();
    });
}
function trial2() {
    codeAddress("1.ADA SOKAK, ADALET, OSMANGAZİ, Bursa", 12, function(){
      alert("trial2");
    });
} 
```

# jquery - jquery中的html标签removeClass和addClass不起作用

> ID：13468725
> 
> 赞同：2
> 
> 时间：2012-11-20T07:51:09.770
> 
> 标签：jquery, html, asp.net-mvc

我现在有一个带有标签的索引页面，它们还没有链接到任何地方，但是当您单击一个标签时，我正在尝试设置活动类。

以下是选项卡：

```
<ul class="nav nav-tabs">
            @foreach(var division in Model)
            {
                <li class="span2""><a href="#">@division.Description</a></li>
            }
            <li class="active span2"><a href="#">All</a></li>
            <li class="span2"><a href="#">Summary</a></li>
        </ul> 
```

和jQuery：

```
<script type="text/javascript">

$(document).ready(function() {
     $("#tabs li").click(function() {
        $("#tabs li").removeClass('active'); 
        $(this).addClass("active");
        $(".tab_content").hide();
        $(selected_tab).fadeIn();
        var selected_tab = $(this).find("a").attr("href");
    });
}); 
```

我还尝试在指向函数 SetActiveTab() 的选项卡上设置一个 onclick 事件，并尝试删除其中的活动类，但这也不起作用：

```
function SetActiveTab() {
    $("#tabs li").removeClass("active");
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:00:59.023

您正在尝试`li`通过 id引用父元素`#tabs`。可能是您的代码片段不完整，并且您确实有父`#tabs`元素，`li`但如果没有，您可以`li`使用类访问`.nav`，`.nav-tabs`或两者兼而有之`.nav.nav-tabs`。此外，通过这种方式，您将访问页面上的所有选项卡，而不仅仅是具有特定 ID 的选项卡。

例子：

```
$(document).ready(function() {
     $(".nav.nav-tabs li").click(function() {
        $("#tabs li").removeClass('active'); 
        $(this).addClass("active");
        $(".tab_content").hide();
        $(selected_tab).fadeIn();
        var selected_tab = $(this).find("a").attr("href");
    });
}); 
```

或者，您可以为 的父元素指定一个 id `li`：

```
<ul class="nav nav-tabs" id="tabs"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T07:57:22.383

您的所有代码都引用了#tabs，但是您的“ul”没有“tabs”的ID。

# android - 在 Android MapView 中平滑缩放？

> ID：13468734
> 
> 赞同：0
> 
> 时间：2012-11-20T07:52:05.517
> 
> 标签：android, android-mapview

我有一个带有一个叠加层的 MapView。Overlay 在 MapView 上呈现基于瓦片的地图。我使用 MapView.getZoomLevel() 来检索 Google 地图和我的图块的当前缩放级别。一切都很完美，但前提是用户不使用多点触控手势缩放地图。据我了解，MapView 控件在缩放过程中不会呈现实际的图块，而只是显示拉伸的屏幕内容。所以，问题是 - 如何获得这个比例，我可以用它来以与谷歌完全相同的方式渲染我的图块？

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:02:31.747

尽管该方法`MapView.getZoomLevel()`未与缩放更改动画和多点触控对齐，但方法`MapView.getProjection().fromPixels()`和`MapView.getProjection().fromPixels()`是。

所以你有几个选择来解决这个问题。从上面的方法中，您可以找到`(x,y)`渲染图块的直接坐标（和大小），或者您可以使用以下方法找到缩放比例：

```
int lonSpan = projection.fromPixels(0,mapView.getHeight()/2).getLongitudeE6() - 
    projection.fromPixels(mapView.getWidth(),mapView.getHeight()/2).getLongitudeE6(); 
```

它为您提供地图垂直中心的经度跨度。然后，将缩放开始后的值与缩放开始前的值相除。

问候。

# c++ - 如何查找特定原型的方法是否存在于类中？

> ID：13468736
> 
> 赞同：5
> 
> 时间：2012-11-20T07:52:10.183
> 
> 标签：c++, templates, visual-c++, gcc, sfinae

我正在使用一些 SFINAE 功能；当前位于必须在 Linux 和 Windows 中运行的应用程序的一部分中；编译器选择是用于 Windows 应用程序的 MSVC (Visual Studio 2010 10.0) 和用于 Linux 应用程序的 GCC 4.4.5。

我必须检查某个给定对象是否提供了一些函数来执行自定义序列化并调用此函数，或者在未提供自定义序列化方法的情况下执行简单的`memcpy`操作。`sizeof(Object)`

问题是一段代码在 MSVC 中编译时没有警告或错误，但在使用 GCC 编译时，代码如下：

```
template
    <
        typename Type,
        typename Return,
        typename Parameter,
        Return (Type::*Pointer)(Parameter) const
    > struct sMemberMethodConst { };

template
    <
        typename Type,
        typename Return,
        typename Parameter,
        Return (Type::*)(Parameter)
    > struct sMemberMethod { };

template<typename T> struct sMemberMethodChecker
{
    template <typename Type> static char HasCustomSizeMethod(sMemberMethodConst<Type, size_t, void, &Type::Size> *);
    template <typename Type> static long HasCustomSizeMethod(...);
    template <typename Type> static char HasSerializeMethod(sMemberMethodConst<Type, size_t, void * const, &Type::Serialize> *);
    template <typename Type> static long HasSerializeMethod(...);
    template <typename Type> static char HasDeserializeMethod(sMemberMethod<Type, size_t, const void * const, &Type::Deserialize> *);
    template <typename Type> static long HasDeserializeMethod(...);
    // Other specific method checks...

    enum
    {
        HAS_CUSTOM_SIZE_METHOD =    (sizeof(HasCustomSizeMethod<T>(0)) == sizeof(char)),
        HAS_SERIALIZE_METHOD =      (sizeof(HasSerializeMethod<T>(0)) == sizeof(char)),
        HAS_DESERIALIZE_METHOD =    (sizeof(HasDeserializeMethod<T>(0)) == sizeof(char)),
        IS_CUSTOM =                 HAS_CUSTOM_SIZE_METHOD &&
                                    HAS_SERIALIZE_METHOD &&
                                    HAS_DESERIALIZE_METHOD,
        // Other 'shortcuts'...
    }; 
```

我在使用 GCC 编译时遇到的错误是：

`invalid parameter type 'void' in declaration template<class Type, class Return, class Parameter, Return (Type::* Pointer)(Parameter)const>`

在的第一行`struct sMemberMethodChecker`。我很确定我没有遗漏`typename`s 或放错词，但我不明白为什么我会收到错误并且不理解错误。

我知道 MSVC 的标准松懈，而 GCC 非常符合标准，所以我想知道问题是否出在允许*愚蠢代码*的 MSVC 方面！

以下是问题：

*   为什么我在?中收到`invalid parameter type 'void'`错误消息。`struct sMemberMethodChecker`
*   为什么代码在 MSVC 中有效但在 GCC 中无效？
*   这个代码是非标准的吗？
*   SFINAE 诡计是 C++11 独有的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:45:13.070

> 为什么我在结构 sMemberMethodChecker 中收到无效参数类型“void”错误？。
> 
> 为什么代码在 MSVC 中有效但在 GCC 中无效？

我相信 MSVC 很有帮助，但是 GCC 在这个特定的代码中很严格。因为它以某种方式不允许`Return (Type::*)(void)`。但是，需要更多地挖掘它才能知道确切的原因。

> 这个代码不标准吗？

不能说，直到它不编译。SFINAE 等功能的搜索标准并不是每个人都喜欢。

> SFINAE 诡计是 C++11 独有的吗？

一点也不。SFINAE 在 C++11 之前就已经存在。
这是您想要做的**简化方法：**

```
template<typename ClassName, typename ClassMethodType>
struct HasMethod
{
  template<typename Type, Type Object> struct Contains;
  typedef char (&yes)[2];

  template<typename Class, typename MethodType>
  static yes Check (Contains<MethodType, &Class::size>*);
  template<typename Class, typename MethodType>
  static char Check (...);

  static const bool value = (sizeof(Check<ClassName,ClassMethodType>(0)) == sizeof(char));
}; 
```

`HasMethod<ClassName, ClassMethodType>::value`如果其中是否存在某种类型的成员方法，则会为您提供答案。
到目前为止，`HasMethod<>`仅使用用户提供的类型*命名方法。* `size`但是您可以为上述代码创建一个宏并使*函数名称可配置*。

这是一个[使用 g++ 的工作演示](http://ideone.com/8W5wdT)。

# php - 添加到 preg_match_all 的模式

> ID：13468746
> 
> 赞同：0
> 
> 时间：2012-11-20T07:52:41.597
> 
> 标签：php, preg-match, preg-match-all

我正在使用以下模式，它基本上从字符串中删除任何不是货币符号前面的数字的内容：

```
$pattern = '/\p{Sc}\s*\d{1,3}(?:,\d{3})*(?:\.\d+)?/u'; 
```

但是，由于我匹配的字符串可以是 html 源代码，这并不完美，因为英国的网站并不总是使用“£”作为值，他们可能使用`&pound;`或`&#163;`

```
A price might be listed as £10.00 or &pound;10.00 or &#163;10.00 
```

所以我要问的是，是否可以在使用时将它们添加到组合中`p{Sc} /u`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:57:09.607

是的，使用包含所有这些的字符类。

```
[\p{Sc}\p{...}\p{...}] 
```

编辑：

您可以`html_entity_decode`在使用正则表达式之前将字符串中的实体转换为相关字符。

```
$string = html_entity_decode("A price might be listed as £10.00 or &pound;10.00 or &#163;10.00");
$pattern = '/\p{Sc}\s*\d{1,3}(?:,\d{3})*(?:\.\d+)?/u';
$matches = [];
preg_match_all($pattern, $string, $matches); 
```

# sql-server - 使用 T-SQL FOR XML PATH 删除空 XML 节点

> ID：13468748
> 
> 赞同：4
> 
> 时间：2012-11-20T07:52:57.707
> 
> 标签：sql-server, xml, tsql, for-xml-path

我正在使用`FOR XML PATH`SQL Server 2008R2 中的表构造 XML。XML 必须按如下方式构造：

```
<Root>
    <OuterElement>
        <NumberNode>1</NumberNode>
        <FormattedNumberNode>0001</KFormattedNumberNode>
        <InnerContainerElement>
            <InnerNodeOne>0240</InnerNodeOne>
            <InnerNodeStartDate>201201</InnerNodeStartDate>
        </InnerContainerElement>
    </OuterElement>
</Root> 
```

根据模式文件，`InnerContainerElement`是可选的，而`InnerNodeOne`是必需的。架构文件不是我设置的，非常复杂，相互引用并且没有明确的 XSD 命名空间，因此我无法轻松地将它们加载到数据库中。

XML 必须从使用以下查询填充的表中创建：

```
SELECT
    1 AS NumberNode
    , '0001' AS [FormattedNumberNode]
    , '0240' AS [InnerNodeOne]
    , '201201' AS [InnerNodeStartDate]
INTO #temporaryXMLStore
UNION
SELECT
    2 AS NumberNode
    , '0001' AS [FormattedNumberNode]
    , NULL AS [InnerNodeOne]
    , NULL AS [InnerNodeStartDate] 
```

我可以想到两种使用`FOR XML PATH`.

1) 使用“InnerContainerElement”作为 XML 子查询的命名结果：

```
SELECT
    NumberNode
    , [FormattedNumberNode]
    , (
        SELECT
            [InnerNodeOne]
            , [InnerNodeStartDate]
        FOR XML PATH(''), TYPE
    ) AS [InnerContainerElement]
FROM #temporaryXMLStore
FOR XML PATH('OuterElement'), ROOT('Root') TYPE 
```

2) 使用“InnerContainerElement”作为 XML 子查询的输出元素，但不命名：

```
SELECT
    NumberNode
    , [FormattedNumberNode]
    , (
        SELECT
            [InnerNodeOne]
            , [InnerNodeStartDate]
        FOR XML PATH('InnerContainerElement'), TYPE
    )
FROM #temporaryXMLStore
FOR XML PATH('OuterElement'), ROOT('Root'), TYPE 
```

但是，它们都没有给出期望的结果：在这两种情况下，结果看起来像

```
<Root>
  <OuterElement>
    <NumberNode>1</NumberNode>
    <FormattedNumberNode>0001</FormattedNumberNode>
    <InnerContainerElement>
      <InnerNodeOne>0240</InnerNodeOne>
      <InnerNodeStartDate>201201</InnerNodeStartDate>
    </InnerContainerElement>
  </OuterElement>
  <OuterElement>
    <NumberNode>2</NumberNode>
    <FormattedNumberNode>0001</FormattedNumberNode>
    <InnerContainerElement></InnerContainerElement>
    <!-- Or, when using the second codeblock: <InnerContainerElement /> -->
  </OuterElement>
</Root> 
```

每当`InnerContainerElement`为空时，它仍然显示为空元素。根据架构，这是无效的：只要元素`InnerContainerElement`在 XML 中，`InnerNodeOne`也是必需的。

我如何构建我的`FOR XML PATH`查询，`InnerContainerElement`只要它是空的就会被忽略？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T10:20:32.410

`InnerContainerElement`在没有内容的情况下，您需要确保0 行。

```
select T.NumberNode,
       T.FormattedNumberNode,
       (
         select T.InnerNodeOne,
                T.InnerNodeStartDate
         where T.InnerNodeOne is not null or
               T.InnerNodeStartDate is not null
         for xml path('InnerContainerElement'), type
       )
from #temporaryXMLStore as T
for xml path('OuterElement'), root('Root') 
```

或者，您可以将元素指定`InnerContainerElement`为列别名的一部分。

```
select T.NumberNode,
       T.FormattedNumberNode,
       T.InnerNodeOne as 'InnerContainerElement/InnerNodeOne',
       T.InnerNodeStartDate as 'InnerContainerElement/InnerNodeStartDate'
from #temporaryXMLStore as T
for xml path('OuterElement'), root('Root') 
```

# json - MVC4 WebApi Knockout JSON 'in'的无效操作数

> ID：13468751
> 
> 赞同：2
> 
> 时间：2012-11-20T07:53:07.213
> 
> 标签：json, knockout.js, asp.net-mvc-4, asp.net-web-api, runtime-error

嗨，我被这个错误消息困住了，我找不到解决方案。

我在 Knockout JavaScript library v2.2.0 中收到此消息错误：

> localhost:port/Scripts/knockout-2.2.0.debug.js 0x800a138f 中的第 1053 行第 5 列未处理的异常 - Microsoft JScript 运行时错误：“in”的操作数无效：预期对象 如果有此异常的处理程序，则程序可以安全地继续。

它在 knockout-2.2.0.debug.js 中的这行代码处停止

```
 if ((initialValues !== null) && (initialValues !== undefined) && !('length' in initialValues)) 
```

我使用这个 WebApi：

```
public class ProductsController : ApiController
{
  IEnumerable<Product> products = new List<Product>() 
    { 
        new Product { Id = 1, Name = "Tomato_Soup", Category = "Groceries", Price = 1 }, 
        new Product { Id = 2, Name = "Yo-yo", Category = "Toys", Price = 3.75M }, 
        new Product { Id = 3, Name = "Hammer", Category = "Hardware", Price = 16.99M } 
    };

      public IEnumerable<Product> GetAllProducts(){
            return products.AsEnumerable();    } 
```

我使用的脚本位于标题部分

```
@section Testscripts
{
    <script src="~/Scripts/jquery-1.8.2.js"></script>
    <script src="~/Scripts/knockout-2.2.0.debug.js"></script> 

} 
```

以及页脚默认脚本部分中的 Knockout 代码

```
@section scripts
{
    <script type="text/javascript">      
        var apiUrl = '@Url.RouteUrl("DefaultApi", new { httproute = "", controller = "products" })';  

        function Product(data) {            
            this.Id = ko.observable(data.Id);
            this.Name = ko.observable(data.Name);
            this.Price = ko.observableArray(data.Price);
            this.Category = ko.observable(data.Category);

        }

        function ProductViewModel() {

            var self = this;
            self.myproducts = ko.observableArray([]);

        $.getJSON(apiUrl, function (allData) {
            var mappedProducts = $.map(allData, function (item) { return new Product(item) });

            self.myproducts(mappedProducts);

        });
      };
   ko.applyBindings(new ProductViewModel);
} 
```

并在正文中显示数据：

```
<ul data-bind="foreach: myproducts">
    <li>
        <input data-bind="value: Id" />
        <input data-bind="value: Name" />
        <input data-bind="value: Category" />
        <input data-bind="value: Price" />
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:19:15.273

该错误在您的`Product`函数中。

您想要创建一个`ko.observableArray`从中`data.Price`是十进制值而不是值数组的值，这会导致这个不太好的异常。

更改为`ko.observable`它应该可以工作：

```
function Product(data) {            
        this.Id = ko.observable(data.Id);
        this.Name = ko.observable(data.Name);
        this.Price = ko.observable(data.Price);
        this.Category = ko.observable(data.Category);

    } 
```

# php - 关于 PHP 中的作用域和 OOP

> ID：13468754
> 
> 赞同：4
> 
> 时间：2012-11-20T07:53:26.063
> 
> 标签：php, oop, variables, scope

我无法理解如何使用对象。

具体代码：

```
class first{
    class second{
        public function widgets(){
            $a_variable = $a_value;
        }
        #1
    }
    $second = new second;
    #2
}
#3
$first = new first; 
```

1.  如果我初始化`$a_variable`，因为`$a_variable`它仅在函数内部可用，对吗？
2.  如果我初始化`$a_varialbe`，因为`$this->a_variable`它仅在第二类中可用，对吗？
3.  我可以初始化`$a_variable`为`$first->second->a_variable`吗？如果是这样，我将如何在`#1`、`#2`和处调用它`#3`？
4.  我可以初始化`$a_varialbe as $this->second->a_variable`吗？如果是这样，我将如何在`#1`、`#2`和处调用它`#3`？

如您所见，我对 OOP 的工作方式感到困惑。

* * *

首先，我想表达我对所有帮助的感激之情。我已经学到了足够多的东西来认为这个问题取得了巨大的成功。

也就是说，即使它的公式很差，伪代码和语法无效，这个代码也可以运行。

```
class class_1{

    public function function_1(){

        require('class_2.php');

        public function function_2_callback(){

            //%%%%%%  How do I set a variable here and get the DATA...

        }

        $this->class_2 = new class_2("function_2_callback");
    }

}

$class_1 = new class_1;

//&&&&&&&&&& Get the DATA here?

/* CONTENTS OF class_2.php */

class class_2($callback){

    call_user_function($callback);

} 
```

即使我们必须将其视为练习。有人能告诉我如何首先设置（@%%%%%%%）然后调用变量（@&&&&&&&&），如图所示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:57:41.903

你不应该像这样嵌套类。那甚至不应该运行。我建议先运行代码。[有一些在线工具可用于测试 PHP 代码的](http://writecodeonline.com/php/)小片段，例如.

为了使代码按您预期的方式运行，它应该如下所示：

```
class second{
    public function widgets(){
        $a_variable = $a_value;
    }
}

class first{
    public $second;

    public function __construct() {
        $this->second = new second;
    }
}

$first = new first; 
```

以 $[az]+ 开头的变量是函数的局部变量。以 $this->[az]+ 开头的属性（其中 [az] 是 1 个或多个字母）是对象的一部分。

php.net 上有一些文档，其中介绍了 php 中对象的[细节](http://php.net/manual/en/language.oop5.php)。

> 如果我将 $a_variable 初始化为 $a_variable 它仅在函数内部可用，对吗？

是，对的。它以 $[az] 开头。如果您使用`global`关键字，则不完全正确，但不鼓励这样做。

> 如果我将 $a_varialbe 初始化为 $this->a_variable 它只能在第二类中使用，对吗？

是的，但你应该先声明它。您可以使用 或 来执行`public $variable`此`protected $variable`操作`private $variable`。`public`意味着可以从外部访问属性，而`private`意味着只有类本身可以访问它。`protected`对外部是私有的，但对从你的类扩展的类是公共的。

( `public`//在 PHP 5 中可用。在 PHP 4 中您将使用`private`，在 PHP 5 中默认为 public)`public``var $variable`

> 我可以将 $a_variable 初始化为 $first->second->a_variable 吗？

您可以在不声明它们的情况下任意初始化类变量，但这不是您应该做的事情。

> 如果是这样，我将如何在#1、#2 和#3 中调用它？

您不能在那里调用代码（在您的示例中）。代码必须在函数内部或全局上下文中（在类定义之外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T08:18:48.327

## 类的简要说明

```
class foo{

    // This can be accessed anywhere
    public $i_am_public;

    // This can be accessed within this class and any sub classes
    protected $i_am_protected;

    // Thi can only be accessed within this class
    private $i_am_private;

    // This function can be accessed anywhere
    public function foo_function(){

        // This variable is only available in this function
        // it cannot be accessed anywhere else
        $variable = 'Hello World';

        // However, you can access any of the other variables listed above
        // like so
        $this->i_am_public = 'public';
        $this->i_am_protected = 'protected';
        $this->i_am_private = 'private';

        // Write these variables
        echo $this->i_am_public;
        echo $this->i_am_protected;
        echo $this->i_am_private;
    }
}

$foo = new foo;

$foo->foo_function();

// You can change any publicly defined variables outside
// of the class instance like so
$foo->i_am_public = 'testing'; 
```

## 问题的具体答案

**在我继续之前，我强烈建议您不要在类中定义类！相反，使用我将在稍后解释的类扩展。事实上，我很惊讶你的代码甚至可以工作！**

> 如果我将 $a_variable 初始化为 $a_variable 它仅在函数内部可用，对吗？

是的，这仅在函数内部可用。如果要在函数外部访问它，则需要使用范围定义之一在函数外部定义它`public, protected, private`。

> 如果我将 $a_varialbe 初始化为 $this->a_variable 它只能在第二类中使用，对吗？

这取决于你给它的范围，但无论如何你都不应该在一个类中定义一个类。

> 我可以将 $a_variable 初始化为 $first->second->a_variable 吗？如果是这样，我将如何在#1、#2 和#3 中调用它？

我无法回答这个问题，因为我从来没有在一个类中嵌套过一个类，我再次敦促你改变这个结构。

> 我可以将 $a_varialbe 初始化为 $this->second->a_variable 吗？如果是这样，我将如何在#1、#2 和#3 中调用它？

请参阅上面的答案:-)

## 嵌套类

如前所述，我以前从未见过这个，我很惊讶它甚至可以工作。你绝对应该改变这个结构。

一个建议是使用这样的扩展：

```
class foo{

    // This can be accessed anywhere
    public $i_am_public;

    // This can be accessed within this class and any sub classes
    protected $i_am_protected;

    // Thi can only be accessed within this class
    private $i_am_private;

    public function foo_function(){

        echo 'Hello World';
    }
}

class bar extends foo {

    // This is a public function    
    public function baz(){

        // These will work
        $this->i_am_public = 'public';
        $this->i_am_protected = 'protected';

        // This will not work as it is only available to
        // the parent class
        $this->i_am_private = 'private';
    }
}

// This will create a new instance of bar which is an 
// extension of foo. All public variables and functions
// in both classes will work
$bar = new bar;

// This will work because it is public and it is inherited
// from the parent class
$bar->foo_function();

// This will work because it is public
$bar->baz(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T08:20:05.557

首先，您的示例是无效代码 PHP 不支持嵌套类，即类中的类。

如果你定义一个类，在方法中初始化的变量是该方法的本地变量，而你可以使用 $this->newattribute 来“初始化”一个属性，你应该在之前声明它及其可见性（在你编写一个公共方法之前 /私有/受保护 $varname = "初始值";)。

您的问题 3 和 4 在另一个上下文中是有意义的，这是当一个对象作为另一个对象的成员传递时，请参见下面的示例。

如果你像这样构建它

```
<?php

class First {  
  public $second;
}

class Second {
  public $a_variable;
}

$foo = new First();
$foo->second = new Second(); 
```

你可以访问它：

```
$foo->second->a_variable = "foo"; 
```

或在第二个方法内

```
$this->a_variable; 
```

或在第一个方法中

```
$this->second->a_variable; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T08:22:32.953

首先：你所拥有的不起作用，你不能以你正在做的方式在一个类中声明一个类（尽管有条件地在一个函数中声明一个类，你不应该这样做）。

PHP 中的作用域（包括 OOP）非常简单：

1.  变量具有函数作用域
2.  如果您有对对象的引用，则可以访问对象属性
3.  可以限制对象属性的*可见性*

您拥有的唯一真正*作用域*是变量的函数作用域：

```
$a = 'foo';

function bar() {
    $a = 'bar';
} 
```

这两个`$a`s完全不相关，在不同的范围内。就如此容易。

```
class Foo {

    public $a = 'foo';

    public function bar() {
        $this->a;  // foo

        $a = 'bar';
    }

}

$foo = new Foo;
$foo->a;  // foo 
```

对象属性没有*范围*，它具有可见性。如果*对象在范围内*，则可以访问它。上面，`$foo`是对象。它在范围内，它的属性`a`是`public`，因此可以使用`$foo->a`. 在类内部，可以通过 访问该属性`$this->a`。

是函数中的`$a = 'bar'`局部变量，与 无关`$this->a`。除了函数内部，它在任何地方都无法访问。请参阅规则 #1，功能范围。

```
class Bar {

    protected $b = 'bar';

    public function baz() {
        $this->b;  // bar
    }

}

$bar = new Bar;
$bar->b;  // doesn't work 
```

如果*可见性*不是，则无法从类本身外部*访问*`public`该属性（此处`b`） 。在类内部，您可以使用 访问它，但不能从外部使用。这不是关于*范围*，而是关于可见性。*`$this->b``$bar->b`*

 **这几乎就是 PHP 中的范围规则。**

# python - 我可以在不使用 python 实际打开浏览器的情况下将 selenium 与 Scrapy 一起使用吗

> ID：13468755
> 
> 赞同：2
> 
> 时间：2012-11-20T07:53:28.237
> 
> 标签：python, selenium, scrapy

我想用scrapy和python做一些网络爬取。我从互联网上找到了一些使用 selenium 和 scrapy 的代码示例。

我不太了解，`selenium`但只知道它可以自动执行一些网络任务。浏览器实际上会打开并做一些事情。但我不希望实际的浏览器打开，但我希望一切都从命令行发生。

我可以在 selenium 和 scrapy 中做到这一点吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T02:26:10.733

更新：PhantomJS 已弃用，现在可以直接使用无头浏览器，比如 Firefox 和 Chrome！

* * *

改用 PhantomJS。

你可以`browser = webdriver.PhantomJS()`在 selenium v​​2.32.0 中做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T08:07:21.973

至少在 linux 上，您可以将 selenium 与[PyVirtualDisplay一起使用。](http://pypi.python.org/pypi/PyVirtualDisplay)

```
from pyvirtualdisplay import Display
from selenium import webdriver
display = Display(visible=0, size=(1024, 768))
display.start()
browser = webdriver.Chrome() 
```

# iphone - 如何将坐标转换为图像

> ID：13468761
> 
> 赞同：0
> 
> 时间：2012-11-20T07:53:57.843
> 
> 标签：iphone, objective-c, ios

**签名.h 文件**

```
#import <UIKit/UIKit.h>

@interface Signature : UIViewController
{

    CGPoint firstTouch;
    CGPoint lastTouch;
    UIColor *pointColor;
    CGRect *points;
    int npoints;
    CGPoint location;
   // UIImageView *signatureImageView;
}
 @property CGPoint firstTouch;
@property CGPoint lastTouch;
@property (nonatomic, retain) UIColor *pointColor;
@property CGRect *points;
@property int npoints;

@property (retain, nonatomic) IBOutletCollection(UIImageView) NSArray *drawSign;
@property CGPoint location;

@property (retain, nonatomic) IBOutletCollection(UIImageView) NSArray *signatureImageView;
- (IBAction)savePressed:(id)sender;
- (IBAction)clearPressed:(id)sender;

@end 
```

**签名.m**

```
#import "Signature.h"

@interface Signature ()

@end

@implementation Signature
@synthesize drawSign;
@synthesize signatureImageView;
@synthesize firstTouch;
@synthesize lastTouch;
@synthesize  pointColor;
@synthesize  points;

- (id)initWithFrame:(CGRect)frame
{
    return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
    if(self = [super initWithCoder:coder])
    {
        self.npoints = 0;
    }
    return self;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    NSLog(@"initwithnibname");
    return self;
}

- (void)viewDidLoad
{
    NSLog(@"viewdidload");

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    NSLog(@"view did unload");

    [self setSignatureImageView:nil];
    [self setDrawSign:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touch has began");

    UITouch *touch = [touches anyObject];
    self.location = [touch locationInView:self.view];
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touches moves");

    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self.view];
   UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();

  //[self.drawSign.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    NSLog(@"%f x is",location.x);
     NSLog(@"%f y is",location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
   // self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touches ended");

    UITouch *touch = [touches anyObject];
  CGPoint currentLocation = [touch locationInView:self.view];

   UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    //[self.view.image drawInRect:CGRectMake(0, 0, self.frame.view.size.width, self.frame.view.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
   CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
  //  self.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
} 

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)dealloc {
    [signatureImageView release];
    [super dealloc];
}
- (IBAction)savePressed:(id)sender {
    NSLog(@"save pressed");

}

- (IBAction)clearPressed:(id)sender {
    NSLog(@"cancel pressed");

}
@end 
```

请找到与我的项目相关的两个文件。从一个观点我来到这个观点。现在我需要保存用户在上面绘制的任何内容。我能够获取坐标但无法绘制它们。我已经尝试了几次，但似乎都没有工作。请以注释方式在**Signature.m文件本身中找到它们。**请指出我的错误并纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:12:00.143

我真的不明白你的问题，但这段代码错误的原因在于接触部分。

如果你想在触摸的同时进行绘制，那么你必须在你想绘制的视图中使用 drawInRect 方法。

如果你想在用户释放图像后绘制图像以保存或呈现它，那么你必须在**touchesBegan上创建一个图像上下文，然后在****touchesMoved**上绘制它，最后将结果保存在**touchesEnded**中。

您可以在**touchesEnded**处提取结果

```
UIImage *result = UIGraphicsGetImageFromCurrentImageContext(); 
```

您的代码现在正在做的是，每次您移动手指时，您都会创建一个新的画布，在其上绘制并销毁它。当您抬起手指时，您会在其上再创建一个画布并销毁它。

但我很确定您想移动手指并直接在屏幕上显示结果。为此，我真的建议你在谷歌上找到一个教程，但基本上你必须：在触摸开始时创建一个点数组，在触摸移动时向这个数组添加点，在触摸结束时将最后一个点添加到数组中。MEANWHILE 在视图 drawInRect 上，您的代码必须连续绘制此数组中的点。

编辑：

**假设您在self.drawSign.image**的开头有一个有效的 UIImage（已经初始化的空白画布）

 **尝试：

```
- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touches moves");

    UITouch *touch = [touches anyObject];
    CGPoint currentLocation = [touch locationInView:self.view];
   UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    [self.drawSign.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
    NSLog(@"%f x is",location.x);
     NSLog(@"%f y is",location.y);
    CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.drawSign.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    NSLog(@"touches ended");

    UITouch *touch = [touches anyObject];
  CGPoint currentLocation = [touch locationInView:self.view];

   UIGraphicsBeginImageContext(self.view.frame.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [self.drawSign.image drawInRect:CGRectMake(0, 0, self.frame.view.size.width, self.frame.view.size.height)];
    CGContextSetLineCap(ctx, kCGLineCapRound);
    CGContextSetLineWidth(ctx, 5.0);
    CGContextSetRGBStrokeColor(ctx, 1.0, 0.0, 0.0, 1.0);
    CGContextBeginPath(ctx);
    CGContextMoveToPoint(ctx, location.x, location.y);
   CGContextAddLineToPoint(ctx, currentLocation.x, currentLocation.y);
    CGContextStrokePath(ctx);
    self.drawSign.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    location = currentLocation;
} 
```

我不确定这是否可行，但即使这样做也是一种可怕的方式（性能方面）。**

# android - Android 手绘位图裁剪

> ID：13468765
> 
> 赞同：1
> 
> 时间：2012-11-20T07:54:35.737
> 
> 标签：android, bitmap, polygon, crop

我知道我们可以使用以下方法将位图裁剪为矩形：

```
Bitmap.createBitmap(source, x, y, width, height) 
```

但我想知道以手绘模式或某些多边形形状裁剪位图。最好的例子可以在[Jigsaw Puzzle 游戏中看到](https://play.google.com/store/apps/details?id=coder.hamster.jpall.cats)

我花了很多时间在谷歌上搜索，但没有找到任何帮助。有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:11:16.847

绘制 a 时，您可以使用 a[`Path`](http://developer.android.com/reference/android/graphics/Path.html)来确定您的剪辑区域。`Canvas``Bitmap`

有关完整示例，请参见：

[Android - 从多点裁剪图像](https://stackoverflow.com/questions/11579645/android-crop-an-image-from-multipoints)

并且：

[从位图中切割出多点多边形并将其置于透明度上](https://stackoverflow.com/questions/8993292/cutting-a-multipoint-ploygon-out-of-bitmap-and-placing-it-on-transparency)

# arm - ARM拆解

> ID：13468766
> 
> 赞同：8
> 
> 时间：2012-11-20T07:54:44.213
> 
> 标签：arm

是否有一种工具可以分析并突出显示每行代码的含义。我不是在寻找像 Hex-Rays Decompiler 这样的反编译器。我正在寻找一个有助于阅读汇编代码的简单工具。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-20T08:59:09.833

What about using [objdump](http://sourceware.org/binutils/docs/binutils/objdump.html)?

```
$ cat add.c 
int add(int a, int b) {
    return a + b;
}

$ arm-linux-gnueabihf-gcc -c -O2 add.c

$ arm-linux-gnueabihf-objdump -d add.o

add.o:     file format elf32-littlearm

Disassembly of section .text:

00000000 <add>:
   0:   1840        adds    r0, r0, r1
   2:   4770        bx  lr 
```

It can provide source code mixing as well if your object file contains debug information (gcc -g) and if you supply -S to objdump.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-05T03:24:45.433

Online Disassembler (ODA) 支持 ARM 和无数其他架构。您可以在实时视图中输入二进制数据并在您键入时观看反汇编，或者您可以上传文件进行反汇编。该站点的一个不错的功能是您可以与其他人共享反汇编链接。

[http://www.onlinedisassembler.com](http://www.onlinedisassembler.com)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T12:07:05.030

正如您在问题中提到的，IDA Pro 也可以反汇编 ARM。
此外，您是否尝试过[ARM DS-5 Development Studio](http://ds.arm.com/)？
有些功能与硬件更相关，但 IDE (Eclipse) 非常好。

特征：

*   对裸机、RTOS、Linux 和 Android 平台的调试支持
*   非侵入式周期精确 ETM 和 PTM 指令跟踪
*   无缝支持 SMP 系统
*   自动调试会话，加快调试周期
*   ITM 和 STM 仪器跟踪
*   支持预配置和自定义平台

在手册中它说它包含：

*   DS-5 调试器，涵盖产品开发的所有阶段
*   用于嵌入式和裸机代码的 ARM Compiler 5.04
*   适用于 Linux 应用程序和 Linux 内核的 Linaro GCC 工具链 2013.03
*   适用于各种操作系统的 ARM Streamline™ 性能分析器，包括 Linux、Android 和 RTX
*   Eclipse IDE、源代码编辑器和项目管理器
*   用于 Cortex™-A8 和四核 Cortex-A9 处理器的固定虚拟平台 (FVP)
*   示例项目和文档

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-20T09:07:30.870

这个免费程序怎么样 :: [http://pel.hu/armu/](http://pel.hu/armu/)

# php - 为什么 PHP Solr 扩展给出异常“不成功的查询请求”

> ID：13468771
> 
> 赞同：4
> 
> 时间：2012-11-20T07:55:09.680
> 
> 标签：php, exception, solr

我使用[PHP Solr 扩展](http://pecl.php.net/package/solr)，当我运行下面的代码时，我得到了异常：

> 致命错误：未捕获的异常“SolrClientException”，消息“查询请求不成功：响应代码 404。

我不明白，怎么了，我也成功使用了Solr客户端。

```
include "bootstrap.php";

$options = array
(
    'hostname' => SOLR_SERVER_HOSTNAME,
    'login'    => SOLR_SERVER_USERNAME,
    'password' => SOLR_SERVER_PASSWORD,
    'port'     => SOLR_SERVER_PORT,
);

$client = new SolrClient($options);    
$query = new SolrQuery();   
$query->setQuery('lucene');    
$query->setStart(0);    
$query->setRows(50);    
$query->addField('cat')->addField('features')->addField('id')-> addField('timestamp');    
$query_response = $client->query($query);    
$response = $query_response->getResponse();    
print_r($response);    
?> 
```

**我的 bootstrap.php 文件是：**

```
<?php

/* Domain name of the Solr server */
//define('SOLR_SERVER_HOSTNAME', 'solr.example.com');//solr.example.com
define('SOLR_SERVER_HOSTNAME', 'localhost');//solr.example.com

define('SOLR_SECURE', true);

/* HTTP Port to connection */
//define('SOLR_SERVER_PORT', ((SOLR_SECURE) ? 8443 : 8983));
define('SOLR_SERVER_PORT', ((SOLR_SECURE) ? 8080 : 8443));

/* HTTP Basic Authentication Username */
define('SOLR_SERVER_USERNAME', '');//admin

/* HTTP Basic Authentication password */
define('SOLR_SERVER_PASSWORD', '');//changeit

/* HTTP connection timeout */
/* This is maximum time in seconds allowed for the http data transfer operation. Default value is 30 seconds */
define('SOLR_SERVER_TIMEOUT', 10);

/* File name to a PEM-formatted private key + private certificate (concatenated in that order) */
define('SOLR_SSL_CERT', 'certs/combo.pem');

/* File name to a PEM-formatted private certificate only */
define('SOLR_SSL_CERT_ONLY', 'certs/solr.crt');

/* File name to a PEM-formatted private key */
define('SOLR_SSL_KEY', 'certs/solr.key');

/* Password for PEM-formatted private key file */
define('SOLR_SSL_KEYPASSWORD', 'StrongAndSecurePassword');

/* Name of file holding one or more CA certificates to verify peer with*/
define('SOLR_SSL_CAINFO', 'certs/cacert.crt');

/* Name of directory holding multiple CA certificates to verify peer with */
define('SOLR_SSL_CAPATH', 'certs/'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-01T05:47:11.430

当我查询 Solr 时，我收到了类似的错误消息。

错误来自我正在使用集合，因此您需要在配置中指定它：

```
$options = array
(
        'hostname' => 'localhost',
        'login'    => '',
        'password' => '',
        'port'     => 8983,
        'path'     => 'solr/collection', // <-- Add your collection here
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:45:56.253

我认为有问题的是这条线

```
define('SOLR_SERVER_PORT', ((SOLR_SECURE) ? 8080 : 8443)); 
```

您的安全连接是使用端口 8080 还是 8443？我假设正常连接是 8080，安全是 8443，但线暗示相反，安全端口是 8080，正常一个是 8443

# c# - 自定义工作流活动功能错误

> ID：13468776
> 
> 赞同：0
> 
> 时间：2012-11-20T07:55:38.040
> 
> 标签：c#, dynamics-crm-2011, workflow-activity

我有以下代码来获取实体记录：

```
private void FetchEvent(string EventId, IOrganizationService crmService)
    {
        // Create the ColumnSet to be retrieved.
        ColumnSet columnSet = new ColumnSet();
        // Set the properties of the ColumnSet.
        columnSet.AddColumn("campaignid");
        columnSet.AddColumn("name");
        columnSet.AddColumn("description");
        columnSet.AddColumn("renre_giftid");
        columnSet.AddColumn("ownerid");  

        // Create the FilterExpression.
        FilterExpression filterExpression = new FilterExpression();

        // Create the ConditionExpression.
        ConditionExpression conditionExpression = new ConditionExpression();

        // Set the condition for the retrieval based on customer id field.
        conditionExpression.AttributeName = "campaignid";
        conditionExpression.Operator = ConditionOperator.Equal;
        conditionExpression.Values.Add(new string[]{EventId});

        filterExpression.FilterOperator = LogicalOperator.And;
        // Set the properties of the filter.
        filterExpression.Conditions.Add(conditionExpression);

        // Create the QueryExpression object.
        QueryExpression queryExpression = new QueryExpression();

        // Set the properties of the QueryExpression object.
        queryExpression.EntityName = "campaign";//EntityName.campaign.ToString();
        queryExpression.ColumnSet = columnSet;
        queryExpression.Criteria = filterExpression;

        RetrieveMultipleRequest InvitationResponseRequest = new RetrieveMultipleRequest();
        InvitationResponseRequest.Query = queryExpression;
        //InvitationResponseRequest.ReturnDynamicEntities = true;

        eventEntity = (Entity)((RetrieveMultipleResponse)crmService.Execute(InvitationResponseRequest)).EntityCollection.Entities[0];
    } 
```

当我调试时，到达此函数的最后一行后，`eventEntity = (Entity)((RetrieveMultipleResponse)crmService.Execute(InvitationResponseRequest)).EntityCollection.Entities[0];`它给出了一个异常：

**属性“campaign.campaignid”的条件：预期的参数类型为“System.Guid”，但收到了“System.String[]”。**

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:17:01.390

您正在传递一个字符串数组作为 EntityId 的值。

改变这个：

```
conditionExpression.Values.Add(new string[]{EventId}); 
```

对此：

```
conditionExpression.Values.Add(new Guid(EventId)); 
```

您可能还想考虑将输入参数上的类型更改为 Guid 并将 EventId 参数上的 Pascal Casing 修复为 camel 以保持一致性

# bash - 具有较新选项的查找命令在毫秒级别不起作用

> ID：13468777
> 
> 赞同：0
> 
> 时间：2012-11-20T07:55:47.900
> 
> 标签：bash, find, solaris, sunos

我在 SunOS 中创建了 3 个文件，其中 2 个的创建时间以毫秒为单位。第三个文件变化一秒钟。`find <path> -newer`似乎没有考虑毫秒。

```
bash-3.2$ touch -d 2012-11-20T12:59:00.1234 /tmp/abc.txt    
bash-3.2$ touch -d 2012-11-20T12:59:00.4567 /tmp/abc1.txt    
bash-3.2$ touch -d 2012-11-20T12:59:01.0000 /tmp/abc2.txt    
bash-3.2$ ls -lE /tmp/abc*    
-rw-r--r--   1 blahuser  root            0 2012-11-20 12:59:00.123400000 +0100 /tmp/abc.txt    
-rw-r--r--   1 blahuser  root            0 2012-11-20 12:59:00.456700000 +0100 /tmp/abc1.txt    
-rw-r--r--   1 blahuser  root            0 2012-11-20 12:59:01.000000000 +0100 /tmp/abc2.txt 
```

这里`find /tmp -newer /tmp/abc.txt`应该理想地显示*/tmp/abc1.txt*和*/tmp/abc2.txt*但实际上它只输出*/tmp/abc2.txt*

```
bash-3.2$ find /tmp -type f -newer /tmp/abc.txt
/tmp/abc2.txt 
```

是否还有其他选项`find`也需要考虑毫秒？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:35:15.100

恐怕答案是否定的。

即使是与 Solaris 捆绑的 GNU find 版本也只考虑整数秒。

您需要使用自定义代码来管理在同一秒内修改的文件，而不是参考文件。

# mysql - MYSQL 按升序和降序排序

> ID：13468781
> 
> 赞同：39
> 
> 时间：2012-11-20T07:56:16.837
> 
> 标签：mysql, sql, sorting

我有一个带有产品的 mysql 表。

产品具有类别 ID 和名称。

我想做的是先按类别 id 降序排序，然后按产品名称升序排序。

```
SELECT * FROM `products` ORDER BY `products`.`product_category_id`,`naam` DESC 
```

我想要的是

```
SELECT * FROM `products` ORDER BY `products`.`product_category_id`,`naam` DESC,ASC 
```

但不幸的是，这不起作用。

这甚至可以在 mysql 中定义第二个排序列的排序顺序吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-20T07:57:49.547

你可以这样做：

```
ORDER BY `products`.`product_category_id` DESC ,`naam` ASC 
```

看看[`ORDER BY`优化](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:58:19.110

我不明白在同一列`ASC`和`DESC`同一列中排序的含义是什么`ORDER BY`，但是您可以这样做：`naam DESC, naam ASC`像这样：

```
ORDER BY `product_category_id` DESC,`naam` DESC, `naam` ASC 
```

# c++ - SHDocVw::IShellWindowsPtr 使用 IE8 失败？（错误 0x80040154）

> ID：13468784
> 
> 赞同：1
> 
> 时间：2012-11-20T07:56:25.007
> 
> 标签：c++, com, internet-explorer-8, mshtml

我的程序是一个 DLL，它连接到一个正在运行的 IE 实例。多年来一直运行良好。

最近我把它掸掉并运行它，但下面的最后一行失败了`hr = 0x80040154`：

```
#import <mshtml.tlb>     rename("value", "theValue") rename("event", "theEvent")
#import <shdocvw.dll> 

// ....

SHDocVw::IShellWindowsPtr spSHWinds;
HRESULT hr = m_spSHWinds.CreateInstance(__uuidof(SHDocVw::ShellWindows)); 
```

IE7被IE8取代有关系吗？我还应该去哪里看？

如果这很重要，我正在使用 VS2008。

**编辑添加**

我不认为这可能是 32/64 位问题 - 去年它在同一台机器上运行良好。唯一改变的（据我所知）是 IE 的版本，从 7 到 8。

**赏金猎人注意事项：**

我每天只能访问该系统几个小时（美国东部标准时间 0:00 左右），因此您可能无法快速回复您的建议，但我*会*调查他们。

如果您认为我应该检查一些事情（例如注册表值），请具体说明。

**编辑添加：**

我现在看到我*第*一次调用 CreateInstance 时，它​​返回 0x80070002，而不是 0x80040154。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:28:17.070

这将**很难**诊断。ShellWindows coclass 是特殊的，它的 CLSID 注册表项是`HKEY_CLASSES_ROOT\CLSID\{9BA05972-F6A8-11CF-A442-00A0C90A8F39}`. 当你看那里时，你会看到那里没有注册任何有用的东西。背景故事是，这是使 Windows shell 类似于 Web 浏览器的一次不幸的尝试的残余。今天仍然可见，枚举 shell 窗口会返回 Windows Explorer 和 Internet Explorer 实例。

SysInternals 的 ProcMon 实用程序几乎始终是调试 0x80040154 错误的首选武器，但在这方面表现平平。您可以看到它正在探测注册表，但没有找到它要查找的内容，但随后程序知道如何加载 ieframe.dll。这只能通过拦截 CoCreateInstance() 调用的操作系统起作用。考虑到 coclass 枚举 shell 窗口，这通常是有道理的。

剩下的就是试错法。先重装IE，再重装OS。或者在它占用你太多宝贵时间之前把它从 4 楼的窗户里推开。

# google-tag-manager - 如何调试谷歌 DFP？

> ID：13468785
> 
> 赞同：9
> 
> 时间：2012-11-20T07:56:34.600
> 
> 标签：google-tag-manager, double-click

该标准`?google_console=1`目前对我们不起作用。我们使用的是 Google Publisher Tag（异步）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-07T01:35:21.523

Google 发布者控制台可以进行抽查，但我强烈建议不要使用这种方法。有时，Google pub 控制台会列出广告单元的部分数据……我在使用 Google pub 控制台调试同步 GPT 方面有过粗略的经验。

如果您使用的是 Chrome，更强大的方法如下：

1.  加载页面。
2.  打开 Chrome 开发人员工具，然后单击网络选项卡。
3.  在过滤器字段中，输入“双击”（减去引号）。
4.  Ctrl+R 刷新页面。
5.  所有 DFP 广告调用都将开始填充（名称中通常包含广告和 gampad 引用）。
6.  点击广告调用。信息应显示在右侧面板中。
7.  快速参考： iu：（字符串的广告单元部分） Cust_params 或 scp：通常大多数自定义条件定位值应显示在这两者中的任何一个中，具体取决于代码实施
8.  此外，在“响应”选项卡的“标题”下，将列出 Google 订单项 ID 和 Google 广告素材 ID……这对于调试/故障排除非常有帮助。您还可以查看视频广告素材的 XML 返回。

此外，如果您需要在 Chrome 之外进行调试，Charles/Fiddler 是不错的调试选择。请留意查询字符串和标题选项卡，但应该通过相同的信息。过滤是关键。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-14T14:08:06.610

只需尝试在 JS 控制台中运行以下命令：

```
googletag.openConsole(); 
```

^(注意：您还可以在函数参数中指定包含广告位的 div 元素的 ID。)

或者将以下代码粘贴到书签管理器的书签中：

```
javascript:googletag.openConsole(); 
```

然后导航到网站并单击新创建的书签。

或使用以下 HTML 代码在您的内容页面上创建链接，例如：

```
<a href="javascript:googletag.openConsole();">Open console</a> 
```

也可以看看：

*   [启用 Google 发布商控制台](https://support.google.com/dfp_premium/answer/2462712)
*   [GPT 参考](https://developers.google.com/doubleclick-gpt/reference)

# mysql - mysqld_safe 在登录时导致问题

> ID：13468786
> 
> 赞同：2
> 
> 时间：2012-11-20T07:56:36.243
> 
> 标签：mysql

我正在运行 ubuntu 10.04，最近安装了 mysql server 5.1，但是当我尝试登录时，它向我显示了这样的错误：

```
can't log in to mysql server through /var/run/mysqld/mysqld.sock 
```

但是昨天我试图杀死所有mysql进程并重新启动，当我杀死mysqld_safe时，令人惊讶的是我设法通过以下方式登录并在mysql服务器上执行查询

```
mysql -u root -p 
```

现在我想问我是否可以`mysqld_safe`永远禁用。

# javascript - TypeError：“未定义”不是函数（评估“_class.apply（this，arguments）”）

> ID：13468787
> 
> 赞同：0
> 
> 时间：2012-11-20T07:56:42.467
> 
> 标签：javascript, coffeescript

尝试实例化`MyClass()`s 时出现以下错误。

```
s = new MyClass();
> TypeError: 'undefined' is not a function (evaluating '_class.apply(this, arguments)') 
```

是类

```
class MyClass
    constructor: (@value = 'defaultValue')
    …. 
```

知道是什么导致了这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:01:59.827

构造函数需要是一个函数，因此您需要指定`->`：

```
class MyClass
    constructor: (@value = 'defaultValue') -> 
```

[演示](http://coffeescript.org/#try%3aclass%20MyClass%0A%20%20%20%20constructor%3a%20%28@value%20=%20%27defaultValue%27%29%20-%3E%0A%0A%0As%20=%20new%20MyClass%28%29;%0Aconsole.log%28s%29;)

# jquery - 我可以更改 nivo 滑块的 nivo-control 锚链接以使用自定义文本吗？

> ID：13468790
> 
> 赞同：1
> 
> 时间：2012-11-20T07:57:04.543
> 
> 标签：jquery, nivo-slider

```
<div class="nivo-controlNav">
  <a class="nivo-control" rel="0">1</a>
  <a class="nivo-control" rel="1">2</a>
  <a class="nivo-control" rel="2">3</a>
  <a class="nivo-control" rel="3">4</a>
</div> 
```

这就是 nivo 吐出来的。我想将每张幻灯片的锚点更改为自定义文本。我不想破解它，而且我找不到任何 nivo 文档来查看是否支持它。有谁知道这是否可能？

TL;DR - 基本上，我想使用自定义锚文本而不是点。我想要用于 SEO 目的的锚文本。

# c - 读取文件时的奇怪结果

> ID：13468797
> 
> 赞同：3
> 
> 时间：2012-11-20T07:57:23.537
> 
> 标签：c, file, function, io, malloc

当我将文件中的信息读入我的电话簿程序并尝试通过联系人列表查看时，第一次尝试查看时列表为空白，但如果您选择再次查看，文件中的内容就在那里. 更奇怪的是，当您通过程序添加名称时，该名称会与文件数据一起显示一次，但如果您再次检查，新名称就消失了。如果您删除一个姓名，它会删除一次，但如果您再次检查联系人列表，该姓名会恢复。我不知所措。这是我的读取功能和打印功能。

```
void file2(fr*friends ,int* counter, int i,char buffer[],FILE*read,char user_entry3[])
{
    int len;
    fr temp;
    *counter=0;
    i=0; 
    fseek(read, 0, SEEK_SET);  
    while (fgets(buffer, 80, read) != NULL) { 
        temp.First_Name=malloc(36); //was j+1
        temp.Last_Name=malloc(36); //strlen(buffer));

        sscanf(buffer,"%s %s",temp.First_Name,temp.Last_Name);

        fgets(buffer, 20, read);
        len=strlen(buffer);
        if(buffer[len-1]=='\n')
            buffer[len-1]='\0';

        temp.home=malloc(20); //len);
        strcpy(temp.home, buffer);

        fgets(buffer, 20, read);
        len=strlen(buffer);
        if(buffer[len-1]=='\n')
            buffer[len-1]='\0';

        temp.cell=malloc(20); //len);
        strcpy(temp.cell, buffer); 

        friends[i].First_Name=malloc(MAXNAME);
        friends[i].Last_Name=malloc(MAXNAME);
        friends[i].home=malloc(MAXPHONE);
        friends[i].cell=malloc(MAXPHONE);

        if(!friends[i].First_Name || !friends[i].Last_Name || !friends[i].home || !friends[i].cell) {
            printf("\nmalloc() failed!\n");
            getchar();
            return;
        }

        strcpy(friends[*counter].First_Name,temp.First_Name);
        strcpy(friends[*counter].Last_Name,temp.Last_Name);
        strcpy(friends[*counter].home,temp.home);
        strcpy(friends[*counter].cell,temp.cell);

        (*counter)++;
        i++; 

    }
    //fclose(read);
    free(temp.Last_Name);
    free(temp.First_Name);
    free(temp.home);
    free(temp.cell);
}

void print_contact(fr*friends ,int* counter, int i,char buffer[],char    user_entry3[50],FILE*read) {

    for( i = 0; i < *counter; i++)

        if (strlen(friends[i].First_Name) && strlen(friends[i].Last_Name)&&     strlen(friends[i].home)&& strlen(friends[i].cell ))
        {

            getFirst(friends, i);
            getLast(friends, i);
            getHome(friends, i);
            getCell(friends, i);

        }
    file2(friends ,counter,i,buffer,read,user_entry3);

} 
```

这很奇怪，因为它就像程序完美运行一次，但之后就不行了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T23:50:44.193

> 这很奇怪，因为它就像程序完美运行一次，但之后就不行了。

恐怕它真的只是好像它起作用了：

*   `friends`在某处预先分配？因为您只需继续从文件中读取输入并递增`i`直到文件末尾（或错误） - 这可能迟早会溢出；

*   你读了 80 个字符，然后试着把它变成 36 个字符的 2 倍——这很容易再次溢出。更不用说将这些 80 读入一个缓冲区，该缓冲区通过几个函数作为参数传递——为什么不使用局部变量呢？幻数是`36`更小、更大还是等于`MAXNAME`？为什么？

*   `malloc()` `temp`在循环的每次迭代中，但`free()`在完成后只有一次 - 泄漏内存 ~120B/entry；

# html - HTML、CSS 和 jQuery 选择器之谜

> ID：13468798
> 
> 赞同：0
> 
> 时间：2012-11-20T07:57:25.270
> 
> 标签：html, css, jquery-selectors

有没有办法选择第二个内部 div 而不使用 CSS 2 跨浏览器支持更改 HTML？

```
<div>
    <table>
          <tr>
              <td>
                   <div></div>
                   <div></div>
              </td>
          </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:05:15.703

试试这个选择器，任何一个都可以正常工作：

```
 div table div { ... } 
```

或者

```
 div table tr td div { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:09:55.110

```
$("div div:nth-child(2)").css ( "CSS GOES HERE" );  // index starts from 1 
```

* * *

```
$("div div:eq(1)").css ( "CSS GOES HERE" );;  // index starts from 0 
```

无论浏览器是否支持 css3，这都适用于所有浏览器。

**编辑**
如上所述，即使浏览器仅支持**css2** ，上面的代码也可以工作，但如果它只是为了拼图，那么

```
div  div:first-child + div 
```

这将**只影响主 div 内的第二个 div**，而不使用 css3。[第一个孩子不是css3]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T09:25:39.533

你可以使用邻接选择器

```
div + div 
```

[http://jsfiddle.net/kudoslabs/rysys/](http://jsfiddle.net/kudoslabs/rysys/)

参考：[http ://www.w3.org/TR/CSS2/selector.html#adjacent-selectors](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T08:02:26.537

尝试使用此选择器

```
div div + div {
       …
} 
```

**[dabblet.com 上的演示](http://dabblet.com/gist/4116671)**
![在此处输入图像描述](../Images/f68cff2a08e7036ed2ee9e0d250d111b.png)

我使用这些 css 规则实现了这个结果：

```
div {
    padding: 5px;
    background: yellow;
}

div div + div {
    background: red;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-20T08:02:55.363

如果您尝试使用 jquery 选择器查找内部 div，那么这里的代码可能会有所帮助

```
var innerDiv = $('table').find('div'); 
```

而对于外

```
var outerDiv = $('table').parents('div'); 
```

问候。

# android - 将 alpha 设置为布局子级

> ID：13468800
> 
> 赞同：4
> 
> 时间：2012-11-20T07:57:36.027
> 
> 标签：android, alpha

我正在使用以下代码来设置布局的 alpha 值：

```
<RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="54dp"
        android:alpha="0.85"
        android:background="@color/label_background"
        android:gravity="center_vertical"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/account"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:clickable="true" >

            <Button
                android:id="@+id/accountButton"
                android:layout_width="30dp"
                android:layout_height="30dp"
                android:layout_margin="12dp"
                android:background="@drawable/settings" />
        </LinearLayout>

        <ImageView
            android:layout_width="1dp"
            android:layout_height="fill_parent"
            android:layout_toRightOf="@id/account"
            android:scaleType="fitXY"
            android:src="@android:drawable/divider_horizontal_dim_dark" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:gravity="center_vertical"
            android:text="@string/pick_up"
            android:textColor="@color/white"
            android:textSize="22dp"
            android:textStyle="bold"
            custom:customFont="Roboto-Regular.ttf" />
    </RelativeLayout> 
```

我面临的问题是，为整个相对布局设置一个 alpha 值也会使其子项（the`TextView`和 the `Button`）透明。但是，我希望按钮和文本是纯色而不是透明的。我尝试将`alpha`值设置为 1`TextView`和 the`Button`但它没有帮助。我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:09:26.863

我最终能够通过使用以下代码来做到这一点：

```
<FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:alpha="0.85"
            android:background="@color/label_background" />

        <RelativeLayout
            android:id="@+id/relativeLayout1"
            android:layout_width="fill_parent"
            android:layout_height="54dp"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <LinearLayout
                android:id="@+id/account"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:clickable="true" >

                <Button
                    android:id="@+id/accountButton"
                    android:layout_width="30dp"
                    android:layout_height="30dp"
                    android:layout_margin="12dp"
                    android:background="@drawable/settings" />
            </LinearLayout>

            <ImageView
                android:layout_width="1dp"
                android:layout_height="fill_parent"
                android:layout_toRightOf="@id/account"
                android:scaleType="fitXY"
                android:src="@android:drawable/divider_horizontal_dim_dark" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:gravity="center_vertical"
                android:text="@string/pick_up"
                android:textColor="@color/white"
                android:textSize="22dp"
                android:textStyle="bold"
                custom:customFont="Roboto-Regular.ttf" />
        </RelativeLayout>
    </FrameLayout> 
```

基本上，我将其包围`relativeLayout`并在其本身中`FrameLayout`设置`alpha`值和背景。`FrameLayout`

# mysql - 在无文本搜索查询中使用 sphinx vs MySQL

> ID：13468806
> 
> 赞同：2
> 
> 时间：2012-11-20T07:57:53.027
> 
> 标签：mysql, sphinx

我有这个疑问：

假设我有一张大表与一个较小的用户表有关系。

这个想法是在那个非常大的表中搜索大于给定日期的日期并按分数排序（例如，大整数），并同时获取相关的用户信息。此查询的结果可以每 10 分钟左右更改一次。

所以，没有文本搜索，但我有一个非常大的表。我应该使用 sphinx（或其他搜索引擎）还是只使用一些 MySQL 索引？

如果我使用 sphinx，肯定能得到非常快的结果；但也许刷新索引，即使使用增量索引，也不会对 MySQL 索引产生很大影响。同时，表中的变化不一定是新的插入，而是更新；而且我已经读过实时索引和增量索引会产生问题。

也许使用 MySQL 索引会更好，并有助于某种缓存以避免不必要的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:30:24.767

只需使用 MySQL，您的工作绝对不需要 Sphinx。

# c# - DataBinding时使用DatabaseTable字段说明

> ID：13468807
> 
> 赞同：0
> 
> 时间：2012-11-20T07:58:01.497
> 
> 标签：c#, database, data-binding

我使用 C#、Linq 和 DataGridView。

我像这样绑定我的网格。

```
var db = new DataClassesDataContext();

var results = db.Results;

.... much later on in the code..

dataGridView1.DataSource = results; 
```

它为列使用字段名称，这为我节省了大量时间，但是否可以使用字段描述，以便为我的客户提供更好的列名称。

我现在做的是在字段名称中使用 UNDERSCORES

*   ID
*   用户名
*   姓

所以在 ColumnAdded 事件中我做

```
 private void dataGridView1_ColumnAdded(object sender, DataGridViewColumnEventArgs e)
    {
        e.Column.HeaderText = e.Column.HeaderText.Replace("_"," ");

    } 
```

但它只是一个解决方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:21:52.463

如果您知道这些列将始终代表数据库中的特定字段，那么您始终可以在为 GridView 设置数据源后直接设置它们。

```
DataGridView.Columns[0].HeaderText = "Column 1";
DataGridView.Columns[1].HeaderText = "Column 2";
DataGridView.Columns[2].HeaderText = "Column 3";
DataGridView.Columns[3].HeaderText = "Column 4"; 
```

它总是取决于数据库中的命名约定与您希望如何表示`DataGridView`. 并不总是可以像您在示例中所做的那样操纵它们。

我注意到的一件事可能会丢失。如果您计划允许用户编辑 DataGridView 中的数据并提交对 的更改`DataContext`，则需要在这两个对象之间使用绑定源才能使其正常工作。

# excel - 添加到从 Excel 中的多个工作表创建图形的宏

> ID：13468809
> 
> 赞同：1
> 
> 时间：2012-11-20T07:58:11.670
> 
> 标签：excel, loops, vba

我有一个 excel 文件，其中有多张标签为 HI12981001.asvp、HI19281002.asvp、HI19281003.asvp 等。

每张纸中有 2 列，没有标题。我正在使用下面的宏来创建每张工作表中这两列数据的散点图。问题是我必须手动更改每张纸的系列名称。

我正在寻求帮助来构建这个宏，以便我可以让 excel 查看一个列表（即 HI12981001.asvp、HI19281002.asvp、HI19281003.asvp .. 并在主图表中为每个工作表或简单创建一个数据系列浏览整本书并创建一个系列名称与工作表名称相同的图表。

这是前三张纸的宏

```
Sub zx()
Dim wb As Workbook
Dim sh As Worksheet
Dim Chrt As Chart
Dim Srs As Series

Set wb = ActiveWorkbook
Set Chrt = wb.Charts.Add(After:=wb.Worksheets(wb.Worksheets.Count))
Chrt.ChartType = xlXYScatterSmoothNoMarkers
Chrt.Name = "SVP Profiles"

Set Srs = Chrt.SeriesCollection.NewSeries
Srs.Name = "HI12981001.asvp"
Set sh = wb.Sheets("HI12981001.asvp")
Srs.XValues = "=" & sh.Name & "!" & sh.UsedRange.Columns(2).Address
Srs.Values = "=" & sh.Name & "!" & sh.UsedRange.Columns(1).Address

Set Srs = Chrt.SeriesCollection.NewSeries
Srs.Name = "HI12981002.asvp"
Set sh = wb.Sheets("HI12981002.asvp")
Srs.XValues = "=" & sh.Name & "!" & sh.UsedRange.Columns(2).Address
Srs.Values = "=" & sh.Name & "!" & sh.UsedRange.Columns(1).Address

 Set Srs = Chrt.SeriesCollection.NewSeries
    Srs.Name = "HI12981003.asvp"
    Set sh = wb.Sheets("HI12981003.asvp")
    Srs.XValues = "=" & sh.Name & "!" & sh.UsedRange.Columns(2).Address
 Srs.Values = "=" & sh.Name & "!" & sh.UsedRange.Columns(1).Address

 End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:30:42.083

```
Option Explicit

Sub zx()

Dim wb As Workbook
Dim Chrt As Chart

   Set wb = ActiveWorkbook
   Set Chrt = wb.Charts.Add(After:=wb.Worksheets(wb.Worksheets.Count))
   Chrt.ChartType = xlXYScatterSmoothNoMarkers
   Chrt.Name = "SVP Profiles"

   'add the series
   AddNewSeries "HI12981001.asvp", wb, Chrt
   AddNewSeries "HI12981002.asvp", wb, Chrt
   AddNewSeries "HI12981003.asvp", wb, Chrt

End Sub

'Add new series to chart 'cht', using sheet 'sheetName'
'    in Workbook 'wb'
Sub AddNewSeries(sheetName As String, wb As Workbook, cht As Chart)

    Dim sh As Worksheet
    Dim Srs As Series

    Set Srs = cht.SeriesCollection.NewSeries
    Srs.Name = sheetName
    Set sh = wb.Sheets(sheetName)
    Srs.XValues = "=" & sh.Name & "!" & sh.UsedRange.Columns(2).Address
    Srs.Values = "=" & sh.Name & "!" & sh.UsedRange.Columns(1).Address

End Sub 
```

# apache-pig - ElephantBird 包构建失败：

> ID：13468811
> 
> 赞同：1
> 
> 时间：2012-11-20T07:58:20.717
> 
> 标签：apache-pig, elephantbird

我下载了 ElephantBird 源代码并尝试通过运行“mvn package”进行构建，但出现以下错误：

```
[ERROR] Failed to execute goal com.github.igor-petruk.protobuf:protobuf-maven-plugin:0.4:run (default) on project elephant-bird-core: Unable to find 'protoc' -> [Help 1] 
```

我使用的是 mvn 版本 3.0.3，我在 Mac 和 Ubuntu 中尝试过，但我得到了同样的错误。

编辑1：

感谢 Lorand 的评论，我通过升级协议缓冲区解决了上述问题。我还安装了 Thrift 0.7.0，但现在在大象猪构建期间我遇到了另一个编译失败：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:testCompile (default-testCompile) on project elephant-bird-pig: Compilation failure: Compilation failure: [ERROR] /root/elephant-bird/pig/src/test/java/com/twitter/elephantbird/pig/util/TestThriftNameWritableConverter.java:[12,26] invalid inferred types for W; inferred type does not conform to declared bound(s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:10:06.583

确保您之前已安装`Protocol Buffers`(apt-get install protobuf-compiler) 和`Thrift`. 您还必须在 Elephant-bird 的 pom.xml 中设置 Thrift 的位置。

请参阅：[https ://stackoverflow.com/a/12301954](https://stackoverflow.com/a/12301954)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T18:05:53.730

使用 Java 7 JDK 修复 Java 编译错误。

# ruby-on-rails - 从 imap 获取电子邮件

> ID：13468812
> 
> 赞同：1
> 
> 时间：2012-11-20T07:58:25.283
> 
> 标签：ruby-on-rails, ruby, imap

我正在尝试连接到 imap 服务器以获取电子邮件，我正在使用它

```
imap = Net::IMAP.new('example.com') 
```

这将创建一个 imap 实例。但是当我尝试使用身份验证时

```
imap.authenticate('LOGIN', 'username', 'password') 
```

我明白了`Plaintext authentication disallowed on non-secure (SSL/TLS) connections`。在 imap 实例类中，我看到 CAPABILITY 属性包含此

> LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE STARTTLS LOGINDISABLED

而不是 LOGIN 我使用了 STARTTLS 但这似乎是未知类型。

# javascript - 在android中使用javascript检测内部滚动

> ID：13468814
> 
> 赞同：1
> 
> 时间：2012-11-20T07:58:37.450
> 
> 标签：javascript, android, html, touch

> **可能重复：**
> [HTML 内的可滚动内容不会在 android 模拟器或手机中滚动](https://stackoverflow.com/questions/10276904/scrollable-content-inside-an-html-does-not-scroll-in-android-emulator-or-phone)

我有两个嵌套的 div，也有滚动条。它在浏览器中工作正常，但在触摸设备中使用它时，外滚动只能工作，而内滚动不能工作。

```
<div id='parentscroll' style='overflow: auto;height: 100px'> 
   something
   <div id='innerscroll' style='overflow: auto;height: 50px'>
     something
   </div>
</div> 
```

以上是我尝试滚动内部元素的编码，但父元素仅在触摸时滚动。

有没有办法滚动内部内容。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:38:02.580

Android 3.0 及更高版本支持`overflow:`, 在 < 3.0 上是另一回事。您可能会在使用 iScroll 之类的[polyfill](http://lab.cubiq.org/iscroll/examples/simple/)方面取得一些成功，但这确实是有代价的。在布局复杂的网站上很难实现，每次网站内容发生变化时都需要调用一个方法。内存使用也是一个问题：在已经功率不足的设备上，由于这些类型的 polyfill，性能可能会滞后。

[下面是](http://www.seabreezecomputers.com/tips/scroll-div.htm)手机上Scrollable DIV的对比

我认为这将帮助您找到最佳解决方案。我建议使用 iScroll 或[touchScroll](http://www.seabreezecomputers.com/tips/scroll-div.htm#touchscroll)来解决您的问题。

# database - 如何避免长事务造成表损坏

> ID：13468816
> 
> 赞同：0
> 
> 时间：2012-11-20T07:58:41.693
> 
> 标签：database, database-design, firebird

我有两个表 stok 和 stok_detail。表 stock 是表 stock_detail 的摘要。

stok 由 3 列组成：item_id、qty 和 cost

库存明细由 5 列组成：transaction_id、posting_date、item_id、数量和成本。

当有人编辑某些交易时，可能会重新计算成本。

例如，在日期 10 购买编辑交易。日期 10 之后的所有后续交易的成本将被重新计算。

我已经把所有的计算都放在了存储过程中。

问题是，如果有很多事务要重新计算，这个事务可能需要几个小时。并且在某些情况下，当事务运行时，电源会掉下来，有时会导致 stock_detail 表损坏。

**我的问题是：**

首先将计算放在临时表上会更好吗？例如stock_calc。当所有计算完成后，表 stock_detail 将被更新，从 stock_calc 中获取值。所以表 stock_detail 会在所有计算完成后更新。

因此，如果出现问题，我只需清空表 stock_calc。我知道当交易更新 stock_detail 时电源可能会下降。但概率将被最小化。这当然会花费更长的计算时间。但如果它更安全，我可能会考虑这种方法。

你们有什么感想？任何意见和想法将不胜感激。

还有1件事。如果断电，当我重新连接到数据库时，是否可以看到所有未提交和提交/回滚的事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:40:22.700

Firebird 在构建时考虑了[ACID](http://www.firebirdsql.org/file/documentation/papers_presentations/html/paper-fbent-acid.html)兼容性。这意味着即使在网络或电源（硬件除外）发生故障时，“理论上”您的数据库也应该保持其完整性。

然而，也有数据损坏的情况，尤其是硬件故障或 Firebird 引擎编程错误。您应该将您的 FB 版本升级到您的主要版本的最新稳定版本。

此外，将更改大量数据的事务保持多个小时处于活动状态并不是一个好的架构设计，请避免这种情况。

# objective-c - setNeedsDisplay 不会导致刷新 drawRect

> ID：13468825
> 
> 赞同：0
> 
> 时间：2012-11-20T07:59:23.570
> 
> 标签：objective-c, nsview, drawrect

我的项目是 Mac OS X 的某种计时应用程序，我想让 TimeCircle 中的 drawRect 刷新 myView。我知道我之前问过类似的问题。但是我的问题还没有解决，它与其他类似的主题不同。

到目前为止我所拥有的：

1.  一个 NSObject 类 TimeController，它启动一个计时器并以每秒为基础修改一些 NSTextEdits。

2.  一个 NSView 类 TimeCircle，它连接到一个自定义视图，我想用一个像手一样的时钟画一个圆圈来表示进度。

3.  在 TimeController.m 中导入 TimeCircle.h

4.  一个实例方法**drawRectOutsideWrapper**，我在计时器运行时发送一条消息。[TimeCircle drawRectOutsideWrapper:(float) seconds]; 这行得通。

drawRectOutsideWrapper 是这样的：

```
- (void) drawRectOutsideWrapper:(float) seconds {
   liveAngle= seconds;
   [self->myTimeCircleView setNeedsDisplay:YES];
} 
```

**drawRectOutsideWrapper**正确接收来自**TimeController**的消息！

问题是**[self->myTimeCircleView setNeedsDisplay:YES];** 不会触发**drawRect**。它什么也不做。出于测试目的，我集成了一个滑块**makeLiveLine**，它实际上做同样的事情并且**drawRect**被正确触发：

```
- (IBAction)makeLiveLine:(id)sender {
   liveAngle= [sender intValue];
   [self->myTimeCircleView setNeedsDisplay:YES];
} 
```

任何线索为什么一个人在做这项工作而一个人没有？

# java - 关于 XSS 的一些说明

> ID：13468829
> 
> 赞同：8
> 
> 时间：2012-11-20T07:59:41.923
> 
> 标签：java, javascript, jquery, xss

我碰巧读到了 XSS 以及如何避免它。根据我的阅读，我了解到我们需要输入过滤、正确处理应用程序代码和输出编码，以使 Web 应用程序在某种程度上是 XSS 安全的。浏览了几篇文章后，仍然存在几个疑问。

*   当我尝试**jQuery.text("untrusted_data")**或**element.text=untrusted_data**时，浏览器似乎完美地编码了内容，但我在其他地方读到客户端编码不应该被信任，你必须“***总是***”在服务器端进行编码。**为什么客户端编码被认为不安全？**

*   每当我尝试使用**jQuery.val(untrusted_data)**或**element.value=untrusted_data**设置值时，它似乎就足够安全了。那么它真的是 XSS 安全还是我错过了这里的任何情况？

*   另外，我碰巧在某处读到**jQuery.setAttribute(attrName,untrusted_data)**和**setAttribute(attrName,untrusted_data)**仅当**属性名称不包含基于 URL 上下文的属性**（src、href 等）或**事件处理程序**（ onClick、onMouseOver 等）。如果是这种情况，我应该如何使用 setAttribute("href",untrusted_data) 设置 href 属性？来自服务器端的 encodeForHtmlAttribute(untrusted_data) 是正确的方法吗？
*   我应该如何处理动态 html 创建。考虑下面的例子

> `<div id="divName1" onClick="copyData()">untrusted_data</div>` `<div id="divName2"></div>`

```
function copyData()
{
  var divValue = jQuery("#divName1").html();
  jQuery("#divName2").html(divValue);/XSS Here
} 
```

我想在这里实现的是从 divName1 中获取文本并将其粘贴到 divName2 的内容中。我上面写的代码存在 XSS 漏洞。我可以将其更改为

> jQuery("#divName2").text(divValue)

所以，这将确保编码，但据我了解，我们说客户端编码是不安全的，应该只使用服务器端编码。我应该如何在不使用客户端编码的情况下将其编写为 XSS 安全？我在这里有点困惑:(。请帮我解决这些疑问。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T08:10:45.980

这是一次很多问题。

> 为什么客户端编码被认为不安全？

只要正确且一致地完成，客户端编码就可以了。客户端编码通常具有较低的标准，因为它不需要担心字符编码级别的攻击，如 UTF-7 攻击。

> 每当我尝试使用 jQuery.val(untrusted_data) 或 element.value=untrusted_data 设置值时，它似乎就足够安全了。那么它真的是 XSS 安全还是我错过了这里的任何情况？

假设`untrusted_data`是一个字符串，并且正在设置其值的元素是流或块元素中的常规文本节点，那么你很好。如果分配值的节点是`<script>`元素或 URL、事件处理程序或样式属性节点或任何与`<object>`.

> 此外，我碰巧在某处读到 jQuery.setAttribute(attrName,untrusted_data) 和 setAttribute(attrName,untrusted_data) 仅当属性名称不包含基于 URL 上下文的属性（src、href 等）或事件处理程序（ onClick、onMouseOver 等）。如果是这样的话，

这是部分正确的。其他属性具有尖锐的边缘，例如与和、和`style`相关的许多事物。`<object>``<embed>``<meta>`

如果您对该属性不太了解，请不要将其暴露给不受信任的数据。通常安全的东西是包含文本内容的属性，`title`例如`dir=ltr`和`dir=rtl`。

一旦您处理了具有更复杂值的属性，您就面临攻击者利用诸如属性`-moz-binding`中的晦涩浏览器扩展的风险。`style`

> 似乎足够安全

在你踩到它们之前，地雷似乎是安全的。

你不能从“看起来很安全”的事情中得出很多结论。您确实需要查看它并了解可能出现的问题，并安排事情，以便只有在出现完美风暴时才会有风险（P（灾难）= P（failure0）* P（failure1） ) * ...) 并且当只有一件事情出错时，您没有风险 (P(disaster) = P(failure0) + P(failure1)*P(!failure0) + ...)。

> 我应该如何使用 setAttribute("href",untrusted_data) 设置 href 属性？

不要在没有将协议列入白名单的情况下这样做。

```
if (!/^https?:\/\//i.test(untrusted_data) && !/^mailto:/i.test(untrusted_data)) {
  throw new Error('unsafe');
} 
```

> 来自服务器端的 encodeForHtmlAttribute(untrusted_data) 是正确的方法吗？

否。HTML 编码传递给的值`setAttribute`是多余的，无助于保留任何安全属性。 `<iframe srcdoc>`可能是一个罕见的例外，因为如果我对最近规范更改的回忆是正确的，它的内容是 HTML。

> 我想在这里实现的是从 divName1 中获取文本并将其粘贴到 divName2 的内容中。我上面写的代码存在 XSS 漏洞。

不要乱用 HTML。浏览器的`.innerHTML`getter 有问题，有时会导致漏洞，例如反引号在 IE 中充当值分隔符。只需将节点从一个克隆到另一个。像下面这样的东西应该这样做：

```
var div1 = $('#divName1');
for (var child = div1[0].firstChild(); child; child = child.nextSibling) {
  $('#divName2').append([child.cloneNode(true)]);
} 
```

> 我可以将其更改为
> 
> ```
> jQuery("#divName2").text(divValue) 
> ```

如果您想要的只是文本内容，那很好。

# objective-c - 在 NSPopUpButton 中显示文件夹

> ID：13468838
> 
> 赞同：4
> 
> 时间：2012-11-20T08:00:31.610
> 
> 标签：objective-c, macos, directory, nspopupbutton

我想在我的 NSPopUpButton 中显示带有图标的文件夹。用于选择文件路径的弹出窗口很常见。我是新用户，不能发图片。你可以看到，例如在 U Torrent->preferences->directories

请提供详细的答案，因为我对此完全陌生。

非常感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T05:14:54.017

对于`NSMenuItem`菜单中的每个，您需要设置适当的图像，调用[`setImage:`](https://developer.apple.com/library/mac/#documentation/cocoa/reference/applicationkit/classes/nsmenuitem_class/reference/reference.html)

简而言之，您需要准备菜单项，将其附加到菜单，并将后者附加到弹出按钮，如下所示：

```
NSPopUpButton *yourButton = [[NSPopUpButton alloc] init];
NSMenu *yourMenu = [[NSMenu alloc] init];

NSMenuItem *menuItem = [[NSMenuItem alloc] initWithTitle:@"some label" action:nil keyEquivalent:@""];
NSImage *iconImage = [[NSWorkspace sharedWorkspace] iconForFile:@"yourFilePath"];
[iconImage setSize:NSMakeSize(16,16)];

[menuItem setImage:iconImage];
[yourMenu insertItem:menuItem atIndex:0];
[yourButton setMenu:yourMenu]; 
```

注意[`iconForFile:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html)in的使用`NSWorkspace`，它允许您显示在 Finder 中使用的相同图标。

有关更多示例，您可以查看 Apple 提供的此示例代码：[ButtonMadness](https://developer.apple.com/library/mac/#samplecode/ButtonMadness/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004430)

# .net - WPF 将一个元素放在另一个元素之下，然后重新排序

> ID：13468841
> 
> 赞同：0
> 
> 时间：2012-11-20T08:00:40.100
> 
> 标签：.net, wpf

如何将一个元素放在另一个元素之下，然后对它们重新排序（例如 ZIndex）？

我现在所做的是使用 Grid ，其中两个元素具有相同的 Grid.Column 和 Grid.Row 但其中一个是可见的，另一个不可见。问题是我需要制作放置在另一个下的控件的“屏幕截图”。但是如果控件的可见性是隐藏的，你就不能这样做。

所以我需要一种在不使用可见性的情况下将一个控件置于另一个控件之下的方法。

**更新。**关于截图。`controlToConvert`我正在通过 RenderTargetBitmap 制作它，如果隐藏它就不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:03:27.507

使用画布而不是网格作为控件父级。现在您可以使用`Canvas.ZIndex`属性重新排序它们，例如通过`Canvas.SetZIndex();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:35:01.047

除了 Florian Gl 的回答，您可以将它们保存在`Grid`（或其他布局面板）中，并改用`Panel.ZIndex`附加属性。

# iphone - 如何以时间延迟连续显示标签

> ID：13468844
> 
> 赞同：2
> 
> 时间：2012-11-20T08:00:40.847
> 
> 标签：iphone, ios

我实现了我的程序如下。

```
- (IBAction) toolbarOption:(UIBarButtonItem *)sender
{
    switch ([sender tag]) {

        case 0:

            [self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:0] animated:YES];
        break;

        case 1:

            for (int i=0; i< [array count]; i++)
            {
            label02.hidden = YES;
            label03.hidden = YES;
            label01.text = [array objectAtIndex:i];

            order.text = [NSString stringWithFormat:@"%i of %i", i+1,[array count]];

            NSDictionary *pronunciation = [[SingletonHandle getHandle] getPronunciationPlist];

            label02.text = [pronunciation objectForKey:label01.text]; 
            label03.textColor = [UIColor redColor];
            label03.text = [meaning objectForKey:label01.text];

            [self performSelector:@selector(showButton:) withObject:nil afterDelay:2.0];

            NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:nil selector:@selector(showButton:) userInfo:pronunciation repeats:NO];
            [timer fire];                
            }

        break;

        default:
        break;
}

-(IBAction)showButton:(id)sender
{
    label02.hidden = NO;
    label03.hidden = NO;
    nextButton.hidden = NO;
    previousButton.hidden = NO;
    order.hidden = NO;
}
... 
```

我想显示`label.text`int i 随着时间延迟而变化，但它不起作用。它只是向我展示了最后一个`label.text`. 我想`label.text`使用`NSTimer`. 先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:08:49.687

您可以使用 NSTimer 作为

```
theTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f 
        target:self 
        selector:@selector(updateTimer:) 
        userInfo:nil 
        repeats:YES];` 
```

您可以在 func 中更新您的标签

```
- (void)updateTimer:(NSTimer *)theTimer {
    //static int countTime = 0; 
    countTime += 1;
    _timeOver=_timeOver-1;
    NSString *s = [[NSString alloc] initWithFormat:@"Time left: %d", (_timeOver)];
    self._myTimeCounterLabel.text = s;
    [s release];
    if (_timeOver==0) {
        [self checkIfGameOver];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:38:39.600

尝试这个，

```
NSTimer *aTimer = [NSTimer timerWithTimeInterval:(3.0) target:self selector:@selector(updateTimer:) userInfo:nil repeats:YES];
    NSRunLoop *runner = [NSRunLoop currentRunLoop];
    [runner addTimer:aTimer forMode: NSDefaultRunLoopMode]; 
```

定时器动作

```
- (void)updateTimer:(NSTimer *)theTimer {
    //static int countTime = 0; 
    countTime += 1;
    _timeOver=_timeOver-1;
    NSString *s = [[NSString alloc] initWithFormat:@"Time left: %d", (_timeOver)];
    self._myTimeCounterLabel.text = s;
    [s release];
    if (_timeOver==0) {
        [self checkIfGameOver];
    }
} 
```

# android - PA4AD：第一个示例的 Eclipse 问题；清洁项目成功

> ID：13468846
> 
> 赞同：0
> 
> 时间：2012-11-20T08:00:47.023
> 
> 标签：android, eclipse

我正在阅读 Reto Meier 精彩的 Professional Android 4 Application Development 中的第一个 TodoList 示例，但是遇到了一个小问题，我无法解决。这是代码：

```
package com.paad.todolist;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.EditText;
import android.widget.ListView;

public class ToDoListActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_to_do_list);

        // Get references to UI widgets
        ListView myListView = (ListView) findViewById(R.id.myListView);
        final EditText myEditText = (EditText) findViewById(R.id.myEditText);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_to_do_list, menu);
        return true;
    }
} 
```

这与使用 main.xml 的书略有不同。后面的 Eclipse 会创建 activity_to_do_list.xml，它的内容与本书相同。

我最初的问题是 R.id.myListView 和 R.id.myEditView 没有被识别，我尝试了 Project | 清洁来解决这个问题。这使事情变得更糟，现在“R 无法解析为变量”。我怀疑干净删除生成的代码。

我在清单中也有一个错误：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.paad.todolist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".ToDoListActivity"
            android:label="@string/title_activity_to_do_list" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

@string/title_activity_to_do_list 不起作用，这并不奇怪，因为 clean 似乎也删除了 res\values\string.xml 。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:37:17.060

您必须创建 res/values/strings.xml 并在其中使用以下格式放置这些字符串：

如果布局、res 不正确，则 R 没有正确生成（或没有生成），这就是其他事情开始显示错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:08:49.443

您需要创建 string.xml 文件。在其中，您需要为 title_activity_to_do 列表定义您的字符串。您的清单文件从 string.xml 中获取值。像这样：

```
<resources>

    <string name="app_name">APP NAME</string>
    <string name="hello_world">Hello world!</string>
    <string name="menu_settings">Settings</string>
    <string name="title_activity_to_do">MY NAME</string>

</resources> 
```

当您的引用错误得到修复后，再次清理项目并且您的“R 无法解析为变量”错误应该得到解决。

# testing - 半监督学习的测试数据

> ID：13468848
> 
> 赞同：3
> 
> 时间：2012-11-20T08:00:59.380
> 
> 标签：testing, machine-learning, training-data

半监督学习使用一组标记数据（L）训练一个模型来预测一组未标记数据（U），然后将新的标记数据（L'）和原始标记数据（L）分组为完整的标记数据数据。

我想问一下如何提取测试数据。

1.  我应该从 (L union L') 中提取测试数据
2.  我应该从 (L) 中提取测试数据

哪一个是对的？

如果测试数据是从(L union L')中提取出来的，结果没有意义，因为L'中的答案可能是错误的……？

==================================================== ======== 编辑新

我还有一个想法......

3.我应该在开始时将标记数据（L）拆分为训练数据（L_train）和测试数据（L_test）。

然后用L_train训练一个模型，用它来预测一组未标记的数据（U），然后对预测结果（L'）和L_train进行分组。

并且，使用 (L_train union L') 训练模型以在 L_test 上进行测试。

1,2,3哪个是对的？感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T09:51:11.110

你训练你的分类器`L`。您可以首先执行交叉验证以适合某些方法参数`P`。使用参数，您可以从标记的数据`P`构建模型。然后，您使用该模型来标记未标记的数据。你加入来自（对分配的班级最有信心）的例子。然后你重复这个过程，直到所有的例子都被分类。`M``L``M``U``U``L`

-编辑-

我认为最合适的方法是第三种。但是我可能理解不正确，所以就这样吧。

你分裂`L`到`L_train`和`L_test`。你训练你的分类器`L_train`，你也使用这个分类器来分类`U`（按照我上面描述的方法）。从标签的联合中`U`，`L_train`您构造一个新的分类器，并用它进行分类`L_test`。这些分类中的差异可用于评估措施（分类准确度，...）。

# python - 如何在文件中导出 cookie 以与 python scrapy 一起使用

> ID：13468850
> 
> 赞同：1
> 
> 时间：2012-11-20T08:01:29.567
> 
> 标签：python, cookies, scrapy

我想使用scrapy和python使用我的cookie自动登录SO。但我不知道

1.  如何将cookie导出为什么格式以便我可以将它与scrapy一起使用
2.  像这样的stackoverflow在chrome中列出了许多cookie

现在使用哪个登录 `__qca_ _utma_ _utmb_ _utmc __utmz gauthedsgt usrLocal storage`

3.该文件中的内容以及如何在 Scrapy 代码中使用该文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:15:31.113

当您向服务器创建第一个请求时，您应该传递您的 cookie，如[本页](http://doc.scrapy.org/en/latest/topics/request-response.html)所述：

```
request_with_cookies = Request(url="http://www.example.com",
                           cookies={'currency': 'USD', 'country': 'UY'}) 
```

如果您不希望哪个 cookie 对身份验证很重要，请使用所有这些或尝试使用其中一个。还要检查是否启用了[CookiesMiddleware](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#cookies-mw)以在进一步的请求中保留您的 cookie。

如果您想使用存储在文件中的 cookie，我建议您编写该文件的简单解析器并将文件内容转换为 python dict。只要您的文件是简单的纯文本格式，这将很容易。

# visual-studio - 在具有多个用户的 Visual Studio 中使用 MSDeploy/Web Deploy 作为发布方法

> ID：13468852
> 
> 赞同：8
> 
> 时间：2012-11-20T08:01:45.090
> 
> 标签：visual-studio, webdeploy

是否可以使用来自多个开发人员 PC 的 Web 部署？

当我们尝试这样做时，似乎我们需要在其他人想要进行部署时重新发布所有内容。

我们做错了什么，有没有办法解决这个问题，或者在我们的场景中推荐的方法是什么？

我知道从中心位置部署是一个更好的解决方案，但不幸的是，目前这不是一个选择。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T15:25:51.237

您无法从项目中执行此操作，但编辑 Visual Studio MSBuild 脚本以将其打开（适用于所有 Web 部署）很简单。就是这样：

1.  打开`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets`
2.  找到`MSDeployPublish`目标
3.  在该任务中，找到对`VSMSDeploy`任务的调用（第 4376 行左右）
4.  将`UseChecksum="true"`属性添加到`VSMSDeploy`任务调用

您也可以按照相同的步骤为部署预览执行此操作，但在步骤 2 中查找 MSDeployFilePreview 目标而不是 MSDeployPublish 任务。

确保在进行更改后重新启动 VS 以确保正确获取它们。

**更新**：MS 添加了将 UseChecksum 标志传递给 VS 2013 的功能。为此，请将以下属性添加到 .pubxml 文件中：

```
<MSDeployUseChecksum>true</MSDeployUseChecksum> 
```

更多信息可以在[这里找到](http://blogs.msdn.com/b/webdev/archive/2013/10/30/web-publishing-updates-for-app-offline-and-usechecksum.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:47:31.233

使用 Visual Studio，没有。当前的构建脚本无法为 MSDeploy 提供必要的标志。

如果您使用`cmd`包中生成的文件来执行部署，您可以附加`-useChecksum`到命令行，它将使用校验和比较而不是最后修改日期。

# java - Java Contract-First Web 服务中的“minOccurs”和生成的类型

> ID：13468854
> 
> 赞同：4
> 
> 时间：2012-11-20T08:01:53.603
> 
> 标签：java, web-services, jaxb

我在 Java 中使用合约优先生成的 Web 服务有问题。在我的模式中，我有这样的东西：

```
<element maxOccurs="1" minOccurs="1" name="GUID" type="xs:long" /> 
```

生成具有如下字段的类：

```
protected long GUID; 
```

现在，当我尝试触发我的 web 服务时，当不为 GUID 输入任何值时，新 java long 的默认值设置为 (0)，并且不会引发异常。当然这不是好的行为，因为我应该需要 guid 元素。另一方面，当我将架构元素更改为以下内容时：

```
<element maxOccurs="1" minOccurs="0" name="GUID" type="xs:long" /> 
```

（从逻辑的角度来看这是不正确的，因为需要 GUID 元素）生成的类字段如下所示：

```
{protected Long GUID; } 
```

现在，当在 Web 服务执行中未设置 GUID 时，GUID 值为 null，我可以检查我是否从 java 代码中抛出异常。

因此，我想请教您如何使用 minOccurs="0" 生成的具有受保护的 Long GUID 的类；（或至少在未设置此值时出现异常）

我正在使用 glassfish 2.1.1 和 SopaUI 提供的 JAXB 来执行 Web 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:36:12.347

我能够找到解决方案。非常简单：我必须添加 nillable="true" ：

```
<element maxOccurs="1" minOccurs="1" name="GUID" type="xs:long" nillable="true" /> 
```

现在生成的类中的文件类型是 Long ！
顺便提一句。这表明即使没有人回答问题，描述您的问题也是好的（也许它与“橡皮鸭调试”方法中的类似机制？:)）

# android - CachingHttpClient 不消耗后端 HttpResponse 实体导致应用程序冻结

> ID：13468858
> 
> 赞同：0
> 
> 时间：2012-11-20T08:02:04.807
> 
> 标签：android, httpclient

我正在将 HttpClient 4.2.1 与 PoolingClientConnectionManager 一起使用，并且我发现我的应用程序将在尝试获取 http 连接后开始挂起。如果您未能使用 HttpEntity，则此症状似乎是一个常见错误，因为 4.2.1 依赖于关闭 Content 的流以将其返回到池的连接。

这是我组装 HttpClients 及其池的方式

```
HttpClient standardClient = null;
HttpClient cachedClient = null;
PoolingClientConnectionManager connectionManager = null;

protected synchronized HttpClient getStandardClient() {
  if ( standardClient == null ) {
    connectionManager = new PoolingClientConnectionManager();
    connectionManager.setMaxTotal(2);
    connectionManager.closeIdleConnections(120, TimeUnit.SECONDS);
    standardClient = new DecompressingHttpClient( new DefaultHttpClient (connectionManager));
    Log.i(tag, "Creating ConnectionManager and standard http client");
  }

  return standardClient;
}

protected synchronized HttpClient getCachedClient() {
  if ( cachedClient == null ) {
    CacheConfig cacheConfig = new CacheConfig();
    cacheConfig.setMaxObjectSize( 512*1024 );
    cacheConfig.setMaxCacheEntries( 10 );

    cachedClient = new CachingHttpClient(getStandardClient(),
                                         getCacheStorage(),
                                         cacheConfig);
    Log.i(tag, "Creating CachingHttpClient");
  }

  return cachedClient;
} 
```

如您所见，我有两个客户。包装标准客户端的缓存 http 客户端。

现在我发现，如果我删除 cachedClient 并且只使用 standardClient，我不会遇到池挂起和孤立连接的任何问题。

查看 CachingHttpClient 的源代码，它似乎没有使用底层实体。有没有其他人经历过这个？

任何人都可以看到我的代码中的任何错误以及我是如何配置和使用 HttpClient 的吗？有谁知道我可以在我的代码中做些什么来正确地让后端实体被正确使用？

顺便说一句，这是我使用 http 客户端并使用它们的方式......

```
HttpClient httpClient = cacheOkay ? getCachedClient() : getStandardClient();  
HttpResponse response = httpClient.execute(request, localContext);
HttpEntity resEntity = response.getEntity();  

int responseStatus = response.getStatusLine().getStatusCode();

byte[] responseBody = EntityUtils.toByteArray(resEntity);
EntityUtils.consume(resEntity); 
```

此外，对于那些想知道这是在 Android 上的人，我使用 JarJar 将 HttpClient 4.2.1 重新打包为备用包结构，因此它不会与 Android 附带的旧 HttpClient 类冲突。但尽管重新打包代码是 100% 4.2.1。我只是提到这一点是为了避免在 Android 上运行 HttpClient 4.2.1 时出现任何冲突建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:14:47.590

因此，在解决了这个问题后，我非常确信这是 HttpCommons 中的一个错误。该错误似乎是 HttpCachingClient 没有正确使用来自后端 HttpClient 的 HttpEntity。在我们的例子中，由于这是一个池化客户端，因此可以防止连接每次返回池。

我的工作是确保 HttpCachingClient 关闭来自后端客户端的流。

这是用于创建缓存客户端的修改代码

```
 protected synchronized HttpClient getCachedClient() {
      if ( cachedClient == null ) {
        CacheConfig cacheConfig = new CacheConfig();
        cacheConfig.setMaxObjectSize( 512*1024 );
        cacheConfig.setMaxCacheEntries( 10 );
        cachedClient = new CachingHttpClient(getStandardClient(),
                                             new HeapResourceFactory() {
                                               @Override
                                               public Resource generate(String requestId,InputStream instream,InputLimit limit) throws IOException {
                                                    try {
                                                      return super.generate(requestId, instream, limit);
                                                    }
                                                    finally {
                                                      instream.close();
                                                    }
                                                }
                                             },
                                             application.getCacheStorage(),
                                             application.getCacheConfig());
        Log.i(tag, "Creating CachingHttpClient");
    }

    return cachedClient;
} 
```

所以基本上我将 HeapResourceFactory 子类化并添加了 instream.close() 以确保它使用该后端实体。

# windows-store-apps - 错误 CS0117：“System.Type”不包含“GetTypeCode”的定义

> ID：13468864
> 
> 赞同：4
> 
> 时间：2012-11-20T08:02:28.210
> 
> 标签：windows-store-apps

有人可以帮我学习如何阅读和浏览 msdn 文档吗？

这在 .net 4.0+ 中不支持吗？

```
using System;

...

public static bool IsPositive( object Value, bool ZeroIsPositive )
{
    switch ( Type.GetTypeCode( Value.GetType() ) )
    {
        case TypeCode.SByte: 
```

我发现很难通过文档找到自己的方式并知道什么特别适用于 Windows 商店应用程序......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:05:21.063

`Type.GetTypeCode()`在完整的 .NET 应用程序和非应用商店可移植类库中受支持，但*在*Windows 应用商店应用程序中不受支持。

如果您查看[`Type`.NET 4.5 中的类文档](http://msdn.microsoft.com/en-us/library/42892f65.aspx)，您会在 Windows 应用商店应用程序支持的*所有*成员旁边看到一个绿色购物袋。

您还可以查看每个成员的页面底部。例如，[`Type.GetArrayRank`](http://msdn.microsoft.com/en-us/library/system.type.getarrayrank.aspx)有这个：

> **版本信息**
> **.NET Framework**
> 支持：4.5、4、3.5、3.0、2.0、1.1、1.0
> **.NET Framework Client Profile**
> 支持：4、3.5 SP1
> **Portable Class Library**
> 支持：Portable Class Library
> **.NET for Windows Store apps**
> 支持: 视窗 8

...而[`Type.GetTypeCode`](http://msdn.microsoft.com/en-us/library/system.type.gettypecode.aspx)有：

> **版本信息**
> **.NET Framework**
> 受以下版本 支持：4.5、4、3.5、3.0、2.0、1.1、1.0
> **.NET Framework Client Profile**
> 受以下版本支持：4、3.5 SP1
> **可移植类库**
> 受以下版本 支持：可移植类库

（注意没有提到 Windows 应用商店。）

# tridion - 在 tridion 中发布 Content Broker DB

> ID：13468866
> 
> 赞同：0
> 
> 时间：2012-11-20T08:02:40.140
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我正在使用 SDL Tridion 2011 我想知道如何将内容发布到 Broker DB（SQL 数据库）和二进制资产（图像、Flash、CSS 和 JS）发布到文件流。

我们查看并尝试修改 cd_storage_conf.xml 并找到以下文件系统

```
<Storage Class="com.tridion.storage.filesystem.FSDAOFactory" Type="filesystem" Id="defaultDataFile"
 defaultFilesystem="false"><Root Path=" C:\applications\WebName\Publising_Data"/> 
```

因此，类似地如何引用 Brocker DB，我们使用的是 SQL 数据库

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T08:26:31.547

我建议您先阅读如何从此[链接](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_005JJFGGGD8858699HHFHJF)（需要登录）配置存储，然后提出具体的问题/问题。

你也可以通过谷歌搜索这个，你可以找到很多相同的文章。

为 SQL 服务器和文件系统使用以下存储类型

```
<Storage Type="filesystem" Id="LocalFileSystem_01" defaultFilesystem="true" defaultStorage="true"
  Class="com.tridion.storage.filesystem.FSDAOFactory">
  <Root Path="STORAGE_PATH" />
</Storage> 
```

然后根据您的要求定义项目类型，这里默认是 SQL 服务器，我已经覆盖了二进制文件和页面到文件系统

```
 <Item typeMapping="Page" cached="CACHE_BEHAVIOR" storageId="LocalFileSystem_01" />
<Item typeMapping="Binary" itemExtension=".EXT" cached="CACHE_BEHAVIOR" storageId="LocalFileSystem_01" />

</ItemTypes> 
```

# stanford-nlp - 如何使用斯坦福 NLP 解析器获取依赖树

> ID：13468872
> 
> 赞同：15
> 
> 时间：2012-11-20T08:03:02.120
> 
> 标签：stanford-nlp

我怎样才能得到如下图的依赖树。我可以得到纯文本的依赖关系，也可以借助dependencysee工具得到依赖关系图。但是以单词为节点，以依赖为边的依赖树呢？非常感谢！

![标准斯坦福依赖项（折叠和传播）](../Images/c696fa55e620dd338272eafd8fce09ee.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T21:28:35.530

这些图形是使用[GraphViz](http://www.graphviz.org)生成的，这是一个开源图形绘图包，最初来自 AT&T Research。您可以找到一种将 a 转换为可由/GraphViz呈现的输入语言格式的方法`toDotFormat()`。目前，没有提供此功能的命令行工具，但使用该方法非常简单。`edu.stanford.nlp.trees.semgraph.SemanticGraph``SemanticGraph``dot``dot`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-02T05:00:33.447

以下是您将如何做到这一点（**在 python 中**）

**安装所有需要的依赖项（OS X）：**

```
# assuming you have java installed and available in PATH
# and homebrew installed

brew install stanford-parser
brew install graphviz
pip install nltk
pip install graphviz 
```

**代码：**

```
import os
from nltk.parse.stanford import StanfordDependencyParser
from graphviz import Source

# make sure nltk can find stanford-parser
# please check your stanford-parser version from brew output (in my case 3.6.0) 
os.environ['CLASSPATH'] = r'/usr/local/Cellar/stanford-parser/3.6.0/libexec'

sentence = 'The brown fox is quick and he is jumping over the lazy dog'

sdp = StanfordDependencyParser()
result = list(sdp.raw_parse(sentence))

dep_tree_dot_repr = [parse for parse in result][0].to_dot()
source = Source(dep_tree_dot_repr, filename="dep_tree", format="png")
source.view() 
```

这导致：

[![在此处输入图像描述](../Images/d8d5ef3b38ccefb9c0bd3ed240568860.png)](https://i.stack.imgur.com/bTsSV.png)

我在阅读[Text Analytics With Python](https://rads.stackoverflow.com/amzn/click/com/148422387X)时使用了它：**CH3**，很好读，如果您需要有关基于依赖的解析的更多信息，请参考。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T22:54:30.443

我现在正在处理类似的事情。这不是一个理想的解决方案，但它可能会有所帮助。如上面的答案所述，使用 toDotFormat() 获取点语言的解析树。然后使用众多工具之一（我正在使用 python-graph）读取这些数据并将其呈现为图片。此链接上有一个示例[http://code.google.com/p/python-graph/wiki/Example](http://code.google.com/p/python-graph/wiki/Example)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-26T18:23:55.157

我也非常需要它；现在很高兴看到我们也有一个在线工具。使用这个： http: [//graphs.grevian.org/graph](http://graphs.grevian.org/graph)（这里提到：http: [//graphs.grevian.org/](http://graphs.grevian.org/)）

步骤是：

1.  解析句子：

    ```
    sent = 'What is the step by step guide to invest in share market in india?'
    p = dep_parser.raw_parse(sent)
    for e in p:
        p = e
        break 
    ```

2.  打印`.to_dot()`格式为：

    ```
    print(p.to_dot()) 
    ```

3.  将输出复制粘贴到[http://graphs.grevian.org/graph](http://graphs.grevian.org/graph)并按下 Generate 按钮。

您应该看到所需的图表。

# c# - 如何自动滚动到包装面板中的特定项目？

> ID：13468878
> 
> 赞同：2
> 
> 时间：2012-11-20T08:03:53.583
> 
> 标签：c#, scroll, wrappanel

目前我在一个大型软件项目中合作，但我遇到了一个我试图实现的好功能的问题。

问题是，我不知道如何自动滚动到某个用户可以选择的特定项目。包装面板用作项目控件中的项目面板模板。

为了更好地理解，代码如下：

```
<ItemsControl ItemsSource="{Binding SomeData}">
   <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>
         <WrapPanel />
      </ItemsPanelTemplate>
   </ItemsControl.ItemsPanel>
   <ItemsControl.ItemTemplate>
      <DataTemplate>
         <SomeChart DataContext="{Binding }" Focusable="True" />
      </DataTemplate>
   </ItemsControl.ItemTemplate>
</ItemsControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:40:51.660

您提到了`ItemsControl`，从 ItemsControl 派生的大多数控件都有一个**[ScrollIntoView](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.scrollintoview.aspx)**方法来滚动 Listbox/Datagrid 到当前选定的项目。

例如：

```
listBox1.ScrollIntoView(listBox1.SelectedIndex); 
```

或者

```
dataGrid1.ScrollIntoView(dataGrid1.SelectedIndex); 
```

[这是ListView](http://dotnet-experience.blogspot.com.es/2010/12/wpf-listview-scrollintoview.html)的另一种解决方案。

**更新：** 带有 Wrappanel 的列表框

```
<ListBox x:Name="myList">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel ItemHeight="150" ItemWidth="150"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</Listbox> 
```

# nhibernate-mapping - 如何解决重复的 SQL 查询映射

> ID：13468882
> 
> 赞同：2
> 
> 时间：2012-11-20T08:04:33.913
> 
> 标签：nhibernate-mapping, fluent-nhibernate-mapping

这是我第一个使用 NHibernate 的项目，我遇到了映射问题。我的域类映射是使用 FluentNhibernate 流畅映射完成的，这些映射运行良好。

但是现在我需要映射一个存储过程，这意味着我需要依赖`hbm.xml`文件。所以我添加了一个`NamedQueries.hbm.xml`这样的名称：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" >
  <sql-query name="GetLatestTrackings">
    <return-scalar column="TrackingId" type="Int32" />
    <![CDATA[
      exec Core.GetLatestTrackings
    ]]>
  </sql-query>
</hibernate-mapping> 
```

流畅的映射如下所示：

```
 FluentConfiguration configuration = Fluently
            .Configure()
            .Database(MsSqlConfiguration
                          .MsSql2008
                          .ConnectionString(c => c.FromConnectionStringWithKey("Con")))
            .Mappings(m =>
                {
                    m.HbmMappings.AddFromAssembly(assemblyWithMappings);
                    m.FluentMappings.AddFromAssembly(assemblyWithMappings);
                });

        var nhibConfig = configuration.BuildConfiguration();

        SchemaMetadataUpdater.QuoteTableAndColumns(nhibConfig);

        return configuration.BuildSessionFactory(); 
```

但在运行时我得到以下异常：

> *DuplicateMappingException, Duplicate query / sql-query mapping GetLatestTrackings*

目前我正在考虑使用 ADO.NET 进行存储过程调用，因为我完全没有想法通过 NHibernate 映射它们。

# jsch - 如何通过Jsch中的通道传递变量？

> ID：13468883
> 
> 赞同：2
> 
> 时间：2012-11-20T08:04:54.067
> 
> 标签：jsch

这是我的部分代码：

```
Channel channel_1 = session.openChannel("exec");                                       
int t=5;  
((ChannelExec)channel_1).setCommand("echo value : $(t)>> test.sh");  
channel_1.connect();channel_1.disconnect(); 
```

我希望远程机器中的脚本“test.sh”写为“值：5”

但我得到的输出是脚本中的“值：”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T14:48:44.450

```
String command = "echo value : " + t + " >> test.sh";
((ChannelExec)channel_1).setCommand(command); 
```

# ruby - 狂欢错误 SQLite3::ConstraintException: PRIMARY KEY 必须是唯一的

> ID：13468890
> 
> 赞同：0
> 
> 时间：2012-11-20T08:05:15.303
> 
> 标签：ruby, ruby-on-rails-3, spree

我目前正在做一个狂欢项目。当我尝试运行`rake db:seed` 它时，它会显示以下错误。

```
rake aborted
SQLite3::ConstraintException: PRIMARY KEY must be unique: INSERT INTO "spree_countries"       ("name", "iso3", "iso", "iso_name", "id", "numcode") VALUES ('Chad', 'TCD', 'TD', 'CHAD', 39, 148)

Tasks: TOP => db:load_dir 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T03:38:52.897

这是因为种子已经加载。第一次是在你跑步`rails g spree:install`或`spree install`.

您是否有理由要加载它们两次？

# php - PHP - 如何强制执行子方法

> ID：13468895
> 
> 赞同：0
> 
> 时间：2012-11-20T08:05:25.733
> 
> 标签：php, wordpress, class, plugins

我正在使用 wordpress，并且我扩展了一个插件类。

```
class A {
     public function languages_menu(){ ... print "en"; }
}

class B extends A {
     public function languages_menu(){ ... print "en-EN"; }
} 
```

我的插件执行父方法和子方法：

***结果***：

```
en
en-EN 
```

我尝试只执行 Child 方法。知道我不能改变父方法

我还没有找到解决方案。你能帮助我吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:07:58.400

您`languages_menu()`在 B 类中的方法可能包含`parent::languages_menu()`，注释该行以查看它是否产生您正在寻找的结果。

# asp.net - 具有带有滚动选项的固定标题的中继器

> ID：13468899
> 
> 赞同：0
> 
> 时间：2012-11-20T08:05:57.780
> 
> 标签：asp.net, header, repeater

在 asp.net 中，我需要放置具有固定标题的滚动转发器。这里我需要使用单独的 css 或 wat。或者我需要在 div 中将中继器修复为自动。或者向我提供任何解释这部分的链接？？？？帮我

中继器在 div 标签中

```
<div style="overflow: auto; height: 200px;">
<asp:Repeater ID="id_repSearch" runat="server">
                                            <HeaderTemplate>
                                                <table style="border: 1px solid #465c71;" cellpadding="5" width="100%">
                                                    <tr style="background-color: #465c71; color: White" align="center">
                                                        <td width="20%" align="center">
                                                            Firstname
                                                        </td>
                                                        <td width="20%" align="center">
                                                            Lastname
                                                        </td>
                                                        <td width="40%" align="center">
                                                            Emailid
                                                        </td>
                                                        <td width="35%" align="center">
                                                            Mobileno
                                                        </td>
                                                    </tr>
                                                </table>
                                            </HeaderTemplate>
 </div> 
```

我应该为标题单独编写任何 css 类并仅在重复器中显示列吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:18:51.787

您可以使用asp.net 面板控件来实现垂直或水平滚动。

只需删除标题模板，上面的面板就可以创建自己的标题行。

```
<table> 
<tr>
<td>
 <table style="border: 1px solid #465c71;"     cellpadding="5" width="100%">
                                                <tr style="background-color: #465c71; color: White" align="center">
                                                    <td width="20%" align="center">
                                                        Firstname
                                                    </td>
                                                    <td width="20%" align="center">
                                                        Lastname
                                                    </td>
                                                    <td width="40%" align="center">
                                                        Emailid
                                                    </td>
                                                    <td width="35%" align="center">
                                                        Mobileno
                                                    </td>
                                                </tr>
                                            </table>
<asp:Panel runat="server" Id="scrollPanel" Height="200px;" Scrollbar="Vertical">
<asp:Repeater ID="id_repSearch" runat="server">
<itemteplate>
<table style="border: 1px solid #465c71;"     cellpadding="5" width="100%">
                                                <tr style="background-color: #465c71; color: White" align="center">
put your repeating controls here
</tr>
</table>
/itemtemplate>
</asp:Panel>
</td>
</tr>
</table> 
```

# android - 如何知道在特定设备上注册了哪个 Gmail id？

> ID：13468907
> 
> 赞同：0
> 
> 时间：2012-11-20T08:06:52.007
> 
> 标签：android, email

朋友我正在制作一个安全应用程序，当用户单击忘记密码时，我想将他的密码发送到与 Google play 帐户关联的他的 G-mail 帐户。所以问题是，我怎样才能知道他的 G-mail ID？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:13:58.963

您可以使用 AccountManager.getAccounts 或 AccountManager.getAccountsByType 来获取设备上所有帐户名称的列表。

```
Pattern emailPattern = Patterns.EMAIL_ADDRESS; // API level 8+
Account[] accounts = AccountManager.get(context).getAccounts();
for (Account account : accounts) {
    if (emailPattern.matcher(account.name).matches()) {
        String possibleEmail = account.name;
        ...
    }
} 
```

需要 GET_ACCOUNTS 权限：

使用权限 android:name="android.permission.GET_ACCOUNTS" />

您还可以使用[https://developers.google.com/gmail/android/上的代码](https://developers.google.com/gmail/android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:16:23.287

这是获取与 Google Play 关联的 G-mail 帐户的代码片段

```
private String getEmailID() {
    AccountManager manager = (AccountManager) getSystemService(ACCOUNT_SERVICE);
    Account[] list = manager.getAccounts();
    String gmail = null;

    for (Account account : list) {
        if (account.type.equalsIgnoreCase("com.google")) {
            gmail = account.name;
            break;
        }
    }
    return gmail;
} 
```

还要在 AndroidManifest.xml 中添加此权限

```
 <uses-permission android:name="android.permission.GET_ACCOUNTS" > 
```

# jquery - 获取页面上的所有 html，除了具有特定类的那些

> ID：13468912
> 
> 赞同：2
> 
> 时间：2012-11-20T08:07:12.950
> 
> 标签：jquery, html, export, checked

我的目标是获取页面上的所有 HTML，除了那些未选中复选框的 HTML 并将其发布到脚本中。

我通过复选框的值来做到这一点，该值是元素上的一个类。例如，我的复选框在表格的一行中，并且...

我想要的所有内容都在#page_content 中。由于内容不知道它的容器 - 也就是说复选框不知道它在表格内部所以不能环绕它，我认为更容易获取页面上的所有内容并删除未选中的元素. 这样我的标记是正确的。

我正在使用 jQuery 来执行此操作，但我不知道如何正确处理它。我想到的方法是获取所有未选中的复选框并将它们的值存储到变量“未选中”中。

我有一个 outerHTML() 函数，可以让我获取元素，它是 html。

然后我

```
$('#export').click(function(e) {
        e.preventDefault();
        var uc, unchecked = [], html;
        $('input:checkbox:not(:checked)').each(function() {
            unchecked.push("." + $(this).val());
        });
        uc = unchecked.join(',') + ",.actions,input,button,.btn";
        console.log(uc);
        $('#page_content').find('*').not(uc).each(function() {
            html += $(this).outerHTML();
        });
        console.log(html);
        // $('#export-data').val(html);
        // console.log($('#export-data').val());
    }); 
```

然后到最后，我得到了所有 HTML 的字符串。

更新：做了更多的工作，我得到了一些东西，但它是混合标签。此外，我想剥离输入和按钮以及其他类，所以我认为我做得对，但输出有很多重复项。嗯……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:32:13.217

嗨，这是一个如何做到这一点的例子。在示例中，它将返回除绿色类之一之外的所有元素。

代码已准备好复制粘贴并运行

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <style>
    DIV{
        width:200px;
        height:200px;
        display:inline-block;
    }
    .black{
        background:black;
    }
    .yellow{
        background:yellow;
    }
    .red{
        background:red;
    }
    .green{
        background:green;
    }
    </style>
</head>
<body>
    <div id="container">
        <div id="1" class="yellow"></div>
        <div id="2" class="black"></div>
        <div id="3" class="red"></div>
        <div id="4" class="green"></div>
    </div>
</body>
<script>
    $(document).ready( function (){
        var elements = $('*');
        var filterClass = 'green';
        elements = $.grep(elements,function(elementOfArray, indexInArray){
            clas = $(elementOfArray).attr('class');
            if(typeof(clas) ===  'undefined'){
                console.log('undef');
                return elementOfArray
            }
            if(clas.indexOf(filterClass) == -1){
                return elementOfArray;
            }
        });
        console.log(elements);
    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:26:43.243

好的，使用我的方法，我发现它更清晰，更 jquery-ish :)

```
var filter, html, el, unchecked = [], additional, elements;
$('input:checkbox:not(:checked)').each(function() {
    unchecked.push("#" + $(this).val());
});
// We remove checkboxes, cb colums, inputs, etc
additional = ".actions,input,button,.btn,textarea,.cb";
if (unchecked.length) {
    filter = unchecked.join(',') + "," + additional;
} else {
    filter = additional;
}
var $elements = $('#page_content').clone();
$elements.find(filter).remove();
html = $elements.outerHTML(); 
```

# asp.net - 用于 ASP.NET 应用程序的任何现成 CSS 包

> ID：13468914
> 
> 赞同：1
> 
> 时间：2012-11-20T08:07:42.710
> 
> 标签：asp.net, css, pack

嗨，我想知道是否有任何现成的 CSS 包可以在 ASP.NET 应用程序中使用。可以为网页中的不同 ASP.NET 控件添加样式，而不是我自己编写 CSS 或将样式与控件显式链接。

也许一些 jQuery 的东西也附带了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:17:48.507

Bootstrap 适用于 asp.net 网络表单。它适用于 css 选择器。在 asp.net 中，您有`CssClass`课程。因此，您所做的就是将 Bootstrap 类分配给`CssClass`asp.net 控件。当你有点高级时，你可以开始在客户端处理事件，而不是使用回发到服务器，例如当你可以使用分配给 html 的 JavaScript 时，为什么在获取 Datagrid 或 Dataview 中的数字列的总数时还要使用回发按钮然后可以遍历行并计算总数。

# javascript - 如何逐个删除文本框中的字符？

> ID：13468915
> 
> 赞同：1
> 
> 时间：2012-11-20T08:07:42.770
> 
> 标签：javascript, html, cordova

我从用户那里得到一个输入，例如他的电话号码是这样的：

HTML：

```
 <input id="number_input"  type="text" size="12" maxlength="19" /> 
```

JavaScript：

```
 var i = 0;
    var phone_number = [];
    document.getElementById('number_input').value+=digit;
    phone_number[i]= digit ;
    i = i+1; 
```

并允许用户像这样删除当前输入：

```
 function delete_num ()
  {
     document.getElementById('number_input').value=' ';
     phone_number.length=0;
     return false;
  } 
```

但是在这种情况下，我要删除所有输入数据，如何通过激活 delete_num 函数将输入删除一个？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:13:43.427

这应该像 [Backspace] 按钮一样工作，从 number_input 字段中删除最后一个字符。

```
function delete_num ()
{
    var field = document.getElementById('number_input');
    field.value = field.value.slice(0, -1); //Extract from index 0 to the before-last character
    phone_number.pop(); //Remove the last element from the phone number. It's length is maintained by js itself.
    return false; //What's this for?
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T08:15:10.223

```
function delete_num() {
  var input, num;
  input = document.getElementById('number_input');
  num = input.value;
  input.value = num.slice(0,num.length-1);
  return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T08:13:44.013

假设这是您需要的：

```
function delete_num ()
  {
     var val = document.getElementById('number_input').value;
     val = val.susbtr(0,val.length - 1);
     phone_number.length = val.length;
     document.getElementById('number_input').value = val;
     return false;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T08:14:04.283

假设您正在重新创建退格功能......

```
function delete_num()
{
   var text = document.getElementById('number_input').value;
   document.getElementById('number_input').value = text.substring(0, text.length - 2);
   phone_number.length = 0; //not sure what this is...
   return false;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-20T08:36:11.687

试试这个：

```
var input = document.getElementById('number_input');
input.value = input.value.slice(0, -1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-21T07:16:29.883

```
 function RemoveVal(events) {
           var objectControl = $find("<%= txtDescription.ClientID %>");
           var c = objectControl.get_value();
           if (c[0] == "%") {
             var shortenedString = c.substr(c[0],'');
            $find("<%= txtDescription.ClientID %>").set_value(shortenedString.toString());
           }
       } 
```

# c# - 为什么 EF 在 Time 和 DateTime 值中修剪毫秒

> ID：13468921
> 
> 赞同：1
> 
> 时间：2012-11-20T08:08:22.387
> 
> 标签：c#, linq, entity-framework, datetime

我有从 SQL Server 2008 R2 Express 生成的 ADO.NET 实体数据模型，在我的表中我有时间或日期时间值。在数据网格中，此字段以毫秒为单位正确显示，但在使用我的 ObjectSet<> 的 LINQ 查询中，我失去了毫秒。为什么？

```
var query = from data in ctx.Data
            join member in ctx.Members
            on data.MemberId equals member.MemberId
            where member.StepId == (int)RepStepCombo.SelectedValue
            orderby data.Time ascending
            select new { 
                data.LaneNum, 
                member.MemberName, 
                data.Time, 
                mill = data.Time.Millisecond
            };

StreamWriter sw = new StreamWriter("text.txt");
foreach (var data in query)
{
    sw.WriteLine(data.LaneNum + " " + 
                 data.MemberName + " " + " millisec: " +
                 data.Time.ToString("HH:mm:ss.fff") + " " + 
                 data.mill);
}
sw.Close();
sw.Dispose(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:57:29.150

你确定时间是日期时间而不是小日期时间？SmallDateTime 具有较小的分辨率，并且不是毫秒精度。

使用 Sql2008 和 EF 从日期时间字段获取毫秒数没有问题：

```
var members = from s in myEntites.TableName
              select s;

            foreach (TableEntry entry in members)
            {
                String time = ((DateTime)entry.date).ToString("HH:mm:ss.fff");
                Console.WriteLine(time);
            } 
```

对于时间，转换为 TimeSpan：

```
 var members = from s in myEntites.TableName
                  where s.myTime != null
                  select s;

    foreach (Entity myEntity in members)
    {
        String time = ((TimeSpan)myEntity.myTime).Milliseconds.ToString();
    } 
```

“在我的机器上工作！” :)

# java - 如果在每次迭代后返回其原始状态，我可以安全地改变我正在迭代的数组吗？

> ID：13468922
> 
> 赞同：9
> 
> 时间：2012-11-20T08:08:22.433
> 
> 标签：java, loops

我正在用 Java 为游戏编写一个极小极大算法，并且为了提高速度，在我递归地处理决策树时改变游戏状态。但是，这涉及修改我正在迭代的移动列表。

```
public int minimax(int currentDepth) {
    if (currentDepth == depth || board.legalMoves.isEmpty()) {
        int eval = board.eval();
        board.takeBack(1);
        return eval;
    }
    int x = Integer.MIN_VALUE;
    for (Tuple move : board.legalMoves) {
        board.move(move);
        x = max(x, -1*minimax(currentDepth+1));
        board.takeBack(1);
    }
    return x
} 
```

该`board.move()`方法会改变`ArrayList legalMoves`，但`takeBack(1)`会将其恢复到原始状态。这会导致任何问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T08:21:33.103

一句话，是的。

您没有指定`board.legalMoves`. 你说它是数组，但它不可能，因为你正在调用`isEmpty()`它。因此我怀疑你的意思是`ArrayList`。如果是这样的话，[文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)就很清楚了：

> 此类的`iterator`和`listIterator`方法返回的迭代器是快速失败的：如果列表在创建迭代器后的任何时候在结构上被修改，除了通过迭代器自己的`remove`或`add`方法之外的任何方式，迭代器将抛出一个`ConcurrentModificationException`. 因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。

我看到了两种解决方法：

1)**避免结构修改。**换句话说，可以更改元素的*值*，但不能添加/删除元素。

2）**迭代`ArrayList`使用索引：**

```
for (int i = 0; i < board.legalMoves.size(); i++) {
    Tuple move = board.get(i);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:52:53.570

是的，你可以，但它很危险。我建议将 minmax 算法移到一个新类中，并将要分析的数据传递给构造函数。

现在，您可以在构造函数中复制**一次**数据，然后方法可以对副本进行操作。该算法现在可以按照它希望的任何方式修改数据，它不会影响游戏的其他部分或其他线程。此外，如果您有任何问题，它们必须来自一个类中的代码。

总体目标是为代码的每个修改部分提供一份数据副本，以减少可能导致麻烦的依赖关系。

# selenium - 如何使用 Selenium 从检查元素中获取 div 的值？

> ID：13468923
> 
> 赞同：0
> 
> 时间：2012-11-20T08:08:45.363
> 
> 标签：selenium, selenium-rc

我正在尝试获取 div 模式弹出对话框的返回值。但是，我无法通过使用

```
selenium.GetAttribute("id=lblPopUpMessageType"); 
```

我希望实现的是，当我能够获得价值时，我就可以了解是否完成了哪些进展。

例如，代码如下：

```
 <span id="lblPopUpMessageType">error</span>  (If i get the "error" value i know it is fail) 
or 
 <span id="lblPopUpMessageType">success</span> (This mean success) 
```

好吧，我无法通过使用上述功能。我也试过 Selenium.GetElementIndex().ToString() 但没有用。我是 Selenium 的新手，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:52:29.020

使用`selenium.getText("xpath to ur span")`而不是使用 selenium.getAttribute。

As`getAttribute()`方法给出任何给定标签内的属性值。

# google-chrome - 将数据从内容脚本传递到选项页面

> ID：13468926
> 
> 赞同：0
> 
> 时间：2012-11-20T08:08:57.250
> 
> 标签：google-chrome

是否有任何简单的方法可以将数据（简单字符串）从 Google Chrome 扩展程序中的内容脚本传递到同一扩展程序的选项页面？

我的背景页面不是持久的，我想保持这种状态。

我都尝试了`window.postMessage`and `chrome.extension.sendMessage`，但不知何故，适用于背景页面的方法不适用于选项页面。我是否忽略了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:59:49.493

解决方案是从内容脚本向后台页面发送消息，将消息保留在那里，然后从选项对话框向后台页面发送消息并检索它。两者都使用`chrome.extension.sendMessage`.

# github - “在 Windows 中克隆”按钮 - 它是如何工作的？

> ID：13468927
> 
> 赞同：6
> 
> 时间：2012-11-20T08:09:09.230
> 
> 标签：github

我很好奇按钮的工作原理。你能解释一下当我点击“在 Windows 中克隆”按钮时，它是如何知道在我的机器上打开本地应用程序（GitHub）的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T10:37:39.663

看看[这个](https://github.com/mabako/gitextensions/commit/d9437b6791d5a150e154974de00958304c650151)[GitExtension](https://github.com/gitextensions/gitextensions)补丁：它在 HKCR 中注册了该操作

```
 <Component Id="Protocol.github_windows" Guid="*">
    <RegistryKey Key="github-windows" Root="HKCR">
      <RegistryValue Value="URL: Github for Windows Protocol" Type="string" />
      <RegistryValue Name="URL Protocol" Value="" Type="string" />
    </RegistryKey>
    <RegistryKey Key="github-windows\DefaultIcon" Root="HKCR">
      <RegistryValue Value="[INSTALLDIR]GitExtensions.exe" Type="string" />
    </RegistryKey>
    <RegistryKey Root="HKCR" Key="github-windows\shell"/>
    <RegistryKey Root="HKCR" Key="github-windows\shell\open"/>
    <RegistryKey Root="HKCR" Key="github-windows\shell\open\command">
      <RegistryValue Value="&quot;[INSTALLDIR]GitExtensions.exe&quot; %1" Type="string" />
    </RegistryKey>
  </Component> 
```

它补充说：

```
if (args[1].StartsWith("git://"))
{
    args = new string[]{args[0], "clone", args[1]};
}
if (args[1].StartsWith("github-windows://openRepo/"))
{
     args = new string[]{args[0], "clone", args[1].Replace("github-windows://openRepo/", "")};
} 
```

[GitHub for Windows](http://windows.github.com/)将采用类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T22:06:15.373

它在 TortoiseGit 应用程序中非常相似。

这是TortoiseGit的[github-windows 协议处理程序](https://github.com/TortoiseGit/TortoiseGit/blob/f237eadfdac44bbea02d4d5e590d445b74ecf185/src/TortoiseProc/TortoiseProc.cpp#L284)

```
newCmd.Format(_T("/command:clone /url:\"%s\" /hasurlhandler"), (LPCTSTR)url); 
```

它将[注册表项添加](https://github.com/TortoiseGit/TortoiseGit/blob/3100281fb3dfe7a32c037d6e3dde709fefb94b3e/src/TortoiseGitSetup/StructureFragment.wxi#L775)到注册处理程序。

```
<RegistryValue Root="HKLM" Key="Software\Classes\github-windows\shell\open\command" Value="&quot;[INSTALLDIR]bin\TortoiseGitProc.exe&quot; /urlhandler:&quot;%1&quot;" Type="string" /> 
```

# java - WebContext.forwardToString() 的替代方案

> ID：13468929
> 
> 赞同：0
> 
> 时间：2012-11-20T08:09:30.807
> 
> 标签：java, jsp, servlets, dwr

问题听起来像这样：在我的应用程序中，我必须下车 java DWR 技术。所以它基本上会更多 jquery。:) 现在我正在尝试找到一种方法来替换

```
WebContext.forwardToString() 
```

有人知道使用`HttpServletRequest`/`Response`或某个`HttpUtil`类来替换它的方法吗？

或者将我将在控制器中填充的 jsp 文件外部化？

# java - 监测应用方法

> ID：13468931
> 
> 赞同：0
> 
> 时间：2012-11-20T08:09:38.683
> 
> 标签：java, mysql, websocket, monitoring

*   我正在使用 websocket 技术（Java Websocket）开发一个监控应用程序。

*   当数据插入我的数据库（Mysql）表时，我计划在网页中显示记录。

*   此 Mysql 服务器与我的生产服务器隔离，仅用于该监控服务。

    ```
    As an example -: when one record get inserted in to database table. I want to show that data in my wabpage as soon as it get inserted. 
    ```

*   我了解 websocket 是如何工作的，我正在尝试以这种方式处理它。

*   我将在我的代码中有一个无限循环 [while(true)] 来检查当前行数和以前的行数，如果它增加了，我将从 db 中提取新插入的数据并通过我的 websocket 连接来更新网页。

如果您能就我的方法提出建议，我将不胜感激。无论我是在做正确的事情还是为此目的有任何替代的好方法/技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:17:08.363

与其在繁忙的等待循环中浪费 CPU，您可能应该[定义一个触发器来通知您的进程](http://dev.mysql.com/doc/en/faqs-triggers.html#qandaitem-B-5-1-10)新插入的数据。

或者，您可以使用消息传递层来提交更新，并且不同的处理程序（例如，一个将更新存储在数据库中，另一个将更新推送给 Web 用户）注册自己以接收和处理消息。

除此之外，你的设计对我来说听起来很合理。

# google-bigquery - 加入 Google Bigquery

> ID：13468933
> 
> 赞同：7
> 
> 时间：2012-11-20T08:09:50.557
> 
> 标签：google-bigquery

我知道正在努力改进 Bigquery 上的 Join 功能，而不是在这里咆哮，但如果无法正确使用 Join，将很难将“Terabyte”数据集分析为“广告”。

好的，回到问题，我有两张表，一张是 600 Megs，另一张是 50Megs，我确实尝试进行连接，但我得到了一个关于必须留下更小的表的错误。我做了一些研究，发现`Bigquery`如果两个表都大于 7MB，那么它们是否都很大？

因此，根据我在网上找到的一些建议，我确实选择了较小表的相关数据集并将其保存在一个新表中，新数据集是 12MB 和两列 600K 行。然后我再次尝试了我的查询，但我仍然收到同样的错误：

```
Query Failed : Error: Large table cdrs_test.geoIP_Left must appear as the leftmost table in a join query 
```

geoIP_Left 是 12 Megs，另一个表是 600Megs..

这可以以某种方式解决还是我被淘汰了？如果是这样，有人知道我可以用来分析支持连接的大数据集的任何其他服务吗？

编辑：这是实际的查询；

```
SELECT COUNT(results.cc_card) AS count,
       sum(results.sessiontime) AS time, 
       geoIP_Left.place AS place 
FROM cdrs_test.cdrs_2010_5 AS results 
JOIN cdrs_test.geoIP_Left AS geoIP_table 
  ON results.cc_card = geoIP_table.vcard 
WHERE results.sessiontime > 0 AND results.countryName Contains 'India' 
GROUP BY place; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T19:07:10.763

您可以将此查询表示为仅引用`cdrs_test.geoIP_Left`您感兴趣的列的子选择。请参见[此处](https://developers.google.com/bigquery/docs/query-reference#smalljoin)的第二个示例。

```
SELECT
  COUNT(results.cc_card) AS count,
  sum(results.sessiontime) AS time, 
  geoIP_table.place AS place 
FROM
  cdrs_test.cdrs_2010_5 AS results 
JOIN
  (SELECT place, vcard FROM cdrs_test.geoIP_Left)
AS
  geoIP_table 
ON
  results.cc_card = geoIP_table.vcard 
WHERE
  results.sessiontime > 0 AND results.countryName CONTAINS 'India' 
GROUP BY
  place; 
```

您也可以简单地运行多个查询 - 请注意，您可以将查询结果显式保存为命名表，并在以后的查询中使用该表。

最后，另一种选择是预先加入数据，例如使用 MapReduce 转换管道或BigQuery ETL 合作伙伴之一提供的[ETL 工具。](https://developers.google.com/bigquery/docs/third_party_tools)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-22T10:23:07.743

正如菲利普在评论中提到的那样。BigQuery 允许将修饰符“EACH”加入 JOIN 以允许 2 个大表的 JOIN。从查询参考页面 -

> 正常的 JOIN 操作要求右侧表包含少于 8 MB 的压缩数据。EACH 修饰符是一个提示，通知查询执行引擎 JOIN 可能引用两个大表。EACH 修饰符不能用于 CROSS JOIN 子句。

如果可能，使用不带 EACH 修饰符的 JOIN 以获得最佳性能。当表大小对于 JOIN 来说太大时，请使用 JOIN EACH。

# java - wicket-auth-roles 和 spring-security-cas-client 之间的身份验证集成问题

> ID：13468934
> 
> 赞同：1
> 
> 时间：2012-11-20T08:10:16.513
> 
> 标签：java, spring-security, wicket-1.5

我的一个 Wicket 项目有问题。我使用的 wicket 版本是 1.5.7 版本，带有 wicket-auth-roles（相同版本）。

我正在尝试获取 CAS 服务器集成；为此，我正在尝试使用 spring-security-cas-client (3.0.7.RELEASE)，但 CAS 身份验证根本不起作用。在这个项目中，我已经在使用 spring-security-core (3.1.0.RELEASE)、spring-security-config 和 spring-security-ldap 并且效果很好。

我遇到的问题是当我第一次访问 Wicket 页面时。通常我必须接受 CAS 审讯；但尽管如此，我的自定义authenticatedWebApplication 的方法“getSignInPageClass”（wicket-auth-roles）被调用，我被自动转发到我的登录页面（而且我根本没有收到任何 CAS 调用）。

有人已经遇到过这类问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:41:54.153

我刚刚经历了同样的问题。为了让它工作，我让 Wicket 重定向到 CAS，然后 CasAuthenticationFilter 验证令牌并处理身份验证。我不知道这是否是最好的解决方案，但我使用 RequestMapper 来处理 AuthenticatedWebSession 登录。

Spring 安全配置

```
<!-- https://cwiki.apache.org/WICKET/spring-security-and-wicket-auth-roles.html -->
<http use-expressions="true" auto-config="true" entry-point-ref="casEntryPoint">
    <intercept-url pattern="/**" />

    <custom-filter ref="casFilter" position="CAS_FILTER"/>
</http> 
```

在 AuthenticatedApplication 中覆盖 restartResponseAtSignInPage

```
/**
 * Stores original Url and redirects to CAS login for authentication. CAS will redirect back to this
 * service using the service parameter. 
 */
@Override
public void restartResponseAtSignInPage() {
    Session.get().setAttribute("originalUrl", RequestCycle.get().getRequest().getOriginalUrl());
    // This will be the URL back to the Spring CAS filter
    String service = "service=https%3A%2F%2F" + casServiceHost + "%2Fapp%2Flogin";
    throw new RedirectToUrlException("https://" + casServerHost + "/cas/login?" + service);
} 
```

制作一个 IRequestMapper 来处理 AuthenticatedWebSession 登录和重定向。

```
@Override
public IRequestHandler mapRequest(Request request) {
    logger.info("CasAuthMapper mapping {}", request.getUrl());
    // The authentication will have been handled by Spring's CasAuthenticationFilter
    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
    // ... Do whatever you need to do here. I added a simple method to my web session to delegate to signIn(boolean). 
```

# forms - jquery序列化方法不适用于表单

> ID：13468935
> 
> 赞同：1
> 
> 时间：2012-11-20T08:10:23.370
> 
> 标签：forms, jquery, jqueryform

我正在尝试使用 jquery ajax 提交表单。

```
<form id="from_cts" action="#" method="post">
    <div>
      <div class="">
          <textarea id="post_dis_contents" name="" cols="" rows=""></textarea>
          <input id="post_dis" type="button" value="Post" />
      </div>
    </div>
</form>​ 
```

我的jq代码是这样的：

```
$(function() {
  $("#post_dis").click(function() {
    var cts = $("#post_dis_contents").val();
    if (cts) {
        var p = $("#from_cts").serialize();
        //var k = $('#from_cts').find('textarea').serialize();
        alert(p);

    } else {
        alert('null');
    }
 });
});​ 
```

它只是简单地包含一个文本区域，我尝试提醒它的值，但那里什么都没有，然后我删除了所有 div 元素，仍然没有。

能否请您给我一些建议，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:15:45.183

给你的名字`textarea`它会工作。

```
<textarea id="post_dis_contents" name="textarea1" cols="" rows=""></textarea> 
```

# c++ - 没有源文件路径的 log4cxx 日志？

> ID：13468936
> 
> 赞同：1
> 
> 时间：2012-11-20T08:10:24.907
> 
> 标签：c++, log4cxx

log4cxx 模式`%l`将输出源文件名及其到日志的路径，如果源文件位于较深的目录中，则使用绝对路径编译时，阅读起来会很不舒服。

```
2012-11-20 15:59:14,184 0x7f7ae90e27c0 TRACE fogs.common (/home/jw/fogs/d_common/net/inc/amf3conn.hpp:158) - Entering setCallbackObjBuffer 
```

有没有办法只`amf3conn.hpp:158`在日志中输出，以缩短日志行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:35:10.600

我不认为这是开箱即用的。根据[API docs](https://svn.apache.org/repos/asf/logging/site/trunk/docs/log4cxx/apidocs/classlog4cxx_1_1_pattern_layout.html)，您可以使用`%l`或`%F`，但`%F`仅丢弃行号并仍打印路径。

您有两种选择：

*   子类`PatternLayout`化并实现您自己的位置转换处理，丢弃路径并仅使用文件名
*   `%.20l`或者使用长度修饰符来设置位置的最大长度，就像`inc/amf3conn.hpp:158`你的情况一样。如果您选择最长的源文件名的长度，则在任何情况下都将获得完整的文件名（可能以部分路径开头）

# wordpress - 无法使用 WP_Query() 循环浏览帖子 bbPress

> ID：13468941
> 
> 赞同：0
> 
> 时间：2012-11-20T08:10:40.723
> 
> 标签：wordpress, bbpress

以下内容开箱即用，页面需要永远加载，它会创建大量 Apache 进程并疯狂消耗内存和 CPU

```
<?php

/**
 * Template Name: Custom forum index
 */

get_header();

?>
            <div id="content" role="main">

                <?php //do_action( 'bbp_template_notices' ); ?>

                <?php
                $args = array(
                   'post_type' => 'forum',
                   'post_status' => 'publish',
                   //'meta_key' => 'age',
                   'orderby' => 'title',
                   'order' => 'ASC',
                   // 'meta_query' => array(
                        // array(
                           // 'key' => '_bbp_topic_count'
                        // ),
                        // array(
                            // 'key' => '_bbp_reply_count'
                        // ),
                        // array(
                            // 'key' => '_bbp_last_active_time'
                        // ),
                        // array(
                            // 'key' => '_bbp_last_topic_id'
                        // )
                    // )
                );
                $query = new WP_Query($args);

                while ($query->have_posts()) : the_post(); ?>

                    <div id="forum-front" class="bbp-forum-front">
                        <h1 class="entry-title"><?php the_title(); ?></h1>
                        <div class="entry-content">

                            <?php //the_content(); ?>

                            <?php //bbp_get_template_part( 'content', 'archive-forum' ); ?>

                        </div>
                    </div><!-- #forum-front -->

                <?php endwhile; ?>

            </div><!-- #content -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

潜在的动机是我正在尝试创建一个自定义论坛索引页面，论坛根据其名称按字母顺序排列。奇怪的是，bbPress 并没有这样的功能

正如您在上面看到的，我尝试使用 WP_Query() 来循环访问类型为“forum”的帖子。这种方法可能出了什么问题？我需要在这里对 WP_Query() 做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:15:11.140

由于使用 custom `WP_Query`，您需要在关键字`wp_reset_query();`之后指定。[根据此处](http://codex.wordpress.org/Function_Reference/wp_reset_query)`endwhile;`的 Wordpress 文档，“*此函数破坏了在自定义循环上使用的先前查询。应在循环之后调用函数以确保条件标签按预期工作。* ”

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T04:45:41.060

出了什么问题`the_post()`。应该是`$query->the_post()`；反而。

所以正确的循环是

```
<?php  
//...  
while ($query->have_posts()) : $query->the_post(); ?>

                <div id="forum-front" class="bbp-forum-front">
                    <h1 class="entry-title"><?php the_title(); ?></h1>
                    <div class="entry-content">

                        <?php //the_content(); ?>

                        <?php //bbp_get_template_part( 'content', 'archive-forum' ); ?>

                    </div>
                </div><!-- #forum-front -->

            <?php endwhile; ?> 
```*

# wpf - 在代码隐藏中将 DrawingImage 用于矩形

> ID：13468945
> 
> 赞同：0
> 
> 时间：2012-11-20T08:10:48.280
> 
> 标签：wpf

我在 XAML 中创建了一个 DrawingImage 并将其设置为一个矩形

XAML：

```
<DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Geometry="M 126.889,143.333L 250.889,143.333L 250.889,267.333L 126.889,267.333L 126.889,143.333 Z ">
                        <GeometryDrawing.Brush>
                            <LinearGradientBrush StartPoint="0,0.0215053" EndPoint="1,1">
                                <GradientStop Color="#FFFFFFFF" Offset="0.00847458" />
                                <GradientStop Color="#FF949063" Offset="0.800847" />
                            </LinearGradientBrush>
                        </GeometryDrawing.Brush>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="#FF85825F" Geometry="F1 M 162.428,200.167C 162.428,184.671 175.003,172.085 190.509,172.085C 206.005,172.085 218.591,184.671 218.591,200.167C 218.591,215.683 206.005,228.249 190.509,228.249C 175.003,228.249 162.428,215.683 162.428,200.167 Z " />
                    <GeometryDrawing Brush="#FF524F40" Geometry="F1 M 160.598,199.025C 160.598,183.529 173.174,170.943 188.68,170.943C 204.176,170.943 216.762,183.529 216.762,199.025C 216.762,214.541 204.176,227.107 188.68,227.107C 173.174,227.107 160.598,214.541 160.598,199.025 Z " />
                    <GeometryDrawing Brush="#FF6D6B51" Geometry="F1 M 253.277,270.359C 250.065,261.438 253.089,268.956 244.895,249.789C 242.347,243.406 234.03,235.753 223.176,235.753L 163.176,235.753C 152.342,235.753 144.025,243.406 141.488,249.789C 138.94,256.153 135.803,261.438 132.631,270.359" />
                    <GeometryDrawing Brush="#FF524F40" Geometry="F1 M 249.41,266.847C 246.198,257.926 249.222,265.444 241.028,246.278C 238.48,239.894 230.163,232.241 219.309,232.241L 159.309,232.241C 148.475,232.241 140.158,239.894 137.621,246.278C 135.074,252.641 131.936,257.926 128.764,266.847" />
                    <GeometryDrawing Brush="#FFFFFFFF" Geometry="M 115.999,132.639L 260.777,132.639L 260.777,301.028L 115.999,301.028L 115.999,132.639 Z M 126.208,142.884L 250.208,142.884L 250.208,266.884L 126.208,266.884L 126.208,142.884 Z ">
                        <GeometryDrawing.Pen>
                            <Pen LineJoin="Round" Brush="#FFC0C1C3" />
                        </GeometryDrawing.Pen>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing> 
```

我想将其设置为后面的代码。

我使用此代码但不显示 DrawingImage 。

代码隐藏

```
 GradientStopCollection collection = new GradientStopCollection();
            collection.Add(new GradientStop((Color)ColorConverter.ConvertFromString("#FFFFFFFF"), 0.00847458));
            collection.Add(new GradientStop((Color)ColorConverter.ConvertFromString("#FF949063"), 0.800847));
            LinearGradientBrush gbrush = new LinearGradientBrush(collection, new System.Windows.Point(0, 0.0215053), new System.Windows.Point(1, 1));

            var dGroup = new DrawingGroup();
            using (DrawingContext dc = dGroup.Open())
            {
                dc.DrawGeometry(gbrush, null, Geometry.Parse("M 126.889,143.333L 250.889,143.333L 250.889,267.333L 126.889,267.333L 126.889,143.333 Z "));
                dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF85825F")), null, Geometry.Parse("F1 M 162.428,200.167C 162.428,184.671 175.003,172.085 190.509,172.085C 206.005,172.085 218.591,184.671 218.591,200.167C 218.591,215.683 206.005,228.249 190.509,228.249C 175.003,228.249 162.428,215.683 162.428,200.167 Z "));
                dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF524F40")), null, Geometry.Parse("F1 M 160.598,199.025C 160.598,183.529 173.174,170.943 188.68,170.943C 204.176,170.943 216.762,183.529 216.762,199.025C 216.762,214.541 204.176,227.107 188.68,227.107C 173.174,227.107 160.598,214.541 160.598,199.025 Z "));
                dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF6D6B51")), null, Geometry.Parse("F1 M 253.277,270.359C 250.065,261.438 253.089,268.956 244.895,249.789C 242.347,243.406 234.03,235.753 223.176,235.753L 163.176,235.753C 152.342,235.753 144.025,243.406 141.488,249.789C 138.94,256.153 135.803,261.438 132.631,270.359"));
                dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF524F40")), null, Geometry.Parse("F1 M 249.41,266.847C 246.198,257.926 249.222,265.444 241.028,246.278C 238.48,239.894 230.163,232.241 219.309,232.241L 159.309,232.241C 148.475,232.241 140.158,239.894 137.621,246.278C 135.074,252.641 131.936,257.926 128.764,266.847"));
                dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FFFFFFFF")), new Pen(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FFC0C1C3")), 0) { LineJoin = PenLineJoin.Round }, Geometry.Parse("M 115.999,132.639L 260.777,132.639L 260.777,301.028L 115.999,301.028L 115.999,132.639 Z M 126.208,142.884L 250.208,142.884L 250.208,266.884L 126.208,266.884L 126.208,142.884 Z "));
            }

            return new DrawingImage(dGroup); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:35:07.353

你可以做类似的事情

```
 private DrawingBrush GetDBrush()
    {
        GradientStopCollection collection = new GradientStopCollection();
        collection.Add(new GradientStop((Color)ColorConverter.ConvertFromString("#FFFFFFFF"), 0.00847458));
        collection.Add(new GradientStop((Color)ColorConverter.ConvertFromString("#FF949063"), 0.800847));
        LinearGradientBrush gbrush = new LinearGradientBrush(collection, new System.Windows.Point(0, 0.0215053), new System.Windows.Point(1, 1));

        var dGroup = new DrawingGroup();
        using (DrawingContext dc = dGroup.Open())
        {
            dc.DrawGeometry(gbrush, null, Geometry.Parse("M 126.889,143.333L 250.889,143.333L 250.889,267.333L 126.889,267.333L 126.889,143.333 Z "));
            dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF85825F")), null, Geometry.Parse("F1 M 162.428,200.167C 162.428,184.671 175.003,172.085 190.509,172.085C 206.005,172.085 218.591,184.671 218.591,200.167C 218.591,215.683 206.005,228.249 190.509,228.249C 175.003,228.249 162.428,215.683 162.428,200.167 Z "));
            dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF524F40")), null, Geometry.Parse("F1 M 160.598,199.025C 160.598,183.529 173.174,170.943 188.68,170.943C 204.176,170.943 216.762,183.529 216.762,199.025C 216.762,214.541 204.176,227.107 188.68,227.107C 173.174,227.107 160.598,214.541 160.598,199.025 Z "));
            dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF6D6B51")), null, Geometry.Parse("F1 M 253.277,270.359C 250.065,261.438 253.089,268.956 244.895,249.789C 242.347,243.406 234.03,235.753 223.176,235.753L 163.176,235.753C 152.342,235.753 144.025,243.406 141.488,249.789C 138.94,256.153 135.803,261.438 132.631,270.359"));
            dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FF524F40")), null, Geometry.Parse("F1 M 249.41,266.847C 246.198,257.926 249.222,265.444 241.028,246.278C 238.48,239.894 230.163,232.241 219.309,232.241L 159.309,232.241C 148.475,232.241 140.158,239.894 137.621,246.278C 135.074,252.641 131.936,257.926 128.764,266.847"));
            dc.DrawGeometry(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FFFFFFFF")), new Pen(new SolidColorBrush((Color)ColorConverter.ConvertFromString("#FFC0C1C3")), 0) { LineJoin = PenLineJoin.Round }, Geometry.Parse("M 115.999,132.639L 260.777,132.639L 260.777,301.028L 115.999,301.028L 115.999,132.639 Z M 126.208,142.884L 250.208,142.884L 250.208,266.884L 126.208,266.884L 126.208,142.884 Z "));
        }

        return new DrawingBrush(dGroup);
    } 
```

要在 Rectangle 中显示它，请使用 Fill-property：

```
Rectangle.Fill = GetDBrush(); 
```

# file-format - 有没有显示文件结构的工具？

> ID：13468955
> 
> 赞同：3
> 
> 时间：2012-11-20T08:11:38.757
> 
> 标签：file-format, viewer

多年来，已经定义了数千种二进制文件格式。是否有一种工具可以以人类可读（甚至可编辑）的方式显示任意文件格式？

具体来说，我正在寻找可以读取“格式描述”并为此格式构建编辑器/查看器的东西（我不想局限于内置格式）。

文件类型[（1）](http://linux.die.net/man/1/file)，但应提供所有详细信息，而不仅仅是概述。

# asp.net - 在 web 服务中加载配置/属性文件（要求数据在 web 服务中持久化）

> ID：13468956
> 
> 赞同：2
> 
> 时间：2012-11-20T08:11:39.753
> 
> 标签：asp.net, web-services

我正在创建一个网络服务。但是，我需要它在一天中的特定时间从配置/属性文件中读取数据，并将获得的数据用于发布到 Web 服务的所有事务。

问题是 - 据我了解，Web 服务的生命周期以请求开始并以响应结束，因此局部变量将毫无用处。

因此，我需要通过某种机制加载配置，通过这种机制我不必为每个请求一次又一次地读取文件，从而减少了我为请求提供服务的周转时间。

# iphone - IOS 6 设备方向和像素问题

> ID：13468959
> 
> 赞同：0
> 
> 时间：2012-11-20T08:11:55.343
> 
> 标签：iphone, ios6, orientation

我有一个基于 tabbarController 的应用程序。我编写了定向代码，它工作正常。但正因为如此，我在应用程序中遇到了 20 像素的问题，即导航栏向下移动了 20 像素。

如果我从 didFinishLaunching 中删除以下代码，则 20 像素问题得到解决，但方向不起作用。

```
[self.window setRootViewController:tabBarController]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:59:35.090

我的应用程序遇到了这个完全相同的问题......**起初**我没有解决方法，除了在我想要开始的 UI 前面留出 20 像素的空间，它会卡在适当的位置。

但就在昨天，我遇到了这个解决方案，使用这个代码，它**应该**像对我一样工作：

```
self.view.autoresizesSubviews = NO; 
```

# c++ - 如何检查当前的 OpenGL 上下文是否在 Geforce 卡上运行？

> ID：13468962
> 
> 赞同：2
> 
> 时间：2012-11-20T08:12:01.740
> 
> 标签：c++, c, opengl

如何检查 OpenGL 上下文是否在 Geforce 卡上运行？我需要运行不同的代码，具体取决于它是在 Geforce 卡、Quadro 还是 AMD 卡上运行，并且需要一种检测方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:21:49.813

我认为这个解决方案可能是合适的

[http://www.opengl.org/sdk/docs/man/xhtml/glGetString.xml](http://www.opengl.org/sdk/docs/man/xhtml/glGetString.xml)

您可以使用它来返回供应商和版本。我不确定每张卡是否与 OpenGL 明显不同，或者每个供应商的某个版本是否就是你所需要的

# mysql - 选择语句中的子选择返回 null

> ID：13468964
> 
> 赞同：2
> 
> 时间：2012-11-20T08:12:06.850
> 
> 标签：mysql, sql, subquery

我正在尝试在大学数据库中列出课程名称及其先决条件（如果有的话）。这些表的架构如下所示

```
course(course_id, title, dept_name, credits)
prereq(course_id, prereq_id) 
```

这是我的查询

```
SELECT title, (SELECT title
              FROM course NATURAL JOIN prereq c2
              WHERE c1.prereq_id = c2.course_id)
FROM course NATURAL LEFT JOIN prereq c1; 
```

对于第二个 select 语句的所有值，我的结果都返回 null。我感觉这与第二个 select 语句时不知道 c1 的值有关。有没有办法解决这个问题或可以使用更好的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:15:40.177

> 我正在尝试在大学数据库中列出课程名称及其先决条件（如果有的话）。

你可以这样做：

```
SELECT 
  c1.title "Course Title",
  IFNULL(c2.title, "Has No Preqs") "Preq Course Title"
FROM course c1
LEFT JOIN prereq p ON p.course_id = c1.course_id
LEFT JOIN course c2 ON p.prereq_id= c2.course_id 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d2245/9)

但是，如果任何课程都有许多前提课程，这将不起作用。

在这种情况下，您必须`GROUP_CONCAT`像@danihp 在他的回答中指出的那样使用：

```
SELECT 
  c1.title "Course Title",
  GROUP_CONCAT(IFNULL(c2.title, "Has No Preqs")) "Preq Course Title"
FROM course c1
LEFT JOIN prereq p ON p.course_id = c1.course_id
LEFT JOIN course c2 ON p.prereq_id= c2.course_id
GROUP BY c1.title ; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f88cb/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T08:15:40.967

您正在寻找[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数：

```
SELECT 
   title,  
   group_concat( distinct c2.title ) as prereqs
FROM course 
NATURAL LEFT JOIN prereq c1
left outer join course c2 on c1.course_id = c2.course_id
group by course.course_id; 
```

# android - 在运行时创建图像视图的 UI 块

> ID：13468965
> 
> 赞同：-1
> 
> 时间：2012-11-20T08:12:12.720
> 
> 标签：android, android-launcher

我想在运行时创建 600 个图像视图并在运行时将其添加到线性布局。这会导致我的用户界面阻塞。当所有图像视图创建并添加到线性布局时，我的活动就会出现。如何解决这个问题。

请为此提供帮助。

```
 for(int index = 0; index < ProductItemArray.Image_URL.length; index++)
        {
            ImageView bottomImageView = new ImageView(context);
            bottomImageView.setTag(index);

            if(Helper.isTablet(context))
                bottomImageView.setLayoutParams(new Gallery.LayoutParams(VirtualMirrorActivity.convertDpToPixel(100, context), VirtualMirrorActivity.convertDpToPixel(100, context)));
            else
                bottomImageView.setLayoutParams(new Gallery.LayoutParams(VirtualMirrorActivity.convertDpToPixel(80, context), VirtualMirrorActivity.convertDpToPixel(80, context)));

            UrlImageViewHelper.setUrlDrawable(bottomImageView, ProductItemArray.Image_URL[index]);
            bottomImageView.setBackgroundResource(R.layout.border);
            linearLayout3.addView(bottomImageView);
            bottomImageView.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    final int position = (Integer) v.getTag();
                    linearLayout.removeAllViews();
                    Thread newThread = new Thread(new Runnable() {
                        public void run() {
                            isAlreadyExistInWishlist = true;
                            URL url_1 = null;
                            try {
                                VMProductListPaging.productUrl = ProductItemArray.Image_small_URL[position];
                                VMProductListPaging.productId = ProductItemArray.productId[position];
                                VMProductListPaging.productName = ProductItemArray.product_Name[position];

                                url_1 = new URL(ProductItemArray.Image_small_URL[position]);
                                bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
                                isExecuted = true;
                                bitmapModelsHandler.sendMessage(bitmapModelsHandler.obtainMessage());
                            }
                            catch (Exception e) {
                                //Toast.makeText(context,"Sorry!! This link appears to be broken",Toast.LENGTH_LONG).show();
                            }
                        }
                    });
                    newThread.start();
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T08:18:53.470

同时在内存中存储 600 张图像可能不是一个好主意。

您应该考虑通过适配器（使用 ListView、Gallery、GridView、Spinner 等）使用一些延迟加载，该适配器将管理视图的回收/释放。

# android - Flex 移动，AIR：向左滑动菜单

> ID：13468966
> 
> 赞同：0
> 
> 时间：2012-11-20T08:12:13.003
> 
> 标签：android, apache-flex, air

`Flex Builder`我用,开发我的应用程序`Adobe AIR`。我想创建类似于`Adobe Reader`左侧菜单。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-30T18:44:33.997

我现在不在我的办公桌附近，但也许像“SplitViewNavigator”这样的东西可能是一个好方法。

从提供的链接粘贴的代码：

```
<s:SplitViewNavigator id="svn" width="100%" height="100%">
    <s:ViewNavigator id="leftNav" width="30%" height="100%" firstView="views.LeftView"/>
    <s:ViewNavigator id="rightNav" width="100%" height="100%" firstView="views.RightView"/>
</s:SplitViewNavigator> 
```

DevGirl 有一篇很棒的文章，里面有一个很好的例子，你可以把它作为你想要实现的目标的基础。

[http://devgirl.org/2011/12/01/flex-mobile-development-splitviewnavigator-tutorial/](http://devgirl.org/2011/12/01/flex-mobile-development-splitviewnavigator-tutorial/)

# python - PyMel 旋转引发错误

> ID：13468967
> 
> 赞同：0
> 
> 时间：2012-11-20T08:12:16.440
> 
> 标签：python, maya, mel, pymel

我想随机旋转给定轴上的对象列表，并从指定范围内检索到随机量。这就是我想出的：

```
import pymel.core as pm
import random as rndm

def rndmRotateX(targets, axisType, range=[0,180]):
    for obj in targets:
        rValue=rndm.randint(range[0],range[1])
        xDeg='%sDeg' % (rValue)
        #if axisType=='world':
        #    pm.rotate(rValue,0,0, obj, ws=1)
        #if axisType=='object':
        #    pm.rotate(rValue,0,0, obj, os=1)
        pm.rotate(xDeg,0,0,r=True)

targetList= pm.ls(sl=1)
randRange=[0,75]
rotAxis='world'
rndmRotateX(targetList,rotAxis,randRange) 
```

我使用 pm.rotate() 因为它允许我指定是否要在世界或 obj 空间中进行旋转（据我所知，与 setAttr 不同）。问题是，当我尝试运行它时会引发此错误：

```
# Error: MayaNodeError: file C:\Program Files\Autodesk\Maya2012\Python\lib\site-packages\pymel\internal\pmcmds.py line 140:  # 
```

这一定是我输入 pm.rotate() 参数的方式（我假设这是由于 PyMel 吐出的行错误，这与它的参数转换函数有关），但我无法弄清楚我做错了。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:44:16.417

我认为问题出在这一行

```
pm.rotate(rValue,0,0, obj, os=1) 
```

obj 应该是第一个参数，所以它应该是

```
pm.rotate(obj, (rValue,0,0), os=1) 
```

但为了让它更漂亮，你可以使用

```
obj.setRotation((rValue,0,0), os=1) 
```

并且。使用`pm.selected()`而不是`pm.ls(sl=1)`. 它看起来更好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T17:17:28.283

另一种方法来做到这一点..

```
from pymel.core import *
import random as rand

def rotateObjectsRandomly(axis, rotateRange):
    rotateValue = rand.random() * rotateRange
    for obj in objects:
        PyNode(str(selected()) + ".r" + axis).set(rotateValue)
    objectRotation = [[obj, obj.r.get()] for obj in selected()]
    print "\nObjects have been rotated in the {0} axis {1} degrees.\n".format(axis, rotateValue)
    return objectRotation

rotateObjectsRandomly("z", 360) 
```

由于 rand.random() 返回一个介于 0 - 1 之间的随机值，我只是将其乘以用户指定的 rotateRange ..或者在我的偏好中，我将把它全部取消，然后将它乘以 360 ...

你也不需要所有的反馈，我只是觉得运行时看起来不错..

```
Objects have been rotated in the z axis 154.145898182 degrees.

# Result: [[nt.Transform(u'myCube'), dt.Vector([42.6541437517, 0.0, 154.145898182])]] # 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T08:15:44.570

就像对你所拥有的东西的直接调试一样......

## 问题01：区分大小写

`pm.rotate("20deg",0,0)`可以正常工作，但`pm.rotate("20Deg",0,0)`会失败并抛出 MayaNodeError，因为它认为您正在寻找一个名为“20Deg”的节点。基本上，您希望按照以下方式构建您的字符串：`xDeg='%sdeg' % (rValue)`

## 问题 02：您依赖于 pm.rotate() 的隐式“将应用于选定对象”行为

在应用上述修复之前，您不会看到这一点，但是如果您有两个选定的对象，并在它们上运行（修补的）rndmRotateX 函数，您会得到两个对象以完全相同的量旋转，因为 pm.rotate( ) 对选择（两个对象）而不是每个对象的旋转进行操作。

如果你想快速修复，你需要`pm.select(obj)`在旋转之前插入一个。而且您可能想要保存选择列表并恢复它......但是恕我直言，依赖这样的选择是一个非常糟糕的主意，所以我会把你推向金的答案。

# c - C fwrite 函数提供具有未知空间的数据

> ID：13468972
> 
> 赞同：2
> 
> 时间：2012-11-20T08:12:41.263
> 
> 标签：c

该函数应该获取一个参数作为文件的指针，并将所有文件放入`struct anagram`，然后将其写入另一个文件。现在每个数据之间都有很大的空间。charCompare 工作正常，因为我制作了一个测试文件来测试它。

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <string.h>
#include <errno.h>
#include <ctype.h>
#include "anagrams.h"
#define SIZE 80

//struct
struct anagram {
char word[SIZE];
char sorted[SIZE];
};

void buildDB ( const char *const dbFilename ){

    FILE *dict, *anagramsFile;
    struct anagram a;

    //check if dict and anagram.data are open
    errno=0;
    dict= fopen(dbFilename, "r");

    if(errno!=0) {
        perror(dbFilename);
        exit(1);
    }

    errno=0;

    anagramsFile = fopen(anagramDB,"wb");

    char word[SIZE];
    char *pos;
    int i=0;

    while(fgets(word, SIZE, dict) !=NULL){

        //get ripe of the '\n'
        pos=strchr(word, '\n');
        *pos = '\0';

        //lowercase word
        int j=0;
        while (word[j]){
            tolower(word[j]);
            j++;
        }

        /* sort array using qsort functions */ 
        qsort(word,strlen(word), sizeof(char), charCompare);

        strncpy(a.sorted,word,sizeof(word));

        fwrite(&a,1,sizeof(struct word),anagramsFile);

        i++;
    }
    fclose(dict);
    fclose(anagramsFile);

} 
```

数据：10日1日2日

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:25:37.463

一个可能的原因是传递给[`qsort()`](http://en.cppreference.com/w/c/algorithm/qsort). 从链接的参考页面`qsort()`：

> **size** - 数组中每个元素的大小（以字节为单位）

因此 size 参数应该是`1`，保证是`sizeof(char)`，而不是`sizeof(char*)`可能是`4`or `8`。发布的代码错误地通知`qsort()`它`word`指向一个比实际数组大`4`（或）倍的数组，并且将访问它不应该访问的内存。改成：`8``qsort()`

```
qsort(word,strlen(word), 1, charCompare); 
```

另一个可能的原因是此行导致的缓冲区溢出：

```
strncpy(&a.sorted[i],word,sizeof(word)); 
```

`i`在循环的每次迭代中都会递增，`while`但`sizeof(word)`总是被写入。`SIZE`和的值`BUFSIZ`不会发布，但即使它们相等，也会在第一次迭代后`strncpy()`写入超出范围。`a.sorted`

其他要点：

*   [`fgets()`](http://en.cppreference.com/w/c/io/fgets)不能保证读取换行符，因此`strchr()`在取消引用之前检查返回值。
*   [`tolower()`](http://en.cppreference.com/w/c/string/byte/tolower)返回小写字符，它不会改变它的参数。
*   为什么要读入临时缓冲区（`word`）并复制？直接读入`struct`会员即可。

# javascript - 按名称设置输入字段数组的值

> ID：13468974
> 
> 赞同：2
> 
> 时间：2012-11-20T08:12:44.607
> 
> 标签：javascript, jquery

我的页面上有一组输入字段。它们被设置为一个数组，如下所示：

```
<input type="text" name="test[name][]" /><br />
<input type="text" name="test[name][]" /><br />
<input type="text" name="test[name][]" /><br />
<input type="text" name="test[name][]" /> 
```

接下来我需要做的是在每个文本字段中设置一个唯一值。但我不知道如何用 jQuery 遍历这些字段。我的尝试失败：**[DEMO](http://jsfiddle.net/hGTKG/)**

```
$(function() {
    $.each('input[name="test[name][]"]', function() {
        $(this).val('blaat');
    });
}); 
```

知道如何遍历每个输入字段，按名称选择它们！？我对这些控件没有任何影响。所以我**不能**给他们一个额外的类名或类似的东西。我只有他们的名字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:15:58.313

您用来获取数组的选择器是字符串而不是数组

`'input[name^="test"]'`应该`$('input[name="test[name][]"]')`

你可以这样做，

**[现场演示](http://jsfiddle.net/hGTKG/16/)**

```
$(function() {
    $.each($('input[name^="test[name][]"]'), function() {        
        $(this).val('blaat');
    });
}); 
```

​</p>

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:18:13.343

你可以做类似的事情

```
$(function() {
    $.each($('input[name^="test"]'), function() {
        $(this).val('blaat');
    });
});​ 
```

编辑：更高效

```
$(function() {
    $('input[name^="test"]').each(function() {
        $(this).val('blaat');
    });
});​ 
```

# javascript - 在 Extjs 中初始化商店的数据

> ID：13468975
> 
> 赞同：2
> 
> 时间：2012-11-20T08:12:50.797
> 
> 标签：javascript, extjs, extjs4, extjs-mvc, extjs-stores

我有**存储**，我想从数据库初始化，但我找不到标准的 init 方法`Ext.data.Store`。我发现了几个有关该`StoreManager`组件的示例，但我认为这不是我想要的。我的应用程序有一个 MVC 结构，我想保留它，我只想使用我定义的方法初始化商店的数据字段。有人可以解释怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:34:17.187

我要么理解错了，要么你的问题是直截了当的。您使用这样的模型配置商店。就这样。您可以选择适合您需求的提供者（读取器/写入器）。

```
 // Set up a model to use in our Store
 Ext.define('User', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'firstName', type: 'string'},
         {name: 'lastName',  type: 'string'},
         {name: 'age',       type: 'int'},
         {name: 'eyeColor',  type: 'string'}
     ]
 });

 Ext.define('YourMVCNameSpace.data.UserStore', {
    extend: 'Ext.data.Store',

    constructor: function (config) {
         config = Ext.Object.merge({}, config);
         var me = this;
         // do what you need with the given config object (even deletes) before passing it to the parent contructor
         me.callParent([config]);
         // use me forth on cause the config object is now fully applied
     },
     model: 'User',
     proxy: {
         type: 'ajax',
         url: '/users.json',
         reader: {
             type: 'json',
             root: 'users'
         }
     },
     autoLoad: true
 }); 
```

请注意，读者会期望得到这样的 Json 结果：

```
{"total": 55, "users":["...modeldata.."]} 
```

并且指的是像这样的网址

```
http://localhost/YourAppDomain//users.json 
```

将存储作为“用户”放置在控制器存储数组中，并通过调用`getUserStore()`或直接从 Ext.StoreMgr 使用 Ext.StoreMgr.lookup('User') 在控制器中检索它；

请注意，按照惯例，控制器 (MVC) 将覆盖您在商店中设置的任何 storeId，并且只会使用名称。

# ruby-on-rails - use_ssl 上没有方法 = true

> ID：13468976
> 
> 赞同：1
> 
> 时间：2012-11-20T08:12:56.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用 Rails 控制器发送发布请求，但是当我无法让控制器接受 use_ssl = true 时，我遇到了问题。这是我的代码

```
require "net/http"
require "uri"

params = {'requestId' => '1', 
  'merchantId' => 'merchantid'
  'version' => '1.0.6', 
  'locale' => 'en_US', 
  'externalUserId' => '1234', 
  'partnerId' => 'partnerid', 
  'emailAddress' => 'test@email.com', 
  'deviceDTO' => "{'id' => '123123213', 'deviceType' => 'samsung'}",
  'timestamp' => Time.now.strftime('%Y-%m-%dT%H:%M:%S.%L%z')
}

url = URI.parse('https://example.com')
http = Net::HTTP::Post.new(url.host)
http.set_form_data(params)
#http.use_ssl = true
#http.verify_mode = OpenSSL::SSL::VERIFY_PEER

res = Net::HTTP.start(url.hostname, url.port) do |h|
  h.request(http)
  h.use_ssl = true
  h.verify_mode = OpenSSL::SSL::VERIFY_NONE
end 
```

错误是：

```
NoMethodError: undefined method `use_ssl=' for #<Net::HTTP::Post POST>
NoMethodError: undefined method `verify_mode=' for #<Net::HTTP::Post POST> 
```

现在 UPD 错误

```
Errno::ECONNRESET: Connection reset by peer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T08:23:21.157

`use_ssl`是一个方法`Net::HTTP`，你正在创建一个`Net::HTTP::Post`对象。

你可能想做

```
url = URI.parse('https://example.com/')
http = Net::HTTP.new(url.host, url.port)
if url.scheme == 'https'
  http.use_ssl = true
  http.verify_mode = OpenSSL::SSL::VERIFY_PEER
end
http.post(url.path, params) 
```

# objective-c - 以编程方式禁用 Mac 上的所有通知中心横幅

> ID：13468978
> 
> 赞同：3
> 
> 时间：2012-11-20T08:13:01.137
> 
> 标签：objective-c, macos

Mac 应用程序是否可以暂时禁用通知中心，例如在进行全屏演示时？苹果表示，“当你在 Keynote 中演示时，警报会自动禁用。如果你的显示器镜像到外接显示器上，它们也不会出现。” 第三方应用程序是否也可以临时禁用通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:44:19.717

I don't think so, but my assumptions are base on iOS, where you can't turn off notification center at all.

# c# - 道路名称 窗体应用程序

> ID：13468979
> 
> 赞同：1
> 
> 时间：2012-11-20T08:13:05.127
> 
> 标签：c#, visual-studio-2010

我听起来绝对是个菜鸟，但我压力很大，以至于我无法正确地进行任何研究。

基本上我在一个列表中得到了 127 个道路名称，我想在标签中以随机顺序一个接一个地显示它们，如果正确的一个增加到绿色框，我会回答它们，如果它错误，然后增加到黄色框，但同时时间它会在标签中显示我正确的答案，然后按下提交按钮它将带我到下一个道路名称，这是我到目前为止所做的，

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        RL = RoadLocationNames();
        i = 1;
        red = 1;
        y = 1;
    }

    List<KeyValuePair<string, string>> RL;
    int i,red, y;

    private void button1_Click(object sender, EventArgs e)
    {
        Random random = new Random();
        int r = random.Next(RL.Count);

        lbLocation.Text = RL.ElementAt(r).Key;

        if (tbRoad.Text.ToLower() == RL.ElementAt(r).Value.ToLower())
        {
            Green.Text = i.ToString();
            i++;
            RL.Remove(RL.ElementAt(r));
        }
        else
        {
            label3.Text = RL.ElementAt(r).Value.ToString();
            Red.Text = i.ToString();
            i++;
        }

        Yellow.Text = y.ToString();
        y++;

    }

    public List<KeyValuePair<string, string>> RoadLocationNames()
    {
        List<KeyValuePair<string, string>> RLNs = new List<KeyValuePair<string,string>>();
        RLNs.Add(new KeyValuePair<string, string>("Road Name", "Location Name"));

        return RLNs;
    } 
```

现在我的互联网太慢了，我几乎无法上传表格的任何屏幕截图，但我会尝试..我明天要考试了，我想用这个应用程序做准备，但我不确定，

*   如何显示道路名称而不是（道路名称及其答案，这是我的代码现在正在执行的操作），这可能是因为我在按钮提交中做所有事情，我需要逻辑和代码方面的帮助（对不起，但我很匆忙）

![我需要快速响应代码](../Images/d133afdcaf6cde922076e05c263b625a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:39:42.157

是的，这是因为你在提交中做了所有事情。我建议您将代码拆分为以下内容：

1.  初始化 - 创建道路名称和位置列表，然后运行设置（下一步）。
2.  设置 - 清除用户当前的答案，随机选择道路名称/位置对并在表单上显示问题部分。
3.  用户提交 - 检查答案，增加适当的计数器，如果答案是正确的再次运行设置，否则显示答案应该是什么。

初始化可以在您的表单构造函数中完成。设置应该是私有方法。用户提交应该是您的点击处理程序。

（看起来你正在增加`i`正确和错误的答案，这可能是不正确的。这就是为什么你选择比单个字母更好的变量名来使这样的错误更明显。）

# tapestry - 关于仅针对某些请求没有 tml 的 Tapastry 错误

> ID：13468981
> 
> 赞同：0
> 
> 时间：2012-11-20T08:13:34.730
> 
> 标签：tapestry

```
Object onActivate(final String jsonRequest){
    return new StreamResponse() {

        private InputStream inputStream;

        public void prepareResponse(Response response) { 
```

我正在使用上面的代码生成一个 XML 作为响应。当我在浏览器中测试它时，它工作正常。但是当我从 Android 应用程序发送我的请求时，我在服务器端收到以下错误。

```
[ERROR] TapestryModule.RequestExceptionHandler Processing of request failed with uncaught exception: Page catalog/Index did not generate any markup when rendered. This could be because its template file could not be located, or because a render phase method in the page prevented rendering.
java.lang.RuntimeException: Page catalog/Index did not generate any markup when rendered. This could be because its template file could not be located, or because a render phase method in the page prevented rendering. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:12:30.527

我想你会发现你的模板中有一些错误的 URL，它在没有页面激活上下文的情况下激活你的页面；除非 URL 中存在满足参数的值，否则不会调用您的 onActivate() 事件处理程序，因此它被跳过，并且默认行为......使用模板进行渲染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:56:31.987

当我发送 GET 请求时，它起作用了。以前我正在发送一个 POST

# android - Emulator JBMR1 中的外接显示器功能测试

> ID：13468982
> 
> 赞同：8
> 
> 时间：2012-11-20T08:13:38.420
> 
> 标签：android, android-emulator, external-display

我已经在 Eclipse 中下载了 Jelly Bean MR1 SDK 并希望查看外部显示功能。在模拟器中，

*   我在开发设置中的“模拟辅助显示”功能中启用了辅助显示 => 它创建了覆盖 #1
*   我使用了 API Demo->App->Activity->Presentation ，但只显示“Display # 0 , Built in Screen”。显示了叠加，但其中没有渲染任何内容。理想情况下，我希望图像会出现在 Overlay 中。

如何在模拟器中测试此外部显示器（演示类）功能..请帮助。

感谢和问候普鲁什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:14:42.363

找到了解决办法，启动模拟器时需要开启图形加速，所以调用模拟器时只需传递“-gpu on”即可。

# c++ - Lambda 捕获 constexpr 对象

> ID：13468989
> 
> 赞同：23
> 
> 时间：2012-11-20T08:13:57.143
> 
> 标签：c++, c++11, lambda, constexpr

GCC 4.7.2 编译这个：

```
constexpr int i = 5;
[]{ std::integral_constant< int, i >(); }; // nonstandard: i not captured 
```

但不是这个：

```
constexpr int i = 5;
[&i]{ std::integral_constant< int, i >(); }; // GCC says i not constexpr 
```

根据 C++11 §5.1.2/15，后一个示例对我来说似乎是正确的：

> 如果实体被隐式或显式捕获但未通过副本捕获，则通过引用捕获实体。对于通过引用捕获的实体，是否在闭包类型中声明了其他未命名的非静态数据成员，这是未指定的。

似乎`i`lambda 内捕获的对象是指封闭范围内的变量`constexpr`，而不仅仅是一个`const`引用。

该标准明确指出，按值捕获的使用被转换为对 lambda 对象的相应成员的使用。而且我认为 5.1.2 暗示我的解释是正确的。

有什么明确说明引用捕获是指封闭范围内的对象还是引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T10:52:34.627

第二个*模板参数*用于*非类型*形式的模板参数，特别是`std::integral_constant< int, i >`整数*或*枚举*类型*（14.3.2p1 项目符号 1），因此必须是类型的转换常量表达式。**`int`**

 **在*lambda-expression*中，当在复合语句 (5.1.2p11) 中使用实体时，会发生隐式捕获；在显式模板实例化中使用转换后的常量表达式不是 odr-use (3.2p3)，因此第一个示例是有效的。

在第二个例子中，我认为 gcc 拒绝它是不正确的；5.1.2p17 在说明中说：

> 不是 odr-use的*id-expression*是指原始实体，而不是闭包类型的成员。

尽管整个段落都在讨论按副本捕获，但没有理由不将此规则也应用于按引用捕获。标准对此不明确也就不足为奇了。确实没有理由通过引用捕获可以在转换后的常量表达式中使用的实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:39:04.897

首先，我可以在 Ubuntu 12.04 上使用 gcc 4.6.3 和 clang 3.0 确认您的观察。

我没有 C++11 标准（只有草稿），所以我不能对此发表评论。但是，根据我的理解，看看等价的陈述

```
constexpr int i = 5;
const int &j = i;
std::integral_constant<int, j>(); 
```

gcc 和 clang 都不会编译它，因为`j`它不是“整数常量”。**

# assembly - 如何在装配过程中使用缓冲区？

> ID：13468991
> 
> 赞同：6
> 
> 时间：2012-11-20T08:13:57.123
> 
> 标签：assembly, x86, buffer, procedure, masm

所以，我理解缓冲区的一般抽象概念：它是内存中的分配，在数据被处理之前保存数据。我正在尝试完成一个作业问题，该问题需要我将 ASCII 字符串写入过程中的缓冲区。所以，我知道我应该在调用它时将数组的地址传递给过程，例如......

```
main PROC
mov  EAX, packed           ; pass a packed decimal to EAX
mov  ESI, OFFSET ascArray  ; pass the offset of an empty array to ESI
call PackedToAsc           ; call the function 
```

因此，该函数应该返回“指向带有 ASCII 十进制字符串的缓冲区的指针”。我可能在这里很愚蠢，但我不太清楚在这种情况下缓冲区到底是什么。

*   它是一个数组吗？
*   我是否需要在该`.data`部分中声明它？
*   如何在过程中声明指向 ASCII 字符串的指针？
*   在这种情况下，缓冲区是什么意思？

更实际的是，我需要在程序完成时访问数据放入的缓冲区，但我不知道该怎么做。

**编辑**   ——我在 x86 中，我正在使用 MASM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T14:52:33.707

假设 x86，这取决于您的缓冲区是否以其中的数据开头。它还取决于您的缓冲区是否为可变大小。

以第一种情况为例，您知道您的缓冲区永远不会超过 20 个字节，您可以在数据部分（NASM 语法）中声明它：

```
buffer: times 20 db 0 
```

在数据部分中声明`0`了您现在可以使用的 20 个字节。如果您不需要使用数据进行初始化，则使用 .bss 部分（NASM 语法）：

```
buffer: resb 20 
```

它告诉 NASM 保留 20 个字节。

但是，如果缓冲区的大小是可变的，事情就不那么容易了。您必须从操作系统动态分配内存，这非常依赖于操作系统。你基本上有2个选择：

*   使用 C 库`malloc`：这可能更容易或更难，具体取决于平台调用约定。[这里](http://courses.engr.illinois.edu/ece390/books/labmanual/c-prog-mixing.html)有一个合理的参考
*   使用您的系统调用：所有系统都提供了一些获取更多内存的方法，但没有一个像`malloc`. 它们通常涉及向您的进程添加另一页内存并让您自己管理它。这是 malloc 在内部所做的，如果您不能使用 C 库，这是唯一的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-22T05:37:48.273

是的，缓冲区只是一个数组，在汇编中是一个字节序列。

您有 3 个主要选项来分配它，就像在 C 中一样：

*   **静态存储**：像 C`static char buf[100];`

    ```
     section .bss                   ; this might not be proper MASM syntax
       my_buffer:  db   100 dup(?)   ; but this is definitely MASM 
    ```

    `:`在标签名称和之间放置 a`db`使其只是一个普通标签，如 NASM，而不是具有隐含操作数大小的 MASM“变量”。（如果 MASM 允许您在 .data / .bss 部分执行此操作。它可能不会。）

    `100 dup`意思是将下一件事重复100次。 `?`表示未初始化的存储。它实际上将在像 Windows 这样的操作系统下运行的程序中归零，因为它不能让程序看到内核数据或同一台机器上的其他进程留下的陈旧数据。所以`100 dup(0)`也可以工作，也许可以更好地描述你想要的东西，特别是如果你的代码在没有先写的情况下读取了这些字节中的任何一个。

*   **动态存储：`call malloc`**，或直接调用 OS 函数，如`mmap`或`VirtualAlloc`。您可以从分配它的函数返回指向它的指针。

*   **自动存储（在堆栈上）**：就像一个 C 局部变量。当分配函数返回时自动解除分配。非常便宜和容易，除非您知道它们需要数兆字节，否则将其用于暂存缓冲区。

处理缓冲区的最简单方法是接受指向已分配缓冲区的指针，并让调用者选择要传递的缓冲区。

例如，一个大写 ASCII 字母的函数可能只需要一个 src 和 dst 指针。如果您希望它就地运行，您可以只传递相同的输入和输出指针，如果它被编写为支持它的话。它不必关心内存管理，它只是在两个缓冲区之间运行。

像 C 这样的函数`strdup`会创建一个字符串的新副本，而这只对动态存储有意义。将字符串复制到静态缓冲区并返回它不会很好，因为该静态缓冲区只有一个实例。下一次调用它会覆盖旧的内容。

* * *

**在堆栈上分配缓冲区：**

堆栈上的可变大小缓冲区没有问题；您只需要一种事后清理堆栈的方法。使用 EBP / RBP 制作堆栈框架是一种简单的方法。考虑这个示例函数，它根据需要分配一个缓冲区，并使用它来保存字符串反转函数的输出，以便将其传递给`print`函数。您可以看到[编译器在这种情况下做了什么](https://gcc.godbolt.org/#z:OYLghAFBqd5QCxAYwPYBMCmBRdBLAF1QCcAaPECAKxAEZSAbAQwDtRkBSAJgCFufSAZ1QBXYskwgA5ADdUedAGpBBYnjYB9YphmZigzBGQImxRQCp0pRWhYqbJ4ucHX1BRQ0wsAlBwDMfAAMAIJyCooADmosBEaodu7Gps6uMR5evgEcIWFKAGaoqHEJDqYWLopu6T6KHADsQcGKzaVmAEYieRwArDyeLD0AIv6NLcqq6sBaOnoGEB151hX9maMtUW7zndYrI9nB9YNS3ozS3VKkLNKBF6jSAML8/Mqi4pi1XH60FwTXxycAaxAfm6ADo/IEACyBLgANkhfkhsLhAA5EacpJCLgBbOiBQKXP6kO5SC6CEAE35SG4nOCwGCIFCobERPCeMgUOIstl6EDAFH0PJsgizShtIltdSmACe0m%2BpDQ2OxXgIAHkWAxZdSLlhsaxgJ4ifhtMgCHhdOTtaRMAAPTDIEQiuUXNyYBhEia4qTfE7MNgoJ68Rh4NrkyAnVARM3xS0AWhtyEUsYA6kwGAwk6q/EnsX4uDntMAIqZsf5Blwya8JHRfWcLlcrSSbSjYbH4YpgMhEyjQbRFBBcIQSB8vtZ7szWeyR7RvIpHrx%2BD8/t5AcC/KDujDIQBObf47rdFF1br0d2YnEgeEblHblGfJForgC7qExvSMkU0hUmmkOmM0QEBEjrkJQiqTry9CYPgRDEHQpAAO7EEwETOrWUjnK%2BNzEtI3BfIo8GEAgijNq27adt2vZLtqK6kAgmBMFgsEQGhWKkLiIKgpCtCBLQdSwt0XywnUtAtphtzvkIn7fv8pBAn466blwO57oEB5HieGJ%2BPWRIklRP5/gZSBgTyHKgROJl8nUfikEKDAivoYoSlKxBavKirKjE6qakamB6mwhpWsa9pmhaRK2vajqSN6LoxG6HpqF6PqMPqAYLkGDAhmGzHElGeAxtI8aJimaYZrGWY5qYxhloIALSswAKYJWYjVjOGIYQ2WFNi2baQh2XaKHU4L9oOMHTmO5lTrhXCzvOfC8HpMl0QxvLZWerG4puYnYaSkmUsuv4MhARkTXoIFcuBsHIH6wCwviNnCqK8xOSwMrOgqzIeWqGpalhur6gFv14CaIWYJaWHhQ6TrReQsVnlhnqocl/qcGlAgZaG8ARrl%2BVSIVSapummbZrGeriAg1W1fVjVCFWkitWe7U6dIJE9TY12KLCoKBFzw3QcOuH0HOJ1mLhfgzYGPALTRcm0FzqndFw8tfJCm53hi60gJtHXiTt5J7dRq5fL226InUKvdNudQot0sKwtZZ5aVtulfsuaEVk7EnSTRuj6HlVyQkAA%3D)。

```
void string_reverse(char *d, const char*s, int len);
void print(const char*s, int len);  // modify this to an fwrite or whatever.

void print_reversed(const char *s, int len) {
    char buf[len];
    string_reverse(buf, s, len);
    print(buf, len);
} 
```

`string_reverse`如果不需要 16 字节堆栈对齐并且它不会破坏它的堆栈 arg ，那么这就是您可以手动执行的操作。（ABI / 调用约定并不能保证这些事情中的任何一个，所以我们正在利用我们正在调用的函数的特殊知识来简化`print_reversed`。）

```
; MSVC __fastcall convention
; args: ecx, edx    (const char *string,  size_t length)
print_reversed PROC
    push   ebp
    mov    ebp, esp         ; make a stack frame

    sub    esp, edx         ; reserve space for a buffer
    and    esp, -16         ; and realign the stack
    ; allocate buf[length] on the stack, address = esp
      ; mov eax, esp       ; if you want to copy it somewhere

        ;sub    esp, 12          ; ensure 16-byte stack alignment before CALL

    push   edx              ; 3rd arg and later args go on the stack
    mov    edx, ecx         ; 2nd arg = string
    lea    ecx, [esp+4]     ; 1st arg = output buffer = what we allocated.  (PUSH offset ESP by 4, LEA corrects for that)

    call    string_reverse   ; (dst=buf (ECX),  src=string (EDX), length=length (stack))
      ; clean up the stack after the call and set up args for print
    pop    edx              ; assuming string_reverse doesn't modify its stack arg
    mov    ecx, esp         ; esp is once again pointing to our buffer
    call   print            ; print(ECX=buf, EDX=length)

      ; lea     esp, [ebp-8]  ; if you needed to push stuff after EBP, restore this way
      ; pop  ebx  / pop esi / pop ebp

    leave                   ; mov esp, ebp / pop ebp to clean up the stack frame
    ret
ENDP 
```

这是大多数 C 编译器实现`alloca`或 C99 可变长度数组的方式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-05-22T04:34:54.870

我使用这种方法在缓冲区获取字符并与其他字符串比较

```
CompareText macro colorScreen,string1,ScoreofLabel,loop_1,endText,notText,backprint

    mov h3,cx
    ClescrColor colorScreen                                     
    mov cx,h3

    printstr string1

    lea SI,string1[0]
    loop_1:       
        mov AH,01 
        int 16H
        jz backprint

    mov AH,00      
    int 16H       
    mov AH, [SI]   
    inc SI    

    cmp ah,36
        jne endText
    mov ah,13           

    endText:
    cmp AL, AH
        jne notText
    cmp AL, 13    
        jne loop_1

    jmp ScoreofLabel
    notText:
        mov si,62

endm 
```

希望对你有帮助

# wcf - WCF 有状态服务

> ID：13468995
> 
> 赞同：1
> 
> 时间：2012-11-20T08:14:36.780
> 
> 标签：wcf, stateful

或者 - 至少我认为正确的术语是有状态的。我有一个 wcf 服务，列出了很多数据给我。事实上，数据量如此之大，以至于我超过了 maxrecievedmessagesize - 并且程序崩溃了。

我开始意识到我需要拆分对数据库的调用。我需要获取第 1 - 200 行，而不是检索 5000 行，记住第 200 行的 id，从第 200 行的 id 中获取接下来的 200 行，依此类推。

有谁知道如何做到这一点？有状态（如“与无状态”相反）是正确的方法吗？我将如何进行......？有人可以给我举个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:12:42.593

您的场景中不需要有状态服务。最好避免使用有状态服务，尤其是当您想在那里保存 5000 行时。

客户应指定它需要多少数据。所以它可能是方法 GetRows(index, amount)，其中 index 是用于获取行的起始索引和从起始索引开始的行数。

客户端也应该询问服务的数据状态，服务只是发送数据状态。例如，当您有这 5000 行时，您可以在服务 GetRowsState(index, amount) 上使用方法，同样的故事只是说您的行的最后更新时间，当您收到的时间高于或其他客户端时，然后再次从服务器获取 GetRows 以更新客户端数据状态。

# php - 将文本或 HTML 写入磁盘上的文件

> ID：13468998
> 
> 赞同：3
> 
> 时间：2012-11-20T08:14:44.780
> 
> 标签：php

我希望我的 PHP 脚本将文件写入我的目录。这样做是编写一个名为`hello.php`,`hello.txt`或的文件`hello.html`并将其放在特定目录中。

原因是当用户在表单上填写他们的姓名和年龄时，它会生成`.html`一个基本轮廓文件，包括表单数据中的姓名和年龄。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T08:15:48.330

看看`file_put_contents()`。 [http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

```
file_put_contents('hello.txt', 'Your name is user1544586.'); 
```

但是，您是否有理由要生成静态 HTML 文件？通常最好将数据存储在数据库中，然后使用 PHP 动态生成页面。

# json - 在 AWS 中解析 JSON 数据

> ID：13468999
> 
> 赞同：0
> 
> 时间：2012-11-20T08:14:49.260
> 
> 标签：json

我仍然无法在 linux 中解析 JSON 数据。我需要一个 linux 命令来将 Json 数据解析为可读字符串。

有人告诉我使用 underscore-cli。（https://npmjs.org/package/underscore-cli）

我安装并使用它，结果仍然不可读。

我的数据：“2005\u5e7405\u670812\u65e5(\u6728) 02\u664216\u5206”

根据此链接 [http://json.parser.online.fr/](http://json.parser.online.fr/)

结果是“2005 年 05 月 12 日（木）02 时 16 分”

有没有其他方法来解析这个 Json 数据？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:50:46.450

试试jq：[http ://stedolan.github.com/jq/](http://stedolan.github.com/jq/)

```
echo  '"2005\u5e7405\u670812\u65e5(\u6728) 02\u664216\u5206"' | ./jq .
"2005年05月12日(木) 02時16分" 
```

jq 采用转义的 unicode 并将其输出为 utf-8。