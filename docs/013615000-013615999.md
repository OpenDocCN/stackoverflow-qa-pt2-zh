# StackOverflow 问答 13615000-13615999

# html - 在 iOS 中输入日期占位符值

> ID：13615000
> 
> 赞同：2
> 
> 时间：2012-11-28T21:47:45.573
> 
> 标签：html, ios, css

我的移动网站有一个带有日期类型的输入标签，但是当我用 iPhone 打开它时，占位符值不可见。

```
 <input name="birthDate" class="input-textbox" type="date" placeholder="Birth Date"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:49:26.787

那是因为“出生日期”不是有效的“日期”值（毕竟您确实将此字段键入为“日期”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:57:27.723

[日期类型不支持占位符。](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary)

# excel-formula - 单个公式 Excel 中的 SUM 运算

> ID：13615007
> 
> 赞同：0
> 
> 时间：2012-11-28T21:48:44.530
> 
> 标签：excel-formula

我正在尝试制作一个计算公式： `SUM[ Qi * (P1i - P2i), i=1 to n]`

例子：

```
 Q           X               P1     P2
 100         2,261.00    22.61  22.59
 19,600      200,151.39      10.21  10.18
 10,700      800,008.00      74.77  74.84 
```

[100 * (22.61 - 22.59 )] + [19,699 * (10.21 - 10.18)] + ....

我可以做一个解决方法，在我的第一个计算中添加一列，然后对该列求和。但我只是好奇我是否可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:53:54.040

您可以尝试`SUMPRODUCT`（假设您的数据开始于`A2`）：

```
=SUMPRODUCT(A2:A4,(C2:C4-D2:D4)) 
```

并将 延伸`4`到您想要的边界。

# java - 从类对象的方法接收空指针异常

> ID：13615008
> 
> 赞同：1
> 
> 时间：2012-11-28T21:48:45.443
> 
> 标签：java, android, class, nullpointerexception, android-custom-view

我有一个在“主”XML 文件中声明的自定义视图：

```
 <com.app.DrawView
    android:id="@+id/my_view"
    android:layout_height="match_parent"
    android:layout_width="match_parent" /> 
```

然后在我活动的 onCreate 方法中：

```
setContentView(R.layout.main); 
```

这一切都适用于显示自定义视图。但我需要做的是将值传递给自定义视图。因此，我尝试制作自定义视图类的实例：

```
DrawView drawView = (DrawView) findViewById(R.id.my_view); 
```

然后，在 DrawView 类中，我创建了一个方法：

```
public void setUserData(boolean data){
      useEraser = data;
} 
```

现在，我的问题是在我的活动中尝试访问 DrawView 对象的此方法时，我不断收到 NullPointerExeption，如下所示：

```
boolean value = true;
drawView.setUserData(value); 
```

错误指向“drawView.setUserData(value)”行。我究竟做错了什么？我知道我一定犯了一个简单的错误，但它让我疯狂地试图找到它。任何帮助或建议都会很棒！

**编辑：**我接受了一个正确的答案，但是，我仍然想知道为什么我的原始解决方案不起作用。因此，我发现，尽管我在问题中正确订购了它，但我还是放置了

```
DrawView drawView = (DrawView)findViewById(R.id.my_view); 
```

前

```
setContentView(R.layout.main); 
```

我知道这是我忽略的一个简单错误！感谢大家的回答，我很感激。我希望这对任何面临类似问题的人都有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:53:21.510

如果你想创建一个新的试试这个，

在您的 xml 中放置一个线性布局作为支架

```
<LinearLayout
        android:id="@+id/ln1"
        android:layout_width="wrap_content"
       android:layout_height="300dp" >

    </LinearLayout> 
```

并在下面的 oncreate 中使用

```
LinearLayout ln = (LinearLayout)findViewById(R.id.ln1);
         com.example.mixed.DrawView dw2 = new DrawView(getApplicationContext());
         dw2.setUserData(false);
         ln.addView(dw2); 
```

如果你把它放在你的布局xml中，它就没有问题。

![在此处输入图像描述](../Images/49bb51df14f1c6ee0f5b3e69ac598206.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-28T22:18:01.407

您不会从方法调用中“接收”异常。方法可能会抛出异常，您可能会在 try-catch 块中捕获该异常。在这种情况下，异常将被 catch 块捕获。否则，它会发生在方法内部。由于调用者正在抛出异常，因此错误不在您的方法中。

在这种情况下：

```
boolean value = true;
drawView.setUserData(value); 
```

唯一可以为空的是drawView。因此，findViewById 返回 null，或者您在其他地方将 drawView 设置为 null。您可以通过在此处设置断点来证明这一点：

```
DrawView drawView = (DrawView) findViewById(R.id.my_view); 
```

并检查 drawView 的值。

根据您提供的信息，我不明白为什么会这样，但这是您必须做的检查。

顺便说一句，您应该始终在自定义视图中提供所有 3 个视图构造函数原型。你错过了：

```
 public DrawView(Context context, AttributeSet attrs, int defaultStyle){
 super(context, attrs, defaultStyle); 
```

如果默认小部件样式被覆盖，则使用此构造函数。

# android - Android应用程序编译错误

> ID：13615010
> 
> 赞同：0
> 
> 时间：2012-11-28T21:48:50.693
> 
> 标签：android, android-emulator, compiler-errors

我创建了一个具有 LoginActivity 的应用程序（使用具有恒定凭据的登录表单） TestmapActivity（使用 Google Map Api - 显示地图）

布局：登录（LoginActivity）

## myMap (TestmapActivity)

```
Intent dashboard = new Intent(LoginActivity.this, TestmapActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard); 
```

* * *

我用google Api 2.3编译了上面的项目

成功安装，但登录成功时出现错误：应用程序意外停止

```
11-28 16:44:14.162: E/AndroidRuntime(611): FATAL EXCEPTION: main

11-28 16:44:14.162: E/AndroidRuntime(611): java.lang.NoClassDefFoundError: com.example.androidhive.TestmapActivity
11-28 16:44:14.162: E/AndroidRuntime(611):  at com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:79)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.view.View.performClick(View.java:2485)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.view.View$PerformClick.run(View.java:9080)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.os.Handler.handleCallback(Handler.java:587)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.os.Looper.loop(Looper.java:130)
11-28 16:44:14.162: E/AndroidRuntime(611):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-28 16:44:14.162: E/AndroidRuntime(611):  at java.lang.reflect.Method.invokeNative(Native Method)
11-28 16:44:14.162: E/AndroidRuntime(611):  at java.lang.reflect.Method.invoke(Method.java:507)
11-28 16:44:14.162: E/AndroidRuntime(611):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-28 16:44:14.162: E/AndroidRuntime(611):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-28 16:44:14.162: E/AndroidRuntime(611):  at dalvik.system.NativeStart.main(Native Method) 
```

# java - CDI @Alternative - 为每个测试用例选择替代方案

> ID：13615018
> 
> 赞同：3
> 
> 时间：2012-11-28T21:49:27.753
> 
> 标签：java, testing, cdi

我想知道在使用 CDI 时如何指定在测试期间应该使用哪个模拟实现。

我知道我可以用@Alternative 标记一个模拟实现，但是我需要在beans.xml 中定义它。我想要多个模拟（用于多个对象）。假设我有一个 OrderService 和一个 EmailService。我正在编写一些不希望 EmailService 发送电子邮件的验收测试。然后是系统测试的另一组测试 - 我确实想发送电子邮件，但不应该创建真正的订单。

理想的解决方案是为每个测试方法调用指定 Alternatives，如下所示：

```
@BeforeMethod
public void before(){
  // in this test suite we're using mock email service
  addAlternative(MockEmailService.class);
}
@Test
public void testMyStuff(){
  issueAnOrder(); // and verify that it worked. no emails sent!
} 
```

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:42:50.293

CDI-Unit 内置了对模拟[http://jglue.org/cdi-unit/](http://jglue.org/cdi-unit/)的支持， 只需在测试类中将模拟指定为生产者字段即可。

```
class Starship {

  @Inject
  Engine engine; //This will be mocked

  void start() {
    engine.start();
  }
}

@RunWith(CdiRunner.class)
class TestStarship {

  @Inject
  Starship starship;

  @Produces
  @Mock // Mockito will create a mock for us.
  Engine engine;

  @Test
  public void testStart() {
    starship.start();

    // Verify that the mocks start method is called at least once.
    Mockito.verify(engine, Mockito.atLeastOnce()).start();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:53:44.647

我认为您需要 @Alternative/@Specialisation 和 Arquillian 的组合。[Arquillian](http://www.jboss.org/arquillian.html)为集成测试提供了新的可能性，并允许您通过更改“beans.xml”为每个测试指定不同的替代方案。具体细节请参考[这个](https://stackoverflow.com/questions/7349045/weld-cdi-where-do-i-put-my-test-only-beans-xml-that-configures-alternatives)问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:05:06.633

Roland 可能是最好的可接受的答案，另一种可能的方法是创建一个可移植的扩展程序，它将读取您在测试或环境中设置的一些属性以及 ProcessAnnotatedType.veto() 您不想要的版本。

Arquillian 的另一个选择是不捆绑所有替代方案，而是有多个部署可供选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-08T14:42:08.317

您可以通过在测试中以编程方式配置 CDI 容器来做到这一点。

为此，`disableDiscoveryMode()`请在您的测试类中设置您的 CDI 容器，将测试所需的类添加到容器中（至少是您的测试主题**和**替代类），并将替代类添加为替代类。

下面举个例子。Greeter 是我的测试对象， Greeting 是默认 bean， GreetingAlt 是替代品。

测试类：

```
public class GreeterTest {

    private Greeter greeter;

    @Before
    public void setUp() {
        try (WeldContainer container = new Weld().disableDiscovery()
                .addBeanClass(Greeter.class)
                .addBeanClass(Greeting.class)
                .addBeanClass(GreetingAlt.class)
                .addAlternative(GreetingAlt.class).initialize()) {
            greeter = container.select(Greeter.class).get();
        }
    }

    @Test
    public void hiShouldContainMock() {
        assertThat(greeter.hi(), containsString("Mock"));
    }
} 
```

主要课程：

```
public class Greeter {
    @Inject IGreeting iGreeting;
    public String hi() { return iGreeting.greet("John"); }
} 
```

```
@Default
public class Greeting implements IGreeting {
    @Override public String greet(String name) { return "Hello " + name; }
} 
```

```
@Alternative
public class AltGreeting implements IGreeting {
    @Override public String greet(String name) { return "Mock " + name; }
} 
```

# c# - 删除带有命名空间前缀的 xmlns 属性

> ID：13615019
> 
> 赞同：4
> 
> 时间：2012-11-28T21:49:30.833
> 
> 标签：c#, xml, vb.net, xelement

这个问题是这个问题的逻辑延续[-](https://stackoverflow.com/questions/13613917/merge-xelement-into-xdocument-and-resolve-namespaces)现在假设一个`XElement`包含非默认命名空间中的元素：

```
<Body xmlns="http://schemas.microsoft.com/sqlserver/reporting/2010/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner">
  <ReportItems />        
  <Height />
  <rd:Style />
</Body> 
```

我正在尝试采用与上一个问题的答案中建议的方法相同的方法，即删除`xmlns`属性，但是当它是 xmlns + 前缀时它不起作用，就像这样`xmlns:xx`。

**TL;DR 版本**

这有效：

```
Dim xml = <Body xmlns="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"/>
xml.Attribute("xmlns").Remove() 
```

这不会：

```
Dim xml = <Body xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"/>
xml.Attribute("xmlns:rd").Remove() 
```

收到此错误：

```
XmlException was unhandled
The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

如何`xmlns:xx`从 中删除属性`XElement`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:08:50.303

试试这个：

```
xml.Attribute(XNamespace.Get("http://www.w3.org/2000/xmlns/") + "rd").Remove() 
```

# sql - sql数据库排序规则不匹配

> ID：13615020
> 
> 赞同：0
> 
> 时间：2012-11-28T21:49:38.583
> 
> 标签：sql, sql-server

我是 SQL 新手，我正在尝试使用一个脚本查询两个单独的数据库。但是，两个数据库都有不同的排序规则。我试图通过运行这样的脚本来强制更改排序规则：

```
use master
go
alter database database1
collate SQL_Latin1_General_CP1_CI_AS
go 
```

这确实会运行，但是当我尝试运行此查询时它没有任何区别（即使两个数据库现在都使用 SQL_Latin1_General_CP1_CI_AS）：

```
select [Manufacturer],[ModelNumber] from database1.dbo.CVStore_Products inner join database2.dbo.tProduct on [StoreProductCode]=[ModelNumber] 
```

我究竟做错了什么？因为我不断收到此错误：

```
Msg 468, Level 16, State 9, Line 1
Cannot resolve the collation conflict between "SQL_Latin1_General_CP1_CI_AS" and "Latin1_General_CI_AS" in the equal to operation. 
```

提前感谢您的帮助！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:58:36.370

整理可能会很痛苦。但是它已经存在了很长一段时间。这是[Pinal Dave 发表](http://blog.sqlauthority.com/2007/04/30/case-sensitive-sql-query-search/)于 2007年的一篇文章。
它提供了直接更正查询中的排序规则或更改特定列的排序规则的示例。

据我所知，更改整个数据库的排序规则设置不会影响现有列。
任何新列都将使用新设置。

# c# - 命名空间：System.Windows.Media.Imaging 试图在我的 c# 类中使用它

> ID：13615022
> 
> 赞同：0
> 
> 时间：2012-11-28T21:49:54.260
> 
> 标签：c#

命名空间：System.Windows.Media.Imaging

我正在尝试使用此命名空间中的一个 cals，但是当我尝试在我的指令中使用“使用”添加它时，我看不到 System.Windows 和命名空间。如何将它添加到我的项目中，以便我可以从中使用 BitmapImage 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:36:33.527

右键单击**解决方案资源管理器中的“****引用**” ，选择“**添加引用**” 。在弹出窗口中单击 **浏览**e 选项卡。查找您要引用的特定文件。现在确保您在班级顶部有声明。

 ****** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T17:51:47.867

System.Windows.Media.Imaging 命名空间是 PresentationCore.dll 的一部分（如果您使用的是 Visual Studio 2008，那么 WPF 应用程序模板将自动添加此引用）。请注意，此命名空间不是 WIC 库的直接包装，尽管大部分更常见的用途仍然可用，并且这些名称如何映射到 WIC 版本相对明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:48:14.247

您必须将“PresentationCore.dll”添加到 haakon319 描述的项目引用中*****

# php - 使用 php for magento 创建产品时无法添加库存、自定义属性和元数据

> ID：13615027
> 
> 赞同：2
> 
> 时间：2012-11-28T21:50:24.403
> 
> 标签：php, magento

我正在制作一个脚本，以帮助更轻松地将产品导入我们的 magento 安装，现在它可以部分工作。但是，我在添加库存数量以及与库存以及元标题、描述和关键字有关的任何其他内容时遇到问题。我也无法添加称为 EAN 的自定义属性。这是我评论的代码，以帮助了解哪些有效，哪些无效。

```
Mage::init();
$product = Mage::getModel('catalog/product');

$product->setSku($itemid);
$product->setName($name);
$product->setDescription($desc);
$product->setShortDescription($longname);
$product->setPrice($price);
$product->setTypeId($prodtype);
$product->setAttributeSetId($attributesetid); // need to look this up
$product->setCategoryIds($categorys); // need to look these up
$product->setWeight(10.0);
$product->setTaxClassId(2); // taxable goods
$product->setVisibility(4); // catalog, search
$product->setStatus(1); // enabled
//After this nothing is added
$product->setMetaTitle($name); //does not work
$product->setMetaDescription($longname); //does not work
$product->setMetaKeywords($keywords); //does not work
$product->setEan($ean); //custom variable, does not work
$product->setCreatedAt(strtotime('now')); //does not work

// assign product to the default website
$product->setWebsiteIds(array(Mage::app()->getStore(true)->getWebsite()->getId())); //This works

$count = 0;
foreach ($listOfImages as $imagePath) {
    $mode = array();
    if ($count == 0) {
        $mode = array("thumbnail", "small_image", "image");
    }
    $product->addImageToMediaGallery($imagePath, $mode, false, false); //works!
    $count++;
}
//This does not work at all
$stockData = Mage::getModel('cataloginventory/stock_item');
$stockData->assignProduct($product);
$stockData['qty'] = $stock;
if ($stock > 0) {
$stockData->setData('is_in_stock', 1);
} else {
$stockData->setData('is_in_stock', 0);
}
$stockData->setData('manage_stock', 1);
$stockData->setData('use_config_manage_stock', 1);
$stockData->setData('stock_id', 1);
$stockData->setData('store_id', array(Mage::app()->getStore(true)->getWebsite()->getId()));
$product->setStockData($stockData);

//Saving the product works
try {
    $product->save();
} catch (Exception $ex) {
    //Handle the error
    print_r($ex);
 } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:19:07.147

对于股票尝试

```
$stockItem = Mage::getModel('cataloginventory/stock_item');
$stockItem->assignProduct($product);
$stockItem->setData('is_in_stock', 1);
$stockItem->setData('qty', 1);

$product->setStockItem($stockItem); 
```

请参阅[在 Magento 1.7 中添加新产品时设置默认产品值](https://stackoverflow.com/questions/13289371/set-default-product-values-when-adding-new-product-in-magento-1-7)

对于关键字 - `$product->setMetaKeyword()`（没有最后的's'）请参阅[http://www.magentocommerce.com/boards/viewthread/193431/](http://www.magentocommerce.com/boards/viewthread/193431/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:55:31.273

经过几个小时的搜索，我想通了。因为我在 Magento 之外的文件中，所以我需要创建管理会话。这解决了我遇到的大部分问题。我添加了以下代码。

```
// Set an Admin Session
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
Mage::getSingleton('core/session', array('name' => 'adminhtml'));
$userModel = Mage::getModel('admin/user');
$userModel->setUserId(1);
$session = Mage::getSingleton('admin/session');
$session->setUser($userModel);
$session->setAcl(Mage::getResourceModel('admin/acl')->loadAcl()); 
```

# kohana - 使用 Kohana 3.0 授权.NET

> ID：13615029
> 
> 赞同：0
> 
> 时间：2012-11-28T21:50:34.057
> 
> 标签：kohana

我正在尝试在 kohana 3.0 项目中使用 Authorize.Net。我已经在 bootstrap.php 文件中设置了模块。
在我专注于代码之前，我想最好地理解这个过程。在他们的示例代码中，它是这样写的。

```
<?php
require_once 'anet_php_sdk/AuthorizeNet.php'; // Include the SDK you downloaded in Step 2
$api_login_id = 'I_put_my_login_id_here';
$transaction_key = 'and_my_transaction_key_here;
$amount = "5.99";
$fp_timestamp = time();
$fp_sequence = "123" . time(); // Enter an invoice or other unique number.
$fingerprint = AuthorizeNetSIM_Form::getFingerprint($api_login_id,
  $transaction_key, $amount, $fp_sequence, $fp_timestamp)
?>

<form method='post' action="https://test.authorize.net/gateway/transact.dll">
<input type='hidden' name="x_login" value="<?php echo $api_login_id?>" />
<input type='hidden' name="x_fp_hash" value="<?php echo $fingerprint?>" />
<input type='hidden' name="x_amount" value="<?php echo $amount?>" />
<input type='hidden' name="x_fp_timestamp" value="<?php echo $fp_timestamp?>" />
<input type='hidden' name="x_fp_sequence" value="<?php echo $fp_sequence?>" />
<input type='hidden' name="x_version" value="3.1">
<input type='hidden' name="x_show_form" value="payment_form">
<input type='hidden' name="x_test_request" value="false" />
<input type='hidden' name="x_method" value="cc">
<input type='submit' value="Click here for the secure payment form">
</form> 
```

因此，我假设用户访问我的网站并尝试购买产品。我将过程处理到控制器中。我将使用 php_curl。

```
public function action_authorize(){
$url = 'https://test.authorize.net/gateway/transact.dll';

                    $post_string = '';
                    $request = curl_init($url);

                    curl_setopt($request, CURLOPT_HEADER, 0); // set to 0 to eliminate header info from response
                    curl_setopt($request, CURLOPT_RETURNTRANSFER, 1); // Returns response data instead of TRUE(1)
                    curl_setopt($request, CURLOPT_POSTFIELDS, $post_string); // use HTTP POST to send form data
                    curl_setopt($request, CURLOPT_SSL_VERIFYPEER, FALSE); // uncomment this line if you get no gateway response.

                    $post_response = curl_exec($request); // execute curl post and store results in $post_response

                    curl_close($request);

                    $response_array = explode($post_values["x_delim_char"],$post_response);
} 
```

这里我的问题是如何知道服务器对我的查询结果的响应 *$response_array*。如何识别错误代码？另一件事，我启用了 Authorize 模块。如何从我的控制器访问 *'api_login'* 和 *'transaction_key'* ？当我在控制器中执行此操作时，出现错误 *

```
$authorize = new Authorize;
$authorize->api_login; 
```

*   给出一个错误。实际上我希望能够在 Kohana3.0 中实现 Authorize.NET 模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:37:42.713

将您的 Authorize.Net SDK 类存储在 application/vendor/anet_php_sdk/

演示控制器方法：

```
class Controller_Payment extends Controller_Template
{
    // Set properties at the top of the class for easier changes later
    $this->authorize_url = 'https://test.authorize.net/gateway/transact.dll';
    $this->api_login_id = 'I_put_my_login_id_here';

    public function action_authorize()
    {
        require Kohana::find_file('vendor', 'anet_php_sdk/AuthorizeNet');

        if($_POST)
        {
            $request = curl_init($this->authorize_url);

            // Build your post string
            $post_string = http_build_query($_POST);

            // The rest of the Authorize.net code
            curl_setopt($request, CURLOPT_HEADER, 0);
            curl_setopt($request, CURLOPT_RETURNTRANSFER, 1);
            curl_setopt($request, CURLOPT_POSTFIELDS, $post_string);
            curl_setopt($request, CURLOPT_SSL_VERIFYPEER, FALSE);
            $post_response = curl_exec($request);
            curl_close($request);

            $response_array = explode($post_values["x_delim_char"],$post_response);

            // Look in your SDK docs to determine the actual values you need
            // to check to verify that the transaction was successful:
            if($response_array['code'] == 200)
            {
                Request::current()->redirect('success/page');
            }
            else
            {
                // Error handling
            }
        }

        $transaction_key = 'transaction_key_here;
        $amount = "5.99";
        $fp_timestamp = time();
        $fp_sequence = "123" . time(); // Enter an invoice or other unique number.
        $fingerprint = AuthorizeNetSIM_Form::getFingerprint($this->api_login_id,
            $transaction_key, $amount, $fp_sequence, $fp_timestamp)

        $this->template->content = View::factory('payment/page')
            ->set('api_login_id', $this->api_login_id)
            ->set('amount = $amount)
            ->set('fp_timestamp = $fp_timestamp)
            ->set('fp_sequence = $fp_sequence)
            ->set('fingerprint', $fingerprint);
    }
} 
```

既然你问了，从控制器访问 POST 变量：

```
$transaction_key = $_POST['transaction_key']; 
```

查看文件（views/payment/page.php）：

```
<form method='post' action="payment/authorize">
<input type='hidden' name="x_login" value="<?php echo $api_login_id?>" />
<input type='hidden' name="x_fp_hash" value="<?php echo $fingerprint?>" />
<input type='hidden' name="x_amount" value="<?php echo $amount?>" />
<input type='hidden' name="x_fp_timestamp" value="<?php echo $fp_timestamp?>" />
<input type='hidden' name="x_fp_sequence" value="<?php echo $fp_sequence?>" />
<input type='hidden' name="x_version" value="3.1">
<input type='hidden' name="x_show_form" value="payment_form">
<input type='hidden' name="x_test_request" value="false" />
<input type='hidden' name="x_method" value="cc">
<input type='submit' value="Click here for the secure payment form">
</form> 
```

# visual-c++ - 独立于编译器的 C++ 代码资源

> ID：13615032
> 
> 赞同：1
> 
> 时间：2012-11-28T21:50:42.823
> 
> 标签：visual-c++, g++

在大学里，我必须通过“计算机科学导论”课程。在本课程中，他们会为您提供有关各种主题的不同练习，您必须使用汇编、c、c++ 来解决这些问题。

我的问题是，我正在使用不同的编译器（g++ 和 Visual Studio C++），但是它们解释我给它们的代码不同或需要不同的代码，所以我必须至少实现我的程序两次！

我正在寻找信息，我如何编写适用于 gcc 和 Visual Studio C++ 的代码。

我已经处理的一些例子：

在 VSC++ 上工作：

```
template<typename T, template<typename X, typename Y> class container, class Allocator>
int in(int p_number, va_list params){
std::ifstream &data = *(va_arg(params, std::ifstream*));
if(!data.good()){
    return -1;
}

char delimiter = (char)va_arg(params, int), temp;
std::stringstream ss;
while((temp = data.get())!=delimiter){
    if(data.eof()){
        return 0;
    }
    ss.put(temp);
}
T value;
ss >> value;

if(data.eof()){
    return 0;
}

typedef container<T, Allocator>* con_p;

container<T, Allocator> &con = *(va_arg(params, con_p));
con.push_back(value);

return 1;
}

template<typename T>
struct MAP{
template<typename itr>
static int map(itr begin, itr end, int (*fp)(int, va_list), int p_number, ...){
    int p_number2 = p_number+1;

    va_list list;
    va_start(list, fp);

    int r=0, temp;
    for(; begin!=end; ++begin){
        p_number = reinterpret_cast<int>(&(*begin));
        temp = (*fp)(p_number2, list);
        if(temp==-1){
            return -1;
        }
        r += temp;
    }

    va_end(list);

    return r;
}
};

template<typename T,
        template<typename X, typename Y> class container,
        class Allocator>
int write(const container<T, Allocator> &con, std::string filepath, char delimiter = '\n'){
std::ofstream data;
data.open(filepath, std::ios::out | std::ios::binary | std::ios::trunc);
int r = MAP<T>::map(con.begin(), con.end(), out<T>, 2, &data, delimiter);
data.close();
return r;
} 
```

* * *

在 g++ 中工作：

```
template<typename T, class A, template<typename X, typename Y> class container>
int write(const container<T, A> &con, std::string filepath, char delimiter = '\n'){
long temp; int r = 0;
std::ofstream data;
data.open(filepath.c_str(), std::ios::out | std::ios::binary | std::ios::trunc);

for(typename container<T, A>::const_iterator i=con.begin(); i!=con.end(); ++i){
    if(!data.good()){
        data.close();
        return -1;
    }

    temp = (long)data.tellp();
    data << *i << delimiter;

    r += ((long)data.tellp() - temp);
}

data.close();
return r;
} 
```

相同的功能，但非常不同的实现，因为 VSC++ 接受的模板定义不被 g++ 接受。

PS仅以防万一，如果我的大学正在搜索互联网以找出答案，如果他们的学生正在从互联网上复制他们的作业。我的名字是 TU-Darmstadt 的 Christian W. 学生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:53:59.403

每当你遇到这种情况，就意味着你的代码很可能是错误的。编译器应该正确处理正确的代码。因此，请始终检查您是否做出了不可移植的假设，或者是否存在更宽容的编译器可以接受的错误。

话虽如此，一般来说，当你想为不同的平台做编译时，你会使用条件编译块；也就是说，您将代码包含在

```
#ifdef PLATFORM_MACRO
    // conditional code here
#endif 
```

其中 PLATFORM_MACRO 是为相关平台设置的#define。然后，该块中的代码将只能被所需的平台看到（即：定义 PLATFORM_MACRO 的地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:18:06.163

您检查过编译器消息吗？产生错误消息是有原因的。对我来说`gcc`，一旦包含适当的标题（等）并纠正类型（例如，而不是等） `<cstdio>`，就会编译第一个示例。`<iostream>``data.open(filepath.c_str(), ...``data.open(filepath, ...`

# emacs - 如何设置 Emacs 实例以在单独的 GNU 屏幕窗口中使用单独的历史记录？

> ID：13615033
> 
> 赞同：1
> 
> 时间：2012-11-28T21:50:47.363
> 
> 标签：emacs, elisp, gnu-screen

我经常在不同的 GNU 屏幕窗口中打开几个 Emacs 实例。我怎样才能给他们单独的编译历史等？

问题是：当我`M-x compile`在一个窗口中的 Emacs 中执行并关闭它，然后在另一个 GNU 屏幕窗口中打开另一个 Emacs 时，它将（自然地）具有相同的历史记录，即，向上箭头给了我在其他窗口。

如何将它们设置为在单独的 GNU 屏幕窗口中使用单独的命令（等）历史记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:46:03.180

`compilation-mode`的`compile`函数使用变量`compile-history`. 通常这不会在不同的 Emacs 实例之间共享。

即：如果您：

*   转到一个屏幕会话并输入 emacs
*   然后输入 Mx compile
*   然后输入：“make nothing”作为编译命令
*   然后转到另一个屏幕窗口并键入 emacs
*   然后输入 Mx compile
*   那么“一事无成”就不会被载入史册。

如果是，那么：

*   以某种方式在该变量上启用了历史持久性，检查变量的文档以查看
*   或者“emacs”命令实际上是一个 emacsclient 命令

说了这么多，如果你愿意，你仍然可以有不同的编译历史：

*   在每个屏幕会话中设置一个环境变量
*   将环境变量传递到 emacsclient 命令行上的 emacsclient 会话中，`-e`例如。
*   建议 ( `defadvice`)函数根据传入的 ENV VAR`compilation-read-command`绑定一个新列表`compile-history`

# html - 在css中定位偶数和奇数

> ID：13615035
> 
> 赞同：-2
> 
> 时间：2012-11-28T21:51:06.340
> 
> 标签：html, css

我很绝望。我想使用的一个代码有问题。首先有截图：

在 Zeta 的帮助下新的屏幕截图。现在好多了，但在某些项目上仍有空格： [https ://dl.dropbox.com/u/28372149/gasps.jpg](https://dl.dropbox.com/u/28372149/gasps.jpg)

您会看到项目之间的那些空格。我不想帮助解决角落和点导致我的图形错误，我会修复它，但大问题是那些空间。

html:

```
<ol id="timeline">

<li>
    <div class="time">2.1.2012</div>
    <span class="corner"></span>
        <p style="text-align: left">
        V Česku bylo místy tepleji než v Řecku.
        <a href="http://www.novinky.cz/domaci/255046-v-cesku-bylo-misty-tepleji-nez-v-recku.html">
        CELÁ ZPRÁVA
        </a>
        </p>
  </li>

  <li>
    <div class="time">1.1.2012</div>
    <span class="corner"></span>
            <p style="text-align: left">
                <strong>Češi věznění v Zambii jsou doma, ze země odjeli při utajené akci.</strong>
                </br>
                <img align="centre" src="foto/leden/1.jpg"></br>Češi věznění v Zambii jsou doma, ze země odjeli při utajené akci. Trojice mužů obviněná
                tamními úřady ze špionáže se dostala domů ke konci roku, pravděpodobně po zásahu českých úřadů. Ty zambijské akci se špionážními prvky odsoudily.
                <a href="http://www.novinky.cz/domaci/254926-cesi-vezneni-v-zambii-jsou-doma-ze-zeme-odjeli-pri-utajene-akci.html">
                CELÁ ZPRÁVA
                </a>
                </p>
  </li> 
```

CSS：

```
time,.time{
    font-size: 12px; color:gray; border-bottom: 1px solid #8b130e; min-width:350px; height:15px; padding-bottom: 1px;
}
#timeline{
    width:800px; list-style-type: none; background: url(timeline.png) top center repeat-y; margin: 0 auto; padding:20px; margin-bottom:10px;
}

#timeline li{
    width:375px; -moz-border-radius:2px; border-radius:2px; webkit-border-radius:2px; border:2px solid #d56560; padding:5px;background-color:#FFF;
}

#timeline li:nth-of-type(odd){
clear: right;float:both;float:right
}
#timeline li:nth-of-type(even){
clear: left;float:both;float:left
}
#timeline li:nth-of-type(odd), #timeline li:nth-of-type(even){
    margin:-10px 0 20px 0;
}
#timeline li:nth-of-type(even) .corner{
        position:absolute; display:block; margin-left:380px;width:20px; height:15px;background:url(right.png);
}
#timeline li:nth-of-type(odd) .corner{
        position:absolute;display:block;margin-left:-25px;width:20px;height:15px;background:url(left.png);
} 
```

有人真的可以帮我吗？我会很高兴的:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:00:20.800

那是因为你使用[`clear:both`](http://www.w3.org/TR/CSS2/visuren.html#flow-control)，它强制右边的元素保持在左边的元素之下，反之亦然。仅`clear:left;float:left;`用于奇数元素和`clear:right; float:right;`偶数元素（[示例](http://jsfiddle.net/P7kce/3/)）。

此外，您必须同时使用**偶数**`float`和奇数元素。将使以下内容在另一侧流动，因此如果您仅应用偶数*或*奇数元素，您将再次获得空格。**[`float`](http://www.w3.org/TR/CSS2/visuren.html#float-position)`float`**

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:13:56.373

它不能用纯 css（跨浏览器兼容）来完成。您需要使用 JS 并重新计算所有 li 元素的绝对位置。也许这篇文章[三种超级简单的方法来完成砌体布局](http://designshack.net/articles/css/masonry/)可以提供帮助。***

# ruby - 包括来自其他文件的路由

> ID：13615037
> 
> 赞同：0
> 
> 时间：2012-11-28T21:51:17.257
> 
> 标签：ruby, ruby-on-rails-3

我编写了以下代码并且它可以工作，但是有没有更好的方法来包含文件而不是评估文件的内容？我试图只调用 require 但随后在 mainObj 的上下文中处理文件。

想法？

```
module ActionDispatch
  module Routing
    class Mapper
      def include_routes(file)
        file = File.new("#{Rails.root}/config/routes/#{file}.rb", "r")
        buffer = ""
        while (line = file.gets)
          buffer += line
        end
        file.close

        eval(buffer)

      end
    end
  end
end 
```

一个单独的文件看起来像这样

```
resources :brands do
  collection do
    post :sort
    get :published
    get :unpublished
    get :deleted
  end
  member do
    get :notes
    get :undelete
    get :delete
    post :move_node
    get :get_node_children
  end
  resources :notes, :only => [:new, :create]
end
get "brands/filter/:type" => "brands#filter", :as => 'filter_brands' 
```

路线文件看起来像这样

```
KohcmsV4::Application.routes.draw do

  devise_for :users

  mount_languages

  namespace :admin do

    root :to => 'admin#index'

    include_routes "admin/media"
    include_routes "admin/videos"
    include_routes "admin/roles"
    include_routes "admin/users"
    include_routes "admin/images"
    include_routes "admin/videos"

    language_scope do  

      include_routes "admin/pages"
      include_routes "admin/brands"
      include_routes "admin/pcategories"
      include_routes "admin/products"
      include_routes "admin/procedures"
      include_routes "admin/sections"

    end
  end

  root :to => 'application#index'
  #match '*not_found', to: 'errors#error_404'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:59:06.493

在您的`routes.rb`中，您可以执行以下操作：

```
Dir["#{Rails.root}/config/routes/*.rb"].each do |route_file|
  load route_file
end 
```

如果您确实使用该`load`方法，则需要将子路由文件更改为如下所示：

```
KohcmsV4::Application.routes.draw do
  namespace :admin do
    resources :brands do
      collection do
      post :sort
      get :published
      get :unpublished
      get :deleted
    end
    ...
  end
end 
```

# asp.net-mvc-3 - MVC 3 应用程序与不断变化的数据库的连接

> ID：13615038
> 
> 赞同：0
> 
> 时间：2012-11-28T21:51:19.160
> 
> 标签：asp.net-mvc-3, entity-framework, enterprise-library, code-first, ef-database-first

我刚刚开始学习 ASP.NET MVC 3，在决定为我的应用程序连接到数据库的最佳方式时遇到了很大的麻烦。由于我的应用程序数据库将定期增强，因此可以添加/删除新表、列，并且可能还会更改某些列的数据类型。因此，对于这种情况，哪种方法最适合我，以便我的代码易于管理，并且这些更改不会影响我的代码（例如：如果我在 EF 中删除并重新选择表，那么将生成新类并且代码与课程会受到影响）？我读过有*代码优先*、*数据库优先*、*实体框架*、*企业库数据访问块*、*SQL 连接调用存储过程等方法*但我不确定哪个在这种情况下效果最好，可能是我错过了 ASP.NET MVC 3 连接到数据库的真正风味。

*编辑1*

我不知道为什么它被要求关闭，但除了这个论坛，我别无选择。我发现了类似的问题，它说明了我的问题[Code First vs Data First](https://stackoverflow.com/questions/9023186/code-first-approach-versus-database-first-approach?rq=1)的部分内容。关于数据库优先方法，答案刚刚在我脑海中造成了混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T08:53:52.607

首先，您正在开发 MVC 应用程序这一事实与您将使用哪种技术来构建数据访问层的决定完全脱钩。

.NET 有许多数据访问选项，分为两类。我列出了我心中的一个，每个都有几点

## 直接数据访问

1.  [ADO.NET DataReader](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.110%29.aspx)（速度快，人工多，必须手动编写 SQL 代码）
2.  [ADO.NET 数据集](http://msdn.microsoft.com/en-us/library/vstudio/ss7fbaez.aspx)

## 对象关系映射器 (ORM)

1.  [LINQ2SQL](http://msdn.microsoft.com/en-us/library/vstudio/bb386976.aspx)
2.  [实体框架数据库优先](http://msdn.microsoft.com/en-us/data/jj205424)
3.  [实体框架代码优先](http://msdn.microsoft.com/en-us/data/jj193542)
4.  [休眠](http://nhforge.org/)
5.  许多商业第三方工具
6.  [小巧玲珑](http://code.google.com/p/dapper-dot-net/)

手动编写 SQL 代码绝对可以让您快速访问，但代价是您必须自己完成所有操作。

ORM 为您的数据库提供了某种抽象层，因此您可以只使用对象。这是以牺牲一些性能为代价的（查询生成、从 SQL 结果到对象的映射）。

Dapper 在这里有些特别，因为它是一个专注于读取性能的 ORM，但它需要您自己编写 SQL 查询，并且只有有限的写入支持。

我个人有使用 DataSets、LINQ2SQL、EF Db First、EF Code First 和 Dapper 的经验。当我不得不启动一个新应用程序时，如果您不希望负载非常高，我会使用 EF Code First。当没有现有数据库时尤其如此。您只需编写类并生成数据库。更酷的是[自动迁移](http://msdn.microsoft.com/en-us/data/jj554735.aspx)，您可以在其中更改类，EF 将更新您的数据库结构。如果您注意生成的代码，这甚至可以在不丢失数据的情况下实现。

如果您需要高性能，那么我会选择 Dapper，您可以完全控制 SQL，开销很小，但映射引擎很舒适。

另外，你会在so上发现很多这样的问题（只需寻找*最喜欢的 orm*）：

*   [https://stackoverflow.com/q/3505/25727](https://stackoverflow.com/q/3505/25727)
*   [ASP.NET MVC 和 ORM 选择](https://stackoverflow.com/questions/1004295/asp-net-mvc-and-orm-selection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:25:36.220

我正在类似的场景中开发，在旅途中创建、删除或更新表（不是一个非常好的场景）。我目前正在使用这种`Database First`方法，因为它非常适合这种情况。

您应该在以下情况下使用`Database First`：

您将进行数据库结构更改，同时用户将插入或更新数据。否则，如果您选择`Code First`方法，每次更改数据库结构时，您的数据都会被删除，您可以实施一些黑客攻击以恢复它，但如果您的应用程序正在运行，可能会发生很多问题。

如何`Database first`处理结构变化：

1.  您在“用户”表（在您的数据库中）中进行了一些更改。
2.  你去 Visual Studio，并使用 DBContext 它将更新“用户”类。

如何`Code first`处理结构变化：

1.  您更改了“用户”类（在您的模型中）。
2.  将自动更新您的数据库以填充用户表中所需的更改（丢失存储的数据）
3.  如果你处理它，你可以恢复你的数据（但如果你的数据库正在使用它就不是一件好事）。

无论如何，我不建议您以这种方式工作，如果您的数据库设计得很好，然后在此基础上开始编码，那就更好了。

**编辑：**

我的答案似乎不再正确，因为 Entity Framework 4.3 他们添加了一些新的很酷的功能：[Code First Migrations](http://msdn.microsoft.com/en-US/data/jj591621)，感谢@soadyp 指出我的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T10:35:33.150

Jan 很好地指出 EF 不是唯一的 ORM。但是既然你用 EF 标签问了，那么他就是一个 EF 视角。

从 EF4.3 开始，EF 支持基于代码的代码优先迁移。即更改您的模型和代码首先可以更改数据库以添加新的列和表。为此有一个新的数据库初始化程序。它甚至会删除列而不会将数据丢失到行的其余部分。

同样，您可以先使用 DB 继续从 DB 导入/更新模型。具有从现有数据库导入的更新的 t4 模板创建部分 POCO 类。因此，您可以安全地扩展生成的 MODEL 类并继续重新导入并且不会丢失任何内容。

因此，您可以在可变 DB/模型场景中使用 Code first 或 DB first。

我在一个绿地站点中使用了这两种技术。一开始我对 DB 感觉更舒服。然后，一旦我在 ef4.3 中找到了新的迁移选项，我就确信要转换。由于 Microsoft 提供了强大的电动工具，因此转换速度很快。NUGET Entity Framework power Tools（截至 2012 年 11 月的 beta 2）[http://blogs.msdn.com/b/adonet/](http://blogs.msdn.com/b/adonet/) 有一个选项可以先从数据库逆向工程代码。因此可以先从 DB 转换为先代码。然后使用基于代码的迁移。

# c# - C#“标准表达式中的数据类型不匹配，将日期从数据集添加到数据库时

> ID：13615039
> 
> 赞同：0
> 
> 时间：2012-11-28T21:51:19.347
> 
> 标签：c#, ms-access, dataset

使用“选择文件 ..”按钮 1 成功将 CSV 文件加载到 dataGridView。当我随后单击“提交...”按钮 3 时，出现错误：

**附加信息：条件表达式中的数据类型不匹配。**

请注意，我的 Access DB 的第一列是自动编号的主键。不确定这在这里是否重要。

我必须再次强调，CSV 加载完美，如您所见。“Date Filled”列已更改为“Date_Filled”，因此请不要注意图像中的这一点，因为它已经有几天了。

这是我的代码以及屏幕截图。非常感谢所有帮助！

![在此处输入图像描述](../Images/942ac14500ec41a7c602cf3ecd2b37d5.png)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Globalization;
using System.Configuration;
using System.Data.OleDb;

namespace csvToGrid
{
    public partial class Import : Form
        {
            DataSet dataset;
        }
    public partial class Import : Form
        {
            public Import()
                {
                    InitializeComponent();
                }
        public void button1_Click(object sender, EventArgs e)
            {
                string delimiter = ",";
                string tablename = "medTable";
                dataset = new DataSet();
                OpenFileDialog openFileDialog1 = new OpenFileDialog();
                openFileDialog1.Filter = "CSV Files (*.csv)|*.csv|All Files (*.*)|*.*";
                openFileDialog1.FilterIndex = 1;
                if (openFileDialog1.ShowDialog() == DialogResult.OK)
                    {
                        if (MessageBox.Show("Are you sure you want to import the data from \n " + openFileDialog1.FileName + "?", "Are you sure?", MessageBoxButtons.YesNo) == DialogResult.Yes)
                            {
                                filename = openFileDialog1.FileName;
                                StreamReader sr = new StreamReader(filename);
                                string csv = File.ReadAllText(openFileDialog1.FileName);
                                dataset.Tables.Add(tablename);
                                dataset.Tables[tablename].Columns.Add("Prescription");
                                dataset.Tables[tablename].Columns.Add("Customer_Name");
                                dataset.Tables[tablename].Columns.Add("Medication");
                                dataset.Tables[tablename].Columns.Add("Quantity");
                                dataset.Tables[tablename].Columns.Add("Date_Filled");

                                string allData = sr.ReadToEnd();
                                string[] rows = allData.Split("\r".ToCharArray());

                                foreach (string r in rows)
                                    {
                                        string[] items = r.Split(delimiter.ToCharArray());
                                        dataset.Tables[tablename].Rows.Add(items);
                                    }
                                this.dataGridView1.DataSource = dataset.Tables[0].DefaultView;
                                MessageBox.Show(filename + " was successfully imported. \n Please review all data before sending it to the database.", "Success!", MessageBoxButtons.OK);
                            }
                        else
                            {
                                this.Close();
                            }
                }
            }

        public string filename { get; set; }

        private void openFileDialog1_FileOk(object sender, CancelEventArgs e)
            {

            }

        private void Import_Load(object sender, EventArgs e)
            {

            }

        private void button4_Click(object sender, EventArgs e)
        {
            Application.Exit();

        }

        private void button2_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button3_Click(object sender, EventArgs e)

            //remove the semicolon, and add brackets below after line
            {

                var AccessCnn = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Persist Security Info=False;", @"C:\Search\KinneyDatabase.accdb");

                using (OleDbConnection accessCnn = new OleDbConnection(AccessCnn))
                {
                    //Create The Command
                    var accessCmd = new OleDbCommand(@"INSERT INTO script_Orders (script,cust_Name,drug,qty,fill_Date) VALUES (@Prescription, @Customer_Name, @Medication, @Quantity, @Date_Filled)", accessCnn);

                    OleDbParameter d = accessCmd.CreateParameter();
                    d.OleDbType = OleDbType.Date;

                    foreach (var row in dataset.Tables["medTable"].Rows)

                    {
                        accessCmd.Parameters.Clear();
                        accessCmd.Parameters.AddWithValue(@"Prescription","script");
                        accessCmd.Parameters.AddWithValue(@"Customer_Name", "cust_Name");
                        accessCmd.Parameters.AddWithValue(@"Medication", "drug");
                        accessCmd.Parameters.AddWithValue(@"Quantity", "qty");
                        accessCmd.Parameters.AddWithValue(@"Date_Filled", "fill_Date");
                        accessCnn.Open();
                        accessCmd.ExecuteNonQuery();
                        accessCnn.Close();
                    }
                }
            }
        }
    } 
```

![在此处输入图像描述](../Images/c2cdf734b0e704d076e5c8b9eccf762b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:56:40.557

我会试试这个：

```
accessCnn.Open();
foreach (var row in dataset.Tables["medTable"].Rows)
{
    accessCmd.Parameters.Clear();
    accessCmd.Parameters.AddWithValue("@Prescription",row["script"].ToString());
    accessCmd.Parameters.AddWithValue("@Customer_Name", row["cust_Name"].ToString());
    accessCmd.Parameters.AddWithValue("@Medication", row["drug"].ToString());
    accessCmd.Parameters.AddWithValue("@Quantity", Convert.ToInt32(row["qty"]));
    accessCmd.Parameters.AddWithValue("@Date_Filled", Convert.ToDate(row["fill_Date"]));
    accessCmd.ExecuteNonQuery();
}
accessCnn.Close(); 
```

此外，您可以尝试在进入循环之前优化创建参数的查询，并且在循环内部仅更改值而不破坏它们并为每个循环重新创建它们

```
accessCmd.Parameters.Add("@Prescription", OleDbType.VarChar , 80);
accessCmd.Parameters.Add("@Customer_Name", OleDbType.VarChar, 80);
accessCmd.Parameters.Add("@Medication", OleDbType.VarChar, 80);
accessCmd.Parameters.Add("@Quantity", OleDbType.Integer);
accessCmd.Parameters.Add("@Date_Filled", OleDbType.Date);

accessCnn.Open();
foreach (var row in dataset.Tables["medTable"].Rows)
{
    accessCmd.Parameters["@Prescription"].Value = row["script"].ToString();
    accessCmd.Parameters["@Customer_Name"].Value = row["cust_Name"].ToString();
    accessCmd.Parameters["@Medication"].Value = row["drug"].ToString();
    accessCmd.Parameters["@Quantity"].Value = Convert.ToInt32(row["qty"]);
    accessCmd.Parameters["#Date_Filled"].Value = Convert.ToDate(row["fill_Date"]);
    accessCmd.ExecuteNonQuery();
}
accessCnn.Close(); 
```

# file-io - 在 GNU Prolog 中从文件中读取一行

> ID：13615042
> 
> 赞同：0
> 
> 时间：2012-11-28T21:51:31.063
> 
> 标签：file-io, prolog, gnu-prolog

我觉得我正在用我认为应该很容易的东西把头撞到墙上。也许我的方法是不正确的。我绝对不觉得我理解 Prolog 中 I/O 背后的概念。（例如：流别名和 open/3 绑定的变量有什么区别？）但我跑题了：

如何在 GNU Prolog 中逐行读取文件？（因此无法访问 SWI 拥有的便捷功能。）我认为它与 get_char/1 和 peek_char/1 （检查终止换行符）有关，但我尝试实现可行的解决方案到目前为止都失败了。

据我所知，这是：

```
readl_as_list(ID, X):-
    current_input(ID),
    readl_as_list(X).

readl_as_list([X]):-
    (peek_char(NextChar), ==(NextChar, '\n'); 
        get_code(Char1),
        append([X], [Char1], X),
        readl_as_list(X)).

printl_list([]):-
    !, nl.
printl_list([H|X]):-
    put_code(H), printl_list(X). 
```

将其加载到解释器中，我得到（为了便于阅读，删除了空行）：

```
| ?- open('word_list.txt', read, ID).
ID = '$stream'(2)
yes
| ?- readl_as_list(ID, X).
ID = '$stream'(0)
X = [_] ? 
% (interpreter pauses until I press return)
yes
| ?- printl_list(X).
X = []
yes 
```

这些行不一定必须作为字符列表读入，但由于我的目标是在单词列表中搜索符合某些条件的单词（例如，没有重复字母），这似乎是最明智的做法它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:16:57.863

我写了一个实用程序，它获取一行代码。最后返回 end_of_file...

```
read_line_codes(S, SoFar, L) :-
    get_code(S, C),
    (   C == -1
    ->  (  SoFar == []
        ->  L = end_of_file
        ;   reverse(SoFar, L)
        )
    ;   (  C == 0'\n
        -> reverse(SoFar, L)
        ;  read_line_codes(S, [C|SoFar], L)
        )
    ). 
```

测试：

```
?- open('data_grid.pl',read,S),repeat,read_line_codes(S,[],L),format('~s',[L]).
/*  File:    data_grid.pl
S = <stream>(0x335c9e0),
L = [47, 42, 32, 32, 70, 105, 108, 101, 58|...] ;
    Author:  Carlo,,,
S = <stream>(0x335c9e0),
L = [32, 32, 32, 32, 65, 117, 116, 104, 111|...] ;
    Created: Oct 20 2011
S = <stream>(0x335c9e0),
L = [32, 32, 32, 32, 67, 114, 101, 97, 116|...] ;
... 
```

# c++ - C++ 命名空间中静态函数的链接

> ID：13615046
> 
> 赞同：5
> 
> 时间：2012-11-28T21:51:43.967
> 
> 标签：c++, static, namespaces, linkage

在非全局命名空间中声明的静态函数的链接是什么？

例子：

```
namespace foo {
  ...
  static void bar(int a) { }
} 
```

这与在全局命名空间范围内声明的静态方法有什么不同吗？有人可以指出标准中的位置吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T21:57:43.957

`static`在命名空间级别的函数中使用时表示*内部链接*。

具体引用来自 3.5 Program Linkage，第 3 段：

> 具有命名空间范围 (3.3.6) 的名称如果是
> 
> *   显式声明为静态的变量、函数或函数模板；或者， [...]

# python - 使用 xlrd 读取 .xls 文件

> ID：13615052
> 
> 赞同：0
> 
> 时间：2012-11-28T21:52:07.197
> 
> 标签：python

从带有 xlrd 包的 excel 表中读取数据时，输出通常带有前缀 u' 或类似的东西（例如，在一种情况下，它有一个 \u2013 而不是一个“-”字符）。为什么会这样，哪些是我需要注意的字符，因为我将不得不解析电子表格单元格中的一些信息。

这是一个例子：

```
>>> wb = xlrd.open_workbook('tellimusleht.xls')
>>> sh = wb.sheet_by_index(0).row_values(5)
[2.0, u'aken sisseavanev, pakett, aluliist, ilma petekata parem', 552.0, 1729.0, 2.0, u'Sp.Barbados 4*6 \u2013 1 maja '] 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:09:40.433

# javascript - 单击复选框时显示/隐藏两个表格

> ID：13615058
> 
> 赞同：1
> 
> 时间：2012-11-28T21:52:51.873
> 
> 标签：javascript, html, html-table, onclick

我正在尝试在单击复选框时显示/隐藏表格，并在单击第二个复选框时显示另一个表格，同时隐藏第一个复选框。

我有两个表格和两个复选框。一种标记为“定制”，一种标记为“标准”。我想开始在页面加载时显示带有高级选项的“自定义”表格 - 它目前正在执行 - 并在选中其他选项“标准”时隐藏表格 - 它目前也是如此。

现在我试图通过添加第二个表来扩展它以仅显示“标准”选项。这个表我命名为“标准”，它只有几个选项，而“自定义”表有很多。

关于如何去做这件事的任何想法？到目前为止，这是我的代码，其中一个表的工作显示/隐藏表功能。

我的 JavaScript：

```
<script type="text/javascript">
<!--
function showTable(which)
{
    if(which == "1") {
        document.getElementById('customize').style.display = "table";
        }
        if(which == "2") {
        document.getElementById('customize').style.display = "none";
        }
}
//-->
</script> 
```

我的 HTML：

```
<input name="radio" type="radio" id="customize_1" onClick="showTable('2')" value="radio" />
                  <label for="radio3"></label>
Standard
        &nbsp;&nbsp;&nbsp;
        <input name="radio" type="radio" id="customize_0" onClick="showTable('1')" value="radio" checked="checked" /> 
        Customize
</span></td>
                </tr>
                <tr>
                  <td colspan="5" nowrap="nowrap" class="formlabel">Password: 
                    <input type="password" name="textfield2" id="textfield2" class="fields" size="15" /></td>
                </tr>
</table>
<br />
<table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="customize">
                <tr>
                  <th valign="top" class="header" nowrap="nowrap">Scores</th>
                  <th colspan="3" valign="top" nowrap="nowrap" class="header">Exam Options</th>
                  <th valign="top" nowrap="nowrap" class="header">Categories</th>
                </tr>
                <tr>
                  <td valign="top" class="formlabel" nowrap="nowrap"><input type="checkbox" name="checkbox3" id="checkbox4" />
                    Exam Score (Pts)<br />
  <input type="checkbox" name="checkbox3" id="checkbox5" />
                    Letter Grade<br />
  <input type="checkbox" name="checkbox4" id="checkbox7" />
                    Percentage<br />
                    <input type="checkbox" name="checkbox12" id="checkbox19" /> 
                    Raw Score (# Correct)
</td>
                  <td valign="top" class="formfield" nowrap="nowrap"><span class="formlabel">
                    <input type="checkbox" name="checkbox15" id="checkbox20" />
Statistics (Mean, Median, Std Dev)<br />
<input type="checkbox" name="checkbox15" id="checkbox21" />
Rank<br />
<input type="checkbox" name="checkbox15" id="checkbox22" />
Percentage Rank<br />
<input type="checkbox" name="checkbox15" id="checkbox23" />
Item Text </span></td>
                  <td valign="top" class="formfield" nowrap="nowrap"><span class="formlabel">
                  <input type="checkbox" name="checkbox13" id="checkbox24" /> 
Item Description
<br />
<input type="checkbox" name="checkbox13" id="checkbox25" /> 
Answer Choice Text
</span><br />
<span class="formlabel">
<input type="checkbox" name="checkbox16" id="checkbox2" />
Answer Key<br />
<input type="checkbox" name="checkbox16" id="checkbox26" />
Wrong Answer Only</span></td>
                  <td valign="top" nowrap="nowrap" class="formfield"><span class="formlabel">
                  <input type="checkbox" name="checkbox" id="checkbox10" />
                    Rationale<br />
  <input type="checkbox" name="checkbox6" id="checkbox11" />
                    Actual Item Sequence<br />
  <input type="checkbox" name="checkbox6" id="checkbox12" /> 
  Essay Responses<br />
  <input type="checkbox" name="checkbox6" id="checkbox13" />
                    Essay Grader Comments</span></td>
                  <td valign="top" nowrap="nowrap" class="formfield"><input type="checkbox" name="checkbox7" id="checkbox14" />
                    Performance in Each Category<br />
                    <a href="" class="buttonintable basicAddCategory3" title="Select categories">Select Category</a>
<br />
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <input type="checkbox" name="checkbox7" id="checkbox15" disabled="disabled" />
                    Category Full Path <br />
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <input type="checkbox" name="checkbox7" id="checkbox16" disabled="disabled" />
                    Group by Parent<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="checkbox" name="checkbox14" id="checkbox17" disabled="disabled" />
                    Category Mean<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="checkbox" name="checkbox14" id="checkbox18" disabled="disabled" /> 
Category Std Dev
</td>
                </tr>
      </table>
      <div style="display:none">
      <table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="standard">
                <tr>
                  <th valign="top" class="header" nowrap="nowrap">Categories</th>
                </tr>
                <tr>
      <td valign="top" nowrap="nowrap" class="formfield"><input type="checkbox" name="checkbox7" id="checkbox14" />
                    Performance in Each Category<br />
                    <a href="" class="buttonintable basicAddCategory3" title="Select categories">Select Category</a>
<br />
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <input type="checkbox" name="checkbox7" id="checkbox15" disabled="disabled" />
                    Category Full Path <br />
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <input type="checkbox" name="checkbox7" id="checkbox16" disabled="disabled" />
                    Group by Parent<br />
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="checkbox" name="checkbox14" id="checkbox17" disabled="disabled" />
                    Category Mean<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="checkbox" name="checkbox14" id="checkbox18" disabled="disabled" /> 
Category Std Dev
</td>
                </tr>
      </table>
      </div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:01:12.833

如果稍微剥离你的代码并为你创建一个小提琴，这应该让你开始：http: [//jsfiddle.net/4tcRD/](http://jsfiddle.net/4tcRD/)

**JS**

```
function toggleTables(which)
{
    if(which == "1") 
    {
        document.getElementById('customize').style.display = "table";
        document.getElementById('standard').style.display = "none";
    }
    if(which == "2") 
    {
        document.getElementById('standard').style.display = "table";
        document.getElementById('customize').style.display = "none";
    }
}​ 
```

**HTML**

```
<input name="radio" type="radio" id="customize_1" onClick="toggleTables('2')" value="radio" />
<label for="radio3"></label> Standard&nbsp;&nbsp;&nbsp;
<input name="radio" type="radio" id="customize_0" onClick="toggleTables('1')" value="radio" checked="checked" /> 
Customize

<br />
<table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="customize">
    <tr><td>customize</td></tr>                   
</table>

<table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="standard" style="display: none">
    <tr><td>standard</td></tr>                   
</table>​ 
```

您的问题是桌子周围的 div 设置为`display: none`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:59:30.490

您可以向这两个表添加一个类并使用 getElementsByClassName 而不是 getElementById 选择它们

```
 <table class="standard expand" ... > 
```

# python - 为什么控制台打印python时有空间

> ID：13615059
> 
> 赞同：2
> 
> 时间：2012-11-28T21:52:51.840
> 
> 标签：python

我刚刚注意到一些奇怪的事情

在python中，如果我这样做

```
>>> k = 1
>>> j = 2
>>> print k,",",j
1 , 2   # prints this 
```

我预计会是：

```
1,2 
```

为什么这两者之间有空格，而

```
>>> print str(k) + "," + str(j) 
1,2 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T21:55:26.520

第一个示例将 3 个参数`print`直接传递给，然后将它们转换为字符串并将它们连接在一起，用空格分隔。第二个示例首先转换并连接字符串，然后将整个字符串`print`作为单个参数传递给。如果您改为这样做`print str(k), ",", str(j)`，您将得到与第一个示例相同的结果。

考虑`print`函数的工作方式而不是关键字。举个例子：

```
def foo(*args):
    return ' '.join(map(str, args)) 
```

`foo('a', 'b', 'c')`将传递 foo 3 个参数，然后返回由空格连接的这 3 个参数，`'a b c'`. `foo('a' + 'b' + 'c')`将首先创建 string `'abc'`，然后将其作为单个参数传递给 foo，导致 foo 返回 just `'abc'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T21:54:49.187

这正是`print`Python 2 中的工作方式。在 Python 3 中，print[更易于配置](http://docs.python.org/3.1/library/functions.html#print)。

完成您想要的更好的方法是使用[字符串格式](http://docs.python.org/2/library/string.html#format-string-syntax)：

```
print '{0},{1}'.format(k, j) 
```

或使用旧式字符串格式：

```
print '%d,%d' % (k, j) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T22:02:16.913

就是这样。一个原因可能是为了调试。像世界其他地方的大多数人一样，我经常使用`print`语句来调试，因为它比使用`pdb`简短的简单脚本更快更容易。

考虑：

```
a = 1
b = 2
print a,b 
```

现在这个打印`1 2`很清楚地表明它与`print`有 2 个参数的行匹配。（在您的示例中，您第一次传递了 3 个参数，`print`第二次只传递了 1 个）。`print a,b`想象一下，如果它给了你，那将是多么的混乱`12`！您将查看所有代码，试图找出 a 的`12`来源。当然，正如其他人所指出的，如果您对如何打印内容有更严格的要求，则一种解决方法是使用字符串格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T22:14:36.727

正如其他人指出的那样，主要原因可能是调试。在那张纸条上，看看当你在同一行打印出多个值进行调试时会发生什么：

```
>>> print myObj1, myObj2
myFirstObj mySecondObj 
```

这样，我不必在为调试目的而打印出来的变量之间打印一个空格，从而使`print`这种用法变得轻量级。

当然，正如其他人所指出的，你最好使用`','.join(myListOfStrings)`打印逗号分隔的字符串列表

# java - 在 String.matches() 方法中转义句点时遇到问题

> ID：13615061
> 
> 赞同：2
> 
> 时间：2012-11-28T21:53:08.640
> 
> 标签：java, regex, escaping, period

当我在 String 类的 matches() 方法中使用此正则表达式时，出现编译错误。有人知道我在这里做错了什么吗？谢谢

```
String email = "this@that.com";
System.out.println(email.matches("^(.+@.+\.\\w{2,4})$")); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T21:54:09.450

`.`带有两个反斜杠的转义期`\\.`java 中支持的有效转义序列是 `\b \t \n \f \r \" \' \\`

```
System.out.println(email.matches("^(.+@.+\\.\\w{2,4})$")); 
```

或者：

将其包含在`\\Q`和`\\E`

```
\\Q.\\E 
```

# android - 来自数据库示例的 Android Master-Detail

> ID：13615063
> 
> 赞同：5
> 
> 时间：2012-11-28T21:53:24.130
> 
> 标签：android, sqlite, master-detail

是否有将 Android Master-Detail 流程与 sqllite 数据库一起使用的示例？我见过的所有示例都使用简单的列表。

# php - Zend Framework 2 中奇怪的表单验证行为

> ID：13615065
> 
> 赞同：3
> 
> 时间：2012-11-28T21:53:29.750
> 
> 标签：php, validation, zend-form, zend-framework2

在提交和验证 Zend Framework 2 表单时，我遇到了奇怪的行为。我已将表单缩减为三个元素以说明我的意思，但其他元素也存在问题。

我有两个元素；电子邮件和性别。我*没有*为我的表单指定一个`InputFilter`，所以我的逻辑告诉我我的表单是有效的。但是，当我提交表单并进行验证检查时，电子邮件和性别元素会给出`Value is required and can't be empty`错误。但是，我没有明确表示它们是必需的并且不能为空。

我的电子邮件元素属于类型`Zend\Form\Element\Email`，我怀疑这可能与它有关，因为如果我将其更改为`Zend\Form\Element\Text`，一切都很好。但是，如果我想要一个不需要的电子邮件字段怎么办？

接下来，我的性别选择元素给了我同样的错误。我设置了空选项，但我认为这只是为了使用默认值，例如“选择您的性别”，但它没有添加必需的约束。看来，如果我删除此空选项，则不会收到此错误。这个错误也很奇怪的是，如果我没有选择性别并提交我的表单，那么在回发的下拉列表中选择了一个不同的选项。在这种情况下，我提交的表单带有空选项（“选择您的性别”），但是当刷新表单时，选定的选项会更改为“女性”。“女性”选项的值为 0，但如果我将值更改为 3，例如，它可以正常工作。但是，如果我需要在我的选项之一中设置值为 0 怎么办？也许它' s 由类型转换或其他原因引起。我真的不知道。

下面是我的代码。我写了一些评论，所以可能更容易理解。

**表单类摘录：**

```
// E-mail (generates "Value is required and can't be empty" - but what if the field should be optional? Where is this validator added?
        $email = new Element\Email('email'); // If I change to "Element\Text", there are no problems
        $email->setLabel('E-mail address');

        $email->setLabelAttributes(array(
                                        'for' => $email->getName(),
                                        'class' => 'some class'
                                   ));

        $email->setAttributes(array(
                                   'id' => $email->getName(),
                                   'placeholder' => 'E.g. andy@gmail.com',
                                   'class' => 'some class'
                              ));

// Gender dropdown (generates "Value is required and can't be empty error")
        $gender = new Element\Select('gender');
        $gender->setLabel('Gender');
        $gender->setEmptyOption('Choose your gender'); // Remove this and the error disappears

        $gender->setLabelAttributes(array(
                                    'for' => $gender->getName(),
                                    'class' => 'some class'
                               ));

        $gender->setAttributes(array(
                                    'id' => $gender->getName(),
                                    'class' => 'some class'
                               ));

        $gender->setValueOptions(array(
                                      '1' => 'Male',
                                      '0' => 'Female' // This is selected on postback when the empty option is selected. If I change the value to 3, for instance, it works fine
                                 ));

$this->add($email);
        $this->add($gender); 
```

**控制器：**

```
public function registerAction() {
        $registerForm = new RegisterForm();
        $request = $this->getRequest();

        if ($request->isPost()) {
            $registerForm->setData($request->getPost());

            if ($registerForm->isValid()) {
                // Nothing here yet
            }

        }

        return new ViewModel(array('form' => $registerForm));
    } 
```

**查看脚本摘录：**

```
$form = $this->form;
$email = $form->get('email');
$gender = $form->get('gender');

// E-mail
echo $this->formLabel()->openTag($email) . $email->getLabel() . $this->formLabel()->closeTag();
echo $this->formInput($email);
echo $this->formElementErrors($email);

// Gender
echo $this->formLabel()->openTag($gender) . $gender->getLabel() . $this->formLabel()->closeTag();
echo $this->formSelect($gender);
echo $this->formElementErrors($gender); 
```

如果我没有很好地解释这些问题，我深表歉意，但这真的很难解释，因为这对我来说似乎很奇怪。我查看了文档，但找不到任何有用的东西（我认为 ZF2 文档仍然很差）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T01:10:59.077

许多人讨厌 ZF1.x 中的装饰器表单，但我仍然喜欢它。ZF2对我来说最糟糕的部分是你基本上可以扔掉你所有的知识，因为就像ZF2中的很多东西一样，它已经完全改变了。

有新的 (HTML5) 电子邮件元素，但它带有硬编码的必需约束。选择元素也会发生类似的事情。在 ZF1 中，您拥有`setRequired()`元素上的方法，但现在将其移回表单中的“输入”。换句话说，您必须首先获得输入。

```
$form->prepare();  // this is another new thing and necessary

$input = $form->getInputFilter();
$e_filter = $input->get('email');
$e_filter->setRequired(false);

$g_filter = $input->get('gender');
$g_filter->setRequired(false); 
```

现在您的表单应该接受空提交。

**更新：至于回发问题。** 这完全取决于您设置的数据`setData()`。这可以是 POST 数据，也可以是来自会话的重定向数据。如果您在没有选择的情况下提交，则您获得的 POST 数据不应包含任何“性别”数据，您在表单中设置的数据也应如此。

**更新 2** 看起来根本问题是提交了一个空的性别值并且 POST 值始终是字符串，因此一个空值是长度为 0 的字符串类型。查看`Form\View\Helper\FormSelect`并呈现该选项，您会发现一个`in_array($value, $selectedOptions)`处理选定的属性。不幸的是，他们没有设置严格标志，并且没有那个`0`（零）值匹配一个空字符串。

```
$post = array('gender' => '');
$bool = in_array(0, $post);        // this is true
$bool = in_array(0, $post, true);  // but this is false 
```

因此，在将其添加到 setData() 之前，要么从 POST 中过滤/删除此空值，要么将空字符串更改为 NULL，然后它将作为选定选项删除。此外，如果您当然可以在 Zend 类中添加/更改严格选项（我不会这样做）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-30T16:52:05.537

您也可以将它放在 Form 构造函数的末尾，如下所示：

```
public function __construct($name = 'user') {
   ...
   $this->getInputFilter()->get('first_name')->setRequired(false);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T23:11:12.190

我认为有像 required 这样的默认验证器。

你有没有尝试过：

```
->setAllowEmpty(false) 
```

或者

```
->setRequired(false) 
```

从这[另一个如此的问题](https://stackoverflow.com/questions/4594773/zend-form-validating-of-required-elements?rq=1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T07:40:56.803

For me any of above method didn't work, so I'll post my answer to this problem:

Add a validator like this:

```
@Form\Validator({"name":"NotEmpty", "options":{"type":"string"}}) 
```

It will work for both "0" and "1" value

# java - onActivityResult 不能使用 R 中的资源

> ID：13615066
> 
> 赞同：0
> 
> 时间：2012-11-28T21:53:42.010
> 
> 标签：java, android, android-activity

我有一个调用子 Activity 的父 Activity，并且在 onActivityResult() 中，当它尝试 setContentView(R.drawable.color_syncing) 时出现 ResourceNotFound 异常。我可以对视图进行其他操作，但不能使用 R 中的任何资源。知道为什么吗？

在主课..

```
Intent wifiHelperIntent = new Intent(context,WifiHandlerActivity.class);
startActivityForResult(wifiHelperIntent, WIFI_HANDLER_SUB_ACTIVITY_ID); 
```

在子类中：

```
private void doFinish() {
log("Finishing wifi...");
setResult(RESULT_OK);
finish();
} 
```

然后回到主类：onActivityResult：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
        case WIFI_HANDLER_SUB_ACTIVITY_ID:
            MonollaLog.log("In onActivityResult from WIFI_HANDLER");
            setContentView(R.drawable.color_syncing);
            return;
        default:
            throw new RuntimeException("Unrecognized sub activity request code: "
                    + requestCode);
        }       
} 
```

错误堆栈跟踪：[我在子活动开始之前成功使用此文件]

11-28 14:56:26.312: E/AndroidRuntime(27346): java.lang.RuntimeException: 将结果 ResultInfo{who=null, request=1, result=1, data=null} 传递给活动 {com.monolla. mfbcolor/com.monolla.mfbcolor.MainActivity}：android.content.res.Resources$NotFoundException：来自 xml 类型布局资源 ID #0x7f020003 的文件 res/drawable/color_syncing.jpg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T21:57:45.853

`setContentView(int)`期望传入**布局**ID，您正在尝试使用颜色。你的意思是传递某种形式的东西`R.layout.something`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:32:32.067

`setContentView(R.layout.main);`, 你通过了 a`drawable`而不是 a `layout`。

# asp.net-mvc - 如何在不采取行动的情况下创建路线？

> ID：13615077
> 
> 赞同：3
> 
> 时间：2012-11-28T21:54:33.650
> 
> 标签：asp.net-mvc

是否可以在不采取行动的情况下创建路线？

我有这个默认路线：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

但我也希望有这样的 URL：and是控制器`http://mysite/bar/1234`在哪里。`1234``ID``bar`

所以我创建了以下路线：

```
routes.MapRoute(
    name: "BarRoute",
    url: "{controller}/{id}",
    defaults: new { controller = "bar", action = "Index", id = UrlParameter.Optional }
); 
```

但是当我导航到 时`http://mysite/bar/1234`，它说找不到资源。我在第二条路线中做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:01:19.830

```
routes.MapRoute(
  name:        "BarRoute",
  url:         "{controller}/{id}",
  defaults:    new { controller = "Bar", action = "Index" },
  constraints: new { id = @"\d+" }
); 
```

您必须考虑到您的路线必须放置在适当的位置 - 在更一般的路线之前，例如：

```
routes.MapRoute(
           name: "BarRoute",
routes.MapRoute(
           name: "Default", 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T21:59:26.593

您不能在没有任何限制的情况下按该顺序拥有以下 2 条路线

*   `{controller}/{action}/{id}`
*   `{controller}/{id}`

这两条路线不兼容。当您尝试访问`http://mysite/bar/1234`时，路由引擎正在分析您的路线并`/bar/1234`匹配您的第一条路线。除了我猜你没有`1234`在`Bar`控制器上调用一个动作。

因此，如果您希望此设置正常工作，您需要指定一些[`constraints`](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs). 另外不要忘记路由定义的顺序很重要，因为它们是按照您定义它们的顺序解析的。因此，请确保在顶部放置更具体的路线。

# java - 通信链路故障：使用 C3P0 重置连接

> ID：13615079
> 
> 赞同：2
> 
> 时间：2012-11-28T21:54:40.717
> 
> 标签：java, mysql, spring, hibernate, c3p0

我知道这已经被问过很多次了，但我一直坚持。

我验证了以下内容：

```
IP address or hostname in JDBC URL is correct.

Hostname in JDBC URL is also recognized by local DNS server.

Port number is correct in JDBC URL.

DB server is up. 
```

由于有时相同的数据库调用有效，我相信它与“失去连接”有关。在问题发生时，我们只`50-60 connections`需要 DB。

不过，我相信这`C3PO connections`可能已经筋疲力尽了。

我们有以下 C3P0 配置

```
<props>
<prop key="hibernate.c3p0.timeout">
44000
<!--  seconds  -->
</prop>
<prop key="hibernate.c3p0.min_size">5</prop>
<prop key="hibernate.c3p0.max_size">5</prop>
<prop key="hibernate.c3p0.initial_pool_size">5</prop>
<prop key="hibernate.c3p0.idle_test_period">
60
<!--  seconds  -->
</prop>
<prop key="hibernate.c3p0.acquire_increment">2</prop>
<prop key="hibernate.c3p0.max_statements">50</prop>
<prop key="hibernate.c3p0.preferredTestQuery">SELECT 1 FROM DUAL</prop>
<prop key="hibernate.show_sql">true</prop>
</props> 
```

大多数条目在此处未定义，使用默认值。让我知道这是否可能是问题和原因将非常有帮助。

`Maximum number C3P0 connections by default are 15`但是我们几乎一直越过这个限制并且不会遇到这个问题（`acquireIncrement`在这种情况下支持连接可能是C3P0的属性bcoz）。

堆栈跟踪：

```
org.springframework.dao.DataAccessResourceFailureException: could not execute query; nested exception is org.hibernate.exception.JDBCConnectionException: could not execute query
at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:625)
at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.convertHibernateAccessException(AbstractSessionFactoryBean.java:303)
at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.translateExceptionIfPossible(AbstractSessionFactoryBean.java:282)
at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy34.findByName(Unknown Source)
at a.b.c.d.e.f(A.java:941)
at a.b.c.d.e.f$$FastClassByCGLIB$$a171eb15.invoke(&lt;generated&gt;)
at org.springframework.internal.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
at com.amazon.mobiusdatabase.activity.IMBatchActivity$$EnhancerByCGLIB$$42d90986.getLatestBatchByStatus(&lt;generated&gt;)
at com.amazon.coral.reflect.$2198.invoke(Unknown Source)
at com.amazon.coral.service.DefaultActivityInvoker.invoke(DefaultActivityInvoker.java:40)
at com.amazon.coral.service.ContinuationActivityInvokerFactory$1.invoke(ContinuationActivityInvokerFactory.java:92)
at com.amazon.coral.service.ActivityHandler.invoke(ActivityHandler.java:269)
at com.amazon.coral.service.ActivityHandler.before(ActivityHandler.java:157)
at com.amazon.coral.service.TransmutingContinuationHandler.before(TransmutingContinuationHandler.java:51)
at com.amazon.coral.service.Chain.componenteBefore(Chain.java:98)
at com.amazon.coral.service.Chain.before(Chain.java:76)
at com.amazon.coral.service.helper.ChainHelper.before(ChainHelper.java:103)
at com.amazon.coral.service.AbstractOrchestrator.doWork(AbstractOrchestrator.java:60)
at com.amazon.coral.service.PassiveOrchestrator.enqueue(PassiveOrchestrator.java:68)
at com.amazon.coral.service.GracefulShutdownOrchestrator.enqueue(GracefulShutdownOrchestrator.java:79)
at com.amazon.coral.service.helper.OrchestratorHelper.enqueue(OrchestratorHelper.java:44)
at com.amazon.coral.service.batch.BatchProtocolOrchestrator.enqueue(BatchProtocolOrchestrator.java:97)
at com.amazon.coral.service.bobcat.BobcatEndpoint.invoke(BobcatEndpoint.java:194)
at org.apache.catalina.valves.SSLValve.invoke(SSLValve.java:113)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:894)
at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:719)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2101)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: org.hibernate.exception.JDBCConnectionException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:97)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

Last packet sent to the server was 1 ms ago.
at sun.reflect.GeneratedConstructorAccessor143.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2985)
at com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:2871)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3414)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1734)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:1885)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1808)
at org.hibernate.loader.Loader.doQuery(Loader.java:697)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
at org.hibernate.loader.Loader.doList(Loader.java:2228)
... 49 more
Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:113)
at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:160)
at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:188)
at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2428) 
```

我们在数据库上触发选择查询时得到了这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:48:20.297

也许连接没有正确关闭，所以您可以尝试大幅减少超时，看看您是否有同样的问题。

```
 <prop key="hibernate.c3p0.timeout">3000</prop> 
```

同时，您可以使用[VisualVM](http://visualvm.java.net/)之类的 JMX 分析器来监控 C3P0 连接，并直接在数据库服务器上查看是否存在“丢失”连接。

# django - Django评论未发布到数据库

> ID：13615080
> 
> 赞同：-5
> 
> 时间：2012-11-28T21:54:41.230
> 
> 标签：django, comments

**我按照[这个示例](https://docs.djangoproject.com/en/dev/ref/contrib/comments/example/)进行 django 评论**（逐字逐句）并与[文档](https://docs.djangoproject.com/en/dev/ref/contrib/comments/)交叉引用，但没有评论提交到数据库。我错过了什么？这是我第一次创建表格，提供的文件没有帮助或清晰。

**问题**

有没有人知道一个很棒的表格或评论教程可以让我走上正确的轨道（谷歌搜索已经出现了 5 种不同的方法，但似乎都没有经过审查）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:26:57.647

首先，请停止将该页面称为教程 - 它已明确标记为示例。其次，您似乎没有阅读[实际的文档页面](https://docs.djangoproject.com/en/dev/ref/contrib/comments/)，该页面与您提供的页面的第一行以及文档索引明确链接，该索引准确地解释了如何启动和运行它。

# mapreduce - MapReduce 比较函数有什么作用？

> ID：13615081
> 
> 赞同：0
> 
> 时间：2012-11-28T21:54:44.477
> 
> 标签：mapreduce

我了解映射和归约，但我不了解 MapReduce 循环的比较阶段提供了什么。它是否只是简单地收集映射器输出并按键对发出的文档进行分组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:29:42.397

此阶段通过键对映射的值进行排序和分组。

# .net - 我的数据对象 WF/EF 去哪里了？

> ID：13615088
> 
> 赞同：2
> 
> 时间：2012-11-28T21:55:14.817
> 
> 标签：.net, workflow-foundation-4, workflow-foundation

假设我有一个长时间运行的工作流状态机，我在其中存储了一个订单。我有一个 MVC 应用程序，其中从各种形式的订单发生了许多不同的变化。除了 Status 和 StatusDate，这些都与 Workflow 无关。

大多数对 Order 的更新只是计算和 CRUD 操作。随着订单状态的变化，我是否将整个订单保留在工作流中，使用工作流持久性，并弄清楚如何将所有其他更新放入工作流中，还是我自己使用 EF/L2S 将订单存储在我的表中，然后通过我正在处理的订单进入工作流程，让 StateMachine 更新状态，并将订单作为出局的争论传回。或者.....我可以在 Order 对象上有一个 Status/State 字段，比如 Guid，它是一个指向 OrderStatus 对象的指针，该对象是在长期运行的工作流中创建并保存的，具有它自己的持久性。

我喜欢最后一个选项，但是如果我需要查询所有处于已发货或延期交货状态且具有特定 StatusDate 的订单怎么办？每个人都在自己的工作流实例中？我可以查询工作流主机以获取状态为“已发货”的所有工作流实例吗？状态日期 <= 现在？仅供参考...我正在使用 WF4.5

# c# - 使用 xslt 转换和 C# 向个人发送大量电子邮件

> ID：13615092
> 
> 赞同：0
> 
> 时间：2012-11-28T21:55:33.190
> 
> 标签：c#, xml, xslt, xml-parsing

我需要一种使用 linq to xml 从数据库表中读取姓名和电子邮件地址列表的方法。在我将列表生成为 xml 字符串后，我需要一种方法来循环遍历列表，按人员（节点），并将 xslt 应用于生成的 xml 子字符串，生成 html，并使用生成的 html 发送给人员（s ) 作为电子邮件。例如，我正在考虑以下 xml 布局： `<persons> <person> <firstname> <middlename> <lastname> <emailaddress> </person> </persons>`

在此示例中，我将不得不以某种方式像 for 循环一样遍历 xml 并访问每个人节点，从`<person> .. </person>`其中获取节点并一次转换这个节点。

在某些情况下，我还需要打印所有生成的字母。

我将如何以这种方式遍历 xml 并从那里的 person 节点进行转换？看来我需要`<person> .. </person>`字符串格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:16:25.793

为什么不直接使用 Serializable Person 类？C# 提供 XML 序列化支持。只要来自服务器的原始文本采用正确的 XML 格式，您就可以通过将其转储到 XML 文件中然后依赖内置的 C# 支持来规避大量工作。或者通过使用 LINQ 将数据库映射到类。

我当然不熟悉 LINQ，但[本文](http://www.codeproject.com/Articles/43025/A-LINQ-Tutorial-Mapping-Tables-to-Objects)提供了一种非常清晰的方法来使用 LINQ 将数据库映射到类，这将为您提供一种生成 XML 文件并使用内置序列化器、反序列化器和XSL 转换对数据做任何你喜欢的事情。

```
XmlSerializer s = new XmlSerializer(typeof(Person[]));
people = (Person[])s.Deserialize(file); // Serialize is almost identical
file.close(); 
```

将为您提供一种将 XML 从文件加载到 C# 类的简单方法（或者只是 LINQ 将 SQL 连接到类）。您可以使用内置的 XLST 支持来获取 XML 文件并使用 XSL 样式表对其进行转换：

```
XPathDocument x = new XPathDocument(xmlFile);
XslCompiledTransform xsl = new XslCompiledTransform();
xsl.Load(xslStyleSheet);
XmlTextWriter writer = new XmlTextWriter("result.html", null);
xsl.Transform(x, null, writer); 
```

应该注意这一点 - 从[这个答案](https://stackoverflow.com/questions/34093/how-to-apply-an-xslt-stylesheet-in-c-sharp "这个答案")。我敢肯定有一些方法可以用原始字符串做到这一点，但除非你*真的*必须这样做，否则何必呢？

# requirejs - 如何防止 requirejs 包含所有源文件而只包含模块文件？

> ID：13615093
> 
> 赞同：2
> 
> 时间：2012-11-28T21:55:36.423
> 
> 标签：requirejs, gruntjs

当我用 r.js 构建一个项目时（我是通过 grunt 来做的，但我离题了），它会丑化并压缩项目的所有 javascript 文件并将它们包含在 build 文件夹中，即使所有这些文件都已经压缩成单个 javascript 文件，不再以各自的形式使用。

我正在使用模块，所以我不能使用“out”标志 b/c 它不兼容。我正在使用 grunt-contrib-clean 来清理所有额外的文件，但如果我可以避免首先包含它们，那将是理想的。

这是我咕哝的options.js：

```
module.exports = {
  appDir: 'src',
  baseUrl: 'js/',
  mainConfigFile: 'src/js/common.js',
  dir: 'www',
  modules: [
    {
      name: 'common',
      include: [
          'jquery',
          'underscore',
          'handlebars',
          'hbs',
          'i18nprecompile',
          'json2',
          'Class'
      ]
    },
    {
        name: 'app/page1',
        exclude: ['common']
    },
    {
        name: 'app/page2',
        exclude: ['common']
    }
  ]
}; 
```

当它构建时，它包含 lib 文件夹中的所有文件（当唯一需要的是 require.js 时），它包含由 page1 和 page2 导入的所有 javascript 文件的丑化版本，即使所有这些文件都已合并到 page1 .js 和 page2.js。

我错过了什么还是构建后清理只是生活中的一个事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T05:19:38.407

为此，您可以使用：

```
skipDirOptimize: true, 
removeCombined: true 
```

`skipDirOptimize: true`将阻止 requirejs 优化其他文件

`removeCombined: true`将删除所有组合到模块文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:37:23.403

可以通过设置`removeCombined`为 false 来简单地修复它：

```
 //If set to true, any files that were combined into a build layer will be
    //removed from the output folder.
    removeCombined: false, 
```

[可以在此示例文件中找到](https://github.com/jrburke/r.js/blob/master/build/example.build.js)有关任何其他构建选项的详细信息。

# python - python3.2 使用 subprocess.popen - 需要格式化生成的标准输出以写入文件

> ID：13615095
> 
> 赞同：2
> 
> 时间：2012-11-28T21:55:47.737
> 
> 标签：python, python-3.2

我正在使用`subprocess`运行命令（来自衍生的守护程序）并尝试将结果写入文件。来自的结果字符串`Popen`是`bytestring`。在写入文件之前，如何将其格式化为人类可读的内容？使用python3.2

试过：

```
print (x,file=o)
f.write(str(rc.so))
print (str(rc.so) + "\n") 
```

没有什么最终看起来可读..

可疑代码：

```
 rc = subprocess.Popen([cmd], shell=True, stdout=subprocess.PIPE,   stderr=subprocess.PIPE)
  x = rc.stdout.readlines()
  rc.so, rc.se = rc.communicate()
  with open(of,'w') as o, open(ef,'w') as e:
     print (str(rc.so) + "\n",file=o) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:01:58.457

你需要解码它：

```
my_byte_string.decode('utf-8') 
```

utf-8 可能不是适合您情况的最佳解码选择，它是众多可用选项之一。

这样打印语句应该更像：

```
print (rc.so.decode('utf-8') + "\n",file=o) 
```

# algorithm - 强调实用细节的 C4.5 和 ID3 算法

> ID：13615096
> 
> 赞同：0
> 
> 时间：2012-11-28T21:55:51.233
> 
> 标签：algorithm, data-mining, decision-tree

我开始应用数据挖掘算法。现在我研究决策树。互联网上有很多关于 C4.5 和 ID3 算法的资料，但我想知道这两种算法的实用细节、优缺点和一些技术细节。如果有此类材料的链接，我会很高兴

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:49:03.243

决策树的两个优点是它们能够处理嘈杂的数据，并且它们提供了对数据的直观解释（您可以很容易地看到树认为哪些属性最重要）。缺点是它们是贪心算法（它们选择分支属性而不考虑这如何影响最终分类精度），因此它们不一定会产生最佳树结构。决策树很容易融入到集成方法中，例如[随机森林](http://en.wikipedia.org/wiki/Random_forest)。

C4.5 是对 ID3 的改进，使其能够处理实值属性（ID3 使用分类属性）和缺失属性。互联网上有很多关于这两种算法的描述。[维基百科对ID3](http://en.wikipedia.org/wiki/ID3_algorithm)和[C4.5](http://en.wikipedia.org/wiki/C4.5)都有描述。对于这两种算法的另一种描述，您可以从[这里](http://www.cis.temple.edu/~giorgio/cis587/readings/id3-c45.html)开始。

# linux - Linux中的恢复脚本

> ID：13615100
> 
> 赞同：0
> 
> 时间：2012-11-28T21:55:59.047
> 
> 标签：linux, bash, shell

我通过虚拟机使用 Linux，

对于我的课程，我必须创建 3 个脚本，其中一个脚本是将已删除的文件恢复到用户放入的位置或原始位置

到目前为止，这是我的脚本所拥有的

```
#!/bin/sh
if [ "$1" == "-n" ]
then
  cd /root/michael/trash
  restore`grep "$2" cd /root/michael/store`
  filename=`basename "$restore"`
  echo "Where would you like to save the file?"
  read location
  location1=`readlink -f "$location"`
  mv -i $filename "location1"/filename
else
  cd /root/michael/trash
  restore=`grep "$2" cd /root/michael/store`
  filename=`basename "$restore"`
  mv -i $filename "location1" $location
fi 
```

但是当我尝试恢复文件时，我收到一条错误消息

```
grep: cd: no such file or directory
mv: cannot move `test' to `': no such file or directory 
```

现在，当我恢复 -n 时，sricpt 可以工作，但当我重新执行时它仍然无法工作

我的脚本的更新现在看起来像：

```
#!/bin/sh
if [ "$1" == "-n" ]
then
  cd /root/michael/trash
  restore`grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  echo "Where would you like to save the file?"
  read location
  location1=`readlink -f "$location"`
  mv -i $filename "location1"/filename
else
  cd /root/michael/trash
  restore=`grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  mv -i $filename "location1" $location
fi 
```

现在我收到错误消息：mv：当我尝试恢复 test.txt 时，`' 后缺少目标文件操作数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T21:59:15.327

这是清理后的语法：

```
#!/bin/sh
if [ "$1" == "-n" ]
then
  cd /root/michael/trash
  restore `grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  echo "Where would you like to save the file?"
  read location
  location1=`readlink -f "$location"`
  mv -i $filename "$location1"/$filename
else
  cd /root/michael/trash
  restore=`grep "$2" /root/michael/store`
  filename=`basename "$restore"`
  mv -i $filename "$location1" $location
fi 
```

但不幸的是，我无法推断您在`else`条款中的目标是什么；例如: `mv -i $filename "$location1" $location`: 在这里使用之前都没有`location`或`location1`没有定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:03:49.657

grep 需要两个参数，一个模式和一个文件。你已经给了它三个，一个模式、命令`cd`和一个文件。`cd`这里不需要。

# antlr - ANTLR：必需的 (...)+ 循环在字符处不匹配任何内容

> ID：13615108
> 
> 赞同：0
> 
> 时间：2012-11-28T21:56:31.030
> 
> 标签：antlr, antlr3

我越来越：

> 第 n:m 行需要 (...)+ 循环在字符 u'#' 处不匹配任何内容

但是解析器以 , 结束`0 = parser.getNumberOfSyntaxErrors()`，并产生一个正确的 AST。进一步的检查确认错误消息是由词法分析器打印的，它抛出了一个`antlr3.exceptions.EarlyExitException`永远不会到达解析器的错误消息。

此时应该匹配的词法规则是：

```
LOCALVAR
    :
    '#' NAME_CHAR+ 
    ; 
```

输入中的故障点为`#I)`.

为什么词法分析和解析成功？为什么有效输入的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:58:09.300

我对类似问题的解决方案：

```
DOT : '.' ;

INTEGER
    :
    DIGITS
    ;

FLOAT
    :
    (DIGITS DOT DIGITS)=> DIGITS DOT DIGITS
    ; 
```

解析以下短语时：

```
#J := #X(75.W) 
```

词法分析器抗议：

> 第 n:m 行需要 (...)+ 循环与字符 u'W' 处的任何内容都不匹配

将规则更改为：

```
FLOAT
    :
    DIGITS 
    (
       (DOT DIGIT)=>  DOT DIGITS 
    |
        () { $type=INTEGER }
    )
    ; 
```

修复了问题。

问题部分在于 ANTLR 词法分析器不是 RE 而是 LL。

# macos - 在钥匙串中生成 CSR，未创建私钥 osx

> ID：13615114
> 
> 赞同：5
> 
> 时间：2012-11-28T21:56:42.487
> 
> 标签：macos, push-notification, keychain, csr

我正在生成一个 CSR 以在我的应用程序中启用推送通知（按照此处的说明）[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

但是当我创建 CSR 时，它应该在我的钥匙串中创建一个私钥，但它没有。

我遵循的步骤是：
1\. 打开钥匙串访问
2\. 单击“从证书颁发机构请求证书...”
3\. 选择通用名称“brendantest”的保存到磁盘选项
4\. 在钥匙串访问中查找我的私钥，但它不存在。

有谁知道为什么钥匙不会出现或如何找到它？（在 mac osx 10.7.4 上）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-28T13:45:44.553

我也被这个迷惑了。

事实证明，您需要首先突出显示左侧钥匙串下的“登录”部分。然后它会在您执行 CSR 请求时创建私钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T08:10:38.367

我必须连接到互联网，并登录到我的苹果开发者帐户（即使那样，它有时也只对我有用），但是当“保存到磁盘”下有一个讨论自定义密钥对的复选框时它会起作用或者其他的东西。

我已经设法将我的密钥放在那里，但是下次我去生成一个新的 CSR 时，该选项不存在并且 CSR 没有将密钥放入。

# android - 安卓版iOS Quick Look Framework

> ID：13615116
> 
> 赞同：7
> 
> 时间：2012-11-28T21:56:47.910
> 
> 标签：android, ios, pdf, ms-office

有没有类似于Android的[iOS Quick Look Framework的东西？](http://developer.apple.com/library/ios/#documentation/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/_index.html#//apple_ref/doc/uid/TP40009672)我正在尝试在我的活动中显示/预览 PDF 和 Microsoft Office 文件。我知道我可以使用 Intents 使用关联的查看器打开文件，但我想知道是否可以不离开我的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:06:44.530

只有编写自己的查看器才有可能。iOS 应用程序正在调用一个外部类，该类恰好呈现在您自己的视图中。与 Android 没有太大区别，只是您使用意图而不是调用特定的应用程序或框架，这更灵活，因为用户可以选择文件的打开方式。

# java - cookie在error_page tomcat中丢失

> ID：13615120
> 
> 赞同：1
> 
> 时间：2012-11-28T21:56:56.673
> 
> 标签：java, jsp, tomcat

我的 tomcat (6) 工作正常，正确配置了 404 错误页面。

我正在尝试设置一个阀门，它：
**1）使以前创建的 cookie 过期
2）创建一个新 cookie 并放入响应**

只要我没有点击 404 错误页面，它就可以正常工作。新的**cookie**丢失了

我跟踪了......似乎Tomcat没有将响应对象转发到“404错误”。而是创建了一个新的响应对象。

有人有想法吗？

问候

# c - 可以在 X11 事件循环中捕获操纵杆/游戏手柄事件吗？

> ID：13615122
> 
> 赞同：1
> 
> 时间：2012-11-28T21:57:09.233
> 
> 标签：c, x11, xlib, joystick

Win32 有 winmm 库，它允许在常规事件循环中捕获操纵杆事件（与一般窗口事件、键盘事件和鼠标事件一起）。

Xlib 中是否有类似的设置？我唯一的选择是做原始输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:56:54.287

听起来答案是否定的（直到比我聪明的人出现并纠正我）。我需要做原始输入。我必须以合理的时间间隔进行轮询并将增量转换为我自己的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:59:38.047

我这里没有操纵杆，但试试“xev”，看看操​​纵杆是否会产生任何事件。如果不是，您必须使用原始输入或某些游戏库。

# eclipse - Windows 7 上的嵌入式 Jetty 服务器 8 和 Eclipse IDE 无法保存文件

> ID：13615123
> 
> 赞同：0
> 
> 时间：2012-11-28T21:57:15.963
> 
> 标签：eclipse, jetty, embed, file-locking

我在 Windows 7 上使用 Eclipse IDE 和嵌入式 Jetty Server。

我可以通过启动码头运行该应用程序并在我的浏览器中毫无问题地查看它。

但是，如果我在我的应用程序中编辑“webapp”文件夹中的文件，例如 JavaScript 文件，我会收到以下错误

```
Could not write file: sample.js
sample.js (The requested operation cannot be performed on a file with a user-mapped section open) 
```

如果我停止 Jetty，我可以保存文件。那么有没有办法阻止 Jetty 锁定文件呢？

这是我在 JettyServer.java 中创建 WebApp 上下文的方法

```
private static WebAppContext createWebapp() {
    String webAppDir = "src/main/webapp/";
    WebAppContext webApp = new WebAppContext();
    webApp.setContextPath(CONTEXT_PATH);
    webApp.setResourceBase(webAppDir);
    webApp.setParentLoaderPriority(true);
    return webApp;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:08:45.590

这是 windows 环境中码头的常见问题。你应该按照[这个](http://docs.codehaus.org/display/JETTY/Files+locked+on+Windows) 指令来保存文件而不关闭码头服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T15:16:07.160

您可以通过将默认 servlet 的 useFileMappedBuffer 设置为 false 来关闭此行为。这样做有点棘手。

```
private static WebAppContext createWebapp() {
    String webAppDir = "src/main/webapp/";
    WebAppContext webApp = new WebAppContext();
    webApp.setContextPath(CONTEXT_PATH);
    webApp.setResourceBase(webAppDir);
    webApp.setParentLoaderPriority(true);

    webApp.setInitParam(
        "org.eclipse.jetty.servlet.Default.useFileMappedBuffer", "false");

    return webApp;
} 
```

DefaultServlet 将寻找它自己的 useFileMappedBuffer 副本，该副本似乎设置在 Jetty 的深处。但是通过在属性名称前面加上上述前缀，这个值是首选的。

# matlab - Matlab，并排打印输出向量

> ID：13615127
> 
> 赞同：1
> 
> 时间：2012-11-28T21:57:27.290
> 
> 标签：matlab, formatting, octave

我正在尝试获取一个计算二分状态（两个密度矩阵的张量）的施密特分解的函数，以并排打印施密特数（X）和基向量（e_i，e_j）的总和。 for 循环。例如：（x'*'e_1'\otimes' e_1+ ... + x'*'e_i'\otimes' e_j）。注释掉的 fprintf 语句是我已经尝试过的东西。

代码：

```
function [u, v] = Schmidt(m,n,v)

    m = 3 %size of basis vector
    n = 4 %size of basis vector
    e_m = eye(m)
    e_n = eye(n)
    %can have a = input('enter an array>');
    v = [1
         2
         3
         4
         5
         6
         7
         8
         9
         10
         11
         12]

    for i = 1:m

        for j = 1:n
            e_i = e_m(:,i)
            e_j = e_n(:,j)
            K = kron(e_i, e_j)
            x = ctranspose(K)*v
            W(i,j) = x
            %fprintf('%d %f %f %f\n',j,e_i,e_j,x);
            %fprintf(1,'Header 1\tHeader 2\n');
            %fprintf(1,'%f\t%f\n','e_i e_j');
            %fprintf('the basis are %d\n',e_i, e_j)

        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:28:13.627

键入“doc fprintf”会调出帮助文件，它会告诉你正确的格式化方式。如果您只是尝试对齐输出，则可能需要使用指定精度

```
 fprint('%3.4f',e_i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:54:41.757

你可以试试这个：

```
 .
    .
    .
    x = ctranspose(K)*v;

    NEW(1:numel(j(:,1)), 1) = j;
    NEW(1:numel(e_i(:,1)), 2) = e_i;
    NEW(1:numel(e_j(:,1)), 3) = e_j;
    NEW(1:numel(x(:,1)), 4) = x;

    sprintf('%f %f %f %f \n',NEW(:,1), NEW(:,2), NEW(3,:), NEW(4,:)) 
```

# jsp - jstl if else 选择 / 不评估变量时

> ID：13615129
> 
> 赞同：2
> 
> 时间：2012-11-28T21:57:36.003
> 
> 标签：jsp, jstl, el

I am trying to print some html when a choose / when condition is met like this:

```
 <c:choose>
      <c:when test="${notification.placeId} == ${place.placeId}">
    ${notification.name}
  </c:when>
<c:otherwise>
    placeId: ${place.placeId} - notplaceid: ${notification.placeId}
    </c:otherwise>
 </c:choose> 
```

这打印： placeId：50 - notplaceid：43 placeId：50 - notplaceid：47 placeId：50 - notplaceid：49 ***placeId：50 - notplaceid：50*** placeId：50 - notplaceid：51 placeId：50 - notplaceid：51 placeId：50 - notplaceid : 51 placeId: 50 - notplaceid: 51 placeId: 50 - notplaceid: 52 placeId: 50 - notplaceid: 53 placeId: 50 - notplaceid: 0 placeId: 50 - notplaceid: 0

这一切都从 else 打印出来，并且从不打印 when 语句中的通知名称。从打印中可以看出，粗体输出显然满足 when 条件，应该打印通知名称。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:02:05.983

采用

```
<c:when test="${notification.placeId == place.placeId}"> 
```

代替

```
<c:when test="${notification.placeId} == ${place.placeId}"> 
```

按照您键入它的方式，该`test`属性被评估为一个字符串： 的评估结果和 的评估结果的`${notification.placeId}`串联。`==``${place.placeId}`

您希望将整个事物作为布尔表达式进行评估。

# php - 从 php 5.2.0 调用 https wsdl

> ID：13615134
> 
> 赞同：2
> 
> 时间：2012-11-28T21:57:49.223
> 
> 标签：php, soap, https, wsdl, openssl

我需要从 php 调用 https wsdl 服务。原始消息错误是：

SOAP 错误：解析 WSDL：无法从“https://xxxxx.svc?wsdl”加载：无法加载外部实体“https://xxxx.svc?wsdl”

我这样做了：

1.  我在 php.ini 中激活：extension=php_openssl.dll
2.  我复制了： System32 中的 libeay32.dll 和 ssleay32.dll
3.  我的 PHP 版本是 5.3.9

消息错误是这样说的：

SOAP-ERROR: Parsing Schema: can't import schema from 'http://xxx.svc?xsd=xsd0''

我读了很多类似错误的帖子，但有人帮助我。

我需要你的帮助

# css - 如何将溢出的 div 扩展到垂直可用空间？

> ID：13615135
> 
> 赞同：1
> 
> 时间：2012-11-28T21:57:49.847
> 
> 标签：css

我有一个这样的布局：

```
<div id="container">
    <div id="A"></div>
    <div id="B"></div>
    <div id="C"></div>
</div> 
```

这是（不完整的）CSS：

```
#container {
    height: 400px;
    background: red;    
}

#A {
    height: 50px;
    background: yellow;
}

#B {
    height: 300px;
    background: blue;
    overflow-y: auto;    
}

#C {
    height: 50px;
    background: yellow;
} 
```

所以 AB 和 C 应该堆叠在一起，B 应该填满 A 和 C 之间的剩余空间，如果内容太多显示滚动条。
我的问题是有时 C**可能会丢失**，我怎样才能让 B 动态扩展以占用它的空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:01:11.950

一种可能的方法是：

```
#B:last-child {
    height: 350px;
}​ 
```

[http://jsfiddle.net/thirtydot/7Bqkb/1/](http://jsfiddle.net/thirtydot/7Bqkb/1/)

因此，如果`#B`是最后一个孩子，请手动将高度设置为正确的值。

[`:last-child`浏览器支持。](http://caniuse.com/css-sel3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:59:58.970

另一种方法是使用`~`选择器：

```
#B {
    height: 350px;
    background: blue;
    overflow-y: auto;    
}
#C~#B {
    height: 300px;
} 
```

[http://jsfiddle.net/VtWAY/2](http://jsfiddle.net/VtWAY/2)

应该有 IE7+ 支持[http://reference.sitepoint.com/css/generalsiblingselector](http://reference.sitepoint.com/css/generalsiblingselector)

编辑：仅当您还在 html 中交换 B 和 C 时才有效。[http://jsfiddle.net/VtWAY/4/](http://jsfiddle.net/VtWAY/4/)

# jquery - jQuery Validate 编写自定义函数

> ID：13615136
> 
> 赞同：0
> 
> 时间：2012-11-28T21:57:59.210
> 
> 标签：jquery, html, forms, validation, jquery-validate

我有一个表格，我正在使用 jquery 的验证器来验证。如果他们在注册码中输入了供应商，那么他们必须从下拉菜单中选择供应商。但仅适用于供应商，如果他们键入大学，则不必从下拉菜单中选择大学。这是html部分：

```
<form id="everything" method="post">
First Name:<input type="text" name="fname" id="fname"/>
Last Name:<input type="text" name="lname" id="lname"/>
<select name="type" id="type">
  <option value="">None</option>
  <option value="Early College">Early College</option>
  <option value="Public School">Public School</option>
  <option value="Vendor">Vendor</option>
  <option value="other">Other</option>
</select>

Registration Code: <input type="text" name="regcode" id="regcode"/>
</form> 
```

然后是jquery：

```
jQuery.validator.addMethod("registration_check", function(value, element) {
    if ($('#regis_code').val() == "Vendor") {
        return ($('#regis_code').val() == $('#iitype').val());
    }
}, jQuery.format("You entered Vendor as the registration code, please select vendor from the Institutional Information Type drop down menu."));

var val = $('#everything').validate({
    rules: {
        fname: { required: true},
        lname: { required: true},
        regis_code: {
            required: true,
            registration_check: true,
        }
    },
    messages: {
        regis_code: {
            required: "Please enter a registration code"
        }
    }
});​ 
```

如果我输入供应商并且没有从下拉菜单中选择供应商，它会发牢骚，这很好。问题是，如果我输入 vendor 并从 dd 菜单中选择它，而没有名字和姓氏（必须填写），它无法验证名称并继续前进。有谁知道问题是什么？

编辑：这是问题的一个工作示例：[BIN](http://jsbin.com/welcome/54612/edit)。要重现该问题，只需在注册码文本框中输入 vendor，然后从下拉列表中选择 vendor 并单击提交。这将向您展示它如何无法验证其他两个文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:53:00.617

看起来您使用了错误的 ID。[http://jsbin.com/welcome/54628/edit](http://jsbin.com/welcome/54628/edit) `iitype --> type`

```
function(value, element) {
    if((value.toUpperCase()) == "VENDOR") {
        if((value.toUpperCase())==($('#type').val().toUpperCase()))
            return true;
    }
 } 
```

# php - Javascript和PHP之间的通信

> ID：13615139
> 
> 赞同：0
> 
> 时间：2012-11-28T21:58:16.733
> 
> 标签：php, javascript, ajax

我一直在玩弄用 javascript/PHP 模拟命令行的想法。基本思想是，我希望能够像在命令行上一样运行 c++ 程序。

我用 javascript 和一个 C++ 代码解析器制作了一个基本控制台，以将某些内容添加到原始源代码中，以使我的 PHP 程序执行脚本能够识别何时有输入请求或程序何时结束。现在，我希望能够在 javascript（控制台 Web 应用程序）和 PHP（程序执行）之间进行通信，以便 PHP 可以告诉 javascript 显示（输出）和请求输入的内容。

我已经用 AJAX 计划了它。一旦用户在控制台（javascript 端）输入程序运行命令，它就会切换到执行状态并向带有程序名称的 PHP 脚本发送请求。该脚本将启动该过程并通过回显结果来结束。基于请求响应，javascript 将再次向 PHP 脚本发送请求，PHP 脚本会从它离开的地方提取并回显另一个结果以供 javascript 继续使用。这将一直持续到 PHP 脚本回显错误字符串或终止字符串。

在对 AJAX 进行了许多天真的尝试之后，我知道我的想法是完全错误的。我一直想知道是否有另一种方法可以在两端之间进行通信。有没有一种方法可以保存我的 PHP 脚本的状态（资源、变量和文件句柄），这样每当我从 javascript 端向它发送请求时，我就可以从上次中断的地方继续输出？

我还没有找到一个，这让我相信这种方法是一厢情愿的想法。

我真的很感激一些见解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:02:26.243

[PHP Sessions](http://php.net/manual/en/features.sessions.php)

> **Sessions**
> 
> Session support in PHP consists of a way to preserve certain data across subsequent accesses. This enables you to build more customized applications and increase the appeal of your web site. All information is in the Session reference section.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:07:48.110

使用 PHP Sessions 库（由 epascarello 建议）可能是您最好的选择。但是，如果您想“自己动手”，或者您只是想了解 PHP Sessions 之类的库是如何工作的，那么基本要点是：

1.  如果您最初希望将任何数据从服务器传递到客户端，请将这些数据写入页面。例如`<script>var serverData = <?= serverDataVariable ?>;`（我的 PHP 有点生疏；如果语法不正确，请原谅我）。

2.  如果最后有任何数据要传递到服务器，请将这些数据放在 HTML 表单中，并将该表单的操作设置为服务器端处理程序的 URL。这样，当用户提交表单时，其中的所有数据都将发送到该 URL（在 GET 或 POST 参数中，取决于您如何设置表单）。

3.  如果您想在 1\. 和 2\. 之间的任何时间进行通信，则需要使用 AJAX（当然，您*也可以*使用 comet，但这是先进的，所以不用担心）。AJAX 使用浏览器的 XmlHttpRequest 本质上是进行表单提交，只是“在幕后”而不需要更改页面。AJAX 请求可以提供参数（就像表单提交一样），它们还可以从服务器返回数据（几乎就像您最初将数据写入页面一样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:07:49.873

我会推荐 websockets over AJAX，也许使用[Ratchet](http://socketo.me/ "棘轮")。

虽然它是用 Node.js 而不是 PHP 编写的，但您可能会在[tty.js中找到一些灵感](https://github.com/chjj/tty.js "tty.js")

祝你好运！

# c# - 从剪贴板粘贴文件

> ID：13615142
> 
> 赞同：6
> 
> 时间：2012-11-28T21:58:26.013
> 
> 标签：c#, clipboard, copy-paste

感谢 Stack Overflow 问题*[Copy files to clipboard in C#](https://stackoverflow.com/questions/211611/)*，我能够使用[Clipboard.SetFileDropList](http://msdn.microsoft.com/en-us/library/system.windows.forms.clipboard.setfiledroplist%28v=vs.110%29.aspx)并最终得到：

```
using System;
using System.Collections.Specialized;
using System.Windows.Forms;

class Program
{
    [STAThread]
    static void Main ( string[] args)
    {    
        StringCollection paths = new StringCollection();
        paths.Add( @"C:\Users\Antonio\Desktop\MyDirectory" );
        Clipboard.SetFileDropList( paths);
    }
} 
```

这样我就可以将整个目录放在剪贴板上并将其粘贴到我需要的位置。我希望能够用代码粘贴它。我不想去我想粘贴它的地方然后按`Ctrl`+ `V`。换句话说，我正在寻找类似的东西：

```
Clipboard.Paste("C:\Users\LocationWhereIWantToPasteTheFolder") 
```

我知道我可以递归地获取所有文件，然后将它们一一粘贴。但为什么要重新发明轮子呢？如果操作系统可以为我做到这一点，那就太好了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:45:33.877

剪贴板有一个*协议*，一种双方同意的将数据从一个进程获取到另一个进程的方式。这样的协议需要有有限的方法将敏感数据放在剪贴板上。您可以在剪贴板上放置任何您想要的东西，尤其是 .NET 对象。但是，如果粘贴剪贴板数据的其他应用程序不理解 .NET 对象，很可能如果它不是用 .NET 编写的，那么它只会惊呼 WTF。

因此，您使用的方法只是一个小的 Clipboard 类帮助方法，它使用标准协议将数据放在剪贴板上。另一个应用程序*可能*会理解，但不能保证。协议是 DataFormats.FileDrop。

您的预期替换也可以正常工作，您当然可以在剪贴板上放一个字符串。您想要复制/粘贴的最基本的东西。但是粘贴它的应用程序只会将其识别为字符串。它不知道该字符串应该表示其他含义。协议是 DataFormats.Text。

解决方法很简单，只需要写一个带字符串的私有辅助方法即可。并使用 Directory.GetFiles() 创建您放在剪贴板上的 StringCollection。简单，任务完成，亲吻。

# vba - Visual Basic - 检查 If 语句中的记录集字段类型

> ID：13615144
> 
> 赞同：4
> 
> 时间：2012-11-28T21:58:33.417
> 
> 标签：vba, ms-access, types

我正在尝试检查表中字段的数据类型，如果它是 Text 类型，则让代码做一件事，如果它是任何其他类型，则让代码做另一件事。下面是我拥有的代码，但我认为我根本没有第三行。任何帮助将不胜感激！

```
Set dbExample = CurrentDb
Set rsTester = dbExample.OpenRecordset("tester", dbOpenDynaset)
If TypeOf rsTester!exampleField Is Text Then
    'Does what the code needs to do
Else
    'Does what the code needs to do
End If
rsTester.Close 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:34:35.033

`TypeOf`不与 DAO`Field`对象一起使用。你想做的是更像

```
If rsTester("exampleField").Type = dbText Then
    ' do the thing
Else
    ' do the other thing
End Select 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:14:32.213

您可以测试 TableDef 对象中字段的 Type 属性。

```
Dim db As DAO.Database
Dim td As DAO.TableDef

Set db = CurrentDb
With db.TableDefs("Factures")
    Debug.Print .Fields("nofact").Type
End With 
```

# silverstripe - Silverstripe：DataList 过滤器等效于“值 > x 或值 = y”

> ID：13615148
> 
> 赞同：4
> 
> 时间：2012-11-28T21:58:54.517
> 
> 标签：silverstripe

我了解我可以通过以下方式为我的过滤器指定多个值：

```
xxx::get()->filter('FirstName', array('Sam', 'Sig')); 
```

这给了我相当于：

```
... WHERE FirstName = 'Sam' OR FirstName = 'Sig' 
```

但是，似乎没有将`OR`'s 与修饰符 ( `'LastVisited:GreaterThan' => '2011-01-01'`)结合使用

我需要能够像这样过滤：

```
WHERE ExpiryDate > 29-11-2012 OR ExpiryDate IS NULL 
```

我想要实现的目标是可能的吗？我已阅读文档，但没有找到我的问题的答案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T04:37:00.127

`where()`如果没有其他方法可以满足您的需求，您可以随时使用该功能。

```
xxx::get()->where("\"ExpiryDate\" > 29-11-2012 OR \"ExpiryDate\" IS NULL"); 
```

[http://doc.silverstripe.org/framework/en/topics/datamodel#where-clauses](http://doc.silverstripe.org/framework/en/topics/datamodel#where-clauses)

# android - 使用 URI 类连接网站时出错

> ID：13615149
> 
> 赞同：0
> 
> 时间：2012-11-28T21:58:58.403
> 
> 标签：android, android-intent, android-emulator, android-widget

我正在尝试连接下面的网址。这工作正常，但应用程序在执行后崩溃，有什么想法吗？Logcat 抱怨第 77 行 -由于 url 没有被执行`connection = (HttpURLConnection)url.getContent();`，我改变了它。`connection = (HttpURLConnection)url.openConnection();`此代码在 onClick Listener 按钮内执行。提前致谢。

```
URL url = null;
try {
    url = new URL("http://apps.smilemachine.com/smilefactory/api/v1.0/speedup");
} catch (MalformedURLException e) {
    e.printStackTrace();
}
HttpURLConnection connection = null;
try {
    connection = (HttpURLConnection)url.getContent();
} catch (IOException e) {
    e.printStackTrace();
}
try {
    connection.setRequestMethod("GET");
} catch (ProtocolException e) {
    e.printStackTrace();
}
try {
    connection.connect();
} catch (IOException e) {
    e.printStackTrace();
} 
```

日志猫输出：

11-28 22:11:21.153: E/AndroidRuntime(2676): 致命异常: main 11-28 22:11:21.153: E/AndroidRuntime(2676): java.lang.ClassCastException: java.util.zip.GZIPInputStream 11 -28 22:11:21.153: E/AndroidRuntime(2676): 在 com.developer.machine.Screen1$1.onClick(Screen1.java:81) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在android.view.View.performClick(View.java:2485) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在 android.view.View$PerformClick.run(View.java:9080) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在 android.os.Handler.handleCallback(Handler.java:587) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在 android.os.Handler .dispatchMessage(Handler.java:92) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在 android.os.Looper.loop(Looper.java:123) 11-28 22:11:21.153: E /AndroidRuntime(2676)：在 android.app.ActivityThread。main(ActivityThread.java:3683) 11-28 22:11:21.153: E/AndroidRuntime(2676): at java.lang.reflect.Method.invokeNative(Native Method) 11-28 22:11:21.153: E/AndroidRuntime (2676): 在 java.lang.reflect.Method.invoke(Method.java:507) 11-28 22:11:21.153: E/AndroidRuntime(2676): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:839）11-28 22:11:21.153：E/AndroidRuntime（2676）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:597）11-28 22:11： 21.153：E/AndroidRuntime（2676）：在 dalvik.system.NativeStart.main（本机方法）android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-28 22:11:21.153: E/AndroidRuntime(2676): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java :597) 11-28 22:11:21.153: E/AndroidRuntime(2676): at dalvik.system.NativeStart.main(Native Method)android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 11-28 22:11:21.153: E/AndroidRuntime(2676): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java :597) 11-28 22:11:21.153: E/AndroidRuntime(2676): at dalvik.system.NativeStart.main(Native Method)

# spring - servletcontext.addservlet 未定义

> ID：13615157
> 
> 赞同：5
> 
> 时间：2012-11-28T21:59:27.697
> 
> 标签：spring, spring-mvc, m2eclipse

我正在尝试手动引导 dispatcherservlet 作为练习。代码是

```
 ServletRegistration.Dynamic dispatcher = container.addServlet("appServlet", new DispatcherServlet(appContext)); 
```

我正在使用 javax.servlet-api-3.0.1（它有 addServlet），但我得到一个方法未定义的错误。但是，当我使用代码完成时，会出现 addServlet 方法，即使 Eclipse IDE 告诉我该方法对于 ServletContext 类型未定义。我也在使用 eclipse juno 和 glassfish。我想我有某种 jar 冲突 - 但在哪里？我尝试运行时的完整错误如下：

```
 SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start:     org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: java.lang.Error: Unresolved compilation problem: 
The method addServlet(String, DispatcherServlet) is undefined for the type ServletContext
at com.sun.enterprise.web.WebApplication.start(WebApplication.java:138)
at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:301)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662) 
```

不太清楚为什么会这样，可能的冲突？无论如何我的pom在下面，可能其他人看到了什么？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org
/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.apress</groupId>
<artifactId>prospring3</artifactId>
<name>abc</name>
<packaging>war</packaging>
<version>1.0.0-BUILD-SNAPSHOT</version>
<properties>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.springsecurity-version>3.1.0.RELEASE</org.springsecurity-version>
    <org.aspectj-version>1.6.9</org.aspectj-version>
    <org.slf4j-version>1.5.10</org.slf4j-version>
</properties>
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>   

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>

    <!-- Additional dependencies for ProSpring3 Chapter 17 -->

    <!-- JPA backend -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>        
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework-version}</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework.data</groupId>
        <artifactId>spring-data-jpa</artifactId>
        <version>1.0.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.6.8.Final</version>
    </dependency>      
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.2.0.Final</version>
    </dependency> 
    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.3.160</version>
    </dependency>
    <dependency>
        <groupId>com.google.guava</groupId>
        <artifactId>guava</artifactId>
        <version>10.0.1</version>
    </dependency>  
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time</artifactId>
        <version>2.0</version>
    </dependency> 
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time-hibernate</artifactId>
        <version>1.3</version>
    </dependency>

    <!-- Joda Time JSP tag Library -->
    <dependency>
        <groupId>joda-time</groupId>
        <artifactId>joda-time-jsptags</artifactId>
        <version>1.1.1</version>
    </dependency>

    <!-- Apache Tiles -->            
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.2.2</version>
    </dependency>
    <dependency>
         <groupId>org.apache.tiles</groupId>
         <artifactId>tiles-servlet</artifactId>
         <version>2.2.2</version>
    </dependency>          
    <!-- JSON -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-lgpl</artifactId>
        <version>1.9.2</version>
    </dependency>

    <!-- Apache Commons -->
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.1</version>
    </dependency> 

    <!-- Spring Security --> 
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${org.springsecurity-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${org.springsecurity-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${org.springsecurity-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${org.springsecurity-version}</version>
    </dependency>                                        

</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>${java-version}</source>
                <target>${java-version}</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <warName>abc</warName>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sources</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T17:29:57.250

验证您的构建路径上还有哪些其他库。其中一个可能具有不同版本的 Javax.Servlet。如果您无法删除额外的 jar，请尝试更改加载库的顺序。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-24T19:53:42.223

我也面临同样的问题，但我找到了解决方案：

我使用 spring 4.0.4 作为依赖项，我的 servlet 依赖项是

```
 <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency> 
```

此 servlet 依赖项与 spring 4.x 不兼容。为了使其兼容，我对其进行了更改：

```
 <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>3.1.0</version>
            <scope>provided</scope>
        </dependency> 
```

现在它正在工作。希望对你有帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-12T15:32:25.417

正确的工件是：

```
 <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.1.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-13T18:41:05.590

我遇到了同样的问题，然后在我的类路径中找到了旧版本的 servlet-api.jar，为了解决这个问题，我删除了该文件并从 apache-tomcat-7.0.59\lib 添加了新版本的文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-18T03:35:09.253

删除旧的 servlet jar，重新加载 Pom：

```
<groupId>javax.servlet</groupId>
<artifactId>javax.servlet-api</artifactId>
<version>3.1.0</version>
<scope>provided</scope> 
```

# java - Android：未处理的异常类型 IOException 错误

> ID：13615164
> 
> 赞同：3
> 
> 时间：2012-11-28T22:00:04.533
> 
> 标签：java, android

我在 Android 开发中完全是菜鸟。我仍在学习，我正处于我的应用程序开发的第一步。

我有这个代码工作，它运行正常或常规 Java，现在我正在尝试实现 Android 操作系统。

在我的代码中，它说`TEST.openStream()`我收到`Unhandled exception type IOException`错误。

```
 package com.zv.android;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.os.Bundle;

public class ZipActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        try {
            URL TEST = new URL("http://www.google.com/");
            BufferedReader in = new BufferedReader(new InputStreamReader(TEST.openStream()));

            String inputLine;
            int line=0;
            while ((inputLine = in.readLine()) != null){
                line++;
                       //System.out.println(line + "\t" + inputLine); 
            }
           // in.close();
        } catch(MalformedURLException e) {
            //Do something with the exception.
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-28T22:02:56.917

错误信息很简单：你需要捕获`IOException`，因为`URL.openStream()`它被声明为

```
public final InputStream openStream() throws IOException 
```

因此，通过接受方法的约定，您也接受了必须处理此异常的事实，这就是它在 Java 中的工作方式。这是一个*检查*异常，那么它必须被捕获，因为这种异常代表可能出现的情况并且您的代码必须处理。

要抓住它，只需在您的`try`语句中添加另一个案例：

```
try {
  ..
catch (MalformedURLException e) {
  ..
}
catch (IOException e) {
  ..
} 
```

最后一点：你不需要在调用方法时捕获它`openStream()`，你可以声明调用的方法`openStream()`会将异常转发给调用者，但在调用链的末尾你必须捕获它任何情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T22:01:00.000

也可以捕获`IOException`，就像您为`MalformedURLException` （或）将方法声明为 throws所做的那样`IOException`。

```
try {
            URL TEST = new URL("http://www.google.com/");
            BufferedReader in = new BufferedReader(new InputStreamReader(TEST.openStream()));

            String inputLine;
            int line=0;
            while ((inputLine = in.readLine()) != null){
                line++;
                       //System.out.println(line + "\t" + inputLine); 
            }
           // in.close();
        } catch(MalformedURLException e) {
            //Do something with the exception.
        } catch(IOException e2) {
            //Do something with the exception.
        } 
```

`IOException`是检查异常，需要捕获（或）重新抛出。有关更多信息，请参阅本[教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)。

您需要捕获 IOException，因为[openStream()](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openStream%28%29)方法在异常情况下可能会抛出 IOException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:02:31.420

```
TEST.openStream() 
```

可能会抛出一个 IOException ，它是 Java 中的已**检查异常**，因此您必须使用**try/catch**块**处理IOException 或使用****throws**子句在方法签名中**声明IOException。**

 ******您必须在 catch 块中处理 IOException 。

```
 try {
            URL TEST = new URL("http://www.google.com/");
            BufferedReader in = new BufferedReader(new InputStreamReader(TEST.openStream()));
             //rest of your code
             } catch(MalformedURLException e) {
            //Do something with the exception.
        }

        catch(MalformedURLException e) {
        //Do something with the exception.
         }
         catch(IOException ex) {
             ex.printStackTrace();
       } 
```

在方法签名中声明 IOException：

```
 public void onCreate(Bundle savedInstanceState) throws IOException { 
```

在这种情况下，您不要将代码包装在 try/catch 中，尽管我强烈建议始终使用 try/catch 处理异常，而不是使用 throws 子句声明它。******

# reporting-services - SSRS 3.0 饼图数据标签位置

> ID：13615173
> 
> 赞同：1
> 
> 时间：2012-11-28T22:01:18.377
> 
> 标签：reporting-services, ssrs-2008-r2

使用 SSRS 3.0，我发现一些图表属性属性表示为相对于允许的空间的百分比。具体来说，使用“内部”饼图数据标签，标签似乎在圆心和边缘之间自动定位 50%。有没有办法将这些数据标签向外移动到 75%？图表 series.label.position 属性将接受一个表达式，但对语法有什么想法吗？我正在驾驶的东西可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:33:34.177

不确定是否可以指定它们在图表内的位置。我建议将它们移到外面：[SSRS BIDS 2008 R2 pie chart data labelsOverlaying](https://stackoverflow.com/questions/8054152/ssrs-bids-2008-r2-pie-chart-data-labels-overlapping)

# c# - 如何在 Visual Studio 中构建多项目解决方案，而二进制文件之间没有依赖关系？

> ID：13615176
> 
> 赞同：0
> 
> 时间：2012-11-28T22:01:25.663
> 
> 标签：c#, visual-studio-2010, .net-4.0

我正在使用 Visual Studio 2010 Pro 构建一个包含两个项目的解决方案。项目A包含了我的大部分源代码，而项目B打算独立运行，但必须使用项目A中包含的一些源代码。

在当前配置下，项目 A 包含在项目 B 中作为参考。我希望能够独立构建和维护每个项目的版本，但是当我构建整个解决方案时，ProjectB.exe 似乎无法运行ProjectA.exe 在同一本地目录中。我认为并希望在编译 .exe 二进制文件时，它们的所有依赖项都打包在每个文件中，但情况似乎并非如此。事实上，任何在 ProjectA.exe 不存在时运行 ProjectB.exe 的尝试都会导致 System.IO.FileNotFoundException。

有没有办法构建一个独立运行并避免代码重复的版本 ProjectB.exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:16:54.480

如果您想摆脱对 A 的依赖或依赖，您将不得不将通用逻辑提取到另一个项目（我们称之为 C）中，正如 Adriano 在评论中建议的那样。

如果您需要项目之间更松散的联系，您可以不将 A（或 C）作为项目引用，而是作为构建的程序集（.dll 文件）并检查`Specific Version`对`True`. 此外，如果您的项目/代码库结构更复杂，请**[在此处](https://stackoverflow.com/questions/13520063/share-common-codes-between-multiple-projects)**查看更多程序集共享选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:18:08.760

如果您需要通用代码，最好的解决方案是将通用类分解为第三个程序集以用作库。（根据阿德里亚诺的建议。）他暗示的另一个选项是在将“添加现有文件”用于第二个项目时使用“作为链接”选项。

如果您不知道它在哪里，请使用“添加现有文件”选项，然后在选择文件的对话框中，“添加”按钮有一个下拉选择，您可以在其中选择“作为链接文件”（或类似的东西。）

这允许您将相同的类编译到多个项目中。但请记住，不能为第二个项目更改链接文件的命名空间。如果命名空间是“ProjectA.Domain”，这就是您需要在项目 B 中访问它的方式。这对于在引入多平台程序集之前的 Silverlight 项目来说是一个有用的技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:26:18.950

一些选项：

1.  通用选项：将通用代码分离到第三类库 (DLL) 项目中。并让 ProjectA 和 ProjectB 都依赖它。不利的一面是，现在为了运行项目，您需要两个文件（主 exe 和 dll）。这种方法是大多数软件的开发方式：一个可执行文件和一堆 DLL。
2.  正确的选择：将通用代码分离到第三个项目中并修改项目文件以创建包含两个程序集的可执行文件（类似于非托管代码中的静态链接库）。缺点是 Visual Studio 不支持此功能，并且您需要修改实际上是 MS-Build 定义文件的项目文件来执行此操作。
3.  丑陋的选择：在 ProjectB 中为 ProjectA 中的常用文件创建快捷方式。这与将公共代码复制到另一个项目相同，但您仍然留下一个源文件。缺点是您必须为每个文件执行此操作，并在两个项目中保持相同的结构。如果可行的话，这是一个丑陋的选择。选择其他之一。

# git - maven 持久添加 jar 到本地项目

> ID：13615178
> 
> 赞同：1
> 
> 时间：2012-11-28T22:01:28.050
> 
> 标签：git, maven, configuration, include, local

我在 maven 项目配置方面还有另一个问题。我必须在 maven 项目中包含一个外部 .jar 文件，它也是一个 git 项目，我希望它都在远程 git repo 中。我必须逐项列出jar 是另一个 maven 项目的输出（[https://github.com/perwendel/spark](https://github.com/perwendel/spark)的克隆），但我不知道这是否真的很重要。目前我尝试使用插件，确切地说

```
<plugin>
<groupId>com.googlecode.addjars-maven-plugin</groupId>
<artifactId>addjars-maven-plugin</artifactId>
<version>1.0.2</version>
<executions>
    <execution>
        <goals>
            <goal>add-jars</goal>
        </goals>
        <configuration>
            <resources>
                <resource>
                    <directory>../src/main/resources/</directory>
                    <includes>
                        <include>spark-0.9.9.5.jar</include>
                    </includes>
                </resource>
            </resources>
        </configuration>
    </execution>
</executions>
</plugin> 
```

接着

```
<dependency>
     <groupId>spark</groupId>
     <artifactId>spark</artifactId>
     <version>0.9.9.5</version> 
</dependency> 
```

然后我用它的 pom.xml 和 ../src/main/resources/ git-push 主 maven 项目来完成它，但是有一些与我的本地 maven repo 相关的项目。事实上，当我 git-clone 树时由于以下原因，Maven 构建失败的另一个位置：

# ...

# spark:spark:jar:0.9.9.5 的 POM 丢失，没有可用的依赖信息

# ...

# ...

# [在http://repo.maven.apache.org/maven2](http://repo.maven.apache.org/maven2)中找不到 spark:spark:jar:0.9.9.5被缓存#在本地存储库中失败，直到 #central 的更新间隔已过或更新后才会重新尝试解析被迫 -> [帮助 1]

我不是很喜欢 maven，我错过了什么吗？错误的插件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:49:53.157

在我看来，您似乎不了解 Maven 的目的。Maven 的目的是定义项目之间的依赖关系。在您的情况下，要使用 spark，您只需将依赖项放入您的 pom 中，如您所述：

```
<dependency>
     <groupId>spark</groupId>
     <artifactId>spark</artifactId>
     <version>0.9.9.5</version> 
</dependency> 
```

这里的问题是开发 spark 的人没有进入 Maven Central。您只需要克隆它们的 git 存储库并执行

```
 mvn install 
```

之后，此版本的工件可用于您的项目。解决这类问题的方法是设置存储库管理器（Nexus、Artifactory、Archiva）并将此类工件部署到此存储库中。

您收到的消息意味着您正在尝试使用 Maven 中心中不可用的依赖项。解决方案是如上所述进行 mvn install 但在删除目录**${HOME}/.m2/repository/spark**之前。

# c++ - 使用 Qt 的 Secugen 指纹识别器

> ID：13615192
> 
> 赞同：0
> 
> 时间：2012-11-28T22:02:22.900
> 
> 标签：c++, qt

我正在尝试在 Qt 上使用 SecuGen FDX SDK 创建一个应用程序。我在从读者那里捕捉图像时遇到问题。我可以毫无问题地访问 dll 中的所有功能，除了那些涉及捕获图像的功能。当我在 Qt creator 下调试代码时，我得到以下信息：

```
ModLoad: 00e60000 00f06000   registrationPlatform.exe
ModLoad: 77580000 776bc000   ntdll.dll
ModLoad: 769f0000 76ac4000   C:\Windows\system32\kernel32.dll
ModLoad: 75920000 7596a000   C:\Windows\system32\KERNELBASE.dll
ModLoad: 10000000 1001f000   D:\software\registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug\debug\SGFPLIB.DLL
ModLoad: 74bd0000 74bd9000   C:\Windows\system32\VERSION.dll
ModLoad: 76810000 768bc000   C:\Windows\system32\msvcrt.dll
ModLoad: 76ec0000 76f89000   C:\Windows\system32\USER32.dll
ModLoad: 77050000 7709e000   C:\Windows\system32\GDI32.dll
ModLoad: 776d0000 776da000   C:\Windows\system32\LPK.dll
ModLoad: 77710000 777ad000   C:\Windows\system32\USP10.dll
ModLoad: 554d0000 5631e000   D:\software\registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug\debug\QtGuid4.dll
ModLoad: 76ad0000 76b4b000   C:\Windows\system32\COMDLG32.dll
ModLoad: 76ff0000 77047000   C:\Windows\system32\SHLWAPI.dll
ModLoad: 74660000 747fe000   C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7600.16385_none_421189da2b7fabfc\COMCTL32.dll
ModLoad: 75b10000 76759000   C:\Windows\system32\SHELL32.dll
ModLoad: 76910000 7699f000   C:\Windows\system32\OLEAUT32.dll
ModLoad: 76d20000 76e7c000   C:\Windows\system32\ole32.dll
ModLoad: 770a0000 77141000   C:\Windows\system32\RPCRT4.dll
ModLoad: 776e0000 776ff000   C:\Windows\system32\IMM32.dll
ModLoad: 76c50000 76d1c000   C:\Windows\system32\MSCTF.dll
ModLoad: 71870000 718a2000   C:\Windows\system32\WINMM.dll
ModLoad: 6f500000 6f551000   C:\Windows\system32\WINSPOOL.DRV
ModLoad: 76770000 76810000   C:\Windows\system32\ADVAPI32.dll
ModLoad: 768f0000 76909000   C:\Windows\SYSTEM32\sechost.dll
ModLoad: 569f0000 56e40000   D:\software\registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug\debug\QtCored4.dll
ModLoad: 76e80000 76eb5000   C:\Windows\system32\WS2_32.dll
ModLoad: 77700000 77706000   C:\Windows\system32\NSI.dll
ModLoad: 66580000 6664b000   C:\Windows\system32\MSVCP110D.dll
ModLoad: 56850000 569eb000   C:\Windows\system32\MSVCR110D.dll
(758.15c): Break instruction exception - code 80000003 (first chance)
eax=00000000 ebx=00000000 ecx=001af55c edx=775c64f4 esi=fffffffe edi=00000000
eip=7761e60e esp=001af578 ebp=001af5a4 iopl=0         nv up ei pl zr na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000246
ntdll!LdrpDoDebuggerBreak+0x2c:
7761e60e cc              int     3
cdb: Reading initial command '.idle_cmd !qtcreatorcdbext.idle'
Execute when idle: !qtcreatorcdbext.idle
0:000>
<l+t
<l+s
dNOTE: ENGINE SETUP OK
dState changed from EngineSetupRequested(1) to EngineSetupOk(3) [master]
dQUEUE: SETUP INFERIOR
dState changed from EngineSetupOk(3) to InferiorSetupRequested(4) [master]
dQUEUE: SETUP INFERIOR
dCALL: SETUP INFERIOR
<sxn 0x4000001f
<.asm source_line
<!qtcreatorcdbext.pid -t 0
Source options are 1:
  1/t - Step/trace by source line
Source options are 5:
  1/t - Step/trace by source line
  4/s - List source code at prompt
Assembly options: source_line
Qt Creator CDB extension version 0.11 (Qt 5 support) 32 bit built Aug  9 2012.
dTaking notice of pid 1880
dNOTE: INFERIOR SETUP OK
dState changed from InferiorSetupRequested(4) to InferiorSetupOk(6) [master]
dState changed from InferiorSetupOk(6) to EngineRunRequested(7) [master]
dQUEUE: RUN ENGINE
dCALL: RUN ENGINE
<g
dNOTE: ENGINE RUN AND INFERIOR RUN OK
sRunning.
dState changed from EngineRunRequested(7) to InferiorRunOk(11) [master]
ModLoad: 75640000 7568b000   C:\Windows\system32\apphelp.dll
ModLoad: 565f0000 56849000   C:\Windows\AppPatch\AcXtrnal.DLL
FTH: (1880): *** Fault tolerant heap shim applied to current process. This is usually due to previous crashes. ***

ModLoad: 744b0000 744f0000   C:\Windows\system32\uxtheme.dll
ModLoad: 741b0000 741c3000   C:\Windows\system32\dwmapi.dll
ModLoad: 755d0000 755dc000   C:\Windows\system32\CRYPTBASE.dll
("D:/development/Qt/4.8.3-msvc/plugins", "D:/software/registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug/debug") 

ModLoad: 00940000 00a30000   D:\software\registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug\debug\Sgfu03m.dll
ModLoad: 6dc90000 6dca1000   C:\Windows\system32\winbio.dll
ModLoad: 75750000 7586c000   C:\Windows\system32\CRYPT32.dll
ModLoad: 75740000 7574c000   C:\Windows\system32\MSASN1.dll
ModLoad: 6da50000 6da81000   C:\Windows\system32\credui.dll
ModLoad: 00270000 00290000   D:\software\registrationPlatform-build-desktop-Qt_4_8_3-msvc__qmake__Debug\debug\sgfpaMX.dll 

ModLoad: 750d0000 750e6000   C:\Windows\system32\CRYPTSP.dll
ModLoad: 74ef0000 74f2b000   C:\Windows\system32\rsaenh.dll
ModLoad: 756c0000 756ce000   C:\Windows\system32\RpcRtRemote.dll
ModLoad: 75890000 75914000   C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7600.16385_none_ebf82fc36c758ad5\comctl32.dll
HEAP[registrationPlatform.exe]: 
Heap block at 003D3628 modified at 003D3655 past requested size of 25

(758.15c): Break instruction exception - code 80000003 (first chance)
s
sException at 0x77644684, code: 0x80000003: breakpoint, flags=0x0 in ntdll!RtlpBreakPointHeap
eax=003d3628 ebx=003d3655 ecx=775a07ed edx=001ac329 esi=003d3628 edi=00000025
eip=77644684 esp=001ac570 ebp=001ac570 iopl=0         nv up ei pl nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000202
ntdll!RtlpBreakPointHeap+0x23:
    77644684 cc              int     3
sInterrupted.
dNOTE: INFERIOR SPONTANEOUS STOP
sStopped.
dState changed from InferiorRunOk(11) to InferiorStopOk(14) [master]
<!qtcreatorcdbext.locals -t 1 -D -c -W 9 
```

导致问题的代码的特定部分如下：

```
 BYTE *buffer = new BYTE(device_info.ImageHeight*device_info.ImageWidth);

    DWORD timeout = 10000;

    DWORD quality = 30;

    if(SGFPM_GetImageEx(g_Fpm, buffer, timeout, NULL, quality) == SGFDX_ERROR_NONE)
    {        
        //draw image
    }

    delete buffer; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:00:39.373

更改您的`new`and`delete`以使用 [ ] 而不是 ( )。您实际上只分配一个字节并将其值初始化为您想要的字节数。`SGFPM_GetImageEx`尝试将图像写入未分配的内存并崩溃。

```
BYTE *buffer = new BYTE[device_info.ImageHeight*device_info.ImageWidth];
...
delete[] buffer; 
```

# ruby - 超类的实例是否可以像普通类的实例一样相互通信

> ID：13615194
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:02:26.527
> 
> 标签：ruby, inheritance

一个类的实例可以访问其他实例的方法，但是对于一个具有不同方法的类的两个不同子类可以这样做吗？还是必须将访问的方法包含在超类中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:35:18.490

听起来您需要通过将 Deck 实例传递给各个 Hand 实例来跟踪您的关联。这是基于您描述的场景的示例：

```
class Card
   attr_accessor :suit, :value

  def initialize(suit, value)
    @suit = suit
    @value = value
  end
end

class Deck
  SUITS = ["Spades", "Clubs", "Diamonds", "Hearts"]
  VALUES = [2, 3, 4, 5, 6, 7, 8, 9, 10, "J", "Q", "K", "A"]
  HAND_SIZE = 5

  attr_accessor :cards

  def initialize
    shuffle
  end

  def shuffle
    @cards = []
    SUITS.each do |suit|
      VALUES.each do |value|
        @cards << Card.new(suit, value)
      end
    end
    @cards.shuffle!
  end

  def deal_hand
    shuffle if @cards.size < (HAND_SIZE + 1)
    hand = @cards[0...HAND_SIZE]
    @cards = @cards.drop(HAND_SIZE)
    hand
  end
end

class Player
  attr_accessor :deck
  attr_accessor :hand

  def initialize(deck)
    @deck = deck
  end

  def draw!
    @hand = @deck.deal_hand
  end
end

# initialize
the_deck = Deck.new
players = []
players << (player1 = Player.new(the_deck))
players << (player2 = Player.new(the_deck))
players << (player3 = Player.new(the_deck))
players << (player4 = Player.new(the_deck))

# draw
players.each do |player|
  player.draw!
end

# play
# ... 
```

希望这可以帮助。

# nginx - Reverse proxying socket.io websocket with URL rewriting

> ID：13615199
> 
> 赞同：2
> 
> 时间：2012-11-28T22:02:44.197
> 
> 标签：nginx, websocket, socket.io, reverse-proxy, varnish

I am trying to reverse proxy several socket.io websockets and also rewrite the URLs so that I can have a front end server that can connect to several backend tty.js instances.

For example:

```
http://mysite.com/server1 reverse proxies to http://server1/ which is running tty.js

http://mysite.com/server2 reverse proxies to http://server2/ which is running tty.js 
```

For HTTP any old proxy works fine. However when I rewrite the URLs instead of the websocket looking like:

```
http://mysite.com/server1/socket.io/1/?t=1354135029745 -> http://server1/socket.io/1/?t=1354135029745 
```

it looks like:

```
http://mysite.com/socket.io/1/?t=1354135029745 
```

This of course goes unhandled. I assume the rewrite happens and so the socket assumes it's "connection" is at /socket.io/1/?t=1354135029745 instead of /server1/socket.io/1/?t=1354135029745

Is there some way to do URL rewriting as well as proxy a websocket?

So far I have tried both Varnish, node-http-proxy and Nginx using the TCP proxy module and I haven't been able to figure out how to get this to work.

Right now my Varnish config looks like:

```
backend backend1 {
    .host = "1.1.1.1";
    .port = "8080";
    .connect_timeout = 1s;
    .between_bytes_timeout = 60s;
    .max_connections = 800;
}

backend backend2 {
    .host = "2.2.2.2";
    .port = "8080";
    .connect_timeout = 1s;
    .between_bytes_timeout = 60s;
    .max_connections = 800;
}

sub vcl_recv {
    set req.grace = 120s
    if(req.url ~ "^/server1/") {
       set req.url = regsub(req.url, "^/server1/", "/");
       set req.backend = backend1;
       return(pipe);
    }
    if(req.url ~ "^/server2/") {
       set req.url = regsub(req.url, "^/server2/", "/");
       set req.backend = backend2;
       return(pipe);
    }
}

sub vcl_pipe {
    if(req.http.upgrade) {
        set bereq.http.upgrade = req.http.upgrade;
    } else {
        set bereq.http.connection = "close";
    }
    return(pipe);
} 
```

I am forced to leave out the obligatory:

```
 if(req.url ~ "^/socket.io/") {
    set req.backend = backend1;
    return(pipe);
 } 
```

since I have multiple backends. Is there a way to get this to work using node-http-proxy, Nginx or Varnish? Or if none of those have the ability, would something like haproxy or really anything else be able to?

My first inclination would be to set a custom header so when the URL does get rewritten it knows which backend it should hit, but I'm not sure if/how that would work.

Edit 1: I was able to sort of fix this issues by also pulling the req.http.referer and adding that to the socket.io statement:

```
if(req.url ~ "^/socket.io/" && req.http.referer ~ "server1"){
   set req.backend = backend1;
   return(pipe);
} 
```

However it appears to be a little wonky and seems to revert socket.io to xhr polling which is not ideal but better than nothing.

Edit 2: After testing it out with a few backends what happens is once long polling starts it breaks the rest of the proxy. As soon as I refresh the page now the reverse proxy instead of going:

```
http://mysite.com/server1 -> http://server1 
```

goes:

```
http://mysite.com/ -> http://server1 
```

until I reload varnish and then goes back.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:17:54.263

很可能您还需要更改以下`Host:`标题中的标题`vcl_recv()`：

```
sub vcl_recv {
    set req.grace = 120s
    if(req.url ~ "^/server1/") {
       set req.url = regsub(req.url, "^/server1/", "/");
       set req.http.host = "server1";
       set req.backend = backend1;
       return(pipe);
    }
    if(req.url ~ "^/server2/") {
       set req.url = regsub(req.url, "^/server2/", "/");
       set req.http.host = "server2";
       set req.backend = backend2;
       return(pipe);
    }
} 
```

那应该可以解决您最初的问题。

然而，在 Varnish 中使用管道有一些您可能需要考虑的陷阱。其中最重要的是[`X-Forwarded-For`第一次请求后没有标头](https://www.varnish-cache.org/trac/wiki/VCLExamplePipe)。

# javascript - 服务器通过 JSON 在 Javascript 中提供函数

> ID：13615201
> 
> 赞同：-2
> 
> 时间：2012-11-28T22:02:57.260
> 
> 标签：javascript, json, d3.js, force-layout

我正在使用 D3 中的力图创建数据驱动的显示。

我通过 ajax 从服务器数据中提供节点和链接。

D3 Force Layout 模型中有一个函数允许您通过函数设置链接距离。我想将此函数存储在数据库中，或者至少让它们在服务器端生成。

这是一个简单的例子。

```
 force
            .gravity(json_data.gravity || 0.15)
            .charge(-150 + json_data.nodes.length)
            .nodes(json_data.nodes)
            .links(json_data.links)
            .linkDistance(function (link, index) {
                if (index % 2)
                    return 30;
                return 50;
            })
            .start(); 
```

对于charge 和linkDistance 等字段，我真的很希望在服务器端完成繁重的工作。

实现这一目标的“最佳”方式是什么？我知道 Eval 可能能够解决一些问题，但是，大多数帖子都说避免它..

想法？

编辑：

这就是我要存储的

```
"function (link, index) { if (index % 2) return 30; return 50;"

"function (link, index) { if (index % 3 ==1) return 30; if (index % 3==2) return 40; return 50;" 
```

这是我拿它的地方。

服务器端 ：

```
 public JsonGraphDTO(int Id, UnitRepository repository) {
        gravity = 0.15;
        linkDistance = "return 40;";
        ... 
```

客户端处理：

```
 var fn = new Function('lnk','index',json_data.linkDistance);
        force
            .gravity(json_data.gravity || 0.15)
            .charge(-150 + json_data.nodes.length)
            .nodes(json_data.nodes)
            .links(json_data.links)
            .linkDistance(fn)
            .start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:14:03.273

您希望能够链接到不同的功能，命名它们。

```
function linkDistance1 (link, index) { if (index % 2) return 30; return 50; }
function linkDistance2 (link, index) { if (index % 3 ==1) return 30; if (index % 3==2) return 40; return 50; } 
```

并参考它们

```
 force
        .gravity(json_data.gravity || 0.15)
        .charge(-150 + json_data.nodes.length)
        .nodes(json_data.nodes)
        .links(json_data.links)
        .linkDistance(linkDistance1)
        .start(); 
```

您可以将其作为数组进行

```
var linkDistanceFunctions = [
    function (link, index) { if (index % 2) return 30; return 50; },
    function (link, index) { if (index % 3 ==1) return 30; if (index % 3==2) return 40; return 50; }
]; 
```

或作为一个对象

```
var linkDistanceFunctions = {
    "foo" : function (link, index) { if (index % 2) return 30; return 50; },
    "bar" : function (link, index) { if (index % 3 ==1) return 30; if (index % 3==2) return 40; return 50; }
}; 
```

你说你想动态加载它们，所以通过脚本标签加载它们。

```
window["myCallBack"] = function(myArrayOfFunctions){
    console.log(myArrayOfFunctions);
};
var head= document.getElementsByTagName('head')[0];
var script= document.createElement('script');
script.type= 'text/javascript';
script.src= 'myServerSidePage.php?callback=myCallBack';
head.appendChild(script); 
```

在服务器上，您将通过回调返回函数

```
myCallBack([
    function (link, index) { if (index % 2) return 30; return 50; },
    function (link, index) { if (index % 3 ==1) return 30; if (index % 3==2) return 40; return 50; }
]); 
```

我使用了一个数组，如果你愿意，你可以发回一个对象或一个函数。

# c - Switch Case Default case C 问题

> ID：13615202
> 
> 赞同：0
> 
> 时间：2012-11-28T22:03:00.203
> 
> 标签：c, switch-statement

您好，我正在使用 c 语言编写一个小型二叉树程序，在执行操作后，主菜单会打印两次，然后才允许扫描下一个输入。有什么想法可以防止这种情况吗？

```
#include<stdio.h>
#include<stdlib.h>

struct btree{
    int id, val;
    struct btree *left, *right;
};

typedef struct btree node;

void myparent(node *tree, int myid, node **parent){
    if(tree->id==(myid/2))
            *parent = tree;
    if(tree->left)
            myparent(tree->left, myid, parent);
    if(tree->right)
            myparent(tree->right, myid, parent);
}

void insert(node **tree, node *item){
    node *parent;
    if(item->id==1)
            *tree=item;
    else{
            myparent(*tree, item->id,&parent);
            if((item->id)%2)
                    parent->right=item;
            else
                    parent->left=item;
    }
}
void preorder_print(node *tree){
if (tree!=NULL){
    printf("    %d\n",tree->val);
    printf("\t");
    preorder_print(tree->left);
    printf("\n");
    preorder_print(tree->right);
}
}
void inorder_print(node *tree){
if (tree!= NULL){
    inorder_print(tree->left); 
    printf("%d ", tree->val); 
    inorder_print(tree->right); 
}
}

void printout(node *tree){
    if(tree->left)
            printout(tree->left);
    printf("%d\n", tree->val);
    if(tree->right)
            printout(tree->right);
}

main(){
    char opn;
    node *root, *curr;
    int idcount=1, inp=0;
    root=NULL;
    //input 9999 is the exit point
    do{
    printf("\n ### Binary Tree Operations ### \n\n");
    printf("\n Enter one of the following Operations:\n a- Add\n e- Empty\n i- List IN  ORDER\n r- List PRE-ORDER\n p- List POST ORDER\n q- Quit\n");

    scanf("%c", &opn);

    switch (opn) {
        case 1:
        case 'a':
        case 'A':

        printf("\nEnter a Node>");
            scanf("%d",&inp);
            curr=(node*)malloc(sizeof(node));
            curr->val=inp;
            curr->id=idcount++;
            curr->left = curr->right = NULL;
            insert(&root, curr);
            printf("The number was inserted\n");
            break;

        case 2:
        case 'e':
        case 'E':
            printf("The value was deleted\n");
            break;

        case 3: 
        case 'i':
        case 'I':
            printf("IN ORDER Tree: \n");
            inorder_print(root);
            break;

        case 4:
        case 'r':
        case 'R':
             printf("PRE ORDER Tree: \n");
             preorder_print (root); 
             break;     

        case 5:
        case 'p':
        case 'P':
            printf("POST ORDER Tree: \n");
            printout(root);  
            break;

        case 6:
        case 'q':
        case 'Q':
            printf("\n\n Terminating \n\n");
            exit(1);

        default:
            printf("Invalid Opition \n \n");
            break;

    }
    printf("\n Press any key to continue . . .");
} while (opn != 'q');

 /*   printf("\n Entered Binary Tree is \n");
    printout(root);
    return 0; */
} 
```

即使没有输入任何内容，也会打印出带有无效选项的菜单，因此输出如下所示：

```
 ### Binary Tree Operations ### 

 Enter one of the following Operations:
 a- Add
 e- Empty
 i- List IN ORDER
 r- List PRE-ORDER
 p- List POST ORDER
 q- Quit
a

Enter a Node>1
The number was inserted

 Press any key to continue . . .
 ### Binary Tree Operations ### 

 Enter one of the following Operations:
 a- Add
 e- Empty
 i- List IN ORDER
 r- List PRE-ORDER
 p- List POST ORDER
 q- Quit
Invalid Opition 

 Press any key to continue . . .
 ### Binary Tree Operations ### 

 Enter one of the following Operations:
 a- Add
 e- Empty
 i- List IN ORDER
 r- List PRE-ORDER
 p- List POST ORDER
 q- Quit
i
IN ORDER Tree: 
2 4 1 3 5 
Press any key to continue . . .
 ### Binary Tree Operations ### 

 Enter one of the following Operations:
 a- Add
 e- Empty
 i- List IN ORDER
 r- List PRE-ORDER
 p- List POST ORDER
 q- Quit
Invalid Opition 

 Press any key to continue . . .
 ### Binary Tree Operations ### 

 Enter one of the following Operations:
 a- Add
 e- Empty
 i- List IN ORDER
 r- List PRE-ORDER
 p- List POST ORDER
 q- Quit
q

 Terminating 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:06:31.537

`scanf`如果“未输入任何内容”，将使用上述代码填充`opn`换行符 ( )。`\n`由于您没有`case`为此，它将默认处理。

即使输入了一个字符，换行符也会保留在缓冲区中以供下次`scanf`调用。

# c# - 检查机器上的第三方防火墙

> ID：13615203
> 
> 赞同：13
> 
> 时间：2012-11-28T22:03:05.540
> 
> 标签：c#, security, wmi, firewall, windows-server-2008-r2

我正在检查防火墙。以下代码很容易检查默认 Windows 防火墙的状态：

```
 INetFwMgr manager = GetFireWallManager();
    bool isFirewallEnabled = manager.LocalPolicy.CurrentProfile.FirewallEnabled;
    if (isFirewallEnabled == false)
    {
      Console.WriteLine("Firewall is not enabled.");
    }
    else
    {
      Consoe.WriteLine("Firewall is enabled.");
    }
    Console.ReadLine();

   private static INetFwMgr GetFireWallManager()
   {
     Type objectType = Type.GetTypeFromCLSID(new Guid(firewallGuid));
     return Activator.CreateInstance(objectType) as INetFwMgr;
   } 
```

那么问题就变成了：如何找到非 Windows 防火墙的状态？如果防火墙已正确集成，上述检查是否会正常工作，还是有更好的方法来做到这一点？我已经检查了这篇文章：[C# Windows 安全中心设置](https://stackoverflow.com/questions/12493170/c-sharp-windows-security-center-settings)和这篇文章：[C# - 如何检查是否启用了外部防火墙？](https://stackoverflow.com/questions/5975321/c-sharp-how-to-chceck-if-external-firewall-is-enabled)但事实证明两者都相对无济于事。

我一直在研究 WMI API，但到目前为止它非常令人困惑，而且通过 MSDN 提供的文档也不太乐观。我也尝试过使用[SelectQuery](http://msdn.microsoft.com/en-us/library/system.management.selectquery.aspx)，但到目前为止我一直没有成功。任何人都可以帮助我在一个新的起点或我可以找到关于第 3 方防火墙的更好的文档/说明的地方吗？

**编辑：**目前我正在进一步探索 WMI，特别`FirewallProduct`是帖子建议的课程。

**更新 2：**我一直在测试以下代码段：

```
 string wmiNameSpace = "SecurityCenter2";
  ManagementScope scope;
  scope = new ManagementScope(String.Format("\\\\{0}\\root\\{1}", "localhost", wmiNameSpace), null);
  scope.Connect();
  ObjectQuery query = new ObjectQuery("SELECT * FROM FirewallProduct");
  ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query); 
```

但是运行它会导致以下错误： `Exception Invalid namespace` 它指向第 39 行 ( `scope.Connect()`)。如果我只是错过了一个参数或格式不正确，我一点也不感到惊讶，我只是不知道它是什么。

**更新 3** 从`SecurityCenter2`to切换`SecurityCenter`仍然会产生相同的`invalid namespace`错误。

**更新 4** 我将控制台应用程序移到另一个盒子（win7 不是 winserver08r2），它按预期正确报告。所以这可能是我目前正在测试的虚拟机的问题。下一步是解析活动/非活动状态

**更新 5** 它在另一个 Server08 机器上进行了测试，并且`invalid namespace`出现了相同的错误。使用`SecurityCenter`代替`SecurityCenter2`不能解决问题。是否有一些 Windows Server OS 用于防止篡改防火墙的底层安全功能，或者 Server OS 是否不附带特定的 WMI 功能密钥集？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T05:03:21.150

> 根据微软**问：Windows 安全中心如何检测第三方产品及其状态？**
> 
> 答：Windows 安全中心使用两层方法检测状态。一层是手动的，另一层是通过 Windows Management Instrumentation (WMI) 自动完成的。在手动检测模式下，Windows 安全中心搜索由独立软件制造商提供给 Microsoft 的注册表项和文件。这些注册表项和文件让 Windows 安全中心可以检测独立软件的状态。在 WMI 模式下，软件制造商确定自己的产品状态，并通过 WMI 提供程序将该状态报告回 Windows 安全中心。在这两种模式下，Windows 安全中心都会尝试确定以下是否为真：
> 
> *   存在防病毒程序。
> *   防病毒签名是最新的。
> *   为防病毒程序打开实时扫描或读写扫描。
> *   对于防火墙，Windows 安全中心会检测是否安装了第三方防火墙以及防火墙是否打开。

所以你可以使用 WMI 来确定是否安装了第三方防火墙，使用`FirewallProduct`类，前段时间我写了一篇关于这个主题的文章，解释了如何使用 WMI 获取这些信息。

*   [`Getting the installed Antivirus, AntiSpyware and Firewall software using Delphi and the WMI`](http://theroadtodelphi.wordpress.com/2011/02/18/getting-the-installed-antivirus-antispyware-and-firewall-software-using-delphi-and-the-wmi/).

试试这个示例 C# 来获取当前的第三方防火墙名称和安装状态。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                //select the proper wmi namespace depending of the windows version
                string WMINameSpace = System.Environment.OSVersion.Version.Major > 5 ? "SecurityCenter2" : "SecurityCenter";

                ManagementScope Scope;
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\{1}", "localhost", WMINameSpace), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM FirewallProduct");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {

                    Console.WriteLine("{0,-35} {1,-40}","Firewall Name",WmiObject["displayName"]);                      
                    if (System.Environment.OSVersion.Version.Major < 6) //is XP ?
                    {
                    Console.WriteLine("{0,-35} {1,-40}","Enabled",WmiObject["enabled"]);    
                    }
                    else
                    {
                        Console.WriteLine("{0,-35} {1,-40}","State",WmiObject["productState"]); 
                    }   
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

# java - Mock testing a dependency-injected object

> ID：13615206
> 
> 赞同：0
> 
> 时间：2012-11-28T22:03:25.867
> 
> 标签：java, spring, testing, dependency-injection, mocking

I have four classes like below:

```
public class A(){

  public void getOne(){

    B objB = new B();
    String x = objB.getTwo();
  }
}

public class B(){

  public String getTwo(){

    C objC = new C();
    return objC.getThree();
  }
}

public class C(){

  D objD;

  public String getThree(){

    return objD.getFour();
  }
}

public class D(){

  public String getFour(){

    return "hi";
  }
} 
```

In the above code, class `C` has `objD` which is being injected by Spring. When I try to test the `getOne()` method of class `A`, I get a null pointer exception because when the method call reaches class `C`, it has no `objD` instantiated (hence the exception). How can I test such methods where the sub-sub class has a method where that sub-sub class is dependency-injected by Spring?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:11:16.777

测试失败了，这是一件好事，因为 Spring 无法将依赖项注入到它不是自己创建的对象中。如果你在做`new C()`，Spring 对此一无所知，并且永远不会注入`objD`到这个 C 实例中。

D应该注入C，应该注入B，B应该注入A。这样就可以通过注入一个mock B来测试A；您可以通过注入模拟 C 来测试 B，也可以通过注入模拟 D 来测试 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:11:49.090

虽然对象`C`可能是 Spring 注入的，但您在`B`（因此`A`）中没有意识到它，因为您正在使用`new`运算符来实例化`C`，如果没有其他库的帮助（我假设您没有使用），Spring 不会拦截它。

`new`当涉及到控制反转时，这是一个肮脏的词，我在`A`和中都看到了它`B`。

理想情况下，当您为 编写测试时`A`，您不想依赖它不知道的任何内容（在本例中为`C`和`D`）。您可能想要模拟/存根的实例`B`并将其注入`A`. 我建议`B`对`C`.

# ruby-on-rails - Flash 消息在 IE 中显示不一致

> ID：13615208
> 
> 赞同：2
> 
> 时间：2012-11-28T22:03:48.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internet-explorer, flash-message

我有一个奇怪的问题，即在 IE 中没有显示 Flash 消息（尝试了 8 和 9）：

*   它始终适用于其他浏览器
*   问题仅在一个页面上（此页面根据参数呈现不同的表单）
*   flash 消息总是出现在 development 上，但有时只出现在 staging 和 prod 上
*   我看到在所有情况下都记录了 Flash 消息`[notice] Your changes have been saved. Next step...`，即使它没有出现在页面上！
*   错误闪烁消息总是出现，这是无法正常工作的通知。

* * *

这是我的更新操作：

```
def update 
  @form = Forms::Events::EditForm.build_for(@event, params[:event])
  if @form.save
    redirect_to edit_challenge_path(@form.event, form: @form.event_name), notice: "Your changes have been saved. #{@form.next_form}".html_safe
  else
    flash.now[:alert] = "Please correct the errors highlighted below."
    render "groups/events/edit"
  end
end 
```

关于什么可能是错误的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:26:50.793

同意@AnthonyAlberto 的评论。您想要的是`.now`flash 的方法，例如`flash.now[:alert] = ...` Here's a [good explanation of the difference](http://blog.vedanova.com/2010/09/29/rails-flash-now/)。

# c++ - Linker Issue using Extern

> ID：13615210
> 
> 赞同：0
> 
> 时间：2012-11-28T22:03:49.220
> 
> 标签：c++, linker

So I have a 2 games running side by side.

```
proj2/main.cpp (main that gets run that then can call either game)
proj2/spades/display.cpp
proj2/spades/gameplay.cpp
proj2/spades/otherFiles.cpp
proj2/hearts/display.cpp (this is the same display class as in the spades game with the same functions just sightly altered.)
proj2/hearts/hearts.cpp
proj2/hearts/otherFiles.cpp 
```

I'm getting the following linker error,

```
./gamePlay.o: In function `__static_initialization_and_destruction_0(int, int)':
gamePlay.cpp:(.text+0x396): undefined reference to `spades::display::display()'
./gamePlay.o: In function `__tcf_3':
gamePlay.cpp:(.text+0x480): undefined reference to `spades::display::~display()' 
```

in my gamePlay.cpp file I define the following and I think this is where my error is,

```
 display monitor; 
```

if I add the extern identifier to the line such as

```
extern display monitor; 
```

the error will disappear only to produce the following issue,

```
./gamePlay.o: In function `spades::gamePlay::storeBid(std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >&)':
    gamePlay.cpp:(.text+0x14ee): undefined reference to `spades::monitor'
    gamePlay.cpp:(.text+0x14f3): undefined reference to `spades::display::drawBox(int, int, int, int, int)' 
```

I think this error is this coming from these following lines, but I have no idea how to fix this error. Feeling quite lost at the moment. (I don't understand why I would need the extern as an identifier for monitor either). Also all the includes should be alright.

```
int key = monitor.captureInput();
         monitor.drawBox(2, 5, 3, 2, 0); 
```

Below is my display.h file

```
/*
 * Description: Defines constants and class prototypes and variables
 */

// These are include files they are used for accessing functions and
// variables in external libraries.
#include <ncursesw/ncurses.h>
#include <iostream>
#include <cstdio>
// This is the namespace std, without this you would need to add "std::"
// infront of every variable and function from the std library.
//using namespace std;

// These Mouse Mask Definitions are for some of the common mouse buttons
// that are used in this project.
#define LEFT_UP    1
#define LEFT_DOWN  2
#define LEFT_CLICK 4
#define LEFT_DOUBLECLICK 24

#define RIGHT_UP    4096
#define RIGHT_DOWN  8192
#define RIGHT_CLICK 16384
#define RIGHT_DOUBLECLICK 32768

#define MIDDLE_ROLLUP    1048576
#define MIDDLE_ROLLDOWN  256
namespace spades {
// Some extended character definitions for showing the special symbols
// in the extended UTF-8 character map.
const char joker[]    = {0xE2, 0x98, 0xBA, 0};
const char clubs[]    = {0xE2, 0x99, 0xA3, 0};
const char diamonds[] = {0xE2, 0x99, 0xA6, 0};
const char hearts[]   = {0xE2, 0x99, 0xA5, 0};
const char spades[]   = {0xE2, 0x99, 0xA0, 0};

/*
 * This is the display class definitions
 */
class display {
public:
    /* "constructor"
    * This function is called whenever a new object of class display is first
    * created. Put initialization functions in here.
    */
    display(void){};
    /* "destructor"
    * This function is called just before a object is deleted. Put clean up
    * functions in here.
    */
    ~display(){}; // destructor

    // captures user input
    int captureInput(void);
    // stores new screensize on update
    void handleResize(int sig);

    /*
     * Drawing commands
     */
    // display a card on the screen
    void displayCard(int x, int y, int suit, int number, int printAtt);
    // erase in the shape of a box on the screen
    void eraseBox(int x, int y, int sizeX, int sizeY);
    // draw a box on the screen
    void drawBox(int x, int y, int sizeX, int sizeY, int printAtt);
    // display banner text at the bottom of the screen
    void bannerBottom(std::string bannerText);
    void bannerAboveBottom(std::string bannerText);
    // display banner text at the top of the screen
    void bannerTop(std::string bannerText);

    // get information about the display
    int getCols(void) {return cols;}
    int getLines(void) {return lines;}
    int getMouseEventX(void) {return mouseEventX;}
    int getMouseEventY(void) {return mouseEventY;}
    int getMouseEventButton(void) {return mouseEventButton;}

    // Updates the screen after you finish drawing
    void updateScreen(void) {refresh();}

    // sets an offset for when cards clip the bottom of the screen
    void setBottomOffset(int offset) {lineBoundaryOffset=offset;}

private:
    // These are private functions and variables used inside of display.
    // You should not try to access these from outside the display class.
    void printFace(int suit, int number, int line, int printAtt);
    void printSuit(int suit);
    void printNumber(int number);

    int cols;
    int lines;
    int mouseEventX;
    int mouseEventY;
    int mouseEventButton;
    int lineBoundaryOffset;
};
} 
```

Below is my display.cpp file

```
/* 
 * Description: Defines the functionality of the user interface.
 *
 * NOTES:
 *      * Requires the terminal (Putty) to be set to UTF-8.
 *      * Does not function when running a screen session.
 */
#include <iostream>
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>

#include "display.h"
namespace spades {
//using namespace std;

/* Function: This is the constructor.
 * Description: It is called whenever an object of class display is initialized
 */
display::display(void) {
    /* Initilization of Terminal */
    // required to get card suits displaying, combined with UTF-8 set in terminal
    setlocale(LC_ALL,"en_US.utf-8");

    // initialize ncurses screen
    initscr();
    // allow for color settings
    start_color();
    // clear the screen
    clear();
    // turn off the keyboard echo (reqiured while drawing)
    noecho();
    // Change to character mode (so individual characters are being read at a
    // time rather than waiting for a carriage return).
    cbreak();
    // Allows for function keys to be used (also nessacary for getting the mouse
    // movement working).
    keypad(stdscr, TRUE);
    // set which mouse events are captured
    mousemask(ALL_MOUSE_EVENTS, NULL);
    // Setting the timeout for the capture input values are in 1/10ths of a second.
    halfdelay(5);

    // setup the screen size settings.
    cols = 80;
    lines = 24;
    // this updates the locally stored col and line variables
    handleResize(0);
    // set a no card draw offset of 1 so the bottom banner is not overwritten
    lineBoundaryOffset = 1;

    // Settings for card colors (these can be set outside of the display class)
    init_pair(1, COLOR_CYAN, COLOR_BLACK); // for card outline
    init_pair(2, COLOR_BLUE, COLOR_BLACK); // for spades and clubs
    init_pair(3, COLOR_RED, COLOR_BLACK);  // for hearts and diamonds
    init_pair(4, COLOR_GREEN, COLOR_BLACK); // for turned over card
    init_pair(5, COLOR_GREEN, COLOR_BLACK); // for box drawing
    init_pair(6, COLOR_GREEN, COLOR_BLACK); // for banner display
}

/* Function: This is the destructor.
 * Description: This is called just before an object is deleted.
 */
display::~display() {
    // this is turns off all the special settings and returns the terminal to normal
    endwin();
    // insert deletion of dynamically created objects here too
}

/*
 * Function: This captures all the userinput.
 * Description: It captures mouse and keyboard events.
 *      Returns "Positive Number"
 *          - for user keypress
 *          - this is a character code typed
 *      Returns "0" - for no user input
 *          - this is when nothing is typed for half a second
 *          - allows for other timed operations to occur
 *      Returns "-1" - for mouse event
 *          - details of the mouse event must be fetched from this class
 *          - use getMouseEventX, getMouseEventY and getMouseEventButton
 */
int display::captureInput(void) {
    // obtain one mouse event or keypress
    int ch=getch();
    // this is a switch statement for the result of getch
    switch (ch) {
    case KEY_MOUSE: // this occurs when an mouse event occurs
      {
        MEVENT mevent; // this is a variable declared of type MEVENT
        getmouse(&mevent); // this gets the mouse event from ncurses (library)
        mouseEventX = mevent.x; // get the column location of the event
        mouseEventY = mevent.y; // get the row location of the event
        mouseEventButton = mevent.bstate; // get the button state of the mouse
        return -1; // -1 is for a mouse event
      }
      break;
    case ERR: // this occurs when there is a timeout
      {
        return 0; // 0 is when nothing occurs
      }
      break;
    default: // this occurs when a key is pressed
      return ch; // a character is when the user types something
    }

    return 0; // this is never called, but is used to stop compiler complaints
}

/*
 * Function: Updates all the information in the display class on window resize
 * Description: This function just updates information, it requires the call
 *      from a static singal handler. Signal handlers service interrupts and require
 *      a static function to be called, because they are not part of the main
 *      program control flow. The signal handler should be declared in the main
 *      class, because your game should redraw the display on a resize.
 */
void display::handleResize(int sig) {
#ifdef TIOCGSIZE // operating system dependant differences
    struct ttysize ts;
    ioctl(STDIN_FILENO, TIOCGSIZE, &ts); // get the information of the terminal
    cols = ts.ts_cols;
    lines = ts.ts_lines;
#elif defined(TIOCGWINSZ)
    struct winsize ts;
    ioctl(STDIN_FILENO, TIOCGWINSZ, &ts); // get the information of the terminal
    cols = ts.ws_col;
    lines = ts.ws_row;
#endif /* TIOCGSIZE */
    resizeterm(lines, cols); // sets the ncurses window size correctly
}

/*
 * Function: Displays various cards on the game screen
 * Description: This function displays various playing cards on the screen.
 *      The first two arguments are the x and y coordinates of the top left corner
 *      of the card.
 *          The suit values are: 1=spades, 2=hearts, 3=clubs, 4=diamonds
 *          The numbers are: 1=Ace, 2-10=2-10, 11=Jack, 12=Queen, 13=King, 14=Joker
 *      Any suit and number that do not match the valid numberrs generates a face down
 *      card.
 *          The printAtt allows for one or more any of the following display settings:
 *              A_NORMAL        Normal display (no highlight)
 *              A_STANDOUT      Best highlighting mode of the terminal.
 *              A_UNDERLINE     Underlining
 *              A_REVERSE       Reverse video
 *              A_BLINK         Blinking
 *              A_DIM           Half bright
 *              A_BOLD          Extra bright or bold
 *              A_PROTECT       Protected mode
 *              A_INVIS         Invisible or blank mode
 *              A_ALTCHARSET    Alternate character set
 *              A_CHARTEXT      Bit-mask to extract a character
 *              COLOR_PAIR(n)   Color-pair number n
 */
void display::displayCard(int x, int y, int suit, int number, int printAtt) {

    // Ncurses drawing settings
    attron(COLOR_PAIR(1) | printAtt);
    // prevent draw if it off the screen
    if (x>=0 && y>=0 && x<cols-6 && y<lines-lineBoundaryOffset) {
        // print the top lines of the card
        mvprintw(y,x,"\u250c\u2500\u2500\u2500\u2500\u2510");
        // the next 4 if statements prevent draw if it is over the bottom of the screen
        if (y<lines-1-lineBoundaryOffset) {
            move(y+1,x); // move command
            printFace(suit,number,0, printAtt); // call function to print card face
        }
        if (y<lines-2-lineBoundaryOffset) {
            move(y+2,x); // move command
            printFace(suit,number,1, printAtt); // call function to print card face
        }
        if (y<lines-3-lineBoundaryOffset) {
            move(y+3,x); // move command
            printFace(suit,number,2, printAtt); // call function to print card face
        }
        if (y<lines-4-lineBoundaryOffset) {
            // prints the bottom lines of the card
            mvprintw(y+4,x,"\u2514\u2500\u2500\u2500\u2500\u2518");
        }
    }
    // Ncurses turn off the drawing settings
    attroff(COLOR_PAIR(1) | printAtt);
}

/*
 * Function: Print a single line of what is written on the card.
 * Description: This copies suit, number and printAtt from the calling function.
 *      Also includes what line of the card face is being drawn.
 */
void display::printFace(int suit, int number, int line, int printAtt) {
    // draw left edge of the card
    printw("\u2502");

    if (suit==2 || suit==4) { // Red for Hearts and Diamonds
        attron(COLOR_PAIR(3) | printAtt);
    } else { // Black for Spades and Clover
        attron(COLOR_PAIR(2) | printAtt);
    }

    // this the display of the joker
    if (number==14) {
        if (line==0)
            printw("J%s  ", joker);
        if (line==1)
            printw("oker");
        if (line==2)
            printw("  J%s", joker);
    // this is the display for the cards with suits and numbers
    } else if (suit>=1 && suit <=4 && number>=1 && number<=13) {
        if (line==0) {
            printSuit(suit); // function to draw suit
            printNumber(number); // function to draw number
            if (number!=10)
                printw(" ");
            printw(" ");
        } else if (line==2) {
            if (number!=10)
                printw(" ");
            printw(" ");
            printNumber(number); // function to draw number
            printSuit(suit);    // function to draw suit
        } else {
            printw("    ");
        }
    // this is for a face down card
    } else {
        // the face down cards have a special color
        attron(COLOR_PAIR(4) | printAtt);
        if (line==0)
            printw("%s  %s", spades, hearts);
        if (line==1)
            printw("Play");
        if (line==2)
            printw("%s  %s", diamonds, clubs);
        attroff(COLOR_PAIR(1) | printAtt);
    }

    // turn on the card edge color settings
    attron(COLOR_PAIR(1) | printAtt);
    // print the right edge of the card
    printw("\u2502");
}

/*
 * Function: Print the suit of the card
 * Description: This is just a look up table.
 */
void display::printSuit(int suit) {
    switch (suit) {
        case 1:
            printw("%s",spades);
            break;
        case 2:
            printw("%s",hearts);
            break;
        case 3:
            printw("%s",clubs);
            break;
        case 4:
            printw("%s",diamonds);
            break;
        default:
            printw(" ");
            break;
    }
}

/*
 * Function: Prints the number on the card
 * Description: This is just a look up table.
 */
void display::printNumber(int number) {
    switch (number) {
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
        case 7:
        case 8:
        case 9:
        case 10:
            printw("%i",number);
            break;
        case 1:
            printw("%c",'A');
            break;
        case 11:
            printw("%c",'J');
            break;
        case 12:
            printw("%c",'Q');
            break;
        case 13:
            printw("%c",'K');
            break;
        default:
            printw(" ");
            break;
    }
}

/*
 * Function: Erases a rectangle on the screen
 * Description: x,y is for the top left corner, sizeX and sizeY set
 *          how big the square is.
 */
void display::eraseBox(int x, int y, int sizeX, int sizeY) {
    std::string strDraw;
    int yCount;
    int maxSizeX;

    // this limits the column size of the draw when it is over the edge
    // of the drawing area
    if (sizeX+x > cols)
        maxSizeX=cols-x;
    else
        maxSizeX=sizeX;

    // for the number of rows that need to be drawn
    for (yCount=0; yCount<sizeY;yCount++) {
        // if the box goes over the edge of the drawable screen
        // stop drawing by breaking the loop
        if (yCount+y > lines-lineBoundaryOffset || y < 0)
            break;
        // reset the line to be drawn
        strDraw = "";
        // check that x is not off the screen
        if (x<=cols && x >= 0) {
            // make a string needed for box width
            strDraw.append(maxSizeX,' ');
            // print the line of the box
            mvprintw(y+yCount,x,"%s",strDraw.c_str());
        }
    }
}

/*
 * Function: Draws a box on the screen
 * Description: x,y is for the top left corner, sizeX and sizeY set
 *          how big the square is. printAtt allows for changes in the
 *          display settings.
 */
void display::drawBox(int x, int y, int sizeX, int sizeY, int printAtt) {
    std::string strDraw;
    int ii;
    int yCount;

    // set the box setting colors on
    attron(COLOR_PAIR(5) | printAtt);

    // for the box height being drawn loop
    for (yCount=0; yCount<sizeY;yCount++) {
        // break loop if the drawing is offscreen
        if (yCount+y > lines-lineBoundaryOffset || y < 0)
            break;
        // if x is on the screen
        if (x<=cols) {
            strDraw = "";
            // for the box width loop
            for (ii=0;ii<sizeX;ii++){
                // stop drawing if the x is offscreen
                if (ii+x > cols || x < 0)
                    break;
                // first line
                if (yCount==0) {
                    if (ii==0) {
                        strDraw.append("\u250c"); // left
                    } else if (ii==sizeX-1) {
                        strDraw.append("\u2510"); // right
                    } else {
                        strDraw.append("\u2500"); // middle
                    }
                // last line
                } else if (yCount==sizeY-1) {
                    if (ii==0) {
                        strDraw.append("\u2514"); // left
                    } else if (ii==sizeX-1) {
                        strDraw.append("\u2518"); // right
                    } else {
                        strDraw.append("\u2500"); // middle
                    }
                // other lines
                } else {
                    if (ii==0) {
                        strDraw.append("\u2502"); // left
                    } else if (ii==sizeX-1) {
                        strDraw.append("\u2502"); // right
                    } else {
                        strDraw.append(" "); // middle
                    }
                }
            }
            // print the line that was created
            mvprintw(y+yCount,x,"%s",strDraw.c_str());
        }
    }
    // turn off the attribute colors
    attroff(COLOR_PAIR(5) | printAtt);
}

/*
 * Function: Draws a banner of text at the bottom right of the screen
 * Description: Inverts the color and draws the banner at the bottom
 *      of the screen. Does not handle carriage returns on the string.
 */
void display::bannerBottom(std::string bannerText) {
    // change to the banner draw settings
    attron(COLOR_PAIR(6) | A_REVERSE | A_BOLD);
    // checks if the banner string size is smaller than the width of the screen
    if((unsigned)cols > bannerText.size()) {
        // moves the cursor to the bottom of the screen
        move(lines-1,0);
        // fill in extra space to the banner text is right adjusted
        hline(' ',cols - bannerText.size());
        // prints out the banner text
        mvprintw(lines-1,cols-bannerText.size(),"%s", bannerText.c_str());
    // if banner string size is larger than width of screen
    } else {
        // clip the banner text so it doesn't wrap over to the next line
        mvprintw(lines-1,0,"%s", (bannerText.substr(0,cols)).c_str());
    }
    // turn off the draw colors
    attroff(COLOR_PAIR(6) | A_REVERSE | A_BOLD);
}

void display::bannerAboveBottom(std::string bannerText) {
    // change to the banner draw settings
    attron(COLOR_PAIR(1) | A_REVERSE | A_BOLD);
    // checks if the banner string size is smaller than the width of the screen
    if((unsigned)cols > bannerText.size()) {
        // moves the cursor to the bottom of the screen
        move(lines-2,0);
        // fill in extra space to the banner text is right adjusted
        hline(' ',cols - bannerText.size());
        // prints out the banner text
        mvprintw(lines-2,cols-bannerText.size(),"%s", bannerText.c_str());
    // if banner string size is larger than width of screen
    } else {
        // clip the banner text so it doesn't wrap over to the next line
        mvprintw(lines-2,0,"%s", (bannerText.substr(0,cols)).c_str());
    }
    // turn off the draw colors
    attroff(COLOR_PAIR(1) | A_REVERSE | A_BOLD);
}

/*
 * Function: Draws a banner of text at the top left of the screen
 * Description: Inverts the color and draws the banner at the top
 *      of the screen. Does not handle carriage returns on the string.
 */
void display::bannerTop(std::string bannerText) {
    // change to the banner draw settings
    attron(COLOR_PAIR(6) | A_REVERSE | A_BOLD);
    // checks if the banner string size is smaller than the width of the screen
    if((unsigned)cols > bannerText.size()) {
        // moves the cursor to the bottom of the screen
        move(0,0);
        // prints out the banner text
        printw("%s", bannerText.c_str());
        // fill in extra space after the banner text
        hline(' ',cols - bannerText.size());
    // if banner string size is larger than width of screen
    } else {
        // clip the banner text so it doesn't wrap over to the next line
        mvprintw(0,0,"%s", (bannerText.substr(0,cols)).c_str());
    }
    // turn off the draw colors
    attroff(COLOR_PAIR(6) | A_REVERSE | A_BOLD);
}
} 
```

Below is my gameplay.h file

```
#include "player.h"
#include "display.h"

#ifndef gamePlay_H
#define gamePlay_H
namespace spades {

class gamePlay{

    bool spadesBroken;

public:
    vector <spades::card> getDeck();
    vector <spades::player>getplayers();
    bool getSpadesBroken() {return spadesBroken;}
    void setSpadesBroken(bool b){spadesBroken = b;}

    int compareCenter(int leadplayer);
    void createDeck();
    void deal(vector <spades::card> &deck, vector <spades::player> &players);
    void handSort();
    bool containSuit(spades::card lead, spades::player players);
    bool onlySpade(spades::player play);

    int handCheck(int xevent, int yevent, vector <spades::player> players, int trickStart);

    void displayHand();
    void displayAdd();
    void humanPlay(int trickStart);
    void CPUplay(int trickStart, int CPU);
    void score(spades::player &play, spades::player &play2);
    void storeBid(stringstream &msg);
    void runGame();

};
}
#endif 
```

Below is my gameplay.cpp file

```
#include <iostream>
#include <sys/ioctl.h>
#include <cstdio>
#include <unistd.h>
#include <locale.h>
#include <ncursesw/ncurses.h>
#include <fstream>

#include "gamePlay.h"
#include <cstdlib>
#include <sstream>
#include <ctime>
namespace spades {
vector <spades::player> players(4);
vector <spades::card> deck(52);
display monitor;
card center[4];

vector <spades::card> gamePlay::getDeck(){return deck;}
vector <spades::player> gamePlay::getplayers(){return players;}

//sorts the cards in the players hand into diamonds, clubs, hearts, spades
void gamePlay::handSort(){
    int spades[13];
    int hearts[13];
    int clubs[13];
    int diamonds[13];
    int index;
    int i;
    for(i=0; i<13; i++){ //determines the card number and places them into corresponding indexes
        index = (players.at(0).hand.at(i).getCardNum()+11)%13; //cause the cards to be placed based on their number with 2 being index 0 and 1(ace) being index 12
        switch(players.at(0).hand.at(i).getSuit())
        {
        case 1: spades[index] = 1;
        break;
        case 2: hearts[index] = 1;
        break;
        case 3: clubs[index] = 1;
        break;
        case 4: diamonds[index] = 1;
        break;
        default: mvprintw(3,2,"!!!!!!!we have a problem!!!!!!!!!!");
        break;
        }
    }
    i = 0;
    while(i<13){ //being placing the ordered cards back into the players hand
        int j = 0;
        while(j < 13){
            if(diamonds[j] == 1){ //if a card has been placed in this index for the diamonds only array
                if(j+2 == 14) //if the card is an ace
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2); //add 2 to each index to get the card number
                players.at(0).hand.at(i).setSuit(4);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(clubs[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(3);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(hearts[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(2);
                i++;
            }
            j++;
        }
        j = 0;
        while(j < 13){
            if(spades[j] == 1){
                if(j+2 == 14)
                    players.at(0).hand.at(i).setCardNum(1);
                else
                    players.at(0).hand.at(i).setCardNum(j+2);
                players.at(0).hand.at(i).setSuit(1);
                i++;
            }
            j++;
        }
    }
}

//compares the center pile of 4 played cards to determine who wins the trick
int gamePlay::compareCenter(int leadplayer){
    int highest = center[leadplayer].getCardNum();
    if(center[leadplayer].getCardNum() == 1)
        highest = 14;
    int suit = center[leadplayer].getSuit();
    int player = leadplayer;

    for(int i = leadplayer+1; i < leadplayer+4; i++)
    {
        if(center[i%4].getSuit() == 1)
            setSpadesBroken(true);
        if((suit != 1) && (center[i%4].getSuit() == 1))
        {
            player = i%4;
            suit = 1;
            highest = center[i%4].getCardNum();
        }
        if(suit == center[i%4].getSuit()){
            if(center[i%4].getCardNum() == 1){
                player = i % 4;
                highest = 14;
            }
            if(highest < center[i%4].getCardNum())
            {
                player = i%4;
                highest = center[i%4].getCardNum();
            }
        }
    }
    players.at(player).setTricksTaken(players.at(player).getTricksTaken()+1); //increments the trick count of the winning player
    return player; //return the player who won to determine who goes first next turn
}

//Create the deck of 52 cards by setting the suit and number of each card to a nonzero integer
void gamePlay::createDeck() {
    for(int j = 0; j < 52; j++)
    {
        deck.at(j).setCardNum((j%13)+1);
        deck.at(j).setSuit((j/13)+1);
    }
    random_shuffle(deck.begin(), deck.end());
}

//deal out 13 cards to each player by setting the
void gamePlay::deal(vector <spades::card> &newdeck, vector <spades::player> &newplayers){
    for(int i = 0; i<52; i++){
        newplayers.at(i/13).addCard(newdeck.at(i));
        newdeck.at(i).setSuit(0);
        newdeck.at(i).setCardNum(0);
    }
}

//determines if the player still has a card of the same suit in their hand as the leading card played
bool gamePlay::containSuit(spades::card lead, spades::player players){
    bool suit = false;
    for(int i = 0; i < players.getHand().size(); i++){
        if(lead.getSuit() == players.getHand().at(i).get 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:09:05.573

您必须像这样编写默认构造函数和析构函数：

```
struct display
{
    display()  { }
    ~display() { }
    //        ^^^^
}; 
```

而不是这样：

```
struct display
{
    display();
    ~display();
}; 
```

但是，如果您的标题中确实有后一种形式并希望保持这种形式，则需要将定义添加到源文件中：

```
display::display() { }
display::~display() { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:47:39.943

链接器抱怨它找不到 object`spades::monitor`和 function `spades::display::drawBox(int, int, int, int)`。这些是在任何地方定义的吗？请注意，在 .cpp 文件（或其类定义之外的任何位置）中定义成员变量/成员函数时，您必须使用类名对其进行限定。例子：

**在.h**

```
namespace spades {

class display {

  static display monitor;

  void drawBox(int, int, int, int);
};

} 
```

**在.cpp**

```
namespace spades {

display display::monitor;

void display::drawBox(int, int, int, int) {
  //...
}

} 
```

如果没有看到完整的代码（至少是链接器抱怨的事情的定义），很难说更多。

# debugging - malloc中的电子围栏段错误

> ID：13615213
> 
> 赞同：2
> 
> 时间：2012-11-28T22:04:12.613
> 
> 标签：debugging, gdb, segmentation-fault, electric-fence

我有一个相当复杂的程序，它进行了大量的内存分配，今天令人惊讶的是，它以一种 gdb 无法精确定位的奇怪方式开始出现段错误。怀疑某处内存损坏，我将它与 Electric Fence 联系起来，但我对它告诉我的内容感到困惑：

```
ElectricFence Exiting: mprotect() failed:                                   
Program received signal SIGSEGV, Segmentation fault.                        
__strlen_sse2 () at ../sysdeps/i386/i686/multiarch/strlen.S:99              
99      ../sysdeps/i386/i686/multiarch/strlen.S: No such file or directory. 
        in ../sysdeps/i386/i686/multiarch/strlen.S                          

#0  __strlen_sse2 () at ../sysdeps/i386/i686/multiarch/strlen.S:99  
#1  0xb7fd6f2d in ?? () from /usr/lib/libefence.so.0                
#2  0xb7fd6fc2 in EF_Exit () from /usr/lib/libefence.so.0           
#3  0xb7fd6b48 in ?? () from /usr/lib/libefence.so.0                
#4  0xb7fd66c9 in memalign () from /usr/lib/libefence.so.0          
#5  0xb7fd68ed in malloc () from /usr/lib/libefence.so.0            
#6  <and above are frames in my program> 
```

我正在调用值为 36 的 malloc，所以我很确定这应该不是问题。

我不明白的是，我什至有可能在 malloc 中破坏堆。在阅读手册页多一点时，似乎我正在写入一个空闲页面，或者我正在承保一个缓冲区。所以，我尝试了以下环境变量，一起和自己：

```
EF_PROTECT_FREE=1
EF_PROTECT_BELOW=1
EF_ALIGNMENT=64
EF_ALIGNMENT=4096 
```

最后两个完全没有效果。

第一个更改了我的程序中的堆栈帧部分（当 malloc 被致命调用时，我的程序正在执行该部分），但是一旦输入 malloc，就会具有相同的帧。

第二个变化更大；除了在我的程序的不同位置发生崩溃之外，它还发生在对 realloc 而不是 malloc 的调用中，尽管 realloc 是直接调用 malloc ，否则回溯与上面相同。

除了栅栏，我没有明确链接到任何其他库。

更新：我发现几个地方提示消息：“mprotect() failed: Cannot allocate memory”意味着机器上没有足够的内存。但我没有看到“无法分配内存”部分，ps 说我只使用了 15% 的内存。如此小的分配（4k + 32）真的会是问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-31T12:22:13.313

我只是在同一个问题上浪费了几个小时。原来是和/proc/sys/vm/max_map_count中的设置有关

来自内核文档：“此文件包含进程可能拥有的最大内存映射区域数。内存映射区域用作调用 malloc 的副作用，直接由 mmap 和 mprotect 调用，也用于加载共享库时。

虽然大多数应用程序需要少于一千个映射，但某些程序，尤其是 malloc 调试器，可能会消耗大量映射，例如，每个分配最多一到两个映射。”

所以你可以'cat'该文件以查看它的设置，然后你可以'echo'一个更大的数字。像这样： echo 165535 > /proc/sys/vm/max_map_count

对我来说，这让电栅栏超越了原来的位置，开始发现真正的虫子。

# javascript - javascript 基于具有相同对象和值的另一个数组从数组中删除

> ID：13615214
> 
> 赞同：0
> 
> 时间：2012-11-28T22:04:20.500
> 
> 标签：javascript, arrays

我有一个对象数组（所有相同的对象类型）。我有另一个相同对象类型的数组，我想用它来告诉我要从第一个数组中删除哪些对象。除了遍历所有属性并比较它们以找到第一个数组中与第二个数组中的元素 100% 匹配的元素然后从第一个数组中删除之外，是否还有一种简单的方法可以做到这一点？

我基本上是在一个对象数组上执行 jQuery.grep() 以及从这个 grep 生成的数组，我想从传递给它的数组中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:11:57.980

不要使用 jQuery.grep() 来获取一个新数组，而是用[jQuery.map()](http://api.jquery.com/jQuery.map/)替换它，如果必须保留它，则返回相同的对象，如果要删除它，则返回 null。

例如，如果您的代码是

```
var toBeDeleted = $.grep(array, function(val) {
  return condition(val);
}); 
```

将其更改为

```
array = $.map( array, function(val) {
  if(condition(val))
    return null;
  return val;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:28:27.217

如果它只是一个需要从另一个数组中删除的值数组，那么遍历数组真的很容易。

```
function deleteMatchingValues( target, toBeDeleted, oneMatch ) {
    var i = target.length, j = toBeDeleted.length;

    while( i-- ) {
        while( j--) {
            if( target[i] === toBeDeleted[j] ) {
                target.splice(i,1);
                if( oneMatch ) { break; }
            }
        }
        j = toBeDeleted.length;
    }
} 
```

上面的函数包含一个参数，当您知道数组中只有单个值实例时。

# xcode - 使用 Xcode 和 iOS SDK 围绕任意点旋转图像

> ID：13615215
> 
> 赞同：2
> 
> 时间：2012-11-28T22:04:29.817
> 
> 标签：xcode, ios

我正在为 iOS 开发一个应用程序，其中有一个显示度数（从 0 到 180）的图像和表示红色箭头的第二个图像。

我希望箭头根据用户在 0 到 180 的数字字段中输入的输入简单地旋转。

目前箭头围绕其中心旋转（对应于箭头图像的中心），但是我希望箭头从底部旋转。简而言之，我的问题是：如何使用 Xcode 和 iOS SDK 围绕任意点旋转图像？

这是我准备以直观方式显示我遇到的问题的图像： ![在此处输入图像描述](../Images/4d8f6b1c1746ec37d02cb88fa9cbdfac.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:20:05.463

我建议查看`UIView`的[`transform`文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)和`anchorPoint`属性：

> 变换的原点是 center 属性的值，或者是图层的 anchorPoint 属性（如果已更改）。（使用 layer 属性获取底层 Core Animation 图层对象。）默认值为 CGAffineTransformIdentity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:26:26.967

这不如 konrads 好，但如果时间是问题，另一种处理方法是让针图像更大，并让 1/2 图像透明，然后自动锚点将在中心的图像。

现在：

> ```
>  ______
> |  ^  |
> |  |  |
> ------- 
> ```

做了

> ```
>  ______
> |  ^  |
> |  |  |
> |     |
> |     |
> ------- 
> ```

# shell - 实现一个数据结构来比较 NTLM 哈希文件

> ID：13615217
> 
> 赞同：0
> 
> 时间：2012-11-28T22:04:48.777
> 
> 标签：shell, hash, password-recovery

目前，我正在简化在安全审计中提取 Windows 密码哈希的过程。就我个人而言，我希望在进行审计时更轻松地生成已恢复用户及其密码的列表。我认为它对于尝试比较和生成大量数据的其他人也很有用。

所以这里是要点：

当我从 Windows 系统文件中提取所有数据时，我将它们简化为格式 user:hash，其中哈希是 NTLM 哈希，例如“a87f3a357d73085c45f9416be5787e86”。

然后我将使用 oclHashcat 并尝试破解哈希，无论是字典还是暴力破解，都没有关系。我生成所有恢复的哈希的输出，但是 Hashcat 以 hash:password 格式生成它们。

现在这是我的问题以及我想要输入的内容 - 我想在给定两个输入文件的情况下将输出生成为 user:password。考虑到我可以有数百个散列但只有几个恢复的密码，尝试对列表进行排序是没有用的。

我不确定哪种数据结构对我最有利。数组对于大表来说效率太低了。我研究了序列化，并且一直在探索哈希映射和哈希表的使用。鉴于散列的大小，我没有任何运气实现这些方法，或者我这样做不正确。

目前我正在像这样运行程序：

```
program [user:hash file] [hash:password file] -o [user:password output] 
```

我正在有效地尝试像这样（简要地）运行程序：

```
Load Files

// user:hash file
For each line, split by ':' delimiter
 before delimiter = table1.user
 after delimiter = table1.hash

// hash:password file
For each line, split by ':' delimiter
 before delimiter = table2.hash
 after delimiter = table2.password

// generate user:password file
Check each entry of table1 vs table2
 if table1.hash = table2.hash
  table1.user =  output.user
  table2.password = output.password
  print to output "output.user:output.password" 
```

我只是想找出一种有效的方法来跟踪每一行并将必要的数据提取到我可以轻松跟踪的数据结构中。

如果我需要澄清任何事情，请告诉我。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:56:43.670

我会为我的数据结构做这个

```
std::map<std::string,std::string> hash_user_map; 
```

不遍历表 1 中的所有用户和哈希

```
For each user in table1
hash_user_map[table1.hash] = table1.user; 
```

没有使用 table2 中的哈希查看所有破解密码

```
std::string user = hash_user_map[table2.hash];
std::cout << user << ":" << table2.password << "\n; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:44:52.313

我决定使用 shell 脚本，并使用关联的数组来匹配所需的数据。

注意：这个程序的大部分处理我的哈希文件的格式。查看脚本中的注释。

```
#!/bin/bash
# Signus
# User-Password Hash Comparison Tool v1.0
# Simple utility that allows for the comparison between a file with a 'user:hash' format to a separate file with a 'hash:password' format. The comparison matches the hashes and returns an output file in the format 'user:password'

# Example of 'user:hash' -> george:c21cfaebe1d69ac9e2e4e1e2dc383bac
# Example of 'hash:password' -> c21cfaebe1d69ac9e2e4e1e2dc383bac:password
# 'user:hash' obtained from creddump suite: http://code.google.com/p/creddump/
# Note: Used custom 'dshashes.py' file: http://ptscripts.googlecode.com/svn/trunk/dshashes.py
# 'hash:password' obtained from ocl-Hashcat output

usage="Usage: $0 [-i user:hash input] [-t hash:password input] [-o output]"

declare -a a1
declare -a a2
declare -A o

index1=0
index2=0
countA1=0
countA2=0
matchCount=0

if [ -z "$*" ]; then
  echo $usage
    exit 1
fi

if [ $# -ne 6 ]; then
    echo "Error: Invalid number of arguments."
    echo $usage
    exit 1
fi

echo -e
echo "---Checking Files---"
while getopts ":i:t:o:" option; do
    case $option in
        i) inputFile1="$OPTARG"
        if [ ! -f $inputFile1 ]; then
            echo "Unable to find or open file: $inputFile1"
            exit 1
        fi
        echo "Reading...$inputFile1"
        ;;
        t) inputFile2="$OPTARG"
        if [ ! -f $inputFile2 ]; then
            echo "Unable to find or open file: $inputFile2"
            exit 1
        fi
        echo "Reading...$inputFile2"
        ;;
        o) outputFile="$OPTARG"
        echo "Writing...$outputFile"
        ;;
        [?]) echo $usage >&2
            exit 1
        ;;
    esac
done
shift $(($OPTIND-1))

#First read the files and cut each line into an array
echo -e
echo "---Reading Files---"
while read LINE
do
    a1[$index1]="$LINE"
    index1=$(($index1+1))
    countA1=$(($countA1+1))
done < $inputFile1
echo "Read $countA1 lines in $inputFile1"

while read LINE
do
    a2[$index2]="$LINE"
    index2=$(($index2+1))
    countA2=$(($countA2+1))
done < $inputFile2
echo "Read $countA2 lines in $inputFile2"

#Then cut each item out of the array and store it into separate variables
echo -e
echo "Searching for Matches..."
for (( j=0; j<${#a2[@]}; j++ ))
do
    hash2=$(echo ${a2[$j]} | cut -d: -f1)
    pword=$(echo ${a2[$j]} | cut -d: -f2)

    for (( i=0; i<${#a1[@]}; i++ ))
    do
        us=$(echo ${a1[$i]} | cut -d: -f1)
        hash1=$(echo ${a1[$i]} | cut -d: -f2)

        if [ "$hash2" = "$hash1" ]; then
            matchCount=$(($matchCount+1))
            o["$us"]=$pword
            echo -e "Match Found[$matchCount]: \t Username:$us  \t  Password:$pword" 
            break
        fi

    done
done

echo -e "Matches Found: $matchCount\n" >> $outputFile
for k in ${!o[@]}
do
    echo -e "Username: $k  \t  Password: ${o[$k]}" >> $outputFile
done
echo -e "\nWrote $matchCount lines to $outputFile"

unset o 
```

# php - php formmail doesn't work after domain changed

> ID：13615219
> 
> 赞同：0
> 
> 时间：2012-11-28T22:04:56.233
> 
> 标签：php, post, get, formmail

I was working on a school project and the formmail.php given from the instructor is easy and works really good. The school ended so I signed up my own domain to save all the school works also to get more knowledge of how domain things work.

But the thing is, the formmail worked perfectly with the instructor's domain/server after I transfered everything back to the server I signed up the formmail gives me two different errors randomly when submitting the formmail.

I know and remember I had to change this in the php file in order to work.

$referers = array('et4891.com','hotmail.com'); I need to put in the domain in which I did but I still get the errors though. I have totally 0 knowledge about php so I searched up a bit on the net and lots were talking about changing the domain which of course I did but I still get the errors. Anyone able to give me a hand?

[http://et4891.com/fpj/contact.html](http://et4891.com/fpj/contact.html) The above is my own site with all the transfered files and so this contact page uses the formmail.php after filling the info and upon submitting I get either one of the errors below

[http://et4891.com/fpj/formmail_error1.jpg](http://et4891.com/fpj/formmail_error1.jpg)

[http://et4891.com/fpj/formmail_error2.jpg](http://et4891.com/fpj/formmail_error2.jpg)

Anyone able to give me a hand here with simple english instead I have no knowledge of php or programmings?

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:10:53.537

您的第一个错误意味着您的脚本使用了过时的代码。eregi() 是一个不能与高于 5.2 的 PHP 一起使用的函数，您的新主机可能有（5.3 或 5.4 现在最常见）。由于您不是程序员，因此最简单的解决方案是找到您的 formmail 脚本的更新版本。

您可以随时搜索替代解决方案，如果您仍想尝试自己调试代码，请参阅[PHP 中 eregi() 的好替代方案](https://stackoverflow.com/questions/737198/good-alternative-to-eregi-in-php)

# c# - C# Case statement or if statement depending on the filename a list is populated

> ID：13615220
> 
> 赞同：-2
> 
> 时间：2012-11-28T22:05:00.367
> 
> 标签：c#, list, filenames

I am facing a problem and i really cant get out of it, i tried to search for some solutions but ran out of all ideas.. So i am selecting a number of files all names are numbers example 1.png , 2.png 3.png etc etc What i want is that when loading 2.png i get the filename for example 2 ( excluding the extension) check for a condition for example and if else condition and store the output in another list. Is it possible ? The code below shows how im loading a file and another thing which i am doing ( basically getting the image and passign the image to another method.

```
OpenFileDialog x = new OpenFileDialog();
        x.FileName = "";
        x.Multiselect = true;
        x.ShowDialog();
        x.Title = "Images";
        x.Filter = "Files|*.png";

        string[] result = x.FileNames;

        if (openFileDialog1.FileNames.ToString() != "")
        {
            foreach (string y in result)
            {

                img = new Bitmap(y);
                ContoBin(img);     
            }                

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:09:04.827

您是否要在没有扩展名的情况下获取文件名？

```
foreach (string y in result)
{
    if((Path.GetFileNameWithoutExtension(y) == "2")
    {
         // do stuff with 2.png
    }  

    ... 
```

确保你有

```
using System.IO; 
```

在代码文件的顶部

# meteor - meteor.js access oAuth token from accounts-twitter in server-side code

> ID：13615221
> 
> 赞同：1
> 
> 时间：2012-11-28T22:05:08.697
> 
> 标签：meteor

I wanted to write a meteor app, that can post a tweet. Since accounts-twitter goes through all the oAuth process and has all the data needed to make an authorized call to the Twitter API, I thought that's gonna be no problem.

As it turns out, it's a little trickier than that. By default, accounts-twitter only exports the profile with the name of the logged in user. I augmented that to include the oAuth information - but in a stupid way: [https://github.com/AVGP/meteor/commit/da29e812437c5e7b929599d8e2f4ff79279bfeb7](https://github.com/AVGP/meteor/commit/da29e812437c5e7b929599d8e2f4ff79279bfeb7)

I am unhappy with this, because: 1.) It should not be in the "profile", but on the top-level (for which I need to touch the accounts-base/accounts-server.js, I guess. 2.) It should not be accessible on the client side (I guess), because that would allow stealing this info via XSS etc.

Can anybody give me some hint on how to implement that "properly"?

Thanks a lot!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:17:33.467

没关系 - 我找到了。

实际上，诀窍不是在服务器端调用 Meteor.user() ，而是这样做：

```
Meteor.users.findOne(...).services.twitter 
```

这为您提供了所有信息，并且这些信息隐藏在 Meteor.user() 中。

# android - Application data backup/restore

> ID：13615223
> 
> 赞同：1
> 
> 时间：2012-11-28T22:05:20.740
> 
> 标签：android

So I have an application that logs medical data entered by user. I need to add functionality for backing up and restoring that data in case user changes their Android phone OR switches to and iPhone (there is an iPhone version of this app, which I have limited visibility into). The data is currently stored inside a SQLite DB on the device.

I need help figuring out cleanest/easiest way to do this. So far I am thinking about these options:

1.  add UI to email DB file to + UI to accept a DB file and copy it over current DB. Seems hacky.
2.  create a web service which will store user data and sync on the background. I would need to build sync process and introduce some kind of account system. This seems like quite a bit of work, though likely the most flexible solution in the long run.
3.  switch to Google Calendar as my data storage (data is essentially a set of event entries anyway). This would probably be most seamless, but iPhone option is out of the window.

Are there other pros/cons to these options that I am missing? Or perhaps there are some standard solutions to this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:14:39.410

选项#1 充满了很多问题。从来自外部源的文件旁加载数据库并非易事。我不会推荐它。

选项#3 应该是可能的——但它要求用户设置一个谷歌帐户，这不应该是必需的（恕我直言）。此外，添加新日历和/或大量事件不会是许多用户最喜欢的功能。我个人会讨厌它。

第二种选择似乎最有希望。您可以随意构建它。你甚至可以让它只需要一个简单的识别码来备份——或者只提供“实时”同步。确实，您需要某种服务器和会计系统——但这些东西都是标准的，而且服务器很便宜。这个选项将是我的选择之一。

# c# - Changing the database location drops owner schema

> ID：13615226
> 
> 赞同：5
> 
> 时间：2012-11-28T22:05:42.413
> 
> 标签：c#, .net, visual-studio-2010, crystal-reports

We have hundreds of Reports created in 8.0.1.0 (I know they are old).

We created a Visual Studio 2010 C# application to run these reports. It's a Windows App. Had some trouble with the Web App.

The reports are all saved under the PROD environment.

We are working in a TEST environment.

We are using an Oracle environment and all the reports use the Oracle Server connection.

When we run the reports through C# we go ahead and change all the database locations to our TEST environment. When this happens the "Owner" (schema) information is dropped. The report fails with a 942 error.

Now if we don't change the database, keep it as PROD, everything works perfectly. It seems that by changing the database the schema information is dropped.

Any ideas. I've been searching around and can't find a solution.

Snippet of code:

```
connectionInfo.DatabaseName = "";
connectionInfo.ServerName = <SERVER>;
connectionInfo.UserID = <USER>;
connectionInfo.Password =  <PWORD>;

foreach (Table crTable in crTables)
        {
            crTableLogOnInfo = crTable.LogOnInfo;
            crTableLogOnInfo.ConnectionInfo = connectionInfo;
            crTable.ApplyLogOnInfo(crTableLogOnInfo);

            // if you wish to change the schema name as well, you will need to set Location property as follows:
             //crTable.Location = "<SCHEMA>." + crTable.Name;

        } 
```

I've tried to set the crTable.Location but the program locks up. So not sure what to do.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:20:16.483

过去我们通过这样做成功地更改了连接参数：

```
CrystalDecisions.Shared.TableLogOnInfo info = document.Database.Tables[iTable].LogOnInfo.Clone() as CrystalDecisions.Shared.TableLogOnInfo;

info.ConnectionInfo.ServerName = <SERVER>;
info.ConnectionInfo.DatabaseName = "";
info.ConnectionInfo.UserID = <USER>;
info.ConnectionInfo.Password = <PASSWORD>;

document.Database.Tables[iTable].ApplyLogOnInfo(info); 
```

`document`在哪里`CrystalDecisions.CrystalReports.Engine.ReportDocument`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:54:10.790

通过这样做修复它：

```
connectionInfo.DatabaseName = "";
connectionInfo.ServerName = <SERVER>;
connectionInfo.UserID = <USER>;
connectionInfo.Password =  <PWORD>;

foreach (Table crTable in crTables)
    {
        crTableLogOnInfo = crTable.LogOnInfo;
        crTableLogOnInfo.ConnectionInfo = connectionInfo;
        crTable.ApplyLogOnInfo(crTableLogOnInfo);

        // if you wish to change the schema name as well, you will need to set   Location property as follows:
         //crTable.Location = "<SCHEMA>." + crTable.Name;
         crTable.Location = "<SCHEMA>." + crTable.LogOnInfo.TableName;

    } 
```

我错误地设置了位置。谢谢你的帮助！

# asp.net - 如何使我的编辑视图中的 DropDownList 显示已存储的数据库值？

> ID：13615228
> 
> 赞同：0
> 
> 时间：2012-11-28T22:05:50.197
> 
> 标签：asp.net, razor, asp.net-mvc-4

我有一个有效的 MVC 4 编辑视图，可以编辑存储的数据库记录。这是控制器的相关部分：

```
 //
    // GET: /Occurrence/Edit/5

public ActionResult Edit(int id = 0)
    {
        Occurrence occurrence = db.Occurrences.Find(id);
        if (occurrence == null)
        {
            return HttpNotFound();
        }

        List<SelectListItem> points = new List<SelectListItem>()
        { 
            new SelectListItem() { Text = "0 - (No Points)", Value = "0"},
            new SelectListItem() { Text = "1 - (5 to 14 minutes)", Value = "1"},
            new SelectListItem() { Text = "2 - (15 minutes to 1 hour)", Value = "2"},
            new SelectListItem() { Text = "3 - (1 to 3 hours)", Value = "3"},
            new SelectListItem() { Text = "5 - (Over 3 hours)", Value = "5"},
        };

        ViewBag.Points = points;

        ViewBag.EmployeeID = new SelectList(db.Employees, "EmployeeID", "EmployeeName", occurrence.EmployeeID);
        return View(occurrence);
} 
```

这是模型的点部分：

```
[Required(ErrorMessage = "The Points field is required.")]
public int Points { get; set; } 
```

这是编辑视图的相关部分：

```
 <div class="editor-field">
        @Html.DropDownList("Points")
        @Html.ValidationMessageFor(model => model.Points)
    </div> 
```

当我尝试编辑记录时，无论数据库中存储什么值，点下拉列表始终填充“0 -（无点）”。有没有办法绑定这个下拉列表，以便在编辑视图中显示存储的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:12:13.147

您需要使用 DropDownListFor 将该字段连接到您的属性。您应该将模型上的选项传递给视图。您需要编写一个视图模型并同时传递事件和选项。然后使用 DropDownListFor

```
public class ViewModel {

    public List<SelectListItem> PointOptions { get; set; }

    [Required(ErrorMessage = "The Points field is required.")]
    public int Points { get; set; }
} 
```

在您的控制器中填充这些并将其传递下来，而不是使用 ViewBag，然后使用 DropDownListFor：

```
@Html.DropDownListFor(m => m.Points, Model.PointOptions) 
```

*For 方法会将所有相关的“goo”连接到您的 html 中。它确保了自动填充的值以及下一篇文章的正确绑定。

祝你好运。

# android - Android - Programmatically select menu option

> ID：13615229
> 
> 赞同：9
> 
> 时间：2012-11-28T22:05:57.067
> 
> 标签：android

Is there a way to programmatically select a menu option? Basically, I want a button in a view to perform the same action as pressing a specific menu option. I was thinking of trying to call onOptionsItemSelected(MenuItem item) but I don't know what to put for the menu item.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-17T14:21:07.477

是的，有一种方法可以选择菜单选项！你是正确的关于调用 onOptionsItemSelected(MenuItem item) 这是获取 MenuItem 的方法：

1）您需要做的第一件事是在此处获取 Activity 中 Menu 类的引用：

```
private Menu menu;

@Override
public boolean onCreateOptionsMenu(final Menu menu) {
   this.menu = menu;
   return super.onCreateOptionMenu(menu);
} 
```

2) 所以基本上，Menu 类包含所有的菜单项。所以一旦你有了这个参考，你就可以像这样模拟菜单点击：

```
onOptionsItemSelected(menu.findItem(R.id.action_id)); 
```

...其中 action_id 是您要选择的菜单项的 ID。您可以在菜单 xml 中找到此 ID。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-28T22:06:29.217

为什么不让两个 UI 事件调用一个通用方法？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-29T19:51:50.693

我也在找这个。虽然在检查项目时调用使用的方法是有意义的，但这不会将菜单项设置为在 UI 中检查。

所以我最终做的是：

```
NavigationView navigationView = (NavigationView) findViewById(R.id.nav_view);
        navigationView.setNavigationItemSelectedListener(this);

MenuItem menuItem = (MenuItem)navigationView.getMenu().findItem(R.id.nav_menu_item_1);
        menuItem.setChecked(true);
        onNavigationItemSelected(menuItem); 
```

以下对我来说没有按预期工作：

> onOptionsItemSelected(menu.findItem(R.id.action_id));

# android - /bin/sh: scripts/basic/fixdep: cannot execute binary file

> ID：13615230
> 
> 赞同：0
> 
> 时间：2012-11-28T22:06:03.057
> 
> 标签：android, cross-compiling

I try to build the rt73.ko linux driver for android using cross complile. I have download the android NDK and the Kernel sources of the the target system (Rockchip RK3066) and when I build the driver I am getting the following error:

> root@slax:~/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module# make CROSS_COMPILE=arm-linux-androideabi- make -C /root/kernel SUBDIRS=/root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module mod-ules make[1]: Entering directory `/root/kernel' CC [M] /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.o /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c: In function 'usb_rtusb_probe': /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c:1152:3: warning: return makes integer from pointer without a cast [enabled by default] /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c: In function 'usb_rtusb_disconnect': /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c:1315:2: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement] /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c: In function 'usb_rtusb_close': /root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.c:655:1: warning: the frame size of 2128 bytes is larger than 1024 bytes [-Wframe-larger-than=] /root/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/as: /usr/lib/libz.so.1: no version information available (required by /root/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/as) /bin/sh: scripts/basic/fixdep: cannot execute binary file make[2]: *** [/root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module/rtmp_main.o] Error 126 make[1]: *** [_module_/root/2011_0210_RT73_Linux_STA_Drv1.1.0.5/Module] Error 2 make[1]: Leaving directory`/root/kernel' make: *** [all] Error 2

Could you please help me to overcome the above error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T15:44:46.430

虽然你交叉编译，但只能编译内核。scripts/basic/fixdep 是用户态程序。

为了克服这个问题，您需要使用[http://crosstool-ng.org/](http://crosstool-ng.org/)例如。

# c - C：epoll端口转发代理不转发所有数据

> ID：13615233
> 
> 赞同：1
> 
> 时间：2012-11-28T22:06:13.787
> 
> 标签：c, sockets, networking, epoll, portforwarding

我有这个代码，我正在尝试将它用作我项目的一部分。项目的细节暂时不重要，但我想做的是使用这个端口转发代理作为浏览器和本地 http 服务器之间的代理。

因此，如果我在浏览器中键入 http://127.0.0.1:8999/ 我想从 127.0.0.1:8888 获取网页。这仅适用于小型网页（无图像、小型 html 文件……）。当我尝试在带有一些图像的网页上执行此操作时，它们不会被传输或仅被部分传输。

我还用 telnet 和一个带有大 html 文件的网站进行了测试。我已连接到代理并发送 HEAD 方法请求。正如预期的那样，我得到了所有的元数据。当我尝试 GET 方法时，我只得到了网页的 html 文件的一部分。

谁能指出我正确的方向？我真的不确定我做错了什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/epoll.h>
#include <errno.h>
#include <signal.h>
#include <assert.h>

#define FALSE       0
#define TRUE        1
#define EPOLL_QUEUE_LEN 256
#define SERVER_PORT 7000
#define LISTEN_PORT  8667       // Proxy Server Listens for this port
#define FORWARD_PORT 8888       // Proxy Server forwards all port LISTEN_PORT data to this port
#define BUFLEN 1024
//Globals
int fd_server;
int sent = 0; // for how many requests were processed to client
int forwardSockets[EPOLL_QUEUE_LEN];
int internalSockets[EPOLL_QUEUE_LEN];
// Function prototypes
static void SystemFatal (const char* message);
static int forwardData (int fd);
void close_fd (int);

// This is the main function which handles the epoll loop and 
// accepts connections
// Also handles the data processing back to the client.
int main (int argc, char* argv[]) 
{
    int i, arg, src_port, forwardSD, dest_port;
    int num_fds, fd_new, epoll_fd;
    int linenum=0;
    static struct epoll_event events[EPOLL_QUEUE_LEN], event;
    struct sockaddr_in addr, remote_addr;
    socklen_t addr_size = sizeof(struct sockaddr_in);
    struct sigaction act;
    struct  hostent *hp;
    struct  sockaddr_in server_fwd;
    char *host;
        char line[256], ip[256];
    FILE *fp;

    fp=fopen("port_forward_config", "r");
    //src_port = LISTEN_PORT;           // Use the default listen port

        while(fgets(line, 256, fp) != NULL)
        {
                linenum++;
                if(line[0] == '#') continue;

                sscanf(line, "%s %d %d", &ip, &src_port, &dest_port);
        {
                    fprintf(stderr, "Syntax error, line %d\n", linenum);
                continue;
        }
    }
    printf("Reading Config File...\n");
    printf("IP %s LPORT %d DPORT %d\n", ip, src_port, dest_port);
    host = ip;

    // set up the signal handler to close the server socket when CTRL-c is received
    act.sa_handler = close_fd;
    act.sa_flags = 0;
    if ((sigemptyset (&act.sa_mask) == -1 || sigaction (SIGINT, &act, NULL) == -1))
    {
            perror ("Failed to set SIGINT handler");
            exit (EXIT_FAILURE);
    }
//--------------------------------------------------------------------------------------------  
    // Create the listening socket
    fd_server = socket (AF_INET, SOCK_STREAM, 0);
    if (fd_server == -1) 
    {   
        SystemFatal("socket");
    }
    // set SO_REUSEADDR so port can be resused imemediately after exit, i.e., after CTRL-c
    arg = 1;
    if (setsockopt (fd_server, SOL_SOCKET, SO_REUSEADDR, &arg, sizeof(arg)) == -1) 
    {   
        SystemFatal("setsockopt");
    }
    // Make the server listening socket non-blocking
    if (fcntl (fd_server, F_SETFL, O_NONBLOCK | fcntl (fd_server, F_GETFL, 0)) == -1) 
    {   
        SystemFatal("fcntl");
    }
    // Bind to the specified listening port
    memset (&addr, 0, sizeof (struct sockaddr_in));
    addr.sin_family = AF_INET;
    addr.sin_addr.s_addr = htonl(INADDR_ANY);
    addr.sin_port = htons(src_port);
    if (bind (fd_server, (struct sockaddr*) &addr, sizeof(addr)) == -1) 
    {   
        SystemFatal("bind");
    }
    // Listen for fd_news; SOMAXCONN is 128 by default
    if (listen (fd_server, SOMAXCONN) == -1) 
    {   
        SystemFatal("listen");
    }
//--------------------------------------------------------------------------------------------- 
    // Create the epoll file descriptor
    epoll_fd = epoll_create(EPOLL_QUEUE_LEN);
    if (epoll_fd == -1) 
    {   
        SystemFatal("epoll_create");
    }
    // Add the server socket to the epoll event loop
    event.events = EPOLLIN | EPOLLERR | EPOLLHUP | EPOLLET;
    event.data.fd = fd_server;
    if (epoll_ctl (epoll_fd, EPOLL_CTL_ADD, fd_server, &event) == -1) 
    {
        SystemFatal("epoll_ctl");
    }   
    // Execute the epoll event loop
    while (TRUE) 
    {
        //struct epoll_event events[MAX_EVENTS];
        num_fds = epoll_wait (epoll_fd, events, EPOLL_QUEUE_LEN, -1);
        if (num_fds < 0) 
        {
            SystemFatal ("Error in epoll_wait!");
        }
        for (i = 0; i < num_fds; i++) 
        {
                // Case 1: Error condition
                if (events[i].events & (EPOLLHUP | EPOLLERR)) 
            {
                    fputs("epoll: EPOLLERR", stderr);
                    //close(events[i].data.fd);
                    continue;
                }
                assert (events[i].events & EPOLLIN);
//-----------------------------------------------------------------------------------------
                // Case 2: Server is receiving a connection request
                if (events[i].data.fd == fd_server) 
            {
                //socklen_t addr_size = sizeof(remote_addr);
                fd_new = accept (fd_server, (struct sockaddr*) &remote_addr, &addr_size);
                if (fd_new == -1) 
                {
                        if (errno != EAGAIN && errno != EWOULDBLOCK) 
                    {
                        perror("accept");
                        }
                        continue;
                }
//------------------------------------------------------------------------------------------------
                // Make the fd_new non-blocking
                if (fcntl (fd_new, F_SETFL, O_NONBLOCK | fcntl(fd_new, F_GETFL, 0)) == -1) 
                {
                    SystemFatal("fcntl");
                }

                // Add the new socket descriptor to the epoll loop
                event.data.fd = fd_new;
                if (epoll_ctl (epoll_fd, EPOLL_CTL_ADD, fd_new, &event) == -1) 
                {   
                    SystemFatal ("epoll_ctl");
                }
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
                printf(" Remote Address:  %s\n", inet_ntoa(remote_addr.sin_addr));
                //close(fd_new);
                dest_port = FORWARD_PORT;       // Used the default forward port
                // create internal connection
                printf("Trying to create forward socket\n");        
                if ((forwardSD = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
                    perror("Cannot create forward socket.");
                    exit(1);
                }

                printf("Binding...\n");
                bzero((char *)&server_fwd, sizeof(struct sockaddr_in));
                server_fwd.sin_family = AF_INET;
                server_fwd.sin_port = htons(dest_port);
                //host = "192.168.0.10";    
                if ((hp = gethostbyname(host)) == NULL) {
                    printf("Failed to get host name");
                }

                bcopy(hp->h_addr, (char *)&server_fwd.sin_addr, hp->h_length);

                printf("Connecting to interal machine.\n");
                printf("Server Forward Port: %d\n", ntohs(server_fwd.sin_port));
                printf("Server Forward IP: %s\n", inet_ntoa(server_fwd.sin_addr));

                // Connecting to interal machine
                if (connect (forwardSD, (struct sockaddr *)&server_fwd, sizeof(server_fwd)) == -1) {
                    perror("connect failed");
                    exit(1);
                }

                // Add the new socket descriptor to the epoll loop
                event.data.fd = forwardSD;
                if (epoll_ctl (epoll_fd, EPOLL_CTL_ADD, forwardSD, &event) == -1) 
                {   
                    SystemFatal ("epoll_ctl");
                }   
                printf ("Connected: Server: %s\n", hp->h_name);
                forwardSockets[fd_new] = forwardSD;
                internalSockets[forwardSD] = fd_new;
            // end internal connection
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
                continue;
                }
                // Case 3: One of the sockets has read data
                if (!forwardData(events[i].data.fd)) 
            {
                // epoll will remove the fd from its set
                // automatically when the fd is closed
                close (events[i].data.fd);      
            }
        }
    }
    close(fd_server);
    exit (EXIT_SUCCESS);
}

/*
    This function clears a socket if it has data waiting to be processed.
    It takes the string sent from the client and parses it. After it has 
    done that it will send back to the client the amount of data it requested
    for however many requests it defined as well.
*/
static int forwardData (int fd) 
{
    int n, bytes_to_read;
    char    *bp, buf[BUFLEN];
    int     forwardData;
    printf ("Forwarding :\n");

    //check if internal or external connection to send data back to.
    if(forwardSockets[fd] != 0){
        forwardData = forwardSockets[fd];
    }
    if(internalSockets[fd] != 0){
        forwardData = internalSockets[fd];
    }

    bp = buf;
        bytes_to_read = BUFLEN;
        while ((n = recv (fd, bp, bytes_to_read, 0)) > 0) {
                bp += n;
                bytes_to_read -= n;
        send (forwardData, buf, n, 0);
        return TRUE;
        }
    return TRUE;

}

// Prints the error stored in errno and aborts the program.
static void SystemFatal(const char* message) 
{
    perror (message);
    exit (EXIT_FAILURE);
}
// close fd
void close_fd (int signo)
{
        close(fd_server);
    exit (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:34:06.380

似乎您`EPOLLET`在所有 epoll 事件中都使用了（边缘触发）标志。此标志将导致 epoll 仅在文件描述符从不可用变为可用时返回事件。

此外，在您的`forwardData`函数中，您接收`BUFLEN`字节然后返回`TRUE`。如果有更多可用字节，您将永远不会转发它们，因为您的事件是边缘触发的并且不会被重新发送。

尝试修改`forwardData`（可能删除`return TRUE`循环中的），以便在返回之前转发所有可读数据。

# java - 什么是最好的布局管理器？

> ID：13615236
> 
> 赞同：9
> 
> 时间：2012-11-28T22:06:33.330
> 
> 标签：java, swing, layout-manager

![在此处输入图像描述](../Images/fe394780a2aa2af207386958286e3134.png)

我想做一个看起来像上面的gui。现在我有一个面板，它将包含名称标签、名称文本字段、出生日期标签和生日文本字段。我的问题是在面板上使用的最佳布局管理器是什么，以便“名称组件”行（标签 + 文本字段）和“出生日期组件”行（标签 + 文本字段）将垂直均匀分布在面板。

我考虑过使用流布局，但这会导致两行组件之间没有间隙。我想过使用网格布局，但我不知道两行组件之间的间隙大小。

一种更复杂的方法...我考虑将名称标签和文本字段放在一个面板中，将出生日期标签和文本字段放在另一个面板中，然后制作基本面板边框布局并将名称设置为北，将出生日期设置为南。 ..但是我仍然必须确保名称组件在名称面板中垂直居中，并且出生日期组件在出生日期面板中垂直居中。

任何帮助表示赞赏。目标是确保姓名组件行和出生日期组件行垂直展开，姓名组件在上半部分垂直居中，出生日期组件在下半部分垂直居中。如果有什么听起来令人困惑，请告诉我，我会尝试重新措辞以便更好地理解。

我在 Eclipse 中使用严格的 Java swing，没有 GUI 构建器或类似的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T23:31:38.003

我喜欢[MigLayout](http://www.migLayout.com)。在这种情况下，布局组件将非常容易，因为 MigLayout 具有类似表格的行为，并且组件将以这种方式排列。这在[QuickStartGuide](http://www.miglayout.com/QuickStart.pdf)中有描述。

编辑：

这是一个小例子：

![在此处输入图像描述](../Images/77d3e11e1d12a166652f32d88cd78845.png)

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import net.miginfocom.swing.MigLayout;

public class Test {

    private JFrame frame;
    private JTextField nameTextField, birthDateTextField;
    private JLabel nameLabel, birthDateLabel;

    public Test() {
        initComponents();
    }

    public static void main(String args[]) {
        new Test();
    }

    private void initComponents() {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new MigLayout());

        nameTextField = new JTextField(30);
        birthDateTextField = new JTextField(30);
        nameLabel = new JLabel("Name:");
        birthDateLabel = new JLabel("Birth Date:");

        frame.add(nameLabel);
        frame.add(nameTextField, "wrap");
        frame.add(birthDateLabel);
        frame.add(birthDateTextField);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T23:24:01.400

我强烈建议你远离设计为由布局管理器自动化的布局——它们可以很灵活，但它们往往被用作锤子，如果你想让组件在自然的方式。

学习使用布局管理器是一门艺术。您不会只选择一种并将其用于每个问题，而是采用几种不同的类型并将它们以看起来像您的数据的方式嵌套。

在您的情况下，我认为您可以很好地使用 3 个流布局，两个水平包含在一个垂直中，这种 GUI 正是 flowLayout 的用途，您不必添加任何参数。

顺便说一句，许多问题可以通过嵌套 Border 和 Flow 布局来解决——Border 非常有用，因为中间的方式尽可能多地占用空间，但给 4 个边留出尽可能多的空间—— - 事实上 BorderLayout 通常只有 2 或 3 个填充区域 - 但可能很容易嵌套其他 Border 或 flow 布局。这些导致 GUI 需要很少的放置细节，但仍然可以自然地调整大小。

编辑：这是嵌套在盒子布局中的两个流布局的一些工作代码。

它是 groovy（不是 java），但不同之处在于纯粹的语法——杂乱无章。

请注意要发明的简单性和缺乏数字——它的工作原理与您预期的非常相似。

```
导入 javax.swing.*
导入 java.awt.*

f=新的 JFrame()
f.setSize(300,200)
p=f.getContentPane()
p.setLayout(新 BoxLayout(p, BoxLayout.Y_AXIS))
p.add(panel("按钮 1"))
p.add(panel("按钮 2"))
f.show()

无效添加面板（名称）{
   def child=new JPanel()
   child.add（新的 JButton（名称））
   child.add(新的 JTextField(20))
   返回孩子
}

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T23:04:56.237

我个人喜欢[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。

这是一个示例来演示：

![在此处输入图像描述](../Images/beee0fc58fd0042d48096eeb01c9f29e.png)

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;

public class Test {

    private JFrame frame;
    private JTextField nameTextField, birthDateTextField;
    private JLabel nameLabel, birthDateLabel;

    public Test() {
        initComponents();
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                        if ("Nimbus".equals(info.getName())) {
                            UIManager.setLookAndFeel(info.getClassName());
                            break;
                        }
                    }
                } catch (Exception e) {
                    // If Nimbus is not available, you can set the GUI to another look and feel.
                }
                new Test();
            }
        });
    }

    private void initComponents() {
        frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new GridBagLayout());

        nameTextField = new JTextField(30);
        birthDateTextField = new JTextField(30);
        nameLabel = new JLabel("Name:");
        birthDateLabel = new JLabel("Birth Date:");

        GridBagConstraints gc = new GridBagConstraints();
        gc.fill = GridBagConstraints.HORIZONTAL;
        gc.insets = new Insets(10, 10, 10, 10);

        gc.gridx = 0;
        gc.gridy = 0;
        frame.add(nameLabel, gc);

        gc.gridx = 1;
        gc.gridy = 0;
        frame.add(nameTextField, gc);

        gc.gridx = 0;
        gc.gridy = 1;
        frame.add(birthDateLabel, gc);

        gc.gridx = 1;
        gc.gridy = 1;
        frame.add(birthDateTextField, gc);

        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T23:06:27.563

[GroupLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/GroupLayout.html)适合您的需求。看看它。它具有自动创建差距的能力（或者您可以管理自己的差距），并且非常适合创建表格。它可以水平或垂直工作。

# ruby-on-rails - HaverstHQ 选择的选择器缺少向下箭头

> ID：13615240
> 
> 赞同：2
> 
> 时间：2012-11-28T22:06:47.037
> 
> 标签：ruby-on-rails, jquery-chosen

我为我们的应用程序使用 HaverstHQ Chosen Picker，突然下拉框上的向下箭头消失了。看这张照片：[问题的图片](http://imgur.com/kZCj5)

任何帮助表示赞赏！

编辑：

所以该应用程序是一个 Rails 应用程序，托管在 heroku、postgres 后端和主干前端。我们正在使用 HarvestHQ "Chosen" 的插件，但下拉框右侧的倒箭头已消失。下拉框仍然有效。请参阅图片以获得最佳解释。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T21:46:45.927

我有一个类似的问题。我的问题是 selected-sprite.png 文件的位置。png 在 selected.css 文件中被引用，并且该引用相对于该文件的位置。我将文件移动到与 selected.css 相同的目录，并且图标重新出现。

# matlab - 裁剪矩阵

> ID：13615242
> 
> 赞同：0
> 
> 时间：2012-11-28T22:06:59.780
> 
> 标签：matlab, octave

例如，我有一个 6x6 矩阵，然后我想取出位于该矩阵中心的小矩阵，比如 2x2。有什么聪明的方法吗？或者我必须遍历旧矩阵，然后将值复制到新矩阵？
非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:08:48.773

当然可以。例如尝试

```
A = rand(6,6);  % // big matrix, an example
B = A(3:4,3:4); % // central sub matrix obtained using indices 
```

这（在这种情况下）也相当于

```
B = A([3 4],[3 4]); 
```

通常，您可以从选择您感兴趣的索引的向量中提取子向量。

# c - 在 C 语言中，以下哪些后自增运算符和前自增运算符的组合具有未定义的行为？

> ID：13615243
> 
> 赞同：5
> 
> 时间：2012-11-28T22:07:02.417
> 
> 标签：c, operators, expression, undefined-behavior

我读过，[谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)，并在浪费了 2 多个小时后*尝试理解* [“comp.lang.c FAQ”上的序列点](http://c-faq.com/expr/seqpoints.html)时间试图通过 gcc 编译器解释以下结果。

```
expression(i=1;j=2)     i       j       k
k = i++ + j++;          2       3       3
k = i++ + ++j;          2       3       4
k = ++i + j++;          2       3       4
k = ++i + ++j;          2       3       5

k = i++ + i++;          3               2
k = i++ + ++i;          3               4
k = ++i + i++;          3               4
k = ++i + ++i;          3               6

i = i++ + j++;          4       3
i = i++ + ++j;          5       3
i = ++i + j++;          4       3
i = ++i + ++j;          5       3

i = i++ + i++;          4
i = i++ + ++i;          5
i = ++i + i++;          5
i = ++i + ++i;          6 
```

**问题：**

1.  我想知道上图中显示的所有表达式（4组）是否有未定义的行为？如果只有其中一些具有未定义的行为，哪些有哪些没有？

2.  对于定义的行为表达式，您能否*展示（不解释）* 编译器如何评估它们。只是为了确保，如果我正确地得到了这个前置增量和后置增量。

**背景：**

今天，我参加了一次校园面试，在面试中我被要求解释`i++ + ++i`给定值`i`. 在 gcc 中编译该表达式后，我意识到我在采访中给出的答案是错误的。我决定以后不再犯这样的错误，因此，尝试编译*所有可能*的前置和后置增量运算符组合并在 gcc 中编译它们，然后尝试解释结果。我挣扎了2个多小时。我找不到对这些表达式求值的单一行为。所以，我放弃了，转向stackoverflow。经过一点点阅读档案，发现有一些类似`sequence point`和未定义的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T22:11:55.027

除第一组外，其他三组中的所有表达式都有未定义的行为。

**如何评估定义的行为（第 1 组）：**

```
i=1, j=2;

k=i++ + j++; // 1 + 2 = 3
k=i++ + ++j; // 1 + 3 = 4
k=++i + ++j; // 2 + 3 = 5
k=++i + j++; // 2 + 2 = 4 
```

这是相当直接的。后增量与前增量的事情。

在第 2 组和第 4 组中，很容易看到未定义的行为。

第 2 组具有未定义的行为，因为`=`运算符没有引入序列点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T22:46:26.997

> 我想知道上图中显示的所有表达式（4组）是否有未定义的行为？

第 2 到 5 行：

```
k = i++ + j++;
k = i++ + ++j;
k = ++i + ++j;
k = ++i + j++; 
```

都是定义明确的。所有其他表达式都是未定义的，因为它们都试图通过在序列点之间多次评估表达式来修改对象的值（对于这些示例，序列点出现在“;”终止每个语句）。例如，`i = i++;`是未定义的，因为我们试图`i`通过赋值和后缀来修改 的值，`++`而没有中间的序列点。FYI `=`运算符不引入序列点。`||` `&&` `?:`和`,comma`运算符引入序列点

> 对于定义的行为表达式，您能否展示（不解释）编译器如何评估它们。

让我们从

```
k = i++ + j++; 
```

该表达式的`a++`计算结果为 的*当前*值`a`，并且在下一个序列点之前的某个点，`a`加 1。因此，*从逻辑上讲*，计算结果类似于

```
k = 1 + 2; // i++ evaluates to 1, j++ evaluates to 2
i = i + 1; // i is incremented and becomes 2
j = j + 1; // j is incremented and becomes 3 
```

然而...

表达式`i++`和`j++`求值的确切顺序以及应用它们的副作用的顺序是*未指定*的。以下是完全合理的操作顺序（使用伪汇编代码）：

```
mov j, r0        ; read the value of j into register r0
mov i, r1        ; read the value of i into register r1
add r0, r1, r2   ; add the contents of r0 to r1, store result to r2
mov r2, k        ; write result to k
inc r1           ; increment value of i
inc r0           ; increment value of j
mov r0, j        ; store result of j++
mov r1, i        ; store result of i++ 
```

**不要假设算术表达式从左到右求值。不要假设运算数在评估`++`后`--`立即更新。**

因此，like 表达式的结果`i++ + ++i`会根据编译器、编译器设置甚至周围的代码而有所不同。该行为*未定义*，因此编译器不需要“做正确的事情”，无论它可能是什么。你会得到*一个*结果，但不一定是你期望的结果，而且它不会在所有平台上保持一致。

看着

```
k = i++ + ++j; 
```

*逻辑*评估是

```
k = 1 + 3  // i++ evaluates to i (1), ++j evaluates to j + 1 (2 + 1 = 3)
i = i + 1
j = j + 1 
```

同样，这是一种*可能*的操作顺序：

```
mov j, r0
inc r0
mov i, r1
add r0, r1, r2
mov r2, k
mov r0, j
inc r1
mov r1, i 
```

或者它可以做其他事情。如果它导致更有效的操作顺序（我的示例几乎可以肯定不是），编译器可以自由更改单个表达式的评估顺序。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T22:17:23.410

这些语句*中*没有序列点。*它们之间*有序列点。

如果您在连续序列点之间修改同一对象两次（在这种情况下，通过`=`或通过 prefix 或 postfix `++`），则行为未定义。所以第一组 4 条语句的行为是明确定义的；其他人的行为是不确定的。

如果定义了行为，则`i++`产生 的*先前*值`i`，并作为副作用`i`通过添加`1`来修改。 通过添加来`++i`修改，然后产生修改后的值。`i``1`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T22:18:40.873

第一组均已定义。它们都会在下一个序列点之前的某个时间增加`i`和`j`作为副作用的值，因此`i`保留为 2 和`j`3。此外，`i++`计算为 1，`++i`计算为 2，`j++`计算为 2，`++j`计算为 3。这意味着第一个分配`1 + 2`给`k`，第二个分配`1 + 3`给`k`，第三个分配`2 + 3`给`k`，第四个分配`2 + 2`给`k`。

其余的都是未定义的行为。在第二组和第三组中，`i`在一个序列点之前被修改了两次；第四组`i`在一个序列点之前修改了3次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-18T19:23:49.753

在编译器可以判断两个左值表达式标识同一个对象的情况下，让它以某种合理的方式运行不会有任何意义的成本。更有趣的场景是其中一个或多个操作数是取消引用的指针。

给定代码：

```
void test(unsigned *a, unsigned *b, unsigned *c)
{
  (*a) = (*b)++ + (*c)++;
} 
```

编译器可以通过许多合理的方式来处理它。它可以加载 b 和 c，将它们相加，将结果存储到 a，然后递增 b 和 c，或者它可以加载 a 和 b，计算 a+b、a+1 和 b+1，然后将它们写入任意序列，或执行无数其他操作序列中的任何一个。在某些处理器上，某些安排可能比其他安排更有效，编译器不应期望程序员会认为任何安排都比其他安排更合适。

请注意，即使在大多数硬件平台上，通过将相同的指针传递给 a、b 和 c 可能导致的合理行为数量有限，标准的作者也没有努力区分合理和不合理的结果。尽管许多实现可以很容易地以基本上零成本提供*一些*行为保证（例如保证像上面这样的代码总是会设置`*a`, `*b`, 和`*c`到一些可能未指定的值而没有任何其他副作用），即使这样的保证有时可能是有用的（如果指针将在对象的值很重要的情况下识别不同的对象，但可能不会这样做）它是时尚的对于编译器编写者来说，当被授予全权委托以触发任意破坏性副作用时，他们可以实现的任何有用优化的微小可能性将比程序员从受约束行为的保证中获得的价值更有价值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-04T13:49:40.773

逗号有点棘手。它们成对时确实从左到右（对于 for 循环中的 vars 真的）。如果放置在一对以上的语句中，则不能保证以逗号分隔的语句按给定顺序进行评估。另请注意，如果函数参数和声明用逗号分隔，则不保证执行顺序。

所以

```
int a=0;
function_call(++a, ++a, ++a); 
```

可能会产生不可预知的结果。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-05-18T15:38:48.933

在大多数情况下，gcc 首先实现预增量并在操作中使用这些值，然后评估后增量。

例如。在块 2 Pre 递增 none 所以使用`i`1

```
k = i++ + i++ // hence k = 1+1=2 
```

在 i 中有两个后增量，所以 i= 3

一个预增量将 i 更改为 2

```
k = i++ + ++i // hence k= 2+2= 4 
```

`i`所以增加一个帖子`i= 3`

同样适用`k= ++i + i++`

两个预增量`i`使其成为 3

```
k=++i + ++i // hence k=3+3= 6 
```

和`i = 3`

希望能解释一下。但这完全取决于编译器。

# php - 使用 include 将数组从一个文件传递到另一个文件

> ID：13615244
> 
> 赞同：1
> 
> 时间：2012-11-28T22:07:02.813
> 
> 标签：php, include

如何使用 PHP 语言将数组从一个文件传递到另一个文件？我有一个包含一些语言数组的文件（语言/langen.php）：

```
global $lang;
$lang['Here'] = 'Here';
$lang['Date'] = "Date"; 
```

在其他文件中，我有：

```
include base_url().'language/lang'.$_COOKIE['lang'].'.php';
var_dump($lang); 
```

*（我处理代码的错误 - true 是 var_dump($lang)）* 但它向我显示了一个错误：

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: lang 
```

如何解决这个问题，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:56:28.370

首先： **你不应该直接在 include 语句中使用 cookie 值**——它很容易制造假 cookie 并在你的应用程序中搞砸。

我想您只是没有名称为 lang 或变量的 cookie`$lang`以前从未被初始化过。

要检查 cookie 是否存在并且格式正确，您可以这样做：

```
// set default lang code
$langCode = 'en';

// check if cookie exists and if contains string build from 2 characters from range a-z
// check also if file exists
if (isset($_COOKIE['lang'] && preg_match('/^[a-z]{2}$/', $_COOKIE['lang']) &&
    file_exists(base_url().'language/lang'.$_COOKIE['lang'].'.php')) {
    $langCode = $_COOKIE['lang'];
}
include base_url().'language/lang'.$langCode.'.php'; 
```

在包含的文件中，您应该检查变量是否`$lang`存在

```
if (!isset($lang)) $lang = array();
$lang['Here'] = 'Here';
$lang['Date'] = "Date"; 
```

我也认为`global`在这里使用是没有意义的，因为从你的例子来看，它看起来是相同的范围。

无论如何对我来说更清洁的解决方案是：

```
// first_file.php
$langCode = 'en';
if (isset($_COOKIE['lang'] && preg_match('/^[a-z]{2}$/', $_COOKIE['lang']) &&
    file_exists(base_url().'language/lang'.$_COOKIE['lang'].'.php')) {
    $langCode = $_COOKIE['lang'];
}
$lang = include base_url().'language/lang'.$langCode.'.php';

// langen.php
return array(
    'Date' => 'Date',
    'Here' => 'Here',
); 
```

* * *

编辑

还有一件事 - 如果 base_url() 返回 Web URL（如[http://example.com](http://example.com) ...），那么它也是错误的（并且也可能导致问题，因为 langen.php 在以这种方式包含时至少包含通知消息) - 应该包含在有效的文件路径中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:43:54.083

首先，如果您发布的代码中没有这样的东西，我看不到 var-dumping 变量 $data 的意义。如果您的浏览器中有一个名为“lang”的 cookie，那么您应该没问题。你可以随时检查这个

```
var_dump($GLOBALS['lang']); 
```

在你的代码中。它应该打印 lang*.php 文件中的值数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:25:51.037

不应该吗？

```
include base_url().'language/lang'.$_COOKIE['lang']['Here'].'.php'; 
```

否则它只会返回 array()

# sql - 将 SQL Server 表变量转换为真实表

> ID：13615250
> 
> 赞同：1
> 
> 时间：2012-11-28T22:07:38.310
> 
> 标签：sql, sql-server-2008, stored-procedures, temp-tables

我创建了一个临时表：

```
DECLARE @tbl_fk_errors TABLE (
    id int Primary Key IDENTITY(1,1)
    , tbl_id int
    , tbl_name nvarchar(128)
    , tbl_record_id int
    , tbl_field nvarchar(20)
    , tbl_field_value nvarchar(20)
    , jnktn_field_value nvarchar(20)
    , jnktn_field nvarchar(20)
    , jnktn_tblname nvarchar(128) 
```

该表将填写在我的脚本中。现在我想将该表输出到一个文件中，并找到可以做到这一点的[xp_cmdshell 。](http://www.mssqltips.com/sqlservertip/1633/simple-way-to-export-sql-server-data-to-text-files/)但是该存储过程无法获取我的表 var，因为它打开了与数据库的新连接（因为“bcp”）。

我需要将该表临时保存到我的数据库中（然后将其删除，但这没什么大不了的）。

**如何快速将存储在表变量中的表保存为数据库中的真实表？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:09:59.927

```
select *
into table --destination
from @table --source 
```

作为奖励，围绕它进行交易以确保在发生错误时不会留下“悬空”表。DDL 在 SQL Server 中是事务性的。回滚时，表将被删除。

# java - 为什么 Thread.sleep() 在 Action Performed 中不起作用？

> ID：13615261
> 
> 赞同：0
> 
> 时间：2012-11-28T22:08:15.793
> 
> 标签：java, jbutton, actionlistener, thread-sleep

```
public void actionPerformed(ActionEvent e) {
        String sp1="Player 1's turn. ";
        String sp2="Player 2's turn. ";
          System.out.println("Mouse entered for rating " + index);  //helps me track the cards
           ori=new ImageIcon(getClass().getResource(index+1+".png")); //set the image to the card

        ori.setDescription("ori");  //It's weird that I cannot directly flip the card, so I used this method to flip the cards.
        tail.setDescription("tail");//http://stackoverflow.com/questions/13557561/the-method-about-imageicons-does-not-work

        if (((ImageIcon) bt[index].getIcon()).getDescription()=="ori")
            bt[index].setIcon(tail);
         else
            bt[index].setIcon(ori);

        count++;

       System.out.printf("Action Performed %d times \n",count);
         if(count==1){  //if the card is clicked for once, the card should not flip and the index is stored in record.
           record=index;
           countS++;

       }
       String turnS=Integer.toString(countS);//parse the int and printout the turn 
     //  text3.setText(sp1+"This is turn "+turnS);
       if(count==2){
           int match1=record/4;   //Since every four cards have the same rank, I used this to get the rank very easily
           int match2=index/4;
          if(match1==match2&&record!=index){  //compare the two cards clicked
              p1++;
              score1=Integer.toString(p1);   
              text1.setText("Player 1: "+score1);  //display the score
              text3.setText(sp2+"This is turn "+turnS);
              bt[index].setEnabled(false);//remove the cards that match
              bt[record].setEnabled(false);
          }
          if(record==index){
              text3.setText(sp2+"This is turn "+turnS);//designed for the situation that the user clicks the same card
          }
          if(match1!=match2){//designed for the situation that the two cards do not match
           //time.schedule(taskFlip1,500);//delay the flip so that the user can see the cards
           //time.schedule(taskFlip2,500);

              try{   **//This part is problematic!**

                  Thread.currentThread().sleep(4000);
                  flip(index);
                  flip(record);

                }
                catch(Exception ie){

                }
              }
          text3.setText(sp2+"This is turn "+turnS);

       } 
```

当我单击按钮时，该按钮应该更改 ImageIcon。不睡觉也能正常工作。但是在我添加睡眠后，当我单击按钮时，程序会暂停而不更改 ImageIcon！你能告诉我为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:12:09.243

该动作由处理绘图的线程执行。你阻止了这个线程。你什么也看不见。游戏结束。

这就是您不应阻塞或延迟事件调度程序线程的原因。

搜索术语“Event Dispatcher Thread”和“blocking”，你会发现很多解释血淋淋的细节的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:12:11.263

ActionPerformed 在事件调度程序线程中运行。在那里睡觉会阻止 UI 更新。

您可以改用 Swing Timer 来延迟操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:13:03.653

该`actionPerformed()`方法在事件分派线程中运行。重绘系统也是如此。如果你睡着了，你就是在推迟绘画，以及其他一切。你永远不应该在这个线程中睡觉。如果您想要延迟绘制，请使用`SwingWorker`或`javax.swing.Timer`开始延迟任务。

# smslib - smslib 配置问题

> ID：13615263
> 
> 赞同：1
> 
> 时间：2012-11-28T22:08:22.857
> 
> 标签：smslib

这是我尝试在我的计算机上配置 smslib 的 2 天，在尝试执行 zip 文件中包含的示例代码 (SendMessage) 时，我总是遇到以下异常：

```
log4j:WARN No appenders could be found for logger (smslib).
   log4j:WARN Please initialize the log4j system properly.
   log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
   Exception in thread "Thread-3" java.lang.ExceptionInInitializerError
    at org.smslib.modem.SerialModemDriver.connectPort(SerialModemDriver.java:69)
    at org.smslib.modem.AModemDriver.connect(AModemDriver.java:114)
    at org.smslib.modem.ModemGateway.startGateway(ModemGateway.java:189)
    at org.smslib.Service$1Starter.run(Service.java:276)
   Caused by: java.lang.RuntimeException: CommPortIdentifier class not found
    at org.smslib.helper.CommPortIdentifier.<clinit>(CommPortIdentifier.java:76)
    ... 4 more 
```

我已经完成了 smslib 网站上的所有要求，我已经阅读了与相同错误相关的所有帖子，我还配置了 JAVA_HOME 路径，但我遇到了同样的错误。我正在使用 Eclipse Juno 和 JDK 7 在 Windows 7 上工作。请有人帮助尝试解决此问题。还有一件事情; 我们可以使用另一个库来代替 smslib 吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T21:44:04.950

现在很好，我想这是因为我的 eclipse 配置了 jre 路径而不是 JDK 路径。我将所需的文件放在 jre 的文件夹中，它工作正常。

非常感谢 ！

# java - 如何获取eclipse jdk插件的源jar文件？

> ID：13615264
> 
> 赞同：0
> 
> 时间：2012-11-28T22:08:22.317
> 
> 标签：java, eclipse, jar, eclipse-jdt

我正在为 RCP 和 RAP 开发人员使用 Eclipse Juno。

![在此处输入图像描述](../Images/57231365bcf1159e95d10f5f428ef290.png)

在[vogella.com](http://www.vogella.com/articles/EclipseCodeAccess/article.html)之后，我可以导入插件和片段以跟踪到 eclipse jdt 源代码。但是，我无法在`org.eclipse.jdt.code`.

![在此处输入图像描述](../Images/94cc8039af665eea74be964d1fca7b48.png)

而且我发现没有带有源 jar 文件的 jar 文件`org.eclipse.jdt.core`。

![在此处输入图像描述](../Images/f5dc47a6b5ead4f4349fb5645e35dedd.png)

与一些具有源 jar 文件的 jar 文件相比。

![在此处输入图像描述](../Images/b6048d5afac4f7c9c1b1f4851e8077e1.png)

*   如何获取 org.eclipse.jdt.core 的源 jar 文件？我可以简单地下载文件吗？我需要从头开始构建 jar 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:41:49.267

prunge 的回答帮助我找到了解决问题的方法。

我先是使用[Vogella 的 Eclipse Source Code - Tutorial](http://www.vogella.com/articles/EclipseCodeAccess/article.html)中的方法将 org.eclipse.jdt.core 导入到项目中，然后[使用 Eli Acherkan 的方法](https://stackoverflow.com/a/7074062/260127)安装 Eclipse SDK。只有在我从项目中卸载 eclipse 源代码后，我才能追踪到 eclipse 源代码库中的方法/类。

# c++ - Char 验证器不仅接受小写和大写 M/F

> ID：13615265
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:08:33.093
> 
> 标签：c++, validation, char

嘿，我试图验证一个字符以将其限制为接受男性或女性的 m 或 f。但即使按下 m 或 f 并继续循环问题，它也不会通过 while 条件。

任何人都可以帮我解决这个问题。提前致谢。这是我的代码：

```
char Validator :: getChar(string q)
{
    char input;
    do
    {
        cout << q.c_str() << endl;
        cin >> input;
    }
    while(!isalpha(input) && "M"||"F"||"m"||"f");
    return input;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:16:43.170

您的`"M"||"F"||"m"||"f"`代码部分没有按照您的想法执行。它所做的是检查这些字符串常量的*地址*。由于它们都是非 NULL，因此该表达式仅返回 true，因此您的条件本质上变为：`while(!isalpha(input) && true)`与`while(!isalpha(input))`.

试试这个：

```
char Validator::getChar(const string &q)
{
    char input = 0;

    do
    {
        cout << q << endl;
        cin >> input;
    }
    while((input != 'M') && (input != 'F') && (input != 'm') && (input != 'f'));

    return input;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:29:08.967

只是为了终止条件的另一种方法：

```
char Validator::getChar(const string &q)
{
    const std::set<char> valid_chars { 'M', 'm', 'F', 'f' };
    char input = 0;

    do
    {
        cout << q << endl;
        cin >> input;
    }
    while (!valid_chars.count(q));

    return input;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:14:14.527

中的表达`while`并不意味着你认为它做了什么。首先，`!`不适用于*整个*表达式，其次，“平等”不是一个*隐含*的测试。你需要写出你的意思。

要测试是否相等，请使用`==`or`!=`运算符。您必须在要测试的*每个值上使用运算符；*运算符不会像普通英语那样“分布”在值列表上。像这样写下你的条件：

```
while (input != 'M' && input != 'F' && input != 'm' && input != 'f'); 
```

你可以看到`isalpha`调用是不必要的；如果`input`不等于任何列出的值，那么它是否是字母字符并不重要。

另一种写法是这样的：

```
while (!(input == 'M' || input == 'F' || input == 'm' || input == 'f')); 
```

请注意，我在内部术语周围有另一组括号，以便`!`运算符适用于整个表达式，而不仅仅是第一个术语。

# xml - 移动 XML 元素时的 Powershell，For vs Foreach

> ID：13615267
> 
> 赞同：0
> 
> 时间：2012-11-28T22:08:35.027
> 
> 标签：xml, powershell

我有一个循环将 XML 元素从一个位置移动到另一个位置。它适用于 For 循环，但对于 Foreach 循环，它会永远迭代。这只是不幸的实现冲突（XMLElement vs foreach 循环）还是我缺少更好的实践？我绝不是 System.Xml 库的专家。

**演示脚本**

```
$xmlDocOriginalValue = [xml]@"
<root>
    <dir Id = "source" >
        <file Id = "1" />
        <file Id = "2" />
    </dir>
    <dir Id = "destination" >
        <file Id = "3" />
        <file Id = "4" />
    </dir>
</root>
"@

$xmlDoc = $xmlDocOriginalValue.Clone()
$files = $xmlDoc.SelectNodes('//file')
$destination = $xmlDoc.SelectSingleNode('//dir[@Id="destination"]')

# Move "files" from source to destination using both a "for" and a "foreach" loop

Write-Host "For loop"
Write-Host "XML before: $($xmlDoc.OuterXml)"
for($i = 0; $i -lt $files.count; $i++)
{
    Write-Host ("Iteration "+$i + ", " + $files[$i].OuterXml)
    $destination.AppendChild($files[$i]) | Out-Null
}
Write-Host "XML after: $($xmlDoc.OuterXml)"

# Reset and try with a foreach loop
$xmlDoc = $xmlDocOriginalValue.Clone()
$files = $xmlDoc.SelectNodes('//file')
$destination = $xmlDoc.SelectSingleNode('//dir[@Id="destination"]')

Write-Host "`nForeach loop"
Write-Host "XML before: $($xmlDoc.OuterXml)"
$i = 0
foreach($file in $files)
{
    Write-Host ("Iteration "+$i + ", " + $file.OuterXml)
    $destination.AppendChild($file) | Out-Null
    $i++
}
Write-Host "XML after: $($xmlDoc.OuterXml)" 
```

**输出**

```
For loop
XML before: <root><dir Id="source"><file Id="1" /><file Id="2" /></dir><dir Id="destination"><file Id="3" /><file Id="4" /></dir></root>
Iteration 0, <file Id="1" />
Iteration 1, <file Id="2" />
Iteration 2, <file Id="3" />
Iteration 3, <file Id="4" />
XML after: <root><dir Id="source"></dir><dir Id="destination"><file Id="1" /><file Id="2" /><file Id="3" /><file Id="4" /></dir></root>

Foreach loop
XML before: <root><dir Id="source"><file Id="1" /><file Id="2" /></dir><dir Id="destination"><file Id="3" /><file Id="4" /></dir></root>
Iteration 0, <file Id="1" />
Iteration 1, <file Id="2" />
Iteration 2, <file Id="3" />
Iteration 3, <file Id="4" />
Iteration 4, <file Id="1" />
Iteration 5, <file Id="2" />
Iteration 6, <file Id="3" />
Iteration 7, <file Id="4" />
Iteration 8, <file Id="1" />
Iteration 9, <file Id="2" />
Iteration 10, <file Id="3" />
Iteration 11, <file Id="4" />
Iteration 12, <file Id="1" />
Iteration 13, <file Id="2" />
Iteration 14, <file Id="3" />
Iteration 15, <file Id="4" />
Iteration 16, <file Id="1" />
Iteration 17, <file Id="2" />
Iteration 18, <file Id="3" />
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:34:26.310

从快速实验来看，这确实是一个冲突，在尝试在循环中修改迭代器的意义上。也就是说，您最初选择了所有元素*——包括那些在目标中的*元素。人们会认为这应该是无害的，但显然不是。为了证明这一点，请将您选择的节点更改为：

```
$files = $xmlDoc.SelectNodes('//dir[@Id="source"]/file') 
```

...其中您仅选择源中的那些文件节点。（毕竟，不需要包含目标中的那些，因为它们已经在您想要的位置。）通过该更改，代码按预期执行。

这是另一个可行的变体，回到您原来的选择器。我只更改了标有 octothorps (#############) 的三行来获取节点，然后在单独的步骤中修改 XML：

```
# Reset and try with a foreach loop
$xmlDoc = $xmlDocOriginalValue.Clone()
$files = $xmlDoc.SelectNodes('//file')
$destination = $xmlDoc.SelectSingleNode('//dir[@Id="destination"]')

Write-Host "`nForeach loop"
Write-Host "XML before: $($xmlDoc.OuterXml)"

$i = 0
$list = @()                                    ##############
foreach($file in $files) { $list += $file }    ##############
foreach($item in $list)                        ##############
{ 
    Write-Host ("Iteration "+$i + ", " + $file.OuterXml)
    $destination.AppendChild($item) | Out-Null 
    $i++
}
Write-Host "XML after: $($xmlDoc.OuterXml)" 
```

# octopus-deploy - 使用 Octopus 部署经典 ASP 站点

> ID：13615268
> 
> 赞同：3
> 
> 时间：2012-11-28T22:08:38.073
> 
> 标签：octopus-deploy

我们目前正在尝试将部署我们新的 ASP.NET 项目与 Octopus 集成，我想知道是否有人尝试使用 Octopus 来部署经典的 ASP 站点？

我知道这是可能的，并且理论上我知道该怎么做，但是我们的问题源于 ASP 站点非常庞大这一事实。在将所有视频、图像和 pdf 的总大小相加后，该网站的重量不到 3 gig。因此，当将更改签入 TeamCity 并创建 NuGet 包时，Octopus 会将 3 gig nuget 包推送到 2 个单独的负载平衡服务器。

我们无法为媒体文件创建共享目录或 CDN（至少现在还没有），所以谁能告诉我一个很好的攻击方法？还是 Octopus 不是大型 ASP 站点的好解决方案，而 Web Deploy 会更好？如果是这种情况，如何为 Web Deploy 实施备份解决方案，以便可以回滚任何错误？

提前感谢您对此的帮助。我们正在将这些 ASP 站点转换为 MVC，但这需要一段时间，在完成之前，我们必须找到一种方法来使用它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T14:47:26.247

您应该将 ASP 站点和媒体文件打包为 2 个单独的 NuGet 包。这将允许您更新和部署 ASP 代码，而无需部署所有媒体文件（假设代码更改比媒体更频繁）。

**实施细节**

*   设置 TeamCity 以将 ASP 站点和媒体文件打包为单独发布的 NuGet 包。
*   在 Octopus Deploy 中，将 2 个 NuGet 包中的每一个添加为单个项目的部署步骤
*   当您在 Octopus 中创建新版本时，请为 ASP 代码选择最新的包版本，为媒体文件选择之前发布的包版本。
*   部署版本时，您可以选中一个框以跳过媒体文件的部署

**提示**

*   使用 Octopus 变量“OctopusWebSiteName”来指定您的媒体文件包应该部署在您的 ASP 站点的子目录中。（如“默认网站/媒体”）该变量可以限定为特定包，以便仅在部署该包时应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:29:11.713

您真的需要每次都推送所有内容吗？您不能只推送更改吗？

# javascript - angularjs通过ng-click传递匿名函数

> ID：13615269
> 
> 赞同：6
> 
> 时间：2012-11-28T22:08:40.933
> 
> 标签：javascript, angularjs, anonymous-function

我正在使用 AngularJS，并希望将 html 元素函数中的匿名 JavaScript 函数`ng-click`作为参数传递给我范围内的函数。

```
<div ng-app="">
  <div ng-controller="Ctrl1">
      <button ng-click="test(function(){alert('pushed');})">Push Me</button>
  </div>
</div> 
```

然后在 JavaScript 中：

```
function Ctrl1($scope) {
    $scope.test = function(callback){
        callback();
    };
} 
```

我已经设置了一个简单的 jsfiddle 来演示这个问题：http: [//jsfiddle.net/C4t4LystX/gUj8x/4/](http://jsfiddle.net/C4t4LystX/gUj8x/4/)

* * *

每当我尝试在我的代码中执行此操作时，我都会在控制台中收到此类错误：

`Syntax Error: Token '{' is unexpected, expecting [)]`

我应该如何执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:24:46.110

在 JavaScript 中，您想要评估您想要运行的函数。在这种情况下，如果您想执行指令，`alert("pushed")`那么您需要评估该字符串。

我在这里开发了一个 JS Fiddle：http: [//jsfiddle.net/gUj8x/6/](http://jsfiddle.net/gUj8x/6/)

请注意，该指令现在作为引号转义字符串传递给 Angular。

# wordpress - 下拉菜单在 Internet Explorer 中仍然可见

> ID：13615270
> 
> 赞同：0
> 
> 时间：2012-11-28T22:08:45.060
> 
> 标签：wordpress, internet-explorer, drop-down-menu

这是一个非常奇怪的问题，只发生在 Internet Explorer 上。我使用 Wordpress 在 Web 中制作了一些作品，我的客户要求我删除菜单栏中下拉菜单中的一些链接。我按照他的要求进行了更改，但后来我发现在菜单栏中的网站的特定页面中，这个下拉菜单在 IE 中仍然可见，为什么？“有趣”的事情是，这仅发生在网站一页的菜单栏中，并且仅在 IE 中发生。这是一个正常的问题吗？怎么可能弄清楚？.

这是[网络](http://www.creativesquaresummercamp.com/)，这是在菜单栏中的“*关于”链接*中仍可见下拉菜单的[页面](http://www.creativesquaresummercamp.com/safety-and-supervision/)。

 *我安装的唯一额外插件是：W3 Total Cache 和 JS & CSS Script Optimizer。*

# java - 账户利息计算器：如何将数组值传递给对象？

> ID：13615279
> 
> 赞同：0
> 
> 时间：2012-11-28T22:09:14.360
> 
> 标签：java

我在一个 Java 示例项目中遇到了障碍。我对这个项目的目标是使用用户输入来计算利息，以确定正在使用的帐户类型，并根据每个特定的帐户类型进行计算。

现在我已经创建了一个工厂方法“public Account createAccount”。我需要它接受来自用户提示的字符串参数。告诉我是支票、储蓄还是 CD。现在这是我遇到麻烦的地方。我必须将“accttype”的用户值传递给特定于每个帐户类型的新对象。我的问题是我只是不知道该怎么做。我必须在工厂方法中实现吗？我怎样才能传递这些值？提前致谢

账户.java

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Account implements ActionListener {

JButton calculate;
private int period;
private int balance;
private int fbalance;
private int rate;
private int monthlyFee;
private String printstring;

@Override
public String toString() {
    return String.format("Period: " + period + ", Balance: " + balance);
}

public int getPeriod() {
    return period;
}

public void setPeriod(int period) {
    this.period = period;
}

public int getBalance() {
    return balance;
}

public void setBalance(int balance) {
    this.balance = balance;
}

public int getRate() {
    return rate;
}

public void setRate(int rate) {
    this.rate = rate;
}

    public int getFbalance() {
    return fbalance;
}

public void setFbalance(int fbalance) {
    this.fbalance = fbalance;
}

public String getPrintstring() {
    return printstring;
}

public void setPrintString(String printstring) {
    this.printstring = printstring;
}

public void calculate() {
    for ( int i = 0; i<period; i++)
{
    fbalance = balance + balance * rate - monthlyFee;
}

}

public void actionPerformed(ActionEvent e) {
    calculate();
}

} 
```

银行家.java

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Banker {

// Array for type of bank account

    private static void createAndShowGUI() {

    // Declare strings for period, balance, rate
    String period;
    String balance;
    String rate;

    // Prompt for account type
    String[] accttype = { "Checking", "Savings", "CD" }; // Array of bank acct types
    String input = (String) JOptionPane.showInputDialog(null, "Choose account...",
    "Choose bank account type", JOptionPane.QUESTION_MESSAGE, null,
    accttype, // Array of acct types
    accttype[0]); // First choice

    // Prompt user for input
    period = JOptionPane.showInputDialog(null, "Number of periods (length):");
    balance = JOptionPane.showInputDialog(null, "Beginning balance:");
    rate = JOptionPane.showInputDialog(null, "Interest rate (use decimal, example: .05      = 5%):");

    // Make Calculate button
    JButton calculate = new JButton("Calculate");

    // Make 2 Labels
    JLabel blabel = new JLabel("Period: " + period);
    JLabel plabel = new JLabel("Balance: " + balance);

    // Setup window with flow layout and exit on close
    JFrame frame = new JFrame("Interest Savings Calculator Plus");
    frame.setLayout(new FlowLayout());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Add combo box, calc button and labels
    frame.add(calculate);

    frame.add(plabel);
    frame.add(blabel);
    frame.pack();
    frame.setVisible(true);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
            createAndShowGUI();
        }

public Account createAccount(String type){

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:25:41.143

如果您想为所有三种帐户类型使用 Account 类，我建议向您的 Account 类添加一个构造函数和一个变量来保存帐户类型，如下所示：

```
public class Account implements ActionListener {

    ...

    private String accountType = null;

    public Account(String accountType) {

        this.accountType = accountType;

    }

    ...
} 
```

然后，您可以在 createAccount() 方法中创建一个新的 Account 对象并像这样返回它：

```
public Account createAccount(String type) {

    Account account = new Account(type);

    return account;

} 
```

然后您可以简单地传递帐户类型（这是您在 createAndShowGUI() 方法中设置的“输入”变量）：

```
Account account = createAccount(input); 
```

否则，您也可以简单地使用 getter 和 setter 添加 accountType 变量，然后简单地创建一个新 Account 并调用 set 方法，但我建议使用接受这些值作为参数的构造函数。

由于您可能还希望在您的 Account 对象中设置其他变量，您可以调用您返回的 Account 对象上的设置器，或者您可以修改您的 createAccount() 方法和 Account 构造函数以接受更多参数并将它们传入当您创建新的 Account 对象时。

# node.js - nodejs，socket.io：如何从套接字函数获取请求和响应？

> ID：13615280
> 
> 赞同：7
> 
> 时间：2012-11-28T22:09:17.567
> 
> 标签：node.js, express, socket.io

我正在创建聊天应用程序，使用 nodejs (0.8.15)、express (>3.0) 框架和 mongodb 注册用户。

```
var express = require('express')
  , http = require('http')
  , path = require('path')
  , io = require('socket.io');

var app = express()
  , server = http.createServer(app)
  , io = io.listen(server);

    app.configure(function() {
      app.set('port', process.env.PORT || 3000);
      app.set('views', __dirname + '/views');
      app.set('view engine', 'ejs');
      app.use(express.favicon());
      app.use(express.logger('dev'));
      app.use(express.bodyParser());
      app.use(express.methodOverride());
      app.use(express.cookieParser('secret'));
      app.use(express.session({cookie: {maxAge: 60000*100}}));
      app.use(app.router);
      app.use(express.static(path.join(__dirname, 'public')));
    });

    app.configure('development', function() {
      app.use(express.errorHandler());
    });

    app.get('/chat', function(req, res) {
        res.render('chat');
    });

 server.listen(app.get('port'), function() {
    console.log("Express server listening on port " + app.get('port'));
  });

 io.sockets.on('connection', function (socket) {
    socket.on('start-chat', function() {
         // here i need to know req and res
         // for example, i need to write:
         // socket.username = req.session.username;
    });
 }); 
```

问：在上面的代码中聊天时，如何让 res 和 req 对象与它们一起使用？还是我与用户身份验证创建聊天的方式错误？

谢谢你！

编辑：答案在这里 [http://www.danielbaulig.de/socket-ioexpress/](http://www.danielbaulig.de/socket-ioexpress/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-11T17:08:40.193

你需要使用`authorization`.

```
var socketIO = require('socket.io').listen(port);
socketIO.set('authorization', function(handshakeData, cb) {
   //use handshakeData to authorize this connection
   //Node.js style "cb". ie: if auth is not successful, then cb('Not Successful');
   //else cb(null, true); //2nd param "true" matters, i guess!!
});

socketIO.on('connection', function (socket) {
   //do your usual stuff here
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T22:51:59.580

您无法在 socket.io 处理程序中获取 res 和 req 对象，因为它们根本不存在 - socket.io 不是普通的 http。

相反，您可以做的是对用户进行身份验证并为他们分配一个会话身份验证令牌（一个标识他们已登录以及他们是谁的密钥）。然后客户端可以将身份验证令牌与每个 socket.io 消息一起发送，服务器端处理程序可以检查数据库中密钥的有效性：

```
io.sockets.on('connection', function (socket) {
socket.on('start-chat', function(message) {
     if (message.auth_token)
         //Verify the auth_token with the database of your choice here!
     else
         //Return an error message "Not Authenticated"
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-05-26T12:20:50.970

在`socket.io v1.0`上面你可以得到这样的`req`对象

```
var req = socket.request;
var res = req.res; 
```

# javascript - 如何测试 jQuery 选择器条件是否超过 2 次？

> ID：13615285
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:09:44.237
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 div 更改时触发 jQuery 事件](https://stackoverflow.com/questions/4979738/fire-jquery-event-on-div-change)

我正在使用这个小插件来观察 html 中的变化：[https ://github.com/jacobrelkin/jquery-watcher](https://github.com/jacobrelkin/jquery-watcher)

这很好用，问题是我需要`if condition`验证它是否超过 2 次，原因是当画廊加载并且它向左和向右移动时会创建`-moz-grabbing`两次加载条件。

我试着做

```
 if(  $('#gallery-1').has('div').css('cursor', '-moz-grabbing') > 2)
  if(  $('#gallery-1').has('div').css('cursor', '-moz-grabbing').length > 2) 
```

我也试过把它放在一个变量中然后做`> 2`

以上似乎都不起作用，不确定我做错了什么？

```
$('.sliderContainer').watch('innerHTML', function() {
    if(  $('#gallery-1').has('div').css('cursor', '-moz-grabbing') ) {
        console.log($('#gallery-1').has('div').css('cursor', '-moz-grabbing'));
        $('#collapse_content_1').toggleClass('collapse_inner_off');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:26:30.293

`.css('cursor', '-moz-grabbing')`实际上*设置*样式表规则。您可能想使用`.filter`：

```
$('#gallery-1').has('div').filter(function () {
   return $(this).css('cursor') == '-moz-grabbing';
}).length > 2 
```

# reflection - 在 Mono for Android 上反射程序集

> ID：13615289
> 
> 赞同：0
> 
> 时间：2012-11-28T22:10:04.903
> 
> 标签：reflection, mono, xamarin.android, .net-assembly, dalvik

我正在创建一个应用程序“插件”dll，它在运行时为我的 Mono for Android 应用程序加载并启动一个新的活动。（该应用程序将临时安装 - 因此没有关于下载可执行代码的评论）

我来自 iOS 上的 Obj-C - 您可以在其中将 .nibs 和 ViewControllers 包含在库中。

我可以让主要的 Android 应用程序和加载的 dll 都引用另一个常见的 dll，并且加载对象就好了。

以下作品：

```
var test = plugin.CreateInstance("Test.Satellite.testClass");
MethodInfo getString = test.GetType().GetMethod("getString");
MethodInfo tryPatient = test.GetType().GetMethod("tryPatient"); 
```

在哪里

```
public class testClass
{
    public string getString ()
    {
        return "This was read from the object";
    }

    public string tryPatient ()
    {
        Patient p = new Patient();
        p.Name = "This was created from the Core/Common DLL";

        return p.Name;
    }
} 
```

但是，当我尝试加载 Activity （通过`CreateInstance`或`Intent`/ `StartActivity`）时，会出现以下异常：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Exception: test.satellite.RootActivity
  at Android.Runtime.JNIEnv.FindClass (System.String classname) [0x00087] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.7-branch/0e9eea34/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.cs:275
  at Android.Runtime.JNIEnv.FindClass (System.Type type) [0x00009] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.7-branch/0e9eea34/source/monodroid/src/Mono.Android/src/Runtime/JNIEnv.cs:233
  --- End of managed exception stack trace ---
  java.lang.NoClassDefFoundError: test.satellite.RootActivity
    at test.MainActivity.n_onCreate(Native Method)
    at test.MainActivity.onCreate(MainActivity.java:29)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4363)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    at dalvik.system.NativeStart.main(Native Method)
  Caused by: java.lang.ClassNotFoundException: test.satellite.RootActivity in loader dalvik.system.PathClassLoader@44e8c678
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
    ... 15 more

  --- End of inner exception stack trace ---
  at System.Reflection.MonoMethod.Invoke (object,System.Reflection.BindingFlags,System.Reflection.Binder,object[],System.Globalization.CultureInfo) <IL 0x000e0, 0x00670>
  at System.Reflection.MethodBase.Invoke (object,object[]) <IL 0x00006, 0x0008f>
  at Test.MainActivity.OnCreate (Android.OS.Bundle) [0x001e9] in /Users/stephen/Projects/test/test/MainActivity.cs:86
  at Android.App.Activity.n_OnCreate_Landroid_os_Bundle_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.2.7-branch/0e9eea34/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.App.Activity.cs:1490
  at (wrapper dynamic-method) object.ca46b703-b14e-4853-b371-499ea96364fc (intptr,intptr,intptr) <IL 0x00012, 0x00033> 
```

我可以从中读出的是，Dalvik 找不到课程`test.satellite.RootActivity`- 但它找到`test.satellite.testClass`了就好了......？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:37:32.330

看起来你对包的大小写不一致。这可能是问题吗？

```
"Test.Satellite.testClass" -- works
"test.satellite.RootActivity" -- doesn't work 
```

# php - 为 PHP Web 应用程序使用 XML 文件

> ID：13615291
> 
> 赞同：1
> 
> 时间：2012-11-28T22:10:13.153
> 
> 标签：php, xml, backend

我正在考虑使用 XML 在我的网络应用程序上存储用户内容。我是一个 php 新手，对我将如何做到这一点不太了解。

内容对用户是私有的，不共享公共或密码或任何东西。所以我想知道如何在服务器的后端部分创建和编辑 xml 文件，这些文件由 PHP 私人访问，就像它对 mySQL 所做的那样。

我的问题是：1）是否有可能 2）如果是这样，我将如何使用 php 等来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:15:24.480

将所有 xml 文件放在无法通过网络访问的文件夹中，因此位于文档根目录之外。或者，您可以使用 .htaccess 来限制对该文件夹的访问。

要从您的目录读取和写入这些 xml 文件，您可以使用[simplexml](http://php.net/manual/en/book.simplexml.php)。尽管有纯 php 和一些 xml 处理，但您不需要其他任何东西。

这应该让你开始；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:15:41.900

理论上是可以的。通过将您的 xml 制作为 php 文件格式，在 PHP 身份验证后输出 xml 格式的标签。PHP 文件将使用 PHP 文件系统函数动态创建，并且还将针对您的用户指定文件夹中的每个用户进行修改。

# c++ - [填空]左边必须有类/结构/联合错误

> ID：13615292
> 
> 赞同：1
> 
> 时间：2012-11-28T22:10:26.710
> 
> 标签：c++

所以我有这条线：

```
ArrayList<Operation> operations(); 
```

现在，这是我的 ArrayList 类和我的 Operation 结构：

```
typedef struct Operation {
    char key; 
    int value;
} Operation;
template <class DT>
class ArrayList
{
private:
    int _capacity;
    int _size;
    DT* elements;
public:
    ArrayList();
    ~ArrayList();
    void insert (DT&);
    DT& operator[] (int);
};
ArrayList<DT>::ArrayList()
{
    _capacity = 10;
    _size = 0;
    elements = new DT[10];
} 
```

我认为不需要发布其他方法的代码，因为那里没有发生错误。但是，如果您想看到它们，您只需要询问即可。

现在，每次我尝试做类似的事情

```
operations.insert(x) //assuming x is a struct that exists. 
```

或者

```
operations[i].key; //assuming i is a declared and initialized index. 
```

它给了我`error C2228: left of (fill in the blank) must have class/struct/union` 和`error C2109: subscript requires array or pointer type`

我已经看过一个关于这个问题的先前线程，我认为我的问题是编译器将我提供的第一行代码作为声明，但没有初始化。但是我没有看到解决方案。在我的脑海中，唯一的解决方案是让它成为一个指针并使用`= new ...`，但在我的脑海里，关键字`new`是肮脏的同义词，所以我只是想把它变成一个对象。有什么办法可以解决这个问题？或者我错了，这与对象类型是 a 有关，`struct`因为这是我第一次使用`struct`s。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:12:08.453

这一行：

```
ArrayList<Operation> operations(); 
```

声明一个返回的函数`ArrayList<Operation>`

这通常被称为[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

要声明您的`ArrayList<Operation>`，请删除括号：

```
ArrayList<Operation> operations; 
```

# forms - 如何在所有浏览器中使用 jquery 上传图片

> ID：13615295
> 
> 赞同：0
> 
> 时间：2012-11-28T22:10:36.947
> 
> 标签：forms, jquery, file-upload

我目前正在创建一个涉及文件上传器的表单。目前，我的表单只使用 multipart 和 post 就可以了，但在以后的迭代中，有必要使用 ajax 发布表单，以便在提交表单之前编辑图像。

我已经看到了很多关于多个文件的事情，比如 jquery-file-upload 和 swf 以及带有 uploadify 的 php 和一大堆非 IE 7+ 解决方案。然而，这些不适用于这个特定的项目，我真的只是在寻找没有什么需要处理的简单框架，只需将图像数据发送到端点。

以可以支持所有浏览器的方式执行此操作的最佳方法是什么。

=====编辑=====

我还没有完全测试过这个但是这个解决方案对我来说似乎很好 [https://github.com/francois2metz/html5-formdata](https://github.com/francois2metz/html5-formdata)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T05:48:50.020

Fine Uploader 是一个提供跨浏览器上传功能的库。Ajax/xhr 发布请求用于所有支持文件 api 的浏览器。否则，使用基于表单的上传方法。没有使用或不需要闪光灯。这对用户来说都是透明的。查看[fineuploader.com](http://fineuploader.com)了解更多详情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T22:18:05.387

您不能通过 AJAX 请求发送文件，这是不可能的。如果您使用可以工作的 HTML5 File API，但正如您在问题中所述，您需要支持旧浏览器。所以我认为你要么必须使用 Flash（uploadify 也使用 Flash），要么你没有任何其他选择。

你可以看看这个问题/答案：

[jQuery Ajax 文件上传](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

# search-engine - 使用 Google Drive Site Publishing 发布的 HTML 内容是否被搜索引擎编入索引？

> ID：13615299
> 
> 赞同：2
> 
> 时间：2012-11-28T22:11:11.243
> 
> 标签：search-engine, google-drive-api, google-docs, google-search

参考：http: [//googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html](http://googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html)

使用 Google Drive Site Publishing 发布的 HTML 内容是否被搜索引擎编入索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:51:47.303

是的，只要文件是公开共享的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T00:14:34.363

不，请参阅 Robots.txt 文件。

[https://googledrive.com/robots.txt](https://googledrive.com/robots.txt)

用户代理：* 禁止：/

# c++ - 将 GPUJPEG 项目移植到 Windows

> ID：13615302
> 
> 赞同：4
> 
> 时间：2012-11-28T22:11:14.250
> 
> 标签：c++, windows, cuda

我目前正在尝试将 GPUJPEG（[在 sourceforge 上](http://sourceforge.net/projects/gpujpeg/)）库（基于 CUDA）从 Unix 移植到 Windows。

现在我被卡住了-我不知道发生了什么或为什么会发生，但是当我运行测试项目时，控制台卡在了闪烁...

您可以在此处找到整个 Visual Studio 2010 项目（您需要 CUDA 5）： [wingpujpeg.zip](https://dl.dropbox.com/u/6843862/wingpujpeg.zip)

如果有人可以检查一下并帮助我将这个东西移植到 Windows，我会非常高兴。

提前致谢。

编辑：我想使用/创建一个高性能库来转换实时数据（将 60 fps bmp 文件转换为 jpeg）。这就是为什么“通用”库没有多大用处的原因。这是关于在大约 10 毫秒内将高清图像转换为 jpeg ......如果有人有其他想法，我当然想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:09:25.653

我认为问题在于您正在从 Visual Studio 运行它以进行调试（F5）。如果您只是运行它（Ctrl+F5），它应该会完成。

起初我认为这是其他问题（删除了我的答案），但它太慢了。缓慢是由于 CUDA 驱动程序调用 malloc/free 方式过多，导致调试运行时分配器变慢了很多。

默认情况下，此分配器在您执行 F5 时启动。如果您想禁用它，请放入您的环境设置（属性 -> 调试 -> 环境 this_NO_DEBUG_HEAP=1）。

也看这里[设置_NO_DEBUG_HEAP](https://stackoverflow.com/questions/6486282/set-no-debug-heap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T16:29:32.547

这不完全是一个答案，但因为我还不能评论：如果您正在寻找在 CUDA 上运行的 JPEG 的实现，NPP 库支持标准 JPEG 编解码器管道的各种部分，它包含在CUDA。查看 CUDA SDK 中的“jpegNPP”示例：http: [//docs.nvidia.com/cuda/cuda-samples/](http://docs.nvidia.com/cuda/cuda-samples/)

# java - 有没有办法在游戏循环中进行随机滴答？

> ID：13615304
> 
> 赞同：2
> 
> 时间：2012-11-28T22:11:22.943
> 
> 标签：java, random, game-loop

我正在制作的游戏需要随机刻度。有没有办法我可以做到这一点？我不希望它基于我的游戏的滴答率（平均每秒 60 次滴答），因为我需要一个角色的随机移动。也许我可以使用一些 Notch 的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:49:20.120

`javax.swing.Timer`以固定速率运行；在侦听器中，使用随机变量来决定是否发生某事，例如`nextBoolean()`50% 的概率、`nextInt(3)`33% 的概率等。这里有一个相关的[示例](https://stackoverflow.com/a/3484251/230513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T03:45:17.913

您有两个主要选择；

1.  您可以存储一个随机值，并在每个滴答时将其递减（减一）。当它达到零时；执行您想要的操作，并为变量分配一个新的随机数。冲洗并重复。
    *   这有效地为您提供了一个随机的 psudo-tick，完全在现有计时机制的限制范围内。
2.  忽略滴答声；随机动作不需要随机间隔，只需要随机机会。
    基本上，每跳一次，你就有机会决定一个新的行动，如果机会成功，你就为实体选择一个新的行动。
    *   通常会根据他们执行*当前*操作的时间来修改机会；因此，一个实体“坐下”的时间越长，他们就越有可能转向其他事物。

您可能还想在[state-machines](http://www.gamedev.net/page/resources/_/technical/general-programming/finite-state-machines-and-regular-expressions-r3176)上查找材料，因为它是为游戏角色实现简单 AI 的常用方法（这似乎是您正在做的事情）。

# facebook-like - Like Button 会计算 PDF 之类的点数，但实际上并未发布活动？

> ID：13615310
> 
> 赞同：1
> 
> 时间：2012-11-28T22:11:49.247
> 
> 标签：facebook-like, social-networking

我在页面上实现了一个赞按钮，试图让用户“推荐”一个 PDF。该按钮出现在页面上，并且似乎可以正常工作。点击按钮打开评论框；并且用户可以输入评论。然而，测试用户的页面上实际上并没有发布任何活动。计数器甚至会正确递增，并且在测试用户单击它后禁用“推荐”操作。重新加载时会记住此状态，并且永远不会重置计数器。

```
<div class="fb-like" data-href="www.bgsd.com/hockey/stats/2012/
East_Side_Hockey_Fall2012.pdf" data-send="false" data-layout="button_count" 
data-width="70" data-show-faces="false" data-action="recommend"></div> 
```

这个按钮不能应用于这种类型的资源（PDF）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:40:33.727

好吧，PDF 不可能有 Facebook 使用的元标记来显示有关该 URL 的故事 - 当您将 URL 放入[Facebook 的调试工具](https://developers.facebook.com/tools/debug)时，您会看到。您可能应该/可以将 Like 插件指向一个 URL，该 URL 具有指向 PDF 的下载链接（或重定向），而不是指向 PDF URL 本身

# oauth-2.0 - 尝试通过 API 密钥授权访问 Google BigQuery

> ID：13615311
> 
> 赞同：5
> 
> 时间：2012-11-28T22:11:50.980
> 
> 标签：oauth-2.0, google-bigquery

我尝试通过此请求从我的网络服务器通过 REST API 访问 BigQuery，例如：

[https://www.googleapis.com/bigquery/v2/projects/project%3Aid/queries?fields=rows&key=](https://www.googleapis.com/bigquery/v2/projects/project%3Aid/queries?fields=rows&key=) {YOUR_API_KEY}

作为 {YOUR_API_KEY}，我使用来自 Google API 控制台的服务器应用程序的 API 密钥，但我得到“401 Unauthorized”

在没有用户交互进行身份验证的情况下从服务器执行此请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T04:28:51.843

Google BigQuery 不支持通过 API 密钥授权进行访问。相反，您应该使用与您尝试对应用程序执行的操作相匹配的 OAuth 流程。[请在此处](https://developers.google.com/bigquery/docs/authorization)查看 BigQuery 授权文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T23:44:10.137

在不了解您的实现语言的情况下，我只能将您指向 google 文档：[https](https://developers.google.com/bigquery/) ://developers.google.com/bigquery/ ，它相当全面。

如果您使用 c#，那么您可以在此处查看 SO [Google OAuth2 Service Account Access Token Request Gives 'Invalid Request' Response](https://stackoverflow.com/q/11939026/1048369)

# python - Python if 语句没有找到价值

> ID：13615316
> 
> 赞同：0
> 
> 时间：2012-11-28T22:11:58.140
> 
> 标签：python, if-statement, boolean

我已经构建了自己的`User`具有属性的类`userID`。我覆盖了`__repr__`它，使它成为`userID`字符串。

`self.users = []`在另一个类中，我有一个带有几个`User`实例的数组。出于测试目的，我给了他们用户 ID 1 和 2。我使用：

```
'[%s]' % ','.join(map(str, self.users)) 
```

要打印数组的内容，产生：

```
[1,2] 
```

我正在尝试按照以下方式进行 if 语句：

```
if "1" in self.users:
  print "True" 
```

以上是我要实现的目标的简单表示。我尝试了很多方法，但我无法让程序打印出来。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:14:44.507

你想要：

```
if any("1" in str(x) for x in self.users):
   print "True" 
```

* * *

可能更好的是：

```
if any("1" == x.userID for x in self.users):
   print True 
```

如果我正确地阅读了您的帖子。

* * *

最后，根据 的 API `User`，您可以`ID`在相等测试中使用：

```
class User(object):
    def __eq__(self,other):
       return self.userID == other
   #other methods here 
```

现在您可以像最初尝试做的那样在列表中使用`__contains__`( ) ：`in`

```
if "1" in self.users:
   print "True" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:15:01.290

`"1" in self.users`检查字符串`"1"`是否在列表中`self.users`。您正在尝试检查是否存在字符串表示为 的用户`"1"`，因此您可以尝试以下操作：

```
if '1' in map(str, self.users):
    print 'True 
```

另外，我会更改`__repr__`为`__str__`您的类定义。

`__repr__`通常返回一个可以`eval()`返回原始对象的字符串，同时`__str__`返回对象的人类可读表示。你正在做后者，所以我建议你使用`__str__`而不是`__repr__`.

我也通读了这个问题：[Python 中 __str__ 和 __repr__ 之间的区别](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:23:49.367

根据您的问题定义，听起来您正在尝试查找是否有任何用户 ID 属性为“1”的用户。

您的`__repr__`函数恰好使用 the`userID`作为表示的事实确实意味着这是搜索它的最佳方式。为什么不只是这个？

```
if any(user.userID == '1' for user in self.users):
    print "True" 
```

`str`当然，如果您确实需要搜索字符串表示形式，请使用 mgilson 或 Blender 发布的答案（并弄清楚`repr`您想要哪个）。但如果没有必要，请不要这样做。

# asp-classic - 使用 Classic ASP 将表数据导出到 Excel 的问题

> ID：13615323
> 
> 赞同：2
> 
> 时间：2012-11-28T22:12:22.000
> 
> 标签：asp-classic, vbscript

我有一个报告页面，它有两个标签、两个下拉列表、一个命令按钮和一个用于显示数据的表格。问题是，在将数据导出到 excel 时，标签和下拉列表也与表格一起导出。

如何只导出表格而不导出任何 html 控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:56:46.170

最好通过 FileSystemObject 将表的内容导出到 excel 文件中。

例如 ：

```
 dim vPath , vRecordset
    vPath = "reports/" & objFileSystem.GetTempName & ".xls"
    set vRecordset= DBConnection.Execute(SqlQueryString)

    set objFileSystem = Server.CreateObject("Scripting.FileSystemObject")
    set objFile= objFileSystem.OpenTextFile(Server.MapPath(vPath),8,true,-1)

    dim strHeader,strLine
    strHeader = "<table border=1><tr>"
    strLine = ""

    for each col in vRecordset.fields
        strHeader = strHeader &"<th bgcolor=#bed9fa><b>" & col.name & "</b></th>"
    next
    objFile.WriteLine strHeader & "</tr>"

    do while not vRecordset.eof
        strLine = "<tr>"
        for each col in vRecordset.fields
            strLine = strLine & "<td>" & col.value &  "</td>"
        next
        objFile.WriteLine strLine & "</tr>"
    vRecordset.movenext
    loop
    objFile.WriteLine "</table>"

    response.write "<a href='"& vPath &"'>report download</a>" 
```

用户下载现有文件直接响应页面的所有内容会更加流畅。

# css - CSS过渡移动单独的DIV

> ID：13615324
> 
> 赞同：0
> 
> 时间：2012-11-28T22:12:39.893
> 
> 标签：css, transitions

我正在尝试`DIV`根据锚标记的悬停状态为 a 设置动画，但没有任何反应。有人可以告诉我哪里出错了吗？演示在底部。

```
.blue {
    background-color: aqua;
    display:block;
    width:100px;
    height:100px;
    position:absolute;
    margin-top:100px;
    -webkit-transition(margin-top 2s ease-in);
 }
a.yellow {
    background-color: yellow;
    display:block;
    width:100px;
    height:100px;
    position:absolute;
    margin-top:0px;
    -webkit-transition(margin-top 2s ease-in);
}
a.yellow:hover + .blue {
    -webkit-transition(margin-top 2s ease-in);
    margin-top:400px;
} 
```

​</p>

```
 <nav>
     <a class="yellow" href="#">YELLOW</a> 
  </nav>

  <div class="blue"></div> 
```

​ 演示：http: [//jsfiddle.net/liquidengine/btztS/](http://jsfiddle.net/liquidengine/btztS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:23:53.797

据我所知，css 中的 + 选择了第一个兄弟姐妹。我不认为它做你想做的事。

这是一个使用 jquery 在 jsfiddle 中更改背景颜色 onclick 的示例

用于更改 css 的 Jquery 片段

```
$(".yellow").hover(function () {
    $(".blue").css("margin-top","300px");
    $(".yellow").css("margin-top","400px");
});​ 
```

[http://jsfiddle.net/btztS/8/](http://jsfiddle.net/btztS/8/)

另外我认为你需要稍微更新一下你的编码风格。名为 blue 和 yellow 的类真的不应该存在，即使在演示中也是如此。另外，在 CSS 中，您应该真正使用 hex 或 rgb 来引用颜色。

这是您可能想要的代码...

[http://jsfiddle.net/btztS/7/](http://jsfiddle.net/btztS/7/)

```
.blue {
    background-color: aqua;
    display:block;
    width:100px;
    height:100px;
    position:absolute;
    margin-top:100px;
    -webkit-transition(margin-top 2s ease-in);
}

a.yellow {
    background-color: yellow;
   display:block;
   width:100px;
   height:100px;
   position:absolute;
   margin-top:0px;
   transition: margin-top 2s;
   -moz-transition: margin-top 2s; 
   -webkit-transition: margin-top 2s; 
   -o-transition: width 2s; 
}

a.yellow:hover {
     margin-top:400px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:27:02.693

仅当将要移动的元素放在要悬停的元素内时，才能执行此操作。

像：

```
<nav>
  <a class="yellow" href="#"><div class="blue"></div>YELLOW</a>
</nav> 
```

和 CSS：

```
.blue {
    background-color: aqua;
    display:block;
    width:100px;
    height:100px;
    position:absolute;
    margin-top:100px;
    -webkit-transition:margin-top 2s ease-in;
}
a.yellow {
    background-color: yellow;
    display:block;
    width:100px;
    height:100px;
    position:absolute;
    margin-top:0px;
    -webkit-transition:margin-top 2s ease-in;
}
.yellow:hover .blue {
    margin-top:400px;
} 
```

# jquery - 如何让 scrollToFix 插件限制在我的网站页脚处停止？

> ID：13615329
> 
> 赞同：0
> 
> 时间：2012-11-28T22:13:06.740
> 
> 标签：jquery, wordpress, scroll, offset

我在我的网站上使用[scrollToFix](https://github.com/bigspotteddog/ScrollToFixed)脚本在用户向下滚动页面时修复广告，并在用户到达页脚时释放（这样广告不会与页脚重叠）。但是，我下面的代码会导致广告在页面下方的三分之一到一半之间停止滚动，而不是在页脚处滚动。将其设置为滚动到容器的 outerHeight 减去页脚的高度后，它也会停在该位置。

```
$(document).ready(function() {
     $('.right').scrollToFixed({
          marginTop: $('.float').outerHeight() + 8, 
          limit: $('footer').offset().top 
     });
}); 
```

关于如何让它更准确地停止有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:38:24.800

这可能是因为您的网站在文档准备好后更改了高度，原因是字体和图像等。尝试将事件绑定到窗口`load`事件。

```
$(function() {
    $('window').on('load', function() {
        $('.right').scrollToFixed({
            marginTop: $('.float').outerHeight() + 8, 
            limit: $('footer').offset().top 
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T06:27:16.763

```
$(document).ready(function() {
     $('.right-sidebar').scrollToFixed({
     marginTop: 0,
     limit: $('.right-sidebar-parent').outerHeight() - 180 } );
    }); 
```

这对我来说可以动态限制高度。

# windows-runtime - WinRT FlipView 滚动事件

> ID：13615330
> 
> 赞同：2
> 
> 时间：2012-11-28T22:13:11.247
> 
> 标签：windows-runtime

是否有可能知道，当 FlipView 前后滑动时，屏幕上当前显示的是什么项目？我能看到的唯一相关事件是 SelectionChanged，它仅在 FlipView 停止时引发，而不是在该人快速翻阅多个项目时引发。我想实现一个“页码”指示器，即使 FlipView 没有停止，它也会发生变化。我正在使用 C++/CX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:24:47.740

您可以检查作为 FlipView 控件模板一部分的 ScrollViewer。要获得控件 - 您将使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.visualtreehelper.getchildrencount.aspx?cs-save-lang=1&cs-lang=cpp#code-snippet-1)扫描可视化树以查找它。那么也许 ScrollViewer 的[ViewChanged](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.scrollviewer.viewchanged)事件会让您查看 FlipView 是否被操纵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T17:38:41.040

如果您只想显示页码，则可以将显示页码的 TextView DataBind 到 FlipView 的 SelectedIndex 属性。您需要创建一个将 SelectedIndex 加 1 的 ValueConverter，但这只需一分钟。

# android - 从 Web 安装 android apk 应用程序

> ID：13615331
> 
> 赞同：1
> 
> 时间：2012-11-28T22:13:11.987
> 
> 标签：android, web, installation, apk

我想将我自己的 Android 应用程序作为 .apk 文件发布到网页上。

我使用普通的 a href 链接到文件。

我用以下行创建了一个 .htaccess 文件：

```
AddType application/vnd.android.package-archive apk 
```

哑剧类型似乎有效。Chrome（在 PC 上）按预期报告类型。

但是，当我单击 Nexus 7（Android 4.2）中的链接时，它会打开一个对话框，显示“使用完成操作？”

在这里我可以选择“Chrome”——这会产生一个相同的对话框。

我尝试安装 Dolphin 浏览器，它提供了保存文件 - 之后可以通过单击下载的文件进行安装。但我宁愿不强迫人们下载另一个程序来安装我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:23:40.077

说来也怪？！

Chrome 停止提问，现在每次我点击它时它都会愉快地下载文件。不知道发生了什么。感谢您的回复。

# c# - c# 将列表项的索引从一个表单传递到另一个表单

> ID：13615334
> 
> 赞同：-3
> 
> 时间：2012-11-28T22:13:22.073
> 
> 标签：c#, winforms

在c#中，你如何编写代码，以便当用户在列表框中选择一个项目并单击编辑时，它的数据显示在另一个窗体中的单独文本框中？我猜想在两种形式之间传递选定的索引是必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:17:10.383

我认为您可以创建一个表单并设置一个字符串属性。每次单击编辑按钮时，只需将该项目的文本传递给表单的构造函数。

# oracle - 创建 PL/SQL 过程时出现“无效的 SQL 语句”

> ID：13615337
> 
> 赞同：1
> 
> 时间：2012-11-28T22:13:35.513
> 
> 标签：oracle, stored-procedures, plsql

在 Oracle DB 中，我有以下两个表：

```
Task (TaskID, ..., AuthorID)
Author (AuthorID, level) 
```

其中`AuthorID`in`Task`代表编写任务的作者。现在我编写了以下程序，即应该`level`根据作者编写的任务数更新 -Attribute。

```
CREATE OR REPLACE PROCEDURE profil_level
IS
    CURSOR c1 IS SELECT AuthorID, COUNT(AuthorID) as Total FROM Task
       GROUP BY AuthorID;
    result c1%ROWTYPE;
BEGIN
    OPEN c1;
        LOOP
        FETCH c1 INTO result;
        EXIT WHEN c1%NOTFOUND;

      IF(result.Total = 2 OR result.Total = 3) THEN
        UPDATE TABLE Author SET level = 'advanced' 
            WHERE AuthorID = result.AuthorID;
      END IF;

      IF(result.Total >= 4) THEN
        UPDATE TABLE Author SET level= 'proficient'
            WHERE AuthorID = result.AuthorID;
      END IF;
    END LOOP;
  CLOSE c1;
END; 
```

试图执行这个语句，我得到了大量的错误，比如

> 无效的 SQL 语句

例如对于线`result c1%ROWTYPE`或`FETCH c1 into result`。此外，我得到了错误

> PLS-00103：在预期以下情况之一时遇到符号“文件结尾”：...

为行`BEGIN OPEN c1`。我无法弄清楚我的代码有什么问题。我已经阅读了 Oracle 和其他站点上的教程，但在我目前看到的每个示例中，它们都使用了完全相同的语法。我是否需要更改“分隔符”（例如在 MySQL 中）？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:54:25.820

我刚刚发现了问题：if 子句中的更新语句是错误的。它应该是：

```
UPDATE Author SET level = 'advanced' 
            WHERE AuthorID = result.AuthorID; 
```

代替

```
UPDATE TABLE Author SET level = 'advanced' 
            WHERE AuthorID = result.AuthorID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:28:13.303

错误 #1：LEVEL 是 PL/SQL 中的保留字

我尝试了没有 IF 的其余代码，它看起来不错 - 所以这将编译（见下文）。是的，IF 有 UPDATE TABLE - TABLE 这个词不应该在那里（错误 #2）

** 只是不要使用 LEVEL 作为列名。**

```
CREATE OR REPLACE PROCEDURE profil_level
IS
    CURSOR c1 IS SELECT FIELD1, COUNT(FIELD1) AS TOTAL FROM T1
      GROUP BY FIELD1;
    result c1%ROWTYPE;
BEGIN
    OPEN c1;
        LOOP
        FETCH c1 INTO result;
        EXIT WHEN c1%NOTFOUND;

        END LOOP;
    CLOSE c1;
END; 
```

# php - 在 PHP 中调试的正确方法是什么

> ID：13615338
> 
> 赞同：0
> 
> 时间：2012-11-28T22:13:39.397
> 
> 标签：php, debugging, web

我主要用python（pylons，pyramid）编程，但最近我在一些magento商店工作。因此，在 python 中，当出现问题时，我通常会通过打印行（类似于`print "#"*20, some_variable`）来进行调试。

在 PHP 中，我知道我可以`echo`等等`print_r`。但是当控制器或块中出现问题时，我该如何调试呢？`print`我也可以使用python中的某种函数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:17:21.103

您可以使用真正的调试器（XDebug）并像男人一样调试，带断点:)

在更简单的情况下，这两个快捷方式（在 Eclipse 中定义为模板为 vde/dae（var_dump 退出，打印数组退出））似乎是我最好的朋友：

```
echo '<pre>', var_dump($var), '</pre>'; exit;
echo '<pre>', print_r($var, true), '</pre>'; exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:25:08.970

PHP 允许 echo 和 print_r，也可以在代码中的任何地方看到 var_dump。

除了有利于快速错误搜索的变量输出之外，您还可以使用 php 扩展（如 xdebug）和支持此功能的开发环境进行可视化调试。（我最喜欢的是 IntelliJ PHPStorm）

可视化调试允许您在代码中设置断点并直观地浏览您的代码，同时您可以看到所有变量内容、调用堆栈等 - 可爱的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:16:36.627

对您当前方法的一个小改进是使用 error_log()。此输出将输出到日志文件（通常是 /var/log/httpd/error_log），而不是输出到您的屏幕。

# angularjs - AngularJS：当元素太大时如何隐藏它？

> ID：13615339
> 
> 赞同：0
> 
> 时间：2012-11-28T22:13:48.430
> 
> 标签：angularjs

[http://plnkr.co/edit/roJC9X](http://plnkr.co/edit/roJC9X)

请参阅上面的链接。当文本区域的宽度超过 400 像素时，我想隐藏文本区域。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T03:17:04.197

当您使用 Angular 并处理与视图相关的代码时，您需要定义一个`directive`.

下面的代码是该指令的示例（用 CoffeeScript 编写）：

```
angular.module('yourAppName').directive('hideOnExceed', ->
  return {
    restrict: 'A', 
    link: (scope, element, attr) ->
      element.bind 'resize', ->
        if element.width() > 400
          element.hide()
        else
          element.show()
  }
) 
```

然后简单地定义`hideOnExceed`为 textarea 标签的属性：

`<textarea ng-show="withinSize()" hideOnExceed>{{size}}</textarea>`

# javascript - Google Maps API 标记和缩放

> ID：13615342
> 
> 赞同：0
> 
> 时间：2012-11-28T22:14:01.053
> 
> 标签：javascript, api, google-maps-api-3, google-maps-markers

我是 Google Maps API 的新手。

我的情况：以全屏谷歌地图为背景的网站。

第一个问题：如果用户向下滚动或缩小太多，就会出现灰色背景。是否可以限制最大缩小，并且他不能滚动？或者可以垂直重复地图（带有标记）。如果可以设置最大缩小并将他锁定在地图中，我如何动态计算与屏幕分辨率相关的最大缩小？

第二个问题：是否可以将自定义 javascript 添加到标记？示例：我创建了 5 个标记，每个标记都应包含一个自定义值（来自数据库的 ID）。点击我自己的函数应该用自定义值作为参数调用并做一些事情。

编辑：这就是我所说的灰色：（谷歌地图的垂直“末端”） ![谷歌地图的垂直端](../Images/84bf5283598001e3986f9d23d96d5189.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:20:11.757

1.  [地图](https://developers.google.com/maps/documentation/javascript/reference#Map)对象有属性 maxZoom，在地图创建时设置

2.  是的，这是可能的，您可以添加点击事件，更改打开的弹出窗口，并且由于它是 javascript，您可以添加任何其他数据，就像`markr.MyData = 'something interesting'`

我不确定你的意思是什么灰色部分？我在谷歌地图中看不到最大和最小缩放的灰色部分

![在此处输入图像描述](../Images/80452d743e7bab1435775cf3c18f5904.png)

![在此处输入图像描述](../Images/541fe7bb4104845c76b7c4a09645dd39.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T01:57:07.557

好的。终于成功了！:)

修复灰色区域（处理也缩放）：

```
function setBounds() {
    google_allowedBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(-85.000, -122.591),
    new google.maps.LatLng(85.000, -122.333));
    google_lastCenter = google_map.getCenter();
    google_lastZoom = google_map.getZoom();
    google.maps.event.addListener(google_map, "bounds_changed", function () {
        checkBounds();
    });

    google.maps.event.addListener(google_map, 'center_changed', function () {
        checkBounds();
    });
}

function checkBounds() {
    if (google_allowedBounds.getNorthEast().lat() > google_map.getBounds().getNorthEast().lat()) {
        if(google_allowedBounds.getSouthWest().lat() < google_map.getBounds().getSouthWest().lat()) {
            google_lastCenter = google_map.getCenter();
            google_lastZoom = google_map.getZoom();
            return true;
        }
    }
    google_map.panTo(google_lastCenter);
    google_map.setZoom(google_lastZoom);
    return false;
} 
```

标记点击处理程序：

```
google_listener = google.maps.event.addListener(marker, 'click', markerHandler);

function markerHandler(event) {
    window.console.log(this);
} 
```

# neo4j - 来自密码查询的链式关系的返回顺序

> ID：13615344
> 
> 赞同：1
> 
> 时间：2012-11-28T22:14:06.623
> 
> 标签：neo4j, cypher

假设我的图表中有以下路径：

```
user-[:NEXT]->message(n)-[:NEXT]->message(n-1)-[:NEXT]->...-[:NEXT]->message1-[:NEXT]->message0 
```

在这种情况下，我可以依赖以下查询中返回的消息实体的顺序吗？会永远一样吗？

```
start user=node(userNode) match user-[:NEXT*]->message return message 
```

那么什么时候`Paging`添加呢？有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:22:44.467

100% 确定，您可以像这样使用 length() 函数：

```
start user=node(userNode) match user-[r:NEXT*]->message return message order by length(r) asc; 
```

这将首先为您提供最短路径的列表。从最后得到它，只需使用`order by length(r) desc`

# jquery - 包含 ol 或 ul 的 li 排序失败并出现 HierarchyRequestError：节点无法插入到层次结构中的指定点

> ID：13615347
> 
> 赞同：0
> 
> 时间：2012-11-28T22:14:18.267
> 
> 标签：jquery, sorting, append, appendchild

我正在使用 CKEditor 创建富文本并将生成的 html 嵌入到无序列表 (ul) 中的 li 中包含的 div 中。我使用 jQuery 和各种比较对 li 进行排序。当富文本本身包含 ul 或 ol 时，CKEditor 将允许，排序失败并在 FF Firebug 中显示消息：

“HierarchyRequestError：节点不能在线插入层次结构中的指定点”

并引用 jQuery 中的这段代码：

```
append: function() {
    return this.domManip(arguments, true, function( elem ) {
        if ( this.nodeType === 1 || this.nodeType === 11 ) {
            this.appendChild( elem );
        }
    });
}, 
```

当 html 不包含任何 ul 或 ol 时，排序工作正常。

这是 HTML 上下文：

一个无序列表，其中每个 li 都被归类为“RetailerSearchSectionLine”，并且包含 div，其中包含作为 html 的富文本。

这是失败的 jQuery 排序函数之一：

```
var TransferArray = $(".RetailerSearchSectionLine").toArray().sort(function(a, b)
{
    var distance1 = $(a).data("DistanceFromReferenceLocation");
    var distance2 = $(b).data("DistanceFromReferenceLocation");
    return (distance1 - distance2);
});
$("#RetailerSearchSectionBody ul").append(TransferArray); 
```

有什么建议么？我正在考虑对数组的键进行排序，然后根据排序结果重新排列 ul 。但是，如果列表中的列表存在一些我没有看到的基本问题，那么这实际上可能不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:55:34.183

线

```
$("#RetailerSearchSectionBody ul").append(TransferArray); 
```

看起来不正确，因为`$("#RetailerSearchSectionBody ul")`可能会选择一个集合（包括子 UL）而不是唯一元素。

以下应该安全地选择一个独特的元素：

```
$("#RetailerSearchSectionBody").children("ul").eq(0).append(TransferArray); 
```

如果这不起作用，那么可以说对原始 jQuery 包装的元素执行排序而不是分解成真正的数组更正常，如下所示：

```
Array.prototype.sort.call($(".RetailerSearchSectionLine"), function(a, b) {
    var distance1 = $(a).data("DistanceFromReferenceLocation");
    var distance2 = $(b).data("DistanceFromReferenceLocation");
    return (distance1 - distance2);
}).each(function(i, item) {
    $("#RetailerSearchSectionBody").children("ul").eq(0).append(item);
}); 
```

您采用哪种方法可能是学术问题，因为排序本身似乎不是问题。无论如何，这是您可以尝试的其他方法。

# android - 在 Android 和 SQlite 中从未显式调用 close()

> ID：13615348
> 
> 赞同：5
> 
> 时间：2012-11-28T22:14:18.213
> 
> 标签：android, sqlite

我在 stackoverflow 上查看了很多关于这个错误的帖子，看起来修复是覆盖 onDestroy() 方法并关闭数据库。但这在我的情况下似乎不起作用。当 Eclipse 最初在我的手机上运行应用程序时，我实际上没有收到任何错误，但是当我关闭应用程序并在手机上重新启动它时 - 这就是`close() was never explicitly called on database`LogCat 中出现的时候。我正在调用我的资产文件夹中的外部数据库，不确定这是否与它有关。

**数据库适配器：**

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DBAdapter extends SQLiteOpenHelper {

public static final String KEY_ROWID = "_id";
public static final String KEY_HDATE = "date";
public static final String KEY_MONTHDAY = "monthday";
public static final String KEY_YEAR = "year";
public static final String KEY_HD = "happened";

// The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.vdm.whtt/databases/";
private static String DB_NAME = "wht.db";
private static final String DB_TABLE = "historydaytable";

private SQLiteDatabase db;

private final Context ourContext;

public DBAdapter(Context context) {
    super(context, DB_NAME, null, 1);
    this.ourContext = context;
}

public void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }
    }

}

private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        // database does't exist yet.
    }

    if (checkDB != null) {
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException {
    InputStream myInput = ourContext.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void open() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    db = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if (db != null)
        db.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);
    onCreate(db);
}

public String[] getTH(long aLong) { 
    String[] columns = new String[] { KEY_YEAR, KEY_MONTHDAY, KEY_HD };
    Cursor cursor = db.query(DB_TABLE, columns, KEY_HDATE + "=" + aLong,
            null, null, null, null);

    if (cursor != null) {
        cursor.moveToFirst();
        String hpToday[] = new String[3];
        hapToday[0] = cursor.getString(0);
        hapToday[1] = cursor.getString(1);
        hapToday[2] = cursor.getString(2);
        cursor.close();
        this.db.close();
        return hpToday;
    }
    return null;
}

public String[] getFirstRandomAnswer(int randomNum1) {
    String[] columns = new String[] { KEY_YEAR, KEY_MONTHDAY, KEY_HD };
    Cursor cursor = db.query(DB_TABLE, columns, null,
            null, null, null, null);
    if (cursor != null) {
        cursor.moveToPosition(randomNum1);
        String r1Str[] = new String[3];
        r1Str[0] = cursor.getString(0);
        r1Str[1] = cursor.getString(1);
        r1Str[2] = cursor.getString(2);
        cursor.close();
        this.db.close();
        return r1Str;
    }
    return null;
}

public String[] getSecondRandomAnswer(int randomNum2) {
    String[] columns = new String[] { KEY_YEAR, KEY_MONTHDAY, KEY_HD };
    Cursor cursor = db.query(DB_TABLE, columns, null,
            null, null, null, null);
    if (cursor != null) {
        cursor.moveToPosition(randomNum2);
        String r2Str[] = new String[3];
        r2Str[0] = cursor.getString(0);
        r2Str[1] = cursor.getString(1);
        r2Str[2] = cursor.getString(2);
        cursor.close();
        this.db.close();
        return r2Str;
    }
    return null;
}
} 
```

**主要活动：**

```
 import java.io.IOException;
import java.util.Locale;
import java.util.Date;
import java.text.ParseException;
import java.text.SimpleDateFormat;

import android.os.Bundle;
import android.text.Html;
import android.widget.TextView;
import android.app.Activity;
import android.database.SQLException;

public class MainActivity extends Activity {
private DBAdapter dba;
TextView hiddenDBdatetv, todayIstv, optionAtv;
String MMdStr;
String[] todayArray;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    hiddenDBdatetv = (TextView) findViewById(R.id.hiddenDBdate_TV);
    todayIstv = (TextView) findViewById(R.id.todayIs_TV);
    optionAtv = (TextView) findViewById(R.id.optionA_TV);

    dba = new DBAdapter(this);

    try {
        dba.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        dba.open();
    } catch (SQLException sqle) {
        throw sqle;
    }

    getMMdDate();
    getTH();
}

private void getMMdDate() {
    Date anotherCurDate = new Date();
    SimpleDateFormat formatter = new SimpleDateFormat("MMd", Locale.US);
    MMdStr = formatter.format(anotherCurDate);
    SimpleDateFormat dateFormat = new SimpleDateFormat("MMd");
    Date myDate = null;
    try {
        myDate = dateFormat.parse(MMdStr);
    } catch (ParseException e) {
        e.printStackTrace();
    }
    SimpleDateFormat timeFormat = new SimpleDateFormat("MMMMMMMMMM d");
    String finalDate = timeFormat.format(myDate);
}

private void getTH() {
    long aLong = Long.parseLong(MMdStr);
    dba.open();
    todayArray = dba.getTH(aLong);
    dba.close();
    optionAtv.setText(todayArray[2]);
}

@Override
protected void onDestroy() {
    dba.close();
    super.onDestroy();
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:19:57.430

您将在`createDatabase()`(when `dbExist == false`) 中留下一个打开的数据库，并且您正在 (再次) 在 中打开您的数据库`onCreate()`，然后在`getTH()`...

避免此错误的诀窍是跟踪数据库何时已打开，并确保在使用完毕后将其关闭。[`isOpen()`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#isOpen%28%29)如果您发现自己多次打开数据库，请考虑在尝试打开数据库之前进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:26:07.417

在 getFirstRandomAnswer(int randomNum1) 和 getSecondRandomAnswer(int randomNum2) 方法中，尝试在 if 语句之外关闭游标和 db。而不是检查光标是否为空，只需使用 moveToFirst() 方法：

```
if (cursor.mnoveToFirst) {  // Means that cursor is not equal to null
    cursor.moveToPosition(randomNum2);
    String r2Str[] = new String[3];
    r2Str[0] = cursor.getString(0);
    r2Str[1] = cursor.getString(1);
    r2Str[2] = cursor.getString(2);
}

    cursor.close();
    this.db.close();

    return r2Str; 
```

# java - JAX-WS 处理超时的最佳方式

> ID：13615349
> 
> 赞同：3
> 
> 时间：2012-11-28T22:14:21.107
> 
> 标签：java, spring, jax-ws

我在 Spring 中使用 jax-ws。客户端是一个 JMS 消费者应用程序，它将调用服务器以执行一些附加处理，包括发送电子邮件。我未能处理的一种情况是，如果在“服务器”应用程序重新启动时有消息通过消费者。现在客户端将超时，消息不会被完全处理。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T15:46:13.787

设置一个[死信队列](http://www.eaipatterns.com/DeadLetterChannel.html)，您将在其中放置由于某种原因无法处理的消息/Web 服务请求。您现在可以开发一个计划服务，该服务将定期轮询死信队列以重试发送消息。

确保将您的客户端设置为正常超时（有关超时配置的详细信息，请参阅 [此答案](https://stackoverflow.com/a/3851784/1530938)）并为您的死信队列使用持久存储（文件/数据库）

# git - 如何在 jgit 中编写 show-ref 命令？

> ID：13615350
> 
> 赞同：2
> 
> 时间：2012-11-28T22:14:20.117
> 
> 标签：git, jgit

JGit 没有用于获取所有分支的当前引用的 ShowRefCommand。有没有办法使用 jgit 编写 ShowRef？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T23:39:39.330

应该是微不足道的。首先，格式只是对 '.git/refs' 目录中文件的迭代，因此您可以使用 shell 脚本来完成：

```
find refs -type f | awk -- '{print "echo `cat " $1 "` "  $1 }' | sh 
```

但是，在 JGit API 中，您可以通过迭代存储库的引用来执行相同的操作，该引用由“getAllRefs”命令返回：

```
Map<String, Ref> refs = repo.getAllRefs();
Set<Entry<String, Ref>> values = refs.entrySet();
for (Entry<String, Ref> entry : values) {
    System.out.println(entry.getValue().getObjectId().getName() + " " + entry.getValue().getName());
} 
```

随意将其贡献给 JGit！

# image-processing - 用于空间过滤的填充矩阵

> ID：13615357
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:15:01.530
> 
> 标签：image-processing

例如，我有一个 2x2 矩阵

```
1 2
3 4 
```

然后我用 2 填充它，它变成，

```
x x x x x x 
x x x x x x
x x 1 2 x x
x x 3 4 x x
x x x x x x
x x x x x x 
```

然后我使用border_replicate将值填充到x

```
x x 1 2 x x
x x 1 2 x x
1 1 1 2 2 2
3 3 3 4 4 4
x x 3 4 x x
x x 3 4 x x 
```

问题在于位于新矩阵顶点的x，如果我使用border_replicate，它们的值是多少？……

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:57:36.573

根据您的示例，角（从左上角顺时针方向）看起来是 1、2、4 和 3。

# c# - 等效于 C# 中的 Class_Terminate()

> ID：13615358
> 
> 赞同：0
> 
> 时间：2012-11-28T22:15:05.783
> 
> 标签：c#

在 VB 6.0 中，我有一个类：

```
Private Sub Class_Terminate()
  Call MethodFoo(False)
  Set objet1 = Nothing
  Set object2 = Nothing
End Sub 
```

现在我需要在 C# 中做同样的事情，我不太担心这两个空对象，但是那个被调用的该死的 MethodFoo() 我需要那个。在其 C# 等效类中添加它的安全位置在哪里？（而不是在终结器方法中），由于在我的 C# 类中有这个终结器方法并且我也想摆脱它，我已经遇到了奇怪的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:16:40.247

C# 是垃圾收集，这意味着没有确定性的对象清理。

相反，您应该在块`IDisposable`内实现和使用您的类。[`using()`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:20:31.367

在 C# 中应避免使用自定义终结器，因为垃圾收集器会不确定地调用它们。

实现`IDisposable`接口和使用`Dispose()`方法。**[这](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)**是一篇如何正确执行此操作的文章。

# .net - 如何在 SmartInspect 中创建视图？

> ID：13615359
> 
> 赞同：0
> 
> 时间：2012-11-28T22:15:08.267
> 
> 标签：.net, logging, smartinspect

我觉得这应该很简单，但我无法在任何地方找到如何在 SmartInspect 中创建新视图。我什至用谷歌搜索了它，但我所看到的任何地方都只是说可以创建多个视图，但没有一个说如何。（例如：[http](http://www.gurock.com/smartinspect/tour/4/) ://www.gurock.com/smartinspect/tour/4/ ）

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T09:21:27.770

Are you using the full SmartInspect Console or the Redistributable Console (you can see this in the window title caption)? I'm asking as the Redistributable Console doesn't allow you to create additional views. For the full Console you can either right-click on an existing view tab and select New View, or directly select View | New View in the main menu or press Ctrl + T.

# ruby - 由于后台验证，DataMapper 不会保存条目

> ID：13615364
> 
> 赞同：1
> 
> 时间：2012-11-28T22:15:28.380
> 
> 标签：ruby, datamapper

仅当用户选择此选项时，我才需要将页面附加到布局。

我的意思是当用户编辑页面时，有一个下拉菜单可以从中选择布局。

如果选择了一些布局，它会很好地工作。

但是，如果用户选择`<option value='0'> None`选项，DataMapper 会抛出一个错误，说`layout_id`应该大于零。

我认为这**不应该发生，因为我建立`required: false`了`belongs_to :layout`**关联。

这是我的模型：

```
class Layout

  include DataMapper::Resource

  property :id, Serial
  property :name, String

end

class Page

  include DataMapper::Resource

  property :id, Serial
  property :name, String

  belongs_to :layout, required: false

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:05:41.850

您对“幕后”验证是正确的。

它是由`belong_to`关联自动添加的。

`layout_id`你可以通过重新定义属性来摆脱它。

在`Page`模型中只需添加：

```
property :layout_id, Integer, index: true 
```

这将保持关联，但会重新定义`layout_id`属性
，因此它不会自动添加验证。

但是请注意，这只有在`Page.auto_migrate!`

或者您可以手动从页表中删除外键。

另外，确保`layout_id`是一个索引，否则你会遇到性能问题。

# javascript - 是否可以在 HTML/JavaScript 中构建原生样式的切换按钮？

> ID：13615369
> 
> 赞同：3
> 
> 时间：2012-11-28T22:15:43.230
> 
> 标签：javascript, html, css

是否可以影响原生 HTML 的“按下”样式`<input type="button">`显示为按下状态，以便我可以使用原生样式按钮实现切换按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:20:13.123

不幸的是，您的问题的简单答案是不。

没有办法影响按钮的原生样式以显示为按下状态。

# sql - 向 HAVING 查询添加过滤器

> ID：13615370
> 
> 赞同：0
> 
> 时间：2012-11-28T22:15:47.517
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个很好的查询：

```
select distinct f.client_id
from f_accession_daily f
left join SalesDWH..TestPractices tests
on tests.ClientID=f.CLIENT_ID
where tests.ClientID is null
group by f.client_id
having max(f.received_date) between '20120601' and '20120630' 
```

**我需要将结果集限制为仅`f.client_id`在上个月的特定计数（*）`f.client_id`为 40 或更大的情况下（即在 '20120501' 和 '20120530' 之间）**

这是我尝试过的：

```
select distinct f.client_id
from f_accession_daily f
left join SalesDWH..TestPractices tests
on tests.ClientID=f.CLIENT_ID
where tests.ClientID is null
group by f.client_id
having max(f.received_date) between '20120601' and '20120630'
) NotOrderedIn6Months
on f.CLIENT_ID=NotOrderedIn6Months.CLIENT_ID
right join
(select client_id,COUNT(*) count from F_ACCESSION_DAILY
where RECEIVED_DATE between '20120501' and '20120530'
group by CLIENT_ID
having COUNT(*)>=40
) Having40
on Having40.CLIENT_ID=f.CLIENT_ID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:58:20.380

只需添加

```
AND f.client_id IN
(SELECT client_id FROM F_ACCESSION_DAILY
WHERE RECEIVED_DATE BETWEEN '20120501' AND '20120530'
GROUP BY client_id
HAVING COUNT(*) >= 40) 
```

到原始查询的 where 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:47:44.367

预先汇总上个月的数据（5 月有 31 天，而不是 30 天），然后加入其中。

```
 select f.client_id
     from f_accession_daily f
     join (
        select client_id
          from f_accession_daily
         where received_date between '20120501' and '20120531'
      group by client_id
        having count(*) >= 40
      ) A on A.client_id = f.client_id
left join SalesDWH..TestPractices tests
       on tests.ClientID=f.CLIENT_ID
    where tests.ClientID is null
 group by f.client_id
   having max(f.received_date) between '20120601' and '20120630'; 
```

另请注意，当您已经拥有 GROUP BY 时，您将不需要 DISTINCT。

# java - Java JMenuBar 未添加或未正确显示

> ID：13615371
> 
> 赞同：0
> 
> 时间：2012-11-28T22:15:51.997
> 
> 标签：java, swing, subclass, jmenubar

我正在尝试将 JMenuBar 的*子类*添加到用户界面，但由于某种原因它从未出现过。我曾尝试使用 JFrame.setJMenubar() 和 JFrame.add()，我曾尝试从 SwingUtilities.invokeLater() 调用等中添加它...在使用 JMenuBar 本身而不是子类时它仍然有效，所以我怀疑它与此有关。

这是初始化应用程序窗口的代码：

```
public DramaSimWindow() {
    initializeSelf();
    initializeContainers();
    this.setVisible(true);
}

private void initializeSelf() {
    initializeContentPane();
    this.setBounds(100, 100, 800, 500);
    this.setJMenuBar(new DramaSimMenuBar());
    this.setResizable(false);
} 
```

这是 JMenuBar 的子类，它作为私有类位于主窗口类中：

```
private class DramaSimMenuBar extends JMenuBar {

    private static final long serialVersionUID = 1L;

    public DramaSimMenuBar() {
        initializeSelf();
    }

    private void initializeSelf() {
        menuBar = new JMenuBar();
        initializeFileMenu();
        initializeEditMenu();
    }

    private void initializeFileMenu() {
        JMenu fileMenu = new JMenu("File");
        fileMenu.add(new JMenuItem("New"));
        fileMenu.add(new JMenuItem("Open"));
        fileMenu.add(new JMenuItem("Save"));
        fileMenu.add(new JMenuItem("Save as"));
        fileMenu.add(new JMenuItem("Exit"));
        menuBar.add(fileMenu);
    }

    private void initializeEditMenu() {
        JMenu editMenu = new JMenu("Edit");
        editMenu.add(new JMenuItem("Copy"));
        editMenu.add(new JMenuItem("Cut"));
        editMenu.add(new JMenuItem("Paste"));
        menuBar.add(editMenu);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:20:38.720

首先，您不应该扩展 JMenuBar。只需*创建*和*使用*JMenuBar 而不是扩展它。顺便说一句，问题是您的 JMenuBar 子类不会向自身添加菜单，而是向它创建的另一个 JMenuBar 添加菜单：

```
private void initializeSelf() {
    menuBar = new JMenuBar();
    ...
    menuBar.add(fileMenu); 
```

应该

```
private void initializeSelf() {
    ...
    this.add(fileMenu); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:21:54.873

为什么要创建一个 JMenuBar，如果您的基类是从 JMenuBar 扩展而来的，那么正确的代码如下： `private class DramaSimMenuBar extends JMenuBar {`

 ````
private static final long serialVersionUID = 1L;

public DramaSimMenuBar() {
    initializeSelf();
}

private void initializeSelf() {
    initializeFileMenu();
    initializeEditMenu();
}

private void initializeFileMenu() {
    JMenu fileMenu = new JMenu("File");
    fileMenu.add(new JMenuItem("New"));
    fileMenu.add(new JMenuItem("Open"));
    fileMenu.add(new JMenuItem("Save"));
    fileMenu.add(new JMenuItem("Save as"));
    fileMenu.add(new JMenuItem("Exit"));
    add(fileMenu);
}

private void initializeEditMenu() {
    JMenu editMenu = new JMenu("Edit");
    editMenu.add(new JMenuItem("Copy"));
    editMenu.add(new JMenuItem("Cut"));
    editMenu.add(new JMenuItem("Paste"));
    add(editMenu);
} 
```` 

`}`

# php - 我不能使用静态方法，但这似乎是合理的

> ID：13615372
> 
> 赞同：-4
> 
> 时间：2012-11-28T22:16:07.393
> 
> 标签：php, object, inheritance, static

基类：

```
abstract class Challenge
{
    abstract **static** public function getName();
} 
```

现在有两个类：

```
class ChallengeType1 extends Challenge
{
    public **static** function getName()
    {
        return 'Swimming';
    }
}

class ChallengeType2 extends Challenge
{
    public **static** function getName()
    {
        return 'Climbing';
    }
} 
```

大家可能都知道，我们不能使用`static`，但这是合理的。所以我不能那样做：例如，我有类名，所以我想知道它的名字：`ChallengeType2::getName();`- 它会失败！首先我应该构造对象 - 看起来没有必要（更不用说，这个类有什么非常复杂的初始化？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:29:23.230

事实证明你不能`static abstract`在`abstract class`. 看这里：

[为什么 PHP 5.2+ 不允许抽象静态类方法？](https://stackoverflow.com/questions/999066/why-does-php-5-2-disallow-abstract-static-class-methods)

但是你可以声明一个`interface`需要一个`static`方法。

这是一个编译的例子：

**工作示例**

```
<?php
interface IChallenge
{
    static function getName();
}

abstract class Challenge implements IChallenge
{

}

class ChallengeType1 extends Challenge
{
    public static function getName()
    {
        return 'Swimming';
    }
}

class ChallengeType2 extends Challenge
{
    public static function getName()
    {
        return 'Climbing';
    }
} 
```

# php - PHP - 验证单选按钮警报

> ID：13615373
> 
> 赞同：2
> 
> 时间：2012-11-28T22:16:13.887
> 
> 标签：php, javascript, radio

我在一个表单中输入了三个单选按钮。我希望在用户单击提交而不选择或回答所有问题时出现警报框..

这是我的表格..

```
<tr>
<th> Your attendance<font size="4" > </font></th>
<td>  <input type="radio" name ="v1" value = "4"    onclick="updateTotal();"/></td>
<td>  <input type="radio" name ="v1" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v1" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v1" value = "1"    onclick="updateTotal();" /></td>    
</tr>

<tr>
<th > Your grades  <font size="4" > </font></th>
<td>  <input type="radio" name ="v2" value = "4"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v2" value = "1"    onclick="updateTotal();" /></td>    
</tr>

<tr>
<th >Your self-control <font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "3"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "2"    onclick="updateTotal();" /></td>
<td>  <input type="radio" name ="v3" value = "1"    onclick="updateTotal();" /></td>    
</tr> 
```

我试过这个javascript代码..但它不起作用没有出现警报

```
<script type="text/javascript">
 function validateform()
  {
    if(document.getElementsByName('v1').value="")
    {
      alert('Your grades is not selected');
    return false;
    }
  }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:32:22.023

拿这个功能，你不能`document.getElementsByName('v1').value`在广播组上使用。

看看这个小提琴：http: [//jsfiddle.net/JXajh/2/](http://jsfiddle.net/JXajh/2/)

```
function isOneChecked(name)
{
    var buttons = document.getElementsByName(name);

    for (var i = 0; i < buttons.length; i++)
    {
        if (buttons[i].checked)
        {
            return true;
        }
    }

    return false;        
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:36:52.083

那是因为`getElementsByName()`将返回一个 DOM 元素数组，您无法获取值或检测是否直接从该数组检查元素。您必须遍历所有元素检查是否至少检查了一个。所以是这样的：

```
function validateForm() {
    var radiosToValidate = ['v1', 'v2', 'v3'];
    var invalidRadios = [];
    for (i = 0; i < radiosToValidate.length; i++) {
        var currentRadioArray = documentGetElementsByName(radiosToValidate[i]);
        var currentRadioIsValid = false;
        for (j = 0; j < currentRadioArray.length; j++) {
            if (currentRadioArray[j].checked) {
                currentRadioIsValid = true;
                break;
            }
        }
        if (currentRadioIsValid === false) {
            invalidRadios[] = radiosToValidate[i];
        }
    }
    if (invalidRadios.length > 0) {
        alert('At least one radio button has not been selected');
        return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-28T22:28:59.010

你的比较有一个`=`，而不是一个`==`。您正在分配和测试`""`，这是虚假的，因此您的 if 语句将永远不会执行。

*比较*两个值的运算符是`==`。

用这个：

```
if (document.getElementsByName('v1').value== "") {
  // ...
} 
```

# c++ - 链表中多项式的导数

> ID：13615375
> 
> 赞同：3
> 
> 时间：2012-11-28T22:16:23.687
> 
> 标签：c++

出于某种原因，当我试图做我的导数时，它只是做一个项目的导数，而不是整个多项式。

```
struct term{
    double coef;
    unsigned deg;
    struct term * next;
    }; 
```

我有一个结构，然后还有一个具有深拷贝构造函数和 = 构造函数的类多项式。在私人课程中，我有一个`term* ptr`

这是我的衍生代码

```
void Polynomial::derivative (Polynomial *p){
    term *x;
    if ( ptr == NULL)
        return ;
    term *temp;
    temp = ptr;
    while (temp != NULL){
       if ( ptr == NULL){
            ptr = new term ;
            x = ptr ;
        }
        else{
            x -> next = new term ;
            x = x -> next ;
        }
        x-> coef = temp -> coef * temp -> deg;
        x-> deg = temp -> deg - 1;
        temp = temp -> next;

    }
    ptr=x;
} 
```

所以当我尝试衍生`3x^4 + 3x^4 + 6x^7 + 3x^4 + 3x^4 + 6x^7 + 2x^9`我得到`18x^8`

我正在查看代码，不知道为什么它只在最后一个学期这样做，因为它是一个 while 循环，应该从开始到 NULL 并进行导数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:23:43.767

由于这两行，您将获得最后一个学期：

在你的其他情况下：

```
x = x -> next 
```

和你的最终任务：

```
ptr = x; 
```

因此，这也会泄漏内存，因为您之前分配的所有漂亮术语现在都在以太中。无论如何你都在泄露旧的，所以无论如何这真的需要重新考虑。

我强烈建议，由于您的 Polynomial 类支持完整的复制构造和赋值操作，因此您可以*从该类创建一个**新*的导数多项式，然后将*其*返回。如果调用者希望这个转换，他们可以自己。**`poly = poly.derivative();`**

 **导数生成器的示例（与变压器相反）。作为奖励，在生成导数时消除了所有常数项。

```
Polynomial Polynomial::derivative() const
{
    Polynomial poly;

    const term *p = ptr;
    while (p)
    {
        if (p->deg != 0) // skip constant terms 
        {
            // add term to poly here (whatever your method is called)
            poly.addTerm(p->coef * p->deg, p->deg-1);
        }
        p = p->next;
    }
    return poly;
} 
```

这允许这种生成：（注意 p1 未更改`derivative()`）：

```
Polynomial p1;
... populate p1...
Polynomial p2prime = p1.derivative(); 
```

对于一些真正令人愉快的事情：

```
Polynomial p1;
... populate p1...
Polynomial p2prime2 = p1.derivative().derivative(); 
```

无论如何，我希望这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T15:41:40.760

```
PolyNodeN* makeDerivate(PolyNodeN* poly)
{
    PolyNodeN* head = new PolyNodeN();
    PolyNodeN* tmp = new PolyNodeN();
    int a = poly->exp;

    int * results = new int[a];
    int * exponents = new int[a];

    for (int i = 0; i < a; i++)
    {
        results[i] = exponents[i] = 0;
    }
    for (poly; poly != nullptr; poly = poly->next)
    {
        results[poly->exp - 1] = poly->koef*poly->exp;
        exponents[poly->exp - 1] = poly->exp - 1;
    }
    head = new PolyNodeN(exponents[a - 1], results[a - 1]);
    tmp = head;

    for (int i = a - 2; i >= 0; i--)
    {
        tmp->next= new PolyNodeN(exponents[i], results[i],tmp);
        tmp = tmp->next;
    }
    tmp->next = nullptr;
    return head;
} 
```

哪个派生？简单的 ...

```
PolyNodeN* makeDerivate2(PolyNodeN* poly,int ext)
{
    PolyNodeN* temp = new PolyNodeN();
    temp = temp->makeDerivate(poly);
    for (int i = ext-1; i > 0; i--)
        temp = temp->makeDerivate2(temp, i);
    return temp;
} 
```**

# javascript - d3将文本添加到圆圈

> ID：13615381
> 
> 赞同：66
> 
> 时间：2012-11-28T22:16:46.140
> 
> 标签：javascript, svg, d3.js

我正在尝试将一些文本添加到圆圈中。我一直在关注[mbostock 教程中的示例](http://mbostock.github.com/d3/tutorial/circle.html)，但无法获得正确的输出。

代码片段是：

```
var data;
var code;

d3.json("/json/trace.json", function(json) {
  data = json;
  console.log(data);
  // get code for visualization
  code = data["code"];
  alert(code);
  var mainSVG = d3
    .select("#viz")
    .append("svg")
    .attr("width", 900)
    .attr("height", 900);
  mainSVG
    .append("circle")
    .style("stroke", "gray")
    .style("fill", "white")
    .attr("r", 100)
    .attr("cx", 300)
    .attr("cy", 300);
  circle = mainSVG.selectAll("circle").data([code]);
}); 
```

有什么建议如何完成这项工作吗？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-11-29T13:37:57.257

这是一个示例，显示了一些带有来自 json 文件的数据的圆圈文本：http: [//bl.ocks.org/4474971](http://bl.ocks.org/4474971)。这给出了以下内容：

![在此处输入图像描述](../Images/7a750b5b5e096358b30fec6be052e78a.png)

这背后的主要思想是将文本和圆圈封装在同一个“ `div`”中，就像您在 html 中所做的那样，在`div`页眉中具有相同的徽标和公司名称。

主要代码是：

```
var width = 960,
    height = 500;

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)

d3.json("data.json", function(json) {
    /* Define the data for the circles */
    var elem = svg.selectAll("g")
        .data(json.nodes)

    /*Create and place the "blocks" containing the circle and the text */  
    var elemEnter = elem.enter()
        .append("g")
        .attr("transform", function(d){return "translate("+d.x+",80)"})

    /*Create the circle for each block */
    var circle = elemEnter.append("circle")
        .attr("r", function(d){return d.r} )
        .attr("stroke","black")
        .attr("fill", "white")

    /* Create the text for each block */
    elemEnter.append("text")
        .attr("dx", function(d){return -20})
        .text(function(d){return d.label})
}) 
```

json文件是：

```
{"nodes":[
  {"x":80, "r":40, "label":"Node 1"}, 
  {"x":200, "r":60, "label":"Node 2"}, 
  {"x":380, "r":80, "label":"Node 3"}
]} 
```

生成的 html 代码显示了您想要的封装：

```
<svg width="960" height="500">
    <g transform="translate(80,80)">
        <circle r="40" stroke="black" fill="white"></circle>
        <text dx="-20">Node 1</text>
    </g>
    <g transform="translate(200,80)">
        <circle r="60" stroke="black" fill="white"></circle>
        <text dx="-20">Node 2</text>
    </g>
    <g transform="translate(380,80)">
        <circle r="80" stroke="black" fill="white"></circle>
        <text dx="-20">Node 3</text>
    </g>
</svg> 
```

带有工作代码的 jsfiddle：http: [//jsfiddle.net/chrisJamesC/DY7r4/](http://jsfiddle.net/chrisJamesC/DY7r4/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-18T18:26:42.673

扩展上面的示例以适应实际要求，其中圆圈填充纯色背景色，然后使用条纹图案 & 将文本节点放置在圆圈的中心。

```
var width = 960,
  height = 500,
  json = {
    "nodes": [{
      "x": 100,
      "r": 20,
      "label": "Node 1",
      "color": "red"
    }, {
      "x": 200,
      "r": 25,
      "label": "Node 2",
      "color": "blue"
    }, {
      "x": 300,
      "r": 30,
      "label": "Node 3",
      "color": "green"
    }]
  };

var svg = d3.select("body").append("svg")
  .attr("width", width)
  .attr("height", height)

svg.append("defs")
  .append("pattern")
  .attr({
    "id": "stripes",
    "width": "8",
    "height": "8",
    "fill": "red",
    "patternUnits": "userSpaceOnUse",
    "patternTransform": "rotate(60)"
  })
  .append("rect")
  .attr({
    "width": "4",
    "height": "8",
    "transform": "translate(0,0)",
    "fill": "grey"
  });

function plotChart(json) {
  /* Define the data for the circles */
  var elem = svg.selectAll("g myCircleText")
    .data(json.nodes)

  /*Create and place the "blocks" containing the circle and the text */
  var elemEnter = elem.enter()
    .append("g")
    .attr("class", "node-group")
    .attr("transform", function(d) {
      return "translate(" + d.x + ",80)"
    })

  /*Create the circle for each block */
  var circleInner = elemEnter.append("circle")
    .attr("r", function(d) {
      return d.r
    })
    .attr("stroke", function(d) {
      return d.color;
    })
    .attr("fill", function(d) {
      return d.color;
    });

  var circleOuter = elemEnter.append("circle")
    .attr("r", function(d) {
      return d.r
    })
    .attr("stroke", function(d) {
      return d.color;
    })
    .attr("fill", "url(#stripes)");

  /* Create the text for each block */
  elemEnter.append("text")
    .text(function(d) {
      return d.label
    })
    .attr({
      "text-anchor": "middle",
      "font-size": function(d) {
        return d.r / ((d.r * 10) / 100);
      },
      "dy": function(d) {
        return d.r / ((d.r * 25) / 100);
      }
    });
};

plotChart(json);
```

```
.node-group {
  fill: #ffffff;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
```

**输出：**

[![在此处输入图像描述](../Images/1256932a7d2c525be6777502ebe0d8f7.png)](https://i.stack.imgur.com/5rZVF.png)

以下是链接`codepen`：

[请参阅CodePen](http://codepen.io)上Manish Kumar ( [@mkdudeja](http://codepen.io/mkdudeja) ) 的 Pen [D3-Circle-Pattern-Text](http://codepen.io/mkdudeja/pen/grgErY/)。

谢谢，马尼什库马尔

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-18T20:41:36.130

这是一种我认为更简单的方法：一般的想法是你想将一个文本元素附加到一个圆形元素，然后使用它的“dx”和“dy”属性，直到你将文本定位在你想要的圆圈中的点喜欢。在我的示例中，我对 dx 使用了负数，因为我想让文本从中心左侧开始。

```
const nodes = [ {id: ABC, group: 1, level: 1}, {id:XYZ, group: 2, level: 1}, ]

const nodeElems = svg.append('g')
.selectAll('circle')
.data(nodes)
.enter().append('circle')
.attr('r',radius)
.attr('fill', getNodeColor)

const textElems = svg.append('g')
.selectAll('text')
.data(nodes)
.enter().append('text')
.text(node => node.label)
.attr('font-size',8)//font size
.attr('dx', -10)//positions text towards the left of the center of the circle
.attr('dy',4) 
```

# javascript - jQuery UI 没有“可排序”方法

> ID：13615384
> 
> 赞同：3
> 
> 时间：2012-11-28T22:16:48.670
> 
> 标签：javascript, jquery, html, jquery-ui

我的带有 jQ​​uery UI 的播放列表插件单独运行良好，但是当我将它包含在索引页面上时，它给了我这个错误：

```
Uncaught TypeError: Object [object Object] has no method 'sortable'  /868 
```

[这是我在 Pastebin 的索引页](http://pastebin.com/JDJPkdgH)

[我的页面链接](http://duudey.com/index.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:18:39.973

你的问题很可能是这样的：

```
<script type="text/javascript" src="js/jquery-ui.min.js"></script> 
```

这是一个相对路径，所以虽然 js/jquery-ui.min.js 可能指向第一个位置的正确位置，但如果在第二个位置没有类似的文件，你会遇到你看到的问题（即没有 jQuery UI）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:47:38.123

我重新排列了我所有的 js 包含并将它们放在 index.php 的顶部。现在它正在工作...

# r - 递归引用数据框

> ID：13615385
> 
> 赞同：11
> 
> 时间：2012-11-28T22:16:50.440
> 
> 标签：r, subset

有没有办法让数据框引用自己？

我发现自己花了很多时间写一些`y$Category1[is.na(y$Category1)]<-NULL`难以阅读的东西，并且感觉像是在缓慢重复打字。我想知道是否有类似的东西：

`y$Category1[is.na(self)] <- NULL`我可以改用。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T07:14:50.890

多么棒的问题。不幸的是，正如@user295691 在评论中指出的那样，问题在于两次引用向量：一次作为被索引的对象，一次作为条件的主题。避免双重引用似乎是不可能的。

```
numericVector[cond(numericVector)] <- newVal 
```

我认为我们可以做的是有一个漂亮而整洁的功能，而不是

```
 # this  
 y$Category1[is.na(y$Category1)] <- list(NULL)

 # we can have this: 
 NAtoNULL(y$Category1) 
```

例如，以下函数包装`selfAssign()`（下）：

```
NAtoNULL(obj)      # Replaces NA values in obj with NULL.
NAtoVal(obj, val)  # Replaces NA values in obj with val.
selfReplace(obj, toReplace, val)  # Replaces toReplace values in obj with val

# and selfAssign can be called directly, but I'm not sure there would be a good reason to
selfAssign(obj, ind, val)  # equivalent to obj[ind] <- val 
```

例子：

```
# sample df
df <- structure(list(subj=c("A",NA,"C","D","E",NA,"G"),temp=c(111L,112L,NA,114L,115L,116L,NA),size=c(0.7133,NA,0.7457,NA,0.0487,NA,0.8481)),.Names=c("subj","temp","size"),row.names=c(NA,-7L),class="data.frame")

df
  subj temp   size
1    A  111 0.7133
2 <NA>  112     NA
3    C   NA 0.7457
4    D  114     NA
5    E  115 0.0487
6 <NA>  116     NA
7    G   NA 0.8481

# Make some replacements
NAtoNULL(df$size)    # Replace all NA's in df$size wtih NULL's
NAtoVal(df$temp, 0)  # Replace all NA's in df$tmp wtih 0's
NAtoVal(df$subj, c("B", "E"))   # Replace all NA's in df$subj with alternating "B" and "E" 

# the modified df is now:  
df

  subj temp   size
1    A  111 0.7133
2    B  112   NULL
3    C    0 0.7457
4    D  114   NULL
5    E  115 0.0487
6    E  116   NULL
7    G    0 0.8481

# replace the 0's in temp for NA
selfReplace(df$temp, 0, NA)

# replace NULL's in size for 1's
selfReplace(df$size, NULL, 1)

# replace all "E"'s in subj with alternate c("E", "F")
selfReplace(df$subj, c("E"), c("E", "F"))

df

  subj temp   size
1    A  111 0.7133
2    B  112      1
3    C   NA 0.7457
4    D  114      1
5    E  115 0.0487
6    F  116      1
7    G   NA 0.8481 
```

现在这适用于向量，但会因 *apply 而失败。我很想让它充分发挥作用，尤其是在应用 plyr 时。关键是修改

* * *

### 功能

函数的代码如下。

很重要的一点。这（还没有！）不适用于 *apply / plyr。
我相信它可以通过修改 n 的值并进行调整`sys.parent(.)`，`match.call()`但它仍然需要一些摆弄。任何建议/修改将不胜感激

```
selfAssign <- function(self, ind, val, n=1, silent=FALSE) {
## assigns val to self[ind] in environment parent.frame(n)
## self should be a vector.  Currently will not work for matricies or data frames

  ## GRAB THE CORRECT MATCH CALL
  #--------------------------------------
      # if nested function, match.call appropriately
      if (class(match.call()) == "call") {
        mc <- (match.call(call=sys.call(sys.parent(1))))
      } else {
        mc <- match.call()
      }

      # needed in case self is complex (ie df$name)
      mc2 <- paste(as.expression(mc[[2]]))

  ## CLEAN UP ARGUMENT VALUES
  #--------------------------------------
      # replace logical indecies with numeric indecies
      if (is.logical(ind))
        ind <- which(ind) 

      # if no indecies will be selected, stop here
      if(identical(ind, integer(0)) || is.null(ind)) {
        if(!silent) warning("No indecies selected")
        return()
      }

      # if val is a string, we need to wrap it in quotes
      if (is.character(val))
        val <- paste('"', val, '"', sep="")

      # val cannot directly be NULL, must be list(NULL)
      if(is.null(val))
        val <- "list(NULL)"

  ## CREATE EXPRESSIONS AND EVAL THEM
  #--------------------------------------
     # create expressions to evaluate
     ret <- paste0("'[['(", mc2, ", ", ind, ") <- ", val)

     # evaluate in parent.frame(n)
     eval(parse(text=ret), envir=parent.frame(n))
}

NAtoNULL <- function(obj, n=1) {
  selfAssign(match.call()[[2]], is.na(obj), NULL, n=n+1)
}

NAtoVal <- function(obj, val, n=1) {
  selfAssign(match.call()[[2]], is.na(obj), val, n=n+1)  
}

selfReplace <- function(obj, toReplace, val, n=1) {
## replaces occurrences of toReplace within obj with val

  # determine ind based on value & length of toReplace
  # TODO:  this will not work properly for data frames, but neither will selfAssign, yet.
  if (is.null(toReplace)) {
    ind <- sapply(obj, function(x) is.null(x[[1]]))
  }  else if (is.na(toReplace)) {
    ind <- is.na(obj)
  } else  {
    if (length(obj) > 1) {    # note, this wont work for data frames
          ind <- obj %in% toReplace
    } else {
      ind <- obj == toReplace
    }
  } 

  selfAssign(match.call()[[2]], ind, val, n=n+1)  
}

  ## THIS SHOULD GO INSIDE NAtoNULL, NAtoVal etc. 

  # todo: modify for use with *apply
  if(substr(paste(as.expression(x1)), 1, 10) == "FUN(obj = ") {
      # PASS.  This should identify when the call is coming from *apply. 
      #  in such a case, need to increase n by 1 for apply & lapply.  Increase n by 2 for sapply      
      # I'm not sure the increase required for plyr functions
  } 
```

# javascript - 如何将 kineticjs 阶段复制到另一个画布

> ID：13615387
> 
> 赞同：3
> 
> 时间：2012-11-28T22:16:50.313
> 
> 标签：javascript, kineticjs

我正在编写一个应用程序，其中一个页面上可能有数百个画布。我没有为每个画布单独设置一个舞台的开销，而是决定让一个编辑器拥有一个舞台。编辑完成后，它应该将舞台内容复制到另一个画布。

Stage 提供 toImage 和 toDataURL 来获取内容，但是根据此性能测试，与 context.drawImage 相比，这两种方法都非常慢。

请参阅：http: [//jsperf.com/copying-a-canvas-element](http://jsperf.com/copying-a-canvas-element)

由于我只在舞台中使用一个图层，而一个图层包含一个画布，我想我可以这样做：

```
desticationCtx.drawImage(layer.getContext().canvas, 0,0); 
```

不幸的是，这不会产生任何结果（虽然它确实运行）

由于一个阶段有一个 bufferCanvas 我也尝试过：

```
destinationCtx.drawImage(this.stage.bufferCanvas.element,0,0); 
```

尽管我可以在页面上的舞台画布上看到内容，但仍然没有结果。

但是，如果我在页面中深入了解 kineticjs 创建和使用的实际画布：

```
destinationCtx.drawImage(document.getElementById('mydiv').children[0].children[0],0,0); 
```

我确实得到了结果。将 kineticjs 舞台内容复制到另一个画布的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:16:24.167

像这样访问图层画布元素：

```
var canvasElement = layer.getCanvas().getElement(); 
```

和这样的上下文：

```
var context = layer.getCanvas().getContext(); 
```

这是感兴趣的文档：

[http://kineticjs.com/docs/Kinetic.Layer.html#getCanvas](http://kineticjs.com/docs/Kinetic.Layer.html#getCanvas)

[http://kineticjs.com/docs/Kinetic.Canvas.html](http://kineticjs.com/docs/Kinetic.Canvas.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T12:39:28.713

使用最新版本的 kineticjs，来自正确标记答案的方法不再起作用。现在我只是使用以下方法来获取 kineticjs 主画布 - 在 jquery 的帮助下：

```
var canvas = $('#canvasDiv').find('canvas');
console.log("Canvas: %O", layerCanvas); 
```

只需更换

```
 #canvasDiv 
```

使用您的容器的 ID。

# pyrocms - 为什么我的 PyroCMS 没有构建我告诉它的视图？

> ID：13615390
> 
> 赞同：2
> 
> 时间：2012-11-28T22:16:58.740
> 
> 标签：pyrocms

这是我的控制器代码：

```
 $this->template
        ->set_breadcrumb( 'my stuff )
        ->set('questions', $questions)
        ->set('categories', $categories)
        ->build('index'); 
```

但是，它似乎并没有真正构建`index`视图。它`default.html`在我的主题中建立了我的观点。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:43:47.500

我不明白这个问题或接受的答案。它将始终构建 default.html，因为这是默认布局。

您应该在您选择的布局中回显的`index`go的内容。`{{ template:body }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:27:20.447

您不能将 default.html 作为视图。

# git - 如何使用 git 更新网站

> ID：13615391
> 
> 赞同：0
> 
> 时间：2012-11-28T22:17:05.417
> 
> 标签：git, version-control, bitbucket

我知道如何在 git 中拉取、提交和推送以更新我在 bitbucket 存储库中的本地，但我不知道如何使用 git 更新位于主机中的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:21:52.580

如果服务器允许您安装/配置 git，您可能喜欢使用 post hooks。

几乎为您正在运行的主机配置源，并在推送到某些分支时使其也推送到源并在需要时进行编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:47:04.677

如果您的服务器有 git（可以允许您安装 git）（您也可以安装不需要提升权限的 git 的“便携式”版本），您可以“使用”git 进行部署（以某种方式）。

你的开发代码在一个分支中。将此 repo 克隆到您的服务器上。使用诸如“生产”之类的名称分支此代码。进行所有必要的设置更改以使您的开发代码在服务器上工作（更改设置文件、更改配置文件、.htaccess 文件等）。现在将提交添加到此分支并推送到您的存储库。

将来，当您在开发环境中进行更改时，您可以将生产分支重新定位到开发分支的新头部（我会用版本号标记当前的生产分支，以便有一个简单的方法返回迅速地）。这使得使用 git 进行部署变得快速而简单，因为您已经拥有从开发到生产所需的所有更改（我在那里有一个暂存分支的中间步骤）。

# linux - 迷失在 Nodester 安装中

> ID：13615393
> 
> 赞同：0
> 
> 时间：2012-11-28T22:17:12.873
> 
> 标签：linux, bash, node.js, nodester

我正在尝试安装我自己的 Nodester 版本。我在 Ubuntu 12.04 LTS 上试过，现在在 CentOS 上试过。我不是最熟练的 Linux 用户（使用约 2 个月），所以我现在不知所措。

说明位于[https://github.com/nodester/nodester/wiki/Install-nodester#wiki-a](https://github.com/nodester/nodester/wiki/Install-nodester#wiki-a)。他们要求您使用完成此操作所需的行来“导出路径（使 npm 工作）”。

```
cd ~
echo -e "root = ~/.node_libraries\nmanroot = ~/local/share/man\nbinroot = ~/bin" > ~/.npmrc
echo -e "export PATH=3d9c7cfd35d3628e0aa233dec9ce9a44d2231afcquot;\${PATH}:~/bin3d9c7cfd35d3628e0aa233dec9ce9a44d2231afcquot;;" >> ~/.bashrc
source ~/.bashrc 
```

我可以完成所有这一切，直到我`source ~/.bashrc`下线。当我运行它时，我得到以下信息：

```
[root@MYSERVER ~]# source ~/.bashrc
-bash: /root/.bashrc: line 13: syntax error near unexpected token ';;'
-bash: /root/.bashrc: line 13: 'export PATH=3d9c7cfd35d3628e0aa233dec9ce9a44d2231afcquot;${PATH}:~/bin3d9c7cfd35d3628e0aa233dec9ce9a44d2231afcquot;; 
```

我已经尝试更改`quot;`为`"`，但没有帮助。我尝试更改`quot;`为冒号，但没有帮助。我也删除了它，但它没有帮助（我相信你们中的许多人可能想知道为什么我会尝试这些东西）。有没有人知道我需要做什么才能让它正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:00:48.387

这看起来更像是文档错误，而不是您无法理解任何内容。在 Github 上为它创建了[issue 409 。](https://github.com/nodester/nodester/issues/409)

与此同时，回顾 wiki 页面的历史，我发现以下内容可能会有所帮助。尽管我有一段时间无法确认，但它确实看起来更合理。

*导出路径（使 npm 工作）：*

```
> cd ~
> echo -e "root = ~/.node_libraries\nmanroot = ~/local/share/man\nbinroot = ~/bin" > ~/.npmrc
> echo -e "export PATH=\"\${PATH}:~/bin\";" >> ~/.bashrc
> source ~/.bashrc 
```

从提交[d71e66b4c96f04c13467ede5f6469d6d4dd17059](https://github.com/nodester/nodester/wiki/Install-nodester/d71e66b4c96f04c13467ede5f6469d6d4dd17059)

# java - 在 Javascript 中运行 Java 代码？

> ID：13615397
> 
> 赞同：2
> 
> 时间：2012-11-28T22:17:20.603
> 
> 标签：java, javascript

是否可以在 Javascript 中运行 Java 代码？假设我有一个文本框，当您单击继续时，它将在文本框中运行 Java 函数并返回结果。它不一定要“运行”Java 代码，如果这样会更容易的话。我不是要求有人为我做所有的工作，但有什么具体的方法我应该去做这件事，或者有没有可以帮助我的图书馆？另外，对不起，如果我的问题没有意义或我做错了什么，我是新来的。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:20:38.853

为了执行 Java 代码，您需要一个[Java 虚拟机](http://en.wikipedia.org/wiki/Java_virtual_machine)。事实证明，有一些 JavaScript JVM 实现：

*   [DoppioVM](http://int3.github.com/doppio/about.html)（[演示](http://int3.github.com/doppio/)）
*   [BicaVM](https://github.com/nurv/BicaVM)

# c# - 没有可用的 System.Runtime.Caching？

> ID：13615407
> 
> 赞同：33
> 
> 时间：2012-11-28T22:18:24.043
> 
> 标签：c#, .net, visual-studio-2012

“类库”的输出类型和“.NET Framework 4”的目标框架。

根据我读过的所有内容，我应该可以使用它，但我在 System.Runtime 命名空间中看到的内容如下：

```
CompilerServices
ConstrainedExecution
ExceptionServices
Hosting
InteropServices
Remoting
Serialization
Versioning 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-28T22:19:59.087

您只需要添加对`System.Runtime.Caching`程序集的引用。

1.  在解决方案资源管理器中，右键单击“参考”
2.  选择“添加参考”
3.  从左侧菜单中选择“程序集”
4.  查找（或过滤）并添加`System.Runtime.Caching.dll`.

它不是类库中默认引用集的一部分，但您应该可以毫无问题地添加它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-02T16:13:12.117

为了补充 Jon Skeets的[回答](https://stackoverflow.com/a/13615427/1042705)，（对于那些遇到这个问题的人），如果在添加了对程序集的引用后*仍然*得到红色波浪线，只需在保存解决方案后重新启动 Visual Studio，你应该很好去.`Caching``System.Runtime.Caching`

[![Visual Studio 红色波浪线](../Images/08605aaa3786e3f9b1334bf53e203e2b.png)](https://i.stack.imgur.com/j3u2b.png)

*添加参考*、*保存解决方案*并（*如果需要*）***重新启动***Visual Studio ，您应该*可以*在此`types`. `namespace`为了让我的解决方案发挥作用，我不得不这样做。

## **编辑：**

在尝试重新创建问题并以这种方式解决时，似乎我们需要设置`Copy Local`为`True`in `System.Runtime.Caching`>`Properties`然后*重新*启动 Visual Studio 以使其工作。至少，就我而言，没有这个问题似乎无法解决。;)

[![在此处输入图像描述](../Images/d8a797cc51f6a16643ad55cf099f7f9e.png)](https://i.stack.imgur.com/Dq2id.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-28T22:24:15.227

参考`System.Runtime.Caching.dll`。这是目前 .NET 框架中的另一个相当迟钝的陷阱，其中在某些事物中会有非常相似的命名空间，但您想要的实际类将在不同的程序集中引用。例如，[CacheItem](http://msdn.microsoft.com/en-us/library/system.runtime.caching.cacheitem.aspx)在这个备用 DLL 中，而[ApplicationActivator](http://msdn.microsoft.com/en-us/library/system.runtime.hosting.applicationactivator.aspx)（在 System.Runtime.Hosting 中）在 mscorlib 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-15T01:46:49.270

对我来说，[System.Runtime.Caching NuGet 包](https://www.nuget.org/packages/System.Runtime.Caching)是我需要的一点，一切都很好

```
dotnet add package System.Runtime.Caching --version 5.0.0 
```

# html - Cookie 记住表单提交

> ID：13615409
> 
> 赞同：0
> 
> 时间：2012-11-28T22:18:27.243
> 
> 标签：html, forms, cookies, remember-me

我有一个表单，提交时会附加当前页面的 URL：`domain.com`变为`domain.com?name=value`

该表单效果很好，但我需要编写一个 cookie，以便当用户转到另一个页面时，该 url 将保留已附加到该 URL 的字符串。

```
domain.com?name=value
domain.com/page?name=value
domain.com/page2?name=value 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:56:57.003

如果在 PHP 页面之间传递变量是你想要的，那么通过会话变量传递它：

在项目的所有页面中，在顶部添加以下行：

```
<?php
    session_set_cookie_params(0);
    session_start();
?> 
```

然后在一页中为会话变量赋值：

`$_SESSION['name'] = value;`

在同一会话中的另一个页面中检索此变量：

`$name = $_SESSION['name'];`

在您完成保持会话打开的任何时候，请致电

```
<?php 
    session_start();
    $_SESSION = array();
    session_destroy();
?> 
```

看看[这个 SO 帖子](https://stackoverflow.com/questions/508959/truly-destroying-a-php-session)，了解一种完全销毁会话的方法。请记住，默认情况下会话保持打开状态，直到浏览器关闭或会话被显式销毁。

如果处理会话不是您想要的，那么您可以在 PHP 中调用脚本时手动传递变量：

```
<?php 
    $name = $_GET['name'];
    echo "<form action='nextpage.php?name=$name' method='post'> ... </form>";
?> 
```

这样，您的所有表单都通过 GET 将 name 变量发送到下一页。

# html - 如何在html页面内部链接到对象标签内部

> ID：13615419
> 
> 赞同：0
> 
> 时间：2012-11-28T22:19:32.100
> 
> 标签：html

我有一个 microsoft .doc 文件，我将其转换为 html（通过单击另存为 html）。该 .doc 文件中包含指向文档其他部分的内部链接，因此新的 html 页面也是如此。

然后我将这个 html 文件嵌入到另一个带有对象标签的文件中。现在链接不起作用。为什么会这样，可以修复吗？

# iphone - Corona：“构建”菜单不包括 iPhone

> ID：13615420
> 
> 赞同：3
> 
> 时间：2012-11-28T22:19:36.667
> 
> 标签：iphone, build, lua, coronasdk

我正在尝试测试是否可以以某种方式将我制作的一些应用程序放在我的手机上，但在电晕中，我只能为 Android、Kindle 和 Nook 构建，而不是为 iPhone 构建。有谁知道为什么没有那个选项？

在带有 Java 7 JDK 的 Windows 7 上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T04:09:23.173

要扩展 nycynik 所说的 RE 需要 Xcode 来为 iOS 构建的内容，您可以将 macincloud.com 与 Corona 一起使用。我们的许多 PC 用户开发人员都为他们的 iOS 应用程序这样做。（我觉得这值得一提，因为虽然 phonegap 文章很好，但在使用 Corona SDK 时不会真正帮助您。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T22:55:58.473

您只能使用苹果 xcode 为 iOS 构建。命令行不会在 Windows 上为苹果构建。

为了解决这个问题，您可以在云中编译，查看此链接：

[http://coronalabs.com/blog/2012/03/15/corona-developers-rent-a-mac-in-the-cloud/](http://coronalabs.com/blog/2012/03/15/corona-developers-rent-a-mac-in-the-cloud/)

# ruby-on-rails - 一致性 Rails 形成 Formtastic 等效项

> ID：13615422
> 
> 赞同：0
> 
> 时间：2012-11-28T22:19:49.240
> 
> 标签：ruby-on-rails, formtastic

我有一个 Rails 应用程序，我使用 Active Admin 作为后端。Active Admin 使用 Formtastic，我无法将 _form.html.erb 中的一个输入字段转换为帖子。

这是表格...

```
<div class="container">
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>
      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :author %>
    <%= f.collection_select :blog_id, Blog.all, :id, :name, prompt: "Select a blog" %>        
  </div>
  <div class="field">
    <p>
      Categories:<br>
      <%= hidden_field_tag "post[category_ids][]", nil %>
      <% Category.all.each do |category| %>
        <%= check_box_tag "post[category_ids][]", category.id, @post.category_ids.include?(category.id), id: dom_id(category) %> 
        <%= label_tag dom_id(category), category.name %>
      <% end %>    
    </p>
  </div>
  <div class="field">
    <%= f.hidden_field :status, value: "Draft" %> 
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body, class: "redactor", id: "redactor" %>
  </div>
  <div class="field">
    <%= f.label :published_on %><br />
    <%= f.date_select :published_on %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
</div> 
```

这是我无法转换为特定格式的代码的部分。它来自 Ryan 在[HABTM Checkboxes](http://railscasts.com/episodes/17-habtm-checkboxes-revised)上的截屏视频。

```
<div class="field">
    <p>
      Categories:<br>
      <%= hidden_field_tag "post[category_ids][]", nil %>
      <% Category.all.each do |category| %>
        <%= check_box_tag "post[category_ids][]", category.id, @post.category_ids.include?(category.id), id: dom_id(category) %> 
        <%= label_tag dom_id(category), category.name %>
      <% end %>    
    </p>
  </div> 
```

这是 Active Admin 的 admin/post.rb 文件中的表单代码。如果我使用它，我将继续收到类别的无方法错误。我知道它目前列出的方式是不正确的。

```
form do |f|
    f.inputs "Details" do
        f.input :blog, hint: "Select a blog"
        f.input :title, hint: "Enter blog post title"
        f.input :published_on, as: :date, include_blank: false, hint: "Select a date", :prompt => {:day => "Day", :month => "Month", :year => "Year"}, :start_year => Time.now.year
        f.input :status, as: :select, collection: ["Draft", "Published"], include_blank: false, hint: 'Select "Draft" to save and post later, and "Publish" to post now'

        f.input :categories, as: :check_boxes

        f.input :body, input_html: { class: "redactor", id: "redactor" }
    end
    f.buttons
end 
```

如果有人有任何意见，我将不胜感激。我查看了 formtastic 文档并观看了 Ryan 的截屏视频，但仍然遇到转换问题。

谢谢！

## 编辑：能够解决下面的解决方案

在对 Formtastic 和 Active Admin 更加熟悉之后，我能够完成这项工作。以下是 Active Admin 中的表单、显示和索引视图中的相关代码。

```
ActiveAdmin.register Post do
index do
    column "Post Title", :title
    column :blog
    column :published_on
    column :status
    column "Category", :categories do |post|
        post.categories.collect { |cat|  cat.name }.join(", ")
    end
    default_actions
end 

show do
    h5 "Created by #{post.blog.name} on #{post.created_at.strftime('%B %-d, %Y')}"
    h5 "Categories: #{post.categories.collect { |cat|  cat.name }.join(", ")}"
    h5 "Current Status: #{post.status}"
    h5 "Published On Date: #{post.published_on.strftime('%B %-d, %Y')} - (will only be posted if marked with Publish as status)"
    div do
        simple_format post.body
    end
end

form do |f|
    f.inputs "Details" do
        f.input :blog, hint: "Select a blog"
        f.input :title, hint: "Enter blog post title"
        f.input :published_on, as: :date, include_blank: false, hint: "Select a date", :prompt => {:day => "Day", :month => "Month", :year => "Year"}, :start_year => Time.now.year
        f.input :status, as: :select, collection: ["Draft", "Published"], include_blank: false, hint: 'Select "Draft" to save and post later, and "Publish" to post now'
        f.input :categories, as: :check_boxes, collection: Category.all
        f.input :body, input_html: { class: "redactor", id: "redactor" }
    end
    f.buttons
end  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:46:33.697

我能够构建 Formtastic 版本，如下所示。对 Formtastic 有了更多的了解，然后对 Active Admin 进行了微调。

以下是 Active Admin 中的表单、显示和索引视图中的相关代码。

```
ActiveAdmin.register Post do
index do
    column "Post Title", :title
    column :blog
    column :published_on
    column :status
    column "Category", :categories do |post|
        post.categories.collect { |cat|  cat.name }.join(", ")
    end
    default_actions
end 

show do
    h5 "Created by #{post.blog.name} on #{post.created_at.strftime('%B %-d, %Y')}"
    h5 "Categories: #{post.categories.collect { |cat|  cat.name }.join(", ")}"
    h5 "Current Status: #{post.status}"
    h5 "Published On Date: #{post.published_on.strftime('%B %-d, %Y')} - (will only be posted if marked with Publish as status)"
    div do
        simple_format post.body
    end
end

form do |f|
    f.inputs "Details" do
        f.input :blog, hint: "Select a blog"
        f.input :title, hint: "Enter blog post title"
        f.input :published_on, as: :date, include_blank: false, hint: "Select a date", :prompt => {:day => "Day", :month => "Month", :year => "Year"}, :start_year => Time.now.year
        f.input :status, as: :select, collection: ["Draft", "Published"], include_blank: false, hint: 'Select "Draft" to save and post later, and "Publish" to post now'
        f.input :categories, as: :check_boxes, collection: Category.all
        f.input :body, input_html: { class: "redactor", id: "redactor" }
    end
    f.buttons
end  
end 
```

# asp.net - 如何自动从 sql 查询中填充多个文本框？

> ID：13615425
> 
> 赞同：0
> 
> 时间：2012-11-28T22:19:55.373
> 
> 标签：asp.net, sql, textbox

这可能是一个愚蠢的问题。但是我在 asp.net 表单中有很多文本框，我需要用来自 sql 查询的数据填充。

如果查询列名称和文本框名称都相同，是否可以自动从查询数据中填充文本框？也许使用循环？字段太多，所以我认为使用以下内容单独填充每个字段是愚蠢的：

```
textboxX.text = data.getValue(0).ToString(); 
textboxY.text = data.getValue(1).ToString(); 
... 
```

我认为必须有一种更简单的方法来填充所有文本框。谁能帮我做到这一点？一个简单的例子会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:36:27.910

如果您使用的是 MVC 或 MVVM 之类的东西，那么从某种意义上来说就是这样。您可以将视图页面绑定到具有与字段对应的属性的模型。然后在您的视图页面中，您将模型属性绑定到字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T12:43:05.873

如果您不使用 MVC/MVVM/knockout，那么您可以做的最好的事情是循环表单的控件并从列表中为它们分配一些值。为此目的，如果您的控件命名为 Ctrl1、Ctrl2 等，则会更简单——这只是为了简化循环/分配

# c# - C# 如何从 MySQL 数据库 Wampserver 中读取数据

> ID：13615429
> 
> 赞同：2
> 
> 时间：2012-11-28T22:19:59.863
> 
> 标签：c#, sql, wampserver

我正在尝试使用此方法从 Wampserver 读取表，但我收到一条错误消息“在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到或无法访问服务器。验证实例名称正确，并且 SQL Server 配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）“

当我 ping localhost 时，所有 ping 都会收到。这段代码正确吗？

```
 private void button5_Click(object sender, EventArgs e)
    {

        SqlConnection myConnection = new SqlConnection("user id=root;" +
                                   "password=pass;server=localhost;" +
                                   "database=database; " +
                                   "connection timeout=10");

        string query = "select * from table";

        SqlCommand cmd = new SqlCommand(query, myConnection);
        myConnection.Open(); // the error

        SqlDataAdapter da = new SqlDataAdapter(cmd);

        da.Fill(tabelsql);
        myConnection.Close();
        da.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:26:34.397

如果您使用的是 WampServer，那意味着您使用的是 MySQL，对吧？

**MySQL**和**SQL Server**不一样。`SQLConnection`,`SQLCommand`并`SQLDataAdapter`用于连接到**SQL Server**（来自 Microsoft 的 RDBMS），而不是**MySQL**。

要从 .NET 访问 MySQL 数据库，您可以使用[MySQL 连接器](http://dev.mysql.com/downloads/connector/net/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:30:21.503

SqlCommand 和 SqlDataAdapter 是 MS SQL ADO.NET 本机客户端的一部分，只能用于 MS Sql Server。WAMP 似乎包括 MySql。为此，您可能需要使用[此处](http://www.mysql.com/downloads/connector/net/)找到的 MySql ADO.NET 驱动程序。[本文](http://blog.tjitjing.com/index.php/2007/04/net-and-mysql-in-five-easy-steps.html)提供了一些使用 DataReader 读取 MySql 数据的示例代码 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-19T06:25:44.623

从 wamp 服务器中的 MySql 数据库中读取单个表。如果 wamp-server 在 localhost 中，那么，

```
Add reference ..

using MySql.Data.MySqlClient;

And after this..
write below public partial class this connection query..

MySqlConnection cn = new        
MySqlConnection
("server=localhost;database=database;userid=root;password=;charsetutf8;");

write this GetData() in your form load event or below InitializeComponent...

private void GetData()
    {
        cn.Open();
        MySqlDataAdapter adp = new MySqlDataAdapter("SELECT * from                                      
        tablename", cn);
        DataTable dt = new DataTable();
        adp.Fill(dt);
        dataGridViewName.DataSource = dt;
        adp.Dispose();
        cn.Close();
    } 
```

# php - 以 25 个为一组设置值

> ID：13615434
> 
> 赞同：0
> 
> 时间：2012-11-28T22:20:11.377
> 
> 标签：php, mysql

我正在尝试以 25 个一组为数据库中的字段分配一个值。例如，前 25 个被分配值 1，接下来的 25 个被分配值 2 等等。我试图这样做，但我最终只是遍历整个事情，给每个人相同的数字。

这是我到目前为止...

```
$i = 1;
    while(($count > 0) && ($i < 10)){
        $sql = "UPDATE tbl_studentModules SET groupID = $i WHERE groupID = '' LIMIT 25";
        $result = mysql_query($sql) or die(mysql_error());
        $count = mysql_num_rows($result);
        $i++;
    } 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:23:53.963

```
$sql = "UPDATE tbl_studentModules SET groupID = MOD(rowId, 25) WHERE groupID = ''";
$result = mysql_query($sql) or die(mysql_error()); 
```

尝试像上面那样使用，它会根据他们（假设这是行 ID 的字段名称）为`MOD`每 25 个用户分配 0 - 24 的范围。`groupID``rowId`

不需要`while`循环。

* * *

## 也很重要：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# mysql - CREATE TABLE... SELECT 组合两个 MySQL 表和 NULL 值

> ID：13615445
> 
> 赞同：0
> 
> 时间：2012-11-28T22:20:39.320
> 
> 标签：mysql, select, null, create-table

我用它来连接两个表（这里省略了一些字段）。原始表中的所有字段都定义为 VARCHAR，NOT NULL，默认为 ''。

```
 CREATE TABLE newtable
  SELECT
     table1.field1,
     table1.field2,
     ...
     table2.field1,
     table2.field2,
     ...
 FROM
    table1
 LEFT JOIN table2 ON table1.id = table2.id 
```

连接本身正在工作，但是，表 1 有一些不在表 2 中的行。当我需要它们为空字符串时，表 2 中的字段被添加为这些条目的 NULL。创建表时有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:24:18.567

```
IFNULL(table1.field1,'') AS table1_field1, 
```

[`IFNULL`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)如果它不为空，则保留该值，否则将其替换为第二个参数，在您的情况下为空字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:42:32.143

如果您希望 table2 中的列为 '' ..put an nvl ...这在 oracle 中有效

```
CREATE TABLE newtable as 
  SELECT
     table1.field1,
     table1.field2,
     ...
     nvl(table2.field1,''),
     nvl(table2.field2,''),
     ...
 FROM
    table1
 LEFT JOIN table2 ON table1.id = table2.id 
```

# .net - .NET DropDownList SelectedIndexChange 事件未在 IE 10 中触发

> ID：13615446
> 
> 赞同：7
> 
> 时间：2012-11-28T22:20:39.313
> 
> 标签：.net, postback, internet-explorer-10

在 IE 10 中，当下拉列表中的选定项发生更改时，什么也不会发生。它不回发。除下拉列表外，所有其他控件均有效。

当我切换到 IE 10 兼容模式时，它似乎可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T12:01:00.213

Scott Hanselman 在他的博客上解释了这一点。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:22:20.310

您是否安装[了 IE10 的 ASP.net 修补](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:20:09.503

好吧，这是一个奇怪的问题。实际的问题是***我们有一个 web.config 位于***具有 OLD 的应用程序的根目录中，我说的是那里的 ANCIENT browserCap 定义。我说的是旧的 Windows TV 的 browserCap 定义。

我们删除了这个文件中的 browserCap 定义，一切都很好。

如果您遇到此错误，请检查项目的直接文件夹中是否存在任何浏览器上限（如果您有这种设置）。

如果您遇到此问题并且您的项目中没有多个 web.config，Michael 的答案中的链接很可能会照顾您。

# ios - 如何让 NSJSONSerialization 将布尔值输出为真或假？

> ID：13615451
> 
> 赞同：28
> 
> 时间：2012-11-28T22:21:08.600
> 
> 标签：ios, json, boolean

我正在使用 NSJSONSerialization dataWithJSONObject 将我的类序列化为 JSON。当它序列化一个 BOOL 时，它会在 JSON 字符串中为其提供值 1 或 0。我需要这是真或假。这可以通用吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-06-21T11:59:07.417

当我创建`[NSNumber numberWithBool:NO]`时，NSJSONSerialization 在 JSON 字符串中返回单词“false”。

**编辑**使用新的快捷方式，您还可以使用这些方便的人：

```
@(YES) /   @(NO)
@(1)   /   @(0)
@YES   /   @NO
@1     /   @0 
```

这样你就可以避免像循环遍历你的值这样的事情。我想要完全相反的行为，但有`NSNumber`对象。所以我必须循环...

**编辑二**

[mbi](https://stackoverflow.com/users/428209/mbi)在评论中指出，iOS 版本之间存在差异。所以这里是一个 iOS9 测试：

```
NSDictionary *data = @{
    @"a": @(YES),
    @"b": @YES,
    @"c": @(1),
    @"d": @1
};
NSLog(@"%@", [[NSString alloc] initWithData:[NSJSONSerialization dataWithJSONObject:data options:0 error:nil] encoding:NSUTF8StringEncoding]);

2016-07-05 02:23:43.964 Test App[24581:6231996] {"a":true,"b":true,"c":1,"d":1} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-04T21:41:10.667

我自己也遇到过这个问题，不确定这是否是最好的答案，但是......

确保使用@YES 或@NO，然后您输出的json 将在其中包含true/false：

```
[NSJSONSerialization dataWithJSONObject:@{@"test": @YES} options:0 error: nil]; 
```

因此，在将 dataWithJSONObject 放入字典时，您必须将其他“布尔值”/布尔值 -> @YES / @NO 转换。

```
[NSJSONSerialization dataWithJSONObject:@{@"test": (boolLikeValue ? @YES : @NO)} options:0 error: nil]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-11T09:05:09.723

Yes, it is possible to output a boolean (true/false) with NSJSONSerialization by using **kCFBooleanTrue** and **kCFBooleanFalse** :

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:kCFBooleanTrue, @"key_1",
                           kCFBooleanFalse, @"key_2",
                           nil] 
```

then

```
NSError *error = nil;
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:dict options:kNilOptions error:&error]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T22:51:50.250

不，Bool 的基础对象是`NSNumber` `numberWithBool`，它变为 0 或 1。我们没有`Bool`对象。读书也一样`JSON`。True/false 将`NSNumber`再次变为 a。

您可以创建一个`Bool`类并构建自己的解析器。数组是数组，`JSON`对象是`NSDictionary`。您可以查询键，测试后面的类并`JSON`从中构建字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-13T23:48:16.157

我在使用 CoreData 的布尔值时遇到了类似的问题，它也存储为 NSNumber。对我来说最简单的解决方案是使用@()：

```
[NSJSONSerialization dataWithJSONObject:@{@"bool": @([object.value boolValue])} options:0 error: nil]; 
```

我猜@() 确实可以识别 BOOL 值并使用 numberWithBool: 初始化 NSNumber：这会导致 JSON 中的真/假

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-08T17:26:58.107

我刚刚在iOS9上遇到了这个问题。我的情况是我有一个 CoreData 属性`workout.private`，由于 CoreData 处理，该属性被布尔映射到 NSNumber*。

创建 JSON 时 ，在 JSON`[NSNumber numberWithBool:workout.private.boolValue]`中设置预期的真/假，但只是`workout.private`或 @(workout.private.boolValue) 设置“1”或“0”。

# sql - SQL 语法 DATEADD 的问题

> ID：13615452
> 
> 赞同：0
> 
> 时间：2012-11-28T22:21:17.480
> 
> 标签：sql, oracle, dateadd

```
SELECT hd.holiday_code, 
       hd.holiday_duration, 
       hdep.departure_date                                    AS 'Start Date', 
       Dateadd(day, hd.holiday_duration, hdep.departure_date) AS 'End Date' 
FROM   holiday_details hd 
       INNER JOIN holiday_departure hdep 
               ON hd.holiday_code = hdep.holiday_code 
```

好吧，我一直试图让这个特定的代码 ^ 工作，但我无法弄清楚 dateadd 语法。从我对谷歌的研究来看，它看起来是正确的，但我总是收到错误 ORA-00923: FROM keyword not found where expected

这通常是我的一些小错误造成的，但我找了大约 20 分钟后找不到它。谁能指出可能正盯着我看的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:37:31.760

只需将天数与数值相加即可。您的语法的另一个问题是“开始日期”和“结束日期”；用双引号替换单引号。将您的查询更改为以下内容：

```
SELECT hd.holiday_code, 
       hd.holiday_duration, 
       hdep.departure_date AS "Start Date", 
       hdep.departure_date + hd.holiday_duration AS "End Date" 
FROM   holiday_details hd 
       INNER JOIN holiday_departure hdep 
               ON hd.holiday_code = hdep.holiday_code 
```

希望能帮助到你。

# c# - WCF函数返回后继续

> ID：13615455
> 
> 赞同：3
> 
> 时间：2012-11-28T22:21:18.953
> 
> 标签：c#, asp.net, wcf, methods

我有一个通过 WCF 连接到 Windows 服务并调用方法的 Web 应用程序。在该方法返回其结果后（并且一切都成功 - 请参见下面的 **?? 行），我希望服务继续并做一些其他工作。

最简单的方法是什么？

谢谢达摩

**C# 代码**

```
//Add Files To Control Manager
    public ReturnClass FilesToControl(List<Item> lstNewItems,string ReferenceNumber,string Type,String Description)
   {
       try
       {
           String ThisisAnItemToControl = "";
           String ThisIsItsType = "";

           for (int i = 0; i < lstNewItems.Count; i++) // Loop through List with for
           {
               ThisisAnItemToControl = lstNewItems[i].Paramater;
               ThisIsItsType = lstNewItems[i].Type;

               // Do a pre check on the item

               // Does File Exist

               if (!File.Exists(ThisisAnItemToControl))
                   return new ReturnClass(-1, ThisisAnItemToControl + " does not exist", String.Empty, null, null, null);  

           }

           return new ReturnClass(1, "", String.Empty, null, null, null);

           // Now that we have returned a result to the web application we can get to work and modify the items under control but how can i do this?

         //  **??

       }

       catch (Exception ex)
       {

           return new ReturnClass(-1, ex.Message.ToString(), "", null, null, null);

       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:24:48.630

我要做的是将额外的工作放在另一个函数中。然后，就在您从 WCF 函数返回之前，为额外的工作函数创建一个新线程并运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:28:42.507

您可以按照建议创建一个新线程，但如果您正在进行的工作将长时间运行，您很可能会从 ASP.NET 线程池中获取线程。这可能会导致应用程序的吞吐量下降。

所以，我可能会有另一个进程，也许是一个 Windows 服务，您的 WCF 应用程序可以调用它来执行更多工作。这将使关注点与处理前端请求和后台工作脱钩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:29:32.817

在另一个线程中完成工作或在服务器端引发一个事件，被另一个类/方法捕获。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T22:31:18.107

```
Task.Factory.StartNew(() => DoWork()); 
```

但是您可能遇到的一个问题是您关闭了线程，然后 IIS 终止了您的 WCF 服务。这当然是假设您在 ISS 中运行它。

# spring-mvc - 实现编辑器/显示模板的 Spring MVC 世界中类似 Razor 的引擎

> ID：13615457
> 
> 赞同：3
> 
> 时间：2012-11-28T22:21:37.057
> 
> 标签：spring-mvc, razor, partial-views, mvc-editor-templates

我正在从 ASP.Net MVC 迁移到 Java Spring MVC。我在 ASP.Net MVC 的 Razor 中发现了两个非常强大和有用的功能，这在 Java Spring MVC 世界中将具有很大的价值：

1.  部分视图
2.  编辑器/显示模板

这个概念是否存在于许多基于 Java 的渲染引擎中？如果是这样，哪些功能以及该功能称为什么？

# c++ - Eclipse 停止运行原因 = “断点”

> ID：13615459
> 
> 赞同：0
> 
> 时间：2012-11-28T22:21:45.737
> 
> 标签：c++, eclipse

我正在使用 C++ 处理 Eclipse。直到昨天它工作正常。现在，当我使用断点和调试时，我得到了一个 stop,reason="breakpoint-hit" 错误，然后 eclipse 停止了。有没有人看到这个错误并且有人知道如何解决它？

我之前使用过断点来帮助我调试。Eclipse 停止运行，而不是 step into、step over 和 step out 选项。我没有对断点做任何不寻常的事情，我在几个不同的点尝试了它们并遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T17:27:56.873

当您使用控制台输入输入时，Eclipse 显然存在调试问题。那是你的情况吗？我遇到了这个问题，在谷歌搜索解决方案时，我终于得到了一个建议，即在调试时，您应该将输入从文件传递到程序，而不是将其输入到控制台。

建议可以在这里找到： [http](http://webcourse.cs.technion.ac.il/234122/Spring2011/en/faq_Working%20with%20Eclipse%20CDT.html) ://webcourse.cs.technion.ac.il/234122/Spring2011/en/faq_Working%20with%20Eclipse%20CDT.html （问题以“我在调试时遇到问题”开头在 Eclipse 中。”。）

希望这可以帮助。

# xml - 在父节点下追加多个子节点

> ID：13615463
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:22:13.503
> 
> 标签：xml, xslt

我想在每个 order_h 下从 order_h 匹配 order_no 追加多个子节点 order_d。

这是我的xml

```
 <document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
      <order>
        <order_h owner="GD" order_no="421424" profoma_po="421425">
          <order_d owner="GD" item_no="100000014" line_no="1" order_no="421424" color_code="730" manufacturer="100783">
            <size assoc_id="69398" match_id="14" pack_code="BULK" size_range="2" model_name="SIZE SCALE 2" size_id="SIZE SCALE 2">
              <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602001" size_code="S" alloc_qty="26" plan_pct_ratio="34" row_no="0" sort_value="6"/>
              </Size_b>
              <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602182" size_code="L" alloc_qty="11" plan_pct_ratio="15" row_no="0" sort_value="8"/>
              </Size_b>
              <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602078" size_code="M" alloc_qty="21" plan_pct_ratio="27.5" row_no="0" sort_value="7"/>
              </Size_b>
              <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602060" size_code="XS" alloc_qty="18" plan_pct_ratio="23.5" row_no="0" sort_value="5"/>
              </Size_b>
            </size>
          </order_d>
    </order_h>
        <order_h owner="GD" order_no="421425" profoma_po="421425">
          <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783">
            <size assoc_id="69400" match_id="14" pack_code="BULK" size_range="2" model_name="SIZE SCALE 2" size_id="SIZE SCALE 2">
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602019" size_code="S" alloc_qty="17" plan_pct_ratio="34" row_no="0" sort_value="6"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602238" size_code="M" alloc_qty="14" plan_pct_ratio="27.5" row_no="0" sort_value="7"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602131" size_code="XS" alloc_qty="12" plan_pct_ratio="23.5" row_no="0" sort_value="5"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602027" size_code="L" alloc_qty="8" plan_pct_ratio="15" row_no="0" sort_value="8"/>
              </Size_b>
            </size>
          </order_d>
        </order_h>
<order_h owner="GD" order_no="421424" profoma_po="421425">
          <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783">
            <size assoc_id="69400" match_id="14" pack_code="BULK" size_range="2" model_name="SIZE SCALE 2" size_id="SIZE SCALE 2">
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602019" size_code="S" alloc_qty="17" plan_pct_ratio="34" row_no="0" sort_value="6"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602238" size_code="M" alloc_qty="14" plan_pct_ratio="27.5" row_no="0" sort_value="7"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602131" size_code="XS" alloc_qty="12" plan_pct_ratio="23.5" row_no="0" sort_value="5"/>
              </Size_b>
              <Size_b assoc_id="69400" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
                <size_d assoc_id="69400" ship_pack="BULK" ctn_sku="5602027" size_code="L" alloc_qty="8" plan_pct_ratio="15" row_no="0" sort_value="8"/>
              </Size_b>
            </size>
          </order_d>
        </order_h>
    </order>
    </document> 
```

这需要我当前使用的 xslt，它是从我之前的帖子中获得的

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="order_h"/>

 <xsl:template match="order_h[1]">
  <xsl:copy>
   <xsl:apply-templates select=
    "@*|node()|following-sibling::*/node()"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

预期产出

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <order>
      <order_h order_no="421424" owner="GD" profoma_po="421425">
         <order_d color_code="730" item_no="100000014" line_no="1" manufacturer="100783"
                  order_no="421424"
                  owner="GD">
            <size assoc_id="69398" match_id="14" model_name="SIZE SCALE 2" pack_code="BULK"
                  size_id="SIZE SCALE 2"
                  size_range="2">
               <Size_b assoc_id="69398" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="26" assoc_id="69398" ctn_sku="5602001" plan_pct_ratio="34"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="S"
                          sort_value="6"/>
               </Size_b>
               <Size_b assoc_id="69398" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="11" assoc_id="69398" ctn_sku="5602182" plan_pct_ratio="15"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="L"
                          sort_value="8"/>
               </Size_b>
               <Size_b assoc_id="69398" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="21" assoc_id="69398" ctn_sku="5602078" plan_pct_ratio="27.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="M"
                          sort_value="7"/>
               </Size_b>
               <Size_b assoc_id="69398" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="18" assoc_id="69398" ctn_sku="5602060" plan_pct_ratio="23.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="XS"
                          sort_value="5"/>
               </Size_b>
            </size>
         </order_d>
         <order_d color_code="002" item_no="100000014" line_no="3" manufacturer="100783"
                  order_no="421424"
                  owner="GD">
            <size assoc_id="69400" match_id="14" model_name="SIZE SCALE 2" pack_code="BULK"
                  size_id="SIZE SCALE 2"
                  size_range="2">
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="17" assoc_id="69400" ctn_sku="5602019" plan_pct_ratio="34"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="S"
                          sort_value="6"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="14" assoc_id="69400" ctn_sku="5602238" plan_pct_ratio="27.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="M"
                          sort_value="7"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="12" assoc_id="69400" ctn_sku="5602131" plan_pct_ratio="23.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="XS"
                          sort_value="5"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="8" assoc_id="69400" ctn_sku="5602027" plan_pct_ratio="15" row_no="0"
                          ship_pack="BULK"
                          size_code="L"
                          sort_value="8"/>
               </Size_b>
            </size>
         </order_d>
         </order_h>
         <order_h order_no="421425" owner="GD" profoma_po="421425">
         <order_d color_code="002" item_no="100000014" line_no="3" manufacturer="100783"
                  order_no="421424"
                  owner="GD">
            <size assoc_id="69400" match_id="14" model_name="SIZE SCALE 2" pack_code="BULK"
                  size_id="SIZE SCALE 2"
                  size_range="2">
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="17" assoc_id="69400" ctn_sku="5602019" plan_pct_ratio="34"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="S"
                          sort_value="6"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="14" assoc_id="69400" ctn_sku="5602238" plan_pct_ratio="27.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="M"
                          sort_value="7"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="12" assoc_id="69400" ctn_sku="5602131" plan_pct_ratio="23.5"
                          row_no="0"
                          ship_pack="BULK"
                          size_code="XS"
                          sort_value="5"/>
               </Size_b>
               <Size_b assoc_id="69400" pct_ratio="PCT" priority="0" row_no="0" ship_pack="BULK"
                       total_pct="100">
                  <size_d alloc_qty="8" assoc_id="69400" ctn_sku="5602027" plan_pct_ratio="15" row_no="0"
                          ship_pack="BULK"
                          size_code="L"
                          sort_value="8"/>
               </Size_b>
            </size>
         </order_d>
      </order_h>
   </order>
</document> 
```

有人可以让我知道如何获得预期的输出。@Dimitre 很抱歉没有在我之前的帖子中解释我的确切要求。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:23:29.280

如果您使用的是 XSLT1.0，那么这是一项称为 Muenchian Grouping 的技术的工作。您正在按**order_no属性对****order_h**元素进行分组，在这种情况下，您定义以下键：

 **```
 <xsl:key name="order" match="order_h" use="@order_no" /> 
```

接下来，对于每个**order_h**元素，您需要将组中首先出现的元素与其给定的**order_no**属性相匹配。您可以按如下方式执行此操作：

```
<xsl:template match="order_h[generate-id() = generate-id(key('order', @order_no)[1])]"> 
```

为了解释这是如何工作的，表达式`key('order', @order_no)[1]`返回当前属性的键中的第一个元素。然后将其与当前元素进行比较以查看它是否匹配。

在此模板中，您可以复制元素，并像这样输出所有子元素

```
<xsl:apply-templates select="key('order', @order_no)/*" /> 
```

您还需要一个模板来匹配其他**order_h**元素，以便它们不会输出两次：

```
<xsl:template match="order_h" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="order" match="order_h" use="@order_no" />

   <xsl:template match="order_h[generate-id() = generate-id(key('order', @order_no)[1])]">
      <order_h>
         <xsl:apply-templates select="@*"/>
         <xsl:apply-templates select="key('order', @order_no)/*" />
      </order_h>
   </xsl:template>

   <xsl:template match="order_h" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

这应该有望为您提供所需的输出。

如果您使用的是 XSLT2.0，则可以使用**xsl:for-each-group**来实现相同的目的

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="order">
      <order>
         <xsl:for-each-group select="order_h" group-by="@order_no">
            <order_h>
               <xsl:apply-templates select="@*"/>
               <xsl:apply-templates select="current-group()/*"/>
            </order_h>
         </xsl:for-each-group>
      </order>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```**

# javascript - 通过 WebService API 为特定父项目的 Rally 投资组合项自定义网格查询语法

> ID：13615467
> 
> 赞同：2
> 
> 时间：2012-11-28T22:22:26.000
> 
> 标签：javascript, rally

我们开始尝试使用 Rally 的 Portfolio Items 的 WebService API。我们在 Rally 中创建自定义 GRID 应用程序时没有任何问题，但在尝试创建自定义 HTML 应用程序时遇到了问题。我们正在尝试查询特定父投资组合项目的投资组合项目列表（投资组合项目层次结构中的最低级别）。

我们正在使用以下查询，它适用于自定义 GRID 应用程序，但不适用于自定义 HTML 应用程序：

```
'(Parent.FormattedID = "P123")', 
```

我们正在使用以下 API 版本：

```
<script type="text/javascript" src="/apps/1.32/sdk.js?apiVersion=1.38"></script> 
```

这是我们在 HTML 自定义网格中使用的相关代码：

```
function onLoad() {
    rallyDataSource = new rally.sdk.data.RallyDataSource(
        '123456789',
        '123456790',
        '__PROJECT_SCOPING_UP__',
       '__PROJECT_SCOPING_DOWN__');

   var queryConfig = [];

   queryConfig.push({
       type: 'portfolioitem',
       key  : 'pisQueryKey',
       query: '(Parent.FormattedID = "P123")',
       fetch: 'FormattedID,Name,PortfolioItemType,PlannedStartDate,PlannedEndDate,LeafStoryCount,LeafStoryP>lanEstimateTotal,PercentDoneByStoryCount,PercentDoneByStoryPlanEstimate'
   });

    rallyDataSource.findAll(queryConfig, drawTable);                    
} 
```

我们只看到“没有可显示的内容”。在表格标题下。提前感谢您提供任何建议和/或替代解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:43:10.203

这感觉就像一个错误。SDK 1.x 使用与自定义网格应用程序和 SDK 2.x 不同的 Web 服务端点 (adhoc.js)。通过在查询中仅使用父级的 ref 而不是其 FormattedID，我能够使其正常工作：

```
query: '(Parent = /portfolioitem/initiative/12345)' 
```

与此同时，我会调查它，看看我能找到什么。

# haskell - 选择非空 Monoid

> ID：13615469
> 
> 赞同：2
> 
> 时间：2012-11-28T22:22:36.137
> 
> 标签：haskell, monoids

我需要一个选择非空幺半群的函数。对于列表，这将意味着以下行为：

```
> [1] `mor` []
[1]
> [1] `mor` [2]
[1]
> [] `mor` [2]
[2] 
```

现在，我实际上已经实现了它，但我想知道是否存在一些标准的替代方案，因为它似乎是一种常见的情况。不幸的是，Hoogle 没有帮助。

这是我的实现：

```
mor :: (Eq a, Monoid a) => a -> a -> a
mor a b = if a /= mempty then a else b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:03:10.090

如果您的列表最多包含一个元素，则它们与 同构`Maybe`，并且为此存在“第一个非空”幺半群：`First`from `Data.Monoid`。它是值的包装器`Maybe a`，并`mappend`返回第一个`Just`值：

```
import Data.Monoid
main = do
    print $ (First $ Just 'a') <> (First $ Just 'b')
    print $ (First $ Just 'a') <> (First Nothing)
    print $ (First Nothing)    <> (First $ Just 'b')
    print $ (First Nothing)    <> (First Nothing :: First Char)

==> Output:
First {getFirst = Just 'a'}
First {getFirst = Just 'a'}
First {getFirst = Just 'b'}
First {getFirst = Nothing} 
```

转换`[a] -> Maybe a`是使用`Data.Maybe.listToMaybe`.

附带说明：这个不限制包装类型的类型类；在您的问题中，您需要一个`Eq`实例来比较与`mempty`. `Maybe`当然，这是以拥有类型为代价的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:36:20.237

[这真的是一个很长的评论而不是一个答案]

在我的评论中，当我说“幺半群事物没有自省的概念”时——我的意思是你不能对幺半群执行分析（模式匹配、相等、<、> 等）。这当然是显而易见的——Monoids 的 API 只是一个**单元**（空的）和一个操作**mappend**（更抽象地说是 <>），它接受两个单调的东西并返回一个。为一个类型定义**mappend**是免费的用例分析，但之后你可以对 monoidal 做的所有事情就是使用 Monoid API。

在 Haskell 社区中，避免发明事物是一种民间传说，而是更喜欢使用数学和计算机科学（包括函数式编程历史）中的对象。结合 Eq（需要分析 is 参数）和 Monoid 引入了一类新事物 - 支持足够内省以允许相等的 monoid；在这一点上，有一个合理的论点是，一个 Eq-Monoid 的东西违背了它的 Monoid 超类的精神（Monoids 是不透明的）。由于这既是一类新的对象，也可能存在争议——标准实现将不存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-30T05:12:03.633

首先，您的`mor`函数看起来相当可疑，因为它需要 a`Monoid`但从不使用`mappend`，因此它的约束比必要的要大得多。

```
mor :: (Eq a, Monoid a) => a -> a -> a
mor a b = if a /= mempty then a else b 
```

[`Default`](https://hackage.haskell.org/package/data-default)你可以只用一个约束来完成同样的事情：

```
import Data.Default

mor :: (Eq a, Default a) => a -> a -> a
mor a b = if a /= def then a else b 
```

我认为任何使用 of*也*`Default`应该谨慎看待，因为我相信许多 Haskeler 抱怨，这是一个没有原则的类。

 **我的第二个想法是，您在这里真正*处理的数据类型似乎是`Maybe (NonEmpty a)`，不是`[a]`，而`Monoid`您实际上正在谈论的是`First`。

```
import Data.Monoid

morMaybe :: Maybe a -> Maybe a -> Maybe a
morMaybe x y = getFirst (First x <> First y) 
```

然后我们可以将它与列表一起使用，就像在你的例子中一样，在and`(nonEmpty, maybe [] toList)`之间的同构下：`[a]``Maybe (NonEmpty a)`

```
import Data.List.NonEmpty

morList :: [t] -> [t] -> [t]
morList x y = maybe [] toList (nonEmpty x `mor` nonEmpty y) 
```

```
λ> mor'list [1] []
[1]

λ> mor'list [] [2]
[2]

λ> mor'list [1] [2]
[1] 
```

（我确信更熟悉*镜头*库的人可以在这里提供更令人印象深刻的简洁演示，但我不立即知道如何。）

您*可以*使用谓词进行扩展`Monoid`以测试元素是否为身份。

```
class Monoid a => TestableMonoid a
  where
    isMempty :: a -> Bool

    morTestable :: a -> a -> a
    morTestable x y = if isMempty x then y else x 
```

不是每个幺半群都可以有 的实例`TestableMonoid`，但很多（包括列表）可以。

```
instance TestableMonoid [a]
  where
    isMempty = null 
```

我们甚至可以写一个新类型的包装器`Monoid`：

```
newtype Mor a = Mor { unMor :: a }

instance TestableMonoid a => Monoid (Mor a)
  where
    mempty = Mor mempty
    Mor x `mappend` Mor y = Mor (morTestable x y) 
```

```
λ> unMor (Mor [1] <> Mor [])
[1]

λ> unMor (Mor [] <> Mor [2])
[2]

λ> unMor (Mor [1] <> Mor [2])
[1] 
```

所以这就留下了这个`TestableMonoid`类是否应该存在的问题。它肯定看起来比 更“代数合法”的类`Default`，至少，因为我们可以给它一个与它相关的定律`Monoid`：

*   `isEmpty x`当且当`mappend x = id`

但我确实质疑这是否真的有任何常见的用例。正如我之前所说，Monoid 约束对于您的用例来说是多余的，因为您永远不会`mappend`. 所以我们应该问，我们是否可以设想一种情况，在这种情况下，一个人可能同时需要*和* `mappend`，`isMempty`因此对`TestableMonoid`约束有合理的需要？我可能在这里目光短浅，但我无法想象一个案例。

我认为这是因为 Stephen Tetley 在说这“违背了 Monoid 的精神”时提到了一些东西。`mappend`用稍有不同的括号将你的头转向类型签名：

```
mappend :: a -> (a -> a) 
```

`mappend`是从集合成员`a`到函数的映射`a -> a`。幺半群是一种将*值*视为*这些值的函数*的方式。`a` *幺半群是一个只有*通过这些函数让我们看到的窗口才能看到的世界的视图。功能在它们让我们看到的方面非常有限。我们对它们所做的唯一事情就是应用它们。我们从不询问函数的任何其他内容（正如斯蒂芬所说，我们没有*自省*进入他们）。因此，虽然，是的，你可以将任何你想要的东西固定到子类上，但在这种情况下，我们要固定的东西在性质上与我们正在扩展的基类有很大不同，而且感觉不太可能在函数的用例和具有普遍相等性或谓词的事物的用例，如`isMempty`.

所以最后我想回到简单而精确的方式来写这个：在值级别编写代码并停止担心类。你不需要`Monoid`也不需要`Eq`，你只需要一个额外的参数：

```
morSimple :: (t -> Bool) -- ^ Determine whether a value should be discarded
          -> t -> t -> t
morSimple f x y = if f x then y else x 
```

```
λ> morSimple null [1] []
[1]

λ> morSimple null [1] [2]
[1]

λ> morSimple null [] [2]
[2] 
```*

# php - 谷歌教程“使用 PHP/MySQL 和谷歌地图”的标记问题

> ID：13615472
> 
> 赞同：2
> 
> 时间：2012-11-28T22:22:51.450
> 
> 标签：php, javascript, mysql, google-maps, google-maps-markers

我正在尝试建立一个位置数据库来为我的非营利组织填写 FAFSA，并将它们放在带有自定义标记图像的谷歌地图上，但似乎无法显示标记。

这是创建xml的php：

```
<?php
require("mapdbinfo.php");

// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);

// Opens a connection to a mySQL server
$connection=mysql_connect ("Localhost", $username, $password);
if (!$connection) {  die("Not connected : " . mysql_error());}

// Set the active mySQL database
$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {  die("Can\'t use db : " . mysql_error());}

$query = "SELECT * FROM locations WHERE 1";
$result = mysql_query($query);
if (!$result) {  die("Invalid query: " . mysql_error());}

header("Content-type: text/xml");

// Iterate through the rows, adding XML nodes for each
while ($row = mysql_fetch_assoc($result)){
  // Add to XML document node
  $node = $dom->createElement("marker");
  $newnode = $parnode->appendChild($node);

  $newnode->setAttribute("name",$row['name']);
  $newnode->setAttribute("address", $row['address']);
  $newnode->setAttribute("lat", $row['lat']);
  $newnode->setAttribute("lng", $row['lng']);
  $newnode->setAttribute("type", $row['type']);
  $newnode->setAttribute("date", $row['date']);
  $newnode->setAttribute("cord", $row['cord']);
  $newnode->setAttribute("cord_info", $row['cord_info']);
}

echo $dom->saveXML();
?> 
```

这是java脚本：

```
 function load() {
 var location_icon = new google.maps.MarkerImage('images/FAFSA_Logo_icon.png');   
 var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(35.105305, -106.628014),
    zoom: 9,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;
  }

downloadUrl("mapmysql.php", function(data) {
var xml = data.responseXML;
var markers = xml.documentElement.getElementsByTagName("marker");
 for (var i = 0; i < markers.length; i++) {
var name = markers[i].getAttribute("name");
var address = markers[i].getAttribute("address");
var type = markers[i].getAttribute("type");
var point = new google.maps.LatLng(
    parseFloat(markers[i].getAttribute("lat")),
    parseFloat(markers[i].getAttribute("lng")));
var html = "<b>" + name + "</b> <br/>" + address + "<b> Cordinator </b>" + cord +    cord_info;
var icon =  location_icon;
var marker = new google.maps.Marker({
  map: map,
  position: point,
  icon: icon      
});
bindInfoWindow(marker, map, infoWindow, html);
}
});

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url,callback) {
 var request = window.ActiveXObject ?
     new ActiveXObject('Microsoft.XMLHTTP') :
     new XMLHttpRequest;

 request.onreadystatechange = function() {
   if (request.readyState == 4) {
     request.onreadystatechange = doNothing;
     callback(request, request.status);
   }
 };

 request.open('GET', url, true);
 request.send(null);
} 
```

我不明白为什么他们的标记没有出现。该文件位于该图像文件夹中，但是有很多地方可能会出错，我无法根据我目前的知识有效地进行故障排除。我几乎从谷歌示例中复制并粘贴了代码，除了添加一些从 xml 中提取的字段并添加了自定义图标图像。

关于如何让这些标记出现的任何想法？地图显示了我选择的中心和缩放，但没有标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:39:38.337

1.  检查 javascript 控制台是否有错误
2.  检查xml。将您的浏览器指向它，看看它是否认为它是有效的。
3.  在解析标记 xml 的地图中使用调试器（或仅添加警报），检查此 for 循环正在处理的标记变量的长度是否正确：

    for (var i = 0; i < marker.length; i++) {

以上其中一项应指出问题所在。如果没有，请发布指向您的实时地图的链接，有人可以弄清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:43:38.657

我想我可能会看到一些问题（我会在一分钟内解决它们），但首先我将尝试提供一些更一般的调试建议 -

测试依赖于服务器端代码的某人的代码非常棘手，即使它是您自己的。在这种情况下，我要做的第一件事是创建一个通用的 xml 文件进行解析，并将其包含在页面中。然后，如果出现问题，希望您可以判断代码的地图渲染部分是否出现错误。如果它有效，那么您可以将错误缩小到服务器上或您用来从服务器获取它的代码中。

接下来，我将尝试将 xml 文件按原样放在服务器上，并查看客户端文件下载是否正常。我怀疑这是您至少会注意到一个错误的地方。现在，您的地图渲染依赖于两个独立的步骤：“加载”函数，它初始化地图；并调用“downloadURL”函数，您依靠它来获取标记数据。

问题在于您如何组织调用。您在“load”中创建的“map”变量是“load”本身的本地变量；你不能在它之外访问它。有两种方法可以解决此特定问题：您可以将 map 转换为全局变量，或者在“加载”中添加所有操作 map 的代码。如果你想做前者，你只需这样做：

```
var map;
function load() {
  var location_icon = new google.maps.MarkerImage('images/FAFSA_Logo_icon.png');
  map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(35.105305, -106.628014),
    zoom: 9,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;
} 
```

这将“映射”添加到全局范围，允许在“加载”之外使用它。

但是，按原样执行此操作仍然存在问题：这不能保证在“downloadURL”开始操作地图时“load”已经初始化了地图。在“加载”有机会首先创建地图之前，它有可能尝试将“标记”添加到“地图”。幸运的是，这可以通过将“downloadURL”调用放在“load”中来解决，如下所示：

```
function load() {
  var location_icon = new google.maps.MarkerImage('images/FAFSA_Logo_icon.png');
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(35.105305, -106.628014),
    zoom: 9,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  downloadUrl("mapmysql.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for(var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
      parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address + "<b> Cordinator </b>" + cord + cord_info;
      var icon = location_icon;
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
} 
```

这可确保仅在创建地图后将标记添加到地图中，并且它们首先可以访问地图。

# github - symfony 的捆绑包，除了来自 github 的捆绑包

> ID：13615477
> 
> 赞同：0
> 
> 时间：2012-11-28T22:23:36.080
> 
> 标签：github, shared-libraries, bundle, symfony-2.1

[在这里](https://github.com/FriendsOfSymfony)除了这些 Symfony 包

是否在其他网站上共享了任何其他捆绑包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T19:10:45.660

您可以访问这个非官方但有用的网站： http: [//knpbundles.com/](http://knpbundles.com/)

由于 Symfony2 使用 composer，如果你正在寻找一个库，你可以看看：[https ://packagist.org/](https://packagist.org/)

# java - Hazelcast 节点被移除

> ID：13615485
> 
> 赞同：1
> 
> 时间：2012-11-28T22:24:08.830
> 
> 标签：java, hazelcast

我无法理解为什么新创建的 hazelcast 节点会自动从集群中删除。它与内存泄漏有什么关系吗？记录的信息如下：

```
Members [2] {   
Member [127.0.0.1:5702]     
Member [127.0.0.1:5703] this lite 
>  }
> 
```

> [#|2012-11-27T16:23:07.161+1100|INFO|glassfish3.0.1|Project.ConnectionStatusServiceImpl|_ThreadID=66;_ThreadName=Thread-1;|memberRemoved {成员 [127.0.0.1:5701]}|#]
> 
> ```
> Members [1] {   
>    Member [127.0.0.1:5703] this lite 
> ```
> 
> }
> 
> [#|2012-11-27T16:23:08.657+1100|INFO|glassfish3.0.1|Project.ConnectionStatusServiceImpl|_ThreadID=66;_ThreadName=Thread-1;|memberRemoved {成员 [127.0.0.1:5702]}|#]

# python - PyGame - 绘制一个像素并打印出它的坐标

> ID：13615489
> 
> 赞同：1
> 
> 时间：2012-11-28T22:24:28.790
> 
> 标签：python, graphics, pygame, python-idle

这似乎是一个很容易回答的问题，但我只是一个需要快速帮助的初学者。

我正在尝试创建一个程序，当您单击 pyGame 窗口上的某个位置时，它会打印出您用鼠标左键点击它，并打印出按下位置的坐标。我已经有了这个。我在让它在 pyGame 窗口上绘制像素时遇到问题。基本上，我希望它在我按下 pyGame 窗口的位置绘制一个像素。

```
#!/usr/bin/env python

#import the module for use 
import pygame

#setting up some variables
running = 1
LEFT = 1 
#Set up the graphics area/screen
screen=pygame.display.set_mode((640,400))

#continuous loop to keep the graphics running
while running==1:
    event=pygame.event.poll()
    if event.type==pygame.QUIT:
        running=0
        pygame.quit()
    elif event.type==pygame.MOUSEBUTTONDOWN and event.button==LEFT:
        print "You pressed the left mouse button at (%d,%d)" %event.pos
    elif event.type==pygame.MOUSEBUTTONUP and event.button==LEFT:
        print "You released the left mouse button at (%d,%d)" %event.pos 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:32:56.373

当您收到鼠标按下事件时，尝试设置每个像素的颜色。

```
elif event.type==pygame.MOUSEBUTTONDOWN and event.button==LEFT:
  print "You pressed the left mouse button at (%d,%d)" %event.pos
  screen.set_at((event.pos.x, event.pos.y), pygame.Color(255,0,0,255)) 
```

请注意，这将根据需要临时锁定和解锁 Surface。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T03:30:30.237

我将 Aesthete 的代码编辑为一个独立的工作示例：

根据您的操作，获取/设置单个像素可能会很慢。（如果需要，可以使用 Surfarray 和 Pixelarray。）

```
import pygame
from pygame.locals import *

class Game(object):
    done = False
    def __init__(self, width=640, height=480):
        pygame.init()
        self.width, self.height = width, height
        self.screen = pygame.display.set_mode((width, height))

        # start with empty screen, since we modify it every mouseclick
        self.screen.fill(Color("gray50"))

    def main_loop(self):
        while not self.done:
            # events
            events = pygame.event.get()
            for event in events:
                if event.type == pygame.QUIT: self.done = True
                elif event.type == KEYDOWN:
                    if event.key == K_ESCAPE: self.done = True
                elif event.type == MOUSEMOTION:
                    pass
                elif event.type == MOUSEBUTTONDOWN and event.button == 1:
                    print "Click: ({})".format(event.pos)
                    self.screen.set_at(event.pos, Color("white"))

            # draw
            pygame.display.flip()

if __name__ == "__main__":
    g = Game()
    g.main_loop() 
```

# wordpress - Wordpress 3.4.2 仅适用于帖子、档案和类别 的自定义永久链接

> ID：13615493
> 
> 赞同：2
> 
> 时间：2012-11-28T22:25:01.630
> 
> 标签：wordpress, permalinks

我们有一个在 WordPress 3.4.2 上运行的自定义 WordPress 主题，并且在我们的永久链接设置和我们在网站上使用的特定日历插件方面遇到了一些问题。我们的网站有点非传统，因为我们所有的帖子都位于网站的一个名为 /news-events/ 的部分中（例如 www.domain.com/news-events/）。

目前，我们正在使用以下自定义永久链接结构：/news-events/%year%/%monthnum%/%postname%/ 来匹配我们帖子的位置。我们使用此永久链接格式从该模板创建了大约 30 个网站，没有任何问题。

然而，我们在这个特定网站上使用的日历插件（The Events Calendar Pro 2.0.10）要求永久链接结构是/%postname%/。当永久链接结构设置为 /%postname%/ 以外的任何内容时，任何日历事件页面都会返回 404 页面。不幸的是，将我们的永久链接结构设置为 /%postname%/ 对我们来说不是一个可行的选择，因为我们必须保留 /news-events/%year%/%monthnum%/%postname%/。

**问题：**

是否可以将整个 WordPress 永久链接设置为 /%postname%/，同时将帖子、档案和类别​​的永久链接结构自定义为 /news-events/%year%/%monthnum%/%postname%/？换句话说：我们如何才能将永久链接结构更改为 /news-events/%year%/%monthnum%/%postname%/ 只有在查看帖子、类别或存档时？

* * *

以下页面提供了一些有用的信息，但是，我们似乎需要做与描述相反的事情：http: [//shibashake.com/wordpress-theme/custom-post-type-permalinks](http://shibashake.com/wordpress-theme/custom-post-type-permalinks) [http://shibashake.com /wordpress-theme/custom-post-type-permalinks-part-2](http://shibashake.com/wordpress-theme/custom-post-type-permalinks-part-2)

非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:54:28.907

您可以将永久链接结构设置为`%postname%/news-events/%year%/%monthnum%`吗？

可能允许插件抓取请求的第一部分（作为 postname）

# backbone.js - Tablesorter 不会对 Backbone.js 呈现的表格进行排序

> ID：13615497
> 
> 赞同：0
> 
> 时间：2012-11-28T22:25:11.893
> 
> 标签：backbone.js, tablesorter

我在让 tablesorter 使用以下代码正常工作时遇到问题：

```
el = this.view.render().el;
$("#players").html(el);
$("#players-table").tablesorter({
  theme: 'blue'
}); 
```

表格排序器样式可以很好地应用，但没有任何列会排序。

但是，如果我在第 3 行的 firebug 中设置断点，等到表格呈现然后继续，它工作正常。

根据 .html() jQuery 文档，.html() 是一个同步调用。这不应该意味着设置断点和“等待”不应该有效果吗？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:11:11.617

原来问题是我忘记了正在获取的集合是异步的。因此，虽然这段代码实际上是正确的，但它是在集合（传递给视图）被填充之前运行的。

所以断点起作用的原因是它给了收集时间来填充和渲染，然后再通过表格和表格排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T06:20:24.440

如果没有更多上下文，我最好的解决这个问题的客人是专门针对 jquery 元素`$el`而不是`el`.

```
$("#players").html(this.view.render().el);
this.view.$el.tablesorter({
     theme: 'blue'
}); 
```

# sql - MS SQL Studio 2008 查询 - 如果我期待 100 个结果但只收到 95 个，那么确定丢失哪些记录的简单方法是什么？

> ID：13615499
> 
> 赞同：2
> 
> 时间：2012-11-28T22:25:24.290
> 
> 标签：sql, sql-server-2008

我收到的请求要求我针对几个不同的表查询多达 1,000 个帐号。

我正在寻找一种简单的方法来确定在我查询的表中找不到哪些帐号。

例如：

```
 select
        a.account#
        a.date
        a.amount
    from
        transactiontable as A
    where
        a.account# in ('1','2','3','4') 
```

如果帐户# 3 不在此表中，则根本不会显示该帐户，我的结果将如下所示：

```
 Account# | Date | Amount
    --------------------------
         1    | 8/31 | $2.50
         2    | 8/31 | $7.25
         4    | 8/31 | $0.63 
```

只有 4 个帐号，很容易确定缺少哪个帐号。拥有 1,000 多个帐号，即使不是不可能，也很难找出丢失的帐号。我不能使用“NOT IN”子句，因为它会返回数万条我不想要的记录。

我已经尝试使用具有所有帐号的主表进行各种连接，但没有成功。

sql studio 中是否有快速确定缺少哪些帐号的方法？或者有没有办法对查询进行编码以获得看起来更像这样的结果？

```
 Account# | Date | Amount
    --------------------------
         1    | 8/31 | $2.50
         2    | 8/31 | $7.25
         3    | NULL |  NULL
         4    | 8/31 | $0.63 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:28:33.430

> 或者有没有办法对查询进行编码以获得看起来更像这样的结果？

将您的交易表与您的 Accounts 表连接起来。从 Accounts 表中选择您的 Account#，并从您的 transactions 表中选择您的剩余字段。这将为每个账户生成记录，但对于那些没有相应交易的账户则为空数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T22:36:06.523

像这样的东西应该工作。使用您选择的文本编辑器来构建语句的第一部分。

```
DECLARE @accountsTable TABLE (AccountId INT)
INSERT INTO @accountsTable VALUES (1)
INSERT INTO @accountsTable VALUES (2)
INSERT INTO @accountsTable VALUES (3)
INSERT INTO @accountsTable VALUES (4)

SELECT  a.AccountId, t.*
FROM    @accountsTable a
        LEFT OUTER JOIN transactionTable t ON a.AccountId = t.AccountId 
```

# java - JAXB 无法将接口作为参数和返回类型处理

> ID：13615501
> 
> 赞同：1
> 
> 时间：2012-11-28T22:25:30.953
> 
> 标签：java, web-services, jaxb

通过使用以下内容注释您的服务 Impl 类，可以让 jaxb 处理接口类：@XmlSeeAlso ({SomeImplClass.java})

并使用以下方法注释接口文件：@XmlRootElement @XmlJavaTypeAdapter(AnyTypeAdapter.class)

但是，这对我来说是个问题，因为我使用的接口不可编辑，并且为它创建 Impl 类是不可行的，因为该接口有大量嵌套接口。

有解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:54:11.807

如果您从 JAXB 的角度思考：它将 JAVA 类编组和解组为 XML，因此无法解决此问题。

好像我是**JAXB**并且有人为我提供了 marshall 的接口，那么我将不得不**猜测用户指的是哪个具体实现**，而它不能这样做。这就是为什么我认为这是不可能的。

# grails - 使用第三个“加入”类的多对多 Grails

> ID：13615503
> 
> 赞同：0
> 
> 时间：2012-11-28T22:25:37.113
> 
> 标签：grails, many-to-many, grails-orm

我读到 am:m 关系通常意味着还不需要第三类。所以我有 m:m on `User`and `Project`，我创建了第三个域类，`ProjectMembership`

这三个域如下（为了便于说明而最小化）：

用户

```
class User {

String name 

static hasMany = [projectMemberships : ProjectMembership]
} 
```

项目成员

```
class ProjectMembership {

static constraints = {          
}

static belongsTo = [user:User, project:Project]
} 
```

项目：

```
class Project {

String name

static hasMany = [projectMemberships : ProjectMembership]

     static constraints = { 
     }
} 
```

如果我有用户的 ID，如何获取`Project`分配给他们的对象列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:27:28.857

有几种方法 - 这里有几个：

```
def user = User.get(userId)
ProjectMembership.findAllByUser(user).collect { it.project } 
```

或避免查询用户：

```
ProjectMembership.withCriteria {
    user {
        eq('id', userId)
    }
}.collect { it.project } 
```

警惕会返回大型结果集的查询 - 您最终会得到一个巨大的内存中项目对象列表。

# mongodb - Mongoose ODM 多个嵌套模式

> ID：13615506
> 
> 赞同：0
> 
> 时间：2012-11-28T22:25:58.653
> 
> 标签：mongodb, mongoose

我需要能够嵌套具有不同模式的文档。这可能不使用引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:51:53.183

我认为你最好定义一个单一的模式，它是所有潜在配置文件模式的超集，并且只需根据每个配置文件的需要使用该模式的任何部分。

# java - 无法让 HTTP Post 工作

> ID：13615508
> 
> 赞同：1
> 
> 时间：2012-11-28T22:26:12.947
> 
> 标签：java, http

我正在尝试使用 apache http 客户端制作一个简单的 http 帖子，但我终生无法让它工作。我基于以下示例：[http](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpState.html) ://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpState.html 。我不认为我的 url、主机或端口有问题的原因是因为我让它们都可以在常规的 html 表单和 telnet 中工作。

我得到的错误是：

> org.apache.commons.httpclient.ProtocolException：服务器 somehost.something.com 未能响应有效的 HTTP 响应

这是我的代码：

```
public InputStream trialPost() {
    PostMethod post = new PostMethod("https://somesite.com/example.php");
    NameValuePair[] data = {
      new NameValuePair("parameter1", "blah"),
      new NameValuePair("parameter2", "blah")
    };
    post.setRequestBody(data);
    HttpState hs = new HttpState();
    HttpConnection hc = new HttpConnection("somehost.something.com", 443);
    InputStream in = null;
    try {
        hc.open();
        post.execute(hs, hc);    
        in = post.getResponseBodyAsStream();
        hc.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    // handle response.
    return in;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:37:31.833

您正在尝试在[`HttpConnection`](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpConnection.html)使用 HTTPS 的服务器上使用它，但它不起作用。我建议您查看有关[通过 SSL 进行通信](http://hc.apache.org/httpclient-3.x/sslguide.html)的 HTTPClient 文档。

# php - 如何删除警告：网站上的错误

> ID：13615509
> 
> 赞同：-7
> 
> 时间：2012-11-28T22:26:14.593
> 
> 标签：php

在我的网站上，我有一个制作 Flash 图像的脚本，唯一的问题是，每次制作它时都必须对其进行配置，我有一个每分钟都会执行此操作的 cron 作业。唯一的问题是在那一分钟之前，大约有 500 行（警告：随机错误代码）。是否可以删除错误代码，以便使用脚本的人看不到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:29:01.197

关闭错误报告？

```
error_reporting(0); 
```

也就是说，我会尝试找出一种比仅仅抑制错误更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:28:53.130

在您的 PHP 脚本中，使用

```
 error_reporting(0);
 display_errors(0); 
```

或者在整个站点（或文件夹）的 .htaccess 文件中

```
 php_value display_errors 0 
```

但是为什么不从制作闪存的脚本中触发配置脚本呢？然后你不会有任何错误要处理......

只是

```
<?php require('configurationscript.php'); ?> 
```

在 Flash 脚本的结尾...

# javascript - replace 不会替换句子中的每个字符

> ID：13615510
> 
> 赞同：-3
> 
> 时间：2012-11-28T22:26:17.070
> 
> 标签：javascript, replace

> **可能重复：**
> [为什么javascript在使用replace时只替换第一个实例？](https://stackoverflow.com/questions/1967119/why-does-javascript-replace-only-first-instance-when-using-replace)
> [如何在 JavaScript 中用“_”替换字符串中所有出现的“/”？](https://stackoverflow.com/questions/2159251/how-do-i-replace-all-occurrences-of-in-a-string-with-in-javascript)

我想替换`-`一个句子中的每个，但它只替换第一个`-`。这是我的代码：

```
var string = 'this-is-a-line-of-words';
alert(string.replace('-', '/'));​ 
```

为什么它只替换我要替换的第一个字符？[jsFiddle 演示](http://jsfiddle.net/edgren/cdyTS/)。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:27:09.683

使用全局正则表达式：

```
string.replace(/-/g, '/') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:28:28.810

请使用`string.replace(/-/g, '/')`. 请检查[此](http://davidwalsh.name/javascript-replace)文档。

# java - Java 7 在未安装 JDK 的情况下触发堆转储

> ID：13615513
> 
> 赞同：5
> 
> 时间：2012-11-28T22:26:23.740
> 
> 标签：java, java-7, heap-dump

如何在未安装 JDK 的情况下为在 Linux 上运行的 Java 7 VM 触发堆转储？

在早期版本的 Java 中，可以设置`-XX:+HeapDumpOnCtrlBreak`JVM 选项，然后使用`kill -QUIT <pid>`. 我一直无法让它与 Java 7 一起使用。是否有与此等效的方法，而无需安装 JDK 来获取 JVisualVM 或 jmap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:44:14.213

VM 选项`-XX:+HeapDumpOnCtrlBreak`不再在[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)中列出。因此，我得出结论，它不再受支持。

来自[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)：

> 使用 -XX 指定的选项不稳定，如有更改，恕不另行通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:47:27.313

您可以使用 生成核心转储`gcore`，将其移动到另一台计算机，然后附加`jmap`以生成 hprof 文件，如[使用 gcore 获取的核心转储中所述，jmap 转换为 hprof 文件格式失败并显示错误消息](https://stackoverflow.com/questions/9981080/core-dump-taken-with-gcore-jmap-conversion-to-hprof-file-format-fails-with-erro)

另请参阅[接受的答案](https://stackoverflow.com/a/9981498/33622)。

# wso2 - WSO2 ESB 4.5.0 代理服务管理 UI 在启用集群时不起作用

> ID：13615523
> 
> 赞同：0
> 
> 时间：2012-11-28T22:27:13.610
> 
> 标签：wso2, wso2esb, wso2carbon

我测试了 WSO2 ESB 4.5.0 的全新安装，启用了集群并按照[此处](http://ajithvblogs.blogspot.com/2012/09/create-jdbc-mount-to-wso2-governance.html)所述进行远程注册表挂载：

轴2.xml：

```
<clustering class="org.apache.axis2.clustering.tribes.TribesClusteringAgent" enable="true"> 
```

试图列出现有服务并创建新的代理服务，但列表功能和任何代理服务类型向导都不起作用，出现很多[异常](http://pastebin.com/KraHaYqW)

然后我禁用了集群：

```
<clustering class="org.apache.axis2.clustering.tribes.TribesClusteringAgent" enable="false"> 
```

挂载仍然存在并且挂载没有错误，但显然集群在禁用时不起作用。

这是一个错误或集群需要一些额外的配置来避免此类错误吗？在远程注册表挂载的情况下，我真的需要启用集群吗？

谢谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:57:35.023

不幸的是，该博客中的注册表挂载配置存在配置错误。所以它现在已经更新，请参考该博客再次进行安装配置。

# ruby-on-rails - 使用 Rails3 中的 Mailgun HTTP api

> ID：13615528
> 
> 赞同：2
> 
> 时间：2012-11-28T22:27:30.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, mailgun

我们正在努力更改 Rails 3.2 应用程序以使用[Mailgun](http://www.mailgun.com/) http api 来处理电子邮件活动。目前我们正在使用 ActionMailer 来构建我们的模板并通过 smtp 发送，但由于我们想使用 Mailgun 提供的一些更高级的功能，我们宁愿不处理所有的 MIME 标头，而是使用 REST api。

要将我们的 haml 模板呈现为 HTTP POST 的字符串，看起来我们需要使用某种控制器或提交“设计气味”并从模型中调用操作视图。由于电子邮件将由后台工作人员执行，因此从控制器调用它实际上没有意义；我们还缺少其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-31T09:23:03.890

我[为 mailgun 编写了 Rails Action Mailer 适配器](https://github.com/jorgemanrubia/mailgun_rails)。这意味着您可以使用[标准的 Rails 方法来发送电子邮件](http://guides.rubyonrails.org/action_mailer_basics.html)，而不必为此发明自定义包装器。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:44:01.243

来自 Haml[文档](https://github.com/haml/haml/blob/master/lib/haml/engine.rb#L91)：

```
template = File.read('path_to/your_haml_file')
haml_engine = Haml::Engine.new(template)
your_variables = {  }
html = haml_engine.render(Object.new, your_variables) 
```

# pyrocms - 如何在 PyroCMS 的模块中设置主题布局？

> ID：13615533
> 
> 赞同：0
> 
> 时间：2012-11-28T22:28:02.927
> 
> 标签：pyrocms

我正在做

```
 $this->template
            ->set_breadcrumb(lang('stuff'), 'stuff')
            ->set_breadcrumb($col->title)
            ->set_layout('questions')
            ->set('title', $col->title)
            ->build('view', $this->data); 
```

但是我的文件夹`questions`中的布局文件`my_theme`。

如何指定布局目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:41:24.733

我回答的时候你的问题变了，所以现在我很困惑。这是正确的，以前不是。

[PyroCMS 模板库文档](http://docs.pyrocms.com/2.1/manual/developers/tools/template-library#setlayoutlayoutname)

位置是`addons/<default or shared_addons>/themes/<theme>/views/layouts/`，`questions.html`布局应该设置在那里，就在它的伙伴旁边`default.html`。

您当然可以跳过所有这些，只需制作与模块同名的布局。因此，完全删除该`set_layout()`方法，您就已经完成了任务。

# regex - 分析过滤器 - 主机名包括目录？

> ID：13615541
> 
> 赞同：3
> 
> 时间：2012-11-28T22:28:31.837
> 
> 标签：regex, google-analytics, analytics

我在分析配置文件上设置了一个正则表达式过滤器，仅包含来自特定子域的数据：

`^subdomain\.domain\.com`

这很好用。问题是，该站点的管理部分位于不同的子域下。我不想在此配置文件中包含来自其他子域的所有流量，只包含与此配置文件相关的管理部分的数据。例如，我想向原始配置文件添加一个过滤器以包含来自以下的流量：

`othersubdomain.domain.com/admin/edit/`

这仍然应该是主机名过滤器吗？任何有关方向/正则表达式的帮助将不胜感激。

希望这是有道理的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:38:46.997

如果您的系统接受逻辑“或”运算符`|`，则使用

```
^subdomain\.domain\.com|^othersubdomain\.domain\.com/admin/edit/ 
```

# ruby-on-rails - 我在哪里可以存储 Rails 的 http_basic_authentication_with 中使用的密码/用户名组合？

> ID：13615544
> 
> 赞同：3
> 
> 时间：2012-11-28T22:28:37.233
> 
> 标签：ruby-on-rails, authentication, basic-authentication

我正在尝试使用 Rails 的 http_basic_authenticate_with 方法来保护个人应用程序。文档以此为例：

```
class PostsController < ApplicationController
   http_basic_authenticate_with :name => "dhh", :password => "secret", :except => :index

   def index
     render :text => "Everyone can see me!"
   end

   def edit
     render :text => "I'm only accessible if you know the password"
   end
end 
```

我正在寻找一种将密码和用户名保留在控制器代码之外的方法。我听说过环境变量或“配置文件”作为一个选项，但我不知道如何实现它。

我已经看到了这个[关于](https://stackoverflow.com/questions/12574519/where-should-i-put-username-password-for-http-basic-authentication-in-rails-app)在哪里放置 http 基本身份验证的用户名/密码的问题，但答案（Railscast）是针对 Rails 2.x 的。

谢谢！

编辑：我应该澄清我正在使用存储库，因此需要某种可以从 git 中签出的文件...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:34:48.597

IMO 最好的办法是使用 yaml 文件和应用程序级变量。

在 rails init 上方的 application.rb 内部尝试如下操作：

```
raw_config = File.read("#{Rails.root}/config/app_config.yml")
APP_CONFIG = YAML.load(raw_config)[Rails.env].symbolize_keys 
```

然后使用如下键创建一个 app_config.yml 文件：

```
name: dhh
password: secret 
```

您还可以使用以下方法设置特定于环境的环境：

```
development:
  name: dhh
  password: secret
production:
  name: whatever
  password: sauce 
```

完成后，您可以像这样引用应用程序级别的变量：

```
http_basic_authenticate_with :name => APP_CONFIG[:name], :password => APP_CONFIG[:password], :except => :index 
```

享受！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:36:21.637

如果是我，我会使用 SettingsLogic 并将它们存储在那里。

[https://github.com/binarylogic/settingslogic](https://github.com/binarylogic/settingslogic)

如果您希望它们来自环境，那么您可以在控制器中执行以下操作：

```
http_basic_authenticate_with :name => MY_USER, :password => MY_PASS, :except => :index 
```

然后说 config/initializers/my_user_pass.rb：

```
MY_USER=ENV['SOME_USER']
MY_PASS=ENV['SOME_PASS'] 
```

然后确保您的 Rails 应用程序如何加载 SOME_USER 和 SOME_PASS 设置为环境变量。

此外，我在上面选择的所有变量名都非常糟糕。请选择更好的东西。

还有.. 除非您在您的环境中需要它们，否则我真的建议您使用 SettingsLogic。这对这个和其他许多事情都很好。

# javascript - 使用自调用函数和准备文档的区别

> ID：13615545
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:28:39.807
> 
> 标签：javascript, jquery

为什么这在加载标题内容时不起作用...

```
(function ($) {
    var mheaderwrapper = '<div id="header"></div><div class="header-menu"></div>';
    var mheadercontent = '/shop/Pages/global_header.html';
    var mmenucontent = '/shop/Pages/global_megamenu.html';
    var mjqueryhover = 'js/jquery.hoverIntent.minified.js';
    var mjquerymenu = 'js/jquery.custom-menu.js';
    $('#wrapper').prepend(mheaderwrapper);
    $('#header').load(mheadercontent);
    $('.header-menu').load(mmenucontent, function(){
       $.getScript(mjqueryhover);
       $.getScript(mjquerymenu);
    });
})(jQuery); 
```

但这确实...

```
 $.mheader = function() {
    var mheaderwrapper = '<div id="header"></div><div class="header-menu"></div>';
    var mheadercontent = '/shop/Pages/global_header.html';
    var mmenucontent = '/shop/Pages/global_megamenu.html';
    var mjqueryhover = 'js/jquery.hoverIntent.minified.js';
    var mjquerymenu = 'js/jquery.custom-menu.js';
    $('#wrapper').prepend(mheaderwrapper);
    $('#header').load(mheadercontent);
    $('.header-menu').load(mmenucontent, function(){
       $.getScript(mjqueryhover);
       $.getScript(mjquerymenu);
    });
   }

$(function() {
  $.mheader();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:31:24.297

这 ：

```
(function ($) {....})(jQuery); 
```

立即执行，并且仅映射`jQuery`到`$`以确保美元符号在自执行函数中确实是“jQuery”。它**不是**“DOM 就绪”功能。

这：

```
$(function() {....}); 
```

将等到 DOM 准备好后再执行任何代码。

您可以在第一个内部使用第二个：

```
(function ($) {
    $(function() {
        //code here
    });
})(jQuery); 
```

两者都做！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:31:37.773

当您在`<head>`类似的部分中有一个函数时，它会立即执行，并且在您的 HTML 元素开始加载之前执行此操作。在您的代码执行时，您的元素`#wrapper`,`#header`和`.header-menu`类中的任何内容都不存在，这就是它失败的原因。

在第二个示例中，使用`domready`事件会延迟代码的触发，直到 DOM 准备好（并且您的 HTML 元素存在）之后，所以代码可以工作。

顺便一提，

```
$(function() {
    // executes when DOM is ready
}); 
```

只是一个捷径：

```
$(document).ready(function() {
    // executes when DOM is ready
}); 
```

上面的例子是 jQuery 提供的特定功能。不要将前者与立即执行的函数结构混淆，后者是纯 JavaScript：

```
(function() {
    // executes NOW
})(); 
```

有关如何正确结合两者的信息，请参阅[adeneo 的答案。](https://stackoverflow.com/a/13615589/74757)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:30:43.157

`$(document).ready`实际上在创建**之后**`DOM`运行。

如果在构建 DOM 之前插入到`<head>`部分中，自调用函数会立即运行。

# php - 列表项如何将数据传递给另一个活动？

> ID：13615547
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:28:42.193
> 
> 标签：php, android, mysql

我在我的 php 中有一个获取医院患者信息的请求，在我的列表项中，我有患者姓名。我想知道，如何获取属于单击的患者项目之一的数据，并出现在新活动中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:31:38.437

您可以向意图添加额外内容，然后在新活动中您可以将这些额外内容提取出来。

**在第一个活动中：**

```
Intent i = new Intent(this, SomeOtherActivity.class);
i.putExtra("key", "value");
startActivity(i); 
```

**在其他活动中：**

```
String mValue = this.getIntent().getStringExtra("key");
// mValue will now be set to the string "value" 
```

如果需要，您可以添加多个额外的内容，并且您始终可以使用添加它们时使用的相同键来查找它们。

# php - 如何验证“(344) 004-1585”类型的电话号码

> ID：13615559
> 
> 赞同：1
> 
> 时间：2012-11-28T22:29:29.197
> 
> 标签：php, phone-number

我用 jQuery 屏蔽了像“(342) 004-1452”这样的电话号码。现在我正在尝试用 PHP 验证这个输入。我试过

```
if(!preg_match('\(?[2-9][0-8][0-9]\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}', $_POST['tel']))
{
    $errors['tel']='enter a valid phone number';
} 
```

但我认为我的 preg_match 表达式无效。验证此数据的正确 preg_match 表达式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:43:43.537

你们都想多了。您真正需要做的就是验证给定的字符串是否包含正确数量的数字字符。

```
$input = '(342) 004-1452';
$stripped = preg_replace('/[^0-9]/', '', $input);

if( strlen($stripped) != 10 ) {
    printf('%s is not a valid phone number.', $input);
} else {
    printf('%s is a valid phone number. yay.', $input);
}

//output: (342) 004-1452 is a valid phone number. yay. 
```

您可以从某人输入的任何乱码输入中恢复电话号码：

```
$phone_pretty = sprintf('(%s) %s-%s',
    substr($stripped,0,3),
    substr($stripped,3,3),
    substr($stripped,6,4)
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:32:31.997

您的正则表达式缺少分隔符。用`/`：

```
'/\(?[2-9][0-8][0-9]\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}/' 
```

如果您已将环境配置为显示警告，您*应该*会看到：

> PHP 警告：preg_match()：分隔符不能是字母数字或反斜杠

如果您没有打开警告，或者有意将其关闭，您应该停止开发 PHP 代码，直到重新打开它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T22:33:56.033

您的表达式看起来不错，但`preg_match()`需要您在引号内为正则表达式的开头和结尾提供分隔符。

这些标记通常是斜线，但实际上可以是许多其他字符。

因此，在您的代码行中添加斜杠会得到以下结果：

```
if(!preg_match('/\(?[2-9][0-8][0-9]\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}/', $_POST['tel'])) 
```

如果您希望字符串只是一个电话号码而不是其他任何东西，您可能还希望通过`^`在开头和`$`结尾添加来限制正则表达式：

```
if(!preg_match('/^\(?[2-9][0-8][0-9]\)?[-. ]?[0-9]{3}[-. ]?[0-9]{4}$/', $_POST['tel'])) 
```

希望有帮助。

（也就是说，我要补充一点，您正在检查的电话号码格式仅适用于美国和美国拨号计划中的国家；大多数国际国家使用不同的格式，所以如果您想接受国际访客，您需要一个比这更宽松的正则表达式）

# r - ggplot 甜甜圈图

> ID：13615562
> 
> 赞同：17
> 
> 时间：2012-11-28T22:29:40.307
> 
> 标签：r, ggplot2, graphics, tikz, donut-chart

嗨，我真的用谷歌搜索了很多，没有任何快乐。如果存在网站，将很高兴获得对网站的引用。我很难理解[有关极坐标的 Hadley 文档，](http://docs.ggplot2.org/current/coord_polar.html)而且我知道饼图/甜甜圈图本质上被认为是邪恶的。

也就是说，我想做的是

1.  像这里显示的[tikz 环形图](https://tex.stackexchange.com/questions/17898/how-can-i-produce-a-ring-or-wheel-chart-like-that-on-page-88-of-the-pgf-manu)一样创建一个甜甜圈/环形图（所以中间有一个空的馅饼）
2.  在顶部添加第二层圆圈（`alpha=0.5`左右），显示第二个（可比较的）变量。

为什么？我正在寻找显示财务信息。第一个环是成本（分解），第二个是总收入。然后的想法是`+ facet=period`为每个审查期添加以显示收入和支出的趋势以及两者的增长。

任何想法将不胜感激

注意：如果尝试使用 MWE，则完全任意

```
donut_data=iris[,2:4]
revenue_data=iris[,1]
facet=iris$Species 
```

那将类似于我正在尝试做的事情..谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-29T22:36:17.143

对于您的问题，我没有完整的答案，但我可以提供一些代码，可以帮助您开始使用`ggplot2`.

```
library(ggplot2)

# Create test data.
dat = data.frame(count=c(10, 60, 30), category=c("A", "B", "C"))

# Add addition columns, needed for drawing with geom_rect.
dat$fraction = dat$count / sum(dat$count)
dat = dat[order(dat$fraction), ]
dat$ymax = cumsum(dat$fraction)
dat$ymin = c(0, head(dat$ymax, n=-1))

p1 = ggplot(dat, aes(fill=category, ymax=ymax, ymin=ymin, xmax=4, xmin=3)) +
     geom_rect() +
     coord_polar(theta="y") +
     xlim(c(0, 4)) +
     labs(title="Basic ring plot")

p2 = ggplot(dat, aes(fill=category, ymax=ymax, ymin=ymin, xmax=4, xmin=3)) +
     geom_rect(colour="grey30") +
     coord_polar(theta="y") +
     xlim(c(0, 4)) +
     theme_bw() +
     theme(panel.grid=element_blank()) +
     theme(axis.text=element_blank()) +
     theme(axis.ticks=element_blank()) +
     labs(title="Customized ring plot")

library(gridExtra)
png("ring_plots_1.png", height=4, width=8, units="in", res=120)
grid.arrange(p1, p2, nrow=1)
dev.off() 
```

![在此处输入图像描述](../Images/caf8fe58da05698ed5300dbd96d92235.png)

**想法：**

1.  如果您发布一些结构良好的示例数据，您可能会得到更有用的答案。您已经提到使用`iris`数据集中的一些列（一个好的开始），但我无法看到如何使用这些数据来制作环形图。例如，您链接到的环形图显示了几个类别的比例，但既不是分类的`iris[, 2:4]`也不`iris[, 1]`是分类的。
2.  您要“在顶部添加第二层圆圈”：您的意思是将第二个环直接叠加在第一个环的顶部吗？或者您希望第二个环位于第一个环的内部还是外部？您可以添加第二个内部环，例如`geom_rect(data=dat2, xmax=3, xmin=2, aes(ymax=ymax, ymin=ymin))`
3.  如果您的 data.frame 有一个名为 的列`period`，则可以`facet_wrap(~ period)`用于分面。
4.  为了`ggplot2`最容易使用，您需要“长格式”的数据；`melt()`包中的`reshape2`数据可能对转换数据有用。
5.  制作一些条形图进行比较，即使您决定不使用它们。例如，尝试： `ggplot(dat, aes(x=category, y=count, fill=category)) + geom_bar(stat="identity")`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-31T12:56:36.443

只是试图用与[bdemarest 的回答](https://stackoverflow.com/a/13636037/5410410)相同的方法来解决问题 2 。还使用他的代码作为脚手架。我添加了一些测试以使其更完整，但可以随意删除它们。

```
library(broom)
library(tidyverse)
# Create test data.
dat = data.frame(count=c(10,60,20,50),
                 ring=c("A", "A","B","B"),
                 category=c("C","D","C","D"))

# compute pvalue
cs.pvalue <- dat %>% spread(value = count,key=category) %>%
  ungroup() %>% select(-ring) %>% 
  chisq.test() %>% tidy()
cs.pvalue <- dat %>% spread(value = count,key=category) %>% 
  select(-ring) %>%
  fisher.test() %>% tidy() %>% full_join(cs.pvalue)

# compute fractions
#dat = dat[order(dat$count), ]
dat %<>% group_by(ring) %>% mutate(fraction = count / sum(count),
                                      ymax = cumsum(fraction),
                                      ymin = c(0,ymax[1:length(ymax)-1]))

# Add x limits
baseNum <- 4
#numCat <- length(unique(dat$ring))
dat$xmax <- as.numeric(dat$ring) + baseNum
dat$xmin = dat$xmax -1

# plot
p2 = ggplot(dat, aes(fill=category,
                     alpha = ring,
                     ymax=ymax, 
                     ymin=ymin, 
                     xmax=xmax, 
                     xmin=xmin)) +
  geom_rect(colour="grey30") +
  coord_polar(theta="y") +
  geom_text(inherit.aes = F,
            x=c(-1,1),
            y=0,
            data = cs.pvalue,aes(label = paste(method,
                                               "\n",
                                               format(p.value,
                                                      scientific = T,
                                                      digits = 2))))+
  xlim(c(0, 6)) +
  theme_bw() +
  theme(panel.grid=element_blank()) +
  theme(axis.text=element_blank()) +
  theme(axis.ticks=element_blank(),
        panel.border = element_blank()) +
  labs(title="Customized ring plot") + 
  scale_fill_brewer(palette = "Set1") +
  scale_alpha_discrete(range = c(0.5,0.9))

p2 
```

结果：

![伊姆古尔](../Images/52498cb395ff0a701c0a1724551556c5.png)

# javascript - 基于拖放项目的jQuery验证

> ID：13615567
> 
> 赞同：1
> 
> 时间：2012-11-28T22:29:57.047
> 
> 标签：javascript, jquery-ui, drag-and-drop

我正在尝试尽可能多地了解 jquery，查看网络上的许多示例，但仍然遇到事件问题。

如您所见，我使用 jquery UI 做了一个简单的拖放操作，但我发现 arround 的所有示例都没有帮助我验证这一点。

我创建了正确答案，但问题是我不知道如何验证它们。很容易看出，“a”到 1，“b”到 2，“c”到 3，当我点击“提交”按钮时，它会验证。

```
var correctAnswers = ['a-1,b-2,c-3'];

$('.dragAble').draggable({
    containment: "#content",
    cursor: "move",
    snap: ".dropAble"
});
if (answers === correctAnswers) {
    $("#win").show();
} else {
    $("#fail").show();
};​ 
```

[**JSFiddle**](http://jsfiddle.net/87tMj/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:40:33.960

试试这个代码：

```
var correctAnswers = ['a-1', 'b-2', 'c-3'];
var results = [];

$('.dragAble').draggable({
    containment: "#content",
    cursor: "move",
    snap: ".dropAble",
});

$( ".dropAble" ).droppable({
    drop: function( event, ui ) {
        results.push($(ui.draggable).attr("id") + '-' + $(this).attr("id"));
    }
});

$("#submit").click(function(){
    console.log(results);
    result = true;
    $.each(results, function(index, value){
        if($.inArray(value, correctAnswers ) == -1){
            result = false;
        }

        if(!result) return;
    });

    if (result) {
        $("#win").show();
    } else {
        $("#fail").show();
    };
});​ 
```

这里是小提琴[http://jsfiddle.net/aanred/x3jF3/](http://jsfiddle.net/aanred/x3jF3/)。但是这段代码只有你需要改进的基本功能。

# assembly - 68000 上的 CCR

> ID：13615568
> 
> 赞同：2
> 
> 时间：2012-11-28T22:30:11.180
> 
> 标签：assembly, 68000

所以我被一个朋友问了一个汇编问题，他也在努力学习和理解这门语言。他问：

给定以下寄存器值：

```
D0: 364B 421E
D1: F3FC 9066 
```

指令执行后：

```
cmp.w    D0,D1 
```

CCR 中的结果值是什么：

```
N:    Z:    V:    C: 
```

以及是否会出现以下每个分支：

```
BLO    <Label>     Yes or No?

BVC    <Label>     Yes or No?

BGE    <Label>     Yes or No?

BMI    <Label>     Yes or No?

BLT    <Label>     Yes or No?

BCS    <Label>     Yes or No? 
```

当我向他解释时，有人可以帮助我理解它吗，我可以加深对这个概念和答案的理解。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:49:52.983

将这些概念映射到现代术语可能会有所帮助。C 标志对应于无符号算术，N 和 V 标志对应于有符号算术。Z 标志对两者都有效。

分支指令在[M68000 程序员参考手册的](http://www.freescale.com/files/archives/doc/ref_manual/M68000PRM.pdf)表 3-19 中有完整的说明。请注意，表格中有几个错别字。

对于无符号算术，使用以下分支：

```
>   BHI
<=  BLS
>=  BCC/BHS
<   BCS/BLO 
```

对于有符号算术，请使用以下分支：

```
>=  BGE
<   BLT
>   BGT
<=  BLE 
```

这些对两者都有效：

```
==  BEQ
!=  BNE 
```

最后是 BVS/BVC 对。溢出时设置 V 标志，这意味着结果的符号位不跟随输入的符号位。例如，从正数中减去负数应始终得到正数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T10:51:33.467

除了溢出和进位之外，ccr 标志大多数都是自我解释的，但是根据这个[http://teaching.idallen.com/dat2343/10f/notes/040_overflow.txt](http://teaching.idallen.com/dat2343/10f/notes/040_overflow.txt)你应该能够弄清楚它们

## 携带标志

在二进制/整数数学中打开进位标志的规则有两个：

1.  如果两个数字相加导致添加的最高有效（最左边）位进位，则设置进位标志。

    1111 + 0001 = 0000（进位标志打开）

2.  如果两个数字的减法需要借位到减去的最高有效位（最左边），则也设置进位（借位）标志。

    0000 - 0001 = 1111（进位标志打开）

否则，进位标志关闭（零）。* 0111 + 0001 = 1000（进位标志关闭[零]）* 1000 - 0001 = 0111（进位标志关闭[零]）

在无符号算术中，观察进位标志以检测错误。在有符号算术中，进位标志告诉你什么有趣的东西。

## 溢出标志

在二进制/整数数学中打开溢出标志的规则有两个：

1.  如果符号位关闭的两个数字之和产生符号位打开的结果数，则打开“溢出”标志。

    0100 + 0100 = 1000（溢出标志开启）

2.  如果符号位打开的两个数字之和产生符号位关闭的结果数，则打开“溢出”标志。

    1000 + 1000 = 0000（溢出标志开启）

否则，溢出标志被关闭。* 0100 + 0001 = 0101 (溢出标志关闭) * 0110 + 1001 = 1111 (溢出标志关闭) * 1000 + 0001 = 1001 (溢出标志关闭) * 1100 + 1100 = 1000 (溢出标志关闭离开）

请注意，您只需要查看三个数字的符号位（最左侧）即可确定溢出标志是打开还是关闭。

如果您正在执行二进制补码（有符号）算术，溢出标志表示答案错误 - 您添加了两个正数并得到了一个负数，或者您添加了两个负数并得到了一个正数。

如果你在做无符号算术，溢出标志没有任何意义，应该被忽略。

# c# - 将字符串从 IHttpHandler 传递给 Javascript，然后再传递给 Silverlight

> ID：13615570
> 
> 赞同：1
> 
> 时间：2012-11-28T22:30:11.803
> 
> 标签：c#, javascript, silverlight, ihttphandler

我正在使用处理程序充当带有字符串的服务器（实际上是 xml，但我正在尝试字符串）和我的 Silverlight 应用程序之间的代理。我已经编写了处理程序，它正确地收集了字符串（xml）。我遇到的问题是将 JSON 中的字符串转换为 javascript 可以传递回我的 Silverlight 代码的字符串。

Javascript：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    var xmlReturn = new String("");
    function xmlStart() {
        $.getJSON('xmlProxy.ashx', function (data) {
            setXml(data);
        });
    }
    function setXml(data) {
        xmlReturn = data;
    }
    function getXml() {
        alert(xmlReturn);
        return xmlReturn;
    } 
```

银光：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    HtmlPage.Window.Invoke("xmlStart");
    string test = (String)HtmlPage.Window.Invoke("getXml");

    textBox1.Text = test;
} 
```

以防万一处理程序代码（为安全起见取出baseurl）：

```
namespace HttpHandler_Proxy
{
    public class xmlProxy : IHttpHandler
    {

        public void ProcessRequest(HttpContext context)
        {
            WebClient getCap = new WebClient();

            string baseurl = "some_url";
            string response = getCap.DownloadString(baseurl);

            context.Response.ContentType = "application/json";

            context.Response.Write(response);
        }

        public bool IsReusable
        {
            get
            {
                return false;
            }
        }
    }
} 
```

我对 Javascript 和 jQuery 都是相对论新手，所以这可能是一个微不足道的问题，对此我深表歉意。在此版本的代码中，它从不设置`xmlReturn`为`""`

我做过其他版本，但代码总是以 null/undefined/"" 的形式返回给 Silverlight。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:57:28.447

如果您当时不打算将该字符串视为 json，为什么不尝试使用`$.load`而不是。`getJSON`

**编辑**

首先，您应该检查`data`成功回调 (console.log(data)) 中的值。确保您的服务器端代码返回您想要的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T00:07:16.723

您的内容类型设置为 json，但您似乎没有进行任何编码，即将来自服务器的响应转换为有效的 json。尝试添加类似：

```
response = new JavaScriptSerializer().Serialize(response); 
```

# php - php执行无限循环

> ID：13615573
> 
> 赞同：2
> 
> 时间：2012-11-28T22:30:19.870
> 
> 标签：php, loops, exec

我有以下调用 exec 在后台运行脚本 test.php。

```
exec("/home/gooffers/test.php?one=one &"); 
```

脚本 test.php 包含以下内容

```
$test = $_GET['one'];
echo $test; 
```

但是，这会造成服务器崩溃的无限循环（无限数量的进程）。为什么会这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:33:29.543

`$_GET`通过命令行 (php-cli) 运行脚本时不可用。

请参阅此处，了解如何在 php 中将参数传递给命令行脚本：[如何通过网页将参数传递给 PHP 脚本？](https://stackoverflow.com/questions/9612166/passing-command-line-arguments-to-a-php-script)

基本上，它是

```
exec("/home/gooffers/test.php arg1 arg2"); 
```

然后通过

```
$argument1 = $argv[1];
$argument2 = $argv[2]; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-28T22:32:22.017

我不知道发生了什么，但我认为应该是

```
exec("php /home/gooffers/test.php?one=one &"); 
```

# ubuntu - smbmount 无法在 Ubuntu 12.10 上运行

> ID：13615575
> 
> 赞同：6
> 
> 时间：2012-11-28T22:30:23.207
> 
> 标签：ubuntu, smb, cifs

我刚刚安装了 Ubuntu 12.10，并试图将一个文件夹挂载到 Ubuntu 系统。所以我用：

```
sudo smbmount <folder> /path/to/my/folder -ouser=<my id>, dom=<my dom> 
```

但是找不到 smbmount ......我现在只有 cifs-utils。

上面的命令适用于 Ubuntu 12.04，但不适用于 12.10。

有什么提示吗？

提前谢谢:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T22:33:37.880

运行这个： -

```
sudo apt-get install smbfs 
```

将来，如果您有找不到的命令，则可以运行

```
apt-file search smbmount
smbfs: usr/bin/smbmount 
```

搜索您需要的文件。当然要安装apt-file，你需要

```
sudo apt-get install apt-file
apt-file update 
```

# java - 将托管 bean 保存到注释文档

> ID：13615576
> 
> 赞同：2
> 
> 时间：2012-11-28T22:30:30.387
> 
> 标签：java, javabeans, xpages, lotus-domino

在托管 bean 中，您有字段，并且字段具有 getter 和 setter。但在这种情况下，我还需要将值保存回 Notes 配置文件。所以我有一个`loadProfileDocument`和一个`saveProfileDocument`方法。我正在考虑在应用程序范围内使用 bean。

如何确保配置文件已保存？

我必须打电话给`saveProfileDocument`二传手吗？我要`saveProfileDocument()`明确地打电话吗？我可以使用析构函数（最终确定）吗？要不然是啥...？？？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:48:47.103

您可能需要考虑使用所谓的“MIMEBean”方法，它将 bean 的状态序列化为文档上的 MIME 项。使用这种方法，您的 bean 字段可以是分层的（对象中的对象中的对象），只要每个对象也是可序列化的。这比通常的平面数据结构提供了更大的灵活性，其中一个字段 = 一个原始值（或值向量）。

有关在应用程序中广泛使用的这种方法的示例，请查看 OpenNTF 上的 WatrCoolr 项目的源代码。

Jesse Gallagher 还创建了一个[自定义数据源](http://frostillic.us/f.nsf/posts/an-extended-document-data-source-to-support-mimebeans)，允许相当透明地使用该技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T00:32:54.693

不要使用配置文件。正如@Sven Hasselbach 提到的，HTTP 任务的每个线程都有自己的配置文件缓存副本（配置文件被设计缓存）并且保存在一个线程中不会填充到其他线程。通常需要重新启动 HTTP 任务来修复混乱。

要回答您的问题，您必须确定更新频率。如果您不时更新单个属性，则在 setter 中调用 save 是不错的选择。对于批量更新许多属性/字段，相同的方法会执行得很差。

好的权衡是在 setter 中设置脏标志并在 afterRenderResponse 中调用 save 方法，以有条件地将 bean 状态保存到后端文档。对于请求范围的 bean，不需要清除脏标志，对于其他范围，不要忘记在保存后重置它。

# node.js - nodejs：会话存储在哪里？什么是连接蒙戈？

> ID：13615582
> 
> 赞同：2
> 
> 时间：2012-11-28T22:30:50.840
> 
> 标签：node.js, mongodb, express, socket.io, connect

我正在创建应用程序，使用 nodejs (0.8.15)、express (>3.0) 框架、socket.io 和 mongodb 注册用户。

1）每个人都知道，只使用socket.io，不使用mongodb（或其他）很容易创建简单的聊天。那么，在这种情况下，消息存储在哪里？在会话中？

2）第二个问题对我来说**非常重要**

我不明白：为什么 MongoStore 在那里举行会议？我读到它是“用于连接会话中间件/连接的会话存储”。据我所知，当用户离开站点时会话会破坏。那么人们为什么要存储和使用它呢 `require('connect-mongo')`？

```
var config = require('../config'),
    express = require('express'),
    MongoStore = require('connect-mongo'),
    server = express.createServer();

server.configure(function() {
    server.use(express.logger());
    server.use(express.methodOverride());
    server.use(express.static(config.staticPath));
    server.use(express.bodyParser());
    server.use(express.cookieParser());
    server.use(express.session({
        store: new MongoStore({
            db: config.db
        }),
        secret: config.salt
    }));
}); 
```

我刚刚找到的代码。似乎是针对 express 2.x

`connect-mongo`3）和`connect-mongodb`库 有什么区别？[https://github.com/masylum/connect-mongodb](https://github.com/masylum/connect-mongodb)

[https://github.com/kcbanner/connect-mongo](https://github.com/kcbanner/connect-mongo)

4) 我必须为 cookie 和套接字制作 MongoStore 吗？

谢谢你！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:43:14.337

1）无处？服务器接收消息，广播它并忘记它。谁说存储？服务器可以只是一个代理。

2）因为一旦用户离开站点，会话就不必被销毁。例如考虑一家商店。你去一家商店，你把一些东西放在你的篮子里，然后你关闭了浏览器。3 天后您返回，您仍然可以在篮子中看到您的物品。这只能通过存储在数据库中的会话来完成（至少以可靠的方式）。

这真的取决于你的需求。就我而言，我几乎从不使用基于数据库的会话。我使用像[Redis](http://redis.io/)这样的内存存储。

3）谁知道？可能有一些细微的差别，我看不出有什么明显的。

4）不。正如我所说：这取决于您的需求。如果您希望会话仅在用户实际查看页面时才处于活动状态，那么您可以坚持使用任何内存存储。或者您可能根本不需要会话，在这种情况下您根本不必使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T22:46:49.567

1）如果您不想使用数据库进行聊天，则应将消息存储到简单的散列中。但请记住，如果您重新启动节点应用程序，它们将会丢失。

2) MongoStore（或 RedisStore）允许您将 Express 会话存储到 MongoDB/Redis 中，而不是使用不是为生产环境设计的 MemoryStore。

（顺便说一下，您找到的代码适用于 Express 2.x）

3）两者看起来相似。我个人使用connect-mongo。

4) 不会。Express 会为您处理会话 cookie，而 Socket.IO 会处理套接字。如果你想使用 MongoDB，你应该试试 Mongoose [http://mongoosejs.com/](http://mongoosejs.com/)

# syntax - 在 AutoHotkey 中查找线程 ID

> ID：13615583
> 
> 赞同：2
> 
> 时间：2012-11-28T22:31:08.267
> 
> 标签：syntax, autohotkey

我认为以下代码可能有效，但没有。原因可能在于该`Throw`命令是在热键线程中执行的，而不是在自动执行部分线程中。

```
try 
{
    count := 0
    loop {
        tooltip % ++count
        sleep 200
    }
} catch {
}
msgbox done
Exitapp

Esc::ExitAPp
^1::throw 
```

那么有没有办法知道控制流属于哪个线程呢？AutoHotkey 是否有线程 ID 或类似变量的变量？

* * *

下面的代码显示两个（伪）线程返回相同的数字。因此，如果有的话，我需要知道 AutoHotkey 中的线程 ID。我在某处读到 AutoHotkey 线程只是一个函数调用。但我期待可能有一种方法来识别伪线程。

```
try 
{
    count := 0
    loop {
        tooltip % ++count "`nThread ID: " DllCall("GetWindowThreadProcessId", "Int", A_ScriptHwnd, "Int", "0")
        sleep 200
    }
} catch {
}
msgbox done
Exitapp

Esc::ExitAPp
^1::
    MsgBox, % DllCall("GetWindowThreadProcessId", "Int", A_ScriptHwnd, "Int", "0")
    throw
Return 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T07:39:46.150

这是你想要的？

```
^w::
WinGet, WinID,, A
ThreadID:=DllCall("GetWindowThreadProcessId", "Int", WinID, "Int", "0")
MsgBox, %ThreadID%
Return 
```

# css - 最大高度 100 和边距底部

> ID：13615584
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:31:10.257
> 
> 标签：css, position

我想创建一个具有可变高度的固定元素，该元素适合内容并具有最大高度。

现在我使用这种技术：

```
#element{
    position:fixed;
    top:50px;
    bottom:50px;
} 
```

很好，但是如果内容小于这个高度，我想让高度更小......我想做一个像 max-height 和 margin-bottom 一样的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:54:17.707

`max-height: 500px;`，例如，将使元素高 500 像素（或更短，如果它的内容更短）。有关 max-height 的更多信息，请参阅[https://developer.mozilla.org/en-US/docs/CSS/max-height](https://developer.mozilla.org/en-US/docs/CSS/max-height)。例如，您可能还想指定溢出`overflow: scroll;`。

听起来这就是你想要的：

```
#element{
    height: 100%;
    max-height: 500px;
    margin-bottom: 100px;
} 
```

请注意，我已经删除了定位规范。

如果这对您不起作用，请提供有关您想要的结果的更多详细信息，以及您目前获得的所有 HTML 和 CSS。

# c++ - C++ OpenSceneGraph 改变相机眼睛高度

> ID：13615588
> 
> 赞同：5
> 
> 时间：2012-11-28T22:31:22.863
> 
> 标签：c++, openscenegraph

编写一个小的openscenegraph 应用程序，并且需要一种方法来改变Camera 的高度。本质上，眼睛是直视空间中的球。我想要做的是能够降低相机高度，这样我就可以从下方击球，如果需要，还可以提高相机高度。如何使用 oPengl 代码或 OpenScenegraph 实现这一目标？

```
int main(int argc, char* argv[])
{ 
    osg::ref_ptr<osg::ShapeDrawable> shape2 = new osg::ShapeDrawable; 
    shape2->setShape( new osg::Sphere(osg::Vec3(3.0f, 0.0f, 0.0f),1.0f) ); 
    shape2->setColor( osg::Vec4(0.0f, 0.0f, 1.0f, 1.0f) ); 
    osg::ref_ptr<osg::Geode> root = new osg::Geode; 
    root->addDrawable( shape2.get() );///add first osgshapeDrawable2  
    osgViewer::Viewer viewer;
    viewer.setSceneData( root.get() );///set the Geode as scenedata for the viewer
    return viewer.run();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:46:54.797

您需要接管对 的控制`osgViewer::Camera`，您不应该尝试使用基本的 OpenGL 来执行此操作。

`osgViewer::Viewer::getCameraWithFocus`应该给你相机。从这里您可以设置相机的位置和外观。

请记住，在像您这样的基本应用程序中，相机操纵器每帧设置一次相机的位置（基于鼠标交互）。

您将需要决定如何处理鼠标输入，并可能接管 Camera Manipulator 正在执行的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:51:12.613

在您的 Camera 对象上使用`setViewMatrixAsLookAt`方法（[链接）。](http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/a00073.html)该方法接受三个参数：

*   `eye`：您的相机的位置 - 您可以使用它来设置它的高度。
*   `center`：您的相机正在查看的点 - 将其设置为观察对象的中心。
*   `up`: 相机的上矢量 - 这控制视口如何围绕其中心旋转，并且在传统图形坐标系中应等于 [0, 1, 0]。

因为这个方法通过指定它*正在寻找*的点来处理相机的旋转，所以你应该只修改`eye`向量的 y 坐标来完成你所要求的。

[您可以在此处](http://shitohichiumaya.blogspot.com/2011/01/what-matrix-glulookat-generates-1.html)查看有关“查看”矢量三元组的更多详细信息。

# javascript - 用于选择的 CSS id 和用于样式的类

> ID：13615591
> 
> 赞同：-3
> 
> 时间：2012-11-28T22:31:27.763
> 
> 标签：javascript, jquery, css, validation

我正在编写一个带有验证的表单，并且我想在未正确填写文本框时突出显示它们。我添加了这个 CSS 规则：

```
/*Styles for validation*/
.invalid {
  border: 1px solid #FF0000;
} 
```

我表单中的字段有 ID，例如`#f1`第一个字段，它没有 CSS 样式，但我使用它们来使用 jQuery 选择字段。因此，当我检测到错误时，我会说：

```
$('#f1').addClass("invalid"); 
```

根据 Firefox 的检查器，该元素现在具有样式#f1.invalid，但是我没有看到任何无效的样式应用于该元素。我怎样才能得到我正在寻找的行为？谢谢！

**编辑：**我撒谎了，我的文本字段上有一个内联样式，将宽度设置为 5ems，但是删除它似乎没有什么区别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:34:00.120

一个匹配一个*id*的选择器比一个匹配一个*类*的选择器强。这意味着如果您为具有*id*的元素设置了规则设置*边框*，则不会应用该类的规则。要使第一类适用，您需要告诉它它更重要； *`#f1`*

 *```
.invalid {
  border: 1px solid #FF0000 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:50:40.343

结果证明我的 CSS 或 HTML 没有任何问题。我的 FTP 客户端没有将我的更改上传到 .css 文件。当心缓存临时文件的危险！*

# c# - How to keep the latest X elements of a list

> ID：13615592
> 
> 赞同：1
> 
> 时间：2012-11-28T22:31:28.547
> 
> 标签：c#, arrays, collections

I need to use a data structure that would keep the latest X elements of a list. A colleague gave me this solution:

```
 int start = 0;
        const int latestElementsToKeep = 20;
        int[] numbers = new int[latestElementsToKeep];
        for (int i = 0; i < 30; i++)
        {
            numbers[start] = i;
            if (start < numbers.Length - 1)
            {
                start++;
            }
            else
            {
                start = 0;
            }
        } 
```

So after this is run, the numbers array has numbers 19-29 (the latest 20 numbers).

That's nice, but difficult to use this in the real world. Is there an easier way to do this?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:34:02.053

This seems like a pretty standard [Circular Buffer](http://en.wikipedia.org/wiki/Circular_buffer). My only suggestion would be to create a class for it or download one of the libraries available. There seem to be a few promising looking ones near the top of the Google results.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:40:55.293

Easier way to do this:

```
int[] numbers = new int[latestElementsToKeep];
for (int i = 0; i < 30; i++)
    numbers[i % latestElementsToKeep] = i; 
```

[Modulus operator](http://msdn.microsoft.com/en-us/library/0w4e0fzs%28v=vs.80%29.aspx) returns the reminder of dividing `i` by `latestElementsToKeep`. When `i` reaches `latestElementsToKeep`, you will start from the beginning.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:52:10.937

For a range of numbers, you can use:

```
int keep = 20;
int lastItem = 29;
int[] numbers = Enumerable.Range(lastItem - keep, keep).ToArray(); 
```

To get the last items from any collection (where you can get the size), you can use:

```
int keep = 20;
someType[] items = someCollection.Skip(someCollection.Count() - keep).ToArray(); 
```

# python - 安装 python 包 StarCluster 和 pycrypto

> ID：13615594
> 
> 赞同：1
> 
> 时间：2012-11-28T22:31:34.983
> 
> 标签：python, pycrypto

嗨，我对 python 很陌生......所以如果这是一个愚蠢的问题，请原谅我......

安装 python 2.7.3 后，我想安装`StarCluster`我尝试通过命令执行的包：

```
$ sudo easy_install StarCluster 
```

但这在安装依赖包时会导致错误，`pycrypto`因此尝试使用以下命令单独安装它：

```
$ easy_install pycrypto 
```

但收到以下错误消息....我错过了我需要做的事情吗？

```
Searching for pycrypto
Reading http://pypi.python.org/simple/pycrypto/
Reading http://pycrypto.sourceforge.net
Reading http://www.pycrypto.org/
Reading http://www.amk.ca/python/code/crypto
Best match: pycrypto 2.6
Downloading http://ftp.dlitz.net/pub/dlitz/crypto/pycrypto/pycrypto-2.6.tar.gz
Processing pycrypto-2.6.tar.gz
Running pycrypto-2.6/setup.py -q bdist_egg --dist-dir /var/folders/N3/N3c0k2wGFciTmmsVNCCRE++++TI/-Tmp-/easy_install-udIVh6/pycrypto-2.6/egg-dist-tmp-K6hQbK
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.
/usr/libexec/gcc/powerpc-apple-darwin10/4.2.1/as: assembler (/usr/bin/../libexec/gcc/darwin/ppc/as or /usr/bin/../local/libexec/gcc/darwin/ppc/as) for architecture ppc not installed
Installed assemblers are:
/usr/bin/../libexec/gcc/darwin/x86_64/as for architecture x86_64
/usr/bin/../libexec/gcc/darwin/i386/as for architecture i386
src/MD2.c:147: fatal error: error writing to -: Broken pipe
compilation terminated.
lipo: can't open input file: /var/folders/N3/N3c0k2wGFciTmmsVNCCRE++++TI/-Tmp-//ccyyE9rh.out (No such file or directory)
error: Setup script exited with error: command 'gcc-4.2' failed with exit status 1 
```

谢谢

高级管理人员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:45:03.970

编辑：按照[此处](https://stackoverflow.com/questions/1165361/setting-gcc-4-2-as-the-default-compiler-on-mac-os-x-leopard)的说明使用 4.2 而不是 4.1 作为 gcc 的版本。

* * *

试试他的：

```
sudo apt-get install python-pip 
```

`pip`是一个 python 包管理器： pip=pip 安装包。然后，

```
sudo pip install StarCluster 
```

然后就可以启动python并导入starcluster了：

```
python
import starcluster 
```

您可以使用以下方法执行相同操作`pycrypto`：

```
sudo pip install pycrypto 
```

# knockout.js - 从 Knockout Observable 中删除扩展器（Knockout Validation）

> ID：13615597
> 
> 赞同：1
> 
> 时间：2012-11-28T22:31:37.170
> 
> 标签：knockout.js, knockout-validation

我有一个 Knockout 视图模型，它利用 Knockout Validation 来执行 vm 属性的验证。我正在尝试从特定订阅者函数中更改“最大”验证器值。这是我的尝试，接下来我将解释我所看到的行为。

```
me.inventoryToPick().key.subscribe(function () {
    if (!me.inventoryToPick().key()) {
        me.inventoryToPick().location = null;
        return;
    }

    var item = ko.utils.arrayFirst(inventory, function(inv) {
        return inv.InventoryKey === me.inventoryToPick().key();
    });

    me.inventoryToPick().quantity = ko.observable().extend({ max: item.QuantityAvailable });
}); 
```

请注意，我尝试附加验证的可观察属性（数量）是父可观察对象（inventoryToPick）的属性。现在，我看到的行为是将验证规则添加到属性中，但是，似乎最低值获胜。换句话说，如果最大值规则在第一次通过时设置为 30，然后在下一次为 10，则验证将在两次通过时正确执行。但是，如果在下一次通过时，我尝试将最大值规则设置回 30（或任何大于 10 的值），则继续强制执行最大值 10。

我认为我可以通过使用新的 ko.observable 对象设置我的属性来避开这个错误，该对象使用正确的最大值验证进行初始化，但这并没有解决问题。有谁知道去除扩展器以增强可观察到的淘汰赛的方法？还有其他建议吗？

谢谢，文尼

# grails - Grails 中静态数据的 URL

> ID：13615598
> 
> 赞同：0
> 
> 时间：2012-11-28T22:31:52.237
> 
> 标签：grails

我编写了一个 Grails 项目，它进行语音处理并生成多个语音文件。我将文件保存在项目根目录的文件夹中，例如：

```
..\\MapCloudWebServices\\speechdata\\123456.wav 
```

当我运行应用程序时，一切正常，所有文件都生成并保存在提及文件夹（语音数据）中。但是我们从浏览器运行 URL ( `localhost:8080/MapCloudWebServices/speechdata/123456.wav`) 我收到了错误消息 (http 404) 请求的资源不可用！谁能帮助我如何将 Grails 项目文件夹中的数据分配给服务器上的适当 URL？（也许在配置文件中？）

谢谢，礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:00:09.093

您需要将静态内容（例如 wav 文件`web-app`）放在 grails 项目的目录下。

# android - Android：在可点击的列表视图中按标题对 mp3 文件进行排序

> ID：13615603
> 
> 赞同：1
> 
> 时间：2012-11-28T22:32:03.597
> 
> 标签：android, listview, sorting, mp3

我正在尝试为 Nexus 7 平板电脑创建音乐播放器应用。我能够从特定目录中检索音乐文件以及与它们相关的信息，例如标题、艺术家等。我已将文件的标题加载到可单击的列表视图中。当用户点击一个标题时，它会将他们带到一个播放相关歌曲的活动。我试图按字母顺序对标题进行排序，但遇到了障碍。当我只对标题进行排序时，它们不再与正确的歌曲匹配。这是意料之中的，因为我只订购了标题而不是实际文件。我试图通过这样做来修改排序算法：

```
//will probably only work for Nexus 7
private final static File fileList = new File("/storage/emulated/0/Music/");
private final static File fileNames[] = fileList.listFiles(); //get list of files

public static void sortFiles()
{
    int j;
    boolean flag = true;
    File temp;

    MediaMetadataRetriever titleMMR = new MediaMetadataRetriever();
    MediaMetadataRetriever titleMMR2 = new MediaMetadataRetriever();

     while(flag)
     {
         flag = false;

         for(j = 0; j < fileNames.length - 1; j++)
         {
             titleMMR.setDataSource(fileNames[j].toString());
             titleMMR2.setDataSource(fileNames[j+1].toString());

             if(titleMMR.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE).compareToIgnoreCase(titleMMR2.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE)) > 0)
             {
                 temp = fileNames[j];
                 fileNames[j] = fileNames[j+1];     // swapping
                 fileNames[j+1] = temp;
                 flag = true;
             }//end if 
         }//end for
     }//end while
} 
```

这应该从两个文件中检索歌曲标题，比较它们，如果第一个按字母顺序排在第二个之后，则交换 File 数组中的文件。出于某种原因，当我运行调用此方法的活动时，应用程序崩溃了。如果我从**titleMMR2**的数据源 中删除**+ 1****`titleMMR2.setDataSource(fileNames[j].toString());`**

 **该应用程序不再崩溃，但列表不按顺序排列。这也是可以理解的，因为它会将歌曲名称与它们自己进行比较。我不知道为什么**+ 1**会使程序崩溃。它不是数组越界错误。该目录中共有 6 个 .mp3 文件，它们是该目录中唯一的文件。我也尝试过使用`Arrays.sort(fileNames)`，但仅按文件名而不是歌曲名称对它们进行排序。我也试过这个：

```
Arrays.sort(fileNames, new Comparator<File>(){
        public int compare(File f1, File f2)
        {
            titleMMR.setDataSource(f1.toString());
            titleMMR2.setDataSource(f2.toString());

            return titleMMR.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE).compareToIgnoreCase(titleMMR2.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE));
        } }); 
```

该片段也导致了崩溃。Java 代码中没有错误，并且所有适当的类都已导入。我真的不知道出了什么问题。任何帮助将不胜感激，如果需要任何新信息，我将很乐意提供。提前致谢。

***固定的***

正确的代码片段是这样的：

```
public static void sortFiles()
{
    int j;
    boolean flag = true;
    File temp;

    MediaMetadataRetriever titleMMR = new MediaMetadataRetriever();
    MediaMetadataRetriever titleMMR2 = new MediaMetadataRetriever();

     while(flag)
     {
         flag = false;

         for(j = 0; j < fileNames.length - 1; j++)
         {
             titleMMR.setDataSource(fileNames[j].toString());
             titleMMR2.setDataSource(fileNames[j+1].toString());

             String title1;
             String title2;

             if(titleMMR.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE) == null)
                 title1 = fileNames[j].getName();
             else
                 title1 = titleMMR.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE);

             if(titleMMR2.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE) == null)
                 title2 = fileNames[j+1].getName();
             else
                 title2= titleMMR2.extractMetadata(MediaMetadataRetriever.METADATA_KEY_TITLE);

             if(title1.compareToIgnoreCase(title2) > 0)
             {
                 temp = fileNames[j];
                 fileNames[j] = fileNames[j+1];     // swapping
                 fileNames[j+1] = temp;
                 flag = true;
             }//end if 
         }//end for
     }//end while
} 
```**

# java - Java：更新 MySQL 表的 id

> ID：13615604
> 
> 赞同：0
> 
> 时间：2012-11-28T22:32:08.780
> 
> 标签：java, mysql, sql

这是我的删除类，它获取 id 作为输入。

我成功地删除了行（例如从我的数据库中包含 id '3' 的行），现在我想更新所有的 id-s。例如：我的行是：

1个a5

2 f3

（3 t1 被删除）

4 r2

所以现在应该更新结果：

1个a5

2 f3

3 r2

```
String delete = "DELETE from authors WHERE id = ?";

          Class.forName("com.mysql.jdbc.Driver");
          Connection con = DriverManager.getConnection(url, "root", "easttg");
          PreparedStatement ps = con.prepareStatement(delete);

          //updating the id
          String sql = "Select id from authors";
          PreparedStatement ps2 = con.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);

          ps.setInt(1, id);
          ps.executeUpdate();
          con.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:40:43.533

要更新某些行，您必须使用更新语句。不是选择语句：

```
update authors set id = ? where id = ? 
```

也就是说：ID 只是行的技术标识符。一般不应修改它们。使用纯技术 ID 的原因是它们永远不需要修改，这是一件好事，因为可能有许多其他表具有包含相同 ID 的外键。ID 也可能是用于在网站中显示该行的某些 URL 的一部分，许多人可能已将其添加为书签。ID 是...行的标识。你不会改变身份。如果你这样做，就会出现各种问题，就像你改变了自己的名字一样。

# google-maps-api-3 - 可拖动标记和绘图工具

> ID：13615605
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:32:16.410
> 
> 标签：google-maps-api-3

我在地图上使用绘图工具。我按照文档中的说明设置了此选项：

```
 markerOptions: {
    animation: google.maps.Animation.DROP,
    icon: new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/yellow-dot.png'),
    draggable: true,
    flat: true,
    raiseOnDrag: true
  }, 
```

但是，我无法拖动我的标记，并且 DROPE 动画似乎有一个错误但可以工作（在下降前闪烁）。getDraggable 方法返回 true ：

```
 if (event.type == google.maps.drawing.OverlayType.MARKER) {
     markersArray.push(event.overlay);
     alert(event.overlay.getDraggable()); // true
  } 
```

当我单击我的标记时，它会忽略它并改为拖动地图。我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:39:18.743

这段代码怎么样。这段代码对我有用。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Drawing Tools Library</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=drawing"></script>
    <script>
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions);

        var drawingManager = new google.maps.drawing.DrawingManager({
          drawingMode: google.maps.drawing.OverlayType.MARKER,
          drawingControl: true,
          drawingControlOptions: {
            position: google.maps.ControlPosition.TOP_CENTER,
            drawingModes: [
              google.maps.drawing.OverlayType.MARKER
            ]
          },
          markerOptions: {
            animation: google.maps.Animation.DROP,
            icon: new google.maps.MarkerImage('http://maps.google.com/mapfiles/ms/icons/yellow-dot.png'),
            draggable: true,
            flat: true,
            raiseOnDrag: true
          }
        });
        drawingManager.setMap(map);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# ruby-on-rails - 如果我的模型类中有一个自定义方法，当按下链接时如何执行它？

> ID：13615618
> 
> 赞同：0
> 
> 时间：2012-11-28T22:33:03.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

`set_score`我的模型上有一个名为 的方法`Client`。

在我`Clients#index`看来，我想创建一个按钮/链接，上面写着“更新分数”，而这一切只是将必要的参数发送到该方法并运行它。

我怎么做？

我可以使用 Rails 链接助手来做到这一点吗？

**编辑1：**

对于它的价值，现在该方法由`callback`(ie `before_save`) 执行。但我想让用户能够手动触发它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:36:14.780

将动作添加到调用模型上的方法的控制器，然后添加路由以允许请求到达该动作。使您的链接调用该路由。

浏览器不能直接与模型对话。这就是控制器的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:58:51.170

正如@meagar 指出的那样，这样做的方法是在我的控制器中创建一个自定义操作，然后创建一个路由，然后`link_to`在我的视图中使用该命名路由。

我`Client#Controller`现在有这个方法：

```
def update_score
    @client = current_user.clients.find(params[:id])
    @client.set_score

respond_to do |format|
  if @client.update_attributes(params[:client])
    format.html { redirect_to clients_url, notice: 'Score was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @client.errors, status: :unprocessable_entity }
    end
  end
end 
```

我`routes.rb`现在有这条路线：

```
match ':controller/update_score/:id' => 'clients#update_score', :as => :update_score 
```

在我看来，我只是使用了这个链接，`client`块生成的局部变量在哪里。

```
<%= link_to 'Update Score', update_score_path(client) %> 
```

# mongodb - mongodb时间序列数据建模

> ID：13615627
> 
> 赞同：1
> 
> 时间：2012-11-28T22:33:57.327
> 
> 标签：mongodb, cassandra, time-series, data-modeling, nosql

关于如何查询 MongoDB 的新手问题。我想把每天收到的多个对象汇总到一个单日记录中。文档结构最终将包含 365 天的数据（每年，可能每年有一个新文档），格式如下：

```
{
"2012": {
    "9": {
        "1": {
            "attribute1": 42.1,
            "attribute2": 5.895,
            "attribute3": 2347,
            "attribute...n": 33076.875,
            "startFuel": [
                32976.75,
                33018.875,
                33041.375
            ],
            "startOdometer": [
                202748.9,
                202973,
                203100.2
            ],
            "endOdometer" : 209855.6
        },
        "10": {
            "attribute1": 363.90000000000003,
            "attribute2": 59.242000000000004,
            "attribute3": 20284,
            "attribute...n": 34335.375,
            "startFuel": [
                34161,
                34214.125,
                34245.25,
                34280.875
            ],
            "startOdometer": [
                209855.6,
                210166.4,
                210348.2,
                210555.7
            ],
            "endOdometer" : 210655.7
        }
    }
},
"_id": ObjectId("50b6838a6ef6585a9e51f2af"),
"key1": null,
"keu2": -1,
"key3": 572755
} 
```

如您所见，每个文档属于一个实体，一年包含每个月，每个月都有每一天（只要有当天/月/年的数据）。

我正在为如何查询此文档格式而苦苦挣扎。我想使用聚合框架来平均文档中的值（对于单个实体），并在同一时间段内将它们聚合到多个文档/实体中。

例如，我想找到 8 月份每天行驶的平均英里数（对于每个实体，对于该月的每一天，从 endOdometer 中减去最低的 startOdometer 并平均该月的值）。（顺便说一句：startOdometer 是一个数组，允许我在不预先查询文档以查看它是否已经存在的情况下推送值）。

我们内部正在讨论是否需要使用 map/reduce 将所有聚合视图创建到我们的数据中，或者我们是否可以使用 map/reduce 创建日期摘要并使用聚合框架将数据拉到一起。我想知道这个数据结构将如何支持这种类型的查询，或者其他什么数据结构可能更适合让我们利用聚合框架来总结我们的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T15:06:07.947

像这样的动态模式很难查询。您最好重新设计架构以使用固定键名并将动态内容留给值。

# ruby-on-rails - Kernel.caller（或 $@）在生产环境中工作吗？

> ID：13615631
> 
> 赞同：1
> 
> 时间：2012-11-28T22:34:10.493
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

是否在生产中填充以下内容？

```
Kernel.caller
$@ 
```

我正在尝试检索用于监视应用程序的回溯，并且我可以验证它们都在开发模式下工作，但不能确定它们在生产中不起作用（在开发中易于测试，但在生产中我正在发送回溯到外部应用程序）。

或者，我可以调用其他什么来获取回溯或使其工作？我了解如何启用日志记录，但我不能确定这必然会影响回溯。

..删除了不需要的代码..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:35:36.200

您不必启用任何东西，它就可以工作，这根本不相关`rails`，它只是一个`ruby`功能。

# javascript - 您可以使用 jquery 更改 xml 的节点名称吗？

> ID：13615632
> 
> 赞同：0
> 
> 时间：2012-11-28T22:34:11.217
> 
> 标签：javascript, jquery, html

我知道我们可以使用 nodeName 获取节点名称，但是是否也可以使用 jquery 设置 nodeName ？基本上我想将节点名称的大小写从大写变为小写。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T00:32:00.683

我相信为了正确执行此操作，您需要按照此处所述替换该标签： [jQuery：如何更改标签名称？](https://stackoverflow.com/questions/3435871/jquery-how-to-change-tag-name)

不幸的是，这将需要您替换整个元素而不仅仅是标签名称，因此如果您想替换标签名称，您需要找到一种方法来保留标签的属性以及其中的代码。

幸运的是，我有额外的几分钟，所以我创建了一个函数来做到这一点：

```
function change_tag_name(selector,tagname){
    var old_elm = $(selector);
    //Create a jquery element based on selector
    var original_elements = old_elm.get();
    //Get the array of original dom objects
    //Note: We get the original dom objects because jQuery objects do not provide access to the attributes array
    for(var i=0; i< original_elements.length; i+=1){
        var original_element = original_elements[i];
        //Create reference to original element in dom
        var new_elm = $(document.createElement(tagname));
        //Create new element with desired tagname
        new_elm.html($(original_element).html());
        //Add original element's inner elements to new element

        var original_attributes = original_element.attributes;
        //Create an array of the original element's attributes;
        var attributes = new Object();
        //Create a new generic object that will hold the attributes for the new element

        for(var j=0; j<original_attributes.length; j+=1){
            var attribute = original_attributes[j];
            var name = attribute.nodeName;
            //Note: The attributes "nodeName","localName",and "name" appear to have the same value, so I just chose one. It's entirely possible that these could have different values in different contexts...
            //var name = attribute.localName;
            //var name = attribute.name;
            var value = attribute.nodeValue;
            //Note: The attributes "nodeValue","textContext",and "value" appear to have the same value, so I just chose one. It's entirely possible that these could have different values in different contexts...
            //var value = attribute.textContext;
            //var value = attribute.value;
            attributes[name]=value;
        }
        //Populate attributes object
        new_elm.attr(attributes);
        //Assign attributes from old element to new element        
        $(original_element).replaceWith(new_elm);
        //Replace old_element with new element 
    }
} 
```

另外，我认为没有办法保证属性按原始顺序排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:35:37.710

您无法更改节点名称，但您可以创建一个具有不同名称的新节点，复制属性，然后将一个替换为另一个。

jQuery 使区分属性和属性变得困难，您可以使用 IE 专有的 outerHTML 属性（在其他一些浏览器中支持）和字符串操作，但这通常不适用于 Web。

如果有很多这样的节点，则全局替换 "

# npapi - 有没有办法获取现有 NPAPI 插件的代码？

> ID：13615633
> 
> 赞同：0
> 
> 时间：2012-11-28T22:34:12.713
> 
> 标签：npapi, browser-plugin

我想开发自己的 NPAPI 插件 - 有没有办法获取现有插件的代码？如果没有，开始写作的最佳实践/演示是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T02:09:22.983

不，您不能查看大多数现有插件的代码，除非它们是开源的并且您可以找到源代码。它们通常用 C 或 C++ 编译和编写。我会看看[http://npapi.com/tutorial1](http://npapi.com/tutorial1)和[http://www.firebreath.org](http://www.firebreath.org)

如果您刚开始，FireBreath 可能是最简单的入门方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T01:33:31.323

您的 NPAPI 插件可能有权访问用户文件系统您可以读取用户配置文件文件夹并在文件夹扩展中找到现有插件。

# java - Maven 构建具有依赖项的程序集

> ID：13615634
> 
> 赞同：13
> 
> 时间：2012-11-28T22:34:25.097
> 
> 标签：java, maven

我有独立的 java 应用程序，我想将其打包为：myapp.jar。并将所有依赖的 jar 复制到“备用文件夹”。理想情况下，我想让 Maven 更新 META-INF 文件以将所有类路径依赖项 jar 条目添加到其中。

例如，如果我的项目引用了 commons.jar，并且当我使用此插件构建程序集时，它将所有 .class 文件和包从 commons.jar 复制到 myappjar-with-dependencies.jar。

maven 程序集插件的问题是将所有依赖项解压缩到 myappjar-with-dependencies.jar 中。

```
<plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <archive>
                    <manifest>
                        <mainClass>com.core.App</mainClass>
                    </manifest>
                </archive>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id> 
                    <phase>package</phase> 
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-29T07:26:54.190

你可以试试

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.core.App</mainClass>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptors>
                    <descriptor>src/assembly/bin.xml</descriptor>
                </descriptors>
            </configuration>
        </plugin> 
```

src/程序集/bin.xml

```
<assembly
    xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <formats>
        <format>dir</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <dependencySets>
        <dependencySet>
            <outputDirectory>/</outputDirectory>
            <unpack>false</unpack>
            <includes>
                <include>${artifact}</include>
            </includes>
        </dependencySet>
        <dependencySet>
            <outputDirectory>/lib</outputDirectory>
            <unpack>false</unpack>
            <excludes>
                <exclude>${artifact}</exclude>
            </excludes>
        </dependencySet>
    </dependencySets>
</assembly> 
```

运行它

```
mvn clean package assembly:single 
```

详情：[http ://maven.apache.org/plugins/maven-assembly-plugin/index.html](http://maven.apache.org/plugins/maven-assembly-plugin/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-10T13:02:17.420

请按照以下步骤操作：

**第 1 步：** 您应该将常规 Jar 存在于文件夹 - 目标内的 Maven 包中。如果没有，运行方式 > Maven 安装（此时 Maven 构建运行配置中的目标将是 'clean package'）

**第 2 步：** 在 pom.xml 中添加以下脚本

```
 <build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>Full path with Main class(App) for example com.first.apicode.App</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
    </plugins>
  </build> 
```

**第 3 步：** 将 Maven Build Run 配置中的目标更改为 'clean package assembly:single' 并单击 Run

就这样！

现在您将能够看到目标文件夹中所有依赖项的可运行 JAR，例如 YourArtifactID-0.0.1-SNAPSHOT-jar-with-dependencies.jar

# actionscript-3 - MultiBitmap 定心精灵 AS3

> ID：13615636
> 
> 赞同：0
> 
> 时间：2012-11-28T22:34:38.597
> 
> 标签：actionscript-3, flash, actionscript

主要代码：

```
package  {
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.text.TextField;
    import flash.net.URLVariables;
    import flash.net.URLRequest;
    import flash.events.Event;
    import flash.display.BitmapData;
    import flash.geom.Rectangle;
    import flash.geom.Point;
    import flash.display.DisplayObject;
    import flash.display.Bitmap;

    public class Init extends Sprite {

        var rects:Array,
        numRects:int = stage.stageWidth / _width,
        _width:Number = 20,
        _height:Number = 80,
        _rotation:int = 0,
        _vr:Number = 3;

        public function Init() {

            init();
        }

        function init():void
        {
            rects = new Array();
            var bitmap:BitmapData = new slider();
            var _point = new Point();
            for(var i:int = 0; i < numRects; i++)
            {
                var _rect = new Rectangle(i * _width, 0, _width, 80);
                var smallBD:BitmapData = new BitmapData(_width, 80);
                smallBD.copyPixels(bitmap, _rect, _point);
                //var d:Bitmap = new Bitmap(smallBD); 
                var rect:Rect = new Rect(smallBD, _width, _height);
                rect.x = i * _width + _width / 2;
                addChild(rect);
                rects.push(rect);
            }

            addEventListener(Event.ENTER_FRAME, onEnterFrame);
        }

        function onEnterFrame(e:Event):void
        {

            for(var i:int = 0; i < numRects; i++)
            {
                rects[i].rotationY += _vr;
            }

            _rotation += _vr;
            if(_rotation % 180 == 0)
            {
                removeEventListener(Event.ENTER_FRAME, onEnterFrame);
            }

        }

    }

} 
```

这是 rect 类：

```
package  {
    import flash.display.Sprite;
    import flash.utils.ByteArray;
    import flash.display.Bitmap;
    import flash.display.BitmapData;

    public class Rect extends Sprite {

        private var bitmap:BitmapData,
        _width:Number,
        _height:Number;
        public function Rect(bitmap:BitmapData, width:Number = 20, height:Number = 80) {

            this.bitmap = bitmap;
            this._width = width;
            this._height = height;
            init();
        }

        function init():void
        {
            graphics.beginBitmapFill(bitmap, null, true, true);

            graphics.drawRect(-_width / 2, 0, _width , _height);

            graphics.endFill();

        }

    }

} 
```

我将导入的图像分成几块，每一块都添加到每个矩形精灵，所以我正在制作旋转效果，但问题是当我制作它时我无法将精灵居中，所以我做了`(-_width / 2)`- 技巧将每个精灵按 x 轴居中，然后添加到 x 位置添加`_width / 2`，但我无法弄清楚图像变形的原因，您可以通过获取 780 x 80 图像来尝试此代码 ![在此处输入图像描述](../Images/07c98e88ffd42bdfabe112d35e980f4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:53:35.910

好吧，看到您使用`beginBitmapFill()`以制作矩形，您可以自由指定将在哪里绘制。您似乎需要将矩形围绕其中心旋转，而不是左上角。你以 X 开头写得很好`-_width/2`，现在你只需要以`-height/2`Y 开头写。

```
graphics.drawRect(-_width / 2, -_height / 2, _width , _height); 
```

这将使您绘制的位图的中心位于精灵的 (0,0) 位置，因此您应用的任何旋转都会使精灵围绕其绘制矩形的中心转动。

一般来说，如果你简单地对显示对象应用旋转，它总是围绕它自己的 (0,0) 旋转，所以如果你想补偿，要么写变换矩阵（SO 提供的几个例子，比如[这个](https://stackoverflow.com/questions/12648161/zoom-to-and-from-point)），或者绘制您的精灵，使 (0,0) 位于您要旋转的点。

# bash - .bashrc 文件出错

> ID：13615644
> 
> 赞同：2
> 
> 时间：2012-11-28T22:35:20.007
> 
> 标签：bash, centos, centos6

我对 CentOS 6 安装的根文件夹中的 .bashrc 文件进行了一些更改，然后撤消了更改并重新上传了文件，但现在我在终端窗口中收到一条持续的错误消息，显示“第 19 行：语法错误：文件意外结束”。

我很茫然，如果有人能告诉我哪里出错了，我将不胜感激。内容是：

```
# .bashrc

# User specific aliases and functions

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi

export LS_OPTIONS="--human --color=always"
alias ls='ls $LS_OPTIONS'
alias ll='ls $LS_OPTIONS -l'
alias l='ls $LS_OPTIONS -Al' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:33:18.417

问题是该文件没有以 Unix 格式保存：我对其进行了转换，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:41:42.643

确保文件是问题所在，当您以用户身份登录时执行了多个文件，可能是其他问题。

尝试这个：

```
cd ~
. .bashrc 
```

看看你是否得到错误。如果这样做，请确保文件与您发布的文件相同。

```
less .bashrc 
```

# java - SQLDeveloper 运行查询，但从休眠中获得“ORA-00979: Not a Group By expression”

> ID：13615646
> 
> 赞同：2
> 
> 时间：2012-11-28T22:35:21.640
> 
> 标签：java, sql, oracle, hibernate, average

我有看起来像这样的数据：

```
 sensorid |  sampletime             |  correctedvalue   | qualityflag
-----------------------------------------------------------------------
  4472     | 27-OCT-10 00:00:00.123  |   3.75            | 0
  4472     | 27-OCT-10 00:00:01.324  |   3.85            | 0
  4472     | 27-OCT-10 00:00:02.123  |   3.92            | 0
  4472     | 27-OCT-10 00:00:03.324  |   4.05            | 0 
```

还有一个在 Oracle SQL Developer 中运行良好的查询（它返回平均超过 15 秒的数据）：

```
select sensorid,
    trunc(sampletime,'hh24') + 
    (trunc(to_char(sampletime,'mi')))/24/60 +
    (trunc(to_char(sampletime,'ss')/15)*15)/24/60/60 as tspan, 
    avg(correctedvalue),
    max(qualityflag)
from scalarsample
group by sensorid, 
    trunc(sampletime,'hh24') + 
    (trunc(to_char(sampletime,'mi')))/24/60 +
    (trunc(to_char(sampletime,'ss')/15)*15)/24/60/60
order by tspan 
```

但是当我将它插入我的java代码时，我得到一个错误：

```
org.hibernate.exception.SQLGrammarException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
at org.hibernate.loader.Loader.doList(Loader.java:2223)
...
Caused by: java.sql.SQLSyntaxErrorException: ORA-00979: not a GROUP BY expression

at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:221)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:118)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:224)
... 
```

我在 Jave 中使用的实际查询字符串看起来更像这样：

```
select sensorid,
    trunc(sampletime,'hh24') + 
    (trunc(to_char(sampletime,'mi')))/24/60 +
    (trunc(to_char(sampletime,'ss')/?)*?)/24/60/60 as tspan, 
    avg(correctedvalue),
    max(qualityflag)
from scalarsample
where sampletime between ? and ?
    and sensorid = ?
group by sensorid, 
    trunc(sampletime,'hh24') + 
    (trunc(to_char(sampletime,'mi')))/24/60 +
    (trunc(to_char(sampletime,'ss')/?)*?)/24/60/60
order by tspan 
```

并通过调用设置参数：

```
SQLQuery q = session.createSQLQuery(queryString);
q.setInteger(0, averagingWindowInSeconds);
q.setInteger(1, averagingWindowInSeconds);
q.setTimestamp(2, dateFrom);
q.setTimestamp(3, dateTo);
q.setInteger(4, sensorId);
q.setInteger(5, averagingWindowInSeconds);
q.setInteger(6, averagingWindowInSeconds);
q.addEntity(ScalarSampleState.class); 
```

任何人都知道为什么我会收到此“不是 GROUP BY 表达式”错误吗？

我在这里从汤姆那里得到了这种在时间间隔内进行平均的方法：http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID: [4222062043865](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:4222062043865)

**编辑** 它几乎似乎通过以下方式解决：

```
select sensorid,
    trunc(sampletime,'hh24') + 
    (trunc(to_char(sampletime,'mi')))/24/60 +
    (trunc(to_char(sampletime,'ss')/?)*?)/24/60/60 as sampletime, 
    avg(correctedvalue),
    max(qualityflag)
from scalarsample
where sampletime between ? and ?
    and sensorid = ?
group by sensorid, sampletime
order by sampletime 
```

*注意：* 我用sampletime重命名了列，也就是表中某一列的名称。它不适用于名称“tspan”而不是采样时间：

```
ORA-00904: "TSPAN": invalid identifier
00904\. 00000 -  "%s: invalid identifier" 
```

当我命名新列 sampletime 并在 GROUP BY by 子句中使用 sampletime 时，该错误消失了，查询在 SQLDeveloper 中完美运行。不幸的是，当从 Java 运行时，它为每个采样时间返回了几个相同的行。呜呜呜……

**解决方案：**起作用的是下面选择的解决方案——我去掉了字符串周围的引号和加号，使其在此处更具可读性：

```
SELECT
    sensorid, 
    TRUNC( sampletime, hh24) +
    (TRUNC(to_char(sampletime,'mi')))/24/60 +
    (TRUNC(to_char(sampletime,'ss')//averagingWindowInSeconds )*averagingWindowInSeconds)/24/60/60 as sampletime,
    AVG( correctedvalue) as correctedvalue, 
    MAX(qualityflag)
FROM scalarsample
WHERE 
    sampletime BETWEEN ? AND ?
    AND sensorid = ?
GROUP BY sensorid,
    TRUNC( sampletime, hh24) +
    (TRUNC(to_char(sampletime,'mi')))/24/60 +
    (TRUNC(to_char(sampletime,'ss')//averagingWindowInSeconds 
ORDER BY sampletime "; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:08:20.263

看起来 JDBC 驱动程序正在为每个“？”创建一个唯一的绑定变量名称。不幸的是，在 Oracle 中，group by 子句必须逐个字符地匹配 select 子句，正因为如此，它不匹配。我在 Oracle 中用您的数据模拟了一个表，并使用动态 SQL 和绑定变量运行了一些测试查询。首先，使用顺序命名的绑定变量：

```
SQL> l
  1  declare
  2  cur sys_refcursor;
  3  begin
  4  open cur for 'select sensorid, ' ||
  5  '    trunc(sampletime,''hh24'') +  ' ||
  6  '    (trunc(to_char(sampletime,''mi'')))/24/60 + ' ||
  7  '    (trunc(to_char(sampletime,''ss'')/:b1)*:b2)/24/60/60 as tspan,  ' ||
  8  '    avg(correctedvalue), ' ||
  9  '    max(qualityflag) ' ||
 10  'from scalarsample ' ||
 11  'where sampletime between DATE ''2010-10-27'' and DATE ''2010-10-28'' ' ||
 12  '    and sensorid = 4472 ' ||
 13  'group by sensorid,  ' ||
 14  '    trunc(sampletime,''hh24'') +  ' ||
 15  '    (trunc(to_char(sampletime,''mi'')))/24/60 + ' ||
 16  '    (trunc(to_char(sampletime,''ss'')/:b3)*:b4)/24/60/60 ' ||
 17  'order by tspan'
 18  using 15, 15, 15, 15;
 19  close cur;
 20* end; 
```

结果：

```
SQL> @test
declare
*
ERROR at line 1:
ORA-00979: not a GROUP BY expression
ORA-06512: at line 4 
```

其次，使用相同命名的绑定变量：

```
SQL> l
  1  declare
  2  cur sys_refcursor;
  3  begin
  4  open cur for 'select sensorid, ' ||
  5  '    trunc(sampletime,''hh24'') +  ' ||
  6  '    (trunc(to_char(sampletime,''mi'')))/24/60 + ' ||
  7  '    (trunc(to_char(sampletime,''ss'')/:b1)*:b1)/24/60/60 as tspan,  ' ||
  8  '    avg(correctedvalue), ' ||
  9  '    max(qualityflag) ' ||
 10  'from scalarsample ' ||
 11  'where sampletime between DATE ''2010-10-27'' and DATE ''2010-10-28'' ' ||
 12  '    and sensorid = 4472 ' ||
 13  'group by sensorid,  ' ||
 14  '    trunc(sampletime,''hh24'') +  ' ||
 15  '    (trunc(to_char(sampletime,''mi'')))/24/60 + ' ||
 16  '    (trunc(to_char(sampletime,''ss'')/:b1)*:b1)/24/60/60 ' ||
 17  'order by tspan'
 18  using 15, 15, 15, 15;
 19  close cur;
 20* end; 
```

结果：

```
SQL> @test
PL/SQL procedure successfully completed. 
```

因此，请尝试将您的`averagingWindowInSeconds`值连接到您的查询，而不是使用这 4 个绑定变量。

# image-processing - Harris-Laplacian-Detector: Corner- and Blob-Detector？

> ID：13615649
> 
> 赞同：7
> 
> 时间：2012-11-28T22:35:36.937
> 
> 标签：image-processing, computer-vision, feature-detection

我有一个关于 Mikolajczyk 等人介绍的 Harris-Laplacian-Detector 的问题。使用哈里斯，您可以在每个特定尺度内搜索“角落”的最大值，然后使用拉普拉斯算子，您可以在比找到的哈里斯点的尺度大一个和小一个的尺度上搜索“斑点”的最大值。

为什么“blobness”在尺度上的最大化对角点有如此好的效果？我会假设，最好是搜索最大的“角落”（例如找到最大的哈里斯超过尺度）来找到好的角落点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T02:22:10.990

需要包含拉普拉斯算子以确保尺度不变性。

虽然适应尺度的 Harris 检测器确实具有非常好的可重复性（就检测位置而言），但尺度选择仍然是一个问题。他们注意到

> 在我们的实验中，我们注意到适应的 Harris 函数很少在 3D 空间中达到最大值。因此，我们建议使用不同的函数 Laplacian 来进行尺度最大值检测。

（来自*[基于尺度不变兴趣点的索引](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=937561)*）

[这在他的论文](http://perception.inrialpes.fr/Publications/2002/Mik02/Mikolajczyk_these2002.pdf)中有更详细的解释：

> 在我们的实验中（参见第 3.2.4 节）**，我们注意到适应尺度的 Harris 函数很少在尺度空间表示中超过尺度达到最大值**。如果检测到的兴趣点太少，则无法可靠地表示图像。因此，**我们放弃了搜索 Harris 函数的 3D 最大值的想法**. 此外，实验表明，LoG 函数能够找到最高百分比的正确特征量表。因此，我们建议使用拉普拉斯算子来选择用哈里斯检测器提取的点的尺度。Harris-Laplace 检测器使用 Harris 函数（参见方程 4.1）来定位尺度空间表示的每个级别中的点。接下来，它选择高斯拉普拉斯算子（参见方程 4.2）在尺度上达到最大值的点。通过这种方式，我们将这两种方法结合起来，以获得一个可靠的兴趣点检测器，该检测器不受显着尺度变化的影响。

我没有任何直观的解释来解释为什么哈里斯函数在尺度上没有给出很多最大值，但根据经验，他们发现情况确实如此。看起来没有什么能阻止你使用 Harris 比例空间最大值，但你可能只会得到更少的检测。

# c++ - Eclipse 不会运行 c++ 项目

> ID：13615652
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:35:43.177
> 
> 标签：c++, eclipse

在我的 CSCI 课程中，我们使用 Eclipse 进行编码。整个学期，我对这个程序没有任何问题（除了弄清楚如何使用它）。但是，它不允许我运行我当前的项目。我点击运行，它说它启动了，但是控制台中什么也没有出现，它说程序已终止。当我试图找到解决方案时，我试图从本学期早些时候开始运行项目，但现在它们都不会运行——它们都只是启动和终止。

我能做些什么来尝试解决这个问题？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:44:08.763

您是否尝试过使用新项目重新创建项目并复制代码？这是避免任何奇怪设置（除了狩猎它们）的最简单方法。调试配置可能有问题，您也可以将其删除以查看是否有帮助。

# r - 直方图不显示密度

> ID：13615666
> 
> 赞同：2
> 
> 时间：2012-11-28T22:36:33.990
> 
> 标签：r, plot, histogram

我尝试了不同的函数和几个不同的参数，但直方图

```
hist(estimator, probability=T, br=5) 
```

无论我选择什么绘图函数或参数，都不会在 y 轴上显示密度。矢量“估计器”包含 0.4 到 0.6 之间的 100 个值。

准确地说：通过创建一个 hist 对象的方式，然后计算并更改密度并通过 plot() 再次绘制它，但我不希望首先绘制 hist 对象：/ ![阴谋](../Images/0633ed0ad2fb3ea47a866e1432172da3.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T22:53:25.367

当您指定时`probability=T`（或者更好的是，如果更改为除 之外的其他内容`probability=TRUE`，您不会弄乱）是一个缩放比例，使得直方图条的整个区域加为 1，因为您的条的宽度要小得多大于 1 时，高度必须大于 1，以便所有面积加起来为 1。这使得叠加密度估计曲线或理论密度曲线或添加其他参考变得容易。`T``TRUE`

一般来说，你应该忽略 y 轴上的刻度标签（如果它们甚至不被绘制会更好），它们只是分散了绘图的重要部分的注意力。

许多人认为他们希望 y 轴刻度标签代表每个分组中观察的比例（或百分比）（这可以使用您自己的自定义轴），但我认为这仍然是一种干扰。考虑一下如果您更改直方图中的条形/间隔数会发生什么情况，直方图的整体结构保持不变（前提是您不进行剧烈更改），但 y 轴上的刻度标签有时会发生变化相当多，所以最好忽略它们（或者一开始就不生产）。

如果您真的认为需要百分比（或比例），那么代码很简单：

```
x <- rgamma(327, 5, 3)

tmp <- hist(x, yaxt='n',ylab='Percent')
tmp2 <- pretty( tmp$counts/sum(tmp$counts)*100 )
axis(2, at=tmp2*sum(tmp$counts)/100, labels=tmp2) 
```

如果你愿意，这可以很容易地包装成一个函数。

# python - 列表理解子套件

> ID：13615667
> 
> 赞同：-5
> 
> 时间：2012-11-28T22:36:37.600
> 
> 标签：python, list, printing

如果我有一个类似的列表：

```
["1","2","3"] 
```

如何打印列表并同时将单个 1 附加到数字 3 ？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:39:30.193

尝试这个：

```
print [x if x != "3" else "1" + "3" for x in ["1","2","3"]] 
```

或这个：

```
print [x if x != "3" else "3" + "1" for x in ["1","2","3"]] 
```

或这个：

```
print [x if x != "3" else str(1+int("3")) for x in ["1","2","3"]] 
```

这实际上取决于您对“将单个 1 添加到数字 3”的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:40:22.193

也许您正在尝试实现这一目标：

```
print [str(int(i) + 1) if i == '3' else i for i in ['1', '2', '3']]
>>> ['1', '2', '4'] 
```

?

# ios - 从 JSON 输出中提取 JSON 对象

> ID：13615670
> 
> 赞同：1
> 
> 时间：2012-11-28T22:36:44.503
> 
> 标签：ios, xcode, json

这是我的 JSON 输出

```
{"activitiesList":{"auid":"19UG9IZ","comments":"Please enter Description","createDate":"09/19/2012 07:32:56 AM","id":"19UG9IZ","owner":"04256CRM","response":"Missing Response","status":"Assigned","type":"Request Action"}} 
```

当我有多个活动列表而不是上面的输出时，下面的代码有效，它有一个活动列表

```
@try {
    NSError* error;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];
    NSArray* activityListFromSiebel = [json objectForKey:@"activitiesList"]; //2
    NSLog(@" Count is %d", [activityListFromSiebel count]);
    for (int i = 0; i < [activityListFromSiebel count]; i++) {
        //if ([activityListFromSiebel count] > 1) {
            NSDictionary* completeActivity = [activityListFromSiebel objectAtIndex:i];

            ObjActivityData *dataActivity = [[ObjActivityData alloc] init];
            dataActivity.activityUID      = [completeActivity objectForKey:@"auid"];
            dataActivity.activitytype     = [completeActivity objectForKey:@"type"];
            dataActivity.activityStatus   = [completeActivity objectForKey:@"status"];
            dataActivity.activityOpenedDt = [completeActivity objectForKey:@"createDate"];
            dataActivity.activityDueDt    = @"";
            dataActivity.activityDesc     = [completeActivity objectForKey:@"comments"];
            dataActivity.activityResponse = [completeActivity objectForKey:@"response"];
            [Activities addObject:dataActivity];
            dataActivity = nil;
        //}
    }
    [self.tableView reloadData];
} @catch (NSException * e) {
    NSLog(@"catching %@ reason %@", [e name], [e reason]);
} @finally {
    NSLog(@"finally");
} 
```

抛出的 try/catch 错误是 NSInvalidArgumentException 原因 -[__NSCFArray 长度]：无法识别的选择器发送到实例 0x68c8e90。如果输出只是 1 个数组元素，我是否应该以不同的方式解析 JSON 输出。感谢帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:41:03.313

做这个，

```
id obj = [json objectForKey:@"activitiesList"];
NSArray* activityListFromSiebel = nil;

if ([obj isKindOfClass:[NSArray class]]) {
    activityListFromSiebel = (NSArray *)obj;
} else {
    activityListFromSiebel = [NSArray arrayWithObject:obj];
} 
```

问题是当您尝试使用您的代码时，您假设它`[json objectForKey:@"activitiesList"];`是一个数组，但实际上它只是一个字典，当只有一个项目存在时。您可以通过您的 for 循环并将您的字典转换 `ObjActivityData`为 else 部分中的对象，或者只是在您现在使用的 for 循环之前添加它作为快速修复。

所以你的代码看起来像这样，

```
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error];

id obj = [json objectForKey:@"activitiesList"];
NSArray* activityListFromSiebel = nil;

if ([obj isKindOfClass:[NSArray class]]) {
    activityListFromSiebel = (NSArray *)obj;
} else {
    activityListFromSiebel = [NSArray arrayWithObject:obj];
}

NSLog(@" Count is %d", [activityListFromSiebel count]);
for (int i = 0; i < [activityListFromSiebel count]; i++) {
    //if ([activityListFromSiebel count] > 1) {
        NSDictionary* completeActivity = [activityListFromSiebel objectAtIndex:i];

        ObjActivityData *dataActivity = [[ObjActivityData alloc] init];
        dataActivity.activityUID      = [completeActivity objectForKey:@"auid"];
        dataActivity.activitytype     = [completeActivity objectForKey:@"type"];
        dataActivity.activityStatus   = [completeActivity objectForKey:@"status"];
        dataActivity.activityOpenedDt = [completeActivity objectForKey:@"createDate"];
        dataActivity.activityDueDt    = @"";
        dataActivity.activityDesc     = [completeActivity objectForKey:@"comments"];
        dataActivity.activityResponse = [completeActivity objectForKey:@"response"];
        [Activities addObject:dataActivity];
        dataActivity = nil;
    //}
}
[self.tableView reloadData]; 
```

# asp.net - ASP.NET：按用户缓存

> ID：13615672
> 
> 赞同：2
> 
> 时间：2012-11-28T22:36:52.100
> 
> 标签：asp.net, caching

使用 ASP.NET，我将数据放入特定于用户的缓存中。该站点使用 Windows 身份验证：

```
HttpContext.Current.Cache.Insert(....) 
```

此缓存是否仅对用户可用，或者任何使用相同键请求缓存的用户都会获得相同的数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T22:41:19.680

您可以使用户名成为密钥的一部分，例如“Joe.CacheKey1”。解析密钥将由您决定。

您可能使用 Cache 而不是 Session 的一些原因：

1.  会话被禁用。
2.  Session 的过期策略不能满足您的需求，但 Cache 可以
3.  您需要利用 Session 所没有的缓存的某些功能，例如对项目驱逐采取行动，当存在内存压力时自动驱逐等。

使用 Cache 而不是 Session 的一个不好的原因是因为您不知道 Session 存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:39:55.220

缓存是全局的，因此每次使用都将通过站点访问相同的资源。如果需要会话持久用户数据，可以查看会话。

# silverlight - 将 1.4KB 字符串从 Silverlight 发布到 WCF 数据服务时出错

> ID：13615673
> 
> 赞同：0
> 
> 时间：2012-11-28T22:36:52.357
> 
> 标签：silverlight, wcf-data-services

我正在使用 SL 5 和 WCF DS 5。我正在调用服务 POST 操作，其中将字符串作为输入发送，该输入基本上是文本文件的内容。似乎当字符串较小时，它可以工作，但是当它大约为 1.4KB（文本文件的大小）时，会引发此错误：

```
{System.InvalidOperationException: An error occurred while processing this request. ---> System.Exception: Error HRESULT E_FAIL has been returned from a call to a COM component. 
```

在 System.Net.Browser.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Data.Services.Http.ClientHttpWebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Data.Services.Client.HttpWebRequestMessage.EndGetResponse(IAsyncResult asyncResult) 在 System.Data .Services.Client.HttpTransportLayer.EndGetResponse(IODataRequestMessage requestMessage, IAsyncResult asyncResult) 在 System.Data.Services.Client.DataServiceContext.GetResponseHelper(ODataRequestMessageWrapper 请求, IAsyncResult asyncResult, Boolean handleWebException) 在 System.Data.Services.Client.QueryResult.AsyncEndGetResponse( IAsyncResult asyncResult) --- 内部异常堆栈跟踪结束 --- 在 System.Data.Services.Client 的 System.Data.Services.Client.BaseAsyncResult.EndExecute[T](Object source, String method, IAsyncResult asyncResult)。System.Data.Services 中的 QueryResult.EndExecuteQuery[TElement]（对象源，字符串方法，IAsyncResult asyncResult）。Data.Services 中的Client.DataServiceRequest.EndExecute[TElement]（对象源，DataServiceContext 上下文，字符串方法，IAsyncResult asyncResult） .Client.DataServiceContext.EndExecute[TElement](IAsyncResult asyncResult)

**我从 WPF 应用程序调用了相同的操作，它工作正常**。我也在 WCF DS 主机上这样做了：

```
WebHttpBinding binding = new WebHttpBinding();
        binding.MaxReceivedMessageSize = int.MaxValue;
        binding.MaxBufferPoolSize = int.MaxValue;
        binding.MaxBufferSize = int.MaxValue;
        binding.ReaderQuotas.MaxStringContentLength = int.MaxValue; 
```

这是来自 SL 客户的电话：

```
CodeFirstContainer context;

        context = new CodeFirstContainer(new Uri("http://localhost:4444/MyDataService/"));

        OperationParameter p = new UriOperationParameter("fileIDN", fileIDN);
        OperationParameter p1 = new UriOperationParameter("**fileContent**", responseContent);

        context.BeginExecute<int>
            (new Uri(context.BaseUri.OriginalString + "ProcessTextFile"),
                (r) =>
                {
                    Deployment.Current.Dispatcher.BeginInvoke(() =>
                    {
                        try
                        {
                            context = r.AsyncState as CodeFirstContainer;

                            // Get the response of the query.
                            var response = context.EndExecute<int>(r).ToList();
                        }
                        catch (Exception ex)
                        {
                        }
                    }
                    );
                },
                context, "POST", true, new OperationParameter[] { p, p1 }
            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:11:11.697

我在这里得到了我的问题的答案：

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/1b9b84cb-916f-4611-a710-dec94ff103ad](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataservices/thread/1b9b84cb-916f-4611-a710-dec94ff103ad)

# powershell - $($variableName) 在 PowerShell 中的可扩展字符串中是什么意思？

> ID：13615676
> 
> 赞同：41
> 
> 时间：2012-11-28T22:37:17.123
> 
> 标签：powershell, syntax, string-interpolation

我在网上看到了许多使用它的示例脚本。最近，我在[自动化 TFS](http://programmaticponderings.wordpress.com/2012/04/15/automating-task-creation-in-team-foundation-server-with-powershell/)的脚本中看到了它：

```
[string] $fields = "Title=$($taskTitle);Description=$($taskTitle);Assigned To=$($assignee);"
$fields += "Area Path=$($areaPath);Iteration Path=$($iterationPath);Discipline=$($taskDisciplineArray[$i]);Priority=$($i+1);"
$fields += "Estimate=$($taskEstimateArray[$i]);Remaining Work=$($taskRemainingArray[$i]);Completed Work=$($tasktaskCompletedArray[$i])" 
```

据我所知，`$($taskTitle)`似乎相当于`$taskTitle`. 我错过了什么吗？有什么理由使用括号和额外的美元符号吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-28T22:42:14.830

该语法有助于评估其中的表达式。

```
$arr = @(1,2,3)

$msg1 = "$arr.length"
echo $msg1 # prints 1 2 3.length - .length was treated as part of the string

$msg2 = "$($arr.length)"
echo $msg2 # prints 3 
```

您可以在[http://ss64.com/ps/syntax-operators.html阅读更多内容](http://ss64.com/ps/syntax-operators.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-02-28T13:51:20.660

为了补充[Amith George 的有用答案](https://stackoverflow.com/a/13615748/45375)，提供更多**背景信息**：

> 据我所知，`$($taskTitle)`似乎相当于`$taskTitle`.

实际上，在 的上下文中**`"..."`，一个*可扩展的字符串***（插值字符串）：

*   **您不需要简单`$(...)`的*变量引用***，例如**`$taskTitle`**或**`$env:HOME`**

    *   有时您必须（或可能选择）使用形式`${taskTitle}`或`${env:HOME}`- 即，`{...}`围绕标识符 - 以便区分变量名称与字符串中的后续字符。
*   **您确实需要`$(...)`其他*任何东西***：

    *   *访问属性*；例如：
        `"count is: $($var.Count)"`
    *   嵌入*表达式*；例如：
        `"path prefix: $($var + '/')"`
    *   嵌入整个*命令*（甚至可能是*多个*命令）；例如：
        `"file names: $(Get-ChildItem *.txt | Select-Object -ExpandProperty Name)"`

简而言之：

*   `$(...)``...`除了简单的变量引用之外，inside " " 是必需的，它允许您将整个*语句*嵌入其中`"..."`；像往常一样，在评估字符串时，该`$(...)`部分将替换为嵌入语句的（字符串化）*输出*。

*   如果您不想考虑什么时候需要，什么时候`$(...)`不需要，您可以选择*始终*使用它（例如，`$($taskTitle)`），但请注意打字很麻烦并且视觉上“嘈杂”。

    *   **警告**：有一种极端***情况*`$($var)`，即的行为与/的*行为*`$var``${var}`**不同，即 if`$var`是一个碰巧只包含一个*项目的**集合*（实现） - 请参阅下面[PetSerAl](https://stackoverflow.com/users/4003407/petseral)的评论。`[System.Collections.IEnumerable]`

**   除非引用的变量/嵌入语句的值已经是一个字符串，否则它会使用 .NET**方法进行****字符串化**，值得注意的是，支持*文化敏感*字符串化的类型会**使用*****不变的文化***进行字符串化，松散地说，就像 US-英文格式；例如，*总是*产生，即使在小数点为 的文化中也是如此；有关更多信息，请参阅我的[这个答案](https://stackoverflow.com/a/37603732/45375)。**`.ToString()`****`"$(1.2)"` *`1.2``,`**** 

 *****文档**：

的正式名称**`$(...)`是*子表达式 operator***，如（简洁地）记录在 中[`Get-Help about_Operators`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_operators)，尽管那里的解释没有讨论运算符在可扩展字符串的上下文中的具体用途。

相反，[`Get-Help about_Quoting_Rules`](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules)讨论了包括可扩展字符串在内的字符串文字，仅显示了在可扩展字符串上下文中的使用*示例。*`$(...)`***

# requirejs - RequireJs 加载模块 - Qunit

> ID：13615679
> 
> 赞同：4
> 
> 时间：2012-11-28T22:37:24.690
> 
> 标签：requirejs, qunit

我对 RequireJS 很陌生，并且在将 QUnit 写入具有使用 requireJS 动态加载模块的逻辑的源代码时遇到了麻烦。

****以下是源代码：factory/Factory.js *****

 **```
getPage: function (callback) {

    //doSomething here

    require(['page/something'], function() {

         callback();

    })
} 
```

运行 QUnit 时永远不会加载模块“page/something”，并且永远不会调用回调。我在这里有什么遗漏吗？感谢您的回复。

*** *QUnit 工厂/FactoryTests.js*

```
define(['underscore', 'factory/Factory'],
       function (_, Factory) {

           module("Factory", {
               setup:function () {
               },
               teardown:function () {
               }
           });

           test("GetPage", function () {
              var isCallbackInvoked = false;
              var mockCallback = function () {
                  isCallbackInvoked = true;
              }

              Factory.getPage(mockCallback);
              ok(isCallbackInvoked);

           });

}); 
```

* ***test-require-config.js* ****

```
require.config({

    baseUrl: "../../resources/js",

    paths:{
        jquery:'../jquery-1.8.2',
    jquery_star_rating : '../jquery/jquery.rating',
        underscore:'..underscore-1.4.1',
        backbone:'../backbone-0.9.2',
        jquery_star_rating : '../jquery.rating',
        text : '../require-text-2.0.3',
        sinon: '../../../../sinon',
    },
    shim:{
        underscore:{
            exports:'_'
        },
        backbone:{
            deps:["jquery", "underscore"],
            exports:"Backbone"
        }
        jquery_star_rating : {
            deps : ['jquery']
        }
    }

});

var dependencies = [
    'jquery',
    'jquery_star_rating',
    'underscore',
    'backbone',       
    'sinon',
];

require(dependencies, function () {

    require(['../../../../test/js/testsuite'], function(suite){

    })

}); 
```

***测试套件.js***

 ****```
function () {

    QUnit.config.autostart = false;

    var testModules = [       
        "factory/FactoryTests.js"
    ];

    require(testModules, QUnit.start);
}()); 
```

谢谢！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-06T20:36:50.327

首先，澄清一下：您的 QUnit 测试页面是什么样的？我猜它要么列出零测试，要么是空白页。

如果是这样的话，[我在同样的事情上遇到了很多麻烦](http://elucidblue.com/2012/12/24/making-qunit-play-nice-with-requirejs/)。“正确”的答案正是您正在做的事情。但是经过大量的代码单步调试后，在我的设置中，QUnit 仍然在我的任何测试被定义​​之前启动，尽管设置了`QUnit.config.autostart = false`.

在 testsuite.js 的末尾，尝试调用`QUnit.load()`而不是`QUnit.start()`（你也可以删除`autostart = false`）。这是一个未记录的功能，但它是唯一对我有用的东西。我相信这是 QUnit 默认附加到 onLoad 事件的函数。不幸的是，使用 RequireJS，onLoad 在大多数 js 文件加载之前触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-20T15:27:32.860

我今天已经解决了这个问题，并将收集到的信息添加到@keithjgrant 正确答案中。

## 来自[RequireJs 文档](https://github.com/jrburke/requirejs/wiki/Test-frameworks#qunit)：

> **QUnit**
> 
> 尽管 QUnit 在作为异步模块加载时存在问题，但您可以通过在 require.js 之前将其包含在脚本标记中，然后关闭自动启动，然后在加载带有测试的模块后手动调用 start() 来使其工作。但是，需要从计时器内部调用 start。这是完整的安全带。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>QUnit Test Suite</title>
    <link rel="stylesheet" href="qunit-git.css">
    <script data-main="main" type="text/javascript" src="libs/require.js"></script>
    <script src="libs/qunit-git.js"></script>
    <script type="text/javascript">
        window.addEventListener("load", function onLoad() {
            QUnit.config.autostart = false;
                        // Without this setTimeout, the specs don't always get execute in webKit browsers

            setTimeout(function () {
                                //load tests using require
                require(['firstUse/example_test'], function (one) {
                    //now trigger them.
                    QUnit.start();
                });

            }, 10);
            window.removeEventListener("load", onLoad, true);
        }, true);
    </script>
</head>
<body>
    <div id="qunit">
    </div>
</body>
</html> 
```

> 如果您需要停止测试，请使用 Qunit.stop()，进行更多异步工作，然后使用 QUnit.start() 再次启动它们。

## 来自 QUnit 源代码

```
Unit.load = function() {
  ...

  if ( config.autostart ) {
    QUnit.start();
  }
};

if ( defined.document ) {
   addEvent( window, "load", QUnit.load );
} 
```

我已经调查了为什么使用我用 RequireJs 调用 QUnit 的不同方法不起作用。我找到了@keithjgrant 建议的相同解决方案。

在调试我从 RequireJs 调用 QUnit 的代码时，似乎窗口加载事件已经被调度。`document.readyState`因为load 事件的`'complete'`addEventHandler 的行为不像 Promise，所以将处理程序添加到已触发的事件不会触发处理程序。

显式调用该`QUnit.load`函数，解决了我的问题。需要考虑如何在该调用点找到窗口是否已完成加载。您可以使用 JQquery 或使用我从中获取[的部分 JQuery 代码](https://github.com/addyosmani/jquery.parts/blob/master/jquery.documentReady.js)`document.readyState == 'complete'`来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T20:06:28.287

你可以这样做：

```
 <!DOCTYPE html>
<html>
<head>
    <title>Example Test Runner</title>
    <link rel="stylesheet" href="//code.jquery.com/qunit/qunit-1.15.0.css">
    <script src="../libraries/qunit/qunit/qunit.js" data-main="testsuite.js"></script>
    <script>
        QUnit.config.autostart = false;
    </script>
    <!-- Load RequireJS & the testsuite -->
    <script src="../libraries/requirejs/require.js" data-main="testsuite.js"></script>
</head>
<body>
<div id="qunit"></div>
</body>
</html> 
```

所以 requirejs 将在设置 QUnit 选项后开始工作。******

# jquery - VBScript onClick 和 jQuery 按钮单击

> ID：13615680
> 
> 赞同：0
> 
> 时间：2012-11-28T22:37:28.900
> 
> 标签：jquery, vbscript

我有一个带有一点 VBScript 的页面，当单击按钮时会启动打印机安装。脚本成功完成后会出现警报。

我现在正在尝试添加另一个按钮单击事件（可能使用 jQuery），它通知用户打印机安装已经开始（在按钮单击时）。这是因为安装打印机可能需要 20 秒到 1 分钟不等的时间。

实现以下代码时，我收到一个错误，即在 jQuery 代码块中需要一个对象

```
 <script type="text/vbscript">
        function AddP(pName)
            Set WshNetwork = CreateObject("Wscript.Network")
            WshNetwork.AddWindowsPrinterConnection pName
            MsgBox "Printer Added"
        end function
   </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript">
        $(document).ready( function (){ 

            $("#btn").click( function(){

                 alert("Printer Install Started");

            });

         });
    </script>

 <td><a href="#" language="vbscript" onclick="AddP('\\PrinterName')"><input id="btn" name="Button1" type="button" value="Add"></a></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T21:59:01.140

如果您想添加错误检查并提示设置为默认值。这是我第一次真正地编写脚本，所以请记住这一点。

```
<script type="text/vbscript">
function AddP(pName)

Shortname = split(pName, "\")

    If MsgBox("Click YES to install  " &ShortName(3),VBYesNo, "Printer Utility") = vbYes Then

        MsgBox "Installing Printer " &ShortName(3) &vbCrLf &vbCrLf &"This may take a few moments"

        Set WshNetwork = CreateObject("Wscript.Network")

        On Error Resume Next
        WshNetwork.AddWindowsPrinterConnection pName
            If Err.Number <> 0 Then

            MsgBox "Printer is not available for install." &vbCrLF &"Please contact Tech Support for assistance"
                Else If MsgBox ("Would you Like  " &ShortName(3) &" to be your Default Printer?" ,vbyesno, "Printer Utility")  = vbYes Then

                WshNetwork.SetDefaultPrinter pName
                MSgBox ShortName(3) &"  Installed and Set as Default",0,"Printer Utility"
                Else MSgBox ShortName(3) &"  Installed",0,"Printer Utility"

                End if

            End If

        On Error GoTo 0
     Else Msgbox "Printer Install Cancelled"
    End if
end function 
```

</脚本>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:51:19.223

如果您想在添加打印机时给用户一些指示，您可以更改按钮状态。

```
<script type="text/vbscript">
   function AddP(pName)
       Dim allButton1s
       Set allButton1s = document.getElementsByName("Button1")
       allButton1s(0).value = "Please wait..."
       Set WshNetwork = CreateObject("Wscript.Network")
       WshNetwork.AddWindowsPrinterConnection pName
       MsgBox "Printer Added"
       allButton1s(0).value = "Add"
   end function
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T23:52:48.737

如果真的只是想在启动打印机安装之前发出警报，请在它之前添加另一个 MsgBox 行

```
<script type="text/vbscript">
   function AddP(pName)
       MsgBox "Printer Install Started"
       Set WshNetwork = CreateObject("Wscript.Network")
       WshNetwork.AddWindowsPrinterConnection pName
       MsgBox "Printer Added"
   end function
</script> 
```

注意：打印机安装不会开始，直到用户点击“打印安装开始”警报上的确定，如果您想避免使用按钮状态更改答案来代替。

# bash - Shell 脚本打印出“读取：缺少参数”

> ID：13615681
> 
> 赞同：1
> 
> 时间：2012-11-28T22:37:30.167
> 
> 标签：bash, shell

我有一个 shell 脚本，我想在后台运行我的可执行“服务器”的两个实例。但是，当我运行脚本时，我收到错误“读取：缺少参数”。当我删除“&”以在后台运行时，不会发生此问题，但随后会产生不良行为。

服务器可执行文件后面是地址和端口对，但我删除了所有检查参数数量是否正确的代码。抛出的错误在哪里，我怎样才能让这个脚本工作？

```
#Location of executable.
SERVER=server
SERVER_NAME=`echo $SERVER | sed 's#.*/\(.*\)#\1#g'`

$SERVER localhost 4111 localhost 4222 &
$SERVER localhost 4222 localhost 4111 &

echo "Press ENTER to quit"
read
pkill $SERVER_NAME 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:42:12.520

`read`期望在它读入之后的变量：

```
read var1 
```

如果您只是`read`用来阻止脚本的执行，直到您收到用户的一些响应，请使用上述建议。

* * *

此外，这可能不是您打算做的：

```
SERVER=server
SERVER_NAME=`echo $SERVER | sed 's#.*/\(.*\)#\1#g'` 
```

因为在执行之后，`SERVER_NAME`将只是字符串`server`

如果`server`是您环境中的命令，您可能打算做的是：

```
SERVER_NAME=$(server | sed 's#.*/\(.*\)#\1#g'`) 
```

# gdb - 如何为 gdb 设置默认选项？

> ID：13615692
> 
> 赞同：16
> 
> 时间：2012-11-28T22:38:25.643
> 
> 标签：gdb

每次打开 GDB 时，我都会设置几个选项，例如：

```
set print thread-events off 
```

有没有办法默认设置这些选项，可能是 .gdb_rc 文件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T23:16:47.823

的初始化文件`gdb`称为`.gdbinit`. 您可以将所需的选项放在此文件中。它们将在 gdb 启动期间自动执行。

示例内容：

```
# set command line argument to "2"
set args 2 
```

您可以将`.gdbinit`文件放入您的 $HOME 或当前目录。后者覆盖全局`$HOME/.gdbinit`文件中的设置。

# html - 给定一个 div 的宽度是固定的，我如何让另一个 div 以 100% 的大小坐在它旁边 - 第一个的宽度？

> ID：13615693
> 
> 赞同：0
> 
> 时间：2012-11-28T22:38:36.563
> 
> 标签：html

我的页面左上角有一个带有徽标的 div，我想在它旁边制作另一个 div，作为带有文本的工具栏。问题是我似乎无法弄清楚如何让新的 div 占据剩余空间的全部宽度......它只是试图使用屏幕的全部宽度并且文本显示在徽标的顶部。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<style type="text/css">
  div#topbar {
    width: 100%;
    position: fixed;
    top:0px;
    left:0px;
    height:133px;
    background-image :url(bkgnd_header_tile.jpg);
    padding: 0px;
    margin: 0px;
  }
  div#logo {
    width: 187px;
    height: 133px;
    position: fixed;
    top:0px;
    left:0px;
    background-image:url('headerlogo_home.jpg');
  }
  div#text {

  }

  body {

  }    
</style>
</head>
<body>
  <div id="topbar">
    <div id="logo"></div>
    <div id="text">
      <span id="campuses">asdf</span>
      <span id="title">Blah</span>
    </div>
  </div>
</body>
</html> 
```

topbar 应该是一个高 133px 宽 100% 的大 div。它用于保存工具栏的图像背景。另一个 div 仅用于左上角的徽标，宽度为 187px。

如何使第三个 div 位于图像的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:53:40.110

如果我了解您要执行的操作，这就是您需要做的：设置顶栏的宽度。无需设置位置。

```
#topbar{
 width:100%;
 height:133px;
} 
```

然后您必须将您的徽标浮动到左侧：

```
#logo{
 width:187px;
 height:133px;
 float:left;
} 
```

然后将您的文本也设置为向左浮动并将宽度设置为 100%：

```
#text{
 width:100%;
 height:133px;
 float:left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:49:40.440

[这](http://codepen.io/anon/pen/jBska)对你有用吗？看起来你只漏掉了几行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:51:19.373

请记住，这是 CSS3 的东西，规范可能仍然会发生变化，但您可以查看 calc。

[ [https://developer.mozilla.org/en-US/docs/CSS/calc](https://developer.mozilla.org/en-US/docs/CSS/calc) ]

[ [http://dev.w3.org/csswg/css3-values/#calc-notation](http://dev.w3.org/csswg/css3-values/#calc-notation) ]

```
width: calc(100% - 187px); 
```

# jquery - Twitter Bootstrap 的 Collapse 功能的标题编辑很难

> ID：13615695
> 
> 赞同：0
> 
> 时间：2012-11-28T22:38:47.483
> 
> 标签：jquery, html, twitter-bootstrap, web2py

如何为展开/折叠功能设置以下布局？

```
+ This is header having some text and links   
      This is item which was shown pressing + sign
      This is another item... 
```

[Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#collapse)具有功能，但我无法将[Collapsible Group Item #1](http://twitter.github.com/bootstrap/javascript.html#collapseOne)编辑为只是“+”号并在此之后立即具有**纯**文本/链接。

现场[http://jsfiddle.net/c4jMh/2/](http://jsfiddle.net/c4jMh/2/)问题是可见的，同样的代码也在这里：

```
 <div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        +
      </a>
        This line should be next to above '+' sign and here some example link to be reside on that line also <a href="http://jsfiddle.net/">jsfiddle.net</a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
</div> 
```

我正在尝试在 web2py 框架上使用 Bootstrap 来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:38:06.137

我已经修改了手风琴标题以使用表格，以便它出现在一行中。不确定这是否是您想要的。

```
<div class="accordion" id="accordion2">
<div class="accordion-group">
<div class="accordion-heading">
   <table>
        <tr>
            <td><a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"><i class="icon-plus"></i></a></td>
    <td>  This line should be next to above '+' sign and here some example link to be reside on that line also<a href="http://jsfiddle.net/">jsfiddle.net</a></td>
        </tr>
    </table>   
</div>
<div id="collapseOne" class="accordion-body collapse in">
  <div class="accordion-inner">
    Anim pariatur cliche...
</div>
</div>
</div>
<div class="accordion-group">
<div class="accordion-heading">
  <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"   href="#collapseTwo">
    Collapsible Group Item #2
  </a>
</div>
<div id="collapseTwo" class="accordion-body collapse">
  <div class="accordion-inner">
    Anim pariatur cliche...
    </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:06:13.523

我还提供了没有使用表格格式的解决方案[http://jsfiddle.net/c4jMh/4/](http://jsfiddle.net/vfLY5/2/)

```
<div class="accordion" id="accordion2">
<div class="accordion-group">
    <div class="accordion-heading">
        <div class="accordion-toggle group-accordion-toggle">
            <a href="#collapseOne" data-parent="#accordion2" data-toggle="collapse" class=""><i class="icon-plus"></i></a>
            <a href="http://jsfiddle.net/">jsfiddle.net</a>
        </div>
    </div>
    <div id="collapseOne" class="accordion-body collapse">
        <div class="accordion-inner">Anim pariatur cliche...</div>
    </div>
</div>

<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo"><i class="icon-plus"></i>Collapsible Group Item #2
        </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
        <div class="accordion-inner">Anim pariatur cliche...</div>
    </div>
</div> 
```

​</p>

```
$('.accordion').on('show hide', function(e) {
$(e.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-plus icon-minus', 200);}); 
```

# time - 从 Kinect 获取特定时间的数据

> ID：13615696
> 
> 赞同：0
> 
> 时间：2012-11-28T22:38:47.360
> 
> 标签：time, position, kinect

有没有办法从 Kinect 获取特定时间的数据，例如关节的位置？我想在我选择用于其他计算的特定时间内获取并保存这些数据。示例将在运行程序后的时间 = 5 秒和运行程序后的时间 = 10 秒时获取头部的位置数据并将其保存到变量中。

运行时出错：这是代码的一部分....

```
 void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        if (closing)
        {
            return;
        }

        //Get a skeleton
        Skeleton first = GetFirstSkeleton(e);

        if (first == null)
        {
            return;
        }

        GetCameraPoint(first, e);

        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
            if (skeletonFrame == null)
            {
                return;
            }

            this.Recorder.Record(skeletonFrame); // I get an error after the RGB camera view freezes

        }
         // some more stuff 
     } 
```

这是我收到的错误消息：

> System.NullReferenceException 未处理 Message=Object 引用未设置为对象的实例。Source=SkeletalTracking StackTrace: 在 SkeletalTracking.MainWindow.sensor_AllFramesReady(Object sender, AllFramesReadyEventArgs e)

将 `this.Recorder.Record(skeletonFrame);`开始录制还是我需要初始化并声明或调用其中一个函数来开始录制并询问要保存到的文件的名称？

数据的重放是否允许我提取特定的时间戳值以及与这些时间戳相关的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:09:03.573

是的，有可能，我为此使用了[Kinect.Toolbox](http://kinecttoolbox.codeplex.com/)这个库有 Recorder 和 Replay 类，允许您将帧录制到磁盘并重播保存的帧。我成功使用了这个库，如果你想要一些示例代码，请告诉我。

这个讨论越来越大，我会编辑这个来解释一些问题

**编辑 1.** KINECT.TOOLBOX 的快速教程

在您的应用程序中创建 3 个按钮（开始录制、停止录制、开始重播）

**Form.cs 的代码**

```
 Stream recordStream;
    KinectRecorder Recorder;
    KinectReplay Replay; 
```

**开始录制按钮的代码：**

```
 protected void StartRecord(object sender, RoutedEventArgs e)
    {
        string generatedName = Guid.NewGuid().ToString();
        string recordStreamPathAndName = @"C:\" + generatedName + ".recorded";            
        this.recordStream = File.Create(recordStreamPathAndName);
        this.Recorder = new KinectRecorder(KinectRecordOptions.Color | KinectRecordOptions.Skeletons, recordStream);
    } 
```

**停止录制按钮的代码**

```
 if (Recorder != null)
        {
            Recorder.Stop();
            Recorder = null;
        } 
```

**重播按钮的代码**

```
try
{
    recordStream = File.OpenRead(this.recordStreamPathAndName);
}
catch (Exception ex)
{
    throw ex;
}

    this.Replay = new KinectReplay(recordStream);
    this.Replay.ColorImageFrameReady += Replay_ColorImageFrameReady;
    this.Replay.SkeletonFrameReady += Replay_SkeletonFrameReady;
    this.Replay.Start();
} 
```

在这里，我们启用颜色和骨架记录器，现在，让我们只记录骨架数据，例如 porposes。在 SkeletonFrameReady 事件处理程序中，您需要执行以下操作

```
using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
{
    if (skeletonFrame == null)
        return;
        // any other validations...
    this.Recorder.Record(skeletonFrame);
} 
```

好的，你记录了帧。看看 Replay 按钮的代码，你创建了一个事件处理程序`ReplaySkeletonFrameReady`，还记得吗？(this.Replay.SkeletonFrameReady += Replay_SkeletonFrameReady;)

```
 void Replay_SkeletonFrameReady(object sender, ReplaySkeletonFrameReadyEventArgs e)
    {
        // do your stuff.
    } 
```

因此，在 SkeletonFrameReady 中，您将获得记录的骨架，因此，您可以获取骨架并使用保存的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:07:43.663

[Kinect 工具箱](http://kinecttoolbox.codeplex.com/)提供骨骼数据的记录和回放功能。我不确定它是否支持“快照”模式，您可以在其中告诉它只拍摄当前帧，但代码当然可以适应这样做。

`SkeletonFrameReady`您可以通过在回调中设置适当的检查来滚动自己。您可以在`SkeletonFrameReady`回调中使用所有骨架数据。您只需将适当的数据保存到某种类型的集合中——您可以保存每个骨架，或者您可以设置一个计时器来检查并仅捕获它们 ??- 秒。

此处解决了类似的问题和答案： [kinect c# draw and move skeleton from saved data](https://stackoverflow.com/questions/13039132/kinect-c-sharp-draw-and-move-skeleton-from-saved-data/13039767#13039767)

您可以尝试的其他方法是在计时器中完成所有工作：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
    _savedSkeletons = new List<Skeleton>();

    _timer = new DispatcherTimer();
    _timer.Interval = TimeSpan.FromSeconds(5);
    _timer.Tick += (s, o) =>
    {
        using (SkeletonFrame skeletonFrame = KinectSensorManager.KinectSensor.SkeletonStream.OpenNextFrame(15))
        {
            if (skeletonFrame == null || skeletonFrame.SkeletonArrayLength == 0)
                return;

            // resize the skeletons array if needed
            if (_skeletons.Length != skeletonFrame.SkeletonArrayLength)
                _skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];

            // get the skeleton data
            skeletonFrame.CopySkeletonDataTo(_skeletons);

            foreach (var skeleton in _skeletons)
            {
                if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
                    continue;

                _savedSkeletons.Add(skeleton);
            }
        }
    };

    _timer.Start();
} 
```

该`_savedSkeletons`变量每 5 秒存储一次骨架。如果要将它们保存到文件中，则可以序列化数据并通过文件流将其写出（许多关于如何序列化和输出对象的示例）。

上面的代码是一个简单的例子，只是存储了`Skeleton`对象。为了实现您的所有目标，您可能需要存储其他信息——例如时间戳。您需要创建一个自定义类来存储您想要的所有信息并存储这些对象。

请记住，Kinect 工具箱（在第一段中链接）已经有一个记录器。先试试看它是否会做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T16:34:33.213

在 C# 中等待 x 秒最简单的方法是

```
System.Threading.Thread.Sleep(x000);//where x is the time in seconds for which you want app to wait 
```

例子：

```
System.Threading.Thread.Sleep(4000);//will wait for 4 seconds 
```

另一种方法是使用计时器对象并启用禁用它们，并在循环代码中读取表单静态值，检查布尔值是否必须记录

# php - 在 PHP 中使用 $_GET 和 https

> ID：13615704
> 
> 赞同：0
> 
> 时间：2012-11-28T22:39:24.843
> 
> 标签：php, ssl, https, query-string, get-request

我试图将变量传递到 https:// 连接上的另一个页面，但没有取得多大成功。下面是查询

```
https://mydomain.prefix/secure/myfile.php?claim_id=12345678 
```

然后我尝试使用以下方法检索它：

```
$claim_id=trim(mysqli_real_escape_string($dbc, $_GET['claim_id'])); 
```

不幸的是，这不起作用，我想知道是否是 ssl 阻止了它。如果是这样，我怎样才能将这个变量从一个 href 链接传递到我的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:00:31.620

> 不幸的是，这不起作用

....不是对结果的有意义的描述。代码本质上没有任何问题。

尝试更换

```
$claim_id=trim(mysqli_real_escape_string($dbc, $_GET['claim_id'])); 
```

和

```
if (is_resource($dbc)) {
  $claim_id=trim(mysqli_real_escape_string($dbc, $_GET['claim_id']));
  print "I got " . htmlentities($claim_id) . "<br />";
} else {
  print "I have no database handle! <br />";
}
print "ERR=" . mysql_error() . "<br />"; 
```

并向我们​​展示实际发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T21:04:27.513

只是为了恢复这个问题的具体答案：

**如果您遇到此类问题，请查看其他地方，而不是在您的 HTTPS 设置或 PHP GET 请求和参数中。**

我有这样的问题，一切都在 HTTP 上运行，而当我将系统迁移到 HTTPS 时却没有。我没有收到我期望的 GET 变量。经过几个小时试图找到一些与 HTTPS 设置和 PHP 配置和代码相关的问题后，问题变成了我没有收到 GET 变量，因为包含在 HTML 标头中的 JS 库由于以下原因没有被包含在内FF23 中的新限制（[https://blog.mozilla.org/tanvi/2013/04/10/mixed-content-blocking-enabled-in-firefox-23/](https://blog.mozilla.org/tanvi/2013/04/10/mixed-content-blocking-enabled-in-firefox-23/)）。我将 JS 包含更改为 HTTPS，一切正常。

这个特定问题的解决方案（来自 Sideshow）变成了数据库问题。

希望有帮助！

# c# - 如何使用 sharpZipLibrary 阅读 ZipEntry 内的更多信息 ZipEntry(s)？

> ID：13615708
> 
> 赞同：0
> 
> 时间：2012-11-28T22:39:39.730
> 
> 标签：c#, .net, zip, sharpziplib

我必须列出 zip 文件中的所有可用信息（文件名、长度、创建日期、修改日期等）。我必须分析的一些 zip 文件包含其中的文件夹和 zip 文件以及其他文件类型。

我想知道如何读取 zip 文件中的这些文件夹和内容以及 zip 文件中的 zip 条目，而无需解压缩整个内容（如果可能的话）

例如：

Collection.zip file1.txt file2.txt reports/report1.txt report2.txt first-backup.zip second-backup.zip

使用Sharp zip库，我可以通过以下方式读取第一层文件：

```
foreach (Zip_Library.Zip.ZipEntry entry in new Zip_Library.Zip.ZipFile(fi.FullName))
{
     printObjectProps(entry);
} 
```

printObjectProps 看起来有点像这样：

```
 private static void printObjectProps(Object obj)
    {
        Console.WriteLine("--------------------------------------------");
        Console.WriteLine("ObjectType:" + obj.GetType().ToString());
        Console.WriteLine("--------------------------------------------");
        foreach (PropertyInfo propInfo in obj.GetType().GetProperties())
        {
            Console.WriteLine("PropertyName:" + propInfo.Name);
            Console.WriteLine("PropertyType:" + propInfo.PropertyType);
            Console.WriteLine("PropertyValue:" + propInfo.GetValue(obj, null));
            Console.WriteLine();
        }
        Console.WriteLine("--------------------------------------------");
    } 
```

在我陷入更多麻烦之前我应该​​考虑的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:21:38.777

DotNetZip 将为您提供您想要的：

[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

它既简单又易于使用。列出一个 zipfile 目录：

```
using (ZipFile zip = ZipFile.Read(ExistingZipFile))
{
  foreach (ZipEntry e in zip)
  {
    if (header)
    {
      System.Console.WriteLine("Zipfile: {0}", zip.Name);
      if ((zip.Comment != null) && (zip.Comment != "")) 
        System.Console.WriteLine("Comment: {0}", zip.Comment);
      System.Console.WriteLine("\n{1,-22} {2,8}  {3,5}   {4,8}  {5,3} {0}", "Filename", "Modified", "Size", "Ratio", "Packed", "pw?");
      System.Console.WriteLine(new System.String('-', 72));
      header = false;
    }
      System.Console.WriteLine("{1,-22} {2,8} {3,5:F0}%   {4,8}  {5,3} {0}", e.FileName, e.LastModified.ToString("yyyy-MM-dd HH:mm:ss"), e.UncompressedSize, e.CompressionRatio, e.CompressedSize, (e.UsesEncryption) ? "Y" : "N");  
  }
} 
```

没有任何东西是未压缩的。它只是寻找文件的末尾，然后向后寻找目录/清单，然后读取它。

如果您发现一个条目本身就是一个 zip 文件，并且您想探索它，很容易将其提取为一个临时文件并递归探索它，但如果我没记错的话，您可以

* * *

**编辑注释：** DotNetZip 曾经住在 Codeplex。Codeplex 已关闭。旧档案仍然 [可在 Codeplex 获得][1]。看起来代码已经迁移到 Github：

*   [https://github.com/DinoChiesa/DotNetZip](https://github.com/DinoChiesa/DotNetZip)。貌似是原作者的repo。
*   [https://github.com/haf/DotNetZip.Semverd](https://github.com/haf/DotNetZip.Semverd)。这看起来是当前维护的版本。它还通过 Nuget 打包在[https://www.nuget.org/packages/DotNetZip/](https://www.nuget.org/packages/DotNetZip/)

* * *

# regex - 正则表达式无法获取第三个变量

> ID：13615713
> 
> 赞同：0
> 
> 时间：2012-11-28T22:40:08.430
> 
> 标签：regex, .htaccess

我的正则表达式代码适用于第二个变量，即 ([^&]+)(&.*) 之后的第二个变量，`myvar=`但我无法获得第三个变量，它在`foo=`（与第二个相同）之后。

```
RewriteCond %{ENV:REDIRECT_STATUS} ^$

RewriteCond %{QUERY_STRING} ^(.*&)?myvar=([^&]+)(&.*)?&foo=([^&]+)(&.*) [NC]

RewriteRule ^(index\.php)?$ /site/myvar/%2/%3/? [R=301,L] 
```

输出的 url 如下：

```
http://localhost/site/myvar/15// 
```

那么如何在最后两个反斜杠之间输出第三个变量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T22:42:33.520

你想要的是第四次捕获，而不是第三次。第三个是`(&.*)`即使是空的。要确定数字，您只需从左到右计算左括号。

# android - 在 Android 中创建新目录将“app_”附加到它

> ID：13615716
> 
> 赞同：4
> 
> 时间：2012-11-28T22:40:15.560
> 
> 标签：android, directory

在 Android 中使用以下命令创建新目录时：*context.getDir(newDir, MODE)*程序会将字符串**app_**附加到我传入的字符串的开头。因此，它创建了一个名为 app_newDir 的目录，**而不是字符串****newDir**。

 **为什么这样做？有没有办法可以避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:45:43.220

这样做是因为[命令](http://developer.android.com/reference/android/content/Context.html#getDir%28java.lang.String,%20int%29)：

> abstract File getDir(String name, int mode)
> 
> 检索，如果需要，创建一个新目录，应用程序可以在其中放置自己的自定义数据文件。

如果你想要没有它的东西，你想使用该`context.getFilesDir()`命令，并适当地附加它**

# actionscript-3 - 如何保留运行时加载的 Flash 组件的类型

> ID：13615724
> 
> 赞同：1
> 
> 时间：2012-11-28T22:40:55.990
> 
> 标签：actionscript-3, flash

我有一个在 Flash Pro 5.5 中创建的 swf，在舞台上有几个子 MovieClip。在其中一个孩子身上，我使用了“组件定义”对话框，试图使该孩子成为如下所示的 SmartAsset 类的实例。然后我在运行时将发布的父 swf 加载到我的主应用程序中（为此使用 BulkLoader）。资产将很好地加载，但有问题的孩子不是 SmartAsset 类型，而是普通的 MovieClip。奇怪的是，它添加了两个动态属性：type（来自 SmartAsset 类，具有我在 Flash Pro 中设置的正确值）和无用的 componentInspectorSetting。**如何让 Flash 保持这个孩子的类型为 SmartAsset？**

目标是让设计人员能够使用 Flash Pro 中的图形组件 UI 将自定义属性分配给资产子项。主应用程序可以根据这些属性以不同方式处理这些子项。我可以满足于使用引入的动态属性，但如果知道我可以增强 SmartAsset 并且 Flash 将保留所有功能，我会感觉更好，因为孩子是 SmartAsset 的实际实例。

```
package  {
    import flash.display.MovieClip;

    public class SmartAsset extends MovieClip {

        private var _type:String;

        [Inspectable(name="type", variable="type", enumeration="phys_circle,phys_square,phys_polygon,placeholder,proxy,subpart", defaultValue="subpart")]
        public function get type():String {return _type;}
        public function set type(value:String):void {_type = value;}
    }
} 
```

我尝试过但没有成功的事情：

*   LoaderContext null 或 1 与 ApplicationDomain.currentDomain
*   将 SmartAsset 导入主应用程序并在其上使用 registerClassAlias。

# alfresco - 取消和删除工作流有什么区别？

> ID：13615728
> 
> 赞同：1
> 
> 时间：2012-11-28T22:41:13.377
> 
> 标签：alfresco, activiti

Alfresco[工作流服务](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/service/cmr/workflow/WorkflowService.html)（和[RESTful API](http://wiki.alfresco.com/wiki/Workflow_REST_API#Delete_Workflow_Instance)）区分*取消*工作流实例和*删除*工作流实例。但在实践中有何不同？

[WorkflowInstanceDelete](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/remote-api/source/java/org/alfresco/repo/web/scripts/workflow/WorkflowInstanceDelete.java) web 脚本和Workflow [REST API wiki 页面](http://wiki.alfresco.com/wiki/Workflow_REST_API#Delete_Workflow_Instance)没有解释，[WorkflowService JavaDoc](http://dev.alfresco.com/resource/docs/java/repository/org/alfresco/service/cmr/workflow/WorkflowService.html)只是说（关于删除）：

> 注意：这将强制删除，这意味着工作流实例可能不会经历所有适当的取消事件。

这指的是什么取消事件？还有其他区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T09:03:49.177

据我所知，区别在于通过取消/结束它不会“删除”工作流程。

如果您删除工作流，则工作流实例会被物理删除。因此，不再存在任何数据，并且不会处理在您删除该步骤之后应该发生的任何事情。

如果您取消工作流，工作流实例不会被删除，它可以处理“结束”语句。诸如 ProcessInstance.end() 之类的东西或工作流中的特定结束节点。

通常我不会真正使用它，我更多地在任务本身而不是整个工作流程上使用它。如果我有一个过渡或类似的东西，那么我会在 end 之前调用 end 或一个节点，然后做任何我喜欢的事情。

# ruby-on-rails - 如何在已经安装了 XAMPP 的 Ubuntu 12.10 中安装完整的 Ruby on Rails 环境？

> ID：13615738
> 
> 赞同：0
> 
> 时间：2012-11-28T22:41:38.103
> 
> 标签：ruby-on-rails, ruby, apache, ubuntu

我在我的计算机上安装了 XAMPP (Apache + MySQL + PHP)，我希望开始使用 RoR 并可能保留 XAMPP。有什么办法可以在一台电脑上同时使用这两者吗？

我对 Ruby on Rails 有很多疑问：

*   什么相当于 Apache 使用 RoR？

*   对于 RoR，是否有任何我需要的包，就像 XAMPP 一样？

*   RoR 带有 Coffeescript 和 SASS/SCSS？

*   是否可以将 SQL/MySQL 与 RoR 一起使用，以及什么是 Ruby 的最佳数据库？

*   在 Ubuntu 中安装 RoR 的最佳/最简单方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:06:48.697

RoR 与 Apache 的等价物是... apache！在开发中，我们大多数人使用 webrick，您可以从项目的根目录使用`rails server`命令（或简称）运行它，然后使用“http://localhost:3000”从浏览器访问。`rails s`如果您希望使用现有的 XAMPP 版本的 Apache，则需要将其配置为侦听 PHP 应用程序以外的其他端口。

您可以使用现有的 MySQL 安装。或者，如果您刚刚开始，默认的 Rails 应用程序从 SQLLite 开始，这是一个简单的、基于文件的 RDBMS，可以在一段时间内开始使用。您可以使用 MySQL，但它需要在您的`database.yml`文件中进行一些配置。“最好的”数据库可能是 MySQL，因为这是大多数人使用的；我个人对 PostgreSQL 有强烈的偏好，但这只是因为它是一个更好的数据库:-)。

RoR 3.x 支持 CoffeeScript 和 SASS；ruby gems 安装所需的二进制文件以分别编译成 JS 和 CSS。

Ubuntu 上的“最佳/最简单”安装是按照以下几个步骤进行操作：[http](http://rubyonrails.org/download) ://rubyonrails.org/download ：

*   如果尚未安装，请安装 ruby​​ ( `apt-get install ruby1.9.3`)
*   如果尚未安装，请安装 ruby​​gems ( `apt-get install rubygems`)
*   安装导轨`gem install rails`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:46:21.160

就个人而言，我会使用[https://rvm.io/](https://rvm.io/)，尤其是在开始时。（还有其他选择。）

没有“Ruby 的最佳数据库”，但 MySql 和 PostgreSql 很受欢迎，原因很明显。

Rails 可以使用 webrick 进行自托管，或者您可以将其连接到真实服务器，或者使用 Thin，或者......但是对于开始，IMO 正常`rails s`运行 webrick 就可以了。

一旦你安装了 Rails 并安装了所需的包，CS/SASS/等。都在那里。

大多数教程都包括入门，您是否考虑过做类似的事情，例如[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)或类似的？

# automapper - AutoMapperMappingException 映射类型：Double -> Double

> ID：13615741
> 
> 赞同：1
> 
> 时间：2012-11-28T22:41:52.337
> 
> 标签：automapper, automapper-2

当我尝试在我的应用程序中调用 Mapper.Map 时出现以下异常：

```
AutoMapper.AutoMapperMappingException. 

Mapping types:
Double -> Double
System.Double -> System.Double

Destination path:
Address.Latitude

Source value:
42.250287

   System.InvalidCastException. Unable to cast object of type 'Acme.Order' to type 'Acme.Address'. 
```

除了明显的错误表明它无法映射相同类型的对象（以及原始类型），事实是我从不从类型“Acme.Order”映射到类型“Acme.Address”！

这是正在使用的实际调用：

```
var order = Mapper.Map<IDataRecord, Order>(theDataReader); 
```

我的对象模型如下所示：

```
public class Order
{
    public Address Address { get; set; }
    public Int32 Number { get; set; }
    public PhoneNumber PhoneNumber { get; set; }
}

public class Address
{
    public String City { get; set; }
    public Double Latitude { get; set; }
    public Double Longitude { get; set; }
    public Int32 Number { get; set; }
    public String PostalCode { get; set; }
    public String State { get; set; }
    public String Street { get; set; }
}

public class PhoneNumber
{
    public String Extension { get; set; }
    public String Number { get; set; }
} 
```

我在我的应用程序中定义了以下配置：

```
CreateMap<IDataRecord, Address>()
.ForMember(target => target.Latitude, opt => opt.MapFrom(record => GetDoubleFrom(record, "Latitude", 0)))
.ForMember(target => target.Longitude, opt => opt.MapFrom(record => GetDoubleFrom(record, "Longitude", 0)))
;
CreateMap<IDataRecord, PhoneNumber>()
.ForMember(target => target.Extension, opt => opt.MapFrom(record => GetStringFrom(record, "Extension", String.Empty)))
.ForMember(target => target.Number, opt => opt.MapFrom(record => GetStringFrom(record, "PhoneNumber", String.Empty)))
;
CreateMap<IDataRecord, Order>()
.ForMember(target => target.Address, opt => opt.ResolveUsing(record => Mapper.Map<IDataRecord, Address>(record)))
.ForMember(target => target.PhoneNumber, opt => opt.ResolveUsing(record => Mapper.Map<IDataRecord, PhoneNumber>(record)))
; 
```

使用这些辅助方法：

```
private Double GetDoubleFrom(IDataRecord record, String name, Double defaultValue)
{
    return (record.Contains(name) && !record.IsDbNull(name)) ? record.GetDouble(name) : defaultValue;
}

private String GetStringFrom(IDataRecord record, String name, String defaultValue)
{
    return (record.Contains(name) && !record.IsDbNull(name)) ? record.GetString(name) : defaultValue;
} 
```

（我在 IDataRecord 上有扩展方法，它们采用字段名称、获取序数并使用标准方法返回值，但为简洁起见不会显示它们。）

这是否能说明导致失败的原因？

（顺便说一句，我正在使用 AutoMapper v2.1.267）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:34:42.330

我无法直接重新创建它，因为它缺少一些信息（例如`IDataRecord`接口的具体类、 的内容`theDataReader`等）。然而，第一个检查是确保您的映射是正确的。你用 测试它`AssertConfigurationIsValid`吗？

例如，如果您有以下 AutoMapper 配置文件：

```
public class MyProfile : Profile
{
    public override string ProfileName
    {
        get
        {
            return "MyProfile";
        }
    }

    protected override void Configure()
    {
        CreateMap<IDataRecord, Address>()
            .ForMember(
                target => target.Latitude,
                opt => opt.MapFrom(
                    record => GetDoubleFrom(record, "Latitude", 0)))
            .ForMember(
                target => target.Longitude,
                opt => opt.MapFrom(
                    record => GetDoubleFrom(record, "Longitude", 0)));
        CreateMap<IDataRecord, PhoneNumber>()
            .ForMember(
                target => target.Extension,
                opt => opt.MapFrom(
                    record => GetStringFrom(record, "Extension", string.Empty)))
            .ForMember(
                target => target.Number,
                opt => opt.MapFrom(
                    record => GetStringFrom(record, "PhoneNumber", string.Empty)));
        CreateMap<IDataRecord, Order>()
            .ForMember(
                target => target.Address,
                opt => opt.ResolveUsing(
                    record => Mapper.Map<IDataRecord, Address>(record)))
            .ForMember(
                target => target.PhoneNumber,
                opt => opt.ResolveUsing(
                    record => Mapper.Map<IDataRecord, PhoneNumber>(record)));
    }
} 
```

这个单元测试会通过吗？

```
[Test]
public void AutoMapper_Configuration_IsValid()
{
    Mapper.Initialize(m => m.AddProfile<MyProfile>());
    Mapper.AssertConfigurationIsValid();
} 
```

**更新**

你能试一下吗

```
CreateMap<IDataRecord, Order>()
    .ForMember(
        target => target.Address,
        opt => opt.MapFrom(record => Mapper.Map<IDataRecord, Address>(record)))
    .ForMember(
        target => target.PhoneNumber,
        opt => opt.MapFrom(record => Mapper.Map<IDataRecord, PhoneNumber>(record))); 
```

# android - 如何将结构化数据添加到新的联系人意图

> ID：13615742
> 
> 赞同：8
> 
> 时间：2012-11-28T22:41:52.930
> 
> 标签：android, contactscontract, android-2.1-eclair

我需要支持 Android 2.1 及更高版本。

Google 发布了一个如何使用 ContactsContract 的示例，但其中一些使用了从 API 级别 11 开始可用的东西，所以我需要即兴发挥，但我被卡住了。

所以，到目前为止我有这个：

```
 String firstName = contactProperties.get("firstName");
            String lastName = contactProperties.get("lastName");
            String phone = contactProperties.get("phone");
            String email = contactProperties.get("email");
            String company = contactProperties.get("company");
            String postal = contactProperties.get("street") + ", " + contactProperties.get("city") + ", " + contactProperties.get("state") + " " + contactProperties.get("zip") + " " + contactProperties.get("country");

            // Creates a new intent for sending to the device's contacts application
            Intent insertIntent = new Intent(ContactsContract.Intents.Insert.ACTION);

            // Sets the MIME type to the one expected by the insertion activity
            insertIntent.setType(ContactsContract.RawContacts.CONTENT_TYPE);
            insertIntent.putExtra(ContactsContract.Intents.Insert.NAME, firstName + " " + lastName);
            insertIntent.putExtra(ContactsContract.Intents.Insert.EMAIL, email);
            insertIntent.putExtra(ContactsContract.Intents.Insert.PHONE, phone);
            insertIntent.putExtra(ContactsContract.Intents.Insert.COMPANY, company);
            insertIntent.putExtra(ContactsContract.Intents.Insert.POSTAL, postal);

            // Send out the intent to start the device's contacts app in its add contact activity.
            startActivity(insertIntent); 
```

请注意我是如何构建`NAME`和`POSTAL`附加内容的。这并不适用于所有设备，因为某些地址簿的名字和姓氏字段以及城市、州和邮政编码字段是分开的。所以，我的“解决方案”看起来很愚蠢：名字字段包含名字和姓氏，街道地址字段包含完整地址。我怎样才能解决这个问题？有人会给我一个例子吗？

作为记录，这不起作用：

```
insertIntent.putExtra(ContactsContract.CommonDataKinds.StructuredPostal.STREET, contactProperties.get("street"));
insertIntent.putExtra(ContactsContract.CommonDataKinds.StructuredPostal.CITY, contactProperties.get("city")); 
```

另外，请注意，我不想在清单中添加允许写入联系人的权限。这就是使用 Intent 的全部意义所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:12:24.243

试试这个代码它对我有用

```
 String Streetname="ZZZZZ";
 ArrayList < ContentProviderOperation > ops = new ArrayList < ContentProviderOperation > ();
    ops.add(ContentProviderOperation.newInsert(
    ContactsContract.RawContacts.CONTENT_URI)
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
        .build());
   ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
            .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
            .withValue(ContactsContract.Data.MIMETYPE,
        ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
            .withValue(
        ContactsContract.CommonDataKinds.StructuredPostal.STREET,
        Streetname).build());

      try {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
    } catch (Exception e) {
                  Log.e(getApplicationContext().toString(), "Exception: " + e.getMessage());
    } 
```

添加到清单

```
 <uses-permission android:name="android.permission.WRITE_CONTACTS"/>
     <uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

更多细节见这篇文章..

[如何在android中添加新联系人](https://stackoverflow.com/questions/4744187/how-to-add-new-contacts-in-android)

# c++ - 动态演员表无法识别成员

> ID：13615744
> 
> 赞同：0
> 
> 时间：2012-11-28T22:42:05.610
> 
> 标签：c++, object, dynamic-cast

我正在做一个项目，其中有 2 个类：Room 和 EventRoom EventRoom 继承自 Room 并有更多成员。

在我的代码中，我这样做（tmpPtr 是房间指针）：

```
if(eventRoom)
     tmpPtr = dynamic_cast<EventRoom*>(tmpPtr); 
```

后来当我尝试这个时：

```
if(line == "false;")
     tmpPtr->setComplete(false); 
```

我得到编译错误。*setComplete*是 EventRoom 的成员

**简短版本：**我想创建 Room 类型的对象，在某些情况下是 EventRoom。该代码目前仅适用于 Room，但 90% 的代码对于 EventRoom 是相同的。任何方式使用相同的代码？（使用 dynamic_cast 或类似的东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:43:32.147

你需要`tmpPtr`成为一个`EventRoot`指针。

```
EventRoom* tmpPtr;

if(eventRoom)
     tmpPtr = dynamic_cast<EventRoom*>(tmpPtr); 
```

您只能在指针上调用`Room`公共方法。`Room`您不能调用`EventRoom`-only 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:53:34.053

必须与两者一起使用的代码`Room`（`EventRoom`也就是说，它只与`Room`接口一起使用）必须通过静态类型的指针来工作`Room*`。

使用细节的代码`EventRoom`必须通过静态类型的指针来工作`EventRoom*`。所以示例代码可能如下所示：

```
void someFunction(Room *myRoom) {
  // doRoomStuff must be a function declared in Room.
  myRoom->doRoomStuff();

  // Try to determin if the room is an event room or not. This will
  // occur at runtime.
  EventRoom *myEventRoom = dynamic_cast<EventRoom*>(myRoom);

  if (myEventRoom) {
    // doEventRoomStuff is a function declared in EventRoom. You cannot call
    // myRoom->doEventRoomStuff even if 'myRoom' points to an object that is
    // actually an EventRoom. You must do that through a pointer of type
    // EventRoom.
    myEventRoom->doEventRoomStuff();

    // doRoomStuff2 is a function that is declared in Room. Since every 
    // EventRoom is also a room, every EventRoom can do everything that
    // rooms can do.
    myEventRoom->doRoomStuff2();
  }

  myRoom->doRoomStuff3();
} 
```

您可以`Room`通过变量访问成员`EventRoom*`，但反之则不行。

# ruby - 单词前三个字符的正则表达式

> ID：13615746
> 
> 赞同：0
> 
> 时间：2012-11-28T22:42:10.833
> 
> 标签：ruby, regex

我试图确定一个单词是否以元音、一个辅音、两个辅音或三个辅音开头。这是我到目前为止所拥有的，但我无法让它发挥作用。

```
 def vowel_first(word)
    word[0] =~ /[aeiou]/
  end

  def consonant_first_three(word)
    word[0-2] =~ /^[^aeiou]{3}/
  end

  def consonant_first_two(word)
    word[0-1] =~ /[^aeiou]{2}/
  end

  def consonant_first(word)
    word[0] =~ /[^aeiou]{1}/
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T22:49:56.583

这些破折号就像那些`word[0-2]`失败的破折号。尝试用`..`运算符替换它们（产生一个范围）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:56:20.417

您可以简单地检查单词开头的并发辅音数量：

```
leading_consonants = word.match(/^[^aeiou]{,3}/)[0].length 
```

当它为零时，单词以非辅音开头。根据您的要求，这可能已经足够了；如果您必须考虑标点符号等，您可能需要更聪明一点：

```
matches = word.match(/^([aeiou]?)([^aeiou]{,3})/)
leading_vowel = matches && matches[1].length > 0 || false
leading_consonants = matches && matches[2].length || 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:49:19.700

这里的问题似乎是您对`word`之前比较的破坏。在这种情况下，`0-1`评估为`-1`“最后一个字符”。同样，`word[0]`指第一个字符，索引为零，并且 for`"foo"`将评估为`"f"`.

您应该`word`按原样使用。正则表达式已正确锚定，只要您给它一些匹配的东西，它就应该可以工作。

需要注意的是，使用`word.match(/.../)`通常比`word =~ /.../`因为操作符是 Perl 的保留版本更具可读性，Perl 是一种从未因可读性而受到称赞的语言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T22:54:56.117

是导致问题的单词的大小写吗？尝试使用以下两个选项之一：

```
def vowel_first(word)
  word[0] =~ /[aeiouAEIOU]/
end

def vowel_first(word)
  word[0] =~ /[aeiou]/i
end 
```

或者更好的是，您实际上并不需要提取字母，只需让正则表达式完成所有工作：

```
def vowel_first(word)
  word =~ /^[aeiou]/i
end 
```

# iphone - UITableViewCell 显示 UIImageView 或 UIProgressView

> ID：13615749
> 
> 赞同：2
> 
> 时间：2012-11-28T22:42:15.023
> 
> 标签：iphone, ios, uitableview, storyboard, uiprogressview

我正在异步下载图像并将它们显示在 UITableView 中。下载图像时，UIProgressView 应显示在相应的表格行中。下载完成后，进度视图应替换为实际图像。

我正在使用情节提要，并将 UITableViewCell 子类化为一个名为 ResponseTableViewCell 的类，该类具有用于 UIImageView responseView 的 IBOutlets 和 UIProgressView (progressView)。由于某种原因，我无法在下载完成后隐藏进度视图。如果我不隐藏它，它会出现在下载图像的顶部。如果我试图隐藏它，它会为每一行隐藏。我猜这与重复使用细胞有关。

我还尝试创建两个自定义单元格：一个带有 UIImageView，另一个带有 UIProgressView。但是在情节提要中，我可以添加 UITableViewCell 的唯一方法是将其拖到 UITableView 上，这意味着我有两个 UITableViewCells 在彼此之上。

似乎可行的唯一方法是以编程方式创建图像视图和进度视图，而不是继承 UITableViewCell 但我不想这样做。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ResponseTableViewCell *cell = (ResponseTableViewCell*)
    [tableView dequeueReusableCellWithIdentifier:@"ResponseCell"];

    if(indexPath.row == 0) {//display the main image

        cell.responseView.image = _image;
        [cell.progressView setHidden:YES];
        return cell;
    }
      //display responses to the image
      indexPath = [NSIndexPath indexPathForRow:indexPath.row-1 inSection:indexPath.section];
       Photo *response = [ self getResponseAtIndex:indexPath.row];
       NSMutableDictionary* downloadInfo = [self getConnectionInfoForId:[response photoId]];
       if([response fullImage] == nil) {
           float received = [[downloadInfo objectForKey:@"receivedBytes"] floatValue];
           float total = [[downloadInfo objectForKey:@"totalFileSize"] floatValue];

           NSNumber* percentage= [NSNumber numberWithFloat:received/total];
           NSMutableDictionary* userInfo = [[NSMutableDictionary alloc] init];
           [userInfo setObject:cell.progressView forKey:@"cell"];  
           [userInfo setObject:percentage forKey:@"percentage"];  /

           [self performSelectorOnMainThread:@selector(updateProgressView:) withObject:userInfo waitUntilDone:NO
];
           return cell;
        }
        else {
           cell.responseView.image = response.fullImage;
            return cell;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:55:55.107

我怀疑这可能与您发布的代码之外的东西有关。但另一个问题是

```
 [cell.progressView setHidden:YES]; 
```

因为我看到你后来在主线程上仔细更新了progressvView，但是你没有`setHidden`在主线程上执行。它是一个 UIProgressView，UI 代码应该在主线程上，甚至可能很小`setHidden`。

# php - 将 mysql_connect 转换为 cfquery

> ID：13615752
> 
> 赞同：1
> 
> 时间：2012-11-28T22:42:26.640
> 
> 标签：php, mysql, cfml

什么相当于coldfusion中的以下代码。我可以使用 php 连接到数据库，但无法正确设置 cfquery 标记

```
mysql_connect("your.hostaddress.com", "username", "password") or die(mysql_error());
mysql_select_db("Database_Name") or die(mysql_error()); 
$data = mysql_query("SELECT * FROM friends") 
or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T22:49:05.107

您必须在 ColdFusion Administrator 中将数据库信息设置为数据源。

```
<cftry>
    <cfquery name="data" datasource="myCFDataSourceThatISetupInTheCFAdmin" username="username" password="secret">
        SELECT
            *
        FROM
            friends
    </cfquery>

    <cfcatch type="database">
        <!--- Do some Error Stuff here if you want, like throw a database error --->
    </cfcatch>
</cftry>
<cfdump var="#data#">

<cfoutput query="data">
    #column1name# #column2name#<hr>
</cfoutput> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T22:51:25.493

自从我使用 ColdFusion 做任何事情以来已经有一段时间了，但首先您需要在控制面板中设置一个数据源，并使用正确的凭据指向您的数据库。我们假设您调用了它`fred`。然后，您可以按名称对其进行寻址：

```
<cfquery name="data" datasource="fred">
SELECT * FROM friends
</cfquery>

<cfoutput query="data">
<div>Name: #name#; email: #email#</div>
</cfoutput> 
```

# ilmerge - 如何在 64 位 Windows7 上安装 ILMerge

> ID：13615755
> 
> 赞同：2
> 
> 时间：2012-11-28T22:42:35.137
> 
> 标签：ilmerge

在带有 .NET 4.0 的 64 位 Windows 7 SP1 机器上运行 ILMerge.msi（版本 2.12.0803）失败并出现错误对话框，显示“此设置需要 .NET Framework 版本。请安装 .NET Framework 并运行它重新设置。” Microsoft Research 的 ILMerge 页面说它应该与 .NET 4.0 和 Windows 7 一起使用，但对 64 位保持沉默。有人在64位Windows上安装过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T09:07:23.530

通过[nuget](https://nuget.org/packages/ilmerge)安装确实对我有用。请注意，我没有安装 .NET 2 Framework。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:51:57.787

您是否尝试过通过[nuget 包](https://nuget.org/packages/ilmerge)安装？如果这也失败了，联系[Mike Barnett](http://research.microsoft.com/en-us/people/mbarnett/default.aspx)可能会有所帮助，他会帮您解决问题。

# java - 从 Mac 终端写入 Java 程序

> ID：13615757
> 
> 赞同：0
> 
> 时间：2012-11-28T22:42:49.760
> 
> 标签：java, macos, terminal, eol

我的 Mac 终端有一个小问题。我从终端运行一个 Java 程序，并尝试使用以下命令从标准输入读取一些内容：

```
BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
System.out.println("Produsul:" + System.getProperty("line.separator"));
productOrder.setProductName(in.readLine()); 
```

程序卡住了。我认为不知何故，它没有检测到 EOL。我尝试设置`Send string to shell (\033OF)`结束键，但这并没有解决问题。我错过了什么？

# json - 在 Postgres 中向 JSON 对象添加元素

> ID：13615760
> 
> 赞同：33
> 
> 时间：2012-11-28T22:43:10.840
> 
> 标签：json, string, postgresql, select, replace

我在数据库（postgres 9.2.1）中有一个文本字段，其中有一个 json blob。除了都在一行之外，它看起来与此类似，显然：

```
{
  "keyword": {
    "checked": "1",
    "label": "Keyword"
  },
  "agency_name": {
    "checked": "0",
    "label": "Agency Name"
  }
} 
```

我需要向 json 数组添加一个元素，使其看起来像这样：

```
{
  "keyword": {
    "checked": "1",
    "label": "Keyword"
  },
  "something_new": {
    "checked": "1",
    "label": "Something New"
  },
  "agency_name": {
    "checked": "0",
    "label": "Agency Name"
  }
} 
```

我不关心新数组元素的位置。它可能在机构名称之后。在 postgres 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2016-03-04T07:10:39.203

如果升级到PG9.5.1，那么可以使用sql操作`||`符合并jsonb，例子

```
select '{"a":1}'::jsonb || '{"a":2, "b":2}'::jsonb 
```

将返回`{"a": 2, "b": 2}`

如果您不能升级到 pg9.5.1，恕我直言，在您的代码中完成这项工作将是一个更好的选择。您可以将旧的 jsonb 字符串解析为映射，然后更新映射，然后转换为字符串并更新 db-record。

如果我们想*更新*（添加）一个 JSONB 字段：

```
UPDATE <table>
SET <field-name> = <field-name> || '{"a": 1}'::jsonb
WHERE id = <some id> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-28T10:00:13.933

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-06T16:26:54.553

即使我遇到了同样的问题，我也想动态地将新元素附加到 jsonb[]。

> 假设 column_jsonb[] = [{"name":"xyz","age":"12"}]

```
UPDATE table_name
   SET column_jsonb[] = array_append(column_jsonb[],'{"name":"abc","age":"22"}'); 
```

结果：[{"name":"xyz","age":"12"},{"name":"abc","age":"22"}]

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-28T22:52:28.173

PostgreSQL 还没有太多的 JSON 支持函数：我只能看到类似 的函数`array_to_json`，如果有相应的方法将原始 JSON 转换为数组，这可能很有用，然后您可以对其进行操作以添加额外的转换回 JSON 之前的元素。

可能最好的办法是使用 PL 语言来操作 JSON。一个明显的例子是 PLV8，它在 PostgreSQL 中提供 JavaScript 编程功能。您将在 JavaScript 中编写一个用户定义的函数，该函数将相应地操作 JSON blob：

*   [http://code.google.com/p/plv8js/wiki/PLV8](http://code.google.com/p/plv8js/wiki/PLV8)

当然，许多其他 PL 语言，如 Java、Python 或 Perl 可能同样擅长处理 JSON 数据，并且可能更容易安装在您的系统上。如果您设置了用户定义的函数，则可以在其中的每一个中编写它们。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-01T10:36:59.240

9.5 版提供了带有 create_missing =TRUE 的[jsonb_set函数。](http://www.postgresql.org/docs/9.5/static/functions-json.html)在任何其他情况下，使用以下 hack 附加信息：

```
SELECT (trim( trailing '}' from data::text) || ', "c":2}')::json 
```

使用更正确的方式添加/替换新值：

```
UPDATE t
SET data=t3.data

FROM t AS t1
INNER JOIN
(
  SELECT id, json_object_agg(t.k,t.v)
  FROM
    (
      SELECT *
      FROM (SELECT id, json_object_keys(data) as k, data->json_object_keys(data) as v FROM t) as t2
      WHERE t.k != 'c'

      UNION ALL
      SELECT id, 'c'::text as k, '"new value"'::json as v FROM t1
    ) as t3
  GROUP by id
) as t4 ON (t1.id=t4.id) 
```

要删除密钥：

```
UPDATE t
SET data=t3.data

FROM t AS t1
INNER JOIN
(
  SELECT id, json_object_agg(t.k,t.v)
  FROM (SELECT id, json_object_keys(data) as k, data->json_object_keys(data) as v FROM t) as t2
  WHERE t.k != 'c'
  GROUP by id
) as t4 ON (t1.id=t4.id) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-01T18:05:35.713

我正是这个问题。这个解决方案是相当“纯”的对象操作，我更喜欢 'sql' 函数而不是 plpgsql。最主要的是使用 json_each 分解 - 给你一个记录 - 然后从

```
CREATE OR REPLACE FUNCTION json_extend_object(
    input_object json,
    append_key text,
    append_object json)
  RETURNS json AS
$BODY$
    select json_object_agg (((json_val)::record).key, ((json_val)::record).value)
    from (
        select json_val 
        from (select json_each (input_object) as json_val) disaggr
        where ((json_val::record).key != append_key)
        union 
        select newvals
        from (
            select append_key, append_object
        ) newvals
    ) to_rows;
$BODY$
  LANGUAGE sql IMMUTABLE
  ; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-10T19:11:31.893

Solution provided by Andrew Wolfe is good, but not compatible with postgres version < 9.4\. And if you have a 9.4+ version, just use jsonb and || (concatenate) operator to add an element to json.

So, here is the 9.3 compatible version of json_extend_object:

```
CREATE OR REPLACE FUNCTION json_extend_object(
    input_object json,
    append_key text,
    append_object json)
  RETURNS json AS
$BODY$
    select ('{'||string_agg(''||to_json((json_val::record).key)||':'|| to_json((json_val::record).value), ',')||'}')::json
    from (
        select json_val 
        from (select json_each (input_object) as json_val) jsonvals
        where ((json_val::record).key != append_key)
    union 
        select newvals
        from (select append_key, append_object) newvals
    ) to_rows;
$BODY$
LANGUAGE sql IMMUTABLE; 
```

# byte - 一个字节总是8位吗？

> ID：13615764
> 
> 赞同：26
> 
> 时间：2012-11-28T22:43:24.030
> 
> 标签：byte, bits

当我阅读以下摘录时，我正在[研究计算系统的要素：](http://mitpress.mit.edu/books/elements-computing-systems)

> Hack 计算机包括一个黑白屏幕，分为 256 行，每行 512 像素。屏幕内容由从 RAM 地址 16384 (0x400) 开始的**8K 内存映射表示。**物理屏幕中的每一行，从屏幕的左上角开始，在 RAM 中由 32 个连续的 16 位字表示。因此，顶部 r 行和左侧 c 列的像素映射到位于 RAM[16384 + r * 32 + c%16] 的字的 c%16 位（从 LSB 到 MSB 计数）。要写入或读取物理屏幕的像素，需要读取或写入 RAM 驻留内存映射中的相应位（1 = 黑色，0 = 白色）。

那么，如果屏幕是 256 行，每行 512 个像素，并且每个像素是一个位，那么整个屏幕的 8K 内存映射如何呢？

256 行 * 512 位 = 131072 / 8 位 / 字节 / 1024 字节 / K = 16K

那不是16K内存映射吗？

我能想到的唯一一件事是，因为字长是 16 位，也许这是一个因素？我一直都知道“字节”表示 8 位，但如果它的定义取决于计算机的字长，也许这会为我解开这个谜。有人可以向我解释那段中描述的屏幕是如何用 8K 内存映射而不是 16K 表示的吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-28T22:45:59.200

是的，在现代计算中，一个字节总是 8 位。

**这本书使用单词，而不是字节**

书中明确提到了单词和单词的大小，而没有关于字节的单词（哈哈）。看那句话`..is represented in RAM by 32 consecutive 16-bit words.`。整个大小以（16 位）字而不是字节表示。

因此，8K 指的是 8 Kilowords。8 KB 将正式写为 8KB，如果在本书中使用该符号的话。

在处理器架构方面，文字非常重要。编程语言中的字通常是 2 字节（或 16 位），但在处理器架构中，它们也可以是 8 位或 32 位，它们指的是处理器工作的数据单元的自然大小，因此有意义的是这本书使用单词而不是字节，因为文本似乎非常面向硬件。

要查看字节和单词之间的关系，请阅读[此答案](https://stackoverflow.com/questions/7750140/whats-the-difference-between-a-word-and-byte)。

**不同的字节大小**

[Wikipedia](http://en.wikipedia.org/wiki/Byte)描述了一个字节最初（1960 年代）是如何基于它需要保存的信息大小来描述的，因此 6 位字节可用于（英文）字符，而其他大小的字节可用于不同的数字格式。最初是 6 位用于英文字符，发展到 7 位以支持 ASCII，最终 8 位 IBM System/360 的流行导致全球接受 8 位字节。

字节是表示数据量的软件单元，而字与处理器/内存架构更相关，表示处理器中的工作单元（寄存器）和内存中的可寻址单元。但如今，一个字节总是被认为是 8 位，而字是它的倍数。周围仍有处理器具有不同的字长，但它们是专用处理器。从 PC 到手机和游戏机的普通硬件都遵循该标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-27T04:37:00.737

在现代术语中，一个字节总是有 8 位。这是自 1993 年以来的 IIRC。ISO/IEC 2382-1:1993。

然而，也有其他位计数到字节 6 位/7 位的系统很常见。然而，还有其他更晦涩的。

归根结底，我认为今天很难找到一台不基于 8 位到一个字节的机器。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-08-26T20:01:04.093

除了可能在它诞生后的短暂时期之外，一个字节一直是八位。

短语“一千字节”被流行为“一千乘八”，从某种意义上说，您将拥有一个八位“宽”的千字（1024 个可寻址片段）内存，因为每个可寻址片段都是八位.

这个词并不总是八位，但如果不是，它从来没有被称为“八位”，它是“四位”或“十六位”，或者在一些 Burroughs 簿记机的令人震惊的例子中“一-一百二十八'。在另一个极端，霍尼韦尔机器最初的组织方式是，存储中的每一个比特都有一个唯一的地址，所以它们会有这么多的“一公斤一公斤”内存包。

对于您正在谈论的机器，它将具有“8 k x 16”内存，因此是 8K 内存映射，特别是 8Kx16，其中只有 8192 个地址，每个地址都是 16 位宽。

考虑到 ASCII 和 EBCDIC，使用 8 位地址边界来进行高效的文本处理是最便宜的，即使您的机器的寄存器更宽。寄存器更窄的机器就这样灭绝了。

所以，是的，一个字节总是八位，而且几乎总是如此。

# vbscript - 在vbscript中获取相对于当前日期的时间戳的有效方法

> ID：13615768
> 
> 赞同：0
> 
> 时间：2012-11-28T22:43:40.620
> 
> 标签：vbscript, timestamp

我需要根据从今天开始的天数和数月的距离来计算日期。我需要以 mm/dd/yyyy 格式返回它。使用 VBScript 的 DateDiff 函数，您只能从日期获取距离（或月、分钟或年，我知道）。所以当然你可以笨拙地拼凑一个知道所有这些的时间戳。有没有更有效的方法来计算 7 天前一天的时间戳？1个月前？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:15:58.520

不要使用`DateDiff`，而是`DateAdd`将日期添加到今天。然后使用 dotnet`StringBuilder`轻松格式化您的日期（比构建自己的格式函数效果更好，并且更灵活）：

```
' initializing
myDate = Now
monthsToAdd = 6
daysToAdd = 15
myFormat = "MM/dd/yyyy"

' shifting the date
myDate = DateAdd("m", monthsToAdd, myDate)
myDate = DateAdd("d", daysToAdd, myDate)

' formatting the date 
Set sb = createobject("System.Text.StringBuilder")
sb.AppendFormat "{0:" & myFormat & "}", myDate

' passing the result
WScript.Echo sb.ToString() 
```

# xcode - HJCache 库 UITableView 问题

> ID：13615776
> 
> 赞同：1
> 
> 时间：2012-11-28T22:44:09.433
> 
> 标签：xcode, uitableview, hjcache

我正在尝试使用 HJCache 库运行我的应用程序以通过网络异步下载图像，但是在将委托和数据源链接到 TableView 后我遇到了这个问题。

> -[UIView tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x7190210 2012-11-29 00:36:41.059 HJCacheTest1[2080:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[UIView tableView: numberOfRowsInSection:]: 无法识别的选择器发送到实例 0x7190210'

我的问题可能在哪里？

首先，我添加了 HJCache 类和 ImageCell.h .m 和 .xib。其次，我已经将这些类导入到我的 ViewController.m 并放置了这些代码；

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.imgMan = [[HJObjManager alloc] init];
NSString* cacheDirectory = [NSHomeDirectory() stringByAppendingString:@"/Library/Caches/imgcache/imgtable/Luai/"] ;
HJMOFileCache* fileCache = [[HJMOFileCache alloc] initWithRootPath:cacheDirectory];
self.imgMan.fileCache = fileCache;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString* cellIdentifier = @"ImgCell";

ImgCell *cell = (ImgCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil)
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:cellIdentifier owner:nil options:nil];
    cell = (ImgCell*)[nib objectAtIndex:0];
}

///// Image reloading from HJCacheClasses
[cell.img clear];
NSString *str1 = [imageArray objectAtIndex:indexPath.row];
NSString *trimmedString = [str1 stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSURL *url = [NSURL URLWithString:trimmedString];
cell.img.url = url; //set the url to img view
[self.imgMan manage:cell.img];
} 
```

从现在开始感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:03:51.530

问题在于错误的界面构建器连接。

**可能的问题**：您将 xib 的视图出口连接到 UITableView。

**可能的解决方案**：重新连接所有 xib 连接。

1.  将视图出口连接到 xib 中的 UIView
2.  将 tableView 插座连接到 xib 中的 UItableView
3.  连接 tableView 数据源并委托给文件的所有者

# c# - 如何让样式覆盖其他属性

> ID：13615779
> 
> 赞同：0
> 
> 时间：2012-11-28T22:44:21.183
> 
> 标签：c#, wpf, xaml

```
<ResourceDictionary>
    <Style x:Key="Frame0" TargetType="Shape">
        <Setter Property="Stroke" Value="Transparent" />
        <Setter Property="StrokeThickness" Value="0" />
    </Style>
</ResourceDictionary>

<Canvas x:Name="canvas" Height="346" Width="643">
    <Rectangle Style="{StaticResource Frame0}" Stroke="Red" StrokeThickness="2" Height="77" Canvas.Left="26" Canvas.Top="13" Width="119" />
</Canvas> 
```

我希望任何使用我的资源字典的人始终遵守我的规则。我的风格应该放在第一位。如何做到这一点？目前，**Stroke="Red"**和**StrokeThickness="2" 会**覆盖我的规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:51:48.467

据我所知，没有办法让样式值覆盖本地值。查看[优先顺序](http://msdn.microsoft.com/en-us/library/ms743230.aspx)，您会看到本地值在列表中排在第三位，前面只有[强制值和来自活动动画](http://msdn.microsoft.com/en-us/library/ms743230.aspx#animations)的值。

如果您确实需要全局强制该值，那么您可以考虑制作一个派生控件，该控件在适当的依赖属性中设置[强制值。](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.coercevalue.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T22:52:23.077

当他们以这种方式使用时，您无法阻止人们覆盖您的属性。

*您可能*能够做到的唯一方法是基于`Rectangle`（或您想要的任何对象）创建用户控件并且不公开相关属性。但是，这并不能阻止人们直接使用`Rectangle`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T17:44:54.880

顺序真的很重要。**样式**的优先级最低，这意味着任何人都可以覆盖它。

# java - 二十一点中的分牌

> ID：13615783
> 
> 赞同：-1
> 
> 时间：2012-11-28T22:45:00.097
> 
> 标签：java

任何人？？？？嗨，在我的二十一点游戏中，我通过首先要求玩家加倍下注来实现拆分，如果他拒绝，那么我允许他拆分：

```
while(true){
    for(int j=0;j<2;j++){
        if(players[i].splits[j].getStatus() != true){ // splits is an array of two players hand 1 and hand 2
            System.out.print("Choose your next move, " + players[i].name + ", Hand "+ players[i].splits[j].number + ": \n" + "Points: " + players[i].splits[j].points + "\n" + "Hint: ");
            getHints(players[i].splits[j]);
            System.out.print( "\n1)Hit\n2)Stand\n");
            System.out.println();

            x2 = IO.readInt();
            if (x2==2){
                players[i].splits[j].standed = true; // if player stand...
                break;
            }else if(x2 == 1){//else deal a card
                Card c = dealCard(deck);
                updatePoints(players[i].splits[j], c);
                addCard(players[i].splits[j], c);
                System.out.println(players[i].name + ", Hand "+ players[i].splits[j].number + " was dealt:  " + c.showCardValue() + " of " + c.showCardSuit() );
                boolean isBusted = testPoints(players[i].splits, j); // test for busted
                if (isBusted == true){
                    System.out.println("BUSTED!!!!!!!!!");
                    players[i].splits[j].busted = true;
                    break;
                }
            }
        }
        System.out.println(players[i].name + ", Hand " + players[i].splits[j].number + " Points: "+ players[i].splits[j].points);
//                                          printStats(players[i].splits[j]);

    }
//check to end loop if split is busted to stands...
} 
```

当我打印球员统计数据时，我得到的是内存位置而不是文本，任何人都可以帮忙。谢谢，如果您需要更多信息，请告诉我，以便我更新。

=======

输出： 3 是玩家姓名... 10 是分牌发牌...

```
Choose your next move, 3, Hand 1: 
Points: 10
Hint: You have a 0% chance of busting
1)Hit
2)Stand

1
3, Hand 1 was dealt:  Ten of Spades
3, Hand 1 Points: 20
Choose your next move, 3, Hand 2: 
Points: 10
Hint: You have a 0% chance of busting
1)Hit
2)Stand

1
3, Hand 2 was dealt:  Five of Diamonds
3, Hand 2 Points: 15
Choose your next move, 3, Hand 1: 
Points: 20
Hint: You have a 92% chance of busting
1)Hit
2)Stand

2
3, Hand 1 Points: 20
Choose your next move, 3, Hand 2: 
Points: 15
Hint: You have a 58% chance of busting
1)Hit
2)Stand

2
3, Hand 1 : Points splitPlayer@1a758cb
Previous Cards dealt: 
Ten of Spades 

Five of Diamonds 
```

splitPlayer 类：

```
public class splitPlayer {

    public int points = 0;
    boolean busted = false;
    boolean standed = false;
    int number = 0;
    int ace = 0;
    String name = "";
    Card[] cardsDealt = new Card[12];

    public splitPlayer(int number, int points){
        this.number = number;
        this.name = "Hand "+ number;
        this.points = points;
    }
    public boolean getStatus(){
        if(busted == true || standed == true ){
            return true;
        }else{
            return false;
        }
    }
    public void setPoints(int points){
        this.points += points;
    }
} 
```

=========

更新点：

```
public static void updatePoints(splitPlayer player,  Card c){

        int point = c.getValue();

        if (point == 1){

            player.ace += 1;
            player.setPoints(11);

        }else{
            player.setPoints(point);
        }

        if (player.points > 21 && player.ace > 0) {
            player.points -= 10;
            player.ace --;
        }

        return;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T00:48:06.977

罪魁祸首似乎是这行代码：

```
System.out.println(players[i].name + ", Hand " + players[i].splits[j].number + " Points: "+ players[i].splits[j].points); 
```

要找出问题所在，您需要知道类型`players[i].splits[j].points`是什么。根据输出，它似乎是`splitPlayer`该类的一个实例。您可能可以通过重载`toString()`此类的方法来解决问题。如果不确认上述代码行确实导致了问题，我无法确定。我还需要查看更多您的代码，特别`points`是此处使用的数据成员的声明。

**附录：**

您在输出中看到的原因`splitPlayer@1a758cb`是因为您将对象与`String`. Java会自动调用`toString()`对象的方法。如果对象的类没有提供`toString()`方法，`Object`则会调用 in 提供您看到的输出的方法。

# java - 在运行时向命令行 Java 程序发送命令

> ID：13615787
> 
> 赞同：1
> 
> 时间：2012-11-28T22:45:07.750
> 
> 标签：java, command-line, user-input

我有一个处理大量 XML 文件的 Java 程序。该过程需要几个小时才能运行，有时我需要停止。现在我`CTRL-C`用来杀死它，记下它正在处理的文件，然后我删除这些文件的数据并重新处理它们。

有没有办法让 Java 在等待命令行上的用户输入时继续工作，此外，我可以让它在侦听时继续向命令提示符输出日志信息吗？

我考虑让它在文件之间等待用户输入几秒钟，但这会增加整体处理的时间，而且我不确定是否有一种方法可以轻松地使用户输入超时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:51:36.630

您有兴趣为您的 XML 处理器生成另一个线程来运行。查看`java.util.concurrent`库。

您的主线程可以处理用户输入，而另一个线程可以向控制台报告。处理两者之间的任何并发问题都可能很困难，最好建议尽可能避免两者之间的通信，以免自己头疼。

你最终会添加看起来像这样的代码

```
Thread xmlProcessorThread = new Thread(yourRunnableXMLProcessor);
xmlProcessorThread.run(); 
```

并将`runnable`接口添加到您的 XML 处理器（因此得名`yourRunnableXMLProcessor`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:53:01.390

在您的命令行应用程序中启动一个新线程，该线程实际上执行处理文件的工作。处理线程可以在每个文件之后检查一个内部标志并确定是否继续。主应用程序线程将继续侦听命令行输入，并可以根据它接收输入的时间设置标志的值。

# python - 在 Python 中将用户昵称转换为正式的名字

> ID：13615789
> 
> 赞同：4
> 
> 时间：2012-11-28T22:45:36.397
> 
> 标签：python

我正在尝试根据 Python 中的用户名和姓氏映射来自不同系统的用户。

一个问题是，在很多情况下，名字都是“昵称”。例如，对于一个用户，他的名字在一个系统中是“Dave”，而在另一个系统中是“David”。

在 python 中有没有简单的方法可以将这些常见的昵称转换为正式的昵称？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:07:30.807

不是专门在 Python 中，而是尝试使用这个：

[http://deron.meranda.us/data/nicknames.txt](http://deron.meranda.us/data/nicknames.txt)

如果将该数据加载到 python ( `csv.reader(<FileObject>, delimiter='\t')`) 中，则可以执行加权概率类型函数以返回该列表中昵称的全名。

你可以这样做：

```
import collections

def weighted_choice_sub(weights):
    # Source for this function:
    #  http://eli.thegreenplace.net/2010/01/22/weighted-random-generation-in-python/
    rnd = random.random() * sum(weights)
    for i, w in enumerate(weights):
        rnd -= w
        if rnd < 0:
            return i

def load_names():
   with open(<filename>, 'r') as infile:
      outdict = collections.defaultdict(list)
      for line in infile.readlines():
          tmp = line.strip().split('\t')
          outdict[tmp[0]].append((tmp[1], float(tmp[2])))
   return outdict

def full_name(nickname):
    names = load_names()
    return names[nickname][weighted_choice_sub([x[1] for x in names[nickname]])][0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:49:53.960

您必须创建一个数据库或哈希映射昵称到正式名称。如果你能在网上找到这样的列表，那么实现地图的过程将是微不足道的。真正的乐趣将是获得一个足够完整的列表，确保处理变化，并确保当人们的正式名称是他们的昵称时您不会遇到问题。例如，并不是每个叫戴夫的人都有一个正式的名字大卫。这个人的正式名字很可能是戴夫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T22:56:07.797

```
In [1]: first_name_dict = {'David':['Dave']}
In [2]: def get_real_first_name(name):
   ...:     for first_name in first_name_dict:
   ...:         if first_name == name:
   ...:             return name
   ...:         elif name in first_name_dict[first_name]:
   ...:             return first_name
   ...:         else:
   ...:             return name
   ...:         

In [3]: get_real_first_name('David')
Out[3]: 'David'

In [4]: get_real_first_name('Dave')
Out[4]: 'David' 
```

我正在使用 Ipython。基本上你需要一本字典来做到这一点。first_name_dict 是您的名字字典。例如，大卫可以称为“戴夫”或“戴维”，而卢卡斯可以称为“卢克”，那么你可以这样写字典：

```
first_name_dict = {'David' : ['Dave', 'Davy'], 'Lucas' : ['Luke']} 
```

您可以通过添加“不区分大小写”匹配来改进解决方案

# javascript - Javascript：将图像保存到 mysql 并稍后显示到 html5

> ID：13615790
> 
> 赞同：0
> 
> 时间：2012-11-28T22:45:40.253
> 
> 标签：javascript, mysql, image, node.js, blob

不要责怪我的方法。我只是在练习，我想走到最后。因此，我通过 Javascript node.js 使用 blob 字段将一些图像存储到远程 mysql 表中。稍后我想检索图像并将其显示在 html5 中。我对编码/解码过程很生气。我使用以下每种方法存储了图像，`readAsDataURL(f); readAsBinaryString(f); readAsText(f);`但是当我检索图像时，我无法在`image.src`. **唯一的方法**是通过*phpmyadmin*手动将图像加载到 blob 字段中，然后使用以下转换将 blob 字段发送到 html 页面：

```
var base64 = new Buffer(results[i].tile_image, 'binary').toString('base64');
client.emit('showTile', base64); 
```

问题是：phpmyadmin 如何将二进制文件加载到 blob 字段中？或者，使用 javascript 我如何将图像加载到 blob 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:54:56.350

将评论转换为答案

查看有关上传图像并将其存储在 MySQL 中的本[教程。](http://www.phpriot.com/articles/images-in-mysql/)

回答你的问题 $imgData =addslashes (file_get_contents($_FILES['userfile']['tmp_name'])); 可以这样分解

[$_FILES](http://php.net/manual/en/reserved.variables.files.php)是上传到文档的文件的关联数组，在本例中为图像。[$_FILES]

[files_get_contents](http://php.net/manual/en/function.file-get-contents.php)将文件读入字符串。在这种情况下，它将文件的二进制数据存储到可以插入数据库的字符串中。

[addlashes](http://php.net/manual/en/function.addslashes.php)转义任何需要转义的字符。

# ios - XCode 运行 iOS 模拟器，但应用程序从不启动

> ID：13615796
> 
> 赞同：1
> 
> 时间：2012-11-28T22:46:23.173
> 
> 标签：ios, xcode, macos, ipad

第一次尝试一些 iOS 开发，我正在尝试遵循一些教程，但是我无法让应用程序在模拟器中实际启动。该应用程序在部署到 iOS 设备时运行良好，因此它看起来更像是一个模拟器问题。

我已经在三台不同的 PC 上进行了尝试，其中包含许多不同的测试应用程序。在它们中的每一个上，应用程序都将在 iOS 设备上运行（在我的情况下，iPad 4，运行最新的 iOS (6)），但不在模拟器中。

我找不到其他人遇到这个特定问题（尽管谷歌很难找到，因为结果主要包括与其他模拟器问题无关的结果），但我确实尝试了一些类似情况的建议。我尝试将 iOS 开发目标更改为每个可用选项（6.0、5.1、5.0、4.3），关闭代码签名，并多次重新创建项目。似乎没有人有所作为。

我正在运行 OSX 10.8.2、XCode 4.5.2。

# javascript - Ember.js 和 Yeoman，外部模板文件插入

> ID：13615798
> 
> 赞同：4
> 
> 时间：2012-11-28T22:46:30.293
> 
> 标签：javascript, cordova, ember.js, handlebars.js, yeoman

我是一个使用 Ember.js 的新手，我今天才开始查找它。我目前正在计划使用 Ember.js 和 Yeoman 开发一个 Phonegap 应用程序，并且在我对 Ember.js 框架进行原型设计和调查时，我想知道：

您如何在 index.html 中使用外部模板文件？在我见过的每个教程、帖子、指南或文档中，index.html 似乎都包含所有模板，格式为

```
<script data-template-name="my_template_name" type="text/x-handlebars">
{{my_handlebar_variable_content}}
</script> 
```

等等……</p>

但是当我使用 Yeoman 创建应用程序时，它会生成一个包含所有`template.handlebars`模板文件的脚本/模板文件夹。

我该如何使用它们？我的意思是，我想，只要需要它们，index.html 中就应该需要它们，但我该怎么做呢？我已按照此说明操作[https://github.com/yeoman/yeoman/issues/455#issuecomment-8598553](https://github.com/yeoman/yeoman/issues/455#issuecomment-8598553)，现在我使用了 index.html 中需要的 application.js。

但是我如何告诉我的应用程序我需要在我的 index.html 中需要相关的（到我的路由）模板才能将其插入到 DOM 中？

我真的不想在一个 .html 文件中定义我的所有模板。

我一定是错过了什么……</p>

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:05:15.500

我实际上使用了这个脚本：[https](https://stackoverflow.com/a/13474886/1345058) ://stackoverflow.com/a/13474886/1345058到目前为止似乎工作正常。

我可能会回来。

# html - 将 SVG 拖放到 Raphael 上？

> ID：13615799
> 
> 赞同：0
> 
> 时间：2012-11-28T22:46:41.660
> 
> 标签：html, svg, raphael

我即将开始一个新项目，该项目将涉及将对象（最好是 SVG）从工具箱拖放到舞台上，我正在考虑使用 Raphael.js 来提供帮助。

我遇到的问题是我希望应用程序 UI 具有在 HTML 中创建的布局，包括可滚动面板，包括工具箱。然后，我希望用户能够从工具箱中进行组件化并将其拖到“舞台”上。

我认为我的选择是双重的：

1) 在 Raphael 中将整个 UI 创建为 SVG。我猜想在 Raphael 中创建一个包含可滚动面板的 UI 比使用纯 HTML 更难，这会给我 Flexbox 和具有溢出：自动等的 DIV。

2) 在 HTML 中创建 UI，并以某种方式将 SVG 组件从工具箱拖放到 Raphael 舞台上，然后我可以让用户将它们放置到位。我不确定这是否可能。

我的断言正确吗？如果是这样，是否可以检测到用户何时将鼠标悬停在舞台上并以某种方式隐藏拖动帮助并在舞台内重新创建组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:55:05.853

不久前我写了这样的东西。我将工具箱中的组件绘制为单独的 Raphael 画布。拖动时，我将此工具移到工作区上方。放下时，我进行计算以确定位置，然后在该位置的工作区中创建一个新的 Raphael 对象。然后将拖动的对象放回工具箱中的适当位置。这对你的情况有用吗？

# java - 使用另一个类的对象而不将其传递给构造函数

> ID：13615806
> 
> 赞同：0
> 
> 时间：2012-11-28T22:47:43.727
> 
> 标签：java, oop

我正在开发 GUI 应用程序（简单游戏），其中一个对象（我们称之为对象 A）使用我直接加载的图像。我正在实现在游戏开始时加载图像的方法，这样我就不必每次重新配置游戏时都重新加载文件等。该方法将所有必要的图像加载为一个数组，然后是另一个方法（`BufferedImage[] getImages()`）；返回此数组。该方法所属的类（对象 B，一个 JPanel）绘制对象 A，而对象 A 又由对象 C 实例化（JFrame，当然，它也实例化对象 B）。

我想知道是否可以`getImages()`直接从对象 A 的方法访问对象 B 的方法，而无需通过方法调用传递引用。是否完全有可能（通过 ClassPath 等），这样做是一种好的编程习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:57:13.120

听起来您正在寻找单例模式。做这个：

```
public class ImageContainer {
    private final BufferedImage[] images = null;

    private static ImageContainer _instance = new ImageContainer();

    // NOTE PRIVATE CONSTRUCTOR
    private ImageContainer() {
        BufferedImage[] images = loadImages();
    }

    public static ImageContainer getInstance() {
        return _instance;
    }

    private BufferedImage[] loadImages() {
        // Do the loading image logic
    }

    // You might not want this in favor of the next method, so clients don't have direct access to your array
    public BufferedImage[] getImages() {
        return images;
    }

    public BufferedImage getImage(int index) {
        return BufferedImage[i];
    }
} 
```

然后，每当您需要图像时，只需执行

```
ImageContainer.getInstance().getImage(3); 
```

您甚至可以使用 an`EnumMap`而不是数组，以便更轻松地了解代码中要返回的图像。

* * *

顺便说一句，您可以在[此处阅读有关何时使用和不使用静态方法的不同原因的精彩讨论。](https://stackoverflow.com/questions/519520/difference-between-static-class-and-singleton-pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:57:44.880

仅当 getImages 是静态方法时，您才可以在没有引用的情况下调用 B 的 getImages() 方法。这可能是一个好主意，也可能不是一个好主意，具体取决于您的情况。

另一种选择是使 B 成为“单例”类。你可以这样做大约是这样的：

```
public class B {
  private static B theInstance;
  private bufferedImage[] images;
  private B() {
  }

  public static B getInstance() {
    if(theInstance == null) {
      theInstance = new B();
    }
    return theInstance;
  }

  public BufferedImage[] getImages() {
       if(images == null) {
            /* get the images */
       }
       return images;
  }
} 
```

但是请注意，有些人不赞成单身人士。另一种方法是[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

# drupal-7 - 如何修改drupal user.module核心中的功能但不触及核心？

> ID：13615808
> 
> 赞同：1
> 
> 时间：2012-11-28T22:48:23.730
> 
> 标签：drupal-7

我需要将 user.module 中的 user_save 函数修改为如下所示：

```
if (empty($account->uid)) {
 // if we have a designated id, put that one in.
    if ($uww_uid){
  $account->uid =$uww_uid;
}else{
   $account->uid = db_next_id(db_query('SELECT MAX(uid) FROM {users}')->fetchField());
} 
 } 
```

' 我怎样才能在核心之外做到这一点呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T01:48:02.730

您应该能够在 hook_user_insert() [http://api.drupal.org/api/drupal/modules%21user%21user.api.php/function/hook_user_insert/7中完成此操作](http://api.drupal.org/api/drupal/modules%21user%21user.api.php/function/hook_user_insert/7)

只需检查 $account->uid 并将其设置为您上面的 $uww_uid。

# c++ - 静态大小的 valarray 实现

> ID：13615810
> 
> 赞同：7
> 
> 时间：2012-11-28T22:48:45.690
> 
> 标签：c++, c++11, constexpr

我正在寻找一个静态大小的`std::valarray`实现。

自己实现应该很容易，但我需要 constexpr 操作（求和、减法等），这有点无聊/容易出错，所以我在这里问是否有流行的实现。

如果我必须自己实现这个，你认为在这种情况下表达式模板值得吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-17T15:56:11.857

C [++11](http://www.cplusplus.com/reference/array/array/)呢`array`？

但是你必须自己实现算术。这容易出错吗？我不这么认为。无聊，也许吧。`valarray`那么来自[C++99](http://www.cplusplus.com/reference/valarray/)的 goo'ol'呢？你已经有了你的算术——但是，唉，它们不是`constexpr`。

但是您可以采用它的实现，将其包装在一个简单的`array`专业化中，并且您将完成一项不易出错且令人兴奋的任务；-)

我自己很想尝试使用表达式模板。但这取决于您在路上获得代码的速度有多快。一开始它可能很难做，但从长远来看更容易维护（对于你自己和其他模板魔术师）。而且更有趣。

# firefox-addon - 如何在网格中的描述上启用自动换行 (XUL)

> ID：13615811
> 
> 赞同：0
> 
> 时间：2012-11-28T22:48:46.193
> 
> 标签：firefox-addon, xul, dtd

在我的`xul`文件中，我有一个简单的方案：

```
<tabpanel>
    <vbox>
        <description>&spat.options.label.text;</description>
        <grid>
            <columns>
                <column/>
                <column flex="2"/>
            </columns>
            <rows>              
                <row>
                    <label.../>
                </row>
            </rows>
        </grid>
    </vbox>
</tabpanel> 
```

dtd 实体引入了很长的文本字符串。

我似乎无法对描述中的文字进行任何类型的自动换行。

如果我将描述移出标签面板，它将很好地包装。但如果它在标签面板中，它会被截断（截断）。我在*没有*标签面板的网格中尝试了相同的操作，但遇到了同样的问题。

如何在描述中获得自动换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T04:49:39.623

那么，一种解决方案是在 css 中为标签添加一个`width`属性。`<description>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:36:43.927

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<window xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<box orient="{*horizontal | vertical}">
<description id="desc" style="width: 300px"></description>
<script type="application/x-javascript">
<![CDATA[
document.getElementById('desc').textContent = "This is a long section of dynamic message text that will word wrap";
]]>
</script>
</box>
</window> 
```

![在此处输入图像描述](../Images/71f680e75b7821e667fe8e587f8abc72.png) /// `I don't want to claim this as a solution, just to give an exmaple,i have posted this`////

# tfs - 安装 TFS 2012 Update 1 时出错 - dbo.typ_BuildControllerTableV2 与 dbo.typ_BuildControllerTable 不兼容

> ID：13615812
> 
> 赞同：4
> 
> 时间：2012-11-28T22:48:58.893
> 
> 标签：tfs, tfsbuild

我刚刚在我的 TFS2012 服务器上下载并安装了 Team Foundation Server 2012 Update 1，现在我无法配置构建控制器或编辑构建定义。

我从这里下载了更新：Team Foundation Server 2012 with Update 1 ( [web installer](http://go.microsoft.com/?linkid=9810334) or 1.1 GB [ISO file](http://go.microsoft.com/?linkid=9810324) )

然后我在我的服务器上运行安装程序，该安装程序在同一个盒子上同时包含应用程序层和数据层。

然后我在作为构建控制器和构建代理的另一台服务器上运行安装程序。它要求我重新配置构建控制器，但向导失败并出现以下错误：

![构建服务配置向导 - 无法向 TFS 注册](../Images/a0c864fef33048a0a3964cbebf00facd.png)

当我查看应用层的事件日志时，我看到以下错误：

```
Detailed Message: TF30065: An unhandled exception occurred.

Web Request Details
    Url: http://tfs.contoso.com:8080/tfs/Collection/Build/v4.0/AdministrationService.asmx [method: POST]
    User Agent: Team Foundation (TfsMgmt.exe, 11.0.51106.1, Other, SKU:9)
    Headers: Content-Length=405&Content-Type=application%2fsoap%2bxml%3b+charset%3dutf-8&Accept-Encoding=gzip&Accept-Language=en-AU&Expect=100-continue&Host=tfs.contoso.com%3a8080&User-Agent=Team+Foundation+(TfsMgmt.exe%2c+11.0.51106.1%2c+Other%2c+SKU%3a9)&X-TFS-Version=1.0.0.0&X-TFS-Session=21fd1d52-8afa-455c-bcc8-32ee83fa39a2%2c+AddBuildControllers&SOAPAction=%22http%3a%2f%2fschemas.microsoft.com%2fTeamFoundation%2f2010%2fBuild%2fAddBuildControllers%22
    Path: /tfs/Collection/Build/v4.0/AdministrationService.asmx
    Local Request: False
    Host Address: 192.168.1.100
    User: DOMAIN\TFSBUILDSVC [authentication type: NTLM]

Exception Message: TF30040: The database is not correctly configured. Contact your Team Foundation Server administrator. (type DatabaseConfigurationException)
Exception Stack Trace:    at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.TranslateException(Int32 errorNumber, SqlException sqlException, SqlError sqlError)
   at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.TranslateException(SqlException sqlException)
   at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.MapException(SqlException ex, QueryExecutionState queryState)
   at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.HandleException(Exception exception)
   at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.Execute(ExecuteType executeType, CommandBehavior behavior)
   at Microsoft.TeamFoundation.Build.Server.DataAccess.AdministrationComponent.AddBuildControllers(IList`1 controllers)
   at Microsoft.TeamFoundation.Build.Server.TeamFoundationBuildResourceService.AddBuildControllers(TeamFoundationRequestContext requestContext, IList`1 controllers)
   at Microsoft.TeamFoundation.Build.Server.AdministrationWebService4.AddBuildControllers(List`1 controllers)

Inner Exception Details:

Exception Message: Operand type clash: dbo.typ_BuildControllerTableV2 is incompatible with dbo.typ_BuildControllerTable (type SqlException)
SQL Exception Class: 16
SQL Exception Number: 206
SQL Exception Procedure: 
SQL Exception Line Number: 1
SQL Exception Server: tfsdata.contoso.com
SQL Exception State: 3
SQL Error(s):

Exception Data Dictionary:
HelpLink.ProdName = Microsoft SQL Server
HelpLink.ProdVer = 11.00.2100
HelpLink.EvtSrc = MSSQLServer
HelpLink.EvtID = 206
HelpLink.BaseHelpUrl = http://go.microsoft.com/fwlink
HelpLink.LinkId = 20476

Exception Stack Trace:    at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.Execute(ExecuteType executeType, CommandBehavior behavior) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T22:48:58.893

```
TF30040: The database is not correctly configured. 
```

首先，此错误消息表明服务器上安装的二进制文件与数据库模式之间的模式/版本不匹配。

坏消息是，这是服务器的缓存错误。

**解决方法**

好消息是它可以通过在应用层服务器上运行以下命令轻松解决。在此之后，您应该能够配置您的构建服务器。

```
iisreset
net stop tfsjobagent
net start tfsjobagent 
```

在 TFS 2012 Update 2 及更高版本中，此问题已得到修复。

# performance - 聚集索引的列顺序如何影响性能

> ID：13615816
> 
> 赞同：1
> 
> 时间：2012-11-28T22:49:03.790
> 
> 标签：performance, tsql, indexing, primary-key, clustered-index

我有一个带有两个外键列的简单映射表 `(CategoryId int, ProductId int)`。主键应用于两列。

虽然每个产品*可以*有多个类别，但很少有超过 2 个类别。另一方面，类别通常有 10k 多个产品。

**主键中列的顺序如何影响性能？**

该表的常见用法是基于类别的产品：

```
SELECT ProductId FROM [table] WHERE CategoryId = @catid 
```

我知道如果这是一个非聚集索引，我首先希望`CategoryId`从上述查询中获得最佳性能。聚集索引也是如此吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:41:31.770

是的，聚集索引也是如此。聚类决定了行的物理顺序。像这样按顺序排列表有助于大多数表上的 I/O，因为行和页可以通过快速顺序 I/O 而不是随机访问来读取。

在这种情况下，如果您还需要获取单个产品的类别，则可以在 (CategoryId, ProductId) 上定义聚集索引，在 (ProductId, CategoryId) 上定义非聚集索引。请注意两个索引如何具有相同的键。如果映射表只有 2 列，则两个索引上的索引页将具有完全相同的数据——只是排序不同。非聚集索引在这里应该表现得很好，因为 SQL Server 不需要进行书签查找来获取行中的其他数据。

# extjs - 如何扩展/覆盖预定义的核心煎茶类？

> ID：13615817
> 
> 赞同：3
> 
> 时间：2012-11-28T22:49:09.597
> 
> 标签：extjs, extjs4

我需要对 extjs 4.x 核心库进行一些更改，以支持从右到左的渲染方向。我已经知道直接操作 ExtJS 代码不好。

我的问题是：如何通过在 ext-all.js 之后加载到页面中的另一个 js 文件来做到这一点？

是否可以通过调用来更改预定义的 sencha 类方法`Ext.apply()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T01:07:39.930

这真的取决于你到底需要修改什么。但我相信你的意思是以下。

我有一个名为 的文件`ext-mods.js`，该文件在以下内容之后加载`ext-all.js`：

```
Ext.onReady(function(){

    Ext.override( Ext.data.writer.Json, {
         // We want all records sent to the server be encoded as an array,
         // even if there's a single record
         allowSingle:    false,

         // We only want to send what have changed
         writeAllFields: false
    });

}); 
```

我已经更改了所有 Json Writer 的默认配置，但您同样可以覆盖方法（通过从库中复制代码然后应用您的修改）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-10T12:39:16.740

如果您使用 Sencha Architect，那就更容易了。[本文](http://codesmith.in/overrides-for-classes-in-sencha-touch/)解释了这两种方法。

# algorithm - 最近最少使用 (LRU) 分页算法总是比 FIFO 更有效？

> ID：13615818
> 
> 赞同：0
> 
> 时间：2012-11-28T22:49:15.070
> 
> 标签：algorithm, operating-system, paging, fifo, lru

我正在为我的操作系统课程做一个模拟页面替换的项目。我有一个模拟器，可以在 1200 个引用上运行所有三种算法。但是，我得到了页面错误率，其中 LRU 算法仅在大多数情况下获得等于或低于 FIFO 的分数。偶尔会运行一个输入，即 LRU 的页面错误率会比 FIFO 略高。这是不正确的吗？

我为每轮递增的每个页码使用计数器来实现 LRU。正在使用的页面将其计数器重置为 0。当我交换框架时，我使用具有最大计数器值的框架。我觉得我的实现应该是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T02:14:51.760

LRU 不是最优的肯定会发生，FIFO 甚至可能会更好。

例如，考虑一个应用程序，它重复顺序地扫描一个大数组（太大而无法放入内存）总是从头开始，通常足够远以强制页面替换，但通常不会到达结尾。

我认为，最佳策略是将早期页面保留在阵列中，每次扫描都会使用这些页面，而不是最近访问的页面，这可能在一段时间内不再需要。这种策略更类似于 FIFO 而不是 LRU。

# ios - 当我点击编辑按钮时没有出现红色减号

> ID：13615821
> 
> 赞同：5
> 
> 时间：2012-11-28T22:49:21.687
> 
> 标签：ios, iphone, uitableview, cocoa-touch, cell

我确实将此代码添加到我`viewDidLoad`的，**编辑**按钮出现了，但行的左侧没有**减号按钮。**

```
 self.navigationItem.leftBarButtonItem = self.editButtonItem; 
```

滑动行后，**删除**按钮出现，但是当我点击**编辑**按钮时，没有减号。

什么会导致减号没有出现在我的程序中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:58:06.003

将您的表格视图编辑模式设置为，

```
 [self.tableView setEditing:YES animated:YES]; 
```

在导航栏中的编辑按钮的操作方法中执行上述操作。

或者只是使用，

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    [super setEditing:editing animated:animated];
    [self.tableView setEditing:editing animated:animated];
} 
```

如果要显示删除按钮，可以实现以下代码。

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath

     return UITableViewCellEditingStyleDelete;
} 
```

有关更多详细信息[，请查看苹果文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageInsertDeleteRow/ManageInsertDeleteRow.html)

# performance - 配置 Bullet Physics 以提高速度

> ID：13615822
> 
> 赞同：11
> 
> 时间：2012-11-28T22:49:35.363
> 
> 标签：performance, bulletphysics

如何配置子弹引擎的速度，而不是物理精度？例如，是否可以增加摩擦力，使物体更快地静止？

目前，我只能执行以下速度优化：

```
btContactSolverInfo& info = dynamicsWorld->getSolverInfo();
info.m_numIterations = 4; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-05T15:58:15.747

除了更改求解器中的迭代次数之外，您还可以：

*   使用更大的步长。1/100 比 1/200 快两倍（计算上），并且您将获得较低的准确性。不过，您应该注意稳定性。

*   使用更简单的碰撞形状。您可以使用盒子形状而不是凸面形状。（或将凸面形状划分为更简单的对象）甚至您可以使用 AABB 或圆柱体（仅在 z 方向）作为碰撞形状（我猜这是 10 年前游戏所做的）

# ruby-on-rails - Spree 在线商店和 Paypal 授权和捕获

> ID：13615831
> 
> 赞同：0
> 
> 时间：2012-11-28T22:50:18.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paypal, spree

我目前正在尝试让 Spree 商店系统与 Paypal 一起使用。我正在使用这个宝石：[https ://github.com/spree/spree_paypal_express](https://github.com/spree/spree_paypal_express)

我想使用 paypal 的 Authorization & Capture 方法，在我检查所有项目是否可用后捕获客户资金。不幸的是，我还没有在 gem 中找到这个方法。谁能提供一些信息，如何设置？我对所有 Paypal 的东西都很陌生（在开发方面；），我认为有时 API 真的很混乱。

所以也许有人已经用 Spree 完成了授权和捕获，可以给我一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:30:35.220

我用过paypal一点。

[https://gist.github.com/4165500](https://gist.github.com/4165500)

如果那没有帮助，您可以查看[http://railscasts.com/episodes/141-paypal-basics](http://railscasts.com/episodes/141-paypal-basics)

上面的链接是我建立贝宝的基础。此外，您还可以查看来自 Hacker News 的其他支付系统。[https://gethelium.com/?ref=hn](https://gethelium.com/?ref=hn)

这里还有一些关于贝宝基础知识的文档

[https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_WebsitePaymentsStandard_IntegrationGuide.pdf)

这是一个很大的pdf，但它有一些很好的信息。至于大礼包，不好意思说我没用过。不能确定它是否有任何好处。希望这些链接对您有所帮助。

# zeromq - ZMQ PUSHer 不带 PULLer

> ID：13615837
> 
> 赞同：4
> 
> 时间：2012-11-28T22:51:16.163
> 
> 标签：zeromq

我有一个由 PUSHer 和多个 PULLers 组成的 ZeroMQ 网络。问题是 pullers 的数量是未知的，在某些情况下，它可能是 0。当后者发生时，socket.send(msg) 似乎永远不会返回。如果我没记错的话，PUB/SUB 套接字不会发生这种情况。

当管道的另一侧没有拉拔器时，有什么方法可以避免推送数据包？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T04:55:15.880

您可以通过多种方式避免阻塞：

*   使用 zmq_poll 检查 PUSH 套接字何时准备好输出，只有在准备好时才发送。
*   使用非阻塞发送（zmq_msg_send 方法上的 ZMQ_DONTWAIT）
*   在套接字上将发送超时设置为零（ZMQ_SNDTIMEO 套接字选项）并在发送超时时处理错误返回
*   使用不同的套接字模式，例如 ROUTER-DEALER，从客户端到服务器的信号更明确

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T23:59:21.823

简短回答：PUSH/PULL 和 PUB/SUB 具有不同的语义。

PUSH/PULL 在 pullers 之间分发推送的消息。当你想扇出并确保你的东西得到处理时，你可以使用它。如果没有人在听，那么它将阻塞。

PUB/SUB 将发布的消息广播给所有订阅者。如果没有人在听，那么消息就会丢失。

在我看来，PUB/SUB 更适合您的用例。毕竟，消息丢失的扇出没有任何意义。

# android - 如何在 adb shell am start 的 URL 中包含与号？

> ID：13615841
> 
> 赞同：36
> 
> 时间：2012-11-28T22:51:26.617
> 
> 标签：android, adb

使用

```
$ adb shell am start some://url 
```

我可以使用活动管理器启动 URL。但是，如果我包含多个 URL 参数，除了第一个参数之外的所有参数都会被删除。

例子：

```
$ adb shell am start http://www.example.com?param1=1&param2=2 
```

回报：

```
$ Starting: Intent { act=android.intent.action.VIEW dat=http://www.example.com?param1=1 } 
```

和 param2 在＆符号被忽略后消失。我想知道 & 是否有一些编码/转义字符会阻止这种情况。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-29T06:24:34.580

使用转义字符`\`：

```
$ adb shell am start "http://www.example.com?param1=1\&param2=2" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-09-26T08:06:42.073

以下格式似乎有效。注意引号格式`'` `"`：

`$ adb shell am start -d '"http://www.example.com?param1=1&param2=2"'`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-23T12:53:58.323

由于您可以在此处跟踪的 android 构建工具中的错误，已接受的解决方案不起作用：[https](https://code.google.com/p/android/issues/detail?id=76026) ://code.google.com/p/android/issues/detail?id=76026 。解决方法如下：

```
echo 'am broadcast -a com.android.vending.INSTALL_REFERRER -n <your package>/<broadcast-receiver> --es "referrer" "utm_source=test_source&utm_medium=test_medium&utm_term=test_term&utm_content=test_content&utm_campaign=test_name";exit'|adb shell 
```

要将其集成到 gradle 中，您可以使用 commandLine 语句

```
commandLine "bash","-c","echo ..." 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-20T00:53:12.597

我已经在这里发布了一个解决方法：[https ://code.google.com/p/android/issues/detail?id=76026](https://code.google.com/p/android/issues/detail?id=76026)

所以，这里是涉及仪器的秘诀。
在侦听动作 com.example.action.VIEW 的工具中注册一个 BroadcastReceiver。

```
IntentFilter intentFilter = new IntentFilter("com.example.action.VIEW");
intentFilter.addDataScheme("myschema");
intentFilter.addCategory(Intent.CATEGORY_BROWSABLE);
Context.registerReceiver(new MyBroadcastReceiver(), intentFilter); 
```

将 & 替换为 %26（使用可以将其替换为您想要的任何内容）并发送意图 com.example.action.VIEW。
收到意图后，BroadcastReceiver 会将 %26 转换回 & 符号，并向您的应用发送具有所需操作的新意图。

```
public final void onReceive(final Context context, final Intent intent) {
    intent.setAction(Intent.ACTION_VIEW);
    intent.setData(Uri.parse(intent.getDataString().replaceAll("%26", "&")));
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intent);
} 
```

基本上它充当 BroadcastReceiver 代理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-24T03:10:24.553

引用`am...`命令！
像下面这样的东西应该可以工作（如果没有，请尝试双引号）：

```
adb shell 'am start http://www.example.com?param1=1&param2=2' 
```

# excel - 有没有我可以用来获取趋势线方程的函数？

> ID：13615847
> 
> 赞同：1
> 
> 时间：2012-11-28T22:51:49.813
> 
> 标签：excel, excel-formula

我知道我可以通过检查显示方程在图表上得到它，但我想知道是否有一个公式可以在单元格中吐出方程本身？

我需要为数千个单独的数据集执行此操作，并且将它们绘制成图表不是一种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:00:05.800

LINEST 函数通过使用“最小二乘”方法计算出一条最适合您的数据的直线来计算一条线的统计数据，然后返回一个描述该线的数组。（来自 Excel 帮助）
不确定，但您可能需要启用分析工具包插件才能使用该功能。

# .net - 算术运算导致溢出 - 结果在 int64 范围内

> ID：13615851
> 
> 赞同：1
> 
> 时间：2012-11-28T22:52:05.820
> 
> 标签：.net, variables

我收到一个异常说“算术运算导致溢出”，但我不知道为什么。

我正在尝试进行以下计算

我的值 = 2 * 11 * 37 * 41 * 41 * 41 * 41

等于 2,300,169,454。我已经将 myvalue 变量声明为 Long，并且还尝试了 Int64，所以这应该在范围内。抛出此异常还有其他原因吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:58:03.570

您已将*赋值的目标*声明为`long`，但看起来您正在操作中执行`int`算术运算。当所有算术都完成时`int`，它*确实会*溢出。如果您需要以 64 位执行算术运算，则您需要操作数是`long`值 - 或者至少是其中的一些。（如果没有看到您的真实代码，很难确切地说出在哪里进行更改。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:11:32.240

当您收到该错误时，您使用的所有值都是`int`值（或更小）。

如果只`long`在计算中使用一个值，则结果是一个`long`值并且没有溢出：

```
long myvalue = 2 * 11 * 37 * 41 * 41L * 41 * 41; 
```

# asp.net - 无法从 ftp 加载 ftp 文件

> ID：13615853
> 
> 赞同：0
> 
> 时间：2012-11-28T22:52:17.333
> 
> 标签：asp.net, xml, http, ftp

我想将一个 xml 文件放在 http 密码保护目录中。当它不受密码保护时，我输入了 http 完整路径并且它可以工作，但是当我尝试从代码访问时出现异常：

```
 XmlDocument xdoc = new XmlDocument();
         try
         {
             xdoc.Load("http://user:password@mysite.com/safe/users.xml");
         }
         catch (Exception e)
         {
             return false;
         } 
```

例外是：401 表示未经授权。

如果我在我的 borwser 中键入以下行： [http://user:password@mysite.com/safe/users.xml](http://user:password@mysite.com/safe/users.xml) -> 我可以看到 xml 文件。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:03:31.820

我认为您需要为 XmlResolver 提供网络凭据

[http://msdn.microsoft.com/en-us/library/47as68k4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/47as68k4(v=vs.71).aspx)

```
XmlTextReader rdr = new XmlTextReader("hthttp://@mysite.com/safe/users.xml");
rdr.XmlResolver.Credentials = CredentialCache.DefaultCredentials;
XmlDocument doc = new XmlDocument();
doc.Load(rdr); 
```

这是设置 upt 凭据的链接。 [http://msdn.microsoft.com/en-us/library/system.net.networkcredential(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.net.networkcredential(v=vs.71).aspx)

# sql - T-SQL - 根据另一个值列表将值列表返回到 IN 子句

> ID：13615855
> 
> 赞同：0
> 
> 时间：2012-11-28T22:52:24.200
> 
> 标签：sql, database, tsql, clause

要点是，我想返回子句的`employee_id`数字列表。`IN`

我得到了一个`employee_id`s like`(2,3,4,5)`和 a `company_id`like的列表`5`。其中一些属于`company=5`，一些不属于。如果其中任何一个属于`company=5`，那么我只想在`IN`子句中使用这些 ID 号。如果给定`employee_id`数字中没有一个属于`company=5`，那么我想返回 ALL`employee_id`的数字`company=5`。

我在这里有逻辑，但不幸的是，您不能`WHEN`从子选择返回子句内的多个值，因此该语句返回错误。

我正在尝试修改现有`WHERE`子句，因此我需要在此语句中进行更改并且不使用游标等。我知道必须有一种方法可以将这些转换为一系列 AND/OR，但我无法弄清楚。

感谢您的任何帮助！

```
SELECT employee_id FROM employees
WHERE company_id=5
  AND employee_id IN (
    CASE
          WHEN NOT EXISTS(SELECT employee_id FROM employees WHERE company_id=5 AND employee_id IN (2,3,4,5)) THEN
              SELECT employee_id FROM employees WHERE company_id=5       
          ELSE
              SELECT employee_id FROM employees WHERE company_id=5 AND employee_id IN (2,3,4,5)
    END
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:03:39.743

这行得通吗？

```
SELECT employee_id FROM employees 
WHERE company_id=5
and employee_id IN (2,3,4,5)
and exists (select * from employees where company_id = 5 and employee_id IN (2,3,4,5))
union all
SELECT employee_id FROM employees 
WHERE company_id=5
and Not exists (select * from employees where company_id = 5 and employee_id IN (2,3,4,5)) 
```

只有存在/不存在之一可以触发。所以这将做一个选择或另一个，但不使用 If 或 Case 语句。第一个存在可能是不必要的......所以

```
SELECT employee_id FROM employees 
WHERE company_id=5
and employee_id IN (2,3,4,5)
union all
SELECT employee_id FROM employees 
WHERE company_id=5
and Not exists (select * from employees where company_id = 5 and employee_id IN (2,3,4,5)) 
```

# mysql - SQL 排除 JOIN 查询 - 需要帮助

> ID：13615858
> 
> 赞同：2
> 
> 时间：2012-11-28T22:52:37.707
> 
> 标签：mysql, join

我需要帮助编写一个复杂的排除 sql 查询（至少对我来说）。首先，我在这里描述需求和查询......

说

1.  我有一个表“my_users”，其中维护了用户名和 user_ids。

2.  我有一个表“my_skills”，我在其中维护技能名称和相应的技能 ID。

3.  我有一个表“my_users_skills”，其中维护了用户及其相应的技能 ID。

4.  我有一个表“my_companies”，我在其中维护公司名称和相应的 company_ids。

5.  我有一个包含雇主用户 ID 和雇主公司 ID 的表“my_employer_profile”

6.  我有一个表 "my_users_blocked_companies" ，它包含用户 ID 和相应的被阻止的公司 ID。“my_users_blocked_companies”表的目的是为用户维护 1 个或多个公司作为被阻止的公司。

某公司HR人员搜索用户时，将该公司（HR所在公司）设置为屏蔽公司的用户不应出现在搜索结果中。

让我们开始 SQL 查询

## 1.

```
DROP TABLE IF EXISTS my_users;

CREATE TABLE my_users
(
user_id int NOT NULL AUTO_INCREMENT PRIMARY KEY,
name varchar(20) NOT NULL UNIQUE,
age int NULL
)

INSERT INTO my_users VALUES
(1, "John", 20),
(2, "Kelly", 25),
(3, "Xavier", 50),
(4, "Krishna", 40); 
```

## 2.

```
DROP TABLE IF EXISTS my_skills;

CREATE TABLE my_skills
(
skill_id int NOT NULL AUTO_INCREMENT PRIMARY KEY,
skill varchar(20) NOT NULL UNIQUE
);

INSERT INTO my_skills VALUES
(1, "MySql"),
(2, "Php"),
(3, "Linux"),
(4, "Java"); 
```

## 3.

```
DROP TABLE IF EXISTS my_users_skills;

CREATE TABLE my_users_skills
(
user_id int NOT NULL,
skill_id int NOT NULL
);

INSERT INTO my_users_skills VALUES
(1,2),
(1,4),
(2,1),
(2,4),
(3,2),
(3,3); 
```

## 4.

```
DROP TABLE IF EXISTS my_companies;

CREATE TABLE my_companies
(
company_id int NOT NULL AUTO_INCREMENT PRIMARY KEY,
company varchar(20) NOT NULL UNIQUE
);

INSERT INTO my_companies VALUES
(1, "Motorola"),
(2, "Logica"),
(3, "Microsft"),
(4, "Texas Instruements"); 
```

## 5.

```
DROP TABLE IF EXISTS my_employer_profile;

CREATE TABLE my_employer_profile
(
user_id int NOT NULL,
comp_id int NOT NULL
);

INSERT INTO my_employer_profile VALUES
(4,1), 
```

现在很明显，“克里希纳”是摩托罗拉公司的一名员工。

## 6.

```
DROP TABLE IF EXISTS my_users_blocked_companies;

CREATE TABLE my_users_blocked_companies
(
user_id int NOT NULL,
comp_id int NOT NULL
);

INSERT INTO my_users_blocked_companies VALUES
(1,1),
(1,4),
(2,4) 
```

现在您可以清楚地看到 John 已将 Motorola 和 Texas Instruments 设置为被封锁的公司。kelly 也将 Texas Instruments 设置为被封锁的公司。

现在，如果 Krishna 正在搜索具有“java”、“mysql”技能的用户，我们可以有两种可能的情况：

## 情况1

在不考虑被封锁公司的情况下，搜索结果将获取 John 和 Kelly 的记录。

这种情况的 SQL 查询是

```
SELECT x.name
, GROUP_CONCAT(DISTINCT y2.skill ORDER BY y2.skill) skills
FROM my_users x
JOIN my_users_skills xy1
ON xy1.user_id = x.user_id
JOIN my_skills y1
ON y1.skill_id = xy1.skill_id
AND y1.skill IN ('java','mysql')
JOIN my_users_skills xy2
ON xy2.user_id = xy1.user_id
JOIN my_skills y2
ON y2.skill_id = xy2.skill_id
GROUP
BY x.user_id; 
```

## 案例2

搜索结果，考虑到被封锁的公司将获取凯利的记录，因为约翰已将摩托罗拉设置为被封锁的公司，而 Krishna 来自摩托罗拉

对于这种情况，我很努力，但无法编写正确的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:09:27.363

你可以这样做：

```
SELECT x.name , GROUP_CONCAT(DISTINCT y2.skill ORDER BY y2.skill) skills 
   FROM my_users x 
   JOIN my_users_skills xy1 
       ON xy1.user_id = x.user_id 
   JOIN my_skills y1 
       ON y1.skill_id = xy1.skill_id AND y1.skill IN ('java','mysql') 
   JOIN my_users_skills xy2 
       ON xy2.user_id = xy1.user_id 
   JOIN my_skills y2 
       ON y2.skill_id = xy2.skill_id 
   GROUP BY x.user_id 
       HAVING x.user_id NOT IN (
         SELECT bc.user_id FROM my_users_blocked_companies bc 
         LEFT JOIN my_companies c ON bc.comp_id = c.company_id
         WHERE c.company IN ('Motorola')
       ); 
```

sqlfiddle[在这里执行](http://www.sqlfiddle.com/#!2/f2e32/5/0)

# image - 如何将流程元素与短语元素对齐？

> ID：13615859
> 
> 赞同：1
> 
> 时间：2012-11-28T22:52:49.097
> 
> 标签：image, html, css

我对前端开发相对较新，因此在寻找组织水平菜单的最佳方法时遇到了一些问题，该菜单将包含一个徽标和一些菜单选项。另外，我想将水平菜单分开一个宽 |

不知道该怎么做。

这是我到目前为止所拥有的：

**HTML：**

```
 <header> 
 <img src="/images/logo.png" height="50px" id="front" />
 <nav>
 <ul>
 <li><a href="#">Home</a></li>
 <li><a href="#">About</a></li>
 <li><a href="#">Contact</a></li>
 </ul>
 </nav> 
```

**CSS：**

```
 body {
 margin: 0;
 background-color: #FFFFFF;
 }
 header {
 background-color: #009000;
 height: 85px;
 position: relative;
 }
 #front {
 margin-left: 20px;
 margin-top: 20px;
 }
 ul li {
 display: inline;
 list-style-type: none;
 margin-right: 34px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:54:38.933

使用`display: inline-block;`和`float: left;`。

此外，放置`float:left;`在您的`#front`css 部分中以获取标题内的导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:09:11.087

这对我有用。每个列表元素（使用选择器“ul li”获得）没有使用管道字符，而是有一个细的右侧边框。您还可以`<li> | </li>`在每个列表项之间添加。

另外，我将 li 元素向左浮动，而不是内联显示它们。不确定您是否想要标题内的导航。

HTML：

```
<header>
  <img src="/images/logo.png" height="70px" id="front" />
  <nav>
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li class="last"><a href="#">Contact</a></li>
    </ul>
  </nav>
</header> 
```

CSS：

```
body {
    margin: 0;
}
header {
    background-color: #009000;
    height: auto;
    position: relative;
}
#front {
    margin-left: 20px;
    margin-top: 20px;
    float: left;
}
nav {
    float: left;
    margin-top: 30px;
}
ul {
    margin: 0;
    padding: 0;
    float: left;
}
ul li {
    list-style-type: none;
    float: left;
    border-right: 2px solid black;
    padding-right: 5px;
    padding-left: 5px;
}
ul li.last {
    border-right: 0px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T23:28:17.960

虽然我会使用 DIV 而不是 ul/li 创建它，但这里是可以帮助您入门的 css：

```
body { margin:0; background-color:#FFFFFF; }
header { background-color:#009000; height:85px; position:relative; }
header:after { content:''; display:block; clear:both; }
header img { float:left; margin:20px 20px 0 20px; }
header ul { list-style-type:none; }
header ul li { float:left; margin-right:34px; border-left:1px solid #000000; padding-left:10px; }
header ul li:first { border:none; padding:0; } 
```

你会看到我做的一些不同的事情是：

1）我在页眉上使用了清除修复系统，这样当您使用浮动时，它们将被清除，您不必担心在页眉之后它们。

2）我将图像向左浮动并在右侧添加了一些边距。

3）由于您使用的是ul / li，因此您需要关闭子弹`list-style-type:none;`

4）我浮动 li 元素并在左侧给它们每个边框，但随后我删除了第一个 li 的边框和填充。

您也可以通过使用`display:inline-block;`我觉得使用 DIV 会更简洁的代码来完成此操作，但我不想更改您的 html，而只是向您展示了如何使用 css 完成此操作。

# mysql - Facebook PHP SDK 不保留跨多页 iFrame 应用程序的变量值

> ID：13615863
> 
> 赞同：1
> 
> 时间：2012-11-28T22:53:01.060
> 
> 标签：mysql, facebook, facebook-php-sdk

我的问题是关于 Facebook 应用程序的。我有一个 iFrame 应用程序，我正在使用 Facebook PHP SDK 来获取用户的信息并通过变量显示。基本上有一个这样设置的数组：

```
require_once 'facebook.php';
$app_id = "APP_ID";
$app_secret = "APP_SECRET";
$config = array();
  $config['appId'] = '562494063776100';
  $config['secret'] = '83f3c580f0b4f9ddca7cd13e1386b733';
  $config['fileUpload'] = false; // optional
  $config['cookie'] = true;

$facebook = new Facebook($config);

$user = $facebook->getUser();

if ($user) {
  try {
    // Get the user profile data you have permission to view
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    $user = null;
  }
} else {
  die;
} 
```

然后我可以从打开的图表中访问变量，例如 $user_profile['name'] 。它在初始加载时工作正常，但随后我失去了 $user 的值。该应用程序是一个多页 iframe 应用程序，这意味着它就像一个包含三个页面的小型迷你网站。用户进入欢迎页面，然后可以进入投票页面或进入页面。我只是在第一页加载了 facebook.php 和信息，因为当我在其他文件中有一个 connect.php（其中包含 facebook SDK 信息以及我的 MySQL 登录信息）时，它给了我错误。我想是因为 facebook.php 被多次调用？

现在的问题是我可以在主页上访问 $user_profile 但不能在其他页面上访问。我假设这是因为它没有查询 facebook.php 文件，但我无法将 facebook.php 文件放在这些页面上，因为我收到错误消息。它给我的错误是我在 if 语句的“死”部分中输入的任何内容。基本上 $user 没有设置。我想尽量避免使用 Javascript SDK，这样我就可以将所有东西都保留在服务器端。

我看到了这篇文章： [使用 facebook 的 php sdk 访问新页面时权限未得到保留](https://stackoverflow.com/questions/9906475/permissions-not-getting-carried-over-when-visiting-a-new-page-while-using-facebo) ，这与相同的问题很接近，但并不完全相同。谢谢您的帮助！

# android - 不同 Android 设备的屏幕尺寸的奇怪行为

> ID：13615864
> 
> 赞同：0
> 
> 时间：2012-11-28T22:53:03.143
> 
> 标签：android, view, compatibility, android-canvas, ondraw

我是一名大学生，正在从事 android 开发的最终项目。

我的项目是一个简单的蛇游戏，用户可以使用加速度计或按钮。

我的游戏视图的工作方式是在我的“SnakeView”上动态创建一个网格，它可以像这样扩展视图：

```
/**
 * This is where we paint the grid and the game.
 */
@Override
public void onDraw(Canvas canvas){
    super.onDraw(canvas);
    if(created){
    canvas.drawBitmap(mBitmap, 0, 0, mPaintScreen);
    mBitmap.eraseColor(Color.WHITE);
    for(int i = 0 ; i < xlength; i++){
        for(int j = 0; j < ylength; j++){
            int x = i * rectWidth;
            int y = j * rectHeight;
            Point p = new Point(i,j);
            if(snake.contains(p)){
                mBitmapCanvas.drawRect(x,y, x + rectWidth, y + rectHeight, mSnakePaint);
            }else if(walls.contains(p)){
                mBitmapCanvas.drawRect(x,y, x + rectWidth, y + rectHeight, mWallPaint);
            }else if (growBerries.contains(p)){
                mBitmapCanvas.drawRect(x,y, x + rectWidth, y + rectHeight, mGrowBerryPaint);
            }
        }
    }
    }
} 
```

基本上我有一个包含蛇和我的浆果的数组列表。如果平原上的点在任一数组列表中，我将矩形涂成不同的颜色。否则我让飞机保持白色。

为了设置 rectWidth 和 height 我进入 onSizeChanged 方法。

```
@Override
public void onSizeChanged(int w, int h, int oldW, int oldH){
    mBitmap = Bitmap.createBitmap(getWidth(), getHeight(),Bitmap.Config.ARGB_8888);
    mBitmapCanvas = new Canvas(mBitmap);
    mBitmap.eraseColor(Color.WHITE);
    width = w;
    height = h;
    rectWidth = width / (xlength-1);
    rectHeight = height / (ylength-1);
    invalidate();
} 
```

现在的问题是块在不同设备上的格式不正确。我已经在 nexus 7 平板电脑（不确定尺寸，但它更大）和我的 pantech flex 手机上对此进行了测试。（大约 4 英寸）

[![我的形象](../Images/42c751f38f95633796186784974a2293.png)](https://i.stack.imgur.com/dOs9o.png) [![我的图像2](../Images/9ebeef0caee5dc639396ed2183eecb86.png)](https://i.stack.imgur.com/lYZ3F.png)

如您所见，我创建的右侧外边框与屏幕宽度不匹配。我想知道为什么会这样。

我绝对知道边框正在拥抱我的网格，只是网格没有展开以适应整个宽度。

这应该可以工作，并且尺寸应该适合屏幕尺寸。我唯一的猜测是 int w 和 int h 是四舍五入的，它们不会突出实际的宽度和高度。xlength 和 ylength 是我想要在 x 和 y 方向上的块数。

我注意到，如果我调整矩形的数量，它可能适合一个设备，但不能适合另一个设备，我只是希望它完美地适合两个设备！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:25:16.480

如果改变矩形的**大小会发生什么？**我的第一个猜测是 rectWidth 不能被屏幕的宽度整除，这就是为什么沿边框有空格的原因。

如果是这种情况，那么您可以通过将 rectWidth 和 rectHeight 定义为屏幕尺寸的函数来修复它（尽管如果您不小心，这可能意味着不同的设备具有不同大小的播放区域。我不是确定你是否想避免这种情况）。

# jquery - CakePHP，带有分页结果的表单助手标记问题

> ID：13615869
> 
> 赞同：0
> 
> 时间：2012-11-28T22:53:37.183
> 
> 标签：jquery, forms, cakephp

我需要有人看看为什么 CakePHP (Ver 2.2.2) 正在做它正在做的事情？好的，我的代码细分如下。DIV PageList 是一个 JQuery Accordion，有两个下拉菜单，一个用于管理员添加新用途，另一个用于查看所有用户并进行一些更改。添加用户很好，并且没有任何问题。

我的问题是（或者至少我认为是）使用 Form Helper，我之前确实在我的 foreach 循环之外进行了 Form Create 调用并且工作没有任何问题，我会找到我想要更改某些内容然后保存的用户， 没问题。当我声明要对结果进行分页时，我开始遇到问题。当表单创建在 foreach 之外并且就在我的表代码开始之前，只有最后显示的结果才能保存所做的更改。我找到了问题的原因，那就是 ID 字段始终默认为最后显示的结果。所以我将 Form Create 移到我的 foreach 循环中。

这现在有效，但由于某种原因，它立即开始结束，因此我的输入现在位于表单标签之外？我不明白为什么，因为我在 foreach 循环的底部有 end Form Helper end() 调用。因此，它应该只以自己的形式显示每个用户。

我不确定这是否是一个问题，并且仍然可以像这样使用它。但是一个问题是我的表格现在在我的表格之后开始，这不会通过 W3C 验证，这不是一个大问题。旁注，还可以使用表格吗？我正在与他们一起列出数据？我正在尝试学习 HTML 5 规范。但还没有真正看到任何关于桌子的东西让......

非常感谢。格伦·柯蒂斯。

```
echo '<div id="PageList">';

$OutputHolder = '<h3 class="Background-Titles">Add User</h3>';
$OutputHolder .= '<div class="Background-Content" id="AdminAddUser">';
$OutputHolder .=  $this->Form->create('User', array('url'=>'http://glenns-showcase.net/projects/cake/DrWho/adminadd/', 'inputDefaults' => array('div' => false) ) ); 
$OutputHolder .=  $this->Form->input('username');
$OutputHolder .=  $this->Form->input('password');
$OutputHolder .=  $this->Form->input('firstname');
$OutputHolder .=  $this->Form->input('surname');
$OutputHolder .=  $this->Form->input('email');
$OutputHolder .= 'Select Role For User <br />';
$OutputHolder .=  $this->Form->radio('role_id', $opt_role, $attributes);
$OutputHolder .= '<br />Select Active State For User <br />';
$OutputHolder .=  $this->Form->radio('active', $opt_active, $attributes);
$OutputHolder .=  $this->Form->end('Submit'); 
$OutputHolder .= '</div>'; //End for AddUser
echo $OutputHolder;

$OutputViewUsers = '<h3 class="Background-Titles">View All Users</h3>';
$OutputViewUsers .= '<div class="Background-Content" id="AdminViewUsers">';

$OutputViewUsers .=  '<table border="0">';
$OutputViewUsers .=  '<tr><td>Username</td><td>First Name</td><td>Surname</td><td>E-mail</td><td>Stutus</td><td>Level</td><td>Save</td></tr>';
foreach($users as $key => $value) {
    $OutputViewUsers .= $this->Form->create('UserEdit', array('url'=>'http://glenns-showcase.net/projects/cake/DrWho/adminedit/', 'inputDefaults' => array('div' => false) ) );
    $BaseLink = $users[$key]['User']; 
    $OutputViewUsers .= "<td class=\"AdminViewUsersUN\">" .($BaseLink  ['username']) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('fname', array('default' => $BaseLink  ['firstname'], 'label' => false,  'class' => 'AdminViewUsersFN') ) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('sname', array('default' => $BaseLink  ['surname'], 'label' => false,  'class' => 'AdminViewUsersSN') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('email', array('default' => $BaseLink  ['email'], 'label' => false,  'class' => 'AdminViewUsersEM') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('active', $ActOpts, array('empty' => false, 'default' => $BaseLink  ['active'], 'class' => 'AdminViewUsersAS') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('role', $RoleOpts, array('empty' => false, 'default' => $users[$key]['Role']['id'],  'class' => 'AdminViewUsersUL') ). "</td>";
    $OutputViewUsers .= $this->Form->hidden('id', array('default' => $BaseLink  ['id'], ) );
    $OutputViewUsers .= "<td>" . $this->Form->submit('Save', array('div' => false, 'class' => 'AdminViewUsersSB') ). "</td></tr>"; 
    //$test = array('label' => 'Save', 'div' => array('class' => 'AdminViewUsersSB'));
    $OutputViewUsers .=  $this->Form->end(); 

} //End of foreach loop
$OutputViewUsers .= '</table>';

$OutputViewUsers .= $this->Paginator->numbers(array('first' => 2));
$OutputViewUsers .= '</div>'; //End for AllUsers 
echo $OutputViewUsers;

echo '</div>'; //End for PageList 
```

更新 ：：：

这就是它现在的样子！但这现在，或多或少是我以前的样子。我添加了缺少的标签。但这现在只让最后一个结果起作用！我对每页 5 个结果进行分页，页面上的前四个结果将不起作用，因为它们的 ID 号错误，每次推送任何“保存”时，只提供最后一个结果的 ID。

我不确定您所说的“为输入字段编制索引”是什么意思，但据我所知，“为提交元素提供包含相关记录的适当索引的唯一名称”，其中有一个隐藏字段提供 ID。

在我看来，我必须将整个表单放在我的循环中，以便每个返回的结果都是自己的表单，那么应该没有错误！但是，我不能将表格的开头放在循环中，或者我对每个结果都有一个标题！我想我应该能够解决这个问题！

非常感谢您的帮助！

```
$OutputViewUsers = '<h3 class="Background-Titles">View All Users</h3>';
$OutputViewUsers .= '<div class="Background-Content" id="AdminViewUsers">';
$OutputViewUsers .= $this->Form->create('UserEdit', array('url'=>'http://glenns-showcase.net/projects/cake/DrWho/adminedit/', 'inputDefaults' => array('div' => false) ) );
$OutputViewUsers .=  '<table border="0">';
$OutputViewUsers .=  '<tr><td>Username</td><td>First Name</td><td>Surname</td><td>E-mail</td><td>Stutus</td><td>Level</td><td>Save</td></tr>';
foreach($users as $key => $value) {
    $BaseLink = $users[$key]['User']; 
    $OutputViewUsers .= "<tr><td class=\"AdminViewUsersUN\">" .($BaseLink  ['username']) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('fname', array('default' => $BaseLink  ['firstname'], 'label' => false,  'class' => 'AdminViewUsersFN') ) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('sname', array('default' => $BaseLink  ['surname'], 'label' => false,  'class' => 'AdminViewUsersSN') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('email', array('default' => $BaseLink  ['email'], 'label' => false,  'class' => 'AdminViewUsersEM') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('active', $ActOpts, array('empty' => false, 'default' => $BaseLink  ['active'], 'class' => 'AdminViewUsersAS') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('role', $RoleOpts, array('empty' => false, 'default' => $users[$key]['Role']['id'],  'class' => 'AdminViewUsersUL') ). "</td>";
    $OutputViewUsers .= $this->Form->hidden('id', array('default' => $BaseLink  ['id'], ) );
    $OutputViewUsers .= "<td>" . $this->Form->submit('Save', array('div' => false, 'class' => 'AdminViewUsersSB') ). "</td></tr>"; 
} //End of foreach loop
$OutputViewUsers .= '</table>';
$OutputViewUsers .=  $this->Form->end(); 
$OutputViewUsers .= $this->Paginator->numbers(array('first' => 2));
$OutputViewUsers .= '</div>'; //End for AllUsers 
echo $OutputViewUsers; 
```

另一个更新::

现在这似乎起作用了，每个结果都在它自己的表单元素和所有输入中，或者现在在表单标签中。但是，每个结果现在都有自己的标题，因为我现在在表单中有表格，但现在在我的 foreach 循环中，所以每次循环时，它都会在结果顶部回显/打印标题。我正在为此努力。任何帮助仍然是最受欢迎的！！

```
foreach($users as $key => $value) {
    $OutputViewUsers .= $this->Form->create('UserEdit', array('url'=>'http://glenns-showcase.net/projects/cake/DrWho/adminedit/', 'inputDefaults' => array('div' => false) ) );
    $OutputViewUsers .=  '<table border="0">';
    $OutputViewUsers .=  '<tr><td>Username</td><td>First Name</td><td>Surname</td><td>E-mail</td><td>Stutus</td><td>Level</td><td>Save</td></tr>';
    $BaseLink = $users[$key]['User']; 
    $OutputViewUsers .= "<tr><td class=\"AdminViewUsersUN\">" .($BaseLink  ['username']) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('fname', array('default' => $BaseLink  ['firstname'], 'label' => false,  'class' => 'AdminViewUsersFN') ) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('sname', array('default' => $BaseLink  ['surname'], 'label' => false,  'class' => 'AdminViewUsersSN') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('email', array('default' => $BaseLink  ['email'], 'label' => false,  'class' => 'AdminViewUsersEM') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('active', $ActOpts, array('empty' => false, 'default' => $BaseLink  ['active'], 'class' => 'AdminViewUsersAS') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('role', $RoleOpts, array('empty' => false, 'default' => $users[$key]['Role']['id'],  'class' => 'AdminViewUsersUL') ). "</td>";
    $OutputViewUsers .= $this->Form->hidden('id', array('default' => $BaseLink  ['id'], ) );
    $OutputViewUsers .= "<td>" . $this->Form->submit('Save', array('div' => false, 'class' => 'AdminViewUsersSB') ). "</td></tr>"; 
    //$test = array('label' => 'Save', 'div' => array('class' => 'AdminViewUsersSB'));
    $OutputViewUsers .= '</table>';
    $OutputViewUsers .=  $this->Form->end(); 

} //End of foreach loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:01:26.430

您只是在生成无效的 HTML。您`tr`在循环中缺少一个开始标签，但即使它存在，它仍然无效，因为[`tr`只允许持有`td`or`th`元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/tabular-data.html#the-tr-element)，因此浏览器可能会在表格之外呈现表单。

另见[表格内的表格](https://stackoverflow.com/questions/5967564/form-inside-a-table)

一种解决方法是将整个表格包装在表单中，对输入字段进行索引，为提交元素提供包含相关记录的适当索引的唯一名称，并在服务器端使用此名称来确定要保存的记录。或者将提交的数据与数据库进行比较，只保存发生更改的记录。

附言。是的，表格很好，只要它们用于预期用途，用于描述表格数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T14:03:49.203

我已将上述内容标记为答案，因为它使我走上了正确的道路，非常感谢！

现在，我的循环中有表格，表格中有表格。现在这意味着每个结果都在其自己的表单标签中。

对于标题，我刚刚使用 CSS 和 span 标签来排列它们！

非常感谢格伦。

这是我的最终代码，以防万一其他人发现它有任何用处。

```
$OutputViewUsers = '<h3 class="Background-Titles">View All Users</h3>';
$OutputViewUsers .= '<div class="Background-Content" id="AdminViewUsers">';
$OutputViewUsers .=  '<div class="AdminViewUsersListHeaders">
    <span class="AdminViewUsersUNHeader">Username</span>
    <span class="AdminViewUsersFNHeader">First Name</span>
    <span class="AdminViewUsersSNHeader">Surname</span>
    <span class="AdminViewUsersEMHeader">E-mail</span>
    <span class="AdminViewUsersASHeader">Stutus</span>
    <span class="AdminViewUsersULHeader">Level</span>
    <span class="AdminViewUsersSAHeader">Save</span></div>';

foreach($users as $key => $value) {
    $OutputViewUsers .= $this->Form->create('UserEdit', array('url'=>'http://glenns-showcase.net/projects/cake/DrWho/adminedit/', 'inputDefaults' => array('div' => false) ) );
    $OutputViewUsers .=  '<table border="0">';
    //$OutputViewUsers .=  '<tr><td>Username</td><td>First Name</td><td>Surname</td><td>E-mail</td><td>Stutus</td><td>Level</td><td>Save</td></tr>';
    $BaseLink = $users[$key]['User']; 
    $OutputViewUsers .= "<tr><td class=\"AdminViewUsersUN\">" .($BaseLink  ['username']) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('fname', array('default' => $BaseLink  ['firstname'], 'label' => false,  'class' => 'AdminViewUsersFN') ) . "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('sname', array('default' => $BaseLink  ['surname'], 'label' => false,  'class' => 'AdminViewUsersSN') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->input('email', array('default' => $BaseLink  ['email'], 'label' => false,  'class' => 'AdminViewUsersEM') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('active', $ActOpts, array('empty' => false, 'default' => $BaseLink  ['active'], 'class' => 'AdminViewUsersAS') ). "</td>";
    $OutputViewUsers .= "<td>" . $this->Form->select('role', $RoleOpts, array('empty' => false, 'default' => $users[$key]['Role']['id'],  'class' => 'AdminViewUsersUL') ). "</td>";
    $OutputViewUsers .= $this->Form->hidden('id', array('default' => $BaseLink  ['id'], ) );
    $OutputViewUsers .= "<td>" . $this->Form->submit('Save', array('div' => false, 'class' => 'AdminViewUsersSB') ). "</td></tr>"; 
    //$test = array('label' => 'Save', 'div' => array('class' => 'AdminViewUsersSB'));
    $OutputViewUsers .= '</table>';
    $OutputViewUsers .=  $this->Form->end(); 

} //End of foreach loop

$OutputViewUsers .= $this->Paginator->numbers(array('first' => 2));
$OutputViewUsers .= '</div>'; //End for AllUsers 
echo $OutputViewUsers; 
```

# django - Django：渲染表单并使用 ModelForm 提交问题

> ID：13615872
> 
> 赞同：0
> 
> 时间：2012-11-28T22:53:41.083
> 
> 标签：django, forms, modelform

我正在尝试创建一个允许用户向对象添加注释的表单。它类似于 django 评论包，但我无法让它工作（django 文档中的教程不起作用）。

这是我的模型和 ModelForm：

```
class Note(models.Model):
    text = models.CharField(max_length = 200)
    thing_about = generic.GenericForeignKey('content_type','object_id')
    content_type = models.ForeignKey(ContentType,
        limit_choices_to={"model__in": ("Individual", "ArtsOrganization",'Presenter', "BookingAgent","Festival","ManagementCompany", "OtherOrganization","PresenterCompany", "Venue", "Gig", "Venue")},blank=True, null=True)
object_id = models.IntegerField(db_index=True, blank=True, null=True,)

    date_added = models.DateTimeField(('date added'), auto_now_add=True)
    date_modified = models.DateTimeField(('date modified'), auto_now=True)
    author = models.ForeignKey(User)

    def __unicode__(self):
        return u'%s' % (self.date_added)

class NoteForm(ModelForm):
    class Meta:
        model = Note 
```

我的观点.py

```
def note(request):
    if request.method == 'POST': # If the form has been submitted...
        form = NoteForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
        # Process the data in form.cleaned_data
            form.save()
            return HttpResponseRedirect('/thanks/') # Redirect after POST
    else:
        form = NoteForm() # An unbound form

    return render(request, 'includes/note.html', {
    'form': form,
    }) 
```

我在 myapp/templates/includes/note.html 下创建了一个模板，这样我就可以为每个对象使用该表单（它们都有不同的详细信息页面），即使用相同的表单在 Band 页面和 Venue 页面上做笔记。

这是模板“includes/notes.html”的内容：

```
<form action="includes/note/" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form> 
```

问题是表单不呈现。我不确定视图是否到达模板，因此它甚至知道要呈现什么形式。

# c++ - 为什么这个 std::bind 没有转换为 std::function？

> ID：13615873
> 
> 赞同：1
> 
> 时间：2012-11-28T22:53:41.660
> 
> 标签：c++, function, templates, c++11, bind

为什么以下代码中的嵌套没有被任何主要编译器（VS2010/2012、gcc、clang）`std::bind`隐式转换为an ？`std::function<void()>`这是标准行为还是错误？

```
#include <functional>

void bar(int, std::function<void()>) { }
void foo() { }

int main()
{
    std::function<void(int, std::function<void()>)> func;
    func = std::bind(bar, 5, std::bind(foo));

    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:01:57.440

这在[boost 文档](http://www.boost.org/doc/libs/1_52_0/libs/bind/bind.html#nested_binds)中进行了解释：

> **调用函数对象时，内部绑定表达式在外部绑定之前以未指定的顺序进行评估；然后在评估外部绑定时将评估结果替换为它们的位置**。在上面的示例中，当使用参数列表 (x) 调用函数对象时，首先计算 bind(g, _1)(x)，产生 g(x)，然后是 bind(f, g(x))( x) 被评估，产生最终结果 f(g(x))。

Boost 甚至提供`protect`了防止这种评估的方法：

```
#include <boost/bind/protect.hpp>
...
func = std::bind(bar, 5, boost::protect(std::bind(foo))); 
```

但是，要打电话给`func`你必须提供这样的两个论点（感谢[David Rodríguez - dribeas](https://stackoverflow.com/questions/13615873/why-is-this-stdbind-not-converted-to-stdfunction/13615974#comment18670863_13615873)指出了这一点），所以这个例子绝对不好：

```
func(1, std::function<void()>()); 
```

# ios - 如何使用 Apple 推送通知更新存折

> ID：13615874
> 
> 赞同：6
> 
> 时间：2012-11-28T22:53:40.920
> 
> 标签：ios, push-notification, apple-push-notifications, passbook

我创建了存折，并将它们加载到我客户的 iOS 设备上。我需要更新这些存折。根据[Passbook 文档](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/PassKit_PG/Chapters/Updating.html#//apple_ref/doc/uid/TP40012195-CH5-SW1)，您需要使用 Apple 推送通知服务 (APNS) 触发从 iOS 设备拉取以更新 Passbook。此 APNS 推送由“推送令牌”和“通行证类型 ID”组成。但是，APNS 主体是空的。

[APNS 文档](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)讨论了发送推送通知所需的“设备令牌”，但没有提及“推送令牌” 。

APNS“设备令牌”是否与存折“推送令牌”相同？如何在我的 APNS 推送中发送存折“通行证类型 ID”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T05:01:22.457

*   设备注册时，推送令牌会提供给您的服务器。

它位于 JSON 字典中的 POST 请求正文中。例如：

{ "pushToken":"PushTokenFromDevice" }

*   通行证类型 ID 嵌入了用于生成 Apple 推送通知服务的推送通知的证书

如果你需要 PHP 实现，我推荐：[APNS PHP](https://github.com/duccio/ApnsPHP)

# sql - 使用具有可变数量参数的 LIKE 子句时如何避免内联 SQL

> ID：13615875
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:01.497
> 
> 标签：sql, sql-server

给定一个 6 位字符串列表（代表社会安全号码的一部分），我需要拉回 SSN 与其中一个字符串匹配的用户数据集。我的 SQL 是：

```
SELECT DISTINCT
         u.ssn,
         u.name
FROM user u
WHERE (u.ssn LIKE '%111111%' OR u.ssn LIKE '%222222%') 
```

我想使用准备好的语句而不是生成内联 SQL（注入攻击等）。有没有一种方法可以在不创建内联 SQL 的情况下取回数据？

这个站点上有[类似](https://stackoverflow.com/questions/1317368/how-do-i-avoid-dynamic-sql-when-using-an-undetermined-number-of-parameters)的问题，但在我的情况下，问题是使用 IN 子句而不是 LIKE 不是一种选择。我只有 6 位数字，并且必须搜索整个 10 位数字的 SSN。

ps 这是一个带有 SQL Server 后端的 .Net 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:14:41.910

将您的搜索词放在一个表格中并加入它们：

```
declare @SSN table (SSN char(9))
insert into @SSN select '123456789' union select '456789321' union select '789123456'

declare @SearchString table (SearchString varchar(9))
insert into @SearchString select '893' union select '9123'

select ssn.SSN
from @SSN ssn
join @SearchString sst on ssn.SSN like '%' + sst.SearchString +'%' 
```

如果性能是一个问题，并且如果您的搜索字符串总是至少 5 个字符长（例如），您可以创建一个包含每个 SSN 和每个可能的 5 个字符子字符串的表。然后你可以加入匹配值而不是部分值的列。但同样，这取决于您的要求。

# jquery - 如何在另一个页面中按类名选择元素？

> ID：13615876
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:02.387
> 
> 标签：jquery

我有一个名为 site.com 的站点，我想检查它`classname`是否存在于我的其他页面[http://site.com/subfolder](http://site.com/subfolder)上，如果是，则执行代码。

```
$(document).ready(function() { 
    if ($('http://site.com/subfolder classname').length > 0) {
        $('.headline').after('<div>text</div>');
    }
}); 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:11:53.230

如果您拥有该网站，我认为您不应该这样做。

但是，如果你仍然坚持，你可以使用这些方面的东西：

```
$("<div/>").load("http://site.com/subfolder .classname", function(){
  if(this.children.length){
    $('.headline').after('<div>text</div>');
  }
}); 
```

我正在滥用[`.load()`](http://api.jquery.com/load/)页面片段加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:15:57.777

文档加载完成后，使用 jQuery 发出第二页请求，然后检查结果中的类名。以下代码段将检查类名是否出现在页面标记中的任何位置。

```
$(document).ready(function(){
    $.get('subfolder', function(data) {
        if (data.indexOf('classname') != -1){
            $('.headline').after('<div>text</div>');
        }
    });
 )}; 
```

注意 indexOf 区分大小写。如果类名出现在子文件夹中页面标记的任何位置，则此特定代码段将找到匹配项。

# ruby-on-rails - 助手类中每个块内的 content_tag

> ID：13615877
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:11.763
> 
> 标签：ruby-on-rails, erb

我想在 Rails 中创建一个视图助手，它允许如下语法：

```
<%= some_fancy_list @items do |h| %>
  <%= h.rows :class => "whatever" |item| %>
    <td><= item.id %>
  <% end %>
<% end %> 
```

我已经建立了这个效果（这是一个简化的版本）

```
def some_fancy_list(items, &block)
  h = InternalHelper.new(:items => items)
  content_tag(:table) { block.call(h) }
end

class InternalHelper
  include ActionView::Helpers::TagHelper
  include ActionView::Context

  def initialize
    ...
  end

  def rows(options = {}, &block)
    content_tag(:tbody) do
      @items.each do |item|
        content_tag(:tr, options) do
          block.call(item) if block_given?
        end
      end
    end
  end
end 
```

问题是它输出的 HTML 不是我所期望的。

```
<table>
<td>1</td>
<td>2</td>
<td>3</td>
<tbody></tbody>
</table> 
```

`<tr>`'s 完全丢失，'s 的块内容甚至`<td>`不在`<tbody>`标签内。

我在 StackOverflow 上发现了这个问题：[Loop & output content_tags within content_tag in helper](https://stackoverflow.com/questions/4669523/loop-output-content-tags-within-content-tag-in-helper)并尝试使用，`concat`但是我收到以下错误：

```
undefined method `concat' 
```

我猜这与丢失的上下文有关，`.each`但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:31:41.233

问题似乎在于使用了最初调用视图助手上下文之外的另一个类。该解决方案涉及删除 Content 和 TextHelper 的包含，然后在类上创建一个代理方法，该方法链接回调用该类的上下文。

```
# self is passed into the helper class:
h = InternalHelper.new(self, :items => items)

# then the helper class makes a proxy back to that parent instance
class InternalHelper
  # removed these:
  # include ActionView::Helpers::TagHelper
  # include ActionView::Context

  # added this:
  def content_tag(*args, &block)
    @parent.content_tag(*args, &block)
  end
end 
```

这基本上使它可以`content_tag`从相同的上下文中调用，就好像它在视图助手中一样，并且它以这样一种方式进行，即在`InternalHelper`类上实现功能时它变得不可见。

# php - xpath - 在框架内抓取数据

> ID：13615878
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:12.117
> 
> 标签：php, iframe, xpath, screen-scraping

我以前做过网络抓取，但从来没有这么复杂。我想在 iframe 中获取参数值。

示例代码：

```
 <iframe width="100%" scrolling="no" height="320px" frameborder="0" src="http://carriers.993low.com/fqoyJxxS.php">
  <object id="player" width="100%" height="100%" type="application/x-shockwave-flash" data="http://merhad.333low.com/player.swf" bgcolor="#000000" name="player" tabindex="0">
      <param name="allowfullscreen" value="true">
      <param name="allowscriptaccess" value="always">
      <param name="seamlesstabbing" value="true">
      <param name="wmode" value="opaque">
      <param name="flashvars" value="http://merhad.333low.com/fqoyJxxS-2c2MSx-wGYmS3T1pkggIeiK7wpA7BbXXcK2sC4XYWehpBDV6CAK7CFH/s=awcmxqt5gYntLqHJ9ceP.flv">
    </object>
  </iframe> 
```

我想用 xpath 返回对象内部的参数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T02:01:21.473

nodeValue 不可用于属性。尝试：

```
$xpath2->query("//iframe/object/param[@name='flashvars']/@value")->item(0)->value; 
```

或者

```
$xpath2->query("//iframe/object/param[@name='flashvars']")->item(0)->getAttribute('value'); 
```

# cordova-2.0.0 - Cordova 2.2 iOS ChildBrowser 插件将不起作用

> ID：13615880
> 
> 赞同：1
> 
> 时间：2012-11-28T22:54:23.073
> 
> 标签：cordova-2.0.0

我无法让 iOS 版本的 ChildBrowser 插件与 Cordova 2.2.0 一起使用。我将 ChildBrowser 插件更新到 2012 年 11 月 26 日的最新版本，它现在可以构建，但子窗口没有打开。

我有这个插件的早期版本，它在带有 xcode 4.2 的 Snow Leopard 上使用 Cordova 2.0.0 构建，但当然我需要升级到 Cordova 2.2 才能为 iOS 6 构建。我正在使用一个全新的 Cordova 2.2 项目，进入我复制了 www 文件夹并进行了适当的修改。

我正在使用最新的 childbrowser.js 文件，并且 Cordova.plist 有相应的行。

我尝试使用最新版本的插件更新旧的 xcode 4.2 项目，但它不再构建，在 ChildBrowserViewController.m 中为“UIInterfaceOrientationPortrait”提供未声明的标识符错误，与我在尝试构建 Cordova 时遇到的相同错误2.2 项目带有早期版本的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:23:05.250

除了 .h 和 .m 文件之外，不要忘记将 ChildBrowserViewController.xib 添加到 Plugins 文件夹中，方法是将文件从 Finder 拖到 XCode 中。

# emacs - 禁用行远端的小箭头

> ID：13615882
> 
> 赞同：1
> 
> 时间：2012-11-28T22:54:33.207
> 
> 标签：emacs

在 Emacs (GTK) 上，如果我有一个无法显示整行的狭缝窗口，它将显示一些小箭头，指示右侧有更多文本。

我怎样才能禁用那些小箭头？

（我要删除的小箭头截图[http://i.imgur.com/Sfa17.png](http://i.imgur.com/Sfa17.png)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:25:54.707

请参阅 Emacs 手册中的“ [Fringes](http://www.gnu.org/software/emacs/manual/html_node/emacs/Fringes.html) ”，或键入`M-x set-fringe-style RET no-fringes RET`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:15:37.190

基本上你需要调整变量的值`fringe-indicator-alist`。查看其默认值`C-h v fringe-indicator-alist`并删除您不想看到的指标。

另一个更简单的解决方案是关闭`visual-line-mode`（这会导致显示三角形）。将此添加到您的初始化文件中应该可以解决问题：

```
(visual-line-mode -1) 
```

# regex - 正则表达式（perl）将匹配（全局）一个或多个出现在行首之外的空格

> ID：13615884
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:41.850
> 
> 标签：regex, perl

我的理解是，`/[^\A] +/mg`它将匹配全局的一个或多个空格，而不是在字符串的开头或换行符之后。

显然，我错了。

```
#!/usr/bin/env perl
use strict;
use warnings;

my $str = "         word1     word2\n     word3     word4     word5\n";
print "str before = $str\n";
$str =~ s/[^\A] +/ /mg;
print "str after  = $str\n"; 
```

输出：

```
str before =          word1     word2
     word3     word4     word5

str after  =  word word2 word word word5 
```

所需的输出是：

```
str before =          word1     word2
     word3     word4     word5

str after  =          word1 word2
     word3 word4 word5 
```

因此，在数量上保留了前导空格，但在每行开头之后出现的多个空格被减少为一个空格。

`perldoc perlretut`我没有找到我正在寻找的东西`perldoc perlre`（即使在搜索了 "[^" with 的所有实例之后`/\[\^`）。提前谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T00:19:05.400

在 Perl 中，最简单的解决方案是：`s/\S\K +/ /g;`

请参阅**[此演示](http://ideone.com/D8ICiE)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T22:56:42.030

我认为您不能`\A`在字符类中使用，因为它不是字符。不过，您可以使用两个负面的前瞻：

```
$str =~ s/(?<!^)(?<! ) +/ /mg; 
```

这确保了比赛既不能在一行的开头也不能在另一个空格之后开始。后一个条件很重要，否则如果您在一行的开头有多个空格，则正则表达式只会从第二个开始匹配。

顺便说一句，为了提高在正则表达式中使用文字空格字符时的可读性，一个巧妙的技巧是将它们包装在一个字符类中：

```
$str =~ s/(?<!^)(?<![ ])[ ]+/ /mg; 
```

[工作演示。](http://ideone.com/jYID9o)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T00:03:56.947

正如[m.buettner](https://stackoverflow.com/users/1633117/m-buettner)所说，正则表达式`[...]`是一个*字符类*，只包含字符，而不包含模式。实际上，您的代码会生成警告

```
Unrecognized escape \A in character class 
```

但是不在行首的一串空格是一串空格，前面有一个非空格，所以你需要写的就是这个。

```
use strict;
use warnings;

my $str = "         word1     word2\n     word3     word4     word5\n";

print qq(String before = "$str"\n);

$str =~ s/[^ ]\K +/ /g;

print qq(String after = "$str"\n); 
```

**输出**

```
String before = "         word1     word2
     word3     word4     word5
"
String after = "  word1 word2
 word3 word4 word5
" 
```

# asp.net-mvc - HtmlHelperExtensions 在视图 mvc3 asp.net 中不可见

> ID：13615885
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:43.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3, html-helper

我为 HTML 自定义扩展添加了一个类：

```
using System;
using System.Linq.Expressions;
using System.Text;
using System.Web.Mvc;
using System.Web.Mvc.Html;

namespace App.MvcHtmlHelpers    
{
public static class HtmlHelperExtensions
{

    public static MvcHtmlString ComboBox(HtmlHelper html, string name, SelectList items, string selectedValue)
    {
        var sb = new StringBuilder();
        sb.Append(html.DropDownList(name + "_hidden", items, new { @style = "width: 200px;", @onchange = "$('input#" + name + "').val($(this).val());" }));
        sb.Append(html.TextBox(name, selectedValue, new { @style = "margin-left: -199px; width: 179px; height: 1.2em; border: 0;" }));
        return MvcHtmlString.Create(sb.ToString());
    }

    public static MvcHtmlString ComboBoxFor<TModel, TProperty>(HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression, SelectList items)
    {
        var me = (MemberExpression)expression.Body;
        var name = me.Member.Name;

        var sb = new StringBuilder();
        sb.Append(html.DropDownList(name + "_hidden", items, new { @style = "width: 200px;", @onchange = "$('input#" + name + "').val($(this).val());" }));
        sb.Append(html.TextBoxFor(expression, new { @style = "margin-left: -199px; width: 179px; height: 1.2em; border: 0;" }));
        return MvcHtmlString.Create(sb.ToString());
    } 
```

我还在我的网站网络配置中注册了它：

```
<namespaces>
<add namespace="System.Web.Helpers" /> 
<add namespace="System.Web.Mvc" />
<add namespace="System.Web.Mvc.Ajax" />        
<add namespace="System.Web.Mvc.Html" />
<add namespace="System.Web.Routing" />
<add namespace="System.Web.WebPages" />
<add namespace="App.MvcHtmlHelpers"/>
</namespaces> 
```

在我看来，我导入了命名空间：

```
<%@ Import Namespace="RSPWebApp.MvcHtmlHelpers" %> 
```

但是当我在视图中调用它时，它无法识别自定义扩展。有人可以告诉我我可能错过了什么来帮助我吗？提前非常感谢！<%:Html.ComboBoxFor(a => a.Street2, streetAddressListItems) %>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:02:09.483

您可能缺少`this`关键字：

`public static MvcHtmlString ComboBox(this HtmlHelper html, string name, SelectList items, string selectedValue)`

此外，如果在您的目录中检查您的 Web.config 是否`Views`有类似的内容：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="RSPWebApp.MvcHtmlHelper" />
      </namespaces>
    </pages>
</system.web.webPages.razor> 
```

似乎您必须在 Views 文件夹中将命名空间显式添加到 Razor 引擎本身，而不是项目 Web.config。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T22:57:21.473

您`this`在扩展方法中缺少关键字。试试这个：

```
public static MvcHtmlString ComboBox(this HtmlHelper html, string name, SelectList items, string selectedValue)
    {
        var sb = new StringBuilder();
        sb.Append(html.DropDownList(name + "_hidden", items, new { @style = "width: 200px;", @onchange = "$('input#" + name + "').val($(this).val());" }));
        sb.Append(html.TextBox(name, selectedValue, new { @style = "margin-left: -199px; width: 179px; height: 1.2em; border: 0;" }));
        return MvcHtmlString.Create(sb.ToString());
    } 
```

此外，`Import Namespace`您提供的名称似乎与您的扩展方法不同。但是，无论如何，将它们添加到`web.config`您应该已经涵盖了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:50:41.120

感谢大家的帮助。我确实在我的 HTMLHelper 类中错过了“this”关键字（它最初在我的 resharper 中出现了红色，所以我不应该一直相信它！）

我将它添加到 Views 文件夹中的 web.config 中（尽管奇怪的是它变灰了）。要回答之前的评论，我实际上是在使用 ASP.Net 视图，因为我是 MVC 新手，不想与 Razor+MVC 搏斗。

现在完美运行，谢谢！

# javascript - 从 gridview 项目单击传递 rowindex 到 javascript 函数

> ID：13615886
> 
> 赞同：0
> 
> 时间：2012-11-28T22:54:45.480
> 
> 标签：javascript, asp.net

我正在尝试使用位于 gridview 内的以下行将行索引传递给我的 javascript 函数，但我不断收到错误消息。

下面是我的代码。

```
<asp:TemplateField HeaderText="MCLID"> 
    <ItemTemplate> 
        <label style="text-decoration: underline"
         onclick="javascript:warningMessage('<%# Eval("ID") %>','<%# Eval("systempath").ToString().Replace("'",@"\'") %>','<%# Eval("root_level") %>','<%# Eval("Parentid") %>','<%# Eval(Container.DataItemIndex +1) %>');"><%#Eval("ID") %></label> 
    </ItemTemplate> 
</asp:TemplateField> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T05:36:02.583

代替：

```
onclick="javascript:warningMessage('<%# Eval("ID") %>','<%# Eval("systempath").ToString().Replace("'",@"\'") %>','<%# Eval("root_level") %>','<%# Eval("Parentid") %>','<%# Eval(Container.DataItemIndex +1) %>');" 
```

尝试使用类似的东西：

```
onclick='<%# "javascript:warningMessage('" + Eval("ID").ToString() + "'" %>' 
```

# sql - MSSQL - 左连接右表中的空值

> ID：13615887
> 
> 赞同：2
> 
> 时间：2012-11-28T22:54:50.183
> 
> 标签：sql, sql-server

我有两个表，tblClient 和 tblBill，它们在 cltID 上连接。tblClient 中的某些 cltID 在 tblBill 中没有记录。我想从 tblClient 返回所有记录并加入日期范围内的 tblBill 记录。如果他们没有 tblBill 记录，我仍然想返回该 tblClient 记录。

我在跑：

```
select *
from tblClient left outer join tblBill
on tblClient.cltID = tblBill.cltid
where tblbill.billDtm between @dtStart and @dtEnd
or tblbill.billDtm is null 
```

如果我取出 WHERE 子句，它会返回所有内容。如果我将其添加回来，它只会返回在 tblBill 中有记录的记录。

这正在杀死我，我确定我错过了一些愚蠢的东西......希望有人能帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T22:58:45.327

该条件被应用于连接的结果，而不是首先应用于表。如果您将您的条件作为 JOIN 的一部分，您会将 tblBill 记录限制为您的条件，然后连接到客户端表。

```
SELECT *
FROM   tblClient 
       LEFT JOIN tblBill
         ON tblClient.cltID = tblBill.cltid
            AND tblbill.billDtm between @dtStart and @dtEnd 
```

# java - 在 Java 小程序 AccessControlError 中加载图像

> ID：13615890
> 
> 赞同：1
> 
> 时间：2012-11-28T22:55:03.687
> 
> 标签：java, image, applet, appletviewer

我正在编写一个必须加载图像的小程序。当我通过 appletviewer 运行它时，一切正常，所以我的代码应该全部设置好。但是，当我尝试在任何浏览器中打开它时，我收到 AccessControlException 错误，说我没有读取权限。我知道这通常是因为小程序试图访问客户端计算机上的文件。我的 .Java、.class 和 .html 文件都在`C:/Java`其中，我需要加载的图像也在其中，`C:/Java/Images`所以我认为它们应该可以访问，我错了吗？有什么方法可以让我的小程序以简单的方式加载这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:10:34.003

在浏览器中运行的小程序没有从本地文件系统打开文件的权限。

您需要将图像添加到 jar 文件中，然后使用[getClass().getResource()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)或[getClass().getResourceAsStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)来加载它。

编辑：[这是一个](http://docs.oracle.com/javase/tutorial/uiswing/components/applet.html#images)展示如何在小程序中加载图像的示例。

# node.js - 如何判断 node.js 模块中有哪些功能可用

> ID：13615902
> 
> 赞同：2
> 
> 时间：2012-11-28T22:56:27.230
> 
> 标签：node.js

例如，当我下载第三方模块时：

```
npm install twitter 
```

当我创建一个对象时，我如何知道哪些函数/方法可用。例子：

```
var twitter = require('twitter'); 
```

这也适用于你通常在 node.js 中看到的“hello world webserver”

```
var http = require('http');

var server = http.createServer(function(req, res) {
  res.writeHead(200);
  res.end('Hello Http');
});
server.listen(8080); 
```

我可以在 http 模块上运行一些命令来获取函数/方法列表，例如 .createServer()

我可以四处寻找有关特定模块的在线文档，但希望有一种命令行方式可以简单地检索可用函数/方法的列表

顺便说一句......在 node.js 中他们叫什么？函数还是方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T22:59:26.657

你试过了吗？

```
var http = require('http');
console.log(http) 
```

要查看对象中的内容，还有一个名为“util”的漂亮模块：

```
var util = require('util'); 
console.log(util.inspect(http)) 
```

util.inspect 返回对象的字符串表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:12:36.843

在`node`提示符下，只需键入：

```
require('twitter') 
```

这会将模块的函数和数据成员转储到控制台。

在 node.js 中，函数和方法术语在很大程度上是可以互换的。

# python - Python/lxml：如何在 HTML 表中捕获一行？

> ID：13615911
> 
> 赞同：0
> 
> 时间：2012-11-28T22:57:07.293
> 
> 标签：python, html-table, html-parsing, lxml

对于我的股票筛选工具，我必须在脚本中从 BeautifulSoup 切换到 lxml。在我的 Python 脚本下载了我需要处理的网页后，BeautifulSoup 能够正确解析它们，但处理速度太慢。分析一只股票的资产负债表、损益表和现金流量表需要 BeautifulSoup 大约 10 秒，考虑到我的脚本有超过 5000 只股票要分析，这个速度慢得让人无法接受。

根据一些基准测试（http://www.crummy.com/2012/1/22/0），lxml 比 BeautifulSoup 快近 100 倍。因此，lxml 应该能够在 10 分钟内完成一项需要 BeautifuSoup 14 小时的工作。

如何使用 HTML 来捕获 HTML 表格中一行的内容？我的脚本已下载并需要解析的 HTML 页面示例位于[http://www.smartmoney.com/quote/FAST/?story=financials&opt=YB](http://www.smartmoney.com/quote/FAST/?story=financials&opt=YB)

使用 BeautifulSoup 解析这个 HTML 表格的源代码是：

```
 url_local = local_balancesheet (symbol_input)
    url_local = "file://" + url_local
    page = urllib2.urlopen (url_local)
    soup = BeautifulSoup (page)
    soup_line_item = soup.findAll(text=title_input)[0].parent.parent.parent
    list_output = soup_line_item.findAll('td') # List of elements 
```

如果我正在寻找现金和短期投资，title_input = "现金和短期投资"。

如何在 lxml 中执行相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:07:03.757

您可以将 lxml 解析器与 BeautifulSoup 一起使用，所以我不知道您为什么要这样做。

[http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)

```
soup = BeautifulSoup(markup, "lxml") 
```

**编辑：**这里有一些代码可以玩。这对我来说大约需要六秒钟。

```
def get_page_data(url):
    f = urllib2.urlopen(url)
    soup = BeautifulSoup(f, 'lxml')
    f.close()
    trs = soup.findAll('tr')
    data = {}
    for tr in trs:
        try:
            if tr.div.text.strip() in ('Cash & Short Term Investments', 'Property, Plant & Equipment - Gross',
                               'Total Liabilities', 'Preferred Stock (Carrying Value)'):
                data[tr.div.text] = [int(''.join(e.text.strip().split(','))) for e in tr.findAll('td')]
        except (AttributeError, ValueError):
            # headers dont have a tr tag, and thus raises AttributeError
            # 'Fiscal Year Ending in 2011' raises ValueError
            pass
    return data 
```

# html - 如何链接到我的 wordpress 目录之外的页面？

> ID：13615912
> 
> 赞同：1
> 
> 时间：2012-11-28T22:57:10.863
> 
> 标签：html, wordpress, apache

好的，所以我的主站点页面在根目录中，所以基本上是这样的：

```
/index.html
/contact.html
/blog (wordpress directory) 
```

我只希望 wordpress 管理网站的博客页面，但我希望 wordpress 页面与网站上其他页面的标题相匹配，所以我将基本标题添加到该`header.php`部分，我认为这没关系。标题内部是指向站点上其余页面的链接（例如主页、联系人等）。

从`index.html`or链接`contact.html`很容易，因为我可以链接到`blog`并且网站转到 wordpress 博客页面。

问题是当我尝试`index.html`从 wordpress 网站内部链接回来时。如果我尝试链接，它将转到`/blog/index.html`（不存在，因此出现 404 错误）。

我看了看[这里](https://codex.wordpress.org/Integrating_Wordpress_with_Your_Website)，看到了 HTML 标签：

```
<base href="http://myexample.com" /> 
```

我正在使用安装在本地 Apache 服务器上的 wordpress，所以我尝试使用`localhost`，但似乎没有做任何事情。

我可以做些什么来链接博客目录之外的链接以返回到我的正常页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T03:16:11.793

也许您是否尝试过仅链接到完整的网址？所以不是“/index.html”而是链接到“www.yoururl.com”？

# c++ - 报告一个对象正在使用多少堆栈/堆上的内存？(广发银行)

> ID：13615916
> 
> 赞同：0
> 
> 时间：2012-11-28T22:57:25.007
> 
> 标签：c++, memory, gdb, stack, heap-memory

我将如何确定一个对象正在使用的内存总量，以及堆栈中当前存在的内存百分比？堆呢？
例如，给定这个程序：

```
#include <cstdlib>
#include <vector>
#include <string>

int main(){

    //I wonder how much memory is being 
    //used on the stack/heap right now.

    std::vector<std::string> vec{"11","22","33"};

    //how about now?

    return EXIT_SUCCESS;
} 
```

如何在创建向量之前和之后查看堆栈和堆的大小？
这可以用 GDB 做到这一点吗？
该手册提供了一些关于[检查内存](http://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html#Memory)的信息，但我无法报告这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:28:33.653

如果您准备使用 GLIBC 特定功能，您可以[`mallinfo()`](https://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html#Statistics-of-Malloc)直接在程序中使用来回答问题：

```
#include <cstdlib>
#include <vector>
#include <string>
#include <iostream>
#include <malloc.h>

int main(){
    std::cout << "Using: " << mallinfo().uordblks << "\n";

    std::vector<std::string> vec{"11","22","33"};

    std::cout << "Using: " << mallinfo().uordblks << "\n";

    return EXIT_SUCCESS;
} 
```

# php - 根据属性内容选择 DOM 元素

> ID：13615922
> 
> 赞同：0
> 
> 时间：2012-11-28T22:58:02.267
> 
> 标签：php, dom, xquery, domdocument

`<a>`我的文档中有几种类型。我只想选择`<a>`其`title`属性以文本“更多数据......”开头的`<a title="more data *">`

例如，给定下面的标记，我想选择第一个和第二个`<a>`，但跳过第三个，因为`title`不以 开头`more data`，跳过第四个，因为`<a>`甚至没有标题属性。

```
<a title="more data some text" href="http://mypage.com/page.html">More</a>
<a title="more data other text" href="http://mypage.com/page.html">More</a>
<a title="not needed" href="http://mypage.com/page.html">Not needed</a>
<a href="http://mypage.com/page.html">Not needed</a> 
```

我正在使用 DOMXPath。我的查询会是什么样子？

```
$xpath = new DOMXPath($doc);
$q = $xpath->query('//a'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:01:43.327

您可以使用如下查询：

```
//a[starts-with(@title, "more data ")] 
```

它使用[**谓词**](http://www.w3.org/TR/xpath/#predicates)，使得`title`属性的值必须以指定的字符串[**开头。**](http://www.w3.org/TR/xpath/#function-starts-with)

* * *

**一个例子**

```
$doc = new DOMDocument;
$doc->loadXML('<example>
<a title="more data some text" href="http://mypage.com/page.html">More</a>
<a title="more data other text" href="http://mypage.com/page.html">More</a>
<a title="not needed" href="http://mypage.com/page.html">Not needed</a>
<a href="http://mypage.com/page.html">Not needed</a>
</example>');

$xpath = new DOMXPath($doc);
$links = $xpath->query('//a[starts-with(@title, "more data ")]');

echo "Found {$links->length} links", PHP_EOL;
foreach ($links as $link) {
    echo $link->getAttribute('href'), PHP_EOL;
} 
```

这[**是上面在线运行的示例**](http://codepad.viper-7.com/fRM5sF)。

# jquery - 使用 wrap 包裹标签提交表单

> ID：13615924
> 
> 赞同：0
> 
> 时间：2012-11-28T22:58:07.213
> 
> 标签：jquery, function, hyperlink, submit

我有一个代码，当用户选择一个复选框时，`label`它将变成一个链接来提交表单。我可以将`label`更改为链接，但是当我将链接用作提交按钮时，它只返回 URL，`#`这就是我尝试过的。

```
$('#checkbox').change(function() {
    var c = this.checked ? '#f00' : '#09f';
    $('label').css('color', c);
    var $this = $(this);
    $('label').wrap('<a href="#" id="sublink"></a>');
    $('a').link('href', '#');
});

$('#sublink').bind('click', function() {
    $('#formname').submit();
});​ 
```

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T22:59:35.107

**委托活动**

```
$('body').on('click','#sublink', function() // For jQuery > 1.7 
```

* * *

```
$('body').delegate('#sublink','click',function() // For jQuery < 1.7 
```

body 可以替换为包含锚标记的任何静态父容器。越近越好

**更新**

```
$('body').on('click','#sublink', function(e){ 
   e.preventDefault();
   $('#formname').submit();
}); 
```

# azure - Azure 服务器实例限制和命名

> ID：13615925
> 
> 赞同：1
> 
> 时间：2012-11-28T22:58:08.047
> 
> 标签：azure, azure-sql-database

我已注册 Windows Azure 的 90 天免费试用。

我还搜索了我要问的问题的问题、论坛和文章，但我在任何地方都找不到确切的答案，甚至在微软网站上也找不到。

只是简要概述了我在 Azure 上能够完成的工作。我已经能够创建一些服务器，并且在每个服务器上都放置了一个数据库。我还能够从 Windows 桌面 WPF 应用程序连接到数据库，因此连接字符串很好。

问题是当我创建服务器实例时，我无法给它一个有意义的名称。Azure 以随机数字/字符的格式为服务器分配了一个名称，例如：jk059j60ei。

所以我不确定是否在 Live Azure 帐户中，我能否将服务器实例命名为：Customer 1、Customer2、Customer3 等...？？随机数字/字符命名是否只出现在试用版中？

第二个问题是，如果我愿意，我可以拥有 500 台服务器或 1000 台服务器吗？原因是，目前我们的每个客户都有自己的本地服务器和 3 个数据库。因此，如果我们要将每个客户端迁移到 Azure，我们将需要一个单独的服务器，每个客户端都有单独的数据库，因为每个数据库都必须保留相同的名称。因此，他们软件中的每个客户端连接字符串都必须具有唯一的服务器名称（就像 SQL 服务器具有唯一的数据源或 IP 地址一样）

还有一个问题 :) 我在 Azure 门户中创建了 1 个虚拟机，但只有当我在门户中时才能远程访问它。同样，我想知道这只是试用版的限制吗？或者...在实时完整版中，我可以使用 IP 远程远程或连接到虚拟机吗？Azure 会分配公共 IP 吗？在他们分配一个内部虚拟 IP 的那一刻。

所以看下面的例子：这可能有助于使事情更清楚：

如果我们有 1000 个客户端，并且我们取消了每个客户端的物理站点服务器并将他们的数据库移动到 Azure 平台，那么使用自己的数据库创建 1000 个虚拟服务器会更好吗？或者....是否可以创建 1000 个虚拟机并在每个虚拟机上安装 MS SQL Server 并在这些虚拟机上安装数据库？鉴于每个虚拟机都可以有一个公共 IP 地址，该地址可用于连接字符串，以便我们的软件可以远程访问 VM 上的该数据库。

说得通？？

我只是无法在任何地方找到这些答案，并且非常感谢任何具有 Azure 经验的人提供的任何答案。

期待您的所有回复。

非常感谢

凯文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:13:55.793

我将尝试帮助您解决一些问题：

> 问题是当我创建服务器实例时，我无法给它一个有意义的名称。

据我所知，这将永远是随机的，到目前为止我听到的唯一理由是通过默默无闻的安全性；我认为您不希望猜测面向 Internet 的 SQL 实例名称。不过不要太担心，您仍然可以控制服务器级别和数据库级别的防火墙配置。

> 第二个问题是，如果我愿意，我可以拥有 500 台服务器或 1000 台服务器吗？

您几乎可以拥有信用卡所能承受的数量。

> 我可以使用 IP 远程远程或连接到虚拟机吗？

不是通过 IP，因为这可能会改变；如果您请求 RDP 访问，您将使用`*.cloudapp.net`dns 名称进行连接，因为端口 3389 会自动打开。这无需每次都通过门户即可工作，并由管理员用户名/密码保护。

> 所以看下面的例子

在您的示例中，您有两种选择：

*   您的每个客户端都将其数据库驻留在 SQL Azure 中。SSMS + 门户管理（可能是您最好的选择）[阅读更多](http://msdn.microsoft.com/en-us/library/windowsazure/ee336279.aspx)
*   您的每个客户端都有自己的安装了 SQL 的自我管理 VM。这在很大程度上与我上面对虚拟机的评论有关。SSMS + RDP

这两个选项仍然允许您从管理角度连接到数据库，无论是 RDP 还是 SSMS。

# mkmapview - 在 MKCircleView 上接收触摸事件

> ID：13615926
> 
> 赞同：1
> 
> 时间：2012-11-28T22:58:10.390
> 
> 标签：mkmapview, mkoverlay, touch-event

我正在尝试编写一个应用程序，用户可以在其中单击具有多个叠加层（所有相同类型）的地图上的 MKCircleView 叠加层。根据用户单击的覆盖层，应显示特定消息。

我的第一种方法是在 mapView:viewForOverlay: 提供的 mapView 中添加一个 UITapGestureRecognizer：但这不起作用。

然后我将 MKCircleView 子类化并实现了以下方法：

```
//subclassed to handle event when touches are received
- (void) actionWhenClicked {
    UIAlertView *a =[[UIAlertView alloc] initWithTitle:@"It worked!"
                                               message:@"yeah"
                                              delegate:nil
                                     cancelButtonTitle:@"OK"
                                     otherButtonTitles: nil];
    [a show];
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
    [self actionWhenClicked];

}

- (void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
    [self actionWhenClicked];

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    [self actionWhenClicked];

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];
    [self actionWhenClicked];

} 
```

地图上的每个叠加层都是上述子类的一个实例，因此应在触摸时做出响应。但是这些方法永远不会被调用。我在它起作用的 UIView 上尝试了相同的方法。但是，它不适用于带有叠加层的地图。

有任何想法吗？

# c# - .NET PropertyInfos 的平等

> ID：13615927
> 
> 赞同：9
> 
> 时间：2012-11-28T22:58:10.510
> 
> 标签：c#, .net, reflection, propertyinfo

我有一些将 2 个 PropertyInfos 与 Equals() 进行比较的代码。虽然这通常似乎可行，但我遇到了一种奇怪的情况，即同一基础属性的两个反射属性信息对象不相等：

```
PropertyInfo prop1, prop2; // both are public and not static
Console.WriteLine(prop1 == prop2); // false ???
Console.WriteLine(Equals(prop1, prop2)); // false ???
Console.WriteLine(prop1.DeclaringType == prop2.DeclaringType); // true
Console.WriteLine(prop1.ReturnType == prop2.ReturnType); // true
Console.WriteLine(prop1.Name == prop2.Name); // true
Console.WriteLine(prop1.DeclaringType.GetProperties().Contains(prop1)); // true
Console.WriteLine(prop2.DeclaringType.GetProperties().Contains(prop2)); // false ??? 
```

看起来 PropertyInfo 实际上并没有实现 Equals()，但我认为 .NET 缓存了反射成员，以便始终返回相同的实例。你肯定会一直看到 a.GetType() == b.GetType() 。这不是 PropertyInfos 的情况吗？

其他一些注意事项： - 在 .NET 4、VS2012、x86 构建目标中运行 NUnit 测试时发生了这种奇怪现象 - 我们以这种方式比较的所有属性甚至都不会发生这种情况，但它在一个属性上始终失败。

谁能解释这种行为？

编辑：如果有人感兴趣，这里是我写的比较 MemberInfos 的 EqualityComparison 函数：

```
public class MemberEqualityComparer : EqualityComparer<MemberInfo> {
    public override bool Equals(MemberInfo @this, MemberInfo that) {
        if (@this == that) { return true; }
        if (@this == null || that == null) { return false; }

                        // handles everything except for generics
                    if (@this.MetadataToken != that.MetadataToken
                        || !Equals(@this.Module, that.Module)
                        || this.Equals(@this.DeclaringType, that.DeclaringType))
                    {
                        return false;
                    }

                    bool areEqual;
                    switch (@this.MemberType)
                    {
                        // constructors and methods can be generic independent of their types,
                        // so they are equal if they're generic arguments are equal
                        case MemberTypes.Constructor:
                        case MemberTypes.Method:
                            var thisMethod = @this as MethodBase;
                            var thatMethod = that as MethodBase;
                                                areEqual = thisMethod.GetGenericArguments().SequenceEqual(thatMethod.GetGenericArguments(), 
this);
                            break;
                        // properties, events, and fields cannot be generic independent of their types,
                        // so if we've reached this point without bailing out we just return true.
                        case MemberTypes.Property:
                        case MemberTypes.Event:
                        case MemberTypes.Field:
                            areEqual = true;
                            break;
                        // the system guarantees reference equality for types, so if we've reached this point
                        // without returning true the two are not equal
                        case MemberTypes.TypeInfo:
                        case MemberTypes.NestedType:
                            areEqual = false;
                            break;
                        default:
                            throw new NotImplementedException(@this.MemberType.ToString());
    }

    public override int GetHashCode(MemberInfo memberInfo) {
        if (memberInfo == null) { return 0; }

    var hash = @this.MetadataToken 
        ^ @this.Module.GetHashCode() 
        ^ this.GetHashCode(@this.DeclaringType);
    return hash;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T23:42:15.203

对象标识只承诺用于 Type 类，而不用于其他反射类。比较相等性的一种*可能*合理的方法是检查属性是否具有相同的元数据标记并且来自同一模块。所以试试这个：

```
bool equal = prop1.MetadataToken == prop2.MetadataToken &&
             prop1.Module.Equals(prop2.Module); 
```

只要 ecma 335 适用，这是有道理的。由于您没有发布它，因此我无法针对您的代码进行测试。所以就试试吧。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-28T23:06:16.753

我猜他们有不同的`ReflectedType`. 例如继承：

```
class A {
   public int Foo {get;set;}
}
class B : A {} 
```

现在看看`typeof(A).GetProperty("Foo")`和`typeof(B).GetProperty("Foo")`。

# scala - 如何使用 2d GUI (nifty-gui) 正确渲染 3d 对象？

> ID：13615931
> 
> 赞同：4
> 
> 时间：2012-11-28T22:58:36.427
> 
> 标签：scala, opengl, 3d, lwjgl, nifty-gui

我有这个代码：[https](https://github.com/magicgoose/lwjgl-nifty-test-project) ://github.com/magicgoose/lwjgl-nifty-test-project 当我只渲染 GUI 时，它会像预期的那样工作。当我尝试渲染三角形（在透视投影中）然后渲染 GUI 时，一切都失败了，甚至 GUI 也无法正确渲染——我只得到黑色背景上的字母。（如果我 `draw_something()`在方法中取消注释语句，就会发生这种情况`display(...)`）

```
private def draw_something() {
    glTranslatef(0, 0, -20)
    glBegin(GL_TRIANGLES)
    glVertex3f(0.0f, 1.0f, 0.0f)
    glVertex3f(-1.0f, -1.0f, 0.0f)
    glVertex3f(1.0f, -1.0f, 0.0f)
    glEnd()
} 
```

我做错了什么？我尝试在背景上搜索带有漂亮 gui 和 3d 图形的工作示例，但没有运气。

## 更新 1

我已经根据 datenwolf 的回答更改了代码，现在 GUI 渲染正常，但我只能在几毫秒内看到白色三角形（实际上它可能在一个帧中？），似乎 3d 设置正在“损坏” ...仅当我渲染 GUI 时才会发生这种情况，如果我注释 line `gui.render(false)`，白色三角形会留在屏幕上。

## 更新 2

我在 3d 部分添加了一些动作（请参阅存储库中的更新），现在我可以看到三角形几乎不可见（看起来像 z 战斗）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T00:25:33.410

您必须在正交投影和透视投影之间切换。为此，准备了两个函数：（`display_ready2d`设置正射投影矩阵）和`display_ready3d`（设置透视投影）。

不幸的是 display_ready3d 函数在应用它的更改之前不会重置矩阵堆栈。您必须在调用 gluPerspective 之前添加 glLoadIdentity。此外，您不应清除这些函数中的帧缓冲区，因为您希望能够在矩阵设置之间切换。所以把它改成这样：

```
private def display_ready3d(fov: Float, aspect: Float) {
    glMatrixMode(GL_PROJECTION)
            glLoadIdentity();
    gluPerspective(fov, aspect, 0.01f, 100.0f)

    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()

    glEnable(GL_DEPTH_TEST)
} 
```

绘制 GUI 之前的 display_ready2d 和 draw_something 之前的 display_ready3d。此外，您必须将清除命令放在那里，这也需要覆盖深度缓冲区；透明色的 alpha 值也应为 1（除非您创建了透明窗口）。

```
def display(width: Int, height: Int, AR: Float, gui: Nifty) {
            glViewport(0, 0, width, height)
            glClearDepth(1.)
            glClearColor(0., 0., 0., 1.)
            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

    display_ready3d(90, width/height)
    draw_something()

    display_ready2d(width, height)
    gui.render(false)

    glFlush()
    Display.update()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T08:59:28.780

我在我的一个项目中使用以下代码来实现这一点。datenwolf 解决方案的主要区别在于，您不必在每次从 GUI 模式切换回时设置 3D 透视图。就我而言，我有一个相当复杂的 3D 透视设置，因此，依靠这种推/弹出矩阵方法更方便。

如果您在 3D 模式中启用了闪电，您可能还需要考虑为 GUI 模式关闭闪电，以确保 GUI 颜色不受灯光的影响。

```
def enableOrthoView(winW: Int, winH: Int) {   
  glMatrixMode(GL_PROJECTION)                 // Select projection
  glPushMatrix()                              // Push the matrix
  glLoadIdentity()                            // Reset the matrix
  glOrtho(0, winW, winH, 0, -1, 1)            // Select ortho mode
  glMatrixMode(GL_MODELVIEW)                  // Select Modelview matrix
  glPushMatrix()                              // Push the Matrix
  glLoadIdentity()                            // Reset the Matrix
  glDisable(GL_DEPTH_TEST)                    // Cure z-fighting
  glDisable(GL_LIGHTING)                      // Ensure unaffected colors
}

def disableOrthoView() {
  glMatrixMode(GL_PROJECTION)                 // Select projection
  glPopMatrix()                               // Pop the matrix
  glMatrixMode(GL_MODELVIEW)                  // Select Modelview
  glPopMatrix()                               // Pop the matrix
  glEnable(GL_DEPTH_TEST)    
  glEnable(GL_LIGHTING)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:31:23.743

我找到了闪烁/消失的 3D 图形问题的根源。在 OpenGL 中，如果在不提供纹理的情况下绘制几何图形，则必须禁用纹理，所以我写了

`glDisable(GL_TEXTURE_2D)`

最后，`display_ready3d(...)`现在一切都在做它必须做的事情。我在这里阅读另一个相关问题的答案时意外地意识到了这个失败：[https](https://gamedev.stackexchange.com/questions/44437/lwjgl-mixing-2d-and-3d) ://gamedev.stackexchange.com/questions/44437/lwjgl-mixing-2d-and-3d 还要感谢`datenwolf`and `bluenote10`，您的帮助非常宝贵。

# http - HTTP REST 如何在最终 URL 未知时创建新资源

> ID：13615935
> 
> 赞同：2
> 
> 时间：2012-11-28T22:58:45.677
> 
> 标签：http, rest

我正在指定一个带有可以查看、创建、编辑或删除的资源的休息系统。我试图尊重 rest 和 http 方法语义。

如果资源由[http://mydomain.org/oid_bar](http://mydomain.org/oid_bar)标识，我可以使用以下方法对其进行管理： - PUT 创建或更新此资源 - DELETE 删除此资源 - GET 返回此资源

但是，如果您需要创建一个您还不知道 oid 的新资源，您将如何进行？当您将对象添加到数据库并且主键由数据库自动生成时，这种情况非常常见。就我而言，我的后端是一个数据库。

我想到了一个带有资源[http://mydomain.org/next_free_oid](http://mydomain.org/next_free_oid)的解决方案，它返回下一个空闲 oid 并增加它的值。此资源只会响应 POST 请求。使用返回的 oid，我可以向目标 URL 发送 PUT 请求。

另一种解决方案是向[http://mydomain.org/](http://mydomain.org/)发送 POST 请求。该请求将创建一个具有生成的 oid 的资源并返回该 oid。

先前解决方案的一个变体是将 POST 请求发送到[http://mydomain.org/create_object](http://mydomain.org/create_object)

第三种解决方案是我的首选。但是将 URL 用作服务是否符合 HTTP/REST？

欢迎每条评论。

问候， 米凯尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:05:49.717

约定是对[http://mydomain.org/的 POST](http://mydomain.org/)

然后，您应该返回状态代码 201 Created，并将响应的位置标头设置为指向新创建的资源。

我正在尝试找到一些链接来支持自己...

编辑：如果您愿意，您也可以选择返回新创建的资源，但设置位置标头仍然是一个好主意。

试试下面的链接，虽然很难只见树木不见森林：

[http://jcalcote.wordpress.com/2008/10/16/put-or-post-the-rest-of-the-story/](http://jcalcote.wordpress.com/2008/10/16/put-or-post-the-rest-of-the-story/)

我个人建议获取 RESTful Web Services Cookbook，因为它非常简单轻松地解释了事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:20:33.493

此外，不要铸造带有动词的 URI，例如`http://mydomain.org/create_object`- 您的 URI 应该代表一个名词，例如编辑表单，而不是表示“在此处发送数据以执行此操作”的动词。对于您的动词，选择适当的 HTTP 方法。[ [RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.1) ]

# emacs - GNU Emacs 中的前向段落

> ID：13615936
> 
> 赞同：2
> 
> 时间：2012-11-28T22:58:52.930
> 
> 标签：emacs, elisp

我正在阅读 Robert J. Chassell 的“ [An Introduction to Programming in Emacs Lisp](http://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/index.html) ”。我有一个问题。在节点“ [fwd-para while](http://www.gnu.org/software/emacs/emacs-lisp-intro/html_node/fwd_002dpara-while.html#fwd_002dpara-while) ”（`while`循环的解释`forward-paragraph`）中，它说：

> 有趣的是，在我们离开段落之间的空间之前，循环计数不会减少，除非我们到达缓冲区的末尾或停止查看段落分隔符的本地值。

看不懂，谁能给我解释一下？谢谢。

`while`循环如下所示：

```
;; going forwards and not at the end of the buffer
(while (and (> arg 0) (not (eobp)))

  ;; between paragraphs
  ;; Move forward over separator lines...
  (while (and (not (eobp))
              (progn (move-to-left-margin) (not (eobp)))
              (looking-at parsep))
    (forward-line 1))
  ;;  This decrements the loop
  (unless (eobp) (setq arg (1- arg)))
  ;; ... and one more line.
  (forward-line 1)

  (if fill-prefix-regexp
      ;; There is a fill prefix; it overrides parstart;
      ;; we go forward line by line
      (while (and (not (eobp))
                  (progn (move-to-left-margin) (not (eobp)))
                  (not (looking-at parsep))
                  (looking-at fill-prefix-regexp))
        (forward-line 1))

    ;; There is no fill prefix;
    ;; we go forward character by character
    (while (and (re-search-forward sp-parstart nil 1)
                (progn (setq start (match-beginning 0))
                       (goto-char start)
                       (not (eobp)))
                (progn (move-to-left-margin)
                       (not (looking-at parsep)))
                (or (not (looking-at parstart))
                    (and use-hard-newlines
                         (not (get-text-property (1- start) 'hard)))))
      (forward-char 1))

    ;; and if there is no fill prefix and if we are not at the end,
    ;;     go to whatever was found in the regular expression search
    ;;     for sp-parstart
    (if (< (point) (point-max))
        (goto-char start)))) 
```

感谢您的编辑和回答。关于前段，我还有另外三个问题：

1.  是什么意思`(progn (move-to-left-margin) (not (eobp)))`？如果`(not (eobp))`是真的，不应该`(progn (move-to-left-margin) (not (eobp)))`总是真的吗？

2.  关于这一行：

    ```
    ;; ... and one more line.
    (forward-line 1) 
    ```

    为什么要多转一行？

3.  关于本段：

    > 这个`while`循环让我们向前搜索“sp-parstart”，它是可能的空白与段落开头或段落分隔符的本地值的组合。

    为什么`the local value of the start of a paragraph or of a paragraph separator`呢？就我而言，段落分隔符的条件已经`while`在`while`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:15:37.527

没*那么*有趣！如果您查看文档字符串，`forward-paragraph`您会看到它：

> 返回要移动的段落数。

这意味着如果您距离缓冲区末尾的一个段落，并且 evaluate `(forward-paragraph 3)`，它将返回`2`，这意味着它前进了一个段落，但您请求的其余两个步骤无法执行。

为了返回未采取的步骤数，`forward-paragraph`返回（就在您引用的代码块之后） value `arg`。因此，只有在实际前进一段`arg`时才必须递减。`forward-paragraph`我相信你可以弄清楚其余的。

（如果您想知道返回值在哪里使用，这是`fill-paragraph`为了避免在缓冲区末尾填充不存在的段落。）

ETA：我看到你添加了三个新问题。我不会回答它们，而是告诉您如何尝试自己回答它们，方法是使用[Emacs Lisp 调试器](http://www.gnu.org/software/emacs/manual/html_node/elisp/Debugging.html)逐步检查代码`forward-paragraph`并查看它实际在做什么。

1.  `forward-paragraph`通过键入`C-h C-f forward-paragraph RET`然后单击`*Help*`缓冲区中的链接来查找源代码。

2.  通过运行命令重新编译`forward-paragraph`以进行调试`eval-defun`，例如键入`C-M-x`.

3.  `forward-paragraph`通过键入打开调试`M-x debug-on-entry RET forward-paragraph RET`。

4.  转到合适的缓冲区并运行`forward-paragraph`，例如键入`M-}`.

5.  现在您在调试器中，它向您显示调用堆栈和正在评估的当前表单。您可以键入`d`进入该表单并查看其子表单的评估，或`c`完全评估该表单并查看其结果，然后`q`退出调试器。（有关更多调试器命令，请参阅[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Debugger-Commands.html#Debugger-Commands)。）

6.  逐步执行，`forward-paragraph`直到您了解它在做什么。

# java - Java将字符串拆分为单词逗号和句号

> ID：13615939
> 
> 赞同：5
> 
> 时间：2012-11-28T22:59:15.717
> 
> 标签：java, regex, split

我一直在使用`myString.split("\\s+");`来获取每个单词。但现在我也想拆分逗号和句号。例如：

> 妈妈总是说生活就像一盒巧克力，你永远不知道你会得到什么。

到：

```
{Mama, always, said, life, was, like, a, box, of, chocolates ,,, You, never, know, what, you're, gonna, get,.,} 
```

怎么做呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T23:05:11.217

如果逗号和句点后面总是跟着空格或字符串结尾，那么你可以这样写：

```
myString.split("(?=[,.])|\\s+"); 
```

如果它们不是并且您希望例如`a,b`被分成三个字符串，那么：

```
myString.split("(?<=[,.])|(?=[,.])|\\s+"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T23:04:51.557

您也可以在点和逗号之前使用[前瞻来拆分：](http://www.regular-expressions.info/lookaround.html)

```
myString.split("\\s+|(?=[,.])"); 
```

前瞻不包含在实际匹配中，因此实际字符（逗号或句点）将最终出现在结果数组中。

# python - 分割字符串的最佳方法

> ID：13615940
> 
> 赞同：1
> 
> 时间：2012-11-28T22:59:18.850
> 
> 标签：python, string, list, split, list-comprehension

我有一个包含名字和姓氏的列表，如下所示：

```
names = ["John Smith", "Rob Julian", "Eric Walls"] 
```

我只想获取此列表中的名字。

我通过这样做实现了这一点：

```
first_names = [n.split(" ")[0] for n in names] 
```

这给了我想要的结果。

但在我看来这很丑陋，有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:04:11.260

是的，但不是真的。性能方面，你最好用你所拥有的。

```
first_names = []
for n in names:
    first_names.append(n.split()[0]) 
```

会工作，但我喜欢python中的列表理解。我的意思是有什么问题

```
first_names = [n.split()[0] for n in names] 
```

为了好玩，您还可以执行以下操作。我想如果你正在处理一个非常大的列表，这可能会有最好的性能。但是，您可能想先调查一下。

```
first = lambda n : n.split()[0]
first_names = [first(name) for name in names] 
```

为了使其全面，您还可以使用 lambda 对其进行映射。

```
first = lambda n : n.split()[0]
first_names = map(first,names) 
```

根据评论，我正在添加另一种方式

```
from operator import itemgetter
first_names = map(itemgetter(0), map(str.split, names)) 
```

### 总之，是的，还有其他方法可以做到这一点。

但您的原件似乎是最受欢迎的。如果速度是一个问题，您可能需要修补其他问题。

### 随时间更新

不是最科学的，但是使用大约 350 万个名称的列表，我运行上面调用文件 n0-4 并运行`time n0;time n1; time n2; time n3; time n4` 这里是我的结果。看起来好像原始列表理解是我机器上最快的。

```
real    0m8.433s
user    0m7.064s
sys     0m1.288s

real    0m8.213s
user    0m6.852s
sys     0m1.300s

real    0m8.581s
user    0m7.240s
sys     0m1.264s

real    0m8.374s
user    0m7.164s
sys     0m1.140s

real    0m11.890s
user    0m10.101s
sys     0m1.672s 
```

（我以不同的顺序运行了几次，时间是一致的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:15:02.350

我认为最好的性能是使用匿名函数和`map`函数：

```
first = lambda n : n.split()[0]

first_names = map(first,names) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T23:02:18.037

我认为你的方法很棒，但是

```
first_names = [n.split()[0] for n in names] 
```

有点厉害。

读[这个](http://docs.python.org/2/library/stdtypes.html#str.split)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T23:15:25.047

我不会说它*更好*，但这是另一种方法：

```
>>> names = ["John Smith", "Rob Julian", "Eric Walls"]
>>> first = lambda x:x.split()[0]
>>> map(first, names)
['John', 'Rob', 'Eric'] 
```

# java - 如何创建字符串数组并将其链接到成绩数组

> ID：13615948
> 
> 赞同：4
> 
> 时间：2012-11-28T22:59:40.613
> 
> 标签：java, arrays, string, hyperlink

我有一个项目需要创建 2 个数组，一个用于保存学生姓名，一个用于保存学生分数。用户输入数组的大小，数组需要使用 BubbleSort 进行排序（将高分放在顶部）。我已经开始了这个项目，为分数创建了第一个数组，我已经成功地完成了冒泡排序并对成绩进行了排序。现在我不知道如何为 Names 创建一个数组，一旦我这样做了，我如何使 names 数组对应于 Grades 数组 BubbleSort？

这是我到目前为止的代码。

```
import java.util.Scanner;

public class Grades {

public static void main(String[]args){

{
Scanner GradeIn = new Scanner(System.in);
Scanner NameIn = new Scanner(System.in);
System.out.print( "How many students are there? " );
int[]GradeArray = new int[GradeIn.nextInt()];
String[]nameArray = new String[GradeIn.nextInt()];

for( int i=0 ; i<GradeArray.length ; i++ ) 
{
System.out.print( "Enter Grade for Student " + (i+1) + ": " );
GradeArray[i] = GradeIn.nextInt();
System.out.print( "Enter Name of Student " + (i+1) + ": " );
nameArray[i] = NameIn.nextLine();
}

bubbleSort(GradeArray, nameArray);

for( int i : GradeArray ) System.out.println( i );
System.out.println();

}
}

private static void bubbleSort(int[]GradeArray, String[] nameArray){

int n = GradeArray.length;
int temp = 0;
String temp2;

for(int i=0; i<n; i++){
 for(int j=1; j<(n-i);j++){

  if(GradeArray[j-1]<GradeArray[j]){
   //swap
   temp=GradeArray[j-1];
   GradeArray[j-1]=GradeArray[j];
   GradeArray[j]=temp;

    temp2=nameArray[j-1];
    nameArray[j=1]=nameArray[j];
    nameArray[j]=temp2;

   }
  }
 }
}
} 
```

另外，如何将成绩更改为双倍？我从 Int 开始，当我尝试将所有内容更改为 double 时，我收到一条错误消息，提示“Found Double，expected Int”。

教授的要求：编写一个程序，提示用户输入学生人数、学生姓名和分数，并根据分数按降序打印姓名。

附加信息：

你将需要两个射线。一个用来拉弦的。另一个用来保存学生的分数。（双打）

数组的大小将由用户输入。

您必须在 main() 方法中对数组进行排序。我建议使用 BubbleSort (http://www.java-examples.com/java-bubble-sort-example) 但不要作为单独的方法。提示：在对成绩数组进行排序时，您需要根据成绩对姓名数组进行排序。

最后，您应该包含一个方法 (void printAnswer(String [] names)) 来在排序后打印出名称数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:06:15.813

制作自定义对象。这就是面向对象编程的全部思想。你没有**名字**和**等级**，你有一个`Student`有名字和等级的人。然后你以任何你认为合适的方式操纵学生。

```
public class Student {
    private String name;
    private int grade;

    public Student(String name, int grade) {
        this.name = name;
        this.grade = grade;
    }

    public String getName() {
        return name;
    }
    public int getGrade() {
        return grade;
    }
} 
```

那么你在哪里

```
int[]GradeArray = new int[UserIn.nextInt()]; 
```

改为这样做：

```
Student[] studentArray = new Student[UserIn.nextInt()]; 
```

我将其余的更改留作练习，让您习惯它应该如何工作。不过，请记住 a`Student[]`充满，当您读取数据时，您每次`null`都必须创建 a 。`new Student(name, grade)`

* * *

# 替代解决方案

**以上是执行此操作的正确方法。不要从下面的答案中学到任何东西，因为它违背了学习 Java 的全部目的。**如果上述解决方案可以接受，我会向教授发送电子邮件。

话虽如此，当您进行每个等级交换时，您可以在数组中进行完全相同的交换`String name`，即

```
// change method signature
private static void bubbleSort(int[] gradeArray, String[] nameArray){

  int n = gradeArray.length;
  int temp = 0;
  String temp2;

  for(int i=0; i<n; i++){
    for(int j=1; j<(n-i);j++){

      if(gradeArray[j-1]<gradeArray[j]){
        //swap
        temp=gradeArray[j-1];
        gradeArray[j-1]=gradeArray[j];
        gradeArray[j]=temp;

        // New code begin
        temp2=nameArray[j-1];
        nameArray[j-1]=nameArray[j];
        nameArray[j]=temp2;
        // New code end
      }
    }
  }
} 
```

同样，**一旦您不再上学，就不要在现实世界**中这样做。它*慢*得多，而且更令人困惑。

# php - 如何在服务器上保持本地时间（使用 JS 和 PHP）？

> ID：13615951
> 
> 赞同：4
> 
> 时间：2012-11-28T22:59:55.443
> 
> 标签：php, javascript, mysql, datetime, timezone

我正在尝试制作一个像 Stackoverflow 一样的评论系统。我面临的问题是当我的服务器运行 PHP 和我的 MySQL 数据库将时间存储在不同的时区时，如何在本地时间（即 2 小时前）向用户显示他们和其他评论的时间用户。

我知道要在服务器上保留本地时间，我必须使用这样的代码（将欧洲/苏黎世换成[您在世界上的任何地方](http://ch2.php.net/manual/en/timezones.php)）：

`$myTimezone='Europe/Zurich';` [`date_default_timezone_set($myTimezone);`](https://stackoverflow.com/questions/2712708/how-to-convert-server-time-to-local-time)

我也明白要将本地时间发送`$myTimezone`到我的服务器，我需要以这样的方式使用 Javascript 获取本地时间（[改编自此处](http://www.php.net/manual/en/function.date-default-timezone-set.php#107297)）：

```
 var localDate = new Date(),
 offset= -localDate.getTimezoneOffset()/60; //can send this 'offset' variable via $.ajax to the server 
```

我的问题是，不是`date_default_timezone_set($myTimezone);`在我的每个 PHP 脚本上都写出时间（最终比评论系统更多的地方），是否可以以某种方式在我的服务器上全局设置本地时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T23:12:44.903

使用 php 通过 time() - 自纪元 [1970 年 1 月 1 日] 以来的秒数 - 函数完成所有工作。这样所有用户的时间都与服务器同步。

然后将这个时间发送给用户，并从那里有 javascript 格式：

```
var dt = new Date(time_returned_from_php * 1000); //Multiplied by 1000 since javascript uses milliseconds 
```

然后你可以使用 javascripts .toLocalString() 让用户的格式在他们的本地。

所以只是为了回答这个问题，我**不会**在服务器上保留本地时间。客户端和服务器时间不同步。PHP 做了它的事，然后 JS 进来把它纠正到本地时间。

只是为了好玩，您可以使用这个非常好的[JS 插件 timeago，](http://timeago.yarp.com/)使用熟悉的 Stackoverflow/Facebook 样式格式化时间（2 小时前......，几秒钟前，等等）

# javascript - 在firefox / chrome中的Form标签自动提交的表格中插入行

> ID：13615955
> 
> 赞同：1
> 
> 时间：2012-11-28T23:00:11.537
> 
> 标签：javascript, forms

我有一个表单，其中将插入带有 javascript 的动态元素，并且遇到了一些奇怪的行为。当我单击按钮以将另一个元素添加到表单中的表格时，它会添加该元素，但似乎会立即发布到表单中（不打算提交表单）

我创建了一个具有相同行为的页面的简化示例。第一个表格元素是在页面加载时创建的，随后的元素是在单击按钮时添加的。此表单在 IE 中成功运行。有谁知道如何防止这种行为？

这是代码示例。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test Creating Form</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <style type="text/css">
        td{font-family:verdana;}
    </style>
    <script type="text/javascript">
        var counter = 0;

        function makeTitle(title){
            if(counter){
                title += " " + counter;
            }
            counter++;
            var tbl = document.getElementById('tbl');
            var tr = tbl.insertRow(-1)
            var td1 = tr.insertCell(-1);
            td1.innerHTML = title;
        }

        function load1(){
            makeTitle('Primary Specimen');
        }
    </script>
</head>
<body onload="load1();">
    <form action="formtest.htm" method="post" name="testForm" id="testForm">
        <table id="tbl" border="1"></table>
        <button onclick="makeTitle('Alternate Specimen')" id="clone" >Add Another Specimen</button>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T23:02:18.537

按钮标签默认为`type="submit"`; 添加`type="button"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T23:03:03.097

取消点击事件`return false;`或添加`type="button"`。`<button />`没有 - 属性的A`type`默认是`submit`- 按钮。

```
<button type="button" onclick="makeTitle('Alternate Specimen')" id="clone" >Add Another Specimen</button> 
```

# grails - useOriginalMessage() 和多个“来自”节点

> ID：13615958
> 
> 赞同：2
> 
> 时间：2012-11-28T23:00:31.407
> 
> 标签：grails, groovy, apache-camel

我正在使用 Grails 路由插件，它允许使用与 Java DLS 语法非常相似的 Groovy DSL 语法定义 Camel 路由。

假设我有以下 RouteBuilder：

```
class MyRoute extends RouteBuilder {
  from('activemq:route1')
    .to('someProcessor1')
    .to('direct:route2')

  from('direct:route2')
    .to('someProcessor2')

  onException(Throwable.class).useOriginalMessage().handled(true)
    .to('activemq:route.failed')
} 
```

如果我有一条从 开始的消息`activemq:route1`，然后通过`direct:route2`但在 中失败，那么我`someProcessor2`最终会收到从队列中开始的消息......但这不是我想要的。如果我在 中失败，我希望消息从它开始（同样，如果我在 中失败，我希望消息在我的失败队列中）。`activemq:route1``activemq:route.failed``someProcessor2``direct:route2``someProcessor1``activemq:route1`

是否有任何 Apache Camel 功能允许我在 RouteDefintion （即）开头“重置”原始消息`from(<uri>)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:13:32.070

使用除了`direct:`加入你的路由（seda、vm、activemq）之外的东西，它会按照你的建议运行......否则，你也可以在标题中显式保留消息的相关状态并在 onException 子句中恢复它，等等。

# css - 使用 Modernizr 检测 -webkit-apperance

> ID：13615963
> 
> 赞同：0
> 
> 时间：2012-11-28T23:00:44.063
> 
> 标签：css, webkit, modernizr

谁能告诉我如何使用 Modernizr 检测 -webkit-appearance、moz-apperance 或外观？

我有自定义选择和使用这些属性的复选框，我需要确保其他样式不会应用于那些不支持这些属性的浏览器。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-19T09:17:38.373

只需使用[Modernizr.testProp()](http://modernizr.com/docs/#testprop)方法：

```
Modernizr.testProp('webkitAppearance'); 
```

[通过此检查，您可以使用Modernizr.addTest()](http://modernizr.com/docs/#addtest)编写自己的 Modernizr 测试：

```
Modernizr.addTest('webkit-appearance', function() {
    return Modernizr.testProp('webkitAppearance');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T22:25:34.800

我很确定 Modernizr 还没有包含这个功能的检测程序——它太新了。

但是，由于它是一个 CSS 属性，您应该能够自己相当简单地检测到它，而无需调用modernizr。

[本页](http://lea.verou.me/2009/02/check-if-a-css-property-is-supported/)详细介绍了如何快速检查以检测 CSS 属性是否可用。

只需检查该属性是否存在于`style`任何给定 DOM 元素的属性中。如果支持该属性，它将在 DOM 中，即使它实际上没有设置为任何内容。

希望有帮助。

# java - 无法解析导入 org.apache.cordova

> ID：13615964
> 
> 赞同：23
> 
> 时间：2012-11-28T23:00:45.140
> 
> 标签：java, eclipse, cordova

出于某种原因，在阅读了 Phonegap 的非包容性说明（它甚至没有提到设置 ANT，或者对 Ant 和 JDK 的头痛）之后，这根本不起作用：

```
package com.HealthTrustSoftware.AndroidTemplate3;

import android.app.Activity;
import android.os.Bundle;
import org.apache.cordova.*;

public class AndroidTemplate3 extends DroidGap
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

它给出了 5 个错误，引用了 org.apache.cordova 无法解决的事实。我完全确定此时该做什么。请帮忙。这是在尝试使 sdk 工作并最终能够在 eclipse 中打开一个项目之后的 3 小时。按照他们文档上的步骤操作后，除非我能弄清楚，否则我浪费了 3 个小时。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-29T09:30:26.647

我刚刚遇到了同样的问题。按照[这里](https://stackoverflow.com/a/13399662/413785)写的，我终于让它工作了。

从[phonegap github 页面](https://github.com/phonegap/phonegap/zipball/2.2.0)下载 cordova 后，您会在 lib/android 文件夹中找到 cordova-2.2.0.jar 和 cordova-2.2.0.js。运行“./create ...”后，将cordova-2.2.0.jar 复制到您的项目libs 文件夹中，并将cordova-2.2.0.js 复制到您的www 文件夹中。然后将项目导入eclipse，它应该可以工作。

我必须转到“项目-> 属性-> Android”并选择一个较新的SDK（我选择了列表中最新的SDK），然后运行“项目-> 清理”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T10:34:45.247

除了从 phonegapp 下载复制 cordova-2.2.0.jar 到项目的 libs 文件夹之外，我还必须手动将它添加到项目库中。

**过程：**项目 -> 属性 -> Java 构建路径 -> 库 -> 添加 JAR... 然后从项目本身中选择库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T22:00:11.147

我最初使用上面发布的解决方案之一解决了这个问题：关于从 github 下载 phonegap 并将 cordova-2.2.0.jar 和 cordova-2.2.0.js 文件粘贴到生成的目录中。

在摆弄路径和环境变量之后，这些文件在运行“create " 命令行上的命令。

我正在使用与 Eclipse 捆绑在一起的 ANT，因此我的 PATH 变量包括：

**C:\Program Files\Eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730\bin;**

我为 ANT_HOME 添加了一个环境变量： **C:\Program Files\Eclipse\plugins\org.apache.ant_1.8.3.v20120321-1730**

我测试了将 \bin 添加或删除到 ANT_HOME 的 PATH 和环境变量中，这是成功的组合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-12T10:02:46.730

运行`cordova -d build`。如果它说“无法找到 tools.jar”，请修复它。然后通过运行完全重建应用程序`cordova platform rm android`。还要从 eclispe 中删除该项目。然后通过运行`cordova platform add android`+重新创建应用程序`cordova build`。最后再次在eclipse中添加项目。

`org.apache.cordova`现在应该包括在内，一切都应该正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-03T23:34:04.780

用一些矿工更改替换您的标题，如下所示

```
 import com.google.android.gcm.GCMRegistrar;
import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaInterface;
import org.apache.cordova.api.CordovaPlugin; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-20T11:27:53.423

Android 工作室：文件-> 使缓存无效/重新启动。为我工作...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T00:27:42.530

入门指南中的第 4 步是唯一特定于 phonegap 的部分。剩下的就是搭建一个通用的android开发环境。代替 eclipse 经典，从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)获取 ADT 包- 其中包括 eclipse 的自定义版本，大部分 android 东西都准备好了。

到cordova-2.2.0.jar的默认链接对我来说很好用，尽管确实需要一些努力才能确定如果你想使用自定义构建的cordova，它需要设置为android库依赖项项目属性。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-28T23:02:32.590

下载[apache cordova](http://incubator.apache.org/cordova/#download) jar 并将其添加到 lib 文件夹和类路径中。

# ios - 在 iOS 中使用共享对象文件（.so 文件）

> ID：13615973
> 
> 赞同：5
> 
> 时间：2012-11-28T23:01:49.367
> 
> 标签：ios, shared-objects

我得到了一个共享对象文件 (.so) 和其中的函数，但我不知道如何使用它，或者更改它以在 iOS 应用程序中使用。有人能指出我正确的方向吗？

我知道 .so 来自 Android 应用程序，但有人告诉我我也可以让它在 iOS 应用程序中工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T23:09:35.123

实际上，从技术上讲，***是的，你可以，***但不是你想的那样。

如果它来自 Android，它可能是为 ARM 编译的。所以它应该与 iOS 设备中的 ARM CPU 二进制兼容。但是，iOS 并没有使用通常的共享对象格式（即 ELF 格式），而是 iOS 和 OS X 自己的 Mach-O 格式。

这意味着您不能直接链接到此共享对象文件，也不能将其直接传递给`dlopen()`and `dlsym()`。您必须进行认真的黑客攻击（您可能不知道）。这涉及正确加载和重新定位文件。

这方面的一个例子可以在 iOS 越狱开发者和黑客[Comex 的 GitHub 存储库 Frash](https://github.com/comex/frash/tree/master/food)中找到，这是一个用于越狱 iOS 设备的 Flash 播放器。Comex 实质上为 iOS 编写了一个 ELF 加载器模块（称为“食物”），并使用它使 Android 的 libflashplayer.so 在 iOS 上运行。很整洁吧？

另请注意，这对于 AppStore 应用程序来说是不可能的，因为它需要动态加载和操作系统中的各种更改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T23:49:09.773

虽然在技术上可行（见 h2co3 的回答），但对于任何实际情况，答案是否定的

*   所以文件不是正确的二进制格式
*   即使是这样，appstore 也不允许动态加载

# lua - LUA 的缩写代表什么？

> ID：13615975
> 
> 赞同：9
> 
> 时间：2012-11-28T23:02:05.357
> 
> 标签：lua

当提到自 1993 年以来在*里约热内卢天主教大学*(PUC-Rio)开发的编程语言时，许多人编写**LUA 。**

 *那么这个首字母缩略词代表什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-28T23:02:05.357

编程语言被命名为**Lua**，它正式**不是**首字母缩写词。

*Lua*是葡萄牙语中的一个常用词，意思是*月亮*。该语言之所以这样命名，是因为 PUC 以前的一种编程语言（处于早期开发阶段）已经被命名为*SOL*，即*Simple Object Language*。而且由于*SOL在葡萄牙语中是**Sun*的意思，所以它的继任者被取名为*Lua*。

Lua 社区发明了一个有趣的 backronym 来讽刺地解释 Lua 不是首字母缩略词：LUA 代表*Lua Uppercase Accident*。

然而，从历史上看，LUA*曾经*是葡萄牙语的首字母缩写词。它曾经意味着*Linguagem para Usuarios de Aplicação*（应用程序用户语言）。然而，该首字母缩略词从未在英文文档中使用，因为非葡萄牙语人士很难理解它。

* * *

另一方面，不幸的是，微软使用 LUA 首字母缩写词来指代*Least privileged User Account*。这个概念与编程语言无关，但会造成一定的混乱。*

# encryption - 在客户端加密时如何处理 Key 和 Salt？

> ID：13615982
> 
> 赞同：0
> 
> 时间：2012-11-28T23:02:18.510
> 
> 标签：encryption

我正在加密一些需要保留在客户端上的数据，Salt、Key 和 IV 也是如此。是否有在客户端处理这些数据的标准方法，以防止人们发现它并加密您的数据？

我可以想出很多东西来掩盖它们，但必须有一种行业标准的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:46:34.583

如果 IV 和盐是已知的，则没有额外的安全风险。[IV](https://stackoverflow.com/questions/3436864/sending-iv-along-with-cipher-text-safe/3436997#3436997)可以安全地储存在透明的环境中，盐有助于[防止预计算和彩虹表](https://stackoverflow.com/questions/213380/the-necessity-of-hiding-the-salt-for-a-hash)。

所以你真的只是在谈论钥匙。有几个解决方案，每个都有自己的权衡。在您的问题中，您只提到您需要加密客户端上的数据。客户端不需要解密吗？

*   如果这是 Windows 客户端，您可以使用[数据保护 API](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)来保护用户凭据下的密钥。

*   使用密码保护密钥。如果您不介意每次客户端需要密钥时输入密码，这可以提供合理的保护，并且在大多数密码系统（如 OpenPGP）中都支持。

*   如果客户端只需要加密，您可以使用带有公钥的混合方法（如 OpenPGP）。在这种情况下，您只需将公钥存储在客户端上，而将私钥存储在安全的地方。加密数据时，您将生成一个随机对称密钥，并在客户端的公钥下对其进行加密。现在，如果有人破坏了机器，他们将无法解密任何会话密钥。

*   使用专用硬件，如[硬件安全模块](http://en.wikipedia.org/wiki/Hardware_security_module)或智能卡。这是最昂贵的路线，但取决于您的威胁模型可能是可行的。

# complexity-theory - 类别等价的复杂性

> ID：13615988
> 
> 赞同：2
> 
> 时间：2012-11-28T23:03:07.840
> 
> 标签：complexity-theory, category-theory

我试图找到有限呈现类别的等价问题的计算复杂性的特征。

给定两个类别 C 和 D，等价是两个函子 F : C -> D 和 G : D -> C 和两个自然同构 FG -> I_D 和 I_C -> GF，其中 I_C : C -> C 和 I_D : D -> D 是 C 和 D 上的恒等函子。

等价问题是确定两个有限呈现类别是否存在等价。这个问题是不可判定的，但我希望它仍然是递归可枚举或协递归可枚举的。任何帮助将不胜感激。

[https://en.wikipedia.org/wiki/Equivalence_of_categories](https://en.wikipedia.org/wiki/Equivalence_of_categories)

[https://en.wikipedia.org/wiki/Finite_presentation](https://en.wikipedia.org/wiki/Finite_presentation)

# android - 在操作栏选项卡中添加页眉和页脚

> ID：13615990
> 
> 赞同：0
> 
> 时间：2012-11-28T23:03:14.130
> 
> 标签：android, tabs, android-actionbar

大家好，我目前正在工作的视图需要在操作栏的选项卡上方有一个视图，或者更像是在操作栏本身下方，以及选项卡之间的固定页脚。

但是除了在每个片段中添加页脚以及在选项卡下方添加我想要的视图之外，我还没有找到一种方法来实现这种行为。

有没有办法使用操作栏放置页眉（上方）和页脚（下方）选项卡？

PD。我正在使用 Sherlock 操作栏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:15:50.013

操作栏和操作栏选项卡之间有什么东西？AFAIK 这是不可能的。ABS 仅用于前 HC 版本。在 ICS+ 上，使用默认的 ActionBar。因此，即使您可以自定义 ABS 操作栏，您也很可能无法覆盖 ICS+ 上的默认操作栏。

# directory - 如何使用 cmake“安装目录”指令保留文件权限？

> ID：13615995
> 
> 赞同：9
> 
> 时间：2012-11-28T23:03:32.130
> 
> 标签：directory, installation, cmake, file-permissions, preserve

***Prolog**：我是个白痴，因为在文档中错过了这个*

cmake-2.8.10.2

安装目录时如何让cmake保留原始文件权限？对于手头的项目，我希望它基本上将一些目录从我的源代码树复制到安装树。以机智：

```
install(
  DIRECTORY config runp
  DESTINATION ${CMAKE_INSTALL_PREFIX}
  PATTERN ".svn" EXCLUDE
  PATTERN ".git" EXCLUDE
  PATTERN "start_collection.snl" EXCLUDE
) 
```

一切都按预期工作——除了可执行脚本被复制时文件权限不正确。事实上，**没有**保留任何原始文件权限。使用 FILE_PERMISSIONS 和 DIRECTORY_PERMISSIONS 全局设置权限是我不想做的事情，坦率地说，在这种情况下，这将是一个 hack。

在 shell 脚本世界中，我会做这样简单的事情：

```
for i in config runp ; do
  tar cf - $i | tar -C $CMAKE_INSTALL_PREFIX -xf -
done 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T10:43:51.760

文档建议`USE_SOURCE_PERMISSIONS`在调用时使用`install()`：

```
install(
  DIRECTORY config runp
  DESTINATION ${CMAKE_INSTALL_PREFIX}
  USE_SOURCE_PERMISSIONS
  PATTERN ".svn" EXCLUDE
  PATTERN ".git" EXCLUDE
  PATTERN "start_collection.snl" EXCLUDE
) 
```

或者，您可以使用`install(PROGRAMS`此命令的签名。[有关更多信息，请参阅文档](http://cmake.org/cmake/help/v2.8.10/cmake.html#command:install)。

# matlab - 用于填充甜甜圈的MATLAB函数

> ID：13615997
> 
> 赞同：0
> 
> 时间：2012-11-28T23:03:39.790
> 
> 标签：matlab, octave

是否有用于填充甜甜圈的精美 MATLAB 函数？我在将甜甜圈与附近的垃圾合并的以下两个功能时遇到问题。

```
 image = bwmorph(image,'close');
 image = bwmorph(image,'dilate'); 
```

![在此处输入图像描述](../Images/e4f452026ba7355c15ecc3dc347b8741.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:09:28.417

充满`imfill`。鉴于您的二进制图像被称为`m`ry

```
locations= sub2ind(size(m), 100, 80);
m2 = imfill(m,locations); 
```

![在此处输入图像描述](../Images/c12d2cddada40726797e24cd1b01306b.png)

好胃口

# c - #define 语法解决方案

> ID：13615999
> 
> 赞同：1
> 
> 时间：2012-11-28T23:03:40.010
> 
> 标签：c, syntax, c-preprocessor

我已经定义了以下，当然不正确...

```
#define SET_PIN_MODE_INPUT(DREG, PORT, PIN) (DREG &= ~_BV(PIN), PORT &= ~_BV(PIN))
#define LED_CLOCK_PIN (DDRB, PORTB, PB3) 
```

我想像这样使用它们：

```
SET_PIN_MODE_INPUT(LED_CLOCK_PIN) 
```

所以我需要**C**语法方面的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T23:06:36.763

需要间接：

```
#define SET_PIN_MODE_INPUT_(DREG, PORT, PIN) (DREG &= ~_BV(PIN), PORT &= ~_BV(PIN))
#define SET_PIN_MODE_INPUT(ARGS) SET_PIN_MODE_INPUT_ ARGS

// Note that this is an object-like macro
#define LED_CLOCK_PIN /**/ (DDRB, PORTB, PB3) 
```

使用当前的宏，您将单个参数传递给`SET_PIN_MODE_INPUT`，这需要三个参数。

此解决方案使用间接来使用替换列表`LED_CLOCK_PIN`作为调用 real 的参数列表`SET_PIN_MODE_INPUT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T23:11:33.210

您可能希望将它们定义为头文件中的静态内联函数，而不是定义。通过这种方式，您将获得类型检查，并且您不会因为预处理器而冒着发生意外事情的风险。

编译器将内联它们。