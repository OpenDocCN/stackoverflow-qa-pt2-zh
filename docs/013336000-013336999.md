# StackOverflow 问答 13336000-13336999

# ios - 如何创建一个简单的 AVPlayer 流媒体应用程序？

> ID：13336006
> 
> 赞同：2
> 
> 时间：2012-11-11T22:13:54.513
> 
> 标签：ios, iphone, ios4, avplayer

如何创建一个使用 AVPlayer 流式传输互联网广播的简单 iPhone 应用程序？我遵循了 IOS 开发人员指南中的这个文档（[https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html](https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/02_Playback.html)），但是我没有得到结果。附上我的 .h 和 .m 文件。

```
#import "Bbcradio.h"
#import <AVFoundation/AVFoundation.h>

@implementation Bbcradio

- (IBAction)play:sender {
    [player play];
}

self.player = [AVPlayer playerWithURL:@"http://bbc.co.uk/radio/listen/live/r1.asx"];
[player addObserver:self forKeyPath:@"status" options:0 context:&PlayerStatusContext];

@end 
```

* * *

```
#import <UIKit/UIKit.h>

@class AVPlayerLayer;

@interface Bbcradio : UIView {

}

@property (nonatomic, readonly) AVPlayerLayer *playerLayer;

-(IBAction)play;

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T00:41:13.843

您正在尝试以 iOS 不支持的格式播放音频流。该 URL 是最终重定向到 Windows Media 流的[ASX 。](http://en.wikipedia.org/wiki/Advanced_Stream_Redirector)AVPlayer 不会播放，因为 iOS 没有内置对 Windows Media 的支持（并且可能也无法处理 ASX）。查看[Apple 支持的音频格式列表，](https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/CoreAudioOverview/SupportedAudioFormatsMacOSX/SupportedAudioFormatsMacOSX.html)了解 AVPlayer 可以处理的详细信息。

# asp.net-mvc-3 - mvc3动态报告

> ID：13336007
> 
> 赞同：0
> 
> 时间：2012-11-11T22:13:58.247
> 
> 标签：asp.net-mvc-3, razor

使用 MVC3 和 razor 以及 NuGet Doddle Report，我构建了一个很好的报告，可以在 Excel 中打开一个视图模型。我想允许用户在将报告导出到 Excel 之前提供过滤器并对视图进行排序。是否有推荐的方法或我可以查看的资源？

谢谢！

编辑

创建报告的控制器代码：

```
public ReportResult CaseReport()
        {
        var viewModel = new CasesReportViewModel();

        var query = (from c in db.Cases
                     join customer in db.Customers on c.CustomerID equals customer.CustomerID
                     join category in db.CaseCategories on c.CaseCategoryID equals category.CaseCategoryID
                     join tech in db.Technicians on c.TechnicianID equals tech.TechnicianID
                     join engine in db.EngineModels on c.EngineModelID equals engine.EngineModelID
                     select new CasesReportViewModel()
                        {
                            CustomerName = c.Customer.CustomerName,
                            UserName = c.UserName,
                            PromoID = tech.PromoID,
                            EngineModelName = engine.EngineModelName,
                            CaseNumber = c.CaseNumber,
                            BMSWorkorder = c.BMSWorkorder,
                            CaseStatus = c.CaseStatus,
                            OpenedBy = c.OpenedBy,
                            OpenedDate = c.OpenedDate,
                            ClosedBy = c.ClosedBy,
                            ClosedDate = c.ClosedDate,
                            CategoryName = category.CategoryName,
                            CallerFirstName = c.CallerFirstName,
                            CallerLastName = c.CallerLastName,
                            AdditionalContact = c.AdditionalContact,
                            Qualified = c.Qualified,
                            Description = c.Description,
                            ESN = c.ESN,
                            Mileage = c.Mileage,
                            DateInService = c.DateInService,
                            ESTR = c.ESTR,
                            EDS = c.EDS
                        });

        var report = new Report(query.ToReportSource());

        //customize fields
        report.TextFields.Title = "Case Report";
        AppHelpers app = new AppHelpers();
        report.TextFields.Header = "Report Date = " + Convert.ToString(app.GetEasternTime());
        report.TextFields.Footer = "Copyright 2012";

        //data fields
        report.RenderHints.BooleanCheckboxes = true;

        report.DataFields["CustomerName"].DataFormatString = "{0:c}";
        report.DataFields["UserName"].DataFormatString = "{0:c}";
        report.DataFields["EngineModelName"].DataFormatString = "{0:c}";
        report.DataFields["CaseNumber"].DataFormatString = "{0:c}";
        report.DataFields["BMSWorkorder"].DataFormatString = "{0:c}";
        report.DataFields["CategoryName"].DataFormatString = "{0:c}";
        report.DataFields["CaseStatus"].DataFormatString = "{0:c}";
        report.DataFields["OpenedBy"].DataFormatString = "{0:c}";
        report.DataFields["OpenedDate"].DataFormatString = "{0:d}";
        report.DataFields["ClosedBy"].DataFormatString = "{0:c}";
        report.DataFields["ClosedDate"].DataFormatString = "{0:d}";
        report.DataFields["CallerFirstName"].DataFormatString = "{0:c}";
        report.DataFields["CallerLastName"].DataFormatString = "{0:c}";
        report.DataFields["AdditionalContact"].DataFormatString = "{0:c}";
        report.DataFields["Qualified"].DataFormatString = "{0:c}";
        report.DataFields["Description"].DataFormatString = "{0:c}";
        report.DataFields["ESN"].DataFormatString = "{0:c}";
        report.DataFields["Mileage"].DataFormatString = "{0:c}";
        report.DataFields["DateInService"].DataFormatString = "{0:d}";
        report.DataFields["ESTR"].DataFormatString = "{0:c}";
        report.DataFields["EDS"].DataFormatString = "{0:c}";

        return new ReportResult(report, new ExcelReportWriter(), "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") { FileName = "CaseReport" };

        } 
```

# c# - ListBox在拖出控件时删除元素

> ID：13336015
> 
> 赞同：0
> 
> 时间：2012-11-11T22:15:24.703
> 
> 标签：c#, wpf, drag-and-drop, listbox, styles

我正在使用列表框在控件中拖放元素，以便用户可以订购它们。我能够实现它，但问题是，我不希望用户将元素拖放到列表框之外。目前，如果你这样做，它会从列表框项目中删除元素。

这是我的代码：

```
 <telerik:RadListBox x:Name="SequenceListBox" x:FieldModifier="public"
                        DockPanel.Dock="Bottom" AllowDrop="True"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        ScrollViewer.VerticalScrollBarVisibility="Hidden"
                        ScrollViewer.HorizontalScrollBarVisibility="Auto"
                        Background="Transparent" Margin="30,5,30,5"
                        ItemTemplate="{DynamicResource ListBoxItemTemplate}">
        <telerik:RadListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center"/>
            </ItemsPanelTemplate>
        </telerik:RadListBox.ItemsPanel>
        <telerik:RadListBox.DragVisualProvider>
            <telerik:ScreenshotDragVisualProvider />
        </telerik:RadListBox.DragVisualProvider>
        <telerik:RadListBox.DragDropBehavior>
            <telerik:ListBoxDragDropBehavior AllowReorder="True" />
        </telerik:RadListBox.DragDropBehavior>
    </telerik:RadListBox>

        <!-- Sequence ListBox style start -->
    <DataTemplate x:Key="ListBoxItemTemplate">
        <DataTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="true">
                <Setter Property="LayoutTransform">
                    <Setter.Value>
                        <ScaleTransform ScaleX="1.5" />
                    </Setter.Value>
                </Setter>
            </Trigger>
        </DataTemplate.Triggers>
        <!--<Border BorderThickness="1" BorderBrush="Wheat">-->
        <TextBlock Text="{Binding Path=AttributeName}" MinWidth="30" Foreground="Black"
                   FontSize="12" FontFamily="Segoe UI" ToolTip="Drag and Drop to re-arrange"
                   VerticalAlignment="Center" HorizontalAlignment="Center" />
        <!--</Border>-->
    </DataTemplate> 
```

我的问题类似于：[this](https://stackoverflow.com/q/8127407/640607)，但我仍然不清楚如何实现它。请帮我解决。

另外，当用户尝试删除它时，我想突出显示（用某种颜色）两个元素之间的边界，但我不确定如何实现这一点。

如何修改我的代码，以便列表框在将项目放在控件之外时不会删除它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:10:09.853

我自己没有这样做，但你可以看看`DragDrop.PreviewDragLeave`。当鼠标将元素拖出控件边界时，将触发此事件。

一旦确定需要取消拖动，则需要设置一些可以读取的类级变量`DragDrop.QueryContinueHandler`。可悲的是，您无法在 PreviewDragLeave 中取消拖动，因为 eventArgs 不支持它。

```
bool shouldICancelDrag = false

void listBox1_PreviewDragLeave(object sender, DragEventArgs e)
{
   shouldICancelDrag = true; 
}

private void OnQueryContinueDrag(object sender, QueryContinueDragEventArgs e)
{
   if(shouldICancelDrag)
   {
       e.Action = DragAction.Cancel;
       e.Handled = true;
       shouldICancelDrag = false;
   }
} 
```

编辑：对于您希望允许他们将项目拖到列表框之外但不允许他们将项目拖放到外部的情况（这意味着他们必须将项目返回到列表框或拖动事件将被取消），这是一种替代方法。

```
bool shouldICancelDrag = false

//changed this to be previewDrop on the Window (not the listbox)
void window1_PreviewDrop(object sender, DragEventArgs e)
{
   //check if the item was dropped on something other than the listbox
   //you may need to toy with using e.Source instead (break and see what you're getting via the debugger)
   if (! (e.OriginalSource is ListBox))
     shouldICancelDrag = true; 
}

private void OnQueryContinueDrag(object sender, QueryContinueDragEventArgs e)
{
   if(shouldICancelDrag)
   {
       e.Action = DragAction.Cancel;
       e.Handled = true;
       shouldICancelDrag = false;
   }
} 
```

# php - facebook 喜欢按钮跟踪

> ID：13336016
> 
> 赞同：1
> 
> 时间：2012-11-11T22:15:25.540
> 
> 标签：php, facebook-like

我想将 facebook 的“喜欢”按钮集成到我的网站上，并且我已经成功地做到了。我在一个网页中有多篇文章，并且在每篇文章下都添加了一个“喜欢”按钮。现在我想检索不同网页中每个按钮的点赞数。是否可以在声明“喜欢”按钮时指定一个 id，然后使用相同的 id 来检索来自 facebook 的点击次数。有人可以向我解释这是如何工作的吗？如果可能，请提供代码示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:08:39.700

您可以使用 FQL 来询问点赞数

在您的代码中，您可以使用如下内容：

```
$query='SELECT normalized_url,comment_count,like_count,total_count FROM link_stat WHERE url IN ("http://yourwebsite.com/articles/1","http://yourwebsite.com/articles/2")';
$url = "http://graph.facebook.com/fql?q=".urlencode($query);
$data = json_decode(file_get_contents($url),true); //better use curl 
```

并且您拥有和数组，其中包含来自您的网址的 comments_count 和 likes_counts，例如：

[facebook.com 和 google.com 统计信息的 FQL](http://graph.facebook.com/fql?q=SELECT%20normalized_url,comment_count,like_count,total_count%20FROM%20link_stat%20WHERE%20url%20IN%20%28%22http://www.facebook.com%22,%22http://www.google.com%22%29)

**参考**

[https://developers.facebook.com/docs/reference/fql/link_stat/](https://developers.facebook.com/docs/reference/fql/link_stat/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:24:56.007

阅读[Facebook for Websites](https://developers.facebook.com/docs/guides/web/)，它会告诉您有关在您的网站中使用类似插件的所有信息。

# javascript - 在 JavaScript 中获取曲线结果集而不是角度（需要数学帮助）

> ID：13336019
> 
> 赞同：0
> 
> 时间：2012-11-11T22:15:34.807
> 
> 标签：javascript, math, trigonometry, easing

我有一个脚本，它通过根据单元格与一组坐标的距离为单元格着色来创建渐变。我想要做的是使渐变圆形而不是现在的菱形。你可以在这里看到一个例子：http: [//jsbin.com/uwivev/9/edit](http://jsbin.com/uwivev/9/edit)

```
var row = 5, col = 5, total_rows = 20, total_cols = 20;

$('table td').each(function(index, item) {

    // Current row and column        
    var current_row = $(item).parent().index(), 
        current_col = $(item).index();

    // Percentage based on location, always using positive numbers
    var percentage_row = Math.abs(current_row-row)/total_rows;
    var percentage_col = Math.abs(current_col-col)/total_cols;

    // I'm thinking this is what I need to change to achieve the curve I'm after
    var percentage = (percentage_col+percentage_row)/2;

    $(this).find('div').fadeTo(0,percentage*3);

}); 
```

如果你能给我提供正确的数学函数来获得我所追求的曲线，那就太好了！谢谢！

达伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:23:01.157

您可以使用距离公式的平方：

((current_row - row)*(current_row - row) + (current_col - col)*(current_col - col))

然后将它乘以您需要的任何比例因子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:33:22.487

这是我在很多个月前用 Pascal 编写的圆形绘图程序，您可以将其用作伪代码来了解如何为 (X,Y) 半径处的像素着色并按自己的方式进行操作。多个缩小的圆圈应覆盖整个区域你需要。该代码还为您提供了访问半径的公式。

```
 PROCEDURE DrawCircle(X,Y,Radius:Integer);
 VAR A,B,Z:LongInt;
 BEGIN
  Z:=Round(Sqrt(Sqr(LongInt(Radius))/2));
  FOR A:=Z TO Radius DO
   FOR B:=0 TO Z DO
     IF Radius=Round(Sqrt(A*A+B*B)) THEN
      BEGIN
       PutPixel(X+A,Y+B,8);
       PutPixel(X+A,Y-B,9);
       PutPixel(X-A,Y+B,10);
       PutPixel(X-A,Y-B,11);
       PutPixel(X+B,Y+A,12);
       PutPixel(X+B,Y-A,13);
       PutPixel(X-B,Y+A,14);
       PutPixel(X-B,Y-A,15);
      END;
 END; 
```

注意：“Longint()”是用于较大数值计算的编译器类型转换，所以不要让你担心。

注意：最里面的括号首先执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:49:12.390

```
// Current row and column        
var current_row = $(item).parent().index(), 
    current_col = $(item).index();

// distance away from the bright pixel
var dist = Math.sqrt(Math.pow(current_row - row, 2) + Math.pow(current_col - col, 2))

// do something with dist, you might change this
var percentage = dist / total_cols;

$(this).find('div').fadeTo(0,percentage*3); 
```

# java - 如何将point的compareTo方法编写为oneliner

> ID：13336020
> 
> 赞同：-3
> 
> 时间：2012-11-11T22:15:49.077
> 
> 标签：java

我想知道是否可以在一行中编写此方法。我需要使用 x 坐标比较 y 坐标并打破平局。

```
 // comparing y-coordinates and breaking ties by x-coordinates
    public int compareTo(Point p) {

        if (y < p.y) {
          return -1;
        }
        if (y > p.y) {
           return 1;
        }
        if (x < p.x) {
          return -1;
        }
        if (x > p.x) {
         return 1;
        }
       return 0;
    } 
```

“注意。这个问题是出于兴趣而提出的，看看是否有任何原始的开箱即用解决方案。很明显，所提出的解决方案是好的”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:18:41.907

这应该可以工作（但我不推荐它的可读性）：

```
return y < p.y ? -1 : y > p.y ? 1 : x < p.x ? -1 : x > p.x ? 1 : 0; 
```

我没有费心去检查，但我猜编译器会生成与原始代码完全相同的字节码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:19:09.330

假设你不关心返回值的大小，只关心它的符号，你可以这样做：

```
return y == p.y ? x - p.x : y - p.y; 
```

* * *

编辑：正如 Ted Hopp 指出的那样，这种方法只有在减法不溢出时才有效。如果你知道这一点`x`并且`y`总是积极的，或者它们之间的差异总是小于`Integer.MAX_VALUE`，那么你可以使用这个版本。

这是另一个适用于所有输入的替代方案：

```
return y == p.y ? ((Integer) x).compareTo(p.x) : ((Integer) y).compareTo(p.y); 
```

如果您使用的是 Java 1.7，则可以使用更简单的

```
return y == p.y ? Integer.compare(x, p.x) : Integer.compare(y, p.y); 
```

# c++ - 使用C++匹配圆括号、大括号和方括号

> ID：13336030
> 
> 赞同：2
> 
> 时间：2012-11-11T22:17:04.653
> 
> 标签：c++

我们应该使用 C++ 中的堆栈结构为我的 CS 类实现一个程序来检查给定表达式中的大括号、方括号和括号是否都匹配。不幸的是，我有点坚持这个，因为我一直告诉我有些东西不匹配，即使它最明确地匹配。这是我到目前为止得到的：

```
#include <stdlib.h>
#include <iostream>
#include <string>
#include <cstring>
using namespace std;

struct cell {int value; cell* next; };
cell* top;
int numElem;

void init()
{
    top = NULL;
    numElem = 0;
}

int pop()
{
    int res;
    if (top != NULL)
    {
        res = top -> value;
        top = top -> next;
        numElem--;
    } else {
        cout << "FAIL: Stack empty!\n";
        res = -1;
    }
    return res;
}

void push(int element)
{
    cell* cat = new cell;
    cat -> value = element;
    cat -> next = top;
    top = cat;
}

void match(char expr[])
{
    bool pass = true;
    char expected;
    char encountered;
    char closing;
    for (int i=0; pass && (i<strlen(expr)); i++)
    {
        if ((i==40)||(i==91)||(i==123))
            push(i);
        else 
        {
            if (i==41)
                expected = 40;
            if (i==93)
                expected = 91;
            if (i==125)
                expected = 123;
            encountered = pop();
            if (expected != encountered)
                closing = i;
                pass = false;
        }
    }
    if (pass)
        cout << "Parentheses match OK!\n";
    else
        cout << encountered << " has opened, but closing " << closing;
        cout << " encountered!\nParentheses do not match\n";
}

int main(int argc, char * argv[])
{
    init();
    match(argv[1]);
    return 0;
} 
```

由于堆栈框架存在于先前的练习中并且在那里运行良好，我强烈假设应该存在任何错误`void match`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:19:04.033

```
else
    cout << encountered << " has opened, but closing " << closing;
    cout << " encountered!\nParentheses do not match\n"; 
```

第二行总是打印。它应该是

```
else
{
    cout << encountered << " has opened, but closing " << closing;
    cout << " encountered!\nParentheses do not match\n";
} 
```

还

```
if (expected != encountered)
            closing = i;
            pass = false; 
```

也应该是

```
if (expected != encountered)
{
            closing = i;
            pass = false;
} 
```

你来自python吗？缩进不会影响 C++ 中的逻辑，它只会影响可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:23:33.400

在您的匹配功能中，您应该测试字符，而不是它们的索引：

```
void match(char expr[])
{
...
    for (int i=0; pass && (i<strlen(expr)); i++)
    {
        char c = expr[i]; // use this c instead of i below!!!!!!!
        if ((c==40)||(c==91)||(c==123))
            push(c);
        else 
        {
            if (c==41)
                expected = 40;
            if (c==93)
                expected = 91;
            if (c==125)
... 
```

您也没有在推送中更新计数器：

```
void push(int element)
{
...
   ++numElems; // Was missing!!!!
} 
```

# java - 用于在 android 中处理位图图像的 OpenCV

> ID：13336032
> 
> 赞同：0
> 
> 时间：2012-11-11T22:17:32.087
> 
> 标签：java, android, image, opencv, image-processing

我已经使用 OPENCV for android 在动态相机视图中进行斑点检测。我想对设备 SD 卡中存在的静态位图图像执行类似的功能。我尝试使用*int android.graphics.Bitmap.getPixel(int x, int y)*，但效率不高。需要很多时间来处理。所以，我想知道是否可以使用openCV在位图图像中进行斑点检测？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T12:10:43.667

您不应该直接在位图上进行处理，因为它会更慢。最好将位图转换为opencv Mat结构，对Mat进行处理，然后再转换回位图。

要使用 opencv 检测 blob，最好的工具是[Imgproc.findContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)如果您搜索，您会发现很多关于 findContours 的内容。

要将位图转换为 mat 转换：

*   位图到垫：[Utils.bitmapToMap](http://docs.opencv.org/java/org/opencv/android/Utils.html#bitmapToMat%28android.graphics.Bitmap,%20org.opencv.core.Mat%29)
*   垫到位图：[Utils.matToBitmap](http://docs.opencv.org/java/org/opencv/android/Utils.html#matToBitmap%28org.opencv.core.Mat,%20android.graphics.Bitmap%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:40:50.037

而不是使用 Bitmap.getPixel(x,y)，您应该真正考虑将所有像素放入一个数组并以这种方式处理它。

```
Bitmap b=BitmapFactor.decodeFromFile("");
int[] pixels=new int[b.getWidth()*b.getHeight()];
bitmap.getPixels(pixels, 0, b.getWidth(), 0, 0, b.getWidth(), b.getHeight());
for(int x=0;x<w;x++){
    for(int y=0;y<h;y++){
       int pixel=pixels[y*b.getWidth()+x];
       // do something with that pixel
    }
}
bitmap.setPixels(pixels, 0, b.getWidth(), 0, 0, b.getWidth(), b.getHeight()); 
```

# sockets - 如何从服务器获取客户端的端口号？

> ID：13336036
> 
> 赞同：0
> 
> 时间：2012-11-11T22:18:12.797
> 
> 标签：sockets, client-server, port

我编写了一个简单的客户端-服务器程序。我可以在客户端程序中打印客户端的端口号。这些值是动态的。

但是当我尝试在服务器程序中打印它时，它给了我服务器的端口号而不是客户端。

```
connfd = accept(listenfd, (struct sockaddr*) &cliaddr, &clilen);

cout<<"Server: Server's Port: "<< ntohs(servaddr.sin_port)<<endl; /*23112*/
cout<<"Server: Client's Port: "<< ntohs(cliaddr.sin_port)<<endl; /*23112*/ 
```

我在客户端程序中使用相同的，它正在正确打印随机端口。我以这种方式初始化它们：

```
struct sockaddr_in cliaddr, servaddr;
socklen_t clilen = sizeof(cliaddr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:36:35.603

您需要初始化“clilen”：

> addrlen 参数是一个值结果参数：调用者必须将其初始化为包含 addr 指向的结构的大小（以字节为单位）；返回时它将包含对等地址的实际大小。

# android - 自定义列表适配器不显示图片

> ID：13336037
> 
> 赞同：1
> 
> 时间：2012-11-11T22:18:17.727
> 
> 标签：android, xml, layout, android-arrayadapter, custom-lists

编辑：我删除了我的异常信息。在@Sam 的帮助下，我能够使用修复项目属性并且应用程序不再强制关闭我。但是，将布局从 image textview 重新排列到 textview image 会导致它不显示图像。有谁知道为什么？所有代码都可以在这里找到[http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

> 我正在尝试遵循本教程 [http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)我已发布所有内容。我将其用于更复杂的布局。我试图改变一些非常简单的东西。我将图像从左向右移动。

前

```
<ImageView android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" />

 <TextView android:id="@+id/txtTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:textStyle="bold"
    android:textSize="22dp"
    android:textColor="#000000"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" /> 
```

后

```
 <TextView android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:textStyle="bold"
        android:textSize="22dp"
        android:textColor="#000000"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" />

     <ImageView android:id="@+id/imgIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:23:34.353

我有类似的问题，虽然有不同的组件。

什么对我有用，不知道为什么要重新排列 xml 文件。将其置于 含义`ImageView`之前，`TextView`

```
 <ImageView android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" />

<TextView android:id="@+id/txtTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:textStyle="bold"
    android:textSize="22dp"
    android:textColor="#000000"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:42:08.900

你不应该做

```
row = inflater.inflate(layoutResourceId, parent, false); 
```

但

```
row = inflater.inflate(layoutResourceId, null, false); 
```

这可能是原因。由于这个原因，我已经得到了例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:40:44.733

这没有任何意义！

*   尝试清理您的项目：**项目**- >**清理...**
*   或者使用Android**工具中的****修复属性**

 **此外，您的 ImageView 和 TextView 位于彼此之上，您可能希望将`android:layout_width="wrap_content"`和添加`android:layout_weight="5"`到 TextView 和`android:layout_weight="1"`ImageView。... :)**

# objective-c - 公众未看到 Facebook 提要帖子 - ios sdk

> ID：13336043
> 
> 赞同：0
> 
> 时间：2012-11-11T22:19:09.337
> 
> 标签：objective-c, facebook

我正在使用 facebook ios sdk 3.1。在 ios 6 中，集成没有问题，因为它使用本机对话框。在 ios 5.1 中，我实现了使用提要对话框的回退。该帖子显示在用户的时间线中，但未出现在朋友的新闻源中。我已将 Facebook 应用程序的设置调整为“公开”，但问题仍然存在。

```
- (void) publishUsingFeedDialog {
    if (_facebook == nil) {
        _facebook = [[Facebook alloc]
                     initWithAppId:FBSession.activeSession.appID
                     andDelegate:nil];
        // Store the Facebook session information
        _facebook.accessToken = FBSession.activeSession.accessToken;
        _facebook.expirationDate = FBSession.activeSession.expirationDate;
    }

    // @"Facebook SDK for iOS", @"name",
    // @"Build great social apps and get more installs.", @"caption",
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"My test with app", @"name",
                               [self getDescription], @"description",
                               @"http://www.test.com", @"link",
                               @"http://www.test.com/logo.gif", @"picture",
                               nil];

    // Invoke the dialog
    [_facebook dialog:@"feed" andParams:params andDelegate:(id)self];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:00:38.217

我意识到我没有包含任何标题信息：@“我的标题”，@“标题”。即使我仍然可以毫无问题地发布，但 Facebook 算法有时会将其隐藏起来。

# python - 我应该如何调用该函数？

> ID：13336044
> 
> 赞同：1
> 
> 时间：2012-11-11T22:19:14.027
> 
> 标签：python

我写了一个程序，告诉你骑士的动作（国际象棋）。例如，如果我想知道所有可能的动作，我会输入：

`possibilites("F4")`结果我得到`['D3', 'D5', 'E2', 'E6', 'G2', 'G6', 'H3', 'H5']`了，好的，我做到了，接下来，我必须编写一个函数，在其中输入两个字段，如果这些字段是合法的，你会得到 True，如果不是，你会得到假（我不得不使用以前的功能）。例如：

```
legal("F4","D3")
>>>True 
```

代码：

```
def legal(field1,field2):
  c=possibilities(field1)
  if field1 and field2 in a:
     return True

  return False 
```

我必须编写以下函数时遇到问题：我必须输入骑士的路径，并且我的函数必须告诉我它是否是合法路径，我必须使用前一个函数。

例如：

```
>>> legal_way(["F3", "E1", "G2", "H4", "F5"])
True
>>> legal_way(["F3", "E1", "G3", "H5"])
False
>>> legal_way(["B4"])
True 
```

我知道我必须遍历列表并将第一个和第二个项目放入其中`legal(field1,field2)`，如果它是假的，那么一切都是假的，但如果它是真的我必须继续到最后，如果我只有一个，这也必须工作场地。我卡住了，怎么办？

```
def legal_way(way): 
   a=len(way) 
   for i in range(0,a-2):
      if a==1:
         return true
      else:
         if legal(way[i],way[i+1]): 
            return True 
         return False 
```

我得到 True 或 index 超出范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:27:29.543

我认为该方法的适当解决方案`legal_way`是：

1.  确定包含路径项`len`的数组参数的长度。`param`
2.  从`0`to`len - 2`迭代，并且在每次迭代时，检查`legal`方法是否返回`True`for ( `param[i]`, `param[i+1]`)

*您必须为`param`is`0`或`1`*

应该就这么简单——祝你好运！

# javascript - 具有最大数字索引的元素

> ID：13336047
> 
> 赞同：2
> 
> 时间：2012-11-11T22:19:42.797
> 
> 标签：javascript, arrays, object

如果通过“最后一个”我认为索引最大的元素，我如何找到 JavaScript 对象中的最后一个元素？即我收到一个类似于 ajax 上的数组的对象（作为 json），但它也有一个非数字键：

```
var received = {
   0: 'something',
   1: 'something else',
   2: 'some stuff',
   3: 'some more stuff',
   'crap' : 'this screws the whole thing'
} 
```

如果它是一个普通数组，我会使用`array.length`. 同样，我可以简单地逐个元素地迭代来找到它。

有没有更好的办法？如果解决方案需要 jQuery，那也没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:35:23.803

这类似于 zzzzBov 和 David Müller 的代码，但使用库函数确实使它更短：

```
Math.max.apply(null, Object.keys(test).filter(isFinite)) // 3 
```

如果您有具有可枚举扩展原型对象的对象（结果不是这种情况`JSON.parse`），您可能希望使用它`Object.getOwnPropertyNames`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:21:36.007

这不是一个数组，它是一个对象字面量。此外，对象字面量中的项目顺序不能保证在创建后保留（尽管大多数浏览器似乎都遵守这一点）。

话虽这么说，通常你的问题的答案是：你不能。您可以做的是遍历所有属性并找到最后一个或您感兴趣的任何一个（请参阅：[如何以对象为成员循环遍历纯 JavaScript 对象？](https://stackoverflow.com/questions/921789)）。但请记住，在迭代期间不必保留声明属性的顺序。

但是，如果这是一个真正的数组（忽略`'crap'`键），那很容易：

```
received = [
 'something',
 'something else',
 'some stuff',
 'some more stuff'
];

var last = received[received.length - 1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:25:00.310

对于数组（使用`[]`, not创建`{}`），该`length`属性比分配的最后一个索引多一个。所以：

```
var a = [];
a[0] = 'something';
a[5] = 'else';
a["foo"] = 'bar';
console.log(a.length); 
```

将打印“6”，即使数组中只有两个元素并且`foo`属性设置为`'bar'`. length 属性仅受数字索引的影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T23:02:30.323

```
var received = {
   0: 'something',
   2: 'some stuff',
   3: 'some more stuff',
   1: 'something else',
   'crap' : 'this screws the whole thing'
}; 
```

* * *

```
var prop,
    max = -1;
for ( prop in received ) {
  if ( Object.prototype.hasOwnProperty.call(received, prop) && !isNaN(prop) ) {
    max = Math.max(max, prop);
  }
}

console.log(max); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T22:26:38.430

这当然不是最优雅的方法，但如果必须坚持文字，你别无选择

```
<script>
var received = {
   0: 'something',
   1: 'something else',
   2: 'some stuff',
   3: 'some more stuff',
   'crap' : 'this screws the whole thing'
};

var max = null;

for (var i in received)
{
    if (received.hasOwnProperty(i) && !isNaN(i))
    {
        if (max == null || i > max)
            max = i;
    }
}

if (max)
    alert(received[max]); //some more stuff
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-11T22:27:12.173

如果您想知道哪个项目具有最大的数字索引值，则必须遍历对象中的所有键：

```
(function () {
    var i,
        o,
        temp;
    o = getYourObject();
    temp = -Infinity; //lowest possible value
    for (i in o) {
        if (o.hasOwnProperty(i) &&
            !isNaN(i) &&
            +i > temp) {
            temp = +i;
        }
    }
    console.log(temp); //this is the key with the greatest numeric value
}()); 
```

# python - Python 属性错误：cos

> ID：13336048
> 
> 赞同：4
> 
> 时间：2012-11-11T22:19:44.100
> 
> 标签：python, nonlinear-functions

我正在尝试使用 Python2.7 数值求解方程。这是整个代码：

```
from sympy import *
from sympy import Symbol
from sympy.solvers import nsolve
from scipy import *
from pylab import *
import numpy as np

# Symbols
theta = Symbol('theta')
phi = Symbol('phi')
phi0 = Symbol('phi0')
H0 = Symbol('H0')
# Constants
a = 0.05 
b = 0.05**2/(8*pi*1e-7)
c= 0.001/(4*pi*1e-7)
phi0 = 60*pi/180 
H0 = -0.03/(4*pi*1e-7)
def m(theta,phi):
    return np.array([sin(theta)*cos(phi), sin(theta)*cos(phi), cos(phi)])
def h(phi0):
    return np.array([cos(phi0), sin(phi0), 0])
def k(theta,phi,phi0):
    return np.vdot(m(theta,phi),h(phi0))
def F(theta,phi,phi0,H0): 
    return -(a*H0)*k(theta,phi,phi0)+b*(cos(theta)**2)+c*(sin(2*theta)**2)+sin(theta)**4*sin(2*phi)**2
def F_phi(theta,phi,phi0,H0):
    return simplify(diff(F(theta,phi,phi0,H0),phi))
def G(phi):
    return F_phi(pi/2,phi,phi0,H0)
solution = nsolve(G(phi), phi)
print solution 
```

这是我的回溯：

```
Traceback (most recent call last):
File "Test.py", line 33, in <module>
solution = nsolve(G(phi), phi)
File "Test.py", line 32, in G
return F_phi(pi/2,phi,phi0,H0)
File "Test.py", line 30, in F_phi
return simplify(diff(F(theta,phi,phi0,H0),phi))
File "Test.py", line 28, in F
return -(a*H0)*k(theta,phi,phi0)+b*(cos(theta)**2)+c*(sin(2*theta)**2)+sin(theta)**4*sin(2*phi)**2
File "Test.py", line 26, in k
return np.vdot(m(theta,phi),h(phi0))
File "Test.py", line 22, in m
return np.array([sin(theta)*cos(phi), sin(theta)*cos(phi), cos(phi)])
AttributeError: cos 
```

我正在使用 sympy、numpy 和 pylab 库。所以，我没有遇到 cos 函数的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T00:08:46.623

问题是使用星形导入而不是在不同的命名空间下导入每个包。

`sympy.functions.elementary.trigonometric.cos`这在名称下导入函数`cos`：

```
from sympy import * 
```

之后，`<ufunc 'cos'>`在 name 下导入`cos`，覆盖之前的定义：

```
from scipy import * 
```

`cos`然后，它用完全相同的函数的另一个副本（来自 matplotlib 包）覆盖前一个函数：

```
from pylab import * 
```

这也导入了相同`<ufunc 'cos'>`的名称，但`np.cos`名称相同。*这是导入东西的正确方法*：

```
import numpy as np 
```

最后，你会得到一份 cos 函数的副本，它知道如何将自身应用于浮点数，而不是 sympy 对象。当您尝试将该功能应用于 sympy 对象时，`phi`您会得到`AttributeError`. 总而言之，这个特定问题的解决方案是修复导入并知道您是想要来自 sympy 的函数还是来自 numpy 的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:48:05.113

你导入`cos`函数了吗？它在`math`模块中

```
from math import cos 
```

同样的事情`sin`。

# java - 缩放和旋转图像视图

> ID：13336049
> 
> 赞同：1
> 
> 时间：2012-11-11T22:19:44.337
> 
> 标签：java, android

我正在准备一些指南针活动。我有我的风玫瑰.png，我想在活动开始时缩放它并在方向改变后旋转。

问题是，当我缩放图像（仅 onCreate）时，在第一次（也是第一次）使用旋转方法之后，我的视图又调整了一次，我不知道为什么。

让我向您发布我的旋转和缩放方法。玫瑰是我的 ImageView 实例（ImageView 玫瑰）

请查看并发布任何建议。我应该尝试不同的方式来缩放我的 ImageView 吗？

感谢您的帮助！

旋转（看起来工作正常）

```
public void rotateRose(float angle){

            angle = 360 - angle;
            Matrix matrix=new Matrix();
            rose.setScaleType(ScaleType.MATRIX);
            pivX = rose.getDrawable().getBounds().width()/2;
            pivY = rose.getDrawable().getBounds().height()/2;
            matrix.preRotate((float) angle, pivX, pivY);
            rose.setImageMatrix(matrix);
} 
```

规模（找到[源链接](http://argillander.wordpress.com/2011/11/24/scale-image-into-imageview-then-resize-imageview-to-match-the-image/)）

```
private void scaleImage(ImageView view, int boundBoxInDp)
    {
        // Get the ImageView and its bitmap
        Drawable drawing = view.getDrawable();
        Bitmap bitmap = ((BitmapDrawable)drawing).getBitmap();

        // Get current dimensions
        int width = bitmap.getWidth();
        int height = bitmap.getHeight();

        // Determine how much to scale: the dimension requiring less scaling is
        // closer to the its side. This way the image always stays inside your
        // bounding box AND either x/y axis touches it.
        float xScale = ((float) boundBoxInDp) / width;
        float yScale = ((float) boundBoxInDp) / height;
        float scale = (xScale <= yScale) ? xScale : yScale;

        // Create a matrix for the scaling and add the scaling data
        Matrix matrix = new Matrix();
        matrix.postScale(scale, scale);

        // Create a new bitmap and convert it to a format understood by the ImageView
        Bitmap scaledBitmap = Bitmap.createBitmap(bitmap, 0, 0, width, height, matrix, true);
        BitmapDrawable result = new BitmapDrawable(scaledBitmap);
        width = scaledBitmap.getWidth();
        height = scaledBitmap.getHeight();

        // Apply the scaled bitmap
        view.setImageDrawable(result);

        // Now change ImageView's dimensions to match the scaled image
        RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) view.getLayoutParams();
        params.width = width;
        params.height = height;
        view.setLayoutParams(params);

        //pivX = width/2;
       // pivY = height/2;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:41:26.267

好的，我知道了！

代替

```
view.setImageDrawable(result); 
```

在 Scale 方法中

```
view.setImageBitmap(scaledBitmap); 
```

如果您正在寻找图像视图的缩放和旋转方法：以上这些工作正常（有这个小变化）

# c# - 如何在 C# 中捕获 SMB/CIFS 数据包？

> ID：13336050
> 
> 赞同：2
> 
> 时间：2012-11-11T22:19:43.890
> 
> 标签：c#, sockets, packet-sniffers, smb, cifs

```
Socket socket1 = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);

socket1.Bind(new IPEndPoint(ipAddress, 0));

socket1.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.HeaderIncluded, true);

byte[] byTrue = new byte[] { 1, 0, 0, 0 };
byte[] byOut = new byte[] { 1, 0, 0, 0 };

socket1.IOControl(IOControlCode.ReceiveAll, byTrue, byOut);

byte[] buffer1 = new byte[4096];

socket1.BeginReceive(buffer1, 0, buffer1.Length, SocketFlags.None, new AsyncCallback(OnReceive), new Tuple<Socket, byte[]>(socket1, buffer1)); 
```

我使用此代码在所有端口上的适配器上捕获 IP 数据包。

我将如何修改此代码以捕获 SMB/CIFS 数据包？最好不要在项目/代码中添加额外的数据包捕获库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:50:49.817

此代码确实捕获 SMB 数据包。

# mysql - 如何使用填充旧表中行的动态数据动态更新新 MySQL 表中的行？

> ID：13336052
> 
> 赞同：0
> 
> 时间：2012-11-11T22:19:50.680
> 
> 标签：mysql, dynamic, rows, transfer

我有以下 SQL 代码，可以很好地将数据行从旧表传输到新表。（在 MySQL 工作台中工作）

```
INSERT INTO us_compensation.RPBAR 
(ORG_SEC_ID ,
FYE, 
TOTAL_SALARY_PAID , 
OTHER_COMP_PAID ,
TOTAL_BONUS_PAID , 
PERFORMANCE_EQUITY_TIME_VESTING_OPTIONS_TIME_VESTING_STOCK,
TOTAL) 
SELECT DISTINCT
    ORG_SEC_ID,
    FYE,
    TOTAL_SALARY_PAID,
    OTHER_COMP_PAID,
    TOTAL_BONUS_PAID,
    PERFORMANCE_EQUITY + TIME_VESTING_OPTIONS + TIME_VESTING_STOCK,
    TOTAL_SALARY_PAID + OTHER_COMP_PAID + TOTAL_BONUS_PAID
      + PERFORMANCE_EQUITY + TIME_VESTING_OPTIONS + TIME_VESTING_STOCK
FROM
    equilar.realizablepay
group by ORG_SEC_ID
HAVING MAX(FYE); 
```

我需要帮助的是以下内容。旧表中的行会随着新数据的进入而自动更改。但是，新表 (RPBAR) 中的行不会反映新数据。发生的情况是，新表包含来自旧表的旧数据的所有行，并在新表的底部附加进入旧表的新数据。

我希望新表不要将旧数据存储在行中，而是使用旧表中的新数据更新相关行（其中所有相关行都使用新数据更新）。

如何让新表反映旧表行中的新数据，而不是让新表既有旧数据又有新数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:27:24.390

也许您只是想要一个[`VIEW`](http://dev.mysql.com/doc/en/views.html)?

```
CREATE VIEW us_compensation.RPBAR AS
  SELECT DISTINCT
           ORG_SEC_ID,
           FYE,
           TOTAL_SALARY_PAID,
           OTHER_COMP_PAID,
           TOTAL_BONUS_PAID,
           PERFORMANCE_EQUITY + TIME_VESTING_OPTIONS + TIME_VESTING_STOCK
             AS PERFORMANCE_EQUITY_TIME_VESTING_OPTIONS_TIME_VESTING_STOCK,
           TOTAL_SALARY_PAID + OTHER_COMP_PAID + TOTAL_BONUS_PAID
             + PERFORMANCE_EQUITY + TIME_VESTING_OPTIONS + TIME_VESTING_STOCK
             AS TOTAL
  FROM     equilar.realizablepay
  GROUP BY ORG_SEC_ID
  HAVING   MAX(FYE)
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:22:18.050

# c - 在字符数组上使用 printf 会返回垃圾和字符串

> ID：13336053
> 
> 赞同：1
> 
> 时间：2012-11-11T22:19:55.470
> 
> 标签：c, struct, printf, typedef

我正在尝试使用 printf 打印出一个名为 point_person 的指针内的字符数组，当我使用它返回用户的名字时，它会打印出很多垃圾，然后最后打印出名称。

代码看起来像这样：

```
 person dequeue_person;
    person *point_person = &dequeue_person;
    get_person(point_person, 9);
    printf("%s", point_person->first_name); 
```

person 是一个 typedef 结构，包含 3 个字符变量：first_name[64]、last_name[64]、pes_nbr[64]。

输出如下所示：

> f÷rnamn：约翰╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ ╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠╠ ╠╠╠╠╠约翰

是什么原因造成的，我以后如何避免这种情况？

编辑：填充 first_name 的代码如下所示：

```
void get_person(person *pers, int index)
{
    person per_son;

    strcpy(per_son.first_name, queue[(index+head)%QUEUE_MAX_SIZE].first_name);
    strcpy(per_son.last_name, queue[(index+head)%QUEUE_MAX_SIZE].last_name);
    strcpy(per_son.pers_nbr, queue[(index+head)%QUEUE_MAX_SIZE].pers_nbr);

    pers = &per_son;
    printf("Förnamn: %s\n", per_son.first_name);
} 
```

编辑2：我自己想出来的。我不得不编辑 get_person 函数并删除 per_son 结构并将 strcpy 更改为 pers 而不是 pers_son。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:55:17.933

您应该使用通过的人 - 而不是本地人：

```
void get_person(person *pers, int index)
{
    // NOT NEEDED: person per_son;

    strcpy(pers->first_name, queue[(index+head)%QUEUE_MAX_SIZE].first_name);
    strcpy(pers->last_name, queue[(index+head)%QUEUE_MAX_SIZE].last_name);
    strcpy(pers->pers_nbr, queue[(index+head)%QUEUE_MAX_SIZE].pers_nbr);

    // WRONG: pers = &per_son;
    printf("Förnamn: %s\n", pers->first_name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:23:44.370

`person dequeue_person;`和`person per_son;`是两个不同的对象。您将名称放在一个但打印另一个，所以它仍然是垃圾。

当您创建所有成员的对象时，`person`所有成员都未初始化，因此它是垃圾值。当你尝试打印它时，它会在堆栈上打印垃圾值。因此你得到了这个。

编辑：问题已编辑

```
get_person(point_person, 9); 
```

调用后`get_person()`它将执行`get_person()`函数的代码。因此，存在本地`per_son`对象，因此您放置的任何名称实际上都是本地名称，并且在退出打印 first_name 后它将自动销毁，`get_person()` 这本身是个好主意，但仍然存在一个错误，您`printf()`在调用环境中也在做这将为您提供本地对象的名字（即垃圾）。

如果你想通过`person`in`get_person()`并且想在两个地方打印相同的名字，试试这个：

```
 person dequeue_person;
    person *point_person = &dequeue_person;
    get_person(point_person, 9);
    printf("%s", point_person->first_name);

void get_person(person *pers, int index)
{
    strcpy(pers->first_name, queue[(index+head)%QUEUE_MAX_SIZE].first_name);
    strcpy(pers->.last_name, queue[(index+head)%QUEUE_MAX_SIZE].last_name);
    strcpy(pers->pers_nbr, queue[(index+head)%QUEUE_MAX_SIZE].pers_nbr);

    printf("In get person First name : %s\n", pers->first_name);
} 
```

在这种情况下，传递给 的指针`get_person()`指向在调用环境时创建的同一个对象。请参阅`get_person()`

我希望你现在明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T22:23:59.950

结构的内容未初始化。您需要将它们设置为某些东西。

你可以像这样初始化你的结构：

```
struct person dequeue_person = { "joe", "blogs", "42" }; 
```

或者您可以创建一个空结构

```
struct person dequeue_person = { "", "", "" }; 
```

清除整个结构并不少见：

```
struct person dequeue_person;
memset( &person, 0, sizeof(struct person) ); 
```

* * *

编辑......我注意到在你的垃圾输出的最后，出现了“约翰”这个词。难道这是你队列的尽头？ *即*元素`QUEUE_MAX_SIZE-1`。也许您没有正确初始化`index`，`head`或者您在错误的时间更改了它们的值。

或者这可能`index+head`不是解决您的队列的正确方法。通常你会有一个`head`和一个`tail`索引，你不会以这种方式添加它们。您所做的意味着`index`实际上是队列中的元素数。

# mvc-mini-profiler - 跨多个方法、程序集的 Profile mini profiler 步骤

> ID：13336054
> 
> 赞同：2
> 
> 时间：2012-11-11T22:19:57.553
> 
> 标签：mvc-mini-profiler

我最近发现了迷你分析器，我喜欢它。不幸的是，我使用的是 EF 5，所以我不能使用 EF 配置文件元素，但它仍然非常有用。

我的问题是；我可以跨多个方法分析一个以产生一个汇总步骤，比如跨业务层和跨整个存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T21:18:32.940

单个配置文件包含步骤`MiniProfiler.Step`的部分内发生的所有事情。`using`这包括对其他方法和程序集中的方法的调用。因此，没有理由这不能正常工作。

# java - Java 反射 - 对象不是声明类的实例

> ID：13336057
> 
> 赞同：49
> 
> 时间：2012-11-11T22:20:50.713
> 
> 标签：java, reflection

谷歌到处都在问这个问题，但我仍然遇到问题。这就是我想要做的。因此，就像我的标题所述，我收到“对象不是声明类的实例”错误。有任何想法吗？谢谢！

主.java

```
Class<?> base = Class.forName("server.functions.TestFunction");
Method serverMethod = base.getMethod("execute", HashMap.class);
serverMethod.invoke(base, new HashMap<String, String>()); 
```

测试函数.java

```
package server.functions;

import java.util.HashMap;
import java.util.Map;

import server.*;

public class TestFunction extends ServerBase {

    public String execute(HashMap<String, String> params)
    {
        return "Test function successfully called";
    }
} 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-11T22:23:18.477

您正在使用该类调用该方法，但您需要它的一个实例。试试这个：

```
serverMethod.invoke(base.newInstance(), new HashMap<String, String>()); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-11T22:22:54.250

您正在尝试调用`execute`object 上的方法`base`，该方法实际上是`Class`您的调用返回的对象`Class.forName()`。

这适用于`static`（类）方法 - 但`execute`它是一种非静态（实例）方法。

（它也适用于调用类型对象的实例方法`Class`- 但这不是你想要在这里实现的！）

您需要一个实际实例`TestFunction`来调用该方法，或者您需要创建该方法`static`。

通过反射调用静态方法时，第一个参数`invoke()`被忽略，因此通常将其设置为`null`，这说明了不涉及实例的事实。

尽管您当前的示例方法将对任何`TestFunction`对象执行相同的操作，但通常实例方法可能会为每个对象产生不同的结果 - 因此`.invoke()`反射方法需要知道在哪个对象上运行该方法。

# ios - 如何从 UIWebView 中显示的 pdf 加载 Safari 中的链接

> ID：13336066
> 
> 赞同：1
> 
> 时间：2012-11-11T22:21:25.347
> 
> 标签：ios, xcode, cocoa, uiwebview

我正在使用页面查看应用程序来显示一系列 PDF。UIWebView 可以正常显示 PDF，但是每当 PDF 中嵌入了一个链接并且用户单击它时，它就会打开 UIWebView 内的链接。我希望它在 safari 中打开上述链接。

```
NSString *path = [[NSBundle mainBundle] pathForResource:page ofType:@"pdf"];
NSURL *targetURL = [NSURL fileURLWithPath:path];
NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];

[self.webView loadRequest:request];

-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES;
} 
```

如您所见，我尝试插入代码以启动它，但单步执行时 BOOL 永远不会运行。

# php - 正则表达式，将值保存在数组中

> ID：13336067
> 
> 赞同：0
> 
> 时间：2012-11-11T22:21:26.700
> 
> 标签：php, regex, callback

在一个字符串中，每次有一个带有#的单词我想将这个单词保存在一个数组中，这里是我的代码：

```
<?php
function tag($matches)
{
    $hash_tag = array();
    $hash_tag[]=$matches[1];
    return '<strong>' . $matches[1] . '</strong>';
}
$test = 'this is a #test1 #test2 #test3 #test4 #test5 #test6';
$regex = "#(\#.+)#";
$test = preg_replace_callback($regex, "tag", $test);
echo $test;
?> 
```

但我不知道如何将每个新单词放入数组 $hash_tag 的新单元格中，我真的需要帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:25:19.823

尝试使用[preg_match_all](http://php.net/manual/en/function.preg-match-all.php) ()

在一个数组中获得所有匹配项后，您可以循环遍历它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:29:05.697

我可以看到你想同时做两件事

*   用强标签替换单词
*   获取以后使用的所有单词

你可以试试

```
$hash_tag = array();
$tag = function ($matches) use(&$hash_tag) {
    $hash_tag[] = $matches[1];
    return '<strong>' . $matches[1] . '</strong>';
};

$test = 'this is a #test1 #test2 #test3 #test4 #test5 #test6';
$regex = "/(\#[0-9a-z]+)/i";
$test = preg_replace_callback($regex, $tag, $test);
echo $test;
var_dump($hash_tag); <------ all words now in this array 
```

**输出**

这是一个**#test1** **#test2** **#test3** **#test4** **#test5** **#test6**

```
array (size=6)
  0 => string '#test1' (length=6)
  1 => string '#test2' (length=6)
  2 => string '#test3' (length=6)
  3 => string '#test4' (length=6)
  4 => string '#test5' (length=6)
  5 => string '#test6' (length=6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T22:27:49.460

好吧，这是正则表达式：`/\#[a-zA-Z0-9]*/`

在 PHP 中，我相信你会使用`preg_match_all('/\#[a-zA-Z0-9]*/', string)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T22:28:34.407

使用`preg_match_all()`并循环遍历所有匹配项：

```
<?php
$test = 'this is a #test1 #test2 #test3 #test4 #test5 #test6';
$regex = "(\#[^#]+?)";
preg_match_all($regex, $test, $hash_tag);
foreach ($hash_tag as $match) {
    echo '<strong>' . $match . '</strong>';
}
?> 
```

# python - 可以在heroku上运行scrapy吗？

> ID：13336072
> 
> 赞同：3
> 
> 时间：2012-11-11T22:21:52.920
> 
> 标签：python, heroku, screen-scraping, scrapy

我想用 Scrapy 从网站上获取一些数据，但我不想用我的笔记本电脑来做。

是否可以将其作为 heroku 应用程序运行？在远程服务器上运行 scrapy 蜘蛛还有哪些其他选择？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T10:03:29.473

可以在 Heroku 上使用[Scrapy](https://stackoverflow.com/questions/12779184/how-to-deploy-a-scrapy-spider-on-heroku-cloud)。其他选项包括在远程服务器上设置[Scrapyd](http://doc.scrapy.org/en/latest/topics/scrapyd.html)，或使用[Scrapy Cloud](http://scrapinghub.com/scrapy-cloud.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-15T08:13:50.177

您可以使用[scrapy-heroku](https://github.com/dmclain/scrapy-heroku)在 heroku上运行 Scrapyd 服务器！没问题。

# wordpress - 将类添加到父母标签。WordPress

> ID：13336073
> 
> 赞同：0
> 
> 时间：2012-11-11T22:21:57.107
> 
> 标签：wordpress, drop-down-menu, parent-child

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:51:51.013

您可以创建自定义 walker 来扩展 wp_list_pages。

functions.php 中的自定义walker

```
class My_Custom_Walker extends Walker_Nav_Menu {
  function start_el (&$output, $item, $depth=0, $args=array()) {

    $link = get_permalink($item->ID);
    $title = $item->post_title;
    $indent = str_repeat("\t", $depth);
    $output .= "\n$indent<li>\n<a href='".$link."' class='navA'>".$title."</a>";

  }

  function end_el(&$output, $item, $depth=0, $args=array()) {
        $indent = str_repeat("\t", $depth);
        $output .= "\n$indent</li>\n";
  }
} 
```

初始化和 walker 并在你想调用的地方使用它。

```
<?php
// Call class:
$My_Walker = new My_Custom_Walker();

$args = array(
    'walker'      => $My_Walker
);

wp_list_pages( $args );

?> 
```

参考链接：

[http://codex.wordpress.org/Function_Reference/wp_list_pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)

你也可以使用钩子来实现它。

[https://wordpress.stackexchange.com/questions/42701/how-to-hook-wp-list-pages](https://wordpress.stackexchange.com/questions/42701/how-to-hook-wp-list-pages)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T22:52:40.067

如果您将所有这些链接包装在一个 div 中，例如：

```
<div id="pages-wrapper"><?php wp_list_pages(); ?></div> 
```

然后，您可以`addClass()`按如下方式使用 jQuery：

```
$('div#pages-wrapper a').addClass('navA'); 
```

此外，StackExchange 上有一个与 WordPress 相关的问题区域：[http ://wordpress.stackexchange.com](http://wordpress.stackexchange.com)

# android - getHistorySize() 总是“0”

> ID：13336080
> 
> 赞同：0
> 
> 时间：2012-11-11T22:22:37.613
> 
> 标签：android, drag, android-4.2-jelly-bean, android-2.3-gingerbread, motionevent

对于 ACTION_MOVE 事件，我通过调用`event.getHistorySize()`运行 Jellybean 的 Galaxy Nexus 上的所有内容来获取历史记录大小，但在运行 Gingerbread 的 LG Optimus 3D 上，历史记录大小始终为“0”。有人知道为什么是这样吗？2.3 和 4.2 之间有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:20:29.210

好吧，既然似乎没有人对此有答案，我只想解释一下我必须做的工作。在每个`ACTION_MOVE`事件中，我只是自己将坐标存储到一个数组中，然后在即将`ACTION_MOVE`发生的事件中，我没有从事件历史记录中获取坐标，而是从数组中获取它们。这是一个直截了当的解决方法，但问题首先发生的原因仍不清楚。

# php - 是否有用于输出条件文本的 Twig 速记语法

> ID：13336090
> 
> 赞同：75
> 
> 时间：2012-11-11T22:23:28.147
> 
> 标签：php, twig

Twig 中是否有更短的语法来输出条件字符串？

```
<h1>{% if not info.id %}create{% else %}edit{% endif %}</h1> 
```

传统的 php 比这更容易：

```
<h1><?php info['id']? 'create' : 'edit' ?></h1> 
```

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-11-11T22:29:02.777

这应该有效：

```
{{ not info.id ? 'create' : 'edit' }} 
```

此外，这称为三元运算符。它有点隐藏在文档中：twig [docs: operator](http://twig.sensiolabs.org/doc/templates.html#other-operators)

从他们的文档来看，基本结构是：

```
{{ foo ? 'yes' : 'no' }} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2017-01-25T19:08:35.750

如果您需要比较该值是否等于您可以执行的操作：

```
{{  user.role == 'admin' ? 'is-admin' : 'not-admin' }} 
```

您可以在 twig 中使用 Elvis Operator：

```
{{  user ? 'is-user' }} 

{{  user ?: 'not-user' }} // note that it evaluates to the left operand if true ( returns the user ) and right if not 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-01T18:25:02.693

空[合并运算符](https://twig.symfony.com/doc/2.x/templates.html#other-operators)也可以工作，例如：

```
{% set avatar = blog.avatar ?? 'https://example.dev/brand/avatar.jpg' %} 
```

# haskell - 列出没有账户的国民保险号码

> ID：13336098
> 
> 赞同：0
> 
> 时间：2012-11-11T22:24:12.747
> 
> 标签：haskell

我试图列出一堆不属于特定银行的数字。

这是我的代码

类型

```
 type NI = Int
     type Age = Int
     type Balance = Int
     type Person = (NI, Age, Balance)
     type Bank = [Person]
     type Market = [Bank]
     type Pop = [NI] 
```

银行

```
 rbs :: Bank
     rbs = [ (1, 73, 1000)
         , (2, 18, -50)
         , (3, 60, 190)
         , (4, 26, 300)
         , (5, 24, 456)
         , (6, 32, 7500)
         , (7, 41, -46)
         , (8, 59, -850)
         , (9, 44, 348)
         , (10, 66, -1000)

     clyde :: Bank
     clyde = [(1, 73, 240)
           , (2, 18, -70)
           , (23, 30, 800)
           , (14, 16, 30)
           , (5, 24, 800)
           , (19, 81, 750)
           , (17, 49, 946)
           , (20, 59, -850)
           , (29, 24, -348)
           , (30, 76, -100)

    sco :: Pop
    sco = [1..20] 
```

这是我检查 NI 是否不在银行中的代码

```
 bankFree :: Pop -> Market -> Pop
    bankFree [] x = []
    bankFree x [] = error "No Banks selected"
    bankFree x [[]] = []
    bankFree (x:xs) [[],((n,a,b):ys)] = if x == n then bankFree (xs) [[],ys]
                                else x : bankFree xs [[],ys]
    bankFree x [[],[]] = []
    bankFree (x:xs) (((n,a,b):ys):zs) = if x == n then bankFree (xs) ((ys):zs)
                                else if x /= n then x : bankFree xs ((ys):zs)
                                else bankFree (xs) zs 
```

如果我运行 bankFree sco [rbs,clyde] 应该显示的是 [11,12,13,15,16,18,20] 但是出现的是 [2..20]

我不知道我做错了什么以及如何继续，所以任何关于此事的帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:07:19.227

同样，正如我在[对您之前的问题的回答中](https://stackoverflow.com/a/13336221/1094403)所建议的那样，您遇到这么多困难的原因是您没有有效地将问题分解成更小的部分，并且您没有帮助自己使用标准实用程序管理列表的功能。你试图一次咬掉太大的一块，这使得它很难解决。

所以你想把你的问题分解成易于自己解决的子部分，然后将它们组合成大问题的大解决方案：

```
import Data.List (any)

type Market = [Bank]
type Bank = [Person]
data Person = Person { ni :: NI, age :: Age, balance :: Balance } 
    deriving (Eq, Show)

bankFree :: Pop -> Market -> Pop
bankFree pop banks = filter checkBanks pop
    where checkBanks n = not (any (bankHasNI n banks))

bankHasNI :: NI -> Bank -> Bool
bankHasNI n bank = any (\person -> ni person == n) bank 
```

必读：

*   [`Data.List`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:09:51.603

把它分解成更小的问题。此外，使用高阶函数而不是手动递归来使您的算法更易于理解：

```
inBank :: NI -> Bank -> Bool
ni `inBank` bank = any (\(ni', _, _) -> ni' == ni) bank

inMarket :: NI -> Market -> Bool
ni `inMarket` market = any (ni `inBank`) market

bankless :: Pop -> Market -> Pop
bankless pop market = filter (not . (`inMarket` market)) pop 
```

如果你测试它，你会得到：

```
>>> bankless sco [rbs, clyde]
[11,12,13,15,16,18] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T23:11:28.013

我想这是作业，所以仅仅为你解决问题是不行的，但这里有一些提示：

*   它有助于将您的职能应该做的问题形式化：“鉴于这个人群和这些银行客户名单，他们中谁没有账户？”
*   `bankFree`鉴于上述问题表述，将函数视为过滤器变得很自然。这里有一些人，*对于每个*人，只有在没有银行账户的情况下才保留。

过滤列表可以通过多种不同的方式实现，对于初学者来说最简单的可能是使用列表推导：

```
bankFree :: Pop -> Market -> Pop
bankFree pop market = [p | p <- pop, not (isBankCustomer market p)] 
```

应该读作：*返回 Pop 中所有非银行客户的人*。的定义`isBankCustomer`应该是：

```
isBankCustomer :: NI -> Market -> Bool   
isBankCustomer ni market = ? 
```

您在这里要做的是以某种方式检查 ni 是否存在于任何银行客户列表中。

# python - 类图像没有属性“打开”

> ID：13336104
> 
> 赞同：6
> 
> 时间：2012-11-11T22:24:26.083
> 
> 标签：python, tkinter, python-imaging-library

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T23:33:23.057

从你所说的看起来，即`This is not all of the code`。
您或其他一些导入已经声明了一些变量/类调用`Image`，这已经覆盖了`Image`导入的类`PIL`。

要专门使用`PIL` `Image`该类，请使用：

```
img = PIL.Image.open("majestic creature.jpeg").convert("RGB") 
```

# mysql - 执行存储过程在生产服务器上不起作用，权限丢失？

> ID：13336108
> 
> 赞同：1
> 
> 时间：2012-11-11T22:24:42.630
> 
> 标签：mysql, stored-procedures, permissions

我在通过 PHP 运行的存储过程中遇到了一些问题，而且我已经连续四天摸不着头脑了。也许你可以帮助阐明这一点。

简而言之：我在本地计算机 ( `spcTest`) 上定义了一个存储过程。PHP 页面可以毫无问题地运行它，因此它返回一个单行记录集。当我在生产服务器上重新创建过程时，PHP 页面没有得到相同的结果。

我很确定这是一个权限问题，但我很难确定它。我可以通过 phpMyAdmin 访问生产服务器，这就是我运行所有创建脚本的地方。我还看到存储过程 spcTest 出现在生产中（使用`SELECT * FROM ROUTINES`），我也可以成功更新它。

当我运行以下命令时：

```
SHOW GRANTS FOR triis@localhost; 
```

这些是我分别在开发服务器和生产服务器上得到的结果：

~~~=== 在开发服务器上===~~~

```
GRANT ALL PRIVILEGES ON *.* TO 'triis'@'localhost' IDENTIFIED BY PASSWORD '*F05[~~(snip)~~]72'

GRANT ALL PRIVILEGES ON `tri_is`.* TO 'triis'@'localhost' 
```

~~~=== 在生产服务器上===~~~

```
GRANT USAGE ON *.* TO 'triis'@'localhost' IDENTIFIED BY PASSWORD '*F05[~~(snip)~~]72'

GRANT ALL PRIVILEGES ON `tri_is`.* TO 'triis'@'localhost' 
```

注意`GRANT USAGE`开发端不存在的 -line 的差异。我已经阅读了 mySQL 文档，但可能错过了答案……简而言之，我的问题是：生产服务器上的权限是否如上所示，是否允许执行任何存储过程，包括`spcTest`？

对我来说，用户似乎不`triis`应该有执行权限，因为`EXECUTE`没有特别提到 - 属性。但是看到-command 在生产和开发服务器（尤其是双方）`SHOW GRANTS`上返回惊人相似的结果，我有点困惑为什么 PHP 代码只能在开发端工作。`ALL PRIVILEGES`

如果这被证明是生产中的权限问题，是否`GRANT CREATE ROUTINE, EXECUTE ON * TO triis@'localhost'`有助于为此以及任何未来的存储过程提供执行权限？

谢谢你的时间！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:06:36.880

这不是我最初认为的权限问题，而是在存储过程 ( )中`UPDATE`运行的 -statement中发生的错误。`SP`

该错误源于表名（正在更新）区分大小写，以及开发和生产环境中的大小写不匹配。**存储过程在phpMyAdmin**中运行时没有直接报错，我没有资源在生产服务器上运行它的 mySQL shell 进行进一步调查。在 PHP 中运行`SP`进行诊断并没有帮助，虽然似乎拥有`SP`在两个环境中运行 s 的完全权限，但仍然只能在开发方面获得结果，这让我感到困惑。

**每日一课：**虽然反引号很难打字（至少在冰岛语键盘上），但最好立即将它们包括在内。另一种选择是不在您的表名或过程中使用驼峰式大小写。通过 phpMyAdmin 生成 mySQL-scripts 将添加刻度并且区分大小写。仅在您的一个环境中运行生成的脚本可能会导致仍在开发中的脚本出现问题（而不是生成的批处理的一部分）。

# attributes - Magento 1.7 将属性添加到类别

> ID：13336112
> 
> 赞同：1
> 
> 时间：2012-11-11T22:25:09.797
> 
> 标签：attributes, categories, magento-1.7

我正在尝试将一个名为“website_url”的新文本字段添加到类别的字段列表中。

我找到了很多教程，但没有一个适用于 magento 1.7。

我创建了一个新模块，如下所示：

**-code\local\SaponeWebConcept\CategoriesAttributes\sql\categoriesattributes_setup\mysql4-install-0.1.0.php**：

```
<?php
$installer = $this;
$installer->startSetup();

$installer->addAttribute('catalog_category', 'website_url', array(
    'type'              => 'text',
    'backend'           => '',
    'frontend'          => '',
    'label'             => 'Lien du site',
    'input'             => 'text',
    'class'             => '',
    'source'            => '',
    'global'            => 0,
    'visible'           => 1,
    'required'          => 0,
    'user_defined'      => 0,
    'default'           => '',
    'searchable'        => 0,
    'filterable'        => 0,
    'comparable'        => 0,
    'visible_on_front'  => 0,
    'unique'            => 0,
    'position'          => 1,
));

$installer->endSetup(); 
```

**-code\local\SaponeWebConcept\CategoriesAttributes\etc\config.xml**

```
<?xml version="1.0"?>
<config>
   <modules>
      <SaponeWebConcept_CategoriesAttributes>
         <version>0.1.0</version>
      </SaponeWebConcept_CategoriesAttributes>
   </modules>
   <global>
      <resources>
         <categoriesattributes_setup>
            <setup>
               <module>SaponeWebConcept_CategoriesAttributes</module>
               <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
            </setup>
            <connection>
               <use>core_setup</use>
            </connection>
         </categoriesattributes_setup>
      </resources>
   </global>
</config> 
```

我的模块由此正确激活：

```
<SaponeWebConcept_CategoriesAttributes>
    <active>true</active>
    <codePool>local</codePool>
</SaponeWebConcept_CategoriesAttributes> 
```

但是当我访问我的类别编辑时，我没有看到任何新字段。我究竟做错了什么 ？如果缓存关闭，该模块应该立即工作，对吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:05:53.167

我遇到过同样的问题。这就是我解决它的方法：

app/code/local/yourmodulename/sql/yourcustomattribute_setup/mysql4-upgrade-0.0.9-0.1.3.php

```
<?php
$installer = $this;
$installer->startSetup();

$installer->addAttribute("catalog_category", "your_attribute",  array(
    "type"     => "varchar",
    "backend"  => "",
    "frontend" => true,
    "label"    => "Your Attribute",
    "input"    => "text",
    "class"    => "",
    "source"   => "",
    "global"   => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    "visible"  => true,
    "required" => false,
    "user_defined"  => false,
    "default" => "",
    "searchable" => false,
    "filterable" => false,
    "comparable" => false,

    "visible_on_front"  => true,
    "unique"     => true,
    "note"       => ""

    ));
$installer->endSetup(); 
```

app/code/local/yourmodulename/etc/config.xml

```
<config>
  <modules>
    <Yournamespace_Yourmodulename>
      <version>0.1.3</version>
    </Yournamespace_Yourmodulename>
  </modules>
  <frontend>
    <routers>
      <yourmodulename>
        <use>standard</use>
          <args>
            <module>Yournamespace_Yourmodulename</module>
            <frontName>categoryattribute</frontName>
          </args>
      </yourmodulename>
    </routers>
        <category>
        <collection>
            <attributes>
                <yourmodulename />
            </attributes>
        </collection>
    </category>
        <layout>
          <updates>
            <yourmodulename>
              <file>categoryattribute.xml</file>
            </yourmodulename>
          </updates>
        </layout>
  </frontend>
  <global>
    <helpers>
      <yourmodulename>
        <class>Yournamespace_Yourmodulename_Helper</class>
      </yourmodulename>
    </helpers>
    <blocks>
      <yourmodulename>
        <class>Yournamespace_Yourmodulename_Block</class>
      </yourmodulename>
    </blocks>
    <models>
      <yourmodulename>
        <class>Yournamespace_Yourmodulename_Model</class>
        <resourceModel>categoryattribute_mysql4</resourceModel>
      </yourmodulename>
    </models>
    <resources>
      <yourmodulenamee_setup>
        <setup>
          <module>Yournamespace_Yourmodulename</module>
          <class>Mage_Catalog_Model_Resource_Eav_Mysql4_Setup</class>
        </setup>
        <connection>
          <use>core_setup</use>
        </connection>
      </yourmodulename_setup>
      <yourmodulename_write>
        <connection>
          <use>core_write</use>
        </connection>
      </yourmodulename_write>
      <yourmodulename_read>
        <connection>
          <use>core_read</use>
        </connection>
      </yourmodulename_read>
    </resources>
  </global>
</config> 
```

应用程序/etc/modules/Your_modulename.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <Yournamespace_Yourmodulename>
      <active>true</active>
      <codePool>local</codePool>
      <version>0.1.3</version>
    </Yournamespace_Yourmodulename>
  </modules>
</config> 
```

检查您的数据库以查看是否已在“Eav Attribute”下安装了 sql

您的自定义类别属性现在应该显示在前端！！！！

现在您需要做的就是在前端显示属性：

```
<?php echo $_product->getYourattributeid(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T10:45:13.360

对于那些有这类问题的人，我在 MAGENTO 1.8 中的解决方案只确保设置了 VERSION 标签。

```
<config>
    <modules>
        <Yournamespace_Yourmodulename>
            <active>true</active>
            <codePool>local</codePool>
            <version>0.0.1</version>
        </Yournamespace_Yourmodulename>
    </modules>
</config> 
```

# matlab - 应用滑动窗口操作后如何设置边框像素值？

> ID：13336113
> 
> 赞同：1
> 
> 时间：2012-11-11T22:25:09.447
> 
> 标签：matlab, image-processing, sliding-window

在对 MATLAB 中的图像应用滑动窗口操作后`stdfilt(i, ones(5, 5))`，我想设置边框像素，即使用填充计算的像素，以`NaN`将它们标记为无意义。在此示例中，我会将最外面的两行和两列设置为`NaN`. 给定一个 M * M 窗口，如何将 (M - 1) / 2 像素宽的边框设置为特定值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:06:13.173

假设，`r`是矩阵（的结果`stdfilt`）。这是一个如何将 NaN 分配给边界的示例。通常，您需要指定正确的索引。

```
>> r = rand(4)

r =

    0.8147    0.6324    0.9575    0.9572
    0.9058    0.0975    0.9649    0.4854
    0.1270    0.2785    0.1576    0.8003
    0.9134    0.5469    0.9706    0.1419

>> r([1, end], :) = nan

r =

       NaN       NaN       NaN       NaN
    0.9058    0.0975    0.9649    0.4854
    0.1270    0.2785    0.1576    0.8003
       NaN       NaN       NaN       NaN

>> r(:, [1, end]) = nan

r =

       NaN       NaN       NaN       NaN
       NaN    0.0975    0.9649       NaN
       NaN    0.2785    0.1576       NaN
       NaN       NaN       NaN       NaN 
```

**更新：**一般来说，由于图像是一个矩阵，你的问题是“如何设置某些矩阵值？”。答案是：“使用矩阵的索引”。有很多方法可以做到这一点（例如，通过构建索引矩阵、逻辑掩码或使用行/列坐标）。使用哪种方法的决定通常取决于此特定任务的操作速度。例如，如果您需要用 NaN 替换零，则使用逻辑掩码会更快：`r(r == 0) = nan`等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:08:01.930

这将完成这项工作，但这似乎是图像处理工具箱中的那种功能。

```
mask = logical(ones(size(i)));
width = (m - 1) / 2;
mask(width + 1:size(i, 1) - width, width + 1:size(i, 2) - width) = 0;
i(mask) = NaN; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:03:55.973

首先找到`NaN`矩阵中的位置。假设您的图像名称是 A。

```
a = isnan(A); 
```

这将在数​​字位置创建`a`0 矩阵，在 位置创建 1矩阵`NaN`。然后找到`Nan`元素的位置：

```
[x,y]=find(a==1); 
```

然后将它们替换为值`V`：

```
for i=1:length(x)
   A(x(i),y(i)) = V;
end 
```

# php - 使用 cURL 时出错

> ID：13336114
> 
> 赞同：2
> 
> 时间：2012-11-11T22:25:10.887
> 
> 标签：php, curl

尝试在 PHP 中使用 cURL 访问 URL [https://memphis.ulbranet.com.br/ALEPH/](https://memphis.ulbranet.com.br/ALEPH/)，但出现以下错误：

```
bool (false) string (80) "error: 14077417: SSL routines: SSL23_GET_SERVER_HELLO: SSLv3      alert illegal parameter" 
```

有谁知道为什么？

```
<?php

ini_set( 'display_errors' , true );
error_reporting( E_ALL );

$curl = curl_init();
curl_setopt( $curl , CURLOPT_URL , 'https://memphis.ulbranet.com.br/ALEPH/' );

curl_setopt( $curl , CURLOPT_RETURNTRANSFER , true );
curl_setopt( $curl , CURLOPT_SSL_VERIFYPEER , false );

var_dump( curl_exec( $curl ) , curl_error( $curl ) ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:29:19.487

我不确定这是否是 CURL 中的错误、格式不正确的 SSL 设置或版本兼容性 - 但您可以通过告诉 CURL 使用 SSL 版本 3 来修复它：

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
```

# .net - ASP.Net MVC 以下部分已定义但尚未为布局页面呈现

> ID：13336117
> 
> 赞同：2
> 
> 时间：2012-11-11T22:25:38.127
> 
> 标签：.net, asp.net-mvc

我在谷歌搜索中看到其他一些人遇到了这个问题......但他们的问题不涉及摆脱默认的 begaviour。

好的...我正在使用 ASP.Net MVC4。我无法忍受，但你知道这些天是怎么回事，我们最终都会使用我们不时无法忍受的技术。

在我的 _layout.cshtml 文件中，我删除了以下几行。

```
 @RenderSection("featured",false)
    @RenderBody()
    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts",false) 
```

当我运行我的应用程序时，我收到以下错误：

以下部分已定义但尚未为布局页面“~/Views/Shared/_Layout1.cshtml”呈现：“featured”

如果我把这些线放回去，我会从标准的 ASP.NET HelloWorld 模板中得到垃圾......我需要删除或修改其他东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T22:40:41.787

我猜您的视图包含“@section features”，这意味着它会尝试输出它标识为“featured”的内容。输出实际结束的位置，您可以通过布局中的 RenderSection 指定。

因此，如果您不执行 RenderSection，ASP.NET 不知道将视图尝试输出的内容放在哪里。因此错误。

因此，您的解决方案可能也是摆脱“@section features”块。

# c# - 试图让 DataAccess 函数传回一个二维字符串数组，其中包含要显示的 UI 类的列和记录

> ID：13336121
> 
> 赞同：0
> 
> 时间：2012-11-11T22:26:08.993
> 
> 标签：c#, entity-framework

我的问题有两个部分，如何做，以及它是否是好的风格。

*   `TestDataBaseEntities`是正在传递的 DBContext 项。
*   `myQuery`是正在执行和读取的查询
*   `StatusMessage`从函数中传递给 UI 以报告操作是否成功。
*   `Records`是我需要帮助弄清楚的。我需要弄清楚如何将每条记录传递回`ReadMan()`.

我在想一个 2d 字符串数组被传回会让我受益，因为我可以让这个`DataAccess`类读取数据，并准备在我的`UserInterface`类中显示。但问题就在于此。

要声明`string[,]`，我需要知道字符串的大小，或者通过这样做隐含地给它尺寸`Records[,] = new string[,] { { FirstField, SecondField }, { FirstField, SecondField } ... }`等等，但是不能，因为读入的第一条记录没有提供需要告诉的信息`Records`它的第二个索引应该有多大`[ , ThisIndex]`，如果我有这个工作，我会将 2d 传递`Records`回`UserInterface`类以显示给用户。

为什么要有这个Read功能？因为我应该将 EF 函数与 UI 分开，对吗？

```
public class DataAccess
{
    public bool ReadMan(TestDatabaseEntities dbEntities, IQueryable myQuery, out string StatusMessage, out string[,] Records)
    {
        string ErrorMessage;
        bool bSuccessful;
        string[] ThisRecord;

        bSuccessful = TryDataBaseAction(dbEntities, out ErrorMessage,
            () =>
            {   
                foreach (Man m in myQuery)
                {
                    // was thinking ThisRecord could be temporary storage but doesn't seem to work to my benefit.
                    ThisRecord = new string[] { m.ManID.ToString(), m.Name };

                }
            });
        if (bSuccessful)
            StatusMessage = "Records read successfully";
        else
            StatusMessage = ErrorMessage;

        return bSuccessful;
    }

    public bool TryDataBaseAction(TestDatabaseEntities MyDBEntities, out string ErrorMessage, Action MyDBAction)
    {
        UserInterface MyUI = new UserInterface();
        try
        {
            MyDBAction();
            ErrorMessage = "No Error";
            return true;
        }
        catch (Exception e)
        {
            ErrorMessage = e.ToString();
            return false;
        }
    }
} 
```

## 编辑：固定

```
 public bool ReadMan(TestDatabaseEntities dbEntities, IQueryable myQuery, out string StatusMessage, out string[,] Records)
    {
        string ErrorMessage;
        bool bSuccessful;
        string[,] TheseRecords = null;

        // hands an Action() to TryDataBase, as indicated by lambda expression in 3rd arguement.
        bSuccessful = TryDataBaseAction(dbEntities, out ErrorMessage,
        () =>
        {
            List<Man> men = myQuery.OfType<Man>().ToList();
            TheseRecords = new string[men.Count, 2];

            // ERROR BELOW: Operator '<' cannot be applied to operands of type 'int' and 'method group' 
            for (int i = 0; i < men.Count; i++)
            {
                TheseRecords[i, 0] = men[i].ManID.ToString();
                TheseRecords[i, 1] = men[i].Name;
            }
        });

        Records = TheseRecords;

        if (bSuccessful)
            StatusMessage = "Records read successfully";
        else
            StatusMessage = ErrorMessage;

        return bSuccessful;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:49:22.833

这有帮助吗？

```
bSuccessful = TryDataBaseAction(dbEntities, out ErrorMessage,
() =>
{   
    List<Man> men = myQuery.OfType<Man>().ToList();
    Records = new string[men.Count, 2];

    for (int i = 0; i < men.Count; i++)
    {
        Records[i, 0] = men[i].ManID.ToString();
        Records[i, 1] = men[i].Name;
    }
}); 
```

这里的关键是转换`myQuery`成一个列表，以便我们可以访问它的`Count`属性。一旦我们有了它，就可以直接创建`Records`数组了。

这样做是否是好的风格更加主观，并且实际上取决于您的应用程序的架构方式。一般来说，我的数据访问层只负责执行查询和检索数据——它留给用户界面来处理视觉表示。

将此方法应用于您的特定情况，如果该`ReadMan`方法将某个`List`或其他集合作为`out`参数而不是二维数组，则可能会更容易。这样，调用方法可以轻松地创建所需的表示（您知道要处理多少项），而且您可以避免用户界面细节潜入数据访问层。

您可能已经这样做了，但要考虑的另一件事是您当前的方法如何处理大量数据。`myQuery`我们正在物化`myQuery`.

# matlab - 我应该如何在 Matlab 中使用 Cramer 规则？

> ID：13336123
> 
> 赞同：2
> 
> 时间：2012-11-11T22:26:22.100
> 
> 标签：matlab, linear-algebra

两个矩阵之间的关系如图所示`Ax=B`。

如何`x`使用克莱默规则找到？

```
A=[521 202 -176 612;-761 41 -655 712;314 102 -234 891;612 291 209 -318]

B=[718;408;215;356] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T22:33:37.950

您可以对特定的 4x4 案例使用像这样的[Cramer 规则。](http://en.wikipedia.org/wiki/Cramer%27s_rule)`i`结果索引处的元素`x`由 2 个行列式的比率给出（有关完整说明，请参阅 wikipedia 链接） - 您可以使用以下循环创建结果

```
 x = ones(4,1);
 a_det = det(A);
 for i = 1:4
    C = A;
    C(:,i) = B;
    x(i,1) = det(C)/a_det;
 end 
```

列向量`x`现在应该是您的结果。可能有更快的方法来做到这一点，但这应该可行。您可以通过将结果与

```
x = A\B; 
```

# python - 从 Django 中包含的 .html 页面中的 POST 获取

> ID：13336124
> 
> 赞同：0
> 
> 时间：2012-11-11T22:26:29.790
> 
> 标签：python, django, include, http-post

我正在尝试通过 Django 中的 {% include %} 获取包含页面的 .html 页面的 POST 值。但是，它只返回初始 html 页面的 POST。

我包含的内部 html 有代码片段：

```
div id="edit_parameters"><a href="#{{job.slug}}" data-toggle="collapse">Edit Parameters</a></div>  
<div data-id="{{job.slug}}" id="{{job.slug}}" class="collapse">  
<form class = "form-inline" method="post">
    {% csrf_token %}
    {% for parameter in job.get_object.parameters %}
        <p>             
            <input type="text" class="input-small" name="{{parameter}}" value="" id ="{{parameter}}-input" placeholder="{{parameter}}">

        </p>
    {% endfor %}
<button type="submit" class="btn btn-primary run-job">Submit</button>
</form>
</div>
{% else %}
<div>
No editable parameters for this job.
</div>
{% endif %} 
```

我的外部 HTML 文件有一个片段：

```
<ul id="available-jobs">
    {% if jobs_same_io_type and jobs_diff_io_type %}<h3> Current Step </h3>
    {% elif jobs_same_io_type %} <h3> Next Step </h3> {% endif %}
    {% for job in jobs_same_io_type %}
            {% include "includes/job_li.html" with add=1 %}
    {% endfor %}
    {% if jobs_diff_io_type %} <h3> Next Step </h3> {% endif %}
    {% for job in jobs_diff_io_type %}
            {% include "includes/job_li.html" with add=1 %}
    {% endfor %}
    {% if not jobs_same_io_type and not jobs_diff_io_type %}
    <li class="full-height">There are no more available jobs.</li>
    {% endif %}
    </ul>
    <fieldset class="submit">
        {% csrf_token %}
        <input type="hidden" name="job_to_run" value="" id="job-to-run" />
        <input type="hidden" name="workflow_jobs" value="" id="ordered-jobs" />
        <input type="hidden" name="job_to_edit" value="" id="job-to-edit" />
        <input type="hidden" name="job_to_add" value="" id="job-to-add" />
        <input type="hidden" name="job_to_remove" value="" id="job-to-remove" />
        <input type="submit" name="done" value="I'm done, start the jobs" id="jobs-ready" />
    </fieldset> 
```

帖子中显示的所有内容都在第二个片段的输入中。但是，当我对所有 POST 值使用 request.POST 时，不包括我想要的第一个片段的参数。

在解释为什么我没有从包含的页面中获取值并找到可能的解决方案时，任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:44:46.093

在 HTML 中，只有表单元素中包含提交按钮的字段才会包含在 POST 中。您的第二个文件中的字段似乎根本不存在`form`，因此它们永远不会被发布。

# scheme - 在 Scheme 中使用条件

> ID：13336125
> 
> 赞同：3
> 
> 时间：2012-11-11T22:26:34.703
> 
> 标签：scheme

我必须创建以下内容： 一个名为 'proc2' 的 Scheme 过程，它接受 4 个数字作为参数并返回最大参数减去最小参数的值。

所以我想写（定义 proc2 lambda(abcd) ... ）

有什么方法可以同时评估 (> ab)、(> ac)、(> ad) 吗？我想获得最大（和最小）的数字，而不必编写嵌套的 if。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:30:20.870

可以用`max`and`min`程序吗？如果答案是肯定的，那很简单：

```
(- (max a b c d) (min a b c d)) 
```

如果不是，请记住 , `<`, `>`,`<=`接受`>=`可变数量的参数，所以这是有效的代码，并且会告诉您是否`a`小于、小于和小于`b`（尽管您必须测试更多的, ,组合确保这是最小值）。`b``c``c``d``b``c``d``a`

```
(< a b c d) 
```

还要记住考虑两个或多个数字相等的情况（这就是为什么使用`<=`而不是 是一个好主意`<`）。

无论如何，你必须使用条件。也许是嵌套`if`的，或者也许是`cond`为了让事情变得更简单——你可以自己解决细节，我猜这是家庭作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:04:35.617

如果要查找列表中最小和最大的成员，并且不允许使用标准的**min**和**max**库函数，那么我可以想到三种方法

1.  编写自己的 min 和 max 函数（提示：递归）。将两者都应用于列表以找到您的两个值。执行减法。
2.  编写一个组合函数（同样，递归），它将通过列表一次，返回另一个包含最大值和最小值的两个成员列表。如果返回列表中的第一个元素是最大值，那么`(apply - (find-min-and-max 3 2 8 7))`在**find-min-and-max**是您的函数的地方，将返回减法的结果。
3.  使用**地图**。

选项 1 的效率低于选项 2，但编写起来要简单得多。选项 3 比任何一个都更复杂，但实际上可以满足您的要求（即“同时”将**a**与**b**、**c**和**d进行比较）。**

例如，如果我定义了以下函数：

```
(define (compare test x l)
  (map (lambda (y) (test x y)) l)) 
```

然后

```
(compare < 3 '(1 2 4)) 
```

会回来`(#f #f #t)`

这对您有什么用处？好吧，如果`(compare < x l)`返回全部为真，则**x**小于**l**的所有元素。如果它返回全部 false，则**x**大于**l**的所有元素。所以你可以使用**map**来构建你想要的代码，但我认为这会很丑陋，而且不是最有效的方法。不过，它确实可以满足您的具体要求（列表元素的多个同时比较）。

# asp.net - 首先在 EF 代码中定义语言特定实体的有效方法

> ID：13336127
> 
> 赞同：1
> 
> 时间：2012-11-11T22:26:41.807
> 
> 标签：asp.net, entity-framework, localization, code-first

我正在开发一个多语言 ASP.NET Web 应用程序，它使用 Entity Framework Code First 来实现数据持久性。例如，我为我的“项目”实例定义了一个实体

```
public class Project
{     
    public Guid Id {get; set;}
    public string Name {get; set;}
    public string Descr {get; set;}    
} 
```

现在我想添加另一种语言支持，以允许管理员为不同语言的项目描述保存不同的字符串数据。现在我必须继续添加属性，例如

```
public string Name_Es {get; set;} 
public string Descr_Es {get; set;} 
```

并提供特定逻辑以允许填充这些特定于语言的字段。

是否有更有效的方法允许通过 EF Code First 保存特定于语言的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:02:11.593

有一次，我们做了一个项目项目，它的收获比较小。实体是这样的，

```
 public class Project
    {     
        public Guid Id {get; set;}
        public string Name {get; set;}
        public string Descr {get; set;}   
        publis List<Translation>  NameTranslations{get;set;}
    }

    public Translation
    {
      public int Id {get;set;}
      public int LanguageId {get;set;}
      public string Text{get;set;}
    } 
```

在 EF 层之上，我们可以使用[Automapper](http://automapper.codeplex.com/)将具有特定语言的域对象映射到 DTO。所以 Dto 没有所有的语言翻译。我们有一个具有当前语言 Id(Enum) 的静态变量，并且依赖于 Automapper 将从 NameTranslations 列表中选择正确的翻译。

```
 public class ProjectDto
    {     
        public Guid Id {get; set;}
        public string Name {get; set;}
        public string Descr {get; set;}   
    } 
```

这种方法比您的方法的优点是我们不需要为每个所需列的每种语言都有列。如果你想添加新语言，它只是添加新的枚举值，并且没有更改域对象。

# sitecore - Sitecore 基础知识

> ID：13336128
> 
> 赞同：1
> 
> 时间：2012-11-11T22:26:48.173
> 
> 标签：sitecore, sitecore6

我对 Sitecore WCM 很陌生，并且一直在做大量的研究和阅读。有人可以帮我澄清 Sitecore 的以下基础知识吗？

> 1.  我有许多 ASP.net Web 应用程序。如果我将项目转换为 Sitecore 项目，它会神奇地工作吗？
> 2.  如果我想创建新站点，是否需要在 IIS 中手动创建新站点，或者 Sitecore 在发布时是否需要？
> 3.  是否有任何可用的在线培训视频，找不到一个（Sitecore 营销演示除外）。
> 4.  如果我们有 MVC 和 Web 表单应用程序，是否可以迁移到 Sitecore？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T13:55:07.060

首先，欢迎来到 Sitecore！

关于你的问题：

**我有许多 ASP.net Web 应用程序。如果我将项目转换为 Sitecore 项目，它会神奇地工作吗？**

Sitecore 网站是一个 asp.net 网络应用程序。它恰好从数据库、DLL 和 web.config 条目开始，这些条目已准备好让您启动并运行 CMS。标准 .NET 代码可以正常工作。但是，当您首次将站点设置为 Sitecore 网站时，会发生的部分情况是 Sitecore 开始拦截页面请求并尝试将它们绑定到内容树中的页面。如果内容项不存在匹配路径，则不会返回。

如果您计划仅将现有页面与新的 Sitecore 页面放在一起，这一点尤其重要。您的 URL 最初无法正常工作，您必须进行一些配置才能让它们解析并被 Sitecore 忽略。

但是，如果您不想将您的页面放在站点旁边，而是将它们作为内容项集成到 Sitecore 解决方案中，您可能需要重新设计您的解决方案。Sitecore 对页面上的不同组件使用“子布局”(ASCX)，这些组件需要在数据库和代码库中表示，然后作为其展示细节的一部分添加到内容项中。如果您的网站已经针对组件进行了大量架构设计，这很容易，但有时您需要创建一堆 ASCX 来表示您的不同页面。

您的业​​务逻辑不应受到影响，除非您决定进行更改以开始利用 Sitecore 数据库中的配置或访问当前上下文项的属性。通过这种方式，您的代码应该“开箱即用”地执行。

* * *

**如果我想创建新站点，是否需要在 IIS 中手动创建新站点，或者 Sitecore 在发布时是否需要？**

Sitecore 在发布时不会“创建”任何内容。发布实际上只是将 Master 数据库中批准的内容推送到选定目标的 Web 数据库的操作。您的 IIS 站点，以及您的应用程序所需的任何其他内容，您只需像往常一样进行设置。

* * *

**是否有任何可用的在线培训视频，找不到一个（Sitecore 营销演示除外）。**

我强烈建议参加 Sitecore 提供的开发人员培训。这是对概念的很好介绍，特别是如果您没有与拥有大量 Sitecore 专业知识的人一起工作。它还可以让您结识正在进入 Sitecore 的其他人，并且可以互相帮助。

* * *

**如果我们有 MVC 和 Web 表单应用程序，是否可以迁移到 Sitecore？** Sitecore 的核心是一个 .NET 应用程序，并且可以使用 Web 表单。最新版本的 Sitecore 也支持 MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T04:34:25.607

我知道这个问题有点老了，已经回答了，但我想我有一些信息要补充。

> 1.  我有许多 ASP.net Web 应用程序。如果我将项目转换为 Sitecore 项目，它会神奇地工作吗？

没有什么是魔法。如果您想要 Sitecore 的*内容管理*或*营销*方面，请计划在 Sitecore 中重建您的网站。

> 2.  如果我想创建新站点，是否需要在 IIS 中手动创建新站点，或者 Sitecore 在发布时是否需要？

Sitecore*是*一个 IIS 站点。安装 Sitecore 时，它​​会创建一个 IIS 站点以及至少 3 个数据库（核心、主数据库和 Web）。Sitecore 可以有多个子站点，但它们都构建在 Sitecore 的单个 IIS 站点内。

> 3.  有没有可用的在线培训视频，找不到一个（sitecore 营销演示除外）。

最初回答这个问题时，这些视频可能不存在……所以这里有一些我觉得有用的。

*   [Sitecore 培训：开发人员基础系列 - 为 Sitecore 创建 Visual Studio 项目](https://www.youtube.com/watch?v=UHyDQ1lx9S0)
*   [Sitecore MVC - 入门（第 1 部分）](https://www.youtube.com/watch?v=i3Mwcphtz4w)
*   [Sitecore MVC -- 查看渲染、@Html().Sitecore 和模型](https://www.youtube.com/watch?v=dW_rQp9bMmE)

> 4.  如果我们有 MVC 和 Web 表单应用程序，是否可以迁移到站点核心？

Sitecore 都支持 Webforms 和 MVC。但是，当您在 Sitecore 中重建它们时，您会以不同的方式考虑它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T13:59:27.347

1）您可以创建空白解决方案并添加现有项目，如 sublayout、css、javascript 等，显然需要更改一些代码隐藏。但是 sitecore 的数据库结构与普通的 web 应用程序不同，因此您需要创建模板、项目等。

2) 对于 sitecore ，您需要在 IIS 中创建网站并在您的主机文件中进行如下输入：

本地路径 C:\Windows\System32\drivers\etc 找到主机文件并在该文件中添加条目为 127.0.0.1 yoursitename.com

3) 对于演示视频，您可以尝试 Sitecore 频道视频，从 Youtube 学习基本的 sitecore。

# android - 设置行背景颜色时不显示文本颜色

> ID：13336129
> 
> 赞同：0
> 
> 时间：2012-11-11T22:26:49.383
> 
> 标签：android

如果我的行是红色的，则文本不会设置为绿色和粗斜体。调试时，我可以看到它告诉 TextView 设置每个 textViews 设置。

```
TableRow row = new TableRow(getContext());
            row.setLayoutParams(new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
            String[] items = list.get(l).split(":");
            for(int i=0; i < items.length; i++){
                //see if i need to colour row
                if(items[i].startsWith("colorme_") == true) {
                    if (items[i].substring(8).equals("red") == true) {
                        row.setBackgroundColor(Color.RED);
                    }
                } else { 
                    //create a temp textview then add to row
                    TextView tempTV = new TextView(getContext());
                    tempTV.setText(items[i].toString());
                    //test against correct answers and colour text view green if correct
                    if (correctAnswers != null && correctAnswers.size() > i) {
                        if (correctAnswers.get(i).equals(items[i].toString()) == true) {
                            tempTV.setTextColor(Color.GREEN);
                            tempTV.setTypeface(null, Typeface.BOLD_ITALIC);
                        }                               
                    }
                    row.addView(tempTV,lpTextView); 
                }
            }
            //add the row
            tempTable.addView(row); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:36:54.760

对我来说，您似乎已将不同侧面的两个不同颜色设置代码分开，`if else`因此它们不会同时被调用，因为如果`if`语句返回 true，则不会触发 else 语句，您将通过`setTextColor`代码而不运行它，反之亦然，如果 if 语句返回 false，那么您将跳过更改背景颜色而仅更改文本颜色。

希望这是有道理的

编辑这里是一个例子

```
if(items[i].startsWith("colorme_") == true) {
    //this is where your are preforming your change row color to red
} else{
    //this is where you are setting your text color to green
} 
```

# javascript - HTML 表单提交集合中的单个项目

> ID：13336137
> 
> 赞同：0
> 
> 时间：2012-11-11T22:27:51.753
> 
> 标签：javascript, html, asp.net-mvc, validation, asp.net-mvc-4

我有一个包含卖家集合的视图模型的部分视图。我遍历所有卖家以呈现列表。这是视图模型：

```
public class SellersPartialViewModel
{
    public IList<OrderViewModel> Sellers { get; set; }
} 
```

在部分视图中，当我遍历集合时，我使用 Html.BeginCollectionItem("Sellers")，这是我的部分代码（仅供参考，我已经剥离了很多不需要的无用代码） ):

```
<div id="sellers-list">
    @{
        var i = 0;
        while (i < Model.Sellers.Count) { 
            var seller = Model.Sellers[i];

                using (Ajax.BeginForm(MVC.Video.PurchaseShares(), purchaseSharesAjaxOptions, new { @class = "seller-form", id = "seller-form-" + i })) {
                    @using(Html.BeginCollectionItem("Sellers")) {
                        @Html.TextBoxFor(m => seller.Qty, new { @class = "buyer-qty" })
                        @Html.ValidationMessageFor(m => seller.Qty)

                       <input class="buyer-qty-submit" name="Qty" type="hidden" value="" />
                       <button type="submit">Buy</button>
                    }
                }
            }

            i++;
        }
    }
</div> 
```

这可以很好地呈现部分并让客户端验证正常工作，但是我希望每个卖家都有名为的输入`qty`和`orderId`一个名为`PurchaseShares(int orderId, int qty)`.

唯一的问题是表单是使用奇怪的 GUID 提交的`Sellers[5b5fd3f2-12e0-4e72-b289-50a69aa06158].seller.Qty`，我理解这对于提交集合是正确的，但我不需要这样做。

现在我有一些 Javascript 正在更新`class="buyer-qty"`他们选择的任何内容，它工作正常，但必须有更好的方法来做到这一点，不是吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:05:49.177

`Html.BeginCollectionItem`如果您不想提交集合，为什么要使用帮助程序？

您可以有一个部分代表您的 Order 集合项 ( `_Order.cshtml`)：

```
@model OrderViewModel

@Html.TextBoxFor(m => m.Qty, new { @class = "buyer-qty" })
@Html.ValidationMessageFor(m => m.Qty) 
```

在您的主视图中，只需遍历您的集合属性并呈现每个元素的部分：

```
@model SellersPartialViewModel

<div id="sellers-list">
    @foreach (var seller in Model.Sellers)
    {
        using (Ajax.BeginForm(MVC.Video.PurchaseShares(), purchaseSharesAjaxOptions, new { @class = "seller-form" }))
        {
            @Html.Partial("_Order", seller)
            <button type="submit">Buy</button>
        }
    }
</div> 
```

现在您提交的控制器操作可以直接使用相应的视图模型：

```
[HttpPost]
public ActionResult PurchaseShares(OrderViewModel order)
{
    ...
} 
```

因为：

```
[HttpPost]
public ActionResult PurchaseShares(int orderId, int qty)
{
    ...
} 
```

对我来说有点丑，但如果你喜欢它也可以。

另请注意，我故意删除了`Qty`代码中显示的隐藏字段，因为它会与同名的输入元素冲突。另外不要忘记为`orderId`您的控制器操作所期望的参数包含一个输入字段，或者当您提交它时可能会爆炸。如果您不想将其作为输入字段包含在内，您也可以将其作为帮助程序`routeValues`参数的一部分发送。`Ajax.BeginForm`

# java - SAX 解析和特殊字符

> ID：13336140
> 
> 赞同：3
> 
> 时间：2012-11-11T22:28:03.607
> 
> 标签：java, xml-parsing, saxparser

我想使用 SAX 解析器从 xml 文件中解析一些数据。我的xml如下：

```
<categories>
 <cat>Pies &amp; past</cat>
 <cat>Fruits</cat>
</categories> 
```

为了解析这些数据，我扩展了 DefaultHandler。

解析后的输出为：

```
cat 1 = Pies

cat 2 = &

cat 3 = past

cat 4 = Fruits 
```

为什么会发生这种情况而不是得到：

```
cat 1 = Pies & past

cat 2 = Fruits 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-11T22:45:39.887

我的猜测是，您将每次调用都`characters`视为传递`cat`元素的完整文本。您应该对处理程序进行编码，以便连续调用来`characters`累积文本，并且只在`endElement`事件中捕获它：

```
public class CatHandler extends DefaultHandler {
    private StringBuilder chars = new StringBuilder();

    public void startElement(String uri, String lName, String qName, Attributes a)
    {
        final String name = qName == null ? lName : qName;
        if ("cat".equals(name)) {
            chars.setLength(0);
        } else . . .
    }

    public void endElement(String uri, String lName, String qName) {
        final String name = qName == null ? lName : qName;
        if ("cat".equals(name)) {
            String catName = chars.toString();
            // do something with cat name
        } else . . .
    }

    public void characters(char[] ch, int start, int length) {
        chars.append(ch, start, length);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T22:53:13.577

该`characters()`方法不必返回完整的文本元素。相反，您应该整理每次`characters()`调用中可用的文本，并将这些文本连接到相应的`endElement()`调用中。

从[文档](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html#characters%28char%5B%5D,%20int,%20int%29)：

> Parser 将调用此方法来报告每个字符数据块。SAX 解析器可以在单个块中返回所有连续的字符数据，*也可以将其拆分为多个块*

（我的重点）

# java - Castor 解组自动命名的原始类型

> ID：13336141
> 
> 赞同：1
> 
> 时间：2012-11-11T22:28:06.297
> 
> 标签：java, xml, castor

首先，请原谅我的英语不好

您能否建议我如何解组以下 XML 结构：

```
<elements>
    <element>
        <long>1</long>
    </element>
    <element>
        <string>Test</string>
    </element>
    <element>
        <long>5</long>
    </element>
</elements> 
```

其中 long, string - 基本的 JAVA 类型。

以下是每个“元素”对编组的描述：

```
<class
    name="com.test.MessageElement"
    verify-constructable="false">

    <field name="element">
        <bind-xml auto-naming="deriveByClass" />
    </field>

</class> 
```

先感谢您

# .net - 用 System.Speech.Synthesis 发音美元金额

> ID：13336143
> 
> 赞同：2
> 
> 时间：2012-11-11T22:28:11.690
> 
> 标签：.net, currency, text-to-speech, speech-synthesis

如果我在 .NET 的语音合成器中运行它

```
 phrase.AppendText("Our cost is");
 phrase.AppendText(9.ToString("c")); 
```

它发音为：

`dollars nine dot zero zero`

System.Speech.Synthesis 中的文档[`SayAs`](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.sayas.aspx)枚举说：

> > 列举时间、日期和货币等元素的内容类型。

伟大的！除了枚举实际上没有任何与货币相关的东西！只是日期、数字和单词的拼写。

看起来在 Speech Server 2007 中他们*曾经*同时拥有电话号码和货币，但现在已经不存在了！

我意识到我可能已经写了一个正则表达式来在我写这个问题的时间里解析它 - 但如果有办法以更好的方式做到这一点，我很想知道如何做。

# android - 当我尝试在 onPreExecute 的 AsynchTask 中显示它时，对话框没有出现

> ID：13336145
> 
> 赞同：0
> 
> 时间：2012-11-11T22:28:29.460
> 
> 标签：android, android-asynctask

当我调用 AsynchTask 时，我试图向用户显示一个对话框。

我正在尝试使用这样的 onPreExecute 方法：

```
 protected void onPreExecute(Long result) 
     {
         dialog = new Dialog(UpdateProfileActivity.this);

         dialog.setContentView(R.layout.please_wait);
         dialog.setTitle("Updating account details...");

         dialog.show();      
     } 
```

然后在 onPostExecute 方法中执行以下操作：

```
 @Override
    protected void onPostExecute(String result) 
    {    
        try {
            dialog.dismiss();
        } catch (Exception ee) {
            // nothing
        } 
```

但是对话框没有出现。我查看了文档，尽管提到了 onPreExecute，但我不确定它是如何使用的。我的根本没有被调用。

它的正确用途是什么？如何确保正确打开和关闭对话框？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:33:42.270

您的`onPreExecute`方法永远不会被调用，因为您没有正确地覆盖它。正确的方法签名应该是：

```
@Override
protected void onPreExecute(){
    //Your code
} 
```

作为一般提示，`@Override`在覆盖方法时始终使用注释。当您尝试覆盖不存在的方法时，或者当您输入错误时，会出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:36:10.857

Niek 关于未调用预执行是正确的。但是，在我看来，您可能想要的是 ProgressDialog。你可以这样设置

```
ProgressDialog progress = new ProgressDialog(context);
progress.setMessage("Loading Message");
progress.setTitle("Title");
progress.show(); 
```

然后，在 onPostExecute 中，您将调用

```
progress.dismiss(); 
```

删除它。如果您需要看起来更自定义的东西，您可以将进度对话框子类化以添加自定义图像/其他自定义。

# r - R使用比预期更多的内存

> ID：13336147
> 
> 赞同：0
> 
> 时间：2012-11-11T22:28:39.400
> 
> 标签：r

我有一个从 Java 程序调用的 Rscript。该脚本的目的是在 ggplot 中自动生成一堆图形，然后将它们放在 pdf 上。它已经变得有点大了，可能有 30 个图表，每个图表都是从自己的脚本中调用的。

输入是 5-20mb 的制表符分隔文件，但 R 会话有时会使用 12gb 的内存（在 mac 10.68 btw 上，但这将在所有平台上运行）。

我已经阅读了有关如何查看对象的内存大小的信息，并且没有任何东西超过 25mb，即使它为每个函数和每个过滤器步骤深度复制所有内容，它也不应该接近这个级别。

我也试过 gc() 无济于事。如果我执行 gcinfo(TRUE) 然后 gc() 它告诉我它正在使用类似 38mb 的内存。但是活动监视器高达 12gb，并且速度变慢可能是由于高清上的分页。

我尝试通过一个 bash 脚本调用它，在该脚本中我做了 ulimit -v 800000 但没有用。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:55:11.187

在进行分配的过程中，R 总是会制作临时副本，有时不止一份，甚至两份。每个临时分配都需要用于分配对象的完整大小的连续内存。因此，通常的建议是计划让_at_least_ 三倍于可用的*连续*_memory 量。这意味着您还需要关注有多少其他非 R 程序正在争夺系统资源，以及了解 R 如何使用您的内存。您应该尝试重新启动计算机，仅运行 R，然后查看如果你获得成功。

20mb 的输入文件可能会扩展很多（每个双精度字节 8 个字节，向量中的每个字符元素可能更多），具体取决于文件的结构。如果您在一个大文件中绘制每个点，pdf 文件对象也将占用相当多的空间。

我的经历与其他评论的人不一样。我`gc()`在进行内存密集型操作之前会发出问题。您应该提供代码并描述“不好”的含义。您是否遇到错误或观察到虚拟内存的使用......还是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:17:45.730

对于没有使用代码发布更全面的描述，我深表歉意。它和输入一样长。但是我在这里得到的回复仍然很有帮助。这是我主要解决问题的方法。

我有可变数量的列，其中一些异常值非常多。但我不需要极端异常值，所以我只是排除它们并切断那些额外的列。仅此一项就大大降低了内存使用量。我以前没有查看过虚拟内存使用情况，但有时它高达 200gb 哈哈。这使它降到了2GB。

每个图表都是在其自己的函数中创建的。所以我重新排列了代码，首先生成每个图形，然后打印到 pdf，然后是 rm(graphname)。

此外，我有许多循环，我在数据框中创建新列。我没有这样做，而是在这些计算中创建了未附加到数据帧的向量。这实际上具有大大简化一些代码的好处。

然后在不向现有数据帧添加列而是制作列向量之后，将其减少到 400mb。虽然这仍然超出了我的预期，但它完全在我的限制范围内。我的用户都在我的公司里，所以我可以控制它在哪些计算机上运行。

# arrays - SMARTY foreach 数组（排序顺序）

> ID：13336153
> 
> 赞同：0
> 
> 时间：2012-11-11T22:29:53.377
> 
> 标签：arrays, foreach, smarty

我运行使用 SMARTY 的 Prestashop 1.5。显示数量折扣时，它们不会按逻辑顺序显示。

我想按以下顺序排列它们：

先 1 个单位 然后
2 个单位 然后
3 个单位 然后
4 个单位 然后
5 个单位

而不是按照我添加它们的顺序，现在就是这种情况。任何人都可以帮忙吗？

兄弟，
托拜厄斯

我试过 |@array_reverse 但它似乎不起作用......

当前代码：
................................
{if $quantity_discounts}
{foreach from=$quantity_discounts item='quantity_discount '名称='数量折扣'}

xxxxx

{/foreach}
{/if}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T22:54:00.070

在 Classes/specificprice.php 第 293 行：
更改：

```
ORDER BY `id_product_attribute` DESC, `from_quantity` DESC, `id_specific_price_rule` ASC, `score` DESC 
```

进入：

```
ORDER BY `id_product_attribute` DESC, `from_quantity` ASC, `id_specific_price_rule` ASC, `score` DESC 
```

# vba - Visual Basic - picturebox name variable increment

> ID：13336155
> 
> 赞同：0
> 
> 时间：2012-11-11T22:30:18.530
> 
> 标签：vba, variables, picturebox

Is there a way to set the image from one PictureBox object to another? For example:

```
pictureboxA1.image = pictureboxB1.image
pictureboxA2.image = pictureboxB2.image
pictureboxA3.image = pictureboxB3.image 
```

I did a similar thing with TextBox controls, but this code isn't working for me:

```
For i = 0 To 2
  Me.Controls("picturebox" + "A" & i + 1).image = Me.Controls("picturebox" + "B" & i + 1).image
Next i 
```

When I run this, I get an error stating `.image is not a member of 'System.Windows.Forms.Control'`.

* * *

i know that is pictureboxA1.image = pictureboxB1.image.

but if i try like this

```
For i = 0 To 2
  Me.Controls("picturebox" + "A" & i + 1).image = Me.Controls("picturebox" + "B" & i + 1).image
Next i 
```

it says that image is not a member of controls. because i have to do this pictureboxA1.image = pictureboxB1.image, 21 times.

like pictureboxA1, pictureboxA2, ... 3, 4, 5, 6, 7 until 21.

and if i do it like this

```
pictureboxA1.image = pictureboxB1.image 
```

i have to right the code 21 times and if i do it with for its just one time xD.

and i tryed .picture it says the same thing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:17:51.570

Sorry, I should have seen this sooner. You need to set the control to a PictureBox in order for it to recognize the property. I think. Something like this might work. I don't have access to a PictureBox control, so it's a guess:

```
Dim pic as PictureBox

For i = 0 To 2
  set pic = Me.Controls("picturebox" + "A" & i + 1)
  pic.image = Me.Controls("picturebox" + "B" & i + 1).image
Next i 
```

# android - Android 相机 API 的包装库

> ID：13336157
> 
> 赞同：9
> 
> 时间：2012-11-11T22:30:32.663
> 
> 标签：android, camera

是否有用于 Android Camera API 的包装库，涵盖不同 API 版本中的所有缺陷（fe 检查版本是否有前置摄像头、自动对焦或闪光灯，并在 UI 中为其提供控制）和所有硬件不同手机中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-12T11:06:53.953

对于在这里偶然搜索相机库的任何人，**CWAC-Camera 库**有助于减少某种广泛的 Android 相机 API，同时为各种设备带来更好的支持：

[https://github.com/commonsguy/cwac-camera](https://github.com/commonsguy/cwac-camera)

希望这可以帮助！

**已编辑**

CWAC-Camera 库已弃用

使用第二个版本

[https://github.com/commonsguy/cwac-cam2](https://github.com/commonsguy/cwac-cam2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T15:32:33.780

如果你不是那么模棱两可，Square Camera 是一种非常简单的任务方法，而且看起来效果很好：[https ://github.com/boxme/SquareCamera](https://github.com/boxme/SquareCamera)

没有视频记录，没有选项，但良好的焦点和方形方法避免了分辨率和纵向/横向模式的问题。似乎适用于 CWAC2 不适用的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:20:06.263

我现在面临同样的问题。我只是无法理解在 Android 上做这么简单的事情是如此困难的事实：拍照并将其保存到设备中。

Anyroad：我偶然发现了这个库。我还没试过。也许它可以帮助你：[https ://github.com/girishnair12345/Girish-Camera-Library-Project](https://github.com/girishnair12345/Girish-Camera-Library-Project)

# javascript - 用于在线测验的 JavaScript？

> ID：13336159
> 
> 赞同：6
> 
> 时间：2012-11-11T22:30:49.810
> 
> 标签：javascript

也许是一个菜鸟问题，但我真的很困惑。
我正在尝试进行在线测验，用户必须在 4 个可能的答案之间进行选择。但我被卡住了，好吧，因为 1 个问题真的让我很困扰。所以：

我有一个 JavaScript 函数，当用户点击错误的答案时，它会改变按钮的背景颜色并禁用它。并且正确的答案按钮（提交）调用不存在的功能，只是为了迷惑人们，如果他们决定快速查看源代码。一切都很顺利，但后来我开始思考。如果用户决定更深入地查看我的源代码怎么办？他将能够看到我的 JavaScript 函数，而且，他可能不用真正玩就可以找出正确的答案。

有什么办法可以隐藏源代码（据我所知，JavaScript 不可能），但也许我可以使用别的东西？其他开发人员在这些情况下使用什么？有什么建议么？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T22:34:38.147

如果您想真正安全，您必须在服务器端进行（例如 PHP）。你可以做的让作弊者更难做的是用各种各样的 js 混淆器之一来混淆你的 javascript 代码，[这种](http://www.javascriptobfuscator.com/)混淆器永远不会带来完全的安全性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-11T23:01:07.280

用户可以作弊的原因是答案在 JavaScript 代码中。

解决方案：**不要将答案放在 JavaScript 代码**中。而是将其保存在服务器上。

像这样：每当用户更改他们对问题的答案时......

1.  JavaScript 向服务器发送答案。
2.  服务器回复 YES 或 NO。
3.  JavaScript 显示对用户的回复。

用户永远看不到答案，只知道答案是真是假。

**tl; 博士**学习 AJAX。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T22:33:15.020

这是一个**很好的问题**，每个 Web 开发人员都应该问自己......

这是我们作为 Web 开发人员每天面临的一个主要问题。我们的 JavaScript 是可查看的，有时甚至是可编辑的。不相信来自客户的任何东西！

我通常做的是

1.  **在服务器上**生成某种类型的唯一哈希
***   将此哈希嵌入 HTML 和 JavaScript。*   将此哈希与任何请求一起发送到服务器。*   通过再次重新创建哈希并确保它与发送的哈希匹配来验证服务器上的哈希。**

 **哈希可以是项目 id、会话 id、一些盐和任何其他可识别的数据的串联，您可以重建这些数据以验证请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-26T09:22:24.470

为了完成其他答案，提供学习如何设置服务器可能会花费您几天的时间，我将为您提供一个 5 分钟的指南，以设置一个简单的 node.js 服务器来隐藏您的答案。

安装 node.js。

创建一个名为`server.js`以下内​​容的文件。

```
var express = require("express"),
    app = express();
app.get("first_answer",function(req,res){
   res.send("b");
});
app.listen(8080); 
```

打开终端，输入

```
npm install express
cd path_to_the_folder_you_placed_the_file
node server.js 
```

这将安装 express.js 模块并运行服务器。

现在，在您的站点上，使用 jQuery，只需从服务器请求答案。使用 jQuery 的示例：

```
var user_answer = ...
$.get("http://localhost:8080/first_answer",function(answer){
    if (answer == user_answer)
        alert("you got it right!");
}); 
```

有关更复杂的示例和服务器的最佳使用，请阅读`express.js`文档。(;**

# android - 1046：未找到类型或不是编译时常量：ground

> ID：13336163
> 
> 赞同：0
> 
> 时间：2012-11-11T22:31:50.553
> 
> 标签：android, actionscript-3, flash, collision-detection

我问这个问题是因为我试图在我的平台游戏中进行有效的碰撞检测，我使用本教程使用的方法：http: [//as3gametuts.com/2012/01/08/platformer-3/](http://as3gametuts.com/2012/01/08/platformer-3/)

这是代码中不起作用的部分：

```
stage.addEventListener(Event.ENTER_FRAME, loop);

function loop(e:Event):void
{
    if (ground.hitTestPoint(borat.x + leftBumpPoint.x,borat.y + leftBumpPoint.y,true))
    {
        trace("leftBumping");
        leftBumping = true;
    }
    else
    {
        leftBumping = false;
    }

    if (ground.hitTestPoint(borat.x + rightBumpPoint.x,borat.y + rightBumpPoint.y,true))
    {
        trace("rightBumping");
        rightBumping = true;
    }
    else
    {
        rightBumping = false;
    }

    if (ground.hitTestPoint(borat.x + upBumpPoint.x,borat.y + upBumpPoint.y,true))
    {
        trace("upBumping");
        upBumping = true;
    }
    else
    {
        upBumping = false;
    }

    if (ground.hitTestPoint(borat.x + downBumpPoint.x,borat.y + downBumpPoint.y,true))
    {
        trace("downBumping");
        downBumping = true;
    }
    else
    {
        downBumping = false;
    } 
```

其中 ground 是舞台上影片剪辑的实例名称

我收到此错误：

```
1046: Type was not found or was not a compile-time constant: ground. 
```

感谢所有阅读本文的人

# django - Django - django 模板和标签

> ID：13336165
> 
> 赞同：2
> 
> 时间：2012-11-11T22:31:52.287
> 
> 标签：django, inheritance, frontend, templating

我是 Django 框架的新手，我正在尝试按照步骤来逐步执行官方 django 项目的文档。在模板中，我有一个名为 HTML 的文件`base.html`和以下代码：

```
<!DOCTYPE HTML>
<html lang="en">
<head>
<title>{ % block title %}{ % endblock %}</title>
</head>
<body>
<h1>My helpful timestamp site</h1>
{ % block content %}{ % endblock %}
{ % block footer %}
<hr>
<p>Thanks for visiting my site.</p>
{ % endblock %}
</body>
</html> 
```

和其他名为“hour_ahead.html”的文件，代码如下：

```
{ % extends "base.html" %}
{ % block title %}Hours ahead{ % endblock %}
{ % block content %}
<p>In {{ plus.offset }} Hours. It will be {{plus.dt}} .</p>
{ % endblock %} 
```

在 view.py 中，这是实现模板的方法：

```
def hours_ahead(request, offset):
    offset = int(offset)
    dt = datetime.datetime.now() + datetime.timedelta(hours=offset)
    c = {'plus':{'offset':offset, 'dt':dt}}
    return render_to_response('hour_ahead.html',c) 
```

都是正确的，但是当我想用 Chrome 查看这个页面时，我正在看这个：

> { % extends "base.html" %} { % block title %}Hours ahead{ % endblock %} { % block content %} In 1 Hours. 时间是 2012 年 11 月 12 日上午 12 点 21 分。
> 
> { % 端块 %}

我的问题是：如何隐藏`{% ...%}`前端的所有标签？并且因为不要打印“提前几个小时”的标题？

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T22:36:02.493

删除 { 和 % 之间的空格

# css - 将鼠标悬停在图像上，出现一个链接

> ID：13336167
> 
> 赞同：0
> 
> 时间：2012-11-11T22:32:00.553
> 
> 标签：css, hover

嗨，我有以下代码，但它不起作用。它假设将鼠标悬停在图像上并获得链接标题。

```
 $('ul li').mouseenter(function(){
    var image= $(this).find('img'),
        thumbnail = $(this).find('div');

    thumbnail.width(image.width());
    thumbnail.height(image.height());
    thumbnail.fadeIn();
}).mouseleave(function(){
     var image= $(this).find('img'),
        thumbnail = $(this).find('div');

    thumbnail.width(image.width());
    thumbnail.height(image.height());
    thumbnail.fadeOut();
}); 
```

这是整个代码[http://jsfiddle.net/wdAzE/3/](http://jsfiddle.net/wdAzE/3/)

# gcc - 如何指示 gcc/clang 将临时文件输出到特定目录

> ID：13336168
> 
> 赞同：14
> 
> 时间：2012-11-11T22:32:00.833
> 
> 标签：gcc, command-line, g++, clang, clang++

在使用 --save-temps 选项保存临时文件时，gcc/clang 将临时文件输出到与输入文件相同的目录中。是否有一个选项可以指示 gcc 将文件输出到其他目录。

或者

当不使用 --save-temps 选项时，临时文件会在默认目录中创建（即 $TMPDIR，例如 /tmp），但一旦创建了目标文件，它们就会被删除。有没有办法指示编译器保留这些文件而不是仅仅删除它们（我认为唯一的选择是 --save-temps，它有上述问题）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T00:22:17.810

如果您使用`-save-temps=obj`临时文件与输出文件放在同一目录中，例如

```
gcc -save-temps=obj -o dir/foo.o foo.c 
```

将创建`dir/foo.i`

显然，这在手册中有记录。所有支持的选项都列在[https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html](https://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html)并且链接到[https://gcc.gnu.org/onlinedocs/gcc/Developer-Options.html](https://gcc.gnu.org/onlinedocs/gcc/Developer-Options.html)的`-save-temps`.

# javascript - 除了className，我如何收集一个类的css属性？

> ID：13336169
> 
> 赞同：2
> 
> 时间：2012-11-11T22:32:09.590
> 
> 标签：javascript, css, dom

例如，我可能有一些看起来像这样的 CSS 内容：

```
.divType1 {
    position: absolute;
    width: 60px; height: 60px;
    left: 400px; top: 100px;
    border: 1px solid #89B;
    z-index: 0;
 } 
```

现在在 Javascript 中，我想收集 div 类 divType1' css 属性，但只提供 div 类，所以我不能做一些形式（伪代码）：

```
selectDivWithClass( divType1 ).getCss(left). 
```

我可以通过使用类 divType1 实例化一个 div 并获取它的 css 属性来破解某些东西，然后销毁它，但是有更好的方法吗？

* * *

**最初的问题有一些模棱两可，导致很多好的答案可以在其他环境中使用。所以这里是重述的一个：**

使用 Javascript，我如何收集样式表中制造商指定的 div 类的 css 属性的子集，因此没有浏览器默认值。此外，假设只有“plain-vanilla”属性会出现在 css 中。所以像宽度，高度这样的东西，而不是像这样的东西：

```
transition: width 2s;
-moz-transition: width 2s; /* Firefox 4 */
-webkit-transition: width 2s; /* Safari and Chrome */
-o-transition: width 2s; /* Opera */ 
```

我只得到了类名，所以我没有得到我需要事先收集的属性列表。

最后，理想情况下，该函数应将对象映射样式属性返回给值。

在我尝试做的范围内，@RobG 在下面的回答**解决了这个问题。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:39:35.013

您可以遍历[document.styleSheets](https://developer.mozilla.org/en-US/docs/DOM/document.styleSheets)，但不一定比使用该类实例化 DocumentFragment 并获取其属性更快：

```
var stylesheets = document.styleSheets;
for (var i=0; i < stylesheets.length; i++) {
    var rules = stylesheets[i].cssRules || stylesheets[i].rules;
    for (var j=0, rule; rule = rules[j++]; ) {
        if (rule.selectorText === '.divType1') {
            alert(rule.style.left)
        }
    }
} 
```

小提琴：http: [//jsfiddle.net/dandv/VnCMR/1/](http://jsfiddle.net/dandv/VnCMR/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:34:21.317

您可以将其添加到 div 然后检查详细信息？这在 jQuery 中运行良好，不幸的是，等效的 javascript 在样式对象中不包含基于类的样式。所以：

```
var d = $("<div>").addClass("divType1");
console.log(d.css("left")); 
```

将在 jQuery 中工作。这在 JS 中不会：

```
var d = document.createElement("div");
d.className = "divType1";
console.log(d.style.left); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:40:14.793

你很容易在这里进入跨浏览器地狱。

如果您有一个现有元素（可以使用已经提到的文档片段创建），那么有效的方法（至少在 chrome 中）是

```
var el = document.getElementsByClassName("divType1")[0];
alert(window.getComputedStyle(el).getPropertyValue("left")); 
```

但是看看[这个](http://www.csscripting.com/css-multi-column/dom-width-height.php)，你可能会选择在这里使用像 jQuery 这样的 javascript 库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T23:00:55.477

这为您提供了第一个样式表中的所有文本

```
document.styleSheets[0].ownerNode.innerHTML 
```

虽然此函数接受选择器字符串并应返回其文本值

```
function getStyleBySelector(selector) {
    var sheets = document.styleSheets;
    var selectorRule = false;

    for(var x = 0; x < sheets.length; x++) {
        var rules = sheets[x].cssRules;
        for(var y = 0; y < rules.length; y++) {
            if(rules[y].selectorText == selector) {
                selectorRule = rules[y]
                break;
            }
        }

        if(selectorRule) {
            break;
        }
    }

    var styling = {};

    if(selectorRule) {
        return selectorRule.cssText
    }

    return styling;
} 
```

在你的情况下调用它

```
getStyleBySelector(".divType1"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T00:34:16.657

除非您可以过滤掉所有其他规则和默认属性的影响（在不同的浏览器中可能不同，但在某些浏览器中可能与规则属性相同，但在其他浏览器中可能与规则属性相同），否则检查应用了规则的元素将不起作用. 在默认配置中，这似乎不太可能在超过一两个浏览器中成功。

要以跨浏览器的方式将 CSS 规则文本作为文本获取，请使用以下内容：

```
function getCssRule(selector) {
  var sheets = document.styleSheets;
  var rulesObj, rules, ruleText;

  if (sheets.length) {

    // Determine the name of the rules object
    rulesObj = typeof sheets[0].cssRules != 'undefined'? 'cssRules' : 'rules';

    for (var i=0, iLen=sheets.length; i<iLen; i++) {
      rules = sheets[i][rulesObj];

      for (var j=0, jLen=rules.length; j<jLen; j++) {
        if (rules[j].selectorText.indexOf(selector) > -1) {
          return rules[j].cssText;
        }
      }
    }
  }
} 
```

请注意，这将返回规则的实际文本。

此外，还有一个[CSSValue](http://www.w3.org/TR/2000/REC-DOM-Level-2-Style-20001113/css.html#CSS-CSSValue)属性，但我不确定是否支持。

### 编辑

如果你只处理规则部分而不是选择器，你应该能够使用类似的东西把它变成一个对象：

```
function cssTextToObj(cssText) {

  // Trim selector, initial { and closing } plus whitespace, split on ';'
  var props = cssText.replace(/^[^{]+{\s*/,'').replace(/\s*}\s*$/,'').split(';');
  var resultObj = {};
  var bits;

  for (var i=0, iLen=props.length; i<iLen; i++) {

    // Split each property assignment on ':' only where
    // props[i] has a value
    if (props[i] != '') {
      bits = props[i].split(':');
      resultObj[bits[0]] = bits[1];
    }
  }
  return resultObj;
} 
```

您可能想要修剪前导和尾随空格的属性名称和值，但这应该可行。我不是 CSS 属性方面的专家，所以上面可能需要一些调整。

请注意，如果有尾随';' （如果原始规则没有，浏览器似乎会添加），最后一个成员`props`将是 '' （空字符串）。

您绝对无法保证的一件事是属性的顺序，而不是您可以知道`for..in`无论如何都会返回它们的顺序。IE 似乎以`cssText`自己的顺序返回，Firefox 似乎保持原来的顺序。

# node.js - 在coffeescript 中使用while 循环重复jake 任务？

> ID：13336170
> 
> 赞同：0
> 
> 时间：2012-11-11T22:32:19.887
> 
> 标签：node.js, coffeescript, jake

我试图在 jake 中运行一个任务 10 次：

```
task 'default', (page) ->
    page = process.env.page
    running = 0
    while running < 10
        ex = jake.createExec(["casperjs test.coffee --page=#{page}"],
            printStdout: true
        )
        ex.run()
        running++
        page++ 
```

这将运行测试 10 次。这很好。但是我希望它按顺序运行，例如首先是 page1，然后是 page2，然后是 page3 等。所以第一页必须在它 deos page2 之前完成。此刻它并行或异步运行它们。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:49:41.947

我将[Async](https://github.com/caolan/async)库用于这种事情。就像是：

```
async = require 'async'
pages = for i in [0...10]
  do ->
    j = i
    -> 
      ex = jake.createExec ["casperjs test.coffee --page=#{j}"],
        printStdout: true
      ex.run()
async.series pages 
```

不过，我想知道为什么您需要它们连续运行。

# c - 语法错误：缺少';' 在“类型”之前

> ID：13336179
> 
> 赞同：27
> 
> 时间：2012-11-11T22:33:19.053
> 
> 标签：c

所以我有这个错误：

> 错误 3 错误 C2143：语法错误：缺少 ';' 在“输入”之前 g:\lel\tommy\tommy\tommy.c 34 汤米

从此代码块：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <malloc.h>
#include <conio.h>

struct matrep {
      unsigned rows,cols;
      double *matrix;
};

int matrix_read(struct matrep *mat, const char *filename)
{
    FILE *fptr;
    unsigned m, n;

    if ((fptr = fopen(filename, "r")) == NULL)
    {
        fprintf(stderr, "Cannot Open File %s\n", "matrixA.txt");
        return -1;
    }
    if (fscanf(fptr, "\n\nnrows %u, columns %u\n\n", &m, &n) != 2)
    {
        fprintf(stderr, "Failed to read dimensions\n");
        return -1;
    }

    mat->matrix = (double *)malloc(sizeof(double) * m * n);
    if (mat->matrix == 0)
    {
        fprintf(stderr, "Failed to allocate %d*%d matrix\n", m, n);
        return -1;
    }
    double *ptr = mat->matrix;//this is where it says that the error occured.

    for (int i = 0; i < m; i++)
    {
        for (int j = 0; j < n; j++)
        {
            double x;
            if (fscanf(fptr, "  %5.2lf", &x) != 1)
            {
                fprintf(stderr, "Failed to read element matrix[%d,%d]\n", i, j);
                free(mat->matrix);
                mat->matrix = 0;
                mat->columns = 0;
                mat->rows = 0;
                return -1;
            }
            *ptr++ = x;
        }
    }
    fclose(fptr);
    mat->columns = m;
    mat->rows = n;

    return 0;  // Success   
}

int main(int argc, _TCHAR* argv[])
{
    return 0;
} 
```

我不知道这意味着什么，或者我在哪里犯了错误。请帮忙。

更新：

虽然原始问题已解决，但我收到了完全相同的错误，但在另一个代码块中，我正在按照所选答案的建议编写：

```
int matrix_multiplication(struct matrep *mat_left,struct matrep *mat_right,struct matrep *result)
{
    if(mat_left->cols != mat_right->rows)
    {
        fprintf(stderr, "The number of columns from the left matrix are different from the number of colums from the right matrix");
        return -1;
    }
    double *p = NULL;//this is where the same error occurs the first time
    double *pa = NULL;
    int i,j;
    result->rows = mat_left->rows;
    result->cols = mat_right->cols;

    p = result->matrix;
    for (pa = mat_left->matrix, i = 0; i < mat_left->rows; i++, pa += mat_left->cols)
        for (j = 0; j < b->w; j++)
            *p++ = dot(pa, mat_right->matrix + j, mat_left->cols, mat_right->cols);
    return 0;
} 
```

我真的迷路了，我正在阅读这段代码，不知道为什么它会给我同样的错误。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-11T22:36:51.313

在编译 C 程序时，MSVC 不允许声明跟在块中的语句之后（它使用旧的 C90 规则 - 在 1999 年标准中添加了对与语句混合的声明的支持）。

将声明移动`double *ptr`到顶部`matrix_read()`：

```
int matrix_read(struct matrep *mat, const char *filename)
{
    FILE *fptr;
    unsigned m, n;
    double *ptr = NULL;

    // ...

    ptr = mat->matrix;  //this is where the error used to occur

    // ...
} 
```

我真的希望 MS 能够在他们的 C 编译器中实现这个“扩展”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T22:37:03.600

你是用c99还是c89编译？

该错误似乎是因为您在函数体中定义了一个变量（在 c99 而不是 c89 中允许）。移动`double *ptr`到函数的开头，然后指定`ptr = mat->matrix;`错误现在的位置。

# azure - 尝试在模拟器中运行时 Azure 示例应用程序不工作

> ID：13336187
> 
> 赞同：0
> 
> 时间：2012-11-11T22:34:02.487
> 
> 标签：azure, azure-storage, azure-table-storage

我正在运行一个 azure 存储程序。

[https://www.windowsazure.com/en-us/develop/nodejs/tutorials/web-site-with-storage/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/web-site-with-storage/)

当我运行应用程序时，我收到一个错误：

```
 throw err;
          ^ 
```

错误：getaddrinfo ENOENT at errnoException (dns.js:31:11) at Object.onanswer [as oncomplete] (dns.js:140:16)

我已经编辑了程序以使用具有以下凭据的模拟器： accountName = 'azure.ServiceClient.DEVSTORE_STORAGE_ACCOUNT' , accountKey = 'azure.ServiceClient.DEVSTORE_STORAGE_ACCESS_KEY';

/**

你能告诉我问题是什么以及如何解决这个问题吗

@smarx 帮助我确定这是帐户设置的问题。

你能告诉我如何解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:29:59.160

在对本地模拟器使用存储时，我遇到了类似的问题。不确定这是否有帮助，但是当我指定本地表服务端点时它起作用了。代码看起来像

`var client = azure.createTableService(azure.ServiceClient.DEVSTORE_STORAGE_ACCOUNT, azure.ServiceClient.DEVSTORE_STORAGE_ACCESS_KEY, azure.ServiceClient.DEVSTORE_TABLE_HOST);`

# java - 多个 GenericKeyedObjectPools 是否使用相同的驱逐线程？

> ID：13336188
> 
> 赞同：1
> 
> 时间：2012-11-11T22:34:17.977
> 
> 标签：java, apache-commons-pool

如果我在[`GenericKeyedObjectPool`](http://commons.apache.org/pool/apidocs/org/apache/commons/pool/impl/GenericKeyedObjectPool.html)启用了异步空闲对象驱逐的应用程序中使用多个线程，那么后台将运行多少个“空闲对象驱逐”线程？

多个`GenericKeyedObjectPool`s 只创建一个驱逐线程还是为每个池创建单独的线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:34:17.977

[当前实现 (v1.6) 使用静态计时器](http://commons.apache.org/pool/xref/org/apache/commons/pool/impl/EvictionTimer.html#42)，因此实际上多个池仅使用一个驱逐线程。（[假设它们被加载到同一个类加载器](https://stackoverflow.com/a/225914/843804)中。）您可以检查它`jstack`，只有一个计时器线程：

```
"Timer-0" daemon prio=10 tid=0x7bce5000 nid=0x1ca5 in Object.wait() [0x7b23d000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xa26c0fe8> (a java.util.TaskQueue)
    at java.util.TimerThread.mainLoop(Timer.java:509)
    - locked <0xa26c0fe8> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Timer.java:462)

   Locked ownable synchronizers:
    - None 
```

# ruby-on-rails - 如何将关系对象分配给rails中的实例变量

> ID：13336189
> 
> 赞同：0
> 
> 时间：2012-11-11T22:34:18.010
> 
> 标签：ruby-on-rails

我正在用 switch case 编写一个循环，而不是三次查询数据库，我在一个查询中获取所有查找并循环使用条件分配给不同的实例变量（我将以简单的形式用作集合）。我不确定如何将活动记录关系附加到实例变量，请帮助我。

```
class QuestionsController < ApplicationController

def index
    @question = Question.new
    @question_lookups = Lookup.where({:look_up_for => "question"})

    @question_lookups.each do |lk|
        case lk.look_up_type
            when 'mode'
                @question_mode = lk #How can i do this here..?
            when 'status'
                @question_status = lk
            else
                @question_type = lk
        end
    end
    session[:lk] = @question_mode

    # @question_mode = Lookup.where({:look_up_for => "question", :look_up_type => "mode"})
    # @question_status = Lookup.where({:look_up_for => "question", :look_up_type => "status"})
    # @question_type = Lookup.where({:look_up_for => "question", :look_up_type => "type"})
end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:13:50.447

将 question_mode 等转换为数组并将 lk 推送给它

```
@question_mode, @question_status, @question_type = []
@question_lookups.each do |lk|
    case lk.look_up_type
        when 'mode'
            @question_mode << lk #How can i do this here..?
        when 'status'
            @question_status << lk
        else
            @question_type << lk
    end
end 
```

# ios - NSPredicate 和BeginsWith

> ID：13336191
> 
> 赞同：1
> 
> 时间：2012-11-11T22:34:21.297
> 
> 标签：ios, regex, core-data, nspredicate

我想弄清楚 NSPredicate 将在我的核心数据中搜索以下开头的单词：

例如：核心数据中的描述字段有这样的文本：

```
My name is Mike
My name is Moe
My name is Peter
My name is George 
```

如果我搜索“我的名字是”，我需要得到 3 行如果我搜索“我的名字是 M”，我需要得到前 2 行

我尝试了下面的代码，但无法得到我需要的。我猜我需要一个正则表达式，但不知道该怎么做。

```
[NSPredicate predicateWithFormat:@"desc beginswith [cd] %@",word]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:45:08.640

我最近就是这样做的，效果很好。试试看。我看到我没有`[cd]`and `beginswith`but `contains`。你可以试一试。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains %@", textField.text];
NSArray *list = [allWords filteredArrayUsingPredicate:predicate];

for(NSString *word in list){
    NSLog(@"%@",word);
} 
```

**在阅读了关于起始帖子的评论后：**

首先，您应该将字符串中的单词与文本字段分开：

```
NSArray *myWords = [textField.text componentsSeparatedByString:@" "]; 
```

然后像你一样做同样的事情：

```
for(NSString *wordFromTextField in myWords){
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF contains %@", wordFromTextField];
    NSArray *list = [allWords filteredArrayUsingPredicate:predicate];

    for(NSString *word in list){
        NSLog(@"%@",word);
    }
} 
```

当然，您可以将它们添加到数组中，而不是 NSLogging。

# jquery - uniform.js 表单提交 - 需要在 ie 中双击

> ID：13336193
> 
> 赞同：1
> 
> 时间：2012-11-11T22:34:31.653
> 
> 标签：jquery, internet-explorer, uniform

我正在将最新版本的 uniform.js 与 jquery 一起使用。

在 Internet Explorer 中，当我尝试提交表单时，它第一次不起作用，必须再次单击

如果我不包含统一库，它可以正常工作（即单击提交），但只要将库添加到 IE 中，就需要双击

这是一个例子

[http://demo.stg.brightonconsulting.net.au/templates/tests/addArticlePopup/index.html](http://demo.stg.brightonconsulting.net.au/templates/tests/addArticlePopup/index.html)

谢谢

# c# - 如何使用 C# 在 If 语句中使用多个运算符

> ID：13336198
> 
> 赞同：0
> 
> 时间：2012-11-11T22:35:14.033
> 
> 标签：c#, asp.net

我想在 if 语句中使用多个运算符，例如 =、>、&&。如果（strAuthReqDate == null && strDate < strExpectedSubDate），我只想在此条件为真时发送电子邮件。所以我认为我的“小于运算符”是错误的，请让我知道我在这里做错了什么。谢谢

这是我的代码：

```
foreach (GridViewRow gr in GridView1.Rows)
{
    CheckBox cb = (CheckBox)gr.FindControl("chkItem");
    if (cb.Checked)
    {
        // string strID = gr.Cells[0].Text;
        string strExpectedSubDate = gr.Cells[3].Text;
        string strAuthReqDate = gr.Cells[8].Text;
        string strDate = Convert.ToString(System.DateTime.Now);
        if (strAuthReqDate == null && strDate < strExpectedSubDate)
        {
            send email();
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:44:20.437

尝试使用此代码比较日期

```
DateTime strExpectedSubDate = DateTime.ParseExact(gr.Cells[3].Text, dateformat);
DateTime strAuthReqDate = DateTime.ParseExact(gr.Cells[8].Text, dateformat);
DateTime strDate = System.DateTime.Now;
if (strAuthReqDate == null && strDate < strExpectedSubDate)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:51:00.447

首先，`Cells[i].Text`永远不会为空，因此您应该使用`String.IsNullOrWhiteSpce`甚至更好，尝试将其转换为 a `DateTime`。

您不能比较字符串并期望它们被视为 DateTimes，C# 不是 VB6。所以首先将它们转换为日期时间：

```
DateTime ExpectedSubDate;
string strExpectedSubDate = gr.Cells[3].Text;
if(DateTime.TryParse(strExpectedSubDate, out ExpectedSubDate))
{
    DateTime AuthReqDate;
    string strAuthReqDate = gr.Cells[8].Text;
    if(!DateTime.TryParse(strAuthReqDate, out AuthReqDate))
    {
        if(DateTime.Now < ExpectedSubDate)
        {
            SendMail();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:38:02.110

您的代码比较文本日期，而不是实际日期。您需要比较 DateTime 对象才能使其按预期工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T22:38:53.520

这是因为 strDate 和 strExpectedSubDate 是字符串。所以你不能使用小于运算符来比较它们

# php - 使用 PHP 将 class="active" 添加到活动页面

> ID：13336200
> 
> 赞同：11
> 
> 时间：2012-11-11T22:35:19.707
> 
> 标签：php, html, css

# 动态标题，CSS 类更改为 Active USING PHP（目录）

我希望在`<li>`活动目录下更改标签的类...现在，每个指南都向我展示了当您的页面等于它时如何执行此操作，但我想`<li>`根据我所在的目录更改

例如：

如果在
[http://example.com/RESOURCES/code/opensource](http://example.com/RESOURCES/code/opensource)
或
[http://example.com/RESOURCES/images/clipart](http://example.com/RESOURCES/images/clipart)上说我，
我希望“资源”^^`<li>`为“class="active"”，而其余显示 'class="noactive"'

或者如果我在
[http://example.com/tutorials/css/flawless-dropdown-menu](http://example.com/tutorials/css/flawless-dropdown-menu)
我希望 "tutorials"`<li>`是 'class="active"' 而其余的是'class="noactive"'

* * *

## 网址设置：

这是我的网址显示方式的示例...

```
http://example.com/tutorials/css/flawless-dropdown-menu 
```

^^那个 URL 是教程的页面....在“tutorials”目录下，而不是在“CSS”类别目录下，而不是页面标题（所有这些目录都不是真实的，是从 .htaccess 重写的）[无关]

* * *

## 导航设置：

```
<ul id="mainnav">
  <li class="noactive"><a href="/">Home</a></li>
  <li class="active"><a href="/tutorials/">Tutorials</a></li>
  <li class="noactive"><a href="/resources/">Resources</a></li>
  <li class="noactive"><a href="/library/">Library</a></li>
  <li class="noactive"><a href="/our-projects/">Our Projects</a></li>
  <li class="noactive"><a href="/community/">Community</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-12T03:33:59.277

想出了答案……我想多了。

## HTML

```
<ul id="mainnav">
    <li class="<?php if ($first_part=="") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Home</a></li>
    <li class="<?php if ($first_part=="tutorials") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Tutorials</a></li>
    <li class="<?php if ($first_part=="resources") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Resources</a></li>
    <li class="<?php if ($first_part=="library") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Library</a></li>
    <li class="<?php if ($first_part=="our-projects") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Our Projects</a></li>
    <li class="<?php if ($first_part=="community") {echo "active"; } else  {echo "noactive";}?>"><a href="#">Community</a></li>
</ul> 
```

## PHP

```
<?php 
$directoryURI = $_SERVER['REQUEST_URI'];
$path = parse_url($directoryURI, PHP_URL_PATH);
$components = explode('/', $path);
$first_part = $components[1];
?> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-06-30T18:47:43.147

**头文件.php**

```
$activePage = basename($_SERVER['PHP_SELF'], ".php"); 
```

**导航.php**

```
<ul>
    <li class="<?= ($activePage == 'index') ? 'active':''; ?>"><a href="/index.php">Home</a></li>
    <li class="<?= ($activePage == 'tutorials') ? 'active':''; ?>"><a href="/tutorials.php">Tutorials</a></li>
... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-11T23:18:07.423

通过 PHP，您可以尝试 -

```
<?php 
// gets the current URI, remove the left / and then everything after the / on the right
$directory = explode('/',ltrim($_SERVER['REQUEST_URI'],'/'));

// loop through each directory, check against the known directories, and add class   
$directories = array("index", "tutorials","resources","library","our-projects","community"); // set home as 'index', but can be changed based of the home uri
foreach ($directories as $folder){
$active[$folder] = ($directory[0] == $folder)? "active":"noactive";
}
?>

<ul>
  <li class="<?php echo $active['index']?>"><a href="/">Home</a></li>
  <li class="<?php echo $active['tutorials']?>"><a href="/tutorials/">Tutorials</a></li>
  <li class="<?php echo $active['resources']?>"><a href="/resources/">Resources</a></li>
  <li class="<?php echo $active['library']?>"><a href="/library/">Library</a></li>
  <li class="<?php echo $active['our-projects']?>"><a href="/our-projects/">Our Projects</a></li>
  <li class="<?php echo $active['community']?>"><a href="/community/">Community</a></li>
</ul> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-11T23:08:57.377

也许这可以帮助你：

```
$(document).ready(function()
{
    var parts = document.URL.split("/");
    // [http:, empty, your domain, firstfolder]
    var firstFolder = parts[3];

    $("#mainnav li").attr("class", "noactive");
    $("#mainnav a[href='/" + firstFolder + "/']").parent().attr("class", "active");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T23:11:28.390

使用 jQuery 可能更容易，但这有效：

```
$url='http://example.com/tutorials/css/flawless-dropdown-menu';//pass the current url here instead of a static string.
$segments = explode ("/",$url);

$menuItems=array('Tutorials','Resources', 'Library', 'Our-Projects','Community');

$menu=array();
foreach ($menuItems as $menuItem) {
if($segments[3]==strtolower($menuItem)){
    $menu[]=('<li class="active"><a href="/'.strtolower($menuItem).'/">'.str_replace("-"," ",$menuItem).'</a></li>');

} else {
    $menu[]=('<li class="no-active"><a href="/'.strtolower($menuItem).'/">'.str_replace("-"," ",$menuItem).'</a></li>');
}
}
foreach ($menu as $item) {
echo $item.'<br />';
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-14T07:33:36.263

如果您使用 mysql_fetch 定义菜单标题的行。如果我们在 mysql 数据库中将您的菜单标题为 MENU 并且您必须输入 (Home,tutorials,library,resources,our-projects,community)

```
 <?php
//connect your data bass

 include(connection.php');

//get your from ID like www.google?id=1 

 $id = $_GET['id'];
    $query = "select * from pages where id='$id'";
    $query1 = mysql_query($query);
    while($row= mysql_fetch_array($query1))
    {
        ?>

<html>
<?php $active= $row['MENU'];?>
<ul>
  <li class="<?php if($active=='Home'){echo 'active';}else{echo'noactive';}?>"><a href="/">Home</a></li>
  <li class="<?php if($active=='tutorials'){echo 'active';}else{echo'noactive';}?>"><a href="/tutorials/">Tutorials</a></li>
  <li class="<?php if($active=='resources'){echo 'active';}else{echo'noactive';}?>"><a href="/resources/">Resources</a></li>
  <li class="<?php if($active=='library'){echo 'active';}else{echo'noactive';}?>"><a href="/library/">Library</a></li>
  <li class="<?php if($active=='our-projects'){echo 'active';}else{echo'noactive';}?>"><a href="/our-projects/">Our Projects</a></li>
  <li class="<?php if($active=='community'){echo 'active';}else{echo'noactive';}?>"><a href="/community/">Community</a></li>
</ul>
</html>
<?php };?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-21T16:20:34.880

这是使用 PHP 的另一种方法：

```
<ul class="navbar-nav">
    <?php
        // Defines all pages in navigation
        $pages = array(
            'Home'     => 'index.php',
            'Products' => 'products.php',
            'Services' => 'services.php',
            'Contact'  => 'contact.php',
            'About'    => 'about.php'
        );

        // Gets active page URL
        $active = basename($_SERVER['PHP_SELF']);

        // Loops through all pages
        foreach ($pages as $title => $url) {
            // Checks if active url is matched and adds active CSS class
            if ($active === $url) {
                echo '<li><a href="'.$url.'" class="nav-link active">'.$title.'</a></li>';
            } 
            // Prints out default style for remaining links
            else {
                echo '<li><a href="'.$url.'" class="nav-link">'.$title.'</a></li>';
            }
        }
    ?>
</ul> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-27T10:47:35.627

“includes/header.php” - 位于文件顶部

```
<?php 
$activePage = basename($_SERVER['PHP_SELF']);

$index="";
$nosotros="";
$cursos="";
$contacto="";

switch ($activePage) {
    case 'index.php':
        $index=' class="current"';
        break;
    case 'nosotros.php':
        $nosotros=' class="current"';
        break;
    case 'cursos.php':
        $cursos=' class="current"';
        break;
    case 'contacto.php':
        $contacto=' class="current"';
        break;
    default:

        break;
     }
?> 
```

这在导航部分

```
<ul>
    <?php 
        echo '<li'.$index.'><a href="/"><div>Inicio</div></a></li>';
        echo '<li'.$nosotros.'><a href="nosotros"><div>Nosotros</div></a></li>';
        echo '<li'.$cursos.'><a href="cursos"><div>Cursos</div></a></li>';
        echo '<li><a href="http://www.redtechacademy.com"><div>Academia</div></a></li>';
        echo '<li><a href="https://www.redtechhackingshop.com"><div>Tienda</div></a></li>';
        echo '<li'.$contacto.'><a href="contacto"><div>Contacto</div></a></li>';
    ?>
</ul> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-09T07:39:53.510

在这里我们也可以做一个简单的事情：

```
<li class="page-scroll <?php if(basename($_SERVER['PHP_SELF'])=="aboutus.php"){echo "active";} ?>"><a href="aboutus.php">About us</a></li> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-14T07:30:36.207

```
 Try the following:

<ul class="sub-menu"> 
   <div class="h-10"></div>
   <li class="<?php if ($your_variable=="test") {echo "active"; } 
     else{echo"noactive";}?>">
     <a href="test.php">Test </a>
   </li>
    <li class="<?php if ($your_variable=="test2") {echo "active"; 
      } else {echo"noactive";}?>">
     <a href="test2.php" >Test2</a>
    </li>
    <li class="<?php if ($your_variable=="test3") {echo 
     "active"; } else  {echo "noactive";}?>">
        <a href="test3.php">Test3</a>
    </li>
 </ul>

 **strong PHP text**

 <?php 
  $directoryURI = $_SERVER['REQUEST_URI'];
   $path = parse_url($directoryURI, PHP_URL_PATH);
   $components = explode('/', $path);
   $your_variable = basename($_SERVER['PHP_SELF'], ".php"); 
  ?> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-10-10T07:02:58.533

```
<?php  $request_uri= $_SERVER['REQUEST_URI'];?>
<ul>
 <li class="<?php if((strpos($request_uri,"index.html")!==false) || $request_uri=="" || $request_uri=="/"){echo "selected";}?>"><a href="/index.html">Home</a></li>

                <li class="<?php if((strpos($request_uri,"service")!==false)){echo "selected";}?>"><a href="/services.html">Services</a> </li>
<li class="<?php if((strpos($request_uri,"product")!==false)){echo "selected";}?>"><a href="/products.html">Products</a></li>
                <li class="<?php if((strpos($request_uri,"blog")!==false)){echo "selected";}?>"><a href="/blog.html">Blog</a></li>
                <li class="<?php if((strpos($request_uri,"question")!==false)){echo "selected";}?>"><a href="/question-answers.html">Ques & Ans</a></li>
                <li class="<?php if((strpos($request_uri,"career")!==false)){echo "selected";}?>"><a href="/career.html">Career</a></li>
                <li class="<?php if((strpos($request_uri,"about-us")!==false)){echo "selected";}?>"><a href="/about-us.html">About</a></li>

</ul> 
```

# php - 从 href 链接调用单独的 div tagad 中的函数

> ID：13336204
> 
> 赞同：-1
> 
> 时间：2012-11-11T22:35:37.573
> 
> 标签：php, jquery, html, ajax

我有两个文件：*index.php*和*cart.php*

在*cart.php*我有几个三个函数 - `products_all()`, `products_shirts()`, `products_hoodies()`。这些函数从我的数据库中获取信息并在调用时输出。

我希望通过单击超链接来调用这些函数中的每一个，然后将其输出到`div`标签中，以便只`div`刷新标签而不是整个站点。

我阅读了有关 jQuery/AJAX 函数加载的信息，但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:59:22.013

如果您不希望刷新整个页面，则无法使用 ajax。

但这并不难。当使用像 jQuery 这样的库时，你可以用几行代码完成它。

您的 HTNL + javscript 代码：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
function callFunction(yourfunction)
{
    $.post('cart.php', { "function": yourfunction }, function(data) {
        alert(data);
    });
}

$(document).ready(function()
{
    $("#functionOne").on("click", function()
    {
        callFunction(1)
    });

    $("#functionTwo").on("click", function()
    {
        callFunction(2)
    });

});
</script>
</head>
<body>
    <a id="functionOne">function one</a>
    <a id="functionTwo">function two</a>
</body>
</html> 
```

在服务器端（cart.php）是这样的：

```
<?php
if (isset($_POST['function']))
{
    switch ($_POST['function'])
    {
        case 1:
            functionOne();
            break;
        case 2:
            functionTwo();
            break;
    }
}

function functionOne()
{
    echo "hi, i am func1";
}

function functionTwo()
{
    echo "hi, i am func2";
} 
```

这应该让你开始！

# ruby-on-rails - 删除包含文件的文件夹

> ID：13336209
> 
> 赞同：3
> 
> 时间：2012-11-11T22:36:14.633
> 
> 标签：ruby-on-rails

我想`file.txt`使用从我的 Rails 控制器发送文件`send_file`，然后删除包含它的文件夹。

```
send_file("#{Rails.root}/public/folder/file.txt")
system("rm -rf #{Rails.root}/public/folder") 
```

当我尝试这个时，`file.txt`被正确发送，`file.txt`被正确删除，但不知何故`folder`没有被删除。

我怎样才能让它删除`folder`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:22:19.850

尝试使用原生 ruby​​ 方法而不是系统命令直接删除文件夹：

```
require 'fileutils'
FileUtils.remove_dir "#{Rails.root}/public/folder", true 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-remove_dir](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/fileutils/rdoc/FileUtils.html#method-c-remove_dir)

# c - 在 char** 中查找 char* 的索引时出现段错误

> ID：13336211
> 
> 赞同：0
> 
> 时间：2012-11-11T22:36:33.053
> 
> 标签：c, segmentation-fault, arrays

我有这个函数，它以 char** 和 char* 作为参数，它应该返回 char** 中 char* 的索引，或者如果它不在字符串数组中，则返回 -1。我确定的错误是，`while(arr[i] != NULL)...`但我不知道该怎么做。

```
int isInArray(char** arr, char* str) {
        int i = 0;
        while(arr[i] != NULL) {
                if(strcmp(arr[i], str) == 0)
                        return i;
                i++;
        }
        return -1;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:39:16.100

您可能忘记将 的最后一个`char*`元素设置`arr`为 NULL。如果你不能这样做，那么你应该引入第三个参数`size_t arr_len`来传递`arr`.

不相关的提示：由于您没有修改`*str`or `*arr`，因此请保持正确并使用：

```
int isInArray(const char* const* arr, const char* str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:41:06.197

您的错误是您没有数组的长度。arr[i] 可能导致您的程序读取坏内存。

在函数中添加“int length”参数，然后使用 for(int i=0; i < length; i++) 而不是 while。这样，您将永远不会超出数组的范围， (arr[i] != NULL) 不能保证这一点

# c# - 在 C# 中使用 RegEx 在其他项出现后查找尖括号内的第一项

> ID：13336212
> 
> 赞同：2
> 
> 时间：2012-11-11T22:36:37.790
> 
> 标签：c#, .net, xml, regex

我有一个类似 xml 的文本，我想在其中找到某个模式第一次出现时出现的项目：通常：

```
...
<PropertyGroup><name>true</name></PropertyGroup><PropertyGroup>....
.... 
```

也可以是

```
...
<PropertyGroup>
<name>
true</name>
</PropertyGroup>
...
<PropertyGroup>
... 
```

在上面，我需要提取“名称”。

我最初的假设是所有出现都在一行中，我使用字符串属性编写了我的代码，但是很难考虑所有可能性，只有 RegEx 可以拯救我。

就是不知道怎么写。。。

我从这样的事情开始：

```
Regex regex = new Regex("(?<=<PropertyGroup>#)<+");
Match matches = regex.Matches(Text)[0];
MessageBox.Show(matches.ToString()); 
```

我认为这会找到 a 之后的第一个项目`<PropertyGroup>`，但我不知道如何让它在尖括号内获取项目......（可能在一个或多个换行符和/或空格之后）。

我知道有用于解析 xml 的实用程序，但我正在寻找可以在 ac# 程序中简单插入的东西

有人可以帮帮我吗 ？非常感谢。

编辑：实际文件内容（我现在正在测试的，没有奇怪的空格）：

```
<?xml version="1.0" ?><Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ImportGroup Label="PropertySheets">
    <Import xxx/>   
  </ImportGroup>
  <PropertyGroup><myProp>true</myProp></PropertyGroup><PropertyGroup Label="UserMacros"/>
  <PropertyGroup/>
<!--maybe other stuff -->  
</Project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:08:47.007

使用 LINQ to XML 非常简单，并且比使用正则表达式更可靠：

```
using System.Xml.Linq; 
```

...

```
XElement xmlTree = XElement.Load(fileName);
XNamespace ns = "http://schemas.microsoft.com/developer/msbuild/2003";

List<XElement> properties = (
    from propertyGroup in xmlTree.Descendants(ns + "PropertyGroup")
    from property in propertyGroup.Elements()
    select property
).ToList(); 
```

现在`properties`应该包含所有元素`XElement`的直接子`PropertyGroup`元素的所有对象。您可以通过以下方式获取它们的名称和值：

```
foreach(var property in properties)
{
    string name = property.Name.LocalName;
    string value = property.Value;
    // process both strings   
} 
```

这样您就不必担心任何类型的空格，并且它是一种非常可维护和可扩展的解决方案，可以继续从 XML 中检索其他信息。

另外，这确实是值得一读的东西，[这里是开始的地方](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。这不会是您最后一次需要处理 XML 文件，如果您不必总是想出一个正则表达式来解析，您会很高兴（让我再说一遍，这甚至通常是不可能的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:58:22.890

“我知道有用于解析 xml 的实用程序” 不，与其说是内置于 .net 框架中的类，不如说是实用程序。

建议你阅读[`XmlDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:42:33.637

尝试这个：

```
(?s)<PropertyGroup>\s+<([^>]+) 
```

例子：

```
var result = 
    Regex.Match(input, @"(?s)<PropertyGroup>\s+<([^>]+)")
    .Groups[1].Value; 
```

# vba - 在Word中使用VBA，我怎样才能找到一段特定的文本并在大纲中继续编号

> ID：13336217
> 
> 赞同：3
> 
> 时间：2012-11-11T22:37:15.723
> 
> 标签：vba, ms-word

在 Microsoft Word 中使用 VBA，如何自动搜索特定文本，删除该文本并使 Word 继续上一个列表。我可以录制一个在 Word 中单击列表按钮动作的宏，它给了我一些涉及`Selection.Range.ListFormat.ApplyListTemplateWithLevel`. 我希望能够弄清楚如何找到一段代码，然后自动继续上一个列表。

这是我在代码开始之前所拥有的：

> 1.  第一句话
> 2.  第二句
> 3.  第三句
> 4.  第四句*/R*第五句

这是代码完成后我想要的：

> 1.  第一句话
> 2.  第二句
> 3.  第三句
> 4.  第四句
> 5.  第五句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:23:45.210

您能否提供更多背景信息来说明您为什么要这样做？此代码将完成您所要求的（只要列表已经存在，并且`*/R*`在列表中），但我想有更好的方法。

```
With Selection.Find
    .Text = "*/R*"
    .Wrap = wdFindContinue
End With
If Selection.Find.Execute = True Then
    Selection.TypeParagraph
End If 
```

# python - Python：通过 scipy 最小二乘法优化 1、-1 和 0 集的内存高效矩阵创建

> ID：13336218
> 
> 赞同：1
> 
> 时间：2012-11-11T22:37:25.167
> 
> 标签：python, arrays, matrix, numpy, scipy

我正在遍历字符串列表并将它们转换为 1、-1 和 0 的数组。例如 - 我可能有以下列表：

```
A,B,-C
A,-D
B,C,-D 
```

这将成为一个“大名单”，等于：

```
[
 [1  1 -1  0],
 [1  0  0 -1],
 [0  1  1 -1]
] 
```

目前，我只是遍历字符串的每一行，如果字符串是唯一的，则为其分配 1 或 -1 的值，并将不存在的字符串清零（例如，第一个中不存在 D行，所以它是 0)。我做上述的愚蠢方式基本上是：

```
for line_of_strings in all_strings:
    for the_string in line_of_strings:
        entry[string_index] = (1 or -1)

    biglist.append(entry) 
```

最终，我有一组很好的列表可供我运行：

```
scipy.optimize.nnls(biglist) 
```

这可行，但最终会占用大量内存和时间。有没有更有效的方法来解决这个问题？也许使用 numpy 或 scipy 数组/矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:07:22.600

使用 numpy 数组而不是列表似乎在时间上产生了很大的差异，至少在一个简单的例子中：

```
$ python -mtimeit -s"from scipy.optimize import nnls; m = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]; b=[1, 2, 3]" "nnls(m, b)"
10000 loops, best of 3: 38.5 usec per loop

$ python -mtimeit -s"import numpy as np; from scipy.optimize import nnls; m = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]); b=[1, 2, 3]" "nnls(m, b)"
100000 loops, best of 3: 20 usec per loop

$ python -mtimeit -s"import numpy as np; from scipy.optimize import nnls; m = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]); b=np.array([1, 2, 3])" "nnls(m, b)"
100000 loops, best of 3: 11.4 usec per loop 
```

我希望 numpy 数组的内存占用也更小。如果您的输入相当稀疏，并且性能仍然不令人满意，则可能值得调查是否`nnls`接受稀疏矩阵。

# c# - c#中没有图像显示

> ID：13336220
> 
> 赞同：1
> 
> 时间：2012-11-11T22:37:46.420
> 
> 标签：c#, winforms

我创建了一个简单的 Windows 窗体应用程序 C#，它应该显示一张图片。我正在关注[这里](http://www.dotnetperls.com/picturebox)的教程以下是 form1.cs 的代码

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void pictureBox1_Click(object sender, EventArgs e)
    {
        // Construct an image object from a file in the local directory.
        // ... This file must exist in the solution.
        Image image = Image.FromFile("Picture1.png");
        // Set the PictureBox image property to this image.
        // ... Then, adjust its height and width properties.
        pictureBox1.Image = image;
        pictureBox1.Height = image.Height;
        pictureBox1.Width = image.Width;
    }
} 
```

图像存在于解决方案文件夹中，但运行应用程序时窗口中仍然没有显示任何内容。没有编译错误。

**更新**

![在此处输入图像描述](../Images/fcfc3ed6a85c3e63c5367f7a3a651469.png)

现在解决了。

![在此处输入图像描述](../Images/609b111da32fb0e581cab22cbe5cf704.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:40:26.030

如果没有完整路径，图像将不会从解决方案目录加载。它将从执行可执行文件的目录加载。当您从 Visual Studio 运行时，该目录是 Debug 或 Release 文件夹。取决于在您运行它的配置文件上。

因此，将图像放入 /bin/Debug 文件夹并再次运行您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:44:29.420

确保注册了 PictureBox 单击事件处理程序。仅复制示例代码是不够的。（我只是猜测）

![在此处输入图像描述](../Images/747035819f5094d4439bc95e07e7897d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T22:53:05.573

更好的选择是将此图像添加到项目中并执行以下两项之一：

*   添加为资源。以后可以与强类型一起使用。
*   在文件上设置此选项：`Copy to Output Directory = Copy if newer`.

在 下手动添加任何内容不是一个好习惯`/bin/`，因为这些文件夹是易失的，并且可以随时被 Visual Studio 擦除（通常在下一次重建时）。

# expressionengine - 在 Expresso 商店中显示修饰符的总价

> ID：13336224
> 
> 赞同：1
> 
> 时间：2012-11-11T22:38:07.450
> 
> 标签：expressionengine, modifier, expresso-store

有没有办法在下拉菜单中显示带有修饰符的产品的总价，而不是额外显示多少？

例如，在我正在开发的商店中，一束普通尺寸的鲜花需要 30 英镑。您还可以额外支付 20 英镑购买大件，或额外支付 40 英镑购买豪华件。我希望下拉菜单显示： 普通 30 英镑 大 50 英镑 豪华 70 英镑

代替

常规 £30 大号 +20 豪华 +40

但我希望它们都出现在同一个产品的同一个下拉列表中。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T00:32:48.203

我认为您正在循环`{price_inc_mod}`内寻找变量。`{modifier_options}`

[https://www.exp-resso.com/docs/product_tag.html#price-inc-mod](https://www.exp-resso.com/docs/product_tag.html#price-inc-mod)

请记住，这仅在您的产品具有单个修饰符时才有意义。您还可以使用[动态价格变量](https://www.exp-resso.com/docs/product_tag.html#dynamic_product_variables)来使用 javascript 显示更新的产品价格。

# c++ - Win32 绘制拖动矩形

> ID：13336225
> 
> 赞同：3
> 
> 时间：2012-11-11T22:38:18.037
> 
> 标签：c++, visual-c++, gdi

我正在尝试在您左键单击一个点然后拖动时绘制一个矩形，而您在矩形上的拖动将获得表格以显示矩形外观的预览。这很好用，除非当我拖回一个较小的矩形时，旧的矩形仍然存在。

```
 case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);
    // TODO: Add any drawing code here...

    if(painting)
    {

            HPEN greenPen=CreatePen(PS_SOLID, 1, RGB(0,255,0));
            SelectObject(hdc,greenPen);
            Rectangle(hdc, x1, y1, x2, y2);

    }

    EndPaint(hWnd, &ps);
    break;
case WM_LBUTTONDOWN:
    painting=true;
    x1=LOWORD(lParam);
    y1=HIWORD(lParam);
    InvalidateRect(hWnd, NULL ,false);
    break;
case WM_MOUSEMOVE:

        x2=LOWORD(lParam);
        y2=HIWORD(lParam);

        InvalidateRect(hWnd, NULL ,false);

    break;
case WM_LBUTTONUP:

    painting=false;
    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:20:56.413

@user1788175 - 只需使用 RECT 结构。绘图开始时，您将左侧和顶部成员设置为鼠标的 x,y 位置。释放鼠标后，设置右、下成员。必要时左右交换，以确保左

这是从我编写的用于处理选择矩形的类中提取的一些代码。您可以忽略规范化代码 - 它只是将像素坐标转换为 [0..1] 范围内的坐标，因此我可以在图像的缩小版本上绘制选择，但如果图像仍然选择相同的区域以不同的比例显示。我的图像是 4944x6992，所以我必须显示它们的缩小版本。

```
LRESULT CALLBACK cSelBoxImg::WndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    RECT mappedRect, tmpRect, myRect;
    HBRUSH myBrush;
    BITMAP bm;
    PAINTSTRUCT ps;
    HDC mDC;
    HBITMAP tmpBmp;

    switch (uMsg)
    {
    case WM_LBUTTONDOWN:
        if (bMouseSelectionEnabled)
        {
            bRubberBanding = true;
            mouseClickDownPos.x = LOWORD(lParam);
            mouseClickDownPos.y = HIWORD(lParam);

            curMousePos = mouseClickDownPos;
            selectionRect.left = min(curMousePos.x, mouseClickDownPos.x);
            selectionRect.right = max(curMousePos.x, mouseClickDownPos.x);
            selectionRect.top = min(curMousePos.y, mouseClickDownPos.y);
            selectionRect.bottom = max(curMousePos.y, mouseClickDownPos.y);
            normalizeSelRect();
            InvalidateRect(mHwnd, NULL, isBkgTransparent);
            PostMessage(GetParent(hWnd),  WM_COMMAND, GetDlgCtrlID(hWnd), (LPARAM)hWnd);
        }
        return 1;

    case WM_LBUTTONUP:
        if (bMouseSelectionEnabled)
            if (bRubberBanding)
            {
                bRubberBanding = false;
                mouseClickUpPos.x = LOWORD(lParam);
                mouseClickUpPos.y = HIWORD(lParam);

                selectionRect.left = min(mouseClickUpPos.x, mouseClickDownPos.x);
                selectionRect.right = max(mouseClickUpPos.x, mouseClickDownPos.x);
                selectionRect.top = min(mouseClickUpPos.y, mouseClickDownPos.y);
                selectionRect.bottom = max(mouseClickUpPos.y, mouseClickDownPos.y);

                normalizeSelRect();
                InvalidateRect(mHwnd, NULL, isBkgTransparent);
                PostMessage(GetParent(hWnd),  WM_COMMAND, GetDlgCtrlID(hWnd), (LPARAM)hWnd);
            }
        return 1;

    case WM_MOUSEMOVE:
        if (bMouseSelectionEnabled)
            if (bRubberBanding)
            {
                curMousePos.x = LOWORD(lParam);
                curMousePos.y = HIWORD(lParam);

                selectionRect.left = min(curMousePos.x, mouseClickDownPos.x);
                selectionRect.right = max(curMousePos.x, mouseClickDownPos.x);
                selectionRect.top = min(curMousePos.y, mouseClickDownPos.y);
                selectionRect.bottom = max(curMousePos.y, mouseClickDownPos.y);
                //                UpdateWindow(hWnd);
                //RedrawWindow(hWnd, NULL, NULL, RDW_UPDATENOW);
                normalizeSelRect();
                InvalidateRect(hWnd, NULL, false);
                PostMessage(GetParent(hWnd),  WM_COMMAND, GetDlgCtrlID(hWnd), (LPARAM)hWnd);
                //       printf("Message posted\n");
            }
        return 0;

    case WM_PAINT:

        mDC = BeginPaint(hWnd, &ps);

        GetClientRect(hWnd, &tmpRect);
    //        GetObject(mBmp, sizeof(bm), &bm);
        mappedRect.left = mLeft * tmpRect.right;
        mappedRect.right = mRight * tmpRect.right;
        mappedRect.top = mTop * tmpRect.bottom;
        mappedRect.bottom = mBottom * tmpRect.bottom;

        displayImage();
        if  (mBmp) drawRect(mDC, mappedRect, RGB(0,0,255));
        DeleteObject(tmpBmp);
        EndPaint(hWnd, &ps);

        return 0;

    case WM_ERASEBKGND:
        if (isBkgTransparent)
        {
            GetClientRect(hWnd, &myRect);
            myBrush = (HBRUSH) GetWindowLong(hWnd, GCL_HBRBACKGROUND);
            FillRect((HDC)wParam, &myRect, myBrush);
            printf("background cleared\n");
        }
        return true;

    case WM_SETCURSOR:
        SetCursor(mCursor);
        return true;
    }
    return DefWindowProc(hWnd, uMsg, wParam, lParam);
} 
```

# c++ - 比较模板变量的值

> ID：13336226
> 
> 赞同：1
> 
> 时间：2012-11-11T22:38:29.783
> 
> 标签：c++, templates, linked-list

我正在为 C++ 类编写一个链表，并且一直试图弄清楚如何比较两个通用类型节点的排序算法。在 Java 中，我只需实现 Comparable 接口并使用 compareTo() 方法来确定哪个是“更大”或“更小”，让 Collection 的用户定义它。我可以使用 C++ 中的类似内容吗？我知道我可以覆盖“<”运算符，但我不知道这是否是比较未知类型的“最佳”方法（我知道是主观的；真的只是询问利弊是否有另一种）。

那么，是否有任何其他选项可以在运行时比较未知类型，这似乎比覆盖“<”运算符更合适？

*编辑：*更改了我需要覆盖的运算符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:44:35.860

从我收集到的信息中，您有一个列表类模板，并且您想`sort()`在其上实现一个方法。我将遵循`std::list<T>`为此设置的示例：

```
template <typename T>
class List
{
public:
    // ...
    template <typename Compare>
    void sort(Compare compare) {
        // use compare(x, y) to determine if x is smaller than y
    }
    void sort() { this->sort(std::less<T>()); }
}; 
```

也就是说，您不会做出固定选择，而是默认使用`operator<()`但允许用户使用不同的排序谓词。只要比较函数实现[严格的弱顺序，](http://en.wikipedia.org/wiki/Strict_weak_ordering)任何东西都可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T22:46:03.290

1.  是的，重载运算符（用于排序，您`operator<`可能会使用 and `operator==`）是一种方式。这是惯用的，您不需要标记接口（例如从特定接口派生），并且通常不会这样做。

    好消息是，即使用户想使用某种没有关系运算符的类型，他/她也可以通过提供运算符的免费函数重载来扩展他们的接口。

2.  您可以使用任何其他方法（例如发明自己的接口，例如`int T::cmp(...)`根据参数关系返回 0/1/-1 的函数。但是，这有一个很大的缺点，即您将无法重用别人的课。

3.  STL 使用用户传递的函数对象对象来比较它需要什么，这是对相同数据提供不同排序顺序（例如，按姓氏与电话号码排序）所需的。如果你不需要这个（或者准备放弃这个功能），你可以坚持使用`operator<`.

# c++ - 六边形计划中的最短路径？

> ID：13336229
> 
> 赞同：3
> 
> 时间：2012-11-11T22:39:09.330
> 
> 标签：c++, algorithm, shortest-path

在最新的 IEEE Xtreme 竞赛中，我试图解决的一个问题是，

输入两点 p1(x1,y1) , p2(x2,y2) 你必须找到从 p1 到 p2 的最短路径的长度，

例如，如果 p1(1,1) , p2(4,4) 则最短路径的长度为 9 条边，

![在此处输入图像描述](../Images/a2726db5f8de2a45668acc5e34164cf3.png)

我做了一些类似深度优先搜索的事情，如果两点之间的距离很小，并且例如点（1,1）和（10,10）需要很长时间，它会很好用，

**并且最大点为（12,12）的点有限制。**

我的做法是将上图转换为一个所有权重为1的无向图，然后找到最短路径。

这是我找到最短路径的函数：

```
int minCost;
vector<int> path;
multimap<int,int> Connections;
typedef multimap<int,int>::iterator mmit;

void shortestPath(int cs){
    if(cs > minCost)
        return;
    if(path.back() == Target){
        if(cs < minCost)
            minCost = cs;
        return;
    }

    pair<mmit,mmit> it = Connections.equal_range(path.back());
    mmit mit = it.first;

    for( ; mit != it.second ; ++mit){
        if(isVisited(mit->second))
            continue;
        markVisited(mit->second);
        path.push_back(mit->second);
        shortestPath(cs+1);
        markUnvisited(mit->second);
        path.pop_back();
    }
} 
```

有没有比这更快的方法？？我可以为这个无向图使用 dijkstra 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:13:01.797

Using Dijkstra or any kind of graph-based search seems like total overkill here. At each vertex, you just need to choose the next vertex that brings you closer to your target.

So you start in the centre of (1,1). You need to choose the starting vertex. Obviously this is the one in the south-east.

From there, you have three choices: move west, move north-east or move south-east. This is in fact the choice you have at every second vertex. You choose the direction that brings you closer (ie, subtends smallest angle with your target).

In fact, you can represent all your vertex co-ordinates in a sort of cheaty way. Notice that they are all roughly half-way between the hexagon coordinates. So you could say the first vertex is at `(1.5,1.33)`.

Your possible moves at the first co-ordinate are the directions:

```
west       = (0, -0.67)
north-east = (-0.5, 0.33)
south-east = (0.5, 0.33) 
```

让我们称之为奇数运动。现在，您有以下选择：

```
east       = (0, 0.67)
north-west = (-0.5, -0.33)
south-west = (0.5, -0.33) 
```

所以你所要做的就是，对于每个可能的方向，测试到你的目标的新距离（如乌鸦飞翔——*即*毕达哥拉斯）。选择三个选项中距离最小的新顶点。显然，您不必计算实际距离——距离平方就可以了。

我敢肯定，您可以弄清楚初始和最终动作。

最后一点，显然我使用的是不精确的双重算术。您可以将所有方向（当然还有六边形坐标）缩放 6 并使用整数。

# java - 在 Java 中使用正则表达式拆分输入

> ID：13336234
> 
> 赞同：2
> 
> 时间：2012-11-11T22:39:42.387
> 
> 标签：java

我正在制作一个程序，让用户输入化学物质，例如 C9H11N02。当他们输入时，我想把它分成几块，这样我就可以像 C9、H11、N、02 一样拥有它。当我拥有这样的它时，我想对其进行更改，以便将其设为 C10H12N203，然后将其放回原处一起。这是我到目前为止所做的。使用我使用过的正则表达式，我可以提取整数值，但我将如何获得 C10、H11 等。

```
System.out.println("Enter Data");

Scanner k = new Scanner( System.in );
String input = k.nextLine();

String reg = "\\s\\s\\s";
String [] data;

data = input.split( reg );

int m = Integer.parseInt( data[0] );
int n = Integer.parseInt( data[1] ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:25:15.773

可以使用[环视](http://www.regular-expressions.info/refadv.html)来完成：

```
String[] parts = input.split("(?<=.)(?=[A-Z])"); 
```

环顾四周是零宽度、非消耗性断言。

此正则表达式拆分两个环视匹配的输入：

*   `(?<=.)`表示“有*一个*前面的字符”（即不在输入的开头）
*   `(?=[A-Z])`表示“下一个字符是大写字母”（所有元素都以 开头`A-Z`）

这是一个测试，包括一些边缘情况的双字符符号：

```
public static void main(String[] args) {
    String input = "C9KrBr2H11NO2";
    String[] parts = input.split("(?<=.)(?=[A-Z])");
    System.out.println(Arrays.toString(parts));
} 
```

输出：

```
[C9, Kr, Br2, H11, N, O2] 
```

* * *

如果您想拆分各个组件，请使用嵌套调用`split()`：

```
public static void main(String[] args) {
    String input = "C9KrBr2H11NO2";
    for (String component : input.split("(?<=.)(?=[A-Z])")) {
        // split on non-digit/digit boundary
        String[] symbolAndNumber = component.split("(?<!\\d)(?=\\d)");
        String element = symbolAndNumber[0];
        // elements without numbers won't be split
        String count = symbolAndNumber.length == 1 ? "1" : symbolAndNumber[1];
        System.out.println(element + " x " + count);
    }
} 
```

输出：

```
C x 9
Kr x 1
Br x 2
H x 11
N x 1
O x 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:57:31.717

您是否不小心在字母“O”（氧）应该在的某些公式中输入了零？如果是这样的话：

```
"C10H12N2O3".split("(?<=[0-9A-Za-z])(?=[A-Z])");

[C10, H12, N2, O3]

"CH2BrCl".split("(?<=[0-9A-Za-z])(?=[A-Z])");

[C, H2, Br, Cl] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:02:07.647

我相信下面的代码应该允许您提取各种元素及其相关计数。当然，括号使事情变得更复杂，但你没有问他们！

```
Pattern pattern = Pattern.compile("([A-Z][a-z]*)([0-9]*)");
Matcher matcher = pattern.matcher(input);
while (matcher.find()) {
    String element = matcher.group(1);
    int count = 1;
    if (matcher.groupCount > 1) {
        try {
            count = Integer.parseInt(matcher.group(2));
        } catch (NumberFormatException e) {
            // Regex means we should never get here!
        }
    }
    // Do stuff with this component
} 
```

# php - 如何使用php单独处理mysql db中列的最后n条记录

> ID：13336235
> 
> 赞同：0
> 
> 时间：2012-11-11T22:39:43.057
> 
> 标签：php, mysql

我有一个这样的数据库 MySQL：

```
 ------------------------
 | id |  Name  |  City  |
 ------------------------
 | 1  | John   | London |
 | 2  | Jim    | N.York |
 | 3  | Annie  | Rome   | 
```

通过以下查询，我检索特定列的最后 n 个数据：

> SELECT id, Name, City FROM mytable ORDER by id DESC 限制 0,2

在这种情况下，我从“id”、“Name”和“City”列中检索最后两条记录

如何将 php 中的特定变量与结果的每个名称相关联？

例如：$n1 = 安妮 $n2 = 吉姆

因此，我将能够在我的 php 代码的以下部分中使用结果查询的每个元素来满足我的需要？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:05:28.873

考虑到您已经将结果作为数组提取，您可以这样做：

```
for ($i = 1; $i <= count($results); $i++) {
    $n{$i} = $results[$i-1];
} 
```

在这种情况下，结果将是：

```
$n1 = array('id' => 3, 'name' => 'Annie'...);
$n2 = array('id' => 2, 'name' => 'Jim'); 
```

或者你可以这样做：

```
for ($i = 1; $i <= count($results); $i++) {
    $n{$i} = $results[$i-1]['name'];
} 
```

在这种情况下，结果将是：

```
$n1 = 'Annie';
$n2 = 'Jim'; 
```

但真正的问题是，为什么不使用结果数组本身呢？

# ios - 在 iOS 中加载 4 通道纹理数据

> ID：13336241
> 
> 赞同：5
> 
> 时间：2012-11-11T22:40:22.803
> 
> 标签：ios, opengl-es-2.0, textures, premultiplied-alpha

我想从 iOS 中的文件加载 4 通道纹理数据，所以我将纹理视为（连续）贴图

```
[0,1]x[0,1] -> [0,1]x[0,1]x[0,1]x[0,1] 
```

如果我使用 fileformat `.png`，XCode/iOS 将文件视为图像，因此将每个组件`rgb`与`a`（预乘 alpha）相乘，从而破坏我的数据。我应该如何解决这个问题？例子可能是

*   使用两个带有组件的纹理`rgb`（3 通道）
*   除法后阿尔法
*   使用其他文件格式

其中，我认为最好的解决方案是使用另一种文件格式。GL 压缩文件格式 (PVRTC?) 不是 Apple 平台独立的，并且似乎具有低分辨率（4 位）（[参考](https://developer.apple.com/library/ios/documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/TechniquesForWorkingWithTextureData/TechniquesForWorkingWithTextureData.html#//apple_ref/doc/uid/TP40008793-CH104-SW3)）。

编辑：如果我自己在下面的回答是正确的，则无法在 iOS 中获取 png 的 4 通道数据。由于 OpenGL 是关于创建图像而不是呈现图像，因此应该可以以某种方式加载 4 通道数据。png 是图像的文件格式（~~压缩取决于所有 4 个通道~~但是一个通道的压缩独立于其他通道），所以有人可能会争辩说我应该使用另一种文件格式。那么我应该使用哪些其他压缩文件格式，哪些易于在 iOS 中读取/集成？

更新：“组合”提到了一种加载 4 通道非预乘纹理的方法，所以我必须给他正确的答案。但是，该解决方案有一些我不喜欢的限制。我的下一个问题是“从 iOS 中的 png 文件访问原始 4 通道数据”:)

我认为这是一个糟糕的库设计，无法读取 4 通道 png 数据。我不喜欢系统试图比我自己更聪明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T06:38:11.427

当您考虑PVRTC 时，可以选择使用[GLKit 。](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKit_Collection/_index.html)这包括[GLKTextureLoader](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html)，它允许您在没有预乘 alpha 的情况下加载纹理。使用例如：

```
+ (GLKTextureInfo *)textureWithContentsOfFile:(NSString *)fileName options:(NSDictionary *)textureOperations error:(NSError **)outError 
```

并传递一个选项字典，其中包含：

```
GLKTextureLoaderApplyPremultiplication = NO 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T22:55:38.930

你可以简单地要求 Xcode 不要“压缩”你的 PNG 文件。单击左上角的项目，选择“构建设置”，找到“压缩 PNG 文件”并将选项设置为“否”。

至于您的其他选择，后除法不是一个糟糕的解决方案，但显然您会失去整体精度，我相信 TIFF 和 BMP 也受支持。PVRTC 是 PowerVR 特定的，因此它不是 Apple 特定的，但它也不是完全独立于平台的，并且专门设计为一种有损压缩，在 GPU 上几乎不需要输入即可解压缩。您通常会增加纹理分辨率以改善每像素计数的低位。

![在此处输入图像描述](../Images/473d453b412044f0915cee93c329ee03.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T15:42:18.770

您应该使用[libpng](http://www.libpng.org/pub/png/libpng.html)加载没有预乘颜色的 PNG。

它是用 C 编写的，应该为 iOS 编译。

我在 Android 上也遇到过类似的问题，并且还必须使用第三方库来加载具有非预乘颜色的 PNG 文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T21:14:22.010

这是试图回答我自己的问题。

无法加载非预乘的 .png 文件。

该选项`kCGImageAlphaLast`是一个有效的选项，但没有为`CGBitmapContextCreate`([参考](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-BCIBHHBB)) 提供有效的组合。然而，它是`CGImageRef`'s 的有效选项。

上面提到的 XCode 中的构建设置`COMPRESS_PNG_FILES`所做的是将 .png 文件转换为其他文件格式，并将通道`rgb`与`a`（[参考](http://iphonedevelopment.blogspot.no/2008/10/iphone-optimized-pngs.html)）相乘。我希望禁用此选项可以在我的实际 .png 文件中访问频道数据。但我不确定这是否可能。以下示例尝试以低级别访问 .png 数据，例如`CGImageRef`：

```
void test_cgimage(const char* path)
{
    CGDataProviderRef dataProvider = CGDataProviderCreateWithFilename(path);
    CGImageRef cg_image = CGImageCreateWithPNGDataProvider(dataProvider, NULL, NO,
                                                           kCGRenderingIntentDefault);
    CGImageAlphaInfo info = CGImageGetAlphaInfo(cg_image);
    switch (info)
    {
        case kCGImageAlphaNone:               printf("kCGImageAlphaNone\n");                break;
        case kCGImageAlphaPremultipliedLast:  printf("kCGImageAlphaPremultipliedLast\n");   break;
        case kCGImageAlphaPremultipliedFirst: printf("kCGImageAlphaPremultipliedFirst\n");  break;
        case kCGImageAlphaLast:               printf("kCGImageAlphaLast\n");                break;
        case kCGImageAlphaFirst:              printf("kCGImageAlphaFirst\n");               break;
        case kCGImageAlphaNoneSkipLast:       printf("kCGImageAlphaNoneSkipLast\n");        break;
        case kCGImageAlphaNoneSkipFirst:      printf("kCGImageAlphaNoneSkipFirst\n");       break;
        default: break;
    }

} 
```

`COMPRESS_PNG_FILES`这给出了禁用的“kCGImageAlphaPremultipliedLast” 。所以我认为 iOS 总是会转换 .png 文件，即使在运行时也是如此。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-28T13:28:44.890

有更好的解决方案，更快（大约 3x~5x）和跨平台

```
 #define STB_IMAGE_IMPLEMENTATION
    #include "stb_image.h"

    // force 4 channel rgba, force flipy

    // image: first pixel is top left, OpenGL assume first is bottom left, so need flipy
    bool flipy = true;
    int width, height, nrChannels;
    stbi_set_flip_vertically_on_load(flipy);

    unsigned char *imageData = stbi_load(path.c_str(), &width, &height, &nrChannels, 4);

    // load data to your texture
    // glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, bytes);

    free(imageData); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T13:33:51.450

不是 100% 你想要的，但我使用这种方法解决了这个问题：将 alpha 通道放入一个单独的黑白 png 并保存没有 alpha 的原始 png。所以占用的空间大致相同。然后在我的纹理加载器中加载两个图像并组合成一个纹理。

我知道这只是一种解决方法，但至少它给出了正确的结果。是的，这很烦人，iOS 不允许您在没有预乘 alpha 的情况下从 PNG 加载纹理。

# jquery - Jquery 切换动作

> ID：13336247
> 
> 赞同：1
> 
> 时间：2012-11-11T22:41:01.803
> 
> 标签：jquery, css

> **可能重复：**
> [使用 JQuery 在样式之间切换](https://stackoverflow.com/questions/6010790/using-jquery-to-toggle-between-styles)

当我说切换时，我并不是指切换（）函数。我将项目的 css 更改为单击功能上的任何内容，我想再次单击该项目并恢复为原始 css。

```
 $("#item").click(function(){
      $("#item").css("border-color", "#A8402A");
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:42:50.343

而不是修改内联样式，只需使用一个类：

**CSS**：

```
.active {
    border-color: #A8402A;
} 
```

**JavaScript**：

```
$('#item').click(function() {
    $(this).toggleClass('active');
}); 
```

**演示：http: [//jsfiddle.net/zjE3x/1/](http://jsfiddle.net/zjE3x/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:42:35.447

其实你的意思是`.toggleClass()`功能

做就是了

```
$("#item").click(function(){
    $(this).toggleClass("newClass");
}); 
```

where`.newClass`包含您要添加/删除的样式，即

```
.newClass{
    border-color: #A8402A;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T22:43:12.623

我认为您想要的是[toggleClass](http://api.jquery.com/toggleClass/)。它可以让你用 css 类设置你的样式，然后从你的 jQuery 中动态地交换它们。

# objective-c - 当文件在外部设备上时检查文件是否存在

> ID：13336250
> 
> 赞同：1
> 
> 时间：2012-11-11T22:41:27.787
> 
> 标签：objective-c, cocoa, nsfilemanager

播放列表文件 .m3u 包含外部设备（本例中为 USB 密钥）上可用的条目，例如：

```
/Volumes/KINGSTON/folder/mytitle.mp3 
```

我想检查文件是否存在：

```
NSURL *url = [NSURL URLWithString:@"/Volumes/KINGSTON/folder/mytitle.mp3"];
NSFileManager *manager = [NSFileManager defaultManager];
NSLog(@"%d",[manager fileExistsAtPath:[url absoluteString]]); //returns 0\. I expect 1 
```

我也试过：

```
NSURL *u = [[NSURL alloc]initWithScheme:@"/Volumes" host:@"/KINGSTON" path:@"/folder/mytitle.mp3"];
NSLog(@"%d",[manager fileExistsAtPath:[u absoluteString]]); //0 
```

我做错什么了？

谢谢，

罗兰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:37:50.800

> ```
> NSURL *url = [NSURL URLWithString:@"/Volumes/KINGSTON/folder/mytitle.mp3"]; 
> ```

该字符串不描述 URL。这是一个路径名。使用`fileURLWithPath:`.

> ```
> NSLog(@"%d",[manager fileExistsAtPath:[url absoluteString]]); 
> ```

`absoluteString`不返回路径；它返回一个描述 URL 的字符串。使用`path`.

或者，更好的是，[使用`checkResourceIsReachableAndReturnError:`](https://stackoverflow.com/a/1929185/30461).

> 我也试过：
> 
> ```
> NSURL *u = [[NSURL alloc]initWithScheme:@"/Volumes" host:@"/KINGSTON" path:@"/folder/mytitle.mp3"]; 
> ```

/Volumes 不是方案，/KINGSTON 不是主机，/folder/mytitle.mp3 是路径，但不引用任何存在的东西。

文件 URL 的方案是`file:`，主机通常是 localhost 或空字符串。文件 URL 的路径是文件的完整绝对路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:03:50.163

在您的第一个示例中，您需要使用`+[NSURL fileURLWithPath:]`. 在你的第二个例子中，我看到了你想要做的事情，但你只是以错误的方式去做。

我认为`NSURL`当您拥有可以直接通过的路径时，您会为此烦恼`-fileExistsAtPath:`吗？

# javascript - JavaScript.replace()，删除标签和内容

> ID：13336254
> 
> 赞同：0
> 
> 时间：2012-11-11T22:41:43.000
> 
> 标签：javascript, regex, preg-replace

我有一个标签，里面有一些真实的内容。我希望能够使用 javascript 删除该标签及其所有内容`srt.replace()`。

我通常会使用类似的东西，`jQuery('.tag-class').remove()`但在这种情况下，jQuery 不是一个选项。

我相信一个正则表达式是我正在寻找的，但经过相当长的一段时间后，我并不比我开始时更接近。

我需要这样做。

```
var myContent = 'bla bla bla <div class="remove-me">variable content here</div> something something';
// run some cool replace() here and get
// bla bla bla  something something 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T22:45:51.340

如果场景是这样的，你可以简单地使用 vanilla JavaScript DOM 修改：

HTML：

```
<div id="abc">bla bla bla <div class="remove-me">variable content here</div> something something</div> 
```

JavaScript：

```
var container = document.getElementById("abc"),
    items = container.getElementsByClassName("remove-me"),
    i = 0,
    len = items.length;

for( ; i < len; i++ ) {
    items[i].parentNode.removeChild(items[i]);
} 
```

* * *

或者，如果您想去除所有 HTML 标签：

```
var container = document.getElementById("abc");

container.innerHTML = container.innerHTML.replace(/(<([^>]+)>)/ig,""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:30:04.190

不要使用正则表达式来修改 HTML。

HTML 被设计为由解析器解析，正则表达式（本身）不擅长解析文档标记。最好将 HTML 作为 DIV 或类似元素的 innerHTML 插入，然后使用 DOM 方法修改内容。

然后，您可以将 DIV 的内容作为节点插入到文档中，或者获取 innerHTML 并将其插入。

例如

```
function removeElementsFromMarkup(markup, selector) {
  var el = document.createElement('div');
  el.innerHTML = markup;
  var nodes = el.querySelectorAll(selector);

  for (var i=0, iLen=nodes.length; i<iLen; i++) {
    node = nodes[i]
    if (node.parentNode) {
      node.parentNode.removeChild(node);
    }
  }
  return el.innerHTML;
}

alert( removeElementsFromMarkup(
  '<div>foo<div class="remove-me">bar</div></div>', '.remove-me') // <div>foo</div>
); 
```

以上使用 querySelectorAll，但您应该使用适合的任何选择方法。如果可以完成这项工作，请选择最低公分母（例如 getElementsByTagName）。

如果您展示一个真实示例来说明您正在尝试做什么，您将获得更具体（并且可能更有用）的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:03:19.310

```
var myContent = 'bla bla bla <div class="remove-me">variable content here</div> something something';
myContent = myContent.replace(/<div[\s\w"\=-]*class="remove-me"[\s\w"\=-]*>[\s\w]*<\/div>/g, "");
alert(myContent); 
```

[https://jsfiddle.net/umL1tswn/](https://jsfiddle.net/umL1tswn/)

# iphone - 如何在 UIWebView 上模拟点击事件？

> ID：13336261
> 
> 赞同：4
> 
> 时间：2012-11-11T22:43:04.490
> 
> 标签：iphone, ios, ipad, uiwebview

如何在 UIWebView 上模拟点击事件？我只需要通过页面脚本处理鼠标按下+向上事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:53:45.533

我不确定公共 API 是否可以做到这一点。使用私有 API，这是可能的，如这里所述[synthesizing-touch-event-on-iphone](http://www.cocoawithlove.com/2008/10/synthesizing-touch-event-on-iphone.html)。不过，您将无法在 appstore 应用程序中使用它。

另一种可能的方法是使用 javascript。不确定这是否正是您想要的。可以使用[这里](https://stackoverflow.com/a/6158050/1730272)提到的 javascript 来完成，

```
function simulate(element, eventName)
    {
        var options = extend(defaultOptions, arguments[2] || {});
        var oEvent, eventType = null;

        for (var name in eventMatchers)
        {
            if (eventMatchers[name].test(eventName)) { eventType = name; break; }
        }

        if (!eventType)
            throw new SyntaxError('Only HTMLEvents and MouseEvents interfaces are supported');

        if (document.createEvent)
        {
            oEvent = document.createEvent(eventType);
            if (eventType == 'HTMLEvents')
            {
                oEvent.initEvent(eventName, options.bubbles, options.cancelable);
            }
            else
            {
                oEvent.initMouseEvent(eventName, options.bubbles, options.cancelable, document.defaultView,
          options.button, options.pointerX, options.pointerY, options.pointerX, options.pointerY,
          options.ctrlKey, options.altKey, options.shiftKey, options.metaKey, options.button, element);
            }
            element.dispatchEvent(oEvent);
        }
        else
        {
            options.clientX = options.pointerX;
            options.clientY = options.pointerY;
            var evt = document.createEventObject();
            oEvent = extend(evt, options);
            element.fireEvent('on' + eventName, oEvent);
        }
        return element;
    }

    function extend(destination, source) {
        for (var property in source)
          destination[property] = source[property];
        return destination;
    }

var eventMatchers = {
    'HTMLEvents': /^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
    'MouseEvents': /^(?:click|dblclick|mouse(?:down|up|over|move|out))$/
}
var defaultOptions = {
    pointerX: 0,
    pointerY: 0,
    button: 0,
    ctrlKey: false,
    altKey: false,
    shiftKey: false,
    metaKey: false,
    bubbles: true,
    cancelable: true
} 
```

然后使用，

```
simulate(document.getElementById("btn"), "click"); 
```

您可以尝试通过在您调用的`UIWebView's`委托方法`webViewDidFinishLoad:`中执行 javascript 。检查是否有帮助。`UIViewController``[webview stringByEvaluatingJavaScriptFromString:@"methodName()"];`

# mysql - MySQL 触发器（替换断言）不起作用

> ID：13336263
> 
> 赞同：2
> 
> 时间：2012-11-11T22:43:55.830
> 
> 标签：mysql, triggers, assertions

你能帮我解决这个问题吗？我在数据库中有两个表`MySQL`：

```
ServiceProvider(SPID, Name, ... etc.)
hasTag(SPID, TagID) 
```

每个服务提供者应该至少有一个标签，最多有五个标签。最大约束不是问题，但最小约束拒绝正常工作。我首先尝试通过断言来实现这一点，但后来我发现，它`MySQL`不支持断言。因此，我编写了以下触发器：

```
delimiter |

CREATE  TRIGGER MinTags BEFORE INSERT
        ON ServiceProvider
        FOR EACH ROW BEGIN
            IF EXISTS (SELECT SPID FROM ServiceProvider
                       WHERE NOT EXISTS (SELECT DISTINCT SPID FROM hasTag))
            THEN INSERT INTO stop_action VALUES(1, 'Assert Failure');
            END IF;
        END;
|

delimiter ; 
```

插入`'Assert Failure'`表`stop_action`只是为了创建一个约束冲突，以便数据库将中止该操作。

现在，通常，当我在表中插入任何值`ServiceProvider`，而不向表中插入任何内容时`hasTag`，我应该会得到一个错误，对吧？但是，不知何故它不起作用......我可以将任何我想要的东西插入`ServiceProvider`表中，而不会收到任何错误。你知道，我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:46:47.777

去规范化一点怎么样：

```
ALTER TABLE ServiceProvider
  ADD COLUMN TagID1 BIGINT UNSIGNED NOT NULL,
  ADD COLUMN TagID2 BIGINT UNSIGNED NULL,
  ADD COLUMN TagID3 BIGINT UNSIGNED NULL,
  ADD COLUMN TagID4 BIGINT UNSIGNED NULL,
  ADD COLUMN TagID5 BIGINT UNSIGNED NULL; 
```

如果合适，包括外键约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:58:26.080

如所写，此触发器甚至不使用要插入的行中的值。

获取 SPID 列值的语法是：

```
NEW.SPID 
```

此外，请考虑使用 SIGNAL 语句来引发错误。

如果你想在 SQL 中使用 ASSERT，这篇文章可能会有所帮助：

[SQL 脚本 - 是否存在与 #define 等效的内容？](https://stackoverflow.com/questions/9238978/sql-scripts-does-the-equivalent-of-a-define-exist/9276721#9276721)

# jquery - jQuery 插件 (DataTables) 仅在页面刷新时正确加载

> ID：13336269
> 
> 赞同：2
> 
> 时间：2012-11-11T22:44:45.363
> 
> 标签：jquery, jquery-mobile, jquery-plugins, datatables, browser-refresh

我在使用 DataTables 时遇到问题。当我从不同页面上的链接转到带有表格的页面时，它只会加载表格的 HTML“文本”版本，没有 CSS 格式和 JavaScript（排序、搜索等）。 ）。但是，当我刷新页面时，它将完美加载。在搜索了这个问题的答案后，我发现我的问题可能出在 JQm 上，因为它在页面之间切换时不会加载“整个”HTML 代码。我已经将我的样式和 JavaScript 标记到处移动，但没有成功。我使用的是 DataTables 网站上的默认示例，并且没有更改任何代码。

一般来说，我是 jQuery 和 Web 开发的新手，所以如果有人可以帮助我解决这个问题，我将不胜感激。另外，如果还有什么我应该改变的，我肯定想学习更好的技术！

PS我只是通过将其链接到按钮来链接到此页面。

这是我的代码：

```
<?php
require_once 'classes/Membership.php';
$membership = New Membership();

$membership->confirm_EventAdmin();
session_start();
$con = mysql_connect("mysql server","user","pass");
if(!$con){
    die('Could not connect: ' . mysql_error());
    }
mysql_select_db("clip_comp_server1", $con);

mysql_query("ALTER TABLE $_SESSION[adminEvent] ORDER BY Score DESC");

$query = "SELECT CandID,Score,Team FROM $_SESSION[adminEvent]";
$infoList = mysql_query($query);
?>
<!DOCTYPE HTML>
<html>
<head>
<title>Event Scores and Rankings</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="/css/themes/CLIPTheme.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="/clip_v1/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>

<style type="text/css">
    h1 {
        text-align: center;
    }

    h4  {
        line-height: 1.5;
    }

    .ui-btn-active { color: white !important; background: none !important; background-color: #006600 !important;  }
    .ui-btn-inner {border: 0;}
</style>
<style type="text/css">
    @import "/clip_v1/DataTables-1.9.4/media/css/demo_table.css";
    @import "/clip_v1/DataTables-1.9.4/media/css/demo_page.css";
</style>
</head>
<body>

    <div data-role="page" data-theme="a" data-content-theme="a" id="page" data-add-back-btn="true">
    <div data-role="header" data-position="fixed">
    <div>
        <h1>Event Scores and Rankings</h1>
    </div>
    <!--a href="#" data-role="button" data-rel="back" data-icon="arrow-l" style="height: 80%"><span style="font-size: 1.75em">Back</span></a-->

        <div data-role="navbar" data-grid="c" class="ui-navbar ui-mini" role="navigation" style="border: 0;">
            <ul class="ui-grid-c">
                <li class="ui-block-a"><a href="eventRegister.php" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-inline ui-btn-up-c"><span class="ui-btn-inner"><span class="ui-btn-text" style="font-size: 1.5em">Registration</span></span></a></li>
                <li class="ui-block-b"><a href="teamAssigner.php" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-inline ui-btn-up-c"><span class="ui-btn-inner"><span class="ui-btn-text" style="font-size: 1.5em">Teams</span></span></a></li>
                <li class="ui-block-c"><a href="scoreDisplay.php" class="ui-btn ui-btn-inline ui-btn-up-c ui-btn-active" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true"><span class="ui-btn-inner"><span class="ui-btn-text" style="font-size: 1.5em">Stats</span></span></a></li>
                <li class="ui-block-d"><a href="challengeContent.php" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="a" data-inline="true" class="ui-btn ui-btn-up-c ui-btn-inline"><span class="ui-btn-inner"><span class="ui-btn-text" style="font-size: 1.5em">Challenges</span></span></a></li>
            </ul>
        </div>
    </div>
    <div data-role="content" style="border: 0">     

          <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
        <thead>
          <tr>
            <th>ID</th>
            <th>Score</th>
            <th>Rank</th>
            <th>Team</th>
          </tr>
        </thead>
        <tbody>
          <?php
            $rank = 1;
            while ($index = mysql_fetch_row($infoList)) {
                echo "<tr class=\"odd gradeA\">";
                echo "<td class=\"center\">" . $index[0] . "</td>";
                echo "<td class=\"center\">" . $index[1] . "</td>";
                echo "<td class=\"center\">" . $rank . "</td>";
                echo "<td class=\"center\">" . $index[2] . "</td>";
                echo "</tr>";
                $rank = $rank + 1;
                if ($index = mysql_fetch_row($infoList)) {
                    echo "<tr class=\"even gradeA\">";
                    echo "<td class=\"center\">" . $index[0] . "</td>";
                    echo "<td class=\"center\">" . $index[1] . "</td>";
                    echo "<td class=\"center\">" . $rank . "</td>";
                    echo "<td class=\"center\">" . $index[2] . "</td>";
                    echo "</tr>";
                    $rank = $rank + 1;
                }
            }
          ?>          
        </tbody>
        <tfoot>
          <tr>
            <th>Candidate ID</th>
            <th>Score</th>
            <th>Rank</th>
            <th>Team Assignment</th>
          </tr>
        </tfoot>
      </table>
    </div>
    </div>
<script type="text/javascript" charset="utf-8">
$(document).ready( function () {
    $('#example').dataTable();
} );
</script>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:07:05.703

尝试在本地托管所有资源（jQmobile css、jQuery、jQmobile）。

旁注：我可以看到您正在使用 PHP。帮自己一个忙，使用 PDO 或 mysqli_* 代替 mysql_*。更多信息：[MySQLi 相对于 MySQL 的优势](https://stackoverflow.com/questions/1171344/advantages-of-mysqli-over-mysql)

# java - Java Generic Classes，如何为可能的参数类型定义构造函数

> ID：13336275
> 
> 赞同：1
> 
> 时间：2012-11-11T22:45:38.250
> 
> 标签：java, generics

我正在尝试定义一个可用于泛型类型的 Java 类，但我想为可能的参数类型（如字符）或我可以手动定义的对象类型定义构造函数。

我要创建的类称为：

```
public class Repeated<T> implements Pict {

private T[][] elements;

private double scale;

public Repeated(T[][] elems) {
    elements = elems;
}
} 
```

所以我想添加一个构造函数，它添加一个字符数组并在只有 T 是类型字符的情况下做一些特定的事情。可能吗？或者我应该把它变成一个接口，然后再实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:01:20.720

> 所以我想添加一个构造函数，它添加一个字符数组并在只有 T 是类型字符的情况下做一些特定的事情

听起来像是多态性的一个很好的例子：

```
public class RepeatedChars extends Repeated<Character> {

    public RepeatedChars(Character[][] chars) {
        super(chars);
        //do special stuff
    }

    //other character-specific logic if applicable
} 
```

您甚至可以将此类隐藏为实现细节：

```
public class Repeated<T> implements Pict {

    ...

    private static class RepeatedChars extends Repeated<Character> {
        //see above
    }

    public static Repeated<Character> makeForChars(Character[][] chars) {
        return new RepeatedChars(chars);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:48:19.050

你应该能够做到这一点：

```
public Repeated(T[][] elems) {
    elements = elems;
    boolean isCharacterArrayArray = false;
    if (elems != null) {
        for (T[] elt : elems) {
            if (elt != null && elt.length > 0) {
                isCharacterArrayArray = elt[0] instanceof Character;
                break;
            }
        }
    }
    if (isCharacterArrayArray) {
        // received a Character[][]
    }
} 
```

但是，由于类型擦除，我认为您无法区分这些调用：

```
new Repeated((Character[][]) null);
new Repeated((Integer[][]) null); 
```

没有传递某种显式的类参数。

**编辑**使用类参数，一切都变得简单得多：

```
public Repeated(T[][] elems, Class<T> cls) {
    elements = elems;
    if (cls.equals(Character.class)) {
        // passed a Character[][]
    }
} 
```

# visual-studio - 大学 msdn 上的 Visual Studio 2010 x64

> ID：13336277
> 
> 赞同：0
> 
> 时间：2012-11-11T22:45:45.147
> 
> 标签：visual-studio, 64-bit, msdn

在我们大学的 MSDN(http://msdn.miet.ru) Visual Studio 2010 只有 x86 版本。我可以在 Windows 7 SP1 x64 上安装它吗？如果没有，请给我指向 MSDN Visual Studio 2010 x64 的链接。如果可能的专业版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:02:41.220

我相信 VS2010 只有 32 位版本，从技术上讲，不应该有理由不能在 64 位 Windows 操作系统上安装它。

# java - 自动将大括号添加到 java 代码库中的所有 if/else/for/while 等

> ID：13336281
> 
> 赞同：12
> 
> 时间：2012-11-11T22:46:04.537
> 
> 标签：java, formatting, sonarqube

我想减少大型遗留 Java 代码库中声纳违规的数量，似乎“速赢”是将所有这些条件语句更新为带有大括号。这似乎是一件容易的事，我不明白为什么它不容易自动化。

有人知道可以执行这样的批量操作的工具吗？或者为什么在我花时间自己写东西之前做这样的事情可能是个坏主意？如果我自己写一个，最好的工具是什么？理想情况下是 Java 语言感知的东西，这样我就不必处理格式化极端情况等。

顺便说一句，这条规则是不可协商的，所以这确实是最好的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-11T22:55:16.950

`Control flow statement without braces`首先在检查设置中启用。

IntelliJ Idea -> 运行代码检查 -> 快速修复（至少在商业版中有效）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-11T22:50:35.320

最简单的方法是使用[Eclipse](http://www.eclipse.org)并单击`Clean-up`整个项目。在`Clean-up`配置文件配置中选择`Code style`选项卡。在那里你可以选择`Use blocks in if/while/for/do statements`为`Always`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-12T00:04:01.490

虽然建议对遗留代码保持谨慎，但检测遗留代码中的错误也是一件好事……或者至少使错误更容易被发现。

让我们考虑一下 Brian Agnew 的困难案例：

```
// Case #1
if (x) doMethodA(); doMethodB(); 
```

事实上，就 JLS 和 Java 编译器而言，这*意味着*

```
if (x) doMethodA();
doMethodB(); 
```

所以当转换器将代码重写为：

```
if (x) { 
    doMethodA();
}
doMethodB(); 
```

它不会改变代码的含义，而是纠正可能导致某人*误读*代码的问题，并*错过**代码中已经*存在的潜在错误；即如果第二次调用应该是有条件的......

```
// Case #2
if (x) 
    // doMethodA();
    doMethodB(); 
```

再一次，当它被重写时，你应该得到：

```
 if (x) {
    // doMethodA();
    doMethodB();
 } 
```

这和原来的意思是一样的。此外，这很可能反映了程序员的意图……如果要相信缩进的话。但是考虑一下：

```
// Case #2a
if (x) 
    // doMethodA();
doMethodB(); 
```

当我们将其重写为

```
if (x) {
    // doMethodA();
    doMethodB();
} 
```

代码的实际含义没有改变，不正确的缩进不再会误导。如果程序员决定取消第一次调用的注释，他可能没有意识到之前的注释已经产生了意想不到的后果。（证据在我们已经“修复”的原始缩进中。）但是有一个潜在的解决方案；见下文。

* * *

如果我们假设代码转换工具在正确理解 Java 的语法和语义的情况下运行，那么它不会破坏任何尚未破坏的东西，并且它会（在一定程度上）使任何现有的破坏对某人来说更加明显阅读代码。对我来说，这是一个零风险的胜利，即使对于遗留代码也是如此。

现在，如果我们让转换器更智能，它可以*检测*到原始缩进指示可能存在错误的一些情况（如上面的情况 #1 和 #2a），并标记它们以进行更仔细的代码检查。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-11T22:51:00.120

这让我觉得可能非常危险。你有全面的单元测试覆盖率吗？

我可以看到一些直接困难的案例，例如

```
if (x) doMethodA(); doMethodB(); 
```

和

```
if (x) 
  // doMethodA();
  doMethodB(); 
```

有两个会浮现在脑海中并且不能*天真地*处理（您应该具有语言意识来解决这些问题）。除非你有语言感知和可靠的工具，否则我不会尝试自动化这样的任务，而是强制执行一个策略，当你出于其他原因更改代码时修改代码，并且可以在那个阶段通过单元测试断言代码覆盖率在更改代码之前。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T13:56:06.663

罗伯特在评论中说：“@ira 我也有兴趣听到这个真正的语言感知工具！”

对不起，戏弄。对于取笑的原因，请查看我的简历。

Untease：参见[http://www.semanticdesigns/Products/DMS/DMSToolkit.html](http://www.semanticdesigns/Products/DMS/DMSToolkit.html)作为基础引擎，以及[http://www.semanticdesigns.com/Products/FrontEnds/JavaFrontEnd.html](http://www.semanticdesigns.com/Products/FrontEnds/JavaFrontEnd.html)。这对创建了一个完全语言感知的源到源程序转换系统。

可以使用具有两个源到源转换规则的 DMS 完成此任务：

```
 rule curlies_for_then_statement:(c:expression, s: statement}: 
             statement->statement
       " if (\c) \s " -> "if (\c) { \s } ";

  rule curlies_for_else_statement:(c:expression, b: block, s: statement}:
              statement->statement
       " if (\c) \b else \s " -> "if (\c) \b else { \s } "; 
```

这很可靠，因为 DMS 完全由形式语法驱动（在本例中为 Java），并且不是在原始文本上操作，而是在抽象语法树上操作；这也使得独立于布局。（理解“块”、“表达式”和“语句”是语法非终结符的规则可能很有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-04T13:45:05.627

如果您首先在编辑器设置中设置正确的编码样式， Intellij 2017 通过**Reformat Code**支持此功能。

```
File -> Settings -> Editor -> Code Style -> Java -> Wrapping and Braces 
```

![编辑器设置 Intellij](../Images/103eda5335234f2514f631fb684b6f2f.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-11T22:53:40.463

虽然这可能是一个快速的声纳胜利，但你正在做一些危险的事情。推荐的方法是仅在必须重新访问该代码时才修复遗留代码。这些一揽子方法可能会导致非常微妙的错误。因为政策已经改变了你的管理团队需要明白这是一项艰巨的任务，并且应该保证所有未来的代码都按照标准开发。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-01-19T02:48:56.807

> 顺便说一句，这条规则是不可协商的，所以这确实是最好的方法。

有趣的。

您有一个充满样式错误的遗留代码库，并且必须修复样式错误是不可协商的。

这个练习的价值主张（至少可以说）是可疑的。“遗留代码库”通常是一种礼貌的说法，即代码应该被丢弃并重写......但你负担不起。但是，显然，您可以负担得起纠正丢失的大括号的费用，这不太可能对可维护性产生任何真正的影响。

正如之前的答案所指出的那样。如果您正确地自动执行此样式校正：

*   它实际上不会修复任何错误，但也不会引入任何新错误。

*   它可能会删除作为现有错误标志的“线索”（例如，可疑的缩进）。

但是，如果您手动进行样式更正：

*   您有可能会注意到一些错误。这些可以添加到您的问题跟踪器中，以进行进一步的诊断和修复。

*   您也有可能引入新的错误。如果我们假设现有的单元/系统不存在或质量低下（这是一个遗留代码库），那么这些新错误很有可能未被发现。

现在概括 Sonar 检测到的与样式相关的错误。

总而言之，修复*遗留代码库*中所有样式错误的整个过程（IMO）如果自动化则很大程度上是浪费时间，如果手动则可能存在风险。

这*应该*是可以商量的。您应该能够告诉管理层这些问题......

# sql - 根据来自不同表的记录计数更新字段

> ID：13336282
> 
> 赞同：3
> 
> 时间：2012-11-11T22:46:22.427
> 
> 标签：sql, count

我需要在另一个表中给定角色的计数大于 1 的表中将值设置为 1。

表 cursillo.members 具有字段 memid 和 hsd。表 cursillo.teams 具有字段 memid（两者之间的链接），一个字段称为运动，另一个字段称为角色。

我想要完成的是与此类似的事情：

```
update cursillo.members_eligible p, cursillo.teams pp
   set p.hsd=1     
 where p.memid = pp.memid AND (pp.role = 'HSD' OR pp.role = 'SD')
   and pp.movement = 'Cursillo' AND count(pp.role) > 1; 
```

或这个：

```
update members_eligibile
   set hsd=1 
  from teams 
 where teams.memid=members_eligible.memid 
   and (teams.role = 'HSD' OR teams.role = 'SD')  
   and teams.movement = 'Cursillo' 
   and count(teams.role) > 1; 
```

换句话说，如果给定的 memid 在 cursillo.teams 表中有多个记录，其中角色的值等于 HSD 或 SD，则将 cursillo.members_eligible.hsd 设置为 1。

我不知道如何处理 count() 部分。

谢谢，迈克·里德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:19:18.043

可能重复的问题：

[MySQL - 在 WHERE 子句中使用 COUNT(*)](https://stackoverflow.com/questions/301793/mysql-using-count-in-the-where-clause)

尝试使用“有”关键字

以下是链接答案中的相关部分（在本例中为 select 语句）：

```
select gid
from `gd`
group by gid 
having count(*) > 10
order by lastupdated desc 
```

看起来“有”只能在选择语句中使用： [http ://www.mysqltutorial.org/mysql-having.aspx](http://www.mysqltutorial.org/mysql-having.aspx)

因此，您可能需要让更新的 where 子句包含一个 select 语句：

```
update members_eligibile
   set hsd=1 
  from teams 
 where teams.memid=members_eligible.memid 
   and (teams.role = 'HSD' OR teams.role = 'SD')  
   and teams.movement = 'Cursillo' 
   and members_eligible.memid IN
   (SELECT members_eligible.memid from members_eligible where teams.memid=members_eligible.memid  having count(teams.role) > 1); 
```

您将不得不调整选择语句，我还没有测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:45:46.970

SQL Server 2005+

```
UPDATE x
SET x.hsd = 1
FROM (SELECT e.hsd, COUNT(*) OVER (PARTITION BY t.role) AS cnt
      FROM teams t JOIN members_eligibile e ON t.memid = e.memid
      WHERE (t.role = 'HSD' OR t.role = 'SD') AND t.movement = 'Cursillo') x
WHERE x.cnt > 1 
```

# c++ - C++ 奇怪的构造函数行为

> ID：13336283
> 
> 赞同：5
> 
> 时间：2012-11-11T22:46:33.380
> 
> 标签：c++, constructor, stack, destructor

**任何人都可以向我解释复杂 a**之间的区别吗？和**复杂 b();** ?

```
#include<iostream>

class Complex
{
public:

    Complex()
    {
        std::cout << "Complex Constructor 1" << std::endl;
    }

    Complex(float re, float im)
    {
        std::cout << "Complex Constructor 2" << std::endl;
    }

    ~Complex()
    {
        std::cout << "Complex Destructor" << std::endl;
    }    
};

int main()
{
    Complex a;
    std::cout << "--------------------------" << std::endl;
    Complex b();
    std::cout << "--------------------------" << std::endl;
    Complex c(0,0);
    std::cout << "--------------------------" << std::endl;

    return 0;
} 
```

**输出：**

```
Complex Constructor 1
--------------------------
--------------------------
Complex Constructor 2
--------------------------
Complex Destructor
Complex Destructor 
```

如您所见，**复杂 a；**确实调用了它的默认构造函数，**Complex b();** 不和**复杂 c(0,0);** 调用重载的构造函数。

这里发生了什么？我想，那个**Complex b();** 会创建一个堆栈变量并调用它的默认构造函数来初始化它吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T22:47:55.993

`Complex b();`是函数声明。那是不带参数并返回`Complex`对象的函数。

这是一个很常见的错误并且有它自己的名字：[most vexing parse](http://en.wikipedia.org/wiki/Most_vexing_parse)

C++11 通过引入[统一的初始化语法帮助解决了这个问题](http://en.wikipedia.org/wiki/C++11#Uniform_initialization)

```
Complex b{}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T22:47:58.940

`Complex b();`声明一个没有参数的函数并返回一个`Complex`.

# c# - 断开连接的上下文中的 db4o：如何处理保存/更新

> ID：13336285
> 
> 赞同：0
> 
> 时间：2012-11-11T22:46:42.420
> 
> 标签：c#, db4o

我正在处理的应用程序是客户端/服务器，它们之间具有 REST 通信。我想在服务器端使用 db4o。客户端可以更新或创建条目。因此，对象从客户端返回到服务器以从“对象容器外”进行更新。

让：

```
 public class IdHolder
  {
    public Guid Id {get; set;}
  }

  public class MyClass : IdHolder
  {
    public string SomeData {get; set;}
    public IdHolder Child {get; set;}
  } 
```

如您所见，MyClass 类引用了 IdHolder。

根据 db4o[文档](http://community.versant.com/documentation/Reference/db4o-8.1/net/reference/Content/platform_specific_issues/disconnected_objects/comparison_of_ids.htm)，我有 2 个解决方案：1.内部 Uuid 2.手动 Guid 处理

在情况 1\. 中，客户端必须具有对 db4o 程序集的引用才能知道特定类型的 db4o.Uuid 是不好的。

在情况 2.（在上面的类定义中隐含）中，Guid 处理很方便，但 db4o 不知道内部 IdHolder 引用。例如：

*   o1 是保存在 DB 中的 IdHolder
*   o2 是带有 o2.Child == o1 的 MyClass

当 o2 被发送到 Server 进行保存时，由于 db4o 不知道 o1 已经存在并且可以通过其 o1.Id 找到，所以将 o1 的重复条目保存在 DB 中。

问题是：使用 db4o 处理断开连接场景的最佳方法是什么？

**编辑：**

[如果文档](http://community.versant.com/documentation/reference/db4o-8.0/java/reference/Content/platform_specific_issues/disconnected_objects.htm)处理此类问题，则此部分。“合并”。对我来说似乎不是很满意。我对您的概念/技术想法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:07:11.893

db4o 方面基本上不支持该功能。像文档所说的“[合并”](http://community.versant.com/documentation/reference/db4o-8.1/net/reference/Content/platform_specific_issues/disconnected_objects.htm)基本上是您拥有的最佳选择。

正因为如此，db4o 对于 Web 应用程序来说并不是非常理想的。（而且它也不能扩展，因为它本质上是单线程的。）

# python - Python ValueError：操作数无法与形状一起广播

> ID：13336288
> 
> 赞同：3
> 
> 时间：2012-11-11T22:46:50.887
> 
> 标签：python, numpy, svd

我正在做 SVD，当我尝试运行我的代码时，我收到以下错误：

> ValueError：操作数无法与形状一起广播 (375, 375) (375, 500)

我正在使用尺寸为 (500, 375) 的图像

这是我的代码：

```
from PIL import Image
from Image import new
from numpy import *
import numpy as np
from scipy.linalg import svd

im = Image.open("lake.tif")
pix = im.load()
im.show()
r, g, b = im.split()
R = np.array(r.getdata())
R.shape = (500, 375)
Ur, Sr, VrT = svd(R.T, full_matrices=False)
R1 = Ur * diag(Sr) * VrT 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T11:45:19.297

你正在做组件明智的产品。要么使这些东西矩阵或使用：

```
 R1 = np.dot(Ur, np.dot(diag(SR), VrT)) 
```

或使用类似的东西：

```
Ur, Sr, VrT = map(np.asmatrix, (Ur, diag(Sr), Vrt))
R1 = Ur * Sr * VrT 
```

如果你做很多矩阵产品（比如这一行），这会更干净，否则数组通常是更可取的，因为它们是基本类型。如果您愿意，当然也可以只调用`np.asmatrix`每个本身。

# java - Page.getCurrent() 所需的 vaadin 导入

> ID：13336289
> 
> 赞同：0
> 
> 时间：2012-11-11T22:47:12.657
> 
> 标签：java, import, vaadin

我想知道`Page.getCurrent()`在 vaadin 框架中需要什么导入，谷歌搜索引导我`com.vaadin.server`打包，但 eclipse 通知我`import com.vaadin.server`无法解决，也尝试过`com.vaadin.server.*`但`import com.vaadin.server.Page;`无法解决。我正在使用 vaadin 6.8

这是我要运行的课程

```
package com.example.juju;

import com.vaadin.Application;
import com.vaadin.ui.Label;
import com.vaadin.ui.Window;
import com.vaadin.ui.Window.Notification;

public class JujuApplication extends Application
{
    @Override
    public void init() {
        Window mainWindow = new Window("Myproject");

        // Notification with default settings for a warning
        Notification notif = new Notification("Warning",
                                              "<br/>Area of reindeer husbandry",
                                              Notification.TYPE_WARNING_MESSAGE);

        // Customize it 
        notif.setDelayMsec(20000);
        notif.setPosition(Notification.POSITION_BOTTOM_RIGHT);
        notif.setStyleName("mystyle");

        // Show it in the page
        notif.show(Page.getCurrent());

        setMainWindow(mainWindow);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T04:33:54.233

```
Page.getCurrent() 
```

根据 vaadin 论坛支持 vaadin 7 而不是 vaadin 6.x

# c# - 如何在 Windows 窗体中更新 StatusStrip

> ID：13336290
> 
> 赞同：37
> 
> 时间：2012-11-11T22:47:14.987
> 
> 标签：c#, winforms, .net-4.5

我正在尝试更新我的[Windows 窗体](http://en.wikipedia.org/wiki/Windows_Forms)应用程序中的状态条，但没有显示任何内容。这是我的代码：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    lines = Regex.Split(textBox1.Text.Trim(), "\r\n");
    lineCount = lines.Count();
    statusStrip1.Text = "Lines: " + lineCount;
    statusStrip1.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-11T22:54:00.253

[![在此处输入图像描述](../Images/c41c388ae5da08f92cf5838e07b8c752.png)](https://i.stack.imgur.com/MAqyZ.gif)

您将需要`ToolStripStatusLabel`在`StatusStrip`.

然后设置标签的文本（你需要做一个`statusstrip.Refresh`，因为状态标签上没有刷新）。

上的`Text`属性`StatusStrip`来自 StatusStrip 继承`ToolStrip`（而后者又继承`Control`），但由于 ToolStrips 的性质，没有视觉效果。这可能有点令人困惑。

例子：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    //...
    lines = Regex.Split(textBox1.Text.Trim(), "\r\n");
    lineCount = lines.Count();

    //this label is added in visual editor using the default name
    ToolStripStatusLabel1.Text = string.Format("Lines: {0}", lineCount);
    StatusStrip1.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-16T01:58:34.283

我遇到了类似的问题，我看到一个`StatusStrip`控件，但显然`ToolStripStatusLabel`在父控件中没有项目。甚至没有显示`ToolStripStatusLabel`项目的初始文本（例如，“Ready”）。标签项的`Spring`设置为`true`和。`TextAlign``TopLeft`

该问题已通过将 StatusStrip 控件设置`LayoutStyle`为`Flow`并将`ToolStripStatusLabel`项目设置为`Overflow`来解决`Never`。显然，当父控件的布局样式设置为`Table`.

# javascript - 在尚未加载的不同按钮上调用相同的函数

> ID：13336291
> 
> 赞同：0
> 
> 时间：2012-11-11T22:47:25.293
> 
> 标签：javascript, jquery, html, ajax

我不能让它对每个按钮都起作用，我找不到任何解释原因的东西。我想这是我想念的小东西

```
$(document).ready(function() {
  // delete the selected row from the database
  $(document).on('click', '#business-area-delete-button', { model: "BusinessArea" }, deleteRow);
  $(document).on('click', '#business-type-delete-button', { model: "BusinessType" }, deleteRow);
  $(document).on('click', '#client-delete-button', { model: "Client" }, deleteRow);
  $(document).on('click', '#client-type-delete-button', { model: "ClientType" }, deleteRow);
  $(document).on('click', '#communication-channel-type', { model: "CommunicationChannelType" }, deleteRow);
  $(document).on('click', '#parameter-type-delete-button', { model: "ParameterType" }, deleteRow);
  $(document).on('click', '#validation-method-delete-button', { model: "ValidationMethod" }, deleteRow);
} 
```

事件

```
function deleteRow(event){
  $.ajax(
    {
      type:'POST',
      data: { id: $(".delete-row").attr("id") },
      url:"/mysite/admin/delete" + event.data.model,
      success:function(data,textStatus){
        $('#main-content').html(data);
      },
      error:function(XMLHttpRequest,textStatus,errorThrown){
       jQuery('#alerts').html(XMLHttpRequest.responseText);
      },
      complete:function(XMLHttpRequest,textStatus){
        placeAlerts()
      }
    }
   );
   return false
}; 
```

这仅适用于具有 id 验证方法删除按钮的按钮。我使用文档而不是按钮本身，因为按钮包含在稍后通过 ajax 加载的模板中。

我有一个类似的功能，它正在选择表中的一行，但是我没有尝试在这种情况下传递数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:57:49.567

如果您的按钮尚未加载，请尝试`live`使用`on`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:06:40.177

正如我所怀疑的那样，这是非常小的东西。该死的错别字！哈哈。无论哪种方式都可以保持这种建设性，因为我相信其他人可能会遇到同样的问题。

所以

live() 比 on() 更好用吗（它们都有效）。

# ruby-on-rails - 按字段可用性对对象进行排序

> ID：13336292
> 
> 赞同：1
> 
> 时间：2012-11-11T22:47:39.443
> 
> 标签：ruby-on-rails, ruby, sorting

我有一个`place`具有以下参数的对象：`phone`, `category`, `street`, `zip`, `website`.

我还有一个`place`对象数组：`[place1, place2, place3, place4, place5]`.

`place`根据参数可用性对 s 数组进行排序的最佳方法是什么？即，如果`place1`有最多可用的参数，或最少的参数`nil`，它应该重新排序到第一个，依此类推。

**编辑：这些对象不是`ActiveRecord`对象**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:39:22.497

我会让每个 Place 对象知道它有多完整：

```
class Place
  attr_accessor :phone, :category, :street, :website, :zip

  def completeness
    attributes.count{|_,value| value.present?}
  end
end 
```

然后很容易按完整性对您的地点对象进行排序：

```
places.sort_by(&:completeness) 
```

* * *

**编辑：**非 ActiveRecord 解决方案：

由于`Ruby on Rails`标签，我曾假设这是一个 ActiveRecord 模型。由于这是一个非 ActiveRecord 模型，因此您可以`instance_variables`使用`attributes`. （顺便说一句，恭喜你知道 Rails 中的领域模型不必从 ActiveRecord 继承）

```
class Place
  attr_accessor :phone, :category, :street, :website, :zip

  def completeness
    instance_variables.count{|v| instance_variable_get(v).present?}
  end
end 
```

* * *

**编辑 2：**加权属性

您对计算加权分数有意见。在这种情况下，或者当您想要选择特定属性时，您可以在模型中添加以下内容：

```
 ATTR_WEIGHTS = {phone:1, category:1, street:2, website:1, zip:2}

  def completeness
    ATTR_WEIGHTS.select{|k,v| instance_variable_get(k).present?}.sum(&:last)
  end 
```

请注意， the`sum(&:last)`等价于`sum{|k,v| v}`which 又是`reduce(0){|sum, (k,v)| sum += v}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:09:11.633

如果你有一堂课`Place`：

```
class Place
  attr_accessor :phone, :category, :street, :website, :zip
end 
```

然后创建一个实例`place1`：

```
place1 = Place.new
place1.instance_variables      # => []
place1.instance_variables.size # => 0

place1.phone = '555-1212'      # => "555-1212"
place1.instance_variables      # => [ :@phone ]
place1.instance_variables.size # => 1 
```

并创建下一个实例：

```
place2 = Place.new
place2.phone = '555-1212'
place2.zip   = '00000'
place2.instance_variables      # => [ :@phone, :@zip ]
place2.instance_variables.size # => 2 
```

您可以按已设置的实例变量的升序排序：

```
[place1, place2].sort_by{ |p| p.instance_variables.size }
# => [ #<Place:0x007fa8a32b51a8 @phone="555-1212">, #<Place:0x007fa8a31f5380 @phone="555-1212", @zip="00000"> ] 
```

或按降序排序：

```
[place1, place2].sort_by{ |p| p.instance_variables.size }.reverse
# => [ #<Place:0x007fa8a31f5380 @phone="555-1212", @zip="00000">, #<Place:0x007fa8a32b51a8 @phone="555-1212"> ] 
```

这使用基本的 Ruby 对象，不需要 Rails，它会询问对象实例本身设置了什么，因此您不必维护任何外部属性列表。

注意：如果您将实例变量设置为某个值，然后将其设置回`nil`.

这修复了它：

```
[place1,place2].sort_by{ |p|
  p.instance_variables.reject{ |v|
    p.instance_variable_get(v).nil? 
  }.size
}.reverse 
```

这通过使用`count`带有块的 Enumerable 来缩短它：

```
[place1,place2].sort_by{ |p|
  p.instance_variables.count{ |v|
    !p.instance_variable_get(v).nil? 
  }
}.reverse 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:27:33.697

我确信有更好的方法，但这是一个开始：

### 红宝石脂肪一班轮

```
values = {phone: 5, category: 3, street: 5, website: 3, zip: 5} #Edit these values to ponderate.
array = [place1, place2, place3, place4, place5]

sorted_array = array.sort_by{ |b| b.attributes.select{ |k, v| values.keys.include?(k.to_sym) && v.present? }.inject(0){ |sum, n| sum + values[n[0]] } }.reverse 
```

因此，我们基本上是`attributes`通过仅选择散列中的键值对`values`并且仅当它们具有`present?`值时才创建 ActiveRecord 对象的子散列。

然后在这个子散列上，我们调用`inject`它将对我们放入`values`散列中的计算值求和。最后，我们反转所有内容，以便您首先获得最高分。

为了使它干净，我建议您实现一个方法，该方法将计算模型中实例方法中每个对象的分数，如标记建议

# mean - 相关性算法

> ID：13336297
> 
> 赞同：0
> 
> 时间：2012-11-11T22:48:06.200
> 
> 标签：mean, weighted

假设我想根据两个变量订购一些产品：评分和评分数。

例如，假设我有这两种产品：

产品 A 4.9 of 10000

产品 B 5.0 的 1

很明显，产品 A 应该排在第一位。可能使用加权平均值，但每个变量使用什么权重？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:01:22.003

产品 A 的评分为 4.9，它有 10000 个评分。所以，（10000 票的总和）/10000 = 4.9 因此，10000 票的总和 = 4.9*10000。

如果您需要找到要选择的产品，请使用：

4.9*10000/5 = X 和 5*1/4.9 = Y

然后对 X 和 Y 进行比较。它基本上是比较评论相互叠加的锄头。

# android - 我无法创建文件

> ID：13336299
> 
> 赞同：0
> 
> 时间：2012-11-11T22:48:23.293
> 
> 标签：android, unix, echo, cat

我通过 ADB 无线登录到一个 android 设备，我是 root。我在 /sys/devices/platform/musb_hdrc/ 试图修改一个名为 mode 的文件。当我将某些内容通过管道传输到文件中时，它返回没有错误，但文件未修改。当我将某些内容导入新文件时，我得到“目录不存在”。这是怎么回事？

```
# ls -l mode
-rwxrwxrwx root     root         4096 2012-11-11 14:39 mode
# cat mode
b_peripheral
# echo foobar
foobar
# echo foobar > mode
# cat mode
b_peripheral
# echo foobar > myfile
cannot create myfile: directory nonexistent
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:10:46.230

/sys is not a real directory with real files, it's the convenient interface to the kernel functions, exported as file system. some files are writable, but most of them are read-only and you're not supposed to create any files there yourself because, once again, it's not a real file system.

# python - 一个输入文件到多个输出文件

> ID：13336301
> 
> 赞同：-5
> 
> 时间：2012-11-11T22:48:35.337
> 
> 标签：python

我在这个网站上找到了一些有用的东西，但我的输入文件与已经发布的示例不同，我无法以有效的方式实现飞跃。

我的输入文件如下所示：

```
sample_dude data1 data2 data3 data4
sample_lady data5 data6 data7 data8
sample_dude data9 data10 data11 data12
sample_child data13 data14 data15 data16 
```

我想为每个包含所有数据列的样本创建一个单独的文件。例如，一个文件名为 sample_dude.txt，如下所示：

```
data1 data2 data3 data4
data9 data10 data11 data12 
```

样本数量未知，但始终只有四个数据列。

非常感谢任何帮助。谢谢你。

PS：我正在尝试在 python 中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T22:59:25.570

您可以通过打开文件并循环遍历每一行来执行此操作。我不会为你写代码，但这里有一个算法。

```
# Open the input file
# Loop through each line of the file
    # Split the line into the file name and the data
    # Open the file name and append the data to the end 
```

您还可以在打开文件进行写入之前保存所有文件的数据。如果您有很多包含多行的文件，这会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:59:32.557

例如像这样：

```
with open('input.txt') as input:
    for line in input:
        name, data = line.split(' ', 1)

        with open('{0}.txt'.format(name), 'a') as f:
            f.write(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:01:18.473

试试这样的东西？拆分将所有文件名映射到列列表，创建行并将行写入每个文件。

```
with open('someFile.txt') as f:
  out = {}
  for line in f:
    key, data = line.split(' ', 1)        
    if not key in out.keys():
      out[key] = []
    out[key].append(data)

for k, v in out.items():
  with open(k+'.txt', 'w') as f:
    f.writelines(v) 
```

# android - Dropbox SDK 设置/身份验证问题。

> ID：13336302
> 
> 赞同：2
> 
> 时间：2012-11-11T22:48:41.320
> 
> 标签：android, dropbox-api

我在为 Android 设置 dropbox-sdk 时遇到问题。当开始执行代码时，我得到以下`"Unfortunately xxx has stopped"`.

起初我认为问题可能出在清单文件中，因为这通常是我因未正确设置权限而收到错误时。但是，它在网站上说，身份验证所需的唯一权限是互联网。我将清单文件放在下面。

当我打电话时会抛出错误，`AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET)`或者`AccessType ACCESS_TYPE = AccessType.APP_FOLDER`对于我的一生，我无法弄清楚为什么。声明（但不初始化）`DropboxAPI<AndroidAuthSession> mDBApi`很好，这表明库正在正确导入。

我已经在下面更改了它们，所以你们都必须相信我的话，但是密钥/秘密常量也是正确的，所以我怀疑就是这样。这是我的主要活动的片段：

```
package com.example.xxx.app;

import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.android.AndroidAuthSession;
import com.dropbox.client2.session.AppKeyPair;
import com.dropbox.client2.session.Session.AccessType;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {

final static private String APP_KEY = "1234key";
final static private String APP_SECRET = "1234secret";

DropboxAPI<AndroidAuthSession> mDBApi;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    AccessType ACCESS_TYPE = AccessType.APP_FOLDER;
    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);
    mDBApi = new DropboxAPI<AndroidAuthSession>(session);
    setContentView(R.layout.activity_main);

} 
```

还有我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.xxx.app"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"></uses-permission>

<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

      <!-- Dropbox Manifest -->
      <activity
      android:name="com.dropbox.client2.android.AuthActivity"
      android:launchMode="singleTask"
      android:configChanges="orientation|keyboard">
      <intent-filter>
        <data android:scheme="db-012345mykey" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.BROWSABLE"/>
        <category android:name="android.intent.category.DEFAULT" />
      </intent-filter>
    </activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:34:08.510

转到[此](https://www.dropbox.com/developers/apps)站点并首先在应用程序上创建。Dropbox 将为您提供两个密钥：APP_KEY 和 APP_SECRET。这些键的结果值放入您的应用程序中。如果您发现任何问题，请告诉我。

详情请访问[这里](https://www.dropbox.com/developers/start/authentication#android)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:22:11.687

你的 onResume() 在哪里？

```
protected void onResume() {
    super.onResume();

    // ...

    if (mDBApi.getSession().authenticationSuccessful()) {
        try {
            // MANDATORY call to complete auth.
            // Sets the access token on the session
            mDBApi.getSession().finishAuthentication();

            AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair();

            // Provide your own storeKeys to persist the access token pair
            // A typical way to store tokens is using SharedPreferences
            storeKeys(tokens.key, tokens.secret);
        } catch (IllegalStateException e) {
            Log.i("DbAuthLog", "Error authenticating", e);
        }
    }

    // ...
} 
```

[https://www.dropbox.com/developers/start/authentication#android](https://www.dropbox.com/developers/start/authentication#android)

# java - 触摸按钮时发出哔声

> ID：13336309
> 
> 赞同：1
> 
> 时间：2012-11-11T22:49:54.350
> 
> 标签：java, android, audio, playback, onclicklistener

我是 android 编程新手，我想在单击按钮时播放哔声。

我的应用程序中有 onClickListener 可以执行某些操作，我想在单击按钮时发出哔声！

触摸按钮时如何播放哔声？

```
 layout.setOnClickListener(new OnClickListener() {

                    public void onClick(View arg0) {
                        if(C=="1") { C="2"; s2=s2+ex;}
                        else { C="1"; s1=s1+ex;}

                    }
                }); 
```

如何使用详细信息来做到这一点，例如在哪里复制我的 beep.mp3 或 beep.wav 声音和代码......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:18:50.227

一个很好的教程 [http://www.vogella.com/articles/AndroidMedia/article.html](http://www.vogella.com/articles/AndroidMedia/article.html)

另外，下次请考虑谷歌。 [https://www.google.com/search?q=play+sound+android](https://www.google.com/search?q=play+sound+android)

本教程是第二个结果。

另一个好：http: [//java.dzone.com/articles/playing-sounds-android](http://java.dzone.com/articles/playing-sounds-android)

# android - 触摸在 Drawable 的 getBounds() 内

> ID：13336310
> 
> 赞同：0
> 
> 时间：2012-11-11T22:50:34.613
> 
> 标签：android, drawable, surfaceview, touch-event, bounds

我有一堂课，我设置了这样的界限：

```
tattoo.setBounds(getWidth() / 2 - zoomController - x, getHeight() / 2 - zoomController - y, getWidth()/ 2 + zoomController - x, getHeight()/ 2 + zoomController - y);
tattoo.draw(c); 
```

当用户在这些范围内单击时，我希望能够执行操作。检查点击是否在范围内的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:37:18.117

使用`Rect`描述可绘制边界的 并调用其[`contains(int x, int y)`](http://developer.android.com/reference/android/graphics/Rect.html#contains%28int,%20int%29)上的方法，传入 x 和 y 触摸坐标。例如：

```
Rect bounds = tattoo.getBounds();
int x = ...
int y = ...
boolean withinBounds = bounds.contains(x, y); 
```

或者，您可以创建自己的（静态）辅助方法；数学真的很基础。:)

# android - 我必须创建自己的服务器端才能使用谷歌云消息吗？

> ID：13336316
> 
> 赞同：1
> 
> 时间：2012-11-11T22:51:21.163
> 
> 标签：android, server-side, google-cloud-messaging

好吧，在你把我活活烧死之前……

我的意思是，是否有一个平台（例如用于管理数据库服务器端的 parse.com），

这使得没有服务器端先验知识的客户端开发人员（比如我），

轻松使用或构建 GCM（谷歌云消息传递）的服务器端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:58:59.250

1.  [Urban Airship](http://urbanairship.com)是一种非常流行的解决方案。
2.  [Core Push](http://www.corepush.com/)是另一个，但可能尚未向公众开放
3.  不能保证它，但至少对于较低的推送量，[解析看起来是免费的。](https://parse.com/plans)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:39:24.473

我工作的公司最近发布了一个用于 Android 的 GCM 推送通知服务来处理服务器端的复杂性。该服务称为 AirBop - www.airbop.com。它可以免费试用并用于少量设备。我只是想我会提到它作为另一个潜在的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T07:27:23.233

我最近发现[Onesignal.com](http://onesignal.com)它是免费的，而且效果很好。它还可以同时推送到多个平台，您可以轻松制作用户部分。

# scala - 我在哪里可以下载 SBT 0.13 快照包？

> ID：13336318
> 
> 赞同：1
> 
> 时间：2012-11-11T22:51:22.553
> 
> 标签：scala, sbt

被[scala 2.9 编译器错误困扰，](https://stackoverflow.com/questions/13328502/what-does-forward-reference-extends-over-definition-of-value-mean-in-scala)我决定尝试迁移到 Scala 2.10 RC。作为切换的一部分，我试图安装 SBT 0.13 快照。

[官方网页](http://www.scala-sbt.org/0.13.0-SNAPSHOT/docs/Getting-Started/Setup)列出了一个断开的链接：

```
http://scalasbt.artifactoryonline.com/scalasbt/sbt-native-packages/org/scala-sbt/sbt//0.13.0-SNAPSHOT/sbt.tgz 
```

目录中没有关于 0.13 的内容，链接给出错误 404。

关于在哪里获取文件的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:58:35.600

如果你不想自己编译它们，试试这些： [http ://repo.typesafe.com/typesafe/simple/ivy-releases/org.scala-sbt/sbt/](http://repo.typesafe.com/typesafe/simple/ivy-releases/org.scala-sbt/sbt/)

# javascript - Greasemonkey 可以从 URL 的分页序列中获取值吗？

> ID：13336319
> 
> 赞同：5
> 
> 时间：2012-11-11T22:51:25.360
> 
> 标签：javascript, jquery, greasemonkey, mashup

我想从中获取一个值`https://play.google.com/store/account*`，这使得用户页面通过其输出。例如：
`/store/account?start=0&num=40`、则`/store/account?start=40&num=40`等。

现在，当我访问 时`https://play.google.com/apps`，我希望 Greasemonkey 将`/store/account`页面中的值加起来，然后在该页面上显示最终值。

下面列出的代码可以汇总`/store/account`页面中我想要的值。但是，我想将代码插入到用于第二个 URL 的脚本中，这样我就可以在同一页面上添加它。

```
// ==UserScript==
// @name        Google Play 
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_setValue   
// @grant       GM_getValue  
// ==/UserScript==

var startParam      = location.search.match (/\bstart=(\d+)/i);
    if (startParam) {
        var totalPrice  = 0;
        var startNum    = parseInt (startParam[1], 10);
        if (startNum    === 0) {
            GM_setValue ("TotalPrice", "0");
        }
        else {
            totalPrice  = parseFloat (GM_getValue ("TotalPrice", 0) );
        }

        $("#tab-body-account .rap-link").each( function () {
            var price   = $(this).attr ("data-docprice").replace (/[^\d\.]/g, "");
            if (price) {
                price   = parseFloat (price);
                if (typeof price === "number") {
                    totalPrice += price;
                }
            }
        } );
        //console.log ("totalPrice: ", totalPrice.toFixed(2) );

        $('.tabbed-panel-tab').before (
            '<div id="SumTotal">*Combined Value: $'+ totalPrice.toFixed(2) +'</div>'
        );

        GM_setValue ("TotalPrice", "" + totalPrice);

        if ( $(".snippet.snippet-tiny").length ) {
            startNum       += 40;
            var nextPage    = location.href.replace (
                /\bstart=\d+/i, "start=" + startNum
            );
            location.assign (nextPage);
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T05:26:39.977

从页面/站点获取数据以进行混搭的基本方法是：

1.  **通过 AJAX 抓取：**
    这适用于几乎所有页面，但不适用于通过 AJAX 加载所需内容的页面。有时，对于需要身份验证或限制推荐人的网站，它也会变得棘手。
    在大多数情况下使用[`GM_xmlhttpRequest()`](http://wiki.greasespot.net/GM_xmlhttpRequest)，以允许跨域脚本。下面将详细介绍这种方法。

2.  **在 中加载资源页面`<iframe>`：**
    这种方法适用于 AJAX 化的页面，并且可以通过编码让用户手动处理登录问题。但是，这是：速度更慢、资源更密集、代码更复杂。

    由于此问题的详细信息似乎不需要它，请参阅[“如何获取 AJAX 获取请求以等待页面在返回响应之前呈现？”](https://stackoverflow.com/a/11489451/331508) 有关此技术的更多信息。

3.  **使用站点的 API（如果有的话）：**
    唉，大多数站点都没有 API，所以这可能不适合您，但值得确保不提供 API。如果可用，API 通常是最好的方法。做一个新的搜索/问题以获取有关此方法的更多详细信息。

4.  **模仿站点的 AJAX 调用，如果它对您想要的信息进行此类调用：**
    此选项也不适用于大多数站点，但它可以是一种干净、有效的技术。做一个新的搜索/问题以获取有关此方法的更多详细信息。

* * *

# 通过支持跨域的 AJAX 从一系列网页中获取值：

用于`GM_xmlhttpRequest()`加载页面，使用 jQuery 处理它们的 HTML。
使用`GM_xmlhttpRequest()`'s`onload`函数调用下一页，如有必要，不要尝试使用同步 AJAX 调用。

原始脚本中的核心逻辑移至`onload`函数内部——除了不再需要记住 Greasemonkey 运行之间的值。

这是**一个完整的 Greasemonkey 脚本**，其中包含一些状态和错误报告：

```
// ==UserScript==
// @name        _Total-value mashup
// @include     https://play.google.com/apps*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// @grant       GM_xmlhttpRequest
// ==/UserScript==

var startNum        = 0;
var totalValue      = 0;

//--- Scrape the first account-page for item values:
$("body").prepend (
    '<div id="gm_statusBar">Fetching total value, please wait...</div>'
);
scrapeAccountPage ();

function scrapeAccountPage () {
    var accntPage   = 'https://play.google.com/store/account?start=0&num=40';
    accntPage       = accntPage.replace (/start=\d+/i, "start=" + startNum);

    $("#gm_statusBar").append (
        '<span class="gmStatStart">Fetching page ' + accntPage + '...</span>'
    );

    GM_xmlhttpRequest ( {
        method:     'GET',
        url:        accntPage,
        //--- getTotalValuesFromPage() also gets the next page, as appropriate.
        onload:     getTotalValuesFromPage,
        onabort:    reportAJAX_Error,
        onerror:    reportAJAX_Error,
        ontimeout:  reportAJAX_Error
    } );
}

function getTotalValuesFromPage (respObject) {
    if (respObject.status != 200  &&  respObject.status != 304) {
        reportAJAX_Error (respObject);
        return;
    }

    $("#gm_statusBar").append ('<span class="gmStatFinish">done.</span>');

    var respDoc     = $(respObject.responseText);
    var targetElems = respDoc.find ("#tab-body-account .rap-link");

    targetElems.each ( function () {
        var itmVal  = $(this).attr ("data-docprice").replace (/[^\d\.]/g, "");
        if (itmVal) {
            itmVal   = parseFloat (itmVal);
            if (typeof itmVal === "number") {
                totalValue += itmVal;
            }
        }
    } );
    console.log ("totalValue: ", totalValue.toFixed(2) );

    if ( respDoc.find (".snippet.snippet-tiny").length ) {
        startNum       += 40;
        //--- Scrape the next page.
        scrapeAccountPage ();
    }
    else {
        //--- All done!  report the total.
        $("#gm_statusBar").empty ().append (
            'Combined Value: $' + totalValue.toFixed(2)
        );
    }
}

function reportAJAX_Error (respObject) {
    $("#gm_statusBar").append (
        '<span class="gmStatError">Error ' + respObject.status + '! &nbsp; '
        + '"' + respObject.statusText + '" &nbsp; &nbsp;'
        + 'Total value, so far, was: ' + totalValue
        + '</span>'
    );
}

//--- Make it look "purty".
GM_addStyle ( multilineStr ( function () {/*!
    #gm_statusBar {
        margin:         0;
        padding:        1.2ex;
        font-family:    trebuchet ms,arial,sans-serif;
        font-size:      18px;
        border:         3px double gray;
        border-radius:  1ex;
        box-shadow:     1ex 1ex 1ex gray;
        color:          black;
        background:     lightgoldenrodyellow;
    }
    #gm_statusBar .gmStatStart {
        font-size:      0.5em;
        margin-left:    3em;
    }
    #gm_statusBar .gmStatFinish {
        font-size:      0.5em;
        background:     lime;
    }
    #gm_statusBar .gmStatError {
        background:     red;
        white-space:    nowrap;
    }
*/} ) );

function multilineStr (dummyFunc) {
    var str = dummyFunc.toString ();
    str     = str.replace (/^[^\/]+\/\*!?/, '') // Strip function() { /*!
            .replace (/\s*\*\/\s*\}\s*$/, '')   // Strip */ }
            .replace (/\/\/.+$/gm, '') // Double-slash comments wreck CSS. Strip them.
            ;
    return str;
} 
```

* * *

**重要提示：** 不要忘记`@include`、`@exclude`和/或`@match`指令，因此您的脚本不会在每个页面和 iframe 上运行！

# ios - iPhone像素坐标问题

> ID：13336320
> 
> 赞同：0
> 
> 时间：2012-11-11T22:51:26.233
> 
> 标签：ios, screen, coordinates, linegraph

我正在尝试使用 drawRect 方法制作折线图，但遇到了一个主要问题。iPhone 屏幕上的 0 点位于左上角。如果 0,0 点位于左下角，是否有任何方法可以重新定位 0,0 点或将坐标输入更改为它们的位置？

这是我的drawRect方法

```
 - (void)drawRect:(CGRect)rect
{
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetLineWidth(context, 1.0);

CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();

CGFloat components[] = {0.0, 0.0, 1.0, 1.0};

CGColorRef color = CGColorCreate(colorspace, components);

CGContextSetStrokeColorWithColor(context,  [UIColor blackColor].CGColor);
//Coordinates of bottom left corner (480 went off screen)
CGContextMoveToPoint(context, 0, 460);
CGContextAddLineToPoint(context, 320, 0);

CGContextStrokePath(context);
CGColorSpaceRelease(colorspace);
CGColorRelease(color);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:08:19.350

[This page](http://blog.ddg.com/?p=10)描述了如何将其视为右手坐标系而不是左手坐标系，这听起来像你想要的

# android - 使用android opencv打印出矩阵

> ID：13336322
> 
> 赞同：1
> 
> 时间：2012-11-11T22:51:33.223
> 
> 标签：android, opencv

我正在android中学习opencv，我想通过随机设置一个矩阵并打印出它的条目来尝试Mat类。但是我不知道该怎么做，我失败了很多次......我正在使用android pad和AIDE来做程序。

你能帮我举个例子吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T21:30:58.600

```
Mat myMat;
//do u work on myMat

myMat.dump();//when you want to display the matrix 
```

# node.js - 在 Node.js 中将二进制字符串转换为缓冲区

> ID：13336324
> 
> 赞同：2
> 
> 时间：2012-11-11T22:52:16.097
> 
> 标签：node.js, mongodb, binary, mongoose

我有一个 Web 服务，它接受一个表示图像的 base 64 编码字符串，使用 imagemagick 库创建该图像的缩略图，然后将它们都存储在 mongodb 中。我正在使用以下代码（大约）执行此操作：

```
var buf = new Buffer(req.body.data, "base64"); //original image

im.resize({ srcData: buf, width: 256 }, function(err, stdout, stderr) {
    this.thumbnail = new Buffer(stdout, "binary");
    //store buf and stdout in mongo
}); 
```

您会注意到我正在使用“二进制”编码创建一个 Buffer 对象，[文档](http://nodejs.org/api/buffer.html#buffer_buffer)说不要这样做：

> 'binary' - 一种仅使用每个字符的前 8 位将原始二进制数据编码为字符串的方法。这种编码方法已被弃用，应尽可能避免使用 Buffer 对象。此编码将在 Node.js 的未来版本中删除。

首先，我不确定他们在说什么。我正在尝试创建一个 Buffer 对象，他们似乎暗示我应该已经有了一个。

其次，问题的根源似乎是 imagemagick resize 方法返回了一个包含二进制数据的字符串。执行 typedef(stdout) return "string" 并将其打印到屏幕上肯定会显示一堆非字符数据。

那么我在这里做什么呢？我无法改变 imagemagick 的工作方式。还有另一种方法可以做我想做的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:44:58.533

这就是我如何成功地做同样的事情，将图像存储在 mongodb 中。

```
//original ---> base64
var thumbnail = new Buffer(req.body.data).toString('base64');
//you can store this string value in a mongoose model property, and save to mongodb

//base64 ---> image
var buffer = new Buffer(thumbnail, "base64"); 
```

我不确定将图像存储为 base64 是否是最好的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T00:20:29.320

请尝试此操作，因为您的 base64 可能未预先处理：

```
var imgRawData =
    req.body.images[0].replace(/^data:image\/png;base64,|^data:image\/jpeg;base64,|^data:image\/jpg;base64,|^data:image\/bmp;base64,/, "");

var yourBuffer = new Buffer(imgRawData, "base64"); 
```

然后，将 yourBuffer 保存到 MongoDB 缓冲区中。

# php - json内容中的json内容

> ID：13336326
> 
> 赞同：0
> 
> 时间：2012-11-11T22:52:18.767
> 
> 标签：php, javascript, json

我目前正在开发一个 php/html/javascript 项目，并且正在将 ajax 发布到一个返回 json 编码数据的 php 脚本中。在这个 json 编码中，还有一些更多的 json 编码数据。

下面是我如何对数据进行 json 编码

```
$category[0]['Category'] = "Category 1";
    $category[1]['Category'] = "Category 2";

    $article['Date'] = "11/11/2012 22:42:00";
    $article['Title'] = "This is the title";
    $article['Subtitle'] = "This is the subtitle";
    $article['Content'] = "This is the content1";
    $article['ViaName'] = "SomeSite";
    $article['ViaAddress'] = "http://localhost";
    $article['SourceName'] = "N/A";
    $article['SourceAddress'] = "N/A";
    $article['categories'] = json_encode($category);

    echo json_encode($article); 
```

当使用 json.Title、json.Subtitle 等返回到 javascript 时，我可以很好地访问得到 json 编码的 $article。

但是，当我尝试获取类别时，它不起作用。

我尝试使用 json.categories 并打印出以下内容：

```
[{"Category":"Category 1"},{"Category":"Category 2"}] 
```

这看起来像是在工作，所以当我尝试访问每个单独的部分时，它就不起作用了。我已经尝试过`json.categories[0].Category`，`json.categories.Category[0]`但它不断出现未定义。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T22:55:04.763

如果你用你编码一个数组，`json_encode`你得到一个`string`. 所以，在你的情况下，`json.categories`是一个字符串而不是一个数组。

但是，`json_encode`（和解码）是递归的。

所以你应该简单地使用

```
$article['categories'] = $category; 
```

无需再次编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:55:10.870

不用等。您正在将一个数组 json 编码为另一个数组的值，该数组也将被编码。你应该这样做：

```
$article['categories'] = $category; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:24:07.173

将您的类别 json 数组添加到文章数组以使用文章变量访问

```
$article['categories'] = $category; 
```

# java - Java中这两个字符串有什么区别

> ID：13336328
> 
> 赞同：0
> 
> 时间：2012-11-11T22:52:34.673
> 
> 标签：java, string

> **可能重复：**
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

为什么当我们在Java中声明字符串时，我们不能使用==来比较这个字符串，它总是会变成假，但是如果我们从头开始初始化字符串，它会是真的？

例如 ：

```
import java.util.Scanner;

public class MyString {

public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    String s = input.nextLine();
    if(s=="Hello")
        System.out.println("Hello");

    String d = "Hello";
    if(d=="Hello")
        System.out.println("Hello");
} 
```

}

这种行为的解释是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:19:09.323

这是字符串文字自动发生的[String.intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)示例，但不是一般情况。

如果您将代码更改为

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Scanner input = new Scanner(System.in);
    String s = input.nextLine();
    s = s.intern();
    if(s=="Hello")
        System.out.println("Hello");

    String d = "Hello";
    if(d=="Hello")
        System.out.println("Hello");
} 
```

在控制台输入“Hello”时，您将看到“Hello”打印了两次，因为“Hello”的所有副本都将被保存到同一个副本。

您当然不应该通常使用`==`来比较字符串，而是使用

```
if (s.equals("Hello") 
```

这种“实习生”进程是一种减少包括 Java 在内的许多语言支持的内存使用量的方法。当您调用`s.intern()`运行时在一个内部字符串池中查找该字符串的副本时，如果找到则使用一个，否则创建一个，以便该字符串只有一个副本。有关一般概念的更多信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/String_interning)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T22:58:19.317

使用`str.equals(str2)`. 否则，您正在比较对象是否具有相同的地址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T23:15:59.327

原因是返回的字符串对象`input.nextLine()`没有被interned。因此，它与字符串字面量所表示的对象不是同一个字符串对象`"Hello"`。

使用以下内容，如果您输入“Hello”，您应该会看到不同之处：

```
Scanner input = new Scanner(System.in);

String s = input.nextLine();
s = s.intern();

if (s == "Hello") {
    System.out.println("Hello 1");
}

String d = "Hello";

if (d == "Hello") {
    System.out.println("Hello 2");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T22:56:02.347

使用 .equals() 方法检查字符串是否相等。`==`检查两个引用变量是否指向同一个字符串对象。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-11T22:56:19.680

`nextLine()`在输入字符串的末尾添加 a `"\n"`，使其不等于“Hello”。

# java - 从 ArrayList 的下一行查找字符串

> ID：13336330
> 
> 赞同：-1
> 
> 时间：2012-11-11T22:52:43.393
> 
> 标签：java, search, arraylist

我有这段代码，它应该在所选文件中找到一个已知方法的名称：

```
String[] sorok = new String[listaZ.size()];
String[] sorokPlusz1 = new String[listaIdeig.size()];
boolean keresesiFeltetel1;
boolean keresesiFeltetel3;  
boolean keresesiFeltetel4;
int ind=0;

for (int i = 0; i < listaZ.size(); i++) {
    for (int id = 0; id < listaIdeig.size(); id++) {
        sorok = listaZ.get(i);
        sorokPlusz1 = listaIdeig.get(id);

        for (int j = 0; j < sorok.length; j++) {
            for (int jj = 1; jj < sorok.length; jj++) {

                keresesiFeltetel3 = (sorok[j].equals(oldName)) && (sorokPlusz1[id].startsWith("("));

                keresesiFeltetel4 = sorok[j].startsWith(oldNameV3);
                keresesiFeltetel1 = sorok[j].equals(oldName) && sorok[jj].startsWith("(");

                if (keresesiFeltetel1 || keresesiFeltetel3 || keresesiFeltetel4) {
                    Array.set(sorok, j, newName);
                    listaZarojeles.set(i, sorok);
                }
            }
         System.out.println(ind +". index, element: " +sorok[j]);
        }
        ind++;
    }
} 
```

listaZ 是一个 ArrayList，元素由 '(' 和 ' ' 分隔，listaIdeig 是这个列表，没有第一行（因为 keresesifeltetel3） oldNameV3 是：oldName+ () 我想找到一个方法的名称，如果这看起来像这：方法名（）{...

为此，我需要 keresesifeltetel 3 中的下一行，但我无法让它正常工作。它没有发现任何东西或丢弃错误。现在它写出输入文件的元素大约 15 次，然后它应该；并在 keresesifeltetel3 上显示错误，并且：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:44:53.577

我认为你的问题在这里：`sorokPlusz1[id]`。`id`似乎没有跨越`sorokPlusz1`的范围。我怀疑你想使用`jj`并且`jj`应该跨越`sorokPlusz1`'s 范围而不是`sorok`'s 并且`sorok[jj].startsWith("(")`应该是`sorokPlusz1[jj].startsWith("(")`。

但请注意，我主要是在推测，因为我不是 100% 确定您要做什么或 listaZ 和 listaIdeig 是什么样子。

您正在`sorok`使用 size =`listaZ`的大小进行创建，然后执行以下操作：`sorok = listaZ.get(i);`. 这显然是不对的。不知道 listaZ 的确切类型很难告诉您它有什么问题。如果是`ArrayList<String[]>`，则更 `String[] sorok = new String[listaZ.size()];`改为`String[] sorok = null;`或`String[] sorok;`。如果是这样，`ArrayList<String>`那么您可能想做更多类似的事情`sorok[i] = listaZ.get(i);`

**现在这里有一些关于提问的一般说明：（**重复评论中所说的内容）（本着帮助您成功获得本网站问题答案的精神）。

您的问题通常不清楚。在阅读了您的问题和代码后，我仍然不知道您要做什么以及输入变量（listaZ 和 listaIdeig）的样子。

使用非英语变量名会使任何说英语的人更难提供帮助。即使更改`sorok`为`array`和`keresesiFeltetelX`更改`bX`会更好（尽管仍然不是很好）。具有难以理解的长变量名称使其更难以阅读。

评论你的代码。足够多的注释（几乎在每一行）使您更容易理解您的代码。

例子。如果你很难正确解释你想做的事情（用英语），你总是可以提供一些例子来帮助你解释（总的来说，这样做是个好主意）。请注意，一个很好的示例是同时提供输入和所需的输出（以及实际输出，如果适用）。

# rest - Neo4j 不能接受大的 http 休息请求

> ID：13336332
> 
> 赞同：2
> 
> 时间：2012-11-11T22:52:58.210
> 
> 标签：rest, http-post, neo4j

我正在尝试向独立的 Neo4j 服务器（neo4j-community-1.9.M01）发送一个非常大的 http 发布请求。

Bellow 是我正在使用的示例代码。输入文件：ideas/src/test/test-rest.txt 包含一个非常大的 json 字符串（超过（250k）。

问题是我无法控制neo4j独立版本启动的Web服务器的很多设置。网络服务器上可能存在一些限制，阻止我发送大的帖子请求。有人可以帮我找出这个设置。替代方案：有人可以告诉我如何用 tomcat 替换 neo4j 使用的默认网络服务器。我在客户端收到的错误是：

```
Caused by: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at java.io.BufferedOutputStream.write(BufferedOutputStream.java:105)
    at java.io.FilterOutputStream.write(FilterOutputStream.java:80)
    at org.apache.commons.httpclient.WireLogOutputStream.write(WireLogOutputStream.java:86)
    at com.sun.jersey.client.apache.DefaultApacheHttpMethodExecutor$3.writeRequest(DefaultApacheHttpMethodExecutor.java:186)
    at org.apache.commons.httpclient.methods.EntityEnclosingMethod.writeRequestBody(EntityEnclosingMethod.java:499)
    at org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2114)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at com.sun.jersey.client.apache.DefaultApacheHttpMethodExecutor.executeMethod(DefaultApacheHttpMethodExecutor.java:210) 
```

以下是来自 Web 客户端的一些日志：

```
11-11@08:28:01 INFO  (HttpMethodDirector.java:445)     - Retrying request
11-11@08:28:01 DEBUG (HttpConnection.java:692)     - Open connection to localhost:7474
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "POST /db/data/batch HTTP/1.1[\r][\n]"
11-11@08:28:01 DEBUG (HttpMethodBase.java:1352)     - Adding Host request header
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "Accept: application/json; stream=true[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "X-Stream: true[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "Content-Type: application/json[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "User-Agent: Jakarta Commons-HttpClient/3.1[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "Content-Length: 246292[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "Host: localhost:7474[\r][\n]"
11-11@08:28:01 DEBUG (    Wire.java:70)     - >> "[\r][\n]"
11-11@08:31:22 DEBUG (HttpMethodDirector.java:404)     - Closing the connection.
11-11@08:31:22 DEBUG (HttpMethodDirector.java:434)     - Method retry handler returned false. Automatic recovery will not be attempted
11-11@08:31:22 DEBUG (HttpConnection.java:1178)     - Releasing connection back to connection manager. 
```

这是客户端代码：

```
import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;
import com.sun.jersey.client.apache.ApacheHttpClient;
import org.apache.commons.io.FileUtils;
import org.neo4j.rest.graphdb.RequestResult;
import org.neo4j.rest.graphdb.UserAgent;

import javax.ws.rs.core.MediaType;
import java.io.*;
import java.net.URI;
import java.net.URISyntaxException;
import java.util.HashMap;
import java.util.Map;

import static javax.ws.rs.core.MediaType.APPLICATION_JSON_TYPE;

public class Main {
    private static final UserAgent userAgent = new UserAgent();
    public static final MediaType STREAMING_JSON_TYPE = new MediaType(APPLICATION_JSON_TYPE.getType(),APPLICATION_JSON_TYPE.getSubtype(), stringMap("stream","true"));

    public static void main(String[] args) throws URISyntaxException, IOException {
        String data = FileUtils.readFileToString(new File("ideas/src/test/test-rest.txt"));
        Client client = createClient();
        WebResource resource = client.resource(new URI("http://localhost:7474/db/data/batch"));
        WebResource.Builder builder = resource.accept(STREAMING_JSON_TYPE).header("X-Stream", "true");
        builder.entity( toInputStream(data), APPLICATION_JSON_TYPE );
        System.out.println(RequestResult.extractFrom(builder.post(ClientResponse.class)));
    }

    private static InputStream toInputStream(String data) throws IOException {
        ByteArrayOutputStream outputStream = new ByteArrayOutputStream(4024 * 1024);
        outputStream.write(data.getBytes());
        byte[] buf = outputStream.toByteArray();
        ByteArrayInputStream inputStream = new ByteArrayInputStream(buf);
        return inputStream;
    }

    protected static Client createClient1() {
        Client client = Client.create();
        client.setConnectTimeout(800);
        client.setReadTimeout(800);
        client.setChunkedEncodingSize(80 * 1024);
        userAgent.install(client);
        return client;
    }

    protected static Client createClient() {
        Client client = ApacheHttpClient.create();
        return client;
    }

    private static Map<String, String> stringMap(String stream, String aTrue) {
        HashMap<String, String> result = new HashMap<String, String>();
        result.put(stream, aTrue);
        return result;
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:44:12.093

我找到了问题的原因。我在带有 Windows XP 客户机和 Windows 7 主机的 Virtual BOX 4.2.0 下运行。将服务器放在另一台机器上后，问题就消失了。我用wireshark进行了调查，在失败之前我看到很多tcp包没有被确认并因此重新传输。

我的问题仍然悬而未决：如何用 tomcat 替换 neo4j 使用的默认网络服务器？

# ruby-on-rails - 方法说没有定义

> ID：13336336
> 
> 赞同：1
> 
> 时间：2012-11-11T22:53:27.553
> 
> 标签：ruby-on-rails

我不断收到此错误，但它清楚地表明该方法已定义。

```
undefined method `customer_ID' for Order(id: string, order_date: string, customer_ID:      string):Class
Extracted source (around line #23):

20:     @orderlines= Orderline.find(:all)
21:    
22:         # copy each field into a variable for display
23:          @id= Order.customer_ID
24:     # @date= Order.order_date
25:     %>
26:     <h1>Showing all orders</h1>
RAILS_ROOT: /mounts/u-zon-d2/ugrad/jdpa227/rails1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:49:48.793

似乎您的活动记录模型上有一个 customer_ID 属性，但是您缺少一个 getter 来从类外部访问实例变量。

```
class Order < ActiveRecord::Base
  attr_reader :customer_ID
end 
```

的

```
class Order < ActiveRecord::Base
  def customer_ID
    self[:customer_ID]
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:50:04.883

您是否有任何名为 的属性或方法`customer_ID`？

在 ruby​​ 中，字母大小写很重要，因此如果您有一个名为 的方法或属性`customer_id`，如果您查找`customer_ID`.

按照惯例，方法名和属性名都是小写的，用 . 分隔`_`。

所以试试`customer_id`。

# https - SignalR 和 HTTPS

> ID：13336338
> 
> 赞同：18
> 
> 时间：2012-11-11T22:53:45.090
> 
> 标签：https, signalr

SignalR 是否适用于 HTTPS？

我在 SSL 上有一个站点，我想使用 SignalR。是否可以？

如果是这样，我需要写一些不同的东西/添加配置吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-12T10:11:14.290

是的，它确实！如果您在谈论自托管： [https ://docs.microsoft.com/en-us/archive/blogs/jpsanders/how-to-walkthrough-using-httplistener-or-http-server-unmanaged-code-c -as-an-ssl-simple-server](https://docs.microsoft.com/en-us/archive/blogs/jpsanders/how-to-walkthrough-using-httplistener-or-http-server-unmanaged-code-c-as-an-ssl-simple-server)

如果您使用的是 IIS： [http ://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)

SSL 是一个主机问题，与 SignalR 没有真正的关系。

# c# - 在 c# 和 winrt 中将流保存到文件

> ID：13336341
> 
> 赞同：1
> 
> 时间：2012-11-11T22:54:04.040
> 
> 标签：c#, file, stream, save, windows-runtime

我在 c# 和 winrt 中有：

```
var stream = await speech.GetSpeakStreamAsync(SpeechText.Text, language); 
```

`stream`是一个 `Windows.Storage.Streams.IRandomAccessStream`

所以我对 c# 和 winrt 完全陌生。我如何将包含 wav 文件的流保存到文件中？提前致谢， 巴西利乌斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T23:23:52.690

IRandomAccessStream 有一个名为 GetInputStreamAt 的方法[http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.streams.irandomaccessstream](http://msdn.microsoft.com/en-US/library/windows/apps/windows.storage.streams.irandomaccessstream)

```
IInputStream inputStream = stream.GetInputStreamAt(0); 
```

这将为您提供一个 IInputStream。

IInputStream 接口只定义了一种方法，ReadAsync，它允许您将字节读入 IBuffer 对象。Windows.Storage.Stream 还包括一个基于 IInputStream 对象创建的 DataReader 类，然后从流中读取大量 .NET 对象以及字节数组。[http://www.charlespetzold.com/blog/2011/11/080203.html，http://msdn.microsoft.com/library/windows/apps/BR208119](http://www.charlespetzold.com/blog/2011/11/080203.html) _ [_](http://msdn.microsoft.com/library/windows/apps/BR208119)

```
using (var stream = new InMemoryRandomAccessStream())
{
    // for example, render pdf page
    var pdfPage = document.GetPage((uint)i);
    await pdfPage.RenderToStreamAsync(stream);

    // then, write page to file
    using (var reader = new DataReader(stream))
    {
        await reader.LoadAsync((uint)stream.Size);
        var buffer = new byte[(int)stream.Size];
        reader.ReadBytes(buffer);
        await Windows.Storage.FileIO.WriteBytesAsync(file, buffer);
    }
} 
```

现在你有一个包含所有读取字节的缓冲区。

您现在可以将此缓冲区保存到文件[http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html](http://blog.jerrynixon.com/2012/06/windows-8-how-to-read-files-in-winrt.html)

```
var file = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync("MyWav.wav", Windows.Storage.CreationCollisionOption.ReplaceExisting);
await Windows.Storage.FileIO.WriteBytesAsync(file, buffer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:23:03.710

我无法将代码添加到评论中，所以这里是 vb.net 中的代码： Dim gesprochenesWort As Windows.Storage.Streams.IRandomAccessStream gesprochenesWort = Await Sprich.GetSpeakStreamAsync("Das ist ein Beispieltext", "de")

```
 Dim Eingabestream As Windows.Storage.Streams.IInputStream = gesprochenesWort.GetInputStreamAt(0)

    Dim Datenleser As New Windows.Storage.Streams.DataReader(Eingabestream)
    Await Datenleser.LoadAsync(CUInt(gesprochenesWort.Size))

    'Dim Dateipuffer As Byte() = New Byte(CInt(gesprochenesWort.Size) - 1) {}
    Dim Dateipuffer(gesprochenesWort.Size - 1) As Byte

    Datenleser.ReadBytes(Dateipuffer)

    Dim Dateiname As String = "MybestWav.wav"

    Dim Datei = Await Windows.Storage.KnownFolders.MusicLibrary.CreateFileAsync(Dateiname, Windows.Storage.CreationCollisionOption.ReplaceExisting)

    Await Windows.Storage.FileIO.WriteBytesAsync(Datei, Dateipuffer) 
```

;非常感谢你。

最好的问候， 巴西利乌斯

# objective-c - 如何从包含任意对象的 NSSet 创建排序的 NSArray？

> ID：13336342
> 
> 赞同：2
> 
> 时间：2012-11-11T22:54:07.437
> 
> 标签：objective-c, sorting, nsarray, nsset

我有一个包含许多不同类型对象的 NSSet。通常它将包含 NSDictionaries、NSStrings、NSArrays 和 Classes 的某种组合，即objective-c“Class”类型。我需要一种方法来生成一个包含此 NSSet 中所有对象的 NSArray，但要对其进行排序，以便对于包含相同对象的任何集合，它总是以相同的顺序排列。具体来说，“同一对象”是指价值，而不是地址。排序方式无关紧要，只要一致即可。

到目前为止，我还没有找到一种方法来做到这一点。我找不到在两个任意对象之间进行有序比较的任何方法。有没有人对如何做到这一点有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:15:25.800

所有对象都派生自，因此您可以简单地按( [reference](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/description)`NSObject` )排序，这将是对象内容的摘要。`[NSObject description]`

编辑：正如@Paul.s 在评论中指出的那样；`hash`（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/hash)）是要走的路（比较起来会更快）。

# c# - 检查列表中的所有值是否相等

> ID：13336343
> 
> 赞同：8
> 
> 时间：2012-11-11T22:54:22.907
> 
> 标签：c#, linq, lambda

```
Class order {
Guid Id;
int qty;
} 
```

使用 LINQ 表达式，如何验证`qty`列表中的所有订单是否相同？

提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-11T22:57:28.617

您可以使用`GroupBy`：

```
bool allEqual = orders.GroupBy(o => o.qty).Count() == 1; 
```

或者，效率更高但可读性更低：

```
bool allEqual = !orders.GroupBy(o => o.qty).Skip(1).Any(); 
```

或者，绝对更有效地使用[`Enumerable.All`](http://msdn.microsoft.com/en-us/library/bb548541.aspx)：

```
int firstQty = orders.First().qty;  // fyi: throws an exception on an empty sequence
bool allEqual = orders.All(o => o.qty == firstQty); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-10T12:55:34.073

如果只是为了提高可读性，我会添加一个扩展方法。

```
public static bool AllEqual<T>(this IEnumerable<T> source, IEqualityComparer<T> comparer = null)
{
    if (source == null)
        throw new ArgumentNullException(nameof(source));

    comparer = comparer ?? EqualityComparer<T>.Default;

    using (var enumerator = source.GetEnumerator())
    {
        if (enumerator.MoveNext())
        {
            var value = enumerator.Current;

            while (enumerator.MoveNext())
            {
                if (!comparer.Equals(enumerator.Current, value))
                    return false;
            }
        }

        return true;
    }
} 
```

调用它：

```
var qtyEqual = orders.Select(order => order.qty).AllEqual(); 
```

# python - form.save 上的 Django“TypeError：需要一个整数”

> ID：13336344
> 
> 赞同：3
> 
> 时间：2012-11-11T22:54:36.863
> 
> 标签：python, django, model-view-controller, upload, imagefield

我有一个包含 11 个字段和一个图像上传字段的表单。填写并点击提交后，我收到一个 TypeError 说需要一个整数。如果我删除图像字段，则不会出现此错误。检查图像目录，在引发错误之前将文件保存到服务器。

表格.py：

```
class ListingForm(ModelForm):
    seller_email = forms.EmailField(max_length="", required=True, widget=forms.TextInput(attrs={'placeholder': "jsmith@stevens.edu"}))  
    title = forms.CharField(required=True, widget=forms.TextInput(attrs={'placeholder':"The Cat in the Hat"}))
    edition = forms.IntegerField(required=True, widget=forms.TextInput(attrs={'placeholder':"5"}))
    author = forms.CharField(required=True, widget=forms.TextInput(attrs={'placeholder':"Dr. Seuss"}))
    isbn = forms.CharField(label="ISBN", required=True, widget=forms.TextInput(attrs={'placeholder':"9780717260591"}))
    price = forms.FloatField(required=True, widget=forms.TextInput(attrs={'type':"number", 'placeholder':"50.00"}))
    classcode= forms.CharField(required=True, widget=forms.TextInput(attrs={'placeholder':"MA115"}))
    #description = forms.CharField(widget=forms.TextArea(attrs={'placeholder':"You should buy this because..."}))
    condition = forms.ChoiceField(required=True, widget=forms.Select(), choices=([(4,"New"), (3,"Good"), (2,"Fair"), (1,"Poor")]))
    seller_name = forms.CharField(required=True, widget=forms.TextInput(attrs={'placeholder':"John Doe"}))
    seller_phone = forms.CharField(widget=forms.TextInput(attrs={'placeholder':"(555) 555-1234"}))

    picture = forms.ImageField(widget=forms.FileInput('accept':"image/*"))
    #picture = forms.ImageField()
    uuid = forms.CharField(widget=forms.HiddenInput(), initial=uuid.uuid4())
    timeposted = forms.CharField(widget=forms.HiddenInput(), initial=datetime.now())
    sale_status = forms.BooleanField(widget=forms.HiddenInput(), initial=True)

    class Meta:
        model = Listing
        fields = ('seller_email', 'title', 'edition', 'author', 'isbn', 'price', 'classcode', 'description', 'condition', 'seller_name', 'seller_phone', 'picture', 'uuid', 'timeposted', 'sale_status')
        #exclude = ("uuid", "timeposted", "sale_status", "picture", "school") 
```

视图.py：

```
from django.shortcuts import render_to_response, get_object_or_404
from django.http import HttpResponseRedirect, HttpResponse
from django.core.urlresolvers import reverse
from django.template import Context, loader, RequestContext
from django.contrib.auth.models import User 
from cbt.accounts.models import School, UserProfile
from cbt.listings.models import Listing
from django.contrib import auth
from django.core.context_processors import csrf
from django.core.mail import send_mail
from django.core.files import File
from datetime import datetime
from cbt.settings import MEDIA_ROOT
from cbt.listings.forms import ListingForm

school_list = School.objects.all().order_by('name')

def add(request):

    form = ListingForm()
    if request.method == 'POST':
        form = ListingForm(request.POST, request.FILES)
        if form.is_valid() and form.is_multipart():
            form.save()
            return HttpResponseRedirect(reverse('cbt.views.home'))      

    return render_to_response('listings/add.html', {'school_list':school_list, 'form':form}, context_instance=RequestContext(request)) 
```

这是确切的错误代码：

```
Environment:

Request Method: POST
Request URL: http://alligator.collegebooktrade.info/listings/add/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'cbt.accounts',
 'cbt.listings')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/cbt/cbt/listings/views.py" in add
  25\.           form.save()
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in save
  364\.                              fail_message, commit, construct=False)
File "/usr/local/lib/python2.7/dist-packages/django/forms/models.py" in save_instance
  86\.         instance.save()
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in insert_query
  1576\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py" in execute_sql
  909\.         for sql, params in self.as_sql():
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py" in as_sql
  872\.                 for obj in self.query.objs
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/files.py" in pre_save
  249\.             file.save(file.name, file, save=False)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/files.py" in save
  86\.         self.name = self.storage.save(name, content)
File "/usr/local/lib/python2.7/dist-packages/django/core/files/storage.py" in save
  45\.         name = self._save(name, content)
File "/usr/local/lib/python2.7/dist-packages/django/core/files/storage.py" in _save
  212\.             os.chmod(full_path, settings.FILE_UPLOAD_PERMISSIONS)

Exception Type: TypeError at /listings/add/
Exception Value: an integer is required 
```

编辑：根据要求：

```
Model:
class Listing(models.Model):
title = models.CharField(max_length="100")
edition = models.CharField(max_length="5")
author = models.CharField(max_length="50")
isbn = models.CharField(max_length="13")
price = models.FloatField()
classcode = models.CharField(max_length="12")
description = models.CharField(max_length="400")
condition = models.CharField(max_length="10")
#school = models.OneToOneField(School)
school = models.CharField(max_length="36")

picture = models.ImageField(upload_to="listings")

#CONTACT INFO:
seller_name = models.CharField(max_length="30")
seller_phone = models.CharField(max_length="11")
seller_email = models.EmailField(max_length="75")

uuid = models.CharField(max_length="36")
timeposted = models.DateTimeField()
sale_status = models.BooleanField() #0 for sale, 1 for sold 
```

设置.py：

```
#just including pertinent settings...
FILE_UPLOAD_PERMISSIONS '0760'
FILE_UPLOAD_HANDLERS  ('django.core.files.uploadhandler.MemoryFileUploadHandler', 'django.core.files.uploadhandler.TemporaryFileUploadHandler')
MIDDLEWARE_CLASSES  ('django.middleware.common.CommonMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware')
FILE_UPLOAD_MAX_MEMORY_SIZE  '2621440' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T02:32:36.187

在您的 settings.py 脚本中，您有以下行：

```
FILE_UPLOAD_PERMISSIONS '0760' 
```

它不应该有引号。当它需要一个整数时，您试图用一个字符串作为第二个参数调用 os.chmod() 。具体来说，八进制权限值。在 python 中，带有前导 0 的数字被自动认为是八进制值并转换为整数。因此，只需使用此行：

```
FILE_UPLOAD_PERMISSIONS = 0760 
```

顺便说一句，你为什么不在 settings.py 中使用等号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T17:45:29.637

上述问题的更新解决方案只需在您的 settings.py 文件中添加此代码段。

```
FILE_UPLOAD_PERMISSIONS = 0o760 
```

请记住，您必须使用`o`.

# jquery - 标记为图像

> ID：13336346
> 
> 赞同：2
> 
> 时间：2012-11-11T22:54:49.667
> 
> 标签：jquery, jvectormap

我正在尝试使用 JVectorMap 创建世界地图，但我会将标记作为图像 (marker.png) 而不是圆圈作为默认值。我可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T09:40:46.383

有基于图像的标记的官方示例 - [http://jvectormap.com/examples/marker-icons/](http://jvectormap.com/examples/marker-icons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:12:50.020

如果您想要图像标记，请使用新图层（地图中 svg 图层上的 div），为每个标记放置一个新 div，然后设置位置。

获取地图参考

```
map = $("#world-map-gdp").vectorMap('get', 'mapObject'); 
```

并使用函数 map.latLngToPoint() 来定位新层中的点。

```
var newMarkerP = map.latLngToPoint(lat,lng);
$('#marker1').css('top',newMarkerP.x);
$('#marker1').css('left',newMarkerP.y); 
```

如果进行缩放或拖动，您可以重新定位标记，使用相同的功能并应用 css left 和 css top。

也许您可以使用新标记的顶部和左侧，但这是一个简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T10:42:55.173

还没有，此[功能](https://github.com/bjornd/jvectormap/issues/63)计划在下一个版本中使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-05T14:03:54.073

在您的标记样式设置中，您可以使用“图像”而不是“r”：

```
 var myMarkerStyle = {
          initial: {
            image: 'files/fkd/marker.png'
          }
        }; 
```

# c++ - openframeworks - 如何淡入和淡出视频

> ID：13336350
> 
> 赞同：1
> 
> 时间：2012-11-11T22:55:12.113
> 
> 标签：c++, video, openframeworks

嗨，我正在使用 Openframeworks ofVideoPlayer() 函数：

[http://www.openframeworks.cc/documentation/video/ofVideoPlayer.html](http://www.openframeworks.cc/documentation/video/ofVideoPlayer.html)

我创建了一个视频，但我想在完成后将其淡出。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:17:40.217

您可以使用 ofVideoPlayer 的[`getPosition()`](http://www.openframeworks.cc/documentation/video/ofVideoPlayer.html#getPosition)和[`getDuration()`](http://www.openframeworks.cc/documentation/video/ofVideoPlayer.html#getDuration)函数来确定您何时接近视频结尾。当您想开始淡出视频时，请开始将当前颜色设置为您想要淡出的任何颜色。您可能需要使用插值函数[`ofLerp()`](http://www.openframeworks.cc/documentation/math/ofMath.html#ofLerp)来创建平滑过渡。

如果您想使用 alpha 淡出，请确保您已启用 alpha blending with [`ofEnableAlphaBlending()`](http://www.openframeworks.cc/documentation/graphics/ofGraphics.html#ofEnableAlphaBlending).

# windows-phone-7 - 如何在 WP7 应用程序的应用程序清单文件中设置 WideBackgroundImage？

> ID：13336357
> 
> 赞同：0
> 
> 时间：2012-11-11T22:56:01.387
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我按照[此处](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574%28v=vs.105%29.aspx)的说明进行操作，并且能够使用反射从 WP7 应用程序设置新的 WP8 磁贴信息，这样如果用户使用 WP8，则会设置宽磁贴而不在 WP7 上设置，因为那里不支持。有没有办法在 WMAppManifest.xml 文件中设置 WideBackGroundImage 属性，而无需仅将项目升级到 WP8？这会很好，因为它将设置应用程序是否已启动。上面链接的方法需要先运行应用程序，然后用户才能展开磁贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:46:34.463

这可能是您正在寻找的内容：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574(v=vs.105).aspx)

# java - 我对 SwingWorker 有正确的想法吗

> ID：13336358
> 
> 赞同：1
> 
> 时间：2012-11-11T22:56:03.270
> 
> 标签：java, swing, model-view-controller, swingworker

我只是想仔细检查我的使用 SwingWorker 线程的实现是否以正确和干净的方式完成。此外，只需要验证我的模型-视图-控制器模式的实现是否正确且干净。一切似乎都在正常工作，对我来说这似乎是一个不错的简单实现。

模型类。

```
package Model;

public class Model
{
    private int counter;
    private boolean go = true;

    public Void go()
    {
        counter = 0;

        while(go)
        {
            counter++;
            System.out.println(counter);
        }
        return null;
    }

    public int getCounter()
    {
        return counter;
    }

    public String getCounterToString()
    {
        return Integer.toString(counter);
    }

    public void setGo(boolean value)
    {
        this.go = value;
    }
} 
```

视图类。

```
package View;

import java.awt.*;
import javax.swing.*;

public class View extends JFrame
{
    private JPanel                  topPanel, bottomPanel;
    private JTextArea               messageArea;
    private JButton                 startButton, cancelButton;
    private JLabel                  messageLabel;
    private JScrollPane             scrollPane;

    public View()
    {
        setSize(250, 220);
        setTitle("View");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        topPanel = new JPanel();
        bottomPanel = new JPanel();
        messageArea = new JTextArea(8, 20);
        messageArea.setEditable(true);
        scrollPane = new JScrollPane(messageArea);
        messageLabel = new JLabel("Message Area");
        topPanel.setLayout(new BorderLayout());
        topPanel.add(messageLabel, "North");
        topPanel.add(scrollPane, "South");
        startButton = new JButton("START");
        cancelButton = new JButton("CANCEL");
        bottomPanel.setLayout(new GridLayout(1, 2));
        bottomPanel.add(startButton);
        bottomPanel.add(cancelButton);
        Container cp = getContentPane();
        cp.add(topPanel, BorderLayout.NORTH);
        cp.add(bottomPanel, BorderLayout.SOUTH);
    }

    public JButton getStartButton()
    {
        return startButton;
    }

    public JButton getCancelButton()
    {
        return cancelButton;
    }

    public void setMessageArea(String message)
    {
        messageArea.append(message + "\n");
    }
} 
```

控制器类。

```
package Controller;

import java.awt.event.*;
import javax.swing.SwingWorker;
import Model.*;
import View.*;

public class Controller implements ActionListener
{
    private Model theModel;
    private View  theView;
    private SwingWorker<Void, Void> worker;

    public Controller(Model model, View view)
    {
        this.theModel = model;
        this.theView = view;
        view.getStartButton().addActionListener(this);
        view.getCancelButton().addActionListener(this);
    }

    public void actionPerformed(ActionEvent ae)
    {
        Object buttonClicked = ae.getSource();
        if(buttonClicked.equals(theView.getStartButton()))
        {
            theModel.setGo(true);
            worker = new SwingWorker<Void, Void>()
            {
                @Override
                protected Void doInBackground()
                {
                    //theView.setMessageArea(theModel.getCounterToString());
                    return theModel.go();
                }
                @Override
                protected void done()
                {
                    //theView.setMessageArea(theModel.getCounterToString());
                }
            };
            worker.execute();

        }
        else if(buttonClicked.equals(theView.getCancelButton()))
        {
            theModel.setGo(false);
        }
    }
} 
```

主班。

```
package swinginfiniteloop;

import Model.*;
import View.*;
import Controller.*;

public class Main
{
    public static void main(String[] args)
    {
        Model model = new Model();
        View view = new View();
        Controller controller = new Controller(model, view);
        view.setVisible(true);
    }
} 
```

# c# - 使用 SkyDrive API 下载多个文件

> ID：13336362
> 
> 赞同：0
> 
> 时间：2012-11-11T22:56:24.517
> 
> 标签：c#, windows-phone-7, onedrive

我有以下代码，我试图从用户 SkyDrive 帐户下载 3 个不同的文件。

我正在使用 SkyDrive API 进行 Windows Phone 开发。

```
client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(OnDownloadCompletedVI);
client.DownloadAsync(fileIdVehicleItems);

client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(OnDownloadCompletedHI);
client.DownloadAsync(fileIdHistoryItems);

client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(OnDownloadCompletedRI);
client.DownloadAsync(fileIdRepairItems); 
```

当我运行它时，唯一被调用的方法是 OnDownloadCompletedVI。正在下载的所有文件都通过此方法运行，这会导致错误。

我做错了什么？

**更新**

我有以下方法，但我有 2 个其他类似的方法可以做完全相同的事情，只是它加载不同的对象（基于下载的文件）。

我目前收到的错误：

> mscorlib.ni.dll 中出现“System.ArgumentException”类型的异常，但未在用户代码中处理

```
 void OnDownloadCompletedVI(object sender, LiveDownloadCompletedEventArgs e)
    {
        if (e.Result != null)
        {
            using (var stream_vi = e.Result)
            {
                StreamReader SRVI = new StreamReader(stream_vi);
                string contentVI = "";
                contentVI = SRVI.ReadToEnd();

                StringReader rdr_vi = new StringReader(contentVI);

                XmlSerializer serializer = new XmlSerializer(typeof(ObservableCollection<vehicle>));

                ObservableCollection<vehicle> importedVehicles = new ObservableCollection<vehicle>();
                importedVehicles = (ObservableCollection<vehicle>)serializer.Deserialize(rdr_vi);

                StorageHelper.Save<ObservableCollection<vehicle>>(App.vehicleData, importedVehicles);
            }
            //e.Result.Close();
        }
        else
        {
            infoTextBlock.Text = "Error downloading file: " + e.Error.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:31:05.250

实际上应该调用所有三个方法。当然，如果第一个方法被调用并抛出异常，其他两个不会触发。

你可以做的是为每个调用创建一个新的客户端，或者按顺序下载它们，所以当`OnDownloadCompletedVI`方法完成时，删除事件处理程序`OnDownloadCompletedVI`并添加一个`OnDownloadCompletedHI`，然后`client.DownloadAsync(fileIdHistoryItems);`在方法的末尾触发。

# javascript - jQuery图像交换如果其他

> ID：13336363
> 
> 赞同：2
> 
> 时间：2012-11-11T22:56:37.527
> 
> 标签：javascript, jquery, html

我正在尝试使用 javascript/jquery 编写基本的图像交换。

出于某种原因，我的 if/else 语句运行不正确。我用错了吗？

谢谢

Javascript：

```
 <script type="text/javascript">
        var images = new Array();
        var comic = document.getElementById("comicssubsite").src;
        var artwork = document.getElementById("artworksubsite").src;
        var about = document.getElementById("aboutsubsite").src;

        images[0] = "./images/SiteDesign/Comics_subsites_hover.png";
        images[1] = "./images/SiteDesign/Comics_subsites.png";

        images[2] = "./images/SiteDesign/Artwork_subsites_hover.png";
        images[3] = "./images/SiteDesign/Artwork_subsites.png";

        images[4] = "./images/SiteDesign/About_subsites_hover.png";
        images[5] = "./images/SiteDesign/About_subsites.png";

        function onHover() {
            if (comic) {
            $("#comicssubsite").attr('src', images[0]);
            }
            else if (artwork) {
            $("#artworksubsite").attr('src', images[2]);
            }
            else if (about) {
            $("#aboutsubsite").attr('src', images[4]);
            }
        }
        function offHover() {
            if (comic) {
            $("#comicssubsite").attr('src', images[1]);
            }
            else if (artwork) {
            $("#artworksubsite").attr('src', images[3]);
            }
            else if (about)
            $("#aboutsubsite").attr('src', images[5]);
            }
        }

    </script> 
```

HTML（片段）

```
 <div class="span2">
                <div id="pages">
                    <span class="pageitems" ><a href="./?action=homepage&page=1&site=comics"><img id="comicssubsite" src="./images/SiteDesign/Comics_subsites.png" alt="comics bg" onmouseover="onHover();" onmouseout="offHover();"/></a></span>
                </div>
            </div>
            <div class="span2">
                <div id="pages">
                    <span class="pageitems"><a href="./?action=homepage&page=1&site=artwork"><img id="artworksubsite" src="./images/SiteDesign/Artwork_subsites.png" alt="artwork bg" onmouseover="onHover();" onmouseout="offHover();"/></a></span>    
                </div>
            </div>
            <div class="span2">
                <div id="pages">
                    <span class="pageitems"><a href="./?action=homepage&page=1"><img id="aboutsubsite" src="./images/SiteDesign/About_subsites.png" alt="about bg" onmouseover="onHover();" onmouseout="offHover();"/></a></span>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T22:59:52.450

~~为什么不使用`css`（*哎呀，图片的背景图片*）？~~

```
#comicssubsite {
   background-image: ...
}

#comicssubsite:hover {
   background-image: ...
} 
```

请注意，您的标记无效，ID 必须是唯一的，您应该使用类而不是 ID，您还可以将 ID 更改为`Comics`, `Artwork`.. 并使用`hover`和`attr`方法。

```
$('.pages img').hover(function(){
    $(this).attr('src', function(i, src){
       return src.indexOf('hover')
       ? './images/SiteDesign/'+this.id+'_subsites.png'
       : './images/SiteDesign/'+this.id+'_subsites_hover.png'
    })
}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T23:13:25.213

您的 if 语句检查`src`相应元素的属性是否不为空。这并不是你真正想要的——它们总是会被执行。此外，如果您决定使用 jQuery，您应该在任何地方都使用它，尤其是在事件处理等 DOM 方面。

将数组用作数据结构是一个好的开始，但由于您仍然手动而不是以编程方式处理这些项目，因此毫无用处。使用对象 [literal] 作为键值映射来通过图像 id 获取 url：

```
jQuery(document).ready(function($) {
    var images = {
        "comicssubsite": [
            "./images/SiteDesign/Comics_subsites_hover.png",
            "./images/SiteDesign/Comics_subsites.png"
        ],
        "artworksubsite": [
            "./images/SiteDesign/Artwork_subsites_hover.png",
            "./images/SiteDesign/Artwork_subsites.png"
        ],
        "aboutsubsite": [
            "./images/SiteDesign/About_subsites_hover.png",
            "./images/SiteDesign/About_subsites.png"
        ]
    };
    function mouseover(e) {
        if (this.id in images) // check for key in map
            this.src = images[this.id][0];
    }
    function mouseout(e) {
        if (this.id in images)
            this.src = images[this.id][1];
    }
    $("#comicssubsite, #artworksubsite, #aboutsubsite").hover(mouseover, mouseout);
    // You might want to use a loop instead, then you don't need to write the ids twice:
    // for (var id in images)
    //     $('#'+id).hover(mouseover, mouseout);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T23:01:01.553

您的第一`if`条语句总是返回`true`，因为每个图像标签都有一个来源。

如果你有这个：

```
var comic = document.getElementById("comicssubsite").src; 
```

然后这个：

```
if (comic) {
//code
} 
```

if 语句所做的所有事情都是检查是否有漫画*存在*，它确实如此。

# android - ListView 被删除 onbackpress

> ID：13336364
> 
> 赞同：0
> 
> 时间：2012-11-11T22:56:43.137
> 
> 标签：android, android-listview, android-activity

我的 mainactivity 中有一个列表视图，它调用数据库来填充它。单击列表视图上的项目时，它会启动一个新活动，显示被单击项目的详细信息。当按下后退按钮时，列表视图不再显示。

可能是什么问题呢？这是我主要活动的全部内容：

```
public class MainActivity extends ListActivity {

    Button bAddMod;
    private ModuleDB db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        db = new ModuleDB(this);

        db.open();
        fillList();
        db.close();

        bAddMod = (Button) findViewById(R.id.btnAddMod);
        bAddMod.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(MainActivity.this, AddModule.class);
                startActivity(i);
            }
        });

    }

    private void fillList() {
        ListView lv = getListView();

        Cursor curs = db.getData();
        startManagingCursor(curs);

        MyCursorAdapter adapter = new MyCursorAdapter(getApplicationContext(), curs);
        lv.setAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view, int position, long id){
                Intent k = new Intent(MainActivity.this, ModuleDetails.class);
                k.putExtra("mod_id", id);
                startActivity(k);
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:01:58.073

在 onResume() 方法中调用 fillLists。我猜这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:29:32.277

我在下一个活动中覆盖了 onBackPressed 函数以重新创建第一个活动。问题解决了 ：）

# php - 从数组中选择多选表单

> ID：13336366
> 
> 赞同：0
> 
> 时间：2012-11-11T22:57:03.370
> 
> 标签：php, html, mysql, forms

这就是问题所在。我有一个名为 pymnt_meth_pref 的数据库列，其中包含从多选表单中选择的以逗号分隔的付款方式字符串。

```
<td>Payment Methods Used:<br /> 
              <input type="checkbox" name="pyment_meth_pref[]" value="Cash">I can pay with cash.<br />
              <input type="checkbox" name="pyment_meth_pref[]" value="Check">I can pay by check.<br />
              <input type="checkbox" name="pyment_meth_pref[]" value="Credit Card">I can pay by credit card.<br />
              <input type="checkbox" name="pyment_meth_pref[]" value="Paypal">I can pay with Paypal.<br />              </td> 
```

这个数组被发布到一个变量并变成一个逗号分隔的字符串

```
if (isset($_POST['pyment_meth_pref']))
    $pymntmethpref = implode(", ", $_POST['pyment_meth_pref']);

    if (isset($_POST['pyment_meth_acc']))
    $pymntmethacc = implode(", ", $_POST['pyment_meth_acc']); 
```

然后将其作为逗号分隔的字符串插入数据库。

我想做的是，当用户返回表单并“预选”复选框时，使用这个字符串并将值应用于原始表单，表明用户之前已经选择了这些值，并保留这些值如果他们选择编辑表单中的任何其他信息，数据库中的值。

我假设这需要用 javascript 来完成，但如果有办法用 PHP 来做，我宁愿那样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:05:17.590

试试explode()。如下

```
$valuesArr = explode(',', $dbresult); 
```

并在您的 HTML 代码中为每个复选框设置条件，如下所示：

```
 echo '<input type="checkbox" name="pyment_meth_pref[]" value="Cash"'.
       (in_array('Cash', $valueArr) ? 'checked="checked"' : '').' />
       '<input type="checkbox" name="pyment_meth_pref[]" value="Check"'.
       (in_array('Check', $valueArr) ? 'checked="checked"' : '').' />'; 
```

等等。

我希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:03:04.557

```
<?php

# Assumed that $pymntmethpref and $pymntmethacc are the DB comma-delimited values

$pm_pref = explode( ', ' , $pymntmethpref );
$pm_acc = explode( ', ' , $pymntmethacc );
$html_sel = 'checked="checked" ';

?>
<td>Payment Methods Used:<br /> 
  <input type="checkbox" name="pyment_meth_pref[]" <?php echo ( in_array( 'Cash' , $pm_pref ) ? $html_sel: '' ); ?>value="Cash">I can pay with cash.<br />
  <input type="checkbox" name="pyment_meth_pref[]" <?php echo ( in_array( 'Check' , $pm_pref ) ? $html_sel: '' ); ?>value="Check">I can pay by check.<br />
  <input type="checkbox" name="pyment_meth_pref[]" <?php echo ( in_array( 'Credit Card' , $pm_pref ) ? $html_sel: '' ); ?>value="Credit Card">I can pay by credit card.<br />
  <input type="checkbox" name="pyment_meth_pref[]" <?php echo ( in_array( 'Paypal' , $pm_pref ) ? $html_sel: '' ); ?>value="Paypal">I can pay with Paypal.<br />
</td> 
```

# mapreduce - 为什么在使用外部 jar 时“找不到类错误”（但我也导出了外部 jar！）

> ID：13336368
> 
> 赞同：0
> 
> 时间：2012-11-11T22:57:22.393
> 
> 标签：mapreduce, apache-pig

在 pig 中，我使用的是使用外部 jar 文件例程的 udf，而在 eclipse 中，我也导出了该 jar 文件。但是在运行 pig -x local script1.pig 时，它给了我外部 jar 文件例程的错误。

请帮忙！

谢谢。

编辑1：

正如我的代码评论中所问的那样：

```
script1.pig:

    REGISTER ./csv2arff.jar;

    csvraw = LOAD 'sample' USING PigStorage('\n') as (c);

    arffraws = FOREACH csvraw GENERATE pighw2java.CSV2ARFF(c); 
```

pighw2java.CSV2ARFF：

```
public String exec(Tuple input) throws IOException {
    if (input == null || input.size() == 0)
        return null;
    try{
            System.out.println(">>> " + input.get(0).toString());
            // 1.1) csv to instances
            ByteArrayInputStream inputStream = new ByteArrayInputStream(input.get(0).toString().getBytes("UTF-8"));
            CSVLoader loader = new CSVLoader();    **HERE IS ERROR**

                 .....

        }
} 
```

我得到的错误：

```
java.lang.NoClassDefFoundError: weka/core/converters/CSVLoader
at pighw2java.CSV2ARFF.exec(CSV2ARFF.java:24)
at pighw2java.CSV2ARFF.exec(CSV2ARFF.java:1)
at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:216)
at org.apache.pig.backend.hadoop.executionengine.physicalLayer.expressionOperators.POUserFunc.getNext(POUserFunc.java:305)
at org.apache.pig.backend.hadoop.executionengine.physicalLayer.PhysicalOperator.getNext(PhysicalOperator.java:322)
at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.processPlan(POForEach.java:332)
at org.apache.pig.backend.hadoop.executionengine.physicalLayer.relationalOperators.POForEach.getNext(POForEach.java:284)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.runPipeline(PigGenericMapBase.java:271)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:266)
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigGenericMapBase.map(PigGenericMapBase.java:64)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
    Caused by: java.lang.ClassNotFoundException: weka.core.converters.CSVLoader
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 14 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:24:48.833

您需要注册自定义 UDF 中使用的所有第 3 方依赖项。这里：

```
register '/path/to/weka.jar' 
```

# smalltalk - Smalltalk，文本编辑器的价值

> ID：13336376
> 
> 赞同：1
> 
> 时间：2012-11-11T22:58:25.223
> 
> 标签：smalltalk

如何插入`OrderedCollection`文本编辑器？我试图做这样的事情：

```
texeditor value:list printString 
```

列表是我的`OrderedCollection`。结果是

> OrderedCollection('4''2''1')

在文本编辑器中，但我希望因此只有存储在集合中的值，以便文本编辑器显示：

> '4''2''1'

没有“ `OrderedCollection`”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:17:02.523

尝试这样的事情：

```
textEditor value: (list inject: String new into: [:string :each |
   string, each printString]) 
```

# objective-c - 在被调用视图的 viewDidLoad 之后调用 didSelectRowAtIndexPath

> ID：13336379
> 
> 赞同：0
> 
> 时间：2012-11-11T22:58:51.917
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [在 didSelectRowAtIndexPath 之前调用 viewDidLoad](https://stackoverflow.com/questions/9016144/viewdidload-being-called-before-didselectrowatindexpath)

我正在尝试将变量传递给新视图。我有以下代码：

```
appDelegate *dataCenter = (AppDelegate*)[[UIApplication sharedApplication] delegate];

dataCenter.myVariable = [array objectAtIndex:indexPath.row]; 
```

在里面

```
didSelectRowAtIndexPath 
```

的调用视图。但是，我遇到的问题是该变量在下一个视图的 vewDidLoad 函数中为空，仅仅是因为它在调用视图的 didSelectRowAtIndexPath 之前触发了。我正在使用故事板将视图链接在一起。两者都是 UITableView。

如果我回击然后重新选择它然后设置的表格元素，那么当我回击然后再次选择时，变量就被设置了。有什么办法可以确定执行顺序吗？我真的不想在后端进行 UI 视图切换。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:07:15.930

如何在 didSelectRowAtIndexPath 将数据保存到 NSUserDefaults，然后在 viewDidLoad 从 NSUserDefaults 读取保存的数据。

```
-(void) didSelectRowAtIndexPath {
    NSUserDefaults *infoSaved = [NSUserDefaults standardUserDefaults];
    [infoSaved setObject:myVariable forKey:@"myvariable"];
    [infoSaved:synchronize];

    // then call the new view to load
} 
```

在加载的新视图中：

```
-(void) viewDidLoad {
    NSUserDefaults *infoSaved = [NSUserDefaults standardUserDefaults];
    myVariable = [infoSaved objectForKey:@"myvariable"];

    // and use your variable
} 
```

希望有帮助

# asp.net-mvc - 带有和不带模型的淘汰赛 js .net 加载页面

> ID：13336381
> 
> 赞同：0
> 
> 时间：2012-11-11T22:59:09.330
> 
> 标签：asp.net-mvc, knockout.js

我正在尝试重复使用相同的表单来添加和编辑员工信息。我正在使用淘汰赛 js，在我看来，我制作了淘汰赛模型：

```
var koModel = new EmployeeModel(div); 
```

如果我想从服务器填充字段，我想做这样的事情：

```
var koModel = new EmployeeModel(unserializedModelFromController, div); 
```

我想知道区分请求是针对新员工还是编辑现有员工的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:22:21.947

如果你改变你的参数，你可以编写一个构造函数。

```
var EmployeeModel = function(div, model) {
  if (model) {
    // Existing model has been passed, it's an edit request
  } else {
    // No model has been passed, it's a new request
  }
} 
```

这可以称为：

```
new EmployeeModel(div); 
```

或者

```
new EmployeeModel(div, model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:15:37.447

您可以将具有默认值的参数发送到视图。如果您正在编辑员工，您可以发送 id 的值，您正在创建而不是发送。接收存储或编辑请求的函数可以具有默认值。

```
public void SaveOrEditEmployee(int id=0, ...) //id=0 is a default value
{
    if(id==0)
    {
        //SaveEmployee
    }else
    {
        //EditEmployee
        Employee empl = (x => employee.id == id);
        ...
    }
} 
```

或者您也可以这样做，接收完整模型并评估属性“id”是否已存在于您的数据库中

# kinect - 如何找到关节坐标（X，Y，Z），以及如何绘制被跟踪关节的轨迹？

> ID：13336382
> 
> 赞同：2
> 
> 时间：2012-11-11T22:59:13.277
> 
> 标签：kinect, gesture, kinect-sdk

我正在尝试开发一种逻辑来识别用户右手制作的圆圈，我得到了从示例代码中绘制骨架和跟踪的代码，

```
private void SensorSkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
    {
        Skeleton[] skeletons = new Skeleton[0];

        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
            if (skeletonFrame != null)
            {
                skeletons = new Skeleton[skeletonFrame.SkeletonArrayLength];
                skeletonFrame.CopySkeletonDataTo(skeletons);
            }
        }

        using (DrawingContext dc = this.drawingGroup.Open())
        {
            // Draw a transparent background to set the render size
            dc.DrawRectangle(Brushes.Black, null, new Rect(0.0, 0.0, RenderWidth, RenderHeight));

            if (skeletons.Length != 0)
            {
                foreach (Skeleton skel in skeletons)
                {
                    RenderClippedEdges(skel, dc);

                    if (skel.TrackingState == SkeletonTrackingState.Tracked)
                    {
                        this.DrawBonesAndJoints(skel, dc);
                    }
                    else if (skel.TrackingState == SkeletonTrackingState.PositionOnly)
                    {
                        dc.DrawEllipse(
                        this.centerPointBrush,
                        null,
                        this.SkeletonPointToScreen(skel.Position),
                        BodyCenterThickness,
                        BodyCenterThickness);
                    }
                }
            }

            // prevent drawing outside of our render area
            this.drawingGroup.ClipGeometry = new RectangleGeometry(new Rect(0.0, 0.0, RenderWidth, RenderHeight));
        }
    } 
```

我现在要做的是跟踪用户右手的坐标进行手势识别，

以下是我计划完成工作的方式：

1.  开始手势
2.  绘制圆圈手势，确保存储开始的坐标，然后记下关节从开始开始每移动 45 度的坐标，对于 8 个八分圆，我们将获得 8 个样本。
3.  为了决定画了一个圆圈，我们可以检查八个样本之间的关系。

此外，在深度图像中，我想显示绘制手势的轨迹，因此当手点移动时，它会留下痕迹，所以最后我们会得到一个用户绘制的图形。我不知道如何实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T04:06:03.410

在每个 SkeletonFrameReady 事件期间，每个被跟踪骨架都可以使用每个关节的坐标。在你的`foreach`循环内......

```
foreach (Skeleton skeleton in skeletons) {
    // get the joint
    Joint rightHand = skeleton.Joints[JointType.HandRight];

    // get the individual points of the right hand
    double rightX = rightHand.Position.X;
    double rightY = rightHand.Position.Y;
    double rightZ = rightHand.Position.Z;
} 
```

您可以查看`JointType`枚举以拉出任何关节并使用各个坐标。

要绘制手势轨迹，您可以使用`DrawContext`示例中的 或使用其他方式将 a 绘制`Path`到可视层上。使用您的 x/y/z 值，您需要将它们缩放到窗口坐标。“Coding4Fun”库提供了一个预先构建的功能来做到这一点；或者，您可以编写自己的，例如：

```
private static double ScaleY(Joint joint)
{
    double y = ((SystemParameters.PrimaryScreenHeight / 0.4) * -joint.Position.Y) + (SystemParameters.PrimaryScreenHeight / 2);
    return y;
}

private static void ScaleXY(Joint shoulderCenter, bool rightHand, Joint joint, out int scaledX, out int scaledY)
{
    double screenWidth = SystemParameters.PrimaryScreenWidth;

    double x = 0;
    double y = ScaleY(joint);

    // if rightHand then place shouldCenter on left of screen
    // else place shouldCenter on right of screen
    if (rightHand)
    {
        x = (joint.Position.X - shoulderCenter.Position.X) * screenWidth * 2;
    }
    else
    {
        x = screenWidth - ((shoulderCenter.Position.X - joint.Position.X) * (screenWidth * 2));
    }

    if (x < 0)
    {
        x = 0;
    }
    else if (x > screenWidth - 5)
    {
        x = screenWidth - 5;
    }

    if (y < 0)
    {
        y = 0;
    }

    scaledX = (int)x;
    scaledY = (int)y;
} 
```

# c++ - std::set::equal_range 用于 std::pair 的容器

> ID：13336394
> 
> 赞同：1
> 
> 时间：2012-11-11T23:00:29.277
> 
> 标签：c++, c++11

我试图找到包含 int 值 i 的所有范围 [a,b]，其中 a <= i <= b。我正在使用`set<std:pair<int,int>>`一组范围。

在下文中，在 a 上使用相等的范围`vector<int>`会产生范围的开始和结束之后的范围。

当我对 a 执行相同操作时`set<pair<int,int>>`，结果从范围末尾开始和结束，因此不包括包含该值的范围。

```
#include <set>
#include <iostream>
#include <algorithm>
using namespace std;

int main()
{
    int ia[] = {1,2,3,4,5,6,7,8,9,10};
    set<int> s1(begin(ia),end(ia));
    auto range1 = s1.equal_range(5);

    cout << *range1.first << " " << *range1.second << endl; //prints 5 6

    pair<int,int> p[] = {make_pair(1,10), 
                         make_pair(11,20),  
                         make_pair(21,30), 
                         make_pair(31,40)}; 
    set<pair<int,int>> s(begin(p), end(p));    

    auto range = s.equal_range(make_pair(12,12));

    cout << range.first->first << " " << range.first->second << endl; //prints 21 30, why?
    cout << range.second->first << " " << range.second->second << endl; //prints 21 30

} 
```

`prints`
`5 6`
`21 30`
`21 30`
为什么equal_range上`set<pair<int,int>>`不包括包围值（12）的范围，即[11.20]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:12:38.383

[`equal_range`](http://en.cppreference.com/w/cpp/container/set/equal_range)行为完全正确：

```
assert( std::make_pair(11, 20) < std::make_pair(12, 12) );
assert( std::make_pair(12, 12) < std::make_pair(21, 30) ); 
```

[11,20] 不是一个范围，它是一对。这对 [12,12] 不在另一对“内”，这甚至说是没有意义的。

[12,12] 不是“在”[11,20] 之内，它大于它。小于运算符`std::pair`首先比较第一个元素，并且只有当它们相等时才会查看第二个元素，因此**对于任何****和**`make_pair(11,x)`小于`make_pair(12, y)` **`x``y`**

所以`equal_range`告诉你 [12,12] 将插入 [11,20] 之后和 [21,30] 之前，这是正确的。

如果要将对视为值的范围，则需要编写代码来执行此操作，而不是假设对的内置比较可以做到这一点。您实际上是在尝试在一系列整数对中找到一个整数 12，但是已经编写了代码来在一系列整数对中找到一对 [12,12]。那不是一回事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T23:05:33.367

它不包括`[11, 20]`在范围内，因为它不包括范围内的*任何内容*。没有与 相等的元素`[12, 12]`，因此它返回一个空范围（由半开区间 表示`[x, x)`）。

顺便说一句，取消引用范围的上限可能会调用未定义的行为，因为它可能等于`s.end()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:15:36.247

该对在 之后和 之前`[12, 12]`排序。`[11, 20]``[21, 30]`

[std::set::equal_range()](http://www.cplusplus.com/reference/stl/set/equal_range/)包括一系列*相等*的元素。您的集合中没有相等的元素（尤其是 not `[11, 20]`），所以`equal_range()`返回`[21, 30], [21, 30]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-11T23:22:32.587

`equal_range`实现为先调用lower_bound，再调用upper_bound搜索其余数据集。

```
template <class ForwardIterator, class T>
  pair<ForwardIterator,ForwardIterator>
    equal_range ( ForwardIterator first, ForwardIterator last, const T& value )
{
  ForwardIterator it = lower_bound (first,last,value);
  return make_pair ( it, upper_bound(it,last,value) );
} 
```

查看您的示例：它调用`lower_bound`以定位 value 的下限（即 pair(12,12)，它到达

```
pair<int,int> p[] = {make_pair(1,10), 
                     make_pair(11,20), 
                     make_pair(21,30),   // <--- lower_bound() points to here
                     make_pair(31,40)}; 
```

然后它调用upper_bound() 在(21,30),(31,40) 上搜索，但找不到，它返回(21,30)

[http://www.cplusplus.com/reference/algorithm/upper_bound/](http://www.cplusplus.com/reference/algorithm/upper_bound/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T23:24:39.773

我认为你`std::set<std::pair<int, int> >`不会帮助你将它与你的整数相交：你可以找到`s.lower_bound(std::make_pair(i + 1, i + 1)`来切断搜索，但如果第二个边界足够大，则所有从低于索引的索引开始的范围`i + 1`都可能包含该值。`i`如果您知道范围的最大大小，在这种情况下您可以将搜索限制在前面，这可能会有所帮助`s.lower_bound(std::make_pair(i - max_range_size, i - max_range_size))`。您需要依次检查每个范围，以确定您是否`i`属于它们：

```
auto it    = s.lower_bound(std::make_pair(i - max_range_size, i - max_range_size));
auto upper = s.lower_bound(std::make_pair(i + 1, i + 1));
for (; it != upper; ++it) {
    if (i < it->second) {
        std::cout << "range includes " << i << ": "
                  << [" << it.first << ", " << it->second << "]\n";
} 
```

（或类似的东西......）

# javascript - 主干模型提取 - 模拟后端

> ID：13336396
> 
> 赞同：1
> 
> 时间：2012-11-11T23:00:49.753
> 
> 标签：javascript, ajax, backbone.js

我有一个模型，我正在尝试使用`model.fetch();`. 模型的 urlRoot 设置为我的应用程序的后端（“/backend/item”），但现在我没有后端环境。所以我决定模拟结果。我在路由器内添加了一条路由：

```
"backend/item/:id": "data_getItem" 
```

和一个功能：

```
data_getItem: function(id) {
  console.log("data_getItem: "+ id);
  return {
    animals: [
      {
        name: 'flying cat',
        type: 'none'
      }
    ]
  };
} 
```

运行应用程序时，我可以看到对“http://127.0.0.1:8000/backend/item/1”的 ajax 调用，但控制台为空，并且出现错误（获取函数将我返回到错误回调）。这是为什么？如何模拟后端？

> 编辑实际上@rjz 帮助我完成了我想做的事情，但我真的很想知道骨干路由器是否可以捕获 ajax 调用。我的直觉告诉我，不是因为 ajax 调用无法执行骨干客户端代码，因此路由器概念不相关。我对吗？..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:49:52.090

我认为您不想使用 a`Backbone.Router`来捕获 AJAX 调用。如果您的目标是模拟项目的后端，您应该使用测试框架来执行此操作。一个肮脏的方法是使用类似的东西：

*   [模拟ajax](https://github.com/mobz/mock-ajax)
*   [jquery-mockajax](https://github.com/appendto/jquery-mockjax)

或者如果你想做一些更像单元测试的事情，我会看看[Jasmine](http://pivotal.github.com/jasmine/)和它的[AJAX 模拟库](https://github.com/pivotal/jasmine-ajax)。

**更新以回答您的问题：**

简短的回答是否定的，`Backbone.Router`不能拦截 AJAX 调用。

这是因为路由器通过侦听与 URL 相关的事件来工作。具体来说，路由器正在侦听`hashchange`或`popstate`事件（取决于您是否使用`pushState`）。由于 AJAX 调用不与 URL 交互，它们几乎完全绕过了这个系统。

# php - 使用 PHP-SDK 和 JS-SDK 创建自定义多好友选择器

> ID：13336404
> 
> 赞同：1
> 
> 时间：2012-11-11T23:01:33.060
> 
> 标签：php, javascript, facebook

我在创建一个有效的多朋友选择器时遇到了麻烦。

这是我到目前为止...

这会加载我的 facebook SDK 和函数“sendRequest”，这是我需要调用来发送对话请求的函数。

```
<div id="fb-root"></div>
<script>
    // init the FB-JS-SDK
    window.fbAsyncInit = function() {
        FB.init({
            appId: 'APP_ID', // App ID from the App Dashboard
            status: true, // check the login status upon init?
            cookie: true, // set sessions cookies to allow your server to access the session?
            xfbml: true  // parse XFBML tags on this page?
        });

        // Additional initialization code such as adding Event Listeners goes here
    };

    function sendRequest(userid) {
        FB.ui({
            method: 'apprequests',
            message: 'Check out this application!',
            to: userid,
            title: 'Test request',
        });
        return false;
    }

      // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     d.getElementsByTagName('head')[0].appendChild(js);
   }(document));
</script> 
```

这是我的简单表格，我使用 PHP 创建好友列表。这部分工作正常...

```
<form name="start_trial_form" method="POST" action="index.php">
<?php 
foreach ($usr_friends['data'] as $friend) {
    echo '<label><input type="checkbox" name="sendto_id" value="'.$friend['id'].'"/> <img src="https://graph.facebook.com/' . $friend['id'] . '/picture" title="' . $friend['name'] . '"/>' . $friend['name'] . '</label>';
}
?>
<input type="text" name="title" placeholder="title"/>
<textarea name="text"></textarea>
<button type="submit">Submit</button>
</form> 
```

这是提交表单后运行的 if 语句。我的问题是，当我尝试从这里运行 sendRequest 时，什么也没有发生......如果我在提交按钮中放置 -> onlick="sendRequest('someid#')" 它就可以了。所以我的问题一定在我调用这个函数的方式之内。我对 PHP 比 JS 更舒服。

```
<?php 

    if (!empty($_POST['sendto_id'])) {
        ?>
        <script> sendRequest(<?php echo $_POST['sendto_id']; ?>);</script>
        <?php 
        // some more code
    }
?> 
```

有人可以向我解释为什么这不起作用吗？

# matlab - Matlab 尝试/捕获

> ID：13336407
> 
> 赞同：3
> 
> 时间：2012-11-11T23:01:43.453
> 
> 标签：matlab

```
for ii = 1:2:2*de.nP            
        G=[one, aux3(:,ii), aux3(:,ii) - aux2(:,ii),aux3(:,ii+1) - aux2(:,ii+1)];

        try
        betasPu(:,(ii+1)/2) =G\yM;
        catch ME
         betasPu(:,(ii+1)/2)=[Inf,Inf,Inf,Inf];
        end 
end 
```

我正在使用上面的代码尝试在 G\yM 中使用 G 时捕获实例；条件很差/单数。

我已经使用了上面的代码，但现在尽管产生了几个条件不好/奇异的矩阵，但现在似乎没有触发捕获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:17:23.733

我认为条件不好的计算不会导致错误，只会导致警告？afaik 警告没有被捕获..

但是有一些规避：

*   您可以检查`lastwarn`以检测警告。

*   [您可以按照此处](http://undocumentedmatlab.com/blog/trapping-warnings-efficiently/)的说明修改警告以生成错误。

# python - 我可以在另一个画布内的画布上绘制吗？

> ID：13336412
> 
> 赞同：1
> 
> 时间：2012-11-11T23:02:08.010
> 
> 标签：python, drawing, tkinter

我正在使用 Python 的 Tkinter 窗口工具包创建纸牌克隆。我的窗口包含一个主画布，在主画布内有一系列从 Canvas 继承的小部件，用于保存卡片。我已经实现了一个“拖动移动”系统，用户可以在其中单击鼠标以在其中一个内部画布中选择一张卡片，将其拖到新画布上，然后放手将卡片放入接收画布中。

**问题：**我想在绘制它们的画布和它们移动到的画布之间绘制动态的卡片，以便用户可以在单击和拖动动作期间看到它们在屏幕上移动。当我尝试在已有的画布之间绘制卡片时，它们总是被画在后面，这意味着我只能通过内部画布周围的填充物看到卡片。

这是一个例子，我画了几个，所以效果可以清楚地看到，内部画布也清晰可见。

[![重叠问题的截图](../Images/89569bfa8554c9f0f40e8f8f641ed2c8.png)](https://i.stack.imgur.com/Awf9S.jpg)

**我尝试了什么：**我尝试使用 Misc.lower(aCanvas) 将画布移回，但我无法创建所需的效果。我也尝试设计一个自定义的覆盖光标，但似乎我的光标大小限制为 32px*32px，这对于我想要移动的卡片图像的大小来说是不够的。

**我的问题：**如何在另一个画布内的画布上绘制？如果我不能，你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:47:25.857

你不能做你想做的事。嵌入式小部件始终位于画布项目之上。

为什么要在 bcanvases 中嵌入画布？为什么不只使用单个画布？

# tsql - 在父 where 子句中使用嵌套查询结果

> ID：13336415
> 
> 赞同：0
> 
> 时间：2012-11-11T23:02:30.560
> 
> 标签：tsql

我有这个查询和`as clicks` 我想做的子查询`where clicks > 0`，但是我收到一个错误，指出这不是一个可识别的列。

```
SELECT top 10 *, (select count(*) FROM po_events aeclk WITH(NOLOCK) where (aeclk.[source] = ae.[source]) as clicks

FROM archived_events ae with(NOLOCK) 
where clicks > 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:36:42.633

虽然我同意这可能是重复的评论，但我还想指出相关子查询可能效率低下；用一块石头杀死两只鸟，你可以这样做：

```
SELECT TOP 10
        ae.*
      , aeclk.clicks
FROM    archived_events ae
        JOIN ( SELECT   source
                      , COUNT(*) AS clicks
               FROM     po_events
               GROUP BY source
             ) aeclk ON aeclk.[source] = ae.[source]
WHERE   clicks > 0 
```

# ruby - Hash.new([]) 的行为不符合预期

> ID：13336416
> 
> 赞同：2
> 
> 时间：2012-11-11T23:02:32.767
> 
> 标签：ruby, arrays, hash

> **可能重复：**
> [Ruby 方法 Array#<< 未更新哈希中的数组](https://stackoverflow.com/questions/2552579/ruby-method-array-not-updating-the-array-in-hash)
> [使用 Hash.new([]) 时奇怪的 ruby​​ 行为](https://stackoverflow.com/questions/2698460/strange-ruby-behavior-when-using-hash-new)

我一直在做很棒的[Koans](http://www.rubykoans.com/)，随着我的发展，我没有发现任何大问题，但我偶然发现了这一点，并且无法理解它：

```
 def test_default_value_is_the_same_object
        hash = Hash.new([])

        hash[:one] << "uno"
        hash[:two] << "dos"

        assert_equal ["uno", "dos"], hash[:one]   # But I only put "uno" for this key!
        assert_equal ["uno", "dos"], hash[:two]   # But I only put "dos" for this key!
        assert_equal ["uno", "dos"], hash[:three] # I didn't shove anything for :three!

        assert_equal true, hash[:one].object_id == hash[:two].object_id 
    end 
```

所有测试都通过了（我只是查看了帮助我猜测要编写正确断言的错误）。

最后一个断言，好的，它们都没有初始化，因此它们的值必须具有相同的对象 ID，因为它们都采用默认值。

**我不明白为什么默认值被改变了**，我什至不完全确定发生了什么。

我在 IRB 中进行了尝试，认为可能对 Hash/Array 进行了一些篡改让我发疯，但我得到了相同的结果。

我最初以为`hash[:one] << "uno"`会暗示`hash`成为`{ one: ["uno] }`，但它仍然存在`{ }`。
虽然我猜`<<`只是调用`push`，并且只有在您使用`=`标志时才会添加新键

请告诉我我错过了什么。

**编辑：**我正在使用 Ruby 1.9.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:24:03.663

当您使用 Hash 的默认参数时，相同的对象用于所有未显式设置的键。这意味着这里只使用了*一个*数组，即您传入的数组`Hash.new`。请参阅下面的证据。

```
>> h = Hash.new([])
=> {}
>> h[:foo] << :bar
=> [:bar]
>> h[:bar] << :baz
=> [:bar, :baz]
>> h[:foo].object_id
=> 2177177000
>> h[:bar].object_id
=> 2177177000 
```

奇怪的是，正如您所发现的，如果您检查哈希，您会发现它是空的！这是因为仅修改了默认对象，尚未分配任何键。

幸运的是，还有另一种方法可以为哈希值设置默认值。您可以改为提供默认块：

```
>> h = Hash.new { |h,k| h[k] = [] }
=> {}
>> h[:foo] << :bar
=> [:bar]
>> h[:bar] << :baz
=> [:baz]
>> h[:foo].object_id
=> 2176949560
>> h[:bar].object_id
=> 2176921940 
```

当您使用这种方法时，*每次*使用未分配的键时都会执行该块，并提供散列本身和作为参数的键。通过在块中分配默认值，您可以确保将为每个不同的键创建一个新对象，并且分配将自动发生。这是在 Ruby 中创建“数组哈希”的惯用方式，并且通常比默认参数方法更安全。

也就是说，如果您正在使用不可变的值（如数字），则执行类似`Hash.new(0)`的操作是安全的，因为您只能通过重新分配来更改这些值。但是因为我更喜欢在脑海中保留更少的概念，所以我几乎只使用块形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:17:37.583

当你这样做

```
h = Hash.new(0)
h[:foo] += 1 
```

您正在直接修改`h`. `h[:foo] += 1`是一样的`h[:foo] = h[:foo]+1`。`h[:foo]`正在分配`0+1`。

当你这样做

```
h = Hash.new([])
h[:foo] << :bar 
```

您正在修改`h[:foo]`which is `[]`，这是 的默认值，`h`但不是 的任何键的值`h`。之后`[]`变为`[:bar]`的默认值`h`变为`[:bar]`，但这不是 的值`h[:foo]`。

# java - 在 Java Swing 应用程序中实现 Spring Security

> ID：13336418
> 
> 赞同：2
> 
> 时间：2012-11-11T23:02:46.753
> 
> 标签：java, swing, spring-security

你们中的任何人都对我如何实施这个过程有明确的想法吗？我知道我们需要一个 XML，我们在其中对数据库进行查询，如下所示：

```
<security:authentication-manager>
        <security:authentication-provider >
            <security:jdbc-user-service data-source-ref="dataSource"
              users-by-username-query="
              select  emailid username,password,'true' enabled from tbl_LoginDetails
              where emailid=?"
             authorities-by-username-query="
             select a.emailid username,b.authority from tbl_LoginDetails a,tbl_UserRoles b
            where a.userId=b.userId
            and a.emailid=?"/>
            <security:password-encoder  ref="passwordEncoder">
            </security:password-encoder>
        </security:authentication-provider>
    </security:authentication-manager>
<bean name="passwordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder"> 
```

但是，我还必须从我的 Java swing 应用程序中做些什么。我的意思是：我有一个带有两个文本框的窗口，用于输入用户和密码。我还需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:53:24.010

如果你想在 Swing 应用程序中使用 Spring Security，你需要`GlobalSecurityContextHolderStrategy`在你的`SecurityContextHolder`.

> SecurityContextHolderStrategy 的基于静态字段的实现。这意味着 JVM 中的所有实例共享相同的 SecurityContext。这对于诸如 **Swing**之类的富客户端通常很有用。

查看 Java Docs`SecurityContextHolder`以了解如何配置它：

> 将给定的 SecurityContext 与当前执行线程相关联。此类提供了一系列委托给 SecurityContextHolderStrategy 实例的静态方法。该类的目的是提供一种方便的方法来指定应该用于给定 JVM 的策略。这是 JVM 范围的设置，因为此类中的所有内容都是静态的，以便于调用代码时使用。要指定应使用哪种策略，您必须提供模式设置。模式设置是定义为静态最终字段的三个有效 MODE_ 设置之一，或者是提供公共无参数构造函数的 SecurityContextHolderStrategy 具体实现的完全限定类名。有两种方法可以指定所需的策略模式字符串。第一种是通过在 SYSTEM_PROPERTY 上键入的系统属性来指定它。第二种是在使用类之前调用​​ setStrategyName(String)。如果这两种方法都没有使用，则该类将默认使用 MODE_THREADLOCAL，它向后兼容，具有较少的 JVM 不兼容性并且适用于服务器（而 MODE_GLOBAL 绝对不适合服务器使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:13:21.943

You do not want to use the spring framework in a standalone Swing application. For the above authentication, a direct JDBC query is much more simpler, lightweight, straight forward and in general the way to go in desktop RCP applications. It is just a few lines of Java code, maybe less than your XML. If you need more than simply checking username/password, consider advanced frameworks in the RCP area.

# c++ - 找出 3d 空间中两个对象的公式

> ID：13336427
> 
> 赞同：3
> 
> 时间：2012-11-11T23:05:25.737
> 
> 标签：c++, math, 3d, formula, space

我试图找出公式来获得 3d 空间中两个对象之间的距离。到目前为止，当我运行程序时，答案是错误的：

```
float Distance3D(const float & object1X , 
             const float & object1Y ,
             const float & object1Z , 
             const float & object2X , 
             const float & object2Y ,
             const float & object2Z )
{
    float x = pow ((object2X - object1X),2);// for x
    float y = pow ((object2Y - object1Y),2);// for y
    float z = pow ((object2Z - object1Z),2);// for z
    float objectDistance = 0.0f;

    objectDistance = sqrt(object2X*object1X + object2Y*object1Y + object2Z*object1Z);
    cout << objectDistance << endl;

    return objectDistance;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:29:53.630

除非您只对3-D 空间中*两点的距离感兴趣，否则您可能会感兴趣的是*[Gilbert-Johnson-Keerthi 距离算法](http://en.wikipedia.org/wiki/Gilbert-Johnson-Keerthi_distance_algorithm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:08:48.833

如果您想要 3D 空间中 2 个点之间的欧几里得距离，您的代码应该看起来更像

```
objectDistance = sqrt((object2X-object1X)*(object2X-object1X) + 
                      (object2Y-object1Y)*(object2Y-object1Y) + 
                      (object2Z-object1Z)*(object2Z-object1Z)); 
```

或更简单地使用您的平方距离变量`x,y,z`：

```
objectDistance = sqrt(x + y + z); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:30:45.060

3D 空间中的距离通常使用[勾股定理](https://en.wikipedia.org/wiki/Pythagorean_theorem)找到。

这个公式是

```
d^2=(x0-x1)^2+(y0-y1)^2+(z0-z1)^2 
```

其中`d`是点之间的距离。

使用此公式，您的代码应如下所示

```
float Distance3D(const float & object1X , 
             const float & object1Y ,
             const float & object1Z , 
             const float & object2X , 
             const float & object2Y ,
             const float & object2Z )
{
    float delta_x = pow (object2X - object1X,2);// for x
    float delta_y = pow (object2Y - object1Y,2);// for y
    float delta_z = pow (object2Z - object1Z,2);// for z
    float objectDistance = 0.0f;

    objectDistance = sqrt(delta_x*delta_x + delta_y*delta_y + delta_z*delta_z);
    cout << objectDistance << endl;

    return objectDistance;
} 
```

有趣的是，对于高维数据，这个度量的有用性下降了，[曼哈顿距离](https://en.wikipedia.org/wiki/Taxicab_geometry)可以成为一个更可取的度量。[Aggarwal (2001)](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.23.7409)写了一篇题为“On the Surprising Behavior of Distance Metrics in High Dimensional Space”的论文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T23:08:01.647

你的公式不正确；看看[2D 距离公式](http://www.purplemath.com/modules/distform.htm)，然后将其扩展到 3D。

还要注意与获取 2D/3D 矢量长度的公式的相似之处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T23:09:02.853

您应该尝试每个组件的差异平方的平方根。见[公式](http://en.wikipedia.org/wiki/Euclidean_distance)

# php - mysqli没有插入数据库

> ID：13336430
> 
> 赞同：-1
> 
> 时间：2012-11-11T23:05:42.703
> 
> 标签：php, mysql, mysqli, insert

我已经尝试了 2 天，只是无法让这个插入语句工作......我做错了什么吗？（我也没有错误）

```
<?php
$username = "1";
$kname = "1";   
$sql = "INSERT INTO photos(username, kname) 
         VALUES('" . $username . "', '" . $kname . "')";
    $hostname_Database = "(censored)";
    $database_Database = "(censored)";
    $username_Database = "(censored)";
    $password_Database = "(censored)";

    $mysqli = new mysqli($hostname_Database, $username_Database, $password_Database, $database_Database); 
    if (mysqli_connect_errno()) {
       printf("Connect failed: %s\n", mysqli_connect_error());
       exit();
    }

    $result = $mysqli->query($sql);
    if ($result) {

 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-24T22:39:11.620

切勿在 SQL 语句中直接使用 php 变量。[SQL注入](https://en.m.wikipedia.org/wiki/SQL_injection)的可能性很大。

尝试使用 PDO for PHP，它是执行 SQL CRUD 操作的更佳方式。

首先，您必须设置数据库，然后执行插入、选择或更新等查询，它会帮助你很多，编写更少的代码。

```
$servername = "localhost";
$username = "username";
$password = "password";
$dbname = "myDBPDO";

$conn = new PDO("mysql:host=$servername;dbname=$dbname", $username, $password);
// set the PDO error mode to exception
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$stmt = $conn->prepare("INSERT INTO photos (username, kname) VALUES (?, ?)");
$stmt->execute([  $username , $kname   ]); 
```

欲了解更多信息，请尝试 w3school 链接：[https ://www.w3schools.com/php/php_mysql_prepared_statements.asp](https://www.w3schools.com/php/php_mysql_prepared_statements.asp)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T23:16:27.147

试试这样的，

```
$sql = "INSERT INTO photos(username, kname) 
     VALUES(\" $username  \", \"  $kname \")"; 
```

# github - 是否可以在没有浏览器的情况下从命令行创建一个新的 github 存储库？

> ID：13336436
> 
> 赞同：0
> 
> 时间：2012-11-11T23:06:28.090
> 
> 标签：github, repository

> **可能重复：**
> [是否可以在没有 ssh 的情况下从 CLI 在 GitHub 上创建远程存储库？](https://stackoverflow.com/questions/2423777/is-it-possible-to-create-a-remote-repo-on-github-from-the-cli-without-ssh)

每次我在 github 上创建一个新的 repo 时，我都需要先去 github 网站创建一个存储库，然后使用命令行将我的代码推送到我自己电脑上的那个 repo。是否可以在没有浏览器的情况下从命令行创建一个新的 github 存储库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:20:03.153

正如**[最近对 GitHub API 的更改所述](http://developer.github.com/changes/2012-9-28-auto-init-for-repositories/)**，现在可以通过您首选的 shell**同时创建和初始化一个 repo 。**

*“今天，我们让通过 GitHub API 向存储库添加提交变得更加容易。到目前为止，您可以创建存储库，但在通过 API 添加任何提交之前，您需要通过 Git 客户端在本地初始化它。”*

*“现在您可以选择在创建存储库时通过为* `auto_init` *参数发送 true 来初始化它：”*

```
curl -i -u pengwynn \
 -d '{"name": "create-repo-test", "auto_init": true}' \
 https://api.github.com/user/repos 
```

这一自动初始化功能还允许通过将模板名称传递给curl 请求的参数，从**[.GitHub .gitignore 存储](https://github.com/github/gitignore)**`.gitignore`库动态地将文件添加到存储库。`"gitignore_template"`

# c - 用于 C 编程的不同 IDE 的问题

> ID：13336439
> 
> 赞同：2
> 
> 时间：2012-11-11T23:06:41.863
> 
> 标签：c

我正在学习 C 两个月。我尝试了不同的 IDE，我的实验导致了混乱。因为例如在 NETBEANS 中，我可以在没有 stdlib.h 库的情况下使用 abs 函数，但是当我尝试在 Visual Studio 2012 中做同样的事情时，它给出了一个错误。或者 NETBEANS 中的一件非常奇怪的事情，我可以使用 math.h 库中的函数而无需声明该库。为什么会这样？有人可以帮忙吗？NETBEANS 使用 cygwin 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:12:14.483

在 C 中，您无需包含标题即可使用这些功能。不过，较旧的编译器并不总是对此发出警告。此外，不同的编译器可能以不同的方式提供这些功能；在某些情况下，它们不是函数而是宏。使用宏，您需要包含标题。

最好*始终*包含提供所需函数的标头，以便获得函数原型。这是编译器检查错误（例如，传递函数参数的正确类型）的唯一方法。如果调用没有原型的函数，则会得到该函数的隐式声明。这意味着编译器只是猜测并希望您正确使用该函数，但无法检查。这就是为什么这不适用于宏，因为宏不能有函数声明（隐式或非隐式）。

Visual Studio 给出错误的原因是因为它是 C++ 编译器，而不是 C 编译器。C++ 与 C 有点不同。不同之处之一是 C++ 不允许隐式函数声明。如果你没有声明你使用的函数（在这种情况下包括它们的头文件），那么这被认为是一个错误。C++ 主要与 C 兼容，但这恰好是为数不多的差异之一。

顺便说一句，它们不是图书馆。它们是头文件。有区别。您可以包含多个标准头文件，但您只有一个库；C 库。在大多数系统上，您还有一个数学库，它只包含数学函数。关键是几个头文件可以（并且通常是）同一个库的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T23:48:59.707

我对 C 的体验是一样的。不同的编译器有不同的库，有时它们不遵守标准。一些编译器供应商试图将您锁定在 (XXXXX$XXX) :)

# postgis - 检索旧版本的 OSM 对象（方式）

> ID：13336440
> 
> 赞同：0
> 
> 时间：2012-11-11T23:06:51.797
> 
> 标签：postgis, openstreetmap

在 OSM api 中，我可以获取有关执行此操作的方法的信息：

```
/api/0.6/way/#id 
```

我想知道随着时间的推移这种方式是如何变化的，例如我想知道这种方式是什么时候改名的，等等。这对研究领土的演变很有趣..

途中有一个 version="" 属性，但我怎样才能获得旧版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T08:55:18.887

检查此[链接](http://wiki.openstreetmap.org/wiki/API_v0.6#History%3a_GET_.2Fapi.2F0.6.2F.5Bnode.7Cway.7Crelation.5D.2F.23id.2Fhistory)

您可以通过以下方式获取给定元素的历史记录：

```
GET /api/0.6/[node|way|relation]/#id/history 
```

# algorithm - 建议一种算法/方法来找到一个合适的值

> ID：13336444
> 
> 赞同：0
> 
> 时间：2012-11-11T23:07:34.300
> 
> 标签：algorithm

我有一堆值，例如：[1,2,14,51,100,103,107,110,300,505,1034]。我有一个模式值，例如 [1,10,20,100,500,1000]。我需要从模式中获得最佳的“合适”价值。在我的示例中为 100。如何检测此值？

生活中的例子。该应用程序在用户位置和某些对象之间有一堆距离。该应用程序还具有按距离预设的过滤器：[1 米、10 米、20 米、100 米]。我注意默认情况下将过滤器设置为第一个值（在我的示例中为 1 米），而是设置为与一堆距离最佳匹配的值（在我的示例中为 100 米）。我需要检测一个值。

感谢您的帮助和任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:24:44.907

我想说创建一个这样的函数（这不是真正的代码）：

```
 var ratio1 = 0.66
            var ratio2 = 1.5
            function Score(currentPatternValue, arrayOfValues)
            {
            count = 0
            for each value in arrayOfValues <br>
              if value > ratio1 * currentPatternValue AND value < ratio2 * currentPatternValue<br>
                count++<br>

            return count
            } 
```

然后你为你的模式值中的每个值运行它，并选择从该函数返回的得分最高的那个

# c++ - C++ Direct 2D 如何调整 ID2D1Bitmap 的大小

> ID：13336445
> 
> 赞同：1
> 
> 时间：2012-11-11T23:07:41.840
> 
> 标签：c++, bitmap, resize, direct2d

我正在为自己正在制作的游戏制作一个简单的 GUI 库，并且每个控件都需要有一个位图，以便在控件需要重绘时绘制到该位图。当它不需要重绘时，它将有一个已经制作好的位图准备显示到屏幕上。由于可以调整控件的大小，因此也需要调整此 Bitmap 的大小，以便可以正确地将控件完全绘制到其中。我该如何实现这一点，因为它似乎不是调整位图大小的 Resize 方法，不像 ID2D1HwndRenderTarget，它可以调整大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T22:17:17.433

没有办法调整大小`ID2D1Bitmap`。创建位图后设置尺寸。同样适用于`IDXGISurface`和`ID3D11Texture2D`。您将需要创建一个不同大小的新位图并自己复制数据。

# sql - SQL Server 2005 数据透视查询语法帮助

> ID：13336457
> 
> 赞同：2
> 
> 时间：2012-11-11T23:09:31.043
> 
> 标签：sql, tsql, sql-server-2005

我已经阅读了 SQL 中的 pivot 并查看了大量示例，但我无法让它以我想要的方式工作。我有一个跟踪员工购买的交易历史表。

例子：

```
Employee | Date       | Value
1234     | 2012-11-13 | 20.23 
```

我需要为所有员工创建一个每月总销售额的摘要，如下所示：

```
Employee | Jan | Feb | Mar | ... | Dec| YearTotal 
```

我对分组和获取每月总数感到困惑。谢谢你的帮助！

编辑好的，如果我没有准备好请求帮助，我深表歉意。我大部分时间都在为此工作，并且感到沮丧和疲倦。我有超过 10 年的 SQL 经验，但这是我第一次尝试进行数据透视查询，我只是不明白它们应该如何工作以及如何使其工作满足我的需要。我需要在星期一早上生成这些数字，所以大约需要 7 个小时。我最后的努力是每个月运行一个单独的查询，然后将数据转储到 Excel 中以生成报告。我希望这对于最终用户将来运行是无缝的。

这是我的尝试的简化版本，它是从 MSDN 的示例中重新设计的：

```
SELECT CUSTOMER_NUMBER, [jan], [feb]
FROM 
    (
    SELECT month(transaction_date)
    FROM customer_item_purchases
    WHERE TRANSACTION_DATE BETWEEN '2011-11-16' AND '2012-11-15'
    )
PIVOT
(SUM(SALES_VALUE) IN ([JAN], [Feb]))
AS pvt 
```

我需要指定日期之间每个月的总月销售额。Nov 将显示在月份的开始和结束列。源表很简单：Employee、transdate、receipt、location 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:32:00.900

小提琴示例（如果我没有登录但现在可以使用，不确定这是否会保存：[http ://sqlfiddle.com/#!6/8c96a/3/15](http://sqlfiddle.com/#!6/8c96a/3/15)

我只转了 3 个月，但希望你能明白。通常您在 From 之后有嵌套的 Select，因为您只想在某些列上进行透视/分组。然后出现 Pivot，您可以在其中列出要成为`FOR mnth IN ( [1], [2], [3] )`与该字段对应的列名的值`Month(Date) as mnth`。

```
Create table Sales
( EmpId int, Date DateTime, Value integer );

Insert Into Sales (EmpId, Date, Value)
Values (1,'1/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'2/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'3/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'4/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'5/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'6/1/2012', 12);
Insert Into Sales (EmpId, Date, Value)
Values (1,'7/1/2012', 12);

Insert Into Sales (EmpId, Date, Value)
Values (2,'1/1/2012', 112);
Insert Into Sales (EmpId, Date, Value)
Values (2,'1/15/2012', 112);
Insert Into Sales (EmpId, Date, Value)
Values (2,'2/1/2012', 312);
Insert Into Sales (EmpId, Date, Value)
Values (2,'3/1/2012', 512);
Insert Into Sales (EmpId, Date, Value)
Values (2,'4/1/2012', 2);
Insert Into Sales (EmpId, Date, Value)
Values (2,'5/1/2012', 3);
Insert Into Sales (EmpId, Date, Value)
Values (2,'6/1/2012', 1);
Insert Into Sales (EmpId, Date, Value)
Values (2,'7/1/2012', 0);

SELECT EmpID, [1], [2], [3]
FROM 
(SELECT EmpID, Month(Date) as mnth, Value
FROM Sales) p
PIVOT
(
  Sum (Value)
  FOR mnth IN
( [1], [2], [3] )
) AS pvt
ORDER BY pvt.EmpID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:15:21.770

您可以设置一个包含 2 列的表格，每个月 (1,2,3,...,12) 和另一个 3 位数月份代码 ('Jan', 'Feb', 'Mar',..., '十二月'）。您还可以使用包含在总和中的一系列案例语句来仅计算每个员工的特定月份销售额，然后按员工分组。

这是分组和连接的问题，这是数据库中的两个基本概念。我可以给你我的答案，但如果你真的想学习，那么我会同意米奇的观点……表现出一些努力。

# python - 列表索引超出范围（python）

> ID：13336461
> 
> 赞同：0
> 
> 时间：2012-11-11T23:09:53.913
> 
> 标签：python, list, indexing, range

我正在创建一个用于玩字谜的单词生成器，它适用于大约六个单词，然后显示“列表索引超出范围”。

这是我的代码：

```
def selection(word):
    while True:
        from random import randint
        sel = randint(1,10)
        print(word[sel])
        input("\nPress enter to select a new word.")

print("Type in ten words to add to the list.")
words = []
words.append(input("1st word: "))
words.append(input("2nd word: "))
words.append(input("3rd word: "))
words.append(input("4th word: "))
words.append(input("5th word: "))
words.append(input("6th word: "))
words.append(input("7th word: "))
words.append(input("8th word: "))
words.append(input("9th word: "))
words.append(input("10th word: "))
input("\nPress enter to randomly select a word.")
selection(words) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T23:11:49.023

您目前正在选择一个介于`1`和之间的数字`10`，包括 和 。Python 列表是`0 indexed`，因此您应该在`0`和之间选择一个数字`9`。

```
sel = randint(0, 9) 
```

这也是使用该[`choice()`](http://docs.python.org/2/library/random.html#random.choice)功能的好地方。它从一个序列（例如一个列表）中选择一个随机元素。

```
random_word = random.choice(words) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:12:27.810

此外，这不是一个真正的答案，但你可以做到

```
for i in xrange(0, 9):
    words.append(input("{0}st word: ".format(i + 1)) 
```

还

[随机选择](http://docs.python.org/2/library/random.html#random.choice)

# android - (Android) AlarmManager 在错误的时间调用服务 - 多个警报

> ID：13336462
> 
> 赞同：1
> 
> 时间：2012-11-11T23:09:57.473
> 
> 标签：android, service, alarmmanager, android-appwidget, appwidgetprovider

好吧，我有一个 AppWidget（当然还有一个 AppWidgetProvider）、一个配置设置（用户在其中选择 5 分钟到 2 小时之间的更新率）和一个更新小部件的服务。

正在发生的事情是，如果主屏幕上只有一个 AppWidget，那么一切正常。但是，如果我在主屏幕上放了第二个 AppWidget，它们就会同时开始更新，使用相同的数据（并且是随机数据）等等。

那么，我该怎么做才能纠正呢？

代码，他们去：

SettingsActivity，我开始警报的地方：

```
(...)
Intent intent = new Intent(context, WidgetServiceSmall.class);
intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
        widgetId);
Uri data = Uri.withAppendedPath(
        Uri.parse(WidgetProviderSmall.URI_SCHEME + "://widget/id/service/"),
        String.valueOf(widgetId));
intent.setData(data);
PendingIntent newPending = PendingIntent.getService(context,
        widgetId, intent, PendingIntent.FLAG_UPDATE_CURRENT);
alarms.setRepeating(AlarmManager.ELAPSED_REALTIME,
        SystemClock.elapsedRealtime(), newTime * 1000,
        newPending);
(...) 
```

WidgetServiceSmall（Service类）的onStartCommand方法：

```
public int onStartCommand(Intent intent, int flags, int startId) {
    // Atualiza os dados...
    Context context = this.getApplicationContext();
    int widgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID);
    if (widgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
        try {
            DBAdapter db;
            db = new DBAdapter(context);
            db.open();
            Quote q = db.getRandomQuote();
            db.close();

            // Guarda o ID da citação...
            Editor configEditor = context.getSharedPreferences(
                    "QuoteWidgetSmall", 0).edit();
            configEditor.putInt(String.format("QuoteId-%d", widgetId),
                    q.getId());
            configEditor.commit();
            System.out.println("Id: " + widgetId);
            System.out.println("Quote Id: " + q.getId());

            // Verifica o tamanho e trunca o texto da citação...
            String textQuote = "\"" + q.getQuote() + "\"";
            if (textQuote.length() > 110 + 10) {
                textQuote = textQuote.substring(0, 110) + "...\" [...]";
            }

            // Cria o RemoteViews
            RemoteViews rv = new RemoteViews(context.getPackageName(),
                    R.layout.widget_layout_small);
            // Seta os campos...
            // rv.setTextViewText(R.id.txtWdgQuote, "\"" + q.getQuote()
            // +
            // "\"");
            rv.setTextViewText(R.id.txtWdgQuote, textQuote);
            rv.setTextViewText(R.id.txtWdgAuthor, "— "
                    + q.getAuthor().getName());

            // Adiciona o listener do evento do botão Next...
            Intent active = new Intent(context, WidgetProviderSmall.class);
            active.setAction(StaticHelper.ACTION_WIDGET_REFRESH);
            active.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
                    new int[] { widgetId });
            Uri data = Uri.withAppendedPath(
                    Uri.parse(WidgetProviderSmall.URI_SCHEME
                            + "://widget/id/"), String.valueOf(widgetId));
            active.setData(data);
            PendingIntent actionPendingIntent = PendingIntent.getBroadcast(
                    context, widgetId, active, 0);
            rv.setOnClickPendingIntent(R.id.ibtNext, actionPendingIntent);

            // Adiciona o listener do evento do botão Settings... active =
            active = new Intent(context, SettingsActivity.class);
            active.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
            active.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            // Make the pending intent unique...
            active.setData(data);
            actionPendingIntent = PendingIntent.getActivity(context,
                    widgetId, active, PendingIntent.FLAG_UPDATE_CURRENT);
            rv.setOnClickPendingIntent(R.id.ibtSettings,
                    actionPendingIntent);

            // Adiciona o listener do evento do clique no Widget...
            active = new Intent(context, WidgetProviderSmall.class);
            active.setAction(StaticHelper.ACTION_CLICK);
            // onReceive precisa apenas do Id em um int, então passa assim.
            active.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
            active.setData(data);
            actionPendingIntent = PendingIntent.getBroadcast(context,
                    widgetId, active, 0);
            rv.setOnClickPendingIntent(R.id.laySmall, actionPendingIntent);

            // Salva tudo
            AppWidgetManager manager = AppWidgetManager
                    .getInstance(context);
            ComponentName thiswidget = new ComponentName(context,
                    WidgetProviderSmall.class);
            manager.updateAppWidget(thiswidget, rv);

        } catch (SQLException e) {
            Log.e(TAG, e.getMessage(), e);
        }
    } else {

    }
    return super.onStartCommand(intent, flags, startId);
} 
```

WidgetProviderSmall（AppWidgetProvider类）的onDeleted方法，报警停止的地方：

```
@Override
public void onDeleted(Context context, int[] appWidgetIds) {
    System.out.println("Ih! OnDelete!");
    int n = appWidgetIds.length;
    for (int i = 0; i < n; i++) {
        int widgetId = appWidgetIds[i];
        System.out.println("Deletando...");

        Intent intent = new Intent(context, WidgetServiceSmall.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                widgetId);
        Uri data = Uri.withAppendedPath(
                Uri.parse(WidgetProviderSmall.URI_SCHEME
                        + "://widget/id/service/"),
                String.valueOf(widgetId));
        intent.setData(data);
        PendingIntent newPending = PendingIntent.getService(context, widgetId,
                intent, PendingIntent.FLAG_UPDATE_CURRENT);

        // Para o alarme...
        AlarmManager alarms = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        alarms.cancel(newPending);

        // Remove o estado armazenado...
        SharedPreferences config = context.getSharedPreferences(
                "QuoteWidget", 0);
        SharedPreferences.Editor edit = config.edit();
        edit.remove(String.format("UpdateRate-%d", widgetId));
        edit.commit();
        System.out.println("Terminou o onDelete");
    }
    super.onDisabled(context);
} 
```

WidgetProviderSmall（AppWidgetProvider类）的onDisabled方法，服务停止的地方：

```
@Override
public void onDisabled(Context context) {
    /*Intent i = new Intent(context, WidgetProviderSmall.class);
    int[] ids = i.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);*/
    Intent intent = new Intent(context, WidgetServiceSmall.class);
    /*intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
            new int[] { widgetId });
    Uri data = Uri.withAppendedPath(
            Uri.parse(WidgetProviderSmall.URI_SCHEME
                    + "://widget/id/service/"), String.valueOf(ids[0]));
    intent.setData(data);*/
    context.stopService(intent);
    super.onDisabled(context);
} 
```

我在 StackOverflow 上的其他帖子的答案中看到了一个代码，用户说要像这样创建 Pen：

```
PendingIntent newPending = PendingIntent.getService(context, (int) System.currentTimeMillis(), intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

代替：

```
PendingIntent newPending = PendingIntent.getService(context, widgetId, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

问题是：一旦我像这样创建它，以后如何取消它？

谢谢！

# android - apk 必须使用相同的证书进行签名

> ID：13336463
> 
> 赞同：0
> 
> 时间：2012-11-11T23:10:03.247
> 
> 标签：android, google-play

当我尝试上传我的应用程序的新更新时，给我这个错误“该 apk 必须使用与以前版本相同的证书进行签名”。程序：我使用 eclipse 中的导出向导，而不是从我的文件夹中加载旧证书文件，我正确输入密码（我测试它输入不正确，并且不能更进一步）所以我知道 shure 是正确的，并且别名是正确的通行证到，并保存apk。当我尝试上传给我错误。包装是一样的，而且东西都是一样的。谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:16:04.507

肯定你的证书是不同的，你可以使用以下命令进行检查：

```
unzip -d tmp filename.apk META-INF/CERT.RSA
keytool -printcert -v -file tmp/META-INF/CERT.RSA 
```

`filename.apk`当前和/或以前版本的 apk在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:17:32.283

以下三件事之一可能会导致此问题：

1.  使用不同的私钥证书（听起来你不认为这是你的问题）

2.  不增加 android manifest 中的 versionCode 和 versionName

3.  使用不同的包名

希望不是您丢失了证书！祝你好运！有人提到可以用多个证书签署你的应用程序的旧版本，然后像[这样继续使用你仍然拥有的那个](https://stackoverflow.com/questions/2881904/how-to-sign-an-apk-with-more-than-one-certificate)

# c# - .NET CLR / Framework 运行时检测

> ID：13336467
> 
> 赞同：3
> 
> 时间：2012-11-11T23:11:26.387
> 
> 标签：c#, .net, frameworks, runtime

是否可以在运行时确定：

1.  应用程序面向哪个版本的 .NET 框架？

2.  如果应用程序针对的是框架的完整配置文件或客户端配置文件？

我尝试过使用`Environment.Version`，但这会产生非常不准确的结果。同样，我无法找到任何解决方案来确定正在使用的配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:19:20.173

> 1) 应用程序面向哪个版本的 .NET 框架？

.NET 程序集以特定版本的框架为目标。但正如您所知，您可以将针对 .NET 2.0 编译的程序集加载到 CLR 4.0 中。[在运行时，您可以通过Environment.Version](http://msdn.microsoft.com/en-us/library/system.environment.version.aspx)属性知道用于托管应用程序的 CLR 版本。

> 2) 如果应用程序针对的是框架的完整配置文件或客户端配置文件？

.NET 配置文件不是可以在运行时确定的。它仅由 Visual Studio 用于将“添加引用”对话框中的某些程序集灰显，以防止您引用在运行时可能不可用的程序集。顺便说一句，这个概念在 .NET 4.5 中被删除了。

# icons - 收到单击任务栏图标的通知

> ID：13336470
> 
> 赞同：-1
> 
> 时间：2012-11-11T23:11:28.273
> 
> 标签：icons, taskbar, autohotkey

寻找隐藏窗口的解决方案 - 单击任务栏图标时发生的窗口事件。或者，一种删除任务栏图标的方法。托盘图标很容易隐藏 - 这不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:54:37.850

AutoHotkey 的网站上有一个示例脚本，名为[Minimize Window to Tray](http://www.autohotkey.com/docs/scripts/MinimizeToTrayMenu.htm)

脚本本身使用热键`Win+H`隐藏活动窗口。`Win+U`然后显示最后一个隐藏的窗口。如果这不是您想要的功能，我相信您可以查看脚本并挑选出您需要的功能。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:52:42.490

我有一个可能的答案来检测单击任务栏图标 - 但我担心每个版本的 Windows 都会有所不同。使用 OnMessage(Wm_Activate := 0x06, "testmessage") - 然后 MouseGetPos 来获取窗口名称，我可以消除除 'MSTaskListWClass1' 之外的所有我想要的图标的名称。但我怀疑这个名字只对Win7有效。

# mysql - DNF 的 MySQL 优化提示

> ID：13336472
> 
> 赞同：0
> 
> 时间：2012-11-11T23:11:59.583
> 
> 标签：mysql, sql, optimization

在 MYSQL 中，我不想更改太多的 Wordpress 插件中的一些代码正在运行以下查询：

```
SELECT * WHERE cond1 AND (field1 = val1 OR field2 = val2) 
```

但是，尽管 val1 和 val2 上有索引，但它运行非常缓慢。（慢查询日志确认它扫描了所有行。）我可以提示 MYSQL 它应该始终将公式扩展为以下等效但更快的形式吗？

```
SELECT * WHERE cond1 AND (field1 = val1)
UNION
SELECT * WHERE cond1 AND (field2 = val2) 
```

这将显着减少扫描的行数，因此将产生非常出色的性能。我也想知道

```
SELECT * WHERE cond1 AND (field1 in (val1, val2)) 
```

谢谢！

**编辑**：关于表格的一些信息和查询解释在这里[http://pastebin.com/Qd1ZaVKD](http://pastebin.com/Qd1ZaVKD)但似乎不一致。如果我从 myphpadmin 运行查询，有时会生成缓慢的查询日志条目，有时不会生成，即使当其他用户导致此类行时仍会继续生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:17:03.873

它首先取决于`cond1`，然后取决于`field1`和`field2`在该条件下的基数：

1.  如果`cond1`涉及直接比较具有常量值的列（即索引可以帮助解决它），那么使用`field1`和/或的复合索引`field2`可能会有所帮助（见下文）。

    如果`cond1`涉及对列的操作——例如应用一个函数或其他操作，例如`my_int + 5 = 3`或`DATE(my_timestamp) > NOW()`——那么索引就无济于事；但是，请注意，这两个示例都可以重写为对索引友好：

    *   `my_int = 3 - 5`, 这显然等价于`my_int = -2`; 和

    *   `my_timestamp >= CURDATE() + INTERVAL 1 DAY`.

2.  只值得创建具有相对较高基数的索引（即可以快速区分许多记录），否则使用它会比全表扫描好一点，同时减慢表写入操作并消耗额外的存储和内存空间。不仅要考虑和的基数`cond1`，还要考虑与每个域一起的基数。`field1``field2``cond1`

    假设它们都具有高基数，您最好的选择是实现一个[`index_merge`（联合访问）](http://dev.mysql.com/doc/en/index-merge-optimization.html#index-merge-union)`(cond1, field1)` ，每个和都有两个复合索引`(cond1, field2)`。

# google-app-engine - 使用文件名从 AppEngine 中的 BlobStore 下载 Blob

> ID：13336475
> 
> 赞同：1
> 
> 时间：2012-11-11T23:12:17.553
> 
> 标签：google-app-engine, servlets, blobstore

文件存储在 Appengine Blobstore 中。我有一个 servlet 处理程序来允许用户下载文件。我使用 BlobStoreService 来做到这一点。

在我的 servlet 中，我有以下内容：

```
BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
BlobKey blobKey = new BlobKey( "SOME_BLOB_KEY_HERE" );
blobstoreService.serve(blobKey, res); 
```

它完美地工作。下载文件的文件名来自 servlet 映射。

如何在我的 servlet 中设置文件的文件名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T02:22:38.543

您需要在响应中添加“Content-Disposition”标头：

```
BlobstoreServiceFactory.getBlobstoreService().serve(blobKey, resp);
BlobInfo blobInfo = new BlobInfoFactory().loadBlobInfo(blobKey);

String encodedFilename = URLEncoder.encode(blobInfo.getFilename(), "utf-8");
encodedFilename.replaceAll("\\+", "%20");
resp.setContentType("application/octet-stream");

resp.addHeader("Content-Disposition", "attachment; filename*=utf-8''" + encodedFilename ); 
```

# .htaccess - 我的 htaccess 不适用于永久重定向

> ID：13336476
> 
> 赞同：0
> 
> 时间：2012-11-11T23:12:19.227
> 
> 标签：.htaccess, redirect

我正在尝试使用 进行永久重定向`.htaccess`，但它不起作用，我不知道为什么。

RedirectPermanent / [http://www.flunchinvite.fr](http://www.flunchinvite.fr)

我正在尝试从：http://www.flunchinvite.com 重定向到： [http](http://www.flunchinvite.com) : [//www.flunchinvite.fr](http://www.flunchinvite.fr)。

你有什么想法？

谢谢

**编辑**

我刚刚做了一个测试来重定向到谷歌，但它也不起作用，而当我尝试在[http://flunchinvite.fr](http://flunchinvite.fr)上使用相同的代码进行重定向时它可以工作。你知道那是从哪里来的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:08:57.093

At the end I did a php redirection, I don't know why it's not ok on the htaccess. I'll see that another time. I'm going to bed

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:52:54.587

Use Rewrite if it is an option:

[http://www.gnc-web-creations.com/301-redirect.htm](http://www.gnc-web-creations.com/301-redirect.htm)

> Another method we can use is via mod_rewrite. This requires that the mod_rewrite module is active on your webserver. It usually is and is done by the system administrators when they installed the webserver. mod_rewrite is a very powerful URL re-writing engine and we will only by scratching a hair on its head here.
> 
> Again, in your .htaccess file
> 
> RewriteEngine ON RewriteRule ^(.*)$ [http://mynewdomain.com/](http://mynewdomain.com/)$1 [R=301,L]
> 
> The above example will re-map your old domain to a new one and issue a 301 status code (permanent redirect). So a request for
> 
> [http://olddomain.com/foobar.html](http://olddomain.com/foobar.html) will go to
> 
> [http://mynewdomain.com/foobar.html](http://mynewdomain.com/foobar.html)
> 
> If you simply want to redirect all requests regardless of the page requested to the new domain you could use:
> 
> RewriteRule /.* [http://mynewdomain.com/](http://mynewdomain.com/) [R=301,L]
> 
> In this case no matter what file or directory is requested they will all go to
> 
> [http://mynewdomain.com/](http://mynewdomain.com/) i.e., [http://myolddomain.com/foobar.html](http://myolddomain.com/foobar.html)
> 
> will go to [http://mynewdomain.com/](http://mynewdomain.com/)
> 
> The [R=301,L] means redirect the client and send a 301 status code (R=301) and make this the last rule (L).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:58:29.617

看一下第 5 行和第 6 行：

```
AddDefaultCharset UTF-8
<IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteBase /demo2
        RewriteCond %{HTTP_HOST} ^mathpdq\.com
        RewriteRule ^(.*)$ http://www.mathpdq.com/demo2/$1 [R=permanent,L]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我无法让 301 重定向工作，所以我选择了这个。基本上，如果用户使用 mathpdq.com/demo2 进入，它会强制重定向到 www.mathpdq.com/demo2。

第 6 行下面的内容只是到 php 函数的正常映射。

[http://pastie.org/5364605](http://pastie.org/5364605)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T23:29:39.410

尝试类似的东西

```
//Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^flunchinvite.com[nc]
RewriteRule ^(.*)$ http://www.flunchinvite.cfr/$1 [r=301,nc] 
```

# android - Android 在构建时崩溃

> ID：13336480
> 
> 赞同：0
> 
> 时间：2012-11-11T23:12:56.470
> 
> 标签：android

我什至不知道从哪里开始这个错误。ACRA有错误吗？？？

```
 UNEXPECTED TOP-LEVEL EXCEPTION:
 java.lang.IllegalArgumentException: already added: Lorg/acra/ACRA$1;
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.dx.command.dexer.Main.run(Main.java:206)
 [2012-11-11 18:01:57 - phca] Dx    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 [2012-11-11 18:01:57 - phca] Dx    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
 [2012-11-11 18:01:57 - phca] Dx    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
 [2012-11-11 18:01:57 - phca] Dx    at java.lang.reflect.Method.invoke(Method.java:597)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
 [2012-11-11 18:01:57 - phca] Dx    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.debug.internal.ui.DebugUIPlugin$7.run(DebugUIPlugin.java:1133)
 [2012-11-11 18:01:57 - phca] Dx    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
 [2012-11-11 18:01:57 - phca] Dx 1 error; aborting
 [2012-11-11 18:01:57 - phca] Conversion to Dalvik format failed with error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:39:39.193

看起来您正在添加两个具有相同名称的类或相同类的两倍。检查您的项目属性，在 Java Build Path 上并检查您是否碰巧包含了两次相同的源。

# c - 如何在 Mac 上使用 Xcode 在 C 中设置 I/O 重定向？

> ID：13336482
> 
> 赞同：2
> 
> 时间：2012-11-11T23:13:00.007
> 
> 标签：c, macos, io

我正在编写一个程序，我需要设置程序以从文本文件中获取输入并将输出保存在文本文件中。我正在使用 Xcode，我在 Mac 上。我知道我需要在控制台中输入一些重定向命令，但我不确定该怎么做。例如文本文件可以随意使用 input.txt 和 output.txt。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:20:50.593

在终端（命令行）上，您可以执行

```
command < input.txt > output.txt 
```

或者

```
cat input.txt | command > output.txt 
```

编辑：

```
Ok, thanks a lot. Just curious, when I type that in the terminal, 
how does it know to go to Xcode? 
```

在终端上运行命令和 Xcode 之间的唯一联系是您在 Xcode 中构建程序。这会生成一个可执行文件，该可执行文件可以由 Xcode 或从 shell（终端）运行。在终端上运行程序对 Xcode 完全没有影响。

很可能有一种方法可以从 Xcode 中重定向 I/O（也许这是您最初想要的），但我不知道（不要使用 Xcode）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-03T10:10:36.610

告诉 Xcode 您希望为已编译的命令行程序重定向标准输入、输出或错误似乎很困难，如果不是不可能的话。Program > Scheme > Edit Scheme 菜单仅对应用程序“Arguments Passes On Launch”[Cmd+<] 有所帮助，这与 shell 中的重定向运算符 < 和 > 不同。似乎与终端和 Xcode 没有任何联系，这也说明您无法调试从此类外部 shell 启动的程序。

作为一种没有依赖关系的基本解决方法，一些网站建议您将此重定向烘焙到您的程序代码中。这甚至可以针对 Apple macOS 有条件地完成，例如：

```
#ifdef __APPLE__
    freopen("input.txt", "r", stdin);
    freopen("output.txt", "w", stdout);
    freopen("error.txt", "w", stderr);
#endif 
```

一个稍微复杂一点的例子将利用“环境变量”，因为可以在同一个产品方案选项卡上设置，并且程序代码如下：

```
#include <stdlib.h>

#ifdef __APPLE__
        if (getenv("STDIN")) {
            if (!freopen(getenv("STDIN"), "r", stdin)) {
                NSLog(@"Unable to redirect stdin to '%s'\n", getenv("STDIN"));
            }
        } else {
            NSLog(@"Unknown environment variable STDIN so assuming stdin\n");
        }
        if (getenv("STDOUT")) {
            if (!freopen(getenv("STDOUT"), "w", stdout)) {
                NSLog(@"Unable to redirect stdout to '%s'\n", getenv("STDOUT"));
            }
        } else {
            NSLog(@"Unknown environment variable STDOUT so assuming stdout\n");
        }
#endif 
```

# matlab - 在 MATLAB 中，如果脚本只执行文件 i/o 并且不返回任何内容，那么函数头是什么样的？

> ID：13336485
> 
> 赞同：0
> 
> 时间：2012-11-11T23:13:45.050
> 
> 标签：matlab

我总是返回一个虚拟变量只是为了让它工作，但这不是很优雅。省略返回值是不可能的，即

```
function = blah() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:20:47.743

只是

```
function blah() 
```

足够的

# html - HTML 表单必填字段

> ID：13336489
> 
> 赞同：2
> 
> 时间：2012-11-11T23:14:19.253
> 
> 标签：html, ruby-on-rails

我在 Rails 中有一个 HTML 表单，比如

```
<form name="input">
  Title: <input type="text" name="title"> 
  <input type="button" value="Submit">
</form> 
```

我想`title`成为必填字段（即用户不能将其留空。）如何验证用户是否填写了某些内容？我应该在客户端还是在服务器端进行？我的感觉是，在用户没有填写的情况下，在客户端进行操作可以节省与服务器的通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:15:18.460

你可以两者都做，但至少应该在服务器上做。请记住，任何客户端都可以轻松绕过任何客户端验证，这可能会导致您的代码崩溃。

您可以通过以下方式在模型中轻松完成：

```
validates_presence_of :title 
```

在客户端上，有多种方法可以做到这一点。最简单的可能是`required`在输入标签上使用 html5 属性。您还可以使用 javascript 库，如[validatedious](http://validatious.org)，您可以使用[此 Rails 插件](https://github.com/bcardarella/client_side_validations)根据您的服务器端验证自动生成客户端验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:17:06.060

如果您想真正安全，则无论如何都必须在服务器上进行。客户端验证只是为了方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:19:17.163

您应该在客户端上执行此操作，因为它对用户更方便（更好的用户体验）。

并且，在客户端验证失败的情况下在服务器上执行此操作（因为 JavaScript 已关闭，或者客户端代码中存在错误，或者浏览器不受支持，或者恶意破解者试图向您的服务器发送垃圾等）。 ）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T00:10:23.117

在客户端和服务器端进行验证..

客户端验证不安全，可以禁用..，

必须执行服务器端验证，不能绕过

# php - 根据其值设置复选框

> ID：13336497
> 
> 赞同：2
> 
> 时间：2012-11-11T23:15:54.340
> 
> 标签：php, javascript, json, checkbox

我目前正在开发一个 javascript 和 php 项目。我有一个具有相同 id`chkCategory`和 name的复选框数组`chkCategory[]`。然后我让 PHP 返回一些包含各种类别的 json，我想为 json 中的每个类别设置每个复选框选中的属性。唯一标识每个复选框的是值。即 json 可能有一个值，因此应该设置`MyCategory`具有该值的复选框。`MyCategory`

我知道您可以将`$("#myCheckBoxId").attr("checked", true)`其用于单个复选框，但不确定如何对具有特定值的特定复选框执行此操作。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:17:43.607

您可以在 JQuery 中使用标准 CSS 属性选择器。例如：

```
$("input[value=MyCategory]") 
```

将选择带有属性的输入标签`value=MyCategory`。如果有不同类型的`input`s 具有该值，您还可以选择 on `type=checkbox`：

```
$("input[type=checkbox][value=MyCategory]") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:18:42.997

如果你知道索引，你可以做...

```
$("input[name='MyCategory']").eq(n).prop("checked", true); 
```

如果你没有 jQuery...

```
document.getElementsByName("MyCategory")[n].checked = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:20:49.127

在纯 javascript 中，它看起来像这样：

```
​document.querySelector('input[value=checkboxValue]').checked = true;​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

`checkboxValue`你的复选框的值在哪里

# java - 用于测试同名不同包中的类的 classNotFoundException

> ID：13336501
> 
> 赞同：0
> 
> 时间：2012-11-11T23:16:14.130
> 
> 标签：java, classnotfoundexception

我所有的测试类都工作得很好，然后突然发生了以下错误。我将不胜感激任何帮助。谢谢！

![](../Images/9ed86a0aefbfdfda4885448b2273ca43.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:27:55.603

有时eclipse会这样做，如果你强制清理并重建它会解决问题。

# macos - Objective C - NSView 中的 XIB 加载

> ID：13336504
> 
> 赞同：2
> 
> 时间：2012-11-11T23:16:58.320
> 
> 标签：macos, load, xib, nsview

我是 Objective C 编码的新手，MVC 概念给我带来了一些痛苦。我的目标是开发一个 Mac 应用程序。我能够为主窗口创建一个 .xib。它开始很好。我的主 NSWindow 有它的主 NSView。在这个 NSView 中，我放了 3 个子视图（使用 Interface Builder）。当我单击放置在第一个子视图中的按钮时，我想要更改第二个子视图的内容（通过从另一个名为 SubWindow1.xib 的 XIB 文件加载内容）。

我能够捕捉到点击并尝试了一些“xib 加载”代码，但它不起作用（内容从未出现在我的第二个子视图中）。

我所做的是：

*   把 NSButton （在第一个子视图上）
*   在 Interface Builder 上放置一个 NSObject（类重命名为 CtMainWindow，Controler 为“Ct”）
*   链接 IBAction (changeToSubWindow1) 和 IBOutlet (vSubView2 这是我的第二个子视图)
*   创建 CtMainWindow 类，创建 VwSubWindow1 类（扩展 NSView）

在 changeToSubWindow1() 中，我写道：

```
VwSubWindow1 * vProfile = [[VwSubWindow1 alloc] initWithFrame:vSubView2.bounds];
[vProfile loadXib];
[vProfile.superview addSubview:vProfile]; 
```

loadXib() 函数执行以下操作：

```
NSNib * nib = [[NSNib alloc] initWithNibNamed:[self @"SubWindow1"] bundle:nil];  //@"SubWindow1" is the name of the expected loaded xib without .xib extention
[nib instantiateWithOwner:self topLevelObjects:nil]; 
```

瞧。我希望在视图中加载子 xib，并将该视图放在我的第二个子视图中，它会出现。

我还尝试仅将以下代码放入 changeToSubWindow1()

```
VwSubWindow1 * vProfile = [[VwSubWindow1 alloc] initWithFrame:vSubView2.bounds];
[vProfile loadSubWindow]; 
```

loadSubWindow() 函数执行以下操作：

```
[NSBundle loadNibNamed:@"SubWindow1" owner:self]; 
```

没有更多的成功。

我已经从 stackoverflow 中阅读了很多线程并尝试了很多解决方案，但没有一个对我有用。

谁能给我我需要的提示，以便在子视图中加载和显示 Xib？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T01:24:07.630

你可以试试这个方法

您可以放置​​ 3 个 xib 文件和 3 个窗口。连接每个窗口

```
self.packages = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
[self.window1.contentView addSubview:self.vc.view];
self.packages.view.frame = ((NSView*)self.window1.contentView).bounds;
[window1 makeKeyAndOrderFront:NSApp]; 
```

# ubuntu - 这是 g++ 4.7.2 中 cout 和 getline 的错误吗？

> ID：13336523
> 
> 赞同：2
> 
> 时间：2012-11-11T23:18:48.167
> 
> 标签：ubuntu, g++, cout, getline

**2012/11/13 更新：** 我发现我的问题已经被问到了。这是处理不同行尾文本文件的一个很好的解决方案： [Getting std :: ifstream to handle LF, CR, and CRLF?](https://stackoverflow.com/questions/6089231/getting-std-ifstream-to-handle-lf-cr-and-crlf)

是否有可能为 libstdc++ 做出贡献？如何？

* * *

2012/11/11

我发现cout有问题。
如果 getline() 返回了两个字符串，
则第二个字符串将覆盖输出中的第一个字符串。

这是示例代码：

```
#include<iostream>
#include<fstream>
using namespace std;

int main()
{
    //normal code
    cout << "Normal result:" << endl;
    string str1 = "hello";
    cout << str1;
    str1 = "123";
    cout << str1;

    cout << endl;

    //broken code
    cout << "Bug?" << endl;
    ifstream fin;
    fin.open("test.dat");

    string str;

    getline(fin, str);
    cout << str;

    getline(fin, str);
    cout << str;

    fin.close();
    return 0;
} 
```

这是输入文件（test.dat）：

```
hello
123 
```

输出将是：

```
Normal result:
hello123
Bug?
123lo 
```

我使用的是 ubuntu 12.10 64 位，
编译器的版本是 g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2。
有什么建议吗？有没有人告诉我在哪里提交错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:55:46.830

比 libstdc++ 中的错误（可能会出现，以及 gcc 中的错误，但现在很少见），输入文件中的行终止不正确 - 可能它使用的是 DOS/Windows`CR+LF`行结尾，这 - 作为`getline()`丢弃 LF - 导致第二个字符串覆盖第一个字符串。如果您通过某种十六进制转储程序运行程序的输出，您可以很容易地看到这一点，例如`xxd`.

`\r`在您阅读的字符串的末尾检查（顺便说一句，MacOS 到版本 9 仅将其用作 EOL 标记），修复您的输入，或在打印时适当地在输出中添加换行符。

# php - PHP正则表达式在字符串中查找值

> ID：13336527
> 
> 赞同：0
> 
> 时间：2012-11-11T23:19:10.647
> 
> 标签：php, regex, string-matching

好的，因为我从来没有真正掌握 PHP 中的正则表达式，如果有人可以链接到一篇可以理解的文章，那就太棒了......

在这种情况下，我想在字符串中找到一个值。

例如

```
$string = "blah blah blha lorem ipsum [get_this_value=10] more lorem ipsum"; 
```

我想要一个返回“10”的函数。如果它存储在数组中，并且如果有多个我希望它们在数组中，该函数可以检索其中的许多，那将是可爱的。

```
$string = "blah blah blha lorem ipsum [get_this_value=10] more lorem ipsum [get_this_value=9] etc etc"; 
```

将返回 array(10, 9) 等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:34:18.377

首先，您应该了解正则表达式。我强烈推荐[这个教程](http://www.regular-expressions.info/tutorial.html)。

[然后您可以在PHP 的文档](http://php.net/manual/en/reference.pcre.pattern.syntax.php)中阅读一些 PHP 特定的正则表达式问题。

但是为了让你开始，这将解决你的问题：

```
preg_match_all("/\[[^\]=]*=(\d+)\]/", $string, $matches); 
```

现在`$matches[1]`将是您想要的数组。请注意，这不依赖于特定的字符串`get_this_value`。

为了您通过链接页面实际自学一些正则表达式，我不会详细解释这个正则表达式，而只是告诉您我使用过的概念。未转义的方括号`[...]`标记一个**字符类**。在这种情况下（由于`^`）一个**否定**的。`\d`是一个**内置的字符类**。`+`是一个**重复量词**。括号`(...)`标记一个**捕获组**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:22:19.653

```
<?php
$string = "blah blah blha lorem ipsum [get_this_value=10] more lorem [get_this_value=13] ipsum";

preg_match_all("~\[get_this_value=(\d+)\]~i", $string, $matches);
print_r($matches);
/*

Array
(
    [0] => Array
        (
            [0] => [get_this_value=10]
            [1] => [get_this_value=13]
        )

    [1] => Array
        (
            [0] => 10
            [1] => 13
        )

)
*/ 
```

# jquery - jquery 单击时更改样式（上下文=引导程序）

> ID：13336532
> 
> 赞同：0
> 
> 时间：2012-11-11T23:19:23.823
> 
> 标签：jquery, css, twitter-bootstrap

所以我有这个文本字段太大而无法显示，但你想要一个按钮来显示其余部分：

```
<div class="span4" >
    some description..
    <div class="hidden-text" style="display:none">
        rest of description<br/>
    </div>
    <a href="#" class="btn" id="readmore"><i class="icon-chevron-up"></i> Read more</a>
    <script>
    $("#readmore").click(function(){
        $('#hidden-text').attr('style', '');
    });
    </script>
</div> 
```

为什么这不起作用，应该如何做？

编辑：

感谢演示，不幸的是我无法复制它

```
<div class="span4" >
    some description..
    <style>
    .hidden-text {
        display:none;
    }​
    </style>
    <p class="hidden-text">rest of description<br/></p>
    <br/><br/>
    <a href="#" class="btn" id="readmore"><i class="icon-chevron-down"></i> Read more</a>
    <script>
    $(document).ready(function(){
        $('.readmore').on('click', function(){
            $('.hidden-text').slideDown('slow');
            });
    });​
    </script>
</div> 
```

我看不出与演示有什么不同...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:20:49.787

而不是做

```
$('#hidden-text').attr('style', ''); 
```

要删除`display:none`，只需执行

```
$('#hidden-text').show() 
```

或者，如果你想让它向下滑动，你甚至可以这样做

```
$('#hidden-text').slideDown(); 
```

参考：

[jQuery .show()](http://api.jquery.com/show/)
[jQuery .slideDown()](http://api.jquery.com/slideDown/)

[**演示**](http://jsfiddle.net/FP3kj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:39:59.270

确保您在页面上引用了 jQuery。

您的代码无法正常工作，因为您试图从 id 为 hidden-text 的项目中删除样式，但您的文本具有隐藏文本的 CLASS。你要这个：

```
<div class="span4" >
some description..
<div class="hidden-text" style="display:none">
    rest of description<br/>
</div>
<a href="#" class="btn" id="readmore"><i class="icon-chevron-up"></i> Read more</a>
<script>
$("#readmore").click(function(){
    $('.hidden-text').attr('style', '');
});
</script>
</div> 
```

注意 . 在你有#的属性行中，老实说，这个节目是一个更好的解决方案

```
$('.hidden-text').show(); 
```

# javascript - 文本框修改

> ID：13336533
> 
> 赞同：-2
> 
> 时间：2012-11-11T23:19:38.437
> 
> 标签：javascript, html, css

我之前发布了一个问题，由于某种原因，这不会让我发表评论，所以我想我会再次发布。我的网站是[http://www.spencedesign.netau.net/singaporehomemenu.html](http://www.spencedesign.netau.net/singaporehomemenu.html). 我有两个问题，我不知道如何解决。首先，最初没有 javascript，我的实际菜单不是以前在屏幕上显示单词的按钮，而是在框的底部，框在它们上方。我不知道 javascript 是如何搞砸的，但不知何故，我尝试在所有可以使用的地方使用边距和填充，但没有任何效果。我的另一个问题是，在打开页面时，我希望隐藏菜单，直到您单击它，我也不知道如何解决这个问题。对不起，如果这是一个愚蠢的问题，我只学了几个星期的 html 和 css，我对 javascript 一无所知。谢谢！

已编辑的问题请帮助：抱歉没有澄清。以前的盒子看起来像这样（除了像网站上的另一个一样格式化）[1](http://i.stack.imgur.com/LSnzV.png)。看到链接在底部，菜单框的顶部与菜单按钮的顶部对齐。但是，正如您所看到的，实际的单词在正确的位置，但框的背景向下移动，这不仅仅是一些简单的填充或边距错误。我修复了它，但它不是一个熟练的修复。我求助于使用绝对位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:24:30.107

要最初隐藏菜单，只需给它 CSS 属性`display: none`。

```
<div id="menu" style="display: none;">...</div> 
```

# java - 如何从虚拟数字键盘中获取小数点？

> ID：13336534
> 
> 赞同：0
> 
> 时间：2012-11-11T23:19:40.787
> 
> 标签：java, swing, jbutton, decimal-point, numpad

我正在尝试通过单击 GUI 按钮来显示小数点。我使用下面的方法，它适用于数字但不适用于小数点。任何建议都会很棒。谢谢

```
private void displayWeightedquantity(ActionEvent event){
    JButton currentButton = null;
    JButton[] numberButtonsarray = {bnDecimal,bnZero,bnOne, bnTwo, bnThree, bnFour, bnFive,bnSix,bnSeven,
                                    bnEight,bnNine};

    currentButton = (JButton)event.getSource();  
    for (int i = 0; i <numberButtonsarray.length; i++){
         if (currentButton == numberButtonsarray[i]){
             lbDisplayitemQty.setText(lbDisplayitemQty.getText() + currentButton.getText());  
             break;
             }
        } 
   } 
```

我的虚拟数字键盘：

![在此处输入图像描述](../Images/026b4172cb264824b7e20730ed5a04eb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:42:41.407

我怀疑问题出在您的代码中的其他位置。

我设置的测试可以找到。

您需要提供一个显示问题的功能示例，而不仅仅是代码片段。

另外，确保十进制按钮附加了它的动作监听器

# compiler-construction - 图形着色寄存器分配器

> ID：13336544
> 
> 赞同：4
> 
> 时间：2012-11-11T23:21:10.103
> 
> 标签：compiler-construction, compiler-optimization, register-allocation

对于我的编译器课程，我正在为 MIPS 架构构建一个基于图形着色的寄存器分配器。对于我的实施，我正在遵循 Muchnick 的处理方法。

Muchnick 对如何处理这些分配器中的函数参数有点模糊。

我做了一些假设，并认为我会澄清相同的。

1.  有这个步骤可以从中级 IR 转换为低级 IR。尚未处理嵌套函数调用。我的想法是从右到左扫描函数调用，并为最里面的向外调用设置 IR。通过这种方式，我可以使用 MIPS 调用约定，将前几个参数分配给参数寄存器，其余的以最少的溢出量（只有 1 个）堆栈。
2.  书中的寄存器合并处理对我来说并不直观，因为它没有解决如何处理将函数参数移动到固定参数寄存器的 LIR 代码。经过深思熟虑，我得出的结论是，我不应该为参数传递动作进行寄存器合并。

非常感谢对这些假设的反馈/想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:23:04.147

我认为您不想在寄存器分配之前为参数传递从虚拟寄存器移动到关于函数调用实际参数的参数寄存器进行寄存器合并（或者，对于函数调用，在函数入口处复制的形式参数反之亦然）。

但是，当您看到这样的移动时，您可以标记分配器的提示，即移动目标参数寄存器是首选。当首选选项没有适当干扰*时，您可以将其用于分配，结果分配后您将拥有一个`move rx,rx`，您可以在以后轻松消除它。

（当然，你可能会发现不止一个这样的提示，那么你就选择最适用的一个，它们中的大多数（通常是全部）都会被排除在其他干扰之外：同一个寄存器传递给多个调用；循环调用， ETC..）

(* 适当地表示在虚拟寄存器的生命周期内不会使用或丢弃参数（真实）寄存器，例如通过嵌套函数调用或其他方式。（识别这一点就像检查虚拟寄存器的干扰一样简单登记。））

# android - 我如何通过单击按钮在android中随机更改按钮的位置

> ID：13336547
> 
> 赞同：-1
> 
> 时间：2012-11-11T23:21:36.507
> 
> 标签：android, button, random, position, location

它在这里给了我一个错误，尽管 setX(int) 是按钮类型，但它没有定义。

```
public class TouchMe extends Activity implements View.OnClickListener {

    Button btn;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.tuchme);

            btn = (Button) findViewById(R.id.btn);

            btn.setOnClickListener(this);

    }

    public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()) {
            case (R.id.btn): {
                    Random r = new Random();
                    int x = r.nextInt(480 - buttonWidth);
                    int y = r.nextInt(800 - buttonHeight);

                    btn.setX(x);   // give me error here that setX(int) is not defined      
                    btn.setY(y);   // is button type.

            }

            } 
```

这里给我的错误是 setX(int) is not defined is button type。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:46:50.047

[View.setX()](https://developer.android.com/reference/android/view/View.html#setX%28float%29)和 View.setY() 仅适用于 API 级别 11（Android 3.0 Honeycomb）。如果您想使用这些方法，您必须相应地设置[minSdkVersion 和 targetSdkVersion并针对 API 级别 11 进行编译。](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# python - 使用 rauth 连接到 LinkedIn API 时遇到问题

> ID：13336549
> 
> 赞同：0
> 
> 时间：2012-11-11T23:21:54.523
> 
> 标签：python, oauth, linkedin, rauth

我正在尝试从`rauth`github 上的 repo运行示例代码[https://github.com/litl/rauth/blob/master/examples/linkedin-updates.py](https://github.com/litl/rauth/blob/master/examples/linkedin-updates.py)以连接到 LinkedIn API，但我不断收到 HTTP 400错误。

有问题的具体行是`linkedin.get_request_token()`.

该示例使用`HTTP GET`但 LinkedIn 文档使用`HTTP POST`.

如果有人可以帮助我使用`rauth`或`requests`连接到 LinkedIn，那就太棒了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:46:58.960

您能否看一下修改后的示例，看看它是否适合您？这是给你[的链接](https://github.com/litl/rauth/blob/c6447ddb5427246d58e6c2077bdc71404b4d1def/examples/linkedin-updates-cli.py)。请注意，这需要将 rauth 更新到 0.5.x 并将 Requests 更新到 1.1.0。

这个例子似乎从这里开始起作用。如果您遇到任何其他并发症，请告诉我。也可以随时直接在 GitHub 上打开问题。我们试图尽快做出回应。

# php - 抓取 SELECT 值 Codeigniter 的值

> ID：13336550
> 
> 赞同：0
> 
> 时间：2012-11-11T23:22:04.197
> 
> 标签：php, codeigniter, select, return-value

```
$this->db->select('secretsalt,session_id'); 
$getSaltAndSessionIDFromDb = $this->db->get_where('Client', array('email' =>$ClientEmail)); // generated via registration
    $result = $getSaltAndSessionIDFromDb->result_array();
    $saltFromDb = $result[0]['secretsalt'];
    $saltedPasswordToVerify = $ClientPassword.$saltFromDb; // combine inputted pass + salt from the db
$isValidUser = $this->db->get_where('Client',array('email'=>$ClientEmail,'pass'=>$saltedPasswordToVerify)); // compare inputted pass + salt vs db entry.

// If [1] row found, login
if($isValidUser->num_rows() == 1 ){
    // set the "Logged in" vars:
    $loggedInValue = 1;
    $this->db->set('loggedIn',$loggedInValue);  // Set valid row loggedIn value = 1.
    // Validate using the below model (loginfunctionmodel) that there is:
        // 1\. valid session_id
        // 2\. loggedIn=1
    $this->load->model('pages/loginfunctionmodel');
    $this->loginfunctionmodel->check_if_loggedin();
}
else{
    // nothing at the moment
} 
```

我想在上面列出`secretsalt`的代码中获取并使用它的值。`{{HERE}}`我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:35:28.793

```
if($getSaltAndSessionIDFromDb->num_rows() ==1)
    $result = $getSaltAndSessionIDFromDb->result_array();
    $salt = $result[0]['secretsalt'];
$saltedPasswordToVerify = $ClientPassword.$salt; 
```

那应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:39:14.123

```
$rs = $this->db->select('secretsalt,session_id')->from('tablename')->get();
$result = $rs->result_object(); 
```

然后使用结果。

```
$saltedPasswordToVerify = $ClientPassword.$result->secretsalt; 
```

如果我理解了您的问题，那应该可以。

# scala - scala中复杂模式匹配的抽象复杂性

> ID：13336551
> 
> 赞同：2
> 
> 时间：2012-11-11T23:22:06.520
> 
> 标签：scala, pattern-matching

如果我对（相对）复杂的案例类进行大量模式匹配，但大多数时候我只对其中的一两个字段感兴趣。有没有办法抽象出其他领域（也许通过包装类？）？这是我试图简化的事物类型的示例：

```
def receive = {
  case HttpRequest(POST, "foo", _, HttpBody(_, body), _) => // action
  case HttpRequest(GET, "bar", _, _, _) => // action
} 
```

我只对请求类型、url 和有时是 body 真正感兴趣，所以我理想情况下希望将模式匹配定义为`case Request(POST, "foo", body)`或类似。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T01:29:23.120

只需制作自己的`Request`提取器。这是一个简化的示例：

```
case class Complex(a: String, b: Int, c: String)
object Simple { 
  def unapply(c: Complex): Option[(String, Int)] = Some(c.a, c.b) 
}

Complex("B", 2, "x") match {
  case Simple("A", i) => println("found A, " + i)
  case Simple("B", i) => println("found B, " + i)
}

// prints "found B, 2" 
```

# c# - 如何在 ServiceStack 自托管中设置静态文件的根路径

> ID：13336555
> 
> 赞同：3
> 
> 时间：2012-11-11T23:22:21.237
> 
> 标签：c#, .net, web, servicestack

所有 ServiceStack 自托管示例都从与控制台或服务可执行程序集相同的目录中提供静态文件。

有没有办法将根路径更改为其他路径？

当我`Config.WebHostPhysicalPath`从内部设置到不同的路径时`AppHostHttpListenerBase.Configure`，我的 html 文件必须存在于两个地方，ServiceStack 才能返回任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:40:51.787

我想知道同样的事情，所以我深入研究了 SS 源代码，发现了一个阻止 SS`Config.WebHostPhysicalPath`处理静态文件的问题。你可以在这里阅读：[https ://github.com/ServiceStack/ServiceStack/issues/352](https://github.com/ServiceStack/ServiceStack/issues/352)

**2012-12-03 更新**

我对这个问题的拉取请求刚刚合并到 ServiceStack/master 中。 [https://github.com/ServiceStack/ServiceStack/pull/357](https://github.com/ServiceStack/ServiceStack/pull/357)

# python - 查找美国各县的 GPS 坐标

> ID：13336558
> 
> 赞同：3
> 
> 时间：2012-11-11T23:23:06.883
> 
> 标签：python, actionscript-3, parsing, gps

我目前正在做一个小项目，试图根据每个县的人口密度来可视化 2012 年的选举结果。我正在用 Python 解析相关数据，然后我的一个同事正在使用 AS3 来可视化数据。

曾经只是一个可缩放的条形图，很快就会成为美国地图上的可视化。查找每个县的 GPS 坐标数据将非常有用。我找到了 TIGER 数据和 shapefile，但我认为必须收集一些数据来简化 GPS 坐标的位置。

有谁知道我在哪里可以找到这些数据？可下载或通过免费使用的 API 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T21:01:36.190

美国人口普查局拥有大量 API 和公开数据：

[http://www.census.gov/geo/maps-data/index.html](http://www.census.gov/geo/maps-data/index.html)

[http://www.census.gov/developers/](http://www.census.gov/developers/)

[http://www.census.gov/developers/data/](http://www.census.gov/developers/data/)

我不确定他们是否提供纬度和经度，但这是一个很好的起点。

# angularjs - 如何为复合表单字段构建 AngularJS 指令？

> ID：13336559
> 
> 赞同：0
> 
> 时间：2012-11-11T23:23:13.387
> 
> 标签：angularjs

我想将 AngularJS 用于一些管理表单。绑定视图和模型非常容易。我也喜欢如何添加验证。但是当我试图通过引入指令来防止冗余代码时，我遇到了一个边界。你能帮我解决这个问题，我应该如何用 AngularJS 构建代码：

在我的表单中，我有一些复合字段。例如，您可以在下拉列表中选择一个国家。在该下拉列表旁边，您可以在文本字段中输入城市。当您选择另一个国家/地区时，应清除城市名称。这很容易。现在我想在城市文本字段中自动完成。当您输入几个字符时，您会获得所选国家/地区城市的建议。自动完成小部件是这里的小问题，为了简单起见，我会为此使用 JQueryUI。

我已经设法实现了简单的指令。我的问题是：

1.) 我喜欢 NgModelController 中的验证功能。我可以在我的指令中以某种方式重用它吗？如果我可以在我的指令中添加一个“必需”属性，那就太好了。如果已设置，则所有复合字段都是必需的。2.) 我如何将指令与周围的模型连接起来？例如，我想在管理表单中编辑客户，我的“地址”指令应该显示和编辑客户地址。3.) 我如何将指令与我的城市查询服务联系起来？我需要为我的服务提供国家和第一次输入的城市字母。结果是可以在自动完成小部件中显示的城市名称列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:18:19.030

这是向您展示如何设置 require 属性的[plunker 。](http://plnkr.co/edit/KS8NlA?p=preview)

主要思想是`required="{{isRequired}}"`在模板中具有`isRequired`作为指令的属性。

```
template: '<input name="city" type="text" ng-model="city" placeholder="City" required="{{isRequired}}">' 
```

# visual-studio-2010 - 如何使用 TFS2010 与其他开发人员共享引用的程序集

> ID：13336561
> 
> 赞同：1
> 
> 时间：2012-11-11T23:23:36.160
> 
> 标签：visual-studio-2010

我正在与其他 4 位开发人员一起开发 VS2010 项目，当我们第一次将某人连接到该项目或当某人添加新的 dll 文件时，我们遇到了参考问题。当有人单击“获取最新版本”和“签入”时，我们如何从每个开发人员机器上的 bin 文件夹中获取参考文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:28:13.323

使用[Nuget](http://nuget.org/)（首选）或在解决方案中为引用的 DLL（第三方或其他方式）创建一个“Lib”文件夹（并将其添加到源代码管理中）。

> NuGet 是一个 Visual Studio 扩展，可以轻松地在 Visual Studio 中安装和更新第三方库和工具。

*   [使用 Nuget 包](http://www.developerfusion.com/article/131917/using-nuget-packages/)
*   [管理 NuGet 包](http://docs.nuget.org/docs/start-here/Managing-NuGet-Packages-Using-The-Dialog)

有一个官方的实体框架 Nuget 包（以及许多其他包）。

# javascript - 使用 embjer.js 将视图附加到存在的元素

> ID：13336562
> 
> 赞同：0
> 
> 时间：2012-11-11T23:23:41.980
> 
> 标签：javascript, ember.js

在不使用任何模板引擎的情况下将现有 html 元素附加到 Ember.js 视图的实现是什么。? 例如在 Backbone.js 我应该给视图 el 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T21:32:45.657

鉴于您可以这样做：

```
didInsertElement: function () {
    var domNode = this.$().get(0);

    $(domNode).append('//your html element goes');
} 
```

# mysql - 复杂的sql查询（GROUP BY）

> ID：13336563
> 
> 赞同：0
> 
> 时间：2012-11-11T23:23:47.370
> 
> 标签：mysql, sql

我需要一些帮助来构建查询。

这是我需要的：

我有一个名为**data**的表：

```
 ID| PRODUCT | VALUE |COUNTRY|  DEVICE | SYSTEM 
-----+---------+-------+-------+---------+--------
48   |    p1   |  0.4  |   US  |  dev1   | system1   
47   |    p2   |  0.67 |   IT  |  dev2   | system2   
46   |    p3   |  1.2  |   GB  |  dev3   | system3          
45   |    p1   |  0.9  |   ES  |  dev4   | system4   
44   |    p1   |  0.6  |   ES  |  dev4   | system1 
```

我需要展示哪些产品产生了最多的收入，以及哪个国家、设备和系统贡献最大。

**例如：我从表中得到的结果是：

```
 PRODUCT | TOTAL COST |COUNTRY|  DEVICE | SYSTEM 
  -------+------------+-------+---------+--------
    p1   |     1.9    |   ES  |  dev4   | system1   
    p2   |     0.67   |   IT  |  dev2   | system2   
    p3   |     1.2    |   GB  |  dev3   | system3 
```

排名靠前的国家是 ES，因为 ES 贡献了 0.9 + 0.6 = 1.5 > 0.4（美国的贡献）。

顶级设备和顶级系统的逻辑相同。**

我想对于总收入和产品来说，这样的事情会做：

```
SELECT SUM(value) as total_revenue,product FROM data GROUP BY product 
```

但是如何添加国家、设备和系统？

这在单个查询中是否可行，如果不是最好的方法（性能方面）是什么？

非常感谢您的帮助。

**编辑** 我编辑了示例表以更好地解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:45:59.093

你是对的......这不仅仅是一个简单的查询......而是将 3 个查询包含在一个结果中。

我已经在[SQL Fiddle 上发布了我的示例...](http://sqlfiddle.com/#!2/86bfd/9)

第一个查询——最里面。您需要根据每个产品/国家/地区获得所有收入，并按产品对其进行排序，然后按总收入递减，以使每个产品的收入最高。

下一个查询（我已经实现了使用 MySQL @variable 的地方）。由于第一个结果订单已经按照产品和收入排名的顺序排列，所以每当产品从“@LastProd”是什么变化时，我都会将排名设置为 1……这将为产品 1 创建 ES = Rank #1，然后 US = 产品 1 的排名 #2，然后继续其他“产品”。

最后的最外层查询重新连接回原始数据表，但会获取包含相关产品销售的所有设备和系统的列表，但仅限于产品排名为 #1 的位置。

```
select
      pqRank.product,
      pqRank.country,
      pqRank.revenue,
      group_concat( distinct d2.device ) as PartDevices,
      group_concat( distinct d2.system ) as PartSystems
   from
      ( select
              pq.product,
              pq.country,
              pq.revenue,
              @RevenueRank := if( @LastProd = pq.product, @RevenueRank +1, 1 ) as ProdRank,
              @LastProd := pq.product
           from
              ( select 
                      d.product,
                      d.country,
                      sum( d.value ) as Revenue
                   from
                      data d
                   group by 
                      d.product,
                      d.country
                   order by
                      d.product,
                      Revenue desc ) pq,
              ( select @RevenueRank := 0,
                       @LastProd := ' ') as sqlvars
      ) pqRank
         JOIN data d2
            on pqRank.product = d2.product
           and pqRank.country = d2.country
   where
      pqRank.ProdRank = 1
   group by
      pqRank.product,
      pqRank.country 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:29:09.450

在单独的查询中执行此操作：

```
SELECT   product,
         SUM(value) AS amount
FROM     data
GROUP BY country    -- change to device, system, etc. as required
ORDER BY amount DESC
LIMIT    1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:26:23.440

你可以那样做

```
CREATE TABLE data 
(
id int auto_increment primary key, 
product varchar(20), 
country varchar(4),
device varchar(20),
system varchar(20),
value decimal(5,2)
);

INSERT INTO data (product, country, device, system, value)
VALUES 
('p1', 'US', 'dev1', 'system1', 0.4), 
('p2', 'IT', 'dev2', 'system2', 0.67), 
('p1', 'IT', 'dev1', 'system2', 0.23);

select 'p' as grouping_type, product, sum(value) as sumval
from data
group by product
union all
select 'c' as grouping_type, country, sum(value) as sumval
from data
group by country
union all
select 'd' as grouping_type, device, sum(value) as sumval
from data
group by device
union all
select 's' as grouping_type, system, sum(value) as sumval
from data
group by system
order by grouping_type, sumval 
```

它很难看，我不会使用它，但它应该可以工作。

# java - 在按钮单击时显示/隐藏 ImageView

> ID：13336570
> 
> 赞同：0
> 
> 时间：2012-11-11T23:25:12.760
> 
> 标签：java, android, button, imageview

我有一个完全在 java 中创建的 RelativeLayout，而不是使用 xml 布局。如果我的屏幕左侧有几个按钮。我想单击一个按钮并在按钮旁边显示我的 res/drawable 中的默认图像，并使其在第二次单击时再次消失。我尝试过的是切换可见性，但我的 onClick() 引发了一个致命的异常，NullPointer 异常。

到目前为止，这是我的代码。当我设置*picview.setVisibility(View.INVISIBLE); 时，硬编码图像显示正确；*用手。我在 onClick() 做错了什么？

```
 private ImageView picview;

        //*snip* loads of other code

    //Show Image Button
    ImageButton show_pic = new ImageButton(this);
    show_pic.setBackgroundColor(Color.WHITE);
    show_pic.setOnClickListener(new OnClickListener()
    {

        @Override
        public void onClick(View v) {
            if(picview.getVisibility() == View.INVISIBLE)
             {
             picview.setVisibility(View.VISIBLE);
             } 
            else if (picview.getVisibility() == View.VISIBLE)
             {
             picview.setVisibility(View.INVISIBLE);
             }          
            }

    });

    params = new RelativeLayout.LayoutParams(40, 40);
    params.topMargin = 10;
    params.leftMargin = 10;
    params.addRule(RelativeLayout.BELOW, button2_id);
    rl.addView(show_pic, params);

    //Imageview loaded from drawable
    ImageView picview = new ImageView(this);
    params = new RelativeLayout.LayoutParams(200, 400);
    params.topMargin = 0;
    params.leftMargin = 30;
    params.addRule(RelativeLayout.RIGHT_OF, button2_id);
    picview.setImageResource(R.drawable.my_image);
    picview.setVisibility(View.INVISIBLE);
    rl.addView(picview, params);

    this.setContentView(rl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:29:38.920

您不小心创建了`picview`. 缩短这一行：

```
ImageView picview = new ImageView(this); 
```

到：

```
picview = new ImageView(this); 
```

（您的字段变量`private ImageView picview;`从未更改过`null`，因此当您单击 Button 时，您会看到 NullPointerException...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T06:01:58.067

将 show_pic.setOnClickListener(new OnClickListener() 更改为

show_pic.setOnClickListener(new View.OnClickListener()

# ruby-on-rails - 通过控制器写入新文件

> ID：13336573
> 
> 赞同：3
> 
> 时间：2012-11-11T23:25:50.753
> 
> 标签：ruby-on-rails

在 Rails 控制器中，我想在处创建一个新文件`public/my_file.txt`并将字符串`This file is my_file.txt`写入文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:29:14.970

```
File.open([full path to your file], 'w') { |file| file.write("your text") } 
```

通过 ruby​​ 的[文件](http://ruby-doc.org/core/classes/File.html)类获得更多信息

# sql - 您将如何使用 SQL Server 2005 执行此操作？

> ID：13336575
> 
> 赞同：-1
> 
> 时间：2012-11-11T23:26:45.923
> 
> 标签：sql, sql-server

假设我有一个`table1`具有以下结构的表：

```
 id date v1   v2  v3  v4 ... vn
  ------------------------------
  1   03   Y    N  89  77 ... x
  1   04   N    N  9   7  ... i
  1   05   N    Y  6   90 ... j
  1   06   N    Y  9   34 ... i
  1   07   N    Y  0   88 ... i
  2   03   N    N  9   77 ... f
  2   04   Y    Y  90  7  ... y
  2   05   Y    N  6   90 ... v
  2   06   N    Y  9   34 ... i
  2   07   N    N  10  88 ... i 
```

如您所见，该表的每个 id 有五行。我想创建两个新列：

-summarystory:= 该变量是针对日期介于`05`和之间的那些行计算的，`07`并且是最后三行的变量 v3 的总和。

让我更好地解释一下：前两行（`date`03 和 04）必须有`NULL`值，但有的行`date=05`是最后三个`v3`值的总和，即`89+9+6=104`. 同样，具有的行`date=06`必须等于`9+6+9=24`。这必须为每个 id 和每个日期完成。

这是期望的结果：

```
 id  date v3  summarystory
  -------------------------
  1    03  89     NULL
  1    04  9      NULL
  1    05  6      104
  1    06  9      24
  1    07  0      15
  2    03  9      NULL
  2    04  90     NULL
  2    05  6      105
  2    06  9      105
  2    07  10     25 
```

*   VcountYN:= 每行的 Y 数（仅基于变量`v1`和`v2`）。所以。例如，对于第一行，它将是 VcountYN=1。必须为所有行计算此变量。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:50:50.913

以下是如何进行计算。将其转换为新表作为练习：

```
-- SQL 2012 version
Select
  t.id,
  t.[date],
  Case When [Date] Between 5 And 7 Then 
    Sum(v3) over (
      partition by 
        id 
       order by 
         [date]
       rows between 
         2 preceding and current row
    ) Else Null End,
  Case When v1 = 'Y' Then 1 Else 0 End +
    Case When v2 = 'Y' Then 1 Else 0 End
From
  table1 t;

-- SQL 2005 version
Select
  t1.id,
  t1.[date],
  Case When t1.[date] Between 5 And 7 Then t1.v3 + IsNull(t2.v3, 0) + IsNull(t3.v3, 0) Else Null End,
  Case When t1.v1 = 'Y' Then 1 Else 0 End +
    Case When t1.v2 = 'Y' Then 1 Else 0 End
From
  table1 t1
    Left Outer Join
  table1 t2
    On t1.id = t2.id and t1.[date] = t2.[date] + 1
    Left Outer Join
  table1 t3
    On t2.id = t3.id and t2.[date] = t3.[date] + 1 
```

[http://sqlfiddle.com/#!6/a1c45/2](http://sqlfiddle.com/#!6/a1c45/2)

# python - 通过机器学习从网页中提取信息

> ID：13336576
> 
> 赞同：80
> 
> 时间：2012-11-11T23:27:23.267
> 
> 标签：python, machine-learning, html-parsing, web-scraping, extract

我想从Python 中**的网页中提取特定类型的信息。**让我们说邮政地址。它有数千种形式，但仍然可以以某种方式识别。由于形式众多，编写**正则表达式**甚至**语法**之类的东西并使用**解析器生成器**解析出来可能会非常困难。

所以我认为我应该走的路是**机器学习**。如果我理解得很好，我应该能够制作一个数据样本，我将在其中指出应该是什么结果，然后我可以从中学习如何自行识别结果。这就是我对机器学习的全部了解。也许我可以使用一些**自然语言**处理，但可能并不多，因为所有的库都主要使用英语，而捷克语需要这个。

问题：

1.  我可以通过机器学习轻松解决这个问题吗？这是一个好方法吗？
2.  有什么**简单的**例子可以让我开始吗？我是机器学习菜鸟，我需要一些实用的东西来开始；离我的问题越近越好；越简单越好。
3.  有很多用于机器学习的 Python 库。哪一个最适合我的问题？
4.  许多这样的库都没有非常易于使用的文档，因为它们来自科学环境。是否有任何好的资源（书籍、文章、快速入门）弥合差距，即专注于对机器学习一无所知的新手？我打开的每个文档都以我不理解的术语开头，例如*network*、*classification*、*datasets*等。

更新：

正如你们都提到的，我应该展示一段我试图从网络中获取的数据，这里有一个例子。我对电影*放映*时间感兴趣。它们看起来像这样（其中三个）：

```
<div class="Datum" rel="d_0">27\. června – středa, 20.00
</div><input class="Datum_cas" id="2012-06-27" readonly=""><a href="index.php?den=0" rel="0" class="Nazev">Zahájení letního kina 
</a><div style="display: block;" class="ajax_box d-0">
<span class="ajax_box Orig_nazev">zábava • hudba • film • letní bar
</span>
<span class="Tech_info">Svět podle Fagi
</span>
<span class="Popis">Facebooková  komiksová Fagi v podání divadla DNO. Divoké písně, co nezařadíte, ale slušně si na ně zařádíte. Slovní smyčky, co se na nich jde oběsit. Kabaret, improvizace, písně, humor, zběsilost i v srdci.<br>Koncert Tres Quatros Kvintet. Instrumentální muzika s pevným funkovým groovem, jazzovými standardy a neodmyslitelnými improvizacemi.
</span>
<input class="Datum_cas" id="ajax_0" type="text">
</div>

<div class="Datum" rel="d_1">27\. června – středa, 21.30
</div><input class="Datum_cas" id="2012-06-27" readonly=""><a href="index.php?den=1" rel="1" class="Nazev">Soul Kitchen
</a><div style="display: block;" class="ajax_box d-1">
<span class="ajax_box Orig_nazev">Soul Kitchen
</span>
<span class="Tech_info">Komedie, Německo, 2009, 99 min., čes. a angl. tit.
</span>
<span class="Rezie">REŽIE: Fatih Akin 
</span>
<span class="Hraji">HRAJÍ: Adam Bousdoukos, Moritz Bleibtreu, Birol Ünel, Wotan Wilke Möhring
</span>
<span class="Popis">Poslední film miláčka publika Fatiho Akina, je turbulentním vyznáním lásky multikulturnímu Hamburku. S humorem zde Akin vykresluje příběh Řeka žijícího v Německu, který z malého bufetu vytvoří originální restauraci, jež se brzy stane oblíbenou hudební scénou. "Soul Kitchen" je skvělá komedie o přátelství, lásce, rozchodu a boji o domov, který je třeba v dnešním nevypočitatelném světě chránit víc než kdykoliv předtím. Zvláštní cena poroty na festivalu v Benátkách
</span>
<input class="Datum_cas" id="ajax_1" type="text">
</div>

<div class="Datum" rel="d_2">28\. června – čtvrtek, 21:30
</div><input class="Datum_cas" id="2012-06-28" readonly=""><a href="index.php?den=2" rel="2" class="Nazev">Rodina je základ státu
</a><div style="display: block;" class="ajax_box d-2">
<span class="Tech_info">Drama, Česko, 2011, 103 min.
</span>
<span class="Rezie">REŽIE: Robert Sedláček
</span>
<span class="Hraji">HRAJÍ: Igor Chmela, Eva Vrbková, Martin Finger, Monika A. Fingerová, Simona Babčáková, Jiří Vyorálek, Jan Fišar, Jan Budař, Marek Taclík, Marek Daniel
</span>
<span class="Popis">Když vám hoří půda pod nohama, není nad rodinný výlet. Bývalý učitel dějepisu, který dosáhl vysokého manažerského postu ve významném finančním ústavu, si řadu let spokojeně žije společně se svou rodinou v luxusní vile na okraji Prahy. Bezstarostný život ale netrvá věčně a na povrch začnou vyplouvat machinace s penězi klientů týkající se celého vedení banky. Libor se následně ocitá pod dohledem policejních vyšetřovatelů, kteří mu začnou tvrdě šlapat na paty. Snaží se uniknout před hrozícím vězením a oddálit osvětlení celé situace své nic netušící manželce. Rozhodne se tak pro netradiční útěk, kdy pod záminkou společné dovolené odveze celou rodinu na jižní Moravu…  Rodinný výlet nebo zoufalý úprk před spravedlností? Igor Chmela, Eva Vrbková a Simona Babčáková v rodinném dramatu a neobyčejné road-movie inspirované skutečností.
</span> 
```

或者像这样：

```
<strong>POSEL&nbsp;&nbsp; 18.10.-22.10 v 18:30 </strong><br>Drama. ČR/90´. Režie: Vladimír Michálek Hrají: Matěj Hádek, Eva Leinbergerová, Jiří Vyorávek<br>Třicátník Petr miluje kolo a své vášni podřizuje celý svůj život. Neplánuje, neplatí účty, neřeší nic, co může<br>počkat  do zítra. Budování společného života s přételkyní je mu proti srsti  stejně jako dělat kariéru. Aby mohl jezdit na kole, raději pracuje jako  poslíček. Jeho život je neřízená střela, ve které neplatí žádná  pravidla. Ale problémy se na sebe na kupí a je stále těžší před nimi  ujet …&lt;br> <br>

<strong>VE STÍNU&nbsp; 18.10.-24.10\. ve 20:30 a 20.10.-22.10\. též v 16:15</strong><br>Krimi. ČR/98´. Režie: D.Vondříček Hrají: I.Trojan, S.Koch, S.Norisová, J.Štěpnička, M.Taclík<br>Kapitán  Hakl (Ivan Trojan) vyšetřuje krádež v klenotnictví. Z běžné vloupačky  se ale vlivem zákulisních intrik tajné policie začíná stávat politická  kauza. Z nařízení Státní bezpečnosti přebírá Haklovo vyšetřování major  Zenke (Sebastian Koch), policejní specialista z NDR, pod jehož vedením  se vyšetřování ubírá jiným směrem, než Haklovi napovídá instinkt  zkušeného kriminalisty. Na vlastní pěst pokračuje ve vyšetřování. Může  jediný spravedlivý obstát v boji s dobře propojenou sítí komunistické  policie?&nbsp; Protivník je silný a Hakl se brzy přesvědčuje, že věřit nelze  nikomu a ničemu. Každý má svůj stín minulosti, své slabé místo, které  dokáže z obětí udělat viníky a z viníků hrdiny. <br><br>

<strong>ASTERIX A OBELIX VE SLUŽBÁCH JEJÍHO VELIČENSTVA&nbsp; ve 3D&nbsp;&nbsp;&nbsp; 20.10.-21.10\. ve 13:45 </strong><br>Dobrodružná fantazy. Fr./124´. ČESKÝ DABING. Režie: Laurent Tirard<br>Hrají: Gérard Depardieu, Edouard Baer, Fabrice Luchini<br>Pod  vedením Julia Caesara napadly proslulé římské legie Británii. Jedné  malé vesničce se však daří statečně odolávat, ale každým dnem je slabší a  slabší. Britská královna proto vyslala svého věrného důstojníka  Anticlimaxe, aby vyhledal pomoc u Galů v druhé malinké vesničce ve  Francii vyhlášené svým důmyslným bojem proti Římanům… Když Anticlimax  popsal zoufalou situaci svých lidí, Galové mu darovali barel svého  kouzelného lektvaru a Astérix a Obélix jsou pověřeni doprovodit ho domů.  Jakmile dorazí do Británie, Anticlimax jim představí místní zvyky ve  vší parádě a všichni to pořádně roztočí! Vytočený Caesar se však  rozhodne naverbovat Normanďany, hrůzu nahánějící bojovníky Severu, aby  jednou provždy skoncovali s Brity. <br><br> 
```

或者它可以看起来像任何类似的东西。HTML 标记中没有特殊规则，顺序没有特殊规则等。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-18T20:41:18.423

首先，您的任务适合研究的**信息提取**领域。此任务主要有 2 个复杂程度：

*   从给定的 html 页面或具有固定模板的网站（如亚马逊）中提取。在这种情况下，最好的方法是查看页面的 HTML 代码并制作相应的 XPath 或 DOM 选择器以获取正确的信息。这种方法的缺点是它不能推广到新网站，因为你必须为每个网站一个一个地做。
*   创建一个模型，从一个域内的许多网站中提取相同的信息（假设网页设计师呈现相应属性的方式存在一些固有的规律性，如 zip 或 phone 或其他任何东西）。在这种情况下，您应该创建一些功能（使用 ML 方法并让 IE 算法“理解页面内容”）。最常见的特征是：DOM 路径、要提取的值（属性）的格式、布局（如粗体、斜体等）以及周围的上下文词。您标记一些值（根据域，您至少需要 100-300 页才能以某种合理的质量进行操作）。然后在标记的页面上训练模型。还有一种替代方法 - 以无监督的方式进行 IE（利用跨页面信息规律性的想法）。

总体而言，最具挑战性的部分将是使用 DOM 树并生成正确的特征。以正确的方式标记数据也是一项乏味的任务。对于 ML 模型 - 看看**CRF、2DCRF、semi-markov CRF**。

最后，在一般情况下，这是 IE 研究的前沿，而不是你可以在几个晚上完成的 hack。

ps 我也认为 NLTK 不会很有帮助 - 它是一个 NLP，而不是 Web-IE 库。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-12T00:09:12.083

tl;dr：这个问题*可能*可以使用 ML 解决，但如果您是该主题的新手，这并不简单

* * *

python 有很多机器学习库：

*   [Scikit-learn](https://scikit-learn.org/stable/)对于初学者来说是非常流行的通用用途，非常适合处理小型数据集的简单问题。
*   [Natural Language Toolkit](http://nltk.org/)实现了许多算法，其中许多与语言无关（例如，n-gram）
*   [Gensim](https://radimrehurek.com/gensim/)非常适合文本主题建模
*   [Opencv](http://docs.opencv.org/modules/ml/doc/ml.html)实现了一些常用的算法（但通常用于图像）
*   [Spacy](https://spacy.io/)和[Transformers](https://github.com/huggingface/transformers)实现了现代（最先进，截至 2020 年）文本 NLU（自然语言理解）技术，但需要更熟悉复杂的技术

通常你会选择一个适合你的问题和你想要使用的技术的库。

机器学习是一个**非常**广阔的领域。仅针对监督学习分类子问题，并且仅考虑“简单”分类器，有朴素贝叶斯、KNN、决策树、支持向量机、前馈神经网络……这个列表不胜枚举。这就是为什么，正如您所说，一般来说没有“快速入门”或机器学习教程。我的建议是，首先，**了解基本的 ML 术语**，其次，**了解一个子问题**（我建议在监督学习中进行分类），第三，**研究一个解决这个子问题的简单算法**（[KNN](https://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)依赖于高中水平的数学）。

特别是关于您的问题：您似乎想检测一个巨大的数据集（文本）中是否存在一段数据（邮政编码）。经典的分类算法需要一个相对较小[的特征向量](https://en.wikipedia.org/wiki/Feature_vector)。为此，您需要进行所谓的[降维](https://en.wikipedia.org/wiki/Dimensionality_reduction)操作：这意味着，隔离**看起来**像潜在邮政编码的部分。只有这样分类算法才会对其进行分类（例如，“邮政编码”或“非邮政编码”）。

因此，**在考虑使用 ML 解决此问题之前，您需要找到一种方法来隔离潜在匹配项**。正如您所说，如果您不使用或不能使用正则表达式或解析，这肯定需要自然语言处理。

NLU 中更高级的模型可能会解析您的整个文本，但它们可能需要非常大量的预分类数据，并且解释它们超出了本问题的范围。我之前提到的库是一个好的开始。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-28T06:33:33.273

据我所知，有两种方法可以使用机器学习方法来完成这项任务。

1.使用计算机视觉训练模型，然后根据您的用例提取内容，这已经由[diffbot.com 实现。](https://www.diffbot.com/) 他们还没有开源他们的解决方案。

2.解决这个问题的另一种方法是使用监督机器学习训练二元分类器对内容与样板进行分类，然后提取内容。这种方法用于[拖网。](https://moz.com/devblog/dragnet-content-extraction-from-diverse-feature-sets/) 以及围绕该领域的其他研究。您可以查看不同内容提取技术之间的[基准比较。](https://medium.com/skim-technologies/a-benchmark-comparison-of-extraction-from-html-pages-98d7c1229f51)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-02T16:58:07.027

首先，机器学习不是魔术。这些算法执行特定的任务，即使这些有时可能有点复杂。

任何此类任务的基本方法是生成一些具有合理代表性的标记数据，以便您可以评估自己的表现。“BOI”标签可以工作，为每个单词分配一个标签：“O”（外部）如果它不是您要查找的东西，“B”（开始）如果它是地址的开头，并且地址中所有后续单词（或数字或其他）的“I”。

第二步是考虑如何评估你的成功。发现地址的大部分是否重要，或者您是否还需要确切地知道事物是什么（邮政编码或街道或城市等）。然后，这会更改您视为错误的内容。

如果您希望命名实体识别器运行良好，您必须充分了解您的数据，并决定最适合这项工作的工具。这很可能是一系列正则表达式，其中包含一些关于如何组合结果的规则。我希望您能够通过相对简单的程序找到大部分数据。一旦你有一些简单的东西，你检查误报（结果不是你要找的东西）和漏报（你错过的东西），并寻找模式。如果您看到可以轻松解决的问题，请尝试一下。正则表达式的一个巨大优势是，它不仅可以更容易地将某些内容识别为地址的一部分，而且还可以检测它是哪一部分。

如果您想超越这一点，您可能会发现许多 NLP 方法在您的数据上表现不佳，因为“自然语言处理”通常需要看起来像（您猜对了）自然语言的东西来识别某物是什么。

或者，由于您可以将其视为分块问题，您可以使用最大熵马尔可夫模型。在这种情况下，这使用从一种类型的单词转换到另一种类型的概率来将文本分块为“地址的一部分”和“不是地址的一部分”。

祝你好运！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-12T00:17:46.283

我建议你看看[信息提取](http://en.wikipedia.org/wiki/Information_extraction)领域。很多人一直在研究如何完全按照您的要求进行操作。有一些信息提取技术是基于机器学习的，一些技术不是基于机器学习的。

如果不查看代表您要解决的问题的示例，就很难进一步发表评论（邮政地址在捷克语中的外观如何？）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-13T18:20:25.600

该方法需要是一种监督学习算法（通常，它们比无监督或半监督方法产生更好的结果）。另外，请注意，您基本上需要提取文本块。直观地说，您的算法需要这样说，“从这个字符开始，接下来的三行，是一个邮政地址”。

我觉得解决这个问题的一种自然方法是结合单词和字符级别的 n-gram 语言模型。建模本身可能非常复杂。正如 mcstar 所指出的，[Cross Validated](https://stats.stackexchange.com/)是了解这些细节的更好地方。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-02T13:37:30.973

我已经为此建立了一个解决方案。我的目标是提取与互联网上可用的比赛相关的所有信息。我用了一个微调。我所做的是我检测到信息在网站上列出的模式。就我而言，它们在订单下方一一列出，我检测到使用 html 表格标签并获取与比赛相关的信息。

虽然这是一个很好的解决方案，但它适用于某些站点，而对于其他一些站点，相同的代码将不起作用。但是您只需要更改同一代码中的一些参数即可使其工作。

# jquery-ui - 视觉 jquery ui 设计器错误？

> ID：13336578
> 
> 赞同：0
> 
> 时间：2012-11-11T23:27:34.227
> 
> 标签：jquery-ui

我已经开始了一个可视化的 jquery ui 设计器：

[http://www.fivetechsoft.net/cgi-bin/fiveform](http://www.fivetechsoft.net/cgi-bin/fiveform)

但是遇到了这个问题：一旦添加了新控件，以前的可拖动和可调整大小的功能将变得不可用。这是一个已知的 jquery ui 错误吗？您是否看到我在 javascript 函数 AddSay() 和 AddButton() （在 Fiveweb.js 内）中使用的代码中的一些错误？谢谢

安东尼奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:47:54.293

解决了！:-)

解决方案不是直接修改 innerHTML 属性，而是使用 DOM 对象！（fiveweb.js 中的 JavaScript 函数 AddSay() 和 AddButton()）

# bash - 使用 bash 读取子目录

> ID：13336580
> 
> 赞同：2
> 
> 时间：2012-11-11T23:27:36.997
> 
> 标签：bash, scripting

我有一个文件夹，其中包含数百个带有图像的文件夹，每个文件夹中有 4 个具有随机名称的图像，我需要做的是遍历所有子文件夹，读取每个子文件夹的 4 个图像名称并运行此命令在他们：

```
 convert \( $subdir/$file1.jpg $subdir/$file2.jpg -append \) \( $subdir/$file3.jpg $subdir/$file4.jpg -append \) +append $subdir.jpg 
```

这是它应该如何工作的：

```
foreach(subdirectory in directory){
   $img_arr[] = new Array(); 
   foreach(file in subdirectory){
       $img_arr[] = file;
   }

   exec("convert \( $subdirectory /$img_arr[0].jpg $subdirectory /$img_arr[1].jpg -append \) \( $subdirectory/$img_arr[2].jpg $subdirectory/$img_arr[3].jpg -append \) +append $subdirectory.jpg");
} 
```

这是我到目前为止得到的：

```
#!/bin/bash

img=0;

IFS=$'\n'

for NAME in $(find -type f)
  do
   echo "Found a file: \"$NAME\""
done 
```

我正在尝试使用 imagemagick 将 4 张图像合并为一张。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:38:14.507

试试这个：

```
for dir in *
do
     test -d $dir || continue
     files=($dir/*.jpg)
     convert \( ${files[0]} ${files[1]} -append \) \( ${files[2]} ${files[3]} -append \) +append $dir.jpg
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:47:16.803

您最初的方法几乎没有问题，只是进行了一些更改：

```
for dir in $(find . -type d); do
    echo $dir; 
done 
```

# ruby-on-rails - recaptcha 配置中的代理是什么？

> ID：13336584
> 
> 赞同：8
> 
> 时间：2012-11-11T23:27:52.103
> 
> 标签：ruby-on-rails, proxy, recaptcha

我在 Rails 3.1.0 中使用 recaptcha gem。我按照 github 页面上的说明进行操作：[https ://github.com/ambethia/recaptcha](https://github.com/ambethia/recaptcha)

我已经获得了密钥并正在配置 recaptcha，如下所示。

```
Recaptcha.configure do |config|
  config.public_key  = '6Lc6BAAAAAAAAChqRbQZcn_yyyyyyyyyyyyyyyyy'
  config.private_key = '6Lc6BAAAAAAAAKN3DRm6VA_xxxxxxxxxxxxxxxxx'
  config.proxy = 'http://myproxy.com.au:8080'
end 
```

config.proxy 的目的是什么？我应该填写什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T00:02:46.663

recaptcha 需要具有对 Internet 的传出访问权限的 Web 服务器。如果您想使用特定的网络服务器进行验证，您需要它的地址。

否则，您可以评论它。它应该工作得很好。

```
Recaptcha.configure do |config|
  config.public_key  = '6Lc6BAAAAAAAAChqRbQZcn_yyyyyyyyyyyyyyyyy'
  config.private_key = '6Lc6BAAAAAAAAKN3DRm6VA_xxxxxxxxxxxxxxxxx'
  # config.proxy = 'http://myproxy.com.au:8080'
end 
```

# android - 分屏并在android上运行2个不同的活动

> ID：13336592
> 
> 赞同：0
> 
> 时间：2012-11-11T23:28:28.200
> 
> 标签：android, multitasking

我正在开发一个需要同时运行 2 个独立活动的 android 应用程序，它们都有自己的布局。我现在正在做的是创建 2 个不同的意图并按顺序启动它们。但看起来他们没有同时运行，我必须退出第一个活动才能开始第二个活动。有人可以帮我解决这个问题吗？如果我可以使用分屏同时显示 2 个活动，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:33:27.437

看看[片段](http://developer.android.com/guide/components/fragments.html)。它们最初的设计考虑了不同的目标，但它们可能适用于您想要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:38:07.057

> 我正在开发一个需要同时运行 2 个单独活动的 android 应用程序

目前，现有的 Android 操作系统不支持该功能。对于您认为遇到的任何问题，您都需要提出其他解决方案。正如 Cherkashyn 先生在他的回答中提到的，碎片将是一个候选者。

> 我现在正在做的是创建 2 个不同的意图并按顺序启动它们。但看起来他们没有同时运行，我必须退出第一个活动才能开始第二个活动。

正确的。

> 有人可以帮我解决这个问题吗？

第 1 步：下载 Android 源代码。

步骤#2：修改操作系统以支持同时显示两个活动。

第 3 步：编译修改后的操作系统并将其放入 ROM 模块中。

步骤#4：在您选择的设备上安装该 ROM 模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T01:51:39.267

您对该项目的具体需求是什么？您可以设置一个具有 2 个重叠的 RelativeLayouts 的布局，然后将需要的一个带入到前面，然后使用 Threads 进行处理。不干净，但它会工作。

# java - Java：检查数字是否属于斐波那契数列

> ID：13336593
> 
> 赞同：3
> 
> 时间：2012-11-11T23:28:28.997
> 
> 标签：java, fibonacci

我应该编写一个代码来检查给定数字是否属于斐波那契数列。经过几个小时的努力，这是我想出的：

```
public class TP2 {

    /**
     * @param args
     */

    public static boolean ehFibonacci(int n) {
        int fib1 = 0;
        int fib2 = 1;
        do {
            int saveFib1 = fib1;
            fib1 = fib2;
            fib2 = saveFib1 + fib2;
            }
        while (fib2 <= n);

        if (fib2 == n)
            return true;
        else
            return false;

    }
    public static void main(String[] args) {
        int n = 8;
        System.out.println(ehFibonacci(n));

    }
} 
```

我一定是做错了什么，因为它总是返回“假”。有关如何解决此问题的任何提示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T23:32:07.260

你继续循环 while `fib2 <= n`，所以当你离开循环时， fib2 总是`> n`，所以它返回`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:33:58.543

```
/**
 * @param args
 */

public static boolean ehFibonacci(int n) {
    int fib1 = 0;
    int fib2 = 1;
    do {
        int saveFib1 = fib1;
        fib1 = fib2;
        fib2 = saveFib1 + fib2;
        }
    while (fib2 < n);

    if (fib2 == n)
        return true;
    else
        return false;

}
public static void main(String[] args) {
    int n = 5;
    System.out.println(ehFibonacci(n));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T16:34:13.087

这行得通。我不确定效率..但这是一个万无一失的程序，

```
public class isANumberFibonacci {

public static int fibonacci(int seriesLength) {
    if (seriesLength == 1 || seriesLength == 2) {
        return 1;
    } else {
        return fibonacci(seriesLength - 1) + fibonacci(seriesLength - 2);
    }
}

public static void main(String args[]) {
    int number = 4101;
    int i = 1;
    while (i > 0) {
        int fibnumber = fibonacci(i);
        if (fibnumber != number) {
            if (fibnumber > number) {
                System.out.println("Not fib");
                break;
            } else {
                i++;
            }
        } else {
            System.out.println("The number is fibonacci");
            break;
        }
    }
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-20T21:30:35.460

您还可以使用完美平方来检查您的数字是否是斐波那契。[您可以在geeksforgeeks](https://www.geeksforgeeks.org/check-number-fibonacci-number/)找到代码和一些解释。您还可以查看[stackexchange](https://math.stackexchange.com/questions/9999/checking-if-a-number-is-a-fibonacci-or-not/10002#10002)以了解其背后的数学。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-21T06:29:03.563

我是初学者，但这段代码运行得很好，没有任何问题。检查测试用例希望它能解决您的查询。

```
public static boolean checkMember(int n) {
    int x = 0;
    int y = 1;
    int sum = 0;
    boolean isTrue = true;

    for (int i = 1; i <= n; i++) {
        x = y;
        y = sum;
        sum = x + y;
        if (sum == n) {
            isTrue=true;
            break;
        } else {
            isTrue=false;
        }
    }
    return isTrue;
}

public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    System.out.print(checkMember(n));

} 
```

# iphone - Multiple animations after each other

> ID：13336594
> 
> 赞同：2
> 
> 时间：2012-11-11T23:28:43.267
> 
> 标签：iphone, ios, animation, uiimageview, mkmapview

I'm having a problem I can't find any solution for it.

So basically, I'm having a compass that I want to "pop in"/"pop out" into the view, and then start to update heading, but heading stops updating after I dismiss/pop out the compass.

Like: user wants compass-> presses button-> compass pops up-> starting to rotate compass needle-> user don't want compass anymore/dismisses compass-> compass pops out of view.

So my question is: If i make one animation, the other animation stops, how do i make it possible for both to run after each other?

In showCompass:

```
(IBAction) showCompass:

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
directionsArrow.center = CGPointMake(160, 410);
[UIView commitAnimations]; 
```

In locationManager:

```
float oldRadian = (-manager.heading.trueHeading * M_PI/180.0f);
float newRadian = (-newHeading.trueHeading * M_PI/180.0f);

CABasicAnimation *animation;
        animation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
animation.fromValue = [NSNumber numberWithFloat:oldRadian];
animation.toValue = [NSNumber numberWithFloat:newRadian];
animation.duration = 0.5f;

[directionsArrow.layer addAnimation:animation forKey:@"animateMyRotation"];
directionsArrow.transform = CGAffineTransformMakeRotation(newRadian); 
```

In dismissCompass:

```
-(IBAction) dismissCompass {
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.0];
directionsArrow.center = CGPointMake(160, 410);
[UIView commitAnimations];
[locationManager stopUpdateHeading];
} 
```

**New code:** **Show:**

```
[UIView animateWithDuration:1.f
                 animations:^{
                     compassDial.center = CGPointMake(160, 504-92);
                     pushView.center = CGPointMake(160, 500-92);
                     //directionsArrow.center = CGPointMake(160, 502-92);
                 } completion:^(BOOL finished) {
                     directionsArrow.hidden = NO;
                     [locationManager startUpdatingHeading];
                 }]; 
```

**In locationManager:**

```
- (void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{
float oldRadian = (-manager.heading.trueHeading * M_PI/180.0f);
float newRadian = (-newHeading.trueHeading * M_PI/180.0f);

CABasicAnimation *animation;
        animation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
animation.fromValue = [NSNumber numberWithFloat:oldRadian];
animation.toValue = [NSNumber numberWithFloat:newRadian];
animation.duration = 0.5f;

[directionsArrow.layer addAnimation:animation forKey:@"animateMyRotation"];
directionsArrow.transform = CGAffineTransformMakeRotation(newRadian); 
```

**Dismiss:**

```
 [UIView animateWithDuration:1.f
    animations:^{
                compassDial.center = CGPointMake(160, 700); 
                directionsArrow.center = CGPointMake(160, 700);

                 } completion:^(BOOL finished) {
                   [locationManager stopUpdatingHeading];
                 }]; 
```

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:43:20.383

I'm assuming the two animations you want to happen at the same time are the rotation and the moving of the frame?

The easiest thing to do to ensure the animation is smooth and follows what you expect is to place the compass inside another view.

You can then animate the frame of the compass' parent to make the compass move in and out and apply the rotation just to the compass itself.

Show

```
[UIView animateWithDuration:1.f
                 animations:^{
                   compassContainer.center = CGPointMake(160, 410);
                 }]; 
```

Rotation

```
// The code you already have changing the transform of directionsArrow 
```

Dismiss

```
[UIView animateWithDuration:1.f
                 animations:^{
                   compassContainer.center = CGPointMake(160, 410);
                 } completion:^(BOOL finished) {
                   [locationManager stopUpdateHeading];
                 }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:43:35.983

As Paul.s mentioned in the comments, that is not the current preferred way to do animations. And what you ask is really quite easy with the block method of animations. Have a look at the [documentation](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a), and here is a short example.

```
-(IBAction)animateDelete:(id)sender
{
    [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseIn
                     animations:^{
                         // Your first animation here...
                     }
                     completion:^(BOOL finished) {
                         // Do some stuff
                         [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                                          animations:^{
                                              // Your second animation here...
                                          }
                                          completion:^(BOOL finished) {
                                              // Do some stuff
                                          }
                          ];
                     }
    ];
} 
```

# c++ - 给定构造函数中的引用，将类变量设置为引用

> ID：13336597
> 
> 赞同：1
> 
> 时间：2012-11-11T23:29:10.637
> 
> 标签：c++

假设我有一个类构造函数：

### .h 文件

```
class Memo {
    public:
    typedef vector<Memo> MemoList;
    Memo (int id, Memo::MemoList &list);
    MemoList pile;
}; 
```

### .cc 文件

```
Memo::Memo (int id, Memo::MemoList &list) {
    pile = list;
} 
```

会`pile`是“相同的东西”或“等于” `list`，还是我需要一个新的变量作为参考`list`？我希望能够修改`pile`并使其影响原始`list`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:30:52.673

简单回答您的问题：

> 我需要有一个新变量作为列表的引用吗？我希望能够修改堆并让它影响原始列表。

：

您需要将列表存储为参考：

```
MemoList& pile;
//      ^ 
```

并且必须在构造函数的初始化列表中初始化引用：

```
Memo::Memo (int id, Memo::MemoList &list) : pile(list) {
} 
```

当您`Memo`必须是可复制的（现在不是）时，请使用指针而不是引用。

请记住（也许一开始就应该告诉它）以这种方式编程不是很安全——你必须确保你的列表生命周期比你的备忘录对象长！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:36:16.347

使其成为参考：

```
class Memo
{
public:
    typedef std::vector<Memo> MemoList;
    Memo(int id, MemoList & list) : pile(list) { }

private:
    MemoList & pile;
}; 
```

这将使您的班级无法分配，因为您无法重新设置参考。如果这是一个问题，请使用 a`std::reference_wrapper<MemoList>`而不是`MemoList &`（相同的语义）。

# javascript - 每个信息窗口都显示相同的数据映射 api v3

> ID：13336600
> 
> 赞同：-3
> 
> 时间：2012-11-11T23:29:26.497
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我真的被困在某事上了。每个地图标记的信息窗口都显示相同的信息。它似乎是我每次用来存储内容节点的数组末尾的内容。我很确定这是因为信息窗口没有附加到正确的标记上

```
 var markers = [];
    var contentArray = [];
    var titleArray = [];
    var latlngArray = [];
    var map;
    //var infowindow;
    var concert;

    function defaultMap()
    {
        //Latitude: 38
        //Longitude: -97
        //window.alert("inside function");
        var mapOptions = {
          center:new google.maps.LatLng(38,-97),
          zoom:4,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map"),
                                  mapOptions);

           // window.alert("addMarkers the size of contentArray is: "+contentArray.length);
       //window.alert("addMarkers the size of the titleArray is: "+titleArray.length);
       // window.alert("addMarkers the size of the latLongArray is: "+latlngArray.length);

        //for(var i =0;i<2;i++)
        //{
        //    if(i == 0)
        //    {
        //        marker = new google.maps.Marker({
        //           position: new google.maps.LatLng(37.8172784,-96.8909115),
        //           map:map
        //        });
        //        markers.push(marker);
        //    }
        //    else
        //    {
        //        marker = new google.maps.Marker({
        //           position: new google.maps.LatLng(37.8172973,-96.8766355),
        //           map:map
        //        });
        //        markers.push(marker);
        //    }
        //    //markers[0] = new google.maps.LatLng(37.8172784,-96.8909115);
        //    //markers[1] = new google.maps.LatLng(37.8172973,-96.8766355);
        //    
        //}
        //addMarkers();
    }

    //function 

            //
            //{
            //infowindow = new google.maps.InfoWindow({
            //content:list
            //});
            //google.maps.event.addListener(marker,'click',function(){
            // infowindow.open(map,marker);
            //});

    function addMarkers()
    {
        //console.dir(contentArray[contentArray.length-1]);
        for(var i = 0;i <10;i++)
        {
            if(i == 0)
            {
                //window.alert("i = "+i);
                console.log(latlngArray[i]);
                var marker = new google.maps.Marker({
                   position:latlngArray[i],
                   animation:google.maps.Animation.DROP,
                   icon:'./images/club.png',
                    title:titleArray[i],
                   map:map
                });

                //marker.setMap(map);
                            var infowindow = new google.maps.InfoWindow({

                });

                google.maps.event.addListener(marker,'click',function()
                                              {
                                                //console.log(infowindow.getContent());
                                                infowindow.setContent(contentArray[i]);
                                                infowindow.open(map,this);
                                              });
                markers.push(marker);

            }
            else
            {
                console.log(latlngArray[i]);
                var marker = new google.maps.Marker({
                   position:latlngArray[i],
                   animation:google.maps.Animation.DROP,
                   icon:'./images/restaurant.png',
                   title:titleArray[i],
                   map:map
                });

                var infowindow = new google.maps.InfoWindow({});
                            //console.log(infowindow.getContent());

                google.maps.event.addListener(marker,'click',function()
                {

                  infowindow.setContent(contentArray[i]);
                  console.log(infowindow.getContent());
                  infowindow.open(map,this);
                });
                 markers.push(marker);
            }

            //console.log(i);
            //console.log(contentArray[i]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:19:42.790

**此代码也适用于所有想要在从数据库检索的地图上放置多个标记的人**

我要粘贴实时项目的代码意味着工作。你可以从中得到一些帮助。

```
function latLongCallback(latitutde,longitutde){
 var latlng = new google.maps.LatLng(latitutde, longitutde);
    var options  = {zoom: 4, center: latlng, mapTypeId: google.maps.MapTypeId.ROADMAP};
    var map      = new google.maps.Map(document.getElementById('map'), options);

    $.ajax({type: "GET",
      dataType: 'json',
     url: 'https://www.xyz.com/yourrfolder/markers.php',
    success: function(response){
         var total=response.length;
         var data_array,name,type,address,lat,lon,arrival,departure,notes;
          var infowindow = new google.maps.InfoWindow();   
       for(var i=0; i < total; i++){
            data_array=response[i];
            name=data_array['name'];
            id = data_array['id'];
            address=data_array['address'];
            arrival=data_array['arrival'];
            departure=data_array['departure'];
            notes=data_array['notes'];
            lat=data_array['lat'];
            lon=data_array['lon'];
            icon=data_array['icon'];
            sc_id=data_array['sc_id'];

var propPos = new google.maps.LatLng(lat,lon);
            propMarker = new google.maps.Marker({
                position: propPos,
                map: map,
                icon: icon,
                zIndex: 3
            });

var contentString = "<div style='font-size:9px;overflow:hidden'>"+name+"<br/><label class='label'>Location :</label> "+address+"<br/><label class='label'>Arrival :</label> "+arrival+"<br/><label class='label'>Departure :</label> "+departure+"<br/><label class='label'>Notes :</label> "+notes + "</div><div style='font-size:9px;overflow:hidden'><a href='#2' onclick="+xx+" class='popup-txt' style='font-size:11px; margin-top:3px;'>Message him</a><a href='#1' onclick="+invite+" class='popup-txt' style='font-size:11px; margin-top:3px; float:right;'>Invite Friend</a></div>"; 

   function bindInfoWindow(marker, map, infowindow, html) {
         google.maps.event.addListener(marker, 'click', function() {
                    infowindow.setContent(html);
                    infowindow.open(map, marker);
                });
 bindInfoWindow(propMarker, map, infowindow, contentString);
     }
    }
});
return; 
} 
```

这是上面js中提到的marker.php

```
<?php 
  $data=array();
  $retrive_marker_query = "your query";
  $result               =    db_execute($retrive_marker_query);
  $cnt=0;

while ($row = mysql_fetch_assoc($result)){
 $name      = $row['name'];
 $id        = $row['fb_id'];
 $sc_id     = $row['id'];
 $address   = $row['location'];
 $lat       = $row['lat'];
 $lon       = $row['lon'];

   $data[$cnt]['name']    = $name;
   $data[$cnt]['id']      = $id;
   $data[$cnt]['sc_id']   = $sc_id;
   $data[$cnt]['address'] = $address;
   $data[$cnt]['lat']     = $lat;
   $data[$cnt]['lon']     = $lon;

   $cnt++;
   }
$data=json_encode($data);
 echo($data);
<? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:42:04.410

问题是当循环结束时，i 是 10。每个信息窗口都显示：

```
 infowindow.setContent(contentArray[i]); 
```

有两种方法可以解决问题：

1.  函数闭包。使用 createMarker 函数将信息窗口内容与标记相关联。 [在 Mike Williams 的 v2 教程](http://econym.org.uk/gmap/closure.htm)中进行了解释，[这是他使用函数闭包的示例之一](http://www.geocodezip.com/v3_MW_example_map3.html)，已翻译为 v3。
2.  包含内容的标记成员变量，通过引用“this”在点击侦听器中访问它。这个类似问题的答案[可能对此有所帮助](https://stackoverflow.com/questions/13164257/closure-issues-infowindows/13165490#13165490)。这是[使用标记的成员变量的示例](http://www.geocodezip.com/v3_SO_duplicateContentInfowindows.html)

# matlab - 无法关闭文本文件，因为 MATLAB 在执行失败后使用它

> ID：13336605
> 
> 赞同：3
> 
> 时间：2012-11-11T23:29:49.543
> 
> 标签：matlab

我从命令行窗口调用一个函数（包含 fopen 和 fclose），然后在 MATLAB 遇到我修复的错误后（程序的运行时在我保存更正后停止），我想删除它创建的文件，以便重复这个过程。但是，不知何故，MATLAB 仍然打开文件并在命令行窗口中输入 fclose(f) 并不会让 MATLAB 放开文件。

```
function something(something)
    f = fopen('something.txt', 'w');        
    %statments with fprintf  
    fclose(f);    
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:33:42.170

您可能无法从函数外部访问句柄 f，在这种情况下，您可以`fclose('all')`从 Matlab 命令窗口尝试。

通常，最佳实践是`try .. catch ...`在使用文件的代码周围使用语句，以便在发生错误时始终调用 fclose 并释放句柄。

如果您仍然无法删除该文件，并假设它没有被另一个进程锁定（例如，如果您在 Windows 记事本中从外部查看它），则可能是您正在从 Matlab 调用库函数并且共享库维护文件锁。`unloadlibrary`在这种情况下，请尝试使用and`loadlibrary`命令重新加载库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:42:36.863

在这种情况下，使用`onCleanup`对象可能非常有用。

这是您重写的代码以使用`onCleanup`-`fclose`现在将在函数正常终止或由于错误终止时被调用。

```
function something(something)
    f = fopen('something.txt', 'w');        
    closer = onCleanup( @()fclose(f) );
    % statements with fprintf 
end 
```

该[文档](http://www.mathworks.co.uk/help/matlab/ref/oncleanup.html)还包含一个恰好针对这种情况的示例。

# c++ - 带有icpc的c ++中的非动态构造函数？

> ID：13336609
> 
> 赞同：1
> 
> 时间：2012-11-11T23:30:07.423
> 
> 标签：c++, c++11, thread-local, default-constructor, icc

有没有办法定义一个非动态构造函数来限制默认构造函数的范围让我做

```
struct foo {
  int *bar;
};
static __thread foo myfoo[10] = {nullptr}; 
```

?

即，我想做

```
class baz {
  public:
    baz() = default;
    constexpr baz(decltype(nullptr)) : qux(nullptr) { }

  private:
    int *qux;
};
static __thread baz mybaz[10] = {nullptr}; 
```

让它工作。

目前，icpc告诉我

```
main.cpp(9): error: thread-local variable cannot be dynamically initialized
  static __thread baz mybaz[10] = {nullptr};
                      ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T21:48:36.403

这：

```
static __thread baz mybaz[10] = {nullptr}; 
```

相当于：

```
static __thread baz mybaz[10] = {baz(nullptr), baz(), baz(), baz(), baz(), ..., baz()}; 
```

因为这是一般规则，数组元素的隐式初始化是默认构造函数。

所以要么这样做：

```
static __thread baz mybaz[10] = {nullptr, nullptr, nullptr, ..., nullptr}; 
```

或者让你的默认构造函数也 constexpr ...

# zend-framework - 如何避免将 404 重定向到 Zend Framework 1 控制器插件中的登录表单？

> ID：13336612
> 
> 赞同：2
> 
> 时间：2012-11-11T23:30:39.740
> 
> 标签：zend-framework

我制作了一个控制器插件来处理身份验证。如果用户尝试在未登录的情况下访问页面，它会保存他尝试访问的页面的路由，转发到登录页面，然后当用户登录时，它将他重定向到他试图去的地方.

但是如果用户在退出时试图访问一个不存在的页面，那么它仍然会转发到登录表单，但是当用户登录时，它会带来一个错误。

如何在用户登录之前显示 404 错误？我想我需要在 dispatchLoopStartup() 中检测路由是否有效。我怎么做？还是有其他方法可以做到这一点？

```
class Chronos_Controller_Plugin_Auth extends Zend_Controller_Plugin_Abstract
{
    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
    {
        $auth = Zend_Auth::getInstance();
        if ($auth->hasIdentity()) {
            $request->setParam('userName', $auth->getIdentity());
        } else {
            $request->setParam('origModule', $request->getModuleName())
                    ->setParam('origController', $request->getControllerName())
                    ->setParam('origAction', $request->getActionName())
                    ->setModuleName('default')
                    ->setControllerName('sign')
                    ->setActionName('in');
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:05:32.753

尝试这样的事情：

```
public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
{
    $dispatcher = Zend_Controller_Front::getInstance()->getDispatcher();
    $auth = Zend_Auth::getInstance();
    if ($auth->hasIdentity()) {
        $request->setParam('userName', $auth->getIdentity());
    } else if ($dispatcher->isDispatchable($request)) {
        $request->setParam('origModule', $request->getModuleName())
                ->setParam('origController', $request->getControllerName())
                ->setParam('origAction', $request->getActionName())
                ->setModuleName('default')
                ->setControllerName('sign')
                ->setActionName('in');
        }
    } 
```

# mysql - 预排序的数据库表

> ID：13336622
> 
> 赞同：0
> 
> 时间：2012-11-11T23:32:28.840
> 
> 标签：mysql, sql, database, database-design

我正在设计一个数据库来保存科学数据。每个数据都有一个唯一的时间戳（以纪元时间为单位）和 8 个双精度数。我计划将每个实验保存在自己的表中，该表可能包含 100,000-10,000,000 行。我还看到绝​​大多数数据库读取一次来自单个表，请求按时间戳顺序排列的每一行或一些连续的行块，再次按时间戳的时间顺序。我知道从最抽象的意义上讲，数据库数据是无序的，但是有没有办法向数据库提示大多数查询（如果不是所有查询）都会对特定列进行排序，从而允许数据库按该列保持所有内容有序，并且加快阅读速度？

如果我使用 MySQL 很重要：

```
$ mysql --version
mysql  Ver 14.12 Distrib 5.0.95, for redhat-linux-gnu (i386) using readline 5.1 
```

如果有帮助，我也愿意接受不同的数据库结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:44:25.730

如果每个时间戳都保证不同，那么您可以将其设置为主键，否则只需创建一个索引。

# python - Python中具有多条件的元组排序列表

> ID：13336623
> 
> 赞同：0
> 
> 时间：2012-11-11T23:33:08.463
> 
> 标签：python, sorting

我正在使用 Python 2.6.2。我有一个元组列表`pair`，我喜欢使用两个嵌套条件对其进行排序。

1.  元组首先按 的降序排列`fwd_count`，
2.  如果 中的多个元组的 count 值相同`fwd_count`，则只有具有相同计数的元组需要根据 中的值按降序排序`rvs_count`。
3.  如果 a) 元组在 in`fwd_count`和 in 中具有相同的计数`rvs_count`，或者 a) 元组在 in 和 中具有相同的计数`fwd_count`并且不存在于`rvs_count`

我设法编写了以下代码：

```
pair=[((0, 12), (0, 36)), ((1, 12), (0, 36)), ((2, 12), (1, 36)), ((3, 12), (1, 36)), ((1, 36), (4, 12)), ((0, 36), (5, 12)), ((1, 36), (6, 12))]

fwd_count = {}
rvs_count = {}

for link in sorted(pair):  
    fwd_count[link[0]] = 0
    rvs_count[link[1]] = 0

for link in sorted(pair):  
    fwd_count[link[0]] += 1
    rvs_count[link[1]] += 1

#fwd_count {(6, 12): 1, (5, 12): 1, (4, 12): 1, (1, 36): 2, (0, 36): 2}
#rvs_count {(3, 12): 1, (1, 12): 1, (1, 36): 2, (0, 12): 1, (2, 12): 1, (0, 36): 1}

fwd_count_sort=sorted(fwd_count.items(), key=lambda x: x[1], reverse=True)
rvs_count_sort=sorted(rvs_count.items(), key=lambda x: x[1])

#fwd_count_sort [((1, 36), 2), ((0, 36), 2), ((6, 12), 1), ((5, 12), 1), ((4, 12), 1)]
#rvs_count_sort [((3, 12), 1), ((1, 12), 1), ((1, 36), 2), ((0, 12), 1), ((2, 12), 1), ((0, 36), 1)] 
```

我正在寻找的结果是：

```
#fwd_count_sort_final [((0, 36), 2), ((1, 36), 2), ((6, 12), 1), ((5, 12), 1), ((4, 12), 1)] 
```

其中 的位置`(1, 36)`和`(0, 36)`已从 中的位置交换位置`fwd_count_sort`。

问题：

1.  `fwd_count`有没有更好的方法同时使用和信息进行多条件排序`rvs_count`？（只有元组很重要，排序值不需要记录。），或
2.  我是否需要为每个条件单独排序（如我上面所做的那样）并尝试找到将其整合以获得我想要的结果的平均值？

我目前正在研究上面的第 2 项，但试图了解是否有更简单的方法。

[这是我在http://stygianvision.net/updates/python-sort-list-object-dictionary-multiple-key/](http://stygianvision.net/updates/python-sort-list-object-dictionary-multiple-key/)上寻找的“使用数值进行双向排序”的最接近的结果，但不确定我可以如果我创建一个具有 {tuple: {fwd_count : rvs_count}} 关系的新字典，请使用它。

**更新：2012 年 11 月 12 日——已解决**

我已经设法通过使用列表来解决这个问题。以下是代码，希望对从事多条件列表排序的人有用。

```
#pair=[((0, 12), (0, 36)), ((1, 12), (1, 36)), ((2, 12), (0, 36)), ((3, 12), (1, 36)), ((1, 36), (4, 12)), ((0, 36), (5, 12)), ((1, 36), (6, 12))]

rvs_count = {}
fwd_count = {}

for link in sorted(pair):
  rvs_count[link[0]] = 0
  fwd_count[link[1]] = 0

for link in sorted(pair):
  rvs_count[link[0]] += 1
  fwd_count[link[1]] += 1

keys = []
for link in pair:
    if link[0] not in keys:
        keys.append(link[0])
    if link[1] not in keys:
        keys.append(link[1])

aggregated = []
for k in keys:
    a = -1
    d = -1
    if k in fwd_count.keys():
        a = fwd_count[k]
    if k in rvs_count.keys():
        d = rvs_count[k]
    aggregated.append(tuple((k, tuple((a,d)) )))

def compare(x,y):
    a1 = x[1][0]
    d1 = x[1][1]
    a2 = y[1][0]
    d2 = y[1][1]
    if a1 > a2:
        return  - a1 + a2
    elif a1 == a2:
        if d1 > d2:
            return d1 - d2
        elif d1 == d2:
            return 0
        else:
            return d1 - d2
    else:
        return - a1 + a2

s = sorted(aggregated, cmp=compare)
print(s)

j = [v[0] for v in s]
print(j) 
```

感谢 Andre Fernandes、Brian 和 Duke 对我的工作提出意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:49:23.670

如果您需要交换*所有*第一个（一对）元素（而不仅仅是`(1, 36)`and `(0, 36)`），您可以这样做 `fwd_count_sort=sorted(rvs_count.items(), key=lambda x: (x[0][1],-x[0][0]), reverse=True)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:43:02.817

我不确定您的排序标准的定义，但这是一种根据and`pair`中的值对列表进行排序的方法。希望您可以使用它来获得您想要的结果。`fwd_count``rvs_count`

```
def keyFromPair(pair):
    """Return a tuple (f, r) to be used for sorting the pairs by frequency."""
    global fwd_count
    global rvs_count

    first, second = pair
    countFirstInv = -fwd_count[first] # use the negative to reverse the sort order
    countSecond   = rvs_count[second]

    return (first, second)

pairs_sorted = sorted(pair, key = keyFromPair) 
```

基本思想是使用 Python 的内置元组排序机制对多个键进行排序，并将元组中的一个值反转，使其成为逆序排序。

# php - PHP - 由于选择而显示/隐藏下拉列表

> ID：13336624
> 
> 赞同：0
> 
> 时间：2012-11-11T23:33:13.700
> 
> 标签：php, drop-down-menu, hide, selection

我有一个名为“课程”的下拉列表，其中包含选项（math101、eng102 .. 等），我想放置另一个名为（学生姓名）的下拉列表，但这个应该被隐藏，所以当用户从课程中选择一个值时list ，学生姓名的列表现在将显示只参加过这门课程的学生姓名，因此用户可以选择一个..当然所有数据都将从数据库中获取

到目前为止我的代码是

```
<?php

   include('../connect.php');
   $id=$_SESSION['login_user'];

      $sql = "SELECT CourseName from Course ";
         $result = mysql_query ($sql, $connection);

         echo "<tr><th>Course Name </th>";
         echo "<td><select id='CourseName' name='v1' >";
        while( $row = mysql_fetch_array($result))
   {
        echo "<option value='$row[CourseName]' selected='selected'>$row[CourseName]</option> ";

   }
     echo "</select>";
     echo "</td>";
     echo "</tr>" ;

  $sql = "SELECT StudentName from Student ";
         $result = mysql_query ($sql, $connection);

         echo "<tr><th>Student Name </th>";
         echo "<td><select id='StudentName' name='v2' >";
        while( $row = mysql_fetch_array($result))
   {
        echo "<option value='$row[StudentName]' selected='selected'>$row[StudentName]</option> ";

   }
     echo "</select>";
     echo "</td>";
     echo "</tr>" ;

     echo "</table>" ;
     echo "</font>" ;

    ?> 
```

我的两张桌子是

课程： CourseName var(30) CourseID int(7)

学生：StudentName var(40) 学生 ID int(7) CourseID int(7)

所以我的问题是，如何使“学生姓名”成为隐藏下拉列表取决于“课程”列表，所以当用户选择一门课程时，会出现所有参加该课程的学生姓名（按课程 ID）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:43:56.793

如果您不想使用我提供的 Ajax/jQuery 答案，这是另一种方法。选择课程后，它将使用`StudentName`基于`CourseID`. 这是通过向选择添加 1 个 javascript 代码`onchange='this.form.submit();'`，`CourseID`然后`isset($_POST['v1'])`在选择周围添加来完成的`StudentName`。

```
<?php

include('../connect.php');
$id=$_SESSION['login_user'];

$sql = "SELECT CourseName from Course ";
$result = mysql_query ($sql, $connection);

  echo "<form action='' method='post'>";
  echo "<table>";
  echo "<tr><th>Course Name </th>";
  echo "<td><select id='CourseName' name='v1' onchange='this.form.submit();'>";  // add onchange function to submit
    echo "<option value=''>Select Course</option> ";  // empty value option
    while( $row = mysql_fetch_array($result)){
    $sel = ($_POST['v1'] == $row[CourseName])? "selected='selected'":"";   // adds selected='selected' if post course same as this course
    echo "<option value='$row[CourseName]'$sel>$row[CourseName]</option> ";
    }
 echo "</select>";
 echo "</td>";
 echo "</tr>";

if ((isset($_POST['v1'])) && ($_POST['v1'] != "")){ // checks if a course is selected
 $sql = "SELECT StudentName from Student WHERE CourseID = ".mysql_real_escape_string($_POST['v1']);  // only selects StudentName which has CourseID
     $result = mysql_query ($sql, $connection);

     echo "<tr><th>Student Name </th>";
     echo "<td><select id='StudentName' name='v2' >";
    while( $row = mysql_fetch_array($result)){
      echo "<option value='$row[StudentName]' selected='selected'>$row[StudentName]</option> ";}
}
 echo "</select>";
 echo "</td>";
 echo "</tr>" ;

 echo "</table>" ;
 echo "</form>" ;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:59:19.937

我这样做的方法是使用 javascript/jQuery/Ajax。请注意，这是未经测试的，因为我只是复制并粘贴了这些示例。

在您的原始文件中进行以下更改 -

```
$sql = "SELECT CourseName from Course ";
$result = mysql_query ($sql, $connection);

  echo "<tr><th>Course Name </th>";
  echo "<td><select id='CourseName' name='v1' onchange='students()' >"; // Added on Change
  echo "<option value='' selected='selected'>Select</option> ";
  while( $row = mysql_fetch_array($result))
  {
  echo "<option value='$row[CourseID]'>$row[CourseName]</option> ";  // make the value = to CourseID
  }
 echo "</select>";
 echo "</td>";
 echo "</tr>" ;

 // removed sql query to get students, 

 echo "<tr><th>Student Name </th>";
 echo "<td><select id='StudentName' name='v2' >";  //builds a blank student select
 echo "</select>";
 echo "</td>";
 echo "</tr>" ;

 echo "</table>" ; 
```

在文件的头部添加以下 javascript/jQuery/Ajax

```
<head>
...
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> //can be changed to other version ie. 1.7.../1.8.. etc
<script type="text/javascript">
function students(){   
$("#StudentName option").remove();  // empties out the StudentName select so we can rebuild
var course = $('#CourseName').val();  //this gets the value of the selected Course
if(course != ""){ // we will only get students if a Course is selected
  jQuery.ajax({
  type: "POST",
  url: "students.php",
  data: 'course='+course,
  cache: false,
  success: function(response){
  var student_array = JSON.parse(response);
  $.each(student_array, function() {
  $("<option />").attr("value", student_array).text(student_array).appendTo("#StudentName");  // adds new StudentName select options
  });
  }
});
}
</script>
...
</head> 
```

并创建一个单独的文件`students.php`- （或`url`在 Ajax 中重命名以匹配）

```
<?php
include('../connect.php');
$course = mysql_real_escape_string($_POST['course']); // gets course that was sent via Ajax
$sql  = "SELECT StudentName from Student";
$sql .= " WHERE CourseID = '$course'";  // get only students with selected CourseID
$result = mysql_query ($sql, $connection);
 while( $row = mysql_fetch_array($result))
 {
    $student_array[] = $row[StudentName];
 }
 $student_array = json_encode($student_array);  // encodes it to send back
 print_r($student_array);   // prints the array to use
 ?> 
```

请注意，您不应该使用`mysql_*`函数编写新代码。相反，应该使用`MySQLi`or扩展名。`PDO_MySQL`请参阅[MySQL：选择 API 指南](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

# php - XMLHttpRequest 无法加载 url。Access-Control-Allow-Methods 不允许方法 DELETE

> ID：13336626
> 
> 赞同：1
> 
> 时间：2012-11-11T23:33:26.383
> 
> 标签：php, jquery, xmlhttprequest

我正在尝试向我的 restserver 发出 ajax 请求：

```
<script>
var id = "104";
var postData = {
  'id' : id
};
AJS.$.ajax({
     url: "myurl",
     crossDomain: true,
     data: postData,
     type: "DELETE",
     // dataType: "json",
     success: function(msg, textStatus, jqXHR) {
        alert( "Data Saved: " + msg);
     }
});
</script> 
```

但我收到以下错误：XMLHttpRequest cannot load http://myurl/rest/controller/resource/id/107。Access-Control-Allow-Methods 不允许方法 DELETE。

我在我的 php 控制器顶部添加了以下内容：

```
header('Access-Control-Allow-Origin: *'); 
header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS');
header('Access-Control-Allow-Headers', 'x-requested-with'); 
```

它似乎接受的唯一方法是 get 和 post，但 delete 和 put 会产生错误。

有任何想法吗？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:40:10.593

前几天，我艰难地了解到，几乎不可能从任何浏览器执行跨域 ajax 请求。我将在服务器端处理重定向 HTTP 请求。让这个 ajax 请求转到同一 url/服务器上的脚本，并让该脚本执行 HTTP 请求并等待来自您尝试从中获取数据的其他服务器的数据。

# python - 如何使用 python 和 HTML 在网页上显示文本

> ID：13336628
> 
> 赞同：1
> 
> 时间：2012-11-11T23:33:30.027
> 
> 标签：python, html, text, webpage

我有一个非常简单的网页示例，使用 python 从 html 文件中读取。名为 led.html 的 html 如下所示：

```
<html>
<body>
<br>
<p>
<p>
<a href="?switch=1"><img src="images/on.png"></a>
</body>
</html> 
```

而python代码是：

```
import cherrypy
import os.path
import struct
class Server(object):
    led_switch=1 
    def index(self,  switch=''):
        html = open('led.html','r').read()
        if switch:
            self.led_switch = int(switch)             
            print "Hellow world"            
        return html
    index.exposed = True

conf = {
        'global' : { 
            'server.socket_host': '0.0.0.0', #0.0.0.0 or specific IP
            'server.socket_port': 8080 #server port
        },

        '/images': { #images served as static files
            'tools.staticdir.on': True,
            'tools.staticdir.dir': os.path.abspath('images')
        },

        '/favicon.ico': {  #favorite icon
            'tools.staticfile.on': True,  
            'tools.staticfile.filename': os.path.abspath("images/bulb.ico")
        }
    }
cherrypy.quickstart(Server(), config=conf) 
```

该网页仅包含一个名为“on”的按钮，当我单击它时，我可以看到终端上显示文本“Hello World”。我的问题是单击该按钮后如何使此文本显示在网页上的“打开”按钮上？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T02:08:43.407

你会想要使用某种模板系统。我用的是[Jinja2](http://jinja.pocoo.org/docs/) 很棒！

代替...

```
html = open('led.html','r').read() 
```

你会用...

```
import cherrypy
import os.path
import struct
from jinja2 import Template

class Server(object):
    led_switch=1 
    def index(self,  switch=''):
        myText = ''
        if switch:
            self.led_switch = int(switch)             
            myText = "Please Wait"
        html = Template("""
                <html>
                <body onload='setTimeout(function(){document.getElementById("UserMessage").innerHTML = "Ok! it's done"}, 5000)'>
                <br>
                <p id="UserMessage">{{ htmlText }}<p>
                <a href="?switch=1"><img src="images/on.png"></a>
                </body>
                </html>
                """)

        return html.render(htmlText=myText)
    index.exposed = True

    conf = {
        'global' : { 
            'server.socket_host': '0.0.0.0', #0.0.0.0 or specific IP
            'server.socket_port': 8080 #server port
        },

        '/images': { #images served as static files
            'tools.staticdir.on': True,
            'tools.staticdir.dir': os.path.abspath('images')
        },

        '/favicon.ico': {  #favorite icon
            'tools.staticfile.on': True,  
            'tools.staticfile.filename': os.path.abspath("images/bulb.ico")
        }
    }
cherrypy.quickstart(Server(), config=conf) 
```

希望这可以帮助！

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:29:18.230

如果您不想使用 Jinja（以避免额外的依赖项），您仍然可以使用字符串格式：

```
class Server(object):
    led_switch=1 
    def index(self,  switch=''):
        myText = ''
        if switch:
            self.led_switch = int(switch)             
            myText = "Hellow world"
        html = """
         <html>
           <body>
             <br>
             <p>{htmlText}
             <p>
             <a href="?switch=1"><img src="images/on.png"></a>
           </body>
          </html>
                """
        return html.format(htmlText=myText) 
```

# c++ - 提示用户输入文件以保存数据

> ID：13336631
> 
> 赞同：0
> 
> 时间：2012-11-11T23:33:48.330
> 
> 标签：c++

我想要做的是提示用户输入文件以将数据保存在我尝试过的是：

```
 string save;
  cout<<"Enter filename to save (ex: file.txt): ";
  cin>>save;
  ofstream myfile;
  myfile.open(save);
  myfile <<"ID \tName \tSales\n"; 
```

但是我得到一个错误：没有匹配函数调用'std::basic_ofstream >::open(std::string&)'</p>

编辑：

所以我更新了我的代码，但这不允许我输入文件名。这是为什么

```
 char file_name[81];
  cout<<"Enter filename to save (ex: file.txt): ";
fflush(stdin);
  cin.getline(file_name, 81); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:35:25.957

在 C++03中没有构造函数或`open`函数： . 但是，他们在 C++11 中添加了它们。`std::string``myfile.open(save.c_str());`

这是一个[很好的参考](http://en.cppreference.com/w/cpp/io/basic_ofstream/open)。请`since C++11`注意版本旁边的注释`std::string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:39:39.107

代替

```
cin >> filename; 
```

在第一个令牌之后停止，您可能应该使用

```
getline(cin, filename); 
```

所以你可以输入带空格的文件名。

另外，考虑使用 argv （也许还有一些用于选项解析的库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T23:37:31.947

构造函数是显式的，并且需要一个**const char ***类型的变量，因此您必须传递 save.c_str()，它为字符串对象返回一个 const char *。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T00:23:25.780

这是一个简单的程序，演示您想要做什么：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    string filename;
    cout << "Enter filename to save (eg. file.txt): ";
    cin >> filename;

    ofstream myfile;
    myfile.open(filename.c_str());
    myfile << "ID \tName\tSales" << endl;
    myfile.close();

    return 0;
} 
```

# emacs - Emacs 快照上的建议失败

> ID：13336632
> 
> 赞同：3
> 
> 时间：2012-11-11T23:33:53.713
> 
> 标签：emacs, elisp

`defadvice`最近（几天）在 Emacs bzr 中的更改在使用与以前版本的 Emacs 一起工作的代码中引发了一个非常奇怪的错误。通常我会得到例如

```
Debugger entered--Lisp error: (wrong-type-argument symbolp #[(file newname &optional ok-if-already-exists)
...
ad-activate(rename-file nil) 
```

当尝试加载例如的编译版本时

```
(defadvice rename-file (around sync-ectags-rename-file (file newname &optional ok-if-already-exists) activate)
    "Update ectags for renaming of FILE to NEWNAME."
    (ectags-unregister-tag-file file)
    ad-do-it
    (ectags-register-tag-file newname)) 
```

然而，使用上述评估表达式`C-x C-e`工作正常。我已经尝试了几个小时来找出问题所在，但没有运气。在我建议函数的其他几种情况下也会出现类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T09:23:36.407

这是一个上游错误。看看[这里](http://lists.gnu.org/archive/html/emacs-devel/2012-11/msg00177.html)的讨论。据我所知，现在有很多内部变化正在进行，因为 Emacs 24.3 将从环绕建议切换到包装挂钩。

# azure-sql-database - 是否可以从 Windows Store 和 WP8 应用程序访问 SQL Azure？

> ID：13336638
> 
> 赞同：0
> 
> 时间：2012-11-11T23:34:50.607
> 
> 标签：azure-sql-database, windows-store-apps, windows-phone-8

我需要一个云中的数据库，我的一对应用程序将写入（WP8 应用程序）并从（Windows Store 应用程序）读取。这可能吗？有没有人做过对最佳实践/操作方法/陷阱等有建议的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:04:31.317

看看[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)，它很可能以更好的方式与您所追求的相匹配......

# map - 在 WP8 中将多边形添加到地图并更改不透明度/大小

> ID：13336642
> 
> 赞同：0
> 
> 时间：2012-11-11T23:35:11.070
> 
> 标签：map, polygon, windows-phone

我正在尝试将项目从 WP7 转移到 WP8（因此从 Bing 地图更新到诺基亚的内置控件）。

最初，我基于一大堆（20）地理坐标界定了一个地图区域，这些地理坐标创建了一个 MapPolygon，然后在将其作为子项添加到地图控件之前更改了 MapPolygon 的不透明度属性。

当我试图过渡到诺基亚的地图控件时，在我看来，没有办法指定我想使用地理坐标创建的多边形区域，而是必须使用点。这意味着当我在地图上放大和缩小时，多边形在屏幕上保持相同的形状。当然，无论您放大/缩小，都必须有一种方法可以让多边形保持相同的比例大小？！？！？

我知道 Bing 地图仍然可以使用，但由于它已被弃用，我宁愿过渡到新的诺基亚地图。

这是我试图用来创建新映射的代码：

```
//Creating a Polygon
Polygon MyPolygon = new Polygon();

MyPolygon.Points.Add(new Point(2, 0));
MyPolygon.Points.Add(new Point(22, 0));
MyPolygon.Points.Add(new Point(2, 40));
MyPolygon.Stroke = new SolidColorBrush(Colors.Black);
MyPolygon.Fill = new SolidColorBrush(Colors.Black);
MyPolygon.SetValue(Grid.RowProperty, 1);
MyPolygon.SetValue(Grid.ColumnProperty, 0);
MyPolygon.Opacity = 0.5;

//Adding the Polygon to the Grid
//MyGrid.Children.Add(MyPolygon);

//Creating a MapOverlay and adding the Grid to it.
MapOverlay MyOverlay = new MapOverlay();
MyOverlay.Content = MyPolygon;

MyOverlay.GeoCoordinate = new GeoCoordinate(49.3393850118753, -0.4569707717895518);

//MyOverlay.PositionOrigin = new Point(0.99, 0.99);

//Creating a MapLayer and adding the MapOverlay to it
MapLayer MyLayer = new MapLayer();
MyLayer.Add(MyOverlay);

map1.Layers.Add(MyLayer); 
```

我知道我可以将多边形添加到网格，然后将网格添加到叠加层，但这仍然不能解决问题。但是正如您所看到的，没有办法添加地理坐标......只有点。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:20:41.250

好吧，您将不得不使用一些数学运算，但我发现的最简单的方法是使用**ConvertViewportPointToGeoCoordinate**利用 ActualWidth 和 ActualHeight 地图属性来获取地图视口的坐标。这是你可以得到所有与中心相关的东西，或者你想用来保持比例的任何数学。

您还可以使用**MapPolyline**进行绘图，该绘图将采用地理坐标。 [http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.mappolyline.aspx](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.mappolyline.aspx)

你应该在几乎任何情况下都被覆盖。

希望有帮助？？？

// 杰德

# caching - 如何以编程方式清除 Android 默认浏览器缓存/cookies/位置偏好？

> ID：13336646
> 
> 赞同：1
> 
> 时间：2012-11-11T23:35:34.287
> 
> 标签：caching

我想以编程方式清除 Android 默认浏览器缓存/cookies/Location Preferencerence。或者浏览器应用设置中隐私安全的源代码。请帮忙...

谢谢， 森希尔

# python - 遍历字典相对于嵌套字典

> ID：13336647
> 
> 赞同：4
> 
> 时间：2012-11-11T23:36:04.347
> 
> 标签：python, dictionary, nested, loops

我有一个嵌套字典如下：

```
student_loan_portfolio = {
    'loan1': {'rate': .078, 'balance': 1000, 'payment': 100, 'prepayment': 0},
    'loan2': {'rate': .0645, 'balance': 10, 'payment': 5, 'prepayment': 0},
    'loan3': {'rate': .0871, 'balance': 250, 'payment': 60, 'prepayment': 0},
    'loan4': {'rate': .0842, 'balance': 200, 'payment': 37, 'prepayment': 0},
    'loan5': {'rate': .054, 'balance': 409, 'payment': 49, 'prepayment': 0},
    'loan6': {'rate': .055, 'balance': 350, 'payment': 50, 'prepayment': 0}
} 
```

我想按包含在其各自嵌套字典中具有最高“速率”值的字典的键的顺序遍历包含字典（通过键）`loan1`。`loan6`也就是说，我想按 `loan3`, `loan4`, `loan1`, `loan2`, `loan6`,的顺序进行迭代`loan5`

最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:41:31.587

我相信你想要：

```
sorted(student_loan_portfolio.items(), key=lambda (k,v): v['rate'], reverse=True) 
```

（感谢@MarkReed，你是对的。要按降序排序，我们需要`-v['rate']`或者，如上所示，传递`reverse=True`给`sorted`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:44:06.180

您可以像这样对值进行排序：

`sorted(student_loan_portfolio.items(), key=lambda (name,portfolio): portfolio['rate'], reverse=True) [('loan3', {'rate': 0.0871, 'balance': 250, 'payment': 60, 'prepayment': 0}), ('loan4', {'rate': 0.0842, 'balance': 200, 'payment': 37, 'prepayment': 0}), ('loan1', {'rate': 0.078, 'balance': 1000, 'payment': 100, 'prepayment': 0}), ('loan2', {'rate': 0.0645, 'balance': 10, 'payment': 5, 'prepayment': 0}), ('loan6', {'rate': 0.055, 'balance': 350, 'payment': 50, 'prepayment': 0}), ('loan5', {'rate': 0.054, 'balance': 409, 'payment': 49, 'prepayment': 0})]`

有关如何在 python 中进行复杂排序的更多详细信息，请参阅此页面： [http ://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

# iphone - 无法使用 UILongTouchGestureRecognizer 从 MKMapView 获取坐标

> ID：13336650
> 
> 赞同：1
> 
> 时间：2012-11-11T23:36:13.160
> 
> 标签：iphone, ios, ios6, mkmapview, uigesturerecognizer

我正在使用 iOS 6，并且我已经阅读了数十种方法来实现这一点（包括许多来自堆栈溢出的方法），但都没有成功。

这是我尝试过的，分为“阶段”：

1.  创建一个`UILongTouchGestureRecognizer`以接收长按`MKMapView`。

    *   我尝试`UILongTouchGestureRecognizer`通过我的 Storyboard 添加一个，并通过 Connections Inspector 连接插座、代表等。
    *   我尝试以`UILongTouchGestureRecognizer`编程方式创建它，将其初始化`mapView`为目标、`self`目标和`self.view`目标。
2.  使用 中的选择器方法接收触摸手势`UILongTouchGestureRecognizer`，获取`CGPoint`，并将其转换为`CLLocationCoordinate2D`对象。

    *   我试过了：
        *   使用 [mapView convertPoint:(CGPoint) toCoordinateFromView:self.mapView];
        *   首先使用`MKMapPoint aPoint = MKMapPointMake(aCGPoint.x, aCGPoint.y);`，然后使用 `MKCoordinateForMapPoint(aMapPoint)`来获取`CLLocationCoordinate2D`.
        *   两者都直接访问 UILongPressGestureRecognizer 并使用`(UILongPressGestureRecognizer *)sender`方法调用获取 CGRect 的 x,y。
3.  结果

    *   简而言之，这就是我在使用 检查值时得到的结果，而与使用`NSLog`的方法无关。- 对于从 给出的 X,Y `UILongPressGestureRecognizer`，x 似乎在 200 和 420 范围内波动。Y 范围从 ~400 - 700。 - 奇怪的是，长触摸触发的纬度和经度并打印到日志, 仅在 85.051XX（纬度）和 -179.9997XX（经度）的小数点后的第 3 - 6 位小数上有所不同。

这是我尝试过的一些代码的示例

```
- (void)viewDidLoad
{
     NSLog(@"View did load");
    [super viewDidLoad];
    UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc] initWithTarget:mapView action:@selector(handleLongPress:)];
    mapView = [[MKMapView alloc] init];
}

- (IBAction)handleLongPress:(UILongPressGestureRecognizer *)sender
{
    NSLog(@"CGPoint point: x - %f y - %f", point.x, point.y);
    CGPoint point = [sender locationInView:self.mapView];
    CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
    NSLog(@"Coords from \"locCoord\": lat - %f lng - %f", locCoord.latitude, locCoord.lon);

    MKPointAnnotation *addAnnotation = [[MKPointAnnotation alloc] init];

   [addAnnotation setCoordinate:
   [self.mapView addAnnotation:addAnnotation];
} 
```

希望有人可以帮助我，因为我完全被这个难住了。

重申一下，最终目标是获取用户“长按 mapView”的位置的坐标，然后（我无法工作的其他东西）在该位置放置一个图钉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T01:28:53.677

回顾我在 iOS 6 中运行的旧项目，我们似乎有几乎相同的代码（我猜是相同的源教程）。不同之处在于我正在检查`state`并且我的 mapView 变量没有在 viewDidLoad 中重置。您似乎在手势识别器之后分配了一个新的，并且您没有显示任何将其添加到 viewController 的代码。我猜您已经设法将屏幕上的内容与代码中的内容分开。如果您的 MKMapview 打算在视图控制器的整个生命周期中显示在屏幕上，则让 IB 管理分配和分配。

```
- (IBAction)handleLongPress:(UILongPressGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateBegan)
    {
        CGPoint point = [recognizer locationInView:mapView];
        CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
        [self addPinAtLocation:locCoord];       
    }

} 
```

# jquery - 使用jquery转换表结构

> ID：13336651
> 
> 赞同：2
> 
> 时间：2012-11-11T23:36:14.100
> 
> 标签：jquery

我正在尝试采用下面的前置元素 HTML，并将其转换为下面的后置元素 HTML。如果对 post 元素使用 thead 和 tfoot 没有意义，那么 tbody 就可以了。我正在考虑从 $('#myTable') 开始并用 div 包装它。我正在努力解决如何最好地删除页眉和页脚，并将它们插入到相应的表格中。感谢您的任何建议。

前元素 HTML：

```
<table id="myTable">
    <thead>
        <tr>
            <th>H1</th>
            <th>H2</th>
            <th>H3</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <th>F1</th>
            <th>F2</th>
            <th>F3</th>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <th>B1</th>
            <th>B2</th>
            <th>B3</th>
        </tr>
    </tbody>
</table> 
```

帖子元素：

```
<div>
    <table class="header">
        <thead>
            <tr>
                <th>H1</th>
                <th>H2</th>
                <th>H3</th>
            </tr>
        </thead>
    </table>
    <div>
        <table id="myTable" class="body">
            <tbody>
                <tr>
                    <th>B1</th>
                    <th>B2</th>
                    <th>B3</th>
                </tr>
            </tbody>
        </table>
    </div>
    <table class="footer">
        <tfoot>
            <tr>
                <th>F1</th>
                <th>F2</th>
                <th>F3</th>
            </tr>
        </tfoot>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:51:49.840

您应该选择thead、tbody 和tfoot 并用div 或tables 包裹它们。然后在 tbody 之后移动 tfoot。

```
$table = $('#myTable');
$table.find('thead').wrap('<table class="header"></div>');
$table.find('tfoot').insertAfter($table.find('tbody'));
$table.find('tfoot').wrap('<table class="footer"></div>');
$table.find('tbody').wrap('<div><table id="myTable" class="body"></table></div>');
$table.wrap('<div></div>').replaceWith($table.html()); 
```

**演示：http:** [//jsfiddle.net/F3MCv/2/](http://jsfiddle.net/F3MCv/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:41:31.597

这里：

```
var $table = $( '#myTable' ).detach();

$( '<div />' ).append(
    $( '<table class="header" />' ).append( $table.children( 'thead' ) ),
    $( '<div />' ).append( $table.addClass( 'body' ) ),
    $( '<table class="footer" />' ).append( $table.children( 'tfoot' ) )
).appendTo( 'body' ); 
```

**现场演示：http:** [//jsfiddle.net/MYbc6/4/](http://jsfiddle.net/MYbc6/4/)

我明确确保 DOM 操作操作的数量最小化，即表与 DOM 分离，然后构造 DIV，最后附加到 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:25:09.927

我仍然不知道这是否比上述两个出色的解决方案更好，但这是我目前正在做的事情。Šime Vidas 使用 detach() 可能更好，但我不知道如何在新位置重新插入修改后的 HTML。

```
var $table = $('#myTable').addClass('body').wrap('<div />').wrap('<div />');
$table.parent()
    .before($('<table class="header" />').append($table.children('thead')))
    .after($('<table class="footer" />').append($table.children('tfoot'))); 
```

**演示：http:** [//jsfiddle.net/zuHLX/](http://jsfiddle.net/zuHLX/)

# php - 带有 preg_match_all 的 PHP 正则表达式 - 为什么不匹配？

> ID：13336654
> 
> 赞同：0
> 
> 时间：2012-11-11T23:36:46.017
> 
> 标签：php, regex-greedy

我正在查看一个正则表达式来匹配任何字符。我知道'。是一个占位符，除了换行符。鉴于以下代码：

```
$fruits = "One\nTwo\nThree";
preg_match_all('/^(.*)$/', $str, $matches);
print_r($matches); 
```

为什么它根本不匹配任何东西？我想，$matches[0] 会是一二三？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:40:09.190

将[修饰符“s”添加到正则表达式](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)：

> 如果设置了此修饰符，则模式中的点元字符匹配所有字符，包括换行符。没有它，换行符被排除在外。这个修饰符等价于 Perl 的 /s 修饰符。诸如 [^a] 之类的否定类始终匹配换行符，与此修饰符的设置无关。

```
$fruits = "One\nTwo\nThree";
preg_match_all('/^(.*)$/s', $fruits, $matches);
print_r($matches); 
```

**更新：**

如果您将 $fruits 括在单引号中，则不会将换行符视为这样，并且替换也有效，没有“s”修饰符的事件。但我不知道输出是否是你所期望的；）

```
 $fruits = 'One\nTwo\nThree';
   preg_match_all('/^(.*)$/', $fruits, $matches);
   print_r($matches); 
```

# java - 带有对象填充的 Java JTable 矢量

> ID：13336655
> 
> 赞同：3
> 
> 时间：2012-11-11T23:36:48.057
> 
> 标签：java, swing, vector, jtable, defaulttablemodel

我已经尝试填写 JTable 大约三天了。我需要做的就是用“Artikel”对象填充一个向量向量，填充一个标题向量并将这两个向量绑定到一个 JTable。

我可以使用自定义 AbstractTableModel 来管理它，但我无法创建 addColumn() 方法。所以，我放弃了这种方式。现在我只使用标准 DefaultTableModel 但现在我无法正确填充我的 JTable。我将所有对象都放在第一列中，而不是分开到所有列中： [故障截图](http://www.okyanus.be/vraag.jpg)

![图形用户界面](../Images/2ca9d21a189d03287a9556798339b565.png)

我的Artikel课程：

```
public class Artikel {

private String EnitiativeRef;
private String Brand;
private String pnb;
.
.
.
public Artikel(){        
}

public String getEnitiativeRef() {
    return EnitiativeRef;
}

public void setEnitiativeRef(String EnitiativeRef) {
    this.EnitiativeRef = EnitiativeRef;
}
.
.
.
} 
```

我的按钮代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {

    ICsvBeanReader inFile = null;
    String[] header = {};
    Vector<Vector<Artikel>> data = null;

    try {
        inFile = new CsvBeanReader(new FileReader("C:\\609661920071022111.csv"), CsvPreference.STANDARD_PREFERENCE);

        header = inFile.getHeader(true);

        data = new Vector<Vector<Artikel>>();

        Artikel artikel;
        while ((artikel = inFile.read(Artikel.class, header, cellProcessor)) != null) {
            Vector<Artikel> tmpVector = new Vector<Artikel>();
            tmpVector.addElement(artikel);
            data.addElement(tmpVector);
        }

    } catch (Exception ex) {
        System.out.println("FOUT: " + ex.toString());
    } finally {
        try {
            inFile.close();
        } catch (IOException ex) {
            Logger.getLogger(main.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    tblAll.setModel(new DefaultTableModel(data, new Vector(Arrays.asList(header))));
    tblAll.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
} 
```

你能告诉我我做错了什么或指导我做这件事的正确方法吗？我将非常感谢您的感激帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:44:50.037

向量向量中的每个元素代表一行，这些元素向量的每个元素代表一列。

您正在将单元素向量添加到主向量，并且该元素是您尚未实现该`toString`方法的类的对象。

你可能走错路了。

# c# - 分割数据最快的方法是什么

> ID：13336656
> 
> 赞同：2
> 
> 时间：2012-11-11T23:36:57.890
> 
> 标签：c#

我不确定这叫什么，所以我举个例子来解释。我有一个数字数组

```
76425
234786234
56
4356
564356
456
94
900
725 
```

现在我想加入这些数据并制作一个看起来像这样的新数组

```
76425,234786234,56,4356
564356,456,94,900
725 
```

这是一个包含 3 个项目的字符串数组。每行项目数为 4。如您所见，最后一行只有一个项目。那没问题。这是我为此编写的代码：

```
 numberOfColumns = numberOfColumns > lineCount ? lineCount : numberOfColumns;
 int newLineCount = Convert.ToInt32(Math.Ceiling((Convert.ToDouble(lineCount))/numberOfColumns));
 StringBuilder sb = new StringBuilder();

 for (int i = 0; i < newLineCount; i++)
 {
      var page = lines.Skip(numberOfColumns * i).Take(numberOfColumns).Select(xx => xx.Trim());
      sb.AppendLine(string.Join(",",page));
 } 
```

这段代码工作得很好。但这很慢。你有什么想法让它更快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-11T23:41:33.593

你在寻找这样的东西吗？

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < lines.Count; i++)
{
    sb.Append(lines[i]);
    if ((i % 4) == 3)
        sb.AppendLine();
    else
        sb.Append(',');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:52:40.023

Reducing the number of iterations will increase performance.

```
List<string> result = new List<string>();

for (int i = 0; i < lines.Count; i+=4)
{
 result.Add(string.Format ("{0},{1},{2},{3}", lines[i], lines[i+1], lines[i+2], lines[i+3]));
} 
```

Also, you could use parallel processing, if you have a multicore processor.

```
 var linesPerProcessor = (int)(((lines.Count/4) / Environment.ProcessorCount)*4);
 Parallel.For(0,Environment.ProcessorCount -1
            ) =>
                {
                   for (int i = (p * linesPerProcessor); i < (p+1)*linesPerProcessor; i+=4)
                   {
                          result.Add(string.Format ("{0},{1},{2},{3}", 
                                lines[i], lines[i+1], lines[i+2], lines[i+3]));
                   }
                }
            ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:54:48.863

Use:

```
var arr = new[]
    {
        76425,
234786234,
56,
4356,
564356,
456,
94,
900,
725,
    };

var result =
    arr.Select((x, i) => new {x, i})
    .GroupBy(t => t.i / 4)
    .Select(t => string.Join(",", t.Select(v => v.x))); 
```

Output:

```
76425,234786234,56,4356
564356,456,94,900
725 
```

# .htaccess - 如何从 HTTP 重定向到 HTTPS

> ID：13336659
> 
> 赞同：0
> 
> 时间：2012-11-11T23:37:55.100
> 
> 标签：.htaccess, http

所需的网址是`https://www.mysite.com`

我想将所有后续 URL 重定向为与上述 URL 相同。

错误的网址：

```
https://mysite.com
http://www.mysite.com
http://mysite.com
mysite.com 
```

如果有任何尾随，例如`http://www.mysite.com/photo/1`使用相同路径重定向 url：`https://www.mysite.com/photo/1`

**为什么**！因为我已经安装了 SSL 证书

我用 .htaccess 和那个代码

```
RewriteEngine On
RewriteCond %{HTTPS} !^on$
RewriteRule (.*) https://www.mysite.com/$1 [R,L] 
```

但它总是重定向到`https://mysite.com`我完全需要它的时候`https://www.mysite.com`

所以任何帮助〜谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:27:09.730

尝试这个

```
选项 +FollowSymLinks
重写引擎开启
RewriteBase /
RewriteCond %{HTTPS} !on
重写规则 (.*) https://%{HTTP_HOST}%{REQUEST_URI}

```

# plone - 让 Plone 在 dotcloud 上运行（不使用 uwsgi）

> ID：13336664
> 
> 赞同：1
> 
> 时间：2012-11-11T23:38:37.887
> 
> 标签：plone, wsgi, dotcloud

**计划 A - 通过 uwsgi 进行克隆**

我正在尝试通过 wsgi 在 dotcloud 上部署 plone。

到目前为止，我已经安装了 dotcloud 工具并创建了一个 git 存储库，它成功地将所有部分部署到 dotcloud。我使用 github 来存储所有相关的配置。如果您想尝试一下，这些是我当前用于部署的命令：

```
git clone github@github.com/pigeonflight/stack-python-plone
cd stack-python-plone
dotcloud create plone
dotcloud push 
```

部署后，我能够确认（在“sshing”到我的 dotcloud 实例之后）我能够使用 paster 和以下命令启动堆栈：

```
cd current
bin/paster serve production.ini 
```

但是，当我尝试通过其 url 访问应用程序时，我收到一个 uwsgi 错误，找不到 python 应用程序。

我的 wsgi.py 文件如下所示：

```
import os
from paste.deploy import loadapp
current_dir = os.getcwd()
application = loadapp('config:production.ini', relative_to=current_dir) 
```

**更新**

A计划不适合我。我最初假设 uwsgi 是 dotcloud 上 Python 应用程序的唯一选择。

**计划 B - 在网络服务器代理的端口上克隆**

我现在对 B 计划持开放态度，该计划将使用 Plone 作为在端口上运行的工作人员，然后使用 proxy_pass 为站点提供服务。作为一个额外的好处，“由网络服务器代理的端口上的 Plone”将更接近 Plone 在其他场景中的标准部署方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T04:51:18.943

Ken Cochrane 和 jpetazzo 的回答都有助于指导我找到解决方案。我决定暂时放弃 wsgi。该解决方案需要深入挖掘 dotcloud python 服务和随附的 nginx 网络服务器。我找到了一种将指令传递给配置 proxy_pass 的 nginx 的方法。

生成的堆栈现在托管在：[https ://github.com/pigeonflight/stack-python-plone](https://github.com/pigeonflight/stack-python-plone)

当我意识到我可以通过创建**plone-uwsgi.conf**文件将命令传递给 nginx 时，关键的突破出现了，出于我的目的，我“劫持”了一个旨在传递附加 wsgi 配置并将其用于不同用途的文件。nginx 服务器被配置为在 nginx.conf 文件中的其他关键指令之后读取 *uwsgi.conf 文件（例如 location / {} 指令。这为我提供了一种理想的方式来覆盖（不需要的）wsgi 代码。在我的如果我使用该文件“注入”proxy_pass 指令。

这是我的**`plone-uwsgi.conf`**文件的外观：

```
 # This configuration file overrides the default file and allows you to run
  # your zope instance at the root of your dotcloud instance
  location ^~ / {
     rewrite ^(.*)$ /VirtualHostBase/http/$http_host:80/VirtualHostRoot$1 break;
     proxy_pass   http://127.0.0.1:8080;
     include /home/dotcloud/current/proxy.conf;
  } 
```

我还将附加配置存储在一个名为 proxy.conf 的文件中，该文件包含在 plone-uwsgi.conf 文件中。

这是我的**`proxy.conf`**文件：

```
client_max_body_size            0;
client_body_buffer_size    128k;
client_body_temp_path      /home/dotcloud/current/var/client_body_temp;

proxy_connect_timeout      90;
proxy_send_timeout         90;
proxy_read_timeout         90;
proxy_buffer_size          4k;
proxy_buffers              4 32k;
proxy_busy_buffers_size    64k;
proxy_temp_file_write_size 64k;
proxy_temp_path            /home/dotcloud/current/var/proxy_temp;
proxy_redirect                  off;
proxy_set_header                Host $host;
proxy_set_header                X-Real-IP $remote_addr;
proxy_set_header                X-Forwarded-For $proxy_add_x_forwarded_for; 
```

总之，应该可以使用以下命令在 dotcloud 沙箱中启动一个新的 plone 站点：

```
instance=instancename
git clone git://github.com/pigeonflight/stack-python-plone.git $instance
cd $instance
dotcloud create $instance 
```

其次是：

```
dotcloud push 
```

**可能的问题：** 我不知道如果 dotcloud 对其工作实例进行更改，我的自定义脚本下载的预编译包是否会继续工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:19:47.507

我有一段时间没有尝试运行 Plone。上次我这样做（大约 1 年前），可以用“pip install Plone”安装它，但它花了很长时间（因为 IIRC 它已经编译了 Zope 和其他东西）并且没有工作（因为鸡蛋- 项目化不是 100% 完成）。

`python-worker`假设事情仍处于这种状态，我将在公开 HTTP 端口的服务中使用 Plone 默认配方（到那时，使用 buildout） 。与普通`python`服务的主要区别在于该`python-worker + HTTP`解决方案不附带 uwsgi，因此，您可以运行`paster`或由 Plone 统一安装程序部署的任何内容。

最终结果将更接近标准的 Plone 安装，这很可能是一件好事！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T14:29:56.633

几个问题/评论。

1.  在您的 getplone.sh 脚本中，您正在创建一个新的 virtualenv？你为什么做这个？在 ~/env 下已经为您创建了一个 virtualenv（/home/dotcloud/env 是完整路径）。

    如果您想在其中安装东西，您可以使用 ~/env/bin/pip，或者更好的是，您可以将您的要求放入`requirements.txt`我注意到您现在为空的文件中。

    有关 dotCloud 上的代码依赖项的更多信息，请参阅此链接：[http ://docs.dotcloud.com/0.9/services/python/#code-dependencies](http://docs.dotcloud.com/0.9/services/python/#code-dependencies)

2.  如果你想要 python 2.7，你应该在你的`dotcloud.yml`. 有关更多信息，请参阅此链接。[http://docs.dotcloud.com/0.9/services/python/#python-versions](http://docs.dotcloud.com/0.9/services/python/#python-versions)

    这就是你的 dotcloud.yml 添加 python 版本后的样子。

**点云.yml**

```
www:
    type: python
    postinstall: ./getplone.sh
    config:
        python_version: v2.7
db:
    type: postgresql 
```

所以总而言之，我认为它对你不起作用的原因是 wsgi 设置为使用 ~/env virtualenv，并且由于你正在创建自己的 virtualenv，并将代码放在那里，uWSGI 不能找到您的应用程序。因此，如果您更改为使用默认的 virtualenv，它应该可以按计划工作。试试我建议的改变，看看它们是否适合你。

# python - 无法在 OSX 上运行 virtualenv？

> ID：13336665
> 
> 赞同：2
> 
> 时间：2012-11-11T23:38:58.553
> 
> 标签：python, macos, python-2.7, virtualenv, pip

### sudo virtualenv foo

```
New python executable in foo/bin/python
Installing setuptools.............done.
Installing pip....
  Complete output from command /private/tmp/foo/bin/python -x /private/tmp/foo/bin/easy_install /Library/Python/2.7/...ort/pip-1.2.1.tar.gz:
  /private/tmp/foo/bin/python: can't open file '/private/tmp/foo/bin/easy_install': [Errno 2] No such file or directory
----------------------------------------
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.8.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1054, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 655, in install_pip
    filter_stdout=_filter_setup)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /private/tmp/foo/bin/python -x /private/tmp/foo/bin/easy_install /Library/Python/2.7/...ort/pip-1.2.1.tar.gz failed with error code 2 
```

### 虚拟环境 foo

```
New python executable in foo/bin/python
Installing setuptools.............................
  Complete output from command /private/tmp/foo/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg:
  error: can't create or remove files in install directory

The following error occurred while trying to add or remove files in the
installation directory:

    [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/test-easy-install-1712.write-test'

The installation directory you specified (via --install-dir, --prefix, or
the distutils default setting) was:

    /Library/Python/2.7/site-packages/

Perhaps your account does not have write access to this directory?  If the
installation directory is a system-owned directory, you may need to sign in
as the administrator or "root" account.  If you do not have administrative
access to this machine, you may wish to choose a different installation
directory, preferably one that is listed in your PYTHONPATH environment
variable.

For information on other options, you may wish to consult the
documentation at:

  http://peak.telecommunity.com/EasyInstall.html

Please make the appropriate changes for your system and try again.

----------------------------------------
...Installing setuptools...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.8.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1052, in create_environment
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 599, in install_setuptools
    search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 571, in _install_req
    cwd=cwd)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /private/tmp/foo/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg failed with error code 1 
```

我正在运行 Python 2.7.3 并且没有安装任何软件包，除了 OSX Mountain Lion 上默认的 pip 和 virtualenv 。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T01:00:41.907

您的 Python 安装以某种方式搞砸了。

首先，跑步`sudo virtualenv foo`没有任何意义。virtualenv 的全部意义在于，您永远不需要 root 访问权限来安装软件包。你**永远**不需要 sudo 来使用 virtualenv。

其次，`/Library/Python/2.7/site-packages/virtualenv.py`Mountain Lion 默认不包括在内。那里已经安装了一些东西，所以当你说“除了默认安装的包之外没有安装任何包”时，你错了。根据您的安装方式，它可能安装错误。

看来，即使您正在创建一个 virtualenv，它也试图将包安装到`/Library/Python/2.7/site-packages/`中，这应该是不可能的。会不会是你`sudo easy_install`以前安装virtualenv，或者手动放了一些包`/Library/Python/2.7/site-packages/`？

我建议取消并卸载您安装的任何内容，让您的系统恢复到标准 Mac OS X 设置，然后使用 virtualenv-burrito 代替，这是一个将为您安装 virtualenv 和 pip 的一步命令无需思考：[https ://github.com/brainsik/virtualenv-burrito](https://github.com/brainsik/virtualenv-burrito)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T07:43:54.090

Whoops, forgot to write my answer to this question.

My Python directory had a whole bunch of permission and package related problems; ended up doing a complete uninstall then installed the latest one from Python.org.

Been working fine ever since.

# c++ - C++：混沌游戏：要正确绘制金字塔对齐点

> ID：13336670
> 
> 赞同：0
> 
> 时间：2012-11-11T23:39:46.637
> 
> 标签：c++, algorithm

所以我遇到了一点麻烦 - 我了解混沌游戏的算法，得到 3 分，以金字塔形式设置。剩下的很简单，只需选择当前点和 1-3 的随机掷骰，然后根据掷骰从当前点移动到 a、b 或 c 的一半。但是我遇到了困难（正如您在红色轮廓中看到的那样）点绘制正确但只是直线上升。如何让它与金字塔顶部对齐？

也许使用有四个参数的 GLine (x,y,x,y) 更容易？

![在此处输入图像描述](../Images/16122595357abd2bc9ade8839b6f5fae.png)

![在此处输入图像描述](../Images/793cc7856cdcd448ecfdabec3225c14d.png)

```
double playGame(double newPointX, double &newPointY, GWindow &display)
{

int roll = randomInteger(DICE_LOW, DICE_HIGH);

// WEST
if (roll == 1) {

}

// EAST
else if (roll == 2) {

}
// NORTH

else if (roll == 3 && newPointY > LIMIT) {
    display.drawOval(newPointX,
                     POINT_NORTH + (newPointY / 2),
                     1, 1);

    newPointY =  (newPointY / 2);
    cout << newPointY << endl;
    return newPointX;
}

return NULL; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:52:37.037

你没有改变你的 x 位置。您可以通过计算起点和终点（金字塔顶部）之间的线的反斜率来做到这一点。

只需使用类似的东西：

```
float inverseSlope = (xTop - xLeft) / (yTop - yLeft); 
```

那么您对 ​​x 位置的计算将是：

```
xPosition = (yPosition * inverseSlope) + xLeft; //xLeft being your start position 
```

当然，这没有你的变量，但我希望你明白这一点。

# google-chrome - 在 Chrome 中使用命名空间测试 XPath 表达式

> ID：13336671
> 
> 赞同：6
> 
> 时间：2012-11-11T23:39:49.020
> 
> 标签：google-chrome, xpath, namespaces, google-chrome-devtools

我在 Chrome 中打开了一个 XML 文档，我想测试一些 XPath 表达式。XML 文档涉及不同的名称空间。如何定义前缀 URI？

为了在 Chrome 中测试 XPath 表达式，我到目前为止使用过`$x("...")`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:32:49.417

取自 developer.mozilla 的[Introduction_to_using_XPath_in_JavaScript](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript)

*实现用户定义的命名空间解析器*

```
function nsResolver(prefix) {
  var ns = {
    'xhtml' : 'http://www.w3.org/1999/xhtml',
    'mathml': 'http://www.w3.org/1998/Math/MathML'
  };
  return ns[prefix] || null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T11:53:29.830

如果您在 XML 文档中的任何位置搜索元素“描述”，则可以使用 local-name() 函数。例子：

```
$x("//*[local-name()='description']") 
```

受到[这个答案](https://stackoverflow.com/questions/3931817/xpath-expression-from-xml-with-namespace-prefix)的启发。

# jquery - jQuery CSS Z-Index 更改

> ID：13336677
> 
> 赞同：1
> 
> 时间：2012-11-11T23:40:35.943
> 
> 标签：jquery, css

[单击链接（实时站点http://ericnaff.com/web2/index-FILL-IN.html](http://ericnaff.com/web2/index-FILL-IN.html)）时，我无法让我的照片查看器更改照片。我到处寻找解决方案，但一无所获。这是我的 HTML，然后是 CSS，然后是我的 jQuery。我得到了可以使用的链接，但是当您重新单击时，它不会更改图像。示例-我单击一个链接，照片变为正确的照片。如果我尝试通过单击返回照片，它不起作用。

```
 <body>

<div id="imageWindow">
    <div class="imagePane firstPic"></div><!-- ends first -->
    <div class="imagePane secondPic"></div><!-- ends second -->
    <div class="imagePane thirdPic"></div><!-- ends third -->
    <div class="imagePane fourthPic"></div><!-- ends fourth -->

    <ul>
        <li class="firstPic">first-pic</li>
        <li class="secondPic">second-pic</li>
        <li class="thirdPic">third-pic</li>
        <li class="fourthPic">fourth-pic</li>
    </ul>

</div> 
```

CSS

```
 #imageWindow {/* 1 CSS attribute */position:absolute 0px 0px;}

/* common image container and stacking */
    .imagePane {
        /* 4 CSS attributes */
        position:absolute;
        background-image: url(http://www.ericnaff.com/web2/images/park-    
                    sprite.jpg);
        width:450px;
        height:400px;
        }

/* these classes are used to determine the stacking order of the image container divs */
    .front {/* 1 CSS attribute */ z-index:1}
    .behind {/* 1 CSS attribute */ z-index:-1}

/* used to display a different picture in each container */             
    .firstPic {/* 1 CSS attribute */ background-position:0px 0;}
    .secondPic {/* 1 CSS attribute */background-position:450px 0;}
    .thirdPic {/* 1 CSS attribute */background-position:900px 0;}
    .fourthPic {/* 1 CSS attribute */background-position:1350px 0;}

/* used to style the list */
    ul {        
        /* 2 CSS attributes */
        width:75px;
        margin-left:450px;
    }

    li {
        /* 1 CSS attribute */
        list-style-type:none;           
    }

    li:hover {
        /* 2 CSS attributes */
        background-color:#999999;
        cursor:pointer;
    } 
```

我的查询-

```
 $(document).ready(function(){
    $('li.firstPic').click(function() {
                $('.firstPic').fadeIn().addClass('front');                  

            });

        $('li.secondPic').click(function() { 
                $('.secondPic').fadeIn().addClass('front');

            });

        $('li.thirdPic').click(function() {
                $('.thirdPic').fadeIn().addClass('front');

            });

        $('li.fourthPic').click(function() {
                $('.fourthPic').fadeIn().addClass('front');

            });

    }); 
```

有任何想法吗？我无法更改 HTML，必须使用显示的 CSS 数量。我是新手，真的很困惑。我正在尝试这个解决方案-

```
$('.targetX').functionA('targetS').functionB('targetT');                    
$('tag.targetY').functionA('targetT').functionB('targetS'); 
```

我不知道如何让它工作。就像我说的，让第一部分工作，只是不能得到一个链接工作不止一次。感谢您的任何帮助/建议。

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:48:41.550

这是因为在添加`front`类之前，之前`front`的还没有清除。在您的每次点击块中添加此`$('.front').removeClass('.front');`

但我想我可以提出这样的建议：

```
$('.imagePane').click(function() {
   //get the second class name as the selector of li
   var picSelector = $(this).attr('class').split(" ")[1];

   $('.front').removeClass('front');
   $('li.'+picSelector).addClass('front');
}); 
```

对不起，我还没有测试过，但我希望你明白了..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:56:15.587

每个链接都将一个`front`类添加到其对应的`<div>`中，但不会删除任何以前添加的类。

例如，您可以在每次点击时添加此功能：

```
function resetClasses() {
    $('li').each(function() {
        $(this).removeClass('front');
    });
}

$(document).ready(function(){
    $('li.firstPic').click(function() {
                resetClasses();
                $('.firstPic').fadeIn().addClass('front');                  

            });

    $('li.secondPic').click(function() { 
            resetClasses();
            $('.secondPic').fadeIn().addClass('front');

        });

    $('li.thirdPic').click(function() {
            resetClasses();
            $('.thirdPic').fadeIn().addClass('front');

        });

    $('li.fourthPic').click(function() {
            resetClasses();
            $('.fourthPic').fadeIn().addClass('front');

        });

}); 
```

# drupal - Drupal 7、谷歌分析、下载/用户名

> ID：13336678
> 
> 赞同：0
> 
> 时间：2012-11-11T23:40:42.060
> 
> 标签：drupal

我需要使用 Drupal（或模块）中的报告系统来报告我网站的每个注册用户下载了哪个文件。我可以看到访问过的页面，但看不到实际的下载事件或文件名。

我也在使用谷歌分析，但它不报告特定用户名下载了哪些文件..或者是吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T04:49:35.217

可能您的解决方案是设置*自定义变量*。
转到 Google Analitycs 配置页面，向下滚动到自定义变量并设置这些值：

**名称 = 用户
值 = [当前用户：名称]
范围 = 会话或访问**

您还必须使用要跟踪的文件扩展名检查**“跟踪下载（点击文件链接）以获取以下扩展名”**。

使用这些值，您可以在分析中定义其他细分。有关更多信息，请查看此页面： [https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

希望有帮助！

# objective-c - 自定义 TableViewController，不显示

> ID：13336681
> 
> 赞同：-1
> 
> 时间：2012-11-11T23:41:21.947
> 
> 标签：objective-c, ios, xcode

我已经在网上搜索以了解如何创建自定义表格视图（因为我想隐藏特定视图的导航栏）并且我正在遵循每个步骤。但是，我的结果没有显示表格。

这是我的 .h 文件

```
#import <UIKit/UIKit.h>

@interface HallFameControllerViewController : UIViewController
    <UITableViewDelegate, UITableViewDataSource>{

    NSArray *leaders;
}

@property (strong, nonatomic) NSArray *leaders;

@end 
```

和我的 .m 文件

```
#import "HallFameControllerViewController.h"

@interface HallFameControllerViewController ()

@end

@implementation HallFameControllerViewController

@synthesize leaders;

- (void)viewDidLoad
{
    [super viewDidLoad];
    leaders = [NSArray arrayWithObjects:@"Player #1", @"Player #2", @"Player #3", nil];
}

- (void) viewDidUnload{

    self.leaders = nil;
}

- (void) viewWillAppear:(BOOL)animated{

    [self.navigationController setNavigationBarHidden:NO];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [leaders count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell.
    cell.textLabel.text = [self.leaders objectAtIndex: [indexPath row]];
    return cell;
}
@end 
```

在我的故事板中，我创建了一个 ViewController，里面有 1 个标签和 1 个 TableView。我已将我的 ViewController 的自定义类设置为“HallFameControllerViewController”和数据源，将表格视图的委托也设置为“HallFameControllerViewController”。结果，标签在那里但没有表格。

我在侧面 .m 文件中有一些 printf() 语句，执行了 viewDidLoad() 但 cellForRowAtIndexPath() 没有！

我在这里做错了什么？此外，什么是 cellIdentifier，为什么设置为“Cell”（自动）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:42:57.890

你需要扩展`UITableViewController`，而不是`UIViewController`。然后您不需要将`UITableViewDataSource`or`UITableViewDelegate`协议添加到您的接口声明中。

您可以使用普通视图控制器，但它的工作量更大。您实际上从未在任何地方添加 UITableView。您只是实现了表格视图方法（您仍然需要这样做）。

您需要更新您的`numberOfSectionsInTableView:`. 即使在修复了其他问题之后，返回 0 也会给您留下一个空表。

所以改变这个：

```
@interface HallFameControllerViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>{ 
```

至：

```
@interface HallFameControllerViewController : UITableViewController { 
```

并改变这个：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 0;
} 
```

至：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
} 
```

# javascript - Rails：使用 capybara 填充动态字段

> ID：13336682
> 
> 赞同：5
> 
> 时间：2012-11-11T23:41:25.300
> 
> 标签：javascript, html, ruby-on-rails-3, testing, capybara

我有一个通过带有长 id 的 javascript 动态创建的文本字段：

`user_user_skills_attributes_69878013874980_skill_title`

其中`69878013874980`是生成的时间戳。

如何在 capybara 测试中使用此 id 填写字段？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T03:57:35.690

您可以使用该`set`命令。就像是：

```
find(:css, "input[id^='user_user_skills_attributes_'][id$='_skill_title']").set("This is a test title") 
```

# php - PHP无法增加任何值，但最后一个添加到数组中

> ID：13336688
> 
> 赞同：0
> 
> 时间：2012-11-11T23:41:37.220
> 
> 标签：php

我正在使用递增/递减来更改购物车中所需物品的数量。但是，这似乎仅适用于添加到数组中的最后一个值/行。例如，如果我在购物车中添加 1 件商品，则递增 ($_SESSION['cart'][$comic_id]++) 可以正常工作。但是，如果我将第二个项目添加到购物车，则递增仅适用于最新添加的项目，而不适用于第一个添加的项目，对于任何其他添加的项目也可以这样说。

有人可以指出我哪里出错并帮我修复我的代码吗？

我正在使用包含在 foreach 循环中的末尾的 $value 来回显。

这是我的代码（cart.php）：

```
<?php 
if(!isset($_SESSION)) {
     session_start();
}
$total = 0;
$page = 'cart';

//Database connection info (Using MySQLi) removed for security

if(isset($_GET['comic_id'])){ 
    $comic_id = $_GET['comic_id'];
} else {
    $comic_id = NULL;}

$action = $_GET['action'];

if($comic_id && !productExists($comic_id)) {
    die("We apologise, but we can't seem to find the comic you were looking for!!!");
}

switch($action) {
    case "add":
        if (isset($_SESSION['cart'][$comic_id])) {
            $_SESSION['cart'][$comic_id]++;

        } else {
            $_SESSION['cart'][$comic_id] = 1;
            }
    break;  
    case "remove":
        if (isset($_SESSION['cart'][$comic_id])) {
            $_SESSION['cart'][$comic_id]--;}
        if($_SESSION['cart'][$comic_id] == 0) unset($_SESSION['cart'][$comic_id]);
    break;  
    case "empty":
        unset($_SESSION['cart']); 
        session_destroy();
    break;  
}

require('header.php');
require('sidebar.php');

if (isset($_SESSION['cart'][$comic_id])){

    echo "<table border=\"0\" padding=\"10\" width=\"80%\">";
    echo "<td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>";
    echo "<td colspan=\"6\" align=\"right\"><a href=\"$_SERVER[PHP_SELF]?action=empty\" onclick=\"return confirm('Crystal Fusion: Are you sure you wish to empty your cart?');\">Empty Cart</a></td>";                      
    echo "<tr height=\"20px\">";
    echo "<tr height=\"20px\">";
    echo "<td align=center>Image</td><td align=center>Title</td><td align=center>Description</td><td colspan=3 align=center>Copies (+/-)</td><td align=center>Price</td>";
    echo "<tr height=\"20px\">";

    foreach($_SESSION['cart'] as $comic_id => $qty) {   

        $sql = sprintf("SELECT title, description, cost, image_thumbnail
                FROM comic 
                WHERE comic_id = %d;",$comic_id);

        $result = mysql_query($sql);

        if(mysql_num_rows($result) > 0) {

            list($name, $description, $price, $image_thumbnail) = mysql_fetch_row($result);

            $cost = $price * $qty; 
            $total = $total + $cost;

            $cost = number_format($cost,2);
            $total = number_format($total,2);
            $description =  substr($description, 0, 250);

            echo "<br><tr>";
            echo "<td width=\"10px\" align=\"center\"><img height=100 align=center src=\"$image_thumbnail\">";
            echo "<td align=\"center\">$name</td>";
            echo "<td width=\"40%\" align=\"center\">$description...<a href=comic_dyn.php?comic_id=$comic_id>More Info</td>";
            echo "<td width=\"30px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=add&comic_id=$comic_id\">+<br></a><td align=\"center\">$qty <td width=\"20px\" align=\"center\"><a href=\"$_SERVER[PHP_SELF]?action=remove&comic_id=$comic_id\">-</a></td>";
            echo "<td align=\"right\">$$cost</td>";
            echo "</tr>";           
        }

    }

    echo "<br><tr><tr height=100px>";
    echo "<td><td><td colspan=\"4\" align=\"right\">Total:</td>";
    echo "<td width=\"60px\" align=\"right\">$$total</td>"; 
    echo "<tr><td colspan=\"7\" align=\"right\"><a href=\"checkout_html.php\">Proceed to Checkout</a>";
    echo "<tr height=\"50px\">";
    echo "</table>";
}else{

    echo "Your cart is currently empty.";
    echo "<br><br><td colspan=\"1\" align=\"left\"><a href=\"title.php\">Continue Shopping</a></div>";

}

$_SESSION['invoice'][$comic_id]=$name . " " . $qty . " " . $price;

foreach ($_SESSION['invoice'] as $value) {
    echo $value."<br>";}

function productExists($comic_id) {
        $sql = sprintf("SELECT * FROM comic WHERE comic_id = %d;", $comic_id);
    return mysql_num_rows(mysql_query($sql)) > 0;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:20:57.430

您必须在 switch 语句上执行 foreach 以从每个项目中添加/删除值。像那样

```
foreach($_SESSION['cart'] as $comic_id => $qty) {
switch($action) {
    case "add":
        if (isset($_SESSION['cart'][$comic_id])) {
            $_SESSION['cart'][$comic_id]++;

        } else {
            $_SESSION['cart'][$comic_id] = 1;
            }
    break;  
    case "remove":
        if (isset($_SESSION['cart'][$comic_id])) {
            $_SESSION['cart'][$comic_id]--;}
        if($_SESSION['cart'][$comic_id] == 0) unset($_SESSION['cart'][$comic_id]);
    break;  
    case "empty":
        unset($_SESSION['cart']); 
        session_destroy();
    break;  
}

} 
```

# javascript - 滚动底层图像时在覆盖 div 上滚动内容

> ID：13336690
> 
> 赞同：2
> 
> 时间：2012-11-11T23:41:45.523
> 
> 标签：javascript, jquery, css, html

我有一个覆盖图像的 div。顶部 div 有一些交互式创建的 svg 内容。底层图像有滚动条。当我滚动图像时，我希望覆盖 div 的内容也相应地滚动。换句话说，在顶部 div 上交互创建的任何项目都应该像直接在图像上创建一样。它应该相对于底层图像具有固定的位置，并随着图像的滚动而滚动。

以下是我所拥有的：

```
<div style="overflow: scroll; width: 800px; height: 680px">
          <img style="max-width: 780px; display: block;"
            src="someimage.png" />

        <div style="display: block; max-width: 780px; top:70px; left:0px; border: solid 1px red; position: absolute">This text should scroll when the image behind is scrolled.</div>

    </div> 
```

我愿意使用 jquery 或任何其他插件来实现这种行为。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T09:06:10.197

对于我正在编写的编辑器，我遇到了同样的问题：一个包含图像的溢出：自动 div 和一个用于动态注释图像的 SVG 覆盖。这对我有用（来自 amdoghal 的背景图像线索为我指明了正确的方向 - dummy-map.png 是我正在注释的图像）。

```
<div id="wme_map" style="height: 800px; border: 1px solid black; padding:0; overflow: auto;">
    <div id="svg-overlay"  style="width: 1920px; height: 1080px; background-image: url(dummy-map.png)">
        <svg width="1920" height="1080">
            <rect x=20 y=20 width=200 height=32 style="stroke:red; fill:none; stroke-width:2;" />
        </svg>
    </div>              
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:49:17.360

为什么不使用图像作为 div 的背景并在 div 中键入任何内容将在图像之上

尝试关注

```
<div style="display: block; max-width: 780px; padding-top:70px; left:0px; border: solid 1px red;  background-image: url(someimage.png); height:1200px;">This text should scroll when the image behind is scrolled.</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T22:20:11.150

根据 admoghal 的建议，我尝试了以下方法：

```
<div style="width: 900px; height: 600px; overflow-y: scroll; overflow-x: hidden; display: block; position: absolute;">
   <div class="scales" id="holder" style='left: 0px; top: 0px; width: 1200px; height: 1000px; overflow: hidden; display: block; position: relative; max-height: 1000px; max-width: 1200px; background-repeat: no-repeat; background-image: url("someimage.png"); background-size: contain;'>
   </div>
</div> 
```

这在 Firefox 中运行良好，但由于“背景大小”在 IE 中不是有效属性，我必须使用[http://louisremi.github.com/jquery.backgroundSize.js/demo/](http://louisremi.github.com/jquery.backgroundSize.js/demo/)中的 backgroundSize 插件才能使其工作在 IE 中。虽然，现在我最终使用了 RaphaelJS 插件并使用它的图像功能将我的图像放在视口上。

# html - 使用样式表时未在 html 上调用背景图像

> ID：13336691
> 
> 赞同：3
> 
> 时间：2012-11-11T23:42:01.967
> 
> 标签：html, css, image, background

大家好，我有一个快速的问题。我正在使用 Visual Studio 2012 学习 HTML 和 CSS。我正在尝试拥有多个背景来尝试视差效果类型的东西。我知道 CSS 可以有多个背景，如下所示：

```
 background: url("/file/image.png"), url("/file/images2,png"), etc..... 
```

但我想做的是使用 div id 选择器调用图像，如下所示

```
 #image1 { background:url ("/file/image.png");}

    #image2 { background: url ("/file/image2.png");} 
```

HTML

```
 <body>

    <div id="image1"></div>
    <div id="image2"></div> 
```

每次我运行以下代码时，屏幕上都没有显示任何内容。我唯一得到的东西是如果我把代码放在 body{} 上。我错过了什么还是 VS 2012 设置不正确？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:06:54.250

在您的 css 样式中定义图像的高度和宽度

```
#image1 { background:url ("/file/image.png"); height: xxxpx; width: xxxpx;}
#image2 { background: url ("/file/image2.png"); height: xxxpx; width: xxxpx;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:35:08.840

感谢大家的快速回复。关于宽度和高度的所有答案都适用于我的代码，并且图像能够正常显示。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T23:48:40.513

默认情况下，`div`标签是其中内容的高度。如果您没有内容，`div`那么它将是零高度。您可能需要手动将图像的高度添加到 div 标签：

```
div#image1 { height: 200px; /* Height of image.png */ }
div#image2 { height: 300px; /* Height of image2.png */ } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T23:49:15.087

它不是 Visual Studio。如果您使用的背景图像中没有包含任何内容，那么您的 div 元素就没有内容可以调整大小。

您要么需要在 div 元素上设置固定尺寸，要么在其中放置足够的内容以使其大小合适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T00:03:01.043

实际上，您只需要仔细检查图像的*位置*。

在行中：

```
#image1 { background:url ("/file/image.png");} 
```

在 CSS 中，url 是相对于这个样式表的位置的。在 Visual Studio 2012 中，如果您的 .css 文件位于一个文件夹中，而您的图像位于同一级别的另一个“文件”文件夹中，您可以将其编写为：

```
#image1 { background:url ("../file/image.png");} 
```

# c++ - 在模板类中调用模板方法

> ID：13336693
> 
> 赞同：9
> 
> 时间：2012-11-11T23:42:09.667
> 
> 标签：c++, templates

我试图弄清楚为什么一些我没有编译的代码，我做了一些减少匿名化以结束这个例子的原因：

```
#define NULL ((void*)0)
template<typename T>
class a {
public:
  template<bool b>
  T * amem() {
    return NULL;
  }
};

template<typename T>
class b {
public:
  a<T>* ap;

  template <bool b>
  T * m() {
    return ap->amem<b>();
  }
};

int main()
{
  return 0;
} 
```

根据我使用的编译器*和变量的名称，*我会得到不同的错误。不过，它们都以这条线为中心：

```
 return ap->amem<b>(); 
```

使用 clang++ [Apple clang version 4.0 (tags/Apple/clang-421.0.57) (based on LLVM 3.1svn)] 编译，我收到以下消息：

```
tmp.cpp:18:26: error: expected expression
      return ap->amem<b>();
                         ^
1 error generated. 
```

使用 g++ [i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1] 编译，我收到以下消息：

```
tmp.cpp: In member function ‘T* b<T>::m()’:
tmp.cpp:18: error: expected primary-expression before ‘&gt;’ token
tmp.cpp:18: error: expected primary-expression before ‘)’ token 
```

神秘地（对我来说，无论如何）。如果我将 amem 的名称更改为 m，我不再从 g++ 中得到任何错误，但我从 clang++ 中得到相同的错误。

我确定这里有一些我不明白的地方？有谁知道 clang 和 gcc 正在寻找什么表达式？有谁知道如何解决这个问题？

如果这是一个编译器错误（似乎值得怀疑），有没有人知道任何不涉及将 amem 转换为带有 bool 参数（而不是模板）的函数的解决方法？我已经这样做了，我可以确认这可以解决这个问题，但这是在一个热循环中，并且由 b 打开的代码是一个可能不应该处于热循环中的内存分配。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-11T23:43:46.453

需要添加`template`关键字：

```
return ap->template amem<b>(); 
```

请阅读[我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)进行深入的解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-11T23:48:21.480

在您调用的上下文中

```
return ap->amem<b>(); 
```

该名称`amem`是一个依赖名称：如果这样的野兽确实引用了成员函数模板，则需要通过添加关键字来说明`template`：

```
return ap->template amem<b>(); 
```

顺便说一句，请注意，您**不得**定义`NULL`！如果你需要一个可憎的定义，你应该包括，例如，`cstddef`。最好只使用`0`或`nullptr`在使用 C++ 2011 时使用。

# ssl - 基于 SSL/TLS 的 OCSP

> ID：13336695
> 
> 赞同：7
> 
> 时间：2012-11-11T23:42:31.273
> 
> 标签：ssl, ocsp, confidentiality

据我所知，OCSP 只为请求和响应的签名提供了明确的方法（[RFC2560, page 7] 用于请求，[RFC2560, page 8] 用于响应），但它没有提及加密。在 SSL/TLS 上运行 OCSP 以保证其机密性是否典型（甚至可能，我想当然是这样）？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T15:55:56.413

是的，可以使用 SSL/TLS。但是考虑一下：

> 当证书包含带有 https URI 或类似方案的 cRLDistributionPoints 扩展时，可以引入循环依赖关系。依赖方被迫执行额外的路径验证，以获得完成初始路径验证所需的 CRL！循环条件也可以在 authorityInfoAccess 或 subjectInfoAccess 扩展中使用 https URI（或类似方案）创建。在最坏的情况下，这种情况会产生无法解决的依赖关系。

摘自 RFC5280，第 8 节。本节解决了使用 https 作为 CRL 分发点的问题。但是对于 OCSP 请求使用 SSL/TLS 也会遇到同样的问题：您必须检查服务器证书的有效性...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-23T06:48:53.840

在 RFC2560 的附录中是这样写的：

> A.1.1 请求 [...] 在需要隐私的情况下，使用 HTTP 交换的 OCSP 事务可以使用 TLS/SSL 或其他一些较低层协议进行保护。

但是大多数 OCSP-Responder 只提供没有 TLS/SSL 的 HTTP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-11T23:52:04.387

It is definitely possible, but it's not typical. If you are requesting the status of a host certificate, the OCSP request is unlikely to reveal anything an eavesdropper doesn't already know—namely, the host that you are trying to authenticate.

For S/MIME email or other applications, OCSP requests could be a lot more sensitive, because they would support organizational analysis. Using HTTPS transport could be be a good idea there.

# windows-8 - 从 WinJS.Binding.List 中删除组

> ID：13336698
> 
> 赞同：1
> 
> 时间：2012-11-11T23:42:43.060
> 
> 标签：windows-8, winjs

我有`List`一个`DataSource`适合我的`ListView`. 当我向 中添加新内容`Items`时`List`，一切正常并且`ListView`更新。但是，当我尝试从`List`没有任何事情发生的情况下删除项目时……`ListView`只是不在乎。我怎样才能做到这一点？

事实上，有没有一种简单的方法可以`Items`从某个组中删除所有内容（我使用`GroupedSortedListProjection`as a `DataSource`）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:12:49.513

您是否尝试过以下

手动重置列表（在其上创建一个新对象） **列表 = new WinJS.Binding.List();**

通知更改完成。

**list.notifyReload();**

这应该重置您的列表（从中删除所有项目）

# jquery - jquery ui 菜单：是否可以使用几个作为 CSS 顶部栏导航的下拉和弹出实例？

> ID：13336706
> 
> 赞同：0
> 
> 时间：2012-11-11T23:43:39.937
> 
> 标签：jquery, css, jquery-ui, drop-down-menu

初学者。我不确定标题问题的措辞是否正确，但我会尝试解释我在寻找什么。我想创建一个非常基本的顶部栏导航，并为每个选择下拉/飞出使用 jquery ui 菜单。所以我认为这将是非常可能且相对简单的，但我想知道，如果它基于百分比，你将如何将每个菜单实例定位在顶部栏下？我对此很陌生，所以我不确定它是 jquery 还是 css 问题？我非常感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T05:21:30.410

这就是我将如何去做。希望这会有所帮助，如果您需要其他任何东西，请告诉我。

HTML：

```
<div>
    <ul id="menu">
        <li>
            <a href="#">Nav Item 1</a>
            <ul class="subnav">
                <li><a href="#">Sub Item 1</a></li>
                <li><a href="#">Sub Item 2</a></li>
                <li><a href="#">Sub Item 3</a></li>
            </ul>
        </li>

        <li>
        <a href="#">Nav Item 2</a>
        <ul class="subnav">
            <li><a href="#">Sub Item 1</a></li>
            <li><a href="#">Sub Item 2</a></li>
            <li><a href="#">Sub Item 3</a></li>
        </ul>
        </li>
    <li>
        <a href="#">Nav Item 3</a>
        <ul class="subnav">
            <li><a href="#">Sub Item 1</a></li>
            <li><a href="#">Sub Item 2</a></li>
            <li><a href="#">Sub Item 3</a></li>
        </ul>
        </li>
    </ul>
</div> 
```

JAVASCRIPT：

```
$(document).ready(function(){
    $(".subnav").menu().hide();

    $("#menu>li").each(function(index, el){

        $(el).hover(function(){
            $(this).closest('li')
                .find('ul')
                .show()
                .animate({"opacity":1}, 250);
        },function(){
             $(this).closest('li')
                 .find('ul')
                 .animate({"opacity":0}, 250, function() {
                 $(this).hide();   
                 });
        });
    });
}); 
```

​ CSS：

```
ul{ 
list-style-type:none;
margin:0;
padding-right:1em;
overflow:hidden;
}

#menu>li{ 
    float:left; 
    background-color:whiteSmoke;
    width:30%;
}

.ui-menu{
    width:100%;
} /*100% since its nav item will be relative*/

#menu>li>ul{opacity:0}
​ 
```

演示：http: [//jsfiddle.net/EQPVf/15/](http://jsfiddle.net/EQPVf/15/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:32:47.850

这是我为 jQuery UI 版本 1.9.1 做的方式。从上到下。

包括：

```
<script src="jquery/jquery-latest-version.js"></script>
<script src="jquery/ui/jquery-ui.js"></script>
<script src="jquery/external/jquery.bgiframe-2.1.2.js"></script>
<script src="jquery/ui/jquery.ui.core.js"></script>
<script src="jquery/ui/jquery.ui.widget.js"></script>
<script src="jquery/ui/jquery.ui.menu.js"></script> 
```

CSS：

```
#menu li { display:inline-block; width: auto; }
#menu li.sub { display:block; width: auto;} 
```

jQuery：

```
// Menu
$(function() {
  $( "#menu" ).menu({
    select: function(event, ui) {
      var num = ui.item.index();
      switch(num) {
    case 0:
      Option1(); // dummy function to handle selection
      break;
    case 1:
      Option1Sub(); // make your own function to handle
          break;
        case 2:
          Option2(); // dummy function to handle selection
          break;
    case 3:
      BlaBla(); // make your own function to handle
      break;
      }
   }
}); 
```

HTML：

```
<ul id="menu" class="ui-menu">
  <li><a href="#" title="Option 1..."><b>Option 1</b></a></li>
    <li class="sub"><a href="#" title="Option 1 sub..."><b>Option 1 sub</b></a></li>
  <li><a href="#" title="Option 2..."><b>Option 2</b></a></li>
  <li><a href="#" title="Bla Bla..."><b>Bla Bla</b></a></li>
</ul> 
```

[itsSOezy](http://itssoezy.com/ "它的SOezy") .com .. jQuery 让它变得简单。

# rest - glassfish jax-rs 多线程

> ID：13336708
> 
> 赞同：0
> 
> 时间：2012-11-11T23:43:56.087
> 
> 标签：rest, jakarta-ee, glassfish

我尝试在 glassfish 3.1.2 上运行非常简单的 restful 服务，然后同时在浏览器的 2 个选项卡中调用它。不幸的是，似乎第二个请求被第一个阻止了。只看服务：

```
@Path("/task")
public class TaskService {

    static Logger log = Logger.getLogger(TaskService.class.getName())       ;

    @GET
    @Produces("text/plain")
    public String startTask(){

        log.info("REST called  -> "  + this);

        for(int k =0; k<10000; k++){
            log.info("REST called  " + k + " -> "  + this);
        }

        return "ok: ";
    }
} 
```

第一个请求被执行，完成后，第二个请求开始:(。我也尝试过 Thread.sleep。

有任何想法吗？这是请求范围服务，因此这 2 个请求在不同的 TaskService 实例上运行。我需要一些线程池配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T07:56:10.807

GlassFish 负责处理对同一个`@Path`. 实际上，*不*建议在使用 Java EE 编写的代码中使用线程。

这种方法

```
@Path("/task")
@GET
@Produces("text/plain")
public String startTask() throws InterruptedException {
    Thread.sleep(1000);  // sleep for one second
    return "ok: ";
} 
```

睡眠一秒钟可以这样进行基准测试[`ab`](https://httpd.apache.org/docs/2.2/programs/ab.html)：

```
% ab -c 20 -n 20  http://localhost:8080/WebApplication1/rest/console/task
This is ApacheBench, Version 2.3 <$Revision: 655654 $>
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient).....done

Server Software:        GlassFish
Server Hostname:        localhost
Server Port:            8080

Document Path:          /WebApplication1/rest/console/task
Document Length:        4 bytes

Concurrency Level:      20
Time taken for tests:   4.014 seconds
Complete requests:      20
Failed requests:        0
Write errors:           0
Total transferred:      5380 bytes
HTML transferred:       80 bytes
Requests per second:    4.98 [#/sec] (mean)
Time per request:       4014.363 [ms] (mean)
Time per request:       200.718 [ms] (mean, across all concurrent requests)
Transfer rate:          1.31 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   0.2      1       1
Processing:  1004 2509 1150.0   3009    4013
Waiting:     1003 2507 1150.3   3008    4012
Total:       1004 2509 1149.8   3010    4013

Percentage of the requests served within a certain time (ms)
  50%   3010
  66%   3010
  75%   4012
  80%   4012
  90%   4013
  95%   4013
  98%   4013
  99%   4013
 100%   4013 (longest request) 
```

`ab`并行执行 20 个请求。如您所见，这只需要 4.014 秒。

# objective-c - 如何使 UINavigationController 中的 UIToolbar 更高？

> ID：13336711
> 
> 赞同：2
> 
> 时间：2012-11-11T23:44:06.463
> 
> 标签：objective-c, ios, uinavigationcontroller, uitoolbar

我有一个 UINavigationController，在屏幕顶部有一个 UINavigationBar，在底部有一个 UIToolbar。我想让工具栏高一点。这是我的代码：

```
CGRect toolbarFrame = self.navigationController.toolbar.frame;
toolbarFrame.size.height += 20;
toolbarFrame.origin.y -= 20;
self.navigationController.toolbar.frame = toolbarFrame;

[self setToolbarItems:@[myButton]];
self.navigationController.toolbarHidden = NO; 
```

这似乎应该工作并且不会产生任何错误/警告，但工具栏的大小保持在默认值。

有没有办法改变 UINavigationController 的 UIToolbar 的大小，或者我应该为此制作一个自定义 UIToolbar？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T03:59:49.200

我试过你的代码，只是调整你的代码顺序。它将起作用：

```
[self setToolbarItems:@[myButton]];
self.navigationController.toolbarHidden = NO;

CGRect toolbarFrame = self.navigationController.toolbar.frame;
toolbarFrame.size.height += 20;
toolbarFrame.origin.y -= 20;
self.navigationController.toolbar.frame = toolbarFrame; 
```

我认为这是因为`setToolbarItems`会调整工具栏的外观。所以你首先需要做其他与初始化相关的事情。然后调整它的外观（比如改变它的框架。）

# prolog - 有没有办法在谓词参数中进行操作？

> ID：13336713
> 
> 赞同：4
> 
> 时间：2012-11-11T23:44:32.357
> 
> 标签：prolog

像这样的东西：

```
increment(X, X2 is X + 1). 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:14:04.377

```
no. 
```

好吧，除非有一个包装谓词来`increment/3`执行操作，然后调用 real`increment/3`被认为是有效的。

编辑：假设您要为其编写一个包装器，`foo(Arg1, Arg2, Arg3)`以便您可以将表达式作为第二个参数传递。包装器将是：

```
efoo(Arg1, Expr, Arg3):-
    Arg2 is Expr,
    foo(Arg1, Arg2, Arg3) 
```

如果您想经常这样做，您可能需要抽象该行为：

```
eval_call(Predicate, Expressions):-
    maplist(evaluate, Expression, Args),
    call(Predicate,Args).

evaluate(Expr, Arg):-
    Arg is Expr. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T08:19:12.267

有[succ](http://www.swi-prolog.org/pldoc/doc_for?object=succ/2) /2 具有您需要的语义以及更多

```
?- succ(3,X).
X = 4.

?- succ(X,7).
X = 6. 
```

问题的标题似乎需要更笼统的东西，正如@thanosQR 已经指出的那样，语法需要一些改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T08:59:24.593

不，标准的成语是分开做的，例如：

```
X2 is X + 1, increment(X,X2). 
```

# ios - iOS：MapView 内的图像视图

> ID：13336715
> 
> 赞同：0
> 
> 时间：2012-11-11T23:44:47.177
> 
> 标签：ios, imageview, android-mapview

我开始iOS开发。

我有一个`UIMapView`，我想在它的顶部显示一个图像`UIMapView`。但是，当我将 a 拖到`UIImageView`my`UIMapView`时，会`UIImageView`叠加 my `UIMapView`。如何设置`UIImageView`top的位置并继续显示地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T02:28:39.613

您不能在界面生成器中执行此操作。您可能可以通过编程方式执行此操作。

```
UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]];
[self.mapView addSubView:image]; 
```

但是，您必须确定要在地图上放置图像的确切位置的原点。

# match - 部分匹配python中的单词

> ID：13336717
> 
> 赞同：1
> 
> 时间：2012-11-11T23:44:56.027
> 
> 标签：match, partial

我正在尝试在 python 中编写一个自动完成程序，该程序需要一个（可能拼写错误的）单词，并根据字典找到可能的部分匹配项。具体来说，我正在寻找具有多一个、少一个或一个不同字符的单词。有没有办法在 python 中做到这一点，而无需根据输入单词编写正则表达式字符串生成器？比如，我可以编写三个通用的正则表达式字符串，还是必须编写一个函数来创建和测试在单词的每个位置都带有通配符的单独的正则表达式字符串？

# php - 试图从数据库中查看表，但显然我的语法不正确，尽管它与 PHPmyAdmin 上的查询匹配

> ID：13336719
> 
> 赞同：3
> 
> 时间：2012-11-11T23:44:58.367
> 
> 标签：php, mysql

澄清我的数据库称为数据库，我的表称为表（这是用于测试）。

```
 class Database 
{ 
 public $server = "localhost";
 public $database = "database"; 
 public $user = "root"; 
 public $password = ""; 
 public $row;
 public $result;

 //call connection method upon constructing 
 public function __construct(){
  $this->createConnection(); 
 }

 //connection to the database
 public function createConnection() 
    { 
     $this->dbLocalhost = mysql_connect($this->server, $this->user, $this->password)
                or die("could not connect:".mysql_error());

        mysql_select_db($this->database)
        or die("Could not find the database: ".mysql_error());
 } 

 //execute query string 
 public function query($queryString) 
    {

        echo "<table border='1' cellpadding='10'>";
        echo "<tr> <th>ID</th> <th>First Name</th> <th>Last Name</th> <th></th> <th></th></tr>";
        $this->result = mysql_query($queryString)
        or die($queryString."<br/><br/>".mysql_error());

        while($this->row = mysql_fetch_array($this->result)) {

                echo "<tr>";
                echo '<td>' . $this->row['id'] . '</td>';
                echo '<td>' . $this->row['firstname'] . '</td>';
                echo '<td>' . $this->row['lastname'] . '</td>';
                echo '<td><a href="edit.php?id=' . $this->row['id'] . '">Edit</a></td>';
                echo '<td><a href="delete.php?id=' . $this->row['id'] . '">Delete</a></td>';
                echo "</tr>"; 

        } 

        echo "</table>";
    } 
```

然后我有调用函数的php文件。

```
<?php

include('database.php');
$db = new Database();
$sql = "SELECT * 
    FROM table"; 
$db->query($sql);

?> 
```

这是接收的错误：

选择 * 从表

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“表”附近使用正确的语法

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:54:56.967

`table` is a [reserved word](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html) in MySQL, so you must escape it. You can do that by putting ```s around it.

For example:

```
SELECT * FROM `table` 
```

As you can see on my link, there are several tricky reserved words that can cause a lot of headache. Some say you should always use ``` characters when you write table and field names.

# jquery - 具有本地存储的计数器应用程序

> ID：13336720
> 
> 赞同：1
> 
> 时间：2012-11-11T23:45:06.783
> 
> 标签：jquery, html, local-storage, mustache

我正在开发一个计数器应用程序，它使用 mustache.js 创建多个计数器并使用本地存储记住您的数据。您只需单击“+”按钮添加一个新计数器，然后单击添加按钮来增加计数器。

我有几个问题： - 添加并有多个计数器时，它们都会增加。- 当我点击关闭按钮时，计数器也会增加。

是否也可以通过输入字段输入标题并让本地存储记住它？

任何帮助将不胜感激。如果你有任何解决方案，你能解释一下吗？

在这里查看小提琴：http: [//jsfiddle.net/techydude/MSnuE/](http://jsfiddle.net/techydude/MSnuE/)

**Javascript：**

```
 $(function() {
  var doc = $(document),
      CounterContainer = $("#CounterContainer"),
       //Container for all Counters
      container = $(".counter"),
       //Individual Conter Counters
      counter = $(".valueCount"),
      addBtn = $(".add"),
      valueCount = $(".valueCount").html(),
      addCounter = $("#create-counter"),
      counterTemplate = Mustache.compile($("#counter-template").html());

  if (localStorage.counterSave) {
    CounterContainer.html(localStorage.counterSave);
  }

  function save() {
    localStorage.counterSave = CounterContainer.html();
  }

  addCounter.submit(function(e) {

    // prevent page from refresing
    e.preventDefault();
    var value = 5;
    makeCounter(value);
    save();
  });

  function makeCounter(value) {
    $(counterTemplate({
      txt: value
    })).appendTo(CounterContainer);
  }

  CounterContainer.on("click", addBtn, function(valueCount) {
    var EachContainer = $("div.valueCount"),
        EachContainerValue = $("div.valueCount").html();

    EachContainer.html(++EachContainerValue);

    console.log("test");

    save();
  });

  doc.on("click", "button.removeCounter", function() {
    $(this).parent().remove();
    save();
  });

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:18:11.453

让我们试着把它分成几个部分。首先，您要增加所有计数器的值，因为用于获取您所追求的计数器的选择器会影响**所有计数器**，因此行为是正确的。让我解释：

当你这样做:`var EachContainer = $("div.valueCount")`时，jQuery 返回的对象是*与该选择器匹配的所有元素，*因此如果有多个计数器，所有元素都会受到影响。要解决此问题，您可以使用`this`关键字从您单击的按钮向上移动 DOM 树，然后选择具有该选择器的唯一同级。

```
$(".add").live("click",function(){
        var counter = $(this).siblings(".valueCount");
        counter.html(parseInt(counter.text())+1);
        save();
    }); 
```

这种方法解决了您使用时可能遇到的问题，`.click`因为该方法仅影响在给定时间创建的元素，而不影响将来创建的元素。通过这个小改动，您现在可以创建多个计数器并保存它们的值。但还没有**标题**

第一部分是`save`在每次修改标题时调用该方法，尽管这可以在其他事件（例如`onChange`事件）上完成，但是由于在某些情况下这可能会导致丢失标题并且标题长度应该相对较小，你应该做的很好：

```
$(".title").live("keyup",function(){
   save(); 
}); 
```

第二部分相当简单，因为当我们动态修改表单属性时，某些浏览器无法更改 DOM，这意味着尽管您输入的值发生了变化，但 DOM 并没有反映它，因此当您将内容保存在包含所有计数器的 div，您没有保存该`value`属性。要解决此问题，您最终会得到：

```
$(".title").live("keyup",function(){
    $(this).attr('value',this.value);
    save(); 
}); 
```

请注意，我不会修改您的任何其他代码或标记，并且我已将我的代码包围在您小提琴的一个分支中，并将其放在 Javascript 部分的顶部以便于定位。这是[工作小提琴](http://jsfiddle.net/NCMG7/1/)，能够添加新计数器，更改这些计数器的值及其标题，当然还有删除它们的选项（这已经在工作）。

享受！

* * *

资料来源：

*   [Firefox 不更新 DOM](https://stackoverflow.com/a/1388965/363262)
*   [更新的小提琴](http://jsfiddle.net/NCMG7/1/)
*   [方法`live`_](http://api.jquery.com/live/)

# dns - 用于重定向到查询字符串的 cname/子域？

> ID：13336721
> 
> 赞同：4
> 
> 时间：2012-11-11T23:45:08.850
> 
> 标签：dns, cname

我想做一些事情，我使用我的域的子域重定向到一个长查询字符串。

因此，例如，如果最终目标是类似的东西`www.example.com/info?user=johndoe&color=blue&type=premium`，是否可以设置类似的东西`user.example.com`？

查询字符串很长，因此太大而无法命名。我想在某个重定向的地方保存一个文件，似乎我可以使用我的 dns 注册来做一些事情，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:19:52.847

您不能使用 DNS 发送 HTTP 重定向。您必须使用 HTTP 服务器来执行此操作。请注意，`CNAME`这只会给您一个域名别名，以便`foo.example.org`解析为相同的 IP 地址`bar.example.org`。然后，该 IP 地址上的任何 Web 服务器都负责决定如何响应域名后面的路径。

# python - NameError：未定义全局名称“codepoint2name”

> ID：13336724
> 
> 赞同：0
> 
> 时间：2012-11-11T23:45:40.137
> 
> 标签：python, python-2.7, beautifulsoup

我在 Windows XP 上使用 Python 2.7.3 我正在使用 Pyscripter 2.5.3.0

我正在尝试运行漂亮的汤并使用以下测试代码

```
import urllib2
from bs4 import BeautifulSoup

page = urllib2.urlopen("http://www.google.com")
soup = BeautifulSoup(page)
print soup.prettify() 
```

代码停在`dammit.py`. 错误是：

```
Message File Name   Line    Position    
Traceback               
    <module>    D:\Python\TestBS.py 19      
    <module>    C:\Python27\lib\site-packages\bs4\__init__.py   29      
    <module>    C:\Python27\lib\site-packages\bs4\builder\__init__.py   4       
    <module>    C:\Python27\lib\site-packages\bs4\element.py    5       
    <module>    C:\Python27\lib\site-packages\bs4\dammit.py 49      
    EntitySubstitution  C:\Python27\lib\site-packages\bs4\dammit.py 70      
    _populate_class_variables   C:\Python27\lib\site-packages\bs4\dammit.py 57      
NameError: global name 'codepoint2name' is not defined 
```

在这部分代码上

```
class EntitySubstitution(object):

    """Substitute XML or HTML entities for the corresponding characters."""

    def _populate_class_variables():
        lookup = {}
        reverse_lookup = {}
        characters_for_re = []
        for codepoint, name in list(codepoint2name.items()): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T05:12:21.323

这是 BeautifulSoup 中的一个错误。显然作者错过了从“htmlentitydefs”模块导入符号。因此，您可以通过将导入添加到 BeautifulSoup 代码来自行解决此问题。另外：联系 BeautifulSoup 作者或提交错误报告。

# java - 静态类变量和序列化/反序列化

> ID：13336727
> 
> 赞同：7
> 
> 时间：2012-11-11T23:46:17.193
> 
> 标签：java, serialization, static, deserialization

从 SCJP 6 学习指南 - 有一个问题要求输出以下关于序列化的代码：

```
import java.io.*;

public class TestClass {
  static public void main(String[] args) {
    SpecialSerial s = new SpecialSerial();
    try {
        ObjectOutputStream os = new ObjectOutputStream(new FileOutputStream("myFile"));
        os.writeObject(s);
        os.close();
        System.out.print(++s.z + " ");
        s = null;  // makes no difference whether this is here or not

        ObjectInputStream is = new ObjectInputStream(new FileInputStream("myFile"));
        SpecialSerial s2 = (SpecialSerial)is.readObject();
        is.close();
        System.out.println(s2.y + " " + s2.z);
    } catch (Exception e) {e.printStackTrace();}
  }
}
class SpecialSerial implements Serializable {
    transient int y = 7;
    static int z = 9;
} 
```

这个输出是：10 0 10

给出的原因是静态变量 z 没有序列化，这是我没想到的。

在对象被写入文件后，在 println() 语句中，静态 int 变量 z 的值增加到 10。

既然如此，为什么当类被反序列化时它没有回到它的原始值 9，或者由于没有以正常方式创建类，类默认 int 值 0，而不是保持它的非- 反序列化后的默认增量值为 10？我原以为它是 10 的值会丢失，但事实并非如此。

有人阐明了吗？我在黑暗中跌跌撞撞地在这附近绊倒我的脚趾..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:50:20.587

基本上，实例是序列化的，而不是类。类声明的任何静态字段都不受类实例的序列化/反序列化的影响。要`z`重置为`9`，则`SpecialSerial`需要[重新加载](http://onjava.com/pub/a/onjava/2005/01/26/classloading.html)该类，这是另一回事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T23:51:53.447

The value of `s2.z` is the value of a static member `z` of `SpecialSerial` class, that's why it stays 10\. `z` is bounded by the class, and not the instance.

It's as if you've done this

```
++SpecialSerial.z
System.out.println(SpecialSerial.z) 
```

instead of

```
++s.z
System.out.println(s2.z) 
```

# c++ - glDeleteBuffers() 在析构函数调用期间崩溃

> ID：13336729
> 
> 赞同：4
> 
> 时间：2012-11-11T23:47:03.267
> 
> 标签：c++, qt, opengl

正如 Qt 用户所知，使用任何 OpenGL 扩展都是相当麻烦的。我使它工作的方式是像这样扩展 QGLFunctions 类：

```
 class Object3D : protected QGLFunctions{ 
 ... 
 } 
```

为了使 Object3D 能够正确运行，以便它可以调用 glGenBuffer() 等函数，需要调用

```
initializeGLFunctions(glWidget->context()); 
```

在创建 QGLWidget 之后，否则它会在使用任何扩展功能时简单地使应用程序崩溃。虽然我终于可以在 Object3D 存在期间调用“glGenBuffer()”和其他调用，但它似乎在包含“glDeleteBuffer()”调用的 ~Object3D() 调用时崩溃。我确信正是这个调用导致应用程序崩溃。

有谁知道如何解决这个问题？我怀疑这是因为 QGLWidget 在 Object3D 之前首先被删除，所以 QGLWidget 的上下文消失了。如果是这种情况，我如何确保 QGLWidget 最后被删除，因为 QGLWidget 被添加到 QMainWindow 中，它只是按照添加顺序删除其子级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T23:57:28.270

The general rule is, if you can't *guarantee* that the OpenGL RAII object will be destroyed while the context is still around, then don't wrap OpenGL objects inside RAII C++ classes. Manage the lifetime of OpenGL objects in other ways.

It's your code (which you neglected to show us); only you can decide where or how to manage the destruction of classes. You need some system to manage your objects that will ensure that things are destroyed (and created) in the proper order.

# php - 解析错误：语法错误，意外的 '}'，期待 ',' 或 ';'

> ID：13336730
> 
> 赞同：-4
> 
> 时间：2012-11-11T23:47:05.467
> 
> 标签：php

每当我在下面运行此代码时，都会收到 Parse 错误：语法错误，意外的 '}'，期待 ',' 或 ';' 在第 52 行的 C:\wamp\www\bee\hivedetails.php 中。我查看了代码并且（对我而言）它看起来是正确的。任何帮助将不胜感激。

```
<?php $HiveID=htmlspecialchars($_GET["HiveID"]); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://www.w3.org/2005/10/profile">
    <title>Hive Track</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!--[if IE]>
        <style type="text/css">
            #content {width: 770px; border-left: 2px solid #D1D1D1; border-right: 2px solid #D1D1D1; padding: 15px; margin: 0; background: url('images/content-bg.png');}
            table {border: 2px solid #AAAAAA;}
        </style>
    <![endif]-->

    <!--[if IE 9]>
        <style type="text/css">
            #content {width: 766px; margin: 0 auto; padding: 15px; background: url('images/content-bg.png');}
            table {border: 3px solid white; box-shadow: 0 0 10px #AAAAAA;}
        </style>
    <![endif]-->
</head>
<body>
    <div id="page">
        <div id="title">
            <h1>Hive Track</h1>
            <p></p>
        </div>

        <div id="body">
            <div id="nav">
                <ul>
                    <?php include 'nav.php'; ?>
                </ul>
            </div>

            <div id="header">
            </div>

            <div id="content">
                <?php if ($HiveID>=1) { echo "<h1>Hive Details</h1>";
                } else { echo "<h1>Create A New Hive</h1>";
                } ?>

                <?php if ($HiveID>=1) { echo
                "<?php mysql_select_db('hives'); 
                $query = mysql_query(' . SELECT * FROM hives WHERE HiveID = '$HiveID'') or die(mysql_error()); 
                if(mysql_num_rows($query)>=1){
                while($row = mysql_fetch_array($query)) {
                $hivename = " . $row["HiveName"] . ";
                $location = " . $row["LocationID"] . ";
                } }?>" } else { echo
                "$hivename='';$location='';" } ?>

                <h5></h5><br>
                <?php if ($HiveID>=1) {
                echo "Hive ID: " . $HiveID;
                } ?>
                <form action="hivedetailprocess.php" method="post">
                <input type="hidden" name="HiveID" value=<?php echo $HiveID; ?>>
                Hive Name: <input type="text" name="hivename" value=<?php echo $hivename; ?>> <br>

                <br><br>

                <!--<h5>Code</h5><br>
                <code>&lt;div&gt;&lt;p&gt;This is a code box.&lt;/p&gt;&lt;/div&gt;</code>

                <br><br><br><br>

                <h5>Blockquote</h5><br>
                <blockquote>"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec purus tortor, adipiscing sed vehicula ut, condimentum in arcu. Fusce hendrerit massa non velit dictum a laoreet felis consectetur."</blockquote>

                <br><br>

                <h5>Lists</h5>
                <ol>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                </ol>
                <ul>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                </ul>-->

            </div>

            <div id="footer">
                <p><a href="">Website Name</a></p>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:48:51.447

在第 51 行和第 52 行的两个 echo 后面都需要一个分号

```
 } }?>"; } else { echo
     "$hivename='';$location='';"; } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:17:54.503

这是您的工作代码

```
<?php $HiveID=htmlspecialchars($_GET["HiveID"]); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://www.w3.org/2005/10/profile">
    <title>Hive Track</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!--[if IE]>
        <style type="text/css">
            #content {width: 770px; border-left: 2px solid #D1D1D1; border-right: 2px solid #D1D1D1; padding: 15px; margin: 0; background: url('images/content-bg.png');}
            table {border: 2px solid #AAAAAA;}
        </style>
    <![endif]-->

    <!--[if IE 9]>
        <style type="text/css">
            #content {width: 766px; margin: 0 auto; padding: 15px; background: url('images/content-bg.png');}
            table {border: 3px solid white; box-shadow: 0 0 10px #AAAAAA;}
        </style>
    <![endif]-->
</head>
<body>
    <div id="page">
        <div id="title">
            <h1>Hive Track</h1>
            <p></p>
        </div>

        <div id="body">
            <div id="nav">
                <ul>
                    <?php include 'nav.php'; ?>
                </ul>
            </div>

            <div id="header">
            </div>

            <div id="content">
                <?php if ($HiveID>=1) { echo "<h1>Hive Details</h1>";
                } else { echo "<h1>Create A New Hive</h1>";
                } ?>

                <?php if ($HiveID>=1) { echo
                "<?php mysql_select_db('hives'); 
                $query = mysql_query(' . SELECT * FROM hives WHERE HiveID = '$HiveID'') or die(mysql_error()); 
                if(mysql_num_rows($query)>=1){
                while($row = mysql_fetch_array($query)) {
                $hivename = " . $row["HiveName"] . ";
                $location = " . $row["LocationID"] . ";
                } }?>";  } else { echo
                "$hivename='';$location='';" ; } ?>

                <h5></h5><br>
                <?php if ($HiveID>=1) {
                echo "Hive ID: " . $HiveID;
                } ?>
                <form action="hivedetailprocess.php" method="post">
                <input type="hidden" name="HiveID" value=<?php echo $HiveID; ?>>
                Hive Name: <input type="text" name="hivename" value=<?php echo $hivename; ?>> <br>

                <br><br>

                <!--<h5>Code</h5><br>
                <code>&lt;div&gt;&lt;p&gt;This is a code box.&lt;/p&gt;&lt;/div&gt;</code>

                <br><br><br><br>

                <h5>Blockquote</h5><br>
                <blockquote>"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec purus tortor, adipiscing sed vehicula ut, condimentum in arcu. Fusce hendrerit massa non velit dictum a laoreet felis consectetur."</blockquote>

                <br><br>

                <h5>Lists</h5>
                <ol>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                    <li>Ordered List Item</li>
                </ol>
                <ul>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                    <li>Unordered List Item</li>
                </ul>-->

            </div>

            <div id="footer">
                <p><a href="">Website Name</a></p>
            </div>
        </div>
    </div>
</body> 
```

# jquery - jQuery - 选择父级并隐藏

> ID：13336733
> 
> 赞同：1
> 
> 时间：2012-11-11T23:47:38.727
> 
> 标签：jquery, hide, parent

我有一排靠近 X 浮动的项目。我希望在单击 X 时隐藏整行（嗯，删除，所以不确定是否有什么东西？）。

但是，它对我不起作用。它看似简单的代码，所以不确定我哪里出错了。我什至从这个问题中获取了确切的代码：[jQuery - Can't hide parent](https://stackoverflow.com/questions/4874438/jquery-cant-hide-parent)。它仍然不起作用。

我在这里做错了什么？

[http://jsfiddle.net/2kYrU/9/](http://jsfiddle.net/2kYrU/9/)

HTML：

```
<div class='row'>
    <div class='close'>
    </div>
</div> 
```

CSS

```
.row {   
    background:black;        
    width:200px;
    height:30px;
    cursor:pointer;                
}

.close {
    background:red;            
    width:20px;
    height:20px;
    float:right;
} 
```

jQuery：

```
$(document).ready(function() {

    $('div.close').click(function(){

        $(this).parent.().hide();
    });

}); 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T23:48:49.020

你有一个错字：

```
$(this).parent.().hide();
              ^ 
```

删除那个点，一切正常：http: [//jsfiddle.net/2kYrU/11/](http://jsfiddle.net/2kYrU/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T00:00:56.237

**两件事情：**

您引用父母的方式有一种类型

```
//You have
$(this).parent.().hide();  
//Should be the following
$(this).parent().hide(); 
```

此外，当您使用 JSFiddle 时，您需要将框架更改为您希望在左侧面板上使用的框架。您选择的 mootools 不是 JQuery，因此您的 JQuery 脚本都不起作用。

![在此处输入图像描述](../Images/d24cfa52032ee71c6db32d46679efa87.png)

# ruby-on-rails - 获取相似的模型 - Rails

> ID：13336735
> 
> 赞同：1
> 
> 时间：2012-11-11T23:48:06.423
> 
> 标签：ruby-on-rails

我的`Business`课堂上有以下方法：

```
def similar_businesses(n)
    Business.where(:category_id => category_id, :city_id => city_id).where("id NOT IN (?)",id).limit(n).order("RANDOM()")
end 
```

它基本上抓住`n`了同一类别和同一城市的企业。

我正在查看一个关于使用类方法而不是范围的 railscast，并尝试将我的代码转换为：

```
def similar_businesses(n)
    where(:category_id => category_id, :city_id => city_id).where("id NOT IN (?)",id).limit(n).order("RANDOM()")
end 
```

通知`Business`不再存在。

但是，我收到一个错误`undefined where method for ...`

我刚刚开始使用rails，我也想知道这两种方法有什么区别吗？为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:52:29.380

您需要将方法定义为`def self.similar_businesses`使其成为类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:54:03.797

似乎您想`similar_businesses`用作*类*方法而不是*实例*方法。两者之间的区别在于，您为类（例如 Business）使用类方法，而您为之类的东西应用实例方法`@business = Business.new`。

尝试使用

```
def self.similar_businesses(n)
  where(:category_id => category_id, :city_id => city_id).where("id NOT IN (?)",id).limit(n).order("RANDOM()")
end 
```

# html - 设置 div 最大高度不起作用

> ID：13336737
> 
> 赞同：10
> 
> 时间：2012-11-11T23:48:32.137
> 
> 标签：html, css

我有这个简单的 HTML

```
<html>
<head>
    <style>
    </style>
</head>
<body>
<div style="position: relative; overflow: visible; width: 100%; height: 100%;" class="surface">
    <div style="width: 300px; max-height: 2px; height: 2px; position: absolute; left: 36.165px; top: 0.8957px; border: 1px solid red;"></div>
    <div style="width: 1px; height: 200px; position: absolute; left: 30.165px; top: 47.8957px; border: 1px solid red;"></div>   
</div>
</body>
</html> 
```

基本上有两个`div`s：一个“水平”（高度2px）和一个“垂直”（高度2px）。

当我在 Firefox 上查看页面时：

![在此处输入图像描述](../Images/6c466928a9abc59ee2904c3b40af729b.png)

而在 IE (8) 上发生了一些奇怪的事情：

![在此处输入图像描述](../Images/e5c58126ddb8541b9f25bcfe4454dc93.png)

顶部 DIV 不是 2px 高。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T00:04:07.807

您可能的解决方案：

1）。添加`display: block`到您的风格

2）。检查你有一个适当的`DOCTYPE`否则（IE）怪癖模式会产生意想不到的格式和结果。[检查这篇文章以供参考](http://www.alistapart.com/articles/doctype/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T23:58:37.813

您的问题似乎源于 ie 的`quirks mode`模式。

它在没有 doctype 声明时发生。最大高度，除其他外（包括盒子模型）就像 ie5 一样。一个简单的解决方案是添加一个 doctype 声明：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-11T23:55:58.600

IE7, 8 and 9 works fine here.

You dont really need the `max-height`, but setting a `display: block` and/or `line-height: 2px` instead could be a solution.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-11T23:54:45.543

I suspect this will be IE addding some "helpful" settings in quirks mode that pushes the height of a container to the minimum text height. Try setting `line-height: 2px;` for IE8 and lower (conditional comments, perhaps?) and that should sort it.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-18T11:08:31.260

就我而言，有一个

> 最小高度

设置覆盖其他设置

# c# - 试图在winform c#中放大图像

> ID：13336741
> 
> 赞同：0
> 
> 时间：2012-11-11T23:48:50.633
> 
> 标签：c#, winforms

在 button1_Click 上，我试图将图像的大小增加 10 或放大它。但是正在发生的事情是图片框的大小正在增加，而图像没有发生任何事情。如何进行图像缩放。请建议我最简单的方法。

```
public partial class Form1 : Form
{
public Form1()
{
    InitializeComponent();
}
private void pictureBox1_Click(object sender, EventArgs e)
{
    // Construct an image object from a file in the local directory.
    // ... This file must exist in the solution.
    Image image = Image.FromFile("Picture1.png");
    // Set the PictureBox image property to this image.
    // ... Then, adjust its height and width properties.
    pictureBox1.Image = image;
    pictureBox1.Height = image.Height;
    pictureBox1.Width = image.Width;
  }
}
    private void Form1_Load(object sender, EventArgs e)
    {

    }
    private void button1_Click(object sender, EventArgs e)
    {
        pictureBox1.Width += 10;
        pictureBox1.Height +=10;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T23:52:46.077

The simple way that works with what you're trying to achieve is by using the PictureBox's SizeMode property; set it to StretchImage.

[PictureBox.SizeMode Property - MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.picturebox.sizemode.aspx)

However, once you're more comfortable with GDI+ (and perhaps even unsafe contexts) you should look at doing this programatically yourself for greater flexibility.

# php - 从数据库中获取信息

> ID：13336744
> 
> 赞同：1
> 
> 时间：2012-11-11T23:49:01.007
> 
> 标签：php, mysql, database, codeigniter, xampp

我更新的问题在这里：

[从数据库 MYSQL 和 Codeigniter 中获取信息](https://stackoverflow.com/questions/13337696/fetching-information-from-the-database-mysql-codeigniter)

请参见 ：）

* * *

我只是想问一下这段代码有什么问题。从昨晚开始，我一直在努力解决这个问题。我再次发布这个问题。我猜我的语法有问题。

```
function member_here()
{
    $this->db->select('');
    $this->db->from('membership');
    $this->db->where('username',$this->input->post('username'));
    $q=$this->db->get('');

    if($q->num_rows() > 0) {
        $data = array();
        foreach($q->result() as $row) {
            $data=$row;
        }
        return $data;
    }
} 
```

所以无论如何。其输出将是从数据库中选择的信息。

**但**

我认为代码的某些部分是正确的，因为它给出了输出。但它仍然不对。

假设我有这些数据：

```
|-------Name-----|-----Username-----|---------Email Address----------|
|     Marishka   |   marishkapv     |    marishka@email.com          |
|     John       |   johndoe        |   john@doe.com                 |
|     Dennis     |   dennisv        |     dennis@v.com               | 
```

所以，我使用 Marishka 登录。登录成功后。我在主页看到**的信息是dennis的信息**

与我登录**john相同**

从数据库中获取的数据是最后存储的数据。如何从属于我登录的特定用户名的数据库中选择

请回答。太感谢了！

**这是更新**

这是我视图表单中的代码

```
<?php
$CI =& get_instance();
$CI->load->model('membership_model');
$result = $CI->membership_model->member_here();
?>

User Information:

</br></br></br>
Name: &nbsp;<?php echo $result->first_name; echo " ";   echo $result->last_name;?><br/></br>
Email Address: &nbsp;<?php echo $result->email_address; ?><br/></br>
Date of Birth: &nbsp;<br/></br>
Gender: &nbsp;<?php echo $result->gender;   ?><br/></br>
</br></br></br>
Account Information:<br/></br></br>

Username:<?php echo $this->session->userdata('username'); ?><br/></br>
Security Question: <?php echo $result->security_question;   ?>&nbsp;<br/></br>
Security Answer: <?php echo $result->security_answer;   ?>&nbsp;<br/></br> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:07:40.850

You have

```
$data = array();
foreach($q->result() as $row) {
    $data=$row; // every time $data variable is being updated with new value
} 
```

It'll return the last record because every time loop updates the `$data` with new value, if you change it to following

```
$data = array();
foreach($q->result() as $row) {
    $data[]=$row;
} 
```

Then it'll keep all the rows as an array in the `$data`.

Alternatively you can use following code without the `foreach` loop

```
$data['result']=$q->result(); 
```

and in your view you can loop like

```
foreach($result as $row) {
    echo $row->name;
     ...
} 
```

**Update:** You should use model, view, controller properly. You are using `model` in your `view` but you shouldn't do this. Load and use the `model` in your `controller` and from the controller load the `view` and pass data like,

```
$this->load->view('your_view_name', $data); 
```

And `loop` inside the `view` as I mentioned above. Here is another [similar answer](https://stackoverflow.com/questions/12888092/return-a-variable-in-my-model-if-the-query-returns-true/12888250#12888250).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:56:55.453

In codeigniter its usually this, unless you are using a custom authentication library that does it differently.

```
$user_id = $this->session->userdata('account_id'); 
```

So you should use

```
$this->db->where('user.id',$this->session->userdata('account_id')); 
```

I changed the lookup field from name to id, because you should perform lookups on ID's, because two people may have the same name etc. Lookup of INT's is faster as well.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:06:07.307

您的数据库查询有问题 - 您的描述表明正在返回每一行（或者至少总是返回丹尼斯的行）。

您的代码只是遍历所有返回的行并打印最后一行。

添加一些调试代码以在循环之前转储返回的数据集并优化您的查询。

# android - 如何弹出一个Android对话框

> ID：13336746
> 
> 赞同：0
> 
> 时间：2012-11-11T23:49:09.750
> 
> 标签：android, dialog

我有以下代码不起作用，我应该怎么做才能调试它？

我创建了一个新的 android 2.2 项目，添加了一个按钮，该按钮有：

```
 android:onClick="Test" 
```

功能在`Test()`这里：

```
public void Test(View view) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this.getApplicationContext());
    builder.setTitle("Title");
    builder.setMessage("Message");
    builder.setPositiveButton("ok", new OnClickListener() {
            public void onClick(DialogInterface arg0, int arg1)
            {
                // TODO Auto-generated method stub
                arg0.dismiss();
            }});
    builder.setCancelable(false);
    builder.create().show();
} 
```

当它被触发时，`show()`将导致此异常：

```
Thread [<1> main] (Suspended (exception WindowManager$BadTokenException))   
    <VM does not provide monitor information>   
    AlertDialog(Dialog).show() line: 245    
    MainActivity.Test(View) line: 39    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 521  
    View$1.onClick(View) line: 2067 
    Button(View).performClick() line: 2408  
    View$PerformClick.run() line: 8817  
    ViewRoot(Handler).handleCallback(Message) line: 587 
    ViewRoot(Handler).dispatchMessage(Message) line: 92 
    Looper.loop() line: 143 
    ActivityThread.main(String[]) line: 4914    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 521  
    ZygoteInit$MethodAndArgsCaller.run() line: 868  
    ZygoteInit.main(String[]) line: 626 
    NativeStart.main(String[]) line: not available [native method] 
```

顺便说一句，我还尝试了其他一些事情：[DialogFragment doesn't show up](https://stackoverflow.com/questions/13331388/dialogfragment-doesnt-show-up/13332727#13332727)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T23:59:24.940

从您的 layout.xml 中删除 android:onClick="Test" 并使用

```
Button btn = (Button) view.findViewById(R.id.your_btn);
btn.setOnClickListener(new OnClickListener() {
test();
}); 
```

反而

顺便提一句。你不应该使用 getApplicationContext() ---> 使用这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:51:01.187

那是一个独特的 LogCat，您手动重写了，不是吗... :) 下次您可以突出显示 LogCat 并按`Ctrl`+`C`

无论如何，我看到了 BadTokenException。改变：

```
new AlertDialog.Builder(this.getApplicationContext()); 
```

到：

```
new AlertDialog.Builder(MyActivity.this); 
```

# java - 随机驱逐地图值

> ID：13336750
> 
> 赞同：2
> 
> 时间：2012-11-11T23:49:33.340
> 
> 标签：java, random, hashmap, probability

我需要能够将元素从包含只能访问迭代器的元素`m`的地图中逐出。`n`我可以简单地迭代字典一次并删除所有具有概率的元素`m/n`，但是这可能会驱逐更多或更少的`m`项目（尽管删除的项目的*预期*数量是正确的`m`）。

```
int m = 10;
int n = map.size();

Iterator<K> keys = map.keySet().iterator();
while (keys.hasNext()) {
    keys.next();
    if (random.nextDouble() < m / (double) n) {
        keys.remove();
    }
} 
```

我一直在考虑的解决方案是在元素被驱逐后简单地停止驱逐元素`m`，并在迭代结束时，如果`evicted < m`元素已被驱逐，则`m - evicted`在第二次迭代中驱逐剩余的元素。我担心这第二遍在概率上是不正确的。

```
int m = 10;
int n = size();
int evicted = 0;

outer: while (evicted < m) {

Iterator<K> keys = keySet().iterator();
while (keys.hasNext()) {
    keys.next();
    if (random.nextDouble() < m / (double) n) {
        keys.remove();

        if (++evicted == m) {
            break outer;
        }
    }
} 
```

或者，我可以保留一个键列表并通过一次迭代对列表进行存储采样，并删除键列表中的所有`m`键，但是我不想被迫使用一些内存开销。此外，使用迭代器删除比通过键删除元素更快（它需要找到存储键的存储桶，然后找到它在列表中的位置）。是否有另一种在线算法我可以使用仅访问迭代器（不创建单独的列表）？

**编辑：**对于那些感兴趣的人，我找到了一篇论文，详细介绍了如何生成随机分布*，以便*不需要单独的排序步骤。代码是这样的（截断为整数时可能包含重复项）：

```
int curmax = 1.0;
int[] indices = new int[m];
for (int i = indices.length; i >= 0; i--) {
    curmax = curmax * Math.pow(random.nextDouble(), 1 / (double) (i+1));
    indices[i] = (int) curmax;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T00:00:22.893

为什么不直接驱逐前*M*个元素然后停止迭代器？迭代器中是否反映了一些排序，这会对被驱逐的元素产生不必要的偏见？

如果是，那么您的两遍方法将*不会*在统计上完美无缺。如果第一次通过提前终止，因为您在到达迭代结束之前到达*M ，则永远不会考虑驱逐后面的元素。*

如果您在没有驱逐*M*个元素的情况下到达迭代结束，则迭代的第一个元素将“冒险”驱逐两次，而接近迭代结束的元素将仅冒着驱逐一次的风险。

如果您事先知道*N*，您可以构建一个包含*M*个介于 0 和 N 之间的随机、非重复数字的列表。迭代一次，记下您在迭代中所处的位置。如果迭代号在您的“驱逐列表”上，请驱逐该元素。

按照这种方法，您只能为迭代过程临时为*M 个索引位置（可能是整数）分配内存。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:11:04.823

这样做的正确方法是以概率 m/n 删除每个元素，但根据结果重新归一化概率（如果我们删除一个元素，则递减 m，并且当前概率需要按剩余元素的数量进行缩放以选择从）。我的 java 有点生疏，我无法访问编译器，所以如果这不能正常工作，请原谅（但我希望你应该能够轻松修复它）：

```
int seen = 0

Iterator<K> keys = map.keySet().iterator();
while (keys.hasNext()) {
    if (m==0)
      break;

    keys.next();
    prob = m / (double)(n-seen)  //renormalise the prob so that the total available is 1 across all remaining instances
    if (random.nextDouble() < prob) {
        keys.remove();
        m--;
    }
    seen++;
} 
```

我希望这里的逻辑很清楚——这是对如何以 1/n 的概率从集合中采样一个元素的概括，一旦你拒绝了一个元素，你可以忽略它并考虑所有剩余元素的分布。这应该确保您以正确的概率准确返回 m 个元素。

**编辑**：

修正了几个错别字并删除了多余的变量。

# java - 有没有人有任何使用循环的简单 JEXL 示例。我希望遍历一个简单的数组以输出各种字符串值？

> ID：13336761
> 
> 赞同：4
> 
> 时间：2012-11-11T23:50:57.787
> 
> 标签：java, jexl

有没有人有任何使用循环的简单 JEXL 示例。我希望遍历一个简单的对象数组列表以输出各种字符串值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-12T21:19:54.607

输入 452' 的完整示例如下：

> ```
> public static void testSimpleList() {
> 
>         List<String> list = new ArrayList<String>();
>         list.add("one");
>         list.add("two");
> 
>         JexlContext jexlContext = new MapContext();
>         jexlContext.set("list", list);;
> 
>         Map<String, Object> functions1 = new HashMap<String, Object>();
>         functions1.put("system", System.out);
> 
>         JexlEngine jexl = new JexlEngine();
>         jexl.setFunctions(functions1);
>         Expression expression = jexl.createExpression("for(item : list) { system:println(item) }");
> 
>         expression.evaluate(jexlContext);
> 
>     } 
> ```

输出 ：

> ```
> one
> two 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-01T15:24:47.293

看起来它需要一个使用脚本而不是表达式。

这失败并出现错误“'for'中的解析错误”

```
e = new org.apache.commons.jexl3.JexlBuilder().create();
c = new org.apache.commons.jexl3.MapContext();
c.set("a", Arrays.asList(1,2,3));
e.createExpression("for(x : a) { b=x }").evaluate(c) 
```

但是，这有效

```
e.createScript("for(x : a) { b=x }").evaluate(c) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-15T07:05:29.830

遍历数组、集合、映射、迭代器或枚举的项目，例如

```
for(item : list) {
    x = x + item; 
} 
```

其中 item 和 list 是变量。使用 foreach(item in list) 的 JEXL 1.1 语法现已弃用。

[http://commons.apache.org/proper/commons-jexl/reference/syntax.html](http://commons.apache.org/proper/commons-jexl/reference/syntax.html)

```
import java.util.HashMap;
import java.util.Map;

import org.apache.commons.jexl2.Expression;
import org.apache.commons.jexl2.JexlContext;
import org.apache.commons.jexl2.JexlEngine;
import org.apache.commons.jexl2.MapContext;

public class Main {

    public static void main(String[] args) {
        JexlContext jexlContext = new MapContext();
        Map<String, Object> functions = new HashMap<String, Object>();
        functions.put("system", System.out);
        JexlEngine jexl = new JexlEngine();
        jexl.setFunctions(functions);
        Expression expression = jexl.createExpression("for(item : list) { system:println(item) }");
        expression.evaluate(jexlContext);
    }

} 
```

pom.xml

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-jexl</artifactId>
    <version>2.1.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T04:07:00.203

首先，您应该使用**Script evaluator**，而不是**Expression evaluator**。表达式求值器不支持复杂的循环语法。参考[这里](https://commons.apache.org/proper/commons-jexl/apidocs/org/apache/commons/jexl3/package-summary.html)

> **JexlScript**
> 
> 这些允许您使用多个语句，并且您可以使用变量赋值、循环、计算等。或多或少可以在 Shell 或 JavaScript 中实现其基本级别。最后一个命令的结果从脚本返回。
> 
> **JxltEngine.Expression**
> 
> 这些是生成“单行”文本的理想选择，例如类固醇上的“toString()”。要进行计算，请使用 ${someVariable} 中类似 EL 的语法。括号之间的表达式的行为类似于 JexlScript，而不是表达式。您可以使用分号来执行多个命令，最后一个命令的结果会从脚本中返回。您还可以使用 #{someScript} 语法使用 2-pass 评估。

**试试这个，**

```
JexlScript jexlExpression = jexl.createScript("var x='';for(item:[1,2,3]){ x=x+item;}");

jexlExpression.evaluate(jexlContext); 
```

一旦这对您有用，您也可以使用自己的数组。

# mysql - 使用平均和分组依据

> ID：13336762
> 
> 赞同：-3
> 
> 时间：2012-11-11T23:51:00.093
> 
> 标签：mysql, sql, group-by, average

我正在编写一个查询，该查询需要根据每种类型计算电影的平均成本。我正在使用 MySQL 编写此查询。到目前为止，我有`

```
SELECT 
    MOVIE_NUM,
    MOVIE_GENRE,    
    ROUND(AVG(MOVIE_COST), 2) AS 'AVERAGE COST',
    MOVIE_COST
FROM
    MOVIE
GROUP BY MOVIE_GENRE 
ORDER BY MOVIE_NUM 
```

这给了我以下输出：

```
MOVIE_NUM  MOVIE_GENRE  AVERAGE COST  MOVIE_COST
1234       FAMILY       39.95         39.95
1235       ACTION       52.72         59.95
1236       DRAMA        58.46         59.95
1237       COMEDY       44.12         29.95 
```

但是我需要这种格式：

```
MOVIE_NUM  MOVIE_GENRE  AVERAGE COST  MOVIE_COST
1234       FAMILY       39.95         39.95
1235       ACTION       52.72         59.95
1236       DRAMA        58.46         59.95
1237       COMEDY       44.12         29.95
1238       DRAMA        58.46         89.95
1239       DRAMA        58.46         25.49
1245       ACTION       52.72         45.49
1246       COMEDY       44.12         58.29 
```

任何帮助表示赞赏。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:57:05.390

You can't get all records from the same query that you are grouping. Calculate the averages in one query and join against the table:

```
selecct
  m.MOVIE_NUM,
  m.MOVIE_GENRE,
  a.AVGCOST AS 'AVERAGE COST',
  m.MOVIE_COST
from
  MOVIE as m
  inner join (
    select MOVIE_GENRE, round(avg(MOVIE_COST)) as AVGCOST
    from MOVIE
    group by MOVIE_GENRE
  ) as a on a.MOVIE_GENRE = m.MOVIE_GENRE
order by MOVIE_NUM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T23:59:01.477

在 mysql 中可能有更短的方法来执行此操作，因为它有一些巧妙的分组技巧，但这应该有效：

```
Select
  m.Movie_Num,
  m.Movie_Genre,    
  gc.Average_Cost,
  m.Movie_Cost
From
  Movie m
    Inner Join (
      Select
        Movie_Genre,
        Round(Avg(Movie_Cost), 2) AS 'Average_Cost'
      From
        Movie
      Group By
        Movie_Genre
      ) as gc
     On m.Movie_Genre = gc.Movie_Genre
Order By 
  m.Movie_Num 
```

# python - Python（2.7）：动态添加类方法

> ID：13336768
> 
> 赞同：3
> 
> 时间：2012-11-11T23:51:56.853
> 
> 标签：python

我有一些类的方法，我希望能够选择性地添加到其他类中。我最初的解决方案是使用 mixins，但这可能会有点难看：

```
class Schedule(Enumerator, Humanizer, Inferer, ...):
    ... 
```

所以我想，嘿，也许我可以使用类装饰器来达到同样的效果。

```
@enumerator
@humanizer
@inferer
class Schedule(object):
    ... 
```

这是装饰器功能的示例：

```
import inspect

def inferer(original_class):
    from myproj.lib.inferer import Inferer
    methods = inspect.getmembers(Inferer, predicate=inspect.ismethod)
    for method in methods:
        setattr(original_class, method[0], types.MethodTypes(method[1], original_class))
    return original_class 
```

...这似乎将方法和类方法适当地添加到装饰类中。但是，当我在装饰类上调用这些添加的方法（或类方法）之一时，会出现一些错误。

对于方法：

```
>>> Schedule().humanize()
TypeError: unbound method humanize() must be called with Humanizer instance as first argument (got type instance instead) 
```

...这似乎表明这些是作为类方法添加的？

对于类方法：

```
>>> schedule = Schedule.infer(foo)
TypeError: infer() takes exactly 2 arguments (3 given) 
```

注意推断的定义：

```
class Inferer(object):
    @classmethod
    def infer(cls, dates):
        ... 
```

我添加了一些行来`infer`显示它在调用时得到的参数`Schedule.infer()`：

```
cls: <class 'myproj.lib.inferer.Inferer'>
dates: <class 'myproj.Schedule'> 
```

* * *

所以，我的问题：

装饰器函数出了什么问题，导致这些添加的方法和类方法行为异常？或者，更好地说，如何修改装饰器函数以正确处理这些添加？

请让我知道我是否可以就任何问题提供任何澄清。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T00:09:17.513

假设这是一个好主意。这是您可能实现它的一种方式。不过，我不能说我会建议它。

```
def horrible_class_decorator_factory(mixin):
    def decorator(cls):
        d = cls.__dict__.copy()
        bases = tuple([b for b in cls.__bases__ if b != object] + [mixin])
        return type(cls.__name__, bases, d)
    return decorator 
```

现在您可以执行以下操作：

```
class Inferer(object):
    @classmethod
    def foo(cls):
        return "bar" + cls.__name__

inferer = horrible_class_decorator_factory(Inferer)

@inferer
class X(object):
    pass

X.foo()
"barX" 
```

我和这个评论者在一起。仅仅因为你可以做某事并不意味着你应该做。

# php - How to check if page url has www in it or not with PHP?

> ID：13336777
> 
> 赞同：7
> 
> 时间：2012-11-11T23:53:02.967
> 
> 标签：php

In PHP, how can I check if the current page has www in the url or not?

E.g if the user is on [http://www.example.com/something](http://www.example.com/something) , how can I find that there's www in the URL, and on [http://example.com/something](http://example.com/something) , www isn't in the url?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-12T00:37:56.757

您可以使用`$_SERVER['HTTP_HOST']`来获取您的域。现在，如果您的网站不使用子域，这很容易。只需使用这样的东西：

```
$url1 = "www.domain.com";
$params = explode('.', $url1);

if(sizeof($params === 3) AND $params[0] == 'www') {
    // www exists   
} 
```

请注意，如果您的 params 数组有 2 个项目，则 domain 看起来像这样`domain.com`并且没有`www`明确的。您甚至可以检查数组的大小并根据其大小`$params`决定是否存在。`www`

现在，如果您的站点使用子域，那么它会变得更加复杂。您可能会遇到以下情况：

```
$url1 = "www.domain.com";
$url2 = "www.sub.domain.com";
$url3 = "domain.com";
$url4 = "sub.domain.com"; 
```

然后你会再次分解每个 url，比较大小并检查第一项是否是“www”。`www`但请注意，您的子域可以命名`www`为子域：D 然后它看起来像这样：`www.domain.com`，再一次，`www`是子域:) 这太疯狂了，我几乎对这个发疯了 :)

无论如何，要检查`www`站点何时不使用子域，这很容易。但是要检查 url 是否有`www`并且您的网站是否正在使用子域，这可能很困难。如果可以的话，处理该问题的最简单的解决方案是禁用`www`子域。

如果您需要更多帮助并且这不能回答您的问题，请随时提问。我有类似的情况，用户可以创建自己的子域帐户，例如`www.user.domain.com`，我必须做同样的事情。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T00:04:37.233

你可以这样做`preg_match`：

```
if(preg_match('/www/', $_SERVER['HTTP_HOST']))
{
  echo 'you got www in your adress';
}
else
{
  echo 'you don not have www';
} 
```

您甚至可以使用 .htaccess 来执行此操作，具体取决于您正在构建的内容，上述选项对于简单检测来说很好。

如果您选择 Ferdia 提供的选项，请按以下方式进行检查：

```
$domain = array_shift(explode(".",$_SERVER['HTTP_HOST']));
if(in_array('www', $domain))
{
    echo 'JUP!';
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-11T23:59:26.007

你已经知道网址了吗？然后拿这个：

```
<?php
$parsed = parse_url("http://www.example.com/something");
$hasWww = strpos($parsed['host'], "www.") === 0;
var_dump($hasWww); 
```

否则，采取

```
 strpos($_SERVER['HTTP_HOST'], "www.") === 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-27T21:40:42.643

有很多方法可以检查 www 是否包含。

一种方法是：

```
if(strpos($_SERVER['HTTP_HOST'], `www`) !== false) {
    echo "WWW found";
} else {
    echo "WWW not found";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-11T23:55:58.710

```
array_shift(explode(".",$_SERVER['HTTP_HOST'])); 
```

Should work, then examine the array for the presence of www. If you are simply trying to remove or force www, then a .htaccess rule is by far superior to PHP for that job.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T00:00:52.667

[从手册](http://php.net/manual/en/reserved.variables.server.php)

`$_SERVER['HTTP_HOST']`

> 主机内容：当前请求的标头（如果有）。

`$_SERVER['SERVER_NAME']`

> 当前脚本在其下执行的服务器主机的名称。如果脚本在虚拟主机上运行，​​这将是为该虚拟主机定义的值。

# jquery - :remote => true Rails 中的 Ajax 调用不起作用

> ID：13336781
> 
> 赞同：1
> 
> 时间：2012-11-11T23:54:17.763
> 
> 标签：jquery, ajax, ruby-on-rails-3

我正在关注关于 jQuery 和 Ajax的[RailsCast视频。](http://railscasts.com/episodes/136-jquery-ajax-revised)我已将该`:remote => true`行添加到`link_to`. 在视频中，它说什么都不应该发生，但链接仍然会转到页面。

正在加载 jQuery（我将它用于我的 Rails 应用程序中的其他事情）。

我正在尝试链接到两个不同的资源（我通过脚手架生成的东西），这可能是问题所在。我不知道。

如果您需要查看更多代码，请告诉我。

**编辑**

在一些以前的 JS 之后，我有 jquery_ujs 行。我已将其移至顶部，远程链接现在没有转到该页面。但是，对于我的 new.js.erb 文件，单击链接时似乎无法显示表单。

链接代码：

```
<%= link_to 'New Project', new_project_path, :id => "new-project-link", :remote => true %> 
```

新的.js.erb：

```
$('#new-project-link').hide().after('<%= j render("form") %>'); 
```

另外，我的标题状态是 304（未修改）而不是 200。这有关系吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:16:14.540

确保在布局的 head 部分中包含 csrf_meta_tags：

[http://apidock.com/rails/ActionView/Helpers/CsrfHelper/csrf_meta_tags](http://apidock.com/rails/ActionView/Helpers/CsrfHelper/csrf_meta_tags)

另外，我会检查您的 respond_to 块（用于 js）是否在控制器操作（Projects#new）中正确设置，并确保请求是 GET。我认为这将是每个 jquery_ujs 默认情况下的 POST。

# php - Notice: Undefined variable: title in E:\xampp\htdocs\blog4\new-post.php on line 11

> ID：13336788
> 
> 赞同：0
> 
> 时间：2012-11-11T23:55:44.503
> 
> 标签：php, html, mysql

Notice: Undefined variable: title in E:\xampp\htdocs\blog4\new-post.php on line 11

I keep getting this error and also Missing data is appearing before any data is submitted

```
include('db.php');

        if(isset($_POST['submit'])){
        $title = $_POST['title'];
        $body = $_POST['body'];

}

if($title && $body){
            $query = mysql_query("INSERT INTO posts (title, body) VALUES('$title', '$body')");
            if($query){
                echo"Post Added";
                }else{
                echo"error";}
        }else{
            echo"Missing data";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:24:00.890

`db.php`：

```
<?php
$db = new PDO('mysql:host=127.0.0.1;dbname=db_name_here', 'username', 'password');
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
?> 
```

`new-post.php`：

```
<?php
include 'db.php';
if(isset($_POST['submit'])) {
    $query = $db->prepare('INSERT INTO posts (title, body) VALUES (?, ?)');
    $result = $query->execute(array($_POST['title'], $_POST['body']));
    if($result) {
        echo 'Post Added!';
    } else {
        echo 'Database error.';
    }
} else {
    echo 'Missing data!';
}
?> 
```

* * *

请**不要**使用`mysql_*`函数，它们不再被维护并且处于弃用过程中。

请改用[PDO](http://php.net/pdo.construct)。

PDO 还支持预处理语句，这有助于避免 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:01:24.573

如果`$_POST['submit']`没有设置，`$title`将不会被初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T00:02:22.053

替换为

```
if (isset($title, $body)) {
    //.... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T00:12:42.497

Check for a POST request then check and set your values; If values are not null then do your query, also make your inputs safe else having `'` in your data will cause an error.

```
include('db.php');

if($_SERVER['REQUEST_METHOD']=='POST'){
    $title = (!empty($_POST['title'])?$_POST['title']:null);
    $body  = (!empty($_POST['body'])?$_POST['body']:null);

    if($title != null && $body != null){
        $query = mysql_query("INSERT INTO posts (title, body) VALUES ('".mysql_real_escape_string($title)."', '".mysql_real_escape_string($body)."')");
        if($query){
            $result = "Post Added";
        }else{
            $result = "Error";
        }
    }else{
        $result = "Missing data";
    }

    echo $result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T00:02:38.347

像这样在顶部用空初始化 $title

```
$title = ""; 
```

# iphone - FBLoginView : Crash when Facebook already login

> ID：13336795
> 
> 赞同：2
> 
> 时间：2012-11-11T23:56:45.123
> 
> 标签：iphone, objective-c, ios, facebook, loginview

I have a problem with FBLoginView on IOS. I initialized the FBLoginView and added to CustomAlertView I made myself. If shown up normally if the FBLoginView is in a login state where the FB button showing LOGIN. On the other hand, if the user already logged in and trying to show the customAlertView again it crashed when the application initializing the FBLoginView.

Does anyone have this problem before.

# python - 我们可以在 python 中使用'local'，因为我们可以在方案中使用'local'吗？

> ID：13336798
> 
> 赞同：0
> 
> 时间：2012-11-11T23:56:56.447
> 
> 标签：python, scheme, racket

在scheme中，我们可以使用功能码：local，使用起来很方便。那么，python中有没有类似的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:07:00.543

我怀疑您在问是否可以在 python 中的函数中定义具有与非嵌套函数类似的行为的函数。

答案是，是的。

```
def some_function():

    def some_other_function():
        # code that does stuff
        pass

    # code that does stuff
    pass 
```

这两个函数的功能相同，只是 的范围`some_other_function`在 的范围内`some_function`。

# php - 如果语句在 Objective C 中不能正常工作

> ID：13336799
> 
> 赞同：0
> 
> 时间：2012-11-11T23:56:58.540
> 
> 标签：php, objective-c, xcode, if-statement, get

我正在创建一个要求用户输入用户名和密码的应用程序。一旦他们填写了文本字段，数据就会使用 GET 发送到 locahost。如果用户名和密码匹配，我的 php 设置为返回值 1，如果不匹配，则返回 2。但是，如果我尝试创建这样的 if 语句：`if ([received isEqualTo:@"1"]) { NSLog(@"Access Granted"); }else{ NSLog(@"Access Denied"); }`

它返回为拒绝访问，即使我执行 Nslog 它返回为 1 但它仍然没有说访问被授予。

这是 AppDelage.m：

```
 //
//  AppDelegate.m
//  possys
//
//  Created by  on 11/11/12.
//  Copyright (c) 2012 . All rights reserved.
//

#import "AppDelegate.h"

@implementation AppDelegate
@synthesize username;
@synthesize password;
@synthesize super;
@synthesize alert;
@synthesize connection = _connection;
@synthesize receivedData = _receivedData;

       - (void)applicationDidFinishLaunching:(NSNotification *)aNotification
    {
        // Insert code here to initialize your application
    }

    - (IBAction)login:(id)sender {
        NSString *user = [username stringValue];
        NSString *pass = [password stringValue];
        NSString *strurl = [NSString stringWithFormat:@"http://localhost/index.php?username=%@&password=%@",user,pass];
        [self.connection cancel];

        //initialize new mutable data
        NSMutableData *data = [[NSMutableData alloc] init];
        self.receivedData = data;

        //initialize url that is going to be fetched.
        NSURL *url = [NSURL URLWithString:strurl];

        //initialize a request from url
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

        //initialize a connection from request
        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        self.connection = connection;

        //start the connection
        [connection start];

    }

    -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
            [self.receivedData appendData:data];

        }

    -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{

            NSLog(@"%@" , error);
        }
    -(void)connectionDidFinishLoading:(NSURLConnection *)connection{

        //initialize convert the received data to string with UTF8 encoding
        NSMutableString *received = [[NSMutableString alloc] initWithData:self.receivedData
                                                  encoding:NSUTF8StringEncoding];
        NSLog(@"%@" , received);

        if ([received isEqualTo:@"1"]) {
            NSLog(@"YUPYUPYUP");
        }else{
            NSLog(@"YNO");
        }
    } 
```

这是我的 php：

```
<?php 

   mysql_connect("localhost","root","abc123") or die (mysql_error());
   mysql_select_db("authentication") or die (mysql_error()); 

    $username = $_GET['username'];
    $password = $_GET['password'];

$username = stripslashes($username);
$password = stripslashes($password);

$sql = "select * from users where username = '$username' and password = '$password'";

$result = mysql_query($sql) or die (mysql_error());

$count = mysql_num_rows($result);

if ($count == 1) {
echo "1";
}

else{
    echo "2";

}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:03:17.973

假设存在某种空白问题，您可以尝试：

```
if([received intValue] == 1)
    NSLog(@"YUPYUPYUP");
else
    NSLog(@"NO"); 
```

这样系统就会解析文本以获取一个数字，然后比较该数字，而不是寻找一个精确的字符串匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T00:09:10.937

尝试使用 isEqualToString: 方法而不是 isEqualTo:

```
 if ([received isEqualToString:@"1"]) {
        NSLog(@"YUPYUPYUP");
    }
    else{
        NSLog(@"YNO");
    } 
```

# ios - 我在 IOS 中遇到字符串/服务器问题

> ID：13336800
> 
> 赞同：0
> 
> 时间：2012-11-11T23:57:03.340
> 
> 标签：ios, xcode, nsstring

我从我的服务器收到此响应，但不确定如何将其解析为易于量化的字符串。

我收到什么“[”是“]”

我想要什么@“是”

我相信这很简单我只是累了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:04:52.480

```
NSString *stringToCheck = @"['Yes']";
NSString *value = [foo substringWithRange:NSMakeRange(2, [foo length] - 2 * 2)]; 
```

有利于您检查的来源：

1.  [如何获取 nsstring 的子字符串](https://stackoverflow.com/questions/5676106/how-to-get-substring-of-nsstring)

2.  [在 nsstring 内搜索](https://stackoverflow.com/questions/3771211/search-within-nsstring)

# java - 如何创建带有图标和文本的 JList？

> ID：13336802
> 
> 赞同：11
> 
> 时间：2012-11-11T23:57:14.740
> 
> 标签：java, swing, file, user-interface, jlist

我有这段代码想让`JList`谈话文本和图标做什么必须做。
有些人建议我制作标签列表并在表格中放置文本图标是否可能？如何？

搜索`/////////////////`嵌入式评论。

```
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JLabel;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.io.File;
import java.io.IOException;
import java.util.List;
import javax.swing.DefaultListModel;
import javax.swing.Icon;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.filechooser.FileSystemView;

public class pan extends JPanel implements DropTargetListener {

private DefaultListModel listModel = new DefaultListModel();
private DropTarget dropTarget;
private JLabel jLabel1;
private JScrollPane jScrollPane1;
private JList list;

/**
 * Create the panel.
 */
public pan() {
    setLayout(null);        
    list = new JList();
    dropTarget = new DropTarget(list, this);
    list.setModel(listModel);
    list.setDragEnabled(true);
    //list.setTransferHandler(new FileTransferHandler());
    jScrollPane1 = new JScrollPane();

    jScrollPane1.setViewportView(list);
    jScrollPane1.setBounds(10, 150, 635, 330);
    add(jScrollPane1);

}
public void dragEnter(DropTargetDragEvent arg0) {
    // nothing
}

public void dragOver(DropTargetDragEvent arg0) {
    // nothing
}

public void dropActionChanged(DropTargetDragEvent arg0) {
    // nothing
}

public void dragExit(DropTargetEvent arg0) {
    // nothing
}

public void drop(DropTargetDropEvent evt) {
    int action = evt.getDropAction();
    evt.acceptDrop(action);
    try {
        Transferable data = evt.getTransferable();
        if (data.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
              List<File> files = (List<File>) data.getTransferDat(DataFlavor.javaFileListFlavor);
            for (File file : files) {

    Icon icon=FileSystemView.getFileSystemView().getSystemIcon(file);
/////////////////listModel.addElement(filepath+icon);///////////////////////want code do this

            }
        }
    } catch (UnsupportedFlavorException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        evt.dropComplete(true);
    }
 }

} 
```

解决此问题后，如果双击它将打开桌面
到存储在列表中的路径，我将为每个元素添加操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T00:13:56.417

![文件拖动列表](../Images/f7b181db318b7e087c67419361a543fd.png)

```
import java.awt.*;
import java.awt.datatransfer.*;
import java.awt.dnd.*;
import javax.swing.*;
import javax.swing.border.LineBorder;
import javax.swing.filechooser.FileSystemView;
import java.io.*;
import java.util.List;

public class FileDropList extends JPanel implements DropTargetListener {

    private DefaultListModel listModel = new DefaultListModel();
    private DropTarget dropTarget;
    private JLabel jLabel1;
    private JScrollPane jScrollPane1;
    private JList list;

    /**
     * Create the panel.
     */
    public FileDropList() {
        //setLayout(null);        
        list = new JList();
        dropTarget = new DropTarget(list, this);
        list.setModel(listModel);
        list.setDragEnabled(true);
        FileListCellRenderer renderer = new FileListCellRenderer();
        list.setCellRenderer(renderer);
        //list.setTransferHandler(new FileTransferHandler());
        jScrollPane1 = new JScrollPane(list);

        //jScrollPane1.setBounds(10, 150, 635, 330);
        add(jScrollPane1);

    }
    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JPanel pan = new FileDropList();
                pan.setBorder(new LineBorder(Color.BLACK));
                JOptionPane.showMessageDialog(null, pan);
            }
        };
        SwingUtilities.invokeLater(r);
    }

    public void dragEnter(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dragOver(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dropActionChanged(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dragExit(DropTargetEvent arg0) {
        // nothing
    }

    public void drop(DropTargetDropEvent evt) {
        int action = evt.getDropAction();
        evt.acceptDrop(action);
        try {
            Transferable data = evt.getTransferable();
            if (data.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
                List<File> files = (List<File>) data.getTransferData(DataFlavor.javaFileListFlavor);
                for (File file : files) {
                    listModel.addElement(file);
                }
            }
        } catch (UnsupportedFlavorException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            evt.dropComplete(true);
        }
    }
}

/** A FileListCellRenderer for a File. */
class FileListCellRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = -7799441088157759804L;
    private FileSystemView fileSystemView;
    private JLabel label;
    private Color textSelectionColor = Color.BLACK;
    private Color backgroundSelectionColor = Color.CYAN;
    private Color textNonSelectionColor = Color.BLACK;
    private Color backgroundNonSelectionColor = Color.WHITE;

    FileListCellRenderer() {
        label = new JLabel();
        label.setOpaque(true);
        fileSystemView = FileSystemView.getFileSystemView();
    }

    @Override
    public Component getListCellRendererComponent(
            JList list,
            Object value,
            int index,
            boolean selected,
            boolean expanded) {

        File file = (File)value;
        label.setIcon(fileSystemView.getSystemIcon(file));
        label.setText(fileSystemView.getSystemDisplayName(file));
        label.setToolTipText(file.getPath());

        if (selected) {
            label.setBackground(backgroundSelectionColor);
            label.setForeground(textSelectionColor);
        } else {
            label.setBackground(backgroundNonSelectionColor);
            label.setForeground(textNonSelectionColor);
        }

        return label;
    }
} 
```

## 原始答案

```
import java.awt.datatransfer.*;
import java.awt.dnd.*;
import javax.swing.*;
import javax.swing.filechooser.FileSystemView;
import java.io.*;
import java.util.List;

public class FileDragList extends JPanel implements DropTargetListener {

    private static final long serialVersionUID = 1L;
    private DefaultListModel listModel = new DefaultListModel();
    private JScrollPane jScrollPane1;
    private JList list;

    /**
     * Create the panel.
     */
    public FileDragList() {
        setLayout(null);        
        list = new JList();
        DropTarget dropTarget = new DropTarget(list, this);
        list.setModel(listModel);
        list.setDragEnabled(true);
        FileListCellRenderer renderer = new FileListCellRenderer();
        list.setCellRenderer(renderer);
        //list.setTransferHandler(new FileTransferHandler());
        jScrollPane1 = new JScrollPane();

        jScrollPane1.setViewportView(list);
        jScrollPane1.setBounds(10, 150, 635, 330);
        add(jScrollPane1);

    }
    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JOptionPane.showMessageDialog(null, new FileDragList());
            }
        };
        SwingUtilities.invokeLater(r);
    }

    public void dragEnter(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dragOver(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dropActionChanged(DropTargetDragEvent arg0) {
        // nothing
    }

    public void dragExit(DropTargetEvent arg0) {
        // nothing
    }

    public void drop(DropTargetDropEvent evt) {
        int action = evt.getDropAction();
        evt.acceptDrop(action);
        try {
            Transferable data = evt.getTransferable();
            if (data.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
                List<File> files = (List<File>) data.getTransferData(DataFlavor.javaFileListFlavor);
                for (File file : files) {

                    Icon icon=FileSystemView.getFileSystemView().getSystemIcon(file);
                    /////////////////listModel.addElement(filepath+icon);///////////////////////want code do this

                }
            }
        } catch (UnsupportedFlavorException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            evt.dropComplete(true);
        }
    }
} 
```

* * *

```
Icon icon=FileSystemView.getFileSystemView().getSystemIcon(file); 
```

哦，对了.. 试试[File Browser GUI](https://codereview.stackexchange.com/questions/4446/file-browser-gui)`FileTreeCellRenderer`的变体。

就是这样，用于左边的树。

![](../Images/23cdb3ac31746680c2928b202bef1f23.png)

## FileTreeCellRenderer

```
/** A TreeCellRenderer for a File. */
class FileTreeCellRenderer extends DefaultTreeCellRenderer {

    private FileSystemView fileSystemView;
    private JLabel label;

    FileTreeCellRenderer() {
        label = new JLabel();
        label.setOpaque(true);
        fileSystemView = FileSystemView.getFileSystemView();
    }

    @Override
    public Component getTreeCellRendererComponent(
        JTree tree,
        Object value,
        boolean selected,
        boolean expanded,
        boolean leaf,
        int row,
        boolean hasFocus) {

        DefaultMutableTreeNode node = (DefaultMutableTreeNode)value;
        File file = (File)node.getUserObject();
        label.setIcon(fileSystemView.getSystemIcon(file));
        label.setText(fileSystemView.getSystemDisplayName(file));
        label.setToolTipText(file.getPath());

        if (selected) {
            label.setBackground(backgroundSelectionColor);
            label.setForeground(textSelectionColor);
        } else {
            label.setBackground(backgroundNonSelectionColor);
            label.setForeground(textNonSelectionColor);
        }

        return label;
    }
} 
```

## 更新

使上述渲染器适应列表的 SSCCE。

![在此处输入图像描述](../Images/c363488c9342472bb0ff393145fc54db.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.filechooser.FileSystemView;
import java.io.File;

public class FileList {
    public static void main(String[] args) throws Exception {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout(2,2));

                File userHome = new File(System.getProperty("user.home"));
                File[] files = userHome.listFiles();
                JList list = new JList(files);
                list.setCellRenderer(new FileListCellRenderer());
                gui.add(new JScrollPane(list));

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        SwingUtilities.invokeLater(r);
    }
}

/** A FileListCellRenderer for a File. */
class FileListCellRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = -7799441088157759804L;
    private FileSystemView fileSystemView;
    private JLabel label;
    private Color textSelectionColor = Color.BLACK;
    private Color backgroundSelectionColor = Color.CYAN;
    private Color textNonSelectionColor = Color.BLACK;
    private Color backgroundNonSelectionColor = Color.WHITE;

    FileListCellRenderer() {
        label = new JLabel();
        label.setOpaque(true);
        fileSystemView = FileSystemView.getFileSystemView();
    }

    @Override
    public Component getListCellRendererComponent(
        JList list,
        Object value,
        int index,
        boolean selected,
        boolean expanded) {

        File file = (File)value;
        label.setIcon(fileSystemView.getSystemIcon(file));
        label.setText(fileSystemView.getSystemDisplayName(file));
        label.setToolTipText(file.getPath());

        if (selected) {
            label.setBackground(backgroundSelectionColor);
            label.setForeground(textSelectionColor);
        } else {
            label.setBackground(backgroundNonSelectionColor);
            label.setForeground(textNonSelectionColor);
        }

        return label;
    }
} 
```

# c - How do you concatenate strings in C?

> ID：13336808
> 
> 赞同：-5
> 
> 时间：2012-11-11T23:58:34.583
> 
> 标签：c, string, concatenation

> **Possible Duplicate:**
> [How to concatenate 2 strings in C?](https://stackoverflow.com/questions/8465006/how-to-concatenate-2-strings-in-c)

```
#include <stdio.h>
#include <string.h>

/* Function prototypes */
void wordLength ( char *word );
void wordConcat ( char *wordC1, char *wordC2);

int main (void)
{
    int choice;
    char word [20];
    char wordC1 [20];
    char wordC2 [20];

    printf( "Choose a function by entering the corresponding number: \n"
        "1) Determine if words are identical\n"
        "2) Count number of words in sentence provided\n"
        "3) Enter two strings to be strung together\n"
        "4) Quit program\n" );
    scanf( "%d", &choice );
    flushall();

    while (choice >= 1 && choice < 4) 
    {
        /* if statements for appropriate user prompt and calls function */
        if (choice == 1) 
        {
            /* gather user input */
        printf( "\nYou have chosen to determine word length.\n"
                "Please enter the word:\t");
            gets( word );

            /* call function to output string as well as the string length */
            wordLength( word );
        }

        else if (choice == 2)
        {
            printf( "\nYou have chosen to concatenate 2 words with a % symbol in between them.\n"
                "Please enter word 1:\t");

            gets( wordC1 );

            printf("Please enter word 2:\t");

            gets( wordC2 );                     

            /* call function to output string as well as the string length */
            wordLength( word );
        }
    }
}

void wordLength( char *word )
{
    int length;

    printf( "\nThe string entered is:  %s\n\n", word);

    length = strlen (word);

    printf("The string length is: %d\n", length);

    return;
}

void wordConcat(char *wordC1, char *wordC2)
{
    printf( "\nThe first word entered is:  %s\n", wordC1);
    printf( "\nThe second word entered is:  %s\n", wordC2);
} 
```

I am trying to concatenate two words coming from separate strings. I can't seem to find how to do this in the MSDN library. Does it even exist in C? Or do you need some sort of algorithm? How is this done?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:00:23.460

`strcat()`是要使用的标准函数，这个函数非常简单，通常用 C 语言编写，因此您可以轻松地从头开始编写它。

# ruby-on-rails-3 - 带有 Cloudfront CDN 的 Rails 3.1 资产管道中的背景图像问题

> ID：13336813
> 
> 赞同：5
> 
> 时间：2012-11-11T23:59:11.890
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, cdn, amazon-cloudfront

我有一个使用 Amazon cloudfront cdn 交付资产的 rails 3.1.0 heroku 应用程序。除了背景图像，它没有渲染之外，一切正常。检查 firebug/Yslow 显示中的请求， `GET box.png 403 Forbidden d2g4atxxxxxx.cloudfront.net 231 B 54.240.xxx.xxx:xx` 图像的 url 是`http://d2g4xxxxxxxx.cloudfront.net/assets/box.png`。你可以看到它不是图像没有指纹。在 application.css 我有这个`background-image:url('box.png');` **我试过的东西**

**第一次尝试**

我将 .erb 附加到 application.css 并添加了`background-image:url(<%=asset_path 'box.png'%>);` 然后我添加了 `config.action_controller.asset_host="http://mybucket_name.com.s3.amazonaws.com"`
然后我做了

```
bundle exec rake assets:precompile 
```

然后我切换回

```
config.action_controller.asset_host ="http://d2gxxxxxxx.cloudfront.net" 
```

然后我做了

```
 git add application.css.erb
 git commit -a
 git push origin master 
```

但它没有用

**第二次尝试**

我将 .scss 附加到 application.css 并添加了`background-image:image-url('box.png');` 然后我添加了 `config.action_controller.asset_host="http://mybucket_name.com.s3.amazonaws.com"`
然后我做了

```
bundle exec rake assets:precompile 
```

然后我切换回

```
config.action_controller.asset_host ="http://d2gxxxxxxx.cloudfront.net" 
```

然后我做了

然后我添加 `gem 'compass-rails'`到一个 gemfile 并创建了 compass.rb 并添加了这个

```
 #In compass.rb
  project_type = :rails
  line_comments = false
  generated_images_dir = "public/assets"

 bundle install
 git add application.css.scss  compass.rb
 git commit -a
 git push origin master 
```

但它也没有工作

**是）我有的**

宝石文件

```
 source 'http://rubygems.org'

  gem 'rails', '3.1.0.rc8'

  group :development do
  gem 'sqlite3'
  end
  gem 'geocoder'
  gem "dynamic_form"
  gem 'devise'
  gem 'rack', '1.3.3'
  gem 'execjs'
  gem 'carrierwave'
  gem "meta_search",'>= 1.1.0.pre'
  gem "thumbs_up"
  gem 'geocoder'
  gem 'fog'
  gem 'koala'

   group :production do
   gem 'pg'
   gem 'therubyracer'
   gem 'unicorn'

   end
   gem 'jquery-rails'
   gem 'thin'

   gem 'mongrel', '1.2.0.pre2', :group => :development

   gem 'sass-rails', "  ~> 3.1.0.rc"
   gem 'coffee-rails', "~> 3.1.0.rc"
   gem 'uglifier'
   gem 'yui-compressor'
   gem "asset_sync"
  # gem 'compass-rails'

   group :test do
   # Pretty printed test output
   gem 'turn', :require => false
   gem 'rspec-rails'
   gem "factory_girl_rails"
   gem 'capybara'
   gem "guard-rspec"
   end 
```

应用程序/配置/环境/production.rb

```
 Deals::Application.configure do

    config.cache_classes = true

   # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true
  config.action_controller.asset_host ="http://d2g4xxxxxx.cloudfront.net"

  config.serve_static_assets = true

  # Compress JavaScripts and CSS
  config.assets.compress = true
   config.assets.compile = true
    config.assets.digest = true
   config.assets.css_compressor = :yui
    config.assets.js_compressor = :uglifier
      config.i18n.fallbacks = true
    config.active_support.deprecation = :notify
    end 
```

**问题**

我做错了什么？或者我错过了什么步骤，有人可以指导我完成这些步骤吗？我花了整整一周时间阅读不同的博客和不同的问题，但没有运气。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:18:11.660

我使用 CloudFront 而不是 S3 的自定义源。这意味着 CloudFront 指向您的 Rails 应用程序而不是 S3。这将导致您的所有资产都为您进行版本控制，并可能解决您的问题。

这是一篇关于使用 Rails 资产管道时具有自定义来源的 CloudFront 的文章。您可以在该主题上搜索更多信息：

[http://blog.ertesvag.no/post/10720082458](http://blog.ertesvag.no/post/10720082458)

这是另一个包含更多信息的 SO 问题：

[Rails 3 自动资产部署到 Amazon CloudFront？](https://stackoverflow.com/questions/8354514/rails-3-automatic-asset-deployment-to-amazon-cloudfront)

# maven - tomcat7-maven-plugin tomcatManager 状态码:403, ReasonPhrase:Forbbiden

> ID：13336816
> 
> 赞同：25
> 
> 时间：2012-11-11T23:59:36.990
> 
> 标签：maven, tomcat7, maven-plugin

我正在尝试做，`mvn clean package tomcat7:deploy`但总是收到此错误：`tomcatManager status code:403, ReasonPhrase:Forbbiden`

我的配置是下一个：

**~/.m2/settings.xml**

```
<servers>
  <server>
    <id>localhost</id>
    <username>tomcat</username>
    <password>s3cret</password>
  </server>
</servers> 
```

**pom.xml**

```
 <profiles>
    <profile>
        <id>tomcat-localhost</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <tomcat-server>localhost</tomcat-server>
            <tomcat-url>http://localhost:8080/manager/html</tomcat-url>
        </properties>
    </profile>
  </profiles>

  <build>
    <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0</version>
        <configuration>
            <server>${tomcat-server}</server>
            <url>${tomcat-url}</url>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

**tomcat-users.xml**

```
 <role rolename="manager-gui"/>  
  <user username="tomcat" password="s3cret" roles="manager-gui"/> 
```

我的错误是什么？因为我看不到。

**完整的消息错误：**

```
[INFO] --- tomcat7-maven-plugin:2.0:deploy (default-cli) @ WebApp ---
[INFO] Deploying war to http://localhost:8080/Baskeitor  
Uploading: http://localhost:8080/manager/html/deploy?path=%2FWebApp
Uploaded: http://localhost:8080/manager/html/deploy?path=%2FWebApp (7985 KB at 50215.2 KB/sec)

[INFO] tomcatManager status code:403, ReasonPhrase:Prohibido
[INFO] <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
[INFO] <html>
[INFO]  <head>
[INFO]   <title>403 Access Denied</title>
[INFO]   <style type="text/css">
[INFO]     <!--
[INFO]     BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;font-size:12px;}
[INFO]     H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;}
[INFO]     PRE, TT {border: 1px dotted #525D76}
[INFO]     A {color : black;}A.name {color : black;}
[INFO]     -->
[INFO]   </style>
[INFO]  </head>
[INFO]  <body>
[INFO]    <h1>403 Access Denied</h1>
[INFO]    <p>
[INFO]     You are not authorized to view this page.
[INFO]    </p>
[INFO]    <p>
[INFO]     If you have already configured the Manager application to allow access and
[INFO]     you have used your browsers back button, used a saved book-mark or similar
[INFO]     then you may have triggered the cross-site request forgery (CSRF) protection
[INFO]     that has been enabled for the HTML interface of the Manager application. You
[INFO]     will need to reset this protection by returning to the
[INFO]     <a href="/manager/html">main Manager page</a>. Once you
[INFO]     return to this page, you will be able to continue using the Manager
[INFO]     appliction's HTML interface normally. If you continue to see this access
[INFO]     denied message, check that you have the necessary permissions to access this
[INFO]     application.
[INFO]    </p>
[INFO]    <p>
[INFO]     If you have not changed
[INFO]     any configuration files, please examine the file
[INFO]     <tt>conf/tomcat-users.xml</tt> in your installation. That
[INFO]     file must contain the credentials to let you use this webapp.
[INFO]    </p>
[INFO]    <p>
[INFO]     For example, to add the <tt>manager-gui</tt> role to a user named
[INFO]     <tt>tomcat</tt> with a password of <tt>s3cret</tt>, add the following to the
[INFO]     config file listed above.
[INFO]    </p>
[INFO] <pre>
[INFO] &lt;role rolename="manager-gui"/&gt;
[INFO] &lt;user username="tomcat" password="s3cret" roles="manager-gui"/&gt;
[INFO] </pre>
[INFO]    <p>
[INFO]     Note that for Tomcat 7 onwards, the roles required to use the manager
[INFO]     application were changed from the single <tt>manager</tt> role to the
[INFO]     following four roles. You will need to assign the role(s) required for
[INFO]     the functionality you wish to access.
[INFO]    </p>
[INFO]     <ul>
[INFO]       <li><tt>manager-gui</tt> - allows access to the HTML GUI and the status
[INFO]           pages</li>
[INFO]       <li><tt>manager-script</tt> - allows access to the text interface and the
[INFO]           status pages</li>
[INFO]       <li><tt>manager-jmx</tt> - allows access to the JMX proxy and the status
[INFO]           pages</li>
[INFO]       <li><tt>manager-status</tt> - allows access to the status pages only</li>
[INFO]     </ul>
[INFO]    <p>
[INFO]     The HTML interface is protected against CSRF but the text and JMX interfaces
[INFO]     are not. To maintain the CSRF protection:
[INFO]    </p>
[INFO]    <ul>
[INFO]     <li>Users with the <tt>manager-gui</tt> role should not be granted either
[INFO]         the <tt>manager-script</tt> or <tt>manager-jmx</tt> roles.</li>
[INFO]     <li>If the text or jmx interfaces are accessed through a browser (e.g. for
[INFO]         testing since these interfaces are intended for tools not humans) then
[INFO]         the browser must be closed afterwards to terminate the session.</li>
[INFO]    </ul>
[INFO]    <p>
[INFO]     For more information - please see the
[INFO]     <a href="/docs/manager-howto.html">Manager App HOW-TO</a>.
[INFO]    </p>
[INFO]  </body>
[INFO] </html> 
```

我有 tomcat 7.0.32 并且我总是重新启动它我更改有关用户的一些配置或任何需要再次加载的内容。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-13T16:05:32.593

我有同样的问题。但我找到了以下解决此问题的方法：

**pom.xml**

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
      <url>http://localhost:8080/manager/text</url>
      <server>localhost</server>
      <path>/${project.build.finalName}</path>
    </configuration>
</plugin> 
```

**~/.m2/settings.xml**

```
<servers>
<server>
   <id>localhost</id>
   <username>admin</username>
   <password>s3cret</password>
</server> 
```

**tomcat-users.xml**

```
<role rolename="manager-script"/>
<user username="admin" password="s3cret" roles="manager-script"/> 
```

更改*tomcat-users.xml*后不要忘记重新启动服务器。也不要将*manager-gui*角色与*manager-script*分配给同一用户。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-25T11:16:41.323

做这样的事就够了

**pom.xml**

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat7-maven-plugin</artifactId>
  <version>2.0</version>
  <configuration>
    <path>/mywebapp</path>
    <update>true</update>
    <url>http://localhost:8080/manager/text</url>
    <username>tomcat</username>
    <password>tomcat</password>
  </configuration>
</plugin> 
```

**tomcat-users.xml**

```
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="manager-gui"/>
  <role rolename="manager-script"/>
  <role rolename="admin-gui"/>
  <user username="tomcat" password="tomcat" roles="tomcat,manager-gui,admin-gui,manager-script"/>
</tomcat-users> 
```

来自[http://tomcat.apache.org/maven-plugin-2.0/index.html](http://tomcat.apache.org/maven-plugin-2.0/index.html)

```
Use http://localhost:8080/manager/text rather than the default tomcat6 url. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-03T16:27:58.060

如果已经将同名的同名WAR部署到tomcat，也会出现这个错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T08:50:58.657

网址不正确使用：

```
<tomcat-url>http://localhost:8080/manager/html</tomcat-url> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-27T15:37:47.787

想要将此添加为评论，但没有足够的声誉分数来执行此操作。

将此添加为答案，因为它可能对某人有所帮助。我在尝试使用 eclipse 在 tomcat7 上部署时遇到了完全相同的错误，并且在尝试了上述解决方案后仍然无法正常工作。最后我使用命令行（cmd）在eclipse之外尝试了它，它就像一个魅力。显然我需要在我的机器上安装 maven，然后设置 M2_Home 用户变量和指向 M2_HOME/bin 的路径变量。

谢谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-11T09:29:17.423

对角色名称和 URL 的最后一部分有一些误解：

最初在**tomcat-usres.xml**中只有“tomcat”用户（角色 tomcat）、用户“both”（tomcat + role1）但没有管理员角色。似乎 URL 的最后一部分在某些方面等于角色名称......

这对我有用（*否则我总是得到 403 甚至提供了正确的用户 + 密码*）：

```
<?xml version='1.0' encoding='utf-8'?>
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="admin"/>
  <user username="tomcat" password="tomcat" roles="admin,tomcat"/>
  <user username="admin" password="tomcat" roles="admin,tomcat"/>
</tomcat-users> 
```

# scala - Scala 2.10.0 RC2 和可选参数

> ID：13336819
> 
> 赞同：4
> 
> 时间：2012-11-12T00:00:01.583
> 
> 标签：scala

我正在试验[Scala Macros](http://scalamacros.org/)，它是 Scala 2.10 的一部分，但是当我尝试编译（使用 sbt）时，我收到以下错误：

```
[error] .../API.scala:9: not enough arguments for constructor OAuth:
(requestMethod: String, consumerSecret: String, consumerKey: String,
signatureMethod: String, version: String)jm.oauth.OAuth
[error]   private val oauth = new OAuth(OAuth.POST, oauthConsumerSecret,
oauthConsumerKey, OAuth.HMAC_SHA1) 
```

您可以在[此处](https://github.com/mariosangiorgio/Scala-OAuth/blob/master/Scala%20OAuth/src/jm/oauth/OAuth.scala)`OAuth`找到该类的实现。

scala 2.10 和可选参数之间是否存在不兼容？

使用 scala 2.9.1 编译的相同代码运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T01:01:16.787

如果您创建一个仅包含此类定义的文件：

```
class Optional(x: Int = 0) 
```

然后用 Scala 2.9.2 编译它并`javap`在生成的类上运行，你会看到：

```
public class Optional implements scala.ScalaObject {
  public static final int init$default$1();
  public Optional(int);
} 
```

用 2.10.0-RC2 和它再次编译它`javap`，你会得到这个：

```
public class Optional {
  public static int $lessinit$greater$default$1();
  public Optional(int);
} 
```

所以不，默认参数在 2.10 中非常好，您刚刚遇到了一个具体示例，说明主要 Scala 版本之间缺乏二进制兼容性。

# web-audio-api - 将一个简单的增益节点连接到 Web Audio API 文件缓冲区

> ID：13336820
> 
> 赞同：0
> 
> 时间：2012-11-12T00:00:19.313
> 
> 标签：web-audio-api

我似乎无法理解为什么这不起作用。我没有错误。我使用振荡器完成了这项工作，效果很好。仅供参考，这是该线程的延续： [使用 Web Audio API 将两个声音分配给两个 Div，并通过带有 javascript 的单击事件独立播放每个声音](https://stackoverflow.com/questions/13106769/using-web-audio-api-to-assign-two-sounds-to-two-divs-and-play-each-independently)

代码：

```
<div id="divElement"></div>

<style> 

#divElement{
background-color: orange;
width:70px;
height:100px;
left:143px;
}

</style>

<script>

var context = new webkitAudioContext(),
    savedBuffer;

var playAudioFile = function () {
    var source = context.createBufferSource();
    var gainNode = context.createGainNode();
    source.buffer = savedBuffer;

 // START OF PROBLEM AREA: Gain not working but file still plays with no errors.

    source.connect(gainNode);           
    gainNode.connect(context.destination);
    gainNode.gain = 0;

 // END OF PROBLEM AREA

    source.noteOn(0); // Play sound immediately

};

var request = new XMLHttpRequest();

request.open('get', 'audio/A.mp3', true);
request.responseType = 'arraybuffer';

request.onload = function () {
        context.decodeAudioData(request.response,
             function(incomingBuffer) {

                 savedBuffer = incomingBuffer;

                 var divElement = document.getElementById("divElement");
                 divElement.addEventListener("click", playAudioFile , false);
             }
        );
};

request.send();

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T09:16:31.163

试试`gainNode.gain.value = 0`吧。`gainNode.gain`是一个`AudioGain`具有属性的对象`value`。

[http://www.w3.org/TR/webaudio/#AudioGainNode](http://www.w3.org/TR/webaudio/#AudioGainNode)

# python - Matplotlib - Python 错误

> ID：13336823
> 
> 赞同：27
> 
> 时间：2012-11-12T00:00:30.223
> 
> 标签：python, matplotlib, 64-bit

设置：

处理器：`x86_64` 操作系统：`GNU/Linux` 发行版：`Fedora Release 13 (Goddard).`

`Python 2.6.4`

```
 /usr/bin/python 
```

这是以下问题：

我正在尝试使用 Matplotlib 和 Python 生成一些图表。正如我从大多数[解决方案](https://stackoverflow.com/questions/7157330/problem-importing-matplotlib-mlab-and-pyplot-in-python-2-7-on-mac-osx-10-6)[3](https://stackoverflow.com/questions/7157330/problem-importing-matplotlib-mlab-and-pyplot-in-python-2-7-on-mac-osx-10-6)中听到的那样，matplotlib 和 64 位架构之间似乎存在兼容性问题。

我从[这里安装了 Matplotlib](http://matplotlib.org/users/installing.html#installing-from-source)

这是我得到的错误：

```
Traceback (most recent call last):
  File "plot-thread-characterization.py", line 24, in <module>
    import matplotlib.pyplot as plt
  File "/usr/lib64/python2.6/site-packages/matplotlib/pyplot.py", line 78, in <module>
    new_figure_manager, draw_if_interactive, show = pylab_setup()
  File "/usr/lib64/python2.6/site-packages/matplotlib/backends/__init__.py", line 25, in pylab_setup
    globals(),locals(),[backend_name])
  File "/usr/lib64/python2.6/site-packages/matplotlib/backends/backend_gtkagg.py", line 10, in <module>
    from matplotlib.backends.backend_gtk import gtk, FigureManagerGTK, FigureCanvasGTK,\
  File "/usr/lib64/python2.6/site-packages/matplotlib/backends/backend_gtk.py", line 8, in <module>
    import gtk; gdk = gtk.gdk
  File "/usr/lib64/python2.6/site-packages/gtk-2.0/gtk/__init__.py", line 64, in <module>
    _init()
  File "/usr/lib64/python2.6/site-packages/gtk-2.0/gtk/__init__.py", line 52, in _init
    _gtk.init_check()
RuntimeError: could not open display 
```

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-12T00:21:12.867

matplotlib 无法连接到任何 X 服务器以显示其 GTK。

这里有几个选项：

1.  运行本地 X 服务器并在 ssh 客户端中启用 X11 转发，以在本地机器上显示输出。您可以通过检查是否在服务器上设置了 $DISPLAY 环境变量来验证这是否有效。

2.  在导入 pyplot*之前*，调用 matplotlib.use(...) 指定不同的显示后端，例如渲染为 pdf 文件，例如

    `import matplotlib as mpl`

    `mpl.use('Agg')`

    `import matplotlib.pyplot as plt`

有关更多详细信息，请参阅[http://matplotlib.org/faq/howto_faq.html#generate-images-without-having-a-window-appear](http://matplotlib.org/faq/howto_faq.html#generate-images-without-having-a-window-appear)。

# vb.net - 如何检测给定 TCP 端口上正在侦听的应用程序？

> ID：13336825
> 
> 赞同：0
> 
> 时间：2012-11-12T00:00:40.810
> 
> 标签：vb.net, tcp-port

如何检测哪些应用程序（如果有）正在侦听 Windows 上的给定 TCP 端口？这是 xampp 这样做的：

![在此处输入图像描述](../Images/4338f17435ee002f88ea5414f398c43d.png)

我更喜欢在 VB.NET 中执行此操作，并且我想为用户提供关闭该应用程序的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T16:40:52.690

我没有足够的代表来评论接受的答案，但我会说我认为检查是否发生异常是非常糟糕的做法！

我花了很长时间寻找一个非常相似的问题的解决方案，并且当我遇到`IPGlobalProperties`. 我还没有正确测试这个，但是像这样的东西......

```
Imports System.Linq
Imports System.Net
Imports System.Net.NetworkInformation
Imports System.Windows.Forms 
```

进而...

```
Dim hostname = "server1"
Dim portno = 9081
Dim ipa = Dns.GetHostAddresses(hostname)(0)
Try
  ' Get active TCP connections - the GetActiveTcpListeners is also useful if you're starting up a server...
  Dim active = IPGlobalProperties.GetIPGlobalProperties.GetActiveTcpConnections
  If (From connection In active Where connection.LocalEndPoint.Address.Equals(ipa) AndAlso connection.LocalEndPoint.Port = portno).Any Then
    ' Port is being used by an active connection
    MessageBox.Show("Port is in use!")
  Else
    ' Proceed with connection
    Using sock As New Sockets.Socket(Sockets.AddressFamily.InterNetwork, Sockets.SocketType.Stream, Sockets.ProtocolType.Tcp)
      sock.Connect(ipa, portno)
      ' Do something more interesting with the socket here...
    End Using
  End If

Catch ex As Sockets.SocketException
  MessageBox.Show(ex.Message)
End Try 
```

我希望有人比我更快地发现这个有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T12:39:49.927

```
Dim hostname As String = "server1"
Dim portno As Integer = 9081
Dim ipa As IPAddress = DirectCast(Dns.GetHostAddresses(hostname)(0), IPAddress)
Try
    Dim sock As New System.Net.Sockets.Socket(System.Net.Sockets.AddressFamily.InterNetwork, System.Net.Sockets.SocketType.Stream, System.Net.Sockets.ProtocolType.Tcp)
    sock.Connect(ipa, portno)
    If sock.Connected = True Then
        ' Port is in use and connection is successful
        MessageBox.Show("Port is Closed")
    End If

    sock.Close()
Catch ex As System.Net.Sockets.SocketException
    If ex.ErrorCode = 10061 Then
        ' Port is unused and could not establish connection 
        MessageBox.Show("Port is Open!")
    Else
        MessageBox.Show(ex.Message)
    End If
End Try 
```

这对我有帮助:)

# appfabric - AppFabric - 将数据放入本地缓存

> ID：13336826
> 
> 赞同：2
> 
> 时间：2012-11-12T00:00:43.640
> 
> 标签：appfabric, appfabric-cache

我对 AppFabric 很陌生，我想了解的是如何规定我希望数据进入分布式缓存以及本地缓存

我在[这里](https://stackoverflow.com/questions/12963103/using-a-mix-of-appfabric-local-cache-and-server-cache)阅读了基于配置执行此操作的帖子。我没有使用任何 XML 配置，而是以编程方式使用配置创建我的对象。我正在玩以下代码：-

```
// Declare array for cache host(s).

List<DataCacheServerEndpoint> servers = new List<DataCacheServerEndpoint>();
servers.Add(new DataCacheServerEndpoint("SERVER1", 10023));
servers.Add(new DataCacheServerEndpoint("SERVER2", 10023));
servers.Add(new DataCacheServerEndpoint("SERVER3", 10023));

DataCacheLocalCacheProperties localCacheConfig;
TimeSpan localTimeout = new TimeSpan(0, 5, 0);

localCacheConfig = new DataCacheLocalCacheProperties(10000, localTimeout, DataCacheLocalCacheInvalidationPolicy.TimeoutBased);

// Setup the DataCacheFactory configuration.
DataCacheFactoryConfiguration factoryConfig = new DataCacheFactoryConfiguration();
factoryConfig.Servers = servers;
factoryConfig.SecurityProperties = new DataCacheSecurity(DataCacheSecurityMode.None, DataCacheProtectionLevel.None);

factoryConfig.LocalCacheProperties = localCacheConfig;

DataCacheFactory factory = DataCacheFactoryExtensions.Create(factoryConfig);
DataCache dataCache = factory.GetCache("MyCache");

dataCache.Put("myKey", "MyValue"); 
```

我是否正确假设因为我已将本地缓存配置添加到 factoryConfig 对象，所以我的缓存项目将自动添加到本地缓存以及分布式缓存？

因此，如果我只想将项目缓存到分布式缓存中，我是否只需要放弃将本地缓存配置添加到 factoryConfig 对象？

还是我需要两个单独的工厂配置对象 - 每个缓存一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:28:07.670

您可以[在这里](http://msdn.microsoft.com/en-us/library/ee790983%28v=azure.10%29.aspx)看到，是的，如果启用了本地缓存，对象将存储在本地缓存中：

> 启用本地缓存后，缓存客户端会在本地存储对对象的引用。

[“启用本地缓存”](http://msdn.microsoft.com/en-us/library/ee790857%28v=azure.10%29.aspx)的说明与您所做的完全一样 - 基本上只是使用`DataCacheLocalCacheProperties`（尽管也可以使用[app.config 设置](http://msdn.microsoft.com/en-us/library/ee790880%28v=azure.10%29.aspx)启用本地缓存）。

所以就像你说的那样——只使用分布式缓存，没有本地缓存​​，然后使用从不使用的对象*中*获取`DataCache`的对象。`DataCacheFactory`*`DataCacheLocalCacheProperties`*

 ** * *

另请注意，本地缓存中的项目可以[根据配置的策略被逐出](http://msdn.microsoft.com/en-us/library/ee790981%28v=azure.10%29.aspx)：

> 本地缓存中对象的生命周期取决于多个因素，例如本地缓存中的最大对象数和失效策略。*

# asp.net-mvc-3 - 使用不在 Html.BegingForm() 方法内的 Html.EditorFor() 方法在视图中添加验证属性

> ID：13336830
> 
> 赞同：2
> 
> 时间：2012-11-12T00:01:18.163
> 
> 标签：asp.net-mvc-3, razor, jquery-validate, unobtrusive-validation

我注意到验证属性仅添加到通过`Html.EditorFor(`) 辅助方法创建的元素中，这些元素位于`Html.BegingForm()`方法内部，分别创建“表单”标签和属性。

除了手动创建元素和属性之外，还有什么方法可以将所需的验证属性添加到使用辅助方法创建且不在`Html.BegingForm()`方法内部的元素中？

我需要在客户端进行验证，并且不想手动创建所述属性或显式编写此行为的脚本，而是利用 MVC 功能根据模型上的元数据自动添加所述属性以与 jquery-validate 一起使用客户端的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T06:08:55.840

仅在以下情况下才会发出不显眼的验证属性：

*   `UnobtrusiveJavaScriptEnabled`标志设置为`true`
*   `ViewContext.FormContext`不是`null`（例如 Html 助手在块内执行`Html.BeginForm`）

因此，您可以在使用 Html 帮助程序之前手动创建`FormContext`并分配它：`ViewContext.FormContext`

```
@{
    ViewContext.FormContext = new FormContext();
}

@Html.TextBoxFor(x => x.SomeProperty) 
```

但是您应该注意，使用这种方法您会失去嵌套功能，`Html.BeginForm`因此如果您想创建一个新的逻辑表单，您需要自己再次创建`new FormContext()`和管理旧的上下文。

# ios - 如何从 Xcode 的索引中排除某些文件？

> ID：13336832
> 
> 赞同：9
> 
> 时间：2012-11-12T00:01:43.030
> 
> 标签：ios, xcode

我在源代码存储库中有一个包含 5600 个文件的 iOS 项目。Xcode 似乎在其索引期间访问了所有这些文件。有些文件是大图像，我认为索引没有任何好处。我如何告诉 Xcode 排除这些文件以便索引更快？

我知道其他几个描述如何完全禁用索引的问题和答案，但我没有找到任何解决如何保持启用索引并告诉 Xcode 如何跳过不相关文件的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:18:44.267

一种迂回方法：创建一个或多个单独的目标，并简单地链接到它们产生的目标文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:18:18.660

如果您确实需要创建一个或多个单独的目标，[justin的回答很好。](https://stackoverflow.com/users/191596/justin)我已经搜索过，但发现您可以启用/禁用索引。无论如何，我还没有找到在索引时排除某种文件。而且你不让Xcode索引，你会失去一些像自动完成这样的功能（即使是图像，你也可以在InterfaceBuilder中看到图像名称自动完成）。

如果您确实确定要禁用索引。在终端中使用它：

```
defaults write com.apple.dt.XCode IDEIndexDisable 1 
```

当您想要索引时：

```
defaults delete com.apple.dt.XCode IDEIndexEnable
defaults write com.apple.dt.XCode IDEIndexDisable 1 
```

另一篇有关[如何通过使用 xcode 4.x 解决 Xcode 缓慢问题来使 Xcode 更快的相关文章](http://krish.codeworth.com/development/ios-development-2/iphone-2/xcode-4-x_slow_issues/)

# javascript - 如何在 iPhone 上的 DIV 上实现 100% [窗口] 高度？

> ID：13336833
> 
> 赞同：0
> 
> 时间：2012-11-12T00:02:07.317
> 
> 标签：javascript, iphone, css, html

我一直在努力为我正在从事的项目在 DIV 上实现 100% [窗口] 高度。它在桌面上运行良好，但是当我尝试使用 iPhone 4 或 Android 手机加载它时，第一个 div 似乎是 100%；但是每个后续的 DIV 似乎都短了大约 50 个像素（只是一个估计值）。

我尝试通过执行以下操作通过 css 设置它：

```
<!DOCTYPE html>
<head>
<style type="text/css">
    html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;

    div#container {
        width: 100%;
        height: 100%;
    }

    div#section1 {
        width: 100%;
        height: 100%;
        background-color: blue;
    }

    div#section2 {
        width: 100%;
        height: 100%;
        background-color: red;
    }
</style>
</head>
<body>
    <div id="container>
        <div id="section1">
            . . .
        </div>
        <div id="section2">
            . . .
        </div>
    </div>
</body>
</html> 
```

我还尝试使用类似于 jQuery 的 javascript 来设置它：

```
var browser_width = $(window).width();
var browser_height = $(window).height();

$(document).ready(function(){
    $("#section1, #section2").css("width", browser_width, "height", browser_height);
}); 
```

但它的行为方式与 CSS 相同。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:12:12.420

you have to set the right format to the `.css()` method in your script

```
$(document).ready(function(){
  $("#section1, #section2").css({
     "width" : browser_width, 
     "height" : browser_height
   }); //css
}); 
```

**UPDATE** : also I noticed you forgot to close your first css declaration

```
html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%; 
```

... the closing bracket `}` is missing.

**Side note** : I wouldn't set dimension properties to the `html` and/or `body` tags to avoid unexpected results ... unless you know what you are doing

# c# - ASP.net .FindControl() 和 GridView 返回 null

> ID：13336839
> 
> 赞同：3
> 
> 时间：2012-11-12T00:03:02.487
> 
> 标签：c#, asp.net, gridview, findcontrol

我已经查看了网站上的页面，但似乎找不到适合我的问题的一般性内容，所以希望有人知道该怎么做。我正在调试其他人编写的一些代码，并且遇到了 GridView 语句的问题。

我的问题是我的 gridview 始终为空。我在 LoginView 中的面板中有一个声明的 GridView，它基本上设置如下。

```
<asp:LoginView ID="LoginView1" runat="server" onviewchanged="LoginView1_ViewChanged">
<AnonymousTemplate>&nbsp;Please <a href="../Default.aspx"> Log In </a></AnonymousTemplate>
<LoggedInTemplate>
        <asp:Panel ID="Panel1" runat="server">
            <asp:GridView ID="GridView1" runat="server" 
                AutoGenerateColumns="False" CellPadding="2" 
                DataSourceID="SqlDataSource1" ForeColor="Black" GridLines="Horizontal" 
                BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" 
                BorderWidth="1px" Width="970px" OnRowCommand="GridView1_RowCommand" 
                PageSize="40" AllowSorting="True"> 
```

之后，在 C# 文件中，我有以下语句

```
 GridView GridView1 = (GridView)LoginView1.FindControl("GridView1"); 
```

当我去运行代码时，我在 GridView1 上得到 NullRefrenceException。我是否需要深入到面板中以引用 GridView，或者我应该能够从主 LoginView1 段访问它？

编辑：更改了我的代码片段以包含匿名模板的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:45:47.060

查找子控件的控件是一个经常出现的问题。您可以考虑一种扩展方法，以便您可以轻松调用 Jeff Atwood 的递归子控件（如 Simon 的回答中所引用的）......或您编写的任何版本。这只是使用其他帖子中的代码的示例：

```
GridView GridView1 = (GridView)LoginView1.FindControlRecursive("GridView1"); 
```

这是代码。

```
public static class WebControlExtender
    {
        public static Control FindControlRecursive(this Control root, string id)
        {
            if (root.ID == id)
            {
                return root;
            }

            foreach (Control c in root.Controls)
            {
                Control t = FindControlRecursive(c, id);
                if (t != null)
                {
                    return t;
                }
            }

            return null;
        } 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:10:00.840

`FindControl`只会检查您正在使用它的控件的直接后代。它不会通过 childrens-children 递归地工作。

杰夫·阿特伍德（Jeff Atwood）实际上在博客上写过这个 aaaaggeesss：

[http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html](http://www.codinghorror.com/blog/2005/06/recursive-pagefindcontrol.html)

# asp.net - 从数据库中给 JW Player 一个电影文件

> ID：13336842
> 
> 赞同：2
> 
> 时间：2012-11-12T00:03:26.783
> 
> 标签：asp.net, .net, web-services, mp4, jwplayer

我想要做的是在 JW Player 中播放一个 .mp4 文件，该文件由数据库以字节为单位给出。

所以这是我的 JW Player 脚本：

```
<script type="text/javascript"> 
    jwplayer("contvideo").setup({ 
    flashplayer:"jwplayer/player.swf", 
    file: "downloadvideo.aspx", 
    provider: "video", 
    height: 140, 
    width: 188, 
    skin: "jwplayer/slim.zip", 
    modes: [{type:'flash',src:'jwplayer/player.swf'},{type:'html5'},{type:'download'}] }); 
</script> 
```

该脚本从网页服务 downloadvideo.aspx 接收其电影文件。

downloadvideo.aspx 的代码是：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim bytes() As Byte = System.IO.File.ReadAllBytes("C:\websites\videospecialty\wdo.mp4")

    Response.Clear()
    Response.AddHeader("Content-Disposition", "attachment;filename=wdo.mp4")
    Response.ContentType = "video/mp4"
    Response.Flush()

    Response.OutputStream.Write(bytes, 0, bytes.Length)
    Response.OutputStream.Flush()

    Response.End()

End Sub 
```

但是当我尝试这个 JW Player 错误并说找不到他们的视频时。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T04:11:56.673

JW Player 似乎根据`file`选项中的文件扩展名确定要播放的文件类型。因为您是通过 ASPX 页面从磁盘流式传输这些内容，所以您没有。

以下是我如何使用 JW Player 6（使用 mp3 - 我手边没有任何 mp4）：

```
jwplayer("player1").setup({
    flashplayer: "/jwplayer/jwplayer.flash.swf",
    file: '/Streamer.ashx',
    height: 340,
    width: 388,
    type: 'mp3'
}); 
```

关键是使用`type`来指示另一端的文件类型。我可以提供的唯一参考是[这里](http://www.longtailvideo.com/support/forums/jw-player/setup-issues-and-embedding/74/php-http-streaming)：它可以追溯到 2007 年，但我似乎无法`type`在文档中找到提及。

灵感来自： [如何从 SQL 数据库流式传输 .flv 文件](https://stackoverflow.com/questions/4399728/how-do-i-stream-flv-files-from-sql-database)，我实现了一个 HTTP 处理程序来进行流式传输：

```
public class Streamer : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string filePath = "my file path";
        byte[] buffer = File.ReadAllBytes(filePath);

        context.Response.Clear();
        context.Response.Cache.SetCacheability(HttpCacheability.Public);
        context.Response.Cache.SetLastModified(DateTime.Now);
        context.Response.AppendHeader("Content-Type", "audio/mpeg3");
        context.Response.AddHeader("Content-Disposition", "attachment;filename=file.mp3");
        context.Response.AppendHeader("Content-Length", buffer.Length.ToString());

        context.Response.BinaryWrite(buffer);
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

请注意，ASPX 页面可能也可以正常工作，尽管处理程序更适合此类任务（并且应该更有效，因为它们没有页面循环）。

将整个文件读入内存并不理想，但足以证明这个概念。

# android - 如何在 Android 中将 8x8 像素艺术位图缩放为 100 像素的宽度和高度而不会出现任何失真？

> ID：13336847
> 
> 赞同：0
> 
> 时间：2012-11-12T00:04:24.060
> 
> 标签：android, bitmap, scale, pixel

我正在制作一款基于 Pixel 的 Android 游戏。我有几个 8x8 的精灵需要调整大小以适应 100x100 的区域。作为测试是否可行，我尝试让图像填满整个画布。它有点工作，但它使 8x8 精灵变成了 12x12 精灵，使像素看起来非常奇怪和扭曲。这是我到目前为止所拥有的：

```
 Bitmap grass = BitmapFactory.decodeResource(getResources(), R.drawable.small);
        Paint configuration = new Paint();
        configuration.setDither(false);
        configuration.setAntiAlias(false);
        Matrix myMatrix = new Matrix();
        myMatrix.postScale(canvas.getWidth() / grass.getWidth(), canvas.getWidth() / grass.getHeight());
        Bitmap resizedBitmap = Bitmap.createBitmap(grass, 0, 0, grass.getWidth(), grass.getHeight(), myMatrix, false);
        canvas.drawBitmap(resizedBitmap, 0, 0, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:13:12.777

If you work on bitmaps then you simply can't. You'd minimize the distortion by scaling up by non-fractional factor so each pixed would be repeated same number of times (i.e. image 10x10 to 20x20 is scaled by factor of two, but 8x8 to 12x12 is 1,5 so no luck). The solution would be to have all assets in vector form (i.e. SVG) and then render them on run-time according to device density and other specs or prepare separate assets for various type of devices (which would blow application size up a bit)

# html - IFRAME：拒绝显示文档，因为 X-Frame-Options 禁止显示

> ID：13336851
> 
> 赞同：4
> 
> 时间：2012-11-12T00:04:55.007
> 
> 标签：html, security, iframe, heroku, x-frame-options

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T08:06:01.173

# python - 在 Mac OSX Lion 10.7.5 上将 python3.2 设置为默认值而不是 python2.7

> ID：13336852
> 
> 赞同：8
> 
> 时间：2012-11-12T00:04:56.950
> 
> 标签：python, macos

当前运行 Mac OS X Lion 10.7.5 ，默认为 python2.7。在终端中，我输入“python”，它会自动调出 python2.7。我不想要那个。

如果我想使用 python3.2，我必须从终端输入“python3.2”。

我该如何改变？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T00:20:29.567

最安全的方法是在 中设置别名`~/.bashrc`：

```
 alias python=python3 
```

这样，您就可以避免破坏`python`作为 python2 中继的脚本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T00:30:32.633

您可以编辑默认 python 路径并将其指向 python3.2

在编辑器中打开`~/.bash_profile`并编辑它，使其看起来像

`PATH="/Library/Frameworks/Python.framework/Versions/3.2/bin:${PATH}" export PATH`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-14T00:26:14.337

如果您在 brew 上有 python 2 和 3。以下为我工作。

`brew unlink python@2`

`brew link python@3` （如果尚未链接）

# c++ - 在没有桌面环境 C++ 的情况下绘制图形？

> ID：13336855
> 
> 赞同：4
> 
> 时间：2012-11-12T00:06:40.647
> 
> 标签：c++, graphics

好的，这是一个非常奇怪的问题，我不知道如何表达，但是我似乎在任何地方都找不到任何东西，很可能是因为我没有使用正确的术语。另外，这可能是特定于操作系统的，如果是，我使用的是 Debian。

基本上，当您启动旧计算机或现代服务器计算机或类似的东西时，它们会启动到终端屏幕。您所做的就是输入内容。如果你想以图形方式做任何事情，你通常会下载一个桌面环境。

但我想知道，如果*没有*桌面环境，我怎么能去绘制图形呢？

我记得在 MS-DOS 上，您可以使用 QBASIC 更改屏幕模式，然后您可以像这样在屏幕上绘制彩色线条。它在 C++ 中可能要复杂得多，但我仍然希望指出正确的方向。

对不起，如果这个问题有点不具体，但我真的很想指出正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T00:14:34.033

这是通过使用帧缓冲区控制台完成的。然后你使用一个可以利用它的框架/库。例如[DirectFB](http://directfb.org)。还有一些小型库，例如[libFB](http://www.brownhat.org/libFB.html)。我认为[SDL](http://www.libsdl.org)也可以使用帧缓冲区。不过我自己从来没有试过。

然后是 Gtk+ 和 Qt 等 GUI 工具包的帧缓冲版本，如果你想要 GUI 小部件的话。

还有[SVGAlib](http://www.svgalib.org)，它直接与显卡对话，但现在已经过时了。不建议。通常，您正在寻找“Linux 帧缓冲区图形”。这应该为您提供一些起点。

要获得帧缓冲区控制台，您需要相应地配置内核。通常你会为你的显卡启用 KMS 驱动程序，并启用 KMS 帧缓冲区。如果您的卡没有 KMS 驱动程序，您可以使用适用于大多数硬件的通用 VESA 帧缓冲控制台（尽管它只是通用 VESA，速度慢且不加速。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:18:24.487

通常，“桌面环境”（在 Linux 上）由两部分组成：类似 XWindow 的图形“库”加上“窗口管理”（Gnome、KDE、Xcfe 等）。所以，如果我理解你的问题，你*只*需要设置一个没有窗口管理器的 XWindow 系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:19:49.857

在 MS-DOS 上，您可以通过写入视频控制器共享的 RAM 范围或调用 BIOS API 来编写写入屏幕的软件。

较新的 O/S（即 Windows）将阻止您执行其中任何一项操作：相反，您调用 O/S API，该 API 调用特定于 O/S 的视频设备驱动程序，该驱动程序输出到硬件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T00:31:38.777

当我读到它时，您问的是如何直接处理图形硬件。

这取决于硬件。

如果您手头有一台旧 PC 并想对其进行试验，那么您需要相应的旧开发软件，该软件可以在特定操作系统下在该硬件上运行，即当时在 MS-DOS 中运行的一些 C 编译器。您可以在 Windows 的“DOS 框”中执行此操作（不是控制台窗口，而是旧 PC 的仿真）。64 位 Windows 7 不支持 DOS 盒，但有一个免费的替代品，称为[DOSbox](http://www.dosbox.com/)。

然后，如果你走那条路，你可以在网上搜索“图形适配器”图形模式等。

基本上，对于旧的 PC 架构和在 DOS 下运行的程序，您使用 DOS 服务来切换图形模式，然后您在该模式的已知内存地址处访问图形内存。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-12T00:08:56.173

The `curses` (or ncurses) library is the old way of doing it in Unix flavours, although these days there is probably something better...

# jquery - 使用 FancyBox 和 JW Player 时的 jQuery 选择

> ID：13336856
> 
> 赞同：0
> 
> 时间：2012-11-12T00:06:48.950
> 
> 标签：jquery, fancybox, jwplayer, fancybox-2

我可以让以下简单场景工作：页面上的一个 div，单击该 div 将在 FancyBox 的覆盖窗口中使用 JW Player 打开一个视频。这是一个精简的代码：

HTML：

```
<div>
    <a class="play_video" href="#" rel="/bin/video.mp4">Click to Watch Video</a>
</div> 
```

jQuery：

```
$(document).ready(function() {
    $(".play_video").fancybox({
        content: '<div id="video_container" style="width:640px;height:381px;">Loading the player ... </div> ',
        afterShow: function()
            {
                var myVideo = $(".play_video").attr("rel");
                jwplayer("video_container").setup({
                    flashplayer: "/bin/player.swf",
                    file: myVideo,
                    width: 640,
                    height: 380,
                });
            }
    });
}); 
```

这是我的问题：如果我想显示两个 DIV，每个 DIV 播放不同的视频，我该如何更改行

```
myVideo = $(".play_video").attr("rel") 
```

动态并选择正确 div 的 rel 属性。例如，第二个 div 看起来像：

```
<div>
    <a class="play_video" href="#" rel="/bin/another_video.mp4">Click to Watch a different Video</a>
</div> 
```

我希望这很清楚！谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:43:53.500

该`.attr()`方法的问题在于它仅获取匹配集中第一个元素的属性值。要单独获取每个元素的值，您可能必须使用该方法`.each()`

要使其在不循环链接的情况下实际工作，您可以在`href`属性内设置视频引用（正确的工作方式）并以这种方式调整您的代码：

html

```
<a class="play_video" href="/bin/video.mp4">Click to Watch Video</a>
<a class="play_video" href="/bin/another_video.mp4">Click to Watch a different Video</a> 
```

脚本

```
$(document).ready(function() {
 $(".play_video").on("click", function(){
   $.fancybox({
     content: '<div id="video_container" style="width:640px;height:381px;">Loading the player ... </div> ',
     afterShow: function(){
        var myVideo = this.href;
        jwplayer("video_container").setup({
          flashplayer: "/bin/player.swf",
          file: myVideo,
          width: 640,
          height: 380,
        }); // jwplayer setup
     } // afterShow
   }); // fancybox
   return false; // prevents default 
 }); // on
}); // ready 
```

**注意**：`.on()`需要 jQuery 1.7+

# git - 如何恢复git中文件夹的删除？

> ID：13336857
> 
> 赞同：1
> 
> 时间：2012-11-12T00:06:52.137
> 
> 标签：git

我是 Git 新手，很抱歉这个简单的问题。

我用 git 提交了我的 java 项目，还提交了一些更改。我的最后一个更改是删除项目中的 bin 文件夹。我也将此推送到我的 bitbucket 帐户。现在我的问题是如何撤消此更改并检索我以前删除的文件夹。我删除的文件夹名为 bin。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:39:52.740

尝试

```
git revert HEAD 
```

它应该创建一个新的提交来撤消 HEAD 中的更改。您还应该有机会编辑新提交的消息。

```
git checkout HEAD path/to/mydirectory 
```

另一方面，应该恢复您的目录..

# xamarin.ios - SimpleMultilineEntryElement 插入点失败

> ID：13336859
> 
> 赞同：1
> 
> 时间：2012-11-12T00:06:54.353
> 
> 标签：xamarin.ios, monotouch.dialog

我正在使用[monotouch-element-pack](https://github.com/xamarin/monotouch-element-pack)中的 MonoTouch SimpleMultilineEntryElement （最初只是 MultilineEntryElement），当我点击以在现有文本中插入某处时，我可以插入一个字符，然后插入点跳到字符串的末尾。我已经检查了示例应用程序并且行为是相同的，所以它似乎是库中的某些东西，而不是我做错了。有没有其他人遇到过这个问题并解决了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:44:12.090

在 SimpleMultilineEntryElement 中将 FetchValue 更改为以下内容，基本上发生的情况是文本中的当前位置正在丢失，每次修改文本都会将您带到文本的末尾。

使用以下代码，您可以在开头保存文本中的当前位置，并在结尾处重新定位光标。

```
public void FetchValue() {
    if (entry == null) {
        return;
    }

    int currentPos = entry.SelectedRange.Location;
    var newValue = entry.Text;
    if (newValue == Value) {
        return;
    }

    Value = newValue;

    if (Changed != null) {
        Changed(this, EventArgs.Empty);
    }

    if (currentPos > 0) {
        NSRange newPos = new NSRange(currentPos, 0);
        entry.SelectedRange = newPos;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T05:49:26.647

不是 100% 确定这是否是问题，或者是否可能是问题。但我认为 entryKey 和 cellkey 对于特定元素必须是唯一的。两者都设置为 MultilineEntryElement 而不是 SimpleMultilineEntryElement。

正在考虑如果您以前使用过 MultilineEntryElement，它可能会在 GetCell 中出列。

```
var cell = tv.DequeueReusableCell (CellKey); 
```

也许...

# oracle - Oracle：TIMESTAMP 数据类型

> ID：13336861
> 
> 赞同：1
> 
> 时间：2012-11-12T00:07:00.637
> 
> 标签：oracle, oracle11g, timestamp

我在字段中使用时间戳来存储日期和时间，但是当我从表中获取行时，我在时间戳字段中得到了零负载。

```
SQL> select * from booking_session;

     BK_ID|BK_DATE
----------|-------------------------
         1|18-MAR-12 10.00.00.000000
         2|18-MAR-12 10.25.00.000000
         3|18-MAR-12 10.30.00.000000
         4|18-MAR-12 10.35.00.000000
         5|18-MAR-12 10.40.00.000000 
```

下面是插入语句

> 插入 BOOKING_SESSION 值 (1,TO_TIMESTAMP('18/03/2012 10:00', 'DD/MM/YYYY HH24:MI')

有人可以告诉我如何存储 bk_date 格式，`18-MAR-12 10.00`或者至少在它旁边有 AM 或 PM。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T03:50:33.007

您可以将`BK_DATE`column 声明为`timestamp(precision)`精度是小数位数以存储秒的小数部分。所以你可能已经声明了`BK_DATE timestamp(0)`. 如果您不需要将时间跟踪到几分之一秒，请使用`date`数据类型来存储日期。在任何情况下，时间部分 (hh:mi:ss) 都会在那里，如果您像以前那样插入数据，只指定小时和分钟，那么秒数将用零填充。您可以使用`to_char`函数和适当的日期格式掩码在显示时摆脱那些尾随零：

```
-- sample of data
SQL> with t1(BK_ID, BK_DATE) as(
  2    select 1, to_timestamp('18-MAR-12 10.00.00.000000', 'DD-MON-RR HH:MI:SSxFF6') from dual union all
  3    select 2, to_timestamp('18-MAR-12 10.25.00.000000', 'DD-MON-RR HH:MI:SSxFF6') from dual union all
  4    select 3, to_timestamp('18-MAR-12 10.30.00.000000', 'DD-MON-RR HH:MI:SSxFF6') from dual union all
  5    select 4, to_timestamp('18-MAR-12 10.35.00.000000', 'DD-MON-RR HH:MI:SSxFF6') from dual union all
  6    select 5, to_timestamp('18-MAR-12 10.40.00.000000', 'DD-MON-RR HH:MI:SSxFF6') from dual
  7  )
  8  select bk_id
  9       , to_char(bk_date, 'DD-MON-RR HH:MI') bk_date
 10    from t1
 11  ;

     BK_ID BK_DATE
---------- ------------------------
         1 18-MAR-12 10:00
         2 18-MAR-12 10:25
         3 18-MAR-12 10:30
         4 18-MAR-12 10:35
         5 18-MAR-12 10:40 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:20:04.903

尝试以下查询：

```
select * from booking_session where trunc(bk_date) = to_date('18-03-2012', 'dd-mm-yyyy'); 
```

# internet-explorer - IE @font-face not working

> ID：13336863
> 
> 赞同：2
> 
> 时间：2012-11-12T00:07:12.350
> 
> 标签：internet-explorer, cross-browser, font-face

I'm having issues getting ie to display my fonts correctly but they show correctly on Firefox, Safari, Opera, & Chrome. I used the website font2web to create the different font files and css files. I placed the fonts folder in the same directory as the css file that I'm working from and have looked through everything i can get my hands on relating to IE issues with `@font-face` but haven't had any luck.

The website is [thex-terminator.com](http://thex-terminator.com) and i'll post the relevant code below. Any pointers would be appreciated!

```
/** Generated by FG **/

@font-face {
    font-family: 'Conv_WarnockPro-Bold';
    src: url('fonts/WarnockPro-Bold.eot');
    src: local('☺'), 
         url('fonts/WarnockPro-Bold.eot?#iefix') format('emdedded-opentype'),
         url('fonts/WarnockPro-Bold.ttf') format('truetype'), 
         url('fonts/WarnockPro-Bold.svg') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

`h1 { font-family: 'Conv_WarnockPro-Bold'; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:59:01.797

这是因为您没有使用字体的权限。如果您在 F12 工具中检查控制台，则会出现错误：

> @font-face 未能通过 OpenType 嵌入权限检查。权限必须是可安装的。

我不确定您使用的字体是否未经许可用作网络字体，或​​者您使用的工具是否错误地设置了标志。[您可以从http://www.fonts.com/font/adobe/warnock/bold/web-font](http://www.fonts.com/font/adobe/warnock/bold/web-font)获得 Warnock Pro Bold 的网络字体

# emacs - Highlight region while typing

> ID：13336865
> 
> 赞同：1
> 
> 时间：2012-11-12T00:08:04.013
> 
> 标签：emacs

Let's say you are about to type something that you know you want to kill-yank later. For example, say we need to repeat the following 10 times:

```
grid.addValue([some variable]) 
```

Currently, before I start typing, I can press `C-<spc> C-<spc>` to activate then deactivate the mark at the beginning of the text. Then, once I finish typing `grid.addValue()`, I can press `C-x C-x` twice to go back to the original mark, then back to the end of the text with the text highlighted.

My question: is there a way to set the mark and highlight as I type, so when I am done with the phrase I can immediately copy and yank it a bunch of times?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:06:16.810

只需设置标记，键入，然后照常复制/杀死。

该区域（即点和标记之间的任何区域）未突出显示，但仍然可用。

# symfony1 - symfony 1.0 won't return a proper instance on local machine

> ID：13336868
> 
> 赞同：2
> 
> 时间：2012-11-12T00:08:33.030
> 
> 标签：symfony1

I recently had to start making small changes to an existing site so I downloaded it and tried to run it but get an error:

```
Call to undefined method sfContext::getController() in 
/home/user/www/site.com/web/index.php on line 16 
```

I tried to figure out which file is being loaded by inserting these lines with this command in index.php right before the dispatch call.

```
$reflection = new ReflectionClass('sfContext');
$classFile = $reflection->getFileName();
die($classFile);

sfContext::getInstance()->getController()->dispatch(); 
```

And it looks like file loaded is:

```
/home/user/www/site.com/lib/vendor/symfony1.0/test/unit/sfContextMock.class.php 
```

This symfony1.0 site works fine on original server but not on my local machine. I checked php version and php.ini and they are identical. I cant figure out why wrong class is being loaded or what the problem is.

**Here is the index.php file**

```
<?php

define('SF_ROOT_DIR',    realpath(dirname(__FILE__).'/..'));
define('SF_APP',         'front');
define('SF_ENVIRONMENT', 'prod');
define('SF_DEBUG',       true);

require_once(SF_ROOT_DIR.DIRECTORY_SEPARATOR.'apps'.DIRECTORY_SEPARATOR.SF_APP.DIRECTORY_SEPARATOR.'config'.DIRECTORY_SEPARATOR.'config.php');

sfContext::getInstance()->getController()->dispatch(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:29:16.547

您应该更新到可用的最新版本 ( [1.0.22](http://trac.symfony-project.org/browser/branches/1.0/CHANGELOG) )。

# c - How do I output a binary tree's data (all 4 types of traversal) to a file?

> ID：13336869
> 
> 赞同：1
> 
> 时间：2012-11-12T00:08:38.670
> 
> 标签：c, file, binary-tree, output

I have written a program(for homework)that creates a binary search tree. It will read from a file and on each line take a string and an int. ex. I 23, where I tells the program to insert and 23 is what gets inserted. The next line would be I 45...and so on. It will perform all of the commands correctly and then output to the screen in-order, pre-order, post-order and level-order traversals. My problem is that I need to output it to a file instead and cannot for the life of me figure it out. I have tried opening another file to write to it and pass the file to each traversal function and used fprintf instead of printf but that obviously didn't work. Any help would be great!

**EDIT to show file passing:**

My code is as follows:

```
#include <stdio.h>
#include <stdlib.h>

typedef int boo;
#define TRUE 1;
#define FALSE 0;

struct tree
{
    int c;
    struct tree* left;
    struct tree* right;
};
FILE* fo = fopen( "treedata.txt", "a+" );

//Prototypes
struct tree* create_tree( char );
struct tree* insert( struct tree*, char );
int height( struct tree* );
void print_in_order( struct tree*, FILE* );
void print_pre_order( struct tree*, FILE* );
void print_post_order( struct tree*, FILE* );
void print_level_order( struct tree*, FILE* );
void print_given_level( struct tree*, int, FILE* );
boo search_tree( struct tree*, char );
struct tree* trim_tree( struct tree*, char );
struct tree* chop_tree( struct tree* root );

int main()
{
    struct tree* root = NULL;
    char target;
char line[6];
char com[6];
int num;

FILE* fp = fopen( "data.txt", "r" );    
    if( fp )
    {
        while( fgets ( line, sizeof(line), fp ) != NULL  )
        {
        sscanf(line, "%s %d", &com, &num);

        if ( strcmp( com, "C" ) == 0 )
        {
            //root = insert( root, 0 );
            create_tree( 0 );
        }
        else if(strcmp( com, "I" ) == 0 )
        {
            root = insert(root, num);
        }
        else if(strcmp( com, "D" ) == 0 )
        {
            root = trim_tree( root, num );
        }
        else if(strcmp( com, "F" ) == 0 )
        {
            if( search_tree( root , num ) )
            {
                fprintf(fo, "\n%d was found!\n\n", num );
            }else
            {
                fprintf(fo, "\n%d was not found!\n", num );
            }
        }
        else if(strcmp( com, "In" ) == 0 )
        {
            fprintf(fo, "In Order: \n");
            print_in_order( root, fo );
            fprintf(fo, "\n");
        }
        else if(strcmp( com, "Pr" ) == 0 )
        {
            fprintf(fo, "Pre-Order: \n");
            print_pre_order( root, fo );
            fprintf(fo, "\n");
        }
        else if(strcmp( com, "Po" ) == 0 )
        {
            fprintf(fo, "Post-Order: \n");
            print_post_order( root, fo );
            fprintf(fo, "\n");
        }
        else if(strcmp( com, "L" ) == 0 )
        {
            printf( "Level Order: \n");
            print_level_order( root, fo );
        }

    }
        fclose( fp );
    }else
    {
        printf("Could not open file!!\n");
    }

fclose( fo );   
return 0;
}

//Functions
struct tree* create_tree( int c )
{
    struct tree* temp_tree = ( struct tree* ) malloc ( sizeof( struct tree ) );
    temp_tree->c = c;
    temp_tree->left = NULL;
    temp_tree->right = NULL;

    return temp_tree;
}

struct tree* insert( struct tree* t, int c)
{
    if( t == NULL )
    {
        return create_tree( c );
    }else
    {
        if( c <= t->c )
        {
            t->left = insert( t->left, c );
        }else
        {
            t->right = insert( t->right, c );
        }
        return t;
    }
} 

void print_in_order( struct tree* t, FILE* fo ) //print in order traversal
{
    if( !t )
    {
        return;
    }

    print_in_order( t->left );
    fprintf(fo, "%d\n", t->c );
    print_in_order( t->right );

}

void print_pre_order( struct tree* t, FILE* fo  ) //print pre order traversal
{
    if( !t )
    {
        return;
    }
    fprintf(fo, "%d\n", t->c );
    print_pre_order( t->left );
    print_pre_order( t->right );
}

void print_post_order( struct tree* t, FILE* fo  ) // print post order traversal
{
    if( !t )
    {
        return;
    }

    print_post_order( t->left );
    print_post_order( t->right );
    fprintf(fo, "%d\n", t->c );

}

int find_height(struct tree* t)
{
   if ( t == NULL )
       return 0;
   else
   {

     int lheight = find_height(t->left);
     int rheight = find_height(t->right);

     if (lheight > rheight)
         return(lheight+1);
     else return(rheight+1);
   }
} 

void print_given_level( struct tree* t, int level, FILE* fo  )
{

        if(t == NULL)
        return;
    if( level == 1 )
        fprintf(fo, "%d\n", t->c );
    else if( level > 1 )
    {
    print_given_level(t->left, level-1);
    print_given_level(t->right, level-1);
    }
}

void print_level_order( struct tree* t, FILE* fo  ) //print level order traversal
{
    int h = find_height(t);
int i;
for( i = 1; i <= h ; i++ )
    print_given_level( t, i, fo );

}
boo search_tree( struct tree* root, char target ) //find leaf
{
    if( !root )
    {
        return FALSE;
    }else if( target < root->c )
    {
        return search_tree( root->left, target );
    }else if( target > root->c )
    {
        return search_tree( root->right, target );
    }else
    {
        return TRUE;
    }
}

struct tree* trim_tree( struct tree* root, char target ) //delete leaf
{
    struct tree* p;
    struct tree* p2;

    if( !root )
    {
        return NULL;
    }
    if( root->c == target )
    {
        if( root->left == root->right )
        {
            free( root );
            return NULL;
        }else if( root->left == NULL )
        {
            p = root->right;
            free( root );
            return p;
        }else if( root->right == NULL )
        {
            p = root->left;
            free( root );
            return p;
        }else
        {
            p2 = root->right;
            p = root->right;

            while( p->left )
            {
                p = p->left;    
            }
            p->left = root->left;
            free( root );
            return p2;
        }        
    }else if( root->c < target )
    {
        root->right = trim_tree( root->right, target );
    }else
    {
        root->left = trim_tree( root->left, target );
    }
    return root; 
```

}

# windows-phone-7 - Getting current IP of windows phone 7

> ID：13336874
> 
> 赞同：5
> 
> 时间：2012-11-12T00:09:08.013
> 
> 标签：windows-phone-7, c#-4.0, windows-phone-7.1, windows-phone-8

I am building a windows phone 7.1 app. I need to find out if the phone is connected to any Wifi and if so, what is its current IP in the local network (ie. 192.168.0.100 like this). I've been trying to find out these information for some time now. Please help.

I've managed to get the local IP on my console app by using the following code

```
public void ScanIP()
{                
    IPHostEntry host = Dns.GetHostEntry(Dns.GetHostName());
    foreach (IPAddress ip in host.AddressList)
    {
        if (ip.AddressFamily == AddressFamily.InterNetwork)
        {
            String localIP = ip.ToString();
            Console.WriteLine(localIP);                        
        }
    }

    Console.ReadKey();
} 
```

However, I need similar thing done for windows mobile 7 app. Any idea ? Please share.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-23T13:18:31.313

Do a multicast and listen for replies. Once you identify your multicast message, you can get the IP of the sender (which is yourself). You can use [UdpAnySourceMulticastClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpanysourcemulticastclient%28v=vs.95%29.aspx) to do the multicasting. In case you're not in a wifi network, you will get a socket failure in the EndJoinGroup call. You should handle the exception and pass a specific value indicating you're not in a wifi network.

More info in this [blog post](http://blogs.msdn.com/b/andypennell/archive/2011/08/11/finding-your-own-ip-address-on-windows-phone-mango.aspx) by Andy Pennell.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:13:32.757

它会为您提供手机的IP地址...

```
 public static IPAddress Find()
    {
        List<string> ipAddresses = new List<string>();

        var hostnames = NetworkInformation.GetHostNames();
        foreach (var hn in hostnames)
        {
            if (hn.IPInformation != null)
            {
                string ipAddress = hn.DisplayName;
                ipAddresses.Add(ipAddress);
            }
        }

        IPAddress address = IPAddress.Parse(ipAddresses[0]);
        return address;
    } 
```

# php - Assetic doesn't update styles without cache:clear

> ID：13336880
> 
> 赞同：1
> 
> 时间：2012-11-12T00:10:07.883
> 
> 标签：php, symfony, twig, assetic

I have an app.less that imports everything (less) else if I comment a line in app.less app styles doesn't render the commented part, but if I change something in that imported less file, anything changes, I have to do `cache:clear` and to clear the browser cache to see the new style loaded...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:25:29.990

从另一个样式表（less、sass 等）导入的资源在更改时不会重新编译，即使您使用`php app/console assets:dump --watch`. 请参阅[有关 StackOverflow 的另一个问题](https://stackoverflow.com/questions/12075812/how-can-i-force-assetic-to-render-assets-each-time-the-page-is-reloaded)和[问题队列](https://github.com/symfony/AsseticBundle/issues/39)[中的此`AsseticBundle`](https://github.com/symfony/AsseticBundle/issues/39)问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T00:20:15.060

我遇到了同样的问题。这是因为 LESS 正在使用您`window.localstorage`来保存渲染的 css 文件。对于测试，您可以输入 javascript

```
<script> /* Provisory for dev environment: */ window.localStorage.clear(); </script> 
```

但是，这会导致您的页面加载速度非常慢。我还没有找到其他选择。

# linear-programming - AMPL 中的非负偏差变量

> ID：13336882
> 
> 赞同：3
> 
> 时间：2012-11-12T00:10:24.153
> 
> 标签：linear-programming, ampl, operations-research

我正在使用 AMPL，需要输入具有非负偏差变量 (s+ - s-) 的模型。

一个示例约束是：(x - 5) = (s+ - s-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T08:12:11.397

这是这样做的方法：

```
var x;
var sp >= 0;
var sm >= 0;

s.t.

cons1:
  (x - 5) = (sp - sm); 
```

仅供参考，[AMPL 书](http://www.ampl.com/BOOK/download.html)可以免费下载。

# algorithm - how to delete node from interval tree

> ID：13336885
> 
> 赞同：-1
> 
> 时间：2012-11-12T00:10:47.400
> 
> 标签：algorithm, data-structures, interval-tree

I have been reading about interval trees on wikipedia. Does anyone know how to implement the `delete` method in `Java`? The link to the delete algorithm is [http://en.wikipedia.org/wiki/Interval_tree#Deletion](http://en.wikipedia.org/wiki/Interval_tree#Deletion)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:59:21.267

我想使用居中间隔树方法（这是您使用的链接指向的位置）删除的伪代码看起来像：

```
deleteInterval(Node n, Interval i)
{
  n.intervalsDesc.remove(i)
  n.intervalsAsc.remove(i)
  if (i.end < n.value && n.leftChild != null) deleteInterval(n.leftChild, i)
  if (i.begin > n.value && n.rightChild != null) deleteInterval(n.rightChild, i)
} 
```

# carrierwave - Overriding uploader version with an image from a remote url

> ID：13336888
> 
> 赞同：3
> 
> 时间：2012-11-12T00:11:17.710
> 
> 标签：carrierwave

How can we override version method to extract an image from a URL instead of processing.

Basically, How can we do something like this:

```
version :normal do
    if model.is_facebook_image?
        #help needed
        #get image from facebook graph api: http://graph.facebook.com/model.fb_id/picture?type=normal
    else
     process :scale => [100, 133]
    end
end 
```

# c++ - 我怎样才能让这个函数返回一个 sf::Texture？SFML2.0

> ID：13336890
> 
> 赞同：0
> 
> 时间：2012-11-12T00:11:34.327
> 
> 标签：c++, textures, sfml

```
void TileSheetManager::setTileSheet(const string textureName)
{
    texture.loadFromFile(textureName);
}

sf::Sprite TileSheetManager::getTile(int left, int top, int width, int height)
{

    sf::IntRect subRect;
    subRect.left = left * 32;
    subRect.top = top * 32;
    subRect.width = width;
    subRect.height = height;

    sf::Sprite sprite(texture, subRect);

    return sprite;
} 
```

我需要`getTile()`返回一个 sf::Texture 但我不知道该怎么做。
顺便说一句，我正在使用 SFML2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:28:43.507

根据[此处](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Texture.php)和[此处](http://www.sfml-dev.org/documentation/2.0/classsf_1_1Image.php)的文档，您应该能够

```
sf::Image fullImage = texture.copyToImage();
sf::Image croppedImage(width, height);
croppedImage.copy(fullImage, 0, 0, subRect);
sf::Texture returnTexture();
returnTexture.LoadFromImage(croppedImage); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T00:46:47.723

您目前拥有的方法`getTile`可以完成它应该做的事情。您有一个 tile 管理类，它加载整个 spritesheet，并将裁剪区域作为 sprite 分发。不要仅仅为了解决这个问题而改变这个方法，你的`TileSheetManager`类结构很好。

如果要将其中一个精灵转换为纹理，可以尝试以下操作。

```
// Get a sprite from the Tile Manager.
sf::Sprite mySprite = tileSheetMgr.getTile(1,2,3,4);
// Create a new texture for the sprite returned.
sf::Texture spriteTexture;
// Generate the texture from the sprite's image.
spriteTexture.loadFromImage(*mySprite.getImage()); 
```

# c# - Uniquely identifying Logitech Unifying Keyboards (In C#)

> ID：13336894
> 
> 赞同：12
> 
> 时间：2012-11-12T00:12:40.880
> 
> 标签：c#, keyboard, keyboard-events, logitech

I have written a small program in C# 2010 which can split input from different keyboards by making an array of devices using, in part, the following:

*--This code works fine for non-unified keyboards--*

```
InputDevice id;
NumberOfKeyboards = id.EnumerateDevices();
id = new InputDevice( Handle );
id.KeyPressed += new InputDevice.DeviceEventHandler( m_KeyPressed );
private void m_KeyPressed( object sender, InputDevice.KeyControlEventArgs e ) {
  lbDescription.Text = e.Keyboard.Name;
  // e.Keyboard.* has many useful strings, none work for me anymore.
} 
```

Very happy with this, I ran out and bought 4 Logitech K230 keyboards which use the Unifying receiver. Sadly, all the keyboard data is now multiplexed and shows up in my code as a single keyboard!

**How can I identify which "unified" keyboard the input is coming from?** Ideally in C#, but I suppose I am willing to look at other languages if solutions exist.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:09:38.567

我没有统一键盘，但请检查您是否可以在 Windows 设备中看到多个键盘。然后你可以试试这个[http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard](http://www.codeproject.com/Articles/17123/Using-Raw-Input-from-C-to-handle-multiple-keyboard)并检查输出。

# paypal - Paypal IPN 货币和响应

> ID：13336903
> 
> 赞同：3
> 
> 时间：2012-11-12T00:14:00.670
> 
> 标签：paypal, paypal-ipn

我正在使用我在这里找到的贝宝 ipn 脚本 [http://coderzone.org/library/PHP-PayPal-Instant-Payment-Notification-IPN_1099.htm](http://coderzone.org/library/PHP-PayPal-Instant-Payment-Notification-IPN_1099.htm)

我知道我可以将信息发送到贝宝并得到回复。它表明我可以使用 $_POST 取回信息。我的问题是如何指定英国货币？

还想澄清一个小问题。我是否正确，这就是我可以确认它是成功的方式。

```
 if ($_POST['payment_status'] == 'completed')
        // Received Payment!
        // $_POST['custom'] is order id and has been paid for.
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:48:51.900

抱歉，这可能有点晚了，但以防万一 - 我目前使用“currencyCode”=>“AUD”，它正在沙箱中工作。

[PayPal](https://www.paypal.com/cgi-bin/webscr?cmd=p/sell/mc/mc_wa-outside)提供了完整的货币代码列表

对于你的，我猜它会是：

```
$p->add_field('currencyCode', 'GBP'); 
```

至于您关于 IPN 本身的问题，看来您走在正确的轨道上。这将取决于您返回的数据以及您是否对单个交易感兴趣（如果使用自适应付款）或者您是否在错误等情况下将它们全部撤消。确定您需要什么的最简单方法要做的是简单地显示或记录所有帖子数据，以便您了解它是如何构建的。

您还需要对其进行设置，以便 PayPal 可以访问该脚本。然后，您将此脚本的完整 URL 传递给“notify_url”参数并将其发送到 PayPal。付款完成后，PayPal 将向您的脚本发送大量信息，以便您进行处理。

不幸的是，我不是 PHP 背景，所以我不能给你你需要的确切代码。另请注意，在进入生产环境之前，您需要调查许多安全问题。不确定您是否已经打算使用该 validateIPN 功能执行此操作，但您需要确保您可以判断它是否来自 PayPal 而不是恶意用户。一种方法是使用自定义属性传递一个值，然后让 PayPal 将其传回给您，但是您最好使用 API 证书等。

如果您还没有，不妨看看 PayPal 完成的一些[示例应用程序](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)，其中似乎有不少 PHP 应用程序。

需要帮助请叫我，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T19:52:01.247

使用这个，它对我有用

```
$p->add_field('currency_code', 'GBP'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T00:31:17.617

您需要使用 PayPal 自适应付款，IPN 无济于事。

[贝宝自适应支付](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

使用 PayPal PHP 库，它可能如下所示：

```
// Create an instance, you'll make all the necessary requests through this
        // object, if you digged through the code, you'll notice an AdaptivePaymentsProxy class
        // wich has in it all of the classes corresponding to every object mentioned on the
        // documentation of the API
        $ap = new AdaptivePayments();

        // Our request envelope
        $requestEnvelope = new RequestEnvelope();
        $requestEnvelope->detailLevel = 0;
        $requestEnvelope->errorLanguage = 'en_GB';

        // Our base amount, in other words the currency we want to convert to
        // other currency type. It's very straighforward, just have a public
        // prop. to hold de amount and the current code.
        $baseAmountList = new CurrencyList();
        $baseAmountList->currency = array( 'amount' => $this->amount, 'code' => 'GBP' );

        // Our target currency type. Given that I'm from Mexico I would like to
        // see it in mexican pesos. Again, just need to provide the code of the
        // currency. On the docs you'll have access to the complete list of codes
        $convertToCurrencyListUSD = new CurrencyCodeList();
        $convertToCurrencyListUSD->currencyCode = 'USD';

        // Now create a instance of the ConvertCurrencyRequest object, which is
        // the one necessary to handle this request.
        // This object takes as parameters the ones we previously created, which
        // are our base currency, our target currency, and the req. envelop
        $ccReq = new ConvertCurrencyRequest();
        $ccReq->baseAmountList = $baseAmountList;
        $ccReq->convertToCurrencyList = $convertToCurrencyListUSD;
        $ccReq->requestEnvelope = $requestEnvelope;

        // And finally we call the ConvertCurrency method on our AdaptivePayment object,
        // and assign whatever result we get to our variable
        $resultUSD = $ap->ConvertCurrency($ccReq);
        $convertToCurrencyListUSD->currencyCode = 'EUR';
        $resultEUR = $ap->ConvertCurrency($ccReq);

        // Given that our result should be a ConvertCurrencyResponse object, we can
        // look into its properties for further display/processing purposes
        $resultingCurrencyListUSD = $resultUSD->estimatedAmountTable->currencyConversionList;
        $resultingCurrencyListEUR = $resultEUR->estimatedAmountTable->currencyConversionList; 
```

# excel - 用不同的值替换 Excel 工作表中的单元格

> ID：13336915
> 
> 赞同：1
> 
> 时间：2012-11-12T00:16:52.513
> 
> 标签：excel, vba, excel-formula

我有一个包含大约 900 行数据的 Excel 表，我需要遍历其中一列，并根据列中当前的内容用不同的值替换该列的内容。

例如，假设 F 列输入了以下值：
Adj/Aviation & Transportation
Adj/Aviation & Transportation
Adj/Aviation & Transportation
Adj ESL Instructor
Adj/ESL
Adj/Aviation & Transportation
Professor/Aviation
Professor-Aviation
Associate Chair, Professor
Professor
Prof/航空与运输
兼职教授
教授
教授
Adj/航空
教授
Dir Master's Prog/Assoc Prof
Chair/Assoc Prof/Aviation&TS
Adj Asst Prof/Aviation
Assistant Professor/Aviation
Adj.Asst。航空专业

我想浏览此列，如果其中一个单元格包含值“Aviation”，我想清除该单元格中的内容并输入“Aviation & Transportation”。

如果有人能告诉我如何完成这项任务，那就意味着全世界！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:25:59.597

添加一个新列并使用如下公式填充它：

```
=IF(NOT(ISERROR(SEARCH("Aviation",B1))),"Aviation & Transportation",B1) 
```

*   这是未经测试的，可能需要一些语法调整，因为我没有把它放在 excel 中。但它应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T00:30:16.630

其实，我有一个更好的解决方案。您可以在 Find..Replace 菜单中使用通配符。

点击 Ctrl F > Replace > Enter`*Aviation*`然后写下你想要替换单元格值的任何内容。我测试了它并且它有效。您可以启用或禁用区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T11:25:58.343

试试这个

```
 Sub replace()
    Dim Rws As Long, Rng As Range, c As Range
    Rws = Cells(Rows.Count, "F").End(xlUp).Row
    Set Rng = Range(Cells(1, 6), Cells(Rws, 6))

    For Each c In Rng.Cells
        If c Like "*Aviation*" Then c = "Aviation & Transportation"
    Next c
End Sub 
```

您还可以在 VBA 代码中使用自动过滤器。

开始 [![在此处输入图像描述](../Images/bd5765d26115f70ef92e494c58d111af.png)](https://i.stack.imgur.com/P7xgg.jpg) 结果 [![在此处输入图像描述](../Images/2a0d59545a92121025cde21d987b146d.png)](https://i.stack.imgur.com/G6S6f.jpg)

使用自动过滤器代码。

```
Sub Button1_Click()
    Dim Rws As Long, Rng As Range, c As Range
    Rws = Cells(Rows.Count, "F").End(xlUp).Row

    Columns("F:F").AutoFilter Field:=1, Criteria1:="=*Aviation*"
    Set Rng = Range(Cells(2, 6), Cells(Rws, 6)).SpecialCells(xlCellTypeVisible)
    Rng.Value = "Aviation & Transportation"
    ActiveSheet.AutoFilterMode = 0

End Sub 
```

# javascript - 是否有适用于 OSX 的 TypeScript IntelliSense 编辑器？

> ID：13336917
> 
> 赞同：4
> 
> 时间：2012-11-12T00:17:26.310
> 
> 标签：javascript, node.js, intellisense, typescript, sublimetext

鉴于 TypeScript 团队正在努力将语言传播到整个开源社区，似乎为智能感知支持创建跨平台解决方案将是他们的首要任务：是这样吗？有谁知道 SublimeText 等的任何正在进行的插件。或直接来自 TypeScript 团队的开发，将带来与 VisualStudio 中提供的类似的支持？

... 和相关：有谁知道 TypeScript 团队是否正在开发一个更“友好”的公共 API 来实现智能感知或编译？值得注意的是：在节点支持方面，没有可用的类似 TypeScript.compile(str) 的方法，这使得集成比它需要的复杂得多（有关“友好”API 的示例，请参阅 CoffeeScript）。

任何线索或信息将不胜感激。

# performance - ColdFusion 提高循环内查询的性能

> ID：13336923
> 
> 赞同：1
> 
> 时间：2012-11-12T00:18:12.273
> 
> 标签：performance, coldfusion, coldfusion-8

我的数据库设置有点复杂，有几个很多很多的表。

我正在尝试从这些数据中生成一个 XML 文档。有一些检查，比如如果没有用一种语言定义名称，请尝试从另一种语言获取名称（而不是显示 null）

我遇到的问题是循环中有很多查询。

是否有任何指导方针，例如远离哪些东西以及使用什么来提高性能？

cfoutput cfloop cfquery ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:47:35.937

如果循环逻辑基本上是在进行数据处理，例如：根据第一个查询的值，决定下一个查询用什么返回数据库，那么为了性能，你能做的最好的事情就是把所有的逻辑都去掉您的 CF 代码，并将其放入数据库中。使用 DB 进行数据处理，使用 CF 处理处理后的数据，并将其转换为输出。

CF 唯一应该进行数据操作的时候是如果您需要处理来自不同来源的数据：例如数据库、一些远程服务、文件系统、不同的数据库等。基本上只有当数据库不能进行数据处理时如果您涉及 ColdFusion 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:41:55.090

关于，“就像如果没有用一种语言定义名称，请尝试从另一种语言获取名称（而不是显示空值）”。

您应该能够在查询中执行此操作。几乎每个数据库都有一个合并功能。它们也都支持案例构造。您只需要根据您的情况选择最合适的方法即可。

# android - 果冻豆上的视频意图出现奇怪的错误

> ID：13336925
> 
> 赞同：3
> 
> 时间：2012-11-12T00:18:25.347
> 
> 标签：android, video, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

我遇到了一个奇怪的视频错误，`Intents`直到 Android 4.1 才出现。

这是我启动`Intent`. 我也尝试过使用其他 MIME 类型，包括*video/mp4*，但是通配符 (*video/**) 应该可以正常工作，根据官方 Android 开发者网站[Intents 和 Intent filters](http://developer.android.com/guide/components/intents-filters.html)。

```
Intent videoIntent = new Intent();
videoIntent.setAction(Intent.ACTION_VIEW);
videoIntent.setData(Uri.parse(fileUrl));
videoIntent.setType("video/*");

startActivity(videoIntent); 
```

在我的设备上，都运行 Android 4.1，这会导致`ActivityNotFoundException`，因为它说没有安装的应用程序可以处理`Intent`. 这很奇怪，因为它一直适用于所有以前的 Android 版本，并且应该在默认视频播放器中启动。

许多第三方视频播放器都能够处理`Intent`，所以我想知道为什么它不再与默认视频播放器一起使用。

有任何想法吗？

这似乎是同一个问题：

[视频播放器在果冻豆设备上不起作用：android.content.ActivityNotFoundException](https://stackoverflow.com/questions/12931019/video-player-not-working-on-jelly-bean-device-android-content-activitynotfounde?rq=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:01:36.760

在其他人的帮助下，我设法找到了解决方案。该`setType()`调用似乎清除了任何先前附加的数据，包括该`setData()`调用。根据文档：

> 此方法会自动清除之前设置的所有数据（例如通过 setData(Uri)）。

当我将其更改`setDataAndType()`为时，它起作用了。看来这毕竟不是果冻豆的问题，谢天谢地:-)

这是创建视频意图的最终代码：

```
public static Intent getVideoIntent(String fileUrl) {
    Intent videoIntent = new Intent(Intent.ACTION_VIEW);
    videoIntent.setDataAndType(Uri.fromFile(new File(fileUrl)), getMimeType(fileUrl));

    return videoIntent;
}

public static String getMimeType(String url) {
    String type = null;
    String extension = MimeTypeMap.getFileExtensionFromUrl(url);

    if (extension != null) {
        MimeTypeMap mime = MimeTypeMap.getSingleton();
        type = mime.getMimeTypeFromExtension(extension);

        if (TextUtils.isEmpty(type))
            type = "video/*"; // No MIME type found, so use the video wildcard
    }

    return type;
} 
```

# c++ - 如何使用 Visual Studio 在 C++ 中使用二维数组？

> ID：13336927
> 
> 赞同：1
> 
> 时间：2012-11-12T00:18:26.753
> 
> 标签：c++, windows, visual-studio-2010

我是这个网站的新手，本学期用 C++ 语言编程。

我真的努力了2天，问过同学，但他们也不知道。一位同学说要使用二维数组，但我不知道那是什么，我的教授还没有研究过二维数组。

我被困住了，非常感谢帮助。

输入文件包含以下内容：

```
Plain_Egg 1.45
Bacon_and_Egg 2.45
Muffin 0.99
French_Toast 1.99
Fruit_Basket 2.49
Cereal 0.69
Coffee 0.50
Tea 0.75 
```

idk 如何显示所有“用户”订单

基本上是一张收据，比如他点了这个和多少，然后问“你还想要什么吗？”，然后再拿订单号和多少，然后最后给回一张像这样的收据

```
bacon_and_eggs    $2.45
Muffin            $0.99
Coffee            $0.50
Tax               $0.20
Amount Due        $4.14 
```

这是我的代码：

```
// Libraries

#include <iostream>
#include <string>
#include <iomanip>
#include <fstream>
#include <cmath>

using namespace std;

//structures

struct menuItemType {
    string itemName;
    double itemCost;
};

// Prototypes
void header();
void readData(menuItemType menu[]);
void Display(menuItemType menu[]);

int main() {

    header();
    menuItemType menu [8];
    readData(menu); 
    Display(menu);

    //system("pause");

    return 0;
}

void header() {
    char c= 61;
    for (int i=0; i < 64; i++) {
        cout << c; 
}

cout << c << endl; 
cout << endl;
cout << "Breakfast Menu" <<endl;

    for (int i=0; i < 64; i++) {
        cout << c; 
    }

    cout << "" << c << endl;
    cout << endl;
}

void readData(menuItemType item[]) {
    int i=0;
    ifstream in;
    in.open("input.txt");
    cout << fixed << setprecision(2);

    while(!in.eof()) {
        in >> item[i].itemName >> item[i].itemCost;
        ++i;
    }
}

void Display(menuItemType item[]) {
    int choice = 0, quantity = 0;
    double total = 0.0, totalF = 0.0, tax = 0.0;
    char exit = 'y';
    int j = 1, z = 1, i = 1;

    //the Menu
    for (int i=0; i<8; i++){
        cout << j << ". " << setw(18) << left << item[i].itemName << "$" << setw(10) << item[i].itemCost << endl;
        j++;
    }

    cout << endl;

    while(exit == 'y' || exit == 'Y') {

        cout << "Please Enter your Selection or 0 to Exit : ";
        cin >> choice;

        if(cin.fail()) {
            cout << "*******Invalid selection*******" << endl;
            cin.clear();
            cin.ignore(1000,'\n');
        } else if (choice==0) {break; }
        else {
            cout<< "Enter Quantity: ";
            cin>> quantity;

            if (quantity==0) { break;}
            else {
                choice--;
                total += (quantity * item[choice].itemCost);
                tax = (total * .05);
                totalF = total + tax;
                cout << endl;
            }
            cout << endl;
            cout << "======================================================" << endl;
            cout << item[choice].itemName << "\t\t" << item[choice].itemCost << endl;
            cout << "======================================================" << endl;
            cout << "Do you want to continue (Y/N): ";
            cin >> exit;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T01:33:26.113

首先，您**不需要**二维数组！据我所知，您已经有一个合适结构的一维数组：存储对象名称及其价格的东西。缺少的是当前数组中有多少对象以及它有多少空间。如果您想使用整个数组的内容，请确保您的对象已正确初始化，例如，名称为空（这实际上是自动发生的）并且价格为零（这不是）。

我不确定这是否是复制和粘贴错误，但标题包含错误。包含指令应如下所示：

```
#include <iostream> 
```

读取值的实际循环并没有真正起作用：您**总是**需要在尝试读取**后**检查输入是否成功！此外，使用`eof()`for 检查循环结束是错误的（我不知道人们从哪里得到这个；任何推荐使用`eof()`for 检查输入循环的书都只对刻录有用）。循环应该是这样的：

```
while (i < ArraySize && in >> item[i].itemName >> item[i].itemCost)
    ++i;
} 
```

这也解决了潜在的边界溢出问题，以防阵列可以消耗更多的输入。您可能需要考虑使用 a`std::vector<Item>`代替：此类跟踪有多少元素，您可以根据需要添加新元素。

请注意，您并没有完全说出您遇到的问题：您需要更清楚地描述您的实际问题是什么。以上只是纠正现有错误并重新调整查看方向（即，暂时忘记二维数组）。

# csv - NOAA 数据并写入 csv 文件

> ID：13336928
> 
> 赞同：1
> 
> 时间：2012-11-12T00:18:38.223
> 
> 标签：csv

我正在尝试从他们的[http://www.srh.noaa.gov/data/obhistory/PAFA.html](http://www.srh.noaa.gov/data/obhistory/PAFA.html)中的 NOAA 数据创建一个 csv 文件。

目前，我在编写 csv 文件时遇到问题。

```
import urllib2 as urllib
from bs4 import BeautifulSoup
from time import localtime, strftime
import csv
url = 'http://www.srh.noaa.gov/data/obhistory/PAFA.html'
file_pointer = urllib.urlopen(url)
soup = BeautifulSoup(file_pointer)

table = soup('table')[3]
table_rows = table.findAll('tr')
row_count = 0
for table_row in table_rows:
row_count += 1
if row_count < 4:
 continue

date = table_row('td')[0].contents[0]
time = table_row('td')[1].contents[0]
wind = table_row('td')[2].contents[0]

print date, time, wind
with open("/home/eyalak/Documents/weather/weather.csv", "wb") as f:
writer = csv.writer(f)
print date, time, wind
writer.writerow( ('Title 1', 'Title 2', 'Title 3') )
writer.writerow(str(time)+str(wind)+str(date)+'\n')
 if row_count == 74:
  print "74" 
```

打印结果很好，不是文件。我得到：

```
Title   1,Title 2,Title 3
0,5,:,5,3,C,a,l,m,0,8," 
```

创建的 csv 文件中的问题是： 1\. 标题被分成错误的列；第 2 列，有“1，Title”与“title 2” 2\. 数据在错误的地方用逗号划定 3\. 如脚本将新行写入前一行，而不是从底部追加。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:30:20.320

至于覆盖行，请尝试使用“a”（附加）选项而不是“wb”打开文件。就固定逗号描述而言，尝试将每个字符串封装在方括号中。看看这里的两个例子，看看有什么区别：

```
import csv

text = 'This is a string'

with open('test.csv','a') as f:
    writer = csv.writer(f)
    writer.writerow(text) 
```

这将创建一个 csv，其第一行是文本的每个字母，由逗号分隔。或者，

```
import csv

text = 'This is a string'

with open('test.csv','a') as f:
    writer = csv.writer(f)
    writer.writerow([text]) 
```

这将创建一个 csv 文件，其第一行仅包含一个文本项，并且没有逗号分隔字符。

# php - OOP：成分和公共财产？

> ID：13336929
> 
> 赞同：1
> 
> 时间：2012-11-12T00:18:44.277
> 
> 标签：php, oop, design-patterns, composition

所以可以说我有一个由其他类组成的类。

```
class HttpRequest
{
public $session = new Session();
// .. the rest of the HttpRequest code
} 
```

现在，我想通过 HttpRequest 类访问 Session 类，所以我使用组合。但这是否违反了 OOP 封装或数据隐藏的规定，即所有属性都应该受到保护，并通过 setter 和 getter 方法访问？

这是错的吗：

```
$request = new HttpRequest();
$request->session->set('id', 5); 
```

或者我应该使用这个：

```
$request = new HttpRequest();
$session = $request->getSession();
$session->set('id', 5); 
```

封装状态应该保护属性。那么如何提供对内部类的访问呢？就正确的 OOP 而言，第一个示例是否错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:27:22.070

不允许直接访问对象的正当理由：

*   允许在对象本身之外对对象进行操作。如果您公开该属性，您的代码的任何部分都可能覆盖 HttpRequest 类上的 $session，并且您将很难跟踪它。从数据保护的角度来看，封装是为了确保只有对象的方法可以直接改变对象。
*   允许您优雅地处理未设置该变量的情况。如果由于某种原因， $session 没有在你的类上设置 - 当你尝试调用它的方法时，你会立即遇到致命错误。如果将它包装在 getter 中，则可以检查该条件并动态创建该类的新实例。
*   遵循真正的“OO”范式

但是，在某些情况下，我会说这样做是可以的。特别是如果您知道该属性将始终被设置（并且不会设置它的唯一方式是不支持使用该对象的方式）。

这也取决于如何访问该属性。Symfony2 在他们的 Request 类中使用了这个。在这种情况下感觉很自然，因为“查询”、“发布”和“请求”变量都是“参数包”（美化数组）。但是，它们确实为 Session 对象公开了一个 getter——可能是因为它的用例。

简而言之：这实际上取决于您将如何使用该变量。在这种特殊情况下，我会说这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T15:27:57.637

我知道这是旧的，但我不会使用这些。您的 HttpRequest 对象是否真的需要保留 Session 对象，或者可以将 Session 对象传递给 HttpRequest 对象的某些需要它的函数？让 HttpRequest 存储此对象是否有充分的理由？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:43:19.403

我喜欢你的第一个选项，（它是使用组合的那个），并且看起来有封装（我不知道是什么使函数集），但我想它正在通过“组件”对象的函数修改某些属性“ session”，该模式也称为“委托”。

另一方面，如果您使用封装，则不能使用“public”，即允许对所有人进行修改。正因为如此，您使用 setter 或 getter，或者在您的代码“set”中

# javascript - $.extend IE8 中的 jQuery 对象

> ID：13336930
> 
> 赞同：2
> 
> 时间：2012-11-12T00:18:47.130
> 
> 标签：javascript, jquery, jquery-ui-widget-factory

在 Widget Factory 中对 jQuery 对象使用 $.extend 时，IE8 似乎丢失了新创建对象上的 jQuery 上下文。让我演示一下。

以下代码适用于 IE9+、Chrome、FireFox

```
$.widget("a07.Wooh", {
    options: {
        test: "Awesome"
    },
    _testFunc: function() {
        // Perform some operations on the DOM using this.element jQuery Object
        this.element.after("<div class=\"stuff\">Some cool stuff</div>").next().hide();
    },
    _testFunc2: function() {
        //Copy the this.element object
        this.element2 = $.extend({}, this.element);

        //Perform some operations on the DOM using this.element2 jQuery Object
        this.element2.next().css('color', 'red').show();
    },
    _create: function() {
        this._testFunc();
        this._testFunc2();
    },
    _init: function() {}
}); 
```

[工作的jsfiddle](http://jsfiddle.net/EasyCo/SS7mw/)

如上所述，此代码在**除**IE8 之外的所有主要浏览器中都可以正常工作。基本上它返回该`this.element2.next().css().show()`行的错误消息：

> 对象不支持此属性或方法

它所指的属性/方法是 jQuery 方法 next()、css() 和 show()

看起来好像在 IE8 中 this.element2 已经失去了它的 jQuery 上下文，因为如果我像这样将对象包装在一个 jQuery 函数中：`this.element2 = $(this.element2);`一切都很好。

[兼容 IE8 的 jsfiddle](http://jsfiddle.net/SS7mw/9/)

**所以问题是**，这里发生了什么？这是 IE8 的标准行为还是我错误地以编程方式处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:27:34.670

如果您的意图只是创建一个包含相同元素的单独 jQuery 对象，那么如何：

```
this.element2 = $( this.element[0] ); 
```

# java - 如何在构建过程中包含自定义文本文件

> ID：13336931
> 
> 赞同：0
> 
> 时间：2012-11-12T00:18:50.367
> 
> 标签：java, build-automation, serviceloader

最近我一直在写插件，然后我使用 ServiceLoader 加载这些插件。为了让 ServiceLoader 找到我的插件，必须在 META-INF/services/ 下的 jar 中包含一个文本文件。文本文件必须以 ServiceLoader 正在“寻找”的接口命名，并且必须包含实现类的规范名称。所有这些都工作得很好，但是这种方法有一个非常烦人的问题：每次构建项目时，我都必须**手动**将 /services/ 文件夹以及文本文件添加到 jar 中（使用 Winrar）。这在开发过程中**非常**麻烦，因为我必须不断地重新构建项目才能进行测试，这意味着我还必须添加文件夹和文本文件**每次也**用手。****

 **我真的希望有一种方法可以让 Java 在构建项目时自动添加 META-INF/services/ 文件夹以及文本文件，因为这让我发疯了！:)

顺便说一句，我正在使用 Netbeans，它 (afaik) 在内部使用 Ant 来自动化构建过程。我想这些信息可能与我的问题有关。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:31:42.087

右键单击“源包”，选择“新建|其他”

![在此处输入图像描述](../Images/e1dcedf2ff2ace99427279cc41ee0d89.png)

从“类别”树中，选择“其他”。从“文件类型”中选择“文件夹”

![在此处输入图像描述](../Images/3dbaedc9b80468cd989b69d82d75cf9c.png)

命名你的文件夹...

![在此处输入图像描述](../Images/50dbf5ab79016e1c96477fc1377bd91d.png)

中提琴：D

![在此处输入图像描述](../Images/b4caec97261910e619183b9233824ceb.png)

现在右键单击新文件夹并遵循相同的基本步骤，但这一次，使用“空文件”来创建您的文本文件**

# iphone - 以横向和纵向模式制作APP的最佳方法

> ID：13336933
> 
> 赞同：0
> 
> 时间：2012-11-12T00:19:32.543
> 
> 标签：iphone, ios, xcode, landscape-portrait

制作横向和纵向的应用程序的最佳方法是什么？

我曾尝试尝试自动调整大小，但效果不佳，因为我想使用屏幕的所有宽度。我应该使用两个视图吗？我已经使用 Storyboard 完成了 UIViewController。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:34:54.693

轻松支持两种方向的一种简单方法是使用 UITableViews 和标准 UITableViewCell 样式。

一旦您需要自定义 UITableViewCell，您将必须自己配置自动布局约束。一旦你习惯了它们，它们就可以节省大量时间。

查看

[WWDC 2012 自动布局简介](https://developer.apple.com/videos/wwdc/2012/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:42:20.493

你的问题能再具体一点吗？我不太确定我明白你在问什么。

如果您要问如何将应用程序设置为默认为横向方向，那么只需转到主项目，在“目标”下它应该有您的应用程序名称，然后您可以看到“支持的界面方向”选项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T02:30:40.873

使用两个视图一开始很容易，但是当您需要进行调整时，就变得非常困难。对一个视图的一次修改需要在另一个视图上进行修改。我相信使用自动布局是最好的方式。是的，一开始很难掌握它，但是一旦习惯了自动布局，进行修改就变得轻而易举。

# javascript - 按单个值对对象数组进行排序

> ID：13336936
> 
> 赞同：-1
> 
> 时间：2012-11-12T00:19:53.137
> 
> 标签：javascript, arrays, sorting

我试图弄清楚如何按该数组中的对象对我的数组进行排序。在此示例中，我希望能够按玩家姓名或玩家分数对数组进行排序。

```
var topPlayers = new Array();

$(".player").each( function(i) {
    topPlayers[i] = {};
    topPlayers[i]["name"] = $(this).children(".name").text();
    topPlayers[i]["score"] = $(this).children(".score").text();
});

topPlayers.sort(function(a.name,b.name){return a.name-b.name}); //This is the line of code I can't figure... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:25:58.360

按名称排序：

```
topPlayers.sort(function(a, b)
{ 
  if ( a.name > b.name ) return 1;
  else if ( a.name < b.name ) return -1;
  else return 0;
}); 
```

按分数排序：

```
topPlayers.sort(function(a, b)
{ 
  return a.score - b.score;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:25:40.453

该`sort`方法采用一个函数进行比较并根据结果返回一个数字：

```
topPlayers.sort(function(a,b){
  if (a.name < b.name) return -1;
  if (a.name > b.name) return 1;
  return 0;
}); 
```

对于数值，您可以将它们减去以获得正确的返回值：

```
topPlayers.sort(function(a,b){
  return a.score - b.score;
}); 
```

# c++ - 在 C++ 中实现 LRU

> ID：13336942
> 
> 赞同：0
> 
> 时间：2012-11-12T00:20:58.560
> 
> 标签：c++, arrays, algorithm

我正在尝试实现 LRU 页面替换。我能够让 FIFO 算法工作。但我不确定如何跟踪最近最少使用的？

我正在阅读一个文件。它的结构类似于第一个数字是 pid(1)，第二个数字是 ref(45)，依此类推：

```
1 45
1 46
1 45
1 44
2 76
2 75
2 77
2 77 
```

所以，我正在使用一个类数组，并逐行解析文件，如果它不在数组中，则将 pid 和 ref 放在该索引中。如果数组已满，则返回开始广告重新开始。

```
class pagetable
{

public:
int pid;
int ref;
int faults;
pagetable();
};
pagetable* page = new pagetable[frames]; 
```

我提示输入帧数。我提示输入文件名并将其存储在

```
ifstream inputStream; 
```

然后我可以调用我的 LFU 函数并获取每个 pid 和 ref 来检查。

```
int runsimLFU(ifstream &inputStream, pagetable* page, int frames ){

int i =0;
int j=0;
bool flag = false;
int cnt=0;
int index = 0;
int value = 0;

while(1){

  inputStream >> pid;
  inputStream >> ref;

      page[count].pid = pid;
      page[count].ref = ref;
  pagefaults++; 
```

像这样的东西我可以继续抓取文件的每一行。

这就是我搜索数组的方式

```
bool findinarray(pagetable* page, int frames, int pid, int ref)
{

 for(int i=0; i < frames+1; i++) {
    if(page[i].pid == pid && page[i].ref == ref)
    {
        return true;

    }
 }
    return false;

 } 
```

两个问题

1) 我不确定如何跟踪 LRU。我会想象第二个数组和一个计数器变量，但这就是我所能看到的。

2）一旦我知道LRU并且当传入的pid，ref不在数组中时，我将其填充到索引LRU编号的数组中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T04:25:23.533

通常，您对 LRU 有两个相互竞争的需求：

*   快速找到一个条目 - 建议使用数组查找、哈希表或二进制映射作为索引，以及
*   快速添加/附加/删除条目 - 建议链接列表

如果您分别解决任一要求，最终会导致暴力效率低下。您可以自己协调两个容器 - 理想情况下将它们包装到 LRU 类中以提供一些封装并提高可靠性。或者，boost 多索引容器可以满足此类要求：www.boost.org/libs/multi_index/

# php - 使用 twitter API 移动光标的 PHP 代码

> ID：13336945
> 
> 赞同：1
> 
> 时间：2012-11-12T00:21:14.467
> 
> 标签：php, twitter, web-crawler

所以我已经有一个脚本，它使用 xml 格式的 API 收集 Twitter 用户的前 4999 个关注者 ID。我半理解游标过程是如何工作的，但我很困惑如何实现它以循环直到它收集所有关注者。我试图收集的用户将接听大约 8 个电话。关于如何实现游标循环的任何想法？

```
<?php
 $xmldata = 'http://api.twitter.com/1/followers/ids/microsoft.xml';
 $open = fopen($xmldata, 'r');
 $content = stream_get_contents($open);
 fclose($open);
 $xml = simplexml_load_file($xmldata);
 $cursor = $xml->next_cursor;
 $file = fopen ('output1.csv', 'w+');
fwrite($file, "User id\n\r");
 while($cursor =! 0)
 {
 foreach ($xml->ids->id as $id) 
 {
    fwrite($file, $id . ", ");
fwrite($file, "\n");

 }
 $xmldata = 'http://api.twitter.com/1/followers/ids.xml?cursor='. $cursor
.'&screeb_name=microsoft';
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T00:50:36.367

让我以微软目前的追随者（346K 追随者）为例。

[https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=microsoft](https://api.twitter.com/1/followers/ids.json?cursor=-1&screen_name=microsoft)

它只获取 5000 个用户 ID，这是 twitter API 的限制。因此，您需要从 json 输出中获取 next_cursor 字符串

next_cursor_str":"1418048755615786027"

所以，你的下一个电话是

[https://api.twitter.com/1/followers/ids.json?cursor=1418048755615786027&screen_name=microsoft](https://api.twitter.com/1/followers/ids.json?cursor=1418048755615786027&screen_name=microsoft)

继续这样做，直到 next_cursor 为零。

当您一次又一次地这样做时，只需继续存储所有ID ..

# session - Tomcat 管理器应用程序 - 会话过多

> ID：13336946
> 
> 赞同：1
> 
> 时间：2012-11-12T00:21:36.820
> 
> 标签：session, tomcat, tomcat6

当我检查我的`Tomcat`应用程序管理器时，我发现我有太多会话（超过 4600 个）：

![会话过多](../Images/cde088edf0b0f6c1529f4d68f898d10f.png)

为什么呢 ？这可以链接到已部署的应用程序还是它已经运行了很长时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T14:36:04.323

这可能有多种原因，其中一些比其他的更奇特。他们中有一些：

*   您确实有很多用户访问您的网站
*   您的应用程序内存不足，并且使会话无效的线程已死亡
*   您已被搜索引擎爬虫或 DDOS 攻击（不太可能）
*   您启用了某种通过 HTTP 完成的监视，并且会话不会被丢弃

你看过这些会话的列表吗？他们有相似的空闲时间吗？哪些页面被点击？HTTP 日志说明了什么？（谷歌分析？

该应用程序已在线很长时间的事实与会话数无关。Tomcat 会定期使这些会话无效。

为了获得**最精确**的答案，请执行内存转储并使用分析器对其进行分析。

# php - 使用 str_replace foreach 两个数组

> ID：13336948
> 
> 赞同：0
> 
> 时间：2012-11-12T00:22:18.507
> 
> 标签：php, arrays, foreach, str-replace

假设我有两个从 pre_gmatch 得到的数组：

```
preg_match_all('#<div class="cloud_flow_big">(.*?)</div>#is', $mystring, $names, PREG_SET_ORDER);
preg_match_all('#<div class="bgframe(.*?)</div></div>#is', $mystring, $numbers, PREG_SET_ORDER); 
```

获取数组中的项目计数始终相同。所以这是了解发生了什么的代码，并且在第一个数组的所有项目中都有一个重复的单词（在这种情况下这个单词是**数字**）：

```
foreach ($names as $key => $name) {
    $i++;
$nameclean = str_replace ("number", $numbers[$key], $names[$key]);
echo $nameclean;
} 
```

那么如何foreach第一个数组，但结果是将第一个数组中的所需单词替换为数组2中的所需项。示例：数组$names中第一项中的单词**编号**应替换为数组$numbers中的第一项（**First**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:37:35.040

你很接近，我在这里为你修好了：

```
<?PHP

$names = array('John is number', 'Tom is number', 'Ben is number', 'Tony is number', 'Peter is number');
$numbers = array('First', 'Second', 'Third', 'Fourth', 'Fifth');

foreach ($names as $key => $name) {
    $nameclean = str_replace ("number", $numbers[$key], $names[$key]);
    echo $nameclean . "<br />";

}

?> 
```

您的错误在 str_replace() 中。您正在数组 $name[$key] 中进行替换，这只是名称本身。您想从 $names[$key] 数组值进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:51:49.063

像这样的东西？

```
 foreach ($names as $key => &$item) {
        $item = str_replace ("number", $numbers[$key], $item);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:34:02.710

主题（的第三个参数`str_replace`）必须是`$names[$key]`或`$name`

# python - 具有许多将返回相同值的键的二维字典

> ID：13336952
> 
> 赞同：3
> 
> 时间：2012-11-12T00:22:51.387
> 
> 标签：python, dictionary, python-2.x

我想制作一个每个值有多个键的二维字典。我不想使元组成为键。而是制作许多返回相同值的键。

我知道如何使用 defaultdict 制作二维字典：

```
from collections import defaultdict
a_dict = defaultdict(dict)

a_dict['canned_food']['spam'] = 'delicious' 
```

我可以使用使元组成为键

```
a_dict['food','canned_food']['spam'] = 'delicious' 
```

但这不允许我做类似的事情

```
print a_dict['canned_food']['spam'] 
```

因为 'canned_food' 不是键，所以元组 ['food','canned_food'] 是键。

我了解到，我可以简单地将许多独立设置为相同的值，例如：

```
a_dict['food']['spam'] = 'delicious'
a_dict['canned_food']['spam'] = 'delicious' 
```

但这会因大量键而变得混乱。在字典的第一维中，每个值我需要约 25 个键。有没有办法编写字典，以便元组中的任何键都可以工作？

[我之前问过这个问题，](https://stackoverflow.com/questions/13326042/2d-dictionary-with-multiple-keys-per-value) 但不清楚我想要什么，所以我重新发布。预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T01:03:58.790

这是一个可能的解决方案：

```
from collections import Iterable

class AliasDefaultDict():
    def __init__(self, default_factory, initial=[]):
        self.aliases = {}
        self.data = {}
        self.factory = default_factory
        for aliases, value in initial:
            self[aliases] = value

    @staticmethod
    def distinguish_keys(key):
        if isinstance(key, Iterable) and not isinstance(key, str):
            return set(key)
        else:
            return {key}

    def __getitem__(self, key):
        keys = self.distinguish_keys(key)
        if keys & self.aliases.keys():
            return self.data[self.aliases[keys.pop()]]
        else:
            value = self.factory()
            self[keys] = value
            return value

    def __setitem__(self, key, value):
        keys = self.distinguish_keys(key)
        if keys & self.aliases.keys():
            self.data[self.aliases[keys.pop()]] = value
        else:
            new_key = object()
            self.data[new_key] = value
            for key in keys:
                self.aliases[key] = new_key
            return value

    def __repr__(self):
        representation = defaultdict(list)
        for alias, value in self.aliases.items():
            representation[value].append(alias)
        return "AliasDefaultDict({}, {})".format(repr(self.factory), repr([(aliases, self.data[value]) for value, aliases in representation.items()])) 
```

可以这样使用：

```
>>> a_dict = AliasDefaultDict(dict)
>>> a_dict['food', 'canned_food']['spam'] = 'delicious'
>>> a_dict['food']
{'spam': 'delicious'}
>>> a_dict['canned_food']
{'spam': 'delicious'}
>> a_dict
AliasDefaultDict(<class 'dict'>, [(['food', 'canned_food'], {'spam': 'delicious'})]) 
```

请注意，有些边缘情况具有未定义的行为 - 例如对多个别名使用相同的键。我觉得这使得这种数据类型对于一般用途来说非常糟糕，我建议你最好改变你的程序而不需要这种过于复杂的结构。

`str`另请注意，此解决方案适用于 3.x，在 2.x下，您需要换掉`basestring`和`self.aliases.keys()`。`self.aliases.viewkeys()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T00:46:00.653

这有帮助吗？

```
class MultiDict(dict):
    # define __setitem__ to set multiple keys if the key is iterable
    def __setitem__(self, key, value):
        try:
            # attempt to iterate though items in the key
            for val in key:
                dict.__setitem__(self, val, value)
        except:
            # not iterable (or some other error, but just a demo)
            # just set that key
            dict.__setitem__(self, key, value)

x = MultiDict()

x["a"]=10
x["b","c"] = 20

print x 
```

输出是

```
{'a': 10, 'c': 20, 'b': 20} 
```

# php - 教义结果缓存不缓存带有连接的查询

> ID：13336953
> 
> 赞同：6
> 
> 时间：2012-11-12T00:23:06.357
> 
> 标签：php, doctrine-orm

我正在使用 Doctrine 2.2.2 尝试对用户实体以及用户的公司进行查询。我希望缓存这个查询，因为里面的数据不会经常改变，如果有的话。以下是我尝试过的：

```
$user = $em->createQuery('
    SELECT u, c
    FROM Entities\User u
    LEFT JOIN u.company c
    WHERE u.id = :id
')->setParameter('id', $identity)->useResultCache(true, 21600, 'user_' . $identity)->getResult(); 
```

看起来，用户实体被缓存了，但它仍然对公司进行查询。有没有一种方法可以同时获取两者并将它们放入结果缓存中？

我确实找到[了这个](http://shout.setfive.com/2010/04/28/using-doctrine-result-cache-with-two-deep-relations/)，但它已经很老了，他的解决方案对我不起作用。

有人建议我这样做[，](https://gist.github.com/4060861)但这违背了结果缓存的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:13:50.563

我已经使用 Doctrine 2.3 对此进行了测试：

```
$q->setResultCacheDriver( new \Doctrine\Common\Cache\ApcCache() )
  ->setResultCacheLifetime( 21600 )
  ->setResultCacheId( 'user_' . $identity ); 
```

当我第一次运行它时，我在我的 sql-logger 中看到了实际的查询。
当我第二次、第三次等运行它时，我在我的 sql-logger 中看不到任何内容。

我的结论是它工作正常。

我猜你要么没有配置结果缓存，要么配置了非永久性结果缓存（如 ArrayCache），或者它是 Dontrine 2.2.2 中的错误（尽管我在吉拉）。

PS：我从另一个问题（[Doctrine detaching, caching, and merging](https://stackoverflow.com/questions/13372305/doctrine-detaching-caching-and-merging)）收集到你已经升级到 Doctrine 2.3。你还有这个问题吗？

PPS：在 Doctrine 2.0（我认为是 2.2）之后的某个地方，结果缓存发生了变化。不是缓存水合结果，而是缓存 sql-result（每次运行都会发生水合）。如果要缓存水合结果，则必须使用水合缓存（但请注意，这些结果**不会**合并到 EntityManager 中）。

# java - 在 Java 中明确消除重载构造函数的歧义

> ID：13336960
> 
> 赞同：1
> 
> 时间：2012-11-12T00:25:07.963
> 
> 标签：java, constructor, null, ambiguous, disambiguation

我知道，如果我在 Java 中有一个可以接受几种不同类型参数的重载方法，并且我想传递`null`给该方法，我需要将其显式转换为一种接受的类型。我的问题是，是否可以`null`从方法本身中选择调用哪个版本的方法（例如，通过添加另一个重载来处理`null`）？

我的问题如下 - 我有一个带有一个接受一个参数的重载构造函数的类：

```
public class MyClass {

    public MyClass(A arg) {
        // do something
    }

    public MyClass(B arg) {
        // do something else
    }
} 
```

用例是这样的，如果类是用 a 构造的`null`，那么只有构造函数的第二个版本才有意义。但是`new MyClass((B)null)`每次都必须这样做很容易出错。如果我不小心使用了转换 to `A`，则会执行错误的构造函数。而且我也不能在我的`A`构造函数中引入以下检查：

```
if (arg == null) {
    this((B)arg);
} 
```

因为`this(...)`不是第一个声明。当然，我可以在此检查中复制构造函数中的代码`B`，或者引入另一种方法来执行`B`构造函数所做的事情，然后从构造函数内部和此检查中调用它，但这看起来不像“干净”解决方案（并且可能并不总是可能的，例如在级联构造函数的情况下）。

有没有办法让我只需要每次都执行构造函数`new MyClass(null)`的版本？`B`

我试图添加这个重载，但编译器抱怨：

```
public MyClass(null arg) {
    this((B)arg);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T00:41:41.430

> 但是`new MyClass((B) null)`每次都必须这样做很容易出错。

如果您打算使用这样的裸构造函数，那是 Java 语言必须提供的最佳机制。

但是您可以通过用对象工厂方法替换`new`调用来避免这种情况；`static`例如

```
 public static MyClass newANull() {
      return new MyClass((A) null);
  }

  public static MyClass newBNull() {
      return new MyClass((B) null);
  } 
```

（显然，您需要更好的方法名称......）

* * *

请注意，使用工厂方法还允许您执行诸如每次返回相同的“ANull”或“BNull”`MyClass`实例之类的操作……如果这是合适的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T01:34:40.777

如果两者`A`都是`B`接口，这将起作用

```
 public <T extends Object&A&B> MyClass(T arg)
    {
        this((B)arg);
    }

    new MyClass(null); // the 3rd constructor is chosen, which calls the 2nd 
```

# javascript - 在流星应用程序中，为什么需要将一些外部脚本放在客户端/子目录中？

> ID：13336961
> 
> 赞同：1
> 
> 时间：2012-11-12T00:25:37.757
> 
> 标签：javascript, meteor

当我将 Mousetrap javascript 文件 (http://craig.is/killing/mice) 放在 Meteor 应用程序的主目录中时，出现以下错误：

```
Your app is crashing. Here's the latest log.

app/mousetrap.js:711
    _addEvent(document, 'keypress', _handleKey);
              ^
ReferenceError: document is not defined
    at app/mousetrap.js:711:15
    at app/mousetrap.js:813:4
    at /Users/Suchow/Desktop/Collective/.meteor/local/build/server/server.js:107:21
    at Array.forEach (native)
    at Function._.each._.forEach (/Users/Suchow/Desktop/Collective/.meteor/local/build/server/underscore.js:76:11)
    at run (/Users/Suchow/Desktop/Collective/.meteor/local/build/server/server.js:93:7)
Exited with code: 1
Your application is crashing. Waiting for file change. 
```

当 Mousetrap 文件放置在 client/ 子目录中时，该错误消失。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T02:20:21.607

因为服务器端没有dom。如果你把它放在根目录下，它已经在服务器端和客户端加载。

lib 像 Sugarjs，momentjs 可以同时工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-14T16:41:51.617

在 Meteor 1.0 中，创建包时，强制 Meteor 仅在客户端加载 3rd 方库的方法是显式将`client`参数传递到`api.addFiles`文件`package.js`中

```
Package.onUse(function(api) {
    api.addFiles('lib/thirdpartylibrary.js', 'client');
} 
```

# objective-c - NSTextField 在不可编辑时自动增加宽度

> ID：13336965
> 
> 赞同：0
> 
> 时间：2012-11-12T00:26:14.480
> 
> 标签：objective-c, macos, cocoa, width, nstextfield

我正在使用 Xcode/cocoa 制作一个 mac osx 应用程序。在这个应用程序中，有一个 NSTextField 在按下按钮时显示文本。当文本字段处于可编辑行为时，一切正常，但此文本字段不应该是可编辑的。问题是当文本太长而无法在文本字段中完整显示并且文本字段不可编辑时，宽度会自动放大以适合文本。即使在禁用或可选择的行为中，我应该对文本字段不调整大小怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:33:46.967

“即使在禁用或可选择的行为中，我应该如何对文本字段不调整大小？” 这种行为是由 Apple 自己给出的……你可以改变它的行为，但**它会违反**Apple 的 UI 准则。所以我想说请坚持默认行为。或者对于学习过程，您可以覆盖 NSTextField 并实现 AutoLayoutSizing 的方法。您也可以使用 if-else 中提供的约束来做到这一点。

# algorithm - 距离 K 的顶点

> ID：13336966
> 
> 赞同：6
> 
> 时间：2012-11-12T00:27:00.753
> 
> 标签：algorithm, graph-algorithm

给定一个图**G(V,E)**和一个顶点**v ，我如何找到通过长度正好为****k**的简单路径（路径上没有顶点重复）可到达的所有顶点。

邻接矩阵的幂给出了顶点之间的路径数，但它包括非简单路径。

这个问题可以在多项式时间内解决吗？如果没有，是否有任何已知的近似算法。任何指向文学的指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:03:47.987

我只回答第一个问题：“它可以在多项式时间内解决吗？”。

假设它在多项式时间内是可解的。然后解决它`k=|V|-1`并选择任何结果顶点。删除这个顶点并解决这个问题`k=|V|-2`。生成的一组顶点应包含至少一个连接到最后一个删除顶点的顶点。移除这个顶点并继续处理`k=|V|-i`直到剩下一个起始顶点。您刚刚使用多项式时间算法找到了原始图的[哈密顿路径](http://en.wikipedia.org/wiki/Hamiltonian_path)。

由于哈密顿路径问题是 NP 完全的，因此 OP 中的问题也不太可能在多项式时间内解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:51:03.877

`k`下面介绍的算法将找到与起始节点的最小距离等于的节点列表`v`。EG：给定一个三角形图 v、A 和 B，如果：

*   `k`为 0，则结​​果为`v`
*   `k`为 1，则结果包含`A`和`B`
*   `k`为 2 或更多，则结果为`empty`

伪代码：

```
FindNodesWithShortestPath_K(G, v, k):
    create empty list R
    create empty queue Q

    mark v as visited
    set v.distance to 0
    add v to Q

    while Q is not empty:
        t <- dequeue node from Q
        if t.distance == k:
            add t to R
        else if t.distance > k:
            break
        else                
            for all neighbors u of t:
                if u is not marked as visited:
                    mark u as visited
                    u.distance = t.distance + 1
                    enqueue u onto Q

    return result 
```

笔记：

*   检查节点是否被标记为已访问保证简单的路径
*   节点的初始距离不相关
*   如果 t.distance == k，则 t 属于 R 并且 t 邻居（不在 Q 中）不属于
*   如果 t.distance > k，那么即使 Q 不为空，算法也会停止。给定算法实现，Q中节点的距离是非递减的
*   R 和 Q 上的操作可以在 O(1) 中运行，具体取决于实现。该算法的最坏情况为 O(|E| + |V|)

# mongodb - MongoDB 在数组中查找元素（子文档）

> ID：13336968
> 
> 赞同：2
> 
> 时间：2012-11-12T00:27:06.570
> 
> 标签：mongodb, mongodb-query

我正在尝试更新集合中子文档数组中的数组字段。我的收藏看起来像这样：

```
{
 _id:"1",
 employees:[{ eid:"2",
              ename:"test",
              is_user:true
             },
             { eid:"3",
              ename:"test2",
              is_user:true
             }
           ]
} 
```

我正在尝试更新 is_user 状态并尝试以下方式：

```
db.users.update({_id:"1","employees.eid":"2"},{$set:"employees.$.is_user":true},true); 
```

我也试过：

```
db.users.update({_id:"1","employees.$.eid":"2"},{$set:"employees.$.is_user":true},true); 
```

但是当我运行查找时，对于查询：

```
db.users.find({_id:"1","employees.eid":"2"}); 
```

它仍然没有给我任何东西。有人可以帮我吗？谢谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T00:33:08.943

这确实有效。

```
> db.test.insert({_id:"1", employees:[{ eid:"2", ename:"test", is_user:true }, { eid:"3", ename:"test2", is_user:true } ] })
> db.test.find({_id:"1","employees.eid":"2"});
{ "_id" : "1", "employees" : [  {   "eid" : "2",    "ename" : "test",  "is_user" : true },  {   "eid" : "3",    "ename" : "test2", "is_user" : true } ] } 
```

对于`$`您想要使用它的操作员，例如：

```
> db.test.insert({_id:"1", employees:[{ eid:"2", ename:"test", is_user:false }, { eid:"3", ename:"test2", is_user:false } ] })
> db.test.find({_id:"1", "employees.eid":"2", "employees.is_user": true});
> db.test.update({_id:"1", "employees.eid":"2"}, {$set: {"employees.$.is_user": true}});
> db.test.find({_id:"1", "employees.eid":"2", "employees.is_user": true});
{ "_id" : "1", "employees" : [  {   "eid" : "2",    "ename" : "test",   "is_user" : true },     {   "eid" : "3",    "ename" : "test2",  "is_user" : false } ] } 
```

请注意如何在数组中的两个对象上将 insert`is_user`设置为`false`，并且在更新后匹配对象从`false`to更新`true`，这就是您要查找的内容吗？

# java - Jsoup 无法正常工作

> ID：13336969
> 
> 赞同：1
> 
> 时间：2012-11-12T00:27:07.053
> 
> 标签：java, jsoup

我不确定到底是什么问题。Jsoup 是否没有关注链接或者我做错了什么。

```
String s = "http://www.sears.com/search=canon 70-200?pageNum=1&viewType=list";
Document d = Jsoup.connect(s).get();
System.out.println("Content: " + d.toString()); 
```

这应该输出网站的 html 代码，但是我得到空标题并清空几乎所有内容。没有信息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:33:04.810

您的代码应该如下所示：

```
final String url = "http://www.sears.com/search=canon%2070-200?pageNum=1&viewType=list";
final Document doc = Jsoup.connect(url).get ();
System.out.println("Content: " + doc.toString()); 
```

URL 中的空格字符应替换为`%20`.

# ruby-on-rails - 表单中的必填字段

> ID：13336974
> 
> 赞同：3
> 
> 时间：2012-11-12T00:27:41.783
> 
> 标签：ruby-on-rails

我在 Rails 中有一个 HTML 表单，比如

```
<form name="input" action="jump">
  Title: <input type="text" name="title"> 
  <input type="button" value="Submit">
</form> 
```

我想`title`成为必填字段（即用户不能将其留空），并且我想在 Rails`jump`控制器中验证这一点。注意`title`不是模型中的字段；它只是一个将在控制器中处理的表单字段。

如何进行验证，并优雅地向用户显示错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T00:59:38.383

您可以使用活动模型来处理事情：

类 SomeModel << ActiveModel

```
#some Model
attr_accessor :title
validates_presence_of :title 
```

结尾

这样做的好处是您可以将验证和显示错误的处理提交给 Rails。

另一种方法是纯粹在控制器端处理事情：

```
if  params[:title].present?

  ...#do something

else

  ...#do something else 
```

然而，这是一种不太优雅的方法。如果你走这条路，我建议创建一个 ruby​​ 对象以至少将逻辑移出控制器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T03:44:27.753

你实际上可以使用 HTML5 技术来申请

```
 <input type="text" name="usrname" required="required" /> 
```

此外，您可以使用 gem '客户端验证' github 在这里 [https://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)

我建议你使用宝石......非常棒：D

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-24T15:04:05.633

您有 2 个选项，您可以在前端和后端进行验证，两者都做很好：

前端

```
<%= f.text_field ..other attributes... required: true %> 
```

后端

你又有两个选择

在你的模型中

```
validates :title, :presence 
```

或者在你的控制器中你可以用这个检查

```
if  params[:title].present?
    #your logic
end 
```

# ruby-on-rails - 路由错误没有路由匹配 [POST] "/sessions/new"

> ID：13336976
> 
> 赞同：1
> 
> 时间：2012-11-12T00:28:07.850
> 
> 标签：ruby-on-rails, ruby, routing, ruby-on-rails-3.2

我有一个错误，希望有人可以帮助并给我一些线索来处理这个问题。我有选择地遵循敏捷开发书，当我复制他们的代码时，结果如下：

```
Routing Error
No route matches [POST] "/sessions/new"
Try running rake routes for more information on available routes. 
```

这就是我的 routes.rb 文件中的内容：

```
get 'admin' => 'admin#index'
controller :sessions do
 get 'login' => :new
 post 'login' => :create
 delete 'logout' => :destroy
end
resources :users 
```

在我的 session_controller: skip_before_filter :authorize def new end

```
def create
 user = User.find_by_name(params[:login_name])
 if user and user.authenticate(params[:password])
  session[:user_id] = user.id
  redirect_to admin_url
 else
  redirect_to login_url, alert: "Invalid user/password combination"
 end
end

def destroy
 session[:user_id] = nil
 redirect_to users_url, notice: "Logged out"
end 
```

在我的 session#new.html.erb 中：

```
 <% if flash[:alert] %>
  <p id="notice"><%= flash[:alert] %></p>
 <% end %>
 <%= form_tag do %>
  <fieldset>
    <legend>Please Log In</legend>
    <div>
      <%= label_tag :login_name, 'Login name:' %>
      <%= text_field_tag :login_name, params[:login_name] %>
    </div>
    <div>
      <%= label_tag :password, 'Password:' %>
      <%= password_field_tag :password, params[:password] %>
    </div>
    <div>
      <%= submit_tag "Login" %>
    </div>
  </fieldset>
<% end %> 
```

我也在使用 has_secure_password 并且最近更新到 Ruby v 193 和 Rails 3.2.8。我只是仍在学习 ROR，因此非常感谢您的帮助-我一直在尝试自己弄清楚，但我无法做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:36:19.503

您当前发布到表单所在的同一页面。由于您的视图是控制器中的`new`操作`sessions`，因此它正在提交一个`POST`到`sessions/new`. 然后，Rails 正在寻找`POST`通往`sessions#new`. 由于不存在，因此出错。

但是，如果您查看您的路线，您会发现您有一条`post 'login' => :create`路线实际上会执行`create`您设置的处理表单提交的操作。因此，如果您将表单提交到`/login`路由，将很好地将所有内容发布到预期的操作。

为此，请更改：

```
<%= form_tag do %> 
```

至

```
<%= form_tag('/login') do %> 
```

另外，我强烈建议您阅读以下内容：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)，它将让您更好地了解 Rails 路由的工作原理。

**编辑：** 我刚刚看到您可能正在重新提交到 /login 这应该可以工作......我认为它仍然会默认提交到当前操作但是这是正式的会话/新的所以你可以给我的建议吗？看看有没有区别？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:58:08.420

运行“rake 路线”时你会得到什么？你能复制一下吗？另外，您能否复制表单浏览器呈现的 HTML 代码？

# php - SQL查询依赖于同一页面上另一个php中的结果

> ID：13336980
> 
> 赞同：1
> 
> 时间：2012-11-12T00:29:12.420
> 
> 标签：php, mysql

我正在尝试编写一个查询，从我的数据库中获取火车列表，用户将输入真实姓名，第一个查询将获取车站或“tiploc”的代码，然后在第二个查询中使用它。出于某种原因，我没有得到任何回报，我确信这与从获取中获取的数据有关，因为如果我对 Tiploc 进行硬编码，它可以正常工作。我在 php 方面相当薄弱，所以任何帮助都会很棒！谢谢

```
<?
 mysql_connect("localhost","root","XXXXXX")
or die ("No connection could be made to the OpenRail 
Database");mysql_select_db("autotrain");

$query1 = "SELECT tiploc_code FROM allstations WHERE c LIKE 'Cradley Heath';";

$result1 =mysql_query($query1);

$tiploc=null;
while($row = mysql_fetch_assoc($result1)){
$tipoc=$row['tiploc_code'];

}
$query2 = "SELECT allstations.C, locations.public_departure
FROM `locations` , allstations, schedules_cache,schedules
WHERE locations.id = schedules_cache.id
AND schedules_cache.id = schedules.id
AND '2012-11-11' BETWEEN schedules.date_from AND schedules.date_to
AND locations.tiploc_code = '$tiploc'
AND locations.public_departure >=1600
AND locations.public_departure <=1700
AND schedules.runs_su LIKE '1'
AND schedules_cache.destination = allstations.tiploc_code
ORDER BY locations.public_departure ASC;";

$result2=mysql_query($query2);

while($row = mysql_fetch_assoc($result2)){
echo($row['C']);

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:40:31.723

如果您访问 PHP 手册页，则不鼓励使用 mysql_fetch_assoc。我假设tiploc_code 是您数据库中的一个字段。因此，当您查询数据库时，它将返回一个对象。你可以使用

```
$tipoc = $reuslt1[0]->tiploc_code 
```

如果它只有 1 行。如果有多行使用。$count = count($result1);

```
for($i = 0;$i<count;$i++){
$tipoc = $reuslt1[$]->tiploc_code
$query2 = "SELECT allstations.C, locations.public_departure
FROM `locations` , allstations, schedules_cache,schedules
WHERE locations.id = schedules_cache.id
AND schedules_cache.id = schedules.id
AND '2012-11-11' BETWEEN schedules.date_from AND schedules.date_to
AND locations.tiploc_code = \"$tipoc \"
AND locations.public_departure >=1600
AND locations.public_departure <=1700
AND schedules.runs_su LIKE '1'
AND schedules_cache.destination = allstations.tiploc_code
ORDER BY locations.public_departure ASC;";

$result2=mysql_query($query2);

$c = $result2[0]->C;
echo $c;
} 
```

我再次假设每个tiploc只有一个'c'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:40:57.453

两件事情：

首先，您的代码中有错字。在第一个查询的第一个 while 循环中，您有一个名为 $tipoc 而不是 $tiploc 的变量。因此，您在第二次查询中将没有结果。

其次，您应该将第二个查询的逻辑放在第一个查询的循环中。这样，如果第一个查询返回结果，您只执行第二个查询。如果您只期望第一条记录中的一条记录，您可以将逻辑从 while 循环更改为 if 语句，如下所示：

```
if($row = mysql_fetch_assoc($result1)){
    $tiploc=$row['tiploc_code'];
    ...
    include your second query here inside the if statement. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:42:09.517

您正在覆盖 $tipoc=$row['tiploc_code'];

试试下面的代码。

```
<?
 mysql_connect("localhost","root","Boeing1992")
or die ("No connection could be made to the OpenRail 
Database");mysql_select_db("autotrain");

$query1 = "SELECT tiploc_code FROM allstations WHERE c LIKE 'Cradley Heath';";

$result1 =mysql_query($query1);

$tiploc=null;
$tipocArr = array();
while($row = mysql_fetch_assoc($result1)){
$tipocArr[] =$row['tiploc_code'];

}
$tipoc = implode(",",$tipocArr);

$query2 = "SELECT allstations.C, locations.public_departure
FROM `locations` , allstations, schedules_cache,schedules
WHERE locations.id = schedules_cache.id
AND schedules_cache.id = schedules.id
AND '2012-11-11' BETWEEN schedules.date_from AND schedules.date_to
AND locations.tiploc_code IN '$tiploc'
AND locations.public_departure >=1600
AND locations.public_departure <=1700
AND schedules.runs_su LIKE '1'
AND schedules_cache.destination = allstations.tiploc_code
ORDER BY locations.public_departure ASC;";

$result2=mysql_query($query2);

while($row = mysql_fetch_assoc($result2)){
echo($row['C']);

}
?> 
```

# objective-c - UITextView 子类作为自身的代表

> ID：13336981
> 
> 赞同：16
> 
> 时间：2012-11-12T00:30:03.593
> 
> 标签：objective-c, ios, cocoa-touch, uiview, uitextview

假设我将 a 添加`UITextView`到 my`UIView`中，并且我希望它在每次内容更改时更改其背景颜色。我可以通过成为`UITextView`和实施的代表来做到这一点`textViewDidChange`。

如果我经常使用这种行为，那么创建一个`UITextView`子类是有意义的，我将其称为`ColorSwitchingTextView`. 默认情况下，它应该包括颜色切换行为，因此如果需要该行为，任何人`UIView`都可以简单地添加它而不是标准`UITextView`。

如何检测`ColorSwitchingTextView`班级内内容的变化？我不认为我可以做类似的事情`self.delegate = self`。

总而言之，`UITextView`子类如何知道其内容何时发生变化？

编辑似乎我可以使用`self.delegate = self`，但这意味着使用的 UIViewController`ColorSwitchingTextView`也不能订阅通知。一旦我`switchingTextView.delegate = self`在视图控制器中使用，子类行为就不再起作用。任何解决方法？我正在尝试获得一个习惯`UITextView`，否则它就像一个普通的`UITextView`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-12T02:52:34.577

在您的子类中，监听`UITextViewTextDidChangeNotification`通知并在收到通知时更新背景颜色，如下所示：

```
/* 
 * When you initialize your class (in `initWithFrame:` and `initWithCoder:`), 
 * listen for the notification:
 */
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(myTextDidChange)
                                             name:UITextViewTextDidChangeNotification
                                           object:self];

...

// Implement the method which is called when our text changes:
- (void)myTextDidChange 
{
    // Change the background color
}

- (void)dealloc
{
    // Stop listening when deallocating your class:
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T04:43:23.847

最好从一开始就以正确的方式去做。

Apple 和 SOLID 的建议是子类化不是 UITextView，**而是 UIView**。在您的自定义 UIColorTextView 中，您将有成员 UITextView 作为子视图，而您的 UIColorTextView 将是它的代表。此外，您的 UIColorTextView 将拥有自己的委托，并将所需的委托回调从 UITextView 传递给它的委托。

我有一些这样的任务，不是使用 UITextView，而是使用 UIScrollView。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T03:37:18.267

在您的子类中，`self`作为观察者添加到`UITextViewTextDidChangeNotification`.

也就是说，我不同意正在进行的对话，即设置`self`为代表是一个坏主意。对于这种特殊情况，当然，但这只是因为有更好的方法（UITextViewTextDidChangeNotification）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T03:39:36.570

您可以使用 NSNotificationCenter。

在子类中将委托设置为 self （从未尝试过，但您说它有效），然后在您想要获取通知的视图控制器中，执行

```
[[NSNotificationCenter defaultCenter] 
         addObserver:self 
         selector:@selector(textFieldDidBeginEditing:) 
         name:@"TextFieldDidNotification" object:nil]; 
```

在子类中：

```
NSDictionary *userInfo = [NSDictionary dictionaryWithObject:self forKey:@"textField"];
[[NSNotificationCenter defaultCenter] postNotificationName:@"TextFieldDidBeginEditingNotification" object:self userInfo:userInfo] 
```

现在您也可以传递字典中的任何其他信息。

# python - 在谷歌应用引擎上运行 Foursquare 连接的应用程序时出错

> ID：13336984
> 
> 赞同：0
> 
> 时间：2012-11-12T00:30:47.097
> 
> 标签：python, google-app-engine, mysql-python

我已经搜索过这个网站，我已经用谷歌搜索过，我已经完成了每个网站告诉我要做的所有事情。即使我已经安装了所有东西，我也会收到以下错误。我已经安装了 PIL 和 Imaging 模块，但它仍然无法正常工作。当我转到应用程序网址时，我仍然收到 500 错误。

```
The rdbms API is not available because the MySQLdb library could not be loaded.
The database file stub is deprecated, and will stop being the default in a future 
release. Append the --use_sqlite flag to use the new SQLite stub.
WARNING data_file_stub py:518 Could not read datastore data from
/var/folders/6t/rl1gd6856w75zkcjy2cxjtfr0000gn/dev_appserver.searchindexes     
WARNING dev_appserver.py:3655 Could not initialize API imagaes; you are likely
missing the Python "PIL" module. Import Error: No module named _imaging 
```

# c# - 从 BaseClass/Link Base 访问多个子级到子级

> ID：13336987
> 
> 赞同：-1
> 
> 时间：2012-11-12T00:31:36.720
> 
> 标签：c#, .net

如何从基类访问孩子？

我的课程设置如下：

```
abstract class Bank
{
    public Bank(int One, int Two)
    {
    }
}

public class Checking : Bank
{
    public Checking(int One, int Two) : base(One, Two)
    {
    }
}

public class Savings : Parent
{
    public Savings(int One, int Two) : base(One, Two)
    {
    }
} 
```

如何在需要时让 Bank 类实例化支票和储蓄？

我想做类似的事情：

```
Bank B = new Savings(....);
B = new Checkings(....);

B.Savings.Foo(......);
B.Checkings.Foo(.....); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T00:38:23.177

创建将同时包含实例`Checkings`和`Savings`.

```
public class BankTuple
{
    public BankTuple(int one, int two)
    {
        Checkings = new Checkings(one, two);
        Savings = new Savings(one, two);
    }

    public Checkings Checkings { get; private set; }

    public Savings Savings { get; private set; }
} 
```

然后使用它：

```
var tuple = new BankTuple(1, 2);
// tuple.Checkings
// tuple.Savings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:38:08.810

在面向对象的编程中，父类*永远不*应该知道子类 AFAIK。将通过链接更新原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T00:34:11.953

变量`B`只能引用内存中的一个对象。如果您需要保存对多个对象的引用，请考虑使用集合：

```
List<B> banks = new List<B>();
banks.Add(new Savings());
banks.Add(new Checkings()); 
```

另外我相信你有一个错字——`Savings`应该继承自`Bank`，而不是继承自一些`Parent`。

# shell - shell 脚本变量替换

> ID：13336991
> 
> 赞同：0
> 
> 时间：2012-11-12T00:31:55.540
> 
> 标签：shell, variables, substitution

我对 shell 脚本中的变量替换感到困惑。这是交易：我有以下脚本。

```
if [ -d ~someone/Desktop ]
then
    echo exist
fi 
```

这将确定用户“某人”在他的主目录下是否有“桌面”目录。但是，如果我用其他变量替换某人，那将是不正确的。见下文，

```
var=someone
if [ -d ~${var}/Desktop ]
then
    echo exist
fi 
```

虽然用户“某人”有桌面目录，但它不会打印在输出中。有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T01:06:41.113

```
var=someone
if [ -d $(eval echo ~${var})/Desktop ]
then
    echo exist
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:57:50.757

`~user`是由 shell 解释的特殊表达式（有关解释，请参见`man bash`-> 波浪号扩展）。在您的情况下，波浪号后面没有用户名，因此会发生正常的变量扩展，`~$var`扩展为文字`~someone`，而不是通常的`/home/of/someone`.

获取用户主目录的最快方法是从以下位置对其进行 grep `/etc/passwd`：

```
grep "^$var:" /etc/passwd | cut -d: -f6 
```

# ruby-on-rails - 对于“发布视图”功能，这两个选项哪个更好？

> ID：13336992
> 
> 赞同：0
> 
> 时间：2012-11-12T00:32:28.623
> 
> 标签：ruby-on-rails, cookies, view

帖子浏览量：初始化为 0，当用户阅读帖子时递增。如果用户阅读相同的帖子，则不应增加。

为了实现后视图功能，我想到了两个选项。

1.  每个帖子都有一个表格，列出了所有阅读过帖子的用户。在 PostController 中，postview 函数会首先尝试在表中找到用户，如果找不到用户，它会增加查看次数。

2.  使用 cookie。每当用户阅读帖子时，我都会给他一个特定于帖子的 cookie。例如，cookie[:postId] = 1。因此 post 控制器中的视图函数可以在增加视图数量之前简单地检查用户是否有特定帖子的 cookie。

我不确定哪个选项会更好。我认为第二个选项如果合适的话会更好，因为您可以在数据库中节省内存。但这个选项在网络流量方面会更糟吗？我不是 100% 确定这两个选项是否都有效，或者在效率方面哪个更好。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T05:51:27.533

使用印象派（或从中获取想法）：[https ://github.com/charlotte-ruby/impressionist](https://github.com/charlotte-ruby/impressionist)

然后，您可以获得对记录的独特印象，如下所示：

```
# only record impression if the request has a unique combination of type, id, and session
impressionist :unique => [:impressionable_type, :impressionable_id, :session_hash] 
```

# android - 在 Android 模拟器上访问 Gmail 内容提供商？

> ID：13336994
> 
> 赞同：0
> 
> 时间：2012-11-12T00:32:56.673
> 
> 标签：android, android-emulator, gmail

按照[Android Gmail API](https://developers.google.com/gmail/android/)说明以及[StackOverflow 答案](https://stackoverflow.com/questions/2992635/how-to-get-the-number-of-unread-gmail-mails-on-android/3037279#3037279)的提示，我尝试`content://com.google.android.gm/example@gmail.com/labels`在模拟器上查询 URI。`com.google.android.gm`即使我使用 Google API 运行 AVD，并且即使我已经进入“电子邮件”应用程序并添加了我的 Gmail 帐户，模拟器也找不到提供程序。

如何在模拟器上获取 Gmail 内容提供程序？我正在使用 API 级别 16。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T00:51:12.693

> 如何在模拟器上获取 Gmail 内容提供程序？

你没有。Gmail 是一个商业应用程序，分布在设备上，而不是模拟器上。不过，欢迎您在装有 Gmail 的设备上测试此应用程序。

# c - 我的字符串被输出为一堆废话

> ID：13336997
> 
> 赞同：-3
> 
> 时间：2012-11-12T00:33:33.803
> 
> 标签：c

```
#include <stdio.h>
#include <string.h>

/* Function prototypes */
void wordLength ( char *word );
void wordConcat ( char *wordC1, char *wordC2);

int main (void)
{

    int choice;
    char word [20];
    char wordC1 [20];
    char wordC2 [20];

    printf( "Choose a function by enterting the corresponding number: \n"
        "1) Determine if words are identical\n"
        "2) Count number of words in sentence provided\n"
        "3) Enter two strings to be strung together\n"
        "4) Quit program\n" );
    scanf( "%d", &choice );
    flushall();

    while (choice >= 1 && choice < 4) 

{

        /* if statements for appropriate user prompt and calls function */
        if (choice == 1) 
        {
            /* gather user input */
        printf( "\nYou have chosen to determine word length.\n"
                "Please enter the word:\t");
            gets( word );

            /* call function to output string as well as the string length */
            wordLength( word );

        }

        else if (choice == 2)
        {
            printf( "\nYou have chosen to concatenate 2 words with a % symbol in between them.\n"
                "Please enter word 1:\t");

            gets( wordC1 );

            printf("Please enter word 2:\t");

            gets( wordC2 );                     

            /* call function to output string as well as the string length */
            wordLength( word );
    }
}
}
void wordLength( char *word )

{
    int length;

    printf( "\nThe string entered is:  %s\n\n", word);

    length = strlen (word);

    printf("The string length is: %d\n", length);

    return;
}

void wordConcat(char *wordC1, char *wordC2)

{
    char symbol = "\ 25";
    char result;
    printf( "\nThe first word entered is:  %s\n", wordC1);
    printf( "\nThe second word entered is:  %s\n", wordC2);

    result = strcat( wordC1, symbol, wordC2);

    printf("Output: %s\n", result);

    return;
} 
```

每当我为程序的 wordConcat 函数输入 2 个单词时，字符串输出都是一堆废话:( 我所有的指针似乎都指向正确的位置。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T00:37:36.103

`choice == 2`代码正在调用`wordLength()`而不是`wordConcat()`，因此`word`未设置它传入的变量。

# javascript - 如何使拼写检查器适用于 CKeditor 所见即所得编辑器

> ID：13336998
> 
> 赞同：5
> 
> 时间：2012-11-12T00:33:35.807
> 
> 标签：javascript, ckeditor, wysiwyg, spell-checking

我在 Firefox 中打开的任何编辑框都带有拼写检查功能，它通常以某种方式由 Firefox 或浏览器集成。我有一个用户 ckeditor 所见即所得编辑器的小 php 脚本。如何使 ckeditor 的编辑区域的拼写检查器处于活动状态？PS。[此外，这里](https://stackoverflow.com/questions/2244510/does-anyone-know-of-a-spell-checker-plugin-for-ckeditor-that-uses-aspell-or-a-si)提供的解决方案的更新版本也将受到赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T17:45:02.440

`config.disableNativeSpellChecker = false;`

更多信息：http: [//docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.disableNativeSpellChecker](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.disableNativeSpellChecker)

它打开浏览器的本机拼写检查器。现在您可能还想拥有本地上下文菜单，例如，用户可以在其中选择字典建议的单词的正确版本。默认情况下，如果您按 ctrl+右键单击，则可以打开本机上下文菜单。这并不明显，解决此问题的唯一方法是删除 contextmenu 插件：

`config.removePlugins = 'contextmenu';`

现在您将拥有本机拼写检查器和本机上下文菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T19:40:48.097

config.disableNativeSpellChecker = false