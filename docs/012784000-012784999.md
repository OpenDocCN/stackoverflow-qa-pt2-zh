# StackOverflow 问答 12784000-12784999

# python - 硒火狐下载

> ID：12784000
> 
> 赞同：0
> 
> 时间：2012-10-08T14:40:33.593
> 
> 标签：python, firefox, selenium

我正在使用 python selenium 并想下载一个 pdf 文件，但是它在我的浏览器中打开？如何从我的浏览器下载它？任何方式点击下图， ![在此处输入图像描述](../Images/a4056e8745cb2100a156ef326a9e944b.png)

以前，我所要做的就是禁用 firefox 下载框对话框，但现在我无法请求下载。有任何想法吗？我应该怎么做才能请求下载？我也无法在服务器上找到该文件。

```
profile.set_preference('browser.helperApps.neverAsk.saveToDisk', "application/vnd.csv") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:01:35.257

使用[AppLoader](http://nrgglobal.com/apploader)，您可以像真实用户一样单击任何按钮、图标或快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T14:55:56.663

添加

profile.set_preference("pdfjs.disabled",True)

这将禁用Firefox中的默认pdf查看器。

此外，您的“保存到磁盘”首选项似乎不正确。它应该是 profile.set_preference("browser.helperApps.neverAsk.saveToDisk","application/pdf")

最后要记住的是，如果你有多种文件类型要下载，你需要把它们都放在同一个 set_preference saveToDisk 语句下，逗号分隔，否则后面的语句会覆盖前面的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:21:46.693

没有办法以您描述的方式使用硒。但是你可以调整你的浏览器，所以它不会打开 pdf，而是下载它们——这可以用 selenium 来完成。 [这是](https://selenium-python.readthedocs.org/en/latest/faq.html?highlight=profile)（如何使用自定义 Firefox 配置文件自动保存文件）一个很好的示例。

# css - Chrome 开发者工具样式选项卡显示褪色的 CSS 定义，为什么？

> ID：12784001
> 
> 赞同：47
> 
> 时间：2012-10-08T14:40:35.800
> 
> 标签：css, google-chrome, styles

我已经使用 Chrome 很长时间了，而且我从来没有（我不记得）在样式面板中遇到过褪色的 CSS 定义。选择器尚未在其他地方定义。

例子：

[![在此处输入图像描述](../Images/7c2393933ad4add4b9322cc87dabb196.png)](https://i.stack.imgur.com/2Ktef.png)

（编辑：为了清楚起见，我不是指用户代理样式表）

我无法弄清楚它为什么会褪色以及这意味着什么。该定义似乎是可编辑的，但对值的任何更改都不会持续存在（即，一旦我单击关闭，它就会恢复为原始值）并且对网页没有影响。

我在该工具的[文档](https://developers.google.com/chrome-developer-tools/docs/elements-styles#styles_view)中找不到对此的任何引用。你们中的任何一个好心人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T15:06:13.493

“褪色”样式是不应用于所选标签的样式。因此，在您的屏幕截图中，您有一个`h1`正常颜色的规则——该规则应用于您选择的任何元素——并且您有一个*未*应用于所选元素的`.SubHeader h1`规则。

 *如果您动态添加 CSS 规则（chrome 开发工具中的 + 按钮）但修改选择器使其不适用于您选择的任何元素，您有时会看到这一点。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-06-05T09:06:32.937

褪色的规则不会应用于元素。

[看看这个例子](http://jsbin.com/tuxehupasu/edit?html,css,output)

```
<!-- HTML -->
<div>
  <span>Test</span>
</div>

/* CSS */
div {
  color: #F0F;
  margin: 15px;
  stroke: #FFF;
  float: left;
} 
```

如果你打开开发工具，你会注意到`margin`和`float`是褪色的，`color`而`stroke`不是。这是因为`span`元素从其父元素继承了样式规则，但只有`color`和`stroke` [规则是可继承的](https://stackoverflow.com/questions/5612302/which-css-properties-are-inherited)。

![开发工具](../Images/4dff7a1670628c396d5c505e813e48c5.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-15T18:20:31.053

这意味着该规则已被继承：

[http://code.google.com/chrome/devtools/docs/elements-styles.html#computed_style](http://code.google.com/chrome/devtools/docs/elements-styles.html#computed_style)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-08T14:41:42.827

这些是浏览器自动应用的样式表。

您可以通过描述看到这一点：`user agent stylesheets`.

您可以通过选中在右下角的设置中禁用此功能`Show user agent styles`。现在样式将不会显示在您的 CSS 面板中（但仍在应用中！）

编辑：

我误读了您的问题，开发文档对暗淡规则说了以下内容：

> 注意：如果您编辑选择器使其与所选元素不匹配，则该规则将变暗，并且显然不会应用于该元素。您应该很少需要这样做。

您的屏幕截图看起来可能是这种情况。*

# javascript - 当我按下回车键时触发了两个事件

> ID：12784005
> 
> 赞同：0
> 
> 时间：2012-10-08T14:40:47.413
> 
> 标签：javascript, html

在我的代码中，我在标题部分有以下 javascript 代码块

```
 function validateForm(bid) {
        switch (bid) {
        case "submitIDSearch":
            alert("submitIDSearch");
            return false;
        case "submitNameSearch":
            alert("submitNameSearch");
            return false;
        }
    }
    function fKeyDown(e) {
        var  kc = window.event ? window.event.keyCode : e.which;
        if (kc == 13) {
            document.getElementById('submitNameSearch').click();
        }
    } 
```

然后我有以下 HTML 代码块

```
 <form name="checkAbsenceForm" method="post" action="absenceReport.htm" onsubmit="return validateForm(this.submited)">
        <label class="q">ID * <input id="searchRUID" name="searchID" maxlength="9" /></label>
        <input id="submitIDSearch" type="submit" value="Search ID" onclick="this.form.submited = this.id;" />
        <hr />
        <label class="q">First Name <input id="searchFirstName" name="searchFirstName" maxlength="23" onKeyDown="javascript:fKeyDown(event);"/></label>
        <br />
        <label class="q">Last Name * <input id="searchLastName" name="searchLastName" maxlength="23" onKeyDown="javascript:fKeyDown(event);" /></label>
        <input id="submitNameSearch" type="submit" value="Search Name" onclick="this.form.submited = this.id;" />
    </form> 
```

发生的事情是，当我`Enter`在`searchLastName`输入文本框中按下键时，两个警报消息框都会弹出。一个显示`submitNameSearch`，另一个显示`submitIDSearch`。`submitNameSearch`是所需的事件，但`submitIDSearch`不是，我认为默认情况下它会以某种方式触发。

请问当我在searchLastName输入文本框中按键时，是否有办法摆脱`submitIDSearch`事件？`Enter`

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:43:28.317

当您`Enter`在表单中按下时，表单将被提交。这就是第二次调用的原因`validateForm`。

两种解决方案：

**1)** 删除`onKeyDown="javascript:fKeyDown(event);"`以在`onsubmit=...`应用上定义正常验证。

**2)** 在`fKeyDown`中，添加`e.preventDefault();`防止按键事件的默认处理：

```
function fKeyDown(e) {
    var  kc = window.event ? window.event.keyCode : e.which;
    if (kc == 13) {
        document.getElementById('submitNameSearch').click();
        e.preventDefault();
    }
} 
```

但是，如果您真的在 中这样做`fKeyDown`，则解决方案 1 就足够了。

# ruby-on-rails - Rails 资产管道：当我们在 application.js 中需要时会发生什么

> ID：12784015
> 
> 赞同：0
> 
> 时间：2012-10-08T14:41:16.510
> 
> 标签：ruby-on-rails, ruby, gem

我正在尝试为开源项目 jquery-datatables-rails 做出贡献。但这让我感到困惑，因为它是如何工作的。我对如何创建 gem 有基本的了解。似乎该项目只是简化了路径引用，仅此而已。列出的四个安装步骤是

```
Add to the assets group in your Gemfile:

gem 'jquery-datatables-rails'

Install the gem:

bundle install

Add the JavaScript to application.js:

//= require dataTables/jquery.dataTables

Add the stylesheets to application.css:

*= require dataTables/jquery.dataTables 
```

但我不明白 Rails 如何知道在哪里可以找到 dataTables 文件夹以及为什么我们使用 jquery.dataTables 来引用文件/类。代码很容易理解，但是文件组织让我很困惑。有没有关于与我的困惑有关的主题的文章？谢谢。

**更新：** 刚刚在 Rails 引擎上找到了这个很棒的文档：http: [//edgeguides.rubyonrails.org/engines.html](http://edgeguides.rubyonrails.org/engines.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:41:33.543

默认情况下，Rails 资产管道会搜索Rails 应用程序的 、 和 中的`app/assets/`文件`lib/assets`。`vendor/assets`但是这个 gem 是一个 Rails 引擎，它将自己的资产路径添加到默认资产路径中。它有自己的[供应商/资产](https://github.com/rweng/jquery-datatables-rails/tree/master/vendor/assets)。

# php - Jquery 通过 .load 传递数据

> ID：12784019
> 
> 赞同：1
> 
> 时间：2012-10-08T14:41:35.333
> 
> 标签：php, jquery, forms, load

我不知道为什么我不能让我的输出浮出水面。它不应该太难，但已经卡了几个小时。所有我

```
<script>
$(document).ready(function(){
    $('#chat_submit').click(function(){
        var data="{'chat_content:'+$('#chat_content').val()+'chat_from_who:'+$('#chat_from_who').val()+'chat_to_who:'+$('#chat_from_who').val()+'order_no:'+$('#order_no').val()}";
        $('#order_chatbox').load('/seller/helpers/order_chat.php',data);
    });
});
</script> 
```

这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:43:50.653

您将数据作为长字符串发送..而不是作为对象。

将其更改为

```
var data= {'chat_content': $('#chat_content').val(),
    'chat_from_who': $('#chat_from_who').val(),
    'chat_to_who': $('#chat_from_who').val(),
    'order_no': $('#order_no').val()}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:44:13.583

尝试以下操作：

```
$(document).ready(function() {
    $('#chat_submit').click(function(event) {
        // event.preventDefault();
        var data = {
            chat_content: $('#chat_content').val(),
            chat_from_who: $('#chat_from_who').val(),
            chat_to_who: $('#chat_from_who').val(),
            order_no: $('#order_no').val()
        };
        $('#order_chatbox').load('/seller/helpers/order_chat.php', data);
    });
});​ 
```

# vb.net - 接口的行为不像一个对象？

> ID：12784021
> 
> 赞同：0
> 
> 时间：2012-10-08T14:41:36.870
> 
> 标签：vb.net, object

我的界面有点问题。我的一堆类实现了`ILayoutObject`接口。一个方法将一个变量声明为`ILayoutObject`（默认为 Nothing），然后运行一些代码来决定它应该是哪个对象。问题是，评估代码在一个方法中运行，该方法接收变量作为参数并为其分配一个对象。对于对象，这将没有问题。对象会受到方法更改的影响，一切都会好起来的。然而，当使用一个接口时，调用代码中的变量仍然存在`Nothing`并且表现得像一个普通变量。有没有人对如何规避这一点有任何想法？唉，由于代码结构，我无法使用`ByRef`或功能:(

这是一些代码：

```
Protected LayoutHandler As Dictionary(Of String, Action(Of Constants.OptionsEntryStructure, ILayoutElements)) = New Dictionary(Of String, Action(Of Constants.OptionsEntryStructure, ILayoutElements)) From
    {
    {Constants.KeyLayoutType, AddressOf KeyLayoutType}
    }

Sub MakeLayOuts
    Dim LayoutElement As ILayoutElements = Nothing 
    Dim Value = "SomeValues"
    Dim key = "Key"
    LayoutHandler(key)(Value, LayoutElement)
    ' LayoutElement remains nothing.....
End Sub

Protected Sub KeyLayoutType(elem As Constants.OptionsEntryStructure, Layout As ILayoutElements)
    Layout = New LayoutObject 'which would implement the interface
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:46:56.300

您需要像`ByRef`要更改调用代码中的变量指向的对象一样声明参数：

```
Protected Sub KeyLayoutType(elem As Constants.OptionsEntryStructure, ByRef Layout As ILayoutElements)
    Layout = New LayoutObject 'which would implement the interface
End Sub 
```

对于任何引用类型（类）都是如此。它们被接口引用的事实没有区别。

如果您不能使用`ByRef`，并且您不能使用函数来返回新对象，那么您唯一的其他真正选择是请求具有布局对象作为属性的对象类型。例如：

```
Public Interface ILayoutElementContainer
    Public Property LayoutElement As ILayoutElements
End Interface

Protected Sub KeyLayoutType(elem As Constants.OptionsEntryStructure, Container As ILayoutElementContainer)
    Container.LayoutElement = New LayoutObject 'which would implement the interface
End Sub 
```

# c# - 无法在 AdvancedBandedGridView 上设置字体样式

> ID：12784022
> 
> 赞同：0
> 
> 时间：2012-10-08T14:41:37.400
> 
> 标签：c#, devexpress, xtragrid

是否可以设置字体属性；DevExpress 视图中的身高、家庭和风格？我使用以下代码来设置指定的属性：

```
advBandedGridView1.Appearance.BandPanel.Font.Bold = FontStyle.Bold;
advBandedGridView1.Appearance.BandPanel.Font.Height = 12; 
```

但我收到以下错误：“不能将属性或索引器‘System.Drawing.Font.Height’分配给——它是只读的”

是否有我应该注意的解决方法？我在运行时在代码中构建并填充我的视图。因此，沿着这些思路的解决方案是可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:45:57.100

`BandPanel`是只读属性。此属性可以被各个波段覆盖。将此`band's GridBand.AppearanceHeader`属性用于此目的。

有关更多详细信息，您可能需要检查以下内容：[http ://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBandedGridBandedViewAppearances_BandPaneltopic](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsBandedGridBandedViewAppearances_BandPaneltopic)

# android - 只有一个线程实例在服务中

> ID：12784024
> 
> 赞同：1
> 
> 时间：2012-10-08T14:41:43.537
> 
> 标签：android

我在服务中初始化了新线程，但是当我开始服务时，新的线程被创建并且它使我的应用程序崩溃，因为我在其中使用了相机。如何使它成为该线程的唯一一个实例？

线程何时关闭？如果我关闭我制作的服务，它也会被关闭吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:46:57.780

您可以使用锁或静态变量：

```
private static boolean isThreadRunning; 
```

然后为您服务：

```
if(isThreadRunning)
   return;

Thread t=new Thread(new Runnable(){

protected void run(){
   isThreadRunning=true;
   while(yourcondition){
     //your thread code...
   }
   isThreadRunning=false;
   //if you want to start another thread after this one is ended, you should post a message to a handler here and it should start another thread like this
}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T10:26:40.837

您也可以使用`Handler`类来实现这一点，这是谷歌在线程操作中推荐的。下面的代码显示了如何在`Service`.

```
public class MyService extends Service{

    private final Handler handler = new Handler();

    private final static int RUNABLE_WHAT=6558057;
    private final static int PEROID=6*1000;
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if(!handler.hasMessages(RUNABLE_WHAT))
        {
            handler.sendMessageDelayed(new Worker().extractMessage(), PEROID);
        }
        return START_STICKY;
    }

    private class Worker implements Runnable{

        @Override
        public void run() {
            //DO WORK HERE
            handler.sendMessageDelayed(new Worker().extractMessage(), PEROID);
        }
        private Message extractMessage()
        {
            Message message = Message.obtain(handler, this);
            message.what=RUNABLE_WHAT;
            return message;
        }
    }

} 
```

# python - pip、pythontools 或 easy-install 的最佳选择是什么

> ID：12784026
> 
> 赞同：2
> 
> 时间：2012-10-08T14:41:51.760
> 
> 标签：python, pip, easy-install

我正在寻找保持 Python 升级和安装新软件包的最佳选择。我知道以前有过这样的讨论：[Why use pip over easy_install?](https://stackoverflow.com/questions/3220404/why-use-pip-over-easy-install) 但他们往往很老。

问题是：我家里有 ubuntu 12.04，工作中有 Windows 7，希望将它们都保持在相同的（最新）版本级别。

在 ubuntu 中，我发现存储库通常包含旧版本，因此我使用不同的程序来安装新软件包。我还发现 pip 安装了新版本，但没有检查其他选项。在 Windows 中，我尝试从提供的 .exe 文件进行安装，这有时很困难，并且要让 ipython 正常工作，我必须安装 pythontools。在互联网上，我看到了很多关于这个主题的意见，并提倡使用不同的工具。

有没有办法让不同的计算机（ubuntu/windows）升级到同一级别，最好的选择是什么。

我正在寻找一个建设性的意见，比如：如果你使用......那么你不必手动添加路径，但你需要清理下载的文件，或者这个......将在 linux 上完美运行，但原因......不在窗户上。

我想在 ubuntu 12.04 和 Windows 7 中使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:36:49.507

我不确定Windows。我认为人们喜欢 pip，因为它比 easy_install 更好地执行依赖关系。但我对此知之甚少，不能多说。使用 virtualenv 是一个不错的选择，因为它可以保留您的项目版本。您还可以通过 pip freeze > requirements.txt 获取您在虚拟环境中安装的软件包列表。然后可以使用此文件在另一个 virtualenv 中下载这些版本。virtualenv 安装自己的本地 pip

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:10:56.013

如果有人在 Windows 下安装基本包有问题[http://viziblr.com/news/2012/4/21/step-by-step-installing-pandas-on-windows-7-from-pypi-with-e .html](http://viziblr.com/news/2012/4/21/step-by-step-installing-pandas-on-windows-7-from-pypi-with-e.html)提供了很好的帮助。它在 Windows 中运行良好，尽管它不能解决问题。

# python - 来自 Python 可执行文件的 NTEventLogHandler

> ID：12784033
> 
> 赞同：4
> 
> 时间：2012-10-08T14:42:03.053
> 
> 标签：python, logging, pywin32, pyinstaller

```
import logging, logging.handlers

def main():
    ntl = logging.handlers.NTEventLogHandler("Python Logging Test")
    logger = logging.getLogger("")
    logger.setLevel(logging.DEBUG)
    logger.addHandler(ntl)
    logger.error("This is a '%s' message", "Error")

if __name__ == "__main__":
    main() 
```

上面的 Python (2.7.x) 脚本将“这是一条‘错误’消息”写入 Windows 事件查看器。当我将它作为脚本运行时，我得到了预期的输出。如果我通过 PyInstaller 将脚本转换为可执行文件，我会在事件日志中看到一个条目，但它显示的内容完全不同。

> 找不到 Source ( Python Logging Test ) 中事件 ID ( 1 ) 的描述。本地计算机可能没有必要的注册表信息或消息 DLL 文件来显示来自远程计算机的消息。您可以使用 /AUXSOURCE= 标志来检索此描述；有关详细信息，请参阅帮助和支持。以下信息是事件的一部分：这是一条“错误”消息。

这是我用来将脚本转换为可执行文件`pyinstaller.py --onefile --noconsole my_script.py`的命令：尽管命令行参数似乎对此行为没有任何影响，只需调用`pyinstaller.py my_script.py`.

在了解正在发生的事情以及如何解决此问题方面，我将不胜感激。

**最终解决方案**

我不想走资源黑客路线，因为这将是自动化的困难步骤。相反，我采用的方法是`win32service.pyd`从 c:\Python27\Lib\site-packages\win32 获取文件并将其放在我的可执行文件旁边。然后修改脚本，将完整路径传递给`win32service.pyd`文件副本，这在脚本和 exe 形式中都有效。最终脚本如下：

```
import logging, logging.handlers
import os
import sys

def main():
    base_dir = os.path.dirname(sys.argv[0])
    dllname = os.path.join(base_dir, "win32service.pyd")

    ntl = logging.handlers.NTEventLogHandler("Python Logging Test", dllname=dllname)
    logger = logging.getLogger("")
    logger.setLevel(logging.DEBUG)
    logger.addHandler(ntl)
    logger.error("This is a '%s' message", "Error")

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:05:54.837

通常，Windows 事件日志不会以纯文本形式存储错误消息，而是以消息 ID 引用和插入字符串的形式存储。

它不存储类似的消息`Service foo crashed unexpectedly`，而是存储指向存储在 DLL 中的资源字符串的消息 ID。在这种情况下，资源将类似于`Service %s crashed unexpectedly`并将`foo`存储为插入字符串。写消息的程序注册资源DLL。

原因是本地化。DLL 可以存储许多不同的资源（对话框布局、字符串、图标……），一个 DLL 可以包含许多不同语言的相同资源。操作系统会根据系统区域设置自动选择正确的资源。几乎所有 Microsoft 实用程序和核心实用程序都使用资源 DLL。

[旁注：如今，本地化的首选（和跨平台）方式是`gettext`.]

这也用于消息日志 - 理想情况下，您可以在英语版本上打开来自德语 Windows 安装的日志，其中所有消息均为英语。

我怀疑 pywin32 实现通过只有一个消息 ID (1) 来跳过该机制，就像`"%s"`. 它存储在`win32service.pyd`pywin32中并由其注册。只要此文件存在于文件系统上，它就可以正常工作，但一旦它隐藏在 PyInstaller 可执行文件中就会中断。我想您必须将消息 ID 直接嵌入到您的可执行文件中。

**编辑：**怀疑确认，消息表确实存储在里面`win32service.pyd`

[显示消息表的资源黑客 http://media.leoluk.de/evlog_rh.png](http://media.leoluk.de/evlog_rh.png)

尝试将消息表资源复制`win32service.pyd`到您的 PyInstaller 可执行文件（例如使用[Resource Hacker](http://media.leoluk.de/evlog_rh.png)）。

查看日志处理程序实现，这可能有效：

```
def __init__(self, appname, dllname=None, logtype="Application"):
    logging.Handler.__init__(self)
    try:
        import win32evtlogutil, win32evtlog
        self.appname = appname
        self._welu = win32evtlogutil
        if not dllname:
            dllname = os.path.split(self._welu.__file__)
            dllname = os.path.split(dllname[0])
            dllname = os.path.join(dllname[0], r'win32service.pyd') 
```

你必须设置`dllname`为`os.path.dirname(__file__)`. 如果您希望它继续为解冻脚本工作，请使用类似的内容：

```
if getattr(sys, 'frozen', False):
    dllname = None
elif __file__:
    dllname = os.path.dirname(__file__)

ntl = logging.handlers.NTEventLogHandler("Python Logging Test", dllname=dllname) 
```

# php - 微时间到标准日期格式

> ID：12784039
> 
> 赞同：5
> 
> 时间：2012-10-08T14:42:33.687
> 
> 标签：php, date, milliseconds, microtime

我有一些自纪元以来的毫秒值，即`microtime(true)`在我的 MySQL 数据库中，这些值作为字符串输出，我需要将它们转换为标准的 PHP date()

```
$updated = 1349697975.9381;
$nUpdated = date($updated, "l jS F \@\ g:i a"); 
```

这是返回一个空白字符串，有人帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T14:43:46.400

它应该是 `date ( string $format [, int $timestamp = time() ] )`

你位置不对

```
 $nUpdated = date("l jS F \@ g:i a",$updated); 
```

输出

```
Monday 8th October @ 2:06 pm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:44:18.527

您有[`date()`](http://php.net/date)向后的参数（时间戳是第二个参数）。

尝试更新为：

```
$nUpdated = date("l jS F \@ g:i a", $updated); 
```

# windows - 在 Windows 上运行 grunt.cmd 的多个问题

> ID：12784042
> 
> 赞同：7
> 
> 时间：2012-10-08T14:42:39.070
> 
> 标签：windows, node.js, gruntjs

我不得不修改 grunt.cmd 因为我的系统路径非常错误：

起初：

`%~dp0\Application Data\npm\node_modules\grunt`

哪个会打印：

`\\dacwnas\Profiles\<user>\Application Data\npm\Application Data\npm\node_modules\grunt`

运行 grunt.cmd 会抛出找不到模块错误。将其更改为`%~dp0\node_modules\grunt"`删除错误。

但是，`grunt.cmd --version`在 Windows 中运行什么也没输出。它只是暂停片刻，然后返回到空白命令行。

我正在运行 Windows 7 64 位，命令行以管理员身份运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T00:17:42.800

首先，您应该`grunt-cli`全局安装该软件包：

```
npm install -g grunt-cli 
```

接下来，确保您已`grunt`安装在项目文件夹中。

您可以通过以下方式做到这一点：

*   确保`grunt`是您的一部分`package.json`并运行：`npm install`
*   转到您的项目文件夹，然后`npm install grunt`

在此之后，运行 Grunt 应该不会有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T12:24:35.727

你安装了 grunt-cli 吗？

我的 grunt.cmd 内容如下所示：

```
:: Created by npm, please don't edit manually.
@IF EXIST "%~dp0\node.exe" (
  "%~dp0\node.exe"  "%~dp0\node_modules\grunt-cli\bin\grunt" %*
) ELSE (
   node  "%~dp0\node_modules\grunt-cli\bin\grunt" %*
) 
```

# mysql - 从非常大的 SQL 表中选择记录子集

> ID：12784043
> 
> 赞同：1
> 
> 时间：2012-10-08T14:42:51.743
> 
> 标签：mysql, sql, database-performance

有两个表，即`LongTable`和`ShortTable`。例如，`LongTable`看起来像：

```
personA | personB
1 | 2
1 | 3
2 | 4
2 | 5
3 | 4
3 | 5
3 | 6
4 | 5
4 | 6 
```

并`ShortTable`具有以下内容：

```
PersonA
1
2 
```

我想知道如何`LongTable`根据`ShortTable`. 因此，这种特殊情况的结果应该是：

```
personA | personB
1 | 2
1 | 3
2 | 4
2 | 5 
```

我从以下查询开始（但失败：“无法重新打开表：'ShortTable'”）：

```
SELECT * FROM LongTable
  WHERE
    personA IN (SELECT * FROM ShortTable)
    AND
    personB IN (SELECT * FROM ShortTable) 
```

下面给出了重现临时表的代码。

提前感谢任何指针。

```
CREATE TABLE LongTable (
  personA INT,
  personB INT
);

INSERT INTO LongTable VALUES
(1,2),(1,3),(2,4),
(2,5),(3,4),(3,5),
(3,6),(4,5),(4,6);

CREATE TABLE ShortTable (
  personA INT
);

INSERT INTO ShortTable VALUES
(1),(2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:44:39.847

试试这个

```
 SELECT DISTINCT l.personA, l.personB
 FROM longTable l 
 INNER JOIN ShortTable s ON l.personA  = s.personA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:51:43.620

你可以使用这个：

```
SELECT * FROM LongTable
WHERE personA IN (SELECT * FROM ShortTable) 
```

请注意，运行时间通常取决于表结构（例如索引），而不是查询

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:52:10.847

在 MySQL 中执行此操作的最快方法是在 longTable.personA 上创建索引。然后执行以下查询：

```
select l.personA, l.personB
from longTable l
where exists (select 1 from shortTable s where s.PersonA = l.PersonA limit 1) 
```

# android - 如何将蓝牙数据发送到未知设备？

> ID：12784044
> 
> 赞同：0
> 
> 时间：2012-10-08T14:42:57.803
> 
> 标签：android, testing, bluetooth, hardware

我问是因为我已经面临这个问题好几个星期了。

我需要开发一个能够执行蓝牙连接并将数据发送到蓝牙硬件的 Android 应用程序。

好的，重点是：

是否可以执行与“未知”设备的 RFCOMM 连接？我的意思是，是否可以在没有任何有关硬件代码的信息的情况下执行此操作？

因为我只能修改 AndroidDevice（手机）代码，用于**发送**目的。

我想发送一个字节并确保它已被接收，但只有一个发送代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:55:29.467

我们可以提供更多细节吗？您是否可以访问其他设备，例如其他设备是否可以知道有关 Android 设备的信息？“发送代码”是什么意思？

Android 设备可以拾取其范围内的任何活动蓝牙设备，并知道这些设备的名称和地址。因此，如果 Android 设备对它要连接的蓝牙设备一无所知，您始终可以对范围内的设备列表进行排序，并从中获取其硬件代码。

请参阅有关蓝牙的文档，特别是查找设备部分：http: [//developer.android.com/guide/topics/connectivity/bluetooth.html](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

我已经在 Android 设备和 Arduinos 上完成了大量的蓝牙工作，使用蓝牙库可能有点麻烦，但它很强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:18:39.147

使用蓝牙，这两个设备都有一个 UUID。如果您编写一个在两个设备上运行的程序，您可以让它们监听该 UUID。当它们作为客户端或服务器连接时，您将拥有一个 dataInputStream 和一个 dataOutputStream。然后，您可以从中推送和拉取字节。

# asp.net - 相同的应用程序和目录但不同的 web.config 文件？

> ID：12784046
> 
> 赞同：0
> 
> 时间：2012-10-08T14:43:08.397
> 
> 标签：asp.net, iis

我怀疑这是可能的，但我们的一个 Web 应用程序被客户使用，他们拥有一个实时/测试数据库。目前更新必须转到这两个文件夹，因为两者都有一个目录设置，并且 web.config 文件指向实时或测试。

有什么方法可以让我只使用一个目录，但 IIS 中的 2 个 Web 应用程序每个都使用不同的 web.config 文件或类似的东西，所以只需要更新 1 个地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:50:07.617

你可以，但你必须以稍微不同的方式维护事物。您没有告诉我们的是：您使用配置值分隔的唯一地方是`connectionStrings`和`appSettings`？还是有其他区别？

然后你真的需要从一个单独的配置文件中加载这些值，而不是由现有的配置文件引用，也不是使用`System.Configuration.ConfigurationManager`或其任何命名空间/实用程序加载。下一步是使用传入的 URL 来分离设置类使用的数据，以了解要加载两个数据点中的哪一个。

否则，如果您要以这种方式编写应用程序，这是完全有效的（只是有点违背我们在世界其他地方的习惯）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:55:22.670

根据您的数据库连接系统，您可以为它提供基于用户设置而不是基于 web.config 的连接字符串？必须有某种方法来决定用户想要使用哪个数据库，这可以是简单的按钮或下拉列表来选择，或者让系统保留两个文件夹但使用 URL 路由使它们都指向同一个文件。然后，当您实例化数据库连接时，您可以提供正确的连接字符串并设置好。

**编辑**：聊天后，解决方案是将两个连接字符串放入`web.config`，一个用于测试数据库，一个用于生产。然后添加路由，假装这两个文件夹还在，基本思路如下：

```
routes.Add(new Route("{folder}/{page}", new PageRouteHandler("~/{page}"))); 
```

`folder`最后一个函数根据路由值中的值决定使用哪个连接字符串： `Request.RequestContext.RouteData.Values["folder"]`，以及使用此动态连接字符串而不是硬编码的全局重构。

* * *

对于拥有“多个”web.configs，您可以创建一个特定于文件路径的配置部分，请参阅[http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7%28v=vs.71%29.aspx)但是我不确定这是否适用于连接字符串。

例子：

```
<configuration>
   <location path="Logon.aspx">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

# vba - 有没有办法在 Excel 上查看 Application.OnTime 的预定程序？

> ID：12784049
> 
> 赞同：3
> 
> 时间：2012-10-08T14:43:21.300
> 
> 标签：vba, excel

我正在 Excel 中设计一个类似仪表板的工作簿，并且我创建了一个例程来不时使用 `Application.OnTime`Excel VBA 中的方法自动显示一些图表，但是我在调​​试我的例程时遇到了一些问题。

有三个预定例程：第一个为图表拍摄数据快照，第二个开始图表的展示，第三个，由第二个开始，循环浏览图表，显示它们一小段时间

我的主要问题是跟踪例程的最后一次执行，因为他们每个人都安排自己`Application.OnTime`

所以我有两个问题：

一：有没有办法从`Application.OnTime`Excel 中查看预定的例程？

二：有没有更好的方法来使用 VBA 来安排重复的例程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:44:21.943

我不知道如何得到预定的内容。当我调试一个使用 OnTime 的程序时，我制作了自己的日志，这样我就可以看到安排了什么以及什么时候安排的。

```
Public Function WriteLog(bSchedule As Boolean) As Boolean

    Dim sFile As String, lFile As Long
    Dim sOutput As String
    Dim bReturn As Boolean

    Const sSOURCE As String = "WriteLog()"

    On Error GoTo ErrorHandler
    bReturn = True

    sFile = Environ("USERPROFILE") & gsLOGPATH & gsTIMERLOG
    lFile = FreeFile

    sOutput = bSchedule
    sOutput = sOutput & "," & gdtNextRun
    sOutput = sOutput & "," & gsSCHEDMACRO
    sOutput = sOutput & "," & Format(Now, "mm/dd/yyyy hh:mm:ss")

    Open sFile For Append As lFile

    Print #lFile, sOutput

    Close lFile

ErrorExit:
    On Error Resume Next
    WriteLog = bReturn
    Exit Function

ErrorHandler:
    bReturn = False
    If bCentralErrorHandler(msMODULE, sSOURCE) Then
        Stop
        Resume
    Else
        Resume ErrorExit
    End If

End Function 
```

这使用了错误处理系统，因此您必须为自己修复它或删除错误处理的东西。

*   gdtNextRun 是下一次计划运行的全局日期变量
*   gsSCHEDMACRO 是一个全局字符串常量，宏将为其运行
*   bSchedule 记录我正在安排还是不安排。

如果您有多个 OnTimes，则需要一个数组或集合来跟踪。我的只是一个计划运行或不运行的宏，所以我的全局变量/常量成功了。

# scala - Scala - 如何在没有模式匹配的情况下对元组列表进行分组？

> ID：12784054
> 
> 赞同：3
> 
> 时间：2012-10-08T14:43:31.727
> 
> 标签：scala, group-by, tuples

考虑以下结构（实际上结构有点复杂）：

```
case class A(id:String,name:String) {
   override def equals(obj: Any):Boolean = {
      if (obj == null || !obj.isInstanceOf[A]) return false
      val a = obj.asInstanceOf[A]
      name == a.name
   }

   override def hashCode() = {
      31 + name.hashCode
   }
}

val a1 = A("1","a")
val a2 = A("2","a")
val a3 = A("3","b")
val list = List((a1,a2),(a1,a3),(a2,a3)) 
```

现在假设我想将所有具有相等 A 的元组分组。我可以这样实现

```
list.groupBy {
  case (x,y) => (x,y)
} 
```

但是，我不喜欢在这里使用模式匹配，因为它没有在这里添加任何东西。我想要一些简单的东西，像这样：

```
list.groupBy(_) 
```

不幸的是，这不能编译。即使我这样做：

```
list.groupBy[(A,A)](_) 
```

有什么建议可以简化我的代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T15:37:09.283

> ```
> list.groupBy { case (x,y) => (x,y) } 
> ```

在这里，您将元组解构为它的两个组成部分，只是为了立即像以前一样重新组合它们。换句话说：你实际上并没有做任何有用的事情。输入和输出是相同的。这与

```
list.groupBy { t => t } 
```

这当然只是标识函数，Scala 为我们提供了帮助：

```
list groupBy identity 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:50:19.190

如果要根据自己的`equals`方法对列表的元素进行分组，只需将标识函数传递给 groupBy：

```
list.groupBy(x=>x) 
```

`list.groupBy(_)`由于 的范围，写是不够的`_`，那就是它会被取消`x => list.groupBy(x)`，这当然不是你想要的。

# symfony - 如何在奏鸣曲管理包中使用 tinyMCE

> ID：12784057
> 
> 赞同：1
> 
> 时间：2012-10-08T14:43:58.420
> 
> 标签：symfony, tinymce, sonata-admin

我希望我的所有实体属性类型“文本”以在表单中显示一个 html 编辑器（最好是 tinyMCE）来创建和编辑。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:49:12.663

我不确定文本输入是否是使用 TinyMCE 在 textarea 元素上表示文本编辑器的最佳方式（并且可能）。这是你如何做到的：

```
->add('myText', 'textarea', array('attr' => array('class' => 'tinymce', 'tinymce'=>'{"theme":"simple"}'))); 
```

*您可以稍后通过使用其模板*选项为此字段添加自定义模板来包含 TinyMCE 依赖项（尽管建议将它们添加到`<head>`页面中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T05:01:26.780

您好，首先在您的项目中安装 tinycme 编辑器包，请在此之后查看 [此页面](https://github.com/stfalcon/TinymceBundle) ，以便在奏鸣曲管理员中使用请参阅[此问题](https://github.com/stfalcon/TinymceBundle/issues/68)

# extjs - 在 extjs 中添加复选框是和否

> ID：12784065
> 
> 赞同：-2
> 
> 时间：2012-10-08T14:44:34.387
> 
> 标签：extjs

我有 extjs 表单，我需要在彼此旁边添加 2 个复选框。我的字段标签将是“允许”，复选框标题是“是”和“否”

我的代码：

```
{
            fieldLabel: 'Allow',

        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:38:51.060

用这个：

```
{
    fieldLabel: 'allow',
    xtype:'toolbar',
    items:[{
        xtype:'checkbox',
        fieldLabel: 'CB1',
        name: 'CB1'
    },
    {
        xtype:'checkbox',
        fieldLabel: 'CB1',
        name: 'CB1'
    }]
} 
```

# linux - 将文本文件中的文件名的一部分与目录中的文件名进行比较（grep + awk）

> ID：12784070
> 
> 赞同：0
> 
> 时间：2012-10-08T14:44:49.560
> 
> 标签：linux, shell, awk, grep, compare

这并不是在标题中最容易解释的。

我有一个`inputfile.txt`包含部分文件名的文件：

```
file1.abc
filed.def
fileq.lmn 
```

该文件是一个输入文件，我需要使用它来查找实际目录的完整文件名。文件名的结尾因情况而异，但其中一部分始终相同。

我想我可以将输入文件中的文本 grep 到所述目录中的 ls 命令（或 ls 命令到一个简单的文本文件），然后使用 awk 输出我想要的完整结果，但是我在这样做时遇到了一些麻烦.

`file1.abc`从输入文件中读取`inputfile.txt` 它会根据目录内容进行检查。如果文件存在，则根据文件名创建特定目录。

（我也在 Busybox 环境中.. 我没有很多东西可以使用）

像这样的东西...

```
cat lscommandoutput.txt \
        | awk -F: '{print("mkdir" system("grep $0"); inputfile.txt}' \
        | /bin/sh 
```

谢谢你。

编辑：我很抱歉不清楚这一点。输出应该是在 lscommandoutput.txt 中找到的每一行的完整文件名，使用 inputfile.txt 对这些特定行进行 grep。

如果 inputfile.txt 包含：

```
file1.abc
filed.def
fileq.lmn 
```

和 lscommandoutput.txt 包含：

```
file0.oba.ca-1.fil
file1.abc.de-1.fil
filed.def.com-2.fil
fileh.jkl.open-1.fil
fileq.lmn.he-2.fil 
```

不包含在 inputfile.txt 中的额外行将被忽略。inputfile.txt 中的文件为它们创建了一个目录，其名称是从 lscommandoutput.txt 中获取的。

```
/dir/dir2/file1.abc.de-1.fil/ <-- directory in which files can be placed in
/dir/dir2/filed.def.com-2.fil/
/dir/dir2/fileq.lmn.he-2.fil/ 
```

希望这更清楚一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:26:46.570

一、你赢了[无用的`cat`奖励](http://partmaps.org/era/unix/award.html)

其次，您对此的解释*非常*糟糕。如果您不能用简单的英语清楚地描述问题，那么您在将其转换为脚本或命令集时遇到困难也就不足为奇了。

`grep -f`是获取目录名称的好方法，但我不明白你想用它们做什么。

> 我现在的问题是将输出文件与我要放置文件夹的一个文件一起使用

呜？“我要放置文件夹的一个文件”是什么意思？文件来自哪里？它是在 中命名的文件`inputlist.txt`吗？它是否进入匹配的目录？

如果您只想创建目录，您可以执行以下操作：

```
fgrep -f ./inputfile.txt ./lscommandoutput.txt | xargs mkdir 
```

请注意，您可能希望`fgrep`输入字符串不被视为正则表达式和正则表达式元字符，例如`.`被忽略。

# c++ - 从 Type* 转换为 Type，反之亦然

> ID：12784077
> 
> 赞同：0
> 
> 时间：2012-10-08T14:45:27.923
> 
> 标签：c++, types, casting

是否可以从 C++ 中预定义的 Type_pointer 转换为其类型？

例如，我们定义了一个自定义 XType。我想做这样的事情，但我得到一个错误：

```
XType* b;    
XType a = (XType) b; 
```

我想将指针本身传递给只接受`Type`（不是`Type*`）的函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:55:31.570

您应该使用运算符取消引用指针`*`：

```
struct Type {
  Type(Type*) {}
};

void f(Type t) {
}

int main () {
  Type a;
  Type* b = &a;

  // Q: how to invoke f() if I only have b?
  // A: With the dereference operator
  f(*b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:02:27.647

除了@Robᵩ 的提议，您还可以更改函数以接受指针。

实际上，如果您打算从给定函数中将指针传递给其他函数，则必须将指针（或者引用）作为参数，否则您将获得原始对象的*副本*作为参数，因此您'将无法检索到原始对象的地址（即指针）。

如果你想省去重构，你可以做参考技巧：

```
void g(T* pt)
{
    // ...
}

void f(T& rt) // was: void f(T rt)
{
    cout << rt.x << endl; // no need to change, syntax of ref access
                          // is the same as value access
    g(&rt); // here you get the pointer to the original t
}

T* t = new T();
f(t); 
```

# java - Eclipse 中的错误：“在解决构建路径错误之前无法构建项目”

> ID：12784078
> 
> 赞同：15
> 
> 时间：2012-10-08T14:45:30.623
> 
> 标签：java, windows, linux, eclipse, buildpath

我是一名学习 Java 的计算机科学专业的学生，​​所以我在家里和大学里做一些关于 Linux 和 Windows 的混合工作。将新项目复制到 Eclipse 工作区后出现问题。该项目出现，但带有红色感叹号和错误提示：

> 在解决构建路径错误之前无法构建项目

我怎样才能解决这个问题？我尝试了[此处描述](http://www.scottdstrader.com/blog/ether_archives/000921.html)的解决方案，但没有奏效。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-08T14:56:09.847

1.  识别`"project navigator"`或`"package explorer"`查看。
    右键单击您的项目，选择`Build Path --> Configure build Path`.

2.  在出现的窗口中，您将找到四个选项卡，选择`"Libraries"`。在`"Web app libraries"`（展开）下，您将看到添加到项目类路径中的库。检查它们是否都可用。如果一个或多个不需要（他们的名字旁边会出现“失踪”，图标上会有一个红色标记），请检查您是否需要它们（也许您不需要）；如果您不需要它们，请将其删除，如果您需要它们，请退出此窗口，寻找丢失的 jar 并将其导入到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:36:18.197

1.  打开问题视图。您可以通过单击 Eclipse 左下角的小 + 号来打开此视图。这是一个非常小的加号，周围有一个矩形。单击它并选择问题。

2.  问题视图将向您显示需要解决的问题。

    *   如果消息显示“项目缺少所需的库...”，您需要通过右键单击项目，选择属性，然后构建路径来配置构建路径。使用库选项卡添加所需的 jar 文件。- 如果除了缺少库之外还有其他问题，您需要在此处发布确切的问题以获得精确的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-25T13:18:58.893

如果您找不到构建路径错误，有时菜单*Project* → *Clean...*就像一个魅力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-03T21:38:06.810

就我而言，构建路径中的所有库都正常。

为了解决这个问题，我删除了所有项目元数据（.project、.classpath、.settings）并将项目重新导入为 Maven 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T12:03:04.527

我的系统中也有这个问题，但是在查看项目内部后，我发现项目路径中 .classpath 文件的 XML 结构不正确。修改该文件后，问题就解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T09:21:36.977

如果在任何情况下都不起作用...然后从 Eclipse 工作区中删除您的项目，如果那是 Maven 项目，则再次导入为 Maven 项目。否则作为现有项目导入。

我尝试了所有以前给定的解决方案，但它们没有用，但它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-10T07:30:20.377

1.  右键单击您的项目 > 属性 > Java 构建路径 > 库

2.  删除带有红色“X”的文件（类似于 JRE ...）

3.  添加库

这就是我解决问题的方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-29T12:05:41.007

在 Eclipse 中，转到 Build Path，单击“Add Library”，选择 JRE System Library，单击“Next”，选择选项“Workspace default JRE(i)”，然后单击“Finish”。

这对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-05T16:19:22.940

1.  转到项目 > 属性 > Java 编译器 > 构建
2.  查看构建路径问题
3.  取消选中“发生构建路径错误时中止构建”
    它不会解决你所有的错误，但至少它会让你运行你的程序:)

# c# - 从控件继承的建议

> ID：12784080
> 
> 赞同：0
> 
> 时间：2012-10-08T14:45:30.213
> 
> 标签：c#, winforms, activex

我打算编写一个继承自第三方 ActiveX 控件的控件。要求是：

1) 应该可以从 Visual Studio 的工具箱中添加

2）它应该能够隐藏所有基类成员，并且只提供对派生类成员的访问。（派生类会提供几个自定义事件和函数）

一种解决方案是根本不使用继承，拥有一个将 ActiveX 控件声明为私有并在运行时动态初始化它的类。但是，这并不能满足我的第一个要求。有没有办法实现我想要的功能。

PS：我无权访问此控件的源代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:51:12.917

您可以通过使用简单的 Panel 控件作为包含类来使您的解决方案（组合）工作。

使用继承时，没有办法（真正/有效地）隐藏基类成员。

# iphone - 如何为 MapView 中的不同 Annotation 点添加不同的标题和副标题？

> ID：12784082
> 
> 赞同：0
> 
> 时间：2012-10-08T14:45:42.657
> 
> 标签：iphone, ios5, maps, mkannotation, mkannotationview

我在地图视图中显示不同的注释点。我想为所有不同的注释显示不同的标题和副标题。我以以下方式实现了我的**viewForAnnotation委托方法。**

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation;
{
    NSLog(@"annotation Class %@", [annotation class]);

if ([annotation isKindOfClass:[HGMovingAnnotation class]]) {

    static NSString *kMovingAnnotationViewId = @"HGMovingAnnotationView";

    HGMovingAnnotationView *annotationView = (HGMovingAnnotationView*)[mapView dequeueReusableAnnotationViewWithIdentifier:kMovingAnnotationViewId];

    if (!annotationView) {
        annotationView = [[HGMovingAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:kMovingAnnotationViewId];
    }

    //configure the annotation view
    annotationView.image = [UIImage imageNamed:@"symbol-moving-annotation.png"];

    annotationView.bounds = CGRectMake(0, 0, 20, 20); //initial bounds (default)
    annotationView.mapView = mapView;

    NSLog(@"Inside Moving Annotation");
    return annotationView;
}

static NSString *kCustomAnnotationView = @"CustomAnnotationView";

MKPinAnnotationView* customPinView = [[MKPinAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:kCustomAnnotationView];

if ([annotation isKindOfClass:[CLLocation class]]) {
    MKAnnotationView *customAnnotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                                          reuseIdentifier:kCustomAnnotationView];
    customAnnotationView.image = [UIImage imageNamed:@"customAnnotation"];

    customAnnotationView.canShowCallout = NO;
    customAnnotationView.centerOffset = CGPointMake(2,-12);
    NSLog(@"Inside Custom Annotation1");
    return customAnnotationView;
} else {
    customPinView.annotation = annotation;
    customPinView.pinColor = MKPinAnnotationColorPurple;
    NSLog(@"Inside Custom Annotation2");
    return customPinView;
}

} 
```

我想显示**customPinView**注释的标题和子标题。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:43:02.920

注释视图没有标题或副标题。您需要对`MKAnnotation`自定义注释进行子类化并设置（子）标题。viewForAnnotation 方法不适合这样做，您应该`[annotation setTitle:@"my title"]`在`[mapView addAnnotation:annotation]`.

示例代码：

```
@interface MyCustomAnnotation : NSObject <MKAnnotation> {

@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;
@property (nonatomic) CLLocationCoordinate2D coordinate;

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:12:05.117

我已经尝试了 phix23 建议的方法，并附带了以下代码。有用..

```
titleArray = [[NSArray alloc]initWithObjects:@"First Point",@"Second Point",@"Third Point",@"Fourth Point",@"Fifth Point", nil];
subTitleArray = [[NSArray alloc]initWithObjects:@"Restaurant",@"Park",@"Hotel",@"Theatre",@"AmusementPark", nil];

NSInteger customAnnotationCount = annotations.count;

//CLLocationCoordinate2D coordinates[customAnnotationCount];

for (NSInteger index = 0; index < customAnnotationCount; index++) {

    CLLocation *location = [annotations objectAtIndex:index];
    NSString *titleString = [titleArray objectAtIndex:index];
    NSString *subTitleString = [subTitleArray objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;
    //coordinates[index] = coordinate;
    CustomAnnotations *customAnnotation = [[CustomAnnotations alloc]initWithCoordinates:coordinate placeName:titleString description:subTitleString];
    [_mapView addAnnotation:customAnnotation];
    [customAnnotation release];
} 
```

“注释”是包含位置点的数组。_mapView 是我的 MKMapView。CustomAnnotations 是一个实现 MKAnnotation 协议的 NSObject 类，其方式与顶部描述的相同。

# c++ - 受保护和私有有什么区别？

> ID：12784083
> 
> 赞同：42
> 
> 时间：2012-10-08T14:45:43.583
> 
> 标签：c++, oop, class, private, protected

我不明白受保护和私有成员或方法之间的区别，因为我假设两者都会隐藏要从类外部访问的成员或函数。

**protected 和 private 关键字有什么区别？**

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-08T14:47:22.197

`private`- 只能在定义它们的类中访问。

`protected`- 在定义它们的类和从该类继承的其他类中可访问。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-08T14:47:40.440

`private`仅在类本身中可见的事物。

`protected`在类本身和子类中可见的东西。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-08T14:48:43.620

区别在于谁可以访问这些功能。

*   `Private`= 只有同一类的成员才能访问该函数。

*   `Protected`= 与私有相同，但派生类也可以访问。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-08T14:53:11.310

私有成员只能由该类成员及其朋友使用；受保护的成员可以被其他类继承，并且可以被类成员和朋友使用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-08T14:51:08.910

私有方法通常对类实例可见（内部实现），受保护方法对同一包中的子类和类可见（继承和限制使用）。

# jenkins - 如何为 openstack 用户设置默认密钥对？

> ID：12784086
> 
> 赞同：0
> 
> 时间：2012-10-08T14:45:51.883
> 
> 标签：jenkins, openstack, jclouds

如何在 openstack 中为用户设置默认密钥对？

我正在使用带有 jclouds 插件的 jenkins，它不支持密钥对选择。jclouds 文档说：

```
injection of an SSH key from the JClouds is not working (but working for the registered user's default key) 
```

我在 openstack 文档中找不到任何关于为用户设置默认密钥对的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:44:50.917

AFAIK 对于 OpenStack 中的用户来说，没有默认密钥对这样的东西。

但是，[jclouds Jenkins Plugin 文档](https://wiki.jenkins-ci.org/display/JENKINS/JClouds+Plugin)读取

> 填写配置选项... RSA Private Key/Public Key：如果您有密钥对，则只需复制粘贴公钥和私钥部分，否则单击`Generate Key Pair`按钮。

似乎这可能对你有用。

# tycho - 如何在 tycho 测试执行期间分析低级 OSGi 问题？

> ID：12784087
> 
> 赞同：7
> 
> 时间：2012-10-08T14:45:53.187
> 
> 标签：tycho

[当使用tycho-surefire-plugin](http://www.eclipse.org/tycho/sitedocs/tycho-surefire/tycho-surefire-plugin/test-mojo.html)执行 JUnit 测试时，tycho fork 一个Equinox 运行时。在极少数情况下，OSGi 测试运行时中的某些包可能无法解析/启动（例如包使用冲突）。如果您阅读调试日志（maven CLI 选项`-X`），您会发现类似

```
!ENTRY org.eclipse.osgi 2 0 2012-10-08 16:41:31.635
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-10-08 16:41:31.635
An error has occurred. See the log file
C:\mytestproject.tests\target\work\configuration\1349705136008.log.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12:03.181s
[INFO] Finished at: Mon Oct 08 16:17:16 CEST 2012
[INFO] Final Memory: 20M/309M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.eclipse.tycho:tycho-surefire-plugin:0.15.0:test (default-test) on project mytestproject.tests: An unexpected error occured (return c
ode 13). See log for details. -> [Help 1] 
```

在包使用冲突的情况下，eclipse 控制台日志没有提供足够的信息。

如何分析由 tycho 分叉的 OSGi 测试运行时中的捆绑包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T14:45:53.187

以远程调试模式启动测试（只需`-DdebugPort=8000`在 CLI 上指定）并在本地端口（例如 1234）上启动 OSGi 控制台：

```
 <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-surefire-plugin</artifactId>
            <version>${tycho-version}</version>
            <configuration>
                <systemProperties>
                  <osgi.console>1234</osgi.console>
                </systemProperties>
            </configuration>
        </plugin> 
```

如果甚至没有开始测试，请在您的一个测试类或 org/eclipse/tycho/surefire/osgibooter/OsgiSurefireBooter 中设置断点。然后，

```
 telnet localhost 1234 
```

并且您可以使用通常的 OSGi 控制台命令`ss, diag, bundle`等来分析“体内”问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-01T21:26:32.200

或者，您可以运行`-consolelog`或将`eclipse.consoleLog`属性设置为`true`属性。如果您使用 Tycho 运行，则可以使用`<argLine>-Declipse.consoleLog=true</argLine>`.

# cakephp - CakePHP 2.x 反向路由链接助手

> ID：12784089
> 
> 赞同：2
> 
> 时间：2012-10-08T14:45:56.680
> 
> 标签：cakephp, routing, reverse, routes, view-helpers

在我的 CakePHP 应用程序中，我连接了以下路由：

```
Router::connect('/:city/dealer/:id', 
    array('controller' => 'dealers', 'action' => 'view'),
    array(
        'pass' => array('city', 'id'),
        'city' => '[a-z]+',
        'id' => '[0-9]+'
        )
    ); 
```

这很好用并且可以启用：*domain.com/washington/dealer/1*

但是如何在视图中为这个 URL 生成正确的 HTML 链接呢？如果我这样做：

```
echo $this->Html->link(
    'Testlink',
    array('washington', 'controller' => 'dealers', 'action' => 'view', 1)
); 
```

它将所有参数添加到生成链接的末尾：

*http://domain.com/dealers/view/washington/1*

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:08:05.717

我相信您仍然需要指定参数，如下所示：

```
echo $this->Html->link('Testlink',
    array('controller' => 'dealers', 'action' => 'view', 'city' => 'washington',
                                                         'id'=> 1)); 
```

Cake 在食谱中有一个类似的例子：

```
<?php
// SomeController.php
public function view($articleId = null, $slug = null) {
    // some code here...
}

// routes.php
Router::connect(
    '/blog/:id-:slug', // E.g. /blog/3-CakePHP_Rocks
    array('controller' => 'blog', 'action' => 'view'),
    array(
        // order matters since this will simply map ":id" to $articleId in your action
        'pass' => array('id', 'slug'),
        'id' => '[0-9]+'
    )
);

// view.ctp
// this will return a link to /blog/3-CakePHP_Rocks
<?php
echo $this->Html->link('CakePHP Rocks', array(
    'controller' => 'blog',
    'action' => 'view',
    'id' => 3,
    'slug' => 'CakePHP_Rocks'
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:47:01.173

嗨，塞巴斯蒂安，它可能为时已晚，无法帮助您，但我也许可以帮助其他人解决这个问题。解决问题的关键是在 Helper 类中添加 url 方法。我通过在 View/Helper 中创建 AppHelper.php 来做到这一点。它看起来像这样。我为你的城市改变了我的参数。

查看/Helper/AppHelper.php

```
<?php
App::uses('Helper', 'View');
class AppHelper extends Helper {

    function url($url = null, $full = false) { 
            if (is_array($url)) { 
                   if (empty($url['city']) && isset($this->params['city'])) { 
                            $url['city'] = $this->params['city']; 
                    }

                    if (empty($url['controller']) && isset($this->params['controller'])) { 
                            $url['controller'] = $this->params['controller']; 
                    }

                    if (empty($url['action']) && isset($this->params['action'])) { 
                            $url['action'] = $this->params['action']; 
                    }
            } 

            return parent::url($url, $full); 
    }

 }
 ?> 
```

然后我创建像

```
Router::connect('/:city/dealer/:id', 
array('controller' => 'dealers', 'action' => 'view', 'id'=>':id'),
array('pass' => array('city', 'id'),
      'city' => '[a-z]+',
      'id' => '[0-9]+'
)); 
```

希望这可以帮助 ：）

# c++ - 如何将基于迭代器的 for 循环重写为基于范围的 (C++11)

> ID：12784091
> 
> 赞同：1
> 
> 时间：2012-10-08T14:46:07.853
> 
> 标签：c++, loops, for-loop, c++11, iterator

我想重写这个 for 循环（有效）

```
for (vector<shared_ptr<Node<int>>>::iterator it = n.root.children.begin();
    it != n.root.children.end(); 
    ++it) 
    {cout << (*it)->value<<flush;} 
```

进入基于范围的 for 循环。我尝试的是

```
for (shared_ptr<Node<int>> child:(n.root).children){
       cout<<(child->value)<<" "<<flush;
    } 
```

但它给了我一个核心转储。根是节点类型

```
template <typename T>
class Node{
public:
    T value;
    vector<shared_ptr<Node>> children;
}; 
```

main.cpp 中的这些行工作正常。

```
cout<<(n.root).value<<flush;
cout<<n.root.children.front()->value<<flush; 
```

我使用 g++ 4.7.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:54:43.297

给你。试试这个。

```
for (auto v : n.root.children ) {
    cout << v->value << flush;
} 
```

# mysql - 使用 SELECT 结果更新查询

> ID：12784094
> 
> 赞同：0
> 
> 时间：2012-10-08T14:46:20.887
> 
> 标签：mysql, sql, select, sql-update

随着我的应用程序的扩展，我现在正在更改数据库的结构；我现在想控制数据库中的文件类型。我想从数据库中已有的当前文件类型开始。我的数据库现在有一个 [simplified] 2 表结构，如：

`tbFiles: pkFileID, fileType, fileName`

`tblFileType: pkFileType, typeName, typeDesc`

我正在尝试将`SELECT`查询的输出更新到新创建的`tblFileType`表中。我已经尝试过：

```
UPDATE tblFileType
INNER JOIN
(SELECT DISTINCT fileType FROM tblFiles) as X
SET typeName = fileType 
```

但我似乎总是得到`0 row(s) affected`。

当我跑

```
SELECT DISTINCT fileType
FROM  `tblFiles` 
```

我明白了`Showing rows 0 - 22 (~23 total, Query took 0.0074 sec)`

我知道这一定很简单，但为什么 UPDATE 查询不影响 23 行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:48:53.250

您需要添加如下`JOIN`条件：`ON t1.fileType = x.fileType`

```
UPDATE tblFileType t1
INNER JOIN
(
    SELECT DISTINCT fileType 
    FROM tblFiles
)as X ON t1.fileType = x.fileType
SET t1.typeName = X.fileType 
```

**更新：**由于表格`tblFileType`是空白的，您将需要使用以下内容`INSERT`：

```
INSERT INTO tblFileType(typeName )
SELECT DISTINCT fileType 
FROM tblFiles
WHERE -- a condition here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:07:33.890

你只想填充表格 - 不更新那里的任何东西（特别是因为什么都不存在）

```
INSERT INTO tblFileType(typeName )
SELECT DISTINCT fileType FROM tblFiles 
```

# r - 在 R 中使用 system.time，得到非常不同的时间

> ID：12784098
> 
> 赞同：3
> 
> 时间：2012-10-08T14:46:53.333
> 
> 标签：r

我在 R 中编写了两个函数，我需要看看哪个更快，所以我使用了 system.time。然而，答案如此多样化，我无法分辨。作为评估工作，我觉得我实际上无法发布代码（以防有人纠正它）。这两个函数都调用 rbinom 来生成多个值，这是唯一不是简单计算的部分。

函数时间需要尽可能快，但两者的返回时间都在 0.17 到 0.33 之间。因为标记是 0.14/（我的功能时间）x 10，所以我知道确切的时间很重要。

我按照 R 帮助中的建议离开了 gcFirst=TRUE。

我的问题是为什么时代如此不一致？最有可能是功能本身，我的笔记本电脑还是 R？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:48:12.680

您可能想使用其中一个基准测试包

*   [r基准](http://cran.r-project.org/package=rbenchmark)
*   [微基准](http://cran.r-project.org/package=microbenchmark)

为了这。即便如此，变异性总会进入。基准测试和性能测试并不是最精确的科学。

另请参阅“编写 R 扩展”手册中有关分析的部分。

# python - 在 Python 中通过 HTTP 发送大文件的内容

> ID：12784104
> 
> 赞同：0
> 
> 时间：2012-10-08T14:47:14.820
> 
> 标签：python, http

> **可能重复：**
> [Python：HTTP 发布带有流式传输的大文件](https://stackoverflow.com/questions/2502596/python-http-post-a-large-file-with-streaming)

我正在编写一个通过 http 上传大量数据的程序（特别是到 Amazon Glacier，但这无关紧要），并且我正在寻找减少内存开销的方法。

目前的情况基本上是： - 读取内存中的部分文件， - 上传文件到服务器。

问题是，部分很大，高达 4096 MB，将其全部存储在 RAM 中只是浪费内存。我正在寻找一种将内存减少到不超过 1 MB 的方法。

我一直在看

HTTPConnection.request(方法, url[, body[, headers]])

其中 body 可能是一个打开的文件（无需将其复制到内存；只需从磁盘读取就可以了）：问题是我不想一次性发送一个完整的文件，而是该文件的任意部分。然而，没有用那部分数据创建一个新文件，我不知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:27:21.747

根据这个[http://bugs.python.org/issue12319](http://bugs.python.org/issue12319) urllib2 支持 POST 的块编码。我猜 add_data 因此可以被多次调用。

# eclipse - 默认情况下，git 是否会从新的仓库中排除 eclipse 项目文件？

> ID：12784105
> 
> 赞同：5
> 
> 时间：2012-10-08T14:47:16.663
> 
> 标签：eclipse, git, github

我尝试将几个 Eclipse 项目推送到 github repos。每次我以后克隆或将它们取回日食时遇到麻烦。原因似乎是当我执行“git add”时，eclipse 特定的项目文件（.project、.classpath 等）没有上演。我曾尝试研究 gitignore 文件，但找不到默认创建的文件。.git/info/exclude 中的文件似乎也不相关。我已经搜索了 StackOverflow 和整个互联网，但没有提到这一点。所以很明显，我是唯一一个遇到过这种情况的人，或者是唯一一个靠我自己无法解决的傻瓜。我是否需要明确暂存这些项目文件以将它们包含在 repo 中（在使用 'git add .' 添加整个项目之后）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:29:50.433

如果那些 Eclispe 项目不在本地的 git repo 中，您可以在项目的根目录中创建一个 git repo，并且您应该能够添加带有“？”的文件。在他们身上，包括`.project`and `.classpath`：

![共享项目](../Images/b3d84d7c1bb11e86f2b68dfc57ca8f04.png)

（来自[Egit 用户指南](http://wiki.eclipse.org/EGit/User_Guide)/[创建存储库](http://wiki.eclipse.org/EGit/User_Guide#Create_Repository)部分）

但如果项目已经在 git repo 中，请首先在 git 命令行中检查这些文件的状态。如有疑问，请始终使用任何本地 git 安装（例如对于 Windows：[msysgit](http://code.google.com/p/msysgit/)）回退到 CLI（命令行界面）

EGit Eclipse 选项“ `Import > Git > Projects from Git`”应该引用*所有*文件，包括`.project`和`.classpath`

![添加 git 仓库](../Images/727f87793e59c756d5497b42d90a7064.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:01:27.257

在这种情况下，我建议使用 Egit 而不是命令行。虽然命令行通常更强大，但 Egit 更了解 Eclipse 项目的逻辑项目结构。

# android - 以fill_parent宽度显示第一列Android GridView的第一行

> ID：12784106
> 
> 赞同：2
> 
> 时间：2012-10-08T14:47:21.103
> 
> 标签：android, gridview

我有一个屏幕，它将显示 GridView 中的项目列表。我根据我的要求设计了 2 列和 n 行。

到这里没问题，但现在有一个新要求，我需要用大预览显示第一列。

* * *

## 第一项留在这里

## 第二项|第三项

## 第四项|第五项

## 第六项再次保持满

继续……

这在 Android GridView 中可行吗？有人可以帮助如何实现这一目标

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:09:31.350

不幸的是，这是不可能的`GridView`，因为它不支持跨越，我认为`TableLayout`更适合你的情况，因为它支持行跨度。希望可以清除它

# macos - Selenium WebDriver - 无法在 Mac OS X 上的 Chrome 中关闭选择下拉菜单

> ID：12784108
> 
> 赞同：6
> 
> 时间：2012-10-08T14:47:34.060
> 
> 标签：macos, google-chrome, selenium, selenium-webdriver, xpath

我已经使用 Selenium WebDriver 几个月了，我正在处理的 Web 应用程序中的下拉菜单出现问题。

正在发生的事情是测试正在打开页面，通过找到它们并确保它们显示来验证页面上的几个元素。之后，在不同的字段中输入了一些文本，然后单击选项选择框以打开下拉菜单。在此之后，测试会遍历下拉菜单中的所有选项，直到找到所需的选项，然后单击该选项。

此时该选项已被选中，但下拉菜单并未关闭。

我尝试再次单击选项选择，但这没有效果，在其余的测试期间，其他页面被导航到并且菜单没有关闭。

然后页面被保存，然后导航离开。但是，下拉菜单会一直保留到浏览器关闭为止。

这是来自应用程序的代码：

```
<select id="options" name="options" class="options">
<option value="option1 (auto)">option1 (auto)</option>
<option value="option2">option2</option>
<option value="option3">option3</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T08:09:13.627

我已经通过变通解决了这个问题，因为这是我发现工作的唯一方法。

首先感谢 eugene.polschikov 的回答，虽然它并没有解决问题，但它确实让我大开眼界，我对动作生成器一无所知，它给了我一些关于未来测试的好主意。还要感谢任何阅读本文并思考可能的解决方案的人。

现在的解决方法是不打开选择。代码的工作方式是它会打开列表并找到它想要的并单击它，此时选择不会关闭，所以现在代码不再首先打开选择，它点击选择它的隐藏选项，不是我想要的 100%，但它有效。

快乐编程，本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T16:25:15.090

我会尝试的第一个解决方案是以不同的方式单击菜单选项。Selenium API 为我们提供了这种可能性。1) 定位元素的例如 css 选择器。

```
String cssOption1 = "select[id='options']>option[value='option1 (auto)']";
String cssOption2 = "select[id='options']>option[value='option2']";
String cssOption3 = "select[id='options']>option[value='option3']"; 
```

另外不要忘记验证您是否正确找到了元素，例如 .in firepath、ffox 中的 firebug 插件： ![firepath 中 web 元素上的正确位置](../Images/13209d3155bedfcd48a5b6403fa6ab07.png)

*方法1*

```
driver.findElement(By.cssSelector(cssOption2)).click(); 
```

*方法 2 使用操作构建器 API*

```
WebElement mnuOptionElement;
mnuOptionElement = driver.findElement(By.cssSelector(cssOption2));
Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.moveToElement(mnuOptionElement).click(); 
```

有关操作生成器的更多信息，您可以[在此处获取](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)

*方法 3 使用 jsExecutor 点击 web 元素。在所有情况下都对我有用。*

```
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssOption2+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

希望这对你有用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-19T23:29:38.943

如果人类可以按 Escape 退出组合框，您可以在 Selenium 中通过切换到活动元素来执行此操作：

```
 from selenium.webdriver.common.keys import Keys 
    element = driver.switch_to.active_element
    element.send_keys(Keys.ESCAPE) 
```

# javascript - jquery显示/隐藏div下拉不起作用

> ID：12784110
> 
> 赞同：0
> 
> 时间：2012-10-08T14:47:37.127
> 
> 标签：javascript, jquery, html, drop-down-menu, show-hide

I want it so that when the category books is selected another drop down appears showing the book categories but this doesn't seem to be working:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<script src="jquery.js" type="text/javascript"></script>

<script>
$('#category').change(function() {
    if ($(this).val() == 'Books') {
                    $('#p_bookcat').show();
            } else {
            $('#p_bookcat').hide();
            }
});
​
</script>

</head>

<body>

<p> <label for="category"><b>Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                 <select name="category" id="category">
                    <option value=""> -- select -- </option>
                    <option value="Accessories">Accessories</option>
                    <option value="Accommodation">Accommodation</option>
                    <option value="Books">Books</option>
                    <option value="Business">Business</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Furniture">Furniture</option>
                    <option value="Imagery">Imagery</option>
                    <option value="Multi">Multimedia</option>
                    <option value="Tickets">Tickets</option>

                   </select>
        </p>

<p id="p_bookcat" style="display: none;">
  <label for="bookcat"><b>Book Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
  <select name="bookcat" id="bookcat">
    <option value=""> -- select -- </option>
    <option value="Law">Law</option>
    <option value="Business">Business</option>
    <option value="Optom">Optom</option>
    <option value="Engineering">Engineering</option>
    <option value="Pharmacy">Pharmacy</option>
    <option value="Sciences">Sciences</option>
    <option value="Languages">Languages</option>
    <option value="English">English</option>
    <option value="Maths">Maths</option>
    <option value="Other">Other</option>
  </select>
</p>

​
</body>
</html> 
```

编辑：

我意识到这是可行的，但是当我添加标题时它停止工作：

```
<?php

// Inialize session
session_start();

// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
        header('Location: login.php');
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">

<script src="jquery.js" type="text/javascript"></script>

<script>
$(document).ready(function(){
$('#category').change(function() {
    if ($(this).val() == 'Books') {
                    $('#p_bookcat').show();
            } else {
            $('#p_bookcat').hide();
            }
});

});
</script>

</head>

<body>

    <div id="header">

<div id="search">
  <center>
    <form method="GET" action="search.php" style= "padding: 1px; font-family: Tahoma, Geneva, sans-serif;">
    <input name="search" id="s" type="text" value="<?php echo $_GET['search']; ?>" size="20" />

<select name="category" id="category" >
                    <?php if(isset($_GET['submit'])) { ?>
                    <option value="<?php echo $_GET['category']; ?>" selected="selected"><?php echo $_GET['category']; ?></option>
                    <?php }else{ ?>
                    <option value=""> Categories: </option>
                    <?php } ?>
                    <option value="">All</option>
                    <option value="Accessories">Accessories</option>
                    <option value="Accommodation">Accommodation</option>
                    <option value="Books">Books</option>
                    <option value="Business">Business</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Furniture">Furniture</option>
                    <option value="Imagery">Imagery</option>
                    <option value="Multi">Multimedia</option>
                    <option value="Tickets">Tickets</option>
        </select>
        <input name="price" id="price" type="hidden" value="ASC" />

<select name="university" id="university" >
                    <option value="">Aston University</option>
        </select>

                    <input type="hidden" name="start" value="0" />

                    <input type="hidden" name="limit" value="4" />

        <input id="searchSubmit" type="submit" value="" name="submit"/>

  </form>
  </center>
</div>

<a href="index.php"><div id="imagelogo">
<img src="images/box-fb.jpg" width="290" height="180"/> 
</div></a>

<div id="imagelogotext">
<em>Where's your Ad @ ?</em>
</div>

<div id="navigation" name="navigation">
<ul>
<li><a href="index.php" style="padding-top: 3px;"><img src="images/home.png" width="25px" height="25px"/></a></li>
<li><a href="search.php">Search</a></li>
<li><a href="securedpage1.php">Post Ad</a></li>
<li><a href="selling.php">Buy/Sell</a></li>
<li><a href="faq.php">FAQ</a></li>
<li><a href="contact.php">Contact</a></li>
<li><a href="aboutus.php">About Us</a></li>
</ul>
</div>

<div id="account">

  <?php
if( isset( $_SESSION['username'] ) ){

   echo "<a href='securedpage1.php'>My Account</a><img src='images/uni-icon.png' width='30' height='18' style='vertical-align: middle;'/>";

}else{

  echo "<a href='login.php' >Login</a><img src='images/uni-icon.png' width='30' height='18' style='vertical-align: middle;'/>";
}
?>

</div>

<div id="registerlogout">
<?php
if( isset( $_SESSION['username'] ) ){
   echo "<a href='logout.php'>Logout</a>";

}else{

  echo "<a href='register.php'> Register</a>";
}
?>
</div>

</div>
<center>
<center>

</div>

<p> <label for="category"><b>Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                 <select name="category" id="category">
                    <option value=""> -- select -- </option>
                    <option value="Accessories">Accessories</option>
                    <option value="Accommodation">Accommodation</option>
                    <option value="Books">Books</option>
                    <option value="Business">Business</option>
                    <option value="Clothing">Clothing</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Furniture">Furniture</option>
                    <option value="Imagery">Imagery</option>
                    <option value="Multi">Multimedia</option>
                    <option value="Tickets">Tickets</option>

                   </select>
        </p>

<p id="p_bookcat" style="display: none;">
  <label for="bookcat"><b>Book Category</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
  <select name="bookcat" id="bookcat">
    <option value=""> -- select -- </option>
    <option value="Law">Law</option>
    <option value="Business">Business</option>
    <option value="Optom">Optom</option>
    <option value="Engineering">Engineering</option>
    <option value="Pharmacy">Pharmacy</option>
    <option value="Sciences">Sciences</option>
    <option value="Languages">Languages</option>
    <option value="English">English</option>
    <option value="Maths">Maths</option>
    <option value="Other">Other</option>
  </select>
</p>

<p>

              <label><b>Ad Title</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                    <input type="text"id="fname" style="width: 300px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;" name="fname" maxlength="90" />&nbsp;
        </p>

                <p>
                  <label><b>Description</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                    <textarea id="lname"  name="lname" cols="40" rows="5" maxlength="420"></textarea>&nbsp;
                </p>

          <p> <label for="conditional"><b>Condition </b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                 <select name="conditional" id="conditional">
                    <option value=""> -- select -- </option>
                    <option value="Brand New">Brand New</option>
                    <option value="Like New">Like New</option>
                    <option value="Very Good">Very Good</option>
                    <option value="Good">Good</option>
                    <option value="Adequate">Adequate</option>
                    <option value="Damaged">Damaged</option>
            </select>&nbsp;
        </p>

<p><label><b>Contact</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                    <input type="text" style="width: 300px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;"id="contact" name="contact" maxlength="30" />
        </p>

                <p>
                <label><b>Price</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;£</label>
                <script>
                function onlyNumbers(evt)
                {
                var e = event || evt; // for trans-browser compatibility
                var charCode = e.which || e.keyCode;

                if (charCode > 31 && (charCode < 48 || charCode > 57))
                return false;

                return true;

                }
                </script>
                    <input type="text" name="price" maxlength="5" onkeypress="return onlyNumbers();"/>&nbsp;
        </p>

      <p><label><b>Choose Image</b>&nbsp;</label>

     <script>
     window.onload = function() {

    function handleFileSelect(evt) {
      var files = evt.target.files; // FileList object
      var max_size = 3670016; // Max file size

      // files is a FileList of File objects. List some properties.
      var output = [];
      for (var i = 0, f; f = files[i]; i++) {
       // console.log(f.size);
        if(f.size > max_size) { // Check if file size is larger than max_size
          alert("Sorry, but the file that you selected is too large. Please upload a file that is no larger than " + max_size + " KB.");
          return false;
        } // end if
      } // end for loop
    } //  end function

   document.getElementById('files').addEventListener('change', handleFileSelect, false);
}
</script>

                    <input type="file" name="image" id="files"/><br />
<input type="hidden" name="MAX_FILE_SIZE" value="5120" /></p>

                <p><input type="submit" id="submit" value="Upload" />
                </p>
      <p>&nbsp;</p>
</form>

​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:49:15.463

你失踪了`$(document).ready`或`$(function(){ })`；

将您的 jquery 包装在其中。

```
$(document).ready(function(){
   $('#category').change(function() {
      if ($(this).val() == 'Books') {
          $('#p_bookcat').show();
      } else {
          $('#p_bookcat').hide();
      }
  });​
}); 
```

编辑：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:51:55.893

把这个脚本

```
<script>
$('#category').change(function() {
    if ($(this).val() == 'Books') {
                    $('#p_bookcat').show();
            } else {
            $('#p_bookcat').hide();
            }
});
​
</script> 
```

在您的页面末尾。当此脚本实际执行时，根本不存在#category，因此它不起作用。

# java - 如何将文件转换为字符串并再次将该字符串恢复为文件

> ID：12784114
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:47:51.947
> 
> 标签：java

我有一个问题：“如何在 Java 中将 File 转换为 String 并再次将该 String 取回 File？”

我的代码：

```
public static void main(String[]args) throws IOException{
    String fff = fileToString("Book.xlsx");
    byte[] bytes = fff.getBytes();

    File someFile = new File("Book2.xlsx");
    FileOutputStream fos = new FileOutputStream(someFile);
    fos.write(bytes);
    fos.flush();
    fos.close();
}

public static String fileToString(String file) {
    String result = null;
    DataInputStream in = null;

    try {
        File f = new File(file);
        byte[] buffer = new byte[(int) f.length()];
        in = new DataInputStream(new FileInputStream(f));
        in.readFully(buffer);
        result = new String(buffer);
    } catch (IOException e) {
        throw new RuntimeException("IO problem in fileToString", e);
    } finally {
        try {
            in.close();
        } catch (IOException e) { /* ignore it */
        }
    }
    return result;
} 
```

我如何才能`Book1.xlsx`在字符串中取回并保存在`book2.xlsx`?? `Book2.xlsx`一片空白....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:49:33.757

您有许多选择，但`Writer`和`Reader`接口使这变得简单。

使用 a[`FileWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)将您的内容写入`String`a `File`，如下所示：

```
File destination = new File("...");
String stringToWrite = "foo";
Writer writer = new FileWriter(destination);
writer.write(stringToWrite);
writer.close(); 
```

然后使用[FileReader](http://docs.oracle.com/javase/7/docs/api/java/io/FileReader.html)将其读回：

```
StringBuilder appendable = new StringBuilder();
Reader reader = new FileReader(destination);
reader.read(appendable);
reader.close();

String readString = appendable.toString(); 
```

# html - 是否有一个易于使用的软件来突出显示文本中的多个关键字并显示每个匹配项的计数？

> ID：12784120
> 
> 赞同：3
> 
> 时间：2012-10-08T14:48:21.637
> 
> 标签：html, search, highlight

我正在寻找一种现有的半体面软件，它可以同时突出显示多个搜索词，使用不同的颜色，并显示每个匹配搜索词的计数。我还需要一种简单的方法将相同的关键字应用于不同的文本。

**编辑**

用一个例子来解释，这或多或少是我需要的：http: [//janosgyerik.github.com/highlighter/](http://janosgyerik.github.com/highlighter/)

我很快把它放在一起，因为我的一个朋友在时间压力下需要这个功能。我很想以此为基础，但我不想重新发明轮子。这样的工具对我来说似乎很常见，就像我的朋友一样，我经常发现自己想做多关键字搜索。我相信那里一定已经存在某些东西我只是无法找到它。我不想重新发明轮子，如果有这样的现有软件，我可以放弃我目前的工作并使用现有的东西。如果没有这样的软件，那么我很乐意继续破解上面的这个例子，我只是真的不想愚蠢地重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:43:32.143

您可能找不到成熟的软件来进行这样的文本突出显示的原因是因为它只有几行代码。`<span>`基本上，您只需通过正则表达式传递您的文本块，并用可用于装饰匹配项的标签替换匹配项。

```
var text = $('p').text(),
    keyword = 'text',
    cls = 'hltBlue';

var pattern = '\\b' + keyword;
$('p').html(text.replace(new RegExp(pattern, 'gi'),
                    '<span class="' + cls + '">' + keyword + '</span>'));​ 
```

[您可以在http://jsfiddle.net/Kmyrd/2/](http://jsfiddle.net/Kmyrd/2/)看到一个示例。

现在，如果您正在寻找一个功能齐全的 html 文本编辑器，这里有很多：

[http://aloha-editor.org/](http://aloha-editor.org/)
[http://imperavi.com/redactor](http://imperavi.com/redactor)

如果您想突出显示任何网站上的文本，通常只需`Ctrl+f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:45:13.347

我会说使用[Vim 多重搜索脚本](http://vim.wikia.com/wiki/VimTip1572)这几乎完成了，除了计数。但是[这个 SO 问题](https://stackoverflow.com/questions/4668623/show-count-of-matches-in-vim)已经解决了计数问题。

如果 Vim 不是你的一杯茶，那么我会说 Notepad++（摘自我上面的评论）：

它当然可以突出显示不同颜色的不同标记（您可以根据需要配置颜色），我不知道计数。不同之处可能在于用法 - IIRC Notepad++ 高亮显示按键/单击令牌 - 所以您可能需要先找到它。

# iphone - 为什么此裁剪代码会导致图像旋转？

> ID：12784122
> 
> 赞同：0
> 
> 时间：2012-10-08T14:48:28.530
> 
> 标签：iphone, objective-c, ios

这个问题的标题应该很清楚。下面的代码执行裁剪操作，然后在图像视图中显示新裁剪的照片。问题是图像一旦被裁剪，就会以与原始源图像不同的方向显示。这是为什么？我该怎么办？

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
[self.popoverController dismissPopoverAnimated:true];

NSString *mediaType = [info
                       objectForKey:UIImagePickerControllerMediaType];
[self dismissModalViewControllerAnimated:YES];
if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
    UIImage *image = [info
                      objectForKey:UIImagePickerControllerOriginalImage];

    CGRect rect = CGRectMake(0, ((image.size.height - image.size.width) / 2), image.size.width, image.size.width);

    CGImageRef subImageRef = CGImageCreateWithImageInRect(image.CGImage, rect);
    CGRect smallBounds = CGRectMake(rect.origin.x, rect.origin.y, CGImageGetWidth(subImageRef), CGImageGetHeight(subImageRef));

    UIGraphicsBeginImageContext(smallBounds.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextDrawImage(context, smallBounds, subImageRef);
    croppedImage = [UIImage imageWithCGImage:subImageRef];
    UIGraphicsEndImageContext();

    imageView.image = croppedImage; 
```

***编辑**

根据建议问题的根本原因是删除 EXIF 标签的评论，我尝试使用以下代码更正方向。这仍然不能解决问题，但我认为这是朝着正确方向迈出的一步。也许它会帮助某人为这个问题提出一个新的答案。

```
if (image.imageOrientation == UIImageOrientationLeft) {
        NSLog(@"left");
        CGContextRotateCTM (context, radians(90));

    } else if (image.imageOrientation == UIImageOrientationRight) {
        NSLog(@"right");
        CGContextRotateCTM (context, radians(-90));

    } else if (image.imageOrientation == UIImageOrientationUp) {
        NSLog(@"up");
        // NOTHING
    } else if (image.imageOrientation == UIImageOrientationDown) {
        NSLog(@"down");
        CGContextRotateCTM (context, radians(-180.));
    } 
```

见[https://stackoverflow.com/a/5184134/549273](https://stackoverflow.com/a/5184134/549273)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:40:29.530

我认为您最好的选择是从传入的图像中获取方向，然后使用适当的旋转创建新图像。

从传入的信息字典中获取元数据：

```
NSDictionary *metadata = [info objectForKey:UIImagePickerControllerMediaMetadata];
NSNumber *orientation = [metadata objectForKey:@"Orientation"]; 
```

然后当你创建你的`UIImage`：

```
croppedImage = [UIImage imageWithCGImage:subImageRef 
                                   scale:1.0 
                             orientation:[orientation intValue]]; 
```

希望这对你来说是一个起点，至少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T04:48:07.280

你应该做的是在应对之前修复图像方向，我遇到了同样的问题，我正在使用 swift 所以我不得不改变这个答案：

[上传后iOS UIImagePickerController结果图像方向](https://stackoverflow.com/questions/5427656/ios-uiimagepickercontroller-result-image-orientation-after-upload)

但是代码工作得很好。请记住，它返回一个图像而不是编辑图像，因为那个简单的错误，我努力让它正确。顺便说一句，你不应该使用 UIImageOrientation 而是 UIImageOrientation.rawValue，至少在 swift 中是这样。

我将在此处留下 swift 的代码，**希望**对您有所帮助：

```
extension UIImage {
public func fixOrientation() -> UIImage?{

    if self.imageOrientation.rawValue == UIImageOrientation.Up.rawValue {
        return self
    }

    var transform : CGAffineTransform = CGAffineTransformIdentity

    switch self.imageOrientation.rawValue {

    case UIImageOrientation.Down.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height)
            transform = CGAffineTransformRotate(transform, CGFloat(M_PI))
    case UIImageOrientation.DownMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, self.size.height)
            transform = CGAffineTransformRotate(transform, CGFloat(M_PI))

    case UIImageOrientation.Left.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0)
            transform = CGAffineTransformRotate(transform, CGFloat(M_PI_2))
    case UIImageOrientation.LeftMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0)
            transform = CGAffineTransformRotate(transform, CGFloat(M_PI_2))

    case UIImageOrientation.Right.rawValue:
            print("working on right orientation")
            transform = CGAffineTransformTranslate(transform, 0, self.size.height)
            transform = CGAffineTransformRotate(transform, CGFloat(-M_PI_2))
    case UIImageOrientation.RightMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, 0, self.size.height)
            transform = CGAffineTransformRotate(transform, CGFloat(-M_PI_2))

    case UIImageOrientation.Up.rawValue: break
    case UIImageOrientation.UpMirrored.rawValue: break

    default: break
    }

    switch self.imageOrientation.rawValue {

    case UIImageOrientation.UpMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0)
            transform = CGAffineTransformScale(transform, -1, 1)
    case UIImageOrientation.DownMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.width, 0)
            transform = CGAffineTransformScale(transform, -1, 1)

    case UIImageOrientation.LeftMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0)
            transform = CGAffineTransformScale(transform, -1, 1)
    case UIImageOrientation.RightMirrored.rawValue:
            transform = CGAffineTransformTranslate(transform, self.size.height, 0)
            transform = CGAffineTransformScale(transform, -1, 1)

    case UIImageOrientation.Up.rawValue: break
    case UIImageOrientation.Down.rawValue: break
    case UIImageOrientation.Left.rawValue: break
    case UIImageOrientation.Right.rawValue: break

    default: break
    }

    let bitmapInfo = CGImageGetBitmapInfo(self.CGImage)

    let ctx = CGBitmapContextCreate(nil, Int(self.size.width), Int(self.size.height), CGImageGetBitsPerComponent(self.CGImage), 0, CGImageGetColorSpace(self.CGImage),
        bitmapInfo.rawValue)

    CGContextConcatCTM(ctx, transform)

    switch self.imageOrientation {

    case UIImageOrientation.Left:
            CGContextDrawImage(ctx, CGRectMake(0, 0, self.size.height, self.size.width), self.CGImage)
    case UIImageOrientation.LeftMirrored:
            CGContextDrawImage(ctx, CGRectMake(0, 0, self.size.height, self.size.width), self.CGImage)
    case UIImageOrientation.Right:
            CGContextDrawImage(ctx, CGRectMake(0, 0, self.size.height, self.size.width), self.CGImage)
    case UIImageOrientation.RightMirrored:
            CGContextDrawImage(ctx, CGRectMake(0, 0, self.size.height, self.size.width), self.CGImage)

    default:
        CGContextDrawImage(ctx, CGRectMake(0, 0, self.size.width, self.size.height), self.CGImage)

    }

    let cgimg = CGBitmapContextCreateImage(ctx)
    let image = UIImage(CGImage: cgimg!)

    return image

    }
} 
```

# sql - 在同一查询中设置和分组依据

> ID：12784125
> 
> 赞同：0
> 
> 时间：2012-10-08T14:48:45.167
> 
> 标签：sql, sql-server-2008

我可以将“集合”与“分组依据”结合起来吗？

```
Column1  Column2  Column3  Column4
30       15        3 Sep
20       2         2 Sep 
```

更新后：

```
Column1   Column2   Column3    Column4
30        15        3 Sep      30/50+15/17
20        2         2 Sep      20/50+2/17 
```

我按整个 9 月对数据进行分组以计算总和：50 和 17 并使用它来更新同一查询中的 Column4。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:01:19.987

作为选择，您可以在 SQL Server 中使用窗口函数执行此操作：

```
select column1, column2, column3,
       (column1/(sum(1.0*column1) over ()) +
        column2/(sum(1.0*column2) over ()))
from t 
```

我包括了“1.0*”，因为 SQL Server 进行整数除法。您可能需要浮点除法。

# c# - 实体框架 AddObject 仅“插入”某些列

> ID：12784127
> 
> 赞同：4
> 
> 时间：2012-10-08T14:48:49.933
> 
> 标签：c#, entity-framework

我们有一个系统将使用相同的代码与不同的客户端数据库进行通信。这些数据库将使用相同的 EF 模型，但连接字符串不同。

我们的问题是，并非每个站点都将使用相同**版本**的数据库结构；有些可能缺少一些列或包含一些旧列。

如果我们将系统升级到当前版本，现在数据库模型现在有一个额外的`EmergencyContact`列。所有旧数据库现在都将失败，因为 EF 正在尝试插入此列（即使我们尚未为此属性设置值）。

有没有办法告诉 EF 在生成 INSERT INTO 查询时只使用我们有值的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:20:53.857

如果您的架构缺少真实数据库中的列，则 EF 会很好，但如果架构中有不在数据库中的列，EF 将无法正常工作，并且无法解决此问题。

您唯一的选择是为不同的数据库使用不同的模式，并编写管理它们的代码（即，仅实例化您需要的上下文版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:28:28.920

如果每个站点的持久层是唯一更改的部分，那么我会将您的 EF 模型提取到它自己的版本中，例如

```
DbV1.dll
DbV2.dll 
```

然后，您可以根据客户端的某些设置加载适当的 DLL，即您可以将信息作为自定义标头传递，例如

```
db-version: 1 
```

还有其他更可靠的方法，但是，我不知道您当前的设置如何，因此很难回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:56:39.137

如果您的模型与您的数据库架构不匹配，EF 只会插入/更新模型中的列。但是，如果未知列不为空，EF 将抛出异常。此外，如果您在未知列上创建了关系约束，当然不会创建这些约束，因为它们还不知道。

# unicode - BOM 是否用于 2 字节 Unicode 文本文件？

> ID：12784131
> 
> 赞同：0
> 
> 时间：2012-10-08T14:48:58.233
> 
> 标签：unicode, byte-order-mark

我知道 BOM 用于 UTF-8 文件，但是对于每个字符都是 2 字节的文本文件，我是否也应该向它们添加字节顺序标记？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:52:19.297

BOM 是为 UCS-2 和 UTF-16 发明的，后来才被 Microsoft（然后是 XML）用于 UTF-8。想想名字：'字节顺序标记'。UTF-8 只有一种可能的字节顺序，因此不需要 BOM 来显示顺序。相反，UTF-8 中 U+FEFF 的三字节序列已成为文件类型嗅探的 Unicode 签名。

但是，尽管 XML 标准中包含了 UTF-8 BOM，Java 中早期版本的 XML 支持对 UTF-8 BOM 的响应并不好。此外，不能简单地将具有 BOM 的文件连接到另一个文件，因为 U+FEFF 不是文件中间的 BOM；它是 ZWNBSP。

# oracle - 如何在视图内通过 UNION ALL 强制推送谓词？

> ID：12784132
> 
> 赞同：4
> 
> 时间：2012-10-08T14:49:12.453
> 
> 标签：oracle, predicate, union-all

我在 UNION ALL 视图上遇到性能问题。这个问题可以通过在两个单独的视图中重写视图来解决，但这违背了创建视图的目的。

这是一个简单的测试用例（Oracle 11.2.0.3.0）。真正的查询使用大约 10 个不同的表，而不仅仅是 3 个。

```
CREATE TABLE t0 (id number, ref_id number);
CREATE INDEX i0 on t0(id);
CREATE TABLE t1 (id number, amount number);
CREATE INDEX i1 on t1(id);
CREATE TABLE t2 (id number, amount number);
CREATE INDEX i2 on t2(id);

insert into t0 select rownum, rownum * 10 from dual connect by rownum <= 100000;
insert into t1 select rownum, rownum * 10 from dual connect by rownum <= 100000;
insert into t2 select rownum, rownum * 10 from dual connect by rownum <= 100000;

CREATE OR REPLACE VIEW v2
AS
SELECT id, sum(amount) AS total_amount
FROM t1
GROUP BY id;

CREATE OR REPLACE VIEW v3
AS
SELECT id
      ,sum(amount) as total_amount
FROM (SELECT id, amount
      FROM t1
      UNION ALL
      SELECT id, amount
      FROM t2)
GROUP BY id
HAVING sum(amount) <> 0
;

CREATE OR REPLACE view v1
AS
SELECT *
FROM v2
UNION ALL
SELECT *
FROM v3; 
```

以下查询使用 766 次获取。添加 push_pred(a) 对它没有任何作用。

```
select --+ first_rows
*
from t0, v1 a
where t0.ref_id = a.id
  and t0.id = 1; 
```

下一个查询在 16 get 处触底，尽管它与第一个查询做同样的事情，只是扫描 t0 两次而不是一次。

```
select --+ first_rows
*
from t0, v2
where  t0.ref_id = v2.id
  and t0.id = 1
union all
select *
from t0, v3
where  t0.ref_id = v3.id
  and t0.id = 1; 
```

我错过了什么？

# c++ - 为什么不创建实例就不能使用多态类

> ID：12784135
> 
> 赞同：0
> 
> 时间：2012-10-08T14:49:18.163
> 
> 标签：c++, oop, polymorphism

> **可能重复：**
> [通过 NULL 类指针调用类方法](https://stackoverflow.com/questions/2505328/calling-class-method-through-null-class-pointer)

面试时被问到这个问题，有人能回答吗？

```
#include<string>
#include<iostream>
#include <stdio.h>

using namespace std;

class A
{
int k;
public:
     void f1()
    {

     int i;
     printf("1");

    }

     void f2()
    {

     k = 3;
     printf("3");

    }

};
class B
{
int i;
public:
    virtual void f1()
    {
    printf("2");
    scanf("%d",&i);
    }

};

int main()
{
    A* a = NULL;
    B* b = NULL;

    a->f1(); // works why?(non polymorphic)
    b->f1(); // fails why?(polymorphic)
            a->f2(); //fails why?
} 
```

最后两种情况属于多态类。第一种情况是普通类。我知道，如果我在 A 的 f1 中访问 i ，它将再次给出运行时异常。但我不明白为什么会这样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:06:55.540

我同意其他帖子的观点，即这是未定义的行为，这意味着在执行程序时可能发生任何事情，包括“做正确的事”。

现在，让我们看看调用是如何实现的：

`a->f1()`是一个普通的方法调用（非虚拟）。大多数编译器将以与以下代码类似的方式编译它：

```
 class A { int i; }
    void f1(A* a) { int i; printf("1"); } 
```

这意味着 this 指针实际上像函数的参数一样被处理（实际上，经常有一些关于如何处理 this 指针的优化，但这在这里无关紧要）。现在，由于 f1 不使用 this 指针，因此它为 null 的事实不会导致崩溃。

`a->f2()`实际上会崩溃，因为它使用了 this 指针：它更新了`this->k`.

调用`b->f1()`是一个虚函数调用，这通常使用虚拟表查找来实现，如`b->vtable[0]()`. 由于 b 为空，读取虚拟表的取消引用崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:51:57.317

```
a->f1();
b->f1();
a->f2(); 
```

在所有这三种情况下，您都在引用指向 NULL 的指针，即它不指向对象。这构成**了未定义的行为**。它们可能纯属偶然，但你不能依赖它。试图弄清楚为什么一个版本可能工作也没有多大意义。未定义的行为意味着任何事情都可能发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T14:59:49.833

从技术上讲，这都是未定义的行为。因此，如果没有更多背景（编译器，使用的设置），这将是正确的答案。

我不相信这是他们期望听到的。

鉴于通常以这种方式在内部翻译成员函数调用（故意简化）：

```
class A {
    void foo(int x) {}  // compiler creates function void A_foo(A* this, int x) {}
};

A a;
a.foo(5); // compiler calls A_foo(&a, 5); 
```

但是虚拟功能的情况有所不同。这里不解释[虚拟调度](http://en.wikipedia.org/wiki/Virtual_method_table)的原理，简单起见——最终调用的函数取决于对象的*动态类型*。如果对象不存在，程序就无法知道调用什么函数。

至于你`a->f2()`失败的原因。想象一下这个功能`A_f2(A* this)`。在您内部访问 A 的成员`k`。这将在我的简化编译器中被翻译成`this->k = 3`. 但在实际调用`this`中是一个空指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:06:09.343

所有三个示例都会导致未定义的行为，因此这是非常特定于实现的，并且不能保证在所有编译器上都具有相同的行为。

实现虚函数的一种常见方法是在类的开头添加指向函数指针表的指针。每当调用虚函数时，程序都会跟随 this 指针并在表中查找以确定调用哪个函数。由于在空指针的示例中，它正在查看该指针的无效地址，这会导致运行时错误。

调用非虚函数时，编译器已经知道要调用什么函数，所以可以直接插入对该函数的调用；不必访问对象来确定调用哪个函数。因此，如果函数本身不访问对象，则函数调用将永远不会导致通过空指针进行访问，因此不会导致运行时错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T14:50:55.210

在某种程度上，这三种情况都没有“起作用”。但另一方面，这三种情况都“有效”。

它们都有未定义的行为，因为它们都通过空指针执行间接操作。

> 我知道如果我在 A 的 f1 中访问 i 它会再次给出运行时异常

也许，也许不是。未定义的行为是未定义的，所以任何事情都可能发生。

# c - 可靠地确定数组中的元素个数

> ID：12784136
> 
> 赞同：16
> 
> 时间：2012-10-08T14:49:29.910
> 
> 标签：c, arrays, pointers, assert, sizeof

每个 C 程序员都可以使用这个众所周知的宏来确定数组中元素的数量：

```
#define NUM_ELEMS(a) (sizeof(a)/sizeof 0[a]) 
```

这是一个典型的用例：

```
int numbers[] = {2, 3, 5, 7, 11, 13, 17, 19};
printf("%lu\n", NUM_ELEMS(numbers));          // 8, as expected 
```

然而，没有什么能阻止程序员意外地传递一个指针而不是一个数组：

```
int * pointer = numbers;
printf("%lu\n", NUM_ELEMS(pointer)); 
```

在我的系统上，这会打印 2，因为显然，指针是整数的两倍。想了想如何防止程序员误传指针，找到了解决办法：

```
#define NUM_ELEMS(a) (assert((void*)&(a) == (void*)(a)), (sizeof(a)/sizeof 0[a])) 
```

这是有效的，因为指向数组的指针与指向其第一个元素的指针具有相同的值。如果您改为传递指针，则该指针将与指向自身的指针进行比较，这几乎总是错误的。（唯一的例外是递归 void 指针，即指向自身的 void 指针。我可以忍受。）

意外传递指针而不是数组现在会在运行时触发错误：

```
Assertion `(void*)&(pointer) == (void*)(pointer)' failed. 
```

好的！现在我有几个问题：

1.  我`assert`作为逗号表达式的左操作数的用法是有效的标准 C 吗？也就是说，标准是否允许我`assert`用作表达式？对不起，如果这是一个愚蠢的问题:)

2.  检查可以在编译时以某种方式完成吗？

3.  我的 C 编译器认为这`int b[NUM_ELEMS(a)];`是一个 VLA。有什么办法让他不信吗？

4.  我是第一个想到这个的吗？如果是这样，我能指望有多少处女在天堂等着我呢？:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T15:01:33.797

> 我使用assert 作为逗号表达式的左操作数是有效的标准C 吗？也就是说，标准是否允许我使用 assert 作为表达式？

是的，它是有效的，因为逗号运算符的左操作数可以是 type 的表达式`void`。并且`assert`函数有`void`作为它的返回类型。

> 我的 C 编译器认为 int b[NUM_ELEMS(a)]; 是一个 VLA。有什么办法让他不信吗？

它相信是因为逗号表达式的结果永远不是常量表达式（例如，1, 2 不是常量表达式）。

**EDIT1：**在下面添加更新。

我有另一个版本的宏，它在编译时工作：

```
#define NUM_ELEMS(arr)                                                 \
 (sizeof (struct {int not_an_array:((void*)&(arr) == &(arr)[0]);}) * 0 \
  + sizeof (arr) / sizeof (*(arr))) 
```

这似乎也适用于具有静态存储持续时间的对象的初始化程序。它也适用于您的示例`int b[NUM_ELEMS(a)]`

**编辑2：**

解决[@DanielFischer 的](https://stackoverflow.com/users/1011995/daniel-fischer)评论。上面的宏只适用于`gcc` *without ，* `-pedantic`因为`gcc`accept ：

```
(void *) &arr == arr 
```

作为一个整数常量表达式，而它认为

```
(void *) &ptr == ptr 
```

不是整数常量表达式。根据C，它们都不是整数常量表达式，并且在这两种情况下`-pedantic`都`gcc`正确发出诊断。

据我所知，没有 100% 可移植的方式来编写这个`NUM_ELEM`宏。C 有更灵活的初始化常量表达式规则（参见 C99 中的 6.6p7），可以利用这些规则来编写这个宏（例如使用`sizeof`和复合文字），但在块范围内，C 不需要初始化常量表达式，因此它不会可以有一个适用于所有情况的宏。

**编辑3：**

我认为值得一提的是，Linux 内核有一个`ARRAY_SIZE`宏 (in `include/linux/kernel.h`)，它在执行 sparse（内核静态分析检查器）时实现这样的检查。

他们的解决方案不可移植，并且使用了两个 GNU 扩展：

*   `typeof`操作员
*   `__builtin_types_compatible_p`内置函数

基本上它看起来像这样：

```
#define NUM_ELEMS(arr)  \
 (sizeof(struct {int :-!!(__builtin_types_compatible_p(typeof(arr), typeof(&(arr)[0])));})  \
  + sizeof (arr) / sizeof (*(arr))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T15:00:47.790

1.  是的。逗号运算符的左表达式始终被评估为 void 表达式 (C99 6.5.17#2)。因为`assert()`是一个空表达式，所以开始没有问题。
2.  也许。虽然 C 预处理器不知道类型和强制转换并且无法比较地址，但您可以使用与在编译时评估 sizeof() 相同的技巧，例如声明一个数组，其维度是布尔表达式。当为 0 时，它是违反约束的，必须发出诊断。我在这里尝试过，但到目前为止还没有成功……也许答案实际上是“不”。
3.  不。（指针类型的）强制转换不是整数常量表达式。
4.  可能不是（这些天在阳光下没有什么新鲜事）。不确定性别的处女的数量不确定:-)

# android - Android webview不播放视频，jwembedder

> ID：12784137
> 
> 赞同：5
> 
> 时间：2012-10-08T14:49:32.610
> 
> 标签：android, webview, html5-video, jwplayer, android-video-player

我有这个问题：我正在一个示例 android 2.2 (API 8) 项目中测试这个脚本。
当我在设备或模拟器上运行我的应用程序时，WebView 会显示视频，但如果我点击播放，应用程序不会播放它：视频全黑。
如果我将脚本放在服务器中的 .html 文件中，然后从本地浏览器打开它，在**同一部**智能手机中，视频已加载并可播放！！！
我知道该脚本使用 jwEmbedder 应该动态创建一个 html5 标签 "video" 。

我已经做了很多尝试来解决这个问题，现在我不知道该怎么办。我只认为我的 WebView 在我播放视频时没有启动本机视频应用程序的权限或能力......

**SenapeLuz.java**（主要活动）

```
public class SenapeLuz extends Activity {
    private WebView mWebView;
    final Activity activity = this;

    // private Button b;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_senape_luz);
        mWebView = (WebView) findViewById(R.id.webView1);
        mWebView.getSettings().setPluginsEnabled(true);
        mWebView.getSettings().setPluginState(PluginState.ON);
        mWebView.getSettings().setSupportMultipleWindows(true);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        mWebView.getSettings().setDomStorageEnabled(true);
        mWebView.setWebChromeClient(new WebChromeClient());

        mWebView.loadUrl("file:///android_asset/Senape.html");
    }
} 
```

**Senape.html**（脚本）

```
<script type="text/javascript" src="http://platform.senape.tv/widget/video.action?v=1.0&key=ZD9L6ZHH5B60&rid=I95EE9HL0LNP"></script> 
```

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.prove.senape"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-permission android:name="android.permission.INTERNET" />
        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".SenapeLuz"
                android:label="@string/title_activity_senape_luz" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T08:39:38.170

关于您为什么使用 webview 播放视频，我有几个问题要问您。我[发现本教程](http://developer.appcelerator.com/question/134684/playing-video-thru-android-webview)将特定视频嵌入到 web 视图中，它还为您提供了一些播放它的控件。

您是否有必要从位置下载/播放视频？为什么不将视频包含在应用程序本身中？有很多教程，但[我用过很多的是这个](http://www.edumobile.org/android/android-beginner-tutorials/how-to-play-a-video-file/)

另一个问题是：html 文件中还包含什么？您是否希望在应用程序中使用外部 html 文件来获取更多信息和格式，或者只是想寻找一种播放视频的方法？

如果内存是一个问题，媒体控制器设备有[许多](http://www.java2s.com/Code/Android/Media/VideoViewDemo.htm)从[外部视频文件工作的实现。](https://stackoverflow.com/questions/4200011/video-streaming-and-android)当前示例中的一个优势是您只希望流式传输单个特定视频。

希望有帮助。

# java - jtable中不能显示多个搜索结果

> ID：12784143
> 
> 赞同：1
> 
> 时间：2012-10-08T14:49:58.180
> 
> 标签：java, swing, search, jtable

我一直试图让我的搜索结果出现在 jtable 中。现在我已经能够显示数据库中只有一个变体的代码的结果。但是数据库中的一些代码有不止一种变体。例如 034\OT\01 或 034\CT\01 或 034\OT\04。现在，如果您输入搜索 034，则 jtable 不会显示任何内容。如果只有一行，例如 400，它会在数据库中显示一个代码和所有详细信息。

我在下面添加了我的搜索代码。希望你能帮忙:)。

```
try {
String sql = "SELECT * FROM nameOfDatabase WHERE code LIKE ?";

pst=conn.prepareStatement(sql);
pst.setString(1, txt_search.getText());

rs=pst.executeQuery();
table_details.setModel(DbUtils.resultSetToTableModel(rs));

} catch (Exception e) {
JOptionPane.showMessageDialog(null, e);
} 
```

# jquery - 点击时更改 img src

> ID：12784144
> 
> 赞同：14
> 
> 时间：2012-10-08T14:49:59.657
> 
> 标签：jquery, image, src

我在论坛中搜索了一个特定问题，但我找到的所有解决方案都不适用于我的问题。

我在左侧有一个图像。在右边，我有不同的词。因此，当我单击特定名称时，我希望图片更改为我的图像文件夹中的任何图片。基本上，我希望图像的来源发生变化。这是我的索引的代码：

```
<div id="picture_here">
     <img src="images/mtkili.png" id="picture"/>
</div>

<div id="about">
     <div id="mtl">Mtl</div>
</div>

<div id="about_2">
     <div id="contact">SF</div>
</div> 
```

这是我尝试过的两个 jquery 公式：

```
$('#mtl').click(function(){
    $('#picture').attr()({
        'src':'images/short.png'
    })          
}) 
```

和：

```
$('#mtl').click(function(){
   $('#picture').attr('src', 'images/short.png');
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T14:56:06.250

你的第二次尝试是正确的。这是工作的 jsFiddle：http: [//jsfiddle.net/MEHhs/](http://jsfiddle.net/MEHhs/)

所以代码应该是：

html:

```
<div id="picture_here">
     <img src="http://www.sbtjapan.com/img/FaceBook_img.jpg" id="picture"/>
</div>

<div id="about">
     <div id="mtl">Mtl</div>
</div>

<div id="about_2">
     <div id="contact">SF</div>
</div>​ 
```

js：

```
$('#mtl').click(function(){
    $('#picture').attr('src', 'http://profile.ak.fbcdn.net/hprofile-ak-ash3/41811_170099283015889_1174445894_q.jpg');
    }); 
```

我添加了一些在谷歌上找到的现有图片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T14:54:44.237

**[jsBin 演示](http://jsbin.com/ahokax/1/edit)**

*   为所有触发器添加一个类
*   创建名为：`mtl.png`和`contact.png`

并使用：

```
<div>
     <div class="button" id="mtl">Mtl</div>
</div>
<div>
     <div class="button" id="contact">SF</div>
</div> 
```

```
$('.button').click(function(){
   var idToSRC = 'images/'+ this.id +'.png';
   $('#picture').attr('src', idToSRC);
}); 
```

* * *

虽然上述内容对用户不友好，因为在加载新图像时会有一些延迟......
**更好的方法**是使用单个（所谓的）*精灵*图像，包含所有想要的图像，将其设置为 DIV 背景图像和单击时更改该DIV的“背景位置”！

# **[使用精灵演示 2](http://jsbin.com/ahokax/4/edit)**

将所需的 -left 位置存储到数据属性中：

```
<div id="picture"></div>
<div>
     <div class="button" data-bgpos="68" id="mtl">Mtl</div>
</div>
<div>
     <div class="button" data-bgpos="100" id="contact">SF</div>
</div> 
```

CSS：

```
#picture{
  width:25px;
  height:25px;
  background:url(/images/sprite.png) no-repeat;
} 
```

检索该数据并移动 packgroundPosition：

```
$('.button').click(function(){
  var bgpos = $(this).data('bgpos');
  $('#picture').css({backgroundPosition: -bgpos+' 0'})
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T14:56:14.357

对于第二个版本，一切看起来都不错，确保将 DOM 调用包装在文档就绪函数中，该函数可以写成...

```
$(document).ready(function() {
    ...
}); 
```

或者...

```
$(function() {
    ...
}); 
```

所以你得到...

```
$(function() {
    $('#mtl').click(function(){
        $('#picture').attr('src', 'images/short.png');
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-15T07:36:35.273

无需将事件侦听器添加到每个链接类，您只需将其用作任何链接上的内联函数

```
function changeurl(theurl){
    $('.myimage').attr('src', theurl);
} 
```

[https://jsfiddle.net/rabiee3/ftkuub3j/](https://jsfiddle.net/rabiee3/ftkuub3j/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T15:11:23.800

第二个工作正常，但您必须使用显式路径而不是相对路径：

```
$('#mtl').click(function(){
$('#picture').attr('src', '/images/short.png');
}); 
```

# facebook - OAuth 2 哈希安全漏洞

> ID：12784147
> 
> 赞同：2
> 
> 时间：2012-10-08T14:50:10.020
> 
> 标签：facebook, oauth-2.0

[此页面](https://developers.facebook.com/docs/authentication/server-side/)说明当用户完成 OAuth 2 登录并使用访问代码重定向到您的站点时，`#_=_`将附加到重定向 URL。

根据网站：

> 哈希片段附加到您的 URL 以防止安全漏洞。

谁能解释一下？我看不出它会如何影响任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T17:48:23.693

这样做是为了删除 URL 中可能*已经*存在的任何片段，因为在任何规范中都没有指定重定向期间的行为。这反过来又是为了防止在 url 中传递到 Facebook 域上的端点的信息泄漏到重定向到的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T10:08:23.853

# 标记后显示的 URL 信息不会发送到代理服务器等，也不会记录在 Web 服务器日志文件中。原因是这些信息不会发送到服务器，但可供网站访问（例如，通过 JavaScript）。

# ruby-on-rails - 如何检测该用户将被认证？（认证前）

> ID：12784151
> 
> 赞同：0
> 
> 时间：2012-10-08T14:50:21.587
> 
> 标签：ruby-on-rails, devise, warden

我需要在设计将用户重定向到登录页面之前触发回调，可能是因为`authenticate_user!`方法检测到他没有登录。类似的东西：

```
before_filter :authenticate_user!, :only => :edit

def not_authenticated_callback
  # do something
end 
```

如果尚未调用，则不应调用它`authenticate_user!`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:50:31.770

我找到了一个丑陋的解决方案：

```
around_filter :intersect_warden

def intersect_warden
  success = false
  result = catch(:warden) do
    result = yield
    success = true
    result
  end

  unless success
    not_authenticated_callback
    throw(:warden, result)
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T14:55:07.430

在使用**before_filter 时：authenticate_user！**，如果用户未登录，该操作将不会进入您的控制器。

如果您使用 before_filter，当用户未登录时，您将无法访问控制器内的任何功能。

# windows - Windows 上是否有适用于 Node.js 的 node-waf？

> ID：12784161
> 
> 赞同：4
> 
> 时间：2012-10-08T14:51:10.367
> 
> 标签：windows, node.js, npm, waf

我正在尝试使用以下命令从 Node.js 安装“png”模块：

npm安装png

但是我收到以下错误：

> node-waf 配置构建

'node-waf' 未被识别为内部或外部命令

我的问题是：windows 有 node-waf 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:55:04.680

从 Node 0.8 开始，waf 构建系统已被**移除**并替换为跨平台[node-gyp](https://github.com/TooTallNate/node-gyp)。

要让 gyp 在 Windows 上运行，您需要[Python 2.7](http://www.python.org/download/releases/2.7.3#download)和[MS Visual C++](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-cpp-express)（对于 x64 版本，需要[Win 7 x64 SDK](http://www.microsoft.com/download/en/details.aspx?displayLang=en&id=8279)）。

当然，拥有 gyp 并不能帮助您安装所需的特定软件包（因为它使用 waf）。通常，您必须让项目的维护者升级到新的构建系统，或者分叉并自己修复它（这并不[难](https://github.com/TooTallNate/node-gyp#the-bindinggyp-file)）。

然而，看起来 node-png 的作者实际上已经在[GitHub repo](https://github.com/pkrumins/node-png)中添加了 gyp 绑定，但还没有将这些更改推送到 npm（也许它们还没有工作）。您可以尝试克隆 repo 并查看是否可以构建它。

# java - 文件选择器 Android 强制关闭错误

> ID：12784165
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:51:20.700
> 
> 标签：java, android, android-intent

我正在编写 android 应用程序，我可以在其中将文件添加到我的共享文件夹中。

这是我打开对话框的代码（用于文件浏览）

```
 Intent pickFileIntent = new Intent();
  pickFileIntent.setAction(Intent.ACTION_GET_CONTENT);
  pickFileIntent.addCategory(Intent.CATEGORY_OPENABLE);
  pickFileIntent.setType("*/*");
  Intent chooserIntent = Intent.createChooser(pickFileIntent,
  getText(R.string.choosefile_title));
  //Toast.makeText(FileShare.this, "",1).show();
  startActivityForResult(chooserIntent, PICK_FILE_REQUEST); 
```

它适用于图像和其他 mp3 文件。但是当我点击文件浏览器时，它给了我错误。以下是文件浏览器和logcat的代码

```
 public void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            /* If no data is supplied, get default from the FileProvider */
            if (getIntent().getData() == null) {
              getIntent().setData(FileProvider.CONTENT_URI);
            }
            String currentPath = FileProvider.getPath(getIntent().getData());

            /* Special case for "/". Wouldn't need this is we have a class to 
             * do path joining for us */
            if (currentPath.equals("/"))
              currentPath = "";
           mPaths.push(currentPath);

            /* Populate list with the root content */
        //Error in following line when i debug
            Cursor c = managedQuery(getIntent().getData(), null, null, null, null);
            changeCursor(c);
            registerForContextMenu(getListView());
          } 
```

LOGCAT

```
 10-08 19:18:55.867: E/AndroidRuntime(16386): FATAL EXCEPTION: main
        10-08 19:18:55.867: E/AndroidRuntime(16386): java.lang.RuntimeException: Unable
        to start activity   
                  ComponentInfo{com.fyp.fileshare/com.fyp.fileshare.FileBrowser}:                                                 
        java.lang.ClassCastException: java.lang.Integer
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at             
        android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.os.Handler.dispatchMessage(Handler.java:99)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.os.Looper.loop(Looper.java:130)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.ActivityThread.main(ActivityThread.java:3687)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.lang.reflect.Method.invokeNative(Native Method)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at             
        java.lang.reflect.Method.invoke(Method.java:507)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at dalvik.system.NativeStart.main(Native Method)
        10-08 19:18:55.867: E/AndroidRuntime(16386): Caused by: java.lang.ClassCastException: java.lang.Integer
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.fyp.fileshare.FileProvider$1.compare(FileProvider.java:103)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.fyp.fileshare.FileProvider$1.compare(FileProvider.java:1)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.util.TimSort.countRunAndMakeAscending(TimSort.java:320)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.util.TimSort.sort(TimSort.java:199)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.util.TimSort.sort(TimSort.java:169)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.util.Arrays.sort(Arrays.java:2090)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at java.util.Collections.sort(Collections.java:1965)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.fyp.fileshare.FileProvider.getCursorForFiles(FileProvider.java:101)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.fyp.fileshare.FileProvider.query(FileProvider.java:60)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.content.ContentProvider$Transport.query(ContentProvider.java:187)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.content.ContentResolver.query(ContentResolver.java:262)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.Activity.managedQuery(Activity.java:1550)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at com.fyp.fileshare.FileBrowser.onCreate(FileBrowser.java:68)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
        10-08 19:18:55.867: E/AndroidRuntime(16386):    ... 11 more 
```

#100 中的行：

```
100// Sort listing by display name. 
101 Collections.sort(fileList, new Comparator<Object[]>() { 
102 public int compare(Object[] r1, Object[] r2) { 
103 return ((String) r1[1]).compareTo((String) r2[2]); } }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:58:28.227

问题是 return ((String) r1[1]).compareTo((String) r2[2]); 其中一个不是字符串

回答者：njzk2

# jquery-mobile - 无法在 ASP.NET MVC 4 应用程序中捆绑 JQuery Mobile 1.2

> ID：12784170
> 
> 赞同：0
> 
> 时间：2012-10-08T14:51:42.943
> 
> 标签：jquery-mobile, asp.net-mvc-4, asp.net-optimization

我正在开发一个 ASP.NET MVC 4 应用程序。此应用程序利用捆绑来提高性能。以前，该应用程序使用 jquery.mobile-1.1.0.js。一切正常。但是，我已经升级到 JQuery Mobile 1.2，当我加载我的屏幕时，我总是看到一个等待微调器。我已经指出了标准和缩小版本都被引用的事实。当我在页面加载后查看我的视图源时，我在顶部看到以下内容：

```
<script src="/Scripts/jquery.mobile-1.2.0.js"></script>
<script src="/Scripts/jquery.mobile-1.2.0.min.js"></script> 
```

据我所知，这是从我的 ASP.NET MVC .cshtml 文件中的以下内容生成的

```
@Scripts.Render("~/bundles/jquerymobile") 
```

在我的 BundleConfig.cs 文件中，我有以下定义：

```
bundles.Add(new ScriptBundle("~/bundles/jquerymobile").Include("~/Scripts/jquery.mobile*")); 
```

本质上，当我的 web.config 编译设置中设置了 debug="true" 标志时，我想使用普通版本。但是，当 debug="false" 时，我想使用缩小版。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:12:51.363

这应该已经为您自动发生（假设文件扩展替换列表仍然具有启用优化时的默认“min”条目）。

作为一种解决方法，您可以尝试这样做，这也应该有效：

```
.Include("~/Scripts/jquery.mobile-{version}.js")); 
```

这基本上与您的 * 类似，只是它将正则表达式匹配版本字符串。请注意，这和您所拥有的都要求您的 Scripts 文件夹中只有最新的 jquery，如果您仍然有 1.1 版本，那么您最终会在页面中同时拥有这两个版本。

# forms - 如何从错误案例中提取隐藏字段

> ID：12784173
> 
> 赞同：0
> 
> 时间：2012-10-08T14:51:58.020
> 
> 标签：forms, scala, playframework, field, hidden

我正在使用带有 Scala 的 Play 2.0，我想提取一些存储在隐藏字段中的值。

**控制器中的表格：**

```
 val recommendationForm: Form[Recommendation] = Form(
        mapping(
          "fromMail" -> email,
          "fromName" -> nonEmptyText(5, 30),
          "toMail" -> email,
          "toName" -> nonEmptyText(5, 30),
          "message" -> optional(text(0, 300)),
          "productGroupId" -> nonEmptyText(),
          "masterProductId" -> nonEmptyText()
        )
        (Recommendation.apply)(Recommendation.unapply)
      )

def doRecommend = xyzAction {  implicit request =>
    recommendationForm.bindFromRequest.fold(
      errors => {
        errors.data.map(x => println(x))
        BadRequest("")
      },
      {
        case (recommendation) => {
        Ok("")
        }
      }
    )
  } 
```

**推荐案例类：**

```
case class Recommendation(fromMail: String, fromName: String, toMail: String, toName: String, message: Option[String], productGroupId: String, masterProductId: String) 
```

**的HTML：**

```
 @form(action = routes.Product.doRecommend) {

              <input type="hidden" value="@{(productGroup \ "@id").text}" />
              <input type="hidden" value="@{(currentMasterProduct \ "@id").text}" />

    @inputText(field = recommendationForm("fromName"),
                        '_label -> "",
                        'placeholder -> Messages("recommendation.from.name"),
                        '_showConstraints -> false,
                        'class -> "text ui-widget-content ui-corner-all"
                        )

some more fields...
} 
```

**生成的隐藏字段 HTML：**

```
<input type="hidden" value="74.75.652"> 
```

但我无法从错误中提取这两个隐藏字段。它只打印其他五个。如何提取隐藏的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:36:00.160

我所要做的就是给输入字段一个名称属性......

```
<input type="hidden" value="@{(productGroup \ "@id").text}" name="@recommendationForm("productGroupId").name" /> 
```

# android - Phonegap 添加联系人默认类型“工作”更改为“其他”

> ID：12784176
> 
> 赞同：2
> 
> 时间：2012-10-08T14:52:09.883
> 
> 标签：android, email, cordova, contacts

我目前正在将 phonegap 联系人用于 android 设备 4.1 Xoom 平板电脑。

一切正常，除了当我将“工作”作为电子邮件的 ContactField 构造函数中的类型并保存时，它保存为“其他”。我尝试使用“家”，它保存为家。

我有另一段代码可以更新联系人，第二次它确实保存了“工作”电子邮件。

添加电子邮件的代码是相同的，所以我不确定为什么它没有第一次保存。

谢谢！

# linux - Mutex 的获取和释放顺序是什么？

> ID：12784182
> 
> 赞同：2
> 
> 时间：2012-10-08T14:52:32.843
> 
> 标签：linux, kernel, mutex

我知道 Mutex 的功能。但现在我对它的时机感到困惑。我特别指的是 Linux 内核代码。

例如，我们有 3 个线程（假设它们在同一个处理器上，并且都是具有相同优先级的普通任务）。线程 1 ,2 和 3 尝试获取 Mutex，只有线程 1 得到它。线程 2 和 3 被阻塞并进入睡眠状态。然后线程 1 完成了他的工作并解锁了互斥锁。

所以这是我的问题：此时此刻，会发生什么？线程 1 会因为它的预定时间片没有用完而继续执行吗？还是线程 2 会立即获取锁并开始执行，因为它是第二个想要获取锁的线程？或者线程 3 会立即获取锁并开始执行，因为它被假定从任务调度程序中运行（假设这个）？会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:59:29.933

一旦线程 1 释放锁，接下来发生的事情是*不确定的*。您上面概述的任何情况都是可能的。

如果您的应用程序需要线程之间非常特定的顺序，那么您可能希望尝试让线程之间更明确地通信。在 C 中，您可以使用`pipe()`.

一般来说，如果你接受混乱并让调度程序选择，性能最好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:00:31.047

线程 1 完成工作后，他将 MUTEX 还给其他人，然后进入睡眠状态。

# objective-c - 类似设置的 NSString 对象数组

> ID：12784186
> 
> 赞同：0
> 
> 时间：2012-10-08T14:52:50.830
> 
> 标签：objective-c

我只是从 Objective-C 开始，我仍然很难做一些非常基本的事情。这就是我想要实现的目标 - 我需要创建一个类来保存我的应用程序的所有静态数据，我猜这些数据可以用许多 NSString ** 数组来表示，例如这个：

```
NSString *animalNames[NUM_ANIMALS] = {@"fox", @"wolf", @"elephant", @"giraffe"}; 
```

我希望能够从我的应用程序的任何位置以静态方式访问这些数组。像这样的东西：

```
StaticData.animalNames[1] 
```

就@property、@interface、@synthesize 和所有这些东西而言，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:05:09.000

> 我需要创建一个类来保存我的应用程序的所有静态数据

这是您正在谈论的示例。这是一个基本的单例类，其中包含动物的静态数组。

```
#import <Foundation/Foundation.h>

@interface Foo:NSObject
+ (id)sharedFoo;
- (NSArray *)animals;
@end

@implementation Foo

static NSArray *animals;

+ (void)initialize {
    animals = [NSArray arrayWithObjects:@"fox",@"wolf",@"giraffe",@"liger",nil];
}

+ (id)sharedFoo {
    static dispatch_once_t pred;
    static Foo *cSharedInstance = nil;

    dispatch_once(&pred, ^{ cSharedInstance = [[Foo alloc] init]; });
    return cSharedInstance;
}

- (NSArray *)animals {
    return animals;
}

@end

int main(int argc, char *argv[]) {
    NSLog(@"Animals = %@",[[Foo sharedFoo] animals]);

} 
```

此应用程序将以下内容记录到控制台：

> 2012-10-08 10:01:46.814 无标题[77085:707] 动物 =（狐狸、狼、长颈鹿、狮虎）

编辑：

如果您喜欢点语法/属性表示法，您可以在类接口中实现以下内容：

```
@property (readonly) NSArray *animals; 
```

这会让你写：

```
[Foo sharedFoo].animals 
```

等等

# xslt - XSLT 标记节点集

> ID：12784190
> 
> 赞同：3
> 
> 时间：2012-10-08T14:53:12.860
> 
> 标签：xslt, tokenize

我正在尝试创建一个变量，该变量以 init cap 形式存储输入字符串 (TypeInput) 的值。这个新变量将在我的样式表的不同位置使用。我创建了一个模板，我调用它来将输入字符串转换为 init cap 形式。但是，当我运行样式表时，生成的变量 TypeInputInitCap 在调试器中显示为 NodeSet(1) 并且不会在我的输出中输出文本。任何想法为什么？请参阅下面的示例。

```
<xsl:variable name="TypeInputInitCap">
    <xsl:call-template name="ConvertToInitCapString">
        <xsl:with-param name="str" select="$TypeInput"></xsl:with-param>
    </xsl:call-template>    
</xsl:variable>

<xsl:template name="ConvertToInitCapString">
    <xsl:param name="str"></xsl:param>        
    <!-- Extract each component of the name delimited by . -->
    <xsl:variable name="TokenNodeSet">
        <xsl:for-each select="tokenize($str, '.')">
            <!-- Init cap each component -->
            <xsl:value-of select="concat(upper-case(substring(.,1,1)), lower-case(substring(.,2)))"></xsl:value-of>
        </xsl:for-each>
    </xsl:variable>
    <xsl:for-each select="$TokenNodeSet">
        <xsl:value-of select="."></xsl:value-of>
        <xsl:if test="not(last())">
            <xsl:text>.</xsl:text>
        </xsl:if>
    </xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:02:42.787

我认为问题在于该`$TokenNodeSet`变量仅包含一个字符串，因此第二个`for-each`仅循环一次。

不如这样做：

```
<xsl:template name="ConvertToInitCapString"> 
  <xsl:param name="str"></xsl:param>         
  <xsl:for-each select="tokenize($str, '\.')"> 
    <xsl:value-of select="concat(upper-case(substring(.,1,1)), lower-case(substring(.,2)))"/> 
    <xsl:if test="not(last())"> 
        <xsl:text>.</xsl:text> 
    </xsl:if> 
  </xsl:for-each> 
```

**编辑**

`tokenize()`按照 LarsH 在评论中的建议修复了上面的调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:11:47.723

感谢你的帮助。我的模板中的第二部分不是必需的，所以我现在使用这个版本，它可以工作。它重新添加了一个“。” 标记之间的字符。（我没有使用这个线程中建议的短版本，因为如果连接起来，我会在最后加上一个额外的点。）：

```
<xsl:template name="ConvertToInitCapString">
    <xsl:param name="str" select="."></xsl:param>        
    <!-- Extract each component of the name delimited by . -->
    <xsl:for-each select="tokenize($str, '\.')">
        <!-- Init cap each component -->
        <xsl:value-of select="concat(upper-case(substring(.,1,1)), lower-case(substring(.,2)))"></xsl:value-of>                
        <xsl:if test="position() != last()">
            <xsl:value-of select="'.'"></xsl:value-of>
        </xsl:if>
    </xsl:for-each>                              
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:56:15.863

我会替换

```
<xsl:variable name="TokenNodeSet">
    <xsl:for-each select="tokenize($str, '.')">
        <!-- Init cap each component -->
        <xsl:value-of select="concat(upper-case(substring(.,1,1)), lower-case(substring(.,2)))"></xsl:value-of>
    </xsl:for-each>
</xsl:variable> 
```

和

```
<xsl:variable name="TokenNodeSet" select="for $token in tokenize($str, '\.') return concat(upper-case(substring($token,1,1)), lower-case(substring($token,2)))" /> 
```

或者更好的是

```
<xsl:variable name="TokenNodeSet" as="xs:string*" select="for $token in tokenize($str, '\.') return concat(upper-case(substring($token,1,1)), lower-case(substring($token,2)))" /> 
```

或者最后因为它是没有节点集的 XSLT 2.0，我将变量重命名为例如

```
<xsl:variable name="TokenSequence" as="xs:string*" select="for $token in tokenize($str, '\.') return concat(upper-case(substring($token,1,1)), lower-case(substring($token,2)))" /> 
```

# python - 有没有更快的方法在 python 中获取输入？

> ID：12784192
> 
> 赞同：5
> 
> 时间：2012-10-08T14:53:21.280
> 
> 标签：python, performance, input

在编码比赛中，我们会遇到如下输入：

```
2 3

4 5 
```

因此，我们执行以下操作：

```
m, n = [int(x) for x in raw_input().split(' ')] 
```

有没有更快的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T14:59:51.887

出于所有实际目的，这几乎是你能得到的最快速度。在某些机器上，您可能会看到订单的加速，或者如果您使用`map`而不是列表推导式，您可能会看到几个百分点，但这并不能保证。

这是我机器上的一些快速计时：

```
from itertools import imap
#map
>>> timeit.timeit('x,y = map(int,line.split(" "))','from __main__ import line')
4.7857139110565186
>>> timeit.timeit('x,y = map(int,line.split())','from __main__ import line')
4.5680718421936035
#list comprehension
>>> timeit.timeit('x,y = [int(x) for x in line.split(" ")]','from __main__ import line')
4.3816750049591064
>>> timeit.timeit('x,y = [int(x) for x in line.split()]','from __main__ import line')
4.3246541023254395
#itertools.imap
>>> timeit.timeit('x,y = imap(int,line.split(" "))','from __main__ import line,imap')
4.431504011154175
>>> timeit.timeit('x,y = imap(int,line.split())','from __main__ import line,imap')
4.3257410526275635
#generator expression
>>> timeit.timeit('x,y = (int(x) for x in line.split(" "))','from __main__ import line')
4.897794961929321
>>> timeit.timeit('x,y = (int(x) for x in line.split())','from __main__ import line')
4.732620000839233 
```

令人惊讶的是，`split()`似乎比`split(" ")`.

* * *

如果您保证有 0 到 9 之间数字的 ascii 输入，则可以使用以下方法做得更好`ord`：

```
>>>timeit.timeit('x,y = [ord(x)-48 for x in line.split(" ")]','from __main__ import line')
1.377655029296875
>>> timeit.timeit('x,y = [ord(x)-48 for x in line.split()]','from __main__ import line')
1.3243558406829834 
```

但这对您的输入施加了严格的限制。

* * *

您可以尝试另一种想法（我不知道性能影响会是什么），但您可以从以下位置读取您的行`sys.stdin`：

```
import sys
for line in sys.stdin:
    x,y = [ord(x)-48 for x in line.split()] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:55:04.223

使用`map()`，与内置函数一起使用时，它比列表推导更快：

```
m, n = map(int, raw_input().split()) 
```

# javascript - CSS Javascript 在用户点击时显示下一个/上一个 Div 的内容

> ID：12784193
> 
> 赞同：0
> 
> 时间：2012-10-08T14:53:32.743
> 
> 标签：javascript, css

我有一个 XML 文件，它存储使用 JSP 页面中包含的 Java Hashtable 显示的内容（它当前使用我现在知道的脚本是不好的做法）

随着 XML 内容数量的增加，我需要开始分批显示它，例如 5 个`<sliceContent>`div，然后为用户提供单击下一步的选项。最后我有“下一个”div。我当然还必须添加一个“上一个”选项。

我不确定我在寻找什么，我找到了一些帖子，例如[这篇文章](https://stackoverflow.com/questions/11146298/onclick-show-next-divs)，但我无法真正关注。这可以由 CSS 单独完成还是我需要在 Java 中实现？

再次感谢您的任何建议。

**编辑**我已经用 CSS 和 Javascript 重新标记了这个，因为我被告知这是我需要的。

我的 XML（内容可以扩展到多个段落）

```
<slice><sliceContent> Content element 1 </sliceContent></slice>
<slice><sliceContent> Content element 2 </sliceContent></slice>
<slice><sliceContent> Content element 3 </sliceContent></slice> 
```

我的 Java（包含在 JSP 页面中）

```
<div class='result-container'>
<ul class="menu menu-style">
 <li>
    <a href="javascript:;">Concept for <%=keywords%></a>
            <ul xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" class="menu menu-style">      
      <li>
        <a href="javascript:;">
            <span>Show Concept</span>
        </a>
<ul class="wer">
<%

    String testContent = contentPara;
    String startTag = "sliceXML\">"; 
    String endTag = "<";
    String xmlMatch = null; 
    String hashMatch = null;        

    int startPosition = testContent.indexOf(startTag);              
    if(startPosition >1)
    {               
        int subStringIndex = startPosition + startTag.length(); 
        int endPosition = testContent.indexOf(endTag, subStringIndex);      
        if(endPosition >= startPosition)
        {
            xmlMatch = testContent.substring(subStringIndex, endPosition);
        }   

        if(xmlMatch == null)
        {
        out.println("No concept matches for your query!" );     
        }
        else
        {

Hashtable<String, String> table = new Hashtable<String, String>();
(hash table links here)

        try{    
            FileInputStream fstream = new FileInputStream(table.get(xmlMatch));                 

            // Get the object of DataInputStream
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;

        //Read File Line By Line
            while ((strLine = br.readLine()) != null)   
            {
                out.println (strLine);
            }               

        //Close the input stream
            in.close();
        }
            catch (Exception e)
            {
                //Catch exception if any
                System.err.println("Error: " + e.getMessage());
            }
        }

   }
      <li>
      <div class="next-div">
      <a class="next">Next<img height="10px" src="images/more.png" />
      </a>
    </div>
  </li>
  </ul>
  </li>
  </li>
  </ul>

  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:06:28.927

您可以使用 javascript 执行此操作：

```
<script type="text/javascript" language="JavaScript">
function showContent(){
document.getElementById('showContent').innerHTML = "Here is the text we want to show";
}
</script> 
```

HTML：

```
<a href="#" onclick="showContent()">showContent</a>
<div id="showContent"></div> 
```

# ruby-on-rails - 如何对 Rails 中的两个字段应用自定义验证？

> ID：12784197
> 
> 赞同：0
> 
> 时间：2012-10-08T14:53:43.567
> 
> 标签：ruby-on-rails, validation

我需要对两个字段应用自定义验证，但失败了。它只适用于一个领域。

我在 lib 文件夹中创建了文件 select_option_validator.rb，这里是代码：

```
class SelectOptionValidator < ActiveModel::EachValidator  
 def validate_each(object, attribute, value)  
   if value == "--- please select ---"  
    object.errors[attribute] << (options[:message] || "should be selected")  
   end  
  end  
end 
```

这是我在模型中的验证：

```
 validates :category, :select_option => true

   validates :language, :select_option => true 
```

我的观点：

```
 <% if @website.errors.any? %>
   <div class="alert alert-error">
     <%= pluralize(@website.errors.count, "error") %> prohibited
    this website from being saved:
   </div>
   <div class="error_explanation">
   <ul>
    <% @website.errors.full_messages.each do |msg| %>
      <li>* <%= msg %></li>
     <% end %>
   </ul>
 </div> 
```

但它只给了我

```
 * Language should be selected 
```

但也应该

```
 * Category should be selected. 
```

为什么类别不验证？

# java - java StdArrayIO 数组读取

> ID：12784198
> 
> 赞同：0
> 
> 时间：2012-10-08T14:53:51.200
> 
> 标签：java, io, iteration

我正在做一个迭代函数系统程序，这里有一段代码：

```
double[] dist = StdArrayIO.readDouble1D();
double[][] cx = StdArrayIO.readDouble2D();
double[][] cy = StdArrayIO.readDouble2D(); 
```

它读入这个文本文件（在命令行中通过管道传输到程序中）：

```
3
 .33 .33 .34
3 3
 .50 .00 .00
 .50 .00 .50
 .50 .00 .25
3 3
 .00 .50 .00
 .00 .50 .00
 .00 .50 .433 
```

我很难理解这到底是做什么的。稍后在程序中从这些数组中随机选择点，程序打印出一个谢尔宾斯基三角形。有人可以给我一个关于这里发生了什么的基本解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:58:02.437

看起来文件的第一行表示数组的长度，下一行是该数组的值。然后它将这些值存储在一个长度为 3 的双精度数组中，称为 dist。类似地，对于接下来的四行，它采用 3x3 矩阵（或数组数组）的维度，然后是该矩阵的值，将其存储在 cx.xml 中。cy 也一样。

# javascript - 有没有办法获取有效语言环境列表或检查语言环境在 Javascript 中是否有效？

> ID：12784202
> 
> 赞同：4
> 
> 时间：2012-10-08T14:54:05.823
> 
> 标签：javascript, locale

我需要验证一些用户输入。据我了解，“en-US”是有效的标准 HTTP 语言环境，而“en_GB”不是。有没有办法验证这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:56:11.597

[这是规格](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.10)：

> [HTTP 语言标签的语法和注册表与 RFC 1766 1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.10)定义的相同。总之，一个语言标签由一个或多个部分组成：一个主要语言标签和一系列可能为空的子标签：
> 
> ```
>  language-tag  = primary-tag *( "-" subtag )
>     primary-tag   = 1*8ALPHA
>     subtag        = 1*8ALPHA 
> ```
> 
> [...] 其中任何两个字母的主标签都是 ISO-639 语言缩写，任何两个字母的初始子标签都是 ISO-3166 国家代码。（上面的最后三个标签不是注册标签；除了最后一个之外都是未来可能注册的标签示例。）

这里[是国家代码](http://www.iso.org/iso/home/standards/country_codes/country_names_and_code_elements.htm)。当然，“GB”在列表中。

`en-GB`完全可以，但`en_GB`不是。

# iphone - 是否可以在 iPhone 中获取“默认警报”信息？

> ID：12784203
> 
> 赞同：2
> 
> 时间：2012-10-08T14:54:08.257
> 
> 标签：iphone, alarm

是否可以在没有私有 API 的情况下在 iPhone 中获取“默认警报”信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:57:17.897

不，我不相信我们可以访问 ios 警报应用程序..

# sql-server-2008 - 在没有数据的情况下在开发和实时数据库之间移动 SQL Server 数据库修改

> ID：12784211
> 
> 赞同：0
> 
> 时间：2012-10-08T14:54:41.497
> 
> 标签：sql-server-2008, sql-server-2005, sql-server-2008-r2

我正在使用 SQL Server，我有两个数据库 - 一个用于开发，另一个用于实时用户。

我想要一种将更改（创建新表、SP、函数、修改、关系、索引）从开发数据库自动移动到实时数据库的方法

现在我复制每个元素的脚本并在实时数据库上执行它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:59:20.397

实现这一目标的方法很少。我不想在这里做任何广告，但在我的工作中，我发现[RedGate SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)最适合这样做。同样可以通过使用 Visual Studio 2010 数据库项目来实现。不幸的是，我实际上不知道任何免费工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:06:05.693

我在数据菜单下的 Scheme Compare 中找到了 Visual Studio 2010 的解决方案我可以选择要比较的服务器和数据库，然后它将显示它与两个数据库之间的差异，然后我们可以自动将这些更改从源数据库写入到目标数据库

# html - 密码正确吗？然后重定向

> ID：12784215
> 
> 赞同：-1
> 
> 时间：2012-10-08T14:51:52.480
> 
> 标签：html

> **可能重复：**
> [密码 HTML 重定向](https://stackoverflow.com/questions/12783646/password-html-redirect)

所以我有这个代码，我需要它只在添加正确密码时重定向。唯一的问题是我不知道要添加什么只会在密码为“hello”时重定向我知道使用“view-source”会显示密码，我不介意，这是我想要的方式. 我基本上只需要知道要添加什么以及在哪里添加它。

Sooo：如果在密码字段中输入“hello”，则重定向。如果将其他任何内容放入密码字段，则不执行任何操作。

```
<div class="wrapper">

    <form class="form1" action="http://google.com">

        <div class="formtitle">Enter the password to proceed</div>

        <div class="input nobottomborder">
            <div class="inputtext">Password: </div>
            <div class="inputcontent">

                <input type="password" />
                <br/>

            </div>
        </div>

        <div class="buttons">

            <input class="orangebutton" type="submit" value="Login" />

        </div>

</div> 
```

我希望这很清楚并且可以理解。

更新：输入密码以继续

```
 <div class="input nobottomborder">
        <div class="inputtext">
            Password:
        </div>

        <div class="inputcontent">
            <input type="password" id="password" /><br />
        </div>
    </div>

    <div class="buttons">
        <input class="orangebutton" type="submit" value="Continue" onclick="if (document.getElementById('password').value == 'hello') location.href='members.html'; else alert('Wrong Password!');" />
    </div>
</form> 
```

​​​

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:08:26.047

您将不得不使用 javascript。您只需要登录按钮上的事件侦听器，然后检查输入字段的值并重定向。使用普通的 javascript 很简单，但使用 jQuery 更容易。它应该是这样的（但我没有测试代码）。

```
$('.orangebutton').click(function () {
    if ($('input:password').val() == "hello") {
        window.location.href = "http://stackoverflow.com";
    }
}); 
```

当然，您必须包含 jquery 库并确保加载了 dom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:21:19.533

### 解释

我在这里使用的代码是：

```
if (document.getElementById('password').value == 'hello')
    alert('Correct Password!');
else
    alert('Wrong Password!'); 
```

现在对于您的问题，我们可以`alert('Correct Password!');`用`location.href='members.html'`或其他东西代替。

```
if (document.getElementById('password').value == 'hello')
    location.href='members.html';
else
    alert('Wrong Password!'); 
```

### 看一下这个。没用过jQuery，纯JavaScript

```
<div class="wrapper">
    <form class="form1" action="http://google.com">
        <div class="formtitle">
            Enter the password to proceed
        </div>

        <div class="input nobottomborder">
            <div class="inputtext">
                Password:
            </div>

            <div class="inputcontent">
                <input type="password" id="password" /><br />
            </div>
        </div>

        <div class="buttons">
            <input class="orangebutton" type="submit" value="Login" onclick="if (document.getElementById('password').value == 'hello') alert('Correct Password!'); else alert('Wrong Password!');" />
        </div>
    </form>
</div>​ 
```

### 在这里摆弄：http: [//jsfiddle.net/AmMwQ/](http://jsfiddle.net/AmMwQ/)

# java - Java 扫描器：nextInt

> ID：12784216
> 
> 赞同：2
> 
> 时间：2012-10-08T14:55:01.403
> 
> 标签：java

我是编程初学者（学习 Java）。我正在尝试编写一个程序，其中列出了四个不同的选项供用户选择。

这是其中的一部分：

```
import java.util.*;
    public class fight {

            public static int upgrade1 = 0;
            public static int upgrade2 = 0;
            public static int upgrade3 = 0;
            public static int upgrade4 = 0;

    public static void main(String[] args) {

        Scanner scan = new Scanner(System.in);

        System.out.println("Please enter your name:");

            String player = scan.next();    

System.out.println("You have earned 2 upgrade points. Which of the following traits would you like to boost by 2 points?\n"
    + " 1\. upgrade1\n 2\. upgrade2\n 3\. upgrade3\n"
    + " 4\. upgrade4");

                    if (scan.nextInt() == 1) {
                        upgrade1 = upgrade1 + 2;
                            System.out.println("Your upgrade1 level is now: " + upgrade1);
                    }
                    else if (scan.nextInt() == 2) {
                        upgrade2 = upgrade2 + 2;
                            System.out.println("Your upgrade2 level is now: " + upgrade2);
                    }
                    else if (scan.nextInt() == 3) {
                        upgrade3 = upgrade3 + 2;
                            System.out.println("Your upgrade3 level is now: " + upgrade3);
                    }
                    else if (scan.nextInt() == 4) {
                        upgrade4 = upgrade4 + 2;
                            System.out.println("Your upgrade4 level is now: " + upgrade4);
                    }                                                       
        }
} 
```

问题是：当用户输入他们想要选择的选项时，他们必须输入数字（x 是他们选择的数字）x 次。例如，用户想要选择选项 3。他们必须在控制台中输入数字 3 三次，然后控制台才能理解并完成下一行。

这是运行程序后的控制台：

请输入您的姓名：rick 你好，rick。您已获得 2 个升级点。您希望将以下哪个特质提升 2 点？1\. upgrade1 2\. upgrade2 3\. upgrade3 4\. upgrade4 3 3 3 你现在的 upgrade3 等级是：2

我希望这是有道理的，并且非常感谢任何帮助（我假设我只是在犯一个愚蠢的新手错误）。此外，如果您对它的结构方式有任何建设性的批评，请不要犹豫。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:58:59.450

您不能重复调用 scan.nextInt()。当然，除非您期望读取*多个*不同的整数。

反而：

```
Scanner scan = new Scanner(System.in);
System.out.println("Please enter your name:");
String player = scan.next();
int ichoice = scan.nextInt();
switch (ichoice) {
  case 1:
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T14:58:35.300

每次调用`scan.nextInt`一个 if 语句时，它都会读取另一个 int。改成：

```
int userChoice = scan.nextInt();
if (userChoice == 1)
{
    ...
}
else if (userChoice == 2)

... 
```

至于建设性的批评，选择你喜欢的风格并使用它。你的缩进到处都是；这使代码更难阅读。它是否是一种常用的风格并不重要，也不管其他人如何看待它，只要确保*你*喜欢它并坚持下去。

Eclipse 可以为您自动格式化代码，并且这种行为是可定制的（您可以对其进行调整，使其与您的风格相匹配）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T14:58:33.590

每次调用时`nextInt()`，都会从输入中读取另一个 int。因此，您只想调用它一次！

```
int choice = scan.nextInt();

if (choice == 1) ...
if (choice == 2) ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:00:44.533

这是因为您在每个 if/else if 语句中都调用了 scan.nextInt()。您要做的是存储他们输入的值，然后检查 if/else if 语句中的值，否则您基本上是在多次提示用户输入。

```
int input = scan.nextInt();

if (input == 1) {
    upgrade1 = upgrade1 + 2;
        System.out.println("Your upgrade1 level is now: " + upgrade1);
}
else if (input == 2) {
    upgrade2 = upgrade2 + 2;
        System.out.println("Your upgrade2 level is now: " + upgrade2);
}
else if (input == 3) {
    upgrade3 = upgrade3 + 2;
        System.out.println("Your upgrade3 level is now: " + upgrade3);
}
else if (input == 4) {
    upgrade4 = upgrade4 + 2;
        System.out.println("Your upgrade4 level is now: " + upgrade4);
} 
```

# html - Z-Index 在顶部导航菜单和子菜单上不起作用

> ID：12784221
> 
> 赞同：0
> 
> 时间：2012-10-08T14:55:07.530
> 
> 标签：html, css

我在菜单及其子菜单的顶部导航中有一个 z-index 问题，我希望菜单与子菜单重叠，我已将菜单的 z-index 设置为高于子菜单，但它不起作用子菜单菜单默认为重叠菜单。

请查看并建议任何可能的方法。

[jsFiddle](http://jsfiddle.net/Cvuwr/3/)

HTML

```
<div id="login">
<ul>
<li id="overlap"><a href="#">Log In | Join</a>
    <ul class="tsm">
    <li><a href="#">Log In</a></li>
    <li><a href="#">Join</a></li>
    </ul>
</li>
</ul>
</div> 
```

CSS

```
 #login {
    margin: 0px auto;
    width: 1000px;
    height: 38px;
    background: #343438;
}
#login ul {
    float: right;
    margin: 0px;
    padding: 0px;
    width: auto;
    height: 38px;
}
#login ul li {
    float: left;
    width: auto;
    height: 34px;
    display: inline;
    list-style-type: none;
}
#login ul a {
    color: #FFF;
    display: block;
    width: auto;
    height: 34px;
    font: bold 16px/34px "Arial Narrow", Arial, sans-serif;
    text-decoration: none;
    text-align: center;
    padding: 0px 15px;
    text-shadow: 0px -1px #000;
}
#login .tsm {
    padding: 20px;
    background-color: #F2F2F4;
    width: 230px;
    height: auto;
    text-align: left;
    border: 4px solid #777;
    position: absolute;
    visibility: hidden;
    top: 32px;
    right: 0px;
    z-index: 100;
}
#login .tsm li a {
    width: 230px;
    height: 30px;
    margin-bottom: 1px;
    text-align: left;
    padding: 0px;
    text-decoration: none;
    color: #000;
    text-shadow: 0px 1px #fff;
    font: 15px/30px Arial, sans-serif;
    border-bottom: 1px solid #DDDDDF;
}
#login ul #overlap {
    position: relative;
    border: 2px solid #900;
    z-index: 1000;
}
#login ul li:hover .tsm {
    visibility: visible;
}
#login ul ul li {
    border: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:16:06.463

问题源于您试图将父级置于其子级之上的事实，这会导致问题 - 如果父级向上移动，其子级也会如此。您需要对登录链接（一个标签）进行 z 索引，而不是对父列表进行 z 索引：

[http://jsfiddle.net/SaNJA/](http://jsfiddle.net/SaNJA/)

代码很粗糙，但它应该可以帮助您入门。

确保为链接添加背景颜色，否则您仍然可以看穿它。

# javascript - 避免在 jquery 按钮的类似任务上重复太多代码

> ID：12784224
> 
> 赞同：1
> 
> 时间：2012-10-08T14:55:20.047
> 
> 标签：javascript, jquery, html, css

我正在制作一个非常简单的弹出窗口，我可以从 8 种类型的内容中进行选择，所有内容都使用相同的格式。它通过单击在`div`顶部悬停时显示的 hidden s 来工作，当然，正如您所看到的，我想出了一个非常长而大的代码，用于可能用更少的螺栓和电线来完成的事情。

因为有很多行，所以我将所有这些都粘贴到了[jsFiddle](http://jsfiddle.net/gsaq2/1/)

有没有办法让这个更轻？

> ***解决了...耶！***

感谢所有人......这是最终脚本：[jsFiddle Final](http://jsfiddle.net/TQzXp/47/)，以防其他人遇到同样的困难

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:13:33.457

将所有重复的行为重构为一个函数，然后将不同的部分作为参数传递，例如：

```
function esta1(event) {
    $("#scrollcontrol").animate({"left":-240},500, "swing", null);
}
function esta2(event) {
    $("#scrollcontrol").animate({"left":0},500, "swing", null);
}
...
$('#scrollbtnR1').bind('click', esta1);
$('#scrollbtnL2').bind('click', esta2); 
```

变成这样：

```
function functionName(event, left) {
    $("#scrollcontrol").animate({"left": left},500, "swing", null);
}
$('#scrollbtnR1').bind('click', function (e) {
    functionName(e, -240);
});
$('#scrollbtnL2').bind('click', function (e) {
    functionName(e, 0);
}); 
```

继续这个重构过程，直到你只剩下一个泛型函数，其他所有东西都将参数传递给该函数。

如果您发现参数列表变得冗长且笨拙，请考虑改为传递参数对象：

```
function functionName(event, params) {
    $("#scrollcontrol").animate({"left": params.left}, 
        params.duration, 
        params.animation, null);
}
$('#scrollbtnR1').bind('click', function (e) {
    functionName(e, { left: -240, duration: 500, animation: "swing" });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:13:40.477

首先，停止使用 ID 引用所有内容。[使用类，像这样](http://jsfiddle.net/gsaq2/2/)：

```
$('.scrollbtn').hover(function(){
         $(this).css("opacity","0")
             .animate({"opacity":1},500, "linear");
    }, function() {
        $(this).css("opacity","1")
             .animate({"opacity":0},500, "linear");
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:18:21.470

我看到你可以做三件事来减少代码：

*   使用悬停快捷方式
*   使用匿名函数
*   使用参数化函数

首先，jQuery 有[`hover`](http://api.jquery.com/hover/)替换 mouseover/mouseout 行为的方法：

```
$('#scrollbtnR8').bind('mouseover', R8);
$('#scrollbtnR8').bind('mouseout', R8b); 
```

可以替换为

```
$('#scrollbtnR8').hover(R8, R8b); 
```

不过，这只是少了一点代码:)

* * *

其次，您现在为每个事件处理程序定义一个函数，但您只使用这些函数一次。如果你只使用一次，你可以像这样创建匿名函数：

```
$('#scrollbtnR1').bind('click', esta1); 
```

变成

```
$('#scrollbtnR1').click(function() { 
    $("#scrollcontrol").animate({"left":-240},500, "swing", null);
}); 
```

* * *

最后，您可以使用一个函数来封装代码的公共部分，并将变化的部分作为参数传递。

你可以像这样实现它：

```
<div id="scrollcontrol" animate="swing" swingLeft="-240">

$('div[animate='swing']').click(function() { 
    $(this).animate({"left": $(this).attr("swingLeft")}, 500, "swing", null);
}); 
```

“div”选择器使用[Attribute Equals Selector](http://api.jquery.com/attribute-equals-selector/)。您还可以为所有“动画” div 分配一个类，并使用类选择器选择它们：`$("div.animate")`这将选择 all `<div class="animate">`。

这里发生的是：

*   选择动画属性值为“swing”的所有 div。
*   调用 jQuery swing animate 但`$(this).attr("swingLeft")`用作左侧属性。

[`attr("wingLeft")`](http://api.jquery.com/attr/)获取 HTML 标记中定义的 swingLeft 属性的值。

此时我不再查看您的代码，关键是：查看要执行的代码，看看您是否注意到一种模式，这是您可以概括的东西。然后，您也许可以进一步简化代码。
另外值得注意的是：有些人不喜欢在 HTML 中添加“animate”、“swingLeft”等属性。**更新**根据 pimvdb 的评论，您可以使用[jQuery 数据](http://api.jquery.com/jQuery.data/)变得更“干净”。

代码可能如下所示：

```
<div id="scrollcontrol" class="swing" data-swingLeft="-240">

$('.swing').click(function() { 
    $(this).animate({"left": $(this).data("swingLeft")}, 500, "swing", null);
}); 
```

# html - display:none 不隐藏 div 内容

> ID：12784232
> 
> 赞同：0
> 
> 时间：2012-10-08T14:55:31.970
> 
> 标签：html, css

这应该是显而易见的，但在所有主流浏览器中，div 内容都没有隐藏：

```
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>

<style>
    #confContent{
    border:solid 1px #FF0000;
    width:700px;
        height:600px;
    background-color:#00CC00;
    left:50%;
    display:none;
    position:absolute;
                                                }

</style>

</head>

<body>

        <div id="confContent">
        <p style="color:#0000FF">Some content goes here</p>
        </div>

</body>
</html> 
```

实际上，所有属性似乎都不起作用，`div`没有向左移动 30%，没有背景颜色，没有隐藏，也没有边框。请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:57:40.043

您的 CSS 需要在样式标签中（如果不在外部样式表中）

```
<style>
#confContent{

    border:solid 1px #FF0000;
    width:700px;
    height:600px;
    background-color:#00CC00;
    left:30%;
    display:none;
}   
</style> 
```

并且应该放在`head`你的页面的

查看您的新代码，您缺少文档开头的 HTML 标记（应该在 之后`<!DOCTYPE html>`）

然而，我认为这也不是问题——我想也许还有一些我们没有看到的 CSS 覆盖了你给我们的 div 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:00:59.480

将您的代码替换为：

```
<!--Confirmation div-->
<div id="confContent">
   <p style="color:#0000FF">Some content</p>
</div>

<style type="text/css">
#confContent{
    border:solid 1px #FF0000;
    width:700px;
    height:600px;
    background-color:#00CC00;
    left:30%;
    display:none;
}     
</style> 
```

使用 Danny Hearnah 关于 HEAD 标签的建议

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:01:37.843

你错过`px`了`width`财产。除此之外，它正在工作。检查这个[**演示**](http://jsfiddle.net/Ad3sD/)

如果这仍然不起作用，那么您需要检查您的 CSS 文件路径

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:45:42.293

我的问题已解决，对于任何为此苦苦挣扎的人，请勿`<!-- -->`在您的 css 块中使用您的评论：

```
<style>

<!-- DO NOT use this format for comments -->

/* Only this format is valid */

</style> 
```

这阻止了 FireFox 读取我的 css 代码并给我抛出了这样的错误：

```
The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must to be declared in the document or in the transfer protocol. 
```

和

```
Unexpected end of file while searching for closing } of invalid rule set. 
```

# java - 将字符串参数捕获为变量 Java

> ID：12784235
> 
> 赞同：0
> 
> 时间：2012-10-08T14:55:44.913
> 
> 标签：java

总 Java 菜鸟，我需要弄清楚如何捕获作为一种方法的参数输入的字符串，以便以后重用它。基本上，在这里我在创建按钮时将字符串内容作为标签传递：

```
public void start() {

    // set up the label for one button

    viewer.setButtonLabel(1, "");
    viewer.setButtonLabel(2, "");
    viewer.setButtonLabel(3, "");

    // start the viewer
    viewer.open();
} 
```

然后我想在下一个方法中重用我作为按钮标签给出的字符串作为搜索的关键字，同时考虑按下哪个按钮：

```
public void buttonPressed(int n) {

    // fetch an image of the Forum from Flickr
    Photo photo = finder.find("", 5);
} 
```

我觉得我做这件事比它必须做的要困难得多，但我对 Java 完全陌生，似乎找不到我要找的东西。非常感谢您提供的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:59:20.433

```
String buttonLabel1 = "Blah blah blah";

viewer.setButtonLabel(1, buttonLabel1); 
```

下一个方法

```
blahMethod(buttonLabel1); 
```

这是执行此操作的一种方式，但可能是最容易看到的。您可以通过将所有按钮标签存储到列表中来变得更复杂（这将使您的代码看起来更清晰），但由于您是新手，我建议您尝试这种方式。最终，为了使您的代码动态化（例如，如果我选择第 4 个按钮，则获得第 4 个标签），您将不得不使用某种数据结构来避免变得非常草率/混乱。

您也可以“获取”按钮的标签以检索相同的字符串值。

# javascript - 在 html javascript 函数中调用 svg javascript 函数

> ID：12784237
> 
> 赞同：3
> 
> 时间：2012-10-08T14:55:51.457
> 
> 标签：javascript, html, dom, svg

我有一个 SVG 文档，其中绘制了三个圆圈：

```
<?xml version="1.0"?>
<svg width="450" height="80" xmlns="http://www.w3.org/2000/svg">
    <script>
    document.fillCircle = function(id) {
        var circles = document.getElementsByTagName('circle'),
            circle  = document.getElementById(id);

        [].forEach.call(circles, function(circle) {
            circle.setAttribute('fill','#ffffff');
        });

        circle.setAttribute('fill', '#000000');
    }
    </script>
    <g>
        <line y1="35" x1="35" y2="35" x2="375" stroke-width="3" stroke="#000000"/>
        <circle id="state1" r="30" cy="35" cx="35"  stroke-width="3" stroke="#000000" fill="#ffffff" onclick="fillCircle(this.id);"/>
        <circle id="state2" r="30" cy="35" cx="205" stroke-width="3" stroke="#000000" fill="#ffffff" onclick="fillCircle(this.id);"/>
        <circle id="state3" r="30" cy="35" cx="375" stroke-width="3" stroke="#000000" fill="#ffffff" onclick="fillCircle(this.id);"/>
    </g>
</svg> 
```

出于测试目的，我有该`onclick=""`方法，但实际上该文档是我的 html 文档中的一个对象：

```
<object id="test" data="test-vector.svg" width="100px" height="100px"></object> 
```

我有一个数据集，这三个圆圈显示了每个项目的“进度”。我通过从服务器中提取新列表来定期更新 JSON 集。对于每个更改的项目，我想更新实心圆圈。

我想根据一些 javascript 更新 svg。但是，我无法进入 SVG 的 DOM。我真的不在乎svg 是否在 svg 中，`fillCircle()`是否必须使用或其他东西，但这种 javascript 对我不起作用。`<embed>``<object>`

```
<html>
<body>
    <object id="test" data="test-vector.svg"></object>
    <script>
        var svg = document.getElementById('test');
        console.log(svg);
        svg.fillCircle('state2');
    </script>
</body>
</html> 
```

我尝试了我在 SO 上找到的几件事，比如[this one](https://stackoverflow.com/questions/11900452/call-javascript-function-inside-svg-from-surrounding-html)和[this one](https://stackoverflow.com/questions/138309/is-it-possible-to-manipulate-an-svg-document-embedded-in-an-html-doc-with-javasc?rq=1)，但无论我测试什么，例外总是：

```
Uncaught TypeError: Object #<HTMLObjectElement> has no method 'fillCircle' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T15:47:10.723

`var object = document.getElementById("test")`会给你对象元素，但在对象加载之前你不能调用它。一旦你有了它，你就可以使用 object.contentDocument 来处理嵌入的 svg 文档。

```
<html>
<body>
    <object id="test" data="test-vector.svg" onload="f()" ></object>
    <script>
        function f() {
            var svg = document.getElementById('test');
            svg.contentDocument.fillCircle('state2');
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:58:52.440

Why don't you embed the SVG directly in your HTML code (using SVG tags)? [According to W3](http://www.w3schools.com/svg/svg_inhtml.asp), this works in all modern browsers (and IE >= 9). Accessing and changing the circles' properties with JS is then trivial...

```
<html>
    <body>
        <svg>...</svg>
    </body>
</html> 
```

If you want to keep your HTML/SVG structure though, you can do the following:

```
var svg = document.getElementById("test");
svg.onload = function(){
    svg.contentDocument.fillCircle("state2");
}; 
```

The trick is to wait for the SVG object to load (`onload` event); not till then you can safely use the `contentDocument` property. Btw, this is also described [in this solution on SO](https://stackoverflow.com/a/138358/1350193) (you posted a link to it). ;)

# python - 使用 python web.py 框架时出错

> ID：12784238
> 
> 赞同：2
> 
> 时间：2012-10-08T14:55:53.877
> 
> 标签：python, login, web.py

我正在研究 python，我想开发一些简单的 Web 应用程序，它由 3 个页面（表单）组成

1.  `login screen`这应该验证用户名和密码并重定向到第二页

2.  如果用户存在，它会重定向到包含记录列表的此页面并`add button`添加另一条记录

3.  在第二页中单击时`add record`，应重定向到该页面，该页面由一个简单的表单字段组成，该表单字段在单击`submit`按钮时获取数据并作为列表中的记录保存到第二页

我不想使用 django 之类的高级框架来满足上述小要求，所以在谷歌搜索很多之后决定使用以下框架之一

Wheezy.web ( [https://bitbucket.org/akorn/wheezy.web/downloads](https://bitbucket.org/akorn/wheezy.web/downloads) )

web.py ( [http://webpy.org/](http://webpy.org/) )

瓶子（http://bottlepy.org/docs/dev/）

烧瓶 (http://flask.pocoo.org/)

我开始使用`web.py`框架并创建了一个`code.py`文件，如下面的教程所示

**代码.py**

```
import web
render = web.template.render('templates/')

urls = ( '/', 'index' )

if __name__ == "__main__": 
    app = web.application(urls, globals())
    app.run() 
```

运行上述文件后`python code.py`，结果为

```
sh-4.2$ python code.py 
http://0.0.0.0:8080/ 
```

我已经改变了IP和端口如下

```
python code.py 192.168.1.112:2030 
```

并尝试通过浏览器访问，然后我收到以下错误

```
<type 'exceptions.KeyError'> at /
u'index'
Python  /usr/lib/python2.7/site-packages/web/application.py in _delegate, line 418
Web     GET http://0.0.0.0:8080/
Traceback (innermost first)

    /usr/lib/python2.7/site-packages/web/application.py in _delegate
        cls = fvars[f] ...
    ▶ Local vars
    /usr/lib/python2.7/site-packages/web/application.py in handle
        return self._delegate(fn, self.fvars, args) ...
    ▶ Local vars
    /usr/lib/python2.7/site-packages/web/application.py in process
        return self.handle() ...
    ▶ Local vars

Request information
INPUT No data.
COOKIES No data.
............... 
```

实际上，当我在地址栏中输入 url 时，应该会出现一个 hello world 消息，如教程中所示，但我收到了上述错误。

1.  任何人都可以建议如何在不使用 django 框架和 python 中的 cgi 的情况下实现上述在 python 中开发登录屏幕的要求
2.  我无法找到如何使用这些框架进行开发，因为例如`Wheezy.web ( https://bitbucket.org/akorn/wheezy.web/downloads)`提供的框架没有显示如何创建文件和开始开发的文档

请在上述情况下帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:20:03.720

该行：

```
urls = ( '/', 'index' ) 
```

告诉 web.py url`/`应该由一个类处理`index`。你还没有创建这样的类，因此你得到了错误。像这样修复它：

```
import web

urls = (
    '/', 'index'
)

class index:
    def GET(self):
        return "Hello, world!"

if __name__ == "__main__":
    app = web.application(urls, globals())
    app.run() 
```

# jquery - html 属性的单引号自动替换为双引号

> ID：12784239
> 
> 赞同：4
> 
> 时间：2012-10-08T14:56:04.420
> 
> 标签：jquery, django, django-templates, double-quotes, html

如果我在 django 模板中使用单引号属性，如下所示：

```
<button data-json='{"color":"red"}'>click</button> 
```

它会自动替换为：

```
<button data-json="{"color":"red"}">click</button> 
```

封闭的“{}”被转换为“{}”，这使得 jQuery 无法读取该属性。我已经试过了

```
{% autoescape off %} 
```

没有运气。

**编辑：**

作为一个实验，我尝试了一些完全没有引号的东西（在 template.html 中）：

```
<button data=foo>click</button> 
```

转换为（查看浏览器中的源代码）

```
<button data="foo">click</button> 
```

（带引号）。

我知道你可以将整个事情重写为

```
data-json="{'color':'red'}" 
```

然后做一个 javascript`.replace()`使它成为有效的 json - 但这对我来说似乎很丑陋。怎样才能阻止神奇的替换？

# javafx-2 - 无论如何我可以创建一个透明的根元素吗？

> ID：12784244
> 
> 赞同：0
> 
> 时间：2012-10-08T14:56:06.847
> 
> 标签：javafx-2

我想创建一个透明的边框。我尝试将背景颜色设置为透明，但它看起来是白色的。请让我知道是否有办法。

我试过的代码。

```
 BorderPane root=new BorderPane();
 root.setStyle("-fx-background-color:transparent");
 Scene scene=new Scene(root);
 stage.setScene(scene);
 stage.show(); 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:05:27.443

尝试将舞台设置为透明：

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.stage.Stage;
import javafx.stage.StageStyle;

public class TransparentStage extends Application {

    @Override
    public void start(Stage stage) {
        // important line
        stage.initStyle(StageStyle.TRANSPARENT);

        Text text = new Text("Transparent!");
        text.setFont(new Font(40));
        VBox box = new VBox();
        box.getChildren().add(text);
        final Scene scene = new Scene(box,300, 250);
        scene.setFill(null);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# javascript - JavaScript 例程如何调用自身？（不是递归的！）

> ID：12784245
> 
> 赞同：1
> 
> 时间：2012-10-08T14:56:07.317
> 
> 标签：javascript, html, recursion

我的任务是做一个长时间运行的 JS 代码。此例程生成一个 POST 请求，当它结束并需要时，根据答案生成另一个：

```
function routine (a)
{
    var answer = createPostRequest (bla bla bla);
    if (answer)
    {
        routine (a);
    }
} 
```

所以只要答案是真的，它就会递归地调用自己。到目前为止它很好，但是浏览器冻结或挂起太多。一段时间后，Firefox 会告诉我脚本运行时间过长，并提出停止它。`routine (a);`我没有尝试使用计时 1 来做。`setTimeout`同样的事情，但是当我将计时设置为 100 时，它看起来还可以。但是有不必要的等待，加上它是一个主观的数字（如果即使是 100 也会导致问题呢？）我需要某种“基于消息”的东西，就像在 Delphi/Windows 编程中一样：程序向自己发送消息。在 JS 中如何实现？

编辑：我生成请求的方式：

```
var ajax = createXmlHttp();
ajax.open ('POST', 'dsdsdsad.adsf', false);
var parameters = 'param=1';
ajax.setRequestHeader ('Content-type', 'application/x-www-form-urlencoded');
ajax.setRequestHeader ("Content-length", parameters.length);
ajax.setRequestHeader ("Connection", "close");
ajax.send (parameters);
try
{
    var answer = eval('(' + ajax.responseText + ')');
}
catch (error)
{
    alert ('Error in the answer: '+ajax.responseText);
    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:00:39.753

我假设您`createPostRequest`进行了可以处理回调的 AJAX 调用。

如果是这样，请确保请求是*异步*的，并传递一个回调来测试条件并在需要时进行下一次调用。

```
function createPostRequest(address, callback) {
    var ajax = createXmlHttp();
    ajax.open ('POST', address, true); // make it async

    var parameters = 'param=1';
    ajax.setRequestHeader ('Content-type', 'application/x-www-form-urlencoded');
    ajax.setRequestHeader ("Content-length", parameters.length);
    ajax.setRequestHeader ("Connection", "close");

        // handle the async response
    ajax.onreadystatechange = function() {
                                if (ajax.readystate == 4) {
                                   try {
                                       callback(eval('(' + ajax.responseText + ')'));
                                   } catch {
                                       callback(null);
                                   }
                                }
                              };
    ajax.send (parameters);
} 
```

* * *

```
function routine (a) {
    createPostRequest (bla bla bla, function(answer) {
        if (answer) {
            routine (a);
        }
    }
} 
```

# maven - 如何将maven jar分成多个jar？

> ID：12784251
> 
> 赞同：2
> 
> 时间：2012-10-08T14:56:16.453
> 
> 标签：maven, jar

我知道这不是推荐的做法，我已阅读：

[http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)

我同意。但目前我需要解决以下问题：

我有一个包含多个 src 文件夹 A 和 B 的项目（使用 build-helper-maven-plugin）。我需要创建两个对应的 jars A（默认 jar）和 B。Jar A 包含来自 src 文件夹 A 的类，jar B 包含来自 src 文件夹 B 的类。

首先，我创建默认 jar A 并尝试从 src 文件夹 B 中排除所有类：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
                <execution>
                    <id>default-jar</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                    <configuration>
                        <excludes>
                            <exclude>**/B*</exclude>
                        </excludes>
                    </configuration>
                </execution> 
```

但是当我检查 A jar 时，它包含源文件夹 B 中包中的类。我的 reqex 排除符号是否错误/它只适用于包？

基于以下答案，我现在做：

```
<properties>
    <artifactId.model>${project.artifactId}-model-${project.version}</artifactId.model>
    <artifactId.default>${project.artifactId}-${project.version}</artifactId.default>
</properties>

        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <id>make-model-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <appendAssemblyId>false</appendAssemblyId>
                        <finalName>${artifactId.model}</finalName>
                        <descriptors>
                            <descriptor>src/main/assembly/model.xml</descriptor>
                        </descriptors>
                        <attach>true</attach>
                    </configuration>
                </execution>
                <execution>
                    <id>make-default-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                    <configuration>
                        <appendAssemblyId>false</appendAssemblyId>
                        <finalName>${artifactId.default}</finalName>
                        <descriptors>
                            <descriptor>src/main/assembly/default.xml</descriptor>
                        </descriptors>
                        <attach>true</attach>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

其中模型的描述符是：

```
<assembly>
    <id>model</id>
    <formats>
        <format>jar</format>
    </formats>
    <baseDirectory>target</baseDirectory>
    <includeBaseDirectory>false</includeBaseDirectory>

    <fileSets>
        <fileSet>
            <directory>${basedir}/model_a</directory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>
        <fileSet>
            <directory>${basedir}/model_b</directory>
            <includes>
                <include>**/**</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

然后我使用构建助手附加罐子。上面的问题显然是我得到 .java 文件而不是编译的 .class 文件。由于所有 .class 文件都位于所有源文件夹的相同 target/classes 文件夹中（请参阅 noahz 注释），我需要为相关包手动指定每个包含/排除 - 所以这种方法是行不通的 :-( 我认为最好的方法是创建一个子项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:08:00.693

这几乎是[我给出的答案](https://stackoverflow.com/a/12727681/1466267)的副本：

您可以使用程序集插件的[不同执行](http://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag)，然后[将生成的程序集附加](http://mojo.codehaus.org/build-helper-maven-plugin/attach-artifact-mojo.html)到构建中。当然，您必须在程序集插件配置中为工件配置不同的最终名称。在程序集描述符中，您必须[配置要包含的内容](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:03:22.570

是的，Jar 插件的`include`/`exclude`是用于包的，它不考虑原始源文件的物理位置。

考虑将此项目拆分为两个子模块。

**替代方法**

正如我经常说的：对于 90% 的构建需求，有 Maven。对于其他一切，有 Antrun 插件。

您将不得不使用 Ant [Jar Task](https://ant.apache.org/manual/Tasks/jar.html)生成您的 jar ，并利用该`includesfile`参数。该文件可以是硬编码的，也可以由您在构建时执行的脚本生成（即`find`每个源目录下的所有文件并输出到您的包含文件）。

不是最好的解决方案，但它应该可以实现您的目标（虽然两个子模块会更容易）。

# sql - 在 SQL SELECT 语句中输出附加标头

> ID：12784252
> 
> 赞同：0
> 
> 时间：2012-10-08T14:56:19.513
> 
> 标签：sql, sql-server

是否有更优雅的解决方案可以将某些标头添加到 SQL`SELECT`语句中？

例如，我有一个包含以下内容的数据集：

```
A | B | C | D
=============
Y | 5 | 8 | Z
X | 4 | 8 | Z 
```

ETC...

在这种情况下，数据本身并不太重要，但是我想向数据集添加相关的标头，因此最终输出如下所示：

```
Date Created: 1/1/11
Date Ran: 12/1/11
File Version: 123
A | B | C | D
=============
Y | 5 | 8 | Z
X | 4 | 8 | Z 
```

所有这些都将是数据库中已经存在的内部跟踪值，但我想将它们全部作为单个记录集输出给最终消费者。

我已经用 some 's 做了一些类似的事情，`UNION ALL`但它远非伟大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:59:00.447

SQL Select 语句返回行和列。它并非旨在按照您描述需求的方式来格式化页眉和页脚信息。而且，IMO，这不应该是 RDMS 的功能。像这样的格式化应该在客户端或发出 SQL 调用的服务上完成，而不是在 SQL Server 本身上完成。

# vb.net - 在 v.net 中将一种形式的可变数据用于另一种形式

> ID：12784255
> 
> 赞同：0
> 
> 时间：2012-10-08T14:56:25.070
> 
> 标签：vb.net

我正在编写一个程序来计算员工的工资单。我需要知道的是如何从一种形式到另一种形式的变量中获取工资单信息。

我需要其中的变量数据的表单称为 Timesheet，我需要数据的表单称为 PayRoll。

当我使用以下代码时：

```
 lblName.Text = TimeSheet.EmpName 
```

在我为它生成一个类之后，我得到了 EmpName 不是 EmployeeInfo.Timesheet （Timesheet 所在的项目文件）的成员的错误。

有什么想法可以链接这些表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:19:45.470

只要您从 PayRoll 表单调用 TimeSheet 表单并且您已经实例化并保留了该表单的实例，这应该没有什么问题。

我希望看到类似的东西：

```
Dim ts as New TimeSheet
ts.ShowDialog()
' Do whatever you need in the timesheet form to set it.
lblName.Text = ts.EmpName 
```

需要注意的一件事是，如果您调用 Dispose() 方法，您将失去您的财产。

如果这不能回答您的问题，则有关您的问题的更多信息可能会更有帮助。

# php - 摆脱不需要的双引号

> ID：12784261
> 
> 赞同：0
> 
> 时间：2012-10-08T14:57:10.570
> 
> 标签：php, json

```
echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>';
echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question');\">Add</button></td></tr>"; 
```

现在到上面的代码将显示这个例如：

> 问题按钮
> 
> “什么是 2+2” 添加（按钮）

但我不想`""`绕开这个问题，我希望它显示如下：

> 问题按钮
> 
> 什么是 2+2 加（按钮）

有谁知道如何删除文本周围的双引号？（如果您需要更多代码，请给我评论）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:59:32.477

您正在将文本插入 HTML。要逃避它，请使用`htmlspecialchars`. HTML 不是 JSON。不要使用`json_encode`.

```
echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:00:02.307

从第二行删除 json_encode。如果您对字符串进行 json 编码，它将始终用双引号引起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:00:50.360

只需使用[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)删除它们。

```
echo '<tr class="questiontd"><td>', htmlspecialchars($question), '</td>'; 
```

执行的翻译是：

```
'&' (ampersand) becomes '&amp;'
'"' (double quote) becomes '&quot;' when ENT_NOQUOTES is not set.
"'" (single quote) becomes '&#039;' (or &apos;) only when ENT_QUOTES is set.
'<' (less than) becomes '&lt;'
'>' (greater than) becomes '&gt;' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:01:35.760

这是真实的

> 当您只是吐出 html 时，为什么要对问题进行 json 编码？不要对其进行编码，您可能不会得到引号。

但是，如果您仍然坚持使用 json_encode，那么对于一个简单的解决方案

```
echo '<tr class="questiontd"><td>'.str_replace(json_encode($question),"\"","").'</td>'; 
```

或者更优雅

```
echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>'; 
```

# objective-c - 如何将字符串输入其他应用程序，就像写在键盘上一样？

> ID：12784264
> 
> 赞同：0
> 
> 时间：2012-10-08T14:57:25.483
> 
> 标签：objective-c, macos

我现在想知道如何在另一个应用程序的文本字段中编写字符串。例如，我运行程序，程序等待 5 秒，然后我专注于另一个应用程序中的文本字段，例如 Skype（通过单击它），然后程序将一个字符串写入焦点文本字段。我已经知道如何用 模拟单次击键`CGEventCreateKeyboardEvent`，但是对于 10-30 个字符的字符串，这并不能很好地工作。感谢您的回答，并为我非常糟糕的语法感到高兴。

# gcal - 从月视图中隐藏 gCal 中某些事件的方法？

> ID：12784267
> 
> 赞同：1
> 
> 时间：2012-10-08T14:57:31.703
> 
> 标签：gcal

是否有允许 gCal 中的事件从月视图中隐藏的功能或附加组件？我的日历上每天都有很多事件，这使得月视图几乎毫无用处，因为“关键事件”总是在月视图中被（+3 等）隐藏。我想要一个“关键事件”日历，但如果不在关键事件日历中创建新事件，gCal 不会让我这样做。我想要一个包含所有事件的日历，但是一种在月视图中仅显示“关键日期”的方法。是否有任何类型的附加组件或功能可以让我这样做？

# excel - 将列中的值返回到不同的选项卡

> ID：12784270
> 
> 赞同：0
> 
> 时间：2012-10-08T14:57:35.387
> 
> 标签：excel, return-value, vlookup

我在一张工作表上列出了一份产品清单，但并非每种产品都有价值。在单独的工作表中，我希望它只提取具有价值的产品。我已经能够输出披萨的第一列，但披萨皮不会继续

表 1 称为价格

```
list       pizza  pizza-crust   pizza-thin 
pepper      1          5             8
beef        2    
bacon       3          6        
pineapple   4                        9
mushroom               7            10 
```

我拥有的宏执行以下操作

```
 list     pizza  
    pepper      1   
    beef        2    
    bacon       3           
    pineapple   4 
```

我怎样才能让它填充其余列的数据，以便它可以放入比萨饼皮，然后是每个列的数据，然后放入薄薄的比萨饼和数据

下面是宏

```
Sub Button2_Click()
Dim column As Integer
column = 1
newrow = 1
Do Until Worksheets("sheet1").Cells(column, 1).Value = ""

If Worksheets("sheet1").Cells(column, 2).Value <> "" Then

Worksheets("sheet2").Cells(newrow, 1).Value = Worksheets("sheet1").Cells(column, 1).Value
Worksheets("sheet2").Cells(newrow, 2).Value = Worksheets("sheet1").Cells(column, 2).Value

newrow = newrow + 1
End If
column = column + 1
Loop
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:50:26.363

选择单元格 B2 并运行我的 unpivot 加载项（可[在此处](http://tduhameau.wordpress.com/2012/09/24/the-unpivot-add-in/)获得）。之后添加额外的零列应该很容易。

# javascript - javascript 中的数据上下文交互 (DCI) 和事件编程

> ID：12784276
> 
> 赞同：4
> 
> 时间：2012-10-08T14:57:53.803
> 
> 标签：javascript, model-view-controller, design-patterns, dci, event-based-programming

我最近看到了 Trygve Reenskaug 关于 DCI 的以下演示： [https](https://vimeo.com/43536416) ://vimeo.com/43536416 这让我大吃一惊。嗯，在代码中看到软件不同组件之间的交互是一个很有吸引力的想法。

我试图在 javascript 中找到 DCI 的示例，但没有成功。然后我开始怀疑。DCI模式不是与事件编程模式相反吗？

事件编程在 javascript 中很流行，我猜是因为它允许解耦，并且因为经典继承概念不是 js 原生的。我想我了解事件编程的好处，但我也注意到当需要跟踪事件消息时，调试可能会非常困难。

说这两个概念是对立的是否正确？还是我弄错了？是否有一些我错过的 js 中 DCI 的示例实现？为了挖掘这个概念，我应该看什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T10:39:06.280

首先，事件编程或继承与 DCI 正交。您可以在没有继承和事件编程（或没有）的情况下进行 DCI。

JavaScript 在某些方面是执行 DCI 的最佳语言之一。大多数语言在严格遵循 DCI 方面存在一些问题。在 JavaScript 中，如果有终结器，则可以解决问题，但缺少终结器意味着您将不得不“处理”您自己，这意味着一些 noilerplate 代码。

我用 JavaScript 编写了一个示例，我将把它放到[http://fullOO.info](http://fullOO.info)上，在那里您可以找到 Trygve、Jim 和我与其他人一起创建的示例。

fullOO.info 也是您可以去哪里更熟悉 DCI 的答案，或者您可以加入 object-composition 一个 Google 小组讨论有关 DCI 的问题。

我用 JS 编写的示例是规范的 DCI 示例汇款，有趣的部分（除了样板/库代码之外的所有内容）如下所示：

```
var moneyTransferContext = function(sourcePlayer, destinationPlayer, amount) {
    var source = {
            withdraw: function() {
                var text = "Withdraw: " + amount;
                this.log.push(text);
                this.balance -= amount;
                console.log("Balance: " + this.balance);
            }
        },
        destination = {
            deposit: function() {
                var text = "Deposit: " + amount;
                this.log.push(text);
                this.balance += amount;
                console.log("Balance: " + this.balance);
            }
        };
    source = assign(source).to(sourcePlayer);
    destination = assign(destination).to(destinationPlayer);
    return {
        transfer: function() {
            source.withdraw();
            destination.deposit();
            return this;
        }
    };
},
sourceAccount = {
  log: [],
  balance: 100
},
destinationAccount = {
  log: [],
  balance: 0
};

moneyTransfer(sourceAccount, destinationAccount, 25).transfer().unbind(); 
```

其余的可以在[http://jsfiddle.net/K543c/17/看到](http://jsfiddle.net/K543c/17/)

# c# - Winforms：基于 TabControl 的向导，带有单独的类和设计器支持中的步骤

> ID：12784281
> 
> 赞同：1
> 
> 时间：2012-10-08T14:58:10.057
> 
> 标签：c#, .net, winforms, wizard

我正在尝试使用 TabControl 组件构建一个向导。

它工作得很好，但我最终得到了这么多页面（选项卡），以至于在一个类中包含所有组件和事件处理程序使其不可读。

我现在有这样的想法，即在从 TabPage 扩展的单独类中声明向导的每个步骤，然后将这些步骤添加到向导屏幕类（从 TabControl 扩展）。我该如何做到这一点，并且仍然在步骤中获得设计师的支持？

简单地扩展 TabPage 不会启用设计器支持。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:05:02.740

我建议将您的业务逻辑与您的 UI 逻辑分开。`UserControl`为每个内容及其`TabPage`本身`TabControl`创建派生词。如果 UI 逻辑与业务逻辑分离，则管理此类代码会容易得多。您可能会受益于为每个选项卡创建一个类，以及一个管理所有选项卡的类。将这些类连接到`UserControl`s`TabPage`和`TabControl`.

# tomcat - 如何从 2 个不同的上下文访问 1 个 tomcat 应用程序？

> ID：12784282
> 
> 赞同：3
> 
> 时间：2012-10-08T14:58:11.147
> 
> 标签：tomcat

是否可以加载从不同 URL 调用的相同应用程序？

我尝试了不同的配置，`mod_rewrite`但它不起作用。我目前正在尝试使用虚拟主机，但不确定它是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:56:07.880

我假设既然您提到您正在使用 mod_rewrite，那么您是在使用 Apache 的 Tomcat 吗？如果是这样，为什么不使用 Apache 作为反向代理呢？

Apache 的示例配置是：假设 Tomcat 在端口 8080 上运行，并且 Tomcat 的 ROOT 上下文为应用程序提供服务。

```
NameVirtualHost *
<VirtualHost *>
    ServerName url1.com
    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/

    <Location />
        Order allow,deny
        Allow from all
    </Location>
 </VirtualHost>

 <VirtualHost *>
    ServerName url2.com
    ProxyRequests Off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>

    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/

    <Location />
        Order allow,deny
        Allow from all
    </Location>
 </VirtualHost> 
```

# emacs - Emacs org-mode 在 mac os x lion 终端中被破坏

> ID：12784286
> 
> 赞同：3
> 
> 时间：2012-10-08T14:58:39.553
> 
> 标签：emacs, terminal, org-mode

我最近使用自制软件将我的 emacs 升级到 24.2 cocoa，现在 org-mode 在终端中几乎没用。这个问题比它根本不起作用时更令人恼火，这会给我一个关于如何解决它的线索。

当我编辑一个列表（使用星号）并收缩或扩展列表的元素（使用选项卡）时，会发生各种奇怪的事情。一些列表项会突然重复。一些列表项将完全消失。项目将被推到页面下方，然后跳回。这一切都在发生，因为我只推标签。

我已经使用 brew 卸载并重新安装了 emacs。我已经做了很多谷歌搜索，但找不到任何遇到 org-mode 问题的人。有人有想法么？

Mac OS X Lion 10.7.5 Emacs 24.2 org-version 7.8.11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:24:35.167

您是否尝试过使用不同的终端模拟器？它们都有不同的错误，因此您可能在默认终端应用程序中遇到过错误。请尝试使用普通的 xterm。我假设emacs不在终端中时可以正常工作。

# c# - 如何获取大数据 WCF - 流式或缓冲式？

> ID：12784287
> 
> 赞同：1
> 
> 时间：2012-10-08T14:58:42.520
> 
> 标签：c#, wcf, wcf-binding

目前我有一个具有默认缓冲传输模式的 NetTcpBinding。我正在尝试确定什么是我的请求的最佳解决方案，该请求构建了一个最终成为大量数据的类。

基本上，我有一个进入 WCF 的请求，以获取一堆报告信息并将其返回给客户端。只要这低于 64k MaxMessageRecievedSize 就可以了，但如果超过了，我最终会遇到异常。

我应该切换到流传输模式，然后将文件流式传输回客户端，因为数据可能很小或很大？或者增加 MaxMessageRecievedSize 可以吗？增加 MaxMessageRecievedSize 似乎是个坏主意，因为如果我们有多个到服务的连接都获取大量数据，我们可能会遇到内存问题？

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:55:22.550

对于您提到的尺寸，您应该切换到流媒体。[在http://msdn.microsoft.com/en-us/library/ms733742.aspx](http://msdn.microsoft.com/en-us/library/ms733742.aspx)有一个详细的文档讨论这个

# c# - 我如何使用 checkBox2 来检查它是否被选中？

> ID：12784295
> 
> 赞同：0
> 
> 时间：2012-10-08T14:59:11.833
> 
> 标签：c#

编码：

```
private void checkBox2_CheckedChanged(object sender, EventArgs e)
        {
            crawlLocaly1 = new CrawlLocaly();
            crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
            OptionsDB.Set_localOnly(checkBox2.Checked);
            if (checkBox2.Checked)
            {
                DialogResult dr = crawlLocaly1.ShowDialog(this);
                if (dr == DialogResult.Cancel)
                {
                    crawlLocaly1.Close();
                }
                else if (dr == DialogResult.OK)
                {
                    LocalyKeyWords.Add(crawlLocaly1.getText());
                    crawlLocaly1.Close();
                }
                removeExt = true;
            }
            else
            {
                removeExt = false;
            }
        } 
```

这一行：

```
OptionsDB.Set_localOnly(checkBox2.Checked); 
```

如果 checkBox2 被选中，则保存它的状态。如果下次选中它，我将运行我的程序，我将在 checkBox2 复选框中看到 V。如果我下次运行我的程序时取消选中复选框，则复选框 2 的框将被取消选中。

问题是当我关闭我的程序并再次运行它时检查checkBox2，因为现在检查了checkBox，然后由于某种原因它会这样做：

```
DialogResult dr = crawlLocaly1.ShowDialog(this); 
```

Wich 将打开并向用户显示一个新表单。但我不希望它是那样的。

我希望如果用户在程序运行时选中了复选框，新表单就会显示出来。但是，如果用户从一开始就运行程序并且选中了复选框，则不显示新表单，只显示选中了复选框！

我应该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:02:20.337

您需要一个`checkedInThisSession`最初设置为的其他布尔标志`false`，并在复选框`OnChecked`处理程序中将其设置为 true，然后您可以轻松检查此状态。希望一切都清楚

```
private void checkBox2_CheckedChanged(object sender, EventArgs e)
{
       crawlLocaly1 = new CrawlLocaly();
       crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
       OptionsDB.Set_localOnly(checkBox2.Checked);

       // UPDATED
       if (checkedInThisSession && checkBox2.Checked)
       {
           DialogResult dr = crawlLocaly1.ShowDialog(this);
           // ...
       }
       else
       {
           removeExt = false;
       }

       // UPDATED
       checkedInThisSession = checkBox2.Checked;
}

// In constructor    
checkedInThisSession = false;
checkBox2.Checked = OptionsDB.Get_localOnly(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:17:58.020

`CheckedChanged`每次设置复选框时都会触发该事件，也以编程方式触发。因此，要解决此问题，您需要忽略第一次触发事件。因此，布尔值可能是您的解决方案：

```
private bool ignore = true;
private void checkBox2_CheckedChanged(object sender, EventArgs e){
   if(ignore == false){
      //your code here
   }
   else 
      ignore = false;    
} 
```

# java - 用于访问异构数据库数据的统一查询语言

> ID：12784297
> 
> 赞同：2
> 
> 时间：2012-10-08T14:59:14.707
> 
> 标签：java, database

在我目前的项目中，我正在尝试统一查询语言来访问异构数据库。异构数据库意味着它们访问数据的查询语言不同。例如，SQL 是一种用于从 Apache Derby 访问数据的查询语言，而非 SQL 是用于 MongoDB 的。

我的问题是“是否有任何特定领域的语言被提议用来统一异构数据库？”

请随时指导我的其他努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:58:34.410

There is a project called [Hibernate OGM](http://www.hibernate.org/subprojects/ogm.html), which aims to generalize JPQL to NoSQL databases.

From their web page:

> Hibernate Object/Grid Mapper (OGM) aims at providing Java Persistence (JPA) support for NoSQL solutions. It reuses Hibernate Core's engine but persists entities into a NoSQL data store instead of a relational database. It reuses the Java Persistence Query Language (JP-QL) to search their data.

I don't tried it out for myself, so I cannot say how usefull it is.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T06:49:44.210

[JSONiq](http://jsoniq.org)可以处理来自不同 SQL 和 NoSQL 产品的数据。 [JSONiq 的开源实现](http://www.zorba-xquery.com)具有用于 Couchbase、Oracle NoSQL、SQLite 和 JDBC 的连接器。例如，下面的幻灯片展示了在 Couchbase 和 MongoDB 上执行的相同查询：[https ://speakerdeck.com/wcandillon/jsoniq-the-sql-of-nosql](https://speakerdeck.com/wcandillon/jsoniq-the-sql-of-nosql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:28:16.933

这是一个相当有趣的问题。至少有一种建议的解决方案称为 UnQL（非结构化数据查询语言） - [http://www.couchbase.com/press-releases/unql-query-language](http://www.couchbase.com/press-releases/unql-query-language)。
我想开箱即用的 UnQL 至少适用于 CouchDB 和 SQLite。这似乎是向前迈出的一大步。

我个人会说这样的任务似乎是一项棘手的任务，因为结构化和非结构化数据方法之间的概念差异。无论如何，为某个应用程序使用的定义良好的 SQL 和 NoSQL 数据模型开发这样的 DSL 应该是相对容易的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T06:56:55.113

[SPARQL](http://www.w3.org/TR/sparql11-query/)是一种 W3C 标准化的查询语言，它工作在抽象数据模型 ( [RDF](http://www.w3.org/TR/rdf-primer/) ) 之上，而不是特定类型的数据库，这使得它非常适合作为异构数据库查询的推动者。

[SPARQL 的实现存在](http://www.w3.org/wiki/SparqlImplementations)于各种 NoSQL 数据库之上，包括原生 RDF 数据库（通常称为三元存储），以及关系数据库之上。

# java - Java，未知字符 ﾝ □ Xml 响应

> ID：12784307
> 
> 赞同：1
> 
> 时间：2012-10-08T14:59:37.653
> 
> 标签：java, html, xml, encoding, utf-8

我目前正在尝试从 Xml 文件（可通过此地址访问：[http](http://mobilite.euroairport.com/services/getDepartureAirports?language=French) ://mobilite.euroairport.com/services/getDepartureAirports?language=French ）中提取机场列表。我的问题是应该出现在“DÜSSELDORF”中的“Ü”是不可能阅读的（甚至直接是 Ie 或 firefox）。我得到这样的东西：D□SSELDORF 或 D SSELDORF 或 D?SSELDORF

以下是我用来尝试查找此文件编码的代码（n 是包含“DÜSSELDORF”的字符串）：

```
 byte[] bytes = n.getBytes();            
        Log.w("tagtag", (char) bytes[0] + " "+(char) bytes[1]+" "+(char) bytes[2]);
        bytes = n.getBytes("ASCII");            
        Log.w("tagtag", (char) bytes[0] + " "+(char) bytes[1]+" "+(char) bytes[2]);
        bytes = n.getBytes("Cp1252");           
        Log.w("tagtag", (char) bytes[0] + " "+(char) bytes[1]+" "+(char) bytes[2]);
        bytes = n.getBytes("UTF-8");            
        Log.w("tagtag", (char) bytes[0] + " "+(char) bytes[1]+" "+(char) bytes[2]);
        bytes = n.getBytes("ISO8859_1");            
        Log.w("tagtag", (char) bytes[0] + " "+(char) bytes[1]+" "+(char) bytes[2]);
        bytes = n.getBytes("ISO8859_2"); 
```

这是结果（在 Android 的 Logcat 中）：

```
 10-08 09:41:30.557: W/tagtag(1506): D □ ﾝ
        10-08 09:41:30.557: W/tagtag(1506): D ? S
        10-08 09:41:30.567: W/tagtag(1506): D ﾝ S
        10-08 09:41:30.567: W/tagtag(1506): D □ ﾝ
        10-08 09:41:30.577: W/tagtag(1506): D ﾝ S
        10-08 09:41:30.637: W/tagtag(1506): D ﾝ S 
```

我的问题是：我在尝试读取此字符串时是否犯了错误，还是由于服务器的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:24:57.283

Definitley 服务器/（数据服务）（错误配置问题）/错误。

服务器在 HTML/XML 响应中返回这一行：

```
Content-Type: application/xml;charset=UTF-8\r\n 
```

我刚刚检查了 xml 的字节转储，这就是 wireshark 表示“DSSELDORF”的方式：

```
D..SSELDORF 
```

在十六进制转储中（十六进制值 c2 9d参见[UTF-8 代码表）：](http://www.utf8-chartable.de/)

```
44 c2 9d 53 53 
```

这将是：

```
44 - D
53 - S 
```

和 C2 9D

被解释为控制字符，也称为不可打印字符 - 因此“缺失” U - 这也解释了您的 logcat 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:55:42.223

我想我发现了问题。我设法访问了 web 服务代码，我发现用于更新 web 服务 bdd 的文件是用 ANSI 编码的。使用以下代码读取此文件：

```
InputStreamReader input = new InputStreamReader(new FileInputStream("vols"), "UTF-8");
BufferedReader buffer = new BufferedReader(input); 
```

我想问题就在这里，所以我会要求客户端更改此文件的编码，但我不确定这是我问题的唯一原因。

谢谢你们的帮助。

# ruby - 使用 Ruby 和 Nokogiri 从 RDF 提要中提取新闻？

> ID：12784309
> 
> 赞同：0
> 
> 时间：2012-10-08T14:59:46.447
> 
> 标签：ruby, xml, nokogiri, rdf

我想从新闻源中提取`title`和`description`字段，`http://www.tagesschau.de/newsticker.rdf`以将它们提供给 Mac 的文本到语音引擎。

我搜索了一个不错的 Ruby Gem 来做到这一点`Nokogiri`，但所有从给定 XML 中“拉出一些东西”的示例似乎都以某种方式以 CSS 为中心。

有谁知道如何将`title`and`description`字段保存在数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:35:58.423

使用[xpath](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-xpath) / [at_xpath](http://nokogiri.org/Nokogiri/XML/Node.html#method-i-at_xpath)（后者只返回一个元素）：

```
require 'nokogiri'
require 'open-uri'
require 'pp'

entries = []
doc = Nokogiri::XML(open('http://www.tagesschau.de/newsticker.rdf'))
doc.xpath('/rss/channel/item').each do |item|
  entries << [item.at_xpath('title').text(), item.at_xpath('description').text()]
end

pp entries 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T23:50:23.323

对于像 RSS 这样的结构化数据，我建议使用专用客户端，而不是使用 Nokogiri 滚动您自己的解析器。

```
require 'simple-rss'
require 'open-uri'

rss = SimpleRSS.parse open('http://www.tagesschau.de/newsticker.rdf')
rss.entries.each do |entry|
  puts entry.title
  puts entry.description
end 
```

# jquery - 使用 JQuery 在 DIV 中显示繁忙指示器

> ID：12784313
> 
> 赞同：2
> 
> 时间：2012-10-08T14:59:50.463
> 
> 标签：jquery, css, busyindicator

我有一个动画 .gif，我想将其用作繁忙指示器。加载某些内容时将使用此繁忙指示器。

加载后，内容将显示在 div 中。在加载内容时，我希望在现有内容上基本上有一个半透明层，该层也显示我的动画**`.GIF`**. 目前，我有以下内容：

```
<div id="main">
  <div id="contentArea">
    Loaded content will go here
  </div>
  <input type="button" value="Load Latest Content" onclick="loadContent();" />
</div> 
```

脚本是：

```
<script type="text/javascript">
  function loadContent() {
    // Show busy indicator on semi-transparent layer.
    pingWebService();
    return false;
  }
  function pingWebService() {
     $.ajax(...);
  }
  function pingWebServiceComplete() {
    // Hide busy indicator
  }
</script> 
```

我的`.ajax`电话工作得很好。我只是不确定如何做繁忙的指标部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:22:19.893

很简单，就像 musefan 说的，只是隐藏或显示包含图像的 div。这是一个人为的[例子](http://jsfiddle.net/4AQx6/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:01:42.523

JQuery 只需要显示/隐藏指示器图像，可以执行以下操作：

```
$("#MyBusyElement").show(); 
```

和

```
$("#MyBusyElement").hide(); 
```

其余的取决于您的 html/css 布局。您可以在 CSS 中使用透明度，但旧版浏览器无法正确支持此功能，因此要么使用具有透明背景的“忙碌”gif 来覆盖`div`. . 使用旧浏览器的人应该受苦！）

# cordova - 在本地获取一个 json 文件（jquerymobile & phonegap）

> ID：12784317
> 
> 赞同：0
> 
> 时间：2012-10-08T14:59:58.640
> 
> 标签：cordova, jquery-mobile, localhost, getjson

我想知道是否可以获取本地的 json 文件？如果是，如何？

我试过了

```
function test() {
 $.getJSON("c\\file.json", function(json) {
   console.log(json); 
 });
 } 
```

和

```
 function test() {
      $.getJSON("http://localhost/file.json", function(json) {
       console.log(json); 
      });
    } 
```

我正在使用 wampserver。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T10:40:21.103

我刚刚找到了一种无需使用[Phonegap File API](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html)即可加载本地存储的 JSON 文件的方法。使用 Cordova 2.7.0（我只在 Android 设备上测试过）对我来说真的很容易并且工作：我使用[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/). 所以你的 ajax 调用看起来像这样：

```
 $.ajax({
            url: 'data.json',
            crossDomain: true,
            jsonpCallback: 'cb',
            dataType: 'jsonp',
        })
            .fail(function (jqXHR, textStatus, errorThrown) { console.log(textStatus, errorThrown); alert('Failed to load data.'); })
            .done(function (data) {
                app.data = data;
        }); 
```

crossDomain 参数用于强制在同一域上执行跨域请求 (JSONP)。我还将回调函数名称强制为 cb。另请注意，JSONP 请求不支持同步操作。

然后你必须用你的回调函数来包装你的 JSON 数据：

```
cb(
    {
        "title": "the title,
        "id": 1
    }
); 
```

这有点棘手，可能不是一个很好的做法。你怎么看待这件事 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:05:24.387

为了更好的编程，使用相对路径来加载 JSON 文件。

```
 $.getJSON("file.json", function(json) {
    console.log(json); 
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:03:19.580

尝试使用环回地址，而不是 localhost，如下所示：

```
$.getJSON("http://127.0.0.1/file.json", function(json) { 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-08T15:02:53.223

试试文件格式：

`file:///C:/folderA/test.html`

[http://www.cs.tut.fi/~jkorpela/fileurl.html](http://www.cs.tut.fi/~jkorpela/fileurl.html)

# c# - 任何生成令牌的免费库

> ID：12784330
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:00:46.283
> 
> 标签：c#, .net, security, project, token

令牌可在 Web 应用程序中用于多种用途，其中一些用途如下

1.  生成注册的简短验证码
2.  手机认证验证码
3.  通过使用请求映射令牌避免 CSRF
4.  电子邮件链接验证等等

我正在寻找可以为我做这件事的人。令牌是一个简短的字母数字字符串，它是唯一的、随机的和可配置的。有谁知道.NET，C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:02:46.493

我个人使用 Yahoo、Gmail、Hotmail、Facebook 和 Twitter 进行身份验证，这就是它们的工作方式，它们生成身份验证令牌，当然@免费。当然，如果您确实需要，MSDN 还会教您如何实现自定义令牌生成器：

[http://msdn.microsoft.com/en-us/library/ms731872.aspx](http://msdn.microsoft.com/en-us/library/ms731872.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:03:09.887

为什么不直接使用 Guid 和 base64 编码呢？

# php - PHP，如何获取一维数组中的数组键。

> ID：12784332
> 
> 赞同：0
> 
> 时间：2012-10-08T15:00:48.927
> 
> 标签：php, multidimensional-array, array-key

在 PHP 中，我创建了一个这样的键值对数组，如何获得“mykey”？

```
$arr = array("mykey"=>"myvalue"); 
```

我知道下面的代码会起作用，但我很想知道 PHP 中是否有一种语言结构可以让我以更简单的方式做到这一点。

```
foreach($arr as $key=>$value){
  $result = $key;
  break;
}
echo $result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:01:47.523

如果您处理一个元素，只需使用[key ，而](http://php.net/manual/en/function.key.php)[array_keys](http://php.net/manual/en/function.array-keys.php)则使用具有多个值的数组。

例子

```
$arr = array("mykey"=>"myvalue");
var_dump(key($arr)); 
```

或者

```
 var_dump(array_keys($arr)); 
```

输出

```
string 'mykey' (length=5) 
```

和

```
array
  0 => string 'mykey' (length=5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:03:47.100

**试试这个**

你可以在 php中使用**array_keys函数**

```
<?php
$array = array(0 => 100, "color" => "red");
print_r(array_keys($array));

$array = array("blue", "red", "green", "blue", "blue");
print_r(array_keys($array, "blue"));

$array = array("color" => array("blue", "red", "green"),
               "size"  => array("small", "medium", "large"));
print_r(array_keys($array));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:02:14.113

你需要使用`array_keys`，这是[手册](http://php.net/manual/en/function.array-keys.php)

# javascript - Chrome 的日期/时间格式问题

> ID：12784337
> 
> 赞同：0
> 
> 时间：2012-10-08T15:01:20.970
> 
> 标签：javascript, jquery, google-chrome, handlebars.js

我在 JSON 中得到如下日期/时间值：

```
"ChangedDate":"\/Date(1349469145000)\/" 
```

在 FF 和 IE 中，我使用以下辅助函数以 12 小时格式（10/5/2012 - 3:32:25 PM）获得上述日期：

```
Handlebars.registerHelper('FormatDate', function (date) {
            if (date == null)
                return "";
            else {
                var value = new Date(parseInt(date.substr(6)));
                return value.getMonth() + 1 + "/" + value.getDate() + "/" + value.getFullYear() + " - " + value.toLocaleTimeString();
            }
        }); 
```

但是，在 Chrome 中，我仍然获得 24 小时格式（2012 年 10 月 5 日 - 15:32:25）。

如何在 Chrome 中获取 12 小时格式的日期/时间值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:10:56.950

> 当意图向用户显示使用用户选择的区域格式格式化的字符串时，请使用[toLocaleTimeString 。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)请注意，由于其性质，此方法的行为会因操作系统和用户设置而异。

您最好更改此行：

```
return value.getMonth() + 1 + "/" + value.getDate() + "/" + value.getFullYear() + " - " + value.toLocaleTimeString(); 
```

到：

```
return value.getMonth() + 1 + "/" + value.getDate() + "/" + value.getFullYear() + " - " + (value.getHours() > 12 ? value.getHours() - 12 : value.getHours()) + ":" + value.getMinutes() + ":" + value.getSeconds(); 
```

我们在哪里检查小时数 `> 12`，如果是，我们从那个数字中减去 12。

```
(value.getHours() > 12 ? value.getHours() - 12 : value.getHours()) 
```

所以你的例子`15:32:25`是`15 - 12 = 3`：`3:32:25`。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getSeconds](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getSeconds)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getHours)

**编辑**

```
//set up example
var date = new Date("10/5/2012");
date.setHours(15,32,25,00);

//Get data from date
var month = date.getMonth()+1;
var day = date.getDate();
var year = date.getFullYear();

var hours = date.getHours();
var amOrPm = "AM";
if(date.getHours() > 12){
    hours = date.getHours() - 12;
    amOrPm = "PM";
}

var minutes = date.getMinutes();
if(minutes  < 10)
    minutes = "0" + minutes;

var seconds = date.getSeconds();
if(seconds < 10)
    seconds = "0" + seconds;

var dateString = month + "/" + day + "/" + year + " - " + hours + ":" + minutes + ":" + seconds;

console.log(dateString); 
```

我使这个示例比需要的更详细，但它有助于向您展示发生了什么。希望能帮助到你。

**[例子](http://jsfiddle.net/hrfvk/)**

浓缩下来，这看起来像：

```
//Get data from date
var dateString = (date.getMonth()+1) + "/" + date.getDate() + "/" +  date.getFullYear() + " - " + (date.getHours() > 12 ? date.getHours() - 12 : date.getHours())+ ":" + (date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes()) + ":" + (date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds()) + " " + (date.getHours() > 12 ? "PM" : "AM"); 
```

**[例子](http://jsfiddle.net/hrfvk/1/)**

# regex - 匹配特定长度 x 或 y

> ID：12784338
> 
> 赞同：41
> 
> 时间：2012-10-08T15:01:31.713
> 
> 标签：regex

*我想要一个长度为 X 或 Y 个字符的正则表达式*。例如，匹配长度为 8 或 11 个字符的字符串。我目前已经这样实现了：`^([0-9]{8}|[0-9]{11})$`。

我也可以将其实现为：`^[0-9]{8}([0-9]{3})?$`

我的问题是：**我可以在不复制`[0-9]`部分**的情况下拥有这个正则表达式（这比这个简单的`\d`例子更复杂）吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-08T15:10:44.613

有一种方法：

```
^(?=[0-9]*$)(?:.{8}|.{11})$ 
```

或者，如果您想先进行长度检查，

```
^(?=(?:.{8}|.{11})$)[0-9]*$ 
```

这样，您只有一次复杂的部分和`.`长度检查的通用部分。

**解释：**

```
^       # Start of string
(?=     # Assert that the following regex can be matched here:
 [0-9]* # any number of digits (and nothing but digits)
 $      # until end of string
)       # (End of lookahead)
(?:     # Match either
 .{8}   # 8 characters
|       # or
 .{11}  # 11 characters
)       # (End of alternation)
$       # End of string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:10:42.413

使用 Perl，您可以：

```
my $re = qr/here_is_your_regex_part/;
my $full_regex = qr/$re{8}(?:$re{3})?$/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-06T10:37:56.227

对于我们这些想要捕捉相同倍数的不同长度的人来说，试试这个。

`^(?:[0-9]{32})+$`

`32`您要为 (32, 64, 96, ...) 捕获所有长度的倍数在哪里。

# visual-studio-2010 - zlib 放气得到 Z_DATA_ERROR

> ID：12784348
> 
> 赞同：1
> 
> 时间：2012-10-08T15:01:58.467
> 
> 标签：visual-studio-2010, visual-c++, zlib

我正在尝试使用带有 VC++2010 的 zlib-1.2.7 对文本文件进行放气和膨胀。我用作`pipe.c`基础并重写了`main()`以设置输入/输出文件。

我可以对任何文本文件进行放气，但如果没有`Z_DATA_ERROR`(-3)，我就无法为大文件充气。

和`inf()`没有`def()`从 改变`pipe.c`。

这是我的`main()`：

```
int main (){
    FILE *a, *b, *c;
    int ret;

    //ZIP
    a = fopen("a_data.txt", "r");
    b = fopen("b_compressedData.zip", "w");
    if(a != NULL && b != NULL){
        ret = def(a, b, Z_DEFAULT_COMPRESSION);
        printf("%d\n", ret); 

        if (ret != Z_OK) zerr(ret);

        fclose(a);
        fclose(b);
    }
    //UNZIP
    b = fopen("b_compressedData.zip", "r");
    c = fopen("c_uncompressedData.txt", "w");
    if(c != NULL && b != NULL){
        ret = inf(b, c);
        printf("%d\n", ret); 
        if (ret != Z_OK) zerr(ret);

        fclose(b);
        fclose(c);
    }

    return 0;
} 
```

这是`inf()`功能：

```
int inf(FILE *source, FILE *dest)
{
    int ret;
    unsigned have;
    z_stream strm;
    unsigned char in[CHUNK];
    unsigned char out[CHUNK];

    /* allocate inflate state */
    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = 0;
    strm.next_in = Z_NULL;
    ret = inflateInit(&strm);
    if (ret != Z_OK)
        return ret;

    /* decompress until deflate stream ends or end of file */
    do {
        strm.avail_in = fread(in, 1, CHUNK, source);
        if (ferror(source)) {
            (void)inflateEnd(&strm);
            return Z_ERRNO;
        }
        if (strm.avail_in == 0)
            break;
        strm.next_in = in;

        /* run inflate() on input until output buffer not full */
        do {
            strm.avail_out = CHUNK;
            strm.next_out = out;
            ret = inflate(&strm, Z_NO_FLUSH);
            assert(ret != Z_STREAM_ERROR);  /* state not clobbered */
            switch (ret) {
            case Z_NEED_DICT:
                ret = Z_DATA_ERROR;     /* and fall through */
            case Z_DATA_ERROR:
            case Z_MEM_ERROR:
                (void)inflateEnd(&strm);
                return ret;
            }
            have = CHUNK - strm.avail_out;
            if (fwrite(out, 1, have, dest) != have || ferror(dest)) {
                (void)inflateEnd(&strm);
                return Z_ERRNO;
            }
        } while (strm.avail_out == 0);

        /* done when inflate() says it's done */
    } while (ret != Z_STREAM_END);

    /* clean up and return */
    (void)inflateEnd(&strm);
    return ret == Z_STREAM_END ? Z_OK : Z_DATA_ERROR;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:20:26.860

您需要`"b"`在 for 的模式中添加 a `fopen()`，其中 the`b`是二进制的。例如`"rb"`和`"wb"`。否则，在 Windows 上，您会得到会弄乱二进制数据的行尾转换。

顺便说一句，你不应该调用压缩文件`.zip`，因为它不是。 [zlib](http://zlib.net/)写入 zlib 格式的数据，或者如果请求 gzip 格式的数据。zlib 不会自行编写 zip 格式的数据。有用于编写 zip 文件的第三方代码，例如在 zlib 源代码分发的 contrib 目录中，或者在[libzip](http://nih.at/libzip/)中。

我`.zz`用作 zlib 格式数据的后缀。 `.gz`是 gzip 格式数据的后缀。

# drupal-7 - Drupal 7：Drupal.behaviors 没有运行

> ID：12784349
> 
> 赞同：1
> 
> 时间：2012-10-08T15:01:58.717
> 
> 标签：drupal-7, drupal-modules, drupal-behaviors

我有一个正在创建的自定义模块，称为接触点。在 touchpoints.module 文件的顶部，我有以下内容：

```
global $base_path;

$my_settings = array(
  'basepath' => $base_path,
  'module_path' => drupal_get_path('module','touchpoints')
 );

drupal_add_js(array('touchpoints' => $my_settings), 'setting');
drupal_add_js(drupal_get_path('module','touchpoints') . '/touchpoints.js'); 
```

然后在我的 touchpoints.js 文件中，我有以下内容：

```
Drupal.behaviors.touchpoints = function(context){
    $('.form-item-touchpointlocation').css('display','block');
    $('.form-item-touchpointcategory').css('display','none');
} 
```

据我了解，Drupal.behaviors 调用中的任何内容都应该在 DOM 完成加载时运行，类似于 $(document).ready 调用。但是，此代码没有被执行。只是为了确保我也在函数中设置了一个警报，并且它没有被触发。有没有我错过的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:15:33.853

我意识到我使用的是 Drupal 6 语法。在 Drupal 7 中，您必须以不同的方式声明行为。它应该看起来像这样

```
(function ($) {
    Drupal.behaviors.touchpoints = {
        attach: function (context, settings) {
          $('.form-item-touchpointlocation').css('display','block');
          $('.form-item-touchpointcategory').css('display','none');
        }
    };
})(jQuery); 
```

参考见：[http ://drupal.org/node/756722](http://drupal.org/node/756722)

# android - 如何解决 onReceivedError 中 ERROR_IO (-7) 的根本原因

> ID：12784350
> 
> 赞同：3
> 
> 时间：2012-10-08T15:02:03.607
> 
> 标签：android, webkit, android-webview, webviewclient, adobe-analytics

我的基于 WebView 的代码太长（并且分散在几个模块中），无法在此处发布，我正在寻找一种可能对其他人有帮助的*通用技术，所以这里是：*

我有一组实现基本网络浏览器的[WebView](http://developer.android.com/reference/android/webkit/WebView.html)、[WebViewClient](http://developer.android.com/reference/android/webkit/WebViewClient.html)和[JavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)派生类。它似乎运行良好，除了在运行[Omniture](http://en.wikipedia.org/wiki/Omniture)的网站上，仅在一部手机上（运行 CyanogenMod 6 (Android 2.2.1) 的 Nexus One 上，url 超过一定（合理）长度的[loadUrl()将](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String%29)**冻结**, 然后最终会超时[onReceiveError()](http://developer.android.com/reference/android/webkit/WebViewClient.html#onReceivedError%28android.webkit.WebView,%20int,%20java.lang.String,%20java.lang.String%29) , ERROR_IO ( [-7](http://developer.android.com/reference/android/webkit/WebViewClient.html#ERROR_IO) ) 并带有以下描述字符串：

> 服务器无法通信。稍后再试。

澄清一下：相同的代码，相同的 URL 在我测试过的所有其他手机上都能完美运行。

我可以通过将此异常归因于该手机中特定版本的[android.webkit](http://developer.android.com/reference/android/webkit/package-summary.html)中的错误来对此不屑一顾，但我不知何故怀疑我可能在自己的代码中遗漏了一些可以解决此问题的东西。原因是在同一部手机上，基于 WebView 的股票浏览器不会出现此问题。

我既好奇又细致，我觉得这很有趣也很有挑战性，也许是深入​​研究一些 HTTP 协议调试技术的好机会。

例如，如果我有办法利用[android.net.http](http://developer.android.com/reference/android/net/http/package-summary.html)来获取诊断日志消息，那将是非常棒的，但如何为 WebView 和 WebViewClient 做到这一点？

有关如何解决此问题的任何建议或提示？

# objective-c - 使用 CALayer 作为 MKAnnotation 委托进行动画注释

> ID：12784351
> 
> 赞同：0
> 
> 时间：2012-10-08T15:02:09.913
> 
> 标签：objective-c, ios, core-animation, mapkit

我想在 MKMapView 上做一个动画注释视图，但我希望动画是平滑的（不像[这样](https://github.com/100grams/Moving-MKAnnotationView)），我认为 CoreAnimation 可能是最好的方法。

我目前正在考虑创建一个 CALayer 的子类作为我的 MKAnnotation 委托，并使用 CoreAnimation 为我的坐标属性设置动画。我认为我什至可以将其用作 MKAnnotationView 的层。

但这是我对 CoreAnimation 理解的局限，因为我从来没有改变层的层次结构，也没有对我的视图层进行一些 3d 转换。

你认为这是解决问题的好方法吗？

您是否有任何代码可以分享以帮助实现目标？

先感谢您。

编辑：如果您认为有更好的方法来执行此操作，例如使 MKAnnotation 委托成为 NSObject 的子类，请也告诉我。我的目标是平滑地为坐标设置动画，为此我想到了 QuartzCore 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:14:06.243

图层与其他图层或视图相关联。

MKAnnotation 对象是直接来自 NSObject 的数据容器对象。您不能使图层成为“MKAnnotation 的代表”

您要做的是设置 MKAnnotationView 的自定义子类，并将图层和动画添加到您的自定义子类。您的地图视图将创建并返回您的自定义注释视图对象，以响应 mapView:viewForAnnotation: 地图视图委托方法。

我自己没有尝试过，但它应该可以工作。文档说注释视图在地图缩放时不会缩放，因此您必须以固定大小创建注释视图，或者变得聪明并编写代码在地图比例更改时缩放注释视图。

# jquery - jquery悬停同一类的多个元素

> ID：12784352
> 
> 赞同：0
> 
> 时间：2012-10-08T15:02:10.300
> 
> 标签：jquery, css

我有一张一年中 12 个月的表（一月到十二月）

然后我将一些月份组合在一起，即：jan to apr = group1，mar to jun = group2

所以我想做的就是改变所有具有相同组名的项目的背景颜色。

```
$('.group1').hover(function() {
    $(this).addClass('tbl_navGroupHover');
}, function() {
    $(this).removeClass('tbl_navGroupHover');
});

$('.group2').hover(function() {
    $(this).addClass('tbl_navGroupHover');
}, function() {
    $(this).removeClass('tbl_navGroupHover');
}); 
```

[http://jsfiddle.net/Q49Rd/1/](http://jsfiddle.net/Q49Rd/1/)

更新，我选择了这个解决方案 - tx 为您提供帮助：

```
<script>";
for ($i = 1; $i < 13; $i++) {
echo "$('.group$i').hover(function() {
    $('.group$i').addClass('tbl_navGroupHover');
}, function () {
    $('.group$i').removeClass('tbl_navGroupHover');
});";
}
echo "</script>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:07:17.983

替换`this`为组类名，也可以使用`toggleClass`method。

```
$('.group1').hover(function() {
    $('.group1').toggleClass('tbl_navGroupHover');
});

$('.group2').hover(function() {
    $('.group2').toggleClass('tbl_navGroupHover');
}); 
```

[http://jsfiddle.net/5cAfR/](http://jsfiddle.net/5cAfR/)

请注意，您尚未在小提琴中加载 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:13:30.757

不要使用`this`insted 的类名来进行所有更改

```
$(this).addClass('tbl_navGroupHover'); 
```

**应该**

```
$(".group1").addClass('tbl_navGroupHover'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:16:20.993

不确定这是否会有所不同，但在 jquery 文档中，“.hover”函数同时采用“handlerIn”和“handlerOut”函数。

您可以尝试以下方法：

```
$('.group1').hover(function() {
    $('.group1').addClass('tbl_navGroupHover');
}, function() {
     $('.group1').removeClass('tbl_navGroupHover');
});

$('.group2').hover(function() {
    $('.group2').addClass('tbl_navGroupHover');
}, function () {
    $('.group2').removeClass('tbl_navGroupHover');
}); 
```

不确定这是否会有所作为。您可能只能指定一个功能并摆脱它。这将在其中一个项目悬停时更改背景颜色，然后在您离开该项目时移除颜色。

希望这可以帮助。

# android - 如何在android中获取下载文件的http url？

> ID：12784362
> 
> 赞同：3
> 
> 时间：2012-10-08T15:02:34.643
> 
> 标签：android, file, http, url, download

我正在尝试找到一种在 android 中获取下载文件的 http-url 的方法。有什么办法吗？我环顾了 DownloadManager，但它似乎不适合这种情况。

例如，如果我们打开带有链接的浏览器：[http](http://www.xyz.com/myapp.apk?param1=abc) ://www.xyz.com/myapp.apk?param1= abc 现在在下载并安装 apk 之后。在同一个应用程序中（当它启动时）我需要得到 -> param1=abc。

任何形式的帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:26:02.793

Personnaly，我认为下载的 url 没有存储在 .apk 文件中。apk 文件是一个可移植文件，可以从不同的 url 地址下载，Web 浏览器不会将元数据添加到 apk 文件中。

# php - 根据选择的锚点突出显示菜单项？

> ID：12784363
> 
> 赞同：0
> 
> 时间：2012-10-08T15:02:37.973
> 
> 标签：php, jquery, wordpress

我正在使用以下教程创建一个单页网站： http: [//www.insitedesignlab.com/how-to-make-a-single-page-website/](http://www.insitedesignlab.com/how-to-make-a-single-page-website/)

是否可以根据选择的锚点更改菜单项的颜色？

这就是我设置菜单的方式

```
 <?php $current = $post->ID; $counter = 1; $mypages = get_pages(array('sort_column' => 'menu_order'));
            foreach( $mypages as $page ) { ?>
            <?php if ($current == $page->ID) { ?>
                <li><a style="color:white!IMPORTANT;" id="menu<?php echo $counter; ?>" href="#section<?php echo $counter; ?>"><?php echo $page->post_title; ?></a></li>
            <?php } else { ?>
                <li><a id="menu<?php echo $counter; ?>" href="#section<?php echo $counter; ?>"><?php echo $page->post_title; ?></a></li>
            <?php } ?>
        <?php $counter++; } ?> 
```

因此，每个菜单每次循环时都会迭代 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:07:07.777

您可以尝试[Jquery Tabs](http://jqueryui.com/demos/tabs/) ...也许更容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:22:55.290

当然，我认为这里正确的方法是绑定选项卡，我的意思是不依赖于锚点，所以每次单击选项卡时它都会改变，所以首先你必须向所有选项卡添加一个类，如下所示：

```
<li><a style="color:white!IMPORTANT;" id="menu<?php echo $counter; ?>" class="tab" href="#section<?php echo $counter; ?>"><?php echo $page->post_title; ?></a></li> 
```

之后，您只需将选项卡元素绑定到 click 函数以在每次选择选项卡时触发事件：

```
$(".tab").click(function(e){
     $(".tab").css("color", ""); //Remove the color from all tabs
     $(this).css("color", "white!IMPORTANT"); //Apply the "highlight" color to the selected
}); 
```

通过这种方式，我们从所有“选项卡”元素中删除颜色，然后将颜色应用于选定的选项卡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:40:55.187

如果您对要突出显示的链接使用 css 类会更好。

CSS：

```
.linkactive{
color:pink;
font-weight:bold;
} 
```

jQuery：

```
$("#nav a").click(){
  $(".linkactive").removeClass("linkactive");
  $(this).addClass("linkactive");
}); 
```

请记住将“linkactive”类添加到您的主页或开始选项卡。

# c# - 从 URL 链接获取名称的正则表达式

> ID：12784366
> 
> 赞同：1
> 
> 时间：2012-10-08T15:02:48.497
> 
> 标签：c#, regex, sharepoint, sharepoint-2010

我在 SharePoint 2010 中有一个超链接字段（又名列）。

说它叫`SalesReportUrl`. 网址如下所示：

```
http://portal.cab.com/SalessiteCollection/October2012Library/Forms/customview.aspx 
```

超链接字段将值存储在两个字段（链接和描述）中。

如果我想`October2012Library`退出 URL，RegEx 会是什么？

我试过这个，但它肯定不工作：

```
@"<a[\s]+[^>]*?href[\s]?=[\s\"\']+(.*?)[\"\']+.*?>([^<]+|.*?)?<\/a>"; 
```

我也试过：

```
^(.*?/)?Forms/$ 
```

但没有运气。

我认为sharepoint像这样存储超链接：

```
http://portal.cab.com/SalessiteCollection/October2012Library/Forms/customview.aspx, some description 
```

看起来这有一个解决方案。但是获取列表或库名称的语法子字符串是什么？[https://sharepoint.stackexchange.com/questions/40712/get-list-title-in-sharepoint-designer-workflow](https://sharepoint.stackexchange.com/questions/40712/get-list-title-in-sharepoint-designer-workflow)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:12:18.567

这个怎么样（正如丹尼尔建议的那样）：

```
string url = @"http://portal.cab.com/SalessiteCollection/October2012Library/Forms/customview.aspx";
Uri uri = new Uri(url);
if(uri.Segments.Length > 2))
    Console.WriteLine(uri.Segments[2]); // will output "October2012Library/" 
```

`.Replace("/", string.Empty)`如果您想摆脱“/”，您可以添加

```
Console.WriteLine(uri.Segments[2].Replace("/", string.Empty)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:10:25.080

尝试使用这个`new RegEx("SalessiteCollection/(.+?)/Forms").match(<urlString>).groups[1].value`

虽然这是一个粗略的答案，但您可能需要进行一些更正，但我希望您能理解我要解释的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:15:12.897

http://[^/]+/[^/]+/([^/]+)/

匹配的 group[1] 是您需要的值。它在 url 中获得第三部分（除以 /）。如果您需要确保它后面跟着其他部分，即表格，请将其添加到末尾。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T15:09:00.740

也许这个？

```
http:\/\/([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}\/[a-zA-Z]*\/([a-zA-Z0-9]*)\/ 
```

[http://rubular.com/r/LuuuORPRXt](http://rubular.com/r/LuuuORPRXt)

# php - CodeIgniter Facebook API getuser 总是 0

> ID：12784369
> 
> 赞同：0
> 
> 时间：2012-10-08T15:02:57.630
> 
> 标签：php, facebook, codeigniter

我知道这是重复的，但是，我已经尝试了其他问题中建议的几乎所有内容。

我目前正在获得一个重定向循环，因为 getUser 总是返回 0，即使在批准应用程序之后也是如此。

代码：

```
public function auth() {
    $user = $this->facebook->getUser();

    if ($user) {
        $user = $this->facebook->api('/me');
        if (!$this->Users->getByID($user["id"])) {
            $this->data->needsRegister = true;
        } else {
            $toSetInSessions = new stdClass();
            $toSetInSessions->authed = 1;
            $dbUser = $this->Users->getByID($user["id"]);
            foreach ($dbUser as $key => $value) {
                $toSetInSessions->user->$key = $value;
            }
            $this->session->set_userdata($toSetInSessions);
            redirect("/");
        }
    } else {
        $params = array('scope' => 'email,read_friendlists');
        if ($_SERVER['HTTP_USER_AGENT'] != "facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)") {
            redirect($this->facebook->getLoginUrl($params));
        }
    }

    $this->load->view('header', $this->data);
    $this->load->view('auth', $this->data);
    $this->load->view('footer', $this->data);
} 
```

这是我的这个应用程序设置页面的截图。

[https://dl.dropbox.com/u/6647629/facebookapp.png](https://dl.dropbox.com/u/6647629/facebookapp.png)

有时它确实有效，但大多数时候它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:26:23.563

在这里找到解决方案：[http ://www.galalaly.me/index.php/2012/04/using-facebook-php-sdk-3-with-codeigniter-2-1/](http://www.galalaly.me/index.php/2012/04/using-facebook-php-sdk-3-with-codeigniter-2-1/)

不得不补充：

```
 parse_str($_SERVER['QUERY_STRING'], $_REQUEST); 
```

# apache-flex - 运行 mxmlc 时出错

> ID：12784375
> 
> 赞同：0
> 
> 时间：2012-10-08T15:03:15.633
> 
> 标签：apache-flex, air, mxml

我在我的机器上安装了 java 1.7，现在在为 adobe air 应用程序编译 mxmlc 命令时出现以下错误。 **此应用程序无法启动 bcoz MSVCR100.dill 未找到。**

请给我建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:09:44.947

问题已解决，我的步骤如下： 1\. 使用默认安装目录（C:\Program Files\Java）安装最新的 JRE（当前为 JRE7） 2\. 将 C:\Program Files\Java\jre7\bin\msvcr100.dll 复制到 system32目录

# r - 一组内的多个箱线图

> ID：12784376
> 
> 赞同：3
> 
> 时间：2012-10-08T15:03:16.880
> 
> 标签：r, ggplot2, boxplot

我找到了一些[解决方案](https://stackoverflow.com/questions/12427887/how-to-plot-multiple-box-plots-in-one-plot)，但不完全是我想要的。我在 R 中有 5 个数据框，每个数据框有 4 列：

假设第一个数据框的名称是“Gene1”

```
工业 1 工业 2 工业 3 工业 4
1 3 3.2 2.5
1 3 4 2
1.5 2 2.2 1
3.4 2 1 3
```

其余的数据框称为“Gene2”、“Gene3”、“Gene4”、“Gene5”，并且是相似的。

我想为所有数据框和所有列在同一个图中并排绘制箱线图。我没有找到任何这样的情节，所以我无法上传图片，但我会尽力解释。

现在从上面的数据来看，该图将有 20 个箱形图。前 4 个箱形图应该彼此靠近，x 轴名称应该是“Gene1”（对于所有 4 个箱形图），然后在图中留出一点空间，再有 4 个箱形图，x 轴名称为“Gene2”，依此类推.

我可以轻松地将所有箱线图绘制在一个图中，但我无法区分数据框。意思是，它应该清楚地告诉我们前 4 个箱形图来自“Gene1”，接下来的 4 个箱形图来自“Gene2”，依此类推。

如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T15:26:54.107

我怀疑这是您想要的，实际上使用标准`graphics`包中的绘图功能并不是很复杂。这些组被绘制为 4 个单独的面板，但在外部边缘绘制了一个共享的 y 轴和标题，它看起来像一个单独的图。

```
# Faking the data, since you didn't provide any
Gene <- data.frame(matrix(rweibull(100*4, 1), 100))
names(Gene) <- paste0("Ind", 1:4)
Gene <- rep(list(Gene), 4)

# Setup the panels
layout(t(1:4))
par(oma=c(2, 4, 4, 0), mar=rep(1, 4), cex=1)
# `mar` controls the space around each boxplot group

# Calculating the range so that the panels are comparable
my.ylim <- c(min(sapply(Gene, min)), max(sapply(Gene, max)))

# Plot all the boxes
for(i in 1:length(Gene)){
    boxplot(Gene[[i]], ylim=my.ylim, axes=FALSE)
    mtext(paste("Gene", i), 1, 0)
    if(i == 1){
        axis(2, las=1)
        mtext("Expression or what you have", 2, 3)
    }
}
title("Look at all my genes!", outer=TRUE) 
```

![在此处输入图像描述](../Images/29b817adc8de99cd497b383ec42244e1.png)

顺便说一句，我建议将您的数据框存储在一个列表中，而不是通过将它们命名为“Gene1”、“Gene2”、“Gene3”和“Gene4”来模仿一个列表。以这种方式自动化要容易得多。如果您仍想将它们存储为单独的变量，请替换`Gene[[i]]`with`get(paste0("Gene", i))`和`my.ylim <- ...`with`min(c(min(Gene1), min(Gene2) ...`等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T15:14:07.790

这是您想要的，使用`ggplot2`和相关工具的黑暗镜头。

```
library(ggplot2)
library(reshape2)
library(plyr)

Gene1 <- read.table(text = "Ind1     Ind2       Ind3      Ind4
1          3         3.2        2.5
1          3         4          2
1.5        2         2.2        1
3.4        2         1          3", header = TRUE)

#Make a copy of Gene1
Gene2 <- Gene1

#A Round about way to rbind these together with an ID column
combined_data <- ldply(list(Gene1 = Gene2, Gene2 = Gene2))

#Melt into the long format needed by ggplot2
combined_data_melt <- melt(combined_data, id.vars = 1)

#Plot and use facet_wrap for each data.frame
ggplot(combined_data_melt, aes(variable, value)) +
  geom_boxplot() +
  facet_wrap(~.id, ncol = 1) +
  theme_bw() 
```

给你这样的输出：

![在此处输入图像描述](../Images/b392eee68cd5756122cb2b76205287e8.png)

这应该做你想要的，对代码进行非常小的改动。感谢[Joran](https://stackoverflow.com/users/324364/joran)在[R 聊天](https://chat.stackoverflow.com/rooms/106/r)中关于闪避的提示。

```
ggplot(combined_data_melt, aes(.id, value, dodge = variable)) +
  geom_boxplot(position = position_dodge(width = 0.8)) +
  theme_bw() 
```

![在此处输入图像描述](../Images/46c8417c5cc019f8c5680440f9fc0d68.png)

# google-apps-script - 获取不在收件箱中的邮件列表（如已发送邮件）

> ID：12784381
> 
> 赞同：1
> 
> 时间：2012-10-08T15:03:30.510
> 
> 标签：google-apps-script, gmail, outgoing-mail

如果已经回答了这个问题，请原谅我，但我一直在寻找这个问题的答案，但还没有想出任何有用的东西。

我们为他们的邮件（来自 Exchange 2003）迁移了一些试点用户到谷歌应用程序。其中一位用户有许多电子邮件，这些电子邮件仅存在于他在 Outlook/exchange 中的已发送邮件文件夹中。他通常将他发送的项目“归档”到收件箱的子文件夹中。任何留在他的“已发送项目”文件夹中的东西都是他仍然需要跟进的东西。迁移后，我们得出的结论是，所有以这种方式“存档”的邮件都显示在他的 Outlook 谷歌个人资料的“已发送邮件”文件夹/标签中（它也仍在“存档”文件夹中）。

结果是他现在有一个“已发送邮件”文件夹，其中包含几 1000 封电子邮件，其中大约 +90% 是他的一个“存档”文件夹中的双份。由于可能有许多其他用户（尚未迁移）具有相同的“归档”方式，因此我正在寻找一种方法来自动为仅在他发送的项目文件夹中的消息添加标签/标签和其他地方。我制作了一个简单的谷歌脚本来查找标签“已发送”，但这就是我遇到的问题，该问题一直阻碍我完成这项工作。没有什么我尝试，脚本找到的唯一邮件是他的收件箱（子）文件夹中的邮件，因此脚本找不到任何仅存在于“已发送邮件”标签下的邮件。所以我的问题：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:11:15.810

快速更新：我通过一些体力劳动解决了这个问题。如果有人有答案，我仍然会非常感兴趣。

# php - 具有多维数组的起始级别

> ID：12784383
> 
> 赞同：1
> 
> 时间：2012-10-08T15:03:33.550
> 
> 标签：php, arrays, codeigniter, recursion, multidimensional-array

我有这个有组织的数组，它与下面的递归函数配合得很好。

```
Array
(
[6] => Array
    (
        [0] => Array
            (
                [id_parent] => 6
                [level] => 2
                [lang] => en
                [id_page] => 15
                [title] => test 3
                [nav_title] => 
                [url] => test-3
            )

    )

[13] => Array
    (
        [0] => Array
            (
                [id_parent] => 13
                [level] => 3
                [lang] => en
                [id_page] => 14
                [title] => test 2
                [nav_title] => 
                [url] => test-2
            )

    )

[11] => Array
    (
        [0] => Array
            (
                [id_parent] => 11
                [level] => 2
                [lang] => en
                [id_page] => 13
                [title] => Test
                [nav_title] => 
                [url] => test
            )

    )

[3] => Array
    (
        [0] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 11
                [title] => Spare Parts
                [nav_title] => 
                [url] => spare-parts
            )

        [1] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 10
                [title] => İndustrial İroning Table
                [nav_title] => 
                [url] => industrial-ironing-table
            )

        [2] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 9
                [title] => İndustrial İroning Boiler
                [nav_title] => 
                [url] => industrial-ironing-boiler
            )

        [3] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 8
                [title] => Steam Boılers
                [nav_title] => 
                [url] => steam-boilers
            )

        [4] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 7
                [title] => Home Type Steam Boilers
                [nav_title] => 
                [url] => home-type-steam-boilers
            )

        [5] => Array
            (
                [id_parent] => 3
                [level] => 1
                [lang] => en
                [id_page] => 6
                [title] => Used İrons
                [nav_title] => 
                [url] => used-irons
            )

    )

[0] => Array
    (
        [0] => Array
            (
                [id_parent] => 0
                [level] => 0
                [lang] => en
                [id_page] => 1
                [title] => Home
                [nav_title] => 
                [url] => home
            )

        [1] => Array
            (
                [id_parent] => 0
                [level] => 0
                [lang] => en
                [id_page] => 2
                [title] => About Us
                [nav_title] => 
                [url] => about-us
            )

        [2] => Array
            (
                [id_parent] => 0
                [level] => 0
                [lang] => en
                [id_page] => 3
                [title] => Products
                [nav_title] => 
                [url] => products
            )

        [3] => Array
            (
                [id_parent] => 0
                [level] => 0
                [lang] => en
                [id_page] => 5
                [title] => Quality
                [nav_title] => 
                [url] => quality
            )

        [4] => Array
            (
                [id_parent] => 0
                [level] => 0
                [lang] => en
                [id_page] => 4
                [title] => Contact Us
                [nav_title] => 
                [url] => contact-us
            )

    )

) 
```

但是，如果我从 where 开始查询，它会很好地递归`id_parent = 0`。当我想选择一个随机页面及其所有以下级别时，它仅适用于所选页面的下一级。我想它是关于`index`但无法解决它。

```
function _populate_list($items, $parent = null, $level = '0', $max_depth = '1', $ul_class = '', $active_class = '', $active_segment = 2, $use_span = false, &$data = '')
{
  $this->load->config('route_page', TRUE);
  $route_page = $this->config->item('route_page', 'route_page');

  $index = ($parent == null) ? '0' : $parent;
  $space = str_repeat("\t", $level);

  if (isset($items[$index]))
  {
    $data .= "\n" . $space . '<ul';
    $data .= $parent == null ? ' id="navigation"' : '';
    if ($ul_class != '')
      $data .= ' class="' . $ul_class . '"';
    $data .= '>' . "\n";

    foreach ($items[$index] as $child)
    {
      $data .= $space . '<li';

      if ($active_class)
      {
        $tmp = $route_page[$child['lang'] . '/' . $child['id_page']];
        $tmp = explode('/', $tmp);
        if ($this->uri->segment($active_segment) == $tmp[$active_segment - 1])
        {
          $data .= ' class="' . $active_class . '"';
        }
      }

      $data .= '>';

      $data .= /*id="' . $child['lang']. '-' .$child['id_page'] . '">'.*/ "\n" . $space . '<a href="' . base_url() . $route_page[$child['lang'] . '/' . $child['id_page']] . '">';

      if ($use_span)
        $data .= '<span>';

      if ($child['nav_title'] != '')
        $data .= $child['nav_title'];
      else
        $data .= $child['title'];

      $data .= ($use_span) ? '</span></a>' . "\n" : '</a>' . "\n";

      if (($level + 1) < $max_depth)
      {
        $this->_populate_list($items, $child['id_page'], $level + 1, $max_depth, '', '', $active_segment + 1, $use_span, $data);
      }

      $data .= $space . '</li>' . "\n";
    }

    $data .= $space . '</ul>' . "\n";
  }
  return $data;
} 
```

有什么灯可以继续吗？

**评论后编辑**

好吧，现在我正在使用@Baba 提供的方式，除非我无法控制开始和结束深度，否则它可以工作。

```
function build_navigation(array $array, $no = 0, $ul_class = '', $active_class = 'active', $active_segment = '2', $use_span = true)
{
  $this->load->config('route_page', TRUE);
  $route_page = $this->config->item('route_page', 'route_page');

  $child = $this->build_navigation_children_setter($array, $no);
  if (empty($child)) return "";
  $data = '<ul';
  if('' != $ul_class) $data .= ' class="' . $ul_class . '"';
  $data .= '>'."\n";

  foreach ( $child as $value ) 
  {

    //$content .= sprintf("\t<li>%s</li>\n", $value['title']);
    $data .= "\t" . '<li';
    if($active_class)
    {
      $tmp = $route_page[$value['lang'] . '/' . $value['id_page']];
      $tmp = explode('/', $tmp);
      if($this->uri->segment($active_segment) == $tmp[$active_segment-1])
      {
         $data .=  ' class="' . $active_class . '"';
      }
    }
    $data .= '>';

    $data .= '<a href="'. base_url() . $route_page[$value['lang'] . '/' . $value['id_page']] . '">';

    if ($use_span) $data .= '<span>';

    if('' != $value['nav_title']) $data .= $value['nav_title'];
    else $data .= $value['title'];

    $data .= ($use_span) ? '</span></a>' . "\n" : '</a>';
    $data .= $this->build_navigation($array, $value['id_page'], $level+1, $max_depth);
    $data .= "\t" . '</li>' . "\n";
  }
  $data .= "</ul>\n";
  return $data;
}

function build_navigation_children_setter($array, $id_page)
{
  return array_filter(
    $array, 
    function ($var) use($id_page)
    {
      return $var['id_parent'] == $id_page;
    }
  );
} 
```

如何控制开始和停止深度？

# c++ - 当我们在模板声明中看到 class C = myarray 是什么意思？

> ID：12784385
> 
> 赞同：0
> 
> 时间：2012-10-08T15:03:41.600
> 
> 标签：c++

在浏览标准时，我在模板声明中发现了一些令我困惑的语法：

```
template <typename T> class myarray;

template </*...*/, template <typename T> class C = myarray> 
```

是什么`class C = myarray`意思？它是默认参数吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:05:43.213

这是模板模板参数的*默认*值。如果您不指定参数，则默认为`myarray`.

例子：

```
template <typename> class Foo;
template <typename> class Bar;

template <typename T, template <typename> class C = Foo>
class Zip
{
    typedef C<T> type;  // example use of "C"
    // ...
};

Zip<int, Bar> x;  // OK
Zip<int>      y;  // OK, y has type Zip<int, Foo> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:06:36.343

它基本上是参数的“默认值”。

# blogengine.net - 在 blogengine.net (global.asax) 中永久重定向 301

> ID：12784391
> 
> 赞同：1
> 
> 时间：2012-10-08T15:04:16.140
> 
> 标签：blogengine.net

我想将旧地址 www.informarea.it/BlogEngine 重定向到新地址 www.informarea.it...

**我的 blogengine.net 的 global.asax 是 **

```
void Application_BeginRequest(object source, EventArgs e)
{
    HttpApplication app = (HttpApplication)source;
    HttpContext context = app.Context;

   // Attempt to perform first request initialization
    FirstRequestInitialization.Initialize(context);
} 
```

**我可以永久应用重定向代码吗？**

```
if (app.url.ToString().ToLower().Contains("http://www.informarea.it/BlogEngine")) 
 {

     HttpContext.Current.Response.Status = "301 Moved Permanently";   

     HttpContext.Current.Response.AddHeader("Location",url.Replace("http://www.informarea.it/blogengine", "http://www.informarea.it"));

} 
```

有人能帮我吗？非常感谢法布里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:53:15.297

这应该将路径以 /BlogEngine 开头的任何查询重定向到删除 /BlogEngine 的相同 url。

```
if(Request.Url.PathAndQuery.StartsWith("/BlogEngine", StringComparison.OrdinalIgnoreCase)) {
    Response.RedirectPermanent(Request.Url.PathAndQuery.Substring(11), true);
} 
```

优点：

*   提供您要求的 301 重定向
*   为以下请求保持路径和查询字符串的其余部分不变

缺点：

*   需要 .net 4.0（BlogEngine 的 2.7 版针对 4.0，所以我认为这不会成为问题。）

# sql - “显示表”等效语法

> ID：12784392
> 
> 赞同：-4
> 
> 时间：2012-10-08T15:04:18.717
> 
> 标签：sql, sql-server-2008, tsql

我需要做相当于

```
SHOW TABLES LIKE 'ka_product_import' 
```

在 SQL Server 2008 中。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:08:16.827

据我了解，您是否试图显示所有名称为`KA_PRODUCT_IMPORT`：

```
SELECT * FROM
SYS.TABLES
WHERE NAME LIKE '%KA_PRODUCT_IMPORT%' 
```

# ruby-on-rails - Activeadmin 中的确认框

> ID：12784395
> 
> 赞同：2
> 
> 时间：2012-10-08T15:04:43.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我正在使用活动管理员 gem 来管理用户，我必须以这样的方式进行一些自定义，以便当一些管理员用户更新信息时，我想要显示页面上的 java 脚本确认框，要求确认更新。

有人会请我走上正确的道路，并告诉我如何完成我的任务。我将非常感谢你们所有人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:34:41.273

假设您的提交按钮被包裹在`<li class="commit button">`

```
$(function(){
  $('li.commit input').click(function(){
    var response = confirm("YOUR CONFIRMATION MSG");
    if(response){
      return true;
    }

    return false;
  });
} 
```

编辑：只需重读您的问题。你的意思是你想让管理员更新信息，然后当它保存并显示在显示页面上时，管理员需要确认吗？

# git - 如何让 gitignore 跟踪文件的子目录实例而忽略其他所有内容？

> ID：12784396
> 
> 赞同：1
> 
> 时间：2012-10-08T15:04:44.083
> 
> 标签：git, gitignore

> **可能重复：**
> [Git - 将复杂目录结构中的文件列入白名单](https://stackoverflow.com/questions/9162919/git-whitelisting-files-in-a-complex-directory-structure)

我想要一个 git 存储库只跟踪名为 eg 的文件`SOURCES`，而其他所有内容都应被忽略（例如，一棵 pdf 文件树，其中每个`SOURCES`文件都列出了它们的来源）。最简单的镜头是

```
*
!SOURCES 
```

在`.gitignore`. 然而，排除 eg`A/SOURCES`被 覆盖`*`，需要我使用`git add -f`. 如何`.gitignore`修改以忽略除命名文件之外的所有内容`SOURCES`而不需要强制添加？

**编辑**[此处](https://stackoverflow.com/a/1248601/321973)发布的解决方案将不起作用，因为目录结构不固定，即`SOURCES`不应该`.gitignore`手动添加包含文件的新目录...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:11:54.550

您无法仅使用`.gitignore`

Git 不跟踪路径。它仅跟踪对象（〜文件）。

那么，为什么不反转表格：

```
git add -f -- */*/SOURCES */SOURCES 
```

或者

```
shopt -s globstar
git add -f -- **/SOURCES 
```

或者拿出大枪：

```
git add -f -- $(find -type f -name SOURCES) 
```

甚至

```
find -type f -name SOURCES -exec git add -f -- {} \+ 
```

**未经测试的想法**也许像这样的东西可能在预提交挂钩中？

* * *

**更新**更多自动化的想法：

将此添加到 .git/config

```
[alias]
ac = "!_() { git add -f -- */*/SOURCES && git commit \"$@\"; }; _" 
```

现在，你可以说

```
git commit -m 'like you usually work' 
```

它会自动添加`*/*/SOURCES`

# ruby-on-rails - Rails 2\. 通过 update_attributes 调用虚拟属性的设置器

> ID：12784397
> 
> 赞同：0
> 
> 时间：2012-10-08T15:04:50.107
> 
> 标签：ruby-on-rails, attr, update-attributes, attr-accessor

我的表单中有一个额外的属性（：pagesize），它不在数据库中。它还有一个设置器：

```
def pagesize= pagesize
  self.preferences["pagesize"] = pagesize
end 
```

我想要'update_attributes' 方法来调用该设置器。:pagesize 属性的最佳类型是什么？attr_accessor, attr_writer...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:14:01.633

如果您的模型中没有定义该属性，您可以定义设置器，然后执行您想要的任何逻辑：

```
class YourModel < ActiveRecord::Base

  attr_writer :pagesize

  def pagesize=(val)
    self.size_of_page = val
  end

end 
```

像这样的东西。我写了 AR 版本，因为我假设你正在使用它，但是 DataMapper 或 mongoid 的原理是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:28:32.340

您可以在 attr_accessor 变量上调用 update_attributes，但需要将其定义为可访问的。此外，如果您将变量定义为 attr_writer，则无需定义 setter 方法，因为它已添加到后端。Checkout[为什么使用 Ruby 的 attr_accessor、attr_reader 和 attr_writer？](https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer)了解更多信息

# android - 将图像裁剪为任何形状 Android

> ID：12784404
> 
> 赞同：4
> 
> 时间：2012-10-08T15:05:15.517
> 
> 标签：android, image, crop

到目前为止，我能够实现设备中可用的默认裁剪选项。但我的要求就像用4个点裁剪图像，这样任何图像都可以裁剪成任何形状。

任何想法，如何实现。DocumentScanner 应用程序已使用此功能。

# jquery - 根据视口宽度更改图像源

> ID：12784405
> 
> 赞同：1
> 
> 时间：2012-10-08T15:05:17.403
> 
> 标签：jquery

```
<script type="text/javascript">
  $(window).resize(function(){
  var width = $(window).width(); 

   if (width < 361) {
      $(".infograph-image").attr("src","/images/infographicHowMobile.png");
   }
 }); 
</script> 
```

我希望根据视口宽度大小更改给定图像的图像源。如果视口宽度大小为 360 或更小，请更改为图像的移动版本。

我有两个简单的问题：

1）我们如何才能做到：a）检测窗口调整大小和文件准备好？

这个，我相信我得到了：

我需要将其更改为函数。然后在加载时调用它；

```
checkResponsive(); 
```

然后绑定一个事件监听器：

```
$(window).resize(checkResponsive); 
```

2）我们有几张图片需要手机版，应该转换成功能吗？或者几个ifs可以工作？

请你给我一个关于这两个问题的开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:30:03.870

创建一个单独的函数并在两个事件上调用它们。因此，例如，像这样创建函数 mobileImg()：

```
function mobileImg(targetClass, imageSrc) {
    var width = window.innerWidth; // No need for jQuery here, raw JS can do this

    if(width < 361) {
        $(targetClass).attr("src", imageSrc);
    }
} 
```

然后在这两个事件上调用它。

```
$(document).ready(mobileImg(".infograph-image", "/images/infographicHowMobile.png"));
$(window).resize(mobileImg(".infograph-image", "/images/infographicHowMobile.png")); 
```

然后，您可以根据需要使用任何参数调用该`mobileImg`方法。如果你真的想让它干净，还要检查传递的元素和图像是否存在，并在需要的地方使用后备。

# java - 在 Maven 多模块项目的测试阶段之前启动 Jetty

> ID：12784407
> 
> 赞同：2
> 
> 时间：2012-10-08T15:05:39.017
> 
> 标签：java, maven, jetty, overlays

我在一个多模块 Maven 项目（比如说 foo-web）中有一个 WAR 模块，它实现了一个 Web 服务。然后我有一个 foo-cli，它实现了一个 Web 服务客户端并在几个单元测试中对其进行测试。

为了使它工作，我在测试阶段之前以这种方式启动 Jetty：

```
<dependency>
  <groupId>${project.groupId}</groupId>
  <artifactId>foo-web</artifactId>
  <version>${project.version}</version>
  <type>war</type>
  <scope>test</scope>
</dependency>         
...
<plugin>
<groupId>org.mortbay.jetty</groupId>
<artifactId>jetty-maven-plugin</artifactId>
<version>8.1.5.v20120716</version>
   <configuration>

     <scanIntervalSeconds>10</scanIntervalSeconds>
     <useTestScope>true</useTestScope>
     <connectors>
       <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
         <port>8080</port>
         <maxIdleTime>60000</maxIdleTime>
       </connector>
     </connectors>
   </configuration>

<executions>
    <execution>
      <id>start-jetty</id>
      <phase>process-test-classes</phase>
      <goals>
        <goal>run</goal>
      </goals>
      <configuration>
        <scanIntervalSeconds>0</scanIntervalSeconds>
        <daemon>true</daemon>
      </configuration>
    </execution>
   </executions>          
</plugin> 
```

当我从 foo-cli 模块中运行“mvn test”时，这非常有效（它甚至会自动停止，无需指定其他任何内容）。但是，当我尝试转到上层 (foo) 并从那里发出“mvn test”时，即我尝试为项目中的所有模块运行所有测试，它失败并显示“404 - 未找到”。从输出中，我可以看到覆盖（战争依赖）似乎完全被忽略了。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:15:15.313

您应该尝试将集成测试移至顶级项目。这样，它将在 WAR 工件构建后运行。

你看过[Maven Failsafe Plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)吗？它是为你正在做的事情而设计的，这实际上是一个集成测试，而不是一个单元测试。该页面提供了一些很好的建议，说明您为什么要使用该`integration-test`阶段进行集成测试。

也就是说，它描述了为什么你可能想在`start-jetty`期间做`pre-integration-test`等等，这样你就可以适当地把它全部拆掉。

# sql - SQL Server OLEDB 错误，没有详细信息

> ID：12784408
> 
> 赞同：1
> 
> 时间：2012-10-08T15:05:39.883
> 
> 标签：sql, sql-server, sql-server-2000, oledb

我有一个 SQL Server 代理作业正在运行，它使用存储过程执行多项操作，然后将一些数据导出到 xls 电子表格并通过电子邮件发送该电子表格。大多数情况下它都可以工作，但每月有几次作业失败并出现错误：

> OLE DB 提供程序“Microsoft.Jet.OLEDB.4.0”报告错误。提供商没有提供有关该错误的任何信息。[SQLSTATE 42000]（错误 7399）。步骤失败。

感谢 Microsoft，提供详细的错误消息。无论如何，短期修复通常是简单地重新运行工作。通常这可以工作，但在极少数情况下不会，我必须重新启动 SQL Server 实例。

以下是我的代码与 OLEDB 交互的方式：

```
 Insert into OPENROWSET('Microsoft.Jet.OLEDB.4.0', 'Excel 5.0;Database=\\Excel\POStatus\POStatus.xls;', 
   'SELECT * FROM [POStatus$]')  

Select --Tons of columns with tons of math and functions
FROM --5 tables joined together (left joins)
WHERE -- Tons of where conditions
Order by --Case statement for custom sorting

Set @vCommand =  'copy \\Excel\POStatus\POStatus.xls \\Excel\POStatus\POStatus_' + @vDate + '.xls'

EXEC master..xp_cmdshell @vCommand , NO_OUTPUT

... omitted for brevity...

  Set @nvSubject = ' POStatus ' + @vDate
  Set @nvMessage = ' This is an automated message, please respond to the IS department,  thank you ' 
  Set @nvMessage = @nvMessage + char(13) + char(10)

      Set @nvAttachments = '\\Excel\POStatus\POStatus_' + @vDate + '.xls'

      Exec master..xp_sendmail 
           @recipients = @nvRecipients , @copy_recipients = @nvCopy_recipients ,
           @subject = @nvSubject , @message = @nvMessage ,  
           @query = @nvQuery , @width = @iWidth , @attachments = @nvAttachments 
```

那么，这是什么原因造成的，我该如何预防呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:52:03.880

When you call OPENROWSET, it load the DLL for OLEDB provider for Excel. These operations happens inside the SQL Server Stack memory. When a lot of call to older DLL (ActiveX/COM) are made, it's not impossible that your stack might get full. You can resolve this in 2 ways:

1) You make these operations outside a TSQL code. You can use a SSIS package for example but you have to change your code not to use OPENROWSET. You can use the DTS Wizard to do most of the job. This is my personnal recommandation !

2) You can also set SQL Server to have a bigger memory Stack by using the -g command parameter. I think 256 MB is the default and you can set it to 512\. To do that you need to open the SQL Server Configuration Manager. Depending on your version, you should have a place to change the "Startup Parameters"

# php - YOUTUBE API : 检索视频关键字

> ID：12784410
> 
> 赞同：3
> 
> 时间：2012-10-08T15:05:43.870
> 
> 标签：php, youtube, xml-parsing, youtube-api, keyword

最近 youtube 决定仅将视频关键字输出给经过身份验证的开发人员。

我注册了一个开发者密钥

我正在尝试获取一个我将通过请求解析的 XML

[https://gdata.youtube.com/feeds/api/videos/COwIYbYQUrQ?key=MY_VERY_LONG_DEVELOPER_KEY](https://gdata.youtube.com/feeds/api/videos/COwIYbYQUrQ?key=MY_VERY_LONG_DEVELOPER_KEY)

输出 XML 仍然发送给我

```
<media:keywords/> 
```

我在这个过程中缺少什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:57:51.337

`<media:keywords />`除非您“验证”您是视频的所有者，否则YouTube 会将该元素设为空。如果您在 YouTubeRequestSettings 构造函数中提供您的**用户名**和**密码**，您仍然可以看到所有视频的关键字。

在 .NET 中：

```
YouTubeRequestSettings settings = new YouTubeRequestSettings(appname, developerskey, username, password); 
```

对于 PHP： [https ://developers.google.com/youtube/2.0/developers_guide_php#ClientLogin_for_Installed_Applications](https://developers.google.com/youtube/2.0/developers_guide_php#ClientLogin_for_Installed_Applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:15:29.303

还没有真正接触过 Youtube API，但是

```
<media:keywords/> 
```

是一个空元素。这意味着元素“media:keywords”没有数据。我的猜测是上传者没有为相关视频指定任何关键字（这些关键字对所有上传者都是可选的，这意味着您的脚本将不得不处理此类事件）。

看了有问题[的视频](http://www.youtube.com/watch?v=COwIYbYQUrQ&feature=g-vrec)（ID：COwIYbYQUrQ）后，我可以看到我的怀疑似乎是正确的，因为上传者实际上并没有指定任何关键字。

# ios - 应用程序窗口应该在应用程序启动结束时有一个根视图控制器 - 即使所有已知问题都已修复

> ID：12784411
> 
> 赞同：8
> 
> 时间：2012-10-08T15:06:04.960
> 
> 标签：ios, ios5, ios-simulator, ios6

我有这个问题，但是我在这个论坛或一般互联网上找不到的信息似乎都无法帮助我。

似乎有两个地方可能会出现此错误：

1.  main.m - 我的函数如下所示：

```
 int main(int argc, char *argv[])
    {
        @autoreleasepool {
            return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
        }
    } 
```

最后一个参数`UIApplicationMain`返回`NSString`my 类的值`AppDelegate`。因此，这工作正常。

2.AppDelegate.m - 有一种“旧”的方式来设置根视图控制器，如下所示：

```
 [self.window addSubview:rootViewController]; 
```

但是，在我的应用程序中，它已经更新为：

```
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

因此，互联网上的当前信息均无效。这有点令人费解，因为我的同事可以让它在他的计算机上完美运行 - 他是向我发送应用程序源代码的人，因此所有设置和代码应该完全相同。

我正在尝试在模拟器中启动它。它是针对 iOS 5 构建的，但我试图在 iOS 6.0 模拟器上运行它。

我有最新的 XCode (4.5.1)。

有什么理由会发生这种情况吗？我该如何纠正它？

非常感谢

汤姆

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-11T00:49:37.683

我在尝试将 UITableView 添加到单视图应用程序时遇到了完全相同的事情。相反，创建一个默认的 Master-Detail Application 项目（file->new->target->...）并查看 AppDelegate 的 didFinishLaunchingWithOptions 实现：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

MDMasterViewController *masterViewController = [[MDMasterViewController alloc] initWithNibName:@"MDMasterViewController" bundle:nil];
self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
self.window.rootViewController = self.navigationController;
[self.window makeKeyAndVisible];
return YES;
} 
```

与其直接将视图控制器设置为窗口的 rootViewController，不如为 initWithRootViewController 创建一个使用视图控制器初始化的导航控制器，然后将该导航控制器设置为窗口的 rootViewController。（请注意，您还必须将导航控制器隐藏在一个属性中，这样它就不会被破坏）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-09T04:43:53.120

只需更改此：

```
[window addSubview:tabBarController.view]; 
```

对此：

```
[window setRootViewController:tabBarController]; 
```

或者 addSubView 中的任何内容：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T00:57:13.550

尝试在项目菜单中定义默认视图控制器，

> 选择您的项目 => 摘要 => 主界面 => 键入您的主视图控制器

每次我开始新项目时，我都会遇到与您相同的错误，每次都这样做解决了，希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:20:00.173

执行以下操作，至少在您的代码上添加一个异常断点，看看您是否能找出问题所在。如果您不知道如何操作，请使用[本教程。](http://ijoshsmith.com/2011/11/28/debugging-exceptions-in-xcode-4-2/)另外，编译时是否有任何警告？即使它让您编译，有时警告也可以揭示您的应用程序崩溃的原因。

# mongodb - 将子文档数组元素添加到 mongoDB 中的子文档数组元素

> ID：12784423
> 
> 赞同：4
> 
> 时间：2012-10-08T15:06:51.703
> 
> 标签：mongodb

这可能吗？我有一个集合 C，具有一组属性 A1。每个属性都有一个子属性数组 A2。

如何将子文档添加到特定的 C.A1 子文档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T02:32:43.877

这是一个例子。

```
db.docs.insert({_id: 1, A1: [{A2: [1, 2, 3]}, {A2: [4, 5, 6]}]}) 
```

如果您知道要插入的子文档的索引，则可以在中间使用带有索引（从 0 开始）的点表示法：

```
db.docs.update({_id: 1}, {$addToSet: {'A1.0.A2': 9}}) 
```

这导致：

```
{
    "A1" : [
        {
            "A2" : [
                1,
                2,
                3,
                9
            ]
        },
        {
            "A2" : [
                4,
                5,
                6
            ]
        }
    ],
    "_id" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:06:30.637

是的，这是可能的。如果您发布一个示例，我可以更具体地向您展示更新查询的样子。但这里有一个镜头：

```
db.c.update({ A1: value }, { $addToSet: { "A1.$.A2": "some value" }}) 
```

我实际上还没有尝试过这个（我现在不在 Mongo 实例前面）而且我正在记忆中，但这应该让你非常接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T14:14:42.857

是的，$push 可以用来做同样的事情。试试下面给定的代码。

```
db.c.update({ A1: value }, { $push: { "A1.$.A2": num }}); 
```

# html - 如何在 UIWebView IOS 上显示 html 内容

> ID：12784426
> 
> 赞同：5
> 
> 时间：2012-10-08T15:06:59.303
> 
> 标签：html, objective-c, ios, uiwebview, nsmutablestring

我有一个表单segue，应该显示硬编码的html页面。现在我有一个两部分的问题第一个问题是

```
 <CENTER><H1>A Simple Sample Web Page</H1><H4>By Frodo</H4>
<H2>Demonstrating a few HTML features</H2></CENTER> 
```

显示为

![在此处输入图像描述](../Images/0eb1d927a6f9e16bfaf2323e5bad945f.png)

我可以将`<CENTER>`标签更改为`<left>`在这种情况下它可以工作，但它限制了我的选择。如何在没有对齐问题的情况下在屏幕中间显示此内容？

问题的第二部分是如何嵌入颜色或内容链接。在线 `""FFFFFF">\n"`我收到错误消息，`Expected ':'`并且在线`"<a href="http://somegreatsite.com">\n"`半行是绿色的，这看起来像是屏幕上的注释，这意味着它不会由 XCode 执行

我的完整代码如下：

```
- (void) createWebViewWithHTML{
    //create the string
    NSMutableString *html = [NSMutableString stringWithString: @"<html><head><title></title></head><body style=\"background:transparent;\">"];

    //continue building the string
    [html appendString:@"<BODY BGCOLOR="
     ""FFFFFF">\n"
     "<CENTER><IMG SRC="clouds.jpg" ALIGN="BOTTOM">
     "</CENTER> \n"
     "<HR>\n"
     "<a href="http://somegreatsite.com">\n"
     "Link Name</a>\n"

     "is a link to another nifty site\n"

     "<H1>This is a Header</H1>\n"

     "<H2>This is a Medium Header</H2>\n"

     "Send me mail at <a href="mailto:support@yourcompany.com">\n"

     "support@yourcompany.com</a>.\n"

     "<P> This is a new paragraph!\n"

     "<P> <B>This is a new paragraph!</B>\n"

     "<BR> <B><I>This is a new sentence without a paragraph break, in bold italics.</I></B>\n"

     "<HR>\n"];
    [html appendString:@"</body></html>"];

    //instantiate the web view
    webView = [[UIWebView alloc] initWithFrame:self.view.frame];

    //make the background transparent
    [webView setBackgroundColor:[UIColor clearColor]];

    //pass the string to the webview
    [webView loadHTMLString:[html description] baseURL:nil];

    //add it to the subview
    [self.view addSubview:webView];

} 
```

编辑:: 添加故事板图片

![在此处输入图像描述](../Images/39ed4c871361d4d5799d21b053429144.png)

**那么如何正确对齐并正确嵌入颜色/链接？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:11:13.470

1.  检查您`UIWebView`的尺寸是否合适。它似乎比屏幕更大。

2.  在硬编码字符串中的任何 " 之前放置一个 \。例如：

    ```
    NSString *testString="This is a \"Test\""; 
    ```

    结果是

    > 这是一个测试”

希望这可以帮助

# python - 读取远程输出并使用 paramiko (SSH.execute) 响应

> ID：12784433
> 
> 赞同：3
> 
> 时间：2012-10-08T15:07:39.513
> 
> 标签：python, ssh, paramiko

我正在使用 python模块在远程服务器上`paramiko`运行内置的 parmiko 函数。`SSH.execute`我想在需要 4 个提示的服务器上运行一个脚本。我打算做一个更复杂的版本：

```
 ExpectedString = 'ExpectedOutput'
   Output = SSH.execute('./runScript')
   if Output == ExpectedString:
       SSH.execute('Enter this')
   else:
       raise SomeException 
```

问题是没有任何东西返回输出，因为服务器正在等待输入数字并且脚本卡在这个 SSH.execute 命令。因此，即使`SSH.execute`在它永远不会运行之后运行另一个命令！我应该寻找使用 paramiko 以外的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:40:04.830

您需要与远程脚本进行交互。实际上，`SSH.execute`不存在，我假设您在谈论`exec_command`. 它不只是返回输出，它实际上为您提供了标准输出、标准输入和标准错误流的包装器。您可以直接使用这些来与远程脚本进行通信。

基本上，这就是您运行命令并通过标准输入传递数据（并使用标准输出接收输出）的方式：

```
ssh.connect('127.0.0.1', username='foo', password='bar')

stdin, stdout, stderr = ssh.exec_command("some_script")

stdin.write('expected_input\n')
stdin.flush()

data = stdout.read.splitlines() 
```

当然，您应该检查提示，而不是依赖良好的时机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T09:57:31.577

@leoluk - 是的，我理解你的问题，这两种推荐的解决方案都不起作用。正如您所说，使用 exec_command 的问题是您只能在命令完成后读取输出。因此，如果您想远程运行该命令`rm -i *`，您将无法读取要删除的文件，然后才能回复“是”或“否”。这里的关键是使用invoke_shell。请参阅此 youtube 链接 - [https://www.youtube.com/watch?v=lLKdxIu3-A4](https://www.youtube.com/watch?v=lLKdxIu3-A4) - 这帮助了我并让我继续前进。

# c# - 如何规范化表格订单详情

> ID：12784435
> 
> 赞同：0
> 
> 时间：2012-10-08T15:07:45.667
> 
> 标签：c#, database, database-design, normalization

我被分配完成以下任务：

![在此处输入图像描述](../Images/b704dd2768304c4cc1515607c6f43f9c.png)

我将使用 C# 和 Sql server 来解决上述问题。但是，我需要了解我需要多少张桌子，因为我对此完全陌生。我已经尝试过了，如果有人可以很好地解决我的查询或者可以完全给我一个更好的替代解决方案。这是我到目前为止所尝试的。到目前为止，我已经制作了 3 张桌子，如下图所示：

![在此处输入图像描述](../Images/8b91f80f19a835411fd5c5697703a1ec.png)

现在，如果您在第二张图片中注意到，我可以使订单号仅适用于一方。但是，我仍然面临的问题是，当一方订购多于一种类型的产品时，我将不得不在订单表中生成 2 个 PO 编号。

我的问题的解决方案是什么？我如何进一步规范化它？

PS这听起来像一个简单的问题，因为这是我第一次尝试标准化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:13:39.690

我建议添加另一个名为“订单”的表。此表将包含整个订单的相同信息，例如 PONumber、PODate、RefDate、PartyID。然后您的 OrdersDetail 表将包含订购的每个产品的信息，例如 ProductId、Quantity、Rate、Amount、OrderId（FK 到新的 Order 表中）。

另外，不要将所有数据类型都设为 Text。考虑使用适合所存储信息的数据类型。我还会考虑不包括金额或将其设为计算字段，因为它是根据同一记录中的其他信息计算的（数量 * 费率）。

此外，您可以考虑使用 PONumber 以外的其他值作为主键。作为一般规则，除了内部标识记录之外，主键没有其他用途。我建议添加一个 OrderDetailsId 并将其作为主键。

**编辑：（我添加了额外的信息来回答下面的 Lohits 问题）**

如果我理解您在问题中所说的话，该方可以有多个命令；在每个订单上，该方可以购买多种产品。因此PartyDetails和Order之间是一对多的关系，Order和OrderDetail之间是一对多的关系；以及 ProductDetails 和 OrderDetails 之间的一对一关系。Party 表存储有关购买订单的人的信息。Order 表存储有关人员下的每个订单的信息。OrderDetails 存储有关人员为每个订单购买的每个产品的信息。ProductDetails 表存储所有产品的列表。

这是我看到的数据结构图......请注意，它并没有包含*所有*细节。但希望它能给你足够的开始。

![在此处输入图像描述](../Images/68506672fa23f73cf3081da89f9c2127.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:22:51.403

也许你可以使用这个设计。请注意，每个订单每方只有 1 个 PO 编号。这假设您要手动提供采购订单号；否则，您可以使用 OrderID 作为方便的自动生成的采购订单编号。

![在此处输入图像描述](../Images/3c792bd6c800515d3f494671b0b627fb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:18:43.383

4张桌子：

1.  当事人信息：身份证、姓名、地址
2.  产品信息：id、名称、价格
3.  订单信息：id：日期等
4.  Orderline: orderID, ProductID, Amount 其中orderID和ProductID是productinformation和orderinformation的外键

将产品添加到（创建的）订单仅涉及将 productID 和 OrderID 添加到 [orderline] 中，当输入两次相同的产品时增加金额。

# jquery - `$` 在 jQuery 中不起作用。`noConflict()` 没有在任何地方被调用

> ID：12784440
> 
> 赞同：0
> 
> 时间：2012-10-08T15:08:07.437
> 
> 标签：jquery, jquery-mobile

我正在开发一个 PhoneGap 应用程序并离开了一天。当我第二天回来时，我不断收到错误。结果`$(document)`是返回null，但`jQuery(document)`不是。从我在这里阅读的内容来看，这意味着其他东西正在覆盖该`$`标志。
但是，我已经尝试注释掉除 jQuery 和 jQueryMobile 之外的 javascript 文件的所有包含，但它仍然会发生。我还进行了全局搜索，`noConflict`发现它的唯一位置是在 jQuery js 文件中。

有谁知道还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:10:34.097

我不知道为什么会这样，而且可能没有人不看你的代码就知道。

但是，这里有一个简单的方法来克服它：

```
jQuery(document).ready(function($){
    // now in here you can us the $ as you would before
    // eg:
    $('div').css({"background-color":"blue"});
}); 
```

我在我正在处理的所有 jQuery 项目中都将其作为标准执行，这样使用`$`变量就不会发生任何冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:40:29.923

原来我添加了一个导致错误的小实用程序函数：

```
function $(id) { return document.getElementById(id); } 
```

# java - GAE HDR：在 XG 事务中通过键检索实体最终是否一致？

> ID：12784441
> 
> 赞同：10
> 
> 时间：2012-10-08T15:08:13.787
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore, eventual-consistency

考虑“用于事务”中的第二个示例（“使用命名键更新实体，或者如果它尚不存在则创建它”）：

[https://developers.google.com/appengine/docs/java/datastore/transactions](https://developers.google.com/appengine/docs/java/datastore/transactions)

现在考虑这种情况。多人游戏只允许任何两个玩家之间进行单场比赛。为确保这一点，使用玩家的每个键创建一个键。此键用作 UniqueMatch 实体的键。

因此，为了创建匹配，创建了 XG 交易。在本次交易中：

1.  我们检查是否已经没有具有该键的 UniqueMatch 实体。如果使用该键的 datastore.get() 调用没有抛出 EntityNotFoundException，那么我们知道这两个玩家之间已经存在匹配，所以我们 rollback() 并向玩家显示错误消息。

2.  我们 put() 我们需要放置的所有实体以创建匹配。这包括 UniqueMatch 实体，以及其他一些实体。

3.  然后提交事务。

这似乎工作正常。但是，我注意到我可以在短时间内在任意两个玩家之间创建两场比赛。在一小段时间（实际上，在其中一个测试中长达 10-20 秒），我对 datastore.get(key) 的调用会抛出 EntityNotFoundException，即使该键已经被 put()。

这似乎是最终的一致性。但是，实体检索**键**是否保证是强一致的？这种保证是否受到在 XG 交易中完成这一事实的影响？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T11:51:26.797

我认为您看到的问题可能是因为数据存储区（通过键或查询）仅在事务**开始时看到数据存储区的状态。**

来自[文档](https://developers.google.com/appengine/docs/java/datastore/transactions)（在隔离和一致性下）：

> 在事务中，所有读取都反映事务开始时数据存储的当前一致状态。这不包括事务中先前的放置和删除。事务中的查询和获取保证在事务开始时看到数据存储的单个、一致的快照。

此外，在事务之外，您只会看到已提交的 put ( [docs](https://developers.google.com/appengine/articles/transaction_isolation) )：

> 通过查询或获取从数据存储中检索到的实体只会看到已提交的数据。

**一个可能的解决方案：**

在事务之外创建 UniqueMatch 实体（appengine 不允许您放置具有相同键的实体，因此如果具有相同键的实体已经存在，它将引发异常）。然后，您可以创建/放置在事务中创建匹配所需的其他实体（如果需要）。

最后，确保在为 UniqueMatch 创建密钥时，他们的密钥始终与玩家以相同的顺序创建，因为`key(playerA,playerB)!=key(playerB,playerA)`

# html - 使用元标记打开图形字符串换行符

> ID：12784442
> 
> 赞同：5
> 
> 时间：2012-10-08T15:08:13.967
> 
> 标签：html, facebook, facebook-opengraph, line-breaks, meta

我目前正在使用 facebook 开放图形元标记更新我的页面，以便在将 url 粘贴到 facebook 时获得很好的预览。可悲的是， og:description 属性或任何其他字符串类型的属性似乎都忽略了换行符。我已经尝试过任何已知的换行符格式，如 \n 或 <br> 但它们都不起作用。

有谁知道诀​​窍还是不可能添加换行符？

谢谢，麦克法兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-09T16:15:36.537

我不相信 Facebook、Twitter 或任何其他内容共享网站会允许在元标记中格式化数据。您最好的机会是研究这些站点在预览的每一行中使用了多少个字符，并插入适当数量的空格来模拟换行符。（如果他们忽略空格）

# c++ - Lua：给自定义用户数据一个tostring方法

> ID：12784446
> 
> 赞同：1
> 
> 时间：2012-10-08T15:08:28.103
> 
> 标签：c++, lua, tostring

我在 lua 中有一个自定义用户数据。当我`tostring`对用户数据的实例（在 Lua 中）执行时，它总是返回一个类似`"userdata: 0xaddress"`. 我希望它返回 userdata ( `"Point: 0xaddress"`) 的名称，这意味着我想覆盖它`tostring`以包含我的 userdata 的案例。有谁知道这是否可以做到？

```
#define check_point(L) \
    (Point**)luaL_checkudata(L,1,"Point")

static int 
luaw_point_getx(lua_State* L)
{
    Point** point_ud = check_point(L);
    lua_pushinteger(L, (*point_ud)->x);
    return 1;
}

static int 
luaw_point_gety(lua_State* L)
{
    Point** point_ud = check_point(L);
    lua_pushinteger(L, (*point_ud)->y);
    return 1;
}

void 
luaw_point_push(lua_State* L, Point* point)
{
    Point** point_ud = (Point**)lua_newuserdata(L, sizeof(Point*));
    *point_ud = point;
    luaL_getmetatable(L, "Point");
    lua_setmetatable(L, -2);
}

static const struct luaL_Reg luaw_point_m [] = {
    {"x", luaw_point_getx},
    {"y", luaw_point_gety},
    {NULL, NULL}
};

int 
luaopen_wpoint(lua_State* L)
{
    luaL_newmetatable(L, "WEAVE.Point");
    lua_pushvalue(L, -1);
    lua_setfield(L, -2, "__index");
    luaL_register(L, NULL, luaw_point_m);
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:45:03.947

您必须提供一个`__tostring`元方法，就像您编写`__index`.

```
// [...]
int luaw_point_index(lua_State* L)
{
    lua_pushfstring(L, "Point: %p", lua_topointer(L, 1));
    return 1;
}

int luaopen_wpoint(lua_State* L)
{
    luaL_newmetatable(L, "WEAVE.Point");
    lua_pushvalue(L, -1);
    lua_setfield(L, -2, "__index");
    lua_pushcfunction(L, luaw_point_index);
    lua_setfield(L, -2, "__tostring");
    luaL_register(L, NULL, luaw_point_m);
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:38:28.180

您将不得不覆盖`tostring`，以便它检查该值是否是其自定义类型之一。如果是，则使用您自己的函数来获取名称。如果没有，请将其传递给覆盖的`tostring`. 这通常是通过将原始`tostring`值放在一个上值中然后用它替换全局`tostring`来完成的。

# c# - 单例范围绑定未按预期工作

> ID：12784447
> 
> 赞同：9
> 
> 时间：2012-10-08T15:08:34.223
> 
> 标签：c#, ninject, asp.net-web-api

我将 ninject mvc3 插件与我的 web api 应用程序一起使用。我有一个看起来像这样的绑定：

`kernel.Bind<IFoo>().To<Foo>().InSingletonScope();`

我的解释是内核将恰好创建一个实例`Foo`并适当地重用它。通过在 的构造函数中放置断点`Foo`，我可以清楚地看到每个请求都会调用一次，但我无法解释原因。

我唯一的猜测是，每个请求都会以某种方式创建一个新内核，但情况似乎并非如此，因为`CreateKernel`设置全局依赖解析器的方法在应用程序生命周期中只运行一次。

我正在使用从[这篇文章](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)中获取的一些代码来使 ninject 与 mvc 4 配合得很好。由于框架的更改，我不得不制作一个额外的包装器，并分配给`GlobalConfiguration.Configuration.DependencyResolver`：

```
public class NinjectResolver : NinjectScope, IDependencyResolver
{
    private readonly IKernel _kernel;
    public NinjectResolver(IKernel kernel)
        : base(kernel)
    {
        _kernel = kernel;
    }
    public IDependencyScope BeginScope()
    {
        return new NinjectScope(_kernel.BeginBlock());
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T22:11:45.383

我永远无法让它正常工作，我不知道为什么。我的猜测是它与 MVC4 集成目前有点不成熟有关。

作为替代方案，我正在使用：

`kernel.Bind<IFoo>().ToConstant(new Foo());`

这似乎可行，但我对此不太满意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-03T14:18:51.917

就像前面提到的那样，它看起来确实像一个错误。
一种选择是自己简单地实现一个单例扩展方法：

```
public static class NinjectSingletonExtension
{
    public static CustomSingletonKernelModel<T> SingletonBind<T>(this IKernel i_KernelInstance)
    {
        return new CustomSingletonKernelModel<T>(i_KernelInstance);
    }
}

public class CustomSingletonKernelModel<T>
{
    private const string k_ConstantInjectionName = "Implementation";
    private readonly IKernel _kernel;
private static object padlock = new Object();

    private T _concreteInstance;

    public CustomSingletonKernelModel(IKernel i_KernelInstance)
    {
        this._kernel = i_KernelInstance;
    }

    public IBindingInNamedWithOrOnSyntax<T> To<TImplement>(TImplement i_Constant = null) where TImplement : class, T
    {
        _kernel.Bind<T>().To<TImplement>().Named(k_ConstantInjectionName);
        var toReturn =
            _kernel.Bind<T>().ToMethod(x =>
                                       {
                                           if (i_Constant != null)
                                           {
                                               return i_Constant;
                                           }

                                           if (_concreteInstance == null)
                       {
                       lock (padlock)
                       {
                        if (_concreteInstance == null)
                        {
                            _concreteInstance = _kernel.Get<T>(k_ConstantInjectionName);
                        }
                           }
                       }

                                           return _concreteInstance;
                                       }).When(x => true);

        return toReturn;
    }
} 
```

然后只需使用：

```
i_Kernel.SingletonBind<T>().To<TImplement>(); 
```

而不是

```
i_Kernel.Bind<T>().To<TImplement>().InSingletonScope(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-22T22:12:30.940

当然迟到了这个线程，但它只是发生在我身上，一个 Windows 服务为 Web API 控制器托管 OWIN 并使用 Ninject 解决依赖关系，InSingletonScope() 在我执行以下操作之前无法正常工作：

```
var kernel = new StandardKernel();
...
kernel.Bind<Foo>().ToSelf().InSingletonScope();
kernel.Bind<IFoo>().ToMethod(context => context.Kernel.Get<Foo>());
...

// Controllers ask for the dependency as usual...
public class SomeController : ApiController
{
    readonly IFoo _foo;

    public SomeController(IFoo foo)
    {
        _foo = foo;
    }
... 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T15:15:01.563

注意：我使用 nuget 安装了 ninject 和 ninject.web.mvc（我相信你也这样做了）。

我无法看到您的其余代码，但这是我在“NinjectDependencyScope”类中的内容。（我认为您的只是称为 NinjectScope，可能与您的代码有一些其他命名不一致）

```
public class NinjectDependencyScope : IDependencyScope
{
    private IResolutionRoot _resolver;

    internal NinjectDependencyScope(IResolutionRoot resolver)
    {
        Contract.Assert(resolver != null);

        _resolver = resolver;
    }

    #region IDependencyScope Members

    public void Dispose()
    {
        var disposable = _resolver as IDisposable;
        if (disposable != null)
            disposable.Dispose();

        _resolver = null;
    }

    public object GetService(Type serviceType)
    {
        if (_resolver == null)
            throw new ObjectDisposedException("this", "This scope has already been disposed");
        return _resolver.TryGet(serviceType);
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        if (_resolver == null)
            throw new ObjectDisposedException("this", "This scope has already been disposed");

        return _resolver.GetAll(serviceType);
    }

    #endregion
} 
```

这是我的 NinjectWebCommon 类（位于 App_Start 文件夹中）：

```
using System;
using System.Web;
using System.Web.Http;
using Microsoft.Web.Infrastructure.DynamicModuleHelper;
using Ninject;
using Ninject.Modules;
using Ninject.Web.Common;

[assembly: WebActivator.PreApplicationStartMethod(typeof(ABCD.Project.Web.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(ABCD.Project.Web.App_Start.NinjectWebCommon), "Stop")]

namespace ABCD.Project.Web.App_Start
{
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper Bootstrap = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        Bootstrap.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        Bootstrap.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);

        // Set Web API Resolver
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        //var modules = new INinjectModule[] { new NinjectBindingModule(), };
        //kernel.Load(modules);
        Here's where you would load your modules or define your bindings manually...
    }        
}
} 
```

# .net - MVC 和子或子子文件夹

> ID：12784450
> 
> 赞同：0
> 
> 时间：2012-10-08T15:08:55.253
> 
> 标签：.net, asp.net-mvc-3

我必须迁移一个 Asp Intranet。

但是，当我寻找创建 MVC Intranet 时，我意识到我不能这样做：

例如，在区域“文件夹 1”中

/Folder1/Home（实际：/Folder1/Controller/HomeController.vb） /Folder1/Application/Agency/Home（实际：/Folder1/Controller/Agency/HomeController.vb） /Folder1/Application/Agency/Edition/MyAppEdition /Home（实际：/Folder1/Controller/Agency/Edition/MyAppEdition/HomeController.vb）

可以这样做吗？或者在 MVC 中，不建议这样做，我只需要创建子文件夹，如“/Folder1/View/MyApp”？

感谢'

波特科伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:15:19.413

在 MVC 中，您的 URL 不会映射到文件或文件夹位置。

它们由指定的[路线](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)控制。

您需要设置路由以获取所需的 URL。

# javascript - three.js: rotate tetrahedron on correct axis

> ID：12784455
> 
> 赞同：2
> 
> 时间：2012-10-08T15:09:29.900
> 
> 标签：javascript, 3d, rotation, three.js

I have to display a rotating tetrahedron in an animated HTML5 graphic, using three.js.

When i create the object, it's upside down, but it should be on the ground with one surface, like on this screenshot: [http://www10.pic-upload.de/08.10.12/v3nnz25zo65q.png](http://www10.pic-upload.de/08.10.12/v3nnz25zo65q.png)

This is the code for rotating the object, at the moment. Stored in render() function. But the axis is incorrect and the object is rotating wrong.

```
object.useQuaternion = true;
var rotateQuaternion_ = new THREE.Quaternion();
rotateQuaternion_.setFromAxisAngle(new THREE.Vector3(0, 1, 1), 0.2 * (Math.PI / 180));
object.quaternion.multiplySelf(rotateQuaternion_);
object.quaternion.normalize(); 
```

(copied from [Three.JS - how to set rotation axis](https://stackoverflow.com/questions/11816623/three-js-how-to-set-rotation-axis/11829484#11829484))

This is the result at the moment: [http://jsfiddle.net/DkhT3/](http://jsfiddle.net/DkhT3/)

How can i access the correct axis to move/rotate the tetrahedron on the ground?

Thanks for suggestions!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T17:01:30.170

Don't do what you copied. It is not correct.

I am assuming that what you want to do is to start off with a tetrahedron that is right-side-up to begin with. One thing you can do is to modify `THREE.TetrahedronGeometry()` to use four vertices that produce the tetrahedron that you want.

If you want to use the existing code, then what you have to do is to apply a rotation to the geometry right after it is created, like so:

```
var geometry = new THREE.TetrahedronGeometry( 40, 0 );
geometry.applyMatrix4( new THREE.Matrix4().makeRotationAxis( new THREE.Vector3( 1, 0, - 1 ).normalize(), Math.atan( Math.sqrt( 2 )) ) ); 
```

(Determining the proper rotation angle requires a bit of math, but it turns out to be the arctangent of the sqrt( 2 ) in this case, in radians.)

three.js r.133

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-14T07:29:23.057

```
Download three.js from [http://www.html5canvastutorials.com/libraries/Three.js] library and put in the below HTML code. 
You will get good output.

<!Doctype html>
<html lang="eng">
<head>
    <title>I like shapes</title>
    <meta charset="UTF-8">
     <style>
     canvas{
     width: 100%; 
     height: 100% 
     }
    body{
    background: url(mathematics.jpg);
    width: 800px; 
    height: 500px;
    }
     </style>
</head>
<body>

    <script src="three.js"></script>

    <script> 
    // creating a Scene
    var scene = new THREE.Scene(); 

    // Adding Perspective Camera
    // NOTE: There are 3 cameras: Orthographic, Perspective and Combined.   
    var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000); 

    //create WebGL renderer 
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );

    //Drawing a Tetrahedron.
    var pyramidgeometry = new THREE.CylinderGeometry(0, 0.8, 4, 4, false);

    //Change colour of Pyramid using Wireframe
    var pyramidmaterial = new THREE.MeshBasicMaterial({wireframe: true, color: 0x0ff000});
    var pyramid = new THREE.Mesh(pyramidgeometry, pyramidmaterial); //This creates the cone
    pyramid.position.set(3.1,0,0);
    scene.add(pyramid);

    //moving camera outward of centre to Z-axis, because Cube is being created at the centre
    camera.position.z = 5;

    //we have a scene, a camera, a cube and a renderer. 

    /*A render loop essentially makes the renderer draw the scene 60 times per second.
    I have used requestAnimationFrame() function.*/
    var render = function() {
    requestAnimationFrame(render);

    /*cube.rotation.x += 0.01;
    cube.rotation.y += 0.01;
    cube.rotation.z += 0.01;*/

    pyramid.rotation.y += 0.01;
    pyramid.rotation.x += 0.01;
    pyramid.rotation.z += 0.01;

    renderer.render(scene, camera);
    };
    // calling the function
    render();

    </script>
</body>
</html> 
```

# drupal - Drupal 7 - 翻译用户个人资料上的内容字段

> ID：12784457
> 
> 赞同：2
> 
> 时间：2012-10-08T15:09:38.177
> 
> 标签：drupal

我正在构建一个多语言站点（带有 i18n 模块和实体翻译）。我在用户配置文件类型上添加了一个字段集合（使用 profile2 模块）。用户如何翻译此处配置文件的字段集合的内容？

知道我有这个带有实体翻译的错误消息

Field 集合项类型的实体没有定义有效的基本路径：无法翻译它们。

节点注册类型的实体没有定义有效的基本路径：无法翻译它们。

Profil 类型的实体没有定义有效的基本路径：无法翻译它们。

我已激活“用户可以翻译此字段”。

谢谢你

# r - 线框图（格子包）中的负长度向量是什么意思？

> ID：12784458
> 
> 赞同：2
> 
> 时间：2012-10-08T15:09:39.413
> 
> 标签：r, lattice

我想使用 lattice 包在 R 中绘制线框。但是，我收到以下错误消息“不允许使用数据包 1 负长度向量的错误”。数据如下所示：

```
> result_mean
  experiment alpha beta   packet
1          0   1.0    1 3.000000
2          0   1.1    1 2.571429 
```

创建数据的命令如下

```
 png(file=paste("foobar.png"),width=1280, height=1280);
    plot <- wireframe(result_mean$packet ~ result_mean$alpha * result_mean$beta,       
      data=result_mean, scales = list(arrows=FALSE, cex= .45, col = "black", font = 3),
      drape = TRUE, colorkey = TRUE, main = "Foo",
      col.regions = terrain.colors(100),
      screen = list(z = -60, x = -60),
      xlab="alpha", ylab="beta", zlab="mean \npackets");
  print(plot);
  dev.off(); 
```

我想知道这个错误消息是什么意思，是否有调试的好方法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:34:41.970

调试点阵图形有点困难，因为 (a) 代码复杂且多层，并且 (b) 错误以一种难以拦截的方式被捕获。但是，您至少可以通过某种方式*诊断*问题。

首先创建一个最小的例子。我怀疑你的问题是你的数据落在一行上，所以我创建了看起来像这样的数据：

```
d <- data.frame(x=c(1,1.1),
                y=c(1,1),
                z=c(2,3))

library(lattice)
wireframe(z~y*x,data=d) 
```

现在确认完全三维数据（定义平面的数据）工作正常：

```
d2 <- data.frame(expand.grid(x=c(1,1.1),
                             y=c(1,1.1)),
                 z=1:4)
wireframe(z~y*x,data=d2) 
```

所以问题是真的——你打算画一个两点在一条线上的线框吗？如果是这样，你想在情节中出现什么？您可以稍微修改一下以将`y`值设置为略有不同——不过，我试过了，但没有出现线框（但也没有错误）。

**编辑**：我做了更多的跟踪，使用各种`debug()`咒语（并搜索包的源代码`lattice`及其`R`本身的“负长度”）来推断以下内容：在一个名为的函数`lattice:::panel.3dwire`中，有一个对 C 函数的调用`wireframePanelCalculations`，你可以在[https://r-forge.r-project.org/scm/viewvc.php/pkg/src/threeDplot.c?view=markup&root=lattice看到](https://r-forge.r-project.org/scm/viewvc.php/pkg/src/threeDplot.c?view=markup&root=lattice)

在这个函数中：

```
nh = (nx-1) * (ny-1) * ng; /* number of quadrilaterals */
sHeights = PROTECT(allocVector(REALSXP, nh)); 
```

在这种情况下`nx`为零，因此此代码要求 R 分配一个负长度向量，这就是错误的来源。

不过，在这种情况下，我认为诊断比显式调试更有用。

# c++ - 如何使用 OpenGL 和 GLUT 渲染 3d .obj 文件？(Mac OS X, XCode 4)

> ID：12784459
> 
> 赞同：1
> 
> 时间：2012-10-08T15:09:39.663
> 
> 标签：c++, xcode, macos, opengl, glut

如何渲染 .obj 文件（3d 格式）？以及如何为其添加颜色？我在 OS X 上，使用 XCode 4。这是我的小“测试实验室”。

```
#include <GLUT/glut.h>
#include <iostream>

void render(void);

void keyboard(unsigned char c, int x, int y);

void mouse(int button, int state, int x, int y);

int main(int argc, char ** argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(500, 500);
    glutCreateWindow("Simple GLUT Application");

    glutDisplayFunc(render);
    glutKeyboardFunc(keyboard);
    glutMouseFunc(mouse);

    glutMainLoop();
}

void keyboard(unsigned char c, int x, int y) {
    if (c == 27){
        exit(0);
    }
}

void mouse(int button, int state, int x, int y) {
    if (button == GLUT_RIGHT_BUTTON){
        exit(0);
    }
}

void render(void) {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //RENDER STUFF HERE
    glBegin(GL_POLYGON);
    glVertex3f(  0.0, -0.8,  0.5);
    glVertex3f(  0.0,  0.2,  0.5);
    glVertex3f(  0.5,  0.8, -0.5);
    glVertex3f(  0.5, -0.2, -0.5);
    glEnd();

    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:34:01.533

OpenGL 是一个低级 3D API。它没有加载模型文件等高级功能。因此，要渲染一个 .obj 文件，您将编写代码来自己加载数据，然后编写 OpenGL 代码来绘制您已加载的多边形。

有几种方法可以为您绘制的 OpenGL 基元添加颜色和纹理。您当前的代码在“立即模式”中使用 OpenGL，并且添加颜色的立即模式方法是`glColor*()`在生成顶点之前使用函数设置颜色。

```
glBegin(GL_TRIANGLES);
glColor3f(   1.0,  0.0,  0.0);
glVertex3f(  0.0, -0.8,  0.5);
glColor3f(   0.0,  1.0,  0.0);
glVertex3f(  0.0,  0.2,  0.5);
glColor3f(   0.0,  0.0,  1.0);
glVertex3f(  0.5,  0.8, -0.5);
glEnd(); 
```

* * *

在过去几年中，OpenGL API 发生了一些重大变化。您经常在网上找到的 OpenGL 教程涵盖了使用 OpenGL 的旧方法。我强烈建议您阅读最新版本的*OpenGL SuperBible：综合教程和参考书*。它详细介绍了 OpenGL 的现代用法（即非即时模式），包括一章介绍如何将 OpenGL 与 OS X 的本机窗口 API Cocoa 结合使用。

尽管 OpenGL Superbible 的第 5 版（撰写本文时的最新版本）是在 OS X 支持新的 OpenGL 内容之前编写的，但后来添加了新功能。您需要阅读 Apple 关于在 Cocoa 或 OS X 的 GLUT 实现中启用“OpenGL Core Profile”的文档才能使用它们。

# javascript - HTML5 画布单击并拖动

> ID：12784464
> 
> 赞同：4
> 
> 时间：2012-10-08T15:09:50.523
> 
> 标签：javascript, html, html5-canvas

我使用相同的代码来查找相对于特定元素（在本例中为 HTML5 画布）的鼠标位置。这适用于鼠标按下，但会在鼠标抬起时中断。我怎样才能让它在鼠标上工作？

```
<!DOCTYPE html>
<html>
<body>

<h1>This is page one; here we will play with HTML5</h1>

<a href= "../index.html">This link takes you back to home</a>

<div> <canvas onmousedown="mouseDown()" onmouseup="mouseUp()" 
id="myCanvas" width="1600" height="800" style="border:1px solid #000000;">
</canvas> </div>

<script type="text/javascript">

var rect1x = rec1y;
var a = b;

function mouseDown()
{
a = document.getElementById("myCanvas").getBoundingClientRect().left;
b = document.getElementById("myCanvas").getBoundingClientRect().top;
rect1x = window.event.clientX - a;
rect1y = window.event.clientY - b;
}
function mouseUp()
{
var rect2x = window.event.clientX - a;
var rect2y = window.event.clientY - b;

var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.fillStyle="#FF0000";
ctx.fillRect(rect1x,rect1y,rect2x,rect2y);
}

</script>

<center><font size=1>Draw!</font></center>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:25:22.730

`ctx.fillRect`需要`x, y, width, height`，不`x1, y1, x2, y2`

所以将最后一行更改为：

```
ctx.fillRect(rect1x, rect1y, rect2x - rect1x, rect2y - rect1y); 
```

# mysql - DV4 8GB 的 my.cnf 设置

> ID：12784469
> 
> 赞同：0
> 
> 时间：2012-10-08T15:10:18.457
> 
> 标签：mysql, database, wordpress

我在具有 8GB RAM 的 MediaTemple DV4 服务器上有一个 Wordpress 站点。该数据库有超过 35,000 个帖子，在高峰时段，该站点有 300 到 400 个并发用户。主页对 wp_posts 表运行 6 次查询。

任何人都可以就 my.cnf 文件的最佳设置提供任何建议吗？谢谢。

```
 query-cache-type = 1
 query-cache-size = 256M
 query_cache_limit = 1M
 thread_cache_size = 256
 max_connections = 350
 tmp_table_size=256M
 max_heap_table_size=256M
 table_cache= 1024
 join_buffer_size = 5M
 key_buffer_size = 512M
 wait_timeout = 60
 local-infile=0
 datadir=/var/lib/mysql
 socket=/var/lib/mysql/mysql.sock
 user=mysql
 # Disabling symbolic-links is recommended to prevent assorted security risks
 symbolic-links=0 
```

MySQLTuner 性能指标：

```
 -------- Storage Engine Statistics -------------------------------------------
 [--] Status: +Archive -BDB -Federated +InnoDB -ISAM -NDBCluster 
 [--] Data in MyISAM tables: 963M (Tables: 504)
 [--] Data in InnoDB tables: 4M (Tables: 198)
 [!!] Total fragmented tables: 218

 [--] Up for: 2d 18h 10m 22s (27M q [113.837 qps], 1M conn, TX: 489B, RX: 4B)
 [--] Reads / Writes: 97% / 3%
 [--] Total buffers: 1.4G global + 7.6M per thread (350 max threads)
 [OK] Maximum possible memory usage: 4.0G (42% of installed RAM)
 [OK] Slow queries: 0% (3K/27M)
 [!!] Highest connection usage: 86%  (301/350)
 [OK] Key buffer size / total MyISAM indexes: 128.0M/679.6M
 [OK] Key buffer hit rate: 100.0% (1B cached / 57K reads)
 [OK] Query cache efficiency: 67.8% (14M cached / 20M selects)
 [!!] Query cache prunes per day: 29253
 [OK] Sorts requiring temporary tables: 0% (1K temp sorts / 1M sorts)
 [!!] Temporary tables created on disk: 35% (688K on disk / 1M total)
 [OK] Thread cache hit rate: 99% (463 created / 1M connections)
 [OK] Table cache hit rate: 31% (1K open / 3K opened)
 [OK] Open file limit used: 42% (1K/2K)
 [OK] Table locks acquired immediately: 99% (7M immediate / 7M locks)
 [OK] InnoDB data size / buffer pool: 4.3M/32.0M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:04:18.537

可能您可以检查查询的大小，1M 可能太大或太小 - 但经常运行 - 查询不会被缓存。

pt-query-digest 是一个很好的工具： [http ://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)

对于一般提示，您可以使用： [http](http://mysqltuner.pl) ://mysqltuner.pl 请记住，它们只是一般建议，所以不要蒙着眼睛跟着它们，但通常脚本的输出是优化 MySql 的一个好的开始。

key_buffer_size 仅与您使用 MyISAM 表相关（不要！）。

如果您希望数据库与 InnoDB 一起顺利运行，则将 innodb_buffer_pool_size 提高到高于实际数据库大小（如果可能的话）

# ruby-on-rails - 在 Rails 路线中混淆段键

> ID：12784470
> 
> 赞同：0
> 
> 时间：2012-10-08T15:10:19.587
> 
> 标签：ruby-on-rails

假设我有一条路线`users/:id`，其中 id = 1。非常标准，但我想将此路线更改为以下内容：

`/account`

任何登录用户，在本例中为 id = 1 的用户，不会将其 uid 视为段键，而是仅将通用“帐户”URI 视为。如何在 rails 3 应用程序中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:19:09.967

您可以创建到标准操作的路由，该操作用作用户自己的显示操作。例如：您创建一个操作，您可以在其中获取当前用户的信息并使其显示。可以像往常一样从会话中提取当前用户，因此无需在 url 中发送用户 ID。你只需要一个重定向`/account`到这个动作的路由。

# c# - CommandParameter 多重绑定以返回 DataGrid 控件和所选行中的自定义对象

> ID：12784474
> 
> 赞同：2
> 
> 时间：2012-10-08T15:10:35.403
> 
> 标签：c#, wpf, mvvm, wpfdatagrid

我正在使用 .Net 4.0 并在视图中有一个 DataGrid。我已经实现了这个[http://www.codeproject.com/Articles/42227/Automatic-WPF-Toolkit-DataGrid-Filtering](http://www.codeproject.com/Articles/42227/Automatic-WPF-Toolkit-DataGrid-Filtering)来提供过滤。DataGrid 的 ItemsSource 是我的自定义对象的可观察集合。每行都有一个按钮，单击该按钮时，通过 CommandParameter 将选定的自定义对象传回。

```
<DataGridTemplateColumn.CellTemplate>
  <DataTemplate>
    <Button Command="{Binding Path=DataContext.DeleteMyCustomObjectCommand,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding}"  Width="20">
      <Image Source="/MyThing;component/Images/delete.png" Height="16" Width="16"/>
    </Button>
  </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

我希望能够使用此解决方案[http://www.codeproject.com/Articles/42227/Automatic-WPF-Toolkit-DataGrid-Filtering?msg=3342202#xx3342202xx](http://www.codeproject.com/Articles/42227/Automatic-WPF-Toolkit-DataGrid-Filtering?msg=3342202#xx3342202xx)保存过滤条件，但其中一个调用需要参考到数据网格

```
QueryController queryController=   DataGridExtensions.GetDataGridFilterQueryController(myGrid1); 
```

当我使用 MVVM 时，我的 ViewModel 中没有对 DataGrid 的引用。我的命令执行代码（在 ViewModel 中）目前看起来像这样

```
public void DeleteMyCustomObject(object param)
    {
        MyCustomObject m = param as MyCustomObject;
.....Deletion commands go here 
```

有没有一种方法可以在我的 Delete 按钮的 CommandParameter 上使用多重绑定从当前行传回自定义对象，以及对实际 DataGrid 的引用（或者有更好的解决方案）。

非常感谢

米克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:21:31.563

(1) 将 DataGrid.SelectedItem 绑定到 ViewModel 中的属性。

(2) 将 Grid 作为 CommandParameter 发送。

```
 <DataGrid Grid.Column="2" Name="DG1" ItemsSource="{Binding}" SelectedItem="{Binding SelectedItem}"  AutoGenerateColumns="False" >
     <DataGrid.Columns>
         <DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Button Command="{Binding Path=DataContext.DeleteMyCustomObjectCommand,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type DataGrid}}}" 
                            CommandParameter="{Binding RelativeSource=
                                              {RelativeSource FindAncestor,
                                              AncestorType={x:Type DataGrid}}}"  Width="20">
                         <Image Source="/MyThing;component/Images/delete.png" Height="16" Width="16"/>
                   </Button>
                </DataTemplate>
           </DataGridTemplateColumn.CellTemplate>
       <DataGridTemplateColumn>
    <DataGrid.Columns>
</DataGrid> 
```

# sql - ORA-06553: PLS-306: 调用“OGC_DISTANCE”时参数的数量或类型错误？

> ID：12784476
> 
> 赞同：1
> 
> 时间：2012-10-08T15:10:44.140
> 
> 标签：sql, oracle

我正在为我的项目编写一个小查询（ORACLE），以查找从给定纬度和经度到其他纬度和经度的距离。

以下是我使用的示例数据

```
 CREATE table test(id int, title varchar(50), place varchar(20),
 postcode varchar(20), latitude DOUBLE PRECISION, longitude DOUBLE
 PRECISION);

 INSERT INTO test VALUES(1,'sekhar91','kanigiri','91982',16.15074,
 -22.74426);

 INSERT INTO test VALUES(2,'sekhar91','kanigiri','91982',16.13725,
 -22.85822);

 INSERT INTO test VALUES(3,'sekhar91','kanigiri','91982',14.85633,
 -24.72379);

 INSERT INTO test VALUES(4,'sekhar91','kanigiri','91982',14.86949,
 -24.70150);

 INSERT INTO test VALUES(5,'sekhar91','kanigiri','91982',15.03118,
 -24.32523);

 INSERT INTO test VALUES(6,'sekhar91','kanigiri','91982',14.88924,
 -24.29403);

 INSERT INTO test VALUES(7,'sekhar91','kanigiri','91982',14.89500,
 -24.50000);

 INSERT INTO test VALUES(8,'sekhar91','kanigiri','91982',15.20031,
 -23.16798);

 INSERT INTO test VALUES(9,'sekhar91','kanigiri','91982',16.72662,
 -22.92971);

 INSERT INTO test VALUES(10,'sekhar91','kanigiri','91982',16.60005,
 -22.90818);

 INSERT INTO test VALUES(11,'sekhar91','kanigiri','91982',15.19196,
 -23.64427);

 INSERT INTO test VALUES(12,'sekhar91','kanigiri','91982',14.92331,
 -23.52119);

 INSERT INTO test VALUES(13,'sekhar91','kanigiri','91982',14.91637,
 -23.60410);

 INSERT INTO test VALUES(14,'sekhar91','kanigiri','91982',14.92279,
 -23.51720);

 INSERT INTO test VALUES(15,'sekhar91','kanigiri','91982',14.92331,
 -23.52119);

 INSERT INTO test VALUES(16,'sekhar91','kanigiri','91982',15.09882,
 -23.67105); 
```

我写的 Sql Query 是

```
SELECT id, 
       title, 
      ((ACOS(SIN(16.15074 * 3.141592653 / 180) *
        SIN(latitude * 3.141592653 / 180) +  COS(16.15074 * 3.141592653 / 180
        ) * COS(latitude * 3.141592653 / 180)* COS((-22.74426 -
       longitude)*3.141592653 /180))*180/3.141592653)*60*1.1515)  as distance
 FROM test  
 HAVING distance<=100 
```

在执行上述查询时，Oracle 说

```
ORA-06553: PLS-306: wrong number or types of arguments in call to 'OGC_DISTANCE' 
```

原因是什么，我错在哪里？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:16:25.310

看来问题出在`HAVING`子句上，我删除了`HAVING`并将您的查询放在子查询中，并将`WHERE`过滤器放在外面并且它可以工作（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!4/99660/4)）：

```
select *
from
(
  SELECT id, 
    title, 
    ((ACOS(
          SIN(16.15074 * 3.141592653 / 180) 
          * SIN(latitude * 3.141592653 / 180) 
          + COS(16.15074 * 3.141592653 / 180) 
          * COS(latitude * 3.141592653 / 180)
          * COS((-22.74426 - longitude)*3.141592653 /180))*180/3.141592653)*60*1.1515) as distance 
  FROM test
) x
where distance <= 100 
```

# sql - Oracle SQL XML 函数 - 如何在 XML Prolog 中获取编码？

> ID：12784478
> 
> 赞同：3
> 
> 时间：2012-10-08T15:10:44.423
> 
> 标签：sql, oracle, oracle10g, sqlxml

这个 SQL

```
SELECT XMLRoot(XMLType('<poid>143598</poid>'), VERSION '1.0', STANDALONE YES)
  AS xmlroot FROM DUAL; 
```

生成如下输出

```
XMLROOT
--------------------------------------
<?xml version="1.0" standalone="yes"?>
<poid>143598</poid> 
```

如何在我的 xml prolog 中获取编码？

例如 - 我希望输出类似于

```
XMLROOT
--------------------------------------
<?xml version="1.0" encoding="UTF-8"?>
<poid>143598</poid> 
```

参考 -

[从数据库生成 XML 数据](http://docs.oracle.com/cd/E18283_01/appdev.112/e16659/xdb13gen.htm#i1029583)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:26:02.123

```
select xmlroot (xmltype ('<poid>143598</poid>')
                  , version '1.0" encoding="UTF-8'
                  ) "XMLRoot"
  from dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:27:26.123

奇怪......但看起来版本参数可以包含任何内容 -

代替

```
version '1.0' 
```

和

```
version '1.0" encoding="utf-8' 
```

输出

```
XMLROOT
--------------------------------------
<?xml version="1.0" encoding="UTF-8"?>
<poid>143598</poid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T10:33:10.757

这很简单，但让我解释一下 Oracle 的可能逻辑：

字符数据默认存储在数据库编码中。如果要指定编码，则它可能与数据库编码不同。好的，让它成为 BLOB，即以所需编码表示的八位字节流。所以我们应该使用[XMLSERIALIZE](https://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb13gen.htm#ADXDB5033)函数来创建任何编码的表示（包括默认的 DB 编码）

```
select  
  xmlserialize(document xmltype('<Envelop>Any UTF charachers. Tous les caractères UTF. כל תווי UTF </Envelop>') as blob encoding 'UTF-8' version '1.0')
from dual; 
```

如果您的默认 DB 编码是 UTF-8，那么您也可以将此调用包装到`to_clob(…)`甚至`to_char(…)`查看结果。为了我

```
select  
  to_char(xmlserialize(document xmltype('<Envelop>Any UTF charachers. Tous lescaractères UTF. כל תווי UTF </Envelop>') as blob encoding 'UTF-8' version '1.0'))
from dual; 
```

给出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Envelop>Any UTF charachers. Tous les caractères UTF. כל תווי UTF </Envelop> 
```

# vba - MS Word VBA：如何在保持格式的同时用翻译替换每个单词

> ID：12784480
> 
> 赞同：1
> 
> 时间：2012-10-08T15:11:06.397
> 
> 标签：vba, ms-word

我有一个 word 文档，想用翻译替换每个单词，同时保持所有格式不变。我不能使用“查找和替换”对话框，因为我没有尝试替换一组特定的单词，而是替换了所有单词。我如何使用 VBA 做到这一点？

**更新** 我正在使用 Word 2010。到目前为止，我可以使用 ActiveDocument.Range.Words 属性遍历单词，但我不知道如何用翻译替换这些单词？替换时，我想保留所有格式，如字体名称、大小、颜色、背景颜色、下划线、粗体，简而言之，所有格式选项都保持原样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-22T16:04:20.177

我猜你有一个单词`("apple", "book", "cat")`数组和它们的翻译数组`("pomme", "livre", "chat")`。

您的目标是逐个批量更改单词。

所以你需要一个循环。这是可能有帮助的循环（如果我正确理解您的问题）。

**对两个数组进行批量更改**：

```
Option Explicit
Sub replaceArrayForArray()
'
'to create array use prefix\suffix and replacing tool http://textmechanic.com/
'
'
findArray = Array("apple", "book", "cat")
replArray = Array("pomme", "livre", "chat")

For i = 0 To UBound(findArray)
    Selection.Find.ClearFormatting
    Selection.Find.Replacement.ClearFormatting
    With Selection.Find
        .Text = findArray(i)
        .Replacement.Text = replArray(i)
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = True
        .MatchWholeWord = False
        .MatchWildcards = False
        .MatchSoundsLike = False
        .MatchAllWordForms = False
    End With
    Selection.Find.Execute replace:=wdReplaceAll
Next i
End Sub 
```

更困难的问题可能是如果您使用**图形**并且必须在**不重叠的情况下批量更改图形**。这里或多或少地描述了使用相同宏的方法：**[MS Word Macro to increase all numbers in word document](https://stackoverflow.com/questions/30154503/ms-word-macro-to-increment-all-numbers-in-word-document/35542069#35542069)**。

# mysql - 无法让 SQL JOIN 正常工作

> ID：12784484
> 
> 赞同：1
> 
> 时间：2012-10-08T15:11:17.073
> 
> 标签：mysql, sql, join

我正在尝试`JOIN`两张桌子，但它无法正常工作。我`loc_id`在所有表中都有，它们的值都是`1`. 我的数据库是 INNODB。`loc_id`是名为 的第三个表的唯一 ID `b_locations`。我也尝试过将这张桌子包括在内`JOIN`，但我真的不需要它，这也给了我相同的结果。我希望能够使用`JOIN`3 个或更多表以供将来校对，但显然我需要先让 2 个工作。

我加入查询中未包含的表的唯一 ID 的方法是一种不好的方法吗？

这是我的 SQL：

```
SELECT d.view_id,
    d.gps_lat survey_lat,
    d.gps_lng survey_lng,
    d.thumbnail,
    c.sign_type,
    c.gps_lat object_lat,
    c.gps_lng object_lng
FROM `d_view_angles` AS d
JOIN c_survey_elements AS c
ON d.loc_id = c.loc_id
WHERE c.loc_id = '1' 
```

这是我得到的（请参阅所需结果下方的**粗体文本）：**

```
1   37.367156   -77.39987   ... FREESTANDING SIGN   37.367229   -77.399835
2   37.367305   -77.399801  ... FREESTANDING SIGN   37.367229   -77.399835
3   37.36739    -77.400022  ... FREESTANDING SIGN   37.367229   -77.399835
4   37.367619   -77.399897  ... FREESTANDING SIGN   37.367229   -77.399835
1   37.367156   -77.39987   ... DOWN LIGHTING       37.367408   -77.400077
2   37.367305   -77.399801  ... DOWN LIGHTING       37.367408   -77.400077
3   37.36739    -77.400022  ... DOWN LIGHTING       37.367408   -77.400077
4   37.367619   -77.399897  ... DOWN LIGHTING       37.367408   -77.400077
1   37.367156   -77.39987   ... DOWN LIGHTING       37.367635   -77.399944
2   37.367305   -77.399801  ... DOWN LIGHTING       37.367635   -77.399944
3   37.36739    -77.400022  ... DOWN LIGHTING       37.367635   -77.399944
4   37.367619   -77.399897  ... DOWN LIGHTING       37.367635   -77.399944 
```

我已经尝试过`GROUP BY survey_lat, survey_lng`，但它采用了前 4 个结果，这给了我以下结果（注意重复`c.sign_type`,`c.gps_lat`和`c.gps_lng`）：

```
1   37.367156   -77.39987   ... FREESTANDING SIGN   37.367229   -77.399835
2   37.367305   -77.399801  ... FREESTANDING SIGN   37.367229   -77.399835
3   37.36739    -77.400022  ... FREESTANDING SIGN   37.367229   -77.399835
4   37.367619   -77.399897  ... FREESTANDING SIGN   37.367229   -77.399835 
```

* * *

**这些是我应该得到的结果：**

```
1   37.367156   -77.39987   ... FREESTANDING SIGN   37.367229   -77.399835
2   37.367305   -77.399801  ... FREESTANDING SIGN   37.367229   -77.399835
3   37.36739    -77.400022  ... DOWN LIGHTING       37.367408   -77.400077
4   37.367619   -77.399897  ... DOWN LIGHTING       37.367635   -77.399944 
```

我确定这很简单，但我还没有找到问题所在。我的猜测是我的`JOIN`，但我已经阅读了许多教程，遍及 W3Schools，尝试了不同的`JOINS`（`INNER JOIN`、、、`RIGHT JOIN`等`RIGHT OUTER JOIN`）并观看了 Youtube 教程。如果它不在我的`SQL`声明中，那么欢迎对表格格式提出建议，如果需要任何其他信息，请告诉我。

* * *

我无法控制 MYSQL 版本，这是在 SurpassHosting 托管的远程服务器上运行的（我不推荐它们）。

*MYSQL Server 版本：5.0.95-community
协议版本：10
通过 PHPMyAdmin 运行 SQL 查询版本信息：3.4.10.1 和 MSQL WorkBench 5.2.37 CE*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:07:16.413

显然，同样`loc_id`的，左表 ( )`1`中有 4 条记录，右表 ( `d_view_angles`) 中有 3 条记录`c_survey_elements`。

这可能意味着您需要使用的不仅仅是`loc_id`加入。

显示每个表的相关内容将使这一点变得清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:20:09.550

我认为您的表 '`d_view_angles`包含 loc_id = 1 的多个寄存器

检查并确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:14:19.633

看起来唯一值会 `d.gps_lng survey_lng,`导致返回更多结果，要么从查询中省略此字段，要么使用过滤结果`DISTINCT`，否则`WHERE`您有正确的查询。

# sql - ASP.NET 配置为 SQL Server 2008 Express 生成 .mdf？

> ID：12784488
> 
> 赞同：1
> 
> 时间：2012-10-08T15:11:37.623
> 
> 标签：sql, sql-server, asp.net-mvc

我使用 Visual Studio 2012，我的问题是：当我单击时`Project->ASP.net configuration`，我可以获取`aspnetdb.mdf`SQL Server 2008 Express 的文件，因为克罗地亚的主机不支持 SQL Server 2012？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:14:07.233

您必须正确修改 web.config 文件并将连接字符串使用现有的 2008 数据库进行 pas.net 配置。

# jakarta-ee - WebSphere Application Server 8.5 上的 SRVE0200E 错误

> ID：12784489
> 
> 赞同：2
> 
> 时间：2012-10-08T15:11:41.880
> 
> 标签：jakarta-ee, servlets, websphere

我开发了一个正确部署在*Apache Tomcat*上的 Java 动态 Web 项目。现在我正在尝试在*WebSphere Application Server 8.5上部署**.war*文件。企业应用程序已正确创建，但是当我尝试使用浏览器访问我的应用程序时，出现以下错误：

 *```
Error 404: javax.servlet.UnavailableException: SRVE0200E: Servlet [it.foo.simpleapp.SimpleApp]: Could not find required class - class java.lang.ClassNotFoundException: it.foo.simpleapp.SimpleApp 
```

*该应用程序非常简单：当GET*到达时，它应该以*text/html*内容进行响应。

 *我很确定*.war*文件是正确的，但我是 WebSphere 部署的新手。

servlet 类是：

```
@WebServlet("/")
public class SimpleApp extends HttpServlet {
   private static final long serialVersionUID = 1L;

   public SimpleApp() {
      super();
   }

   protected void doGet(HttpServletRequest request, HttpServletResponse response)
   throws ServletException, IOException {
      response.getWriter().print("<html><body><h1>SimpleApp servlet ready!</h1>");
      response.getWriter().print("</body></html>");
      response.setContentType("text/html");
   }

} 
```

*web.xml*文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>SimpleApp</display-name>
</web-app> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T10:33:44.017

问题可能与*Tomcat*使用的一些库没有进入*WebSphere*环境有关；所以我解决了用 IBM Java 库编译代码的问题。以下步骤解决了我的问题。

1.  为 Eclipse 安装 WASdev 插件。可以从以下 URL 检索它：[http ://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/V8.5/](http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/V8.5/)

2.  在 Eclipse 中，在“ *Window > Preferences > Server > Runtime Environments* ”下，应单击“ *Add...* ”按钮添加一个新的运行时环境。

3.  在“ *IBM* ”文件夹下选择“ *WebSphere Application Server v8.5* ”运行环境并选中“*创建新的本地服务器*”。在下一个窗口中，必须提供“*安装目录”；*例如：`{your_path}\IBM\WebSphere\AppServer`。

    如果在这些操作过程中显示“*安全服务器仅支持 IBM JRE 6.0 或更高版本。使用产品安装映像中的 IBM JRE。* ”之类的消息，您可以[按照本教程](http://ishtiaque.wordpress.com/2012/07/13/secure-servers-are-only-supported-with-ibm-jre-6-0-or-above-error-in-eclipse-ide/)更改`eclipse.ini`内容。这些行：

    ```
    --launcher.defaultAction
    openFile
    -vmargs
    -Dosgi.requiredJavaVersion=1.5
    -Dhelp.lucene.tokenizer=standard
    -Xms40m
    -Xmx512m 
    ```

    必须替换为以下行：

    ```
    --launcher.defaultAction
    openFile
    -vm
    {your_path}\IBM\WebSphere\AppServer\java\bin\javaw.exe
    -vmargs
    -Dosgi.requiredJavaVersion=1.5
    -Xms40m
    -Xmx512m 
    ```

4.  现在您可以创建一个新的“*动态 Web 项目*”，将*WebSphere Application Server*指定为*目标运行时*。

导出的*WAR*文件可以作为*Enterprise application*正常工作。

我希望这会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T16:14:37.277

Following step 3 above may not resolve the message like:

> "Secure servers are only supported with IBM JRE 6.0 or above. Use the IBM JRE from the product installation image."

Instead of changing `eclipse.ini` you may need to add JVM directly to `eclipse.exe` command line like

> {eclipse_install_path}/eclipse.exe -vm "C:\Program Files\Java\jdk1.6.0_16\bin\javaw.exe" -vmargs -Xmx1024m -XX:PermSize=256M -XX:MaxPermSize=512M -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode

see more at [Howto start eclipse in JDK?](https://stackoverflow.com/questions/1917760/howto-start-eclipse-in-jdk)**

# jquery - jQuery可拖动：当鼠标离开父级时停止拖动

> ID：12784497
> 
> 赞同：2
> 
> 时间：2012-10-08T15:12:12.813
> 
> 标签：jquery, draggable, mouseout

请查看这个[jsFIDDLE](http://jsfiddle.net/Q2h2w/)

```
<div id="wrapper">
    <div class="item">
        <div class="button_area"></div>
        <div class="icon"></div>
    </div>

    <div class="item">
        <div class="button_area"></div>
        <div class="icon"></div>    
    </div>
</div>​ 
```

这是html代码，我正在拖动.button_area：

```
$('.button_area').draggable({}); 
```

除了一件事之外，它的工作方式与它所认为的一样。当我单击红色区域（在第二个黄色方块中）并开始向左拖动（第一个黄色方块）时，我希望它在鼠标经过第二个黄色方块（父级）时停止拖动过程....不是可拖动的对象（助手）...鼠标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:20:08.350

您只能以这种方式修改您的 jquery

```
$( ".button_area" ).draggable({
drag: function(event, ui) { 
  if(my_condition) 
      return false; }
  });​ 
```

提示！

一个例子是这样的：

```
$( ".button_area" ).draggable({
drag: function(event, ui) { 
  if($('.button_area').offset().left > 50) 
  { 
     $( '.button_area' ).draggable( 'option',  'revert', true ).trigger( 'mouseup' );
  } 
 }
 });​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:39:08.037

在 sokie 和 Lunik 的帮助下，我做到了：[jsFIDDLE SOLUTION](http://jsfiddle.net/Q2h2w/7/)

多谢你们。

```
$( ".button_area" ).draggable({});

$(".item").mouseout(function() {
    $( '.button_area' ).draggable( 'option',  'revert', true ).trigger( 'mouseup' );
}); 
```

# jquery - ajax GET/POST，实际发送的是什么？

> ID：12784498
> 
> 赞同：0
> 
> 时间：2012-10-08T15:12:16.513
> 
> 标签：jquery, ajax

```
$.ajax({ 
    url: 'somewhere.php',
    data: { foo: 'foo', bar: 'bar' }
}); 
```

我知道这会在 firebug 中生成一个 get-string，类似于`somepage.php?foo=foo&bar=bar`

```
$.ajax({ 
    url: 'somewhere.php',
    data: { foo: 'foo', bar: 'bar' },
    type: 'POST'
}); 
```

这将发布一个带有值的表单。

但它是在使用时发送的完整页面`$.ajax()`吗？或者它只是页面的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:13:41.953

`data`参数包含您发送的所有数据，因此它不是页面的一部分，也不是整个页面（除非您这样做）。

在您的示例中，您发送了两个变量`foo`和`bar`，它们在对象内部，这里唯一的区别是发送数据的方法（`get`或`post`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:17:28.533

最后，它只是发送了另一个 HTTP 请求。您的`$.ajax()`调用参数定义了请求的外观。您没有发送页面，就像您通过在地址栏中键入来告诉浏览器访问 google.com 时没有发送页面一样。

不过，您正在收到一个页面。通过 ajax 调用接收页面和浏览到它的区别在于它不会发送到浏览器的渲染引擎并显示在它自己的窗口或选项卡中，而是该页面的源只是发送到您在 jQuery 中定义的回调函数.

# c# - Windows Phone后台代理Microsoft.Phone.dll提交问题

> ID：12784503
> 
> 赞同：0
> 
> 时间：2012-10-08T15:12:37.510
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, background-agents

我正在尝试将应用程序提交到应用程序中心，它正在使用背景代理来更新应用程序磁贴。后台代理需要使用 Microsoft.Phone.dll，但是当我提交应用程序时出现以下错误

> 2011：后台代理无法使用 Microsoft.Phone.Shell.ShellTile::Create，这是 TileAgent.dll 试图使用的程序集。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 试图使用的程序集 System.Windows.Controls.MediaElement::Pause。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::Stop。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::Play。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::set_Position。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::set_AutoPlay。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::SetSource。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Media.VideoBrush。更新您的文件，然后重试。
> 
> 2011：后台代理无法使用 Microsoft.Phone.dll 正在尝试使用的 System.Windows.Controls.MediaElement::.ctor。更新您的文件，然后重试。

尽管我没有使用任何这些程序集，也没有在代理项目的任何地方引用它们。请帮忙！

**编辑**：我删除了 create tile 方法，现在这个错误消失了。其余的虽然保持不变，但我没有使用它们中的任何一个在这个项目中绝对没有使用 System.Widnows.Contols

**编辑**：这是我在代理项目中引用的列表

```
Microsoft.Phone
mscorelib
mscorelib.extensions
system
System.Core
System.Net
System.Windows
System.Xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:26:33.833

您不能使用计划任务中的某些 API。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/hh202962(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202962%28v=vs.92%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T08:21:52.167

您的代理对使用列出的 API 的代码有一些参考。例如：

你有一些课程会创建新的瓷砖。`Microsoft.Phone.Shell.ShellTile::Create`. 并且您的后台代理位于同一个项目中，或者您的 bg 代理使用位于您创建新图块的项目中的代码。

一些插图：

**项目A**

```
 //draws tile 
 public class TileBuilder() {}
 //creates new tile using TileBuilder() 
 public class NewTileManager(TileBuilder tBuilder) 
 {
 } 
```

**项目B**

```
 public class ScheduledAgent : ScheduledTaskAgent
  {
      protected override void OnInvoke(ScheduledTask task)
      {
        //update data
        var tBuilder = new TileBuilder(); // oops, you use code from proj A. 
                                          // So, you have it
                                          // as a reference, And MS thinks that 
                                          // your bgAgent uses forbidden API

      }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T22:36:14.427

我知道这是旧的，但我有一个 hacky 解决方案。您不能在后台代理中使用这些方法。如果您真的想这样做，请使用反射。但请确保您实际上并未从后台任务中调用任何该代码，因为这是不允许的。

例如，对于 ShellTile.Create：

```
 using System.Reflection;

   ...

      Uri NavUri = //your tile's navigation URI
      ShellTileData data = //your tile's data

      object[] parameters = { NavUri, data};
      Type[] types = new[] { typeof(Uri), typeof(ShellTileData)};
      Type type = typeof(ShellTile);
      MethodInfo info = type.GetMethod("Create", types);
      info.Invoke(null, parameters); 
```

这将诱使开发中心接受您的 xap。

# android - 如何在球衣 POST 注释中访问 POST 方法（Android）发送的数据？

> ID：12784504
> 
> 赞同：3
> 
> 时间：2012-10-08T15:12:36.807
> 
> 标签：android, json, jersey, jax-rs

如何在球衣 POST 注释中访问 POST 方法（Android）发送的数据？ **安卓客户端：**

```
public class TestClient extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_main);
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("myURL");

        try {

            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("user", "user1"));
            nameValuePairs.add(new BasicNameValuePair("password", "password1"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            httpclient.execute(httppost);

        } catch (ClientProtocolException e) {

        } catch (IOException e) {

        }

    }

} 
```

**以下是Tomcat在Localhost上运行的Server的代码：**

```
@Path("test")
public class Test {
     @GET
     @Produces(MediaType.TEXT_PLAIN)
        public String respondAsReady() {
            return "Running";
        }

     @POST
     @Consumes(MediaType.APPLICATION_FORM_URLENCODED)
     @Produces(MediaType.TEXT_PLAIN or other?)

              //Here I'd like the program to post (with System.out.println) the data to the console which is uploaded by the client using the POST method.

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:46:12.740

无论客户端是使用 httpclient 的 PHP、html 还是 android，服务器端都不应该关心。您应该能够使用 @FormParam 注释来获取值。[请参阅我在评论](https://stackoverflow.com/questions/9358468/using-jersey-to-read-form-data)中发布的问题或[此示例](http://www.mkyong.com/webservices/jax-rs/jax-rs-formparam-example/)中的答案。

您应该能够将答案更改为更简单的内容，例如：

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public void themethodname(@FormParam("user") String user, 
                          @FormParam("password") String password) {
    System.out.println("Username: "+user+", "+"Password: "+password);
} 
```

# jquery - Jquery 动态创建的可放置元素不起作用

> ID：12784505
> 
> 赞同：1
> 
> 时间：2012-10-08T15:12:44.547
> 
> 标签：jquery, html, jquery-ui, droppable, jquery-ui-droppable

好吧，大家好，我开发了一个页面来创建拖放表单，但是我在放置内部元素时遇到了问题，例如：

```
<div class="container">
   <div classs="row"> <! - I drop here -!> </ div>
   <- Content is dropped here! : '(-!>
</ div> 
```

这是我的Javascript：

```
 $(document).ready(function(){

                $( "#a .row-element" ).draggable({ 
                    revert: "invalid",
                });

                $(  "#a .span2-element" ).draggable({ 
                    revert: "invalid",
                });

                $(".row").droppable({
                    accept: '.span2-element',
                    activeClass: "ui-state-hover",
                    hoverClass: "ui-state-active",
                    greedy: true,
                    drop: function(event, ui) {
                        $('<div class="span2"></div>"').appendTo(this);
                    },
                    activate: function(event, ui) {
                        $(ui.helper).draggable({ revert: "valid"});
                    }
                });

                $(".container").droppable({
                    accept: '.row-element , .span2-element',
                    activeClass: "ui-state-hover",
                    hoverClass: "ui-state-active",
                    greedy: true,
                    drop: function(event, ui) {
                        $('<div class="row"></div>"').appendTo(this);
                    },
                    activate: function(event, ui) {
                        $(ui.helper).draggable({ revert: "valid"});
                    }
                });
        }); 
```

在我看来，新创建的元素不是 dropavel ...：/

有什么建议么？！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:15:36.703

首先，确保您的 HTML 代码是：

```
<div class="container">
   <div class="row"></div>
</div> 
```

那么，为什么你有：

```
$('<div class="span2"></div>"').appendTo(this); 
```

你应该有 ：

```
 $('<div class="span2"></div>').appendTo(this); 
```

# spring-mvc - spring 3 uploadify 给出 404 错误

> ID：12784506
> 
> 赞同：1
> 
> 时间：2012-10-08T15:12:45.267
> 
> 标签：spring-mvc, uploadify

我正在使用 Spring 3 并实现 Uploadify。问题是，文件正在正确更新，但在文件上传完成后给出 HTTP 错误 404。我尝试了所有可能的解决方案，但没有一个有效。

文件已上传。值正确存储在数据库中，只是我收到 HTTP 错误 404。任何帮助表示赞赏并提前致谢。

**解决方案是：**

```
Finally i found the solution but it is lame.

I removed the return "" and changed the method as void. Thats it.

But still i don't understand why the same code is working in Spring 2.5.6 and not in 3. 
```

**截图网址**：http : [//imgur.com/bf3qo](http://imgur.com/bf3qo)

**JSP 页面**

```
$(function() {
    $('#file_upload').uploadify({
        'swf'      : 'scripts/uploadify.swf',            
        'fileObjName' : 'the_file',
        'fileTypeExts' : '*.gif; *.jpg; *.jpeg; *.png',         
        'multi'    : true,          
        'uploader' : '/photo/savePhoto',
        'fileSizeLimit' : '10MB',
        'uploadLimit' : 50, 
        'onUploadStart' : function(file) {  
            $('#file_upload').uploadify('settings', 'formData', {'trip_id' :'1', 'trip_name' :'Sample Trip', 'destination_trip' :'Mumbai','user_id' :'1','email' :'s@s.com','city_id' :'12'});  
            },
        'onQueueComplete' : function(queueData) {
            console.log('queueData : '+queueData);
            window.location.href = "trip/details/1";
        }
    });
}); 
```

**控制器**

```
@RequestMapping(value="photo/{action}", method=RequestMethod.POST)
public String postHandler(@PathVariable("action") String action, HttpServletRequest request) {
if(action.equals("savePhoto"))
{   
        try{
    MultipartHttpServletRequest multipartRequest = (MultipartHttpServletRequest)request;
    MultipartFile file = multipartRequest.getFile("the_file");
    String trip_id = request.getParameter("trip_id");
    String trip_name = request.getParameter("trip_name");
    String destination_trip = request.getParameter("destination_trip");
    String user_id = request.getParameter("user_id");
    String email = request.getParameter("email");
    String city_id = request.getParameter("city_id");
        photo.savePhoto(file,trip_id,trip_name,destination_trip,user_id,email,city_id);
    photo.updatetrip(photo_id,trip_id);
    }catch(Exception e ){e.printStackTrace();}
}
return "";
} **Solution** : Change the method return type as void and remove the return 
```

**弹簧配置**

```
<bean class="org.springframework.web.multipart.commons.CommonsMultipartResolver" id="multipartResolver">
   <property name="maxUploadSize" value="10000000"/>
</bean> 
```

**Web.xml 是**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>project_name</display-name>
  <distributable/>
  <context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath:log4j.properties</param-value>
  </context-param>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/project_name-servlet.xml,/WEB-INF/applicationContext-jdbc.xml</param-value>
  </context-param>
  <listener>
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
  </listener>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <servlet>
    <servlet-name>project_name</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>project_name</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <session-config>
    <session-timeout>60</session-timeout>
  </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:16:30.647

也许您只是没有`trip/details/1`在您的应用程序中分页？

编辑：

更改`window.location.href = "trip/details/1";`为

```
 window.location.href = "<%= request.getContextPath() %>/trip/details/1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:26:01.560

> 文件已上传。值正确存储在数据库中，只是我收到 HTTP 错误 404。

这告诉我的是，您的请求已正确提交到 URL`'/photo/*'` 并由 postHandler() 方法正确处理。

您收到 404 是因为您的 Web 应用程序不知道如何处理`""`该`postHandler()`方法试图将您定向到的 url。

很可能（我在这里做了一些假设，如果您包含 web.xml 会很有帮助）请求映射器未设置为处理您的控制器返回的“”；让您的控制器返回某种有意义的视图名称，该名称具有有效的 servlet 映射，您将不会得到 404。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T02:16:03.740

我也有这个问题。我添加了“@ResponseBody”并得到了正确的结果。我认为问题在于没有注释“@ResponseBody”，返回的字符串由一些奇怪的解析器处理，并且javascript代码得到意外形式的响应。

```
@RequestMapping(value="/uploadFile",method=RequestMethod.POST)
public @ResponseBody String upload(HttpServletResponse response,
                        HttpServletRequest request) throws IOException{ 
```

# c - C中矩阵实现的区别

> ID：12784508
> 
> 赞同：5
> 
> 时间：2012-10-08T15:13:08.853
> 
> 标签：c, matrix

我以两种不同的方式在 C 中创建了两个二维数组（矩阵）。
我不明白它们在内存中的表示方式之间的区别，以及我不能以相同方式引用它们的原因：

```
scanf("%d", &intMatrix1[i][j]); //can't refer as  &intMatrix1[(i * lines)+j])

scanf("%d", &intMatrix2[(i * lines)+j]); //can't refer as &intMatrix2[i][j]) 
```

这两个数组的实现方式有什么区别，为什么我必须以不同的方式引用它们？

如何以相同的方式（`??????`在我的`printMatrix`函数中）引用每个数组中的元素？

```
int main()
{
   int **intMatrix1;
   int *intMatrix2;

   int i, j, lines, columns;

   lines = 3;
   columns = 2;

   /************************* intMatrix1 ****************************/

   intMatrix1 = (int **)malloc(lines * sizeof(int *));

   for (i = 0; i < lines; ++i)
      intMatrix1[i] = (int *)malloc(columns * sizeof(int));

   for (i = 0; i < lines; ++i)
   {
       for (j = 0; j < columns; ++j)
       {
       printf("Type a number for intMatrix1[%d][%d]\t", i, j);
       scanf("%d", &intMatrix1[i][j]); 
       }
   }

   /************************* intMatrix2 ****************************/ 

   intMatrix2 = (int *)malloc(lines * columns * sizeof(int));

   for (i = 0; i < lines; ++i)
   {
       for (j = 0; j < columns; ++j)
       {
       printf("Type a number for intMatrix2[%d][%d]\t", i, j);
       scanf("%d", &intMatrix2[(i * lines)+j]);
       }
   }

   /************** printing intMatrix1 & intMatrix2 ****************/

   printf("intMatrix1:\n\n");
   printMatrix(*intMatrix1, lines, columns);

   printf("intMatrix2:\n\n");
   printMatrix(intMatrix2, lines, columns);
}

/************************* printMatrix ****************************/

void printMatrix(int *ptArray, int h, int w)
{
    int i, j;

    printf("Printing matrix...\n\n\n");

    for (i = 0; i < h; ++i)
        for (j = 0; j < w; ++j)
        printf("array[%d][%d] ==============> %d\n, i, j, ??????);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:21:14.363

您正在取消引用`Matrix1`两次..

```
Matrix1[i][j] ; 
```

这意味着它是一个二维数组或这样声明的双指针。

```
int **Matrix1 ; 
```

A`double pointer`可以被认为是指针数组。它的每个元素本身就是一个指针，因此它被取消引用一次以到达指针元素，并取消引用两次以访问该成员指针或数组的数据成员。你写的这个声明相当于这个..

```
Matrix1[i][j] ;   //is ~ to

*( *(Matrix1 + i) + j) ; 
```

对于这样的单个指针。

```
int *Matrix2 ; 
```

您只能取消引用一次，就像这样。

```
Matrix2[i] ;  //is ~ to
*(Matrix2 + i) ; 
```

你写的这个声明..

```
Matrix2[(i * lines)+j] ;
         |-----------| 
```

这部分计算为一个数字，因此它取消了一次。

```
(i * lines) + j ; 
```

至于您的`printmatrix()`函数，`ptArray`传递给它的是单个指针。所以你不能取消引用它两次。

也许您可以从我在这里的回答中更好地理解静态和动态二维数组。

[二维数组作为函数的参数](https://stackoverflow.com/questions/12652598/2d-array-as-argument-to-function/12653518#12653518)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T15:22:41.880

两个矩阵都是内存中的字节序列。但是，它们之间的区别在于您如何定义内存接口来表示矩阵。在一种情况下，您只是定义一个内存段，其元素数量等于矩阵中的元素，而在另一种情况下，您专门分配内存来表示每个特定的行。

以下情况的计算成本更高，因为您调用**malloc()**的次数更多：

```
intMatrix1 = (int **)malloc(lines * sizeof(int *));
for (i = 0; i < lines; ++i)
  intMatrix1[i] = (int *)malloc(columns * sizeof(int)); 
```

但是，它带来的优势是您可以更清晰地引用矩阵元素：

```
intMatrix1[i][j]; 
```

如果您只分配一个元素序列等于矩阵中的元素数量，则必须考虑行/列索引计算以引用内存中的正确矩阵元素。

为了尝试增加代码的一致性程度，我可以建议一个接收矩阵行引用和矩阵列数并打印一行的函数吗？

```
void PrintLine(int *ptrLine, int lineLen) {
   unsigned int i;
   for(i = 0; i < lineLen; i++)
      printf("%d ", ptrLine[i]);
   printf("\n");
} 
```

然后，对于每种矩阵类型，您只需执行以下操作：

```
// Case 1
for(i = 0; i < lines; i++)
   PrintLine(intMatrix1[i], columns);
// Case 2
for(i = 0; i < lines; i++) {
   PrintLine(intMatrix2 + i*columns, columns);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T15:24:23.213

在 C 中，数组访问运算符`[]`实际上只是一种执行[指针运算](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)的更简洁的方法。对于类型为 的元素的一维数组`type_s`，`arr[i]`等价于`*(arr + (i * sizeof(type_s)))`。要剖析该表达式：

*   `arr`将是基地址，即存储此数组的最低内存地址
*   `i`是数组中元素的零索引位置
*   `sizeof`返回元素 in占用内存的`char`s 数（通常与字节数相同，但 C 规范没有强制要求） 。`arr`编译器将确定元素的大小并为您执行此数学运算。

作为旁注，此语法具有`arr[i]`等效于的副作用`i[arr]`，尽管普遍接受将索引放在括号中。

综上所述，让我们看看您的两个声明之间的区别：

`intMatrix1[i][j]`相当于`*(*(intMatrix1 + i * sizeof(int)) + j * sizeof(int))`。因此，该表达式中有**两个**取消引用运算符，这意味着 intMatrix 是一个数组数组（它包含指向指针的指针）。

另一方面，`intMatrix2[(i * lines)+j]`等价于`*(intMatrix2 + ((i * lines) + j) * sizeof(int))`，它只包含一个解引用运算符。您在这里所做的是定义一个包含与原始二维数组相同数量的元素的一维数组。如果您的数据可以最好地用矩阵表示，那么我建议您使用第一个版本：`intMatrix1[i][j]`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T15:21:23.747

不同之处在于第一个数组：

```
intMatrix1 = (int **)malloc(lines * sizeof(int *)); 
```

创建一个指针数组`intMatrix1`。这些指针中的每一个都指向一个 int 数组（你在这里 malloc ）。

```
for (i = 0; i < lines; ++i)
   intMatrix1[i] = (int *)malloc(columns * sizeof(int)); 
```

这就是为什么您需要声明中的 2 星（取消对指针数组的引用，然后是对 int 数组的引用）和双括号来访问单个元素：

```
int **intMatrix1;

int i = intMatrix[row][column];
int i = *(*(intmatrix + row) + column); 
```

对于第二个矩阵，您只创建一个大小为 column * rows 的 int 数组。

```
int *intMatrix2 = (int *)malloc(lines * columns * sizeof(int));

int i = intMatrix[row + column];
int i = *(intMatrix + row + column); 
```

要打印 2 个数组，您必须使用不同的打印函数，因为 2 个矩阵的内部结构不同，但您已经知道访问这两个数组的不同方法。

# arraylist - 使用 CustomComparator 对 NotesDocuments 的 ArrayList 进行排序

> ID：12784511
> 
> 赞同：0
> 
> 时间：2012-10-08T15:13:36.327
> 
> 标签：arraylist, xpages

我正在尝试使用 java.util.ArrayList 对文档集合进行排序。

```
var myarraylist:java.util.ArrayList = new java.util.ArrayList()
var doc:NotesDocument = docs.getFirstDocument();

while (doc != null) {       
    myarraylist.add(doc)                       
    doc = docs.getNextDocument(doc);        
} 
```

我尝试使用 ArrayList 而不是 TreeMaps 或 HashMaps 的原因是我需要进行排序的字段不是唯一的；这是这两个对象的限制（我无法创建自己的密钥）。

我面临的问题是调用 CustomComparator：

这是我尝试对数组列表进行排序的方式：

```
java.util.Collections.sort(myarraylist, new CustomComparator()); 
```

这是我的课：

```
import java.util.Comparator;
import lotus.notes.NotesException;

public class CustomComparator implements Comparator<lotus.notes.Document>{

public int compare(lotus.notes.Document doc1, lotus.notes.Document doc2) {
    try {
        System.out.println("Here");
        System.out.println(doc1.getItemValueString("Form"));             
         return doc1.getItemValueString("Ranking").compareTo(doc2.getItemValueString("Ranking"));
    } catch (NotesException e) {
        e.printStackTrace();
    }
    return 0;
} 
```

}

错误：

> 脚本解释器错误，line=44，col=23：在 java 类 'java.util.Collections' 上调用方法 'sort(java.util.ArrayList, com.myjavacode.CustomComparator)' 时出错

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:24:00.067

我试图在 try-catch 块中运行您的 SSJS 代码，在 catch 块中打印异常中的错误，我收到以下消息 -`java.lang.ClassCastException: lotus.domino.local.Document incompatible with lotus.notes.Document`

我认为你有不正确的完全限定类名`Document`and `NotesException`。他们应该是**`lotus.domino.Document`**和**`lotus.domino.NotesException`**分别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:12:57.563

这是来自RepeatControl的SSJS：

```
var docs:NotesDocumentCollection = database.search(query, null, 0);
var myarraylist:java.util.ArrayList = new java.util.ArrayList()
var doc:NotesDocument = docs.getFirstDocument();

while (doc != null) {       
    myarraylist.add(doc)                       
    doc = docs.getNextDocument(doc);        
}

java.util.Collections.sort(myarraylist, new com.mycode.CustomComparator());
return myarraylist; 
```

这是我的课：

```
package com.mycode;
import java.util.Comparator;

public class CustomComparator implements Comparator<lotus.domino.Document>{

    public int compare(lotus.domino.Document doc1, lotus.domino.Document doc2) {
        try {  
             // Numeric comparison  
             Double num1 = doc1.getItemValueDouble("Ranking");
             Double num2 = doc2.getItemValueDouble("Ranking");         
             return num1.compareTo(num2);
             // String comparison
             // return doc1.getItemValueString("Description").compareTo(doc2.getItemValueString("Description"));
        } catch (lotus.domino.NotesException e) {
            e.printStackTrace();
        }
        return 0;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T15:01:54.033

并不是说这个答案对您来说一定是最佳实践，但上次我尝试做同样的事情时，我意识到我可以通过 SSJS 将文档作为 NotesViewEntryCollection 获取：

`var col:NotesViewEntryCollection = database.getView("myView").getAllEntriesByKey(mtgUnidVal)`

而不是 NotesDocumentCollection。我只是浏览了每个条目，为那些符合我的条件的条目抓取了 UNID，添加到 java.util.ArrayList()，然后继续发送到它的目的地。我已经在使用父 UNID 的分类列对文档进行排序以在其他地方显示，所以这可能是我应该首先做的；仍处于 XPages/Notes 学习曲线的前沿，因此每天都会带来新的东西。

同样，如果您的收藏不能等同于 Notes View 的一部分，对不起，但对于那些有可用简单方法的人来说，KISS。我经常提醒自己。

# sql - PL/SQL 如何在单个存储过程中编写多条语句

> ID：12784515
> 
> 赞同：0
> 
> 时间：2012-10-08T15:13:39.927
> 
> 标签：sql, oracle, plsql

我需要做以下问题，

编写一个程序，将所有收入低于当前平均工资的员工的工资降低 10%。将表 EMP 的内容视为“所有员工”。让您的程序打印工资略低于平均水平的第一个人的姓名和工资。

解决问题的方法应该是什么？

编写一个程序，将所有收入低于当前平均工资的员工的工资降低 10%。

```
CREATE OR REPLACE PROCEDURE UPDATE_EMP IS
BEGIN
UPDATE EMP
SET SAL= SAL-(SAL*0.1) 
WHERE SAL<(SELECT AVG(SAL) FROM EMP);
END; 
```

和另一个：让你的程序打印工资略低于平均水平的第一个人的姓名和工资。

```
SELECT e.ename
     , e.sal
 from 
    (select ename
            , sal 
      from emp 
      where sal < (select avg(sal)  
                     from emp
                   ) 
     order by sal desc 
     )e  
  where ROWNUM =1; 
```

现在我需要连接两者..​​我怎么能这样做......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:37:46.280

听起来您对存储过程是什么以及它如何帮助您完成涉及许多 SQL 语句的复杂任务有点模糊。

您按照这些说明如何构造存储过程。

[http://www.devshed.com/c/a/Oracle/Oracle-Stored-Procedures/](http://www.devshed.com/c/a/Oracle/Oracle-Stored-Procedures/)

存储过程是一种奇妙的结构，它允许您将多个 SQL 语句放入一个结构中，并保存变量以供下一个 SQL 语句使用。所以你所要做的就是调用存储过程，运行所有的sql语句，返回你的答案或者提交表修改。

你需要这样的东西：

```
CREATE OR REPLACE PROCEDURE UPDATE_EMP RETURN name, value IS
BEGIN

    UPDATE EMP
    SET SAL= SAL-(SAL*0.1) 
    WHERE SAL<(SELECT AVG(SAL) FROM EMP);

    SELECT e.ename INTO name_to_return, e.sal INTO sal_to_return from 
    (select ename, sal from emp where sal < (select 
     avg(sal)from emp) order by sal desc)e   where ROWNUM =1;

    RETURN name_to_return, sal_to_return;
END; 
```

语法可能有点不对劲，当您开始使用时，将您的答案作为新答案发布在这里，并将其标记为答案，您将来*更有*可能获得这样的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:49:46.730

```
 CREATE OR REPLACE PROCEDURE DISPLAY_EMP IS
    IS
    CURSOR emp_cur
    IS 
    SELECT ename
          ,sal
    FROM  emp
    WHERE SAL<( SELECT AVG(SAL) FROM EMP)
    ORDER BY sal desc;
    v_emp_row emp_cur%ROWTYPE;

    BEGIN
    --update all the employee having sal less than avg sal

    UPDATE EMP
    SET SAL= SAL-(SAL*0.1) 
    WHERE SAL<(SELECT AVG(SAL) FROM EMP);

    --display all the employee having sal less than avg sal
     OPEN emp_cur ;
      LOOP
      FETCH emp_cur INTO v_emp_row;
      EXIT WHEN emp_cur%NOTFOUND;
      DBMS_OUTPUT.PUT_LINE('EMPLOYEE NAME : '||v_emp_row.ename||' '
                         ||'SALARY : '||v_emp_row.sal);
      END LOOP;
      CLOSE emp_cur;
    END DISPLAY_EMP;

   --call the display_emp proc to display all the emp
    BEGIN
     DISPLAY_EMP ;
    END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T18:47:44.767

创建或替换过程 DISPLAY_EMP IS IS CURSOR emp_cur IS SELECT ename ,sal FROM emp WHERE SAL<( SELECT AVG(SAL) FROM EMP) ORDER BY sal desc; v_emp_row emp_cur%ROWTYPE;

```
BEGIN
--update all the employee having sal less than avg sal

UPDATE EMP
SET SAL= SAL-(SAL*0.1) 
WHERE SAL<(SELECT AVG(SAL) FROM EMP);

--display all the employee having sal less than avg sal
 OPEN emp_cur ;
  LOOP
  FETCH emp_cur INTO v_emp_row;
  EXIT WHEN emp_cur%NOTFOUND;
  DBMS_OUTPUT.PUT_LINE('EMPLOYEE NAME : '||v_emp_row.ename||' '
                     ||'SALARY : '||v_emp_row.sal);
  END LOOP;
  CLOSE emp_cur;
END DISPLAY_EMP; 
```

--调用display_emp proc来显示所有emp BEGIN DISPLAY_EMP ; 结尾;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:24:57.443

您需要一个过程来进行更新，并且需要另一个函数或 select 语句来打印工资略低于平均水平的第一个人的姓名和工资。

# c# - Parallel.For 和 Break() 的误解？

> ID：12784530
> 
> 赞同：10
> 
> 时间：2012-10-08T15:14:47.523
> 
> 标签：c#, .net, .net-4.0, parallel-processing, task-parallel-library

我正在调查 For 循环中的并行中断。

读完[这个](http://tipsandtricks.runicsoft.com/CSharp/ParallelClass.html)和[这个](http://reedcopsey.com/2010/01/22/parallelism-in-net-part-3-imperative-data-parallelism-early-termination/)后， 我还有一个问题：

我希望这段代码：

```
 Parallel.For(0, 10, (i,state) =>  
     { 
                Console.WriteLine(i); if (i == 5) state.Break(); 
     } 
```

*最多*产生6 个数字 (0..6)。不仅他没有这样做，而且结果长度不同：

```
02351486
013542
0135642 
```

很烦人。（Break() {after 5} 到底在哪里？？）

所以我看了一下msdn

> Break 可用于与循环通信，在当前迭代之后不需要运行其他迭代。如果从从 0 到 1000 并行迭代的 for 循环的第 100 次迭代中调用 Break，则仍应运行小于 100 的所有迭代，但从 101 到 1000 的迭代不是必需的。

`Quesion #1 :`

哪些迭代？整体迭代计数器？还是每个线程？我很确定它是每个线程。请批准。

`Question #2 :`

假设我们正在使用 Parallel + range 分区（由于元素之间没有 cpu 成本变化），因此它在线程之间划分数据。因此，如果我们有 4 个核心（以及它们之间的完美划分）：

```
core #1 got 0..250
core #2 got 251..500
core #3 got 501..750
core #4 got 751..1000 
```

所以线`core #1`会在某个时候相遇`value=100`并断裂。这将是他的迭代次数 `100`。但是线程`core #4`得到了更多的量子，他`900`现在就开始了。他*远远超出*了他的`100'th`迭代。他没有指数低于 100 被阻止！-**所以他会把他们都展示出来。**

我对吗 ？这就是我在示例中获得超过 5 个元素的原因吗？

`Question #3 :`

我怎么真的破了`(i == 5)`？

ps

*我的意思是，来吧！当我这样做时`Break()`，我希望循环停止。就像我在常规`For`循环中所做的那样。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T15:17:12.433

> 最多产生 6 个数字 (0..6)。

问题是这最多不会*产生 6 个 numbers*。

发生的情况是，当您遇到索引为 5 的循环时，您会发送“中断”请求。 `Break()`将导致循环不再处理任何值`>5`，而是处理所有值`<5`。

但是，任何大于 5 且已启动的值仍将得到处理。由于各种索引是并行运行的，因此它们不再是有序的，因此您会得到各种运行，其中某些值`>5`（例如您的示例中的 8）仍在执行。

> 哪些迭代？整体迭代计数器？还是每个线程？我很确定它是每个线程。请批准。

这是传递给 Parallel.For 的索引。Break() 不会*阻止*处理项目，但可以保证处理最多 100 的所有项目，但超过 100 的项目可能会或可能不会被处理。

> 我对吗 ？这就是我在示例中获得超过 5 个元素的原因吗？

是的。如果您使用所示的分区器，一旦您调用`Break()`，超出您中断的项目将不再被安排。但是，已经安排好的项目（即*整个分区*）将得到完全处理。在您的示例中，这意味着您可能总是处理所有 1000 个项目。

> 当 (i == 5) 时，我怎样才能真正打破？

你是 - 但是当你并行运行时，事情就会改变。这里的*实际目标*是什么？如果您只想处理前 6 个项目 (0-5)，则应在通过 LINQ 查询或类似查询循环遍历它们*之前限制这些项目。*然后，您可以处理 6 项`Parallel.For`或`Parallel.ForEach`不使用 a`Break()`且无需担心。

> 我的意思是，来吧！当我做 Break() 时，我希望循环停止。就像我在常规 For 循环中所做的那样。

如果您希望事情尽快停止，您应该使用[`Stop()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallelloopstate.stop.aspx)而不是。`Break()`这不会阻止*已经运行*的项目停止，但将不再安排任何项目（包括索引较低或枚举中比您当前位置更早的项目）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T15:16:58.773

> 如果从 0 到 1000 并行迭代的 for 循环的第 100 次迭代中调用 Break

循环的第 100 次迭代不一定（实际上可能不是）索引为 99 的迭代。

您的线程可以并且将以不确定的顺序运行。当遇到 .Break() 指令时，将不再开始循环迭代。究竟何时发生取决于特定运行的线程调度的细节。

我强烈推荐阅读

[并行编程模式](http://www.microsoft.com/en-us/download/details.aspx?id=19222)

（Microsoft 提供的免费 PDF）

了解进入 TPL 的设计决策和设计权衡。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T15:21:55.903

> 哪些迭代？整体迭代计数器？还是每个线程？

关闭所有已安排（或尚未安排）的迭代。

请记住，委托可能会出现故障，无法保证迭代`i == 5`将是第六次执行，除非在极少数情况下，否则这种情况不太可能发生。

> Q2：我说的对吗？

不，调度不是那么简单。而是将所有任务排队，然后处理队列。但是每个线程都使用自己的队列，直到它们从其他线程窃取时它是空的。这导致无法预测哪个线程将处理哪个委托。

如果委托足够简单，它可能都在原始调用线程上处理（没有其他线程有机会窃取工作）。

> Q3：当 (i == 5) 时，我如何真正打破？

如果您想要线性（特定）处理，请不要同时使用。

该`Break`方法用于支持推测执行：尝试各种方法并在任何方法完成后立即停止。

# java - 为什么当我在冒泡排序算法中反转比较符号时，生成的排序列表不会反转？

> ID：12784534
> 
> 赞同：1
> 
> 时间：2012-10-08T15:15:06.593
> 
> 标签：java, sorting, reverse, bubble-sort

Java 代码：

```
 public static NHLList bubbleSort(NHLList players) {
        for (int i = 0; i < players.size(); i++) {
            for (int j = 0; j < players.size()-1; j++) {
                if (players.get(j).getPoints() < players.get(j+1).getPoints()) {
                    PlayerRecord tempPlayer = players.get(j);
                    players.set(players.get(j+1), j);
                    players.set(tempPlayer, j+1);
                }
            }
        }
        return players;
    } 
```

如果我更改`j < ...`为`j > ...`结果列表，则不是先前的列表倒置，尽管我认为它应该是。它所做的只是读取数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:20:35.510

*卷起袖子*

您正在反转错误行上的标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:28:28.547

正如其他人指出的那样，请指定您正在编辑哪一行。如果您正在编辑正确的行，那么您可能会不高兴听到这**实际上并没有实现** `BubbleSort`。

您实际上是在对列表`n`时间执行完整扫描，在某些情况下，这可能会导致排序列表，但实际上并不是`BubbleSort`全部。我建议您研究您的代码并尝试自己弄清楚为什么您的循环计数器`i`从未在代码中被引用（除了在循环控制中）。

# java - Hashmap - 单个键，多个值 - 如何检索？

> ID：12784535
> 
> 赞同：2
> 
> 时间：2012-10-08T15:15:08.600
> 
> 标签：java, xml, hashmap, multivalue

我正在调用一项服务，我得到以下格式的 XML 响应。

如何从此响应中检索单个键下的多个值？我想将所有值存储在`List<String>`

```
<p700:item xmlns:p700="http://abc.test.com">
    <p700:key xsi:type="xsd:string">Key1</p700:key>
    <p700:value xsi:type="xsd:string">Value1</p700:value>
    <p700:value xsi:type="xsd:string">Value2</p700:value>
    <p700:value xsi:type="xsd:string">Value3</p700:value>
    <p700:value xsi:type="xsd:string">Value14</p700:value>
</p700:item>
<p700:item xmlns:p700="http://abc.test.com">
    <p700:key xsi:type="xsd:string">Key1</p700:key>
    <p700:value xsi:type="xsd:string">Value1</p700:value>
    <p700:value xsi:type="xsd:string">Value2</p700:value>
</p700:item> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:19:50.860

创建地图`String`<-> `List<String>`：

```
Map<String, List<String>> map = new HashMap<...>(); 
```

使用此代码添加值：

```
List<String> values = map.get( key );
if( null == values ) {
    values = new ArrayList<String>();
    map.put( key, values );
}

values.add( "xxx" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:19:32.543

如果您不想`Map<String, List<String>>`在问题下的评论中提及，您可以遍历地图并将它们手动添加到列表中。

```
List<String> theList = new ArrayList<String>();
String theKey = "The Key";
for(Map.Entry<String, String> entry : map.entrySet()) {
    if(entry.getKey().equals(theKey)) {
        theList.add(entry.getValue());
    }
} 
```

这当然假设您已经将 XLS 中的数据提取到`Map<String, String>`. 如果你没有，那完全是另一回事。

如果您需要一个包来摄取您的 XLS，请考虑[JXLS](http://www.jarvana.com/jarvana/view/net/sf/jxls/jxls-core/0.9.5/jxls-core-0.9.5-javadoc.jar!/net/sf/jxls/transformer/XLSTransformer.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:16:32.753

Guava 有一个[`Multimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)接口和一个[`ListMultimap`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/ListMultimap.html)实现，它是列表结构中包含的多个值的键映射（与集合或排序集合相反）。它本质上是一个`Map<K, Collection<V>>`. 您还可以[在此处](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multimap)找到示例。至于实际解析 XML，这里有很多关于这个的问题，你可以从[这个](https://stackoverflow.com/questions/373833/best-xml-parser-for-java)开始。

# winforms - ClickOnce 部署 - 找不到文件

> ID：12784537
> 
> 赞同：0
> 
> 时间：2012-10-08T15:15:13.487
> 
> 标签：winforms, clickonce

我仍然在将我的应用程序部署到远程 ftp 服务器时遇到问题。这一次，当用户单击设置时，出现类似的弹出错误以联系管理员，但错误是找不到文件。请问我该如何解决这个问题？

```
PLATFORM VERSION INFO
    Windows             : 6.1.7601.65536 (Win32NT)
    Common Language Runtime     : 4.0.30319.17626
    System.Deployment.dll       : 4.0.30319.17626 built by: FX45RCREL
    clr.dll             : 4.0.30319.17626 built by: FX45RCREL
    dfdll.dll           : 4.0.30319.17626 built by: FX45RCREL
    dfshim.dll          : 4.0.41208.0 (Main.041208-0000)

SOURCES
    Deployment url          : file:///C:/Users/CONCE/Downloads/AFDBFrontEnd.application

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of C:\Users\CONCE\Downloads\AFDBFrontEnd.application resulted in exception. Following failure messages were detected:
        + Downloading file:///C:/Users/CONCE/Downloads/AFDBFrontEnd.application did not succeed.
        + Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.
        + Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.
        + Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    * [10/8/2012 9:58:22 AM] : Activation of C:\Users\CONCE\Downloads\AFDBFrontEnd.application has started.

ERROR DETAILS
    Following errors were detected during this operation.
    * [10/8/2012 9:58:22 AM] System.Deployment.Application.DeploymentDownloadException (Unknown subtype)
        - Downloading file:///C:/Users/CONCE/Downloads/AFDBFrontEnd.application did not succeed.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
            at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
            at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
            at System.Deployment.Application.DownloadManager.DownloadManifestAsRawFile(Uri& sourceUri, String targetPath, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.Net.WebException
        - Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.
        - Source: System
        - Stack trace:
            at System.Net.FileWebRequest.EndGetResponse(IAsyncResult asyncResult)
            at System.Net.FileWebRequest.GetResponse()
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
        --- Inner Exception ---
        System.Net.WebException
        - Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.
        - Source: System
        - Stack trace:
            at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
            at System.Net.FileWebRequest.GetResponseCallback(Object state)
        --- Inner Exception ---
        System.IO.FileNotFoundException
        - Could not find file 'C:\Users\CONCE\Downloads\AFDBFrontEnd.application'.
        - Source: mscorlib
        - Stack trace:
            at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
            at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
            at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
            at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, Boolean useAsync)
            at System.Net.FileWebStream..ctor(FileWebRequest request, String path, FileMode mode, FileAccess access, FileShare sharing, Int32 length, Boolean async)
            at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T23:41:31.140

我有一个像这样的错误让我在下午的大部分时间里都感到难过。我试图从 Firefox 启动该应用程序。

一旦我尝试使用 Internet Explorer 从链接进行部署，一切都很好。

# sql-server-2008 - 在查找表中为列 id 的每个唯一值创建重复记录

> ID：12784540
> 
> 赞同：0
> 
> 时间：2012-10-08T15:15:19.573
> 
> 标签：sql-server-2008, duplicates

我有一个以 id（主键）、名称、值和 branchId 作为列的查找表。目前我有一组数据，整个记录的 branchId 相同。我需要为 name 和 value 列复制具有相同值的数据，但在同一个表中使用不同的 branchId 值。

任何有关查询/脚本以实现此目的的帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:25:29.533

如果`id`是`IDENTITY`，它的值将自动生成：

```
INSERT INTO tableX                    --- the name of your table
    (name, value, branchID)
SELECT 
    name, value, 23                   --- branch to be added
FROM
    tableX
WHERE
    branchID = 12 ;                   --- the existing branch 
```

对于一组 branchID 值，您可以`CROSS`连接到现有表（或动态创建一个表）：

```
INSERT INTO tableX                    
    (name, value, branchID)
SELECT 
    t.name, t.value, ins.branchID
FROM
        tableX AS t
    CROSS JOIN
        ( VALUES
            (1), (5), (7), (9), (10)      --- branchIDs to be inserted
        ) AS ins (branchID)
WHERE
    t.branchID = 12 ;                     --- the existing branchID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:27:33.293

```
insert into LookupTable
(
    name,
    value,
    branchId
)
select
    name,
    value,
    'BranchId2'
from LookupTable
where branchId = 'BranchId1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:19:06.043

试试这个：

```
SELECT  id, name, value, branchId, 
row_number() over (partition by name, value order by id) new_branch_id 
from tablename 
```

# mod-rewrite - 仅将子域的根转发到主域中的文件夹 (mod_rewrite)

> ID：12784542
> 
> 赞同：0
> 
> 时间：2012-10-08T15:15:24.373
> 
> 标签：mod-rewrite

我想我在这里误解了一些基本的东西，因为这是我第一次使用`mod_rewrite`.

我想要以下内容：

```
blog.example.com
blog.example.com/
blog.example.com/index.php 
```

重定向到：

```
example.com/blog 
```

但是，我希望所有其他情况都不做任何事情，例如

```
blog.example.com/foobar
blog.example.com/wp-admin
blog.example.com/wp-admin.php 
```

这是我当前的 .htaccess：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} =blog.example.com
RewriteCond %{REQUEST_URI} ^|/|index\.php$
RewriteRule ^(.*)$ http://www\.example\.com/blog [QSA,L] 
```

我尝试了许多变体，但每次要么所有请求都重定向，要么没有重定向，所以`mod_rewrite`肯定是在做某事，只是不是我想要的。

我已经浏览了[这篇文章](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)以了解任何相关的内容，但我认为问题更多在于我由于缺乏经验而遗漏了一些微妙的事实。有人会指出我的错误吗？我知道我们不需要`mod_rewrite`关于 SO 的另一个问题，但我真的在这个问题上苦苦挣扎。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:36:40.353

试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} =blog.example.com [NC]
RewriteRule ^/?(index\.php)?$ http://www.example.com/blog [QSA,R,L] 
```

一些基本点：

1.  重写规则的第二部分不是正则表达式，因此不需要在此处转义句点。

2.  我不熟悉 RewriteCond 的 =String 选项。谢谢你今天教我一些东西（当我在那里没有看到正则表达式时我很担心，但这应该没问题）！我会在此处添加 [NC]，因为它有助于匹配您的域的小写和大写版本。

3.  除非您的虚拟主机包含 blog.example.com 子域作为正确的别名，并且为该子域设置了 DNS，否则这些都不起作用。

# asp.net - @using 和 <%using 区别

> ID：12784545
> 
> 赞同：0
> 
> 时间：2012-10-08T15:15:32.860
> 
> 标签：asp.net, razor, knockout-2.0, kentico, knockout-mvc

我是 Razor & Knockout mvc & MVC 的粉丝，

不幸的是，我们不能在我们的 CMS(KENTICO) 解决方案上使用普通的 MVC，所以我不得不使用带有经典 ASPX 的 ASP .NET 创建一个自定义 MVC。

按照一个简单的教程： http: [//knockoutmvc.com/BetterList](http://knockoutmvc.com/BetterList)

只是一个问题，这是 Razor 语法吗：

```
@using (var item = ko.Foreach(x => x.AllItems))
{
 <li>
  @item.Html.Span(x => x.FullName)                    
 </li>
} 
```

相当于这个 ASPX 语法：

```
<%using (var item = ko.Foreach(x => x.AllItems))
 { %>
  <li>
   <%= item.Html.Span(x => x.FullName) %>
  </li>
 <%} %> 
```

?

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:19:06.460

这两个代码块在功能上几乎是等效的。

您需要将输出从更改`<%=`为`<%:`（如果使用 .NET 4.0 及更高版本），因为这会将 HTML 编码添加到输出中。

# xpath - Altova Style Vision 中的负十进制值格式

> ID：12784546
> 
> 赞同：1
> 
> 时间：2012-10-08T15:15:35.917
> 
> 标签：xpath, altova

我在 Altova StyleVision 中的值格式存在问题。Altova 论坛似乎已经死了。也许有人遇到过类似的问题。

我在 StyleVision 生成的 XBRL 表中创建了一个自动计算。它包含“ sum( xbrli:xbrl/n1:Wages ) ” xpath 表达式。这个表达式给了我一个负值。我想对其进行格式化，使其被括号而不是前导减号包围。

我尝试在“值格式”中使用前缀和后缀，例如 (###,##0.##) 或 [###,##0.##] 。但我仍然得到减号而不是括号。有没有办法解决这个问题？这些前缀中的任何一个似乎都对我不起作用。 [http://manual.altova.com/Stylevision/stylevisionbasic/index.html?svpres_inputformatting.htm](http://manual.altova.com/Stylevision/stylevisionbasic/index.html?svpres_inputformatting.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:21:19.090

好的。看来问题已经解决了。创建了具有以下内容的 ch.xsl 文件：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:decimal-format name='ch' grouping-separator=" "  decimal-separator=","/>
</xsl:stylesheet> 
```

在**Design Overview** -> **Add new XSLT file**下的 Altova StyleVision 中。选择 ch.xsl。之后在自动计算 xpath 中使用了以下表达式： format-number(sum( xbrli:xbrl/n1:Wages ),'### ##0,##;(### ##0,##)','ch ')

也许有更好的方法可以做到这一点，但它对我有用。希望它会帮助某人

# c# - 将 WebImage 上传到 FTP

> ID：12784550
> 
> 赞同：1
> 
> 时间：2012-10-08T15:15:57.560
> 
> 标签：c#, asp.net-mvc, ftp, image-uploading, webimage

我正在使用 ASP.Net MVC 4 和 WebImage 助手。我需要通过 FTP 上传我的 WebImage 对象。我只是不知道如何让 WebImage 参数发送到我的 RequestStream.Write

这是一些代码...

```
 WebImage photo = WebImage.GetImageFromRequest();
        string fileName = System.IO.Path.GetFileName(photo.FileName);

        FtpWebRequest request = (FtpWebRequest)WebRequest.Create(FTPaddress +"/images/" + fileName);
        request.Method = WebRequestMethods.Ftp.UploadFile;
        request.Credentials = new NetworkCredential("****", "*****");
        request.UsePassive = true;

        request.ContentLength = ???????;                      

        byte[] buffer = ????????; //It's not photo.GetBytes;

        Stream requestStream = request.GetRequestStream();              
        requestStream.Write(buffer, 0, request.ContentLength);
        requestStream.Close();

        FtpWebResponse response = (FtpWebResponse)request.GetResponse();

        response.Close(); 
```

之后我可以使用 photo.Save() 到 FTP 路径吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:23:14.463

```
byte [] fileContents = photo.GetBytes();
request.ContentLength = fileContents.Length;                       

Stream requestStream = request.GetRequestStream();
requestStream.Write(fileContents, 0, fileContents.Length);
requestStream.Close(); 
```

你就是这么干的，我傻。

# magento - Magento 购物车

> ID：12784553
> 
> 赞同：4
> 
> 时间：2012-10-08T15:16:16.103
> 
> 标签：magento

我为我的 eshop 使用自己的模板，但在我的网站上我使用货币 € 而不是 $。我在哪里可以编辑它。[http://i50.tinypic.com/67rvhc.png](http://i50.tinypic.com/67rvhc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T15:19:34.593

转到系统>配置。

然后在 GENERAL>Currency setup 中，您可以更改货币。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T04:48:04.627

转到系统 > 配置。

然后在 GENERAL > Currency Setup

设置以下--->

基础货币：欧元

默认显示货币：欧元

允许货币：欧元

保存配置。

# push-notification - 我的应用没有收到 Foursquare 推送通知

> ID：12784556
> 
> 赞同：1
> 
> 时间：2012-10-08T15:16:21.210
> 
> 标签：push-notification, foursquare

我对 Foursquare API 推送通知有疑问。

我正在使用foursquare实时推送通知，但很难测试它。我可以将测试推送发送到我的 Web 应用程序，一切似乎都运行良好，状态正常，并且我在日志中看到收到的信息。但是来自真实账户的推送通知永远不会到来，日志中没有任何信息。

我使用“在此应用程序的用户管理的场所推送签到”类型的推送。我已经注册了自己的foursquare场地，类型为home（私人位置），但是当我登记到这个位置时，我没有收到任何推送。

但是，当我将推送类型切换为“此应用程序的用户推送签到”时，它工作正常。我很困惑——为什么我没有收到关于我的家庭位置的推送？不支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:06:43.563

用户不“管理”他们的家庭场所。托管场所专门指其所有者声称拥有所有权的企业。如果您想在家庭签到时接收推送通知，您应该将您的应用程序配置为接收来自所有签到的推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T15:51:57.077

您可以“管理”家庭场地。但是你必须“声称”它是你的，就像你在商业场所一样。

在您场地的详细信息页面上，右下角有一个链接“立即认领”。单击它并完成所有步骤。在最后一步，您要么支付 20 美元立即进行验证，要么选择foursquare 通过传统邮件（3-4 周）向您发送带有验证码的明信片/信件。如果您使用后者，请确保邮递员可以找到foursquare 将使用的场地地址。

在您成功申领场地后，foursquare 将向您发送推送通知。

我刚刚这样做，最近在这里看到了[我的派对问候机器的视频](http://youtu.be/ZtS7Yx_XI0c "派对-问候-机器视频")。还有一篇关于小实验的德国博客文章（带有一些代码）[。](http://bit.ly/11RMEbg "派对问候机器博文")

# c# - 为 lucene.net 预分配驱动器空间？

> ID：12784558
> 
> 赞同：1
> 
> 时间：2012-10-08T15:16:24.207
> 
> 标签：c#, lucene, lucene.net

向 Lucene.Net 数据库添加许多记录时，数据文件的大小会缓慢增加。这会在具有许多 Lucene 数据库并经常更改它们的系统上造成大量磁盘碎片，这是不希望的副作用。

我的问题是：有没有办法为 Lucene.Net DB 预先分配硬盘空间以减少碎片？

如果重要的话，我正在用 C# 编写代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:54:28.750

您可以构建一个自定义目录实现，将数据存储在一个更大的预分配文件中。

已经有一个名为[big-dir](http://code.google.com/p/big-dir/)的项目为 Lucene（Java 版本）执行此操作，您可以将其移植到 C#。根据他们的页面，它处于早期 alpha 阶段，但他们在文件容器中创建虚拟文件系统的想法对您来说似乎是一个可行的解决方案。

# matlab - Matlab cat() 函数：索引超出矩阵维度

> ID：12784564
> 
> 赞同：2
> 
> 时间：2012-10-08T15:16:46.633
> 
> 标签：matlab, indexing, concatenation

我正在尝试从 1->(a-1) + (a+1)->n 连接一个数字数组。

我正在使用 cat 功能

```
cat(2, 1:a-1, a+1:n) 
```

但我得到了错误

```
Index exceeds matrix dimensions. 
```

除非我完全弄错了，否则我只是想连接两个数字矩阵，所以我不太确定为什么会出现这个错误。

我正在努力做到这一点：

```
>> a = 3;
>> n = 10;
>> cat(2, 1:a-1, a+1:n)
ans = 
    [1,2,4,5,6,7,8,9,10] 
```

这是错误的方法吗？知道为什么会出现这个错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:18:55.747

`cat`您的工作区中是否有一个变量？

```
>> cat(2, 2:3, 4:6)                   # this works fine
ans =
     2     3     4     5     6
>> cat = 1:3;                         # introduce the variable 'cat'
>> cat(2, 2:3, 4:6)                   # now it breaks
??? Index exceeds matrix dimensions. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:52:16.413

为了完整起见，您尝试完成的连接也可以像这样实现：

```
R = 1:n;
R = R(R ~= a) 
```

我个人认为这看起来比

```
R = [1:a-1 a+1:n] 
```

但那是个人的；`1:a-1>5`我总是对诸如（是它`((1:a)-1)>5`还是`(1:(a-1))>5`或`(1:a)-(1>5)`或...）之类的东西感到有些困惑。我总是需要思考一秒钟，而我会立即理解我的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T15:29:34.557

看起来您`cat`在工作区中有一个名为的变量。当然，干净的方法是重命名变量：如果您有足够新的 Matlab 版本（我认为是 R2012x），您可以`cat`在分配的第一行中替换它（选择变量以查看灰色刻度到窗口右侧，指示变量在函数中出现的位置），并用于`shift+enter`替换所有出现的位置。或者您可以使用 Find/Replace all 功能（但请确保您只替换单词，而不是子字符串）。

如果您无法替换现有变量名称，您可以使用方括号沿第一和/或第二维度进行连接：

```
cat(2,a,b) 
```

相当于

```
[a,b] 
```

# android - VideoView 停止播放视频

> ID：12784569
> 
> 赞同：3
> 
> 时间：2012-10-08T15:17:05.353
> 
> 标签：android, android-videoview

我为 Android 4.0.3 (Samsung Galaxy Tab 10.1") 创建了一个应用程序，该应用程序一直以全屏模式播放 mp4 视频文件。当视频停止（结束）时，应用程序从头开始重新启动。

现在的问题是 15 分钟后我收到一个错误，例如 **“无法播放此视频”**

因此，我为我的 HTC Desire Z 编译了适用于 Android 2.0.3 的相同应用程序，并且运行良好，没有任何问题。

所以请帮我找出问题出在哪里？

# javascript - 修复了取决于浏览器标题的 CSS 菜单

> ID：12784573
> 
> 赞同：-6
> 
> 时间：2012-10-08T15:17:14.433
> 
> 标签：javascript, html, css, css-position

[我需要帮助找到像这样](http://tringme.com/howitworks.html)的jQuery js 固定左侧菜单。

固定位置滚动应取决于浏览器标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:23:25.020

[**在链接**](https://stackoverflow.com/questions/12749982/vertical-navigation-bar-must-move-a-bit-from-top-then-stay-fixed/12750490#12750490)中查看答案[](https://stackoverflow.com/questions/12749982/vertical-navigation-bar-must-move-a-bit-from-top-then-stay-fixed/12750490#12750490)

 **我在答案中准备了一个演示可能对您有帮助

你需要的主要是**jQuery**

```
$(function(){    // this is the shorthand for document.ready
  $(document).scroll(function(){    // this is the scroll event for the document

    scrolltop = $(document).scrollTop(); // by this we get the value of the scrolltop ie how much scroll has been don by user
    if(parseInt(scrolltop) >= 80)    // check if the scroll value is equal to the top of navigation
      { 
        $("#navbar").css({"position":"fixed","top":"0"});   // is yes then make the position fixed to top 0
      }
    else
    {
      $("#navbar").css({"position":"absolute","top":"80px"}); // if no then make the position to absolute and set it to 80
    }
  })

}); 
```**

# javascript - 缩放图像的一部分

> ID：12784586
> 
> 赞同：0
> 
> 时间：2012-10-08T15:18:10.283
> 
> 标签：javascript, jquery

我正在创建一个 Web 应用程序，我需要在其中显示一个网格叠加在其上的图像。因此，当用户单击该网格的任何一个图块时，该图块会被放大。我有叠加网格的图像，但找不到缩放部分图像的方法。我正在使用 jquery 和 javascript

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:20:29.177

使用像[http://www.jacklmoore.com/zoom这样的插件](http://www.jacklmoore.com/zoom)

# c# - 如何在backbone.js中实现页面刷新（从服务器获取数据并丢失所有更改）功能？

> ID：12784588
> 
> 赞同：0
> 
> 时间：2012-10-08T15:18:17.003
> 
> 标签：c#, javascript, backbone.js

我正在使用两个视图，一个原始视图显示整个项目列表（目前它显示 3 个人的详细信息），另一个视图是模式对话框，用于将新项目添加到集合中。当我在模式对话框中单击添加时，新时间将填充在原始视图中。但是我在页面中有一个“CancelChanges”按钮，当我单击原始视图时，必须只显示从严重获取的项目并丢失以后所做的所有更改。有没有办法我可以做到这一点。当我尝试调用我的原始视图时，该页面总共显示了 7 个人的详细信息。从服务器获取的原始 3 个项目 + 从模式对话框中新添加的项目，并将 3 个原始项目附加到该列表中。谁能让我知道如何从 el 中清除初始列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:48:30.560

我想到的最简单的方法是保存初始模型数据，然后在单击“取消更改”按钮并重新渲染视图时恢复它们，如下所示：

```
Backbone.View.extend({

initialize: function(){
    _.bindAll(this,'restore_collection');
    this.collection.bind('reset',this.render);
    this.originalModels = this.collection.models;    
},

events: {   
    "click #cancel" : "restore_collection"   
},

restore_collection: function(){   
    this.collection.reset(this.originalModels);    
} 
```

# facebook - 检查我的网站是我的 Facebook 页面的用户粉丝

> ID：12784602
> 
> 赞同：0
> 
> 时间：2012-10-08T15:19:05.103
> 
> 标签：facebook, facebook-graph-api

我想制作一些 facebook 灯箱，例如，如果一些用户来到我的网站，并且如果不是我的 FB 页面的粉丝，我想向他们展示带有 FB 按钮的灯箱，如果已经是粉丝，则什么也不会发生。我该怎么做？

# java - 如何使用 Java 管理 AD ACL

> ID：12784606
> 
> 赞同：1
> 
> 时间：2012-10-08T15:19:09.537
> 
> 标签：java, active-directory, acl

我目前正在使用需要连接到 Active Directory (AD) 并修改“用户无法更改密码”权限的 Java 应用程序。

Microsoft 已经很友好地提供了如何使用 C++ 或 VB 执行此操作的步骤：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa746398(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746398(v=vs.85).aspx)

问题实际上是我需要使用 Java 来做到这一点。这可能吗？

主要问题是通过查询/解析 ntSecurityDescriptor 属性来处理 ACL。

我目前正在使用 Unboundid Ldap SDK 建立连接并搜索 AD 属性，但如有必要，我可以更改 API。

任何帮助，将不胜感激。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T11:31:40.397

**授予授权**在任何 LDAP RFC 中都没有描述。这部分是专有的。

在 OpenLDAP中*访问控制列表*(ACL) 是由一种过滤器建立的。

在 SUN 目录（现在的 Oracle 之一）中，ACL 是由属性建立的。

在 Active Directory 中，授权是使用 internal 以与 NFTS 文件系统相同的专有方式完成的。

您可以做的事情是执行一个外部程序，如[DSACLS.EXE](http://technet.microsoft.com/en-us/library/bb490872.aspx)请参阅[Dsacls 示例](http://technet.microsoft.com/en-us/library/cc739515%28v=ws.10%29.aspx)

另一个解决方案应该是将 COM ADSI 对象映射到 Java [，这](http://j-integra.intrinsyc.com/support/com/doc/#other_examples/Creating_an_NT_User_via_ADSI_from_Java.htm)可能对您有帮助（或没有帮助）。

# android - “aapt dump badging”希望 minSdkVersion 是一个字符串，但“adb install”需要它作为一个整数

> ID：12784610
> 
> 赞同：2
> 
> 时间：2012-10-08T15:19:24.527
> 
> 标签：android, aapt, android-sdk-tools

我需要在 Google Play 商店中使用不同的 minSDKVersion（用于设备过滤目的），而不是用于私人 beta 测试。我尝试了以下方法：

AndroidManifest.xml 包含以下内容：

```
<manifest …&gt;
[…]
    <uses-sdk android:minSdkVersion="@integer/minSdkVersion" android:targetSdkVersion="15"/>
[…]
</manifest> 
```

res/values/config.xml 由 maven 生成，包含以下内容：

```
<resources>
  <integer name="minSdkVersion">8</integer>
</resources> 
```

**除了抱怨的aapt dump badging**之外，这很好用：

```
ERROR getting 'android:minSdkVersion' attribute: attribute is not a string value 
```

不幸的是，aapt dump 不会转储其余部分。所以除了这个错误，我没有任何输出:-(

当我将 minSdkVersion 引用更改为这样的字符串引用时：

AndroidManifest.xml 包含以下内容：

```
<manifest …&gt;
[…]
  <uses-sdk android:minSdkVersion="@string/minSdkVersion" android:targetSdkVersion="15"/>
[…]
</manifest> 
```

res/values/config.xml 由 maven 生成，包含以下内容： 8

有了这个我无法安装应用程序，因为不知何故我的 API 级别 16（果冻豆）的设备不允许 APKs

```
sdkVersion:'8' 
```

（根据**aapt dump badging**）进行安装。错误是：INSTALL_FAILED_OLDER_SDK

在创建 APK 时，字符串引用似乎被误解了。

我该怎么做才能从资源文件中引用 android:minSdkVersion 并使用 aapt 对其进行调试？

aapt 版本是 Android Tools Rev. 20 的 0.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:20:59.980

引用 Xav 在他对 adt-dev Google Group 上提出[的这个问题的欺骗的回答中：](https://groups.google.com/group/adt-dev/browse_thread/thread/7852779a41879cdd)

> 您不能在清单的 minsdkVersion 中引用资源。

虽然清单中的很多东西都可以引用资源，但显然`minSdkVersion`不能。

Xav 建议使用脚本来更改清单。另一种方法是将您的应用程序的大部分打包为一个 Android 库项目并创建两个使用该库的应用程序，一个具有您的两个`minSdkVersion`值中的每一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T22:45:16.863

由于我已经在使用 Maven 来构建项目，因此我以这种方式解决了问题：

我将 AndroidManifest.xml 移动到名为：${project.basedir}/filtered 的文件夹中，并用属性引用替换了 AndroidManifest.xml 中的 minSdkVersion 值（我已经在 pom.xml 中有这个）：${project.property .minSdkVersion}：

```
<uses-sdk android:minSdkVersion="${project.property.minSdkVersion}" android:targetSdkVersion="15"/> 
```

并将其从过滤后的/config.xml 中删除。然后我在 pom.xml 中添加了以下资源过滤指令：

```
<project ...>
  ...
  <properties>
    <project.property.minSdkVersion>8</project.property.minSdkVersion>
  </properties>
 ...
 <build>
  <resources>
    <resource>
     <filtering>true</filtering>
     <directory>${project.basedir}/filtered</directory>
     <targetPath>${project.basedir}/</targetPath>
     <includes>
        <include>AndroidManifest.xml</include>
     </includes>
   </resource>
  </resources>
  ...
 </build>
 ...
</project> 
```

这样，过滤后的 AndroidManifest.xml 位于 Eclipse 期望的位置，并在调用**mvn process-resources**后替换了属性引用。在其他配置文件中，我对 ${project.property.minSdkVersion} 有不同的值

# php - 来自php的jQuery追加结果未显示

> ID：12784611
> 
> 赞同：1
> 
> 时间：2012-10-08T15:19:27.943
> 
> 标签：php, jquery, append

嗨，我认为我在 jQuery 中做错了什么。我正在开发一个在线预订系统，在选择治疗和日期后，我想动态显示可用时间段列表。我有一个 php 文件，它创建一个数组并在 SELECT OPTION 列表中回显结果。我已经用另一个文件进行了测试，并且 jQuery post 函数可以正常工作，所以问题肯定是要显示结果。以下是我的第一页jQuery。在更改日期时，SELECT 列表消失。

```
$(document).ready(function() {
$("#dates").load('input_date.php');
    $("#datepicker").datepicker({
        dateFormat: "dd-mm-yy",
        onClose: function() { 

            var $form = $( "#input" ),
            treat = $form.find( 'input[name="treatment"]' ).val(),
            book = $form.find( 'input[name="bookdate"]' ).val(),
            url = "input_date.php";

            $.post( url, { treatment: treat, bookdate: book  },
                function(data) {
                    var content = $( data ).find( '#timeslots' );
                    $( "#dates" ).empty().append( content );    
                }

        );
    }});
}); 
```

这是我的 php 文件：

```
<?php
include('connection.php');
error_reporting(0);
$treatment = $_POST['treatment'];
    $bookdate = $_POST['bookdate'];
if(isset($treatment) && isset($bookdate)){

$exp = explode("-", $bookdate);

//determine what day of the week it is
$timestamp = mktime(0,0,0,$exp[1],$exp[0],$exp[2]);
$dw = date( "w", $timestamp); // sun0,mon1,tue2,wed3,thur4,fri5,sat6
echo $dw."weekday"; //week day 
echo"<br/>";

//find bookings with same date
$q = mysql_query("SELECT BOOK_SLOT_ID FROM BOOKINGS WHERE BOOK_DATE='$bookdate'");
//make array of booking slots
$array1 = array();
while ($s = mysql_fetch_array($q)) {
$array1[] = $s['BOOK_SLOT_ID'];
}
$q2 = mysql_query("SELECT SL_ID FROM SLOTS");
//make array of all slots
$array2 = array();
while ($s2 = mysql_fetch_array($q2)) {
$array2[] =  $s2['SL_ID'];
}

//remove bookings from all slots
$arr_res = array_diff($array2, $array1);

//make selectable options of results
echo "<SELECT id="timeslots">";
foreach($arr_res as $op){
$r = mysql_query("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'");
$q3 = mysql_fetch_array($r);
echo "<OPTION value=".$op.">".$q3['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
}else{
$else = mysql_query("SELECT * FROM SLOTS");
echo '<SELECT>';
while($array_else = mysql_fetch_array($else)){
echo "<OPTION value=".$array_else['SL_ID'].">".$array_else['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
print $bookdate;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:12:12.197

```
var content = $( data ).find( '#timeslots' );
                    $( "#dates" ).empty().append( content );    
                } 
```

这是错误

```
$( data ).find( '#timeslots' ); 
```

返回一个`object`

您可以使用

```
$( data ).find( '#timeslots' ).text();// or html() 
```

# java - 多次显示相同的表格

> ID：12784618
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:00.053
> 
> 标签：java, swing

我试图在这个例子中多次显示表格 10 次，有人可以帮我做吗？

在下面的示例中，我只显示按钮以使其保持简单，以及按钮我将添加其他组件，如文本框等......，在下面的示例中，我得到错误时间应该是最终的。如果我最终确定，我将无法写出时间 = 时间 - 1。

```
private void showForm(int times){

    if(times >= 1){
      JButton btn = new JButton("ADD");  
      container.add(btn);
      times = times - 1;

      btn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                showForm(times);
            }
        });          
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:25:11.577

就这样写吧：

```
private void showForm(final int times){

    if(times >= 1){
      JButton btn = new JButton("ADD");  
      container.add(btn);

      btn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                showForm(times - 1);
            }
        });          
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T15:40:51.130

如果通过按下按钮，您希望出现新按钮，每次减 1（这是我的理解），要真正使其工作，您还需要添加`revalidate()`和循环

```
private void showForm(final int times) {
    if (times >= 1) {
        for (int i=0; i<times; i++) {
            JButton btn = new JButton("ADD");  
            container.add(btn);
            container.revalidate();
            btn.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    showForm(times-1);
                }
            });
        }
    }
} 
```

否则忘记循环但保留`revalidate`（否则您将看不到任何可见的更改）

# iphone - iPhone - 键盘角按钮

> ID：12784619
> 
> 赞同：4
> 
> 时间：2012-10-08T15:20:02.670
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我想在 iPhone 键盘左下角制作一个额外的按钮，如下图所示。是否有可能做到这一点 ？

![在此处输入图像描述](../Images/84f06af1a449e197d2c0802848dfa476.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:30:46.060

不它不是。键盘归系统所有。您可以更改键盘的类型（普通、数字、推特等），但不能自定义它。这是一个值得+1的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:41:07.760

自定义这些按钮的唯一方法是重建键盘本身。

[http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial](http://www.raywenderlich.com/1063/ipad-for-iphone-developers-101-custom-input-view-tutorial)

Ray 总是有一些关于 iphone dev 的好教程。能够自定义您的 inputView 只是成功的一半。然后，您将需要构建自定义视图。您可能想要模拟现有的键盘，显然使用您的自定义按钮。

作为旁注。要关闭键盘，您需要通过第一响应者 resignFirstResponder。

当你走到那一步时，这是我用来做这件事的代码

```
@implementation UIView (FindAndResignFirstResponder)
- (BOOL)findAndResignFirstResponder
{
    UIView *responder = [self findFirstResponder];
    if (responder) {
        [responder resignFirstResponder];
        return YES;     
    }
    return NO;
}
- (UIView*)findFirstResponder
{
    if (self.isFirstResponder) {
        return self;     
    }
    for (UIView *subView in self.subviews) {
        UIView *responder = [subView findFirstResponder];
        if (responder != nil)
            return responder;
    }
    return nil;
}
@end 
```

如果您拥有所有输入的超级视图，则调用该视图，您可以在该视图上调用 findAndResignFirstResponder 。

或者如您所见，findAndResignFirstResponder 在“找到”的 firstResponder 上调用 resignFirstResponder。因此，如果您有第一响应者，您可以辞职

# c# - C# 将文件上传到 Ruby on Rails 应用程序

> ID：12784622
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:02.917
> 
> 标签：c#, ruby-on-rails

我认为这是可能的，这只是实现细节的问题。如何让 C# 程序将文件上传到已经设置为接受上传的 Ruby on Rails 控制器？我需要在 C# 中设置哪些标头以及如何通过 Rails 实施的 XSS 保护机制？

这将是一个公共程序，所以我显然会在 Rails 端进行一些文件验证和检查，但它仍然应该有点安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:24:51.060

你需要使用一些消耗restful api的东西，比如

[restsharp](http://restsharp.org/) 或 [restagent](http://restagent.codeplex.com/) 因为 rails 是一个宁静的框架

# python - 不止一次用正则表达式替换两个字符串之间的字符串，python

> ID：12784624
> 
> 赞同：2
> 
> 时间：2012-10-08T15:20:06.210
> 
> 标签：python, regex, replace

我正在尝试使用正则表达式来查找和替换文件中两个字符串之间的文本字符串。我遇到的问题是我希望它在找到“结束”字符串后“中断”，而是替换第一个“开始”字符串和最后一个“结束”字符串之间的所有文本。

```
_copyright = 'BEGIN COPYRIGHT \n The replacing string \n END COPYRIGHT'

_file = re.sub(r'BEGIN COPYRIGHT[\w\s]*END COPYRIGHT',_copyright, _file) 
```

> 开始版权
> 
> 食品
> 
> 结束版权
> 
> 开始版权
> 
> 酒吧
> 
> 结束版权

所以 foo 和 bar 都应该变成“替换字符串”，但是文件变成了

> 开始版权
> 
> 替换字符串
> 
> 结束版权

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:21:39.080

至少，您需要使星量词变得惰性：

```
_file = re.sub(r'BEGIN COPYRIGHT[\w\s]*?END COPYRIGHT',_copyright, _file) 
```

否则，`[\w\s]*`将贪婪地匹配尽可能多的字符，包括任何中间`END COPYRIGHT/BEGIN COPYRIGHT`序列。

另一种稍微更明确的方法是这样做：

```
_file = re.sub(r'''(?x)BEGIN COPYRIGHT
                   (?:(?!(?:END|BEGIN) COPYRIGHT)[\w\s])*
                   END COPYRIGHT''',_copyright, _file) 
```

`[\w\s]`后一个版本仅在它不在子字符串的开头时匹配，`END COPYRIGHT`或者`BEGIN COPYRIGHT`因此即使有人忘记将`END COPYRIGHT`部分放在那里也不会超出其范围。

# linux - Rails 站点的多个虚拟主机

> ID：12784626
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:08.037
> 
> 标签：linux, ruby-on-rails-3, passenger

我想在我的 Linux VPS 上的子目录下运行一个 rails 应用程序，并且在搜索了乘客文档后，我不确定如何为我的机器设置正确的虚拟主机配置和符号链接。

我有一个名为 www.domain.eu 的域和一个位于 /apps/webapp 的 rails 应用程序，我希望该站点托管在 www.domain.eu/webapp

我不确定几个方面：

1.) 我应该在哪里输入 webapp VirtualHost 配置详细信息？它应该在`apache2.conf`文件中还是应该在`sites-available`调用中创建一个文件`webapp`并将配置放在那里？似乎有很多相互矛盾的例子。

2.）从上一个问题中学习，我如何修改此`apache2.conf`文件以提供目录下的 rails 应用程序`www.domain.eu/webapp`（再次阅读大量文档，但似乎有很多方法可以做到这一点）

```
<VirtualHost *:80>
      ServerName domain.eu
      # !!! Be sure to point DocumentRoot to 'public'!
      DocumentRoot /apps/webapp/public
      <Directory /apps/webapp/public>
         # This relaxes Apache security settings.
         AllowOverride all
         # MultiViews must be turned off.
         Options -MultiViews
      </Directory>

      RailsBaseURI /webapp
      <Directory /apps/webapp/public>
        Options -MultiViews
      </Directory>
   </VirtualHost> 
```

3.) 我意识到需要创建一个符号链接来将目录根指向 url。尝试过`ln -s /apps/webapp/public ./test`它会返回一个`missing symlink error`. 这里推荐什么？

4.) 最后，rails 3`config.action_controller.relative_url_root = "/webapp"`似乎已被弃用，是否有新的推荐使用约定？

我的设置：运行 Ubuntu 10.04、mysql 5、apache2、phusion Passenger（最新）、ruby 1.9.3 和 rails 3.2.3 的 Linux VPS 服务器。

如果有人需要更多代码，请大声喊叫，提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T09:33:32.100

因此，经过大量阅读，我设法使这项工作正常进行。

出于我的目的，我将子 URI 站点的 VirtualHost 信息添加到我的 apache2.conf 文件的底部，它可能是 httpd.conf，但如果你愿意，你可以将它们输入 /etc/apache2/sites-available把它分开。

在这个文件的顶部，我指定了服务器的默认“主页”在哪里。我正在运行 apache2，所以我的主页位于 /var/www。下面我们设置我们的 rails 子 URI 选项，所以首先指定你想要的 URL 作为你的子 URI，然后将目录标签指向你的 rails 应用程序的公共文件夹。MultiViews 必须关闭因此 (-) 所以我们的 apache2.conf 文件是完整的。

```
<VirtualHost *:80>
        ServerName domain.com
        DocumentRoot /var/www
        <Directory /var/www>
        Allow from all
        </Directory>

        RailsBaseURI /webapp
        <Directory /apps/webapp/public>
        Options -MultiViews
        </Directory>
</VirtualHost> 
```

现在我们要做的就是在启用站点的文件夹中创建一个符号链接，将 /var/www/webapp 指向我们的 /apps/webapp/public 文件夹，如下所示。

```
ln -s /apps/webapp/public /var/www/webapp 
```

现在我们正在创建一个符号链接，我们不必在 Rails 路由或环境文件中插入任何额外的代码。您可以使用 RackENV 生产指定您想使用的环境（显然所有 rails 3 + 应用程序都是机架？如果不是这种情况请评论）

# java - StringTokenizer 和数组 Java

> ID：12784627
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:08.883
> 
> 标签：java, arrays, stringtokenizer

我完成了整个程序，并且运行良好。但是，我在使用 StringTokenizer 时遇到了问题。我有一个名为 Worker.java 的类和一个名为 TestWorker.java 的测试类...

在测试课中，我计算并打印了总工时、总工资等。但我被困在 1 个位置，即我必须将名称、id 和小时费率存储在数组中，然后使用 StringTokenizer，我必须提示用户输入工人 ID 和小时费率。

当用户输入用户工人姓名和ID时，程序输出将向用户显示工人的小时费率......

或者换句话说……

允许用户重复输入 worker-ID 和 Hours，直到用户输入并为空字符串。读取值并在适当的对象上调用方法 addWeekly()（通过在数组中搜索以找到具有指定 ID 的对象）。如果输入了不存在的 ID，则显示相应的错误消息。

请在下面查看我的编码并根据您的需要进行修改....

```
//Worker.java

public class Worker {
    public final double bonus=100;
    protected String name;
    protected String workerID;
    protected double hourlyRate;
    protected double hoursWorked;
    protected double weekHour;
    protected double tax;
    protected double grossSalary;
    protected double netSalary;

    public Worker() {
    }

    public Worker(String name,String workerID,double hourlyRate){
        this.name = name;
        this.workerID = workerID;
        this.hourlyRate = hourlyRate;
    }

    public void addWeekly(double weekHour){

        hoursWorked = hoursWorked + weekHour;

    }

    public double gross()
    {
        grossSalary = (hoursWorked*hourlyRate);
        if(hoursWorked>=150)
        {
            grossSalary = grossSalary +100;
        }
        return  grossSalary;
    }

    public double taxAndNet()
    {
        tax = (grossSalary - 500) * 0.3;
        netSalary = (grossSalary-tax);
        return netSalary;
    }

    public String getName()
    {
        return name;
    }

    public String getWorkerID()
    {
        return workerID;
    }

    public double getHourly()
    {
        return hourlyRate;
    }

    public double getTotalHours()
    {
        return hoursWorked;
    }

    public double getGrossSalary()
    {
        return grossSalary;
    }

    public void addToGross(double amt)
    {
        grossSalary = grossSalary + amt;
    }

    public void displaySalary()
    {

        System.out.println("Name :" + name + "\nID :" + workerID +"\nHourly rate : "+ hourlyRate +"\nTotal Hours Worked " + hoursWorked +"\nGross Pay: "+getGrossSalary()+ "\nTax : "+tax +"\nNetpay :" +netSalary);
    }

}

//TestWorker.java

import java.util.StringTokenizer;
import java.util.Scanner;

public class TestWorker {

    public static void main(String args[]) {

        Worker e = new Worker("John Major","s123",15.0);
        e.addWeekly(45);
        e.addWeekly(40);
        e.addWeekly(32);
        e.addWeekly(38);
        e.gross();
        e.taxAndNet();
        e.displaySalary();

        Worker[] worklist = new Worker[5];

        worklist[0] = new Worker("Richard Cooper","s1235",20.0);
        worklist[1] = new Worker("John Major","s1236",18.0);
        worklist[2] = new Worker("Mary Thatcher","s1237",15.0);
        worklist[3] = new Worker("David Benjamin","s1238",16.0);
        worklist[4] = new Worker("Jack Soo","s1239",25.0);

        Scanner input = new Scanner(System.in);
        String name;

        do{
            System.out.print("Please enter your name and worker ID: ");
            name = input.nextLine();

            StringTokenizer string = new StringTokenizer(name,"+");
            System.out.println("******|||||*******");
            while(string.hasMoreElements()){
                System.out.println(string.nextElement());
            }
        }
        while(name.isEmpty()==false);

         String s = "Five+Three=Nine-One";
        String arr[];

          //declare it with 3 tokens as seen above:
      StringTokenizer st = new StringTokenizer(s, "+=-");

      //the array size is the number of tokens in the String:
      arr = new String[st.countTokens()];

          //when there are still more tokens, place it in the array:
      int i = 0;
          while(st.hasMoreTokens()){
        arr[i] = st.nextToken();
                i++;
          }

      //determine the word with the largest length:
          int indexMax = 0;
          for( i = 1; i < arr.length; i++){
             if(arr[i].length() > arr[indexMax].length())
            indexMax = i;
          }

      System.out.println("The largest element is in index: "
                + indexMax);

  } //main
} //class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:45:13.470

请告诉我们您的 java 版本。从 jdk 1.4.2 开始，您应该使用 String.split(...) 而不是旧的 Stringtokenizer。查看本教程[提示：关于 String.split(); 的小教程](http://forums.codeguru.com/showthread.php?292394-TIP-A-little-tutorial-about-String.split%28%29)

# scheduled-tasks - 调度程序表达式

> ID：12784629
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:17.317
> 
> 标签：scheduled-tasks, quartz-scheduler

在一个简单的表达式案例中，如何编写一个 Quartz 调度程序表达式来创建一个在 15:30 到 15:55 之间每 5 分钟触发一次的触发器？那可能吗？或者我应该创建多个触发器，并注册它们以运行相同的作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:49:33.517

我相信这是实现这一目标的最简单（但不一定是最优雅）的方法：

```
0 30,35,40,45,50,55 15 * * ? 
```

# codeigniter - 登山扣：缓存路径不存在。请在 config/carabiner.php 中设置缓存路径

> ID：12784633
> 
> 赞同：2
> 
> 时间：2012-10-08T15:20:32.670
> 
> 标签：codeigniter

我正在使用代码点火器。当我尝试从本地浏览器运行我的应用程序时，就会抛出这个错误。

```
Carabiner: cache path does not exist. Please set the cache path in config/carabiner.php. 
```

我不知道它是什么。尝试了一些在线类似的解决方案，例如：

```
http://www.webdevelopersdiary.com/1/archives/06-2012/1.html 
```

但由于某种原因，似乎没有任何效果。请帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:38:45.780

创建 中指定的缓存目录`config/carabiner.php`，第 50 行。

默认设置：`$config['cache_dir'] = 'assets/cache/';`

请记住，`cache_dir`路径是相对于文档根目录的（又名`FCPATH`来自 CI；`index.php`位于哪里）。在初始化时，`FCPATH`和`cache_dir`被连接起来，产生`cache_path`.

图书馆摘录：
`$this->cache_path = $this->fcpath.$this->cache_dir;`

**更新**
您需要创建`assets/cache`具有写入权限的目录，该目录位于您的应用程序根目录中：`mkdir -p assets/cache && chmod -R 777 assets/cache`

最后，它看起来像这样：

`$ tree
.
|____application
|____assets
| |____cache
|____index.php
|____system
|____user_guide`

# c++ - 使用跨平台框架为一个平台开发有什么缺点？

> ID：12784634
> 
> 赞同：1
> 
> 时间：2012-10-08T15:20:32.647
> 
> 标签：c++, windows, cross-platform

最近我一直在考虑是否应该开始研究另一个框架，因为我只有一台windows机器，而且我不打算很快制作跨平台软件。所以帮助我做出这个决定...

1.  当我不打算开发跨平台时，使用跨平台框架有什么缺点吗？直观地说，专门为某个平台设计的框架在该平台上的性能会比跨平台框架更好。但我只是假设。

2.  请列举我可以开始研究的框架和库，以便在 Windows 上使用 C++ 进行快速应用程序开发。有大量文档的优先。如果您包含可以帮助我入门的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:25:21.107

> 当我不打算开发跨平台时，使用跨平台框架有什么缺点吗？

这取决于框架。大多数框架将自己限制在所有平台上都可用的功能上，这可能会在一定程度上限制您。您也可能无法利用给定平台的最佳功能或该平台上的最佳开发环境。

> 请列举我可以开始研究的框架和库，以便在 Windows 上使用 C++ 进行快速应用程序开发。

这里一个不错的选择是[Qt](http://qt-project.org/)。它为 Windows 和其他平台提供了一个非常好的基于 C++ 的框架。如果您只需要 Windows，还有其他选项，包括[通过 C++ 的 Windows 运行时](http://msdn.microsoft.com/en-us/library/windows/apps/hh441569.aspx)（用于 Windows 8 开发）或[Microsoft Foundation Classes](http://msdn.microsoft.com/en-us/library/d06h2x6e%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:38:13.850

通过使用跨平台框架，您将错过特定于平台的装饰，例如对[Windows 7 跳转列表](http://windows.microsoft.com/is-IS/windows7/products/features/jump-lists)的编程控制。由于这些原因，它不会像原生应用程序，而是为另一个操作系统编写的应用程序的端口。在许多情况下，这无关紧要。

使用模板构建的现代 C++ 框架不会因为它是跨平台的而性能更差。您只会错过多个平台上不存在的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:26:24.610

通常，跨平台框架的问题是特定于框架的。

例如 wxWidgets - 它们速度很快，但没有太多可用的 GUI 类。文档不是很好，但更新得当。

GNome - 它被广泛使用，但需要大量的运行时部署，在内存使用方面更加繁重。

这两个都是 UI 框架。两者都是 GPL，因此您可以使用它。

Nokia Qt - 它是一个优秀的跨平台框架，它不仅仅是另一个 UI，而是一个用于跨平台开发的完整框架。然而，Qt 的问题在于元对象编译器（mod）。它是一种语言扩展。

我建议您选择 QT 作为您的下一个框架。它正在积极开发，轻量级，最近开源，可在 LGPL lic 下使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T15:41:31.953

就其他答案而言，Qt 是一个很棒的框架（并且有望在诺基亚中幸存下来）。

跨平台框架主要有两个缺点：性能（通常它们添加另一个在本机平台中不需要的层）当然是跨平台的，即通常不支持特定于目标平台的功能。使用 Qt，我从未将性能视为问题。Qt 还引入了许多库，这些库实际上扩展了您可以在 Windows 中本地执行的操作，因此第二点在这里并不是真正的缺点。

Qt 的唯一问题实际上是元对象编译器 (moc)。一开始，您会偶然发现一些奇怪的编译器错误，这些错误最终来自 moc。只要记住这一点，然后用谷歌搜索错误，你就会习惯这一点。

# git - 可视化和理解 git 中的快进

> ID：12784635
> 
> 赞同：0
> 
> 时间：2012-10-08T15:20:34.727
> 
> 标签：git, version-control

我刚刚从来源和`git status`报告中获取：

> 您的分支落后 origin/ 13 次提交，并且可以快进

严格来说，这*究竟*是什么意思？是否意味着：

1.  它`HEAD`位于相应的**远程跟踪分支**( `origin/<branch_name>`) 后面。

2.  还是`<branch_name>`在相应的**远程跟踪分支**( `origin/<branch_name>`) 后面？

如果我在一个**分离** `HEAD`的地方怎么办？（即如果我的`HEAD`和`<branch_name>`不指向同一个提交）。

有没有办法在图表上可视化这些指针(`HEAD`和`<branch_name>``origin/<branch_name>``git log --graph`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:41:03.900

让我们看一个例子。这个存储库有一个远程调用`origin`，其分支名为`master`. 我还有一个名为的分支`master`，我目前已经签出。

```
% git log --decorate --graph --pretty=oneline --abbrev-commit --all
* 072a57a (origin/master, origin/HEAD) C
* 87011c4 B
* d3c4a48 (HEAD, master) A 
```

当我运行`git status`它时，它告诉我我的分支`master`落后`origin/master`于两个提交。

```
% git status
# On branch master
# Your branch is behind 'origin/master' by 2 commits, and can be fast-forwarded.
#
nothing to commit (working directory clean) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:25:36.747

“你的分支”是指你所在的分支，所以`HEAD`1`<branch_name>`和 2 表示相同的意思。（`git status`仅报告您所在分支的状态，而不是所有本地分支。）

该消息意味着您的分支指向作为远程分支头的直接祖先的提交，因此它指向远程分支头的父提交网络上某处的提交。没有比这更复杂的了。

如果你在一个分离的头上收到消息，那么你应该记录一个错误 - 它不应该发生。

请注意，您的分支名称不必与遥控器上的分支名称相匹配 - 该消息将告诉您在跟踪的`<alt-branch-name>`情况下是落后`origin/<branch-name>`的。`<alt-branch-name>``origin/<branch-name>`

# git - libgit2如何将短参考名称解析为完整的参考名称或哈希

> ID：12784638
> 
> 赞同：2
> 
> 时间：2012-10-08T15:20:40.187
> 
> 标签：git, libgit2

在 libgit2 中，如何解析短引用名称以获得完整的引用名称或哈希？需要调用什么 libgit2 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:44:04.640

libgit2通过使用该函数来支持完整的**[扩展 SHA-1 语法。](http://git-scm.com/docs/gitrevisions)**`git_revparse_single()`为了检索哈希，只需将检索到的对象传递给`git_object_id()`函数。

利用`git_revparse_single()`将允许复制以下标准 git 命令行用法：

```
$ git show master
$ git show heads/master
$ git show e90810b
... 
```

**Libgit2 代码：**

```
git_repository* repo;
git_object *object;
int error;

... open existing repository ...

/* Short named references
 * Note: Might be considered ambiguous if tags/master
 * and heads/master both exist
 */
error = git_revparse_single(&obj, repo, "master"); 
git_object_free(obj);

/* Less ambiguous name */
error = git_revparse_single(&obj, repo, "heads/master");
git_object_free(obj);

/* Short hash as well */
error = git_revparse_single(&obj, repo, "e90810b"); 
git_object_free(obj);

/* Complex specs */
error = git_revparse_single(&obj, repo, "master@{0}~1^1"); 
git_object_free(obj);

/* Tree entries */
error = git_revparse_single(&obj, repo, "test/master@{1}:branch_file.txt"); 
git_object_free(obj); 
```

有关使用的更多信息或示例，您可以查看**[单元测试](https://github.com/libgit2/libgit2/blob/development/tests-clar/refs/revparse.c)**。

**注意：**目前没有内置的公开方法可以从短参考名称中检索规范参考名称。

## 更新

了不起的**[@CarlosMartinNieto](https://stackoverflow.com/users/1370215/carlos-martin-nieto)**做到了。

Libgit2 现在公开`git_reference_dwim`通过其短名称检索引用（例如`master`，，`heads/master`...）

*   **[标题](https://github.com/libgit2/libgit2/blob/development/include/git2/refs.h#L57-L68)**
*   **[Libgit 2 提交引入此更改](https://github.com/libgit2/libgit2/commit/98d633cccf0a214b83ebfe9c7cb8ca449a1f0637)**

# javascript - Javascript 函数定义中的句点（函数 window.onload(){}）

> ID：12784639
> 
> 赞同：8
> 
> 时间：2012-10-08T15:20:48.317
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 函数语法说明：function object.myFunction(){..}](https://stackoverflow.com/questions/8306445/javascript-function-syntax-explanation-function-object-myfunction)

我最近看到了一些（遗留）javascript代码，如下所示：

```
function window.onload(){
  // some code
} 
```

对我来说，这看起来不像是有效的 javascript，因为标识符中不能有句点，但它似乎在 IE8 中工作。我认为它相当于：

```
window.onload = function(){} 
```

我在 Chrome 和 IE9 中尝试了相同的代码，它们都引发了语法异常，所以我认为 IE8 的这个“特性”是一些应该被替换的非标准函数定义是否正确？有问题的代码只发送到 IE 浏览器，所以这可能是我以前没有遇到过这个问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:25:34.910

对于最近浏览器上的 Javascript，您通常可以参考[ECMAScript](http://en.wikipedia.org/wiki/ECMAScript)，显然，这在 ECMAScript 中是不允许的：

[ECMAScript 函数定义规范](http://bclary.com/2004/11/07/#a-13)：

> 产生 FunctionDeclaration : function Identifier ( FormalParameterListopt ){ FunctionBody } [...]
> 
> 使用名称 Identifier 创建当前变量对象的属性（如 10.1.3 中指定）

[所以在有效名称上](https://stackoverflow.com/questions/1661197/valid-characters-for-javascript-variable-names)（以防有人认为“window.onload”是函数的名称，因此应该是`window.window.onload`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:35:16.303

您可以使用以下语法定义*新函数：*

```
function myFunc(args)
{
  ...
} 
```

该`window.onload`函数由浏览器定义，可能是`null`. 句点表示该`onload`值是`window`对象的成员。以下语法将采用一个函数并将其分配给`onload`成员的值：

```
window.onload = function()
{
  ...
}; 
```

不要忘记结尾的分号，因为这是一个赋值语句。

# c - C基本scanf不起作用

> ID：12784640
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:20:57.537
> 
> 标签：c, int

```
int g1,g2,g3,g4;
scanf("%d %d %d %d", &g1, &g2, &g3, &g4);
g[0] = g1;
g[1] = g2;
g[2] = g3;
g[4] = g4; 
```

无论出于何种原因 g[4] 未注册。我不完全确定问题是什么，有人有什么意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:31:34.850

我认为您的意思是设置`g[3] = g4`而不是`g[4] = g4`. 如果您的数组大小为 4 ，那么最后一个元素将位于索引**3**处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:26:12.077

请确保声明了数组“g”并且它的大小为 5。这将分配可由数组索引 0、1、2、3 和 4 访问的内存。根据以下代码，g[3] 从未使用过但已分配内存。

假设您使用的是整数数组，下面是可以正常工作的语法：

```
 int g[5];
    int g1,g2,g3,g4l;
    scanf("%d %d %d %d", &g1, &g2, &g3, &g4);
    g[0] = g1;
    g[1] = g2;
    g[2] = g3;
    g[4] = g4; 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:51:31.130

```
#include<stdio.h>
main(){
int g1,g2,g3,g4,g[4];
        scanf("%d %d %d %d", &g1, &g2, &g3, &g4);
        g[0] = g1;
        g[1] = g2;
        g[2] = g3;
        g[3] = g4;
printf("%d\t%d\t%d\t%d",g[0],g[1],g[2],g[3]);
return 0;
        } 
```

# objective-c - 将变量名转换为字符串

> ID：12784641
> 
> 赞同：2
> 
> 时间：2012-10-08T15:21:03.067
> 
> 标签：objective-c

如何将**变量名**转换为**字符串**？

例子：

由此：

```
NSString *someVariable
int otherVariable 
```

我想得到一个带有变量实际名称的 NSString ，无论它是什么类型。
所以，对于上面的两个变量，我想得到它们的名字（**someVariable**，**otherVariable**）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T07:38:08.157

我设法用这个代码片段解决了我的问题：

导入 objc 运行时
`#import <objc/runtime.h>`

您可以使用以下方法枚举属性：

```
- (NSArray *)allProperties
{
    unsigned count;
    objc_property_t *properties = class_copyPropertyList([self class], &count);

    NSMutableArray *rv = [NSMutableArray array];

    unsigned i;
    for (i = 0; i < count; i++)
    {
        objc_property_t property = properties[i];
        NSString *name = [NSString stringWithUTF8String:property_getName(property)];
        [rv addObject:name];
    }

    free(properties);

    return rv;
} 
```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:36:15.263

只需在变量名周围添加“...”。IE

```
"someVariable"
"otherVariable" 
```

获取字符串（作为一个`const char*`。）如果你想要一个`NSString*`，使用

```
@"someVariable"
@"otherVariable" 
```

在宏中，您可以使用构造`#...`将引号...取消引用宏变量，例如

```
#define MyLog(var) NSLog(@"%s=%@", #var, var) 
```

以便

```
MyLog(foo); 
```

扩展为

```
NSLog(@"%s=%@", "foo", foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:30:09.507

这些是 C 声明，C 没有自省能力来给你想要的东西。

您可能会编写一个预处理器宏，它既可以声明一个变量，也可以用第一个变量的名称声明和初始化第二个变量。

但这引出了一个问题，即为什么你需要这种程度的内省。

# c - 运行时检查失败 #2 - 变量周围的堆栈已损坏

> ID：12784642
> 
> 赞同：7
> 
> 时间：2012-10-08T15:21:06.690
> 
> 标签：c

我已经在 stackoverflow 看到了一些问题，但没有一个问题能解决我的问题......

我在 C 中有那个代码：

* * *

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
    char str[] = "";
    scanf("%[^\n]", str);
    printf("Você digitou: %s\n", str);
    system("pause");
} 
```

* * *

当我运行程序时，我遇到了错误：

运行时检查失败 #2 - 变量“str”周围的堆栈已损坏。

现在，我真的不知道我在那里做错了什么...... :(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:26:30.120

给定它的初始化，该数组`str`只能保存一个。`char`调用`scanf()`将覆盖`str`导致未定义行为的边界，在这种情况下会破坏堆栈。您需要确定`str`数组的大小并限制读取的字符数以防止缓冲区溢出。

要使用`scanf()`您指定要读取的最大字符数：

```
char str[1024];
if (1 == scanf("%1023[^\n]", str)) /* Check return value to ensure */
{                                  /* 'str' populated.             */
}                                  /* Specify one less than 'str'  */
                                   /* size to leave space for null.*/ 
```

您也可以使用[`fgets()`](http://en.cppreference.com/w/c/io/fgets)，但之后需要删除换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:23:38.363

您不应该用用户输入覆盖常量。替换甚至了解更安全的 API `char str[] = ""`。`char * str = malloc(<enough bytes for any possible input)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:27:13.367

您只分配一个字节来存储输入。线

```
char str[] = ""; 
```

为字符串内容分配零字节，为其空终止符分配一个字节。相反，做类似的事情

```
char str[100]; 
```

或者无论最大输入长度是多少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-06T11:29:56.800

这个答案适用于从 Java/C# 或其他一些现代面向对象语言来到 C++ 的每个人。

对我来说，这个问题发生的原因如下：

我创建了自己的自定义 C++ 类。

**我的类.h**

```
class MyClass {

public:
    void work();

}; 
```

**我的类.cpp**

```
#include "MyClass.h"
#include <iostream>

class MyClass{
    int64 propA, propB;

    public:
        void work();

};

void MyClass::work() {
    // some work that uses propA and propB
} 
```

我的直觉是，`propA`并且`propB`将只是私有属性，从此类外部的代码中看不到。

问题原来是我没有把`propA`and放进`propB`去`MyClass.h`。`MyClass`当被调用者实例化时，编译器不知道它应该分配多少内存。

我只是将属性添加到标题中`MyClass.h`：

**MyClass.h（固定）**

```
class MyClass {
    int64 propA, propB;

public:
    void work();

}; 
```

# iphone - 剪切/复制/粘贴功能在我的 iOS 应用程序中停止工作

> ID：12784646
> 
> 赞同：4
> 
> 时间：2012-10-08T15:21:18.467
> 
> 标签：iphone, ios, uitextfield, copy-paste

更新：在我的应用程序中禁用剪切/复制/粘贴。

在为 iPhone 设备开发时，我对我的 iOS 应用程序感到困惑。执行流程进入点如下代码

```
[self navigationController] pushViewController:chooseDeviceView animated:YES];
[chooseDeviceView release];             
[numberTextField setText:@""]; 
```

视图发生变化，事情“正常工作”。问题是，在此之后，我的应用程序中缺少剪切/复制/粘贴功能。

真的不知道如何开始调试问题。它会给任何人敲响警钟吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:52:18.640

对于初学者来说，这是一个非常复杂的问题。[最后，这个问题与我的 iPhone 应用程序中](https://stackoverflow.com/questions/12874174/status-message-corrupts-main-window-in-my-iphone-app)的状态消息损坏主窗口有点相关

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T10:11:36.823

在你的新视图控制器中添加这个：

```
- (BOOL)canBecomeFirstResponder {
    return YES;
} 
```

它应该可以解决您的问题。

# python - Google App Engine 将字符串转换为属性（实体）

> ID：12784648
> 
> 赞同：1
> 
> 时间：2012-10-08T15:21:22.497
> 
> 标签：python, google-app-engine

```
class Personel(db.Model):
  ismarried=db.StringProperty()

class AddPersonal(webapp.RequestHandler):
  def get(self):
    per=Personal()
    #i want use a function at below, instead of per.ismarried
    per.whatisthisfunction("ismarried")="yes"
    per.put 
```

我想将字符串转换为实体的属性。可以如上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:25:04.330

您正在寻找的是[`setattr`](http://docs.python.org/library/functions.html#setattr)：

```
setattr(per, "ismarried", "yes") 
```

# c - 使用 strcat 时出错

> ID：12784650
> 
> 赞同：0
> 
> 时间：2012-10-08T15:21:27.300
> 
> 标签：c

在我的学校作业中，我必须找到一个带有蛮力算法的字符串。

例如，如果长度为 3，则这些是所有可能的组合： a b c aa ba ca ab bb cb ac bc cc aaa baa caa aba bba cba aca bca cca aab bab cab abb bbb cbb acb bcb ccb aac bac cac abc bbc cbc ACC 密件抄送 抄送

我在`strcat`.

这是代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
# define PASS_SIZE 3

char letters[] = "abc";
char test[] = "acb";
int count = 0;
int nbletters = sizeof(letters)-1;
int bruteForce(int size);

int main() {
    int i = 0;
    int notFound = 1;

    for (i = 1; i <= PASS_SIZE && notFound == 1; i++){
        notFound = bruteForce(i);
    };

    printf("Count: %d\n",count);

    return -1;
}

int bruteForce(int size){
    int i;
    int entry[size];
    char pass[50];
    char *temp;

    for(i=0 ; i<size ; i++){
        entry[i] = 0;
    }
    do {
        for(i=0 ; i<size ; i++){
            temp = letters[entry[i]];
            printf("%c", temp);
            strcat(pass,temp); /*Getting error here*/
       }

        count++;
        printf("\n");

        /*Compare pass with test*/
        if (strcmp (pass,test) == 0){
            return 0;
        };

       for(i=0 ; i<size && ++entry[i] == nbletters; i++){
            entry[i] = 0;
        }

    } while(i<size);

    return 1;
} 
```

可能蛮力算法不是最好的算法。

为什么 strcat 不工作并且我得到分段错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:24:12.480

您正在声明您的`pass`变量，但您没有初始化它。当你连接到它的结尾时，你最初假设它的结尾是它的开始，但你需要做到这一点。

更重要的是，看看你的`temp`变量。您已将其声明为 a `char *`，但已将其初始化为 a `char`（而不是指向 char），然后`strcat()`再次将其视为指针-但它没有指向任何有效的位置（导致崩溃） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:23:33.523

`strcat`期待一个以 null 结尾的字符串，但`char pass[50]`尚未初始化。设置`pass[0] = '\0'`为获取有效的 C 字符串。

# objective-c - 计数 JSON，NSArray

> ID：12784652
> 
> 赞同：2
> 
> 时间：2012-10-08T15:21:46.657
> 
> 标签：objective-c, json, cocoa

我遇到了一个小问题，我有一个 JSON 提要，例如

```
 [
    {
        id: "7",
        title: "",

    },
    id: "8",
    title: ""
}
] 
```

现在我想计算我尝试过的 JSON 中的所有“对象”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:26:19.957

看来您的`tableData`ivar 是一个`NSArray`. 我想你想要：

```
[self setTableData:array]; 
```

您收到有关将 an 设置`NSUInteger`为`NSArray`ivar的错误提示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:27:19.883

首先，您的提要看起来无效。

```
[
    {
        id: "7",
        title: "",

    },
    id: "8",
    title: ""

}// Still Too many Braces.
] 
```

除此之外，您的代码看起来很实用..

**编辑**

不，NSBum 是对的。数据不应该是一个计数。

```
[self setTableData:array]; 
```

此外，在 viewDidAppear 之后，您应该在请求的 tableview 上调用 -[UITableView reloadData]。在您设置 tableData 变量之前，它可能已经调用了它的数据。

另外，您应该致电询问有关该物业而不是 ivar 的信息

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    NSLog(@"x: %u", [self.tableData count]);
    return [self.tableData count];

} 
```

# android - 在 Android 中尝试 Parse Json，获取 arraylist 异常

> ID：12784658
> 
> 赞同：3
> 
> 时间：2012-10-08T15:22:17.380
> 
> 标签：android, json, parsing

我有一个这样的json：

```
[{"campaignName":"2012 Q1","id":1,"source":"Added by subject","status":"Draft","subject":"Test Subject1"},{"campaignName":"2012 Q2","id":2,"source":"Added by reviewer","status":"Created","subject":"Test Subject2"},{"campaignName":"2012 Q2","id":3,"source":"Added by reviewer","status":"Created","subject":"Test Subject62"}] 
```

我有课：

```
public class Json_ToDoData {
private ArrayList<ToDo> mList;

public Json_ToDoData() {

}

public ArrayList<ToDo> getmList() {
    return mList;
}

public void setmList(ArrayList<ToDo> mList) {
    this.mList = mList;
} 
```

}

和： `public class ToDo { public ToDo() { }

```
@SerializedName("campaignName")
private String campaignName;

@SerializedName("id")
private String id;

@SerializedName("source")
private String source;

@SerializedName("status")
private String status;

@SerializedName("subject")
private String subject; ... gettes and settes ...}` 
```

我总是得到一个例外：

> 10-08 15:17:46.600: W/System.err(2557): java.lang.ClassCastException: java.util.ArrayList 我不明白为什么。这是我要解析的行：

```
 Json_ToDoData rr = new JSONDeserializer<Json_ToDoData>().deserialize(sb.toString(), Json_ToDoData.class); 
```

请帮帮我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:00:36.330

I think the issue is that user json string is not in proper format. Try to format your json string in below format:

```
{ 
    jsonObjectName: 
    [ 
          { 
             "campaignName":"2012 Q1", 
             "id":1,
             "source":"Added by subject",
             "status":"Draft",
             "subject":"Test Subject1"
          } 
    ] 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:23:41.653

首先我想说谢谢你在这个问题上的合作，解决方案是关于我的解析器，我的意思是我已经改变了以下代码：

```
 JSONTokener jsonTokener = new JSONTokener(sb.toString());
        JSONArray rootArray = (JSONArray) jsonTokener.nextValue();
        rootArray.toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:07:39.457

在你的 json 字符串中；
“id”的值被定义为整数，你正试图将它解析成字符串，
我认为这是异常的根本原因......

在 Todo 类中，它被定义为；

```
@SerializedName("id")
private String id; 
```

但在 json 字符串中，它被定义为；

```
"id":1 
```

要解决这个问题，您可以将班级中的字段更新为

```
@SerializedName("id")
private Integer id; 
```

或在您的 json 字符串中

```
"id":"1" 
```

希望这可以帮助。

# javascript - 通过循环向数组元素添加类

> ID：12784661
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:22:29.097
> 
> 标签：javascript, jquery, loops, delay, addclass

我需要从'inputs'数组中检查输入字段的循环，如果有空字段，则需要在它们附近显示特殊对话框，在显示对话框后，我需要将类'style'添加到附近的输入字段中显示对话框，然后对话框应该转到下一个空字段并向其添加类“样式”。依此类推，直到所有空输入都具有“样式”类。

问题是，在显示对话框后的我的循环中，类“样式”仅添加到数组中的最后一个元素，但它应该添加到每个空元素中，中间有延迟。

这是我的循环，但正如我所说，它不能正常工作：

```
for(i=0;i<inputs.length;i++){
var now = inputs[i];
var top = inputs[i].attr('top');
    if(!now.val()){
    if(dialog.css('display')=='none'){now.addClass('style');dialog.css('top',top).fadeIn(200);}
    else{dialog.delay(300).animate({"top": top}, 500, function(){now.addClass('style');});
    }else{now.removeClass('style');}} 
```

PS对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:26:24.350

发生这种情况是因为调用“addClass”的函数是在 300 毫秒动画之后发生的。到那时，'i' 变量的值已经改变，因为 for 循环将继续运行。

您可能只能在“动画”和延迟之前进行“now.addClass”调用。否则，您将不得不在动画完成后中断循环并继续，以防止变量被覆盖。

这是我所说的一个例子。下面的代码将一次处理 1 个输入，并且在当前一个完成处理之前不会继续下一个输入（此代码尚未经过测试）：

```
var offset = -1;

var inputs = (something goes here)

iterateInputs();

function iterateInputs()
{
    offset++;

if (typeof inputs[offset] != 'undefined')
{
    eachInput();
}
else
{
    // all done!
}
}

function eachInput()
{
var now = inputs[offset];
var top = inputs[offset].attr('top');
if (!now.val())
{
    if (dialog.css('display')=='none')
    {
        now.addClass('style');
        dialog.css('top', top).fadeIn(200, function(){
            iterateInputs();
        });
    }
    else
    {
        dialog.delay(300).animate({"top": top}, 500, function(){
            now.addClass('style');
            iterateInputs();
        });
    }
}
else
{
    now.removeClass('style');
    iterateInputs();
}
} 
```

# javascript - 在 Ajax 中发出同步请求，用于 jQuery 1.8

> ID：12784662
> 
> 赞同：0
> 
> 时间：2012-10-08T15:22:33.277
> 
> 标签：javascript, ajax, jquery, twitter

我阅读了很多人提出的大部分问题，但正如 jQuery 1.8.X async: false 文档中所建议的那样，不推荐使用。

用例：我想获取某个位置的主题的所有推文（使用推特搜索 API），我可以使用地理编码和 q 参数获取这些推文。

但我需要获取所有页面，因为我们知道您可以按照 twitter api 的建议从 api 获得 15 * 100 个结果。

代码：可以在这里找到。[http://pastebin.com/rgVDQFve](http://pastebin.com/rgVDQFve)

问题是 tweetsPerPage 未定义，因为 getTweets 返回的对象状态为 1，但它的状态应为 4。

我正在使用 jQuery 1.8.2 我尝试更改它但没有效果。

任何人都可以提出一些建议。

# 编辑 ：

```
function main() {
for(hindex=0; hindex<HASHTAGS.length; hindex++)  {
    for (cindex=0; cindex<COORDINATES.length;cindex++) {
        for (pindex=0; pindex<NUMBER_OF_PAGES; pindex++) {
            getTweets(HASHTAGS[hindex], COORDINATES[cindex][1], COORDINATES[cindex][2], pindex+1, function(tweets) {
                TWEETS = TWEETS.concat(tweets); /*basically I am getting all the tweets in this, I just need a way by which after executing all the getTweets along with their success functions and the callback I get the control to myself which will help me in using TWEETS*/
            });
        }
    }
} 
```

}

```
 function  getTweets(hashtag, latitude, longitude, pageIndex, callback) {
    $.ajax({    
            url: 'http://search.twitter.com/search.json',
            cache: false, 
            dataType: 'jsonp',
            data: {
                    q: hashtag,
                    geocode: latitude + "," + longitude + "," + RADIUS,
                    page: pageIndex,
                    rpp: RESULTS_PER_PAGE,
                    result_type: RESULT_TYPE
            },
            success: function (data) {
                var results = data.results;
                var tweets = [];
                $(results).each(function(index, tweetJSON) {
                        var tweet = {
                            created_at: 'Dhruven' + " " + pageIndex + " " + (index+1)
                        };
                        var tweetObj = JSON.stringify(tweet);
                        tweets.push(tweetObj);  
                });
                callback(tweets);
            }
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:18:21.827

正如评论中所说，jsonp 请求不支持同步请求。

但是带有回调的异步请求似乎正在工作，请参见小提琴：

[http://jsfiddle.net/andreortigao/hAevy/](http://jsfiddle.net/andreortigao/hAevy/)

代码：

```
function getTweets(hashtag, latitude, longitude, pageIndex, callback) {
    $.ajax({    
            url: 'http://search.twitter.com/search.json',
            type:'GET',
            dataType: 'jsonp',
            data: {
                    q: hashtag,
                    geocode: latitude + "," + longitude + "," + '10mi',
                    page: pageIndex,
                    rpp: 10,
                    result_type: 'recent'
            },
            success: function (data, status, xmlHttp) {
                var results = data.results;
                var tweets = [];
                $(results).each(function(index, tweetJSON) {
                        var tweet = {
                            created_at: 'Dhruven' + " " + pageIndex + " " + (index+1)
                        };
                        var tweetObj = JSON.stringify(tweet);
                        tweets.push(tweetObj);  
                });
                callback(data.results);
            }
    });
} 
```

称呼：

```
getTweets("#facebook", 42.3580555555556, -71.0602777777778, 2, function(tweets){
 $("#log").text(JSON.stringify(tweets)); }) 
```

# spring - Grails 2.1 和 CustomDateEditor 似乎不起作用

> ID：12784669
> 
> 赞同：-2
> 
> 时间：2012-10-08T15:23:08.847
> 
> 标签：spring, date, grails, grails-2.1

我在 Grails 2.1.0 中使用 CustomDateEditor 时遇到问题

我想要达到的目标：

日期类现在呈现为 08/10/2013 00:00:00 CEST 但我想将格式更改为 08/10/2013（dd/MM/yyyy 格式）

到目前为止我所做的：

资源.groovy

```
beans = {
    customPropertyEditorRegistrar(myutil.CustomPropertyEditorRegistrar)
} 
```

myutil.CustomPropertyEditorRegistrar

```
package myutil

import org.springframework.beans.PropertyEditorRegistrar
import org.springframework.beans.PropertyEditorRegistry
import org.springframework.beans.propertyeditors.CustomDateEditor
import java.text.SimpleDateFormat

public class CustomPropertyEditorRegistrar implements PropertyEditorRegistrar {
    public void registerCustomEditors(PropertyEditorRegistry registry) {
        registry.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat('dd/MM/yyyy'), true)) //this doesn't work
        registry.registerCustomEditor(java.math.BigDecimal.class, new CurrencyPropertyEditor()) //this work so at least the registerCustomEditors method is invoked
    }
} 
```

正如您在我的代码中看到的，有一个 CurrencyPropertyEditor 工作得很好，所以我在这里很困惑.. 发生了什么？

我已经四处搜索，似乎我的代码没有错误，但仍然无法正常工作。

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:31:29.530

如果范围 f this 是以您自己的自定义格式呈现日期，那么使用`g:formatDate`标签不是更好吗？就像是：

```
 <g:formatDate format="dd/MM/yyyy" date="${date}"/> 
```

检查[formatDate](http://grails.org/doc/2.1.0/ref/Tags/formatDate.html)文档

# sencha-touch - 将 HTML 表格附加到另一个表格

> ID：12784674
> 
> 赞同：0
> 
> 时间：2012-10-08T15:23:24.337
> 
> 标签：sencha-touch, sencha-touch-2

在我的 Sencha Touch 2 应用程序中，我在一个视图中有一个 HTML 表，它有它的 ID。我想做的是做一些动作，加载存储，创建另一个表并将其附加到现有表 - 而不更改视图。我在提出请求、即时创建第二个表等方面没有问题，但是我需要弄清楚如何根据 Sencha Touch 将一个表附加到另一个表？有没有像 jQuery 这样的“appendTo()”函数，我该如何使用它？我基本上需要通过它的 ID 获取表并将新表附加到它。但不知道如何在 Sencha Touch 2 中做到这一点。非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:31:11.147

这取决于您的视图扩展什么，但如果它扩展[xtype:panel](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel)那么您可以使用[getHtml()](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel-method-getHtml)获取现有内容，然后使用[setHtml()](http://docs.sencha.com/touch/2-0/#!/api/Ext.Panel-method-setHtml)更新它。

# objective-c - 调整大小时使用自定义 UICollectionViewLayout 进行奇怪的“拆分”

> ID：12784677
> 
> 赞同：2
> 
> 时间：2012-10-08T15:23:36.227
> 
> 标签：objective-c, ios, ios6, uicollectionview

![前](../Images/6cc9226041e8a8f75f0c15fd30e67b5f.png) ![后](../Images/f1a1ce2629c5ac0223a91369a4947454.png)

我有一个自定义 UICollectionViewLayout 类，它出现了一个奇怪的问题。上面的屏幕截图演示。由于键盘会遮挡下部字段（如果它们被编辑），我想缩短 UICollectionView 以便在键盘出现时不会被键盘遮挡。问题是我在正确的图片中得到了结果。橙色边框是承载 UICollectionView 的视图的背景，红色是 UICollectionView 的背景色。橙色背景的视图是视图控制器的根视图，并使用以下内容调整大小（自身是视图控制器）。

```
 CGRect frame = self.view.frame;
    frame.size.height -= 300;
    self.view.frame = frame; 
```

它表明视图可以根据需要调整大小，但由于某种原因 UICollectionView 认为它不需要在下部绘制单元格。它分裂的地方似乎是一致但随意的。如果原始视图向下滚动，则不一定在节标题处拆分。

在布局类中，如果我为 - (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds 返回 YES，它会正确绘制但会完全重绘，所以它看起来像地狱一样，因为它会发生移动/淡化的事情。并且调整视图大小并不会真正使布局无效，没有理由不能使用相同的布局。

寻找关于可能发生的事情的任何想法。布局代码如下：

```
//
//  MyLayout.h
//  uicontroller
//
//  Created by Guy Umbright on 8/1/12.
//  Copyright (c) 2012 Guy Umbright. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "SFNativeLayout.h"
#import "SFLayoutView.h"

@class SFLayout;

@interface SFLayout : UICollectionViewLayout

@property (readonly, strong) SFNativeLayout* sfLayout;
@property (assign) BOOL deferRowsColsToCollectionView;
@property (strong) SFLayoutView* layoutView;

- (id) initWithDictionary:(NSDictionary*) dict;

- (NSInteger) numberOfSections;
- (NSInteger) numberOfItemsInSection:(NSInteger)section;

@end

//
//  MyLayout.m
//  uicontroller
//
//  Created by Guy Umbright on 8/1/12.
//  Copyright (c) 2012 Guy Umbright. All rights reserved.
//

#import "SFLayout.h"

#define ROW_HEIGHT 81 //79 with one pixel top bottom
#define HEADER_HEIGHT 30

@interface SFLayout ()

@property (strong) SFNativeLayout* sfLayout;
@property (nonatomic, strong) NSMutableArray* sectionMetrics;
@end

@implementation SFLayout

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (id) initWithDictionary:(NSDictionary*) dict
{
    if (self = [super init])
    {
        self.sfLayout = [[SFNativeLayout alloc] initWithDictionary:dict];
    }

    return self;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSInteger) numberOfSections
{
    if (self.deferRowsColsToCollectionView)
    {
        return [self.layoutView numberOfSections];
    }
    else
    {
        return self.sfLayout.sectionCount;
    }
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (BOOL) sectionHasHeader:(NSInteger) section
{
    BOOL result = YES;

    if (self.deferRowsColsToCollectionView)
    {
        result = [self.layoutView sectionHasHeader:section];
    }
    return  result;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSInteger) numberOfColumnsInSection:(NSInteger) section
{
    if (self.deferRowsColsToCollectionView)
    {
        return [self.layoutView numberOfColumnsInSection:section];
    }
    else
    {
        SFNativeLayoutSection* layoutSection = [self.sfLayout.sections objectAtIndex:section];
        NSInteger sectionColumns = layoutSection.columnCount;
        return sectionColumns;
    }
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSInteger) numberOfRowsInSection:(NSInteger) section
{
    if (self.deferRowsColsToCollectionView)
    {
        return [self.layoutView numberOfRowsInSection:section];
    }
    else
    {
        SFNativeLayoutSection* layoutSection = [self.sfLayout.sections objectAtIndex:section];
        return layoutSection.rowCount;
    }
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (CGFloat) heightForSection:(NSInteger) sectionNdx
{
    CGFloat height = 0;

    if (self.deferRowsColsToCollectionView)
    {
        height = [self numberOfRowsInSection:sectionNdx] * ROW_HEIGHT;
        if ([self sectionHasHeader:sectionNdx])
        {
            height += HEADER_HEIGHT;
        }
    }
    else
    {
        SFNativeLayoutSection* section = [self.sfLayout.sections objectAtIndex:sectionNdx];

        height += section.rowCount * ROW_HEIGHT;

        if (section.includeHeader)
        {
            height += HEADER_HEIGHT;
        }
    }
    return height;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (CGSize)collectionViewContentSize
{
    BOOL fillSectionMetrics = NO;
    CGFloat lastY = 0;
    if (self.sectionMetrics == nil)
    {
        self.sectionMetrics = [NSMutableArray array];
        fillSectionMetrics = YES;
    }
    CGSize sz =  [self collectionView].frame.size;

    CGFloat height = 0;
    for (NSInteger ndx=0; ndx < [self numberOfSections]; ++ndx)
    {
        CGFloat sectionHeight = [self heightForSection:ndx];
        height += sectionHeight;

        if (fillSectionMetrics)
        {
            [self.sectionMetrics addObject:@{@"height":@(sectionHeight),@"startingY":@(lastY),@"endingY":@(lastY+sectionHeight)}];
            lastY += sectionHeight;
        }
    }

    sz.height = height;
    return sz;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
    return [super shouldInvalidateLayoutForBoundsChange:newBounds];
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSArray*) attributesForSection:(NSInteger) sectionNdx inRect:(CGRect) rect
{
//    NSLog(@"generate attrs for section %d", sectionNdx);

    NSMutableArray* result = [NSMutableArray array];
    CGRect intersect;

    NSDictionary* sectionMetrics = [self.sectionMetrics objectAtIndex:sectionNdx];
    SFNativeLayoutSection* layoutSection = [self.sfLayout.sections objectAtIndex:sectionNdx];

    NSInteger columnCount = [self numberOfColumnsInSection:sectionNdx];

    CGFloat rowStart = [[sectionMetrics valueForKey:@"startingY"] floatValue];

    if ((self.layoutView.layoutDatasource != nil) || (layoutSection.includeHeader))
    {
        CGRect headerFrame = [self collectionView].bounds;
        headerFrame.origin.y = rowStart;
        headerFrame.size.height = HEADER_HEIGHT;

        intersect = CGRectIntersection(rect, headerFrame);
        if (!CGRectIsEmpty(intersect))
        {
            UICollectionViewLayoutAttributes* attr = [UICollectionViewLayoutAttributes layoutAttributesForSupplementaryViewOfKind:@"Header"
                                                                                                                    withIndexPath:[NSIndexPath indexPathForItem:0 inSection:sectionNdx]];
            attr.frame = headerFrame;
            [result addObject:attr];
        }

        rowStart = headerFrame.origin.y + headerFrame.size.height;
    }

    for (int rowNdx = 0; rowNdx < [self numberOfRowsInSection:sectionNdx]; rowNdx++)
    {
        CGRect rowRect = [self collectionView].frame;
        rowRect.size.height = ROW_HEIGHT;
        rowRect.origin.y = rowStart + (rowNdx * ROW_HEIGHT);

        intersect = CGRectIntersection(rect, rowRect);
        if (!CGRectIsEmpty(intersect))
        {
            NSInteger columns = [self numberOfColumnsInSection:sectionNdx];
            for (NSInteger colNdx =0; colNdx < columns; ++colNdx)
            {
                NSIndexPath* indexPath = [NSIndexPath indexPathForItem:rowNdx * columnCount+colNdx inSection:sectionNdx];
                    CGRect frame;

                    frame.origin.y = rowRect.origin.y;
                    frame.size.height = ROW_HEIGHT;
                    frame.size.width = self.collectionView.frame.size.width/columnCount;
                    frame.origin.x = colNdx * frame.size.width;

                    UICollectionViewLayoutAttributes* attrs =  [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
                    attrs.frame = frame;
                    [result addObject:attrs];
            }
        }
    }

    return result;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSMutableArray* attributes = [NSMutableArray array];

    for (NSDictionary* sectionMetric in self.sectionMetrics)
    {
        //can short circuit based on top of section and bottom of rect
        CGRect sectionRect = [self collectionView].frame;
        sectionRect.origin.y = [[sectionMetric valueForKey:@"startingY"] floatValue];
        sectionRect.size.height = [[sectionMetric valueForKey:@"height"] floatValue];

        CGRect intersect = CGRectIntersection(rect, sectionRect);
        if (!CGRectIsEmpty(intersect))
        {
            NSArray* sectionAttrs = [self attributesForSection:[self.sectionMetrics indexOfObject:sectionMetric] inRect:intersect];
            [attributes addObjectsFromArray:sectionAttrs];
        }
    }

    return attributes;
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return [super layoutAttributesForItemAtIndexPath:indexPath];
}

///////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////
- (NSInteger)numberOfItemsInSection:(NSInteger)section
{
    SFNativeLayoutSection* layoutSection = [self.sfLayout.sections objectAtIndex:section];
    NSInteger sectionColumns = [self numberOfColumnsInSection:section];
    NSInteger sectionRows = layoutSection.rowCount; //%%%

    return sectionColumns * sectionRows;
}

@end 
```

# grails - 下拉/选择 Grails SpringSecurity 属性的列表？

> ID：12784683
> 
> 赞同：0
> 
> 时间：2012-10-08T15:23:44.170
> 
> 标签：grails, spring-security, selectlist, domain-model

我目前正在从事 Grails 项目，并想知道从 Spring Security 域模型中显示对象的选择列表的最佳方式：

我知道如何创建一个选择列表，但我只想找出 grails 中使用该域中的对象填充它的最佳方法。我正在考虑调用类似“ **user.list(params)** ”之类的东西，然后将其传递给视图，然后我可以访问该域中定义的对象，但我不能 100% 确定这是最好的方法还是可以那样做？

提前致谢

编辑.....

我在控制器中有以下自定义模型设置：

```
class UserModel {
           String username
           String firstName
           String lastName

           def email = User.email.list()
           String[] emails = email

           static constraints = {
                username blank: false
                firstName blank: false
                lastName blank: false

           }
} 
```

然后当这个视图的索引页被初始化时，我将它传递给它：

```
[model: new UserModel(copy)] 
```

最后在视图上我有这个：

```
<g:select name="emails" from="${model.emails}" 
```

现在，当我运行应用程序时，出现此错误：

```
No signature of method: grails.plugins.springsecurity.ui.UserModel.propertyMissing() is applicable for argument types: () values: [] Possible solutions: propertyMissing(java.lang.String) 
```

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:37:21.313

你的方法看起来绝对正确。在您填充模型的控制器操作中：

```
def listUsers = {
    [ 'users': Users.list( params ) ]
} 
```

并在视图中使用模型填充列表框：

```
<g:select name="users" from="${ users }" /> 
```

您的问题看起来很简单，所以我希望，我正确地理解了问题背后的想法:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:22:45.840

我一直在努力解决这个问题，并为我遇到的问题实施了解决方案，一切正常。以下是我在控制器中针对相关视图的内容：

```
def index = {
        [userList: Users(), command: new RegisterCommand(copy)]
    }

protected List Users() {
        lookupUserClass().list()
    } 
```

List Users 从扩展类调用另一个函数，如下所示：

```
protected Class<?> lookupUserClass() {
        grailsApplication.getDomainClass(lookupUserClassName()).clazz
    } 
```

然后，此视图呈现我要在选择列表中显示的项目列表：

```
<g:select name="emails" from="${userList.emails}" /> 
```

如果您正在寻找唯一值，您也可以这样做：

```
<g:select name="emails" from="${userList.emails.unique()}" /> 
```

谢谢

# javascript - 包括 JavaScript

> ID：12784684
> 
> 赞同：0
> 
> 时间：2012-10-08T15:23:51.367
> 
> 标签：javascript

我知道可以将 JavaScript 放在一个特定的 .js 文件中，然后通过执行将其包含在任何页面中......

```
<script src="MyJavaScript.js"></script> 
```

我注意到关于这些包含的 .js 文件：

1.  它们实际上不必以 .js 结尾
2.  它们的内容不应用标签括起来

但是，我需要导入以扩展名 .page 结尾的文件中的一些 JavaScript（我使用的是 force.com 平台），其中 JavaScript 包含在标签中。我需要这样做的原因是我可以使用 quint 编写 som 单元测试。现在，我的双手被绑在这里。最干净的方法显然是将 .page 文件中的 JavaScript 重构为 .js 文件，但我不能这样做。我想知道有什么方法可以导入带有标签的脚本片段。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:26:57.380

这是你想要的？

```
<script type="text/javascript" src="MyJavaScript.page"> 
```

[John Resig](http://ejohn.org/blog/degrading-script-tags/)有一个很好的方法来弃用标签。也许值得一瞧。

在这个标签问题上也有一个 SO 线程。请看[这里。](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:29:48.160

正如@totero 所说，您可以使用属性指定脚本类型

```
<script type="text/javascript" src="myFile.annoyingExtension"> 
```

但是请不要忘记关闭标签，否则您会遇到错误：

```
<script type="text/javascript" src="myFile.annoyingExtension"></script> 
```

关闭标签本身不会起作用，所以请**不要这样做**

```
<script type="text/javascript" src="myFile.annoyingExtension" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:28:14.510

您提到包含 Javascript，从外观上看，您将它们包含在 HTML 文档中。您是否有任何其他可用的编程或脚本语言允许您编辑文档？如果您可以在平台中使用 PHP 或 ASP 之类的东西，您可以让它读取 .page 文件并将其回显到您的 HTML 输出文档中（可能`<script>`在您方便时从其中剥离标签）。

# for-loop - FOR 增量中的非常奇怪的行为

> ID：12784685
> 
> 赞同：0
> 
> 时间：2012-10-08T15:23:54.407
> 
> 标签：for-loop, pascal, freepascal

当我使用这 2 个 FOR 初始化二维向量/数组时遇到问题：我定义了这些类型：

```
type
  Range9         = 0..8;
  Digit         = '0'..'9';
  Board    = array [Range9,Range9] of Digit; 
```

然后 FOR 存在问题的代码部分如下：

```
var
  i : Range9;
  j : Range9;
  table : Board;
BEGIN

for i:=0 to 8 do begin
  for j:=0 to 8 do begin
    table[i,j] := '0'
  end
end;

END. 
```

现在的问题是，当我调试这部分代码时，出于某种原因，我的`i`变量在不应该修改的时候被修改了。

例如，我有一个手表`i`，`j`如果我在行中放置一个断点，`table[i,j] := 0` 我会看到这些值：

```
i    j
0    0
256  1
512  2
768  3
1024 4
1280 5
1536 6
1792 7
2048 8
2049 8
1    0
257  1
513  2
769  3 
```

等等...

因此，当程序进入第二个 for（增加 的那个`j`）时，我`i`的间隔增加了 256 ......我真的不知道为什么会发生这种情况。

我发现的另一件事是，如果我更改`i`变量的类型，问题就解决了。如果在 VAR 部分中我放置`i : integer`了`i : Range9`, ，`i`则在不应该修改时不会被修改。

如果有人向我解释为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:37:29.467

我找到了我自己的问题的答案......好吧，我没有完全找到答案，我在我正在参加的编程课程的论坛板上问了同样的问题，其中一位教授给了我这个链接：

（顺便说一句，它是西班牙语） [http://www.fing.edu.uy/inco/cursos/prog1/pm/field.php/FAQ/Laboratorio#toc17](http://www.fing.edu.uy/inco/cursos/prog1/pm/field.php/FAQ/Laboratorio#toc17)

**快速翻译：**

定义为子范围的变量会发生这种情况。原因不确定；但毫无疑问是调试器的实现错误。有一个“技巧”可以解决这个问题（尽管并非总是如此），以便能够在调试器上看到正确的值：

假设您的程序中有以下变量：

```
var anything: 1 .. 10; 
```

在您的程序中添加一个不会在程序的任何部分中使用的整数变量：

```
var anything: 1..10;
    aux: integer;  { only for the debugger } 
```

然后，当您定义调试器监视时`anything`，您应该添加以下表达式，而不是添加变量：

```
aux:= anything 
```

aux变量可以用来查看不同的变量，所以只需要声明一个aux变量。

在某些情况下，前一个可能不起作用。另一种解决方案是将使用子范围定义的所有变量的类型更改为整数、字符、字符串等（视情况而定），仅用于调试，然后再次更改。

**翻译结束。**

希望这对面临同样错误的其他人有用。顺便说一句，这发生在 free pascal IDE 2.2.2 的调试器中，也许在另一个 IDE/compiler/debugger 的 pascal 中它不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:59:44.227

I haven't done Pascal in a while, so I might be a bit rusty. The only thing I can think of that is creating your problem is that you created a character range that was interpreted as a byte array, which was then converted to a Digits and then multiplied, which gave you those weird values. But, I could be wrong. I am unfamiliar with FreePascal.

```
Type
    Range9 = 0..8
    Board = Array[Range9,Range9] of Integer;
var
A : Board;
I,J : Integer;
begin
  For I:=0 to 8 do
    For J:=0 to 8 do
       A[I,J]:=I*J;
end. 
```

Reference: [ftp://ftp.freepascal.org/pub/fpc/docs-pdf/ref.pdf](ftp://ftp.freepascal.org/pub/fpc/docs-pdf/ref.pdf)

# z3 - 在linux中编译z3 ocaml绑定

> ID：12784686
> 
> 赞同：2
> 
> 时间：2012-10-08T15:23:59.133
> 
> 标签：z3

我正在尝试在 Linux 中为 z3 编译 OCaml 绑定。

我尝试使用提供的 Makefile：我做了“make ocamlrelease”，但它中止并出现错误 cp: cannot stat `ml_release/build-lib.sh': No such file or directory

我还阅读了 ml 目录中包含的 readme.txt，它说要使用 SLAM 和 SDT，但这些似乎只适用于 Windows，而不适用于 Linux。

如何编译 OCaml 绑定？

谢谢，何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:38:41.077

我们目前正在研究这个问题。它应该很快修复。[目前，http: //z3.codeplex.com](http://z3.codeplex.com)上提供的 ML 绑定不起作用。有一些损坏的引用和仅限 Windows 的依赖项。这将得到修复。

# xslt - 如何通过使用 XSLT 传递参数以通用方式添加空格

> ID：12784689
> 
> 赞同：0
> 
> 时间：2012-10-08T15:24:04.333
> 
> 标签：xslt, xslt-1.0

有什么方法可以在输出中创建想要的空间，因为我一直在热编码，如果我需要空间`<xsl:text>&#10;</xsl:text >`，请建议一个函数根据传递的参数生成空间，请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:32:18.483

您可能正在查看递归模板。像这样的东西：

```
<xsl:template name="WriteSpaces">
   <xsl:param name="count" />
   <xsl:if test="$count &gt; 0">
     <xsl:text> </xsl:text>
     <xsl:call-template name="WriteSpaces">
       <xsl:with-param name="count" select="$count - 1" />
     </xsl:call-template>
   </xsl:if>
</xsl:template> 
```

请注意，调用它实际上会污染您的代码，甚至不仅仅是直接放置空格。对于静态内容，我可能只使用文本。对于动态内容（即，如果您愿意`<xsl:text> </xsl:text><xsl:value-of select="." /><xsl:text> </xsl:text>`），我会使用 concat() 函数，因为它不限制参数的数量 - 因此您可以将上面的代码编写为`<xsl:value-of select="concat(' ', ., ' ')" />`.

# java - 在 Android 中以编程方式创建带有自定义列表项的 ListView - 没有 xml 列表项布局

> ID：12784695
> 
> 赞同：13
> 
> 时间：2012-10-08T15:24:30.943
> 
> 标签：java, android, listview, listitem

正如我在之前提出的问题中看到的那样，在自定义适配器类（例如，MyAdapter 扩展了 ArrayAdapter）中，它们总是使用膨胀的 xml 列表项布局。我希望做的是完全使用Java而不是XML创建一切......

```
// for example
String[] wordlist = new String[] {a, b, c};

LinearLayout list_item_layout = new LinearLayout(this);
list_item_layout.setId(5000);

TextView listText = new TextView(this);
listText.setId(5001);

listLayout.addView(listText);

ListView list = new ListView(this);

// ** QUESTION ** do I declare a programmatic .setAdapter() like this?
// ** TAKE NOTE ** I passed 'wordlist' here..
list.setAdapter(new MyAdapter(this, list_item_layout.getId(), listText.getId(), wordlist)); 
```

然后对于 MyAdapter...

```
private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId, String[] strings) {
        super(context, resource, textViewResourceId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView; //is this the list_item_layout that I passed??
        TextView tv = (TextView) v.findViewById(5001);

        // ** QUESTION ** do I pass 'wordlist' again here?
        tv.setText( wordlist[position] );

        return v;
    }
} 
```

当我在我的设备上运行它时会发生以下错误...

```
 10-08 23:11:19.775: E/AndroidRuntime(18276): FATAL EXCEPTION: main
    10-08 23:11:19.775: E/AndroidRuntime(18276): android.content.res.Resources$NotFoundException: String resource ID #0x0
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.content.res.Resources.getText(Resources.java:222)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.widget.TextView.setText(TextView.java:3011)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at com.turista.client.TuristaClientMain.onClick(TuristaClientMain.java:113)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.view.View.performClick(View.java:2538)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.view.View$PerformClick.run(View.java:9152)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.os.Handler.handleCallback(Handler.java:587)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.os.Handler.dispatchMessage(Handler.java:92)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.os.Looper.loop(Looper.java:123)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at android.app.ActivityThread.main(ActivityThread.java:3691)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at java.lang.reflect.Method.invokeNative(Native Method)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at java.lang.reflect.Method.invoke(Method.java:507)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
    10-08 23:11:19.775: E/AndroidRuntime(18276):    at dalvik.system.NativeStart.main(Native Method) 
```

谁能解释如何以编程方式执行此操作？

* * *

*** 已编辑 *** 2012 年 10 月 9 日

* * *

好的，因为我仍然陷入这个问题，我想我已经做了一些改进，但仍然收到错误消息。改进后的代码如下..

```
//wordlist is a global variable
String[] wordlist = new String[] {a, b, c};

// ..
// .. inside onCreate...

ListView list = new ListView(this);
        list.setAdapter(new MyAdapter(this, R.layout.listitem, R.id.mLargeTextView, wordlist));
// since the ArrayAdapter class needs XML parameters to inflate, I created a dummy layout 
```

现在在 MyAdapter 类中..

```
private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId, String[] strings) {
        super(context, resource, textViewResourceId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LinearLayout listLayout = new LinearLayout(Main.this);
        listLayout.setLayoutParams(new LayoutParams(wrapContent, wrapContent));
        listLayout.setId(5000);

        TextView listText = new TextView(Main.this);
        listText.setId(5001);

        listLayout.addView(listText);

        listText.setText(wordlist[position]);

        return listLayout; 
    }
} 
```

如您所见，我认为我必须重写 getView 才能显示我的自定义视图，所以这就是我所做的。不幸的是，我想我误解了它。这是错误..

```
 10-09 09:24:10.095: E/AndroidRuntime(2517): FATAL EXCEPTION: main
    10-09 09:24:10.095: E/AndroidRuntime(2517): java.lang.ClassCastException: android.view.ViewGroup$LayoutParams
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.ListView.measureScrapChild(ListView.java:1183)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1266)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.ListView.onMeasure(ListView.java:1175)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at com.android.internal.widget.WeightedLinearLayout.onMeasure(WeightedLinearLayout.java:60)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.View.measure(View.java:8366)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewRoot.performTraversals(ViewRoot.java:847)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1868)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.os.Handler.dispatchMessage(Handler.java:99)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.os.Looper.loop(Looper.java:123)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at android.app.ActivityThread.main(ActivityThread.java:3691)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at java.lang.reflect.Method.invokeNative(Native Method)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at java.lang.reflect.Method.invoke(Method.java:507)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
    10-09 09:24:10.095: E/AndroidRuntime(2517):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-09T08:05:14.817

`ListView`extends `AbsListView`which 反过来又扩展`AdapterView`了视图组。所以所有的孩子`ListView`都会被添加到`ViewGroup`. 因此，要设置布局参数，您可以在设置布局参数时使用[ViewGroup.LayoutParam](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)`listLayout`。

或尝试`AbsListView.LayoutParams`设置布局参数`listLayout`

请尝试一下，让我知道它是否有效。

以下代码工作正常..

```
public class MainActivity1 extends Activity {

    String[] wordlist = new String[] { "a", "b", "c" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView list = new ListView(this);
        list.setAdapter(new MyAdapter(this, wordlist));

        setContentView(list);
    }

    private class MyAdapter extends ArrayAdapter<String> {

        public MyAdapter(Context context, String[] strings) {
            super(context, -1, -1, strings);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LinearLayout listLayout = new LinearLayout(MainActivity1.this);
            listLayout.setLayoutParams(new AbsListView.LayoutParams(
                    AbsListView.LayoutParams.WRAP_CONTENT,
                    AbsListView.LayoutParams.WRAP_CONTENT));
            listLayout.setId(5000);

            TextView listText = new TextView(MainActivity1.this);
            listText.setId(5001);

            listLayout.addView(listText);

        listText.setText(super.getItem(position));

            return listLayout;
        }
    }
} 
```

问题是默认情况下 Eclipse 导入`ViewGroup.LayoutParams`与`AbsListView.LayoutParams`需要用于设置从`getView()`方法返回的视图的布局参数不兼容的导入。

请检查并告诉我进展如何..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-23T19:35:21.633

要添加到上述答案，将 id 设置为常数并不是一个好主意。

替换`listLayout.setId(5000);`为，`listLayout.setId(View.generateViewId());`

如果您的目标是 API 16 及以下版本，请参阅[此。](https://stackoverflow.com/a/15442997/1972597)

# html - 所有浏览器都忽略无名输入字段吗？

> ID：12784696
> 
> 赞同：5
> 
> 时间：2012-10-08T15:24:37.193
> 
> 标签：html, http-post, forms, input-field, name-attribute

如果没有指定名称属性，是否保证浏览器不发送输入元素？

例如，我们可以假设发布下面的表格不会发送信用卡号吗？

```
<form action="/process" method="post">
  <input id="credit-card-number" type="text">
  <input type="submit" name="commit" value="Go">
</form> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T15:25:02.467

> 如果没有指定名称属性，是否保证浏览器不发送输入元素？

是的（除非你用 JavaScript 来改变它）。

规范非常明确，[没有名称的控件不能成功](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.2)。

> 成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:28:44.603

该标准规定，要发送输入，它应该是一个成功的“控制”。

如果一个控件没有一个`name`它不是一个成功的“控件”，所以它不应该*被* 发送。

见[http://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)

# regex - 正则表达式在胁迫下杀死 CPU 的 CDN 实现

> ID：12784697
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:24:42.080
> 
> 标签：regex, cdn

我们正在尝试在我们的网站上设置 CDN 的使用，以获得带宽和页面加载速度的好处。这是通过 HttpModule 在进入浏览器之前针对 html 运行 Regex 来完成的。这适用于没有太多流量、更快的加载时间和减少的带宽。但是，当我们尝试一些压力测试时，它会导致 CPU 在我们强大的机器上达到最大值，而在相同的负载下，CPU 在关闭的情况下只有 50%。

我们不能使用 Jquery，因为在这个过程中为时已晚，并且有一个 Head 标签，我们可以在其中进行基本更改，但这是页面上的所有链接，但我们也无法将超链接等重定向到 CDN。

有没有人做过类似的事情并找到了一种更有效的方式来更改 URL 路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:27:03.083

一个简单的 RegEx 表达式通常需要比字符串处理函数执行的等效表达式更多的 CPU 时间来处理。

一些（罕见的）RegEx 表达式具有可怕的性能特征。

缺乏更多信息，我建议看看使用字符串函数来实现你想要的。

您将不得不发布您的表达和要求以获得更详细的指导。

# c# - 'save_Click' 没有重载匹配委托 'System.EventHandler'

> ID：12784705
> 
> 赞同：0
> 
> 时间：2012-10-08T15:25:17.817
> 
> 标签：c#, asp.net

我有一个 asp:button`<asp:Button runat="server" ID="save_players" Text="Save Changes" OnClick="save_Click" />`想要运行以下代码，但收到错误“'save_Click' 没有重载匹配委托 'System.EventHandler'”。

我认为这是因为方法签名与 EventHandler 委托不匹配 - 但我不知道如何修复它。请问这里有什么帮助吗？这是我的 C# 方法：

```
protected void save_Click(object sender, ListViewCommandEventArgs e)
{
    foreach (ListViewItem item in ListViewAddPlayers.Items)
    {
        if (item.ItemType == ListViewItemType.DataItem)
        {
            string tournyName = (string)(Session["TournyName"]);
            Label gameNumber = (Label)e.Item.FindControl("lblGame");
            TextBox txtPlayer1 = (TextBox)e.Item.FindControl("txtPlayer1");
            TextBox txtPlayer2 = (TextBox)e.Item.FindControl("txtPlayer2");

            string updateCommand = "//QUERY HERE//";
            SqlDataSource2.UpdateCommand = updateCommand;
        }
    }

    Server.Transfer("tourney-standings.aspx?name=" + (string)(Session["TournyName"]));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:26:58.837

应该 `protected void save_Click(object sender, EventArgs e)`

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.click.aspx)

# java - 日志锻造强化修复

> ID：12784707
> 
> 赞同：12
> 
> 时间：2012-10-08T15:25:21.763
> 
> 标签：java, security, logging, fortify, log-forging

我正在使用 Fortify SCA 来查找我的应用程序中的安全问题（作为大学作业）。我遇到了一些我无法摆脱的“Log Forging”问题。

基本上，我记录了一些来自 Web 界面的用户输入值：

```
logger.warn("current id not valid - " + bean.getRecordId())); 
```

Fortify 将此报告为日志伪造问题，因为*getRecordId()*返回用户输入。

我已经关注了这篇[文章](http://www.jtmelton.com/2010/09/21/preventing-log-forging-in-java/)，我正在用空格替换“新行”，但问题仍然存在

```
logger.warn("current id not valid - " + Util.replaceNewLine(bean.getRecordId())); 
```

任何人都可以提出解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T17:39:27.740

我知道这已经得到回答，但我认为一个例子会很好:)

```
<?xml version="1.0" encoding="UTF-8"?>
<RulePack xmlns="xmlns://www.fortifysoftware.com/schema/rules">
  <RulePackID>D82118B1-BBAE-4047-9066-5FC821E16456</RulePackID>
  <SKU>SKU-Validated-Log-Forging</SKU>
  <Name><![CDATA[Validated-Log-Forging]]></Name>
  <Version>1.0</Version>
  <Description><![CDATA[Validated-Log-Forging]]></Description>
  <Rules version="3.14">
    <RuleDefinitions>
      <DataflowCleanseRule formatVersion="3.14" language="java">
        <RuleID>DDAB5D73-8CF6-45E0-888C-EEEFBEFF2CD5</RuleID>
        <TaintFlags>+VALIDATED_LOG_FORGING</TaintFlags>
        <FunctionIdentifier>
          <NamespaceName>
            <Pattern/>
          </NamespaceName>
          <ClassName>
            <Pattern>Util</Pattern>
          </ClassName>
          <FunctionName>
            <Pattern>replaceNewLine</Pattern>
          </FunctionName>
          <ApplyTo implements="true" overrides="true" extends="true"/>
        </FunctionIdentifier>
        <OutArguments>return</OutArguments>
      </DataflowCleanseRule>
    </RuleDefinitions>
  </Rules>
</RulePack> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-12T05:57:44.960

Alina，我实际上是您用来解决日志注入问题的文章的作者。希望对您有所帮助。

Vitaly 在 Fortify 方面是正确的。您需要构建 Fortify 所谓的“自定义规则”。

这可能是一个数据流清理规则。一个基本的例子可以在这里找到：[http](http://web.archive.org/web/20150125023230/http://www.cigital.com:80/newsletter/2009-11-tips.php) ://www.cigital.com/newsletter/2009-11-tips.php 。如果您拥有 Fortify，您的产品文档中应该有一个自定义规则编写指南。

我不知道您将使用什么污染标志，但它看起来像“-LOG_FORGING”。每当数据通过您的实用程序方法时，您基本上会编写一条规则来删除日志伪造“污点”。Fortify 将假设通过那里的任何数据现在都可以安全地写入日志，并且不会导致日志伪造。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T07:42:24.270

您需要在 Fortify 中将 replaceNewLine 标记为消毒剂（如果我没记错的话），它将停止报告该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T18:55:05.123

您实际上可以从特定方法创建新规则。

完成扫描后，导航到审计工作台右侧的功能。找到您的消毒方法并右键单击它。

您可以从中生成规则。你想要的是一个通用的 DataflowCleanseRule。

我只是根据上面发布的 xml 做的。您可以将规则保存为 .xml 文件。更新扫描时，您可以传递 -rule 参数并指向 .xml 文件。

# javascript - 如何为平铺网格中的元素实现单击功能，当单击它时，它的邻近元素会淡出

> ID：12784713
> 
> 赞同：0
> 
> 时间：2012-10-08T15:25:46.060
> 
> 标签：javascript, jquery

我正在尝试制作一个相当简单的网格游戏，用户必须单击图块才能显示下面的内容。我正在努力解决的第一个问题是实现一个单击功能，该功能不仅可以删除单击的图块，还可以删除它周围的一些图块，最好是随机的。

我当前的代码：

```
 $('.layer img').click(function() {
            $(this).css ('display', 'none');
        }); 
```

非常感谢扩展我的简单代码的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:34:38.750

您可以计算兄弟姐妹并随机隐藏其中一些，如下所示：

```
$('.layer img').click(function() {
     sib = $(this).siblings();
     rand = Math.floor((Math.random()*sib.length)+1);
     for (i=0;i<rand;i++) {
        sib.eq(i).css ('display', 'none');
     }
     $(this).css ('display', 'none');
}); 
```

正如OP所评论的那样，我在这里添加了增强版本，以随机选择上一个或下一个兄弟姐妹，总共最多5个：

```
$('.layer img').click(function() {
         sib = $(this).siblings();
         rand = Math.floor((Math.random()*sib.length)+1);
         rand = Math.min(5,rand);
         aprev = $(this);
         anext = $(this);
         for (i=0;i<rand;i++) {
            if (Math.floor((Math.random()*2)+1) == 1 ) { //random go prev or next
               if (aprev.prev().length) {
                  aprev = aprev.prev();
                  aprev.css ('display', 'none');
               } else {
                  anext = anext.next();
                  anext.css ('display', 'none');
               }
            } else {
               if (anext.next().length) {
                  anext = anext.next();
                  anext.css ('display', 'none');
               } else {
                  aprev = aprev.prev();
                  aprev.css ('display', 'none');
               }
            }
         }
         $(this).css ('display', 'none');
    }); 
```

代码增长了一点，因为我们必须控制是否没有更多的前一个或下一个兄弟姐妹，在这种情况下恢复到另一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:16:41.257

If what you really need is something entirely more complex and with more control take a look at this example (pure javascript)

[http://jsfiddle.net/FgQQg/1/](http://jsfiddle.net/FgQQg/1/)

# jquery - 将多类添加到 div

> ID：12784719
> 
> 赞同：-2
> 
> 时间：2012-10-08T15:26:01.653
> 
> 标签：jquery

我写了这个脚本来 ckech div hover。悬停在 div 上后，我想将 div 的类更改为多类

```
$('#chkm').hover(function(){ 
    $('#chkm').addClass(".main-quiz-holder .slide-container #hdiv");
}); 
```

我的分区：

```
<div style='float: right;' id='mdiv' >
  <ul class="styledlist" >
     <img src='images/system_help.png' id='ckekeKala' width='18px'/>
  </ul>
</div> 
```

我的CSS：

```
.main-quiz-holder .slide-container #mdiv {
    cursor: pointer;
    padding: 6px 10px;
    margin: 5px 5px;
    font-size:11px;
    color: rgb(76, 76, 76);
    border-radius: 4px 4px 4px 4px;
    text-shadow: 0px 1px 0px rgba(255, 255, 255, 0.3);
    box-shadow: 0px 0px 0px 1px rgba(255, 255, 255, 0.2) inset, 0px 0px 6px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 2px rgba(0, 0, 0, 0.4);
    background: -moz-linear-gradient(center top , rgb(246, 246, 246), rgb(212, 212, 212)) repeat scroll 0% 0% rgb(246, 246, 246);
    border: 1px solid rgb(161, 161, 161);
}
.main-quiz-holder .slide-container #hdiv {
    background: #ebe9f9; 
    background: -moz-linear-gradient(top, #ebe9f9 0%, #d8d0ef 50%, #cec7ec 51%, #c1bfea 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ebe9f9), color-stop(50%,#d8d0ef), color-stop(51%,#cec7ec), color-stop(100%,#c1bfea));
    background: -webkit-linear-gradient(top, #ebe9f9 0%,#d8d0ef 50%,#cec7ec 51%,#c1bfea 100%);
    background: -o-linear-gradient(top, #ebe9f9 0%,#d8d0ef 50%,#cec7ec 51%,#c1bfea 100%); 
    background: -ms-linear-gradient(top, #ebe9f9 0%,#d8d0ef 50%,#cec7ec 51%,#c1bfea 100%); 
    background: linear-gradient(to bottom, #ebe9f9 0%,#d8d0ef 50%,#cec7ec 51%,#c1bfea 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ebe9f9', endColorstr='#c1bfea',GradientType=0 ); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:27:42.700

从类名中去掉点，因为[`.addClass`](http://api.jquery.com/addClass/)类名是字符串（而不是选择器）。

```
$('#chkm').addClass("main-quiz-holder slide-container"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:27:42.480

你不能`.`在`addClass()`函数中使用

```
$('#chkm').hover(function(){ 
    $('#chkm').addClass("main-quiz-holder");
}); 
```

这两个类或一个 div 具有相同的 css，而不需要全部添加它们。使用单个也可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:28:01.837

这个应该不错

```
$('#chkm').addClass("main-quiz-holder slide-container #hdiv"); 
```

这 。添加或删除类名时不需要点。仅在尝试将其用作选择器时才需要。

# iphone - 将 ImageScrollView 中的图像保存在照片库中

> ID：12784725
> 
> 赞同：0
> 
> 时间：2012-10-08T15:26:09.680
> 
> 标签：iphone, uiscrollview, uiimageview, ios6

当用户长按图像视图时，我如何将来自此滚动视图的图像保存在照片库中。

收到声明的黄色警告

```
 UIImageWriteToSavedPhotosAlbum(_imageScrollView, self, nil, nil); 
```

如何解决此警告以将图像保存在照片库中

```
- (void)viewDidLoad

{    self.view.backgroundColor = [UIColor blackColor];
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
   imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;
    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
    UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                               initWithTarget:self
                                               action:@selector(handleLongPress:)];
    gestureRecognizer.minimumPressDuration = 2.0;
     imageScrollView.userInteractionEnabled = YES;
     [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];
    [imageScrollView addSubview:imageView];
    [imageScrollView addSubview:myButton];

}
imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);

[self.view addSubview:imageScrollView];
[imageScrollView release];
}

- (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{

if (gestureRecognizer.state == UIGestureRecognizerStateEnded){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [actionSheet showInView:self.view];
    [actionSheet release];

}

}

    -(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
switch (buttonIndex) {
    case 0:
        UIImageWriteToSavedPhotosAlbum(_imageScrollView, self, nil, nil);

        break;

    default:
        break;
}
} 
```

在此声明中收到黄色警告

```
 UIImageWriteToSavedPhotosAlbum(_imageScrollView, self, nil, nil); 
```

那`incompatible pointer types passing UIScrollView to parameter of type UIImage`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:36:37.997

看到这个：[保存图像](http://www.iphonedevsdk.com/forum/iphone-sdk-development/19584-saving-image-in-photo-gallary.html) 和这个：[下载和保存图像](http://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in-iphone-sdk/)

但是这个有很好的评价[。回答](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)

# php - 具有动态内容的网站是否真的需要停止浏览器缓存？

> ID：12784738
> 
> 赞同：0
> 
> 时间：2012-10-08T15:26:43.137
> 
> 标签：php, html, caching

在处理动态内容时，我们总是将 nocache 添加到我们的元标头中，但是现在我们使用的是 html5，旧的 nocache 元标记现在无效，我们需要通过 php 标头来处理它。这让我开始思考，为什么我们甚至需要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:29:15.263

可以缓存静态内容，例如图像、文档和字体。

不应缓存动态内容，因为这会向用户呈现过时的视图。

请注意，页面总是包含大量静态内容以及少量动态内容。

# php - 使用 xpath 生成 php xml

> ID：12784741
> 
> 赞同：0
> 
> 时间：2012-10-08T15:26:51.843
> 
> 标签：php, xml, xpath

我写了一个小辅助函数来使用 xpath 进行基本的搜索替换，因为我发现很容易编写非常简短的操作，同时易于阅读和理解。

代码：

```
<?php
function xml_search_replace($dom, $search_replace_rules) {
    if (!is_array($search_replace_rules)) {
        return;
    }

    $xp = new DOMXPath($dom);

    foreach ($search_replace_rules as $search_pattern => $replacement) {
        foreach ($xp->query($search_pattern) as $node) {
            $node->nodeValue = $replacement;
        }
    }
} 
```

问题是现在我需要对 XML dom 的不同部分进行不同的“搜索/替换”。我曾希望像下面这样的东西会起作用，但是 DOMXPath 不能使用 DOMDocumentFragment :(

下面示例的第一部分（直到 foreach 循环）就像一个魅力。我正在寻找另一种解决方法的灵感，这种方法仍然简短易读（没有太多样板）。

代码：

```
<?php
$dom = new DOMDocument;
$dom->loadXml(file_get_contents('container.xml'));
$payload = $dom->getElementsByTagName('Payload')->item(0);

xml_search_replace($dom, array('//MessageReference' => 'SRV4-ID00000000001'));

$payloadXmlTemplate = file_get_contents('payload_template.xml');
foreach (array(array('id' => 'some_id_1'),
               array('id' => 'some_id_2')) as $request) {
    $fragment = $dom->createDocumentFragment();
    $fragment->appendXML($payloadXmlTemplate);
    xml_search_replace($fragment, array('//PayloadElement' => $request['id']));

    $payload->appendChild($fragment);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:25:47.033

感谢弗朗西斯阿维拉，我想出了以下几点：

```
<?php
function xml_search_replace($node, $search_replace_rules) {
    if (!is_array($search_replace_rules)) {
        return;
    }

    $xp = new DOMXPath($node->ownerDocument);

    foreach ($search_replace_rules as $search_pattern => $replacement) {
        foreach ($xp->query($search_pattern, $node) as $matchingNode) {
            $matchingNode->nodeValue = $replacement;
        }
    }
}

$dom = new DOMDocument;
$dom->loadXml(file_get_contents('container.xml'));
$payload = $dom->getElementsByTagName('Payload')->item(0);

xml_search_replace($dom->documentElement, array('//MessageReference' => 'SRV4-ID00000000001'));

$payloadXmlTemplate = file_get_contents('payload_template.xml');
foreach (array(array('id' => 'some_id_1'),
               array('id' => 'some_id_2')) as $request) {
    $fragment = $dom->createDocumentFragment();
    $fragment->appendXML($payloadXmlTemplate);
    xml_search_replace($payload->appendChild($fragment),
                       array('//PayloadElement' => $request['id']));
} 
```

# java-me - J2ME NoClassDefFoundError com.sun.midp.io.properties

> ID：12784750
> 
> 赞同：2
> 
> 时间：2012-10-08T15:27:18.783
> 
> 标签：java-me

我的 J2ME 应用程序使用类：com/sun/midp/io/Properties

当我尝试在诺基亚 C3 或三星上安装它时

我在手机中看到此错误：No Class Def Found Error java/lang/NoClassDefFoundError com/sun/midp/io/Properties

示例代码：

```
Properties p = new Properties();
int s = p.size(); 
```

但它适用于 LG

我该如何解决这个问题。我试图将包含该类的 jsr 添加到我的应用程序中，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:44:40.233

Sun 提供的课程受许可条款的约束，这可能就是为什么它们并未出现在所有移动平台上的原因。此外，JVM 类和组件因平台而异，因为它们涵盖不同的设备配置和功能。你不能解决这个问题。

# facebook - 链接器错误：Xcode 4.5 和 ShareKit 2.0 上 libShareKit.a 中的 CFHTTP 请求方法

> ID：12784757
> 
> 赞同：3
> 
> 时间：2012-10-08T15:27:35.560
> 
> 标签：facebook, ios6, sharekit, xcode4.5, fbrequest-form

我尝试将 sharekit 2.0 集成到我的应用程序中，并将新的 ShareKit 2.0 作为子模块安装在我的本地 Git 存储库中。我想我已经正确地遵循了安装说明，但是我在“ `smoke test`”上收到了 18 个链接器错误。

这里有一些错误：

```
Undefined symbols for architecture i386:
  "_CFHTTPMessageCopyHeaderFieldValue", referenced from:
      -[LFHTTPRequest(PrivateMethods) readStreamHasBytesAvailable] in libShareKit.a(LFHTTPRequest.o)
      -[LFHTTPRequest(PrivateMethods) readStreamEndEncountered] in libShareKit.a(LFHTTPRequest.o) 
```

如指示所示，我已在构建阶段中的`libShareKit.a`“”下包含。`Link Binary with Libraries`它显示为红色，如果这意味着什么。

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:31:54.947

请添加 CFNetwork、CoreLocation 和 Twitter 框架并重建您的应用程序。

# loops - While 循环 while(1) vs while(3) 或任何数字

> ID：12784763
> 
> 赞同：1
> 
> 时间：2012-10-08T15:27:50.453
> 
> 标签：loops, while-loop, do-while

使用 while 循环时，写入`while(1)`与任何其他数字相比意味着什么？

在我的程序`while(1)`中给了我相同的答案`while(3)`

```
int num1;
int loopcount;

while(1) {
    printf("enter your positive number:");
    scanf("%d",&num1);
    if(num1>0) {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:29:07.970

在 C 中，除条件语句之外的任何整数值`0`都被视为`true`条件语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:29:58.220

在 C 语言中，0 在某些情况下可能表示“假”，非零表示“真”。

# cordova - 基于 phonegap 的应用程序可以自行启动任务吗？

> ID：12784764
> 
> 赞同：0
> 
> 时间：2012-10-08T15:27:52.547
> 
> 标签：cordova

我打算使用phonegap来开发一个应用程序。我的要求是通过互联网检查某些东西的状态，然后如果检测到更改，然后向用户报告。在 Android 中，我通过编写一个后台服务来实现这一点，该服务在每天早上 10:00 被调用。

这是我们可以用 phonegap 框架做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:57:48.317

如果没有本机功能，您将无法做到这一点。在 Android 上，您的方法可以正常工作；如有必要，您可以编写一个小插件来注册/注销您的服务。

但是，在 iOS 上，您应该为此目的使用推送通知服务。设置一个简单的服务器端脚本，定期检查目标 URL 并将结果缓存在例如 HTML 文件中。如果新文件与缓存文件不同，请调用推送通知服务。

我已经为一些应用程序这样做了。为了保持简单并避免自己不得不深入研究 Objective-C，您可以使用例如[UrbanAirship](http://urbanairship.com)及其[PhoneGap 插件](https://github.com/urbanairship/phonegap-ua-push)来为您处理通知。

# c - 检查子字符串是否存在于C中的字符串中

> ID：12784766
> 
> 赞同：209
> 
> 时间：2012-10-08T15:28:00.250
> 
> 标签：c, string

我正在尝试检查字符串是否包含 C 中的子字符串，例如：

```
char *sent = "this is my sample example";
char *word = "sample";
if (/* sentence contains word */) {
    /* .. */
} 
```

`string::find`在 C++ 中可以使用什么来代替？

* * *

## 回答 #1

> 赞同：332
> 
> 时间：2012-10-08T15:30:23.003

```
if(strstr(sent, word) != NULL) {
    /* ... */
} 
```

请注意，如果找到`strstr`单词，则返回指向单词开头的指针。`sent``word`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-08T15:30:40.023

用于`strstr`此。

[http://www.cplusplus.com/reference/clibrary/cstring/strstr/](http://www.cplusplus.com/reference/clibrary/cstring/strstr/)

所以，你会这样写..

```
char *sent = "this is my sample example";
char *word = "sample";

char *pch = strstr(sent, word);

if(pch)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-02T11:57:03.207

尝试使用指针...

```
#include <stdio.h>
#include <string.h>

int main()
{

  char str[] = "String1 subString1 Strinstrnd subStr ing1subString";
  char sub[] = "subString";

  char *p1, *p2, *p3;
  int i=0,j=0,flag=0;

  p1 = str;
  p2 = sub;

  for(i = 0; i<strlen(str); i++)
  {
    if(*p1 == *p2)
      {
          p3 = p1;
          for(j = 0;j<strlen(sub);j++)
          {
            if(*p3 == *p2)
            {
              p3++;p2++;
            } 
            else
              break;
          }
          p2 = sub;
          if(j == strlen(sub))
          {
             flag = 1;
            printf("\nSubstring found at index : %d\n",i);
          }
      }
    p1++; 
  }
  if(flag==0)
  {
       printf("Substring NOT found");
  }
return (0);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-05T12:17:58.617

您可以尝试这个来查找子字符串的存在并提取和打印它：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char mainstring[]="The quick brown fox jumps over the lazy dog";
    char substring[20], *ret;
    int i=0;
    puts("enter the sub string to find");
    fgets(substring, sizeof(substring), stdin);
    substring[strlen(substring)-1]='\0';
    ret=strstr(mainstring,substring);
    if(strcmp((ret=strstr(mainstring,substring)),substring))
    {
        printf("substring is present\t");
    }
    printf("and the sub string is:::");

    for(i=0;i<strlen(substring);i++)
    {
            printf("%c",*(ret+i));

    }
    puts("\n");
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-14T02:18:01.203

我自己谦虚（区分大小写）的解决方案：

```
uint8_t strContains(char* string, char* toFind)
{
    uint8_t slen = strlen(string);
    uint8_t tFlen = strlen(toFind);
    uint8_t found = 0;

    if( slen >= tFlen )
    {
        for(uint8_t s=0, t=0; s<slen; s++)
        {
            do{

                if( string[s] == toFind[t] )
                {
                    if( ++found == tFlen ) return 1;
                    s++;
                    t++;
                }
                else { s -= found; found=0; t=0; }

              }while(found);
        }
        return 0;
    }
    else return -1;
} 
```

结果

```
strContains("this is my sample example", "th") // 1
strContains("this is my sample example", "sample") // 1
strContains("this is my sample example", "xam") // 1
strContains("this is my sample example", "ple") // 1
strContains("this is my sample example", "ssample") // 0
strContains("this is my sample example", "samplee") // 0
strContains("this is my sample example", "") // 0
strContains("str", "longer sentence") // -1
strContains("ssssssample", "sample") // 1
strContains("sample", "sample") // 1 
```

在 ATmega328P (avr8-gnu-toolchain-3.5.4.1709) 上测试；)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-26T22:27:43.223

以下是如何报告找到的子字符串中第一个字符的位置：

替换上面代码中的这一行：

```
printf("%s",substring,"\n"); 
```

和：

```
printf("substring %s was found at position %d \n", substring,((int) (substring - mainstring))); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-13T02:55:49.830

这段代码在不使用任何现成函数的情况下实现了搜索工作方式的逻辑（其中一种方式）：

```
public int findSubString(char[] original, char[] searchString)
{
    int returnCode = 0; //0-not found, -1 -error in imput, 1-found
    int counter = 0;
    int ctr = 0;
    if (original.Length < 1 || (original.Length)<searchString.Length || searchString.Length<1)
    {
        returnCode = -1;
    }

    while (ctr <= (original.Length - searchString.Length) && searchString.Length > 0)
    {
        if ((original[ctr]) == searchString[0])
        {
            counter = 0;
            for (int count = ctr; count < (ctr + searchString.Length); count++)
            {
                if (original[count] == searchString[counter])
                {
                    counter++;
                }
                else
                {
                    counter = 0;
                    break;
                }
            }
            if (counter == (searchString.Length))
            {
                returnCode = 1;
            }
        }
        ctr++;
    }
    return returnCode;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-09-26T09:18:51.250

使用这个更简单的代码也可以达到同样的效果：为什么使用这些：

```
int main(void)
{

    char mainstring[]="The quick brown fox jumps over the lazy dog";
    char substring[20];
    int i=0;
    puts("enter the sub stirng to find");
    fgets(substring, sizeof(substring), stdin);
    substring[strlen(substring)-1]='\0';
    if (strstr(mainstring,substring))
    {
            printf("substring is present\t");
    }
    printf("and the sub string is:::");
    printf("%s",substring,"\n");
   return 0;
} 
```

但棘手的部分是报告子字符串在原始字符串中的哪个位置开始......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-15T02:56:22.977

我相信我有最简单的答案。您不需要此程序中的 string.h 库，也不需要 stdbool.h 库。简单地使用指针和指针算法将帮助你成为一个更好的 C 程序员。

只需返回 0 表示 False（未找到子字符串），或 1 表示 True（是的，在整个字符串“str”中找到子字符串“sub”）：

```
#include <stdlib.h>

int is_substr(char *str, char *sub)
{
  int num_matches = 0;
  int sub_size = 0;
  // If there are as many matches as there are characters in sub, then a substring exists.
  while (*sub != '\0') {
    sub_size++;
    sub++;
  }

  sub = sub - sub_size;  // Reset pointer to original place.
  while (*str != '\0') {
    while (*sub == *str && *sub != '\0') {
      num_matches++;
      sub++;
      str++;
    }
    if (num_matches == sub_size) {
      return 1;
    }
    num_matches = 0;  // Reset counter to 0 whenever a difference is found. 
    str++;
  }
  return 0;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-31T03:49:00.207

**使用 C - 没有内置函数**

string_contains() 完成所有繁重的工作并返回基于 1 的索引。其余的是驱动程序和帮助程序代码。

分配一个指向主串和子串的指针，匹配时增加子串指针，当子串指针等于子串长度时停止循环。

read_line() - 一些额外的代码，用于在不预先定义用户应该提供的输入大小的情况下读取用户输入。

```
#include <stdio.h>
#include <stdlib.h>

int string_len(char * string){
  int len = 0;
  while(*string!='\0'){
    len++;
    string++;
  }
  return len;
}

int string_contains(char *string, char *substring){
  int start_index = 0;
  int string_index=0, substring_index=0;
  int substring_len =string_len(substring);
  int s_len = string_len(string);
  while(substring_index<substring_len && string_index<s_len){
    if(*(string+string_index)==*(substring+substring_index)){
      substring_index++;
    }
    string_index++;
    if(substring_index==substring_len){
      return string_index-substring_len+1;
    }
  }

  return 0;

}

#define INPUT_BUFFER 64
char *read_line(){
  int buffer_len = INPUT_BUFFER;
  char *input = malloc(buffer_len*sizeof(char));
  int c, count=0;

  while(1){
    c = getchar();

    if(c==EOF||c=='\n'){
      input[count]='\0';
      return input;
    }else{
      input[count]=c;
      count++;
    }

    if(count==buffer_len){
      buffer_len+=INPUT_BUFFER;
      input = realloc(input, buffer_len*sizeof(char));
    }

  }
}

int main(void) {
  while(1){
    printf("\nEnter the string: ");
    char *string = read_line();
    printf("Enter the sub-string: ");
    char *substring = read_line(); 
    int position = string_contains(string,substring);
    if(position){ 
      printf("Found at position: %d\n", position);
    }else{
      printf("Not Found\n");
    }
  }
  return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-09T20:06:58.087

```
My code to find out if substring is exist in string or not 
// input ( first line -->> string , 2nd lin ->>> no. of queries for substring
following n lines -->> string to check if substring or not..

#include <stdio.h>
int len,len1;
int isSubstring(char *s, char *sub,int i,int j)
{

        int ans =0;
         for(;i<len,j<len1;i++,j++)
        {
                if(s[i] != sub[j])
                {
                    ans =1;
                    break;
                }
        }
        if(j == len1 && ans ==0)
        {
            return 1;
        }
        else if(ans==1)
            return 0;
return 0;
}
int main(){
    char s[100001];
    char sub[100001];
    scanf("%s", &s);// Reading input from STDIN
    int no;
    scanf("%d",&no);
    int i ,j;
    i=0;
    j=0;
    int ans =0;
    len = strlen(s);
    while(no--)
    {
        i=0;
        j=0;
        ans=0;
        scanf("%s",&sub);
        len1=strlen(sub);
        int value;
        for(i=0;i<len;i++)
        {
                if(s[i]==sub[j])
                {
                    value = isSubstring(s,sub,i,j);
                    if(value)
                    {
                        printf("Yes\n");
                        ans = 1;
                        break;
                    }
                }
        }
        if(ans==0)
            printf("No\n");

    }
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-03-25T06:40:04.713

```
#include <stdio.h>
#include <string.h>

int findSubstr(char *inpText, char *pattern);
int main()
{
    printf("Hello, World!\n");
    char *Text = "This is my sample program";
    char *pattern = "sample";
    int pos = findSubstr(Text, pattern);
    if (pos > -1) {
        printf("Found the substring at position %d \n", pos);
    }
    else
        printf("No match found \n");

    return 0;
}

int findSubstr(char *inpText, char *pattern) {
    int inplen = strlen(inpText);
    while (inpText != NULL) {

        char *remTxt = inpText;
        char *remPat = pattern;

        if (strlen(remTxt) < strlen(remPat)) {
            /* printf ("length issue remTxt %s \nremPath %s \n", remTxt, remPat); */
            return -1;
        }

        while (*remTxt++ == *remPat++) {
            printf("remTxt %s \nremPath %s \n", remTxt, remPat);
            if (*remPat == '\0') {
                printf ("match found \n");
                return inplen - strlen(inpText+1);
            }
            if (remTxt == NULL) {
                return -1;
            }
        }
        remPat = pattern;

        inpText++;
    }
} 
```

# mysql - 蛋糕php Api中的MySql查询

> ID：12784767
> 
> 赞同：0
> 
> 时间：2012-10-08T15:28:00.157
> 
> 标签：mysql, cakephp-2.1

对于数据检索，我需要在 mysql 中使用**二进制**关键字进行区分大小写的搜索，这是我要进行的查询

```
 SELECT username FROM users 
WHERE  BINARY first_name LIKE 'eph%'
OR     BINARY last_name LIKE 'eph%'
OR      BINARY username LIKE 'eph%' 
```

这是我在 cakephp 中没有二进制的查询

```
$this->User->find('list', array(
            'fields' => array('User.username'),
            'conditions' => array("OR" => 
                            array("BINARY User.last_name LIKE" => $search_data."%","BINARY User.username LIKE" => $search_data."%",
                                    "BINARY User.first_name LIKE" => $search_data."%"))
                                            )); 
```

任何 1 都可以帮助我使用 cakephp api 进行二进制查询 ....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:35:21.007

好的……你快到了。只需将 Field 放在括号中，告诉 CakePHP 不要将 BINARY 关键字作为字段名来处理

相信这应该有效：

```
$this->User->find('list', array(
        'fields' => array('User.username'),
        'conditions' => array(
                       "OR" =>array(
                                "BINARY (`User`.`last_name`) LIKE" => $search_data."%",
                                "BINARY (`User`.`username`) LIKE" => $search_data."%",        
                                "BINARY (`User`.`first_name`) LIKE" => $search_data."%"))
                           )); 
```

# c++ - 不同对象作为同一函数的参数

> ID：12784773
> 
> 赞同：1
> 
> 时间：2012-10-08T15:28:17.953
> 
> 标签：c++, oop, templates, object, parameter-passing

是否可以将不同的对象作为 1 个函数的参数传递，而不是创建 3 个函数

IE

```
void someFunction(Object o) {
     //working with object, all that objects have same fields to work with
     // i.e. all objects have x, y fields and this function is working with it
}

Player pl;
Item itm;
Block bl;

someFunction(pl);
someFunction(itm);
someFunction(bl); 
```

也许可以使用模板或什么来完成？我不想为不同的对象使用相同的代码制作 3 个函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:31:30.387

是的，使用模板：

```
template<class Type> void someFunction(const Type& o) {
     //working with object, all that objects have same fields to work with
     // i.e. all objects have x, y fields and this function is working with it
} 
```

请注意，您可能更喜欢`o`按 const 引用而不是按值传递。我在这里做了这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:30:55.000

是的，模板应该可以工作：

```
template <typename T>
void someFunction(T & o)
{
    // use o.x, o.y, o.z
} 
```

您可以通过引用或 const-reference 传递，具体取决于您是否要修改原始对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:32:27.493

模板可以用作一类类型的别名。以下将允许任何类型通过`f`.

```
template <typename T> void f(T & t) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T15:41:51.513

模板应该可以工作，但如果不考虑 SFINAE，您不能保证所有给定的对象都有一些字段。

另一个解决方案可能是继承[一些示例代码](http://ideone.com/RAZyZ)：

```
struct Foo
{
    int x;
    int y;
};

struct Bar: public Foo
{
    int another_x;
};

struct Baz: public Foo
{
    int another_y;
};

void someFunction(const Foo &foo)
{
    std::cout << foo.x << '\n';
    std::cout << foo.y << '\n';
}; 
```

使用这种方法，您可以确保所有给定对象都具有所需的成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T15:32:51.980

您可以使用模板或多态性（可能是具有虚拟方法的父接口来获取和设置相关字段）来做到这一点。

模板可以工作并且可能会得到很好的优化，但不允许以后传入新对象，无论它们是否具有相同的字段。您将能够编译新代码和新对象以使用模板函数，但现有调用将停留在单一类型上。

使用父接口和虚拟方法，然后让你的函数调用这些方法（可能是 getter 和 setter）来处理字段操作将在以后提供更多的自由，但代价是运行时间稍长并且必须从该接口继承（它会，但是，允许在任何时候将新对象传递给函数，只要它们实现了接口）。

# java - 使用正则表达式，是否可以在同一范围内同时使用“is”和“is not”范围定义？

> ID：12784774
> 
> 赞同：5
> 
> 时间：2012-10-08T15:28:22.650
> 
> 标签：java, regex

**注意：我正在使用 3rd 方应用程序，它使用正则表达式进行搜索，它有自己的风格，但几乎总是像 java 的正则表达式风格一样工作。**当然，这可能无关紧要。

在搜索了同一个问题的许多不同方式（措辞很多）之后，我没有看到任何教程、示例，甚至没有提到是否可以同时使用“是”（肯定的？）和“不是”（负？）定义在同一范围内。

我现在无法在应用程序中运行示例以查看我的想法是否有效，因为正在搜索的数据量很大，并且会搞砸它已经收集的匹配项。我只是因为这个才问的。

以下是我认为可能有效但导致测试人员行为怪异的示例：

```
[\w^\s<>.!?]{2}
[\w|^\s<>.!?]{2} 
```

我宁愿让它按照我认为第一个工作的方式工作（任何数字、小写或大写字符，或其他不是空格的普通字符，>、<、句点、！或？）而不是第二个只有 or 运算符。

我使用的正则表达式测试器给了我不同的时髦结果，这让我感到困惑。

**另请注意：我在捕获组中使用它，然后是捕获所有匹配项，我可能会或可能不会正确使用它。因此，如果您想包括如何遵循我正在尝试的内容以及如何正确地做到这一点，请随意。我主要只是好奇这是否可能，或者这是一个不正确的方法。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:31:23.643

为什么你需要`\w`呢？

```
[^\s<>.!?]{2} 
```

这已经匹配所有字母数字字符，因为它们既不是空格也不是您提到的任何标点符号。

通常，您*可以* 在某种程度上减去字符类，例如，要匹配不包括数字的字母数字，您可以这样做

```
[^\W\d] 
```

因为`[^\W]`与 , 匹配相同`\w`，并`\d`从中减去，因为它在否定字符类中。

**编辑：**

一些正则表达式引擎（如 XPath、.NET 和 JGSoft）允许灵活的字符类减法，如下所示：

```
[a-z-[e-g]] 
```

匹配范围内的任何字符，`[a-z]`不包括和。但是Java没有这个特性。`e``f``g`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:36:56.313

另一种可能性是使用两个范围并将它们组合起来；例如

```
([\w]|[^\s<>.!?]){2} 
```

但是，这确实提出了您在此处实际要表达的内容的问题。因为这个例子（因为我已经重写了它）没有多大意义。

它所说的是“一个单词字符，或任何不是空格或某些标点符号的字符”。但是不是“空格或某些标点符号”的字符类别已经包括所有单词字符。因此，除非您的意思有所不同，否则 the`\w`是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:33:33.650

从您的问题来看，看起来**没有空格的**正则表达式可以满足您的需求，您可以通过以下方式实现：

```
[\S]{2} 
```

# asp.net - 我仍然没有得到 HMAC 或签署请求的工作原理

> ID：12784775
> 
> 赞同：2
> 
> 时间：2012-10-08T15:28:23.927
> 
> 标签：asp.net, security, hmac

我在 ASP.NET 上工作，只是从亚马逊目录[http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)中读取它

> 非正式地，我们将此过程称为“签名请求”，我们将 HMAC 算法的输出称为“签名”，因为它模拟了真实签名的安全属性。最后，使用本节中描述的语法将此签名添加为请求的参数。
> 
> 当系统接收到经过身份验证的请求时，它会获取您声称拥有的 AWS 秘密访问密钥，并以相同的方式使用它来计算它收到的消息的“签名”。然后它将计算的签名与请求者提供的签名进行比较。

但我认为这两个请求都不一样。请求已签名（太好了！！）但是来自客户端浏览器的响应的 HMAC 会有所不同，因为它包含额外的数据，对吗？那么即使它们是有效的，请求如何验证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:34:01.060

你需要阅读你引用的所有段落。就在您引用的那篇文章之前，它说：

> 要对请求进行身份验证，您首先连接请求的选定元素以形成一个字符串。然后，您使用您的 AWS 秘密访问密钥来计算该字符串的 HMAC。

因此，您根据这些选定的元素计算 HMAC，当您提交请求时，服务器会根据这些相同的元素计算 HMAC，然后将它们进行比较。

# c# - MVC3 - 服务引用

> ID：12784785
> 
> 赞同：0
> 
> 时间：2012-10-08T15:28:59.110
> 
> 标签：c#, asp.net-mvc-3, web-services

我们的 MVC3 应用程序有一个 Web 服务，它与我们的 Oracle 数据库通信。在调试时，我使用 Web.Debug.config 文件指向连接到我们的开发数据库的开发服务器上的副本（system.serviceModel->client->endpoint）。我们的 Web.Release.config 指向连接到生产数据库的实时服务器上的那个。

有时我们会修改开发 Web 服务以测试新功能。

我的问题是，当我想发布到实时服务器时，如果我们在 Web 服务的开发副本中有不同的功能，我是否需要在发布之前刷新我的项目中的服务引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:31:57.783

我认为这个问题的答案取决于变化是什么。

如果更改只是“幕后”的功能并且不影响界面（即方法名称和参数），那么您可能不需要刷新。

如果添加了新方法，或者参数更改了类型，或者接受或返回了新类型，那么您将需要刷新。

# c++ - while((Status.health !0) && (Wolves.health !0) ) 预期表达式“)”中的错误

> ID：12784786
> 
> 赞同：2
> 
> 时间：2012-10-08T15:28:59.690
> 
> 标签：c++, boolean-logic, boolean-expression

嘿，我有一个错误：

```
while((Status.health !0) && (Wolves.health !0) ) 
```

谁能看到这有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:30:23.557

它在语法上不正确。

假设您要验证变量不等于零：

```
while((Status.health != 0) && (Wolves.health != 0) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T15:30:07.830

我猜你的意思是

```
while((Status.health != 0) && (Wolves.health != 0) ) 
```

# c# - C#从列表中删除重复项 >

> ID：12784788
> 
> 赞同：14
> 
> 时间：2012-10-08T15:29:13.563
> 
> 标签：c#, list, duplicates, removeall

例如，我无法想出最有效的算法来删除重复项`List<List<int>>`（我知道这看起来像一个列表`int[]`，但只是出于视觉目的这样做：

```
my_list[0]= {1, 2, 3};
my_list[1]= {1, 2, 3};
my_list[2]= {9, 10, 11};
my_list[3]= {1, 2, 3}; 
```

所以输出只是

```
new_list[0]= {1, 2, 3};
new_list[1]= {9, 10, 11}; 
```

如果您有任何想法，请告诉我。我真的很感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T15:37:48.030

建立自定义`EqualityComparer<List<int>>`：

```
public class CusComparer : IEqualityComparer<List<int>>
{
    public bool Equals(List<int> x, List<int> y)
    {
        return x.SequenceEqual(y);
    }

    public int GetHashCode(List<int> obj)
    {
        int hashCode = 0;

        for (var index = 0; index < obj.Count; index++)
        {
            hashCode ^= new {Index = index, Item = obj[index]}.GetHashCode();
        }

        return hashCode;
    }
} 
```

然后，您可以通过使用具有自定义比较器方法的[Distinct来获得结果：](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

```
var result = my_list.Distinct(new CusComparer()); 
```

**编辑：**

将索引包含在方法`GetHashCode`中以确保不同的订单不相​​等

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T15:40:39.503

这个简单的程序可以满足您的要求：

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            List<List<int>> lists = new List<List<int>>();

            lists.Add(new List<int> { 1, 2, 3 });
            lists.Add(new List<int> { 1, 2, 3 });
            lists.Add(new List<int> { 9, 10, 11 });
            lists.Add(new List<int> { 1, 2, 3 });

            var distinct = lists.Select(x => new HashSet<int>(x))
                    .Distinct(HashSet<int>.CreateSetComparer());

            foreach (var list in distinct)
            {
                foreach (var v in list)
                {
                    Console.Write(v + " ");
                }

                Console.WriteLine();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-08T15:40:51.310

```
 var finalList = lists.GroupBy(x => String.Join(",", x))
                         .Select(x => x.First().ToList())
                         .ToList(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-08T15:31:40.093

您可以使用[`Distinct`](http://msdn.microsoft.com/en-us/library/bb338049.aspx)带有比较器的 LINQ 重载。比较器应该查看列表是否相等。请注意，列表的默认 equals 操作不会执行您真正要查找的操作，因此比较器需要为您循环遍历每个操作。以下是此类比较器的示例：

```
public class SequenceComparer<T> : IEqualityComparer<IEnumerable<T>>
{
    IEqualityComparer<T> itemComparer;
    public SequenceComparer()
    {
        this.itemComparer = EqualityComparer<T>.Default;
    }

    public SequenceComparer(IEqualityComparer<T> itemComparer)
    {
        this.itemComparer = itemComparer;
    }

    public bool Equals(IEnumerable<T> x, IEnumerable<T> y)
    {
        if (object.Equals(x, y))
            return true;
        if (x == null || y == null)
            return false;
        return x.SequenceEqual(y, itemComparer);
    }

    public int GetHashCode(IEnumerable<T> obj)
    {
        if (obj == null)
            return -1;
        int i = 0;
        return obj.Aggregate(0, (x, y) => x ^ new { Index = i++, ItemHash = itemComparer.GetHashCode(y) }.GetHashCode());
    }
} 
```

**更新：**我想到了使用匿名类型从 Cuong Le 的答案中生成更好的哈希值，我对其进行了 LINQ 化并使其在我的课堂上工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-14T21:56:37.383

对于少量数据，比较器可能很有用，但如果您有 1000 个或更多 List>，那么尝试比较它们可能会开始花费很长时间。

我建议您改用您的数据来构建不同的树。树的构建会更快，当你完成后，你总是可以将你的数据带回你的旧数据结构中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-10T14:26:59.513

我想比较@Leniel Macaferi 和@LB 答案的性能，因为我不确定哪个性能更好，或者差异是否显着。事实证明，差异非常显着：

```
Method 1: 00:00:00.0976649 @Leniel Macaferi
Method 2: 00:00:32.0961650 @L.B 
```

这是我用来对它们进行基准测试的代码：

```
public static void Main(string[] args)
        {
            var list = new List<List<int>> {new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3,}, new List<int> {1, 2, 31, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 6}, new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 9, 10, 11, 1}, new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 9}, new List<int> {1, 2, 31, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 6, 7}, new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 9, 10, 11}, new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3,}, new List<int> {1, 2, 31, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 6}, new List<int> {1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3, 9, 10, 11}};

            var sw1 = new Stopwatch();
            sw1.Start();

            for (var i = 0; i < 1_000_000; i++)
            {
                var distinct = list.Select(x => new HashSet<int>(x)).Distinct(HashSet<int>.CreateSetComparer());
            }

            sw1.Stop();
            Console.WriteLine($"Method 1: {sw1.Elapsed}");

            var sw2 = new Stopwatch();
            sw2.Start();
            for (var i = 0; i < 1_000_000; i++)
            {
                var distinct = list.GroupBy(a => string.Join(",", a)).Select(a => a.First()).ToList();

            }
            sw2.Stop();
            Console.WriteLine($"Method 2: {sw2.Elapsed}");

            Console.ReadKey();
        } 
```

# android - 如何从 ArrayList 转换 到字符序列

> ID：12784790
> 
> 赞同：-1
> 
> 时间：2012-10-08T15:29:24.987
> 
> 标签：android, arraylist

我有以下声明

```
'ArrayList<CharSequence> veg = new ArrayList(Arrays.asList(getResources().getStringArray(R.array.vegs)));' 
```

如何转换回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:39:47.450

[ArrayList.toArray()](http://developer.android.com/reference/java/util/ArrayList.html#toArray%28T%5b%5d%29)可能是您正在寻找的。

尝试这个：

```
 ArrayList<CharSequence> veg = new ArrayList(Arrays.asList(getResources().getStringArray(R.array.vegs)));
    CharSequence[] vegs = new CharSequence[veg.size()]
    veg.toArray(vegs); 
```

# objective-c - 在 NSArray 中浮动

> ID：12784794
> 
> 赞同：0
> 
> 时间：2012-10-08T15:29:40.477
> 
> 标签：objective-c, casting, nsarray

我有一个 NSArray 的浮点数，我通过使用封装浮点数来完成

```
[NSNumber numberWithFloat:myFloat] ; 
```

然后我将该数组传递到其他地方，我需要将这些浮点数拉出数组并执行基本的算术运算。当我尝试

```
[myArray objectAtIndex:i] ; 
```

编译器抱怨我正在尝试对类型 ID 执行算术运算。它也不会让我投到浮动或加倍。

有任何想法吗？这似乎应该是一个简单的问题。也许它会在再喝一杯咖啡后来找我，但我们将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:33:23.240

您可以像这样拆箱浮动：

```
float f = [[myArray objectAtIndex:i] floatValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T07:00:40.570

您正在将浮点值转换为`NSNumber`对象并将其添加到`NSArray`. 所以您必须再次将`NSNumber`对象转换为浮点值。

```
NSNumber *number = [yourArray objectAtIndex:0];
float f = [number floatValue]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:35:16.647

因此从 NSNumber 对象中拆箱浮点值：

```
NSNumber *number = myArray[i];
float f = [number floatValue]; 
```

# php - 从mysql创建数组

> ID：12784797
> 
> 赞同：-2
> 
> 时间：2012-10-08T15:29:45.973
> 
> 标签：php, arrays

我在 mysql 中有列，其中有一些单词。
例如单词、狗、猫、树..

是否可以创建这样的 php 数组？

```
$array=array("word","dog","cat","tree"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:31:47.143

你可以简单地使用php`explode()`函数

```
$row=mysql_fetch_assoc($result);
or 
$row=$pdo->fetch(PDO::FETCH_ASSOC);

$newarray=explode(",",$row["data"]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T15:31:47.487

你的意思是你想用逗号分隔它们？使用[`explode`](http://php.net/explode)：

```
$items = explode(',', $columnValue); 
```

# uitextview - UITextView 不显示文字

> ID：12784802
> 
> 赞同：1
> 
> 时间：2012-10-08T15:29:58.140
> 
> 标签：uitextview

在我的 viewDidLoad 中，我可以让 UILabels 和 UITextFields 显示文本，但不能显示 UITextView。我在下面的代码中做错了吗？

```
- (void)viewDidLoad {

[super viewDidLoad];

UIView* headerWrapper = [[UIView alloc] init];

//tap gesture is for each section so we can click on it
UITapGestureRecognizer *headerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(showContent:)];

header = [[UIView alloc] initWithFrame: CGRectMake(10.0, 10.0, 738.0, 40.0)];
header.backgroundColor = [UIColor blackColor];

//get the header frame
CGRect headerFrame = header.frame;

//add the gesture
[headerWrapper addGestureRecognizer:headerTap];

//add a label
UILabel* lblSectionTitle = [[UILabel alloc] initWithFrame: CGRectMake(10.0, 3.0, headerFrame.size.width, 24.0)];
lblSectionTitle.text = @"This is a test";
lblSectionTitle.font = [UIFont fontWithName:@"Helvetica" size:20.0];
lblSectionTitle.textColor = [UIColor whiteColor];
lblSectionTitle.backgroundColor = [UIColor clearColor];
[header addSubview:lblSectionTitle];

[headerWrapper addSubview:header];

//this is the wrapper for the content
UIView* contentView = [[UIView alloc] initWithFrame:CGRectMake(10.0, headerFrame.size.height + 15.0, headerFrame.size.width, 200.0)];
contentView.backgroundColor = [UIColor redColor];

UITextView* tvContent = [[UITextView alloc] initWithFrame:CGRectMake(0.0, 0.0, headerFrame.size.width, 200.0)];
[tvContent setText:@"This is a content test."];
tvContent.textColor = [UIColor blackColor];
tvContent.backgroundColor = [UIColor clearColor];
tvContent.font = [UIFont fontWithName:@"Trebuchet" size:18.0];

[contentView addSubview:tvContent];
[headerWrapper addSubview:contentView];
[self.view addSubview:headerWrapper];

NSLog(@"%@", tvContent.text);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:47:02.070

我今天刚遇到这个问题并通过更改解决了它：

```
[tvContent setText:@"This is a content test."]; 
```

至

```
tvContent.text = @"This is a content test."; 
```

起初我认为问题在于没有加载我的 UITextView。但是在我确保它已在界面构建器中加载并连接之后（不是你的情况，因为你是以编程方式进行的），我只能通过直接归因而不是调用 setText 来设置它的内容。

希望能帮助到你！

# three.js - 从四元数获得欧拉旋转？

> ID：12784807
> 
> 赞同：9
> 
> 时间：2012-10-08T15:30:05.647
> 
> 标签：three.js

我正在使用 FlyControls 来移动和旋转我的飞机（我正在做飞行模拟），而且效果很好。但是现在我遇到了一个问题，一种可能的解决方案是知道我的平面的欧拉角。不幸的是 FlyControls 正在使用四元数。有没有办法以某种方式获得角度？当然，我可以重写 FlyControls 模块以使用欧拉角。但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T16:22:39.177

```
var rotation = new THREE.Euler().setFromQuaternion( quaternion, eulerOrder ); 
```

三.js r.69

# django - javascript更改输入值时CSRF验证失败

> ID：12784811
> 
> 赞同：0
> 
> 时间：2012-10-08T15:30:21.980
> 
> 标签：django, django-csrf

在我的 Django 模板中，我有一个 POST 表单。它包括标签 {% csrf_token %}。如果我正常提交此表格，那么一切正常。但是，我需要通过 Javascript/Jquery 更改表单输入值：

```
$('input').val(id); 
```

如果我这样做，那么我在提交表单时会收到“CSRF 验证失败”错误消息。我确实通过 Javascript 提交表单，但只要我不动态更改任何值，这不是问题。

我一直在通过在我的 Python 函数上方编写 @csrf_exempt 来“解决”这个问题。但是，这会跳过安全性。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:41:26.787

命令`$('input').val(id);`覆盖所有可以找到的输入条目，因此隐藏`csrf_token`的输入失去了它的价值。尝试制作更具体的选择器。例如：

```
$('input[name=change-me]').val(id); 
```

# php - 与 php 集成的 wkhtmltopdf 在 Centos 上不起作用（拒绝访问）

> ID：12784814
> 
> 赞同：3
> 
> 时间：2012-10-08T15:30:31.750
> 
> 标签：php, centos, wkhtmltopdf

我在我的 Centos 服务器上安装了 wkhtmltopdf。在 shell 中一切正常。如果我尝试在 shell 中发送命令：

```
/usr/local/bin/wkhtmltopdf http://www.google.it /var/www/html/test_report.pdf 
```

或者干脆

```
wkhtmltopdf ... /var/www/html/test_report.pdf 
```

一切顺利，但如果我在 php 脚本中使用 exec 命令，则同样无法正常工作：

```
exec("/usr/local/bin/wkhtmltopdf http://www.google.it /var/www/html/test_report.pdf"); 
```

我更改了`chmod`0777 中的 html 文件夹，但在 access.log 中我有以下响应：

> [08/Oct/2012:17:11:18 +0200] "GET test_report.php HTTP/1.1" 200 311 "-" "Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1 "

相同的脚本在 Windows 2003 服务器上运行良好。

有没有办法解决这个错误？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:34:37.207

SELinux 很可能会阻止它，我曾经遇到过同样的问题。

不要禁用 SELinux（这只是一个坏主意/懒人“修复”它的方法），而是使用该`audit2allow`工具来确定需要更改哪些上下文/SELinux 布尔值。

详情请参阅[http://wiki.centos.org/HowTos/SELinux#head-faa96b3fdd922004cdb988c1989e56191c257c01](http://wiki.centos.org/HowTos/SELinux#head-faa96b3fdd922004cdb988c1989e56191c257c01)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T11:50:17.727

就我而言，问题是 SELinux（正如@Oldskool 提到的他的回答）。在`exec`输出中只有信息`PROT_EXEC|PROT_WRITE failed.`

为了解决我跑的问题：

`setsebool httpd_execmem on`

我在[groups.google.com找到了这个解决方案](https://groups.google.com/d/msg/wkhtmltopdf-general/dJ2QdC1LVKc/NkL5lU4sEicJ)

# oauth-2.0 - YouTube API 刷新令牌被 400 代码“invalid_grant”撤销（似乎没有理由）

> ID：12784816
> 
> 赞同：3
> 
> 时间：2012-10-08T15:30:38.033
> 
> 标签：oauth-2.0, youtube-api

这是我在 stackoverflow 上的第一篇文章。就这样吧。

我已经构建了一个服务器端 PHP 应用程序，该应用程序涉及读取/更改一个用户的 YouTube 帐户（更改字幕文件）。用户已通过 OAuth 2 进行身份验证。我一直在存储 refresh_token 并在 access_token 过期时*成功发出刷新请求。*

但是现在，我似乎遇到了一个错误，这恰好与两件事相关：

*   用户上传新视频
*   周日晚上

我不知道这是否意味着什么。

尝试刷新访问令牌时会发生错误，并且我使用与以前相同的方式刷新令牌。以下是详细信息：

错误信息：

```
[status code] 400
[reason phrase] Bad Request
[url] https://accounts.google.com/o/oauth2/token
[request] POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
User-Agent: Guzzle/2.8.6 curl/7.24.0 PHP/5.3.10
Content-Type: application/x-www-form-urlencoded

client_id=442147492209.apps.googleusercontent.com&client_secret=D7eLQ5b0Mo1Y8uZ30ReWYwls&grant_type=refresh_token&refresh_token=1%2FCLvAt8V_d9sZznpg5YZdJlOJ58ufbHKL4F5Lw8PiJOg
[response] HTTP/1.1 400 Bad Request
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Tue, 02 Oct 2012 16:28:24 GMT
Content-Type: application/json
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Transfer-Encoding: chunked

{
  "error" : "invalid_grant"
} 
```

如果您想查看源代码，它在 github 上。这是发生刷新的相关行号：[https ://github.com/wellcaffeinated/yt-subtitle-explorer/blob/master/app/YTSE/OAuth/LoginManager.php#L330](https://github.com/wellcaffeinated/yt-subtitle-explorer/blob/master/app/YTSE/OAuth/LoginManager.php#L330)

（你会注意到我已经添加了一个检查这个错误并要求管理员重新授权应用程序......但这远非理想）

我看过的其他帖子告诉人们使用approval_prompt=force ...所以我正在这样做。

**编辑：** 我最新的怀疑是，由于每次管理员登录时我都请求脱机访问（approval_prompt=force），所以我不断生成新的 refresh_tokens（除非没有其他人可用，否则我不会记录）。谷歌的 OAuth 每个应用程序是否有最大数量的“活动”刷新令牌？或类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-04T03:12:39.073

请从[谷歌开发者页面](https://developers.google.com/analytics/devguides/reporting/core/v2/gdataAuthentication)查看：

> 如果您在尝试使用刷新令牌时收到 invalid_grant 错误响应，则错误原因可能是以下原因：
> 
> 1.  您的服务器时钟与 NTP 不同步。
>     
>     
> 2.  已超出刷新令牌限制。应用程序可以请求多个刷新令牌来访问单个 Google Analytics 帐户。例如，这在用户想要在多台机器上安装应用程序并访问同一个 Google Analytics 帐户的情况下很有用。在这种情况下，需要两个刷新令牌，每个安装一个。当刷新令牌的数量超过限制时，旧令牌将失效。如果应用程序尝试使用无效的刷新令牌，则会返回一个 invalid_grant 错误响应。每对唯一的 OAuth 2.0 客户端和 Google Analytics 帐户的限制为 25 个刷新令牌（请注意，此限制可能会发生变化）。如果应用程序继续为同一个客户/帐户对请求刷新令牌，一旦第 26 个令牌发出，之前发出的第一个刷新令牌将失效。第 27 个请求的刷新令牌将使之前发布的第二个令牌无效，依此类推。

# c# - 如何锁定目录并防止其被删除？

> ID：12784817
> 
> 赞同：2
> 
> 时间：2012-10-08T15:30:37.753
> 
> 标签：c#, .net, file, directory

我需要检查一个目录是否存在，如果不存在则创建它并在我的应用程序启动时锁定它。所以只要应用程序运行，没有人可以删除目录。

我想我可以在其中保存一个哑文件并保持打开状态，这样它就不能被删除，但*如果可能*的话，我不希望这样做。我怎样才能做到这一点？

* * *

现在，每当我需要在其中写入文件时，我都会这样做：

```
if (!Directory.Exists(path))
    Directory.CreateDirectory(path); 
```

即使在这个例子中，仍然可以删除调用之间`Directory.CreateDirectory`的目录。`File.Create`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:17:24.213

我建议您在某处创建一个临时文件夹并在那里进行所有处理，一旦完成创建并将您的文件移动到目标文件夹。一旦每件事都成功完成，您就可以删除您的临时文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:06:05.663

在目录中创建一个虚拟临时文件，并在程序的生命周期内保持打开状态。这样，任何试图删除目录的人都会收到“正在使用的目录”错误消息并且无法删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:23:27.523

在目录上使用 CreateFile WINAPI 函数。未经测试，但我认为它会工作。

```
[DllImport("kernel32.dll", SetLastError = true)]
        private static extern SafeFileHandle CreateFile(
            string lpFileName,
            FileAccess dwDesiredAccess,
            FileShare dwShareMode,
            IntPtr lpSecurityAttributes,
            FileMode dwCreationDisposition,
            int dwFlagsAndAttributes,
            IntPtr hTemplateFile);

const int FILE_FLAG_BACKUP_SEMANTICS = 0x02000000;
var dirlock = CreateFile("C:\\mydir", FileAccess.Read, FileShare.None, IntPtr.Zero, FileMode.Open,
                                     FILE_FLAG_BACKUP_SEMANTICS, IntPtr.Zero); 
```

# javascript - SVG getAttribute/setAttribute 只是添加到坐标而不是“设置”？

> ID：12784821
> 
> 赞同：1
> 
> 时间：2012-10-08T15:30:47.477
> 
> 标签：javascript, svg

```
<svg width="100%" height="100%"
    xmlns="http://www.w3.org/2000/svg" version="1.1" 
    xmlns:xlink="http://www.w3.org/1999/xlink"
    onload="startup(evt)">
<script>
function startup(evt){
    svgDoc=evt.target.ownerDocument;
    setInterval(function(){step("zero");},1000);
    setInterval(function(){follow("zero","one");},950);
}

function step(e,follower){
    e=svgDoc.getElementById(e);
    var rand = Math.floor((Math.random()*2)+1);
    var rand2 = Math.floor((Math.random()*2)+1);
    var move = 10;
    var y = +(e.getAttribute("y"));
    var x = +(e.getAttribute("x"));
    if(rand == 1){  
        if(rand2 == 1){
        e.setAttribute("y",y + move);
        } else {
        e.setAttribute("y",y - move);
        }
    } else {
    if(rand2 == 1){
        e.setAttribute("x",x + move);
        } else {
        e.setAttribute("x",x - move);
        }
    }
}
function follow(leader, follower){
    follower = svgDoc.getElementById(follower);
    leader = svgDoc.getElementById(leader);

    var leaderY = leader.getAttribute("y");
    var leaderX = leader.getAttribute("x");

    follower.setAttribute("y", leaderY);
    follower.setAttribute("x", leaderX);
}

</script>   
<defs>
    <text id="zero">0</text>
    <text id="one">1</text>
</defs>
<use x="50" y="50" xlink:href="#zero"/>
<use x="10" y="10" xlink:href="#one"/>
</svg> 
```

只是做一些随机练习来构建我的逻辑和练习脚本。

基本上，我的意思是“一”跟随“零”。零随机移动，它的位置在假设移动之前被放入内存/存储一点点（50ms）。然后将其设置为该位置。相反，我只是按照“零”的运动模式得到“一”，而不是它之前的位置。我很好奇为什么会这样，因为我没有对“one”svg 元素做任何实际的添加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:10:10.503

这里有几个问题。

首先 0 和 1 没有以开头的属性，因此 getAttribute 将返回 null。将您的标记更改为此将修复它

```
<defs>
    <text id="zero" x="0" y="0">0</text>
    <text id="one" x="0" y="0">1</text>
</defs> 
```

其次 getAttribute 返回一个字符串，因此您需要使用 parseFloat 从中获取一个数字，例如

```
var y = parseFloat(e.getAttribute("y"));
var x = parseFloat(e.getAttribute("x")); 
```

进行这两个更改似乎使它做你想做的事

# java - 禁用 Maven 内部版本号插件

> ID：12784823
> 
> 赞同：2
> 
> 时间：2012-10-08T15:30:51.557
> 
> 标签：java, git, svn, maven

目前我们正在开发一个包含大约 100 个模块的大型 maven 项目，其中一些还有子模块。一些模块使用 Maven Build Number 插件。该项目托管在颠覆之下。

最近我们的开发团队开始在本地使用 git。克隆 subversion repo 并尝试构建项目后，我们收到以下众所周知的错误：

```
The svn command failed.
Command output:
svn: ‘.’ is not a working copy 
```

不幸的是，在我们的案例中，不能选择创建新配置文件或仅从 POM 中删除插件定义（这将导致数百个 POM 文件混乱）。我找到了以下文章[http://abstractionextraction.wordpress.com/2012/09/27/git-svn-vs-maven-build-number-plugin/](http://abstractionextraction.wordpress.com/2012/09/27/git-svn-vs-maven-build-number-plugin/)但老实说，这不是我真正想做的事情.. .

有什么聪明的方法可以禁用这个插件。像命令行参数一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-07T21:02:21.807

I think you may skip failure on obtain revision without change project `pom.xml` - [buildnumber-maven-plugin has option `revisionOnScmFailure`](https://www.mojohaus.org/buildnumber-maven-plugin/create-mojo.html#revisionOnScmFailure) which you may use like:

```
mvn -Dmaven.buildNumber.revisionOnScmFailure=no-scm package 
```

In that case value `no-scm` will be used if `scm` call was unsuccessful. Off course you may change it and provide any other string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:21:37.713

一种方法是使用 pom 中的属性来指定内部版本号插件的执行阶段，如下所示。

```
<project>
  ..
  <properties>
    <buildnumber.plugin.phase>validate</buildnumber.plugin.phase>
    ..
  </properties>
  ..
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>buildnumber-maven-plugin</artifactId>
      <version>1.2</version>
      <executions>
        <execution>
          <phase>${buildnumber.plugin.phase}</phase>
          <goals>
            <goal>create</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        ..
      </configuration>
    </plugin>
  </plugins>
  ..
</project> 
```

然后在命令行中提供该属性以禁用插件，如下例所示。

```
mvn install -Dbuildnumber.plugin.phase=none 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:32:06.580

根据[mojo 文档](http://mojo.codehaus.org/buildnumber-maven-plugin/create-mojo.html)，您可以使用该`revisionOnScmFailure`属性。

但是，[它没有命令行选项](http://mojo.codehaus.org/buildnumber-maven-plugin/xref/org/codehaus/mojo/build/CreateMojo.html#222)。您必须修改这些 pom.xml 文件。

[请参阅Maven Java 插件开发指南中的](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)“在 Mojo 中定义参数”

# c# - 删除 CSV 文件中双引号之间的逗号

> ID：12784826
> 
> 赞同：0
> 
> 时间：2012-10-08T15:30:56.980
> 
> 标签：c#, file, csv, split, comma

我有一个 CSV 文件，其中包含如下几行：

```
"bar","foo, bar","18","07/09/2012 02:08:16","payments, recent","payments, all" 
```

一些值包含逗号，我需要删除这些逗号才能获得这个结果：

```
"bar","foo bar","18","07/09/2012 02:08:16","payments recent","payments all" 
```

我从这个正则表达式开始，`"^(\".+\"\\,?)+$"`但它对我来说太复杂了。

* * *

最终目标是拆分该字符串：

```
string content = reader.ReadToEnd();

string[] lignes = contenu.Split(new[] { Environment.NewLine }, StringSplitOptions.None);

for (int i = 1; i < lignes.Length; i++)
{
    // REMOVE COMMAS

    string[] values = csv.Split(new[] {','});

    // do something
}

reader.Close(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T15:33:55.520

与其手动解析有效的 CSV 文件（引号字段中允许使用逗号），不如使用知道如何处理这些文件的 CSV 解析器。

一个流行的库是[FileHelpers](http://filehelpers.sourceforge.net/)，命名空间[`TextFieldParser`](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCMQFjAA&url=http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx&ei=RfJyULrJMM7csgbipoHACQ&usg=AFQjCNE7Y0l9fyFsKpZQCr66e6ZYWWkohw)中有`Microsoft.VisualBasic.FileIO`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:01:50.933

您可以先对数据进行一些简单的按摩，可能是这样的：

```
 string content = "\"bar\",\"foo, bar\",\"18\",\"07/09/2012 02:08:16\",\"payments, recent\",\"payments, all\"";

    content = content.Replace("\",\"", "~");
    content = content.Replace(",", ""); // Safe to remove commas now.
    content = content.Replace("\"", ""); // Get rid of left over double quotes.

    string[] values = content.Split(new[] { '~' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:36:28.930

使用 TextFieldParser 类。它可以处理引号内的逗号。

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-31T05:54:12.413

您可以使用此波纹管请忽略方法名称并将文件导入您的表

```
 private void ImportCSV(string filePath = @"E:\nucc_taxonomy_140.csv", string tableName = "TempTaxonomyCodes")
    {
        string tempPath = System.IO.Path.GetDirectoryName(filePath);
        string strConn = @"Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" + tempPath + @"\;Extensions=asc,csv,tab,txt";
        OdbcConnection conn = new OdbcConnection(strConn);
        OdbcDataAdapter da = new OdbcDataAdapter("Select * from " + System.IO.Path.GetFileName(filePath), conn);
        DataTable dt = new DataTable();
        da.Fill(dt);

        using (SqlBulkCopy bulkCopy = new SqlBulkCopy(ConfigurationSettings.AppSettings["dbConnectionString"]))
        {
            bulkCopy.DestinationTableName = tableName;
            bulkCopy.BatchSize = 50;
            bulkCopy.WriteToServer(dt);
        }

    } 
```

# asp.net - 从弹出页面回发到调用页面

> ID：12784827
> 
> 赞同：0
> 
> 时间：2012-10-08T15:30:58.203
> 
> 标签：asp.net, vb.net, postback

我确信以前有人问过这个问题，但是我发现的所有链接都与将数据发布到弹出页面有关。

在我的情况下，我试图将两个值/变量从弹出页面返回到原始页面。

到目前为止，我的工作是在后面的弹出页面代码中创建两个会话变量，然后在弹出窗口关闭时刷新第一页。我不确定如何最好地做到这一点。我不想要整页刷新，我只想要两个文本框来显示每个会话变量的值。

如果我在关闭按钮上使用回发 URL，我的代码隐藏永远不会触发来填充我的会话变量，它会打开我的调用页面的另一个实例。

如果有人有链接或教程来展示这一点，我会非常感激。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:39:04.283

首先，我不明白向父级返回值是否需要会话变量？

好吧，您可以将值以 json 或 XML 或数组的形式传递给父级，您所需要的只是一段 JavaScript，即 window.parent，您可以在父级上调用 JavaScript 方法。

如果您的要求是将其保存在服务器会话中，您可以执行当前正在执行的任何操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:44:19.573

我发现这些链接回答了我的问题，让我可以用 ASP/VB 而不是 JavaScript、JSON 或 XML 来解决这个问题。

[http://asp-net.wonderhowto.com/how-to/implement-cross-page-postback-asp-net-214606/](http://asp-net.wonderhowto.com/how-to/implement-cross-page-postback-asp-net-214606/)

[http://www.asp.net/web-forms/videos/how-do-i/how-do-i-implement-a-cross-page-postback-in-aspnet](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-implement-a-cross-page-postback-in-aspnet)

# django - 填写个人资料字段时，管理员中的 Django 用户创建失败

> ID：12784830
> 
> 赞同：4
> 
> 时间：2012-10-08T15:31:03.953
> 
> 标签：django, postgresql, django-admin, django-authentication

我将 Django 1.4.1 与 postgresql 9.1 一起使用。

我需要向使用 auth 应用程序提供的用户添加配置文件，并允许管理应用程序创建和编辑此配置文件。因此，我一直在关注文档部分[存储有关用户的附加信息](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users "存储有关用户的附加信息")：

## 模型.py

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)

    bio = models.TextField(null = True, blank = True)
    contact = models.TextField(null = True, blank = True)

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user_profile, sender=User) 
```

## 设置.py

```
...
AUTH_PROFILE_MODULE = 'userprofile.UserProfile'
... 
```

`django.contrib.auth`我还激活`django.contrib.admin`了`INSTALLED_APPS`.

## 管理员.py

```
class UserProfileInline(admin.StackedInline):
    model = UserProfile
    can_delete = False
    verbose_name_plural = 'profile'

class UserAdmin(UserAdmin):
    inlines = (UserProfileInline, )

# Re-register UserAdmin
admin.site.unregister(User)
admin.site.register(User, UserAdmin) 
```

## 问题

现在，当我运行管理应用程序并要求添加（创建）一个新用户时，我被要求通过**两步过程**创建我的用户：首先，一个页面只要求输入用户名、密码（两次）和我的两个 UserProfile 字段。

如果我只输入用户名和密码（两次）并单击“保存”，我会看到该过程的第二页，它允许填写所有其他用户字段以及我的 UserProfile 字段。有一条消息说“用户“xxxxx”已成功添加。您可以在下面再次编辑它。”，幸运的是我可以编辑两个模型的字段，它有效。

但是，如果我尝试在第一页的一个或两个 UserProfile 字段中输入任何内容，则提交失败并显示以下消息：

```
IntegrityError at /admin/auth/user/add/

duplicate key value violates unique constraint "userprofile_userprofile_user_id_key"
DETAIL:  Key (user_id)=(7) already exists. 
```

每次我尝试时，“7”都会增加。

**如何避免这种行为，或者如何防止配置文件字段在第一页中可编辑，但让它们在第二页中进行编辑？**

完整追溯：

```
环境：

请求方法：POST
请求网址：http://127.0.0.1:8000/admin/auth/user/add/

Django 版本：1.4.1
Python版本：2.7.3
已安装的应用程序：
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 '用户资料'）
已安装的中间件：
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

追溯：
get_response 中的文件“/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py”
  111\. 响应 = 回调（请求，*callback_args，**callback_kwargs）
包装器中的文件“/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py”
  366\. return self.admin_site.admin_view(view)(*args, **kwargs)
_wrapped_view 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  91\. 响应 = view_func（请求，*args，**kwargs）
_wrapped_view_func 中的文件“/usr/local/lib/python2.7/dist-packages/django/views/decorators/cache.py”
  89\. 响应 = view_func（请求，*args，**kwargs）
内部文件“/usr/local/lib/python2.7/dist-packages/django/contrib/admin/sites.py”
  196\. 返回视图（请求，*args，**kwargs）
在sensitive_post_parameters_wrapper 文件“/usr/local/lib/python2.7/dist-packages/django/views/decorators/debug.py”
  69\. 返回视图（请求，*args，**kwargs）
_wrapper 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  25\. 返回 bound_func(*args, **kwargs)
_wrapped_view 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  91\. 响应 = view_func（请求，*args，**kwargs）
bound_func 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  21\. 返回函数（自我，*args2，**kwargs2）
内部文件“/usr/local/lib/python2.7/dist-packages/django/db/transaction.py”
  209\. 返回函数(*args, **kwargs)
add_view 中的文件“/usr/local/lib/python2.7/dist-packages/django/contrib/auth/admin.py”
  114.extra_context)
_wrapper 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  25\. 返回 bound_func(*args, **kwargs)
_wrapped_view 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  91\. 响应 = view_func（请求，*args，**kwargs）
bound_func 中的文件“/usr/local/lib/python2.7/dist-packages/django/utils/decorators.py”
  21\. 返回函数（自我，*args2，**kwargs2）
内部文件“/usr/local/lib/python2.7/dist-packages/django/db/transaction.py”
  209\. 返回函数(*args, **kwargs)
add_view 中的文件“/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py”
  956\. self.save_related(request, form, formsets, False)
save_related 中的文件“/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py”
  733\. self.save_formset（请求，表单，表单集，更改=更改）
save_formset 中的文件“/usr/local/lib/python2.7/dist-packages/django/contrib/admin/options.py”
  721\. formset.save()
保存文件“/usr/local/lib/python2.7/dist-packages/django/forms/models.py”
  497\. return self.save_existing_objects(commit) + self.save_new_objects(commit)
save_new_objects 中的文件“/usr/local/lib/python2.7/dist-packages/django/forms/models.py”
  628\. self.new_objects.append(self.save_new(form, commit=commit))
save_new 中的文件“/usr/local/lib/python2.7/dist-packages/django/forms/models.py”
  731\. obj.save()
保存文件“/usr/local/lib/python2.7/dist-packages/django/db/models/base.py”
  463\. self.save_base（使用=使用，force_insert=force_insert，force_update=force_update）
save_base 中的文件“/usr/local/lib/python2.7/dist-packages/django/db/models/base.py”
  551\. 结果 = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
_insert 中的文件“/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py”
  203\. return insert_query(self.model, objs, fields, **kwargs)
insert_query 中的文件“/usr/local/lib/python2.7/dist-packages/django/db/models/query.py”
  1576\. return query.get_compiler(using=using).execute_sql(return_id)
execute_sql 中的文件“/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py”
  910\. cursor.execute（sql，参数）
执行中的文件“/usr/local/lib/python2.7/dist-packages/django/db/backends/util.py”
  40\. return self.cursor.execute(sql, params)
执行中的文件“/usr/local/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py”
  52.返回self.cursor.execute（查询，参数）

异常类型：/admin/auth/user/add/ 处的 IntegrityError
异常值：重复键值违反唯一约束“userprofile_userprofile_user_id_key”
详细信息：键 (user_id)=(7) 已存在。`

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:38:50.587

代替

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance) 
```

做一个

```
def create_user_profile(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.get_or_create(user=instance) 
```

您正在创建新的用户配置文件对象，即使是用于编辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T15:54:51.657

正如评论中提到的 CadentOrange ，[此答案](https://stackoverflow.com/a/6117457/209050)中描述了此问题的解决方案。

问题在于使用内联管理表单。这是发生的事情：

1.  它保存了主模型 ( `User`)
2.  由于（1），触发了`post_save`信号处理程序，从而创建了一个新对象`User``UserProfile`
3.  每个内联模型都被保存（包括你的*另一个*副本`UserProfile`，导致欺骗）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T09:19:48.543

`create_user_profile`信号和管理表单尝试创建相同的用户配置文件。您可以覆盖`LocalUserAdmin`以`UserProfileInline`从添加视图中排除：

```
class LocalUserAdmin(UserAdmin):
    inlines = (UserProfileInline, )

    def get_formsets_with_inlines(self, request, obj=None):
        for inline in self.get_inline_instances(request, obj):
            # hide MyInline in the add view
            if isinstance(inline, UserProfileInline) and obj is None:
                continue
            yield inline.get_formset(request, obj), inline 
```

见[https://docs.djangoproject.com/en/2.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_formsets_with_inlines](https://docs.djangoproject.com/en/2.0/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_formsets_with_inlines)

# logging - Wowza 统计处理

> ID：12784831
> 
> 赞同：2
> 
> 时间：2012-10-08T15:31:05.030
> 
> 标签：logging, streaming, wowza, visitor-statistic

我一直在寻找一个免费的应用程序来处理 Wowza 日志，我只找到了这些：

*   [CegaraWowStats](http://cegarawowstats.blogspot.cz/) - 看起来不错，问题是源仅在 megaupload 托管，管理员看起来不再维护网站
*   [用于进程 wowza stats 的 awstats mod](http://www.wmconsulting.info/awstats-mod-for-process-wowza-stats/)

你认识其他一些人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-27T16:23:56.107

[Wowza Measure](http://wowzatoolbox.com/measure)允许您使用自己的 SQL 查询直接将连接计数捕获到数据库中，这非常灵活。这可能使处理日志变得不必要，因为您可以随时将数据插入表中，并且您始终可以查询这些表。这是关于[记录玩家号码](http://wowzatoolbox.com/logging-player-counts-to-db)的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:22:36.823

如果你喜欢定制，你可以使用 Ian Beyer 的这个解决方案：http: [//blog.ianbeyer.com/code/backend/wowza-metrics-perl/](http://blog.ianbeyer.com/code/backend/wowza-metrics-perl/)

当我们的团队审查 Wowza 报告解决方案时，我们发现了与免费软件相同的老问题 - 它提供了基本功能，但在功能扩展或支持方面，没有办法做得很好。这就是我们构建自己的[Wowza 控制面板](https://wmspanel.com/)的原因:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T14:56:29.450

Try this control panel [www.owiza.com](http://www.owiza.com).

It looks like the website is still ongoing but it functions well and the sign up is for free; I recommend you to try it.

# javascript - 全局变化时针对全局变量的私有变量不改变

> ID：12784833
> 
> 赞同：1
> 
> 时间：2012-10-08T15:31:08.470
> 
> 标签：javascript, closures, globals

我正在尝试将我的代码分解为模块，并且在引用我的应用程序的其他模块时遇到问题。

```
MYAPP = (function(my_app)
{

    var funcs = my_app.funcs;

    var module2 =
    {
         stupid_function = function ()
         {
            var some_var = "auwesome!";

            //let's call something from the other module...
            funcs.do_whatever();
         };

    };

    my_app.module2 = module2;

    return my_app;

})(MYAPP); 
```

当 MYAPP.funcs 发生变化时，问题就来了。例如，当我初始化它并添加新方法时......因为“funcs”是在闭包内创建的，它有一个 MYAPP.funcs 的副本并且没有我需要的新东西。

这就是“funcs”获得更多方法的方式......当我执行方法 MYAPP.funcs.init() 时，MYAPP.funcs 会自行重写。

```
var MYAPP = (function (my_app, $)
{

    'use_strict';

     my_app.funcs = {};

         my_app.funcs.init = function ()
         {
            panel = my_app.dom.panel;
            funcs = my_app.funcs;
                query_fns = funcs.query;

                 my_app.funcs =
                 {
                       some_method: function () { ... },
                       do_whatever: function () { ... }
                 };

          };

    return my_app;

}(APP, jQuery)); 
```

提前致谢！！

* * *

万一这对任何人来说都很有趣......

我用于调制的方法是“紧密增强” [http://webcache.googleusercontent.com/search?hl=es-419&q=cache%3Aadequatelygood.com%2F2010%2F3%2FJavaScript-Module-Pattern-In-Depth&btnG =](http://webcache.googleusercontent.com/search?hl=es-419&q=cache%3Aadequatelygood.com%2F2010%2F3%2FJavaScript-Module-Pattern-In-Depth&btnG=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:44:18.977

与模块或全局无关......不同之处在于您是否正在更改对象变量指向或变量指向：

```
var first = {my:"test"};
var second = first; // second points to object {my:"test"}
first.foo = 42; // updating the object, second points to it and can see the change
first = {my:"other"}; // new object, second still points to old  {my:"test", foo:42} 
```

# django - django 没有这样的表：

> ID：12784835
> 
> 赞同：64
> 
> 时间：2012-10-08T15:31:26.500
> 
> 标签：django, django-south

我在 Django 中的模型设置如下。

```
class Pupil(models.Model):
    forename = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    dateofbirth = models.DateField()
    year = models.IntegerField()
    class_group = models.CharField(max_length=30)
    email = models.EmailField(blank=True)
    assignments = models.ManyToManyField('Assignment', verbose_name='related assignments')

    def __unicode__(self):
        return u'%s %s' % (self.forename, self.surname)

class Subject(models.Model):
    name = models.CharField(max_length=30)
    level = models.CharField(max_length=30)
    teachers = models.ManyToManyField('Teacher', verbose_name='related teachers')

    def __unicode__(self):
        return self.name

class Teacher(models.Model):
    forename = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    email = models.EmailField(blank=True)

    def __unicode__(self):
        return u'%s %s' % (self.forename, self.surname)

class Assignment(models.Model):
    assignment_name = models.CharField(max_length=30)
    date_assigned = models.DateField()
    date_submitted = models.DateField()

    def __unicode__(self):
        return self.assignment_name 
```

当我尝试在管理员中添加学生并将作业附加到学生时，出现数据库错误 -

```
no such table: homework_pupil_assignments 
```

阅读完[这篇](https://stackoverflow.com/questions/10077721/django-databaseerror-no-such-table)文章后，我意识到这可能是由于 django 没有像我一样更新对我的模型的更改`manage.py sqlall homework`

我看到以下内容：

```
BEGIN;
CREATE TABLE "homework_pupil_assignments" (
    "id" integer NOT NULL PRIMARY KEY,
    "pupil_id" integer NOT NULL,
    "assignment_id" integer NOT NULL,
    UNIQUE ("pupil_id", "assignment_id")
)
;
CREATE TABLE "homework_pupil" (
    "id" integer NOT NULL PRIMARY KEY,
    "forename" varchar(30) NOT NULL,
    "surname" varchar(30) NOT NULL,
    "dateofbirth" date NOT NULL,
    "year" integer NOT NULL,
    "class_group" varchar(30) NOT NULL,
    "email" varchar(75) NOT NULL
)
;
CREATE TABLE "homework_subject_teachers" (
    "id" integer NOT NULL PRIMARY KEY,
    "subject_id" integer NOT NULL,
    "teacher_id" integer NOT NULL,
    UNIQUE ("subject_id", "teacher_id")
)
;
CREATE TABLE "homework_subject" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(30) NOT NULL,
    "level" varchar(30) NOT NULL
)
;
CREATE TABLE "homework_teacher" (
    "id" integer NOT NULL PRIMARY KEY,
    "forename" varchar(30) NOT NULL,
    "surname" varchar(30) NOT NULL,
    "email" varchar(75) NOT NULL
)
;
CREATE TABLE "homework_assignment" (
    "id" integer NOT NULL PRIMARY KEY,
    "assignment_name" varchar(30) NOT NULL,
    "date_assigned" date NOT NULL,
    "date_submitted" date NOT NULL
)
;
COMMIT; 
```

然后我安装了 South，按照说明启动并运行现有应用程序，希望成功同步这些表。没有喜悦。

谁能建议我如何让数据库（sqlite3）反映模型或指出我做错了什么？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-10-08T16:44:31.117

# `south`没有插件的 Django 迁移的更新答案：

就像[TT](https://stackoverflow.com/users/6666653/t-t)在他的[回答](https://stackoverflow.com/a/39030714/320104 "回答")中建议的那样，我之前的回答是针对`south`迁移插件，当时 Django 没有任何架构迁移功能。现在（在 Django 1.9+ 中工作）：

**[TT](https://stackoverflow.com/users/6666653/t-t) [写道](https://stackoverflow.com/a/39030714/320104 "回答")：**

> 你可以试试这个！
> 
> ```
> python manage.py makemigrations
> 
> python manage.py migrate --run-syncdb 
> ```

* * *

## `south`迁移插件已过时

> 如我所见，您以错误的顺序完成了所有操作，要修复它，您应该完成此清单（我假设您无法删除 sqlite3 数据库文件以重新开始）：
> 
> 1.  获取任何 SQLite GUI 工具（即[http://sqliteadmin.orbmu2k.de/](http://sqliteadmin.orbmu2k.de/)）
> 2.  更改模型定义以匹配数据库定义（最好的方法是注释新字段）
> 3.  删除`migrations`模型中的文件夹
> 4.  删除`south_migrationhistory`表中`app_name`与您的应用程序名称匹配的行（可能`homework`）
> 5.  调用：`./manage.py schemamigration <app_name> --initial`
> 6.  创建表`./manage.py migrate <app_name> --fake`（`--fake`将跳过 SQL 执行，因为表已存在于您的数据库中）
> 7.  更改应用的模型
> 8.  调用`./manage.py schemamigration <app_name> --auto`
> 9.  然后将更改应用到数据库：`./manage.py migrate <app_name>`
> 
> 每当您的模型需要任何更改时，重复步骤 7、8、9。

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2016-08-19T03:35:33.043

你可以试试这个！

```
python manage.py migrate --run-syncdb 
```

我对 Django 1.9 和 1.10 有同样的问题。此代码有效！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-11-21T08:57:18.800

如果您使用的是最新版本的 django 2.x 或 1.11.x，那么您必须首先创建迁移，

```
python manage.py makemigrations 
```

之后，您只需运行 migrate 命令来同步数据库。

```
python manage.py migrate --run-syncdb 
```

这些将同步您的数据库和 python 模型，并且第二个命令将打印它后面的所有 sql。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-10T16:46:45.253

我想也许你可以试试

```
python manage.py syncdb 
```

连**sqlite3都**需要`syncdb`

其次，您可以检查您的sql文件名

它应该看起来像**xxx.s3db**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T16:05:39.580

`sqlall`只是打印 SQL，它不执行它。`syncdb`将创建尚未创建的表，但不会修改现有表。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-06T19:37:23.290

. 第一步删除 db.sqlite3 文件。转到终端并运行命令：

*   `python manage.py makemigrations`
*   `python manage.py migrate`
*   `python manage.py createsuperuser`
*   `python manage.py runserver` . 转到管理页面现在一切正常。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-19T07:49:42.987

将数据库同步到 django 模型的一种方法是删除数据库文件并再次运行 makemigrations 和 migrate 命令。这将从头开始将您的 django 模型结构反映到您的数据库中。虽然，请确保在删除之前备份您的数据库文件，以防您需要记录。

这个解决方案对我有用，因为我对数据并不太在意，只是希望我的数据库和模型结构能够同步。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T10:26:58.937

第一次运行：`python manage.py makemigrations`
第二次运行：`python manage.py migrate`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-03-21T23:41:43.207

```
(1) delete -> db.sqlite3
(2) your App -> migrations directory-> delete all 001_initial.py and others but dont delete __init__.py

(3) open terminal -> 
python manage.py makemigrations
python manage.py migrate 
```

# visual-c++ - 将 cpp 添加到解决方案资源管理器时出现“已定义”错误

> ID：12784845
> 
> 赞同：0
> 
> 时间：2012-10-08T15:32:00.553
> 
> 标签：visual-c++

我有一个包含额外`A.h`头文件的 dll 项目。`A.cpp`包括 Ah 和具有 o 标头的 B.cpp。如果我添加`B.cpp`到 Visual C++ 项目编译器报告许多错误：

```
Error   9   error LNK2005: "wchar_t * __stdcall aaa(int)" (?aaa@@YGPA_WH@Z) already defined in A.obj    C:\P\B.obj  pr1 
```

如果我离开`B.cpp`项目目录但不将其添加到项目中，则没有问题并且项目编译正常。

那是添加`B.cpp`文件的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:12:38.640

> 我认为扩展没有影响，可能是你想要的。如果我错了，请纠正我，但我想我可以将 Bh 重命名为 B.fss ，在源代码中定义它，编译器应该编译

如果你在项目中包含它，你的 b.cpp 将被自动编译；并且由于您也在其他地方包含同一文件的内容，因此将再次编译其中的代码，从而导致重复的定义错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T08:15:55.947

基本上，如果您在一个 .cpp 文件中包含具有定义而不是声明的内容并将其添加到项目中，那么您当然会遇到多个定义错误 - 将 B.cpp 中的内容的定义移动到 Bh 并将其包含在 A 中。 cpp。问题不在于文件扩展名，问题在于您需要了解同一事物的多个定义会导致此类错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:34:41.813

`#include`用于头文件，而不是其他 .cpp 文件。

`#include "B.cpp"`从 A.cpp 中删除，事情将开始正常运行。

如果您打算包含它，或者将 B.cpp 重命名为 Bh。

# macos - 无法运行 luarocks，tonumber 为 nil 值

> ID：12784846
> 
> 赞同：0
> 
> 时间：2012-10-08T15:32:01.653
> 
> 标签：macos, lua, luarocks

[为了安装 luarocks，我从这里](http://luarocks.org/en/Download)下载了最新的 (2.0.11) tar.gx 文件。我打开它，并按照说明进行操作。

```
$ ./configure 
Lua interpreter found: /usr/local/bin/lua...
Lua version detected: 5.1
Looking for Lua... 
lua found in $PATH: /usr/local/bin
Checking Lua includes... 
lua.h found in /usr/local/include/lua.h
curl found at /usr/bin
openssl found at /opt/local/bin
Configuring for system... 
Darwin
Configuring for architecture... 
i386
Writing configuration...

Installation prefix: /usr/local
LuaRocks configuration directory: /usr/local/etc/luarocks
Using Lua from: /usr/local

Done. You can now run 'make' to build. 
```

然后我跑了`sudo make install`，最后尝试安装一个包，但是当我尝试运行它时，我收到了这个错误：

```
$ sudo luarocks install lpeg
/usr/local/bin/lua: /usr/local/share/lua/5.1//luarocks/cfg.lua:355: attempt to call global 'tonumber' (a nil value)
stack traceback:
    /usr/local/share/lua/5.1//luarocks/cfg.lua:355: in main chunk
    [C]: in function 'require'
    /usr/local/share/lua/5.1//luarocks/command_line.lua:6: in main chunk
    [C]: in function 'require'
    /usr/local/bin/luarocks:4: in main chunk
    [C]: ? 
```

手动运行 lua，tonumber 和其他所有东西一样工作得很好。我不知道为什么它在这里失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T16:48:43.360

在 cfg.lua 的顶部，您需要添加

```
local tonumber = tonumber 
```

通话前`module`。您可以`tonumber`在相似的本地定义列表的两行中包括。您可以在 /usr/local/share/lua/5.1//luarocks/cfg.lua 或源版本中的已安装版本中进行这些更改，然后`make install`再一次。

这是 luarocks 中的一个错误，将在下一个版本中修复。

我修改后的 luarocks-2.0.11/src/luarocks/cfg.lua 包含：

```
local rawset, next, table, pairs, require, io, os, setmetatable, pcall, ipairs, package, type, assert, tonumber, _VERSION =
      rawset, next, table, pairs, require, io, os, setmetatable, pcall, ipairs, package, type, assert, tonumber, _VERSION

module("luarocks.cfg") 
```

# java - 如何使用反射访问对象中的字段值

> ID：12784848
> 
> 赞同：42
> 
> 时间：2012-10-08T15:32:19.390
> 
> 标签：java, exception, reflection, illegalaccessexception

**我的问题：**如何克服`IllegalAccessException`使用反射访问对象字段的值。

**扩展：**我正在尝试学习反射，以使我的一些项目更通用。我`IllegalAccessException`在尝试调用`field.getValue(object)`以获取该对象中该字段的值时遇到了问题。我可以很好地获取名称和类型。

如果我将声明从 更改`private`为`public`那么这工作正常。但是为了遵循封装的“规则”，我不想这样做。任何帮助将不胜感激！谢谢！

**我的代码：**

```
package main;

import java.lang.reflect.Field;

public class Tester {

  public static void main(String args[]) throws Exception {
    new Tester().reflectionTest();
  }

  public void reflectionTest() throws Exception {
    Person person = new Person("John Doe", "555-123-4567", "Rover");
    Field[] fields = person.getClass().getDeclaredFields();
    for (Field field : fields) {
      System.out.println("Field Name: " + field.getName());
      System.out.println("Field Type: " + field.getType());
      System.out.println("Field Value: " + field.get(person));
      //The line above throws: Exception in thread "main" java.lang.IllegalAccessException: Class main.Tester can not access a member of class main.Tester$Person with modifiers "private final"
    }
  }

  public class Person {

    private final String name;
    private final String phoneNumber;
    private final String dogsName;

    public Person(String name, String phoneNumber, String dogsName) {
      this.name = name;
      this.phoneNumber = phoneNumber;
      this.dogsName = dogsName;
    }
  }
} 
```

**输出：**

```
run:
Field Name: name
Field Type: class java.lang.String
Exception in thread "main" java.lang.IllegalAccessException: Class main.Tester can not access a member of class main.Tester$Person with modifiers "private final"
    at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:95)
    at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:261)
    at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:253)
    at java.lang.reflect.Field.doSecurityCheck(Field.java:983)
    at java.lang.reflect.Field.getFieldAccessor(Field.java:927)
    at java.lang.reflect.Field.get(Field.java:372)
    at main.Tester.reflectionTest(Tester.java:17)
    at main.Tester.main(Tester.java:8)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-10-08T15:35:41.193

在您`get`使用私有字段之前，您需要调用`setAccessible(true);`相应的字段：

```
for (Field field : fields) {
    field.setAccessible(true); // Additional line
    System.out.println("Field Name: " + field.getName());
    System.out.println("Field Type: " + field.getType());
    System.out.println("Field Value: " + field.get(person));
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-08T15:35:49.197

默认情况下，您不允许读取非公共字段，但只需调用即可`field.setAccessible(true);`访问。换句话说，你的代码应该说

```
for (Field field : fields) {
  field.setAccessible(true);
  // ...
} 
```

# android - 应用程序在没有 stackTrace 的情况下旋转时崩溃

> ID：12784850
> 
> 赞同：5
> 
> 时间：2012-10-08T15:32:24.770
> 
> 标签：android, android-fragments, android-lifecycle, android-support-library

我的应用程序有一个非常奇怪的问题，它由一个 Activity 和 2 个片段（android.support.v4.app.Fragment）组成。

问题是当我旋转我的平板电脑时：应用程序立即崩溃。

几天前，一切正常，但我不得不更改包名称，这引发了一些错误，但我设法纠正了它们。在那之后问题出现了，但我就是找不到错误在哪里。这是我在应用程序被销毁、重新启动、恢复和创建后立即得到的 Logcat：

```
10-08 17:00:14.930: D/dalvikvm(18155): GC_CONCURRENT freed 394K, 8% free 7792K/8455K,  paused 1ms+4ms
10-08 17:00:14.930: D/AndroidRuntime(18155): Shutting down VM
10-08 17:00:14.930: W/dalvikvm(18155): threadid=1: thread exiting with uncaught exception (group=0x40bee1f8)
10-08 17:00:14.938: E/AndroidRuntime(18155): FATAL EXCEPTION: main
10-08 17:00:14.938: E/AndroidRuntime(18155): java.lang.IllegalStateException: No activity
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1065)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.support.v4.app.FragmentManagerImpl.dispatchResume(FragmentManager.java:1854)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.support.v4.app.FragmentActivity.onResumeFragments(FragmentActivity.java:431)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.support.v4.app.FragmentActivity$1.handleMessage(FragmentActivity.java:90)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.os.Looper.loop(Looper.java:137)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at android.app.ActivityThread.main(ActivityThread.java:4514)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at java.lang.reflect.Method.invokeNative(Native Method)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at java.lang.reflect.Method.invoke(Method.java:511)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-08 17:00:14.938: E/AndroidRuntime(18155):    at dalvik.system.NativeStart.main(Native Method) 
```

问题来自 FragmentManager 但为什么，我不知道，因为我没有任何细节。我尝试了一个我在这个站点上找到的解决方案，通过捕获未捕获的异常来获取更多信息，但我得到的结果是同一个 Logcat 一次又一次地重复，直到发生某种内存不足错误（logcat 中的字符串太多）。

我的 Activity 布局如下，它适用于 android 生命周期，但不适用于屏幕旋转：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
    android:id = "@+id/mainview"
    tools:context=".MyActivity" >

    <fragment
        android:id="@+id/missionFragment"
        android:layout_width="350dip"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        android:name="com.xxx.xxx.MissionFragment">       
    </fragment>

    <fragment
        android:id="@+id/mapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.xxx.xxx.MapFragment">
    </fragment>

</LinearLayout> 
```

清单就在那里：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxx.xxx"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="11" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:icon="@drawable/logo"
        android:label="@string/app_name" >
        <activity
            android:name=".MySIGActivity"
            android:label="@string/app_name"
            android:windowSoftInputMode="stateHidden" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果有人知道错误来自哪里，哪个android生命周期方法，那将受到欢迎！

谢谢。

**更新 1.1：** 这是我的主要活动的 onCreate 方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    context = getApplicationContext();
    currentEtape = 1;

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD);
    // Désactiver l'affichage du titre de l'application et son icône
    actionBar.setDisplayShowHomeEnabled(true);
    actionBar.setDisplayShowTitleEnabled(true);

    setContentView(R.layout.main);  

    SharedPreferences prefs = getPreferences(0);
    trackingGPS = prefs.getBoolean("trackingGPS", false);
    if(trackingGPS){
        TextView viewTrackingActive = (TextView)findViewById(R.id.textview_notif_tracking);
        viewTrackingActive.setText(this.getString(R.string.active));
        viewTrackingActive.setTextColor(Color.parseColor("#99CC00"));
    }
    else{
        TextView viewTrackingDesactive = (TextView)findViewById(R.id.textview_notif_tracking);
        viewTrackingDesactive.setText(this.getString(R.string.desactive));
        viewTrackingDesactive.setTextColor(Color.parseColor("#CC0000"));
    }

    // No interaction with Fragment or Activity classes in these methods
    instanciateLayersDialog();
    instanciateBasemapDialog();

} 
```

和 onResume 方法：

```
public void onResume(){
            super.onResume();
            SharedPreferences prefs = getPreferences(0);
            trackingGPS = prefs.getBoolean("trackingGPS", false);
            System.out.println("activity resume");
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T22:13:31.523

I'm not sure if this answers the problem of the original poster, but I had this same problem when I had an onPause() method in my main Activity that looked like this:

```
@Override
public void onPause() {
    super.onResume();

    ...do other stuff...
} 
```

As you can see, it was just a typo, but it took me a while to track it down since the error message "No Activity" was so vague. ("super.onResume" should have been "super.onPause", if it's not obvious.)

If this is not your exact issue, I believe it had something to do with the original Fragment not getting destroyed (by the proper onPause() call in my case).

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-10-10T12:11:51.773

我发现了问题：**android.support.v4.app 包**是问题所在。我用来自 android.app 包的标准片段导入替换了所有导入。

使用这个包我对 Android 2.0 分支的兼容性现在被破坏了，但在我的情况下这不是问题。

# android - 移动项目的 SLA（服务水平协议）

> ID：12784851
> 
> 赞同：3
> 
> 时间：2012-10-08T15:32:25.747
> 
> 标签：android, iphone, ipad, mobile

我正在寻找创建 SLA（服务水平协议）的模板。有人可以帮我吗？

谢谢朋友。

此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:35:04.393

请参阅：[http ://www.slatemplate.com/](http://www.slatemplate.com/)

# 服务水平协议 (SLA)

```
 <p><b>for: <i>Customer name</i></b></p>

            <p><b>by: <i>Company name</i></b></p>

            <p><b>Effective Date: October 6, 2012</b></p>

            <table class="slatable" border="1" cellpadding="4" cellspacing="0">
                <tbody>
                <tr>
                <td valign="top"><p><b>Document Owner:</b></p></td>
                <td valign="top"><p><i>Company name</i></p></td>
                </tr>

                </tbody>
            </table>

            <p><b>Version</b></p>

            <table class="slatable" border="1" cellpadding="4" cellspacing="0">
                <tbody>
                <tr>
                <td valign="top"><p>Version</p></td>
                <td valign="top"><p>Date</p></td>
                <td valign="top"><p>Description</p></td>
                <td valign="top"><p>Author</p></td>
                </tr>

                <tr>
                <td valign="top"><p>1.0</p></td>
                <td valign="top"><p>01-10-2012</p></td>
                <td valign="top"><p>Service Level Agreement</p></td>
                <td valign="top"><p>Bob Smith</p></td>
                </tr>

                <tr>
                <td valign="top"><p>1.1</p></td>
                <td valign="top"><p>06-10-2012</p></td>
                <td valign="top"><p>Service Level Agreement Revised</p></td>
                <td valign="top"><p>Dave Jones</p></td>
                </tr>

                </tbody>
            </table>

            <p><b>Approval</b></p>

            <p><i>(By signing below, all Approvers agree to all terms and conditions outlined in this Agreement.)</i></p>

            <table class="slatable" border="1" cellpadding="4" cellspacing="0">
                <tbody>
                <tr>
                <td valign="top"><p>Approvers</p></td>
                <td valign="top"><p>Role</p></td>
                <td valign="top"><p>Signed</p></td>
                <td valign="top"><p>Approval Date</p></td>
                </tr>

                <tr>
                <td valign="top"><p><i>Company name</i></p></td>
                <td valign="top"><p>Service Provider</p></td>
                <td valign="top"></td>
                <td valign="top">08-10-2012</td>
                </tr>

                <tr>
                <td valign="top"><p>Customer</p></td>
                <td valign="top"><p>Customer</p></td>
                <td valign="top"></td>
                <td valign="top">08-10-2012</td>
                </tr>

                </tbody>
            </table>

            <p><b>Table of Contents</b></p>

            <p><a class="slaindex" href="#_AgreementOverview">1\. Agreement Overview.. 3</a></p>

            <p><a class="slaindex" href="#_GoalsAndObjectives">2\. Goals &amp; Objectives. 3</a></p>

            <p><a class="slaindex" href="#_Stakeholders">3\. Stakeholders. 3</a></p>

            <p><a class="slaindex" href="#_PeriodicReview">4\. Periodic Review.. 4</a></p>

            <p><a class="slaindex" href="#_ServiceAgreement">5\. Service Agreement 4</a></p>

            <p><a class="slaindex" href="#_ServiceScope">5.1\. Service Scope. 4</a></p>

            <p><a class="slaindex" href="#_CustomerRequirements">5.2\. Customer Requirements. 5</a></p>

            <p><a class="slaindex" href="#_ServiceProviderRequirements">5.3\. Service Provider Requirements. 5</a></p>

            <p><a class="slaindex" href="#_ServiceAssumptions">5.4\. Service Assumptions. 5</a></p>

            <p><a class="slaindex" href="#_ServiceManagement">6\. Service Management 6</a></p>

            <p><a class="slaindex" href="#_ServiceAvailability">6.1\. Service Availability. 6</a></p>

            <p><a class="slaindex" href="#_ServiceRequests">6.2\. Service Requests. 6</a></p>

            <br>
            <h1 class="h1heading"><a name="_AgreementOverview">1\. Agreement Overview</a></h1>

            <p>This Agreement represents a Service Level Agreement ("SLA" or "Agreement") between <i>Company name</i> and <i>Customer</i> for the provisioning of IT services required to support and sustain the <i>product or service</i>.</p>
            <br>
            <p>This Agreement remains valid until superseded by a revised agreement mutually endorsed by the stakeholders.</p>
            <br>
            <p>This Agreement outlines the parameters of all IT services covered as they are mutually understood by the primary stakeholders. This Agreement does not supersede current processes and procedures unless explicitly stated herein.</p>

            <h1 class="h1heading"><a name="_GoalsAndObjectives">2\. Goals &amp; Objectives</a></h1>

            <p>The <b>purpose</b> of this Agreement is to ensure that the proper elements and commitments are in place to provide consistent IT service support and delivery to the Customer(s) by the Service Provider(s). </p>

            <p>The <b>goal</b> of this Agreement is to obtain mutual agreement for IT service provision between the Service Provider(s) and Customer(s).</p>

            <p>The <b>objectives</b> of this Agreement are to:</p>

            <ul class="serviceslist">
                <li>o Provide clear reference to service ownership, accountability, roles and/or responsibilities.</li>

                <li>o Present a clear, concise and measurable description of service provision to the customer.</li>

                <li>o Match perceptions of expected service provision with actual service support &amp; delivery.</li>
            </ul>

            <h1 class="h1heading"><a name="_Stakeholders">3\. Stakeholders</a></h1>

            <p>The following Service Provider(s) and Customer(s) will be used as the basis of the Agreement and represent the <b>primary</b> <b>stakeholders</b> associated with this SLA:</p>
            <br>
            <p><b>IT Service Provider(s):</b> <i>Company name</i>. ("Provider")</p>

            <p><b>IT Customer(s):</b> <i>Customer</i> ("Customer")</p>

            <b><br>
            </b> 

            <h1 class="h1heading"><a name="_PeriodicReview">4\. Periodic Review</a></h1>

            <p>This Agreement is valid from the <b>Effective Date </b>outlined herein and is valid until further notice. This Agreement should be reviewed at a minimum once per fiscal year; however, in lieu of a review during any period specified, the current Agreement will remain in effect. </p>
            <br>
            <p>The <b>Business Relationship Manager</b> ("Document Owner") is responsible for facilitating regular reviews of this document. Contents of this document may be amended as required, provided mutual agreement is obtained from the primary stakeholders and communicated to all affected parties. The Document Owner will incorporate all subsequent revisions and obtain mutual agreements / approvals as required. </p>
            <br>
            <p><b>Business Relationship Manager:</b> <i>Company name</i></p>

            <p><b>Review Period: </b>Bi-Yearly (6 months)</p>

            <p><b>Previous Review Date:</b> September 28, 2012</p>

            <p><b>Next Review Date:</b> November 7, 2012</p>

            <h1 class="h1heading"><a name="_ServiceAgreement">5\. Service Agreement</a></h1>

            <p>The following detailed service parameters are the responsibility of the Service Provider in the ongoing support of this Agreement. </p>

            <h2 class="h2heading">5.1\. <a name="_ServiceScope">Service Scope</a></h2>

            <p>The following Services are covered by this Agreement; </p>

            <ul class="serviceslist">
                <li>o Manned telephone support</li>

                <li>o Monitored email support</li>

                <li>o Remote assistance using Remote Desktop and a Virtual Private Network where available</li>

                <li>o Planned or Emergency Onsite assistance (extra costs apply)</li>

                <li>o Monthly system health check</li>
            </ul>

            <h2 class="h2heading">5.2.<a name="_CustomerRequirements">Customer Requirements</a></h2>

            <p><b>Customer</b> responsibilities and/or requirements in support of this Agreement include: </p>

            <ul class="serviceslist">
                <li>o Payment for all support costs at the agreed interval.</li>

                <li>o Reasonable availability of customer representative(s) when resolving a service related incident or request.</li>
            </ul>

            <h2 class="h2heading">5.3\. <a name="_ServiceProviderRequirements">Service Provider Requirements</a></h2>

            <p><b>Service Provider</b> responsibilities and/or requirements in support of this Agreement include: </p>

            <ul class="serviceslist">
                <li>o Meeting response times associated with service related incidents.</li>

                <li>o Appropriate notification to Customer for all scheduled maintenance.</li>
            </ul>

            <h2 class="h2heading">5.4.<a name="_ServiceAssumptions">Service Assumptions</a></h2>

            <p>Assumptions related to in-scope services and/or components include:</p>

            <ul class="serviceslist">
                <li>o Changes to services will be communicated and documented to all stakeholders.</li>
            </ul>

             <h1 class="h1heading"><a name="_ServiceManagement">6\. Service Management</a></h1>

            <p>Effective support of in-scope services is a result of maintaining consistent service levels. The following sections provide relevant details on service availability, monitoring of in-scope services and related components.</p>

            <h2 class="h2heading">6.1\. <a name="_ServiceAvailability">Service </a>Availability</h2>

            <p>Coverage parameters specific to the service(s) covered in this Agreement are as follows:</p>

            <ul class="serviceslist">

                <li>o Telephone support : 9:00 A.M. to 5:00 P.M. Monday - Friday</li>

                <li>o Calls received out of office hours will be forwarded to a mobile phone and best efforts will be made to answer / action the call, however there will be a backup answer phone service</li>

                <li>o Email support: Monitored 9:00 A.M. to 5:00 P.M. Monday - Friday</li>

                <li>o Emails received outside of office hours will be collected, however no action can be guaranteed until the next working day</li>

                <li>o Onsite assistance guaranteed within 72 hours during the business week</li>

            </ul>

            <h2 class="h2heading">6.2.<a name="_ServiceRequests">Service Requests</a></h2>

            <p>In support of services outlined in this Agreement, the Service Provider will respond to service related incidents and/or requests submitted by the Customer within the following time frames: </p>

            <ul class="serviceslist">

                <li>o 0-8 hours (during business hours) for issues classified as <b>High</b> priority.</li>

                <li>o Within 48 hours for issues classified as <b>Medium</b> priority.</li>

                <li>o Within 5 working days for issues classified as <b>Low</b> priority.</li>

                <li>o Remote assistance will be provided in-line with the above timescales dependent on the priority of the support request.</li> 
```

# sql - 这些之间有什么区别？

> ID：12784854
> 
> 赞同：3
> 
> 时间：2012-10-08T15:32:29.140
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这两个查询有什么区别？

```
 SELECT     CountryMaster.Id
   FROM       Districts INNER JOIN
   CountryMaster ON Districts.CountryId = CountryMaster.Id

   SELECT     CountryMaster.Id
   FROM       CountryMaster INNER JOIN
   Districts ON Districts.CountryId = CountryMaster.Id 
```

我知道输出将是相同的，但我想知道如果我忽略复杂查询中的表和列的位置或具有大量数据（如数十万行）的表的位置，是否会产生相同的严重影响。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T15:34:23.110

没有任何区别。连接的顺序无关紧要。数据库引擎内的查询优化器将根据这些表中数据的存储统计信息来决定合并计划以实际处理来自这两个表的记录。
事实上，在许多情况下，查询优化器将为使用连接短语的查询生成与使用相关子查询短语的查询完全相同的计划。
我在这里学到的教训是：

始终从最清楚地代表您尝试创建的过程的含义的语法或表示开始，并信任查询优化器来完成它的工作。话虽如此，查询优化器并不完美，所以如果出现性能问题，请使用带有替代结构的查询显示计划，看看它是否有所改善......

关于内部与外部联接性能的快速评论。内连接本质上比外连接快是不正确的。相对性能完全取决于查询引擎使用三种处理连接中的哪一种；
1\. 嵌套循环连接，2.，合并连接，或 3\. 哈希连接。
例如，当连接一侧的记录集比另一侧的记录集小很多时，使用嵌套循环连接，并且较大的集在连接列[s] 上被索引。在这种情况下，如果较小的集合是“外”端，那么外连接会更快。原因是嵌套循环连接从较小的集合中获取整个记录集，并遍历每个记录，从较大的集合中找到匹配的记录。当在较大的集合中没有找到匹配时，内部连接必须执行第二步，从较小的一侧删除行。外连接不执行此第二步。

三种可能的连接过程类型中的每一种都有自己的特征行为模式...有关详细信息，请参阅 [嵌套循环连接](http://msdn.microsoft.com/en-us/library/ms191318%28v=sql.105%29.aspx)、 [合并连接](http://msdn.microsoft.com/en-us/library/ms190967%28v=sql.105%29.aspx)和[哈希连接](http://msdn.microsoft.com/en-us/library/ms189313%28v=sql.105%29.aspx) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:35:08.347

正如所写，它们是相同的。查尔斯的出色回答。

如果您想知道它们是否会有不同的执行计划，那么只需在 SSMS 中显示执行计划。

至于速度，将连接中使用的列编入索引。
维护索引 - 碎片索引几乎没有那么有效。
查询计划并不总是相同的。
查询优化器保留统计信息，并且随着数据配置文件的更改，最佳计划可能会更改。
几千行不是很多。
一旦达到数百万，然后调整索引和语法（带有提示）。
有时您必须投入数百万美元才能获得足够的数据进行调整。

还有一个等效的 UNION 运算符，有时速度更快。

连接提示 Loop 不是对称的，因此在这种情况下，以下查询计划是不同的，但它们仍然是相同的结果。

如果一个是 PK 表，我总是把它放在第一位。
在这种情况下，第一个速度是第二个的两倍。

```
select top 10 docSVsys.sID, docMVtext.fieldID
from docSVsys 
inner loop join docMVtext 
   on docMVtext.sID = docSVsys.sID
where docSVsys.sID < 100
order by docSVsys.sID, docMVtext.fieldID

select top 10 docSVsys.sID, docMVtext.fieldID
from docMVtext
inner loop join docSVsys 
   on docMVtext.sID = docSVsys.sID
where docSVsys.sID < 100
order by docSVsys.sID, docMVtext.fieldID 
```

[高级查询调优概念](http://msdn.microsoft.com/en-us/library/ms191426%28v=sql.105%29.aspx)

# c++ - 使用来自一个映射的迭代器作为另一个映射的键类型

> ID：12784860
> 
> 赞同：1
> 
> 时间：2012-10-08T15:33:13.667
> 
> 标签：c++, map, compiler-errors, stdmap

我有一个 Visual Studio 2008 C++03 应用程序，我想在其中创建一个`std::map`使用来自另一个的迭代器`std::map`作为其键类型的应用程序。但是，当我尝试使用其键类型从该映射中删除一个元素时遇到了一个问题。

在这个例子中，当一个元素的`MyList`使用时间超过 5 分钟时，应该触发一个计时器并将其从地图中移除并销毁其年龄计时器。

```
typedef std::map< Foo, FooBar > MyList;
typedef std::map< MyList::iterator, boost::shared_ptr< Timer > > MyListAgeTimers;

class A
{
public:

    void AddItem( Foo& f, FooBar& fb )
    {
        CriticalSection::Guard g( lock_ );
        std::pair< MyList::iterator, bool > new_foo = 
            my_list_.insert( std::make_pair( f, fb ) );
        if( new_foo.second )
        {
            timers_.insert( std::make_pair( 
                new_foo.first, 
                boost::make_shared< Timer >( FiveMinutes, boost::bind( &A::OnAgeTimer, this, new_foo.first ) ) ) );
        }
    };

    void OnAgeTimer( MyList::iterator item )
    {
        CriticalSection::Guard g( lock_ );

        // erase by key-type generates an error:
        // functional(143) : error C2676: binary '<' : 'const std::_Tree<_Traits>::iterator' does not define this operator or a conversion to a type acceptable to the predefined operator
        timers_.erase( item );

        // erase by iterator. works okay.
        my_list_.erase( item );
    };

private:
    MyList my_list_;
    MyListAgeTimers timers_;
    CriticalSection lock_;
}; 
```

您不能将一个映射中的迭代器用作另一个映射的键类型吗？或者，我是否需要为此专门定义一个`operator<`？

**编辑：**

（对我来说）显而易见的事情就是这样：

```
namespace std {
inline bool operator <( const MyList::iterator& a, const MyList::iterator& b )
{
    return a->first < b->first;
}
}; 
```

`std::operator<`但是，如果这是正确的，为什么在比较两个迭代器时这不是默认行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T15:49:37.027

`std::map<key, value>`要求`key`有一个`operator<`; 这就是 map 对象用来查找匹配键的方法。`std::map<x, y>::iterator`是一个**双向**迭代器；它没有`operator<`，因此您不能将其用作另一个映射中的键类型，除非您提供自己的`operator<`或函数对象来比较两个迭代器并决定哪个在另一个之前。

# c# - 错误信息修复

> ID：12784861
> 
> 赞同：0
> 
> 时间：2012-10-08T15:33:19.580
> 
> 标签：c#, datagridview

```
for (int i = 0; i < dataGridView1.Rows.Count; i++)
{
    //bool sleected = false;

    if (dataGridView1.Rows[i].Cells[3].Value != null)
    {

        selected.Add(i);
    }

}
//string donew = "";

// line off error 
textBox1.Text = ((String)dataGridView1.Rows[1].Cells[2].Value);
/*  for (int i = 0; i < selected.Count; i++)
{

    textAdded.Add((String)dataGridView1.Rows[0].Cells[2].Value);
 //   donew += (String)dataGridView1.Rows[selected[i]].Cells[2].Value;
}*/ 
```

我不断收到错误

> 无法将“System.Double”类型的对象转换为“System.String”类型

我能做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:34:44.847

而不是使用

```
textBox1.Text = ((String)dataGridView1.Rows[1].Cells[2].Value); 
```

利用

```
textBox1.Text = dataGridView1.Rows[1].Cells[2].Value.ToString(); 
```

原因是您尝试显式转换，而从 double 到 string 的转换不存在，但幸运的是 ToString() 方法将数字输出为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:45:04.747

`foreach`此外，您可以通过循环进一步细化和清理它。在许多情况下，这将使其更易于阅读。

此外，作为一般做法，请避免`textBox1`或`dataGridView1`键入这些对象的名称。现在应用特定的命名模式，防止以后不必要的悲伤和担忧。尽早养成是一个好习惯。

```
foreach(DataGridViewRow r in dataGridView1.Rows)
{
    if (r.Cells[3].Value != null)
    {
        selected.Add(r);
    }
}
// line off error 
textBox1.Text = dataGridView1.Rows[1].Cells[2].Value.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:36:48.467

你可以试试

```
dataGridView1.Rows[1].Cells[2].Value.ToString() 
```

# jquery - .切换类。有没有可能

> ID：12784875
> 
> 赞同：3
> 
> 时间：2012-10-08T15:34:19.660
> 
> 标签：jquery

我在这里上传了我的问题：[我的问题示例](http://awerty.atwebpages.com/)

我的问题：是否有可能在页面加载后（或刷新后）首先看到“内容 B def”而不修改顺序

```
<a> href="..." C </a>
<a> href="..." B </a>
<a> href="..." A </a> 
```

我要CBA订单。不是 BCA 或 BAC 我的 javascripting 知识是基本的，但它正在快速增长..

对不起我的英语不好，

非常感谢您的建议！我在这个问题上挣扎了几天。

HTML 代码：

```
 <html>
   <head>
      <meta content="charset=utf-8" />
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
      <script defer src="js/swap.js"></script> 
   </head>
   <body>
      <div>
         <div id="view-c" class="swap-cont">
            <h1>content C xyz</h1>
         </div>
         <div id="view-a" class="swap-cont">
            <h1>content A abc</h1>
         </div>
         <div id="view-b" class="swap-cont">
            <h1>content B def</h1>
         </div>
         <div class="toggle">
            <a href="#view-c">C</a>
            <a href="#view-b">B</a>
            <a href="#view-a">A</a>
         </div>
      </div>
   </body>
</html> 
```

交换.js：

```
 $(function() {
    var toggles = $('.toggle a'),
        codes = $('.swap-cont');

    toggles.on("click", function(event) {
        event.preventDefault();
        var $this = $(this);

        if (!$this.hasClass("active")) {
            toggles.removeClass("active");
            $this.addClass("active");
            codes.hide().filter(this.hash).show();
        }
    });
    toggles.first().click();
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:38:46.083

您只需要更改脚本的最后一行：

```
toggles.first().click(); 
```

至：

```
toggles.eq(1).click(); 
```

此行通过触发单击默认锚点来初始化您的视图。

您正在*单击*第一个锚点，即 C。B 实际上是第二个，因此您需要使用从集合`.eq()`中选择元素并[在此处](http://api.jquery.com/eq/)记录的方法。`n-th`

替代（更清洁）方法是将`defaultAnchor`类添加到默认锚点并将脚本修改为：

```
 $('.defaultAnchor').click(); 
```

# visual-studio - 两个Visual Studio C++程序的并行运行

> ID：12784877
> 
> 赞同：1
> 
> 时间：2012-10-08T15:34:26.137
> 
> 标签：visual-studio, visual-c++

我有两个项目；一个在 WINDOWS Visual Studio C++ 中，另一个在 CONSOLE Visual Studio C++ 中。第二个是我的主程序，它使用了第一个程序的一些信息。这两个程序都从外部设备实时获取信息。如何链接这两个程序并并行运行它们？我已经被搜索过了，但我找不到任何链接窗口和控制台表单的东西！！

# cloud-foundry - Cloudfoundry - 没有 python 运行时

> ID：12784885
> 
> 赞同：0
> 
> 时间：2012-10-08T15:34:48.450
> 
> 标签：cloud-foundry

这个网站说 cloudfoundry 已经支持 python 运行时，但是当我输入时`vmc runtimes`，它没有显示 python

有谁知道发生了什么？

如果您能提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:41:38.027

请注意，我已经有一段时间没有这样做了，并且不记得当时是否获得了 python 支持，但是：由于名为“dev_setup”的自动化脚本（[https： //github.com/cloudfoundry/vcap/tree/master/dev_setup](https://github.com/cloudfoundry/vcap/tree/master/dev_setup)）。

这就是此处解释的内容（[https://github.com/cloudfoundry/vcap](https://github.com/cloudfoundry/vcap)），鉴于您之前的评论，我怀疑这就是您一直在关注的内容。

现在，事情是这样的：有不同的选项与应该部署的内容相关（“ `-c`”命令行开关）所以你可能想看看[https://github.com/cloudfoundry/vcap/tree/master/开发设置/部署](https://github.com/cloudfoundry/vcap/tree/master/dev_setup/deployments)。特别是，有一个“全部”部署模型，它引入了整个厨房水槽，所以你可以试试这个并确认你得到了 python 支持。另外，请查看 中的`custom_runtimes`内容`samples`，这可能会引起您的兴趣。

如上所述，我有一段时间没有这样做了，所以我希望我在这里走在正确的轨道上。

# c++ - 如何将 std::set 放入 std::map

> ID：12784887
> 
> 赞同：0
> 
> 时间：2012-10-08T15:34:52.227
> 
> 标签：c++, stdmap, stdset

我在下面声明了std：map：

```
std::map<std::string, std::set<unsigned char*>> FilesMap;

int InsertData(unsigned char* name)
{
  // here i try to insert pair with name above and clear std::set
   FilesMap.insert(std::pair<std::string, std::set<unsigned char*>>(std::string((char*)name), std::set<unsigned char*>()));
} 
```

但是我有很多错误，例如：

> 错误 16 错误 C2676: 二进制 '<': 'const std::string' 未定义此运算符或转换为预定义运算符可接受的类型 c:\program files (x86)\microsoft Visual Studio 10.0\vc\include \x功能

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:40:29.820

首先，这条可怕的长线

```
FilesMap.insert(std::pair<std::string, std::set<unsigned char*>>(std::string((char*)name), std::set<unsigned char*>())); 
```

如果您使用 std::make_pair 函数可以简化，该函数将推断模板参数。

```
FilesMap.insert(std::make_pair(std::string(reinterpret_cast<char*>name)), std::set<unsigned char*>())); 
```

其次，您可以为您的集合制作一个 typedef 以进一步简化上述行

```
typedef std::set<unsigned char*> mySetType;
std::map<std::string, mySetType>> FilesMap;
 FilesMap.insert(std::make_pair(std::string(reinterpret_cast<char*>name)), MySetType())); 
```

最后，也是最重要的一点，我认为编译器无法找到适合`operator <`std::string 的原因是您忘记了`#include<string>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:41:15.907

使用 std::map 的要求是键类型必须具有`operator <`. 关于 std::string 没有此运算符，您似乎遇到了错误。确保您已包含字符串 header `#include <string>`。

# ruby - Ruby 版本在终端和 bash 中有所不同

> ID：12784889
> 
> 赞同：2
> 
> 时间：2012-10-08T15:34:54.887
> 
> 标签：ruby, bash, shell, terminal, rvm

在终端中，`ruby -v`给了我：

```
ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0] 
```

但如果我输入`/bin/bash`，`ruby -v`我会得到：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

我怀疑这与我的 PATH 配置有关。我的 $PATH 变量在上述两种环境中都不同。还有其他问题，例如`rvm`除非我进入 bash 模式，否则不会运行。

有关信息，我的`~/.bashrc`包含：

```
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"  # This loads RVM into a shell session. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:15:04.460

貌似“login shell”没有开启，需要在终端模拟器偏好设置中开启，有时需要使用`/bin/bash --login`.

ZSH 也有一些已知问题，但似乎无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:29:55.543

`which ruby`从“终端”和“/bin/bash”尝试。您的 1.9.3 在您的`~/.rvm`路径中。

键入`rvm info`。您应该获得 RVM 的设置列表。

在您的`~/.bashrc`OR`~/.bash_profile`中，您应该有 RVM 的初始化代码。如果你不这样做，你没有完全安装 RVM，需要完成。阅读[RVM 安装页面](https://rvm.io/rvm/install/)上的所有说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T08:25:28.587

这不是由于 $PATH 问题。我了解到的是，除非您将默认登录 shell 更改为**Bash**或**ZSH** ，否则无法运行 RVM 。仅在 Mac 中启动终端是行不通的。您对使用 Bash 进行全局更改，如下所示：

```
chsh -s /bin/bash 
```

（交换`/bin/bash`您的 bash 路径，使用 查找`which bash`）。

RVM 网站确实说 bash>=3.2.25 是[先决条件](https://rvm.io/rvm/prerequisites/)，但没有说明那是什么或如何检查您是否拥有它。它还建议您运行`rvm requirements`以检查您需要什么 - 除非您更改外壳，否则您无法运行此程序（对于新手来说这一切都非常混乱）。

感谢上面的回复让我最终到达那里。

另请参阅：[安装 RVM 时出现错误：修饰符错误](https://stackoverflow.com/questions/12807609/bad-modifier-error-when-installing-rvm)

# c - time(NULL) 返回不同的时间

> ID：12784903
> 
> 赞同：0
> 
> 时间：2012-10-08T15:35:57.140
> 
> 标签：c, time

我正在尝试使用 C 获取当前时间`time_t current_time = time(NULL)`。据我了解，它将返回系统的当前时间。我稍后尝试使用 struct 将其转换为 GMT 时间`tm* gmt = gmtime(&current_time)`。

`ctime()`我使用和`asctime()`功能打印两次。

我系统上的当前时间是 GMT + 1。但`gmtime()`返回的时间与原样相同`current_time`。我不明白为什么要`gmtime()`同时返回我。任何帮助将不胜感激。

好的，这里是代码和输出：windows 显示的当前时间是 17:54（斯德哥尔摩区；GMT+1）。我想在 15 点 54 分给我一些东西。或者也许我的理解是错误的......

```
time_t current_time = time(NULL);

struct tm* gmt = gmtime(&current_time);
struct tm* loc = localtime(&current_time);

printf("current time: %s\n", ctime(&current_time));
printf("gmt time %s\n", asctime(gmt));
printf("local time %s\n", asctime(loc)); 
```

输出：

```
current time: Mon Oct  8 17:54:06 2012

gmt time Mon Oct  8 17:54:06 2012

local time Mon Oct  8 17:54:06 2012 
```

**接受的解决方案：** **来自 Simes**

那可能是你的问题。检查 TZ 环境变量的值；如果不存在，它将默认为 GMT。Cygwin 不会自动从 Windows 获取时区设置。另请参阅[本地时间返回 GMT 以了解在 cygwin shell 上运行的 Windows 程序](https://stackoverflow.com/questions/11655003/localtime-returns-gmt-for-windows-programs-running-on-cygwin-shells)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:49:11.803

`time()`返回自纪元以来的秒数。~~等于 UTC（又名 GMT）~~

纪元是 1.1.1970, 00:00:00 在英国格林威治。

所以实际上`time()`返回的不是时间，而是时间**差**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:49:36.723

time_t 类型保存一个值，该值表示自 UNIX 纪元以来的秒数。tm 类型保存一个日历值。

gmtime() 只是将系统时间（始终为 UTC）从 time_t 转换为 tm。这就是为什么值是相同的。如果您想要表示您的本地时间 (GMT+1)，这就是 localtime() 的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-05T22:40:14.403

在这两行上运行调试器：

```
struct tm* gmt = gmtime(&current_time);

struct tm* loc = localtime(&current_time); 
```

在第二行中断，观察 gmt 的成员，当你执行第二行时——你会看到一些 gmt 成员改变了值。显然，库使用了一些静态内存。所以在运行第二个语句之前保存第一个语句的结果

# ajax - Django 测试客户端在访问 url 时得到 301 重定向

> ID：12784905
> 
> 赞同：20
> 
> 时间：2012-10-08T15:35:59.990
> 
> 标签：ajax, django, post, django-testing

我正在为 django 视图编写单元测试。我观察到我的一个视图返回重定向代码 301，这是意料之外的。
这是我前面提到的views.py。

```
def index(request):
    return render(request, 'index.html',
                  {'form': QueryForm()})

def query(request):
    if request.is_ajax():
        form = QueryForm(request.POST)
        return HttpResponse('valid') 
```

下面是 urls.py。

```
urlpatterns = patterns('',
         url(r'^$', 'core.views.index'),
         url(r'^query/$', 'core.views.query')
         ) 
```

并且单元测试将失败。

```
def so_test(self):
    response = self.client.post('/')
    self.assertEquals(response.status_code, 200)

    response = self.client.post('/query', {})
    self.assertEquals(response.status_code, 200) 
```

我的问题是：为什么返回状态 301？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-08T15:46:23.377

您已经定义了一个匹配的 url `/query/`，但您正在测试`/query`。Django 正在重定向到带有斜杠的 url，因为[`APPEND_SLASH=True`](https://docs.djangoproject.com/en/dev/ref/settings/#append-slash)在您的设置中。

您可能希望将测试更改为：

```
response = self.client.post('/query/', {}) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-02-01T08:25:28.603

对我来说，问题是我错误地使用`setting.py`具有[`SECURE_SSL_REDIRECT = True`](https://django-secure.readthedocs.io/en/v0.1.1/settings.html#secure-ssl-redirect). 更改以`SECURE_SSL_REDIRECT = False`解决问题。

另一种选择是使用`client`with `secure=True`，即：

```
response = self.client.post('/query/', {}, secure=True) 
```

这将使客户端[模拟 HTTPS 请求](https://docs.djangoproject.com/en/2.1/topics/testing/tools/#django.test.Client.post)。

# wordpress - 喜欢按钮问题

> ID：12784909
> 
> 赞同：3
> 
> 时间：2012-10-08T15:36:13.223
> 
> 标签：wordpress, button, facebook-like

我的名字是塞巴斯蒂安，我在 www.starsontv.com 上的点赞按钮有很大问题

一切都应该没问题 说这个链接

[https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.starsontv.com%2F2012%2F10%2F06%2Fx-factor-2012-wer-schafft-es- noch-ins-juryhaus%2Fartikel-0014315%2F](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.starsontv.com%2F2012%2F10%2F06%2Fx-factor-2012-wer-schafft-es-noch-ins-juryhaus%2Fartikel-0014315%2F)

但是你不能使用like按钮。问题是什么？我怎么解决这个问题？

从昨天开始就存在这个问题。

我不知道，我没有改变我的网站。

任何人都可以帮助我吗？

非常感谢....

来自德国塞巴斯蒂安的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T23:50:07.480

我能够毫无问题地使用like按钮。会发生什么阻止您使用它？

# php - 使用 Zip 使用 jQuery AJAX 预填充城市/州表单

> ID：12784911
> 
> 赞同：1
> 
> 时间：2012-10-08T15:36:16.833
> 
> 标签：php, jquery, mysql, ajax

我遇到了一个问题，我可以通过提交一个表单并调用一个数据库来检索/回显信息来解决这个问题，但是 AJAX 似乎有点不同（这就是我需要的）。在表单过程的早期，我要求提供邮政编码，如下所示：

```
<input type="text" maxlength="5" size="5" id="zip" /> 
```

然后我有一个按钮可以继续，但是这个按钮只运行一个显示表单其余部分的 javascript 函数。当表格的其余部分显示时，我想用他们的城市预先填充 City 输入，并用他们的状态预先填充 State 下拉列表。我想我必须找到一种方法将城市/州设置为变量，并将变量回显到表单中。但我不知道如何使用 AJAX 获取/设置这些变量，而不是表单提交。以下是我在没有 ajax 的情况下是如何做到的：

```
$zip = mysql_real_escape_string($_POST['zip']);
$q = " SELECT city FROM citystatezip WHERE zip = $zip"; 
$r = mysql_query($q); 
$row = mysql_fetch_assoc($r); 
$city = $row['city']; 
```

任何人都可以帮助我使用 AJAX 设置这些变量吗？谢谢！

# javascript - CKEditor 文件管理器在上传文件时卡住了？

> ID：12784916
> 
> 赞同：0
> 
> 时间：2012-10-08T15:36:25.823
> 
> 标签：javascript, file-upload, ckeditor, file-manager

我正在使用[CKEditor](http://ckeditor.com/)，它是内置的文件管理器，允许人们更改内容/将图像上传到他们的网站。

一切正常，除了文件管理器，如果你上传一张图片，它会卡住加载，声称它是“传输数据”，除非页面被刷新，否则它将继续显示这个加载器。

奇怪的是，在重新加载页面时，您可以看到文件已成功上传。

有没有人遇到过这个问题？有谁知道是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:50:00.227

结果发现有几个过时的文件潜入实时站点上的文件管理器目录，不知道如何或为什么，但这就是导致此问题的原因。

# php - PHP rename() - 权限被拒绝

> ID：12784919
> 
> 赞同：2
> 
> 时间：2012-10-08T15:36:30.570
> 
> 标签：php

> **可能重复：**
> [PHP 函数重命名权限被拒绝](https://stackoverflow.com/questions/11773708/php-function-rename-permission-denied)

我上传了一个文件并将其权限更改为 0777。fileperms() 告诉我“33279”应该等于 0777。

为什么我仍然收到“权限被拒绝”警告？是文件所有者的问题吗？我可以使用 chown() 来解决不知道所有者应该是谁的问题。

```
rename(/Users/stefan/Sites/bla/Rachel.png,banner.png) [function.rename]: Permission denied 
```

不知道如何进一步调试。

编辑：为什么投反对票？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T16:13:55.983

如果您的代码看起来像

```
rename('/Users/stefan/Sites/blah/Rachel.png', 'banner.png') 
```

**并且**您当前的工作目录**不是**那个目录**，**`.../blah`您正在尝试重命名并将文件移动到脚本的当前目录实际上是什么。这将是您没有写入权限的目录，导致 perm。拒绝错误。

 **更改为

```
rename('/Users/stefan/Sites/blah/Rachel.png', '/Users/stefan/Sites/blah/banner.png'); 
```

将解决问题，或

```
chdir('/Users/stefan/Sites/blah');
rename('Rachel.phg', 'banner.png'); 
```**

# .net - 从 SQL 服务器发送 http 请求

> ID：12784923
> 
> 赞同：1
> 
> 时间：2012-10-08T15:36:43.067
> 
> 标签：.net, sql, sql-server, sqlclr

我们有一个系统，其中数据是从外部第 3 方源（我无法控制）复制的。处理源数据的唯一方法是通过 Web 服务。

对于每个新复制的行，我必须通过发送 Web 请求来更新外部数据库中的另一个表。

我知道这可以通过简单地编写一个发送 http 请求的 SQLCLR 例程来实现。我的问题是：从架构的角度来看，这是正确的方法吗？这不被认为是滥用 CLR 集成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:10:41.347

我想说您已经确定了使用 CLR 的绝佳场景。Microsoft 发布了一个关于 CLR 与 TSQL 的很好的概述，以及何时使用一个而不是另一个 -*我在下面提供了链接*。

由于您通过 .Net 技术访问 SQL Server 之外的资源，我认为您的方法非常明确地支持 CLR。

[http://msdn.microsoft.com/en-us/library/ms131045(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms131045(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:12:36.487

是的，通过 SQLCLR 访问 Web 服务是对 SQLCLR 功能的正确使用。

您唯一需要注意的是数据库一侧的超时。Web 服务并不以快速响应而闻名。

# php - php数组一次显示两个标题

> ID：12784924
> 
> 赞同：0
> 
> 时间：2012-10-08T15:36:45.700
> 
> 标签：php

我有一个包含 28 个标题的数组，我需要遍历数组并一次将 2 个项目（标题）显示到以下 html 中：

```
<ul>
    //start loop here for all items in array
    <li>
        //display two titles in seperate divs
        <div class="item1">
            <h1>title[x]</h1>
        </div>
        <div class="item2">
            <h1>title[x]</h1>
        </div>
    </li>
    //repeat...
</ul> 
```

所以基本上它输出如下：

```
<ul>
    <li>
        <div>
            <h1>Title 1</h1>
        </div>
        <div>
            <h1>Title 2</h1>
        </div>
    </li>
    <li>
        <div>
            <h1>Title 3</h1>
        </div>
        <div>
            <h1>Title 4</h1>
        </div>
    </li>
    <li>
        <div>
            <h1>Title 5</h1>
        </div>
        <div>
            <h1>Title 6</h1>
        </div>
    </li>
    //etc..
</ul> 
```

这是我迄今为止尝试过的，显然它只是重复了两个标题。

```
<div id="work-list">

    <ul class="work-list-cat group">

    <?php if (!empty($this->intro_items)) { 

    foreach($this->intro_items as $id => $item) {
        $itemarray[] = $item;
    }

    $count = count($itemarray);

    $item = 1;

    for($y = 0; $y < $count; $y++) {
    ?>

    <li style="width:33.333333333333333333333333333333%; height:100%; float:left;">

        <?php 
                for($x=0; $x<$item; $x++){ ?>
                <div style="width:100%; height:50%; float:left; background-color:#333;">
                <?php echo $itemarray[$y]->title; ?>
                </div>
                <div style="width:100%; height:50%; float:left; background-color:#444;">
                <?php echo $itemarray[$y]->title; ?>
                </div>
            <?php   } ?>
    </li>

    <?php } ?>

    <?php } ?>

    </ul>

</div>  <?php //End of #work-list ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:41:01.983

啊，我想你被难住了，因为它不能使用`foreach`循环？像这样的时候，好的 ol' for 循环会派上用场，一次将索引增加 2。像这样的东西可能是您正在寻找的东西：

```
<ul>
    <?php for ($i = 0; $i < count($array); $i += 2) { ?>
    <li>
        //display two titles in seperate divs
        <div class="item1">
            <h1><? echo $array[$i]; ?></h1>
        </div>
        <div class="item2">
            <h1><? if ($i + 1 < count($array)) echo $array[$i + 1]; ?></h1>
        </div>
    </li>
    <? } ?>
</ul> 
```

注意：它不适用于具有奇数个元素的数组，但看到你有 28 个，这应该不是问题。编辑：当元素数量为奇数时，它只会在最后打印一个空的 div 和 h1-tag。

PS：由于您没有提出真正具体的问题，因此我可能完全误解了您的问题。如果这对您没有帮助，请尝试更准确地提出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:42:57.633

我通常不会给出这样的代码，但我们开始吧：

```
<ul>
<?php for($i=0;$i<28;$i+=2){
    echo '
    <li>
        <div class="item1">
            <h1>'.$title[$i].'</h1>
        </div>
        <div class="item2">
            <h1>'.$title[$i+1].'</h1>
        </div>
    </li>';
  } ?>
</ul> 
```

# javascript - 在 JavaScript 中复制数组变量？

> ID：12784928
> 
> 赞同：1
> 
> 时间：2012-10-08T15:37:02.517
> 
> 标签：javascript

请有人告诉我为什么这个操作会改变原始数组的值？

```
var today = new Date(); 
var max_x_domain = [today];

var one_year_after_end = max_x_domain.slice(0)[0];
one_year_after_end.setYear(one_year_after_end.getFullYear() - 1);

console.log('array after operation', max_x_domain); 
```

我怎样才能复制`max_x_domain[1]`...我需要使用[这里描述](http://my.opera.com/GreyWyvern/blog/show.dml/1725165)的克隆方法吗？

这是…… JavaScript 的一个令人惊讶的特性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:41:22.123

如果您认为您的数组包含对象引用，这一点也不奇怪。[正如 MDN文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)的这一部分所述：

> 对于对象引用（而不是实际对象），`slice`将对象引用复制到新数组中。原始数组和新数组都引用同一个对象。如果引用的对象发生更改，则更改对新数组和原始数组都可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:39:38.797

```
var dateToCopy = new Date();

var newDate = new Date(dateToCopy); 
```

**重构代码**

```
var today = new Date(); 
var max_x_domain = [today];

var one_year_after_end = new Date(max_x_domain.slice(0)[0]);
one_year_after_end.setYear(one_year_after_end.getFullYear() - 1);

console.log('array after operation', max_x_domain); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T15:43:47.563

使用`slice`时创建一个副本并因此创建一个新数组，而不修改原始数组。但是里面的元素不会被复制/克隆，除非它们是原始类型（布尔、字符串、数字）。由于您在那里有一个日期对象，因此将创建一个新数组，但对您的日期对象的相同引用将被“复制”。因此，如果您想拥有一个新的日期对象，请执行`new Date(oldDate)`/`var one_year_after_end=new Date(max_x_domain.slice(0)[0])`并且您可以从那里修改它而无需修改原始日期对象。

# r - 绘制连续变量的两个直方图，条形彼此相邻而不是重叠

> ID：12784929
> 
> 赞同：2
> 
> 时间：2012-10-08T15:37:03.513
> 
> 标签：r, plot, histogram

我试图在一个图中绘制两个直方图，但是这两组的分布方式使得直方图有点难以解释。我的直方图现在看起来像这样：

![在此处输入图像描述](../Images/faa4d90a03df4c6f35c1a23da099a9e3.png)

这是我的代码：

```
hist(GROUP1, col=rgb(0,0,1,1/2), breaks=100, freq=FALSE,xlab="X",main="")  # first histogram
hist(GROUP1, col=rgb(1,0,0,1/2), breaks=100, freq=FALSE , add=T)  # second
legend(0.025,600,legend=c("group 1","group 2"),col=c(rgb(1,0,0,1/2),rgb(0,0,1,1/2)),pch=20,bty="n",cex=1.5) 
```

是否可以绘制此直方图，使两组的条形图彼此相邻，而不是重叠？我意识到这可能会增加一些混乱，因为 X 轴代表一个连续变量......当然也欢迎其他关于如何使这个图更清晰的建议！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T15:41:46.373

与其搞乱重叠的直方图，不如：

1.  在单独的面板中有两个直方图，即

    ```
    par(mfrow=c(1,2))
    d1 = rnorm(100);d2 = rnorm(100);
    hist(d1);hist(d2) 
    ```

2.  或者，使用密度图

    ```
    plot(density(d1))
    lines(density(d2), col=2) 
    ```

3.  或者结合使用密度图和直方图

    ```
    hist(d1, freq=FALSE)
    lines(density(d2), col=2) 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T15:50:01.613

你可以滥用`barplot`它：

```
multipleHist <- function(l, col=rainbow(length(l))) {
    ## create hist for each list element
    l <- lapply(l, hist, plot=FALSE);

    ## get mids
    mids <- unique(unlist(lapply(l, function(x)x$mids)))

    ## get densities
    densities <- lapply(l, function(x)x$density[match(x=mids, table=x$mids, nomatch=NA)]);

    ## create names
    names <- unique(unlist(lapply(l, function(x)x$breaks)))

    a <- head(names, -1)
    b <- names[-1]
    names <- paste("(", a, ", ", b, "]", sep="");

    ## create barplot list
    h <- do.call(rbind, densities);

    ## set names
    colnames(h) <- names;

    ## draw barplot
    barplot(h, beside=TRUE, col=col);

    invisible(l);
} 
```

例子：

```
x <- lapply(c(1, 1.1, 4), rnorm, n=1000)
multipleHist(x) 
```

![一个图中的多个直方图](../Images/27408af9b6263166b896b79b8c2237c0.png)

**编辑：** 这是一个像 OP 建议的那样绘制 x 轴的示例。恕我直言，这是非常具有误导性的（因为条形图的箱不是连续值）并且不应*使用*。

```
multipleHist <- function(l, col=rainbow(length(l))) {
    ## create hist for each list element
    l <- lapply(l, hist, plot=FALSE);

    ## get mids
    mids <- unique(unlist(lapply(l, function(x)x$mids)))

    ## get densities
    densities <- lapply(l, function(x)x$density[match(x=mids, table=x$mids, nomatch=NA)]);

    ## create names
    breaks <- unique(unlist(lapply(l, function(x)x$breaks)))

    a <- head(breaks, -1)
    b <- breaks[-1]
    names <- paste("(", a, ", ", b, "]", sep="");

    ## create barplot list
    h <- do.call(rbind, densities);

    ## set names
    colnames(h) <- names;

    ## draw barplot
    barplot(h, beside=TRUE, col=col, xaxt="n");

    ## draw x-axis
    at <- axTicks(side=1, axp=c(par("xaxp")[1:2], length(breaks)-1))
    labels <- seq(min(breaks), max(breaks), length.out=1+par("xaxp")[3])
    labels <- round(labels, digits=1)
    axis(side=1, at=at, labels=breaks)

    invisible(l);
} 
```

![一个图中的多个直方图（修改的 x 轴）](../Images/052e50c270ee1cad544ebc44cb6285ba.png)

[请在github](https://github.com/sgibb/sgtools/blob/master/R/multipleHist-functions.R)上找到完整的源代码。

# c# - 使用构造函数或图形缩放位图的结果？

> ID：12784935
> 
> 赞同：2
> 
> 时间：2012-10-08T15:37:40.843
> 
> 标签：c#, asp.net, .net, graphics, bitmap

以下两个代码示例是等效的，因为它们会生成缩放图像。也就是说，第二个会产生更高质量的缩放图像吗？我正在使用.NET 4.5。

```
// The short.
using(Bitmap large = new Bitmap(input, width, height))
{
    // Do whatever.
}

// The long.
using(Bitmap large = new Bitmap(width, height))
{
    using(Graphics g = Graphics.FromImage(large))
    {
        g.CompositingQuality = CompositingQuality.HighQuality;
        g.SmoothingMode = SmoothingMode.HighQuality;
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;
        g.PixelOffsetMode = PixelOffsetMode.HighQuality;
        g.DrawImage(input, 0, 0, width, height);
    }
    // Do whatever.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:58:17.783

两者的区别在于，前一个使用默认值；

```
CompositingQuality: Default
SmoothingMode:      None
InterpolationMode:  Bilinear
PixelOffsetMode:    Default 
```

所以，是的，后者肯定会提高图像质量。

简化后，Bitmap 构造函数中的相关代码是（剥离了异常处理）之类的；

```
Graphics graphics = Graphics.FromImage((Image) this);
graphics.Clear(Color.Transparent);
graphics.DrawImage(original, 0, 0, width, height); 
```

...这几乎就是你所拥有的，除了你正在调整质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:47:25.923

两者之间存在细微的质量差异。第二个给出了一个稍微清晰的图像（很难看出差异 - 至少在我的测试图像中）。

我猜哪个最好是主观的，最重要的是，取决于图像的内容。

例如，较高的对比度选项**可能会**在减少带有叶子的树的照片时提供更好的细节，但**可能会**在新娘的面纱上产生波纹效果（更清晰并不总是更好）。

# android - 更改 html/xml 字符串的某些属性

> ID：12784952
> 
> 赞同：0
> 
> 时间：2012-10-08T15:39:00.570
> 
> 标签：android

我有一些字符串是一系列 html 段落：

```
<p style="text-align: justify;"><strong> strong text> <a href=\"skhf\">alink</a></p>
<p> another par </p> 
```

我想更改段落和链接样式，因此添加/删除属性。此外，我还想根据内容删除一些段落。我想我必须首先将此字符串转换为 xml 结构，然后将其恢复为字符串，对吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:15:34.930

`yourString.replace(oldChar, newChar)`如果没有太多更改，您可以这样做

# nslayoutconstraint - 在 UITableView 的标题视图上使用 NSLayoutConstraints

> ID：12784955
> 
> 赞同：16
> 
> 时间：2012-10-08T15:39:14.347
> 
> 标签：nslayoutconstraint

我正在尝试将 UIView 添加到 UITableView 的标题中，然后使用 NSLayoutConstraints 我想给它一个高度。

我浏览了 Apple Docs 和 WWDC 2012 视频，但我在任何地方都找不到这个特定的错误！

我有以下代码：

```
- (UIImageView *)logoImageView
{
    if (!_logoImageView) {
        _logoImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"logo"]];
        [_logoImageView setTranslatesAutoresizingMaskIntoConstraints:NO];
    }
    return _logoImageView;
} 
```

...在*viewDidLoad*

```
UIView *tableHeaderView = [[UIView alloc] init];
tableHeaderView.translatesAutoresizingMaskIntoConstraints = NO;

[tableHeaderView addSubview:self.logoImageView];

[self.tableView setTableHeaderView:tableHeaderView];

NSDictionary *constraintViews = @{@"tableView" : self.tableView, @"tableHeaderView" : tableHeaderView, @"logoImageView" : self.logoImageView};

[self.tableView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[tableHeaderView(50)]"
                                                                       options:0
                                                                       metrics:nil
                                                                         views:constraintViews]]; 
```

但是，当我运行它时，我收到以下错误：

```
2012-10-08 16:31:34.559 myApp[6934:c07] *** Assertion failure in -[UITableView layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2012-10-08 16:31:34.561 myApp[6934:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UITableView's implementation of -layoutSubviews needs to call super.'
*** First throw call stack:
(0x199b012 0x17c0e7e 0x199ae78 0x1256f35 0x7589ef 0x17d46b0 0x622fc0 0x61733c 0x622eaf 0x7f78cd 0x7401a6 0x73ecbf 0x73ebd9 0x73de34 0x73dc6e 0x73ea29 0x741922 0x7ebfec 0x738bc4 0x738dbf 0x738f55 0x741f67 0x705fcc 0x706fab 0x718315 0x71924b 0x70acf8 0x27e8df9 0x27e8ad0 0x1910bf5 0x1910962 0x1941bb6 0x1940f44 0x1940e1b 0x7067da 0x70865c 0x6d5d 0x2395)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:24:28.757

当我尝试设置表头视图时，我遇到了同样的异常。当我注意到视图有约束时，我只是取消了情节提要中的“使用自动布局”选项。

截图：http: [//i.stack.imgur.com/5jWHy.png](http://i.stack.imgur.com/5jWHy.png)

这为我解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T15:59:06.780

克服这个问题的最好方法是使用 Interface Builder 设置`UITableView`标题，然后将 Outlet 添加到 height `NSLayoutConstraint`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T19:16:06.217

试试这个：

```
logoImageView.translatesAutoresizingMaskIntoConstraints = YES; 
```

（如果不起作用，请尝试删除：

```
tableHeaderView.translatesAutoresizingMaskIntoConstraints = NO;  //Remove this line 
```

:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-28T14:22:17.113

我没有为这个问题找到任何适当的解决方案，但您可以通过使用框架来修复它，而不是将 translatesAutoresizingMaskIntoConstraints 属性设置为 No（默认情况下是，所以不要设置它）

```
CGRect headerViewFrame = CGRectMake(0,0,320,60); //Frame for your header/footer view

UIView *tableHeaderView = [[UIView alloc] initWithFrame:headerViewFrame];
tableHeaderView.translatesAutoresizingMaskIntoConstraints = Yes; //Or don't set it at all
[self.tableView setTableHeaderView:tableHeaderView]; 
```

# jquery - MVC jquery 自动完成，我如何选择选定的 Id？

> ID：12784956
> 
> 赞同：1
> 
> 时间：2012-10-08T15:39:16.550
> 
> 标签：jquery, asp.net-mvc

在我看来，我有；

```
@using (Ajax.BeginForm("AddExistingSite", new AjaxOptions { UpdateTargetId = "siteRows" }))
            {

                <input type="text" name="q" style="width: 800px" 
                       data-autocomplete="@Url.Action("SiteSearch", "DataService", new { contractId = @Model.Contract.ContractId })" />
                <input type="submit" value="Add site to contract" />
            } 
```

在我的控制器中，我有

```
public ActionResult SiteSearch(string term, int contractId)
    {
        using (var db = new SherryGreenGroupEntities())
        {
            var sites = db.Sites
                .Include("SiteContracts")
                .Where(x => x.SiteContracts.All(y => y.ContractId != contractId || y.EndDate.HasValue)  &&
                    x.Address.Contains(term))
                .Take(10)
                .Select(x => new { id = x.SiteId, label = x.Address }).ToList();
            return this.Json(sites, JsonRequestBehavior.AllowGet);
        }
    } 
```

我已经设置了 jquery；

```
$(":input[data-autocomplete]").each(function () {
    $(this).autocomplete({ source: $(this).attr("data-autocomplete") });
}); 
```

现在自动完成功能正在工作，但我想知道我该怎么做才能获取所选项目的 ID，以便将其发布到控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:52:08.283

目前，您的表单内只有一个文本字段将保存所选值。如果您需要相应的 id，您可以添加一个隐藏字段，用于存储此信息：

```
@using (Ajax.BeginForm("AddExistingSite", new AjaxOptions { UpdateTargetId = "siteRows" }))
{
    <input type="text" name="q" style="width: 800px" data-autocomplete="@Url.Action("SiteSearch", "DataService", new { contractId = @Model.Contract.ContractId })" />
    <input type="hidden" name="itemId" class="itemId" />
    <input type="submit" value="Add site to contract" />
} 
```

然后订阅[`select`](http://jqueryui.com/demos/autocomplete/#event-select)自动完成的事件并用相应的值更新它：

```
$(':input[data-autocomplete]').each(function () {
    $(this).autocomplete({
        source: $(this).attr('data-autocomplete'),
        select: function (event, ui) {
            $(this).closest('form').find('.itemId').val(ui.item.value);
        }
    });
}); 
```

现在在目标控制器操作中，获取标签和 id 是微不足道的：

```
[HttpPost]
public ActionResult AddExistingSite(string q, string itemId)
{
    ...
} 
```

显然，这一切只是一个原始的例子。在实际应用程序中，您不应该在视图中对输入字段进行硬编码，而是应该使用 HTML 助手来生成它们，并且显然应该使用视图模型。

# jsf-2 - Primefaces Datatable 过滤器值在数据表刷新后丢失

> ID：12784958
> 
> 赞同：12
> 
> 时间：2012-10-08T15:39:31.153
> 
> 标签：jsf-2, primefaces

我正在使用 JSF 2.0 和 Primefaces 3.2。我有一个带有数据表的主表单，每行上有一个按钮，它会弹出一个带有另一个数据表的对话框。对话框有自己的形式。在对话框中选择数据表行时，我处理选择，然后在主窗体中刷新数据表。刷新后，我在主数据表上的所有过滤器都丢失了。有没有办法记住过滤器值？

**我的 JSF 页面**

```
<h:panelGroup id="mainTable">
<h:form id="mainForm" prependId="false">                
<p:dataTable id="cl_grid1" var="item"    widgetVar="mainGrid"
                value="# {controller.items}">

<p:column headerText="Colum1" filterMatchMode="contains" filterBy="#{item.myObj.code}" sortBy="#{item.myObj.code}">
                        <h:outputText value="#{item.myObj.code}" style="float:left" />

                        <p:commandButton id="selectBtn" icon="select"
                            oncomplete="selectDialog.show()" actionListener="#{controller.setMainItem}">
                            <f:param name="selectedMainItem" value="#{item.id}"/>
                        </p:commandButton>

                </p:column>

</p:dataTable
</h:form>
</h:panelGroup>

<p:dialog id="cl_selectDialog" header="Select AAAA" dynamic="true" modal="true" widgetVar="selectDialog" 
    height="500" width="900" showEffect="explode" hideEffect="explode">

        <h:form id="selectForm" prependId="true">

            <p:dataTable id="cl_selectGrid" var="selectorItem"    widgetVar="selectGrid"
                value="# {controller.selectorItems}" selection="#{controller.selectedItem}" 
rowKey="#{selectorItem.id}" selectionMode="single">

            <p:commandButton actionListener="#{controller.processSelection}" value="Ok" icon="ui-icon ui-icon-search" 
                                    oncomplete="selectDialog.hide()" update=":mainTable" process="@form"/>
            <p:commandButton value="Cancel" icon="ui-icon ui-icon-search" onclick="selectDialog.hide()" type="button"/>
        </h:form>
    </p:dialog> 
```

**我的控制器**

在我的控制器中，我所做的就是再次为我的数据表补水。

```
@Component
@Scope("view")
public class Controller extends BaseController implements Serializable {

private List<Item> items;

public Controller() {
    items = new ArrayList<Item>();  
}

@PostConstruct
public void init() {
    loadItems();
}

protected void loadItems() {
    items = //Load items from Database
}

public void processSelection(ActionEvent event) {
    //Add the selected Item and then reload items
    loadItems();
}

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-04T14:15:54.713

如果是 AJAX 请求，您可以在触发器组件上添加一个“oncomplete”方法，该方法具有：

```
<p: ... update='myDatatableId' oncomplete='myDatatableWidget.filter();' /> 
```

通过这种方式，您将重新触发数据表上的当前过滤器，或者您也可以使用清除所有过滤器

```
 ... oncomplete='myDatatableWidget.clearFilters();' ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:49:28.587

我们还提出了一个比 kolossus 发布的更优雅的解决方案，它就像扩展 PF Datatable 以获得持久过滤器值一样简单。

[http://www.stickysession.com/?p=258](http://www.stickysession.com/?p=258)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T12:34:57.723

Since you must to refresh the table from within its form (so it will preserve the filter state) another solution could be to place a hidden button in the main table form and use it as a 'proxy' by clicking it from your dialog, that way the filter will be preserved, like this

change your button from

```
 <p:commandButton actionListener="#{controller.processSelection}" value="Ok" icon="ui-icon ui-icon-search" 
     oncomplete="selectDialog.hide()" update=":mainTable" process="@form"/> 
```

into this (just a simple button that clicks the hidden one)

```
 <p:commandButton onclick="$('#my-proxy-button-id').click(); return false;" value="Ok" icon="ui-icon ui-icon-search"/> 
```

and add a new button inside the main table form

```
 <p:commandButton style="display:none;" id="my-proxy-button-id" actionListener="#{controller.processSelection}" 
     oncomplete="selectDialog.hide()" update="mainTable" process=":selectForm"/> 
```

using this technique you wont be needed to call for filtering manually and no additional "blinking" will appear on screen

# java - Hibernate：选择集合包含所有指定值的实体

> ID：12784960
> 
> 赞同：6
> 
> 时间：2012-10-08T15:39:35.617
> 
> 标签：java, hibernate, collections

我需要帮助解决棘手的休眠查询问题。我有以下实体：

```
public class Book {
   private String bookId;
   private String author;
   private String isbn;
   private Set<Tag> tags;
   // getters, setters etc.
} 
```

和

```
public class Tag  {
   private String tagId;
   private String tagName;
  // getters, setters, etc.
} 
```

两者之间存在多对多关联，由带有 book_id 和 tag_id 列的连接表 books_tags_mn 表示。

我喜欢做以下事情：我想创建一个休眠查询/条件查询，它返回所有具有**所有**特定标签集的书。起作用的是选择具有**任何**一组标签的所有书籍。

我一直在搞乱标准 API，但并没有真正理解它。所以我想做的是（在伪 HQL 中）

```
from Book book where book.tags containsAll(:tags) 
```

对此的任何帮助将不胜感激，因此在此先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:02:23.830

您可以使用以下查询：

```
select book from Book book
where :numberOfTags = (select count(tag.id) from Book book2
                       inner join book2.tags tag
                       where book2.id = book.id
                       and tag in (:tags)) 
```

其中`numberOfTags`是一组标签中必须匹配的标签数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-19T15:27:29.727

JB Nizet 接受的答案很好，但如果您的收藏可能包含重复项，则将无法使用（这可能是一个有效的原因，但可能不是标签示例）。

假设某些书籍的收藏可以包含具有相同名称“MyTag”的重复标签。然后搜索标签“MyTag”、“YourTag”可能会返回有 2 个“MyTag”标签但没有“YourTag”标签的书籍。

```
select b from Book b where :numberOfTags = (select count(distinct tag.tagName) from Book b2 inner join b2.tags tag where b2.id = b.id and tag.tagName IN (:tagNames)) 
```

正如我所说的接受的答案没有错，但是如果您需要支持集合中的重复项，那么您需要添加 count(distinct tag.name)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:16:13.967

我建议您创建两个自定义功能或限制：

```
 collect(book.tags) -> returns list of tags associated with the book

 containsAll(bookTagsList, tags) --> validates and returns true if all 
                                     tags elements are present in bookTagsList 
                                     returned by the first function "collect" 
```

定义和注册函数后，您将能够运行 HQL/标准查询，例如：

```
 from Book book where containsAll(collect(book.tags), :tags) 
```

或者

```
session.createCriteria(Book.class).add(
           Restrictions.add(collect("tags").containsAll(tags))
        ).list(); 
```

请注意：这只是一个示例伪代码来分享这个想法。

希望这可以帮助！

# java - URI 解析错误

> ID：12784965
> 
> 赞同：0
> 
> 时间：2012-10-08T15:39:59.203
> 
> 标签：java, android, uri

将数据作为 json 从 Android 移动设备发送到应用程序服务器时出现跟随错误。但如果我们从 PC 浏览器发送数据，应用程序可以正常工作。从android浏览器发送数据时我们必须做的事情吗？

```
Caused by: java.net.URISyntaxException: Illegal character in query at index 271: http://oracleapps.veeralab.com:8080/emyed-whiteboard/pubsub/27c95d04-9783-447b-b333-bcc7b3bbb6b7/01815406-7699-4c2c-ae4b-4eefdbbcbdf0.topic?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Atmosphere-Transport=polling&X-Cache-Date=0&X-Atmosphere-Post-Body=message={%22action%22:%22joinName%22,%22parameters%22:%22usersName%22:%22veera,%20job,%20ram%22,%22timestamp%22:1349724088883,%22user%22:%22job%22,%22whiteboardId%22:%2227c95d04-9783-447b-b333-bcc7b3bbb6b7%22}&jsonpTransport=jQuery180031574026358131124_1349709680844
        at java.net.URI$Parser.fail(URI.java:2829) [rt.jar:1.7.0_05]
        at java.net.URI$Parser.checkChars(URI.java:3002) [rt.jar:1.7.0_05]
        at java.net.URI$Parser.parseHierarchical(URI.java:3092) [rt.jar:1.7.0_05]
        at java.net.URI$Parser.parse(URI.java:3034) [rt.jar:1.7.0_05]
        at java.net.URI.<init>(URI.java:595) [rt.jar:1.7.0_05]
        at java.net.URI.create(URI.java:857) [rt.jar:1.7.0_05] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T08:59:27.560

要删除无效字符，请使用 URLEncoder 或 Uri Parsing，如下所示。

**从以下信息开始**

```
String BASE_URL = "http://oracleapps.veeralab.com:8080/emyed-whiteboard/pubsub/27c95d04-9783-447b-b333-bcc7b3bbb6b7/01815406-7699-4c2c-ae4b-4eefdbbcbdf0.topic"
String QUERY = "X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Atmosphere-Transport=polling&X-Cache-Date=0&X-Atmosphere-Post-Body=message={%22action%22:%22joinName%22,%22parameters%22:%22usersName%22:%22veera,%20job,%20ram%22,%22timestamp%22:1349724088883,%22user%22:%22job%22,%22whiteboardId%22:%2227c95d04-9783-447b-b333-bcc7b3bbb6b7%22}&jsonpTransport=jQuery180031574026358131124_1349709680844" 
```

**您可以使用 URLEncoder**

```
String url = BASE_URL + "?" + URLEncoder.encode(QUERY, "utf-8"); 
```

**或者您可以使用 Uri Parsing**

```
String uri = Uri.parse(BASE_URL)
            .buildUpon()
            .appendQueryParameter("X-Atmosphere-tracking-id", "0")
            .appendQueryParameter("X-Atmosphere-Framework", "1")
            .appendQueryParameter("X-Atmosphere-Post-Body", "message={%22action%22:%22joinName%22,%22parameters%22:%22usersName%22:%22veera,%20job,%20ram%22,%22timestamp%22:1349724088883,%22user%22:%22job%22,%22whiteboardId%22:%2227c95d04-9783-447b-b333-bcc7b3bbb6b7%22}")
            ... //your other params
            .build().toString(); 
```

我的建议是使用 Uri Parsing 方法来确保不编码不应该编码的内容，但您仍然以有效的 uri 结尾。

# android - 程序化安装应用程序 + 更改默认消息 + Android

> ID：12784968
> 
> 赞同：1
> 
> 时间：2012-10-08T15:40:10.170
> 
> 标签：android, android-intent

我正在开发一个应用程序，我们不想将应用程序放在 Google Play 上，因此应用程序的应用程序和更新在我们的服务器上。

现在，当我们从服务器下载后以编程方式更新应用程序时，Android 默认显示一条消息“替换应用程序消息：您正在安装的应用程序将替换另一个应用程序。**所有以前的用户数据都将被保存。** ”。

![信息](../Images/61bd035b7f544538cc285fa7e27a22b8.png)

在我们的应用程序中，我们刷新应用程序数据库，因此该特定应用程序的先前用户数据将丢失，因此在这种情况下，我想删除或更改上述消息。

您能帮我如何更改此默认消息吗？

我的重新安装代码如下：

```
public static boolean install(Context context, String downloadPath){
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(new File(downloadPath+"/"+"MYAPP.apk")), "application/vnd.android.package-archive");
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    context.startActivity(intent);
    Log.d("INSTALLATION DONE", "***App installed");
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:16:44.930

> 您能帮我如何更改此默认消息吗？

第 1 步：从[http://source.android.com将源代码下载到 Android 操作系统](http://source.android.com)

步骤 #2：修改操作系统以删除此消息

第 3 步：将修改后的操作系统打包到修改后的 ROM 中，用于您将分发给应用用户的设备

步骤#4：在这些设备上安装修改后的 ROM

IOW，此消息不是由您的应用程序显示，而是由操作系统本身显示，您无法从您的应用程序更改该行为。

# php - 在 cURL 方面需要帮助。需要替换ajax调用

> ID：12784969
> 
> 赞同：0
> 
> 时间：2012-10-08T15:40:12.250
> 
> 标签：php, ajax, curl

我的客户希望我实现一个页面。在此页面上，我使用 AJAX 进行了 API 调用（如代码所示）。

```
jQuery.ajax({
    url: endpoint,
    type: "POST",
    cache:false,
    data: {
            url:"link-rest/sweepstakes/claim",
            userId:193298,
            prizeRank:2,
            sweepStakeId:186
          },
    dataType: "json",
    headers: {
                Authorization:token
             },
    success: function(json){
            callback(json);
            },
    error: function(xhr, status, error){
            callback(errorHandle(2));
            }
}); 
```

但现在他也想将此页面用于 SEO。为此，我必须在 php.ini 中进行 API 调用。我以前从未使用过 cURL。stackoverflow 上的示例似乎对我不起作用。我已经安装了 Wamp Server 并且 php_curl 扩展已被激活。wamp 的所有服务也已重新启动。这就是我试图实现的。

```
 $json_url = 'link-rest/sweepstakes/claim&userId=193298&prizeRank=2&sweepStakeId=186&Authorization=ams0TGpFek5EazBNekExTmprd01EYz1NVGt6TQ';

    $ch = curl_init($json_url);

    $options = array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_HTTPHEADER => array('Content-type: application/json'),
    );

    curl_setopt_array($ch, $options);

    $result = curl_exec($ch);
    var_dump(json_decode($result)); 
```

但是我屏幕上打印的所有内容都是“空的”。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:43:18.667

代码的基本问题是您使用的是相对 URI 而不是绝对的。

您似乎还试图提供以 JSON 编码的请求，但 Ajax 似乎使用标准表单编码，并且只期望*响应中的 JSON*

一个更根本的问题是您首先使用的是 cURL。`link-rest/sweepstakes/claim`大概是通过 PHP 处理的，因此您应该将要调用的位重构到库中，然后从您正在编写的函数中调用该库。（同时将处理 Ajax 请求的页面变成围绕它的简单视图）。

# python - Python：检查 facebook 用户访问令牌是否过期

> ID：12784970
> 
> 赞同：0
> 
> 时间：2012-10-08T15:40:18.363
> 
> 标签：python, facebook, facebook-graph-api

我正在使用[facepy](https://facepy.readthedocs.org/en/latest/usage/utilities.html#facepy.utils.get_extended_access_token) facebook api 从我的 facebook 帐户中获取消息。我`long live access token`使用 API 的有效期为 60 天。现在，在我的程序中查询消息之前，我想检查我的令牌是否已过期，如果过期则获取一个新的。

我正在使用 [get_extended_access_token](https://facepy.readthedocs.org/en/latest/usage/utilities.html#facepy.utils.get_extended_access_token)，它还返回一个描述令牌何时过期的日期时间实例。现在我认为这不是一种有效的使用方式，`get_extended_access_token`因为每次我要查询新消息时，它也会获取`access token`（我知道它和以前一样）但我认为这是一个开销。

所以，我用谷歌搜索，发现我们也可以使用

```
https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN 
```

调试[令牌](https://developers.facebook.com/docs/authentication/access-token-debug/)

所以我提供了我的`long live access token`代替，`INPUT_TOKEN and ACCESS_TOKEN`它给了我一个 json 响应：

```
{
   "data": {
      "app_id": XXXXX,
      "is_valid": true,
      "application": "YYYYY",
      "user_id": ZZZZZZ,
      "issued_at": 1349261684,
      "expires_at": 1354445684,
      "scopes": [
         "read_mailbox"
      ]
   }
} 
```

现在，如果您查看`expires_at`它显示的字段`1354445684 seconds`，当我尝试将其转换为天/月时，它给了我`15676 days`，当我使用它显示的调试选项在图形资源管理器中检查相同的标记时

```
expires_at: 1354445684(about 2 months) 
```

现在，我不明白的是如何`1354445684`等效于`2 months`以及如何在 python 中实现这一点。

还评论哪个是检查令牌是否过期的更好方法`API or using the facebook url`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T15:48:50.690

> 现在，如果您查看 expires_at 字段，它显示 1354445684 秒，当我尝试将其转换为天/月时，它给了我 15676 天

然后你做错了（或理解）了一些错误。

`expires_at`1354445684 是一个 Unix 时间戳，等于`Sun, 02 Dec 2012 10:54:44 +0000`翻译成人类可读的日期。

这距离`issued_at`时间戳 1349261684 差不多两个月，又名`Wed, 03 Oct 2012 10:54:44 +0000`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T13:56:37.230

我建议您依靠异常来验证令牌是否有效，而不是发出单独的请求来保证它：

```
from facepy import GraphAPI

graph = GraphAPI(token)

try:
    graph.get('me')
except GraphAPI.OAuthError:
    # Redirect the user to renew his or her token 
```

# php - PHP 使用正则表达式验证 CRON

> ID：12784974
> 
> 赞同：3
> 
> 时间：2012-10-08T15:40:27.257
> 
> 标签：php, regex, cron

> **可能重复：**
> [使用 PHP 验证 Crontab 条目](https://stackoverflow.com/questions/235504/validating-crontab-entries-w-php)

我到处搜索，而且我的正则表达式很差，所以我寻求帮助。

我正在构建一个基于 Web 的 CRON 工具，表单可以而且只会将以下内容传递给处理脚本。`'0-99' ',' '*' '-' '/'`

我想用 PHP 中的简单 preg_match 验证输入，但似乎无法提出正确的正则表达式。有人可以帮忙吗？此外，我将验证 cron 中的每个项目，即不是 * * * * * 而是分钟值，然后是小时值等。这允许发回更具体的错误。

传递值的示例是

```
*
0,10
*/5
1,3,5
1-5 
```

这是一个糟糕的尝试，只是匹配数字和 * /[0-9*]/ 任何帮助都会很棒。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T16:05:47.313

让我们来看看：

```
$pattern = '/^(?:[1-9]?\d|\*)(?:(?:[\/-][1-9]?\d)|(?:,[1-9]?\d)+)?$/'; 
```

此模式将允许您匹配有效 CRON 句子的合理子集。它确实与您的每一个示例都匹配。不过，确切的模式取决于您定义的语法。

**编辑**
忘了提到单独的正则表达式匹配不会削减它。它可以做的是检查输入在（您的简化）语法方面是否正确。除此之外，您将需要验证有关语义的输入（例如，0-23 小时；1-30/1 天等）。

# android - 如何制作可以与我的 Android 手机通信的网络服务器？

> ID：12784977
> 
> 赞同：2
> 
> 时间：2012-10-08T15:40:32.323
> 
> 标签：android, web

```
package com.yarin.android.Examples_08_01;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

//以Get方式上传参数
public class Activity03 extends Activity {
    private final String DEBUG_TAG = "Activity03";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.http);
        TextView mTextView = (TextView) this.findViewById(R.id.TextView_HTTP);
        // http address "?par=abcdefg" is the argument to be posted
        String httpUrl = "http://192.168.0.100:8080/httpGet.jsp?par=test";
        // 获得的数据
        String resultData = "";
        URL url = null;
        try {
            // 构造一个URL对象
            url = new URL(httpUrl);
        } catch (MalformedURLException e) {
            Log.e(DEBUG_TAG, "MalformedURLException");
        }
        if (url != null) {
            try {
                // 使用HttpURLConnection打开连接
                HttpURLConnection urlConn = (HttpURLConnection) url
                        .openConnection();
                // 得到读取的内容(流)
                InputStreamReader in = new InputStreamReader(
                        urlConn.getInputStream());
                // 为输出创建BufferedReader
                BufferedReader buffer = new BufferedReader(in);
                String inputLine = null;
                // 使用循环来读取获得的数据
                while (((inputLine = buffer.readLine()) != null)) {
                    // 我们在每一行后面加上一个"\n"来换行
                    resultData += inputLine + "\n";
                }
                // 关闭InputStreamReader
                in.close();
                // 关闭http连接
                urlConn.disconnect();
                // 设置显示取得的内容
                if (resultData != null) {
                    mTextView.setText(resultData);
                } else {
                    mTextView.setText("读取的内容为NULL");
                }
            } catch (IOException e) {
                Log.e(DEBUG_TAG, "IOException");
            }
        } else {
            Log.e(DEBUG_TAG, "Url NULL");
        }
        Button button_Back = (Button) findViewById(R.id.Button_Back);
        /* 监听button的事件信息 */
        button_Back.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                /* 新建一个Intent对象 */
                Intent intent = new Intent();
                /* 指定intent要启动的类 */
                intent.setClass(Activity03.this, Activity01.class);
                /* 启动一个新的Activity */
                startActivity(intent);
                /* 关闭当前的Activity */
                Activity03.this.finish();
            }
        });
    }
} 
```

对于上面的代码，我了解它是如何工作的。它作为应用程序运行，需要与 Web 服务器通信。

但我不知道如何制作一个可以作为“http://192.168.0.100:8080/httpGet.jsp”容器的 Web 服务器。

我做了一些调查。

(1) 在 Android 手机上，, `i-jetty`,`kws`可能`atieews`会有所帮助，但我未能让它们达到我的目的。

(2) 在 PC 上，`tomcat`作为 jsp 容器是一个不错的选择。但它提供了`localhost:8080`地址，这意味着只有在 PC 上运行的应用程序才能与其通信。我对吗？如何让我的安卓手机连接tomcat（在我的电脑上运行）？

(3) 还有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:55:48.223

要制作可以与您的 android 应用程序通信的服务器，您可以使用 SOAP 服务或 JSON。这两个是最常用的（JSON 更快，在我看来更好用，但可以讨论）。

查看有关如何为您的 android 应用程序创建服务器端应用程序的一些教程。如果您较新地设置服务器，这不是一件容易的事。

# colors - MPMoviePlayerViewController的done按钮颜色怎么改

> ID：12784978
> 
> 赞同：0
> 
> 时间：2012-10-08T15:40:34.643
> 
> 标签：colors, ios6, mpmovieplayercontroller

MPMoviePlayerViewController的完成按钮的颜色怎么改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:23:27.863

找到了解决方案：

```
[[UIBarButtonItem appearance] setTintColor:[UIColor colorWithRed:161.0/255.0 green: 52.0/255.0 blue: 238.0/255.0 alpha: 1.0]]; 
```

# java - 如何使用 里面 素面？

> ID：12784980
> 
> 赞同：2
> 
> 时间：2012-10-08T15:40:42.833
> 
> 标签：java, jsf, primefaces

我正在使用 `<p:tree>`. 并尝试使用`<p:ajax>`来检测所选节点并执行操作。这是我实际的 JSF 代码：

```
<p:tree id="treeDot" value="#{beanRequest.rootDot}" var="node"  selectionMode="single"
    nodeSelectListener="#{beanRequest.clt}" >
    <p:ajax event="select" listener="#{beanRequest.clientSelected}" />
        <p:treeNode>
            <h:outputText value="#{node}" />
        </p:treeNode>
</p:tree> 
```

服务器端方法：

```
//...
private Client clt;
public void clientSelected(NodeSelectEvent event) {
    //...
}
//... 
```

我得到以下异常：

```
8 oct. 2012 17:30:01 com.sun.faces.context.PartialViewContextImpl processPartial
INFO: java.lang.NullPointerException
java.lang.NullPointerException
    at org.primefaces.component.api.UITree.findTreeNode(UITree.java:111)
    at org.primefaces.component.api.UITree.setRowKey(UITree.java:78)
    at org.primefaces.component.tree.TreeRenderer.decodeSelection(TreeRenderer.java:62)
    at org.primefaces.component.tree.TreeRenderer.decode(TreeRenderer.java:38)
    at javax.faces.component.UIComponentBase.decode(UIComponentBase.java:787)
    at org.primefaces.component.api.UITree.processDecodes(UITree.java:170)
    at org.primefaces.component.tree.Tree.processDecodes(Tree.java:366)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:506
)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at org.primefaces.component.api.UITree.visitTree(UITree.java:392)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at org.primefaces.component.tabview.TabView.visitTree(TabView.java:400)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIForm.visitTree(UIForm.java:371)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:23:30.250

我发现了错误。只需像这样 替换`nodeSelectListener="#{beanRequest.clt}"`并 `selection="#{beanRequest.selectedNode}"` 创建`selecttedNode`变量`beanRequest``private TreeNode selectedNode;`

# c# - 在互联网断开/重新连接时未调用 signalR stateChanged

> ID：12784981
> 
> 赞同：1
> 
> 时间：2012-10-08T15:40:50.593
> 
> 标签：c#, .net, signalr

在我的 signalR 应用程序中，我们需要检查用户是否已断开连接，这似乎可以正常工作，但是如果用户在网络级别断开连接（例如互联网断开连接），则它不起作用。

我正在尝试使用该`$.connection.hub.stateChanged(...);`事件，但是当我断开或重新连接到 Internet 时它不会被击中。

当我从互联网上删除连接时，连接似乎没有超时，并且断开任务没有被击中服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:35:13.017

在 0.5.3 中，客户端无法检测到这种类型的断开连接。这将在下一个版本（1.0alpha）中修复。

请参阅我对此的回应（应该澄清一些事情）：

[SignalR - 如何检测客户端连接/重新连接失败（例如超时）](https://stackoverflow.com/questions/12747770/signalr-how-to-detect-client-connect-reconnect-failure-e-g-timeout)

# ruby-on-rails - 在 Rails 中查询日期范围

> ID：12784991
> 
> 赞同：10
> 
> 时间：2012-10-08T15:41:08.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, timezone

我有一个查询今天的电话的范围。根据范围，我使用它来计算今天的呼叫量。

我的日期以 UTC 格式存储，但 rails 会转换为我的本地时区。我要做的是找到今天 00:00 到 23:59 之间的所有电话。

范围：

```
scope :today, where("DATE(transfer_date) BETWEEN ? AND ?", Time.zone.now.utc.beginning_of_day, Time.zone.now.utc.end_of_day) 
```

irb 输出：（由于 UTC 而捕获的调用）

```
irb(main):010:0> Call.last.transfer_date
  Call Load (0.9ms)  SELECT "calls".* FROM "calls" ORDER BY "calls"."id" DESC LIMIT 1
=> Sun, 07 Oct 2012 19:45:00 CDT -05:00
irb(main):011:0> 

irb(main):011:0> Call.last.transfer_date.utc
  Call Load (1.3ms)  SELECT "calls".* FROM "calls" ORDER BY "calls"."id" DESC LIMIT 1
=> 2012-10-08 00:45:00 UTC 
```

我试图弄清楚如何只查询今天 00:00 到 23:59 之间的电话。到目前为止，尝试使用和不使用 UTC、区域等的范围都行不通。它不断根据 UTC 拉取范围，其中包括昨天的调用（如果它是使用本地时区格式化的，则为昨天）。

如何在两次之间查询以获得正确的输出？我有点迷失在这里。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-09T14:20:55.597

您可以使用独占范围。

```
scope :today, where(:transfer_date => Date.today...Date.tomorrow) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T14:16:03.353

我能够通过如下重写我的范围来补偿 UTC：

```
scope :today, where("transfer_date BETWEEN ? AND ?", Time.zone.now.beginning_of_day, Time.zone.now.end_of_day) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T08:18:12.427

也许这是矫枉过正，但我​​建议使用帮助方法来获取时间范围，然后查询数据库。就像是

```
# Gets time range for x number timeunits ago
  def time_range(unit, timeunit = nil)
    if timeunit == "weeks"
      now = Time.zone.now.beginning_of_week
    elsif timeunit == "months"
      now = Time.zone.now.beginning_of_month
    else
      now = Time.zone.now.beginning_of_day
    end
    # Ex: time_range(0, "days") --> Get the time range for today  between the beginning of today and the beginning of tommorow - 1 second
    now - unit.send(timeunit)..now + 1.send(timeunit) - 1.seconds - unit.send(timeunit)
  end 
```

将帮助您请求时间范围。所以当你请求类似的东西时；

```
time_range(0, "days") 
```

它将返回 0 天前（今天）的时间范围；

```
Wed, 07 Sep 2016 00:00:00 UTC +00:00..Wed, 07 Sep 2016 23:59:59 UTC +00:00 
```

然后您可以简单地查询数据库对象并计算范围内的所有内容；

```
Calls.where(transfer_date: time_range(unit, timeunit)).count 
```

# spring-mvc - 在 SpringMVC 应用程序中集成 Twitter Bootstrap

> ID：12784992
> 
> 赞同：2
> 
> 时间：2012-10-08T15:41:14.210
> 
> 标签：spring-mvc, twitter-bootstrap

我开始在 SpringMVC 中构建基本应用程序。同时，我想使用一些易于设置的 UI 框架，例如 Twitter Bootstrap。但是，不知道如何设置它。

问题：

1.  我在哪里放置下载的引导文件夹？

![在此处输入图像描述](../Images/e731a44f217c62856faf43b86252eda7.png)

![在此处输入图像描述](../Images/c90464a82de5a0a0d5bf60bbdb3be0ec.png) ![在此处输入图像描述](../Images/73d632eac699554d12c1ecaa5dfc5dcd.png)

到目前为止我所拥有的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:06:38.213

我会将这些放在 src/main/resources 中，而不是在 WEB-INF 下。这些不需要保护。

此外，请确保根据[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-static-resources)告诉 Spring 它们在调度程序 servlet 配置文件中的位置。

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

如果您也使用 Spring 安全性，则需要确保资源不受保护。

```
<http pattern="/resources/**" security="none"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:51:01.970

除非您计划编译自定义 css，否则您不需要 .less 文件。Maven 项目，您通常将它们放在资源文件夹中。资源/资产/css 和资源/资产/js

在 JSP 中：

```
<spring:url scope="page" var="bootstrapStylesheetUrl" value="/resources/assets/css/bootstrap.css"/>
<spring:url scope="page" var="bootstrapResponsiveStylesheetUrl" value="/resources/assets/css/bootstrap-responsive.css"/>
<spring:url scope="page" var="bootstrapJavascriptUrl" value="/resources/assets/js/bootstrap.js"/> 
```

然后在 head 标签中

```
<script src="${pageScope.bootstrapJavascriptUrl}"></script>
<link rel="stylesheet" href="${pageScope.bootstrapStylesheetUrl}"/>
<link rel="stylesheet" href="${pageScope.bootstrapResponsiveStylesheetUrl}"/> 
```

另外，不要忘记将 spring taglib 添加到 jsp 的顶部

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %> 
```

在您的 spring servlet 上下文配置（productmgmt-servlet.xml）中添加以下行：

```
<mvc:resources mapping="/resources/**" location="classpath:/"/> 
```