# StackOverflow 问答 13817000-13817999

# c# - 为什么我使用 C# 在 asp.net 的密码字段中获取旧密码？

> ID：13817001
> 
> 赞同：0
> 
> 时间：2012-12-11T09:13:19.697
> 
> 标签：c#, asp.net

我正在创建一个 asp.net 网站，用户可以在其中更改密码 .. 通过单击一个按钮，`changepassword`我将重定向到一个新的 asp 页面，其中我有一个用户代码字段和一个旧密码字段以及一个新密码字段，如下所示：

```
<table width="100%">
    <tr>
        <td>
            <asp:Label ID="Label5" runat="server" Text="User Code: "></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="txtusercd2" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="Label6" runat="server" Text="Enter Old Password: "></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="txtoldpwd" runat="server" TextMode="Password"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="Label7" runat="server" Text="Enter New Password: "></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="txtnewpwd" runat="server" TextMode="Password"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="Label8" runat="server" Text="Re-Enter New Password: "></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="txtrepwd" runat="server"></asp:TextBox>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="lblmsg2" runat="server" Text="Label"></asp:Label>
        </td>
    </tr>

    <tr>
        <td style="float:right">
            <asp:ImageButton ID="btnchngpwd" runat="server" ImageUrl="~/images/Save.png" />
        </td>
    </tr>
</table> 
```

现在的问题是，当我重定向到该页面时，我的代码归档和旧密码被用户登录详细信息填充，我不想填充旧密码归档。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:16:41.483

那是网络浏览器为您自动填充它。将`autocomplete="off"`属性添加到每个`<input />`被不当填充的元素。

# c++ - 如何在 embarcadero C++ builder 中设置编译器？

> ID：13817008
> 
> 赞同：1
> 
> 时间：2012-12-11T09:13:49.680
> 
> 标签：c++, ide, c++builder

如何在 embarcadero C++ builder 中设置编译器？我想将 bcc64 设置为编译器，但看不到它的选项，并且我的项目正在使用 bcc32 编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:25:43.013

IDE 会根据正在编译的文件类型和正在编译的平台为您选择编译器。如果要编译 64 位可执行文件，则必须进入项目管理器，先将 64 位平台添加到项目中，然后将其设置为活动平台。一个项目可以添加多个平台，每个平台都有自己的一组配置选项。这在[Embarcadero 的在线 wiki](http://docwiki.embarcadero.com/RADStudio/XE3/en/64-bit_Cross-Platform_Application_Development_for_Windows)上有详细介绍。

# c++ - QFilesystemModel 显示驱动器时，QTreeView 中的文件夹颜色可以更改吗？

> ID：13817010
> 
> 赞同：0
> 
> 时间：2012-12-11T09:13:55.233
> 
> 标签：c++, qt, qt4, directory, qfilesystemmodel

好吧，我一直在开发一个 Qt 应用程序，我需要在其中显示 Filesystem 使用`QFilesystemModel`。我已经能够按预期显示它。

**代码：**

```
QFileSystemModel *model = new QFileSystemModel;
model->setRootPath(QDir::currentPath())
tree->setModel(model); 
```

这将显示 QTreeView 中的所有驱动器。但是我们都知道，默认情况下，每个驱动器中存在的文件夹的颜色是**黄色**的。

这就是我想要改变的。Qt中有没有一种方法可以将文件夹的颜色更改为**“蓝色”**？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:31:45.093

您可以通过 qt 委托自定义 QTreeView。但如果只是为了一个图标，我认为你可以重新实现：

```
class MyQFileSystemModel : public QFileSystemModel {
public:
    QVariant data( const QModelIndex& index, int role ) const {

        if( role == Qt::DecorationRole ) { 
            return QVariant(QIcon(QPixmap("icon.png")));
        }

        return QFileSystemModel::data(index, role);
    }
}; 
```

要了解委托，我建议您研究示例：[Spin box delegate](http://doc.qt.digia.com/qt/itemviews-spinboxdelegate.html)

编辑：您必须从 QFileSystemModel 重新实现方法数据，您必须从 QFileSystemModel 继承。

然后你像以前一样做：

```
MyQFileSystemModel* model = new MyQFileSystemModel;
model->setRootPath(QDir::currentPath())
tree->setModel(model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:24:11.903

我认为解决方法是使用您自己的[fileIcon](http://doc.qt.digia.com/qt/qfilesystemmodel.html#fileIcon)。

Qt 使用当前平台的默认图标。我猜你在Windows上。

[这个问题](https://stackoverflow.com/questions/10246984/how-to-override-re-implement-a-member-function-in-qfilesystemmodel)提供了一些关于如何实施的线索。

（我刚开始自己​​学习 Qt，顺便说一句！）

# wpf - 为什么宽度属性不会从代码中改变 - WPF

> ID：13817011
> 
> 赞同：0
> 
> 时间：2012-12-11T09:13:55.803
> 
> 标签：wpf

我在 WPF 应用程序中有一个网格，其中包含 2 个网格。内部网格是宽度绑定 - 一个依赖于另一个。我用故事板从代码中更改了一个网格的宽度，它可以工作。但是当我尝试用另一种方法改变它时，它什么也没做。什么会导致这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:26:04.323

检查故事板是否经常将其最终值放入网格的宽度属性中，您可以通过为其设置停止的 FillBehavior 来关闭它。[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.fillbehavior.aspx)

```
<Storyboard FillBehavior="Stop"> 
```

# ios - 将一些 ios 代码集成到 PayPal 移动支付库中，并且在使用 NSDecimalNumber 时遇到了一些问题

> ID：13817013
> 
> 赞同：1
> 
> 时间：2012-12-11T09:14:21.477
> 
> 标签：ios, paypal, stack-overflow, nsdecimalnumber

我第一次上stackoverflow！我正在将一些 ios 代码集成到 PayPal 移动支付库中。根据规范，我将一个对象传递给提供的方法之一。该对象包含 NSDecimalNumber* 类型的必需属性。我使用了一些示例代码来设置此属性，但这会导致堆栈溢出。以下是我的代码中的一行：

```
details.subTotal = [NSDecimalNumber decimalNumberWithString: @"10.00"]; 
```

以下是消息日志的摘录：

```
2012-12-11 15:30:50.189 PayPalPOC3[595:f803] Initialization In Progress
2012-12-11 15:30:53.956 PayPalPOC3[595:f803] NSScanner: nil string argument 
2012-12-11 15:30:53.965 PayPalPOC3[595:f803] NSScanner: nil string argument 
2012-12-11 15:30:53.977 PayPalPOC3[595:f803] NSScanner: nil string argument 
2012-12-11 15:30:53.982 PayPalPOC3[595:f803] 10 
2012-12-11 15:30:58.394 PayPalPOC3[595:f803] Terminating app due to uncaught exception 'NSDecimalNumberOverflowException', reason: 'NSDecimalNumber overflow exception'  
First throw call stack: 
```

我用谷歌搜索并看到了使用这种类型的许多溢出问题，但仍然无法从我的研究中收集到任何明显的信息。我错过了什么明显的东西吗？

# c++ - 如何在静态单例类中以编程方式从 exec 方法返回

> ID：13817016
> 
> 赞同：0
> 
> 时间：2012-12-11T09:14:24.923
> 
> 标签：c++, qt, singleton, qdialog

我正在 SBC6000x 板上开发 Qt 应用程序（Qt 版本 4.7.3）。

我有一个从 QDialog 派生的 MessageBox 类。我已经将这个类设为单例。

每当要显示消息框时，我都会使用 .exec 方法来显示它。

我需要一个接一个地显示消息框的地方很少。

所以，要显示新的消息框，我必须关闭前一个并显示新的。

例如，当消息框打开时，同时我从后台收到错误消息，我必须关闭当前显示的消息框并显示有错误的消息框。

为了关闭上一个对话框，我从 messagebox 类中公开了 CloseDlg 方法并尝试关闭它。

在这个 CloseDlg 中，我正在发出完成的信号。

```
void CMsgBox::CloseDlg()
{
    if (NULL != CMsgBox::m_msgBox)
    {
        if(CMsgBox::m_msgBox->isVisible())
        {
            emit CMsgBox::m_msgBox->finished(0);
            //QApplication::processEvents();
        }
    }
} 
```

并将其称为

```
CMsgBox::CloseDlg(); 
```

我的表演方法是：-

```
int CMsgBox::showMsgBox(Icon icon, const QString &textMsg, const QString &okBtnText)
{
    if (CMsgBox::m_msgBox == NULL)
    {
        CMsgBox::m_msgBox = new CMsgBox();
    }
    CMsgBox::m_msgBox->setText(textMsg);
    CMsgBox::m_msgBox->setIcon(icon);
    CMsgBox::m_msgBox->setOkBtnText(okBtnText);
    CMsgBox::m_msgBox->exec();

    return CMsgBox::m_msgBox->m_btnPressed; //return, unblock the call
} 
```

当我再次调用 showMsgBox 时，它会向我显示以下警告。QDialog::exec：检测到递归调用

问题是，它不会从先前的 exec 调用中返回（除非我们返回，如上文所述 //）。

我尝试使用 close()、accept()、reject() 方法而不是 finished() 事件，但没有任何效果。

从以前的 exe 调用返回并实现上述场景的方法是什么？欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:16:45.823

您在这里所拥有的看起来像是一种竞争条件。模态 QDialog 运行自己的事件循环，因此您的应用程序的行为类似于多线程应用程序，您需要注意并发和竞争条件。

当您在主事件循环中收到一秒钟时，您会`CMsgBox::CloseDlg()`快速`CMsgBox::showMsgBox()`连续调用。但是，`CloseDlg()`告诉对话框的事件循环返回，但`CloseDlg()`实际上在对话框的事件循环完成清理之前返回，并`showMsgBox()`尝试调用`exec()`尚未完成退出的对话框。

你需要做的是，当你打电话时`CMsgBox::CloseDlg()`，连接到`finished(int)`信号，只有当你收到时，你`finished(int)`才能安全地`exec()`再次对话。

注意：连接`finished(int)`信号时，请确保使用 a`Qt::QueuedConnection`而不是`Qt::DirectConnection`默认的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:18:00.247

所以，你需要[无模式对话框](http://doc.qt.digia.com/qt/qdialog.html#modeless-dialogs)。如他们的文档中所述：

> 使用 show() 显示无模式对话框，它立即将控制权返回给调用者。

因此，不要用 来显示框，而是用 来`exec()`显示它`show()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:22:46.127

另一个答案中建议的 show() 方法的替代方法是使用[`QDialog::open()`](http://qt-project.org/doc/qt-4.8/qdialog.html#open). 它会返回，但仍会为您提供模态对话框，因此 GUI 的其余部分将被禁用，直到您关闭它。

# c# - 为什么目录上的 File.Delete() 会产生 UnauthorizedAccessException？

> ID：13817022
> 
> 赞同：3
> 
> 时间：2012-12-11T09:14:53.643
> 
> 标签：c#, .net, exception

如果我调用`System.IO.File.Delete()`并传递一个目录名，我会得到一个目录名，`UnauthorizedAccessException`尽管问题与任何类型的权限无关，我想`InvalidOperationException`在这里会更合适。

为什么会抛出这个特定的异常？这是设计错误还是有任何原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:22:52.727

No idea, but it smells like a design fault because the [Directory.Delete](http://msdn.microsoft.com/en-us/library/62t64db3.aspx) has a different behavior that [File.Delete](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx). Directory.Delete will throw a DirectoryNotFoundException if the path actually refers to a file instead of directory. One would expect that the same kind of exception would be thrown in these two cases.

# sap-ase - Sybase ASE、备份和密码安全

> ID：13817030
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:15:03.937
> 
> 标签：sap-ase

我是 Linux 上 Sybase ASE 数据库服务器的 DBA，我需要每晚备份一个数据库。这个想法是编写一个 cronjob 并从用户“sybase”运行它。但这意味着我将有一个这样的脚本：

```
isql -Usa -Ppassword_of_sa -SMYSERVER -DMYDATABASE -i/home/sybase/backup.sh 
```

这意味着我将在 /home/sybase 的脚本中以明文形式获得 sa 的密码；换句话说，任何可以登录sybase帐户的人都可以读取sa密码。我应该接受这个，还是有更安全的方法？附带问题：我可以更改用户 sybase 的密码吗？如果我这样做会有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:54:34.193

不，你不应该接受这一点。一种选择是创建一个新用户，并将“操作员”角色分配给该用户。'oper' 角色允许用户转储和加载数据库以及事务日志。

另一种选择是使用 shell 脚本和重定向来屏蔽进程列表中的密码。看起来像这样：

```
#/bin/sh

#Set Your Sybase ENV
. $SYBASE/$SYBASE.sh

SAPASSWD=password_of_sa

#Put your .sql code after the password, and before the second ENDSQL
isql -Usa -SMYDATABASE << ENDSQL
${SAPASSWD}

dump database MY_DATABASE to dump....
go

ENDSQL 
```

对于第二个问题，您可以绝对更改“sa”密码，只要您在其他地方没有任何硬编码引用即可。

附带说明一下，我会将您的备份文件重命名为 backup.sql。使用 .sh 意味着它是一个 shell 脚本，可能会引起混淆。

# blackberry - 在黑莓中启动应用程序时出错

> ID：13817035
> 
> 赞同：0
> 
> 时间：2012-12-11T09:15:13.413
> 
> 标签：blackberry

我在我的黑莓中成功安装了我的应用程序，但在运行它时出现错误：

```
Error starting MyApp:Module Myapp atempts to access a secure Api. 
```

我想在我的设备上运行这个应用程序。请建议一种运行我的应用程序的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:55:53.430

当应用程序未签名时会发生此错误。从这里获取您的密钥：

[https://www.blackberry.com/SignedKeys/](https://www.blackberry.com/SignedKeys/)

为了对文件进行签名，请确保您的系统上有三个可用的签名文件（RBB、RCR 和 RRT）。为了签署应用程序，首先需要包含以下文件：

黑莓（位于顶部）-> 签名-> 安装新密钥

将密钥包含在您的项目中后，为您的应用签名：

右键单击项目 -> BlackBerry -> 使用签名工具签名。它将提示输入您在获取密钥时创建的密码。

签署应用程序后，加载您的项目：

右键单击项目 -> BlackBerry -> 在设备上加载项目

确保您的应用没有编译错误，以便应用成功打包。

# shell - 在标准错误上停止系统错误

> ID：13817043
> 
> 赞同：0
> 
> 时间：2012-12-11T09:16:24.577
> 
> 标签：shell, unix, awk

我正在编写一个启动无限循环的 AWK 脚本 - 因此在脚本中我验证指定路径中是​​否存在文件，如果这样我将退出无限循环：

```
while ( ("ls -l /tmp/STOP" |& getline var4) > 0) {
        exit 0
}
close("ls -l /tmp/STOP") 
```

问题是当文件不存在时，我在运行时收到标准错误：

ls: /tmp/STOP: 没有这样的文件或目录

我们如何避免控制台上出现这种标准错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:34:44.630

`ls`如果您不是特别想要目录列表，请不要使用。像退出代码这样的东西`test -e /tmp/STOP`会更好。

```
 if (! system ("test -e /tmp/STOP")) exit 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:39:14.753

尝试将错误流重定向到`/dev/null`：

```
while ( ("ls -l /tmp/STOP 2>/dev/null" |& getline var4) > 0) {
    exit 0
}
close("ls -l /tmp/STOP") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:58:57.663

```
BEGIN {
  while ( system("sleep 1; test -f /tmp/STOP") ) print "The file is not there..."
  exit
} 
```

有 sleep 命令是因为你不想疯狂地产生进程。

# c# - 如何使用嵌套的 for 循环对数组元素进行排序？

> ID：13817045
> 
> 赞同：1
> 
> 时间：2012-12-11T09:16:25.143
> 
> 标签：c#, arrays, methods, for-loop

我正在接受一项编程挑战以进行练习，但我无法弄清楚这一点。这可能是由于时间和我目前的困倦，但我想在睡觉前完成这个。

我想按升序对数组中每个元素的值进行排序。诀窍是不要使用 sort() 方法。这是我到目前为止所拥有的：

```
 for (int i = 0; i < freq_array.Length; i++)
        {
            for (int n = 1; n < i; n++)
            {
                if (freq_array[n] < freq_array[i])
                    freq_array[i] = freq_array[n];
            }
        }

        for (int x = 0; x < freq_array.Length; x++)
        {
            lblOutDigits.Text = "";
            lblOutDigits.Text += freq_array[x];
        } 
```

测试时，我只在标签上得到一个“0”。freq_array 所做的是保存某些按钮被点击的频率。因此，如果我单击 Button3 5 次，然后单击 Button7 3 次，将它们按顺序排列，我应该会看到 33333777 - 即使我以随机顺序单击 3 和 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:25:47.073

您需要交换值

```
 int temp;
     for (int i = 0; i < freq_array.Length; i++)
            {
                for (int n = 1; n < i; n++)
                {
                    if (freq_array[n] < freq_array[i]){
                        temp = freq_array[i];
                        freq_array[i] = freq_array[n];
                        freq_array[n] = temp;
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:19:04.147

这对我来说看起来很狡猾：

```
if (freq_array[n] < freq_array[i])
    freq_array[i] = freq_array[n]; 
```

那只是将值从 index*复制*`n`到 index `i`。你完全失去了曾经在 index 的价值`i`。我怀疑你想*交换*这些值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-27T13:42:05.270

```
int[] x = { 20, 10, 50, 46, 26, 87, 25, 5, 97, 24 };
for (int i = 0; i < x.Length; i++)
{
    for (int j = i; j < x.Length; j++)
    {
        if (x[i] > x[j])
        {
            int temp;
            temp = x[i];
            x[i] = x[j];
            x[j] = temp;
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-28T06:57:11.977

```
 int[] a= { 2, 5, 4, 8, 7, 3 };
    int temp;
    for (int i = 0; i < a.Length; i++) 
    {
        for (int j = 0; j <a.Length; j++) 
        {
            if (j != a.Length - 1)
            {
                if (a[j] > a[j + 1])
                {
                    temp = a[j];
                    a[j] = a[j + 1];
                    a[j + 1] = temp;
                }
            }

        }

    } 
```

此代码有助于按升序对给定的枚举进行排序。如果要使此代码按降序排序，只需在比较内部 for 循环中的值时将 > 符号更改为 < 符号。

希望这将帮助您解决您的查询。

另一种排序方法是使用 .Sort 方法。

例子

```
Array.Sort(a); 
```

* //如果要按降序排序，请在使用sort方法排序完成后编写以下代码。*

```
a=a.Reverse().ToArray();
foreach (var item in a)
{
  Console.WriteLine(item);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-25T13:25:19.350

```
 #region Bubble Sort

    for (int i = 0; i < n; i++)
    {
        for (int j = 0; j < n - 1; j++)
        {
            if (a[j] > a[j + 1])
            {
                swap(ref a[j], ref a[j + 1]);
            }
        }
    }

    #endregion

    #region Insertion Sort

    for (int i = 1; i < n; i++)
    {
        int j = i;
        while (j > 0)
        {
            if (a[j - 1] > a[j])//not in order
            {
                swap(ref a[j], ref a[j - 1]);
            }
            else//in order
                break;
            j--;
        }
    }

    #endregion

    #region Selection Sort

    int smallest;
    for (int i = 0; i < n - 1; i++)
    {
        smallest = i;
        for (int j = i + 1; j < n; j++)
        {
            if (a[j] < a[smallest])
            {
                smallest = j;
            }
        }
        if (smallest != i)
            swap(ref a[i], ref a[smallest]);
    }
    #endregion 
```

* * *

//交换函数

```
 public static void swap(ref int a, ref int b)
    {
        int temp = a;
        a = b;
        b = temp;
    } 
```

# translation - 在基本操作中分解表达式：ANTLR + StringTemplate

> ID：13817046
> 
> 赞同：3
> 
> 时间：2012-12-11T09:16:34.607
> 
> 标签：translation, antlr, grammar, stringtemplate

我正在尝试为类似 Java 的语言编写多种语言的翻译器。

现在我面临2个问题：

首先是将复杂表达式分解为一系列基本操作，然后将它们翻译成目标语言。

例如，我的起始语言可以是：

```
var a = (ln(b) + avg(c))*2 
```

我想把它翻译成：

```
var x1 = log_N(b);
var x2 = average(c);
var x3 = sum(x1, x2);
var a = multiply(x3, 2); 
```

我想我必须使用 Tree 解析器，但我不知道如何将它与 StringTemplate 集成。此外，我正在添加额外的变量，如 x1、x2 和 x3，但我不知道如何处理这种情况。

第二个问题是我的目标语言之一是类似 plsql 的语言。在这种情况下，需要确保所有输出变量都成为游标并将它们传递给函数。

例如表达式：

```
var a = (ln(b) + avg(c))*2 
```

应该这样翻译：

```
log_N(x1, b);
average(x2, c);
sum(x3, x1, x2);
multiply(a, x3, 2); 
```

其中 x1、x2、x3 和 a 将成为输出光标。

谁能帮我找到正确的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T01:03:22.760

> 我想我必须使用 Tree 解析器，但我不确定如何将它与 StringTemplate 集成。

将 StringTemplate 集成到树解析器中与将其集成到令牌解析器中基本相同：将`output`选项定义为`template`，然后相应地编写规则产生式。

下面是一个使用模板进行输出的小树语法。[请注意，此语法与我在上一个答案中描述的](https://stackoverflow.com/a/13809166/1201210)语法之间唯一有意义的区别是该语法在树节点上而不是令牌上运行。模板的工作方式相同。

```
tree grammar AstToTemplateParser;

options { 
    output = template;
    tokenVocab = JavaLikeToAst;
    ASTLabelType = CommonTree;
}

program
    : ^(PROGRAM decls+=decl+) -> write(text={$decls})
    ;

decl
    : ^(DECL ID ^(op args+=arg*)) -> assign(name={$ID.text}, op={$op.st}, args={$args})
    | ^(DECL ID ^(CALL method args+=arg*)) -> assign(name={$ID.text}, op={$method.st}, args={$args})
    ;

arg 
    : ID -> write(text={$ID.text})
    | INT -> write(text={$INT.text})
    ;

method
    : ID -> op(name={$ID.text})
    ;

op  : STAR  -> op(name={$STAR.text})
    | DIV   -> op(name={$DIV.text})
    | PLUS  -> op(name={$PLUS.text})
    | MINUS -> op(name={$MINUS.text})
    ; 
```

> 此外，我正在添加额外的变量，如 x1、x2 和 x3，但我不知道如何处理这种情况。

那是踢球者。我所知道的最简单的方法（这并不容易）是首先使用令牌解析器生成基线 AST，然后使用树解析器将 AST 展平为声明列表，每个声明都代表来自原始输入的表达式—— `x1`, `x2`, 和`x3`你的问题。

中间阶段如下所示：

### 原始输入

```
var a = (ln(b) + avg(c))*2 
```

### 基线 AST

![基线AST](../Images/f64868e80c4481cb01c1ed08efa2229c.png)

### 扁平化 AST

![扁平化 AST](../Images/7fafa3647344e3cc8aa751f44bb39137.png)

### 应用标准模板

```
 var var0 = log_N(b);
 var var1 = average(c); 
 var var2 = add(var0, var1);
 var a = multiply(var2, 2); 
```

### 已应用 PLSQL 模板

```
 log_N(var0, b);
  average(var1, c);
  add(var2, var0, var1);
  multiply(a, var2, 2); 
```

这是一个令牌解析器语法，它只生成类似于您问题中的基线 AST。这里没有什么真正值得注意的，它只是产生了一个典型的 AST。

```
grammar JavaLikeToAst;

options { 
    output = AST;
}

tokens { 
    PROGRAM; DECL; CALL; 
}

compilationUnit : statement* EOF -> ^(PROGRAM statement*);
statement       : decl;
decl            : VAR ID EQ expr -> ^(DECL ID expr);
expr            : add_expr;
add_expr        : mul_expr ((PLUS|MINUS)^ mul_expr)*;
mul_expr        : call_expr ((STAR|DIV)^ call_expr)*;
call_expr       : ID LPAR arglist? RPAR -> ^(CALL ID arglist?)
                | primary_expr;
arglist         : expr (COMMA! expr)*;
primary_expr    : ID | INT | LPAR! expr RPAR!; 

VAR     : 'var';
ID      : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'_'|'0'..'9')*;
INT     : ('0'..'9')+;
COMMA   : ',';
SEMI    : ';';
LCUR    : '{';
RCUR    : '}';
LPAR    : '(';
RPAR    : ')';
EQ      : '=';
PLUS    : '+';
MINUS   : '-';
STAR    : '*';
DIV     : '/';
WS      : (' '|'\t'|'\f'|'\r'|'\n'){skip();}; 
```

这是它变得丑陋的地方（至少我选择这样做的方式;））。下面的树语法将从上面生成的基线 AST 转换为与 AST 表达式相对应的声明列表 - 扁平化 AST。下面，我将逐步介绍语法中有趣的部分。

```
tree grammar AstToFlatAstParser;

options { 
    output = AST;
    tokenVocab = JavaLikeToAst;
    ASTLabelType = CommonTree;
    filter = true;
}

@header { 
    import java.util.HashMap;
}

@members {
    private int currentId = 0;
    private HashMap<Integer, Object> exprs = new HashMap<Integer, Object>();
    private boolean newDecls = false;

    private int nextId() { 
        return currentId++;
    }

    private Object generateId(int id) { 
        return adaptor.create(ID, "var" + id);
    }  

    private void saveExpr(int id, Object expr){
        newDecls = true;
        exprs.put(id, expr);
    }

    private Object buildNewDecls() {
        Object newDecls = adaptor.nil();

        for (int i = 0; i < currentId; ++i){
            if (!exprs.containsKey(i)){
                continue; //This id was generated but not used.
            }

            Object expr = exprs.get(i);
            Object decl = adaptor.create(DECL, tokenNames[DECL]);
            adaptor.addChild(decl, adaptor.create(ID, "var" + i));
            adaptor.addChild(decl, expr);
            adaptor.addChild(newDecls, decl);
        }

        exprs.clear();

        return newDecls;
    }
}

bottomup
    : exit_program
    | exit_op
    ;

exit_op
    @init {
        int myId = nextId();
    }
    : ^(binary_op reduced reduced)
        {$start.parent != null && $start.parent.getType() != DECL}? 
        {saveExpr(myId, $start);} 
        -> {generateId(myId)}
    | ^(CALL ID .*) 
        {$start.parent != null && $start.parent.getType() != DECL}? 
        {saveExpr(myId, $start);} 
        -> {generateId(myId)}
    ;   

binary_op       : STAR | DIV | PLUS | MINUS;

reduced         : ID | INT; 

exit_program
    //Only rebuild PROGRAM if a new declaration is going to be built, that is, when "newDecls" is true.
    //Otherwise PROGRAM is considered changed when it isn't and the processing never ends.
    : {newDecls}? ^(PROGRAM old+=.*) {newDecls = false;} 
        -> ^(PROGRAM {buildNewDecls()} $old*)
    ; 
```

首先，请注意语法主要是 Java 代码。解析器规则只有五个，而且大部分都很简单。这是一个`filter`树语法，所以规则`bottomup`和`topdown`是入口点。仅`bottomup`在这种情况下是必需的，因此`topdown`未指定。重复规则`bottomup`直到输出树没有改变，这对我们来说意味着没有更多的声明要产生并且树完全展平。

其次，请注意规则`exit_program`是新声明被写入 AST 的位置。我使用语义谓词 ( `{newDecls}?`) 来确保`PROGRAM`仅在添加新声明时对其进行修改。还记得我所说`bottomup`的直到不再进行更改吗？如果没有这个语义谓词，`exit_program`将*始终*修改`PROGRAM`并且树解析将永远不会停止处理`bottomup`。对于这种特殊情况，这是一种粗略的解决方法，但它确实有效。新的声明被插入到开头，`PROGRAM`以确保它们在被引用之前出现。在预期之后定义`x1`十行并不好。

第三，注意规则用声明（like ）`exit_op`替换表达式（ like ）。如果以下条件之一为真，则替换表达式：`ln(b)``var0`

*   该表达式是一个二元运算，其操作数都是“约简”（即它们都是整数或变量 id）并且不是节点的子`DECL`节点。`var a = 1 + 2`没有改变，因为`1 + 2`它是一个声明的孩子。`var b = a + (2 + c)`被更改是因为`(2 + c)`有两个“缩减”操作数并且不是节点的子`DECL`节点（它是`+`in的子节点`a + ...`）。

*   表达式是 a `CALL`，它不是节点的子`DECL`节点。`var a = ln(b)`未触及，但由于是 的孩子而`var a = ln(b) + 3`被更改。`ln(b)``+`

表达式在`exprs`被 id 替换之前存储在其中。当`exit_program`规则调用`buildNewDecls`. `buildNewDecls`只需使用解析器的内置`TreeAdaptor`成员（名为`adaptor`）来生成`DECL`出现在展平 AST 中的节点。适配器方法的 Javadoc 可以很好地解释调用的作用，因此我不会详细介绍。

**警告：**上述语法生成的解析器适用于您提出的非常有限的情况。我不知道它们在应用于任何更广泛的场景时会产生什么错误。

> 第二个问题是我的目标语言之一是类似 plsql 的语言。在这种情况下，需要确保所有输出变量都成为游标并将它们传递给函数......

一旦您的 AST 只是一个简单的声明列表，模板就可以为您管理，如上所示。

您将把扁平化的 AST 传递给一个基于模板的树解析器，例如顶部的解析器，以生成您列出的不同文本版本。在这种情况下，模板将接受声明的所有部分——变量名称、操作/方法名称和操作数/参数——并根据所使用的模板生成类似`variable = method(arg0, arg1)`or 或的文本。`method(variable, arg0, arg1)`关键是确保输入是平坦的，并且模板接收与声明相关的所有内容。

* * *

这是一个将所有内容联系在一起的测试应用程序。

### JavaLikeToAstTest.java

```
public class JavaLikeToAstTest {

    public static void main(String[] args) throws Exception {

        final String code = "var a = (ln(b) + avg(c))*2";

        CharStream input = new ANTLRStringStream(code);
        JavaLikeToAstLexer lexer = new JavaLikeToAstLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        JavaLikeToAstParser parser = new JavaLikeToAstParser(tokens);

        JavaLikeToAstParser.compilationUnit_return result = parser
                .compilationUnit();

        if (lexer.getNumberOfSyntaxErrors() > 0 || parser.getNumberOfSyntaxErrors() > 0) {
            throw new Exception("Syntax Errors encountered!");
        }

        CommonTree tree = (CommonTree) result.tree;

        System.out.printf("Baseline AST: %s%n%n", tree.toStringTree());

        tree = flatten(tree);

        System.out.printf("Flattened AST: %s%n%n", tree.toStringTree());

        translate(tree, "AstToPlsql.stg");
        translate(tree, "AstToGlobal.stg");
    }

    private static CommonTree flatten(CommonTree tree) {
        AstToFlatAstParser parser = new AstToFlatAstParser(
                new CommonTreeNodeStream(tree));
        return (CommonTree) parser.downup(tree, true);
    }

    private static void translate(CommonTree tree, String templateResourceName)
            throws Exception {
        AstToTemplateParser parser = new AstToTemplateParser(
                new CommonTreeNodeStream(tree));
        InputStream stream = JavaLikeToTemplateTest.class
                .getResourceAsStream(templateResourceName);
        Reader reader = new InputStreamReader(stream);
        parser.setTemplateLib(new StringTemplateGroup(reader));
        reader.close();
        stream.close();

        System.out.printf("Result for %s%n%n%s%n%n", templateResourceName,
                parser.program().st.toString());

    } 
```

这里有两个简单的 StringTemplate 组文件来处理翻译过程。

### AstToGlobal.stg

```
group AstToGlobal;

methods ::= ["*":"multiply", "/":"divide", "+":"add", "-":"subtract", "avg":"average", "ln":"log_N", default:key]

assign(name, op, args) ::= <<var <name> = <op>(<args;separator=", ">) >>

op(name) ::= "<methods.(name)>"

write(text) ::= << <text;separator="\n"> >> 
```

### AstToPlsql.stg

```
group AstToPlsql;

methods ::= ["*":"multiply", "/":"divide", "+":"add", "-":"subtract", "avg":"average", "ln":"log_N", default:key]

assign(name, op, args) ::=<< <op>(<name>, <args;separator=", ">) >>

op(name) ::= "<methods.(name)>"

write(text) ::= << <text;separator="\n"> >> 
```

该应用程序产生以下输出：

```
Baseline AST: (PROGRAM (DECL a (* (+ (CALL ln b) (CALL avg c)) 2)))

(CALL ln b) -> var0
(CALL avg c) -> var1
(+ var0 var1) -> var2
(PROGRAM (DECL a (* var2 2))) -> (PROGRAM (DECL var0 (CALL ln b)) (DECL var1 (CALL avg c)) (DECL var2 (+ var0 var1)) (DECL a (* var2 2)))
Flattened AST: (PROGRAM (DECL var0 (CALL ln b)) (DECL var1 (CALL avg c)) (DECL var2 (+ var0 var1)) (DECL a (* var2 2)))

Result for AstToPlsql.stg

  log_N(var0, b ) 
  average(var1, c ) 
  add(var2, var0 , var1 ) 
  multiply(a, var2 , 2 )  

Result for AstToGlobal.stg

 var var0 = log_N(b ) 
 var var1 = average(c ) 
 var var2 = add(var0 , var1 ) 
 var a = multiply(var2 , 2 ) 
```

没有代码`AstToTemplate.g`或模板来处理简单的赋值`var a = 3`，但我认为使用操作/方法赋值作为指南添加代码来处理它会很容易。

# c# - Microsoft CRM 插件 - 查找缺少其名称

> ID：13817048
> 
> 赞同：2
> 
> 时间：2012-12-11T09:16:37.600
> 
> 标签：c#, plugins, dynamics-crm-2011, crm

我正在开发一个 CRM 2011 插件，该插件应该创建新的设备实体并查找车辆实体：

```
var vehicle = (Entity)context.InputParameters["Target"];
var entity = new Entity("equipment");
// Fill other attributes

// Create lookup
var reference = vehicle.ToEntityReference();                 
entity.Attributes["new_vehiclelink"] = reference;
entity.Attributes["new_vehiclelinkname"] = name;

service.Create(equipment); 
```

不幸的是，设备已正确创建，查找缺少其名称。

![](../Images/0668bd5f655cccc566c7fc974f21bd64.png)

当我单击查找时，它可以工作。请你能告诉我如何填写它的名字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:10:13.623

我怀疑您的`vehicle`记录在其主要属性（即名称）中没有价值。它是在查找控件中显示的主要属性。

我也不确定这条线想要做什么：

```
entity.Attributes["new_vehiclelinkname"] = name; 
```

您不需要单独设置查找值的名称，因此除非您调用了附加属性，否则`new_vehiclelinkname`这不是必需的。

# android - 创建示例 android 项目时，将使用什么编译？

> ID：13817055
> 
> 赞同：0
> 
> 时间：2012-12-11T09:17:01.957
> 
> 标签：android

我正在 Android 项目上创建示例项目。

本书指的是屏幕截图![在此处输入图像描述](../Images/0f6769a1c1fe48d484b4d25e7c51937e.png)

当我得到其他选项时，没有显示任何内容可供选择编译。请让我知道如何解决这个问题？

![在此处输入图像描述](../Images/d02b9be7d04fd89d2525b94bcb0478f5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:22:31.370

实际上有一条帮助消息，告诉您在大多数情况下您应该选择最新安装的 SDK。

# c++ - 矩阵中的最小强度

> ID：13817060
> 
> 赞同：0
> 
> 时间：2012-12-11T09:17:16.103
> 
> 标签：c++, opencv

我创建了以下函数来使用 opencv 计算图像矩阵中具有最小强度的点。但是，我总是将点 0,0 作为强度最小的点，并且强度值也很荒谬，例如 -2142484923。有人可以帮忙吗？

img 是输入图像矩阵，minloc 返回具有最小强度的 cvPoint。

```
int min_Loc(Mat img, Point minloc)
{

    cvtColor(img, img, CV_RGB2GRAY); 
    int x1;
    int y1;
    int x2;
    int y2;

    x1 = 0;
    x2 = img.rows;
    y1 = 0;
    y2 = img.cols;

    int min = std::numeric_limits< int >::max();
    int currentval;
    for (int j=y1; j<y2; j++)
    {

        for (int i=x1; i<x2; i++){
            currentval = img.at<int>(j,i);
            if(currentval < min){
                min = std::min<int>( currentval, min );
                minloc.x = i;
                minloc.y = j;
            }
        }

    }

    return min;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:35:41.820

你的功能

```
int min_Loc(Mat img, Point minloc) 
```

不返回 minloc。它返回一个整数，并按值获取一个 Mat 和一个 Point。如果您希望能够修改 minloc 的值并在调用 min_Loc() 后使其保持不变，则应使用指针或引用作为参数，例如：

```
int min_loc(Mat * img, Point * minloc)
{
...
minloc->x = i;
minloc->y = j;
...
return min;
} 
```

并且对该函数的调用如下：

```
min_loc(&img, &minloc); 
```

这假设您在调用之前有某个地方，例如：

```
Mat img = ...;
Point minloc = ...; 
```

更多信息：[何时通过引用传递以及何时在 C++ 中通过指针传递？](https://stackoverflow.com/questions/3613065/when-to-pass-by-reference-and-when-to-pass-by-pointer-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:54:12.947

[请注意，OpenCV 提供了在函数cv::minMaxLoc](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxloc)中查找（单通道）矩阵的最小值和最大值及其位置的能力

# wpf - 将视图加载到 wpf 中的区域

> ID：13817078
> 
> 赞同：1
> 
> 时间：2012-12-11T09:18:17.353
> 
> 标签：wpf, region

让我把问题简单化。我创建了两个棱镜区域。第一个区域有一个按钮。单击此按钮时，我想在第二个区域中加载视图。我该怎么做呢？请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:23:31.207

I suppose you are referencing Regions of Prism?

The [View-Switching Navigation QuickStart](http://msdn.microsoft.com/en-us/library/gg430881%28v=pandp.40%29.aspx) demonstrates how to use the Prism Region Navigation API. The QuickStart simulates the navigation of a simple email, contacts, and calendar application. The left region provides navigation to each of the main views. The views demonstrate backward navigation and asynchronous dialog interactions.

# c++ - 如何在 Windows 上使用 C++ 获取 firefox 及其变体版本？

> ID：13817081
> 
> 赞同：0
> 
> 时间：2012-12-11T09:18:51.267
> 
> 标签：c++, windows, winapi, firefox, browser

Firefox 有很多变种，例如 Waterfox、Palemoon 等。

如何获取系统上所有 Firefox 及其变体浏览器的版本号？

使用 C++ 和 Win32 SDK。

另一个相关问题，我怎么知道浏览器是从 Firefox 还是 Chrome 派生的（如 Comodo）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T11:42:11.417

你可以试试这个注册表项：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Clients\StartMenuInternet
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Clients\StartMenuInternet   // <-- x64 only 
```

所有浏览器（甚至是便携式浏览器）都应该注册自己的地方（[source](http://www.rhizohm.net/irhetoric/post/2009/04/03/0a-Finding-All-Installed-Browsers-in-Windows-XP-and-Vista-ndash3b-beware-64bit!0a-.aspx)）。然后查找`command`浏览器的主要可执行路径的子键。例如，我的便携式 Chromium 可以在这里找到：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Clients\StartMenuInternet\Chromium.Y75GGO62VNIN4R2QLYJDH66X4I\shell\open\command 
```

之后，您可以直接从 .exe 中提取浏览器版本 -[如何以编程方式获取 DLL 或 EXE 文件的版本？](https://stackoverflow.com/questions/940707/how-do-i-programatically-get-the-version-of-a-dll-or-exe-file). 您也可以在 GUI 中检查此版本信息 - 转到文件属性（通过右键单击上下文菜单），然后转到详细信息选项卡。

它适用于便携式 Chromium，但没有在其他非标准浏览器上尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-14T11:20:29.607

你可以试试这个注册表项：HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\Mozilla Firefox\CurrentVersion

# jquery - 如何将“下一个”链接放在 qtip2 工具提示中

> ID：13817086
> 
> 赞同：0
> 
> 时间：2012-12-11T09:19:25.087
> 
> 标签：jquery, tooltip, qtip2

我正在尝试使用 qtip2 在我的网站上创建带有工具提示的教程。我想做的是：

*   在工具提示内的某处有“下一个”链接（而不是只在底部有链接）

我在[这里](http://jsfiddle.net/dimitrisscript/DY9n2/1 "这里")设置了一个 jsfiddle 。我用这个：

`... content: 'Description...' + ' <a id="next" href="#">Next &raquo;</a>'`

但我的尝试似乎没有奏效。

如果您单击底部的“下一步”链接，它可以正常工作，**但工具提示内的链接不起作用**。

有任何想法吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:21:43.063

使用`delegate`, （取决于你的 jQuery 版本，你也可以使用`on`代替`delegate`）

```
$(document).delegate("#next, #prev", "click", function (event) { 
```

代替

```
$('#next, #prev').bind('click', function(event) { 
```

这是一个工作的[jsFiddle](http://jsfiddle.net/M8yGL/)

解释 ：

我猜想工具提示会在稍后阶段添加到 HTML DOM 树中 - 在完成绑定之后 ( `.bind`)，这就是为什么在`delegate`这里不会让你失望的原因......

> **委托**- 描述：基于一组特定的根元素，将处理程序附加到与选择器匹配的所有元素的一个或多个事件，现在**或将来。**

# matlab - 从 MATLAB 创建 DLL

> ID：13817088
> 
> 赞同：5
> 
> 时间：2012-12-11T09:19:29.763
> 
> 标签：matlab, linker, matlab-deployment, matlab-compiler

我在 MATLAB 中创建了一个 DLL，它为我的 .m 函数提供了一个接口。

现在我想将它与 MCR 运行时库一起使用。（MCR = Matlab 编译器运行时）。

我从一个 C 例程中调用这个 DLL，该例程最终用 GCC (MinGW) 编译成一个包装 DLL。

现在我的函数变成了两种形式：

```
extern LIB_XYZ_C_API 
bool MW_CALL_CONV mlxGet_path(int nlhs, mxArray *plhs[], int nrhs, mxArray *prhs[]);
extern LIB_XYZ_C_API bool MW_CALL_CONV mlfGet_path(int nargout, mxArray** p); 
```

从这些中我选择了后者，因为前者似乎是一种“老式/传统”。

我这样称呼它：

```
char get_path(LStrHandle path)
{
    char mret = init_XYZ(); // here I call mclmcrInitialize(), mclInitializeApplication(NULL, 0) etc.
    if (mret) return mret;
    mret = 2;
    // here the relevant part begins
    mxArray * mxpath = NULL; // set it to NULL and let the callee allocate it
    bool bret = mlfGet_path(1, &mxpath);
    // now I convert the mxpath to a string
    // What do I do with the mxpath afterwards?
    // I try to free it with
    mxDestroyArray(mxpath);
    return mret;
} 
```

**问题就从这里开始了**：`mxDestroyArray()`在链接过程中找不到：

```
undefined reference to `mxDestroyArray' 
```

如果我手动添加`-llibmx`到构建过程中，构建会运行，但随后`libmx.dll`无法找到，因为 MCR 仅放入`$MCR\runtime\win32`路径中，但没有放入路径`$MCR\bin\win32`中`libmx.dll`。

我能做些什么？

使用自编译 DLL 时是否必须选择不同的“销毁”函数？

还是我必须在路径上鬼混？（我不希望如此……）

此外，还有其他一些功能缺失，但我认为这会以同样的方式解决：

```
mxGetNumberOfElements
mxIsDouble
mxGetPr
mxGetM
mxGetN
mxGetData
mxIsChar
mxIsCell
mxDestroyArray
mxGetCell_730
mxSetCell_730
mxGetString_730
mxCalcSingleSubscript_730
mxGetNumberOfDimensions_730
mxCreateDoubleMatrix_730
mxCreateNumericMatrix_730
mxCreateCellMatrix_730 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T13:09:30.533

我发现使用 MCR 或安装 MATLAB 安装会有很大的不同。

1.  使用链接器`-lmclmcrrt`代替`-lmx`并使用正确的库路径。
2.  `#include`在编译中使用的每个文件中使用正确的文件。特别是，不要将`#include "matrix.h"`与 MATLAB DLL 一起创建的头文件混在一起。

# windows-phone - 关于不同版本的 Windows Phone 开发工具的说明

> ID：13817091
> 
> 赞同：0
> 
> 时间：2012-12-11T09:19:35.083
> 
> 标签：windows-phone

感谢大家阅读这个问题。我不确定，这两种 Windows Phone 开发工具有什么区别？

*   Windows Phone SDK 7.1 (http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27570)
*   Windows Phone RTW (http://www.microsoft.com/en-us/download/details.aspx?id=13890)

我已经在谷歌上搜索过这个问题，但我找不到明确的解释。该站点（http://stackoverflow.com/questions/11328993/windows-phone-developer-tools-january-2011-update-is-not-being-installed）暗示我们必须同时安装 SDK 7.1 和 RTW 版本. 那正确吗？我可以看到 SDK 7.1 有更多组件，但我不确定我需要哪些。

我还对这些版本的“更新”进行了说明。好像也有两个版本——

*   Windows Phone SDK 更新 7.1.1 (http://www.microsoft.com/en-us/download/details.aspx?id=29233)

*   Windows Phone 开发者工具 1 月更新 (http://www.microsoft.com/en-us/download/details.aspx?id=23854)

我知道更新 7.1.1 适用于 SDK 7.1。但是一月更新适用于什么版本？系统要求说它适用于 Windows Phone 开发人员工具 RTM。什么是 RTM？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:51:34.800

Steve B RTM 不是缩写。对于“发布到市场”。

RTM=发布给制造商

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:59:37.160

我相信 RTM 版本是第一批 WP 设备的 SDK 版本。7.1 取代了 RTM 版本（当 Mango 更新发布时），7.1.1 是 7.1 的更新（此更新允许针对低内存设备）。

这意味着您必须先安装 7.1，然后再安装 7.1.1 才能获得最新版本。阅读此页面以获得更多帮助：[https ://dev.windowsphone.com/en-us/downloadsdk](https://dev.windowsphone.com/en-us/downloadsdk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T11:31:53.067

史蒂夫 B 是对的。如果您要安装这些工具，您应该安装支持为 7.8 和 8.0 构建应用程序的 Windows Phone SDK 8.0。它是免费的，并附带 Visual Studio 2012 速成版的免费版本。如果您已经拥有 Visual Studio 2012 Professional 或更高版本，SDK 模板和工具将集成到您现有的 Visual Studio 安装中。仅 64 位 Windows 8 Pro 或更高版本支持 Windows Phone 8 应用程序开发。您不能在 Windows 7、Windows Server 2008 或 Windows Server 2012 上开发 Windows Phone 8 应用程序。您需要注意的最后一个事实是运行模拟器的系统要求。Windows Phone 8 模拟器在 Hyper-V（Windows 8 的虚拟化技术）上作为虚拟机运行。要运行模拟器，[http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff626524(v=vs.105).aspx](http://msdn.microsoft.com/en-US/library/windowsphone/develop/ff626524(v=vs.105).aspx)

# android - 如何将小部件中的图像链接到指定的网址？

> ID：13817094
> 
> 赞同：0
> 
> 时间：2012-12-11T09:19:40.153
> 
> 标签：android, android-widget, widget

您知道如何从当前小部件链接图像并将其链接到指定的网址吗？

我一直在寻找解决方案`Google`，找不到确切的解决方案。

我现在正在开发一个简单的小部件。它对我来说真的很新，我不太了解如何使用 AppWidgetProvider

我当前的小部件仅显示图像，当用户单击它时它将直接链接到网站。

所以，我的问题是，我应该在 AppWidgetProvider 中使用哪一个？

据我们所知，其中有 4 个..

*   onDeleted(上下文)
*   onDisabled（上下文）
*   onUpdated（上下文）
*   onReceived（上下文）

你能解释一下吗？以及我制作将图像链接到网站的代码的步骤。

谢谢朋友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:26:21.413

您需要为不可绘制的小部件提供 id。

```
img = (ImageView) findViewById(R.id.bg); 
```

没有 id android 无法识别小部件。还要注意在您提供事件的 xml 文件中引用您的小部件的一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:30:24.240

确实这对`AppWidgets`. 您应该调用`setOnClickPendingIntent()`您的`RemoteViews`实例，将`ImageView`id 和以下`PendingIntent`对象传递给它：

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
PendingIntent pi = PendingIntent.getActivity(context, 0, i, 0); 
```

[这是](http://developer.android.com/reference/android/widget/RemoteViews.html#setOnClickPendingIntent%28int,%20android.app.PendingIntent%29)该方法的文档。希望这可以帮助。

# iphone - 收到 RemoteNotification 时跳转其他页面并取消位置

> ID：13817095
> 
> 赞同：1
> 
> 时间：2012-12-11T09:19:45.427
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

您好，我正在使用 Apple APNS 发送 RemoteNotification。我发现的问题是：

首先，我想接收RemoteNotification然后跳转其他页面，而不是主页（第一页）我的代码：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    NSLog(@"remote notification: %@",[userInfo description]);
    NSDictionary *apsInfo = [userInfo objectForKey:@"aps"];

    NSString *alert = [apsInfo objectForKey:@"alert"];
    NSLog(@"Received Push Alert: %@", alert);
    NSString *sound = [apsInfo objectForKey:@"sound"];
    NSLog(@"Received Push Sound: %@", sound);
    NSString *badge = [apsInfo objectForKey:@"badge"];
    NSLog(@"Received Push Badge: %@", badge);

    application.applicationIconBadgeNumber = [[apsInfo objectForKey:@"badge"] integerValue];

    if ([userInfo objectForKey:@"type"])
    {

        NSString *nsType = [userInfo objectForKey:@"type"];
        NSLog(@"Received Push nsType: %@", nsType);
        if([[userInfo objectForKey:@"type"] intValue]==1){//chat
             [self JumpChatHistoryView];

        }else{
            [self JumpMessageDetailView];
        }
    }
    application.applicationIconBadgeNumber = 0; 
} 
```

我的应用程序进入后台并且没有被系统杀死，当收到RemoteNotification并点击它时，我的代码是OK的，它可以跳转其他视图。但是当我杀死我的应用程序时，当我收到RemoteNotification时，我点击它，它没有跳过其他视图，它只进入主视图，如何解决它。

此外，当我取消 LocalNotification 我可以使用`[[UIApplication sharedApplication] cancelLocalNotification:notification];` 但在 RemoteNotification 我找不到相同的方法。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:57:15.680

您必须使用此方法在 AppDelegate.m 文件中编写代码：

```
 - (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
{
           NSLog(@"%@", userInfo);
           NSString *notiText = [[userInfo valueForKey:@"aps"] valueForKey:@"alert"];
           [self JumpChatHistoryView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:14:04.733

我可以回答我的问题1：

```
 (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions  add 

 NSDictionary *userInfo =[launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
if ([userInfo objectForKey:@"type"])
{

    NSString *nsType = [userInfo objectForKey:@"type"];
    NSLog(@"Received Push nsType: %@", nsType);
    if([[userInfo objectForKey:@"type"] intValue]==1){//chat
        [self JumpChatHistoryView];

    }else{
        [self JumpMessageDetailView];
    }
} 
```

对于问题2，有时它可以自行取消，有时不能

# c# - asp.net mvc 中的犹太、波斯和阿拉伯日期时间模型绑定

> ID：13817102
> 
> 赞同：2
> 
> 时间：2012-12-11T09:20:19.710
> 
> 标签：c#, asp.net-mvc, datetime, model-binding

**伊朗**、**以色列**和**沙特阿拉伯**等一些国家使用他们的特殊日历。例如公历日期“ **2012-12-11** ”在伊朗历中是“ **1391-09-21 ”。**由于许多原因（例如数据库功能），我们决定将日期变量以公历日期格式存储在数据库中。当我们想要为此构建 UI 时，挑战就开始了。在`asp.net mvc`其中很容易创建模板并将`DateTime`变量更改为合适的格式。但问题在于模型绑定器无法识别返回值的**回**`mvc`发（请注意，月份中的天数与公历日期不相等）。解决此问题的一种方法是解析传入的结果，例如：

```
[HttpPost]        
public ActionResult Create(Content person,string customBirthdayDate)
{   
     person.Birthday = CustomDateTimeHelper.Parse(customBirthdayDate);
     Service.Save(person);            
     return RedirectToAction("List");  
} 
```

哪个工作正常，但我正在寻找更好的解决方案。一个想法是将模型更改为：

```
public class Person
{
    public int Id{set;get;}
    public string Name{set;get;}
    public DateTime Birthday{set;get;}
    public string CustomBirthdayDate
    {
      set{Birthday = CustomDateTimeHelper.Parse(value);}
      get{return CustomDateTimeHelper.ConvertToCustomDate(Birthday); }
    }
} 
```

在这种方法中，不需要在 Controllers Action 中编写额外的代码。有更好的主意吗？？谢谢你。

# javascript - 使用javascript在csv文件中保留前导零

> ID：13817107
> 
> 赞同：2
> 
> 时间：2012-12-11T09:20:38.290
> 
> 标签：javascript, csv, formatting, export-to-csv

我正在使用以下代码下载 csv。

```
<a download="somedata.csv"  id='x'>Download CSV</a>
<script>
       var csv = '01'; //prints 1 in the cell, truncating leading zero
       var csv = "'"+01+"'"; //prints '01' in the cell, with single quote
       var csv = '"\""01"\""'; //prints "01" in the cell, with double quotes
       var a = document.getElementById('x');
       a.href='data:text/csv;base64,' + btoa(csv);
</script> 
```

我需要在 csv 文件中打印带有前导零的数字。到目前为止，我找到的解决方案是通过用单引号或双引号将数字包装成文本。但这并不能解决问题，因为它也在单元格中打印引号。

没有办法保留前导零并在单元格中打印不带引号的数字吗？有什么建议么？

编辑：我忘了在原始帖子中提到我必须在 Excel 中打开 csv。

```
var csv = "'01";   //prints '01 in the cell
var csv = '="01"'; //prints  01 in the cell, but the value is ="01" 
```

有没有办法获取单元格值并显示为 01 （而不是不同的显示和值）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:24:01.657

```
<a download="somedata.csv"  id='x'>Download CSV</a>
<script>
       var csv = '01';
       var a = document.getElementById('x');
       a.href='data:text/csv;base64,' + btoa(csv);
</script> 
```

This works just fine as it is.

I imagine that you're viewing the CSV in Excel, which re-formats the number according to its whims and to cell defaults. But if you look at the CSV in Notepad, you'll see that the leading `0` is still there in the actual file.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:27:13.687

您的代码实际上有效：

```
<a download="somedata.csv"  id='x'>Download CSV</a>
<script>
       var csv = '01';
       var a = document.getElementById('x');
       a.href='data:text/csv;base64,' + btoa(csv);
</script> 
```

如果您在文本编辑器中打开此文件，则会出现前导零。

如果您专门针对 Microsoft Excel，则可以添加前导单引号以保留前导零 - 尽管您仍然需要输入每个单元格并按 Enter 以使其生效！：

```
<a download="somedata.csv"  id='x'>Download CSV</a>
<script>
       var csv = "'01";
       var a = document.getElementById('x');
       a.href='data:text/csv;base64,' + btoa(csv);
</script> 
```

更复杂 - 但有效（再次仅适用于 Excel）

```
<a download="somedata.csv"  id='x'>Download CSV</a>
<script>
       var csv = '="01"';
       var a = document.getElementById('x');
       a.href='data:text/csv;base64,' + btoa(csv);
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-04T13:05:22.087

我知道这是一个老问题，但我最近遇到了这个问题，并通过在末尾添加零宽度空格字符来修复它，如下所示：

```
var csv = '01' + String.fromCharCode(8203); 
```

我希望它能帮助遇到这个问题的其他人。

# asp.net - Asp.net web API 日期时间格式

> ID：13817108
> 
> 赞同：3
> 
> 时间：2012-12-11T09:20:44.493
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我有一个 Winform 客户端，它使用 dd/MM/yyyy 格式的日期时间值向我的控制器发送一个 json 发布请求，并且调用返回状态代码 400。

我试图添加：

```
<globalization uiCulture="fr" culture="fr-FR" /> 
```

到我的 web.config 文件，但它仍然无法正常工作。

编辑：我还应该补充一点，我无法控制客户端并且我补充说：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/mm/yyyy}")] 
```

对我的模型没有结果

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-12T21:57:59.973

有一个非常简单的解决方案。只需将 CultureInfo 添加到 global.asax 中的 JsonSerializerSettings 方法 Application_Start()。

```
GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings = 
    new JsonSerializerSettings
    {
        DateFormatHandling = DateFormatHandling.IsoDateFormat,                           
        DateTimeZoneHandling = DateTimeZoneHandling.Unspecified,
        Culture = CultureInfo.GetCultureInfo("fr-FR")
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:47:59.300

如果您通过 JSON 发布此内容，那么您应该能够为您的日期格式创建 JSON.NET 转换器。

事实上，在研究这个答案时，我在 SO [WebApi Json.NET 自定义日期处理上找到了这个完整的例子](https://stackoverflow.com/questions/12856853/webapi-json-net-custom-date-handling)

显然，只需将 MyDateTimeConvertor 中的转换更改为使用当前文化和您指定的格式的东西。

```
DateTime.ParseExact(reader.Value.ToString(), "dd/mm/yyyy", CultureInfo.CurrentCulture); 
```

和

```
writer.WriteValue(((DateTime)value).ToString("dd/mm/yyyy")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-18T08:43:27.110

前：

```
"AccessStartTime": "2020-12-01T00:00:00", 
```

将以下代码添加到 Global.asax.cs 的 Application_Start() 中

```
 IsoDateTimeConverter converter = new IsoDateTimeConverter
        {
            DateTimeStyles = DateTimeStyles.AdjustToUniversal,
            DateTimeFormat = "yyyy-MM-dd HH:mm:ss"
        };
        GlobalConfiguration.Configuration.Formatters
         .JsonFormatter.SerializerSettings.Converters.Add(converter); 
```

后：

```
 "AccessStartTime": "2020-12-01 00:00:00", 
```

> 参考：[https ://stackoverflow.com/a/42816827/2736970](https://stackoverflow.com/a/42816827/2736970)

# django - Django多个模型，同一张表

> ID：13817112
> 
> 赞同：13
> 
> 时间：2012-12-11T09:20:58.033
> 
> 标签：django, django-models

我有一个旧数据库，其中有一个表示文件系统中节点的表。节点类型很少，例如 A、B、C，不同类型的节点具有不同的属性。在当前的数据库设计中，有一个表保存有关节点的信息。如果节点属于 A 类型，则仅设置与 A 类型相关的字段。现在我想将类型 A、B、C 表示为模型。出现的问题是：

1.  我想有这样的行为，所有三种类型都有一个 name 属性。我想通过 name 属性过滤文件系统中的所有节点并获取良好类型的对象列表。

2.  每个节点作为父链接，在数据库中表示为外键，因此可能应该发生某种形式的继承。

在django中可以吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T16:06:12.530

对的，这是可能的。这是一个例子：

模型.py

```
from django.db import models

# Create your models here.
class NodeA(models.Model):

    name_a = models.CharField(max_length=75, blank=True, null=True)

    class Meta:
        db_table = 'Nodes'
        managed = False

class NodeB(models.Model):

    name_b = models.CharField(max_length=75, blank=True, null=True)

    class Meta:
        db_table = 'Nodes'
        managed = False

class NodeC(models.Model):

    name_c = models.CharField(max_length=75, blank=True, null=True)

    class Meta:
        db_table = 'Nodes'
        managed = False 
```

数据库架构 (SQLITE)

```
 Nodes {
    id        integer   primary key
    name_a    TEXT
    name_b    TEXT
    name_c    TEXT } 
```

概念证明

```
import NodeA, NodeB, NodeC

a = NodeA()
a.name_a = 'Node A'
a.save()

b = NodeB()
b.name_b = 'Node B'
b.save()

c = NodeC()
c.name_c = 'Node C'
c.save() 
```

这会产生：

```
id        name_a        name_b        name_c
1         Node A
2                       Node B
3                                     Node C 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-23T19:28:29.483

我使用了一种稍微不同的方法，它通过创建一个视角与南方很好地配合。透视图是一个代理，它重命名模型中的某些字段，但保留列的名称。

对我来说，这是一个展示 django ORM 灵活性的例子。我不确定您是否想在生产代码中使用它。因此它没有经过足够的测试，但它会给你一些想法。

**这个想法**

透视图让用户为一个表创建不同的模型，该表可以有自己的方法和不同的字段名称，但共享底层模型和表。

它可以在同一个表中存储不同的类型，这对于日志记录或事件系统来说非常方便。每个透视图只能看到它自己的条目，因为它是根据字段名*action_type*过滤的。

这些模型是非托管的，但有一个自定义管理器，因此 south 不会为其创建新表。

**用法**

实现是一个类装饰器，它修改django模型的元数据。它接受一个“基本”模型和一个别名字段字典。

我们先来看一个例子：

```
class UserLog(models.Model):
"""
A user action log system, user is not in this class, because it clutters import
"""
date_created = models.DateTimeField(_("Date created"), auto_now_add=True)

# Action type is obligatory

action_type = models.CharField(_("Action Type"), max_length=255)
integer_field1 = models.IntegerField()
integer_field2 = models.IntegerField()
char_field1 = models.CharField(max_length=255)
char_field2 = models.CharField(max_length=255)

@ModelPerspective({
    'x': 'integer_field1',
    'y': 'integer_field2',
    'target': 'char_field1'
}, UserLog)
class UserClickLog(models.Model):
    pass 
```

这将创建一个模型，该模型将属性 x 映射到 integer_field1，将 y 映射到 integer_field2，并将目标映射到 char_field1，其中基础表与作为 UserLog 的表相同。

用法与任何其他模型没有什么不同，而南只会创建 UserLog 表。

现在让我们看看如何实现它。

**执行**

它是如何工作的？

如果该类被评估，则装饰器接收该类。这将对类进行猴子修补，因此它的实例将反映您提供的基表。

*添加别名*

如果我们更深入地研究代码。读取别名字典，并为每个字段查找基本字段。如果我们在基表中找到该字段，则会更改名称。这有一个小的副作用，它也会改变列。所以我们必须从基础字段中检索字段列。[然后使用contribute_to_class](https://stackoverflow.com/questions/2357528/explanation-of-contribute-to-class)方法将该字段添加到类中，该方法负责所有簿记。

然后将所有未别名的属性添加到模型中。这本身不是必需的，但我选择添加它们。

*设置属性*

现在我们有了所有的字段，我们必须设置几个属性。[托管](https://docs.djangoproject.com/en/dev/ref/models/options/)属性会欺骗南方忽略表格，但它有副作用。班级将没有经理。（我们稍后会解决这个问题）。我们还从基本模型中复制表名（[db_table](https://docs.djangoproject.com/en/dev/ref/models/options/)）并将 action_type 字段默认为类名。

我们需要做的最后一件事是提供一个经理。必须小心，因为 django 声明只有一个 QuerySet 管理器。我们通过使用 deepcopy 复制管理器来解决这个问题，然后添加一个过滤器语句，该语句过滤类名。

deepcopy(QuerySet()).filter( **action_type** = **cls.class.name** )

这让我们的表只返回相关记录。现在把它包进一个装饰器就完成了。

这是代码：

```
from django.db import models
from django.db.models.query import QuerySet

def ModelPerspective(aliases, model):
  """
  This class decorator creates a perspective from a model, which is
  a proxy with aliased fields.

  First it will loop over all provided aliases
  these are pairs of new_field, old_field.
  Then it will copy the old_fields found in the
  class to the new fields and change their name,
  but keep their columnnames.

  After that it will copy all the fields, which are not aliased.

 Then it will copy all the properties of the model to the new model.

  Example:
    @ModelPerspective({
        'lusername': 'username',
        'phonenumber': 'field1'
    }, User)
    class Luser(models.Model):
        pass

  """
  from copy import deepcopy

  def copy_fields(cls):

    all_fields = set(map(lambda x: x.name, model._meta.fields))
    all_fields.remove('id')
    # Copy alias fields

    for alias_field in aliases:

        real_field = aliases[alias_field]

        # Get field from model
        old_field = model._meta.get_field(real_field)
        oldname, columnname = old_field.get_attname_column()
        new_field = deepcopy(old_field)

        # Setting field properties
        new_field.name = alias_field
        new_field.db_column = columnname
        new_field.verbose_name = alias_field

        new_field.contribute_to_class(cls, "_%s" % alias_field)
        all_fields.remove(real_field)

    for field in all_fields:
        new_field = deepcopy(model._meta.get_field(field))
        new_field.contribute_to_class(cls, "_%s" % new_field.name)

  def copy_properties(cls):
    # Copy db table
    cls._meta.db_table = model._meta.db_table

  def create_manager(cls):
    from copy import deepcopy
    field = cls._meta.get_field('action_type')
    field.default = cls.__name__
    # Only query on relevant records
    qs = deepcopy(cls.objects)
    cls.objects = qs.filter(action_type=cls.__name__)

  def wrapper(cls):

    # Set it unmanaged
    cls._meta.managed = False

    copy_properties(cls)
    copy_fields(cls)
    create_manager(cls)

    return cls
  return wrapper 
```

**这准备好生产了吗？**

我不会在生产代码中使用它，对我来说这是一个展示 django 灵活性的练习，但是如果有足够的测试，它可以在代码中使用。

反对在生产中使用的另一个论点是代码使用了大量 django ORM 的内部工作。我不确定 api 是否足够稳定。

而且这个解决方案不是你能想到的最好的解决方案。有更多的可能性来解决在数据库中存储动态字段的问题。

# python-3.x - 在 Python3 中打印带空格的数字

> ID：13817116
> 
> 赞同：1
> 
> 时间：2012-12-11T09:21:23.277
> 
> 标签：python-3.x

我有一个要打印的数字列表，如下所示：

```
 1
          1
          3
         11
         58
        451
      4 461
     49 957
    598 102
  7 437 910
 94 944 685 
```

目前我通过以下丑陋的代码实现了这一点：

```
for count in counts:
    s = str(count)[::-1]
    s = ' '.join([s[i:i+3][::-1] for i in range(0,len(s),3)][::-1])
    print('{:>11}'.format(s)) 
```

无论如何，有没有`format`可以立即实现这一目标？我在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:41:26.930

您可以在字符串格式化程序中使用千位分隔符并将其替换为您喜欢的内容，如下所示：

```
>>> nums = (1, 3, 11, 58, 451, 4461, 49957, 598102, 7437910, 94944685)
>>> for num in nums:
        print('{:>11,}'.format(num).replace(',', ' '))

          1
          3
         11
         58
        451
      4 461
     49 957
    598 102
  7 437 910
 94 944 685 
```

# css - 如何使用css样式更改项目选择radcombobox的颜色？

> ID：13817119
> 
> 赞同：1
> 
> 时间：2012-12-11T09:21:43.180
> 
> 标签：css, asp-classic, combobox, telerik, radcombobox

我想知道是否可以更改“背景颜色”的值以选择 radCombobox。

这是我使用的css代码：（我可以更改所有内容，但不能更改突出显示项目的颜色......）

```
div.RadComboBox_Metro .rcbInputCell INPUT.rcbInput
{
    background-color: #9BCDFF;
} 
```

“地铁”是我的 radcombobox 的“皮肤”的名称

谢谢大家

**编辑**- **2012**年 12 月 12 日 终于在完全头痛和几次尝试之后。我下面的代码适用于突出显示的第一个项目，但不适用于其他项目......你知道为什么吗？提前谢谢你

```
function cmbx_dbListUserOnClientSelectedIndexChanged(sender, args) {
                    var combo = $find("<%= cmbx_dbListUser.ClientID %>");
                    var highlightItem =  combo.get_highlightedItem();
                    if(highlightItem != null)
                    {
                        highlightItem.get_element().style.backgroundColor = "#9BCDFF";
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:49:20.833

根据我的经验，以及我收集到的信息，唯一的选择是一些 javascript/jquery 代码：

```
$(".someSelect").change(function(ev){
     var targ = ev.target.selectedOptions[0];
    if($(targ).val() == $(targ).text()){
        $(".selected").removeClass('selected');
    }else{

    $(targ).parent().addClass('selected');
    $(targ).siblings('.selected').removeClass('selected');
    $(targ).addClass('selected');
}
});​ 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/wC6nw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:54:48.940

最后经过彻底的头痛和几次尝试。我下面的代码有效

```
div.RadComboBoxDropDown_Metro .rcbHovered 
{
    border: 1px #7FB8FF !important;
    background-color: #7FB8FF !important;
}
.RadComboBox_Metro .rcbFocused .rcbArrowCell, .RadComboBox_Metro .rcbFocused .rcbReadOnly .rcbInputCell, .RadComboBox_Metro .rcbFocused .rcbReadOnly .rcbArrowCellHidden {
    background-color: #7FB8FF !important;
    border: 1px #5B85B7 !important;
} 
```

# python - 从父目录导入失败并出现 ImportError

> ID：13817120
> 
> 赞同：2
> 
> 时间：2012-12-11T09:21:49.717
> 
> 标签：python

我正忙着用python开发一个应用程序，我的应用程序结构如下

```
main.py
pr/
    core/
        __init__.py
        predictor.py
    gui/
        predictor/
            __init__.py
            predict_panel.py
        __init__.py
        pr_app.py
    __init__.py 
```

我使用启动应用程序`main.py`

在里面`pr_app.py`我有

```
class PrApp(wx.App):
    PREDICTOR = Predictor() 
```

在里面`predict_panel.py`我可以成功

`from pr.core.predictor import Predictor`

但由于某种原因我不能

`from pr.gui.pr_app import PrApp`

我收到了

`ImportError: cannot import name PrApp`

从python中的父目录导入时是否有某种陷阱，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:45:08.463

我尝试了这个并制作了一棵像你一样的树，但`__init__.py`在`pr`目录中添加了一个。没有那个`__init__.py`你`from pr.core.predictor import Predictor`应该失败，所以我认为你有它，但忘了在你的问题中写下来。

我无法得到你所做的失败，它对我来说很好。`predict_panel.py`正如我预期的那样，我可以从 进行两个导入。

但是，如果我 from `pr_app.py`import `predict_panel`，那么 import from `predict_panel.py`of`PrApp`将失败。这是因为我有一个循环导入。您尝试在导入期间导入`predict_panel`from并尝试在导入期间导入. 这会导致导入的无限递归，因此是不允许的。`PrApp``PrApp``PrApp``predict_panel`

解决这个问题的最好方法是重新组织你的代码，这样你就不必进行循环导入。如果`PrApp`进口`predict_panel`，为什么还`predict_panel`需要`PrApp`？这是一个有缺陷的设计的标志。

但是，修复它的最快方法是将其中一个导入从模块顶部移动到调用它的函数/方法中。这是不好的做法，但它会很快解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:37:14.647

> 我使用 main.py 启动应用程序

通过这样做，您可以正确地使您的`pr/`文件夹成为一个包，因此该包中的交叉引用导入应该可以工作。所以两者都`pr.gui.pr_app import PrApp`应该`from ..pr_app import PrApp`工作。

我认为您的问题是您没有制作`pr`真正的包裹。尝试在`__init__.py`那里添加一个，它应该可以工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T09:23:11.203

无法从父目录导入的原因是每个脚本都将自己视为其导入树的顶部。它看到的唯一其他东西是`sys.path`. 据我所知，您*从上面*导入的唯一机会是将父目录添加到您的路径中（绝对不是相对的）。

把它放在文件的顶部：

```
import sys
import os
import inspect

#enable imports from dir above
sys.path.append(os.path.abspath(
    os.path.dirname(inspect.getfile(inspect.currentframe()))+"/..")) 
```

# c# - 如何在 C# 中将文件存储在共享网络驱动器上

> ID：13817122
> 
> 赞同：1
> 
> 时间：2012-12-11T09:22:00.020
> 
> 标签：c#, asp.net, network-drive

我有一个 Asp.net 应用程序，我试图将我的文件保存在共享网络驱动器上。

```
 StrPath = HttpContext.Current.Server.MapPath(@"\\server\c\DTA\"); 
```

但我得到一个错误找不到路径

应该做的是可以将文件保存在共享网络驱动器中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:25:54.200

MapPath 用于将网络服务器的虚拟路径映射到硬盘驱动器上的物理路径。您拥有的已经是物理路径，因此您可以直接使用它来创建文件。

```
var fileStream = File.Create(@"\\server\c\DTA\");
... 
```

# java - java exceptions

> ID：13817124
> 
> 赞同：0
> 
> 时间：2012-12-11T09:22:08.157
> 
> 标签：java, multithreading, thread-safety

i have two java classes running on different threads. one class makes a connection to the internet while the other class monitors the connection status. i want to throw an IOException incase the class making a connection delays while reading server response, at the sametime i dont want to throw an exception if there is some response being read from the Server.

i came up with this code.

my problem is i want to throw an IOException in class NetworkMonitor which will be caught by NetworkConnector class which is the main class. however the compiler complains of uncaught exception.

```
 public class NetworkConnector{
  //method that connects to the server to send or read data.
  public String sendData(String url ,String data){
     try{

        //start the monitor before we read the serverResponse
        new NetworkMonitor().startMonitor();

        int read ;
        while ((read = inputStream.read()) != -1) {
           //read data.
           sb.append((char) read);

           //monitor if we are reading from Server if not reading count 10 to 0 and throw IoException. 
           new NetworkMonitor().resetCounter();
        }

     } catch(IOException ex){
        //all IOException should be caught here.
     }

  } 
```

}

//class that monitors if there a network activity occuring.

```
 public class NetworkMonitor implements Runnable {

  private final int WAITTIME =10;
  private int counter = WAITTIME;

  public void run(){
     try{

        while(counter > 0){
           //waiting here
           counter--; //decrement counter. 
           Thread.sleep(1000);     
        }

        //when counter is at zero throw iOexception 
        throw new IOException("Failed to get server Response");

     } catch(InterruptedException e){
        System.out.println(e.getMessage());
     } catch(IOException e){
        //i want to throw the IOEception here since the exception should 
        //be caught by the networkConnector class not the monitor class but the compiler complains.
        // unreported exception java.io.IOException; must be caught or declared to be thrown
        throw new IOException(e.getMessage());

        //throwing another exception type is okay ===>why cant we throw the same type of exception we caught.
         throw new IllegalArgumentException(e.getMessage()); 
     }

  }

  //reset the counter if called.
  public void resetCounter(){
     counter = WAITTIME;
  }

  public void startMonitor(){
     Thread t = new Thread(this);
     t.start();
  } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:28:07.777

你有一个更基本的问题

*   一个线程中抛出的异常需要传递给另一个线程。您可以使用 ExecutorService 和 Future 来执行此操作。
*   要实现您的超时，您可以使用 ScheduledExecutorService。这将允许您安排延迟和可取消的任务。
*   一个线程中抛出的异常不会解除阻塞读取。您需要关闭连接以解除阻塞，这将导致 IOException。
*   一旦你有了这些，你就可以使用 Callable 而不是 Runnable 来抛出一个检查异常。

而不是睡1秒钟，10次。你可以只睡10秒钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:25:13.517

基本设计有缺陷。异常不会自动跨线程边界传播。

您可能应该考虑使用非阻塞 I/O 来做您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T10:30:08.847

我想，您正试图在两个线程之间实现某种通信。例外并不是那么优雅的解决方案。我建议更改您的代码以适应与`volatile`and `blocking queues`or`executor service`等​​更好的通信`future`方式。实现此目的的一种方法如下：

`LinkedBlockingQueue`在主类中创建一个，从那里分叉这两个线程：

```
LinkedBlockingQueue<Integer> blockingQueue = new LinkedBlockingQueue<Integer>(
        1); 
```

将此队列传递给两个线程。`volatile`在您的网络监视器类中创建一个成员：

```
volatile boolean isAllowed = true; 
```

将您的 while 条件更改`NetworkConnector`为

```
while ((read = inputStream.read()) != -1 && networkMonitor.isAllowed()) { 
```

在您的`NetworkMonitor's` `run`方法中，更改 while 条件：

```
while(isAllowed) {
Integer i = blockingQueue.poll(10, TimeUnit.SECONDS);
if(i==null) 
  isAllowed = false;
} 
```

`NetworkConnector's` `while loop`在里面`append`加上这个：

```
blockingQueue.add(1); 
```

本质上，我们将一个整数添加到队列中；一旦监视器线程得到一个非空整数，它最多等待 10 秒。连接器线程有 10 秒的时间将整数放入队列，如果没有，它的 while 循环会中断。一旦脱离循环，做任何你需要做的事情。

我**没有**运行这个，这只是一个基于初步想法的例子。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-11T09:29:14.753

`run()`是从`Runnable`. 在可运行接口中，没有受检异常定义，因此您无法从那里抛出受检异常。但是你可以用 throw`RuntimeException`来代替。

# jaxb - How to have custom namespace prefix

> ID：13817126
> 
> 赞同：5
> 
> 时间：2012-12-11T09:22:10.160
> 
> 标签：jaxb

I am new to JAXB. I am able to populate the XML. In my case I need my namespace prefix as

```
<set xmlns="www.google.com"
   xmlns:myName="www.google.com"> 
```

instead of

```
<set xmlns="www.google.com"
   xmlns:ns2="www.google.com"> 
```

I have used `package-info` class and also the `@XmlType` annotation. Do I need to add any variable to get the desired name for the second namespace like "xmlns:MyName' instead of "xmlns:ns2"?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:14:07.750

如果您使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)作为您的 JAXB 提供程序或最新版本的 JAXB RI，那么您可以执行以下操作：

**包信息**

您可以使用`@XmlNs`注解`xmlns`属性上的`@XmlSchema`注解来指定命名空间的前缀。

```
@XmlSchema(
    namespace="www.google.com",
    elementFormDefault = XmlNsForm.QUALIFIED,
    xmlns={
        @XmlNs(namespaceURI = "www.google.com", prefix = ""),
        @XmlNs(namespaceURI = "www.google.com", prefix = "myName"),
    })
package forum13817126;

import javax.xml.bind.annotation.*; 
```

**Java 模型**

下面是我将用于此示例的简单 Java 模型。

```
package forum13817126;

import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Set {

} 
```

**演示代码**

以下演示代码将创建域模型的实例并将其编组为 XML。

```
package forum13817126;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Set.class);

        Set set = new Set();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(set, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<myName:set xmlns="www.google.com" xmlns:myName="www.google.com"/> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:08:34.007

您需要`xmlns`在. 它的值是一个注释数组，为编组器提供建议的前缀映射。虽然在技术上允许忽略这些建议，但我发现只要没有冲突（两个不同的包为不同的 URI 建议相同的前缀），它们通常会受到尊重。`@XmlSchema``package-info`

# java - Is there any bug repot on Ibatis parameterClass?

> ID：13817130
> 
> 赞同：1
> 
> 时间：2012-12-11T09:22:25.573
> 
> 标签：java, inheritance, ibatis

I don't speak, write english well. sorry. But I need your help. so... despite crummy my english.. I'm wrting. If I do crummy enlish, please estimate and understand my question.

here we go.

* * *

## CommonVO.java

```
 package a.b.c;

 public class CommonVO {

     private  String productId;

     public void setProductId(String productId)
     {
         return this.productId;
     }

     public String getProductId(String productId)
     {
         this.productId = productId;
     } 
```

* * *

## TestVO.java

```
package a.d.e;

public class TestVO extends CommonVO {
     private  String year;

     public void setYear(String year)
     {
         return this.year;
     }

     public String getYear(String year)
     {
         this.year = year;
     }
} 
```

* * *

## Ibatis query xml

```
<select id="testSelect" parameterClass="a.d.e.TestVO" resultClass="int">
    select a, b
      from TEST_TBL
     where 1 = 1
     &lt;isNotEmpty prepend="AND" property="productId">
         product_id = #productId#
     &lt;isNotEmpty>
</select> 
```

Sometimes, the following error occurs:

```
> --- The error occurred while applying a parameter map.
> --- Check the testSelect-InlineParameterMap.
> --- Check the parameter mapping for the 'productId' property.
> --- Cause: java.sql.SQLException: ▒▒▒▒▒▒▒▒ ▒▒ ▒ε▒▒▒ com.ibatis.common.jdbc.exception.NestedSQLException:
> --- The error occurred while applying a parameter map.
> --- Check the testSelect-InlineParameterMap.
> --- Check the parameter mapping for the 'productId' property.
> --- Cause: java.sql.SQLException: ▒▒▒▒▒▒▒▒ ▒▒ ▒ε▒▒▒
>         at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryWithCallback(MappedStatement.java:201)
>         at com.ibatis.sqlmap.engine.mapping.statement.MappedStatement.executeQueryForList(MappedStatement.java:139)
>         at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:567)
>         at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForList(SqlMapExecutorDelegate.java:541)
>         at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForList(SqlMapSessionImpl.java:118)
>         at org.springframework.orm.ibatis.SqlMapClientTemplate$3.doInSqlMapClient(SqlMapClientTemplate.java:298)
>         at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:166)
>         at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)
>         at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)
>         at egovframework.rte.psl.dataaccess.UmmAbstractDAO.list(UmmAbstractDAO.java:124)
>         at go.narastat.meta.std.service.impl.testSelect(StdMetaDAO.java:185)
>         at go.narastat.meta.std.service.impl.StdMetaImpl.stdMetaNoMatchSvyItemList(StdMetaImpl.java:164)
>         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
>         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>         at java.lang.reflect.Method.invoke(Method.java:600)... 
```

Strangely, it occurs intermittently...

Do you have any idea? Any answer or comment will be helpful.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:45:21.267

当您编写 #productId# 时，ibatis 从 parameter-class 调用该属性的 get-Method 。

你的吸气剂和二传手是错误的方式。getter 应该返回值，而 setter 应该设置值。

改变它，告诉我们你的结果；）

例子：

**CommonVO.java**

```
public void setProductId(String productId)
 {
      this.productId = productId;
 }

 public String getProductId()
 {

     return this.productId;
 } 
```

# php - 删除php表单中的图像

> ID：13817136
> 
> 赞同：-2
> 
> 时间：2012-12-11T09:22:47.103
> 
> 标签：php, mysql

我有一个表格来编辑有关餐厅的数据。然后，在表单中我放了一个按钮来删除图像。这是我的代码：

```
echo "<form name='form_update1' method='post' action='editrestaurant_post.php' enctype='multipart/form-data' >\n";

echo '<table width="50%">';
echo '<tr>';
echo '<td>Edit Restaurant</td>';
echo '</tr>';

echo '<tr>';
echo "<td>&nbsp;</td>";
echo '</tr>';

while ($fp = mysql_fetch_array($rsP)) { // loop as long as there are more results
$proid = mysql_real_escape_string($fp['proid']);
$proid = is_array($proid) ? $proid[count($proid)-1] : $proid;

echo '<tr>';
echo "<td>&nbsp;</td>";
echo "<td><input type='hidden' size='40' name='proid[$p]' value='{$fp['proid']}' /></td>";
echo '</tr>';

echo '<tr>';
echo "<td>Restaurant Name :</td>";
echo "<td><input type='text' size='40' name='resName[$p]' value='{$fp['resName']}' /></td>";
echo '</tr>';

$sqlPi= "SELECT * FROM pimage WHERE pimage.proid ='" . $proid . "'";
        $rsPi = mysql_query($sqlPi) or die($sqlPi."<br/><br/>".mysql_error());
        $pi = 0;

while ($fpi = mysql_fetch_array($rsPi)) { 
$image = mysql_real_escape_string($fpi['image']);
$image = is_array($image) ? $image[count($image)-1] : $image;
$id = mysql_real_escape_string($fpi['id']);
$id = is_array($id) ? $id[count($id)-1] : $id;

echo "<form method='post' action='delete_image.php'>\n";

echo '<tr>';
echo "<td>Image :</td>";
echo "<td><img src='client_images".$fpi['image']."' width='50' height='50' ><input type='submit' name='deletepi' id='deletepi' value='Delete Image'></td>";
echo "<td><input type='hidden' size='40' name='imid' value='{$id}' /><input type='hidden' size='40' name='dir' value='{$image}' /><input type='hidden' size='40' name='e' value='{$e}' /></td>";
echo '</tr></form>';
++$pi;

}

++$p;
}

echo'<tr>
<td colspan="3" align="center"><input type="submit" name="button1" id="button1" value="Submit1"></td>
</tr>
</table>
</form>'; 
```

问题是当我单击删除按钮时，它会像主编辑餐厅表单一样执行操作。我怎么能解决这个问题？谢谢：D，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:25:31.343

问题是因为您有嵌套`<form>`元素。使用单个`<form>`或创建单独的不使用嵌套`<form>`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:32:46.377

如评论中所述，使用单独的表格；或者对于图片删除使用`<a>`标签并将其链接到 delete_image.php。还附加图像的链接，如图像 ID。所以在 delete_image.php 中你可以读取查询字符串并删除相应的图像。

# verilog - 在 Verilog 的生成块中使用 if else 条件

> ID：13817141
> 
> 赞同：0
> 
> 时间：2012-12-11T09:22:56.283
> 
> 标签：verilog

我有一个使用递归的代码，

```
module mult(a,b,c)
  generate
    always @(*) begin
     /* a few calculations */
     if(x < 10)
       flag = 1;
     else
       flag = 0; 
    end
     if( flag == 1)
        mult(x,y,z);
     else
        z = x*y;
  endgenerate
endmodule 
```

但是，此代码返回一个错误，指出标志不是常量。我知道人们不能通过使用寄存器、电线或整数在 always 块之外使用 if-else。但是，还有其他方法可以实现代码吗？

递归似乎只在 generate 块中起作用，但在 always 块之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:22:51.387

生成块中的条件需要在细化时保持不变。通常，它们要么定义模块，要么定义模块参数。

你在你的例子中根本没有声明'x'......事实上有许多错误会阻止它编译。够了，很难弄清楚我们的意图。你能提供一些细节吗？

# java - Axis2 用户认证

> ID：13817145
> 
> 赞同：2
> 
> 时间：2012-12-11T09:23:11.783
> 
> 标签：java, web-services, soap, wsdl, axis2

由于希望尽可能保持 Web 服务无状态，我遇到了一个问题。我最近开始使用 Axis2 并试图找到一个可行的身份验证解决方案。对于身份验证，我的意思是用户/密码。我已经将 SSL 与 WS-Policy 结合使用来保护过程调用。

但是，我发现与 Rampart 1.6.2 捆绑的一些示例已经过时，尤其是名为“sample-tomcat”的策略示例及其 WSPasswordCallback 处理程序（可在[此处](http://goo.gl/CA5DQ)找到）。`WSPasswordCallback.USERNAME_TOKEN_UNKNOWN`在 1.6 中已弃用，并且`WSPasswordCallback.getPassword()`始终返回 null，即使在消息的安全标头中的 UsernameToken 元素中提供了密码。

所以。我不确定从哪里着手检查每条消息的用户名/密码。我正在看这两个选项：

1.  使用执行用户名/密码身份验证的处理程序编写模块。

2.  放弃无状态并编写登录服务，返回所有其他服务所需的令牌。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:43:50.650

实际上，根据 WSS4J 开发人员 Colm O Heigeartaigh 的说法，在更改之前使用验证器接口更奇怪，请参阅[他关于 WSS4J 1.6 中新验证器设计的第一](http://coheigea.blogspot.se/2011/02/usernametoken-processing-changes-in.html)篇、[第二篇](http://coheigea.blogspot.se/2011/02/wspasswordcallback-changes-in-wss4j-16.html)和[第三篇](http://coheigea.blogspot.se/2011/04/wss4j-16-introducing-validators.html)博客文章。

不应该处理身份验证，它被认为是糟糕的`WSPasswordCallback`设计并且反对关注点分离，因此他们（WSS4J 开发人员）重写了 WSS4J 的这一部分。

然而，据我所知，Rampart 开发团队还没有实现开发人员应用自定义验证器的方法，也没有应用 WSS4J 验证器之类的方法`NoOpValidator`——即使它在 WSS4J 中可用。在他们的（Rampart 的）项目 JIRA 中注册了一个问题（[在此处阅读](https://issues.apache.org/jira/browse/RAMPART-205#comment-13583029)），但它的优先级较低，目前正在编写；该问题不包含在下一个次要 (1.6.3) 或主要 (1.7.0) 版本中。

因此，您必须按照我自己的喜好执行以下三件事：

*   使用基于传输层的身份验证，我建议使用 HTTPS 传输的身份验证标头。
*   将 Axis2 和 Rampart 降级到 1.5.x，该版本仍在维护中（关键错误修复）。
*   编辑 wss4j 的源代码并编译一个新的 jar。
*   为 Axis2 编写一个模块来解决这个问题。

如果有其他解决方案/解决方法，请随时评论/纠正我。

# jquery - jQuery template not using JSON passed from Classic ASP

> ID：13817148
> 
> 赞同：0
> 
> 时间：2012-12-11T09:23:19.593
> 
> 标签：jquery, json, asp-classic, jquery-templates

**The problem**

My jQuery template does not seem to be reading and/or building the html from the json that is passed to it. I cannot see, at which stage, the problem occurs.

**The html**

```
<li class="span3">
    <div class="thumbnail">
        <img src="<%= rsProd("Image") %>" alt="<%= rsProd("Description") %>" width="120" height="80" />
        <div class="caption">
            Order: <input type="text" style="width:100px" id="txtOrder-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" name="txtOrder-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" value="<%= rsProd("ImageOrder") %>" class="listorder" maxlength="5" />
            <br />
            <% if rsProd("ImageID") = rs("MainImage") then %>
            <button id="btnSetMain-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" name="btnSetMain-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" class="btn btn-primary btn-inverse btnSetMain" disabled="disabled">Current</button>
            <% else %>
            <button id="btnSetMain-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" name="btnSetMain-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" class="btn btn-primary btnSetMain">Set main</button>
            <% end if %>
            <button id="btnOrderRemove-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" name="btnOrderRemove-<%= rsProd("ImageID") %>-<%= rsProd("ImageOrder") %>" class="btn btn-warning btnOrderRemove">Remove</button>
        </div>  
    </div>
</li> 
```

**The jQuery template**

```
<script id="imagesTemplate" type="text/x-jquery-tmpl">
  <li class="span3">
    <div class="thumbnail">
        <img src="${image}" alt="${description}" width="120" height="80" />
        <div class="caption">
            Order: <input type="text" style="width:50px" id="txtOrder-${imageid}-${imageorder}" name="txtOrder-${imageid}-${imageorder}" value="${imageorder}" class="listorder" />
            <button id="btnSetMain-${imageid}-${imageorder}" name="btnSetMain-${imageid}-${imageorder}" class="btn btn-primary btnSetMain ${extraclass}" ${disabled}>${text}</button>
            <button id="btnOrderRemove-${imageid}-${imageorder}" name="btnOrderRemove-${imageid}-${imageorder}" class="btn btn-warning btnOrderRemove">Remove</button>
        </div>
    </div>
  </li>
</script> 
```

**The returned JSON**

```
{"result": 
    {"0": {
          "imageurl": "\u002Fimages\u002Fmainimages\u002Fimage-01.jpg",
          "description": "",
          "imageid": 25,
          "imageorder": 1,
          "extracss": "",
          "Disabled": "",
          "text": "Set Main"
          },
     "1": {"imageurl": "\u002Fimages\u002Fmainimages\u002Fimage-02.jpg","description": "test","imageid": 17,"imageorder": 2,"extracss": "","Disabled": "","text": "Set Main"},
     "2": {"imageurl": "\u002Fimages\u002Fthumbnails\u002Fimage-03.jpg","description": "test","imageid": 15,"imageorder": 4,"extracss": "","Disabled": "","text": "Set Main"},
     "3": {"imageurl": "\u002Fimages\u002Fmainimages\u002Fimage-04.jpg","description": "","imageid": 24,"imageorder": 5,"extracss": "","Disabled": "","text": "Set Main"},
     "4": {"imageurl": "\u002Fimages\u002Fmainimages\u002Fimage-05.jpg","description": "test","imageid": 16,"imageorder": 7,"extracss": "","Disabled": "","text": "Set Main"}
    }
} 
```

**The jQuery code**

The jQuery code that is run when the user clicks a button, this all works apart from the populating of the template

```
success:function(data, textStatus, jqXHR){
    $('#prodThumbs').empty();
    thumbs = data.items;
    $.template('thumbsTemplate');
    $('#imagesTemplate').tmpl(data.result).appendTo('#prodThumbs');
} 
```

the data.result seems to be correctly producing the right json data from a correct json response, however the applying the data to the template doesn't seem to work

For completeness, i've attached the Classic ASP server side function.

```
set images = server.createObject("scripting.dictionary")
i = 0
While (NOT rsProd.EOF)

    set image = server.createObject("scripting.dictionary")
    image.Add "imageurl", rsProd("Image").value
    image.Add "description", rsProd("Description").value
    image.Add "imageid", rsProd("ImageID").value
    image.Add "imageorder", rsProd("ImageOrder").value
    if rsProd("ImageID").value = request.Form("main") then
        image.Add "extracss", "btn-inverse"
        image.Add "disabled", "disabled=disabled"
        image.Add "text", "Current"
    else
        image.Add "extracss", ""
        image.Add "Disabled", ""
        image.Add "text", "Set Main"
    end if

    images.Add i, image

    i = i + 1

rsProd.MoveNext()
Wend
result = (new JSON)("result", images, false)

rsProd.Close()
response.Write result
response.End 
```

i'm using nested dictionaries to build an object that I can (and seems to) return correctly as JSON (using [Michal Gabrukiewicz's ASP JSON utility class](http://www.webdevbros.net/2008/07/10/asp-json-utility-version-15-released/ "Michal Gabrukiewicz's ASP JSON utility class").)

**I feel like i'm missing something really simple, however i've banged my head against the desk so much now, i can't see it.**

**The outcome**

the html starts off as

```
<ul id="images">
    <li><img src="/image/initial.jpg" alt="test" id="initial" /></li>
</ul> 
```

the function

```
$('#images').empty(); 
```

leaves me with

```
<ul id="images">

</ul> 
```

the function

```
thumbs = data.images; 
```

correctly stores the json, but then function

```
$('#imagesTemplate').tmpl(thumbs).appendTo('#images'); 
```

still leaves me with

```
<ul id="images">

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:08:50.777

好吧，在嵌套字典似乎不起作用之后，我设法使用以下代码解决了这个问题

```
arraySize = 0
arraySize = (rsProd.RecordCount - 1)
dim imageArrays 
redim imageArrays(arraySize)
set images = server.createObject("scripting.dictionary")
i = 0
While (NOT rsProd.EOF)

    set image = server.createObject("scripting.dictionary")
    image.Add "imageurl", rsProd("Image").value
    image.Add "description", rsProd("Description").value
    image.Add "imageid", rsProd("ImageID").value
    image.Add "imageorder", rsProd("ImageOrder").value
    if rsProd("ImageID").value = request.Form("main") then
        image.Add "extracss", "btn-inverse"
        image.Add "disabled", "disabled=disabled"
        image.Add "text", "Current"
    else
        image.Add "extracss", ""
        image.Add "disabled", ""
        image.Add "text", "Set Main"
    end if
    set imageArrays(i) = image 
    i = i + 1

rsProd.MoveNext()
Wend
result = (new JSON)("result", imageArrays, false)

rsProd.Close()
response.Write result
response.End 
```

我设法将每个图像字典分配给数组中的索引，然后将该数组转换为 JSON。我之前已经尝试过这种方法，但在这一步失败了

```
set imageArrays(i) = image 
```

主要是因为我没有使用“set”关键字

所以感谢@SearchAndResQ 告诉我在我之前尝试过的评论中使用字典数组，但这让我再次回顾它。

# ios - Loading a local image in UIwebview

> ID：13817150
> 
> 赞同：1
> 
> 时间：2012-12-11T09:23:25.793
> 
> 标签：ios, ipad, uiwebview, automatic-ref-counting

I have an image (png) in the app document directory, which is a screenshot of a `UIView`. The image will be saved when user clicked a `UIButton`. I use `stringByEvaluatingJavaScriptFromString` to inject the image into a div in a `UIWebView`. The problem is when the app loads first, the correct image it added, but in run time the image is not changed, it only shows the image which was in the directory when loading. I tried cleaning the cache and etc but no use.

**note** - the webview loads local html files - I use arc

How can I add the correct image from the documentry directory to the webview. ?

**UPDATE** it works fine on IOS 5.. issue is only on IOS 6..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:22:13.780

我猜你给的图像路径是这样`/Users/file/...some other paths../Documents/Images/imag.png`的。
您提供的图像路径在您的文件中应该是这样的`HTML`，因为您正在尝试从本地路径加载图像。`file:///Users/file/...some other paths../Documents/Images/imag.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T08:12:29.910

我找不到这个问题背后的技术问题，但我通过每次保存图像文件时提供唯一名称来修复它。

```
 NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    int timeInter = [[NSDate date]timeIntervalSince1970];
    [userDefaults setInteger:timeInter forKey:WHEEL_NUMBER];
    NSNumber *newWheelKey = [userDefaults valueForKey:WHEEL_NUMBER]; 
```

我用`newWheelKey`. 删除图像文件夹时`viewdiddisappear`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:13:35.067

确保每次将图像保存在文档目录中时，您都必须提供不同的名称并根据图像进行检索。

# ruby-on-rails - 如何在 Rails 3 中用 ® 替换 ® 实体

> ID：13817163
> 
> 赞同：0
> 
> 时间：2012-12-11T09:24:15.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html-entities

我有一个带有 API 的旧服务器，我需要将数据从它加载到新服务器。问题是旧的服务器 API 输出像 ® 这样的 html 实体，我不想将它们放入新数据库中，而是想用 ® 替换它们但我不知道如何在 Rails 中做到这一点。我试图用 HTMLEntities 类来做，但它不能用 ® 代替它，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:34:23.990

`&reg;`您可以使用[**gsub**](http://ruby-doc.org/core-1.9.3/String.html#method-i-gsub)替换 ® 实体，例如

```
# encoding: utf-8 # this line might not be nescessary in Rails
string = 'test ® test'
string.gsub!('®', '&reg;')
# => string is now "test &reg; test" 
```

# java - 压缩图片但得到“未知压缩方法”

> ID：13817166
> 
> 赞同：1
> 
> 时间：2012-12-11T09:24:29.690
> 
> 标签：java, image, exception, compression, zip

我运行一个 java 聊天游戏客户端，它会在聊天中显示之前加载图片。

我确实通过 Yahoo Smush.it 压缩了我们在聊天游戏中使用的所有图片，但在 Java 控制台中出现此错误后：

```
java.util.zip.ZipException: unknown compression method
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:147)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
    at sun.awt.image.PNGImageDecoder.produceImage(PNGImageDecoder.java:344)
    at sun.awt.image.InputStreamImageSource.doFetch(InputStreamImageSource.java:246)
        at sun.awt.image.ImageFetcher.fetchloop(ImageFetcher.java:172)
    at sun.awt.image.ImageFetcher.run(ImageFetcher.java:136)
Uncaught error fetching image:
java.lang.ArrayIndexOutOfBoundsException
    at java.lang.System.arraycopy(Native Method)
    at sun.awt.image.PNGFilterInputStream.read(PNGImageDecoder.java:810)
    at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:221)
    at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:141)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
    at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
    at sun.awt.image.PNGImageDecoder.produceImage(PNGImageDecoder.java:346)
    at sun.awt.image.InputStreamImageSource.doFetch(InputStreamImageSource.java:246)
    at sun.awt.image.ImageFetcher.fetchloop(ImageFetcher.java:172)
    at sun.awt.image.ImageFetcher.run(ImageFetcher.java:136) 
```

但是现在我已经在 Photoshop 中打开了每张图片并再次保存，但它占用了超过 20MB 的磁盘空间，所以我的问题是：

如何正确压缩所有图像，而不会与 java 压缩发生冲突？有什么网站吗？

# javascript - 显示来自文本框输入 JQuery 的文本

> ID：13817169
> 
> 赞同：0
> 
> 时间：2012-12-11T09:24:33.047
> 
> 标签：javascript, jquery, textbox

我有一段 javascript 接受来自文本框的文本，并在将其写入数据库后将其添加到先前项目的列表中。

```
$(document).on('click', '.add_file_ins6a', function(){

    var job_idx=gl_job_idx;
    var ins_content=$('.add_instructions4c').val();

    var id=$('.useri').val();
    if(ins_content!="")
    {
        //write new instructions to database
        var id=$('.useri').val();
        var data="job_id="+job_idx+"&ins="+ins_content+"&client_id="+id+"&key=2";
        //alert(data);

        $.ajax({
                type:"POST",
                url:"admin_includes/get_instructions.php",
            data:data,
            success:function(html2){
                $('.add_instructions4').val("");
                var split_return=html2.split("|");
                var apply="";
                apply+="<div class='ins_55'>";
                apply+="<p><strong>Date</strong>"+split_return[1]+"</p>";
                apply+="<p>"+split_return[0]+"</p>";
                apply+="</div>";
                $(apply).prependTo('.ins_holder');
            }
        });//end ajax

    }
    else
    {
        alert("FAILED");
    }
    return false;
}); 
```

这可以正常工作，但如果用户在文本框中输入换行符，则会在前置列表中显示一个 '\n'。当页面重新加载时，'\n' 被删除但没有创建换行符 - 这可能与

标签还是我应该使用标签？

目前，数据正在文本框中输入 - 发送到服务器 - 写入数据库，然后在添加之前发送回页面。我是否应该在有 '\n' 的地方拆分文本数据并将结果添加到

标签。

不确定这里的最佳做法是什么 - 很高兴有任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:48:05.123

这也可以在 javascript 中完成，例如：

```
split_return[1].replace(/\n/g, '<br />') 
```

# c# - 使用 POST 方法将 DropDownList 中的值传递到其他 aspx 页面

> ID：13817170
> 
> 赞同：0
> 
> 时间：2012-12-11T09:24:33.407
> 
> 标签：c#, asp.net, post

我尝试使用 asp.net 并尝试将数据从一页发布到另一页。在 PHP 中这很容易。我有两个 aspx 网页**Page1.aspx 和 Page2.aspx**

Page1.aspx 有一个下拉列表，我在其中选择一个选项，然后单击提交按钮，此值应传递给 Page2.aspx 并由其代码隐藏文件**Page2.aspx.cs捕获****`Request.Form[].`**

**第1页.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Page1.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
</head>
<body>  

    <form id="form1" runat="server" method="post" action="Page2.aspx">

<asp:DropDownList id="DropDownList1" runat="server" >

<asp:ListItem value="">Select</asp:ListItem>
<asp:ListItem value="1">Hello</asp:ListItem>
<asp:ListItem value="2">World</asp:ListItem>
</asp:DropDownList>

<asp:Button  runat="server"  />  
      </form>  
    </body>
    </html> 
```

如何传递价值`Page1.aspx`？我在`form`标签中做错了什么？什么是替代方法？我应该怎么做`Page2.aspx`才能从下拉列表中捕获选定的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:12:02.270

首先，从 PHP 处理 .net 时有很多不同之处。使用此链接以获得更好的理解。 [http://net.tutsplus.com/tutorials/asp-net/asp-net-for-php-developers-part-2/](http://net.tutsplus.com/tutorials/asp-net/asp-net-for-php-developers-part-2/)

对于你的问题，改变几件事。

```
 <form id="form1" runat="server"> 
```

1）不要在这里使用动作，我们将使用按钮点击。

```
<asp:button id="btnSubmit" onclick="btnSubmit_OnClick" Text="Click Me" Runat="server"></asp:button> 
```

2）将按钮更改为此并为按钮单击 Page1.aspx.cs 创建一个事件

```
protected void btnSubmit_OnClick(object sender, EventArgs e)
{
if (DropDownList1.SelectedItem.Value.Length > 0)
{
                Response.Redirect("Page2.aspx?SelectedValue=" + DropDownList1.SelectedValue);
}
} 
```

3）点击按钮检查是否选择了任何值，如果选择了值并通过QueryString将其传递到第二页。

在 Page2.aspx.cs 上

```
 protected void Page_Load(object sender, EventArgs e)
    {
          string v = Request.QueryString["SelectedValue"];
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:40:07.843

当您转到另一个页面时，您可能希望捕获用户的选择并传递它。取选定的值并将其放在页面传输后可以到达的位置，例如查询字符串或其他内容。然后，在另一端使用那几天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:46:37.183

您可以从使用 <select> 而不是 <asp:DropDownList> 开始。如果控件是数据绑定的，您可以使用 <asp:Repeater> 打印出 <option> 元素的列表

# session - 服务栈认证

> ID：13817171
> 
> 赞同：5
> 
> 时间：2012-12-11T09:24:39.193
> 
> 标签：session, authentication, cookies, servicestack

我想更改 servicestack 的身份验证，使其不依赖于持久化的会话。

如果我错了，请纠正我，但 servicestack 使用会话来存储记住我的设置，这迫使我们将会话保持在某个地方，比如在 redis 或类似的东西中。因为如果我们使用内存缓存客户端并且应用程序重新启动，则会话不再存在并且记住我的功能消失了。

我想做的是放置我自己的记住我的cookie，这样即使会话由于某种原因不再存在（例如，使用内存缓存客户端时应用程序重新启动）。用户仍将被记录。

关于如何/从哪里开始做的任何线索？我必须承认我对 servicestack 中的哪个类有责任这样做有点困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T17:19:17.110

听起来您只想实现自己的身份验证提供程序。ServiceStack 身份验证依赖于 2 种持久性模式，**AuthRepository**用于 UserAuth 信息的长期持久性，而**Session**可以快速查找它从已注册的`ICacheClient`.

注册的`ICacheClient`就是使用的那个，如果你没有指定一个，那么`MemoryCacheClient`默认情况下会注册一个内存中，它将在 AppDomain 重新启动时自行重置，其他缓存选项，即 Redis，Memcached 使用分布式缓存，因此它们是持久的跨应用程序域重新启动。

# r - 如何从 R 中的数据集中提取不连续的行？

> ID：13817174
> 
> 赞同：1
> 
> 时间：2012-12-11T09:25:02.983
> 
> 标签：r, dataframe

我有一个 5 列 - 1000+ 行的数据，我从这些数据中提取了特定的列表，基于从 1 到 13 变化的“学生”，现在我应该简化这些列表。我想从这些数据中提取不连续的行，例如第 23 行、第 31 行、第 38 行。我怎样才能做到这一点 ？

谢谢

```
 School Time      Student   Classroom  Note
 23          1  212           1      2           22
 30          1  256           2      2           21
 31          1  257           3      2           27
 37          1  267           4      2           45
 38          1  269           5      2           14
 43          1  276           6      2           42
 44          1  278           7      2           13
 47          1  285           8      2           11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:37:55.013

这是一种选择（数字）行名与后续行的行名之间的差异大于一个的所有行的方法：

```
 dat <- read.table(text = "School Time      Student   Classroom  Note
 23          1  212           1      2           22
 30          1  256           2      2           21
 31          1  257           3      2           27
 37          1  267           4      2           45
 38          1  269           5      2           14
 43          1  276           6      2           42
 44          1  278           7      2           13
 47          1  285           8      2           11", header = TRUE)

dat[c(diff(as.numeric(rownames(dat))) > 1, TRUE), ] 
```

*注意*。这也会选择最后一行 ( `47`)。如果要排除最后一行，请替换`TRUE`为`FALSE`.

结果：

```
 School Time Student Classroom Note
23      1  212       1         2   22
31      1  257       3         2   27
38      1  269       5         2   14
44      1  278       7         2   13
47      1  285       8         2   11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T10:08:32.000

```
i <- 3

DF2 <- DF[seq(from=i, to=nrow(DF), by=4),] 
```

提取第 3 行，接下来提取 3+4=7th、7+4=11th、11+4=15th，依此类推....

# openlayers - Openlayers 自定义标记

> ID：13817176
> 
> 赞同：0
> 
> 时间：2012-12-11T09:25:22.343
> 
> 标签：openlayers, marker

一些信息：我有一个主层（地图），我在点之间画线，这些点是从带有 Linestring 的 JSON 结果中接收的。

（问题）我在网上遵循了一个关于如何自定义我要添加的点的示例。但这不起作用。（看底部的功能。）

代码：

```
//'listOfPoints' is an array containing all the point objects.

var pointmap = new OpenLayers.Geometry.LineString(listOfPoints);

    var lastpoint = listOfPoints[listOfPoints.length -1];

    var vesselLayer = new OpenLayers.Layer.Vector(data.bridge_name);

    if (lastpoint != null) {
        var markerLayer = getPOI(lastpoint);
        vesselLayer.addFeatures([pointmap,markerLayer]);
    } else {
        vesselLayer.addFeatures([new OpenLayers.Feature.Vector(pointmap)]);
    }

// Function for creating a marker and returning it to the caller. 

function getPOI(point) {

//This was also tried without the "Style" property. (Only the externalGraphic line)
var temp_feature = new OpenLayers.Feature.Vector(
        point,
        style: { externalGraphic: '/assets/img/marker.png', graphicHeight: 16,     graphicWidth: 16, graphicXOffset:8, graphicYOffset:8  }
    );    

return temp_feature;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:33:53.867

乍一看，temp_feature 定义有错误：

```
var temp_feature = new OpenLayers.Feature.Vector(
    point,
    null,
    {
        externalGraphic: '/assets/img/marker.png',
        graphicHeight: 16,
        graphicWidth: 16,
        graphicXOffset:8,
        graphicYOffset:8
    }
); 
```

阅读和遵循 API 文档很有用： [http ://dev.openlayers.org/docs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector](http://dev.openlayers.org/docs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.OpenLayers.Feature.Vector)

OpenLayers.Feature.Vector 采用三个参数，几何，具有属性的对象（在您的情况下为空，因为您没有任何属性）和具有样式的对象。

我还没有测试过那个代码，可能还有其他问题。

关于 JavaScript 的一般用途，从来没有这样的事情

```
style: { externalGraphic: '/assets/img/marker.png', graphicHeight: 16,     graphicWidth: 16, graphicXOffset:8, graphicYOffset:8  } 
```

对象总是在括号内定义：

```
{style: { externalGraphic: '/assets/img/marker.png', graphicHeight: 16,     graphicWidth: 16, graphicXOffset:8, graphicYOffset:8  }} 
```

# android - CheckedTextView 未选中

> ID：13817177
> 
> 赞同：5
> 
> 时间：2012-12-11T09:25:23.253
> 
> 标签：android, listview, simplecursoradapter, checkedtextview

我想要一个`Multiselected (checked) listview`. 当我选择一个项目时，必须出现绿色复选标记。为此，我使用`CheckedTextViews`. 从数据库中`ListView`获取数据。我为此使用了一个`SimpleCursorAdapter`。当您单击按钮时，所选条目（ID）将被传递到下一个活动。

我的问题是`CheckedTextView`没有出现的复选标记。但是 ID 将传递给下一个活动。我究竟做错了什么？如何解决？

选择测试.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

        <Spinner
        android:id="@+id/spinner_select_language"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

        <Button
            style="@style/btn_Font"
            android:id="@+id/selecttest_start"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/spinner_test"
            android:onClick="onClick"
            android:text="@string/selecttest_start" />

        <ListView
            android:id="@+id/lv_lesson"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:fadeScrollbars="false"
            android:choiceMode="multipleChoice"
            android:layout_alignParentLeft="true"
            android:cacheColorHint="#00000000"
            android:layout_below="@+id/selecttest_start" >
        </ListView>

</RelativeLayout> 
```

dataset_ctv_lesson.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <CheckedTextView
        style="@style/tv_Font"
        android:id="@+id/ctv_lesson"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/none" 
        android:checkMark="@drawable/ctv_state_checker"
        />

</RelativeLayout> 
```

ctv_state_checker.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_checked="false"
          android:drawable="@drawable/btn_check_buttonless_off" />
    <item android:state_checked="true"
          android:drawable="@drawable/btn_check_buttonless_on" />

</selector> 
```

SelectTestActivity.java

```
public class SelectTestActivity 
extends Activity
implements OnItemSelectedListener 
{
    Database db;
    SimpleCursorAdapter adaptercursor, lv_adaptercursor;
    ListView lv_lesson;

    // Arraylist for checked item in the lesson view
    ArrayList<String> checkedlessons = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selecttest);

        // Create Database
        db = new Database(this);

        // Drop-Down-Menu to select a language
        Spinner spinner_language = (Spinner) findViewById(R.id.spinner_select_language);
        spinner_language.setOnItemSelectedListener(this);

        Cursor cursor = db.createListViewCursor();

        String[] displaycolumn = new String[]{"language"};
        int[] displayview = new int[] {R.id.tv_language};

        adaptercursor = new SimpleCursorAdapter(this, R.layout.datasetlanguage, cursor, displaycolumn, displayview, 0);
        spinner_language.setAdapter(adaptercursor);

        // ListView to select a lesson
        lv_lesson = (ListView) findViewById(R.id.lv_lesson);

        cursor = db.createListViewLessonCursor(getSelectedItemIDFromSpinnerLanguage());

        displaycolumn = new String[]{"lesson"};
        int[] displayview2 = new int[] {R.id.ctv_lesson};

        lv_adaptercursor = new SimpleCursorAdapter(this, R.layout.dataset_ctv_lesson, cursor, displaycolumn, displayview2, 0);
        lv_lesson.setAdapter(lv_adaptercursor);

        lv_lesson.setOnItemClickListener(new ListView.OnItemClickListener() 
        {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
            {
                if (!checkedlessons.contains(Long.toString(id)))
                {
                    checkedlessons.add(Long.toString(id));

                    // checked textview
                    lv_lesson.setItemChecked(position, true);
                }
                else 
                {
                    checkedlessons.remove(Long.toString(id));

                    // unchecked textview
                    lv_lesson.setItemChecked(position, false);      
                }
            }
        });

        // Close the database
        db.close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:22:04.827

1.  尝试删除 CheckedTextView 的样式，我认为您的样式中的某些值会影响外观。
2.  删除 dataset_ctv_lesson.xml 中的 RelativeLayout，您不需要更改单击项目的检查状态。ListView 可以自己维护检查状态。使用 ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE) 启用多选模式，并使用 ListView.getCheckedItemPositions() 获取选中的行位置。

# android - 谷歌搜索的结果计数

> ID：13817180
> 
> 赞同：1
> 
> 时间：2012-12-11T09:25:32.520
> 
> 标签：android, google-search

是否有本地方式（不解析网页等）来接收android 应用程序中**谷歌搜索的结果计数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:05:34.947

您可以使用[Google 搜索 API](https://developers.google.com/custom-search/v1/overview)，它会将搜索结果作为 JSON 对象（包括 totalResults）提供给您

# asp.net - 将多个asp.net页面组合成一个页面

> ID：13817188
> 
> 赞同：3
> 
> 时间：2012-12-11T09:25:56.247
> 
> 标签：asp.net, webpage, asp.net-webpages

是否可以在单个 aspx 页面下合并或引入不同 aspx 文件的内容？但是，我想在不将 aspx 转换为 ascx 的情况下实现它，因此没有用户控件。

**注意：**我愿意使用 Javascript 或 Jquery 等客户端脚本。不，这不是[.](https://stackoverflow.com/questions/12512532/is-there-an-alternative-to-using-frames-to-combine-multiple-aspx-files-into-a-si)

**编辑：**尽管这似乎是一个糟糕的设计理念，但这正是我想要的功能。所有页面都应该成为单个页面的内容，忽略所有单独的 CSS 和 Javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:37:54.670

简短的回答是你不能这样做，如果你已经到了需要这样做的地步，那么你的页面设计就很糟糕。为什么？因为一个完整的页面不仅包含内容，还包含 css、javascript、标题、标题等，它们是独一无二的，你不能与其他页面混合，而不会出现 javascript 和 css 冲突等问题。例如。*页面的最终标题是什么？*等。

您拥有的替代方案是：

*   [的](http://www.w3schools.com/tags/tag_iframe.asp)使用[`iframe`](http://www.w3schools.com/tags/tag_iframe.asp)
*   使用后面的代码动态呈现页面并将其添加到占位符上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:38:38.210

您可以使用 HTML[框架集](http://www.w3.org/TR/html4/present/frames.html)将页面划分为单独的框架，每个框架都可以有一个 ASPX 页面作为其源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:43:37.673

除了 Aristos 和 michielvoo 建议的方法之外，另一种方法是使用 JQuery .load() 方法。为要显示的页面制作不同的内容持有者，并使用 JQuery 选择器将这些页面的 HTML 内容设置为内容持有者。

会计。到 JQuery 文档

> 此方法是从服务器获取数据的最简单方法。当检测到成功响应时，.load() 将匹配元素的 HTML 内容设置为返回的数据。

```
$('#result').load('ajax/test.html'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T05:47:35.357

您可以简单地将页面附加到彼此，我这样做是为了全国性的 craigslist 搜索。

我将所有结果附加到单个页面，然后在浏览器中查看该页面

您使用列表框、浏览器控件，然后将文本附加到单个文件

# unit-testing - 关于单元测试自动化的思考

> ID：13817189
> 
> 赞同：1
> 
> 时间：2012-12-11T09:26:00.253
> 
> 标签：unit-testing, testing

假设您正在测试一个复杂的函数或一个复杂的存储过程。您如何执行自动化？

我有两个选择：

1.  基线测试：
    我准备了一些输入数据，我首先手动运行测试，然后我得到输出数据。检查后，我认为输出数据是正确的。然后我将输出数据用作“基线数据”。在后面的测试中，我将输出数据与“基线数据”进行比较，如果有变化，它们可能是错误或其他。

2.  测试人员以另一种方式实现功能或存储过程。对于测试，它比较测试人员功能的输出和开发人员功能的输出。

选项 1 更容易在自动化中实现。
选项 2 更难，因为测试人员需要重新编写函数。

还有其他选择吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T01:50:36.760

一般来说，单元测试可能不应该测试数据库是否返回正确的数据。有太多可能出错的地方。数据库可能已关闭，用户可能会在您重置基线之前终止测试。这更像是一个集成测试而不是单元测试。

我通常使用带有模拟数据的模拟数据访问层进行测试。

[在此处](http://www.nileshgule.com/2010/04/use-nbuilder-to-generate-test-data.html)和[此处](https://stackoverflow.com/questions/244118/data-driven-unit-tests)查看链接

*综上所述*，当我必须创建从数据库中提取数据的单元测试时，我通常对测试进行编程以使用测试数据更新数据库，然后运行我的数据库调用/存储过程并针对该基线进行测试。

# scala - 当我启动多行代码块时，如何设置 Scala-IDE 以添加空行？

> ID：13817191
> 
> 赞同：0
> 
> 时间：2012-12-11T09:26:00.880
> 
> 标签：scala, scala-ide

这些是在 Scala-IDE 中创建新代码块时必须执行的输入步骤。竖线字符代表光标：

```
def test(x: Int): Int = | 
```

如果您通过键入来开始块`{`，IDE 将自动添加右大括号并将光标放在中间：

```
def test(x: Int): Int = {|} 
```

点击回车开始一个多行块：

```
def test(x: Int): Int = {
    |} 
```

再次点击返回以创建一条黑线：

```
def test(x: Int): Int = {

    |} 
```

使用向上箭头使光标回到上一行：

```
def test(x: Int): Int = {
    |
    } 
```

你怎么能避免最后两次击键，但我的光标仍然停留在左大括号和右大括号之间的空白行上？我试过，`Ctrl`+ `Return`，`Shift`+`Return`但没有这样的运气。

我使用[Microsoft Arc 键盘](https://www.microsoft.com/hardware/en-us/p/arc-keyboard/J5D-00001)。在我看来，它是世界上最好的打字键盘，但不幸的是，它也是世界上使用方向键最差的键盘，这就是为什么我尽可能避免使用方向键的原因。每次我必须使用混乱的键时，希望在 Arc 上发明多功能摇杆箭头键的人的小指会抽筋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:34:41.763

编辑器中没有这样的功能（还），但它会是一个受欢迎的补充。最好的办法是[提交一张票](https://www.assembla.com/spaces/scala-ide/support/tickets)。

# php - 使用零字节的 PHP cURL/FTP 传输的文件

> ID：13817193
> 
> 赞同：5
> 
> 时间：2012-12-11T09:26:10.080
> 
> 标签：php, curl, file-io, ftp

我最近遇到了一个问题，在我的应用程序的高流量期间，使用 cURL/FTP 以零字节发送小型 CSV 文件。但是，当我在我的文件系统上查看文件时，我可以看到它绝对不是空的，而且大小也不是零字节。

这是我的 PHP 代码：

```
$ch = curl_init();
$fp = fopen($bFile, 'r');
curl_setopt($ch, CURLOPT_URL, 'ftp://'.FTP_SERVER .'/'.FTP_DIRECTORY.$file_name);
curl_setopt($ch, CURLOPT_USERPWD, FTP_USER.':'.FTP_PASS);
curl_setopt($ch, CURLOPT_UPLOAD, 1);
curl_setopt($ch, CURLOPT_INFILE, $fp);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($bFile));
curl_setopt($ch, CURLOPT_FTP_USE_EPSV, false);
curl_exec($ch); 
```

我在 cURL 返回错误的代码中也有一些基本的错误处理：

```
if ( curl_error($ch) ) {
    throw new Exception("File could not be sent via FTP: " . curl_error($ch));
} 
```

但是，我注意到在这个例子中没有抛出异常并且代码继续执行的情况。

是否有任何理由让我的文件系统上有一个 5Kb CSV 文件，但我将文件发送到的 FTP 服务器只有一个零字节文件？这是否指向传输问题，可能是由每年这个时候的大量流量引起的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:33:21.027

既然你在高流量时提到它。您尝试发送的 CSV 文件是否有很多或读/写活动？也许它的 fopen 实际上失败了，因此您发送的是 0 个字节，但文件名正确。那只会产生警告，因此不会被抓住。

也许您应该为使用 curl 发送的不同值添加一些日志记录，例如`filesize($bFile)`和`$fp`

# javascript - Jquery Ajax 请求不起作用

> ID：13817195
> 
> 赞同：2
> 
> 时间：2012-12-11T09:26:17.607
> 
> 标签：javascript, jquery, json, parsing

我正在尝试从 javascript 发送一个 jquery ajax 请求。我正在使用以下代码，但它不起作用。

```
$j.ajax({
    url: 'https://c.na14.visual.force.com/apex/controlApi',
    type : 'GET',
    dataType: 'jsonp',
    success : function(result){
        alert('Result is '+result);
    },
    error : function(jqXHR, textStatus, errorThrown) {
        alert('status is '+jqXHR.status);
        alert('Error is '+textStatus);
    }     
}); 
```

我的回复是 json 格式。就像是

```
{
  "mydata" : "xxxxxxx"
} 
```

当我使用上面的 ajax 请求时，错误函数被执行。它显示状态为 200，错误为“parsererror”。但是，我以 json 格式回复（已验证）。所以，我对这个问题感到困惑。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:29:44.650

您要求 jQuery 使用 JSON-P，而不是 JSON。JSON-P 响应如下所示：

```
callback({
  "mydata" : "xxxxxx"
}) 
```

...其中`callback`是请求 URL 上指定的函数名称。更多关于[JSON-P 的信息](http://en.wikipedia.org/wiki/JSONP#JSONP)。

如果请求与发出请求的文档位于[同一来源](http://en.wikipedia.org/wiki/Same_origin_policy)，则可以通过将 .json 更改为来使用`dataType`JSON `"json"`。

如果它来自不同的来源，这就是您使用 JSON-P 的原因，您需要修改服务器端以从 URL 的查询字符串中提取函数的名称，然后将函数调用放入您的响应中，如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:34:36.993

我找到了一种方法来做到这一点。

JSONP 响应必须采用以下格式

```
testCallback({
  "mydata" : "xxxxxx"
}) 
```

并且请求将是

```
$j.ajax({
    url: 'https://c.na14.visual.force.com/apex/controlApi?callback=testCallback',
    type : 'POST',
    dataType: 'jsonp',
    crossDomain : true,
    jsonp: false,
    jsonpCallback: 'testCallback',
    success : function (data){
             alert(data.mydata);
    },
    error : function(jqXHR, textStatus, errorThrown) {
        alert('Error is '+textStatus);
    }  
}); 
```

# mysql - 十进制值中的“MySQL INSERT INTO ... SELECT”错误

> ID：13817198
> 
> 赞同：0
> 
> 时间：2012-12-11T09:26:25.543
> 
> 标签：mysql, type-conversion

这是我的查询：

```
INSERT INTO `temp_map_196`
(SELECT DISTINCT
   NULL,NULL,NULL,
   t1.`price`,
   t1.`price`,
   COUNT(*) AS `count`
 FROM  `raw_table_1` t1
 GROUP BY `price`
 ORDER BY `count` DESC) 
```

`t1.price`是一`DECIMAL`列。这些值被插入到`varchar`列中。

`1, 10, 10.5`全部正确插入。

但是`1.6`，`1.8`成为`1.60000002384186`和`1.79999995231628`

如果我将查询更改为：

```
INSERT INTO `temp_map_196`
(SELECT
   NULL,NULL,NULL,
   1.6,
   1.6,
   1
) 
```

一切正常。

当我将原始查询更改为：

```
INSERT INTO `temp_map_196`
(SELECT DISTINCT
NULL,NULL,NULL,
CAST (t1.`price` AS DECIMAL(8,2)),
CAST (t1.`price` AS DECIMAL(8,2)),
COUNT(*) AS `count`
FROM  `raw_table_1` t1
GROUP BY `price`
ORDER BY `count` DESC) 
```

但我不能这样做，因为该列并不总是接收十进制值。

为什么 MySQL 在源数据中似乎没有插入这些奇怪的小数？（作为查询的`SELECT`一部分`INSERT`并自行运行，没有这种奇怪的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:38:16.507

存储在`DECIMAL`列中的数字在内部作为字符串处理。这样，就不会由于从/到二进制基数的转换而丢失数据。

但是，有时 MySQL 会*忘记*值来自`DECIMAL`列，并且值会自动转换为`FLOAT`，这是一种纯数字列类型，会受到精度损失的影响。这是相当罕见的，我不完全确定原因，但当值来自子查询时往往会发生这种情况。

在您的情况下，由于数字的最终目的地是一个字符串，我建议您尽快转换为**字符串：**

```
INSERT INTO `temp_map_196`
(SELECT DISTINCT
NULL,NULL,NULL,
CAST (t1.`price` AS CHAR),
CAST (t1.`price` AS CHAR),
COUNT(*) AS `count`
FROM  `raw_table_1` t1
GROUP BY `price`
ORDER BY `count` DESC) 
```

# java - Spring MVC 控制器返回带有锚点的页面（#）

> ID：13817200
> 
> 赞同：1
> 
> 时间：2012-12-11T09:26:28.930
> 
> 标签：java, jquery, jsp, spring-mvc, anchor

我很惊讶我必须提出这个问题，因为我预计其他人会遇到和我一样的问题。也许我没有在搜索引擎中输入正确的关键字，或者我不知道我在做什么。:P

无论如何，我有一个 Spring 视图解析器 bean，它将“.jsp”附加到从获取请求的方法返回的字符串中。我想做的是向字符串添加一个锚点，这样我就可以滚动到页面中的某个元素，如果我现在这样做，我会得到页面未找到错误.. 谁能给我一些建议如何做到这一点？

提前致谢！戴维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:23:10.490

我所做的是，将我的（需要的）modelAttributes 放在 sessionAttribute 中（感谢@Boris Treukhov），并使用锚（例如 site/edit#123）向另一个控制器发送重定向。在这种方法中，我从 Session 中获取数据并将其放入模型中，然后返回页面。

感谢大家的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:29:10.387

您需要在 jsp 中添加一个 onload 脚本，该脚本将导航到锚标记

```
 <script>
     location.href=controllerurl#tag
   </script> 
```

# mongodb - 如何在 Grails 中对复杂的 mongoDB 查询进行分页？

> ID：13817204
> 
> 赞同：1
> 
> 时间：2012-12-11T09:26:43.857
> 
> 标签：mongodb, grails, grails-orm, gorm-mongodb

我有三个域类 Author、Comment 和 Book：

```
class Author {
String name
static hasMany = [books: Book, comments: Comment]
}

class Book {
static belongsTo = [author: Author]
static hasMany = [comments: Comment]
}

class Comment {
static belongsTo = [book: Book, author: Author] 
} 
```

我有以下 mongoDB 查询来查找所有有给定作者评论的书籍。

```
Comment.findAllByAuthor(author1).collect {
        it.book
    }.unique().findAll { 
        it != null 
} 
```

我如何对这个查询使用分页，即对所有书籍进行分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:48:19.470

对 Book 使用标准查询而不是 Comment：

```
def c = Book.createCriteria()
def PaginatedBookList = c.list(max: params.max, offset: params.offset) {
    and{
        eq('author',author1)
        isNotNull('comments')
    }
} 
```

# javascript - Jstree - 如何获取父节点的子节点（换句话说，如何获取兄弟节点）

> ID：13817220
> 
> 赞同：3
> 
> 时间：2012-12-11T09:27:43.483
> 
> 标签：javascript, jstree

如何获取当前选定节点的父节点的所有子节点？

currentNode._get_parent()._get_children() 之类的东西（不起作用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-18T01:27:33.577

你可以试试

```
jQuery.jstree._reference("#treeSelector")._get_children(parentNode); 
```

另见[文档](http://www.old.jstree.com/documentation/core)

# node.js - 使节点 Redis get() 同步

> ID：13817221
> 
> 赞同：10
> 
> 时间：2012-12-11T09:27:47.020
> 
> 标签：node.js, redis, node-redis

我刚开始用 node 实现 redis。在实现身份验证方法期间，我需要检查令牌是否存在于 redis 中，如果不更新 redis 和我的 mongo db 中的新令牌，我需要编写一个大的回调块并且无法正确获取结果。我们怎样才能让redis的回调变红。我们怎样才能使它同步。示例代码如下。

```
module.exports.authenticate = function(request, response)   {
    var reply = {};

    if(UserSchema)  {
        var UserModel, attributes;

        /** Registering User Model; **/
        mongoose.model('user', UserSchema);
        UserModel = mongoose.model('user');

        attributes = request.params;

        UserModel.findOne(attributes, "_id name email token", function(error, user) {

            if(!error && user)  {
                var token;

                //delete user.password;
                token = user.token;

                /** Checking token exists in redis; **/
                redisClient.get(token, function(error, value)   {
                    if(value === null && error === null)    {

                        /** Creating new token; **/
                        token = require('crypto').createHash('md5').update("" + (new Date()).getTime()).digest("hex");
                        user.token = token;

                        /** Storing new token on redis; **/
                        setTokenOnRedis(token);

                        /** Updating token in the user model; **/
                        UserModel.update({ _id : user._id}, { token : token }, function(error, user)    {
                            if(error !== null && user === null) {
                                deleteTokenOnRedis(token);

                                /** Error message; **/
                                reply = {
                                    error : true,
                                    code : "AUTH#001",
                                    msg : "User authentication failed, Please check user credentials."
                                }
                                response.send(reply);

                            }else if(error === null && user !== null)   {
                                reply = user;
                                response.send(reply);
                            }
                        });
                    }else if(value !== null)    {
                        reply = user;
                        response.send(reply);
                    }else   {
                        /** Error message; **/
                        reply = {
                            error : true,
                            code : "AUTH#001",
                            msg : "User authentication failed, Please check user credentials."
                        };
                        response.send(reply);
                    }
                });
            }else   {
                /** Error message; **/
                reply = {
                    error : true,
                    code : "AUTH#001",
                    msg : "User authentication failed, Please check user credentials."
                }
            }       
        });
    }else   {

        /** Error message; **/
        reply = {
            error : true,
            code : "AUTH#001",
            msg : "User authentication failed, Please check user credentials."
        }

        response.send(reply);
    }
}; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T13:22:41.827

不，您将无法同步任何 io 调用，包括 redis 调用。我知道的唯一可用的同步 io 调用是文件系统和控制台调用。

但是，您可以使用一些编码技术来使异步编码更易于管理。

*   通过首先检查错误来提前返回。
*   将重复代码移动到单独的函数中，例如，创建错误结构。
*   使用这个异步库：[https](https://github.com/caolan/async) ://github.com/caolan/async 。特别是，瀑布函数在这里可能很方便。

我还认为您需要将这些函数传入一个回调方法，因为它们是异步的。

*   setTokenOnRedis(令牌);
*   deleteTokenOnRedis(令牌);

我已经重构了您的示例代码，希望它应该更少缩进并且更易读/可维护。我没有使用异步，我将把它留给你。

就个人而言，我发现整个节点异步编码模型最初非常令人沮丧，但你已经习惯了。过了一段时间，你学会了使用各种异步编码模式，然后它就变得几乎可以忍受了:)

您可能会发现一些有用的链接：

*   [异步 node.js 调用中的错误处理](https://stackoverflow.com/questions/5816436/error-handling-in-asynchronous-node-js-calls)
*   [Node.js 最佳实践异常处理](https://stackoverflow.com/questions/7310521/node-js-best-practice-exception-handling)
*   [如何避免在 Node.js 中长时间嵌套异步函数](https://stackoverflow.com/questions/4234619/how-to-avoid-long-nesting-of-asynchronous-functions-in-node-js)

重构代码：

```
module.exports.authenticate = function(request, response){
  authenticate(request, response, function(err, reply){
    if(err){
       reply = authenticationError(err);
    }
    response.send(reply);
  });
};

var authenticationError = function(internalmsg){
  return {
    internalmsg : internalmsg,
    error : true,
    code : "AUTH#001",
    msg : "User authentication failed, Please check user credentials."
  };
};

var authenticate = function(request, response, callback)   {
  if(UserSchema)  {
    var UserModel, attributes;

    /** Registering User Model; **/
    mongoose.model('user', UserSchema);
    UserModel = mongoose.model('user');

    attributes = request.params;

    UserModel.findOne(attributes, "_id name email token", function(err, user) {
      if(err || !user){
        return callback(err || "UserModel.findOne, no user");
      }

      var token;

      //delete user.password;
      token = user.token;

      /** Checking token exists in redis; **/
      redisClient.get(token, function(err, value){
        if(err){
          return callback(err);
        }
        if(value){
          return callback(null, value);
        }

        /** Creating new token; **/
        token = require('crypto').createHash('md5').update("" + (new Date()).getTime()).digest("hex");
        user.token = token;

        /** Storing new token on redis; **/
        setTokenOnRedis(token);

        /** Updating token in the user model; **/
        UserModel.update({ _id : user._id}, { token : token }, function(err, user) {
          if(err || !user) {
            deleteTokenOnRedis(token);
            return callback(err || "UserModel.update, no user found");
          }
          callback(null, user);
        });
      });
    });
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T19:31:56.417

在最初的问题发生多年后，Node.js 的 Redis 客户端本质上仍然是异步的——而且它不太可能改变。

但为了更方便地处理这种工作方式，该包支持承诺，如[http://redis.js.org/#redis-a-nodejs-redis-client-usage-example-promises](http://redis.js.org/#redis-a-nodejs-redis-client-usage-example-promises)所述。

它不会使 Node.js 和 Redis 客户端更加同步，但它是对注册回调函数的（小）改进，使您的代码更具可读性。

# c# - 查找已将哪个事件处理程序分配给对象 WPF 上的事件

> ID：13817222
> 
> 赞同：3
> 
> 时间：2012-12-11T09:27:47.717
> 
> 标签：c#, wpf, event-handling

> **可能重复：**
> [是否已添加事件处理程序？](https://stackoverflow.com/questions/136975/has-an-event-handler-already-been-added)

首先，我知道有许多类似的问题，但我无法让它们适应我的情况。

我希望能够找出为对象上的特定事件分配了哪个事件处理程序。因此，在树视图项上，我将为扩展事件分配一个处理程序。然后，我希望以后能够将分配的事件处理程序拉出并将其分配给另一个 treeviewitems 扩展事件，以便它们都在扩展事件上调用相同的处理程序。

这可能吗？

这就是我想要做的......

```
private void duplicateHandler( TreeViewItem existingItem )
{
    TreeViewItem tvi = new GX3TreeViewItem();

    tvi.AddHandler(TreeViewItem.ExpandedEvent, existingItem.ExpandedEventHandler);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:29:59.683

1.  创建一个新的 WPF 应用程序
2.  在主窗口中放置一个名为“tree1”的树视图
3.  复制粘贴下面的代码以查看它的运行情况

基本上，您需要继承`TreeViewItem`并构建一种机制来跟踪哪些处理程序被添加到哪个节点：`event`不幸的是，没有关于已注册处理程序的信息供您检索。

您还需要完全依赖新的继承来构建节点，以使事情正常工作。这意味着，您不能再引用`TreeViewItem`，而必须引用`TreeNode`（这是我为自定义类选择的名称，请随意更改）。

承诺的代码如下，它所做的是将“rootNode”节点添加到树中，在扩展时将创建一个兄弟节点，该节点会将相同的处理程序带到自身（因此它也会在扩展时创建一个兄弟节点，并且很快）。

```
namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            TreeNode root = new TreeNode();
            root.Header = "root";

            tree1.Items.Clear();

            // add node to tree before adding handlers, or you'll get
            // a StackOverflowException
            tree1.Items.Add(root);

            root.AddHandler(TreeNode.ExpandedEvent, new RoutedEventHandler(expandedHandler));

        }

        private void expandedHandler(object sender, RoutedEventArgs e) { newNodeCopyExpandedHandlers(sender as TreeNode); }

        private void newNodeCopyExpandedHandlers(TreeNode node)
        {
            TreeNode newNode = new TreeNode();
            newNode.Header = "nuovo!";

            // add node to tree before adding handlers, or you'll get
            // a StackOverflowException
            tree1.Items.Add(newNode);

            foreach (Delegate d in newNode.GetHandlers(node, TreeNode.ExpandedEvent))
                newNode.AddHandler(TreeNode.ExpandedEvent, d);
        }
    }

    public class TreeNode : TreeViewItem
    {
        private Dictionary<RoutedEvent, List<Delegate>> handlersList = new Dictionary<RoutedEvent, List<Delegate>>();

        public new void AddHandler(RoutedEvent e, Delegate d)
        {
            if (!handlersList.ContainsKey(e)) handlersList.Add(e, new List<Delegate>());
            handlersList[e].Add(d);

            base.AddHandler(e, d);
        }
        public new void RemoveHandler(RoutedEvent e, Delegate d)
        {
            if (!handlersList.ContainsKey(e)) handlersList.Add(e, new List<Delegate>());
            if (handlersList[e].Contains(d)) handlersList[e].Remove(d);

            base.RemoveHandler(e, d);
        }

        public List<Delegate> GetHandlers(TreeNode n, RoutedEvent e)
        {
            if (n.handlersList.ContainsKey(e)) return n.handlersList[e];
            else return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T09:34:53.620

是的，当然可以，您可以浏览代码，直到找到事件分配：

```
event +=  myEventHandler 
```

然后，您可以使用相同的方法`myEventHandler`订阅其他树上的事件。这是问题还是我误解了这个问题？

# cookies - 如何通过域 B 中附加的内联 javascript 从域 B 读取域 A 设置的 cookie？

> ID：13817225
> 
> 赞同：0
> 
> 时间：2012-12-11T09:27:53.230
> 
> 标签：cookies, cross-domain, jsonp

我正在尝试通过放置在域 B 中的内联 JavaScript 代码从域 B 读取域 A 设置的 cookie（我知道 cookie 的名称）。

域 B 内联 javascript 代码：

```
<script type="text/javascript">
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://domainA.com/classifiead/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

    </script> 
```

[http://domainA.com/classifiead/embed.js](http://domainA.com/classifiead/embed.js)包含：

```
 $("#jsonpbtn2").click(function() {

   var url = 'http://domainA.com/classifiead/content2.php?callback=?'; 
  //  var id = info;
   $.getJSON(url, null, function(data) {
                 $('#textDiv').append(data.somecookie);
     });
}); 
```

[http://domainA.com/classifiead/content2.php](http://domainA.com/classifiead/content2.php)包含：

```
<?php 
 header('Content-type: application/json');
 header('Access-Control-Allow-Origin: *');
 header("Access-Control-Allow-Methods: GET, POST, OPTIONS");
 header("Access-Control-Allow-Credentials: true");
 header("Access-Control-Allow-Headers: Content-Type, *");
 header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');

 $rtnjsonobj->id = 'test skdfbslkdj';
 $rtnjsonobj->somecookie =$_COOKIE['thisweb_last_75'];
echo $_GET['callback']. '('. json_encode($rtnjsonobj) . ')'; 
```

?>

这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:32:38.047

是的，如果您有代码在域 A 上执行服务器端。当您的 JavaScript 代码从域 A 接收到 cookie 时，您可以将 cookie 发送到域 B。

如果 cookie 是安全 cookie 或 httponly，您只能通过服务器端脚本读取它。

我建议您阅读以下内容： [http ://en.wikipedia.org/wiki/HTTP_cookie#Cross-site_scripting_.E2.80.93_cookie_theft](http://en.wikipedia.org/wiki/HTTP_cookie#Cross-site_scripting_.E2.80.93_cookie_theft)

请注意：在您的示例中，您应该在分配属性之前创建对象。例如：

```
$rtnjsonobj = new stdClass();
$rtnjsonobj->id = 'test skdfbslkdj';
$rtnjsonobj->somecookie =$_COOKIE['thisweb_last_75']; 
```

# css - 少守卫：正百分比

> ID：13817226
> 
> 赞同：0
> 
> 时间：2012-12-11T09:27:57.217
> 
> 标签：css, less

可悲的是，我已经尝试过凝视它，但没有结果。

我想做的是变亮/变暗混合，具体取决于百分比：如果百分比<0，则执行“变暗（@color，@light）”，否则如果百分比> 0，则执行“变亮（ @color，@light）”。

像这样的东西：

```
._changeColor(@color, @light) when (ispercentage(@light)) and (@light > 0%) {
    color: lighten(@color, @light);
} 
```

但它不想工作。我用过类似的东西

```
.mixin (@a) when (isnumber(@a)) and (@a > 0) {...} 
```

它工作得很好......如果对百分比有什么特别的想法，有什么想法吗？

谢谢 ！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:52:38.420

除了“不起作用”之外，究竟是什么问题？

这个

```
._changeColor(@color, @light) when (ispercentage(@light)) and (@light > 0%) {
    color: lighten(@color, @light);
}

._changeColor(@color, @light) when (ispercentage(@light)) and  (@light < 0%) {
    color: darken(@color, @light * -1);
}

.foo {
  ._changeColor(#ff00ff, -10%);
} 
```

在[在线 LESS 转换器](http://www.dopefly.com/LESS-Converter/less-converter.html)中工作。

# typescript - Breeze.js 类型实体

> ID：13817230
> 
> 赞同：5
> 
> 时间：2012-12-11T09:28:10.487
> 
> 标签：typescript, breeze, jaydata

有没有一种方法可以像 JaySvcUtil 为 JayData 工作一样使用 Breeze 创建类型化实体？这是否包括 Typescript 支持 - Breeze 框架中是否也有一般的 Typescript 支持？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T03:42:29.300

此要点包含 T4TS 的修改版本，其中包含一些初始支持，用于生成“每个实体的设计时 Javascript 类”，并支持 Breeze。

[https://gist.github.com/alexdresko/5393155](https://gist.github.com/alexdresko/5393155)

到目前为止，它适合我的需求。我很确定您需要在您的解决方案中包含DefinitelyTyped Breeze 定义才能正常工作。

也许这是可以永久添加到 T4TS 的东西？也许这是 Breeze 团队需要考虑的事情？或者也许这只是愚蠢的，除了我之外对任何人都不起作用。:)

在我的数据服务中，我可以执行以下操作：

```
 createOrganization() : T4TS.Organization {
        return <T4TS.Organization>this.manager.createEntity("Organization");
    } 
```

然后，在我的虚拟机中，所有这些代码都是类型安全的。

```
 organizationSubmit() {
        this.editingOrganization(false);
        var newOrganization = this.dataservice.createOrganization();

        newOrganization.Name(this.organizationNameInput());
        if (newOrganization.entityAspect.validateEntity()) {
            this.extendOrganization(newOrganization);
            this.organizations.push(newOrganization);
            this.dataservice.saveChanges();
            this.organizationNameInput("");
        } else {
            this.handleItemErrors(newOrganization);

        }
    }; 
```

我真的不知道从这里到哪里去。我尝试 fork T4TS，但没有时间弄清楚他的构建系统。因此要点。意见当然是受欢迎的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T19:56:48.993

我们确实计划使用 TypeScript 做更多事情，但还没有承诺具体的时间框架。（John 的帖子中提到的 Boris 的工作无疑是一个很好的开始）。

**更新：从 v 0.84.4 开始，Breeze 提供完整的 TypeScript 支持。**

至于为每个实体自动生成设计时 Javascript 类；我们已经对此进行了几次内部讨论，但真的在等待社区投票支持什么。我们几乎肯定会在某个时候解决这个问题，但是您对
[UserVoice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)的投票肯定可以加快这个过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T13:53:56.360

下面是一个页面，您可以将其放入您的站点以生成 typescript 接口定义。该页面获取微风元数据，然后遍历所有类型并为每种类型输出一个打字稿接口声明。然后可以将此页面的输出粘贴到任何打字稿文件 (*.ts) 或打字稿定义文件 (*.d.ts) 中。如果要命名接口，请将结果包含在模块声明中： `declare module northwind { ... paste interfaces here... }`.

在使用该页面之前，您需要进行一次编辑：将实体管理器的控制器 URL 从“api/northwind”更改为您的微风控制器的 URL。

生成的接口依赖于 Knockout.js 打字稿定义，您可以在此处获取：[https ://github.com/borisyankov/DefinitelyTyped/tree/master/knockout/](https://github.com/borisyankov/DefinitelyTyped/tree/master/knockout/)

使用[learn.breezejs.com](http://learn.breezejs.com/)中的北风示例，此定义生成器页面的输出将如下所示：

```
export interface Employee extends breeze.Entity {
    FirstName: KnockoutObservable<string>;
    LastName: KnockoutObservable<string>;
} 
```

然后，您可以使用微风执行查询并将结果转换为一组员工，如下所示：

```
var manager = new breeze.EntityManager('api/northwind');

var query = new breeze.EntityQuery()
    .from("Employees");

manager.executeQuery(query).then(data => {
    // ***cast the results to a strongly typed array of Employee***
    var employees = <Employee[]>data.results;
}).fail(e => {
    alert(e);  
}); 
```

下面是定义生成器页面 - 将一个新的 html 文件添加到名为“definitions.html”的项目中，运行该项目并导航到该页面。

```
<html>
<head>
    <title>Typescript Definition Generator</title>
    <style>
        code {
            white-space: pre;
        }
    </style>
    <script src="//code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="//ajax.aspnetcdn.com/ajax/knockout/knockout-3.0.0.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/q.js/1.0.0/q.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/breezejs/1.4.4/breeze.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var entityManager = new breeze.EntityManager('api/northwind');
            entityManager.fetchMetadata()
                .then(function () {
                    var html = '',
                        types = entityManager.metadataStore.getEntityTypes(),
                        type,
                        i,
                        j,
                        property,
                        crlf = String.fromCharCode(13),
                        code = document.createElement('code'),
                        script = document.createElement('script');

                    function getJSType(metadataType) {
                        if (/(Int64)|(Int32)|(Int16)|(Byte)|(Decimal)|(Double)|(Single)|(number)/.test(metadataType))
                            return 'number';
                        else if (/(DateTime)|(DateTimeOffset)|(Time)|(Date)/.test(metadataType))
                            return 'Date';
                        else if (/(Boolean)/i.test(metadataType))
                            return 'boolean';
                        return 'string';
                    }

                    for (i = 0; i < types.length; i++) {
                        // type declaration
                        var type = types[i];
                        html += 'export interface ' + type.shortName;

                        // base type
                        html += ' extends ';
                        if (type.hasOwnProperty('baseEntityType')) {
                            html += type.baseEntityType.shortName;
                        } else {
                            html += 'breeze.Entity';
                        }
                        html += ' {' + crlf;

                        // data properties
                        for (j = 0; j < type.dataProperties.length; j++) {
                            property = type.dataProperties[j];
                            if (type.baseEntityType && type.baseEntityType.dataProperties.filter(function (p) { return p.name === property.name; }).length > 0)
                                continue;
                            html += '    ' + property.name;
                            //if (property.isNullable)
                            //    html += '?';
                            html += ': KnockoutObservable&lt;';
                            html += getJSType(property.dataType.name);
                            html += '&gt;; //' + property.dataType.name + crlf;
                        }

                        // navigation properties
                        for (j = 0; j < type.navigationProperties.length; j++) {
                            property = type.navigationProperties[j];
                            if (type.baseEntityType && type.baseEntityType.navigationProperties.filter(function (p) { return p.name === property.name; }).length > 0)
                                continue;
                            html += '    ' + property.name;
                            //if (property.isNullable)
                            //    html += '?';
                            if (property.isScalar)
                                html += ': KnockoutObservable&lt;';
                            else
                                html += ': KnockoutObservableArray&lt;';
                            html += property.entityType.shortName;
                            html += '&gt;;' + crlf;
                        }

                        html += '}' + crlf + crlf;
                    }

                    code.innerHTML = html;

                    $(code).addClass('prettyprint');

                    document.body.appendChild(code);

                    script.setAttribute('src', '//google-code-prettify.googlecode.com/svn/loader/run_prettify.js');
                    document.body.appendChild(script);
                })
                .fail(function (reason) {
                    alert(reason);
                });
        });
    </script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-05T12:57:04.787

对于微风 TypeScript 定义，请使用 NuGet 包[微风.TypeScript.DefinitelyTyped](http://www.nuget.org/packages/breeze.TypeScript.DefinitelyTyped/)。要为您的实体创建定义，您可以使用[TypeLITE](http://type.litesolutions.net/)。它将创建一个`.d.ts`具有如下接口的文件：

```
declare module MyProject.Models {
interface Customer {
  Id: number;
  AccountNumber: string;
  ... 
```

虽然这些接口完全描述了您的实体，但它们不会扩展`breeze.Entity`. 要很好地使用 Breeze API 类型定义，请从这些定义中派生出您自己的接口，如下所示：

```
import Models = MyProject.Models;
interface Customer extends Models.Customer, breeze.Entity { }
... 
```

这仍然涉及一些手动编码，但至少它只是每个类型，而不是每个属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T19:19:22.130

关于 Typescript，它绝对在我们的雷达上。至少我们将创建一个 TypeScript 'declare' 文件，以便在使用 Breeze 时实现更好的智能感知。

您可以在[UserVoice](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/suggestions/3311282-support-typescript)上投票。

在此之前，您可能想要使用支持 Breeze的 Boris Yankov 的[definitelyTyped 。](https://github.com/borisyankov/DefinitelyTyped/tree/master/breeze)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T03:12:51.830

我的两分钱...

我一直在为微风使用确定类型的定义文件，它似乎运行良好。

创建一个 T4 脚本来为 .edmx 中的所有实体生成 .d.ts 文件是相当简单的，然后你就会得到你想要的智能感知。如果 Ward 喜欢，我可以在某处发布示例 T4 脚本。

# spring - 注入 null 或空字符串作为属性的默认值

> ID：13817231
> 
> 赞同：13
> 
> 时间：2012-12-11T09:28:14.407
> 
> 标签：spring

如果未指定属性，是否可以将空字符串或空白字符串作为将在 spring 文件中使用的默认值注入？目前我拥有的最好的是

```
<constructor-arg index="1" value="@{data.url:&quot;&quot;}"/> 
```

`""`在代码中解析为

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T07:06:21.837

您是否尝试过使用[SpEL](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/expressions.html)？可能是这样的：

```
<constructor-arg index="1" value="#{'${data.url}'==null?'':'${data.url}'}"/> 
```

**更新**

我只记得有一种更简单的方法（如此[处](http://java.dzone.com/articles/using-default-values)所述）。尝试：

```
<constructor-arg index="1" value="${data.url:''}"/> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-05T15:31:38.880

如果您在源代码中使用注释，这将起到作用：

```
@Value("${data.url:#{null}}")
private String dataUrl; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-16T18:38:31.513

空猫王为我工作......

```
@Value("${http.proxyHost?:}")
public String proxyHost = null; 
```

# windows - 在 tcl 脚本中播放 .wav 文件

> ID：13817232
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:28:20.977
> 
> 标签：windows, tcl

您好，我正在尝试在我的 tcl 脚本中播放 .wav 文件，但我无法这样做。，我尝试安装包 Sound 1.0 但仍然无法正常工作。我已将 .wav 文件粘贴到 c:/ bin 并尝试过`exec bell.wav`，但 o/p 说

```
couldn't execute "TTBell.WAV": no such file or directory 
```

我可以获得有关此或任何 Windows API 帮助的帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:49:44.667

`.WAV`文件不是可执行文件，因此您不能那样运行它们。最简单的方法是通过`START`实用程序，如下所示：

```
set thefile "bell.wav"
exec {*}[auto_execok start] "" [file nativename [file normalize $thefile]] 
```

如果您使用的是较旧的 Tcl（8.4 或之前），请改用这种复杂的形式：

```
set thefile "bell.wav"
eval exec [auto_execok start] [list "" [file nativename [file normalize $thefile]]] 
```

在这两种情况下，空参数 ( `""`) 都是*必要*的，因为`START`在某些情况下......</p>

# ajax - Google App Engine 和 Ajax：POST 时出现错误代码 405

> ID：13817234
> 
> 赞同：1
> 
> 时间：2012-12-11T09:28:32.740
> 
> 标签：ajax, google-app-engine

有人可以帮我解决这个问题吗？当我点击 POST 时，返回的数据应该会更新内容 div。但我总是收到“405 Method Not Allowed”错误消息。

主要.py：

```
# -*- coding: utf-8 -*-
#!/usr/bin/env python2.7

import webapp2
import os
from google.appengine.ext.webapp import template

class Main(webapp2.RequestHandler):
    def get(self):
        render(self, 'base.html', {})

class Form(webapp2.RequestHandler):
    def get(self):
        render(self, 'form.html', {'name': 'get'})
    def post(self):
        render(self, 'form.html', {'name': 'post'})

def render(handler, infile, template_values):
    path = os.path.join(os.path.dirname(__file__), 'templates/', infile)
    handler.response.out.write(template.render(path, template_values))

app = webapp2.WSGIApplication([
    ("/form", Form),
    ("/.*", Main)],
    debug=True) 
```

base.html：

```
...
<body>

<div id="content">
{% include "form.html" %}
</div>

<script>
function submitForm() {
    $.ajax({
        type: "POST",
        url: $(this).attr('action'),
        data: $(this).serialize(),
        cache: false,
        success: function(returnData){
            $("#content").html(returnData);
        }
    });
}
</script>

</body></html> 
```

表单.html：

```
<form  id="submitForm" action="/form" enctype="multipart/form-data">
  name: <input type="text" name="abcd" />{{ name }}<br /><br />
      <input type="button" value="Submit" onclick="return submitForm()" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:34:15.637

问题已解决：只需将 $(this) 更改为 $('#submitForm)

# asp.net - 浏览器返回：过滤器设置因我的自定义 ReportViewer 和 Web 配置而丢失

> ID：13817236
> 
> 赞同：2
> 
> 时间：2012-12-11T09:28:46.740
> 
> 标签：asp.net, reporting-services, web-config, ssrs-2008, ssrs-2012

**问题**
使用 SSRS，其默认 Report.aspx 和 webconfig、state1 和 state2（如下）是相等的。
我的自定义 report.aspx 对 webconfig、state1 和 state2 下面的修改不相等。

**可能的原因**
由于更改了 webconfig 选项，会话信息可能不会被存储..？
当我浏览报告，然后使用浏览器返回按钮时，这变得可见。

*具体场景：*

1.  打开报告（具有参数/过滤器，例如年份：2012）
2.  更改默认过滤器值，例如将年份设置为 2011 (+submit) [ = state1 ]
3.  转到钻取报告
4.  返回（年份再次设置为 2012 年）[ = state2 ]

使用默认的 SSRS report.aspx，按预期返回（步骤 4）是 2012 年。但是，使用我的自定义 webconfig+ReportViewer aspx，过滤器与以前不同（又是 2011 年）。

我对 web.config 的更改以绕过以前遇到的错误：

> Microsoft.ReportingServices.UI.WebControlConnection、ReportingServicesWebUserInterface、Version=10.0.0.0、Culture=neutral、PublicKeyToken=89845dcd8080cc91 类型没有实现 IReportServerConnection

web.config 现在有：

```
<appSettings>
    <add key="ReportViewerServerConnection" value="Microsoft.ReportingServices.UI.WebControlConnection, ReportingServicesWebUserInterface, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    <add key="ReportViewerTemporaryStorage" value="Microsoft.ReportingServices.UI.ReportViewerTemporaryStorage, ReportingServicesWebUserInterface, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    <clear/><!-- added -->
</appSettings> 
```

要绕过错误：

> 在远程模式下，报表查看器控件需要启用会话状态或在配置文件中指定报表服务器连接信息。

我改变了：

```
<httpModules>
    <clear />
    <add name="Session"  type="System.Web.SessionState.SessionStateModule"/><!-- added -->
    ...
    ...
</httpModules> 
```

我很高兴收到您的想法和/或建议/解决方案。

**更新：**
前面提到的步骤的附加屏幕截图：

第 1 步（= 第 4 步自定义）
![第 1 步的参数设置](../Images/f7e4db1f7b11b159d009e9390ac11f73.png)

第 2 步（= 第 4 步默认，需要）
![第 2 步的参数设置](../Images/692e4550b06ca90fa86069fa0105445f.png)

第 4 步：使用默认 ssrs 返回给我第 2 步（根据需要），使用我的自定义给我第 1 步。我也希望通过我的自定义页面返回第 2 步。

***使用 WebkitInspector***更新调查**** 

 ***在 ssrs 默认 aspx 中，返回浏览器（所需功能）：

最初过滤器也处于默认状态，但是服务器在页面上编写了额外的 JS，这会启动过滤器到先前设置的更新。关键是我不知道如何“自动”编写这些额外的 JS（我认为它与会话/历史相关，而不是以编程方式存储和检查历史）。

此外，有人建议我：

1.  使用开发工具栏或提琴手/wireshark 来调查会话参数。
2.  查询 ReportServerTempDb

我会尝试＃1，但我真的不确定从哪里开始涉及＃2。

**更新：**
显然仅在 IE 中，它有一些 BrowserNavigationCorrector.js。渲染页面时，首先会执行初始化，它会执行`setTimeout('doInitialize',0)`. 之后 - 在执行 doInitialize 之前 - 页面写入/渲染 JS：`add_init(*NavigationCorrectioncode*);` 在 doInit 上，NavigationCorrector 检查 PageState (in `OnAppLoad()`)，它还没有值“Loaded”。然后其他所有事情都会发生，并且页面状态将获得 Loaded 值。

然后，当您转到子报表并回击时，该页面在内存中的状态为“已加载”。因此，当 NavigationCorrector 执行其代码并且页面状态已加载时，它会触发 TriggerPostBack 脚本。反过来，这会执行更新参数值的回调。

使用 WebForms.dll v11，BrowserNavigationCorrector.js 不存在。此外，使用 Chrome，它也不包含在 SSRS 本机或使用 dll 中。

基本上我可以尝试手动包含该文件，或者，我目前正在尝试下载 VS2013，它希望有一个改进的 dll 版本，也许是 v12..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T14:42:57.710

我认为这似乎是 DLL 中的一个错误。尝试制作一次票，但它在过程中的某个地方搁浅了。它可能已在较新的版本中得到修复。***

# c# - 数据表未在 datagridview 中映射

> ID：13817241
> 
> 赞同：1
> 
> 时间：2012-12-11T09:29:23.600
> 
> 标签：c#

```
 {    
            DialogResult dialogResult = MessageBox.Show("Sure", "Some Title", MessageBoxButtons.YesNo);
        if (dialogResult == DialogResult.Yes)
        {
            dt = dsSource.Tables[Index];
            dt.Reset();
            Excel.Workbook workbook;
            Excel.Worksheet NwSheet;
            Excel.Range ShtRange;
            Microsoft.Office.Interop.Excel.Application ExcelObj = new Microsoft.Office.Interop.Excel.Application();
            OpenFileDialog filedlgExcel = new OpenFileDialog();
            filedlgExcel.Title = "Select file";
            filedlgExcel.InitialDirectory = @"c:\";
            //filedlgExcel.FileName = textBox1.Text;
            filedlgExcel.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
            filedlgExcel.FilterIndex = 1;
            filedlgExcel.RestoreDirectory = true;
            if (filedlgExcel.ShowDialog() == DialogResult.OK)
        {

            workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);
            NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
            ShtRange = NwSheet.UsedRange;
            for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
            {
                dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
            }
            dt.AcceptChanges();
            string[] columnNames = new String[dt.Columns.Count];
            for (int i = 0; i < dt.Columns.Count; i++)
            {
                columnNames[0] = dt.Columns[i].ColumnName;
            }
            //string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

            for (int Rnum = 2; Rnum <= ShtRange.Rows.Count; Rnum++)
            {
                DataRow dr = dt.NewRow();
                for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
                {
                    if ((ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2 != null)
                    {
                        dr[Cnum - 1] = (ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
                    }
                }
                dt.Rows.Add(dr);
                dt.AcceptChanges();
            }
            workbook.Close(true, Missing.Value, Missing.Value);
            ExcelObj.Quit();

            dataGridView1.DataSource = dt;                   

} 
```

这是我用来将 excel 数据提取到 datagridview 中的代码。它写在按钮点击上。第一次单击按钮时，执行的操作非常完美，数据显示在 datagridview 中，但如果我再试一次，只会出现列名，但没有数据，它显示单行空白数据。我调试了代码，发现数据正在进入 datatable(dt)，但是当它映射到 datagridview 时，问题出在某个地方。在这条线上

```
dataGridView1.DataSource = dt; 
```

我应该怎么做才能解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:53:20.210

*** 编辑 ***

问题是当您清除 DataTable 时，它​​只会删除 Rows。为了删除您需要执行此操作的列：-

```
dt.Columns.Clear(); 
```

`dt.Reset()` 不会删除数据，它只会丢弃所有更改。

每次单击按钮时调用此事件时，都需要删除 DataTable 中保存的先前行和列。

下面的代码对我来说很好：-

```
private void button1_Click(object sender, EventArgs e)
        {
            dt.Columns.Clear();
            dt.Rows.Clear();

            Excel.Workbook workbook;
            Excel.Worksheet NwSheet;
            Excel.Range ShtRange;
            Microsoft.Office.Interop.Excel.Application ExcelObj = new Microsoft.Office.Interop.Excel.Application();

            OpenFileDialog filedlgExcel = new OpenFileDialog();
            filedlgExcel.Title = "Select file";
            filedlgExcel.InitialDirectory = @"c:\";

            filedlgExcel.Filter = "Excel Sheet(*.xlsx)|*.xlsx|All Files(*.*)|*.*";
            filedlgExcel.FilterIndex = 1;
            filedlgExcel.RestoreDirectory = true;
            if (filedlgExcel.ShowDialog() == DialogResult.OK)
            {
                workbook = ExcelObj.Workbooks.Open(filedlgExcel.FileName, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value,
                 Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

                NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);
                ShtRange = NwSheet.UsedRange;
                for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
                {
                    dt.Columns.Add(new DataColumn((ShtRange.Cells[1, Cnum] as Excel.Range).Value2.ToString()));
                }
                dt.AcceptChanges();
                string[] columnNames = new String[dt.Columns.Count];
                for (int i = 0; i < dt.Columns.Count; i++)
                {
                    columnNames[0] = dt.Columns[i].ColumnName;
                }
                //string[] columnNames = (from dc in dt.Columns.Cast<DataColumn>() select dc.ColumnName).ToArray();

                for (int Rnum = 2; Rnum <= ShtRange.Rows.Count; Rnum++)
                {
                    DataRow dr = dt.NewRow();
                    for (int Cnum = 1; Cnum <= ShtRange.Columns.Count; Cnum++)
                    {
                        if ((ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2 != null)
                        {
                            dr[Cnum - 1] = (ShtRange.Cells[Rnum, Cnum] as Excel.Range).Value2.ToString();
                        }
                    }
                    dt.Rows.Add(dr);
                    dt.AcceptChanges();
                }
                workbook.Close(true, Missing.Value, Missing.Value);
                ExcelObj.Quit();

                dataGridView1.DataSource = dt;   
            }
        }
     } 
```

# jquery - 日期选择器在实时方法中不起作用

> ID：13817242
> 
> 赞同：1
> 
> 时间：2012-12-11T09:29:26.380
> 
> 标签：jquery

我的日期选择器是用简单的代码工作的。在插入新行后使用它`<tr>`在单击中不起作用。但我可以在第一次点击时得到它的对象`<input/>`。这在单击其他时有效，然后`input`再次尝试单击以显示日期选择器的弹出窗口。

我的 jQuery：

```
$('#myTable tr:last').after("<tr><td align='center'style='background-color:"+rcolor+"'>"+rowCount+
            "</td><td><input style='width:300px !important;' name='onvan' /></td>"+
            "<td><input style='width:100px !important;' name='' id='startdate'/></td>"+
            "<td><input style='width:100px !important;' name='' id='enddate'/></td>"+
            "<td><input style='width:100px !important;' name='' id='' /></td>"+
            "<td>"+
            "<select name='visible'>"+
            "<option></option>"+
            "<option></option>"+
            "<option></option>"+
            "<option></option>"+
            "<option></option>"+
            "<option></option>"+
            "</select></td>"+
            "<td><select name='visible'><option value='1' >فعال</option><option value='0' >غیرفعال</option></select>"+
            "&nbsp;&nbsp;<span id='saveToDb'><a href='#'>ذخیره</a></span>&nbsp;<span id='cancelToSave'><a href='#'>لفو</a></span></td>"+
            "</tr>"); 
```

数据选择器：

```
$(function() {
    $('#startdate').live('click', function() {
        // alert( $(this));

             $(this).datepicker({
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                dateFormat: 'yy/mm/dd',
                minDate: '-3y',
                maxDate: '+3y',
                regional: 'fa',
                onSelect: function (dateText, inst) {
                         var date = new JalaliDate(inst['selectedYear'], inst['selectedMonth'], inst['selectedDay']).getGregorianDate();
                          var month= (date.getMonth()+1).toString(); 
                          if (month.length <2) month='0'+ month; 

                          var day= date.getDate().toString(); 
                          if (day.length <2) day ='0'+ day;
                          $('#taTarikh').val(date.getFullYear() + '-' + month + '-' + day);
                          // alert($('#taTarikh').val());
                }
             });    
          });                 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:12:00.263

随着`.live('click',function(){});`您通过第一次单击来实施日期选择器，这就是它在第二次单击时开始工作的原因。

您应该在创建对象后实现 datepicker..

```
$(function() {
    $('#myTable tr:last').after("<tr><td align='center'style='background-color:yellow'>3</td><td><input style='width:300px !important;' name='onvan' /></td>" + "<td><input style='width:100px !important;' name='' id='startdate'/></td>" + "<td><input style='width:100px !important;' name='' id='enddate'/></td>" + "<td><input style='width:100px !important;' name='' id='' /></td>" + "<td>" + "<select name='visible'>" + "<option></option>" + "<option></option>" + "<option></option>" + "<option></option>" + "<option></option>" + "<option></option>" + "</select></td>" + "<td><select name='visible'><option value='1' >فعال</option><option value='0' >غیرفعال</option></select>" + "&nbsp;&nbsp;<span id='saveToDb'><a href='#'>ذخیره</a></span>&nbsp;<span id='cancelToSave'><a href='#'>لفو</a></span></td>" + "</tr>");
    $("#startdate").datepicker({
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'yy/mm/dd',
        minDate: '-3y',
        maxDate: '+3y',
        regional: 'fa',
        onSelect: function(dateText, inst) {
            var date = new JalaliDate(inst['selectedYear'], inst['selectedMonth'], inst['selectedDay']).getGregorianDate();
            var month = (date.getMonth() + 1).toString();
            if (month.length < 2) month = '0' + month;
            var day = date.getDate().toString();
            if (day.length < 2) day = '0' + day;
            $('#taTarikh').val(date.getFullYear() + '-' + month + '-' + day);
            // alert($('#taTarikh').val());
        }
    });
}); 
```

演示：http: [//jsfiddle.net/BerkerYuceer/pBQFF/14/](http://jsfiddle.net/BerkerYuceer/pBQFF/14/)

# ruby-on-rails - 覆盖设计创建控制器操作

> ID：13817243
> 
> 赞同：4
> 
> 时间：2012-12-11T09:29:35.270
> 
> 标签：ruby-on-rails, authentication, devise, ruby-on-rails-3.2

我正在创建一个应用程序（用户有很多组），现有用户可以在其中发送邀请以邀请人们加入组。如果 sign_up url 有一个邀请令牌，我需要覆盖默认的设计控制器操作以进行创建。

路线.rb

```
devise_for :users do 
  match '/users/sign_out', :to => 'devise/sessions#destroy'
  match '/users/sign_up/:invitation_token', :to => 'registrations#create' 
```

注册控制器.rb

```
class RegistrationsController < Devise::RegistrationsController
#after_filter :add_user_to_group

def new
    super
end

def create
  if !params[:invitation_token].nil?
    token = params[:invitation_token]
    @invitation = Invitation.where "token" => token 
      if !@invitation.nil?
            build_resource
            if resource.save
              if resource.active_for_authentication?
                set_flash_message :notice, :signed_up if is_navigational_format?
                sign_up(resource_name, resource)
                respond_with resource, :location => after_sign_up_path_for(resource)
              else
                set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
                expire_session_data_after_sign_in!
                respond_with resource, :location => after_inactive_sign_up_path_for(resource)
               end
             else
               clean_up_passwords resource
               respond_with resource
             end
    else
      flash[:notice] = "Invalid Token. Cannot signup with this Link." 
    end
  else
    super
  end
end

def after_sign_up_path_for(resource_or_scope)
  @user = current_user
  raise @user.inspect
  @invitation = Invitation.where "recipient_email" => @user.email
  if !@invitation.nil?
    @user.update_attribute(:invitation_id, @invitation.id)
    @user_group = UserGroup.new
    @user_group.user_id = @user.id
    @userGroup.group_id = @invitation.group_id
    @userGroup.save!  
  end
  after_sign_in_path_for(resource)
end 
```

结尾

日志

```
Started GET "/users/sign_up/83003a4fab004ef4c1934c15f7215e8dc6a57718" for 127.0.0.1 at 2012-12-11 14:53:18
Processing by RegistrationsController#create as HTML
  Parameters: {"invitation_token"=>"83003a4fab004ef4c1934c15f7215e8dc6a57718"}
  SQL (0.1ms)  BEGIN
  User Exists (1.0ms)  SELECT 1 AS one FROM `users` WHERE `users`.`name` IS NULL LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM `users` WHERE `users`.`email` = '' LIMIT 1
   (0.1ms)  ROLLBACK 
```

这会将我重定向到 sign_up 路径，但会在页面加载时执行验证。

```
Email can't be blank
Password can't be blank
Name can't be blank 
```

sign_up 之后的日志与之前呈现的页面

```
Started POST "/users" for 127.0.0.1 at 2012-12-11 14:56:37 +0530
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gUmNDb1Sj/ZVnXMG8t/Av0QlAYg7nAMTsSU5ZBW+s60=", "user"=>{"name"=>"Prashanth2", "email"=>"sample@sampleee.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  SQL (0.1ms)  BEGIN
  User Exists (0.4ms)  SELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'sample@sampleee.com' LIMIT 1
  User Exists (0.3ms)  SELECT 1 AS one FROM `users` WHERE `users`.`name` = 'Prashanth2' LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE `users`.`email` = 'sample@sampleee.com' LIMIT 1
  SQL (1.1ms)  INSERT INTO `users` (`created_at`, `current_sign_in_at`, `current_sign_in_ip`, `email`, `encrypted_password`, `invitation_id`, `invitation_limit`, `last_sign_in_at`, `last_sign_in_ip`, `name`, `remember_created_at`, `reset_password_sent_at`, `reset_password_token`, `sign_in_count`, `updated_at`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Tue, 11 Dec 2012 09:26:37 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "sample@sampleee.com"], ["encrypted_password", "$2a$10$jcaLbYWNqp2sbUlAZWb38.Ls7Ku90ImOQ11k0fxJSq/mD4Zm2U1JO"], ["invitation_id", nil], ["invitation_limit", 5], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["name", "Prashanth2"], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Tue, 11 Dec 2012 09:26:37 UTC +00:00]]
   (108.5ms)  COMMIT
  SQL (0.1ms)  BEGIN
   (0.3ms)  UPDATE `users` SET `last_sign_in_at` = '2012-12-11 09:26:38', `current_sign_in_at` = '2012-12-11 09:26:38', `last_sign_in_ip` = '127.0.0.1', `current_sign_in_ip` = '127.0.0.1', `sign_in_count` = 1, `updated_at` = '2012-12-11 09:26:38' WHERE `users`.`id` = 12
   (127.8ms)  COMMIT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:16:49.590

我不得不做类似的事情。我最终添加了用于将令牌添加到用户模型并具有单独的控制器操作来接受邀请的代码：

用户.rb

```
after_create :accept_invitation, if: :token

private
  def accept_invitation
    # Or whatever you need to add the invitation token.
    permission = Permission.find_by_token(token)
    if permission
      permission.update_attributes!(user_id: id, accepted: true) 
      UserMailer.admin_accepted_invitation_email(permission).deliver
    end
  end 
```

注册控制器.rb

```
class Users::RegistrationsController < Devise::RegistrationsController
  layout "home"

  def accept_invitation
  @invitation = Permission.find_by_token!(params[:token])
  @user = User.new(token: @invitation.token)
end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:22:28.477

请点击链接进行无密码注册

[无密码注册 :: 设备](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password)

# map - clojure 映射中的默认值

> ID：13817244
> 
> 赞同：15
> 
> 时间：2012-12-11T09:29:36.193
> 
> 标签：map, clojure

我有一个clojure地图。命名它`opts`。我知道从这张地图中获取值的两种方法，如果没有键，则获取一些默认值：

```
(let [opts {}
      title-1 (or (:title opts) "Default title")
      title-2 (:title opts "Default title")]
  (println title-1 title-2)) 
```

我看到一些库（quil、incanter）使用第一种方法和`or`. 在我看来，第二种方法更简洁明了。第一种方法有优势吗？
使用的缺点`(or (:title opts) "Default value")`是我们不能再传递`false`和`nil`作为值，在这种情况下总是使用默认值。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T09:43:19.747

`(or (:key hash) default)`和之间的一个关键区别`(:key hash default)`是前者`default`仅在必要时进行评估。在后一种情况下，它总是被评估。`or`因此，如果评估`default`成本高昂，您应该使用。

当您的哈希包含在布尔上下文中为假的值时，另一个区别变得明显。在这种情况下，`(or (:key hash) default)`将评估这些值而`default`不是您期望的值。与表达式相反，将产生正确的结果。作为旁注，在将值存储为散列之前请三思而后行。`false``nil``or``(:key hash default)``nil`

好吧，这些是重要的区别。现在让我们转向次要的。

```
(or (:title opts) "Default title") 
```

由读者扩展为

```
;; Redacted for the sake of brevity.
(let* [x (:title opts)]
  (if x
    x
    "Default title")) 
```

可以说，它比简单地评估效率低

```
(:title opts "Default title") 
```

当然，如果没有任何基准，很难估计速度的差异，但我相信它应该是微不足道的。

另一方面，`(or (:key hash) :default)`对于不习惯该`(:key hash :default)`成语的人来说，乍一看似乎更容易理解。考虑来自其他语言的程序员。例如，在 Ruby 中，处理散列的不存在元素的典型方法是

```
val = hash[:key] || :default 
```

因此，不习惯某些 Clojure 习语的人可能更容易解析第一个表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-05T13:19:53.093

这就是`:or`地图解构时使用的密钥。

```
(defn f [{:keys [title-1 title-2] :as opts
          :or {title-1 "default-1" title-2 "default-2"}}]
  (println opts)
  (println title-1)
  (println title-2)) 
```

这给了你

```
> (f {})
{}
default-1
default-2
nil

> (f {:title-1 "foo"})
{:title-1 foo}
foo
default-2
nil

> (f {:title-2 "bar"})
{:title-2 bar}
default-1
bar
nil

> (f {:title-1 "foo" :title-2 "bar"})
{:title-1 foo, :title-2 bar}
foo
bar
nil 
```

# javascript - 如何在 Javascript 中向“this”对象添加属性

> ID：13817245
> 
> 赞同：0
> 
> 时间：2012-12-11T09:29:38.983
> 
> 标签：javascript

现在有些事情让我再次感到困惑。在文件中，我看到以下代码`this.xCenter = options.xPos;`，但是，我找不到对象中定义的`xCenter`位置`this`。然后我添加了一行`this.myattr = 12;`，令我惊讶的是，代码运行正常并且没有显示任何错误。在我知道运行结果之前，我认为代码应该运行不成功，因为`this`没有定义 的属性`myattr`，所以我很困惑。这与Java的语法确实不同。反过来，我认为这是为对象定义/添加属性的一种方式，我的假设是否正确，或者只是代码意味着其他东西，伙计们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T09:30:52.350

Javascript 是一种动态（弱）类型的语言。您可以根据需要添加属性。它们不需要先声明。

例如 ：

```
var obj = {};      // create an object but we don't define any properties
obj.foo = "hello"; // property foo just got created
obj.bar = 10;      // and same for bar
console.log(obj); 
```

另一方面，Java 是一种静态（和强）类型语言，因此必须在使用之前声明变量和属性。

# jquery-ui - onclick 检索所有已删除元素的绝对位置字符串

> ID：13817249
> 
> 赞同：0
> 
> 时间：2012-12-11T09:29:48.700
> 
> 标签：jquery-ui, jquery-ui-draggable

在搜索了一天并尝试了一些解决方案后，没有一个对我有用。

Draggables 是内部的列表项`<ul>`。Droppable 在它旁边的 div 上。现在基本拖动，现在克隆没有助手。

Onclick 我想：

*   从可放置区域获取所有可拖动位置。（相对于文档的绝对位置）

    *   *注意*：`<li>`可拖动位置中的每个都有一个唯一的 ID。（可拖动列表是从 ajax 回调构建的，因此在解析 xml 时添加了 id：`<li id="'+uid+'">`...
    *   我希望以字符串格式检索所有位置，例如： var send_new_positions = "id1;x1,y2;id2;x2,y2"; 示例：“1;108,57”表示：li，id=1，xPos=108，yPos=57。

问题：

我不能用老式的方式 onclick 收集可拖动区域内的所有列表项，因为没有。在调试器中，我看到它们不是那样工作的，droppable 保持干净，draggables 使用内联样式更新，例如：`<li style="position: relative; left: -270px; top: 127px;" class="ui-draggable dropped">`...

我是否应该为可拖动对象构建一个选择器，该选择器使用“ **ui-draggable dropped**`<li>` ”类找到每个对象，然后提取位置？我认为这是更难的方法，毕竟我只得到相对位置。

 **我是否应该将我的逻辑添加到**drop** : function() 并将我的字符串格式添加到每个`<li>`被删除的内容中。如果是这样，我应该如何将此字符串数据附加到每个 drop `<li>`？

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:23:55.630

循环所有可拖动元素并构造字符串：

```
$('#myButton').click(function(){
    var myStringPosition = null;
    $('.ui-draggable').each(function(){
        myStringPosition = $(this)[0].id + ';' + $(this).css('left') + ';' + $(this).css('top');
    });

    alert(myStringPosition);
}); 
```**

# javascript - 获取特定日期的全年日期

> ID：13817254
> 
> 赞同：0
> 
> 时间：2012-12-11T09:30:20.290
> 
> 标签：javascript, algorithm, date, getdate

如果我们给它一个开始日期，是否有一种算法[或javascript代码]可以获取一年中**特定**日期的所有**日期？**

 **例如：

**输入**：2012 年 12 月 11 日，星期二。

**输出**：2012 年 12 月 18 日、2012 年 12 月 25 日、2013 年 1 月 1 日 .... 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:45:35.843

它能有多难？

```
var d1 = new Date('Tuesday , Dec, 11 2012');

for (var i = 0; i < 365; i += 7) {
    d1.setDate(d1.getDate() + 7)
    console.log(d1);  //outputs every tuesday for the next year
} 
```

[**小提琴**](http://jsfiddle.net/rnnS8/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:51:41.800

与adeno的回答非常相似。打败我，但我仍然会分享它。=p

```
var getDaysInYear = function(day, year) {
    var startDate = new Date(day + " " + year);
    var date = startDate;
    var dates = [];

    while (date.getFullYear() == year) {
        dates.push(date.toDateString()); // change this to change the output
        date.setTime(date.getTime() + 1000 * 7 * 24 * 60 * 60);
    }

    return dates;
};

// Returns an array of whatever is in dates.push().
var dates = getDaysInYear("Tuesday", 2013);
console.log(dates); 
```

[小提琴](http://jsfiddle.net/rGtD2/1/)**

# excel - VBA 宏：Excel 到 Word 文本替换

> ID：13817263
> 
> 赞同：1
> 
> 时间：2012-12-11T09:31:14.523
> 
> 标签：excel, vba, ms-word

Excel (2003) 有简单的 VBA 宏。它查找单元格 A$N 和 B$N，并将 Word 文档中的文本从 B$N 替换为 A$N。

```
Sub Макрос1()

Dim pathh As String, i As Integer
pathh = "c:\1.doc"
Dim pathhi As String
Dim from_text As String, to_text As String
Dim WA As Object, WD As Object
Set WA = CreateObject("Word.Application")
WA.Documents.Open (pathh)
WA.Visible = True

For oCell = 1 To 150
    from_text = Range("B" + CStr(oCell)).Value
    to_text = Range("A" + CStr(oCell)).Value
    With WA
        .Activate
        With .Selection.Find
          .ClearFormatting
          .Replacement.ClearFormatting

          .Text = from_text
          .Replacement.Text = to_text
          .Execute Replace:=wdReplaceAll
        End With
    End With
Next
End Sub 
```

问题：在 Word 文档中，此脚本仅选择文本，但不进行替换。不建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:53:49.390

首先，我希望您对 Word 对象库的引用处于活动状态： ![对 Word 的引用](../Images/e8672bc893ed1ff00070884c4ca8cbbf.png)

该脚本实际上可以工作，我做了一些小的修改，并进行了包括替换在内的工作：

```
Sub test1()

    Dim pathh As String
    Dim pathhi As String
    Dim oCell  As Integer
    Dim from_text As String, to_text As String
    Dim WA As Object

    pathh = "C:\1.doc"

    Set WA = CreateObject("Word.Application")
    WA.Documents.Open (pathh)
    WA.Visible = True

    For oCell = 1 To 2
        from_text = Sheet2.Range("B" & oCell).Value
        to_text = Sheet2.Range("A" & oCell).Value
        With WA
            .Activate
            With .Selection.Find
              .ClearFormatting
              .Replacement.ClearFormatting

              .Text = from_text
              .Replacement.Text = to_text
              .Execute Replace:=wdReplaceAll
            End With
        End With
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T03:50:47.660

使用 Excel VBA 7.0 和 Word 14.0 对象[库](https://msdn.microsoft.com/en-us/library/office/ff193977.aspx) 需要稍微修改 With .Selection 块

```
 With .Selection.find
            .ClearFormatting
            .Execute FindText:=from_text, ReplaceWith:to_text, replace:=wdReplaceAll
        End With 
```

# iphone - 当用户点击 UINavigationController 后退按钮时做一些事情

> ID：13817269
> 
> 赞同：1
> 
> 时间：2012-12-11T09:31:48.767
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我正在使用最新的 SDK 和 XCode 开发一个 iOS 应用程序。

我有一个配置屏幕，我需要在用户返回上一个屏幕之前保存设置。这个视图控制器被称为`SettingsViewController`.

我在情节提要上使用导航控制器，我需要检测用户何时点击后退按钮。

我可以在`- (void)viewWillDisappear:(BOOL)animated`. 你怎么看？

如何检测用户何时点击后退按钮`SettingsViewController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:45:54.330

您可以使用 self.navigationItem.leftButtonItem 添加您的按钮项，当用户单击按钮时，您可以调用按钮选择器中定义的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:46:08.603

试试这个

```
//Put this viewDidLoad and make sure you have a back.png that mimics back button
UIImage *buttonImage = [UIImage imageNamed:@"back.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:buttonImage forState:UIControlStateNormal];
button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);
[button addTarget:self action:@selector(backPressed:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.leftBarButtonItem = customBarItem; 
```

这是你的方法

```
- (void)backPressed:(id)sender {
     //your code to save and also pop your view controller
  } 
```

# ember.js - View 没有得到其对应的控制器集

> ID：13817270
> 
> 赞同：3
> 
> 时间：2012-12-11T09:31:52.803
> 
> 标签：ember.js

我正在学习 Ember，我有以下场景......使用“插座”创建的所有视图都正确地获得了框架设置的控制器。但是，我使用 {{view}} 片段嵌入了一个嵌套视图。视图本身被创建，但它的控制器没有被设置。视图和控制器共享正确的命名约定，框架应该能够将它们关联起来。

为什么 Ember 不为使用 {{view}} 创建的视图关联控制器？看起来它只适用于网点。

如果这是设计使然，那么背后的原因是什么？为此类视图注入控制器的最佳实践是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:41:21.297

目前，为此视图设置的控制器是父视图的控制器。现在，您或许可以使用 {{view App.YourView controllerBinding="App.yourViewController"}} 手动设置您想要的控制器。

话虽如此，你是对的，Ember.js 可能应该做一些简洁的内置。也许有一些针对此的计划。

# android - 如何在sqllite连接中添加数据类型

> ID：13817271
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:31:51.280
> 
> 标签：android

如何在我的 sqllite 创建中添加数据类型？我使用这个 url 项目[http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-examplefor](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-examplefor)帮助并修改我的 sql 数据库与更多的 intries 我是否添加每个字段的数据类型？是我下面的连接字符串我想添加数据类型告诉我正确的方法代码和上限字段是日期时间字段所有其他都是我想做的文本字段+“selectProperty varchar（50），propertyValue varchar（50）不为空，

给我正确的方法我如何在我的连接中添加数据类型而不是你

```
 public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key       
  autoincrement,name,cap,code,Location,Notes,Person);";                 
    db.execSQL(createQuery);        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:33:55.477

使用**名称文本、大写文本，对于整数值使用整数。**

**喜欢 -**

```
public void onCreate(SQLiteDatabase db) 
{
    String createQuery = "CREATE TABLE country (_id integer primary key       
    autoincrement,name text,cap text,code text,Location double,Notes text,Person text);";                 
    db.execSQL(createQuery);        
} 
```

以下数据类型在 Sqlite 中可用。

存储在 SQLite 数据库中（或由数据库引擎操作）的每个值都具有以下存储类之一：

> ```
> NULL. The value is a NULL value.
> 
> INTEGER. The value is a signed integer, stored in 1, 2, 3, 4, 6, or 8 bytes depending on the magnitude of the value.
> 
> REAL. The value is a floating point value, stored as an 8-byte IEEE floating point number.
> 
> TEXT. The value is a text string, stored using the database encoding (UTF-8, UTF-16BE or UTF-16LE).
> 
> BLOB. The value is a blob of data, stored exactly as it was input. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:34:13.130

如下所示：

```
public void onCreate(SQLiteDatabase db) {
String createQuery = "CREATE TABLE country (_id integer PRIMARY KEY, autoincrement 
inreger,name varchar,cap varchar,code varchar,Location varchar,Notes varchar,
Person varchar);";
db.execSQL(createQuery);        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:35:01.357

```
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key       
  autoincrement,name TEXT,cap TEXT,code integer,Location integer,Notes TEXT,Person TEXT);";                 
    db.execSQL(createQuery);        
} 
```

# ios - 如何通过菜单在多个场景之间获取数据

> ID：13817274
> 
> 赞同：0
> 
> 时间：2012-12-11T09:32:07.083
> 
> 标签：ios, objective-c

我有一个带有主菜单的应用程序，一个界面，您可以在其中做一些数学运算以获取带有结果编号的字符串。我希望这个数字在另一个视图中的另一个公式中使用，它不直接链接到这个视图。

我发现的关于如何传递数据的所有东西都是使用 prepareForSegue，但由于我在这个场景和我想要输入数字的场景之间没有一个 segue，我看不出我怎么能使用这个方法。

最好的方法是什么？制作某种数据库并从这里获取数据？什么方法？我对编程没有太多经验，因此将不胜感激详细的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:54:26.580

只需为您的字符串使用用户默认值。

```
// store
[[NSUserDefaults standardUserDefaults] setObject:myString 
    forKey:@"globalMathString"];

// retrieve
NSString *myString = [[NSUserDefaults standardUserDefaults] 
   objectForKey:@"globalMathString"]; 
```

# jsf - JSF 渲染条件

> ID：13817275
> 
> 赞同：1
> 
> 时间：2012-12-11T09:32:18.017
> 
> 标签：jsf

我有以下 GUI 元素：一个下拉菜单，用于选择是要自己输入文本还是要从预定义的文本中进行选择。

```
<h:form id="test">
<div>
  <h:outputLabel value="Please select:" />
  <h:selectOneMenu value="#{myform.selection}">
    <f:selectItem itemValue="1" itemLabel="Input text" />
    <f:selectItem itemValue="2" itemLabel="Select from predefined texts" />
  </h:selectOneMenu>
</div>
<div>
  <h:outputLabel value="Your text: " />
  <h:inputText value="#{myform.inputText}" rendered="#{myform.selection == 1}" />
  <h:selectOneMenu value="#{myform.inputText}" rendered="#{myform.selection == 2}">
    <f:selectItem itemValue="11" itemLabel="Preselected text 1" />
    <f:selectItem itemValue="22" itemLabel="Preselected text 2" />
  </h:selectOneMenu>
</div>
</h:form> 
```

如何正确编程渲染条件？

更新：当表单加载时，1 已经被选中，所以 inputText 被渲染。问题是当我将选择更改为 2 时没有任何反应。我们使用基于 JSF 1.2 的修改后的 JSF 库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:26:14.787

如果您不喜欢使用`a4j`库，您可以`show/hide`使用`javascript`如下所示的组件。将`onchange`事件添加到您的第一个`selectOneMenu`

```
<h:selectOneMenu value="#{myform.selection}" onchange="myFunction(this.value)"> 
```

将`Id`s 添加到您的`textBox`和`selectOneMenu`中，如下所示。

```
<h:inputText value="#{myform.inputText}" rendered="#{myform.selection == 1}" id="myText"/>
<h:selectOneMenu value="#{myform.inputText}" rendered="#{myform.selection == 2}" id="mySelectMenu"> 
```

最后你的`javascript`功能应该如下。

```
<script>
    function myFunction(selection) {
        if(selection == 1) {
            document.getElementById("test:myText").style.display = "";
            document.getElementById("test:mySelectMenu").style.display = "none";
        } else {
            document.getElementById("test:myText").style.display = "none";
            document.getElementById("test:mySelectMenu").style.display = "";
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:03:24.663

如果您没有任何限制，我建议您使用`a4j`添加 AJAX 功能。当您使用 JSF 1.2 时，您需要使用[RichFaces 3.3.X](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/)库并将此标记添加到您的 JSF 文件中：

```
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%> 
```

`a4j:support`然后使用这种方式修改您的代码：

```
<h:form id="test">
<div>
  <h:outputLabel value="Please select:" />
  <h:selectOneMenu value="#{myform.selection}">
    <f:selectItem itemValue="1" itemLabel="Input text" />
    <f:selectItem itemValue="2" itemLabel="Select from predefined texts" />
    <a4j:support event="onchange" reRender="textSection" ajaxSingle="true"/>
  </h:selectOneMenu>
</div>
<div>
  <h:outputLabel value="Your text: " />
  <a4j:outputPanel id="textSection">
      <h:inputText value="#{myform.inputText}" rendered="#{myform.selection == 1}" />
      <h:selectOneMenu value="#{myform.inputText}" rendered="#{myform.selection == 2}">
        <f:selectItem itemValue="11" itemLabel="Preselected text 1" />
        <f:selectItem itemValue="22" itemLabel="Preselected text 2" />
      </h:selectOneMenu>
  </a4j:outputPanel>
</div>
</h:form> 
```

当用户从 selecOneMenu 更改选择时`a4j:outputPanel`，现在包装您要显示/隐藏的组件的 将重新渲染并`rendered`重新计算属性。

# c++ - Boost几何intersection_inserter 不工作

> ID：13817282
> 
> 赞同：0
> 
> 时间：2012-12-11T09:32:55.490
> 
> 标签：c++, boost, polygon, boost-geometry

我正在使用 boost 几何库 C++。该代码在旧版本的 Eclipse（从 pythonxy 安装）中运行良好。现在我安装最新版本的 eclipse 和 Mingw (x86_64-w64-mingw32)。错误出现在函数 intersection_inserter() 和 boost::geometry::enrich_intersection_points() 中。

```
 typedef std::vector<polygon_2d > polygon_list;
    polygon_list v;
    intersection_inserter<polygon_2d>(square, *polygon_iterator,
                                            std::back_inserter(v)); 
```

错误如下：

```
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.1/
../../../../include/boost/geometry/algorithms/intersection.hpp:293:27:
required from 'OutputIterator boost::geometry::intersection_inserter(
const Geometry1&, const Geometry2&, OutputIterator) [with GeometryOut = 
boost::geometry::polygon<boost::geometry::point_xy<double,  
boost::geometry::cs::cartesian> >; Geometry1 = 
boost::geometry::box<boost::geometry::point_xy<double, 
boost::geometry::cs::cartesian> >; Geometry2 = 
boost::geometry::polygon<boost::geometry::point_xy<double,
boost::geometry::cs::cartesian> >; OutputIterator = 
std::back_insert_iterator<std::vector<boost::geometry::polygon<boost::
geometry::point_xy<double, boost::geometry::cs::cartesian> > > >]'
..\src\VoronoiPolygons.cpp:397:85:   required from here
c:\program files\mingw64\bin\../lib/gcc/x86_64-w64-
mingw32/4.7.1/../../../../include/boost/geometry/algorithms/overlay/
enrich_intersection_points.hpp:198:20: error: 'compare_distances' was not
declared in this scope, and no declarations were found by 
argument-dependent lookup at the point of instantiation [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:55:17.360

`compare_distances`目前没有在提到的行上使用，也没有在整个文件中使用。您使用的是（非常）旧版本的 Boost 吗？

可能是的，我建议升级。

# jquery - 实时编辑滑动html菜单

> ID：13817283
> 
> 赞同：1
> 
> 时间：2012-12-11T09:33:02.370
> 
> 标签：jquery, html, ajax, innerhtml, slidedown

我正在使用一个滑动菜单（选择/对象 html 之一），它是通过使用 jsp 页面从数据库中获取数据而动态生成的。

我还有一个输入文本字段，我可以在其中从滑动菜单中搜索内容。我想写一个包含在我的菜单中的词的词根，我的菜单必须“调整大小”显示我写过的所有带有词根的项目，只有那些项目。

我不能使用服务器端操作（比如通过 post 发送数据），但我需要解决这个客户端（因为我需要立即得到这个结果）。

我实际上已经使用 javascript 解决了这个问题，但是这个解决方案存在一些性能问题，因为我必须使用 IE 8。

有没有使用 JQuery 或 Ajax 的类似解决方案？

这是类似于我的代码的内容：

HTML：

```
<select multiple id="testSelect">
    <option>test</option>
    <option>temp</option>
    <option>cast</option>
    <option>dest</option>
    <option>inst</option>
</select>

<input type="text" value="" onkeyup="searhSelect(this)" />​ 
```

每次按键时都会调用searhSelect 函数（当用户实际释放键时），并将过滤#testSelect 对象。

JS：

```
var optionsList;
function searhSelect(el) {
    var select = document.getElementById('testSelect');
    if(!optionsList) {        
        optionsList = select.cloneNode(true);  //copy select to a variable for future use      
    }
    select.innerHTML = "";//remove all options.

    for(var i =0; i < optionsList.options.length; i++) {
        var opt = optionsList.options[i];
        if(opt.innerHTML.indexOf(el.value) != -1) {
            select.appendChild(opt.cloneNode(true));
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T12:37:24.383

试试这样的代码：

```
var optionsList = [];
function searhSelect(el) {
    var select = document.getElementById('testSelect');

    if(optionsList.length == 0) {        
        for(var i = 0; i < select.options.length; i++)
            optionsList[i] = {key:select.options[i].value,value:select.options[i].innerHTML}; //copy select to a variable for future use      
    }   
    //if(el.value.length > 2) {
        var tmp = "<select id=\"testSelect\" mulitple=\"multiple\" size=\"4\">";
        for(var i =0; i < optionsList.length; i++) {
            var opt = optionsList[i];
            if(opt.value.indexOf(el.value) != -1) {                 
                tmp += ' <option value="' + opt.key + '" >' + opt.value + '</option> ';                        
            }         
        }   
        document.getElementById('test').innerHTML = tmp + "</select>";
    //}

} 
```

HTML：

```
<div id="test">
   <select multiple id="testSelect">
      <option>test</option>
      <option>temp</option>
      <option>cast</option>
      <option>dest</option>
      <option>inst</option>
      <!-- in my test same options you see above were copy/pasted many times. I had little more than 10k  options->
   </select>
</div> 
```

我已经删除了所有的 clone/appendChild，使用包含值和文本字段的对象推送所有元素 int 数组，最重要的是，现在使用 innerHTML 创建选项。另外，请注意 select 现在被另一个 div 包裹。而不是使用 select 的 innerHTML 并简单地设置选项 HTML，而是创建了带有整个 select HTML 的字符串 ( `var tmp = "<select id=\"testSelect\" mulitple=\"multiple\" size=\"4\">";`)。这需要作为IE的[此错误的解决方法。](http://support.microsoft.com/kb/276228/en-us)

在您当前的实现中，一旦找到每个选项，就会一一添加。这样 IE 将在每次添加新选项时呈现元素 ()。但是上面的代码只会强制渲染一次 - 当所有选项都被定义时。不幸的是，这只是部分帮助。它比来自问题的代码工作得更快，但仍然需要大约 10 秒（与旧代码的 20-30 秒相比）来呈现新的选择元素（`document.getElementById('test').innerHTML = tmp + "</select>";`- 此时它正在冻结浏览器 10 秒）

我不认为您可以在不进行一些全局更改的情况下使其更快（例如，使用复选框自定义多选以选择一个元素，以及使用 display:block/none 显示/隐藏元素）。可能的解决方案 - 仅当过滤元素数量相对较少时才更新元素。例如 - 当要搜索的值的长度超过 2 个字符时（见注释掉`//if(el.value.length > 2) {`）。但是要使用它，当前的实现需要额外的编码（至少，一旦用户从输入字段中删除一些字符，完整的列表应该再次显示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:46:46.257

我猜你正在尝试做一些类似自动完成的事情。你试过[http://api.jqueryui.com/autocomplete](http://api.jqueryui.com/autocomplete)吗？

或者您只是想过滤掉 SELECT 选项？然后我想隐藏/禁用它们而不是克隆它们更容易。

# erlang - 删除待处理的 Mnesia 事务

> ID：13817288
> 
> 赞同：4
> 
> 时间：2012-12-11T09:33:20.827
> 
> 标签：erlang, mnesia

我有一个 Mnesia 数据库，当我重新启动我的应用程序时，我在待处理的事务中收到一个错误 (badarg)。我认为即将插入无效值。如何检查待处理事务以查找错误值是什么，以及如何在不删除整个数据库的情况下从待处理事务中删除该值。

**更新：**

崩溃报告如下：

```
{badarg, [{ets, insert, [{image_db...}, {image_db...}...] 
```

`image_db`我插入数据库的结构在哪里。不幸的是，要插入的项目列表太长了，我看不到损坏的值。

该命令`mnesia:info()`在启动时向我显示了 1 个中止的事务。

**更新 2：**

如何读取 mnesia db 目录中的二进制日志文件？

**更新 3：**

这是一个本地单节点 Mnesia 表。我这样初始化它：

```
mnesia:stop(),
catch(mnesia:create_schema([node()])),
mnesia:start(),
timer:sleep(1000), % vital but ugly as hell
mnesia:create_table(?DBNAME, [{disc_copies, [node()]}, {type, ordered_set},
                              {attributes, record_info(fields, image_db)}]),
mnesia:wait_for_tables(?DBNAME, 1000), 
```

记录`image_db`如下所示：

```
-type now_time() :: {integer(), integer(), integer() }.

-record(image_db, {time :: now_time(),
                   path :: string(),
                   size :: integer() }). 
```

问题不时出现，我认为在将无效记录插入数据库后。我现在添加了一个记录验证功能来避免这种情况，但问题仍然存在，如何通过删除存储事务中的无效值来恢复数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:57:31.830

我想知道您的 mnesia 是否是一个多节点环境，如果是这样，您是否在等待表上线（可以这么说）并在开始插入它们之前获得同步？你能给我们更多关于你的配置的信息吗？另外，这种情况是一直发生还是偶尔发生？

# ruby - 在 rhomobile 控制器中添加新视图

> ID：13817290
> 
> 赞同：1
> 
> 时间：2012-12-11T09:33:26.490
> 
> 标签：ruby, rhomobile, rhodes

我有[这个](https://stackoverflow.com/questions/8601582/how-to-add-erb-file-in-existing-model-in-rhomobile)。

我在哪里可以找到`config/routes.rb`以及如何`ApplicationController`在 Rhomobile 中使用？

如何向现有的 rhomobile 控制器添加视图？

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:29:16.780

*Rhomobile 中不存在*config/routes.rb 。*如果我没记错，那么它就存在于rails中。*

 *其次，“application.rb”的工作方式类似于 Rhomobile 中的“ApplicationController”。

如果您想向现有模型添加新视图，只需将新方法（def）添加到控制器（.rb）中，并添加与新方法同名的新视图（.erb）。

假设在 app/Demo 中存在一个模型 DemoController.rb。你可以像添加新方法一样

```
class DemoController < Rho::RhoController
  ...
  def index
  end

  def new_method
  end

end 
```

要从索引视图导航到 new_method，您可以编写

```
<button onclick="location.href='/app/Demo/new_method'">new method</button> 
```

或者

```
<button onclick="location.href='<%= url_for :action => :new_method %>'"
>new method</button> 
```*

# php - 哪个日期比所选日期更远

> ID：13817295
> 
> 赞同：0
> 
> 时间：2012-12-11T09:33:50.653
> 
> 标签：php, date

我如何检查哪个日期比另一个更远。对于我的谷歌图表，我需要距离其他日期最长的日期，因为我的图表中有两条线。因此，如果第一个日期范围较短，那么另一个我需要获取具有最长范围的日期。

这是我尝试过的，但似乎没有用..

```
$date1 = '01-01-2013';
$date2 = '11-11-2014';

if(date("d-m-Y", strtotime($date1)) < date("d-m-Y", strtotime($date2))){
echo date("d-m-Y", strtotime($date1));
}else{
echo date("d-m-Y", strtotime($date2));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:37:27.050

```
$date1 = '01-01-2013';
$date2 = '11-11-2014';

if( strtotime($date1) < strtotime($date2) ) {
 echo "yes";
} else {
 echo "no";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:37:31.317

这应该工作：

```
$date1 = '01-01-2013';
$date2 = '11-11-2014';
if(strtotime($date1) < strtotime($date2)){
echo $date1;
}else{
echo $date2;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:43:08.920

您的问题和代码略有不同，您问哪个最高，但比较哪个最低！

无论如何，这就是我会回应最高的方式：

```
<?php

    $date1 = '01-01-2013';
    $date2 = '11-11-2014';

    echo (strtotime($date1) >= strtotime($date2)) ? $date1 : $date2; 
```

或者，如果您需要捕获最高值：

```
<?php

    $date1 = '01-01-2013';
    $date2 = '11-11-2014';

    $highest_date = (strtotime($date1) >= strtotime($date2)) ? $date1 : $date2; 
```

# android - Android 意图过滤器路径模式

> ID：13817296
> 
> 赞同：4
> 
> 时间：2012-12-11T09:33:50.717
> 
> 标签：android, android-intent

我想做一个可以检测像这样的网址的意图过滤器：

```
http://192.168.0.xx/playlist/_definst_/iphone.smil/list.m3u8?token=XXXXXXX 
```

到目前为止我试过这个，但没有运气。

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW" />

        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />

        <data
            android:host="*"
            android:pathPattern=".*\\*.m3u8.*"
            android:scheme="http" />
    </intent-filter> 
```

我错过了什么？
需要你的帮助。
这对我有用。希望它也有助于其他人。

```
 <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\.m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\.m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\..*\\..m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\..*\\..*\\.m3u8" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:56:13.943

试试这个，

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="http" />
    <data android:host="*" />
    <data android:mimeType="*/*" />
    <data android:pathPattern="*.*\\.m3u8" />
</intent-filter> 
```

或者，有了这个

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />        
    <category android:name="android.intent.category.BROWSABLE" />        
    <data android:scheme="http" />
    <data android:host="*" />
    <data android:pathPattern=".*\\.m3u8" />
</intent-filter> 
```

这有效：

```
 <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\.m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\.m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\..*\\..m3u8" />
        <data android:scheme="http" android:host="*"
            android:pathPattern=".*\\..*\\..*\\..*\\.m3u8" /> 
```

# c# - 使用 XElement 检索 Xml 属性

> ID：13817300
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:33:55.690
> 
> 标签：c#, linq-to-xml

如何从`XML`下面读取值是`XML`我正在阅读的我想读取 ID 和答案的值

```
<d:Answer xmlns:d="http://www.test.com/" d:title="abcd">
  <d:question id="2.1" answer="test"  />
  <d:question id="2.2" answer="test"  />
  <d:question id="2.3" answer="Yes"  />
</d:Answer> 
```

我正在使用 Xelement 读取值但无法找到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:17:52.153

试试这个：

```
var xml = @"<d:Answer xmlns:d=""http://www.test.com"" d:title=""abcd"">
  <d:question id=""2.1"" answer=""test""  />
  <d:question id=""2.2"" answer=""test""  />
  <d:question id=""2.3"" answer=""Yes""  />
</d:Answer>";

XNamespace ns = "http://www.test.com";
var doc = XDocument.Parse(xml);
var question = doc.Descendants(ns + "question")
                  .FirstOrDefault(x => (string)x.Attribute("id") == "2.1"); 
```

# angularjs - TideSDK 上的 AngularJS 输出 $locationWatch 错误

> ID：13817301
> 
> 赞同：1
> 
> 时间：2012-12-11T09:33:57.600
> 
> 标签：angularjs, chromium, tidesdk

我正在尝试在 TideSDK 中实现一个 AngularJS 项目。但是，在运行程序时，我收到以下错误：

> [09:15:57:982] [Ti.API] [错误] 达到 10 个 $digest() 迭代。中止！
> 观察者在最后 5 次迭代中触发：[["fn: $locationWatch; newVal: 29; oldVal: 28"], ["fn: $locationWatch; newVal: 30; oldVal: 29"],["fn: $locationWatch; newVal: 31; oldVal: 30"],["fn: $locationWatch; newVal: 32; oldVal: 31"],["fn: $locationWatch; newVal: 33; oldVal: 32"]]

我尝试了与此[线程](https://groups.google.com/forum/#!msg/angular/mRIo8LaTh4M/dvV4y_SqvKEJ)相关的修复，但没有效果。

AFAIK，潮汐基于最新的 Chromium。我想他们会很好地合作。

这一切都始于我在 Angular 中实现路由系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:12:43.443

TideSDK 目前仍在使用非常旧的 webkit 版本。它将很快升级到带有 TideSDK 版本 1.4 的最新版本的 webkit。

# f# - 避免通用使用返回两个函数的函数的值限制错误

> ID：13817302
> 
> 赞同：2
> 
> 时间：2012-12-11T09:34:03.353
> 
> 标签：f#, type-inference, fparsec

我想使用带有通用 Expr 联合的 FParsec createParserForwardedToRef 函数，如下所示：

```
type Expr<'Term> =
        | Unary of Operator * Expr<'Term>
        | Binary of Operator * Expr<'Term> * Expr<'Term>
        | Ternary of Operator * Expr<'Term> * Expr<'Term> * Expr<'Term>
        | Term of 'Term
let expr, exprR = createParserForwardedToRef<Expr<'T>,unit>() 
```

我无法摆脱价值限制错误。我不能变成`expr`CLR 函数，更不用说`exprR`.

我通常会如何处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:55:34.207

棘手的一点是通用的`Expr<'T>`。您可以创建一个返回`expr`解析器的函数，并让解析器的后续使用确定特定类型`Expr<'T>`：

```
let expr() =
    // initially exprRef holds a reference to a dummy parser 
    let expr, exprRef = createParserForwardedToRef()

    // create other union-case parsers as inner or outer functions
    let unary() = ...
    let binary = ...
    let ternary() = ...
    let term() = ...

    // replace dummy parser reference in exprRef
    do exprRef := choice [unary(); binary(); ternary(); term()]
    expr 
```

您还可以将原始解析器（例如`term`参数）传递给`expr`函数。在这种情况下，类型`expr`取决于传递的不同类型的解析器，例如`pstring`，`pfloat`。

FParsec 教程有一个关于[F# 值限制](http://www.quanttec.com/fparsec/tutorial.html#fs-value-restriction)的部分，这也可能会有所帮助。

# java - Liferay kaleo 工作流程不工作

> ID：13817304
> 
> 赞同：3
> 
> 时间：2012-12-11T09:34:15.147
> 
> 标签：java, eclipse, liferay, liferay-6

我正在使用 Liferay 6.1.1 CE。通过在 xml 文件中编写定义并将其加载到服务器，我创建了一个多级 kaleo 工作流。它工作正常。

我的问题在于角色分配。我创建了 2 个角色，项目经理和 hos，也将此角色分配给了两个用户。

但工作流程不起作用。当我将门户内容审阅者角色授予此用户时，它可以工作。我的第一个任务是复习，第二个任务是推荐。

帮助我..提前谢谢。这是我的代码

```
<?xml version="1.0"?>
<workflow-definition
xmlns="urn:liferay.com:liferay-workflow_6.1.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="urn:liferay.com:liferay-workflow_6.1.0
http://www.liferay.com/dtd/liferay-workflow-definition_6_1_0.xsd">
<name>leave workflow</name>
<description>A sample multilevel approver can approve a workflow
content.</description>
<version>1</version>
<state>
<name>created</name>
<metadata>
        <![CDATA[{"xy":[36,51]}]]>
    </metadata>
<initial>true</initial>
<transitions>
    <transition>
    <name>review</name>
    <target>review</target>
    <default>true</default>
    </transition>
</transitions>
</state>
  <task>
    <name>review</name>
    <metadata>
        <![CDATA[{"xy":[168,36]}]]>
    </metadata>
    <actions>
        <notification>
            <name>Review Notification</name>
            <template>You have a new submission waiting for your review in the workflow.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <execution-type>onAssignment</execution-type>
        </notification>
        <notification>
            <name>Review Completion Notification</name>
            <template>
                Your submission has been reviewed and the reviewer has applied the following ${taskComments}.</template>
            <template-language>freemarker</template-language>
            <notification-type>email</notification-type>
            <recipients>
                <user />
            </recipients>
            <execution-type>onExit</execution-type>
        </notification>
    </actions>
    <assignments>
        <roles>

            <role>
                <role-type>regular</role-type>
                <name>Project Manager</name>
            </role>

        </roles>
    </assignments>
    <transitions>
        <transition>
            <name>approve</name>
            <target>recommended</target>
        </transition>
        <transition>
            <name>reject</name>
            <target>update</target>
            <default>false</default>
        </transition>
    </transitions>
 </task>

 <task>
    <name>recommended</name>
    <metadata>
        <![CDATA[{"xy":[168,36]}]]>
    </metadata>
    <actions>
        <notification>
            <name>Review Notification</name>
            <template>You have a new submission waiting for your review in the workflow.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <execution-type>onAssignment</execution-type>
        </notification>
        <notification>
            <name>Review Completion Notification</name>
            <template>
                Your submission has been reviewed and the reviewer has applied the following ${taskComments}.</template>
            <template-language>freemarker</template-language>
            <notification-type>email</notification-type>
            <recipients>
                <user />
            </recipients>
            <execution-type>onExit</execution-type>
        </notification>
    </actions>
    <assignments>
        <roles>

            <role>
                <role-type>regular</role-type>
                <name>Hos</name>
            </role>

        </roles>
    </assignments>
    <transitions>
        <transition>
            <name>approve</name>
            <target>approved</target>
        </transition>
        <transition>
            <name>reject</name>
            <target>update</target>
            <default>false</default>
        </transition>
    </transitions>
</task>

    <task>
    <name>update</name>
    <metadata>
        <![CDATA[{"transitions":{"resubmit":{"bendpoints":[[303,140]]}},"xy":[328,199]}]]>
    </metadata>
    <actions>
        <action>
            <name>reject</name>
            <script>
                <![CDATA[Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus

 (Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("denied"), workflowContext);
                    Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus

 (Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("pending"), workflowContext);
                ]]>
            </script>
            <script-language>javascript</script-language>
            <execution-type>onAssignment</execution-type>
        </action>
        <notification>
            <name>Creator Modification Notification</name>
            <template>Your submission was rejected by a reviewer, please modify and resubmit.</template>
            <template-language>text</template-language>
            <notification-type>email</notification-type>
            <execution-type>onAssignment</execution-type>
        </notification>
    </actions>
    <assignments>
        <user />
    </assignments>
    <transitions>
        <transition>
            <name>resubmit</name>
            <target>review</target>
        </transition>
    </transitions>
</task>
<state>
    <name>approved</name>
    <metadata>
        <![CDATA[
            {"xy":[380,51]}
        ]]>
    </metadata>
    <actions>
        <action>
            <name>approve</name>
            <script>
                <![CDATA[
                    Packages.com.liferay.portal.kernel.workflow.WorkflowStatusManagerUtil.updateStatus

  (Packages.com.liferay.portal.kernel.workflow.WorkflowConstants.toStatus("approved"), workflowContext);
                ]]>
            </script>
            <script-language>javascript</script-language>
            <execution-type>onEntry</execution-type>
        </action>
    </actions>
</state>
 </workflow-definition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:22:42.997

Add all the users in same group. Nothing wrong with your workflow.

Also check permissions

# c# - 如何引用同一数据模板中每个组之前生成的视图框？

> ID：13817306
> 
> 赞同：2
> 
> 时间：2012-12-11T09:34:21.310
> 
> 标签：c#, xaml, windows-8

我正在使用 C# 和 XAML 开发一个 Windows 8 应用程序。在我的 DataTemplate 中，我有 6 个在每个组之前自动生成的视图框。我需要指定在每个组之前生成哪一个。我不希望他们都出现在每个小组之前。我将提供屏幕截图和代码，以便更清晰。

```
 <Style x:Key="GroupItemStyle1" TargetType="GroupItem">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="GroupItem">
                    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="431*"/>
                                <ColumnDefinition Width="429*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <ContentControl x:Name="HeaderContent" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Content="{TemplateBinding Content}" IsTabStop="False" Margin="{TemplateBinding Padding}" TabIndex="0" Grid.Column="1"/>
                            <ItemsControl x:Name="ItemsControl" IsTabStop="False" ItemsSource="{Binding GroupItems}" Grid.Row="1" TabIndex="1" TabNavigation="Once" Grid.Column="1">
                                <ItemsControl.ItemContainerTransitions>
                                    <TransitionCollection>
                                        <AddDeleteThemeTransition/>
                                        <ContentThemeTransition/>
                                        <ReorderThemeTransition/>
                                        <EntranceThemeTransition IsStaggeringEnabled="False"/>
                                    </TransitionCollection>
                                </ItemsControl.ItemContainerTransitions>
                            </ItemsControl>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,-350,0,0" Visibility="Visible" x:Name="Facebook">
                                <Grid>
                                    <Grid Name="backgroundGrid" Width="32" Height="32" Visibility="Visible"/>
                                    <Path Data="F1M-1775.32,-68.9708L-1831.47,-68.9708C-1833.27,-68.9708,-1834.73,-67.3745,-1834.73,-65.4058L-1834.73,-10.1649C-1834.73,-8.19482,-1833.27,-6.59973,-1831.47,-6.59973L-1802.47,-6.59973 -1802.47,-32.2261 -1809.5,-32.2261 -1809.5,-40.5503 -1802.47,-40.5503 -1802.47,-45.5282C-1802.47,-50.9435,-1798.08,-55.3315,-1792.66,-55.3315L-1783.74,-55.3315 -1783.74,-47.0099 -1787.86,-47.0099C-1789.89,-47.0099,-1791.53,-45.3667,-1791.53,-43.3407L-1791.53,-40.5503 -1783.74,-40.5503 -1783.74,-32.2261 -1791.53,-32.2261 -1791.53,-6.59973 -1775.32,-6.59973C-1773.52,-6.59973,-1772.06,-8.19482,-1772.06,-10.1649L-1772.06,-65.4058C-1772.06,-67.3745,-1773.52,-68.9708,-1775.32,-68.9708" Stretch="Uniform" Fill="#3b5998" Width="32" Height="32" HorizontalAlignment="Left"  Grid.Row="1" VerticalAlignment="Top" Margin="0,4,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,-270,0,0">
                                <Grid>
                                    <Grid Name="backgroundGrid1" Width="32" Height="32" Visibility="Visible">
                                        <Rectangle Fill="#FFFFF9F9" Name="Rect" Visibility="Visible" />
                                    </Grid>
                                    <Path Data="M-1777.84,-735.739C-1779.26,-736.059 -1779.02,-735.992 -1777.83,-736.24 -1774.63,-736.906 -1772.58,-737.916 -1772.35,-739.471 -1774.46,-738.8 -1776.62,-738.775 -1778.92,-739.183 -1779.98,-739.371 -1779.7,-739.271 -1779.93,-740.311 -1781.63,-747.819 -1787.53,-751.349 -1793.08,-751.454 -1786.29,-752.91 -1786.07,-755.831 -1792.48,-753.538 -1790.13,-754.984 -1789.89,-756.332 -1793.3,-754.722 -1793.91,-754.412 -1794.7,-753.83 -1795.24,-753.394 -1794.01,-755.809 -1795.09,-755.113 -1797.2,-752.919 -1800.02,-749.981 -1802.47,-745.925 -1804.47,-739.667 -1808.83,-744.16 -1816.2,-747.195 -1823.59,-750.022 -1825.24,-750.655 -1825.66,-751.22 -1825.25,-749.015 -1824.82,-746.675 -1823.12,-744.559 -1820.27,-742.834 -1821.23,-742.786 -1822.31,-742.674 -1823.15,-742.462 -1824,-742.244 -1823.96,-742.287 -1823.71,-741.447 -1822.94,-738.91 -1820.73,-737.018 -1817.1,-735.981 -1818.35,-735.883 -1819.57,-735.599 -1820.45,-734.955 -1821.26,-734.37 -1821.26,-734.311 -1820.76,-733.551 -1819.46,-731.546 -1817.23,-730.438 -1813.73,-730.403 -1817.43,-728.518 -1816.22,-725.026 -1811.56,-725.026 -1818.67,-717.951 -1828.26,-719.07 -1834.73,-724.146 -1824.87,-710.215 -1805.21,-709.103 -1791.71,-716.767 -1785.95,-720.032 -1781.41,-725.233 -1779.42,-732.494 -1776.24,-732.533 -1773.67,-733.483 -1772.06,-735.339 -1774.13,-735.243 -1776.09,-735.345 -1777.84,-735.739" Stretch="Uniform" Fill="#FF00C3F8" Width="24" Height="24" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,-190,0,0">
                                <Grid>
                                    <Grid Name="backgroundGrid3" Width="32" Height="32" Visibility="Collapsed" />
                                    <Path Data="M0.80001831,19.480004L14.232019,19.480004 14.232019,59.898005 0.80001831,59.898005z M47.20809,18.530005C56.037544,18.530005,62.666962,24.309214,62.666962,36.717749L62.666962,59.895002 49.237976,59.895002 49.237976,38.27762C49.237976,32.838213 47.288162,29.138709 42.428396,29.138709 38.718697,29.138709 36.508891,31.638407 35.538989,34.04815 35.178906,34.908031 35.098956,36.117846 35.098956,37.327662L35.098956,59.895002 21.659961,59.895002C21.659961,59.895002,21.83988,23.269423,21.659961,19.479842L35.098956,19.479842 35.098956,25.20913C35.068929,25.249164,35.039024,25.299207,35.008997,25.339119L35.098956,25.339119 35.098956,25.20913C36.87886,22.449453,40.068577,18.530005,47.20809,18.530005z M7.6005096,0C12.200819,0 15.031009,3.0208731 15.111014,6.9820194 15.111014,10.863142 12.200819,13.964039 7.520504,13.964039L7.4304981,13.964039C2.9201946,13.964039 0,10.863142 0,6.9820194 0,3.0208731 3.0102024,0 7.6005096,0z" Stretch="Uniform" Fill="#FF5BA8CF" Width="22" Height="22" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,-110,0,0">
                                <Grid>
                                    <Grid Name="backgroundGrid4" Width="32" Height="32" Visibility="Collapsed" />
                                    <Path Data="M21.412441,42.860001C21.906038,42.860001 22.150736,42.860001 22.542833,42.905701 26.253611,45.505823 27.863001,46.804134 27.863001,49.263756 27.863001,52.249481 25.374716,54.476002 20.679445,54.476002 15.451578,54.476002 12.082,52.013779 12.082,48.593151 12.082,45.17252 15.20158,44.018909 16.281073,43.629606 18.33576,42.9512 20.972343,42.860001 21.412441,42.860001z M44.261799,29.53775L44.261799,36.900175 36.923302,36.900175 36.923302,41.919827 44.261799,41.919827 44.261799,49.229549 49.242298,49.229549 49.242298,41.919827 56.6161,41.919827 56.6161,36.900175 49.242298,36.900175 49.242298,29.53775z M19.019857,21.360001C23.074421,21.360001 25.176001,26.756422 25.176001,30.235055 25.176001,31.093163 25.077101,32.631577 23.961012,33.744287 23.17342,34.513794 21.860832,35.101 20.629143,35.101 16.432682,35.101 14.512,29.74475 14.512,26.51372 14.512,25.263708 14.764598,23.961036 15.59419,22.961026 16.381783,21.985007 17.75017,21.360001 19.019857,21.360001z M22.097799,19.7377C19.4636,19.7377 16.131599,20.138817 13.3555,22.410223 11.2449,24.182296 10.2136,26.650281 10.2136,28.869757 10.2136,32.62952 13.1564,36.444582 18.3361,36.444582 18.824301,36.444582 19.362101,36.393881 19.906401,36.348181 19.656401,36.931576 19.4104,37.417171 19.4104,38.225763 19.4104,39.725748 20.1915,40.638639 20.879,41.499229 18.6759,41.650127 14.5691,41.893826 11.5483,43.723007 8.6563702,45.411791 7.7761202,47.874165 7.7761202,49.604546 7.7761202,53.172211 11.1929,56.493877 18.281401,56.493877 26.6877,56.493877 31.136801,51.917023 31.136801,47.385868 31.136801,44.068203 29.1877,42.422321 27.038,40.638639L25.281401,39.285652C24.7423,38.859858 24,38.275263 24,37.217974 24,36.163284 24.7423,35.479691 25.375099,34.850798 27.4298,33.268114 29.4858,31.494631 29.4858,27.929667 29.4858,24.263715 27.129,22.410224 26.006599,21.336014L29.035299,21.336014 32.168098,19.7377z M0,14.769001L64,14.769001 64,51.46003C64,58.354458,58.355499,63.999001,51.457199,63.999001L12.5432,63.999001C5.6445298,63.999001,0,58.354458,0,51.46003z M12.543236,0L51.457134,0C58.173214,9.5367432E-07,63.6563,5.3606014,63.944,12L0.055000305,12C0.34406164,5.3606014,5.8270831,9.5367432E-07,12.543236,0z" Stretch="Uniform" Fill="#c93f2f" Width="32" Height="32" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,-30,0,0">
                                <Grid>
                                    <Grid Name="backgroundGrid5" Width="32" Height="32" Visibility="Visible">
                                        <Rectangle Fill="#FFFFF9F9" Name="Rect1" Visibility="Visible" />
                                    </Grid>
                                    <Path Data="F1M444.262,749.255L444.262,756.674C444.262,757.137 444.166,757.561 443.968,757.949 443.773,758.339 443.504,758.68 443.166,758.973 442.827,759.268 442.437,759.495 441.991,759.665 441.546,759.833 441.064,759.919 440.549,759.919L425.385,759.919C424.879,759.919 424.403,759.833 423.958,759.665 423.512,759.495 423.119,759.268 422.783,758.973 422.447,758.68 422.176,758.339 421.978,757.949 421.78,757.561 421.684,757.137 421.684,756.674L421.684,749.255C421.684,748.814 421.78,748.395 421.978,747.995 422.176,747.596 422.447,747.251 422.783,746.964 423.119,746.678 423.512,746.445 423.958,746.271 424.403,746.098 424.879,746.01 425.385,746.01L440.549,746.01C441.054,746.01 441.53,746.098 441.984,746.271 442.434,746.445 442.827,746.678 443.166,746.964 443.504,747.251 443.773,747.596 443.968,747.995 444.166,748.395 444.262,748.814 444.262,749.255z M426.4,757.501L426.4,749.675 428.26,749.675 428.26,748.493 423.239,748.493 423.239,749.643 424.848,749.643 424.848,757.501 426.4,757.501z M427.158,739.297L425.08,734.752 426.89,734.752 427.924,738.149 428.955,734.752 430.762,734.752 428.814,739.297 428.814,744.591 427.158,744.591 427.158,739.297z M432.046,750.825L430.491,750.825 430.491,755.002C430.491,755.304 430.494,755.54 430.507,755.701 430.517,755.867 430.494,755.971 430.439,756.015 430.392,756.195 430.262,756.327 430.038,756.412 429.825,756.495 429.658,756.377 429.541,756.047 429.517,756.003 429.515,755.893 429.528,755.719 429.538,755.544 429.541,755.316 429.541,755.033L429.51,750.825 427.955,750.825 427.991,754.968C427.991,755.294 427.984,755.566 427.973,755.786 427.963,756.006 427.965,756.171 427.991,756.285 428.012,756.467 428.033,756.659 428.056,756.868 428.077,757.075 428.184,757.243 428.379,757.367 428.559,757.479 428.77,757.537 429.01,757.537 429.254,757.537 429.491,757.495 429.721,757.416 429.955,757.336 430.166,757.229 430.364,757.089 430.559,756.949 430.705,756.797 430.793,756.64L430.762,757.467 432.046,757.501 432.046,750.825z M430.624,739.991C430.624,739.372 430.684,738.857 430.793,738.455 430.931,738.037 431.148,737.739 431.455,737.558 431.76,737.333 432.148,737.219 432.622,737.219 433.038,737.219 433.385,737.288 433.669,737.423 433.95,737.536 434.181,737.732 434.361,738.015 434.497,738.218 434.598,738.447 434.666,738.708 434.731,738.989 434.767,739.367 434.767,739.841L434.767,741.613C434.767,742.257 434.731,742.718 434.666,743.002 434.64,743.26 434.53,743.547 434.325,743.864 434.124,744.144 433.905,744.33 433.669,744.421 433.385,744.557 433.067,744.623 432.702,744.623 432.335,744.623 431.991,744.567 431.692,744.454 431.408,744.364 431.197,744.2 431.067,743.966 430.931,743.782 430.817,743.531 430.726,743.202 430.661,742.897 430.624,742.438 430.624,741.817L430.624,739.991z M432.01,742.747C432.01,742.926 432.077,743.088 432.215,743.23 432.348,743.369 432.512,743.439 432.702,743.439 432.882,743.439 433.043,743.373 433.187,743.236 433.327,743.104 433.395,742.938 433.395,742.747L433.395,739.079C433.395,738.876 433.327,738.706 433.187,738.566 433.043,738.424 432.882,738.352 432.702,738.352 432.523,738.352 432.361,738.424 432.223,738.566 432.083,738.706 432.01,738.876 432.01,739.079L432.01,742.747z M437.064,755.592L437.064,752.127C437.064,751.463 436.83,750.989 436.356,750.708 436.2,750.618 436.015,750.572 435.814,750.572 435.439,750.572 435.015,750.747 434.53,751.096L434.53,748.493 432.976,748.493 432.976,757.434 434.26,757.4 434.361,756.843C434.778,757.193 435.155,757.407 435.484,757.486 435.819,757.563 436.098,757.533 436.33,757.391 436.562,757.252 436.741,757.021 436.869,756.699 436.999,756.378 437.064,756.007 437.064,755.592z M435.189,751.434C435.369,751.434 435.528,751.488 435.671,751.596 435.812,751.702 435.882,751.824 435.882,751.958L435.882,755.881C435.882,756.015 435.812,756.132 435.671,756.234 435.528,756.335 435.369,756.387 435.189,756.387 435.007,756.387 434.848,756.335 434.705,756.234 434.567,756.132 434.497,756.015 434.497,755.881L434.497,751.958C434.497,751.824 434.567,751.702 434.705,751.596 434.848,751.488 435.007,751.434 435.189,751.434z M435.913,743.898C435.874,743.807 435.843,743.712 435.833,743.618 435.819,743.523 435.804,743.429 435.778,743.339 435.757,743.226 435.747,743.074 435.747,742.881L435.747,742.139 435.747,737.491 437.2,737.491 437.2,742.865C437.2,743.002 437.249,743.118 437.351,743.221 437.455,743.321 437.588,743.373 437.757,743.373 437.916,743.373 438.049,743.321 438.161,743.221 438.275,743.118 438.335,743.002 438.335,742.865L438.335,737.491 439.681,737.491 439.681,744.387 437.963,744.387 437.994,743.83C437.835,744.054 437.684,744.23 437.538,744.352 437.358,744.464 437.161,744.521 436.944,744.521 436.687,744.521 436.471,744.464 436.301,744.352 436.155,744.253 436.025,744.1 435.913,743.898z M441.965,755.154L440.801,755.154 440.801,755.322 440.801,755.913C440.801,756.094 440.736,756.234 440.606,756.335 440.476,756.438 440.322,756.486 440.142,756.486L439.903,756.486C439.723,756.486 439.577,756.438 439.458,756.335 439.338,756.234 439.278,756.094 439.278,755.913L439.278,755.847 439.278,755.187 439.278,754.307 441.965,754.307 441.965,753.377C441.965,753.029 441.96,752.693 441.947,752.373 441.937,752.05 441.911,751.8 441.866,751.622 441.819,751.316 441.684,751.071 441.45,750.885 441.221,750.7 440.95,750.572 440.64,750.506 440.33,750.436 440.015,750.425 439.692,750.471 439.372,750.516 439.096,750.622 438.853,750.791 438.554,750.994 438.335,751.271 438.197,751.622 438.062,751.968 437.994,752.454 437.994,753.075L437.994,755.154C437.994,756.031 438.226,756.658 438.689,757.029 439.116,757.377 439.564,757.553 440.038,757.553 440.085,757.553 440.129,757.553 440.176,757.553 440.708,757.52 441.174,757.294 441.58,756.877 441.882,756.574 442.036,756.171 442.036,755.678 442.02,755.52 442.002,755.344 441.965,755.154z M440.765,753.174L439.278,753.174 439.312,752.348C439.312,752.167 439.379,752.02 439.515,751.899 439.65,751.781 439.812,751.721 440.007,751.721L440.075,751.721C440.275,751.721 440.447,751.778 440.588,751.89 440.726,752.003 440.801,752.156 440.801,752.348L440.765,753.174z" Stretch="Uniform" Fill="#FFB01E1E" Width="26" Height="26" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                            <Viewbox xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" Margin="0,420,0,0">
                                <Grid>
                                    <Grid Name="backgroundGrid2" Width="32" Height="32" Visibility="Collapsed" />
                                    <Path Data="M3.6847152,20.087C4.7106925,20.087 5.5517813,20.441095 6.2651974,21.194885 7.0178319,21.950275 7.3719999,22.794064 7.3719999,23.814749 7.3719999,24.839436 7.0178319,25.683325 6.2651974,26.395414 5.5517813,27.149405 4.7106925,27.506001 3.6847152,27.506001 2.669197,27.506001 1.8202889,27.149405 1.0651651,26.395414 0.35679018,25.683325 -4.4703484E-08,24.839436 0,23.814749 -4.4703484E-08,22.794064 0.35679018,21.950275 1.0651651,21.194885 1.8202889,20.441095 2.669197,20.087 3.6847152,20.087z M0.17999993,9.2860003C5.1514217,9.2860003 9.3285557,11.017709 12.885932,14.572485 16.393676,18.129662 18.175001,22.350933 18.175001,27.282001L12.885932,27.282001C12.885932,25.638811 12.617629,23.992922 11.95102,22.394033 11.331312,20.840643 10.3963,19.505852 9.198424,18.262461 7.9978782,17.064569 6.6175805,16.129675 5.0628802,15.508579 3.5107302,14.840683 1.9092294,14.529386 0.17999993,14.529386z M0.17999993,0C7.7320277,0 14.127627,2.6639707 19.463537,7.9985123 24.749845,13.329154 27.413999,19.818682 27.413999,27.329L22.171789,27.329C22.171789,21.239367 19.994728,16.040024 15.724,11.685972 11.461074,7.4177084 6.2657429,5.2420721 0.17999993,5.2420721z" Stretch="Uniform" Fill="WhiteSmoke" Width="32" Height="32" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
                                        <Path.RenderTransform>
                                            <TransformGroup>
                                                <TransformGroup.Children>
                                                    <RotateTransform Angle="0" />
                                                    <ScaleTransform ScaleX="1" ScaleY="1" />
                                                </TransformGroup.Children>
                                            </TransformGroup>
                                        </Path.RenderTransform>
                                    </Path>
                                </Grid>
                            </Viewbox>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <CollectionViewSource
        x:Name="groupedItemsViewSource"
        Source="{Binding Groups}"
        IsSourceGrouped="true"
        ItemsPath="TopItems"
        d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:DataSource, IsDesignTimeCreatable=True}}"/>

    <DataTemplate x:Key="CustomTileItem">
       <Grid> 
            <Grid HorizontalAlignment="Left">
                <TextBox Text="{Binding Subtitle}" Width="300" Height="150" Background="Aqua"/>
                <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}">
                    <VariableSizedWrapGrid>
                        <Image Source="{Binding Path=Image}" Stretch="UniformToFill" />
                    </VariableSizedWrapGrid>
                </Border>
                <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundThemeBrush}">
                    <telerikPrimitives:RadSlideHubTile Width="Auto" Height="38" telerikPrimitives:HubTileService.GroupTag="FirstLook" Visibility="Visible" Background="Transparent" BorderBrush="Transparent">
                    <telerikPrimitives:RadSlideHubTile.TopContent>
                            <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" FontFamily="Seguo"  FontSize="14" TextWrapping="Wrap"  Height="35" Margin="10,5,10,0" VerticalAlignment="Center" />
                        </telerikPrimitives:RadSlideHubTile.TopContent>
                        <telerikPrimitives:RadSlideHubTile.BottomContent>
                            <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlayForegroundThemeBrush}" FontFamily="Seguo"  FontSize="14" TextWrapping="Wrap"  Height="35" Margin="10,10,10,0" VerticalAlignment="Center" />
                        </telerikPrimitives:RadSlideHubTile.BottomContent>
                    </telerikPrimitives:RadSlideHubTile>
                </StackPanel>
            </Grid>
        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="ZoomedOut">
        <Grid HorizontalAlignment="Left" >
            <Border Background="LightGray">
                <TextBlock Text="{Binding Group.Title}" Width="250" Height="Auto" Foreground="Black" Padding="25,20,25,20" FontWeight="Bold"/>
            </Border>
        </Grid>
    </DataTemplate>

</UserControl.Resources>

<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout -->
<Grid Background="WhiteSmoke">
    <ProgressBar x:Name="pbProgress" IsIndeterminate="True" VerticalAlignment="Top" Value="100" Height="20"/>
    <Grid Style="{StaticResource LayoutRootStyle}" Margin="0,20,0,0" x:Name="itemGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="140" />
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid> 
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=Pageroot}" Style="{StaticResource BackButtonStyle}" Margin="36,0,0,36" Grid.Row="0"/>
            <StackPanel x:Name="Header" Grid.Row="0" Grid.Column="1" >
                <StackPanel Orientation="Horizontal">
                    <Image HorizontalAlignment="Left" Height="Auto" Margin="35,30,0,0" VerticalAlignment="Top" Width="202" Source="Assets/ACE-Logo.png"></Image>
                </StackPanel>
            </StackPanel>
        </Grid>
        <!-- Horizontal scrolling grid used in most view states -->
        <SemanticZoom Name="Zoom" Grid.Row="1">
            <SemanticZoom.ZoomedInView>
                <local:HubItems
                x:Name="itemGridView"
                AutomationProperties.AutomationId="ItemGridView"
                AutomationProperties.Name="Grouped Items"
                Grid.Row="1"
                Margin="0,-3,0,0"
                Padding="116,0,40,20"
                ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
                ItemTemplate="{StaticResource CustomTileItem}"
                SelectionMode="None"
                IsItemClickEnabled="True"
                ItemClick="ItemView_ItemClick">

                <local:HubItems.ItemsPanel>
                         <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </local:HubItems.ItemsPanel>
                    <local:HubItems.GroupStyle>
                        <GroupStyle ContainerStyle="{StaticResource GroupItemStyle1}">
                            <GroupStyle.HeaderTemplate>
                              <DataTemplate>
                                    <Grid Margin="0,0,0,6" x:Name="HeaderGrid">
                                        <Button AutomationProperties.Name="Group Title"  Content="{Binding Title}" Style="{StaticResource TextButtonStyle}"/>
                                    </Grid>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <VariableSizedWrapGrid ItemWidth="75" ItemHeight="150" Orientation="Vertical" Margin="0,-420,80,0" MaximumRowsOrColumns="3"/>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </local:HubItems.GroupStyle>
                </local:HubItems>
            </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                <GridView x:Name="ZoomedOutGV" HorizontalAlignment="Left" Margin="-870,0,0,50" 
                          ItemTemplate="{StaticResource ZoomedOut}">
                        <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Vertical" HorizontalAlignment="left"/>
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                        </GridView>
            </SemanticZoom.ZoomedOutView>
        </SemanticZoom> 
```

# grails-orm - 如何在 Grails 中对遗留数据库中的复合键进行建模

> ID：13817313
> 
> 赞同：2
> 
> 时间：2012-12-11T09:34:30.327
> 
> 标签：grails-orm, grails-2.0

如何在 Grails 中对遗留数据库中的复合键进行建模

我有一个遗留数据库，其中包含由 Grails 域对象建模的三个表

```
class Foo {

    static hasMany = [bars: Bar]

    static mapping = {
        version false

        columns {
            id column: "FooId"
            fooProp column: "FooProp"           
        }
    }
}

class Bar implements Serializable{

    Baz baz

    static hasMany = [foos: Foo]

    static belongsTo = [Foo]

    static mapping = {
        version false

        columns {
            id composite: ["FooId", "BazId"]
            baz column: "BazId"
            barProp column: "BarProp"
        }
    }
}

class Baz {

    static hasMany = [bars: Bar]

    static mapping = {
        version false

        columns {
            id column: "BazId"
            bazProp column: "BazProp"
        }
    }
} 
```

但是当我尝试部署它时，我得到以下异常

原因：org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的bean时出错：设置bean属性“sessionFactory”时无法解析对bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.HibernateException: **Missing column: id in app.Bar**

我宁愿没有复合键，但我有严格的命令不要触摸数据库，所以现在我正在尽我所能对其建模，但复合键已被证明有些困难......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T11:59:26.217

这将是有用的线程

[具有 Grails 多对多关系的动态查找器](https://stackoverflow.com/questions/6545637/dynamic-finders-with-grail-many-to-many-relationship)

我有同样的问题。这对我有用。

# jms - 在运行时更改 hornetQ 队列的 consumer-max-rate

> ID：13817315
> 
> 赞同：2
> 
> 时间：2012-12-11T09:34:39.717
> 
> 标签：jms, jboss7.x, hornetq

我在 JBoss 7 的standalone.xml 中设置了一个 hornetQ。

我还创建了一个这样的连接工厂：

```
<connection-factory name="InVmConnectionFactory">
   <connectors>
       <connector-ref connector-name="in-vm"/>
   </connectors>
   <entries>
       <entry name="java:/ConnectionFactory"/>
   </entries>
   <consumer-max-rate>10</consumer-max-rate>
</connection-factory> 
```

一切都按预期运行，但假设我想在一切运行时实时更改消费者最大速率。我将如何实现这一目标？

我知道我必须使用这种方法

```
HornetQConnectionFactory.setConsumerMaxRate(int consumerMaxRate) 
```

但是我如何获得 HornetQConnectionFactory？

编辑：我设法获得了 HornetQConnectionFactory 并设置了最大速率，但这不是在运行时重新加载。我必须停止并重新启动 ConnectionFactory。是否可以在运行时做到这一点？

# sql - 临时表存在检查

> ID：13817316
> 
> 赞同：0
> 
> 时间：2012-12-11T09:34:40.610
> 
> 标签：sql, sql-server

我在 SQL Server 中尝试了以下代码并遇到了一个奇怪的错误：

```
IF OBJECT_ID(N'tempdb..#t1') IS NULL
BEGIN
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END

IF OBJECT_ID(N'tempdb..#t1') IS NULL
BEGIN
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END 
```

错误：

> '#t1' 存在。

我不知道为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:39:42.663

这是想法

```
IF OBJECT_ID(N'tempdb..#t1') IS NULL
BEGIN
   CREATE TABLE #t1( F1 DATE NOT NULL )
END
GO

IF OBJECT_ID(N'tempdb..#t1') IS NULL
BEGIN
   CREATE TABLE #t1( F1 DATE NOT NULL )
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:01:46.027

*   SQL Server 不存储具有给定名称 ( `'#t1'`) 的临时表。相反，它添加了一个后缀，使其长度为 128 个字符。因此你不会找到`'#t1'`.

您可以使用`LIKE '#t1%'`它来找到它。

```
IF NOT EXISTS (select * from tempdb.sys.tables where name like '#t1%') 
```

*   此外，您应该`GO`在第一次查询之后添加以标记批处理的结束。

如下使用它；

```
--DROP TABLE #t1
--GO

    IF OBJECT_ID(N'tempdb..#t1') IS NULL
    BEGIN
    CREATE TABLE #t1(
        F1 DATE NOT NULL
    )
    END
    GO

    IF NOT EXISTS(select * from tempdb.sys.tables where name like '#t1%')
    BEGIN
    CREATE TABLE #t1(
        F1 DATE NOT NULL
    )
    END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:02:24.157

您的代码实际上很好，但是 SQL Server 中存在一个限制，这意味着在查询优化阶段它会失败。请在[此处查看答案 - 为什么 sql server 认为临时表已经存在而不存在](https://stackoverflow.com/questions/4828261/why-does-sql-server-thinks-a-temp-table-already-exists-when-it-doesnt)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T09:51:23.740

这不是运行时错误，而是“编译时”错误

```
--Drop table #t1  // call this alone to ensure that it's not existing, then call the rest, nothing will be printed

Print 0

IF OBJECT_ID('tempdb..#t1') IS NULL
BEGIN
Print 1
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END

IF OBJECT_ID('tempdb..#t1') IS NULL
BEGIN
Print 2
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T09:39:59.867

试试这个：

```
IF NOT exists(SELECT 1
              FROM information_schema.columns 
              WHERE table_name LIKE '#t1%')
BEGIN
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-11T09:42:21.560

试试这个：

```
IF Not EXISTS (select * from sys.objects where Name = 'tempdb..#t1')

BEGIN
CREATE TABLE #t1(
    F1 DATE NOT NULL
)
END 
```

# java - 如何通过单击受保护共享文件夹中的 jsp 中的链接来打开文件？

> ID：13817318
> 
> 赞同：0
> 
> 时间：2012-12-11T09:34:40.993
> 
> 标签：java, jsp, struts, jcifs

我尝试使用**JCIFS (SmbFile)**概念在受保护的共享文件夹上写入文件。以下是我尝试并成功在受保护文件夹上写入文件的代码片段：

```
String username = "username";
String password = "password";
String protectedFolder = "smb://machineName/protectedFolderName";
String fileName = "SampleFile.xls";
String filePath = protectedFolder + fileName;
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(username  + ":" +   
password);
SmbFile protectedFile = new SmbFile(strTemplate, auth);
SmbFileOutputStream fileOut = new SmbFileOutputStream(protectedFile);
wb.write(fileOut);
fileOut.close();

The above code successfully creates 'SampleFile.xls' in the protected folder. 
```

如果我想通过单击链接（href）从 jsp 页面打开该文件，我如何执行上述 JCIFS 身份验证？对此的任何想法都是可观的。

谢谢。

# database - 存储变量 UOM 的最佳实践

> ID：13817325
> 
> 赞同：0
> 
> 时间：2012-12-11T09:35:01.653
> 
> 标签：database, design-patterns, database-design

我正在构建一个应用程序，该应用程序将存储许多关于人的“标记”（体重、身高、血压等），并且由于用户对他们想要在 I 中测量事物的度量单位都有不同的期望将需要以一种聪明的方式解决 UOM 的问题。我想知道是否就如何最好地存储这些信息达成了共识。我正在考虑的示例如下（在每种情况下，假设前端都捕获标记和与捕获关联的 UOM）：

1.  **公制转换**。转换为公制等效值并存储原始 UOM 的值，但仅存储公制测量值（原始测量值不会丢失，尽管转换中可能会出现一些小数精度）
2.  **存储两者**。存储标记，捕获的 UOM，然后转换为公制并存储。这使得对度量数量的“同类”SQL 查询变得简单，同时完美地保留了原始标记的精度，但它显然更占用存储空间。我想插入的成本也会稍高一些，因为需要转换为公制（但我想这无关紧要）。

对我来说，精度损失并不重要，除了它可能产生的不和谐的用户体验。想象一下，如果用户放入 160 磅，然后看到它报告为 159.99 磅；这将是相当令人不安的，并会导致人们不相信这个系统。我怀疑在大多数转换中，尽管我可以返回相同的数字，而无需过多地增加数据库中的精度大小。不过，这种感觉只是我阳光般的乐观，而不是我已经测试过的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:38:14.743

存储两者都感觉是个坏主意。您必须确保这些值保持一致，并且违反 DRY（[不要重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）原则。

您混淆了存储和演示。如果您要存储重量，那么您应该存储为一种表示形式，然后以用户需要的任何表示形式呈现（例如，公斤、吨、吨、克、石头、磅、盎司等）

您*可以*将单位与大小一起存储（例如 10 公斤、4 石头等），但这会使比较产生问题，例如小于 2 盎司的实体的 SQL 查询必须执行转换。我认为在演示时执行 UOM 转换是一种一致且直观的解决方案。

# c# - 如何删除之后的所有数字。除两位数字外的值c#

> ID：13817326
> 
> 赞同：0
> 
> 时间：2012-12-11T09:35:13.903
> 
> 标签：c#, string

我得到字符串值，如`123.00000000`.
现在我只想取 123.00 的值。那么如何删除除值后两位数之外的所有最后一位数字。
例如：

`textBox1.Text="123.00000000";` 我想`textBox1.Text="123.00";` 提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:42:02.467

使用正确的字符串格式。

```
double value = double.Parse("123.00000000", CultureInfo.InvariantCulture);
textBox1.Text = value.ToString("N2"); 
```

[**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

[**演示**](http://ideone.com/QuZpyq)

**编辑**：`string.Substring`问题是世界上只有一半的人使用`.`小数分隔符。因此，您需要了解输入从数字转换为字符串的文化。如果它是您可以使用的同一台服务器`CultureInfo.CurrentCulture`（或省略它，因为这是默认设置）：

```
double originalValue = 123;
// convert the number to a string with 8 decimal places
string input = originalValue.ToString("N8");
// convert it back to a number using the current culture(and it's decimal separator)
double value = double.Parse(input, CultureInfo.CurrentCulture);
// now convert the number to a string with two decimal places
textBox1.Text = value.ToString("N2"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:42:27.943

```
string str = "123.00000000";
textBox1.Text = str.Substring(0,str.IndexOf(".")+3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:36:14.930

有关如何格式化数字的完整概述，请参见[此处。](http://www.csharp-examples.net/string-format-double/)在您的情况下，它是：

```
textBox1.Text = String.Format("{0:0.00}", 123.0); 
```

# drupal-7 - 以编程方式添加节点时出错

> ID：13817328
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:35:19.130
> 
> 标签：drupal-7

我是 Drupal 的新手，我想创建一个从旧网站获取所有新闻数据的网站。我尝试使用节点 API 根据我的旧数据创建节点。它有效，但是当我编辑新节点时，出现错误：“别名已在使用中”。我尝试添加带有标题和正文的简单节点并得到相同的问题。请帮我！！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:07:48.620

你可能有重复的节点。选中节点路径设置中的“生成自动 URL 别名”框以生成“mynode-1”用于调试

# ios - 如何在 iOS 上更改 UISearchBar 组件的内部背景颜色

> ID：13817330
> 
> 赞同：68
> 
> 时间：2012-12-11T09:35:22.697
> 
> 标签：ios, objective-c, customization, uisearchbar, background-color

我知道如何删除/更改`UISearchBar`搜索字段周围的背景颜色：

```
[[self.searchBar.subviews objectAtIndex:0] removeFromSuperview];
self.searchBar.backgroundColor = [UIColor grayColor]; 
```

![实现 UISearchBar 自定义](../Images/ca54d50631ed54e97466a4b1420efb7d.png)

但不知道如何在里面这样做：

![所需的 UISearchBar 自定义](../Images/aba21a9040b5680a73f3333308cec4ea.png)

这需要与 iOS 4.3+ 兼容。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-10T00:01:29.540

只需自定义文本字段本身。

我只是这样做，它对我来说很好（iOS 7）。

```
UITextField *txfSearchField = [_searchBar valueForKey:@"_searchField"];
txfSearchField.backgroundColor = [UIColor redColor]; 
```

这样您就不需要创建图像、调整大小等...

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-01-20T11:50:37.870

## 细节

*   Xcode 版本 11.0 (11A420a)，快速 5

[UISearchBar 自定义示例](https://stackoverflow.com/a/41745002/4488252)

## 解决方案

```
import UIKit

extension UISearchBar {
    func getTextField() -> UITextField? { return value(forKey: "searchField") as? UITextField }
    func setTextField(color: UIColor) {
        guard let textField = getTextField() else { return }
        switch searchBarStyle {
        case .minimal:
            textField.layer.backgroundColor = color.cgColor
            textField.layer.cornerRadius = 6
        case .prominent, .default: textField.backgroundColor = color
        @unknown default: break
        }
    }
} 
```

## 用法

```
let searchBar = UISearchBar(frame: CGRect(x: 0, y: 20, width: UIScreen.main.bounds.width, height: 44))
//searchBar.searchBarStyle = .prominent
view.addSubview(searchBar)
searchBar.placeholder = "placeholder"
searchBar.setTextField(color: UIColor.green.withAlphaComponent(0.3)) 
```

## 结果 1

```
 searchBar.searchBarStyle = .prominent // or default 
```

[![在此处输入图像描述](../Images/c1b7e39c61065565b8e0e41e2ae1d494.png)](https://i.stack.imgur.com/fAe8k.png)

## 结果 2

```
 searchBar.searchBarStyle = .minimal 
```

[![在此处输入图像描述](../Images/6b9dd528dbb3221a47f6de707744110f.png)](https://i.stack.imgur.com/xmkQw.png)

## 完整样本

```
import UIKit

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        let searchBar = UISearchBar(frame: CGRect(x: 0, y: 20, width: UIScreen.main.bounds.width, height: 44))
        //searchBar.searchBarStyle = .minimal
        searchBar.searchBarStyle = .prominent
        view.addSubview(searchBar)
        searchBar.placeholder = "placeholder"
        searchBar.setTextField(color: UIColor.green.withAlphaComponent(0.3))
    }
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2014-08-12T08:58:49.327

**不涉及任何私有 API 的解决方案！:)**

目前（[可能从 iOS 5 开始](https://developer.apple.com/library/ios/documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intfcm/UIAppearance/appearanceWhenContainedIn:)）您可以通过以下方式仅针对一种颜色情况执行此操作：

```
[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setBackgroundColor:[UIColor redColor]]; 
```

但请记住，由于它基于外观，更改将是应用程序的全局（它可能是解决方案的优点或缺点）。

对于 Swift，您可以使用（它适用于 iOS 9 及更高版本）：

```
if #available(iOS 9.0, *) {
    UITextField.appearanceWhenContainedInInstancesOfClasses([UISearchBar.self]).backgroundColor = UIColor.darkGrayColor()
} 
```

`#available`如果您的项目支持 iOS 9 及更高版本，则不需要。

如果您需要支持早期版本的 iOS 并想使用 Swift，请查看[此](https://stackoverflow.com/questions/24136874/appearancewhencontainedin-in-swift)问题。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2012-12-11T10:08:55.140

使用此代码更改 searchBar 的`UITextField`backgroundImage：

```
UITextField *searchField;
NSUInteger numViews = [searchBar.subviews count];
for (int i = 0; i < numViews; i++) {
    if ([[searchBar.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { //conform?
        searchField = [searchBar.subviews objectAtIndex:i];
    }
}
if (searchField) {
    searchField.textColor = [UIColor whiteColor];
    [searchField setBackground: [UIImage imageNamed:@"yourImage"]]; //set your gray background image here
    [searchField setBorderStyle:UITextBorderStyleNone];
} 
```

使用以下代码更改`UISearchBarIcon`：

```
 UIImageView *searchIcon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourSearchBarIconImage"]];
searchIcon.frame = CGRectMake(10, 10, 24, 24);
[searchBar addSubview:searchIcon];
[searchIcon release]; 
```

此外，要更改 searchBar 图标，您可以使用以下内置方法`UISearchBar`（可从**iOS 5+**获得）：

```
- (void)setImage:(UIImage *)iconImage forSearchBarIcon:(UISearchBarIcon)icon state:(UIControlState)state 
```

在这里您可以设置4种类型的`UISearchBarIcon`ie：

1.  `UISearchBarIconBookmark`
2.  `UISearchBarIconClear`
3.  `UISearchBarIconResultsList`
4.  `UISearchBarIconSearch`

我希望这可以帮助你...

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2012-12-11T10:33:18.800

根据[UISearchBar 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)：

您应该在 iOS 5.0+ 上使用此功能。

```
- (void)setSearchFieldBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state 
```

使用示例：

```
[mySearchBar setSearchFieldBackgroundImage:myImage forState:UIControlStateNormal]; 
```

可悲的是，在 iOS 4 中，您需要恢复到不太复杂的方法。查看其他答案。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2014-03-08T06:38:06.527

正如 Accatyyc 所说，对于 iOS5+ 使用 setSearchFieldBackgroundImage，但您要么需要创建图形，要么执行以下操作：

```
CGSize size = CGSizeMake(30, 30);
// create context with transparent background
UIGraphicsBeginImageContextWithOptions(size, NO, [UIScreen mainScreen].scale);

// Add a clip before drawing anything, in the shape of an rounded rect
[[UIBezierPath bezierPathWithRoundedRect:CGRectMake(0,0,30,30)
                            cornerRadius:5.0] addClip];
[[UIColor grayColor] setFill];

UIRectFill(CGRectMake(0, 0, size.width, size.height));
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self.searchBar setSearchFieldBackgroundImage:image forState:UIControlStateNormal]; 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2017-03-24T22:43:14.817

苹果的方式呢？

```
UISearchBar.appearance().setSearchFieldBackgroundImage(myImage, for: .normal) 
```

## 您可以在设计上设置任何图像！

但是如果你想创建所有程序，你可以这样做

* * *

我在**Swift 3上的解决方案**

```
let searchFieldBackgroundImage = UIImage(color: .searchBarBackground, size: CGSize(width: 44, height: 30))?.withRoundCorners(4)
UISearchBar.appearance().setSearchFieldBackgroundImage(searchFieldBackgroundImage, for: .normal) 
```

我在哪里使用助手扩展

```
public extension UIImage {

    public convenience init?(color: UIColor, size: CGSize = CGSize(width: 1, height: 1)) {
        let rect = CGRect(origin: .zero, size: size)
        UIGraphicsBeginImageContextWithOptions(rect.size, false, 0.0)
        color.setFill()
        UIRectFill(rect)
        let image = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()

        guard let cgImage = image?.cgImage else { return nil }
        self.init(cgImage: cgImage)
    }

    public func withRoundCorners(_ cornerRadius: CGFloat) -> UIImage? {
        UIGraphicsBeginImageContextWithOptions(size, false, scale)
        let rect = CGRect(origin: CGPoint.zero, size: size)
        let context = UIGraphicsGetCurrentContext()
        let path = UIBezierPath(roundedRect: rect, cornerRadius: cornerRadius)

        context?.beginPath()
        context?.addPath(path.cgPath)
        context?.closePath()
        context?.clip()

        draw(at: CGPoint.zero)

        let image = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext();

        return image;
    }

} 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2019-08-29T20:34:44.467

要在 iOS 13+ 上执行此操作，

```
searchController.searchBar.searchTextField.backgroundColor = // your color here 
```

请注意，默认情况下`searchTextField.borderStyle`设置为`roundedRect`，这会在您将设置的颜色之上应用轻微的灰色覆盖。如果这是不希望的，请执行

```
searchController.searchBar.searchTextField.borderStyle = .none 
```

这将摆脱灰色覆盖，但也摆脱了圆角。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-05-16T18:31:55.083

我发现这是使用 Swift 2.2 和 iOS 8+ 自定义各种搜索栏属性外观的最佳方式`UISearchBarStyle.Minimal`

```
searchBar = UISearchBar(frame: CGRectZero)
searchBar.tintColor = UIColor.whiteColor() // color of bar button items
searchBar.barTintColor = UIColor.fadedBlueColor() // color of text field background
searchBar.backgroundColor = UIColor.clearColor() // color of box surrounding text field
searchBar.searchBarStyle = UISearchBarStyle.Minimal

// Edit search field properties
if let searchField = searchBar.valueForKey("_searchField") as? UITextField  {
  if searchField.respondsToSelector(Selector("setAttributedPlaceholder:")) {
    let placeholder = "Search"
    let attributedString = NSMutableAttributedString(string: placeholder)
    let range = NSRange(location: 0, length: placeholder.characters.count)
    let color = UIColor(white: 1.0, alpha: 0.7)
    attributedString.addAttribute(NSForegroundColorAttributeName, value: color, range: range)
    attributedString.addAttribute(NSFontAttributeName, value: UIFont(name: "AvenirNext-Medium", size: 15)!, range: range)
    searchField.attributedPlaceholder = attributedString

    searchField.clearButtonMode = UITextFieldViewMode.WhileEditing
    searchField.textColor = .whiteColor()
  }
}

// Set Search Icon
let searchIcon = UIImage(named: "search-bar-icon")
searchBar.setImage(searchIcon, forSearchBarIcon: .Search, state: .Normal)

// Set Clear Icon
let clearIcon = UIImage(named: "clear-icon")
searchBar.setImage(clearIcon, forSearchBarIcon: .Clear, state: .Normal)

// Add to nav bar
searchBar.sizeToFit()
navigationItem.titleView = searchBar 
```

[![在此处输入图像描述](../Images/6804f1080d4c44b3854b038747254e71.png)](https://i.stack.imgur.com/cRWlM.png)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-11-07T12:39:41.770

不使用私有 API：

```
for (UIView* subview in [[self.searchBar.subviews lastObject] subviews]) {
    if ([subview isKindOfClass:[UITextField class]]) {
        UITextField *textField = (UITextField*)subview;
        [textField setBackgroundColor:[UIColor redColor]];
    }
} 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-07-08T13:04:49.963

仅更改颜色：

```
searchBar.tintColor = [UIColor redColor]; 
```

对于应用背景图像：

```
[self.searchBar setSearchFieldBackgroundImage:
                          [UIImage imageNamed:@"Searchbox.png"]
                                     forState:UIControlStateNormal]; 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2015-05-27T13:17:42.450

更好的解决方案是设置`UITextField`里面的外观`UISearchBar`

```
[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setBackgroundColor:[UIColor grayColor]]; 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-08-20T11:33:57.127

在 iOS13 中快速尝试这个

```
@IBOutlet weak var searchBar: UISearchBar!
searchBar.barTintColor = .systemIndigo
searchBar.searchTextField.backgroundColor = .white 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2014-04-06T04:06:36.513

只需使用类别方法遍历所有视图（在 iOS 7 中验证并且不使用私有 API）：

```
@implementation UISearchBar (MyAdditions)

- (void)changeDefaultBackgroundColor:(UIColor *)color {
  for (UIView *subview in self.subviews) {
    for (UIView *subSubview in subview.subviews) {
      if ([subSubview isKindOfClass:[UITextField class]]) {
        UITextField *searchField = (UITextField *)subSubview;
        searchField.backgroundColor = color;
        break;
      }
    }
  }
}

@end 
```

因此，将类别导入您的课程后，只需像这样使用它：

```
[self.searchBar changeDefaultBackgroundColor:[UIColor grayColor]]; 
```

请记住，如果您将其*立即*放在该`[[UISearchBar alloc] init]`行之后，它还不会起作用，因为搜索栏的子视图仍在创建中。设置搜索栏的其余部分后，将其放下几行。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2014-10-09T09:55:47.610

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self searchSubviewsForTextFieldIn:self.searchBar] setBackgroundColor:[UIColor redColor]];
}

- (UITextField*)searchSubviewsForTextFieldIn:(UIView*)view
{
    if ([view isKindOfClass:[UITextField class]]) {
        return (UITextField*)view;
    }
    UITextField *searchedTextField;
    for (UIView *subview in view.subviews) {
        searchedTextField = [self searchSubviewsForTextFieldIn:subview];
        if (searchedTextField) {
            break;
        }
    }
    return searchedTextField;
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2015-11-09T04:26:57.843

这是 Swift 版本 ( swift 2.1 /IOS 9 )

```
for view in searchBar.subviews {
    for subview in view.subviews {
        if subview .isKindOfClass(UITextField) {
            let textField: UITextField = subview as! UITextField
            textField.backgroundColor = UIColor.lightGrayColor()
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2019-10-02T13:45:57.253

**iOS 13、斯威夫特 5**

```
searchBar.searchTextField.backgroundColor = .gray
 searchBar.searchTextField.tintColor = .white
 searchBar.searchTextField.textColor = .white 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-11-27T06:41:00.390

Searchbar 现在有一个新的实例属性 SearchTextField 从 iOS 13 开始， [https://developer.apple.com/documentation/uikit/uisearchbar/3175433-searchtextfield](https://developer.apple.com/documentation/uikit/uisearchbar/3175433-searchtextfield)

```
if(@available(iOS 13, *))
    searchBar.searchTextField.backgroundColor = [UIColor whiteColor];
    searchBar.searchTextField.textColor = [UIColor blackColor];
else{
    //API that supports below iOS 13
    //This will set it for all the UISearchBars in your application
    [[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setBackgroundColor:[UIColor whiteColor]];
    [[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setTextColor:[UIColor blackColor]];
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-11-01T18:26:16.810

对于 iOS 9，请使用：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
// Override point for customization after application launch.

// Remove lag on oppening the keyboard for the first time
UITextField *lagFreeField = [[UITextField alloc] init];
[self.window addSubview:lagFreeField];
[lagFreeField becomeFirstResponder];
[lagFreeField resignFirstResponder];
[lagFreeField removeFromSuperview];

//searchBar background color change
[[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setBackgroundColor:[UIColor greenColor]];
[[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setTextColor:[UIColor blackColor];

return YES;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-01-15T17:57:58.843

**斯威夫特 3**

```
for subview in searchBar.subviews {
    for innerSubview in subview.subviews {
        if innerSubview is UITextField {
            innerSubview.backgroundColor = UIColor.YOUR_COLOR_HERE
        }
    }
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-03-31T08:54:22.257

**对于 Swift 3+，使用这个：**

```
for subView in searchController.searchBar.subviews {

    for subViewOne in subView.subviews {

        if let textField = subViewOne as? UITextField {

           subViewOne.backgroundColor = UIColor.red

           //use the code below if you want to change the color of placeholder
           let textFieldInsideUISearchBarLabel = textField.value(forKey: "placeholderLabel") as? UILabel
                textFieldInsideUISearchBarLabel?.textColor = UIColor.blue
        }
     }
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-01-19T11:25:13.687

使用 Swift 4，我建议你只这样做，不需要额外的代码：

```
self.searchBar.searchBarStyle = .prominent
self.searchBar.barStyle = .black 
```

如果您不希望外部背景为灰色，您也可以将 .prominent 更改为 .minimal。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-10-12T01:26:57.733

@EvGeniy Ilyin EvGeniy Ilyin 的解决方案是最好的。我基于这个解决方案 编写了一个**Objective-C版本。**

创建一个`UIImage`类别，并在**UIImage+YourCategory.h中宣传两个类方法**

```
+ (UIImage *)imageWithColor:(UIColor *)color withSize:(CGRect)imageRect;
+ (UIImage *)roundImage:(UIImage *)image withRadius:(CGFloat)radius; 
```

**在UIImage+YourCategory.m**中实现方法

 **```
// create image with your color
+ (UIImage *)imageWithColor:(UIColor *)color withSize:(CGRect)imageRect
{
    UIGraphicsBeginImageContext(imageRect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetFillColorWithColor(context, [color CGColor]);
    CGContextFillRect(context, imageRect);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
}

// get a rounded-corner image from UIImage instance with your radius
+ (UIImage *)roundImage:(UIImage *)image withRadius:(CGFloat)radius
{
    CGRect rect = CGRectMake(0.0, 0.0, 0.0, 0.0);
    rect.size = image.size;
    UIGraphicsBeginImageContextWithOptions(image.size, NO, [UIScreen mainScreen].scale);
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect
                                                cornerRadius:radius];
    [path addClip];
    [image drawInRect:rect];

    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

做你自己`UISearchBar`的`ViewController`

```
CGRect rect = CGRectMake(0.0, 0.0, 44.0, 30.0);
UIImage *colorImage = [UIImage imageWithColor:[UIColor yourColor] withSize:rect];
UIImage *finalImage = [UIImage roundImage:colorImage withRadius:4.0];
[yourSearchBar setSearchFieldBackgroundImage:finalImage forState:UIControlStateNormal]; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-10-23T05:46:53.570

这对我有用。

```
- (void)setupSearchBar
{
    [self.searchBar setReturnKeyType:UIReturnKeySearch];
    [self.searchBar setEnablesReturnKeyAutomatically:NO];
    [self.searchBar setPlaceholder:FOLocalizedString(@"search", nil)];
    [self.searchBar setBackgroundImage:[UIImage new]];
    [self.searchBar setBackgroundColor:[UIColor myGreyBGColor]];
    [self.searchBar setBarTintColor:[UIColor myGreyBGColor]];
    [self.searchBar setTintColor:[UIColor blueColor]];
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-01-20T12:19:46.730

**使用它来更新 xcode10 和 xcode11 的搜索文本字段 backgroud_color 对我来说工作正常**

```
[[UITextField appearanceWhenContainedInInstancesOfClasses:@[[UISearchBar class]]] setTextColor:[UIColor greenColor]]; 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2019-02-07T10:35:10.543

这帮助我更改了搜索栏中 textField 的背景颜色。

```
UITextField.appearance(whenContainedInInstancesOf: [UISearchBar.self]).backgroundColor = .white 
```**

# c++ - 调用@plt函数时在dlopen / static init上共享库SIGSEGV

> ID：13817333
> 
> 赞同：3
> 
> 时间：2012-12-11T09:35:32.563
> 
> 标签：c++, linux, gcc, shared-libraries, ld

我的应用 dlopens 带有静态初始化代码的库。所有其他库都这样做并且之前加载得很好，但是当从另一个库调用函数时，这个库会死掉。这类似于：

```
0x12311 <-- bad address
_static_initialization_0 <-- function call
....
dlopen 
```

现在，反汇编中的函数调用看起来像

```
call _Z6MyFuncRA37_Kc@plt 
```

然而，这个调用最终调用了无效地址 0x12311，即 PLT 条目获得了错误的地址。

问题很可能是所讨论的库是第 3 方库，即，即使它依赖于其他库，它也以二进制预构建形式出现。上周我们做了很大的优化，改变了很多标题等等。PLT 错误的函数 MyFunc 位于我们的（另一个）库中，该库进行了大量优化更改。

这怎么可能？确切的问题是：

1.  导致PLT不匹配的机制是什么
2.  有没有办法在不触及预编译库的情况下修复它 - 可选，因为我可以获得重建版本，但我仍然很好奇它为什么会崩溃

此外，同一个应用程序在使用 -O2 优化编译时工作正常，这就是我所说的奇怪（二进制库在两种情况下都是相同的）。

PS ubuntu 12.04 x86_64 但应用程序是 i386。

更新：评论中的建议（由于某种原因被删除）检查 LD_DEBUG 很好，在 LD_DEBUG=bindings 我在应用程序的“崩溃”版本中看到了这一点：

```
 10272:  /media/EXT/work/build32/bin/libMyLib.so: error: 
    symbol lookup error: undefined symbol: omp_set_num_threads (fatal) 
```

然后它停止绑定 libMyLib.so 符号，而在非失败版本中它继续绑定其他符号。但我不明白为什么它会继续执行并尝试加载父库。其实方案如下：

```
libA -> libB -> libMyLib 
```

libMyLib 失败（如上面的 LD_DEBUG 输出所示），因此它会跳过它以及 libB 完全（！）并继续绑定 libA 符号。非失败版本完全加载 libMyLib 符号，然后继续加载 libB 符号，然后加载 libA 符号。

坦率地说，它看起来像 ld bug。

至于为什么优化版本有效，我想 omp_ 方法并不是真正需要的，并且被链接器优化抛出，因此它不会在运行时找不到它。

这是我在 LD_DEBUG=all 日志中看到的在 libC 中找不到 omp_ 符号后的内容：

```
19225: symbol=omp_set_num_threads; lookup in file=/usr/lib/i386-linux-gnu/libXdmcp.so.6 [0]
19225: /media/EXT/Work/libC.so: error: symbol lookup error: undefined symbol: omp_set_num_threads (fatal)
19225:
19225: file=/media/EXT/libA.so [0]; destroying link map
19225:
19225: file=/media/EXT/libA.so [0]; dynamically loaded by /media/EXT/libX.so [0]
19225: file=/media/EXT/libA.so [0]; generating link map
19225: dynamic: 0xf2fdb764 base: 0xf2f81000 size: 0x00064a28
19225: entry: 0xf2f8ffd0 phdr: 0xf2f81034 phnum: 7
19225:
19225: checking for version `GCC_3.0' in file /lib/i386-linux-gnu/libgcc_s.so.1 [0] required by file /media/EXT/libA.so [0]
... few more checking
19225: object=/media/EXT/libA.so [0]
19225: scope 0: bin/mainapp /lib/i386-linux-gnu/libpthread.so.0 /media/EXT/libX.so ...
19225: scope 1:...
19225:
19225:
19225: relocation processing: /media/EXT/libA.so
19225: symbol=_ZTVN10__cxxabiv117__class_type_infoE; lookup in file=bin/mainapp [0]
19225: symbol=_ZTVN10__cxxabiv117__class_type_infoE; lookup in file=/lib/i386-linux-gnu/libpthread.so.0 [0]
19225: symbol=_ZTVN10__cxxabiv117__class_type_infoE; lookup in file=/media/EXT/libX.so [0]
19225: binding file /media/EXT/libA.so [0] to /media/EXT/libX.so [0]: normal symbol `_ZTVN10__cxxabiv117__class_type_infoE'

... here it continues to bind libA symbols, and after finishing that

19225:
19225:
19225: calling init: /media/EXT/libC.so
19225: 
```

它为未初始化的 libC.so 模块调用 init。

（仅提及 libX.so 是调用 dlopen 的基本模块，还包含所有其他库使用的基本方法。）

销毁libA的链接映射后，日志显示它再次生成，我只是不明白加载器这次是继续加载libA还是从头开始而不关心libB/libC。好吧，在任何情况下它都会忽略 libB/libC，直到为 libC 调用 init。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:56:54.923

`omp_set_num_threads`与GCC中的[OpenMP 支持有关。](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/libgomp/omp_005fset_005fnum_005fthreads.html)

您可能应该[`-fopenmp`](http://gcc.gnu.org/onlinedocs/gcc/C-Dialect-Options.html#index-fopenmp-113)在编译和链接时将标志传递给 gcc（即使您只是`dlopen`使用 OpenMP 编译库）。

也许最初的图书馆提供者忘记了这一点。

^(（OpenMP 正在改变编译过程的整个行为）)

# jquery - 使 jquery 代码更短

> ID：13817334
> 
> 赞同：1
> 
> 时间：2012-12-11T09:35:38.207
> 
> 标签：jquery, jquery-animate, slide, mouseleave

我知道我的代码可能会像现在一样短。但我只是不知道如何缩短它。我想这样做是因为它让一切变得更清晰。此外，这段代码使一切变得比它需要的更慢。

html

```
 <div id="slider">
    <div id="slideLeft">
        <div class="slideText">
            <h1>Ik zoek werk</h1>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                Suspendisse iaculis magna sed lacus vestibulum venenatis. 
                Quisque sem turpis, semper vitae gravida sit amet, tristique ut ligula. 
            </p>
            <div class="slideButton">Bekijken</div>
        </div>
        <img src="../_/img/slidetest.png" />
    </div>
    <div id="slideRight">
        <div class="slideText">
            <h1>Ik zoek personeel</h1>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
                Suspendisse iaculis magna sed lacus vestibulum venenatis.
                Quisque sem turpis, semper vitae gravida sit amet, tristique ut ligula. 
            </p>
            <div class="slideButton">Bekijken</div>         
        </div>
        <img class="slideImgSolid" src="../_/img/slidetest3.png" />
    </div>
</div> 
```

css

```
#slider{width:100%;min-height:450px;background-color:#999;}
#slideLeft{width:50%;position:absolute;left:0;background-color:#333;height:450px;overflow:hidden;}
#slideRight{width:50%;position:absolute;right:0;height:450px;background-color:#666;overflow:hidden;}

.slideText{position:absolute;top:50%;overflow:hidden;width:400px;z-index:100;}
#slideLeft .slideText{right:0;}
#slideRight .slideText{left:-150px;}

#slider h1{position:relative;font-size:18px;background-color:white;padding:5px 15px 5px 15px;}
#slideRight .slideText h1{text-align:right;left:0px;}
#slideLeft .slideText h1{text-align:left;right:-150px;}
#slider p{position:relative;width:300px;right:-400px;margin:20px 0 0 0;}
.slideButton{position:relative;right:0;right:-400px;margin:10px 0 0 0;background-color:#888;width:70px;padding:5px;text-align:center;}
.slideImgSolid{position:absolute;top:0;right:0;} 
```

js

```
$('#slideLeft').mouseenter(function(){
    $("#slideRight").animate({
       width: '30.1%',
       easing: 'easInOutCubic'                 
    }, { duration: 200, queue: false });
    $("#slideLeft p").animate({
       right: '0px',
       easing: 'easInOutCubic'
    }, { duration: 100, queue: false });
    $("#slideLeft h1").animate({
       right: '0px',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
    $("#slideLeft .slideButton").animate({
       right: '0px',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
    $("#slideLeft").animate({
       width: '70%',
       easing: 'easInOutCubic',
    }, { duration: 200, queue: false });
    });

$('#slideLeft').mouseleave(function(){
    $("#slideRight").animate({
       width: '50%',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
    $("#slideLeft h1").animate({
       right: '-150px',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
    $("#slideLeft p").animate({
       right: '-400px',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
    $("#slideLeft .slideButton").animate({
       right: '-400px',
       easing: 'easInOutCubic'
    }, { duration: 100, queue: false });
    $("#slideLeft").animate({
       width: '50%',
       easing: 'easInOutCubic'
    }, { duration: 200, queue: false });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:46:54.453

我看到的最干净的解决方案是定义对象：

```
var objects = [
  {selector: "#slideLeft p", enterright: '0px', leaveright: '-400px', duration: 200},
   ...
]; 
```

然后使用

```
 $('#slideLeft').mouseenter(function(){
       $.each(objects, function(){
           $(this.selector).animate({
               right: this.enterright,
               easing: 'easInOutCubic'
           }, { duration: this.duration, queue: false });
       });
   }).mouseleave(function(){
       $.each(objects, function(){
           $(this.selector).animate({
               right: this.leaveright,
               easing: 'easInOutCubic'
           }, { duration: this.duration, queue: false });
       });
   }); 
```

这很容易扩展和管理，因为所有重要的参数都在`objects`数组声明中。

如果您确定您的对象不会改变，您可能希望将对象声明中的选择器替换为生成的 jQuery 对象以获得更高效的代码：

```
var objects = [
  {$obj: $("#slideLeft p"), enterright: '0px', leaveright: '-400px', duration: 200},
  ... 
```

# objective-c - 在数组中搜索字符串以查找 NSRange

> ID：13817344
> 
> 赞同：0
> 
> 时间：2012-12-11T09:36:13.563
> 
> 标签：objective-c, ios, nsarray, nsrange

我正在尝试在数组中搜索字符串，但我只想在数组中的最后五个对象中搜索字符串。

我一直在摆弄我可以在 NSRange 上找到的每个参数，但无济于事。

我会发布一些示例代码，但我什至无法摆脱我需要的线路，无论是通过自省、枚举还是我错过的一些 NSRange 调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:51:42.630

如果您的数组元素是您搜索的字符串，您可以直接检查数组，如下所示：

```
if ([yourArray containsObject:yourString])
{
     int index = [yourArray indexOfObject:yourString];

     if (index>= yourArray.count-5)
     {
          // Your string matched
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:42:12.933

试试这个 ：-

```
//Take only last 5 objects
NSRange range = NSMakeRange([mutableArray1 count] - 5, 5);
NSMutableArray *mutableArray2 = [NSMutableArray arrayWithArray:
                                  [mutableArray1 subarrayWithRange:range]];
//Now apply search logic on your mutableArray2
for (int i=0;i<[mutableArray2 count];i++)
    {
        if ([[mutableArray2 objectAtIndex:i] isEqualToString:matchString])
        {
            //String matched
        }
    } 
```

希望这对你有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:56:27.110

我喜欢`indexesOfObjectsWithOptions:passingTest:`这个。例子：

```
 NSArray *array = @[@24, @32, @126, @1, @98, @16, @67, @42, @44];
    // run test block on each element of the array, starting at the end of the array
    NSIndexSet *hits = [array indexesOfObjectsWithOptions:NSEnumerationReverse passingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        // if we're past the elements we're interested in
        // we can set the `stop` pointer to YES to break out of
        // the enumeration
        if (idx < [array count] - 5) {
            *stop = YES;
            return NO;
        }
        // do our test -- if the element matches, return YES
        if (40 > [obj intValue]) {
            return YES;
        }
        return NO;
    }];
    // indexes of matching elements are in `hits`
    NSLog(@"%@", hits); 
```

# c++ - 会删除这个调用析构函数吗？

> ID：13817347
> 
> 赞同：2
> 
> 时间：2012-12-11T09:36:24.907
> 
> 标签：c++, this, destructor, delete-operator

> **可能重复：**
> [C++：删除这个？](https://stackoverflow.com/questions/3150942/c-delete-this)

在堆上创建了一个类 Foobar。我想在应用程序死亡时退出它。当我调用 die() 函数时，它必须死。在堆上创建了一些私有属性 - 我还需要删除它们。我写了那个代码：

```
Foobar::Foobar()
{
    m_var = new int(1);
}

Foobar::~Foobar()
{
    delete m_var;
    exit(0);
}

void Foobar::die()
{
    delete this;
} 
```

问题是`delete this`一致的。如果我调用它，是否会调用它`Foobar::~Foobar()`？

PS如果有更好的解决方案，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:37:44.157

是的。`delete`将调用析构函数。

您可能也有兴趣阅读[此](https://stackoverflow.com/questions/3150942/c-delete-this)SO 线程。

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:38:56.377

假设对象是动态分配的`new`：是`delete this`的，将导致调用析构函数。但是，您应该非常小心地删除`this`. 特别是，您需要确保没有后续操作尝试访问该类的任何成员。

此外，如果这是在未动态分配的内存上完成的（即使用`new`），这会导致**未定义的行为**。事实上，如果对象是通过分配的，这也会导致未定义的行为`new[]`。

有关更多信息，请参阅此链接：http: [//www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.15](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.15)

这是另一个关于它的问题： [允许删除吗？](https://stackoverflow.com/questions/3150942/c-delete-this)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:51:54.637

不，这不能保证。`delete`只有当我们确定它`this`是使用创建的时才应该被调用`new`。

因此，根据当前对象的创建方式，我们可能会或可能不会调用析构函数。

所以假设“Foobar”对象是在堆栈上创建的（即没有`new`）。然后`delete this`有一个未定义的行为。

OTOH，如果它是使用“new”创建的，那么它`delete this`是安全的，并且会调用析构函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:01:27.807

这完全取决于变量的定义方式。**必须使用new**关键字定义变量，否则**delete**不会调用构造函数。所以将变量声明为： foobar a= new foobar();

# sql - 关于多表查询性能的问题

> ID：13817348
> 
> 赞同：2
> 
> 时间：2012-12-11T09:36:25.787
> 
> 标签：sql, optimization, sql-optimization

多表查询有两种方式：

**查询一：**

```
select t1.a, t2.b from t1, t2 where t1.a = t2.a 
```

**查询 2：**

对于每一行：

```
select t1.a from t1 
```

做另一个查询：

```
select t2.b from t2 where t2.a = '??' 
```

当表很大时，哪个性能更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T06:02:09.030

**您应该始终让 DBMS 在单个查询中完成尽可能多的工作。**

DBMS 知道每个数据库中有多少元组，并且有办法估计结果将具有的元组数量。现代 DBMS 具有非常复杂的算法，负责找到执行任何查询的最有效方法（计划器）。

除非您知道自己在做什么以及为什么要这样做（即您知道您的算法将比 DBMS 运行得更快，更重要的是，为什么）您应该让 DMBS 完成它的工作。

更准确地回答您的问题：

您的查询 #1 可以用各种方法回答，具体取决于表的大小。让我们假设两者都是巨大的。一种解决方法是使用基于排序的连接：根据连接属性对两个表进行排序，然后合并它们。这基本上相当于对每个表进行合并排序所需的时间。每个表的每一页都将被读取和写入几次（取决于您在 DMBS 中有多少可用的缓冲区空间）。因此，T1 和 T2 中的每个元组都会被读/写十几次。

如果我们实现您的方法，将有与 T1 大小的元组一样多的查询。让我们假设 T2 没有索引，因此查询将读取 T2 中的每个元组 T1 次。

如果您在 T2 上有一个索引，您可以期望为 T1 中的每个元组读取几页。因此，查询的成本是读取 T1 的成本，然后对于 T1 中的每个元组，您需要阅读几页（2-5）以在 T2 中找到匹配的元组。

如果 T1 很小，T2 很大，查询 2 会更快！但是，DBMS 会发现这一点，并将完全执行您的算法来回答 Q1（它被称为基于循环的连接）。此外，您发送到 DBMS 的每个查询都需要时间来处理（方法 1 没有的开销）。

这是一个常见的天真的 DBMS 程序员的错误：让 DB 做一些工作，然后为每个元组做更多的工作。

相反，您应该考虑让 DBMS 在尽可能少的查询中完成所有处理。它将在性能上得到回报。

最后，**如果您真的对性能感兴趣，请获取您最喜欢的 DMBS 的文档并阅读它如何进行查询评估，以及如何改进它。**

--dmg

# rdlc - 提交为空或空时的 Rdlc 报告对齐方式

> ID：13817350
> 
> 赞同：11
> 
> 时间：2012-12-11T09:36:31.127
> 
> 标签：rdlc

![这是我的问题](../Images/0c2d616df21fd8fcc2186efc952b8069.png)

我正在处理 Rdlc 报告。我有这些领域：

```
First name  
Address1 
Address2  
City, state, zip 
```

如果这些字段中的任何一个为空，则不应显示空格。例如（**预期输出**）

```
First name,  
Address1,  
City, state, zip 
```

但是，如上图所示，我得到了这个：

```
First name,  
Address1,  
........................<-(blankspace is showing here)  
City, state, zip 
```

我试着改变`Visiblity`-> `Expression`-> `=IIF(String.IsNullOrEmpty(Fields!Address2.Value), false,True)`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-12T07:59:44.393

我认为 with 的表达`String.IsNullOrEmpty`不起作用。

尝试使用以下两个选项之一：

1.`=IIF(IsNothing(Fields!Address2.Value),False,True)`

2.`=IIF(Len(Fields!Address2.Value) = 0,False,True)`

根据评论，解决方案是创建一个文本框，在其中放置两个（或更多）字段，如果第二个字段具有实际值或为空，则连接值。

所以表达式将是：

```
=Fields!Name.Value + System.Environment.NewLine + Fields!SAddr_Line1.Value + IIF(‌​Len(Fields!Address2.Value) = 0, "", System.Environment.NewLine + Fields!Address2.Value) + Fields!ShipTo.Value 
```

为了提高可读性：

```
=Fields!Name.Value
+ System.Environment.NewLine
+ Fields!SAddr_Line1.Value
+ IIF(‌​Len(Fields!Address2.Value) = 0, "", System.Environment.NewLine + Fields!Address2.Value)
+ Fields!ShipTo.Value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T02:55:24.197

以防万一这有助于某人。

在我这样做之前，我遭受了同样的痛苦（而且我的分组非常复杂）：

字段！字段名.值 * 1

（如果需要，您可以使用 CStr() 转换为字符串）

瞧！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T04:55:49.287

您可以在 rdlc 报告中的以下情况下使用 if else 语句

```
 1=IIF(IsNothing(Fields!Amount.Value),False,True)
     2.=IIF(Len(Fields!Amount.Value) = 0,False,True)

       =iif(IsNothing(Sum(Fields!Amount.Value)),0.00,True).ToString() 
```

最后一个没有找到记录并显示 0 它的工作！

# php - 是否可以将 getaddrinfo() 默认设置为仅检索 IPV4 地址？

> ID：13817351
> 
> 赞同：0
> 
> 时间：2012-12-11T09:36:35.047
> 
> 标签：php, c, linux, ipv4

PHP curl 使用 getaddrinfo() 将主机名解析为 IP 地址。通过设置一个选项，它可以很容易地查找 IPV4 地址，但是当我们启动 IPv6 并在我们的网络上正常运行时，这将需要相当多的工作并且很难撤消。

有没有办法将 getaddrinfo() 设置为默认为我们整个 Ubuntu 服务器的 IPv4 查找？

谢谢韦恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:04:49.683

此解决方案适用于 C，不确定 php。调用 getaddrinfo 时，您传递一个 struct addrinfo 提供有关您要查找的内容的“提示”。下面的例子

```
 struct addrinfo *res;
  struct addrinfo hints;
  memset(&hints, 0, sizeof(hints));
  hints.ai_family = PF_INET;
  hints.ai_flags = AI_PASSIVE;
  hints.ai_socktype = SOCK_STREAM;

  getaddrinfo("localhost", "80", &hints, &res); 
```

从我的评论中复制如下，因为它似乎适用于答案：

> 只需为提供“默认值”的 getaddrinfo 创建一个包装函数。然后在整个应用程序中使用包装函数。当 ipv6 启动并运行时，更改函数的内部“默认值”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:14:34.037

在 Linux 上，`getaddrinfo()`可以使用`/etc/gai.conf`. 您不能使用此文件来防止返回 IPv6 地址，但可以使用它来确定 IPv4 地址的优先级高于 IPv6 地址。

但实际上，您只是希望 PHP/Curl 将`AI_ADDRCONFIG`标志传递给`getaddrinfo()`，这将导致它仅在机器当前配置了 IPv6 地址时才返回 IPv6 地址。

# c# - 使用 jQuery 忽略：':hidden:not

> ID：13817352
> 
> 赞同：1
> 
> 时间：2012-12-11T09:36:38.657
> 
> 标签：c#, jquery, asp.net

我正在使用 jQuery 验证器，并且我想使用`ignore: ':hidden:not`但我也想应用它所有具有约束“_selecting”的 ID 的控件，

这是我到目前为止但没有工作的：

```
sb.AppendLine(@" ignore: ':hidden:not($(""[id*=_selecting]"")',"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:53:29.147

我通过将控件的类设置为`class="ignore"`然后像这样忽略它们来解决这个问题：

```
sb.AppendLine(@" ignore: ':hidden:not("".ignore"")',"); 
```

# c# - ANTLR：使用自定义类型而不是 CommonTree 生成树图

> ID：13817355
> 
> 赞同：1
> 
> 时间：2012-12-11T09:37:07.087
> 
> 标签：c#, antlr, antlr3

我已经在 ANTLR 中为非常简单的表达式定义了语法定义，例如`(a + b) * c`：

```
grammar SimpleCalc;

options {
    language=CSharp2;
    output=AST;
}

tokens {
    PLUS  = '+' ;
    MINUS = '-' ;
    MULT = '*' ;
    DIV = '/' ;
}

/*------------------------------------------------------------------
 * LEXER RULES
 *------------------------------------------------------------------*/

ID  : ('a'..'z' | 'A' .. 'Z' | '0' .. '9')+ ;

WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { Skip(); } ;

/*------------------------------------------------------------------
 * PARSER RULES
 *------------------------------------------------------------------*/

expr : multExpr ((PLUS | MINUS)^ multExpr)*;

multExpr : atom ((MULT | DIV)^ atom )*;

atom : ID
     | '(' expr ')' -> expr; 
```

现在我有一些用于创建树结构的预定义类型：

```
public class Expr { }

public class SimpleExpr : Expr
{
    public SimpleExpr(string name) { ... }
}

public enum BinaryExprType
{
    Plus,
    Minus,
    Multiply,
    Divide
}

public class BinaryExpr : Expr
{
    public BinaryExpr(Expr left, BinaryExprType op, Expr right) { ... }
} 
```

我知道我们可以编写一些代码来将 a 转换`CommonTree`为`Expr`树，但我想直接重写为自定义类型，例如：

```
atom returns [Expr e]
    : ID { $e = new SimpleExpr($ID.text); }
    | '(' expr ')' { $e = $expr.e; };

expr returns [Expr e]
    : /* ??? */;

multExpr returns [Expr e]
    : /* ??? */; 
```

但是我应该怎么`expr`做`multExpr`呢`BinaryExpr`？`BinaryExprType`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:56:42.180

尝试这样的事情（未经测试！）：

```
expr returns [Expr e]
 : m1=multExpr         {$e = $m1.e;} 
   ( PLUS m2=multExpr  {$e = new BinaryExpr($expr.e, BinaryExprType.Plus, $m2.e);}
   | MINUS m2=multExpr {$e = new BinaryExpr($expr.e, BinaryExprType.Minus, $m2.e);}
   )*
 ;

multExpr returns [Expr e]
 : a1=atom        {$e = $a1.e;}
   ( MULT a2=atom {$e = new BinaryExpr($multExpr.e, BinaryExprType.Multiply, $a2.e);}
   | DIV a2=atom  {$e = new BinaryExpr($multExpr.e, BinaryExprType.Divide, $a2.e);}
   )*
 ;

atom returns [Expr e]
 : ID           {$e = new SimpleExpr($ID.text);}
 | '(' expr ')' {$e = $expr.e;}
 ; 
```

诀窍是在二进制表达式中递归地使用规则本身：`$expr.e`and `$multExpr.e`in `new BinaryExpr(...)`。

# python - Python 写入新文件 - 但 EOL 转换错误

> ID：13817365
> 
> 赞同：3
> 
> 时间：2012-12-11T09:37:41.543
> 
> 标签：python, file

我的脚本写入并创建了一个新文件，但它目前是在 Mac EOL Conversion 而不是 Windows 中制作的。这意味着每行仅以 'CR' 而不是 'CR LF' 结尾，这不适用于我想要做的事情。

现在为什么会这样，或者我该如何改变它？

```
f = open('...')
text_file1.write(str(i) + ',' + harvestServer + ',' + finalString + harvestCommand + '\r')
text_file1.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:39:41.203

替换为`\r`，`\n`确保以文本模式打开文件。这将使用您平台的本机约定（即[`os.linesep`](http://docs.python.org/2/library/os.html#os.linesep)）。

或者，以二进制模式打开文件并使用`\r\n`. 无论您在何处运行代码，这都将使用 Windows 约定。

`newline`最后，您可以通过将可选参数传递给 来控制换行符翻译[`open()`](http://docs.python.org/3.1/library/functions.html#open)。

# iphone - 自定义地址簿 ABPeoplePickerViewController 请帮忙？

> ID：13817370
> 
> 赞同：0
> 
> 时间：2012-12-11T09:38:03.533
> 
> 标签：iphone, objective-c, ios, uitableview, abaddressbook

我需要有关 iPhone 的自定义地址簿 (ABPeoplePickerViewController) 的帮助吗？我想要一个包含我所有联系人的数组，只将他们的姓名和号码拉入表格视图的单元格中以显示。选择一些联系人，打开消息并向他们发送带有自定义消息的文本/短信。

WhatsApp messenger 是一个很棒的例子，如果你去设置，告诉朋友，然后消息.. 我想要那个样子！

![联系人 Pickerview](../Images/f497837b766bc8eb4584e156131efc52.png) 它必须是自定义的，因为我还想要下面的发送和取消按钮，以及 cell.textLabel 中的名称及其在 subtitle 样式表视图中 cell.detailTextLabel 中的编号。

那么我如何从地址簿中获取他们的详细信息并进入我的数组（contactsName、contactsNumber）？提前致谢！这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [contactsName objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [contactsNumber objectAtIndex:indexPath.row];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
}

- (void)peoplePickerNavigationControllerDidCancel:(ABPeoplePickerNavigationController *)peoplePicker
{
    [self dismissViewControllerAnimated:YES completion:^{ NSLog(@"Message controller has been canceled"); }];
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    NSString *name = (__bridge_transfer NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *number = (__bridge_transfer NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSLog(@"Name: %@ Number: %@", name, number);

    return NO;
}

- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier
{
    return NO;
}

- (void)openSMScontroller {
    MFMessageComposeViewController *smsView = [[MFMessageComposeViewController alloc] init];
    smsView.messageComposeDelegate = self;

    smsView.recipients = [NSArray arrayWithArray:contactsNumber];
    smsView.body = @"Check out this awesome app!";

    [self presentModalViewController:smsView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:56:12.623

你可以通过下面的代码从地址簿中得到你想要的东西我的朋友。！！！！！！

编码快乐！！！！！！

```
- (BOOL)peoplePickerNavigationController: (ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
 ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty);
   ABMultiValueRef addressProperty = ABRecordCopyValue(person, kABPersonAddressProperty);
 NSArray *address = (NSArray *)ABMultiValueCopyArrayOfAllValues(addressProperty);
if([address count] > 0)
{
    for (NSDictionary *addressDict in address)
    {
        countrytf.text = [addressDict objectForKey:@"Country"];
        streetaddresstf.text = [addressDict objectForKey:@"Street"];
        citynametf.text = [addressDict objectForKey:@"City"];
        statenametf.text = [addressDict objectForKey:@"State"];
        zipcodetf.text = [addressDict objectForKey:@"ZIP"];

    }
    CFRelease(addressProperty);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:48:30.240

要获取电话号码...

```
ABMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonPhoneProperty); 
 NSString*    phone = (NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, 0); 

 nslog(@"phone:%@",phone); 
```

让我知道它是否有效!!!!!!请如果它是正确的然后奖励它，我知道它是正确的..

快乐编码

# c++ - 致命错误 C1083：无法打开编译器中间文件：“***.pch”：没有这样的文件或目录

> ID：13817374
> 
> 赞同：1
> 
> 时间：2012-12-11T09:38:16.857
> 
> 标签：c++, visual-studio-2008, visual-c++

我收到了另一个人的项目。当我构建时，发生了这个错误。我试图搜索谷歌来解决这个问题，我[点击了这个链接](http://support.microsoft.com/kb/114334)但没有效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T09:43:54.903

这可能是由于中间文件的路径长度所致。

Visual Studio 的最大路径长度约为 256 个字符。

在考虑路径长度的同时，不要忘记编译器可能会使用诸如 之类的路径`C:\folder1\folder2\folder3\..\..\folder1a\file.obj`，这比您对文件的预期要长`C:\folder1\folder1a\file.obj`。

检查您的项目设置或构建输出以查看正在使用的路径，并可能尝试缩短它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:14:48.033

尝试进行重建而不是构建。如果这不起作用，请尝试删除或重命名 Debug 和 Release 目录，然后重新构建。

请记住，Visual Studio 通常有 2 组 Release 和 Debug 目录 - 一组位于解决方案的顶级目录，另一组位于项目目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-23T12:31:20.430

我的问题在 Windows 10 中对 e 分区区分大小写：

我已经解决了：

```
fsutil.exe file setCaseSensitiveInfo "e:\" disable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T04:48:03.507

我遇到了同样的问题，这是因为我更改了文件夹名称。例如：我在其文件夹名称为“Folder1”时构建解决方案，然后关闭整个解决方案并将文件夹名称更改为“Folder2”。当我重新打开解决方案并尝试构建它时，出现错误“致命错误 C1083：无法打开编译器中间文件：' ***\Folder1*** .pch'：没有这样的文件或目录”

但正如 satuon 所说，我试图重建而不是构建解决方案，然后它就可以工作了。

# php - 在 HTML 代码中使用 PHP if 条件

> ID：13817378
> 
> 赞同：-2
> 
> 时间：2012-12-11T09:38:32.853
> 
> 标签：php, html, mysql

我像这样在 PHP 中使用 HTML。

```
for($i=0;$i<count($arrSql);$i++)
     $opt.="<option". if($_GET['pId'] == $arrSql[$i][0]){ echo "Selected";} ."value=".$arrSql[$i][0].">".$arrSql[$i][1]."</option>"; 
```

我已经测试了很长时间，它看起来正确，但是它显示错误，我不知道错误在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:40:31.703

您不能使用连接和`if`一起使用。将其更改为：

```
for ($i=0;$i<count($arrSql);$i++) {
     $opt .= "<option"
        . ($_GET['pId'] == $arrSql[$i][0] ? " selected" : '')
        ."value=".$arrSql[$i][0].">".$arrSql[$i][1]."</option>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:42:54.373

你忘了空格。

尝试以下操作：

```
for($i=0;$i<count($arrSql);$i++)
    $opt.="<option". ($_GET['pId'] == $arrSql[$i][0] ? ' selected="selected" ' : ' ') ."value=".$arrSql[$i][0].">".$arrSql[$i][1]."</option>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:51:05.087

`echo`这个地方不需要你的电话。您的语句仅连接字符串而不打印它们。

此外，不可能`if`在字符串连接中使用语句。但是 if 快捷方式，即所谓的[*三元*](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)运算符适用于这种情况。

正如在另一个答案中指出的那样，在*所选*部分之前还缺少一个空格。

```
for($i=0;$i<count($arrSql);$i++) {
     $opt .= "<option " 
          .($_GET['pId'] == $arrSql[$i][0]) ? "Selected" : "" 
          ."value=" .$arrSql[$i][0]
          . ">" .$arrSql[$i][1]. "</option>";
} 
```

另一种`if`可能更清楚的使用方法是：

```
for($i=0;$i<count($arrSql);$i++){
     $opt .="<option ";
     if ($_GET['pId'] == $arrSql[$i][0]){
         $opt .= "Selected"; 
     }
     $opt .= "value=" .$arrSql[$i][0]. ">" .$arrSql[$i][1]. "</option>";
} 
```

如果你愿意，你甚至可以使用花括号将数组访问内联到字符串中，最后一行：（更多[here](http://php.net/manual/en/language.variables.variable.php)）

```
$opt .= "value=${$arrSql[$i][0]}>${$arrSql[$i][1]}</option>"; 
```

将来您可能希望在脚本中启用错误输出。这将表明主要错误。

# android - 在任何设备上使用谷歌地图。（没有谷歌播放）

> ID：13817383
> 
> 赞同：11
> 
> 时间：2012-12-11T09:38:51.127
> 
> 标签：android, google-maps

我正在尝试在 android 中对谷歌地图进行可行性测试。

**[谷歌地图安卓 V1](https://developers.google.com/maps/documentation/android/v1/hello-mapview)**

使用 MapView 时，我们必须添加

```
<uses-library android:name="com.google.android.maps" /> 
```

在 androidmenifest.xml 中。但据我所知，有些设备没有嵌入这个库。因此，应用程序甚至无法安装在这些设备中。

**[谷歌地图安卓 V2](https://developers.google.com/maps/documentation/android/)**

在 V2 中，地图由 extra/google_play_services 的 sdk 支持。这种方法更好，但它仍然依赖于 google play 服务。如果我卸载该服务，则会出现一条警报消息，如下图所示。

![谷歌地图演示](../Images/6e4483f8c2969326b64f53500e380b7f.png)

当我单击按钮时，它崩溃并引发异常。

> android.content.ActivityNotFoundException：未找到处理 Intent { act=android.intent.action.VIEW dat= [http://play.google.com/store/apps/details?id=com.google.android.gms](http://play.google.com/store/apps/details?id=com.google.android.gms) flg的活动=0x80000 pkg=com.android.vending }

是因为在测试前也没有找到google play来处理Intent。但是意图可以由浏览器处理而无需指定 pkg=com.android.vending。

所以..这是我的问题。

1.  是否可以通过我自己的应用程序拦截和处理上述 Intent？所以我可以将它传递给浏览器。

2.  如果不可能，用地图开发 android 应用程序的最佳解决方案是什么。我知道有很多安卓设备没有安装谷歌地图或谷歌播放，使用崩溃是不能接受的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T14:55:04.923

实际上，如果 Gingerbread 和旧手机尚未安装 Play Store，则问题与使用错误 URI 的旧手机有关。这*不是*一个安全的假设。大多数开箱即用的 Gingerbread 手机都没有附带它，而且 Google 更新不一定会安装它。这是 Google Play 服务 V2 中的一个已知错误。[请参阅有关 Google 代码](http://code.google.com/p/android/issues/detail?id=42543)的讨论

讨论了绕过它的黑客，但您需要拦截按钮按下才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:41:23.533

您需要使用 google map api 来运行 google map 。使用 google api 创建 AVD 并在该 AVD（模拟器）中运行您的项目。

![在此处输入图像描述](../Images/3441a3d72e1ad9a1c058d8b3c0e15b2f.png)

# javascript - 生成随机值，保留返回值的历史记录

> ID：13817384
> 
> 赞同：1
> 
> 时间：2012-12-11T09:38:53.787
> 
> 标签：javascript, jquery, random

对于我正在处理的一个项目，我需要一个 Javascript 函数，它会在给定范围内返回一个随机数，而不会重复自身，直到整个范围“耗尽”。由于周围没有这样的东西，我设法自己创造了它。

该函数还需要`id`传递一个。这样，如果您需要多个随机数，每个随机数都有自己的历史记录，则`id`可以跟踪它们。

该功能有效，但是我需要一些建议；

1.  这是实现我想要实现的“正确”方式吗？
2.  `inArray()`使用非常大的范围 ( `maxNum`) 值执行的速度有多快？我有一种感觉，大数字会减慢函数的速度，因为它会随机化数字，直到它生成一个仍然“有效”的数字（即不在历史数组中）。但我想不出另一种方法来做到这一点..

剧本：

```
var UniqueRandom = {
    NumHistory: [],
    generate: function (maxNum, id) {
        if (!this.NumHistory[id]) this.NumHistory[id] = [];
        if (maxNum >= 1) {
            var current = Math.round(Math.random() * (maxNum - 1)), x = 0;
            if (maxNum > 1 && this.NumHistory[id].length > 0) {
                if (this.NumHistory[id].length !== maxNum) {
                    while ($.inArray(current, this.NumHistory[id]) !== -1) {
                        current = Math.round(Math.random() * (maxNum - 1));
                        x = x + 1;
                    }
                    this.NumHistory[id].push(current);
                } else {
                    //reset
                    this.NumHistory[id] = [current];
                }
            } else {
                //first time only
                this.NumHistory[id].push(current);
            }
            return current;
        } else {
            return maxNum;
        }
    },
    clear: function (id) {
        this.NumHistory[id] = [];
    }
}; 
```

用法将是：（100 是范围（0-100）和 the_id 是..好吧，id）

```
UniqueRandom.NumHistory[100, 'the_id'] 
```

我已经设置了一个带有演示的[小提琴。](http://jsfiddle.net/syuKs/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:45:47.810

1.  这不是最佳做法。Imo 最好为每个需要生成的数字系列实例化一个对象。
2.  我建议生成一个包含所有可能值的数组并将其改组。然后你就可以弹出它了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:52:03.210

我采用了 Jack 的代码并对其进行了调整以使用弹出数组方法。

```
function fisherYates ( myArray ) {
  var i = myArray.length;
  if ( i == 0 ) return false;
  while ( --i ) {
     var j = Math.floor( Math.random() * ( i + 1 ) );
     var tempi = myArray[i];
     var tempj = myArray[j];
     myArray[i] = tempj;
     myArray[j] = tempi;
   }
}

function RandomGenerator(maxNum) {

    this.max = maxNum;
    this.initRandomArray();

}

RandomGenerator.prototype.generate = function() {

    // if no more numbers available generate new array
    if( this.left === 0 ) this.initRandomArray();

    this.last = this.arr.pop();
    this.left = this.arr.length;
    this.history.push( this.last );
    return this.last;
}

RandomGenerator.prototype.initRandomArray = function() {

    this.arr = [];
    this.history = [];
    this.last = null;
    this.left = this.max;

    for( var i = 0; i < this.max; i++ ) {
        this.arr.push( i );
    }

    fisherYates( this.arr );

}

var mygen = new RandomGenerator(100);
console.log( mygen.generate() ); 
```

我从[**这里**](https://stackoverflow.com/a/2450976/861940)得到了 FisherYates 算法。

如果已经在历史对象中找到新随机数，则生成新随机数的方法将导致不必要的循环。

[**在这里**](http://jsfiddle.net/bruno/DMm5B/1/)提琴[](http://jsfiddle.net/bruno/DMm5B/1/)

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:51:29.893

我倾向于认为它确实不是最有效的。我没有立即得到`//first time only`.
此外，您可以通过跳过`else return ..`并编写相反的条件来使代码更具可读性，例如：

```
if (maxNum >= 1) {
    //code
} else {
    return maxNum;
} 
```

变成

```
if (maxNum < 1) { // or maybe even if maxNum == 0
    return maxNum;
}

//code 
```

此外，您的`x`变量似乎是多余的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T09:53:08.613

我可能会这样实现它，使用随机生成器的实际实例。这使每个生成器的历史记录分开。

```
function RandomGenerator(maxNum)
{
    this.max = maxNum;
    this.history = {};
    this.histn = 0;
}

// generate random number in range [0..maxNum)
RandomGenerator.prototype.generate = function()
{
    var value;

    if (this.histn == this.max ) {
        return false;
    }

    do {
        value = Math.floor(Math.random() * this.max );
    } while (this.history[value]);

    this.history['' + value] = 1;
    ++this.histn;

    return value;
}

var mygen = new RandomGenerator(100);
console.log(mygen.generate()); 
```

在我的实现中，我为历史选择了一个普通对象而不是数组；测试之前是否生成过值是通过测试属性而不是`$.inArray()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T10:11:18.810

我同意 Alex 的观点，在大多数用例中，您希望生成一个包含所有值的数组，将它们打乱，然后在需要时弹出它们。

这是一个例子：

```
var getShuffledUniqueRandoms = function(count, suffix) {
    var values = [];

    for (var i = 1; i < count+1; i++) {
        values.push(i + suffix);
    }

    // Shuffle function originally from:
    //+ Jonas Raoni Soares Silva
    //@ http://jsfromhell.com/array/shuffle [v1.0]

    return (function(o){ //v1.0
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    })(values);
}

var values = getShuffledUniqueRandoms(10, "index");

$('button').click(function() {

    if (values.length == 0) {
        $('body').append('<p>Out of values.</p>');
    } else {
        $('body').append('<p>' + values.pop() + '</p>');
    }
});
​ 
```

​<a href="http://jsfiddle.net/ZRMcA/" rel="nofollow">FIDDLE

使用这种算法，它的前期成本更高，但至少它有一个已知的完成时间（大约 O(n)）。

对于不断检查随机值是否在数组中的算法，每次新迭代都会变得越来越慢。

现在，如果您的数据集总是相对较小，您的算法可能会工作得更好一点，但任何大于 10 左右的数据都会开始失去优势。**

# python - Python 处理 TypeError：

> ID：13817391
> 
> 赞同：1
> 
> 时间：2012-12-11T09:39:18.570
> 
> 标签：python, exception-handling

我得到一个：

```
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

错误，因为我的程序正在查询我的数据库。问题是它会停止我不希望 Web 应用程序发生的整个程序。

相反，我怎么能优雅地处理这个，因为它必须引用一个空字段，我不关心它。这是一个代码片段：

```
try:
    if not doc['coordinates']:
        xxxxxxxxx
    else:
        xxxxxxxx

except (ValueError, geocoders.google.GQueryError):
    pass 
```

我尝试在 中包含 a `TypeError`，`except()`但这会导致客户端出现问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:51:59.043

这个怎么样 ：-

```
if doc:
    try:
        if not doc['coordinates']:
            xxxxxxxxx
        else:
            xxxxxxxx

    except (ValueError, geocoders.google.GQueryError):
        pass 
```

或这个 ：-

```
 try:
        if not doc or not doc['coordinates']:
            xxxxxxxxx
        else:
            xxxxxxxx

    except (ValueError, geocoders.google.GQueryError):
        pass 
```

# php - CodeIgniter 关闭自动路由？

> ID：13817392
> 
> 赞同：3
> 
> 时间：2012-12-11T09:39:18.487
> 
> 标签：php, codeigniter

是否可以关闭 CodeIgniter 中的自动路由并让它仅在存在该请求的路由时处理请求？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-22T21:56:56.117

请记住，戴尔的解决方案：

```
$route['(:any)'] = "some/default/controller/$1"; 
```

仅适用于单段 URL，例如：

```
example.com/foo 
```

但不适用于：

```
example.com/foo/bar 
```

**您可以通过使用正则表达式而不是 CI 通配符来解决此问题。并且通过路由到一个不存在的类确实会删除 show_404() ：**

```
$route['(.*)'] = "none"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:07:16.000

AFAIK 你不能关闭 CI 的自动路由，但是有一个解决方法：

```
// you specific routes
$route['admin/(:any)'] = "admin/$1";
$route['search/(:any)'] = "search/$1";
// the catch all route
$route['(:any)'] = "some/default/controller/$1"; 
```

这实际上并没有关闭 CI 的路由，而是将所有不匹配的 uri 路由到默认控制器。

或者，您可以路由到一个不存在的控制器，我相信它会抛出内置的 404 错误

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T14:44:29.893

好吧，另一种解决方案可能是扩展`Router`.

1.  在 /application/core/MY_Router 创建一个类名 MY_Route，声明为`class MY_Router extends CI_Router`.
2.  您可以覆盖该方法`_set_routing()`：

    > 此函数根据 URI 请求以及在路由配置文件中设置的任何“路由”确定应提供的服务。

它应该更复杂，但至少可以引导您找到另一个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-10T17:44:50.750

Codeigniter 4 解决方案：
第 24 行的 app/config/Routes.php 将值 true 设置为 false

```
$routes->setAutoRoute(false); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-11T10:05:24.790

不，据我所知，不可能在 CodeIgniter 中关闭自动路由约定，但是您可以在 .htaccess 文件中添加条目以将默认路由重定向到您创建的路由。

# javascript - 清除画布中的一部分

> ID：13817393
> 
> 赞同：0
> 
> 时间：2012-12-11T09:39:22.220
> 
> 标签：javascript, html, canvas

我正在画布中创建动画。最初，Canvas 将在其上绘制一组图像。一段时间后，比如 5 秒，必须将图像从其原始位置清除并在单独的位置绘制。

为了清除图像，我尝试使用 context.clearRect() 清除该部分，但没有运气。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:45:21.763

`clearRect`是正确的方法。请注意，如果您应用了转换，它可能会清除画布中的另一个矩形。您始终可以使用以下方法解决此问题：

```
// I have lots of transforms right now
ctx.save();
ctx.setTransform(1, 0, 0, 1, 0, 0);
// Will always clear the right space
ctx.clearRect(x, y, width, height);
ctx.restore();
// Still have my old transforms 
```

# jquery - 发送 ID 但显示标签

> ID：13817395
> 
> 赞同：3
> 
> 时间：2012-12-11T09:39:30.927
> 
> 标签：jquery, ajax, tag-it

我正在使用 jQuery 插件[Tag-It](https://github.com/aehlke/tag-it)来处理自动建议和标记。我正在使用`Ajax`运行良好的调用获取数据。

目前的数据以以下格式返回：

```
{"itemID":"ItemName"} 
```

例如：

```
{"1":"Yellow","2":"Green"} 
```

这一切顺利。

我想要做的是让用户点击返回的标签，并将数据存储在隐藏字段中，如下所示：

```
<input type="hidden" name="tag['itemID']['itemName']"/> 
```

我似乎无法弄清楚该怎么做，有没有人有这方面的经验并能够指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:33:39.107

为此，需要将从自动完成 Ajax 调用返回的额外数据传递给 Tag-it 标记事件。

将变量添加`itemId`到范围，该变量将用于存储来自自动完成项的附加数据：

```
{
    var itemId; 
```

获取对标签元素的引用，以便可以调用创建标签行为

```
 var theTags = $('#tags');

    theTags.tagit({ 
```

处理`select`自动完成事件并存储来自所选自动完成项的附加数据，然后创建标签。

```
 autocomplete: {
            source: [{id:1,value:'New 1'},{id:2,value:'New 2'}],
            select: function(event,ui) {
                itemId = ui.item.id;
                theTags.tagit("createTag", ui.item.value);
                return false;
            }
        }, 
```

处理`afterTagAdded`Tag-it 的事件。在这里可以实现修改刚刚添加的标签的任何自定义行为。

```
 afterTagAdded: function(event, ui) {
            if (itemId) {
                $(ui.tag).find('input')
                     .attr('name', "tag[\'" + itemId+ "']['" + ui.tagLabel + "']");
                itemId = null;
            }
        }
    });
} 
```

[在http://jsfiddle.net/DCJsj/](http://jsfiddle.net/DCJsj/)上查看此解决方案的工作示例

# r - 跨数据帧计算字符串中的特定字符。应用

> ID：13817397
> 
> 赞同：0
> 
> 时间：2012-12-11T09:39:36.710
> 
> 标签：r, dataframe, sapply

我在这里发现了与此类似的问题： [Count the number of words in a string in R?](https://stackoverflow.com/questions/8920145/count-the-number-of-words-in-a-string-in-r) 在这里 [使用 R 更快地分割字符串和计数字符的方法？](https://stackoverflow.com/questions/2449083/faster-way-to-split-a-string-and-count-characters-using-r) 但我无法在我的示例中工作。我有一个相当大的数据框。其中一列具有特征的基因组位置，并且条目的格式如下：

```
[hg19:2:224840068-224840089:-]
[hg19:17:37092945-37092969:-] 
[hg19:20:3904018-3904040:+]
[hg19:16:67000244-67000248,67000628-67000647:+] 
```

我将这些元素拆分为单独的元素以获得以下内容（即，第一个条目）：

```
hg19    2   224840068   224840089   - 
```

但在第四个条目的情况下，我想将其粘贴到两个单独的位置。IE

```
hg19:16:67000244-67000248,67000628-67000647:+] 
```

变成

```
hg19    16  67000244    67000248    +
hg19    16  67000628    67000647    + 
```

（相邻列中的所有相关数据均从原始数据中填写）

我确定哪些行需要此操作的一种简单方法是简单地计算带有逗号“，”的行，因为它们不会出现在任何其他列的任何其他文本中，除非该特征有多个基因组位置。但是，我在第一个障碍中失败了，因为 sapply 命令错误地为每个条目返回“1”。

```
testdat$multiple <- sapply(gregexpr(",", testdat$genome_coordinates), length) 
```

（或者）

```
testdat$multiple <- sapply(gregexpr("\\,", testdat$genome_coordinates), length)

    table(testdat$multiple)
    1 
    4 
```

使用我上面发布的示例，我希望输出为

```
testdat$multiple
0
0
0
1 
```

实际上在做

```
grep -c 
```

在命令行中的相同数据上显示我有 10 个包含“，”的条目。

使用我上面发布的示例，我希望输出为

所以最初我想让这个工作，但我也有点难以理解如何提取两个（或更多）位置并将它们放在自己的行上，填充相邻的数据。实际上我的意图是坚持我知道的东西（在命令行上）用'，'out grepping行，复制文件并拆分和awk选定的列（各个文件中的第一个和第二个位置）然后cat和sort他们。如果我在 R 中有更好的方法来做到这一点，那么我会喜欢一个指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:35:35.683

`gregexpr` 实际上返回一个长度为 1 的对象。如果你想找到匹配的行和不匹配的行，那么你需要查看返回的*值*，而不是长度。匹配失败返回`-1`。
尝试`foo<-sapply(testdat$genome, function(x) gregexpr(',',x)); as.logical(foo)`用逗号获取行。

# jquery - Flot 图中 x 和 y 轴的标题

> ID：13817403
> 
> 赞同：8
> 
> 时间：2012-12-11T09:39:56.197
> 
> 标签：jquery, graph, flot

是否可以在浮动图中显示 x 和 y 轴的标题？

以下是代码：

```
 $.plot($("#placeholder_1w"), [d], {
        series: {
        lines: { show: true, fill: false, fillColor: "red" },
        points: { show: true, fill: true,fillColor: "red"  }
    },
        grid: { hoverable: true, clickable: true , color: 'green'},
        xaxis: {
            mode: "time",
            minTickSize: [1, "day"],
            min: (myWeekDate).getTime(),
            max: (new Date()).getTime()
        },
        colors: ["red", "green", "#919733"]
    }); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T17:18:05.917

Flot 本身不支持轴标签，但您可以使用 html 和 css 轻松添加它们，并对您的 flot 选项进行一些修改。

[浮动站点](http://flotcharts.org)上的演示具有 y 轴标签。它是通过将具有某些类的 div 附加到 flot 容器来创建的：

```
var xaxisLabel = $("<div class='axisLabel xaxisLabel'></div>")
  .text("My X Label")
  .appendTo($('#placeholder_1w'));

var yaxisLabel = $("<div class='axisLabel yaxisLabel'></div>")
  .text("Response Time (ms)")
  .appendTo($('#placeholder_1w')); 
```

然后，你需要这样的 CSS：

```
.axisLabel {
    position: absolute;
    text-align: center;
    font-size: 12px;
}

.xaxisLabel {
    bottom: 3px;
    left: 0;
    right: 0;
}

.yaxisLabel {
    top: 50%;
    left: 2px;
    transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    -ms-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -webkit-transform:  rotate(-90deg);
    transform-origin: 0 0;
    -o-transform-origin: 0 0;
    -ms-transform-origin: 0 0;
    -moz-transform-origin: 0 0;
    -webkit-transform-origin: 0 0;
} 
```

如果您需要支持 IE6/7，不幸的是，还有更多技巧需要处理 - 您希望通过执行以下操作将您的 body 标签标记为“ie6”或“ie7”类：

```
<!--[if IE 6]><body class="ie ie6"><![endif]-->
<!--[if IE 7]><body class="ie ie7"><![endif]-->
<!--[if IE 8]><body class="ie ie8"><![endif]-->
<!--[if IE 9]><body class="ie ie9"><![endif]-->
<!--[if gt IE 9]><body class="ie"><![endif]-->
<!--[if !IE ]><!--><body><!--<![endif]--> 
```

然后是这个额外的 CSS：

```
.ie7 .yaxisLabel, .ie8 .yaxisLabel {
    top: 40%;
    font-size: 36px;
    filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.0, M12=0.33, M21=-0.33, M22=0.0,sizingMethod='auto expand');
} 
```

最后，在我尝试这样做时，我发现我需要为 y 轴指定一个固定的 labelWidth，为 x 轴指定一个固定的 labelHeight。

在此处查看一个工作示例：http: [//jsfiddle.net/ryleyb/U82Dc/](http://jsfiddle.net/ryleyb/U82Dc/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T09:46:21.470

这里有一个 flot 插件：[https](https://github.com/mikeslim7/flot-axislabels) ://github.com/mikeslim7/flot-axislabels来实现轴标签。

但是，低于 9.0 版的 IE 浏览器不支持它。@Ryley 的解决方案很酷。

# objective-c - 目标c中的nan double

> ID：13817407
> 
> 赞同：0
> 
> 时间：2012-12-11T09:40:09.990
> 
> 标签：objective-c, double, division, nan, multiplication

我有这个等式

`double x = ((newCount/allCount)/.8)*5.0;`

`newCount`是一个值为 0 `allCount`的双精度 是一个值为 0 的双精度

结果`x`是`-nan(0x8000000000000)`

为什么会发生这种情况以及如何检查该**`objective c`**值以为其分配默认值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:45:06.340

你正在[以零的速度潜水](http://en.wikipedia.org/wiki/Division_by_zero)。您可以使用以下方法检查它：

```
isnan(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:48:03.737

问题是分母 ( `allCount`) 为 0；不允许除以零，答案不是数字。您可以做的最简单的事情是在进行除法之前对其进行测试：

```
if (allCount != 0) {
  x = ((newCount/allCount)/.8)*5.0
} else {
  x = defaultValue;
} 
```

使用 C 的浮点环境和测试`FE_DIVBYZERO`异常有更复杂的方法，但是虽然这是标准的，但它很少使用，因此对于以后的代码读者来说可能更难理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:42:35.510

allCount 为 0，因此您只需除以 0（如果您不知道，这是不可能的。）因此，在分配 x 之前，请先确保 allCount 不为 0。

```
if (allCount != 0)
    double x = ((newCount/allCount)/.8)*5.0; 
```

# java - 如何在 JTable 的单元格上禁用鼠标单击事件？

> ID：13817409
> 
> 赞同：0
> 
> 时间：2012-12-11T09:40:16.820
> 
> 标签：java, swing, jtable, mouseevent, tablecelleditor

我正在验证 JTable 的特定列。我的要求是该列的所有单元格应该只允许字母表。我已将 keylistener 添加到 Jtable 的对象并编写了一些逻辑如下：

```
public void keyTyped ( KeyEvent e ) {

    if(!(e.getKeyChar()>='a' &&e.getKeyChar()>='z')) {
        getToolkit.beep();
    } 
} 
```

最初，当焦点在单元格上并键入某些内容时，按键事件会很好地触发，但是当我单击同一个单元格并键入内容时，按键事件不会被触发。所以我决定在 JTable 上禁用鼠标点击事件。如何禁用 JTable 单元格上的鼠标单击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:47:15.987

只需在该列上设置一个不允许输入错误字符的特定单元格编辑器。可以肯定的是，我还将`TableModel`通过正确覆盖来验证您的输入`setValueAt(Object, int, int)`：

这是一个仅允许从 A 到 Z 和 a 到 z 的字符的示例：

```
import java.awt.BorderLayout;
import java.util.Vector;

import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;
import javax.swing.text.PlainDocument;

public class TestTable {

    private static final String ALPHA_ONLY_REGEXP = "\\p{Alpha}*";
    private static final String NONALPHA_REGEXP = "[^\\p{Alpha}]+";
    private int ALPHA_ONLY_COLUMN_INDEX = 2;

    protected String validateAndFixString(String string) {
        if (!string.matches(ALPHA_ONLY_REGEXP)) {
            string = string.replaceAll(NONALPHA_REGEXP, "");
        }
        return string;
    }

    protected void initUI() {
        final DefaultTableModel model = new DefaultTableModel() {
            @Override
            public void setValueAt(Object aValue, int row, int column) {
                if (column == ALPHA_ONLY_COLUMN_INDEX) {
                    if (aValue != null) {
                        aValue = validateAndFixString((String) aValue);
                    }
                }
                super.setValueAt(aValue, row, column);
            }
        };
        for (int i = 0; i < 5; i++) {
            model.addColumn("Col-" + (i + 1));
        }
        for (int i = 0; i < 200; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 5; j++) {
                if (j == ALPHA_ONLY_COLUMN_INDEX) {
                    row.add("AlphabetOnly");
                }
                row.add("New cell - " + (j + 1));
            }
            model.addRow(row);
        }
        JTable table = new JTable(model);
        JTextField alphaOnly = new JTextField();
        ((PlainDocument) alphaOnly.getDocument()).setDocumentFilter(new DocumentFilter() {
            @Override
            public void insertString(FilterBypass fb, int offset, String string, AttributeSet attr) throws BadLocationException {
                string = validateAndFixString(string);
                super.insertString(fb, offset, string, attr);
            }

            @Override
            public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {
                text = validateAndFixString(text);
                super.replace(fb, offset, length, text, attrs);
            }
        });
        table.getColumnModel().getColumn(ALPHA_ONLY_COLUMN_INDEX).setCellEditor(new DefaultCellEditor(alphaOnly));
        JFrame frame = new JFrame(TestTable.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:04:57.363

也许禁用鼠标事件不是一个好主意。正如您没有明确说的那样，我不知道您想要实现什么；您可以尝试以下一些方法：

1.  禁用表本身：`table.disable();`

2.  使单元格不可编辑（在表格模型上）：

    public boolean isCellEditable(int row, int col) {
    return false;
    }

如果你必须禁用鼠标事件，也许可以尝试添加一个什么都不做的鼠标监听器：

```
table.addMouseListener(java.awt.event.MouseAdapter  
  {  
    public void mouseClicked( java.awt.event.MouseEvent e)  
    {  
      // do nothing...  
    }  
  }); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:14:34.040

您需要将该 keylistener 添加到您的编辑器中。

一旦编辑开始在该编辑器中关注焦点，不再关注您的 jtable。

# php - json_decode 忽略 XAMPP 下的 options 参数（php 5.4.7）

> ID：13817411
> 
> 赞同：1
> 
> 时间：2012-12-11T09:40:21.203
> 
> 标签：php, json

我遇到了使用 json_decode 解码大 int 的典型问题，并尝试使用*JSON_BIGINT_AS_STRING*选项，但似乎 php 忽略了该参数。

我尝试了 php.net 示例代码：

```
$json = '12345678901234567890';

var_dump(json_decode($json));
var_dump(json_decode($json, false, 512, JSON_BIGINT_AS_STRING)); 
```

输出应该是：

```
float(1.2345678901235E+19)
string(20) "12345678901234567890" 
```

但是在我的服务器（xampp php 5.4.7）中，我有：

```
float(1.2345678901235E+19)
float(1.2345678901235E+19) 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:20:29.850

**编辑：**

我必须确认这一点，但这种行为已被归类为 PHP 中的错误。有关更多详细信息，请参阅[错误报告](https://bugs.php.net/bug.php?id=63737)。

现有行为会导致您的字符串在PHP 内部被转换为 int/float（*数字类型）。*如果您提供 JSON 编码的对象、数组或字符串，该函数会执行它所描述的操作，但现在这反映了错误的行为。

```
$json = '12345678901234567890';

var_dump(json_decode($json));           /* float(1.2345678901235E+19) */
var_dump(json_decode($json, false, 512, 
         JSON_BIGINT_AS_STRING));       /* float(1.2345678901235E+19) */ 
```

如您所见，两者都给了我们一个浮点数，但是当我们使用有效的 JSON 对象、数组或有效的 JSON 作为字符串时，我们会得到预期的结果。

```
$jsonStr = '"12345678901234567890"';        // as a string
$jsonArr = '[12345678901234567890]';        // as an array
$jsonObj = '{"num":12345678901234567890}';  // as an object

var_dump(
         json_decode($jsonStr), /* It's JSON_BIGINT_AS_STRING by default in 5.4 */
         json_decode($jsonArr),
         json_decode($jsonArr, false, 512, JSON_BIGINT_AS_STRING),
         json_decode($jsonObj),
         json_decode($jsonObj, false, 512, JSON_BIGINT_AS_STRING)
); 
```

输出如下所示...

```
string(20) "12345678901234567890"
array(1) {
  [0]=>
  float(1.2345678901235E+19)
}
array(1) {
  [0]=>
  string(20) "12345678901234567890"
}
object(stdClass)#1 (1) {
  ["num"]=>
  float(1.2345678901235E+19)
}
object(stdClass)#2 (1) {
  ["num"]=>
  string(20) "12345678901234567890"
} 
```

这应该很快就会解决，但现在我只想更新我的答案以反映这些新信息。

# java - 使用 indexOf 时类似 equalsIgnoreCase

> ID：13817413
> 
> 赞同：5
> 
> 时间：2012-12-11T09:40:29.867
> 
> 标签：java, arrays, string

我正在使用此代码来获取数组中字符串的索引。

```
int n = Arrays.asList(Names).indexOf(textBox.getText()); 
```

这里的问题是，如果**textBox**中的 String 与 Array 中的类似 String 的**大小写**不同。它返回**-1**。在字符串比较的情况下，如何使其类似于**equalsIgnoreCase**。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:48:30.413

您可以使用 Collat​​or 类。在这里，您可以设置不同的级别进行比较。您可以忽略大小写，并设置一些特定的语言字符。例如，在德语中，它可以设置 ß 等于 ss。

这是一些纪录片：Collat​​or [类](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/Collator.html)

编辑：这是给你的示例代码

```
private int indexOf(String[] original, String search) {
    Collator collator = Collator.getInstance(); 
    collator.setStrength(Collator.SECONDARY);
    for(int i = 0;i<original.length;++i) {
        if(collator.equals(search, original[i]))
            return i;
    }
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:06:18.660

您可以使用Apache 公共库的[StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#indexOfIgnoreCase%28java.lang.String,%20java.lang.String,%20int%29)类，或者[如果](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#indexOfIgnoreCase%28java.lang.String,%20java.lang.String%29)您不想下载该库，请查看[源代码](http://www.jarvana.com/jarvana/view/com/alibaba/citrus/tool/antx-autoconfig/1.0.10/antx-autoconfig-1.0.10-sources.jar!/org/apache/commons/lang/StringUtils.java?format=ok)以了解创建方法的逻辑。使用 StringUtils的[stackoverflow链接](https://stackoverflow.com/questions/8660151/how-do-i-use-stringutils-in-java)

如果你想从字符串数组中找到字符串的索引，那么还有另一个库[ArrayUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)有一个方法[indexOf](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)

这是 indexOf 的实现

```
 public static int indexOf(Object[] array, Object objectToFind, int startIndex) {
        if (array == null) {
            return INDEX_NOT_FOUND;
        }
        if (startIndex < 0) {
            startIndex = 0;
        }
        if (objectToFind == null) {
            for (int i = startIndex; i < array.length; i++) {
                if (array[i] == null) {
                    return i;
                }
            }
        } else {
            for (int i = startIndex; i < array.length; i++) {
                if (objectToFind.equals(array[i])) {
                    return i;
                }
            }
        }
        return INDEX_NOT_FOUND;
    } 
```

因为你可以看到它使用 .equals() 我建议你

1）创建自定义字符串类

2）将其添加到数组中

3）像这样覆盖 .equals 方法

```
class StringCustom
{
String string;
//implement getters and setters
public String equals(Object o)
{
return this.getString().equalsIgnoreCase(((String)o).getString());
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:44:42.110

一种不同的方法，在内部确保忽略大小写。

```
public static int indexOfIgnoreCase(String[] strs, String text){

   int n = strs.length;
   for(int i=0;i<n;i++){
       if(strs[i].equalsIgnoreCase(text))
         return i;
   }
   return -1;
}
int n = indexOfIgnoreCase(Names,textBox.getText()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:19:33.610

`ArrayList`你可以这样扩展

```
 public class StringArrayList extends ArrayList<String> {
        @Override
        public boolean contains(Object o) {
            String paramStr = (String)o;
            for (String s : this) {
                if (paramStr.equalsIgnoreCase(s)) return true;
            }
            return false;
        }

        public int indexOf(Object o) {
            String paramStr = (String)o;
            int index = 0;
            for (String s : this) {
                if (paramStr.equalsIgnoreCase(s)) return index;
                index++;
            }
            return -1;
        }
    } 
```

最终 ：

```
int n = new StringArrayList(Arrays.asList(Names)).indexOf(textBox.getText()); 
```

# exception - 使用在 JBoss AS 上运行的 EclipseLink 处理 JTA 异常

> ID：13817422
> 
> 赞同：0
> 
> 时间：2012-12-11T09:41:04.587
> 
> 标签：exception, jpa, eclipselink, jboss7.x, jta

## 使用

*   Java 1.6
*   JBoss AS 7.1.1
*   EclipseLink 2.4.1
*   JTA

## 更新的问题

当我在使用flush的try catch中自己处理错误时，如何抑制JBoss抛出的堆栈跟踪？

## 问题

我正在尝试使用*em.persist(entity)*来持久化一个实体。如果没有违反数据库约束，一切正常。但是，如果持久化实体违反了唯一约束，则会引发异常。我正在使用 JBoss 处理的事务，因此异常是从另一个线程引发的。

我已经发现我可以通过在 persistence.xml 中设置*eclipselink.exception-handler来全局处理这些异常。*

我的问题是如何在本地捕获和处理这些异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:20:47.853

调用 em.flush() 会立即将语句强制发送到数据库，并且可以包装在 try catch 块中以在提交发生之前处理异常，尽管大多数持久性异常都会将事务标记为回滚。

# c# - 在 asp.net 中的 div 内打开网页

> ID：13817432
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:41:40.697
> 
> 标签：c#, asp.net, iframe, webpage, modalpopup

我需要在我的 asp 应用程序中浏览网络，为此我删除了一个 iframe。

但在那之后，我发现出于安全考虑，某些网站（如 google、fb、youtube 等）不会在 iframe 中打开。

在与我的同事讨论后，我想到了一种在 div 中显示网页（就像 iframe 一样）然后在模式弹出窗口中显示该 div 的解决方案，其中用户可以导航到该模式弹出窗口中的任何页面

但是经过一些初步搜索，我还没有找到可以开始实现目标的任何东西。所以，我想在这里问它。

谁能指导我正确的方向来帮助我实现我的目标。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:00:21.453

看这个例子：

```
$('#btnShowModal').click(function () {
            $.post
            (
                'MyController',
                {
                    some parameters to pass
                },
                function (htmlResult) {
                    $('#dialogWindowContent').html('');
                    $('#dialogWindow').dialog(
                    {
                        title: 'Title',
                        autoopen: true,
                        width: 'auto',
                        //height: 180,
                        resizable: false,
                        modal: true,
                        draggable: false
                    });
                    $(window).resize(function () {
                        $("#dialogWindow").dialog("option", "position", "center");
                    });
                    //position of modalWindow will always be in center of your browser window

                    $('#dialogWindowContent').append(htmlResult);
                    $("#dialogWindow").dialog("option", "position", "center");
                });
            return false;
        }); 
```

这是我的按钮和 div 到模态窗口：

```
<input type="button" value="Add theme" id="btnShowModal" />
<div id="dialogWindow">
    <div id="dialogWindowContent">
    </div>
</div> 
```

我把它写到我的 MVC 应用程序中。据了解，您应该只重写 post-method。因为`htmlResult`您可以返回任何 html 代码，它将显示在您的模态窗口中。

我希望，它对你有用。

# matlab - 使用 mrdivide (B/A) 独立求解行？

> ID：13817437
> 
> 赞同：0
> 
> 时间：2012-12-11T09:42:04.353
> 
> 标签：matlab, matrix, equation-solving

当我回答[这个](https://stackoverflow.com/q/13815869/1884905)问题时，我的[回答](https://stackoverflow.com/a/13816203/1884905)是这样开始的：“首先，您可以通过将所有名称存储在一个单元格中来摆脱所有 if 语句。”

“初学者”位是因为我认为我可以使用矢量化解决方案添加编辑。但是当我尝试这样做时，我遇到了矢量化 mrdivide (b/a) 的使用的麻烦。

我的问题（在代码下方标记）是是否可以在`b(z,:)/a(z,:)`不使用循环的情况下解决。换句话说，为`b/a`矩阵的每一行独立求解。

```
person = [98   206    35   114;
          60   206    28    52;
         100   210    31   116;
          69   217    26    35;
          88   213    42   100];

person1 = [93 208 34 107];

allNames = {'Cameron'; 'David'; 'Mike'; 'Bill'; 'Joe'};

n = 5;
a = max(person,repmat(person1,n,1));
b = min(person,repmat(person1,n,1));

for z = 1:5
    percent_error = b(z,:)/a(z,:);          %// Here is my question
    if percent_error >= 0.85
        disp(['Match, its ', allNames{z} ,'!'])
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:06:56.153

您确实可以通过矢量化操作来消除循环。诀窍是使用对角块矩阵。每个块都是只有一行的矩阵（每次都是不同的行）。`a`在为和 for创建这样的块矩阵后`b`，您可以使用`mrdivide`：

```
% # Without loop
tic
A = zeros(size(a) * size(a, 1));
B = zeros(size(b) * size(b, 1));
V = ones(size(a, 2), 1) * (1:size(a, 1));
idx = (0:size(A, 1):numel(A) - 1) + (V(:)' - 1) * size(a, 1) + 1;
A(idx) = a';
B(idx) = b';
X = diag(B / A);
percent_error1 = X(1:size(a, 1):end);
toc

% # With loop
tic
percent_error2 = zeros(5, 1);
for z = 1:5
    percent_error2(z) = b(z,:) / a(z,:);
end
toc 
```

结果是：

```
Elapsed time is 0.000160 seconds.
Elapsed time is 0.000048 seconds.

percent_error1 =
    0.9741
    0.8516
    0.9670
    0.8221
    0.9611

percent_error2 =
    0.9741
    0.8516
    0.9670
    0.8221
    0.9611 
```

请注意，这是大型数组的矩阵划分比`for`循环花费更长的时间的情况之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:45:53.863

我在想这个：

```
person/person1 
```

但这只有在 person 中的每个索引都大于 person1 中的相应索引时才会产生良好的结果。

# javascript - 如何在 Javascript 中解码 JSON？

> ID：13817445
> 
> 赞同：1
> 
> 时间：2012-12-11T09:42:26.180
> 
> 标签：javascript, python, json

我有一个用 Python 编码的 JSON 对象。我不知道我是否正确地进行了编码。

```
 proc = subprocess.Popen(['sshpass', 
                             '-p', 
                             password, 
                             'rsync', 
                             '-avz', 
                             '--info=progress2', 
                             source12, 
                             destination], 

                      stderr=subprocess.PIPE, 
                         stdout=subprocess.PIPE).communicate()[0]
progress = json.dumps(proc)
return HttpResponse(progress, mimetype="application/json") 
```

我想在 JAVASCRIPT 中使用对象“进度”来显示 Django 模板中的进度条。怎么做？谢谢

我正在尝试在这样的 Django 模板中实现它：

```
<script type="text/javascript" language="javascript">
function popUp() {
var jsProgress = JSON.parse(progress)
document.write(jsProgress)
}
</script> 
```

但这并没有说明什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:46:11.863

[您可以使用 JSON.parse("string") https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)解码任何字符串（不关心 mime 类型）

因此，只需将服务器的响应传递给此方法，如下所示：

```
var jsObject = JSON.parse(server.response); 
```

# sql-server-2005 - 更改 SQL Server 2005 上的兼容性级别可能很危险？

> ID：13817450
> 
> 赞同：0
> 
> 时间：2012-12-11T09:42:36.103
> 
> 标签：sql-server-2005, compatibility-level

我们需要在 SQL Server 2005 数据库上执行查询，以获取有关最长执行时间的一些统计信息。

我们找到了下一个查询：

```
select top 10 source_code,stats.total_elapsed_time/1000000 as seconds,
last_execution_time from sys.dm_exec_query_stats as stats 
cross apply
(SELECT text as source_code FROM sys.dm_exec_sql_text(sql_handle))
AS query_text
order by total_elapsed_time desc 
```

它工作正常，但它要求数据库具有 90 兼容级别（SQL Server 2005）。这个数据库有80级（SQL Server 2000）。换成90的话……会不会对日常任务有危险？我的意思是，如果我们更改它，我们的应用程序会崩溃吗？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:00:24.087

最后我不需要了。还有另一个具有 90 兼容级别的数据库，我使用了那个。

# google-analytics-api - Google Analytics API 简易仪表板 Javascript 库

> ID：13817451
> 
> 赞同：3
> 
> 时间：2012-12-11T09:42:36.497
> 
> 标签：google-analytics-api, service-accounts

我想使用 Google Analytics API 在我们的 CMS 中显示分析数据。由于每个网站都在自己的域（如 domain.com/cms）下运行 CMS，因此我不想使用 webapplication API 访问。我想使用 API 服务帐户，因此没有使用 API 进行域检查，而是使用客户端 ID（不同于 Web 应用程序访问）和私钥。

到目前为止，一切都很好。我建立了与 API 的连接，我可以读取谷歌分析数据。但我想展示一些图表。

Easy Dashboard Javascript 库非常方便，但它使用 Web 应用程序 API 访问，因此它会检查调用它的 URL。我不想要这个。有没有办法简单地创建图表（使用这个库或另一个），并使用服务帐户 API 访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T07:34:41.857

You can get the data from your Google Analytics Service Account and use the data to create charts using the many libraries available using javascript or jquery. [http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)

# sql - 如何在 SQL Server 中生成加密安全号码？

> ID：13817452
> 
> 赞同：20
> 
> 时间：2012-12-11T09:42:42.937
> 
> 标签：sql, sql-server, cryptography

我目前正在使用 guid `NEWID()`，但我知道它不是加密安全的。

有没有更好的方法在 SQL Server 中生成加密安全数字？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-06T18:36:10.557

`CRYPT_GEN_RANDOM`记录为返回“加密随机数”。

它需要一个长度参数`1`，`8000`它是要返回的数字的长度（以字节为单位）。

对于长度 <= 8 字节。这可以直接转换为[SQL Server 整数类型](http://msdn.microsoft.com/en-gb/library/ms187745.aspx)之一。

```
+-----------+------------------+---------+
| Data type |      Range       | Storage |
+-----------+------------------+---------+
| bigint    | -2^63 to 2^63-1  | 8 Bytes |
| int       | -2^31 to 2^31-1  | 4 Bytes |
| smallint  | -2^15 to 2^15-1  | 2 Bytes |
| tinyint   | 0 to 255         | 1 Byte  |
+-----------+------------------+---------+ 
```

其中三个是有符号整数，一个是无符号整数。以下将分别使用其各自数据类型的全部范围。

```
SELECT 
      CAST(CRYPT_GEN_RANDOM(1)  AS TINYINT),
      CAST(CRYPT_GEN_RANDOM(2)  AS SMALLINT),
      CAST(CRYPT_GEN_RANDOM(4)  AS INT),
      CAST(CRYPT_GEN_RANDOM(8)  AS BIGINT) 
```

也可以提供比数据类型存储更短的值。

```
SELECT CAST(CRYPT_GEN_RANDOM(3)  AS INT) 
```

在这种情况下，只能返回正数。符号位将始终为 0，因为最后一个字节被视为`0x00`。以上可以返回的可能数字的范围是介于`0`和 `POWER(2, 24) - 1`包括之间。

假设要求是在 之间生成一些随机数`1 and 250`。

一种可能的方法是

```
SELECT  ( 1 + CAST(CRYPT_GEN_RANDOM(1)  AS TINYINT) % 250) AS X
INTO #T
FROM master..spt_values V1,  master..spt_values 
```

然而这种方法有一个问题。

```
SELECT COUNT(*),X
FROM #T
GROUP BY X
ORDER BY X 
```

前十行结果是

```
+-------+----+
| Count | X  |
+-------+----+
| 49437 |  1 |
| 49488 |  2 |
| 49659 |  3 |
| 49381 |  4 |
| 49430 |  5 |
| 49356 |  6 |
| 24914 |  7 |
| 24765 |  8 |
| 24513 |  9 |
| 24732 | 10 |
+-------+----+ 
```

较低的数字（在这种情况下`1 -6`）的生成频率是其他数字的两倍，因为模函数有两个可能的输入可以生成每个结果。

一种可能的解决方案是丢弃所有 >= 250 的数字

```
UPDATE #T
SET    X = CASE
             WHEN Random >= 250 THEN NULL
             ELSE ( 1 + Random % 250 )
           END 
FROM #T
CROSS APPLY (SELECT CAST(CRYPT_GEN_RANDOM(1) AS TINYINT)) CA (Random) 
```

这似乎在我的机器上工作，但可能不能保证 SQL Server 只会`Random`在`CASE`表达式中的两个引用中评估一次函数。此外，它仍然存在需要第二次和后续通过来修复`NULL`丢弃随机值的行的问题。

声明一个标量 UDF 可以解决这两个问题。

```
/*Work around as can't call CRYPT_GEN_RANDOM from a UDF directly*/
CREATE VIEW dbo.CRYPT_GEN_RANDOM1 
AS
SELECT CAST(CRYPT_GEN_RANDOM(1) AS TINYINT) AS Random

go

CREATE FUNCTION GET_CRYPT_GEN_RANDOM1()
RETURNS TINYINT
AS
BEGIN
    DECLARE @Result TINYINT

    WHILE (@Result IS NULL OR @Result >= 250)
            /*Not initialised or result to be discarded*/
        SELECT @Result = Random FROM dbo.CRYPT_GEN_RANDOM1 

    RETURN @Result

END 
```

进而

```
UPDATE #T
SET    X  = dbo.GET_CRYPT_GEN_RANDOM1() 
```

或者更直接地，人们可以简单地使用

```
CAST(CRYPT_GEN_RANDOM(8)  AS BIGINT) % 250 
```

因为范围`bigint`如此之大，以至于任何偏差都可能微不足道。可以从上面的查询`1`中生成73,786,976,294,838,208 种方式和 73,786,976,294,838,206 种方式。`249`

如果甚至不允许那么小的可能偏差，您可以丢弃任何值`NOT BETWEEN -9223372036854775750 AND 9223372036854775749`，如前所示。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-11T09:52:22.180

有趣的问题:)

我认为这会起作用：[`CRYPT_GEN_RANDOM`](http://msdn.microsoft.com/en-us/library/cc627408.aspx)

# android - 将 NDEF 记录隐藏到 NDEF 消息中？

> ID：13817462
> 
> 赞同：0
> 
> 时间：2012-12-11T09:43:20.987
> 
> 标签：android, nfc, rfid, payload, ndef

我开发了 2 个 Android 应用程序。第一个，写入NFC标签，第二个读取我写的内容。

这就是我在第一个应用程序（WriteNFC）中所做的

```
private NdefRecord createRecord1(String data)
{ 
byte[] payload = data.getBytes(Charset.forName("UTF-8"));
byte[] empty = new byte[] {};
return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, empty, empty, payload);
}
private NdefRecord createRecord2(String data)
{ 
byte[] payload = data.getBytes(Charset.forName("UTF-8"));
byte[] empty = new byte[] {};
return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, payload, empty, empty);
} 
```

而在第二个应用程序（ReadNFC）中

```
NdefRecord cardRecord = msg.getRecords()[1];//Extract the second Record
String url_data = new String(cardRecord.getType());//Read data type 
```

当我使用自己的应用程序（ReadNFC）阅读时，屏幕上当然只有第二条记录的有效负载，我通过“记录类型”存储了它。但是对于第三方应用程序，尤其是本机安装的（“标签”）-如图所示-，它可以正确显示第一条记录，而第二条记录是一个空字段。我怎样才能隐藏这个字段。否则，如何强制其他第三方应用程序不读取第二条记录？

![在此处输入图像描述](../Images/fddae25d1956525ea1ef2494a9f1c3d9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:16:30.430

你根本无法做到这一点。Android 将读取完整的 NDEF 消息（即所有记录）并将其在 Intent 中传递给应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:01:23.807

Upps，难怪会发生这种情况，看看你的代码。第一的

```
return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, empty, empty, payload); 
```

然后

```
return new NdefRecord(NdefRecord.TNF_ABSOLUTE_URI, payload, empty, empty); 
```

因此，第 3 方应用程序确实显示了正确的数据，您的记录创建中存在错误。

android 中的本机 NDEF 支持有些粗糙（基于字节数组），所以我编写了一个有助于创建记录的[库- 您可能会觉得这很有趣。](http://code.google.com/p/ndef-tools-for-android/)上述问题可能很容易解决，但还有许多其他更复杂的记录类型，所以一些帮助可能会派上用场;-)

编辑：因此，如果这是首选结果，请创建一个未知记录并将您的“秘密”数据作为有效负载 - 对于任何第 3 方应用程序显示该数据来说，这不是任何好方法 - 而绝对 URI 的 ID任何 NDEF 阅读应用程序都可以显示记录（比如[我](https://play.google.com/store/apps/details?id=com.antares.nfc)的？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:19:45.953

这个第三方应用程序对我来说很麻烦，所以我不得不使用foregroundDispatch 手动读取标签内容，你可以自由地阅读或不阅读任何你想要的东西。此片段来自 OnResume()。`

```
mNfcAdapter.enableForegroundDispatch(this, pendingIntent,
                intentFiltersArray, techListsArray);

            Toast.makeText(getApplicationContext(), "TAG disscovered",
                    Toast.LENGTH_LONG).show();
            Parcelable[] rawMsgs = getIntent()
            .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);

            if (rawMsgs != null) {
                NdefMessage[] msgs = new NdefMessage[rawMsgs.length];

                for (int i = 0; i < rawMsgs.length; i++) {

                    msgs[i] = (NdefMessage) rawMsgs[i];
                    setText=new String(msgs[i].getRecords()[0].getPayload());
                }
                mInfoText.setText(setText);
            }

        }` 
```

在这里，我得到了第一条记录的有效载荷。

# android - RHoMobile 错误 - 网页不可用错误

> ID：13817465
> 
> 赞同：3
> 
> 时间：2012-12-11T09:43:34.273
> 
> 标签：android, rhomobile, rhodes

我正在 rhodes 中构建一个非常简单的应用程序。在我的应用程序中，我有 4 个不同的模型与 CRUD 操作并且没有 Web 服务交互。

有时我会在 android 平板电脑中收到类似“网页不可用”的错误。

它是 iPAD 和 Android 模拟器的工作文件。

我正在使用 rhodes-3.4.2 和 android（3.2 版）平板电脑。

我试图找出此错误导致应用程序崩溃的原因 - “网页不可用”，但无法找到解决方案的任何线索。

你能指导我解决这个问题吗，我需要尽快解决这个问题。

谢谢你们所有人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T16:41:57.983

这可能是 Rhodes/Rhomobile 中的一个错误。我也有这个问题，但不是所有的 Android 3 设备，但仅限于那些没有 3G（只有 WiFi）的设备。有关[https://developer.motorolaso​​lutions.com/thread/3976的更多详细信息](https://developer.motorolasolutions.com/thread/3976)

# go - Go-Sublime-build 配置

> ID：13817467
> 
> 赞同：9
> 
> 时间：2012-12-11T09:43:41.143
> 
> 标签：go, sublimetext2

我在尝试设置 go 以从 Sublime text 2 运行当前文件时遇到问题。这是我的 go.sublime-build 文件中的内容

```
{
    "cmd": [ "go", "run", "${file}" ]
} 
```

当我尝试在 go 源文件上运行构建时，出现错误

```
[Error 6] The handle is invalid
[cmd:  [u'go run', u'C:\\Users\\gprasant\\Documents\\GitHub\\programming_pearls\\src\\go\\quicksort.go']]
[dir:  C:\Users\gprasant\Documents\GitHub\programming_pearls\src\go] 
```

有什么办法可以解决这个问题吗？或者 Sublime text 中是否有另一个用于 Go 开发的插件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T10:53:39.977

安装[GoSublime](https://github.com/DisposaBoy/GoSublime)应该可以为您工作。安装并重新启动 ST2 后：按 ctrl-B，输入“run”并回车。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-13T01:37:42.767

我过得很好

```
{
    "cmd": "go run $file",
    "shell" : true
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-31T14:42:52.393

在 ST3 中：改为：

```
{
    "shell_cmd": "go run ${file}"
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-09T06:22:19.703

在我的 Mac 上，我需要以下代码：

```
/Users/your_user_name/Library/Application Support/Sublime Text 2/Packages/User/go.sublime-build 
```

go.sublime-build

```
{
    "cmd": ["go run '${file}'"],
    "selector": "source.go",
    "path": "/usr/local/go/bin",
    "shell": true
} 
```

*   “cmd”行引用是为了正确处理带空格的文件路径。
*   需要“shell”行，因为注释它会破坏它。
*   需要“path”行，因为基本 shell 无法访问我的 .zshrc 文件，包括定义 go 路径的 export GOPATH 语句。

之后，任何 .go 文件都应该使用 command+B 构建和运行，将 stdout 消息留在内置于 sublime text 2 中的控制台中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T14:29:12.127

关于什么：

```
{
    "cmd": ["go", "run", "${file}"],
    "path": "/user/local/go/bin"
} 
```

我喜欢 GoSublime，只是讨厌每次单击 Command + B 时都输入 run

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-02T01:58:28.007

用于 golang 的 SublimeText 2 构建系统，使 F4/shift-F4**工作**（下一个错误/上一个错误）

1、创建一个文件：~/gosublime_build.sh

```
GOPATH=~/go
export GOPATH 
echo "GOPATH:$GOPATH"

if [ "$3." = "RUN." ]
  then 
     EXENAME=${1##*/}
     EXENAME=$GOPATH/bin/$EXENAME
     echo $EXENAME
     $($EXENAME)
     echo "code: $?"
     exit
fi

echo "go build $2"
cd /usr/local/go/bin
./go build -o ~/temp.go.compiled $2
if [ $? -eq 0 ]
 then
   cd $1
   echo "Project: " $1
   /usr/local/go/bin/go install
   echo "go install exit code: $?"
 else
   echo "go build exit code: $?"
fi 
```

第二：

```
chmod 777 ~/gosublime_build.sh 
```

第三：为“go”创建一个新的 sublime2 构建系统（工具/构建系统/新建）

```
{
"cmd": ["~/gosublime_build.sh $file_path $file"]
,"shell": true
,"selector": "source.go"
,"file_regex": "([\\w/_-]+[.]{1}[\\w./_-]+?):([0-9]+):?([0-9]+)?(.*)?"
} 
```

第四：选择你的新构建系统（工具/构建系统）

第 5 次：使用 Ctrl-B、F4/Shift-F4 构建：下一个/上一个错误

如果有人知道如何指示 go 编译器为每个错误通知文件和行的完整路径，则可以简化此过程

# jquery - Phonegap Paypal 插件 - 定期付款？

> ID：13817468
> 
> 赞同：0
> 
> 时间：2012-12-11T09:43:48.273
> 
> 标签：jquery, ios, cordova, paypal

我刚刚设法为Phonegap（Iphone - [https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/PayPalPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/PayPalPlugin)）设置了Paypal插件，它适用于个人支付。

但是有谁知道这种方法是否可以用来触发定期付款？

这是当前的触发代码 -

```
function onDeviceReady()
{
    try {

    // do your thing!
    document.addEventListener(PayPal.PaymentEvent.Success, onPaymentSuccess,false);
    document.addEventListener(PayPal.PaymentEvent.Canceled, onPaymentCanceled,false);
    document.addEventListener(PayPal.PaymentEvent.Failed, onPaymentFailed,false);

    window.plugins.paypal.prepare(PayPal.PaymentType.DONATION);
    window.plugins.paypal.setPaymentInfo({
            paymentCurrency : "USD",
            paymentAmount : "00.10",
            itemDesc : "network cable",
            recipient : "pabs_1355160222_biz@liquidsolution.co.uk",
            merchantName : "test Account"
    });

    } catch (e) {
        debug.error(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T20:36:51.473

最初的插件有问题。它已被重新编写，现在位于[http://github.com/SnareChops/PayPalPlugin](http://github.com/SnareChops/PayPalPlugin)，并已在沙盒模式下成功测试。

就定期付款而言，目前使用 PayPal 提供的当前 PayPal-SDK 是不可能的。如果他们发布包含此功能的更新 SDK，它将被添加到插件中。

# java - Xstream解析多个列表

> ID：13817469
> 
> 赞同：0
> 
> 时间：2012-12-11T09:43:58.583
> 
> 标签：java, xml-parsing, xstream

我有一个 xml 文件，其中根元素中有多个数组。每当我尝试使用隐式集合声明时，xstream 只处理最后一个声明，其他一切都保持为空。在下面的代码中，第一个数组 ERRORS 保持为空，而 DEBITS 被解析。

```
public class XMLParser {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args){
        String xmlString = "<DebitsWSDS xmlns=\"\"> " + 
                                 "  <DEBITS> " + 
                                 "    <DEBIT_ID>-1</DEBIT_ID> " + 
                                 "  </DEBITS> " + 
                                 "  <DEBITS> " + 
                                 "    <DEBIT_ID>-2</DEBIT_ID> " + 
                                 "  </DEBITS> " + 
                                 "  <ERRORS> " + 
                                 "    <ERROR_ID>1</ERROR_ID> " + 
                                 "  </ERRORS> " + 
                                 "  <ERRORS> " + 
                                 "    <ERROR_ID>2</ERROR_ID> " + 
                                 "  </ERRORS> " + 
                            "</DebitsWSDS> ";
        DebitsWSDS debitsWSDS;
        try {
            debitsWSDS = convertFeesSetXMLResultToDebitsWSDS(xmlString);
            System.out.println(debitsWSDS.ERRORS==null);
            System.out.println(debitsWSDS.DEBITS==null);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

private static DebitsWSDS convertFeesSetXMLResultToDebitsWSDS(String xml) throws Exception{

        XStream xstream = new XStream(new StaxDriver());
            xstream.alias("DebitsWSDS", DebitsWSDS.class);
        xstream.addImplicitCollection(DebitsWSDS.class, "DEBITS");
        xstream.addImplicitCollection(DebitsWSDS.class, "ERRORS");
        xstream.alias("ERROR_ID", String.class);
        //System.out.println(xml);
        DebitsWSDS debitsWSDS =(DebitsWSDS)xstream.fromXML(xml);
        return debitsWSDS;
    }

}

public class DebitsWSDS {

        public List<ERROR> ERRORS;
        public List<DEBIT> DEBITS;

    public class ERROR {
        public String ERROR_ID;
    }

    public class DEBIT {
        public String DEBIT_ID;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:49:06.670

我不太确定你期望它做什么。XStream 是一个 bean/XML 映射工具，您可以有效地将两个 XML 列表映射到`List`bean 中的相同元素。如果你真的想要那个 XML 结构，我会使用 SAX 解析器或类似的东西来构造你的 bean，创建一个空列表并让解析器回调添加到该列表中。

# java - 如何在 NetBeans 中使用 Tess4j

> ID：13817470
> 
> 赞同：1
> 
> 时间：2012-12-11T09:43:57.353
> 
> 标签：java, netbeans

我尝试将 NetBeans(7.2) 项目配置为使用 Tess4J 库。不幸的是，我得到的只是运行时错误：

```
Exception in thread "main" 
  java.lang.NoClassDefFoundError: 
    com/sun/media/imageio/plugins/tiff/TIFFImageWriteParam
at net.sourceforge.tess4j.Tesseract.doOCR(Tesseract.java:166) 
```

经过一段时间的测试和尝试，我在 Eclipse 中制作了一个简单的 Tess4J 项目，一切正常，但我不想将整个项目转换为 Eclipse。两个项目的配置方式相同，但 NetBeans 出于某种原因拒绝工作。

我在 StackOverflow 上找到了一种可能的解决方案，将 libtesseract302.dll、liblept168.dll 和 tessdata 放在 jdk/bin 文件夹而不是项目文件夹中，但我没有机器上的管理员权限，所以这是不可能的。

还有其他方法可以让 Tess4J 在 NetBeans 中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T19:46:40.873

我在tomcat的windows版本下也遇到了同样的问题。

线程“主”java.lang.NoClassDefFoundError 中的异常：net/sourceforge/tess4j/Tesseract

并且

无法加载库“libtesseract302”问题（Tesseract 是 32 位应用程序）。

我通过将 liblept168.dll 和 libtesseract302.dll 添加到 C:\Program Files\Apache Software Foundation\apache-tomcat-7.0.37\bin （放置 tomcat 的二进制文件）并链接 jar 或提供的源代码来解决它通过 Tess4j 到我的项目。

无论如何，在 Linux 下，只有通过引用 Tess4j 项目（并且安装了 Leptonica 并将数据文件放在正确的位置），一切都很顺利

希望这会有所帮助，享受；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T16:10:39.257

Tess4J 本身就是一个 NetBeans 项目。您只需要打开项目、展开测试包并执行包含的单元测试——无需在任何地方复制文件。

# python - python中的复杂生成器

> ID：13817475
> 
> 赞同：1
> 
> 时间：2012-12-11T09:44:16.790
> 
> 标签：python, language-agnostic, generator

我有一个长期运行的任务，必须由外部代码指导。但是外部代码需要一些关于这个任务的信息。这是我的自制示例：

```
def longtask(self):
    yield self.get_step_length(1)
    for x in self.perform_step(1):
        ...
        yield x.id

    yield self.get_step_length(2)
    for x in self.perform_step(2):
        ...
        yield x.value

...
# call site
generator = self.longtask()
step1len = generator.Next()
step1pb = ProgressBar('Step 1', step1len)
# pull only step 1 items
for index, id in itertools.izip(xrange(0, step1len), generator):
    step1pb.update(index)
    ...do something with id

step2len = generator.Next()
step2pb = ProgressBar('Step 2', step1len)
# pull only step 1 items
for index, value in itertools.izip(xrange(0, step1len), generator):
    step2pb.update(index)
    ... do something other with value 
```

在python中使用如此复杂的生成器协议是否正确，或者我需要重构这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:52:26.300

我会将其重构为返回单独的生成器；您可以使用嵌套函数：

```
def longtask(self):
    def step_generator(step):
        for x in self.perform_step(step):
            ...
            yield x.id

    yield step_length_1, step_one_generator(1)
    yield step_length_2, step_one_generator(2)

generators = self.longtask()
for counter, (steplength, stepgen) in enumerate(generators):
    ProgressBar('Step %d' % counter, steplength)
    for index, value in enumerate(stepgen):
        # .... 
```

现在您还可以使用该`enumerate()`功能为项目添加数字；这比将 an`xrange()`和生成器压缩在一起更具可读性。

# android - 在列表视图中没有得到空指针异常的原因

> ID：13817476
> 
> 赞同：1
> 
> 时间：2012-12-11T09:44:17.290
> 
> 标签：android, listview, nullpointerexception

我正在使用带有自定义适配器的列表视图。我得到一个原因未知的空指针异常。我什至尝试调试它，但调试器无法找到异常的位置。这是代码：

```
if(SplashActivity.s_contactNameArrayListSplash != null && SplashActivity.s_contactNameArrayListSplash.size() != 0)
        {
            if(m_contactAdapterSetTheRule  == null)
            {
                m_contactAdapterSetTheRule = new ContactAdapterSetRule(ShowTheContacts1.this, R.layout.showthecontacts, SplashActivity.s_contactNameArrayListSplash);

                //add the footer before adding the adapter, else the footer will not load!
                //  View footerView = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.listfooter, null, false);
                View footerView  = getLayoutInflater().inflate(R.layout.listfooter, null);
                m_lvShowContactsSetTheRule.addFooterView(footerView);

                m_lvShowContactsSetTheRule.setAdapter(m_contactAdapterUpdatingRule);
            }

            m_lvShowContactsSetTheRule.setOnScrollListener(new OnScrollListener(){

                //useless here, skip!
                @Override
                public void onScrollStateChanged(AbsListView view, int scrollState) {}

                @Override
                public void onScroll(AbsListView view, int firstVisibleItem,
                        int visibleItemCount, int totalItemCount) {

                    //what is the bottom item that is visible
                    int lastInScreen = firstVisibleItem + visibleItemCount;             

                    //is the bottom item visible & not loading more already ? Load more !
                    if((lastInScreen == totalItemCount) && !(m_loadingMore)){                   
                        Thread thread =  new Thread(null, loadMoreListItems);
                        thread.start();
                    }
                }
            });

            //Load the first 25 items
            Thread thread =  new Thread(null, loadMoreListItems);
            thread.start();

        }
        else
        {
            Log.e("Info: ","No any contact present in the add Rule Array list");
            Toast.makeText(ShowTheContacts1.this,"No Contact is present in the contact list",Toast.LENGTH_LONG).show();
            Intent intent = new Intent(ShowTheContacts1.this,Settings.class);
            startActivity(intent);
        }       
    }
    catch(Exception e)
    {
        Log.e("Exception: ",e+" in setTheRuleContactListMaker() of ShowTheContacts1.java");
    }
}

//Runnable to load the items 
Runnable loadMoreListItems = new Runnable() {           
    @Override
    public void run() {
        //Set flag so we cant load new items 2 at the same time
        m_loadingMore = true;

        //Reset the array that holds the new items
        m_myListItems = new ArrayList<String>();

        if(SplashActivity.s_contactNameArrayListSplash.size() < m_itemsPerPage)
            m_itemsPerPage = SplashActivity.s_contactNameArrayListSplash.size();

        //Get 15 new listitems
        for (int i = 0; i < m_itemsPerPage; i++) {      

            //Fill the item with some bogus information
            m_myListItems.add(SplashActivity.s_contactNameArrayListSplash.get(i).toString());                           
        }

        //Done! now continue on the UI thread
        runOnUiThread(returnRes);

    }
};  

//Since we cant update our UI from a thread this Runnable takes care of that! 
Runnable returnRes = new Runnable() 
{
    @Override
    public void run() 
    {
        //Loop thru the new items and add them to the adapter
        if(m_myListItems != null && m_myListItems.size() > 0)
        {
            for(int i=0;i < m_myListItems.size();i++)
            {
                m_contactAdapterSetTheRule.add(m_myListItems.get(i));   
            }
        }

        //Tell to the adapter that changes have been made, this will cause the list to refresh
        m_contactAdapterSetTheRule.notifyDataSetChanged();

        //Done loading more.
        m_loadingMore = false;

    }
}; 
```

这是错误日志：

```
12-11 15:12:28.535: E/AndroidRuntime(794): Uncaught handler: thread main exiting due to uncaught exception
12-11 15:12:28.545: E/AndroidRuntime(794): java.lang.NullPointerException
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.ListView.setupChild(ListView.java:1693)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.ListView.makeAndAddView(ListView.java:1671)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.ListView.fillDown(ListView.java:637)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.ListView.fillFromTop(ListView.java:694)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.ListView.layoutChildren(ListView.java:1521)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.AbsListView.onLayout(AbsListView.java:1113)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.View.layout(View.java:6830)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.View.layout(View.java:6830)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.View.layout(View.java:6830)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.LinearLayout.onLayout(LinearLayout.java:918)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.View.layout(View.java:6830)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.widget.FrameLayout.onLayout(FrameLayout.java:333)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.View.layout(View.java:6830)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.ViewRoot.performTraversals(ViewRoot.java:996)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.os.Looper.loop(Looper.java:123)
12-11 15:12:28.545: E/AndroidRuntime(794):  at android.app.ActivityThread.main(ActivityThread.java:4363)
12-11 15:12:28.545: E/AndroidRuntime(794):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 15:12:28.545: E/AndroidRuntime(794):  at java.lang.reflect.Method.invoke(Method.java:521)
12-11 15:12:28.545: E/AndroidRuntime(794):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-11 15:12:28.545: E/AndroidRuntime(794):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 
```

在这两行之后，调试器正在转向异常本身。

```
Thread thread =  new Thread(null, loadMoreListItems);
        thread.start(); 
```

我已经搜索了很多来解决这个问题，但没有得到任何线索。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:49:38.350

尝试使用：

```
Thread thread =  new Thread(new Runnable() {

        @Override
        public void run() {
            //Set flag so we cant load new items 2 at the same time
    m_loadingMore = true;

    //Reset the array that holds the new items
    m_myListItems = new ArrayList<String>();

    if(SplashActivity.s_contactNameArrayListSplash.size() < m_itemsPerPage)
        m_itemsPerPage = SplashActivity.s_contactNameArrayListSplash.size();

    //Get 15 new listitems
    for (int i = 0; i < m_itemsPerPage; i++) {      

        //Fill the item with some bogus information
        m_myListItems.add(SplashActivity.s_contactNameArrayListSplash.get(i).toString());                           
    }

    //Done! now continue on the UI thread
    runOnUiThread(returnRes);
        }
    } );
        thread.start(); 
```

代替：

```
Thread thread =  new Thread(null, loadMoreListItems);
        thread.start(); 
```

# html - 如何在使用位置时增加图像的宽度：相对

> ID：13817477
> 
> 赞同：0
> 
> 时间：2012-12-11T09:44:18.853
> 
> 标签：html, css, image

这是代码：

```
<table border="1" cellpadding="2" cellspacing="2" height="250">
<tbody>
    <tr>
        <td>
            <div style="background: url('image path goes here';); width: 300px; height: 250px; position: relative;">
<p style="width: 180px; font-size: 12px; margin-top: 35px; position: absolute;">My TEXT goes here....</p>
        </td>
    </tr>
</tbody>
</table> 
```

现在，我需要增加图像的宽度或需要左缩进图像。

我怎样才能做到这一点 ？

我试过直接给出宽度..但它不起作用......

任何意见或建议将不胜感激和感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:15:58.283

您正在使用图像作为父 div 的背景。如果你只想改变图像的大小，你应该使用 img 标签。类似于下面的示例

```
 <table border="1" cellpadding="2" cellspacing="2" height="250" width="300">
<tbody>
    <tr>
        <td>
            <div >
                <img style="float:left;" src="http://www.gravatar.com/avatar/03bc7f86de865926a1cb5036198d00a0?s=32&amp;d=identicon&amp;r=PG" width="150px" height="125px" /></div>
<p style=" display: block; width: 280px; font-size: 12px; margin-top: 35px; position: relative;">We understand you want to choose benefits that suit you and your life. And we regularly review things so we're always offering benefits you say you want to see.</p>
        </td>
    </tr>
</tbody>
</table>​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:14:49.013

您可以使用 CSS3 background-size 属性。

```
.myelement {
    background-size: 275px 125px; /* input your values here */
} 
```

或者，您可以使您的图像内联而不是作为 DIV 的背景，并以这种方式使用常规宽度和高度调整其大小。

关于您发布的代码的几点：

1.  表格应该只用于显示表格数据，而不是用于简单的布局目的。
2.  您没有结束 DIV 标记。

# mysql - mysql加入条件

> ID：13817481
> 
> 赞同：14
> 
> 时间：2012-12-11T09:44:25.827
> 
> 标签：mysql, sql, join, conditional-statements

我有两个具有这种结构的表

```
categories
--------------------------------
id  | create
1   | 2012-12-01 12:00:00
2   | 2012-12-01 12:00:00

category_i18ns
--------------------------------
category_id     | lang  | title
1               | en    | home page
1               | de    | HomE PAGEa
1               | fa    | خانه
2               | en    | about 
```

一些类别具有所有语言数据，而另一些类别具有所有语言数据。例如类别 id 2 刚刚`en`翻译了标题。我想要一个查询，首先检查当前语言以获取检索标题，然后如果不存在则显示另一个。

我有一个查询来使用 i18n 数据获取当前类别数据，在这个当前示例`de`中是默认语言。对于类别 ID `1`，我们有`de`标题，但对于类别`2`我们没有。所以我想要英文版作为类别的标题

```
SELECT * FROM `mhf_swe_ndzhmju3_test`.`categories` AS `Category`
LEFT JOIN `mhf_swe_ndzhmju3_test`.`category_i18ns` AS `CategoryLocale` ON (
`CategoryLocale`.`category_id` = `Category`.`id`
AND `CategoryLocale`.`lang` = 'de') 
```

对“de”语言的渴望

```
Category.id     CategoryLocale.title    CategoryLocale.lang
1               HomE PAGEa              de
2               about                   en 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-11T09:59:52.077

```
SELECT Category.id,
        COALESCE(a.lang, b.lang) lang,
        COALESCE(a.title, b.title) title
FROM   categories AS Category
      LEFT JOIN category_i18ns AS a
           ON a.category_id = Category.id AND a.lang = 'de'
      LEFT JOIN category_i18ns AS b
           ON b.category_id = Category.id AND b.lang = 'en' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/ec947/17)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:36:46.697

如果您有优先顺序，请左加入所有语言并按优先顺序将它们合并：

```
SELECT Category.id,
    COALESCE(a.lang, b.lang, c.lang, d.lang) lang,
    COALESCE(a.title, b.title, c.title, d.title) title
FROM   categories AS Category
  LEFT JOIN category_i18ns AS a
       ON a.category_id = Category.id AND a.lang = 'de'
  LEFT JOIN category_i18ns AS b
       ON b.category_id = Category.id AND b.lang = 'en'
  LEFT JOIN category_i18ns AS c
       ON c.category_id = Category.id AND c.lang = 'fr'
  LEFT JOIN category_i18ns AS d
       ON d.category_id = Category.id AND d.lang = 'es'; 
```

如果您想从随机语言中获取文本，请使用以下查询：

```
SELECT Category.id,
        COALESCE(a.lang, b.lang) lang,
        COALESCE(a.title, b.title) title
FROM   categories AS Category
      LEFT JOIN category_i18ns AS a
           ON a.category_id = Category.id AND a.lang = 'de'
      LEFT JOIN category_i18ns AS b
           ON b.category_id = Category.id
GROUP BY Category.id 
```

[http://sqlfiddle.com/#!2/2beaf/5](http://sqlfiddle.com/#!2/2beaf/5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:34:52.417

好的，这不是最好的解决方案，但我认为应该可以正常工作：

```
SELECT * FROM categories c INNER JOIN category_i18ns t1 
ON c.id = t1.category_id AND t1.lang = 'de'

UNION 

SELECT * FROM categories c LEFT JOIN category_i18ns t2 
ON c.id = t2.category_id and t2.lang != 'de' 
WHERE t2.category_id not in
   (SELECT DISTINCT category_id FROM category_i18ns WHERE lang = 'de') 
GROUP BY c.id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/bcfe6/6)

# jquery - jquery绑定日期选择器和克隆表行

> ID：13817487
> 
> 赞同：0
> 
> 时间：2012-12-11T09:44:44.937
> 
> 标签：jquery, datepicker

我有一个表格行。其中包含一些输入字段。还有一个由 php 代码填充的选择输入字段。这就是为什么我试图在这个问题中使用**jquery 克隆。**对于此处的示例，我将不包括选择输入类型，因为我只想让 datepicker 工作。下面是我的桌子。

```
<input type="button" id="addButton" value="Press to Add">
<table border="1" id="displayData">
  <tr id="addNew" style="display:none;">
    <td colspan='2'><input type='text' name='textTest[]'/></td>
<td><input type="text" name="date[]" class="datePickTest" readonly/></td>
  </tr>
</table> 
```

这是我的jQuery代码。

```
$(function(){
    $("#addButton").click(function(){                  
                 $("#addNew").clone()     
                 .removeAttr('id').show().insertAfter($("#displayData tr:first"));

                 $(".datePickTest").datepicker(

                {   changeYear: true ,
            changeMonth: true ,
            dateFormat: "dd-M-yy",
          //year selection limit to date before today till 1900
        //  yearRange: "1900:" + new Date().getFullYear(),
        //  maxDate :  new Date()
        }); 

            });
     }); 
```

此代码不起作用。所以我试试

```
 $("#addNew").clone(true).removeAttr('id').show()
 .insertAfter($("#displayData tr:first")); 
```

但这确实克隆并与 datepicker 绑定但是当我选择日期时，即使我单击克隆的输入，也只有静态行会获得值。

我实际上想要这样的东西..但使用克隆。

```
var newRow = '<tr><td colspan="3">date: <input type="text" name="date[]" class="datePickTest" readonly/></td></tr>';
$("#displayData tr:first").after($(newRow));

$(".datePickTest").datepicker(
  { changeYear: true ,
    changeMonth: true ,
    dateFormat: "dd-M-yy"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:41:22.560

您必须在克隆元素时指定类名 datePickTest。因为在调用 datepicker 函数时，它会改变隐藏行类名本身。

html

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<input type="button" id="addButton" value="Press to Add">
<table border="1" id="displayData">
  <tr id="addNew" style="display:none;">
    <td>Date: <input type="text" name="date[]" readonly/></td>
  </tr>
</table> 
```

jQuery

```
$(function(){
    $("#addButton").click(function(){
        tr = $("#addNew").clone().removeAttr('id').show()
        tr.find('input[type="text"]').addClass("datePickTest");
        tr.insertAfter($("#displayData tr:first"));
         $(".datePickTest").datepicker(
             {   changeYear: true ,
                changeMonth: true ,
                dateFormat: "dd-M-yy",
        });

    });
}); 
```

请检查[FIDDLE](http://jsfiddle.net/xF9rN/1/)

# c#-4.0 - 无法通过 Json.Net 将继承的属性序列化为 JSON

> ID：13817493
> 
> 赞同：1
> 
> 时间：2012-12-11T09:45:24.847
> 
> 标签：c#-4.0, inheritance, serialization, json.net

我正在使用 C# .NET 4.0 和 Newtonsoft JSON 4.5.0.11

```
 [JsonObject(MemberSerialization.OptIn)]
    public interface IProduct
    {
        [JsonProperty(PropertyName = "ProductId")]
        int Id { get; set; }
        [JsonProperty]
        string Name { get; set; }
    }

    public abstract class BaseEntity<T>
    {
        private object _id;

        public T Id
        {
            get { return (T)_id; }
            set { _id = value; }
        }
    }

    public class Product : BaseEntity<int>, IProduct
    {
        public string Name { get; set; }
        public int Quantity { get; set; }
    } 
```

我需要序列化对象的一部分，并使用具有声明的具体属性的接口来执行此操作。

序列化看起来像：

```
Product product = new Product { Id = 1, Name = "My Product", Quantity = 5};
JsonConvert.SerializeObject(product); 
```

预期结果是：

```
{"ProductId": 1, "Name": "My Product"} 
```

但实际结果是：

```
{"Name": "My Product"} 
```

如何正确序列化此对象？

* * *

UPD：查看了json.net的源代码，得出的结论是这是一个通过ReflectionUtils抓取对象信息的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:53:43.117

你试过这个吗？

```
public interface IProduct
{
    int Id { get; set; }
    string Name { get; set; }
}

[JsonObject(MemberSerialization.OptIn)]
public abstract class BaseEntity<T>
{
    private object _id;
    [JsonProperty]
    public T Id
    {
        get { return (T)_id; }
        set { _id = value; }
    }
}

[JsonObject(MemberSerialization.OptIn)]
public class Product : BaseEntity<int>, IProduct
{
    [JsonProperty]
    public string Name { get; set; }
    [JsonProperty]
    public int Quantity { get; set; }
} 
```

# c# - 视图和视图模型之间的快捷方式 (Visual Studio 2012)

> ID：13817494
> 
> 赞同：2
> 
> 时间：2012-12-11T09:45:30.830
> 
> 标签：c#, visual-studio-2010, xaml, mvvm, visual-studio-2012

我正在使用 MVVM 模式，并且正在寻找在我正在处理的视图模型 (*\viewmodel\ *viewmodel.cs) 与其对应的视图 (*\view\* view.xaml) 之间切换的快捷方式，反之亦然。

起初我找到了一个很好的解决方案，[在视图和视图模型之间跳转](https://stackoverflow.com/questions/7318985/jump-between-view-and-view-model)，但答案是基于宏。在 Visual Studio 2012 中似乎不支持宏。

有关如何在 Visual Studio 2012 中解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:53:34.263

也许加载项会起作用。在此处查看 Kyralessa 的答案：

[Visual Studio 2012 中宏的替代方法](https://stackoverflow.com/questions/12027485/alternative-to-macros-in-visual-studio-2012)

# html - 仅在文本周围的背景颜色

> ID：13817506
> 
> 赞同：4
> 
> 时间：2012-12-11T09:46:07.960
> 
> 标签：html, css

由于 div 的宽度固定，我在 div 中有一个 H1，它位于多于 1 行。我只想将背景颜色设置为 H1 文本，以便背景仅保留在文本后面（例如，如果行尾有空格，则不应在此处使用背景颜色）。

**另外**，我需要设置文本的左右填充。我试图将填充设置为标题，但它也不起作用。

这是我想要得到的：

![在此处输入图像描述](../Images/403f0a0be3dd423bbd23c9866afa3f7a.png)

我试图通过设置`inline`H1 的显示和设置背景颜色来实现这一点，但它似乎不起作用。以下是我的 HTML 和 CSS 以及演示。

**HTML：**

```
<div class="box">
    <h1>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget massa felis, at aliquam libero. </h1> 
```

**CSS：**

```
.box{
    background: green;
    overflow: hidden;
    max-width: 100px;
    margin: 50px auto;
    padding: 20px;
}

h1{   
    background: yellow;
    font-size: 30px;   
    float: left;
    display: inline;   
} 
```

演示：http: [//jsfiddle.net/BQMXa/](http://jsfiddle.net/BQMXa/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T09:48:53.670

**删除** `float:left`您的`h1`

***[演示](http://jsfiddle.net/BQMXa/4/)***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:49:38.210

`float: left`没有必要。去掉它。

此外，您可能想要减少`line-height`它，使其看起来像演示（如果您不这样做，您将在文本下方有空行，这可能是不可取的）。

# java - 每天在同一时间使所有活动会话到期

> ID：13817508
> 
> 赞同：1
> 
> 时间：2012-12-11T09:46:10.273
> 
> 标签：java, jsp, session, servlets

对于我正在制作的 Java JSP Web 应用程序，我在会话中保留了一个对象。如果有多个用户登录该站点，每个用户都在他们自己的会话中，我希望所有会话（无论他们何时开始）在同一天午夜到期。

例如：

> 会话对象1：创建日期（2012-12-11 8:45），到期日期（2012-12-12 0:00）
> 
> 会话对象2：创建日期（2012-12-11 12:00），到期日期（2012-12-12 0:00）

依此类推，每天的会话都会失效。

我的一些想法是

*   将会话的时间设置为（下一个午夜 - 当前日期）到期，尽管我对自己逐步执行此操作的能力并不完全有信心
*   安排某种服务器任务以在每天午夜清除所有会话

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:17:51.613

我看到的最好的方法是选项 2

1.  实现一个 HttpSessionListener - [http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html) - 这将帮助您使用回调方法 sessionCreated() 和 sessionDestroyed 收集集合中的活动会话()。
2.  使用 TimerTask - [http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)每天午夜运行并关闭您收集的所有活动会话。

选项 1 也是可能的，但可能有点不可预测，因为您必须在每次创建新会话时设置精确的超时。

玩得开心 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:09:50.317

在当天结束时设置会话的到期日期：

```
Calendar today = Calendar.getInstance();
today.set(Calendar.HOUR_OF_DAY, 23);
today.set(Calendar.MINUTE, 59);
today.set(Calendar.SECOND, 59);
Date expiration = today.getTime(); 
```

# mysqladmin - mysqladmin 缺少 mysqld

> ID：13817511
> 
> 赞同：2
> 
> 时间：2012-12-11T09:46:19.130
> 
> 标签：mysqladmin

我在 ubuntu 12.04 lts 上运行 percona 5.5。mysql运行良好。

root@ip-10-252-175-58:/var/lib/mysql/data# ps -ef | grep mysql root 2805 1 0 09:18 pts/1 00:00:00 /bin/sh /usr/bin/mysqld_safe mysql 3247 2805 0 09:18 pts/1 00:00:04 /usr/sbin/mysqld -- basedir=/usr --datadir=/ebs0/mysql/data/ --plugin-dir=/usr/lib/mysql/plugin --user=mysql --log-error=/ebs1/mysql/logs/mysql-error .log --open-files-limit=65535 --pid-file=/var/lib/mysql/data/mysql.pid --socket=/var/lib/mysql/data/mysql.sock

但是当我尝试使用 mysqladmin 状态时，我收到一条错误消息：

root:/var/lib/mysql/data# mysqladmin status mysqladmin: connect to server at 'localhost' failed error: 'Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2 )' 检查 mysqld 是否正在运行并且套接字：'/var/run/mysqld/mysqld.sock' 存在！

我检查了所有配置文件，没有找到任何引用 /var/run/mysqld 的内容。为什么 mysqladmin 一直在寻找那里而不是 /var/lib/mysql/data？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-24T22:17:19.747

基本上，您的套接字文件位置与 mysqladmin 正在寻找的位置不同。

在这种情况下，您必须通过在 mysqladmin 命令中显式给出套接字文件路径来触发该命令。

例如：mysqladmin -socket=/var/lib/mysql/data/mysql.sock

# c# - DBContext，访问新添加实体的导航属性

> ID：13817514
> 
> 赞同：0
> 
> 时间：2012-12-11T09:46:37.763
> 
> 标签：c#, entity-framework

我正在尝试访问具有 State = added 的实体的 Navigational 属性，但 Navigational 属性为空。

```
 using (var myc = new DBTestEntities())
    {
        var cust = new Customer();
        cust.CustomerName = "New Customer";
        cust.BusinessTypeID = 1;  // This is a valid BusinessTypeID present in BusinessType table

        myc.Customers.Add(cust);
        // at this point cust.BusinessType is null
        Console.WriteLine(cust.BusinessType.BusinessTypeName);
    } 
```

在这种情况下，任何人都可以指导我如何访问 Navigational 属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:51:34.870

您需要在您的客户类中有一个 BusinessType 属性。

在那里您可以设置业务类型，例如：

```
cust.BusinessType = (from x in myc.BusinessTypes where x.Id=1 Select x).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:53:43.537

我认为你需要这样做：

```
myc.SaveChanges(); 
```

将实体实际提交到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:58:58.490

线后

```
myc.Customers.Add(cust); 
```

你可以加

```
myc.ChangeTracker.DetectChanges(); 
```

这将触发一个称为关系修复的过程，其中 EF 同步外键中涉及的所有属性。`BusinessType`如果对象尚未在上下文中，它将导致从数据库中获取对象。

# javascript - 从远程服务器加载图像时如何显示预加载器

> ID：13817515
> 
> 赞同：0
> 
> 时间：2012-12-11T09:46:41.553
> 
> 标签：javascript, image, html, image-preloader

当我将 URL 分配给图像元素时，我需要显示加载图标。我已经查看了该站点上的其他问题，这些问题仅详细介绍了如何在加载页面时为图像显示优雅的预加载器。我需要的是在页面加载后显示预加载器。我正在寻找的内容有两种情况，我在下面进行了解释。

1.  我动态创建一个 DOM 图像元素并为该元素分配一个 URL。这样做时，在元素上显示图像大约需要 2-3 秒，并且在这 2-3 秒内该区域变为空白。我需要做的是显示一个预加载图标并在加载图像后将其隐藏。

2.  我动态创建一个 DIV 图像元素并将一个 URL 分配给`background:url()`. 这样做时，在元素上显示图像大约需要 2-3 秒，并且在这 2-3 秒内该区域变为空白。我需要做的是显示一个预加载图标并在加载图像后将其隐藏。

如何实现在这两种情况下显示预加载器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:56:20.517

您可以使用 load() 事件来完成。

当您第一次开始加载时，更改您的图像以显示预加载器，或者您想要这样做。此外，将“加载”事件附加到它。

然后，加载图像后，删除预加载器并显示图像。

您需要对与 CSS 相关的技巧（背景网址）执行类似的技巧。您可以做的是直接加载图像（通过创建一个`new Image()`），同时将背景 url 设置为您的预加载器图标。

然后，加载图像后，进行切换。由于浏览器只加载一次图像，无论它在哪里使用，它应该具有相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:01:02.150

有一个很好的教程和截屏视频：http: [//jqueryfordesigners.com/image-loading/](http://jqueryfordesigners.com/image-loading/)

虽然在某些浏览器（如旧版本的 IE）中 .load() 函数对图像效果不佳，但在这种情况下，您可以使用：[https](https://github.com/JessThrysoee/jquery.imageload) ://github.com/JessThrysoee/jquery.imageload而不是 .load () 以获得更一致的跨浏览器体验。

# bash - 可执行文件输出

> ID：13817519
> 
> 赞同：0
> 
> 时间：2012-12-11T09:46:51.460
> 
> 标签：bash

我是 bash 脚本的初学者。我需要知道如何为输出一个可执行文件创建一个 bash 脚本。
更清楚地说，我有一个可执行文件，它是`./word`. 此命令的输出不是静态的。所以，我的脚本应该读取这个输出并将其放入脚本中，但是如何呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T19:33:00.373

如果`./word`输出一些您希望运行的 shell 命令（如 ssh-agent 那样），您可以使用`eval "$(./word)"`.

如果您只想将输出写入文件，请使用`./word > file`.

# android - 您如何将 EditText 键盘设置为仅包含 Android 上的数字？

> ID：13817521
> 
> 赞同：74
> 
> 时间：2012-12-11T09:46:53.893
> 
> 标签：android, android-layout, android-edittext

我希望我`EditText`显示一个**只有**数字可见的键盘，没有其他字符。

我已经用所有可用的输入进行了测试，但它不起作用。我寻找一种方法来获得只有数字的键盘，但我只看到了以下参考：

```
android: inputType = "numberPassword" 
```

但我希望数字可见，如下所示：（numberPassword）

![在此处输入图像描述](../Images/facb27005302a8c6a670ad722bc9bc53.png)

我尝试过：

```
android:digits="0123456789"
android:inputType="phone" 
```

和

```
android:inputType="number" 
```

但它看起来像这样：

![在此处输入图像描述](../Images/875f972f34a23e9e7c13733ac076f3a4.png)

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2015-05-26T19:02:55.133

经过几次尝试，我明白了！我正在以编程方式设置键盘值，如下所示：

```
myEditText.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD); 
```

或者，如果您愿意，可以像这样编辑 XML：

```
android: inputType = "numberPassword" 
```

两个配置都将显示密码项目符号，因此我们需要创建一个自定义`ClickableSpan`类：

```
private class NumericKeyBoardTransformationMethod extends PasswordTransformationMethod {
    @Override
    public CharSequence getTransformation(CharSequence source, View view) {
        return source;
    }
} 
```

最后我们需要实现它`EditText`以显示输入的字符。

```
myEditText.setTransformationMethod(new NumericKeyBoardTransformationMethod()); 
```

这就是我的键盘现在的样子：

![](../Images/85f3b7b31edecbb47fb2616869f02a31.png "工具提示")

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-11T09:50:05.233

`android:inputType="number"`或`android:inputType="phone"`。你可以保留这个。您将获得包含数字的键盘。有关不同类型键盘的更多详细信息，请查看此[链接](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)。

我认为只有创建自己的软键盘才有可能。或者试试这个`android:inputType="number|textVisiblePassword`。但它仍然显示其他字符。此外，您可以保留`android:digits="0123456789"`在您的`edittext`. 或者，如果您仍然想要与图片中的相同，请尝试将两个或更多功能与 | 分隔符并检查您的运气，但据我所知，您必须创建自己的键盘才能完全一样..

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-11T09:51:30.240

```
<EditText
        android:id="@+id/editText3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="number" /> 
```

我已经尝试了所有的东西现在试试这个它显示其他字符但你不能在editText中输入

```
edit.setRawInputType(Configuration.KEYBOARD_12KEY); 
```

![在此处输入图像描述](../Images/996e919802fb991cb02826840480ff01.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-11T09:51:47.267

我认为您以某种方式使用了正确的方法来仅在键盘上显示数字，因此最好在编辑文本中尝试使用 xml 的给定行，它会完美运行，所以这里的代码是 -

```
 android:inputType="number" 
```

如有任何疑问，您可以再次问我，我会尽力彻底解决您的问题。谢谢

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-23T08:57:17.013

如果您只想显示不带字符的数字，请将这行代码放入您的 XML 文件`android:inputType="number"`中。输出：

[![在此处输入图像描述](../Images/f183a4aaa54e4055625c2be9cb1bee0a.png)](https://i.stack.imgur.com/NALDH.png)

如果您想显示一个也显示字符的数字键盘， `android:inputType="phone"`请使用您的 XML。输出（带字符）：

[![有字符](../Images/213734d226326b4928f8152d35c51754.png)](https://i.stack.imgur.com/FJuWz.png)

如果你想显示一个数字键盘，就像密码一样屏蔽你的输入，把`android:inputType="numberPassword"`. 输出：

[![在此处输入图像描述](../Images/5abbf0349145a90575bb004b6b8ab897.png)](https://i.stack.imgur.com/EhHWT.png)

如果我只发布截图的链接，我真的很抱歉，我想研究如何在这里真正发布图片，但它可能会占用我的时间，所以就在这里。我希望我的帖子可以帮助其他人。是的，我的答案与此处发布的其他答案重复，但为了节省其他人在看到输出之前可能需要运行代码的时间，我的帖子可能会为您节省一些时间。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-12-01T18:07:44.970

如果你使用**Kotlin**：

**XML**

```
android:inputType="numberPassword" 
```

**代码**

```
editText.transformationMethod = null 
```

**结果**：

[![在此处输入图像描述](../Images/c5da5ce5f9a1b1a57accd0f61a4bbb71.png)](https://i.stack.imgur.com/5W8yW.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-07T16:16:22.090

完全不需要实施新的转换方法。仅此一项就可以很好地解决它：

**XML**

```
android:inputType="numberPassword" 
```

**代码**

```
textField.transformationMethod = null 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-05T06:50:24.590

有点晚了，但它可能会帮助其他人。您可以为您的 EditText 设置 keylistener 并仅将要侦听的键传递给它：

```
yourEditText.keyListener = DigitsKeyListener.getInstance("0123456789") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-15T07:02:30.037

**科尔廷解决方案：**

我在 Koltin 做了一个扩展来实现这一点。即使使用过滤器，我也尝试了很多方法，但有一些错误，`Filter`比如在输入时重复相同的文本。

```
fun EditText.onAfterTextChanged(allowedChars: String, listener: (String) -> Unit) {
    addTextChangedListener(object : TextWatcher {
        override fun afterTextChanged(editable: Editable?) {
            val input = editable.toString()
            val newValue = replaceInvalidCharacters(input, allowedChars)
            if (newValue != input) {
                setText(newValue)
                setSelection(text.length)
            }
            listener(newValue)
        }

        override fun beforeTextChanged(s: CharSequence?, p1: Int, p2: Int, p3: Int) {
        }

        override fun onTextChanged(s: CharSequence?, p1: Int, p2: Int, p3: Int) {
        }
    })
}

fun replaceInvalidCharacters(value: String, allowedChars: String): String {
    var finalValue = value.replace("\\p{So}+".toRegex(), "") // To remove emojis when copy paste
    if (finalValue.isNotEmpty()) {
        val lastChar = finalValue.last()
        if (!allowedChars.contains(lastChar, false)) {
            finalValue = finalValue.dropLast(1)
        }
    }
    return finalValue
} 
```

您可以在 Activity 中使用它，如下所示：

```
editText.onAfterTextChanged(getString(R.string.supported_digits)) { // Here you can pass whatever the digits you want to allow
            val length = it.length
            if (length > 250) { // You can also check how much length to allow
                return@onAfterTextChanged
            }
        } 
```

*   您可以将任何您想要允许的字符传递给它
*   它会在输入时过滤表情符号
*   即使您复制粘贴它也会删除表情符号
*   它将只允许出现在 allowedChars 中的字符
*   它适用于所有安卓版本
*   它将解决使用过滤器重复文本的问题

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-12-11T09:51:06.047

将以下行放在您的`<EditText>`:

```
android:digits="0123456789"
android:inputType="phone" 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2013-12-09T12:11:25.327

如果我们指定 EditText，

```
android:inputType="number" 
```

只能得到数字。但如果你使用，

```
android:inputType="phone" 
```

连同数字，它可以接受特殊字符，如 ;,/". 等。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2014-03-26T09:37:37.380

在 xml 中`edittext`：

```
android:id="@+id/text" 
```

在程序中：

```
EditText text=(EditText) findViewById(R.id.text);
text.setRawInputType(Configuration.KEYBOARDHIDDEN_YES); 
```

# python - Django admin - 使所有字段只读

> ID：13817525
> 
> 赞同：42
> 
> 时间：2012-12-11T09:47:06.200
> 
> 标签：python, django, django-admin

我正在尝试将所有字段设为只读而不明确列出它们。

就像是：

```
class CustomAdmin(admin.ModelAdmin):
    def get_readonly_fields(self, request, obj=None):
        if request.user.is_superuser:
            return self.readonly_fields

        return self.fields 
```

问题`CustomAdmin.fields`不是在这一点上设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2018-10-30T17:47:22.823

`False`从 django 2.1 开始，您可以通过从`ModelAdmin`'方法返回来防止编辑，同时允许查看，`has_change_permission`如下所示：

```
class CustomAdmin(admin.ModelAdmin):
    def has_change_permission(self, request, obj=None):
        return False 
```

（这在 django 2.1 之前将不起作用，因为它还会拒绝任何仅尝试查看的用户的权限。）

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-12-11T23:17:36.037

小心，self.model._meta.fields 不一定是 CustomAdmin 拥有的相同字段！

“管理员的所有字段”看起来更像这样：

```
from django.contrib import admin
from django.contrib.admin.utils import flatten_fieldsets

class CustomAdmin(admin.ModelAdmin):
    def get_readonly_fields(self, request, obj=None):
        if request.user.is_superuser:
            return self.readonly_fields

        if self.declared_fieldsets:
            return flatten_fieldsets(self.declared_fieldsets)
        else:
            return list(set(
                [field.name for field in self.opts.local_fields] +
                [field.name for field in self.opts.local_many_to_many]
            )) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-12-11T10:13:51.293

好的，现在有这个：

```
class CustomAdmin(admin.ModelAdmin):
    def get_readonly_fields(self, request, obj=None):
        # ...

        return [f.name for f in self.model._meta.fields] 
```

仍在寻找不那么丑陋的方法。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-12-11T10:10:44.210

您可以遍历模型元字段：

```
def get_readonly_fields(self, request, obj=None):
    if obj:
        self.readonly_fields = [field.name for field in obj.__class__._meta.fields]
    return self.readonly_fields 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-03T08:33:06.333

对于内联（选项卡或堆栈）

```
def get_readonly_fields(self, request, obj=None):
    fields = []
    for field in self.model._meta.get_all_field_names():
        if field != 'id':
            fields.append(field)
    return fields

def has_add_permission(self, request):
    return False 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-03-18T17:21:11.897

这对我来说适用于 Django 1.10

```
def get_readonly_fields(self, request, obj=None):
    if request.user.is_superuser:
        return self.readonly_fields

    return list(set(
        [field.name for field in self.opts.local_fields] +
        [field.name for field in self.opts.local_many_to_many]
    )) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-04-12T12:33:54.087

如果有人仍在寻找更好的方法，您可以像这样使用它：

```
@admin.register(ClassName)
class ClassNameAdmin(admin.ModelAdmin):
    readonly_fields = [field.name for field in ClassName._meta.fields] 
```

ClassName 是您的模型类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-27T11:40:46.620

我的要求是相似的。我**只需要将一个**字段显示为 read-only 。这很好用：

```
class ChoiceInline(admin.TabularInline):
    model = Choice
    extra = 1
    fields = ['choice_text', 'votes']
    readonly_fields = ['votes']

class QuestionAdmin(admin.ModelAdmin):
    #fields = ['pub_date', 'question_text']
    fieldsets = [
        (None, {'fields': ['question_text']}),
        ('Date Information', {'fields': ['pub_date']}),
    ]
    search_fields = ['question_text']

    inlines = [ChoiceInline] 
```

**参考**：C:\Python27\Lib\site-packages\django\contrib\admin\options.py

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-26T08:07:53.970

假设您已将 user_mode 定义为；

```
Admin, Customers and Staff 
```

如果您想拒绝员工（当然还有客户）删除客户、产品、订单等的特权...

你的代码去；

```
def get_readonly_fields(self, request: HttpRequest, obj=None):
    if request.user.user_mode != "Admin":
        return self.readonly_fields + ['user_mode']
    return super().get_readonly_fields(request, obj) 
```

其中 user_mode = 保存用户类型的模型字段。

注意：我的代码使用“Pylance”（如 JS 中的打字稿）

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-10-11T12:37:54.857

使用 get_fieldsets 您可以从表单中获取所有字段

```
def get_readonly_fields(self, request, obj=None):
    readonly = []
    for fs in self.get_fieldsets(request, obj):
        if len(fs) > 1:
            readonly += fs[1].get('fields', [])
    return readonly 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-03-14T08:33:23.860

```
@admin.register(Hero)
class HeroAdmin(admin.ModelAdmin, ExportCsvMixin):
    ...
    readonly_fields = ["father", "mother", "spouse"] 
```

参考： [https ://books.agiliq.com/projects/django-admin-cookbook/en/latest/changeview_readonly.html](https://books.agiliq.com/projects/django-admin-cookbook/en/latest/changeview_readonly.html)

# html - 如何使子菜单下拉到父菜单下方，而不是飞出？

> ID：13817526
> 
> 赞同：0
> 
> 时间：2012-12-11T09:47:09.870
> 
> 标签：html, css

我做了一个飞出菜单的jsFiddle：

[http://jsfiddle.net/ZSMLg/1/](http://jsfiddle.net/ZSMLg/1/)

这是我从以下帖子中获得的代码：

[简单的 CSS 飞出列表，不是那么简单吗？](https://stackoverflow.com/questions/3790677/simple-css-fly-out-list-not-so-simple)

```
<ul>
    <li>home</li>
    <li>products
        <ul>
            <li><a href="#">CPUs</a>
                <ul>
                    <li><a href="#">AMD<a>
                        <ul>
                            <li><a href="#">AM2</a></li>
                            <li><a href="#">AM3</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Intel</a></li>
                </ul>
            </li>
            <li><a href="#">Motherboards</a></li>
            <li><a href="#">PSUs</a></li>
            <li>Hard drives
                <ul>
                    <li><a href="#">HDD</a></li>
                    <li><a href="#">SSD</a></li>
                </ul>
            </li>
        </ul>
    </li>
    <li>Tracking</li>
</ul> 
```

CSS如下：

```
ul {list-style-type: none; width: 8em; border: 1px solid #000; padding: 0;}
/* just to set the base-line for the ul, but note the width. It's important. */

ul li {position: relative; border-top: 1px solid #000; margin: 0; padding: 0; }
/* the position: relative is used to allow its child elements to be absolutely positioned */

ul li:first-child {border-top: 0 none transparent; }
/* to avoid a two-pixel border on the first li (1px li-border + 1px ul-border) */

ul li:hover {background-color: #f90; }
/* just to aid visually */

ul ul {position: absolute; top: -1px; left: 8em; display: none; }
/* sets up all ul elements beneath the parent ul, the -px is to counter the movement forced by the border, bear in mind that the li:first-child doesn't *have* a border, so adjust to taste */

ul > li:hover > ul {display: block; }
/* makes the nested list appear if the parent-li is hovered */ 
```

如果我希望子菜单位于父菜单下方，稍微向左推，CSS 应该是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:59:21.733

尝试 delete `position: absolute;`，在 css 中替换此代码：

```
ul ul {position: absolute; top: -1px; left: 8em; display: none; }

ul > li:hover > ul {display: block; } 
```

有了这个：

```
ul ul { display: none; }

ul > li:hover > ul { margin-left:20%; display: block; } 
```

# php - 如何使用 rmdir 删除 Windows 目录？

> ID：13817537
> 
> 赞同：1
> 
> 时间：2012-12-11T09:48:11.230
> 
> 标签：php, windows, directory-permissions

如何删除目录`rmdir`？

该目录为空，但我无法删除/删除它。

```
$root_dir = "C:/xampp/htdocs/";    
$dir = $root_dir.'tmp/';    
rmdir($dir); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-31T23:14:40.883

让我惊呆了一阵子的重要考虑因素：确保您没有`chdir()`进入您要删除的目录，如果您这样做`chdir()`了，请先退出该目录。您不能删除 Windows 上的当前工作目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:53:02.513

```
function removedir($dirname)
{
    if (is_dir($dirname))
    $dir_handle = opendir($dirname);
    if (!$dir_handle)
    return false;
    while($file = readdir($dir_handle)) {
        if ($file != "." && $file != "..") {
            if (!is_dir($dirname."/".$file))
            unlink($dirname."/".$file);
            else
            {
                $a=$dirname.'/'.$file;
                removedir($a);
            }
        }
    }
    closedir($dir_handle);
    rmdir($dirname);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T09:54:57.923

如果权限不是问题，则 tmp 目录中可能包含文件。rmdir 只删除空目录。使用此功能删除目录+所有文件：

```
function deleteDirectory($dir) {
    if (!file_exists($dir)) return true;
    if (!is_dir($dir)) return unlink($dir);
    foreach (scandir($dir) as $item) {
        if ($item == '.' || $item == '..') continue;
        if (!deleteDirectory($dir.DIRECTORY_SEPARATOR.$item)) return false;
    }
    return rmdir($dir);
} 
```

检查[http://us3.php.net/manual/en/function.rmdir.php#91797](http://us3.php.net/manual/en/function.rmdir.php#91797)以供参考:)

# asp.net - 验证时出现错误，我该如何退出

> ID：13817540
> 
> 赞同：1
> 
> 时间：2012-12-11T09:48:22.680
> 
> 标签：asp.net, validation, error-handling, raiserror, raiseevent

我有一个特定的网络表单，当用户点击

保存按钮它调用我的**dbEngineClass**中的函数 save() 。

现在，当用户输入重复数据时，我会引发某个错误并在网页中处理它

显示某个消息框，但之后我希望它退出课程而不是这样做

还要别的吗

但显然它将继续执行**btnsave.click** sub

如果出现错误，我如何退出课程或阻止单击方法继续？

这是我的代码：**这是保存信息并引发事件的函数**

```
Public Sub SaveNewCustomer(ByVal Name As String, ByVal Tel1 As String, ByVal Tel2 As String, ByVal Email As String, ByVal Address As String, ByVal Coupon As String, ByVal Location As String, ByVal ParamLangaugeID As String, ByVal UserName As String)
    Dim UserNameID As Integer = GetUserNameID(UserName)

    conn = New SqlConnection(My.Settings.CustomerInfoNayefPc)

    conn.Open()
    cmd = New SqlCommand(String.Format("Insert into tblCustomerInfo (Name,Tel1,Tel2,Email,Address,CouponNo,Location,LangaugeID,UserNameID) values('{0}','{1}','{2}','{3}','{4}','{5}','{6}',{7},{8})", Name, Tel1, Tel2, Email, Address, Coupon, Location, ParamLangaugeID, UserNameID))
    cmd.Connection = conn
    Try
        cmd.ExecuteNonQuery()
    Catch CouponNosqlexc As SqlException
       RaiseEvent DuplicateErr()

    End Try 
```

**这是我在网页中处理它的方式**

```
Private Sub MydbEngine_DuplicateErr() Handles MydbEngine.DuplicateErr
    Dim strMsg As String = "Duplicate Value exist"
    Dim lbl As New Label
    lbl.Visible = True
    lbl.Text = "<script language='javascript'>" & Environment.NewLine _
               & "window.alert(" & "'" & strMsg & "'" & ")</script>"
    Page.Controls.Add(lbl)

End Sub

    conn.Close()
End Sub 
```

现在，在此处理程序完成后，我需要它退出并且不要继续 btnSave.click

调用**SaveNewCustomer() 子**的处理程序，因为当它继续时它会清除所有

数据，我不想要那个

# android - Android：从css调用资产文件夹

> ID：13817542
> 
> 赞同：0
> 
> 时间：2012-12-11T09:48:29.483
> 
> 标签：android, css, assets

我想在 Android 中使用 CSS。我想使用 HelveticaNeue_Light 字体。此字体位于资产文件夹中。我无法调用它。这个怎么做？

```
body = "<HEAD><STYLE>.class1 {color:gray;text-align:left;font-family:\"HelveticaNeue_Light\";font-size:17px;}</STYLE></HEAD><BODY><div class=\"class1\"><P>"+ "TEXT" + "</P></BODY>"; 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:09:16.963

如果您的文件夹中有字体，您可以使用@font-face 规则调用它，如下所示：

```
@font-face {
     font-family: HelveticaNeue_Light;
     src: url('/assets/HelveticaNeue_Light.otf');
}

.class1 {
     font-family:HelveticaNeue_Light, Arial, sans-serif;
} 
```

确保字体文件的路径正确，并将字体文件的扩展名更改为它的任何扩展名。

# jquery - jquery移动和换页功能，双post请求

> ID：13817553
> 
> 赞同：0
> 
> 时间：2012-12-11T09:49:19.010
> 
> 标签：jquery, jquery-mobile

日历页面：

```
$(document).delegate('#ViewOrders', 'pageinit', function () {
   var ordersSource, calendar;
   var ordersParams = new Object();
   var tonnageParams = new Object();
   if (parseInt($("#ddlRooms").val()) > 0) {
       tonnageParams.RoomId = $("#ddlRooms").val();
   }

   $.post('/AdminPages/Mobile/Ajax/Ajax.ashx?p=GetTonnage', tonnageParams, function (data) {
       ordersSource = data;

       setTimeout(function () {
           calendar = $("#calendar").fullCalendar({
              header: {
                   left: 'prev,next today',
                   center: '',
                   right: 'title'
               },
               isRTL: false,
               theme: true,
               selectable: true,
               select: function (start, end, allDay) {
                   ordersParams.Start = getDateString(start);
                   ordersParams.End = getDateString(end);

                   if ($("#ddlRooms").val() > 0) {
                       ordersParams.RoomId = $("#ddlRooms").val();
                   }
                   else {
                       delete ordersParams.RoomId;
                   }

                   $.mobile.changePage("ShowOrders.aspx", { data: ordersParams, transition: 'slide', rel: 'dialog' });
                calendar.fullCalendar('destroy');
               },
               events: ordersSource
           });
       }, 500);
   });

   $("#ddlRooms").change(function () {
       var elem = $(this);

       calendar.fullCalendar('removeEventSource', ordersSource);
       tonnageParams = new Object();

       if (parseInt(elem.val()) > 0) {
           tonnageParams.RoomId = elem.val();
       }

       $.post('/AdminPages/Mobile/Ajax/Ajax.ashx?p=GetTonnage', tonnageParams, function (data) {
           ordersSource = data;
           calendar.fullCalendar('addEventSource', ordersSource);
       });
    }); 
 }); 
```

结果页面：

```
$(document).delegate('#ViewOrders', 'pageinit', function () {
$("#btnBack").click(function () {
    var id = $(this).data('backid');
    $.mobile.changePage("ViewOrders.aspx", { data: { RoomId: id }, reloadPage: true, transition: 'slide', reverse: true });
});
}); 
```

（脚本位于一个文件中，并在应用程序生命周期开始时上传，不加载任何页面。）

我想做的是有一个带有日历的页面。选择日期时，用户会使用所选日期参数转到另一个日期。在第二页上，他看到了该日期的订单。它还有一个返回日历的按钮。我的问题是，当他返回选择“ddlRooms”的日历更改事件时，“帖子”出现了两次。我试图这样做：

```
$("#ddlRooms").unbind('change').change(function () {
...
}); 
```

但用户界面然后选择无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:17:45.320

事件绑定/取消绑定和开/关有一个替代方法。甚至在再次绑定之前取消绑定，使用 jQuery 事件过滤器，它可以用来识别事件是否已经被绑定。

[http://www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

这是我的使用示例：

```
$('#carousel div:Event(!click)').each(function(){

}); 
```

我正在使用每个，因为我的轮播 div 有很多内部块，但原理是相同的。如果#carousel 内部 div 元素没有点击事件，则添加该事件。在您的情况下，这将防止多个事件绑定（如果这是您的问题）。

# java - 用于 Java 的 SNMP 库

> ID：13817554
> 
> 赞同：12
> 
> 时间：2012-12-11T09:49:27.280
> 
> 标签：java, libraries, snmp, snmp4j

我需要对各种 SNMP 库进行可行性研究。目前我正在使用 SNMP4J。我的要求是将各种库与其功能进行比较。我无法找到任何有用的参考链接。请有人建议任何链接。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-17T12:06:43.647

有关 java 的 SNMP 框架列表，请参阅[SNMPLink.org](http://www.snmplink.org/software/fordeveloper/#8)

根据我的经验，对于开源，[SNMP4J](http://www.agentpp.com/api/java/snmp4j.html)是领导者。

要进行真正的比较，您必须**尝试**每一个（不仅仅是阅读）并查看：

1\. 简单直观的用法
2\. 您可以完成所有您希望完成的任务
3\. 标记框架的特殊概念（如果存在）
4\. 否-bugs
5\. 性能
6\. 一个活跃的社区

其他框架：

*   [WebNMS](http://www.webnms.com/javaagent/index.html) - 商业
*   [动态SNMP](http://www.monfox.com/dsnmp/java-snmp-agent-sdk.html)
*   [网络SNMPJ](http://netsnmpj.sourceforge.net/)

祝你好运，让我们知道你的结果。

# c# - 以字节（8 位）将负数转换为二进制形式

> ID：13817556
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:49:30.007
> 
> 标签：c#

我正在尝试将负数转换为 8 位二进制形式。这是我的代码：-

```
 UTF8Encoding Bencoding = new UTF8Encoding();
 int a=-3;
 byte[] Bbuf = Bencoding.GetBytes(a.ToString());

 StringBuilder Binfobinary = new StringBuilder();
 foreach (byte b in Bbuf)
 {
     string str = Convert.ToString(b, 2);
     Binfobinary.Append(str);
 } 
```

它给了我这样的答案 101101110011

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:02:52.513

如果你想要一个 8 位表示，你最好的办法是从 32 位表示的结果中去掉额外的 24 位，[`Convert.ToString(int, int)`](http://msdn.microsoft.com/en-us/library/14kwkz77.aspx)因为没有`Convert.ToString(sbyte, int)`.

```
string str = Convert.ToString(-3, 2);
str = str.Substring(Math.Max(str.Length - 8, 0)).PadLeft(8, '0'); 
```

当然，如果你想要一个 16 位的表示，你可以简单地将整数转换为 a`short`以使用[`Convert.ToString(short, int)`](http://msdn.microsoft.com/en-us/library/b1kwkfdz.aspx) 重载：

```
string str = Convert.ToString((short)-3, 2).PadLeft(16, '0'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:58:31.250

```
var str = Convert.ToString(-3, 2) 
```

# actionscript-3 - SWFLoader、ByteArray 和参数

> ID：13817560
> 
> 赞同：1
> 
> 时间：2012-12-11T09:49:39.213
> 
> 标签：actionscript-3, apache-flex

在我的应用程序中，我读取了一个 XML 文件，其中包含表示 SWF 文件的二进制数据。然后，我可以使用 SWFLoader 组件显示该 SWF，并将其“源”属性设置为我从 XML 文件中获得的 ByteArray。

它工作得很好，但现在我需要将一些参数传递给加载的 SWF...我该怎么做？

加载 SWF 的代码如下：

```
var loaderContext:LoaderContext = new LoaderContext();
loaderContext.allowLoadBytesCodeExecution = true;

var loader:SWFLoader = new SWFLoader();             
loader.loaderContext = loaderContext;
loader.width = 300;
loader.height = 300;
loader.source = bytes; // bytes is the ByteArray

this.addElement(loader); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:42:28.997

在 loaderContext 中使用参数对象：

```
var loaderContext:LoaderContext = new LoaderContext();
loaderContext.allowLoadBytesCodeExecution = true;
loaderContext.parameters = {key:"value"}; 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html#parameters](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html#parameters)

# ios - 属性不适用于 getter AND setter

> ID：13817562
> 
> 赞同：13
> 
> 时间：2012-12-11T09:49:41.940
> 
> 标签：ios, properties

我已经定义了一个属性...

```
@property (nonatomic, strong) NSArray *eventTypes; 
```

我想覆盖getter和setter ...

我写了这个...

```
- (void)setEventTypes:(NSArray *)eventTypes
{
    _eventTypes = eventTypes;

    //do some stuff here.
} 
```

这很好用，但是当我添加这个时......

```
- (NSArray*)eventTypes
{
    //do some stuff here.

    return _eventTypes;
} 
```

然后这两个函数都显示错误并且不知道 _eventTypes 是什么。

这两种方式都是一样的。它适用于一个功能，但一旦我添加另一个功能，它们都会失败。

我还需要为此做些什么吗？似乎很奇怪，它可以与任何一个机器人一起工作，而不是同时与两者一起工作。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-11T10:13:48.797

尽管 LLVM 会自动合成支持 ivar（默认情况下以下划线为前缀），但如果您同时实现 getter 和 setter 方法，您将**不会**获得自动合成的 ivar，这就是您必须`@synthesize eventTypes = _eventTypes;`手动的原因。

您可以在此处阅读更多信息：http: [//useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html](http://useyourloaf.com/blog/2012/08/01/property-synthesis-with-xcode-4-dot-4.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:08:36.747

添加这个`@implementation`

```
@synthesize eventTypes = _eventTypes; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T13:27:52.603

你必须@synthesize 你的财产。当我们想要创建自定义 getter 和 setter 时，我们会使用它，例如：

*   使用自定义 getter 和 setter 读取/写入属性；
*   具有自定义 getter 的 ReadOnly 属性；

在 .m 文件中的**@implementation**之后，添加：

```
@synthesize propertyName = _propertyName; 
```

这告诉编译器您想要控制该特定属性的“get”和“set”方法。因此，在那之后您的 set 和 get 实现将正常工作。

* * *

**额外说明：**

**self.anyString = @"TEXT"** ; 完全等价**[self setAnyString:@"TEXT"];** 这两个都在调用方法集。如果您使用**_anyString**，您将直接访问该属性，而无需通过 set 方法。

因此，如果我们在 set 方法中调用**self.property**，我们将创建一个无限循环。一旦我们重写了 'set' 和 'get' 方法，我们必须使用**_**而不是**self。**.

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-12-11T13:34:55.413

试试这个：

```
- (void)setEventTypes:(NSArray *)eventTypes
{
    self.eventTypes = eventTypes;

    //do some stuff here.
}
- (NSArray*)eventTypes
{
    //do some stuff here.

    return self.eventTypes;
} 
```

# c# - 检查 xpath 中是否存在 Xml 标签。

> ID：13817564
> 
> 赞同：1
> 
> 时间：2012-12-11T09:49:44.467
> 
> 标签：c#, xml, exception, xpath

我正在尝试使用 xpath 从 Xml 文件中获取值。这是我的代码：

```
XElement docQuote = XElement.Parse(Financial);
string result= docQuote.XPathSelectElement("//ns:Quote",nsmgr).ToString(SaveOptions.DisableFormatting); 
```

`Quote`当XML 文件中存在 XML 节点并在`Quote`标签之间返回值时，这可以正常工作。但是 Quote xml 标记在它生成的 XML 文件中不存在并且异常。

```
Object reference not set to an instance of an object. 
```

我试图检查 NULL 如下：

`if(docQuote.XPathSelectElement("//ns:Quote",nsmgr) != null`)

和

```
if(docQuote.XPathSelectElement("//ns:Quote",nsmgr) != null).value != null) 
```

但是它并不能避免在 null 时执行。

当 Xml 标签不存在时，请帮助我避免执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:19:15.747

也许[boolean()](http://www.w3.org/TR/xpath/#function-boolean) XPATH 函数在这里有帮助：

```
boolean(//*[name()='Quote']) 
```

如果元素 Quote 存在，`boolean(//*[name()='Quote'])`则应返回 true，否则返回 false。

```
XElement docQuote = XElement.Parse(Financial);
string result= docQuote.XPathSelectElement("boolean(//*[name()='Quote'])",nsmgr).ToString(SaveOptions.DisableFormatting); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-11T09:54:57.460

尝试

```
 XElement docQuote = XElement.Parse(Financial);
   if(docQuote != null && docQuote.XPathSelectElement("//ns:Quote",nsmgr) != null)
   {
    string result=   docQuote.XPathSelectElement("//ns:Quote",nsmgr).ToString(SaveOptions.DisableFormatting);
   } 
```

# java - 如何在 JFrame 的标题栏中添加图像图标？

> ID：13817565
> 
> 赞同：1
> 
> 时间：2012-12-11T09:49:46.407
> 
> 标签：java, image, swing, jframe

我需要在`JFrame`标题栏中添加图像，有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T09:57:51.107

你可以使用[`Window#setImageIcons(List<Image>)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setIconImages%28java.util.List%29)which 允许你提供一系列不同大小的，它允许底层平台选择最适合平台和外观的图标...

```
List<Image> images = new ArrayList<Image>(4);
images.add(ImageIO.read(getClass().getResource("/icons/icon16x16.png"));
images.add(ImageIO.read(getClass().getResource("/icons/icon24x24.png"));
images.add(ImageIO.read(getClass().getResource("/icons/icon32x32.png"));
images.add(ImageIO.read(getClass().getResource("/icons/icon48x48.png"));

frame.setImageIcons(images); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T09:52:48.723

[有关](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)`frame.setIconImage(Image image)`详细信息， 请参阅http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html 。用来代表你的形象。`BufferedImage`

# ios - 如何以编程方式在 iOS 6 中安装 ipa 文件

> ID：13817569
> 
> 赞同：7
> 
> 时间：2012-12-11T09:49:50.633
> 
> 标签：ios, installation, ipa

我们使用 iOS 私有框架`MobileInstallationInstall`，它在 iOS 5 中运行良好，如下所示：

```
typedef int (*MobileInstallationInstall)(NSString *path, NSDictionary *dict, void *na, NSString *path2_equal_path_maybe_no_use);

int result=pMobileInstallationInstall(ipaPath,[NSDictionary dictionaryWithObject:@"User" forKey:@"ApplicationType"],nil,ipaPath); 
```

但是，在 iOS 6 中，这个方法 ( `pMobileInstallationInstall`) 总是返回 -1。

有人可以帮助我吗？非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:06:18.717

请关注[如何更改我的 iOS 应用程序的权利？](https://stackoverflow.com/questions/14871748/how-do-i-change-my-applications-entitlements-to-com-apple-backboard-client)要签署您的应用程序，您需要将以下内容添加到 xml 文件中。

```
<key>com.apple.private.mobileinstall.allowedSPI</key>
<array>
    <string>Install</string>
    <string>Browse</string>
    <string>Uninstall</string>
    <string>Archive</string>
    <string>RemoveArchive</string>
</array> 
```

# matlab - 将矩形二进制矩阵转换为图形？

> ID：13817571
> 
> 赞同：0
> 
> 时间：2012-12-11T09:50:02.390
> 
> 标签：matlab, graph, binary, binary-data, graph-visualization

我知道方形二进制矩阵可以转换为图形。例如在下面的matlab矩阵中使用gplot可以转换为图形

```
0 1 1 
1 0 0
0 1 0 
```

可以用图来表示

```
A->B, A->C, B->A,C->B 
```

但我想知道是否有办法转换一个矩形矩阵

```
0 1
1 0
0 1 
```

在matlab或任何其他语言中以某种方式绘制图表？

我的行和列也是不同的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:06:37.370

如果您确实对[Bipartite graph](http://en.wikipedia.org/wiki/Bipartite_graph)感兴趣，就像@Ante 建议的那样，您也可以巧妙地利用[`gplot`](http://www.mathworks.com/help/matlab/ref/gplot.html)这里：

1.  首先通过用零列填充矩形矩阵来创建一个方形邻接矩阵：

    ```
    A = [0 1; 1 0; 0 1];
    Asq = eye(sum(size(A)));
    Asq(1:size(A, 1), end - size(A, 2) + 1:end) = A; 
    ```

2.  让我们决定行顶点在左侧，列顶点在右侧。现在为顶点创建一个坐标矩阵：

    ```
    xy1 = [ones(size(A, 1), 1), (1:size(A, 1))'];      % # Row vertices
    xy2 = [2 * ones(size(A, 2), 1), (1:size(A, 2))'];  % # Column vertices 
    ```

3.  绘制图形：

    ```
    gplot(Asq, [xy1; xy2], '*-')
    axis([0, 3, 0, size(A, 1) + 1]) 
    ```

这是你应该为你的例子得到的： ![在此处输入图像描述](../Images/d6a006d4c7471174c27f539e623412af.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:01:43.687

如果行和列的节点不同，则为[二分图](http://en.wikipedia.org/wiki/Bipartite_graph)的邻接矩阵。

# amazon-web-services - 在 EC2 上托管企业应用程序

> ID：13817574
> 
> 赞同：0
> 
> 时间：2012-12-11T09:50:15.637
> 
> 标签：amazon-web-services, amazon-ec2, vpc

我正在尝试将企业 Web 应用程序移动到 EC2，并且此应用程序使用 Windows 身份验证。所以我想知道我是否可以使用 Amazon VPC 访问 AWS EC2 上的应用程序，使用来自我现有公司域的 Windows 身份验证。请指教谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:01:32.980

运行 Windows 的 EC2 实例就像任何其他 Windows 机器一样，即使它们在 VPC 后面运行。

您需要考虑的事情可能是：

*   如何将管理凭据传递给这些机器？- 在这里，您可以为这些实例设置一个 IAM 角色，该角色可以读取 S3 上具有这些凭证的私有存储桶。然后，您可以在启动这些实例时在*User Data*字段中传递存储桶的名称。在此处查看更多详细信息：http: [//docs.amazonwebservices.com/IAM/latest/UserGuide/role-usecase-ec2app.html](http://docs.amazonwebservices.com/IAM/latest/UserGuide/role-usecase-ec2app.html)

*   如何在您的内部网络和 VPC 中的服务器之间建立一个安全的网络？您可以在公共 IP 之上附加一个不可用于公共访问的附加弹性网络接口 (ENI)。此 ENI 允许您使用公司域创建*管理网络*。在此处查看更多详细信息：http: [//docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_ElasticNetworkInterfaces.html](http://docs.amazonwebservices.com/AmazonVPC/latest/UserGuide/VPC_ElasticNetworkInterfaces.html)

您可能还想看看[AWS Direct Connect](http://docs.amazonwebservices.com/directconnect/latest/UserGuide/Welcome.html)

如果您有任何其他具体问题，请更新您的问题。

# ios - UISearchDisplayController 在 iOS 5 上不起作用

> ID：13817575
> 
> 赞同：1
> 
> 时间：2012-12-11T09:50:24.853
> 
> 标签：ios, storyboard, uitableview, uisearchbar, uisearchdisplaycontroller

我正在使用情节提要，并在需要搜索的表格视图控制器中添加了“搜索栏和搜索显示控制器”。它在 iOS 6+ 中按预期工作，具有调光和搜索功能（以及隐藏顶部导航栏的简洁功能）。

但在 iOS5 上，我的结果好坏参半。在我的一个表格视图控制器中，搜索栏出现并且可点击，显示键盘，但似乎没有连接搜索显示控制器，因为当您开始输入时没有任何反应。

在另一个表视图控制器中，它只是在被推送到导航控制器之前崩溃。这是没有堆栈跟踪的崩溃之一，显示了一些 CPU 指令。我的自定义表格视图控制器子类中的 viewWillLoad、viewDidLoad 等函数甚至从未被触发，所以我猜这也与 UISearchDisplayController 不太喜欢 iOS 5 中的故事板有关。当我删除视图时，视图被正确推送故事板中的搜索栏。

任何人都知道如何解决这个问题？根据我的阅读，“搜索栏和搜索显示控制器”似乎适用于 iOS 5 中的某些人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:24:14.550

猜猜我会自己回答这个问题。

似乎是 iOS 5 和在 Interface Builder 中创建的搜索显示控制器的问题。如果您手动设置搜索显示控制器，它就像在 iOS 6 上一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:11:55.850

所以我遇到了你的问题，这就是我解决问题的方法。

一点背景。我的故事板中有一个 UITableViewController 和一个搜索显示控制器，但是我手动创建了搜索显示控制器和搜索栏。相反，将 UISearchDisplayController + UISearchBar 拖入我的 UITableViewController 并将它们与 IBOutlets 连接起来。这解决了我的问题，希望对您和其他人有所帮助。

# php - 如何将许多迭代提取的数据值连接到一个函数调用中？

> ID：13817577
> 
> 赞同：0
> 
> 时间：2012-12-11T09:50:35.620
> 
> 标签：php, sql, postgresql

这是我写过的最丑陋的东西，但我只是不知道如何做到这一点。问题是我需要向数据库提交一个 SQL 查询，该数据库依赖于使用迭代从另一个位置提取的信息。

EG：我可以使用嵌套的 for 循环提取数据，但随后需要将一整行重新组合在一起以对 SQL 进行插入查询。我尝试将单元格数据临时存储在变量中并这样做，但这看起来也很糟糕并且不起作用。

这是我现在使用的代码：

请不要生气。我知道这很糟糕。我想变得更好。顺便说一句，我把这条线（第 98 行）称为千线，因为它有 1000 多个字符长。

```
$res1 = pg_query("INSERT INTO Project_Time_Sheet VALUES ('" . 
    $objWorksheet->getCellByColumnAndRow(0, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(1, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(2, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(3, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(4, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(5, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(6, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(7, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(8, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(9, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(10, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(11, $row)->getFormattedValue() . "', '" . 
    $objWorksheet->getCellByColumnAndRow(12, $row)->getFormattedValue() . "')"); 
```

请告诉我一个更好/更优雅/不是愚蠢的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T09:59:24.260

所以，我将尝试直接改进这个语句的汇编。这可能无法完全回答您的问题，但至少应该让您走上正确的道路。

```
$res1 = pg_query("INSERT INTO Project_Time_Sheet VALUES ('" . $objWorksheet->getCellByColumnAndRow(0, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(1, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(2, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(3, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(4, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(5, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(6, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(7, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(8, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(9, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(10, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(11, $row)->getFormattedValue() . "', '" 
    . $objWorksheet->getCellByColumnAndRow(12, $row)->getFormattedValue() . "')"); 
```

现在，这样看起来不是更好吗？不？稍微恐怖一点？对不起。

假设：您将始终`getCellByColumnAndRow`以数字作为第一个参数进行调用，它将始终以 1 开头，并且可以在任何时候结束。*不要像那样*构建 SQL ，而是先使用循环来收集数据......

```
$max = 12;
$values = array();
foreach(range(1, $max) as $index)
    $values[] = "'" . $objWorksheet->getCellByColumnAndRow($index, $row)->getFormattedValue() . "'"; 
```

现在您可以将阵列粘合在一起。

```
$sql = 'INSERT INTO Project_Time_Sheet VALUES(' . join(', ', $values) .')'; 
```

唔。 `getFormattedValue`SQL 安全的，对吗？如果不是呢？

还是有一些改进的地方。PostgreSQL 支持[准备好的语句](http://php.net/function.pg-prepare)。在这里使用它们可能是明智的。

同样，让我们​​盲目地假设事物是适度动态的。PHP 的 PG 扩展使用了非标准的占位符，这让我们的生活更加困难。让我们对数据收集做一个小改动：

```
$max = 12;
$values = array();
foreach(range(1, $max) as $index)
    $values[ '$' . $index ] = "'" . $objWorksheet->getCellByColumnAndRow($index, $row)->getFormattedValue() . "'"; 
```

数组现在是键控的，使用 PG 的准备好的语句占位符。

我们现在将使用*键*而不是值重新组合 SQL：

```
$sql = 'INSERT INTO Project_Time_Sheet VALUES(' . join(', ', array_keys($values)) .')'; 
```

`$sql`现在看起来像

```
INSERT INTO Project_Time_Sheet VALUES($1, $2, $3 ...); 
```

让我们准备并执行！

```
$sth = pg_prepare($dbh, '', $sql);
$res = pg_execute($dbh, '', array_values($values)); 
```

准备好的语句给我们带来了两件事：

1.  增加了对 SQL 注入的保护，以及
2.  在循环中使用时的潜在性能优势。一次准备，多次执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:58:43.157

就我个人而言，我会使用一个数组和一个循环来做到这一点：

```
$values = array();
foreach (range(0, 12) as $i)
{
    $values[] = "'" . $objWorksheet->getCellByColumnAndRow($i, $row)->getFormattedValue() . "'";
}
$values = implode(', ', $values);
$sql = "INSERT INTO Project_Time_Sheet VALUES ({$values})"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:00:34.820

使用迭代添加多个条目并不是一个奇怪的要求，我不会说这本身就是丑陋的。但是，您确实似乎在安全性方面存在问题，因为您没有转义参数。

我猜准备好的陈述实际上是您正在寻找的。否则，您还可以使用`pg_query_params`使其更清洁（并且更安全！）：

```
<?php
$statement = "INSERT INTO Project_Time_Sheet VALUES ( $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13 );";

pg_query_params( 
    $connection, 
    $statement, 
    array(
        $objWorksheet->getCellByColumnAndRow(0, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(1, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(2, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(3, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(4, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(5, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(6, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(7, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(8, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(9, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(10, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(11, $row)->getFormattedValue(),
        $objWorksheet->getCellByColumnAndRow(12, $row)->getFormattedValue()
    )
); 
```

随着值的增加，您可能希望有一个小循环：

```
<?php
$statement = "INSERT INTO Project_Time_Sheet VALUES ( $1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13 );";

for($i = 0; $i <= 12; $i++) {
    $values[] = $objWorksheet->getCellByColumnAndRow($i, $row)->getFormattedValue();
}

pg_query_params( $connection, $statement, $values ); 
```

*但是*，我不得不承认这有点“味道”。也许你的数据库没有足够的规范化，或者情况需要它，但请再次检查模式，你可能犯了一个小错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:01:52.910

为什么不使用循环完成查询？例如：

```
$query="INSERT INTO Project_Time_Sheet VALUES ('"; 
for($x=0; $x<$max;$x++){
    $query.=objWorksheet->getCellByColumnAndRow(0, $row)->getFormattedValue()."'";
    if($x<($max-1)){
          $query.=", '";
    }
}

$query.="');" 
```

# c# - Windows phone 7 在设置部分为应用程序创建设置

> ID：13817579
> 
> 赞同：0
> 
> 时间：2012-12-11T09:50:39.580
> 
> 标签：c#, .net, windows-phone-7, mobile, application-settings

我是Windows Phone编程的新手，所以请原谅我的无知。我有一个应用程序，我想在手机设置中为其创建一个设置页面，即设置 -> myApp -> myAppSettingsPage。这是可能的还是不可行的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:00:29.067

只有 OEM（如诺基亚和 HTC）可以向“设置”菜单添加条目。所以不，这是不可能的。

# iphone - Facebook iOS SDK 3.1 在朋友墙上发布图像错误

> ID：13817590
> 
> 赞同：0
> 
> 时间：2012-12-11T09:51:10.237
> 
> 标签：iphone, objective-c, ios, facebook, post

我在尝试在朋友墙上发布 UIImage 时使用最新的 Facebook iOS SDK 3.1.1，我收到错误 5（错误：HTTP 状态代码：403）。

如果我尝试将图像张贴在我的墙上，它的效果很好，但不是我的一个朋友。

我的代码： 1\. 在发布之前，我正在检查用户是否具有正确的权限，当他这样做时，我正在制作

```
-(void)postImageOnFriendsWall:(UIImage*)image FriendsArray:(NSArray*)friends
{
    // if we don't have permission to announce, let's first address that
    if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound)
    {

    [FBSession.activeSession reauthorizeWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                               defaultAudience:FBSessionDefaultAudienceFriends
                                             completionHandler:^(FBSession *session, NSError *error)
     {
         if (!error)
         {
             // re-call assuming we now have the permission
             [self postImageOnFriendsWall:image FriendsArray:friends];

         }
         else
         {
             UIAlertView *alertView = [[UIAlertView alloc]  initWithTitle:@"Error"                        message:error.localizedDescription                                                                                                delegate:nil                                                                                         cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil];
             [alertView show];
         }

     }];
}
else
{

    // can post image
    for (id<FBGraphUser> user in friends)
    {

        NSString *userID = user.id;
        NSLog(@"trying to post image of %@ wall",userID);
        NSMutableDictionary  *postVariablesDictionary = [[NSMutableDictionary alloc] init];
        [postVariablesDictionary setObject:UIImagePNGRepresentation(image) forKey:@"picture"];
        [postVariablesDictionary setObject:@"my image" forKey:@"message"];

        [FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/photos",userID] parameters:postVariablesDictionary HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
         {
             if (error)
             {
                 //showing an alert for failure
                 UIAlertView *alertView = [[UIAlertView alloc]  initWithTitle:@"Facebook" message:error.localizedDescription                                                                                                delegate:nil   cancelButtonTitle:@"OK"              otherButtonTitles:nil];
                 [alertView show];
             }
             else
             {
                 //showing an alert for success
                 UIAlertView *alertView = [[UIAlertView alloc]  initWithTitle:@"Facebook" message:@"Shared the photo successfully"                                                                                                delegate:nil   cancelButtonTitle:@"OK"              otherButtonTitles:nil];
                 [alertView show];
             }
         }];

    }
}
} 
```

提到，如果我改变

`startWithGraphPath:[NSString stringWithFormat:@"%@/photos",userID]`

到

```
startWithGraphPath:[NSString stringWithFormat:@"me/photos",userID] 
```

它工作正常。

我究竟做错了什么？我一直在寻找答案，但没有任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:48:21.323

发生这种情况是因为您的权限级别不足。正如 FB 文档所说：

> Insufficient_scope 该请求需要比访问令牌提供的权限更高的权限。资源服务器应该以 HTTP 403（禁止）状态代码响应，并且可以包含“范围”属性以及访问受保护资源所需的范围。

您必须获得高级权限才能发布到其他用户的墙。您需要的权限是 @"publish_stream"，它“使您的应用能够将内容、评论和喜欢发布到用户的流和用户朋友的流中。这是一个超集发布权限，还包括 publish_actions。”(c)

最新的更改迫使您将所需的权限划分为两个级别 -**基本**允许您阅读有关用户的基本信息和**高级**（帖子等）以下是权限列表： [扩展权限列表](http://developers.facebook.com/docs/reference/login/extended-permissions/)

这意味着您必须分两个步骤请求适当的权限。先获得基础，再要求进阶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:29:46.723

您必须检查您的 facebook 应用程序 ID 有时会用它创建问题。因为我有同样的问题将墙发布到我的朋友墙但更改 facebook 应用程序 ID 并且它的工作完美。

# c# - 将图像加载到内存中的最佳方法？

> ID：13817591
> 
> 赞同：5
> 
> 时间：2012-12-11T09:51:11.593
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我的项目资产文件夹中有很多图像，我需要在应用程序启动时将它们加载到内存中。减少 CPU 负载和时间的最佳方法是什么。

我正在这样做：

```
for (int i = 0; i < 10; i++)
        {
            var smallBitmapImage = new BitmapImage
            {
                UriSource = new Uri(string.Format("ms-appx:/Assets/Themes/{0}/{1}-small-digit.png", themeName, i), UriKind.Absolute)
            };

            theme.SmallDigits.Add(new ThemeDigit<BitmapImage> { Value = i, BitmapImage = smallBitmapImage, Image = string.Format("ms-appx:/Assets/Themes/{0}/{1}-small-digit.png", themeName, i) });
        } 
```

然后我将此 BitmapImage 绑定到图像控件。

但我不确定设置 UriSource 是否真的将图像加载到内存中。

我还看到了 BitmapImage 的 SetSourceAsync 属性。但我不确定如何在我的上下文中使用它。任何人都可以帮助我使用 SetSourceAsync 属性或加载图像的最佳方式....

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:08:38.200

因为我不想显示错误的答案，所以我必须在 10 秒后添加另一个答案......

例子：

```
BitmapImage image1 = LoadImageToMemory("C:\\image.png");
BitmapImage image2 = LoadImageToMemory(webRequest.GetResponse().GetResponseStream());

public BitmapImage LoadImageToMemory(string path)
{
        BitmapImage image = new BitmapImage();

        try
        {
            image.BeginInit();
            image.CacheOption = BitmapCacheOption.OnLoad;
            System.IO.Stream stream = System.IO.File.Open(path, System.IO.FileMode.Open);
            image.StreamSource = new System.IO.MemoryStream();
            stream.CopyTo(image.StreamSource);
            image.EndInit();

            stream.Close();
            stream.Dispose();
            image.StreamSource.Close();
            image.StreamSource.Dispose();
        }
        catch { throw; }

        return image;
} 
```

// 或者使用 System.Net.WebRequest().GetResponse().GetResponseStream()

```
public BitmapImage LoadImageToMemory(System.IO.Stream stream)
    {
        if (stream.CanRead)
        {
            BitmapImage image = new BitmapImage();

            try
            {
                image.BeginInit();
                image.CacheOption = BitmapCacheOption.OnLoad;
                image.StreamSource = new System.IO.MemoryStream();
                stream.CopyTo(image.StreamSource);
                image.EndInit();

                stream.Close();
                stream.Dispose();
                image.StreamSource.Close();
                image.StreamSource.Dispose();
            }
            catch { throw; }

            return image;
        }

        throw new Exception("Cannot read from stream");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T17:36:16.410

如果您使用`System.Drawing`命名空间，则从流中启动图像会更容易：

```
try
{
   var req = WebRequest.Create(photoUrl);

   using (var response = req.GetResponse())
   {
     using (var stream = response.GetResponseStream())
     {
       if (stream != null)
       {
         var image = Image.FromStream(stream);
       }
     }
   }
 }
 catch (Exception ex)
 {
   // handle exception
 } 
```

# iphone - Ios 5 在 [[NSRunLoop currentRunLoop] runMode 期间崩溃

> ID：13817593
> 
> 赞同：0
> 
> 时间：2012-12-11T09:51:17.123
> 
> 标签：iphone, objective-c, xcode, ios5

问题发生在

```
while (!self.complete && [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]])
{

} 
```

应用程序因信号而崩溃

```
-[__NSCFString bytes]: unrecognized selector sent to instance 0x8577710 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:58:06.097

您正在将`-bytes`消息发送到`NSString`. 您可能的意思是将其发送到`NSData`. 由于您没有显示那部分代码，因此很难说出您将采取什么措施来修复它。

# grid - 从网格值生成字符串

> ID：13817595
> 
> 赞同：0
> 
> 时间：2012-12-11T09:51:23.487
> 
> 标签：grid, form-submit, extjs4.1

我有一个带有两个字段集的表单面板。一个字段集包含文本字段，另一个包含带有检查列的网格。当用户单击“创建项目”按钮时，我希望生成一个字符串，该字符串显示在警报消息中。到目前为止，我已经成功地从文本字段中生成了一个字符串。但是，我没有成功地在网格记录之外这样做（注意：我知道网格不是有效的表单子项。也只需要将网格中的修改记录生成为字符串）。关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:00:59.717

以下代码有效：

```
Ext.each(teststore.getRange(), function (rec, idx, a) {
                        var s = [],
                            data = rec.data,
                            key;

                    for (key in data) {
                        s.push('&teststore', '[', idx, '].', key, '=', data[key]);
                        }
                        alert(s.join(''));
                    }); 
```

现在，警报一次将一条记录显示为字符串。但是，我希望商店中的所有记录都显示在一条警报消息中。我仍在努力。

# android - 向列表视图添加标题

> ID：13817596
> 
> 赞同：0
> 
> 时间：2012-12-11T09:51:25.120
> 
> 标签：android

我正在尝试向我的列表视图添加一个标题，但只添加了标题......剩余的列表视图仍然是空的......并且知道我做错了什么？？？

这是我的代码...

```
public class Settings extends Activity {

    String setting[];
    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        try {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.settings);
            setting = new String[] { "Reset Password" };
            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, setting);
            lv = (ListView) findViewById(R.id.Lvsettings);

            View header = (View) getLayoutInflater().inflate(R.layout.header,
                    null);
            lv.addHeaderView(header);

            lv.setAdapter(adapter);

            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int position, long arg3) {
                    // TODO Auto-generated method stub
                    startact(position);
                }
            });
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), String.valueOf(e),
                    Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:57:24.850

尝试这个

```
LayoutInflater inflater = getLayoutInflater();
ViewGroup header = (ViewGroup)inflater.inflate(R.layout.header, lv, false);
lv.addHeaderView(header, null, false); 
```

参考[Android：将静态标题添加到ListActivity的顶部](https://stackoverflow.com/questions/2620177/android-adding-static-header-to-the-top-of-a-listactivity)

# css - css 如何通过行或字符数限制字符数？

> ID：13817597
> 
> 赞同：13
> 
> 时间：2012-12-11T09:51:24.987
> 
> 标签：css, layout, word-wrap, character-limit

是否有可以执行以下操作之一的 css 属性？但首先，让我解释一下。

想象一个砌体布局，其中每个项目的宽度：200px；每个都是 height: 250px; （这只是一个例子）。

在每个项目中，都有一个缩略图和一个链接，而且这个链接通常会换行到 2-3 行，因此每个项目的高度都不同。

有没有办法我可以在一个类中设置最大字符数，或者在特定行数之后切断换行？甚至可能添加一些 CSS 效果来插入内容："..."; 在行结束之前表明它被切断了？

任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-11T10:00:11.713

您可以尝试`text-overflow`，但它有一些限制，但仍可能适合您：

[例子](http://jsfiddle.net/fVeqY/)

```
<div id="container">
    This is some short content to demonstrate the css-property
    text-overflow
</div>​

#container{
    width:100px;
    height:50px;
    border:1px solid red;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space: nowrap;   
}​ 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-11T09:59:15.707

不是字符，但您可以设置元素的宽度（以像素为单位）并使用应该添加“...”[的 text-overflow属性。](http://www.quirksmode.org/css/textoverflow.html)

此外，您可以通过将元素的高度设置为例如 30px 并将 line-height CSS 属性设置为 15px 并添加来限制行数`overflow:hidden`。这样，您将拥有准确的两行文本。

```
.twoLines{
   height:30px;
   line-height:15px;
   overflow:hidden;
} 
```

# git - 我如何告诉 Jenkins 编译存储库的一些分支，但不是所有分支？

> ID：13817602
> 
> 赞同：8
> 
> 时间：2012-12-11T09:51:33.157
> 
> 标签：git, jenkins

在我的工作地点，我们在创建 git 分支时使用 2 个字母编码的命名约定。例如，功能 Apple 可能是 ftr_ap_hotfix，功能 Orange 可能在分支 ftr_or_hotfix 中完成。

我想在 Jenkins 中创建两个单独的工作。一项作业应编译与名称匹配的所有分支，`**_ap_**` 另一项作业应编译与名称匹配的所有分支`**_or_**`

但是，当我设置它时，Jenkins 正在编译所有分支，无论其名称如何。

我究竟做错了什么？有一个更好的方法吗？

我从 Jenkins 页面获得的唯一帮助如下：

> 如果您想跟踪存储库中的特定分支，请指定分支。如果留空，将检查所有分支的更改并进行构建。语法格式为：REPOSITORYNAME/BRANCH。此外，BRANCH 被识别为 */BRANCH 的简写，`'*'`被识别为通配符，并且`'**'`被识别为包含分隔符“/”的通配符。因此，`origin/branches*`将匹配 origin/branches-foo 但不匹配 origin/branches/foo，同时 `origin/branches**`将匹配 origin/branches-foo 和 origin/branches/foo。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T12:40:18.607

[正如评论](https://stackoverflow.com/questions/13817602/how-can-i-tell-jenkins-to-compile-some-but-not-all-branches-of-a-repository/13820639#comment19015143_13817602)的那样，它可能仅适用于**[分层分支名称](https://stackoverflow.com/a/2527436/6309)**：

```
feature/** 
```

, 而不是分支名称的一部分。
所以命名约定如下：

*   `ftr/or/hotfix`, 带有模式 ' `*/or/*`' 或 ' `**/or/**`'
*   `ftr_or/hotfix`, 带有模式 ' `ftr_or/**`'

可以更好地工作。

# objective-c - 用 SegmentedControl 改变 NSArray

> ID：13817604
> 
> 赞同：-2
> 
> 时间：2012-12-11T09:51:41.727
> 
> 标签：objective-c, ios, xcode

请帮帮我。我有 3 个`NSArray`：`arr1, arr2, arr3`。

```
- (void)viewDidLoad
  {        
     ///arr1
     ///arr2
     ///arr3

     for(NSString *name in arr1) 
     {
        ///mycode 
     }
  }

- (IBAction)didChangeSegmentControl
{
     if (self.switchSegmented.selectedSegmentIndex == 0)
     {
         NSLog(@"arr1");
     }
     else if (self.switchSegmented.selectedSegmentIndex == 1)
     {
        NSLog(@"arr2");
     }
     else if (self.switchSegmented.selectedSegmentIndex == 2)
     {
       NSLog(@"arr3"); 
     }   
} 
```

`arr1`当我的`arr2`时候我怎么能把这个变成我`segmentedControl`的`selectedSegmend2`？？？

我想`for(NSString *name in arr1)`用`for(NSString *name in arr2)`if `segmentedControl`is改变这条线`selectedSegment 2`。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:18:09.863

添加一个函数，如：

```
- (void)checkArray:(NSMutableArray *)yourArray
{
  for(NSString *name in yourArray) 
  {
       //your code 
  }
} 
```

并更改您的方法，例如：

```
- (void)viewDidLoad
  {        
     ///arr1
     ///arr2
     ///arr3

     [self checkArray:arr1];
  }

- (IBAction)didChangeSegmentControl
{
     if (self.switchSegmented.selectedSegmentIndex == 0)
     {
         NSLog(@"arr1");
     }
     else if (self.switchSegmented.selectedSegmentIndex == 1)
     {
        NSLog(@"arr2");
     }
     else if (self.switchSegmented.selectedSegmentIndex == 2)
     {
       [self checkArray:arr2];
     }   
} 
```

# build - Dojo 1.8 构建系统 - 如何设置前缀/路径？

> ID：13817611
> 
> 赞同：1
> 
> 时间：2012-12-11T09:51:49.387
> 
> 标签：build, dojo, path, prefixes

我正在为 Dojo 1.8 构建系统而苦苦挣扎。我正在尝试使用 dojo/text!templates/SomeView.html 从 url myapp/tmpl/SomeView.html 获取 html：

```
//FILE: SomeView.js
define(["dojo/_base/declare", "dojo/text!templates/SomeView.html", ...
  function(declare, SomeViewTemplateHTML, ...
  return {... 
```

我似乎无法检测到映射到“myapp/tmpl/”模块路径的“模板”前缀。我尝试过路径、loaderConfig.paths、前缀。但是当我运行 build.sh --profile app.profile.js 时，这些似乎都没有做任何事情：

```
//FILE: app.profile.js
var profile = (function(){
return {
    basePath: ".",
    releaseDir: "builds",
    releaseName: "foooo",
    optimize: "closure",
    cssOptimize: "comments",
    action: "release",

    packages:[{
        name: "pkg1",
        location: "myapp/pkg1"
    }],

    loaderConfig: {
        paths: {
        "templates": "myapp/tmpl"
        },
        prefixes: {
        "templates": "myapp/tmpl"
        }               
    },
    prefixes: {
        "templates": "myapp/tmpl"
    },

    layers: {
        "dojo/dojo-release": {
            include: [ "dojo/dojo", "dojo/domReady"],
            customBase: true,
            boot: true
        },
        "foobar/foobar-release": {
            include: [
                "myapp/app"
            ]
        }
    }
};
})(); 
```

任何帮助将不胜感激！我已经多次阅读 dojo/app 和 dojo 构建页面，但所有信息确实有限......

问候，肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:04:04.760

没有模板映射作为构建过程的一部分，所以如果以下是您的结构

```
myapp/SomeView.js
myapp/tmpl/SomeView.html 
```

那么`dojo/text!templates/SomeView.html`应该是`dojo/text!./tmpl/SomeView.html`

# grails - 降级到 grails 2.1.0 时，无法将具有类“groovy.util.ConfigObject”的对象“{}”转换为类“java.lang.Integer”异常

> ID：13817614
> 
> 赞同：1
> 
> 时间：2012-12-11T09:51:58.647
> 
> 标签：grails, type-conversion, constants

我使用的是 grails 2.1.1，然后又回到了 2.1.0。此举之后，我在访问使用 grailsApplication 放入引导文件中的常量时遇到了问题。例如在运行以下代码时：

```
def list(Integer max) {
        max=max ?: grailsApplication.config.LIST_MAX
} 
```

我得到了这个例外：

```
org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object '{}' with class 'groovy.util.ConfigObject' to class 'java.lang.Integer'
    at org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation.castToNumber(DefaultTypeTransformation.java:146)
    at org.codehaus.groovy.runtime.typehandling.DefaultTypeTransformation.castToType(DefaultTypeTransformation.java:248)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.castToType(ScriptBytecodeAdapter.java:599)
    at accountcontrol.AuditController.list(AuditController.groovy:16)
    at accountcontrol.AuditController.list(AuditController.groovy)
    at accountcontrol.AuditController$list.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
    at accountcontrol.AuditControllerTests.testList(AuditControllerTests.groovy:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

知道如何解决吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:47:24.607

这边走？

```
def list(Integer max) {
        max=max?.toString().isNumber()?max:grailsApplication.config.LIST_MAX
} 
```

# linux - 如果存在两个文件，则执行命令

> ID：13817618
> 
> 赞同：1
> 
> 时间：2012-12-11T09:52:27.713
> 
> 标签：linux, bash, unix, if-statement

如果某个位置存在两个文件，我正在尝试执行命令

如果只有两个文件中的一个存在脚本必须执行另一个不同的命令这里是我尝试过的脚本

如果 [ -e /Users/NJ/Library && /Users/NJ/Desktop ];那么

回声

别的

回声单

菲

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:55:55.207

您需要将测试分隔到它们自己的方括号中：

```
if [ -e file ] && [ -e file ]; then
  echo "wow"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:56:45.510

```
if [ -e "/Users/NJ/Library" -a -e "/Users/NJ/Desktop" ];then 
```

……

`[ condition ]`评估者使用 -a 表示 AND & -o 表示 OR 。[这](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html "Bash 'if' 语法")是一本手册。

或使用以下语法。

```
if [ -e "/Users/NJ/Library" ] && [ -e "/Users/NJ/Desktop" ];then 
```

……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:59:47.770

您可以使用一个简单的双括号：

```
if [[ -e /Users/NJ/Library && -e /Users/NJ/Desktop ]] ;then

echo both

else

echo single

fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T18:32:24.103

如果 [ -e /Users/NJ/Library ] && [ -e /Users/NJ/Desktop ] ;那么

回声

别的

回声单

菲

# 这种模式效果很好

# android - 带有帮助工具提示的 EditText

> ID：13817620
> 
> 赞同：1
> 
> 时间：2012-12-11T09:52:29.333
> 
> 标签：android, imageview, android-edittext, tooltip

我在 iphone 上有这个应用程序，我想为 android 制作它，在 iphone 上，当开始在 EditText 中编辑文本时，显示顶部显示带有消息的工具提示，我想让它也适用于 android，但我没有找不到任何有用的东西，这里是 iphone printscreen 的链接

[http://www.codemyworld.com/edi/Android/IMG_0022.PNG](http://www.codemyworld.com/edi/Android/IMG_0022.PNG)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:01:26.370

Android 中没有悬停工具提示的概念。您可以做以下两件事中的任何一件：

`LongClickListener``EditText`当用户长按它时，你会显示一个祝酒词。像这样的东西：

```
View view = (View)findViewById(R.id.your_view);
view.setOnLongClickListener(new OnLongClickListener() {
    @Override
    public void onLongClick(View v) {
      Toast toast = Toast.makeText(this, "Show hint here", Toast.LENGTH_SHORT);
    }
}); 
```

或者

在 EditText 中显示 Hint，让用户知道他们需要输入什么。

```
<EditText
    android:hint="Your tip here" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T14:38:16.577

```
 @Override
    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        //your code here
        //showtooltip();
    }

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
            int arg3) {
        // TODO Auto-generated method stub

    }

    @Override
    public void afterTextChanged(Editable arg0) {
        // TODO Auto-generated method stub
    }
}); 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T10:03:16.250

这可以使用 EditText 上的 OnFocusChangeListener 来完成

这个想法是您将创建工具提示布局并在焦点更改时更改其可见性

您可以使用 FrameLayout 在正常布局的顶部创建提示布局，也可以通过在布局顶部添加工具提示布局来创建提示布局。在这两种情况下，可见性都会消失。

然后使用 OnFocusChangeListener 显示或隐藏工具提示

```
edittxt.setOnFocusChangeListener(new OnFocusChangeListener()
{
    @Override
    public void onFocusChange(View v, boolean hasFocus) 
    {
        if (hasFocus == true)
        {
          // Show tool tip  
        }else{
           // Hide tool tip
        }
    }
}); 
```

您还可以使用不同的侦听器来增强它，例如 OnKeyListener

只是为了改进我的答案

您还可以使用Android 的[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)类，它有助于我们对文本更改做出反应。

请参考以下在您的示例中使用 TextWatcher

```
 TextWatcher textWatcher = new TextWatcher()
 {
    @Override
    public void onTextChanged(CharSequence s , int start,int before,int count){

    }
    @Override
    public void afterTextChanged(Editable s){

    }
    @Override
    public void beforeTextChanged(CharSequence s, int start,int count, int after){

    }

  };

   Then use it as 
   edittext.addTextChangedListener(textWatcher); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-13T11:36:38.043

你可以使用这个： TooltipCompat.setTooltipText(editText, editText.getText())

# file - 节点：在文件夹中搜索文件类型

> ID：13817621
> 
> 赞同：1
> 
> 时间：2012-12-11T09:52:31.673
> 
> 标签：file, node.js

我想知道搜索具有`*.tmpl.*`类似`comment.tmpl.dot`Node 格式的模板文件并获取文件内容并将其作为回调中的参数执行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:56:04.457

我的基本计划是

1.  阅读目录
2.  使用正则表达式匹配您的文件名模式
3.  阅读文件并做任何你需要的事情

这是一些让您入门的代码，这里是 NodeJs [http://nodejs.org/api/fs.html中的文件系统 API](http://nodejs.org/api/fs.html)

```
 var fs = require('fs'),
    sourcePath = '/your path/'; 

    var files = fs.readdirSync(sourcePath);

    for (var f in files){
        var file = files[f];

        if (file.match(/.*\.tmpl\..*/) {

            // do whatever you want e.g. read the file
            fs.readFile(file, function (err, data) {
                 if (err) throw err;
                 console.log(data);
            });
        }
    } 
```

# tcp - 在 TCP 连接中，send 的长度是否与 recv 的长度匹配到某个限制？

> ID：13817622
> 
> 赞同：1
> 
> 时间：2012-12-11T09:52:37.723
> 
> 标签：tcp

我想知道当传递给的大小`send()`增加时，TCP/IP 连接会发生什么。

在一个简单的 TCP/IP 连接中（默认属性，没有 TCP/IP 未修复的错误），是否保证传入的大小`send()`将是 in 的大小`recv()`，可能达到某个限制？如果是，可以确定这个限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:30:38.190

每个 send() 发送的数据大小可能与每个 recv() 不匹配，因为接收方不知道消息的大小。例如：一条 100 字节的消息可以分 10 个块发送，也可以一次发送 100 字节。

关于问题的第二部分，最大发送缓冲区大小可以通过一个简单的调用来确定：

int sockbufsize = 0; 大小 = sizeof(int); getsockopt(skt, SOL_SOCKET, SO_SNDBUF,(char *)&sockbufsize, &size); //skt 是套接字描述符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:30:48.737

不，这不能保证。TCP 是一个流协议，它的套接字接口只保证字节流将以正确的顺序传输并且没有错误，仅此而已。当然，由于它保证了所有数据的正确发送，所以发送的总字节数将是接收到的总字节数。

# objective-c - 如何从 iPhone 中 JSON 格式的数组中一一提取值？

> ID：13817624
> 
> 赞同：2
> 
> 时间：2012-12-11T09:52:45.263
> 
> 标签：objective-c, iphone, json

```
Array 

DAATA (
            (
                    {
                Description = "<p>Image3</p>";
                "Image_Id" = 68;
                "Image_Path" = "aa6b74d47227ebd24561211a2c95199c.jpg";
                "Product_Address" = "Jaipur ,Rajastha";
                "Product_Booked" = N;
                "Product_Id" = 1;
                "Product_Info" = "The Indian Hotels Company Limited (IHCL) and its subsidiaries are collectively known as Taj Hotels Resorts and Palaces and is recognised as one of Asia's largest and finest hotel company. Incorporated by the founder of the Tata Group, Mr. Jamsetji N. Tata, the company opened its first property, The Taj Mahal Palace Hotel, Bombay in 1903\. The Taj, a symbol of Indian hospitality, completed its centenary year in 2003\. ";
                "Product_Latitude" = "26.9260\U00b0N";
                "Product_Longitute" = "75.8235\U00b0E";
                "Product_Name" = demo1;
                "Product_Offer_Price" = "$200";
                "Product_Price" = "$345";
                "Product_Type" = "five star";
            },
                    {
                Description = "<p>yo yo</p>";
                "Image_Id" = 75;
                "Image_Path" = "415e2e6b7a3b1850e06467ade2e10fa9.jpg";
                "Product_Address" = "jaipur,rajasthan";
                "Product_Booked" = N;
                "Product_Id" = 2;
                "Product_Info" = "five star";
                "Product_Latitude" = "";
                "Product_Longitute" = "";
                "Product_Name" = "hotel night rider";
                "Product_Offer_Price" = "$200";
                "Product_Price" = "$345";
                "Product_Type" = "five star";
            }
        )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:07:28.110

```
 NSString *responseString = [request1 responseString];//your json response will be here
 NSMutableDictinoary *dataDict = [[[responseString JSONValue] valueForKey:@"DAATA"]mutableCopy];//take response in dictinoary
 for(int i = 0 ; i<[[dataDict valueForKey:@"DAATA"] count];i++)
{
    if([[[[dataDict valueForKey:@"DAATA"] objectAtIndex:i] valueForKey:@"Image_Id"] isEqualToString:@"court"])//get what you want here for example get "Image_Id"
    {
        NSMutableDictionary *dd=[[dataDict valueForKey:@"result"] objectAtIndex:i];
        [arrCourt addObject:dd];
    }
   and so on.........

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:04:10.153

查看[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html "NSJSON序列化")并使用它来解析您的 json 字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:14:42.897

另一种选择是使用[SBJson](http://stig.github.com/json-framework/)库。

```
- (void) connectionDidFinishLoading:(NSURLConnection *) conn 
{
//Call back called when data reception completes (stored in variable data)
NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSDictionary *results = [jsonString JSONValue]; // This is a new category added to the NSString by SBJSON
if ([results count]>0)
{ 
    // decoding a JSON object like so: {"result":"yes"}
    [results objectForKey:@"result"] ;
    if ([[results objectForKey:@"result"] isEqualToString:@"yes"])
    {
        [self registrationStateSetTo:YES];
        NSLog(@" registered OK "); 
    }
    else 
    {
        [self registrationStateSetTo:NO];
        NSLog(@" registration failed "); 
    }
}
} 
```

# apache-poi - 无法使用 apache.poi 库读取 PPT 文件

> ID：13817627
> 
> 赞同：1
> 
> 时间：2012-12-11T09:53:00.410
> 
> 标签：apache-poi, hslf

我想读取一个 ppt 文件，我尝试使用 apache.poi 库 API 读取文件。这就是我尝试过的。

```
POIFSFileSystem posF = new POIFSFileSystem(fileInputStream); 
```

它引发以下错误

```
java.io.IOException: Invalid header signature; read 4851293027410584380, expected -2226271756974174256
at org.apache.poi.poifs.storage.HeaderBlockReader.<init>(HeaderBlockReader.java:112)
at org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:151) 
```

这个问题已经在stackoverflow上被问过很多次，我尝试了所有建议的解决方案，但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:40:49.300

该错误告诉您，您的文件毕竟不是 PPT 文件。（它不是 OLE2 文件，是 .PPT 所基于的底层格式）

要弄清楚您的文件实际上是什么，我建议`file`在附近的 unix 机器上使用该实用程序，或者将[Apache Tika](http://tika.apache.org/)与 TikaCLI 和 --detect 一起使用。这应该可以帮助您确定您的文件是什么（提示 - 它不是 .ppt 因此出现错误！）然后您可以确定使用哪个库来打开它

# javascript - 打包钛模块时出现错误“您可能需要通过XCode安装命令行工具包”？

> ID：13817629
> 
> 赞同：0
> 
> 时间：2012-12-11T09:53:03.483
> 
> 标签：javascript, titanium, titanium-mobile, titanium-modules

有谁知道如何为 Android 打包 Titanium 模块？每次我尝试打包 Titanium 模块时，它都会给我一个错误。这是我的日志输出：

```
Executing build.xml...
/Library/Application Support/Titanium/mobilesdk/osx/2.1.4.GA/module/android/build.xml:362: The following error occurred while executing this line:
/Library/Application Support/Titanium/mobilesdk/osx/2.1.4.GA/module/android/build.xml:317: exec returned: 2You may need to install the Command Line Tools package through XCode, in case you haven't done so yet. 
```

这是我的电脑规格：

*   Mac OS X 雪豹
*   钛2.1.4GA
*   XCode 3.0

这是我的 build.properties：

```
titanium.platform=D:\\Users\\Administrator\\AppData\\Roaming\\Titanium\\mobilesdk\\win32\\2.1.4.GA\\android
android.platform=C:\\DeveloperFolder\\adt-bundle-windows-x86_64\\adt-bundle-windows\\sdk\\platforms\\android-8
google.apis=C:\\DeveloperFolder\\adt-bundle-windows-x86_64\\adt-bundle-windows\\sdk\\add-ons\\addon-google_apis-google-8 
```

有谁知道如何解决它？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:47:35.047

您是否尝试过按照它所说的那样通过 Xcode 安装命令行工具包？

此外，Titanium Mobile 2.1.4GA 不支持该版本的 Xcode (3.0)。您需要至少升级到 4.2 版，详见兼容性矩阵：[http ://docs.appcelerator.com/titanium/2.0/#!/guide/Titanium_Compatibility_Matrix-section-29004837_TitaniumCompatibilityMatrix-Xcode](http://docs.appcelerator.com/titanium/2.0/#!/guide/Titanium_Compatibility_Matrix-section-29004837_TitaniumCompatibilityMatrix-Xcode)

# asp.net - 为多个表创建一个存储的插入

> ID：13817631
> 
> 赞同：1
> 
> 时间：2012-12-11T09:53:14.280
> 
> 标签：asp.net, sql-server

我有多个页面的申请人项目，因为用户将通过这些页面完成他的申请人数据，然后在最后一页他会找到提交数据。

我的问题是，我有多个表，当用户提交他的数据时，数据将插入到它的表中，那么我怎样才能为所有这些表创建一个存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:15:27.220

您使用的是 .NET 框架吗？如果有，是什么版本？

如果您使用 .NET > 3.5 + MS SQL 2008，您可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:22:35.903

如果要一次插入/更新多个表，最好使用存储过程。创建/读取/更新/删除 (CRUD) 存储过程通常是很好的做法，可以降低 SQL 注入攻击的风险。

以下是您的 Create (insert) 存储过程的样子（它不完整且未规范化）：

```
CREATE PROCEDURE [dbo].[ApplicantIns]
(   
    @Name   nvarchar(50)
    ,@Skill nvarchar(5)
    ,@Age   int
    ,@comment nvarchar(50)
)
AS
    SET NOCOUNT ON;

    INSERT INTO [dbo].[Applicant]([name]) VALUES(@Name);

    INSERT INTO [dbo].[Skillset]([Skill], [Comment]) VALUES(@Skill,@Comment);

    INSERT INTO [dbo].[Statistics]([Age]) VALUES (@Age); 
```

然后，当有人提交新应用程序时，您可以调用此存储过程。

# oracle10g - Oracle BI Publisher 中的日文字符

> ID：13817633
> 
> 赞同：0
> 
> 时间：2012-12-11T09:53:17.977
> 
> 标签：oracle10g, bi-publisher

我们正在使用 Oracle BI Publisher。我们有一份日语报告。报告的输出是 HTML 格式，并且可以正确显示。当我们使用计划按钮或发送按钮将其作为邮件发送时，日文文本无法正确显示。它显示为>`å®šæœŸå•¥å ´æ¤œæŸ»ã¯ã€ä»Šå›žã®å•¥å >´æ¤œæŸ»ã®ç´„1å¹´å¾Œã«å®Ÿæ–½ã„ãŸã—ã¾ã™`

如果有人早些时候处理过这个问题，请提供帮助。使用的编码是 UTF-8（Unicode）。它适用于西班牙语和葡萄牙语，但不适用于日语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:24:15.963

您的“mojibake”字符串似乎正确的 UTF-8 日语字符串被解析为 ISO-Latin。我认为以下两个原因之一是原因。

1.  Oracle BI Publisher 设置不`Content-Type`正确。
2.  您或您客户的 MUA（邮件用户代理）不支持`UTF-8`日语。

# c++ - 查找第一次写入 LLDB 中的变量

> ID：13817636
> 
> 赞同：0
> 
> 时间：2012-12-11T09:53:31.583
> 
> 标签：c++, clang, breakpoints, lldb, watchpoint

我正在使用 LLDB 调试一个大型程序，并且有一个`bool`随处使用的变量，通常称为 extern。我已经调试了一段时间，无论我在哪里设置断点，值总是`true`. 我想找到这个值的设置位置 - 我已经尝试搜索代码并在每次分配该变量时设置断点，但似乎没有一个被触发，并且在稍后的断点处，该值总是`true`. 有什么方法可以确定第一次写入变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T01:02:52.587

就像 Flash Sheridan 在他对您的问题的评论中指出的那样，您想在此处使用观察点。在你的应用程序早期设置断点（例如`NSApplicationMain`），在你的（可能是全局的）布尔变量上设置一个观察点，

```
(lldb) watch set variable myvar 
```

或者

```
(lldb) w s v myvar 
```

这应该在每次`myvar`修改时停止程序执行。

# android - 使用weakReference 和WakHasMap Android 位图

> ID：13817637
> 
> 赞同：1
> 
> 时间：2012-12-11T09:53:36.910
> 
> 标签：android, bitmap, android-asynctask, android-arrayadapter, android-memory

用图像制作后：

```
 WeakHashMap<Bitmap, WeakReference<Bitmap>> objReferenciaDebilBitmaps;
 Bitmap imagen = datossss.getImagen();
 objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps); 
```

我的班级 Creferencias

```
public class CReferencias {

public CReferencias(){

}

public void RegristrarReferenciaDebilBitmap(Bitmap img, WeakHashMap<Bitmap, WeakReference<Bitmap>> objReferenciaDebilBitmaps){
    WeakReference<Bitmap> objrererencia1 = new WeakReference<Bitmap>(img);
    objReferenciaDebilBitmaps.put(img, objrererencia1);

} 
```

每次创建图像时都使用它后，我不知道这是否是对位图使用弱引用的正确方法，

但仍然给我带来了问题

这是我的日志猫

```
 12-10 13:54:53.523: E/dalvikvm-heap(1211): Out of memory on a 2304016-byte allocation.
12-10 13:54:53.528: E/AndroidRuntime(1211): FATAL EXCEPTION: main
12-10 13:54:53.528: E/AndroidRuntime(1211): java.lang.OutOfMemoryError
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.nativeCreate(Native Method)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at dep.Agenda.CustomAdapterDetalleEventos.getView(CustomAdapterDetalleEventos.java:558)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView.obtainView(AbsListView.java:2201)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.makeAndAddView(ListView.java:1774)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.fillUp(ListView.java:705)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.fillGap(ListView.java:645)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5263)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView$TwFlingRunnable.run(AbsListView.java:4156)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Handler.handleCallback(Handler.java:605)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Looper.loop(Looper.java:137)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.app.ActivityThread.main(ActivityThread.java:4507)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的适配器

```
 public View getView(final int position,  View convertView, ViewGroup parent){
        View vistaFila =null;

     final  ElementosLinea objelementos;//=null;

        //final ElementosLinea obj;
        //final View auxVistaFila=null;

     LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
             //  LayoutInflater inflator = context.getLayoutInflater();

            //LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vistaFila = vi.inflate(R.layout.ll_lineas_lista_detalle_evento_nueva, null);

            //AsignarElementos(vistaFila);

           objelementos = new ElementosLinea();
          AsignarElementos(vistaFila,objelementos);

         vistaFila.setTag(objelementos);
         objelementos.posicion= position;

        }else{
            //vistaFila = vi.inflate(R.layout.ll_lineas_lista_detalles_evento, null);
          vistaFila=convertView;
          objelementos=(ElementosLinea)convertView.getTag();
          objelementos.posicion= position;
       }

        DetalleEvento datossss = arrayDatos.get(position);

        if (datossss.getGusta()==0){

            objelementos.btnMegusta.setBackgroundResource(R.drawable.megustagris);
            objelementos.txtMegusta.setText("Me gusta");
        }else{
            objelementos.btnMegusta.setBackgroundResource(R.drawable.megustaazul);
            objelementos.txtMegusta.setText("No me gusta"); 
            }

      //llenamos la barra de progreso
    if (datossss.getTipo()==1){//SI ES UN VIDEO

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.txtPost.setVisibility(View.INVISIBLE);

        if (datossss.getImagen()!=null){
            Bitmap imagen = datossss.getImagen();
            objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps);
             int width = imagen.getWidth();
                int height = imagen.getHeight();
                int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
                int newHeight = newWidth-80;

                float scalarw=((float) newWidth) /width;
                float scalarh=((float) newHeight) /height;

            Matrix ma = new Matrix();
             ma.postScale(scalarw, scalarh);

             Bitmap res = Bitmap.createBitmap(imagen, 0, 0,
                  width, height, ma, true);
        objreCReferencias.RegristrarReferenciaDebilBitmap(res, objReferenciaDebilBitmaps); 
        objelementos.imgfotoVideo.setImageBitmap(res);
        //imagen.recycle();
        //res.recycle();
        objelementos.btnComentarios.setEnabled(true);
        objelementos.pgrprogreso.setVisibility(View.INVISIBLE);

        }else{

              int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
              int newHeight = newWidth-80;

              objelementos.imgfotoVideo.setImageBitmap(null);
              objelementos.imgfotoVideo.setMinimumHeight(newHeight);
              objelementos.imgfotoVideo.setMinimumWidth(newWidth);
              objelementos.pgrprogreso.setVisibility(View.VISIBLE);
        objelementos.btnComentarios.setEnabled(false);
        }
        objelementos.imgfotoVideo.setVisibility(View.VISIBLE);
        objelementos.btnVerVideo.setVisibility(View.VISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());
        objelementos.btnVerfoto.setVisibility(View.INVISIBLE);

    }else{  if (datossss.getTipo()==2){ //SI ES UN POST

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.txtPost.setText(datossss.getTexto());
        objelementos.txtPost.setVisibility(View.VISIBLE);
        objelementos.imgfotoVideo.setVisibility(View.INVISIBLE);
        objelementos.imgfotoVideo.setImageBitmap(null);
        objelementos.btnVerVideo.setVisibility(View.INVISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());
        objelementos.btnVerfoto.setVisibility(View.INVISIBLE);
        objelementos.btnComentarios.setEnabled(true);

        objelementos.imgfotoVideo.setMinimumHeight(0);
          objelementos.imgfotoVideo.setMinimumWidth(0);

          objelementos.pgrprogreso.setVisibility(View.INVISIBLE);
        //rtlCuerpo.set

    }else{//SI ES UNA FOTO

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.imgfotoVideo.setVisibility(View.VISIBLE);
        objelementos.btnVerfoto.setVisibility(View.VISIBLE);

        if (datossss.getImagen()!=null){
        Bitmap imagen = datossss.getImagen();
         objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps); 
         int width = imagen.getWidth();
            int height = imagen.getHeight();
            int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
            int newHeight = newWidth-80;

            float scalarw=((float) newWidth) /width;
            float scalarh=((float) newHeight) /height;

        Matrix ma = new Matrix();
         ma.postScale(scalarw, scalarh);

         Bitmap res = Bitmap.createBitmap(imagen, 0, 0,
              width, height, ma, true);

         objreCReferencias.RegristrarReferenciaDebilBitmap(res, objReferenciaDebilBitmaps);     
        objelementos.imgfotoVideo.setImageBitmap(res);
        //imagen.recycle();
        //res.recycle();
        objelementos.btnComentarios.setEnabled(true);
        objelementos.pgrprogreso.setVisibility(View.INVISIBLE);
        }else{
              int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
              int newHeight = newWidth-80;

              objelementos.imgfotoVideo.setImageBitmap(null);
              objelementos.imgfotoVideo.setMinimumHeight(newHeight);
              objelementos.imgfotoVideo.setMinimumWidth(newWidth);

            objelementos.btnComentarios.setEnabled(false);
            objelementos.pgrprogreso.setVisibility(View.VISIBLE);
        }
        objelementos.txtPost.setVisibility(View.INVISIBLE);
        objelementos.btnVerVideo.setVisibility(View.INVISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());

    }

    }

    if (datossss.getImagenAvatar()!=null){
         objelementos.imgAvatar.setImageBitmap(datossss.getImagenAvatar());
    }else{
         objelementos.imgAvatar.setImageResource(R.drawable.avatarpredeterminado);
    }

     objelementos.txtTitulo.setText(datossss.getTituloPost());

    return vistaFila;

      } 
```

objelementos 等效视图

**那是我做错了吗？我可能会说，对所有图像使用弱引用并在我不需要时被删除的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:17:08.543

错误就 `java.lang.OutOfMemoryError`在这里。因此，如果您使用的 API 级别大于 10，那么您可以`android:largeHeap="true"`在应用程序级别的应用程序清单中使用此行。

# xaml - 带有按钮样式 XAML 的 RadioButton

> ID：13817638
> 
> 赞同：4
> 
> 时间：2012-12-11T09:53:40.103
> 
> 标签：xaml, styles, radio-button

如何将单选按钮样式更改为 XAML 中的按钮样式？如果选中单选按钮，如何设置背景颜色？我想使用默认颜色（因为我使用不同的皮肤）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:54:47.863

您需要为 RadioButton 定义 controltemplate 并在 controltemplate 中应用触发器。就像是。

```
<Style x:Key="ButtonRadioButtonStyle" TargetType="{x:Type RadioButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type RadioButton}">
                    <Button Content="{TemplateBinding Content}"/>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasContent" Value="true">
                            <Setter Property="FocusVisualStyle" Value="{StaticResource CheckRadioFocusVisual}"/>
                            <Setter Property="Padding" Value="4,0,0,0"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsChecked" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

并像使用它一样。

```
<RadioButton Style="{DynamicResource ButtonRadioButtonStyle}">
            <Image Source="ImagePath\ABC.png"/>
        </RadioButton> 
```

希望能帮助到你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T15:15:46.423

我经常使用这个选项

```
<RadioButton Height="23" Width="23" ToolTip="По левому краю" GroupName="TextAlignmentGroup"
                                                IsChecked="{Binding IsChecked}">
    <RadioButton.Template>
        <ControlTemplate TargetType="RadioButton">
            <Image Name="ImageName" Stretch="Fill"/>
            <ControlTemplate.Triggers>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                    <Setter TargetName="ImageName" Property="Image.Source">
                        <Setter.Value>
                            <BitmapImage UriSource="../../Resources/pressed.png"></BitmapImage>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="False">
                    <Setter TargetName="ImageName" Property="Image.Source">
                        <Setter.Value>
                            <BitmapImage UriSource="../../Resources/image.png"></BitmapImage>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </RadioButton.Template>
</RadioButton> 
```

# facebook-likebox - 像框一样出现空白屏幕或仅像按钮部分？

> ID：13817644
> 
> 赞同：1
> 
> 时间：2012-12-11T09:53:47.870
> 
> 标签：facebook-likebox

我想为他将 Like Box 放在朋友的网站上，但是当我使用 iframe 代码然后预览它时，它只出现了 Like Box 的 Like Button 部分。当我使用 html5 代码然后在浏览器中预览时，我得到的只是一个空白屏幕。我尝试在这里解决以前的问题并找到了一些提示（将 & 修改为 & 等），但我仍然无法让它工作。此外，我看到的大部分帮助都是针对 Wordpress 的，我没有使用它。Like Box 需要 MySQL 还是*_*？感谢您的任何帮助，您可以提供！

**iframe 代码的测试页：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>try</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>

<body>
<iframe src="http://www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FJaytamangPhotography&;width=520&;height=558&;show_faces=true&;colorscheme=dark&;stream=true&;border_color=black&;header=false" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:520px; height:558px;" allowTransparency="true"></iframe>
</body>
</html> 
```

**HTML5 测试页：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>try</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>

<body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-like-box" data-href="http://www.facebook.com/JaytamangPhotography" data-width="520" data-height="460" data-show-faces="true" data-colorscheme="dark" data-stream="true" data-border-color="black" data-header="false"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:01:12.517

你的 iframe src URL 是无稽之谈，因为你把`&;`它放在它应该只是的每个地方`&`（分别`&amp;`用 HTML 编写时）。

而 HTML5 版本什么都不做，因为你没有正确初始化 JS SDK。（需要一个应用程序 ID。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:21:03.957

在您同时登录和退出 Facebook 时测试它是否有效。如果它在您登录时有效，但在注销时显示为空白，则 Facebook 页面可能存在人口统计限制。（例如：“仅向美国用户显示此页面”或“仅向 18 岁以上的用户显示页面”）当用户退出时，Facebook 没有任何关于他们的人口统计信息，因此默认情况下他们不会显示有关页面的任何内容。

# jquery - jQuery可以访问非ajax请求的响应头吗

> ID：13817646
> 
> 赞同：2
> 
> 时间：2012-12-11T09:53:52.713
> 
> 标签：jquery, response-headers

jQuery 是否可以访问常规非 ajax 请求的`getResponseHeader`or方法？`getAllResponseHeaders`

我调查了`onReady`和`onLoad`事件，但没有运气。

我有一些包含一些调试信息的自定义标头，除了非 AJAX 调用外，它们工作得很好。

# python - wxPython 按钮事件在 Windows 和 Linux 中显示不一致的结果

> ID：13817650
> 
> 赞同：3
> 
> 时间：2012-12-11T09:54:20.877
> 
> 标签：python, wxpython

我是一个在 wxPython/Python 中开发应用程序的新程序员。我从按钮事件中得到不一致的结果，如下所示。

```
def OnButton1Button(self, event):

    self.textCtrl9.AppendText(" 1st instance\n")
    time.sleep(5)
    self.textCtrl9.AppendText(" 2nd instance\n") 
```

它应该打印`1st instance`，然后在 5 秒延迟后再次打印`2nd instance`。这在 Windows 操作系统中运行良好，但在 Linux 中，在按下按钮 5 秒延迟后，我一次（同时）得到`1st instance`两者`2nd instance`。

我真的很困惑。谁能给我一些解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:41:52.210

这应该使用**`wx.Timer`**.

假设您的主要目标是在 5 秒后更新 GUI，将第二个`AppendText`放入函数中并将其设置为使用 wx.Timer 调用。这样，您的 GUI 在 5 秒延迟期间仍会响应。

将调用放在`time.sleep()`GUI 中的事件处理程序中，因此放在主线程中，会让您头疼不已。

另一方面，如果您真的希望您的 GUI 在 5 秒内没有响应，您应该明确地执行此操作，例如使用`Enable(False)`Window，然后再次`Enable(True)`在 5 秒结束时使用计时器调用。这样，将向用户指示 GUI 处于非活动状态。

# c# - ASP.NET MVC 4 RouteLink 不起作用

> ID：13817653
> 
> 赞同：3
> 
> 时间：2012-12-11T09:54:33.187
> 
> 标签：c#, asp.net-mvc, routing, asp.net-mvc-4

在我的 MVC 4 应用程序中，我使用了 Area，这是我的路线：

```
context.MapRoute(
                "Service_AcceptBid",
                "Service/{controller}/{action}/{id}/{accept}",
                new { area = "Service", controller = "Project", action = "AcceptBid", id = UrlParameter.Optional, accept = UrlParameter.Optional }
            );

context.MapRoute(
                "Service_BidNegotiation",
                "Service/{controller}/{action}/{id}/{bid}",
                new { area = "Service", controller = "Project", action = "Negotiations", id = UrlParameter.Optional, bid = UrlParameter.Optional }
            ); 
```

我将这些链接放在我的 .cshtml 页面上：

```
<div dir="ltr">
       @Html.RouteLink("Accept", "Service_AcceptBid", new { controller = "Project", action = "AcceptBid", Id = item.ProjectId, Accept = item.Id })
       @Html.RouteLink("Negotiate", "Service_BidNegotiation", new { controller = "Project", action = "Negotiations", Id = item.ProjectId, Bid = item.Id })
</div> 
```

当第一个链接被点击时，`AcceptBid`控制器被调用并且它的参数（Id，Accept）被设置为url值。但是当我点击第二个链接时，控制器方法中的 Id 参数已设置，但第二个参数（Bid）为空。

为什么会这样？
我能做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:59:55.043

`{action}`模式是模棱两可的。

要解决此问题，请对特定路线进行硬编码。

例子：

```
"Service/{controller}/AcceptBid/{id}/{accept}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:50:39.070

## 解释问题

输出路由（链接生成）很好。问题在于传入路由。当您单击应该由第一个路由处理的第二个链接时，它实际上由第一个路由处理，因为它与它的定义相匹配。

## 可能的解决方案（没有硬编码操作）

您所要做的就是为第一个路由提供额外的约束，以防止它处理应该由第二个路由处理的请求。

检查我在`action`参数上添加路由约束以提供可能值的以下代码更改：

```
context.MapRoute(
    "Service_AcceptBid",
    "Service/{controller}/{action}/{id}/{accept}",
    new { area = "Service", controller = "Project", action = "AcceptBid", id = UrlParameter.Optional, accept = UrlParameter.Optional },
    new { action = "AcceptBid|RejectBid|..." }
);

context.MapRoute(
    "Service_BidNegotiation",
    "Service/{controller}/{action}/{id}/{bid}",
    new { area = "Service", controller = "Project", action = "Negotiations", id = UrlParameter.Optional, bid = UrlParameter.Optional }
); 
```

与为每个单独的操作创建静态路由定义相比，这将使您的路由更具动态性。

# c++ - 如何合并每个检测到的对象的重叠检测？

> ID：13817656
> 
> 赞同：2
> 
> 时间：2012-12-11T09:54:40.917
> 
> 标签：c++, image-processing, opencv, object-detection

我开发了一个使用 HOG 描述符测试对象检测的软件。

*   我使用窗口扫描方法来检测目标对象类的实例。
*   使用不同尺寸的扫描窗口对图像进行多次检查，以检测不同尺寸的物体（多尺度检测）。这样，每个对象可以被检测到多次。

每个对象的重叠检测（不同位置和大小的多个边界框）的存在需要一个程序将它们组合成一个包含与同一对象相关的所有检测的单个边界框。如何合并每个对象的多个检测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:33:11.367

这可以使用[OpenCV groupRectangles 函数](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#grouprectangles)来完成，该函数根据相似性参数对具有相似大小和位置的矩形进行聚类。虽然，我相信这个函数可能已经根据参数在[HOG detectMultiScale 函数](http://docs.opencv.org/modules/gpu/doc/object_detection.html#gpu-hogdescriptor-detectmultiscale)`group_threshold`中使用：

```
void gpu::HOGDescriptor::detectMultiScale(
    const GpuMat& img,
    vector<Rect>& found_locations,
    double hit_threshold=0,
    Size win_stride=Size(),
    Size padding=Size(),
    double scale0=1.05,
    int group_threshold=2
) 
```

当然，您必须尝试调整相似性标准以满足您的需求。

# vb.net - OAUTH VB.NET 雅虎邮箱验证器

> ID：13817658
> 
> 赞同：1
> 
> 时间：2012-12-11T09:54:46.357
> 
> 标签：vb.net, email, oauth, yahoo, yql

我们有一个使用 vb.net 的 oauth 雅虎电子邮件验证器的小项目，我们对 oauth 实现非常陌生，想问一下我们的代码是否正确，我们没有得到服务器的响应，希望我们能得到一些很好的答案在这里提前谢谢

下面是附上的代码

```
Option Explicit On
Option Strict On

Public Class frmValidator

    Public Const YahooAppID As String = "yPh6rr56" 'pfswebdev@yahoo.com/pfsweb123 
    Public Const YahooConsumerKey As String = "dj0yJmk9Qkw3VWFZcXA0V1ZNJmQ9WVdrOWVWQm9Obkp5TlRZbWNHbzlNakEzTWpNek5qVTJNZy0tJnM9Y29uc3VtZXJzZWNyZXQmeD0wNA--"
    Public Const YahooConsumerSecret As String = "80e148890ec0a31da518013998fbbfd49b996296"
    Public Const YQLAddress As String = "http://query.yahooapis.com/v1/public/yql"

    Public Shared Function VerifyYahooAccount(ByVal emailAddress As String) As String
        Dim yahooID As String = emailAddress.Substring(0, emailAddress.IndexOf("@"))
        Dim restURL As String = "http://query.yahooapis.com/v1/yql?q=%20select%20*%20from%20social.profile%20where%20guid%20in%20(select%20guid%20from%20yahoo.identity%20where%20yid%20%3D%20'" & yahooID & "')&diagnostics=false"
        Dim requestUrl As String = ""
        Dim normalizedUrl As String = ""
        Dim normalizedUrlParams As String = ""

        Dim provider As OAuth.OAuthBase = New OAuth.OAuthBase()
        Dim signature As String = provider.GenerateSignature(New Uri(restURL), YahooConsumerKey, YahooConsumerSecret, "", "", "GET", provider.GenerateTimeStamp(), provider.GenerateNonce(), normalizedUrl, normalizedUrlParams)
        requestUrl = normalizedUrl & "?" & normalizedUrlParams & "&" & Web.HttpUtility.UrlEncode("oauth_signature") & "=" & Web.HttpUtility.UrlEncode(signature)

        Dim context As New Consumer.OAuthConsumerContext()
        With context
            .ConsumerKey = YahooConsumerKey
            .ConsumerSecret = YahooConsumerSecret
            .SignatureMethod = DevDefined.OAuth.Framework.SignatureMethod.HmacSha1
            .UseHeaderForOAuthParameters = True
        End With

        Dim session As New Consumer.OAuthSession(context, "https://api.login.yahoo.com/oauth/v2/get_request_token", "https://api.login.yahoo.com/oauth/v2/request_auth", "https://api.login.yahoo.com/oauth/v2/get_token")

        Dim response As HttpWebResponse = session.Request.Get().ToWebResponse()

        Dim xdoc As System.Xml.Linq.XDocument = New Consumer.ConsumerRequest(Nothing, Nothing, Nothing).GetRequestDescription

        Dim responseData As String = ""
        Try
            Dim hwrequest As Net.HttpWebRequest = CType(Net.WebRequest.Create(requestUrl), Net.HttpWebRequest)
            hwrequest.Accept = "text/xml"
            hwrequest.AllowAutoRedirect = True
            hwrequest.Timeout = 60000
            hwrequest.Method = "GET"

            Dim hwresponse As Net.HttpWebResponse = CType(hwrequest.GetResponse(), Net.HttpWebResponse)
            If hwresponse.StatusCode = Net.HttpStatusCode.OK Then
                Dim responseStream As IO.StreamReader = _
                  New IO.StreamReader(hwresponse.GetResponseStream())
                responseData = responseStream.ReadToEnd()
            End If
            hwresponse.Close()
        Catch e As Exception
            responseData = "An error occurred: " & e.Message
        End Try

    End Function

    Private Sub btnValidate_Click(sender As System.Object, e As System.EventArgs) Handles btnValidate.Click
        VerifyYahooAccount(txtValidate.Text.ToString)
    End Sub
End Class 
```

# python - C 编译器从各种 unix 风格的源代码构建 python

> ID：13817662
> 
> 赞同：2
> 
> 时间：2012-12-11T09:55:04.830
> 
> 标签：python, linux, unix, gcc, cross-compiling

我正在考虑从各种 UNIX 等操作系统的源代码构建 python（2.7 版本），包括 SUSE（桌面、服务器）、RHEL（桌面、服务器）、Ubuntu、AIX、Solaris（SPARC）操作系统。

此外，其中一些操作系统可能必须同时构建 32 位和 64 位版本。我还想尽量减少对（共享）库的依赖。

也就是说，与 gcc 相比，使用本地 C 编译器 (cc) 是否更好？交叉编译更好吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:01:01.267

我认为最好在操作系统本身上构建，而不是“交叉编译”。尽管由于这都是 Unix，交叉编译也可以很好地工作，但需要付出一些努力。但是在有问题的操作系统上构建二进制文件可能更容易。我想这也取决于您是否静态链接。

Python 的构建过程本身会选择最好的编译器，并且至少在大多数情况下，它会更喜欢 gcc 而不是 cc。

# c# - 将 xml 字符串保存在 xml 或 nvarchar 数据库中

> ID：13817663
> 
> 赞同：0
> 
> 时间：2012-12-11T09:55:08.647
> 
> 标签：c#, sql-server, xml, sql-server-2012

我需要在 SQL Server 2012 中保存一个长 XML 字符串。

目前我在`EDMX`数据库中保存一个字符串变量和一个字符串列。
问题是我的 XML 字符串可能很长（> 5000 个字符）

处理此变量的最佳做法是什么（在 C# 和 SQL Server 中）？

使用 XML 列有什么好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:12:08.000

我不确定使用 XML 列的确切好处，但就个人而言，我认为使用它是有意义的。或者，您可以使用其他数据类型来存储超过 5000 个字符长的 XML 文件。

您可能还想查看 text/ntext 之类的内容。

看看这里的 T-SQL 数据类型：http: [//msdn.microsoft.com/en-us/library/ms187752.aspx](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

就 C# 的最佳使用而言，本质上，任何 XML 都只是一个字符串，但例如，您可以将 XML 从数据库直接加载到 XmlReader 或 XmlDocument 中，而不是先将其放入字符串中，然后再继续根据需要解析它（只是思考的食物！）

*注意：根据个人经验，我构建了自己的实体框架（与 NHibernate 或 Microsoft 的实体框架无关）。这允许 XML 作为任何数据库结构中的数据类型，例如，在 T-SQL 中，它将存储映射为 XML 到 XML 数据类型的对象，但是在未实现 XML 类型的 RDBMS 系统中，实体框架优雅地降级到下一个最接近的合适替代方案。*

# ios - 在多个目标之间共享相同的资产

> ID：13817664
> 
> 赞同：1
> 
> 时间：2012-12-11T09:55:09.323
> 
> 标签：ios, xcode, nsbundle, run-script

我正在就如何在我的项目中的 4 个目标之间共享资产寻求建议：A.app、B.app、C.app、D.app

* * *

## 方法 1 - 最佳情况。我试过这个没有成功

1.  创建一个 Assets.bundle 目标。
2.  在“运行脚本”阶段，将 Assets.bundle 中的文件复制到 *.app 目标中，如下所示：

    cd "${BUILT_PRODUCTS_DIR}" ls Assets.bundle | sed '/Info.plist/d' | xargs -t -I {} cp -r Assets.bundle/{} "${CONTENTS_FOLDER_PATH}/"

但是，当我运行该应用程序时，用户界面看起来不对。.xib 被加载，但没有图像被加载！图像文件和 nib 文件似乎已正确复制到 .app 文件夹中。我的假设是编译的 .nib 文件假定它位于 Assets.bundle 文件夹内，从而解释了为什么它位于 Assets.bundle 文件夹外时不起作用。

**我在这种方法中遗漏了什么吗？**

* * *

## 方法 2 - 未经测试

创建一个由 {A,B,C,D}.app 目标#imported 的 Assets.xcconfig 文件。

* * *

## 方法 3 - 未经测试

将 A.app 目标中的“复制捆绑资源”镜像到 {B,C,D}.app 目标

使用 ruby​​ 脚本，我可以更新“project.pbxproj”文件。

* * *

## 方法 4 - 我目前的方法

在 {A,B,C,D}.app 目标上手动维护“复制捆绑资源”。

编辑：我想放弃这种“目标会员”方法，因为它是一个大项目，并且有很多人在做出贡献。

* * *

## 方法 5 - 最坏情况

1.  创建一个 Assets.bundle 目标。
2.  将 Assets.bundle 文件夹复制到 *.app 目标中。
3.  更改所有 [NSBundle mainBundle] 代码，因此它使用 Assets.bundle 代替。

在这个项目中，我有 >1000 个图像文件和 >150 个 .xib 文件。有很多遗留代码使用硬编码路径查找。返工需要时间。我在小项目上做了这个改变。这是一个非常优雅的解决方案。然而，这种规模的返工将花费大量时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:11:04.797

为什么不直接使用 XCode 的集成处理？选择资产，在右侧实用程序面板的“目标成员资格”部分中选择应包含的目标。我用它在免费和付费版本之间切换 xib、图形等，至少对此非常有用。

忘了提一下：如果您包含同名文件的变体，为了更容易将它们放在文件夹或捆绑包中，以便将它们分开。然后使用包/文件夹名称向目标添加定义，以便您可以从任何路径自动加载它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-15T17:20:51.060

我知道这是一个老问题，但我遇到了同样的问题，所以我发现了一种使用`xcodeproj`图书馆的方法。如果您愿意，可以在以下位置查看：[https ://github.com/dalu93/DLSharedBundleResources/](https://github.com/dalu93/DLSharedBundleResources/)

它将两个目标作为参数（一个作为“完成”目标，另一个作为“完成目标”）并添加丢失的文件。如果您打开`.rb`文件，您还会发现一个`blacklist`var，您可以在其中插入要从“合并”中排除的文件名数组。

希望对你有帮助

# windows-phone-7 - wp7中发生KeyNotFoundException

> ID：13817665
> 
> 赞同：2
> 
> 时间：2012-12-11T09:55:14.693
> 
> 标签：windows-phone-7

![在此处输入图像描述](../Images/23a52fa68578b602a47a3810cde6f6a7.png) 我创建了用于检查用户名、密码的 WCF Web 服务，并使用 MYSQL 数据库检查用户名和密码是否存在。我在 WP7 中创建了带有用户名、密码和登录按钮的两个文本框的应用程序。当我运行应用程序时，会发生“KeyNotFoundException”。请告诉我原因。

`my code is here`

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using consumeWCFwp7DB.ServiceReference1;
namespace consumeWCFwp7DB
{
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void btnadd(object sender, RoutedEventArgs e)
    {
        ServiceReference1.ServiceClient obj = new ServiceReference1.ServiceClient();
        string username = txtusername.Text.ToString();
        string password = txtpassword.Text.ToString();
        obj.loginAsync(username, password);
   obj.loginCompleted+=new EventHandler<loginCompletedEventArgs>  (obj_loginCompleted);
    }
    void obj_loginCompleted(object sender, loginCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            MessageBox.Show(e.ToString());
        }
        else
        {
            MessageBox.Show("Error");
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:19:03.333

Reference.cs 中存在异常，这意味着是 WCF Web 服务而不是电话应用程序引发了错误。我建议您在运行时调试您的服务，找出引发错误的位置，并相应地修复/捕获它。

**编辑：** 刚刚注意到您对它在 ASP.NET 应用程序中运行良好的评论。这可能意味着没有正确接收到密钥。这也意味着您没有处理错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T17:48:01.213

解决方案您在服务中修改文件 Web.config ：

```
<endpoint address="" 
          binding="basicHttpBinding" 
          contract="WcfServiceForWinMobile.IWin7MobileService"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T07:53:55.237

您应该仔细检查服务的绑定设置。我相信你只是`WSHttpBinding`为它配置。但是silverlight和windows phone 7不支持`WSHttpBinding`。唯一的绑定`Windows Phone 7`支持是`BasicHttpBinding`，因此您应该使用 配置您的服务`BasicHttpBinding`，然后客户端调用将起作用。

这`KeyNotFoundException`是由于默认绑定 ( `BasicHttpBinding`) 不存在于服务的绑定列表中（仅`WSHttpBinding`在您的服务中找到）。

# c# - 表达式树：避免 DynamicInvoke

> ID：13817666
> 
> 赞同：4
> 
> 时间：2012-12-11T09:55:16.133
> 
> 标签：c#, delegates, expression-trees

我在运行时使用表达式树来构建委托：

```
Type type = GetType();
ParameterExpression parameterType = Expression.Parameter(type);
...
Delegate delegate = Expression.Lambda(*something*, parameterType).Compile(); 
```

我在编译时不知道 GetType() 方法返回的类型。是否可以在不使用昂贵的 DynamicInvoke() 方法的情况下调用我的委托？

**编辑 ：**

在我的应用程序中，我有一个基本抽象类：

```
public abstract class Frame
{
    public string RawContent { get; set; }

    // ...
} 
```

在运行时，应用程序将使用一些继承 Frame 的对象；这些对象的类型在编译时是未知的，因为它们将使用 MEF（插件）加载。应用程序的目标是过滤带有错误数据的对象：例如，如果程序必须处理像这样的类的某些对象：

```
public class Frame01 : Frame
{
    public int Counter6hours { get; set; }

    public int DeltaCounter6hours { get; set; }
} 
```

我希望我的用户能够在应用程序的配置文件中编写如下内容：

```
<filtersSection>
    <filters>
            <filter class="Frame01" expression="Counter6hours < 0" />
            <filter class="Frame01" expression="DeltaCounter6hours > 2500" />
    </filters>
<filtersSection> 
```

我设法创建一个表达式树并将其编译为每个过滤器的委托。但是我不能将它转换为 Func 因为我在编译时不知道 Frame01 类型......所以，目前，我使用我的委托的 DynamicInvoke() 方法，它以后期绑定的方式调用底层方法。该应用程序将不得不处理大量对象，而且我担心性能问题......所以，在这个例子中，我试图以编程方式构建一个 Func 对象，但我不确定它是否可能。

PS：对不起，我的英语不好...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:00:03.150

我仍然不完全清楚这就是你想要的，但我认为你所需要的只是一个演员表：你的表达式将有一个 type 参数`Frame`，将其转换为`Frame01`然后运行你的过滤器。

在代码中：

```
var type = typeof(Frame01);

var param = Expression.Parameter(typeof(Frame));
var casted = Expression.Convert(param, type);

// this part will be dynamic in your actual code
var condition = Expression.LessThan(
    Expression.Property(casted, "Counter6hours"), Expression.Constant(0));

var result = Expression.Lambda<Func<Frame, bool>>(condition, param)
    .Compile(); 
```

这样，以下测试通过：

```
Assert.IsTrue(result(new Frame01 { Counter6hours = -1 }));
Assert.IsFalse(result(new Frame01 { Counter6hours = 1 }));
Assert.Throws<InvalidCastException>(() => result(new Frame02())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:47:46.520

从您的评论中，您希望得到一个`Func<object, bool>`

因此，您必须使用类型参数构建表达式树`object`

像这样的东西会起作用：

```
var p = Expression.Parameter(typeof(object));
var c = Expression.Constant(true);
var lambda = Expression.Lambda(c,p);
var fn = ( Func<object, bool> ) lambda.Compile(); 
```

然后：

```
bool b = fn( ...some object... ); 
```

# iis-7 - 如何在两个 IIS 7 服务器之间配置反向代理

> ID：13817667
> 
> 赞同：1
> 
> 时间：2012-12-11T09:55:22.310
> 
> 标签：iis-7

我有一个带有 IIS 7 的服务器 A，它可用于所有传入的请求。后端服务器位于 vpn 中，因此访问受到限制。现在我需要允许所有传入请求访问后端服务器的一个应用程序，而不仅仅是来自 vpn。有没有可能用这个基础设施解决这个问题？我可以配置我的服务器 A（它可以访问后端服务器），以便它充当我的后端服务器的代理吗？在我的后端服务器上，我使用 isapi.dll 重定向到我的 tomcat 服务器。

有人可以解释如何解决这个问题吗？

# php - MYSQL 混淆日期

> ID：13817669
> 
> 赞同：1
> 
> 时间：2012-12-11T09:55:41.510
> 
> 标签：php, mysql, date

我正在尝试在我的数据库中插入一个从 php 输入获得的日期。我用来插入值的代码如下所示

```
$length = strrpos($fristdatum, " ");
$newDate = explode(".", substr($fristdatum, $length));
$fristdatum = $newDate[2] . "-" . $newDate[1] . "-" . $newDate[0]; 
```

假设我输入`14.12.2012`日期，但一旦我将它插入我的 MySQL 数据库，它就会变成`echo $fristdatum`任何想法？`2012-12-14``2014.12.20`

列类型是日期。插入有点像这样

```
mysql_query("INSERT INTO sch_anschreiben (date)values('$fristdatum')) 
```

还有更多的价值，但我想这并不重要

提前致谢！

好吧，感谢您的帮助，我发现我`$fristdatum`在数组中使用`str_replace`了

```
$patern = array("[Date]")
$words=array($fristdatum)
$content = str_replace($patern, $words, $content); 
```

之后将其插入数据库中，现在我对其进行了更改，以便在之后格式化，`str_replace`并且它似乎工作得很好。如果有人能解释我为什么也将不胜感激^^。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:09:59.997

`DateTime::createFromFormat`如果您有 PHP 5.3 或更高版本，请优先使用，而不是分解和硬编码转换。

```
$date = DateTime::createFromFormat('d. m. Y',$fristdatum);
echo $date->format('Y-m-d');//echoes 2012-12-14 
```

现在您更正了脚本以正确方式注册日期，您应该确保您的数据库是好的。我认为您可以使用此请求：

```
UPDATE yourtable SET yourdate=CONCAT(MONTH(yourdate),'-',DAY(yourdate),'-',YEAR(yourdate)) WHERE MONTH(yourdate) > 12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:00:44.197

DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

DATETIME 类型用于同时包含日期和时间部分的值。MySQL 以 'YYYY-MM-DD HH:MM:SS' 格式检索和显示 DATETIME 值。支持的范围是“1000-01-01 00:00:00”到“9999-12-31 23:59:59”。

TIMESTAMP 数据类型用于同时包含日期和时间部分的值。TIMESTAMP 的范围为 '1970-01-01 00:00:01' UTC 到 '2038-01-19 03:14:07' UTC。

因此，如果您想像这样存储它，请将`14-12-2012`其数据类型用作`varchar`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:08:06.647

将其转换为 YMD 格式。您应该直接将 2012-12-14 放入数据库中。

# firefox-addon - 网页Javascript和扩展（使用js-ctypes）通信

> ID：13817670
> 
> 赞同：1
> 
> 时间：2012-12-11T09:55:42.857
> 
> 标签：firefox-addon, jsctypes

我编写了一个使用 js-ctypes 的扩展。我在 js-ctypes 与 C 库函数绑定的扩展中有一个函数。现在，我想通过扩展（js-ctypes）将从网页加载的一些数据传递给这个 C 库。我该怎么做 ？

我遇到了 - [https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pa​​ges](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages)。我了解传递消息（即字符串）的部分，但现在我如何使用它将数据从网页传递到我的扩展的 js-ctypes 绑定函数？

正是我在我的网页 js 脚本中分配了一个数组。填充一些数据。现在我需要将此数组/数据发送到 C 库函数，即使用此数据调用 C lib 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:46:33.250

与您的扩展通信，以 JSON 格式发送数据（有时数组序列化错误）。

例如，您可以发送事件：

```
var obj = JSON.stringify({arg1: 3, arg2: "some text"});
var event = new CustomEvent("YourAddonEvent", { detail: obj });
top.dispatchEvent(event); 
```

在扩展解析 JSON 中，您将获得带有参数的对象。

```
var args = JSON.parse(event.detail); 
```

加载库并声明函数后，例如：

```
var func = lib.declare("YourFuncName", ctypes.default_abi, ctypes.int, ctypes.int, ctypes.char.ptr, ); 
```

你可以调用你的函数：

```
var result = func(args.arg1, args.arg2); 
```

# c - 为什么我不能 fscanf() 两个不同的文件并在一段时间内同时获取输入？

> ID：13817674
> 
> 赞同：2
> 
> 时间：2012-12-11T09:55:58.017
> 
> 标签：c, file, text, scanf

发生的情况是它首先从 fp1 获取所有输入，然后从 fp2 获取输入。为什么会这样？您不能在 while 语句中同时从 2 个不同的文件指针获取输入吗？

```
/*checks if 2 text files are identical */
#include <stdio.h>
int main(void)
{
    FILE *fp1,*fp2;
    char buf1,buf2;
    int flag = 1;
    fp1 = fopen("textfile1.txt","r");
    fp2 = fopen("textfile2.txt","r");
    /* putting them inside a while statement causes a logical error? why */
    while(fscanf(fp1,"%c",&buf1) == 1 ||fscanf(fp2,"%c",&buf2) == 1)
    {
        printf("buf1: %c, buf2: %c\n",buf1,buf2);
        if(buf1 != buf2)
        {
            flag = 0;
            //break;
        }
    }
    if(flag == 1)
        printf("SAME");
    else
        printf("NOT SAME");
    fclose(fp1);
    fclose(fp2);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T09:59:51.423

您的 while 语句短路。使用 OR ( `||`) 运算符时，如果第一个表达式为真，则不会执行第二个表达式。

我不完全确定您要使用 OR ( `||`) 运算符实现什么，也许您实际上需要 AND ( `&&`)？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T09:59:44.573

您使用了`||`接线员，因此只有一个`fscanf`呼叫会成功。这也意味着只有一个`buf1`,`buf2`变量将具有有效值。

如果要从两个文件中读取，请改用`&&`运算符：

```
while (fscanf(fp1,"%c",&buf1) == 1 && fscanf(fp2,"%c",&buf2) == 1) 
```

请注意，即使一个文件比另一个文件长，您的代码也可能认为这两个文件相同。为了防止这种情况，您需要检查两个`fscanf`调用是否同时失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:00:07.510

正因为如此

```
(fscanf(fp1,"%c",&buf1) == 1 ||fscanf(fp2,"%c",&buf2) == 1) 
```

以上是或陈述。因此，如果第一个成功，则不会评估第二个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:00:55.163

执行此行时：

```
while(fscanf(fp1,"%c",&buf1) == 1 ||fscanf(fp2,"%c",&buf2) == 1) 
```

如果运算符的左侧子表达式`||`计算结果为真（第一个文件中的 fscanf 正常），则另一个子表达式 ( `fscanf(fp2,"%c",&buf2) == 1`) 将根本不执行，因此您只能从第一个文件中读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T10:13:07.717

当您使用逻辑 OR 运算符时：

```
 while(fscanf(fp1,"%c",&buf1) == 1 ||fscanf(fp2,"%c",&buf2) == 1) 
```

你的代码变成：

```
 while(fscanf(fp1,"%c",&buf1) ==1 ) 
```

请注意，您每次使用时都在读取单个字符`fscanf()`，因此如果成功，总是`fscanf()`会返回 1，因此永远不会进入第二个评估表达式。因此，在它完成读取文件`fp1`之前，它将跳过读取第二部分。一旦`fscanf()`for 开始失败`fp1`，这将导致第一个表达式计算为`false`，然后它将开始读取`buf2`直到`fp2`完成。

因此，您使用逻辑 AND 运算符：

```
 while( (fscanf(fp1,"%c",&buf1) == 1) && (fscanf(fp2,"%c",&buf2) == 1) ) 
```

这确保两者`buf1`和`buf2`都填充了正确的值，然后`while`才会处理循环。

注意：对于您的应用程序，您也可以考虑使用`fgetc()`代替`fscanf()`.

`EOF`还可以考虑在处理之前在 while 循环中添加检查`buf1`和`buf2`.

# sql - sql 多行来自列值

> ID：13817676
> 
> 赞同：0
> 
> 时间：2012-12-11T09:56:03.607
> 
> 标签：sql, sql-server-2008, tsql

我有一个表格，其中一列有逗号分隔值，我想要在行中..

喜欢

```
col1
3,4,5
5,6,6 
```

返回结果应该是

```
col1
3
4
5
5
6
6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:13:22.543

```
 declare @tbl table(data nvarchar(100))
    insert into @tbl values('1,2,3')
    insert into @tbl values('4,5,6')
    insert into @tbl values('7,8,9')

     SELECT   
     Split.a.value('.', 'VARCHAR(100)') AS String  
     FROM  (SELECT data,  
         CAST ('<M>' + REPLACE(data, ',', '</M><M>') + '</M>' AS XML) AS String  
     FROM  @tbl) AS A CROSS APPLY String.nodes ('/M') AS Split(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:18:35.030

You can use a recursive query to perform this split:

```
;with cte (item, list) as
(
  select 
    cast(left(col1, charindex(',',col1+',')-1) as varchar(50)) item,
         stuff(col1, 1, charindex(',',col1+','), '') list
  from yourtable
  union all
  select 
    cast(left(list, charindex(',',list+',')-1) as varchar(50)) item,
    stuff(list, 1, charindex(',',list+','), '') list
  from cte
  where list > ''
) 
select item
from cte 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e8c5f/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T09:58:38.517

我相信下面解释了如何遍历逗号分隔值。您可以将它们插入另一个变量以获得所需的输出。

[逗号分隔值的拆分](https://stackoverflow.com/questions/5487961/splitting-of-comma-separated-values)

# php - __get 和 __set 魔法方法无法访问

> ID：13817680
> 
> 赞同：-1
> 
> 时间：2012-12-11T09:56:12.477
> 
> 标签：php, class, magic-methods

我有一个类'base'和一个类'loader'，看起来像这样。

```
class base {

    protected $attributes = Array();   
    public $load = null;           

    function __construct() {

        $this->load = loader::getInstance();  
        echo $this->load->welcome(); //prints Welcome foo
        echo $this->load->name; //prints Foo
        echo $this->name; //doesnt print anything and i want it to print Foo

    }

    public function __get($key) {

        return array_key_exists($key, $this->attributes) ? $this->attributes[$key] : null;
    }

    public function __set($key, $value) {

        $this->attributes[$key] = $value;
    }
}

class loader {

    private static $m_pInstance;       

    private function __construct() {

        $this->name = "Foo";

    }

    public static function getInstance() {
        if (!self::$m_pInstance) {
            self::$m_pInstance = new loader();
        }

        return self::$m_pInstance;
    }

    function welcome() {
        return "welcome Foo";
    }

}

$b = new base(); 
```

现在我想要的是一种从加载器类存储变量并使用`$this->variablename`.

我怎样才能做到这一点？我不想使用`extends`. 任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T11:06:11.450

我觉得您还没有完全理解 OOP 方式编码的含义。通常单身人士是代码味道，所以我会警告你：

可能有更好的方法来实现你的目标。如果您提供更多信息，我们将为您提供帮助。以目前的形式，答案如下；请记住，我非常**不鼓励**在您的代码中实现它。

假设您只想访问类中的公共（和非静态）`loader`变量，您应该只`this->varname`在`base`基类构造函数的开头插入这一行：

```
$this->attributes = get_object_vars(loader::getInstance()); 
```

这基本上将使用所有加载器公共变量初始化属性数组，以便通过您的`__get()`方法访问它的值。

*在旁注中，请查看[依赖注入设计模式](http://en.wikipedia.org/wiki/Dependency_injection)以避免使用单例。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:48:58.387

您的 __get/__set 方法访问`$this->attributes`但不是`$this->load`.
例如，您可以执行类似（伪代码）的操作

```
function __get($key) {
  - if $attribute has an element $key->$value return $attribute[$key] else
  - if $load is an object having a property $key return $load->$key else
  - return null;
} 
```

另见：[http ://docs.php.net/property_exists](http://docs.php.net/property_exists)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:48:36.017

您可以制作静态变量，然后您可以从任何地方访问此变量

```
public statis $var = NULL; 
```

你可以像这样访问它

```
classname::$var; 
```

# bash - 如何优化.bashrc？

> ID：13817693
> 
> 赞同：0
> 
> 时间：2012-12-11T09:56:53.927
> 
> 标签：bash

我一直在定义一些函数`.bashrc`，现在启动时间不是很好。

我尝试了一个快速的解决方案 - 将函数定义移动到`.bash_profile`并导出它们，因此它们只在我登录时被读取一次。这是有道理的，因为这些功能永远不会改变。

这适用于 tty 登录，但不适用于图形环境。我的系统是 Ubuntu 12.10。我已经用谷歌搜索了图形会话，相当于`.bash_profile`is `.profile`。问题是它不等价：

```
export -f my_function 
```

将适用于`.bash_profile`，但不适用于`.profile`，因为`.profile`是由 `/bin/sh`而不是阅读`/bin/bash`。

所以解决我的问题的最后一步是：

1.  将函数导出移动到`~/.profile-that-is-read-by-bash`
2.  `/bin/bash`阅读_`~/.profile`

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:35:18.937

`tty`GUI 会话可能不是登录 shell，只有交互式登录 shell 读取 ~/.bash_profile 或 ~/.profile 。仅当 ~/.bash_profile 不存在时，Bash 才会读取 ~/.profile（默认情况下）。

导出函数可能是开销。您真的每次都需要所有这些功能吗？为什么不在需要时将它们放入其他文件中`source`？

# xsd - 对同一个 xsd 元素/组的多次引用

> ID：13817694
> 
> 赞同：0
> 
> 时间：2012-12-11T09:57:03.913
> 
> 标签：xsd

我必须描述在所有包含“坐标”的多个区域类型之间的选择。不幸的是，不允许有多个同名的 xsd 元素——它们是被定义多次还是只是被多次引用都没有关系。

```
<xs:group name="Region">
    <xs:choice>
        <xs:group ref="tns:CircularRegion" />
        <xs:group ref="tns:RectangularRegion" />
        <xs:group ref="tns:PolygonalRegion" />
    </xs:choice>
</xs:group> 
```

与参考组：

```
<xs:group name="Coordinates">
    <xs:sequence>
        <xs:element name="Latitude" type="xs:integer" />
        <xs:element name="Longitude" type="xs:integer" />
    </xs:sequence>
</xs:group>
<xs:group name="CircularRegion">
    <xs:sequence>
        <xs:group ref="tns:Coordinates" />
        <xs:element name="Radius" type="xs:integer" />
    </xs:sequence>
</xs:group>
<xs:group name="RectangularRegion">
    <xs:sequence>
        <xs:group ref="tns:Coordinates" />
        <xs:group ref="tns:Coordinates" />
    </xs:sequence>
</xs:group>
<xs:group name="PolygonalRegion">
    <xs:sequence>
        <xs:group minOccurs="3" maxOccurs="12" ref="tns:Coordinates" />
    </xs:sequence>
</xs:group> 
```

由于多次引用“纬度”和“经度”，验证过程以错误结束（多个定义......）。

知道如何解决这个问题吗？

*编辑*来自“Liquid XML Studio 2012”验证器的错误消息（德语）：

> Error Mehrere Definitionen des Elements 'Psid' verursachen ein mehrdeutiges Inhaltsmodell。Ein Inhaltsmodel muss so gebildet werden, dass während der Validierung einer Elementinformationssequenz das darin direkt, indirekt oder implizit enthaltene Partikel, mit dem versucht wird, jedes Element in der Sequenz zu validieren, wiederum eindeutig bestimmt werden kann, ohneesden 元素zu untersuchen und ohne dass beliebige Informationen zu den Elementen im Rest der Sequenz benötigt werden。

英文（[谷歌翻译](http://translate.google.com/#de/en/Error%20Mehrere%20Definitionen%20des%20Elements%20%27Psid%27%20verursachen%20ein%20mehrdeutiges%20Inhaltsmodell.%20Ein%20Inhaltsmodell%20muss%20so%20gebildet%20werden%2C%20dass%20w%C3%A4hrend%20der%20Validierung%20einer%20Elementinformationssequenz%20das%20darin%20direkt%2C%20indirekt%20oder%20implizit%20enthaltene%20Partikel%2C%20mit%20dem%20versucht%20wird%2C%20jedes%20Element%20in%20der%20Sequenz%20zu%20validieren%2C%20wiederum%20eindeutig%20bestimmt%20werden%20kann%2C%20ohne%20den%20Inhalt%20oder%20die%20Attribute%20dieses%20Elements%20zu%20untersuchen%20und%20ohne%20dass%20beliebige%20Informationen%20zu%20den%20Elementen%20im%20Rest%20der%20Sequenz%20ben%C3%B6tigt%20werden.)）

> 错误 Psid 元素的多个定义导致内容模型模棱两可。必须形成一个内容模型，以便在验证直接、间接或隐含粒子的元素信息序列期间，尝试依次验证序列中的每个元素的粒子可以唯一确定，而无需该项目的内容或属性调查并且没有关于序列其余部分的项目的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:22:12.373

问题不是对`Coordinates`组的多次引用 - 问题是违反了[唯一粒子属性规则](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#cos-nonambig)（在 XML 规范中被描述为[确定性](http://www.w3.org/TR/2000/REC-xml-20001006#determinism)；那里的描述更容易理解）。

这是因为您可以在 和 之间进行选择`CircularRegion`，`RectangularRegion`但两者都以相同的`<Latitude>`元素（from `Coordinates`）开头。如果您想尝试解析其中包含`<Latitude>`元素的 xml 文档，解析器无法仅通过查看该元素来判断它是来自一个`CircularRegion`组还是一个组。`RectangularRegion`（如果它在 xml 中看得更远，它可以，但 UPA 规则不允许这样做）。这是一种特殊的歧义：不止一个粒子（模式的一部分）可以归因于该元素，因此它不是*唯一的粒子属性*。

* * *

最明确的解决方案是使用 complexTypes 而不是组，`<CircularRegion>`将您的每个选择包装在一个唯一元素（例如`<RectangularRegion>`和）中。`<PolygonalRegion>`

但是，我得到的印象是您想要 XSD 描述的 XML（或者如果允许的话会描述）。一种简单的方法是排除公共前缀，例如

```
<xs:group name="Region">
  <xs:sequence>
    <xs:group ref="tns:Coordinates"/>                <!-- common prefix -->
    <xs:choice>
      <xs:element name="Radius" type="xs:integer" /> <!-- Circular      -->
      <xs:group minOccurs="1" maxOccurs="11" ref="tns:Coordinates" />
                                                     <!-- Rect and Poly -->
    </xs:choice>
  </xs:sequence>
</xs:group> 
```

* * *

顺便说一句：我测试了您的原始 XSD 和我的 xsd 解析器 (xmllint)，它运行良好，解析匹配每个选择的 xml。它没有标记 UPA 问题……这很奇怪。尽管有这些证据，但我肯定它确实违反了 UPA 规则，并且 xmllint 有过错。**有人可以确认或反驳吗？**

我还测试了我的解决方案，它也有效。

*编辑*删除了@SebastianMauthofer 在评论中指出的第二级歧义。

# python - 让用户从一个 cgi 脚本中输入关键字并将该信息保存在另一个 cgi 脚本的列表/txt 文件中

> ID：13817697
> 
> 赞同：1
> 
> 时间：2012-12-11T09:57:23.507
> 
> 标签：python, cgi

基本上我想要完成的是让用户能够在一个 cgi 脚本（我目前拥有）上输入某个单词，然后它将该条目保存在列表中并在另一个页面上显示该单词和整个列表. 我还将它保存到一个 .txt 文件中，但首先我想弄清楚如何显示整个列表。现在它只显示用户输入的关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:14:51.977

您的代码不可能在多个帖子中累积关键字列表。首先，CGI 脚本没有状态，所以每次都会从一个空白列表开始。即使这不是真的，你`keywords`每次都明确地重置到空白列表。

您需要将列表存储在运行之间的某处。文本文件可以使用，但前提是您可以保证任何时候只有一个用户可以访问它。

由于您是 CGI 脚本的新手，我不知道您为什么要尝试学习它们。这些天几乎没有充分的理由使用它们。确实，您应该放弃 CGI 脚本，使用 Web 框架（像 Flask 这样的微型框架适合您），并将列表存储在数据库中（同样，非结构化的“no-sql”存储可能对您有好处）。

# c# - 更改Excel中的左，右，下和上边框

> ID：13817702
> 
> 赞同：7
> 
> 时间：2012-12-11T09:57:38.983
> 
> 标签：c#, excel, border

首先，我将工作表的颜色边框更改为白色，因为我想要一张白色的工作表。

然后我做了一些标题并想在它周围做一个边框。问题是它在标题中的值之间设置了边界，但顶部、向下不可见。

**我的代码：**

```
xlWorkSheet5.Columns.Borders.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.White); // Color Sheet5 to white, BusLoad
xlWorkSheet5.Columns.NumberFormat = "@";

Excel.Range rng = (Excel.Range)xlWorkSheet5.get_Range("A7","J7");
rng.RowHeight = 25.5;

rng.BorderAround2(Excel.XlLineStyle.xlContinuous, Excel.XlBorderWeight.xlHairline, Excel.XlColorIndex.xlColorIndexAutomatic, Excel.XlColorIndex.xlColorIndexAutomatic);
rng.Borders.LineStyle = Excel.XlLineStyle.xlContinuous;
rng.Borders.Weight = 1d;

rng.Font.Bold = true;
rng.HorizontalAlignment = Microsoft.Office.Interop.Excel.XlHAlign.xlHAlignCenter;
rng.Interior.Color = System.Drawing.ColorTranslator.ToOle(System.Drawing.Color.LightGray); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T11:02:03.033

好的，我找到了解决方案，这是我的代码：

```
xlWorkSheet5.Cells[7,1].Borders[Excel.XlBordersIndex.xlEdgeLeft].Weight = 1d;
xlWorkSheet5.Cells[7, 1].Borders[Excel.XlBordersIndex.xlEdgeRight].Weight = 1d;
xlWorkSheet5.Cells[7,1].Borders[Excel.XlBordersIndex.xlEdgeTop].Weight = 1d;
xlWorkSheet5.Cells[7,1].Borders[Excel.XlBordersIndex.xlEdgeBottom].Weight = 1d; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T10:17:13.947

如果您想使用 Borders[index] 属性，请使用以下内容：

```
rng.Borders[XlBordersIndex.xlEdgeLeft].LineStyle = XlLineStyle.xlContinuous;
rng.Borders[XlBordersIndex.xlEdgeLeft].ColorIndex = <COLOR THAT YOU WANT>

rng.Borders[XlBordersIndex.xlEdgeTop]...
rng.Borders[XlBordersIndex.xlEdgeBottom]...
rng.Borders[XlBordersIndex.xlEdgeRight]... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-22T11:53:33.613

Border.Weight 属性

XlBorderWeight 可以是以下 XlBorderWeight 常量之一：xlHairline xlThin xlMedium xlThick。

在单元格上创建从 Bx 到 Mx 的连续线的示例，其中 x 是行数

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Range line = (Excel.Range)excelWorksheet.Rows[1]; 
line.Insert();

excelWorksheet.Range[$"B{1}:M{1}"].Cells.Borders[Excel.XlBordersIndex.xlEdgeBottom].LineStyle = Excel.XlLineStyle.xlContinuous;
excelWorksheet.Range[$"B{1}:M{1}"].Cells.Borders[Excel.XlBordersIndex.xlEdgeBottom].Weight = Excel.XlBorderWeight.xlThin; 
```

# performance - 无负载的高 CPU 使用率

> ID：13817710
> 
> 赞同：1
> 
> 时间：2012-12-11T09:58:23.747
> 
> 标签：performance, windows-services, cpu

我们正在运行一个 Windows 服务，它每 5 秒检查一个文件夹中的文件，如果找到，则使用 NLog 记录有关它的一些信息。

我已经尝试过来自[ASP.NET 的建议：High CPU usage under no load](https://stackoverflow.com/questions/1467976/asp-net-high-cpu-usage-under-no-load) without succes。

当服务刚刚启动时，几乎没有任何 CPU 使用率。几个小时后，我们看到 CPU 峰值达到 100%，再等待一段时间后，cpu 图如下所示：

![窗口任务管理器](../Images/b69944e7dbf9389fd96a83fa67a0ee5d.png)

我尝试了[http://blogs.technet.com/b/sooraj-sec/archive/2011/09/14/collecting-data-using-xperf-for-high-cpu-utilization-of-a-中描述的步骤process.aspx](http://blogs.technet.com/b/sooraj-sec/archive/2011/09/14/collecting-data-using-xperf-for-high-cpu-utilization-of-a-process.aspx)以生成有关正在发生的事情的信息：

![xperf 概述](../Images/5749336a30833e83df35fcfcde465119.png)

我不知道从哪里继续。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:15:56.470

谁编写了这个 Windows 服务？是你还是第三者？

对我来说，每 5 秒检查一次文件夹的更改听起来真的很可疑，这可能是您出现这种大幅减速的主要原因。

如果操作正确，您可以在目录更改发生时立即获取它们，而在执行此操作时几乎不会花费 CPU 时间。

这篇 Microsoft 文章解释了如何做到这一点：使用函数、和[获取目录更改通知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365261%28v=vs.85%29.aspx)。`FindFirstChangeNotification``FindNextChangeNotification``ReadDirectoryChangesW``WaitForMultipleObjects`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T14:55:48.517

经过大量挖掘后，它与此有关：

该服务有一个私有对象 X，其属性为 Y

每次触发服务时，X 都会传递给业务逻辑。有 Y 被使用并最终被丢弃。然后垃圾收集器将等到 X 被释放，这在服务重新启动之前永远不会发生。每次触发服务时，这都会导致额外的 GC 等待线程。

# twitter-bootstrap - Bootstrap 流体网格重叠问题

> ID：13817711
> 
> 赞同：3
> 
> 时间：2012-12-11T09:58:25.637
> 
> 标签：twitter-bootstrap, grid, overlap

我已经使用 Twitter Bootstrap 玩了一段时间的流体网格，但即使在最新版本中，我也发现在没有重叠元素的情况下创建流体网格是不可能的。包含正确的引导 css 文件并且所有标记都是正确的，所以我只能假设这与输入字段有关，但我原以为引导程序的创建者会考虑到这一点？

您可以在此处查看代码：http: [//jsfiddle.net/pNRzV/1/](http://jsfiddle.net/pNRzV/1/) 尝试重新调整内容窗口的大小，您将看到重叠的问题。

欢迎任何意见/评论，感谢您的时间！

```
<div class="container-fluid">
<div class="row-fluid">
  <div class="span2">
    <div class="well well-small">
      <ul class="nav nav-list" id="navigation">
        <li><a href="/link" >link</a></li>
        <li><a href="/link" >link</a></li>
        <li><a href="/link" >link</a></li>
        <li><a href="/link" >link</a></li>
        <li><a href="/link" >link</a></li>
        <li><a href="/link" >link</a></li>
      </ul>
    </div>
  </div>
  <div class="span10">
    <div class="row-fluid">
      <div class="span3">
        <form method="POST">
          <fieldset>
            <legend>Some Random details</legend>
            <select>
              <option value="volvo">Volvo</option>
              <option value="saab">Saab</option>
              <option value="mercedes">Mercedes</option>
              <option value="audi">Audi</option>
            </select>
            <select>
              <option value="volvo">Volvo</option>
              <option value="saab">Saab</option>
              <option value="mercedes">Mercedes</option>
              <option value="audi">Audi</option>
            </select>
            <select>
              <option value="volvo">Volvo</option>
              <option value="saab">Saab</option>
              <option value="mercedes">Mercedes</option>
              <option value="audi">Audi</option>
            </select>
            <input type="submit" class="btn btn-primary" name="submit" value="Submit">
          </fieldset>
        </form>
      </div>

      <div class="span3">
        <fieldset>
          <legend>Some random long legend</legend>
          <ul>
            <li><a href="/">
              <i class="icon-film"></i>berkeley napier 3</a>
              <a href="/"><i class ="icon-trash"></i></a>
            </li>
          </ul>
          <div class="btn-group">
            <a class="btn btn-small btn-inverse" href="/">Preview Something</a>
            <a class="btn btn-small btn-inverse" href="/">Preview Something else</a>
          </div>
        </fieldset>
      </div>

      <div class="span3">
        <fieldset>
          <legend>Options</legend>
            <div class="btn-group-vertical">
              <a class="btn btn-info" href="/">Some LongButton Text</a>
              <a class="btn btn-info" href="/">Longer Long Button Text</a>
              <a class="btn btn-info disabled" data-href="/">Button Text</a>
              <a class="btn btn-info disabled" data-href="/">Button Text</a>
            </div>
        </fieldset>
      </div>

      <div class="span3 actions">
        <fieldset>
          <legend>Buttons</legend>
          <div class="btn-group btn-group-vertical">
            <a class="btn btn-primary" href="/"><i class="icon-list icon-white"></i>
              Create Something
            </a>
            <a class="btn btn-primary" href="/"><i class="icon-circle-arrow-down icon-white"></i> Download Something</a>
            <a class="btn btn-primary" href="/"><i class="icon-share icon-white"></i> Some Button</a>
          </div>
        </fieldset>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:35:56.970

我最终在 Bootstrap 人员的帮助下解决了这个问题，我想我会在这里发布帮助，以防将来对其他人有用！

发生重叠的原因有两个：

1.  在可能很小的列上使用 .btn-group。（btn-groups 不会分成垂直组）。相反，像其他类一样使用 .btn-group-vertical 类。
2.  标签上设置了默认宽度，因此添加类“.span11”解决了这个问题。

# multithreading - WCF InstanceContextMode.PerCall 服务和多线程

> ID：13817712
> 
> 赞同：1
> 
> 时间：2012-12-11T09:58:26.960
> 
> 标签：multithreading, wcf, windows-services

我正在运行一个自托管的 WCF 服务（它将是一个 Windows 服务，但我将它作为控制台应用程序运行以进行调试）。服务器端代码在调用时需要做一些工作。然后将结果同步回传给客户端。然后它需要继续并做一些更密集的长时间运行的处理。（即异步）

代码的简化说明是：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true,InstanceContextMode = InstanceContextMode.PerCall)]
public class MyWCFService : IMyWCFService, IDisposable {

    private Thread importThread;
    private DoWork importWork;

    public MyImportResultContract StartImport(MyImportRequestContract requestParams) {

            processorResult = new MyImportResultContract();

        //Simulate a short piece of work here to return results to the 
        //caller before calling a Thread to do more processing
    processorResult.Success = true;
    processorResult.Messages = "A message to pass back to caller"

            Console.WriteLine("WCF Class ManagedThreadId = " + Thread.CurrentThread.ManagedThreadId);

    //Thread off to do long running process
            importWork = new DoWork();               
            importThread  = new Thread(importWork.Start);
            importThread.Start();

            //Pass back the results
            return processorResult; 
    }

public void Dispose() {

        Console.WriteLine("WCF Class Dispose : " + DateTime.Now.ToLongTimeString());
    }

}

internal class DoWork : IDisposable {

     public void Start() {

    Console.WriteLine("Thread ManagedThreadId = " + Thread.CurrentThread.ManagedThreadId);

   //Simulate a long running process
       Thread.Sleep(60000);

        Console.WriteLine("Thread Finished");            
    }

    public void Dispose() {

        Console.WriteLine("DoWork Class Dispose : " + DateTime.Now.ToLongTimeString());
    }

} 
```

**我有 2 个问题：**
1\. 我看到在它产生的线程继续并完成之前调用了服务类的 Dispose。我担心的是，Service 类实例可能不会因为它产生的线程而被释放用于垃圾收集。此处概述的代码是否可靠，不会发生这种情况？

2\. 该服务自托管在 Windows 服务中。如果对任何衍生线程停止服务会发生什么？有没有办法让服务等到任何仍在运行的线程完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:31:42.640

1.  当然可以在线程完成之前释放服务类。如果你想等待线程中的工作完成，为什么要启动一个线程？我不确定除此之外您期望/想要什么行为。
2.  是的，如果进程关闭，你的线程就会死掉。您必须为服务停止回调实现一个处理程序，该处理程序会延迟关闭过程，直到所有工作人员都完成。如果您使用更现代`Task`的而不是`Thread`. 可能，您需要保留一个正在进行的任务的全局列表，以便您的关闭代码可以`WaitAll`处理这些任务。

# php - 如何在windows上安装amqp

> ID：13817714
> 
> 赞同：9
> 
> 时间：2012-12-11T09:58:27.413
> 
> 标签：php, rabbitmq, pear, amqp, pecl

我在安装时遇到此错误`pecl/amqp`

当我在命令行中输入：`pear install pecl/amqp`

> 警告：php_bin C:\xampp\php.\php.exe 似乎有一个后缀 .\php.exe，

但

> 配置变量 php_suffix 不匹配
> 错误：DSP amqp.dsp 不存在。

我需要安装它，以便我可以`RabbitMQ`在 php 上使用 amqp ()。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-04-15T11:53:01.780

@ [AMQP installation php.net](http://php.net/manual/fa/amqp.installation.php):

> Note to Windows users: This extension does not currently support Windows since the librabbitmq library does not yet support Windows.

But [here at RabbitMQ website](https://www.rabbitmq.com/install-windows.html) is a windows installer...

Apparently the information on the **php.net** page is **outdated**

* * *

## To install do like this:

1.  Download the correct package for your php from [this official PECL amqp page](https://pecl.php.net/package/amqp)
2.  unzip
3.  add `php_amqp.dll` to your php `ext` folder and enable the extension inside your php.ini file: `extension=php_amqp.dll`
4.  add `rabbitmq.#.dll` to your windows system 32 folder (where # corresponds with the version number).

All this according to the post on the blog I found [here](http://www.nathanjohnson.info/?p=77).

* * *

## UPDATE

I updated some of the information above. The blog post is from 2013, and only mentioning older versions, but it is anyway a nice guide to the steps you need to take. Since then newer versions are available so be aware there are some slight differences in the process (mainly version numbers) if you want to install a newer version.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-02-15T04:22:47.833

这适用于我的 PHP 7.1 和 amqp 1.9.4 的 Windows。

*   根据您的 PHP 版本、架构、线程安全和编译器，在[https://pecl.php.net/package/amqp](https://pecl.php.net/package/amqp)中下载正确的包。你可以在phpinfo中查看
*   将 php_amqp.dll 复制到您的 php ext 文件夹
*   更新您的 php.ini：extension=php_amqp.dll
*   如果是 32 位系统，请将 rabbitmq.4.dll 复制到您的 windows 系统 32 文件夹。如果使用 64 位系统，请将其添加到 SysWOW64。
*   重启阿帕奇。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-07T06:58:30.073

在 Windows 10 上，构建 19041（2004 更新），64 位。

在 PHP 7.4.8 中使用 Xampp。

1.  转到此处并下载您的相关版本：[https](https://pecl.php.net/package/amqp) ://pecl.php.net/package/amqp （使用 CLI 检查您需要的版本`php -v`）
2.  从`.zip`，复制`rabbitmq.#.dll`到`C:/Windows/System32`
3.  从`.zip`复制`php_amqp.dll`_ `C:/xampp/php/ext`_ `php/ext`_

如果您已将 PHP 作为服务与 Apache 一起运行，请重新启动 Apache。如果您通过 CLI 使用它（例如通过 Bash 和/或 Symfony CLI 服务器），那么您已经可以开始使用了。

* * *

其他帖子提到 64 位变体有`rabbitmq.#.dll`（`#`版本在哪里）进入`C:/Windows/SysWOW64`. 我试过了，对我不起作用，即使运行 64 位 Windows 和 PHP。

```
$ php -v
PHP 7.4.8 (cli) (built: Jul  9 2020 11:30:39) ( ZTS Visual C++ 2017 x64 )
Copyright (c) The PHP Group
Zend Engine v3.4.0, Copyright (c) Zend Technologies 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-03T11:57:02.600

虽然这不会回答如何使用 pear install pecl/amqp 安装 RabbitMQ，但是您是否尝试过将 rabbitmq 与纯 php 实现[php-amqplib 一起](https://github.com/videlalvaro/php-amqplib)使用？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-27T10:38:26.857

经过数小时的搜索：要将 amqp 安装到 php7.4 和 Windows 10 ( [https://pecl.php.net/package/amqp](https://pecl.php.net/package/amqp) )，

1.  选择好的文件 (x86,x64,ts,nts)
    php -i or phpinfo() (Architecture => x64)
    php -i|findstr "Thread" (ts or nts enable)

2.  将
    rabbitmq.4.dll 和 rabbitmq.4.pdb 文件复制到 PHP 根文件夹
    php_amqp.dll 和 php_amqp.pdb 文件到 PHP\ext 文件夹

3.  将 extension=amqp 添加到 php.ini 文件

4.  检查 php -m 是否显示 amqp（php -v 显示错误）

非常感谢 Rezende（[教程](https://dev.to/rezehnde/how-to-install-amqp-extension-for-php-7-4-on-windows-10-108d)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-23T07:59:58.030

如果你`Windows`在[这个 Url](https://www.rabbitmq.com/install-windows.html)上，你可以下载安装`rabbitmq`包，这里是[RabbitMQ 3.9.11](https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.9.11/rabbitmq-server-3.9.11.exe)的直接下载链接。

您还可以使用`choco`以下方法安装它：

```
choco install rabbitmq 
```

而且由于是用[erlang](https://www.erlang.org/downloads)`rabbitmq`实现/编写的，因此您还需要能够安装及其服务。确保下载并安装它。`erlang``rabbitmq``erlang`

# c# - 条码扫描器处理异常

> ID：13817719
> 
> 赞同：0
> 
> 时间：2012-12-11T09:58:42.747
> 
> 标签：c#, .net, windows-ce, barcode, image

我在 Windows CE 中遇到 BarcodeScannerFacade 的问题。我有一个应用程序，客户可以在其中创建一个包含数据和图片的“案例”。我正在尝试更新它，让客户能够使用条形码扫描仪扫描条形码。

现在，第一个案例结束得很好，没有问题，但是当我开始第二个案例时，我不能再拍照了，因为它会抛出一个“未知错误”的异常。（它发生在调用 CameraCaptureDialog.ShowDialog() 方法之后）

经过一番研究，我发现我必须处理barcodeScanner，因为它会以某种方式干扰CCD。

这就是我实例化 BarcodeScanner 的方式：

```
barcodeScanner = BarcodeScannerFacade.GetBarcodeScanner();
barcodeScanner.BarcodeScan += new BarcodeScanner.BarcodeScanEventHandler(barcodeScanner_BarcodeScan); 
```

因此，鉴于上述研究，我在我的代码中加入了以下几行：

```
if (barcodeScanner != null) 
{
     barcodeScanner.Dispose();
} 
```

唯一的问题是它在被调用时死于 NullReferenceException。调试器有以下消息：“没有为任何调用堆栈帧加载符号。无法显示源代码。” “NullReferenceException 未处理”堆栈跟踪如下：

```
- MyLibrary.SymbolBarcodeScanner.symbolReader_ReadNotify()
at TASK.Invoke()
- System.Windows.Forms.Control._InvokeAll()
- System.Windows.Forms.Control.WnProc()
- System.Windows.Forms.Control._InternalWnProc()
- Microsoft.AGL.Forms.EVL.EnterMainLoop()
- System.Windows.Forms.Application.Run()
- MyProgram.Program.Main() 
```

一旦我删除了barcodeScanner.Dispose() 行，它就不会出现异常，但话又说回来，我不能再拍照了。

任何帮助，将不胜感激。

提前致谢， Rockbag

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T10:21:51.860

尝试实现 Terminate() 方法：

```
public override void Terminate()
{
    // If you have a scanner
    if(barcodeScanner  != null) 
    {
        barcodeScanner.ScanDeinit();

        // Any other necessary code for cleaning up...

        // Free it up
        barcodeScanner.Dispose();

        // Indicate that you no longer have a scanner
        barcodeScanner = null;
    }
} 
```

这可能会有所帮助：http:
[//msdn.microsoft.com/en-us/library/aa446489.aspx](http://msdn.microsoft.com/en-us/library/aa446489.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:22:30.147

您应该在 Dispose 方法周围添加一个 try catch 块，您无法更改引发异常的外部代码：

```
if (barcodeScanner != null) 
{
    try { //try to run the dispose method on the barcodescanner to free external resources
        barcodeScanner.Dispose();
    } catch(Exception ex) { 
        //Do some logging if needed
    }
} 
```

# doctrine-orm - 多个复合主键映射 Doctrine2

> ID：13817724
> 
> 赞同：6
> 
> 时间：2012-12-11T09:59:08.677
> 
> 标签：doctrine-orm

我一直在寻找 DB Schema 的确切映射，如下所示![示例数据库模式](../Images/b1ba78ae8211a6982fa5deb1ecb6c224.png)

可以看到 product_i18n 表有两个复合外键（product_id 和 locale_id）。

现在，一旦产品和区域设置实体完成，我想将数据（名称和描述）插入到 product_i18n 表中。

是否有一个类似于使用 Doctrine 2 进行此类映射的示例。或者，如果有人可以简要概述如何处理此类映射，那么您的信息将不胜感激。

PS如果有人需要有关此的更多信息，请不要犹豫，询问。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T17:38:02.663

Doctrine 2 原生支持复合键

```
/**
 * @Entity
 */
class ProductI18N
{
    /** @Id @Column(type="string") */
    private $product;
    /** @Id @Column(type="string") */
    private $locale

    public function __construct($product, $locale)
    {
        $this->product= $product;
        $this->locale= $locale;
    } 
```

始终记住，必须在持久化模型之前设置复合键：

```
$productI18N = new ProductI18N("Guanabana", "CR");
$em->persist($productI18N );
$em->flush(); 
```

有关您的更多信息，请参阅文档： [http ://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/tutorials/composite-primary-keys.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-12T17:02:37.057

如果您在字段 1（id 自动增量）和字段 2（指定）中有复合键，请使用：

```
class ProductI18N
{
    /** @Id @Column(type="string") @GeneratedValue(strategy="AUTO") */
    private $product;
    /** @Id @Column(type="string") @GeneratedValue(strategy="NONE") */
    private $locale 
```

# jquery-plugins - 如何在 FullCalendar 中添加自定义表单？

> ID：13817726
> 
> 赞同：1
> 
> 时间：2012-12-11T09:59:19.507
> 
> 标签：jquery-plugins, calendar, fullcalendar

我已经在 HTML 中创建了表单（如下图所示），我想将此表单集成到[FullCalendar](http://arshaw.com/fullcalendar/)中。当我想添加新事件时，此表单将显示。你能给我一些想法吗？如果可能的话，我可以在不修改插件的情况下做到这一点吗？

![在此处输入图像描述](../Images/4c8d2d2621f66bbe5c6a558b3d4998a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:37:47.957

当用户点击一天时，您可以将表单放入灯箱并显示它。Fullcalendar 为此提供了一个事件：http: [//arshaw.com/fullcalendar/docs/mouse/dayClick/](http://arshaw.com/fullcalendar/docs/mouse/dayClick/)

编辑：或者你所说的整合到底是什么意思？

# c# - C# 中的 UDP 适用于 Windows 但不适用于 Linux

> ID：13817732
> 
> 赞同：10
> 
> 时间：2012-12-11T09:59:25.727
> 
> 标签：c#, windows, ubuntu, mono, fedora

我正在使用 mono 来构建一个需要使用 UDP 发送和接收的 C# 程序。目前我的实现在 Windows 上按预期工作，但我在与我的 Ubuntu 或 Fedora 系统进行通信时遇到了问题。

Windows 可以广播和接收它自己的数据报。
Ubuntu 可以广播和接收它自己的数据报。它的广播被 Windows 接收，但*它看不到 Windows 广播的数据报。*
Fedora 可以广播但不能从任何地方（甚至它自己）接收数据报。它的广播被 Windows 接收。

当数据报无法到达任何一台 linux 机器时，'receive' 功能永远不会被触发。

这是我到目前为止所拥有的：

```
int _port = 4568;
var server = new UdpClient(_port);
var send_UDP = new UdpClient(); 
```

接收方法使用UDPClient的异步调用；

```
private static void receive()
{
    server.BeginReceive(new AsyncCallback(receive), null);
}
private static void receive(IAsyncResult o)
{           
    try
    {
        // I'm told that port = 0 should receive from any port.
        var sender = new IPEndPoint(IPAddress.Any, 0);
        var data = server.EndReceive(o, ref sender);
        receive();
        var str = new string(Encoding.ASCII.GetChars(data));
        postmessage(sender.Address.ToString() + ":" + sender.Port.ToString() + " > " + str);
    }
    catch {}
} 
```

以及发送方法；

```
public static void send(string message)
{
    var target = new IPEndPoint(IPAddress.Parse("255.255.255.255"), _port);
    byte[] data = Encoding.ASCII.GetBytes(message);
    send_UDP.Send(data, data.Length, target);
} 
```

用 Fedora 做了一些测试，使用 255.255.255.255 广播似乎有问题。还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:34:50.313

我已经在评论中指定了这一点，但将其作为答案，因为您可能忽略了它并且似乎没有答案。

不要使用`255.255.255.255`广播，而是使用本地 IP 子网的广播地址（例如 192.168.0.1/24 子网上的 192.168.0.255）。该`255.255.255.255`地址不会被路由器转发（如果您的客户端站点上有多个子网，则这很重要），而可以转发定向广播（如果这样配置）。过去，路由器默认情况下会转发定向广播，但这在[RFC2644](https://www.rfc-editor.org/rfc/rfc2644)中已更改，因此请不要将农场押注于此；）。

这是计算每个适配器的定向 IPV4 广播地址的示例：

```
public static void DisplayDirectedBroadcastAddresses()
{

    foreach (var iface in NetworkInterface.GetAllNetworkInterfaces()
             .Where(c => c.NetworkInterfaceType != NetworkInterfaceType.Loopback))
    {
        Console.WriteLine(iface.Description);
        foreach (var ucastInfo in iface.GetIPProperties().UnicastAddresses
                 .Where(c => !c.Address.IsIPv6LinkLocal))
        {
            Console.WriteLine("\tIP       : {0}", ucastInfo.Address);
            Console.WriteLine("\tSubnet   : {0}", ucastInfo.IPv4Mask);
            byte[] ipAdressBytes = ucastInfo.Address.GetAddressBytes();
            byte[] subnetMaskBytes = ucastInfo.IPv4Mask.GetAddressBytes();

            if (ipAdressBytes.Length != subnetMaskBytes.Length) continue;

            var broadcast = new byte[ipAdressBytes.Length];
            for (int i = 0; i < broadcast.Length; i++)
            {
                broadcast[i] = (byte)(ipAdressBytes[i] | ~(subnetMaskBytes[i]));
            }
            Console.WriteLine("\tBroadcast: {0}", new IPAddress(broadcast).ToString());
        }
    }

} 
```

# publish-subscribe - 一个大规模的基于 TCP IP 的 pubsub 系统

> ID：13817733
> 
> 赞同：2
> 
> 时间：2012-12-11T09:59:26.650
> 
> 标签：publish-subscribe, zeromq, tcp-ip

我正在设计一个基于 TCP/IP 的发布/订阅系统。预计这将具有较高的消息更新率以及大量订阅者。我之前在看 CometD，但我们意识到它支持的 Bayeux 协议只是 Http 上的 JSON。我们不希望在这个系统中产生 Http 开销。现在我正在寻找可能的解决方案 ZeroMQ。是否有任何其他此类系统已被证明可以通过 TCPIP 处理大规模发布/订阅？

更新 - 我的发布者只是 TCP/IP 客户端，但我的订阅者是基于 Web 浏览器的小部件。据我了解，ZeroMQ 不支持基于浏览器的订阅者的 Http。这种情况有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:08:38.877

您似乎提出了相互矛盾的要求：

*   你不想要 HTTP 开销
*   您的客户端是基于浏览器的小部件

如果您可以重写您的客户端，您可能会考虑使用 0MQ 到 websocket 桥接器。有一些浮动，例如[https://gist.github.com/1051872](https://gist.github.com/1051872)。

另外，当您解释您的要求时，请提供数字。“高消息更新率”和“大量订阅者”意味着很少。10/秒？1M/秒？50个订阅者？50,000？此外，值得注意的是平均邮件大小、您是否必须在公共 Internet 上工作以及任何其他限制。

# c# - 如何对gridview中的日期列进行排序？

> ID：13817737
> 
> 赞同：2
> 
> 时间：2012-12-11T09:59:29.737
> 
> 标签：c#, asp.net

我正在使用 ASP.NET 和 C#。这是我的代码。

```
 private const string ASCENDING = "ASC"; 
    private const string DESCENDING = "DESC";
    public SortDirection GridViewSortDirection 
    {     
        get     
        {         
            if (ViewState["sortDirection"] == null)             
                ViewState["sortDirection"] = SortDirection.Ascending;          
            return (SortDirection) ViewState["sortDirection"];                     
        }     
        set { ViewState["sortDirection"] = value; }  
    }

    public string SortExpression
    {
        get
        {
            if (ViewState["sortExpression"] == null)
                ViewState["sortExpression"] = "JobNumber";
            return ViewState["sortExpression"] as string;
        }
        set { ViewState["sortExpression"] = value; }
    }
    protected void OnSorting(object sender, GridViewSortEventArgs e)
    {
            SortExpression = e.SortExpression;
            if (GridViewSortDirection == SortDirection.Ascending)
            {
                GridViewSortDirection = SortDirection.Descending;
            }
            else
            {
                GridViewSortDirection = SortDirection.Ascending;
            }
            BindGrid();
    } 
```

我正在对所有列进行排序并且工作正常。但是对于日期列，它就像这个顺序（dd/mm/yyyy）。

*   2012 年 11 月 30 日
*   2012 年 10 月 12 日
*   2012 年 9 月 10 日

    ```
    <asp:BoundField DataField="ReportedDate" HeaderText="Reported Date" SortExpression="ReportedDate" DataFormatString="{0:DD/MM/YYYY}" HtmlEncode="false" /> 
    ```

此列的数据类型是日期。

怎么做？我做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:23:46.800

有两种选择

1.在SQL级别排序，这是最好的和正确的方法，将结果集绑定到gridview。

2.将DataTable与查询输出绑定，并对datatable进行排序，然后将其绑定到gridview。请记住将数据类型添加到数据表列`accTable.Columns.Add("Date",typeof(DateTime));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:04:24.830

数据库中该列的数据类型是什么？看起来它就像一个字符串字段而不是 DateTime 字段。如果是这种情况，您需要先修复数据类型，然后才能获得正确的排序顺序，而无需更改 gridview 上的任何内容。

尝试改变

```
<asp:BoundField DataField="ReportedDate" HeaderText="Reported Date" SortExpression="ReportedDate" DataFormatString="{0:DD/MM/YYYY}" HtmlEncode="false" /> 
```

到

```
<asp:TemplateField SortExpression="ReportedDate">
    <ItemTemplate>
            <asp:label id="lblDate" runat="server" text='<%# Eval("ReportedDate", "{0:DD/MM/YYYY}") %>' />
    </ItemTemplate></asp:TemplateField> 
```

# javascript - history.pushstate 不更新标题

> ID：13817740
> 
> 赞同：10
> 
> 时间：2012-12-11T09:59:39.143
> 
> 标签：javascript, ajax, browser-history

我正在使用 AJAX 加载页面的主要内容。使用`history.pushstate(Object:State, String:Title, String:URL)`- 我能够更新地址栏中的 URL 并在历史记录中导航。

但是，该`title`参数似乎没有效果。窗口标题和“历史列表”中条目的标题都没有改变（也许它们都一样）。

我究竟做错了什么？

**更新**：`title`参数在 chrome 中被简单地忽略了。[http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2010-June/026827.html](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2010-June/026827.html)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T10:03:08.807

该`title`参数不是窗口标题。
它可以用作状态的标题，但某些浏览器（如*Chrome* ）会忽略它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-08T13:41:38.887

正如@ujjwal-singh 已经在他的回答中写的那样，第二个参数`title`可以用作历史记录中条目的标签，但它是可选的，浏览器可以忽略它并决定为标题使用不同的来源。[HTML 5 规范第 5.5.2 章第 8 点下方](https://www.w3.org/TR/html5/browsers.html#history-1)的注释指出

> `title`纯粹是建议性的。用户代理可能会在用户界面中使用标题。

这就是 Chrome 和 Firefox 的工作方式。因此，以下代码应在所有主要浏览器中带来一致的用户体验

```
document.title = myTitle;
history.pushState( myState, myTitle, myURL ); 
```

此代码还更新了文档的标题，Chrome 和 Firefox 应该使用这个。

但是，它**没有按预期工作，您将遇到一个奇怪的错误**。（至少对于 FF 45 和 Chrome 51 是这样。）问题是 UI 不会立即更新，而是在 JS 调用堆栈变空后才更新。因此，`pushState`仍将使用旧的（过时的）标题，因为文档的新标题尚未应用于 DOM。在此代码片段的下一次调用中`pushState`使用先前更改的标题，依此类推。

如果用户从历史记录中选择一个项目，则用户会被误导到与用户预期不同的页面，因为每个历史记录条目的标签和历史条目的实际目的地不同步。

但是，对我来说，这看起来像是 Chrome 和 Firefox 中的一个错误。虽然 UI 仅在 JS 终止后更新，但`pushState`应该已经使用新标题。我已经向 Chromium 和 Mozilla 提交了错误报告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-22T14:57:08.980

我不知道为什么会这样，但由于接下来是 Rounin的[评论：](https://stackoverflow.com/questions/13817740/history-pushstate-not-updating-title#comment105846503_38830794)

> 我有 window.history.pushState(myStateObject, myNewTitle, myNewURL); document.title = myNewTitle; 2020 年 1 月在 Firefox 72 中工作。我不知道在可以实时重置 document.title 之前，我怎么从来没有想到过。优秀的抬头。

我突然发现在 Firefox 91.0b9 中你必须先放 pushState，然后你必须更改标题。然后 Ff 91.0b9 中的历史管理器更改推送状态的确切页面，而不是 uri 略有不同的类似关闭页面。在我的情况下，如果 document.title 首先更改，则历史管理会更改最后两条带有站点类似链接的记录。

例如，如果某些 /page 将更改为 /page/2，并且您更改标题然后将进行 pushState，那么两个记录标题都将更改为您在文档标题中指定的标题，或者可能与 pushState 中的标题有关. 因此，当 document.title 第二次调用时，它可以正常工作

示例（作品）：

```
window.history.pushState(myStateObject, myNewTitle, myNewURL);
document.title = myNewTitle; 
```

并且不像它可能假设的那样（不起作用）：

```
document.title = myNewTitle;
window.history.pushState(myStateObject, myNewTitle, myNewURL); 
```

感谢鲁宁！

# android - 如何从android中收到的短信中获取短信发件人的电话号码的代码

> ID：13817742
> 
> 赞同：-2
> 
> 时间：2012-12-11T09:59:43.887
> 
> 标签：android, sms, broadcastreceiver, sms-gateway, phone-number

请任何人给我下载的代码或任何有用的链接，以便在接收消息时获取 SMS 发件人的电话号码。我尝试了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:11:38.753

试试这个，这里`messages[0].getOriginatingAddress()`会返回短信发送者的电话号码

```
public void onReceive(Context context, Intent intent) {
          Log.i(TAG, "Intent recieved: " + intent.getAction());

             if (intent.getAction() == SMS_RECEIVED) {
                 Bundle bundle = intent.getExtras();
                 if (bundle != null) {
                     Object[] pdus = (Object[])bundle.get("pdus");
                     final SmsMessage[] messages = new SmsMessage[pdus.length];
                     for (int i = 0; i < pdus.length; i++) {
                         messages[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                     }
                     if (messages.length > -1) {
                         Log.i(TAG, "Message recieved: " + messages[0].getMessageBody());
                         Log.i(TAG, "Message recieved: " + messages[0].getOriginatingAddress());
                     }
                 }
             }
        } 
```

希望它会起作用，或引导您找到解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:53:02.900

```
@Override
public void onReceive(Context ctx, Intent intent) {
    //Log.d(Params.LOG_APP, "INCOMING SMS....");

    Bundle extras = intent.getExtras();

    if (extras == null)
        return ;

    Object[] dataArr = (Object[]) extras.get("pdus");
    //Log.d(Params.LOG_APP, "dataArr ["+dataArr+"]");

    for (Object data: dataArr) {
        SmsMessage sms = SmsMessage.createFromPdu((byte[]) data);
        //Log.d(Params.LOG_APP, "SMS ["+sms+"]");
        String body = sms.getMessageBody();
        String sender = sms.getOriginatingAddress();

        long time = sms.getTimestampMillis();

    }

} 
```

# zend-framework - Zend Framework 备用 url 路由

> ID：13817747
> 
> 赞同：0
> 
> 时间：2012-12-11T09:59:59.873
> 
> 标签：zend-framework

不确定 ZF 1.11 是否可以执行以下操作

正常显示照片的方法

```
www.mysite.com/photos/display/377486 
```

其中 377486 是 mysql 中照片的 id，可以是任何整数

是否可以缩短网址，所以我得到相同的

```
www.mysite.com/photos/377486 
```

如果这是可能的，这种技术/方法叫什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:57:35.443

不，您需要 2 条不同的路线。

您可以测试：

```
routes.photos.type = "Zend_Controller_Router_Route_Regex"
routes.photos.route = "photos/display/(\d+)"
routes.photos.defaults.controller = "photos"
routes.photos.defaults.action = "display"
routes.photos.map.1 = "id"
routes.photos.reverse = "books/%d"

routes.photos_short.type = "Zend_Controller_Router_Route_Regex"
routes.photos_short.route = "photos/(\d+)"
routes.photos_short.defaults.controller = routes.photos.defaults.controller
routes.photos_short.defaults.action = routes.photos.defaults.action
routes.photos_short.map.1 = "id"
routes.photos_short.reverse = "books/%d" 
```

# c# - 在代码中为合法状态抛出异常

> ID：13817750
> 
> 赞同：2
> 
> 时间：2012-12-11T10:00:07.490
> 
> 标签：c#, .net, exception

Exception 是一个方便的容器，很容易用于各种目的。但是可以用它来处理代码中的合法状态吗？

我的例子：我有一个几何函数，可以在搜索半径内找到最近的对象：

```
public IPoint FindNearest(IPoint origin, double searchRadius)
{

} 
```

我的想法是，当搜索没有找到命中时，我可以抛出异常。但这是个好主意吗？或者，我可以返回`Null`（我不喜欢），或者返回一个结果对象而不是一个点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:04:31.413

异常通常表示无效或“异常”场景。在您的情况下，如果没有找到命中是一种特殊情况，并且在通常情况下应该始终找到它，那么您可以抛出异常。

由于其沉重的性质，您应该始终尽量避免抛出异常。如果调用者代码频繁调用此方法，而您的方法导致抛出大量异常，这会使您的程序变慢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:04:50.183

最佳实践是仅当您无法以功能方式处理错误时才使用异常。在这种情况下，最好不要找到位置并返回 null，因为您的调用函数可以以函数方式处理 null。除了干净的代码之外，抛出和处理异常对性能非常不利，因此只能将它们用作最后​​的手段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T10:07:32.383

你可以做类似的事情

```
public bool TryFindNearest(IPoint origin, double searchRadius, out IPoint result)
{
    // your logic here, return true if you find a point. Otherwise return false.
} 
```

然后您的调用代码可以执行以下操作：

```
IPoint nearestPoint;
If (TryFindNearest(origin, searchRadius, out nearestPoint))
{
    // do your stuff.
} 
```

在不控制程序流程的无效场景中应使用异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-11T10:08:16.037

通常在这种情况下抛出异常并不是一个好主意，它们很昂贵并且在语义上完全意味着其他东西。

您可以返回 null 并进行 null 检查，或者我偶尔会发现使用[Special Case](http://martinfowler.com/eaaCatalog/specialCase.html)模式效果很好，并且如果您给类/接口一个合理的名称，则可以使代码可读。

在这种情况下，您将返回一个实现类或派生接口，例如：

```
public class NoHitOnRadius : IPoint {} 
```

并在没有命中时从通话中返回。然后调用代码检查返回类型：

```
var p = FindNearest(...);

if (p is NoHitOnRadius) 
{
    // Do something.
} 
```

尽管在这种特定情况下，我可能会使用[RobH 建议](https://stackoverflow.com/a/13817889/358221)`TryFindNearest`的语义（以保持与`TryParse`等的共性）。

# c++ - 获取 cv::Mat 的源 ROI 坐标

> ID：13817761
> 
> 赞同：2
> 
> 时间：2012-12-11T10:00:32.920
> 
> 标签：c++, opencv

在opencv中，图像和图像的ROI之间没有区别。cv::Mat 对象可以是：

```
cv::Mat img = cv::imread(fileName);
cv::Mat imgROI(img,cv::Rect(1,2,30,40)); 
```

我的问题是如何提取原始图像中的原始 ROI 坐标，即执行以下操作的一些函数：

```
cv::Rect originalROIcoords  = roiLocationInOriginalImg(imgROI);
cv::Rect originalROIcoords2 = roiLocationInOriginalImg(img ); 
```

*originalROIcoords*应该是 (1,2,30,40)，而*originalROIcoords2*应该是 (0,0,w,h)，其中*w*和*h*分别是原始图像的宽度和高度。

谢谢。

奥哈德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-25T11:15:00.393

小心 ROI 的 ROI，因为 locateROI 返回与根图像相关的偏移量，它与 ROI 父级无关

```
cv::Mat img(100,100,CV_8UC1);               // the root image
cv::Mat imgROI(img,cv::Rect(10,10,60,60));  // a ROI in the root image
cv::Mat roiROI(imgROI,cv::Rect(5,5,30,30)); // a ROI into a ROI

Point offset;
Size wholesize; 
```

获取第一个 ROI 的偏移量：

```
imgROI.locateROI(wholesize,offset);
cout << "imgRoi Offset: " << offset.x <<","<< offset.y << endl; 
```

> imgRoi 偏移：10,10

获取 ROI 的 roi 偏移量：

```
roiROI.locateROI(wholesize,offset);
cout << "roiRoi Offset: " << offset.x <<","<< offset.y << endl; 
```

> roiRoi 偏移量：15,15

同样是为了`wholesize`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:24:04.677

要知道原始矩阵中子矩阵的坐标，可以使用函数`Mat::locateROI`

```
// locates matrix header within a parent matrix
void locateROI( Size& wholeSize, Point& ofs ) const; 
```

# javascript - div的随机位置和悬停功能

> ID：13817763
> 
> 赞同：3
> 
> 时间：2012-12-11T10:00:37.813
> 
> 标签：javascript, jquery, random, hover

我发现这段代码可以随机创建一些 div：

```
(function makeDiv(){
   var divsize = ((Math.random()*100) + 50).toFixed();
   var color = '#'+ Math.round(0xffffff * Math.random()).toString(16);
   $newdiv = $('<div/>').addClass("destruct").css({
       'width':divsize+'px',
       'height':divsize+'px',
       'background-color': color
   });

   var posx = (Math.random() * ($(document).width() - divsize)).toFixed();
   var posy = (Math.random() * ($(document).height() - divsize)).toFixed();

   $newdiv.css({
       'position':'absolute',
       'left':posx+'px',
       'top':posy+'px',
       'display':'none'
   }).appendTo( 'body' ).fadeIn(500, function(){
      makeDiv(); 
   }); 
})(); 
```

但我希望 div 在悬停时变成黑色，一个接一个。

```
$(document).ready(function() {
  $('.destruct').hover( function(){
    $('.destruct', this).css({background: '#000'});
   });
}); 
```

但它不起作用...

这是一个[http://jsfiddle.net/q6L7C/2/](http://jsfiddle.net/q6L7C/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:03:50.370

[演示](http://jsfiddle.net/q6L7C/5/)

这是因为您的 div 是动态生成的，请尝试：

```
$(document).ready(function() {
   $(document).on('mouseover', '.destruct', function(){
      $(this).css({background: '#000'});
   });
}); 
```

如果您使用的是旧版本的 jquery (>1.7)，请使用：

```
$(".destruct").live("mouseover", function(){
    $(this).css({background: '#000'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:03:52.303

有几种方法可以做到这一点。一是事件委托：

[http://jsfiddle.net/q6L7C/3/](http://jsfiddle.net/q6L7C/3/)

这会将绑定更改为：

```
$(document).on('hover', '.destruct', function(){
   $(this).css({background: '#000'});
}); 
```

...但我会尝试使用比`document`.

另一种解决方案是在创建每个 div 时将`hover`（或者`mouseover`在这种情况下，因为它应该足够了）回调单独绑定到每个 div，但这可能会导致很多单独的事件绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:07:13.100

您可以`.mouseenter()`在创建 div 时绑定，也可以`.mouseenter()`像其他答案指出的那样绑定到文档（事件委托）。我会用第一种方法。[更新的演示](http://jsfiddle.net/karalamalar/q6L7C/13/)

```
(function makeDiv(){
    var divsize = ((Math.random()*100) + 50).toFixed();
    var color = '#'+ Math.round(0xffffff * Math.random()).toString(16);
    $newdiv = $('<div/>').addClass("destruct").css({
        'width':divsize+'px',
        'height':divsize+'px',
        'background-color': color
    })
    // Magic happens here!
    .mouseenter(function(){
      $(this).css({background: '#000'});
    });

    var posx = (Math.random() * ($(document).width() - divsize)).toFixed();
    var posy = (Math.random() * ($(document).height() - divsize)).toFixed();

    $newdiv.css({
        'position':'absolute',
        'left':posx+'px',
        'top':posy+'px',
        'display':'none'
    }).appendTo( 'body' ).fadeIn(500, function(){
       makeDiv();
    });
})(); 
```

# javascript - Javascript运行时如何减少Session的值

> ID：13817771
> 
> 赞同：0
> 
> 时间：2012-12-11T10:01:03.877
> 
> 标签：javascript, jquery, asp.net, jquery-ui

实际上，我正在执行诸如动态控件生成之类的任务，并且当我通过删除按钮删除最后创建的动态生成控件时。我正在使用 JavaScript 执行删除操作。当我创建控件时，会话值会增加。现在，当我通过 JavaScript 执行删除操作时，我需要减少 session 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:03:14.867

会话变量是`maintained on server side`并且您不能使用 javascript 在客户端上访问它们。您需要向服务器发送请求。您需要`postback or send ajax`调用更改 ( `decrement`) 会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:07:16.287

通过 JavaScript 执行此操作的唯一可能方法是在服务器上创建一个方法，该方法将减少 Session 变量的值，然后通过 JavaScript 异步执行该函数。

# android - 具有图像高度和宽度的Android tableLayout

> ID：13817772
> 
> 赞同：0
> 
> 时间：2012-12-11T10:01:08.443
> 
> 标签：android, tablelayout

![在此处输入图像描述](../Images/3f89ce53d4180ba75e657345258bfd35.png)

我想膨胀 imageview、tablelayout、tablerow，然后将 imageviews 添加到 tablerows，然后将 tablerows 添加到 tablelayout。

问题是我无法管理图像的宽度和高度。

![在此处输入图像描述](../Images/7c806ef19727322c65f94f0cd9f91bc7.png)

当我在 xml 中静态创建表时，我对图像没有任何问题。但是现在你可以看到它甚至没有显示该表的所有三行。我究竟做错了什么？

我想要的是具有动态列数和行数的表。我希望这张桌子适合屏幕。

```
 for (int i = 0; i < im1.length; i++) {
        im1[i] = (ImageView) getLayoutInflater().inflate(R.layout.image0, null);
        im2[i] = (ImageView) getLayoutInflater().inflate(R.layout.image1, null);
    }

    table = (TableLayout) getLayoutInflater().inflate(R.layout.table, null);
    TableRow row1 = (TableRow) getLayoutInflater().inflate(R.layout.row, null);
    row1.addView(im1[0]);
    row1.addView(im2[0]);
    TableRow row2 = (TableRow) getLayoutInflater().inflate(R.layout.row, null);
    row2.addView(im1[1]);
    row2.addView(im2[1]);
    TableRow row3 = (TableRow) getLayoutInflater().inflate(R.layout.row, null);
    row3.addView(im1[2]);
    row3.addView(im2[2]);

    table.addView(row1);
    table.addView(row2);
    table.addView(row3);
    tableFlipper.addView(table); 
```

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/llayout"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="@string/hello_world"
    android:layout_marginTop="10dp" />

<ViewFlipper
    android:id="@+id/tableFlipper"
    android:layout_width="wrap_content"
    android:layout_height="400dp"
    android:layout_gravity="center"
    android:layout_marginTop="10dp"  >     

</ViewFlipper>

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button"
    android:layout_gravity="center"
    android:layout_marginTop="10dp"
    android:onClick="onButtonClick" />

   </LinearLayout> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:shrinkColumns="*" >

</TableLayout> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
 >

</TableRow> 
```

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:src="@drawable/square"
android:scaleType="fitCenter"
android:maxHeight="30dp"
android:maxWidth="30dp" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:49:18.173

所以你不能控制 TableRow 布局的高度。它始终是 wrap_content。

# android - 当我在 EditTExt 上提供大量文本时 UI 发生变化

> ID：13817780
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:01:32.183
> 
> 标签：android

这是我的用户界面的链接：

[![图片](../Images/a1e1d41cff911481bd28f02ba8244a25.png)](https://i.stack.imgur.com/LN6dV.png)

当文本正常时。

当我提供更多文本时，UI 会发生如下变化：

[![图2](../Images/5b0aef71c0f48662db8e2d8bbf727ce6.png)](https://i.stack.imgur.com/IKGQP.png)

下面是我的 xml 文件代码，当输入大量文本时，Ui 中的更改对我有帮助：

请告诉我我该如何解决这个问题？？

```
 <?xml version="1.0" encoding="utf-8"?>

 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:stretchColumns="1" 
  android:layout_margin="5dp">

   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/name_lbl"/>
     <TextView 
        android:id="@+id/nameText" 
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/cap_lbl"/>         
     <TextView 
        android:id="@+id/capText"
        style="@style/StyleText"/>         
  </TableRow>

  <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/code_lbl"/>         
     <TextView 
        android:id="@+id/codeText"
        style="@style/StyleText"/>         
  </TableRow>

    <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/DoneDate_lbl"/>         
     <TextView 
        android:id="@+id/Location_lbl"
        style="@style/StyleText"/>         
  </TableRow>
   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/Notes_lbl"/>         
     <TextView 
        android:id="@+id/Notes_lbl"
        style="@style/StyleText"/>         
  </TableRow>
   <TableRow>         
     <TextView 
        style="@style/StyleLabel"
        android:text="@string/person_lbl"/>         
     <TextView 
        android:id="@+id/Person_lbl"
        style="@style/StyleText"/>         
  </TableRow>
 </TableLayout> 
```

下面是`styles.xml`：

```
 <resources>    
<style name="StyleLabel">
  <item name="android:layout_width">wrap_content</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:gravity">right</item>
  <item name="android:textSize">14sp</item>
  <item name="android:textColor">@android:color/white</item>
  <item name="android:layout_marginLeft">5dp</item>
  <item name="android:layout_marginRight">5dp</item>
  <item name="android:layout_marginTop">5dp</item>
</style>
<style name="StyleText">
  <item name="android:layout_width">wrap_content</item>
  <item name="android:layout_height">wrap_content</item>
  <item name="android:textSize">16sp</item>
  <item name="android:textColor">@android:color/white</item>
  <item name="android:layout_margin">5dp</item>
  <item name="android:background">@drawable/textview_border</item>
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:05:24.003

在您的样式文本中使用它

```
android:singleLine="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:03:34.320

将以下属性添加到您的文本视图。

```
singleLine="false" 
android:ellipsize="end" 
android:lines="1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:04:21.653

将此行放在您`TextView`的文件标记中`xml`：

```
android:singleLine="true" 
```

那么输入的数据`TextView`将是单行的。

***更新：***

在您的所有内容中添加以下行`TextViews`：

```
android:ellipsize="end"
android:maxLines="10" //Restrict to some number of lines 
```

# asp.net-mvc-4 - 用于在 mvc4 中包含视图模型的指令

> ID：13817781
> 
> 赞同：0
> 
> 时间：2012-12-11T10:01:35.197
> 
> 标签：asp.net-mvc-4

我已经阅读了 MVC3 教程，用于在 asp.net 页面中显示相关数据。它有一个视图模型：

```
using System; 
using System.Collections.Generic; 
using ContosoUniversity.Models; 

namespace ContosoUniversity.ViewModels 
{ 
    public class InstructorIndexData 
    { 
        public IEnumerable<Instructor> Instructors { get; set; } 
        public IEnumerable<Course> Courses { get; set; } 
        public IEnumerable<Enrollment> Enrollments { get; set; } 
    }
} 
```

和一个控制器，带有动作：

```
using ContosoUniversity.ViewModels;

public ActionResult Index(Int32? id, Int32? courseID) 
{ 
    var viewModel = new InstructorIndexData(); 
    viewModel.Instructors = db.Instructors 
                              .Include(i => i.OfficeAssignment) 
                              .Include(i => i.Courses.Select(c => c.Department)) 
                              .OrderBy(i => i.LastName); 

    if (id != null) 
    { 
        ViewBag.InstructorID = id.Value; 
        viewModel.Courses = viewModel.Instructors.Where(i => i.InstructorID ==         id.Value).Single().Courses; 
    } 

    if (courseID != null) 
    { 
        ViewBag.CourseID = courseID.Value; 
        viewModel.Enrollments = viewModel.Courses.Where(x => x.CourseID ==  courseID).Single   ().Enrollments; 
    } 

    return View(viewModel); 
} 
```

当我在 MVC4 中尝试时，**使用 ContosoUniversity.ViewModels；**不存在

并且在

```
viewModel.Courses = viewModel.Instructors.Where(i => i.InstructorID ==            id.Value).Single().Courses; 
```

由于无法将 viewmodel.instructors 转换为`IEnumerable<viewmodel.Instructors>`

# android - 具有脱机 HTML5 数据库同步的 Microsoft Sync Framework

> ID：13817782
> 
> 赞同：0
> 
> 时间：2012-12-11T10:01:36.557
> 
> 标签：android, microsoft-sync-framework, offlineapps

我已经推荐了更多的网站`steps to create Offline HTML 5 database synchronization in Android using Microsoft Sync Framework`。任何人都可以将我重定向到所需的网站吗？

我跟着这个

[http://selvinlistsyncsample.codeplex.com/documentation](http://selvinlistsyncsample.codeplex.com/documentation)

但在**第 2 步 -> SyncFramework 应该在 Eclipse 中作为项目打开。** SyncFramework 的来源将在哪里用于 android？

**注意：我已经安装了 SyncSDK-v2.1-x86-ENU**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:34:15.453

该项目指的是 Sync Framework Toolkit，请在此处查看：[http ://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e](http://code.msdn.microsoft.com/wpapps/Sync-Framework-Toolkit-4dc10f0e)

您还将在那里找到一个 HTML5 示例...

# php - 如何在html中显示textarea字段？

> ID：13817783
> 
> 赞同：0
> 
> 时间：2012-12-11T10:01:37.787
> 
> 标签：php, html, mysql

嗨，我通过 textarea.in 向 mysql 插入了一些数据，我添加了这样的内容

```
Test
test2
1) tch
2) ECE 
```

在 textarea 中的显示也像上面一样。但是当来到 HTML 显示时，它正在显示。

```
Test  test2 1) tch 2) ECE 
```

在那个时候做什么才能正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:03:55.177

使用**nl2br(textarea 的值)**函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:18:50.023

You can add `<br/>` tags (using for example `nl2br` function), but in this case you can reach another problem - tabs or multiply spaces will be displayed as single space and striped from the line beginnings.

Second solution is to use `<pre>` tag.

```
<pre>Test
test2
1) tech
2) ECE</pre> 
```

probably you'll need to style it a little bit as it uses monospace font by default and does not wrap text, but you can easily change it using css.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:06:19.247

[nl2br](http://php.net/manual/en/function.nl2br.php)是您需要的功能

> 返回在所有换行符（\r\n、\n\r、\n 和 \r）之前插入 <br / > 或 '<br>' 的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T10:04:08.043

不`\n`显示在 HTML 中，您应该替换所有的`\r`,`\r\n`和`\n``<br/>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T10:06:52.497

您可以使用 '\n' 字符从行返回：

例子：

```
echo "<textarea>" . "Line 01\nLine 02" . "</textarea>"; 
```

# android - Android - 无法使用来自edittext字符串的过滤结果更新列表视图

> ID：13817784
> 
> 赞同：1
> 
> 时间：2012-12-11T10:01:41.640
> 
> 标签：android, listview, android-arrayadapter, contactscontract

我在通过用户在编辑文本中键入的搜索字符串过滤手机上的联系人时遇到了一些问题。

它似乎过滤得很好，但问题是过滤后的 ListView 包含与 ALL CONTACTS ListView 相同的初始联系人。

例如：

```
ALL CONTACTS:
A - B - C - D - E 
```

我将 E 写在 中`EditText`，使用 a `TextWatcher`，过滤后的结果是`A`。

所以就好像过滤得很好（只有一个结果），但是listview内容没有更新！

这里有一些代码：

`getFilter()`和自定义过滤器：

```
@Override
public Filter getFilter() 
    {
    if (mFilter == null) 
    {
        mFilter = new CustomFilter();
    }

    return mFilter;
}

private class CustomFilter extends Filter 
{
    @Override
    protected FilterResults performFiltering(CharSequence prefix) 
    {
        FilterResults results = new FilterResults();

        Log.d("PREFIX", "its ---> " + prefix);

        prefix = prefix.toString().toLowerCase();

        if(prefix != null && prefix.length()>0)
        {
            ArrayList<Contact> contatti = new ArrayList<Contact>();

            for(int i = 0; i < _app._contacts.size(); i++)
            {
                Contact current = _app._contacts.get(i);

                if(current.getContactName().toLowerCase(Locale.getDefault()).contains(prefix) /*|| current.getNumber().toLowerCase().contains(prefix)
                        || current.getEmail().toLowerCase().contains(prefix) || current.getOrganization().toLowerCase().contains(prefix)*/)
                {
                    contatti.add(current);
                    Log.d("added to contatti list: ", current.getContactName()+" - "+current.getNumber());
                }
            }

            results.count = contatti.size();
            results.values = contatti;
        }
        else
        {
            results.count = _app._contacts.size();
            results.values = _app._contacts;
        }

        return results;
    }

    @SuppressWarnings("unchecked")
        @Override
    protected void publishResults(CharSequence constraint, FilterResults results) 
    {
        ArrayList<Contact> risultatoFiltro = new ArrayList<Contact>();
        risultatoFiltro = (ArrayList<Contact>) results.values;

        MyAdapter filteredAdapter = new MyAdapter(_ctx,R.layout.listview,risultatoFiltro);

        MainActivity.lv.setAdapter(filteredAdapter);

        notifyDataSetChanged();
    }
} 
```

**编辑**

编辑 publishResults 方法：

```
protected void publishResults(CharSequence constraint, FilterResults results) 
    {
        if (results.count == 0)
            notifyDataSetInvalidated();
        else
        {
            ArrayList<Contact> risultatoFiltro = (ArrayList<Contact>) results.values;

            notifyDataSetChanged();
            clear();

            //Add the items back in
            for (Iterator<Contact> iterator = risultatoFiltro.iterator(); iterator.hasNext();) 
            {
                Contact contactList = (Contact) iterator.next();
                add(contactList);
            }
        }
    } 
```

现在过滤效果很好，但如果我删除一些字符，列表不会更新！

示例：写“丹尼尔”。如果我删除除“D”之外的所有内容，则列表仍为“丹尼尔”！如果我删除“D”，则列表不是最初的列表，但它给了我一个空列表！

你能帮我弄清楚这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:09:22.420

尝试以下方式：

```
@Override
public void publishResults(CharSequence constraint, FilterResults results) {

        List<T> filtered = (ArrayList<T>) results.values;
        adapter.notifyDataSetChanged();
        adapter.clear();
        if (filtered != null) {
            for (int i = 0; i < filtered.size(); i++)
                adapter.add(filtered.get(i));
        }
        adapter.notifyDataSetInvalidated();

} 
```

# ios - 在 ios 中传递俄罗斯 RSS 提要

> ID：13817785
> 
> 赞同：1
> 
> 时间：2012-12-11T10:01:42.723
> 
> 标签：ios, encoding

我正在使用 NSURLCONnection 解析俄罗斯 RSS。我面临的问题是当我解析

我现在得到俄语字符串，我正在尝试将其转换为字典但无法转换，因为它总是返回 nil。

这是我的代码

```
NSString*     responseStr = [[NSString alloc] initWithData:responseData        encoding:NSUTF16StringEncoding];
NSError*      error;
NSDictionary* dicfromStr  = [XMLReader dictionaryForXMLString:responseStr error:&error]; 
```

这是我得到的示例 xml

```
<rss version="2.0">
  <channel>
    <title>TEST DATA</title>
    <language>ru</language>
    <description>TEST DATA</description>
    <link>http://russianwave.com.cy/news/rss/</link>
    <pubDate>Wed, 12 Dec 2012 10:44:06 +0600</pubDate>
    <generator>KohanaPHP</generator>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/187</link>
      <guid>http://russianwave.com.cy/news/show/187</guid>
      <description>TEST DATA</description>
      <pubDate>Tue, 11 Dec 2012 18:45:13 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/186</link>
      <guid>http://russianwave.com.cy/news/show/186</guid>
      <description>manish jain</description>
      <pubDate>Tue, 11 Dec 2012 17:44:10 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/185</link>
      <guid>http://russianwave.com.cy/news/show/185</guid>
      <description>manish jain</description>
      <pubDate>Tue, 11 Dec 2012 15:39:22 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/184</link>
      <guid>http://russianwave.com.cy/news/show/184</guid>
      <description>manish jain</description>
      <pubDate>Mon, 10 Dec 2012 19:36:05 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/183</link>
      <guid>http://russianwave.com.cy/news/show/183</guid>
      <description>manish jain</description>
      <pubDate>Mon, 10 Dec 2012 19:26:48 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/182</link>
      <guid>http://russianwave.com.cy/news/show/182</guid>
      <description>manish jain</description>
      <pubDate>Mon, 10 Dec 2012 16:00:43 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/181</link>
      <guid>http://russianwave.com.cy/news/show/181</guid>
      <description>manish jain</description>
      <pubDate>Fri, 07 Dec 2012 20:00:01 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/180</link>
      <guid>http://russianwave.com.cy/news/show/180</guid>
      <description>manish jain</description>
      <pubDate>Fri, 07 Dec 2012 19:54:40 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/179</link>
      <guid>http://russianwave.com.cy/news/show/179</guid>
      <description>manish jain</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/178</link>
      <guid>http://russianwave.com.cy/news/show/178</guid>
      <description>manish jain</description>
      <pubDate>Thu, 06 Dec 2012 21:20:57 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/177</link>
      <guid>http://russianwave.com.cy/news/show/177</guid>
      <description>manish jain</description>
      <pubDate>Thu, 06 Dec 2012 21:16:06 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/176</link>
      <guid>http://russianwave.com.cy/news/show/176</guid>
      <description>manish jain</description>
      <pubDate>Thu, 06 Dec 2012 15:43:40 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/175</link>
      <guid>http://russianwave.com.cy/news/show/175</guid>
      <description>manish jain</description>
      <pubDate>Wed, 05 Dec 2012 19:30:46 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/174</link>
      <guid>http://russianwave.com.cy/news/show/174</guid>
      <description>manish jain</description>
      <pubDate>Wed, 05 Dec 2012 19:26:38 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/173</link>
      <guid>http://russianwave.com.cy/news/show/173</guid>
      <description>manish jain</description>
      <pubDate>Wed, 05 Dec 2012 15:41:08 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/171</link>
      <guid>http://russianwave.com.cy/news/show/171</guid>
      <description>manish jain</description>
      <pubDate>Tue, 04 Dec 2012 19:11:41 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/170</link>
      <guid>http://russianwave.com.cy/news/show/170</guid>
      <description>manish jain</description>
      <pubDate>Tue, 04 Dec 2012 19:05:07 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/169</link>
      <guid>http://russianwave.com.cy/news/show/169</guid>
      <description>manish jain</description>
      <pubDate>Tue, 04 Dec 2012 18:53:50 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/168</link>
      <guid>http://russianwave.com.cy/news/show/168</guid>
      <description>manish jain</description>
      <pubDate>Tue, 04 Dec 2012 18:49:23 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/167</link>
      <guid>http://russianwave.com.cy/news/show/167</guid>
      <description>manish jain</description>
      <pubDate>Mon, 03 Dec 2012 20:19:42 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/166</link>
      <guid>http://russianwave.com.cy/news/show/166</guid>
      <description>manish jain</description>
      <pubDate>Mon, 03 Dec 2012 18:56:53 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/164</link>
      <guid>http://russianwave.com.cy/news/show/164</guid>
      <description>manish jain</description>
      <pubDate>Mon, 03 Dec 2012 17:03:21 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/162</link>
      <guid>http://russianwave.com.cy/news/show/162</guid>
      <description>manish jain</description>
      <pubDate>Fri, 30 Nov 2012 16:28:05 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/161</link>
      <guid>http://russianwave.com.cy/news/show/161</guid>
      <description>manish jain</description>
      <pubDate>Fri, 30 Nov 2012 16:21:56 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/159</link>
      <guid>http://russianwave.com.cy/news/show/159</guid>
      <description>manish jain</description>
      <pubDate>Thu, 29 Nov 2012 19:11:38 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/158</link>
      <guid>http://russianwave.com.cy/news/show/158</guid>
      <description>manish jain</description>
      <pubDate>Thu, 29 Nov 2012 19:06:06 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/157</link>
      <guid>http://russianwave.com.cy/news/show/157</guid>
      <description>manish jain</description>
      <pubDate>Thu, 29 Nov 2012 18:27:57 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/155</link>
      <guid>http://russianwave.com.cy/news/show/155</guid>
      <description>manish jain</description>
      <pubDate>Wed, 28 Nov 2012 19:27:58 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/154</link>
      <guid>http://russianwave.com.cy/news/show/154</guid>
      <description>manish jain</description>
      <pubDate>Wed, 28 Nov 2012 19:24:02 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/152</link>
      <guid>http://russianwave.com.cy/news/show/152</guid>
      <description>manish jain</description>
      <pubDate>Tue, 27 Nov 2012 19:02:32 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/151</link>
      <guid>http://russianwave.com.cy/news/show/151</guid>
      <description>manish jain</description>
      <pubDate>Tue, 27 Nov 2012 18:53:11 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/150</link>
      <guid>http://russianwave.com.cy/news/show/150</guid>
      <description>manish jain</description>
      <pubDate>Tue, 27 Nov 2012 18:41:16 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/149</link>
      <guid>http://russianwave.com.cy/news/show/149</guid>
      <description>manish jain</description>
      <pubDate>Tue, 27 Nov 2012 18:26:07 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/147</link>
      <guid>http://russianwave.com.cy/news/show/147</guid>
      <description>manish jain</description>
      <pubDate>Mon, 26 Nov 2012 21:21:23 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/141</link>
      <guid>http://russianwave.com.cy/news/show/141</guid>
      <description>manish jain</description>
      <pubDate>Thu, 22 Nov 2012 20:34:33 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/140</link>
      <guid>http://russianwave.com.cy/news/show/140</guid>
      <description>manish jain</description>
      <pubDate>Thu, 22 Nov 2012 20:19:16 +0600</pubDate>
    </item>
    <item>
      <title>Michael Jackson. The legend continues.</title>
      <link>http://russianwave.com.cy/news/show/136</link>
      <guid>http://russianwave.com.cy/news/show/136</guid>
      <description>manish jain</description>
      <pubDate>Thu, 22 Nov 2012 15:33:42 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/134</link>
      <guid>http://russianwave.com.cy/news/show/134</guid>
      <description>manish jain</description>
      <pubDate>Wed, 21 Nov 2012 20:34:39 +0600</pubDate>
    </item>
    <item>
      <title>The Cyprus investors show 2013</title>
      <link>http://russianwave.com.cy/news/show/133</link>
      <guid>http://russianwave.com.cy/news/show/133</guid>
      <description>manish jain</description>
      <pubDate>Wed, 21 Nov 2012 20:31:56 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/132</link>
      <guid>http://russianwave.com.cy/news/show/132</guid>
      <description>manish jain</description>
      <pubDate>Wed, 21 Nov 2012 20:25:09 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/128</link>
      <guid>http://russianwave.com.cy/news/show/128</guid>
      <description>manish jain</description>
      <pubDate>Tue, 20 Nov 2012 19:22:08 +0600</pubDate>
    </item>
    <item>
      <title>TEST DATA</title>
      <link>http://russianwave.com.cy/news/show/100</link>
      <guid>http://russianwave.com.cy/news/show/100</guid>
      <description>manish jain</description>
      <pubDate>Thu, 08 Nov 2012 20:35:04 +0600</pubDate>
    </item>
  </channel>
</rss> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:11:08.527

假设 XML 格式正确（在您显示完整文档之前我们无法知道），您显示的部分仍然是无效 XML 的一部分。`&nbsp`在明确声明之前，您不能在 XML 文档中使用实体：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xml:spaces [ <!ENTITY nbsp "&#160;"> ]>
<rss version="2.0">
    <channel>
        <title>\u041d\u043e\u0432\u043e\u0441\u0442\u0438</title>
        <language>ru</language> ..... 
```

详情请查看[参考资料](http://www.w3schools.com/xml/xml_dtd.asp)。

# mongodb - mongodbrestore 似乎没有恢复所有文件

> ID：13817789
> 
> 赞同：2
> 
> 时间：2012-12-11T10:02:04.290
> 
> 标签：mongodb, mongorestore

在dump/enron 目录messages.bson 和messages.medata.json 文件中。它应该恢复 120,477 个文档。我想从中恢复数据。我输入命令：

```
mongorestore -v --db enron --drop  dump/enron 
```

命令完成后，我收到一条消息：发现 120477 个对象不知道如何处理文件 [dump/enron/messages.metadata.json]

但在收集消息中，我看到 112196 个文档使用：

```
db.messages.count() 
```

你能告诉我它有什么问题吗？命令的输出：

```
c:\mongodb\mongodb-win32-i386-2.0.5\bin>mongorestore -v  dump/enron/
Tue Dec 11 14:17:39 creating new connection to:127.0.0.1
Tue Dec 11 14:17:39 BackgroundJob starting: ConnectBG
Tue Dec 11 14:17:39 connected connection!
connected to: 127.0.0.1
Tue Dec 11 14:17:39 dump/enron/messages.bson
Tue Dec 11 14:17:39      going into namespace [enron.messages]
Tue Dec 11 14:17:39      file size: 396236668
                126878231/396236668     32%
                270206614/396236668     68%
                375698921/396236668     94%
                381433738/396236668     96%
                387378348/396236668     97%
                394626836/396236668     99%
120477 objects found
don't know what to do with file [dump/enron/messages.metadata.json] 
```

消息：“不知道如何处理文件 [dump/enron/messages.metadata.json]”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:12:15.740

**这应该有效：**

```
ssharma$ mongorestore -d enron --collection messages /dump/enron/messages.bson
connected to: 127.0.0.1
Thu Mar  7 13:05:05 /dump/enron/messages.bson
Thu Mar  7 13:05:05     going into namespace [enron.messages]
Thu Mar  7 13:05:09         74234213/396236668  18% (bytes)
Thu Mar  7 13:05:12         126614885/396236668 31% (bytes)
Thu Mar  7 13:05:15         192098158/396236668 48% (bytes)
Thu Mar  7 13:05:18         208083274/396236668 52% (bytes)
Thu Mar  7 13:05:21         231816712/396236668 58% (bytes)
Thu Mar  7 13:05:24         293564538/396236668 74% (bytes)
Thu Mar  7 13:05:27         356071219/396236668 89% (bytes)
Thu Mar  7 13:05:30         379387449/396236668 95% (bytes)
120477 objects found
Thu Mar  7 13:05:32     Creating index: { key: { _id: 1 }, ns: "enron.messages", name: "_id_" }
ssharma$ ./mongo
MongoDB shell version: 2.2.2
connecting to: test
> use enron
switched to db enron
> db.messages.count()
120477 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:59:15.603

恢复 bson 文件时需要指定数据库和集合。

它对我有用：

```
$ mongodump -d mark --collection coll 
connected to: 127.0.0.1
DATABASE: mark   to     dump/mark
    mark.coll to dump/mark/coll.bson
         1000 objects 
```

和

```
 $ mongorestore -d mark --collection newcoll dump/mark/
    connected to: 127.0.0.1
    Wed Aug 29 11:48:39 dump/mark/coll.bson
    Wed Aug 29 11:48:39      going into namespace [mark.newcoll]
    1000 objects found 
```

你能试一下吗 -

```
mongorestore -d enron --collection messages /dump/enron/ 
```

# android - Android：随机异常

> ID：13817790
> 
> 赞同：1
> 
> 时间：2012-12-11T10:02:09.937
> 
> 标签：android, exception, random, stack

在我的应用程序上更改活动后，有时我会遇到异常，我不知道可能是什么问题。此异常不会发生在相同的活动中（而是随机的）和调用的不同函数中。

这是堆栈：

```
12-11 10:48:34.677: E/AndroidRuntime(479): FATAL EXCEPTION: main
12-11 10:48:34.677: E/AndroidRuntime(479): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.apia.selfnettest/com.apia.selfnettest.TabPayments}: java.lang.NullPointerException
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.os.Looper.loop(Looper.java:130)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread.main(ActivityThread.java:3683)
12-11 10:48:34.677: E/AndroidRuntime(479):  at java.lang.reflect.Method.invokeNative(Native Method)
12-11 10:48:34.677: E/AndroidRuntime(479):  at java.lang.reflect.Method.invoke(Method.java:507)
12-11 10:48:34.677: E/AndroidRuntime(479):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-11 10:48:34.677: E/AndroidRuntime(479):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-11 10:48:34.677: E/AndroidRuntime(479):  at dalvik.system.NativeStart.main(Native Method)
12-11 10:48:34.677: E/AndroidRuntime(479): Caused by: java.lang.NullPointerException
12-11 10:48:34.677: E/AndroidRuntime(479):  at com.apia.utils.LibLayout.setDisplayMenuContent(LibLayout.java:557)
12-11 10:48:34.677: E/AndroidRuntime(479):  at com.apia.selfnettest.TabPayments.onCreate(TabPayments.java:167)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-11 10:48:34.677: E/AndroidRuntime(479):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
12-11 10:48:34.677: E/AndroidRuntime(479):  ... 11 more 
```

似乎有时，活动无法提取某些资源或打开原始文件...谢谢...

这里是“setDisplayMenuContent”的代码：

```
public static void setDisplayMenuContent(ArrayList<?> localTabMenu_records, Display display, 
        Activity myactivity, int myId, int BtnResId ) {

    int width = display.getWidth(); 
    int height = display.getHeight(); 
    int N_Tab=3;
    Button btnSelButton = null;
    Button btnUnSelButton = null;

    int Ntab= Math.min(N_Tab, 4);

    if (Ntab>0)
    {

        Button btn1 = null;
        Button btn12= null;
        Button btn2= null;
        Button btn22= null;
        Button btn3= null;  
        Button btn32 = null;
        Button btn0off= null;
        Button btn00off= null;
        Button btn1off= null;
        Button btn11off= null;
        Button btn2off= null;
        Button btn22off= null;

        if (LibController.appLogged) {
            /*ONLINE*/
            btn1 = (Button) myactivity.findViewById(R.id.menu1);
            btn12 = (Button) myactivity.findViewById(R.id.menu12);
            btn2 = (Button) myactivity.findViewById(R.id.menu2);
            btn22 = (Button) myactivity.findViewById(R.id.menu22);
            btn3 = (Button) myactivity.findViewById(R.id.menu3);    
            btn32 = (Button) myactivity.findViewById(R.id.menu32); 
        }else{
            /*OFFLINE*/
            btn0off = (Button) myactivity.findViewById(R.id.menu0off);
            btn00off = (Button) myactivity.findViewById(R.id.menu00off);
            btn1off = (Button) myactivity.findViewById(R.id.menu1off);
            btn11off = (Button) myactivity.findViewById(R.id.menu11off);
            btn2off = (Button) myactivity.findViewById(R.id.menu2off);
            btn22off = (Button) myactivity.findViewById(R.id.menu22off);

        }

        if(localTabMenu_records != null && localTabMenu_records.size() > 0){
            for(int i=0; i<localTabMenu_records.size();i++){    
                RecordTabMenu myRec = (RecordTabMenu) localTabMenu_records.get(i);

                if (LibController.appLogged) {
                    // *********** ONLINE ************  
                    if (myRec.getIdTab().equals("TabWelcome")) 
                    {
                        if (BtnResId == R.id.menu1) {
                            btnSelButton=btn1;
                            btnUnSelButton=btn12;
                        }
                        else {
                            btnSelButton=btn12;
                            btnUnSelButton=btn1;
                        }
                    }
                    else if (myRec.getIdTab().equals("TabAccount"))
                    {
                        if (BtnResId == R.id.menu2) {
                            btnSelButton=btn2;
                            btnUnSelButton=btn22;
                        }
                        else {
                            btnSelButton=btn22;
                            btnUnSelButton=btn2;
                        }
                    }
                    else if (myRec.getIdTab().equals("TabPayments"))
                    {
                        if (BtnResId == R.id.menu3) {
                            btnSelButton=btn3;
                            btnUnSelButton=btn32;
                        }
                        else {
                            btnSelButton=btn32;
                            btnUnSelButton=btn3;
                        }       
                    }    

                }else {

                    // *********** OFFLINE ************
                    if(myRec.getIdTab().equals("TabMainClass"))
                    {
                        if (BtnResId == R.id.menu0off) {
                            btnSelButton=btn0off;
                            btnUnSelButton=btn00off;
                        }
                        else {
                            btnSelButton=btn00off;
                            btnUnSelButton=btn0off;
                        }
                    }
                    else if (myRec.getIdTab().equals("TabContact")) 
                    {
                        if (BtnResId == R.id.menu1off) {
                            btnSelButton=btn1off;
                            btnUnSelButton=btn11off;
                        }
                        else {
                            btnSelButton=btn11off;
                            btnUnSelButton=btn1off;
                        }
                    }else if (myRec.getIdTab().equals("TabInfo"))   
                    {
                        if (BtnResId == R.id.menu2off) {
                            btnSelButton=btn2off;
                            btnUnSelButton=btn22off;
                        }
                        else {
                            btnSelButton=btn22off;
                            btnUnSelButton=btn2off;
                        }
                    }
                }

                String myCaptio = myRec.getTitleTab();
                setButtonPropertiesForLayout(myactivity, i, btnSelButton, height, width, Ntab , myCaptio);

                if (btnUnSelButton != null) {
                    btnUnSelButton.getLayoutParams().width = 0;  // INVISIBLE
                }

            };
        }       

    }

    Button myBtn = (Button) myactivity.findViewById(BtnResId);
    myBtn.setBackgroundResource(R.drawable.menusel);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:23:26.550

该活动`Activity myactivit`不包含具有 id 的资源`BtnResId`。

# django - Django+nginx 提供私有静态文件

> ID：13817791
> 
> 赞同：2
> 
> 时间：2012-12-11T10:02:17.847
> 
> 标签：django, nginx

我正在尝试从 nginx 和 django 提供受保护的用户文件。

nginx.conf：

```
server {

    listen 80;
    gzip off;
    expires off;

    location /static/ {
        add_header X-Static hit;
        autoindex on;
        expires off;
        root /Users/andrewshkovskii/workspace/ip_pbx/;
    }

    location / {
        proxy_pass       http://localhost:8000;
        rewrite ^/audiofiles/get/(\d+)/ /audiofiles/serve/$1/ last;
    }

    location /media/audio {
        internal;
        root   /var/ip_pbx/users;
    }
} 
```

Django视图：

```
def get(self, request, *args, **kwargs):
    audio_file = self.get_object()
    ogg_file_version = audio_file.audiofileversion_set.filter(format="ogg")
    if ogg_file_version.exists():
        ogg_file_version = ogg_file_version[0]
        res = HttpResponse()
        res["Content-type"] = "audio/ogg"
        res["X-Accel-Redirect"] = ogg_file_version.file.path
        res["Content-length"] = ogg_file_version.file.size
        return res
    return Http404() 
```

如果我尝试 GET ，比如说 localhost/audiofiles/get/74/ ，nginx 会将其重写为查看（/audiofiles/serve/74/），并且查看将返回响应，但它会在返回时响应，将尝试GET localhost:8000/%full_file_path% .. 为什么？（文件已存在..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:09:15.250

由配置出售：

```
 server {

    listen 80;
    gzip off;
    expires off;
    error_log /usr/local/Cellar/nginx/1.2.5/logs/error.log debug;

    location /static/ {
        add_header X-Static hit;
        autoindex on;
        expires off;
        root /Users/andrewshkovskii/workspace/ip_pbx/;
    }

    location / {
        proxy_pass       http://localhost:8000;
        rewrite ^/audiofiles/get/(\d+)/ /audiofiles/serve/$1/ last;
    }

    location ~ /var/ip_pbx/users_andrewshkovskii/(\d+)/(audio|calls)/(.*) {
        internal;
        root   /;
    }
} 
```

注意私有文件的位置（在我的情况下..）

# asp.net - Signalr 和 Nancyfx 集成

> ID：13817794
> 
> 赞同：2
> 
> 时间：2012-12-11T10:02:25.797
> 
> 标签：asp.net, .net, session, signalr, nancy

我的应用流程如下（为清楚起见进行了简化）：

1.  用户从“/page1”获取页面
2.  用户在页面上执行操作（添加文本、点击等），而 Signalr 将此数据传送到服务器，服务器在后台执行大量计算，并将结果返回到页面（让我们称之为*“X "* )。
3.  当用户完成页面后，他单击指向“/page2”的链接，该链接由 Nancy 返回。此页面是使用依赖于*X的**模型*构建的。

 ***那么，如何基于 X 构建该模型？Signalr 如何以 Nancy 可以接受的方式写入用户会话？**

（我正在寻找一种“干净”的方式）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T10:02:57.060

等待 Signalr 和 Nancy 的正式整合，这就是我带来的。基本上，我在两者之间共享一个 IOC 容器，并使用一个将用户映射到状态的对象（单例生命周期）。

如何使用内置的 TinyIOC 共享 IOC 容器：

1.  扩展 Signalr 的 DefaultDependencyResolver

    ```
    public class TinyIoCDependencyResolver : DefaultDependencyResolver
    {
        private readonly TinyIoCContainer m_Container;

        public TinyIoCDependencyResolver(TinyIoCContainer container)
        {
            m_Container = container;
        }

        public override object GetService(Type serviceType)
        {
            return m_Container.CanResolve(serviceType) ? m_Container.Resolve(serviceType) : base.GetService(serviceType);
        }

        public override IEnumerable<object> GetServices(Type serviceType)
        {
            var objects = m_Container.CanResolve(serviceType) ? m_Container.ResolveAll(serviceType) : new object[] { };
            return objects.Concat(base.GetServices(serviceType));
        }
    } 
    ```

2.  用我们的新的替换 Signalr 的默认 DependencyResolver

    ```
    public class Bootstrapper : DefaultNancyBootstrapper
    {
        protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
        {
            CookieBasedSessions.Enable(pipelines);

            // Replace UserToStateMap with your class of choice
            container.Register<IUserToStateMap, UserToStateMap>();

            GlobalHost.DependencyResolver = new TinyIoCDependencyResolver(container);
            RouteTable.Routes.MapHubs();
        }
    } 
    ```

3.  在集线器和 Nancy 模块中添加 IUserToStateMap 作为依赖项

    ```
    public class MyModule : NancyModule
    {
        public MyModule(IUserToStateMap userToStateMap)
        {
            Get["/"] = o =>
            {
                var userId = Session["userId"];
                var state = userToStateMap[userId];
                return state.Foo;
            };
        }
    }

    public class MyHub : Hub
    {
        private readonly IUserToStateMap m_UserToStateMap;

        public MyHub(IUserToStateMap userToStateMap)
        {
            m_UserToStateMap = userToStateMap;
        }

        public string MySignalrMethod(string userId)
        {
            var state = userToStateMap[userId];
            return state.Bar;
        }
    } 
    ```

我真正想要的是一种基于连接 ID 或类似的东西在两者之间轻松共享状态的方法，但与此同时，这个解决方案对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T12:39:45.460

您是否听到寻找如何集成 Nancy 和 SignalR 的简单示例？我知道我做到了。

试试这个问题（我自己回答了）。

*   [SignalR plus NancyFX：一个简单但工作良好的例子](https://stackoverflow.com/q/16691826/776476)*

# sql - SUM DATA SELECT - 2 个具有相同 ID 的人

> ID：13817797
> 
> 赞同：1
> 
> 时间：2012-12-11T10:02:32.417
> 
> 标签：sql, sql-server, tsql

我的查询显示两个名为“Anna”、“Szymkowiak”和同一个“id”的人，但这是同一个人。我该如何总结这个？例如：id "80", "Anna", "Szymkowiak", "23", 2 -> 23 是第 20 个月加 3 的总和，2 是 Aneks 1 加 1 的总和

```
SELECT DISTINCT SBA.HRSystemId AS Id, SBA.FirstName,  SBA.Surname, 
    CASE WHEN SBA.EndDate < GETDATE() 
    THEN DATEDIFF(MONTH,SBA.StartDate,SBA.EndDate)
    ELSE DATEDIFF(MONTH,SBA.StartDate, GETDATE()) 
    END AS Miesiace_Przepracowane,
    MAX(SBC.ContractNumber) AS Aneks
    FROM SB_Applications SBA JOIN SB_Contracts SBC ON SBA.ApplicationId = SBC.ApplicationId 
    WHERE SBA.IsActiveYN = 1 AND SBA.HRSystemId != 0 AND SBC.ApplicationStatusId = 4
    GROUP BY SBA.FirstName, SBA.Surname,SBA.StartDate,SBA.EndDate,SBA.StartDate,SBA.HRSystemId,SBC.ContractNumber; 
```

我明白了：

```
id |FirstName|Surname|Miesiace_Przepracowane|Aneks
80, Anna, Szymkowiak, 20, 1
80, Anna, Szymkowiak, 3, 1
91, Jack, Sparrow, 2, 1
92, Tom, Jones, 1, 1
100, Rocky, Balboa, 3, 0 
```

这个例子不起作用 ![在此处输入图像描述](../Images/b3084e0b5c123f10742dff04ae0d0d0a.png)

感谢同事的帮助，这对我来说是非常好的培训:) 我给了你一点帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:07:35.133

当您已经拥有 GROUP BY; 时，您几乎从不想使用 DISTINCT；这是无关的。
最自然、最快捷的方法是使用派生表扩展您的查询：

```
SELECT HRSystemId, FirstName, SurName,
       Sum(Miesiace_Przepracowane) Miesiace_Przepracowane,
       MAX(Aneks) Aneks
FROM
(
    SELECT SBA.HRSystemId AS Id, SBA.FirstName,  SBA.Surname, 
        CASE WHEN SBA.EndDate < GETDATE() 
        THEN DATEDIFF(MONTH,SBA.StartDate,SBA.EndDate)
        ELSE DATEDIFF(MONTH,SBA.StartDate, GETDATE()) 
        END AS Miesiace_Przepracowane,
        MAX(SBC.ContractNumber) AS Aneks
        FROM SB_Applications SBA JOIN SB_Contracts SBC ON SBA.ApplicationId = SBC.ApplicationId 
        WHERE SBA.IsActiveYN = 1 AND SBA.HRSystemId != 0 AND SBC.ApplicationStatusId = 4
        GROUP BY SBA.FirstName, SBA.Surname,SBA.StartDate,SBA.EndDate,SBA.StartDate,SBA.HRSystemId,SBC.ContractNumber
) X
GROUP BY HRSystemId, FirstName, SurName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:08:42.757

```
Select ID,FirstName,Surname,SUM(Miesiace_Przepracowane) as Miesiace_Przepracowane,SUM(Aneks) as Aneks from
(
SELECT DISTINCT SBA.HRSystemId AS Id, SBA.FirstName,  SBA.Surname, 
    CASE WHEN SBA.EndDate < GETDATE() 
    THEN DATEDIFF(MONTH,SBA.StartDate,SBA.EndDate)
    ELSE DATEDIFF(MONTH,SBA.StartDate, GETDATE()) 
    END AS Miesiace_Przepracowane,
    MAX(SBC.ContractNumber) AS Aneks
    FROM SB_Applications SBA JOIN SB_Contracts SBC ON SBA.ApplicationId = SBC.ApplicationId 
    WHERE SBA.IsActiveYN = 1 AND SBA.HRSystemId != 0 AND SBC.ApplicationStatusId = 4
    GROUP BY SBA.FirstName, SBA.Surname,SBA.StartDate,SBA.EndDate,SBA.StartDate,SBA.HRSystemId,SBC.ContractNumber;
) a
Group by  ID,FirstName,Surname 
```

# sed - 如何使用 sed 替换第 n 次出现的字符串

> ID：13817798
> 
> 赞同：22
> 
> 时间：2012-12-11T10:02:36.437
> 
> 标签：sed

有没有办法使用 sed 替换文件中第 n 次出现的字符串？

我 `sed -i '0,/jack.*/ s//jill/'`用来替换第一次出现。

我如何更改它以替换第 n 次出现？

我的文件内容如下：

```
first line
second line
third line
jack=1
fifth line
jack=
seventh line 
```

我不知道 之后的价值`jack=`，它可以是任何东西或什么都不是。

我想`jack=`用`jill`.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-11T10:16:31.280

首先`^`使用`tr`. 您需要这样做才能为`sed`. 然后将它传递给`sed`并告诉它替换第 n 次出现的字符串。最后，将输出传回`tr`以重新创建换行符。

对于 n=2，命令是：

```
$ tr '\n' '^' < file | sed 's/jack/jill/2' | tr '^' '\n'
first line
second line
third line
jack
fifth line
jill
seventh line 
```

**更新：**

也可以`sed`使用以下命令完成，无需先更改换行符：

```
$ sed ':a;N;$!ba;s/jack/jill/2' file 
```

或者，使用`awk`：

```
$ awk '/jack/{c+=1}{if(c==2){sub("jack","jill",$0)};print}' file 
```

# java - 如何在android中转换时间格式？

> ID：13817799
> 
> 赞同：0
> 
> 时间：2012-12-11T10:02:35.350
> 
> 标签：java, android

我有这样的json响应：

```
{
    "Modification": [
        {
            "lastModifiedTime": "1354024211735"
        }
    ]
} 
```

现在我想像这样转换**lastModifiedTime** **10 Dec 2012 18:41** *(DD/MM/Year time)*。我将如何在 Java 中实现此输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:04:58.917

使用`SimpleDateFormat`：

```
 SimpleDateFormat curFormater = new SimpleDateFormat("dd MMM yyyy HH:mm"); 
 Date dateObj = curFormater.parse(jsonObject.getString("lastModifiedTime")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:24:23.807

您可以使用`SimpleDateFormat`, from `Java`：

```
SimpleDateFormat format = new SimpleDateFormat("dd MMM yyyy HH:mm", Locale.US);
String date1 = format.format(new Date(1354024211735l)); 
```

输出：**2012 年 11 月 27 日 15:50**

```
DateFormat dateFormat = DateFormat.getDateTimeInstance();
String date2 = dateFormat.format(new Date(1354024211735l)); 
```

输出：**2012 年 11 月 27 日下午 3:50:11**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:09:21.847

```
Date date = new Date(Long.parseLong(json.getString("lastModifiedTime"));
return new SimpleDateFormat("dd MMM yyyy HH:mm").format(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:10:36.503

试试这个链接

```
public class Test {

/**
 * Main Method
 */
public static void main(String[] args) {
    System.out.println(getDate(82233213123L, "dd/MM/yyyy HH:mm"));
}

/**
 * Return date in specified format.
 * @param milliSeconds Date in milliseconds
 * @param dateFormat Date format 
 * @return String representing date in specified format
 */
public static String getDate(long milliSeconds, String dateFormat)
{
    // Create a DateFormatter object for displaying date in specified format.
    DateFormat formatter = new SimpleDateFormat(dateFormat);

    // Create a calendar object that will convert the date and time value in milliseconds to date. 
     Calendar calendar = Calendar.getInstance();
     calendar.setTimeInMillis(milliSeconds);
     return formatter.format(calendar.getTime());
}
} 
```

希望这可以帮助

# sql-server - 在 SSIS 中执行 6 条 SQL 语句

> ID：13817800
> 
> 赞同：0
> 
> 时间：2012-12-11T10:02:37.590
> 
> 标签：sql-server, ssis

为了实现我的目标表，我得出的唯一方法是通过 6 个 SQL 语句。并且它们必须按顺序执行，即 1 然后 2 然后 3.....6。在此过程中，我使用了 5 个所谓的“临时/居民表”。SSIS 中有吗？我想知道我是否可以在 SSIS 中重用这 6 个语句。意思是运行这 6 个语句的流程。可能吗？如果是这样，介意指导我如何？控制流中包含哪些内容以及数据流中包含哪些内容？

谢谢，
10e5x

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T11:41:00.137

我怀疑您将问题复杂化了，您可以将所有 6 条语句放入一个“执行 SQL 任务”控制流项中，或者您可以将它们全部放入一个存储过程中，其中 SQL 语句以正确的顺序执行并通过“执行 SQL 任务”。

我个人会将它们放入存储过程中。

数据流用于数据，即移动数据块，控制流用于控制操作序列，其中一个或多个可能是数据流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T09:25:15.587

**您可以使用Common Table Expressions**将 6 个相互依赖的 SQL 语句组合为一个。例如，我只展示了 3 个表，C1、C2、C3 和一个最终的选择语句。不要忘记末尾的分号。

```
WITH C1 AS
(
  SELECT Col1,Col2,Col3
  FROM Table1
),
C2 AS
(
  SELECT Col1, count(Col1) as numOfCol1
  FROM C1
  GROUP BY Col1
),
C3 AS
(
  Select substring(Col1,1,10) as FirstName, substring(Col1,10,10) as LastName, numOfCol1
  FROM C2
),
SELECT *
FROM C3
WHERE numofCol1 > 10; 
```

# java - 在 iText 中使用 PdfGraphics2D 绘图时使用哪些单位

> ID：13817802
> 
> 赞同：1
> 
> 时间：2012-12-11T10:02:44.377
> 
> 标签：java, itext

当我使用这样的图形上下文绘制 awt 组件时：

```
PdfTemplate template = contentByte.createTemplate(400, 400);
Graphics2D g2d = template.createGraphics(400, 400);

myComponent.paint(g2d);
g2d.dispose(); 
```

这里使用什么单位？

创建模板时，我应该使用用户单位（pt），对吗？这是否意味着在绘图本身中也有使用的点？

假设 awt 组件中有一个 100x100 像素大小的图像。它是通过调用 g2d.drawImage(image) 来绘制的。但是如果单位是点，图像会比它应该的大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:30:59.390

默认情况下，用户单位对应于印刷点，但您可以在 PdfWriter 设置中更改此设置（您可以将其从 1 更改为 75000）。

如果您有 100x100 像素的图像，那么 iText 会将其解释为 100x100 像素的图像。我们知道这并不总是正确的，但是如果没有分辨率值，px 值就没有真正的意义。

# c++ - 返回空集的函数

> ID：13817806
> 
> 赞同：1
> 
> 时间：2012-12-11T10:03:02.287
> 
> 标签：c++

我有以下功能：

```
ItemSet* Library::itemsForKeyword(const string& keyword)
{
    ItemSet temp;

    for(it=bookList.begin();it!=bookList.end();it++){
        if(it->getPtr()->findKeyWord(it->getPtr()->keywordsList, keyword))
            temp.insert(*it);
    }

    ItemSet* temp2 = &temp;
    return temp2;
} 
```

ItemSet 是一个包含 ItemPtr 实例的集合，其中包含指向派生类实例的指针。'it' 是Library 中定义的迭代器，findKeyWord 是一个将keywordsList 与关键字进行比较以确定该关键字是否在该列表中的函数。如果它返回 true，那么我取消对迭代器的引用，并将它当前正在迭代的实例添加到 temp。我的问题是，当循环完成时，我返回 temp2，但它返回空，并在我的打印函数打印它时导致错误。为什么返回是空的？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:05:03.100

您正在返回一个指向本地对象的指针，该对象在从函数返回时被破坏。那肯定是未定义的行为。

另外，我不明白为什么需要返回指针。您可以返回对象本身：

```
ItemSet Library::itemsForKeyword(const string& keyword)
{
   ItemSet temp;
   //your code
   return temp;
} 
```

如果您需要返回指针，那么我建议您返回智能指针，而不是原始指针。

```
std::unique_ptr<ItemSet> Library::itemsForKeyword(const string& keyword)
{
   std::unique_ptr<ItemSet> temp(new ItemSet());
   //your code, use this syntax =>  temp->insert(*it);
   return std::move(temp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:04:58.207

您正在返回局部变量的地址，这将不起作用。

要么提供一个项目作为你修改的函数的参数，要么在你的函数中分配一个项目并返回它的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:25:23.897

在您与讲师发表评论后，主要代码......

```
ItemSet* Library::itemsForKeyword(const string& keyword)
{
    ItemSet* p_temp = new ItemSet;

    for(it=bookList.begin();it!=bookList.end();it++){
        if(it->getPtr()->findKeyWord(it->getPtr()->keywordsList, keyword))
            p_temp->insert(*it);
    }

    return p_temp;
} 
```

编辑：您应该向您的讲师@Nawaz 示例展示:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:05:08.653

您不能返回分配在堆栈上的对象的地址。函数返回后，堆栈上的对象被销毁并且指针指向一些垃圾。

# ios - AIR for iOS 应用程序在 iOS 5.1 上崩溃

> ID：13817808
> 
> 赞同：1
> 
> 时间：2012-12-11T10:03:07.560
> 
> 标签：ios, air

我正在开发一个 AIR 应用程序，它以 swf 格式打包多个视频文件。该应用程序的用户应该通过创建这些 swf 文件的序列来创建电影。ipa 文件大小约为 200MB。我已经做了一些图形优化，例如尽可能使用位图，避免使用过滤器和混合模式等。该应用程序在 iOS6/iPad3 上运行良好，但在 iOS5.1/iPad3 上崩溃。在 Mac 上使用 xcode 检查设备日志后，该应用程序似乎由于内存不足而崩溃。真正的问题似乎是加载 swfs，每次加载 swf 都会增加内存使用量。Loader.unload() 方法在 iOS 上不起作用，所以我似乎走到了死胡同。我不知道如何在不卸载的情况下解决这个内存问题。

我尝试了最新的 AIR SDK 3.6 Beta，但视频 swf 无法加载，因此我无法使用该应用程序。我已将应用程序域设置为当前域指定了加载程序上下文。根据 adobe labs 页面，他们在 AIR 3.6 中添加了对多个 swf 的打包和加载以及更好的内存管理的支持，但是在我可以加载 swf 之前它对我没有用处。

我正在使用以下设置：Flash Professional CS6 AIR SDK 3.5.0.600 iPad 3/iOS 5.1

我真的很感激在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:44:20.883

也许对您的情况也有帮助：在 AIR 3.5 中处理视频时，我经常崩溃。将渲染模式设置为直接有助于解决 AIR 运行时的这个错误。你试过了吗？

# java - tomcat接收数据监听器

> ID：13817809
> 
> 赞同：-3
> 
> 时间：2012-12-11T10:03:09.307
> 
> 标签：java, tomcat

我正在使用将数据发送到本地 tomcat 服务器的应用程序。

所以我的问题是，如何用 java 处理在 tomcat 中接收到的数据？

有人可以给我一个如何使用监听器的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:27:17.467

构建一个 Java Web 应用程序并将其部署到您的 tomcat 服务器。

Web 应用程序将需要处理发送到 Tomcat 的任何请求。

做一些阅读： [http ://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp.html)

# objective-c - NSString 和崩溃

> ID：13817813
> 
> 赞同：0
> 
> 时间：2012-12-11T10:03:23.057
> 
> 标签：objective-c, ios, nsstring

我有这个代码：

```
-(void)getData:(NSString *)data: (id) tv: (id) soc
{
NSLog(@"\nin get data with data\n");
NSLog(data); 
```

几个小时后，应用程序崩溃，它使用数据获取数据并且不打印数据，因此它在打印数据时崩溃。调试以字符串长度函数之类的方式引用失败。在 XCode 中，数据有一个警告，表明它不是字符串文字并且可能不安全。现在我的经验告诉我，最可能的罪魁祸首是数据不知何故为空。但它还在日志中打印了一些看起来像是收到典型消息的东西。它说它有来自套接字的 131 个字节。当我测试并且它上次崩溃时它有 189 个字节。但它从不打印它。

数据从套接字发送进来，就像接收数据一样：

```
UInt8 buffer[len];
NSLog(@"Received %d bytes from socket %d\n", 
      len, CFSocketGetNative(s));
CFDataGetBytes(df, range, buffer);
NSString *oldtext = [mTextViewAlias text];

char buffer2[len];
for(int a=0; a<len; a++)
   buffer2[a]=buffer[a];

NSMutableData *buffer3 = [[NSMutableData alloc] init];
[buffer3 appendBytes:buffer2 length:len];
NSString *newdata = [[NSString alloc] initWithData: buffer3 encoding:NSASCIIStringEncoding]; 
```

并且对打印数据时崩溃的类方法的调用只是：

```
[mytelnet getData:newdata:mTextViewAlias:(__bridge id)(s)]; 
```

我会不会有内存泄漏或其他什么，几个小时后我的内存不足导致新数据的分配为空，即使我从大约 100 个字节开始？只有当我尝试在 nslog 中打印数据时它才会崩溃，如果它未能分配内存，它不会更早崩溃？

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:14:22.470

代替

```
NSLog(data); 
```

采用

```
NSLog(@"%@",data); 
```

这可能无法解决您的根本原因，但您可以摆脱警告，并且可能会获得一些更合理和有用的调试输出。

你也可以摆脱那次崩溃。然而，这不是一个承诺。

# java - 如何将我的 web 应用程序同步到我的数据库？

> ID：13817817
> 
> 赞同：0
> 
> 时间：2012-12-11T10:03:37.310
> 
> 标签：java, database, jakarta-ee, jpa, jpa-2.0

我有一个 Java Web 应用程序，我正在通过 JPA2 (EclipseLink) 访问一个 Oracle 11g 数据库

现在必须对存储的数据进行一些更改，但我的应用程序仍在缓存旧值。

**问题：**如何强制我的应用程序删除整个缓存并从数据库重新加载数据（在应用程序运行时）？

我尝试了以下方法，但似乎没有效果：

```
@ManagedBean
@SessionScoped
public class CacheEvictall implements Serializable {
    // (...)

    public void evictDatabaseCache() {
        // clear persistence cache
        EntityManager em = emf.createEntityManager();

        if (em != null) {
            LOGGER.info("Evicting database cache!");
            try {
                utx.begin();
                emf.getCache().evict(FooClass.class);
                emf.getCache().evict(BarClass.class);
                // or: emf.getCache().evictAll();
                em.flush();
                utx.commit();
            } catch (Exception e) {                
                e.printStackTrace();
            }
        } else {
            LOGGER.log(Level.WARNING, "No EntityManager! Cannot evict cache!");
        }
    }
} 
```

我什至重新启动了应用程序服务器（Glassfish v3.1.2）并重新部署了应用程序本身，但效果相同：没有任何反应。

提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:48:57.147

evict 将使缓存失效并确保下一个查询从数据库返回数据。

如果您重新启动应用程序服务器，但仍然看不到更改，那么我的猜测是您没有更改数据。检查您是否提交了事务，并检查您是否正在更新正确的数据库。还要确保您没有在启动时删除和重新创建表。

# iphone - 从通讯录中获取记录时应用程序崩溃

> ID：13817829
> 
> 赞同：1
> 
> 时间：2012-12-11T10:04:14.660
> 
> 标签：iphone, ios, addressbook

我需要从通讯录中获取记录。我正在使用 ABPeoplePickerNavigationController 这样做。在获取记录时，我正在设置一个检查条件来检查记录是否存在。例如，要检查是否有名字，我正在使用以下代码

```
NSString *fname;
CFTypeRef fnameProperty = ABRecordCopyValue(person, kABPersonFirstNameProperty);
if (ABRecordCopyValue(person, kABPersonFirstNameProperty)) {
    fname = (__bridge NSString*)fnameProperty;
}
else{
    fname = @"";
} 
```

该代码非常适用于 kABPersonFirstNameProperty。

但是当我使用以下代码检查电子邮件属性时

```
ABMultiValueRef emailProperty = ABRecordCopyValue(person, kABPersonEmailProperty);
NSLog(@"%@",emailProperty);
NSString *email;
if (ABRecordCopyValue(person, kABPersonEmailProperty)) {
    email = (__bridge NSString*)ABMultiValueCopyValueAtIndex(emailProperty, 0);
}
else {
   email = @"";
} 
```

如果 kABPersonEmailProperty 为 nil，我的应用程序崩溃（没有为该人存储电子邮件属性）

有人可以解释一下为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:28:50.620

这是我的工作版本，看看这是否有效。

```
//Email
NSString* email = nil;
ABMultiValueRef emailNum = ABRecordCopyValue(person,
                                                 kABPersonEmailProperty);
if (ABMultiValueGetCount(emailNum) > 0) {
    email = (__bridge_transfer NSString*)
    ABMultiValueCopyValueAtIndex(emailNum, 0);
} else {
    email = @"";
} 
```

# sql-server - SSRS 中的菜单创建

> ID：13817834
> 
> 赞同：-1
> 
> 时间：2012-12-11T10:04:28.670
> 
> 标签：sql-server

我在该 5 个不同的报告中创建了一个报告服务，表示报告 1、报告 2、报告 3、报告 4、报告 5。所以我需要为这些报告创建一个菜单，这意味着它看起来像一个菜单，如果我单击报告 1，我需要报告 1这样的细节..我在这个领域很新，所以请以简单的方式帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:15:10.763

SSRS 报告通常包含在一个小应用程序中（通常使用 c#/vb.net 创建），以提供额外的安全性和导航选项。通过一个简单的网页，您将能够创建您的报告菜单，设置相应的样式并使用 Microsoft.Reporting.WebForms 来触发显示报告

# java - 如何在 JSTL 中使用类似 oracle 的运算符？

> ID：13817856
> 
> 赞同：1
> 
> 时间：2012-12-11T10:05:31.600
> 
> 标签：java, sql, oracle, jstl

以下我使用的代码

```
<sql:query dataSource="jdbc/crawl" var="rs">
    select * from vsites where site like %?%
    <sql:param value="${param.key}"/>
</sql:query> 
```

但它抛出异常

我的网址是：`http://localhost/c/2.jsp?key=math`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:15:13.273

像这样更改您的查询：

```
 select * from vsites where site like '%' || ? || '%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-22T08:17:43.230

您可以简单地使用：

```
SELECT * FROM question WHERE lower(question) LIKE '%${query}%'; 
```

例子 ：

```
 <sql:query dataSource="${dbsource}" var="question">                                                            
              SELECT * FROM question WHERE lower(question) LIKE '%${query}%';
 </sql:query>

 <c:forEach items="${question.rows}" var="q">
       <c:out value="${q.q_id}"/>,<c:out value="${q.question},<c:out value="${q.question}"/> 
 </c:forEach> 
```

> `you can replace <c:out value="${q.value}"/> by simply ${q.value}`

# jquery - 在 Jquery Mobile 如何使多 div 到页面的中心

> ID：13817860
> 
> 赞同：1
> 
> 时间：2012-12-11T10:05:39.247
> 
> 标签：jquery, html, css, jquery-mobile

![在此处输入图像描述](../Images/428f7d3867a774f6252abe3c3244dbd5.png)

现在我正在把它放到页面的左侧，我想把它放到页面的中心。

HTML：

```
<div id="viewMe">       
      <div class="leftelement">
          <div class="leftelement Width150">
              <a href="page1.html">
                <span class="image1">&#32;</span>
                <span>Image 1</span>
              </a>
          </div>
          <div class="leftelement Width150">
              <a href="page2.html">
                <span class="image2">&#32;</span>
                <span>Image 2</span>
              </a>
          </div>
          <div class="leftelement Width150">
              <a href="page3.html">
                <span class="image3">&#32;</span>
                <span>Image 3</span>
              </a>
          </div>
      </div>
</div> 
```

CSS：

```
.leftelement{float:left;}
.Width150 {width:150px;}
.image1 {background: url(../images/image1.png) no-repeat;height: 160px;width: 145px;display:block;}
.image2 {background: url(../images/image2.png) no-repeat;height: 160px;width: 145px;display:block;}
.image3 {background: url(../images/image3.png) no-repeat;height: 160px;width: 145px;display:block;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:31:24.957

我认为这是您正在寻找的，使用 css 调整的组合我已经修改了您的代码，因此项目浮动在中心，而无需对包含的 div 应用宽度

```
 text-align:center;
 display:inline-block; 
```

[http://jsfiddle.net/BSPVM/1/](http://jsfiddle.net/BSPVM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:01:56.873

如果您将此代码用于手机 - 您应该了解以下[`box`](http://www.w3schools.com/cssref/css3_pr_box-align.asp)属性`css3`：

```
#viewMe{
   display:box;
   box-orient:horizontal;
   box-pack:center;
   box-align:center;
} 
```

# jquery - 切换回调函数，似乎在切换完成之前执行

> ID：13817863
> 
> 赞同：1
> 
> 时间：2012-12-11T10:05:59.230
> 
> 标签：jquery, html

我正在为我的 做一个回调`toggle`，它似乎在完成之前执行`toggle`。我可以做些什么来防止这种情况发生吗？还是我只是“扭转”我的`if`

jsfiddle：[演示](http://jsfiddle.net/5R7Nf/1/)

```
$('#toggle_now').change(function () {
    $('#show_me').toggle(!this.checked, callBack());
}).change();

function callBack() {
    var $this = $('#show_me');
    if (!$this.is(':visible')) {
        $('#span_me').html('visible');
    } else {
        $('#span_me').html('hidden');        
    }
} 
```

编辑：
我有点需要 off 选项，我可以在不创建一个持续监听切换的新功能的情况下`ShowAndHide`实现 a吗？`callback function`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:07:45.690

您正在绑定对函数的调用，而不是函数本身。改成：

```
.toggle(!this.checked, callBack); //no parentheses 
```

编辑：实际上还有另一个问题；接受参数时，该[`.toggle`](http://api.jquery.com/toggle/)方法不起作用。`boolean`相反，删除第一个参数并反转您的`if`：

[http://jsfiddle.net/5R7Nf/3/](http://jsfiddle.net/5R7Nf/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:07:52.273

像这样使用它：

```
$('#toggle_now').change(function () {
    $('#show_me').toggle(!this.checked, callBack);
}).change(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:07:53.860

首先，在切换中使用“ **showOrhide** ”选项时，它**没有回调**！

您需要一个持续时间，因为这是唯一一次切换功能是异步的：

```
$('#toggle_now').on('change', function () {
    $('#show_me').toggle(this.checked);
    $('#span_me').html($('#show_me').is(':visible') ?  'visible' : 'hidden');
}).change();​ 
```

不需要回调，因为该`html()`函数在函数完成之前不会执行`toggle()`。

[小提琴](http://jsfiddle.net/3ADNg/2/)

# redis - Redis“nil”或“空列表或集合”

> ID：13817865
> 
> 赞同：8
> 
> 时间：2012-12-11T10:06:06.627
> 
> 标签：redis

我目前正在使用“set”结构使用redis。

我想知道是否可以自动清理清空“set”？

否则找到一个 cron/进程来定期清理空“集”

* * *

**更新：**

更一般的问题，“（nil）”和“（空列表或集合）”之间存在差异（内存使用）

例子：

```
sadd x 1
srem x
smembers x
(empty list or set) 
```

或者

```
sadd x 1
del x
smembers x
(nil) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T12:09:25.523

这已经是自动的了。当一个集合为空时，它会从命名空间中移除。

```
> flushall
OK
> sadd x 1 2 3
(integer) 3
> keys *
1) "x"
> srem x 1 2 3
(integer) 3
> keys *
(empty list or set) 
```

您无需执行任何特定操作即可从此行为中受益。

要回答您的第二个问题， (nil) 或 (empty list or set) 只是对客户端程序的解释。在 Redis 服务器中，在这两种情况下，条目都已被物理删除，并且相关的内存被释放。

# iphone - 处理文本字段完成编辑通知的问题

> ID：13817873
> 
> 赞同：0
> 
> 时间：2012-12-11T10:06:49.837
> 
> 标签：iphone, notifications, uitextfield

我正在使用通知中心来获取有关 uitextfield 完成编辑的通知，这是我的代码...

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(textFieldChange:) name:UITextFieldTextDidEndEditingNotification  object:nil]; 
```

和我的功能...

```
-(void)textFieldChange:(id)sender{
UITextField *my=(UITextField *)sender; // NOT WORKING

    if([my.text length]==0){
        UIAlertView *myAlert=[[UIAlertView alloc]initWithTitle:@"Please Fill This" message:@"This Field Can Not be Kept Empty!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil, nil];

    [myAlert show];

                              }
} 
```

这有什么问题？，我觉得发件人没有在文本字段中输入类型！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:12:36.987

如果你想知道 Uitextfield 什么时候完成编辑，那么你可以通过下面的代码来检查我的朋友..

```
 - (BOOL)textFieldShouldEndEditing:(UITextField *)textField 
```

如果你想使用 NSNotification 检查它，那么在调用 -(void)textFieldChange:(id)sender 方法时尝试在对象参数中发送你的文本字段对象，不要发送 nil

我不是 100% 确定这一点，但你可以试试，

让我知道它是否有效

快乐编码！！！！

# matlab - 在 MATLAB 中向量化双循环：为每一行分配表达式

> ID：13817878
> 
> 赞同：2
> 
> 时间：2012-12-11T10:07:07.690
> 
> 标签：matlab, bsxfun

我需要填写一个矩阵（size_out，size_in）。我一直在寻找类似的问题，但他们的解决方案都无法帮助我。

这是我的第一次尝试

```
for k= 0:size_out-1
    for n= 0:size_in-1
        part1= sincd(2*No-2, 2*size_in, (k+1/2)/factor -n -1/2);
        part3= sincd(2*No-2, 2*size_in, (k+1/2)/factor +n +1/2);
        part2= cos( (pi/(2*size_in) ) * ( (k+1/2)/factor -n -1/2) );
        part4= cos( (pi/(2*size_in) ) * ( (k+1/2)/factor +n +1/2) );
        A(k+1,n+1)= part1*part2+part3*part4;
    end
end 
```

我通过消除内部循环来向量化这段代码：

```
for k= 0:size_out-1
    A(k+1,1:size_in)= ...
        sincd(2*No-2, 2*size_in, (k+1/2)/factor -(0:size_in-1) -1/2 ) .* ...
        cos( pi/(2*size_in) * ( (k+1/2)/factor -(0:size_in-1) -1/2 ) ) + ...
        sincd(2*No-2, 2*size_in, (k+1/2)/factor +(0:size_in-1) +1/2 ) .* ...
        cos( pi/(2*size_in) * ( (k+1/2)/factor +(0:size_in-1) +1/2 ) );
end 
```

我的问题是：如何矢量化外循环？

我不确定 reshape&permute 或 bsxfun 的组合在这里是否有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:12:38.810

由于一些参数和函数未定义，我冒昧地定义了它们。

很高兴看到“矢量化”带来了非常好的加速——尽管它的大部分可能是 MATLAB 并行化的。这有点滥用克朗，但这是一种方法。

![加快剧情](../Images/782ca5196fee93b5b894011d0411b8a3.png)

注意这里的for循环是为了测试各种尺度

```
% // testing for a range of scales
t1 = [];
t2 = [];
scales = floor(logspace(1,3,20));
for scale = scales

    % // Some guessed parameters and large sizes
    size_out = scale;
    size_in = scale;
    No = 2; %?
    factor = 3;

    % // Arbitrary function for sincd
    sincd = @(x, y, z) x.*y.*z;

    tic
    % // Provided code
    A = zeros(size_out,size_in);
    for k= 0:size_out-1
        for n= 0:size_in-1
            part1= sincd(2*No-2, 2*size_in, (k+1/2)/factor -n -1/2);
            part3= sincd(2*No-2, 2*size_in, (k+1/2)/factor +n +1/2);
            part2= cos( (pi/(2*size_in) ) * ( (k+1/2)/factor -n -1/2) );
            part4= cos( (pi/(2*size_in) ) * ( (k+1/2)/factor +n +1/2) );
            A(k+1,n+1)= part1*part2+part3*part4;
        end
    end
    t1 = [t1; toc];

    tic 
```

在这里，我使用克罗内克张量积来构建两个矩阵，其中包含行索引和列索引，后跟一个单位矩阵，这样进入 sincd 的所有内容都是相同的形状

```
 ns = kron([1:size_in]-1,ones(1,size_out)');
    ks = kron(ones(1,size_in),[1:size_out]'-1);
    ident = ones(size_out,size_in); 
```

在这里，我只是用 ks 和 ns 替换了 k、n，以确保我保持操作元素明智且大小相同

```
 B =  sincd( 2*No-2*ident, 2*size_in*ident, (ks+1/2)/factor -ns -1/2) ...
        .* cos( (pi/(2*size_in) ) * ( (ks+1/2)/factor -ns -1/2) ) ...
      +  sincd(2*No-2*ident, 2*size_in*ident, (ks+1/2)/factor +ns +1/2) ...
         .*cos( (pi/(2*size_in) ) * ( (ks+1/2)/factor +ns +1/2) );

    t2 = [t2; toc];

    % // Should be zero
    norm(A-B)

end

loglog(scales, t1./t2)
title('speed up') 
```

# sql - Sql 嵌套分组方式

> ID：13817884
> 
> 赞同：9
> 
> 时间：2012-12-11T10:07:14.023
> 
> 标签：sql, group-by

以下查询返回许多具有相同姓名且性别 = 男性的人。

```
select  lookup_name.firstname,count(lookup_name.firstname)
from lookup_name
where gender='M'
group by firstname 
```

同样，下面的查询返回许多同名且性别 = 女性的人。

```
select  lookup_name.firstname,count(lookup_name.firstname)
from lookup_name
where gender='F'
group by firstname 
```

我需要编写一个查询来找出名字并告诉性别（无论是男性还是女性），数量更多。即数据库中该名称的较高概率是男性还是女性？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T10:11:14.620

```
SELECT firstname, Male, Female,
       case when Male=Female then 'indeterminate'
            when Male>Female then 'probably male'
            else 'probably female' end MostProbablySex
FROM (
    select firstname,
           SUM(case when gender='M' then 1 else 0 end) Male,
           SUM(case when gender='F' then 1 else 0 end) Female
    from lookup_name
    group by firstname
) X; 
```

或单程：

```
select firstname,
       CASE SIGN(2.0 * SUM(case when gender='M' then 1 else 0 end) / COUNT(*) - 1)
       WHEN -1 then 'probably female'
       WHEN 0 then 'indeterminate'
       WHEN 1 then 'probably male'
       END
from lookup_name
group by firstname; 
```

# java - Java 随机字符串类

> ID：13817886
> 
> 赞同：-3
> 
> 时间：2012-12-11T10:07:17.387
> 
> 标签：java

> **可能重复：**
> [HangMan RandomString 类](https://stackoverflow.com/questions/13818297/hangman-randomstring-class)

以下是方向：

创建一个`RandomString`类并实现以下内容：

1.  创建一个名为guess_phrases.txt 的文件，其中包含要在Hangman 游戏中猜测的短语。该文件每行有一个猜测短语。

2.  接收文件名以从中获取字符串值的构造函数。构造函数应该从文件中读入短语并将它们存储起来以备后用。

3.  从文件中返回随机字符串值的方法；在使用文件中的所有猜测短语之前，不应重复此值。

创建一个 main 方法，通过重复调用 next 并打印结果来测试 next 是否正常工作——您不应有任何重复，并且短语不应与文件中的顺序相同。

我用随机短语创建了一个名为*guess_phrases.txt的文件。*当我运行这个我得到一个错误，它也不是随机打印的，这是为什么？我怎样才能解决这个问题 ？

这就是我在 RandomString 类中所拥有的

```
public class RandomString {

    Random random = new Random();
    ArrayList<String> guessPhrases = new ArrayList<String>();
    Scanner fileScan;

    public RandomString(String guessPhrases) throws FileNotFoundException {

        // create a Scanner object to read from the file
        fileScan = new Scanner(new File("guess_phrases.txt"));

        // add all of the phrases from the file into the ArrayList
        while (fileScan.hasNext()) {

            String line = guessPhrases.nextLine(); // get input
            System.out.println(line); // print line
            guessPhrases.add(line); // add line to array list
        }
    }

    public String next() {
        int i = random.nextInt(guessPhrases.size());
        return guessPhrases.get(i);
    }

    public static void main(String[] args) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:16:21.390

由于这显然是一个家庭作业问题，我只是给你一个提示——如果文件为空（没有任何短语），你的代码会发生什么？

# php - phpmyadmin 无法从表中选择数据

> ID：13817888
> 
> 赞同：1
> 
> 时间：2012-12-11T10:07:28.190
> 
> 标签：php, phpmyadmin

我收到了这个错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost' (using password: NO)' 
```

然后我去了phpmyadmin，发现了这个：

```
#1142 - SELECT command denied to user ''@'localhost' for table 'pma_table_uiprefs' 
```

我该如何摆脱这个错误？是有权限的东西吗？请帮忙

我试过这个..没有工作：

```
GRANT SELECT ON database.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

这是在codeIgniter中：

```
> $db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = ''; 
```

我试图更改 my.ini 中的密码：

```
CHANGE MASTER TO MASTER_HOST='125.564.12.1', MASTER_PORT=3306,
#    MASTER_USER='joe', MASTER_PASSWORD='secret';

didnt work 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:19:01.863

It looks you are mixing a couple of things:

```
GRANT SELECT ON database.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

here above the user is *user* while in your codeIgniter(CI) coed it is `$db['default']['username'] = 'root';` user *root*

Even if you want to keep the same CI code then you need to specify password for user *root* which currently you are giving blank `$db['default']['password'] = '';`

# php - 守护进程在特定时间运行任务

> ID：13817890
> 
> 赞同：0
> 
> 时间：2012-12-11T10:07:34.313
> 
> 标签：php, daemon

我创建了一个运行的 PHP 守护程序。它主要关心的是按设定的时间间隔轮询 FTP 服务器。

现在，现在需要添加相同的功能，但也需要在设定的时间（比如周一晚上 7 点）。

我将如何修改服务以在一天中的特定时间执行任务？

我知道我可以做类似的事情`IF date() == date task should run then ...`，但如果其中一个循环花费的时间比正常时间长，它可能会错过运行任务。

关于如何实现这一目标的任何想法？

# xaml - 检查 Windows 8 应用商店应用程序/VS2012 中的 XAML

> ID：13817892
> 
> 赞同：8
> 
> 时间：2012-12-11T10:07:36.330
> 
> 标签：xaml, windows-8, windows-runtime, windows-store-apps, winrt-xaml

我正在寻找一种方法来检查 Windows 8 商店应用程序中运行的 XAML。本质上，我想要 firebug / chrome 检查器样式功能，我可以在其中查看运行时生成的 XAML 源代码，以调试简单的布局和样式问题。

我尝试过 Snoop、Pistachio 和 WPF Inspector，但没有一个适用于 Windows Store 应用程序。我能找到的唯一一款似乎适用于 Store 应用的是 XAML Spy，售价 90 欧元。我无法证明这笔费用是合理的。

有没有其他方法来检查正在运行的 XAML？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-28T23:18:45.627

WinRT XAML Toolkit 现在有一个实际的可视化 - 可视化树调试器。

从 NuGet 获取它：nuget.org/packages/winrtxamltoolkit.Debugging 然后调用`WinRTXamlToolkit.Debugging.DC.ShowVisualTree()`以在您的应用程序内显示调试器工具。这是第三个选项，所以现在你可以使用

*   类 -使`WinRTXAMLToolkit.Debugging.VisualTreeDebugger`您能够在 Visual Studio 中调试树
*   XAML Spy - 这是一个出色的商业可视化树调试器，在单独的窗口中运行
*   现在，WinRT XAML 工具包中的这个可视化树调试器可以在您的应用程序内部运行。

![在此处输入图像描述](../Images/4973b98d370a955deb9163c969e9f714.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T21:23:51.913

如果您需要免费工具，可以使用 WinRT XAML Toolkit 中的[VisualTreeDebugger类。](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/065e2509f66f#WinRTXamlToolkit.Debugging/VisualTreeDebugger.cs)它没有 XAML Spy 做那么多，但你得到你所支付的。我想为其添加更多功能，例如实际可视化您调试的内容，但所需的工作并不能证明时间投资是合理的 + 我不想踩到 Koen Zwikstra 的地盘。我相信他在这个工具上做得很好。无论如何 - VisualTreeDebugger 对我来说已经足够了，所以也许它对你来说也足够了。

您可以使用它的方式是将类添加到您的代码中，在您的 XAML 中添加一个引用，例如

```
xmlns:debug="WinRTXamlToolkit.Debugging" 
```

然后在要开始调试的控件上挂一个钩子，例如

```
debug:VisualTreeDebugger.BreakOnLoaded="True" 
```

这会将核心可视树详细信息作为文本转储到调试器输出窗口 (Ctrl+W,O) 中，并中断转储树的代码，您可以在其中调查“路径”变量，其中包含所有可视树元素的列表从调试控件到根目录，因此如果您需要的内容尚未转储到输出窗口中，您可以查看它们的值。

其他选项包括

```
debug:VisualTreeDebugger.BreakOnTap="True"
debug:VisualTreeDebugger.BreakOnLayoutUpdated="True"
debug:VisualTreeDebugger.BreakOnLoaded="True"
debug:VisualTreeDebugger.TraceOnTap="True"
debug:VisualTreeDebugger.TraceOnLayoutUpdated="True"
debug:VisualTreeDebugger.TraceOnLoaded="True" 
```

因为它是源代码并且是一个真正的简单类 - 您可以轻松地向代码添加额外的东西来执行您需要的任何自定义调试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T21:21:32.853

XAML 间谍是您所需要的。[您可以在http://xamlspy.com](http://xamlspy.com)找到它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-21T09:58:59.487

有一个名为 XAML Inspector 的新免费工具。它可通过 NuGet 获得。只需搜索“xamlinspector”或从项目页面获取是否：[www.xamlinspector.com](http://www.xamlinspector.com)

![在此处输入图像描述](../Images/b46d2df4a82f8051ab71659fe2e87b2a.png)

问候基督徒

# android - System.load() 上的应用程序崩溃

> ID：13817893
> 
> 赞同：1
> 
> 时间：2012-12-11T10:07:38.627
> 
> 标签：android, android-ndk

我尝试加载一个NDK库

```
 File file = new File(context.getFilesDir(), "mylib.so");
    System.load(file.getAbsolutePath());` 
```

它正常工作，但我的一些客户报告三星 Galaxy S3 上的应用程序崩溃（可能是自上次更新到 4.1.1 以来）。现在我在这里有一个 Galaxy S3，实际上它崩溃了 :( 该应用程序在 System.load() 调用期间完全崩溃，我没有收到任何异常，LogCat 中只有一条错误消息：

```
12-11 10:50:03.510: A/libc(29583): Fatal signal 11 (SIGSEGV) at 0x5d53901c (code=2), thread 29583 (trol.myapp) 
```

有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:26:37.300

使用`System.loadLibrary`而不是`System.load`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:32:33.263

@Valelik：遇到完全相同的问题：到目前为止运行良好的 NDK 库，并开始以相同的方式在 Jelly Bean 上崩溃（由于 System.load() 调用导致的 SIGSEGV）。谷歌搜索，我没有找到任何东西..在我的情况下，系统不断尝试加载库并崩溃，等等..这个问题有什么更新吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T10:16:51.233

我的猜测是，在库可以查看它的路径内存之前，文件对象正在被垃圾收集。尝试将文件保存为类变量。

# iphone - 加载视图时获得 NULL IBOutlets 的可能性是什么.. IOS

> ID：13817894
> 
> 赞同：0
> 
> 时间：2012-12-11T10:07:41.397
> 
> 标签：iphone, ios, xcode, cocoa-touch, uiview

我一直在研究IOS应用程序。在我有一个项目，其中所有源代码都在该设置中正确加载应用程序之前，现在我已将其拆分为多个项目。之后我现在面临一个问题......在 ViewDidLoad 中，按钮的 IBOutlet 都是零值，视图也加载黑色。我无法猜测是什么问题。关于可能导致这种情况的任何想法......

我已经像这样加载了我的视图......

```
 main =[[main_page_controller alloc] init];

    if (main != NULL) 
        [root.navigationController pushViewController:main animated:YES]; 
```

我不确定我需要在此处发布代码的哪一部分，以使问题更易于理解...请分享您的建议..

编辑：我运行了我的旧项目，然后尝试成功启动我的新设置应用程序。我从设备中删除了应用程序，并仅使用新设置加载，问题再次出现。那么旧设置中有什么？我在新中缺少什么... ????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:54:08.487

参考[文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/initWithNibName%3abundle%3a)

> 要使用 nib 初始化视图控制器对象，请使用 initWithNibName:bundle: 方法指定视图控制器使用的 nib 文件。然后，当视图控制器需要加载其视图时，它会使用存储在 nib 文件中的信息自动创建和配置视图。

初始化视图控制器时，并且您使用 .xib 文件作为视图，您需要调用`initWithNibName:bundle:`. 这意味着它将使用 xib 文件在`loadView`. 目前，您只是在使用`init`，这将创建一个空白`UIViewController`对象。

因此，在这种情况下，您的代码将是（假设 .xib 在主包中称为“MainViewControllerView.xib”）：

```
main =[[main_page_controller alloc] initWithNibName:@"MainViewControllerView" bundle:nil];
if (main) {
    [root.navigationController pushViewController:main animated:YES];
} 
```

还要理智地检查你的 .xib 文件，看看是否所有的`IBOutlet`s 都连接到你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:52:28.377

首先检查 xib(nib) 文件中的所有连接，如果它已经连接，则只需断开它们，清理项目**(cmd+k)**，然后再次连接连接。

查看此图像以进行连接

![在此处输入图像描述](../Images/b9ed5c779b04815bcbd6c27d858b31c2.png)

# iphone - Plist 到 UITableView

> ID：13817897
> 
> 赞同：1
> 
> 时间：2012-12-11T10:07:51.977
> 
> 标签：iphone, ios, ipad, uitableview, plist

我正在尝试使用文件中的`UITableView`信息填充 a `plist`。我不知道我哪里错了。请检查我的要求的图像和上面的代码以找出我错的地方

![先进入](../Images/604cc997951840ac51959ff009ee1b66.png) 我需要以`UITableView`数组`a, b, c`应该出现在部分字段中的方式填充上面的图像。它就在下面。但我无法填充数据，请检查我错在哪里。.

![第二](../Images/38392234735a5d321eb2ba57022766e2.png) .

```
@synthesize mySections  //array
@synthesize myData    //dictionary    

- (void)viewDidLoad
{
    [super viewDidLoad];

    //LOADING THE PLIST FILE

    //Create a string representing the file path
    NSString *plistPath = [bundle pathForResource:@"yourFilename" ofType:@"plist"];

    //Load the file in a dictionnary
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistPath];

    self.myData = dict;

    //SORTING THE DICTIONARY    
    NSArray *dicoArray = [[self.myData allKeys] sortedArrayUsingComparator:^(id firstObject, id secondObject) {
          return [((NSString *)firstObject) compare:((NSString *)secondObject) options: NSCaseInsensitiveSearch];
    }];

    self.mySections = dicoArray;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    //Return the number of sections.
    return [self.mySections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSString *key = [self.mySections objectAtIndex:section];
    NSArray *dataInSection = [self.myData objectForKey:key];
    return [dataInSection count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSString *key = [self.mySections objectAtIndex:section];
    return [NSString stringWithFormat:@"%@", key];
}

-(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
    return self.mySections;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...

    NSUInteger section = [indexPath section];
    NSUInteger row = [indexPath row];

    NSString *key = [self.mySections objectAtIndex:section];

    NSDictionary *Dic=self.myData;   
    NSArray *dataForSection = [self.myData objectForKey:Dic.allKeys];

    cell.textLabel.text = [dataForSection objectAtIndex:row];

    return cell;    

} 
```

plist的一些代码是： -

```
<plist version="1.0">
<dict>
<key>a</key>
<array>
    <dict>
        <key>Beta_Carot_(µg)</key>
        <string>0.06</string>
        <key>Cholestrl_(mg)</key>
        <string>215</string>
        <key>fdgdfg</key>
        <string>dfgdfg</string>
    </dict>
</array>
<key>b</key>
<array>
    <dict>
        <key>Alpha_Carot_(µg)</key>
        <string>0</string>
        <key>gdfg</key>
        <string>fdgdfg</string>
    </dict>
</array>
<key>c</key>
<array>
    <dict>
        <key>Alpha_Carot_(µg)</key>
        <string>0</string>
        <key>Ash_(g)</key>
        <string>0</string>
        <key>Beta_Caro</key>
        <string>193</string>
        <key>Choline_Tot_ (mg)</key>
        <string>22.3</string>
        <key>dgd</key>
        <string>dgdf</string>
    </dict>
</array>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:30:52.803

在确定每个部分的行数时，您需要计算正确数据结构中的元素数。所以在`- tableView: numberOfRowsInSection:`你需要有

```
NSArray *dataInSection = [[self.myData objectForKey:key] objectAtIndex:0];
return [dataInSection count]; 
```

中也有问题`- tableView: cellForRowAtIndexPath:`。您创建了正确的键来获取您的部分的数据，`*key`但随后您将`Dic.allKeys`其用作从 中检索数据的键`self.myData`。因此，当您设置`*dataForSection`.

所以改变这些行：

```
NSString *key = [self.mySections objectAtIndex:section];

NSDictionary *Dic=self.myData;   
NSArray *dataForSection = [self.myData objectForKey:Dic.allKeys];

cell.textLabel.text = [dataForSection objectAtIndex:row]; 
```

至：

```
NSString *key = [self.mySections objectAtIndex:section];
NSDictionary *dataForSection = [[self.myData objectForKey:key] objectAtIndex:0];

cell.textLabel.text = [[dataForSection allKeys] objectAtIndex:row]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:29:42.237

我认为您没有深入了解数据层次结构。在`numberOfRowsInSection:`您获得根级字典中键的值时：看起来这总是`NSArray`只有一个项目：字典。你可能想要类似的东西

```
...
NSDictionary *dataInSection = [[self.myData objectForKey:key] objectAtIndex:0];
return [dataInSection count]; 
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:52:28.037

据我说，你在从 plist 获取数据时犯了一些错误，请试试这个 - (void)viewDidLoad { [super viewDidLoad];

```
//LOADING THE PLIST FILE

//Create a string representing the file path
NSString *plistPath = [bundle pathForResource:@"yourFilename" ofType:@"plist"];
NSMutableArray *listArray=[NSMutableArray arrayWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"yourFilename" ofType:@"plist"]];

self.sections = [[NSMutableDictionary alloc] init];

} 
```

然后根据您的需要从`plist`数据中设置您的数据作为一个数组，然后`dict`可能会帮助您获得这些信息..

# asp.net - 从后面的代码添加谷歌地图

> ID：13817901
> 
> 赞同：0
> 
> 时间：2012-12-11T10:08:14.620
> 
> 标签：asp.net, vb.net, jquery-ui, google-maps, updatepanel

从代码隐藏中，我在`Panel`. 其中一个控件是通用控件`div`，其中我使用 JQuery UI 地图加载 Google 地图，并根据用户选择的某些选项将位置存储在数据库中。这没有任何问题。这是我的 JavaScript 函数：

```
function loadLocation(map, latitude, longitude) {
  var location = latitude + ',' + longitude;
  $('div[id=' + map + ']').gmap().bind('init', function (ev, map) {
    $(this).gmap('addMarker', { 'position': location, 'bounds': true }).click(function () { });
    $(this).gmap('option', 'zoom', 4);
    $(this).gmap('option', 'disableDefaultUI', true);
  });
} 
```

现在，当用户更改其选择时，我首先清除提到`Panel`的所有控件，以便再次添加所有控件，包括带有地图的 div。这是我的vb代码：

```
Dim divForMap As New HtmlGenericControl("div")
divForMap .Attributes.Add("style", "float: right; width: 300px; height: 150px;")
containerPanel.Controls.Add(divForMap)

Dim script As String = "loadLocation('" & divForMap.ClientID & "', '" & oSubstation.latitude & "', '" & oSubstation.longitude & "');"
script &= "$(document).ready($('#" & containerPanel.ClientID & "').stop().fadeOut(0).fadeIn(100));"
ScriptManager.RegisterStartupScript(Page, Page.GetType, Guid.NewGuid.ToString, script, True) 
```

ps：（oSubstation 是从持久存储中检索的对象）

这就是正在发生的事情：

![问题](../Images/fba8cb5515cd85e2a5ae1d19d7e973c7.png)

*   1：用户选择一个选项，地图完美显示，标记在指定位置并以该位置为中心。

*   2：用户改变了选项，位置也改变了，但是地图的渲染出了点问题。

*   3：如果用户更改浏览器选项卡然后返回，地图现在可以很好地呈现，但它不在标记的位置居中。

*   4：用户必须手动移动地图才能找到位置。

这真的很有趣（好吧，不是真的），因为它发生在 Chrome 中，但在 IE 中运行良好。有人有解决方案、线索、建议或魔法药水吗？提前致谢。

**编辑：**我也尝试将插入的脚本从代码隐藏更改为此，但仍然无法正常工作（ps。Chrome 的控制台没有显示任何错误或警告）：

```
Dim script As String = "$(document).ready(function() { "
script &= "               loadLocation('" & divForMap.ClientID & "', '" & oSubstation.latitude & "', '" & oSubstation.longitude & "');"
script &= "               $('#" & containerPanel.ClientID & "').stop().fadeOut(0).fadeIn(100);"
script &= "             });"
ScriptManager.RegisterStartupScript(Page, Page.GetType, Guid.NewGuid.ToString, script, True) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:46:40.930

好的，现在它正在工作。我已将样式应用于`display: none`容器`Panel`以进行淡入淡出效果。似乎只是删除这种样式，一切正常。再次感谢@Pragnesh Patel，我希望它对某人有所帮助。

# php - PHP websocket 不适用于 safari，标头修改

> ID：13817903
> 
> 赞同：1
> 
> 时间：2012-12-11T10:08:16.317
> 
> 标签：php, jquery, websocket, phpwebsocket

[我使用以下源https://github.com/kallaspriit/PHP-HTML5-WebSocket-Server](https://github.com/kallaspriit/PHP-HTML5-WebSocket-Server)使用绘图执行了 Web 套接字

我能够运行适用于 FF 和 chrome 浏览器但不适用于 safari 的脚本。据我所知，这可能与 safari 中使用的握手有关（与 FF 和 chrome 不同）。

在类 SocketServer.php 我发现以下规则：

```
$headers = $this->parseRequestHeader($buffer);

if (isset($headers['Sec-WebSocket-Key'])) {
    $key = $headers['Sec-WebSocket-Key'];
} else {
    $key = $headers['Sec-WebSocket-Key1'];
}
$hash = base64_encode(
        sha1($key . '258EAFA5-E914-47DA-95CA-C5AB0DC85B11', true)
); 
```

/ ff 和 chrome 在 header 中存在 Sec-WebSocket-Key，safari 有 Sec-WebSocket-Key1 和 Sec-WebSocket-Key2 /

```
if (isset($headers['Sec-WebSocket-Key'])) {
    $headers = array(
        'HTTP/1.1 101 Switching Protocols',
        'Upgrade: websocket',
        'Connection: Upgrade',
        'Sec-WebSocket-Accept: ' . $hash
    );
} else {
    $headers = array(
        "HTTP/1.1 101 Web Socket Protocol Handshake",
        "Upgrade: WebSocket",
        "Connection: Upgrade",
        "WebSocket-Origin: http://localhost",
        "WebSocket-Location: ws://localhost:9300",
    );
}

$headers = implode("\r\n", $headers) . "\r\n\r\n";
$left = strlen($headers);

do {
    $sent = @socket_send($this->socket, $headers, $left, 0);

    if ($sent === false) {
        $error = $this->server->getLastError();

        throw new Exception(
                'Sending handshake failed: : ' . $error->message .
                ' [' . $error->code . ']'
        );
    }

    $left -= $sent;

    if ($sent > 0) {
        $headers = substr($headers, $sent);
    }
} while ($left > 0);

$this->state = self::STATE_OPEN; 
```

}

我试图改变 safari 的头条新闻，但没有任何效果。Safari 同时连接我并断开连接 - 我认为问题是由这些头条新闻引起的，我不知道如何自定义它们以正常工作。有谁知道如何修改代码以支持 safari 以及其他浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:22:18.947

看起来 WebSocket 服务器已经 9 个月没有更新了。因此，我建议您查看替代的 PHP WebSocket 解决方案，例如正在积极开发的[Ratchet 。](http://socketo.me/)

# ruby-on-rails - 安装redmine错误

> ID：13817904
> 
> 赞同：0
> 
> 时间：2012-12-11T10:08:28.100
> 
> 标签：ruby-on-rails, rubygems, redmine, bluehost

我正在安装 redmine 并按照他们的安装页面中的说明进行操作。

当我运行命令时： `bundle install --without development test`

我收到此错误：不幸的是，发生了致命错误。请参阅[http://bit.ly/bundler-issues](http://bit.ly/bundler-issues)上的 Bundler 故障排除文档。谢谢！

```
/usr/lib64/ruby/1.8/fileutils.rb:243:in `mkdir': Permission denied - /home1/twogupne (Errno::EACCES) 
```

我在 bluehost 服务器上，我注意到 myhome 目录是 twohupne 而不是 twogupne （如错误中所写）

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:01:24.117

也许您可以尝试修改您家的环境变量：

```
$ export HOME=/home1/twohupne
$ bundle install --without development test 
```

如果它不起作用，请查看[bundle-config](http://gembundler.com/man/bundle-config.1.html)和[bundle-install](http://gembundler.com/man/bundle-install.1.html)

# javascript - HTML5/CSS/JS webapp 和 native app 的通用代码库

> ID：13817905
> 
> 赞同：0
> 
> 时间：2012-12-11T10:08:28.577
> 
> 标签：javascript, css, html, cordova

我被要求使用 HTML5/CSS/JS 创建一个 web 应用程序和本机应用程序。

我应该做一些研究，但我记得我听说过[PhoneGap](http://phonegap.com/)。

我的基本问题是这样的：如果我编写一个 HTML5/CSS/JS 以某种方式与服务器后端交互（例如通过 web 服务），这是一个用户可以通过特定浏览器（或移动浏览器）访问的 web 应用程序IP 地址。

如果我“phonegap”相同的代码，我是否获得了一个已经在运行的 Android od iOS 应用程序，或者两者之间是否还有更多工作？如果还有更多工作，我不清楚。

我知道这是一个通用问题，无论如何这是一个编程问题，因为我需要知道是否可以选择使用这个单一代码库。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:12:05.383

我最近使用相同的代码库构建了一个混合 Web 应用程序，该代码库必须在所有主要的桌面浏览器（低至 IE8）、移动浏览器上运行，并在 iOS 和 Android 上安装为“类本机”应用程序。为此，我使用了 jQuery Mobile 和 PhoneGap Build。

您只能将 HTML、CSS 和 JavaScript 用于 PhoneGap 应用程序，因此从服务器检索的任何数据都需要通过 AJAX 完成，但它工作得很好。

# java - Maven 发布插件和全局定义的依赖版本

> ID：13817910
> 
> 赞同：1
> 
> 时间：2012-12-11T10:08:48.160
> 
> 标签：java, maven, version, release, pom.xml

我不确定这个标题是否有意义，以及这篇[文章](https://stackoverflow.com/questions/8926605/maven-release-plugin-with-parameterized-version)是否已经回答了我的问题，但这里是：

我们有一个多模块项目。正如您所期望的那样，该项目具有内部和第三方依赖项的组合。对于第三方依赖项，我们在父 POM 的依赖项管理部分中定义这些依赖项，以便我们可以在一个公共位置管理这些依赖项的版本。

至于项目间（内部）依赖关系，到目前为止，我们刚刚在需要依赖关系的每个模块 POM 中输入了版本。然后在使用发布插件进行准备时，这些版本会适当更新 - 都非常好。

我们想要的，就像第三方依赖一样，是能够在父 POM 中指定内部依赖版本，因此有一个共同的地方。我看到了三种潜在的方法。

1.  我们通过在父 POM 中创建一个属性来做到这一点。
2.  我们通过父 POM 中的依赖管理部分来完成。
3.  我们使用项目版本属性作为依赖版本。

首选是使用前两种方法中的一种，尽管这并没有真正的理由。这让我想到了主要的担忧和问题：如果我们使用前两种方法中的任何一种，发布插件是否仍会在准备阶段更新依赖版本？

所有的想法/反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:46:47.063

最后，我们使用 project.version 属性来帮助管理它。但是，据我了解，我相信在父 POM 中使用依赖管理部分也可以。

# javascript - 在页面加载并滚动到主题标签锚点后执行 javascript

> ID：13817911
> 
> 赞同：3
> 
> 时间：2012-12-11T10:08:50.407
> 
> 标签：javascript, jquery

我有一个包含一堆部分的网页，所有这些都可以滚动到使用标签链接（例如`www.marie-charlot.be/#weiss`）。

我知道如何执行在页面加载后触发的javascript函数（使用`$(document).ready`，但这些通常在页面向下滚动到正确的部分（`#weiss`锚点）之前触发。

滚动*后*如何执行脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:10:43.813

您应该为此使用 JQuery 插件[Waypoints](http://imakewebthings.com/jquery-waypoints/)。

**例子：**

```
$('.entry').waypoint(function() {
   alert('You have scrolled to an entry.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:24:57.890

```
$(document).ready(function() {
    var anchorTop = $('#my-anchor').offset().top;

    $(document).scroll(function() {
        if($(document).scrollTop() >= anchorTop)
            yourFunctionHere();
    });
}); 
```

# mysql - 通过匹配多个列从多个表中选择数据

> ID：13817912
> 
> 赞同：0
> 
> 时间：2012-12-11T10:08:49.857
> 
> 标签：mysql, sql

我有 3 个这样的表：

表用户

```
 +---------+-----------------+
    | UserId  | UserName        |
    +---------+-----------------+
    | 1       | one@test.com    |
    | 2       | two@test.com    |    
    | 3       | three@test.com  |  
    | 4       | four@test.com   |
    +---------+-----------------+ 
```

表员工

```
 +-------------+----------------+------------+----------+---------+
    | EmployeeId  | Email          | Department | Position | Duty    |
    +-------------+----------------+------------+----------+---------+
    | 1           | one@test.com   | Accounting | Manager  | Aproval |
    | 2           | two@test.com   | Accounting | Manager  | NULL    |
    | 3           | three@test.com | Marketing  | Staff    | NULL    |
    | 4           | four@test.com  | Purchasing | Staff    | NULL    |
    +-------------+----------------+------------+----------+---------+ 
```

表授权

```
 +------------------+----------------+------------+----------+----------+
    | AuhtorizationId  | Level          | Department | Position | Duty     |
    +------------------+----------------+------------+----------+----------+
    | 1                | 1              | Accounting | Manager  | NULL     |
    | 2                | 2              | Marketing  | Staff    | NULL     |
    | 3                | 3              | Purchasing | Staff    | NULL     |
    | 4                | 4              | Accounting | Manager  | Approval |
    +------------------+----------------+------------+----------+----------+ 
```

如何构造一个 MySQL 查询来检索 UserId、UserName/Email、Level、Department 和 Position？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:16:20.873

如果我正确理解所有表格关系

```
 SELECT UserID, UserName, Level, Department, Position FROM User   
INNER JOIN Employee ON UserId=EmployeeID INNER JOIN Authorization ON UserId = AuhtorizationId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:21:13.247

```
SELECT User.UserID, User.UserName, Authorization.Level, Authorization.Department, Authorization.Position FROM User INNER JOIN Employee ON User.UserId=Employee.EmployeeID INNER JOIN Authorization ON Employee.Department = Authorization.Department WHERE Employee.Position=Authorization.Position AND Employee.Duty=Authorization.Duty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T21:46:33.927

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!2/c5b49/7)**

```
SELECT 
u.`UserID`, 
u.`UserName`, 
a.`Level`, 
e.`Department`, 
e.`Position` 
FROM `User` u   
  LEFT JOIN `Employee` e
    ON u.`UserId` = EmployeeID 
  LEFT JOIN `Authorization` a 
    ON u.`UserId` = a.`AuhtorizationId` 
```

结果：

```
| USERID |       USERNAME | LEVEL | DEPARTMENT | POSITION |
-----------------------------------------------------------
|      1 |   one@test.com |     1 | Accounting |  Manager |
|      2 |   two@test.com |     2 | Accounting |  Manager |
|      3 | three@test.com |     3 |  Marketing |    Staff |
|      4 |  four@test.com |     4 | Purchasing |    Staff | 
```

# java - json 和空值

> ID：13817917
> 
> 赞同：1
> 
> 时间：2012-12-11T10:09:04.760
> 
> 标签：java, android, json

我不明白为什么这段代码会崩溃，我的服务器有这个响应：

```
 [{
        "parking1": "Plaza de la Estacion",
        "parking2": "",
        "takeDate": "2012-12-11 11:00:48",
        "returnDate": null,
        "time": null,
        "cost": "0.00"
    }] 
```

我将其转换为 a`JSONObject`并检查是否`returnDate`为空：

```
JSONObject json_data = jArray.getJSONObject(0);
if (json_data.getString("returnDate") == null) {
} 
```

但这种情况永远不会成立。如果为null，应该如何检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:11:21.640

您可以使用以下方法检查 json 条目是否为空：

```
if(json_data.isNull("returnDate")) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:15:47.750

尝试

```
JSONObject json_data = jArray.getJSONObject(0);
if (json_data.opt("returnDate") == null) {
} 
```

# sql - 是否有另一种方法可以对 SQL 中的许多列进行 WHERE <> 0 过滤

> ID：13817918
> 
> 赞同：0
> 
> 时间：2012-12-11T10:09:05.783
> 
> 标签：sql, sql-server, ssis, where

这是我的查询：

```
SELECT [id],[reasoncode], 
[jan], [feb],[mar],[apr],[may,[jun],
[jul],[aug],[sep],[oct],[nov],[dec] from table 
```

现在我想知道的是，是否还有另一种方法可以使用 WHERE 过滤掉 0 而不是这个？

```
SELECT [id],[reasoncode], 
[jan], [feb],[mar],[apr],[may,[jun],
[jul],[aug],[sep],[oct],[nov],[dec] from table
WHERE 
[jan] <> 0 and   
[feb] <> 0 and
[mar] <> 0 and
[apr] <> 0 and
[may] <> 0 and
[jun] <> 0 and
[jul] <> 0 and
[aug] <> 0 and
[sep] <> 0 and
[oct] <> 0 and
[nov] <> 0 and
[dec] <> 0
from table 
```

建议？

- - - 更新

如果所有行都为零，我只想排除该行。这是我必须使用的数据，因此没有可用的“月”列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:20:57.663

嗯，不知道你的目标是什么，但是......

如果您的目标是减少比较和/或更短的 SQL，您可以检查乘法的结果，如下所示：

```
SELECT * 
  FROM TABLE
 WHERE jan * feb * mar * apr * (... and so on) <> 0 
```

这样，如果其中一列是`0`，则表达式`0`也是，并且不满足条件。但我并不是说这更好/更快/更清洁。这只是一个把戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:51:30.853

由于您想排除所有（月份）列为 0 的位置，因此将所有月份列添加在一起并像这样进行测试

```
Where jan+feb+mar+apr+may+jun+jul+aug+sep+oct+nov+dec<>0 
```

这假定每个月列的有效值为 0 或正数，并且这些列是 int 列而不是位列。如果每个月都允许负值，那么您可以使用

```
Where abs(jan) + ... + abs(dec) <> 0 
```

如果您使用的是位列，那么

```
Where convert(int,jan) + ... + convert(int,dec) <> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:19:50.410

If you're using a newer version of MYSQL, you could try the LEAST operator, and check that none of the values are 0\. Something like:

```
SELECT [id],[reasoncode],  [jan], [feb],[mar],[apr],[may,[jun],
[jul],[aug],[sep],[oct],[nov],[dec] 
from table 
WHERE  
LEAST([jan],[feb],[mar],[apr],[may],[jun],[jul],[aug],[sep],[oct],[nov],[dec]) <> 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:20:45.790

也许是这样的：

```
SELECT id,reasoncode, 
       jan, feb,mar,apr,may,jun,
       jul,aug,sep,oct,nov,dec
FROM table
WHERE
  jan*feb*mar*apr*may*jun*jul*aug*sep*oct*nov*dec<>0 
```

# php - 在 PHP 网页上加载大量数据的有效方法

> ID：13817920
> 
> 赞同：0
> 
> 时间：2012-12-11T10:09:12.493
> 
> 标签：php, mysql, codeigniter

我正在使用代码点火器（PHP）n MYSQL。我正在将大量数据（来自 XML 的大约 6 万条记录）提取到我的 mysql 数据库中。然后我试图将这些数据加载到我的网页上。我成功地将数据插入我的数据库使用代码点火器的插入批处理方法。但是当我尝试检索这些记录时，加载和显示在网页上需要很长时间。

我用来插入数据的方法：

```
 $data = array(array('title' => 'My title' ,
  'name' => 'My Name' ,
  'date' => 'My date' ),
   array('title' =>'Another title','name'=> 'Another Name','date' =>'Another date'));

   $this->db->insert_batch('mytable', $data); 
```

我只是使用 select 语句从单个表中检索记录。

**我的问题 ：**

如何有效地检索大量记录而不会延迟页面加载和显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T10:12:08.897

您应该考虑分页，除非有很好的理由一次性向用户显示 60,000 条记录。

CodeIgniter 提供了一个分页类，有关如何使用它以及示例代码的详细信息，请参阅文档：

[http://ellislab.com/codeigniter/user-guide/libraries/pagination.html](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)

如果您需要更多关于如何使用它的指导而不是上述文档提供的指导，以下教程可能会有所帮助：

[http://phpmaster.com/pagination-with-codeigniter/](http://phpmaster.com/pagination-with-codeigniter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:17:38.550

如果出于某种非常好的原因，您必须一起显示所有记录，而不是您可能希望定期（每 100 条记录左右）刷新缓冲区。否则请参阅 MitchS 的回答

# java - 带有 IV 的 AES 加密在 iOS 中不起作用

> ID：13817925
> 
> 赞同：1
> 
> 时间：2012-12-11T10:09:24.817
> 
> 标签：java, objective-c, ios4, aes, ios5

我需要 AES 加密（带有初始向量）一个 NSString 值。但是与下面提供的 java 代码相比，它给出了不同的输出。在 Java 中它提供了正确的结果。可能是什么原因？

为此，我使用了以下代码：

**iOS**

* * *

```
- (NSData *)AES256EncryptWithKey:(NSString *)key 
{
// 'key' should be 32 bytes for AES256, will be null-padded otherwise
char keyPtr[kCCKeySizeAES128+1]; // room for terminator (unused)
bzero(keyPtr, sizeof(keyPtr)); // fill with zeroes (for padding)

// fetch key data
[key getCString:keyPtr maxLength:sizeof(keyPtr) encoding:NSUTF8StringEncoding];

NSUInteger dataLength = [self length];

//See the doc: For block ciphers, the output size will always be less than or
//equal to the input size plus the size of one block.
//That's why we need to add the size of one block here
size_t bufferSize = dataLength + kCCBlockSizeAES128;
void *buffer = malloc(bufferSize);

size_t numBytesEncrypted = 0;
CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                      keyPtr, kCCKeySizeAES128 ,
                                      INTIAL_VECTOR /* initialization vector (optional) */,
                                      [self bytes], dataLength, /* input */
                                      buffer, bufferSize, /* output */
                                      &numBytesEncrypted);
if (cryptStatus == kCCSuccess) {
    //the returned NSData takes ownership of the buffer and will free it on deallocation
    return [NSData dataWithBytesNoCopy:buffer length:numBytesEncrypted];
}

free(buffer); //free the buffer;
return nil;
}
- (NSString*)hexStringFromData:(NSData *)data
{
unichar* hexChars = (unichar*)malloc(sizeof(unichar) * (data.length*2));
unsigned char* bytes = (unsigned char*)data.bytes;
for (NSUInteger i = 0; i < data.length; i++) {
    unichar c = bytes[i] / 16;
    if (c < 10) c += '0';
    else c += 'a' - 10;
    hexChars[i*2] = c;
    c = bytes[i] % 16;
    if (c < 10) c += '0';
    else c += 'a' - 10;
    hexChars[i*2+1] = c;
}
NSString* retVal = [[NSString alloc] initWithCharactersNoCopy:hexChars
                                                       length:data.length*2
                                                 freeWhenDone:YES];
return [retVal autorelease];
} 
```

* * *

实现片段是：

```
NSData *InputData = [@"mahi" dataUsingEncoding:NSUTF8StringEncoding];   
NSData *encryptedData = [InputData AES256EncryptWithKey:ENCRYPTION_KEY];   
NSString *encryptedHexString = [self hexStringFromData:encryptedData];
NSLog(@"Encrypted HexString : %@",encryptedHexString); 
```

* * *

## 爪哇

```
import java.security.NoSuchAlgorithmException;

    import javax.crypto.Cipher;

    import javax.crypto.NoSuchPaddingException;

    import javax.crypto.spec.IvParameterSpec;

    import javax.crypto.spec.SecretKeySpec;

    public class MCrypt {

            private String iv = "fedcba9876543210";

            private IvParameterSpec ivspec;
            private SecretKeySpec keyspec;

            private Cipher cipher;

            private String SecretKey = "0123456789abcdef";

            public MCrypt()
            {

                    ivspec = new IvParameterSpec(iv.getBytes());

                    keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

                    try {
                            cipher = Cipher.getInstance("AES/CBC/NoPadding");

                    } catch (NoSuchAlgorithmException e) {

                            // TODO Auto-generated catch block
                            e.printStackTrace();

                    } catch (NoSuchPaddingException e) {

                            // TODO Auto-generated catch block
                            e.printStackTrace();

                    }
            }

            public byte[] encrypt(String text) throws Exception

            {
                    if(text == null || text.length() == 0)

                            throw new Exception("Empty string");

                    byte[] encrypted = null;

                    try {
                            cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                            encrypted = cipher.doFinal(padString(text).getBytes());

                    } catch (Exception e)

                    {                       
                            throw new Exception("[encrypt] " + e.getMessage());

                    }

                    return encrypted;

            }

            public byte[] decrypt(String code) throws Exception

            {
                    if(code == null || code.length() == 0)

                            throw new Exception("Empty string");

                    byte[] decrypted = null;

                    try {
                            cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                            decrypted = cipher.doFinal(hexToBytes(code));

                    } catch (Exception e)

                    {
                            throw new Exception("[decrypt] " + e.getMessage());

                    }
                    return decrypted;

            }

            public static String bytesToHex(byte[] data)

            {
                    if (data==null)

                    {
                            return null;

                    }

                    int len = data.length;

                    String str = "";

                    for (int i=0; i<len; i++) {

                            if ((data[i]&0xFF)<16)

                                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);

                            else
                                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);

                    }
                    return str;
            }

            public static byte[] hexToBytes(String str) {

                    if (str==null) {

                            return null;
                    } else if (str.length() < 2) {

                            return null;
                    } else {

                            int len = str.length() / 2;

                            byte[] buffer = new byte[len];

                            for (int i=0; i<len; i++) {

                                    buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);

                            }
                            return buffer;

                    }
            }

            private static String padString(String source)

            {
              char paddingChar = ' ';

              int size = 16;
              int x = source.length() % size;

              int padLength = size - x;

              for (int i = 0; i < padLength; i++)

              {
                      source += paddingChar;

              }

              return source;
            }

    } 
```

# sqlite - 将数据从手机发送到服务器

> ID：13817926
> 
> 赞同：1
> 
> 时间：2012-12-11T10:09:36.587
> 
> 标签：sqlite, cordova, jquery-mobile

我正在尝试使用 PhoneGap 框架开发一个 android 移动应用程序，并且我想将我的本地数据库表（我的手机）同步到服务器数据库。

这是我的代码，但是这段代码只允许我发送一行表格我如何发送所有表格行。

```
$.ajax({
        type: 'POST',
        data: col1+'&amp;lid='+col2,
        url: 'http://your-domain.com/comments/save.php',
        success: function(data){
            console.log(data);
            alert('Your data was successfully added');
        },
        error: function(){
            console.log(data);
            alert('There was an error adding your data');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:51:45.217

尝试从 localDatabase 中选择数据并逐行发送，这是一个示例：

```
 db.transaction(function(tx) {
    Squery = 'SELECT * FROM news WHERE category_id ='+lid;
        tx.executeSql(Squery,
            null,
            function(tx, results)
            {
                    for(i=0; i<results.rows. length; i++){
                        row = results.rows.item(0);
                                $.ajax({ -- your code using row['name_of_column'] -- })
                              }
                        },
                        console.log('error')
            });}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:22:29.833

对不起，我的小姐明白了……

如果您使用的是 phonegap，我猜您使用的是存储功能：[http ://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)

按照他们的示例之一，您可以执行以下操作：

```
function queryDB(tx) {
    tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
}

function querySuccess(tx, results) {

    //do you ajax request....
    ...
    data: {
        rows : results.rows
    }
    ...
}

function errorCB(err) {
    alert("Error processing SQL: "+err.code);
}

var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
db.transaction(queryDB, errorCB); 
```

* * *

另一个选择是发送一个简单的数组......

```
function querySuccess(tx, results) {

  var myRowsIds = [];

  var len = results.rows.length;
        for (var i=0; i<len; i++){
            myRowsIds .push( results.rows.item(i).id )
        }

        //do you ajax request....
        ...
        data: {
                rows : myRowsIds
            }
        ...
    } 
```

希望能帮助到你！

# algorithm - Photoshop的快速选择工具背后的算法是什么？

> ID：13817927
> 
> 赞同：10
> 
> 时间：2012-12-11T10:09:40.547
> 
> 标签：algorithm, image-processing, photoshop, image-segmentation

我从事图像处理。我刚刚看到了 Photoshop 的快速选择工具，我印象深刻的是，这个工具大部分时间都能够沿着真实边缘分割图像。

我可以想象两种或多种方式来完成该工具的工作：

1.  从边缘检测器（比如 Canny）开始，使用经过调整的参数，我会得到连接区域（可能在一些扩张之后，然后用片段上的一些“打开”操作进行补偿）。

2.  用额外的边界约束做分水岭算法，就像表面张力一样。

但也许我错了。

我计划实现一个类似的分割算法，所以我对一个想法描述感兴趣（就像我的两个猜测）。你能指出我正确的方向吗？

# mysql - 如何从表中选择所有列（少数除外）？

> ID：13817928
> 
> 赞同：0
> 
> 时间：2012-12-11T10:09:40.590
> 
> 标签：mysql

我想显示表格中的记录，除了几列。该表中有 94 列，我想查看除 5 之外的所有列。这可能吗？如果是这样，请告诉我如何？

我知道我可以通过指定它们来选择所需的列。但是我想在 94 列中省略 5 列。省略 5 总是比指定 89 更好？

我用谷歌搜索，但我不知道这样做。所以我只想在这里做最后一次尝试！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T10:21:46.510

```
$Database_Name="database_example";
$table_example="table_example";
$result = mysql_query("select column_name from information_schema.columns where table_schema = '$Database_Name' and table_name='$table_example' AND column_name NOT IN ('Col89', 'col90','col91','col92', 'col93','col94')");

if (!$result) { 
    die('Invalid request : ' . mysql_error());
}

$SQL="SELECT ";
while ($row = mysql_fetch_row($result)) {   
    foreach($row as $ColonneName)
        $SQL.=$ColonneName.",";
}   

$SQL=rtrim($SQL, ",")." FROM _table_example";

    echo $SQL; 
```

# c# - 如何以正确的方式实现我的异步方法？

> ID：13817929
> 
> 赞同：3
> 
> 时间：2012-12-11T10:09:44.023
> 
> 标签：c#, async-await, c#-5.0

我想知道如何实现我自己的异步方法的最佳方式。我读过[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2012/03/24/10287244.aspx)，它说将同步方法包装到任务中并将其用作异步方法不是一个好主意，因为这种方式使用其他线程并使用更多资源，这就是我们想要避免使用异步.

在文章中使用TaskCompletionSource，但我不知道具体如何使用。TaskCompletionSource 的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:57:19.817

编写`async`方法的最佳资源是[Stephen Toub 的基于任务的异步模式 (TAP) 文档](http://www.microsoft.com/en-us/download/details.aspx?id=19957)。该文档中的大部分信息现在已[成为 MSDN 官方文档的一部分](http://msdn.microsoft.com/en-us/library/hh873175.aspx)。

如果你想要一个更短（但仍然很全面）的教程，我推荐我自己的[`async`/`await`介绍性博客文章](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)，还有其他几个教程。一旦你了解了一点`async`，下一个很好的资源就是[官方`async`/ `await`FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

`async`Channel9 上还有大量精彩视频。他们中的许多人（大多数？）都在讨论`async`它何时还是 CTP，但在投入生产时很少进行设计更改。

为了回答您的具体问题，`TaskCompletionSource`用于`Task`围绕现有异步操作（例如，I/O 操作、计时器或事件）创建包装器。您不能执行`Task`创建者中的代码`TaskCompletionSource`；您应该`Task.Run`使用`Task`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T11:06:45.717

在另一个方法中调用一个`async`方法（使用 .NET 5.0`async`关键字）对我来说很好。我不确定我是否完全理解你的问题，但举一个简单的例子。为了显示开始`int`和计数之间的质数，我们可以写

```
async void DisplayPrimes()
{
    int result = await GetPrimesCountAsync(2, 10000);
    Console.WriteLine(result);
} 
```

在哪里

```
Task<int> GetPrimesCountAsync(int start, int count)
{
    return Task.Run(() => 
        ParrallelEnumerable.Range(start, count).COunt(n => 
            Enumerable.Range(2, (int)Math.Sqrt(n) - 1).All(i => n % i > 0)));
} 
```

此处`async`修饰符告诉编译器如果在该方法中出现任何歧义，则将 await 视为关键字而不是标识符。这确保了在 C# 5.0 之前编写的可能使用 await 作为标识符的代码仍然可以无错误地编译。async 修饰符只能应用于返回 void 或`Task`/的方法和 lambda 表达式`Task<TResult>`。

在遇到`await`表达式时，执行（通常）返回给调用者 - 就像`yeild return`在迭代器中一样。但是在返回之前，运行时会为等待的任务附加一个延续，确保当任务完成时，执行会跳回到方法并从中断的地方继续。我想您可以编写上面的方法来显示编译器将其转换为的内容

```
void DisplayPrimesCount()
{
    var awaiter = GetPrimesCountAsync(2, 100000).GetAwaiter();
    awaiter.OnCompleted(() =>
    {
        int result = awaiter.GetResult();
        Console.WriteLine(result);
    });
} 
```

我希望这有帮助。

* * *

编辑。所以为了避免任务阻塞（很难说出你的情况是什么，因为你没有发布任何代码），你需要把`async`你想要创建的过程“提升一个层次”

```
private async Task<bool> TestAsync()
{
    return await Task.Run(() => 
    {
        // Do stuff non-blocking.            
        return true;
    }).ConfigureAwait(continueOnCapturedContext:false);
} 
```

`TestAsync`这里将能够通过在线程池线程而不是 UI 上下文上执行其“return”语句来完成。这将立即返回给调用者，但请注意，如果您继续使用`Task.Result`，那么任何异常都会被包裹在`AggregateException`您必须相应处理的 an 中。

可以[在 MSDN here](http://social.msdn.microsoft.com/Forums/en-US/async/thread/269172a3-adb9-4b5e-9ac1-8b67ff920177/)上找到一个很好的解释。我建议在进入`async`/之前学习 C# 4.0 任务，`await`因为它可以让你更好地理解并发性。

# git - 将文件直接推送到 bitbucket

> ID：13817932
> 
> 赞同：3
> 
> 时间：2012-12-11T10:09:51.003
> 
> 标签：git, bitbucket

我可以将文件直接推送到 bitbucket 而不在我的机器上创建本地存储库吗？我有一台公司笔记本电脑，我无权在其中安装任何其他软件。每当我对文件进行更改时，我都想直接推送它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:14:54.553

不，你不能。Git 是一个去中心化的版本控制系统，要在其中推送一些东西，你需要一个存储库来推送——更重要的是，实际执行此操作的软件。不幸的是，Bitbucket 也允许直接在浏览器中编辑文件（与 GitHub 不同），因此您必须以某种方式手动进行。

如果你使用的是 Windows，你可以试试[PortableGit 。](http://code.google.com/p/msysgit/downloads/list)它本质上是相同的，只是您不需要安装它。

另一种选择是选择一些直接使用[libgit2](http://libgit2.github.com/)的解决方案（而不是命令行）并且也与它捆绑在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:15:07.860

Git 在技术上不需要安装，它只是一组使用环境变量的命令行工具。

有一个[便携式版本](http://code.google.com/p/msysgit/downloads/detail?name=PortableGit-1.8.0-preview20121022.7z&can=2&q=)，您无需任何安装即可运行。

另一个要考虑的选择是使用在线编辑器，例如[Cloud9](http://c9.io)，它允许您在云中克隆存储库、进行更改和回退（参见[这篇文章](http://support.cloud9ide.com/entries/20754818-push-your-git-cloud9-project-to-bitbucket)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T10:16:29.267

不可以。
只有 GitHub 允许从 GitHub Web 界面修改文件。
（如“[在 GitHub 上创建文件](https://github.com/blog/1327-creating-files-on-github)”中所示）

即使你安装了 Git（并且有一个便携版本），你仍然需要一个本地克隆来推送。

# android - Android GoogleMaps API ver2 com.google.android.gms.maps 不存在

> ID：13817935
> 
> 赞同：0
> 
> 时间：2012-12-11T10:09:55.950
> 
> 标签：android, google-maps-api-2

我正在尝试使用 API ver2 开发 Google 地图，并将 JAR 文件合并为 google-play.services.jar，我也尝试在“com.google.android.gms”上进行引用，但作为 API2 文档中的提及，我有参考 com.google.android.gms.maps 但它不存在，你能帮帮我吗？多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:12:35.533

您可以从 SDK Manager 中卸载 extras 并重新安装。这对我行得通。

# web-applications - 如何在同一容器上的 webapp 中使用 Jetty 容器的实例？

> ID：13817936
> 
> 赞同：0
> 
> 时间：2012-12-11T10:09:56.573
> 
> 标签：web-applications, jetty

我们正在使用 Jetty 开发应用程序 Web 服务器。在容器中，我们制作了一些静态实例，可以在同一个容器加载的 webapp 中使用。但是我们找不到使用实例的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:01:07.717

您在这里与类加载器隔离作斗争，设计上不允许另一个 Web 应用访问一个 Web 应用中的对象实例。

您应该将 JNDI 视为一种创建应该共享和链接的事物的方式。例如，这是多个应用程序共享数据库池的常见模式。

# python - ipython 笔记本的 matplotlib 和 libpng 问题

> ID：13817940
> 
> 赞同：12
> 
> 时间：2012-12-11T10:10:09.210
> 
> 标签：python, matplotlib, ipython, libpng, ipython-notebook

我试图使用 ipython notebook 。我安装了所有依赖库。但是，在启动 ipython 或 Ipython 控制台中的“savefig”函数时，我不能使用“--pylab=inline”选项。当我尝试执行其中任何一个时，由于执行 matplotlib，返回了一条错误消息“RuntimeError：无法创建写入结构”。此外，来自 notebookApp 提示的警告说“libpng 警告：使用 libpng-1.2.41 构建但使用 1.5.13 运行的应用程序”。

但是，我安装了最新的 libpng(1.5.13)，使用 pip uninstall 卸载了 matplotlib，并使用 pip install 重新安装了 matplotlib（在构建过程中，我可以看到 libpng1.5.13 用于构建 matplotlib）。

我系统的配置是Mac OS X10.6，python2.7。有没有人有类似的经历或者建议？

以下是回溯错误：

```
[<matplotlib.lines.Line2D at 0x106066d50>]
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/IPython/zmq/pylab/backend_inline.pyc in show(close)
    100     try:
    101         for figure_manager in Gcf.get_all_fig_managers():
--> 102             send_figure(figure_manager.canvas.figure)
    103     finally:
    104         show._to_draw = []

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/IPython/zmq/pylab/backend_inline.pyc in send_figure(fig)
    209     """
    210     fmt = InlineBackend.instance().figure_format
--> 211     data = print_figure(fig, fmt)
    212     # print_figure will return None if there's nothing to draw:
    213     if data is None:

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/IPython/core/pylabtools.pyc in print_figure(fig, fmt)
    102     try:
    103         bytes_io = BytesIO()
--> 104         fig.canvas.print_figure(bytes_io, format=fmt, bbox_inches='tight')
    105         data = bytes_io.getvalue()
    106     finally:

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backend_bases.pyc in print_figure(self, filename, dpi, facecolor, edgecolor, orientation, format, **kwargs)
   2050                     orientation=orientation,
   2051                     dryrun=True,
-> 2052                     **kwargs)
   2053                 renderer = self.figure._cachedRenderer
   2054                 bbox_inches = self.figure.get_tightbbox(renderer)

/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_agg.pyc in print_png(self, filename_or_obj, *args, **kwargs)
    501             _png.write_png(renderer._renderer.buffer_rgba(),
    502                            renderer.width, renderer.height,
--> 503                            filename_or_obj, self.figure.dpi)
    504         finally:
    505             if close:

RuntimeError: Could not create write struct 
```

非常感谢，

杰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-28T17:04:50.330

我在 OS X Mavericks 上遇到了同样的问题，通过自制软件安装了 libpng 并安装了 XQuartz。结果证明 matplotlib 在编译时找到了较旧的 XQuartz libpng 版本，但在运行时找到了更新的自制 libpng。

我找到的最佳解决方案来自[jaengelberg 在 github 上的评论](https://github.com/ipython/ipython/issues/5228#issuecomment-40610018)：卸载 matplotlib，临时重命名 XQuartz libpng 标头，以便找不到它们，安装 matplotlib，然后改回标头名称。

这是完整的：

```
pip uninstall matplotlib
cd /opt/X11/include/libpng15
sudo mv png.h _png.h
sudo mv pngconf.h _pngconf.h
sudo mv pnglibconf.h _pnglibconf.h
pip install matplotlib
sudo mv _png.h png.h
sudo mv _pngconf.h pngconf.h
sudo mv _pnglibconf.h pnglibconf.h 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-16T19:36:14.507

在 Anaconda 环境中工作时，我尝试在 Jupyter Notebook 中查看来自 OpenCV 的图像时遇到了同样的问题。强制重新安装 matplotlib 对我有用：

```
pip install -U --force-reinstall matplotlib 
```

我从 Matt 的解决方案中查看[这个 GitHub 链接时发现了这种方法。](https://github.com/ipython/ipython/issues/5228#issuecomment-40610018)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-11T15:21:01.753

对我来说

```
%matplotlib inline 
```

在所有 matplotlib 导入解决此问题之前

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-12T05:28:29.727

I had this problem as well. Another solution is to change the format which the notebook will render images in, from 'png' to 'svg'. This can be done in your [config file](http://ipython.org/ipython-doc/dev/interactive/notebook.html#configuring-the-ipython-notebook). Mine is located at:

```
~/.ipython/profile_default/ipython_notebook_config.py 
```

There is a line that looks like this

```
# c.InlineBackend.figure_format = 'png' 
```

Uncommenting and changing to 'svg' did the trick for me:

```
c.InlineBackend.figure_format = 'svg' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T21:55:53.200

也许它在运行时加载了错误的 libpng。如果您针对 libpng 1.5 构建 matplotlib，请确保您也使用它运行。libpng 1.2 和 1.5 不兼容。

在 shell 中，您可以设置 DYLD_LIBRARY_PATH 以更改链接器首先搜索库的位置。

```
otool -L /<somepath>/matplotlib/_png.so 
```

应该告诉你 matplotlib 在运行时发现了什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T23:30:10.247

我有几乎完全相同的经历：

*   IPython Notebook 中完全相同的“RuntimeError：无法创建写入结构”
*   完全相同的“libpng 警告：使用 libpng-1.2.41 构建但使用 1.5.13 运行的应用程序”
*   相同的操作系统：Mac OS X10.6
*   py33-ipython @0.13.1_0+notebook+parallel（来自 MacPorts）
*   python3.3（来自MacPorts）代替您的python2.7（我从您那里看到的唯一差异）

我认为 IPython 的 MacPorts 配方可能对某些操作系统版本有一些问题。

不知道你从哪里得到你的python2.7，但我的解决方案是我最终放弃了MacPorts，转而使用[自制软件](http://mxcl.github.com/homebrew/)（这也有一些问题，但我能够通过直接从源代码安装一些包来解决它们，见[这个问题](https://stackoverflow.com/questions/14287466/transition-from-macpython-to-macports-python3-a-good-idea-for-ein-scipy)） .

# asp.net - 如何提取 XML 并将其用作数据源？

> ID：13817941
> 
> 赞同：0
> 
> 时间：2012-12-11T10:10:09.093
> 
> 标签：asp.net, xml, vb.net

我正在使用 asp.net VB，我有一个包含一组数据的 XML 文件，我想在数据列表之类的东西中使用它，通常你会使用数据库我想使用 XML 文件来生成信息.

有谁知道如何做到这一点，我已经阅读过有关转换文件的信息，但我肯定会在控件中格式化信息吗？

该文件有多个记录，因此在某些情况下，我需要通过数据源对信息执行查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:25:33.063

我可能会研究 XML 序列化和反序列化。使用反序列化，您可以将 XML 读入`List(T)`包含您自己的类对象列表的对象，并将其用作应用程序的数据源。

这是一个您可能会觉得有用的链接：

[http://msdn.microsoft.com/en-us/library/ms731073.aspx](http://msdn.microsoft.com/en-us/library/ms731073.aspx)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:34:34.943

```
Dim ds As New DataSet()
ds.ReadXml(MapPath("data.xml")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-18T20:53:52.847

首先，您必须解析 XML 并将其存储到自定义 C# 对象中，或者您可以直接将 XML 传递给您的存储过程并在那里进行编码以将其保存到 DB 中。

将 xml 传递给存储过程并在那里操作它有点困难，所以我建议在 C# 中解析它，然后获取一个自定义对象。一旦你得到它，你可以做任何你想做的事情。

下面是解析 XML 文件并从中生成自定义 C# 对象的示例代码。

```
public CatSubCatList GenerateCategoryListFromProductFeedXML()
{
    string path = System.Web.HttpContext.Current.Server.MapPath(_xmlFilePath);

    XDocument xDoc = XDocument.Load(path);

    XElement xElement = XElement.Parse(xDoc.ToString());

    List<Category> lstCategory = xElement.Elements("Product").Select(d => new Category
    {
        Code = Convert.ToString(d.Element("CategoryCode").Value),
        CategoryPath = d.Element("CategoryPath").Value,
        Name = GetCateOrSubCategory(d.Element("CategoryPath").Value, 0), // Category
        SubCategoryName = GetCateOrSubCategory(d.Element("CategoryPath").Value, 1) // Sub Category
    }).GroupBy(x => new { x.Code, x.SubCategoryName }).Select(x => x.First()).ToList();

    CatSubCatList catSubCatList = GetFinalCategoryListFromXML(lstCategory);

    return catSubCatList;
} 
```

# image - 如何在wordpress中显示上传文件夹中的图像

> ID：13817942
> 
> 赞同：0
> 
> 时间：2012-12-11T10:10:10.690
> 
> 标签：image, wordpress

我正在学习通过以下代码创建元框以在 wp-content/uploads 文件夹中上传文件：

```
//display image meta box
function display_image_box() {
global $post;
wp_nonce_field( plugin_basename( __FILE__ ), 'wp_custom_noncename' );
echo '<input id="post_media" type="file" name="post_media" value="" size="25" />';
}

  //upload image
function update_custom_meta_data( $id, $data_key, $is_file = false ) {
global $post;
if( $is_file && ! empty( $_FILES ) ) {
$upload = wp_handle_upload( $_FILES[$data_key], array( 'test_form' => false ) );
if( isset( $upload['error'] ) && '0' != $upload['error'] ) {
  wp_die( 'There was an error uploading your file. ' );
} else {
  update_post_meta( $id, $data_key, $upload );
} 
}  
 }
//save image
function save_custom_meta_data( $id ) {
 if( ! wp_verify_nonce( $_POST['wp_custom_noncename'], plugin_basename( __FILE__ ) ) ) {
 return;
 } 
 if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) {
  return;
 } 
 update_custom_meta_data( $id, 'post_media', true );

 } 
    add_action( 'save_post', 'save_custom_meta_data' );

   //register script
  function register_admin_scripts() {
  wp_register_script( 'custom_admin_script', get_template_directory_uri() . '/js/admin.js' );
  wp_enqueue_script( 'custom_admin_script' );
  }
  add_action( 'admin_enqueue_scripts', 'register_admin_scripts' ); 
```

这个工作和上传的文件很好，但我无法显示它导致数组是这样的：

```
> [post_media] => Array
    (
        [0] => a:3:{s:4:"file";s:81:"E:wampwwwtestchild/wp-content/themes/twentyeleven/uploads/2012/12/coffee_star.jpg";s:3:"url";s:60:"wp-content/themes/twentyeleven/image/2012/12/coffee_star.jpg";s:4:"type";s:10:"image/jpeg";}
    ) 
```

那么我现在如何显示图像文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:29:59.407

由于自定义字段保存在**_postmeta**表中，我们将通过`$post->ID`.

```
$media = stripslashes(get_post_meta($post->ID, 'post_media', true));
if (isset($media[0])){
   echo '<img src="'.$media.'" alt="images" />';
} 
```

希望能帮助到你...

如果你想试试这个代码。

**上传脚本**

```
<script type="text/javascript">
    var formfield = '';
    $j(document).ready(function(){uploadimagebutton();});
    function uploadimagebutton() {
        $j('#upload_image_button').click(function() {
            formfield = $j(this).prev().attr('name');
            tb_show('', 'media-upload.php?type=image&amp;TB_iframe=true');
            return false;
        }); 
        window.original_send_to_editor = window.send_to_editor;
        window.send_to_editor = function(html){
            if (formfield) {
                imgurl = $j(html).attr('src');
                $j('#'+formfield).val(imgurl);
                tb_remove();
                $j('#pagebackgroundthumb').html('<img src="'+imgurl+'" alt="" style="max-width:85%;" />');
            } else {
                window.original_send_to_editor(html);
            }
        };
        $j('#delete_image_button').click(function(){
            formfield = $j(this).prev().prev().attr('name');
            $j('#'+formfield).attr('value', '');
            $j('#pagebackgroundthumb').html('');
        });
    }
</script> 
```

**把它放在你的主题function.php中**

```
<?php
/*  -------------------------------------------------------------
    Meta boxes
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   */
add_action('edit_post', 'adj_update');
add_action('save_post', 'adj_update');
add_action('publish_post', 'adj_update');

/* Use the admin_menu action to define the custom boxes */
add_action('admin_menu', 'adj_add_custom_box');

/* Adds a custom section to the "advanced" Post and Page edit screens */
function adj_add_custom_box() {
    if( function_exists( 'add_meta_box' )) {
        add_meta_box( 'addsettings', 'Additional Settings', 
                'adj_inner_custom_box', 'page', 'advanced', 'high' );
    }
}

/* Prints the inner fields for the custom post/page section */
function adj_inner_custom_box() {
    // Use nonce for verification
    echo '<input type="hidden" name="myplugin_noncename" id="myplugin_noncename" value="' . 
    wp_create_nonce( plugin_basename(__FILE__) ) . '" />';

    // The actual fields for data entry
    global $post;
    $subtitle = stripslashes(get_post_meta($post->ID, 'subtitle', true));
    $pagebackground = stripslashes(get_post_meta($post->ID, 'pagebackground', true));
?>
        <div class="inside">
        <label for="subtitle"><strong>Page Subtitle:</strong> </label>
        <input type="text" name="subtitle" value="<?php echo $subtitle ?>" id="subtitle" style="width:95%" />
        <p>If menu title is different with page title, please type here the desired page title.</p>

        <label for="pagebackgroundthumb"><strong>Page Background Image:</strong> </label>
        <div id="pagebackgroundthumb"><?php if(!empty($pagebackground))echo '<img src="'.$pagebackground.'" alt="" width="80%" />';?></div>
        <input id="upload_image" name="pagebackground" type="hidden" size="45" value="<?php echo $pagebackground;?>">
        <input class="button-secondary" id="upload_image_button" value="Upload/Select an image" type="button"><input class="button-secondary" id="delete_image_button" value="Delete" type="button"> 
        </div>
<?php
}

function adj_update($id) {
    // verify this came from the our screen and with proper authorization,
    // because save_post can be triggered at other times
    if ( !wp_verify_nonce( $_POST['myplugin_noncename'], plugin_basename(__FILE__) )) {
        return $post_id;
    }
    if ( 'page' == $_POST['post_type'] ) {
        if ( !current_user_can( 'edit_page', $post_id ))
        return $post_id;
    } else {
        return $post_id;
    }

    $label = $_POST['subtitle'];
    $pagebackground = $_POST['pagebackground'];

    if (!empty($label)) {
        $meta_value = get_post_meta($id, 'subtitle', true);

        if(!empty($meta_value)) {
            update_post_meta($id, 'subtitle', $label);
        } else {
            add_post_meta($id, 'subtitle', $label, true);
        }
    } else {
        delete_post_meta($id, 'subtitle');
    }

    if (!empty($pagebackground)) {
        $meta_value = get_post_meta($id, 'pagebackground', true);

        if(!empty($meta_value)) {
            update_post_meta($id, 'pagebackground', $pagebackground);
        } else {
            add_post_meta($id, 'pagebackground', $pagebackground, true);
        }
    } else {
        delete_post_meta($id, 'pagebackground');
    }
}
?> 
```

# ruby-on-rails - 在 Ruby 中创建控制器和模型后的下一步是什么

> ID：13817945
> 
> 赞同：0
> 
> 时间：2012-12-11T10:10:16.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我为我的应用程序创建了一个控制器和一个模型。我想以 json 格式获取数据。我在哪里可以看到我的输出？如果我运行控制器，它不会响应。我正在列出文件。最后，我想`products`从数据库中以 json 格式从表中获取数据。如何获取我的数据？

我的控制器：

```
class ShoppingDemo < ApplicationController

  def index
    @lists=Product.all;
    respond_to do |format|
      format.html
      format.json { render json: @lists}
    end
   end

   def show
    @products = products.find(params[:prod_id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @products }
    end
  end

end

My Model:

class product < Activerecord::Base
  attr_accessible :model_name, :brand_name, :price, :discount, :qty_available
end

show.html.erb

<p>
  <b>model_name:</b>
  <%= @products.model_name %>
</p>

<p>
  <b>Brand_name:</b>
  <%= @products.brand_name %>
</p>

<p>
  <b>Price:</b>
  <%= @products.price %>
</p>

<p>
  <b>Discount:</b>
  <%= @products.discount %>
</p>

<p>
  <b>Quantity:</b>
  <%= @products.qty_available %>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:24:24.023

首先，您在 show 方法中的查询是完全错误的。
编写 show 方法如下：

```
def show
  @products = Product.find(params[:prod_id])

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @products }
  end
end 
```

并写`<%= @products.to_json %>`在你的 show.html.erb 中。
否则，您可以通过**`.json`**在 url 中添加扩展名来检查。例如：`http://localhost:3000/shopping_demos/1.json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:22:34.143

在 products_controller.rb 文件中写入以下内容。

```
 def index
   @products = Product.all

   respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @products }
   end
  end
  def show
    @product = Product.find(params[:id])

    respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @product }
     end
  end 
```

在您的 routes.rb 文件中添加以下行。
`resources :products`

并相应地进行。

我发现你对 ruby​​ on rails 不太了解。请看一下文件。
[http://guides.rubyonrails.org/](http://guides.rubyonrails.org/)

# python - Python redis日志错误

> ID：13817946
> 
> 赞同：1
> 
> 时间：2012-12-11T10:10:20.947
> 
> 标签：python, redis, pip

我正在尝试将我的 python 项目设置到我的本地 Fedora 16 机器上。我已经使用 git 克隆了整个项目。

项目使用redis服务器。

输入命令后：python setup.py develop 我得到以下错误

```
Installed /usr/lib/python2.7/site-packages/python_redis_log-0.1.2-py2.7.egg
error: Could not find required distribution python-redis-log>=9999 
```

我已经安装了 redis 2.7

有人知道这里有什么问题吗？高度赞赏帮助。

# 画中画冻结

```
tawlk]# pip freeze
IPy==0.75
Magic-file-extensions==0.2
Paste==1.7.5.1
PyYAML==3.10
SSSDConfig==1
Tempita==0.4
chardet==2.0.1
cupshelpers==1.0
decorator==3.3.2
distribute==0.6.24
ethtool==0.7
eventlet==0.9.17
firstboot==1.117
gps==2.95
greenlet==0.4.0
iniparse==0.4
iwlib==1.1
kitchen==1.0.0
-e git+https://github.com/Tawlk/kral.git@d1b8aacc3a2fa8c80049c392014842ed2f547f0d#egg=kral-dev
liveusb-creator==3.11.4
lockfile==0.9.1
lxml==3.0.1
nltk==2.0.4
numpy==1.6.2
policycoreutils-default-encoding==0.1
pyOpenSSL==0.12
pycryptsetup==0.1.4
pycups==1.9.59
pycurl==7.19.0
pygpgme==0.1
pykickstart==1.99.4
pyparted==3.8
python-bugzilla==0.6.2
python-meh==0.11
python-nss==0.12
python-redis-log==0.1.2
python-redis-logger==0.1.3
redis==2.7.2
scdate==1.9.67
scservices==0.101.7
scservices.dbus==0.101.7
sesearch==1.0
setools==1.0
setroubleshoot-default-encoding==0.1
simplejson==2.1.6
slip==0.2.17
slip.dbus==0.2.17
slip.gtk==0.2.17
sockjs-tornado==0.0.5
spambayes==1.1a6
stevedore==0.7.2
-e git+https://github.com/Tawlk/synt.git@570cfcdedbc9734489ee737eb5f95de73a494ab6#egg=synt-dev
-e git+https://github.com/Tawlk/tawlk.git@bd420f7a4cc33a58d3d3ecf9342ab650dd810b5e#egg=tawlk-dev
tornado==2.4.1
urlgrabber==3.9.1
virtualenv==1.8.4
virtualenv-clone==0.2.4
virtualenvwrapper==3.6
wsgiref==0.1.2
yolk==0.4.3
yum-langpacks==0.2.2
yum-metadata-parser==1.1.4
yum-presto==0.4.4 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:23:07.097

如果我有足够的声望点，我会发表评论。

`error: Could not find required distribution python-redis-log>=9999`

这表明它正在尝试`python-redis-log`使用至少`9999`. 当前安装的版本是`0.1.2`.

请粘贴您的“需要”部分`setup.py`或定义依赖项的任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:04:08.573

如果你想保持一个干净的 Python 环境而不是一直处理冲突，我总是建议使用[virtualenv 。](http://www.virtualenv.org/en/latest/)该程序允许您创建一个单独的 Python 环境，您可以在该环境中安装软件包，并且它们不会与您的发行版中包含的软件包发生冲突。

这可能无法解决您的问题`>=9999`，但它是一个很好的了解工具。我建议你尝试制作一个 virtualenv，看看你是否遇到同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T17:26:01.013

问题是 setuptools 正在寻找至少指定版本号的所需软件包。9999 大于 2.7.2，因此它会尝试下载 setup.py 文件中指定的版本。

**install_requires 关键字的官方文档在[这里](http://packages.python.org/distribute/setuptools.html#declaring-dependencies)**

`The simplest way to include requirement specifiers is to use the install_requires argument to setup(). It takes a string or list of strings containing requirement specifiers. If you include more than one requirement in a string, each requirement must begin on a new line.`

**此处描述了需求说明符：**

`setuptools and pkg_resources use a common syntax for specifying a project’s required dependencies. This syntax consists of a project’s PyPI name, optionally followed by a comma-separated list of “extras” in square brackets, optionally followed by a comma-separated list of version specifiers. A version specifier is one of the operators <, >, <=, >=, == or !=, followed by a version identifier. Tokens may be separated by whitespace, but any whitespace or nonstandard characters within a project name or version identifier must be replaced with -.`

**特别要解决您的问题：**

你的 setup.py 文件有

```
install_requires = [ ...
                     'python-redis-log>=9999' 
```

您拥有的版本说明符是`python-redis-log>=9999`，因此您的项目要求 python-redis-log 的版本号为 9999 或更高。

如果您将该行更改为

```
python-redis-log>=0.1.2 
```

那应该可以解决问题。

# javascript - Pinterest Pin It 按钮接受所有字段但不提交

> ID：13817948
> 
> 赞同：1
> 
> 时间：2012-12-11T10:10:25.620
> 
> 标签：javascript, jquery, pinterest

我的 pinterest 按钮有问题..

代码如下：

```
var pinit = '<a href="http://pinterest.com/pin/create/button/?url=' + window.location + '&media=' + $(this).attr('src') + '&description=test" class="pin-it-button" count-layout="none"><img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /></a>' 
```

并呈现到此 URL：

```
http://pinterest.com/pin/create/button/?url=http://example.com/blog/?p=37&media=http://example.com/blog/wp-content/uploads/2012/12/wpim1.png&description=test 
```

但是，当您真正“固定”它时，它会像您所看到的那样刷新，而且我一生都无法弄清楚为什么..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:07:05.140

那么解决方案呢？

不要尝试固定本地商店的图像哈哈哈。

<<< 白痴。

# sql-server-2000 - 分组和汇总值

> ID：13817950
> 
> 赞同：0
> 
> 时间：2012-12-11T10:10:28.290
> 
> 标签：sql-server-2000

找出只生产同类型型号的厂商，并且这些型号的数量超过1。

```
maker   model   type
 A      1232    PC
 A      1233    PC
 A      1276    Printer
 A      1298    Laptop
 A      1401    Printer
 A      1408    Printer
 A      1752    Laptop
 B      1121    PC
 B      1750    Laptop
 C      1321    Laptop
 D      1288    Printer
 D      1433    Printer
 E      1260    PC
 E      1434    Printer
 E      2112    PC
 E      2113    PC 
```

结果应该是

```
 Model  Type   
  D      Printer 
```

我试过了

```
 Select maker,type from Product
   Group by maker ,type 
   Having count(*)>1 
```

上面的查询给了我模型数量超过一个的制造商。但我找不到只生产相同类型的模型。请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:26:16.597

```
Select Distinct Maker, Type From Product
 Where Maker In (Select Maker From Product 
                  Group By Maker 
                 Having Count(Distinct Type) = 1 
                    And Count(Distinct Model) > 1) 
```

# javascript - 谷歌+1按钮不起作用

> ID：13817959
> 
> 赞同：1
> 
> 时间：2012-12-11T10:11:01.680
> 
> 标签：javascript, api, debugging, google-apps

我有一个非常复杂的网站，每个页面包含 11 个 js 文件。

我最近添加了 google +1 按钮，代码如下：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

<g:plusone></g:plusone> 
```

这会正确显示 +1 按钮，直到我单击它。当我单击它时，我收到此错误：[https ://support.google.com/plus/bin/answer.py?hl=en&p=plusone_button_error&answer=1199142](https://support.google.com/plus/bin/answer.py?hl=en&p=plusone_button_error&answer=1199142)

我已经阅读了这些建议，在这种情况下没有一个是相关的。我创建了一个仅包含上述代码的测试页面，并将其上传到同一台服务器。测试页完美运行。

我假设某处存在 js 代码冲突，但我不知道如何调试它。Chrome 和 IE 不会抛出任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:19:20.620

我在这里遇到了同样的错误。我发现页面加载时间太长，因此按钮无法工作。

我评论了一些代码和页面加载速度比以前更快，并且按钮起作用了。

# android - 在actionscript 3中在Android上的相机源上运行代码？

> ID：13817964
> 
> 赞同：1
> 
> 时间：2012-12-11T10:11:07.697
> 
> 标签：android, actionscript, camera

我正在尝试在 android 上的相机源上通过鼠标单击运行一些代码。它在 iOS 上运行良好，但是当我在 Android 上运行时，图像会失真并分成四张图片。有人遇到过这个问题吗？知道任何解决方案吗？最佳男装

# mysql - 迭代 MySQL 模式

> ID：13817968
> 
> 赞同：2
> 
> 时间：2012-12-11T10:11:19.480
> 
> 标签：mysql, stored-procedures

**问题描述**

我有一个单租户 MySQL 数据库设置。也就是说，我对每个客户都有一个相同的架构。

现在我需要为每个客户端运行一个特定的查询。这在多租户设置（所有客户端共享一个模式）中很容易。但是，通过我的设置，我需要迭代模式。*更一般地说，我想访问一个名称由变量给出的模式。*怎么可能呢？

**我试过的**

*   如果我尝试`USE varSchemaName`（ 变量在哪里），我会收到错误消息`varSchemaName`ERROR *1314: USE is not allowed in stored procedures*。`varchar`

**   如果我尝试`SELECT * FROM varSchemaName.MyTable`我得到 *错误代码：1146。表'varSchemaName.MyTable'不存在*。显然 MySQL 认为`varSchemaName`是文字，而不是变量。* 

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:32:21.677

您必须先构建语句。

```
SET @sql = CONCAT('SELECT * FROM ', varSchemaName, '.MyTable');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

**[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)**阅读有关准备好的语句的更多信息。

您可能很想对表名使用变量，但这不起作用。这些参数用于 where 子句等中的值。上面的方法是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-10T23:44:21.883

基于来自 fancyPants 的答案，您可以在另一个程序的循环中调用该程序，该程序查询 information_schema.tables 以识别包含 MyTable 的数据库，然后使用 db 名称作为参数调用 fancyPants 程序。如果数据库具有一致的命名方案或包含相同命名的对象，则此方法很容易，这听起来像这里的情况。结构将类似于：

```
DELIMITER //

DROP PROCEDURE IF EXISTS mydriver //
CREATE PROCEDURE mydriver()
BEGIN

  DECLARE varSchemaName VARCHAR(64);
  DECLARE done BOOLEAN;
  DECLARE cur CURSOR FOR
    SELECT table_schema
    FROM information_schema.tables
    WHERE table_name = 'MyTable';

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  OPEN cur;
    read_loop: LOOP
      FETCH cur INTO varSchemaName;
      IF done THEN
        LEAVE read_loop;
        CLOSE cur;
      END IF;

      CALL fancypants_proc(varSchemaName);

    END LOOP;
END //

DROP PROCEDURE IF EXISTS fancypants_proc //
CREATE PROCEDURE fancypants_proc(IN varSchemaName VARCHAR(64))
BEGIN

  SET @sql = CONCAT('SELECT * FROM ', varSchemaName, '.MyTable');
  PREPARE stmt FROM @sql;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;

END //

DELIMITER ;

CALL mydriver(); 
```*

# javascript - JSON 数据和操作内容

> ID：13817976
> 
> 赞同：0
> 
> 时间：2012-12-11T10:11:54.100
> 
> 标签：javascript, json, jsonp

我正在尝试将此 JSON url 中的数据写出到 li 中。

JSON 链接是[https://www.inquicker.com/facility/americas-family-doctors.json](https://www.inquicker.com/facility/americas-family-doctors.json)

```
 <!DOCTYPE html>
    <html>
    <head>
    <title>JQuery (cross-domain) JSONP</title>
    <script  type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js">    </script>
    <script>
$(document).ready(function(){
    $.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json', 
        function(data){ 
        alert(data.facility);
        $.each(data.schedules, function(i, name){
            $('#names').append('<li>' + name.available_times[0] + '</li>');
        });
    });
});
    </script>
    </head>
    <body>
    <ul id="names"></ul>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:28:50.857

`available_times`您可以在访问第一个单元格之前添加一个测试以检查数组的长度是否 > 0。

然后，您可以访问 when 或 url 属性：

*   `available_times[0].when`
*   `available_times[0].url`

编辑：保存`name.available_times[0]`在临时变量中并写入 `temp.when`or `temp.url`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:19:24.343

在 JSON 链接中，一些`schedule`s 具有空`available_times`数组。

And`available_times[0]`是一个包含属性`when`and的对象`url`，因此您必须编写`name.available_times[0].url`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:34:32.890

我创建了一个 JSFidle 检查[这个](http://jsfiddle.net/VVnSC/)。您在 available_times 检查数据是否可用，然后继续。 `if (name.available_times.length){....... ..... ....`

```
$(document).ready(function(){
$.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json',
    function(data){

    $.each(data.schedules, function(i, name){
        times=''
            if (name.available_times.length){
                times='<ul>'
                times+='<li><a href="'+name.available_times[0].url+'">'+name.available_times[0].when+'</a></li>'
                times+='</ul>'
            }
            else{
               times='<ul><li>No Time Available</li></ul>'                    
            }
        $('#names').append('<li>' + (name.name) + times + '</li>');
    });
}); 
```

});

# c# - 继承的接口方法的重新实现

> ID：13817978
> 
> 赞同：4
> 
> 时间：2012-12-11T10:11:57.580
> 
> 标签：c#, inheritance, interface, extending

我没有完全理解使用接口，所以我不得不问:-)

我使用了一个 BaseClass，它实现了 IBaseClass 接口。这些接口只包含一个声明：

```
public interface IBaseClass
{
    void Refresh ();
} 
```

所以我在我的 Baseclass 中实现了一个 Refresh 方法：

```
 public void Refresh ()
    {
        Console.WriteLine("Refresh");
    } 
```

现在我想使用一些从这些 Baseclass 扩展并实现 IBaseClass 接口的类：

```
 public class ChildClass : BaseClass,IBaseClass
    {
    } 
```

但是在我的 BaseClass 中实施“刷新”的原因我不必再次实施该方法。我应该怎么做，强制“刷新”的实现到 BaseClass 的所有子类以及子类的所有子类中。

谢谢古奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T10:14:15.880

您不能强制派生类以您指定的方式重新实现该方法。你有三个选择：

1.  不要`refresh`在基类中定义。该接口将强制子类实现它。
2.  如果接口的唯一目的是强制实现并声明基类`abstract`以及`refresh`，请避开接口，您不会为此提供实现。
3.  `refresh`在基类中定义为`virtual`. 这允许覆盖但不会强制它们。这是如何`ToString()`工作的。

这一切都假设您的基类大于单个方法。如果确实您的代码正是您发布的内容，那么 Oded 的答案是最佳选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T10:19:53.513

> What should I do, to force the implementation of "Refresh" into all childs of BaseClass as well as all childclasses of childclass.

Like this:

```
interface IBase
{
    void Refresh();
}

abstract class BaseClass : IBase
{
    public abstract void Refresh();
}

class ChildClass : BaseClass
{
    public override void Refresh()
    {
        // Your code
    }
} 
```

You can even omit the interface (my rule of thumb: if an interface gets implemented by exactly one class, dump the interface. Don't cling on to interfacitis. An abstract class quite much represents an interface, see also [Interface vs Abstract Class (general OO)](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)).

If you do need an implementation in the base class, build it as such:

```
(abstract) class BaseClass ( : IBase)
{
    public virtual void Refresh()
    {
        // Your code
    }
} 
```

Which you can then call from your derived classes:

```
public override void Refresh()
{
    // Your code

    // optionally, to call the base implementation:
    base.Refresh();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T10:14:24.007

简单的。不要提供基类实现，您必须在每个继承类中实现该方法。

实现这一目标的一种方法是进行`BaseClass` [抽象](http://msdn.microsoft.com/en-us/library/sf985hc5.aspx)：

```
public abstract BaseClass : IBaseClass
{
    public abstract void Refresh();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T10:18:50.427

If you want to supply a default implementation, do it in your base class by marking it as virtual, so you can override that implementation in subclasses if you want.

Otherwise mark the method as abstract in your base class, so your subclasses are forced to implement the method themselves.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T14:33:51.287

让我们一步一步来看看。

**1：**你有一个定义你的代码合约的接口，定义如下：

```
public interface IBase
{
    void Refresh();
} 
```

**2：**你有一个实现你的接口的基类。（*您会注意到刷新的实现是`virtual`。这允许您在派生类中覆盖此方法*）。

```
class Base : IBase
{
    public virtual void Refresh()
    {
        //Implementation
    }
} 
```

**3：**你有一个派生自 Base 的超类。（*您会注意到派生类不需要显式实现`IBase`，因为它是在较低级别完成的。我将向您展示您可以测试它的完整性*）。

```
class Child : Base
{
    public override void Refresh()
    {
        base.Refresh(); //You can call this here if you need to perform the super objects Refresh() before yor own.
        //Add your implementation here.
    }
} 
```

在这一点上，你可能会想；“*好的，那么 Child 是如何实现 IBase 的？* ”。答案是它是通过Base间接实现的，因为`Child`继承`Base`了，它也得到了`IBase`.

因此，如果你要写：

```
IBase instance = new Child(); 
```

这是完全合法的，因为本质上是间接`Child`衍生的。`IBase`

如果您想对此进行测试，可以在代码中执行此操作：

```
bool canAssign = typeof(IBase).IsAssignableFrom(typeof(Child));
//canAssign should be true as Child can be assigned from IBase. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T10:51:08.517

可能是**新**关键字可以帮助你；

```
namespace ConsoleApplication1
{
    interface IBase
    {
        void Referesh();
    }
    public class Base1 : IBase
    {
        public void Referesh()
        {
            Console.WriteLine("Hi"); 
        }
    }
    public class Class1 : Base1, IBase
    {
        public new void Referesh()
        {
            Console.WriteLine("Bye");
        }

    }
    class Program
    {
        static void Main(string[] args)
        {
            Class1 obj = new Class1();
            obj.Referesh();

            Console.ReadKey();
        }
    }
} 
```

# django - 在包含上找不到 Django URL conf 页面

> ID：13817979
> 
> 赞同：2
> 
> 时间：2012-12-11T10:11:58.920
> 
> 标签：django, url

我的 URLconf 出现一个奇怪的错误。

我有以下设置。

```
# root conf
urlpatterns = patterns('',
    # ...
    url(r'^cart/', include('bbhq.cart.urls')),
    # ...
)

# bbhq.cart.urls
urlpatterns = patterns('',
    # ...
    url(r'^add_to_cart$', add_to_cart, name='add-to-cart-page'),
    # ...
) 
```

我有一个使用反向功能的表格（成功）

```
<form method="post" action="{% url add-to-cart-page %}"> 
```

但是，当我提交表单时，找不到 404 页面。

我无法弄清楚这里发生了什么。反向功能如何工作，但在实际网址上给我一个 404？

我不知道它是否相关，但 404 上的调试信息并没有像在这些情况下经常那样显示搜索的正则表达式列表。这就是我所得到的——

```
Page not found (404)
Request Method: POST
Request URL:    http://192.168.1.98:8000/cart/add_to_cart 
```

我的视图代码是 -

```
def add_to_cart(request):
    if request.method == 'POST':
        if 'cart' in request.session:
            cart = request.session['cart']
        else:
            cart = Cart()
        if 'item_id' not in request.POST:
            raise Http404
        else:
            try:
                item = StockItem.objects.get(pk=int(request.POST['item_id']))
            except:
                raise Http404
            cart_add(cart, item)
            request.session.modified = True
        if request.is_ajax():
            return render_to_response('cart/cart_summary.html',
                                      {'cart_count': cart_items(cart),
                                       'cart_total': cart_total(cart)},
                            context_instance=RequestContext(request))
        else:
            return HttpResponseRedirect(reverse('cart-page'))
    else:
        raise PermissionDenied 
```

我也尝试在 url 上附加一个斜杠，但我得到了完全相同的错误 -

```
url(r'^add_to_cart/$', add_to_cart, name='add-to-cart-page'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:50:03.863

当您收到标准 404（没有堆栈跟踪的）通常意味着它执行了您的`raise Http404()`. 我建议您使用[消息](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)和[重定向](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)来使您的用户和您自己的事情变得更容易：

```
def add_to_cart(request):
    if request.method == 'POST':
        if 'cart' in request.session:
            cart = request.session['cart']
        else:
            cart = Cart()
        if 'item_id' not in request.POST:
            '''
            HERE BE CHANGES
            '''
            # The id was not supplied
            messages.error(request, 'No item was provided')
            return HttpResponseRedirect(request.META['HTTP_REFERER'])
        else:
            try:
                item = StockItem.objects.get(pk=int(request.POST['item_id']))
            except:
                '''
                HERE BE CHANGES
                '''
                # The item was not found in the database
                messages.error(request, 'Unable to find the specified item.'
                return HttpResponseRedirect(request.META['HTTP_REFERER'])
            cart_add(cart, item)
            request.session.modified = True
        if request.is_ajax():
            return render_to_response('cart/cart_summary.html',
                                      {'cart_count': cart_items(cart),
                                       'cart_total': cart_total(cart)},
                            context_instance=RequestContext(request))
        else:
            return HttpResponseRedirect(reverse('cart-page'))
    else:
        raise PermissionDenied 
```

# dotnetnuke - 编译 DotNetNuke 06.02.05 在 Globals.cs 中引发异常

> ID：13817981
> 
> 赞同：0
> 
> 时间：2012-12-11T10:12:00.120
> 
> 标签：dotnetnuke, dotnetnuke-6

我刚刚安装了一个带有 DotNetNuke 06.02.05 源代码的新副本。我已经使用 VS 2010 编译但由于 globals.cs 中的以下异常而无法完成

```
Object reference not set to an instance of an object. 
```

资源：

```
string strMessage = DataProvider.Instance().GetProviderPath(); 
```

我没有更改代码中的任何内容，只是打开了解决方案并编译。

有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:12:00.120

删除`web.config`重命名`release.config`为`web.config`.

# c# - 如果每个复选框的值与使用 jquery 的 c# 数组字符串中的字符串匹配，则检查复选框

> ID：13817985
> 
> 赞同：1
> 
> 时间：2012-12-11T10:12:03.227
> 
> 标签：c#, jquery, asp.net-mvc

我有 asp.net mvc 3 应用程序。我已经构建了由具有相同名称和不同值的不同复选框组成的编辑视图。我想通过将复选框的值与 c# 字符串数组中的值匹配来检查复选框。

**行动：**

```
public ActionResult Edit(int id)
{
    string[] AllRole = roleassign.Role.Split(',');
    ViewBag.allrole = AllRole;
    ViewBag.role = ivr.get_all_role();
    return View();
} 
```

AllRole 是由“administrator”、“member”、“supervisor”组成的数组字符串

**看法**

```
 @foreach (var list in ViewBag.role)
            {
            <input type="checkbox" name="role" value=@list.Name /> @list.Name
            } 
```

如何遍历 jquery 中的 ViewBag.allrole 数组字符串并选中具有 ViewBag.allrole 数组字符串中的值的复选框。 **在视图中编辑** 它会创建所有可用角色的整套复选框，如下所示：

```
<input type="checkbox" value="Administrator" name="role">
Administrator
<input type="checkbox" value="Moderator" name="role">
Moderator
<input type="checkbox" value="voice" name="role">
voiceanchor
<input type="checkbox" value="member" name="role">
member 
```

如果 ViewBag.allrole 由数组组成，`"administrator","moderator"`那么我想使用 jquery 在复选框中选中带有这些值的复选框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:03:49.933

如果您使用的是 .NET Membership，您可以执行以下操作：

```
@foreach (var role in Roles.GetAllRoles)
{
    bool checked = Roles.IsUserInRole(role);

    <input 
         type="checkbox"  
         name="role" 
         value="@role.Name" 
         @(checked ? "checked='checked'" : "")/> @role.Name
} 
```

在您的特定示例中，您几乎可以执行相同的操作

```
string[] userRoles = ViewBag.role;

@foreach (var list in ViewBag.allrole)
{
    bool checked = userRoles.Contains(role);

    <input 
         type="checkbox" 
         name="role" 
         value="@list.Name" 
         @(checked ? "checked='checked'" : "")/> @list.Name
} 
```

如果我错过了什么，请相应地更改您的变量，因为它们不是很直观。

# python - 如何使用 jinja2 在龙卷风中创建如下所示的小部件

> ID：13817986
> 
> 赞同：2
> 
> 时间：2012-12-11T10:12:03.570
> 
> 标签：python, tornado, jinja2, web-frameworks

我想创建一个像上图这样的模板——其中的数字也可以根据我的输入数据和一个图来改变。如何在龙卷风网络框架工作的 jinja2 模板引擎中执行此操作。（Python）

关于无花果的说明：

无花果包含一个红色框和一个 (Nom : 1) （其中数字可以根据 i/p 变化）并且还包含一个小无花果

# sql-server-2008 - 检查两个sql条件并将其显示在同一列中

> ID：13817991
> 
> 赞同：0
> 
> 时间：2012-12-11T10:12:12.010
> 
> 标签：sql-server-2008, asp-classic

我有两个条件的 sql 结果..我需要在 asp 的同一列中打印这两个条件..

**sql查询**

```
select P.[Port Name], CR.Name as country,CASE
when SIH.[Ship-to Code] = '' then (select C.Name  from [Customer] C where C.No_ = SIH.[Sell-to Customer No_])
end as name,
case 
when SIH.[Ship-to Code] = '' then (select C.Address  from [Customer] C where C.No_ = SIH.[Sell-to Customer No_])
end as addr, 
case
when SIH.[Ship-to Code] = '' then  (select C.[City] from [Customer] C where C.No_ = SIH.[Sell-to Customer No_])
end as city
from [Sales Invoice Header] SIH, [Port] P, [Country_Region] CR where No_ = 'PEXP1213-523' and P.Code = SIH.Port
and CR.Code = SIH.[Country of Final Destination]
union all
select P.[Port Name], CR.Name as country,
case
when SIH.[Ship-to Code] <> '' then (select C.Name from [Ship-to Address] C where C.Code = SIH.[Ship-to Code] and C.[Customer No_] = SIH.[Sell-to Customer No_])
end as name,
case
when SIH.[Ship-to Code] <> '' then  (select C.[Address] from [Ship-to Address] C where C.Code = SIH.[Ship-to Code] and C.[Customer No_] = SIH.[Sell-to Customer No_])
end as addr,
case
when SIH.[Ship-to Code] <> '' then  (select C.[City] from [Ship-to Address] C where C.Code = SIH.[Ship-to Code] and C.[Customer No_] = SIH.[Sell-to Customer No_])
end as city
 from [Sales Invoice Header] SIH, [Port] P, [Country_Region] CR where No_ = 'PEXP1213-524' and P.Code = SIH.Port
 and CR.Code = SIH.[Country of Final Destination] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:54:50.827

```
select P.[Port Name], CR.Name as country, c.Name, c.Address, c.City
from [Sales Invoice Header] SIH
inner join Port P On P.Code = SIH.Port
inner join Country_Region CR On CR.Code = SIH.[Country of Final Destination]
inner join Customer C.No_ = SIH.[Sell-to Customer No_]) 
where No_ = 'PEXP1213-523' and SIH.[Ship_to Code] = ''
union all
select P.[Port Name], CR.Name as country, SIH.Name, SIH.Address,SIH.City
From [Sales Invoice Header] SIH
inner join Port P On P.Code = SIH.Port
inner join Country_Region CR On CR.Code = SIH.[Country of Final Destination]
Where No_ = 'PEXP1213-524' and SIH.[Ship_to Code] <> '' 
```

更容易阅读，可能会帮助您找出问题所在。使用 ansi join 语法，而不是 92 之前的东西，并且为了 Cthulhu 的缘故，至少为您的列和表选择一种命名约定。

哦，你可能必须在 No_ 前面加上它所在的任何表，因为我不知道。

# oracle - 通过过程执行查询构建

> ID：13817993
> 
> 赞同：0
> 
> 时间：2012-12-11T10:12:15.697
> 
> 标签：oracle, plsql

在一个过程中，我首先使用数据库中的一些数据构建一个查询（选择的联合）。然后我想将查询结果放在一个文件中，但是当我尝试使用 `execute immediate`或`dbms_sql.execute`遵循我构建的查询时，什么也没发生。

所以我想知道，如何执行这样的查询？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T10:39:17.180

```
SET SERVEROUTPUT ON;
SPOOL TEST.TXT

DECLARE
   test_cur   SYS_REFCURSOR;
   v_date     DATE;
BEGIN
   OPEN test_cur FOR 'SELECT SYSDATE FROM DUAL';

   FETCH test_cur INTO   v_date;

   CLOSE test_cur;

   DBMS_OUTPUT.put_line ('DATE IS ' || v_date);
END;

SPOOL OFF

DATE IS 11-DEC-12
PL/SQL procedure successfully completed. 
```

或直接不使用 PLSQL 块

```
SET SERVEROUTPUT ON;
SPOOL TEST.TXT
SELECT SYSDATE FROM DUAL;
SPOOL OFF

SYSDATE  
---------
11-DEC-12
1 row selected. 
```

**编辑**

```
SET SERVEROUTPUT ON;
SPOOL TEST.TXT

DECLARE
  CURSOR  test_cur   
   IS SELECT * FROM XYZ;
BEGIN
   FOR v_test_row IN test_cur;
   LOOP
    DBMS_OUTPUT.put_line ('XXXYYYY ' || v_test_row .<your column name>);
   END LOOP;

END;

SPOOL OFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:23:43.363

当从像 SQL*Plus 这样的客户端执行查询时，很容易忘记客户端程序在后台打开一个游标并循环获取每一行。在 PL/SQL 中你必须这样做：

*   打开游标（打开）
*   环形
    *   将一行提取到变量中
    *   没有更多行时退出
    *   对变量做任何事情
*   结束循环

# javascript - IE8 及以下版本的 InnerHTML 问题

> ID：13817999
> 
> 赞同：4
> 
> 时间：2012-12-11T10:12:45.167
> 
> 标签：javascript, html, innerhtml

我正在编辑来自以前开发人员的一些代码，用于时间表过滤系统。我自己解决这个问题的方法是使用 jQuery，所以我在调试这个问题时遇到了一些问题。IE 中的 Javascript 似乎存在问题。

这是出现问题的代码：

Javascript：

```
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById("showtimetable").innerHTML=xmlhttp.responseText;
        jQuery('div #moreInfo a').each(function()
{
    var $link = jQuery(this);
    var $dialog = jQuery('<div></div>')
    .load($link.attr('href') + ' #content')
    .dialog
    ({
        autoOpen: false,
        title: $link.attr('title'),
        width: 600
    });

$link.click(function()
{
    $dialog.dialog('open');
    return false;
}); 
```

和标记：

```
<div id="showtimetable">
<table class="tidytable">
    <thead>
        <tr>
            <th width="20%">
                Venue
            </th>
            <th width="18%">
                Session
            </th>
            <th width="18%">
                Age
            </th>
            <th width="15%">
                <?php echo JText::_('COM_TIMETABLE_HEADING_GROUP'); ?>
            </th>
            <th width="10%">
                <?php echo JText::_('COM_TIMETABLE_HEADING_WEEKDAY'); ?>
            </th>
            <?php /*<th width="13%">
                Activity
            </th>*/ ?>
            <th width="14%">
                Time
            </th>
            <th width="5%">
                Info
            </th>

      </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="13">
                <?php //echo $this->pagination->getListFooter(); ?>
            </td>
        </tr>
    </tfoot>
    <tbody>
        <?php foreach($this->items as $i => $item): ?>
            <tr class="row<?php echo $i % 2; ?>">
                <td>                       
                    <?php if($item->centreDescription!=''){echo '<a href="'.$item->centreDescription.'" >'.$item->centre.'</a>';}
                    else {echo $item->centre;}?>
                </td>                    
                <td>
                    <?php echo $item->class;?>
                </td>
                <td>
                     <?php echo $item->ageRange;?>
                </td>
                <td>
                    <?php echo $item->gn;?>
                </td>
                <td>
                    <?php TimeTablesHelper::getWeekday($item->weekday);?>
                </td>
                <?php /*<td>
                    <?php echo $item->activity; ?>
                </td>*/?>
                <td>
                    <?php echo substr($item->startTime,0,5); ?> - <?php echo substr($item->endTime,0,5); ?>
                </td>
              <td width="5%">
                <?php if($item->bookingInfo!=''){?>
                <div id="moreInfo">
                  <a href="moreinfo.php?id=<?php echo $item->id;?>" title="More Details...">+</a>
                </div>      
                <?php }?>     
              </td>                       
            </tr>              
        <?php endforeach; ?>
    </tbody>
</table> 
```

这是 xml 响应中的内容：

```
<form action="/component/timetable/" method="post" name="adminForm">
<table class="tidytable">
    <thead>
        <tr>
            <th width="20%">
                Venue
            </th>
            <th width="18%">
                Session
            </th>
            <th width="18%">
                Age
            </th>
            <th width="15%">
                Group           </th>
            <th width="10%">
                Weekday         </th>
                        <th width="14%">
                Time
            </th>
            <th width="5%">
                Info
            </th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="13">
            </td>
        </tr>
    </tfoot>
        <tbody>
            <tr class="row0">
                    <td>                       
                        Heywood Civic Centre                     </td>                    
                    <td>
                        50+ Bowls                    </td>
                    <td>
                         Aged 50 plus                    </td>
                    <td>
                        50 Plus                    </td>
                    <td>
                        Thursday                    </td>
                                        <td>
                        13:00 - 16:00                    </td>
                    <td width="5%">
                                        <div id="moreInfo">
                        <a href="/moreinfo.php?id=303" title="More Details...">+</a>
                    </div>      

                    </td>                       
                </tr>              
        </tbody>
    </table>
    <input type="hidden" name="task" value="" />
</form> 
```

这在 Firefox 和 IE9 中运行良好，但在 IE8 及以下版本中，我收到 SCRIPT601: unknown runtime error Fitness-classes, line 564 character 7 ，它指的是 javascript 中带有 innerHTML 函数的行。

我不确定为什么会出现这个问题，但它阻止了任何 Javascipt 工作。

有谁知道为什么会发生这种情况？

提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T10:24:27.800

当您不遵循 W3C 标签建议时会发生此错误。IE 对此非常挑剔，而 Firefox 则不然。你可以在这里阅读更多：http: [//blog.rakeshpai.me/2007/02/ies-unknown-runtime-error-when-using.html](http://blog.rakeshpai.me/2007/02/ies-unknown-runtime-error-when-using.html)

这是一个可能对您有帮助的类似问题：[Fixing "unknown runtime error" in IE8](https://stackoverflow.com/questions/7892102/fixing-unknown-runtime-error-in-ie8)

这是同一件事的另一个链接，特别是“表单中的表单”问题：http: [//jadendreamer.wordpress.com/2009/06/02/internet-explorer-fix-unknown-runtime-error-using-innerhtml -阿贾克斯/](http://jadendreamer.wordpress.com/2009/06/02/internet-explorer-fix-unknown-runtime-error-using-innerhtml-ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:20:28.583

看看这里：[http ://blog.rakeshpai.me/2007/02/ies-unknown-runtime-error-when-using.html](http://blog.rakeshpai.me/2007/02/ies-unknown-runtime-error-when-using.html)

当您尝试插入它不喜欢的 html 时，似乎 IE 会抛出此错误。里面有什么`xmlhttp.responsetext`？您是否尝试在可能的下方添加`tr`或直接添加？`td``div`