# StackOverflow 问答 15594000-15594999

# uibutton - 从另一个视图控制器返回后按钮不会隐藏

> ID：15594000
> 
> 赞同：0
> 
> 时间：2013-03-24T01:05:59.627
> 
> 标签：uibutton, uitabbarcontroller, uibarbuttonitem, hidden

我有一个带有标签栏和许多标签栏项目的应用程序，每个项目都有自己的 VC。在 HOME 选项卡栏视图上，我有一组以`UIButtons`编程方式生成的。我有一个特定的按钮（“隐藏按钮”），按下时会禁用/隐藏其他按钮。按预期工作。

但是，当我点击第二个标签栏项目然后返回到原始标签并点击“隐藏按钮”按钮时 - 它们保持可见/启用。如果我在“隐藏按钮”按钮调用的方法中设置断点，我注意到其中一个按钮的内存地址，在切换到另一个视图并返回后，我注意到相同的 UIButton 内存地址不同。不知道为什么。

它们都以等形式在块`UIButtons`内的 HOME VC 中定义，并在 viewDidAppear: 中初始化：使用以下类型的代码：`@implementation``UIButton *originalButton; UIButton *hideButtonsButton;`

```
// ORIGINAL BUTTON TAG = 1
originalButton = [UIButton buttonWithType:UIButtonTypeCustom];
[originalButton addTarget:self action:@selector(originalButtonWasPressed:) forControlEvents:UIControlEventTouchUpInside];
originalButton.frame = CGRectMake(20.0, 30.0, 100.0, 39.0);
UIImage *originalButtonImage = [[UIImage imageNamed:@"originalreg.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
UIImage *originalButtonImageHighlight = [[UIImage imageNamed:@"originalregblue.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(18, 18, 18, 18)];
[originalButton setBackgroundImage:originalButtonImage forState:UIControlStateNormal];
[originalButton setBackgroundImage:originalButtonImageHighlight forState:UIControlStateHighlighted];
[self.view addSubview:originalButton]; 
```

任何指导表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:35:34.290

呃。我将按钮初始化方法的调用移至 viewDidLoad 与 viewDidAppear。现在一切都很好。

# prolog - Prolog从列表的第i个元素创建集合列表

> ID：15594005
> 
> 赞同：1
> 
> 时间：2013-03-24T01:06:55.170
> 
> 标签：prolog

我有列表结构

```
L=[[a,b,c,d],[a,f,c,h]] 
```

L 的长度可以大于 2。我想合并列表的元素，以便 L 或 NewL 成为

```
L=[a,[b,f],c,[d-h]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:05:21.500

这可能是你想要的：

```
unite([[],[]], []).
unite([[X|Ls], [X|Rs]], [X|Rest]) :- unite([Ls, Rs], Rest).
unite([[L|Ls], [R|Rs]], [[L,R]|Rest]) :- L \= R, unite([Ls, Rs], Rest). 
```

但是，我同意@false，因为这是一个奇怪的 API，并且有很多未处理的边缘情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T08:48:07.400

您需要的是聚合模式。我想我明白了：

```
unite(Ls, [E|Es]) :-
    aggreg(Ls, E, Ns),
    unite(Ns, Es).
unite(_, []).

aggreg(L, E, LLs) :-
    maplist(first, L, Fs, LLs),
    setof(X, member(X, Fs), S),
    ( [E] = S -> true ; E = S ).

first([E|Es], E, Es). 
```

产量

```
?- L=[[a,b,c,d],[a,f,c,h],[a,f,c,g]],unite(L,U).
L = [[a, b, c, d], [a, f, c, h], [a, f, c, g]],
U = [a, [b, f], c, [d, g, h]] ;
L = [[a, b, c, d], [a, f, c, h], [a, f, c, g]],
U = [a, [b, f], c] . 
```

我认为第一个解决方案之后的削减会很好（使用[一次](http://www.swi-prolog.org/pldoc/doc_for?object=once/1)/1）。

请注意，它的架构相当通用：只需在 setof/3 中替换一些比统一更适用的任务（如果有的话）（例如，您可以调用您的数据库）。

# google-maps - 来自数据库 cat 的动态信息窗口数组开始工作。包括显示/隐藏不同的标记类型和标记簇

> ID：15594006
> 
> 赞同：1
> 
> 时间：2013-03-24T01:06:55.973
> 
> 标签：google-maps, google-maps-markers

我试着让我的地图工作一个多月了。我已经阅读了很多帖子，但无法使其 100% 正常工作。我从这里尝试了各种建议。到目前为止，集群标记有效，显示/隐藏标记类型有效。问题是我无法使用循环获取每个标记的动态信息窗口。到目前为止，如果我使用位置 [i] [0] 作为名称等，我可以获得数据。主要问题是我需要在信息窗口中有指向详细信息页面的链接。没有这种能力，这张地图就没有意义。如果有人可以提供一些建议或解决方案，那就太棒了。

当我在 infowindow.setContent 中使用时，contentInfoWindow 会制动信息窗口。infowindow.setContent 仅在像这样`infowindow.setContent(locations[i][0]);`用于显示名称时才有效。我可以添加更多位置数组，但这不是我需要的。

这是完整的代码。

```
function getHtmlInfoWindow($item)
    {
    if($item->imagename!=NULL){ $img=$item->imagename->name;}else{$img='noimage.jpg';}
   $myHtml='';
   $myHtml .='<div id="propertydetail"><div class="title">';
   $myHtml .='<a target="_parent" href="'. $item->link.'" title="'.str_replace('"',' ',$item->name).'">'.$item->name.'</a></div>';
   $myHtml .='<div class="image"><img src="images/properties/images/thumbs/'.$item->id.'/'.$img.'" alt="'.str_replace('"',' ',$item->name).'" width="100" height="75"></div>';
   $myHtml .='<div class="text">';
    if ($item->name_type) {
      $myHtml .=JText::_($item->name_type).'<br />';
   }
   if ($item->name_category) {
      $myHtml .=JText::_($item->name_category).'<br />';
   }
   if ($item->name_locality) {
      $myHtml .=JText::_($item->name_locality).'<br />';
   }
   if ($item->address) {
      $myHtml .=JText::_($item->address).'<br />';
   }
   $myHtml .='</div>';
   $myHtml .='<div class="property_button">';
   $myHtmlimg ='<a target="_parent" class="BottomlnkDetail" href="'.$item->link.'" title="'.$item->id.'">'.JText::_('MOD_PROP_MAP_VIEW_DETAILS').'</a>';
   //$myHtml .='<button type="button" id="sbox-btn-close" onclick="window.parent.document.getElementById(\\\'sbox-window\\\').close();window.close();">Cancelar</button>';
   $myHtml .='</div>';
   $myHtml .='</div>';
    return $myHtml;
    }

   $useTranslations=$cParams->get('useTranslations','0');
   if($useTranslations)
    {
      $lang =& JFactory::getLanguage();
      $thisLang = $lang->getTag();
    }else{
      $thisLang  = NULL;
    }
   $item=$list[0];
   $MapDistance=$params->get('MapDistance',14);
   $lat = $item->lat;
   $lng = $item->lng;
?>

 <div id="map" style="width: 100%; height: 500px;"></div>

<fieldset id="form">
   <p>
    <input class="checkbox" id="1" name="1" type="checkbox" checked="checked" value="1" />
    <label for="1"><?php echo JText::_('APARTMENT');?></label>
    </p>
    <p>
    <input class="checkbox" id="2" name="2" type="checkbox" checked="checked" value="2" />
    <label for="2"><?php echo JText::_('ROOM');?></label>
    </p>
    <p>
    <input class="checkbox" id="3" name="3" type="checkbox" checked="checked" value="3" />
    <label for="3"><?php echo JText::_('HOUSE');?></label>
    </p>
    <p>
    <input class="checkbox" id="4" name="4" type="checkbox" checked="checked" value="4" />
    <label for="4"><?php echo JText::_('HOTEL');?></label>
    </p>

</fieldset>

<script src="http://maps.google.com/maps/api/js?sensor=false&language=<?php echo $thisLang;?>" type="text/javascript"></script>
<script type="text/javascript" src="modules/mod_prop_map/tmpl/markerclusterer.js"></script>

    <script type="text/javascript">

    var contentInfoWindow=new Array();
    <?php
        for($x=0;$x<count($list);$x++)
            {
            echo "\n"."contentInfoWindow[".$x."]='".getHtmlInfoWindow($list[$x])."';"."\n";
            }
        ?>

 var markers = new Array();
    var locations = [
     <?php
        for($x=0;$x<count($list);$x++)
            {
            $product = $list[$x];
            echo "['".$product->name."',".$product->type.",".$product->lat.",".$product->lng.",".$x."],"."\n";
            }
        ?>
    ];

var mcOptions =
    {
        gridSize: 50//, maxZoom: 6
    };

    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: <?php echo $MapDistance;?>,
          scrollwheel: true,
      center: new google.maps.LatLng(<?php echo $lat;?>, <?php echo $lng;?>),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

var markerCluster = null;   // Initializes markerCluster
    var markers = []; 
    var marker, i;

    for (var i = 0; i < locations.length; i++) {
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][2], locations[i][3]),
        map: map,
        icon: '<?php echo JURI::base()?>components/com_properties/includes/img/map_'+locations[i][1]+'_marker.png'

      });

        markers.push(marker);
        map.setCenter(marker.getPosition());    

var infowindow = new google.maps.InfoWindow();
google.maps.event.addListener(marker, 'click', (function(marker, i) { return function() {

infowindow.setContent(locations[i][0]);
          infowindow.open(map, marker);
          //zIndex: locations[i][1]
        }
      })(marker, i));
    }

var markerCluster = new MarkerClusterer(map, markers);

    // == shows all markers of a particular category, and ensures the checkbox is checked ==
      function show(type) {
        for (var i=0; i<locations.length; i++) {
          if (locations[i][1] == type) {
            markers[i].setVisible(true);
          }
        }
      }

      // == hides all markers of a particular category, and ensures the checkbox is cleared ==
      function hide(type) {
        for (var i=0; i<locations.length; i++) {
          if (locations[i][1] == type) {
            markers[i].setVisible(false);
          }
        }
      }

         (function($){

      // == show or hide the categories initially ==

        $(".checkbox").click(function(){
            var types = $(this).attr("value");

            // If checked
            if ($(this).is(":checked"))
            {
                show(types);
            }
            else
            {
                hide(types);
            }
          });
         })(jQuery);

</script> 
```

# android - Sencha Touch / Android 中的字体/SVG 渲染工件

> ID：15594008
> 
> 赞同：0
> 
> 时间：2013-03-24T01:06:56.020
> 
> 标签：android, sencha-touch-2, rendering, android-browser

我有以下问题：Android 浏览器在使用 Sencha Touch 2 制作的网页中呈现字体和 SVG 伪影。

在短暂的延迟（大约 0.5 秒）后，它似乎会重新渲染每张卡片，`Ext.navigation.View`然后才会显示人工制品。此外，并非所有文本似乎都受到影响。

有没有人认识到这种行为并知道如何解决这个问题？

*至于 SVG 问题，我发现一个奇怪的解决方法是用等效的 PNG 替换其中一个 SVG 图像，但我真的很想知道是什么导致了伪影的发生。*

**示例**（人工制品/参考）：

![字体渲染神器](../Images/8ebd01bfbfd5c26c49c15d997e5c8e77.png)

![无伪影的字体渲染](../Images/fd2c5b0f1078eb762ff1f15d0a8b6323.png)

![SVG渲染神器](../Images/faf74442d227af2f29fe70e3d64cdbdf.png)

![无伪影的 SVG 渲染](../Images/cd60bd0f7ae3075f9013c8135c84ba42.png)

*所有按钮的样式都带有`background-image: url(file.svg)`*

# xcode - 将字符串从 xml 转换为 NSDate 以及如何翻译日期

> ID：15594012
> 
> 赞同：0
> 
> 时间：2013-03-24T01:07:11.810
> 
> 标签：xcode, nsdate, xcode4.5, nsdateformatter

这是我的数据字符串：

```
<pubDate>Sun, 24 Mar 2013 00:42:13 +0200</pubDate> 
```

我想将其转换为“Sun, 24/3/13, 00:42”并将日期名称翻译为希伯来语。

到目前为止，这是我的代码：

```
 currentPubDate = [self.xmlParser.pubDate objectAtIndex:indexPath.row];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setTimeStyle:NSDateFormatterNoStyle];
    [dateFormatter setDateStyle:NSDateFormatterMediumStyle];
    NSLocale *loacle = [[NSLocale alloc]initWithLocaleIdentifier:@"he_IL"];
    [dateFormatter setLocale:loacle];
    [dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];
    [dateFormatter dateFromString:currentPubDate]; 
```

我应该怎么做才能让它工作？我已经阅读了一些指南，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:48:01.550

这是您第一部分的答案

```
NSString *currentPubDate = @"Sun, 24 Mar 2013 00:42:13 +0200";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];

[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss Z"];
NSDate *date = [dateFormatter dateFromString:currentPubDate];
[dateFormatter setDateFormat:@"EEE, dd/M/yy HH:mm"];
NSLog(@"%@", [dateFormatter stringFromDate:date]); 
```

对于翻译部分，您必须设置语言环境，但这在我的系统中也不起作用。

# python - 使用 Requests Python 包的钩子问题

> ID：15594015
> 
> 赞同：6
> 
> 时间：2013-03-24T01:07:28.887
> 
> 标签：python, python-2.7, python-3.x, request, typeerror

我正在使用该模块`requests`，并且在开始使用挂钩时收到了此消息。

```
File "/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/sessions.py", line 321, in request
resp = self.send(prep, **send_kwargs)

File "/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/sessions.py", line 426, in send
r = dispatch_hook('response', hooks, r, **kwargs)

File "/Library/Python/2.7/site-packages/requests-1.1.0-py2.7.egg/requests/hooks.py", line 41, in dispatch_hook
_hook_data = hook(hook_data, **kwargs)
TypeError: hook() got an unexpected keyword argument 'verify' 
```

这是我的代码（简化）：

```
import requests
def hook(r):
     print r.json()

r = requests.get("http://search.twitter.com/search.json?q=blue%20angels&rpp=5", hooks=dict(response=hook)) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-24T01:18:45.663

根据[requests 文档](http://docs.python-requests.org/en/latest/)，您的钩子函数不需要任何关键字参数，但根据[github 上的源代码](https://github.com/kennethreitz/requests/blob/master/requests/hooks.py)，事件调度程序可能会将 kwargs 传递给您的钩子函数。对我来说，这似乎是不完整的文档。将您的方法重新定义为：

```
def hook(r, **kwargs):
    # ... 
```

# ios6 - 是否使用自动布局 iOS 6.x

> ID：15594020
> 
> 赞同：6
> 
> 时间：2013-03-24T01:08:26.210
> 
> 标签：ios6, autolayout

我正在 iOS 6.1 上使用 Storyboard 开发一个应用程序（具有许多功能 - 星级排名、sqlite DB、苹果地图等）。有时碰巧我必须禁用自动布局（`UIScrollView`例如）或使用代码来解决问题，但还有其他示例。但是，当我禁用它时，我必须配置`UILabels`确切的宽度或其他东西。

什么是最好的选择？在 iOS 6.x 上使用自动布局还是不使用 Storyboard？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:51:14.743

自动布局，与近年来添加到[ios](/questions/tagged/ios "显示标记为“ios”的问题")的许多其他功能（例如[arc](/questions/tagged/arc "显示标记为“弧”的问题")和[storyboards](/questions/tagged/storyboards "显示标记为“故事板”的问题")）一样，旨在为刚开始使用 iOS/Mac 平台的人或已经在那里但不知道的人简化开发。 t 来自 NeXT 或 OS X 的早期阶段，因此可以对整个开发工作流程进行一些简化。

您可以做的一件事是默认使用[自动布局](/questions/tagged/autolayout "显示标记为“自动布局”的问题")，因此更容易编写在纵向和横向上执行的 ViewController，并在那些您更愿意使用旧的弹簧和支柱系统保持一切的罕见情况下禁用它。您可以做的另一件事是在代码中添加 Autolayout 约束，而不是通过 Xcode 的 Interface Builder，如果这更适合您的风格。

我的建议是使用任何能让你更舒服的系统，不管当前的趋势是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T11:06:16.510

我不使用自动布局，因为它现在是原始的。如果您订购约束然后决定移动一个元素，您可能会得到一个真正的混乱。

此时使用弹簧和支柱要安全得多。

Upd.：但是在 iOS7 中使用它是可以的——在 Xcode 5 中有很多有用的工具。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T04:22:59.650

老实说，这取决于偏好，但我从不使用自动布局，我怀疑我永远不会。我想我只是更喜欢一切都是我指定的方式，我不相信自动布局。

# variables - 如何在两个大括号之间输入 - 批处理文件

> ID：15594024
> 
> 赞同：2
> 
> 时间：2013-03-24T01:08:47.323
> 
> 标签：variables, batch-file, windows-xp, ip-address, user-input

嘿，我又来了，这次我想知道如何在输入变量的括号之间输入 IP 地址。

我希望代码看起来像这样。

```
set input=
set /p input=IP Address: [     ].[     ].[     ].[     ] 
```

一旦我执行了批处理并输入了我的 IP，我希望它看起来像这样。

```
IP Address: [ 127 ].[ 0 ].[ 0 ].[ 1 ] 
```

反正有这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:04:53.367

我认为这将是一件非常复杂的事情。

如果您尝试在 Batch 中执行此操作，则需要在用户每次键盘击中时用大括号重写您的行。到目前为止，我知道的唯一一个监听单个 KB-hit 的命令是 Choice 命令。如果您以某种方式管理它以在每个 KB 命中时重复用户输入，您需要使用退格字符对批处理文件进行 bytehack，并具有将用户输入与大括号组合的逻辑。这不仅非常不舒服而且非常缓慢。

我建议让您的用户输入任何字符串，然后通过“regex”检查它（windows regex 不是很好）

这是我用来检查打印机 IP 的示例函数。

%printer% 将是您的用户输入的字符串。这个函数还有一个 nslookup 函数。如果你愿意，你可以省略这个。这第二行做了所有的魔法，但你也可以输入一些不可能的 IP，比如 321.099.000.666

```
:CheckIP
echo %printer% | findstr /R "[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*\.[0-9][0-9]*">nul || goto :EOF
FOR /F "tokens=* delims=" %%A in ('nslookup %printer% 2^>^&1 ') do (
    echo %%A | findstr /R /C:"Name: ">nul && set printer=%%A
    echo %%A | findstr /R /C:"\*\*\*">nul && (set printerfqdn=%printer% & goto printerip)
)
rem ***************************************
rem * Name:    printername.location.companydomain
rem * printerfqdn begins at position 10
rem ***************************************
set printer=%printer:~9%
goto :EOF 
```

# android - 在 android listview 中打开所选项目（它是图像或文本文件）

> ID：15594025
> 
> 赞同：1
> 
> 时间：2013-03-24T01:08:47.503
> 
> 标签：android, android-listview, android-image, android-file

我想在 Android 列表视图中打开一个选定的项目。如果是图像，我想显示它，如果是文本文件，那么我想打开它，但是我的代码不起作用，这里是 oncreate 方法

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ListView lv;
        ArrayList<String> FilesInFolder = GetFiles("/sdcard/DCIM/Camera/", true);
        lv = (ListView) findViewById(R.id.filelist);

        lv.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, FilesInFolder));

        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                // Clicking on items
                String name_of_file =       lv.getItemAtPosition(position).toString();
                Intent myIntent = new Intent(v.getContext(), MainActivity.class);
                Bundle bundle = new Bundle();
                bundle.putString("/sdcard/DCIM/Camera/", name_of_file);
                myIntent.putExtras(bundle);
                try {
                    startActivity(myIntent);
                    finish();
                } catch (android.content.ActivityNotFoundException e) {
                }
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:34:54.357

也许您的 startIntent 触发了 ActivityNotFoundException 异常......

您是否在 AndroidManifest.xml 文件中添加了 MainActivity？

# java - Java web start 应用程序报告 GMT 时区

> ID：15594027
> 
> 赞同：0
> 
> 时间：2013-03-24T01:09:03.060
> 
> 标签：java

我有一个使用 java web start 1.4.2_13 在 windows 2008 服务器上运行的 java 应用程序。应用程序功能，但它报告格林威治标准时间。服务器设置为 EST 时区。如何强制应用程序使用 EST。? 请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:17:32.533

您可以像这样设置时区：

```
System.setProperty("user.timezone", "EST"); 
```

请注意，在调用任何日期函数之前，必须在开始时调用此代码。否则不会生效。

或者您可以将参数传递`-Duser.timezone="EST"`给 JVM。

# sql - “使用”资源变量必须具有显式初始化 vb.net

> ID：15594033
> 
> 赞同：1
> 
> 时间：2013-03-24T01:09:39.773
> 
> 标签：sql, vb.net, using

我正在尝试按照我在[此处](https://stackoverflow.com/questions/889795/writing-sql-code-in-vb-net)找到的说明在数据库表上使用基本命令。这是我第一次做 sql 的东西，我在编译“使用”的第一行时遇到了一些问题。这是我的代码：

```
Dim sql As String = "SELECT * FROM my_table"

Using cn As SqlConnection(getConnectionString()),cmd As New SqlCommand(sql)
    //Do Some Stuff
End Using 
```

我得到的错误是这样的：

```
BC36011: 'Using' resource variable must have an explicit initialization. 
```

我查看了 msdn 参考，但似乎无法弄清楚我做错了什么。我正在使用 vb .net 4.0。谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T01:12:29.527

尝试

```
Using cn As New SqlConnection(getConnectionString()), _
      cmd As New SqlCommand(sql)
    //Do Some Stuff
End Using 
```

# php - PHP/MySQL好友请求系统

> ID：15594035
> 
> 赞同：0
> 
> 时间：2013-03-24T01:09:53.107
> 
> 标签：php, mysql

我正在尝试使用此处找到的 php 代码：[http ://www.thetechideas.com/how-to-make-friendship-request-system-in-php/](http://www.thetechideas.com/how-to-make-friendship-request-system-in-php/)

而且我遇到了很多错误，我不知道为什么。我认为这可能与他们的问号和撇号有关，但我不确定。

通过弄乱引号和撇号，我犯了很多错误，但我仍然遇到错误？有谁知道为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:26:37.287

该代码不是一个很好的示例，它直接在 SQL 语句中使用 $_GET 的内容，并将这些值放入会话中。这些都不是好的做法。他们非常不安全。

从 Internet 读取的所有值都应该经过验证，并且应该使用准备好的语句构建 SQL。这样做将使您的代码更加安全，并减少构建 SQL 所需的引号数量。您应该使用 mysqli 或更好的是 PDO 来允许准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:17:22.250

很难弄清楚为什么这对你来说很糟糕，但乍一看，我看到有很多引号，单引号和双引号，还有问号，如果你是不得不在所有编码中使用这些代码是行不通的吗？您也可能在编辑它时犯了错误。你把这个复制到哪个编辑器中？如果您将其粘贴到 eclipse 之类的东西中，您还会收到错误吗？

# iphone - 在Objective C中更改块中的变量

> ID：15594040
> 
> 赞同：0
> 
> 时间：2013-03-24T01:10:33.703
> 
> 标签：iphone, objective-c, block

我有个问题。我想更改块中的局部变量。我什么都试过了。我把变量 __block 的开始，但没有什么可以改变。我不能改变块中的 myString 值。你可以帮帮我吗 ？这是我的代码：

```
- (IBAction)setButtonPressed:(id)sender {
    placeName = [[[NSMutableString alloc] init] retain];
    __block NSMutableString *myString = [[NSMutableString alloc] init];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    NSDate *today = [NSDate date];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

    [dateFormat setDateFormat:@"dd.MM.yyyy hh:mm:ss"];

    NSString *dateString = [dateFormat stringFromDate:today];

    [previousParkingLon addObject:[NSNumber numberWithFloat:self.longitude]];
    [previousParkingLat addObject:[NSNumber numberWithFloat:self.latitude]];
    [previousParkingsDate addObject:dateString];
    if((self.latitude != 0) && (self.longitude != 0))
    {
        self.geocoder = [[CLGeocoder alloc] init ];
        [self.geocoder reverseGeocodeLocation:locationManager.location completionHandler:^(NSArray *placemarks, NSError *error) {
            CLPlacemark *myplacemark = [placemarks objectAtIndex:0];
            NSString *locatedAt = [[[myplacemark addressDictionary] objectForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
            [myString setString:locatedAt];
        }];
    }
        [previousParkingsPlaceName addObject:placeName];
    NSLog(@"Test %@",myString);
        [defaults setObject:previousParkingLat forKey:@"historyLat"];
        [defaults setObject:previousParkingLon forKey:@"historyLon"];
        [defaults setObject:previousParkingsDate forKey:@"historyDate"];
        [defaults setObject:previousParkingsPlaceName forKey:@"historyName"];

        [defaults synchronize];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:17:17.970

当您在`self.geocoder`完成其操作时执行块时，在您输出之后`locatedAt`附加到（iOS 在继续之前不会执行块）。您会注意到，如果您将其放入块内，则该值将成功输出。`myString``myString``NSLog``NSLog`

如果您想使用 的值`myString`来执行操作，您有两种选择。第一种是包含在`myString`块内使用的代码，或者将其放在一个函数中并从块内调用该函数。不要将代码直接放在块之后！您的第二个选择是在使用`myString`. 创建一个具有全局范围的布尔值，然后在块中将布尔值设置为 YES。然后您可以在使用 的值之前检查 bool 是否设置为 YES `myString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:31:20.330

关键是地理编码器“异步”执行其完成块。到方法的其余部分运行时，该块将不会运行。

ps`__block`无论如何都是不必要的，因为您没有在`myString`任何地方分配给变量

# sql-server-2008 - intellij idea，生成具有关系的持久性映射

> ID：15594042
> 
> 赞同：5
> 
> 时间：2013-03-24T01:11:00.740
> 
> 标签：sql-server-2008, jsf-2, intellij-idea, mapping, openjpa

我有我的 sql server 数据库，我在 intellij 中使用“生成持久性映射”来获取我的 java 类，但是我的 sql server 数据库上定义的关系没有被映射，似乎我可以用“添加关系”添加它们，但我有很多表都有很多关系，所以这样做很痛苦......

有什么东西可以映射数据库，包括关系吗？例如，如果我有一个表用户与表土豆定义了一对多类型的关系，那么得到一个这样的 java 类：

```
public class user{

private int iduser;
private String name;
private String password;

//relationship!!
private ArrayList<Potatoes>potatoes; //this is mapped like "private int id_potatoes" by intillij

public user(){}

//getters and setters

} 
```

我正在使用开放的 JPA。amd 我也找不到用一些基本方法（保存、查找、删除）自动生成 DAO 的方法，我必须自己编写代码！！！我说的是至少 40 张桌子！太荒谬了！

我知道必须有一种方法可以自动完成所有这些事情。哦，我使用的是 jsf 2，我不知道这是否与这个问题有关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-26T10:32:57.650

当您生成持久性映射时，只需**选中**下面的框选项

> 匚 显示默认关系

通过这个生成，你会得到你想要的表关系。希望能帮到你:)

![在此处输入图像描述](../Images/5a9336d9c1770ab7c40afd18741ee566.png)

# javascript - 使用 chrome 打包的应用程序/扩展将数据保存在文本文件中

> ID：15594044
> 
> 赞同：1
> 
> 时间：2013-03-24T01:11:09.593
> 
> 标签：javascript, html, google-chrome-extension, google-chrome-app

由于 Chrome 打包/扩展只用 HTML5、JavaScript 和 CSS 编写，我想知道有没有一种方法可以在不使用像 php 这样的服务器脚本语言的情况下将数据保存在文本文件中？我需要做的就是在用户单击保存数据时将一些变量值保存到文本文件中。因此，既然我只能使用 JavaScript、HTML5，有没有办法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:43:36.890

这些应该可以帮助您...我的应用程序将用户信用保存在 Chrome 存储中：

```
 // init storage
var storage = chrome.storage.sync;

// listens for events when storage changes (debug)
chrome.storage.onChanged.addListener(function(changes, namespace) {
  for(key in changes) {
    var storageChange = changes[key];
    if(debug)
      console.log('Storage key "%s" in namespace "%s" changed. Old value was: %s, new value is: %s', key, namespace, storageChange.oldValue, storageChange.newValue);
  }
});

function saveStorage() { // saves the current credz to storage
  storage.set({'username':username}, function() {});
  storage.set({'password':password}, function() {});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:41:17.583

[chrome 存储](http://developer.chrome.com/apps/storage.html)可能是您今天想要的，更好的是即将推出的[chrome.syncFileSystem](http://developer.chrome.com/trunk/apps/syncFileSystem.html)。请参阅[syncfs-editor](https://github.com/GoogleChrome/chrome-app-samples/tree/master/syncfs-editor)示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:14:03.820

您实际上并不需要文本文件，您可以使用 HTML5 localStorage API：

```
localStorage.foo = "myData";
//or
localStorage['foobar'] = "moreData"; 
```

取回数据：

```
myDataValue = localStorage.foo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:20:25.727

你检查过 chrome 应用程序代码实验室了吗？这是存储同步示例的 JavaScript 版本的链接：[https](https://github.com/GoogleChrome/chrome-app-codelab/tree/master/lab5_data/javascript/1_storage_sync) ://github.com/GoogleChrome/chrome-app-codelab/tree/master/lab5_data/javascript/1_storage_sync 。

# java - Java“未经检查或不安全的操作”和Java自己的类

> ID：15594048
> 
> 赞同：1
> 
> 时间：2013-03-24T01:11:43.737
> 
> 标签：java, casting, unsafe

在阅读 HashMap 类的源代码时，我注意到他们使用了（第 149 行）

```
transient Entry<K,V>[] table; 
```

然后他们用 (line 283) 初始化它：

```
table = new Entry[capacity]; 
```

而且我看不到与“未经检查或不安全的操作”相关的警告。

但是当我试图写一些类似的东西时：

```
TestClass<T>{...
    LinkedList<T>[] arrayOfLists; ....
    arrayOfLists = new LinkedList[capacity]; //warning here 
```

不幸的是，使用 @SuppressWarnings("unchecked") 对我来说不是一个选择......

```
LinkedList<String>[]... 
```

还是一样，所以我的问题是我缺少什么区别，对于一组不会引起警告的通用集合来说，什么是一个好的解决方案。顺便说一句，@SuppressWarnning 不幸不是我的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:16:43.653

Java 集合 api 中的代码不会被干净地编译。他们也会收到警告。您看不到警告，因为使用 JDK，您已经拥有包含已编译代码的 .class 文件（或 .jar）。

对于您自己的代码，只需使用链表列表：

```
TestClass<T> { ...
    List<LinkedList<T>> listOfLists; ...
    listOfLists = new ArrayList<LinkedList<T>>(capacity); 
```

# paypal - paypal开发环境无法访问导入的账户

> ID：15594050
> 
> 赞同：0
> 
> 时间：2013-03-24T01:11:48.570
> 
> 标签：paypal, paypal-sandbox

刚发现PayPal改变了他们的Sanbox，现在我需要真实的PayPal账户来开发。好的，我去了我的真实的，将我的测试沙箱帐户导入其中。然后，我转到 developer.paypal.com 上的其中一个帐户，然后单击“沙盒站点”链接。我希望它会进入沙盒站点，我可以在其中使用此测试帐户登录。但是，在单击链接后，我在 paypal.sandbox.com 上收到“请登录以使用 PayPal 沙盒功能”消息，该消息具有指向 developer.paypal.com 的链接，我已经在其中登录。所以，我现在不知道有什么方法可以用我的测试帐户登录。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:53:00.877

由于从旧沙箱过渡到新站点，这是一个已知问题。您需要删除 cookie 并重新登录才能访问沙盒站点。请注意，IE 在文件系统中存储了需要删除的永久 cookie。Firefox 或 Chrome 会比 IE8 更好。

# javascript - 点击锚点，进入链接页面

> ID：15594063
> 
> 赞同：0
> 
> 时间：2013-03-24T01:13:36.697
> 
> 标签：javascript

我有一个`click`使用 JavaScript 触发的锚点。请看[这个小提琴](http://jsfiddle.net/NWQwt/)。

```
$(function() {
    $('a').click();
}); 
```

出于某种原因，触发`click`不会将我带到由`href`锚属性指定的页面。

我怎样才能让`click`活动也将我带到锚链接的页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:28:58.737

它不会那样工作，调用`$('a').click();`是一个捷径，`$('a').trigger('click');`它试图模拟锚元素上的点击动作。

但是模拟不是绝对的，虽然它会触发注册的事件处理程序，但它不会完全模拟使用点击触发默认动作。

根据[触发器的jquery doc](http://api.jquery.com/trigger/)

> 描述：执行所有附加到给定事件类型的匹配元素的处理程序和行为。

和

> 尽管 .trigger() 模拟了一个事件激活，并带有一个合成的事件对象，但它并不能完美地复制一个自然发生的事件。

所以我认为不可能完全模拟用户操作并使用这种方法触发重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T06:49:42.843

似乎与 jQuery 和触发方法有关，当您将 [object object] 更改为 [object] 时工作正常。这是[小提琴](http://jsfiddle.net/NWQwt/1/)。享受！

```
$(function() {
    $('a').get(0).click();
}); 
```

# c - 没有指针的分段错误？

> ID：15594064
> 
> 赞同：1
> 
> 时间：2013-03-24T01:13:39.700
> 
> 标签：c, pointers, runtime-error

这是我的代码和问题。代码编译得很好。但是当我运行它时。在 getMenuOption() 中输入菜单选项后，弹出“Segmentation Fault (core dumped)”。怎么了？我一般是编程新手。感谢您提供的帮助。

```
#include <stdio.h>
#include<math.h>

#define CALCULATE_PI 'a'
#define CALCULATE_GEOMEAN 'b'
#define CALCULATE_HARMMEAN 'c'

void printInstructions (void);
void printMenuOptions (void);
int  runMenuOption ();
int  getMenuOption ();
int  getLimit ();
int  calculatePi ();
int  calculateGeoMean ();
int  calculateHarmonicMean ();

int main(void)
{
    printInstructions();

    printMenuOptions();

    runMenuOption(getMenuOption());

    return 0;

}

void printInstructions (void)
{
    printf("======================================================\n");
    printf("=  PI, Geometric Mean, and Harmonic Mean Calculator  =\n");
    printf("=  Please refer to the menu to choose calucaltion    =\n");
    printf("=Choose desired menu option and press enter to begin =\n");
    printf("=      Proceed to follow on-screen instructions      =\n");
    printf("======================================================\n\n\n");

    return;
}

void printMenuOptions (void)
{
    printf("3 choices: Please enter a VALID letter.\n");
    printf("Choice 'a'   = Calcualtes PI\n");
    printf("Choice 'b'   = Calculates Geometric Mean\n");
    printf("Choice 'c'   = Calculates Harmonic Mean\n\n");

    return;
 }

int runMenuOption (int getMenuOption())
{
    char option;
    double answer,
            Pi = 0.0,
            geoMean = 0.0;

    option = getMenuOption();

    switch (option)
    {
        case CALCULATE_PI:
            calculatePi(getLimit());
            answer = Pi;
            break;
        case CALCULATE_GEOMEAN:
            calculateGeoMean(getLimit());
            answer = geoMean;
        case CALCULATE_HARMMEAN:
            printf("Harmonic Mean");
            break;
        default:
            printf("Incorrect Character!\n");
            printf("Try again");
            break;
    }

    printf("Your answer is %5p", &answer);

    return 0;
}

int getMenuOption (void)
{
    char option;

    printf("Please enter choice: ");

    scanf("%c", &option);

    return option;
}

int getLimit ()
{
    int limit;

    scanf("%d", &limit);

    return limit;
}

int calculatePi (void)
{
    int limit,
    count = 0,
    Pi = 0;

    printf("Please enter the PI limit: ");

    limit = getLimit();

    for (count = 1; count <= limit; count++)
    {
        Pi += 1 / count;
    }

    return sqrt(Pi * 6);
}

 int calculateGeoMean()
 {
    int limit,
        userValue = 0,
        count = 0;
    double geoMean = 0;

    limit = getLimit();

    while(count <= limit)
    {
       if (userValue <= 0)
           printf("Incorrect. Try again");
       else
       {
           count++;
           userValue *= userValue;
       }

    }
    geoMean = userValue;

    return sqrt(userValue);
}

int calculateHarmonicMean()
{
    int limit,
        userValue = 0,
        count = 0;
     double harmMean = 0;

     limit = getLimit();

    while(count <= limit)
    {
        if (userValue <= 0)
            printf("Incorrect. Try again");
        else
        {
            count++;
            userValue *= 1 / userValue;
        }

    }
    harmMean = userValue;

    return limit / userValue;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T01:19:23.277

这个函数定义是完全错误的。

```
int runMenuOption (int getMenuOption()) 
```

`getMenuOption`要么你可以像这样传递返回值

```
int runMenuOption (int option) 
```

或者

您不应将任何值传递给此函数并`getMenuOption`在内部调用`runMenuOption`. 你两者都做，这是不正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T01:22:36.783

```
int runMenuOption (int getMenuOption()) 
```

这是你的问题。

那应该是：

```
int runMenuOption (int opt) 
```

此外，您不应该`getMenuOption()`在内部调用，`runMenuOption`因为您在`getMenuOption()`将它`runMenuOption`作为参数传递给它时调用。`runMenuOption`应该只有一个`switch`声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:27:51.530

您需要将函数的定义从 修改`int runMenuOption (int getMenuOption())`为`int runMenuOption (int option)`。在调用中，`getMenuOption()`将被调用并将输出放入被`stack frame`调用函数的 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T01:53:15.513

根据您对`runMenuOption`函数的声明，它需要一个指向函数的指针，该函数返回一个整数作为其第一个参数：

```
int runMenuOption (int getMenuOption()) 
```

然后在这一行中调用该函数：

```
option = getMenuOption(); 
```

这很好。但是，问题在于这一行：

```
runMenuOption(getMenuOption()); 
```

在这里，您正在调用`getMenuOption`函数并将返回值传递给`runMenuOption`函数。但是你应该做的是将函数本身作为参数传递：

```
runMenuOption(getMenuOption); 
```

您收到分段错误错误的原因是因为`getMenuOption`函数的返回值被视为函数指针，并且您的程序试图调用该地址的函数，这当然是无效的。

# java - Spring - 拦截 bean 创建和注入自定义代理

> ID：15594071
> 
> 赞同：14
> 
> 时间：2013-03-24T01:14:20.057
> 
> 标签：java, spring, spring-mvc, spring-aop

我有一个字段和`@Controller`处理`@Autowired`程序方法，我想用自定义注释进行注释。

例如，

```
@Controller
public class MyController{
    @Autowired
    public MyDao myDao;

    @RequestMapping("/home")
    @OnlyIfXYZ
    public String onlyForXYZ() {
        // do something
        return "xyz";
    }
} 
```

哪里`@OnlyIfXYZ`是自定义注释的示例。我在想我会拦截Controller bean的创建，传递我自己的CGLIB代理，然后Spring可以在其上设置属性，比如自动装配字段。

我尝试使用 a`InstantiationAwareBeanPostProcessor`但该解决方案效果不佳，因为`postProcessBeforeInstantiation()`会使其余过程短路。我试过了`postProcessAfterInitialization()`，如下所示

```
public class MyProcessor implements BeanPostProcessor {

    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        // Here the bean autowired fields are already set
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object aBean, String aBeanName) throws BeansException {
        Class<?> clazz = aBean.getClass();
        // only for Controllers, possibly only those with my custom annotation on them
        if (!clazz.isAnnotationPresent(Controller.class))
            return aBean;

        Object proxy = Enhancer.create(clazz, new MyMethodInterceptor());
        Field[] fields = clazz.getDeclaredFields();
        for (Field field : fields) {
            field.setAccessible(true);
            try {
                // get the field and copy it over to the proxy
                Object objectToCopy = field.get(aBean);
                field.set(proxy, objectToCopy);
            } catch (IllegalArgumentException | IllegalAccessException e) {
                return aBean;
            }
        }   
        return proxy;
    }
} 
```

该解决方案使用反射将目标 bean 的所有字段复制到代理 bean（对我来说有点 hacky）。但是，如果这些不是我正在拦截的方法中的参数，我将无权访问`HttpServletRequest`and对象。`HttpServletResponse`

在 Spring 填充其属性之前，我是否可以将另一个回调注入到 Spring bean 创建逻辑中以注入我自己的代理控制器？**无论控制器处理程序方法是否在其定义中包含它，****我都需要能够访问`HttpServletRequest`and对象，即。`HttpServletResponse`作为论据。**

**NB**该`@Autowired`字段也是一个代理，它带有注释，`@Transactional`因此 Spring 代理它。

**编辑：** AOP 解决方案可以很好地拦截方法调用，但是如果它们还不是方法参数，我找不到访问`HttpServletRequest`and对象的方法。`HttpServletResponse`

我可能最终会使用 HandlerInterceptorAdapter，但我希望我可以使用 OOP 来做到这一点，以免给不需要它的方法增加开销。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T01:27:03.167

看看[Spring AOP](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/aop.html)。它拥有您所追求的设施。对于您的示例，您可以执行以下操作：

```
@Aspect
@Component
public class MyAspect {
    @Around("@annotation(path.to.your.annotation.OnlyIfXYZ)")
    public Object onlyIfXyz(final ProceedingJoinPoint pjp) throws Exception {
        //do some stuff before invoking methods annotated with @OnlyIfXYZ
        final Object returnValue = pjp.proceed();
        //do some stuff after invoking methods annotated with @OnlyIfXYZ
        return returnValue;
    }
} 
```

值得注意的是，Spring 只会将代理应用于属于其应用程序上下文的类。（在您的示例中就是这种情况）

您还可以使用 Spring AOP 将参数绑定到您的方面方法。这可以通过多种方式完成，但您所追求的可能是`args(paramName)`.

```
@Aspect
@Component
public class MyAspect2 {
    @Around("@annotation(path.to.your.annotation.OnlyIfXYZ) && " +
        "args(..,request,..)")
    public Object onlyIfXyzAndHasHttpServletRequest(final ProceedingJoinPoint pjp,
            final HttpServletRequest request) throws Exception {
        //do some stuff before invoking methods annotated with @OnlyIfXYZ
        //do something special with your HttpServletRequest
        final Object returnValue = pjp.proceed();
        //do some stuff after invoking methods annotated with @OnlyIfXYZ
        //do more special things with your HttpServletRequest
        return returnValue;
    }
} 
```

这方面应该做你所追求的一部分。它将代理使用`@OnlyIfXYZ`该***注释***的方法也将a`HttpServletRequest`作为参数。`HttpServletRequest`此外，它会将 this作为传入参数绑定到 Aspect 方法中。

我了解您可能同时使用`HttpServletRequest`and `HttpServletResponse`，因此您应该能够修改`args`表达式以同时接受请求和响应。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-28T13:24:59.650

考虑到您在问题下的评论，您所需要的只是 HandlerInterceptor。

[http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)

您需要实现该接口并将其添加到您的配置中，例如：

```
<mvc:interceptors>
    <bean id="customInterceptor" class="com.example.interceptors.CustomInterceptor"/>
</mvc:interceptors> 
```

该接口提供方法preHanlde，有request、response和HandlerMethod。要检查方法是否被注释，只需试试这个：

```
HandlerMethod method = (HandlerMethod) handler;
OnlyIfXYZ customAnnotation = method.getMethodAnnotation(OnlyIfXYZ.class); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T19:52:11.340

我认为不是，但我认为您可以在创建代理后自动连接它。

```
public class MyProcessor extends InstantiationAwareBeanPostProcessorAdapter
    implements BeanFactoryAware {

    private AutowireCapableBeanFactory beanFactory;

     @Override
        public Object postProcessBeforeInstantiation(Class<?> beanClass, String beanName) throws BeansException {
            // This is where I thought I would do it, but it then skips setting fields alltogether
            if (beanClass.isAnnotationPresent(Controller.class)) {
                Object proxy = Enhancer.create(beanClass, new MyInterceptor());
                // autowire
                beanFactory.autowireBean(proxy);

                return proxy;
            }
            return null;
        }

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        this.beanFactory = (AutowireCapableBeanFactory) beanFactory;

    }

} 
```

其他替代方法是在方法中创建一个 Spring AOP 代理（使用`ProxyFactory`）`postProcessAfterInitialization`。因为这种方式`AbstractAutoProxyCreator`可能很有用。请参阅 BeanNameAutoProxyCreator 作为示例。但是恕我直言，注释切入点（尼古拉斯的回答）做同样的事情并且更简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T11:51:58.737

`InstantiationAwareBeanPostProcessor.postProcessBeforeInstantiation`将短路 bean 创建方法。唯一应用的处理是`postProcessAfterInitialization`. 这意味着，自动装配不会发生，因为`AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues`永远不会被调用。因此，您应该在方法中手动注入或自动装配代理 bean 的属性`postProcessAfterInitialization`。

问题：在方法中移动代理逻辑是否`postProcessAfterInitialization`会影响您的业务需求？如果没有，我建议你在那里做代理。

仅供参考：如果您不构建 API，请按照 @nicholas.hauschild 的建议执行注释方法。

# command-line - 复制文件夹，但不包括指定的子目录

> ID：15594078
> 
> 赞同：0
> 
> 时间：2013-03-24T01:15:27.843
> 
> 标签：command-line, scripting, batch-file, cmd, dos

我需要有关复制文件夹的帮助，但不复制具有文本文件中指定名称的子文件夹。文本文件位于：

> U:\目录\目录\文本文件.txt

我需要复制文本文件中指定的文件夹，但这里有一个问题，之后

`U:\Directory\Directory\`这些文件夹具有随机名称，这就是它们存储在文本文件中的原因。目录树的示例：

> U:\Directory\Directory\"12345"\Pickle <--- Pickle 是我想要的文件夹。
> 
> U:\目录\目录\"22345"\Pickle
> 
> ```
>  ^ 
>                      | 
> ```
> 
> 这是在文本文件中指定的随机名称。

他们都有`Pickle`里面的文件夹，这就是我所追求的。文本文件中包含以下所有文件夹的名称：`U:\Directory\Directory\`. 文本文件如下所示：

> 1335232 <--- 这是随机文件夹的名称。
> 
> 1242334 <--- 它们都位于：
> 
> 2342312 <--- U:\Directory\Directory\~这里~
> 
> （ETC...）

文件夹应该从`U:\Directory\Directory\"12345"\Pickle to U:\Output\`

如果有帮助，所有文件夹的名称都是数字。谢谢彼得试图帮助我，如果我不清楚，我很抱歉。我希望这能解决问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:51:35.253

```
@ECHO OFF
SETLOCAL
SET relroot=u:\directory
SET subdir=randomsubfoldername
::
FOR /f %%i IN (
  'dir /b /ad %relroot%\%subdir% ^|findstr /b /e /v /g:textfile.txt '
    ) DO ECHO %relroot%\%subdir%\%%i 
```

该命令以基本形式 ( )`DIR`列出目录名称 ( ) - 即仅名称。查找不 ( ) 开头 ( ) 和结尾 ( )的行与文件文件名 ( )中的行`/ad``.b``findstr``/v``/b``/e``/g:filename`

* * *

使用修改后的信息，并注意到原始信息清楚地显示倒数第二个目录名称是相同的，并且选择发生在叶子上，现在提供的单个示例......

```
@ECHO OFF
SETLOCAL
ECHO Here is a test structure
ECHO -----------------------------
DIR /s /b /ad u:\directory
ECHO ------Here is the textfile---------
TYPE u:\directory\textfile.txt
ECHO ====Method 1==============
FOR /f %%i IN (u:\directory\textfile.txt) DO (
DIR /s /b /ad u:\directory | FINDSTR /r ".*\\%%i\\.*" | FINDSTR /v /r ".*\\%%i\\.*\\.*"
)

ECHO ====Method 2==============
FOR /f %%i IN (u:\directory\textfile.txt) DO (
 FOR /f %%s IN (
  'DIR /s /b /ad u:\directory ^| FINDSTR /r ".*\\%%i\\.*" ^| FINDSTR /v /r ".*\\%%i\\.*\\.*"'
 ) DO ECHO selected : %%s
)

ECHO ====Method 3 - to ignore ...\target\subdir that has any subdir ==============
FOR /f %%i IN (u:\directory\textfile.txt) DO (
 FOR /f %%s IN (
  'DIR /s /b /ad u:\directory ^| FINDSTR /r ".*\\%%i\\.*" ^| FINDSTR /v /r ".*\\%%i\\.*\\.*"'
 ) DO (
 FOR /f %%c IN ( 'DIR /a:d %%s ^|FIND /c "<" ' ) DO IF %%c==2 ECHO SELECTED : %%s
 )
) 
```

下面是运行结果：

```
Here is a test structure
-----------------------------
u:\directory\another
u:\directory\yetanother
u:\directory\572
u:\directory\another\yetanother
u:\directory\another\yetanother\572
u:\directory\another\yetanother\1572
u:\directory\another\yetanother\5722
u:\directory\another\yetanother\572\wantthis
u:\directory\another\yetanother\572\andthis
u:\directory\another\yetanother\572\maywantthisidontknow
u:\directory\another\yetanother\572\572
u:\directory\another\yetanother\572\maywantthisidontknow\ignore
u:\directory\another\yetanother\1572\ignorethis
u:\directory\another\yetanother\5722\ignorethis
u:\directory\yetanother\572
u:\directory\yetanother\572\wantthis
u:\directory\572\wantthis
------Here is the textfile---------
23
753309
572
====Method 1==============
u:\directory\another\yetanother\572\wantthis
u:\directory\another\yetanother\572\andthis
u:\directory\another\yetanother\572\maywantthisidontknow
u:\directory\another\yetanother\572\572
u:\directory\yetanother\572\wantthis
u:\directory\572\wantthis
====Method 2==============
selected : u:\directory\another\yetanother\572\wantthis
selected : u:\directory\another\yetanother\572\andthis
selected : u:\directory\another\yetanother\572\maywantthisidontknow
selected : u:\directory\another\yetanother\572\572
selected : u:\directory\yetanother\572\wantthis
selected : u:\directory\572\wantthis
====Method 3 - to ignore ...\target\subdir that has any subdir ==============
SELECTED : u:\directory\another\yetanother\572\wantthis
SELECTED : u:\directory\another\yetanother\572\andthis
SELECTED : u:\directory\another\yetanother\572\572
SELECTED : u:\directory\yetanother\572\wantthis
SELECTED : u:\directory\572\wantthis 
```

这两个`FINDSTR`正则表达式结构是

```
FINDSTR /r ".*\\%%i\\.*" 
```

任意数量的任意字符, `\`, 目标字符串, `\`, 任意数量的任意字符

```
FINDSTR /v /r ".*\\%%i\\.*\\.*" 
```

任意数量的任意字符, `\`, 目标字符串, `\`, 任意数量的任意字符, `\`, 任意数量的任意字符

但是 - `/v`FINDSTR 上的意思是**除了**匹配的行...

* * *

我无法理解`copy the sub-folder from a parent folder with a random name.`

`ECHO SELECTED : %%s`如果要求从该目录的父目录复制到所选目录，则在通过替换验证目标目录显示`ECHO SELECTED : %%s`后

```
(
pushd %%s
xcopy ..\* . >nul
popd
) 
```

`>nul`抑制 xcopy报告

如果它意味着其他东西，则需要更多信息。

# bash - 如何在 bash 中将字符串添加到文件行的末尾

> ID：15594080
> 
> 赞同：0
> 
> 时间：2013-03-24T01:15:56.580
> 
> 标签：bash

假设我有一个名为 output.txt 的文件。output.txt 中的每一行都以不同的单词开头。如果任何行以“word”开头然后将“new word”添加到行尾，我该如何执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:22:00.297

安迪的回答很好。如果你想使用`sed`你可以做

```
sed 's/\(^word.*$\)/\1new word/' input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T01:18:41.527

这是使用 Perl 的一种方法。

```
perl -p -e'$_ .= "new word" if /^word/" output.txt > newfile.txt 
```

如果你想就地编辑文件，你可以使用 Perl 的`-i`标志来“就地编辑”

```
perl -i -p -e'$_ .= "new word" if /^word/" output.txt 
```

您也可以使用 sed 或 awk。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T01:20:53.473

```
while read i; do
    if [[ $i == word* ]]; then
        echo ${i}newword >> newfile
    else
        echo $i >> newfile
    fi
done < "file.txt" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T01:54:33.103

awk：

```
awk '$1 == "word" {$(NF+1) = "new word"} 1' output.txt > tempfile &&
mv tempfile output.txt 
```

我假设您不一定需要第一个单词的正则表达式匹配

# python - 确保输入仅限于变量

> ID：15594096
> 
> 赞同：0
> 
> 时间：2013-03-24T01:18:44.523
> 
> 标签：python, variables, input, python-3.x

我想确保只有顶部的 4 个变量中指定的值被接受，其他所有用户输入都被拒绝，我该怎么做？基本上，我希望代码接受 Currency1、Currency2、Currency3 和 Currency4 下的所有内容。我的代码的问题是“no”、“wdgdu”等所有内容都被接受了。如何将输入限制为 4 个变量下的那些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T01:41:20.503

我会使用：

*   用于验证和规范化货币的字典，而不是临时列表
*   从用户那里获取有效输入的循环，而不是递归
*   `.lower()`规范化大小写的方法

我的重构版本：

```
CURRENCY = {
    '¥': 'JPY', 'yen': 'JPY', 'jpy': 'JPY',
    '€': 'EUR', 'euro': 'EUR', 'eur': 'EUR',
    '$': 'USD', 'dollar': 'USD', 'usd': 'USD',
    '£': 'GBP', 'pound': 'GBP', 'gbp': 'GBP',
}

def read_currency(prompt):
    """Prompt the user to enter a currency.

    Returns a currency code.
    """
    while True:
        x = input(prompt)
        try:
            return CURRENCY[x.lower()]
        except KeyError:
            print('Unknown currency: {!r}'.format(x)) 
```

然后，您可以根据自己的喜好计算转化率：

```
from decimal import Decimal
RATES = { 
    'JPY': Decimal("0.010589"),
    'EUR': Decimal("1.2983"),
    'GBP': Decimal("1.5228"),
    'USD': Decimal("1.0000"),
}
def conversion_rate(cur1, cur2):
    """Get the conversion rate from currency 1 to currency 2."""
    return RATES[cur1] / RATES[cur2] 
```

这是转换的代码：

```
amount = Decimal(input('Enter amount: '))
currency1 = read_currency('Enter source currency: ')
currency2 = read_currency('Enter target currency: ')
rate = conversion_rate(currency1, currency2)
print('{} {} is equal to {} {}'
      .format(currency1, amount, currency2, amount * rate)) 
```

请注意，您可能需要应用更好的四舍五入规则。

示例运行：

```
输入金额：1450
输入来源货币：日元
输入目标货币：$
1450 日元等于 15.3700 美元

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:20:24.917

```
if currency in CurrencyYen + CurrencyEuro + CurrencyDollar + CurrencyPound:
    # do stuff 
```

您[应该](http://www.python.org/dev/peps/pep-0008/)使用小写的变量名

您也可以简单地检查`currency.lower()`，然后您只需要列表中每种货币的小写版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:47:42.690

如果在输入中使用 lower()，则不需要同时保留“美元”和“美元”。除非输入正确的输入，否则您也可以使用永远不存在的时间。您还可以使用退出命令并中断 while。

```
accepted_input = ['yen', 'euro', 'dollar', 'pound', '$']

def get_currency(msg):
    input_valid = False
    while not input_valid:
        user_input = input(msg).lower()
        input_valid = user_input in accepted_input
    return user_input

currency_from = get_currency('Convert from: ')
currency_to = get_currency('Convert to: ') 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-24T01:28:15.643

您可以使用 For 检查用户输入：

```
CurrencyYen = ['Yen', 'yen', 'YEN']
CurrencyEuro = ['Euro','euro','EURO']
CurrencyDollar = ['Dollar','dollar','DOLLAR','$']
CurrencyPound = ['Pound', 'pound', 'POUND','£']

UserInput = raw_input("Value: ")

for i in range(0,2):
    if (UserInput == CurrencyEuro[i]):
        print "correct input!"
        break
    else:
        print "wrong input" 
```

所有其他列表的代码相同。

# java - Thread.sleep 是如何真正工作的？

> ID：15594098
> 
> 赞同：1
> 
> 时间：2013-03-24T01:18:52.677
> 
> 标签：java, multithreading, swing, sleep, event-dispatch-thread

我制作了一个`setEnable`不时设置按钮的程序。在`Thread.sleep()`另一个班级。这是代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Try extends JFrame implements ActionListener{
JButton n1 = new JButton("1");
JButton n2 = new JButton("2");
JButton n3 = new JButton("3");
JButton show = new JButton("Show");

{
show.addActionListener(this);
n1.setEnabled(false);
n2.setEnabled(false);
n3.setEnabled(false);

}

public Try(){
  super("Try");
  setVisible(true);
  setSize(500, 200);
  setLayout(new GridLayout(1, 4));
  add(n1);
  add(n2);
  add(n3);
  add(show);
}  

public void actionPerformed(ActionEvent a) {
Object clicked = a.getSource();
if(show == clicked){
new EasyLevel1().start();
}
}

  class EasyLevel1 extends Thread {
    public void run() {      
        try {
            n1.setEnabled(true);
            Thread.sleep(1000);
            n1.setEnabled(false);
            n2.setEnabled(true);
            Thread.sleep(1000);
            n2.setEnabled(false);
            n3.setEnabled(true);
            Thread.sleep(1000);
            n3.setEnabled(false);    
        } catch (InterruptedException e){
        }
        }
      }

    public static void main(String[] args){
      Try frame = new Try();
      frame.setVisible(true);
    }
    } 
```

但是，当我把它放在`actionListener`课堂上时：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Try extends JFrame implements ActionListener{
JButton n1 = new JButton("1");
JButton n2 = new JButton("2");
JButton n3 = new JButton("3");
JButton show = new JButton("Show");

{
show.addActionListener(this);
n1.setEnabled(false);
n2.setEnabled(false);
n3.setEnabled(false);

}

public Try(){
  super("Try");
  setVisible(true);
  setSize(500, 200);
  setLayout(new GridLayout(1, 4));
  add(n1);
  add(n2);
  add(n3);
  add(show);
}  

public void actionPerformed(ActionEvent a) {
Object clicked = a.getSource();
if(show == clicked){
            try {n1.setEnabled(true);
            Thread.sleep(1000);
            n1.setEnabled(false);
            n2.setEnabled(true);
            Thread.sleep(1000);
            n2.setEnabled(false);
            n3.setEnabled(true);
            Thread.sleep(1000);
            n3.setEnabled(false);
            } catch (InterruptedException e){}
}
}

public static void main(String[] args){
  Try frame = new Try();
  frame.setVisible(true);
}
} 
```

它冻结了我的整个程序，基于该示例，我了解到应该在另一个线程中运行线程睡眠以阻止当前类冻结。但我预计新的 thread.sleep 仍会冻结其操作，就像它仍会执行上面的代码一样，但按钮将响应，因为它位于另一个线程中。但令人惊讶的是，它完成了我想要它做的事情，它并没有像第一个程序那样立即将所有内容设置为禁用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T01:25:07.007

`Thread.sleep()`使当前线程暂停。您正在运行它`actionPerformed`，即在 Swing 事件中。所有 Swing 操作都在单个线程（EDT）中完成。当您使用 Thread.sleep() 暂停它时，Swing 无法处理任何其他事件，因为您还没有从 actionPerformed 侦听器返回。因此，GUI 冻结（不是完整的应用程序，只是 GUI）。

通常，因此在 Swing 事件中执行长时间运行的操作是不好的做法。对于您正在尝试做的事情，一个不错的选择是使用 Swing 计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T01:25:48.130

`Thread.sleep`将导致执行调用的线程休眠指定的时间（或直到线程被中断）。当您在`actionPerformed`方法中调用它时，它会导致 UI 线程休眠。这就是你的程序被锁定的原因。

您应该启动一个单独的线程，该线程将逐步完成您想要在两者之间进行的各种调用。或者（在我看来更好）你可以使用[Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来做你想做的事。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T01:26:07.707

正在发生的事情是，在第二个示例`Thread.sleep`中阻止了`EDT`进一步的 UI 更新。相反，在第一个示例中，您调用`sleep`的是单独的`Thread`，因此不会发生“冻结”。对于这样的任务，最好使用[Swing Timers](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

# scala - Play 项目中的简单 SBT 模块导致 Play 因未知原因而崩溃 - play 2.1

> ID：15594100
> 
> 赞同：1
> 
> 时间：2013-03-24T01:19:08.153
> 
> 标签：scala, playframework, playframework-2.0, sbt

[https://github.com/jasongoodwin/play21-multimodule-demo](https://github.com/jasongoodwin/play21-multimodule-demo)有代码。我已经在 3 个不同的项目中重现了这个问题。我不知道怎么了。一旦将聚合和dependsOn 放入build.scala 文件中，项目在尝试开始播放时会引发错误。

> [信息] 从 /Users/jgoodwin/.sbt/plugins 加载全局插件 [信息] 从 /Users/jgoodwin/Development/src/ninjakeyboard/test/tmp/play21-multimodule-demo/project 加载项目定义 [错误] java. lang.ExceptionInInitializerError [错误] 使用“最后一个”作为完整日志。项目加载失败：(r)etry、(q)uit、(l)ast 还是 (i)gnore？q

构建文件

> 导入 sbt._ 导入 Keys._ 导入 play.Project._
> 
> 对象应用程序构建扩展构建{
> 
> val appName = "multimodule-demo" val appVersion = "1.0-SNAPSHOT" //val scalaVersion = "2.10.0"
> 
> val appDependencies = Seq( // 在此处添加您的项目依赖项, jdbc, anorm )
> 
> val buildSettings = ( scalaVersion := "2.10.0" )
> 
> val main = play.Project(appName, appVersion, appDependencies, path = file("web")).settings( // 在这里添加你自己的项目设置 ).aggregate(testmodule).dependsOn(testmodule)
> 
> val testmodule = Project("testmodule", file("testmodlue"), settings = buildSettings)
> 
> }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-15T08:31:19.840

我在您的 github build.scala 中注意到 testmodule 在主模块之后声明（并初始化），因此在项目加载期间出现空异常。我犯了同样的错误，将模块按正确的顺序放置使其工作。我刚开始玩 Play2 和 Scala，但我相信使用 lazy val 也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:21:38.460

尝试创建一个新项目：

1.  运行命令：`play new MyApp`
2.  跑`play clean eclipse`
3.  制作目录`modules`（在 MyApp 内）
4.  运行命令`play new MyModule`
5.  运行命令`play clean eclipse`
6.  将控制器重命名为 MyModuleCon，并更改路由文件
7.  运行命令`play clean publish-local`
8.  将依赖项添加到您的 MyApp Build.scala 中：`"mymodule" % "mymodule_2.10" % "1.0-SNAPSHOT"`
9.  将主路由重命名为 app.routes（因为模块也有路由，虽然可以删除！）
10.  在主项目运行：`play dependencies eclipse`

瞧，你有你的子模块，见我的 github：[https ://github.com/adis-me/PlayModuleExample](https://github.com/adis-me/PlayModuleExample)

只需运行`play run`并访问主项目：`http://localhost:9000`然后访问子模块：`http://localhost:9000/module`。

我认为这对你来说应该可以解决问题！

**编辑：2013-03-27**

将上述配置更改为真正的子项目设置，请按照下列步骤操作：

1.  在 MyApp 上运行：`play clean`
2.  更改 MyApp 的 Build.scala 文件：

对象应用程序构建扩展构建{

```
 val appName         = "MyAppp"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean
  )

  val subproject = play.Project(
    "sub-project", appVersion, appDependencies, path = file("modules/MyModule")
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here      
  ).dependsOn(subproject).aggregate(subproject)

} 
```

1.  运行命令：`play clean eclipse`
2.  运行命令：`play run`

就是这样，您无法访问与上述相同的网址。可能是您的想法无法识别子项目中的类，只需将 MyModule 项目引用为主项目的引用库，您就可以开始了。

祝你好运！

# cordova - Phonegap 和 Meteor，使用 Phonegap 构建服务

> ID：15594115
> 
> 赞同：2
> 
> 时间：2013-03-24T01:22:02.127
> 
> 标签：cordova, meteor, phonegap-build

我正在尝试使用**Meteor开发****Phonegap 应用程序**，但我无法弄清楚如何正确构建应用程序文件夹。

 **以下是我到目前为止所遵循的步骤：

1.  在 Windows 7 机器上，我下载了 Phonegap 并按照其中的说明，在 Visual Studio 中创建了一个 Windows Phone 7 项目。我能够使用 Phonegap 库编写一些示例代码，并在 Windows Phone 7 模拟器中成功地对其进行了测试。

2.  安装了流星，创建了一个示例项目。现在我正在尝试将示例流星代码合并到我的 Phonegap 项目中的 www 文件夹中，我需要帮助来弄清楚如何在 www 文件夹中构建应用程序，即哪些脚本位于服务器和客户端文件夹中。

此外，将这个流星应用程序提交到 Phonegap Build 服务的步骤是什么，以及部署到流星服务器的步骤是什么？

我猜服务器文件夹不应该是上传到 PhoneGap Build 的 www 文件夹的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:47:33.863

对于 iPhone 和 iPad PhoneGap 安装，您甚至不需要将任何文件添加到 www 文件夹中。您需要做的就是调整 CDViewController.m 文件，并将 self.wwwFolderName 变量设置为您发布的 Meteor 应用程序 url，如下所示（大约第 170 行）：

```
self.wwwFolderName = @"http://myapp.meteor.com"; 
```

您可能想尝试类似的方法，并在开始时保持 PhoneGap 构建超轻。通过将 PhoneGap 用作 Meteor 应用程序的简单包装器来测试 Phonegap 构建服务。确认 PhoneGap Build 后，添加本地 appcache 包和其他功能。**

# css - HTML/CSS Div 和背景图像

> ID：15594116
> 
> 赞同：0
> 
> 时间：2013-03-24T01:22:07.643
> 
> 标签：css, image, html, background

我有一个非常大的图像。我想用这张图片作为我网站的背景。我还希望这张图片可以拉伸并适合不同的浏览器窗口大小。

这是我想出的解决方案。（我把它放在 jFiddle 上是为了让你们更容易阅读）。

[http://jsfiddle.net/sGyax/](http://jsfiddle.net/sGyax/)

```
.bg{
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -5000;}

<body>
<div id="background">
    <img src="background/001.JPG" class="bg"/>
</div>
</body> 
```

无论如何，我是否可以在我的 HTML 中不使用 IMG 标记来执行此操作？它干扰了我的其余布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:27:03.087

将其设置为[背景图像](https://developer.mozilla.org/en-US/docs/CSS/background-image)（参见下面的示例）而不是具有巨大负 z-index 的图像，并考虑使用 CSS3 [backgound-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)属性来覆盖整个页面。

```
background-image: url(background/001.JPG) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:31:44.090

这应该适用于 IE9/10 和当前的 Firefox、Opera 和 Chrome：

```
html{
    background: url(background/001.JPG) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='background/001.JPG',     sizingMethod='scale');
    -ms-filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='background/001.JPG', sizingMethod='scale');
} 
```

# java - UDP 将数据从一台设备发送到另一台设备

> ID：15594122
> 
> 赞同：0
> 
> 时间：2013-03-24T01:22:59.833
> 
> 标签：java, android, networking, udp

我正在尝试将一个小数据包从一个设备发送到另一个设备，我的设备 IP 是 192.168.1.59，这是主机，这是我的服务器代码

```
public class gameServer extends Thread{

/**
 * Sets up a server for Android applciation
 */
private static final String TAG = "GameServer";
private DatagramSocket socket;
private int port = 50000;
private InetAddress local = null;

public gameServer(  ) throws IOException
{
    socket = new DatagramSocket( port );
    Log.d(TAG, "Server was setup");
}

private String getLocalIPAddress()
{
    try
    {
        for (Enumeration<NetworkInterface> nis = NetworkInterface.getNetworkInterfaces(); nis.hasMoreElements();)
        {
            NetworkInterface ni = nis.nextElement();
            Log.v(TAG, "NetworkInterface = " + ni.getDisplayName());
            for (Enumeration<InetAddress> ips = ni.getInetAddresses(); ips.hasMoreElements();)
            {
                InetAddress ip = ips.nextElement();
                String s = ip.getHostAddress();
                Log.v(TAG, "InetAddress = " + s);
                if (!ip.isLoopbackAddress())
                {
                            if(InetAddressUtils.isIPv4Address(s)) return s;
                }
            }
        }
    }
    catch (SocketException e)
    {
            Log.e(TAG,"getLocalIPAddress()", e);
    }
    return null;
}

public void passClient( gameObject clientTemp )
{

}

@Override
public void run()
{
    Log.d(TAG, "Ip address used:" + getLocalIPAddress() );
    while( true )
    {
        //Send some data
        try 
        {
            local = InetAddress.getByName("127.0.0.1");
        } 
        catch (UnknownHostException e2) {
            e2.printStackTrace();
        }
        String msg = "hello there";
        int msgLength = msg.length();
        byte[] message = msg.getBytes();
        DatagramPacket p = new DatagramPacket( message, msgLength, local, port );
        try 
        {
            socket.send( p );
        } 
        catch (IOException e2) 
        {
            Log.d(TAG, "Error with sending");
            e2.printStackTrace();
        }

    }
}
} 
```

这是我的客户

```
public class gameClient extends Thread {

private static final String TAG = "gameClient";
private gameServer server;
private boolean rdyForPlay = false;
private ArrayList<gameObject> assets = new ArrayList();
private int ID = 0;
private maths cal = new maths();

public gameClient( boolean serverTag )
{
    if( serverTag == true)
    {
        try 
        {
            server = new gameServer();
            server.run();
        } 
        catch (IOException e) 
        {
            Log.d(TAG, "Could not start server");
            e.printStackTrace();
        }
    }
    else
    {
        //DELETE!!!
        //ONLY FOR TESTING
        DatagramSocket socket = null;;
        try 
        {
            socket = new DatagramSocket( 50000 );
        } 
        catch (SocketException e1) 
        {
            e1.printStackTrace();
        }

        byte[] buf = new byte[256];
        DatagramPacket packet = new DatagramPacket( buf, buf.length );
        try 
        {
            socket.receive( packet );
        } 
        catch (IOException e) 
        {
            Log.d(TAG, "Error with receiving data");
            e.printStackTrace();
        }

        String data = new String( buf, 0, packet.getLength() );

        Log.d(TAG, "Data received was :" + data);

    }
}

public void sendTouchEvent(float xSet, float ySet)
{

}

@Override
public void run()
{

}

private void updateAssets()
{

}
} 
```

当代码尝试接收数据包时，它只会在 socjet.receive(packet); 上崩溃。任何人都可以看到任何原因吗？

帆布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:08:26.513

你的问题是你有两个`try`块。如果第一个抓到一些东西，套接字就会停留`null`。所以做这样的事情：

```
 DatagramSocket socket = null;
    try 
    {
        socket = new DatagramSocket( 50000 );
        byte[] buf = new byte[256];
        DatagramPacket packet = new DatagramPacket( buf, buf.length );
        socket.receive( packet );
    } 
    catch (SocketException e1) 
    {
        e1.printStackTrace();
    }
    catch (IOException e) 
    {
        Log.d(TAG, "Error with receiving data");
        e.printStackTrace();
    } 
```

**确保`close()`您的活动的套接字 onDestroy ！**

还要考虑 AutoDiscovery 而不是静态 IP：[AutoDiscovery](https://stackoverflow.com/questions/12796135/ip-autodiscovery)

# jquery - Jquery UI - 设置通过 Ajax 使用内容的默认选项卡

> ID：15594126
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:23:52.510
> 
> 标签：jquery, jquery-ui

我将 AJAX 选项卡与 Jquery UI 库一起使用。我需要根据页面更改默认选项卡。我做了很多搜索并尝试了很多。不幸的是，我没有看到任何在 Ajax 选项卡上实现的示例。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Test</title>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="uistyle.css" />
<script>
$(function() {
$( "#tabs" ).tabs()({
active: 2,
beforeLoad: function( event, ui ) {
ui.jqXHR.error(function() {
ui.panel.html(
"Couldn't load this tab. We'll try to fix this as soon as possible. " +
"If this wouldn't be a demo." );
});
}
});
});
</script>
</head>
<body>
<div id="tabs">
<ul>
<li><a href="#">Tab 1</a></li>
<li><a href="#">Tab 2</a></li>
<li><a href="#">Tab3</a></li>
</ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:38:32.290

你可以做的是使用哈希标签。所以你说如果你的页面是index.html。你可以说：

javascript:

```
if (window.location.hash == '#page1') $( "#tabs" ).tabs({ active: 1 }); 
```

html

```
<div id="tabs">
    <ul>
    <li><a href="index.html#page1">Tab 1</a></li>
    <li><a href="index.html#page2">Tab 2</a></li>
    <li><a href="index.html#page3">Tab3</a></li>
    </ul>
</div> 
```

# php - PHP包装器检查页面而不是在wordpress中的某些页面上显示内容

> ID：15594128
> 
> 赞同：0
> 
> 时间：2013-03-24T01:24:04.820
> 
> 标签：php, wordpress

我在网站页脚的一部分中有一个登录表单，它现在显示在每个页面上。我想在登录表单上显示它，因为它在页面上有一个更大的登录框。

我需要什么代码来包装页脚登录框以检查它们的页面是否是登录页面而不显示它是否是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:28:01.437

这样的事情应该做：

```
 if ($_SERVER['PHP_SELF'] != 'login.php') {
      ....your form...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:58:38.167

有一个功能可以检查您是否正在查看特定页面：

[http://codex.wordpress.org/Function_Reference/is_page](http://codex.wordpress.org/Function_Reference/is_page)

关于检查 $_SESSION 的另一个答案很好，但这会让你只使用一个 ID，所以理论上你可以更改链接 url 或检查其他一些属性。

# php - 如何嵌入推特推文.. 如何从推文 URL 中捕获图像并显示实际图像？

> ID：15594130
> 
> 赞同：0
> 
> 时间：2013-03-24T01:24:25.413
> 
> 标签：php, twitter, embedly

我想知道我可以使用什么样的方法直接嵌入推特推文中包含的视频或图片......例如..下面是来自奥巴马的推文

```
President Obama: "Right now, we have a real chance to reduce gun violence in America." http://t.co/tmCoUsPyyB #TimeToAct 
```

以 htttp:// 开头的链接可能是一张图片。我如何实际对其进行编程，以便直接使用来自 url 的图像显示推文？我知道 PHP 并且我以前使用过 twitter API，但我不知道如何轻松实现这一点。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:14:21.613

第一步是提取文本块的 URL，还有一个问题指出如何解决这个问题：[Extract URLs from text in PHP](https://stackoverflow.com/questions/910912/extract-urls-from-text-in-php)

然后，您可以使用 Embedly 或类似的服务来提取与该 url 关联的元数据。以下是 Embedly 将返回的元数据示例：[http ://embed.ly/docs/explore/oembed?url=http%3A%2F%2Ft.co%2FtmCoUsPyyB](http://embed.ly/docs/explore/oembed?url=http%3A%2F%2Ft.co%2FtmCoUsPyyB)

该`html`属性是您要在页面上呈现的内容。

我们还有一个 PHP 库，您也可以使用。

希望有帮助！

# asp.net - 类型“ASP._Page_index_cshtml”不继承自“System.Web.WebPages.WebPage”

> ID：15594135
> 
> 赞同：9
> 
> 时间：2013-03-24T01:25:05.203
> 
> 标签：asp.net, asp.net-mvc, razor, asp.net-mvc-4

我正进入（状态：

> 类型“ASP._Page_index_cshtml”不继承自“System.Web.WebPages.WebPage”。

当我浏览到我的 index.cshtml 文件时。这很简单：

```
@using System.Web.Optimization
@inherits System.Web.Mvc.WebViewPage
<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>Hello World</title>
    @Styles.Render("~/Content/css", "~/Content/themes/base/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    @Scripts.Render(
        "~/bundles/jquery",
        "~/bundles/jqueryui"
    )
</body>
</html> 
```

我的 index.cshtml 文件位于 Views 文件夹之外，如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-18T12:37:13.360

不要删除继承，这可能是必要的，并且可能会导致将来出现另一个问题。

而是试试这个：

在失败的 Web 项目中启用“查看所有文件”，然后搜索看起来正确但未包含在 Visual Studio 中的文件，然后将其删除。如果它在您的部署文件夹中失败，请尝试清理该文件夹，然后重新部署该站点，您可能有可能导致相同问题的不必要文件。

在我的例子中，在 webproject 的根目录中，我有一个额外的 _ViewStart.cshtml 副本（从项目中排除），我删除了该文件，并且成功了。

希望它有所帮助，让我知道这是否也解决了您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:24:55.680

我只需要删除：`@inherits System.Web.Mvc.WebViewPage`

看起来我在重新组织我的项目时遇到了复制粘贴错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-14T22:16:54.217

我将 cshtml 行从：

```
Layout = "~/Views/_ViewStart.cshtml"; 
```

到

```
Layout = "~/Views/Shared/_Layout.cshtml"; 
```

因为 _ViewStart.cshtml 只包含那一行代码。需要布局文件，因为它包含客户端验证的脚本。

当我删除该行时它也有效，但我更喜欢保留`_Layout.cshtml`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-20T21:13:38.117

对我有用的是添加...

```
@inherits System.Web.Mvc.ViewStartPage 
```

...到顶部`_ViewStart.cshtml`。

我认为这对我有用的原因是因为我的`~/Views/Web.config`文件。我在其中放置了以下块，以避免`@inherits`对我的观点进行大量调用...

```
<configuration>
  <system.web.webPages.razor>
    <pages pageBaseType="System.Web.Mvc.WebViewPage"> <!-- Notice pageBaseType -->
      ...
    </pages>
  </system.web.webPages.razor>
</configuration> 
```

我认为这指示剃须刀引擎包括所有视图`_ViewStart.cshtml`都是 type `System.Web.Mvc.WebViewPage`。这`System.Web.Mvc.ViewSTartPage`与错误的类型不同。放在`@inherits System.Web.Mvc.ViewStartPage`开头`_ViewStart.cshtml`显式指定所需的类型`_ViewStart.cshtml`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-15T07:41:10.897

可能是将旧版本的 System.Web.WebPages.dll 加载到内存中，并尝试将您的 cshtml 页面从该 dll 转换为 WebPages 类的版本。

要对此进行测试，请尝试查看当前注册了哪些 http 模块：

```
var allModules = HttpContext.Current.ApplicationInstance.Modules;
for( int i = 0; i < allModules.Count; i++ ) {
    Trace(allModules.GetKey(i));
} 
```

就我而言，那是：

```
....
__DynamicModule_System.Web.WebPages.WebPageHttpModule, System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35_bca8e05a-5746-45b0-be95-2b920b455ccf

__DynamicModule_System.Web.WebPages.WebPageHttpModule, System.Web.WebPages, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35_c1a67b42-31a9-47f1-8483-9e712fabe2a7 
```

要解决此问题，您需要替换 /Bin 文件夹中旧版本的 System.Web.WebPages.dll 或其他可能引用它的 dll-s。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-29T16:21:04.693

只需删除 _ViewStart.cshtml 并重新添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-04T06:40:56.330

无需紧张。只需遵循 2 个基本步骤

1.  删除`_ViewStart.cshtml`
2.  对评论发表声明。索引视图中以下语句的含义：

    ```
    Layout = "~/Views/_ViewStart.cshtml"; 
    ```

    并将其标记为评论：

    ```
    //Layout = "~/Views/_ViewStart.cshtml"; 
    ```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-24T01:42:42.237

为什么要尝试直接浏览到视图？为什么不在视图文件夹中？

要获得一个基本的“Hello World”页面，您首先要创建一个名为`HomeController.cs`：

```
using System.Web.Mvc;

public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

然后创建一个文件`/Views/Home/Index.cshtml`并将您的标记放入其中。您可能还需要添加：

```
@{
    Layout = null;
 } 
```

到页面顶部，因为它看起来不像您使用的是母版页。

作为旁注，所有这些都假设您没有搞砸默认路由。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2016-06-20T08:54:12.713

从您的 Views 文件夹中删除 web.config。

当您包含该文件夹中的 Partial1.cshtml 时，它还包含该文件夹中的 web.config。而那个 web.config 是说所有页面都必须从 WebViewPage 继承。

# cordova - Cordova InAppBrowser - 如何禁用 URL 和导航栏？

> ID：15594139
> 
> 赞同：36
> 
> 时间：2013-03-24T01:25:22.007
> 
> 标签：cordova, phonegap-plugins

我目前正在构建一个新闻聚合器应用程序，并且我正在使用 InAppBrowser 供人们阅读文章。现在，我的问题是：我可以删除 URL 和导航栏吗？另外，我可以更改“完成”按钮的文字吗？

请告诉我...

谢谢

![在此处输入图像描述](../Images/518b6d8275380c8e93d290c8111e1c58.png)

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-03-24T09:47:37.840

要删除 URL，只需将“**位置**”选项设置为“**否**”。

```
var ref = cordova.InAppBrowser.open('http://apache.org', '_blank', 'location=no'); 
```

*在 Android 上，这会删除“后退/前进”按钮、URL 和“完成”按钮，而不仅仅是 URL，但幸运的是，有一个特殊的 Android 专用“<strong>hideurlbar”选项可以仅删除 URL。*

```
var ref = cordova.InAppBrowser.open('http://apache.org', '_blank', ‘hideurlbar=yes’); 
```

可以通过添加“ **closebuttoncaption** ”选项来更改“完成”按钮文本。
*（如果使用 InAppBrowser 插件 v2.0.2 或更高版本，现在可以在 Android 上运行。）*

```
var ref = cordova.InAppBrowser.open('http://apache.org', '_blank', 'closebuttoncaption=My Button Name'); 
```

在 iOS 上，可以通过将“**工具栏**”选项设置为“**否**”来删除工具栏。

```
var ref = cordova.InAppBrowser.open('http://apache.org', '_blank', 'toolbar=no'); 
```

但是，删除工具栏意味着“后退/前进”按钮和“完成”按钮将不再显示。这使得退出 InAppBrowser 变得很困难。

*（退出 InAppBrowser 在 Android 上不是问题，因为如果“完成”按钮未显示，系统后退按钮提供了另一种退出方法。）*

**如果您想保留“完成”按钮，但去掉“后退/前进”按钮**，请将“隐藏导航按钮”选项设置**为**“**是**”（需要 InAppBrowser 插件 v3.0.0 或更高版本）。

```
var ref = cordova.InAppBrowser.open('http://apache.org', '_blank', 'hidenavigationbuttons=yes'); 
```

对于较旧的插件版本，您可以通过如下修改 InAppBrowser 插件的源代码来手动删除所有 InAppBrowser 中的“后退/前进”按钮。

* * *

对于 iOS，打开以下文件

```
YOURAPPNAME/platforms/ios/YOURAPPNAME/Plugins/cordova-plugin-inappbrowser/CDVInAppBrowser.m 
```

并更改以下代码行：

```
[self.toolbar setItems:@[self.closeButton, flexibleSpaceButton, self.backButton, fixedSpaceButton, self.forwardButton]]; 
```

到：

```
[self.toolbar setItems:@[self.closeButton, flexibleSpaceButton]]; 
```

然后使用命令行再次构建您的项目。

* * *

对于 Android，打开以下文件

```
YOURAPPNAME/platforms/android/src/org/apache/cordova/inappbrowser/InAppBrowser.java 
```

并删除以下代码行：

```
toolbar.addView(actionButtonContainer); 
```

要同时删除 URL，请同时删除以下代码行：

```
toolbar.addView(edittext); 
```

然后使用命令行再次构建您的项目。

* * *

感谢 danw 和 Vishwani 提供有用的答案。*2018 年 4 月使用 Cordova 8.0.0、Cordova iOS 4.5.4、Cordova Android 7.1.0 和 cordova-plugin-inappbrowser 3.0.0 测试*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-31T03:02:29.117

在 3.1.0(?) 中，您可以使用“工具栏”选项隐藏工具栏。

例如：

```
ref = window.open('http://some.page/foo/', '_blank', 'location=no,toolbar=no'); 
```

请参阅：[phonegap 文档](http://docs.phonegap.com/en/3.1.0/cordova_inappbrowser_inappbrowser.md.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-03T05:27:25.533

```
window.open('http://url/', '_blank', 'location=no,toolbar=no'); 
```

**location**：设置为 yes 或 no 以打开或关闭 InAppBrowser 的位置栏。

**toolbar**：设置为 yes 或 no 以打开或关闭 InAppBrowser 的工具栏（默认为 yes）。这 似乎**只是ios**

[在这里](https://github.com/apache/cordova-plugin-inappbrowser)找到所有选项

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-04T21:49:56.117

如果您想保留完成/关闭按钮并删除其他所有内容，请保留 location=yes：

```
var ref = window.open('http://apache.org', '_blank', 'location=yes'); 
```

并在 inappbrowser.java 文件中进行更改：

```
toolbar.addView(close);
close.setText("Done");

if (getShowLocationBar()) {
main.addView(toolbar);} 
```

删除editText 和actionButtonContainer。希望能帮助到你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-28T17:28:44.637

```
const options: InAppBrowserOptions= {
      zoom: 'no',
      hideurlbar: 'yes', // hide the url toolbar
      hidenavigationbuttons: 'yes', // hide navigation buttons back/forward

    }
const browser = this.iab.create(url,'_self',options); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-14T16:36:55.163

如果您想完全删除工具栏，可以暂时将工具栏 HEIGHT 变量设置为 0.0。您将在与上述答案相同的文件中找到它。这不是最好的解决方案，但它会消失。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-26T13:21:55.487

采用：

```
var options = {
  "location": "no", 
  "toolbar": "no"
};
$cordovaInAppBrowser.open(url, target, options); 
```

# php - 当它被 PHP 回显时，我无法让这个 Javascript 工作

> ID：15594143
> 
> 赞同：0
> 
> 时间：2013-03-24T01:25:48.927
> 
> 标签：php

以下 javascript 代码由 eBay Partnernetwork 提供，它在 HTML 文件中运行良好，但是当我`echo()`在 PHP 脚本中尝试它时，它没有被正确解析。

这是代码：

```
 <script type='text/javascript' src='http://adn.ebay.com/files/js/min/jquery-1.6.2-min.js'></script>
 <script type='text/javascript' src='http://adn.ebay.com/files/js/min/ebay_activeContent-min.js'></script>
 <script charset='utf-8' type='text/javascript'>
 document.write("\x3Cscript type='text/javascript' charset='utf-8' src='http://adn.ebay.com/cb?programId=11&campId=XXX&toolId=10026&keyword=Huawei+MediaPad+3G&sortBy=4&width=180&height=60&font=1&textColor=333366&linkColor=333333&arrowColor=FF9900&color1=6599FF&color2=[COLORTWO]&format=ImageLink&contentType=TEXT_AND_IMAGE&enableSearch=y&usePopularSearches=n&freeShipping=n&topRatedSeller=n&itemsWithPayPal=n&descriptionSearch=n&showKwCatLink=n&excludeCatId=&excludeKeyword=&catId=171485&disWithin=200&ctx=n&autoscroll=n&title=Odys+Noon&flashEnabled=' + isFlashEnabled + '&pageTitle=' + _epn__pageTitle + '&cachebuster=' + (Math.floor(Math.random() * 10000000 ))'>\x3C/script>" );
 </script> 
```

我认为引号有问题，`document.write("...");`但无论我尝试什么，它都不起作用。我逃脱了它们并用十六进制代码替换它们，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:32:44.943

你有没有尝试过`document.write("<scr"+"ipt src=blahblahblah></scr"+"ipt>");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:32:51.503

试试这个

```
<?php
    $str = <<<EOF
 //your script here --->(1)
EOF;
    echo $str;
?> 
```

注：EOF；对齐很重要（最左边），尝试在更好的 ide 或至少 Notepad++ 中输入！

**更新：**

> 注意：不再像在脚本中那样在 --->(1) 中转义

# android - GPS航点经纬度

> ID：15594157
> 
> 赞同：0
> 
> 时间：2013-03-24T01:27:08.400
> 
> 标签：android, tags, gps, latitude-longitude, google-maps-android-api-2

我正在使用 Goggle Maps SDK 在手机上制作 GPS 应用程序。我想添加一个功能，让用户只需在屏幕上点击该点即可获取特定点的纬度和经度。

例如，如果有“这是什么？” 像谷歌地图上的那种功能，但在手机版上？我将如何在代码中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:58:48.293

好的。首先，您需要扩展`com.google.android.maps.Overlay`和覆盖该`onTap`方法：

```
class MOverlay extends Overlay {
        @Override
        public boolean onTap(GeoPoint p, MapView mapView) {
            int latitude = p.getLatitudeE6();
            int longitude = p.getLongitudeE6();

            // Do whatever you need to do here.

            return true; // true means we handled the tap
        }

} 
```

然后，您需要将此叠加层添加到地图上的叠加层列表中。假设您的活动正在扩展`MapActivity`，则此代码应该可以工作：

```
class MyActivity extends MapActivity {
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          // your code here

          MapView map = findViewById(R.id.map); // you can change this

          MOverlay clickCatcher = new MOverlay();
          List<Overlay> allOverlays = map.getOverlays();
          allOverlays.add(clickCatcher);
          map.invalidate();
          // All done!
     }
} 
```

希望对您有所帮助。祝你好运！

# java - 为什么hadoop上没有作业运行

> ID：15594159
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:27:13.197
> 
> 标签：java, hadoop, mapreduce

使用hadoop1.3.0。我在 Eclipse 中正确运行了示例 WordCount。但是当我输入 localhost:50030 时，它说正在运行的工作和退休的工作都没有。事实是我已经得到了正确的输出。我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:48:23.647

最有可能的是，从 Eclipse 运行作业不会将其提交到您的作业跟踪器，而是生成一个独立的 VM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:02:13.403

您不需要从 eclipse 运行 map-reduce 程序。您需要创建一个可运行的 jar 并使用 hadoop 命令从单独的 VM 运行它。

也许你可以使用：`hadoop jar runnable.jar inputHDFSPath outputHDFSPath`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:11:31.440

由于您已正确运行命令，因此应该没有正在运行的作业或已退休的作业。这就是它所表明的。为什么您期望已完成的工作属于退休工作或正在运行的工作类别？ **由于作业已成功完成，它必须出现在已完成作业列表下。**

# css - 我如何显示溢出：使用 javascript 或 jquery 的隐藏内容

> ID：15594165
> 
> 赞同：0
> 
> 时间：2013-03-24T01:28:33.167
> 
> 标签：css

我有一个具有 CSS 的 div 内容：

```
height:700; 
overflow:hidden; 
```

我想要做的是我想创建一个按钮，上面写着：展开

因此，一旦单击展开，我希望该 div 的 css 更改为：

`overflow:hidden`至`overflow:visible`

所以知道 div 将展开到 css 中指定的高度，如果展开按钮变成折叠并在单击时反之亦然，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:33:20.957

[jQuery](http://jquery.com/)是你的朋友。它是构建您所描述的基本 DOM 事件的完美库。您的代码可能如下所示：

```
$('#expand-button').click(function(e) {
    $('.my_div').css('overflow', 'visible');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:34:18.460

您可以使用 jQuery .css 函数来修改 CSS 属性的值。 [http://api.jquery.com/css/](http://api.jquery.com/css/)。

您还可以使用 jQuery 将一段 HTML 替换为另一个，例如。更改按钮。 [http://api.jquery.com/css/](http://api.jquery.com/css/)

# mysql - 使用 MySQL 查询导入 CSV 文件（指定列）

> ID：15594166
> 
> 赞同：2
> 
> 时间：2013-03-24T01:28:43.550
> 
> 标签：mysql, csv, phpmyadmin

我试图将 CSV 文件导入到具有名为“id”的自动递增列的表中。我不想插入 id 列，因为它自己编号，但经过多次尝试，我无法让它工作。这是我尝试的查询：

```
LOAD DATA LOCAL INFILE 'C:\\CaliberMap.csv'
INTO TABLE sefeed_calibermap 
(SiteCaliber,SE1Caliber,SE2Caliber,Other1Caliber,Other2Caliber,Other3Caliber,Other4Caliber)
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

当我执行查询时，我收到以下消息：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 'FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"' LINES TERMI' 附近使用正确的语法

我难住了！我在阅读了 Internet 上许多不同地方的示例后编写了此查询，因此语法看起来是正确的。

我正在运行 PhpMyAdmin 版本 5.6.10。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T12:09:40.770

我认为您已阅读的文档使您感到困惑。试试这个：

```
LOAD DATA LOCAL INFILE 'C:\\CaliberMap.csv'
INTO TABLE sefeed_calibermap     
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(SiteCaliber,SE1Caliber,SE2Caliber,Other1Caliber,Other2Caliber,Other3Caliber,Other4Caliber); 
```

表格字段应位于末尾。

# cloud - parse.com 云嵌套函数

> ID：15594173
> 
> 赞同：0
> 
> 时间：2013-03-24T01:30:38.603
> 
> 标签：cloud, parse-platform, relational, chained

我正在尝试在 parse.com 上为以下内容编写云代码。我有三个类用户，品牌和活动。我将 LastLoginTime 保留在 User 类中。Brand 类有一个名为 Campaigns 到 Campaign 类的关系。我需要从用户那里检索 LastLoginTime，然后获取所有更新日期大于 LastLoginTime 的活动，最后我需要检索与这些活动相关的品牌。到目前为止，我只能创建一个函数来获取 LastLoginTime。我曾尝试使用 matchesKeyInQuery 或链式函数，但未能解决。这是到目前为止的代码。

```
Parse.Cloud.define("getLoginTime",function(request, response){
     var User = Parse.Object.extend("User");
     var query = new Parse.Query(User);
     var lastlogin;
     query.equalTo("objectId", request.params.objectId);
     query.first({
         success: function(object) {
             // The object was retrieved successfully.
             lastlogin = object.get("LastLoginTime");
             response.success(lastlogin);     // works well if left alone :)
             console.log("entered time");
             console.log(lastlogin);
         },
         error: function(object, error) {
             // The object was not retrieved successfully.
             // error is a Parse.Error with an error code and description.
         }
     });
 }); 
```

以上有效，以下无效：

```
Parse.Cloud.define("getNewCampaigns", function (request, response){
        var Campaign = Parse.Object.extend("Campaigns");
        var cquery = new Parse.Query(Campaign);
        var lastlogin;
        lastlogin = parse.Cloud.run("getloginTime",request.params.objectId);
        cquery.greaterThan("updatedAt",lastlogin);
        cquery.find({
            success: function(results) {
                // results is an array of Parse.Object.
                response.success(results);
            },

            error: function(error) {
                // error is an instance of Parse.Error.
            }
        });
    }); 
```

有没有办法或者我需要改变我的模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:54:31.213

`Parse.Cloud.run`返回一个[Promise](https://parse.com/docs/js/symbols/Parse.Promise.html)（[更多关于 Promises for Parse here](http://blog.parse.com/2013/01/29/whats-so-great-about-javascript-promises/)），或者您可以将回调作为第三个参数发送。

使用回调，您的代码应该看起来像这样：

```
Parse.Cloud.run("getloginTime", request.params.objectId, {
    success: function(lastlogin) {
        cquery.greaterThan("updatedAt",lastlogin);
        cquery.find({
            success: function(results) {
                // results is an array of Parse.Object.
                response.success(results);
            },
            error: function(error) {
                // error is an instance of Parse.Error.
            }
        });
    },
    error: function(error) {}
}); 
```

看到这里讨厌的嵌套了吗？使用 Promise，您的代码将看起来像这样：

```
Parse.Cloud.run("getloginTime", request.params.objectId).then(function(lastlogin) {
    var cquery = new Parse.Query(Campaign);
    cquery.greaterThan("updatedAt", lastlogin);

    return cquery.find();
}).then(function(results) {
    // results is an array of Parse.Object.
    response.success(results);
}, function(error) {
    // error is an instance of Parse.Error.
}); 
```

# javascript - 为嵌套复选框更新 CSS onDomReady

> ID：15594175
> 
> 赞同：1
> 
> 时间：2013-03-24T01:31:28.217
> 
> 标签：javascript, jquery, checkbox

我有一些嵌套的复选框正在从数据库中加载正确的数据，但是我想在文本标签中添加一条线来检查那些被选中的复选框。二级复选框工作正常，但我无法使一级复选框正常工作。

**你可以在这里看到错误：**

> [http://jsfiddle.net/Zfv7h/3/](http://jsfiddle.net/Zfv7h/3/)

```
$(document).ready(function() {
  $(".content-finalized").each(function() {
    if ($(this).attr("checked")) {
     $(this).closest("li").css("text-decoration", "line-through");
    }
    });
  $(".subchapter-finalized").each(function() {
    if ($(this).attr("checked")) {
      $(this).closest("li").css("text-decoration", "line-through");
    }
    });
}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:38:43.460

**更新的答案**

将您的 Javascript 更改为此

```
$(document).ready(function () {
    $("input.content-finalized:checkbox:checked").next('span').css("text-decoration", "line-through");
    $("input.subchapter-finalized:checkbox:checked").parent().css("text-decoration", "line-through");
}); 
```

我不得不稍微改变你的 html 标记。我所做的只是将章节包装在一个 . 这就是为什么。当我将 css line-though 应用于 parent`<li>`时，它也将其应用于它的子项，即使我将 text-decoration 指定为 none 以用于未检查的元素。所以，现在`<li>`我没有将其应用于 parent ，而是将其应用于`<span>`。

[这是一个更新的小提琴](http://jsfiddle.net/Zfv7h/7/)

# qt - Qt5 中的 QAudioOutput 不产生任何声音

> ID：15594180
> 
> 赞同：0
> 
> 时间：2013-03-24T01:32:13.657
> 
> 标签：qt

我在 kubuntu 12.10 下工作并开发一个应用程序，我需要在其中生成一些声音到 QIODevice 中，然后使用 QAudioOutput 播放它。

我已经阅读了所有关于如何正确地做到这一点的文献，我认为已经这样做了。

到目前为止，我已经完成了：

```
QVector <double> * soundData = SoundGenerator::getSound();

soundBuffer->open(QIODevice::ReadWrite);
QDataStream writeStream(soundBuffer);
foreach(double d, *soundData) {
    char value = d * (2 << 7);
    //  qDebug() << "Value : " << (short int)value;
    writeStream << value;
}

QAudioFormat format;
// Set up the format, eg.
format.setSampleRate(SoundGenerator::getAudioSampleRate());
format.setChannelCount(1);
format.setSampleSize(8);
format.setCodec("audio/pcm");
format.setByteOrder(QAudioFormat::LittleEndian);
format.setSampleType(QAudioFormat::SignedInt);
QAudioDeviceInfo info(QAudioDeviceInfo::defaultOutputDevice());

audio = new QAudioOutput(format, this);
if (audio->error() != QAudio::NoError) {
    qDebug() << "Problem playing sound";
}

connect(audio, SIGNAL(stateChanged(QAudio::State)), this, SLOT(aboutToFinish(QAudio::State))); 
```

我还打电话给 audio->start(soundBuffer)

— 从另一个插槽我在 QAudioOutput 的初始化中没有任何错误

而且我根本没有声音（所有其他应用程序都有声音，我正在将 Qt4 应用程序移植到 Qt5，在 Qt4 中，Phonon 一切正常）

aboutToFinish 插槽在开始时以 ActiveState 作为状态调用，在调用 QAudioOutput::error 时调用 NoError，但它不再被调用，即使等待的时间远远超过预期的生成声音持续时间。

声音的生成过程是毋庸置疑的，它已经通过编写 wav 文件进行了测试，并且可以正常工作。

此外，我已经从 Qt 的源代码构建了多媒体示例，当涉及纯音频时，没有输出（例如在 sprectrum 示例中），另一方面，视频完美地播放声音。

是否有任何已知问题？那是一个错误吗？难道我做错了什么 ？

提前致谢 ;）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-04T06:29:40.417

这不起作用，因为您设置了 8 位样本大小和有符号整数格式。

解决方案：对于 8 位分辨率，您必须将样本类型设置为无符号：

```
format.setSampleType(QAudioFormat::UnsignedInt); 
```

这不是 Qt 错误。为什么？答案是在 WAV 规范中，8 位样本总是无符号的，而 16 位样本总是有符号的。任何其他组合都不起作用。

因此，对于 16 位样本，您必须输入：

```
format.setSampleType(QAudioFormat:SignedInt); 
```

（恕我直言，Qt 没有通过强制使用正确的格式来处理这些情况，这是一个缺陷，但并非缺乏功能）。

您可以在本页的注释部分了解更多信息：[https ://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

还有这个非常相似的问题的解决方案（同样的问题，但使用 16 位）：[Qt QAudioOutput push mode](https://stackoverflow.com/questions/15651407/qt-qaudiooutput-push-mode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T21:54:25.653

尝试添加：

`QEventLoop loop;`

`loop.exec();`

# xcode - Xcode 图形计算器 sin(X) cos(x) tan(x)

> ID：15594185
> 
> 赞同：2
> 
> 时间：2013-03-24T01:33:07.970
> 
> 标签：xcode, core-graphics, calculator

我想创建一个图形计算器，但我坚持使用图形位。我想知道如何为 sin(x) cos(x) tan(x) 绘制图形。我已经做了网格。我不想使用核心情节框架。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:37:02.530

要实际绘制函数，请像使用纸和铅笔一样：针对多个输入评估函数。然后画线以连接结果点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:26:54.480

并不是说我真的会这样做（我会看 Core Plot），但您可以使用 Core Image 生成器过滤器绘制这样的图，如下所示：

```
//wavelength and magnitude are distances in destination pixels. Think of them as the width and height of each wave.
kernel vec4 sineWave(float wavelength, float magnitude, __color color)
{
    vec2 coord = destCoord();
    coord.y -= magnitude;
    coord /= vec2(wavelength, magnitude / 2.0);
    float pi = radians(180.0);

    float value = sin(coord.x * pi);

    //Smaller threshold = finer wave line. For a gradient, replace the comparison with 1.0 - abs(…).
    float threshold = 0.1;
    float alpha = abs(coord.y - value) <= threshold;
    return color * alpha;
} 
```

![此内核的 Quartz Composer 渲染输出的屏幕截图](../Images/fcea48df6473d3a0f6d34e8afe8ed643.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:48:10.047

这是一些可以回答您的问题的伪代码：

```
for i = xmin to xmax do
{
   draw XY point at X=(i*x_scale_factor+x_offset) and Y=(sin(i)*y_scale_factor+Y_offset);
} 
```

*请注意：不要在 for 循环中使用浮点数*

**编辑以回应评论**

恕我直言，最简单的方法是获取视图的边界，以获取 X 轴和 Y 轴上数据的最小值和最大值。

然后，您可以使用`NSAffineTransform`实例来转换绘图的坐标。所以一切都可以在你的图形坐标中完成，这更容易。如果您愿意，您可以在坐标 (4.6, 3.2*10-7) 处写一个标签。这是让您入门的关键点。路很长。但是使用`NSAffineTransform`会更容易。

# asp.net-mvc-3 - Jquery Dialog 未在 mvc3 应用程序上打开

> ID：15594187
> 
> 赞同：2
> 
> 时间：2013-03-24T01:33:42.253
> 
> 标签：asp.net-mvc-3, jquery-ui-dialog

在我打开对话框之前，我在 mvc3 上有一个带有剃须刀的简单应用程序

```
@model MvcApplication1.Models.LogOnModel

@{
    ViewBag.Title = "Create";
}

<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>    
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>

<link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />

<h2>Index</h2>

<script type="text/javascript">
    $(document).ready(function () {

        $('#dialog').dialog({
            autoOpen: false,
            width: 400,
            resizable: false,
            title: 'hi there',
            modal: true,

            buttons: {
                "Close": function () {
                    $(this).dialog("close");
                }
            }
        });

        $('#contactForm').submit(function (e) {
            //alert("entro a funcion");
            e.preventDefault();
            $('#dialog').dialog('open');
        });

    });
</script>

@using (Html.BeginForm("Index", "Infracciones", FormMethod.Post, new { id = "contactForm"}))
{
@Html.ValidationSummary(true)
    <fieldset>
        <legend>Infraccion</legend>

      </fieldset>
    <p>
    <input value="Guardar" type="submit" name = "button"/>
    </p>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T03:49:36.403

你只需要添加这个：

```
<div id="dialog"> 
```

在身体里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:13:53.393

尝试：

```
$('#dialog').dialog(); 
```

代替

```
$('#dialog').dialog('open'); 
```

# android - 适配器中的 AutoCompleteTextView 搜索输入键

> ID：15594189
> 
> 赞同：0
> 
> 时间：2013-03-24T01:33:56.007
> 
> 标签：android, android-arrayadapter, autocompletetextview

我在谷歌上搜索，stackover 找不到确切的解决方案。我的问题是，我有一个`ArrayList<String>`适配器，它有

1.  盖特威克伦敦英格兰
2.  Ory 巴黎 法国
3.  英国伦敦希思罗机场

如果用户输入“Lon”，`AutoCompleteTextView`那么我必须显示第 1 行和第 3 行。因为它们有伦敦字符串。

我尝试[了此链接](http://prayag-waves.blogspot.com/2012/07/autocompletetextview-with-simpleadapter.html)并在此处粘贴了代码，但它在第 57 行给出了警告

```
String prefix = constraint.toString().toLowerCase(); 
```

**Pkmn适配器**

```
public class PkmnAdapter extends ArrayAdapter<String> {

    private ArrayList<Pkmn> original;
    private ArrayList<Pkmn> fitems;
    private Filter filter;

    public PkmnAdapter(Context context, int textViewResourceId,
            ArrayList<Pkmn> items) {
        super(context, textViewResourceId);
        this.original = new ArrayList<Pkmn>(items);
        this.fitems = new ArrayList<Pkmn>(items);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.row, null);
        }
        Pkmn pkmn = fitems.get(position);
        if (pkmn != null) {
            TextView tt = (TextView) v.findViewById(R.id.RlabPName);

            if (tt != null) {
                tt.setText(pkmn.getNAME());
            }
        }
        return v;
    }

    @Override
    public Filter getFilter() {
        if (filter == null)
            filter = new PkmnNameFilter();

        return filter;
    }

    private class PkmnNameFilter extends Filter {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults results = new FilterResults();
            String prefix = constraint.toString().toLowerCase();

            if (prefix == null || prefix.length() == 0) {
                ArrayList<Pkmn> list = new ArrayList<Pkmn>(original);
                results.values = list;
                results.count = list.size();
            } else {
                final ArrayList<Pkmn> list = new ArrayList<Pkmn>(original);
                final ArrayList<Pkmn> nlist = new ArrayList<Pkmn>();
                int count = list.size();

                for (int i = 0; i < count; i++) {
                    final Pkmn pkmn = list.get(i);
                    final String value = pkmn.getNAME().toLowerCase();

                    if (value.startsWith(prefix)) {
                        nlist.add(pkmn);
                    }
                }
                results.values = nlist;
                results.count = nlist.size();
            }
            return results;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            fitems = (ArrayList<Pkmn>) results.values;

            clear();
            if (fitems != null) {
                int count = fitems.size();
                for (int i = 0; i < count; i++) {
                    Pkmn pkmn = (Pkmn) fitems.get(i);
                    fitems.add(pkmn);
                }
            }
        }

    }
} 
```

**MainActivity.java**放置适配器

```
Pkmn[] item = new Pkmn[4];
item[0] = new Pkmn("Gatewick London England");
item[1] = new Pkmn("Ory Paris France");
item[2] = new Pkmn("Heathrow London England");
item[3] = new Pkmn("Ataturk Istanbul Turkey");

ArrayList<Pkmn> list = new ArrayList<Pkmn>(Arrays.asList(item));
MultiAutoCompleteTextView auto = (MultiAutoCompleteTextView) findViewById(R.id.multiAutoCompleteTextView1);
PkmnAdapter adap = new PkmnAdapter(this,android.R.layout.simple_list_item_1, list); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:50:58.197

首先，如果输入“Lon”，则不应检查元素是否以“Lon”开头。可能您需要将 if 语句切换为：

```
 if (value.contains(prefix)) {
         nlist.add(pkmn);
 } 
```

在您的`performFiltering()`方法中执行任何过滤之前，请检查约束是否为空（提示：使用`TextUtils`类）。如果是，则返回原始数据。因此，您正在避免 NPE。您还需要注意可以像这样抛出 NPE 的关键点：

```
 if (prefix == null || prefix.length() == 0) {   } 
```

干杯，

# php - 从其他类codeigniter访问类

> ID：15594192
> 
> 赞同：0
> 
> 时间：2013-03-24T01:34:20.117
> 
> 标签：php, codeigniter, class, rackspace

我有这个类，我在 codeigniter 中作为库创建

```
 class Openstack{

function __construct($params = array())
{

    //namespace OpenCloud;

    // note that we have to define these defaults BEFORE including the
    // connection class
    define('RAXSDK_OBJSTORE_NAME','cloudFiles');
    define('RAXSDK_OBJSTORE_REGION','ORD');
    require_once('lib/rackspace.php');

    // these hold our environment variable settings
    define('AUTHURL', 'https://identity.api.rackspacecloud.com/v2.0/');
    define('USERNAME', "#####");
    define('TENANT', "$$$$$");
    define('APIKEY', "asdfasdfasdfasdfasdfasdfasdf");

    // establish our credentials
    $connection = new Rackspace(AUTHURL,
        array( 'username' => USERNAME,
               'tenantName' => TENANT,
               'apiKey' => APIKEY ));

    $ostore = $connection->ObjectStore();... 
```

问题是，当我使用以下方法调用函数时：

```
 public function test_upload(){
    $this->load->library('opencloud/openstack');

    $this->openstack->upload_file("thisworks.pdf", "static/news/10_12.pdf");

} 
```

我收到一个错误，说没有找到指向我有新 Rackspace 的上面的行的类 Rackspace...

在 rackspace.php 中有一个类名叫做 Rackspace

```
 class Rackspace extends OpenStack{ ... 
```

我不知道为什么它找不到它......我知道它正在加载文件，因为我试图在其中回显一些东西并且它出现了......

知道发生了什么吗？

编辑：在 rackspace.php 文件的顶部有一个

```
 namespace OpenCloud; 
```

我在我创建的库文件类 Openstack 中没有它......当我把它放在那里时，我收到一个错误“不存在的类：Openstack”

# javascript - 使用 javascript 在 div 中显示游戏分数

> ID：15594196
> 
> 赞同：1
> 
> 时间：2013-03-24T01:35:55.420
> 
> 标签：javascript, jquery, css, html

我一直在做一些关于更新包含记分牌的 div 的搜索，但我无法真正深入了解它。使用 innerHTML 有什么缺点，还有哪些其他选择？

我想要获得的是每次分数变化时都会更新的分数，目前这也是正确/错误警报所在的位置。

小提琴的摘录：

```
if(pick1 == pick2 && id1!=id2){
    alert('Correct');
    score += 100;
} 
```

[http://jsfiddle.net/94jerdaw/Sr3Yp/](http://jsfiddle.net/94jerdaw/Sr3Yp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:39:25.200

考虑使用 jQuery 来更新记分板的 html：

```
$('.scoreboard').html(score);

pick1 = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:39:55.163

innerHTML 或 innerText 没有任何问题，但您可能需要研究 jQuery 之类的框架来做到这一点。

# java - Java Spring中的一个应用程序的解释

> ID：15594197
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:36:11.040
> 
> 标签：java, spring

我在 Java Spring 中做了一个简单的应用程序，它应该读取和写入具有两个 varchar 字段的数据库。

```
package learn.spring.example.dao;

import org.springframework.jdbc.core.PreparedStatementCreator;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

@Component
public class  PersonStoreDao implements PersonInter{
    @Autowired
    private JdbcTemplate jdbc;

    public Long saveData(Person person){
    final String querySample="insert into PersonName(first_name, last_name)       values (?, ?)";
   jdbc.update(new PreparedStatementCreator() {
       public PreparedStatement prepStatement(Connection c) throws SQLException {
        PreparedStatement prep = c.prepareStatement(querySample);
        prep.setString(1, person.getFirstName());
        prep.setString(2, preson.getSecondName());
        return prep;
        }
      ,key}
       }
} 
```

Person 类只是一个简单的 bean 类，而 PersonName 是来自数据库的具有两个字段的表。我对此有几个问题。

第一个问题是是否有问题

在jdbc变量和@Component前面使用@Autowired有什么作用？

它如何正确嵌入到与该项目相关的 xml 文件中？

我可以连接到数据库，但不能写它。应该怎么做才能使数据库不仅可以读取而且可以写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:59:10.860

> 在jdbc变量和@Component前面使用@Autowired有什么作用？

这些使基于 Spring 注释的连接处理器意识到这是一个需要连接的类，并且应该将一个值注入到`jdbc`变量中。

> 它如何正确嵌入到与该项目相关的 xml 文件中？

有可能。接线由注释处理器完成。大概它会注入一个类型是`JdbcTemplate`您在 XML 文件中声明的 bean。

> 我可以连接到数据库，但不能写它。应该怎么做才能使数据库不仅可以读取而且可以写入？

您没有向我们展示 XML，但我怀疑问题就在那里。大概您已经指定了一个带有 DataSource 的 JdbcTemplate bean，并且 DataSource 正在连接到一个只允许读取访问的数据库帐户。如果是这种情况，您需要使用不同的数据库帐户，或者为您正在使用的帐户授予所需的访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:01:03.970

@AutoWired 是定义当前 bean 所需的其他 bean 的注释方式。例如看下面；

```
<bean id="person" class="com.Person">
<property name="jdbcTemplate" ref="jdbcTemplate"/>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="myDataSource" />
</bean> 
```

如您所见，使用以下代码段，我们必须在 Person 类中定义一个 ref bean。但是我们可以在使用 @AutoWired 时消除这种情况，因为 jdbcTemplate 会自动注入到 Person 类中。

这里你需要注意的一件事是，如果你试图通过接口类型自动连接并且你的应用程序有很多实现，那么你应该使用@Qualifier 的概念来告诉 Spring 你想要注入哪个版本的实现到你当前的 bean。

至于@Component，通过将 bean 定义为@Component，您可以告诉 Spring Container 扫描所有使用该注解注解的 bean，并使其在 Spring Context 中可用。通过这样做，您不必在 XML 文件中定义您的 bean。更多关于 @Component 和 @Configuration 的信息或多或少相似，可以在以下[线程](https://stackoverflow.com/questions/11903053/difference-between-component-and-configuration-in-spring-3)中找到。

关于您无法连接到数据库的问题，请提供您正在使用的当前应用程序上下文 XML 文件，以便我们了解您是如何连接 JDBCTemplate 的。

# ruby - 在 Mac Mountain Lion 上安装 Ruby 2.0.0 结束时出错，也没有 mysql.sock 文件

> ID：15594198
> 
> 赞同：1
> 
> 时间：2013-03-24T01:36:18.520
> 
> 标签：ruby, macos

我完全是 Ruby 和 Rails 的菜鸟，所以对此我表示感谢。

我使用 RVM 安装了 Ruby 2.0.0。当我收到以下错误消息时，它大部分都通过了：

`Error running 'env GEM_PATH=/Users/victoriamielke/.rvm/gems/ruby-2.0.0-p0:/Users/victoriamielke/.rvm/gems/ruby-2.0.0-p0@global:/Users/victoriamielke/.rvm/gems/ruby-2.0.0-p0:/Users/victoriamielke/.rvm/gems/ruby-2.0.0-p0@global GEM_HOME=/Users/victoriamielke/.rvm/gems/ruby-2.0.0-p0 /Users/victoriamielke/.rvm/rubies/ruby-2.0.0-p0/bin/ruby -d /Users/victoriamielke/.rvm/src/rubygems-2.0.3/setup.rb --verbose', please read /Users/victoriamielke/.rvm/log/ruby-2.0.0-p0/rubygems.install.log Installation of rubygems did not complete successfully.`

我还打开了 ruby​​gems.install.log，它在接近尾声时说：

```
错误：执行 gem 时...（NoMethodError）
    #<Gem::Commands::SetupCommand:0x007fcab29f5838> 的未定义方法 `fu_stream_blksize'

```

Rubygems 安装失败的原因是什么？

另一个问题是错误消息 ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)。我对此进行了谷歌搜索，它说我需要找到 mysql.sock 文件。好吧，我从来没有在我的电脑上找到这个文件，也无法用简单的英语找到如何添加或生成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:53:37.260

看起来安装错误是最近的[**已知问题**](https://github.com/wayneeseguin/rvm/issues/1712)。如果您是初学者，我推荐使用 Ruby 1.9.3，因为 2.0.0 是全新的，您肯定会在语言实现*和*库中发现尚未在 2.0.0 上测试过的错误。

第二个问题无关。可能是您尚未启动 MySQL（您是否运行过`mysql.server start`？）、文件权限、MySQL 配置或任何其他问题。你不应该`/tmp/mysql.sock`自己创建，它是由 MySQL 自动创建的。请打开一个单独的问题。

# android - Android 上的蓝牙低功耗发现

> ID：15594209
> 
> 赞同：1
> 
> 时间：2013-03-24T01:37:56.997
> 
> 标签：android, bluetooth-lowenergy

似乎蓝牙低功耗（又名蓝牙智能）在 Android 上没有官方支持，即使是 4.2 版。任何人都知道标准的 Android API 是否可以发现 BLE 设备？（我不需要配对只是发现会很好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:32:17.447

Android 从 Bluez -> Broadcom 蓝牙切换是正确的。这个开关给安卓用户带来了很多问题。缺少 BT 经典配置文件和 Wifi 与 BT 共存（一个可能会重置另一个，因为它们在大多数手机中位于同一芯片组中）。iPhone 和 MAC 计算机遭受同样的问题（BT vs Wifi）。

Broadcom 开源低能耗 API 未包含在 4.2 中。

HTC One X+ 在 4.1.x 的 Bluez 之上稍作修改（？）Broadcom BLE API，虽然我有时不得不重试连接，但它工作得相当好。包名称是 htc 而不是 Broadcom，但有时 Eclipse 错误消息会告诉它缺少一些 Broadcom 引用。三星还为 BT BLE 提供了一个“秘密”API，其包名称可以发现设备，但似乎不是很强大（这可能是它“秘密”的原因）

Google 已正式表示“BLE 是我们将发布的下一件大事”。那么也许在 Android 5.0 中？但希望在此之前 Galaxy S2（拥有如此大的市场份额并使用与 iPhone 4s 相同的芯片组）能够获得 BLE 支持。（只是我的猜测和希望）。如果 Android 5.0 获得了 BLE API，那么三星 Galaxy S3 应该会获得它，因为三星已将其列为获得 Android 5.0。

只有时间或谷歌会告诉我们……将诺基亚研究中心的旧技术推广到 Meego 和 iOS 设备之外的方式是加班的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:00:18.897

**编辑 2：**今天好像是我的幸运日；）：[新链接](http://android-btle.github.io/framework/) **编辑：**今天似乎是你的幸运日：[开源 API](https://code.google.com/p/broadcom-ble/)

我想这个答案是不充分的，但它是：在某些设备上是，在其他设备上不是。我工作的一家公司对它进行了一些测试，他们可以在 Galaxy S3 上配对，而我的 HTC One S 甚至都没有发现它。

因此，如果制造商实施了此功能，它将起作用，但大多数情况下不会。

关于这个的一些讨论：[德州仪器](http://e2e.ti.com/support/low_power_rf/f/538/t/240097.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T17:43:07.573

听起来标准 api 将出现在 Android api 18 [http://www.androidpolice.com/2013/05/15/bluetooth-low-energy-and-avrcp-1-3-coming-to-android-with- api-level-18/](http://www.androidpolice.com/2013/05/15/bluetooth-low-energy-and-avrcp-1-3-coming-to-android-with-api-level-18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-18T03:16:51.923

具有相关硬件的设备将支持 Android 4.3.x。我刚刚将 Galaxy S2 GT-I9100 放入 4.3.1 Slimbean，现在可以将它与蓝牙 4.0 LE/Smart 心率监测器配对。据三星称，尽管库存硬件只支持 BT 3.0+，但这一点。

# php - 如何在 for 循环中回显这个数组？

> ID：15594210
> 
> 赞同：1
> 
> 时间：2013-03-24T01:38:13.077
> 
> 标签：php, arrays, for-loop, dynamic-arrays

我有一些数组，每个数组都有 4 个值，命名为：

```
$myarray_row0
$myarray_row1
$myarray_row2 
```

所以通常我可以使用这个 echo 语句来获取第一个数组中的值：

```
echo 'My value is '.$myarray_row0[0];   // This works fine 
```

但是我想使用 FOR LOOP 来遍历它们，但我被卡住了，因为我想使用类似的东西：

```
for ($i=0; $i<=10; $i++)
{
 echo 'My value is '.$myarray_row[$i][[$i]];
 echo 'My value is '.$myarray_row[$i][$i+1]];
 echo 'My value is '.$myarray_row[$i][[$i+2]];
 echo 'My value is '.$myarray_row[$i][[$i+3]];
} 
```

我没有对 $i 和所需的括号使用正确的语法......我正在尝试（但失败）让 echo 吐出数组内容，例如：

```
$myarray_row0[0]
$myarray_row0[1]
$myarray_row0[2]
$myarray_row0[3]
etc 
```

请注意，它并不是真正的多维数组，它是一维的，但它几乎看起来像是多维的，因为数组名称中包含“row0”、“row1”、“row2”等。

任何人都知道使用 for 循环中可用的 $i 获取像 $myarray_row0[1] 这样的变量的语法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:43:07.870

您需要使用变量变量名。（自从我使用 php 以来已经有一段时间了，所以可能是错误的）

```
for ($i=0;$i<10l$i++) {
    echo 'My variable name is '.${'myarray_row'.$id}[$i+0];
    echo 'My variable name is '.${'myarray_row'.$id}[$i+1];
    echo 'My variable name is '.${'myarray_row'.$id}[$i+2];
    echo 'My variable name is '.${'myarray_row'.$id}[$i+3];
} 
```

但是，根本不使用它们通常是个好主意。相反，制作一个多维数组对您的情况会好得多。

问题：如果您`$myarray_rowN`有 4 个元素，为什么您的示例`$i+X`在索引中有？

第一次迭代后肯定会超出范围：/（1+1 OK，1+2 OK，1+3 OK 1+4 !OK 等）

可能这样的事情可能会更好？~~（虽然可能是javascript）~~

```
$index = 0;
$rows = array();
while (isset(${'myarray_row'.$i})) {
    array_push($rows, ${'myarray_row'.$i});
}
foreach ($rows as $row) {
    echo 'My variable name is '.$row[0]."\r\n";
    echo 'My variable name is '.$row[1]."\r\n";
    echo 'My variable name is '.$row[2]."\r\n";
    echo 'My variable name is '.$row[3]."\r\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:44:49.657

听起来您需要使用可变变量。请参阅此处的文档：http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

像这样的东西应该工作：

```
for ($i=0;$i<10;$i++) {
  $var = 'myarray_row'.$i;
  echo 'My variable name is ' . $$var[$i+0];
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T01:43:05.767

像这样的东西怎么样：

```
foreach($myarray_row0 as $key => $value){
echo 'The ' . $key . ' value of this array is: ' . $value;
} 
```

以上将遍历所有值`$myarray_row0`并回显当前值

# mongodb - mongodb嵌套查询

> ID：15594212
> 
> 赞同：0
> 
> 时间：2013-03-24T01:38:40.750
> 
> 标签：mongodb, database

这是我的桌子的结构

```
[
 "_id" : 
 "rating" : ,
 "user_id" :
 "review_id" : 
 "user_url" : 
 "content" : ,
 "review_date" : 
 "bus_url" : 
 "type" : ,
 "categories" : [

 ] 
```

我将如何计算多次出现的 user_ids 的数量。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:19:28.400

您需要使用`$group`运算符，更多信息：

[http://docs.mongodb.org/manual/reference/aggregation/group/](http://docs.mongodb.org/manual/reference/aggregation/group/)

# java - 创建多个文件目录

> ID：15594219
> 
> 赞同：0
> 
> 时间：2013-03-24T01:39:47.990
> 
> 标签：java, file, file-io

我有一个程序可以获取一个指向某个文件夹的文件。然后我需要创建两个单独的目录。例如，假设我有一个指向文件夹的文件库`Base`。然后我想创建两个目录 dir1 和 dir2。

我知道您执行以下操作：

```
//Called in constructor
File base = new File (baseFileLocString);

//Make directories
File dir1 = new File (base.getAbsoluteFilePate() + "/dir1");
dir1.mkdir();

File dir2 = new File (base.getAbsoluteFilePate() + "/dir2");
dir2.mkdir(); 
```

不过我不喜欢这种方式。理想情况下，我可以使用`base`和制作目录，而无需创建新的`Files`. 我觉得应该有一种更有效的方法来做到这一点。是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:19:10.033

代替

`File dir1 = new File (base.getAbsoluteFilePath() + "/dir1");`

你可以使用

`File dir1 = new File (base, "dir1");`

看起来更好，但性能将保持不变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:04:42.873

有一个替代方案

```
Files.createDirectory(Paths.get(base.getAbsoluteFilePath(), "dir1")); 
```

除此之外，它比 File.mkdir 更好，因为如果出现问题，mkdir 会返回 false 而不会进行解释，并且 createDirectory 会抛出一个异常来解释发生的事情

# ajax - 如何获得改变 支持组件的价值

> ID：15594224
> 
> 赞同：2
> 
> 时间：2013-03-24T01:40:24.460
> 
> 标签：ajax, jsf, jsf-2, primefaces, composite-component

我不知道如何正确地问这个问题，但我会这样尝试：问题是关于 Primefaces，JSF2 Calendar in composition.. 我想捕捉在日历更改后调用的事件（并捕捉其新的 Date 值）。

我的复合 xhtml：

```
 <composite:interface componentType="myComponent">            
        <composite:attribute name="value" required="true"/>            
    </composite:interface>

    <composite:implementation>
            <p:calendar 
                id="tempCalendar"
                pattern="dd.MM.yyyy" value="#{cc.attrs.value}" 
                valueChangeListener="#{cc.valueChanged}"                   
                validator="DateValidator" converter="MyDateConverter" showOn="button" showButtonPanel="true" navigator="true" >

                <p:ajax event="dateSelect"  update="@this" listener="#{cc.event1}"/>                   
            </p:calendar>
    </composite:implementation> 
```

我的复合豆：

```
public void valueChanged(Object event) {

    log("valueChanged");
}

public void event1(AjaxBehaviorEvent ab) {
    log("Event1");
    if (ab != null && ab.getSource() != null && ab.getSource() instanceof Calendar) {
        //....
    }
} 
```

我正在使用复合材料的页面：

```
<cc:inputdate value="#{mainBean.aDate}" /> 
```

在上面的代码中，我试图在 compotents bean 中捕获新值，但日志看起来像这样：

1.  价值改变

2.  事件1

3.  设定日期

当我在 valueChangedListener 中时，我仍然有日历的旧值。最后设置新值。

所以，首先我想在我的复合 bean 中有新的价值。但我的主要问题是：

**如何在我的 mainBean 中实现一个事件，当更改时会捕获该日历的新值？**

* * *

编辑：我现在的复合材料：

```
<composite:interface componentType="myComponent">
    <composite:attribute name="value" required="true"/>
    <composite:attribute
            name="myListener"
            method-signature="void listener()" />

</composite:interface>

<composite:implementation>
    <h:panelGroup id="container">

        <p:calendar
            value="#{cc.attrs.value}"
            valueChangeListener="#{cc.valueChanged}"
            <p:ajax event="dateSelect"  update="@this,:buttonpanel" listener="#{cc.attrs.myListener}"/>
        </p:calendar>

    </h:panelGroup>
</composite:implementation> 
```

这样我就在我的主页中调用它（与 mainBean 连接）：

```
<cc:inputdate 
    value="#{mainBean.item.myDate}" 
    myListener="#{mainBean.event1}"/> 
```

我想在 mainBean.java 更改后赶上 evet ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:57:09.210

您可以从组件的本地值访问它。IE，

## 我的测试 Facelet

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<f:view>
    <h:head />
    <h:body>
        <h:form>
            <p:calendar pattern="dd.MM.yyyy">
                <p:ajax event="dateSelect" process="@this"
                    listener="#{testBean.event1}" />
            </p:calendar>
        </h:form>
    </h:body>
</f:view>
</html> 
```

## 我的测试豆

```
import org.primefaces.component.calendar.Calendar;

@ManagedBean(name="testBean")
@SessionScoped
public class TestBackingBean 
{
    public void event1(AjaxBehaviorEvent ab) 
    {
        if (ab != null) 
        {
            Calendar calendar =  (Calendar) ab.getSource();

            if(calendar != null)
            {
                System.out.println(String.format("Newly selected value: %s", 
                        calendar.getLocalValue()));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:00:18.547

您已将其指定为`value`组合的属性，因此它应该在任何支持组件的方法中都可用，[`UIComponent#getAttributes()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)如下所示：

```
Object value = getAttributes().get("value"); 
```

# java - 根据模式查找整行文本。（正则表达式）

> ID：15594225
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:40:30.963
> 
> 标签：java, regex

我对 RegEx 还很陌生，想参与这个问题。

这是一个例子：

```
String string = "John gets a Star Wars ticket" + \n
                "Keith gets a soccer ticket" + \n
                "Mary gets a Star Wars ticket" 
```

什么是正则表达式，因此对于其中包含的行，输出将如下所示 `Star Wars`：

```
John gets a Star Wars ticket
Mary gets a Star Wars ticket 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:03:57.613

```
 String string = "John gets a Star Wars ticket\n" +
            "Keith gets a soccer ticket\n" +
            "Mary gets a Star Wars ticket";
    for (String line : string.split("\n")) {
        if (line.matches(".*Star Wars.*")) {
            System.out.println(line);
        }
    } 
```

# scala - 在 Scala 中计算素数：这段代码是如何工作的？

> ID：15594227
> 
> 赞同：15
> 
> 时间：2013-03-24T01:41:21.953
> 
> 标签：scala, stream, primes

所以我花了几个小时试图弄清楚这段代码是如何产生素数的。

```
lazy val ps: Stream[Int] = 2 #:: Stream.from(3).filter(i =>
   ps.takeWhile{j => j * j <= i}.forall{ k => i % k > 0}); 
```

我使用了许多 printlns 等，但没有什么让它更清楚。

这就是我认为代码的作用：

```
/**
 * [2,3] 
 * 
 * takeWhile 2*2 <= 3 
 * takeWhile 2*2 <= 4 found match
 *      (4 % [2,3] > 1) return false.
 * takeWhile 2*2 <= 5 found match
 *      (5 % [2,3] > 1) return true 
 *          Add 5 to the list
 * takeWhile 2*2 <= 6 found match
 *      (6 % [2,3,5] > 1) return false
 * takeWhile 2*2 <= 7
 *      (7 % [2,3,5] > 1) return true
 *          Add 7 to the list
 */ 
```

但是，如果我`j*j`将列表更改为 2*2，我*认为*它的工作方式完全相同，则会导致 stackoverflow 错误。

我显然在这里遗漏了一些基本的东西，并且真的可以像我五岁时那样向我解释这一点。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-24T07:11:19.517

我不确定寻求程序/命令式解释是在这里获得理解的最佳方式。流来自函数式编程，最好从这个角度理解它们。您给出的定义的关键方面是：

1.  它*很懒*。除了流中的第一个元素之外，在您请求之前不会计算任何内容。如果你从不要求第五个素数，它就永远不会被计算出来。

2.  它是*递归*的。素数列表是根据自身定义的。

3.  它是*无限*的。流有一个有趣的特性（因为它们是惰性的），它们可以表示具有无限数量元素的序列。`Stream.from(3)`就是一个例子：它表示列表 [3, 4, 5, ...]。

让我们看看我们是否能理解为什么您的定义会计算素数序列。

定义以`2 #:: ...`. 这只是说序列中的第一个数字是 2 - 到目前为止足够简单。

下一部分定义了其余的素数。我们可以从所有从 3 ( `Stream.from(3)`) 开始的计数开始，但显然我们需要过滤掉一堆这些数字（即所有的复合数字）。所以让我们考虑每个数字`i`。如果`i`不是较小素数的倍数，`i`则为素数。也就是说，如果对于所有小于`i`的素数，则为素数 。在 Scala 中，我们可以将其表示为`k``i``i % k > 0`

```
nums.filter(i => ps.takeWhile(k => k < i).forall(k => i % k > 0)) 
```

但是，实际上并不需要检查所有较小的素数——我们实际上只需要检查平方小于或等于的素数`i`（这是数论中的事实`*`）。所以我们可以改为写

```
nums.filter(i => ps.takeWhile(k => k * k <= i).forall(k => i % k > 0)) 
```

所以我们得出了你的定义。

现在，如果您碰巧尝试了第一个定义（带有`k < i`），您会发现它不起作用。为什么不？这与这是一个递归定义这一事实有关。

假设我们试图确定序列中 2 之后的内容。定义告诉我们首先确定 3 是否属于。为此，我们考虑到第一个大于或等于 3 ( `takeWhile(k => k < i)`) 的素数列表。第一个素数是 2，小于 3——到目前为止还不错。但是我们还不知道第二个素数，所以我们需要计算它。好吧，所以我们需要先看看 3 是否属于... BOOM！

`*` *很容易看出，如果一个数`n`是合数，那么它的一个因数的平方必须小于或等于`n`。如果`n`是复合的，那么根据定义`n == a * b`，哪里`1 < a <= b < n`（我们可以`a <= b`通过适当地标记这两个因素来保证）。从`a <= b`它遵循那个`a^2 <= a * b`，所以它遵循那个`a^2 <= n`。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T02:32:27.237

你的解释大多是正确的，你只犯了两个错误：

`takeWhile`不包括最后检查的元素：

```
scala> List(1,2,3).takeWhile(_<2)
res1: List[Int] = List(1) 
```

您假设它`ps`总是只包含一个二和一个三，但是因为`Stream`它是懒惰的，所以可以向它添加新元素。事实上，每次发现一个新的素数时，它都会被添加到下一步中，`ps`并且在下一步`takeWhile`中将考虑这个新添加的元素。在这里，重要的是要记住 a 的尾部`Stream`仅在需要时才计算，因此在评估为 true`takeWhile`之前看不到它。`forall`

记住这两件事，你应该想出这个：

```
ps = [2]
i = 3
  takeWhile
    2*2 <= 3 -> false
  forall on []
    -> true
ps = [2,3]
i = 4
  takeWhile
    2*2 <= 4 -> true
    3*3 <= 4 -> false
  forall on [2]
    4%2 > 0 -> false
ps = [2,3]
i = 5
  takeWhile
    2*2 <= 5 -> true
    3*3 <= 5 -> false
  forall on [2]
    5%2 > 0 -> true
ps = [2,3,5]
i = 6
... 
```

虽然这些步骤描述了代码的行为，但它并不完全正确，因为不仅向其中添加元素`Stream`是惰性的，而且对它的每个操作都是惰性的。这意味着，当您调用`xs.takeWhile(f)`所有值时，直到`f`为 false 的点才会立即计算 - 它们是在`forall`想要查看它们时计算的（因为它是这里唯一需要查看所有元素的函数，然后才能确定为 true , 为 false 它可以提前中止）。这里是在任何地方都考虑惰性时的计算顺序（仅查看 9 的示例）：

```
ps = [2,3,5,7]
i = 9
  takeWhile on 2
    2*2 <= 9 -> true
  forall on 2
    9%2 > 0 -> true
  takeWhile on 3
    3*3 <= 9 -> true
  forall on 3
    9%3 > 0 -> false
ps = [2,3,5,7]
i = 10
... 
```

因为`forall`当它评估为假时被中止，`takeWhile`不计算剩余的可能元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T10:00:26.467

该代码更容易（至少对我来说）阅读一些变量，*暗示性*地重命名，如

```
lazy val ps: Stream[Int] = 2 #:: Stream.from(3).filter(i =>
   ps.takeWhile{p => p * p <= i}.forall{ p => i % p > 0}); 
```

这很自然地*从左到右*读取，因为

> *素数*是*2*`i` ，并且从*3*开始的那些数字，即平方不超过 的所有*素**数* ，*不*均分（即没有一些非零余数）。`p``i`*`i`*

 *以真正的递归方式，为了将这个定义理解为定义不断增加的素数流，我们*假设*它*是*这样的，并且从这个假设中我们看到没有出现矛盾，即定义的真实性成立。

之后唯一的潜在问题`ps` *是在定义*流时访问流的时间。作为第一步，想象我们只是从某个地方神奇地提供了另一个素数流。然后，在看到定义的真实性之后，检查访问的时机是否正确，即我们从不尝试访问`ps`未定义的区域；这会使定义停滞不前，*毫无成效*。

我记得在某个地方（不记得在哪里）读过类似下面的东西——一个学生和一个巫师之间的对话，

*   *学生：*哪些数是质数？
*   *巫师：*嗯，你知道第一个质数是多少吗？
*   *s：*是的，它是*2*。
*   *w：*好的（很快在一张纸上写下*2 ）。*那么下一个呢？
*   *s：*嗯，下一个候选人是*3*。我们需要检查它是否被任何平方不超过它的素数除，但*我还不知道素数是什么！*
*   *w：*别担心，我给你。这是我知道的魔法；毕竟我是个巫师。
*   *s：*好的，那么第一个质数是多少？
*   *w：（*瞥了一眼纸）*2*。
*   *s：*太好了，所以它的平方已经大于3了……*嘿，你作弊了！*......

* * *

这是您的代码的伪代码¹翻译，部分*从右到左*读取，为清楚起见再次重命名了一些变量（`p`用于“prime”）：

```
ps = 2 : filter (\i-> all (\p->rem i p > 0) (takeWhile (\p->p^2 <= i) ps)) [3..] 
```

这也是

```
ps = 2 : [i | i <- [3..], and [rem i p > 0 | p <- takeWhile (\p->p^2 <= i) ps]] 
```

使用[list comprehensions](http://en.wikipedia.org/wiki/List_comprehension)在视觉上更明显。`and`检查布尔值列表中的所有条目是否为`True`（读`|`作“for”、`<-`“drawn from”、`,`“such that”和`(\p-> ...)`“ *lambda* of `p`”）。

所以你*看*，`ps` ***是一个 2 的惰性列表***，然后是`i`从一个流中抽取的数字`[3,4,5,...]`，使得对于所有`p`从`ps`这样抽取的数字`p^2 <= i`，确实`i % p > 0`。这实际上是一个*最优的* [试划分](http://en.wikipedia.org/wiki/Trial_division)算法。:)

当然，这里有一个微妙之处：列表`ps`是开放式的。我们使用它是因为它正在“充实”（当然，因为它是懒惰的）。当`p`s 取自 时`ps`，可能会出现超出其末尾的情况，在这种情况下，我们将进行非终止计算（“*黑洞*”）。就这样发生了:)（并且需要 ⁄ 可以在数学上证明）上述定义是不可能的。所以 2 被无条件地放入`ps`，所以它有一些东西开始。

但如果我们尝试“简化”，

```
bad = 2 : [i | i <- [3..], and [rem i p > 0 | p <- takeWhile (\p->p < i) bad]] 
```

它在只产生一个数字 2 后停止工作：当考虑 3 作为候选时，`takeWhile (\p->p < 3) bad`要求`bad`2 之后的下一个数字，但那里还没有更多的数字。它“超越自己”。

这是“固定”的

```
bad = 2 : [i | i <- [3..], and [rem i p > 0 | p <- [2..(i-1)] ]] 
```

但这是一种慢得多的试验划分算法，与*最优*算法相去甚远。

--

¹（实际上是[Haskell](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_Haskell)，那样对我来说更容易:)）*

# jquery - 使用分页一次淡入淡出 2 个项目

> ID：15594228
> 
> 赞同：0
> 
> 时间：2013-03-24T01:41:54.820
> 
> 标签：jquery, html, css

我有 jquery 分页代码工作。我想一次为两个项目添加淡入淡出。

```
<ul class="paging">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
</ul> 
```

这是我的演示。

[http://jsfiddle.net/squidraj/6KRez/2/](http://jsfiddle.net/squidraj/6KRez/2/)

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:56:57.323

您需要将`.fadeIn()`and`.fadeOut()`应用于`<ul class="paging">`而不是`<li>`. 这是因为如果你这样做`$('li').fadeIn()`了，jQuery 会按顺序将*淡入淡出*动画应用到每个元素。如果您要这样做`$('ul').fadeIn()`，那么 jQuery 会将动画*淡入淡出应用于*整个`<ul>`，包括`<li>`元素，在您的情况下，一次只显示 2 个。所以....

而不仅仅是：

```
// show/hide the appropriate regions 
selector.children().hide();
selector.children(".simplePagerPage" + options.currentPage).show(); 
```

你需要这样做：

```
$('ul.paging').fadeOut(400, function() {
     // finished fading out animation
     //hide and show relevant links
     selector.children().hide();
     selector.find(".simplePagerPage" + clickedLink).show();
}).fadeIn(); 
```

见小提琴：http: [//jsfiddle.net/amyamy86/gpmSP/](http://jsfiddle.net/amyamy86/gpmSP/)

# sql - 对 cakePHP 格式的 SQL 查询（无效的 json 结果）

> ID：15594236
> 
> 赞同：0
> 
> 时间：2013-03-24T01:43:14.373
> 
> 标签：sql, postgresql, json, cakephp-model

您好，我有一个 PostgreSQL 查询，我想使用 cakePHP 格式编写

```
SELECT 
  id, 
  title, 
  author, 
  postdate, 
  postcontent, 
  userID 
FROM posts 
WHERE 
  userID = 12 
  AND id IN (SELECT articleID FROM favourites WHERE articlesUserID = 12) 
ORDER BY postdate DESC; 
```

这是我的查询现在在 cakePHP 中的格式：

```
$favouritearticles = $this->Favourite->query('SELECT id, title, author, postdate, postdatecreation, posteditdate, postcontent, "userID" FROM posts WHERE "userID" = '.$userID.'AND id IN (SELECT lngblogarticleid FROM favourites WHERE lngloginuserid = '.$userID.') ORDER BY postdate DESC'); 
```

它正在工作，但如果 echo json_encode 结果如下：

```
echo json_encode($favouritearticles); 
```

我得到一个无效的 json 格式，如下所示：（使用 JSONLint 检查）

```
[
    [
        {
            "id": 2,
            "title": "Prison Or Treatment For the Mentally ill ",
            "author": "mike123",
            "postdate": "March 12, 2013 at 6:46 pm",
            "postdatecreation": "2013-03-12",
            "posteditdate": null,
            "postcontent": "<p><span>The public revulsion over repeated mass shootings has placed mental health in the spotlight. This is both good and bad.<\/span><\/p>",
            "userID": 34
        }
    ]
][

] 
```

所以我想也许我应该使用 cakePHP 格式“使用查找方法”重写我的查询，例如：

```
$favouritearticles = $this->Favourite->find('all',array('conditions'=>array("......... 
```

但是查询非常复杂，我不知道该怎么做。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:51:37.227

JSON 的格式很好，除了末尾有额外的 [ ] 。如果您仍想以 CakePHP 格式重写查询，请使用以下命令：

```
private function getFavouritePostsByUserId($userId) {
    $db = $this->Post->getDataSource();
    $subQuery = $db->buildStatement(
        array(
            'fields' => array('Favourite.articleID'),
            'table' => $db->fullTableName($this->Favourite),
            'alias' => 'Favourite',
            'conditions' => array(
                'Favourite.articlesUserID' => $userId
            ),
        ),
        $this->Favourite
    );
    $subQuery = 'Post.id IN (' . $subQuery . ') ';
    $subQueryExpression = $db->expression($subQuery);
    $conditions = array($subQueryExpression, 'Post.userID' => $userId);
    $fields = array('Post.*');
    $order = 'Post.postdate DESC';
    $this->Post->find('all', compact('conditions', 'fields', 'order'));
} 
```

# php - PHP ForEach 错误

> ID：15594237
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:43:20.447
> 
> 标签：php, mysql, foreach

这是我的代码：

```
<?php
  $query1 = 'SELECT * From Drink';
  $GetName= mysql_query($query1);?>

<?php foreach ($GetName as $GetNames) : ?>
        <?php echo $GetNames['Name']; ?>
        <?php endforeach; ?> 
```

我得到的错误是：

```
Warning: Invalid argument supplied for foreach() in (removed for privacy) on line 16 
```

我已经查看了与此类似的其他问题，但他们并没有完全回答这个问题。我（目前）对寻找不同的方法来做这件事不感兴趣。我已经有另一种方法，但是我是这样教的，我想知道它为什么会失败。

这不是数据库或查询的问题，因为：

```
<?php
  if ($GetName) {
            while($row = mysql_fetch_array($GetName)) {
                $name = $row["Name"];
                echo "$name<br>";
            }
        } 
```

工作得很好。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:47:13.463

原因是从 MySQL 查询返回的是资源。这并没有实现允许 foreach 工作的迭代器接口。

您需要循环并在每次查看新结果集时，您需要调用`mysql_fetch_array($GetName)`直到它返回 false。那是你停下来循环的时候。

绝对没有其他简单的方法

换句话说，你需要使用`while`. 如果你使用像 PDO 这样的扩展，你可以使用类似的东西`fetchALL`

阅读 PDO 和 MySQLi 手册以获取更多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:46:47.107

泰这个

```
foreach ($GetNames as $GetName => $row)
{

     //echo as you like
    echo ... $row['Name'] ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:17:46.013

所以，我让它工作了。问题是我连接到数据库的方式。一旦我切换到 PDO，正如 IOIO MAD 所暗示的那样，它工作得很好。还要感谢 Itay Moav -Malimovka，因为他的建议确实消除了错误。感谢大家的帮助，我很高兴我解决了这个问题。

# php - 我正在尝试使用 jQuery 序列化和 ajax 从 Cordova 应用程序发送数据，但数据似乎没有发送

> ID：15594242
> 
> 赞同：0
> 
> 时间：2013-03-24T01:44:06.703
> 
> 标签：php, mysql, jquery, cordova-2.0.0

我已经编写了代码并添加了所有变量。有人可以指出我正确的方向。我尝试在 PHP 脚本上放置手动值并且它可以工作，所以我知道这不是问题。

任何人？

```
$(document).bind('deviceready', function(){
             $(function() {
               $('form').submit(function(){
                                var postData = $(this).serialize();
                                $.ajax({
                                       type: 'POST',
                                       data: postData,
                                       url: '--------------------/submitdata.php',
                                       success: function(data){
                                       console.log(data);
                                       alert('Got it! Thanks for sharing');
                                       },
                                       error: function() {
                                       console.log(data);
                                       alert('Oops, something went wrong. Please try again');
                                       }
                                       });
                                return false;
                                });
               });
             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:35:47.737

我整理了一下。我从 ajax 响应中读取了错误的变量值，这意味着我实际上正在读取空白数据。

此外，我的 SQL 查询的参数不正确。感谢大家的帮助 ：）

# delphi - 将删除的记录保存到另一个表

> ID：15594243
> 
> 赞同：0
> 
> 时间：2013-03-24T01:44:14.943
> 
> 标签：delphi, delphi-2010, delphi-xe

我正在从一个表中删除记录（基于条件），例如：

```
procedure TForm3.AdvGlowButton1Click(Sender: TObject);
begin
 if MessageDlg('Are you sure???' , mtConfirmation, [mbYes, mbNo], 0) = mrNo then
    Abort else
Case cxRadioGroup1.ItemIndex of
0: begin
with Form1.ABSQuery1 do begin
Form1.ABSQuery1.Close;
Form1.ABSQuery1.SQL.Clear;
Form1.ABSQuery1.SQL.Text :='delete from LOG where status="YES" ';
Form1.ABSQuery1.ExecSQL;
Form1.ABSTable1.Refresh;
end;
end;
End;
end; 
```

但是，我想将这些已删除的记录保存在我为此目的（LOG_ARCHIVE）创建的另一个表中，该表与 LOG 表相同。那么如何将这些已删除的记录保存在那里呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:07:09.647

如果您使用的是支持它的数据库，则可以使用`BEFORE DELETE`触发器。但是，根据对[Absolute Database 文档](http://www.componentace.com/search/?query_string=create%20trigger&x=0&y=0)的搜索，不支持`CREATE TRIGGER`并且`triggers`在同一站点上进行搜索也不会返回任何关于它们的信息。

缺乏触发器支持可能只会让您`INSERT`先执行另一个表，然后再`DELETE`从您的`LOG`表中执行。再次根据[文档](http://www.componentace.com/help/absdb_manual/insertstatement.htm)，查询可以用作 an 的数据源`INSERT`（请参阅链接页面上的第二个示例）。这意味着您可以执行以下操作：

```
ABSQuery1.SQL.Text := 'insert into LOG_ARCHIVE'#13 +
                           '(select * from LOG where status = ''Yes'')';
ABSQuery1.SQL.ExecSQL;
ABSQuery1.Close;

{ 
  No need to use SQL.Clear here. Setting the SQL.Text replaces
  what was there before with new text.
}
ABSQuery1.SQL.Text :='delete from LOG where status=''YES''';
ABSQuery1.ExecSQL; 
```

您确实应该将整个操作包装在[事务](http://www.componentace.com/help/absdb_manual/transactions.htm)中（[此处为 Delphi 示例](http://www.componentace.com/transaction-delphi.htm)），以便万一出现故障，`INSERT`并且`DELETE`可以撤消。（例如，如果`INSERT`将行放入`LOG_ARCHIVE`文件中，但由于`DELETE`某种原因失败，则无法删除插入到存档文件中的行。）可以在执行`INSERT`回滚之前启动事务如果它（或者`DELETE`如果它们都成功则失败或提交。

# yii - 如何使用自创表单在 Yii 中创建验证器

> ID：15594246
> 
> 赞同：0
> 
> 时间：2013-03-24T01:44:41.257
> 
> 标签：yii

我有一些表格，定义了 css 和一些文本字段，让我们使用以下示例

```
<link rel="stylesheet" type="text/css" href="test.css"/>
<form action="/em/call" class="myStyle">
field1:<input text="hello"></input>
<input value="submit" type="submit"/>
</form> 
```

如果 field1 使用 Yii 内置验证器非空，是否可以显示验证错误，如果是，我应该怎么做？

（在 Yii 给出的示例中，似乎使用`CWidget::form`，我不知道如何在我的项目中自定义它，其中定义了 GUI）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:31:51.603

Yii 的验证器是为 Yii 的架构而构建的，因此您总是需要至少一个包含表单数据的模型。在您尝试破解您的方式之前，我建议您重写您的表格。这非常简单，并记录在此处：

[http://www.yiiframework.com/doc/guide/1.1/en/form.overview](http://www.yiiframework.com/doc/guide/1.1/en/form.overview)

# html - 控制选框文本

> ID：15594249
> 
> 赞同：3
> 
> 时间：2013-03-24T01:44:53.183
> 
> 标签：html, css, text, marquee

我在许多网站上看到，当我们将鼠标悬停在它上面时，正在流动的文字会停止，比如在这个网站，[http://www.sofworld.org](http://www.sofworld.org)，它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:47:13.617

只需查看您发布的页面上的 html：

```
<marquee 
  onmouseout="this.setAttribute('scrollamount', 6, 0);" 
  onmouseover="this.setAttribute('scrollamount', 0, 0);"
  scrolldelay="150" scrollamount="6">
    Text
</marquee> 
```

[setAttribute()](http://www.w3schools.com/jsref/met_element_setattribute.asp)方法只是在鼠标悬停时将属性从 6 更改为`scrollamount`0，然后在鼠标悬停时将属性更改回 6。我不确定第三个参数的作用，我只是从您的示例页面复制了 html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:55:21.733

查看该页面的源代码，

```
<marquee 
 onmouseout="this.setAttribute('scrollamount', 6, 0);" 
 onmouseover="this.setAttribute('scrollamount', 0, 0);"
 scrolldelay="150" scrollamount="6">
  Text
</marquee> 
```

# jquery - 表格排序器不排序

> ID：15594251
> 
> 赞同：2
> 
> 时间：2013-03-24T01:45:11.260
> 
> 标签：jquery, tablesorter

很抱歉提出这个愚蠢的问题，但我已经挣扎了几个小时而没有成功。我的示例表没有被排序。这两个 .js 文件都位于与 .shtml 文件本身相同的目录中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<head>
<script type="text/javascript" src="jquery-latest.js"></script>
<script type="text/javascript" src="jquery.tablesorter.js"></script>
<script type="text/javascript">
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
</script>
</head>
<body>
<table id="myTable" class="tablesorter">
   <thead>
     <tr>
     <th>Test1</th>
     <th>Test2</th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td>1</td>
     <td>1622</td>
    </tr>
    <tr>
     <td>2</td>
     <td>2634</td>
    </tr>
   </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T02:05:47.683

也许你有坏的 jquery 和 tablesorter 副本？使用从各自站点链接的 jquery 和 tablesorter 的实际版本对我来说似乎工作正常。

[http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)
[http://mottie.github.com/tablesorter/js/jquery.tablesorter.js](http://mottie.github.com/tablesorter/js/jquery.tablesorter.js)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us">
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript" src="http://mottie.github.com/tablesorter/js/jquery.tablesorter.js"></script>
<script type="text/javascript">
$(document).ready(function() 
    { 
        $("#myTable").tablesorter(); 
    } 
); 
</script>
</head>
<body>
<table id="myTable" class="tablesorter">
   <thead>
     <tr>
     <th>Test1</th>
     <th>Test2</th>
    </tr>
   </thead>
   <tbody>
    <tr>
     <td>1</td>
     <td>1622</td>
    </tr>
    <tr>
     <td>2</td>
     <td>2634</td>
    </tr>
   </tbody>
</table>
</body> 
```

# erlang - Riak Erlang map/reduce 返回 {error,notfound}

> ID：15594252
> 
> 赞同：0
> 
> 时间：2013-03-24T01:45:23.617
> 
> 标签：erlang, mapreduce, riak

我正在运行以下 Riak 地图阶段：

```
-module(delete_map_function).

-export([get_keys/3]).

%Returns bucket and key pairs from a map phase
get_keys(Value,_Keydata,_Arg) ->
  [[riak_object:bucket(Value),riak_object:key(Value)]]. 
```

以及以下 Riak 减少阶段：[http ://contrib.basho.com/delete_keys.html](http://contrib.basho.com/delete_keys.html)

我不断收到此错误消息：

```
{"phase":0,"error":"function_clause","input":"{{error,notfound},{<<\"my_bucket\">>,<<\"item_key\">>},undefined}","type":"error","stack":"[{riak_object,bucket,[{error,notfound}],[{file,\"src/riak_object.erl\"},{line,251}]},{delete_map_function,get_keys,3,[{file,\"delete_map_function.erl\"},{line,7}]},{riak_kv_mrc_map,map,3,[{file,\"src/riak_kv_mrc_map.erl\"},{line,164}]},{riak_kv_mrc_map,process,3,[{file,\"src/riak_kv_mrc_map.erl\"},{line,140}]},{riak_pipe_vnode_worker,process_input,3,[{file,\"src/riak_pipe_vnode_worker.erl\"},{line,444}]},{riak_pipe_vnode_worker,wait_for_input,2,[{file,\"src/riak_pipe_vnode_worker.erl\"},{line,376}]},{gen_fsm,...},...]"} 
```

我正在通过 Java 运行这项工作：

```
MapReduceResult mapReduceResult = RiakUtils.getPBClient().mapReduce(iq)
                 .addMapPhase(new NamedErlangFunction("delete_map_function", "get_keys"))
                 .addReducePhase(new NamedErlangFunction("delete_reduce_function", "delete"))
                 .execute(); 
```

我在某处读到我应该`filter_notfound`在 Map 阶段使用该参数，但即使在添加它之后我仍然会收到错误：

```
MapReduceResult mapReduceResult = RiakUtils.getPBClient().mapReduce(iq)
                 .addMapPhase(new NamedErlangFunction("delete_map_function", "get_keys"), "filter_notfound")
                 .addReducePhase(new NamedErlangFunction("delete_reduce_function", "delete"))
                 .execute(); 
```

我正在运行 Riak 1.3 并使用[Riak Java 客户端](https://github.com/basho/riak-java-client)v1.1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:10:45.387

第一的。我认为通过 map/reduce 阶段删除键不是有效的方法。如果您有键列表并将其提供给映射阶段 riak 将首先读取所有对象，然后将其提供给您的函数。所以如果你只需要删除对象，最好不要读取。

第二。你所有的 map/reduce 函数都应该写成以下例外：

*   而不是，由于 riak 的最终性质`Value`，您可以获得。`{error, notfound}`
*   您也可以将已删除的 riak 对象作为`Value`. 您可以知道该对象已被特殊标志删除`dict:is_key(<<"X-Riak-Deleted">>, riak_object:get_metadata(RiakObj))`：

第三。要修复您的错误，您应该从列表中过滤 notfound 键：

```
get_keys({error, notfound},_Keydata,_Arg) ->
    [];
get_keys(Value,_Keydata,_Arg) ->
    [[riak_object:bucket(Value),riak_object:key(Value)]]. 
```

# wolfram-mathematica - Wolfram Matematica：用表设置 NIntegral 的域

> ID：15594253
> 
> 赞同：1
> 
> 时间：2013-03-24T01:45:59.363
> 
> 标签：wolfram-mathematica, range, multidimensional-array, integral, wolframalpha

我想在 Wolfram Mathematica 中以 n 维执行 NIntegrate，例如制作 9 维函数的 NIntegrate：

`p=Product[(1+x[i])^((-1)^i),{i,0,9}]`

所以我想用一个表来设置范围：

`t=Table[ {x[i], 1,2}, {i,0,9}]`

不幸的是命令 `NIntegrate[p,t]`

返回错误：

`NIntegrate::vars: Integration range specification t is not of the form {x, xmin, ..., xmax}.`

我已经测试了一些命令，如“Extract”、“Part”等，但没有任何效果。有人可以像我一样帮助一个小伙子吗？！

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:40:43.170

你快到了。需要对积分限制进行一些进一步的操作：

```
p = Product[(1 + x[i])^((-1)^i), {i, 0, 9}]
t = Table[{x[i], 1, 2}, {i, 0, 9}]

Integrate[p, Evaluate[Sequence @@ t]]
(*
3125/32 Log[3/2]^5
*) 
```

# xcode - Xcode 4 + OpenCL：寻找“Hello World”示例，该示例使用以单独文件编写的内核

> ID：15594259
> 
> 赞同：1
> 
> 时间：2013-03-24T01:46:56.773
> 
> 标签：xcode, opencl

我有兴趣在单独的文件中编写 OpenCL 内核，因为它比编写多行字符串的代码更方便！Apple 的网站有一个 OpenCL 的 Hello World 示例，但它使用较旧的 Xcode 3 编写内核的方式，[http://developer.apple.com/library/mac/#samplecode/OpenCL_Hello_World_Example/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/OpenCL_Hello_World_Example/Introduction/Intro.html)

我正在寻找的是一个 Hello World 类型的示例，它使用新的 Xcode 4 做事方式，即内核写在单独的文件中，调用内核函数似乎需要更少的代码。

**更新**

我找不到模板项目，所以我在 github 上启动了以下项目，它复制了[Apple 文档](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/XCodeHelloWorld/XCodeHelloWorld.html#//apple_ref/doc/uid/TP40008312-CH10-SW2)中的代码，

*   [Xcode 4 OpenCL 示例项目](https://github.com/danieljfarrell/Xcode-4-OpenCL-Example)

顺便说一句，代码最初由于未知原因没有运行并给出以下错误，

> 使用 GeForce GT 650M 创建了一个调度队列错误：元素 1 与预期输出不匹配。看到 0.0000，预期 1.0000

重新启动似乎可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:54:20.247

他们在[这里](https://developer.apple.com/library/mac/#documentation/Performance/Conceptual/OpenCL_MacProgGuide/XCodeHelloWorld/XCodeHelloWorld.html#//apple_ref/doc/uid/TP40008312-CH10-SW2)有一个 10.7+ 的例子：

> 借助 Xcode 内置的支持，在**OS X v10.7**中创建 OpenCL 程序很容易。本章分步描述了如何在 Xcode 中创建 OpenCL 项目。如果你已经有一个工作的 OpenCL 项目，你不需要重新生成它，但是你可以在本章中找到关于现在内置在 Xcode 中的 OpenCL 支持的信息。

但是，它们只描述了步骤，并没有提供完整的项目。

# networking - Poisoned Reverse - 大小大于 2 的循环

> ID：15594263
> 
> 赞同：1
> 
> 时间：2013-03-24T01:47:28.607
> 
> 标签：networking, loops, routing, reverse

据说毒反向可以防止路由环路，但只能防止大小为2的路由环路。为什么它不能阻止更大尺寸的路由环路？换句话说，即使是有毒的反向，循环仍然可能发生吗？我已经尝试在网上查找它，但我还没有找到一个例子。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-10T03:23:36.683

```
A ¯¯\
|    C———D
B __/ 
```

在上图中（我现在什至无法上传我的 3 点声誉的图像）。现在 CD 失败了，假设从 B 到 D 的原始最优路径是 BACD，这意味着 B 将从 B 的角度向 C 通告这条最优路径。

在这种情况下，即使有毒性反转，C 也可以选择 B 作为 D 的下一跳。再次形成循环。

我也试图在网上搜索一个例子......所以我找到了你的帖子:)，但我终于在以下链接中找到了一个例子：

[http://www.mpi-sws.org/~gummadi/teaching/sp07/datanets/homework/homework2solution.pdf](http://www.mpi-sws.org/~gummadi/teaching/sp07/datanets/homework/homework2solution.pdf)

# windows - DirectX / Windows：强制关闭应用程序时无法专注于任务管理器

> ID：15594264
> 
> 赞同：0
> 
> 时间：2013-03-24T01:47:29.953
> 
> 标签：windows, directx, directinput

这个问题可能表明对 Windows 中的 DirectX 编程存在根本性的误解，但我遇到了一些我无法弄清楚的问题。我的程序在全屏运行时，有时会处于奇怪的状态，我必须强制关闭应用程序（CTRL+ALT+DEL）。

问题是当我按CTRL+ALT+DEL时，会出现任务管理器，但我不能使用鼠标；键盘一开始可以工作，但如果我用鼠标单击任务管理器窗口，它会失去焦点，我无法再重新获得焦点。该应用程序也不会最小化自身（Windows 应用程序编程问题？）

我的应用程序是否有可能窃取鼠标的专有财产？我正在使用 DirectInput，但应用程序根本不处理鼠标输入。此外，此问题仅在全屏运行应用程序时发生。如果我在窗口中运行它，一切都很好。

如果重要的话，我使用的工具是 MS Visual Studio 12、Windows 8 和 DirectX 9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T05:20:32.810

对此的解决方案是取消获取所有输入设备并在应用程序失去焦点时停止渲染例程。我只是将应用程序设置为跟踪它是否具有焦点，并在 Windows 消息泵中适当地调整值以获取适当的消息。具体来说，当我收到以下消息时，我将焦点设置为“关闭”：

`WM_SIZE`(当`wParam`= `SIZE_MINIMIZED`), `WM_KILLFOCUS`, `WM_ENTERSIZEMOVE`, 和`WM_ENTERMENULOOP`

我重新关注以下消息：

`WM_SIZE`（所有其他情况）`WM_SETFOCUS`，，，，设置为真`WM_EXITSIZEMOVE`，`WM_ACTIVATEAPP`和`wParam``WM_EXITMENULOOP`

`WM_KILLFOCUS`足以解决应用程序中 ALT-CTRL-DELETE-ing 的问题。

# xml - 属性 noNamespaceSchemaLocation 对 XML 解析有什么影响？

> ID：15594267
> 
> 赞同：12
> 
> 时间：2013-03-24T01:47:38.980
> 
> 标签：xml

根据定义：

> noNamespaceSchemaLocation 属性引用没有目标命名空间的 XML 模式文档。

这个属性将如何改变解析的结果？

例如，以这个 XML 为例：

```
<?xml version="1.0"?>
<name
  xmlns="http://www.example.com/name"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.example.com/name schema/schema.xsd"
  title="Mr.">
   <first>John</first>
   <middle>M</middle>
   <last>Doe</last>
</name> 
```

参考此架构：

```
<?xml version="1.0"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema"
xmlns:target="http://www.example.com/name"
targetNamespace="http://www.example.com/name" elementFormDefault="qualified">
  <element name="name">
    <complexType>
      <sequence>
        <element name="first" type="string"/>
        <element name="middle" type="string"/>
        <element name="last" type="string"/>
      </sequence>
      <attribute name="title" type="string"/>
    </complexType>
  </element>
</schema> 
```

我从架构中删除了这些命名空间声明：

```
xmlns:target="http://www.example.com/name" 
targetNamespace="http://www.example.com/name" 
```

即使没有在引用 XML 中使用 noNamespaceSchemaLocation 属性，也不会引发错误。为什么我们首先需要这个属性？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T09:52:27.203

该属性对 XML 解析器没有影响。如果设置了适当的选项，它*可能会*影响 XML 模式处理器的行为；它*可能*同样影响结合了 XML 解析和 XML 模式验证功能的程序的行为。它告诉模式处理器在哪里寻找描述文档的模式。

但即使使用模式处理器，该`noNamespaceSchemaLocation`属性也不会影响像您这样的元素都在命名空间中的文档的验证。

# sql - 匹配postgresql中的部分实现

> ID：15594275
> 
> 赞同：0
> 
> 时间：2013-03-24T01:48:23.873
> 
> 标签：sql, postgresql, triggers, null, plpgsql

我必须为postgresql中的匹配部分问题带来解决方案。这就是我所做的..

```
DROP TRIGGER IF EXISTS match_partial on futbolista;

DROP FUNCTION IF EXISTS match_partial();

CREATE FUNCTION match_partial()
RETURNS TRIGGER AS $$
DECLARE
tmp club%ROWTYPE;
BEGIN
IF (NEW.id_club = NULL AND NEW.nom_club = NULL) THEN
    RETURN NEW;
ELSE
    SELECT * INTO tmp FROM club WHERE (club.id_club = NEW.id_club AND club.nom_club = NEW.nom_club);
    IF FOUND THEN
        RETURN NEW;
    ELSE
        IF (NEW.id_club = NULL) THEN
            SELECT * INTO tmp FROM club WHERE (club.nom_club = NEW.nom_club);
            IF FOUND THEN
                RETURN NEW;
            END IF;
        ELSE
            IF (NEW.nom_club = NULL) THEN
                SELECT * INTO tmp FROM club WHERE (club.id_club = NEW.id_club);
                IF FOUND THEN
                    RETURN NEW;
                END IF;
            END IF;
        END IF;
    END IF;     
END IF;
RETURN NULL;
END; $$
LANGUAGE plpgsql;

CREATE TRIGGER match_partial BEFORE INSERT OR UPDATE ON futbolista
FOR EACH ROW EXECUTE PROCEDURE match_partial(); 
```

桌子是这样的..

```
-- creacion de la tabla club

DROP TABLE IF EXISTS club CASCADE;

CREATE TABLE club (
id_club NUMERIC(10, 0) NOT NULL,
nom_club VARCHAR(50) NOT NULL,
ciudad VARCHAR(50) NOT NULL,
pais VARCHAR(50) NOT NULL
);

-- creacion de la tabla futbolista

DROP TABLE IF EXISTS futbolista CASCADE;

CREATE TABLE futbolista (
dni NUMERIC(8, 0) NOT NULL,
nombre VARCHAR(50) NOT NULL,
apellido VARCHAR(50) NOT NULL,
id_club NUMERIC(10, 0) DEFAULT 0,
nom_club VARCHAR(50) DEFAULT 'JUGADOR LIBRE'
);

-- se agregan las claves primarias

ALTER TABLE club ADD CONSTRAINT pk_club PRIMARY KEY (id_club, nom_club);

ALTER TABLE futbolista ADD CONSTRAINT pk_futbolista PRIMARY KEY (dni); 
```

问题是，当我将一些值插入“futbolista”时，例如：

```
(10, 'diego', 'maradona', null, null) 
```

什么都没发生……你能帮帮我吗？谢谢！

ps：对不起我的英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:04:39.530

快速浏览一下，我看到了几个例子：

```
IF NEW.id_club = NULL ... 
```

可能还有更多问题，我不再看那里了。
没有什么是***一样***的`NULL`。改用：

```
IF NEW.id_club **IS** NULL ...
```

`NULL`在继续编写复杂的触发器之前，请确保您了解值的性质。先说基础。[从这里的手册开始](http://www.postgresql.org/docs/current/interactive/functions-comparison.html)。

# php - 文件目录和删除文件php？

> ID：15594277
> 
> 赞同：0
> 
> 时间：2013-03-24T01:48:28.567
> 
> 标签：php, directory

我正在尝试创建 php 脚本来扫描目录并删除该目录中的文件。我的扫描文件扩展名有问题，无法正常工作

```
<?php 
 if ($handle = opendir(''))
 {
    echo " Directory handle: $handle \n";
    echo "Entries: \n";

    while (false !== ($entry = readdir($handle))) 
    {
        echo" $entry :\n";
        $file_parts = pathinfo($entry);

        switch ($file_parts['extension']) 
        {
            case 'dmg':
                echo "dmg";
                break;

            default:
                echo "no file";
                break;

        }

    }

    closedir($handle);

}

?> 
```

注意：未定义的索引：第 13 行 /Applications/MAMP/htdocs/dir.php 中的扩展名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:08:10.857

例如，如果路径没有扩展名或发生某些错误，则会导致此错误。

如果您想检索文件的文件类型，那么当您可以这样做时，这似乎是一种迂回的方式

```
switch(filetype($dir.$file)){
      case 'dmg' ://And so on
} 
```

这里`$dir`将是`/Users/username/Downloads`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:08:16.530

未定义索引意味着它不存在于数组中。

来自文档：

> 如果未传递 options 参数，则返回包含以下元素的关联数组：目录名、基本名、扩展名（如果有）和文件名。

你的文件有扩展名吗？

另外，输入“。” （点）在你的`dir`而不是空白处。

您可以使用`var_dump( $file_parts );`它来查看它是什么。

# clojure - Clojure 中 #^{...} 和 ^{...} 元数据之间的区别？

> ID：15594278
> 
> 赞同：4
> 
> 时间：2013-03-24T01:48:54.647
> 
> 标签：clojure

考虑

```
(defn f ^{:foo "bar"} [x] (* x x)) 
```

和

```
(defn g #^{:foo "bar"} [x] (* x x)) 
```

既编译又运行。

我有两个问题：首先，为什么只做`(meta f)`和`(meta g)`生产`nil`？我原以为他们会生产`{:foo "bar"}`；iow，我是不是完全在元数据上吃午饭，并且我在那里定义了某种垃圾？

其次，元数据的两种语法有什么区别？看起来第二个是“[标记文字](http://clojure.org/reader)”，与[edn（扩展数据表示法](https://github.com/edn-format/edn)）有关，但如果没有更多上下文或示例，我无法完全理解它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T02:12:06.547

元`#^`数据阅读器宏在 clojure 1.2 中[被替换为。](https://github.com/clojure/clojure/blob/1.2.x/changes.txt#L89) `^`虽然目前两者之间没有区别，但旧形式已被弃用，您应该`^`独占使用。

元数据文字应该出现在要附加到的项目*之前：*

```
(defn ^{:foo "bar"} f [x] (* x x)) 
```

要记住的另一件事是，上述定义中的元数据没有附加到函数，它附加到`var`引用函数的那个​​。您可以通过以下方式获取元数据`f` `var`：

```
(meta (var f)) 
```

或使用`var`阅读器宏：

```
(meta #'f) 
```

# storage - Roundcube 问题：与存储服务器的连接失败

> ID：15594281
> 
> 赞同：14
> 
> 时间：2013-03-24T01:50:01.683
> 
> 标签：storage, roundcube

我在 Roundcube 中收到此错误（“连接到存储服务器失败”）行。我已经检查了所有内容、配置和数据库用户名密码，服务器详细信息都是干净的。谁能告诉我可能是什么问题？在这里，我给出了整个配置文件。

```
 <?php

        $rcmail_config = array();
        $rcmail_config['debug_level'] = 9;

        $rcmail_config['log_driver'] = 'file';
        $rcmail_config['log_date_format'] = 'd-M-Y H:i:s O';

        $rcmail_config['syslog_id'] = 'roundcube';

        $rcmail_config['syslog_facility'] = LOG_USER;

        $rcmail_config['smtp_log'] = true;

        $rcmail_config['log_logins'] = false;

        $rcmail_config['log_session'] = false;

        $rcmail_config['sql_debug'] = false;

        $rcmail_config['imap_debug'] = false;

        $rcmail_config['ldap_debug'] = false;

        $rcmail_config['smtp_debug'] = false;

        $rcmail_config['default_port'] = 143;

        $rcmail_config['imap_auth_type'] = NULL;

        $rcmail_config['imap_delimiter'] = NULL;

        $rcmail_config['imap_ns_personal'] = NULL;
        $rcmail_config['imap_ns_other'] = NULL;
        $rcmail_config['imap_ns_shared'] = NULL;

        $rcmail_config['imap_force_caps'] = false;

        $rcmail_config['imap_force_lsub'] = false;

        $rcmail_config['imap_force_ns'] = false;

        $rcmail_config['imap_timeout'] = 0;

        $rcmail_config['imap_auth_cid'] = NULL;

        $rcmail_config['imap_auth_pw'] = NULL;

        $rcmail_config['imap_cache'] = NULL;

        $rcmail_config['messages_cache'] = false;

        $rcmail_config['smtp_server'] = '';
        $rcmail_config['smtp_port'] = 25;
        $rcmail_config['smtp_user'] = '%u';
        $rcmail_config['smtp_pass'] = '%p';

        $rcmail_config['smtp_auth_type'] = '';
        $rcmail_config['smtp_auth_cid'] = NULL;
        $rcmail_config['smtp_auth_pw'] = NULL;

        $rcmail_config['smtp_helo_host'] = '';

        $rcmail_config['smtp_timeout'] = 0;
        $rcmail_config['enable_installer'] = true;

        $rcmail_config['support_url'] = 'http://poolavadi.com/';

        $rcmail_config['skin_logo'] = '';

        $rcmail_config['auto_create_user'] = true;

        $rcmail_config['log_dir'] = 'logs/';

        $rcmail_config['temp_dir'] = 'temp/';

        $rcmail_config['message_cache_lifetime'] = '10d';

        $rcmail_config['force_https'] = false;

        $rcmail_config['use_https'] = false;

        $rcmail_config['login_autocomplete'] = 0;

        $rcmail_config['login_lc'] = 0;

        $rcmail_config['skin_include_php'] = false;

        $rcmail_config['display_version'] = false;

        $rcmail_config['session_lifetime'] = 10;

        $rcmail_config['session_domain'] = '';

        $rcmail_config['session_name'] = NULL;

        $rcmail_config['session_storage'] = 'db';

        $rcmail_config['memcache_hosts'] = NULL; 
        $rcmail_config['ip_check'] = true;

        $rcmail_config['referer_check'] = false;

        $rcmail_config['x_frame_options'] = 'sameorigin';

        $rcmail_config['des_key'] = 'nSfL_Rz6tc5NRMqKpw7d&A9=';

        $rcmail_config['username_domain'] = 'poolavadi.com';
        $rcmail_config['mail_domain'] = '';

        $rcmail_config['password_charset'] = 'ISO-8859-1';

        $rcmail_config['sendmail_delay'] = 0;

        $rcmail_config['max_recipients'] = 0; 

        $rcmail_config['max_group_members'] = 0; 

        $rcmail_config['useragent'] = 'Roundcube Webmail/RCMAIL_VERSION';

        $rcmail_config['product_name'] = 'பூளவாடி மின்னஞ்சல்';

        $rcmail_config['include_host_config'] = false;

        $rcmail_config['generic_message_footer'] = '';

        $rcmail_config['generic_message_footer_html'] = '';

        $rcmail_config['http_received_header'] = false;

        $rcmail_config['http_received_header_encrypt'] = false;

        $rcmail_config['mail_header_delimiter'] = NULL;

        $rcmail_config['line_length'] = 72;

        $rcmail_config['send_format_flowed'] = true;

        $rcmail_config['dont_override'] = array();

        $rcmail_config['identities_level'] = 0;

        $rcmail_config['client_mimetypes'] = NULL;  # null == default

        $rcmail_config['mime_magic'] = NULL;

        $rcmail_config['im_identify_path'] = NULL;

        $rcmail_config['im_convert_path'] = NULL;

        $rcmail_config['contact_photo_size'] = 160;

        $rcmail_config['email_dns_check'] = false;

        $rcmail_config['plugins'] = array();

        $rcmail_config['message_sort_col'] = '';

        $rcmail_config['message_sort_order'] = 'DESC';

        $rcmail_config['list_cols'] = array('subject', 'status', 'fromto', 'date', 'size', 'flag', 'attachment');

        $rcmail_config['language'] = 'en_us';

        $rcmail_config['date_format'] = 'Y-m-d';

        $rcmail_config['date_formats'] = array('Y-m-d', 'd-m-Y', 'Y/m/d', 'm/d/Y', 'd/m/Y', 'd.m.Y', 'j.n.Y');

        $rcmail_config['time_format'] = 'H:i';

        $rcmail_config['time_formats'] = array('G:i', 'H:i', 'g:i a', 'h:i A');

        $rcmail_config['date_short'] = 'D H:i';

        $rcmail_config['date_long'] = 'Y-m-d H:i';

        $rcmail_config['drafts_mbox'] = 'Drafts';

        $rcmail_config['junk_mbox'] = 'Junk';

        $rcmail_config['sent_mbox'] = 'Sent';

        $rcmail_config['trash_mbox'] = 'Trash';

        $rcmail_config['default_folders'] = array('INBOX', 'Drafts', 'Sent', 'Junk', 'Trash');

        $rcmail_config['create_default_folders'] = false;

        $rcmail_config['protect_default_folders'] = true;

        $rcmail_config['quota_zero_as_unlimited'] = false;

        $rcmail_config['enable_spellcheck'] = true;

        $rcmail_config['spellcheck_dictionary'] = false;

        $rcmail_config['spellcheck_engine'] = 'pspell';

        $rcmail_config['spellcheck_uri'] = '';

        $rcmail_config['spellcheck_languages'] = NULL;

        $rcmail_config['spellcheck_ignore_caps'] = false;

        $rcmail_config['spellcheck_ignore_nums'] = false;

        $rcmail_config['spellcheck_ignore_syms'] = false;

        $rcmail_config['recipients_separator'] = ',';

        $rcmail_config['max_pagesize'] = 200;

        $rcmail_config['min_keep_alive'] = 60;

        $rcmail_config['upload_progress'] = false;

        $rcmail_config['undo_timeout'] = 0;
        $rcmail_config['address_book_type'] = 'sql';
        $rcmail_config['ldap_public'] = array();

        $rcmail_config['autocomplete_addressbooks'] = array('sql');
        $rcmail_config['autocomplete_min_length'] = 1;

        $rcmail_config['autocomplete_threads'] = 0;

        $rcmail_config['autocomplete_max'] = 15;

        $rcmail_config['address_template'] = '{street}<br/>{locality} {zipcode}<br/>{country} {region}';

        $rcmail_config['addressbook_search_mode'] = 0;

        $rcmail_config['default_charset'] = 'ISO-8859-1';

        $rcmail_config['skin'] = 'larry';

        $rcmail_config['mail_pagesize'] = 50;

        $rcmail_config['addressbook_pagesize'] = 50;

        $rcmail_config['addressbook_sort_col'] = 'surname';

        $rcmail_config['addressbook_name_listing'] = 0;

        $rcmail_config['timezone'] = 'auto';

        $rcmail_config['prefer_html'] = true;

        $rcmail_config['show_images'] = 0;

        $rcmail_config['htmleditor'] = 0;

        $rcmail_config['prettydate'] = true;

        $rcmail_config['draft_autosave'] = 300;

        $rcmail_config['preview_pane'] = false;

        $rcmail_config['preview_pane_mark_read'] = 0;

        $rcmail_config['logout_purge'] = false;

        $rcmail_config['logout_expunge'] = false;

        $rcmail_config['inline_images'] = true;

        $rcmail_config['mime_param_folding'] = 0;

        $rcmail_config['skip_deleted'] = false;

        $rcmail_config['read_when_deleted'] = true;

        $rcmail_config['flag_for_deletion'] = false;

        $rcmail_config['keep_alive'] = 60;

        $rcmail_config['check_all_folders'] = false;

        $rcmail_config['display_next'] = false;

        $rcmail_config['autoexpand_threads'] = 0;

        $rcmail_config['top_posting'] = false;

        $rcmail_config['strip_existing_sig'] = true;

        $rcmail_config['show_sig'] = 1;

        $rcmail_config['sig_above'] = false;

        $rcmail_config['force_7bit'] = false;

        $rcmail_config['search_mods'] = NULL;  

        $rcmail_config['addressbook_search_mods'] = NULL;  

        $rcmail_config['delete_always'] = false;

        $rcmail_config['delete_junk'] = false;

        $rcmail_config['mdn_requests'] = 0;

        $rcmail_config['mdn_default'] = 0;

        $rcmail_config['dsn_default'] = 0;

        $rcmail_config['reply_same_folder'] = false;

        $rcmail_config['forward_attachment'] = false;

        $rcmail_config['default_addressbook'] = NULL;

        $rcmail_config['spellcheck_before_send'] = false;

        $rcmail_config['autocomplete_single'] = false;

        $rcmail_config['default_font'] = ''; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-05-21T00:52:37.473

这意味着鸽舍没有运行。

跑`sudo dovecot`

这是我在沮丧中花费数小时后得到的解决方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-07T00:19:25.890

Try turning all the debugging options on and talk to the IMAP server directly without involving RoundCube, see [this guide](http://www.anta.net/misc/telnet-troubleshooting/imap.shtml). That way you can be sure that your IMAP server is working before trying to get RoundCube working.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-03-03T14:34:27.987

通过运行编辑 15-mailboxes.conf

```
nano /etc/dovecot/conf.d/15-mailboxes.conf 
```

在命名空间收件箱 {} 块内添加以下文本：

```
namespace inbox {
    inbox = yes
... 
```

保存文件并运行：

```
service dovecot restart 
```

你完成了..！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-10T16:39:57.623

一种可能的原因是您的 Dovecot 安装不工作。更改mysql版本后发生在我身上。我必须做：

```
sudo apt-get install dovecot-mysql
sudo service dovecot restart 
```

然后它起作用了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-30T21:37:33.467

我可以通过参考**Dovecot Status**来解决这个问题。

首先，确保您不使用隐身浏览器窗口，然后通过运行此命令检查 Dovecot 状态

```
service dovecot status 
```

它会告诉你：

```
 ● dovecot.service - Dovecot IMAP/POP3 email server
   Loaded: loaded (/lib/systemd/system/dovecot.service; enabled; vendor preset: enabled)
   Active: **inactive** (dead) since Mon 2020-03-30 21:03:32 UTC; 29min ago
     Docs: man:dovecot(1)
           http://wiki2.dovecot.org/
 Main PID: 910 (code=exited, status=0/SUCCESS) 
```

然后运行`service dovecot start`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-24T13:11:54.670

一些 Devcot 配置文件已损坏。所以你需要通过重新创建新的配置文件并删除现有的来修复。通过putty软件SSH登录root

执行这些代码

```
cd /home
/etc/init.d/dovecot stop
rm -f */imap/*/*/Maildir/dovecot*
rm -f */imap/*/*/Maildir/.*/dovecot*
rm -f */Maildir/dovecot*
rm -f */Maildir/.*/dovecot*
/etc/init.d/dovecot restart 
```

现在您可以登录到您的网络邮件应用程序。不会出现错误。

[资源](http://help.directadmin.com/item.php?id=473)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-11T17:48:38.447

从 Debian Jessie 升级到 Stretch 时，我遇到了这个问题。我查看了日志：

```
/var/log/syslog 
```

发现问题是我`SSLv2`明确禁用协议，不再支持它。我从协议列表中删除了它，一切正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-05T19:59:37.380

删除以下文件并登录。

```
/etc/dovecot/conf.d/15-mailboxes.conf 
```

或使用

```
sudo rm -rf nano /etc/dovecot/conf.d/15-mailboxes.conf 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-21T09:59:48.000

**成功安装圆形立方体**后，我最近遇到了同样的问题

 **首先我尝试了这两个命令行：

```
netstat -tulpn | grep :143

telnet localhost 143 
```

我收到**连接被拒绝**的错误消息。

所以我必须安装`telnet`

```
apt-get install telnetd 
```

安装成功后运行Restarts

```
/etc/init.d/openbsd-inetd restart

/etc/init.d/dovecot restart 
```

然后再次运行

```
 netstat -tulpn | grep :143 
```

结果

```
tcp        0      0 0.0.0.0:143             0.0.0.0:*               LISTEN      13439/dovecot
tcp6       0      0 :::143                  :::*                    LISTEN      13439/dovecot 
```

尝试第二次试运行

```
telnet localhost 143 
```

结果

```
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
 * OK [CAPABILITY IMAP4rev1 LITERAL+ SASL-IR LOGIN-REFERRALS ID ENABLE IDLE START TLS AUTH=PLAIN AUTH=LOGIN] Dovecot (Ubuntu) ready. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-01T08:58:45.160

我遇到了同样的问题，我通过以下方式找到了解决方案。

我通过以下命令检查了日志。

```
tail /var/log/dovecot.log 
```

通过使用上面的命令，我在日志中发现了以下错误。

> 9 月 1 日 10:39:50 imap（mail@yourdomain.com）：错误：用户 mail@yourdomain.com：初始化失败：从 mail_location 设置初始化邮件存储失败：mkdir（/var/vmail/yourdomain.com/mail）失败: 权限被拒绝 (euid=101(vmail) egid=12(mail) missing +w perm: /var/vmail, dir 由 4325:4319 mode=0751 拥有)

所以我注意到服务器无法创建名为“yourdomain.com”的目录，它需要“+w”权限。我还注意到“yourdomain.com”目录需要所有权“vmail:mail”。

最后，使用以下命令创建了目录。

```
cd /var/vmail/;
mkdir yourdomain.com;
chown vmail:mail yourdomain.com -R;
chmod +w yourdomain.com; 
```

而已。

我希望这个答案可以帮助你。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-10-26T10:55:28.513

**在Ubuntu 20.04**上设置**iRedMail** dockerized 版本时，我遇到了类似的问题。

 **问题是当我使用命令 - 进行检查时，**Dovecot**没有在容器中运行`service dovecot status`。当我尝试使用命令启动服务时 -`service dovecot start`我得到了错误

```
root@mail:/var/spool/postfix# service dovecot start    
 * Starting IMAP/POP3 mail server dovecot
Error: bind(/var/spool/postfix/private/dovecot-auth) failed: No such file or directory
Fatal: Failed to start listeners 
```

我还运行了以下命令来确认我的鸽舍配置是否正常：

```
dovecot -n 
```

是的，命令的输出表明它很好。

**这是我修复它的方法**：

该问题是由于我在使用 - 检查容器的 docker 日志时发现的容器中没有安装/运行**Postfix**`docker logs container-id`引起的。**Dovecot**引用的文件应该`/var/spool/postfix/private/dovecot-auth`是由**Postfix**创建的，但是，由于安装**Postfix的脚本失败，因为在构建****iRedMail**映像时没有选择正确的脚本路径，因此出现了这个问题，因为**Dovecot**找不到文件：**********`/var/spool/postfix/private/dovecot-auth`**********

 ******```
[iRedMail] [Entrypoint] /docker/entrypoints/postfix.sh 
/docker/entrypoints/functions.sh: line 113: /docker/entrypoints/postfix.sh: No such file or directory
[iRedMail] [Entrypoint] /docker/entrypoints/mlmmj.sh 
[iRedMail] [Entrypoint] /docker/entrypoints/mlmmjadmin.sh 
[iRedMail] [Entrypoint] /docker/entrypoints/iredapd.sh 
[iRedMail] [Entrypoint] /docker/entrypoints/antispam.sh 
mail: cannot send message: Process exited with a non-zero status 
```

我所要做的就是使用 拉取 iRedMail 的 docker 存储库，**在**我的本地使用`git clone -b stable https://github.com/iredmail/dockerized`重建映像`docker build . --tag iredmail:latest -f dockerized/Dockerfiles/Dockerfile`，然后运行它。这次选择了我的**Postfix**安装脚本的正确位置，并且 Postfix 安装和设置运行良好。

当我再次使用以下命令检查**Dovecot**服务时：

```
service dovecot start 
```

它向我表明它运行良好。

**就这样**

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-21T17:45:56.943

迁移到新服务器后我遇到了同样的问题，我彻底检查了配置显示我的 IMAP 和 IMAPS 已禁用，我只是启用了服务并重新启动服务器。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-01T10:21:48.497

这是你修复它的方法：

检查日志： **tail /var/log/dovecot.log**

如果你看到：

> 致命：未知的数据库驱动程序“mysql”

意思是缺少包裹！Dovecot 需要 dovecot-mysql 包来运行 mysql 身份验证。用 yum 安装就可以解决这个问题：

**百胜安装 dovecot-mysql**

* * *

## 回答 #14

> 赞同：-4
> 
> 时间：2016-06-16T05:55:01.350

您应该删除到 dovecot 邮件服务器并使用另一个邮件服务，两个服务可能是冲突的，因此您必须删除一个邮件服务，我已经尝试了 2 天这个错误。

代码 : yum remove dovecot

如果您使用此代码 Dovecot 将从您的服务器中删除并且没有冲突**********

# http - 我应该拒绝未使用的请求方法吗？

> ID：15594282
> 
> 赞同：3
> 
> 时间：2013-03-24T01:50:23.070
> 
> 标签：http, zend-framework, http-headers

在我的 Zend Framework MVC 应用程序中，我只使用了两种请求方法：GET 和 POST。我想知道如果收到其他请求类型（例如 PUT 或 DELETE），是否应该在我的基本控制器中进行检查以引发异常。

据我所知，有两个方面需要考虑：

1.  它会提高安全性吗？如果我允许框架响应 PUT、DELETE 等，我是否会给潜在的黑客一个先机？
2.  它会干扰网站的正常运行吗？例如，搜索引擎机器人是否依赖 GET 和 POST 以外的请求？

非常感谢您的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:22:30.790

正确的响应代码是`405 Method Not Allowed`，包括`Allow: GET, POST` 标题。

> 10.4.6 405 方法不允许
> 
> Request-URI 所标识的资源不允许使用 Request-Line 中指定的方法。响应必须包含一个 Allow 标头，其中包含所请求资源的有效方法列表。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T08:48:12.557

人们由于错误或故意违反您的应用程序/框架/网站等的 api，以探测您的网站的弱点。（仅当您的网站仅在内部或在公共网络上时，频率才重要。）

如果您的网站支持开发人员，那么这可能是使用不允许的 405 方法代码回复的原因。也许只有在会话（假设会话）被标记为处于开发人员模式时。

如果您不期望有效的开发人员，那么我建议默默地吞下任何不好的输入，以使坏人更难。

在正常情况下不提供错误消息的另一个原因是：在特定情况下缺少错误消息可以解释为坏数据使其比其他数据更进一步进入您的堆栈 - 概述了可能的攻击路线。

最后，错误返回（类型、响应前的延迟等）可用于表征应用程序/框架的特定版本等。一旦发现攻击向量，这可用于快速定位其他易受攻击的安装。

是的，以上是悲观的，我深情地记得 80 年代，每个人都响应 ping、echo 和其他诊断请求。但是坏人在这里，我们有责任加强我们的系统。有关更多信息，请参阅此[TED 视频](http://www.ted.com/talks/danny_hillis_the_internet_could_crash_we_need_a_plan_b.html)。

# arrays - 在列中拆分文件，过滤并打印它们

> ID：15594283
> 
> 赞同：0
> 
> 时间：2013-03-24T01:50:37.653
> 
> 标签：arrays, perl, split

我被分配了一项任务。以下是说明：

编写一个 Perl 程序来完成文件 solar.txt 上的以下各项（参见课程主页上的链接）

1.  打印所有未在第八个字段中列出发现者的记录。
2.  擦除第二个字段后打印每条记录。注意：最好说“打印每条记录”省略第二个字段。
3.  打印具有负轨道周期的卫星的记录。（负轨道周期仅表示卫星沿逆时针方向运行。）
4.  打印 Voyager2 太空探测器发现的物体的数据。
5.  打印每条记录，并以秒而不是天为单位给出轨道周期。

关于 solar.txt 文件：该文件包含 9 行，第一项是：Adrastea XV Jupiter 129000 0.30 0.00 0.00 Jewitt 1979，按行星或月球名称的字母顺序（第一个字段）。[] 中的文本是上一行中的相应字段。

该文件中的字段是：

1.  行星或月亮的名称 [Adrastea]
2.  月亮或行星的数量（罗马数字）[XV]
3.  卫星围绕其运行的天体名称 [木星]
4.  以千米为单位的轨道半径（半长轴） [129000]
5.  以天为单位的轨道周期 [0.30]
6.  轨道倾角 [0.00]
7.  轨道偏心率 [0.00]
8.  发现者[杰维特]
9.  发现年份 [1979]

我被困在第一条指令上。我可以读入“solar.txt”文件，但在那之后我无法做到或无法弄清楚。拆分数组似乎是最好的选择，但目前对我不起作用。这是代码：

```
#usr/bin/perl
use warnings;
use strict;

open (SOLAR_FILE, "C:/perl_tests/solar.txt") or die "Could not open the file!";
my @array = (<SOLAR_FILE>);
close (SOLAR_FILE);

for (my $i = 0; $i < 8; $i++) {
    my @tempArray = split(/ /, $array[$i]);
    if ($tempArray[$i] eq "-") {
        print "@tempArray";
    }
}

open (SOLAR_FILE, "C:/perl_tests/solar.txt") or die "Could not open the file!";
my @array = (<SOLAR_FILE>);
close (SOLAR_FILE);

for my $record (@array) {
    my @tempArray = split(/ /, $record);
    if ($tempArray[2] eq qw(Jupiter, Uranus, Saturn, Pluto, Mars, Sun, Neptune, Earth)
    s//???/" "/g;
    #I know something goes where the (???) are, but I'm not sure how to do it.
    {
    print "@tempArray";
    }
} 
```

另外，我不确定如何开始其他 4 个。如果有人能指出我正确的方向，那将很有帮助。

编辑：这是文件中的信息：

```
Adrastea XV Jupiter 129000 0.30 0.00 0.00 Jewitt 1979
Amalthea V Jupiter 181000 0.50 0.40 0.00 Barnard 1892
Ananke XII Jupiter 21200000 -631 147.00 0.17 Nicholson 1951
Ariel I Uranus 191000 2.52 0.00 0.00 Lassell 1851
Atlas XV Saturn 138000 0.60 0.00 0.00 Terrile 1980
Belinda XIV Uranus 75000 0.62 0.03 0.00 Voyager2 1986
Bianca VIII Uranus 59000 0.43 0.16 0.00 Voyager2 1986
...
Leda XIII Jupiter 11094000 238.72 27.00 0.15 Kowal 1974
Lysithea X Jupiter 11720000 259.22 29.00 0.11 Nicholson 1938
Mars IV Sun 227940000 686.98 1.85 0.09 - -
Megaclite XIX Jupiter 23911000 ? ? ? Sheppard 2000
Mercury I Sun 57910000 87.97 7.00 0.21 - -
Metis XVI Jupiter 128000 0.29 0.00 0.00 Synnott 1979
Mimas I Saturn 186000 0.94 1.53 0.02 Herschel 1789
Miranda V Uranus 130000 1.41 4.22 0.00 Kuiper 1948
Moon I Earth 384000 27.32 5.14 0.05 - -
Naiad III Neptune 48000 0.29 0.00 0.00 Voyager2 1989
Neptune VIII Sun 4504300000 60190.00 1.77 0.01 Adams 1846
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:58:39.143

您的外部循环正在遍历字段；它应该遍历整个行数组：

```
for my $record (@array) {
    my $tempArray = split(/ /, $record);

    if ($tempArray[7] eq "-") # test 8th field
    {
        . . .
    }
} 
```

这假设您正确分割每一行；也就是说，字段之间的分隔符是空格字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:18:26.933

1.  检查第 8 个字段是否有以下内容`-`：`if ($fields[7] ne '-') { ... }`
2.  删除第二个字段：`splice(@fields, 1, 0);`
3.  检查第 5 个字段是否为负：`if ($fields[4] < 0) { ... }`
4.  检查第 8 个字段`Voyager2`：`if ($fields[7] eq 'Voyager2') { ... }`
5.  不可能的。一天中的秒数对于每一天来说是不一样的。但是，由 给出的近似结果`$fields[4]*24*60*60`可能在公差范围内。

# c# - 使用数据绑定在 WPF MVVM 中的 ListView（或更好的东西！）中显示图像

> ID：15594289
> 
> 赞同：8
> 
> 时间：2013-03-24T01:52:13.327
> 
> 标签：c#, wpf, image, listview, mvvm

我试图在 ListView 中显示一些图像并且没有成功。我正在使用 WPF MVVM，而 ListView 是简单地显示西装和排名数据的保留。（请参阅我以前的帖子：[WPF 中的 MVVM - 如何提醒 ViewModel 模型发生变化......或者我应该吗？](https://stackoverflow.com/questions/15439841/mvvm-in-wpf-how-to-alert-viewmodel-of-changes-in-model-or-should-i)如果你有兴趣！）也就是说，我可以使用 ListView 以外的东西（如果这是建议的话）但我仍然想知道如何用 ListView 来做，假设它是可行的。我在 ViewModel 中绑定的属性是：

```
public ObservableCollection<Image> PlayerCardImages{
    get{
        ObservableCollection<Image> results = new ObservableCollection<Image>();
        foreach (CardModel card in PlayerCards)
        {
            Image img = new Image();
            BitmapImage bi3 = new BitmapImage();
            bi3.BeginInit();
            // TODO: Pick card based on suit/rank. Just get  1 image working now
            bi3.UriSource = new Uri("diamond-1.png", UriKind.Relative);
            bi3.EndInit();
            img.Stretch = Stretch.Fill;
            img.Source = bi3;            
            results.Add(img);
        }
        return results;
    }
} 
```

在我使用的**XAML**代码中：

```
<Window.Resources>
 <DataTemplate x:Key="ImageCell">
        <StackPanel Orientation="Horizontal">
            <Image Source="{Binding PlayerCardImages}" Width="200" Height="200" Stretch="Fill" ToolTip="Add tooltip"/>
        </StackPanel>
    </DataTemplate>
</Window.Resources>

 <StackPanel Orientation="Vertical">
 <Label Content="Player Cards"/>
        <ListView  Name="lvwTitles" ItemsSource="{Binding}" 
 IsSynchronizedWithCurrentItem="True" 
 SelectionMode="Single" ItemTemplate="{StaticResource ImageCell}" Height="59">
        </ListView>
    </StackPanel> 
```

这个想法被无耻地窃取了：[WPF - 将图像水平绑定到 ListView](https://stackoverflow.com/questions/10457872/wpf-bind-images-horizontally-to-listview) 但是，它甚至没有出现数据绑定，正如我在 PlayerCardImages 中的断点没有被命中所证明的那样。

我还尝试了以下 XAML，但运气更好：

```
 <StackPanel Orientation="Vertical">
        <Label Content="Player Cards"/>
        <ListView

        AlternationCount="2"
        DataContext="{StaticResource PlayerCardsGroups }"
       ItemsSource="{Binding}"
        >
            <ListView.GroupStyle>
                <StaticResourceExtension 
                ResourceKey="CardGroupStyle"
                />
            </ListView.GroupStyle>
            <ListView.View>
                <GridView>
                    <GridViewColumn>
                <Image Height="50" Width="40"></Image>
                    </GridViewColumn>
                </GridView>                   
            </ListView.View>
        </ListView>
    </StackPanel>
    <Window.Resources>
    <CollectionViewSource x:Key="PlayerCardsGroups" 
        Source="{Binding Path=PlayerCardImages}">
    </CollectionViewSource>

    <GroupStyle x:Key="CardGroupStyle">
        <GroupStyle.HeaderTemplate>
            <DataTemplate>
                <TextBlock 
        x:Name="txt" 
        Background="{StaticResource Brush_HeaderBackground}"
        FontWeight="Bold"
        Foreground="White"
        Margin="1"
        Padding="4,2,0,2"
        Text="Cards" 
        />
            </DataTemplate>
        </GroupStyle.HeaderTemplate>
    </GroupStyle>

    <Style x:Key="CardItemStyle" TargetType="{x:Type ListViewItem}">
        <!-- 
  Stretch the content of each cell so that we can 
  right-align text in the Total Sales column. 
  -->
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <!-- 
  Bind the IsSelected property of a ListViewItem to the 
  IsSelected property of a CustomerViewModel object.
  -->
       <Style.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="ItemsControl.AlternationIndex" Value="1" />
                    <Condition Property="IsSelected" Value="False" />
                    <Condition Property="IsMouseOver" Value="False" />
                </MultiTrigger.Conditions>
                <Setter Property="Background" Value="#EEEEEEEE" />
            </MultiTrigger>
        </Style.Triggers>
    </Style>

    </Window.Resources> 
```

这段代码肯定会通过数据绑定——我的断点在程序开始时以及每当项目被添加到集合时被命中。但没有显示图像。与其用更多不起作用的 XAML 来折磨你，也许我可以请人指点我一些代码/示例/文档，这些代码/示例/文档显示如何将图像列表绑定到 ListView（或另一个控件，如果你真的觉得 ListView 是不当）。请注意，我的收藏是我绑定的东西。我注意到在许多示例中，它们都绑定到子属性。即他们可能有一个专辑的集合，并且对于每个专辑，他们绑定到它的属性图像（请参阅：[在 WPF ListView 中将项目显示为图像](https://stackoverflow.com/questions/2570568/showing-items-as-images-in-a-wpf-listview)）。

任何想法或帮助将不胜感激。

-戴夫

**附加信息。**

根据 Clemens 的建议，我现在有了 PlayerCardImages 的以下代码：

```
public ObservableCollection<ImageSource> PlayerCardImages
    {
        get
        {
            var results = new ObservableCollection<ImageSource>();

            //if (PlayerCards.Count == 0)
            //    return results;
            //else
            //{
            //    results.Add(new BitmapImage(new Uri(@"Images\\" + "diamond-1.png", UriKind.Relative)));
            //}
            foreach (var card in PlayerCards)
            {
                results.Add(new BitmapImage(new Uri(@"Images\\" + GetCardFileName(card), UriKind.Relative)));

            }
            return results;

        } 
```

我使用了他建议的确切 XAML。它几乎可以工作。我说“几乎”是因为我注意到奇怪的行为，有时会显示 1 张卡，有时不会显示（我从未得到 2 张卡）。所有从文件和绑定中获取卡片似乎都在工作，我找到了我认为是最后一个错误的关键（这很奇怪）。如果在调试器中检查结果，并在调试器中进一步打开 results[0]，我会显示该卡！实际上，我必须打开 [0]（您会看到有关高度、宽度等的信息）才能使其正常工作。此外，如果我打开 [1]，则会显示该卡。为什么打开调试器信息会有任何影响？对于那些可能会问的人，如果您在调试器中打开两张卡会发生什么......这是行不通的。我得到一个操作超时异常。我会说也许我的图像文件很大。10 KB 到 30 KB。那是问题吗？我猜不是，这是阅读图像或装订的一个微妙问题。到底是怎么回事？谢谢，戴夫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T16:49:10.520

首先，您不应该在 ViewModel 中使用 Image 控件。您的视图的 DateTemplate 中已经有一个 Image 控件。你要绑定`Source`这个Image控件的属性，这个绑定的源属性不能是另一个Image。

相反，您的 ViewModel 将使用[`ImageSource`](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)（或类似的派生类[`BitmapImage`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx)）作为图像类型，如下所示：

```
public ObservableCollection<ImageSource> PlayerCardImages
{
    get
    {
        var results = new ObservableCollection<ImageSource>();
        foreach (var card in PlayerCards)
        {
            results.Add(new BitmapImage(new Uri(card.ImageUrl)));
        }
        return results;
    }
} 
```

或者只是图像 URI 或路径，因为 WPF 会自动转换`string`为`ImageSource`内置的：

```
public ObservableCollection<string> PlayerCardImages
{
    get
    {
        var results = new ObservableCollection<string>();
        foreach (var card in PlayerCards)
        {
            results.Add(card.ImageUrl);
        }
        return results;
    }
} 
```

您现在将 Listbox 的`ItemsSource`属性绑定到`PlayerCardGames`集合，并在 DataTemplate 中直接绑定到集合项。ListView 的 DataContext 必须设置为定义`PlayerCardGames`属性的对象的实例。

```
<ListView ItemsSource="{Binding PlayerCardGames}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <Image Source="{Binding}" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

* * *

更新：由于加载图像文件似乎有问题，您可以尝试以下方法。它同步加载图像，您可以使用调试器单步执行。

```
public static ImageSource LoadImage(string fileName)
{
    var image = new BitmapImage();

    using (var stream = new FileStream(fileName, FileMode.Open))
    {
        image.BeginInit();
        image.CacheOption = BitmapCacheOption.OnLoad;
        image.StreamSource = stream;
        image.EndInit();
    }

    return image;
} 
```

您可以在您的`PlayerCardGames`属性 getter 中使用此方法，如下所示：

```
foreach (var card in PlayerCards)
{
    results.Add(LoadImage(@"Images\\" + GetCardFileName(card)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:32:23.423

我并没有真正尝试重现您的问题，但如果这不能解决它，我会：

在您的第一个 xaml 块中，我认为您混淆了绑定。这就是我所期望的，ItemsSource 到图像的 ObservableCollection，图像源到图像。

```
<Image Source="{Binding}" ... />
<ListView  Name="lvwTitles" ItemsSource="{Binding PlayerCardImages}" ... /> 
```

在第二个块中，您完全省略了 Source 绑定：

```
<Image Source="{Binding}" Height="50" Width="40" /> 
```

# c++ - 默认构造函数调用

> ID：15594290
> 
> 赞同：2
> 
> 时间：2013-03-24T01:52:15.797
> 
> 标签：c++

我正在使用练习考试学习 C++ 考试。我在确定何时调用某些构造函数时遇到问题。代码是 -

```
using namespace std;
#include <iostream>

class Fraction
{
  private:
   int numerator, denominator;
  public:
   Fraction( int = 0, int = 1 );
   friend ostream& operator<<( ostream&, const Fraction& );
  };

 void debug( Fraction, Fraction );
 Fraction task( Fraction&, const Fraction& );

int main()
  {
    Fraction * A[6], * B; // Line 1
    Fraction C( 3 ), D( C ); // Line 2
    Fraction E[4], F = D; // Line 3
    Fraction G, H( 3, 4 ); // Line 4
    debug( C, D ); // Line 5
    B = new Fraction; // Line 6
    F = task( H, C );
    delete B;
    return 0;
  }

 void debug( Fraction X, Fraction Y )
 {
   cout << X << endl << Y << endl;
 }

 Fraction task( Fraction& X, const Fraction& Y )
 {
   Fraction Z;
   Z = Fraction( 5, 2 ); // Line 7
   return 1; // Line 8
 } 
```

现在，我认为在 3 种类型的实例中调用了默认的复制构造函数。

示例 1 -

```
 Fraction A(1,2);

        Fraction B(A); 
```

示例 2 -

```
 Fraction A(1,2);

        Fraction A = B; 
```

3 - 从函数返回对象时

4 - 当对象作为参数传递给函数时

有两个问题我似乎无法回答——

问题 1 - 考虑上面的源代码。当标记为“第 3 行”和“第 4 行”的语句被编译和执行时，对于这些语句中的每一个，将对“分数”类的构造函数进行多少次调用？

答案是 - D) 线路 3：5 次呼叫线路 4：2 次呼叫

这个问题的答案是 D。但是，当我回答它时，我得到了不同的结果 -

```
 Fraction E[4], F = D; // Line 3 
```

我看到数组 E[4] 的默认构造函数被调用了 5 次，但我认为这个语句也相当于 -

```
 Fraction E[4], Fraction F(D); 
```

因此，默认构造函数被调用 5 次，复制构造函数被调用一次。显然，这是不正确的，因为构造函数只被调用了 5 次。我没有看到我的错误在哪里。

我的另一个问题是以下问题-

1.  考虑图 2 中的源代码（上一页）。当标记为“第 7 行”和“第 8 行”的语句被编译并执行时，对于这些语句中的每一个，将对“分数”类的构造函数进行多少次调用？

    答案是 - D) 7 号线：1 次呼叫 8 号线：1 次呼叫

    ```
     Fraction task( Fraction& X, const Fraction& Y )
        {
          Fraction Z;
          Z = Fraction( 5, 2 ); // Line 7
          return 1; // Line 8
        } 
    ```

    我原本以为会调用默认构造函数来为 Fraction(5,2) 创建一个临时对象，然后复制构造函数会将 Fraction(5, 2) 复制到 Z。这实际上是默认赋值运算符的操作吗？至于第 8 行，这是否调用了复制构造函数，因为它返回了 Fraction 类型的对象？

我在这里的时候还有几个问题-

将 -

```
debug(B, C) 
```

调用复制构造函数两次以传递分数对象 B 和 C 的副本？

并且是 -

```
F = task( H, C ); 
```

调用默认赋值运算符以及 F 已经作为初始化的 Fraction 对象存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:10:44.023

您基本上想知道何时调用默认构造函数和复制构造函数。

对于你的第一个问题：

```
Fraction E[4], F = D; // Line 3 
```

`E[4]`是一个`Fraction`对象数组，它调用默认构造函数 4 次，因为您没有显式调用任何其他构造函数来初始化这些对象。由于在第 2 行`D`已经构造了对象，因此`F`是使用复制构造函数构造的，在这种情况下，编译器会为您生成一个，因为您没有为自己定义一个。所以在这种情况下，有 4 个默认构造函数调用和 1 个复制构造函数调用。在第 4 行，两个对象都调用了默认构造函数，因此在默认 ctor 上调用了两次。

```
debug(B, C)
call the copy constructor twice to pass copies of Fraction objects B and C? 
```

是的，因为参数是在函数中按值传递的，所以对两者都`debug`调用了复制构造函数`B``C`

一般来说，复制构造函数在以下情况下被调用：

1.  使用现有对象（如`F= D`或`F(D)`）实例化一个对象时
2.  按值传递对象时。
3.  当对象按值从函数返回时。

希望这可以为您提供足够的信息来理解代码。

# mysql - 如何在 MySQL 表中保持时间？

> ID：15594292
> 
> 赞同：-1
> 
> 时间：2013-03-24T01:52:26.440
> 
> 标签：mysql, date, time, format

好的，我的表有 7 列，

```
bno     VARCHAR(45) PK  NN
bdate       DATE            NN
btime       TIME            NN
duedate     DATE            NN
memo        VARCHAR(100)        NN 
vcode       INT     FK  NN      
status          TINYINT         NN 
```

我需要`btime`列来保持时间，例如下午 01:30:23。我怎样才能做到这一点？如何编写`INSERT`和`UPDATE`查询以节省和更新时间？

抱歉，我忘了提到我从 NetBeans 中的 jTextField 中花费时间。它以 AM/PM 显示当前时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:55:31.487

```
INSERT INTO tablename (mytime) VALUES (NOW())
UPDATE tablename SET mytime=NOW() WHERE id=1 LIMIT 1 
```

# image - Delphi GDIPLUS 改变图像位置

> ID：15594295
> 
> 赞同：1
> 
> 时间：2013-03-24T01:52:46.853
> 
> 标签：image, delphi, gdi+

我正在尝试完成一项简单的任务，但是通过使用 GDI+，我找不到任何示例。在我的代码中，我需要更改图像位置（如果更具体，则为顶部），但我不知道是否可以以更好的方式做到这一点。这就是我现在的做法：

```
procedure TForm2.Timer1Timer(Sender: TObject);
var
  I: Integer;
begin
  if image1.Top = -93 then
  Begin
    for I := -93 to -1 do
    Begin
    Sleep(10);
    image1.Top := Image1.Top + 1;
    Application.ProcessMessages;
  End;
End else if image1.Top = 0 then
Begin
  for I := 0 downto -92 do
  Begin
    Sleep(10);
    image1.Top := Image1.Top - 1;
    Application.ProcessMessages;
  End;
End;
end; 
```

嗯，这很简单，但它并不顺利，而是在每一步都会跳跃和重绘。

我感谢您的帮助。

更新：感谢 TLama 和他的灵感，我找到[了这个](http://www.mitov.com/products/igdi+)用于 delphi 2007 的 GDIPlus 实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:07:09.080

移动控制是一种错误的动画方式，独立于 GDI+。相反，您应该记住要为动画更改的位置，在`OnTimer`事件中修改它并告诉系统您要使目标控件无效。然后在控件的`OnPaint`事件中，您应该在该位置呈现您想要的任何内容。

所以首先，用`TImage`a 替换你的组件，`TPaintBox`因为`TImage`它主要用于静态图像，而不是动态渲染。也使用两个计时器。一个用于向上动画，一个用于向下动画。

以下代码没有考虑计时器的近似值，并且它使用了不太为人所知[`Delphi 2009 GDI+ Library`](http://www.bilsen.com/gdiplus/index.shtml)的 Delphi 包装器：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, GdiPlus;

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    Timer2: TTimer;
    PaintBox1: TPaintBox;
    procedure FormCreate(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
    procedure Timer2Timer(Sender: TObject);
    procedure PaintBox1Paint(Sender: TObject);
  private
    GPImage: IGPImage;
    FImageTop: Integer;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  FImageTop := 0;
  Timer1.Interval := 15;
  Timer2.Interval := 15;
  DoubleBuffered := True;
  Timer1.Enabled := True;
  Timer2.Enabled := False;
  GPImage := TGPImage.Create('d:\Image.jpg');
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  // no need for the following line since it's a reference of the interface
  // GPImage := nil;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
  if (FImageTop > -93) then
  begin
    FImageTop := FImageTop - 1;
    PaintBox1.Invalidate;
  end
  else
  begin
    Timer1.Enabled := False;
    Timer2.Enabled := True;
  end;
end;

procedure TForm1.Timer2Timer(Sender: TObject);
begin
  if (FImageTop < 0) then
  begin
    FImageTop := FImageTop + 1;
    PaintBox1.Invalidate;
  end
  else
  begin
    Timer2.Enabled := False;
    Timer1.Enabled := True;
  end;
end;

procedure TForm1.PaintBox1Paint(Sender: TObject);
var
  GPGraphics: IGPGraphics;
begin
  GPGraphics := TGPGraphics.Create(PaintBox1.Canvas.Handle);
  GPGraphics.DrawImage(GPImage, 0, FImageTop);
end;

end. 
```

# java - c++ power-pc 编码

> ID：15594299
> 
> 赞同：0
> 
> 时间：2013-03-24T01:53:16.803
> 
> 标签：java, c++, powerpc

有人知道power-pc的任何cpp编译器吗？最好是适用于 os 9 的东西。我有一个旧的 imac g3，我想为其制作程序。如果 cpp 不存在，我应该用什么来为它编程？
如果您也可以找到用于 power-pc 的 Java 开发工具包，那将是非常棒的！

提前谢谢大家：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T01:57:59.713

嗯，gcc 可以为 ppc 编译代码。

您需要为您的目标架构安装*工具链*。搜索“cctools”/“binutils”/“crosstools”或“ppc 交叉编译环境”。

你也可以看看：

*   [构建和测试 gcc/glibc 跨工具链](http://www.kegel.com/crosstool/)（这可能会起作用）
*   [GCC 的主机/目标特定安装说明](http://gcc.gnu.org/install/specific.html#powerpc-x-x)（在页面中搜索 powerpc）

不幸的是，我没有一个好的 power-pc 的 java 开发工具包可以推荐给你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:00:43.443

寻找[LLVM](http://llvm.org)，他们为 MacOS 制作官方 C 和相关编译器。AC 编译器应该足以构建它。[GCC](http://gcc.gnu.org/)将是我的第二个赌注，它当然可以处理 PowerPC（Linus Torvalds 在某些时候将 G3 Mac 作为他的主要开发机器，IIRC）。也许搜索非官方软件存储库会导致一个工作包，或者也许寻找 PPC Macs 的粉丝组会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:17:32.710

power-pc 没有官方的 JDK 了。但是，如果您准备自己付出一些努力，那么周围有一些端口。例如：

*   [http://javaevangelist.blogspot.com.au/2012/02/openjdk-7-on-apple-g5-powerpc-on-mac-os.html](http://javaevangelist.blogspot.com.au/2012/02/openjdk-7-on-apple-g5-powerpc-on-mac-os.html)
*   [带有 Mac OS X 10.4 的 Mac PowerPC 上的 Java 6](https://stackoverflow.com/questions/613175/java-6-on-mac-powerpc-with-mac-os-x-10-4)
*   [http://openjdk.java.net/projects/bsd-port/](http://openjdk.java.net/projects/bsd-port/)

另外，请记住，G3[真的很老](http://en.wikipedia.org/wiki/IMac_G3)了，有兴趣使用它并将东西移植到它的社区可能真的很小。我想说支持 OS 9 的可能性很小。

# web-services - org.apache.axis2.AxisFault：从客户端连接到 Web 服务时未知

> ID：15594307
> 
> 赞同：0
> 
> 时间：2013-03-24T01:54:41.857
> 
> 标签：web-services, soap, wsdl, axis, wsdl2java

从客户端存根连接到 Web 服务时，我遇到了“org.apache.axis2.AxisFault：未知”异常。这是一个轴 2 Web 服务。客户端和服务器端存根是使用 WSDL2Java 生成的。我使用以下链接将我的 Web 服务嵌入或集成到现有的 Web 应用程序中。

1.  [http://wso2.org/library/90](http://wso2.org/library/90)
2.  [http://www.developer.com/services/article.php/3777111/Embedding-Apache-Axis2-into-Existing-Applications.htm](http://www.developer.com/services/article.php/3777111/Embedding-Apache-Axis2-into-Existing-Applications.htm)

所以，我没有使用轴 2 管理控制台。我从服务器端验证了 Web 服务，我能够查看 wsdl 并且 Web 服务已启动并正在运行。

发生异常时，我没有在服务器端日志中看到任何活动/错误/消息。我不确定如何进一步调试。非常感谢任何调查此问题的指针。

# c# - 在 C# 中连续创建圆圈

> ID：15594309
> 
> 赞同：1
> 
> 时间：2013-03-24T01:55:00.253
> 
> 标签：c#, graphics, drawing, geometry

我对编程很陌生，并且有一个关于我正在学习的实践练习的快速问题。我正在尝试创建一个应用程序，用户可以在其中输入行数和列数，其中圆圈将彼此相邻绘制（本质上是一个圆圈网格）

我已经能够在 C# 中通过使用一个矩形对象并将它的 X 轴值移动一个量来做到这一点，但我不知道如何用一个圆圈来做到这一点。这是否以同样的方式工作？我在 MSDN 上看到有一个 circle 类，但我无法让它工作。我需要用填充椭圆做一些事情吗？因为这是我目前可以弄清楚如何画一个圆圈的唯一方法。

我不是在寻找一个完整的解决方案，只是一些基本的指导来帮助新手学习。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:51:58.590

假设您有桌面 winforms 应用程序，并使用 System.Drawing.Graphics 对象在窗口内绘制。

要绘制一个矩形，您可能会使用 DrawRectangle 方法之一：

```
// Create bounding rectangle.
Rectangle rect = new Rectangle(0, 0, 200, 200);

// Draw rectangle to screen.
e.Graphics.DrawRectangle(blackPen, rect); 
```

要绘制圆形而不是矩形，只需使用 DrawEllipse 方法，并以与您相同的方式移动边界矩形，即移动 x 和 y 坐标。

```
// Create bounding rectangle.
Rectangle rect = new Rectangle(0, 0, 200, 200);

// Draw circle to screen.
e.Graphics.DrawEllipse(blackPen, rect); 
```

# r - R不使用超过4GB的内存

> ID：15594318
> 
> 赞同：6
> 
> 时间：2013-03-24T01:57:12.573
> 
> 标签：r, ubuntu, ram, ubuntu-12.10

我在 Ubuntu 12.10 AMD64 上运行 64 位 R。我最近为我的系统添加了额外的 8GB 内存，总共 12GB。但是我注意到，只要（单个 R 会话的）内存使用量超过 4GB，R 就会给我一个错误。当我并行运行 6 个 R 会话时，每个会话消耗约 3 GB 的内存，我的总内存使用量增加到 11 GB。但是单个 R 会话不能使用超过 4GB！我需要在一个大型数据集上训练一个随机森林模型，并且我需要 > 4GB 的单个 R 会话。

更新：

```
R> sessionInfo()

R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base     

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

更新 2：

```
$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 92787
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 92787
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:14:23.480

我怀疑您有流程限制，将任何给定流程限制为 4G。

尝试`ulimit -a`查找与内存相关的任何非无限值。

此外，检查文件`/etc/security/limits.conf`和其中的任何文件以`/etc/security/limits.d/`获取有关内存限制的条目。

特别是这两个：

```
data
as 
```

请参阅`man limits.conf`PAM 可以强制执行的配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T16:45:43.247

在 Windows 操作系统中，默认情况下，R 安装 32 位和 64 位版本。虽然，看起来 Linux 没有。如果您使用的是 RStudio 之类的 IDE，如果已安装，则它指向 32 位版本。您可以在 Rstudio 设置中更改此设置。

# javascript - CSS 变换 translate3d 图像动画奇怪的抗锯齿行为导致抖动

> ID：15594321
> 
> 赞同：3
> 
> 时间：2013-03-24T01:58:07.943
> 
> 标签：javascript, webkit, transform, css-animations, translate3d

我有一个使用 CSS3 translate3d 从左到右动画的图像的 jsFiddle 示例，这里：http: [//jsfiddle.net/Rhx2K/3/](http://jsfiddle.net/Rhx2K/3/)

我有一个 requestAnimationFrame 循环 60fps 并以亚像素间隔在每一帧上设置 JPG 图像的左侧位置。

```
var image1 = document.getElementById('image1');
var image2 = document.getElementById('image2');

var image1Left = 0;
var image2Left = 0;
var subpixel   = 1 / 64;

var _run = function(){
    window.requestAnimFrame(_run);
    image1Left += subpixel * 5;
    image2Left += subpixel;
    image1.style.webkitTransform  = 'translate3d('+image1Left+'px, 0px, 0px)';
    image2.style.webkitTransform  = 'translate3d('+image2Left+'px, 0px, 0px)';
}

_run(); 
```

我在示例中放置了两张图片。他们都在做同样的事情，只是顶部的移动得更快。注意它是如何产生这种阶梯效应的。图像本身在亚像素级别进行转换。注意图像是如何以恒定速率移动的——你可以看到树木似乎在滑行，但左右两侧都在抖动。经过实验，我意识到离像素越远抗锯齿效果越好。例如左边：1px，没有抗锯齿，但左边：1.2px，有一些，然后左边：1.5px还有更多。左边：1.7px 少，然后在 2px，没有。所以这里的摆动是由于每个子像素步骤的相对抗锯齿。如果它没有引起这种抖动，这将是有意义的。

在转换上使用 webkit 转换时也会发生这种情况。 [http://jsfiddle.net/Rhx2K/5/](http://jsfiddle.net/Rhx2K/5/)

这是标准行为吗？这似乎是 webkit 本身的一个错误。

我的解决方法是仅按像素值设置动画，如下所示：http: [//cmivfx.com/home](http://cmivfx.com/home)

使用像素值（相对于子像素值），不会向图像添加抗锯齿，因此动画看起来非常流畅......我唯一的问题是全像素增量会导致图像移动得太快。我需要亚像素增量来减慢动画速度。

这些我都试过了......

```
-webkit-transform: translate3d(0, 0, 0);
-webkit-perspective: 1000;
-webkit-backface-visibility: hidden;
-webkit-transform-style: preserve-3d; 
```

这些都不是答案。如何让 translate3d 动画在亚像素增量上看起来不错？

# python - Python中的关键错误

> ID：15594328
> 
> 赞同：0
> 
> 时间：2013-03-24T01:58:49.963
> 
> 标签：python, text, python-3.x, keyerror

这是我的代码

```
with open('yvd.txt') as fd:
    name='Trevor Jones'
    input=[x.split('|') for x in fd.readlines()]
    to_search={x[0]:x for x in input}
    print('\n'.join(to_search[name])) 
```

我正在尝试在一个大文件中搜索一个名称并打印以下信息，减去分隔符。这是文本文件的一部分

|特雷弗·琼斯|1|MOV|白人男性|光|10||3000|2500|养老院的老人|

但是，当我运行脚本时，我收到一个关键错误，说“KeyError：'Trevor Jones'”，这没有意义，因为文件中存在 Trevor Jones。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:00:55.633

```
>>> text = '|Trevor Jones|1|MOV|White Male|Light|10||3000|2500|Old Man Living In Retirement Home|'
>>> x = text.split('|')
>>> x
['', 'Trevor Jones', '1', 'MOV', 'White Male', 'Light', '10', '', '3000', '2500', 'Old Man Living In Retirement Home', ''] 
```

在这里你可以看到问题：`x[0]`是`''`. 我会用`text.strip('|').split('|')`

如果您想知道为什么会这样，请考虑使用`'|'.join(x)`，它需要能够重建它。

# vb.net - 创建带空格的所有单词组合

> ID：15594329
> 
> 赞同：0
> 
> 时间：2013-03-24T01:59:07.437
> 
> 标签：vb.net, console

您好，我正在尝试在 Visual Basic（控制台应用程序）中创建一个程序，用于检查单词与空格的所有组合，例如：

1.  真的
2.  真的
3.  真的
4.  真的
5.  真的
6.  真的

现在这个词不能以空格开头或结尾，我想知道我应该如何从这个开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:04:59.797

如果你需要生成这些字符串，你必须考虑你将如何去做。对于给定的单词：

1.  你取第一个字母。毕竟，它不能以空格开头。
2.  您有两个选择：插入一个空格，或继续下一个字母。
3.  如果插入空格，请继续下一个字母。
4.  对所有字母重复步骤 2 和 3，直到最后一个字母。
5.  添加最后一个字母。毕竟，它不能以空格结尾。

您可以递归地执行此操作。

* * *

如果您只想检查其中包含空格的单词，则可以使用正则表达式。在运行时生成一个模式，如下所示：

```
^T[ ]?r[ ]?u[ ]?e$

```

`^`匹配字符串的开头，结尾`$`。*是否*`[ ]?`匹配空格。要匹配多个空格和/或制表符，请改用。*`\s*`*

# ruby-on-rails - rails flash.now 从部分

> ID：15594330
> 
> 赞同：0
> 
> 时间：2013-03-24T01:59:08.583
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个控制器，它应该显示一条闪光消息。不显示闪烁消息。我唯一的问题是没有显示闪存消息。如果有人可以请对此做出解释，那将是很棒的。我猜我的错误是愚蠢的，但我不知道足以解释发生了什么。

编辑：我为此部分添加了我的日志

编辑：当我单击带有无效信息的管理按钮时，没有任何反应。当我刷新页面时，会显示 Flash 消息。我真的只需要刷新当前页面，但它不起作用。如果有人有任何想法，请分享。

编辑：我尝试将事情更改为 `redirect_to @department, :notice => "invalid Password"`

我仍然无法让 Flash 消息显示。

编辑：从[这个](http://ionrails.com/2009/09/19/flashnotice-vs-flash-nownotice/)站点它说现在闪存将显示在您正在渲染的视图中。但我渲染的视图是局部的。谁能至少让我知道我是否走在正确的轨道上。除了我自己的一点方向或想法吗？

这是我的关系的创建方法。

```
def create
    @department = Department.find(params[:manager_relationship][:department_id])
    if @department.authenticate(params[:manager_relationship][:password])
    current_user.manage!(@department)
    respond_to do |format|
        format.html { redirect_to @department }
        format.js
        end
    else
        redirect_to department_path@department, :alert => "Invalid Password"
    end
end 
```

在我的会话控制器中成功使用了相同的代码。

```
SessionsController
if user && user.authenticate(params[:session][:password])
        sign_in user
        redirect_back_or user
    else
        flash.now[:error] = 'Invalid email/password combination'
        render 'new'
    end 
```

它是从部分调用的

部门/show.hmtl.erb

```
<% provide(:title, @department.department_name) %>
<div class="span8">
    <%= render 'manage_form' if signed_in? %>
</div> 
```

_manage_form.html.erb

```
<div id="manage_form">
<% if current_user.managing?(@department) %>
<%= render 'unmanage' %>
<% else %>
<%= render 'manage' %>
<% end %>
</div> 
```

_manage.html.erb

```
<%= form_for(current_user.manager_relationships.build(department_id: @department.id), remote: true) do |f| %>

    <div>
    <%= f.label :password %>
    <%= f.password_field :password %>
    </div>

    <div><%= f.hidden_field :department_id %></div>
    <%= f.submit "Manage department", class: "btn btn-large btn-primary" %>
<% end %> 
```

应用程序.html.erb

```
<!DOCTYPE html>
<html>
<head>
.
.
.
...
<body>
<%= render 'layouts/header' %>
<div class="container">
  <% flash.each do |key, value| %>
    <div class="alert alert-<%= key %>"><%= value %></div>
  <% end %>
  <%= yield %>
  <%= render 'layouts/footer' %>

</div> 
```

这是取消管理和管理 http 请求的日志

```
Started DELETE "/manager_relationships/22" for 127.0.0.1 at 2013-03-24 11:08:20 -0700
Processing by ManagerRelationshipsController#destroy as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"Y3I7qY4LBfChjdYAUlJ1eDh23YkcJRwSRfa6s2wavoI=", "commit"=>"Unmanage", "id"=>"22"}
[1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."remember_token" = '9J1RAJy16Tooz5wMmzQohw' LIMIT 1[0m
     [1m[35mManagerRelationship Load (0.0ms)[0m  SELECT "manager_relationships".* FROM "manager_relationships" WHERE "manager_relationships"."id" = ? LIMIT 1  [["id", "22"]]
[1m[36mDepartment Load (1.0ms)[0m  [1mSELECT "department".* FROM "departments" WHERE "department"."id" = 1 LIMIT 1[0m
[1m[35mManagerRelationship Load (0.0ms)[0m  SELECT "manager_relationships".* FROM "manager_relationships" WHERE "manager_relationships"."user_id" = 1 AND "manager_relationships"."department_id" = 1 LIMIT 1
[1m[36m (0.0ms)[0m  [1mbegin transaction[0m
[1m[35mSQL (0.0ms)[0m  DELETE FROM "manager_relationships" WHERE "manager_relationships"."id" = ?      [["id", 22]]
[1m[36m (26.0ms)[0m  [1mcommit transaction[0m
Rendered departments/_manage.html.erb (2.0ms)
Rendered manager_relationships/destroy.js.erb (5.0ms)
Completed 200 OK in 86ms (Views: 11.0ms | ActiveRecord: 27.0ms)

Started POST "/manager_relationships" for 127.0.0.1 at 2013-03-24 11:08:23 -0700
Processing by ManagerRelationshipsController#create as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"Y3I7qY4LBfChjdYAUlJ1eDh23YkcJRwSRfa6s2wavoI=",     "manager_relationship"=>{"password"=>"[FILTERED]", "department_id"=>"1"}, "commit"=>"Manage Bar"}
[1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."remember_token" =     '9J1RAJy16Tooz5wMmzQohw' LIMIT 1
[1m[36mDepartment Load (0.0ms)[0m  [1mSELECT "departments".* FROM "departments" WHERE "departments"."id" = ? LIMIT 1[0m      [["id", "1"]]
Redirected to http://localhost:3000/departments/1
Completed 406 Not Acceptable in 91ms (ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:49:34.710

首先，我在您的视图中看不到您在哪里显示闪光灯。您应该在要显示消息的视图中执行以下操作：

```
<% if flash[:success] %>
  <p>
   <%= flash[:success] %>
  </p>
<% end %>

<% if flash[:error] %>
  <p>
   <%= flash[:error] %>
  </p>
<% end %> 
```

其次，当您进行重定向时，您应该使用`flash[:success] = 'message'`而不是`flash.now[:success]`. 用途`flash.now`是您不重定向用户，而只是渲染视图。

# javascript - Javascript中的无偏随机范围生成器

> ID：15594332
> 
> 赞同：1
> 
> 时间：2013-03-24T01:59:20.740
> 
> 标签：javascript, random, numbers, range, generator

为了防止 max 的偏差**，**每次小数范围超过**max**时，我都会重新计算，而不是去除小数。我认为使用**random()**会引入一些偏差，但这是可以接受的。

可选 arg **decimal**是一个整数，表示要包含多少个小数位。

可选的 arg **exclude**便于从结果中排除特定数字（通常为 0）。

如果省略所有参数，则可以选择随机返回 true 或 false。

基本上，我只是想知道是否有任何方法可以在不增加和更多偏差（甚至减少偏差）的情况下提高速度和效率。似乎while循环可能会减慢它的速度。我将它用于动画，并且不想要有偏见的结果（尤其是在 1.0 到 2.0 之类的小范围内）。

```
function random(min, max, decimal, exclude) {
    if (min == null) return (Math.random()*2 >= 1) ? true : false
    var decimal = (decimal == null) ? 1 : Math.pow(10,decimal), result = exclude
    while (result == exclude) {
        result = max+1
        while (result > max) var result = Math.round((Math.random()*(max-min+1)+min)*decimal)/decimal
    }
    return result
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:15:45.527

分布是均匀的，因此如果数字超出您的范围，您可以缩放/移动伪随机数，而不是重复。

```
var rand = Math.random() * (max - min) + min; 
```

这删除了您的一个 while 循环，并且应该加快代码速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:58:41.427

这是一个更简洁的实现：

```
function random(min, max, decimal, exclude) {
    // if no min and max is passed, return true or false
    if (arguments.length < 2) return(Math.random() >= 0.5);

    // calc decimal multiplier
    var factor = 1, result;
    if (typeof decimal === "number") {
        factor = Math.pow(10, decimal);
    }

    // loop until we get a value that isn't our exclude value
    do {
        // calc rand value in proper range
        result = Math.random() * (max - min) + min;

        // adjust to proper number of decimal digits
        result = Math.round(result * factor) / factor;
    } while (result === exclude);
    return result;
} 
```

带小数的工作演示：http: [//jsfiddle.net/jfriend00/SjgaW/](http://jsfiddle.net/jfriend00/SjgaW/)

作为整数工作演示（具有排除值）：http: [//jsfiddle.net/jfriend00/GgkJv/](http://jsfiddle.net/jfriend00/GgkJv/)

变化：

1.  将局部变量更改`decimal`为与参数不同的名称，以便参数有效
2.  使用适当的范围缩放删除一个 while 循环
3.  更改为 do/while 因此条件在计算之后才进行测试
4.  用于`===`避免类型转换
5.  从真/假计算中删除乘法和三元运算符，因为比较已经返回真/假
6.  对不需要传递或依赖类型转换的参数进行更明确的检查`null`
7.  添加相关评论

# python - 我如何获得所有连接？

> ID：15594333
> 
> 赞同：1
> 
> 时间：2013-03-24T02:00:16.297
> 
> 标签：python, dictionary, python-3.x, pygame

我正在 pygame 中创建一个平台游戏，其中关卡相互连接。（一个级别是一个屏幕，您可以通过离开屏幕移动到下一个级别）。

我目前有它在离开屏幕后从文件中加载连接的关卡，但这显然很慢，因此我想预加载所有关卡。我想通过获取一个根级别，获取它连接到的所有级别，获取每个级别连接到的所有级别等等，直到我拥有所有级别。

我为此编写了这段代码，但它不起作用。很累的时候写的。谁能帮我这个？如有必要，我会回答任何进一步的问题。

```
def loadLinkedLevels(level, surface, ignoredIds = []):
    levels = {}

    for levelId in level.warps.values():
        if levelId and levelId not in ignoredIds:
            levels[levelId] = LevelBuilder.loadLevel(levelId, surface)

    return levels

def getBranchingLevels(levels, p):
    newLevels = True # Do-while

    while newLevels:
        for level in levels.values():
            newLevels = loadLinkedLevels(level, p.screen, levels.keys())

        levels.update(newLevels)

        return levels

def preloadLevels(rootLevel, p):
    levels = loadLinkedLevels(rootLevel, p.screen)
    newLevels = {}

    for level in levels.values():
        newLevels.update(loadLinkedLevels(level, p.screen, levels.keys()))

    levels.update(newLevels)

    levels.update(getBranchingLevels(levels, p))

    return levels 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:37:26.130

突出的错误在这里：

```
for level in levels.values():
    newLevels = loadLinkedLevels(level, p.screen, levels.keys())

levels.update(newLevels) 
```

`levels`仅`newLevels`在循环的最后一次更新。[（如果您在Python 调试器](http://docs.python.org/2/library/pdb.html)中单步执行此代码，您将能够轻松发现这一点。）

但总的来说，您的代码似乎太复杂了。您正在尝试搜索从根开始的级别图。那么为什么不使用简单的[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)算法呢？像这样：

```
from collections import deque

def load_all_levels(root, p):
    """Load all levels reachable from `root`.
    Return a dictionary mapping level id to level.
    """
    # Queue of levels that have been loaded but whose neighbours have not.
    q = deque([root])
    # Map from level id to level for all levels loaded so far.
    loaded = {root.id: root}
    while q:
        for level_id in q.popleft().warps.values():
            if level_id not in loaded:
                level = LevelBuilder.loadLevel(level_id, p.screen)
                loaded[level_id] = level
                q.append(level)
    return loaded 
```

# javascript - 如何让具有较低 z-index 的 HTML 元素接收到鼠标事件？

> ID：15594334
> 
> 赞同：0
> 
> 时间：2013-03-24T02:00:17.877
> 
> 标签：javascript, jquery, css

我正在用 JavaScript/JQuery 编写一个跳棋游戏。我有以下问题：我使用覆盖整个屏幕并具有 z-index：1 的画布显示黄色箭头。检查器是 z-index：0。

我想添加拖放检查器的可能性。我想使用[JQuery 的可拖动小部件](http://api.jqueryui.com/draggable/)使每个检查器都可拖动。但是，由于画布的 z-index 比跳棋高，跳棋不会收到鼠标事件。

尽管 z-index 较低，如何让检查器接收到鼠标事件？

![在此处输入图像描述](../Images/6e493dd7012c169721765d15b9543ba5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:04:43.637

如果您的画布不需要鼠标事件，请`pointer-events:none;`尝试一下。（[相关的问题](https://stackoverflow.com/questions/3680429/click-through-a-div-to-underlying-elements)）

# java - 改变方法中的变量

> ID：15594340
> 
> 赞同：-4
> 
> 时间：2013-03-24T02:00:56.950
> 
> 标签：java

```
private int myInt;

public var(int a)
myInt = a;

var x = new var(1)
var y = new var(5)
var z = y;
x = increment(y)     // where the increment method increments y by 1. 
```

如果增量方法改变了 y 的值，那么 z 的值是否也改变了？在我的书中，当 y 被改变时，z 也被改变了，但是，如果在调用 increment 方法之前 z 已经分配给 y 怎么可能呢？我也不明白为什么 x 在方法之后分配了任何东西。我认为方法的范围保持在方法之内；因此在 increment(y) 退出后，x 的值保持不变。

如果我错了，请纠正我，因为我对编程相当陌生。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:03:20.103

> 如果增量方法改变了 y 的值，那么 z 的值是否也改变了？

这取决于`y`更改的方式：如果方法分配`y`了新值，则`z`保持不变，因为 Java 中的参数是按值传递的，包括对象引用。另一方面，如果方法改变了对象的`int` *内部*`var`，那么`int`内部`z`也会改变，因为它与`y`.

`x`另一方面，将更改为`increment`方法返回的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:07:57.620

在方法内部声明的变量，具有方法范围。您需要了解类和对象的概念。当您执行 var x = new var(1) 时，您从 var 类创建了一个对象，而 x 只是对该对象的引用。与 y 相同，当您将 y 分配给 z 时，您实际上是在使 z 引用 y 所引用的同一对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:02:55.930

`z`将保持不变。这是因为程序按顺序运行。`y`分配给之后的`z`任何更改`y`都不会影响`z`。

至于`x`它将等于增量（y）返回的任何内容。

# xml - 以下 XPath 片段的含义是什么？

> ID：15594345
> 
> 赞同：-1
> 
> 时间：2013-03-24T02:01:48.730
> 
> 标签：xml, xpath, xquery

我正在阅读一个项目的规范/文档，它说：

**您可以关注以下 XPath 片段： p::= A | * | p/p | p//p | p[q]**

**p :: = A**是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:06:00.210

我认为它得到的是在这种情况下指定 XPath 的一个子集。

```
p ::= ... 
```

就是BNF，要说`p`是由下面的语法定义的。

我假设`A`并且`q`定义类似，尽管您没有给出上下文。我猜`A`是一个元素名称，并且`q`是一个布尔表达式（但是它是定义的）。

可以说支持的 XPath 子集如下：

*   元素名称 ( `A`)
*   `*`
*   `p/p`用 / 运算符 ( )连接的两个表达式
*   用 // 运算符 ( `p//p`)连接的两个表达式
*   带有受支持谓词 ( `p[q]`)的表达式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:59:56.620

**提供的表达式**：

```
A | * | p/p | p//p | p[q] 
```

是由各个子表达式选择的节点的*并集。*

它选择任何命名`A`的子元素加上任何子元素加上作为当前（初始上下文）节点的子元素的子元素`p`的子元素，以及作为当前（初始上下文）节点的子元素的后代的任何元素节点，加上任何有子节点的子节点（当前节点的）。`p``p``p``p``q`

**它相当于较短的**：

```
 * | p//p 
```

**问的具体问题**：

> 是什么意思`p :: = A`？

XPath 表达式

```
A 
```

选择当前节点的所有名为 的子元素`A`。

# c# - 将引用添加到 Visual Web 2012 时出错

> ID：15594348
> 
> 赞同：0
> 
> 时间：2013-03-24T02:02:30.133
> 
> 标签：c#, entity-framework, visual-web-developer

我有以下错误，我不知道如何解决它。我无法添加实体框架，如果我退出它，我将无法使用它。它说**System.ComponentModel.DataAnnotations.DataBaseGeneratedAttribute 存在于 System.Data.Entity** 这里的图像 ![在此处输入图像描述](../Images/f64a95d83924e9a253d3f024549bbda9.png)

因此我不能用实体创建任何项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:04:41.250

听起来您正在使用为旧版本的 .Net 构建的 EntityFramework.dll。

删除对 Entity Framework 的所有引用并从 NuGet 重新安装它。

# python - 为什么 0 % 5 返回 0？

> ID：15594352
> 
> 赞同：-3
> 
> 时间：2013-03-24T02:03:05.790
> 
> 标签：python

我现在正在打乒乓球，我希望球每击打 5 次就加速一次，但是当我跑动时，球只是开始向起始方向加速。

它在没有加速球的情况下运行良好，所以问题不是以前的代码。

当试图实现这一点时，我在我的 Ball 类中创建了一个变量，`self.num_hits`并将其初始设置为 0。然后在我的游戏循环中，每次球碰撞时，我都会增加`ball.num_hits`并反转它的 x_speed。

```
collide_list = pygame.sprite.spritecollide(ball, players, False)
if collide_list != []:
    ball.x_speed *= -1
    hit.play()
    ball.num_hits += 1 
```

在 Ball() 类中：

```
if self.num_hits % 5 == 0:
        if self.x_speed > 0:
            self.x_speed += 2
        else:
            self.x_speed -= 2 
```

但这使球的速度偏离了它的起始速度，所以我检查了`self.num_hits % 5`返回的内容，它总是返回 0。我一直认为`0 % number = number`，所以我的问题是为什么 0 % 5 返回 0？如果我无法解决 0 % 5 的问题，还有其他方法可以让球每 5 次击球加速一次吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T02:18:18.373

定义除法以使以下始终为真

> *n* = *q* × *d* + *r*

在哪里

*   *n*是分子（或被除数），
*   *d* != 0 是分母（或除数），
*   *q*是商，并且
*   *r* > 0 是余数。

（这适用于正值和负值；如果*n*和*d*具有相同的符号，则*q为正，否则为负**。r*被定义为始终为正。）

 ***在 Python 中，`n/d == q`和`n % d == r`. 如果`n`为 0，则`q`也必须为 0，在这种情况下也`r`必须为 0——所有这些都与 的值无关`d`。

（题外话，但请注意，这也解决了除以 0 的问题：对于非零*d*，*q*和*r*是唯一确定的；对于*d* = 0，*任何**q*值都将满足*r = n*的方程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T02:05:49.623

为什么 0 % 5 返回 0？

因为：

零除以五是零，仍然是零。

```
0 % 5 = 0
12 % 5 = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:06:35.377

a % n 与 a - (n * int(a/n)) 相同。0/5 等于 0，因为 5 进入 0, 0 次。0 * 5 为 0。0 减 0 为 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T02:06:55.067

如果 self.num_hits / 5 == 0 试试：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T02:09:36.517

number_1 % number_2 =>是 number_1 除以 number_2 的余数

在 0 % any_number 情况下始终为 0。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-24T02:15:54.683

*0 % 5 = 0*
1 % 5 = 1
2 % 5 = 2
3 % 5 = 3
4 % 5 = 4
5 % 5 = 0
6 % 5 = 1
7 % 5 = 2
...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-24T03:02:35.117

我认为这是在小学教的，但这有一个简单的答案。% 为您提供除法问题的其余部分。如果你有（例如）`6 % 5`你会得到`1`，因为 5 进入 6 一次，并且`5 * 1 == 5`. `6-5 == 1`，这就是答案。这是`0%5`和 5 进入 0（令人震惊）零次。`5*0 == 0`, 和`0-0 == 0`. 所以，***

# xml - 计数当前值存在的次数

> ID：15594359
> 
> 赞同：1
> 
> 时间：2013-03-24T02:04:32.053
> 
> 标签：xml, xslt, xpath, count

输入：

```
<PackageInfo>
    <outerinfo>
        <myCompareInfo>12345</myCompareInfo>
    </outerInfo>
    <outerinfo>
        <myCompareInfo>67890</myCompareInfo>
        <containedInfo>12345</containedInfo>
    </outerInfo>
    <outerinfo>
        <myCompareInfo>55667</myCompareInfo>
        <containedInfo>12345-C</containedInfo>
    </outerInfo>
</PackageInfo> 
```

输出：

```
<OutputInfo>
    <Package>
        <PnNum>12345</PnNum>
        <Status>split</Status>
    </Package>
    <Package>
        <PnNum>67890</PnNum>
        <Status>avail</Status>
    </Package>
    <Package>
        <PnNum>55667</PnNum>
        <Status>avail</Status>
    </Package>          
</OutputInfo> 
```

我需要进行计数，但我无法弄清楚正确的语法。如果当前的 myCompareInfo 作为 containsInfo 值存在，则应拆分状态，否则状态为可用。我为 current 和 count 创建了变量，如果 count > 0 我将状态设置为 1，这似乎比需要的步骤多，更重要的是，2，它不起作用。

```
<xsl:variable name="currentVal" select="./myCompareInfo/text()" />
<xsl:variable name="splitCount" select="/count(OutputInfo[contains(@myCompareInfo,$currentSSCC)])" /> 
```

我做错了什么计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:38:53.047

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kContained" match="myCompareInfo"
      use="boolean(/*/*/containedInfo[contains(., current())])"/>

     <xsl:template match="/*">
      <OutputInfo><xsl:apply-templates/></OutputInfo>
     </xsl:template>

     <xsl:template match="outerInfo">
      <Package><xsl:apply-templates/></Package>
     </xsl:template>

     <xsl:template match="myCompareInfo">
      <PnNum><xsl:apply-templates/></PnNum>
      <Status>available</Status>
     </xsl:template>

     <xsl:template match=
     "myCompareInfo
              [count(.|key('kContained', 'true'))
              =
               count(key('kContained', 'true'))
              ]">
      <PnNum><xsl:apply-templates/></PnNum>
      <Status>split</Status>
     </xsl:template>
     <xsl:template match="containedInfo"/>
</xsl:stylesheet> 
```

**当应用于（更正为格式良好的）提供的 XML 文档时：**

```
<PackageInfo>
    <outerInfo>
        <myCompareInfo>12345</myCompareInfo>
    </outerInfo>
    <outerInfo>
        <myCompareInfo>67890</myCompareInfo>
        <containedInfo>12345</containedInfo>
    </outerInfo>
    <outerInfo>
        <myCompareInfo>55667</myCompareInfo>
        <containedInfo>12345-C</containedInfo>
    </outerInfo>
</PackageInfo> 
```

**产生想要的正确结果：**

```
<OutputInfo>
   <Package>
      <PnNum>12345</PnNum>
      <Status>split</Status>
   </Package>
   <Package>
      <PnNum>67890</PnNum>
      <Status>available</Status>
   </Package>
   <Package>
      <PnNum>55667</PnNum>
      <Status>available</Status>
   </Package>
</OutputInfo> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kContained" match="myCompareInfo"
  use="boolean(/*/*/containedInfo[contains(., current())])"/>

 <xsl:template match="/*">
  <OutputInfo><xsl:apply-templates/></OutputInfo>
 </xsl:template>

 <xsl:template match="myCompareInfo">
  <PnNum><xsl:apply-templates/></PnNum>
  <Status>available</Status>
 </xsl:template>

 <xsl:template match=
 "myCompareInfo[. intersect key('kContained', true())]">
  <PnNum><xsl:apply-templates/></PnNum>
  <Status>split</Status>
 </xsl:template>

 <xsl:template match="outerInfo">
  <Package><xsl:apply-templates/></Package>
 </xsl:template>
 <xsl:template match="containedInfo"/>
</xsl:stylesheet> 
```

# php - WordPress：尝试上传图片，media_handle_upload() 不起作用

> ID：15594363
> 
> 赞同：3
> 
> 时间：2013-03-24T02:04:55.527
> 
> 标签：php, image, wordpress, forms, file-upload

尝试制作一个表格以将图像上传到 Wordpress，然后将该图像设置为帖子的缩略图。但我似乎无法让 media_handle_upload() 函数正常工作。

表单的文件输入

```
 <input type="file" name="image" /> 
```

那么这是服务器端代码

```
media_handle_upload( $_FILES['image'], 22 ); 
```

这就是我得到的回报

```
object(WP_Error)#212 (2) { ["errors"]=> array(1) { ["upload_error"]=> array(1) { [0]=> string(212) "File is empty...." } } ["error_data"]=> array(0) { } } 
```

我已经尝试了几种不同的方法来输入文件变量，但似乎没有一种工作，我这样做是从，$file_id 到底是什么；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T04:53:02.283

查看[`documentation`](https://developer.wordpress.org/reference/functions/media_handle_upload/)for `media_handle_upload()`，第一个参数应该是`$_FILES`数组中文件的索引名称，因此在您的情况下，它应该如下所示：

```
media_handle_upload('image', 22); 
```

# c# - 具有多个文件的流式阅读器

> ID：15594365
> 
> 赞同：1
> 
> 时间：2013-03-24T02:05:05.857
> 
> 标签：c#, streamreader

我似乎无法在整个网络中找到与此特定场景相关的任何问题/解决方案，所以我想我会详细介绍我使用 StreamReader 类型要实现的目标。

基本上我有2个行数不平衡的文件，即data1.txt包含20行，而data2.txt包含10行，所以我使用StreamReader首先从两个.txt文件中读取数据，我想我可以使用while (((ts.transaction = t.ReadLine()) !=null)||((ms.master = t.ReadLine()) !=null)) 从两个文件中读取总行数，然后我可以继续应用额外的逻辑，将我的数据合并到第三个文件中。

但是，当我在下面运行以下命令时，我遇到了“对象引用未设置为对象的实例”，可能是因为行数不平衡？当我替换“||”时它似乎有效 在带有“&&”的while语句中，但是我无法打印两个文件的总行数。

目前我只是将文本附加到richTextBox1，以便暂时测试我的数据输出。我在看是否有更好的方法可以使用 OR 子句，或者我是否会以正确的方式处理这个问题？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    //Read Transaction File
    private void button1_Click(object sender, EventArgs e)
    {
        richTextBox1.Clear();
        StreamReader t = new StreamReader(@"c:\data1.txt");
        StreamReader m = new StreamReader(@"c:\data2.txt");

        transaction_storage ts = new transaction_storage();
        master_storage ms = new master_storage();

        while (((ts.transaction = t.ReadLine()) !=null)||((ms.master = t.ReadLine()) !=null))
        //while ((ts.transaction = t.ReadLine()) != null)
        {
            ms.m_index = Convert.ToInt32(ms.master.Substring(0, 2));

            ts.t_index = Convert.ToInt32(ts.transaction.Substring(0, 2));
            ts.t_name = ts.transaction.Substring(2, 10);
            ts.t_item = ts.transaction.Substring(10, 17);
            ts.t_amount = Convert.ToDouble(ts.transaction.Substring(ts.transaction.Length -7, 7));
            string transaction_data = (ts.t_index.ToString() + " " + ts.t_name + " " + ts.t_item + " " + ts.t_amount + "\n");
            string master_data = (ms.m_index.ToString());

            richTextBox1.AppendText(transaction_data);
            richTextBox1.AppendText(master_data);
        }

        t.Close();
        m.Close();

    }

    class master_storage
    {
        public int m_index;
        public string master;
    }

    class transaction_storage
    {

        public int t_index;
        public string t_name;
        public string t_item;
        public double t_amount;
        public string transaction;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:11:06.447

只需先读取两个文件，然后使用简单的 for 循环执行逻辑：

```
var linesOfFile1 = File.ReadAllLines(@"c:\data1.txt");
var linesOfFile2 = File.ReadAllLines(@"c:\data2.txt");

for(int i = 0; i < Math.Min(linesOfFile1.Length, linesOfFile2.Length); i++) {
  //...
} 
```

# ruby - 我应该从在前置过滤器中调用的辅助方法返回什么？

> ID：15594366
> 
> 赞同：0
> 
> 时间：2013-03-24T02:05:09.433
> 
> 标签：ruby, ruby-on-rails-3, before-filter

我正在尝试保护某些操作不被未经授权的用户访问。

这是我的控制器的一个小例子：

```
class RestaurantsController < ApplicationController
  before_filter :require_admin, :only => [:new, :create, :update, :edit, :destroy]

    #...yada yada yada...
end 
```

在我的 ApplicationController 中（因为我需要保护许多控制器中的相同操作）我放置了辅助方法，所以我不再重复自己。

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  private
  def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
  end

  def require_admin
    ???
  end
  helper_method :current_user
end 
```

我应该从我的 require_admin 方法返回什么，以便：

1.  `current_user`如果不是管理员，则阻止流量。
2.  `current_user`如果是管理员，则允许常规流程。

另外，我需要放置`require_admin`一个`helper_method`吗？

我知道如何处理这个`is admin?`位，我只需要知道从我的过滤器调用的辅助方法返回什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:32:06.510

如果有人试图访问他们无权查看的页面，我更愿意引发 404 错误。

```
 def require_admin!
    raise ActiveRecord::RecordNotFound unless authenticate_user! && current_user.is_admin?
  end 
```

以上假设您有一个 authenticate_user！如果您使用设计，您将拥有的方法。如果你不使用设计，我会创建一个类似于我上面显示的 require admin 的一个除非 current_user 条件。

添加 is_admin? 方法到您的用户/管理员类

所有控制器都继承自应用程序控制器，因此您不需要将其设为辅助方法。

# php - Wordpress 似乎无法返回 costum-post-type 的存档

> ID：15594375
> 
> 赞同：0
> 
> 时间：2013-03-24T02:06:44.790
> 
> 标签：php, wordpress, archive, custom-post-type

这让我整天发疯，不知道我做错了什么，但也许你的一只敏锐的眼睛会抓住它......

基本上，我有来自我想要存档的自定义帖子类型（'eac_english'）的帖子。使用 WP 模板层次结构指南，创建一个名为“archive-eac_english.php”的文档应该可以解决这个问题，但是当我将我的代码添加到这个文档时，它不会调用定义的帖子。相反，它只是返回一个空白页。

这是我的 funtion.php 代码：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'eac_english',
        array(
            'labels' => array(
                'name' => __( 'English' ),
                'singular_name' => __( 'English' )
            ),
            'supports' => array( 'title', 'editor', 'comments', 'excerpt', 'custom-fields', 'thumbnail' ),
            'taxonomies' => array('category'),
            'public' => true,
            'has_archive' => true,
            'rewrite' => array('slug' => 'en'),
        )
    ); 
```

然后，在标记为 archive-eac_english.php 的文档中，我有以下内容：

```
<?php
    $the_query = new WP_Query( array( 
  'post_type' => 'eac_english',
  'orderby' => 'date',
  'category_name' => 'past-featured-artist', //name of category by slug
  'order' => 'DESC',
  'posts_per_page' => 12)); // how many posts to show
    $x = 0;

    while ( $the_query->have_posts() ) :
   $the_query->the_post(); ?>
            <div class="home_post_box">
                <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('grid-image'); ?></a>
                <a href="<?php the_permalink(); ?>" class="home_post_text"><h3><?php the_title(); ?></h3></a>
            </div><!--//home_post_box-->  

    <?php $x++; ?>
    <?php endwhile; ?>

    <?php wp_reset_query(); ?> 
```

我有一个“eac_english”帖子，其类别定义为“past-featuerd-artist”，但是当我访问该页面“url/category/past-featured-artist/”时，没有返回任何内容。

现在，如果我将“archive-eac_english.php”中的所有代码添加到“archive.php”中，它就没有问题，但显然这并没有让我选择只调用“eac_english”下组织的帖子。

这里的任何帮助将不胜感激！干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:16:33.060

刚刚意识到我将存档页面称为“archive-eac_english”，然后将其更改为“category-past-featured-artist”，一切顺利。

# google-app-engine - 类不会转换为 JS GWT

> ID：15594380
> 
> 赞同：0
> 
> 时间：2013-03-24T02:07:42.433
> 
> 标签：google-app-engine, gwt

当我启动项目时，它启动得很好但是当我尝试更改按钮名称并保存时。它没有改变浏览器上的值任何想法为什么会发生这种情况？这是缓存问题还是什么？*提示我正在使用`Google App Engine`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:25:41.223

发现问题是当我尝试加载另一个页面时我忘记分配这个参数

```
?gwt.codesvr=127.0.0.1:9997 
```

负责同步任何更改的 gwt 端口

# python - 这是在python中修剪标点符号的正确/有效方法吗？

> ID：15594382
> 
> 赞同：1
> 
> 时间：2013-03-24T02:07:53.460
> 
> 标签：python, string

我有一组非常大的文件，我正在迭代以计算所有单词。我计算的单词中可以有标点符号，例如“hyper-speed”或“12:30”，但如果标点符号位于单词的末尾，则应该修剪。示例（“吓人！”=>“吓人”，“rip-”=>“rip”）。这是我的算法。传递给此函数的所有内容都是小写的。

```
def cleanWord(word):
   if len(word) <= 2:
        return word
    if word[0] in string.punctuation:
        return cleanWord(word[1:])
    if word[-1] in string.punctuation:
        return cleanWord(word[:-2])
    return word 
```

有时我的计数会以尴尬的方式修剪单词（例如“philidelphi”或“organiz”），我想知道这是因为在如此大的数据集中存在一些拼写错误还是我的算法有缺陷？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T02:09:33.937

```
>>> from string import punctuation
>>> word = "-scary!"
>>> word.strip(punctuation)
'scary' 
```

正如@hughdbrown 所指出的，还有仅分别从左侧和右侧剥离的`lstrip`和`rstrip`替代方案。

# c# - 在 SQL Server 中存储依赖关系图并在 NHibernate/C# 中创建相应的图对象

> ID：15594383
> 
> 赞同：0
> 
> 时间：2013-03-24T02:07:54.240
> 
> 标签：c#, sql-server, sql-server-2008, nhibernate

我基本上有 4 天的时间来获得基本工作水平的东西，这意味着获得在 NHibernate 中创建的图形网络对象。没有什么是完美的，只有可以通过 HNibernate Graph 对象（模型）搜索的东西。

也就是说，我们在 web 表单上有数据字段（本质上是我的对象图中的节点），当一个 fieldK 被更新时，其他字段（FieldB、FieldT 等）会受到影响（取决于那个 fieldK）和由于更新 fieldK，还需要在返回中更新。这只是一个例子，fieldK。

我们更新的这个 fieldK 也可能在其他字段“树”中（我认为在这种情况下是 Graphs）。因此，如果我们更新 FieldA，我们需要进行搜索以查看 FieldA 在哪些其他图中并找到它，然后遍历其子节点并更新这些子节点字段。

所以你基本上有一个图网络类型的结构。

我被要求a）将它存储在数据库中......在这种情况下是SQL Server 2008和b）创建一个NHibernate对象来表示图形，以便我们可以使用它并双向搜索和遍历节点（上下 x 树）并找到 FieldA 并做我们需要做的事情，例如更新它的依赖字段。

所以我的第一个想法是：

1）创建一个包含树结构的表，例如：

表：DataFieldTrees

```
DataFieldTreeID     DataFieldID      ParentDataFieldID    Level
---------------     -----------      -----------------    -----
       0                 12                 NULL            0    (Tree1) 
       1                 232                 12             1
       2                 32                  12             1
       3                 100                 12             1
       4                 210                 100            3
       5                 500                 100            3
       6                 600                 32             4
       7                 800                 600            5
       8                 44                 NULL            0     (Tree2)
       9                 400                 44             1
       10                55                  44             1
       11                111                 55             2
       12                211                 55             2
       13                600                 111            3
       14                43                  600            4
       15                15                  600            5

   ....more trees and so on 
```

请注意，例如，在两棵树中都找到了 600 和 100 个节点。

现在我想好了，我需要一些方法将在多棵树中找到的那些节点与它们的 RootTreeID 联系起来，所以我想出了这个桥接表：

表：DataFieldRootDataField

RootFieldID 是第一个表中作为树根的字段（带有 NULL 的行）

```
DataFieldID   RootDataFieldID
-----------   --------------- 
    100             0
    100             8
    600             0
    600             8 
```

认为这可以让我快速找出某个节点在哪些树中以进行查找

最后，为了修复图表并使其成为图表，我创建了一个表格来将图表（树）链接在一起（将它们关联起来）：

表：DataFieldTreeRelation

```
RootDataFieldID    DataFieldTreeID    RelatedDataFieldTreeID
---------------    ---------------    ----------------------
      8                   800                 15          
... 
```

所以这会将第一棵树链接到第二棵树（因为第一棵树中的节点 800 连接到节点 15）。

我知道当我认为这些树是一组“图表”时我会称它们为“图表”，但我对这一切都很陌生，并且在开始思考如何做到这一点时试图阐明要求和我的想法。

然后是在 C# 中创建并将其解析为 NHibernate Network Graph 对象的整个其他问题......然后我必须确定检索这些东西的最佳方法（创建节点的linkedLists，谁知道在 C# 中基于我拉从这些表中......还不知道我将如何做到这一点并形成一个我们可以搜索的对象）

我要么走了，要么对如何去做有一些体面的想法，但不确定我是否接近正确地思考人们如何处理这个问题......

在这里需要一些帮助和/或指导或保证我的想法是有意义的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:00:08.353

Sql server 2008 有一个名为“hierarchy-id”的数据类型。这基本上允许您表示一个字段并对分层对象执行查询

**数据类型： http:** [//msdn.microsoft.com/en-in/library/bb677173 (v=sql.105).aspx](http://msdn.microsoft.com/en-in/library/bb677173(v=sql.105).aspx)

从 msdn 页面引用如何使用这种数据类型：

*   组织结构

*   一个文件系统

*   项目中的一组任务

*   语言术语的分类

*   网页之间的链接图

此外，此链接可能有用： **How to Model Your Data Hierarchies With SQL Server 2008** [http://msdn.microsoft.com/en-us/magazine/cc794278.aspx](http://msdn.microsoft.com/en-us/magazine/cc794278.aspx)

# node.js - 有什么办法可以在翡翠中使用 if/else 块？

> ID：15594385
> 
> 赞同：3
> 
> 时间：2013-03-24T02:08:01.620
> 
> 标签：node.js, express, pug

我正在尝试在 Express 中制作一个粗略的店面应用程序，并尝试对其进行设置，以便如果有人登录，因此用户名不是“未定义”，它会显示一个块，如果你已注销它显示另一个。

这是我的`layout.jade`文件：

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
      h1.main= title
        body
          - if (typeof(username) !== 'undefined') {
            block items
          -}
          - else {
            block content
          -} 
```

我的内容块内容。

```
extends layout

block content

  #content
    img#splash(src='images/ninja.png') 
```

我的物品被挡住了。

```
block items

     #items
       h1 Hello (username) 
```

当我登录时，我只看到页面标题（我的 layout.jade 文件内容），而不是 items.jade 文件的内容。

有人知道为什么是这样吗？我是 Express 的新手，无法解决：/

如果我做类似的事情。

```
- if (typeof(username) !== 'undefined') {
        p test
      -}
      - else {
        block content
      -} 
```

然后我可以在登录时看到文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T05:30:53.333

您的代码是正确的，但是您`username`在渲染玉文件时是否通过了。jam 由您的 express 服务器渲染以返回请求，如果在渲染发生时执行其他代码。

如果您在显示页面后登录（设置用户名）或注销，则该块将不会显示/更新。在您的应用程序中，您可以在渲染时传递用户名

```
res.render('layout', {locals:{title: 'Page title', username: "something"}});
//display block content
res.render('layout', {locals:{title: 'Page title'}});
//display block items 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T03:27:34.523

使用[underscore.Js](http://underscorejs.org/)更好的管理和映射 html 到 Jade，最好是函数

在文件配置中表达或连接

```
 app.use(function(req, res, next){
       res.locals._ = require('underscore');
       next();
    }); 
```

在 index.jade

```
 doctype 5
    html
      head
        title= title
        link(rel='stylesheet', href='/stylesheets/style.css')
          h1.main= title
            body
              if _.isUndefined( username )
              //- if _.isString( username ) or bla...
                block items
              else
                block content 
```

它好多了，你可以做有趣的事情！

# scala - 我如何获得 typeArguments？

> ID：15594394
> 
> 赞同：0
> 
> 时间：2013-03-24T02:09:13.157
> 
> 标签：scala, types

我`man.typeArguments`在一些 2.9.2 代码中使用，但收到一条`Manifest`已弃用的消息。我想出了如何使用`typeOf[T]`来访问该`<:<`方法，但我一生都无法弄清楚去哪里`typeArguments`了。

对于上下文，我正在编写一个`createParser[T: TypeTag]`方法。If `T`is a`List[X]`那么我通过链接`createParser[X]`. 或者这就是我想做的，无论如何。

任何人都知道我应该如何`X`从`T`（或`typeOf[T]`或`typeTag[T]`任何其他可想象的`T`-相邻概念中得到？

这是 2.9.2 中的代码：

```
 def getParser[T](implicit man: Manifest[T]): Parser[T] = {
    if (man <:< manifest[Stream[_]]) {
      val itemType = man.typeArguments(0)
      streamParser(itemType).asInstanceOf[Parser[T]]
    } else {
      parsers(man)().asInstanceOf[Parser[T]]
    }
  }

  def streamParser[T](implicit man: Manifest[T]): Parser[Stream[T]] = {
    val itemParser = getParser(man)
    (openParser("[") ~> repsep(itemParser, comma) <~ closeParser("]")) ^^ (_.toStream)
  } 
```

这是我在 2.10.1 中尝试的，但运气不佳：

```
 def getParser[T](implicit tag: TypeTag[T]): Parser[T] = {
    if (tag.tpe <:< typeOf[Stream[_]]) tag.tpe match {
      case TypeRef(_, _, List(itemType)) => streamParser(itemType).asInstanceOf[Parser[T]]
    } else {
      parsers(tag)().asInstanceOf[Parser[T]]
    }
  }

  def streamParser[T](implicit tag: TypeTag[T]): Parser[Stream[T]] = {
    val itemParser = getParser(tag)
    (openParser("[") ~> repsep(itemParser, comma) <~ closeParser("]")) ^^ (_.toStream)
  } 
```

问题是它说`itemType`是`Type`来自反射 API，但我不知道如何将它变成`TypeTag`适合发送到`streamParser`.

该`parsers`值实际上是从`TypeTag`s 到`Parser`s 的映射，将所有内容放入`getParser`方法中并匹配我要解析的事物的类型可能会更干净，但我对类型进行模式匹配的尝试似乎并没有工作至今。

我确信有一种简单的方法可以做到这一点——我想我只是陷入了一个新的实现和没有赶上它的文档之间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:10:12.830

在 2.10（甚至更多在 2.11）中，从类型和树中提取信息的方法是使用模式匹配，在这种情况下使用[`TypeRef`](http://www.scala-lang.org/api/current/index.html#scala.reflect.api.Types%24TypeRefExtractor)：

```
scala> typeOf[List[Int]] match { case TypeRef(_, _, args) => args }
res13: List[reflect.runtime.universe.Type] = List(Int)

scala> typeOf[Map[Int, String]] match { case TypeRef(_, _, args) => args }
res14: List[reflect.runtime.universe.Type] = List(Int, String)

scala> val TypeRef(_, _, args) = typeOf[List[Int]] // slightly shorter
args: List[reflect.runtime.universe.Type] = List(Int) 
```

# c++ - 在二叉搜索树中提取质量

> ID：15594400
> 
> 赞同：2
> 
> 时间：2013-03-24T02:10:45.160
> 
> 标签：c++, binary-tree, binary-search-tree

是否有有效的方法来查找比二叉搜索树中的元素少的所有元素的数量？我一直试图在 C++ 中找到一个过程或实现，但我一直没能找到。所以说你有：

```
 8
    /   \
   3     10
  / \      \
 1   6      14 
```

并且你想找到小于 10 的节点数，你可以得到 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:19:03.953

如果您知道给定节点下方有多少个节点（在恒定时间内），您可以简单地执行以下操作：

```
int BinarySearchTree::countLessThan(const Node *n, const T &value) const {
    if (n->value >= value) {
        // The value has to be in the left sub-tree, so continue searching there:
        if (n->left)
            return countLessThan(n->left, value);
        else
            return 0;
    } else {
        // The value has to be in the right sub-tree, so continue searching there
        // but include the whole left sub-tree and myself:
        int count = 1;
        if (n->left)
            count += n->left->count();
        if (n->right)
            count += countLessThan(n->right, value);
        return count;
    }
} 
```

在根节点上启动算法：

```
int BinarySearchTree::countLessThan(const T &value) const {
    countLessThan(root, value);
} 
```

一个活生生的例子可以在这里看到：http: [//ideone.com/JcpjeK](http://ideone.com/JcpjeK)

它在以下树上运行（我交换了 14 和 10，所以 10 可以是 14 的左孩子。这是因为我快速而肮脏的 BST 实现只允许右孩子在已经有左孩子的情况下）：

```
 8
    /   \
  3       14
 / \     /
1   6   10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:25:30.247

你可以这样做：

```
int res = countLessThan(root, value, 0); // res is your answer 
```

然后实现这个：

```
int BTree::countLessThan(node *currNode, int value, int count)
{            
        if(currNode->left != NULL)
                count = countLessThan(currNode->left, value, count);

        if(currNode->value >= value)
                return count;
        count++;

        if(currNode->right != NULL)
                count = countLessThan(currNode->right, value, count);

       return count;

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T02:12:04.810

1.  如果您正在使用`std::map`或`std::set`作为您的 BST，则可以将[`std::map::lower_bound`](http://www.cplusplus.com/reference/map/map/lower_bound)成员函数与以下内容结合使用[`std::distance`](http://www.cplusplus.com/reference/iterator/distance/)：

    ```
    auto count = std::distance(bst.begin(), bst.lower_bound(target)); 
    ```

2.  否则，您可以使用一个[`std::lower_bound`](http://www.cplusplus.com/reference/algorithm/lower_bound)函数，但它只对平面容器 ( `std::vector`) 是最佳的，因为它假定容器实现了随机访问迭代器。

    ```
    auto count = std::distance(
        bst.begin(), std::lower_bound(bst.begin(), bst.end(), target)); 
    ```

# ruby-on-rails - 如何阻止 Rails 进程接受新请求

> ID：15594405
> 
> 赞同：0
> 
> 时间：2013-03-24T02:11:21.543
> 
> 标签：ruby-on-rails, nginx, thin

假设我有一堆使用 Thin 运行的 Rails 进程，前面是 Nginx。我的应用程序使用 WebSockets。

我想通过升级 Rails 应用程序来启动新的瘦实例。告诉我的旧 Rails 进程停止接受 WebSocket 连接（以及正常的 http 请求），以便新进程接受 WebSocket 连接和 http 请求。关闭旧 Rails 进程上的 WebSocket 连接以强制客户端重新连接到新进程。然后最后关闭所有旧实例。

这可能吗？查看 Thin、Nginx 和 Rails 的文档，我找不到明显的方法来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:19:44.237

您正在描述 Unicorn 内置的功能，因此如果此功能对您很重要，Unicorn 可能更合适。

这里有一篇关于独角兽的好文章：[https ://github.com/blog/517-unicorn](https://github.com/blog/517-unicorn)

# scala - 如何解决方法选择中的歧义？

> ID：15594407
> 
> 赞同：3
> 
> 时间：2013-03-24T02:11:53.103
> 
> 标签：scala

为了尝试 Scala 2.10 中的新值类，我想我会`times`按照 Ruby 提供的方式向 Int 添加一个方法，以便轻松重复代码块几次。所以我写了这个：

```
object Test extends App {
  implicit class Int_times( val n:Int ) extends AnyVal {
    def times( f:    => Any ) { var i = n; while ( i>0 ) { f   ; i -= 1 } }  // A
    def times( f:Int => Any ) { var i = n; while ( i>0 ) { f(i); i -= 1 } }  // B
  }
  3 times   print(1)  ; println                                 // 111 ?
  3 times { print(_) }; println                                 // 321 ?
  var x = 0                ; 3 times { x += 1   }; println(x)   // 3   ?
  var s = new StringBuilder; 3 times { s += 'x' }; println(s)   // xxx ?
} 
```

如果您喜欢谜题，此时您可能会问自己上面的输出会产生什么。它不会*产生*我期望的输出（在上面的评论中）。

如您所见，有两种方法可以使要重复执行的代码可以使用索引或不使用索引。在我们进行 StringBuilder 测试之前，输出看起来不错：

```
111
321
3
java.lang.StringIndexOutOfBoundsException: String index out of range: 3 
```

我*部分*了解发生了什么，但我有一些问题。到目前为止我发现的是，虽然我认为这`3 times { s += 'x' }`会导致版本 A`times`被调用，但实际上版本 B 被调用了。实际上，如果我删除 B（并注释掉第二个测试），则会为最后一个测试调用 A 并且可以正常工作。

我猜这`{ s += 'x' }`是模棱两可的，可以解释为满足的代码块或*评估后结果*为 type`=> Any`的表达式。也就是说，返回 StringBuilder 本身，而 StringBuilder 有一个方法可以让你获取特定的字符。编译器进行后一种解释并在调用之前执行块中的代码*一次*，然后将结果（StringBuilder 本身）传递给，然后尝试对其进行索引三次。由于此时 StringBuilder 中只有一个字符，因此会导致异常。*`Int => Any``s += 'x'``apply( ix:Int )`*`times``times``sb.apply(3)`**

 **那么首先，有人可以确认/纠正/阐明上述内容吗？描述这一点的正确术语是什么？

其次，这里的适当修复是什么？我唯一想到的是通过重命名其中一种方法来避免歧义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:21:15.707

正确，`apply`scala 的[Stringbuilder](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.StringBuilder)上的方法返回索引处的字符。这会被调用，因为`Stringbuilder`可以转换`f:Int => Any`为例如以下将编译：

```
val s2: (Int => Any) = s += 'x' 
```

为了解决这个问题，我能想到的最好方法是显式键入匿名函数：

```
3 times { _:Any => s += 'x' }; 
```**

# batch-file - 总是用 /u 启动批处理文件？

> ID：15594414
> 
> 赞同：2
> 
> 时间：2013-03-24T02:13:00.957
> 
> 标签：batch-file, cmd

我最近读到`cmd.exe`以`/u`标志开头会导致它以 unicode 格式输出到文件，但是我将如何启动这样的批处理文件？澄清一下，我并不是说从已经运行的批处理文件中启动*其他*批处理文件，我的意思是单击一个批处理文件，它会自动运行`/u`? 由于使用 /u 启动批处理文件的目的是以 unicode 输出文件，因此我正在寻找一种方法来在代码中执行此操作或始终使用标志启动批处理文件，这是不可能的。另一种解决方案可能是您是否可以检测 /u 是否在代码中打开，在这种情况下，如果它关闭，我只能做`start /u this.bat`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:37:26.840

怎么样

```
start "UNICODE" cmd /u 
```

将该行放入批处理文件并将链接（甚至该批处理本身）添加到桌面。然后，您可以通过双击启动它。

**编辑：**和我的狗走了很长一段路后，我认为这对你没有帮助但也许这个有帮助：

```
if "%1" == "/unicode" goto begin
start "Unicode-Window" cmd /u /k "%~dpf0 /unicode %1 %2 %3 %4 %5 %6 %7 %8 %9"
exit 
:begin
shift

rem start of my batchfilever
echo %1 %2 %3 %4 %5 %6 %7 %8 %9 
```

想法是：我不知道这个窗口是否以 /u 开头，但我不在乎。我只是在一个新窗口中启动同一个文件 (%~dpf0)，它以 /u 开头并关闭当前窗口。当然，这意味着一个无循环的循环，我通过附加参数 /unicode 避免了这种循环。第二次运行检测到该参数（必须是第一个）并将其删除（移位）。只需将此“标题”（直到 rem 行）添加到您的批处理中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:23:55.953

如果要修改所有批处理文件的运行方式，则需要修改 windows 注册表。

将值更改为键 HKEY_CLASSES_ROOT\batfile\shell\open\command(Default) 从

```
"%1" %* 
```

到

```
"cmd /U /C %1" %* 
```

# shell - 多个文件到一个文件夹 shell 脚本

> ID：15594416
> 
> 赞同：0
> 
> 时间：2013-03-24T02:13:28.873
> 
> 标签：shell, file-io

我正在尝试编写一个脚本，将文件移动到基​​于文件名创建的文件夹中。每个文件有 2 个副本，名称完全相同，但文件扩展名不同。

例子

**前**

```
dir1 - one.txt one.rtf two.txt two.rtf other.txt other.rtf 
```

**后**

```
dir1 - one two other

dir1/one - one.txt one.rtf

dir1/two - two.txt two.rtf

dir1/other - other.txt other.rtf 
```

我以前将文件放在文件夹脚本中，但我不知道如何让它将多个文件放入 1 个文件夹中

继承人的文件到文件夹代码。

```
#!/bin/bash

dir="/home/user1/Desktop/f2f/"

for file in ${dir}/*
do
        mkdir -p "${file/./#}"
        mv "${file}" "${file/./#}/"
done 
```

无论如何，任何帮助将不胜感激，如果有帮助，命名约定和文件扩展名将始终相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:33:02.313

我不太确定原始脚本的目的是什么，因为您似乎为每个`<file>.<extension>`命名的文件夹生成了一个文件夹，`<filename>#<extension>`然后放置`<file>.<extension>`.

我猜你正在寻找的版本是这个：

```
for file in *
do
    mkdir -p ${file%.*}
    mv $file ${file%.*}/
done 
```

请务必使用带有单个（！）的不*贪婪*`%`变体，因为您只想从文件名中删除最后一个组件。

例如，想象一个名为`first.part.second.part.txt`您只想剥离的文件`.txt`。

给定 ( ) 之前的以下文件夹布局`find dir1`：

```
dir1/
dir1/two.txt
dir1/one.rtf
dir1/two.rtf
dir1/other.txt
dir1/other.rtf
dir1/one.txt 
```

这将导致后面的布局（`find dir1`再次）：

```
dir1
dir1/other
dir1/other/other.txt
dir1/one
dir1/one/one.rtf
dir1/one/one.txt
dir1/two
dir1/two/two.txt
dir1/two/two.rtf 
```

如果那是你要找的。

# git - GIT - git-add 错误（错误的文件号）

> ID：15594419
> 
> 赞同：4
> 
> 时间：2013-03-24T02:14:20.810
> 
> 标签：git, git-add

我正在使用 Git 创建备份系统。

我刚刚创建了目录并在上面初始化了 git。

```
git init 
```

当我尝试将未跟踪的文件添加到舞台时

```
git add -u *.pdf 
```

我收到此响应错误：

> sh.exe": /bin/git: 错误的文件号

作为附加信息，我有一个约 4500 个未跟踪文件的列表，如果我尝试逐个添加文件，我不会收到任何错误响应并且文件被发送到舞台。

有谁知道如何解决这个问题以及为什么会发生？我需要添加所有这些未跟踪的文件，但我不想以“猴子工作”的方式，一个一个地添加。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T02:31:56.733

您不想要“-u”，因为它只会添加您已经在跟踪的文件。之后，`git init`您还没有跟踪任何内容。从文档中：

> -u, --update：只匹配索引中已经跟踪的文件而不是工作树。这意味着它永远不会暂存新文件，但它将暂存已修改的跟踪文件的新内容，并且如果工作树中的相应文件已被删除，它将从索引中删除文件。

请改用`-A`（或`--all`）。

对于您的具体问题，当您编写“*.pdf”时，shell 会将其扩展为 4500 个文件。大量文件可能会溢出 shell 命令行输入缓冲区；这会导致错误。你可以做几件事：

```
git add -A               # adds everything at once 
```

或者

```
for file in *.pdf; do git add -A $file; done    # add files one by one 
```

这两个建议都将避免命令行问题；第一个是首选。

# regex - Django request.GET.get() 总是返回“无”

> ID：15594420
> 
> 赞同：2
> 
> 时间：2013-03-24T02:14:25.653
> 
> 标签：regex, django

我有一个网址：`http://localhost:8000/submit_workout/2/`

此 URL 是使用以下内容创建的：`r'^submit_workout/(?P<wr_id>\d+)/$'`

当提交该页面上的表单时，我正在尝试检索“wr_id”。

我正在尝试：`wr_id = request.GET.get('wr_id',None)`并且期待**wr_id=2**但不断收到**wr_id=None**返回。

有什么想法吗？我是编程/django 新手，非常感谢您的时间和专业知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:22:25.567

在 url 正则表达式中命名的 URL 参数可以作为参数传递给处理请求的方法。如果您的调度员看起来像这样：

```
urlpatterns = patterns('',
    (r'^submit_workout/(?P<wr_id>\d+)/$', 'submit_workout'), 
```

那么你的方法应该是这样的：

```
def submit_workout(request, wr_id): 
```

并且`wr_id`可以直接访问。

如果你想`wr_id`成为一个 GET 变量，那么你的 url 应该是这样的：

```
http://localhost:8000/submit_workout?wr_id=2 
```

# jquery - 即使在父级调整大小后，也使子级 div 与父级具有相同的高度

> ID：15594421
> 
> 赞同：0
> 
> 时间：2013-03-24T02:14:25.783
> 
> 标签：jquery, height, autoresize

所以我有我正在构建的这个东西，当用户点击一个 li 元素时，它会打开一个与主父容器高度相同的弹出窗口。

```
<div class="tools">
   <ul>
      <li>
         <a>Click Me to Open Popup Window</a>
         <div class="popup">
             <header>Title Goes Here</header>
             <ul>
                List elements that clickable and close the popup.
             </ul>
         </div>
      </li>
   </ul>
</div> 
```

使用此代码，我的一切工作正常：

```
// this is the js that sets the height of the popup.
    var popHeight = $('.tools').height() - 23;
    $('.popup ul').css({'height': popHeight + 'px'});

// This is the js that reveals the popup.
    $('.tools ul li a').live('click', function(){
        $(this).parent().find('.popup').addClass('reveal');
    }); 
```

基本思想是弹出窗口的 ul 必须与 .tools 容器的高度相同减去标题的高度。

现在，发生的唯一问题是高度 .tools 可以更改，因为元素是动态添加到其中的。因此，如果您已经打开过一次弹出窗口，那么 .tools div 的高度会发生变化，并且您再次单击打开弹出窗口，它的高度将与第一次相同，它不会调整为与第一次相同的高度.tools 的新高度。

那么我可以用 jquery 做什么，以便它在弹出之前重新检查 .tools 的高度，以便它始终是正确的高度？

谢谢！

- 编辑 -

我忘了包括在点击时显示弹出窗口的 js。所以我在上面添加了。发生的情况是弹出窗口在加载时被隐藏，然后当您单击 a 标签时，弹出窗口会添加 .reveal 类，然后使其显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:31:40.403

当您单击**<a>**时，它会触发**onclick 事件**。我认为您可以将您的 JQuery 代码绑定到此事件......类似于：

```
$('div.tools > ul > li > a').click(function(){  /* put your code here */  }); 
```

我没有在这里测试它，但我认为它可能会有所帮助。

# uiimagepickercontroller - 将 UIImagePickerController 添加到已经打开的 UIPopoverController

> ID：15594422
> 
> 赞同：0
> 
> 时间：2013-03-24T02:14:35.443
> 
> 标签：uiimagepickercontroller, uipopovercontroller

我有一个包含表格视图的弹出框，一旦选择了一行，我想然后推送 UIImagePickerController。

根据 Apple 网站上的文件，我只能在新的视图控制器中呈现它。如何在弹出窗口中呈现弹出窗口？还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:54:02.773

最简单的方法是创建一个委托并使用退出 unWind segue 或通过使用委托手动关闭弹出框来关闭 didSelectRowAtIndex 上的 tableview。然后呈现包含 UIImagePickerController 的 popOver。您也可以只使用委托来显示一个弹出框以及 tableview，尽管这可能看起来很混乱。

# node.js - 停止监听 node.js

> ID：15594423
> 
> 赞同：0
> 
> 时间：2013-03-24T02:14:58.367
> 
> 标签：node.js, command-line, terminal

当我做：

```
node server.js 
```

然后我的终端（osx）开始监听来自节点应用程序的错误和日志等消息。

1.  如何在不听的情况下启动节点？
2.  如何停止从 node.js 中以编程方式侦听？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:50:15.657

如果您使用 bash shell（类 Unix 操作系统如 OS X 上的典型默认值），您可以像这样启动它：

```
node server.js 2>&1 >/dev/null 
```

这将 STDERR 和 STDOUT 指向`/dev/null`.

如果您还想将进程置于后台以便您可以在 shell 中执行其他操作，请`&`在末尾添加：

```
node server.js 2>&1 >/dev/null & 
```

只需确保您知道如何将其带回前台（`fg`命令）和/或知道如何在您不再希望它运行时将其杀死。

# java - 线交叉矩形 - 如何找到交叉点？

> ID：15594424
> 
> 赞同：7
> 
> 时间：2013-03-24T02:15:00.960
> 
> 标签：java, gwt, math, vector, java-canvas

我在画布上画了一个矩形，从矩形中心到坐标空间中的某个随机点画了一条线。

现在，我想将线截断矩形内的长度，以便线从矩形边缘开始。

*我怎么能这样做？*

**例子**

*   矩形可以由 2 个点定义：`Pstart(1, 3)`,`Pend(3, 1)`
*   中心点可以计算为：`P(2, 2)`
*   现在从`P(2, 2)`到画线`Q(10, 2)`。

因为我知道矩形的宽度是 2，所以我可以告诉这条线从 . 开始`P(4, 2)`而不是`P(2, 2)`.

当点不平行于 XY 轴之一时，这会变得更加复杂。此外，矩形内的长度对于对角线将是不同的。

*如何计算线点相对于矩形中心和线终点的起始偏移量？*

可能我必须找到线穿过矩形的点，然后让线从交叉点开始。但是我怎么能得到这一点呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T03:10:58.267

老实说，我不懂数学，但是...

本质上，你有 5 行。原线和矩形的4条线。所以如果你把它分解成一个简单的线交叉点问题，它应该会变得更容易一些......

![在此处输入图像描述](../Images/27cfa2523fc0810ba3928d0a2286a86f.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.geom.Ellipse2D;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import java.awt.geom.Rectangle2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class IntersectPoint {

    public static void main(String[] args) {
        new IntersectPoint();
    }

    public IntersectPoint() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            int x = (int) (getWidth() * 0.2f);
            int y = (int) (getHeight() * 0.2f);
            int width = (int) (getWidth() * 0.6f);
            int height = (int) (getHeight() * 0.6f);

            int x1 = x;
            int y1 = 0;
            int x2 = x + width;
            int y2 = getHeight();

            Line2D line = new Line2D.Double(x1, y1, x2, y2);
            Rectangle2D rect = new Rectangle2D.Double(x, y, width, height);

            Graphics2D g2d = (Graphics2D) g.create();
            g2d.draw(rect);
            g2d.draw(line);

            g2d.setColor(Color.RED);
            Point2D[] ps = getIntersectionPoint(line, rect);
            for (Point2D p : ps) {
                if (p != null) {
                    g2d.fill(new Ellipse2D.Double(p.getX() - 4, p.getY() - 4, 8, 8));
                }
            }
            g2d.dispose();

        }

        public Point2D[] getIntersectionPoint(Line2D line, Rectangle2D rectangle) {

            Point2D[] p = new Point2D[4];

            // Top line
            p[0] = getIntersectionPoint(line,
                            new Line2D.Double(
                            rectangle.getX(),
                            rectangle.getY(),
                            rectangle.getX() + rectangle.getWidth(),
                            rectangle.getY()));
            // Bottom line
            p[1] = getIntersectionPoint(line,
                            new Line2D.Double(
                            rectangle.getX(),
                            rectangle.getY() + rectangle.getHeight(),
                            rectangle.getX() + rectangle.getWidth(),
                            rectangle.getY() + rectangle.getHeight()));
            // Left side...
            p[2] = getIntersectionPoint(line,
                            new Line2D.Double(
                            rectangle.getX(),
                            rectangle.getY(),
                            rectangle.getX(),
                            rectangle.getY() + rectangle.getHeight()));
            // Right side
            p[3] = getIntersectionPoint(line,
                            new Line2D.Double(
                            rectangle.getX() + rectangle.getWidth(),
                            rectangle.getY(),
                            rectangle.getX() + rectangle.getWidth(),
                            rectangle.getY() + rectangle.getHeight()));

            return p;

        }

        public Point2D getIntersectionPoint(Line2D lineA, Line2D lineB) {

            double x1 = lineA.getX1();
            double y1 = lineA.getY1();
            double x2 = lineA.getX2();
            double y2 = lineA.getY2();

            double x3 = lineB.getX1();
            double y3 = lineB.getY1();
            double x4 = lineB.getX2();
            double y4 = lineB.getY2();

            Point2D p = null;

            double d = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);
            if (d != 0) {
                double xi = ((x3 - x4) * (x1 * y2 - y1 * x2) - (x1 - x2) * (x3 * y4 - y3 * x4)) / d;
                double yi = ((y3 - y4) * (x1 * y2 - y1 * x2) - (y1 - y2) * (x3 * y4 - y3 * x4)) / d;

                p = new Point2D.Double(xi, yi);

            }
            return p;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T07:36:43.760

查看用于按矩形进行线剪裁的[Liang-Barsky 算法。](http://en.wikipedia.org/wiki/Liang%E2%80%93Barsky)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:30:52.457

矩形的顶点：a、b、c、d。表示每一个的 x 和 y 坐标，如 ax、ay 等。

线的端点：x，y

这条线跟随 y = mx + b，向上或向下，向右或向左。这会缩小您可能的矩形边缘以交叉到 2。

使用 y = mx + b 确定它与水平线相交的垂直坐标，以及它与垂直线相交的水平分量。其中只有一个实际上会在您的矩形上（即包含在矩形边缘之一内），或者它会在一个角处相交。

# search - 如何在 PDO 多词查询中使用通配符？

> ID：15594425
> 
> 赞同：1
> 
> 时间：2013-03-24T02:15:17.790
> 
> 标签：search, pdo, wildcard

我正在进行的项目需要多词搜索......就像搜索“Sprint Apple iPhone”的示例一样。如果这些单词中的任何一个与我的数据库中的一列匹配，则必须显示整行的内容。

我*相信*我现在已经从 SQL 注入中得到了保护，但可能是错误的。我现在要解决的主要问题是我一次只能搜索一个词，例如“Sprint”或“Apple”或“iPhone”，但如果我输入整个查询，则不会显示任何结果。

部分查询确实有效，例如“Sprin”或“Ap”或“iPho”……不知道我哪里出错了。我查看了 StackOverflow 上的几个示例，这些示例适用于单个单词查询，但找不到多个单词的解决方案。

任何帮助表示赞赏！

```
<font size="+3" face="Verdana">xxxx</font>
<br><br>
<form name="form" action="xxxx.php" method="get">
<input type="text" name="q" size="60" />
<input type="submit" name="Submit" value="Search">
</form>

<table>

<?

$var = $_GET['q'];

try {
$conn = new PDO('mysql:host=localhost;dbname=xxxx', $username, $password);
$stmt = $conn->prepare("SELECT * FROM phones WHERE carrier LIKE :search OR        
manufacturer LIKE :search OR model LIKE :search");
$stmt->execute(array('search' => "%$var%"));

$result = $stmt->fetchAll();

if ( count($result) ) {
foreach($result as $row) {
echo "<tr>";
echo "<td>" .$row['carrier']. "</td>";
echo "<td>" .$row['manufacturer']. "</td>";
echo "<td>" .$row['model']. "</td>";
echo "</tr>";    
}
} 
else {
echo "No results found.";
}
} 
catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:19:41.100

考虑构建查询后多词关键字的外观：

```
SELECT ... WHERE somefield LIKE '%apple iphone%'
                                  ^^^^^^^^^^^^ 
```

你不能简单地将一堆单词放入一个`LIKE`块中并期望它起作用。充其量，你必须做一些按摩：

```
... WHERE somefield LIKE '%apple%' AND somefield LIKE '%iphone%'
                           ^^^^^                        ^^^^^^ 
```

但这对于任何“长”查询字符串都会变得非常丑陋非常非常快。

为了更容易，您只需切换到[全文索引](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)：

```
... WHERE somefield MATCH(somefield) AGAINST ('apple iphone') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:57:07.203

我自己解决了这个问题，它实际上不是使用代码的解决方案，而是通过在最初将 Carrier、Manufacturer 和 Model 插入数据库时​​将它们自动组合到我的数据库中的 1 列中，然后匹配该 1 列针对用户提供的搜索查询。

# ruby-on-rails - 防止 Rails 中的重复关联记录

> ID：15594426
> 
> 赞同：1
> 
> 时间：2013-03-24T02:15:30.957
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, associations

我正在开发一个简单的应用程序，其中有这两个模型：

```
class Report < ActiveRecord::Base
  attr_accessible :comments, :user_attributes

  belongs_to :user

  accepts_nested_attributes_for :user
end 

class User < ActiveRecord::Base
  attr_accessible :username

  has_many :reports
end 
```

我也有这个 HAML 新报告视图：

```
= form_for @report do |f|
  .field
    = f.fields_for :user do |u|
      = u.label :username
      = u.text_field :username
  .field
    = f.label :comments
    = f.text_area :comments

  .action
   = f.submit "Submit report" 
```

表单发送此 JSON 参数：

```
{ user_attributes => { :username => "superuser" }, :comments => "Sample comment 1." } 
```

简单报表控制器处理记录报表和用户的创建。

```
def create
  @report = Report.new(params[:report])
  @report.save
end 
```

这成功地同时创建了一个报告和一个用户。如果我使用相同的用户名（超级用户）提交另一个报告，我需要做的是阻止创建另一个*用户。*在 Rails 模型或控制器中是否有一种简单的方法可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:19:23.457

您可以使用 reject_if 选项拒绝用户创建

```
accepts_nested_attributes_for :user, reject_if: Proc.new { |attributes| User.where(username: attributes['username']).first.present? } 
```

我会将其重构为：

```
accepts_nested_attributes_for :user, reject_if: :user_already_exists?

def user_already_exists?(attributes)
  User.where(username: attributes['username']).first.present?
end 
```

# javascript - 先发制人：如何避免 Node 中的深层回调层次结构？（使用快递）

> ID：15594427
> 
> 赞同：0
> 
> 时间：2013-03-24T02:15:33.503
> 
> 标签：javascript, node.js, callback, express

我刚刚开始尝试使用 node（使用 Express 构建一个带有 MySql 数据库的简单网站）。

我基本上已经使用 Express 提供的应用程序结构（这对于这个问题来说并不重要）。我有一个文件`routes/index.js`，它导出`index`每当对我的主页发出请求时都会被命中的函数。的内容`index.js`是：

```
var db = require('../db');                                                      

exports.index = function(req, res){                                             
    db.getConnection(function(err, connection) {                                
        connection.query('SELECT * FROM test_table', function (err, rows) {     
            var templateVariables = {                                           
                title: 'Index Page',                                            
                response: rows[0].text                                          
            };                                                                  
            res.render('index', templateVariables);                             
        });                                                                     
        connection.end();                                                                                     
    });                                                                                                       
}; 
```

这显然是一个非常初步和轻量级的示例，但是在`GET`索引页面的这个特定请求中，已经有一个 3 深度的回调函数集。每个 callbuck 必须存在于“父级”的回调中，因为它取决于结果（在顺序执行的语言/环境中，这将是显而易见且微不足道的）。

我的问题是，在构建更复杂且可能非常大的应用程序时，如何避免大量嵌套回调函数的问题？当您对逻辑有顺序依赖时，当然会出现这种情况。我知道 Node 的理念是异步的，但是当谈到等待来自数据库的数据并说我们正在运行 5 个单独的查询时，那又如何呢？我们是否只需将单个多语句查询编写为原子单元？虽然这个问题并不是数据库独有的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:28:15.617

由于您提到使用 Express，因此您可以使用 the`next()`作为回调的替代方案。

```
app.get('/',function first(req,res,next){
   res.write('Hello ');
   res.locals.user = req.user;
   next();
   //Execute next handler in queue
});

app.get('/',function second(req,res,next){
   res.write('World!');
   //Use res.locals.user
   res.end();
});

//response shows Hello World! 
```

路由处理程序使用额外的参数`next`并按照给定的顺序执行，直到其中一个返回响应。`next`根本不接受参数或错误作为参数。您可以设置要传递给下一个函数的变量`res.locals`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:51:22.467

这里有一个关于这个问题的很好的一般性讨论：http: [//callbackhell.com/](http://callbackhell.com/)

此外，许多人使用 Async 之类的模块来管理流控制问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:47:29.923

One way that I am fond of doing is like this...

```
exports.index = function(req, res) {
  var connection

  db.getConnection(gotConnection)

  function gotConnection(err, _c) {
    connection = _c                                
    connection.query('SELECT * FROM test_table', gotData)
  }

  function gotData(err, rows) { 
    connection.end();        
    var templateVariables = {                                           
      title: 'Index Page', 
      response: rows[0].text     
    }
    res.render('index', templateVariables);
  }
}); 
```

You should also always handle errors as well in your code, I'm assuming you left them out to make the code easier to read here.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T02:52:56.450

使用`Promise`or`Future`库，例如`Q`（在 npm 上可用）。

引用 Q 的自述文件，promises 可以让你改变这个：

```
step1(function (value1) {
    step2(value1, function(value2) {
        step3(value2, function(value3) {
            step4(value3, function(value4) {
                // Do something with value4
            });
        });
    });
}); 
```

进入这个：

```
Q.fcall(step1)
.then(step2)
.then(step3)
.then(step4)
.then(function (value4) {
    // Do something with value4
}, function (error) {
    // Handle any error from step1 through step4
})
.done(); 
```

我见过的所有其他回调地狱的解决方案都引入了似乎只是倒退的权衡。异步操作*不会*形成较大操作之间的自然逻辑边界，因此如果您分解函数或沿这些边界进行模块化，您将获得微分解代码。

# java - 从对象本身确定对象在数组中的索引

> ID：15594433
> 
> 赞同：3
> 
> 时间：2013-03-24T02:16:57.573
> 
> 标签：java, arrays

有没有办法让数组中的对象检测它们所在的插槽？如果我有一个对象数组，数组中的对象是否可以在没有明确告知的情况下检测到它所在的单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:23:34.713

不，不幸的是，数组在 Java 中的工作方式是数组只是“指向”一个对象。由于 Java 数组只存储引用（对对象），但任意数量的变量都可以引用同一个对象，因此 Object 不知道它在数组中的位置。实际上，可以从数组中的多个索引指向同一个对象！

考虑

```
Object o = new Object(); // The variable o has a "reference" to the Object in memory
Object[] arr = new Object[3]; // empty array to hold Object types
arr[0] = o; // the first index points to the Object we created above
arr[1] = o; // the second index points to that same object!
arr[2] = o; // still the same object! If we modified the original object (assuming it's not immutable) in any way, all the indices in this array would point to the modified object. 
```

希望这可以帮助！

迭代对象数组的最快（最容易编写）方法是

```
for (Object o : arr) {
    // do something to the local variable o, which you can think of as representing each object in your array
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:41:45.450

不，如果您需要这样做，您可能存在设计缺陷。为什么`Object`需要知道它出现在数组中的什么位置？如果索引对对象具有某种语义意义或感兴趣，那么对象应该有一个`int`包含该信息的字段。如果您尝试基于一个对象修改原始数组，那么您可能在某处有一个分解不良的类，例如，如果发生这样的事情：

```
class A {
    Object data[];
}

class B {
    remove(A a, Object instance) {
        // how to remove instance from a.data??
    }
} 
```

那么真的`B.remove`应该是一种方法，`A`因此首先可以访问`data`。等等。

此外，数组可能不是正确的数据结构。如果索引具有很多语义值，则 a`Map<Integer, Object>`可能更合适，尽管当索引连续`1..n`且数组不可变时，通常使用数组来表示这一点。在我的愚蠢示例中`remove`， a`List`会更合适。等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:49:37.667

尝试

```
 int i = Arrays.asList(arr).indexOf(obj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T03:07:59.150

正如@Aaron_H 所说，没有骰子。我会补充一点，您可以使用以下方法解决它：

```
public class Test {

    public static void main(String[] args) {
        ZenArray<IndexedString> z = new ZenArray(10);
        for (int i = 0; i < z.size(); i++) {
            z.set(i, new IndexedString("String " + i));
        }
        for (int i = 0; i < z.size(); i++) {
            System.out.println("I'm at index " + z.get(i).getIndex());
        }
    }
}

class ZenArray<T extends ZenArray.IndexedElement> {

    private Object [] a;

    interface IndexedElement {
        void setIndex(int i);
        int getIndex();
    }

    public ZenArray(int size) {
        a = new Object[size];
    }

    public void set(int i, T val) {
        val.setIndex(i);
        a[i] = val;
    }

    public T get(int i) {
        return (T)a[i];
    }

    public int size() {
        return a.length;
    }
}

// An example of an indexed element implementation.
class IndexedString implements ZenArray.IndexedElement {

    int i;
    String val;

    public IndexedString(String val) {
        this.val = val;
    }

    public String getVal() {
        return val;
    }

    @Override
    public void setIndex(int i) {
        this.i = i;
    }

    @Override
    public int getIndex() {
        return i;
    }    
} 
```

# c# - 无法从 c# 中看到托管 c++ dll 中的公共结构

> ID：15594434
> 
> 赞同：3
> 
> 时间：2013-03-24T02:17:08.583
> 
> 标签：c#, c++-cli

我有 ac# 应用程序。它引用了一个 c++-cli dll。在 c++ dll 的命名空间中，声明了一个公共结构：

```
namespace Wrapper {

  public struct maxs
  {
     public:
      char Name[255];
      int num;
  };
etc 
```

c++ dll中有一个函数，它返回一个指向结构指针的指针。

```
Wrapper::Maxs** Wrapper::Class1::CallMax(); 
```

C# 应用程序引用 c++ dll 并声明结构的实例（不安全代码）

```
 Wrapper.Class1 oMax = new Wrapper.Class1()
 Wrapper.Maxs** maxs; 
 maxs= oMax.CallMax();
 int num = oMax.m_num; 
```

然后我尝试像这样访问 maxs 的字段：

```
for(int i = 0; i < num; ++i)
 {
    name = maxs[i]->name;
  } 
```

但是，该“名称”字段在 c# intellisense 中不可见，并且无法编译。有趣的是我去看了c++元数据中结构的定义，结构是空白的..

```
using System;
using System.Runtime.CompilerServices;

namespaceWrapper
{
    [CLSCompliant(false)]
    [NativeCppClass]
    [UnsafeValueType]
    public struct Maxs
    {
    }
} 
```

这正常吗？那么问题来了：为什么c#看不到public struct Maxs的字段呢？为什么元数据信息显示一个空白结构？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T18:55:11.563

这是AFAIK的正确答案：

*因为它不是托管结构。您需要将其声明为公共值结构。– Hans Passant 3 月 24 日 2:33*

# ruby - Module.constants() 方法中的 [0..1] 是什么意思？

> ID：15594439
> 
> 赞同：0
> 
> 时间：2013-03-24T02:18:01.470
> 
> 标签：ruby

在下面的代码中

```
Module.constants[0..1]  # => [:object, :Module] 
```

[0..1] 在这里是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:33:22.097

`0..1`是一个范围。它是 Ruby 解析器创建[Range](http://www.ruby-doc.org/core-1.9.3/Range.html)对象的语法糖。你可以用范围做很多事情，包括简单的迭代：

```
irb(main):003:0> (1..3).class
=> Range
irb(main):004:0> (1..3).each {|x| puts x}
1
2
3
=> 1..3 
```

你可以把它变成一个`Array`，除其他外：

```
irb(main):005:0> (1..3).to_a
=> [1, 2, 3] 
```

当您使用 a`Range`作为`Array#[]`参数时，这意味着您想要索引在该范围内（包括）的所有元素：

```
irb(main):007:0> stuff = %w{a b c d e f}
=> ["a", "b", "c", "d", "e", "f"]
irb(main):008:0> range = 2..4
=> 2..4
irb(main):009:0> stuff[range]
=> ["c", "d", "e"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:26:46.290

`Module.constants`返回在类中定义（即命名空间）的所有常量的数组`Module`（是的，`Module`是一个类；参见`Module.class`）。说给我从第 0 到第 1 的数组的`[0..1]`每个元素。一般来说，如果`x`是一个数组，则`x[m..n]`返回`x`由第m个到第n个元素组成的子数组。例如：

```
x = [36, 25, 16, 9, 4]
x[1..3] # => [25, 16, 9] 
```

# java - 创建一个随机方法，将对象添加到具有随机索引的堆栈中

> ID：15594440
> 
> 赞同：0
> 
> 时间：2013-03-24T02:18:05.027
> 
> 标签：java, random, stack

这是小样本：

```
Stack<String> myStack = new Stack<String>();
myStack.add("Cat");
myStack.add("Dog");
myStack.add("Bird");
myStack.add("Elephant"); 
```

所以基本上`myStack`对象有4个字符串。我想`myStack`用 RANDOM 索引再插入 3 个字符串。通常，当我使用`myStack.add();`新输入放置一个新字符串时，将在顶部（索引 0）分配我不希望它在这种情况下。我希望它被随机放入随机索引中。解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:38:38.620

因为 Stack 是 Vector 的子类，你可以这样做

```
<E> void addRandom(Stack<E> stack, E e) {
    stack.add((int) (Math.random() * (stack.size() + 1)), e);
} 
```

或制作一个自定义类

```
class RandomStack<E> extends Stack<E> {

    void addRandom(E e) {
        add((int) (Math.random() * (size() + 1)), e);
    }
} 
```

# c# - 处理多个客户端

> ID：15594445
> 
> 赞同：-2
> 
> 时间：2013-03-24T02:18:33.787
> 
> 标签：c#

我正在编写一个处理服务器和客户端的应用程序。我不一定知道如何让服务器处理多个客户端，这就是我遇到问题的地方。现在服务器端只处理一个客户端。那么我该如何处理多个客户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:22:02.013

您可以保持 TcpListener 打开并接受多个连接。为了有效地处理多个连接，您需要对服务器代码进行多线程处理。

```
static void Main(string[] args)
{
    while (true)
    {

        Int32 port = 14000;
        IPAddress local = IPAddress.Parse("127.0.0.1");

        TcpListener serverSide = new TcpListener(local, port);
        serverSide.Start();
        Console.Write("Waiting for a connection with client... ");
        TcpClient clientSide = serverSide.AcceptTcpClient();
        Task.Factory.StartNew(HandleClient, clientSide);
    }
}

static void HandleClient(object state)
{
    TcpClient clientSide = state as TcpClient;
    if (clientSide == null)
        return;

    Console.WriteLine("Connected with Client");
    clientSide.Close();
} 
```

现在你可以做所有你需要做的处理，`HandleClient`而主循环将继续监听额外的连接。

# java - 使用 JOptionPane 图标和 Math.random 呈现随机图片

> ID：15594446
> 
> 赞同：1
> 
> 时间：2013-03-24T02:18:37.910
> 
> 标签：java, arrays, swing, joptionpane, imageicon

我正在上编程课，我必须让乐器“演奏”。我想使用 Math.random 创建一个介于 0-9 或 0-10 之间的随机数，并让该数字对应于通过 JOptionPane 图标显示的数组中的图片。我唯一的问题是，如何创建一个将随机 int 对应于图片的程序，然后使用 JOption Pane 呈现它。这是我到目前为止所拥有的：

```
 public static String Flute(String pickYourInstrument, String instrument){
      //try to assign variables to pictures in an array
      ImageIcon icon = new ImageIcon("/home/james/programmingpics/A_Flute");
      JOptionPane.showMessageDialog(null, "A Note", "A Note with Flute", 
      JOptionPane.OK_OPTION, icon);
      for (int i = 0; i < 1000; i++) {
           int random = 1 * (int) (Math.random() * 10);
           System.out.println(random);
      }
   } 
```

我被卡住了，在我意识到我不知道如何将 ImageIcon 图标制作成一个数组后我停下来（我还有其他九张图片要制作一个图标）。有谁知道我如何创建程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:21:32.937

只需创建一个ImageIcon数组，然后将得到的随机数作为该数组的索引，就可以得到对应的图标。像这样简单的东西

```
int randomNumber = //.... get random int
ImageIcon myIcon = iconArray[randomNumber]; 
```

# javascript - 使用 AJAX 请求检索 JSON 数据。我得到 [object Object] 是我的结果。

> ID：15594447
> 
> 赞同：0
> 
> 时间：2013-03-24T02:18:42.330
> 
> 标签：javascript, ajax

我有一个包含 JSON 类型消息的对象。我有一个名为 .retrieve() 的方法，它使用 AJAX 请求从服务器下载消息。它将从服务器获取消息，然后调用带有字符串数组（消息）的回调函数。

**。取回（）：**

```
Msg.retrieve = function(callBack) {
    $.ajax({
      url : '<url>',
      type : 'GET',
      dataType: 'JSON',
      contentType : 'application/json',
      data : JSON.stringify({
        key : 'value: ' 
      }),
      error : function(data) {
        console.log('error');
      },
      success : function(data) {
          callBack(data);
      }
    });
  } 
```

我有一个 .display() 方法，它将消息作为无序列表中的列表项输出，就像聊天客户端一样。

**。展示（）**

```
 Msg.display = function(text) { 
      if (typeof text == "undefined"){
        $('.chat').append('<li>' + "" + '</li>');
      } else {
        $('.chat').append('<li>' + text + '</li>');
      }
  } 
```

当我结合 .display() 和 .retrieve() 时，它会给我**[object Object]**作为浏览器中的列表项。

**问题：**如何输出消息而不是在浏览器上显示 [object Object]？

# c# - 是否可以在 Doxygen 中隐藏属性声明？

> ID：15594452
> 
> 赞同：0
> 
> 时间：2013-03-24T02:19:33.473
> 
> 标签：c#, doxygen

在 C# 中，我有一些静态只读属性，如下所示：

```
/// Provides the thingie.
public static readonly SomeClass Thingie = new SomeClass("Thingie Name"); 
```

在更大的班级内。Doxygen 在文档中生成一个静态公共属性部分（如预期的那样），其中包含一个`Thingie`我想要的条目。但是，它还包括声明，如下所示：

```
+--------------------------+-----------------------------------------+
|static readonly SomeClass | Thingie = new SomeClass("Thingie Name");|
|                          | Provides the thingie.                   |
+--------------------------+-----------------------------------------+ 
```

我只是想隐藏`= new SomeClass("Thingie Name");`一点。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:00:00.927

您可以在配置文件中设置`MAX_INITIALIZER_LINES`为`0`全局隐藏初始化程序。

您还可以使用`/** @cond */ thing to hide from doxygen /** @endcond */`在本地隐藏某些内容。

# python - 在python中对字符串进行排序不起作用

> ID：15594455
> 
> 赞同：2
> 
> 时间：2013-03-24T02:20:06.147
> 
> 标签：python, string, list, sorting, sorted

我正在尝试对`['a', '2%20q']`我希望看到的列表进行排序，`['2%20q', 'a']`但下面的代码会生成`['a', '2%20q']`（初始列表保持不变）

```
sorted(['a', '2%20q']) // output: ['a', '2%20q'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:24:05.553

`sorted(['a','2%20q'], key=lambda x: 0 if x == '2%20q' else 1)`

# java - Vector不断将行附加到自身而不是替换-java（表和数据库）

> ID：15594463
> 
> 赞同：1
> 
> 时间：2013-03-24T02:21:51.457
> 
> 标签：java, resultset

```
Vector vect = new Vector();
Vector vect_container = new Vector();
  for(int i=0;i<2;i++){
        rs.next();
        vect.addElement(rs.getInt("ID"));
        vect.addElement(rs.getString("Name"));
        vect.addElement(rs.getFloat("Price"));
        vect.addElement(rs.getDouble("Quantity"));
        vect.addElement(rs.getDate("datetime"));
        vect.addElement(rs.getString("person"));
        vect_container.add(vect);
    } 
```

我通过 获取数据库表中的行`ResultSet(rs)`，但向量正在附加所有行的结果（不是逐行）。输出是：

```
[
    [23424234, Congestal, 10.0, 3500.0, 2013-03-23,
     Ahmed Ali, 34535647, Decksafeen, 35.0, 2000.0, 2013-03-23, Osama ], 
    [23424234, Congestal, 10.0, 3500.0, 2013-03-23,
     Ahmed Ali, 34535647, Decksafeen, 35.0, 2000.0, 2013-03-23, Osama ]
] 
```

我相信第一个元素`vect_container`应该只包含第一行，第二个元素应该包含两行，依此类推。

但情况似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:25:01.267

您不断将相同的内容添加`Vector`到`vect_container`. 您需要在每次循环迭代中添加一个新的。

移动这一行：

```
Vector vect = new Vector(); 
```

在 rs.next() 调用之后：

```
rs.next();
Vector vect = new Vector(); 
```

此外，不以这种方式循环可能是安全的`ResultSet`。更惯用的方式是：

```
while(rs.next()) {
   Vector vect = new Vector();
   vect.addElement(rs.getInt("ID"));
   vect.addElement(rs.getString("Name"));
   vect.addElement(rs.getFloat("Price"));
   vect.addElement(rs.getDouble("Quantity"));
   vect.addElement(rs.getDate("datetime"));
   vect.addElement(rs.getString("person"));
   vect_container.add(vect);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:25:08.427

您不能继续将数据加载到同一个向量中。您需要为每一行创建一个 Vector：

```
//Vector vect = new Vector();
Vector vect_container = new Vector();
  for(int i=0;i<2;i++){
        rs.next();
        Vector vect = new Vector(); 
```

# java - 美味的应用程序在 Facebook SDK 3.0 中不起作用

> ID：15594464
> 
> 赞同：1
> 
> 时间：2013-03-24T02:21:57.690
> 
> 标签：java, android, facebook-android-sdk, facebook-authentication

我正在遵循`Facebook Developers`页面上的确切教程并安装`Scrumptious application`在随附的 android 手机上`Facebook Android SDK 3.0`。每当我将用户名和密码传递到 Facebook 登录页面时。我总是得到以下`NPE`。

> 奇怪的是，每当我在模拟器上运行相同的应用程序时，它都运行良好。
> 
> 而且，如果我尝试在手机上运行相同的应用程序但没有安装 Facebook 应用程序，那么 Scrumptious 应用程序可以正常工作。

我也尝试过使用其他 Facebook SDK 示例。他们中的大多数都因相同的 NPE 而失败。

```
java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=64206, result=0, data=null} to activity {com.facebook.scrumptious/com.facebook.LoginActivity}: java.lang.NullPointerException

02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread.deliverResults(ActivityThread.java:3182)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread.handleSendResult(ActivityThread.java:3225)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread.access$1100(ActivityThread.java:140)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1275)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.os.Handler.dispatchMessage(Handler.java:99)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.os.Looper.loop(Looper.java:137)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread.main(ActivityThread.java:4898)
02-02 12:49:25.520: E/AndroidRuntime(5219): at java.lang.reflect.Method.invokeNative(Native Method)
02-02 12:49:25.520: E/AndroidRuntime(5219): at java.lang.reflect.Method.invoke(Method.java:511)
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-02 12:49:25.520: E/AndroidRuntime(5219): at dalvik.system.NativeStart.main(Native Method)
02-02 12:49:25.520: E/AndroidRuntime(5219): Caused by: java.lang.NullPointerException
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.facebook.NativeProtocol.isServiceDisabledResult20121101(NativeProtocol.java:238)
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.facebook.AuthorizationClient$KatanaLoginDialogAuthHandler.onActivityResult(AuthorizationClient.java:587)
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.facebook.AuthorizationClient.onActivityResult(AuthorizationClient.java:142)
02-02 12:49:25.520: E/AndroidRuntime(5219): at com.facebook.LoginActivity.onActivityResult(LoginActivity.java:134)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.Activity.dispatchActivityResult(Activity.java:5390)
02-02 12:49:25.520: E/AndroidRuntime(5219): at android.app.ActivityThread.deliverResults(ActivityThread.java:3178)
02-02 12:49:25.520: E/AndroidRuntime(5219): ... 11 more 
```

还有这个错误-

```
03-23 19:08:28.820: E/AndroidRuntime(28599): java.lang.RuntimeException: Unable to stop activity {com.facebook.katana/com.facebook.katana.platform.PlatformWrapperActivity}: java.lang.NullPointerException 
```

我正在开发 Android SDK 3.0

有没有人在手机上尝试过 Facebook 示例示例而不是在模拟器上？如果有人能够在手机上运行示例示例，请告诉我。

任何帮助将不胜感激。谢谢您的帮助。

# npm - 如果 npm 坏了，我该如何升级 npm？

> ID：15594466
> 
> 赞同：0
> 
> 时间：2013-03-24T02:22:02.577
> 
> 标签：npm

我在 Ubuntu 12.04 上并通过自动脚本安装了 npm，它安装了 1.1.17。我现在在尝试通过 npm 安装任何东西时收到以下错误消息：“npm ERR！TypeError: Arguments to path.resolve must be strings” 我发现一个帖子说明我的问题的解决方案是升级到 1.2.15 但是我无法弄清楚如何做到这一点，因为通过 npm 更新会引发错误。如何在不使用 npm 的情况下更新 npm？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T03:27:21.447

我卸载节点并重新安装以解决此问题。

# ios - NSAttributedString '\n' 被忽略

> ID：15594467
> 
> 赞同：16
> 
> 时间：2013-03-24T02:22:24.977
> 
> 标签：ios, ios6, uitextview, nsattributedstring, end-of-line

我有一个视图，其唯一的 UI 元素是`UITextView`. 在`viewDidLoad:`我使用“Text\n”创建一个属性字符串并将文本视图的属性文本设置为：

```
NSAttributedString *string = [[NSAttributedString alloc] initWithString:@"Text\n"];  
[self.textView setAttributedText:string]; 
```

我的问题是，当我运行应用程序时，换行符被忽略了。

如果我使用 an`NSString`并且`setText:`不会发生。

```
NSString *string = [[NSString alloc] initWithString:@"Text\n"];  
[self.textView setText:string]; 
```

任何人都可以对正在发生的事情有所了解吗？我似乎在文档或其他方面找不到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-01T13:06:44.700

你可以使用这个：

```
 NSMutableAttributedString *cr = [[NSMutableAttributedString alloc] initWithString: @"\n"]; 
```

因此，如果您有两个 NSMutableAttributedString（string1 和 string2），您可以这样做：

```
[string1 appendAttributedString: cr];
[string1 appendAttributedString: string2]; 
```

这是可怕的，不优雅....但它的工作原理！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T02:25:00.877

我建议您使用：

```
[[NSAttributedString alloc] initWithHTML:[@"Text<BR />" dataUsingEncoding:NSUTF8StringEncoding] documentAttributes:NULL]; 
```

我一直在使用它，而且效果很好。我什至用它做了一个宏：

```
#define html2AttributedString(htmlString)                                                                   \
    [[[NSAttributedString alloc] initWithHTML:[(htmlString) dataUsingEncoding:NSUTF8StringEncoding]         \
    documentAttributes:NULL] autorelease] 
```

然后，您可以为颜色、对齐方式、字体等制作宏…</p>

简而言之，您只需`"\n"`将字符串中的所有内容替换为`<BR />`并使用上面提供的代码。对于更换部件，请使用：

```
[yourString stringByReplacingOccurrencesOfString:... withString:…]; 
```

对于 iOS，您可以查看他们为您提供替代品的[此页面](http://www.cocoanetics.com/2011/01/uiwebview-must-die/)。

> 我们的 initWithHTML 方法旨在完美匹配 Mac 版本的输出。这对于角色来说是可以实现的，并且我已经进行了单元测试，以确保它保持完美。关于属性，有很多事情必须在 iOS 上稍有不同才能实现相同的外观。我不会用那里的细节来打扰你。

# ios - 使用“double (^)(CGFloat)”类型的表达式初始化“CGFloat (^__strong)(CGFloat)”的不兼容块指针类型

> ID：15594470
> 
> 赞同：1
> 
> 时间：2013-03-24T02:22:35.963
> 
> 标签：ios, objective-c, objective-c-blocks, cgfloat

我正在尝试创建一个采用 CGFloat 参数并返回 CGFloat 的块变量。

```
CGFloat (^debt)(CGFloat) = ^(CGFloat myFloat) {
   return myFloat * 444563.4004;
}; 
```

这个定义有什么问题？为什么我会收到此警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:45:26.137

另一种可能的解决方案是使用具有显式返回类型的块：

```
CGFloat (^debt)(CGFloat) = ^CGFloat (CGFloat myFloat) {
    return myFloat * 444563.4004;
}; 
```

以避免编译器尝试从 return 语句中“猜测”返回类型。

比较“块编程主题”中[的创建块：](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW1)

> 如果你没有显式声明一个块表达式的返回值，它可以从块的内容中自动推断出来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T02:32:17.203

在 iOS（和其他 32 位平台）上，`CGFloat`是`float`.

您的文字 ( `444563.4004`) 是 a `double`，它提升`myFloat`为 a`double`并创建块的返回类型`double`（而不是`float`您在声明时所说的返回类型`debt`）。要么将文字更改为 a `float`（附加`f`到它的末尾），要么将其转换为`CGFloat`.

# mysql - 在 MySQL 表中使用 AM/PM 节省时间？

> ID：15594472
> 
> 赞同：0
> 
> 时间：2013-03-24T02:22:54.483
> 
> 标签：mysql, time, format

我的表有 7 列，我从 NetBeans 中的 jTextField 中抽出时间。它以 AM/PM 显示当前时间

```
bno         VARCHAR(45) PK  NN
bdate       DATE            NN
btime       TIME            NN
duedate     DATE            NN
memo        VARCHAR(100)    NN 
vcode       INT         FK  NN      
status      TINYINT         NN 
```

我想做的是在 btime 列中使用 AM/PM 节省时间，例如 01:30:23 PM。我怎样才能做到这一点？如何编写 INSERT 和 UPDATE 查询来保存和更新时间？

# matlab - 在 MATLAB 中对非常高维数据执行 PCA 的最快方法（princomp 太慢）

> ID：15594473
> 
> 赞同：1
> 
> 时间：2013-03-24T02:23:30.137
> 
> 标签：matlab, statistics, linear-algebra

我试图找到非常高维数据（~20,000）的主要成分。MATLAB 附带的`princomp`函数计算时间太长（约 10 秒）。我想知道是否有更快的方法来做到这一点。到目前为止，我一直在寻找`mex`这个算法的实现，但没有运气。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T10:51:53.143

尝试仅使用您要计算 PCA 的指令，例如：

```
[V E] = eig(cov(X));
[E S] = sort(diag(E),'descend');
V = V(:,S); 
```

# macos - 未找到 git-receive-pack

> ID：15594474
> 
> 赞同：3
> 
> 时间：2013-03-24T02:23:34.190
> 
> 标签：macos, git

我正在尝试在运行 osx 10.8.2 的 mac mini 上设置远程 git 服务器。我已经设置了 ssh，以便客户端可以连接到远程主机上的 git 帐户。当我尝试从一个客户端执行 git push origin master 时，出现以下错误：

> bash：git-receive-pack：找不到命令
> 
> 致命：无法从远程存储库中读取。

（我从另一个客户那里得到：

> bash：git-upload-pack：找不到命令

和致命错误。

我已确保已安装 git receive pack 和 git upload pack 并在客户端和主机的路径中。

我可以做些什么来修复或解决问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T03:33:37.490

通读[这篇文章](https://stackoverflow.com/questions/225291/git-upload-pack-command-not-found-how-to-fix-this-correctly?rq=1)帮助我弄清楚了如何解决这个问题。因为该线程假设了我没有的背景知识（以及其他新手可能没有的），所以我在这里总结并尝试简化答案。

Git push 显然是通过“非登录”帐户工作的，即没有密码的帐户。见[这里](https://superuser.com/questions/77617/how-can-i-create-a-non-login-user)。非登录 git 帐户的路径变量与普通登录​​帐户的路径*不同。*即使您登录到远程机器，输入 echo $PATH 仍然只会显示*您的*路径，*而不*是非登录帐户的路径。要查看非登录帐户的路径，您必须输入（来自客户端）：

> ssh you@remotemachine echo \$PATH

（反斜杠可以防止本地机器在 $PATH 变量到达远程机器之前拦截和扩展它。）这样做会返回非登录帐户的路径。就我而言，非登录帐户的默认路径不包括相关 git 文件的路径。一旦我添加了 git-upload &c 的路径，一切正常。正确的路径可以添加到远程计算机上非登录帐户的默认路径中，方法是“将其设置为 .bashrc（对于 Bash）、.zshenv（对于 Zsh）、.cshrc（对于 tcsh）或您的 shell 的等效项。 "

希望这可以帮助其他人解决这个问题。

# python - 让一个班级与另一个完全独立的班级互动？

> ID：15594478
> 
> 赞同：0
> 
> 时间：2013-03-24T02:24:01.397
> 
> 标签：python, class, inheritance

我有一个基类名称 Bot；Bot 通过另一个名为 IRC (d'oh) 的类启动与 IRC 的连接。

IRC 类包含与 IRC 服务器交互所需的所有函数（*join*、*part*、*say*和*quit*，仅举几例）。

一个名为 Bot 的属性`irc`包含该机器人已启动的 IRC 类的实例。

另一个名为 Command 的类作为 IRC 服务器上用户可以使用的所有命令的基类。Command 实际上有一个应该用于机器人实例的参数，尽管我不知道如何在其中获取机器人实例，因为所有命令都继承自 Command 类，而且我无法添加super() 到每个`__init__`.

我怎样才能让命令使用 IRC 类中的函数，而无需在每次一个连接运行命令时启动新的 IRC 连接（哦，是的，这只是发生在我身上！）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T00:19:28.563

如果您想在一个类中从另一个类中运行一个函数而无需任何其他交互，那么您只需要一个变量来保存您要运行的方法的类的实例。在类内运行方法与在类外运行方法没有任何不同（除非该类正在运行它自己的方法之一）

```
class.method() 
```

应该可以正常运行该方法

# android - android中电源键和音量上键的组合

> ID：15594482
> 
> 赞同：1
> 
> 时间：2013-03-24T02:24:53.690
> 
> 标签：android

就像电源按钮和降低音量按钮的组合一样 - 截取手机的屏幕截图......同样，我试图在我的应用程序中访问音量提高和电源按钮长按键并提供快捷方式。这可能吗？

我知道如何单独访问两个按钮，但不能同时访问。

```
 @Override
      public boolean onKeyLongPress(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_POWER){
        Log.w("LongPress", "power LONG PRESS");
    }

                if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        Log.w("LongPress", "Volume Up LONG PRESS");
    }

    return super.onKeyLongPress(keyCode, event);
   }

    @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_VOLUME_UP){
        event.startTracking();
        return true;
    }
    return super.onKeyDown(keyCode, event);
  } 
```

如何在这里完成组合'&&'不起作用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-24T16:04:07.710

我不懂android下的编程，但我看到它使用Java类，所以试试这个

```
public class BitKeys implements KeyListener {

    private BitSet keyBits = new BitSet(256);

    @Override
    public void keyPressed(final KeyEvent event) {
        int keyCode = event.getKeyCode();
        keyBits.set(keyCode);
    }

    @Override
    public void keyReleased(final KeyEvent event) {
        int keyCode = event.getKeyCode();
        keyBits.clear(keyCode);
    }

    @Override
    public void keyTyped(final KeyEvent event) {
        // don't care
    }

    public boolean isKeyPressed(final int keyCode) {
        return keyBits.get(keyCode);
    }

} 
```

我在这里找到了这个： [处理多个按键忽略重复的键](https://stackoverflow.com/questions/11851155/handle-multiple-key-presses-ignoring-repeated-key)

# django - Django ManyToManyField 检索两个对象错误

> ID：15594486
> 
> 赞同：0
> 
> 时间：2013-03-24T02:25:03.127
> 
> 标签：django, django-models

我为以下功能实现了 ManyToManyField ，该功能允许用户关注其他用户以及是否关注其他用户。他们将能够检索他们的对象。

这是我的模块

```
 class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100, blank=True)
    image = models.FileField(upload_to="images/",blank=True)
    following = models.ManyToManyField('self', related_name='followers', symmetrical=False, blank=True, null=True)
    birthday = models.DateField(blank=True,null=True)

    def __unicode__(self):
        return self.name

 class Board(models.Model):

    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    created = models.DateTimeField(auto_now_add=True)
    picture = models.OneToOneField('Picture',related_name='picture',blank=True,null=True)
    def __unicode__(self):
        return self.name 
```

问题是当一个用户关注 2 个用户时。我只能检索单个用户对象而不是两个用户。

例如，我创建了 3 个用户，Jimmy、Sarah 和 Simon。莎拉跟着西蒙和吉米

Jimmy 有一个名为 Jimmy's Math Board 的板，Jimmy 英语板 Simon 有一个名为 Simon's Whiteboard 的板

问题在下面

```
 >>> from pet.models import *
 >>> from django.contrib.auth.models import User
 >>> user = User.objects.get(username='Sarah')
 >>> person = Person.objects.get(user=user)
 >>> sarah = Person.objects.get(user=user)
 >>> sarah.following.all()  # SARAH IS FOLLOWING JIMMY AND SIMON
 [<Person: Jimmy>, <Person: Simon>]
 >>> users = User.objects.filter(pk__in=sarah.following.all().values_list('user__pk',flat=True))
 >>> users
 [<User: Jimmy>, <User: Simon>] # I'm able to retrieve their users
 >>> board = Board.objects.filter(user=users) # when I search for their boards , I only retrieve a single user . Jimmy's board not Simon
 >>> board
 [<Board: Jimmy's Math Board>, <Board: Jimmy English Board>]
 >>> person = Person.objects.filter(user=users) 
 >>> person
 [<Person: Jimmy>] 
```

如何检索这两个用户板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:54:36.617

因为`board = Board.objects.filter(user=users)`它的过滤`user`期望提供一个用户。如果您要执行类似`board = Board.objects.filter(user__in=users)`使用`__in`过滤器的操作，则过滤将正确使用用户对象列表。

您还可以使用 id 的平面列表而不是像这样的对象`board = Board.objects.filter(user__in=sarah.following.all().values_list('user__pk',flat=T‌​rue))`

# java - 如何从 TimePicker 创建两个时间值（currentHour 和 currentMinute），然后将它们连接在一起

> ID：15594494
> 
> 赞同：0
> 
> 时间：2013-03-24T02:26:18.277
> 
> 标签：java, android, eclipse, string

我的源代码 timeEt（我稍后将其重命名为 hourEt）和 minEt 中有两个值，我想将它们组合成一个字符串，我可以在 xml 布局中显示 - 我已经能够编译代码下面，但我卡住了，我需要一些帮助，我想做的就是添加一些代码来将 currentHour 和 currentMinute 组合成一个字符串，这样我就可以稍后在 xml 布局中从 TimePicker 调用时间）

AddEditCountry.java

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TimePicker minEt;
     public static final String KEY_BUNDLE_TIME = "time";
     public static final String KEY_BUNDLE_MIN = "min";

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);
       //   minEt = (TimePicker) findViewById(R.id.minEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));
             timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0);
             minEt.setCurrentMinute(extras.getInt("min"));
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
              }
              else
              {
                 dbConnector.updateContact(rowID,
                    nameEt.getText().toString(),
                    capEt.getText().toString(),
                    timeEt.getCurrentHour().toString(),
                    minEt.getCurrentMinute().toString(),/* Storing as String*/
                    codeEt.getText().toString());
              }
           }
} 
```

更新了数据库连接器 (.java) 和 Bill Motes 有用的建议

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    public static final String KEY_BUNDLE_TIME = "time";
    public static final String KEY_BUNDLE_MIN = "min";
    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

       public void open() throws SQLException 
       {
          //open database in reading/writing mode
          database = dbOpenHelper.getWritableDatabase();
       } 

       public void close() 
       {
          if (database != null)
             database.close();
       }       

       public void insertContact(String name, String cap, String code, String time, String min) 
               {
                  ContentValues newCon = new ContentValues();
                  newCon.put("name", name);
                  newCon.put("cap", cap);
                  newCon.put("time", time);
                  newCon.put("min", min);
                  newCon.put("code", code);
                  newCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                  newCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);

                  open();
                  database.insert("country", null, newCon);
                  close();
               }

               public void updateContact(long id, String name, String cap,String code, String time, String min) 
               {
                  ContentValues editCon = new ContentValues();
                  editCon.put("name", name);
                  editCon.put("cap", cap);
                  editCon.put("time", time);
                  editCon.put("min", min);
                  editCon.put("code", code);
                  editCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
                  editCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);
                  open();
                  database.update("country", editCon, "_id=" + id, null);
                  close();
               }

               public Cursor getAllContacts() 
               {
                  return database.query("country", new String[] {"_id", "name"}, 
                     null, null, null, null, "name");
               }

               public Cursor getOneContact(long id) 
               {
                  return database.query("country", null, "_id=" + id, null, null, null, null);
               }

               public void deleteContact(long id) 
               {
                  open(); 
                  database.delete("country", "_id=" + id, null);
                  close();
               }
} 
```

添加 Bill Mote 的有用建议后，它仍然崩溃。我已经更新了下面的 logcat 和上面的源代码。我觉得我更接近于集成单个字符串，该字符串从 TimePicker 调用组合的 currentHour 和 currentMinute 按钮 - 但我仍然卡住（来自任何 StackOverflow 成员的任何输入都非常受欢迎！）

日志猫：

```
03-24 00:48:57.779: D/Activity(6809): Activity.onPause(), editTextTapSensorList size: 0
03-24 00:48:57.959: I/Adreno200-EGLSUB(6809): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-24 00:48:57.959: D/memalloc(6809): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:54
03-24 00:48:58.049: D/memalloc(6809): ion: Mapped buffer base:0x5dc22000 size:614400 offset:0 fd:75
03-24 00:48:58.079: D/memalloc(6809): ion: Mapped buffer base:0x5dcb8000 size:614400 offset:0 fd:78
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5d4ce000 size:614400
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5d6f7000 size:614400
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5c929000 size:614400
03-24 00:49:10.623: W/dalvikvm(6809): threadid=12: thread exiting with uncaught exception (group=0x410889d8)
03-24 00:49:10.643: E/AndroidRuntime(6809): FATAL EXCEPTION: AsyncTask #2
03-24 00:49:10.643: E/AndroidRuntime(6809): java.lang.RuntimeException: An error occured while executing doInBackground()
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.lang.Thread.run(Thread.java:856)
03-24 00:49:10.643: E/AndroidRuntime(6809): Caused by: java.lang.NullPointerException
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:101)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry.access$1(AddEditCountry.java:92)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry$1$1.doInBackground(AddEditCountry.java:65)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-24 00:49:10.643: E/AndroidRuntime(6809):     ... 5 more
03-24 00:49:10.663: D/Activity(6809): Activity.onPause(), editTextTapSensorList size: 0
03-24 00:49:10.693: I/Adreno200-EGLSUB(6809): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-24 00:49:10.693: D/memalloc(6809): ion: Mapped buffer base:0x5d4cb000 size:614400 offset:0 fd:57
03-24 00:49:10.713: D/memalloc(6809): ion: Mapped buffer base:0x5d8f7000 size:614400 offset:0 fd:68
03-24 00:49:10.753: D/memalloc(6809): ion: Mapped buffer base:0x5e14e000 size:614400 offset:0 fd:72
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5dc22000 size:614400
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5dcb8000 size:614400 
```

附言

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:06:13.260

在第一个示例中，您得到的是“time” + “min”，实际上是“timemin”，但在第二个示例中，您得到的是“time”。

所以，有几件事......

```
public static final String KEY_BUNDLE_TIME = "time";
public static final String KEY_BUNDLE_MIN = "min"; 
```

在调用 putExtra 的类中，使用 AddEditCountry.KEY_BUNDLE_TIME 作为键值对中的键。AddEditCountry.KEY_BUNDLE_MIN 相同。这让被调用的活动/片段控制包中传递的条目，并确保您不会创建拼写错误等。

此外，您可以在执行 get ... 之前检查以确保密钥存在

```
if (extras.containsKey(KEY_BUNDLE_TIME) {
    timeEt.setCurrentHour(extras.getInt(KEY_BUNDLE_TIME));
} else {
    timeEt.setCurrentHour(0);
} 
```

或者

```
timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:00:24.217

尝试这种方式来获得时间

```
 Calendar c = Calendar.getInstance(); 
    int seconds = c.get(Calendar.SECOND);
    int min= c.get(Calendar.MINUTE);
int hour= c.get(Calendar.HOUR);
String time=hour+":"+min+":"+seconds; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:19:13.273

两个代码片段之间的单一更改是导致应用程序崩溃的行。但是，更改后的代码行与您在问题开头部分报告的不同。

**旧的非强制关闭**：

```
timeEt.setCurrentHour(extras.getInt("time")); 
```

**新势力关闭**：

```
timeEt.setCurrentHour(extras.getInt("time" + ("min"))); 
```

强制关闭是由“ `extras.getInt("timemin")));`”引起的，它可能会返回`null`。因此， " `timeEt.setCurrentHour(null);`" 导致`NullPointerException`.

**另一方面，**您的 post表明您添加了这行代码：****

 **```
timeEt.setText(extras.getString("time") + ":" + extras.getString("min")); 
```

使您的新代码与您的帖子匹配，您的崩溃应该得到修复。**

# javascript - 在使用 Javascript 之间删除括号和文本

> ID：15594495
> 
> 赞同：1
> 
> 时间：2013-03-24T02:26:19.167
> 
> 标签：javascript, regex, parsing, replace

我有一个带有许多不同括号/大括号/括号（{{...}}，{...}，[...]，[[...]]，<...>）的长字符串，其中一些在别人里面。

我想使用 JS 删除这些括号以及其中的任何文本/等（除了不在其他括号内的 [[...]]，在这种情况下，我只想删除括号）。

**这是我正在使用的字符串类型的示例：**

> {{pp-move-indef}} {{Taxobox | 名称 = 红熊猫 | 状态 = 似曾相识 | 状态系统= iucn3.1 | 状态参考 = | 图片 = RedPandaFullBody.JPG | regnum = [[动物]]ia | 门 = [[脊索动物|脊索动物]] | 类 = [[哺乳动物]]ia | ordo = [[食肉目]] | subordo = [[Caniformia]] | infraordo = [[Arctoidea]] | superfamilia = [[Musteloidea]] | familia = [[Ailuridae]] | 属 = Ailurus | genus_authority = [[弗雷德里克居维叶|F. 居维叶]], 1825 | 物种 = A. fulgens | 二项式 = Ailurus fulgens | binomial_authority = [[弗雷德里克居维叶|F。居维叶]], 1825 | range_map = Cypron-Range Ailurus fulgens.svg | range_map_caption = 红熊猫范围 | subdivision_ranks = 亚种 | 细分 = A. f. fulgens
> A. f. 斯坦尼}}
> 
> 小熊猫（Ailurus fulgens，字面意思是“闪亮的猫”）是一种小型的 [[arboreal]] [[mammal]]，原产于东部 [[Himalayas]] 和西南部 [[China]]{{IUCN |assessors= Wang, X., Choudhry, A., Yonzon, P., Wozencraft, C., Than Z. |year=2008 |id=714 |taxon=Ailurus fulgens |version=2010.4 |downloaded=26 June 2010}} 和相关给[[浣熊]]、[[臭鼬]]和[[黄鼠狼]]。它是 Ailurus 属和科 [[Ailuridae]] 中唯一现存的物种。它比 [[家猫]] 略大，有红棕色的皮毛，长而蓬松的尾巴，由于前腿较短，步态蹒跚。它主要以[[竹笋|竹]]为食，但为[[杂食性]]，也可能吃鸡蛋、[[鸟]]、[[昆虫]]和小型[[哺乳动物]]。它是一种[[独居动物]]，主要是[[夜行性|从黄昏到黎明活跃]]，

**期望的结果**

> 小熊猫（Ailurus fulgens，字面意思是“闪亮的猫”）是一种小型树栖哺乳动物，原产于喜马拉雅山脉东部和中国西南部，与浣熊、臭鼬和黄鼠狼有关。它是小熊猫属和小熊猫科唯一现存的物种。它比家猫略大，有红棕色的皮毛，长而蓬松的尾巴，由于前腿较短，步态蹒跚。主要以竹笋为食，杂食性，也可以吃蛋、鸟、昆虫和小型哺乳动物。它是一种独居动物，主要是夜间活动|从黄昏到黎明活动，白天主要是久坐不动的生活方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:32:18.780

```
function removeBrackets(input) {
    return input
        .replace(/{.*?}/g, "")
        .replace(/\[.*?\]/g, "")
        .replace(/<.*?>/g, "")
        .replace(/\(.*?\)/g, "");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:38:00.430

注意：这建立在@Joseph Lennox 上面的建议之上。

```
function removeBrackets(input) {
    return input
        .replace(/{+.*?}+/g, "")
        .replace(/\[\[|\]\]/g, "")
        .replace(/<.*?>/g, "");
} 
```

... + 让我们吸收 {{ 和 }} 等。

# session - 两个EAR 的一个WAS 服务器。只有一个会话

> ID：15594496
> 
> 赞同：0
> 
> 时间：2013-03-24T02:26:19.433
> 
> 标签：session, jakarta-ee, websphere, ear

我有一个在线和移动应用程序。是否可以在 Websphere 应用程序服务器中进行一些设置，以便客户一次只能登录应用程序。如果已经从在线登录，并尝试从手机登录，那么他应该从在线注销。两个应用程序是不同的，它们之间没有联系。但是对于身份验证，他们调用一个单独的服务，该服务位于单独的 EAR 中，并将身份验证服务公开为 Web 服务。

# php - 注意：未定义变量：第 9 行 "" 中的 _SESSION

> ID：15594498
> 
> 赞同：25
> 
> 时间：2013-03-24T02:26:43.247
> 
> 标签：php, error-handling

这是我的php代码：

```
<?php include("inc/incfiles/header.inc.php")?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Member Index</title>
<link href="css/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h1>Welcome <?php echo ($_SESSION['SESS_fname']);?></h1>
<a href="member-profile.php">My Profile</a> | <a href="logout.php">Logout</a>
<p>This is a password protected area only accessible to members. </p>
</body>
</html> 
```

我知道我的代码有问题，但我不知道如何修复它。我的错误说：“注意：未定义的变量：第 9 行 C:\xampp\htdocs\Smasher\member-index.php 中的 _SESSION”

如何修复错误，以便它会说出用户的名字？mySQL 上数据库表中的第一个名字叫做`fname`.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-24T02:31:05.570

添加

```
session_start(); 
```

在任何 HTML 之前的页面开头

你会有类似的东西：

```
<?php session_start();
include("inc/incfiles/header.inc.php")?>
<html>
<head>
<meta http-equiv="Content-Type" conte... 
```

不要忘记删除之前的空间

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T02:34:32.963

首先，您需要在要在其上使用变量`session_start()`的任何页面的顶部添加。`SESSION`

此外，您应该检查以确保在使用之前先设置变量：

```
if(isset($_SESSION['SESS_fname'])){
    echo $_SESSION['SESS_fname'];
} 
```

或者，简单地说：

```
echo (isset($_SESSION['SESS_fname']) ? $_SESSION['SESS_fname'] : "Visitor"); 
```

# windows-phone-7 - XNA SpriteSheet 不工作

> ID：15594505
> 
> 赞同：1
> 
> 时间：2013-03-24T02:27:56.680
> 
> 标签：windows-phone-7, xna, sprite-sheet

我添加了逻辑来显示 Sprite 动画，但它根本没有显示在屏幕上。我究竟做错了什么？

```
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input.Touch;

namespace MyXNAGame.Game_Classes
{
  public class Player : Sprite
  {
    private int _frameCount = 6;
    private int _frameIndex;
    private Rectangle[] _frames;
    public float _jumpVelocity = 12f;
    public PlayerState _playerState;

    public Rectangle BoundingBox
    {
        get { return new Rectangle {X = (int) Position.X, Y = (int) Position.Y, Height = Texture.Height, Width = Texture.Width}; }
    }

    public void Initialize()
    {
        _frames = new Rectangle[_frameCount];
        int width = Texture.Width / _frameCount;
        for (int i = 0; i < _frameCount; i++)
        {
            _frames[i] = new Rectangle(i*width, 0, width, Texture.Height);
        }
    }

    public void Load(ContentManager contentManager, string assetName)
    {
        Texture = contentManager.Load<Texture2D>(assetName);
    }

    public void Update(GameTime gameTime)
    {
        while (TouchPanel.IsGestureAvailable)
        {
            GestureSample gestureSample = TouchPanel.ReadGesture();
            if (gestureSample.GestureType == GestureType.Tap)
            {
                if (_playerState == PlayerState.Running)
                {
                    _playerState = PlayerState.NormalJump;
                }
            }
            if (gestureSample.GestureType == GestureType.Hold)
            {
                if (_playerState == PlayerState.Running)
                {
                    _playerState = PlayerState.LongJump;
                }
            }
        }

        // NormalJump Logic
        switch (_playerState)
        {
            case PlayerState.NormalJump:
                Position.Y -= _jumpVelocity;
                _jumpVelocity -= 0.5f;
                if (_jumpVelocity == 0)
                {
                    _playerState = PlayerState.Falling;
                }
                break;
            case PlayerState.LongJump:
                Position.Y -= _jumpVelocity;
                _jumpVelocity -= 0.5f;
                if (_jumpVelocity == 0)
                {
                    _playerState = PlayerState.Falling;
                }
                break;
            case PlayerState.Falling:
                Position.Y += _jumpVelocity;
                _jumpVelocity += 0.5f;
                break;
            case PlayerState.Running:
                _frameIndex++;
                if (_frameIndex > 5)
                {
                    _frameIndex = 0;
                }

                break;
        }
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(Texture, Position, _frames[_frameIndex], Color.White, 0, new Vector2(0, 0), new Vector2(0, 0), SpriteEffects.None, 0);
    }
} 
```

}`

任何人都可以看到明显的错误吗？我正在使用 WP7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:44:26.240

我将 Draw() 方法中的“Scale”参数从 new Vector(0,0) 更改为 new Vector(1,1)，显然，Scale 为 0 根本不会显示任何内容。

# objective-c - 如何编辑保存在数组中的 NSString？

> ID：15594510
> 
> 赞同：0
> 
> 时间：2013-03-24T02:28:14.447
> 
> 标签：objective-c, uiview, nsstring, nsmutablearray, uitextview

我将多个字符串保存到 NSMutableArray 中，然后将每个字符串设置为单独的表格视图单元格。

如果选择了一个单元格，该字符串将显示在另一个视图中。

我希望能够编辑字符串并再次保存。

解决这个问题的最佳方法是什么？

这是我的保存代码：

```
- (IBAction)saveNote
{
    if (_noteView.aTextView.text == nil)
    {
        [_noteArray addObject:@""];

        Note * tempNote = [[Note alloc] init];
        _note = tempNote;

        [_savedNotesViewController.savedNoteArray addObject:tempNote];
        NSIndexPath * tempNotePath = [NSIndexPath indexPathForRow:[_savedNotesViewController.savedNoteArray count]-1 inSection:0];
        NSArray * tempNotePaths = [NSArray arrayWithObject:tempNotePath];
        [_savedNotesViewController.noteTableView insertRowsAtIndexPaths:tempNotePaths withRowAnimation:NO];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"AddNote" object:nil];

     }
    else
    {
        [_noteArray addObject:self.noteView.aTextView.text];

        Note * tempNote = [[Note alloc] init];
        _note = tempNote;

        [_savedNotesViewController.savedNoteArray addObject:tempNote];
        NSIndexPath * tempNotePath = [NSIndexPath indexPathForRow:[_savedNotesViewController.savedNoteArray count]-1 inSection:0];
        //NSArray * tempNotePaths = [NSArray arrayWithObject:tempNotePath];
        NSMutableArray * tempNotePaths = [NSMutableArray arrayWithObject:tempNotePath];
        [_savedNotesViewController.noteTableView insertRowsAtIndexPaths:tempNotePaths withRowAnimation:NO];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"AddNote" object:nil];

    }

    Note * myNote = [Note sharedNote];
    myNote.noteOutputArray = _noteArray;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:45:33.183

你可以使用 NSMutableArray 的方法`[array replaceObjectAtIndex:index withObject:@"newString"]`

# java - 使用 Java 使用提供的密钥和 iv 解密 openssl aes-256-cbc

> ID：15594518
> 
> 赞同：14
> 
> 时间：2013-03-24T02:30:39.693
> 
> 标签：java, openssl

我一直在寻找一个 Java 代码示例来执行以下操作，但没有成功。我正在为我的特殊情况寻找解决方案。

使用“testtest”作为密码生成了密钥和 IV：

```
openssl enc -aes-256-cbc -P 
salt=2855243412E30BD7
key=E4A38479A2349177EAE6038A018483318350E7F5430BDC8F82F1974715CB54E5
iv=629E2E1500B6BA687A385D410D5B08E3 
```

在 Linux 上使用 openssl 命令加密了一个文件（命名文本）：

```
openssl enc -aes-256-cbc -K 
E4A38479A2349177EAE6038A018483318350E7F5430BDC8F82F1974715CB54E5 -iv
629E2E1500B6BA687A385D410D5B08E3 -e -in text -out text_ENCRYPTED 
```

可以使用以下方法成功解密：

```
openssl enc -aes-256-cbc -K 
E4A38479A2349177EAE6038A018483318350E7F5430BDC8F82F1974715CB54E5 -iv 
629E2E1500B6BA687A385D410D5B08E3 -d -in text_ENCRYPTED -out text_DECRYPTED 
```

我可以访问加密文件、salt、密钥和 iv。我不相信我会收到密码。另外，我已经安装了无限强度 JCE 政策。到目前为止，我只找到了另一个 java 程序进行加密并生成这些参数的示例。对于我的情况，我必须使用给我的 salt、key 和 iv 值来解密文件。Java可以做到这一点吗？请记住我受此配置约束，非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T04:35:56.493

你应该使用这样的东西：

```
InputStream cipherInputStream = null;
try {
    final StringBuilder output = new StringBuilder();
    final byte[] secretKey = javax.xml.bind.DatatypeConverter.parseHexBinary("E4A38479A2349177EAE6038A018483318350E7F5430BDC8F82F1974715CB54E5");
    final byte[] initVector = javax.xml.bind.DatatypeConverter.parseHexBinary("629E2E1500B6BA687A385D410D5B08E3");
    final Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(secretKey, "AES"), new IvParameterSpec(initVector, 0, cipher.getBlockSize()));
    cipherInputStream = new CipherInputStream(new FileInputStream("text_ENCRYPTED"), cipher);

    final String charsetName = "UTF-8";

    final byte[] buffer = new byte[8192];
    int read = cipherInputStream.read(buffer);

    while (read > -1) {
        output.append(new String(buffer, 0, read, charsetName));
        read = cipherInputStream.read(buffer);
    }

    System.out.println(output);
} finally {
    if (cipherInputStream != null) {
        cipherInputStream.close();
    }
} 
```

# windows - 访问文件夹时运行的批处理文件

> ID：15594521
> 
> 赞同：2
> 
> 时间：2013-03-24T02:31:04.120
> 
> 标签：windows, batch-file, active-directory, directory, automatic-storage

我想知道是否有可能在我打开目录时自动执行一个批处理文件。我不知道如何做到这一点。

无论是通过 cmd/.exe/.bat/mouse 访问它，我都希望它这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:55:45.677

不，这是不可能使用批处理文件的。（事实上​​，我认为不编写 shell 扩展是不可能的，这需要一种实际的编程语言。）

# android - Android更好的方式来做按钮点击？

> ID：15594524
> 
> 赞同：0
> 
> 时间：2013-03-24T02:31:53.020
> 
> 标签：android, button, click

所以现在我正在整理一些代码，并且我有很多按钮的 else/ifs 并且想知道有什么好方法可以让它更整洁？

所以我有 12 个按钮，每个按钮在点击时都会播放声音并改变颜色。我有一个方法，但我想知道有没有一种很好的方法来检测按钮而不是 if/else？

```
public void onClick(View v) {
    int id = v.getId();
    changeToWhite();
    if (id == R.id.a_button) {
        currentButton(a, 81);
    } else if (id == R.id.aSharp_button) {
        currentButton(aSharp, 82);
    } else if (id == R.id.b_button) {
        currentButton(b, 83);
    } else if (id == R.id.c_button) {
        currentButton(c, 72);
    } 
```

ETC...

那么有没有更好的方法呢？我知道有很多 else/if 是不好的，所以我想尝试改进它。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:39:57.943

您可以改用“switch-case”。

>

```
public void onClick(View v) {
switch(v.getId())
{
case R.id.a_button:
changeToWhite();
break;
case R.id.aSharp_button:
currentButton(aSharp,82);
break;
.....
default:
break;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:40:44.800

改用 case 语句怎么样？

```
 public void onClick(View v) {
       // Perform action on click
      switch(v.getId()) {
        case R.id.a_button:
          currentButton(a, 81);
          break;
        case R.id.aSharp_button:
          currentButton(aSharp, 82);
          break;
        /*
          and the rest of the cases here.
        */

      }
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:42:06.107

我假设您正在使用 XML 并设置 onClick 属性。

一种更简单/更整洁的方法是使用[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)。

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_foo);

    findViewById(R.id.view_buttonone).setOnClickListener(new OnClickListener(){
        public void onClick(View view){
            // button one clicked
        }
    });

    findViewById(R.id.view_buttontwo).setOnClickListener(new OnClickListener(){
        public void onClick(View view){
            // button two clicked
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T02:55:13.703

首先，使用 if/else 嵌套**几乎没有任何损失**。无需尝试对您的应用进行这种级别的微观管理。你不会从中获得任何好处。尝试更多地考虑在可读性方面优化这一点。

现在，要回答您的问题，您可以改用 switch/case 构造。

```
public void onClick(View v) {
    switch (item.getItemId()) {

        case R.id.aBar_item1:
         //Item onClick logic
         return true;

        case R.id.aBar_item2:
        //Item onClick logic
        return true;

        case R.id.aBar_item3:
        //Item onClick logic
        return true;

        ...
    }  
} 
```

# javascript - 获取真实设备的屏幕尺寸

> ID：15594531
> 
> 赞同：4
> 
> 时间：2013-03-24T02:32:33.840
> 
> 标签：javascript, jquery, responsive-design

我在获取真实设备的屏幕尺寸时遇到问题。看看jsfiddle：http: [//jsfiddle.net/glenswift/CpBkU/](http://jsfiddle.net/glenswift/CpBkU/)

调整输出框架的大小会导致 h1 文本发生变化。我知道 h1 不同部分的像素大小，所以它可以在桌面上正常工作。但是在具有大 dpi 和小屏幕的设备上，我的解决方案不起作用，文本超出屏幕。

我不知道如何解决这个问题。我见过类似的问题（[1](https://stackoverflow.com/questions/279749/detecting-the-system-dpi-ppi-from-js-css) , [2](https://stackoverflow.com/questions/8456455/mobile-web-how-to-get-physical-pixel-size)），但它们对我没有帮助。

我的代码：

```
function setPositions(){
    var W = $(window).width(),
        h1 = '';
    if (W < 210) {
        h1 = 'Hello';
    } else if (W < 270) {
        h1 = 'Hello World';
    } else {
        h1 = 'Hello World Text'
    }
    $('h1').empty().text(h1);
}
$(document).ready(function(){
    setPositions();
});
$(window).resize(function(){
    setPositions();
}); 
```

十分感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T20:15:29.380

关于媒体查询的另一件事[http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)

这真的是一篇很棒的文章，让我大开眼界:)

请享用！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-29T09:42:36.827

确保在元标记中使用“视口”。它用于响应式网页设计。IE`<meta name="viewport" content="width=device-width" />`

参考：[http ://webdesignerwall.com/tutorials/viewport-meta-tag-for-non-responsive-design](http://webdesignerwall.com/tutorials/viewport-meta-tag-for-non-responsive-design)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T20:05:30.180

出于兴趣，我尝试了一种 CSS 方法。我没有视网膜显示设备来仔细检查，但看看它的外观：http: [//jsfiddle.net/panchroma/Z678z/](http://jsfiddle.net/panchroma/Z678z/)

我知道这在您的特定情况下可能不实用，但是由于您处理的是文本而不是图像，因此 CSS 确实有一些优势。

**HTML**

```
<h1 class="small">Hello</h1>
<h1 class="med">Hello World</h1>
<h1 class="lge">Hello World Text!</h1> 
```

**CSS**

```
 @media (max-width: 210px){
 .small{
 display:inherit;
 }

 .med, .lge{
display:none;
}  
}

etc 
```

根据视口，h1 文本从 hello 变为 hello world，再变为 hello world 文本

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-01T23:22:29.123

要知道屏幕大小，您应该使用元标记`<meta name="viewport" content="width=device-width" />`

您可以使用媒体查询来根据屏幕尺寸宽度调整内容，而不是使用 setPositions 函数。

# python - Python 2 - 3 移植问题

> ID：15594534
> 
> 赞同：1
> 
> 时间：2013-03-24T02:32:58.403
> 
> 标签：python

**背景**

我正在尝试学习 Python 3。为了快速入门，我将我的一个简单的 Python 2 脚本移植到 Python 3。该脚本*非常*简单，但我遇到了一些问题。

**问题**

1.  `TypeError: 'str' does not support the buffer interface`

我使用 socket`.send()`命令发送服务器的欢迎消息。当服务器尝试发送它时，我收到上述错误。这是相关的代码。

```
def clientthread(connection):

    #Sending message to connected client
    #This only takes strings (words

    connection.send("Welcome to the server. Type something and hit enter\n")

    #loop so that function does not terminate and the thread does not end
    while True:

        #Receiving from client
        data = connection.recv(1024)
        if not data:
            break
        connection.sendall(data)
        print (data)
    connection.close() 
```

这是回溯：

```
Unhandled exception in thread started by <function clientthread at 0x1028abd40>
Traceback (most recent call last):
  File "/Users/*****/Desktop/Coding/Python 3/Sockets/IM Project/Server/Server v3.py", line 41, in clientthread
    connection.send("Welcome to the server. Type something and hit enter\n")
TypeError: 'str' does not support the buffer interface 
```

**笔记：**

我正在从 Python 2.7.3 移植到 Python 3.3

当它们出现时，我将添加更多错误。

* * *

**编辑**

尽管 [this] 是一个很好的答案，但似乎存在一个问题 - 所有发送到服务器的消息都以`b`. 我的客户在 Python 2 中（我将在今晚晚些时候移植它）——这可能是问题的一部分吗？无论如何，这里是相关代码。

**客户端主循环**

```
while True:   
    #Send some data to the remote server
    message = raw_input(">>>  ")

    try:
         #set the whole string
         s.sendall(USER + " :  " + message)
    except socket.error:
    #Send Failed
        print "Send failed"
        sys.exit()

    reply = s.recv(1024)
    print reply 
```

**壳牌服务器**

```
HOST: not_real.local
PORT: 2468
Socket Created
Socket Bind Complete
Socket now listening
Connected with 25.**.**.***:64203
b'xxmbabanexx :  Hello' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:39:22.343

您应该查看**[Python 3 Unicode 指南](http://docs.python.org/3/howto/unicode.html)**（以及将[Python 2 代码移植到 Python 3](http://docs.python.org/3/howto/pyporting.html#deal-with-the-bytes-string-dichotomy)）。 `send()`需要字节，但您传递给它一个字符串。您需要`encode()`在发送之前调用字符串的`decode()`方法，并在打印之前调用接收到的字节的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:39:05.013

在 python3.* 中，socket 发送和接收的是字节。所以你应该尝试：

```
connection.send(b"Welcome to the server. Type something and hit enter\n") 
```

# performance - StringHTTPMessageConverter 加载所有导致java堆跳转的字符集

> ID：15594539
> 
> 赞同：0
> 
> 时间：2013-03-24T02:33:30.997
> 
> 标签：performance, spring-mvc, character-encoding, heap-memory, large-object-heap

我们有一个使用 Spring 3.1.0.Final 并部署在 WAS 6.1 上的 portlet 应用程序。

过去我们有多个使用 Spring MVC 的 portlet。这是 Spring 3 的第一个 portlet。我在代码的大部分地方都使用注释和自动装配。

当此应用程序部署在服务器中时，基本堆使用量增加了 25+ MB。

我使用 Jprofiler 进行了分析，发现 StringHTTPMessageConverter 正在将所有字符集加载到占用大约 14 MB 内存的内存中（com.ibm.nio.charset.Charset 占用内存）

因为它是一个 portlet 应用程序，所以我在我的配置中明确定义了 org.springframework.web.portlet.mvc.annotation.Ann otationMethodHandlerAdapter bean，而不是 org.springframework.web.servlet.mvc.annotation.Ann otationMethodHandlerAdapter

这是我迄今为止尝试做的

1) 更改 StringHttpMessageConvertor 设置

在我的配置中定义了以下 bean

 `````
<bean class = "org.springframework.web.servlet.mvc.annotation.An notationMethodHandlerAdapter">
<property name = "messageConverters">
<list>
<bean class = "org.springframework.http.converter.StringHttpMess ageConverter">
<property name = "supportedMediaTypes">
<list>
   text/plain;charset=UTF-8
</list>
</property>
</bean>
 </list>
</property> 
````  `没有运气。

2）我已经在我的配置文件中定义了。正如一些帖子中所建议的，我还通过注释掉标签来尝试上述配置。但没有运气。

3) 正如一些论坛所建议的那样，我尝试编写 BeanPostProcessor 但找不到 StringHttpMessageConverter 类。

我是否需要在我的配置中明确定义 org.springframework.web.servlet.mvc.annotation.Ann otationMethodHandlerAdapter？

我的问题是

1）有什么办法可以避免所有字符集加载到内存中？

2) 基堆中的 25 MB 跳跃也是合理的吗？Spring 3.1.0 通常的内存足迹是什么？

我已经没有想法了 任何有关微调 Spring 框架的帮助将不胜感激。

谢谢并恭祝安康

拉维格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T06:15:04.353

更新：问题已解决，从配置中删除标签。我们正在使用 Portlet MVC 注释处理程序适配器，因此 Servlet MVC 注释处理程序适配器是不必要的，根本不需要。StringHttpMessageConvertor 是由 Servlet MVC Annotation Handler 标签引入的。其构造函数中的 StringHttpMessageConvertor 具有将字符集拉入内存中的代码。``

# c - 如何在子进程和父进程之间传递整数

> ID：15594541
> 
> 赞同：0
> 
> 时间：2013-03-24T02:34:36.160
> 
> 标签：c, fork, pipe

我有一个程序应该计算 txt 文件中的字符并使用子进程来计算字符然后打印出数量。父母只是在一个while循环中将文件中的行提供给孩子。该程序的工作原理是它可以打开文件，逐行读取它，然后如果子进程打印出正确的数量。

但是现在我想修改它，以便子进程将金额传回，而父进程则写出 nr 的字符。但是当我尝试这样做时，程序给了我 1153416175 而不是文件中的实际字符数，而且它只是卡住了，我必须杀死它。为什么会这样？

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>
#include <string.h>
#define MAXLINE 100

int main(int argc, char *argv[]) {
    int fds[2]; /* file descriptors */
    int child; /* child process */
    int n; /* size of line in file */
    int count, alphacount, total=0; /* used in loop for counting chars in line */
    int read_bytes; /* amount of bytes read in read function */
    char line[MAXLINE];
    FILE *fp;
    char *str;

    if (argc < 2) {
        printf("Format: './rakna <filename>'.\nThe file should have the .txt extension.\n");
        exit(1);      
    } else {
        if (pipe(fds) < 0) {
            perror("Can't open pipe\n");
            exit(1);
        }
        child = fork();
        if (child==-1) {
            perror("fork error");
            exit(1);
        }

        /* child that reads chars and returns amount */
        if(child == 0)      
        {
            /* close(fds[1]);  child process close input of pipe Used to be before ..*/
            /* count chars through read */
            while (read_bytes = read(fds[0], line, sizeof(line)) > 0) {
                /* check if line is received */
                if (read_bytes < 0) {
                    perror("Can't read line");
                    exit(1);
                }
                /* count chars in the line */
                else {
                    count=0;
                    alphacount=0;
                    while (line[count] != '\0')
                    {
                        /* counting chars from 'a' to 'z' */
                        if (line[count] >= 'a' && line[count] <= 'z')
                            alphacount++;
                        /* counting chars from 'A' to 'Z' */
                        else if (line[count] >= 'A' && line[count] <= 'Z')
                            alphacount++;
                        count++;
                     }
                     /* adding the nr of chars in line to total */
                     total += alphacount;
                }
            }
            write(fds[1], &total, sizeof(total)); /* passing total nr of chars to parent */
            close(fds[0]); /* closing output part of pipe */
            exit(0); /* ending child process */
        }

        /* parent that sends chars to child-reader and writes out amount */
        else
        {
            /* close(fds[0]);  Parent process close output of pipe */
            fp = fopen(argv[1], "r");
            if (fp == 0) {
                perror("Could not read the file.\n");
                exit(1);
            }
            while (fgets(line, MAXLINE, fp) != NULL) {
                n = strlen(line);
                if (n >= 0) {
                    line[n]='\0';
                    if (write(fds[1], line, n) != n) {
                        perror("write error in pipe");
                        exit(1);
                    }
                }
                else {
                    perror("problem with fgets");
                    exit(1);
                }
            }

            int nrofchars;
            read_bytes = read(fds[0], &nrofchars, sizeof(nrofchars));
            printf("The file has %d nr of chars between a-z\n", nrofchars); //<-- Here it f**ks up, it gives me 1153416175
            close(fds[1]); /* closing input part of pipe */
            wait(NULL); /* waits for child to read end of file */ 
        }
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:57:48.267

管道不是双向通信，它是单向的，fd[0] 是读端，fd[1] 是写端。

您的代码使用一个管道作为双向（您注释掉了 FD 的关闭，假设它会变成双向），这就是您得到未定义行为的原因。

如果您想要双向，则需要两个管道:-) 或者您可以使用 socketpair(2) 创建双向 IPC fds。

如果您需要更多帮助，请发表评论。

# javascript - jQuery选择多个按钮

> ID：15594542
> 
> 赞同：0
> 
> 时间：2013-03-24T02:34:50.383
> 
> 标签：javascript, jquery, loops, foreach

我有一个 p 标签列表，每个标签旁边都有一个按钮。单击该按钮后，我想让该特定 p 标签显示在另一个 div 中

我的主要问题是：我不知道如何使两个元素相关联，这样当我点击某个按钮时，只有按钮旁边的 p 标签会受到影响。我可以用一个按钮和一个段落来做到这一点，但我不知道如何用多个来做到这一点。

这是我的 HTML（单击按钮，将 p 标签移动到另一个 div 框）：

```
 <div id="items">
             <p>item 1</p><button>add</button>
             <p>item 2</p><button>add</button>
             <p>item 3</p><button>add</button>
        </div>
        <div id="items2">

        </div> 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:43:47.897

您可以使用 jQuery prev() 来获取前一个 p 标签，如下所示：

```
var products = [];
$('#items button').click(function () {
    var x = $(this).prev().html();
    products.push(x);
    console.log(products);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:40:54.470

您将按钮放在`<p>`标签内，然后按如下方式调用`parent()`方法：

HTML：

```
<p>item 1
    <button>add</button>
</p> 
```

查询：

```
$('button').click().parent().append("hello"); 
```

更好的方法是给

将个别类样式标记为：

```
<p class="i1">item 1</p><button class="i1">add</button>
<p class="i2">item 2</p><button class="i1">add</button>

$('button').click(function(){
    var c = $(this).getClass();
    $("."+c).do_any_thing_u_want();  
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T02:43:34.160

`prev`是您要查找的命令：

```
$('button').prev().appendTo($('#items2')) 
```

文档：[http ://api.jquery.com/prev/](http://api.jquery.com/prev/)

# sublimetext2 - PersistentRegexHighlight - 请提供更详细的示例

> ID：15594543
> 
> 赞同：0
> 
> 时间：2013-03-24T02:34:59.743
> 
> 标签：sublimetext2, sublimetext

使用现有文档作为指南，是否有人可以给我一个更详细的示例，`PersistentRegexHighlight`以使用特定语法（例如，LaTeX 或不同的语法，任何更容易的）实现插件。也许我们可以做一些简单的事情，比如下划线*和*改变`[Ff]oo`.

* * *

我对如何确定是什么感到困惑`[Ff]oo`。在我的常规主题文件中，`<string>Keyword</string>`会影响大多数 LaTeX 代码的颜色。在`LaTeX.tmLanugage`文件中，开头提到了七个键——例如，`keyword.control.preamble.latex`. 在这一点上，我最好的猜测是它`[Ff]oo`可能是一个预定义的语言文件键，例如`keyword.control.preamble.latex`.

* * *

我假设这个正则表达式代码进入`PersistentRegexHighlight.sublime-settings`，或者，可能是用户语法特定文件（例如，`LaTeX.sublime-settings`）。

```
{
  "regex": [{
    "pattern": "[Ff]oo",
    "color_scope": "color.scope.name",
    "ignore_case": true
  }, {
    "pattern": "constant.language",
    "color_scope": "constant.language"
  }]

  "regex": [{
    "pattern": "Bar",
    "color": "00FF00",
    "ignore_case": false
  }]
} 
```

* * *

我假设此代码进入用户指定的主题文件。我不明白我们在哪里得到`regex.highlight.one`，因为它没有被引用`PersistentRegexHighlight.sublime-settings`。

```
<dict>
    <key>name</key>
    <string>Regex Highlight</string>
    <key>scope</key>
    <string>regex.highlight.one</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#75715E</string>
    </dict>
</dict> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:26:58.157

必要的免责声明。我是 PersitsentRegexHighlight 插件的作者/维护者。现在在这里完成是一个更好的例子。

我以为我已经包含了一个带有“下划线”的示例，但我想我忘记了。对于下划线，您将在正则表达式模式中添加一个“下划线”键。如果您使用 ST2，则不能指定下划线样式。至于颜色，您可以指定两种方式之一。第一个是用 key 指定一个十六进制`color`。这将创建一个新的配色方案文件，因此这可能是不可取的。第二种方法是指定范围。如果您查看您的`tmTheme`文件，您将看到一个条目列表。其中一个键是`scope`，用作`color_scope`名称。以下示例将以`[Ff]oo`与字符串相同的颜色突出显示正则表达式并在其下划线。

```
{
    "regex": [{
        "pattern": "[Ff]oo",
        "color_scope": "string",
        "underline": true
    }]
} 
```

这些设置要么放在 PersistentRegexHighlight.sublime-settings 中，要么可以创建为项目特定的。

我建议查看 tmTheme 文件，以更好地了解它在做什么。当然，请随时提出更多问题。

# php - 如何访问与另一个非命名空间类不同的命名空间中的类

> ID：15594545
> 
> 赞同：0
> 
> 时间：2013-03-24T02:35:14.500
> 
> 标签：php, codeigniter, class, namespaces

我有一个没有命名空间的类……我有另一个确实有命名空间的类……如果我尝试从非命名空间访问命名空间类，它找不到它。如何告诉我的班级使用 PHP 访问新命名空间中的其他班级？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:42:47.227

在无命名空间类的名称前加上`\`. 例如，要`DateTime`在命名空间中创建 a，您可以使用：

```
<?php namespace bar;

class Foo {
  function hello() {
    echo new \DateTime();
  }
} 
```

相反，您可以通过在类前面加上命名空间*和*a来访问命名空间类`\`：

```
<?php
  $f = new \bar\Foo();
  $f->hello(); 
```

# php - PHP MySQL 使用的命令不允许

> ID：15594547
> 
> 赞同：2
> 
> 时间：2013-03-24T02:35:44.603
> 
> 标签：php, mysql, ubuntu, joomla

我正在尝试在 MySQL 中使用 LOAD DATA LOCAL INFILE 命令，但我在 PHP/Joomla 中不断收到错误消息：此 MySQL 版本不允许使用的命令

我花了很长时间在谷歌上搜索，但我看到的唯一建议是将 local-infile = 1 添加到我的 my.cnf 文件中（我已经在 [client]、[mysql] 和 [ mysqld]）。

此外，如果我从命令行从我的 Apache 服务器连接到 MySQL 服务器（所以不使用 PHP），我可以毫无问题地运行 LOAD DATA LOCAL（所以它不可能是权限问题）。

我还检查了 php.ini，果然，mysqli.allow_local_infile 设置为“开”。

我在这里错过了什么吗？您是否必须在 Joomla 中做一些特别的事情才能使其正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T12:42:50.167

[我刚刚在这里](https://stackoverflow.com/questions/14348257/using-mysql-load-statment-in-php-fails-but-doing-it-via-command-line-works/16691837#16691837)回答了一个类似的问题，也许它可以帮助：

从 MySQL 5.0 升级到 5.5 后，我发现我突然必须在 PHP 中创建连接时专门启用 LOCAL INFILE。

使用 mysql：

```
mysql_connect(server,user,code,false,128); // 128 enables LOCAL INFILE
mysql_select_db(database); 
```

使用 mysqli：

```
$conn = mysqli_init();
mysqli_options($conn, MYSQLI_OPT_LOCAL_INFILE, true);
mysqli_real_connect($conn,server,user,code,database); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T20:34:21.493

我遇到了同样的问题，在我的情况下，Joomla 用户缺乏 root 的权限；为 J 用户提供完全权限解决了它，但后来我的组件用于分发，所以我改为使用标准 .sql 文件并手动解析/创建它们。希望这可以帮助。

# css - 如何使自定义 css 字体呈现完全像设计

> ID：15594554
> 
> 赞同：7
> 
> 时间：2013-03-24T02:36:52.920
> 
> 标签：css, fonts

我正在与一些非常出色的设计师合作。在翻译他们的设计时，他们问我为什么有时我们不完全按照他们的设计中描述的那样渲染非系统字体。附在此问题的图片中可以显示一个最近的示例（忽略红色注释）：

![在此处输入图像描述](../Images/5e8f7790a88f831355549b3826a8801b.png)

我通过 javascript include 使用来自 fonts.com 的字体，它允许我在我的 css 中使用新的字体系列。我想提请您注意两件事：

a) 在左侧，注意描述文本“In an effort to ...”比“Lorem ipsum ...”粗得多。字体为“Droid Serif W01 Italic”。

b) 在右边，注意“MEET ONE”比“COMMERZBANK”要粗得多。字体系列是“UniversLTW01-57Condense 723821”。

我确定字体粗细：正常。然而，在某些计算机上，事情仍然看起来很大胆……而且它似乎因您使用的操作系统和浏览器而异。似乎我可以以美观的方式修改这些字体的重量的唯一方法是选择字体系列的另一种变体，例如倾斜或压缩版本（如果存在）。但很多时候，我仍然无法在所有不同的操作系统和浏览器组合上正确呈现。

大家是怎么解决这些问题的呢？无论查看者的操作系统和浏览器如何，我是否可以使用一些技术来使字体完全按照设计中的描述呈现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T02:48:24.340

根据我的经验，我总是发现网络上的字体渲染远不如 Photoshop 或其他设计工具中的好。这通常会导致这样的问题。

在 Photoshop 中，设计师可以使用“额外”设置，例如：“锐利”、“清脆”、“平滑”和“强”。所有这些变体使字体渲染更好。但是，我们作为开发人员无法使用这些属性。

这一切都归结为所有浏览器以不同方式实现的字体的抗锯齿。让字体在所有浏览器中以相同的方式呈现是不可能的。这是只使用专门为网络创建的字体的原因，因为它们旨在在最常见尺寸的屏幕上具有良好的抗锯齿效果。

但是，您可以尝试一些技巧。我对他们几乎没有经验，但希望我的背景答案和这些链接能给你灵感，让你在哪里可以找到关于这个复杂问题的更多信息。

对我来说，左边的图像看起来像是一个经典的抗锯齿问题。正确的图片，我不太确定。它几乎看起来像另一种字体，大小应该足够大才能正确呈现。

如果您想阅读更多内容，请查看这些链接，希望它们对您有所帮助：

[CSS 是否支持文本抗锯齿，例如“清晰、锐利等”？](https://stackoverflow.com/questions/5811166/does-css-support-text-anti-aliasing-such-as-crisp-sharp-etc-yet)

[如何在网页中进行字体抗锯齿？](https://stackoverflow.com/questions/4075023/how-to-do-font-antialiasing-in-web-page)

[Firefox 和 Opera 中的 Webfont 平滑和抗锯齿](https://stackoverflow.com/questions/11459746/css3-webfont-smoothing-and-antialiasing-in-firefox-and-opera)

[http://blog.typekit.com/2010/10/21/type-rendering-web-browsers/](http://blog.typekit.com/2010/10/21/type-rendering-web-browsers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:56:21.530

“@font-face CSS 规则允许作者指定在线字体以在其网页上显示文本。通过允许作者提供自己的字体，@font-face 消除了依赖用户拥有的有限字体数量的需要安装在他们的计算机上。@font-face at-rule 不仅可以在 CSS 的顶层使用，还可以在任何 CSS 条件组 at-rule 中使用。-MDN

```
 @font-face {
    [font-family: <family-name>;]?
    [src: [ <uri> [format(<string>#)]? | <font-face-name> ]#;]?
    [unicode-range: <urange>#;]?
    [font-variant: <font-variant>;]?
    [font-feature-settings: normal|<feature-tag-value>#;]?
    [font-stretch: <font-stretch>;]?
    [font-weight: <weight>];
    [font-style: <style>];
    } 
```

[https://developer.mozilla.org/en-US/docs/CSS/@font-face](https://developer.mozilla.org/en-US/docs/CSS/@font-face)

它不是一个完美的解决方案，但它可能会让您更接近您想要的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T04:46:35.613

我们面临您提出的相同问题，我不会重复这里已经涵盖的好信息。抗锯齿和 CSS 只是图片的一部分。所以我想谈谈字体代工厂和许可如何影响事物。

在 PC 端，像 fonts.com 和[Typekit](http://www.typekit.com)这样的网络字体服务的现实通常意味着结果明显更差。这与浏览器无关。

当您使用 webfonts 服务时，您将受到该服务如何处理字体嵌入的支配。

但是，如果您使用的是针对 Web 使用进行了优化的字体并且可以购买，您可以在其中直接控制字体文件的嵌入，[这篇文章有一个很好的技巧来改进 Chrome for Windows 上的渲染。](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome)

FontSpring、MyFonts、Commercial Type 等为直接嵌入销售（或免费的 Google Webfonts）字体的代工厂的例子。

[Hoefler Type](http://www.hoeflertype.com)刚刚推出了他们自己的字体服务，该服务在 PC 上呈现精美。在您不直接托管或嵌入字体的意义上，它类似于 fonts.com 和 Typekit。他们已经达到了前所未有的水平来解决网络字体的所有常见问题。他们调整了字体粗细的比例，并为各个浏览器定制了部署。限制是，像许多其他代工厂一样，到目前为止，您只能购买他们的字体。

由于这些复杂性，我们通常会在项目的早期考虑单个字体的 Web 使用选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-14T04:58:49.817

根据个人经验和高级研究，我发现使用 sIFR（可缩放 Inman Flash 替换）或纯 JavaScript 替代品（如 Typeface（[http://typeface.neocracy.org:81/](http://typeface.neocracy.org:81/)）和Cufon ( [http://cufon.shoqolate.com/generate/](http://cufon.shoqolate.com/generate/) )。我使用 Cufon 已经有一段时间了，我发现它是接近您目前正在寻找的结果的最简单和最有效的方法。如果您还没有遇到这些解决方案，希望对您有所帮助。

# c++ - 如何在 C++ 中使用模板和 OOP？

> ID：15594555
> 
> 赞同：0
> 
> 时间：2013-03-24T02:37:10.597
> 
> 标签：c++, oop, templates, struct

我希望对一组结构执行操作，例如加法，如下例所示。程序报错，`no match for 'operator+' (operand types are 'Gravity' and 'Friction')`。如何正确实施？

```
#ifndef FORCE_HPP
#define FORCE_HPP

struct Physics{    // not sure if this is needed

  struct Gravity{   // force type 1, which computes gravity

    int operator()(double t) {   //gravity force is computed based on a parameter t, and returns an int
        ...
        return Fg;
    }
};

  struct Friction{    // force type 2, which computes friction

    int operator()(double t) {   //friction force is computed based on parameter t, and returns an int
        ...
        return Fs;
    }
};

  template< typename F1, typename F2>
  Point make_physics(F1 first, F2 second){   // there can be 2 gravity forces, 2 friction forces, or 1 gravity and 1 friction force in a problem. As a result, use a template
    return first + second;
  }

};
#endif 
```

如果程序正常工作，当我执行以下操作时

```
int main(){
...
make_pair(t, make_physics(Gravity(), Friction()) );
...
} 
```

我应该得到一对时间和为那个时间计算的力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:51:56.397

那里没有 OOP，而且您从未提到该程序应该做什么。但是朝着最明显的方向运行并应用快速修复，

```
#ifndef FORCE_HPP
#define FORCE_HPP

namespace Physics{ // use a namespace, not an unusable struct

  struct Force { // OOP base class for various forces
    double value; // one dimension for now

    operator double () { // implicitly convert to a scalar equal to magnitude
      return value;
    }
  };

  struct Gravity : public Force {
  };

  struct Friction : public Force {
  };

  template< typename F1, typename F2>
  double add_scalars(F1 first, F2 second){ 
    return first + second; // sort of pointless, but there you have it
  }

}
#endif 
```

# haskell - 具有多个输入的熔断导管

> ID：15594556
> 
> 赞同：9
> 
> 时间：2013-03-24T02:37:15.557
> 
> 标签：haskell, conduit

我正在尝试创建一个可以使用多个输入流的管道。我需要能够以无特定顺序（例如，不交替）等待一个或另一个输入流，从而使 zip 无用。这里没有任何并行或不确定的事情发生：我在一个流或另一个流上等待。我希望能够编写类似于以下的代码（分别在第一个或第二个输入流上的 where`awaitA`和`awaitB`await ）：

```
do
  _ <- awaitA
  x <- awaitA
  y <- awaitB
  yield (x,y)
  _ <- awaitB
  _ <- awaitB
  y' <- awaitB
  yield (x,y') 
```

我最好的解决方案是让内部单子成为另一个管道，例如

```
foo :: Sink i1 (ConduitM i2 o m) () 
```

然后允许

```
awaitA = await
awaitB = lift await 
```

这主要是有效的。不幸的是，这似乎使得在外导管完全连接之前很难熔合到内导管。我尝试的第一件事是：

```
fuseInner :: Monad m =>
                Conduit i2' m i2 -> 
                Sink i1 (ConduitM i2 o m) () -> 
                Sink i1 (ConduitM i2' o m) ()
fuseInner x = transPipe (x =$=) 
```

但这不起作用，至少在`x`有状态的情况下，因为`(x =$=)`多次运行，`x`每次都有效地重新启动。

有没有办法写 fuseInner，而不是闯入导管的内部（看起来会很乱）？有没有更好的方法来处理多个输入流？我只是远远超出了管道的设计目的吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T09:45:09.533

如果您想组合两个`IO`生成的流，那么加布里埃尔的评论就是解决方案。

否则，您不能等待两个流，哪个流首先产生一个值。导管是单线程和确定性的 - 它一次只处理一个管道。但是您可以创建一个函数来交错两个流，让它们决定何时切换：

```
{-# OPTIONS_GHC -fwarn-incomplete-patterns #-}
import Control.Monad (liftM)
import Data.Conduit.Internal (
    Pipe (..), Source, Sink,
    injectLeftovers, ConduitM (..),
    mapOutput, mapOutputMaybe
  )

-- | Alternate two given sources, running one until it yields `Nothing`,
-- then switching to the other one.
merge :: Monad m
      => Source m (Maybe a)
      -> Source m (Maybe b)
      -> Source m (Either a b)
merge (ConduitM l) (ConduitM r) = ConduitM $ goL l r
  where
    goL :: Monad m => Pipe () () (Maybe a) () m () 
                   -> Pipe () () (Maybe b) () m ()
                   -> Pipe () () (Either a b) () m ()
    goL (Leftover l ()) r           = goL l r
    goL (NeedInput _ c) r           = goL (c ()) r
    goL (PipeM mx) r                = PipeM $ liftM (`goL` r) mx
    goL (Done _) r                  = mapOutputMaybe (liftM Right) r
    goL (HaveOutput c f (Just o)) r = HaveOutput (goL c r) f (Left o)
    goL (HaveOutput c f Nothing) r  = goR c r
    -- This is just a mirror copy of goL. We should combine them together to
    -- avoid code repetition.
    goR :: Monad m => Pipe () () (Maybe a) () m ()
                   -> Pipe () () (Maybe b) () m ()
                   -> Pipe () () (Either a b) () m ()
    goR l (Leftover r ())           = goR l r
    goR l (NeedInput _ c)           = goR l (c ())
    goR l (PipeM mx)                = PipeM $ liftM (goR l) mx
    goR l (Done _)                  = mapOutputMaybe (liftM Left) l
    goR l (HaveOutput c f (Just o)) = HaveOutput (goR l c) f (Right o)
    goR l (HaveOutput c f Nothing)  = goL l c 
```

它处理一个源直到它返回`Nothing`，然后切换到另一个源，等等。如果一个源完成，另一个源被处理到最后。

例如，我们可以组合和交错两个列表：

```
import Control.Monad.Trans
import Data.Conduit (($$), awaitForever)
import Data.Conduit.List (sourceList)

main =  (merge (sourceList $ concatMap (\x -> [Just x, Just x, Nothing]) [  1..10])
               (sourceList $ concatMap (\x -> [Just x, Nothing]) [101..110]) )
         $$ awaitForever (\x -> lift $ print x) 
```

* * *

如果您需要多个来源，`merge`可以适应类似的东西

```
mergeList :: Monad m => [Source m (Maybe a)] -> Source m a 
```

这将在给定的源列表中循环，直到它们全部完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T01:33:18.980

这*可以*通过潜入导管内部来完成。我想避免这种情况，因为它看起来非常混乱。根据这里的回复，听起来没有办法解决它（但我真的很感激更清洁的解决方案）。

关键难点在于它`(x =$=)`是一个纯函数，但要`transPipe`给出正确答案，它需要一种有状态的、类似函数的东西：

```
data StatefulMorph m n = StatefulMorph
    { stepStatefulMorph :: forall a. m a -> n (StatefulMorph m n, a)
    , finalizeStatefulMorph :: n () } 
```

步进`StatefulMorph m n`接受一个值 in`m`并返回 in `n`，该值和下一个`StatefulMorph`应该用于转换下一个`m`值。最后一个`StatefulMorph`应该最终确定（在“有状态`(x =$=)`”的情况下，最终确定`x`管道。

Conduit fusion 可以实现为`StatefulMorph`, 使用代码`pipeL`稍作改动。签名是：

```
fuseStateful :: Monad m
             => Conduit a m b
             -> StatefulMorph (ConduitM b c m) (ConduitM a c m) 
```

我还需要替换使用值而不是函数的`transPipe`（的特殊情况）。`hoist``StatefulMorph`

```
class StatefulHoist t where
    statefulHoist :: (Monad m, Monad n)
                  => StatefulMorph m n
                  -> t m r -> t n r 
```

可以使用 for 的代码编写一个 for 的`StatefulHoist`实例，并进行一些小的更改。`ConduitM i o``transPipe`

`fuseInner`然后很容易实现。

```
fuseInner :: Monad m
          => Conduit a m b
          -> ConduitM i o (ConduitM b c m) r
          -> ConduitM i o (ConduitM a c m) r
fuseInner left = statefulHoist (fuseStateful left) 
```

我在这里写了更详细的解释，并[在](https://github.com/bjoeris/MultiConduit)[这里](http://bjoeris.wordpress.com/)发布了完整的代码。如果有人可以提出更清洁的解决方案，或者使用管道公共 API 的解决方案，请发布。

感谢所有的建议和意见！

# java - recordStrokes 方法的 If 语句

> ID：15594557
> 
> 赞同：0
> 
> 时间：2013-03-24T02:37:55.363
> 
> 标签：java

方法是记录球员完成一个洞时的击球次数。成功记录笔画时，该方法返回 true。有2个注意事项：（1）该洞必须按顺序记录，并且必须以1开头。如果收到的洞是乱序的，则不记录分数并返回false （2）洞号也必须有效。您不能为小于 1 或大于球场上的洞数的洞记录分数。代码给出了 java.lang.NullPointerException。这是什么意思，我该如何解决

注意：holesPlayed 是一个实例变量，赋值为 0

这是我所拥有的：

```
public boolean recordStrokes(int holeNumber, int strokes) {
    if ((holeNumber >= 1) && (holeNumber <= Course.NUM_OF_HOLES) 
        && (holeNumber == holesPlayed + 1)) {
        scores[holeNumber -1] = strokes;
        holesPlayed = holesPlayed + 1;
        return true;
     } else {
        return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:41:59.330

当`holeNumber`1 上交时，`holesPlayed`是 0，所以这个失败：`holeNumber <= this.holesPlayed`.

# python - 更改easy_install的python路径

> ID：15594559
> 
> 赞同：0
> 
> 时间：2013-03-24T02:38:00.473
> 
> 标签：python, easy-install

在多次尝试使用 macports 后，我正在使用 mac 我决定切换到常规 python 路径，所以现在我的 python 路径是

```
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

但是当我安装 django 时，我的 mac 仍然使用苹果安装的 python，我如何告诉 easy_install 使用上面的 python 路径而不是苹果安装 python：

```
[~/mysite/djangosite]$sudo easy_install django==1.5
Searching for django==1.5
Best match: Django 1.5
Processing Django-1.5-py2.6.egg
Django 1.5 is already the active version in easy-install.pth
Installing django-admin.py script to /usr/local/bin

Using /Library/Python/2.6/site-packages/Django-1.5-py2.6.egg
Processing dependencies for django==1.5
Finished processing dependencies for django==1.5
anu@localhost:[~/mysite/djangosite]$which python
/Library/Frameworks/Python.framework/Versions/2.7/bin/python 
```

我试过哪个`easy_install`来看看什么`easy_install`被使用了，`/usr/bin/easy_install`我也进去`/Library/Frameworks/Python.framework/Versions/2.7/bin`检查了easy_install，但我没有找到easy_install ..

```
localhost:[/Library/Frameworks/Python.framework/Versions/2.7/bin]$ls
2to3            idle2           pydoc2.7        python2         python2.7-32        pythonw2        smtpd.py
2to3-2          idle2.7         python          python2-32      python2.7-config    pythonw2-32     smtpd2.7.py
2to3-2.7        pydoc           python-32       python2-config      pythonw         pythonw2.7      smtpd2.py
idle            pydoc2          python-config       python2.7       pythonw-32      pythonw2.7-32 
```

`/Library/Frameworks/Python.framework/Versions/2.7/bin/easy_install*`什么都不给，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:45:13.730

做 a`which easy_install`并确保你得到了下的那个`/Library/Frameworks/Python.framework/Versions/2.7/bin`，或者直接`easy_install`在那个目录下运行。之后你应该在你想要的目录下安装 django。

# javascript - pushState：如何在不重定向的情况下添加查询字符串

> ID：15594563
> 
> 赞同：0
> 
> 时间：2013-03-24T02:38:37.130
> 
> 标签：javascript, html, url, pushstate, history.js

我正在研究这项技术：History API pushState (HTML5)

我需要使用带有重定向重定向的 URL 的命令，因为我有服务器的 CherryPy。

我无法从 Cherrypy 传递数据（使用 Mako 模板到 Javascript），但我想更改 url。

旧网址是

```
file:///media/DATA/prototypefin4/s.html 
```

`foo=1&foo=2`并使用 History.pushState 在 Url 中自动添加(variable s)

```
file:///media/DATA/prototypefin4/s.html?=foo=1&foo=2 
```

**但是如何？**

我的代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Example - History API pushState</title>
</head>
<script src="http://balupton.github.com/history.js/vendor/jquery.js"></script>
<script src="http://balupton.github.com/history.js/scripts/bundled/html4+html5/jquery.history.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<body>

<input id = 'button1' type = 'button' value = 'history.pushState' onclick="updateHistory()"/>

<script type = 'text/javascript'>

var count ="?foo=1&foo=2";

function updateHistory()
{

 History.pushState(count,null,file:///media/DATA/prototypefin4/s.html);

}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:47:12.477

您的脚本在语法上无效。根据[文档](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，以下参数是正确的：

```
History.pushState(null, "", "file:///media/DATA/prototypefin4/s.html"+count); 
```

# sql - Ltree找到大多数孩子postgresql的父母

> ID：15594565
> 
> 赞同：0
> 
> 时间：2013-03-24T02:38:49.357
> 
> 标签：sql, postgresql

我试图找到孩子最多的父母。我觉得这不应该那么难，但我发现自己在挣扎。

我正在使用 postgresql 和 Ltree。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:56:30.533

这与任何其他情况的逻辑相同，找到一个可以为您提供父级并按其分组的函数。这应该有效：

```
SELECT subpath(path,0,1), count(*) 
FROM test
GROUP BY subpath(path,0,1)
ORDER BY count(*) DESC limit 1; 
```

[http://sqlfiddle.com/#!12/8fb17/5](http://sqlfiddle.com/#!12/8fb17/5)

# javascript - 如何使用 jQuery .When .done

> ID：15594567
> 
> 赞同：7
> 
> 时间：2013-03-24T02:39:11.173
> 
> 标签：javascript, jquery, promise

我正在尝试在另一个功能完成后运行一个功能。

```
 $.when(saveCanvas(canvas)).done(setWallPaper()); 
```

每个函数都可以正常工作，但是当我运行上面的代码时，它只运行第一个函数。

我需要改变什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T02:46:20.843

根据对[另一个 SO question](https://stackoverflow.com/questions/11552347/jquery-when-done-dont-work-for-me)的评论，`$.when`期望将延迟对象作为参数。如果您不传递任何内容，则将立即调用回调。

似乎没有`setWallPaper()`工作，因为它实际上之前正在运行`saveCancas(canvas)`？`saveCanvas()`实际上不是[延迟对象](http://api.jquery.com/category/deferred-object/)，它`when`期望它是。要使其成为延迟对象，请添加`dfr = $.Deferred();`到`saveCanvas()`函数的开头和`return dfr.promise();`结尾。查看[此 SO 答案](https://stackoverflow.com/a/4980394/761793)以获取更多详细信息。

```
function saveCanvas(canvas)
{
    dfr = $.Deferred();
    //Your code
    return dfr.promise();
} 
```

阅读更多：[http ://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-28T21:02:12.267

现在回想起来，这似乎是它与 jQuery 一起工作的方式：

```
function f1() {
	alert("function one");
}

$.when( f1() ).done(function() {
  alert("function 1 is done running function two");
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

注意：这与我在问题中发布的方法相同，因此基本上它应该有效。尽管 jQuery 在过去 3 年中可能发生了变化。很可能是调用函数的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-30T06:52:33.943

另一个疯狂的猜测：

```
$.when(saveCanvas(canvas)).done(function(){
    setWallPaper()
}); 
```

# ios - FBFriendPickerViewController 获取任何用户

> ID：15594569
> 
> 赞同：1
> 
> 时间：2013-03-24T02:39:43.950
> 
> 标签：ios, facebook, uiviewcontroller

有什么方法可以设置 FBFriendPickerViewController 以获取给定 ID 集的用户，其中一些不是我的朋友（但例如朋友的朋友）所必需的。如果没有，是否有任何开源控制器可以执行此类操作？

# android - 在 Google TV 上更改频道

> ID：15594574
> 
> 赞同：0
> 
> 时间：2013-03-24T02:40:22.697
> 
> 标签：android, parsing, uri, google-tv

我正在尝试为 Google TV 编写一个简单的应用程序，它会生成一个 1-10 的随机数，然后随机选择一个频道（501-510）并加载它。

我已经尝试过官方的谷歌文档，但官方的示例项目没有编译。我还阅读[了 GTV 频道列表/更改 API/示例在 LG G2 上是否损坏？](https://stackoverflow.com/questions/14589135/is-the-gtv-channel-listing-change-api-sample-is-broken-on-lg-g2)并试图将其调整为谷歌版本，但应用程序在加载时崩溃。

我相信这一定是一个简单的修复。我不需要使用[https://developers.google.com/tv/android/docs/gtv_provider](https://developers.google.com/tv/android/docs/gtv_provider)上的教程获取有关频道的信息或搜索它们。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:33:05.493

如果您使用下面的代码，对提供程序的访问已经改变，事情应该会有所改善。

## 权限：

```
<uses-permission android:name="com.google.android.tv.permission.READ_CHANNELS"/>
<uses-permission android:name="com.google.android.tv.mediadevices.permission.READ_STREAMS"/> 
```

## 代码：

```
 public abstract class ChannelList {

    private static ChannelList mCL=null;

    public abstract String getPROVIDER_URI();

    public abstract String getCALL_SIGN_COLUMN();

    public abstract String getURI_COLUMN();

    public abstract String getNUMBER_COLUMN();

    public abstract String getNAME_COLUMN();

    public static ChannelList getChannelList() {
        if (mCL != null)
            return mCL;

        int mGtvLibraryVersion = 0;
        try {
            Class<?> cl = Class.forName("com.google.android.tv.Version");
            mGtvLibraryVersion = cl.getField("GTV_SDK_INT").getInt(null);
        } catch (Exception ex) {}

        Log.d("Resolution Test", "Version " + mGtvLibraryVersion);

        mCL= mGtvLibraryVersion > 0 ? new Version3ChannelList(): new Version2ChannelList();
        return mCL;
    }

    /**
     * Use the getChannelList factory to obtain an instance of a subclass of
     * ChannelList
     */

    private ChannelList() {
    }

    @Override
    public String toString() {
        return "SDK Provider: " + getPROVIDER_URI() + "\n" +
                "Columns: " + getCALL_SIGN_COLUMN() + " " + getURI_COLUMN() + " " + getNUMBER_COLUMN() + " "
                + getNAME_COLUMN();
    }

    public static final class Version2ChannelList extends ChannelList {

        @Override
        public String getPROVIDER_URI() {
            return "content://com.google.android.tv.provider/channel_listing";
        }

        @Override
        public String getCALL_SIGN_COLUMN() {
            return "callsign";
        }

        @Override
        public String getURI_COLUMN() {
            return "channel_uri";
        }

        @Override
        public String getNUMBER_COLUMN() {
            return "channel_number";
        }

        @Override
        public String getNAME_COLUMN() {
            return "channel_name";
        }

    }

    public static final class Version3ChannelList extends ChannelList {

        @Override
        public String getPROVIDER_URI() {
            return "content://com.google.tv.mediadevicesapp.MediaDevicesProvider/channel_list";
        }

        @Override
        public String getCALL_SIGN_COLUMN() {
            return "subName";
        }

        @Override
        public String getURI_COLUMN() {
            return "url";
        }

        @Override
        public String getNUMBER_COLUMN() {
            return "channelNumber";
        }

        @Override
        public String getNAME_COLUMN() {
            return "name";
        }

    } 
```

# php - 如何连接 PHP 句子/语句

> ID：15594581
> 
> 赞同：0
> 
> 时间：2013-03-24T02:41:58.543
> 
> 标签：php, html, web

当我们使用 HTML + PHP 时，假设我们想要输出类似“Skill5”的内容，其中“5”是从 php 变量 $number 加载的，我们可以执行以下操作：

```
Skills<?php echo $number;?> 
```

但是，现在我想在 PHP 中做同样的事情，我有如下一句话：

```
if($skills and $skills->skill5){

} 
```

我也想从 $variable $number 加载数字 5 。

所以我尝试了以下事情：

```
if($skills and $skills->skill.$number){

} 
```

但是，这是行不通的。这个 $number 在这里作为“null”工作，即使它设置为 5。

有任何想法吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:51:26.843

假设 $skills->skill = foo 和 $number = 5;

```
$skills->skill.$number 
```

会回来`foo5`

改为这样做：

```
$pubVar = 'skill' . $number;
$skills->$pubVar 
```

所以你实际上拉了`skill5`公共变量。

# git - git commit -- 使用 notepad++ 作为默认编辑器时过早中止提交

> ID：15594585
> 
> 赞同：0
> 
> 时间：2013-03-24T02:42:44.610
> 
> 标签：git, commit

我正在尝试使用

```
git commit -a 
```

我已经编辑了全局配置以使用 notepad++ 而不是 vim

```
git config --global core.editor "'C:\Program Files (x86)Notepad++\notepad++.exe' -m" 
```

现在，当我尝试使用第一个提到的命令进行提交时，notepad++ 将打开 COMMIT_EDITMSG 文件，但 bash shell 显示“由于提交消息为空而中止提交”，然后返回到提示符。

我只是希望能够使用 notepad++ 来编辑这个文件，并且仍然可以在不取消它的情况下进行提交。

任何帮助是极大的赞赏。

# machine-learning - Mahout 中的高维数据图

> ID：15594586
> 
> 赞同：0
> 
> 时间：2013-03-24T02:42:46.377
> 
> 标签：machine-learning, cluster-analysis, mahout, spectral

我有兴趣在 Mahout 中对高维数据运行谱聚类算法。我的问题是如何获取高维数据向量列表并创建最近邻图？这是在 Mahout 中完成的，还是有地图可简化的方法来做这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:31:00.760

项目中没有这样的东西，不是为了制作 k-NNG。光谱聚类，是的。是的，我确信您可以在 MapReduce 中实现这一点。问题是如何比暴力计算 k 最近邻做得更好。

# javascript - 附加现有的 onClick 值

> ID：15594588
> 
> 赞同：1
> 
> 时间：2013-03-24T02:42:51.013
> 
> 标签：javascript, onclick

我正在使用 javascript，需要获取现有 onclick 的值并附加到它。我不是要替换当前的 onclick，而是要附加到它的前面或结尾。但是这项工作的所有不同迭代都失败了。

快速示例：

```
<pre>
<a href="blah" id="tabA" onclick="alert("this");"
<script>
   function test() {
      alert("that") ;
   }
document.getElementById('tabA').onclick = "test();" + document.getElementById('tabA').getAttribute('onclick') ;
</script>
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T06:39:42.827

使用 .onclick 事件时，您应该使用函数，然后使用操作：

```
document.getElementById("tabA").onclick = function()
{
alert("hello world")//this will work
}

document.getElementById('tabA').onclick = "test();" + document.getElementById('tabA').getAttribute('onclick') ;//fail since events are not variables to store values. 
```

所以，无论你想做什么，那样它都行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T17:49:33.700

我知道这已经很老了，但是我需要做同样的事情。

我通过使用事件解决了这个问题；

```
obj.addEventListener('click', function(){ test(); }, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:06:58.670

我不知道我是否明白你的意思。我的解决方案是

```
 <a href="blah" id="tabA" onclick="alert('this');">tabA</a>
    <script>
       function test() {
          alert("that") ;
       }
       var oldClick = document.getElementById('tabA').getAttribute('onclick') ;
       var newClick = function(){
            test();
            eval(oldClick);
       }
    document.getElementById('tabA').onclick = newClick;
    </script> 
```

当我单击“tabA”时，它会提示“那个”，然后是“这个”。 [http://jsfiddle.net/x3Xds/](http://jsfiddle.net/x3Xds/)

# java - 观察者可观察设计模式 - 使具有静态成员的类成为观察者？

> ID：15594589
> 
> 赞同：0
> 
> 时间：2013-03-24T02:42:51.950
> 
> 标签：java, design-patterns

我的 C1 类具有所有静态成员（变量和方法）。它还有一个 C2 类型的对象数组 A1，这些对象是可观察的。我希望 C1 成为记录 C2 变化的观察者，然后使用 A1 中包含的引用将这些变化应用于对象。我正在使用 C1 的实例，以便可以将其添加为 C2 对象的观察者。

观察者可观察的设计模式是否适合这种情况？如果是，那么我是否正确应用它？

```
import java.util.*;

class FlightStatusChangeEvent{

int status;
Flight flight;

FlightStatusChangeEvent(int statusCode, Flight flight){

    this.status = statusCode;
    this.flight = flight;

}

public int getStatus(){return this.status;}

public Flight getFlight(){return this.flight;}

}

class Flight extends Observable{

int status;// 0 = on time, -1 = late, +1 = before scheduled time

public void updateStatus(int statusCode){

    this.status = statusCode;
    FlightStatusChangeEvent fsce = new FlightStatusChangeEvent(status, this);
    setChanged();
    notifyObservers(fsce);

}

}

class FlightStatusMonitor implements Observer{

public static ArrayList<Flight> flights = new ArrayList<Flight>();

//keep calling this method every 10 sec to get latest flight status
public void displayStatusOfFlights(){

    //print all flight statuses in array list - flights
}

public void update(Observable flight, Object flightStatusEvent){

    FlightStatusChangeEvent fsce = (FlightStatusChangeEvent) flightStatusEvent;     
    Flight fl = fsce.getFlight();
    int status = fsce.getStatus();

    //find the flight in array flights and then update its status

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T07:43:50.653

这就是在您的案例中如何实现观察者模式：

```
class FlightStatusEvent {

    int status;
    Flight flight;

    FlightStatusEvent(int statusCode, Flight flight) {
        this.status = statusCode;
        this.flight = flight;
    }

    public int getStatus() {
        return this.status;
    }

    public Flight getFlight() {
        return this.flight;
    }

}

class Flight extends Observable {

    int status;// 0 = on time, -1 = late, +1 = before scheduled time

    public void updateStatus(int statusCode) {

        this.status = statusCode;
        FlightStatusEvent fsce = new FlightStatusEvent(status, this);
        setChanged();
        notifyObservers(fsce);

    }

}

class FlightStatusMonitor implements Observer {

    public ArrayList<Flight> flights = new ArrayList<Flight>();

    public void displayStatusOfFlights() {
        for(Flight f : flights) {
            System.out.println("Flight " + f + ", status = " + f.status);
        }
    }

    public void update(Observable flight, Object flightStatusEvent) {
        displayStatusOfFlights();
    }

    public static void main(String[] args) {
        FlightStatusMonitor fsm = new FlightStatusMonitor();

        Flight f1 = new Flight();
        f1.addObserver(fsm);
        Flight f2 = new Flight();
        f2.addObserver(fsm);

        ArrayList<Flight> flights = new ArrayList<Flight>();
        flights.add(f1);
        flights.add(f2);

        fsm.flights = flights;
        fsm.displayStatusOfFlights();

        // this will trigger observer pattern event.
        f1.updateStatus(1);
    }

} 
```

# eclipse - Eclipse Bug：未处理的事件循环异常没有更多的句柄

> ID：15594590
> 
> 赞同：53
> 
> 时间：2013-03-24T02:43:01.613
> 
> 标签：eclipse, swt

我使用 Swing 和 MigLayout 构建了一个 GUI。

我在 Windows 7 Ultimate 上使用 Eclipse 4.2.2（64 位）。每次我单击返回窗口编辑代码时，都会弹出一个窗口，然后提示我重新启动 Eclipse，并且事件日志显示以下内容：

```
 org.eclipse.swt.SWTError: No more handles
    at org.eclipse.swt.SWT.error(SWT.java:4387)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Widget.error(Widget.java:468)
    at org.eclipse.swt.widgets.Control.createHandle(Control.java:704)
    at org.eclipse.swt.widgets.Label.createHandle(Label.java:199)
    at org.eclipse.swt.widgets.Control.createWidget(Control.java:744)
    at org.eclipse.swt.widgets.Control.<init>(Control.java:112)
    at org.eclipse.swt.widgets.Label.<init>(Label.java:101)
    ... 
```

我附上了错误消息的屏幕截图。有没有其他人在 Eclipse 中遇到过这个错误？您知道解决方法或修复方法吗？

![1\. 发生问题的消息](../Images/f5fc79c4399c1f35dfc15b341f81c51a.png)

![2\. 内部错误消息要求我关闭 Eclipse](../Images/52064aea1a1afa2b86bb1f945d6e00a0.png)

![三、活动详情](../Images/7643c775679e9d03061e3fc1dc62d509.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-06T11:56:47.460

我有同样的问题，原来是 TeamViewer 造成的。

在您的 TeamViewer 中转到：

*其他 → 选项 → 高级 → QuickConnect*按钮，对其进行配置并禁用显示*QuickConnect*按钮。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-05-16T04:52:37.230

有一个解决方法：将 Java 编辑器更改为 WindowBuilder。

*Eclipse → Windows → Preferences → File Associations →*，选择*WindowBuilder Editor*作为 Java 默认编辑器。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-05-16T17:22:01.657

正如[Nineroad](https://stackoverflow.com/users/2388416/nineroad)所建议的，安装 WindowBuilder 作为带有 *.java 扩展名的文件的默认编辑器为我解决了这个问题。

在 Eclipse 中，导航到***帮助 > 安装新软件***

将**[http://archive.eclipse.org/windowbuilder/WB/release/R201309271200/4.3](http://archive.eclipse.org/windowbuilder/WB/release/R201309271200/4.3)**添加到“使用”路径，选择所有建议的组件，然后安装 WindowBuilder。

完成后，Eclipse 将请求重新启动。重新启动后，在 Eclipse 中导航到**Window > Preferences**。在 Preferences 对话框中导航到**General > Editor > File Associations**。在“文件关联”列表下，一定要选择***.java**文件类型。底部窗口（标记为“Associated Editors”）应该有*WindowBuilder*作为选项。选择 WindowBuilder 并单击右侧的“默认”，将 WindowBuilder 设置为默认的 *.java 文件编辑器。

这为我修复了**SWT 错误**。

注意：*Eclipse 版本：Kepler Service Release 2 Windows 7 64-bit*

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-02T10:58:30.933

根本就是硬件问题。

如果您有 nView，请关闭桌面管理器。如果是 ATI，请关闭 HydraVision。

这在 Eclipse Kepler (Standard) 和 Android Developer Tools Edition 上运行良好。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-03-10T23:00:05.397

我运行了 DisplayFusion，这是一个用于管理多个显示器的特殊 Windows 程序。关闭它似乎为我解决了这个问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-11T07:39:04.243

简而言之：看看下面的粗体部分是否可以节省您的时间:-)

（此答案可能会有所帮助，但仍未找到源问题。如果令人满意地解决，我将更新我的发现。）

*<更新...>*

*更新：*它再次发生并发生在所有其他文件下方的一个 XML 文件（Tomcats content.xml）的拖动/定位。（由“XML 编辑器”打开：Provider: `Eclipse Web Tools Platform`, Plug-in Name: `XML editor`, Version: `1.0.700.v201005192212`, Plug-in Id: `org.eclipse.wst.xmleditor.doc.user`）

*update2：*在进一步调查时，当我将编辑器移回其他文件（一个区域中所有打开的编辑器）时，错误消失了。此外，它仅在进入或离开此 XML 编辑器时出现，而不是在例如对其进行更改并通过 CRTL+S 保存时出现。除了下面的 JBoss 相关异常发生在 CTRL+S 事件上之外，但与此问题无关（因此它可能根本不相关）。

*update3：*越来越近：因为一段时间以来，出现了一个新的编辑器定位功能。（最初我有点困惑，但现在我明白了，甚至可以从视觉上看出是什么意思以及有什么不同......）。因此，有两种方法可以将编辑器垂直或水平放置在其他编辑器旁边：

1.  将其定位在同一个“面板”内（由一个全局和两个内部面板/边框/矩形围绕编辑器表示）和
2.  将其放置在旧“面板”旁边（由旧面板和新面板周围的矩形框表示。

**因此，将编辑器放入新的“全局”面板 (2.) 效果很好，将其放入新的“本地”面板 (1.) 会导致问题** （这实际上非常有帮助，因为我仍然可以继续非常有效地工作）（也许其他人可以适当地报告这个错误）（它似乎也与上​​面提到的 XML 编辑器无关，因为它也发生在例如属性文件上）

*更新 4：*我在休眠模式下使用 Windows 7。这意味着我不经常启动我的 Eclipse。现在我意识到**Eclipse 本身已经启动了 2 次**（查看任务管理器）（视觉上并使用 ALT+TAB 进行打开的窗口导航，这并不明显）。（停止/杀死所有打开的实例并）重新启动后，问题不再发生。

*更新 5：*在这个重复的问题中，有人说它可以**通过最新的 Windows 更新解决**：[https](https://stackoverflow.com/a/19316804/1915920) ://stackoverflow.com/a/19316804/1915920 。我会自己检查一下，但目前我无论如何都无法重现该问题。

*更新 6：*在另一种情况下，我遇到了这个问题，它似乎与某个属性窗口（在本例中为 Jasper Reports）有关，该窗口根据当前编辑器（如大纲视图）自动更新其内容。因此，**关闭并重新打开（所有）大纲和/或属性窗口**可能是个好主意。

*</...更新>*

该错误通常表明，某些程序（可能）打开了异常多（可能数千？）的操作系统文件句柄。所以应该检查Eclipse外部或内部是否有很多文件同时打开或在短时间内打开，但没有正确关闭（它们可以在视觉上关闭，但操作系统仍然认为它们正在被使用因为应用程序没有以某种方式正确释放文件句柄）。

现在我目前也有这个问题。如果我查看错误日志（Window->Show View->General->Error Log），我可以在之前看到很多以下 org.jboss.ide.eclipse.archives.core.* 异常。由于我现在不使用已安装的 JBoss Developer Studio 插件（可能与此插件相关），并且没有打开任何关联的窗口或编辑器（只有一些工具栏“JBoss Central”和透视“JBoss”按钮）我会有看看如果禁用这些将有助于解决这个零星的问题。此外，我关闭了所有打开的编辑器，重新启动 Eclipse 并打开它们，现在再也看不到这个问题了。

```
Problems occurred when invoking code from plug-in: "org.eclipse.core.resources". 
```

...

```
java.lang.NullPointerException
    at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener$2.visit(WorkspaceChangeListener.java:74)
    at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:69)
    at org.eclipse.core.internal.events.ResourceDelta.accept(ResourceDelta.java:49)
    at org.jboss.ide.eclipse.archives.core.WorkspaceChangeListener.resourceChanged(WorkspaceChangeListener.java:70)
    at org.eclipse.core.internal.events.NotificationManager$1.run(NotificationManager.java:291)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.NotificationManager.notify(NotificationManager.java:285)
    at org.eclipse.core.internal.events.NotificationManager.broadcastChanges(NotificationManager.java:149)
    at org.eclipse.core.internal.resources.Workspace.broadcastPostChange(Workspace.java:396)
    at org.eclipse.core.internal.resources.Workspace.endOperation(Workspace.java:1531)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2354)
    at org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:118)
    at org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run(WorkspaceOperationRunner.java:75)
    at org.eclipse.ui.internal.editors.text.WorkspaceOperationRunner.run(WorkspaceOperationRunner.java:65)
    at org.eclipse.ui.editors.text.TextFileDocumentProvider.executeOperation(TextFileDocumentProvider.java:456)
    at org.eclipse.ui.editors.text.TextFileDocumentProvider.saveDocument(TextFileDocumentProvider.java:772)
    at org.eclipse.ui.texteditor.AbstractTextEditor.performSave(AbstractTextEditor.java:5068)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.tools.common.editor.ObjectMultiPageEditor.saveX(ObjectMultiPageEditor.java:403)
    at org.jboss.tools.common.editor.ObjectMultiPageEditor.doSave(ObjectMultiPageEditor.java:385)
    at org.eclipse.ui.internal.SaveableHelper$2.run(SaveableHelper.java:150)
    at org.eclipse.ui.internal.SaveableHelper$5.run(SaveableHelper.java:276)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:1812)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1809)
    at org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation(SaveableHelper.java:284)
    at org.eclipse.ui.internal.SaveableHelper.runProgressMonitorOperation(SaveableHelper.java:263)
    at org.eclipse.ui.internal.SaveableHelper.savePart(SaveableHelper.java:155)
    at org.eclipse.ui.internal.WorkbenchPage.saveSaveable(WorkbenchPage.java:3777)
    at org.eclipse.ui.internal.WorkbenchPage.saveEditor(WorkbenchPage.java:3790)
    at org.jboss.tools.common.model.ui.texteditors.SaveAction3.run(PropertiesTextEditorComponent.java:357)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:499)
    at org.eclipse.jface.commands.ActionHandler.execute(ActionHandler.java:119)
    at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:90)
    at sun.reflect.GeneratedMethodAccessor58.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:243)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:224)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:132)
    at org.eclipse.e4.core.commands.internal.HandlerServiceHandler.execute(HandlerServiceHandler.java:167)
    at org.eclipse.core.commands.Command.executeWithChecks(Command.java:499)
    at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:213)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.executeCommand(KeyBindingDispatcher.java:285)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.press(KeyBindingDispatcher.java:504)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.processKeyEvent(KeyBindingDispatcher.java:555)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.filterKeySequenceBindings(KeyBindingDispatcher.java:376)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher.access$0(KeyBindingDispatcher.java:322)
    at org.eclipse.e4.ui.bindings.keys.KeyBindingDispatcher$KeyDownFilter.handleEvent(KeyBindingDispatcher.java:84)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.filterEvent(Display.java:1262)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1056)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1081)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1066)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1108)
    at org.eclipse.swt.widgets.Widget.sendKeyEvent(Widget.java:1104)
    at org.eclipse.swt.widgets.Widget.wmChar(Widget.java:1525)
    at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:4723)
    at org.eclipse.swt.widgets.Canvas.WM_CHAR(Canvas.java:344)
    at org.eclipse.swt.widgets.Control.windowProc(Control.java:4611)
    at org.eclipse.swt.widgets.Canvas.windowProc(Canvas.java:340)
    at org.eclipse.swt.widgets.Display.windowProc(Display.java:4977)
    at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
    at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:2549)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3757)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1113)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:997)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:138)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:610)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:567)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:150)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:354)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:181)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:636)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:591)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1450)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1426) 
```

...

```
eclipse.buildId=4.3.0.I20130605-2000
java.version=1.7.0_25
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=de_DE
Framework arguments:  -product org.eclipse.epp.package.reporting.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.reporting.product 
```

已安装插件（帮助->关于 Eclipse->安装详细信息->已安装软件：全部标记 + CTRL+C）：（Eclipse Kepler Java EE 和 BIRT 版本作为基础安装）

```
 Apache Directory Studio LDAP Browser  2.0.0.v20130628 org.apache.directory.studio.ldapbrowser.feature.feature.group   Apache Software Foundation
  DevUtilsFeature   1.0.9.201209201734  DevUtilsFeature.feature.group   null
  Eclipse IDE for Java and Report Developers    2.0.0.20130613-0530 epp.package.reporting   null
  GlassFish Tools   6.2.0.201307232054  oracle.eclipse.tools.glassfish.feature.group    Oracle
  JarPlug   0.6.1   com.simontuffs.eclipse.jarplug.feature.feature.group    simontuffs.com
  Jaspersoft Studio feature 5.2.0   com.jaspersoft.studio.feature.feature.group Jaspersoft Corporation
  Java EE 5 Documentation   6.2.0.201307232054  oracle.eclipse.tools.javaee.doc.v5.feature.group    Oracle
  Java EE 6 Documentation   6.2.0.201307232054  oracle.eclipse.tools.javaee.doc.v6.feature.group    Oracle
  Java EE 7 Documentation   6.2.0.201307232054  oracle.eclipse.tools.javaee.doc.v7.feature.group    Oracle
  JBoss Developer Studio (Core Features)    7.0.0.GA-v20130720-0044-B364    com.jboss.jbds.product.feature.feature.group    JBoss by Red Hat
  Log Viewer Feature    0.9.8.8 de.anbos.eclipse.logviewer.feature.feature.group    Andre Bossert
  MercurialEclipse  2.1.0.201304290948  mercurialeclipse.feature.group  MercurialEclipse project
  MyLV  1.0.4   mylv_feature.feature.group  null
  Oracle ADF Documentation (11.1.1.4)   6.2.0.201307232054  oracle.eclipse.tools.adf.doc.v11114.feature.group   Oracle
  Oracle ADF Documentation (11.1.1.5)   6.2.0.201307232054  oracle.eclipse.tools.adf.doc.v11115.feature.group   Oracle
  Oracle ADF Documentation (11.1.1.6)   6.2.0.201307232054  oracle.eclipse.tools.adf.doc.v11116.feature.group   Oracle
  Oracle ADF Documentation (11.1.1.7)   6.2.0.201307232054  oracle.eclipse.tools.adf.doc.v11117.feature.group   Oracle
  Oracle ADF Documentation (12.1.2) 6.2.0.201307232054  oracle.eclipse.tools.adf.doc.v1212.feature.group    Oracle
  Oracle ADF Tools  6.2.0.201307232054  oracle.eclipse.tools.adf.feature.group  Oracle
  Oracle Cloud Tools    6.2.0.201307232054  oracle.eclipse.tools.cloud.feature.group    Oracle
  Oracle Coherence Tools    6.2.0.201307232054  oracle.eclipse.tools.coherence.feature.group    Oracle
  Oracle Database Tools 6.2.0.201307232054  oracle.eclipse.tools.database.feature.group Oracle
  Oracle Java EE Tools  6.2.0.201307232054  oracle.eclipse.tools.javaee.feature.group   Oracle
  Oracle Maven Tools    6.2.0.201307232054  oracle.eclipse.tools.maven.feature.group    Oracle
  Oracle Spring Tools   6.2.0.201307232054  oracle.eclipse.tools.spring.feature.group   Oracle
  Oracle WebLogic Scripting Tools   6.2.0.201307232054  oracle.eclipse.tools.weblogic.scripting.feature.group   Oracle
  Oracle WebLogic Server Tools  6.2.0.201307232054  oracle.eclipse.tools.weblogic.feature.group Oracle
  Toad® Extension for Eclipse - Community Edition - Core Plugin 1.8.3.201308140922  com.quest.toadext.core.feature.feature.group    Quest Software, Inc.
  Toad® Extension for Eclipse - Community Edition - MySQL DB Plugin 1.8.3.201308140922  com.quest.toadext.mysql.feature.feature.group   Quest Software, Inc.
  Toad® Extension for Eclipse - Community Edition - Oracle Database Plugin  1.8.3.201308140922  com.quest.toadext.feature.feature.group Quest Software, Inc.
  Toad® Extension for Eclipse - Community Edition - PostgreSQL Plugin   1.8.3.201308140922  com.quest.toadext.postgre.feature.feature.group Quest Software, Inc. 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-11-19T13:15:24.543

我有完全相同的问题。我在这里找到了一个适合我的解决方案：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=517671#c58](https://bugs.eclipse.org/bugs/show_bug.cgi?id=517671#c58)

对我来说，放

```
export GTK_IM_MODULE=ibus 
```

进入 ~/.profile。

希望这对你们中的一些人也有帮助。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-29T16:50:21.010

对我来说，这是由 ATI 桌面管理器造成的。

杀死“HydraDM.exe”进程后，问题就消失了。当我再次重新运行它时，问题又回来了。

因此，如果您使用的是 ATI 显卡，请尝试打开任务管理器，找到“HydraDM.exe”（或 64 位版本）然后将其杀死。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-10-13T14:39:15.320

如果您使用 DisplayFusion：

1.  打开显示融合设置页面
2.  单击兼容性选项卡
3.  添加 Eclipse 或 STS.exe 应用程序
4.  选中“禁用标题栏按钮（仅限此应用程序）、“禁用应用程序挂钩（仅限此应用程序）”和“在 DisplayFusion 任务栏上使用进程文件图标，而不是窗口图标”

参考：[Display Fusion FIX](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402983#c67)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-09-25T01:40:32.300

哇，这些错误消息的原因多种多样！我再扔一个：

在我的例子中，Ubuntu 16.04LTS 上的 Eclipse 4.17 显示这些消息用于多个操作。原来 16.04LTS 有 GTK 3.18，但 Eclipse 4.17 需要 GTK 3.20。更新 GTK ( [https://askubuntu.com/questions/933010/how-to-upgrade-gtk-3-18-to-3-20-on-ubuntu-16-04](https://askubuntu.com/questions/933010/how-to-upgrade-gtk-3-18-to-3-20-on-ubuntu-16-04) ) 使错误消息消失。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-12-09T11:18:15.750

我现在找到了 2 种使用 eclipse 的方法，而不会在我的 Dell ProBook 6550b Windows 7 64 位上出现“SWTError：没有更多句柄”，但它们都不是真正令人满意的：我可以在“安全模式”下启动 Windows，或者我可以降级到“ eclipse-jee-indigo-SR2-win32-x86_64”。我现在将尝试一个接一个地杀死一个进程，直到开普勒开始各自工作，直到我进入安全模式。

*...然后几个小时后...*

最后（现在）我可以解决这个问题（至少在我的笔记本电脑上：Dell ProBook 6550b Windows 7 64）。我“只是”不得不杀死进程：“DPAgent.exe*32”（DigitalPersona 本地代理）和“DPAgent.exe”（DigitalPersona 64 位助手进程），幸运的是在我的用户下运行（而不是可能有的 SYSTEM根据您的权利，无法杀死）。不过，我不明白这些进程如何干扰 Eclipse 中的 SWT 句柄......

关于这个问题的更多信息也可以在这里找到：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=402983](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402983)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-09-02T11:18:20.690

如果您有全新的 Windows 7，请**强制执行 Windows 更新**。这将使问题消失。这是在黑暗中拍摄，但解决了我的问题。我为此苦苦挣扎了一天，直到我意识到较新的 Eclipse 版本在较旧的 .net 框架中出现上述错误：一切都很好，直到驱动程序安装了 .net 4.0，从那时起 Eclipse 编辑器给出了未处理的事件循环异常。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-09-05T10:05:35.720

我有一个 nvidia GPU，如果启用了 nView，它总是会发生。尝试禁用它。

似乎eclipse与在多屏上覆盖系统窗口管理的软件不太兼容。

提示如何禁用 nView： http: [//nviewdesktopmanager.blogspot.com/2011/08/how-to-disable-nview-desktop-manager.html](http://nviewdesktopmanager.blogspot.com/2011/08/how-to-disable-nview-desktop-manager.html)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-03-19T09:38:58.113

我遇到了同样的问题，最后发现是罗技 SetPoint 软件。

卸载它 - 错误消失了。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-05-15T10:04:09.937

在 HP Probook 6470b 上安装 HP ProtectTools 后，我遇到了这个问题，因为包含密码管理器。

要禁用它，请运行“HP ProtectTools 管理控制台”，转到“应用程序->设置”，打开“应用程序”选项卡并取消选中“状态”复选框。

电脑重启后问题应该解决了，但是你不能再使用密码管理器了:(

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-06-15T23:26:06.267

Eclipse Mars.2 *Release (4.5.2)*和[*Multimon TaskBar 2.1*](http://www.mediachance.com/free/multimon.htm)在双显示器设置中也会发生。如果 MM TaskBar 未加载，它会消失。

**更新**

*Oxygen.2 Release (4.7.2)*仍然相同。

 ** * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-03-26T03:24:36.747

好吧，在这里有点回答我自己的问题。我仍然不知道导致问题的原因，但我找到了替代方法。

由于 Eclipse 的 Juno 版本相对较新，因此该错误本身可能与我的系统配置有关。

相反，我下载了其前身[Eclipse Indigo](http://www.eclipse.org/downloads/packages/release/indigo/sr2)的最新版本。现在我可以很好地使用 Eclipse。

由于我不需要 Juno 的任何新功能，因此 Indigo 版本就可以了。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-10-11T22:45:13.177

“未处理的事件循环异常..没有更多句柄”错误（在我的情况下）是由我的鼠标驱动程序引起的！关闭我的鼠标驱动程序解决了这个问题。它与 Eclipse 版本无关，我尝试了 Helios 之后的几乎所有版本（64 位/32 位）并且所有版本都有相同的问题，我还尝试在高级 Windows 设置“环境变量”中添加 Eclipse/JRE 变量路径. 为了帮助您解决此错误，请尝试关闭未使用的应用程序和驱动程序。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-10-25T02:11:08.953

我也有同样的问题。它是由屏幕捕获软件 hypersnap7 引起的。所以我认为热键冲突是原因。重启电脑，不要启动其他软件，启动安卓开发工具，看是哪个软件触发了这个bug。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-12-31T18:46:15.783

我正在运行双显示器，并且在 Kepler 和 STS 3.4.0 上都遇到了这个问题。杀死 HydraDM.exe 进程对我有用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-01-31T17:52:03.607

这里讨论了“错误” [https://bugs.eclipse.org/bugs/show_bug.cgi?id=402983](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402983)。很多关于“多显示器”设置的讨论。我今天遇到了这个问题（点击Eclipse（现成的ADT v22.3.0-887826）包资源管理器然后点击java编辑器，出现“没有更多句柄”错误）。它使 Eclipse 无法使用。

让我认为这是我的 win7 64 位 PC 上的显示器/显卡问题，而不是 Eclipse 的问题。我重新安装了显卡（nVidia GTX480）并更新了驱动程序。当我关闭系统以重新启动时，注意到与我的显示器（实际上是单个 BX2440 显示器设置）相关的多个错误对话框（找不到三星显示器）。因此，在重新启动时，我升级了显示器驱动程序。然后再次启动，问题已经消失（至少现在是这样）。

顺便说一句，我没有安装 Win 7 SP1，所以我认为在其他地方讨论的“完整 Windows 更新”解决方案不一定适用于所有人。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-05-31T17:07:26.777

对我来说，这个错误发生在全新的 Eclipse Luna SR2 (4.4.2) 安装中，当尝试添加 Mercurial 存储库时，我在从 Java 8 降级到 Java 7 后解决了。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-08-09T13:18:01.597

我也遇到过这个问题。

操作系统：Ubuntu 18.04 LTS

我正在使用 gnome，我在登录时从 Gnome 环境切换到 Gnome Classic 环境，它解决了这个问题。

（您也可以尝试其他环境，例如 unity - 在我的情况下，这个 bug 没有出现在 Unity 或 Ubuntu 中，它只出现在 Gnome 中）

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-03-04T13:11:35.683

我在 Eclipse 2021-12 中使用 Liferay dxp-7.2 ga1。我有同样的问题，但我解决了它在安装菜单中将 JVM 更改为 java 14，也在 Eclipse.ini 中。*

# math - 可以输入多少个密码

> ID：15594593
> 
> 赞同：-1
> 
> 时间：2013-03-24T02:43:28.977
> 
> 标签：math, passwords, permutation, combinations

密码必须符合以下规则，有多少种不同的密码？

*   6-8 个字符

*   至少一个数字

*   至少一个特殊字符（美式键盘）

*   至少两个大写字符

我拥有的是：10 个数字 36 个特殊字符 26 个小写字母 26 个大写字母

所以向后工作，我有

这有意义还是我不应该倒计时，因为角色是否不同并不重要？

所以我认为它可能是： (26*25*36*10*98*97*96*95)-(26*25*36*10*98*97)=2.028434008 x 10^13

或者

(26*26*36*10*98*98*98*98)-(26*26*36*10*98*98*)=2.244444143 x 10^13

重复无所谓

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:56:19.683

可能性应该是这样的：

**6 个字符：**
(10) * (36) * (26) * (26) * (98) * (98) =`A`

**7 个字符：**
(10) * (36) * (26) * (26) * (98) * (98) * (98) =`B`

**8 个字符：**
(10) * (36) * (26) * (26) * (98) * (98) * (98) * (98) =`C`

所以总的可能性是`A + B + C`。

源自：

(10) = 强制至少一个选项是数字，只有 10 个选项
(36) = 强制至少一个选项是特殊字符，只有 36 个选项
(26) * (26) = 强制至少两个选项是大写字母，只有 676 个选项
(98) = 完整字符集（数字、特殊字符、大写字母或小写字母）

# android - 在 OpenGL ES 中无缝分层透明精灵

> ID：15594596
> 
> 赞同：2
> 
> 时间：2013-03-24T02:43:50.210
> 
> 标签：android, opengl-es, sprite, opacity, alpha

我正在开发一个基于 LibGDX 框架的 Android 应用程序（尽管我认为这不会对这个问题产生太大影响），并且在使用透明精灵进行绘制时我很难找到一种方法来获得我想要的结果。问题是精灵在它们重叠的地方明显层叠在一起，类似于此图像中显示的内容：

![分层问题](../Images/4e94345e7b39427c165577badd2df314.png)

这对于我想做的一些事情来说非常难看，甚至完全破坏了其他部分。我希望他们做的是无缝合并在一起，如下所示：

![分层所需的结果](../Images/9a1f5176a171a3d3888d7d16ed3d8289.png)

到目前为止，我唯一的成功是将整个精灵序列以完全不透明度绘制在单独的纹理上，然后以所需的不透明度绘制该纹理。我有这个工作得很好，我可以让它在我需要的大部分工作中工作，但现在最大的问题是这些东西是动态绘制到屏幕上的，以及修改一个相当大的纹理的过程和将其发送回去对移动设备来说是相当繁重的，并且会导致无法接受的性能水平。

我花了很多时间寻找更理想的解决方案，包括尝试混合模式并提出古怪的公式，以平衡 alpha 和颜色值的方式平衡事情，但没有什么特别成功。我的猜测是，唯一可行的方法是前面提到的创建纹理并应用 alpha 差异的方法，但我不确定使用低功耗移动设备的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:59:05.867

可能还有其他一些方法可以做到这一点：最直接的方法是附加一个模板缓冲区并首先在模板上绘制圆圈，然后用模板绘制一个具有所需颜色+alpha的全屏矩形，这应该会快得多一些具有单独纹理的 FBO。

另一件事可能是先用禁用的混合绘制这些圆圈，然后用倒置的“blendFunc”绘制整个场景，但请注意，如果其他元素也需要混合，这可能是不可能的。

第三，您可以使用渲染缓冲区的 alpha 通道，而不是使用模板。只需使用颜色蒙版仅绘制到 alpha 并绘制圆圈，然后在颜色蒙版上重新启用 RGB 并使用适当的“blendFunc”绘制全屏矩形还请注意，如果以前的形状使用了混合，则需要将 alpha 清除为 1.0在执行此操作之前（仅将颜色蒙版设为 Alpha，禁用混合，使用 Alpha 设置为 1.0 的颜色绘制全屏矩形）

# android - 如何在Android上录制音频而不会崩溃？

> ID：15594599
> 
> 赞同：0
> 
> 时间：2013-03-24T02:44:27.820
> 
> 标签：android, debugging, audio-recording

我正在用 Gingerbread 开发 Nitro HD。我想录制音频，但在调用 MediaRecorder.stop() 时遇到无限挂起。

我知道我的手机可以录制声音，因为我有一个完全可以做到这一点的应用程序。

我阅读了 Deitel 等人的《程序员的 Android》一书。还有第 16 章中的 VoiceRecorder 示例。一切看起来都很好，但是应用程序在调用 MediaRecorder.stop() 时会永远挂起。另外，资源没有释放，我必须重启手机才能释放它。

这是完成调用的代码部分（参见 Deitel 等人，“Android for Programmers”，Prentice Hall，2012，第 16 章）：

```
// starts/stops a recording
OnCheckedChangeListener recordButtonListener = 
  new OnCheckedChangeListener() 
  {
     @Override
     public void onCheckedChanged(CompoundButton buttonView,
        boolean isChecked)
     {
        if (isChecked)
        {
           visualizer.clear(); // clear visualizer for next recording
           saveButton.setEnabled(false); // disable saveButton
           deleteButton.setEnabled(false); // disable deleteButton
           viewSavedRecordingsButton.setEnabled(false); // disable 

           // create MediaRecorder and configure recording options
           if (recorder == null)
              recorder = new MediaRecorder(); // create MediaRecorder 
           recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
           recorder.setOutputFormat(
              MediaRecorder.OutputFormat.THREE_GPP);
           recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
           recorder.setAudioEncodingBitRate(16); 
           recorder.setAudioSamplingRate(44100);

           try 
           {
              // create temporary file to store recording
              File tempFile = File.createTempFile(
                 "VoiceRecorder", ".3gp", getExternalFilesDir(null));

              // store File as tag for saveButton and deleteButton 
              saveButton.setTag(tempFile);
              deleteButton.setTag(tempFile);

              // set the MediaRecorder's output file
              recorder.setOutputFile(tempFile.getAbsolutePath());
              recorder.prepare(); // prepare to record   
              recorder.start(); // start recording
              recording = true; // we are currently recording
              handler.post(updateVisualizer); // start updating view
           } // end try
           catch (IllegalStateException e) 
           {
              Log.e(TAG, e.toString());
           } // end catch 
           catch (IOException e) 
           {
              Log.e(TAG, e.toString());
           } // end catch               
        } // end if
        else
        {
           recorder.stop(); // stop recording
           recorder.reset(); // reset the MediaRecorder
           recording = false; // we are no longer recording
           saveButton.setEnabled(true); // enable saveButton
           deleteButton.setEnabled(true); // enable deleteButton
           recordButton.setEnabled(false); // disable recordButton
        } // end else
     } // end method onCheckedChanged
  }; // end OnCheckedChangedListener 
```

在调试会话中，输入了“else”范围，但它挂在其第一行 (stop()) 上。

我再说一遍，我知道手机及其操作系统是正确的，因为另一个应用程序可以正常工作。那么，您对如何解决这个问题有任何想法，也许可以解决？

谢谢！

**编辑**当录音机启动（）时，有一个处理程序每​​ 50 毫秒执行一次，以显示声音幅度的图表。recorder.getMaxAmplitude() 方法总是返回 0。也许这是 MediaRecorder 初始化错误的症状？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:50:49.347

setAudioEncodingBitRate() 的参数可能太低。

[什么是好的 setAudioEncodingBitRate 录制语音](https://stackoverflow.com/questions/14645850/what-is-good-setaudioencodingbitrate-on-record-voice)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:36:41.257

你可以在那个地方有一个空记录器。如果输入 isChecked 的 else 情况，则不会创建新的 MediaRecorder()。

所以，有两件事：

API 文档指出，如果您在开始之前调用 stop()，您将抛出 RuntimeException，如果您未能记录任何内容，您将抛出 IllegalStateException。

在调用停止之前检查记录器：

```
if (recorder != null) {
    recorder.stop();
    // some recorder stuff here
} 
```

# ruby-on-rails - 2 列表，忽略大量插入 postgresql 上的重复项

> ID：15594601
> 
> 赞同：1
> 
> 时间：2013-03-24T02:44:43.320
> 
> 标签：ruby-on-rails, postgresql

我在 Rails 中有一个 Join 表，它只是一个带有 id 的 2 列表。

为了批量插入此表，我使用

```
ActiveRecord::Base.connection.execute("INSERT INTO myjointable (first_id,second_id) VALUES #{values}) 
```

不幸的是，当有重复时，这会给我带来错误。我不需要更新任何值，`insert`如果存在重复值，只需转到下一个值。

我该怎么做？

作为一个fyi，我搜索了stackoverflow，大多数答案对我来说有点高级理解。我还检查了 postgresql 文档并在 Rails 控制台中玩过，但仍然无济于事。我无法弄清楚这一点，所以我希望其他人可以帮助告诉我我做错了什么。

我试过的最接近的说法是：

```
INSERT INTO myjointable (first_id,second_id) SELECT 1,2 
WHERE NOT EXISTS (
         SELECT first_id FROM myjointable 
       WHERE first_id = 1 AND second_id IN (...)) 
```

该语句的部分问题是我一次只插入 1 个值，而我想要一个批量插入的语句。此外`second_id IN (...)`，该语句的部分可以包含多达 100 个不同的值，所以我不确定这会有多慢。

请注意，在大多数情况下，不应该有很多重复项，所以我不确定批量插入临时表并找到不同的值是否是个好主意。

编辑以添加上下文：

我需要批量插入的原因是因为我在 2 个模型之间存在多对多关系，其中 1 个模型永远不会被表单填充。我有股票和股票价格历史。股票价格历史从未以某种形式创建，而是通过使用雅虎金融 API 从 YahooFinance 提取数据来大量插入。我使用 activerecord-import gem 批量插入股票价格历史记录（即 Model.import 列、值），但我无法输入 Jointable.import 列、值，因为我得到了`jointable is an undefined local variable`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:58:58.363

我最终使用该`WITH`子句来选择我的值并为其命名。然后我插入了这些值并用于`WHERE NOT EXISTS`有效地跳过数据库中已经存在的任何项目。

到目前为止，它看起来正在工作......

```
WITH withqueryname(first_id,second_id) AS (VALUES(1,2),(3,4),(5,6)...etc) 
INSERT INTO jointablename (first_id,second_id) 
SELECT * FROM withqueryname 
WHERE NOT EXISTS( 
      SELECT first_id FROM jointablename WHERE 
             first_id = 1 AND 
             second_id IN (1,2,3,4,5,6..etc)) 
```

您可以将值与变量互换。我的是`VALUES#{values}`

您还可以将 second_id IN 与变量互换。我的是`second_id IN #{variable}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:36:33.237

以下是我处理它的方法：创建一个临时表并用你的新值填充它。然后锁定旧的连接值表以防止并发修改（重要）并插入所有出现在新表中但不出现在旧表中的值对。

一种方法是将旧值左外连接到新值上，并过滤旧连接表值为空的行。另一种方法是使用`EXISTS`子查询。无论如何，一旦查询优化器完成了这两者，它们很可能会产生相同的查询计划。

示例，未经测试（因为您没有提供 SQLFiddle 或示例数据）但应该可以工作：

```
BEGIN;

CREATE TEMPORARY TABLE newjoinvalues(
    first_id integer,
    second_id integer,
    primary key(first_id,second_id)
);

-- Now populate `newjoinvalues` with multi-valued inserts or COPY
COPY newjoinvalues(first_id, second_id) FROM stdin;

LOCK TABLE myjoinvalues IN EXCLUSIVE MODE;

INSERT INTO myjoinvalues
SELECT n.first_id, n.second_id
FROM newjoinvalues n 
LEFT OUTER JOIN myjoinvalues m ON (n.first_id = m.first_id AND n.second_id = m.second_id)
WHERE m.first_id IS NULL AND m.second_id IS NULL;

COMMIT; 
```

这不会更新现有值，但您也可以通过使用第二个查询来相当容易地做到这一点，该查询在一段`UPDATE ... FROM`时间内仍持有写表锁。

请注意，上面指定的锁定模式不会阻塞`SELECT`s，只会写入`INSERT`,`UPDATE`和`DELETE`, 因此在进程进行时可以继续对表进行查询，只是不能更新它。

如果您不能接受另一种方法是单独运行更新`SERIALIZABLE`（仅适用于 Pg 9.1 及更高版本中的此目的）。每当发生并发写入时，这将导致查询失败，因此您必须准备好一遍又一遍地重试。出于这个原因，将桌子锁定一段时间可能会更好。

# jsp - 显示通知页面后重定向 URL

> ID：15594603
> 
> 赞同：0
> 
> 时间：2013-03-24T02:45:15.297
> 
> 标签：jsp, tomcat, url-rewriting, tuckey-urlrewrite-filter

我正在使用 TomCat 服务器，需要转换到新位置。我将暂时在旧服务器上保留一个 TomCat 实例，以便优雅地转发旧链接。我发现 tukey 的 url rewrite 并且它似乎工作得很好，除了它在转发之前不显示消息。

我目前的解决方案是在以下位置放置一个“已移动”通知：`http://myserver:8080/`带有一个 HTML 重定向，它将在 5 秒后自动转发。

然后，我将对任何直接链接使用 urlrewrite 规则，例如：`http://myserver:8080/browse/ISSUE-123`转发到`http://mynewserver:8080/browse/ISSUE-123`. 这可行，但我希望能够在将用户转发到新位置之前向用户显示一条消息。

任何提示将不胜感激。我认为当前的解决方案“足够”，但可能会更好。

**编辑**

我找到了一个我认为可行的解决方案，但我仍然愿意接受反馈。我创建了一个带有 scriptlet 的简单 JSP 页面，该页面将接受一个参数（由 URL 重写器生成）来将 HTML 重定向放入“此页面已移动”模板中。这样，用户将被转发到正确的位置，并且还会看到一条消息，告诉他们更新链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:57:57.840

好的，因为这已经到位，我想我会详细说明我的答案，以防将来对某人有所帮助。

该解决方案可能需要 30 分钟才能实施。

1.  下载 Tomcat ( [http://tomcat.apache.org/](http://tomcat.apache.org/) )
2.  下载 UrlReWrite ( [http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/) )
3.  使用我想要的转发配置 urlrewrite.xml

    ```
     <urlrewrite>
      <rule>
           <from>/browse/(.*)</from>
           <to type="redirect">http://mynewserver:8080/browse/$1</to>
      </rule>
     </urlrewrite> 
    ```

这将立即将他们转发到新页面。我找到了一种显示页面的体面方法，然后通过创建一个简单的 html 页面作为 .jsp 并在其中包含一个 scriptlet 进行转发：

```
 <meta http-equiv="REFRESH" content="5;url=http://mynewserver:8080/browse/<%= request.getParameter("requestedPage") %>"> 
```

然后我将 urlrewrite.xml 更新为以下内容：

```
 <urlrewrite>
     <rule>
        <from>/browse/(.*)</from>
        <to type="redirect">%{context-path}/forward.jsp?requestedPage=$1</to>
     </rule>
 </urlrewrite> 
```

这会将所需页面中的页面传递到“转发”屏幕，该屏幕具有元重定向，然后转到新服务器上的同一页面，同时还告诉用户服务器移动。

# java - 像这样在 Java 中使用泛型编程：A 类，为什么我不能新建 B 的对象

> ID：15594605
> 
> 赞同：0
> 
> 时间：2013-03-24T02:46:00.340
> 
> 标签：java, generics

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:49:55.070

由于[类型擦除](http://download.oracle.com/javase/tutorial/java/generics/erasure.html)，您无法做到这一点。看看下面的答案[https://stackoverflow.com/a/6810709/860294](https://stackoverflow.com/a/6810709/860294)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:50:19.920

`B`in`A<B>`只是一个类型参数。您不能创建实例化参数。您只能创建实际类型的实例。

但是您可以声明将该实例作为参数的方法`public func(B b)`。

我建议您阅读有关[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T02:51:40.737

Java 使用类型擦除。它不知道 B 的类，因此它不知道任何 B 类最终在运行时是否将具有带有该组参数的构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T06:48:31.543

这样做的原因是 B 可以是接口或类（甚至是抽象类）。因此， new B() 在接口或抽象类的情况下将无效。因此，这是不允许的。

# ruby - 我在哪里编写 Ruby 中的 main 函数？

> ID：15594606
> 
> 赞同：2
> 
> 时间：2013-03-24T02:46:04.590
> 
> 标签：ruby

Ruby 中似乎没有 main 函数。那么 Ruby 中 main 的等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T02:48:38.010

Ruby 中没有这样的东西。解释器从上到下执行代码，因此您的主脚本隐含地是“main”的主体。例如，假设您有两个文件`script_a.rb`和`script_b.rb`. 并假设内容`script_a.rb`如下：

```
require_relative './script_b'

puts 1 + 1 
```

现在，如果您运行`ruby script_a.rb`，您将得到的实际代码执行如下：查找`script_b.rb`、执行的内容`script_b.rb`、执行`puts 1 + 1`。

# php - 将多张sql表和多条sql查询合并为一条语句

> ID：15594608
> 
> 赞同：0
> 
> 时间：2013-03-24T02:46:34.017
> 
> 标签：php, mysql

我已经研究过使用join方法，将表连接在一起，但我不仅想连接表，而且查询到一个语句，我不知道如何将查询连接到一个语句中。

我有三张桌子，一张叫friends，一张叫users，一张叫beers。

用户表：

姓名 | ID

好友表：

用户名 | 朋友姓名

啤酒桌：

用户名 | 啤酒

我想找到给定用户的所有朋友，并查询每个用户和朋友拥有的独特啤酒的数量。

以前我使用 php 来“构建”要执行的 sql 语句，这会在循环中进行大量的 sql 调用，而且很混乱。我知道必须有一种更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:57:52.497

工作示例：[http ://sqlfiddle.com/#!2/f1fdd/9](http://sqlfiddle.com/#!2/f1fdd/9)

构建架构：

```
CREATE TABLE user(
  id int(11),
  name varchar(50)
);
CREATE TABLE userFriends(
  userID int(11),
  friendID int(11)
);
CREATE TABLE beer(
  beerID int(11),
  beerName varchar(50)
);
CREATE TABLE friendBeer(
  userID int(11),
  beerID int(11)
);
INSERT INTO user(id,name) VALUES(1,'friend 1');
INSERT INTO user(id,name) VALUES(2,'friend 2');
INSERT INTO user(id,name) VALUES(3,'friend 3');
INSERT INTO user(id,name) VALUES(4,'jeremy');

INSERT INTO userFriends(userID,friendID) VALUES(4,1);
INSERT INTO userFriends(userID,friendID) VALUES(4,2);
INSERT INTO userFriends(userID,friendID) VALUES(4,3);

INSERT INTO beer(beerID, beerName) VALUES(1, 'amstel light');
INSERT INTO beer(beerID, beerName) VALUES(2, 'bud light');
INSERT INTO beer(beerID, beerName) VALUES(3, 'miller');

INSERT INTO friendBeer(userID, beerID) VALUES(1, 1);
INSERT INTO friendBeer(userID, beerID) VALUES(2, 2);
INSERT INTO friendBeer(userID, beerID) VALUES(3, 3);
INSERT INTO friendBeer(userID, beerID) VALUES(4, 1);
INSERT INTO friendBeer(userID, beerID) VALUES(1, 3); 
```

和查询：

```
SELECT U.id,
       U.name,
       (SELECT count(beerID)
        FROM friendBeer 
        WHERE userID = 4) AS "user beer count",
       U2.name AS 'Friends name',
       COUNT(FB2.beerID)
FROM user U
LEFT JOIN userFriends F
  ON U.id = F.userID
LEFT JOIN user U2
  ON F.friendID = U2.id
LEFT JOIN friendBeer FB2
  ON F.friendID = FB2.userID
LEFT JOIN friendBeer FB
  ON U.id = FB.userID
WHERE U.id = 4
GROUP BY F.friendID, U.id 
```

我假设您将更`=1`改为任何`UserID`内容 - 但这向您展示了查询的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:49:26.257

```
create table user(user_id int(11),user_name varchar(100));
create table friend(user_id int(11),friend_to int(11));
create table beer(user_id int(11),beer_name varchar(100));

insert into user values(1,'Evan');
insert into user values(2,'Mike');
insert into user values(3,'Roxetta');
insert into user values(4,'Rajesh');

insert into friend values(1,2);
insert into friend values(1,3);

insert into beer values(1,'sam bud');
insert into beer values(2,'carlsberg');
insert into beer values(2,'sam bud');
insert into beer values(2,'sam bud'); 
```

和 sql 查询

```
SELECT user.user_name, COUNT(DISTINCT(beer.beer_name)) `count` FROM beer JOIN `user` ON user.user_id=beer.user_id WHERE user.user_id=1
UNION
SELECT user.user_name,COUNT(DISTINCT(beer.beer_name)) FROM beer JOIN `user` ON user.user_id=beer.user_id 
WHERE user.user_id IN(SELECT friend_to FROM friend WHERE user_id=1); 
```

这是你要找的吗？

# javascript - 未使用 Knockout 数据映射插件定义的对象

> ID：15594610
> 
> 赞同：0
> 
> 时间：2013-03-24T02:47:06.283
> 
> 标签：javascript, knockout.js

我正在尝试使用映射插件来使子对象的属性可观察。我有以下内容：

```
// setData defined here

var mapping = {

    create: function(options) {
        //customize at the root level.  
        var innerModel = ko.mapping.fromJS(options.data);
        innerModel.cardCount = ko.computed(function () {
            debugger;
            return this.cards().length;  // cards not defined - "this" is Window for some reason
        });

        innerModel.deleteCard = function (card) {
            // Pending UI
            // call API here
            // On success, complete
            this.cards.remove(card);
        }.bind(this);

        innerModel.addCard = function () {
            //debugger;
            // Pending UI
            // Call API here
            // On success, complete
            this.cards.push(dummyCard);
            //this.cardToAdd("");
        }.bind(this);

        return innerModel;
    }
};

var SetViewModel = ko.mapping.fromJS(setData, mapping);

ko.applyBindings(SetViewModel); 
```

当我在 chrome 调试器中运行它时，我得到“对象 [对象全局] 没有方法卡”。卡片*应该*是一个可观察的数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:30:27.623

```
innerModel.cardCount = ko.computed(function () {
            debugger;
            return this.cards().length;  // cards not defined - "this" is Window for some reason
        }); 
```

`this`位于您正在创建的匿名函数内，因此绑定到全局对象。如果要引用内部模型，则必须直接这样做，或者将内部模型绑定到函数。

```
innerModel.cardCount = ko.computed(function () {
            return innerModel.cards().length; 
        }); 
```

或者

```
var computedFunction = function () {
            return this.cards().length; 
        };
innerModel.cardCount = ko.computed(computedFunction.apply(innerModel)); 
```

# c++ - 静态变量未定义引用

> ID：15594611
> 
> 赞同：0
> 
> 时间：2013-03-24T02:47:07.993
> 
> 标签：c++

我试图确保一个模块只加载一次，但是当我按照我的方式执行时，编译器会吐出“对我的两个静态类变量的未定义引用：S

```
class Text : public Parent
{
    private:
        static int Instances;
        static HMODULE Module;

    public:
        Text();
        Text(Text&& T); 
        Text(std::wstring T); 
        ~Text();

        virtual Text& operator = (Text&& T); 
};

Text::Text() : Parent() {}

Text::~Text()
{
    if (--Instances == 0)
        FreeLibrary(Module); // Only free the module when
                             // no longer in use by any instances.
}

Text::Text(Text&& T) : Parent(std::move(T)), Module(std::move(T.Module))

Text::Text(std::wstring T) : Parent(T)  // Module only loads when
                                        // this constructor is called.
{
    if (++Instances == 1)
    {
        Module = LoadLibrary(_T("Msftedit.dll"));
    }
}

Text& Text::operator = (Text&& T)
{
    Parent::operator = (std::move(T));
    std::swap(T.Module, this->Module);
    return *this;
} 
```

任何想法为什么它说对两个变量（实例和模块）的未定义引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:54:30.863

类定义**声明**了两个静态数据成员，`Text::Instances`并且`Text::Module`. 如果代码实际使用它们，您还必须**定义**这些数据成员。就像`void f();` **声明一个函数一样，但除非你也****定义**它，否则你不能调用它。所以添加：

```
int Text::Instances;
HMODULE Text::Module; 
```

到您的源代码。（这与您当前的代码是完全写在头文件中还是拆分为头文件和源代码无关；如果使用它，则必须定义它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:01:39.393

您应该先在您的静态变量中**定义它，然后才能使用它。**

添加

```
int Text::Instancese = 0 // whatever value you need. 
```

`.cpp`在您的文件顶部。

# java - 特定设备可以访问页面，但其他设备不能

> ID：15594623
> 
> 赞同：0
> 
> 时间：2013-03-24T02:48:38.610
> 
> 标签：java, php, html, mysql, qr-code

我有一个项目，但我希望我能得到一些见解。

是否有可能有一个页面允许访问我的手机、同事的电话、笔记本电脑或设备，但拒绝任何其他设备访问此页面。这个项目的想法是通过二维码，例如，

如果我生成一个二维码，以访问一个让我们说库存的列表。我希望我的手机或我同事的手机能够访问它，但如果说我的兄弟或外面的人尝试代码并被发送到这个特定页面，它不允许它发生，因为手机ID 或平板电脑 ID 不在获取访问权限的列表中。

创建登录页面并启用二维码会很困难，因为您无法在二维码中实现登录信息，因为那样安全性将无关紧要。

有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:06:55.170

您的页面可能会根据原始 IP 地址限制访问。这种系统的可行性将取决于许多参数，例如您是通过 wifi 还是蜂窝连接，在 wifi 的情况下 - 您是否信任 wifi 网络，在蜂窝的情况下 - 蜂窝提供商更改的频率你的地址。

更好的解决方案可能是使用自定义 URI 方案和仅安装在您想要访问的手机和平板电脑上的自定义应用程序。当设备扫描二维码时，应用程序将处理请求，然后通过 HTTPS 并通过适当的身份验证登录网站。例如

二维码：my.app://blah/blah
应用处理 URL，登录服务器，重定向到[https://my.site/blah/blah](https://my.site/blah/blah)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:49:12.660

为什么不使用身份证书？使用相应的私钥签署您的消息（二维码）并验证扫描仪的身份、信任和消息完整性。

# php - 减去 PHP 中的预定义时间

> ID：15594624
> 
> 赞同：0
> 
> 时间：2013-03-24T02:48:46.303
> 
> 标签：php, mysql, datetime, time

我在 mysql 数据库中有一个表时间，其类型为“TIME”，其中包含默认值“09:00:00”。我想做的是得到这个值并从当前时间中减去它。

```
include 'connection.php';
$time = mysql_query("SELECT start_time FROM time");
$s = mysql_fetch_assoc($time);
$start_time = strtotime($s['start_time']);
$time_now = date("H:i:s");
$delay = ($time_now - $start_time); 
```

但是它从来没有按我需要的方式工作。结果总是像 00:00:00 我想要实现的是：

```
$start_time = 09:00:00
$time_now = 09:34:23
so $delay should be 00:34:23. 
```

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:05:15.240

只是您的代码中的一个小错误....看下面

```
include 'connection.php';
$time = mysql_query("SELECT start_time FROM time");
$s = mysql_fetch_assoc($time);

$start_time = strtotime($s['start_time']);
$time_now = date("H:i:s");
$delay = ($time_now - $start_time); //BUG! String minus timestamp here... 
```

使用以下方法修复第二个块：

```
$start_time = strtotime($s['start_time']);
$delay =  date( "H:i:s", time() - $start_time ); 
```

不过，同意其他人的观点，这在数据库方面也做得很干净。

希望这可以帮助

# c# - 根据数据库文件确定英文词性标注

> ID：15594626
> 
> 赞同：2
> 
> 时间：2013-03-24T02:49:35.247
> 
> 标签：c#, nlp, part-of-speech

我有点困惑如何确定英语的词性标记。在这种情况下，我假设英语中的一个单词有一种类型，例如单词“book”被识别为 NOUN，而不是 VERB。我想根据时态识别英语句子。例如，“I sent the book”被识别为过去时。

描述：

我有许多数据库 (*.txt) 文件：NounList.txt、verbList.txt、adjectiveList.txt、adverbList.txt、connectionList.txt、prepositionList.txt、articleList.txt。如果数据库中有输入词，我假设可以推断出这些词的类型。但是，如何开始在数据库中查找呢？例如，“I sent the book”：如何开始在数据库中搜索每个单词，“I”作为名词，“sent”作为动词，“the”作为文章，“book”作为名词？有比在每个数据库中搜索每个单词更好的方法吗？我怀疑每个数据库都有独特的元素。

我在这里附上我的观点。

```
private List<string> ParseInput(String allInput)
{
    List<string> listSentence = new List<string>();

    char[] delimiter = ".?!;".ToCharArray();
    var sentences = allInput.Split(delimiter, StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim());

    foreach (var s in sentences)
        listSentence.Add(s);

        return listSentence;
}

private void tenseReviewMenu_Click(object sender, EventArgs e)
    {
        string allInput = rtbInput.Text;

        List<string> listWord = new List<string>();
        List<string> listSentence = new List<string>();

        HashSet<string> nounList = new HashSet<string>(getDBList("nounList.txt"));
        HashSet<string> verbList = new HashSet<string>(getDBList("verbList.txt"));
        HashSet<string> adjectiveList = new HashSet<string>(getDBList("adjectiveList.txt"));
        HashSet<string> adverbList = new HashSet<string>(getDBList("adverbList.txt"));

        char[] separator = new char[] { ' ', '\t', '\n', ',' etc... };         

        listSentence = ParseInput(allInput);

        foreach (string sentence in listSentence)
        {
            foreach (string word in sentence.Split(separator))
                if (word.Trim() != "")
                    listWord.Add(word);               
        }

        string testPOS = "";

        foreach (string word in listWord)
        {
            if (nounList.Contains(word.ToLowerInvariant()))
                testPOS += "noun ";
            else if (verbList.Contains(word.ToLowerInvariant()))
                testPOS += "verb ";
            else if (adjectiveList.Contains(word.ToLowerInvariant()))
                testPOS += "adj ";
            else if (adverbList.Contains(word.ToLowerInvariant()))
                testPOS += "adv ";

        }
        tbTest.Text = testPOS;
    } 
```

POS 标记是我在作业中的次要解释。所以我使用一种简单的方法来确定基于数据库的 POS 标记。但是，如果有更简单的方法：易于使用、易于理解、易于获取伪代码、易于设计……确定 POS 标记，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:41:10.250

我希望我在下面提供的伪代码对您有所帮助。如果我有时间，我也会为你写一些代码。

可以通过以下步骤解决此问题：

1.  创建英语中所有常见句型的字典。例如，**Subject + Verb**是一个英语模式，所有的句子都喜欢`I sleep`，`Dog barked`并且`Ship will arrive`匹配**SV 模式**。[您可以在此处](http://englishpatterns.com/community/viewtopic.php?f=7&t=1693)找到最常见的英语模式列表。请注意，您可能需要在一段时间内不断修改这本词典以提高程序的准确性。

2.  尝试将输入句子拟合到您在上面创建的字典中的一种模式中，例如，如果输入句子是`Snakes, unlike elephants, are venomous.`，那么您的代码必须能够找到与该模式匹配的：、`Subject`**不同** 或**S-,unlike- S`-, -VO**。要成功执行此步骤，您可能需要编写擅长识别**结构标记**的代码，例如本例中的单词**distinct**。`AnotherSubject``Verb` `Object`

*******   当您在模式词典中找到与输入句子匹配的内容时，您可以轻松地为句子中的每个单词分配一个标签。例如，在我们的句子中，单词`Snakes`将被标记为主**语**，就像单词一样，单词将被标记为**动词**，最后单词将被标记为**宾语**。`elephants``are`**`venomous`**

    *****   一旦您为句子中的每个单词分配了唯一标签，您就可以在已有的相应文本文件中查找该单词并确定您的句子是否有效。

    *   如果您的句子与任何句型都不匹配，那么您有两种选择：

    a) 如果它是有效的英语句子，则在您的模式词典中添加这个无法识别的句子的模式。

    b) 或者，将输入句子作为无效的英语句子丢弃。********** 

 ******使用机器学习技术可以最好地解决您想要实现的目标，以便系统可以**学习**任何新模式。因此，您可能希望包含一个培训系统，该系统会在找到与任何现有模式都不匹配的有效英语句子时将新模式添加到您的模式字典中。我没有过多考虑如何做到这一点，但现在，您可以手动修改您的句型字典。

我很高兴听到您对这个伪代码的意见，并且可以进一步集思广益。******

# php - 多个 php 类可访问的函数（Symfony 控制器）

> ID：15594630
> 
> 赞同：3
> 
> 时间：2013-03-24T02:50:11.717
> 
> 标签：php, function, symfony, methods, controller

在我的 Symfony 项目中，我有几个用于多个控制器的函数。我不想不断地复制和粘贴它们，而是希望有一个单独的 php 文件（比如 functions.php）来存储函数。

我尝试了以下方法：

1) 包含并要求带有函数的 php 文件，但它不会让我使用 $this->getDoctrine()。我查看了以下帖子寻求帮助，但并没有解决问题：

[Symfony2：在通用 PHP 类中获取 Doctrine](https://stackoverflow.com/questions/11906426/symfony2-get-doctrine-in-a-generic-php-class)

[Symfony2 在服务容器中使用 Doctrine](https://stackoverflow.com/questions/8342031/symfony2-use-doctrine-in-service-container)

2）我试过把它变成一个类并将函数作为方法然后做：

```
$f = new Functions();
$variable = $f->myMethod(); 
```

但它返回：

```
The file was found but the class was not in it, the class name or namespace probably has a typo. 
```

谢谢你的帮助。对此，我真的非常感激。

## 更新：

通用类是`Symfony/src/WikiRoster/MainBundle/Controller/DBFunctions.php` 我现在只需要能够`$this->getDoctrine()`在其中以某种方式使用或类似的东西。我试过使用`services.yml`上面链接中建议的，但没有雪茄。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:04:19.847

> 找到文件但类不在其中，类名或命名空间可能有错字。

这个问题实际上经常发生。正如错误所述，有两种情况可以解释为什么返回此错误：

*   如果您的文件的命名空间与您的文件的路径不同
*   如果您的文件名与您在课堂上使用的名称不同

* * *

## 例子

假设您想在这样的不同类中使用 GeneralClass：

```
use  Acme\YourBundle\General\GenericClass 
```

为此，`GeneralClass`需要在 中`Acme/YourBundle/General/`，并且您需要：

*   使用正确的命名空间：`namespace Acme\YourBundle\General`
*   用相同的名称命名您的班级：`class GenericClass`

你将会拥有：

```
namespace Acme\YourBundle\General;

class GenericClass
{
    public function __construct()
    {
        // some cool stuff
    }
} 
```

# c# - 来自三个给定数组的前 5 个值

> ID：15594634
> 
> 赞同：6
> 
> 时间：2013-03-24T02:50:48.927
> 
> 标签：c#, algorithm, sorting

最近我在 C# 中遇到一个问题，问题是：- 有三个 int 数组

Array1={88,65,09,888,87}

Array2={1,49,921,13,33}

Array2={22,44,66,88,110}

现在我必须从所有这三个数组中获取最高 5 的数组。在 c# 中执行此操作的最优化方法是什么？

我能想到的方法是取一个大小为 15 的数组，并添加所有三个数组的数组元素，然后对其进行排序，得到最后 5 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:58:22.477

最优化的固定方法`K=5`是遍历所有数组五次，每次通过时选择迄今为止未采用的最高元素。您需要标记您采取的元素，以便在后续通过时跳过它。这具有`O(N1+N2+N3)`（您遍历所有`N1+N2+N3`元素五次）的复杂性，这是尽可能快的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:06:49.177

使用 LINQ 的简单方法：

```
int[] top5 = array1.Concat(array2).Concat(array3).OrderByDescending(i => i).Take(5).ToArray(); 
```

一种最佳方式：

```
 List<int> highests = new List<int>(); // Keep the current top 5 sorted
 // Traverse each array. No need to put them together in an int[][]..it's just for simplicity
 foreach (int[] array in new int[][] { array1, array2, array3 }) {
     foreach (int i in array) {
         int index = highests.BinarySearch(i); // where should i be?

         if (highests.Count < 5) { // if not 5 yet, add anyway
             if (index < 0) {
                highests.Insert(~index, i);
             } else { //add (duplicate)
                highests.Insert(index, i);
             }
         }
         else if (index < 0) { // not in top-5 yet, add
             highests.Insert(~index, i);
             highests.RemoveAt(0);
         } else if (index > 0) { // already in top-5, add (duplicate)
             highests.Insert(index, i);
             highests.RemoveAt(0);
         }
     }
 } 
```

保留前 5 名的排序列表并仅遍历每个数组*一次*。

您甚至可以每次检查前 5 名中的最低值，避免使用 BinarySearch：

```
 List<int> highests = new List<int>();
 foreach (int[] array in new int[][] { array1, array2, array3 }) {
     foreach (int i in array) {
         int index = highests.BinarySearch(i);
         if (highests.Count < 5) { // if not 5 yet, add anyway
             if (index < 0) {                    
                highests.Insert(~index, i);
             } else { //add (duplicate)
                highests.Insert(index, i);
             }
         } else if (highests.First() < i) { // if larger than lowest top-5                
             if (index < 0) { // not in top-5 yet, add
                highests.Insert(~index, i);
                highests.RemoveAt(0);
             } else { // already in top-5, add (duplicate)
                highests.Insert(index, i);
                highests.RemoveAt(0);
             }
         }
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:05:57.740

您可以使用 LINQ 组合数组，对它们进行排序，然后反转。

```
 int[] a1 = new int[] { 1, 10, 2, 9 };
    int[] a2 = new int[] { 3, 8, 4, 7 };
    int[] a3 = new int[] { 2, 9, 8, 4 };

    int[] a4 = a1.Concat(a2).Concat(a3).ToArray();

    Array.Sort(a4);
    Array.Reverse(a4);

    for (int i = 0; i < 5; i++)
    {
        Console.WriteLine(a4[i].ToString());
    }
    Console.ReadLine(); 
```

Prints: 10, 9, 9, 8, 8 来自我作为数组输入提供的样本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-16T07:23:47.170

以下是执行此任务的两种方法。第一个是仅使用基本类型。这是最有效的方式，没有额外的循环，没有额外的比较，也没有额外的内存消耗。您只需传递需要与另一个元素匹配的元素的索引，并计算每个给定数组要匹配的下一个索引。

**第一种方式 -**

[http://www.dotnetbull.com/2013/09/find-max-top-5-number-from-3-sorted-array.html](http://www.dotnetbull.com/2013/09/find-max-top-5-number-from-3-sorted-array.html)

![在此处输入图像描述](../Images/020bc7b5b55c263570471081b40576f4.png)

**第二种方式 -**

```
int[] Array1 = { 09, 65, 87, 89, 888 };
int[] Array2 = { 1, 13, 33, 49, 921 };
int[] Array3 = { 22, 44, 66, 88, 110 };

int [] MergeArr = Array1.Concat(Array2).Concat(Array3).ToArray();
Array.Sort(MergeArr);
int [] Top5Number = MergeArr.Reverse().Take(5).ToArray() 
```

**摘自 -**

## [从三个给定的排序数组中查找最大前 5 个数字](http://www.dotnetbull.com/2013/09/find-max-top-5-number-from-3-sorted-array.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T06:17:31.207

对于长度为 N1,N2,N3 的三个数组，最快的方法应该是合并 3 个数组，然后使用改进的快速排序找到 (N1+N2+N3-4) 阶统计量。

在结果数组中，索引 (N1+N2+N3-5) 到最大值 (N1+N2+N3-1) 的元素应该是您最大的 5 个。您也可以稍后对其进行排序。

这种方法的时间复杂度平均为 O(N1+N2+N3)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T02:57:29.990

也许你可以有一个包含 5 个元素的数组，这将是“最大值”数组。

最初用前 5 个值填充它，在您的情况下，这只是第一个数组。然后遍历其余的值。对于每个值，对照从最小到最大的 5 个最大值进行检查。如果您发现主列表中的当前值大于最大值数组中的值，则将其插入到数组中该元素的上方，这会将最后一个元素推出。最后，您应该有一个包含 5 个最大值的数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-30T19:42:16.360

**简短的回答：**使用[.NET](https://msdn.microsoft.com/en-us/library/system.collections.sortedlist(v=vs.110).aspx)中[排序集合类型](https://msdn.microsoft.com/en-us/library/5z658b67(v=vs.110).aspx)中的排序列表作为最小堆。

* * *

**解释：**

1.  从第一个数组中，向这个 SortedList/min-heap 添加 5 个元素；
2.  现在遍历数组的所有其余元素：
    *   如果数组元素大于 min-heap 中的最小元素，则删除 min 元素并将该数组元素压入堆中；
    *   否则，继续下一个数组元素；
3.  最后，您的最小堆具有所有数组中最大的 5 个元素。

* * *

**复杂性：**当您有一个包含 k 个元素的 SortedList 时，需要 Log k 时间来找到最小值。将其乘以所有数组中的总元素，因为您将多次执行此“查找最小操作”。

将我们带到*O(n * Log k)*的整体复杂性，其中 n 是所有数组中元素的总数，k 是您想要的最高数字的数量。

# c# - 更新 Datagridview (C#)

> ID：15594640
> 
> 赞同：0
> 
> 时间：2013-03-24T02:51:55.037
> 
> 标签：c#

我似乎无法在互联网上找到解决我的困境的方法。我有一个在控件属性中有预设数据源的数据网格。所以我不必为数据网格视图编写任何代码来显示我的表数据。现在我有一个按钮，可以在我的表中添加一个新行，它工作正常，但我无法让我的 datagridview 更新信息。

我尝试使用 resetbindings 希望它会更新我的数据网格控件，但它没有。有小费吗？

```
private void button1_Click(object sender, EventArgs e)
    {
        sqlcom.CommandText = @"INSERT INTO members (firstname, lastname) VALUES ('" + textBox1.Text +"', '"+ textBox2.Text +"')";
        sqlcom.ExecuteNonQuery();
        thisConnect.Close();

        //update datagridview?
        this.membersBindingSource.ResetBindings(false);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:14:06.767

你不能写以下两行：

```
DataSourceID.DataBind();
YourdatagridviewID.DataSource=DataSourceIDhere 
```

代替行： `this.membersBindingSource.ResetBindings(false)`;

？？？

# c# - 使用 WP7+ 将图像文件夹转换为视频

> ID：15594643
> 
> 赞同：0
> 
> 时间：2013-03-24T02:52:27.160
> 
> 标签：c#, windows-phone-7, dll, windows-phone-8

我正在尝试使用[Slicer](http://splicer.codeplex.com/releases/view/14364) dll 引用将图像转换为视频文件，但在将引用添加到我的 Windows Phone 项目时遇到问题，我收到错误消息

> 无法将引用添加到 l 因为它不是使用 Windows Phone 运行时构建的。Windows Phone 项目仅适用于 Windows Phone 程序集。

我搜索并找到 了提到它的这个[链接](https://stackoverflow.com/questions/3637378/silverlight-class-library-to-windows-phone-7-class-library)

> 为 Silverlight for Windows Phone 7 创建一个新的类库

我不知道我是否正确创建了类项目，但它不起作用我得到与 win 手机项目相同的错误，无法安装 .dll，有谁知道我如何正确创建类库而不会出现此错误?

或者即使可以将 Splicer 与 windows phone 7 和 8 一起使用？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:08:12.587

据我所知，Splicer 不是为在 Windows Phone 上工作而构建的。虽然通用 .NET 库似乎可以在 WP7 和 WP8 等 .NET 兼容平台上运行似乎是有道理的，但情况并非如此。（有点过时，但在这里：[http](http://dotnet.dzone.com/articles/not-every-library-will-work) ://dotnet.dzone.com/articles/not-every-library-will-work ）

You could always check out Splicer from [Codeplex](http://splicer.codeplex.com/), but you'd probably have to do a non-trivial amount of modification to get it to work for your project. I'd surmise you could *maybe* pull it off by just modifying the class libraries in the solution, but there are probably pitfalls included with that. Worse comes to worse, you could take all the source files, copy them into a new Windows Phone library project, and then resolve all the build errors. Either way, it'll involve some work.

# python - 尝试在 Python 中运行带有多个 if 语句的循环

> ID：15594644
> 
> 赞同：0
> 
> 时间：2013-03-24T02:52:30.360
> 
> 标签：python, loops, if-statement

我正在学习 Python，但我迷失了 atm ：

```
from random import randint

x = 10

y = 4

hit = randint(1,100)

while x > 0:

    if hit >= 50:

        print "you hit for %d" % y
        x -= y

    elif hit < 50:

        print "you miss" 
```

我想做的是让一个循环运行，如果我击中或者如果我错过直到 x = 0，每次都会运行一个“新”。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T02:56:49.150

您`x -=y`只有一个条件分支，这意味着 if`hit < 50` `x-=y`永远不会运行，这将导致无限循环，您需要将其更改为：

```
while x > 0:
    hit = randint(1,100)

    if hit >= 50:
        print "you hit for %d" % y

    elif hit < 50:
        print "you miss"
    x -= y 
```

你也有你`randint`的循环之外，所以`hit`总是相同的值。
再次查看您的代码，`x`似乎是 hp，并且当 hp 耗尽时循环将结束，所以`x-=y`在这种情况下您很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T02:56:55.453

如果每次循环都需要不同的随机数，请将随机数生成放在循环内。在和`hit = randint(1,100)`之间移动。`while x > 0:``if hit >= 50:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:10:06.593

如果`hit`在循环之外声明，则该值将永远保持不变，或者在循环三周后结束程序，或者永远不会结束。一定是这样的：

```
while x > 0:
    hit = random.randint(1,100)
    if hit >= 50:
        print "You hit for %d" % y
        x -= y
    elif hit < 50:
        print "You missed" 
```

虽然不是必须的，因为从 1 到 100 的随机整数要么是 < 要么 >= 50，所以养成防御性编程的习惯是有好处的，所以也许把这个小 else 语句放进去：

```
 else:
        print "Error, something is wrong" 
```

# openssl - openssl-使用密钥和 IV 解密 base64 字符串

> ID：15594645
> 
> 赞同：3
> 
> 时间：2013-03-24T02:52:42.747
> 
> 标签：openssl, key, aes, encryption, initialization-vector

我正在尝试解密已在 openssl 中使用 aes256 加密的 base64 字符串。我得到了会话密钥和 IV，它们是用我的密钥加密的。我将它们转换为十六进制，以便可以使用以下 openssl 命令：

```
openssl enc -d -aes256 -iv iv.hex -K sessionkey.hex -in message.b64 -out message.txt 
```

我收到错误消息说 IV 是非十六进制值。我从使用我的密钥加密的 base64 中的 IV 和会话密钥开始。所以我做了以下事情：

//将base64转换为二进制

```
openssl base64 -d -in iv.b64 -out iv.bin
openssl base64 -d -in sessionkey.b64 -out sessionkey.bin 
```

//使用我的私钥解密

```
openssl rsautl -decrypt -inkey mykey.pem -in sessionkey.bin -out sessionkey_out.bin
openssl rsautl -decrypt -inkey mykey.pem -in iv.bin -out iv_out.bin 
```

//使用以下C代码转换为十六进制：

# 包括

```
main()
{
 int c;
        while ((c=getchar())!=EOF)
                printf("%02X",c);
} 
```

//使用十六进制IV和密钥解密消息

```
openssl enc -d -aes256 -iv iv.hex -K sessionkey.hex -in message.b64 -out message.txt 
```

我在最后一步得到错误，说 IV 不是十六进制的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-17T19:52:06.773

问题是您正在为 IV 和密钥指定文件，而 openssl 期望值在命令行上以十六进制形式提供。

例如，我试图解密 M3U8 流 (HLS)，而密钥 16 字节文件包含我无法在运行时通过键盘输入的不可打印字符（省略 -K 从键盘获取密钥）。

```
-rw-r--r--@ 1 Mufasa  staff       16 Apr 17 10:45 sequence146094144.key
-rw-r--r--  1 Mufasa  staff  3272528 Apr 17 10:48 sequence146094161.ts 
```

所以我将密钥文件转换为十六进制：

```
hexdump -e '16/1 "%02x" "\n"' sequence146094144.key 
8d2aeccbefb0955ec9a75f2f051faa6e 
```

而且我的 IV 已经以十六进制提供，所以我只是删除了`0x`：

```
IV=0x00000000000000000000000008B53851 
```

使用此命令成功解密 .ts 文件：

```
openssl aes-128-cbc -d -in sequence146094161.ts -out output.ts -iv 00000000000000000000000008B53851 -K 8d2aeccbefb0955ec9a75f2f051faa6e 
```

使用 ffprobe 检查输出：

```
ffprobe output.ts 
ffprobe version 2.8.git Copyright (c) 2007-2016 the FFmpeg developers
  built with Apple LLVM version 7.0.2 (clang-700.1.81)

...

Input #0, mpegts, from 'output.ts':
  Duration: 00:00:10.04, start: 8414.107644, bitrate: 2607 kb/s
  Program 1 
    Stream #0:0[0x1e1]: Video: h264 (Main) ([27][0][0][0] / 0x001B), yuv420p, 960x540 [SAR 1:1 DAR 16:9], Closed Captions, 29.97 fps, 29.97 tbr, 90k tbn, 59.94 tbc
    Stream #0:1[0x1e2](und): Audio: aac (HE-AAC) ([15][0][0][0] / 0x000F), 44100 Hz, stereo, fltp, 60 kb/s
    Stream #0:2[0x100]: Unknown: none ([134][0][0][0] / 0x0086) 
```

我的文件在 VLC 中播放。在您的情况下，如果`iv.bin`您生成的文件是纯文本十六进制字符串，请按原样在命令行上使用十六进制值，无需进一步转换。如果它看起来是十六进制以外的任何其他内容，则直接从文件将其转换为十六进制。`sessionkey.bin`您生成的文件也有相同的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:34:08.970

您可以使用 base64 工具将输入文件解码为二进制形式，然后可以将此文件获取到 openssl。

甚至您也可以编写自己的 base64 解码器。

# spring - Spring MVC：发现不明确的映射

> ID：15594652
> 
> 赞同：2
> 
> 时间：2013-03-24T02:53:33.087
> 
> 标签：spring, spring-mvc

我不明白为什么下面给出了一个模棱两可的映射。

一种。控制器类

```
@Controller
@RequestMapping("/employees")
public class EmployeeController {

@Autowired
private EmployeeService employeeService;

@RequestMapping(value = "/new", method = RequestMethod.GET)
public String get(Model model) {
    return "xx";
}

} 
```

**控制台输出：**

```
java.lang.IllegalStateException: Ambiguous mapping found. Cannot map 'org.tutorial.spring.controller.EmployeeController#0' bean method 
public java.lang.String org.tutorial.spring.controller.EmployeeController.get(org.springframework.ui.Model)
to {[/employees/new],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}: There is already 'employeeController' bean method
public java.lang.String org.tutorial.spring.controller.EmployeeController.get(org.springframework.ui.Model) mapped. 
```

它说方法已经被映射。怎么会这样？

湾。web.xml

```
<servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
</web-app> 
```

C。春天.xml

```
<context:annotation-config />
<context:component-scan base-package="org.tutorial.spring" />
<mvc:annotation-driven />
<bean class="org.tutorial.spring.controller.EmployeeController" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T02:59:08.757

尝试删除 bean 元素

```
<bean class="org.tutorial.spring.controller.EmployeeController" /> 
```

来自您的 XML。我怀疑这会导致您出现问题，因为

```
<context:component-scan base-package="org.tutorial.spring" /> 
```

将扫描您的包，并将 EmployeeController 识别为 bean，因为它的注释。然后，之后，您将手动添加相同的 bean。

# c++ - C++ - 当检查输入是否为整数时循环不断重复 -

> ID：15594654
> 
> 赞同：2
> 
> 时间：2013-03-24T02:53:48.760
> 
> 标签：c++, while-loop, modulus

我正在尝试进行模数运算。我要求用户输入两个数字，因为模数仅适用于整数，所以我有一个 while 循环来检查输入是否为整数。然后 while 循环要求用户重新输入这两个数字。但是 while 循环不断重复，不允许用户重新输入数字。这样做的正确做法是什么？

* * *

```
#include <iostream>
using namespace std;

int Modulus (int, int,struct Calculator);

struct Calculator
{
    int per_numb1, per_numb2;
    int per_Result; };

int main () 
{ 
    Calculator Operation1;

    cout << "\nPlease enter the first number to calculate as a modulus: "; 
    cin >> Operation1.per_numb1; 

    cout << "\nPlease enter the second number to calculate modulus: "; 
    cin >> Operation1.per_numb2; 

while ( !( cin >> Operation1.per_numb1)  ||   !( cin >> Operation1.per_numb2))
{ 

        cout << "\nERROR\nInvalid operation \nThe first number or second number   must be an integer"; 
        cout << "\n\nPlease re-enter the first number to begin Modulus: "; 
        cin >> Operation1.per_numb1;  

        cout << "\nPlease re-enter the second number to begin Modulus: ";
        cin >> Operation1.per_numb2;
}

Operation1.per_Result = Modulus(Operation1.per_numb1, Operation1.per_numb2, Operation1); 

cout << "\nThe result  is: " << Operation1.per_Result << endl;

}

int Modulus (int n1, int n2, struct Calculator)
{
    int Answer; 

    Answer = n1 % n2; 

    return Answer; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:30:03.290

重构为这样的东西：

```
 #include <iostream>
 #include <string>
 #include <limits>

 using namespace std;

 class Calculator
 {
 public:
     static int Modulus (int n1, int n2);
 };

 int Calculator::Modulus (int n1, int n2)
 {
     return n1 % n2; 
 }

 int getInt(string msg)
 {
     int aa;

     cout << msg;
     cin >> aa;
     while (cin.fail())
     {
         cin.clear();
         cin.ignore(std::numeric_limits<streamsize>::max(),'\n');
         cerr <<  "Input was not an integer!" << endl;
         cout << msg;
         cin >> aa;
     } 
     return aa;
 }

 int main () 
 { 
     int num1 = getInt("Enter first value: ");
     int num2 = getInt("Enter second value: ");
     int value = Calculator::Modulus(num1,num2);
     cout << "Answer:" << value << endl ;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:10:01.903

当输入解析失败时，无效的输入数据将保留在流中。你需要

1.  通过调用清除流错误状态`cin.clear()`。
2.  并跳过剩余的无效输入。

[请参阅此问题的答案。](https://stackoverflow.com/questions/7413247/cin-clear-doesnt-reset-cin-object)

# python - 尝试通过用户输入调用函数

> ID：15594655
> 
> 赞同：0
> 
> 时间：2013-03-24T02:53:57.290
> 
> 标签：python, string, function

```
def monster(name):

    with open('yvd.txt') as fd:
        input=[x.strip('|').split('|') for x in fd.readlines()]
        to_search={x[0]:x for x in input}
        print('\n'.join(to_search[name]))
monster_name=input('Input monster to search: ')
monster(monster_name) 
```

好的，所以我正在尝试`monster`通过用户输入调用该函数。`input`要求用户输入要搜索的怪物的名称。然后该函数`monster`搜索输入的怪物并将其打印出来。但是我如何让它在函数中可以调用字符串呢？

输出示例：

```
Input monster to search: Boogie Man
    Traceback (most recent call last):
    File "C:\Users\Trevor\Desktop\yvd_read.py", line 8, in <module>
    monster(monster_name)
    TypeError: 'str' object is not callable
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:28:00.053

您需要替换 python 内置函数 raw_input 来读取值而不是输入。请参阅[此处输入函数](http://docs.python.org/2/library/functions.html#input)的文档。这是更新的代码：

```
def monster(name):

with open('yvd.txt') as fd:
    user_input=[x.strip('|').split('|') for x in fd.readlines()]
    to_search={x[0]:x for x in input}
    print('\n'.join(to_search[name]))

monster_name=raw_input('Input monster to search: ')
monster(monster_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:20:00.540

问题是方法[输入](http://docs.python.org/2/library/functions.html#input)。您应该改用[raw_input](http://docs.python.org/2/library/functions.html#raw_input)。input 尝试评估字符串，但 raw_input 只是将用户写入的字符串放入变量中。

# xml - 使用 XPath 从 RSS 提要中选择前 5 个元素

> ID：15594662
> 
> 赞同：2
> 
> 时间：2013-03-24T02:54:43.413
> 
> 标签：xml, xslt, xpath, rss

我正在尝试从以下 RSS 提要 XML 中选择前 5 个项目：

```
<rss xmlns:RTgame="http://www.rottentomatoes.com/xmlns/rtnews/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
   <channel>
     <item>
       <pubDate>2013-03-22 16:45:10</pubDate>
       <title>
          Weekly Ketchup: Will Tom Cruise Be The Man From U.N.C.L.E.?
       </title>
       <link>
         http://www.rottentomatoes.com/m/1927101/news/1927101/
       </link>
       <description>
          <![CDATA[
            This week's Ketchup includes movie development news for reboots of <em>Escape from New York</em>, <em>Hercules</em>, and <em>Pete's Dragon</em>, the next <em>X-Men</em> and <em>Captain America</em> movies, and new roles for Tom Cruise, Hugh Jackman, and Robert Redford.
          ]]>
       </description>
       <guid>
         http://www.rottentomatoes.com/m/1927101/news/1927101/
       </guid>
       <atom:link rel="thumbnail" type="image/*" href="http://content6.flixster.com/movie/11/14/23/11142332_tmb.jpg"/>
    </item>
    <item>...</item>
    <item>...</item>
    <item>...</item>
    <item>...</item>
    <item>...</item>
    <item>...</item>
    <item>...</item>
    etc.
  </channel>
</rss> 
```

这是我的 XSLT 代码，其中包含 Xpath 表达式：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" version="1.0" omit-xml-declaration="yes" indent="yes" media-type="text/html"/>

<xsl:template match="rss/channel">
    <xsl:for-each select="item[position() < 6]">
        <xsl:variable name="link" select="link" />
        <a href="{$link}"><xsl:value-of select="title" /></a><br/>
        <xsl:value-of select="description" disable-output-escaping="yes" /><br/>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

我得到一个没有显示结果的空白页。但是，如果我将运算符从“<”更改为“>”或“=”，那么我会在页面上显示结果。

由于某种原因，它不适用于“<”运算符，我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T03:16:47.890

**只需更换**：

```
<xsl:for-each select="item[position() < 6]"> 
```

**与**：

```
<xsl:for-each select="item[position() &lt; 6]"> 
```

**说明**：

XSLT 转换是一个 XML 文档。根据在格式良好的 XML 文档中的定义，任何`<`不用于表示开始或结束标记的字符都必须进行转义。

# javascript - 避免与将大量 DOM 对象绑定到单击事件相关的内存或性能问题的最佳实践

> ID：15594663
> 
> 赞同：5
> 
> 时间：2013-03-24T02:55:07.693
> 
> 标签：javascript, jquery, dom

首先，我正在使用 Chrome 开发工具测试各种方法，但我不认为自己是当今现代浏览器中 JS 的“专家”，所以我正在寻找额外的反馈来补充我的测试。

我有一个页面，该页面通常包含 600 多个需要处理点击事件的元素。我可以想到至少 3 种完全不同的方法来解决这个问题，但我正在考虑页面大小、速度、JS 内存问题、与对象计数相关的问题（在性能和稳定性方面）。

1.  包括 onClick="foo(this);" 对于每个元素并在我包含的一个 .js 文件中定义函数。-- 较大的页面，定义一次的函数，我认为 JS 的内存占用更小，但整个页面更大。
2.  使用 jQuery 和 $(selector).click(foo(this)); - 页面更小，函数定义一次，我认为 JS 的内存占用更大，但整体页面更小。
3.  使用 jQuery 和 $(selector).click(function(this) { }); - 最小的页面，函数定义一次，但我希望这在内存方面是最苛刻的（我担心我可能会遇到一些 jQuery 或 JS 整体上的晦涩问题），但在概念上是最优雅的。

我必须支持几乎所有人们可能期望 jQuery 在其中运行的浏览器。项目的数量可能会增加更多（可能增加 4 或 5 倍）。

如果有另一种更好的方法，我很想听听。如果有人想对我的 3 种方法的任何优点/缺陷进行教育，我也会非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T05:01:36.770

将大量相似元素绑定到单个事件的最有效方法是使用事件冒泡。您将单个事件处理程序附加到公共父对象，然后在单个事件处理程序中检查事件源自哪个对象，以查看原始对象是否是您正在监视该事件的对象。

对于附加事件，您只需花费一个事件处理程序，并且您可以从该事件处理程序提供无限数量的子对象。

在每个事件的运行时都会有轻微的性能下降（可能不明显），因为事件必须在事件处理程序看到它之前冒泡到父级，并且事件处理程序必须检查源对象是否是所需的目标对象或不。但是，安装单个事件处理程序比安装数千个单独的事件处理程序要高效得多。

委托事件处理还有一个优点，即它适用于动态创建的对象，甚至是在安装事件处理程序之后创建的对象——这对于直接安装在对象本身上的事件处理程序（非委托事件处理程序）来说并不适用.

在 jQuery 中，您可以像这样使用委托事件处理：

```
$(common parent selector).on('click', selector of target objects, function() {}); 
```

例如，HTML：

```
<div id="parent">
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
    <button class="addButton">Add</button>
</div> 
```

代码：

```
$("#parent").on('click', ".addButton", function(e) {
    // the value of `this` is set to the object that originated the event
    //     e.g. what was clicked on
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:02:16.437

查看“on”事件处理程序的委托版本，在此处描述 [http://api.jquery.com/on/](http://api.jquery.com/on/)

在标题为“直接和委托事件”的部分中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:01:28.097

为此，您应该使用[jQuery 的 on() 方法](http://api.jquery.com/on/)。On 允许您将处理程序附加到高级 DOM 节点（例如文档）并在事件触发时依靠事件冒泡来执行处理程序。

```
$(document).on('click', [selector], [data], handler); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T05:11:14.500

您可以在本机 js 中执行类似这样的简单操作。

```
<div id="test">
    <input type="button" value="Button 1"/>
    <input type="button" value="Button 2"/>
    <input type="button" value="Button 3"/>
</div>
<script>
    var parent = document.getElementById('test');
    parent.onclick = function(e){
        alert(e.target.value);
    };
</script> 
```

# php - 回声中的 PHP 回声

> ID：15594664
> 
> 赞同：-1
> 
> 时间：2013-03-24T02:55:09.253
> 
> 标签：php, string, echo

我有一个看起来像这样的字符串：

```
<center>
    <div style="margin-top: 10px; margin-bottom: 10px; font-size: 20px; color: #000; font-weight: bold;">
        <?php echo strlen(file_get_contents('test.txt')); ?> Applications Sent
    </div>
</center> 
```

但是，我想用一个 if 语句来回应这一点。例如：

```
if ($test == '') { 
    echo '<center><div style="margin-top: 10px; margin-bottom: 10px; font-size: 20px; color: #000; font-weight: bold;"><?php echo strlen(file_get_contents("test.txt")); ?> Applications Sent</div></center>';
} 
```

问题是这不起作用，因为原始字符串中已经有一个回声。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T02:56:46.017

为了实现这一点，您应该连接您的字符串。在这种情况下，您有两个字符串围绕一个函数 - 但该函数返回一个字符串，因此将它们连接在一起是完全有效的。

```
if ($test == '') { 
    echo '<center><div style="margin-top: 10px; margin-bottom: 10px; font-size: 20px; color: #000; font-weight: bold;">' . strlen(file_get_contents("test.txt")) . ' Applications Sent</div></center>';
} 
```

# html - 在其中定位 div 和 span 文本

> ID：15594668
> 
> 赞同：1
> 
> 时间：2013-03-24T02:55:40.240
> 
> 标签：html, css

我尝试了很多东西，但无法获得所需的格式。HTML：

```
<div class="usertype">
            <div class="type1">
              <span class="type-heading">type1 is here</span>
              <span class="type-description">10 types have joined</span>
              <span class="type-description">35 type will.</span>
            </div>
            <div class="type2">
              <span class="type-heading">type2 is here</span>
              <span class="type-description">10 types are there</span>
              <span class="type-description">35 type will.</span>
            </div>
            <div class="type1">
              <span class="type-heading">type23 is good</span>
              <span class="type-description">50 types are there</span>
              <span class="type-description">50 types are there</span>
              <span class="type-description">for 2 months</span>
            </div>
            <div class="type2">
              <span class="type-heading">Type4 at last</span>
              <span class="type-description">50 types are there</span>
              <span class="type-description">makes their first $20</span>
              <span class="type-description">50 types are there</span>
              <span class="type-description">35 type will.</span>
            </div>
          </div> 
```

CSS：

```
div.usertype {
  margin-top: 1em;
}
div.type1 {
  float: left;
  margin-left: 2em;
}
span.type-heading {
  font-size: 14px;
  color: #f7f7f7;
}

span.type-description {
  font-size: 14px;
  color:#959595;
  display: block;
} 
```

输出： ![输出](../Images/0a5b5bd2eb5004a2308f0785ee61e9a0.png)

我想要的是：

1.  使用 class 减小跨度之间的垂直距离`type-description`。我尝试使用`line-height`但`padding-bottom`无法移动它。可能是某些父 div 具有`display:block`.
2.  所有类型描述左对齐，现在居中。如果我使用它`float: left`，它会完全破坏格式。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:09:16.257

```
<div class="usertype">
<div class="type1">
<span class="type-heading">type1 is here</span>
<span class="type-description">10 types have joined</span>
<span class="type-description">35 type will.</span>
</div>
<div class="type2">
<span class="type-heading">type2 is here</span>
<span class="type-description">10 types are there</span>
<span class="type-description">35 type will.</span>
</div>
<div class="type1">
<span class="type-heading">type23 is good</span>
<span class="type-description">50 types are there</span>
<span class="type-description">50 types are there</span>
<span class="type-description">for 2 months</span>
</div>
<div class="type2">
<span class="type-heading">Type4 at last</span>
<span class="type-description">50 types are there</span>
<span class="type-description">makes their first $20</span>
<span class="type-description">50 types are there</span>
<span class="type-description">35 type will.</span>
</div>
</div>

<style>

div.usertype {
  margin-top: 1em;
}
div.type1 {
  float: left;
  margin-left: 2em;
}
div.type2 {
  float: left;
  margin-left: 2em;
}
span.type-heading {
  font-size: 14px;
  color: #f7f7f7;
}

span.type-description {
  font-size: 14px;
  color:#959595;
  display: block;
  line-height:15px;
}
</style> 
```

# c++ - zlib压缩放大文件

> ID：15594669
> 
> 赞同：0
> 
> 时间：2013-03-24T02:55:59.990
> 
> 标签：c++, ios, c, zlib

我正在尝试在 iPhone 应用程序中使用 zlib 将文本文件压缩为 gzip 文件作为测试。我正在使用以下代码

```
const char *s = [[Path stringByReplacingOccurrencesOfString:[NSString stringWithFormat:@".%@", [Path pathExtension]] withString:@".gz"] UTF8String];
gzFile *fi = (gzFile *)gzopen(s, "wb");
const char *c = readFile(Path.UTF8String);
gzwrite(fi, c, strlen(c));
gzclose(fi); 
```

where`readFile()`返回使用函数`const char*`从文件中获取的a。`fgets()`问题是，当我使用它来压缩文件时，它不会压缩它，而是 gzip 文件比原始文件大。例如，我有一个 90 字节的文本文件，使用此方法后 gzip 的大小为 98 字节。为什么 gzip 不小于原始文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T03:00:03.523

GZip 格式包括固定大小的标头信息。因为您压缩的数据太少，所以标头信息大于您节省的空间。

90 字节一般不值得压缩。

[http://www.gzip.org/zlib/rfc-gzip.html#header-trailer](http://www.gzip.org/zlib/rfc-gzip.html#header-trailer)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:07:24.413

无论使用何种压缩算法，生成的数据总是有可能大于输入，否则将无法对输入位模式的任何组合进行编码。

正如在您的特殊情况中所述，与标头开销相比，文件大小非常小似乎是问题所在。

尽管如此，请记住，永远不能保证“压缩”文件的大小会更小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:01:50.727

1.  您尝试压缩的数据太小，没有太多冗余，因此没有什么可压缩的。简单地说，压缩算法通过消除数据中的重复序列来起作用。在 90 个字节中，您可能没有太多冗余，除非它是像`"aaaaaaa...."`.
2.  如前所述，固定标头开销。

尝试更大的数据文件。

# c - 大字符串 C/C++ 的优化

> ID：15594672
> 
> 赞同：0
> 
> 时间：2013-03-24T02:56:26.303
> 
> 标签：c, string, reduce

我正在寻找一种方法来优化我的实现。基本上这是一个类似“reduce”的（来自 Map Reduce 框架）功能。它需要一个键和它的值。目标是检查所有值是否不同，并以列表的形式输出它们：value1;value2;value3;...valuen; 作为一个字符串。n 可以非常大（以 1000 秒计）

```
void unique(char *key, int keybytes, char *multivalue, int nvalues,

        int *valuebytes, KeyValue *kv, void *ptr) {

    char * value = NULL;
    char * elem[nvalues];

    int i, j, cx;
    char adj[3858905] = ""; 
```

大问题是我必须为每个输入指定 char adj[] 长度，而且我不知道值的数量有多大。（这需要大量的内存）

```
 for (i = 0; i < nvalues; i++) {
        if (i == 0) {
            value = multivalue;
        } else {
            value = multivalue + valuebytes[i - 1];
            multivalue = multivalue + valuebytes[i - 1];
        }
        elem[i] = value;
    }

    size_t elem_length = sizeof(elem)/sizeof(char *);
    qsort(elem, elem_length, sizeof(char *), cstring_cmp);

    cx = sprintf(adj, "%s;", elem[0]);

    j = 0;
    for (i = 1; i < nvalues; i++) {
        bool matching = false;
        if (!strcmp(elem[i], elem[j]))
            matching = true;
        j++;
        if (!matching) //{;}
            cx += snprintf(adj + cx, 3858905 - cx - 1, "%s;", elem[i]);                                             
    } 
```

adj 是一个输出字符串 - 值列表。

```
 kv->add(key, keybytes, adj, strlen(adj) + 1); //this outputs key-value pairs.
} 
```

我必须只使用 C/C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:11:21.433

尝试使用霍夫曼编码。这是一件复杂而古老的事情，但我认为这是有效的。我不知道是否有新的或/和更好的算法可以做到这一点。

[http://www.cprogramming.com/tutorial/computersciencetheory/huffman.html](http://www.cprogramming.com/tutorial/computersciencetheory/huffman.html)

[http://en.wikipedia.org/wiki/Huffman_coding](http://en.wikipedia.org/wiki/Huffman_coding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:08:07.010

```
struct node {
  int value;
  struct node *next;
}; 
```

我建议使用链表来存储所有值，然后将其转换为字符串...

您可以计算链表中存储值的数量并使用它计算字符串长度......然后使用 malloc() 分配足够的内存......

稍后......虽然更多的值被添加到列表中，您可以修改使用 calloc() 分配的内存......

我不知道它是不是你真正想要的……但对我来说它看起来是可行的

# c# - getter 中的 StackOverFlow 异常

> ID：15594687
> 
> 赞同：0
> 
> 时间：2013-03-24T02:58:37.287
> 
> 标签：c#, exception, stack-overflow

我正在使用 Singleton 设计模式，如果之前没有使用过，我必须返回该对象。我在以下代码中遇到异常：

```
namespace app.Models
{
    public class Conexion:DbContext
    {    
        private static Conexion Instance = null;
        private Conexion(string con) : base(con) { }
        public static Conexion MainConexion 
        {
            get {//error here
                if (Instance == null)
                {
                    Instance = new Conexion(@"Server=*****; User Id=***;Password=****; Database=****");
                }
                return Instance;
            }
        }
        public DbSet<label> Labels { get; set; }
        public DbSet<checke_status> CheckStatus { get; set; }

        public void SaveChanges()
        {
            MainConexion.SaveChanges();
        }
    }
} 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:13:59.350

删除方法的覆盖`SaveChanges`：

```
namespace app.Models
{
    public class Conexion : DbContext
    {
        private static Conexion Instance = null;

        private Conexion(string con) : base(con) { }

        public static Conexion MainConexion 
        {
            get
            { //error here
                if (Instance == null)
                {
                    Instance = new Conexion(
                        @"Server=*****; User Id=***;Password=****; Database=****");
                }

                return Instance;
            }
        }

        public DbSet<label> Labels { get; set; }

        public DbSet<checke_status> CheckStatus { get; set; }
    }
} 
```

由于您有一个私有构造函数，因此可以使用的唯一实例是该`MainConexion`属性中公开的实例。看起来您试图确保在调用任何实例的`SaveChanges`方法时调用属性实例`SaveChanges`上的方法。`MainConnection`这不是必需的，因为您只能拥有`Conexion`该类的一个实例，而它就是您要调用的实例`SaveChanges`。用法还是一样的：

```
Conexion.MainConexion.SaveChanges(); 
```

话虽这么说，我认为如果您不以这种方式实现它，您的运气会更好。根据需要打开和关闭连接可能会更好，而不是依赖于单个连接实例。如果连接中断会发生什么？您的应用程序将被破坏，而不是得到一个错误。

# c# - XNA 减速动画

> ID：15594691
> 
> 赞同：1
> 
> 时间：2013-03-24T02:59:27.480
> 
> 标签：c#, xna, sprite-sheet

我正在让角色运行，但动画非常快，就像我在做的那样：

`_frameIndex++;`

`_frameIndex;`是指向 SpriteSheet 中图像的值。有谁知道我可以用它`gameTime.ElapsedGameTime.TotalMilliseconds`来减慢动画速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:26:21.583

我看到你今晚问了几个关于动画和精灵表的问题，所以这里有一个来自 Aaron Reed 的“[学习 XNA 4.0](http://www.aaronreed.com/dnn/LearningXNA40.aspx) ”的例子，来自第 3 章的“调整动画速度”标题。

首先，创建两个类级变量来跟踪动画帧之间的时间：

```
int timeSinceLastFrame = 0;
int millisecondsPerFrame = 50; 
```

第一个变量跟踪自动画帧更改以来经过的时间，第二个变量是您指定在再次移动帧索引之前等待的任意时间。所以`millisecondsPerFrame`变小会提高动画速度，变大会降低动画速度。

现在，在您的更新方法中，您可以利用`game.ElapsedGameTime`检查自上次帧更改以来经过的时间，并在该值大于毫秒每帧时更改帧，您可以执行以下操作：

```
timeSinceLastFrame += gameTime.ElapsedGameTime.Milliseconds;
if (timeSinceLastFrame > millisecondsPerFrame){
    timeSinceLastFrame -= millisecondsPerFrame;
    // Increment Current Frame here (See link for implementation)
} 
```

这种解决方案与您发现的解决方案类似，只是您可以采取额外的步骤来*准确指定您希望动画更新的频率*，或者如果您愿意，甚至可以稍后在您的代码中更改该持续时间。例如，如果有一些条件会“加速”精灵（如上电）或同样减慢它，您可以通过更改`millisecondsPerFrame`.

我删除了实际更新当前帧的代码，因为你应该已经有了一些可以做到这一点的东西，因为你有一个工作动画。如果您想查看完整的示例，可以从教科书的网站下载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:12:56.370

我调试了代码，发现`gameTime.ElapsedGameTime.TotalMilliseconds`总是等于 33。所以我做了以下事情：

`milliSeconds += gameTime.ElapsedGameTime.Milliseconds; if (milliSeconds > 99) { _frameIndex++; milliSeconds = 0; }`

这基本上意味着如果这是游戏的第三帧，那么让他的_frameIndex上升。重置毫秒以重新开始。

# c# - 集成测试数据库重建性能

> ID：15594696
> 
> 赞同：2
> 
> 时间：2013-03-24T03:00:42.293
> 
> 标签：c#, entity-framework, unit-testing, integration-testing

我正在对数据库运行一些集成测试。我想用种子数据设置数据库，运行我的测试，然后为每个测试删除数据库（所以每个测试都有一个新的石板）。我目前正在使用这些设置/拆卸方法来做到这一点：

```
private ProjectDbContext db;

[TestInitialize]
public void SetUp()
{
    db = new ProjectDbContext("TestConnection");
    (new SeedData()).Run(db); //Seed Data
}

[TestCleanup]
public void Teardown()
{
    db.Database.Delete();
    db.Dispose();
} 
```

我的问题是每次测试需要半秒多一点，我希望看到更好的性能。有什么想法吗？谁有更好的策略？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:24:25.343

您可以执行以下操作：

```
public static void ClearDatabase(DbContext context)
{
    var objectContext = ((IObjectContextAdapter)context).ObjectContext;
    var entities = objectContext.MetadataWorkspace.GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace).BaseEntitySets;
    var method = objectContext.GetType().GetMethods().First(x => x.Name == "CreateObjectSet");
    var objectSets = entities.Select(x => method.MakeGenericMethod(Type.GetType(x.ElementType.FullName))).Select(x => x.Invoke(objectContext, null));
    var tableNames = objectSets.Select(objectSet => (objectSet.GetType().GetProperty("EntitySet").GetValue(objectSet, null) as EntitySet).Name).ToList();

    foreach (var tableName in tableNames)
    {
        context.Database.ExecuteSqlCommand(string.Format("DELETE FROM {0}", tableName));
    }

    context.SaveChanges();
} 
```

如果您没有限制，并且以某种方式为您的测试设置标识列很重要（我不建议这样做），您可以使用 TRUNCATE 而不是 DELETE FROM。

[（从这里](https://stackoverflow.com/questions/6089403/delete-all-entities-in-entity-framework)删除的代码。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T01:13:04.800

根据您的代码，我了解到您想删除插入数据库进行测试的数据。我以稍微不同的方式完成了它，但它可能对你有帮助。我们可以使用**TransactionScope**而不是手动删除数据。代码图片![在 TestMethod 中使用 TransactionScope](../Images/25605714a2e0851d5d2da3ca9d6f1aa5.png) 您还可以[访问此处](http://foyzulkarim.blogspot.com/2012/09/using-transactionscope-in-testmethod.html)了解该方法的详细信息。

# php - 你如何获得数组中的前 10 个项目（PHP）？

> ID：15594704
> 
> 赞同：0
> 
> 时间：2013-03-24T03:02:25.910
> 
> 标签：php, arrays

获取数组中前 10 个项目的最佳方法是什么，我有一个包含数百个项目的数组，我想使用 PHP 从数组中获取前 10 个项目（最重复的项目），有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:11:52.763

这应该可以解决问题：

```
$inputArray = array('orange','banana', 'banana', 'banana', 'pear', 'orange', 'apples','orange', 'grape', 'apple');

$countedArray = array_count_values($inputArray);
arsort($countedArray);

$topTen = array_slice($countedArray, 0, 10); 
```

以上将按出现次数最多的项目的顺序返回数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:18:51.550

尝试使用 php[`array_count_values()`](http://www.php.net/manual/en/function.array-count-values.php)获取数组中每个值的出现次数，并结合[`arsort()`](http://www.php.net/manual/en/function.arsort.php)按最高频率值对数组进行排序。然后，您可以使用[`array_slice()`](http://www.php.net/manual/en/function.array-slice.php).

```
$dataArr = array('test', 4, 15.2, ...); // Input array with all data
$frequencies = array_count_values($dataArr);
arsort($frequencies); // Sort by the most frequent matches first.
$tenFrequencies = array_slice($frequencies, 0, 10, TRUE); // Only get the top 10 most frequent
$topTenValues = array_keys($tenFrequencies); 
```

**注意：**我们需要使用[`array_keys()`](http://php.net/manual/en/function.array-keys.php)来获取最终值，因为`array_count_values()`“返回一个数组，使用输入数组的值作为键，并将它们在输入中的频率作为值。”

# html - 将块元素排列在一条水平线上

> ID：15594707
> 
> 赞同：1
> 
> 时间：2013-03-24T03:03:42.027
> 
> 标签：html, structure, block

我不知道，要么我不擅长“搜索”，要么这个话题太简单了，通常没有人问这个问题，但自从我开始我的网站以来，我一直在搜索这个。我的网页上只有四个块元素。

*   第一个 Block 元素单独显示在顶部
*   第二，第三和第四块元素，我想从下一行开始排列在一个水平线上
*   目前我正在使用桌子来做这个，但是它的造型很糟糕，不是吗？！
*   请告诉我一种可以将所有这 3 个块元素放在同一行中的方法

目前，如果我删除 table 属性，我的块元素将移动到下一行。如果我删除 table 属性，这就是它的样子：

^^^^^^^^^块元素：顶部^^^^^^^^^^^^

^^^^方块2^^^^^

^^^^块3^^^^^

^^^^方块4^^^^^

我想要像这样在同一行中的块元素2,3,4：^^^^Block2^^^^^^^^^Block3^^^^^^^^^Block4^^^^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:28:12.627

您可以尝试 display:`inline-block`或`float:left`.

```
<html>
  <head>
    <style type="text/css">
      div {
      border: 1px black solid;
      }
    </style>
  </head>
  <body>
    <div>aaa</div>
    <div>bbbbbb</div>
    <div>cccc</div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/705300e19d96125c74461da248889fef.png)

```
<html>
  <head>
    <style type="text/css">
      div {
      border: 1px black solid;
      display: inline-block;
      }
    </style>
  </head>
  <body>
    <div>aaa</div>
    <div>bbbbbb</div>
    <div>cccc</div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/343aa3c064ecb013be781f5eb1df3b41.png)

```
<html>
  <head>
    <style type="text/css">
      div {
      border: 1px black solid;
      float: left;
      }
    </style>
  </head>
  <body>
    <div>aaa</div>
    <div>bbbbbb</div>
    <div>cccc</div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/09949d5a739042bb477b43e758a21017.png)

这些是对 Chrome 的影响。

# vim - (tmux+vim) vim 在 tmux 中退出后没有清除它的屏幕

> ID：15594710
> 
> 赞同：2
> 
> 时间：2013-03-24T03:04:17.623
> 
> 标签：vim, zsh, tmux

在 tmux shell 中，退出 vim 后，vim 屏幕并没有被清除。我正在使用zsh。不使用 tmux 也能正常工作。同样的问题也发生在屏幕上。

我正在使用 vim 7.3.672、tmux 1.7，全部采用默认配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:47:22.787

Put this line in your .screenrc:

`altscreen on`

Then screen will clear the VIM content when VIM exits.

With tmux, it should work out of the box.

PS. this is my [.tmux.conf](https://github.com/jhshi/dotfiles/blob/master/_tmux.conf)， in case you find anything interesting in it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-22T12:01:36.220

将以下行放入您的 .zshrc 中，然后重新启动终端。

```
export TERM=xterm 
```

这个对我有用。

# android - Android SQLite 查询 Where 和 Where

> ID：15594716
> 
> 赞同：2
> 
> 时间：2013-03-24T03:05:35.257
> 
> 标签：android, sqlite, cursor, where

我需要从 dan == table_column_one 和 vrijeme == table_column_two 的数据库返回 ID 值。我不知道该怎么做。

```
public static int returnID(String dan, int vrijeme){
        Cursor cursor;
        int IDRQ;
        cursor = db.query
                (
                        TABLE_NAME,
                        new String[] { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, TABLE_COLUMN_TWO },                       
                        new String[] {TABLE_COLUMN_ONE + " like " + "'%" + dan + "%'", TABLE_COLUMN_TWO + " like " + "'%" + vrijeme + "%'"}, null, null, null, null
                );  
        cursor.moveToFirst();           
        IDRQ = cursor.getInt(0);
        return IDRQ;
    }   ); 
```

这就是我尝试的方式，但当然，它是错误的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T03:14:39.697

在 SQLiteDatabase.query() 中，选择分为两部分。where 子句（a `String`）和 whereArgs（数组`String`）。

要向 where 子句添加多个条件，您可以使用`AND`or `OR`，就像Java 中的`&&`or一样。`||`

where 子句中的问号绑定到 whereArgs 数组中的字符串之一。

```
cursor = db.query(TABLE_NAME, new String[] { TABLE_COLUMN_ID, TABLE_COLUMN_ONE, TABLE_COLUMN_TWO },
TABLE_COLUMN_ONE + " LIKE ? AND " + TABLE_COLUMN_TWO + " LIKE ?",                           
new String[] {"%" + dan + "%", "%" + vrijeme + "%"},
null, null, null, null); 
```

# iphone - UIWebView webViewDidStartLoad 有时不触发

> ID：15594717
> 
> 赞同：1
> 
> 时间：2013-03-24T03:05:50.677
> 
> 标签：iphone, ios, objective-c, uiwebview, uiwebviewdelegate

我的视图控制器中有一个 UIWebView 并已通过代码（即不通过 IB）将其委托设置为视图控制器。我还设置了适当的委托方法：shouldStartLoadWithRequest、webViewDidStartLoad、webViewDidFinishLoad 和 didFailLoadWithError。

在我的视图控制器的 viewDidLoad 方法中，我使用以下代码加载了一个适当的 URL：

```
[self.webView loadRequest:reqURL]; 
```

95% 的时间一切正常，页面加载到 UIWebView 对象中并按预期显示。但是，有时页面不会加载。

在逐步完成我的代码后，我意识到在它不起作用的时候，shouldStartLoadWithRequest 委托方法会触发，但 webViewDidStartLoad 不会。

有谁知道这里发生了什么？我在 Stack Overflow 上找不到任何专门解决我遇到的这个独特问题的内容，并且正在慢慢达到我的临界点。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T04:20:34.203

您应该确保您的`shouldStartLoadWithRequest`实现`YES`在您需要加载 webView 的所有条件下都返回。

# android - 仅在 Android 应用程序启动时执行任务

> ID：15594721
> 
> 赞同：0
> 
> 时间：2013-03-24T03:06:13.173
> 
> 标签：android, android-activity, sharedpreferences

在我的应用程序中，我希望仅在应用程序启动时将字符串传递给服务器。

我已经使用 SharedPreferences 来检查是否发送了字符串。

此代码在 MainActivity 之星处运行

```
 pref=getPreferences(MODE_PRIVATE);
        Sent=pref.getString("ID_SENT", "");
        if(Sent.equals(""))
        {
            SharedPreferences.Editor editor=pref.edit();
            editor.putString("ID_SENT","NO");
            editor.commit();
            Sent=pref.getString("ID_SENT","");
        } 
```

现在，在 AsyncTask 的 onPostExecute 中将字符串发送到服务器后，此代码用于将变量 ID_SENT 设置为 YES：

```
 Sent=pref.getString("ID_SENT", "");
                    if(Sent.equals("NO"))
                    {
                        SharedPreferences.Editor editor=pref.edit();
                        editor.putString("ID_SENT","YES");
                        editor.commit();
                    } 
```

现在的问题是，当我关闭应用程序并再次启动应用程序时，它不会将字符串发送到服务器，因为它发现 ID_SENT 设置为 YES。

那么有什么方法可以让我在 MainActivity 上按下后退按钮时将 ID_SENT 设置为 no？

**编辑：**

我将 MainActivity 的启动模式设置为 singleTop。所以现在只要我从另一个活动中按下主页按钮，活动就会恢复。并且字符串不是每次都发送，因为 MainActivity 只是恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:13:09.300

> 那么有什么方法可以让我在 MainActivity 上按下后退按钮时将 ID_SENT 设置为 no？

是的，

```
@Override
public void onBackPressed()
{
    // do your save logic here
} 
```

或者你可以`override onDestroy()`，这可能会更安全，以防 Android 破坏`Activity`回收内存

# php - PHP代码达到执行时间限制

> ID：15594723
> 
> 赞同：1
> 
> 时间：2013-03-24T03:06:45.303
> 
> 标签：php, performance, execution-time, haversine

我需要遍历一个包含地图中点的数组并检查它们之间的距离。我需要计算每个节点的 200m 和 50m 范围内有多少个节点。它适用于较小数量的值。但是，当我尝试通过它运行更多值（大约 4000 用于可扩展性测试）时，会出现一个错误，说我已经达到了 300 秒的最大执行时间。如果可能的话，它需要能够在 300 秒内至少处理这么多。

我已经阅读并发现有一种方法可以禁用/更改此限制，但**我想知道是否有更简单的方法来执行以下代码，以便运行它所需的时间会减少。**

```
for($i=0;$i<=count($data)-1;$i++)
        {
            $amount200a=0;
            $amount200p=0;
            $amount50a=0;
            $amount50p=0;
            $distance;
            for($_i=0;$_i<=count($data)-1;$_i++)
            {
                $distance=0;
                if($data[$i][0]===$data[$_i][0])
                {
                }
                else
                {
                    //echo "Comparing ".$data[$i][0]." and ".$data[$_i][0]." ";
                    $lat_a = $data[$i][1] * PI()/180;
                    $lat_b = $data[$_i][1] * PI()/180;
                    $long_a = $data[$i][2] * PI()/180;
                    $long_b = $data[$_i][2] * PI()/180;
                    $distance =
                            acos(
                                    sin($lat_a ) * sin($lat_b) +
                                    cos($lat_a) * cos($lat_b) * cos($long_b - $long_a)
                            ) * 6371;
                    $distance*=1000;
                    if ($distance<=50)
                    {
                        $amount50a++;
                        $amount200a++;
                    }
                    else if ($distance<=200)
                    {
                        $amount200a++;
                    }
                }
            }
            $amount200p=100*number_format($amount200a/count($data),2,'.','');
            $amount50p=100*number_format($amount50a/count($data),2,'.','');
            /*
            $dist[$i][0]=$data[$i][0];
            $dist[$i][1]=$amount200a;
            $dist[$i][2]=$amount200p;
            $dist[$i][3]=$amount50a;
            $dist[$i][4]=$amount50p;
            //*/
            $dist.=$data[$i][0]."&&".$amount200a."&&".$amount200p."&&".$amount50a."&&".$amount50p."%%";
        } 
```

索引 0 包含每个节点的唯一 ID，1 包含每个节点的纬度，索引 2 包含每个节点的经度。

错误发生在第一个循环内的第二个 for 循环中。此循环是将所选地图节点与其他节点进行比较的循环。我也在使用Haversine 公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T10:10:38.797

目前，您正在检查所有点与所有其他点，实际上您只需要检查当前点与所有剩余点。A到B的距离和B到A的距离是一样的，为什么要计算两次呢？

我可能会创建一个相邻的数组来计算有多少节点在彼此的范围内，并在我计算出两个节点在彼此的范围内之后增加该数组中的条目对。

您可能应该提出一个非常快速的距离近似值，可用于在计算实际距离之前忽略尽可能多的节点（这永远不会超快）。

一般来说，除了算法优化之外，优化的基本规则是：

*   不要进行任何您不必做的处理：例如不要将 $distance 乘以 1000。只需将您要测试的值分别从 20 和 50 更改为 0.02 和 0.05。

*   不要频繁调用任何函数：您只需要在任何处理开始之前调用一次 count($data)。

*   不要多次计算常量值：`PI()/180`例如。

*   将所有可能的处理移到循环之外。即尽可能多地预先计算。

另一个小点将使您的代码更易于阅读：

`for( $i = 0; $i <= count( $data ) - 1; $i++ )`是相同的：

`for( $i = 0; $i < count( $data ); $i++ )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T10:48:55.247

尝试这个：

```
$max = count($data);
$CONST_PI = PI() / 180;

for($i=0;$i<$max;$i++)
{
    $amount200a=0;
    $amount50a=0;

    $long_a = $data[$i][2] * $CONST_PI;
    $lat_a = $data[$i][1] * $CONST_PI;

    for($_i=0;$_i<=$max;$_i++) 
    //or use for($_i=($i+1);$_i<=$max;$_i++) if you did not need to calculate already calculated in other direction
    {
        $distance=0;
        if($data[$i][0]===$data[$_i][0]) continue;

        $lat_b = $data[$_i][1] * $CONST_PI;
        $long_b = $data[$_i][2] * $CONST_PI;
        $distance =
                acos(
                        sin($lat_a ) * sin($lat_b) +
                        cos($lat_a) * cos($lat_b) * cos($long_b - $long_a)
                ) * 6371;
        if ($distance<=0.2)
        {
            $amount200a++;
            if ($distance<=0.05)
            {
                $amount50a++;
            }
        }
    } // for %_i
    $amount200p=100*number_format($amount200a/$max,2,'.','');
    $amount50p=100*number_format($amount50a/$max,2,'.','');

    $dist.=$data[$i][0]."&&".$amount200a."&&".$amount200p."&&".$amount50a."&&".$amount50p."%%";
} // for $i 
```

我认为阅读会更好，如果您更改 for $_i 的注释行，它会更快:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T09:51:02.663

首先，您正在**使用大 O 表示法： O(data^2)**，这会非常慢，实际上，有两种可能的解决方案。找到一种经过验证的算法，可以在更好的时间解决相同的问题。或者，如果您不能，开始将内容移出内部 for 循环，并在数学上证明您是否可以将内部 for 循环转换为大多数简单的计算，这**通常**是您可以做的。

经过一些重写，我看到了一些可能性： **如果 $data 不是 SPLFixedArray （它的访问时间更远，），那么就让它吧。**因为您多次访问该数据 (4000^2)*2。其次，编写更简洁的代码。尽管 optizmier 会尽力而为，但如果您不尝试最小化代码（这只会使其更具可读性），那么它可能无法做到最好。

并将中间结果移出循环，也类似于数组的大小。

# php - 用 php 检查我的链接格式

> ID：15594728
> 
> 赞同：6
> 
> 时间：2013-03-24T03:06:56.017
> 
> 标签：php, format, hyperlink

我有这样的事情：

```
<?php

$siteurl = "http://www.example.com/";

$pageid = "ed2689";

$pageurl = $siteurl.$pageid;

?> 
```

链接将是这样的：

[http://www.example.com/ed2689](http://www.example.com/ed2689)

[http://www.example.com/report/ed2689](http://www.example.com/report/ed2689)

我使用 preg_match 来检查每个链接的格式

对于第一个链接，它必须完全像这样：

$siteurl.[a-z0-9]

我用过这个：

```
if (preg_match('/[$siteurl]+[a-z0-9]/', $pageurl) && !preg_match('/[=]|[?]/', $pageurl))
{
echo 'Ok',
} 
```

对于第二个链接，它必须完全像这样：

$siteurl.'report/'.[a-z0-9]

我用过这个：

```
if (preg_match('/[$siteurl]+[report]+[a-z0-9]/', $req_uri) && !preg_match('/[=]|[?]/', $req_uri))
{
echo 'Ok',
} 
```

它不能正常工作..有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:30:06.920

如果不起作用，请告诉我

```
<?php
    $siteurl = 'http://www.example.com/report/ed2689';
    //$siteurl = 'http://www.example.com/ed2689';
    if(strpos($siteurl,'www.example.com') === false) echo 'not my site';
    else {
        $arr = explode('www.example.com/',$siteurl);
        $suburl = trim($arr[1]);
        if (preg_match('/^[a-z0-9]+$/', $suburl) || preg_match('/^report\/[a-z0-9]+$/', $suburl))
        {
        echo 'ok';
        }
    }

?> 
```

# jquery - 使用 keyup 计算 jQuery 中的字符数

> ID：15594733
> 
> 赞同：1
> 
> 时间：2013-03-24T03:08:28.673
> 
> 标签：jquery

我完全理解用于计算 a或`.bind('keyup', function() { });`中的字符的方法，但我尝试了一个函数，以便您可以在键入时看到结果，对战，按住键盘上的一个字母，直到释放密钥之后。`textarea``input``keydown`

```
var input = $('textarea#input');
$('span#character-count').text(input.val().length);

input.bind('keydown', function() {
    $('span#character-count').text(input.val().length + 1);
}); 
```

我目前的方法有缺陷：

*   当您全选并点击删除时，计数会混乱。
*   需要 +1 才能显示实时取景

**jsFiddle：http:** [//jsfiddle.net/rdvR7/](http://jsfiddle.net/rdvR7/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T03:36:42.687

我建议对 keyup 进行准确计数会更好，即使在按住键时它暂时错误，因为在实践中我认为用户并不经常需要重复相同的字符，因此他们不会倾向于持有单个字符按键，它使代码保持简单。但是如果你想要keydown...

> *“它需要 +1 才能显示实时视图”*

我假设您意识到这是因为在处理 keydown 事件期间该字段的当前值不包括与击键相关的更改 - 如果是这样，您无法取消 keydown 事件而无需撤消更改。

解决此问题的一种简单方法是将更新计数延迟到 keydown 事件完成之后，可能像这样：

```
var input = $('textarea#input'),
    count = $('span#character-count').text(input.val().length);

input.bind('keydown', function() {
    setTimeout(function() {
       count.text(input.val().length);
    },4);
}); 
```

更新演示：http: [//jsfiddle.net/nnnnnn/rdvR7/2/](http://jsfiddle.net/nnnnnn/rdvR7/2/)

请注意，用户可以在完全不触发键盘事件的情况下添加或删除文本（通过拖放或剪切/粘贴）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:17:14.280

当用户在 textarea 中选择文本时绑定“keyup”事件：

```
var input = $('textarea#input');
$('span#character-count').text(input.val().length);

input.bind('keydown', function(e) {
    $('span#character-count').text(0);
    input.select( function () {
        input.bind('keyup', function(e) {
            $('span#character-count').text(input.val().length);
        })
    });
    $('span#character-count').text(input.val().length);
}); 
```

jsfiddle：http: [//jsfiddle.net/glenswift/SEBLD/1/](http://jsfiddle.net/glenswift/SEBLD/1/)

您还可以结合绑定“keydown”和“keyup”：

```
var input = $('textarea#input'),
    firstInput = true;
$('span#character-count').text(input.val().length);
input.bind('keydown, keyup', function(e) {
    $('span#character-count').text(0);
    $('span#character-count').text(input.val().length);
}); 
```

jsfiddle：http: [//jsfiddle.net/glenswift/L6DR8/1/](http://jsfiddle.net/glenswift/L6DR8/1/)

# c++ - 如何使用 SOCI 库将变量绑定到准备好的语句？

> ID：15594736
> 
> 赞同：5
> 
> 时间：2013-03-24T03:08:37.743
> 
> 标签：c++, mysql, database, sqlite, soci

目前我的应用程序只支持 SQLite 数据库，但我想同时支持 SQLite 和 MySQL 数据库，所以我正在测试[SOCI 库](http://soci.sourceforge.net)，看看它是否能满足我的需要。但是，尽管有[示例和文档](http://soci.sourceforge.net/doc/statements.html)，但我无法弄清楚 SOCI 如何处理准备好的语句。

使用[SQLite C API](http://www.sqlite.org/c3ref/prepare.html)时，您**准备**语句：

```
sqlite3_stmt* statement;
sqlite3_prepare_v2( database_handle_pointer,
                    "SELECT * FROM table WHERE user_id=:id;",
                    -1,
                    &statement,
                    NULL ); 
```

稍后您将一个值**绑定**到 :id 占位符，**执行**语句并逐步检查结果：

```
const sqlite3_int64 user_id = some_function_that_returns_a_user_id();
const int index = sqlite3_bind_parameter_index( statement, ":id" );
sqlite3_bind_int64( statement, index, user_id );

while ( sqlite3_step( statement ) == SQLITE_ROW )
{
     // Do something with the row
} 
```

我如何使用 SOCI 做到这一点？看起来准备和绑定概念并没有像原生 SQLite API 那样分开。绑定是否必须在使用 soci::use() 进行准备期间发生？

**更新 1**：如果我没有很好地解释这个问题：这是一个使用 SQLite C API 的小型、有效的 C++ 示例。如果我能看到这个使用 SOCI 重新实现，它会回答这个问题。

```
#include <sqlite3.h>
#include <iostream>

// Tables and data
const char* table = "CREATE TABLE test ( user_id INTEGER, name CHAR );";
const char* hank = "INSERT INTO test (user_id,name) VALUES(1,'Hank');";
const char* bill = "INSERT INTO test (user_id,name) VALUES(2,'Bill');";
const char* fred = "INSERT INTO test (user_id,name) VALUES(3,'Fred');";

// Create a SQLite prepared statement to select a user from the test table.
sqlite3_stmt* make_statement( sqlite3* database )
{
    sqlite3_stmt* statement;
    sqlite3_prepare_v2( database,
                        "SELECT name FROM test WHERE user_id=:id;",
                        -1, &statement, NULL );
    return statement;
}

// Bind the requested user_id to the prepared statement.
void bind_statement( sqlite3_stmt* statement, const sqlite3_int64 user_id )
{
    const int index = sqlite3_bind_parameter_index( statement, ":id" );
    sqlite3_bind_int64( statement, index, user_id );
}

// Execute the statement and print the name of the selected user.
void execute_statement( sqlite3_stmt* statement )
{
    while ( sqlite3_step( statement ) == SQLITE_ROW )
    {
        std::cout << sqlite3_column_text( statement, 0 ) << "\n";
    }
}

int main()
{
    // Create an in-memory database.
    sqlite3* database;
    if ( sqlite3_open( ":memory:", &database ) != SQLITE_OK )
    {
        std::cerr << "Error creating database" << std::endl;
        return -1;
    }

    // Create a table and some rows.
    sqlite3_exec( database, table, NULL, NULL, NULL );
    sqlite3_exec( database, hank, NULL, NULL, NULL );
    sqlite3_exec( database, bill, NULL, NULL, NULL );
    sqlite3_exec( database, fred, NULL, NULL, NULL );

    sqlite3_stmt* statement = make_statement( database );

    bind_statement( statement, 2 );

    execute_statement( statement );

    // Cleanup
    sqlite3_finalize( statement );
    sqlite3_close( database );

    return 1;
} 
```

使用 SOCI 部分实现的相同程序（注意标记为**HELPME**的两个存根函数）

```
#include <soci/soci.h>
#include <iostream>

const char* table = "CREATE TABLE test ( user_id INTEGER, name CHAR );";
const char* hank = "INSERT INTO test (user_id,name) VALUES(1,'Hank');";
const char* bill = "INSERT INTO test (user_id,name) VALUES(2,'Bill');";
const char* fred = "INSERT INTO test (user_id,name) VALUES(3,'Fred');";

soci::statement make_statement( soci::session& database )
{
    soci::statement statement =
        database.prepare << "SELECT name FROM test WHERE user_id=:id";
    return statement;
}

void bind_statement( soci::statement& statement, const int user_id )
{
    // HELPME: What goes here?
}

void execute_statement( soci::statement& statement )
{
    // HELPME: What goes here?
}

int main()
{
    soci::session database( "sqlite3", ":memory:" );

    database << table;
    database << hank;
    database << bill;
    database << fred;

    soci::statement statement = make_statement( database );
    bind_statement( statement, 2 );
    execute_statement( statement );
} 
```

**更新 2**：当我找到[cppdb 库](http://cppcms.com/sql/cppdb/)时，我最终放弃了 SOCI 。与 SOCI 不同，它只是对原生 C API 的一个非常薄的包装器，适合我目前的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T09:56:47.800

该文档解释了如何使用[带参数的准备好的语句](http://soci.sourceforge.net/doc/statements.html#preparation)：

```
int user_id;
string name;
statement st = (database.prepare << "SELECT name FROM test WHERE user_id = :id",
                use(user_id),
                into(name));

user_id = 1;
st.execute(true); 
```

请注意`user_id`和`name`变量的生命周期必须至少与`st`.

# scala - 通过 Scala 反射查找封闭实例（如果有）

> ID：15594738
> 
> 赞同：3
> 
> 时间：2013-03-24T03:09:49.810
> 
> 标签：scala

我正在尝试使用 Scala 反射来定义特征案例类，并且它们的同伴可以实现为“可导出”（例如，映射到 Map[String,Any]）和“可导入”。它适用于顶级案例类，但我不能让它适用于内部类。如果我已经有一个封闭实例的句柄，我会知道如何反射地实例化一个内部类，我可以反映到一个 InstanceMirror，但现在我正在编写一个稍后将由顶级或内部类实现的特征.

只要同伴和构造的实例将共享相同的封闭实例，我应该能够完成这项工作。但是我一直无法弄清楚如何通过反射来确定同伴的封闭实例。

这是我正在尝试做的事情的简化示例，以及发生的问题：

```
import scala.reflect.runtime.universe._;

trait CompanionOfReflectiveConstructable[T] {
  def tType : Type;

  lazy val mirror       : Mirror       = runtimeMirror( this.getClass.getClassLoader );
  lazy val ctorDecl     : Symbol       = tType.declaration(nme.CONSTRUCTOR);
  lazy val ctor         : MethodSymbol = ctorDecl.asMethod;
  lazy val tClass       : ClassSymbol  = tType.typeSymbol.asClass;
  lazy val tClassMirror : ClassMirror  = mirror.reflectClass( tClass );
  lazy val ctorF        : MethodMirror = tClassMirror.reflectConstructor( ctor );

  // in real-life, i'd derive arguments from ctor.paramss
  // but to highlight our issue, we'll assume a no arg constructor
  def createInstance : T = ctorF().asInstanceOf[T]; 
}

trait ReflectiveConstructable;

object Test1 extends CompanionOfReflectiveConstructable[Test1] {
  def tType = typeOf[Test1];
}
class Test1 extends ReflectiveConstructable;

class Outer {
  object Test2 extends CompanionOfReflectiveConstructable[Test2] {
    def tType = typeOf[Test2];
  }
  class Test2 extends ReflectiveConstructable;
} 
```

这就是发生的事情。

```
scala> Test1.createInstance
res0: Test1 = Test1@2b52833d

scala> (new Outer).Test2.createInstance
scala.ScalaReflectionException: class Test2 is an inner class, use reflectClass on an InstanceMirror to obtain its ClassMirror
        at scala.reflect.runtime.JavaMirrors$JavaMirror.ErrorInnerClass(JavaMirrors.scala:126)
... 
```

Test1 效果很好。Test2 的问题很明显——我需要通过 InstanceMirror 而不是通过我的顶级镜像来获取我的 ClassMirror。（请参阅[此处](https://stackoverflow.com/questions/11020746/get-companion-object-instance-with-new-scala-reflection-api)、[此处](https://gist.github.com/xeno-by/4985929)和[此处](https://stackoverflow.com/questions/11084408/scala-reflection-error-this-is-an-inner-module-use-reflectmodule-on-an-instanc)。）但是，在 CompanionOfReflectiveConstructable 中，我不知道如何检查我是否是内在的或我的封闭实例是谁，以有条件地执行适当的工作。有谁知道如何做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:35:03.530

我在这里看到的主要问题是您在内部类的伴随对象内部使用反射。类 Test2 将定义一个名为 $outer 的字段，其中包含外部类，但是，从 Test2 伴随对象中，您无法获得创建 Test2 所需的 Outer 实例。我能看到的唯一解决方法是将一个可选实例传递给你的伴侣特征：

```
trait CompanionOfReflectiveConstructable[T] {
  def tType: Type

  def outer: Option[AnyRef] = None

  val mirror = runtimeMirror(this.getClass.getClassLoader)
  val tClassMirror = outer
    .map(a => mirror.reflect(a).reflectClass(tType.typeSymbol.asClass))
    .getOrElse(mirror.reflectClass(tType.typeSymbol.asClass))

  val ctorF = tClassMirror.reflectConstructor(tType.declaration(nme.CONSTRUCTOR).asMethod)

  // in real-life, i'd derive arguments from ctor.paramss
  // but to highlight our issue, we'll assume a no arg constructor
  def createInstance: T = ctorF().asInstanceOf[T]
}

trait ReflectiveConstructable

class Test1 extends ReflectiveConstructable

object Test1 extends CompanionOfReflectiveConstructable[Test1] {
  def tType = typeOf[Test1]
}

class Outer {

  object Test2 extends CompanionOfReflectiveConstructable[Test2] {
    def tType = typeOf[Test2]
    override def outer = Option(Outer.this)
  }

  class Test2 extends ReflectiveConstructable
} 
```

如果有一种方法可以从 Test2 伴随对象中获取 Outer 实例，那就太好了，但遗憾的是它在运行时不可用。

# jquery - 如何将 Fullcalendar 开始日期传递给 JSP 中的表单？

> ID：15594741
> 
> 赞同：1
> 
> 时间：2013-03-24T03:10:14.407
> 
> 标签：jquery, forms, jsp, fullcalendar

我想在同一个 Jsp 中将选定的 startDate 和 endDate 显示为文本框值，我使用的是 Java 和 struts2。谁能告诉我正确的语法。下面的语法给了我一个空值

脚本 1 我试过：

```
select : function( startDate, endDate, allDay, jsEvent, view ){
$.post("login_success_fr.jsp",{start : startDate});
$('#calEventDialog').dialog('open');
}, 
```

脚本 2 我试过：

```
select : function( startDate, endDate, allDay, jsEvent, view ){
var startDate=startDate;   
$.post("login_success_fr.jsp",{start : startDate});
$('#calEventDialog').dialog('open');
}, 
```

脚本 3 我试过：

```
select : function( startDate, endDate, allDay, jsEvent, view ){
var start=startDate;   
$.post("login_success_fr.jsp",{start : start});
$('#calEventDialog').dialog('open');
}, 
```

我在 JSP 中的表单：

```
 <div id="calEventDialog">
    <s:form action="ScheduleDialogFormSubmit" method="post">
    <table>
    <tr>
    <td width="25%">Start Time</td>
    <td><input type="text" name="dialogForm.startTime" value="**<%=request.getParameter("start")%>**" tabindex="1" size="25"></td>
    </tr>
    </table>
    <s:form> 
```

请帮我找到显示开始日期和时间的正确语法。

# jquery - 不包含链接测试的 LI

> ID：15594742
> 
> 赞同：0
> 
> 时间：2013-03-24T03:10:16.690
> 
> 标签：jquery

我想不通。我已经做了一些搜索，我发现我认为会起作用，但事实并非如此。

我有这样的结构。

当你点击一个数字时，锚点就会被移除。当您随后单击另一个数字时，我想知道哪个 li 中没有锚点，或者它的文本没有被锚点包裹。不管测试如何，我总是能得到 li 的全部范围。它从来没有通过我的测试。

在以下情况下，我通过一个元素的 LI 集合来重申。

```
var page = jQuery('#thiselement');

       jQuery.each(page.find('li'),function(){
         if(jQuery(':not(:has(a))',this)){
            // also tried jQuery(this), no luck
            // no matter what, it ALWAYS falls in this conditional 
            // if the LI has a link or not, it gets in here
         }
        }

    <ul id="thiselement">
       <li><a href="#">1</a></li>
       <li><a href="#">2</a></li>
       <li><a href="#">3</a></li>
       <li><a href="#">4</a></li>
       <li><a href="#">5</a></li>
    </ul> 
```

我需要将通过测试的任何内容包装在一个锚标记中。所以，让我们说当测试是有条件的运行时，我们有：

```
<ul id="thiselement">
 <li><a href="#">1</a></li>
 <li><a href="#">2</a></li>
 <li><a href="#">3</a></li>
 <li>4</li>
 <li><a href="#">5</a></li> 
```

然后……第 4 里就通过了测试，因为那是里面没有“a”的“this”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:32:27.353

首先`jQuery(':not(:has(a))',this)`，它总是一个真值，它可能是空的，但在布尔上下文中它仍然是真值。所以形式`if($(x))`的测试并不是非常有用。

你也把事情复杂化了。如果你想要`<li>`s 不包含任何`<a>`s 那么你可以做一个简单的测试，如下所示：

```
if($(this).find('a').length == 0)
    // You want this one... 
```

如果您希望使用小型子树并且`<a>`一次最多使用一个，则无需通过尝试找到最佳短路选择器来使事情变得过于复杂，只需查看您想要的内容是否以直接的方式存在并移动继续更有趣的事情。

所以这样的事情应该让它去：

```
page.find('li').each(function() {
    if(jQuery(this).find('a').length == 0) {
        // Do interesting things here...
    }
}); 
```

请注意，您不需要`jQuery.each(page.find(...), ...`，您可以调用[`each`](http://api.jquery.com/each/)给[`find`](http://api.jquery.com/find/)您的内容。

您甚至可以[`filter`](http://api.jquery.com/filter/)毫不费力地将其重写为调用。

简单演示：http: [//jsfiddle.net/ambiguous/wvn6A/](http://jsfiddle.net/ambiguous/wvn6A/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T04:10:07.913

如果你只想找到没有锚的列表项，试试这个。

```
<script type="text/javascript">
    $(document).ready(function(e) {
        var page = $("#thiselement")
        page.find("li:not(:has(a))").wrap('<a href="#">');
    });
</script>
<ul id="thiselement">
 <li><a href="#">1</a></li>
 <li><a href="#">2</a></li>
 <li><a href="#">3</a></li>
 <li>4</li>
 <li><a href="#">5</a></li>
</ul> 
```

否则，如果你需要做更多的事情，试试这个。

```
<script type="text/javascript">
    $(document).ready(function(e) {
        var page = $("#thiselement")
        page.find("li:not(:has(a))").each(function(){
            $(this).wrap('<a href="#">'); 
        });
    });
</script>
<ul id="thiselement">
 <li><a href="#">1</a></li>
 <li><a href="#">2</a></li>
 <li><a href="#">3</a></li>
 <li>4</li>
 <li><a href="#">5</a></li>
</ul> 
```

# github - 如何应对 git repo 同步失败

> ID：15594743
> 
> 赞同：1
> 
> 时间：2013-03-24T03:10:20.253
> 
> 标签：github

我使用 github windows 客户端。当我将鼠标移动到“同步”按钮时，它告诉我“提前 2 个提交，落后 0 个提交”，所以我点击了同步，但是 github 客户端提醒我“无法同步这个分支。你可能需要打开一个 shell 并调试这个 repo 的状态。

我应该怎么做？我不知道该如何应对。

# oracle - 警告：创建的过程存在编译错误

> ID：15594747
> 
> 赞同：0
> 
> 时间：2013-03-24T03:10:46.553
> 
> 标签：oracle

```
create or replace PROCEDURE check_stock_qty
  BEGIN
    FOR r IN
    ( SELECT P_ID FROM product WHERE PRODUCT.p_value < 50
    )
    LOOP
      apex_mail_p.mail
      (
        'raavimistry@gmail.com',
        'ravimistryof180@gmail.com',
        'TEST',
        '( r.P_ID )');
    END LOOP;
  END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:27:12.040

要查找对象上的错误，请尝试

```
SELECT * FROM ALL_ERRORS WHERE NAME = 'CHECK_STOCK_QTY' 
```

分享和享受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:15:17.550

您在过程名称之后缺少`IS`or ：`AS`

```
create or replace PROCEDURE check_stock_qty IS
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:15:21.967

您缺少`AS`关键字

```
CREATE OR REPLACE PROCEDURE check_stock_qty
AS
BEGIN
   FOR r IN (SELECT P_ID
               FROM product
              WHERE PRODUCT.p_value < 50)
   LOOP
      apex_mail_p.mail ('raavimistry@gmail.com',
                        'ravimistryof180@gmail.com',
                        'TEST',
                        '('|| r.P_ID ||')');
   END LOOP;
END; 
```

# elasticsearch - elasticsearch中的path_hierarchy

> ID：15594749
> 
> 赞同：1
> 
> 时间：2013-03-24T03:10:52.387
> 
> 标签：elasticsearch

是否可以将 path_hierarchy 标记器与其中包含空格的路径一起使用，并让它仅基于分隔符而不是空格来创建标记？例如，

“/机场/机库 1”

将被标记为

“机场”，“机库 1”，

不是

“机场”、“机库”、“1”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:16:58.677

path_hierarchy 分词器在带有空格的路径上工作得很好：

```
curl "localhost:9200/_analyze?tokenizer=path_hierarchy&pretty=true" -d "/airport/hangar 1"
{
  "tokens" : [ {
    "token" : "/airport",
    "start_offset" : 0,
    "end_offset" : 8,
    "type" : "word",
    "position" : 1
  }, {
    "token" : "/airport/hangar 1",
    "start_offset" : 0,
    "end_offset" : 17,
    "type" : "word",
    "position" : 1
  } ]
} 
```

但是，根据您的示例，您可能需要改用[模式](http://www.elasticsearch.org/guide/reference/index-modules/analysis/pattern-tokenizer.html)标记器。

# android - 详细活动中的 onCreateOptionsMenu 错误

> ID：15594753
> 
> 赞同：0
> 
> 时间：2013-03-24T03:11:12.167
> 
> 标签：android

选择该项目时，我有一个列表视图和呼叫详细信息活动。我的 onCreateOptionsMenu 在操作栏中显示菜单时出错。

```
public boolean onCreateOptionsMenu(Menu menu) {
     new MenuInflater(getActivity()).inflate(R.menu.detail_view_menu, menu);
     return (super.onCreateOptionsMenu(menu));
 } 
```

错误是 Fragment 类型中的 onCreateOptionsMenu(Menu, MenuInflater) 方法不适用于参数 (Menu)。返回线路发生错误。我使用 fragmentTransaction 实现列表视图和详细信息活动。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:29:15.677

像这样尝试，但把它放在你的主 Activity 类中：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.detail_view_menu, menu);
    return true;
} 
```

**或者**，如果您希望 Fragment 向 ActionBar 添加项目，则必须使用稍微不同的构造：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
   super.onCreateOptionsMenu(menu, inflater);
   inflater.inflate(R.menu.detail_view_menu, menu);
} 
```

您必须添加一个附加参数（MenuInflater）。此外，在 Fragment 中，onCreateOptionsMenu 不返回布尔值。

现在您有了充气机，您需要调用`setHasOptionsMenu(true)`Fragment 的`onCreate()`方法。否则您的项目将不会显示在 ActionBar 中。

您的**片段**代码，处理**菜单通货膨胀**，现在应该是这样的：

```
public class DetailFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
       super.onCreateOptionsMenu(menu, inflater);
       inflater.inflate(R.menu.detail_view_menu, menu);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:17:53.207

您的 onCreateOptionsMenu(Menu menu) 只需要在托管片段的活动中，而不是在片段本身中。

您还可以考虑扩展 BaseActivity 并将其包含在其中一次。

```
public class BaseActivity extends Activity {

    public boolean onCreateOptionsMenu(Menu menu) {
        new MenuInflater(getActivity()).inflate(R.menu.detail_view_menu, menu);
        return (super.onCreateOptionsMenu(menu));
    }

}

public class ListActivity extends BaseActivity {
    // ...
}

public class DetailActivity extends BaseActivity {
    // ...
} 
```

# php - mysqli_stmt_bind_result() 变量数不匹配？帮我数数

> ID：15594757
> 
> 赞同：-2
> 
> 时间：2013-03-24T03:11:52.413
> 
> 标签：php, mysqli

我只是想从数据库中选择一堆字段 - 就像我以前做过很多次一样......但不知何故我得到了这个错误：

> 警告：mysqli_stmt_bind_result()：绑定变量的数量与准备好的语句中的字段数量不匹配

但是我精确地计算了 14 列，那么为什么当我添加 14 个变量时会抛出这个错误呢？

```
public function get_invitation_fields()
{
  $this->fields_db = array();
  include('system/mysqli_db.php'); //db connection opens here
  $statement="SELECT 
  invitation_ID,
  recipient,
  text,
  name,
  usr_ID,
  deleted,
  send_date,
  resend_date,
  last_date,
  status,
  register_date,
  verify_date,
  redeem_date
  trans_ID 
  FROM invitations WHERE email=?";

  if ($stmt = mysqli_prepare($db, $statement))
  {
    mysqli_stmt_bind_param($stmt, "s", $this->email);

    if(!mysqli_stmt_execute($stmt))
    {echo mysqli_stmt_error($stmt); echo mysqli_error($db); }

    mysqli_stmt_bind_result($stmt,
    $this->fields_db['invitation_ID'],
    $this->fields_db['recipient'],
    $this->fields_db['text'],
    $this->fields_db['name'],
    $this->fields_db['usr_ID'],
    $this->fields_db['deleted'],
    $this->fields_db['send_date'],
    $this->fields_db['resend_date'],
    $this->fields_db['last_date'],
    $this->fields_db['status'],
    $this->fields_db['register_date'],
    $this->fields_db['verify_date'],
    $this->fields_db['redeem_date'],
    $this->fields_db['trans_ID']
    ); //PHP points the error to this line.

    mysqli_stmt_fetch($stmt);

    $this->invite_fields_db = $this->fields_db;

    mysqli_stmt_close($stmt);
  }
  else
  {
    echo mysqli_stmt_error($stmt);
    echo mysqli_error($db);
  }
  mysqli_close($db);        
} 
```

任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T05:35:54.480

只是不要将 mysqli 与它的 bind_result 一起使用，这确实会让您要求其他人计算您的变量。

要么使用 PDO，这将使您的代码尽可能短

```
public function get_invitation_fields($email)
{
    global $pdo; // connection should be opened ONCE at the beginning of the whole app

    $sql = "SELECT * FROM invitations WHERE email=?";
    $stm = $pdo->prepare($sql);
    $stm->execute(array($email)); 
    return $stm->fetch(); // values have to be RETURNED, not assigned
} 
```

或者至少使用 get_result() 从查询中获取熟悉的数组，而不需要手动绑定每个变量，尽管不能保证它工作。

# javascript - 按键时响应鼠标移动

> ID：15594758
> 
> 赞同：5
> 
> 时间：2013-03-24T03:11:53.027
> 
> 标签：javascript, three.js, event-handling, dom-events, mousemove

**编辑：**看起来问题出在触摸板而不是鼠标上。

**目标：** *即使在按键被按下时也能够响应鼠标移动。*

我想修改 Three.js 的 PointerLockControls 使得：如果用户在按下 时移动鼠标`W`，那么相机应该继续向前移动，并且相机的方向也应该根据鼠标移动而改变。这在正常情况下不会发生。以下是听众：

***mousemove 事件的监听器：***

```
var onMouseMove = function ( event ) {
    var movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;
    camera.rotation.y-=movementX*0.002;
  }; 
```

***keydown 事件的监听器：***

```
var onKeyDown = function ( event ) {

        case 38: // up
        case 87: // w
            moveForward = true;
            break;
        //keys: a, s, d are handled similarly

        case 32: // space
            if ( canJump === true ) velocity.y += 10;
            canJump = false;
            break;
   } 
```

***keyup 事件的监听器：***

```
var onKeyUp = function(event){
        case 38: // up
        case 87: // w
            moveForward = false;
            break;
} 
```

我发现，如果我`spacebar`在按下 时点击`W`，那么玩家会继续向前移动并响应鼠标移动。这是我想要的效果（但即使不点击它也应该起作用`spacebar`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:43:49.897

通常操作系统在打字时会禁用触摸板。您应该在操作系统设置的某处找到一个选项来切换它。

# java - java - 如何在java中围绕特定点而不是图像中心旋转图像？

> ID：15594760
> 
> 赞同：0
> 
> 时间：2013-03-24T03:12:53.497
> 
> 标签：java, image, rotation, graphics2d

到目前为止，我一直在使用

```
Graphics2D.rotate(Math.toRadians(-1), newImage.getWidth() / 2, newImage.getHeight() / 2); 
```

为 OMR 应用程序旋转图像。结果是旋转但模糊的图像。我也怀疑这会使图像围绕其中心旋转。如何指定特定的像素位置作为旋转中心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:18:43.573

> 我怀疑这会使图像围绕其中心旋转

你是对的，你需要

```
g2.rotate(Math.toRadians(-1), (newImage.getWidth() / 2) + 1, (newImage.getHeight() / 2) + 1); 
```

因为坐标从左上角位置`0, 0`（而不是`1, 1`）开始，您需要添加`1`到每个分割的宽度以获得中心。

> 如何指定特定的像素位置作为旋转中心？

正如@MadProgrammer 在他的评论中所说，*x*和*y*参数是[rotate](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html#rotate%28double,%20double,%20double%29)的第二个和第三个参数，所以这些是相对于`Image`.

# ipad - 将 paypal 与 IPAD-safari 上的单页 Web 应用程序集成，在选项卡之间进行通信

> ID：15594764
> 
> 赞同：2
> 
> 时间：2013-03-24T03:13:47.733
> 
> 标签：ipad, paypal

我有一个基于 html5 的 web 应用程序并在单个页面上运行，有很多 Ajax 和 javascript，所以一切都发生在一个页面上。

使用 paypal digital good express 进行付款，在桌面上打开同一选项卡，无需打开单独的页面。它在桌面上运行良好，在 1 个单独的 html5 页面上运行。

在 iPAD 上，问题在于 paypal 数字商品快递在单独的选项卡上打开。而且我需要找到一种在付款后与运行应用程序的上一个选项卡进行通信的方法。因为付款成功后，单页网页应用会立即运行一个新的密钥流程。
在 iPAD 上，我无法启动该过程，因为 paypal 在单独的选项卡上打开，并且一旦在那里成功完成付款，我不知道如何向前一个选项卡的 javascript 代码发送信号。

我猜网络应用程序的主选项卡可能是轮询服务器以获取新闻，但考虑到它在桌面上的简单程度，这似乎相当低效

我非常感谢任何帮助:)

# php - 在特色产品模块opencart中获取产品代码

> ID：15594771
> 
> 赞同：0
> 
> 时间：2013-03-24T03:14:55.493
> 
> 标签：php, opencart

我想将产品代码（模块）放入特色产品模块 opencart

看到我想要的这个例子 [http://demo.pure-sol.com/fahmy/test.jpg](http://demo.pure-sol.com/fahmy/test.jpg)

我做了一些代码，但结果有问题

**\catalog\controller\module\featured.php**

```
$this->data['text_model'] = $this->language->get('text_model'); // line 10
$this->data['model'] = $product_info['model']; // line 54 
```

**目录\语言\英文\模块\featured.php**

```
$_['text_model']        = 'Model'; 
```

**目录\视图\主题\fashionfever\模板\模块\featured.tpl**

```
<div class="feature">

  <h2> <?php echo $heading_title; ?></h2>
  <div class="box-content">
    <div class="box-product">
      <?php foreach ($products as $product) { ?>
      <div>
        <?php if ($product['thumb']) { ?>
        <div class="image"><a href="<?php echo $product['href']; ?>"><img src="<?php echo $product['thumb']; ?>" alt="<?php echo $product['name']; ?>" /></a></div>
        <?php } ?>
        <div class="name"><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></div>
        <?php if ($product['price']) { ?>
        <div class="price">
          <?php if (!$product['special']) { ?>
          <?php echo $product['price']; ?>
          <?php } else { ?>
          <span class="price-old"><?php echo $product['price']; ?></span> <span class="price-new"><?php echo $product['special']; ?></span>
          <?php } ?>
        </div>
        <?php } ?>
        <?php if ($product['rating']) { ?>
        <div class="rating"><img src="catalog/view/theme/default/image/stars-<?php echo $product['rating']; ?>.png" alt="<?php echo $product['reviews']; ?>" /></div>
        <?php } ?>
        <div class="cart"><input type="button" value="<?php echo $button_cart; ?>" onclick="addToCart('<?php echo $product['product_id']; ?>');" class="button" /></div>
      </div> 
```

> ```
>  <!-- additional code -->
>            <p><?php echo $text_model; ?>: <a href="<?php echo $product['href']; ?>"><?php echo $model; ?></a></p> 
> ```

```
 <?php } ?>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:27:44.700

删除线

`$this->data['model'] = $product_info['model']; // line 54`

并且在`$this->data['products'][] = array(`

添加这一行

```
'model'       => $product_info['model'], 
```

添加这个

```
<p><?php echo $text_model; ?>: <a href="<?php echo $product['href']; ?>"><?php echo $product['model']; ?></a></p> 
```

刚过

```
<div class="cart"><input type="button" value="<?php echo $button_cart; ?>" onclick="addToCart('<?php echo $product['product_id']; ?>');" class="button" /></div> 
```

# geometry - 正方形被射线分割。零件的面积是多少？

> ID：15594772
> 
> 赞同：0
> 
> 时间：2013-03-24T03:15:00.223
> 
> 标签：geometry

我有一个正方形，为简单起见，假设左下角位于原点，正方形的宽度为 1。

一条射线将正方形分成两部分。我有交点的坐标。`p1`我想从to获得向量右侧的区域`p2`：

![射线分割正方形](../Images/b0fbff21dd102cbf946aa40c9c4160da.png)

现在我有 16 个`if`语句检查 2 个点的每个组合并相应地计算面积。看起来很糟糕。有没有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:32:11.763

调用点**A**和**B**而不是 p [1]和 p [2]。按照惯例，我假设 x 向右增加，y 向上增加。

点**A**的坐标（x 或 y）必须为 0 或 1。旋转正方形（实际上只是两个点）使其 x=0。

点**B**可能在 x=-1，在这种情况下，面积为 1-(A [y] +B [y] )/2。

或者**B**可能在 y=0，面积 = 1+(A [y] B [x] )/2

或者**B**可能在 y=1，面积 = (A [y] -1)B [x] /2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:29:32.650

此解决方案假设 p1 和 p2 形成一个直角三角形，如阴影区域所示：

向量右侧的面积 = (w * w) - (0.5 * p1 * p2) 其中 w 是正方形的宽度，0 <= p1 <= w，0 <= p2 <= w。

例如，如果 w = 1、p1 = 0.5 和 p2 = 0.75，则面积 = (1 * 1) - (0.5 * 0.5 * 0.75) = 0.8125

# jquery - 无法让 scrollspy 工作

> ID：15594775
> 
> 赞同：0
> 
> 时间：2013-03-24T03:15:57.980
> 
> 标签：jquery, twitter-bootstrap, scrollspy

我在让引导程序的滚动间谍工作时遇到一些问题。输出页面生成良好，没有任何 javascript 错误。

但是在滚动时，我无法让 CSS 类应用活动。

下面是我设置的 JSFiddle。

谢谢

[http://jsfiddle.net/475sT/15/](http://jsfiddle.net/475sT/15/)

```
 <body>
    <div id="wrapper" data-spy="scroll" data-target="main-navigation">
        <section class="container">
            <header id="header">
                <div id="sticky_navigation" class="shadow">
                    <div class="container"> <a href="/" id="logo"></a>

                        <div id="navigation-wrapper">
                            <nav id="main-navigation">
                                <!-- MAIN NAVIGATION-->
                                <ul id="main-menu">
                                    <li><a id="one" href="#one">One</a>
                                    </li>
                                    <li><a id="Two" href="#Two">Two</a>
                                    </li>
                                    <li><a id="Three" href="#Three">Three</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
        </section>
        <section id="one">One</section>
        <section id="two">Two</section>
        <section id="three">Three</section>
    </div>
    <script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-scrollspy.js"></script>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:11:08.307

通过 JavaScript 调用 scrollspy：

```
$('#main-navigation').scrollspy() 
```

通过[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

# java - If语句涉及二维数组值java

> ID：15594777
> 
> 赞同：0
> 
> 时间：2013-03-24T03:16:16.327
> 
> 标签：java, arrays, if-statement

这是我遇到问题的代码。我需要能够阻止数组超过值 255。我坚持应该如何构造这个 if 语句.. 帮助会很棒..

```
public short[][] Brighten(short[][] original){

    short[][] result1 = new short[original.length][original[0].length];

    for(int i =0;i< result1.length; ++i){
        for(int j = 0;j<result1[0].length;++j){
            result1[i][j] = (short) (20 + original[i][j]);
            //work on this if statement
            if (original[i][j]> 255){
               result1[i][j] = (short)(20 - original[i][j]);
            }

        }
    }   

    return result1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:37:07.477

我认为应该是这样的

```
public short[][] Brighten(short[][] original){

    short[][] result1 = new short[original.length][original[0].length];

    for(int row =0;row< result1.length; row++){
        for(int col = 0;col<result1[row].length;col++){
        if (original[col][row] + 20) < 255) {
            result1[col][row] = original[col][row] +20;
        } else {
            result1[col][row] = 255;
        }         

        }
    }   
    return result1;
} 
```

使用此代码，如果变亮后的值 (+20) 小于 255，则会首先检查原始值

希望您能理解我的回答，如果您有任何问题，请随时在评论中提问：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:32:32.853

```
for ( int i = 0; i < result1.length; i++ ) {

    for ( int j = 0; j < result1[0].length; j++ ) {

        if ( original[i][j] + 20 < 255 ) {
            result1[i][j] = original[i][j] + 20;
        } else {
            result1[i][j] = 255;
        }
    }
} 
```

# php - 用 mb_string 函数覆盖 PHP 的默认字符串函数

> ID：15594779
> 
> 赞同：1
> 
> 时间：2013-03-24T03:16:43.737
> 
> 标签：php, unicode, utf-8, overriding, mbstring

因此，我发布了几个与使现有的用 PHP 编写的软件更新以支持 unicode / utf8 相关的问题。解决方案之一是使用 PHP 的 mb_string 函数覆盖 PHP 的默认字符串函数。但是，我看到很多人在谈论负面后果，但没有人真正详细说明它们。有人可以解释一下这些负面后果是什么吗？

为什么用 mb_string 函数覆盖 PHP 的默认字符串函数是“不好的”？毕竟，这比手动用相应的 mb_ 函数替换所有这些函数要简单得多。那么我错过了什么？这些负面后果是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:40:29.903

It's bad to override them because if some other developer comes and works on this code then it might do something that he wasn't expecting. It's always good to use the default functions as they were intended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T05:05:23.733

我认为 mb_* 系列函数更重，因为它们也执行 unicode 测试，即使是简单的 ascii 字符串也是如此。因此，在大规模情况下，它们会减慢您的应用程序速度。（可能意义不大，但不知何故肯定。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T13:01:30.593

我会尝试详细说明。

重载标准字符串函数`mb_*`将对读取和处理二进制文件或一般的二进制数据产生可怕的后果。如果你重载标准函数，那么`strlen($binData)`在某些时候突然会返回错误的长度。

为什么？

想象一下二进制数据包含一个字节，其值在`0xC0`- `0xDF`、`0xE0`-`0xEF`或`0xF0`-范围内`0xF7`。这些是 Unicode 起始字节，现在重载`strlen`的字符会将以下字符计为 1 个字节，而不是它们应该分别是 2、3 和 4。

主要问题是这`mbstring.func_overload`是全球性的。它不仅会影响您自己的脚本，还会影响所有脚本以及它们可能使用的任何框架或库。

当被问到，我应该启用`mbstring.func_overload`. 答案永远是，而且应该永远是一个响亮的“否”。

如果您使用它，您将被彻底搞砸，您*将*花费无数小时来寻找错误。很可能无法修复的错误。

好吧，您可以调用`mb_strlen($string, 'latin1')`以使其正常运行，但它仍然包含开销。`strlen`使用 php 字符串类似于 Java 字符串的事实；他们知道自己的长度。`mb_strlen`解析字符串以计算字节数。

# java - Java替换正则表达式不起作用

> ID：15594780
> 
> 赞同：3
> 
> 时间：2013-03-24T03:16:47.753
> 
> 标签：java, regex

为什么这行代码不起作用？它应该用任何内容替换所有标点符号。

```
m = m.replace("[\\?\\.;:'\"]", "") 
```

在 java 中执行此行后，m 不会更改，即使它包含标点符号。为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T03:18:16.857

这是因为[`replace`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)需要一个`String`; 你需要调用[`replaceAll`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)，它确实需要一个正则表达式。

# jquery - 以编程方式触发 ResponsiveSlides.js

> ID：15594790
> 
> 赞同：2
> 
> 时间：2013-03-24T03:18:16.550
> 
> 标签：jquery, triggers, responsive-slides

我正在使用[ResponsiveSlides.js](http://responsive-slides.viljamis.com/)并且我正在尝试以编程方式更改幻灯片。我已经尝试了两种方法，但都没有奏效。

1.  从缩略图上的点击事件调用插件的**slideTo**函数，传递它应该去的幻灯片的索引。

2.  使用对应`.trigger("click")`于`<li>`它应该去的幻灯片的索引，例如：

    $(".rslides_tabs li").eq($theIndex).trigger("click");

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T04:28:42.960

您无法调用该`slideTo()`函数，因为它仅分配给插件方法中的局部变量。

您的第二次尝试很接近，但看起来点击处理程序已绑定到一个`<a>`元素。

尝试：

```
$('.rslides_tabs').find('a').eq(index).trigger('click'); 
```

`index`您要显示的幻灯片的从零开始的索引在哪里。

注意：如果您为“命名空间”选项传递了一个值，那么您必须将类名从“rslides_tabs”更改为您传递的任何值+“_tabs”。因此，如果您通过`( namespace: 'mynamespace' }`选项，则该类将是“mynamespace_tabs”。

# php - PHP 语法 - 打破单行参数并返回/回显

> ID：15594801
> 
> 赞同：0
> 
> 时间：2013-03-24T03:19:58.123
> 
> 标签：php, syntax, formatting

使用数组，我经常看到退出以下格式：

```
$somearray = array( 'one'=>'one_value',
                    'twokey'=>'two_value',
                    'some_third_value'=>'some_other_value',
                    '987654'=>'12340987',
                    'confused_yet_456789'=> $some_var,
                    'confused_yet_rt78466'=>'two_value'
                    ); 
```

那当然不是一个班轮：

```
$somearray = array( 'one'=>'one_value','twokey'=>'two_value','some_third_value'=>'some_other_value','987654'=>'12340987','confused_yet_456789'=> $some_var,'confused_yet_456789'=>'two_value'); 
```

但是，我自己从未遇到或看到它在函数`$parameters`分配中使用过，例如：

```
function my_function_3($somevar='some_value_or_other',$title='some_87654_num_value',$cool_stuff='right_or_left',$dashboards='91234765',$menu='some_6374_menu'){

return $cool_stuff;

} 
```

扩展为：

```
function my_function_3( $somevar='some_value_or_other',
                        $title='some_87654_num_value',
                        $cool_stuff='right_or_left',
                        $dashboards='91234765',
                        $menu='some_6374_menu'
                        ){
return $cool_stuff;
} 
```

`echo`或也是如此`return`。

由此 ：

```
$output .= '<img src="http://chart.apis.google.com/chart?cht=qr&chs='.$qr_size .'x'.$qr_size .'&chld=L|4&chl=' .  $string . '" width="'.$qr_size.'" height="'.$qr_size.'" alt="Some alt to describe QR code" title="QR code for your phone"/>'; 
```

对此：

```
 $output .= '<img src="http://chart.apis.google.com/chart?cht=qr&chs='.
                $qr_size .'x'.
                $qr_size .'&chld=L|4&chl=' .  
                $string . '" width="'.
                $qr_size.'" height="'.
                $qr_size.'" alt="Some alt to describe QR code" title="QR code for your phone"/>'; 
```

所以，我的问题是：

我可以在`$parameters`函数的赋值以及`echo`/中使用这种语法或格式`return`吗？

如果没有 - 为什么？它会在某些配置上失败吗？是不是错了？

..如果是的话，这样做的正确方法是什么（在逗号/点之前或之后换行）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:45:43.090

是的，您可以在 PHP 的任何地方使用新行。它们没有任何语法含义，就像在 Javascript（新行意味着终止当前语句）或 Java 中那样，新行不能在字符串中使用。

事实上，PHP 中的所有空格都被修剪掉了，不仅仅是换行符，还有空格和制表符。

> 这样做的正确方法是什么

这是一个口味问题，但我更喜欢在新行之前使用点/逗号，因为这样会产生最容易阅读的代码。

更具争议性的是，如果参数不能轻松地放在一行上，我也更喜欢让多行参数使用比它们所在的代码多一个制表符的缩进，而不是与函数的括号对齐。

```
$arg1 = simpleFunction();
$arg2 = simpleFunction2($arg1);

$result = testFunctionWithManyParameters(
  $arg1,
  $arg2,
  $arg3,
  $arg4,
  $arg5
); 
```

同样，恕我直言，它使阅读代码比大量缩进更容易。

$result = testFunctionWithManyParameters($arg1, $arg2, $arg3, $arg4, $arg5 );

# c++ - 如果此功能需要时间运行（少于 peroid），我如何定期执行某些功能

> ID：15594802
> 
> 赞同：0
> 
> 时间：2013-03-24T03:19:59.560
> 
> 标签：c++

我想每秒运行一个函数，例如 func() 恰好 1 次。然而 func() 的运行时间约为 500 毫秒。我怎样才能做到这一点？我知道如果函数的运行时间很短，我可以在每次执行后在 func() 和 sleep() 中编写一个 while 循环 1 秒。但是现在，运行时间很高。我应该怎么做才能确保 func() 每秒运行 1 次？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T03:23:24.793

哟做：

1.  在 start_time 中取当前时间。
2.  执行你的工作
3.  在 end_time 中取当前时间
4.  等待（1 秒 + start_time - end_time）

这样，您可以每秒钟可靠地执行您的任务。如果任务花费的时间更少，您将等待更长的时间，反之亦然。但是请注意，这假设您的任务总是少于 1 秒。执行。在实际代码中，您想在 sleep 语句之前检查它。

实施细节取决于平台。

请注意，由于计算步骤 4 所需的时间，使用此方法仍会导致微小的漂移。更准确的替代方法是在 1 秒的整数倍上同步。这样一来，您就不会漂移超过 1000 次。

这取决于您需要的准确度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:29:01.957

如果你想要一个粗暴的、易于编码的解决方案，你可以在函数第一次运行之前获取时间并将其保存在某个变量（start_time）中。创建存储下一个重复编号的重复索引计数变量 (repeat_number)。然后你可以这样做：

```
1) next_run_time = ++repeat_number*1sec + start_time;
2) func();
3) wait_time = next_run_time - current_time;
4) sleep(wait_time)
5) goto 1; 
```

这种方法禁止在每次迭代中累积时间误差。

但是对于真正的应用程序，您应该找到一些事件框架或库。

# ios - 为什么我的 tableview 属性为空

> ID：15594804
> 
> 赞同：0
> 
> 时间：2013-03-24T03:20:21.277
> 
> 标签：ios, uitableview

我已将`delegate`and设置`datasource`为`File's Owner`，文件中的插座已正确设置`xib`。现在对于`.h`文件：

```
@interface ProductsViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>{

    IBOutlet UITableView *objTableView;
}

@property(nonatomic,strong)IBOutlet UITableView *objTableView; 
```

在`.m`文件中：

```
NSLog(@"%@",self.objTableView);
[self.objTableView reloadData]; 
```

第一次，`self.objTableView`正确设置： `NSLog(@"%@",self.objTableView);` 给出：

```
<UITableView: 0x1d9a5800; frame = (4 54; 532 660); clipsToBounds = YES; autoresize = W+H; 
```

但是下一次我得到了一个`(null)`表格视图对象，所以`reloadData`不会刷新表格视图。如何解决这个问题，请提前谢谢。

**编辑：**

我正在使用如下`Afnetworking`方法`JSONRequestOperationWithRequest`：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON){

    [SVProgressHUD dismiss];
    //Get the response from the server
    //And then refresh the tableview

    [self.objTableView reloadData];//I shouldn't put this here, it should be in the main thread
}failure:^(NSURLRequest *request, NSHTTPURLResponse *response,NSError *error, id JSON){

            [SVProgressHUD dismiss];

            //Alert the error message

}];
[operation start];
[SVProgressHUD showWithStatus:@"Searching for products, please wait.."]; 
```

实际上，`JSONRequestOperationWithRequest`异步运行，所以不在主线程中，但是它变成了`UI`更新应该在主线程中完成，所以我需要`[self.objTableView reloadData];`在该方法之外删除。但是哪里？如何确保`JSONRequestOperationWithRequest`完成后在主线程中运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:30:39.013

您确定您正在查看`self.objTableView`（属性的访问器方法）而不是`objTableView`（您手动定义的实例变量）吗？你`@synthesize`有线吗？如果你省略了你的`@synthesize`行，它会为你有效地完成，为你的属性`@synthesize objTableView = _objTableView;`定义一个名为的实例变量，因此你手动定义的实例变量永远不会被初始化。`_objTableView``objTableView``objTableView`

建议您删除手动定义的实例变量，让编译器为您合成，然后只定义属性，因此：

```
@interface ProductsViewController : UIViewController<UITableViewDataSource, UITableViewDelegate>

// Following lines removed. Do not define the instance variable.
// Let the compiler synthesize it for you.
//
// {
//     IBOutlet UITableView *objTableView;
// }

@property(nonatomic,strong)IBOutlet UITableView *objTableView;

@end 
```

编译器会为你生成实例变量，除非你自己手动写`@synthesize`一行，否则编译器会将实例变量命名为`_objTableView`。如果您需要引用`objTableView`属性的实例变量（通常仅在初始化程序和`dealloc`方法中需要），请记住包含前导下划线。（下划线的约定是为了最大限度地减少您在实际打算使用`self.objTableView`访问器 getter 方法时意外引用实例变量的机会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T03:47:01.707

您是否尝试过设置观察点`objTableView`？

在你`-viewDidLoad`设置一个断点。`objTableView`当调试器停止时，在变量列表中二次单击。单击“观看'objTableView'”。它随时会破坏价值的`objTableView`变化。

它应该让您确切知道值何时发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T05:36:01.800

我建议您创建以下方法：

```
- (void)setObjTableView:(UITableView *)tableView {
    _objTableView = tableView;
} 
```

然后在 _objTableView = tableView 行上设置断点，这应该让您知道是什么原因导致 _objTableView 变为 nil。

# php - 注销时重定向并显示“您已成功注销！”

> ID：15594807
> 
> 赞同：2
> 
> 时间：2013-03-24T03:20:46.483
> 
> 标签：php, html

我的网站上有会员服务。目前，当有人注销时，他们会被重定向到 logout.php，上面有以下代码：

```
<?php

        //check if the login session does no exist
        if(strcmp($_SESSION['uid'],”) == 0){
            //if it doesn't display an error message
            echo "<center>You need to be logged in to log out!</center>";
        }else{
            //if it does continue checking

            //update to set this users online field to the current time
            mysql_query("UPDATE `users` SET `online` = '".date('U')."' WHERE `id` = '".$_SESSION['uid']."'");

            //destroy all sessions canceling the login session
            session_destroy();

            //display success message
            echo "<center>You have successfully logged out!<br><a href = '/review-pratt/index.php' class='icon-button star'>Return Home</button></center>";
        }

        ?> 
```

而不是让用户被带到“logout.php”并查看一个说他们退出的无聊页面。我希望它们被重定向到 index.php。这部分很简单，我知道。

我希望在顶部出现一个通知栏，通知他们他们已成功注销。我以前曾尝试过这样做，但从未有任何工作。任何帮助或建议将不胜感激！

**更新**

我已将 logout.php 代码更改为：

```
<?php

        //check if the login session does no exist
        if(strcmp($_SESSION['uid'],”) == 0){
            //if it doesn't display an error message
            echo "<center>You need to be logged in to log out!</center>";
        }else{
            //if it does continue checking

            //update to set this users online field to the current time
            mysql_query("UPDATE `users` SET `online` = '".date('U')."' WHERE `id` = '".$_SESSION['uid']."'");

            //destroy all sessions canceling the login session
            session_destroy();

            //Redirect with success message
            header('Location: /index.php?msg=' . urlencode("You have been successfully logged out!"));
        }

        ?> 
```

并将以下代码添加到我的 index.php 中：

```
 <?php

    if ($_GET['msg'])
{
       echo '<div class="success_message">' . base64_decode(urldecode($_GET['msg'])) . '</div>';
}

?> 
```

当我注销时，我收到此错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/content/38/10473938/html/review-pratt/business_profiles/logout.php:19) in /home/content/38/10473938/html/review-pratt/business_profiles/logout.php on line 35 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T03:27:09.040

你可以这样做：

```
header('location: index.php?status=loggedout'); 
```

并在您的 index.php 文件中查看状态是否不为空，并显示具有如下状态的 div：

```
<?php 
   if(!empty($_GET['status'])){
          echo '<div>You have been logged out!</div>';
   }
?> 
```

同样在 if 语句中，您也可以清除用户会话..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T03:26:26.403

有很多解决方案，但几乎所有解决方案都需要 logout.php 来传递消息，并且 index.php 需要代码来显示消息。

我首选的方法是将消息作为 URL 参数传递。[`header`](http://php.net/manual/en/function.header.php)用于重定向，使用[base64_encode](http://php.net/manual/en/function.base64-encode.php)缩短 url 中的文本，使用[url_encode](http://php.net/manual/en/function.urlencode.php)确保 URL 不会被垃圾。

```
//Redirect with success message
header('Location: /index.php?msg=' . urlencode(base64_encode("You have been successfully logged out!"))); 
```

然后，在您的 index.php 页面上

```
if ($_GET['msg'])
{
       echo '<div class="success_message">' . base64_decode(urldecode($_GET['msg'])) . '</div>';
} 
```

**编辑：**如果您的标头已经发出（您是否`echo`在这些上方的一行中删除了一些文本？），您可以使用 Javascript 进行重定向。

替换`header('Location: ')`为：`echo '<meta http-equiv="Refresh" content="0;url=http://example.com/index.php?msg=' . urlencode(base64_encode('You have been successfully logged out!')) . '">';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:27:56.970

您可以使用“Noty”插件在您的网络应用程序上启用通知。见这里： http: [//needim.github.com/noty/](http://needim.github.com/noty/)

实现应该是这样的：

1.  将用户重定向到 index.php?logout=1
2.  使用查询字符串参数填充隐藏字段。
3.  页面加载时使用 noty 显示隐藏字段值。

这是一个代码示例：

```
<?php 
   if(!empty($_GET['logout'])){
          echo '<input id="logoutMsg" value="You have been logged out!"  />';
   }
?>

<script>
   var logoutMsg = $('#logoutMsg').val();
   var noty = noty({text: logoutMsg });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T03:30:39.827

如果您想在成功消息后立即重定向，请使用以下代码：-

```
 <?php

        //check if the login session does no exist
        if(strcmp($_SESSION['uid'],”) == 0){
            //if it doesn't display an error message
            echo "<center>You need to be logged in to log out!</center>";
        }else{
            //if it does continue checking

            //update to set this users online field to the current time
            mysql_query("UPDATE `users` SET `online` = '".date('U')."' WHERE `id` = '".$_SESSION['uid']."'");

            //destroy all sessions canceling the login session
            session_destroy();

            //display success message
            echo "<center>You have successfully logged out!
            echo '<meta http-equiv="Refresh" content="0;url=http://url.which.you.want.to.be.redirected.to">';
}
         }
?> 
```

# actionscript-3 - 引用类中舞台上的对象？

> ID：15594810
> 
> 赞同：0
> 
> 时间：2013-03-24T03:21:09.107
> 
> 标签：actionscript-3, flash, actionscript, game-development

所以我遇到了 ENTER FRAME 的问题，所以我把它移到了一个单独的班级，这就是班级的样子

```
 package  {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.accessibility.Accessibility;
    import flash.display.DisplayObject;
    import flash.display.Stage;

    public class enemy extends MovieClip {

        public function enemy() {
            // constructor code

            this.addEventListener(Event.ENTER_FRAME, moveEnemy);

        }
    public function moveEnemy(e:Event):void{

        this.x += 5;
        if(stage.player.scaleX == 1){
            this.scaleX = 1;
            }else {
                this.scaleX = -1;
                }

        }
    }

} 
```

现在我试图根据玩家调整敌人的 scalex 但是在引用班级内的玩家时出现错误有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:59:47.460

使用 Event.ENTER_FRAME 侦听器的技巧是，`event.currentTarget`它将保存到正在处理事件`event.target`的对象的链接，将保存到首先接收到它的对象的链接，因此您可以将侦听器不是附加到舞台，而是附加到 MovieClip您的选择，包括在您的游戏中拥有多个听众。比如说，你给你的`Enemy`班级一个监听器，让它查询舞台的玩家子弹列表并检查碰撞`this`，玩家也可以这样做。或者，您使用单个侦听器并在其中完成所有工作，使用本地数组来存储敌人、子弹、玩家和其他对象的列表。

在传递参数以进入帧侦听器方面 - 您的事件会自动调度，因此您不应该为此烦恼，并且它不接受多个参数。

关于您的代码，您应该在`testPlayerCollisions()`下面的侦听器中添加敌人移动代码以查询玩家碰撞。为此，您已经有一个要移动的敌人，因此您只需要调用它的`move()`函数或您拥有的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T08:38:06.910

It looks like your enemy class doesn't have access to the stage; yet you're trying to reference stage.player. You can access the stage from your main class but not from other classes unless you pass it through the constructor.

Try passing the stage to the enemy class and create a class variable to store it. Ie:

```
private var stageInst:Stage;

public function enemy(s:Stage){
    stageInst = s;   
} 
```

Then in moveEnemy use stageInst.player to access the player's clip.

When you create enemy's you'll have to pass in an instance of the stage from Main.

ie: `var e:enemy = new enemy(stage);`

# php - 格式化存储在 phpmyadmin 中的日期

> ID：15594814
> 
> 赞同：0
> 
> 时间：2013-03-24T03:21:45.660
> 
> 标签：php, mysql, date, formatting

我正在查询数据库并使用 PHP 回显“日期”列。

日期显示为 YYYY-MM-DD，因为它保存在“日期”数据类型下。

哪个函数最适合将日期结构转换为“2013 年 5 月 25 日星期日”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:24:29.397

干得好：

$phpmyadmindatevalue 是数据库中日期列的值。

```
<?php 

   $date = date("l jS F Y", strtotime($phpmyadmindatevalue));
   echo $date;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:26:24.963

尝试

```
<?php
echo date("l jS F Y", strtotime($value));
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T03:26:39.670

希望对你有帮助

```
$mydate = "2013-03-24";

$mytime = strtotime($mydate);

echo date("l jS \of F Y ",$mytime); 
```

# php - 删除两个逗号之间的字符串

> ID：15594816
> 
> 赞同：0
> 
> 时间：2013-03-24T03:22:18.673
> 
> 标签：php, html

“这是一个句子，奇怪地用逗号分隔。”

如何删除第二个逗号和第三个逗号之间的句子以在 PHP 中获取此句子：

“这是一个句子，它是……用逗号。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:32:50.367

```
$sentence= "This is a sentence, which is, weirdly separated, by commas.";
$pieces = explode(",", $sentence);
echo $pieces[0] .', '. $pieces[1].', ...'; 
```

explode 函数允许您创建一个字符串数组，并用引号中的内容分隔每个条目，在本例中为逗号。

最后一行连接了您想要的数组片段，省略了第三部分，即片段 [2]。

# python - f.seek() 和 f.tell() 读取文本文件的每一行

> ID：15594817
> 
> 赞同：8
> 
> 时间：2013-03-24T03:22:46.927
> 
> 标签：python, file-io, seek, tell

我想打开一个文件并使用 and 读取每一`f.seek()`行`f.tell()`：

测试.txt：

```
abc
def
ghi
jkl 
```

我的代码是：

```
f = open('test.txt', 'r')
last_pos = f.tell()  # get to know the current position in the file
last_pos = last_pos + 1
f.seek(last_pos)  # to change the current position in a file
text= f.readlines(last_pos)
print text 
```

它读取整个文件。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-24T03:39:41.047

好的，你可以使用这个：

```
f = open( ... )

f.seek(last_pos)

line = f.readline()  # no 's' at the end of `readline()`

last_pos = f.tell()

f.close() 
```

请记住，`last_pos`不是文件中的行号，它是文件开头的字节偏移量——增加/减少它没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T03:29:23.337

有什么理由必须使用 f.tell 和 f.seek 吗？Python 中的文件对象是可迭代的——这意味着您可以原生地遍历文件的行，而不必担心其他很多问题：

```
with open('test.txt','r') as file:
    for line in file:
        #work with line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T08:34:55.537

获取当前位置的一种方法当您想要更改文件的特定行时：

```
cp = 0 # current position

with open("my_file") as infile:
    while True:
        ret = next(infile)
        cp += ret.__len__()
        if ret == string_value:
            break
print(">> Current position: ", cp) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-07T14:10:05.817

使用 islice 跳过行对我来说非常有效，看起来更接近您正在寻找的内容（跳转到文件中的特定行）：

```
from itertools import islice

with open('test.txt','r') as f:
    f = islice(f, last_pos, None)
    for line in f:
        #work with line 
```

last_pos 是您上次停止阅读的行。它将在 last_pos 之后的一行开始迭代。

# iphone - 如何使用 UISearchBar 或 UISearchDisplayController 作为 UICollectionView 标头？

> ID：15594818
> 
> 赞同：1
> 
> 时间：2013-03-24T03:23:16.753
> 
> 标签：iphone, cocoa-touch, uisearchbar, uicollectionview, uisearchdisplaycontroller

我有一个 UICollectionView，其中有九个单元格。每个单元格都是一个正方形，因此它们以 3 x 3 的网格布局。这很好用，当设备旋转时，我调用`performBatchUpdates:completion:`强制 collectionView 为新方向布局单元格。

这是没有搜索栏的样子：

![在此处输入图像描述](../Images/4b6d85d2a8b951f5aeaf99be3cf558bd.png)

我现在正在尝试在 collectionView 顶部添加一个 UISearchBar，如下所示：

![在此处输入图像描述](../Images/57963abda359b5a4472d0512edd21d5d.png)

我尝试将它添加为标题视图，但它没有出现在顶部，而是占用了整个屏幕，并且单元格被推到了右侧。要查看它们，您可以滚动到没有搜索栏的地方。

要添加搜索栏，我尝试了两种方法。两者都不完全有效，而且似乎是一种糟糕的做法。我尝试的第一种方法是将搜索栏添加为标题视图。我的主视图是 UICollectionViewController 的子类。以下是我的设置方式：

```
- (void) viewDidLoad
{

// Set up some other things...

//
//  Register the header view class
//  which installs a search bar inside 
//  of itself.
//

[[self collectionView] registerClass:[PDReusableView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"header"];

}

- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath
{
    PDReusableView *header = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"header" forIndexPath:indexPath];
    [header setFrame:[[[self navigationController] navigationBar] bounds]];
    return header;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section
{
    if (section == 0) {
        return CGSizeMake(collectionView.frame.size.width, self.navigationController.navigationBar.frame.size.height);
    }

    return CGSizeZero;
} 
```

在 PDReusableView 内部，我安装了一个 UISearchBar。这就是我得到的：

![搜索某事](../Images/cf7e94e2cae443635a76d77e683c2d36.png)

所以这种方法失败了，因为我无法将搜索控制器或​​搜索栏变成可重用的视图。如果我不能把它放到一个可重用的视图中，它就不能放到一个 UICollectionView 中。

我的另一个选择是调整集合视图的大小，这样它就不会占据整个屏幕。那么问题就变成了，我应该在视图层次结构中的哪里安装搜索栏？最简单的地方（虽然可能不正确）是应用程序委托，我在其中设置了视图层次结构的其余部分。我设法让搜索栏出现在集合视图上方，方法是将其安装在`application:didFinishLaunchingWithOptions:`下面是我的代码：

```
UICollectionView *collectionView = [[self mainMenuViewController] collectionView];

CGRect f = [collectionView frame];

CGFloat height = [[[self navigationController] navigationBar] frame].size.height;

f.size.height -= height;
f.origin.y += height;

[collectionView setFrame:f];

 // Cause the cells to be laid out per the new frame
[collectionView performBatchUpdates:nil completion:nil];

[[collectionView superview] addSubview:[self searchBar]];
[[self searchBar] setFrame:[[[self navigationController] navigationBar] bounds]]; 
```

虽然我可以继续将搜索逻辑添加到应用程序委托，但这样做是不合适的，因为我将在应用程序委托中维护数据集、过滤的搜索结果以及许多其他逻辑。我觉得 UICollectionViewController 子类是放置它的更合适的地方。

有没有办法在不使用 Interface Builder 的情况下在 UICollectionView 中安装 UISearchBar？如何？

**编辑：**

我正在使用香草 UICollectionViewFlowLayout 并使用一些委托方法来设置单元格的大小等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:02:50.577

我还没有使用`UICollectionView`或`UICollectionViewController`还没有使用过，但我使用过`UITableView`and `UITableViewController`，我的一般经验法则是：`UITableViewController`如果你想做任何复杂的事情，就不要使用。我怀疑这`UICollectionViewController`是相似的：一个相当脆弱、有限的视图控制器，实际上并没有为您节省很多麻烦。

因此，如果我处于您的位置，我只会考虑子类化`UIViewController`并`UICollectionView`在我的视图控制器中包含一个。然后，您的视图层次结构可能很简单：

```
Root UIView
    UISearchBar
    UICollectionView 
```

# java - 如何将自定义 LinkedList 转换为对象数组

> ID：15594819
> 
> 赞同：0
> 
> 时间：2013-03-24T03:23:18.173
> 
> 标签：java, arrays, data-structures, linked-list

我需要实现方法 Customer3.toArray()。

Customer3 是 ADT 和链表节点（这是老师给我的），我们不允许更改。只需实现 toArray() 方法。为简单起见，我已经知道 List 中将有 64 个客户对象，因此我创建了一个包含 64 个元素的数组。

我不确定如何为 LinkedLists 执行此操作。我希望也许有人可以向我展示一种简单的转换方法。

代码：

```
public class
Customer3
implements java.io.Serializable
{
Customer3 next;
String ID;
String name;
String state;
String salesID;
public Customer3() { 
    ID = null; name = null; state = null; salesID = null; 
    next = null; 
}

public Customer3(String i, String n, String s, String si){ 
    ID = i; 
    name = n; 
    state = s; 
    salesID = si; 
    next = null; 
}
public Customer3 getNext() { return next; }
public String getID() { return ID; }
public String getName() { return name; }
public String getState() { return state; }
public String getSalesID() { return salesID; }
public void setNext(Customer3 n) { next = n; }
public void setName(String n) { name = n; }
public void setState(String s) { state = s; }
public void setSalesID (String si) { salesID = si; }
public String toString() { return ID + " " + name + " " + state + " " + salesID; }
public Customer3 add(Customer3 h) {
if (h == null) return this;
Customer3 temp = h;
while (temp.next != null) // look for the end of the list
temp = temp.next;
temp.next = this; // append the new node to the end
return h;
} // add
public void show() {
System.out.println(this);
if (next != null) next.show();
} // show
public Object [] toArray()
{
Object [] temp=null;
temp = new Object[64];

return temp;
} // toArray
} // 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:40:56.133

尝试

```
public Object[] toArray() {
    int size = 1;
    Customer3 curr = this;
    while (curr.next != null) {
        size++;
        curr = curr.next;
    }
    Object[] arr = new Object[size];
    arr[0] = this;
    for (int i = 1; i < size; i++) {
        arr[i] = ((Customer3)arr[i - 1]).next;
    }
    return arr;
} 
```

# android-intent - 安卓列表活动

> ID：15594822
> 
> 赞同：-1
> 
> 时间：2013-03-24T03:23:47.770
> 
> 标签：android-intent, listactivity, onitemclicklistener

我正在尝试创建“ListActivity”，但无法将输出视为列表。我使用了人员代码。此外，我在下面的代码中没有任何错误。请帮助解决这个问题。

`package com.wordpress.sree7k7;`

`import android.app.ListActivity;` `import android.content.Intent;` `import android.os.Bundle;` `import android.view.View;` `import android.widget.ArrayAdapter;` `import android.widget.ListView;`

公共类菜单扩展 ListActivity {

```
String classes[]={ "MainActivity", "example1","example2",
        "example3","example4","example5","example6"};
@Override

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(Menu.this, android.R.layout.simple_expandable_list_item_1));
}@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String cheese = classes[position];
    try {
    Class ourClass = Class.forName("com.wordpress.sree7k7.Menu"+ cheese);
    Intent ourIntent= new Intent(Menu.this, ourClass);
    startActivity(ourIntent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:16:36.077

尝试更改 ourClass 的 bgcolor 以便您可以确定您的列表视图是否没有显示或者它已经开始新的（ourClass）活动

# codeigniter - 这个库可能有什么问题？

> ID：15594824
> 
> 赞同：0
> 
> 时间：2013-03-24T03:24:03.673
> 
> 标签：codeigniter

我在 codeigniter 中创建了一个库。它不工作。

我的图书馆文件是；

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 

class Image_pixelete{

function __construct()
{
    $this->ci=&get_instance();

}

public function do_pixel()
{
    $image = imagecreatefromjpeg(base_url().'photo/Penguins.jpg');
    $imagex = imagesx($image);
    $imagey = imagesy($image);

    $pixelate_y=10;
    $pixelate_x=10;
    $height=$imagey;
    $width=$imagex;
    for($y = 0;$y < $height;$y += $pixelate_y+1)
    {
        for($x = 0;$x < $width;$x += $pixelate_x+1)
        {
        // get the color for current pixel
        $rgb = imagecolorsforindex($image, imagecolorat($image, $x, $y));

        // get the closest color from palette
        $color = imagecolorclosest($image, $rgb['red'], $rgb['green'], $rgb['blue']);

        imagefilledrectangle($image, $x, $y, $x+$pixelate_x, $y+$pixelate_y, $color);   
        }
    }
} 
```

这是我的控制器调用

```
public function pixel()
    {
        $this->load->library('Image_pixelete');
        $this->Image_pixelete->do_pixel();
    } 
```

这是我的错误；

![codeigniter 中的库错误](../Images/dd4b817e9daf526d6a80b5f438c44416.png)

我对解决问题的确切性质感到困惑。你能复习一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:47:29.287

Try by loading and using your library with lower case.

```
$this->load->library('image_pixelete');
$this->image_pixelete->do_pixel(); 
```

Check this similar question [codeigniter cannot load library](https://stackoverflow.com/questions/4776399/codeigniter-cannot-load-library)

# c++ - 调试使用 CGAL 和 Xcode 的代码

> ID：15594828
> 
> 赞同：1
> 
> 时间：2013-03-24T03:24:28.567
> 
> 标签：c++, xcode, debugging, cgal

我想使用 Xcode 来调试使用 CGAL 的程序，但我无法让 Xcode 运行程序或在断点处停止。Xcode 将编译程序（我通过在终端窗口中运行结果来验证这一点）。我可以设置断点，但是当我单击“运行”按钮时，Xcode 似乎没有运行程序。

我将代码简化为这个简单的示例：

```
#include <CGAL/Exact_predicates_exact_constructions_kernel.h>
#include <CGAL/Polygon_2.h>
#include <iostream>

typedef CGAL::Exact_predicates_exact_constructions_kernel K;
typedef K::Point_2 Point_2;
typedef CGAL::Polygon_2<K> Polygon_2;

int main(int argc, char *argv[]) {
Point_2 pts[] = { Point_2(0.0,0.0), Point_2(2.0,0.0), Point_2(1.0,2.0) };
Polygon_2 poly( pts, pts + 3 );
if(poly.is_simple()) std::cout << "Polygon is simple\n";
else std::cout << "Polygon is not simple\n";
return 0;
} 
```

我使用 cgal_create_CMakeLists 创建了 Xcode 项目。此脚本为我创建项目文件：

```
#!/bin/sh

~/dev/CGAL-4.1/scripts/cgal_create_CMakeLists -s cgal_xcode -c Core
cmake -GXcode -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS=-O0 -DCGAL_DONT_OVERRIDE_CMAKE_FLAGS=TRUE . 
```

我在 OS X 10.8.3 上使用 CGAL 4.1 和 Xcode 4.6.1（在 MacBook 上运行，2008 年末）。

我对 Xcode 非常缺乏经验，所以这可能是一个简单的错误（错过设置等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:51:41.343

我找到了我的问题的答案。我没有为调试方案设置可执行文件。另一篇文章指出了我正确的方向，[Xcode 4.2 Product -> Run Greyed Out](https://stackoverflow.com/questions/8145429/xcode-4-2-product-run-greyed-out)

要设置可执行文件，我转到 Product->Scheme->Edit Scheme... 这将打开一个对话框。在框的左侧，我单击“调试”。在中心区域，我选择“信息”选项卡。最后，在中心，我将“可执行”选项从“无”更改为我的程序名称。现在我的程序在断点处运行并停止。

一旦我发现在哪里看，就足够简单了。

# gwt - 将 GWT Web 应用程序调用到 android 中

> ID：15594833
> 
> 赞同：-1
> 
> 时间：2013-03-24T03:24:46.393
> 
> 标签：gwt

如何在 android 中使用 gwt Web 应用程序。有人可以帮我吗？如何编写监听器？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:59:01.400

如果您想使用 gwt 开发移动应用程序/网站，请阅读文章[GWT 支持移动应用程序开发](http://googlewebtoolkit.blogspot.com/2012/07/gwt-support-for-mobile-app-development.html)，该文章将 mgwt 描述为使用单个代码库使用 GWT 开发移动应用程序和移动网站的库。

[步骤可以是：](http://lehelsipos.blogspot.com/2012/08/mgwt-very-simple-example-click-button.html)

1.  创建 GWT 项目

2.  将此行添加到`.gwt.xml`

`<inherits name='com.googlecode.mgwt.MGWT'/>`

1.  [下载](http://code.google.com/p/mgwt/downloads/list)mgwt 库并将其添加到您的项目中。

2.  随心所欲地修改你`EntryPoint`的。

`public class MobileEntryPoint implements EntryPoint {`

```
int countI;
MTextBox lbl;

public void onModuleLoad() {
    lbl = new MTextBox();
    countI = 0;

    MGWT.applySettings(MGWTSettings.getAppSetting());
    AnimationHelper animationHelper = new AnimationHelper();
    RootPanel.get().add(animationHelper);
    LayoutPanel layoutPanel = new LayoutPanel();
    Button button = new Button("Hello mgwt!");

    button.addTapHandler(new TapHandler() {
        @Override
        public void onTap(TapEvent event) {
            countI++;
            lbl.setText("You clicked: " + countI + " times");
        }
    });
    layoutPanel.add(button);
    layoutPanel.add(lbl);

    animationHelper.goTo(layoutPanel, Animation.SLIDE);
} 
```

`}`

浏览Daniel Kurka 的[HelloWorld Example](http://code.google.com/p/mgwt/wiki/HelloWorldExample)和[Running Showcase](http://code.google.com/p/mgwt/wiki/RunningShowcase)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T09:07:34.483

[重量级？？](http://www.m-gwt.com/) --->使GWT与移动设备一起使用

要使用 mgwt，您需要下载最新版本并将其放在您的类路径中。之后，您必须将其包含在您的 gwt.xml 文件中。您还可以将 gwt 的用户代理属性设置为 safari，因为几乎所有移动设备都在 webkit 上运行并`mgwt`依赖`webkit`.

**用法：**

```
<inherits name="com.googlecode.mgwt.MGWT"/>
<set-property name="user.agent" value="safari" /> 
```

另[请参阅 GWT Phonegap](https://code.google.com/p/gwt-phonegap/wiki/GettingStarted)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T09:52:52.613

android 中的 gwt 应用程序应该几乎可以工作，因为它的浏览器是基于 webkit 的，gwt 支持，所以只需尝试从您的 android 浏览器打开您的应用程序。

不同的是，某些小部件可能会因为屏幕大小或被认为用于鼠标事件（这是拖放的情况）而表现得很奇怪，因此可能对于某些面板，您必须考虑对支持的触摸事件进行编程在 gwt 事件机制中。

如果您希望您的应用程序在移动设备中看起来与在 Web 中不同，那么有一些特定于移动设备的 3party 库，例如[mgwt](http://www.m-gwt.com)，它使您的应用程序看起来像原生移动应用程序。Mgwt 甚至添加了更多排列，以便您可以为不同的目标设备提供不同的 Web 视图。您可能感兴趣的其他库可能是[gwtmobile-ui](https://github.com/dennisjzh/GwtMobile-UI)或[sencha](http://www.sencha.com) mobile。

最后，如果你希望你的 webapp 被嵌入到一个 android 包中，你需要 Apache cordova（又名 phonegap）。有一个 gwt 库可以访问cordova 的某些功能（硬件调用，如打开相机、文件系统等），它被称为[gwt-phonegap](http://code.google.com/p/gwt-phonegap/)

# css - 在引导导航栏中调整链接突出显示区域的大小

> ID：15594841
> 
> 赞同：0
> 
> 时间：2013-03-24T03:26:44.933
> 
> 标签：css, twitter-bootstrap, highlighting, navbar

我使用 Twitter Bootstrap 在页面中心创建了一个导航栏。我已将三个图标排列在中心，它们之间有一定距离。当我将鼠标悬停在其中一个上时，文本不在突出显示部分的中心。它看起来如下。我希望 Home 或 Tags 恰好位于突出显示部分的中心。

![在此处输入图像描述](../Images/1fdd404a8450995d80519dfea7c3c49d.png)

这是我的一小段相关代码。

```
.navbar .nav > li > a 
{
 float: none ;
 padding: 10px 100px 8px 0px ;
 color: #777777 ;
 text-decoration: none ;
 text-shadow: 0 1px 0 #444 ;
 font-size:20px ;
}

.navbar .nav > li > a:focus,
.navbar .nav > li > a:hover 
{
  color: silver ;
  text-decoration: none ;
  background-color:ThreeDFace  #444 ;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:30:38.670

希望这可以帮助你！

更改此 CSS 样式

```
.navbar .nav > li > a 
{
 float: none ;
 padding: 10px 100px 8px 0px ;
 color: #777777 ;
 text-decoration: none ;
 text-shadow: 0 1px 0 #444 ;
 font-size:20px ;
} 
```

对此

```
.navbar .nav > li > a 
{
 float: none ;
 width: 100px; 
 text-align: center;
 color: #777777 ;
 text-decoration: none ;
 text-shadow: 0 1px 0 #444 ;
 font-size:20px ;
} 
```

并做了 ：）

# ios - 如何在 PopViewController 时禁用异步回调

> ID：15594845
> 
> 赞同：0
> 
> 时间：2013-03-24T03:27:19.327
> 
> 标签：ios, ios6, callback, asihttprequest

我正在构建一个 iOS 6 应用程序，并且我经常使用委托/回调向我的服务器运行异步 HTTP 请求。用户可能会在请求返回之前弹出顶部视图控制器（即请求的委托），因此我得到一个`message sent to deallocated instance`错误。我希望能够在弹出它时禁用分配给当前委托视图控制器的异步回调。

这可能吗？

其他解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T21:11:55.567

只是在这里复制 CodaFi 的答案，因为他没有：

将回调的响应者归零，而不是仅仅祈祷它在释放时自动归零。

# attributes - 如何定义可以包含 *要么* IDREF 或字符串枚举的属性？

> ID：15594848
> 
> 赞同：1
> 
> 时间：2013-03-24T03:27:55.033
> 
> 标签：attributes, xsd

我为一个项目制作了一个简单的 UI 定义语言，现在想创建一个模式，以便于验证。不幸的是，我的 XSD 技能*相当*生疏，我发现自己正在尝试做一些我什至不确定的事情。

UI 由“块”组成，这些“块”可以相对于彼此定位。为了简化最常见的用例，我希望引用属性能够包含任何字符串`parent`、`previous`或`next`。为了尽可能灵活，我还希望它能够指向任何具有 ID 的元素。

换句话说，我希望以下内容有效：

```
<ui>
    <block id="foo"/>
    <block/>
    <block anchor="previous"/>
    <block anchor="#foo"/>
</ui> 
```

我如何在 XSD 中描述这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:37:44.943

事实证明，XSD 包含一个功能正是这样做的——结合了两种或多种类型——而我只是错过了它。A`union`创建一个类型，其词法空间覆盖其所有成员类型的词法空间（换句话说，它可以包含与其任何子类型匹配的值）。

需要注意的是`IDREF`s 不能包含前导`#`（它是对 ID 的直接引用，而不是 URL 的片段标识符），以下模式将验证示例 XML。有趣的是`AnchorType`和`TreeReferenceType`。

```
<schema targetNamespace="urn:x-ample:ui" elementFormDefault="qualified" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:ui="urn:x-ample:ui">
    <element name="ui" type="ui:UIType"/>

    <complexType name="UIType">
        <sequence>
            <element minOccurs="1" maxOccurs="unbounded" name="block" type="ui:BlockType"/>
        </sequence>
    </complexType>

    <complexType name="BlockType">
        <attribute use="optional" name="id" type="ID"/>
        <attribute name="anchor" type="ui:AnchorType"/>
    </complexType>

    <simpleType name="AnchorType">
        <union memberTypes="ui:TreeReferenceType IDREF"/>
    </simpleType>

    <simpleType name="TreeReferenceType">
        <restriction base="string">
            <enumeration value="parent"/>
            <enumeration value="previous"/>
            <enumeration value="next"/>
        </restriction>
    </simpleType>
</schema> 
```

# java - 我收到如下错误消息：线程“main”中的异常 java.lang.StringIndexOutOfBoundsException：字符串索引超出范围：0

> ID：15594850
> 
> 赞同：0
> 
> 时间：2013-03-24T03:27:57.737
> 
> 标签：java

我收到如下错误消息：线程“main”中的异常

```
java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(Unknown Source)
    at emp.MainClass.main(MainClass.java:52) 
```

使用以下代码，我该如何缓解这个问题？

```
public class MainClass {
        //main class
public static void main(String[] args){
       // variable

    String input;

    boolean salaryError = true;
    boolean dependentError = true;
    boolean nameError = true;
    boolean charError = true;

    Employee emp1 = new Employee();
    displayDivider("EMPLOYEE INFORMATION");

    do{
    input = getInput(" First Name");
    nameError = nameValidate(input);
    if(!nameError){
        JOptionPane.showMessageDialog(null,"Incorrect Input. Please Try Again!");
    }
    }while(!nameError);
    emp1.setfirstName(input);
    do{
    input = getInput(" Last Name");
    nameError =nameValidate(input);
    if(!nameError){
        JOptionPane.showMessageDialog(null,"Incorrect Input. Please Try Again!");
    }
    }while(!nameError);
    emp1.setlastName(input);
    do{

    input = getInput(" Gender: M or F");

    charError = characterChecker(input.charAt(0));
    if(!charError){
        JOptionPane.showMessageDialog(null,"Incorrect Input. Please Try Again!");
    }
    }while(!charError);

    char g = input.charAt(0);
    emp1.setgender(g);// validates use of M or F for gender

    do{
    input = getInput(" number of dependents");
    dependentError = integerChecker(input);
    if(!dependentError){
        JOptionPane.showMessageDialog(null,"Incorrect Input. Please Try Again!");
    }
    }while(!dependentError);
    emp1.setdependents(Integer.parseInt(input));

    do{ 
    input = getInput(" annual salary");
    salaryError = doubleChecker(input);
    if(!salaryError){
        JOptionPane.showMessageDialog(null,"Incorrect Input. Please Try Again!");
    }
    } while(!salaryError);
    emp1.setannualSalary(Double.parseDouble(input));

    emp1.displayEmployee();//displays data for emp1

    Employee emp2 = new Employee("Speed","Racer",'M',1,500000.00);
    displayDivider("EMPLOYEE INFORMATION");
    emp2.displayEmployee();// displays data for emp2

    terminateApplication(); //terminates application

    System.exit(0);//exits program

}//end of main

    // gets Input information
 public static String getInput(String data)
  {
      String input = "";
      input = javax.swing.JOptionPane.showInputDialog(null,"Enter your " + data);
      return input;
  }// end getInput information

    // The display divider between employees
 public static void displayDivider(String outputLab)
  {
      System.out.println("********" + outputLab + "********"); 
}// end display divider

    // Terminates the application
 public static void terminateApplication()
  {   javax.swing.JOptionPane.showMessageDialog(null,"Thanks for the input!"); 

  }// end terminateApplication 
 public static boolean doubleChecker(String inStr){
     boolean outBool = true;
     double tmpDbl = 0.0;
     try{
         tmpDbl = Double.parseDouble(inStr);
         if(tmpDbl <= 0)
             throw new IllegalArgumentException();
     }
     catch (Exception e){

         outBool = false;
     }
     return outBool;
 }

 public static boolean integerChecker(String intStr){
     boolean outBool = true;
     int tmpInt = 0;
     try{
         tmpInt = Integer.parseInt(intStr);
         if(tmpInt <= 0)
             throw new IllegalArgumentException();
     }
     catch (Exception e){

         outBool = false;
     }
     return outBool;
 }

 public static boolean nameValidate(String str){
        for(char ch : str.toCharArray()){
            if(!Character.isDigit(ch)){
                return true;
            }
        }
        return false;
    }
 public static boolean characterChecker(char gen){
     boolean outBool = true;

     try{

         if(!( gen ==( 'M') || gen ==('F')))
             throw new IllegalArgumentException();
     }
     catch (Exception e){

         outBool = false;
     }
     return outBool;
 }
}//end of Main Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T03:37:34.123

您的字符串长度为 0。请确保`string.length() > 0`在访问其元素之前。问题出在异常表示问题出现的那一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:39:49.040

Better answer: are you using an IDE? If so, observe the line the exception tells you you have an error on. Set a breakpoint before that line, debug, and note the contents of the object on which the error happened (in this case the string). Then check the javadoc for the method that threw the exception to see if there is any problem calling that method on that string.

If you are *not* using an IDE, you will either need to use one or find a standalone debugger. Having a good debugger is a requirement of Java development.

This should save you a lot of SO questions going forward.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:50:35.963

[StringIndexOutofBoundsException](http://docs.oracle.com/javase/6/docs/api/java/lang/StringIndexOutOfBoundsException.html)表示您尝试使用索引访问字符串，并且索引为负数或大于字符串的大小。

你在这部分错了：

```
charError = characterChecker(input.charAt(0)); 
```

因为您没有检查输入长度是否为0。

尝试将该行更改为：

```
charError = input != null && input.length() > 0 && characterChecker(input.charAt(0)); 
```

# sql - 我在这个 select 语句中做错了什么？我正在使用 oracle 10g

> ID：15594852
> 
> 赞同：0
> 
> 时间：2013-03-24T03:28:01.870
> 
> 标签：sql, oracle10g

我正在提供提示用户输入表名称的 SQL。此 SQL 将提供列名、数据类型、数据长度、数据精度的报告，并指示特定表是否允许空值。

这是我正在运行的查询：

```
SELECT employee_id, first_name, last_name
FROM employees
GROUP BY employee_id;

select department_id where employee_id = :table_name;

set echo

(select column_name, data_type, data_length,
data_precision, data_scale, nullable
from all_tab_columns
where table_name = 'employees'
order by column_name); 
```

我得到一个窗口，用户应该在其中输入表名，但第二个 select 语句无法运行。它提出了`ORA-00933: sql command not properly ended`. 如果我单独运行第二个 select 语句，我会收到一条`no data found`消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T06:45:03.130

首先，您在此查询中缺少表名：

```
select department_id where employee_id = :table_name; 
```

它应该是：

```
select department_id from employees where employee_id = :table_name; 
```

第二

```
set echo 
```

会给你一个错误：

> SP2-0265: echo 必须设置为 ON 或 OFF

您必须为该命令添加`ON`或`OFF`参数。例如 ：

```
set echo ON; 
```

更多：[设置回声](http://www.adp-gmbh.ch/ora/sqlplus/echo.html)

第三：

```
select column_name, data_type, data_length,
data_precision, data_scale, nullable
from all_tab_columns
where table_name = 'employees'
order by column_name 
```

也许 where 子句中的比较区分大小写。

尝试这个：

```
select column_name, data_type, data_length,
data_precision, data_scale, nullable
from all_tab_columns
where lower(table_name) = 'employees'
order by column_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:33:43.463

您的`select department_id where employee_id = :table_name;`

是错的。

该表将在`from`子句中指定。

谢谢

# java - 用于集合表示法的特定 Java 正则表达式

> ID：15594856
> 
> 赞同：0
> 
> 时间：2013-03-24T03:28:50.460
> 
> 标签：java, regex, set, notation

我正在尝试编写一个正则表达式，它将检查一个字符串是否形成一组整数

```
ex: {1, 23, -501, 52, 2387329, 0} 
```

到目前为止，我有：

```
Pattern p = [({(([0-9]+,)*[0-9]+)})] 
```

但它似乎没有工作......有人可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:31:59.760

```
Pattern.compile("\\{\\s*(?:\\d+(?:\\s*,\\s*\\d+\\s*)*)?\\}") 
```

匹配围绕零个或多个逗号分隔的非负十进制整数的大括号。

`\\s`匹配任何空格字符。`(?:...)`仅用于分组，大括号之间的内容是有效的（十进制数字后跟（任意数量的逗号，然后是十进制数字））可选。

我不知道你用的是什么符号

> ```
> [({(([0-9]+,)*[0-9]+)})] 
> ```

但它肯定不会匹配空集，也不会匹配逗号后带有空格的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:53:46.093

试试这个正则表达式

```
"\\{((-?\\d+), ?)*-?\\d+}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:56:35.747

试试这个。

```
 String data = "{1, 23, -501, 52, 2387329, 0}";
    Pattern pattern = Pattern.compile("\\{(\\s?-?\\d+?\\,?\\s?)+?\\}");

    Matcher matcher = pattern.matcher(data);
    while (matcher.find()) {
        // Indicates match is found. Do further processing
        System.out.println(matcher.group());
    } 
```

# python - Python 全局变量和局部变量

> ID：15594867
> 
> 赞同：5
> 
> 时间：2013-03-24T03:29:49.977
> 
> 标签：python, scope, global-variables

在 Python 2.7 中，运行以下代码：

```
def f():
    a = a + 1

f() 
```

给出以下结果：

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    f()
  File "test.py", line 2, in f
    a = a + 1
UnboundLocalError: local variable 'a' referenced before assignment 
```

但是，如果我将代码更改为以下内容：

```
def f():
    a[0] = a[0] + 1

f() 
```

我得到不同的错误：

```
Traceback (most recent call last):
  File "test.py", line 4, in <module>
    f()
  File "test.py", line 2, in f
    a[0] = a[0] + 1
NameError: global name 'a' is not defined 
```

为什么当 Python是一个全局`a`变量时，它是一个局部变量？这背后的原因是什么？`int``list`

[PS：我在阅读这个帖子](https://stackoverflow.com/questions/8447947)后正在尝试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T03:33:46.353

密钥可在[赋值语句](http://docs.python.org/2/reference/simple_stmts.html#assignment-statements)的文档中找到：

> 将对象分配给单个目标的递归定义如下。
> 
> 如果目标是标识符（名称）*（例如`a = a + 1`）*：
> 
> *   如果名称没有出现在当前代码块中的全局语句中：名称绑定到当前本地命名空间中的对象。
> *   否则：名称绑定到当前全局命名空间中的对象。
> 
> 如果名称已经绑定，则为反弹。这可能会导致先前绑定到名称的对象的引用计数达到零，从而导致对象被释放并调用其析构函数（如果有的话）。
> 
> ...
> 
> 如果目标是订阅*（例如`a[0] = a[0] + 1`）*：评估引用中的主要表达式。它应该产生一个可变序列对象（例如列表）或映射对象（例如字典）。接下来，计算下标表达式。

在`f`[1] Python 中看到您正在将某个值绑定到`a`，看到`a`尚未`global a`在此范围内的语句中使用并准备一个局部变量。然后它尝试计算表达式`a + 1`，查找变量`a`并找到一个未初始化的局部变量。这导致`UnboundLocalError`.

在`f`[2] Python 中，您正在为变量的订阅分配一些值`a`。它在本地命名空间中查找该变量，但找不到它。然后它沿着非本地命名空间（闭包）向上走，直到到达全局命名空间。一旦`a`在全局命名空间中找不到它，它就会抛出一个`NameError`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T03:33:35.873

你能尝试做这样的事情吗：

```
def f(a):
    a += 1
    print a

def g():
    a = 3
    f(a)

g() 
```

# automation - 如何从 Internet 中的 puppet master 管理内部网络中的 puppet 代理节点？

> ID：15594870
> 
> 赞同：2
> 
> 时间：2013-03-24T03:30:08.293
> 
> 标签：automation, puppet

如何从 Internet 中的 puppet master 管理内部网络中的 puppet 代理节点？

所有的 puppet 代理节点都在一个内部网络中，因此每个代理节点都没有唯一的 ip，但是 puppet 主节点在 Internet 中，如何做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:10:48.563

节点的 IP 地址不参与对 puppet master 的身份验证过程。此外，主节点不需要直接连接到节点，因为节点有责任联系主节点，然后主节点为每个节点提供编译目录。
重要的是节点的**FQDN**在 master 管理的所有节点中是唯一的。据，直到...为止：

*   可以通过已知的 FQDN 访问Puppet **Master**`puppet` （默认情况下配置为在代理上，在您的情况下可能会更改为映射到公共 IP 的完整域名）
*   Puppet**代理**可以访问 Internet（或者，更具体地说，至少可以访问 Puppet Master 的 IP 地址）
*   Puppet**代理**在其上配置了***唯一的***完全限定域名（您可以使用 来查看`hostname -f`）

您的主人无需特殊配置即可管理您的代理。

# javascript - 在 Wordpress 中写文章时如何使用 jQuery 或 javascript

> ID：15594871
> 
> 赞同：0
> 
> 时间：2013-03-24T03:30:12.117
> 
> 标签：javascript, jquery, wordpress

当我`<script>document.write("<p>JavaScript</p>");</script>`发帖时，什么也没发生。为什么它不像 html 标签一样，就像`<h1>...</h1>`我们将它们插入到帖子中一样。我检查了输出 html，那里确实有标签。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:37:40.377

您必须在 html 编辑器中编写 HTML 或任何其他脚本。选择编辑器右上角的“TEXT”选项卡并编写代码。

# ruby - 在 windows/osx 上通过 ruby 脚本执行 SVN 操作

> ID：15594872
> 
> 赞同：1
> 
> 时间：2013-03-24T03:30:25.353
> 
> 标签：ruby, svn

我是一个新手，需要通过 ruby​​ 脚本在 windows/osx 上执行一些基本的 SVN 操作（如获取存储库的信息、添加、提交、更新等）。

我搜索了论坛和互联网，只找到了与 SWIG ruby​​-subversion 绑定等相关的部分且令人困惑的答案，但没有一个是有据可查的，也没有足够简单的使用 [此外，这些问题和答案中的大多数都是相当老的]。

我假设现在应该存在通过 ruby​​ 脚本执行 SVN 操作的更简单方法。如果我的假设是错误的，请纠正我。

此外，安装 SWIG 绑定、了解“svn/core”库并将其与 gem（如 svn_wc）一起使用或者更好地简单地从 ruby​​ 调用 svn 命令行命令是否值得麻烦？这些方法的性能是否存在巨大差异？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:36:52.273

一种简单的方法是使用 Ruby 中的 SVN 命令行工具。假设您在沙盒中，并且有一个脚本“svn-get_uuid”。它可能看起来像这样：

```
$ cat svn-get_uuid
#!/usr/bin/ruby
uuid = `svn info`.lines.grep /^UUID/
uuid =  uuid[0].chomp.sub /^.*: (.+)/, '\1'
print "{#{uuid}}\n"

$ ./svn-get_uuid
{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX} 
```

也许您可以使用 svn-bindings 更快地完成它，但这种方式对我的日常工作来说是可以的。

# php - 自动访问被拒绝，发生了什么？

> ID：15594876
> 
> 赞同：0
> 
> 时间：2013-03-24T03:31:02.713
> 
> 标签：php, access-denied

好的，所以我刚刚解决了我的[最后一个问题](https://stackoverflow.com/questions/15594748/parse-error-syntax-error-unexpected-in-c-xampp-htdocs-smasher-auth-php-on)，我需要再次帮助......所以我修复了身份验证代码，但现在每次我登录我的个人资料时，它都说我没有登录我的网站。这是 access-denied.php 代码：

```
<title>Access Denied</title>
<link href="loginmodule.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h1>Access Denied </h1>
<p align="center">&nbsp;</p>
<h4 align="center" class="err">Access Denied!<br />
  You do not have access to this resource.</h4> 
```

这是我的 auth.php 代码：

```
//Start session
session_start();

//Check whether the session variable SESS_MEMBER_ID is present or not
if(!isset($_SESSION['email']) || ($_SESSION['password'])){
    header("location: access-denied.php");
    exit();
} 
```

这是我的个人资料页面代码：

```
<?php session_start(); ?>
<?php include("inc/incfiles/loggedheader.php")?>
<?php
    require_once('auth.php');
?>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Member Index</title>
<link href="css/main.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h1>Welcome <? if(isset($_SESSION['SESS_fname'])){
    echo $_SESSION['SESS_fname'];
} ?></h1>
<a href="member-profile.php">My Profile</a> | <a href="logout.php">Logout</a>
<p>Welcome to your profile! </p>
</body>
</html> 
```

为什么我无法登录我的个人资料？我对这种类型的 PHP 一无所知，我几乎还在学习，我的朋友（他正在帮助我建立我的网站）得到了代码，然后通过电子邮件将它们发送给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T19:46:56.077

这是问题所在：

```
if(!isset($_SESSION['email']) || !isset($_SESSION['password'])){
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:59:37.263

线路有问题

```
if(!isset($_SESSION['email']) || ($_SESSION['password'])){ 
```

您确实需要检查 if 条件的第二部分（密码检查）。在这里，您正在检查会话中是否存在电子邮件或密码是否存在于会话中。因此，即使由于第二个条件而设置了电子邮件然后页面 goto 访问被拒绝也是如此。如有必要，您应该使用

```
if(!isset($_SESSION['email']) || !($_SESSION['password'])){ 
```

# html - 使用带有 html5 标记名的大写（或小写）字母有什么好处吗？

> ID：15594877
> 
> 赞同：1
> 
> 时间：2013-03-24T03:31:18.517
> 
> 标签：html, xhtml, tags, uppercase, lowercase

我已经搜索并阅读了这个问题。这里有一些问题：
[大写还是小写文档类型？](https://stackoverflow.com/questions/7020961/uppercase-or-lowercase-doctype)
[HTML 元字符集应该是小写还是大写？](https://stackoverflow.com/questions/10888929/should-html-meta-charset-be-lowercase-or-uppercase)
其他地方已经部分讨论了它（正如您在这两个问题中看到的那样）。
但是标签名称和属性呢？
我知道大写和小写都有效，但我想知道使用它们是否有好处？

**更新：**我看到的唯一好处是与 xhtml 以小写方式兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:44:35.063

You should use lowercase letters because they are the 'correct' way of doing things (XHTML). It's basically a standard among everyone so that everything is consistent.

Even if you don't agree with the HTML is XML argument (I certainly do), almost all web developers use lowercase and many will get upset when they are forced to use uppercase letters and it will certainly lead to inconsistencies in your markup and CSS which is not a good thing.

Words formed all in capital letters are actually more difficult to read also without having the varying heights of letters (eg. a, l, p) to give your brain hints so you can skim the text faster.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:39:34.267

没有任何好处。这只是关于可读性。选择适合您的那一款。

事实：通常，在互联网上，当有人用全部大写的文字书写时，这意味着他是“粗鲁”。

# ios - 如何通过更好的插值缩小 UIImageview 内容

> ID：15594878
> 
> 赞同：4
> 
> 时间：2013-03-24T03:31:21.520
> 
> 标签：ios, uiimageview, calayer

我正在缩小 UIImageView 但它看起来很可怕而且有别名。我尝试更改“minifactionFilter”属性，但没有看到任何效果。有没有一种特殊的方法来实现这个？苹果的文档中没有太多信息。

```
 self.imageView.layer.minificationFilter = kCAFilterLinear;
    self.imageView.layer.cornerRadius = 9.0;
    self.imageView.layer.masksToBounds = YES; 
```

我知道图层属性正在工作，因为我可以看到圆角，但插值看起来总是一样的。

kCAFilterNearest

![kCAFilterNearest](../Images/7f0d1739498c0bdb823059baf9de6478.png)

kCAFilterLinear

![kCAFilterLinear](../Images/96cd4cd47cd10dd864fc36a3fdc39b81.png)

kCAFilterTriLinear

![kCAFilter三列](../Images/4a49cfaddc96b4e7593f0d0924795316.png)

# javascript - 根据滚动位置触发视频自动播放

> ID：15594881
> 
> 赞同：7
> 
> 时间：2013-03-24T03:31:49.097
> 
> 标签：javascript, jquery, video.js

我正在编写一个使用 scrollorama.js 脚本中的擦除动画的脚本。我希望能够实现一个视频以在滚动深度中的某些标记处自动播放：即，当一个视频页面清除了另一个页面并且现在可以完全查看时。我已经想出了如何测量滚动深度，我成功地将它记录在我的控制台中。我已经想出了如何测量我滚动的深度，但也许我太累了，我不知道如何让视频以滚动深度自动播放。我希望这是一个法律问题，并且我可以得到一些帮助。有没有人在那里尝试过这个？这是到目前为止的代码。

`enter code here`$(文档).ready(函数() {

$(窗口).scroll(函数(e) {

```
 var scrollAmount = $('body').scrollTop();
  console.log(scrollAmount); 
```

});

```
 var controller = $.superscrollorama();
    var pinDur = 800;   
    // create animation timeline for pinned element
var pinAnimations = new TimelineLite();

//pinAnimations.append([TweenMax.to($('#green'), .5, {css:{top:0}})], .5)
pinAnimations.append([TweenMax.to($('#intromovie'), .5, {css:{top:0}})], .5 )
pinAnimations.append([TweenMax.to($('#red'), .5, {css:{top:0}})], .5) 
pinAnimations.append([TweenMax.to($('#blue'), .5, {css:{top:0}})], .5 )
pinAnimations.append([TweenMax.to($('#movie1'), .5, {css:{top:0}})], .5);
pinAnimations.append([TweenMax.to($('#history1'), .5, {css:{top:0}})], .5);
//pinAnimations.append(TweenMax.to($('#pin-frame-unpin'), .5, {css:{top:'100px'}}));

controller.pin($('#content_wrapper'), pinDur, {
    anim:pinAnimations, 
    onPin: function() {
        $('#content_wrapper').css('height','100%');
    }, 
    onUnpin: function() {
        $('#content_wrapper').css('height','1000px');
    }

});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T14:00:16.843

我想通了，所以我在此处拼凑在一起的许多其他答案的帮助下回答了我自己的问题！

如果有人感兴趣，html很简单：

```
 <div id="videoHolder"></div> 
```

Jquery 也很简单：

```
 $(function(){

    $(window).scroll(function(e) {

        var scrollAmount = $('body').scrollTop();   
        console.log(scrollAmount);

    if(scrollAmount >="theamountyouwant" && scrollAmount <= "theotheramountyouwant") {

        $("#videoHolder").html(
            '<video width="1200" height="700" autoplay>' +

         '<source src="http://itp.nyu.edu/~rnr217/HTML5/Week3/video/testopen.webm" type="video/webm"></source>'  +
        '<source src="http://itp.nyu.edu/~rnr217/HTML5/Week3/video/testopen.mp4" type="video/mp4"></source>' +

         '</video>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-05T12:56:13.440

只需从下面添加脚本并将 playonscroll 参数添加到页面上任何位置的视频标签。

有时它需要使用与 body 不同的滚动容器，有时它并不明显，所以下面的代码对我来说就像一个魅力：

```
setInterval(function () {
    $('video[playonscroll]').each(function () {
        var videoElement = $(this)[0]; 
        var eTop = $(this).offset().top;
        var elementOffestY = (eTop - $(window).scrollTop());
        var videoOffset = [elementOffestY, elementOffestY+$(this).height()];
        if ((videoOffset[0] < 100) && (videoOffset[1] > 350)) {
            console.log('play');
            if (!videoElement.playing) {
                videoElement.play();
            }
        } else {
            if (videoElement.playing) {
                videoElement.pause();
            }
        }
    });
},300); 
```

如果您总是使用 body 容器进行滚动，只需将 setInterval 更改为 $(window).scroll

并且不要忘记为 Video 标签元素定义属性：

```
Object.defineProperty(HTMLMediaElement.prototype, 'playing', {
    get: function(){
        return (this.currentTime > 0 && !this.paused && !this.ended && this.readyState > 2);
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-11T07:45:16.313

**所以在这种情况下，我们可以使用一个集成的 JavaScript API，即[Intersection Observer](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)**。现在我们的主要任务是在特定位置播放视频，因此对于此任务，我们将在 intersectionRatio 值上设置触发器。

```
const images = document.querySelectorAll(".mydivTriggerClass");

vid = document.getElementById("myVideoId");

observer = new IntersectionObserver((entries) => {
  console.log(entries);

  if (entry.intersectionRatio > 0.34) {
    vid.play();
  } else {
    entry.target.style.animation = "none";
  }
});

observer.observe(image); 
```

**注意**：请注意，控制台日志条目是可选的 - 它只是为了在您检查时获得显示此交叉比率来自何处的信息。

如需完美的工作示例，请访问[此链接](https://codepen.io/designcourse/pen/RXVdBj?editors=1010)。

# ios - NSURLConnection 和多个异步请求 - 它是否与正在传输的数据混淆？

> ID：15594882
> 
> 赞同：8
> 
> 时间：2013-03-24T03:31:51.857
> 
> 标签：ios, objective-c, api, nsurlconnection, nsurlrequest

我有一个`NSArray`链接。我想使用在线文章提取器 API ( [Clear Read](http://api.thequeue.org/v1/) ) 来解析它们，并将结果返回给每篇文章（一些 HTML），然后将其放入`NSString`.

我的问题源于这样一个事实，假设我的数组中有 100 个 URL，我循环遍历数组，将每个项目拍摄到 API 中并以 JSON 格式返回一些结果。`NSURLConnection`这是一次异步触发 100 个调用。

我不确定这是否是个问题，但是当我给它 100 个 URL（真正的字符串，没有一个是 nil）时，返回的数据通常具有 JSON 键的空值（当它们不应该时），或者返回的数据是`nil`. 还有一堆重复的。

我应该比现在更好地处理多个异步连接吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T05:22:55.553

几个想法：

1.  如果您正在执行并发异步请求并且正在使用 asynchronous `NSURLConnection`，那么您需要为此下载操作定义自己的类，以确保每个连接都跟踪其自己的属性。这样，所有内容都可以封装在此类中，生成的下载对象可以跟踪下载的内容、解析的内容等。如果您不使用异步`NSURLConnection`（例如，您只是使用`dataWithContentsOfURL`），它会更容易，尽管您失去一些`NSURLConnection`提供和/或流媒体机会的进度更新。

2.  为了获得最佳性能，您应该执行并发请求。话虽如此，您不应有超过四个或五个并发请求到任何特定服务器。这是 iOS 强加的限制，特别是如果您的网络连接速度较慢，否则您可能会遇到连接超时。

3.  如果您在模拟器上进行初步测试，您可能需要确保尝试“网络链接调节器”。它是“适用于 Xcode 的硬件 IO 工具”的一部分，可在[Apple Developers 下载处获得](https://developer.apple.com/downloads/index.action)。有些问题（例如，如果您有太多并发请求发往特定服务器，则上述超时问题）只会在慢速连接中表现出来。

4.  话虽如此，您还需要确保在具有真实网络速度的设备上测试您的解决方案。在对设备过于贪婪的模拟器上成功运行大规模并行任务很容易。将并发会话数限制为 5 个将减少此资源问题，但它应该成为您的测试策略的一部分。

5.  我同意 JRG-Developer 的观点，您应该研究已建立的框架，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)。但是，如果排队 100 多个操作，请确保为 的`maxConcurrentOperationCount`设置`queue`。`AFHTTPClient`

6.  我不知道您的 100 个请求需要多少数据，但请注意，众所周知，应用程序批准过程会拒绝在蜂窝网络上发出特殊网络请求的应用程序。什么构成过度的蜂窝网络活动在应用程序审查指南中没有明确说明，尽管[避免 Apple 拒绝 iPhone 应用程序](http://mobileorchard.com/avoiding-iphone-app-rejection-from-apple/)声称你应该确保你在 5 分钟内不超过 4.5mb。您可以使用[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)来确定您所在的网络类型，并可能在用户使用蜂窝网络时警告用户（如果数据量接近此阈值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T03:41:57.577

您是否考虑过使用第三方框架（例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)）并限制一次发生的异步调用的数量？也许这可能有助于/解决您的问题。

特别是，您可能会考虑创建一个`networking manager`类来创建和管理[AFHTTPClient(s)](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html)，该类又管理[AFHTTPRequestOperations](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPRequestOperation.html)，用于您点击的每个端点（基本 URL）。

# sharepoint-api - 获取 sharepoint 2013 站点 RESTfuly 上的所有文档库

> ID：15594890
> 
> 赞同：1
> 
> 时间：2013-03-24T03:32:46.397
> 
> 标签：sharepoint-api

我想从共享点 2013 站点 Restfuly 获取所有“文档库”。

我尝试使用

http:///_api/web/文件夹

但它会获取所有可能文件夹的列表，包括一些内部文件夹，如 '_vti_bin' 、 '_pvt' 、 'Forms' 等。

我只想获取所有用户定义的“文档库”类型的文件夹。我应该使用什么网址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T15:17:26.173

我认为没有像 getByTitle() 这样的直接调用方法。我得到我的图书馆列表的方式是调用：

```
 http://<site>/_api/web/lists 
```

然后获取返回的 atom-xml 并将其解析为 BaseTemplate 101，即 Document Libraries。

```
-<content type="application/xml">
  -<m:properties>
          |
          |
     <d:BaseTemplate m:type="Edm.Int32">101</d:BaseTemplate>
          |
          | 
```

希望这可以帮助。资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/office/dn292556.aspx)

# python - 在python中计算一个范围内的回文数

> ID：15594895
> 
> 赞同：0
> 
> 时间：2013-03-24T03:33:41.043
> 
> 标签：python, for-loop, python-3.x, palindrome

我对python有点陌生。我试图通过一个特定的数字范围，让 python 计算其中的所有回文并将它们返回给我（总数，而不是它们的总和）。所以它会计算这个范围内的所有整数并将其作为一个数字返回给我。

我不断收到无效的语法错误，我不知道要更改什么。这是我到目前为止所拥有的：

```
import math

def ispal(n):
    return str(n) == str(n)[::-1] 
```

但这基本上只是我们在课堂上所做的。

我的数字范围是从 171 到 115000，我想遍历这两个数字之间的整个范围，包括这两个数字，让 python 告诉我有多少数字是回文数。问题是我不知道如何适应 for 循环。

我开始：

```
def count_pal(n):  
   count = 0  
   for i in range(n):  
       if i = str(n) == str(n)[::-1]:
           return:  
           count =+ i   
   else:
       pass 
```

但我不知道如何将这两个放在一起。我有python 3.2。谁能帮帮我？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:37:03.993

```
def num_palindromes(start, end):
    count = 0
    for i in range(start, end + 1):
        if str(i) == str(i)[::-1]:
            count += 1
    return count 
```

或作为一个班轮

```
def num_palindromes(start, end):
    return sum(str(i) == str(i)[::-1] for i in range(start, end + 1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:50:21.693

在您有机会增加计数器之前，您将返回到 for 循环中。您也不需要那个空的 'else: pass' 块，因为它什么都不做。

循环终止后，正确的解决方案将在函数末尾返回计数器。

像这样的东西会起作用：

```
count = 0
for i in range(171, 115000):
    if str(i) == str(i)[::-1]:
        count += 1
return count 
```

请注意一些样式更改： - 4 空格缩进 - 没有多余的换行符 - 没有将 i 从 'True/False' 不必要的强制转换为数字（这是你在代码中得到的结果 i = str(i) == str(i)[::-1])

与您的问题没有直接关系，但遵循 python 常规样式将有助于使您的代码更具可读性，并且更易于其他人理解和帮助您。

最后，就像额外的花絮一样，您还可以通过列表推导来完成此任务：

```
sum([1 for i in range(171, 115000) if str(i) == str(i)[::-1]]) 
```

我个人觉得它比循环计数器变体更简洁/更容易理解。

# c++ - CppCMS URL 调度和映射失败。代码不完整？

> ID：15594898
> 
> 赞同：0
> 
> 时间：2013-03-24T03:33:47.123
> 
> 标签：c++, cppcms

来自[http://cppcms.com/wikipp/en/page/cppcms_1x_tut_url_mapping](http://cppcms.com/wikipp/en/page/cppcms_1x_tut_url_mapping)

改写后`hello.cpp`代码如下：

```
#include <cppcms/application.h>
#include <cppcms/service.h>
#include <cppcms/http_response.h>
#include <cppcms/url_dispatcher.h>
#include <cppcms/url_mapper.h>
#include <cppcms/applications_pool.h>
#include <iostream>
#include <stdlib.h>

hello(cppcms::service &srv) :
    cppcms::application(srv)
{
    dispatcher().assign("/number/(\\d+)",&hello::number,this,1);
    mapper().assign("number","/number/{1}");

    dispatcher().assign("/smile",&hello::smile,this);
    mapper().assign("smile","/smile");

    dispatcher().assign("",&hello::welcome,this);
    mapper().assign("");

    mapper().root("/hello");
}

void number(std::string num)
{
    int no = atoi(num.c_str());
    response().out() << "The number is " << no << "<br/>\n";
    response().out() << "<a href='" << url("/") << "'>Go back</a>";
}

void smile()
{
    response().out() << ":-) <br/>\n";
    response().out() << "<a href='" << url("/") << "'>Go back</a>";
}

void welcome()
{
    response().out() <<
        "<h1> Wellcome To Page with links </h1>\n"
        "<a href='" << url("/number",1)  << "'>1</a><br>\n"
        "<a href='" << url("/number",15) << "'>15</a><br>\n"
        "<a href='" << url("/smile") << "' >:-)</a><br>\n";
} 
```

但是现在，它在编译时抛出错误：

```
hello.cpp:10:27: error: ISO C++ forbids declaration of ‘hello’ with no type [-fpermissive]
hello.cpp: In function ‘int hello(cppcms::service&)’:
hello.cpp:11:5: error: only constructors take member initializers
hello.cpp:13:16: error: ‘dispatcher’ was not declared in this scope
hello.cpp:13:43: error: ‘hello’ is not a class or namespace
hello.cpp:13:57: error: invalid use of ‘this’ in non-member function
hello.cpp:14:12: error: ‘mapper’ was not declared in this scope
hello.cpp:16:35: error: ‘hello’ is not a class or namespace
hello.cpp:16:48: error: invalid use of ‘this’ in non-member function
hello.cpp:19:29: error: ‘hello’ is not a class or namespace
hello.cpp:19:44: error: invalid use of ‘this’ in non-member function
hello.cpp: In function ‘void number(std::string)’:
hello.cpp:29:14: error: ‘response’ was not declared in this scope
hello.cpp:29:14: note: suggested alternative:
/usr/local/include/cppcms/http_response.h:31:19: note:   ‘cppcms::http::response’
hello.cpp:30:47: error: ‘url’ was not declared in this scope
hello.cpp: In function ‘void smile()’:
hello.cpp:35:14: error: ‘response’ was not declared in this scope
hello.cpp:35:14: note: suggested alternative:
/usr/local/include/cppcms/http_response.h:31:19: note:   ‘cppcms::http::response’
hello.cpp:36:47: error: ‘url’ was not declared in this scope
hello.cpp: In function ‘void welcome()’:
hello.cpp:41:14: error: ‘response’ was not declared in this scope
hello.cpp:41:14: note: suggested alternative:
/usr/local/include/cppcms/http_response.h:31:19: note:   ‘cppcms::http::response’
hello.cpp:43:39: error: ‘url’ was not declared in this scope 
```

我认为新`hello.cpp`代码不完整（也不知道完整的代码），但是因为它说“重写”，所以我只是删除了旧代码并创建了新代码。

我试过结合旧的 Hello World 但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:46:10.617

在链接到的示例中，构造函数是在类内部（在标题中）定义的。如果在 .cpp 文件中定义它，则必须将类名添加到构造函数和成员函数中。

```
hello::hello(cppcms::service &srv) :
    cppcms::application(srv)
{

...

void hello::number(std::string num)
{ 
```

否则编译器会认为你添加了一些不相关的自由函数。

# css - 字形š总是粗体

> ID：15594900
> 
> 赞同：0
> 
> 时间：2013-03-24T03:34:35.893
> 
> 标签：css, google-webfonts, grapheme

从几个小时开始，我就在与 š 的字体风格作斗争。

我正在使用来自 google webfonts 的 webfont“open sans”，并在 google 的评论选项中测试了字形。一切都很好，š 和其他字体一样又细又漂亮。（对不起，我还不能发布图片）

但在我的网站上，š 总是粗体！我重置了所有样式表以确保没有任何东西覆盖字体粗细或其他东西。我的文档是 utf-8，我尝试了两种方式来发布字形：š 和`&scaron;`

我扫描了谷歌的 quellcode 以找到正确显示字形的魔法，但找不到解决方案:(

有人可以帮我解决这个问题吗？

在线示例： http: [//korasu.de/font/](http://korasu.de/font/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:23:40.743

您的字体不带有字符 for `š`，并且它的样式回退到`sans-serif`.

你应该在这里扩展你的字符集（感谢@Jukka K. Korpela 指出拉丁语和拉丁语扩展对于这种情况来说已经足够了）： ![字符集](../Images/0a7fdc7af39e31ada6eba0c3ec52e4a2.png) 并链接到扩展的 webfont 样式表：

```
<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300&subset=latin,latin-ext' rel='stylesheet' type='text/css'> 
```

然后你`š`会很漂亮：[DEMO](http://jsbin.com/aponef/5/)。

# css - 如何将“内联块”与有序列表很好地对齐（ol）

> ID：15594902
> 
> 赞同：1
> 
> 时间：2013-03-24T03:35:32.303
> 
> 标签：css, html-lists

我的 ol 列表有对齐问题。我有一个像这样的简单列表：

```
<ol type="a">
  <li><button style="display: inline-block">TEXT1</button></li>
  <li><button style="display: inline-block">TEXT2</button></li>
  <li><button style="display: inline-block">TEXT3</button></li>
  <li><button style="display: inline-block">TEXT4</button></li>
</ol> 
```

当这些文本很短时，我让文本在订单字符旁边对齐，如下所示：

![看起来不错](../Images/99c1b2eb6fb3c6a05c61ddac4dce2f5a.png)

但是当文本较长时，它会跳转到下一行，而不是按照如下顺序在同一行上对齐：

![在此处输入图像描述](../Images/0368f3f1999efea3a81da12942c08344.png)

*编辑*：正如大家所指出的，为了重现问题，我错过了我的 LI 的一些属性。每个 LI 元素也有“list-style-position: inside” css，我认为这是问题的根源。

有没有办法纠正它，以便按钮与订单对齐而不是跳到下一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:49:31.857

它实际上看起来不错。见[小提琴](http://jsfiddle.net/praveenscience/fNAGr/)。似乎还有其他影响渲染的 CSS。请也发布CSS。如果您担心有多行，请使用：

```
ol li button {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

既然你有一个`list-style-position: inside`，你可以使用这个：

```
li {list-style-position: inside;}
li button {width: 90%;} 
```

### 演示：[小提琴](http://jsfiddle.net/praveenscience/fNAGr/1/)

# model-view-controller - 观察者、发布/订阅和数据绑定之间的区别

> ID：15594905
> 
> 赞同：178
> 
> 时间：2013-03-24T03:36:15.073
> 
> 标签：model-view-controller, design-patterns, data-binding, observer-pattern, publish-subscribe

**[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)**、**[发布/订阅](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)**和**[数据绑定](http://en.wikipedia.org/wiki/UI_data_binding)**有什么区别？

我在 Stack Overflow 上搜索了一下，没有找到任何好的答案。

我开始相信数据绑定是一个通用术语，并且有不同的实现方式，例如观察者模式或发布/订阅模式。使用观察者模式，可观察者更新其观察者。使用 Pub/Sub，0-many 发布者可以发布某些类的消息，0-many 订阅者可以订阅某些类的消息。

**还有其他实现“数据绑定”的模式吗？**

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-03-24T07:25:38.420

Observer/Observable 和 Publisher/Subscriber 模式之间有两个主要区别：

1.  **Observer/Observable**模式大多以***同步***方式实现，即当某个事件发生时，observable 调用其所有观察者的适当方法。**发布者/订阅者**模式主要以异步方式实现（***使用***消息队列）。

2.  在**Observer/Observable**模式中，***观察者知道 observable***。而在**Publisher/Subscriber**中，发布者和订阅者***不需要相互认识***。他们只是在消息队列的帮助下进行通信。

正如您正确提到的，数据绑定是一个通用术语，可以使用 Observer/Observable 或 Publisher/Subscriber 方法来实现。数据是发布者/可观察者。

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2013-03-24T07:42:18.823

以下是我对三者的看法：

### 数据绑定

从本质上讲，这只是意味着“对象 Y 上的属性 X 的值在语义上绑定到对象 B 上的属性 A 的值。没有假设 Y 如何知道或接受对象 B 上的更改。

### 观察者，或可观察者/观察者

一种设计模式，通过该设计模式，对象具有通知其他特定事件的能力 - 通常使用实际事件完成，这些事件有点像对象中具有特定功能/方法形状的插槽。可观察对象是提供通知的对象，观察者接收这些通知。在 .net 中，observable 可以公开一个事件，并且观察者使用“事件处理程序”形状的钩子订阅该事件。没有关于通知发生的具体机制，也没有关于一个 observable 可以通知的观察者的数量做任何假设。

### 发布/订阅

Observable/Observer 模式的另一个名称（可能具有更多“广播”语义），这通常意味着更“动态”的风格 - 观察者可以订阅或取消订阅通知，一个可观察者可以向多个观察者“大喊”。在 .NET 中，可以为此使用标准事件，因为事件是 MulticastDelegate 的一种形式，因此可以支持将事件传递给多个订阅者，并且还支持取消订阅。Pub/Sub 在某些上下文中的含义略有不同，通常在 event 和 eventer 之间涉及更多的“匿名性”，这可以通过任意数量的抽象来促进，通常涉及一些知道一切的“中间人”（例如消息队列）各方，但个别各方不知道对方。

### 数据绑定，Redux

在许多“类似 MVC”的模式中，可观察对象公开了某种方式的“属性更改通知”，其中还包含有关更改的特定属性的信息。观察者是隐式的，通常由框架创建，并通过一些绑定语法订阅这些通知以明确标识对象和属性，并且“事件处理程序”只是将新值复制过来，可能会触发任何更新或刷新逻辑。

### 数据绑定重新 Redux

数据绑定的替代实现？好吧，这是一个愚蠢的：

*   启动一个后台线程，不断检查对象的绑定属性。
*   如果该线程检测到自上次检查后属性的值发生了变化，则将该值复制到绑定项。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-07-08T21:15:44.037

我有点好笑，这里的所有答案都试图解释 Observer 和 Pub/Sub 模式之间的细微差别，而没有给出任何具体的例子。我敢打赌，大多数读者仍然不知道如何通过阅读一个是同步的而另一个是异步的来实现每一个。

需要注意的一点是：**这些模式的目标是尝试解耦代码**

> 观察者是一种设计模式，其中一个对象（称为主体）根据它（观察者）维护一个对象列表，自动通知它们状态的任何变化。
> 
> *[观察者模式](https://addyosmani.com/resources/essentialjsdesignpatterns/book/#observerpatternjavascript)*

这意味着 an`observable object`有一个列表，它保存所有的`observers`（通常是函数）。并且可以在感觉好的时候遍历这个列表并调用这些函数。

有关详细信息，请参阅[此观察者模式](https://gist.github.com/liqiang372/48b26fc4fe5cd808ad5b9aba63d11b88)示例。

当您想要侦听对象上的任何数据更改并相应地更新其他 UI 视图时，此模式非常有用。

但是 Cons 是**Observables 只维护一个数组来保存观察者** （在示例中，数组是`observersList`）。

它不会区分更新是如何触发的，因为它只有一个`notify function`，它会触发存储在该数组中的所有函数。

如果我们想根据不同的事件对观察者处理程序进行分组。我们只需要将其修改`observersList`为`Object`类似

```
var events = {
    "event1": [handler1, handler2],
    "event2": [handler3]
} 
```

有关详细信息，请参阅[此 pubsub 示例](https://gist.github.com/liqiang372/47a987065947f3338c1a168b8ee473e0)。

人们称这种变化为`pub/sub`。因此，您可以根据`events`发布的内容触发不同的功能。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-26T10:29:00.230

我同意你关于这两种模式的结论，但是，对我来说，我在同一个进程中使用 Observable 并且我在进程间场景中使用 Pub/Sub，其中各方只知道公共渠道而不知道各方.

我不知道其他模式，或者让我这样说，我从来不需要其他模式来完成这项任务。甚至大多数 MVC 框架和数据绑定实现通常在内部使用观察者概念。

如果您对进程间通信感兴趣，我建议您：

**“企业集成模式：设计、构建和部署消息传递解决方案”** - *[https://www.enterpriseintegrationpatterns.com/](https://www.enterpriseintegrationpatterns.com/)*

这本书包含很多关于如何在进程或类之间发送消息的想法，这些想法甚至可以用于进程内通信任务（它帮助我以更松散耦合的方式进行编程）。

我希望这有帮助！

# php - bindValue 和有 execute(array()) 有什么区别？

> ID：15594906
> 
> 赞同：1
> 
> 时间：2013-03-24T03:36:21.817
> 
> 标签：php, pdo, bindvalue

我一直在敦促了解使用 bindValue 和 execute(array()) thing-y 之间的区别。

好吧，假设我有这个代码示例

```
$query = $db->prepare("SELECT embedded_page.uid FROM embedded_page WHERE fbp_id = :fbp_id");
$query->bindValue(":fbp_id", $fbp_id, PDO::PARAM_INT);
$query->execute(); 
```

这个有什么区别？

```
$query = $db->prepare('SELECT `embedded_page`.`uid`, `embedded_page`.`ticket_id`, `embedded_page`.`event_table` FROM `embedded_page` WHERE `fbp_id` = ?');
$query->execute(array($fbp_id)); 
```

不管节省一行代码。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:51:05.843

It is already self explained with your example, That bindValue validate input data type in form of specially defined PDO::PARAM_INT or similar. While in second example no such condition in place as prepare using ?. (Some internal validation may be done by engine assuming for string, int and float types.). Also in case of more variables as place holders in query first form is easier to understand.

# mysql - 查看 - 如果在按查询分组的查询中未找到任何行，则返回 0

> ID：15594912
> 
> 赞同：4
> 
> 时间：2013-03-24T03:37:05.860
> 
> 标签：mysql, view

假设我有以下 MySQL 视图：

```
create or replace view total_transactions(account_id, total) as
select
  t.account_id,
  ifnull(sum(t.value), 0) as total
from transactions t
where t.paid IS TRUE
group by t.bank_account_id; 
```

假设该帐户还没有任何交易，我希望视图返回 0。现在，如果我执行如下选择：

```
select * from total_transactions where account_id = 2060; 
```

并且账户 2060 没有任何交易，它不会返回任何东西，而不是 0。

我怎么能解决这个问题？

提前致谢。

* * *

# 编辑

我认为这可能与`group by`...有关

如果我在没有 group by 的情况下执行我用于视图的查询，它可以工作（即使没有结果也返回 0），但如果我使用`group by`它，它会为 null：

```
select
  t.account_id,
  ifnull(sum(t.value), 0) as total
from transactions t
where t.paid IS TRUE
and account_id = 2060; 
```

返回`0`, 和

```
create or replace view total_transactions(account_id, total) as
select
  t.account_id,
  ifnull(sum(t.value), 0) as total
from transactions t
where t.paid IS TRUE
and account_id = 2060
group by t.bank_account_id; 
```

返回一个空集。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T03:42:38.907

如果视图结果中没有条目，那么这将始终返回`NULL`- 那是 SQL。如果你改变你`SELECT`对视图使用的，你可以实现你想要的：

```
SELECT IFNULL(total, 0) FROM total_transactions WHERE account_id = 2060 
```

**编辑：**

```
(SELECT IFNULL(total, 0) total FROM total_transactions WHERE account_id = 2060)
UNION
(SELECT 0 total) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:43:06.713

在生产中，不要使用`SELECT *`. 请参阅[此 SO question](https://stackoverflow.com/questions/321299/what-is-the-reason-not-to-use-select)以获得有关原因的全面答复。

所以，假设你不是，你可以使用[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)，它将返回第一个非空值。

```
SELECT 
    COALESCE(total, 0) 
FROM
    total_transactions
WHERE
    account_id = '2600' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T08:20:55.667

对于我使用的正值

```
select max(x.cnt) as cnt
from (
select ifnull(meta_value, 0) as cnt from wp_postmeta where post_id = 5543 and meta_key = '_bbp_voice_count'
union
select 0 as cnt) x 
```

或对于任何

```
select x.cnt 
from (
select ifnull(meta_value, 0) as cnt from wp_postmeta where post_id = 5543 and meta_key = '_bbp_voice_count'
union
select 0 as cnt
) x
limit 1 
```

# java - 如何使用 Java 使用 PHP 将文件上传到服务器

> ID：15594917
> 
> 赞同：0
> 
> 时间：2013-03-24T03:37:38.830
> 
> 标签：java, php, post, file-upload

我有一个需要将文件从用户计算机上传到服务器的 Java 小程序。我无法添加其他库（例如 com.apache）。是否有这样做的低级方法。目前，我在服务器上有一个 php 文件，其中包含：

```
 //Sets the target path for the upload.
    $target_path = "spelling/";

    $_FILES = $_POST;
    var_dump($_FILES);

    move_uploaded_file($_FILES["tmp_name"], $target_path . $_FILES["name"]);
?> 
```

目前我的 Java 程序正在通过 POST 向这个 php 文件发送参数。它使用以下代码通过 POST 发送这些参数：

```
 try {   
        //Creates a new URL containing the php file that writes files on the ec2.
        url = new URL(WEB_ADDRESS + phpFile);
        //Opens this connection and allows for the connection to output.
        connection = url.openConnection();
        connection.setDoOutput(true);

        //Creates a new streamwriter based on the output stream of the connection.
        OutputStreamWriter wr = new OutputStreamWriter(connection.getOutputStream());

        //Writes the parameters to the php file on the ec2 server.
        wr.write(data);
        wr.flush();

        //Gets the response from the server.
        //Creates a buffered input reader from the input stream of the connection.
        BufferedReader rd = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        String line;

        //Loops through and reads the response. Loops until reaches null line.
        while ((line = rd.readLine()) != null) {
            //Prints to console.
            System.out.println(line);
        }

        //Closes reader and writer.
        wr.close();
        rd.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

这适用于 POST 数据，但是当我尝试使用这种方法发送文件时，什么也没有发生（服务器没有响应，文件也没有上传）。如果有人有任何提示，我将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:01:41.757

你在用`java.net.URLConnection`吗？

您可能希望在此页面上获得一些帮助：

[http://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically](http://www.codejava.net/java-se/networking/upload-files-by-sending-multipart-request-programmatically)

这是主要部分：

```
 boundary = "===" + System.currentTimeMillis() + "===";

    URL url = new URL(requestURL);
    httpConn = (HttpURLConnection) url.openConnection();
    httpConn.setDoOutput(true); // indicates POST method
    httpConn.setDoInput(true);
    httpConn.setRequestProperty("Content-Type",
            "multipart/form-data; boundary=" + boundary);
    outputStream = httpConn.getOutputStream();
    writer = new PrintWriter(new OutputStreamWriter(outputStream, charset),
            true); 
```

但是，您需要让 php 脚本位于您的 applet 所在的同一台服务器上。

# c# - 监听蓝牙设备连接 windows 手机

> ID：15594920
> 
> 赞同：1
> 
> 时间：2013-03-24T03:38:14.560
> 
> 标签：c#, windows-phone-7, bluetooth, windows-phone-8

我在 Windows Phone 8 中有一个通过蓝牙连接两个设备的项目。当我尝试连接我的手机和其他设备时，我的手机正在侦听/等待来自其他设备的连接。但是当我的设备发送连接请求时，该`PeerFinder_ConnectionRequested`事件不会触发。我的代码：

```
public MainPage()
{
   InitializeComponent();
   Loaded += MainPage_Loaded;
}

void MainPage_Loaded(object sender, RoutedEventArgs e)
{
   PeerFinder.ConnectionRequested += PeerFinder_ConnectionRequested;
}

void PeerFinder_ConnectionRequested(object sender, ConnectionRequestedEventArgs args)
{
   if (ShouldConnect())
    {
       // Go ahead and connect
       ConnectToPeer(args.PeerInformation);
    }
}

async void ConnectToPeer(PeerInformation peer)
{
   StreamSocket socket = await PeerFinder.ConnectAsync(peer);
   MessageBox.Show ("Completed");
}

private bool ShouldConnect()
{
   // Determine whether to accept this connection request and return
   return true;
} 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T13:07:31.870

你开始peerfinder了吗？

```
PeerFinder.Start() 
```

# java - Java - 自定义单链表，删除所有出现的具有特定值的元素

> ID：15594921
> 
> 赞同：1
> 
> 时间：2013-03-24T00:11:35.263
> 
> 标签：java, algorithm, optimization, class, linked-list

我在 java 中制作了一个自定义的 LinkedList，它有点像地图和列表之间的交叉。我做这个练习只是为了学习，我知道 HashMap 是一个更好更快的实现。我为 LinkedList 实现了 delete 方法，但是对于哪种是编写方法的最佳方式有点困惑： deleteAll 基本上删除了特定元素的所有出现。

代码：

```
public class LinkedListMain
{
    public static void main(String[] args)
    {
        LinkedList linkedList = new LinkedList();

        System.out.println("isEmpty: " + linkedList.isEmpty());

        linkedList.insert("abc", 34);
        linkedList.insert("pqr", 44);
        linkedList.insert("xyz", 54);
        linkedList.insert("asd", 64);
        linkedList.insert("abc", 74);

        linkedList.print();

/*      System.out.println("delete: " + linkedList.delete("abc"));
        System.out.println("delete: " + linkedList.delete("pqr"));
        System.out.println("delete: " + linkedList.delete("xyz"));
        System.out.println("delete: " + linkedList.delete("asd"));
*/
        System.out.println("deleteAll: " + linkedList.deleteAll("abc"));
        System.out.println("isEmpty: " + linkedList.isEmpty());
    }
}

class LinkedList
{
    private ListNode first;
    private ListNode last;

    public LinkedList()
    {
        first = null;
        last = first;
    }

    public void insert(String d1, int d2)
    {
        ListNode node = new ListNode(d1, d2);

        if(first == null)
        {
            node.next = null;
            first = node;
            last = node;
        }

        else
        {
            last.next = node;
            node.next = null;
            last = node;
        }
    }

    public String deleteAll(String str)
    {
        return "To Be Implemented";
    }

    public String delete(String str)
    {
        ListNode slow = first;
        ListNode fast = first;

        int count = 0;

        while(fast != null)
        {
            if(count > 1)
            {
                slow = slow.next;
            }

            if(count <= 1)
            {
                count++;
            }

            if(fast.getVal()==str)
            {
                if(fast == first)
                {
                    first = first.next;
                }

                else
                {
                    if(fast.next != null)
                    {
                        slow.next = fast.next;
                    }

                    else
                    {
                        slow.next = null;
                    }
                }

                fast = null;
                return str;     // fast.getVal()
            }

            fast = fast.next;
        }

        return "not found";
    }

    public void print()
    {
        ListNode currentNode = first;

        while(currentNode != null)
        {
            currentNode.print();
            currentNode = currentNode.next;
        }
    }

    public boolean isEmpty()
    {
//      return ( ((first==null) ? (true) : (false)) && ((last==null) ? (true) : (false)));
        return (first==null) ? (true) : (false);
    }
}

class ListNode
{
    private String data1;
    private int data2;

    public ListNode next;

    public ListNode(String d1, int d2)
    {
        data1 = d1;
        data2 = d2;
    }

    public String getVal()
    {
        return data1;
    }

//  public void printMe(ListNode node)
    public void print()
    {
        System.out.println("data1: [" + data1 + "], data2: [" + data2 + "]");
    }
} 
```

我有 3 个与此示例相关的问题：

1.  理想的 deleteAll 函数是否应该重复使用我的 delete 函数？我应该更改我的删除功能以适应这种情况吗？
2.  理想情况下，isEmpty 函数是否应该将 first 和 last 都与 null 进行比较？如果 last 应该与 null 进行比较，那么我应该如何更改我的 delete 和 deleteAll 函数才能实现它。我尝试使用当前的删除功能执行此操作，但遇到了一些问题。
3.  总的来说，这段代码可以显着优化吗？不是说“如果你需要完美的链表，就使用集合”，只是问如果可能的话，如何更精确地优化这个单链表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:38:00.110

`deleteAll()`*将前*一个节点传递给节点删除方法可能最舒服。如果`delete()`预期除了明显的指针操作之外做任何事情，则可以排除此操作。

```
/** 
 Deletes all nodes that contain target_string. 
 Returns the number of nodes deleted.
*/
public int deleteAll(String target_string) {
  int deleted_nodes_cnt = 0;
  ...
  if (prev_node.next.getVal().equals(target_string)) { // not ==
    deleteNextNode(prev_node); 
    prev_node = prev_node.next; 
    deleted_nodes_cnt += 1;
  }
  ...
  return deleted_nodes_cnt;
}

/** Delete the node after prev_node; prev_node.next != null */
private void deleteNextNode(Node prev_node) {
  Node dead_node = prev_node.next;
  prev_node.next = prev_node.next.next;
  dead_node.afterDelete(); // any custom cleanup, if required
}

public boolean delete(String target_string) {
   ... 

  if (prev_node.next.getVal().equals(target_string)) { // looks familiar?
    deleteNextNode(prev_node);
    return true; 
  }
  ...
  return false;
} 
```

您可能会注意到`delete()`并`deleteAll()`使用相同的列表迭代逻辑，也可以很好地分解出来。

```
/**
 Scan nodes, starting from this.
 Returns node X such that X.next.value equals target_string, or null. 
*/
private Node findNodeBeforeMatching(String target_string) {
  Node prev_node = this;
  while (prev_node.next != null) {
    if (prev_node.next.getVal().equals(target_string)) return prev_node;
    else prev_node = prev_node.next;
  }
  return null;
} 
```

要有效地使用此方法，您将需要创建`LinkedList`（本质上是“列表主管”）的子类`Node`，或将它们都设为公共类的子类。更好的是，让它们实现相同的接口，允许`getNext()`和`deleteNext()`. 或者，您可以`Node`从每个操作中返回 a，但这`Collection`当然与接口不兼容。

[旧的、不正确的文本：*不应*`deleteAll()`调用单独的方法，除非这些方法可能在后代类中做一些特殊的事情。原因是这样是 O(1)，在恒定时间内运行，而遍历列表到每个节点是 O(n)。AFAICT实例变量仅用于加速将元素附加到列表末尾（尽管对它做了奇怪的事情）。所以应该只有真正检查。如果，方法*可能*。我认为这意味着我们的簿记是错误的，我们的数据已经损坏，我们无法继续。WRT优化，我看不出你的拜占庭如何*`delete()``deleteAll()``delete()``last``insert()``isEmpty()``first``first == null` *`assert last == null``first == null``last != null``delete()`应该管用。我不认为在你的情况下有两个指针可以加快速度。以不同的“速度”运行两个指针是检测周期的一种已知方法，但我看不出它在这里如何适用。**]

 **如果您想加快*排序*数据的速度，请阅读[跳过列表](http://en.wikipedia.org/wiki/Skip_list)，或使用树。对于未排序的数据，简单的顺序扫描是您最好的选择。

对我来说，整个 LinkedList 类的长度应该是原来的一半，因为它在逻辑上非常简单。

您的`ListNode`和`LinkedList`不必要地紧密耦合`insert()`，恕我直言，它应该接受一个实例，而不是构造它。更好的是，`ListNode`应该和`LinkedList`经典实现一样。

获取[Wirth 关于数据结构和算法的书](https://rads.stackoverflow.com/amzn/click/com/0130224189)，它非常平易近人。（当你完全理解后，试着继续看 Knuth 的书，如果你真的很勇敢，可以看 Okasaki 的书。）**

# php - PHP MySQL 高级过滤

> ID：15594937
> 
> 赞同：0
> 
> 时间：2013-03-24T03:41:52.537
> 
> 标签：php, mysql, relational-database

对于一个新版本的网站，我在主页上创建了一个“热门用户”部分。这允许人们在一堆不同的类别上为用户投票。所有这些信息都存储在 MySQL 数据库中的两个主表中。一张表包含信息（id*autogenerated*、用户名、添加日期等），另一张表包含费率（id*autogenerated*、linkID、rowAvg、avg、avg2 等）。来自`linkID`费率表对应于`id`来自信息表。查询的工作原理是通过 查询`rate_table`，按最高平均值排序，然后选择前 10 个结果。然后使用该`linkID`行的 ，我从`info_table`. 只要每个用户只有 1 个费率，这就很好。当用户有 2 个或更多费率并且两个费率都是正数时会发生什么情况，查询会选择这两个并提取 2 行中每一行的信息，然后将其显示为两个不同的用户，即使它是相同的人。如何让`rate_table`查询知道何时有多个相同的费率`linkID`并将它们平均在一起，而不是将它们显示为两个不同的人。我正在考虑将每个`linkID`插入一个数组，然后对于每个随后选择的行，检查是否`linkID`已经在数组中。如果不是，则插入它，如果是，则将它们平均在一起并将其存储在数组中，并使用该数组填充主页上的表格。我觉得我在想这件事。对不起，如果这有点令人困惑。如果您需要更多信息，请告诉我。

PS我仍在学习有关MySQL查询的方法，所以如果我以完全错误的方式进行此操作，我深表歉意，并且您花了最后几分钟试图理解我在说什么：P

PPS 我知道我不应该再使用 MySQL_Query 了，应该使用准备好的语句。我想掌握 MySQL 查询，因为那是 iOS 的 FMDB 数据库使用的，然后我将继续学习准备好的语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:05:21.013

看看一些 [MySQL 聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

[`AVG()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_avg)可能是您正在寻找的东西。一个结果的平均值就是那个结果，所以它应该仍然有效。[`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/select.html)在应该唯一的列上使用子句，以便对分组的行运行聚合计算。

# delphi - Delphi Writing to HKEY LOCAL MACHINE

> ID：15594940
> 
> 赞同：1
> 
> 时间：2013-03-24T03:42:09.243
> 
> 标签：delphi, delphi-2010

I have a back up application that I wrote and I need it to run on start up, always for all users. I want to use

```
key := '\Software\Microsoft\Windows\CurrentVersion\Run';
Reg := TRegIniFile.Create;
try
  Reg.RootKey:=HKEY_LOCAL_MACHINE;
  Reg.CreateKey(Key);
  if Reg.OpenKey(Key,False) then Reg.WriteString(key, 'Backup', 'c:\backup.exe');
finally
  Reg.Free;
end; 
```

I have written a manifest and added it as a resource, It asks for admin privileges every time it runs. However, it is not adding the the reg value and I am not sure why.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:19:32.977

您的代码在 32 位进程中运行。因此，它受[注册表重定向器](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384232.aspx)的约束。这是维护注册表某些部分的单独的 32 位和 64 位视图的技术。

实现的方式是将 32 位视图`HKLM\Software`存储在`HKLM\Software\Wow6432Node`. 这就是您的注册表写入被重定向到的地方。

`KEY_WOW64_64KEY`现在您可以选择使用该标志写入注册表的 64 位视图。但是，没有必要这样做。您可以简单地写入注册表的 32 位视图。当用户登录 Windows 时，`Software\Microsoft\Windows\CurrentVersion\Run`从注册表的 32 位和 64 位视图处理启动应用程序。

许多程序都这样做。查看我的机器，我可以在下面看到以下条目`SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Run`：

*   苹果推送
*   iTunes助手
*   QuickTime 任务
*   DivXUpdate
*   SunJava更新

换句话说，问题中的代码已经有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:23:44.027

```
Reg := TRegistry.Create(KEY_WRITE OR KEY_WOW64_64KEY); 
```

解决了这个问题。需要上面的代码。

# c# - 无法将带有 [] 的索引应用于类型的表达式

> ID：15594945
> 
> 赞同：0
> 
> 时间：2013-03-24T03:43:40.523
> 
> 标签：c#, asp.net-mvc, foreach

我有这个简单的 MVC 4 代码。我查询数据库并获取所有结果，然后将其保存在 ViewBag 对象中，然后使用 foreach 循环它们，但出现错误：

> 无法将带有 [] 的索引应用于类型的表达式

不让我给他们看。我缺少什么？

这里是带有 entityframework 的 sql 查询

```
public ActionResult Index()
{
    var ReturnLabelsAndInputsForIndexations = Conexion.MainConexion;

    var IndexationForm = ReturnLabelsAndInputsForIndexations.Labels.ToList();
    ViewBag.IndexationForm = IndexationForm;

    return View();
} 
```

和索引视图

```
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        <table>
        @foreach (var Indexacion_Labels in ViewBag.IndexationForm)
        { 
            <tr>
                <td>@Indexacion_Labels["LABELS"]//Exception HERE</td>
                <td>@GetInputType(Indexacion_Labels["INPUT_TYPE"], Indexacion_Labels["NAME"])</td>
            </tr>
        }
        </table>
    </div>
</body>
</html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:49:29.940

的类型`ReturnLabelsAndInputsForIndexations.Labels`（无论是什么类型）都没有实现[indexer](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。要解决此问题，您需要将其添加到标签的视图模型中

```
public this[string index]
{
    get
    {
        ...
    }
} 
```

*或*将您的视图代码更改为这样的内容（假设存在视图模型的属性）

```
<tr>
    <td>@Indexacion_Labels.Labels</td>
    <td>@GetInputType(Indexacion_Labels.Input_Type, Indexacion_Labels.Name)</td>
</tr> 
```

# php - Python 脚本无法从 PHP exec() 执行

> ID：15594946
> 
> 赞同：6
> 
> 时间：2013-03-24T03:43:57.650
> 
> 标签：php, python

我有一个简单的 PHP 函数，它应该在调用时执行 Pyton 脚本。我在我的 php 程序中多次尝试过这种函数，但不知何故，这次这个函数根本没有执行 python 脚本。当我从命令提示符访问脚本并运行`python testing.py`时，它会成功执行。有一件事我想提一下，这个脚本有一些 python 的 NLTK 库的重要实现，执行和执行它的操作（即数据处理和存储到 db）需要 20 多秒。执行中的延迟是导致此问题的原因，还是这次我还缺少其他东西？

```
function success(){
   $mystring = exec('python testing.py');
   $mystring;
   if(!$mystring){

        echo "python exec failed";
            }
   else{
   echo "<br />";
   echo "successfully executed!";
   } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T03:59:30.787

你必须`python`为你的文件使用完整路径。您可能会从命令中找到前者`which python`，最有可能输出 '/usr/bin/python' 并且您应该已经知道后者。所以你的命令看起来像这样：

```
$mystring = exec('/usr/bin/python /home/user/testing.py'); 
```

并且您应该确保您的 python 脚本具有所有适当的权限，因为您的网络服务器很可能以不同的用户身份运行，因此权限应该是“-rwxrwxr-x”或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T03:45:56.663

尝试使用 python 程序的确切路径。

```
$mystring = exec('python testing.py'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T03:50:53.973

尝试删除`$mystring;`线

```
function success() {
   $mystring = exec('python testing.py');
   if(!$mystring){
       echo "python exec failed";
   } else {
       echo "<br />";
       echo "successfully executed!";
   }
} 
```

出于测试目的尝试：

```
function success() {
   $mystring = exec('python testing.py', $output);
   var_dump($output);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-01T14:30:51.803

exec() 或任何东西都没有问题。
问题是 nltk 模块无法找到 nltk_data 目录。对于它，只需找到系统中存在 nltk_data 的位置：通常是 ~/nltk_data。
现在在运行函数时导入添加该路径。
导入nltk；
现在，nltk.data.path 是搜索模块的位置列表。
你可以只做 nltk.data.path.append("your location/directory");

# windows-8 - XAML 设计视图卡在“对齐网格”视图中

> ID：15594948
> 
> 赞同：0
> 
> 时间：2013-03-24T03:45:20.473
> 
> 标签：windows-8, visual-studio-2012

愚蠢的问题，但我以某种方式将 XAML/设计视图切换为“对齐网格”视图，并且似乎无法将其恢复为标准设计视图，即使将 VS 重置为默认设置也是如此。让我的 XAML/设计视图回到正常视图而不是网格的热键是什么？视觉工作室 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:11:18.470

VS2012 中有一系列三个切换按钮，位于 XAML 设计器（也称为“画板”）的底部，以及其下方滚动条的左侧。这三个切换按钮将执行以下操作（按从左到右的顺序）：

*   显示/隐藏网格线
*   启用/禁用对齐网格线
*   启用/禁用对齐对齐线（基线、对齐边距等）

![如何关闭捕捉](../Images/5756efd104cb069b0b88c898c7fd9567.png)

这些也在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/jj155186.aspx)进一步描述。它们也可以通过 Tools -> Options 设置。

# java - 如何在某个类中使用另一个类的方法？

> ID：15594953
> 
> 赞同：1
> 
> 时间：2013-03-24T03:46:28.957
> 
> 标签：java, oop, class, object

我这里有两个类，在我的 Player 类中，我想从 Scoresheet 类中获取这些类的总数。我不知道该怎么做。

```
public class ScoreSheet {

public int getOnes(ArrayList<Integer> die)
{
    for (int i = 0; i < die.size(); i++)
    {
        if (die.get(i) == 1)
        {
            ones++;
        }
    }
    return ones;
}

public class Player {

private int ones = 0;
private int twos = 0;
private int threes = 0;
private int fours = 0;
private int fives = 0;
private int sixes = 0;
private int threeOfKind = 0;
private int fourOfKind = 0;
private int fullHouse = 0;
private int smallStraight = 0;
private int largeStraight = 0;
private int yahtzee = 0;
private int chance = 0;

public void checkScores(ArrayList<Integer> die)
{
    ones = Player -> ScoreSheet.getOnes(<Integer> die); // this is wrong, need to know
                                                        // how to get total                    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:49:21.740

Player 类需要一个 ScoreSheet 变量，该变量初始化为当前的 ScoreSheet 对象。可以通过构造函数参数或`setScoreSheet(ScoreSheet scoreSheet)`setter 方法将变量设置为正确的对象。然后，玩家可以`getOnes(...)`在需要时调用 ScoreSheet 变量上的方法或其他 ScoreSheet 方法。

# java - Need help detecting collision between two objects

> ID：15594954
> 
> 赞同：1
> 
> 时间：2013-03-24T03:46:45.963
> 
> 标签：java, collision-detection

I'm having some issue regarding collision detection in a game i am making. I have the distance between the two objects using this:

```
 double b1Dist = Math.sqrt((obOneX - obTwoX) * (obOneX - obTwoX)
            + ((obOneY - obTwoY) * (obOneY - obTwoY)));
    double b1DistTwo = b1Dist - objectOneRadius;
    b1DistFinal = b1DistTwo - objectTwoRadius; 
```

and I was attempting to do collision detection with this:

```
 if (b1DistFinal <= objectOneRadius && b1DistFinal <= objectTwoRadius ) {
            return false;
        }
         else
            return true;

    } 
```

I'm new to java so i'm sure theres probably much better/more efficient ways to write the above, however could anyone please help me out or point me in the right direction?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:15:36.177

这样做的效率并没有什么问题。但是，如果`obOneX`、`obOneY`等是对象中心的 x 和 y 坐标，则您的公式是错误的。

变量`b1DistFinal`是两个对象外边缘之间的距离。如果为零，则这些物体发生了碰撞。

尝试：

```
if (Math.abs(b1DistFinal) < 0.001) {
    return true;
} else {
    return false;
} 
```

注意：我不是检查它是否完全为零，而是检查它是否*接近*零，以允许在双算术期间出现一些舍入误差。

# php - how to trace duplicate data

> ID：15594955
> 
> 赞同：0
> 
> 时间：2013-03-24T03:46:54.380
> 
> 标签：php, mysql, sql

I would like to ask something here. now I make form that insert data into table. this table kemaskini that already have

```
+------+----------+----------+
|  no  |    Item  | kuantiti |    
+------+----------+----------+
|  1   | Speaker  |   10     |
+------+----------+----------+
|  2   | Laptop   |   10     |
+------+----------+----------+
|  3   | Mouse    |   10     |
+------+----------+----------+ 
```

when I type "Speaker" in form then I submit it. it trace and say try again. it because already have. coding that I write here. it only trace row 1 of table kemaskini. when I type "Laptop" in form then I submit it. it insert normally.

i more thing how I can trace "Speaker" and "speaker" are same.

```
 if (isset($_POST['submit']))
        { 
        $result = mysql_query("SELECT Item FROM kemaskini");
        $test = mysql_fetch_array($result);
        $trace=$test['Item'];

        if($_POST['Item']==$trace)
        {

        echo "Try Again";

        }

        else
        {   
        $item=$_POST['Item'] ;
        $kuantiti= $_POST['kuantiti'] ; 

        mysql_query("INSERT INTO `kemaskini`(Item,kuantiti) 
        VALUES ('$item','$kuantiti')"); 

        header("Location: kemaskini.php");

        }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:51:05.773

这样做的原因是因为您没有从中循环结果，`mysql_fetch_array()`这就是为什么您只检查结果的第一个值。如果您不想迭代，可以将查询更改为：

```
$itemToSearch = "Speaker";
$result = mysql_query("SELECT COUNT(*) result 
                       FROM kemaskini
                       WHERE Item = '$itemToSearch'") 
```

这将为您提供找到的项目总数，

```
$test = mysql_fetch_array($result);
$trace = $test['result'];

if($trace > 0)
{
    echo "Try Again";
}
else
{
 // insert value
} 
```

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:15:48.657

关于如何追踪“Speaker”和“speaker”是否相同，可以使用大多数数据库引擎支持的upper() 或lower() 函数。我不使用mysql，所以我在这里做一个假设。您的支票将是这样的：

```
select count(*) records 
from kemaskini
where lower(item) = 'speaker' 
```

话虽如此，我不得不警告你，在 where 子句中使用这样的函数会使你的查询运行得更慢。

如果 JW 关于 PreparedStatements 的评论包括使用查询参数（我也不使用 php），这是非常好的建议。它们不仅可以提高应用程序的安全性，而且可以转义特殊字符，例如撇号。由于您正在执行字符搜索，因此如果用户向您的应用程序提交了诸如“Dave 的键盘”之类的内容，您不希望您的查询崩溃。

# python - using python sched module and enterabs to make a function run at a certain time

> ID：15594956
> 
> 赞同：2
> 
> 时间：2013-03-24T03:47:01.007
> 
> 标签：python, scheduler

I cannot seem to find a simple example of how to schedule an event in Python.

I want to be able to pass a date and time string as an argument into a function.

For example:

String: "m/d/Y HH:MM" would set the time for a future function to run, after the code has been executed. So, like a function that is waiting to go off after I run it.

It seems like the main problem is formatting the string correctly, but a simple example would really help to see how to 'schedule' a function to run.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:13:04.667

You don give enough context to understand what are you trying to do in a larger frame - but, generally speaking - "this is not how it works" in Python.

An "ordinary" Python program is a single-threaded, synchronous program - it will run one task, after another, after another, when everything is done, the program exits, and the interpreter exits along with it.

so, something along (with a fictitious "schedule" function):

```
def main():
    print("Hello World")
    schedule(60, main)

main() 
```

would not work in Python, if the call to schedule would return immediately - the main function would exit, and the program would try to resume after the `main()` call, and terminate. There needs to be a piece of code left running, which can count time, and delays, maybe receive network or user generated events, and dispatch them to previously arranged callback functions in order for a program to keep running.

Such a piece of code, which can account for time and dispatch calls, is usually called a "reactor" - and there is none running in a plain Python program. Unlike, say, in a JavaScript program, where the browser, or other JavaScript environment provides such hosting by default.

That is why most Python web or network frameworks, all GUI toolkits, provide such a core - it is usually called at the end of the one main's script and is a method or function named `mainloop` or `serve_forever`, `start` and so on. From that point on, your main script, which had set the appropriate callbacks, scheduled things and so on, stops - the reactor will be the piece of code calling things.

That is where I say your question misses the context of what you want to do: at first you just want to test some scheduling - but afterwards you will want that inside a larger system - that system should be built using an appropriated framework for your "real task" at hand, for example Django, tornado, pyramid, if it is a web-server system, gtk, Qt, Tk if it is a GUI program, PyOgre, kivy, pyglet if it is a multimedia program, twisted for a generic network server of another protocol, or some other thing, like celery or camaelia - these are only general examples.

That said, Python's standard library does offer a "generic" scheduler function - it does implement such a loop, with the bare core of functionality. If you are doing nothing else, and nothing fancy, it will block there until it reaches the time to call your scheduled function, at which point it will exit, and resume the control to your main program. If your called function schedule other things, it will continue running, and so on.

See the documentation and example at: [http://docs.python.org/2/library/sched.html](http://docs.python.org/2/library/sched.html)

You can use functions from the datetime module instead of time.time to set r absolute timings as you asking for. Also check the documentation there to threading.Timer - which in a naively way can do more or less what you have in mind, if you want to run a simple function after a given delay, in parallel to whatever other code is running and don't want to rewrite your application to be event based - but simpler as it may seen, it will have many drawbacks in a larger system - you should pick one of the frameworks listed.

# javascript - String manipulation in JS function

> ID：15594963
> 
> 赞同：0
> 
> 时间：2013-03-24T03:47:36.287
> 
> 标签：javascript, jquery

I have a string say

```
((C1 AND C2) OR C3 AND C4) 
```

now if input is '2' i am supposed to remove C2 and next operator which is OR, and rearrange the numbering... so output is

```
((C1 AND ) C2 AND C3). 
```

**Test String input and output

```
----------STRING --------------------------- INPUT ---------------EXPECTED OUTPUT

1\. (C1 AND C2 OR C3 AND C4)                <<3(Input)>>          (C1 AND C2 OR C3)

2\.  C1 OR C2 AND (C3 OR C4) AND C5         <<2(Input)>>          C1 OR (C2 OR C3) AND C4 
```

So i just need to delete the 'C' with the given input no and next operator if there is any , retain all brackets and re no the 'C' with ascending nos. this has to be done in a JS function

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T07:34:30.157

只要输入保持一致，那么这些方面的内容可能会满足您的需求。我知道您说“保留所有括号”，但这会产生丑陋的输出，所以我选择更正括号。你可以很容易地取出那部分。

```
function handleInput(str, input){
  var inArray = str.split(' ');
  inArray.forEach(function(v,i,a){
    if(v.indexOf("C"+input) > -1){
      if(v.indexOf('(') > -1 || v.indexOf(')') > -1)
        inArray = fixParen(inArray, input, v, i);
      else if(i+2 < a.length){
        inArray.splice(i,2);
        inArray = fixNumbers(inArray);
      }
      else
        inArray.splice(i-1,2);
      console.log(inArray.join(' '));
    }
  });
}
function fixParen(inArray, input, elem, index){
  var elemArray = elem.split('');
  var parenNumber = 0;
  if(elem.indexOf('(') > -1){
    elemArray.forEach(function(v){
      if(v == '('){
        parenNumber++;
      }
    });
    for (var i = index+2; parenNumber > 0; i+=2){
      var tempElem = inArray[i].split('');
      var n = tempElem.indexOf(')');
      if(n > -1){
        tempElem.splice(n,1);
        inArray[i] = tempElem.join('');
        parenNumber--;
      }
    }
    inArray.splice(index,2);
    return fixNumbers(inArray);
  }
  else{
    elemArray.forEach(function(v){
      if(v == ')'){
        parenNumber++;
      }
    });
    for (var i = index-2; parenNumber > 0; i-=2){
      var tempElem = inArray[i].split('');
      var n = tempElem.indexOf('(');
      if(n > -1){
        tempElem.splice(n,1);
        inArray[i] = tempElem.join('');
        parenNumber--;
      }
    }
    inArray.splice(index,2);
    return fixNumbers(inArray);
  }
}
function fixNumbers(inArray){
  var count = 1;
  inArray.forEach(function(v,i,a){
    if(v.indexOf('C') > -1){
      var tempElem = v.split('');
      var n = tempElem.indexOf('C');
      tempElem.forEach(function(val,ind,arr){
        if(parseInt(val,10))
          tempElem.splice(ind,1);
      });
      tempElem.splice(n+1,0,count);
      inArray[i] = tempElem.join('');
      count ++;
    }
  });
  return inArray;
} 
```

这实际上是一个比看起来简单得多的问题。首先，您应该注意字符串的每个重要部分均由“ ”分隔。这使我们可以使用`.split(' ')`为我们提供所有有用部分的精美数组。接下来，括号只能放在`C`减少所需逻辑量的元素上。然后，every在某个时候`(`有一个对应`)`项，允许我们完全忽略测试字符串的长度，因为我们可以假设存在一个带有匹配括号的元素。最后只有两种情况，它是最后一个`C`元素，因此我们删除了之前的运算符，或者它不是最后一个，我们删除了之后的一个。除了括号匹配，这个逻辑很短。

# android - NOT_LICENSED cannot be resolved or is not a field

> ID：15594964
> 
> 赞同：0
> 
> 时间：2013-03-24T03:47:53.760
> 
> 标签：android, apk

I have been trying to follow the documentation available here:

[http://developer.android.com/google/play/expansion-files.html#Preparing](http://developer.android.com/google/play/expansion-files.html#Preparing)

I have tried to follow what it says to do ...

If you're using Eclipse, create a project for each library and add it to your app:

Create a new Library Project for the License Verification Library and Downloader Library. For each library:

*   Begin a new Android project.

*   Select Create project from existing source and choose the library from the /extras/google/ directory (market_licensing/ for the License Verification Library or market_apk_expansion/downloader_library/ for the Downloader Library).

Of course there was no `market_licensing` or `market_apk_expansion/downloader_library/` directories so I guess that I am suppose to use the `play_licensing` and `market_apk_expansion/downloader_library` directories. :/

*   Specify a Project Name such as "Google Play License Library" and "Google Play Downloader Library" Click Finish.

*   Add the License Verification Library to the Downloader Library's project properties (same process as steps 2 and 3 below).

*   Right-click the Android project in which you want to use APK expansion files and select Properties. In the Library panel, click Add to select and add each of the libraries to your application.

So yes I have read the docs and did my best to follow them, but now I get this error ...![enter image description here](../Images/3fc10d0e380a951da6a3ec3ba1ef371d.png)

I am starting to think there is a bug in the latest Android SDK here is what the properties of the Downloader Lib look like right after installing and add to ecliplse ... ![enter image description here](../Images/33285c2231b66468f314ccd5ee8c19ae.png)

... so I updated it like so ...

![enter image description here](../Images/dd18a5b537610df2f95292c6d1207e3b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:03:03.880

为了纠正这个问题，我必须删除我已经导入的下载器库，然后使用 Android SDK 管理器卸载“Google Play APK 扩展库”，然后重新安装它。然后在 eclispe 中重新导入下载器库，然后“右键单击”下载器项目并删除坏库“market_licensing”并添加正确的库“play_licensing”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T07:37:49.207

我解决了。

在这种情况下，导入的类`Policy`是基本的 google 类。

所以删除导入行`import java.security.Policy`

而不是添加导入行`import com.google.android.vending.licensing.Policy`

# r - straight quotes don't read in gdata:::read.xls

> ID：15594967
> 
> 赞同：0
> 
> 时间：2013-03-24T03:48:16.443
> 
> 标签：r, gdata

I am playing with reading in text in different formats and I noticed that using a csv file that looks like this:

```
A   B
The dog "was" here  yes 
```

the `read.csv` function reads the data in how I'd expect with the straight quotes.

```
> read.csv("Book1.csv")
                   A    B
1 The dog "was" here yes 
```

However, when converting the file as a .xlsx and using `gdata:::read.xls` the quotes are read in as `\\`, not as expected. Is this an error in something I'm not setting? If not is this something I should report to the package maintainer?

```
library(gdata)
read.xls("Book1.xlsx")

> read.xls("Book1.xlsx")
                     A    B
1 The dog \\was\\ here yes 
```

# python - about the while true loop

> ID：15594968
> 
> 赞同：0
> 
> 时间：2013-03-24T03:48:57.813
> 
> 标签：python, loops, while-loop, iteration

```
i = float (raw_input("Enter i"))
Pd = int (raw_input("Enter Pd"))

while True:
    P1= (i-6.95)/(2*9.68*0.0001)
    P2= (i-7.051)/(2*7.378*0.0001)
    P3= (i-6.531)/(2*1.04*0.001)
    e= Pd-P1-P2-P3

    if e<=1 :
       F1=9.68*0.0001*P1*P1 + 6.95*P1 + 749.55
       F2=7.738*0.0001*P2*P2 + 7.051*P2 + 1285
       F3=1.04*0.001*P3*P3 + 6.531*P3 + 1531
       F= F1+F2+F3
       print 'Total cost F is {0}\n'.format(F)
       print P1
       print P2
       print P3
       break
    else :           
       i=i + 0.1(i) 
```

I wrote a simple while loop like this to calculate the power demand and generation. to entre a power demand Pd #and incremental cost. I can calculate each power generator output P1 P2 and P3\. there is a iteration required #which is when Pd-the sum of P1 P2 and P3, should be less than one.

when I run it by inputting i=8.5 and pd=2500, the results are 800.619834711981.973434535, 946.634615385\. it means #the thing never iterate since the sum of this three are not 2500.

can someone tell me why is not iterating and what is wrong with my while true loop.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:57:06.777

e 的值在第一次迭代时是 -229.22788463，所以你要跳出循环。

来自 Python[控制流](http://docs.python.org/2/tutorial/controlflow.html)文档：

> 与 C 中的`break`语句一样，该语句打破了最小的封闭`for`或`while`循环。

根据您的问题：

> 需要一个迭代#这是当 Pd-P1 P2 和 P3 的总和应该小于 1 时。

我认为您想通过以下方式计算 e：

```
e = Pd - (P1 + P2 + P3) 
```

不过还不清楚。也许你只是希望你的 if 语句是：

```
if (P1 + P2 + P3) < Pd: 
```

# java - Java argo JSON如何？

> ID：15594976
> 
> 赞同：0
> 
> 时间：2013-03-24T03:50:29.420
> 
> 标签：java, xml, json, jsp

我的数据库结构变大了。

首先，我对 JSON 和 XML 感到困惑。然后，我选择了 JSON 将数据存储在数据库中。

我正在尝试编译官方网站上给出的示例。但我无法这样做。

这是我的代码：

```
import static argo.jdom.JsonNodeFactories.*;

public class argojson
{
    public static void main(String[] args) 
    {
        JsonRootNode json = object( field("name", string("Black Lace")), field("sales", 

        number("110921")), field("totalRoyalties", number("10223.82")), field("singles", 

        array( string("Superman"), string("Agadoo") )) );

    }
} 
```

**错误**

```
JsonRootNode error: cannot find symbol 
```

**官方网站**

```
http://argo.sourceforge.net/documentation.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:58:15.813

您是否真的在编译时将 jars 包含在类路径中？

查看[http://argo.sourceforge.net/javadoc/argo/jdom/JsonRootNode.html](http://argo.sourceforge.net/javadoc/argo/jdom/JsonRootNode.html)看起来你需要

```
import argo.jdom.JsonRootNode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:54:16.673

您在代码中传递的参数

```
object( field("name", string("Black Lace")), field("sales", 

number("110921")), field("totalRoyalties", number("10223.82")), field("singles", 

array( string("Superman"), string("Agadoo") )) ) 
```

实际上不是 json 数据。首先了解一下json数据格式。然后尝试给出正确的论点。

您可以使用 jakson 或 Gson 将数据与 java 对象相互转换。

# python - 将迭代器传递给多个消费者？

> ID：15594981
> 
> 赞同：9
> 
> 时间：2013-03-24T03:52:14.740
> 
> 标签：python

是否可以在多个消费者之间“流水线化”使用发电机？

例如，具有这种模式的代码很常见：

```
def consumer1(iterator):
    for item in iterator:
        foo(item)

def consumer2(iterator):
    for item in iterator:
        bar(item)

myiter = list(big_generator())
v1 = consumer1(myiter)
v2 = consumer2(myiter) 
```

在这种情况下，多个函数完全使用同一个迭代器，因此需要将迭代器缓存在列表中。由于每个消费者都耗尽了迭代器，`itertools.tee`所以没有用。

我经常看到这样的代码，我总是希望我能让消费者一次消费一个项目，而不是缓存整个迭代器。例如：

1.  `consumer1`消耗`myiter[0]`
2.  `consumer2`消耗`myiter[0]`
3.  `consumer1`消耗`myiter[1]`
4.  `consumer2`消耗`myiter[1]`
5.  ETC...

如果我要组成一个语法，它看起来像这样：

```
c1_retval, c2_retval = iforkjoin(big_generator(), (consumer1, consumer2)) 
```

您可以接近线程或多处理和`tee`d 迭代器，但线程消耗的速度不同，这意味着缓存在内部的值 deque`tee`可能会变得非常大。这里的重点不是利用并行性或加速任务，而是避免缓存迭代器的大部分。

在我看来，如果不修改消费者，这可能是不可能的，因为控制流在消费者手中。但是，当消费者实际使用迭代器时，控制权会传递到迭代器的`next()`方法中，所以也许可以以某种方式反转控制流，以便迭代器一次阻塞消费者，直到它可以喂饱它们？

如果这是可能的，我还不够聪明，不知道怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:57:54.533

这不行吗？或者您是否需要整个迭代器，所以每个这样的副本都行不通？如果是这样，那么我认为您要么必须创建一个副本，要么生成两次列表？

```
for item in big_generator():
    consumer1.handle_item(item)
    consumer2.handle_item(item) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:39:43.397

由于不更改消费者代码的限制（即其中有一个循环），您只剩下两个选择：

1.  您已经在问题中包含的方法：将生成的项目缓存在内存中，然后对其进行多次迭代。
2.  在一个线程中运行每个消费者，并实现某种 synchronized- `itertools.tee`，一个大小为 1 的缓冲区，它阻塞服务项目`i+1`，直到项目`i`已提供给所有消费者。

没有其他选择。您无法实现以下所有目标，因为它们相互矛盾：

1.  有发电机
2.  有一个循环来消耗所有这些
3.  然后，（串行）*在前*一个循环完成后，有另一个循环再次消耗所有它
4.  仅在使用时将 O(1) 项保存在内存（或磁盘等）中
5.  不重新生成（即不重新创建生成器）

如果要重复使用生成的项目，则必须将它们存储在*某个地方。*

如果更改消费者的代码是可以接受的，显然@monkey 的解决方案是最简单和最直接的。

# submenu - Jquery在点击响应式站点时显示子菜单

> ID：15594982
> 
> 赞同：0
> 
> 时间：2013-03-24T03:52:16.613
> 
> 标签：submenu, jquery

我正在使用一个脚本，该脚本在我的页面顶部为响应式网站的移动版本添加一个菜单图标。我将 2 个水平导航栏（一个在页面顶部，一个在页面下方）组合成一个带有子菜单的垂直菜单。那部分工作得很好。

不过，我想再添加一项功能，即在单击父级之前隐藏子菜单 - 这样初始移动菜单就不会那么长。10 个顶级链接中有 3 个具有子菜单。这三个本身就是实时链接，而不是占位符。所以我需要打开子菜单并让父母和孩子都可以点击。

这是在网站的移动版本中单击时显示整个菜单的 jquery：

```
jQuery(document).ready(function($){
/* prepend menu icon */
$('#topwrap').prepend('<div id="menu-icon"></div>');

/* toggle nav */
$("#menu-icon").on("click", function(){
$("#topnav,#mainnav").slideToggle();
$(this).toggleClass("active");

});
}); 
```

这是菜单移动版的 CSS：

```
#menu-icon {
display: block;
float: right;
width: 65px;height: 62px;
margin: 10px 0 0 20px;
background-image: url(images/menuicon.png);
background-repeat: no-repeat; background-position: right top;
}
#topnav {display:none;
z-index: 50; 
position: absolute; 
top:110px; 
right:30px;
background-color: #fff5b9;width: 70%; height: auto;
margin: 0 auto 10px auto;
padding: 10px;
-webkit-border-radius: 10px 10px 0 0;
border-radius: 10px 10px 0 0;
border-top: 2px solid #8e9360;
border-right: 2px solid #8e9360;
border-left: 2px solid #8e9360;
 text-decoration: none; 
 }
#topnav li {
margin: 0 0 0 -10px;
padding-bottom: 15px;
list-style: none;
}

#mainnav {
display: none;
z-index: 50;
position: absolute; 
top:320px; 
right:30px;
background-color: #fff5b9;width: 70%; margin: -10px auto 10px auto;
padding: 10px;
-webkit-border-radius: 0 0 10px 10px;
border-radius:0 0 10px 10px;
border-right: 2px solid #8e9360;
border-left: 2px solid #8e9360;
border-bottom: 2px solid #8e9360;
text-decoration: none;
}
#mainnav li {margin: 0 0 0 -10px;
padding: 10px 0;
list-style: none;
}
#mainnav ul ul {
margin-bottom: 0;
}

#topnav a, #mainnav a {text-decoration: none;
font: 600 14px/14px 'Open Sans', sans-serif;
color: #1e320d;} 
```

html 是标准的嵌套 ul, li, ul, li

我想将脚本包含在 mobilemenu.js 脚本或同一文档中，因为我需要它仅适用于网站移动版本中的子菜单。

我是一个 HTML/CSS 人，擅长剪切粘贴 php 和 js/jquery，但不会编写 js/jquery 或 php。网站是用 WordPress 构建的，我仍在设计和调整主题，还没有内容，但你可以在

```
http://64.17.148.68/ 
```

露营、小屋和河流旅行的子菜单

非常感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:14:29.430

尝试

```
// first hide all submenus
$(".sub-menu").hide();

// add click handler to links you know have a submenu
$("a:contains('Camping'), a:contains('Cabins'), a:contains('River Trips')").click(
    // find next submenu and show/hide it
    $(this).parent("li").next(".sub-menu").slideToggle();
); 
```

它没有经过测试，我很确定它不起作用:)，但应该让你走上正确的道路。

# c# - UserControl 的 ButtonClick 事件中的 RegisterStartupScript

> ID：15594983
> 
> 赞同：0
> 
> 时间：2013-03-24T03:52:27.107
> 
> 标签：c#, javascript

我有一个带有表单和按钮的用户控件。在按钮单击事件背后的代码中，我将表单中的数据保存到数据库中。保存成功后，我想弹出一个javascript警报。我尝试了以下方法：

```
Control Caller = this;
ScriptManager.RegisterStartupScript(Caller, Caller.GetType(), " ", 
   @"<script language=javascript>alert('Asset successfully saved');</script>", true); 
```

这行不通。我做错了什么，甚至我该如何调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:15:51.990

这是因为您已将 addScriptTags 设置为 true，并且您还尝试在 js 代码中添加自己的脚本标签。将此值设置为 false 并重试或删除 js 中的脚本块标签。[您可以在msdn 页面](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)上找到更多详细信息。

# php - 包中的 Laravel 4 静态外观设置

> ID：15594984
> 
> 赞同：0
> 
> 时间：2013-03-24T03:52:41.047
> 
> 标签：php, laravel, laravel-4

我正在玩包，当我这样做时，我可以让我的代码工作（在我的控制器中）：

```
App::make('Assets')->js('bla'); 
```

现在我想设置一个静态外观，所以我可以这样做：

```
Assets::js('bla'); 
```

为此，我遇到了错误。我一直在关注[这个博客条目](http://jasonlewis.me/article/laravel-4-develop-packages-using-the-workbench)，到目前为止还没有遇到任何问题。但是现在我遇到了“调用未定义方法”错误。

我不确定您需要查看什么代码，所以这里是所有内容：[https ://github.com/JoeCianflone/msl/tree/jc-working](https://github.com/JoeCianflone/msl/tree/jc-working)

具体来说这里是我的工作台：[https ://github.com/JoeCianflone/msl/tree/jc-working/workbench/Joecianflone/Assets](https://github.com/JoeCianflone/msl/tree/jc-working/workbench/Joecianflone/Assets)

这是我弄乱它的控制器：[https ://github.com/JoeCianflone/msl/blob/jc-working/app/controllers/HomeController.php](https://github.com/JoeCianflone/msl/blob/jc-working/app/controllers/HomeController.php)

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:44:43.020

看起来这是命名空间的问题，我通过改变这个来让它工作：

```
<?php namespace Joecianflone\Assets\Facades;

use Illuminate\Support\Facades\Facade;

class Assets extends Facade {

/**
 * Get the registered name of the component.
 *
 * @return string
 */
protected static function getFacadeAccessor() { return 'Assets'; }

} 
```

对此：

```
class Assets extends \Illuminate\Support\Facades\Facade {

/**
 * Get the registered name of the component.
 *
 * @return string
 */
protected static function getFacadeAccessor() { return 'Joecianflone\Assets\Assets'; }

} 
```

我不确定为什么教程中的代码有效，但我的却没有。我一定是跳过了一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:38:31.343

只是一个旁注，如果您打算与社区共享您的代码（请这样做），我鼓励您使用 5.3 语法。Laravel 要求是 5.3，所以不要在你的包中使用 5.4。

# c# - 如何临时写入xml元素并在方法执行后清除写入的元素值？

> ID：15594986
> 
> 赞同：0
> 
> 时间：2013-03-24T03:53:16.267
> 
> 标签：c#, xml, linq-to-xml

我有一个看起来像这样的 xml 模板：

```
<?xml version="1.0" encoding="utf-8" ?>
 <EmailTemplate>
   <subject></subject>
   <displayName></displayName>
   <Message1>
   </Message1>
   <Copyright></Copyright>
 </EmailTemplate> 
```

我正在使用 LINQ 在方法执行时将值写入元素。在我写入值后，我使用 xslt 转换并以相同的方法获取 html 输出。一切正常。但我想要的是我希望这个 xml 看起来像上面。我的意思是在方法成功执行后元素不应该包含任何值。目前，一旦执行该方法，xml 就会包含值。我写入 xml 的代码如下所示：

```
 var xmlElement = XElement.Load(@"myxmlfile.xml");

        var element3 = xmlElement.Elements("subject").Single();
        element3.Value = subject;

        var element4 = xmlElement.Elements("displayName").Single();
        element4.Value = displayName;

        xmlElement.Save(@"myxmlfile.xml"); 
```

注意：如果我在转换过程中不包括最后一行（xmlelement.save ...），则不会获取值。欢迎任何帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:00:51.667

删除对 的调用`Save`。只需在内存中编辑 XML。该`Save`方法用于修改磁盘上的 XML 文件。如果您不希望那样，请不要调用该`Save`方法。

如果每次需要创建 HTML 时都需要 XML 的新副本，那么我建议将 XML 文件的字符串内容加载到内存中，这样您就不必每次都从磁盘读取，并使用[a](http://msdn.microsoft.com/en-us/library/bb299692.aspx)`StringReader`创建[XML 文档](http://msdn.microsoft.com/en-us/library/bb299692.aspx)。

根据您提供的代码，您似乎不需要每次都加载新的 XML 文档，因为您只需用新值覆盖内存中的现有值。

# java - 抽象，OOP 与非 OOP 的概念

> ID：15594987
> 
> 赞同：2
> 
> 时间：2013-03-24T03:53:17.127
> 
> 标签：java, oop

我正在阅读 OOPS 概念并陷入抽象。我无法完全理解这个概念。因为我觉得它不只属于 OOPS。它也用在 C 中。但是 java 抽象与 C 语言抽象有何不同。我知道这对这个论坛来说不是一个好问题，但我无法得到完美的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:17:10.307

抽象意味着隐藏或将一部分代码的复杂细节与另一部分分离。比如说，你必须使用一种进行复杂计算并给出一些结果的方法。因此，与其内联编写方法，不如将其编写在仅公开签名（参数和返回类型）的方法中。这样，您的调用者（方法）仍然不知道方法背后的复杂代码。

一般来说，当你在 c/c++ 中使用库函数或在 java 中使用 API 时，它也是一种抽象。

因此，确实，抽象不仅仅是 OOP，而是一个通用概念，可以应用于任何地方（甚至超出编程范围）。

# c++ - objcopy 将目录路径名添加到符号名称之前

> ID：15594988
> 
> 赞同：13
> 
> 时间：2013-03-24T03:53:38.350
> 
> 标签：c++, c, objcopy

我打算使用`objcopy`将文本文件的二进制形式包含到可执行文件中。（在运行时我需要文件作为字符串）。这工作正常，直到链接器需要从符号名称中找到引用。问题是`objcopy`在符号名称前面加上文件的路径名。由于我使用 GNU Autotools 来发送包，所以这个前置路径名发生了变化，我不知道在 C/C++ 程序中使用什么外部链接器符号。

```
nm libtest.a |grep textfile
textfile.o:
00001d21 D _binary__home_git_textfile_end
00001d21 A _binary__home_git_textfile_size
00000000 D _binary__home_git_textfile_start 
```

`libtest.a`使用（从 Makefile.am 中提取）生成：

```
SUFFIXES = .txt
.txt.$(OBJEXT):
    objcopy --input binary --output elf32-i386 --binary-architecture i386 $< $@ 
```

我怎样才能告诉`objcopy`我们文件名的词干作为链接器符号？还是有其他解决问题的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-23T23:42:29.807

[.incbin](http://sourceware.org/binutils/docs/as/Incbin.html)汇编器指令支持将原始数据包含到 ELF 中的通用方法。

诀窍是创建可能如下所示的模板 .S 文件：

```
 .global foo_start
foo_start:
        .incbin "foo.raw"

        .global foo_end
foo_end: 
```

这个文件是通过 cpp 预处理的，所以我们不必在那里硬编码文件名，例如。我们可以写：

```
 .incbin __raw_file_path__ 
```

...然后在编译时传递它：

```
gcc -D__raw_file_path__='"data/foo.png"' foo.S -c -o data/foo.o 
```

最后，当我们自己准备 .S 文件时，我们可以添加一些额外的数据和/或信息。如果您包含原始“文本文件”并希望这些作为 C 字符串可用，您可以在原始数据之后添加 '0' 字节：

```
 .global foo_start
foo_start:
        .incbin "foo.raw"

        .global foo_end
foo_end:    
        .byte 0

        .global foo_size
foo_size:
        .int foo_end - foo_start 
```

如果您想要充分的灵活性，您当然可以手动预处理文件以更改它的任何部分，例如。

```
.global @sym@_start
@sym@_start:
       .incbin "@file@"
       .global @sym@_end
@sym@_end: 
```

...然后编译它：

```
sed -e "s,@sym@,passwd,g" -e "s,@file@,/etc/passwd," <foo.S.in | gcc -x assembler-with-cpp - -o passwd.o -c 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-03T08:27:57.197

Somewhat ironically you can use `objcopy` to solve the problem via the `--redefine-sym` option that allows renaming of symbols...

> If I use objcopy to create an object file from a PNG in another directory:
> 
> ```
> $ objcopy -I binary -O elf64-x86-64 -B i386 --rename-section .data=.rodata,alloc,load,data,contents,readonly ../../resources/test.png test_png.o 
> ```
> 
> The resulting object has the following symbols:
> 
> ```
> $readelf -s test_png.o -W
> 
> Symbol table '.symtab' contains 5 entries:
>    Num:    Value          Size Type    Bind   Vis      Ndx Name
>      0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND
>      1: 0000000000000000     0 SECTION LOCAL  DEFAULT    1
>      2: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT    1 _binary_______resources_test_png_start
>      3: 0000000000003aaa     0 NOTYPE  GLOBAL DEFAULT    1 _binary_______resources_test_png_end
>      4: 0000000000003aaa     0 NOTYPE  GLOBAL DEFAULT  ABS _binary_______resources_test_png_size 
> ```
> 
> These can then be renamed:
> 
> ```
> $objcopy --redefine-sym _binary_______resources_test_png_start=_binary_test_png_start test_png.o
> $objcopy --redefine-sym _binary_______resources_test_png_size=_binary_test_png_size test_png.o
> $objcopy --redefine-sym _binary_______resources_test_png_end=_binary_test_png_end test_png.o 
> ```
> 
> Resulting in an object with the symbol names that objcopy would have generated if the PNG had been located in the current directory:
> 
> ```
> $readelf -s test_png.o -W
> 
> Symbol table '.symtab' contains 5 entries:
>    Num:    Value          Size Type    Bind   Vis      Ndx Name
>      0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND
>      1: 0000000000000000     0 SECTION LOCAL  DEFAULT    1
>      2: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT    1 _binary_test_png_start
>      3: 0000000000003aaa     0 NOTYPE  GLOBAL DEFAULT    1 _binary_test_png_end
>      4: 0000000000003aaa     0 NOTYPE  GLOBAL DEFAULT  ABS _binary_test_png_size 
> ```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-04-23T14:55:26.810

我使用的另一种选择是到`cd`源目录，然后给出`objcopy`源的基本名称。在`bash`中，这将是：

```
cd $(dirname $SOURCE)
objcopy ... $(basename $SOURCE) $TARGET 
```

这样生成的符号总是`_binary_file_name_xxx`没有路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-02T13:21:31.137

我不得不用 cmake 来做这件事，我最终使用 /dev/stdin 作为输入来获得一致的符号名称，然后通过 string(MAKE_C_IDENTIFIER ...) 重新定义符号，然后在结果上使用 objcopy --redefine-sym目标文件。

结果函数是：

```
function(make_binary_object __file)
    get_filename_component(__file_name ${__file} NAME)
    set(__object ${CMAKE_CURRENT_BINARY_DIR}/${__file_name}.obj)
    string(MAKE_C_IDENTIFIER ${__file_name} __file_c_identifier)
    add_custom_command(OUTPUT ${__object}
        COMMAND ${CMAKE_OBJCOPY}
            --input-format binary
            --output-format elf64-x86-64
            --binary-architecture i386:x86-64
            /dev/stdin
            ${__object} < ${__file}
        COMMAND ${CMAKE_OBJCOPY}
            --redefine-sym _binary__dev_stdin_start=_binary_${__file_c_identifier}_start
            --redefine-sym _binary__dev_stdin_end=_binary_${__file_c_identifier}_end
            --redefine-sym _binary__dev_stdin_size=_binary_${__file_c_identifier}_size
            ${__object}
        WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
        DEPENDS ${__file})
    set_source_files_properties(${__object} PROPERTIES EXTERNAL_OBJECT TRUE)
endfunction() 
```

你可以像这样使用它：

```
make_binary_object(index.html)

add_executable(my_server
    server.c
    ${CMAKE_CURRENT_BINARY_DIR}/index.html.obj) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-24T08:06:21.897

一个简单的解决方案是将文本文件转换为可用于初始化 char 数组的文件。所以，你会得到“ABC012”的 0x41,0x42,0x43,0x30,0x31,0x32。然后您可以#include 这个字节序列。您还可以*转义*所有非 ASCII 字符，而不是将所有内容转换为字节，以便生成的包含文件中的大部分文本仍然可读。

# symfony1 - Symfony1.2 组件问题

> ID：15594992
> 
> 赞同：0
> 
> 时间：2013-03-24T03:53:59.480
> 
> 标签：symfony1, components, partial

我正在努力调用另一个模块中的组件，其中被调用的组件使用自己的操作::functionname

例如

module/user/actions/actions.class.php 具有 getUserName() 之类的功能我在同一个模块的组件中调用 userActions::getUserName() 函数，它工作正常，即

文件：模块/用户/操作/components.class.php

```
public function executeShowUsername () {
$this->userName =userActions::getUserName();
} 
```

在组件模板 (module/user/templates/_showUsername.php) echo $userName; （工作正常）

现在，问题是：当在其他模块中包含 ('user','showUserName') 组件时，如文件：module/generate/template/indexSuccess.php

```
<?php include_component('user', 'showUserName'); ?> 
```

我收到错误：

> 致命错误：在第 86 行的 /myproject/apps/frontend/modules/user/actions/components.class.php 中找不到类“userActions”

我该如何解决？如果它正在调用像 userActions::getUserName() 这样的函数，我们不能在其他模块中调用组件吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:53:21.560

如果您正在使用用户会话，您可以直接在布局模板中访问它（请参阅[http://symfony.com/legacy/doc/gentle-introduction/1_4/en/06-Inside-the中的用户会话部分-控制器层](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/06-Inside-the-Controller-Layer)）：

`<?php echo $sf_user->getAttribute('nickname') ?>`

否则，将变量传递给组件（请参阅[http://symfony.com/legacy/doc/gentle-introduction/1_4/en/07-Inside-the-View-Layer](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/07-Inside-the-View-Layer)中的组件部分）：

[来自清单 7-13 - 将参数传递给组件及其模板]

```
// Call to the component
// rather than calling userActions::getUserName() in the component.class
// put your code from userActions::getUserName() into the model (or other accessible place)
// then call the component
<?php include_component('user', 'showUserName', array('MyUserName' => 'myuser')) ?>

// In the component itself
echo $this->MyUserName;
/* results in */ => 'myuser'

// In the _show_user_name.php partial
echo $MyUserName;
/* results in */ => 'myuser' 
```

# ruby-on-rails-3 - 具有功能的红宝石查询

> ID：15594993
> 
> 赞同：0
> 
> 时间：2013-03-24T03:54:00.003
> 
> 标签：ruby-on-rails-3, math

```
# search for a particular date (between two other dates)    
  a = self.where('created_at > ? AND created_at < ?', yes, tom)
# search for a particular location
  a = a.each do |loc|
    if coorDist(loc.lat, loc.lng, lat, lng) < dist
      return loc
    end
  end 
```

我试图返回一个像`a`这里的初始值一样的哈希。如何遍历哈希并收集满足此`if`语句条件的实体？它在那里的方式，它只返回第一个结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:09:50.617

```
a.select! do |loc|
  coorDist(loc.lat, loc.lng, lat, long) < dist
end 
```

如果您只是返回哈希，请使用`select`而不是`select!`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T04:18:41.453

代替[`#each`](http://api.rubyonrails.org/classes/ActiveRecord/Result.html#method-i-each)and `if`，使用[`#select`](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-select).

```
# search for a particular location
a = a.select do |loc|
  coorDist(loc.lat, loc.lng, lat, lng) < dist
end 
```

# python - 将 self 传递给 self 函数中的另一个类函数

> ID：15594994
> 
> 赞同：2
> 
> 时间：2013-03-24T03:54:18.387
> 
> 标签：python, class, self

我有两个类，第一个有一个函数 move(creature, board)。然后在生物类中有一个调用move的函数，那么在生物类中如何将当前生物传递给move函数呢？它应该只是 move(self, self.board)，因为当我尝试得到“来自导入的未定义变量：move”错误时？

以下是相关代码：

生物：

```
class creature: 
    def __init__(self, social, intelligence, sensory, speed, bravery, strenght, size):
        self.traits = [social, intelligence, sensory, speed, bravery, strenght]
        self.x = 0
        self.y = 0
        self.hunger = 10
        self.energy = 30
        self.shelter = 0
        self.dominance = 0
        self.boardSize = size - 1
        self.SOCIAL = 0
        self.INTELLIGENCE = 1
        self.SENSORY = 2
        self.SPEED = 3
        self.BRAVERY = 4
        self.STRENGTH = 5
 ...
 def performAction(self, action, location):
       ...     
       if action == "storeFood":
          food = location.vegetation
          location.vegetation = -1
          simulation.move(self, self.shelter)
          self.shelter.foodStorage += food
       ... 
```

模拟：

```
class simulation():
    def __init__(self, x):
        self.creatures = {creature.creature():"", creature.creature():"", }
        self.map = land.landMass
        self.lifeCycles = x
        self.runStay = ["rfl", "rbf", "rbl", "rbf", ]
        self.befriend = ["bbl", "bbf"]
        self.fight = ["fbl", "fbf", "bfl", "bff", "ffl", "fff"]
...    
    def move(self, creature, target):
            map[creature.x][creature.y].creatures.remove(creature)
            creature.energy -= abs(map[creature.x][creature.y].elevation - target.elevation) / creature.getSpeed() 
            target.creatures.append(creature)
            creature.x, creature.y = target.location
            ... 
```

编辑：好的，所以我已经解决了这个问题。Python 需要`simulation.simulation.map(self, self.shelter)`我假设这意味着它不仅需要类文件，还需要该类的实例。所以新的问题是我是否必须在其他地方创建该实例然后将其传递？或者这是否适用于其他地方的模拟实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T05:10:50.440

将类继承`simulation`到`creature`类中：

```
class Creature(Simulation): # I have inherited the functions from Simulation into Creature
    ... 
```

现在`simulation.move(self, self.shelter)`，您想要的是：

```
self.move(yourparameters) 
```

如果您注意到，我将您的班级名称大写。[这样做很好。](http://www.python.org/dev/peps/pep-0008/#class-names)

有关类继承的更多信息，请查看 [查看文档]。（[http://docs.python.org/2/tutorial/classes.html#inheritance](http://docs.python.org/2/tutorial/classes.html#inheritance)）

# c++ - 如何使 cin >> 不将浮点数转换为整数？

> ID：15594995
> 
> 赞同：0
> 
> 时间：2013-03-24T03:54:36.797
> 
> 标签：c++, integer, cin

我有以下简单的代码：

```
#include <iostream>
int main()
{
   int a;
   std::cout << "enter integer a" << std::endl;
   std::cin >> a ;

   if (std::cin.fail())
   {
      std::cin.clear();
      std::cout << "input is not integer, re-enter please" <<std::endl;
      std::cin >>a;
      std::cout << "a inside if is: " << a <<std::endl;
   }
   std::cout << "a is " << a <<std::endl;
   std::cin.get();
   return 0;
} 
```

当我运行上面的代码并输入：`1.5`时，它输出：`a is 1`。仅供参考：我使用 gcc 4.5.3 编译和运行代码。

这意味着如果`cin`需要一个整数但看到一个浮点数，它将隐式进行转换。那么这是否意味着当`cin`看到一个浮点数时，它不是处于`fail()`状态？为什么会这样？是因为 C++ 对`>>`运算符进行了隐式转换吗？

我还尝试了以下代码来确定给定的输入数字是否为整数，遵循这篇文章的想法：[测试给定数字是否为整数](https://stackoverflow.com/questions/7646512/testing-if-given-number-is-integer)：

```
#include <iostream>
bool integer(float k)
{
    if( k == (int) k) return true;
    return false;
}

int main()
{
   int a;
   std::cout << "enter integer a"<< std::endl;
   std::cin >> a ;

   if (!integer(a))
   {
     std::cout << "input is not integer, re-enter please" ;
     std::cin.clear();
     std::cin >> a;
     std::cout << "a inside if is: " << a <<std::endl;
   }
   std::cout << "a is " << a <<std::endl;
   std::cin.get();
   return 0;
} 
```

该代码块也无法测试是否为整数，因为当我使用浮点输入运行它时，`a`它只是跳过了该块。`if`

那么为什么在使用 cin 获取用户输入时会出现这种情况呢？如果有时我希望输入为`189`，但`18.9`意外键入，会导致`18`这种情况，这很糟糕。那么这是否意味着使用`cin`获取用户输入整数不是一个好主意？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T04:01:53.747

当你读取一个整数并给它输入 1.5 时，它看到的是整数 1，它在句点处停止，因为它不是整数的一部分。“.5”仍在输入中。这就是你只得到整数部分的原因，这也是它似乎没有第二次等待输入的原因。

为了解决这个问题，您可以读取浮点数而不是整数，以便读取整个值，或者您可以在读取整数后检查行上是否还有其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T06:09:23.083

在阅读用户输入时，我不喜欢使用`operator>>`用户输入，因为用户输入通常是基于行的并且容易出错。我发现最好一次阅读一行并验证：

```
 std::string   line;
 std::getline(std::cin, line); 
```

这也使得检查不同类型的数字变得容易。

```
 std::stirngstream linestream(line);
 int  val;
 char c;

 if ((linestream >> val) && !(linestream >> c))
 {
     // Get in here if an integer was read.
     // And there is no following (non white space) characters.
     // i.e. If the user only types in an integer.
     // 
     // If the user typed any other character after the integer (like .5)
     // then this will fail.
} 
```

当然 boost 已经支持这一点：

```
val = boost::lexical_cast<int>(linestream); // Will throw if linestream does 
                                            // not contain an integer or
                                            // contains anything in addition
                                            // to the integer. 
```

Boost 当然也会转换浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-29T05:35:11.617

我有一些代码片段很糟糕，但它可以工作。这个方法很简单，但不处理输入值无效的情况。查看更多：[https ://en.cppreference.com/w/cpp/string/byte/atof](https://en.cppreference.com/w/cpp/string/byte/atof)

```
static float InputFloat(std::string label)
{
    std::string input;
    std::cout << label;
    std::cin >> input;
    return atof(input.c_str());
}

int main()
{
    float value = InputFloat("Enter some float value: ");
    std::cout << "value = " << value;
    return 0;
} 
```

# javascript - 指定主“创建”时未使用的嵌套对象的“创建”KO 映射选项

> ID：15594997
> 
> 赞同：2
> 
> 时间：2013-03-24T03:55:11.783
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我有以下内容：

```
var CardViewModel = function (data) {
    ko.mapping.fromJS(data, {}, this);
    this.editing = ko.observable(false);
    this.edit = function() {
        debugger;
        this.editing(true);
    };

};

var mapping = {

    'cards': {
        create: function (options) {
            debugger;  // Doesn't ever reach this point unless I comment out the create method below
            return new CardViewModel(options.data);

        }
    },

    create: function(options) {
        //customize at the root level.  
        var innerModel = ko.mapping.fromJS(options.data);
        //debugger;
        innerModel.cardCount = ko.computed(function () {
            //debugger;
            return innerModel.cards().length;
        });

        return innerModel;
    }
};

var SetViewModel = ko.mapping.fromJS(setData, mapping);
debugger;
ko.applyBindings(SetViewModel); 
```

当我运行它时，'cards' 方法永远不会被命中，因此 CardViewModel 中的那些编辑属性不可用。如果我注释掉“create”方法，我可以点击该调试器，但我需要两者。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:47:18.977

`'cards'`不是有效的 Javascript 变量名。尝试不带单引号的其他内容。

您还需要编辑`CardViewModel`代码，因为`this`内部函数指的是内部函数，并且不会在外部函数中看到可观察到的淘汰赛。

```
var CardViewModel = function (data) {
    var self = this;
    ko.mapping.fromJS(data, {}, this);
    this.editing = ko.observable(false);
    this.edit = function() {
        debugger;
        self.editing(true);
    };
}; 
```

# android - 从非 Activity 调用时，findViewById 返回 null

> ID：15594998
> 
> 赞同：0
> 
> 时间：2013-03-24T03:55:25.867
> 
> 标签：android, scala

我正在尝试使用 Scala 开发 Android 应用程序。

当我的应用程序启动时，它会立即显示一个对话框，如下所示：

```
override def onCreate(savedInstanceState: Bundle) {
    super.onCreate(savedInstanceState)   
    competitionSetupDialogFragment.show(getFragmentManager(), HomeScreenActivity.CompetitionDialog)
  }  

  override def onStart() {
    super.onStart
    resourceHelper.setActivity(this)
  } 
```

我的片段如下：

```
class CompetitionSetupDialogFragment extends DialogFragment {
  @Inject
  var competitionSetupDialogHandler: CompetitionSetupDialogHandler = null
  @Inject
  var resourceHelper: ResourceHelper = null

  override def onCreateDialog(savedInstanceState: Bundle): Dialog = {
    val builder = new AlertDialog.Builder(getActivity())
    builder.setMessage(getString(R.string.competitionSetupDialogMessage))
      .setCancelable(false)
      .setView(getActivity().getLayoutInflater.inflate(R.layout.competition_setup, null))
      .setNegativeButton(R.string.cancel, new OnClickListener {
        def onClick(dialog: DialogInterface, which: Int) {
          dismiss()
        }
      })
      .setPositiveButton(R.string.create, new OnClickListener {
        def onClick(dialog: DialogInterface, which: Int) {
          val competitionNameInput = resourceHelper.findViewById(R.id.competitionNameInput).asInstanceOf[EditText]
          val numberOfPlayersInput = resourceHelper.findViewById(R.id.numberOfPlayersInput).asInstanceOf[EditText]
          val numberOfSubsInput = resourceHelper.findViewById(R.id.numberOfSubsInput).asInstanceOf[EditText]
          val lengthOfHalfInput = resourceHelper.findViewById(R.id.lengthOfHalfInput).asInstanceOf[EditText]
          competitionSetupDialogHandler.retrieveValuesAndSave(competitionNameInput, numberOfPlayersInput, numberOfSubsInput, lengthOfHalfInput)
        }
      })

    builder.create()
  }
} 
```

最后，ResourceHelper 包含以下内容：

```
public View findViewById(int viewID) {
        return activity.findViewById(viewID);
    } 
```

我的问题是我的 resourceHelper.findViewById 总是返回 null，即使这些是有效的视图。

我的想法是，当 onClick() 被调用时，视图已经被破坏，或者类似的东西。我该如何解决这个问题？

在这里要添加的一件事是我的对话框显示正常，只有在执行 onClick 时我才有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:02:18.217

解决如下：

创建了一个对话框视图变量：

```
var dialogView = getActivity().getLayoutInflater.inflate(R.layout.competition_setup, null) 
```

使用此变量调用 findViewById：

```
val competitionNameInput = dialogView .findViewById(R.id.competitionNameInput).asInstanceOf[EditText] 
```