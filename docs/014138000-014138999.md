# StackOverflow 问答 14138000-14138999

# c# - 在 asp.net 中以编程方式添加中继器的项目

> ID：14138007
> 
> 赞同：1
> 
> 时间：2013-01-03T11:26:13.400
> 
> 标签：c#, asp.net, repeater

我知道这`Repeater Control`是用来`data source`在网页上动态显示数据的。
但是我想使用转发器控件从用户那里获取输入并根据用户请求生成新的输入字段。谁能帮助我如何通过后面的代码添加一个新的中继器。
我有以下中继器：

```
<asp:Repeater ID="RepeaterDetailsRow" runat="server">
          <HeaderTemplate>
            <div class="divSection">
            <div class="divFieldContent" style="width:auto;">
                <asp:CheckBox ID="CheckBoxDetails" runat="server" AutoPostBack="True" 
                    oncheckedchanged="CheckBoxDetails_CheckedChanged" />
            </div>
            <div class="divFieldContent">
                <asp:Label ID="lblDetails" runat="server" Text="Enter Details" 
                    ForeColor="Coral" Font-Bold="True" Enabled="False"></asp:Label>
            </div>
              <asp:Button ID="AddNewRow" runat="server" Text="Button" />
            </div> 
          </HeaderTemplate>
          <ItemTemplate>
            <div class="divSectionContent">
            <div class="divFieldContent">
                <asp:Label ID="lblName" runat="server" 
                    Text="Name"></asp:Label>
            </div>
            <div class="divFieldContent">
              <div>
                <asp:TextBox ID="txtName" CssClass="boxes"runat="server">                    </asp:TextBox>               
              </div>
              </div>                    
          </div>              
            <div class="divSectionContent">
            <div class="divFieldContent">
                <asp:Label ID="lblSubject" runat="server" 
                    Text="Subject" Enabled="False"></asp:Label>
            </div>
            <div class="divFieldContent">
                <div>
                  <asp:DropDownList ID="ddl_RejectReasonCode" CssClass="boxes" 
                   runat="server">
                  <asp:ListItem>Select Subject</asp:ListItem>
            <asp:ListItem>Subject1</asp:ListItem>
            <asp:ListItem>Subject2</asp:ListItem>
            <asp:ListItem>Subject3</asp:ListItem>      
                  </asp:DropDownList>
                </div>
                                </div>
          </div>
          </ItemTemplate>
        </asp:Repeater> 
```

我想在转发器的标题模板中的按钮的项目命令属性上添加与转发器的项目模板对应的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:45:34.717

**在 ASPX 页面中**

你应该包括

**中继器标签中的OnItemCommand="RepeaterDetailsRow_ItemCommand"**看起来像

```
<asp:Repeater ID="RepeaterDetailsRow" runat="server" OnItemCommand="RepeaterDetailsRow_ItemCommand"> 
```

和按钮 AddNewRow 的 CommandName

```
<asp:Button ID="AddNewRow" runat="server" Text="Button" CommandName="Add"/> 
```

在代码隐藏中

```
protected void RepeaterDetailsRow_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "Add")
    {
        //save the data to the database 
        LoadData(); //again rebind the repeater with data from db
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:14:35.707

我的要求是在中继器中显示添加行。我通过做一个小检查将一个空白行作为最后一项，在所有其他行中，空白行被隐藏。

使用 `<%# (((IList)((Repeater)Container.Parent).DataSource).Count).ToString() == (Container.ItemIndex + 1).ToString() %>` 检查来决定是显示还是隐藏空白行。

完整的视图代码：

```
<table>
    <asp:Repeater ID="repeater1" OnItemCommand="repeater_user_Itemcommand" runat="server">
        <HeaderTemplate>
            <tr>
                <td>
                    Name
                </td>
                <td>
                    Email
                </td>
                <td>
                    Delete
                </td>
            </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Label ID="lblName" runat="server" Text='<%# DataBinder.Eval(Container.DataItem,"Name") %>'></asp:Label>
                </td>
                <td>
                    <asp:Label ID="lblEmail" runat="server" Text='<%# Eval("Email") %>'></asp:Label>
                </td>
                <td>
                    <asp:LinkButton ID="btnDelete" runat="server" CommandArgument='<%# Eval("ID") %>'
                        CommandName="delete">Delete</asp:LinkButton>
                </td>
            </tr>
            <tr id="Tr1" runat="server" visible='<%# (((IList)((Repeater)Container.Parent).DataSource).Count).ToString() == (Container.ItemIndex + 1).ToString() %>'>
                <td>
                    <asp:TextBox ID="txtName_add" runat="server" Enabled="True" Text='' Visible="false"></asp:TextBox>
                </td>
                <td>
                    <asp:TextBox ID="txtEmail_add" runat="server" Text='' Visible="false"></asp:TextBox>
                </td>
                <td>
                    <asp:LinkButton ID="btnShowAdd" runat="server" CommandName="add">Add</asp:LinkButton>
                </td>
            </tr>
        </ItemTemplate>
    </asp:Repeater>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:04:18.657

您基本上必须重新绑定列表并添加一个空项目。这是使用数据绑定控件完成事情的常见方式。您不能将项目动态添加到我知道的转发器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-07T14:25:37.240

```
you could try with this:

    Protected Sub btn_Click(sender As Object, e As EventArgs)
        Dim r As Integer = TablaRepeater.Rows.Count
        Dim t As Integer = r + 1
        TablaRepeaterCF.Rows.Add(t)
        Repeater.DataSource = TablaRepeater
        Repeater.DataBind()
    End Sub 
```

添加 Onclick 事件

```
<asp:Button runat="server" ID="btn" Text="+" CssClass="btn btn-primary active" OnClick="btn_Click" /> 
```

# oracle - 将文本从组合框拆分到文本框并显示其相关信息

> ID：14138011
> 
> 赞同：0
> 
> 时间：2013-01-03T11:26:15.853
> 
> 标签：oracle, vb6

```
Private Sub Cmbfullname_Click()
Dim SQL As String
Dim FName, SName, LName As String
FName = Mid(Combo14.Text, 1, InStr(1, Combo14.Text, " ", vbTextCompare))
SQL = "SELECT A.ROLLNO,A.FIRST_NAME,A.MIDDLE_NAME,A.LAST_NAME,A.CONTACT,A.CONTACT1,A.CONTACT2,A.ADDRESS,A.GRADE,B.DIV,A.BLOOD_GROUP,C.HOUSE,A.DATE_OF_BIRTH,A.TRANSPORT,A.SNAME,A.MEAL,A.BUSNO,A.RUTNO,D.DNAME,D.DCONT,E.ANM,D.DADD,A.CARD_TYPE,A.CARD_NO FROM STUDENT_RECORD_DATABASE A,DIVISION B,HNM C,DRIVER D,ATTEND E WHERE A.DIVID=B.DIVID AND A.HID=C.HID AND A.DID=D.DID AND A.AID=E.AID AND "
SQL = SQL + "FIRST_NAME='" & FName & "'"
Set RES = CON.Execute(SQL)
If RES.RecordCount > 0 Then
   RES.MoveFirst
        COMBO4.Text = RES!ROLLNO
        Text2.Text = RES!FIRST_NAME
        Text3.Text = RES!MIDDLE_NAME
        Text4.Text = RES!LAST_NAME
        Text5.Text = RES!CONTACT
        Text6.Text = RES!CONTACT1
        Text7.Text = RES!CONTACT2
        Text8.Text = RES!ADDRESS
        Combo1.Text = RES!GRADE
        Combo2.Text = RES!DIV
        Combo3.Text = RES!BLOOD_GROUP
        Combo9.Text = RES!HOUSE
        DTPicker1.Value = RES!DATE_OF_BIRTH
        Combo10.Text = RES!TRANSPORT
        Combo5.Text = RES!SName
        Combo11.Text = RES!MEAL
        Combo6.Text = RES!BUSNO
        Combo12.Text = RES!RUTNO
        Combo7.Text = RES!DNAME
        Text9.Text = RES!DCONT
        Combo8.Text = RES!ANM
        Text10.Text = RES!DADD
        Combo13.Text = RES!CARD_TYPE
        Text11.Text = RES!CARD_NO
    End If
    Exit Sub

Private Sub Cmbfullname_LostFocus()
Dim temp As Variant
temp = Split(Combo14.Text, " ")
If temp(0) <> Empty Then
   Combo14.Text = FIRST_NAME
If UBound(temp) Then
    Text2.Text = temp(0)
Else
If UBound(temp) Then
    Text3.Text = temp(1)
Else
If UBound(temp) Then
    Text4.Text = temp(2)
End If
End If
End If
End If
End Sub

Private Sub Text2_LostFocus()  //This code is repeated for text3 and text4 also
Dim SQL As String
Combo14.Clear
Dim STR() As String
STR = Split(Text2.Text, " ")
If STR(0) <> Empty Then
SQL = "SELECT * FROM STUDENT_RECORD_DATABASE WHERE FIRST_NAME='" & STR(0) & "'"
Set RES = CON.Execute(SQL)
 If RES.RecordCount > 0 Then
    RES.MoveFirst
        For I = 0 To RES.RecordCount - 1
Combo14.AddItem RES.Fields("FIRST_NAME").Value & "" & RES.Fields("MIDDLE_NAME").Value & "" & RES.Fields("LAST_NAME").Value
    RES.MoveNext
    Next
End If
Combo14.Text = STR(0)
End If
End Sub 
```

特别是此代码将记录全名显示为在 text2 中输入的 first_name，但是当我选择其中一个时，它只会显示第一条记录的信息，而不是其他选定的记录。我想使用所有 3 个文本框执行相同的操作。text4 是执行正确的操作，但 text2,text3 不是。谢谢

# c# - C#，从 MySQL 数据库获取双精度值的问题

> ID：14138013
> 
> 赞同：1
> 
> 时间：2013-01-03T11:26:25.397
> 
> 标签：c#, mysql, double, datareader

我有一个带有“ `Products`”表的 MySQL 数据库。“”中的一列`Products`称为“ `Price`”，数据类型为“ `double`”。

我需要从该列中检索值，因此我创建了一个阅读器等：

```
MySQLCommand cmd = new MySQLCommand("SELECT Price FROM Products", connection);
MySQLDataReader reader = cmd.ExecuteReaderEx();

if (reader.HasRows == true)
{
  while (reader.Read() == true)
  {
    price = reader["Price"]).ToString();
  }
} 
```

问题是价格未设置为预期值。如果数据库中的值为“299.95”，则价格设置为“29995.0”。

知道为什么会这样吗？可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:34:19.277

这是因为 toString() 使用了当前的 CultureInfo！如果双精度由逗号或点分隔，则取决于文化。

[文化资讯](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

另请参阅[此](https://stackoverflow.com/questions/2583362/how-to-convert-string-to-double-with-proper-cultureinfo)Stackoverflow 问题！

如果你调试它，你应该会看到，那个 reader["Price"] 正在返回一个 Object (type=Object{double})。这里的值正确吗？我猜是这样，所以只需执行以下操作即可显示双值：

```
string display = double.Parse(reader["Price"], CultureInfo.InvariantCulture).ToSring(CultureInfo.CurrentCulture);
System.Diagnostics.Debug.WriteLine(display); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:32:39.680

尝试

```
MySQLCommand cmd = new MySQLCommand("SELECT Price FROM Products", connection);
MySQLDataReader reader = cmd.ExecuteReaderEx();

if (reader.HasRows)
{
  while (reader.Read())
  {
    price = double.Parse(reader["Price"]).ToString());
  }
} 
```

价格变量应该是双数据类型

# jquery - 页面网址在重定向时没有改变

> ID：14138014
> 
> 赞同：5
> 
> 时间：2013-01-03T11:26:27.450
> 
> 标签：jquery, asp.net, jquery-mobile

我的母版页中有一个 jquery 弹出登录名，其中包含 contentPage url

> 类别.aspx

在我写的代码后面

```
public void Ligin_Click( object sender,EventArgs e)
{
    string Ret = objLogin.LoginValidate(
                               txtSignInEmail.Text.Trim(), 
                               txtSignInPass.Text.Trim());
     if (Ret == "1")
     {
         Response.Redirect("~/Mobile/Home.aspx?");
     }
} 
```

但`Response.Redirect`没有工作然后我写了

```
Response.Redirect("~/Mobile/Home.aspx?",false); 
```

它工作正常。但是页面网址没有改变它仍然是前一页网址

> 类别.aspx

Home.aspx 上的链接按钮不起作用，引发异常。无效的回发或回调参数。
使用启用事件验证

```
<pages enableEventValidation="true"/> 
```

在配置或

```
<%@Page EnableEventValidation="true" %> in a page. 
```

出于安全目的，此功能验证回发或回调事件的参数是否源自最初呈现它们的服务器控件。
如果数据有效且符合预期，请使用 ClientScriptManager.RegisterForEventValidation 方法注册回发或回调数据以进行验证。

* * *

当我手动输入 url 'home.aspx' 时，它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T13:43:28.253

jQuery Mobile 和 asp.net web 表单基本上不能一起工作。回发模型和 jQuery Mobile 的 ajax 表单加载和导航不兼容。移动到 MVC 或关闭 ajax。

确保在 jQuery Mobile 初始化之前调用此代码。（将它包含在`<script>`引用 jQuery Mobile 的标记之前。）

```
<script src="jquery.js"></script>
<script>
    $(document).bind("mobileinit", function(){
      $.mobile.ajaxEnabled = false;
    });
</script>
<script src="jquery-mobile.js"></script> 
```

[http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.2.0/docs/api/globalconfig.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T02:24:33.593

如果您坚持尽力将 jQuery Mobile 和 ASP.NET WebForms 结合起来，您可以使用您的`data-url`属性`data-role="page"` `div`来解决服务器端重定向与浏览器 URL 混淆的问题。

在 .aspx 中使用与以下内容等效的内容：

```
<div data-role="page" data-url="<%= Request.Url.PathAndQuery %>">
...
</div> 
```

[有关更多详细信息，请阅读此 jQuery Mobile 文档页面](http://jquerymobile.com/demos/1.3.0-beta.1/docs/pages/page-links.html)上标题为“重定向和链接到目录”的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T12:30:42.117

如果你想禁用 ajax，你可以在不需要它的元素上这样做：data-ajax="false"。您可以将其放在表单上以处理响应重定向。（但是，这不会完全禁用 ajax——以链接为例。）

您可以使用 window.onload 或任何您喜欢的 jquery init 添加一个简单的脚本部分，并使用 $('form').attr("data-ajax", "false"); 为该页面禁用表单 ajax；

# c# - 如何使计时器作业只运行一次？

> ID：14138015
> 
> 赞同：1
> 
> 时间：2013-01-03T11:26:26.997
> 
> 标签：c#, visual-studio-2010, sharepoint, timer-jobs

我编写了一个代码来运行一个计时器作业，该作业在月初运行，通过电子邮件通知用户访问该站点。
下面是执行方法的代码：

```
public override void Execute(Guid targetInstanceId)
    {
        SPWebApplication webApp = SPWebApplication.Lookup(new Uri("http://server"));
        string smtpServerName = string.Empty;
        string from = string.Empty;
        //setting the website from where the timer job will run
        SPWeb web = webApp.Sites[0].RootWeb;
        //retrieving from address from the central admin site
        from = web.Site.WebApplication.OutboundMailSenderAddress;
        //retreiving smtpservername from the central admin site
        smtpServerName = web.Site.WebApplication.OutboundMailServiceInstance.Server.Address;
        //retreiving the groups in the website
        SPGroupCollection collGroups = web.SiteGroups;
        //logic to send mail to all users in all groups
        MailMessage mailMessage = new MailMessage();
        mailMessage.From = new MailAddress(from);
        string to = string.Empty;
        foreach (SPGroup group in collGroups)
        {
            foreach (SPUser user in group.Users)
            {
                //bool flg1 = user.Email == null;
                if (user.Email != null)
                {
                    //mailMessage.To.Add(user.Email);                        
                    to = user.Email + ",";
                }
            }
        }
        mailMessage.Subject = "Acknowledgement Mail";
        mailMessage.To.Add(to);
        mailMessage.Body = "Sup yo";
        mailMessage.IsBodyHtml = false;
        SmtpClient client = new SmtpClient(smtpServerName);
        client.UseDefaultCredentials = true;
        client.Port = 25;
        client.EnableSsl = false;
        client.DeliveryMethod = SmtpDeliveryMethod.Network;
        try
        {
            client.Send(mailMessage);
        }
        catch (SmtpException)
        {
            return;
        }
        catch (ArgumentNullException)
        {
            return;
        }
    } 
```

现在只是为了测试目的，我在一小时内每 5 分钟运行一次这个计时器作业。现在，假设组中有 2 个用户的电子邮件地址为 a@abc 和 b@abc。我希望使用“收件人”地址发送电子邮件，`a@abc; b@abc;`并且我正在使用它`smtp4dev`来传递消息。我看到的是计时器作业在 5 分钟内运行了两次，并发送了 3 条消息，第一个是给 a，第二个是给 a 和 b，第三个是给 a，b，然后是 a。如何让它只运行一次，无论持续时间如何，只发送一条消息，并且在“To”地址中只发送 a;b？

编辑：更改代码后，我忘记重新启动计时器服务。它现在可以工作，但是计时器作业在预定的时间间隔内运行多次，而不是只运行一次。对此有什么建议吗？抱歉搞砸了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:40:20.013

这是因为你用`mailMessage.To.Add(to);`错了。`MailAddress`( )的每个实例`MailMessage.To`只能包含一个邮件地址。您需要做的是分别添加每个邮件地址（因此`.Add`方法）。

您需要做的是取消注释您以前使用的代码：`//mailMessage.To.Add(user.Email);`

请参阅[下面的帖子，了解您的问题](http://social.msdn.microsoft.com/Forums/ta/csharpgeneral/thread/573c5c98-112a-4ab7-adf6-8963c35e60f7)，有人试图使用逗号分隔邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T04:28:12.553

当我确保我具备以下条件时，我的代码就会运行：
1）我在更改代码后忘记重新启动计时器服务。
2) 我使用了[link1](https://stackoverflow.com/questions/9673/remove-duplicates-from-array)和[link2](https://stackoverflow.com/questions/4884050/create-comma-separated-strings-c)来过滤掉存在于多个组中的重复用户。
3）由于我有超过 1 个 Web 应用程序，1 个应用程序的代码也被用于其他 Web 应用程序，因此重复的电子邮件。
很抱歉问这个问题，希望有一天能对某人有所帮助。

# java - 在黑莓模拟器中添加外部 SD 卡

> ID：14138026
> 
> 赞同：-1
> 
> 时间：2013-01-03T11:27:17.720
> 
> 标签：java, blackberry, blackberry-simulator, blackberry-eclipse-plugin

我想在我的 BlackBerry 模拟器中添加外部 SD 卡以创建数据库。我正在使用这种方式添加 -

1.创建文件夹并命名为-SDCard。
2.在模拟器中点击on-simulate。
3.选择更换SD卡。
4.选择您的文件夹 SDCard。
5.点击关闭。

但即使比我运行项目时，它也显示“找不到SD卡”的错误。有什么帮助？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:46:29.917

我得到了解决方案 -
创建 SD 卡文件夹后，我们必须在模拟器中模拟之前将其共享。
另一个过程是相同的。

# matlab - 用matlab表示小波系数

> ID：14138028
> 
> 赞同：0
> 
> 时间：2013-01-03T11:27:20.767
> 
> 标签：matlab, wavelet

我想使用小波工具箱或 wavelab 表示 2D 函数的小波系数，但我无法设法显示这样的图片：

![](../Images/c8ee5c5578f1c53475a5d8d054c239db.png).

我怎么做？

# android - Android中自定义字体上的水平条纹

> ID：14138029
> 
> 赞同：1
> 
> 时间：2013-01-03T11:27:31.117
> 
> 标签：android, image, fonts, appearance, typeface

我正在尝试在我的文本中添加自定义字体，但问题是文本上出现垂直条纹。它们不在字体中，而且问题似乎只出现在某些 Android 设备上。

这是我的文本视图

```
<TextView
    android:id="@+id/header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_marginTop="4dip"
    android:layout_marginBottom="4dip"
    android:textColor="#00fff0"
    android:textSize="14sp"
    android:text="Header"/> 
```

我在 onCreate() 函数中设置字体如下

```
((TextView) findViewById(R.id.header)).setTypeface(Typeface.createFromAsset(this.getAssets(), "bitbold2.ttf")); 
```

当像这样初始化时在画布上绘制文本时也会出现同样的问题：

```
Typeface bitNanoFont = Typeface.createFromAsset(asset, "bitbold2.ttf");
Paint textPaint = new Paint();
textPaint.setARGB(255, 0, 255, 240);
textPaint.setTextSize(24);
textPaint.setTypeface(bitNanoFont); 
```

并画成这样：

```
canvas.drawText("Text", 320, 50, textPaint); 
```

生成的文本如下所示（TextView）：

![文本看起来像这样。](../Images/eb493ab2d909bfbacc45724edeadbdd2.png)

图像已放大，背景是彩色的，因为该图像是直接从应用程序中获取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T10:42:06.433

这不是一个完美的解决方案，但我能够通过对文本应用假粗体来修复垂直间隙。这意味着 Android 在字母上添加了一些额外的笔画，从而弥补了空白。

在文本视图上

```
Typeface font = Typeface.createFromAsset(asset, "bitbold2.ttf");
TextView tw = (TextView) findViewById(R.id.header);
tw.setTypeface(font);
tw.setPaintFlags(Paint.FAKE_BOLD_TEXT_FLAG); 
```

在画布上

```
Typeface font = Typeface.createFromAsset(asset, "bitbold2.ttf");
Paint paint = new Paint();
paint.setTypeface(font);
paint.setFakeBoldText(true); 
```

# vim - 如何在vim中为不同类型的自动完成设置不同的自动完成行为？

> ID：14138031
> 
> 赞同：3
> 
> 时间：2013-01-03T11:27:31.833
> 
> 标签：vim, autocomplete, omnicomplete

vim 的默认行为是写下它找到的第一个匹配项并显示一个下拉菜单和所有其他匹配项。当我使用它来自动完成代码内容（例如库中的函数名称）时，使用它通常很尴尬，因为它会选择最长的单词并下拉一个长列表，这需要花费太多精力来删除一半单词或手动搜索相似词的菜单。

示例：我使用 OpenCV，当我编写`cvCr(<Ctrl-x><Ctrl-o>)`它时，它会写入`cvCreate2DHMM`并显示一个菜单，其中包含大约 20-30 个东西，所有内容都以`cvCreate`. 然后我必须删除一半的单词或在菜单中手动搜索。

有一种简单的方法可以改变这种行为，只写下最长的常见匹配，就像大多数 IDE 一样（它在手册中，我知道如何找到它）。

但是，当我`<Ctrl-x>s`用来修复拼写错误时，我更喜欢默认行为。

有没有办法为不同的自动完成分别设置行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:46:32.320

你的意思是你想`longest`从`'completeopt'`选项切换？！

您必须覆盖完成触发器，并预先添加一个无操作`:map-expr`来更改选项，如下所示：

```
function! CompleteoptLongest( isEnable )
    set completeopt-=longest
    if a:isEnable
        set completeopt+=longest
    endif
    return ''
endfunction
:inoremap <expr> <SID>CompleteoptLongestOn CompleteoptLongest(1)
:inoremap <expr> <SID>CompleteoptLongestOff CompleteoptLongest(0)

:inoremap <script> <C-n> <SID>CompleteoptLongestOn<C-n>
" Repeat for all other completion commands you use...

:inoremap <script> <C-x><C-s> <SID>CompleteoptLongestOff<C-x><C-s> 
```

# bookmarklet - 新窗口中的书签？

> ID：14138036
> 
> 赞同：0
> 
> 时间：2013-01-03T11:27:51.340
> 
> 标签：bookmarklet

我想添加一个在新窗口中打开网络广播的书签。

我尝试了以下代码：

```
javascript:window.open('http//www.franceinter.fr/player',width=600,height=600,toolbar=no'); 
```

但我不工作。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:58:32.813

我只需要添加：

```
'_blank' 
```

=>

```
javascript:window.open("http://www.franceinter.fr/player",'_blank','width=600,height=600,toolbar=no'); 
```

# html - 导航栏在更高的缩放比例下不是内联的

> ID：14138037
> 
> 赞同：0
> 
> 时间：2013-01-03T11:27:56.387
> 
> 标签：html, css, uinavigationbar

我制作了一个简单的导航栏，但列表项在更高的缩放比例下并不内联。

**HTML**

```
<ul>
<li><a href="#">Type 1</a></li>
<li><a href="#">Type 2</a></li>
<li><a href="#">Type 3</a></li>
<li><a href="#">Type 4</a></li>
</ul> 
```

**​CSS**

 **```
li{
display:inline;
float:left;
}

li a {
display:block;
width:155px;
text-align:center;
}    ​

ul {
background-color:#999999;
border:1px solid #006666;
height:25px;
list-style-type:none;
margin:0;
padding:0;
} 
```

这是代码的小提琴！

[http://jsfiddle.net/CCCMC/3/](http://jsfiddle.net/CCCMC/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:42:42.940

更改宽度以使其适合肯定会起作用，或者你可以试试这个（修改自：[Fluid width with equal spaced DIVs](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)）

**html:**

```
<ul>
    <li><a href="#">Type 1</a></li>
    <li><a href="#">Type 2</a></li>
    <li><a href="#">Type 3</a></li>
    <li><a href="#">Type 4</a></li>
    <li class="stretch"></li>
</ul> 
```

​</p>

**CSS：**

```
li{
    display:inline-block;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1    
}

li a {
    text-align:center;
    background-color:green;
}    

ul {
    background-color:#999999;
    border:1px solid #006666;
    height:25px;
    list-style-type:none;
    margin:0;
    padding:0;
    text-align: justify;
    -ms-text-justify: distribute-all-lines;
    text-justify: distribute-all-lines;    
}

.stretch {
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0
} 
```

​</p>

在 JS fiddle 上看到它：http: [//jsfiddle.net/CCCMC/45/](http://jsfiddle.net/CCCMC/45/)

这允许不同大小/不同数量的菜单项。

（记得添加 *zoom:1; *display:inline; 如果需要，请修复 IE6/7）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:42:17.143

只需调整'宽度：155px;' 'li a' 选择器的属性。我检查了 125px 值看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:46:30.673

这有效：http: [//jsfiddle.net/CCCMC/3/](http://jsfiddle.net/CCCMC/3/)

您定义了 ul 的高度，当您缩放时它不再适合一行。所以我删除了高度，并使用`display: inline-block`而不是`float: left`这样你就不需要再定义高度了。

只需研究代码，它几乎是不言自明的。

```
li{
    display:inline-block;
    width:155px;
    text-align:center;
}  

ul {
    background-color:#999999;
    border:1px solid #006666;
    list-style-type:none;
    margin:0;
    padding:0;
} 
```**

# mysql - mysql - 按日期对已排序的结果进行分组

> ID：14138038
> 
> 赞同：0
> 
> 时间：2013-01-03T11:27:56.467
> 
> 标签：mysql

**/edit** 哦，伙计们，我很抱歉。我没有意识到我的解决方案基本上是正确的——我所缺少的只是外部查询中的第二个 ORDER BY。

* * *

我有两个表：一个包含徽章信息的徽章表，以及一个包含用户徽章奖励信息的 user_award 表。我想获得 X 最近的奖项并显示一个带有分页的活动小部件。

问题是管理员可以同时向多个用户授予徽章。这会在表 user_award 中为每个用户创建一个单独的记录，但所有记录都具有相同的日期时间值。在我的活动小部件中，我想将具有相同日期时间值的所有奖项分组到一个条目中，因此它的内容如下：

*   Bob 和 Mary 获得了“First in Line”徽章。
*   卡洛斯获得了“夜猫子”徽章。
*   Jaime 和 Oliver 获得了“厨房大师”徽章
*   尼尔收到了“Already Up？”的徽章。
*   布鲁斯和西尔维斯特获得了“致命敌人”徽章。

如您所见，我不想要最近的 5 个获奖作品，而是按日期对最近的获奖作品进行分组。

我的架构的相关部分如下：

```
user_award
  +---------------+--------------+------+-----+---------+----------------+
  | Field         | Type         | Null | Key | Default | Extra          |
  +---------------+--------------+------+-----+---------+----------------+
  | id            | int(11)      | NO   | PRI | NULL    | auto_increment | 
  | user_ssomail  | varchar(64)  | NO   |     | NULL    |                | 
  | badge_id      | int(11)      | NO   | MUL | NULL    |                | 
  | when          | datetime     | YES  |     | NULL    |                |
  +---------------+--------------+------+-----+---------+----------------+

badge
+-------------------------+--------------+------+-----+---------+----------------+
| Field                   | Type         | Null | Key | Default | Extra          |
+-------------------------+--------------+------+-----+---------+----------------+
| id                      | int(11)      | NO   | PRI | NULL    | auto_increment | 
| title                   | varchar(45)  | NO   |     | NULL    |                | 
| description             | text         | NO   |     | NULL    |                | 
| image                   | varchar(120) | NO   |     | NULL    |                | 
+-------------------------+--------------+------+-----+---------+----------------+ 
```

user_award 表的样本数据：

```
*************************** 13\. row ***************************
 user_ssomail: aaa
     badge_id: 7
         when: 2013-01-02 18:29:16
*************************** 14\. row ***************************
 user_ssomail: bbb
     badge_id: 4
         when: 2013-01-02 19:07:15
*************************** 15\. row ***************************
 user_ssomail: ccc
     badge_id: 4
         when: 2013-01-02 19:07:15 
```

我想要达到的结果是：

```
***result 1***
user_ssomails: bbb, ccc
badge_id: 4
when: 2013-01-02 19:07:15

***result 2***
user_ssomails: aaa
badge_id: 7
when: 2013-01-02 18:29:16 
```

请注意，具有相同日期时间的奖励会被分组，并连接 user_ssomails。

从我目前了解到的情况来看，GROUP 操作发生在 SORT 操作之前，所以我尝试了一个复合查询。内部查询选择所有 user_awards 并按日期对其进行排序：

```
 SELECT badge.image,
       badge.title,
       user_award.badge_id,
       user_award.user_ssomail,
       user_award.when
FROM user_award
INNER JOIN badge ON user_award.badge_id = badge.id
ORDER BY user_award.when DESC 
```

外部查询按日期时间字段对结果进行分组：

```
 SELECT sorted_awards.image,
       sorted_awards.title,
       sorted_awards.badge_id,
       GROUP_CONCAT(sorted_awards.user_ssomail) AS ssomails,
       sorted_awards.when
FROM
  (SELECT badge.image,
          badge.title,
          user_award.badge_id,
          user_award.user_ssomail,
          user_award.when
   FROM user_award
   INNER JOIN badge ON user_award.badge_id = badge.id
   ORDER BY user_award.when DESC) AS sorted_awards
GROUP BY sorted_awards.when LIMIT :bottom_limit,
                                  :upper_limit 
```

但这并没有返回我想要的。谁能指出我在这里做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:46:32.607

为什么不只是`GROUP BY`然后`ORDER BY`呢？无论如何`LIMIT`都使用：`ORDER BY`

```
SELECT b.image,
       b.title,
       a.badge_id,
       GROUP_CONCAT(a.user_ssomail) AS ssomails,
       a.`when`
   FROM user_award AS a
     INNER JOIN badge AS b
       ON a.badge_id = b.id
   GROUP BY a.`when`, 
            a.badge_id 
   ORDER BY a.`when` DESC
       LIMIT x OFFSET y ; 
```

# css - CSS切断输入框的结尾

> ID：14138047
> 
> 赞同：0
> 
> 时间：2013-01-03T11:28:33.703
> 
> 标签：css

我有一个表单，其中有两个字段被截断，其中有一个`overflow:hidden;`我已在 Firebug 上关闭，但仅适用于“输入密码”输入，而不适用于“确认密码”输入。谁能追查为什么它仍然切断盒子？

这是[链接](http://www.teamworksdesign.com/clients/rwcmd/login/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:32:54.413

带有 id 的 div `input_1_10_container`（围绕两个密码字段）正在切割它`overflow:hidden`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:34:22.193

错误在forms.css的两行，206：

```
.gform_wrapper .field_name_first input, .gform_wrapper .ginput_complex .ginput_left input {
width: 93% !important;
} 
```

和 238：

```
.gform_wrapper .ginput_complex .ginput_right input, .gform_wrapper .ginput_complex .ginput_right select {
width: 90% !important;
} 
```

将宽度设置为上述宽度，它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:35:22.560

尝试减少两个输入的水平填充或宽度。混合元素尺寸属性的百分比/绝对值是相当糟糕的主意

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:40:21.127

相应地调整宽度，例如

```
.gform_wrapper .ginput_complex {
width: 614px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T11:34:20.607

```
.gform_wrapper .ginput_complex {overflow:hidden} 
```

在您的 CSS 的第 202 行上隐藏了一个溢出.. 关闭它可以解决这里的问题。我个人建议您减少两个字段的宽度，猜想它看起来会更好一些并且也可以解决问题..只是一个想法..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T11:38:22.897

移除overflow: hidden from the`.gform_wrapper .ginput_complex .ginput_left, .gform_wrapper .ginput_complex .ginput_right, .gform_wrapper .ginput_complex .ginput_full`并添加margin-right: 10px on`.gform_wrapper .ginput_complex .ginput_left`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T12:04:53.933

你甚至不需要两个跨度......

你可以做这样的事情（这里是内联的，只需将其编码为 css）

```
<div class="ginput_complex ginput_container" id="input_1_10_container">
   <input style="width: 45% !important; display:inline-block; margin-right:12px;"
          type="password"  placeholder="Enter Password" 
          name="input_10" id="input_1_10" value="" tabindex="5">      
   <label style="display: none;" for="input_1_10">Enter Password</label>

   <input style="width: 45% !important; display: inline-block;" 
          type="password"  placeholder="Confirm Password" name="input_10_2" 
          id="input_1_10_2" value="" tabindex="6">
   <label style="display: none;" for="input_1_10_2">Confirm Password</label>
</div> 
```

这也适用于文本的放大。

尝试用 Firebug 将其替换为您的 div ...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-03T13:05:18.517

此代码有效

```
.gform_body input,textarea,select {box-sizing:border-box !important;}

#input_1_10_1_container {width:48.5% !important;}
#input_1_10_2_container {width:48.5%;float:left} 
```

# c++ - 预编译的标头选项会导致此错误吗？

> ID：14138051
> 
> 赞同：0
> 
> 时间：2013-01-03T11:28:47.430
> 
> 标签：c++, c, visual-c++

我已经从`crypto.c`.

![在此处输入图像描述](../Images/191eea6165815047e3d6a9b952bb8165.png)

如何正确解决此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:32:43.210

您需要在其头文件中声明 tha`crypt()`函数，如下所示：`extern "C"`

```
#ifdef __cplusplus
extern "C" {
#endif

void crypt(unsigned int *, unsigned int, unsigned int *);

#ifdef __cplusplus
}
#endif 
```

如果您不这样做，C++ 编译器会将其视为具有 C++（而不是 C）链接的函数，并将对其应用名称修饰。

# python - Project Euler #3 与 python - 最有效的方法

> ID：14138053
> 
> 赞同：-7
> 
> 时间：2013-01-03T11:28:49.257
> 
> 标签：python

我已经解决了这个问题，但我想知道解决这个问题的最有效方法是什么（10 秒以下）。问题可以在[http://projecteuler.net/problem=3](http://projecteuler.net/problem=3)找到。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-03T11:29:11.407

这可能是最快和最紧凑的方法，只需**141 毫秒**并给出答案`6857`。

> 13195 的质因数是 5、7、13 和 29。
> 
> 数字 600851475143 的最大质因数是多少？

```
n = 600851475143
i = 2
while i * i < n:
    while n % i == 0:
        n = n / i
    i = i + 1

print n 
```

^(从[这里获取的代码](http://www.s-anand.net/euler.html))

# ubuntu - 在两个文件夹中找到不同之处，仅在两个文件之间使用过滤器进行更改

> ID：14138055
> 
> 赞同：0
> 
> 时间：2013-01-03T11:28:51.627
> 
> 标签：ubuntu, diff

在 Ubuntu 中，我可以使用此命令在两个文件夹之间查找不同的文件：

```
diff -qr folder1 folder2 
```

是否可以添加一个过滤器以仅检查文件：.cpp 和 .h？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:37:29.130

不确定您是否可以指定要*包含*的模式（`diff`手册页对此没有任何说明），但您可以使用`-x PAT`or`--exclude=PAT`选项排除特定模式。您还可以使用该`-X FILE`选项来提供包含要排除的模式的文件。

# wcf - 什么是 ssl 中的中间系统

> ID：14138059
> 
> 赞同：0
> 
> 时间：2013-01-03T11:28:55.823
> 
> 标签：wcf, ssl

在阅读有关传输安全性的信息时，我读到“当您的客户端和服务之间没有中间系统时，传输安全性很好”。

我们所说的“中间系统”是什么意思？.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:35:39.203

使用 SSL，安全属性仅在连接的两个端点之间保持。如果您有中间系统，那么将在您的系统和中间系统之间提供 SSL 安全性。不在您的系统和最终系统之间。

这里的中间系统是 WCF 服务器。

# java - 在休眠中执行查询时，我应该如何解决异常“无法解析路径”？

> ID：14138060
> 
> 赞同：0
> 
> 时间：2013-01-03T11:28:57.853
> 
> 标签：java, hibernate, annotations, entity, dao

我正在尝试测试一个使用休眠和注释的简单应用程序。我有以下具有以下外键约束的数据库表。

```
create table user_info 
(
mobile_number varchar(16) primary key, 
gender char(1),
language varchar(4))

create table user_order_info
(order_id integer(16) not null primary key auto_increment,   
mobile_number varchar(16) not null,
location_name varchar(32) not null, 
foreign key(mobile_number) references user_info(mobile_number),

create table user_queue_order_info
(queue_id integer(16) not null primary key auto_increment,
order_id integer(16),   
mobile_number varchar(16) not null,  
order_value integer(8) not null,   
foreign key(mobile_number) references user_info(mobile_number),
foreign key(order_id) references user_order_info(order_id) on delete cascade) 
```

而上表各自的实体表如下：

```
@Entity
@Table(name = "user_info")
public class UserInfo implements Serializable {         
private String mobileNumber;    
private char gender;
private String language;
    //getters and setters and constructors
}

@Entity
@Table(name = "user_order_info")

public UserOrderInfo implements Serializable {  
private long orderId;
private String locationName;        
private UserInfo userInfo;
    //getters and setters and constructors
}

@Entity
@Table(name = "user_queue_order_info")

public class UserQueueOrderInfo implements Serializable {   

private long queueId;   
private int orderValue; 
private UserInfo userInfo;
private UserOrderInfo userOrderinfo;
    //getters and setters , constructors 
```

问题是当我尝试使用 UserOrderInfoDao 通过以下方法访问数据库时，异常来了。

```
public UserOrderInfo UserOrderInfoByMobileNumber(String mobileNumber ) {
List<UserOrderInfo> userOrderInfoList =    sessionFactory.getCurrentSession().createQuery("from UserOrderInfo where userInfo.mobileNumber='"+mobileNumber+"'").list();
    if(!userOrderInfoList.isEmpty()){
        return userOrderInfoList.get(0);
    }
    return null;
} 
```

当我尝试通过跟踪异常进行调试时，出现的异常是：

> 异常无法解析路径 [userInfo.mobileNumber]，意外令牌 [userInfo] [来自 com.appls.entity.UserOrderInfo where userInfo.mobileNumber='7770909090']

为什么会出现这个问题？我正在等待您的宝贵建议。

我已经通过以下方式在 getter 和 setter 中完成了映射：

```
@Id 
@Column(name = "mobile_number")
public String getMobileNumber() {
    return mobileNumber;
} 
```

其他领域也一样。

User_info 的实体是

```
 private String mobileNumber;        
private char gender;
private String language;

@Id 
@Column(name = "mobile_number")
public String getMobileNumber() {
    return mobileNumber;
}
public void setMobileNumber(String mobileNumber) {
    this.mobileNumber = mobileNumber;
}

@Column(name = "gender")
public char getGender() {
    return gender;
}
public void setGender(char gender) {
    this.gender = gender;
}

@Column(name = "language")
public String getLanguage() {
    return language;
}
public void setLanguage(String language) {
    this.language =language;
}

public UserInfo() {
    super();        
}

public UserInfo(String mobileNumber){
    super();
    this.mobileNumber = mobileNumber;
}

public UserInfo(String mobileNumber, char gender, String language) {
    super();
    this.mobileNumber =mobileNumber;
    this.gender = gender;
    this.language = language;

}   

@Override
public String toString() {
return "{\"mobileNumber\": \"" + this.mobileNumber
            + "\", \"gender\": \"" + this.gender
            + "\", \"language\": \"" + this.language }";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:32:02.183

要么改变， `private String mobileNumber;`包括 getter/setter

作为`private String mobile_number;`

或者注释它

```
@Column(name="mobile_number")
private String mobileNumber; 
```

与`private String locationName;`和相同`private String orderValue;`

查询应该像 `createQuery("from UserOrderInfo userOrderInfo where userOrderInfo.userInfo.mobileNumber='"+mobileNumber+"'").list()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:59:38.127

您应该通过注释将您的 mobileNumber 字段更改为 DB 或 pojo 中的 mobile_number。

# javascript - 成功回调未执行？

> ID：14138062
> 
> 赞同：1
> 
> 时间：2013-01-03T11:29:08.127
> 
> 标签：javascript, jquery, ajax

我遇到了一个奇怪的问题，即我的`success`回调没有执行。这是我的代码：

```
$.ajax({
    dataType: "script",
    cache: false,
    url: 'Scripts/XXXX.min.js',
    success: function () {
        alert('sad')
    }
}) 
```

刚刚发现错误正在执行。这是它的值 Object {readyState: 4, responseText: "/** ↵ * Klass.js - copyright @dedfat ↵ * XXXXXX); ↵", status: 200, statusText: "OK"}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:36:51.417

因此，您可以尝试使用错误和成功回调在下面构建您的 ajax likes。

试试看。

```
$.ajax({
        dataType: "script",
        cache: false,
        url: 'Scripts/XXXX.min.js',
        error: function(returnval) {
            alert('error');
        },
        success: function (returnval) {
           alert('success'); 
        }
    }) 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:34:58.187

试试这个代码。错误时您应该看到带有错误消息的警报。您还可以在网络选项卡中的 FireBug 中检查错误。

```
$.ajax({
    dataType: "script",
    cache: false,
    url: 'Scripts/XXXX.min.js',
    success: function() {
        alert('succes')

    }
    error: function() {
        alert('error');
    }
})​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:48:37.727

问题是文件中存在错误。这就是未执行成功回调的原因。

# web-services - 用于非面向资源的 Web 服务的 RESTful

> ID：14138066
> 
> 赞同：1
> 
> 时间：2013-01-03T11:29:12.540
> 
> 标签：web-services, rest, soap

我完全支持 REST Web 服务，而且我的公司制定了一项政策，优先选择 REST 而不是 SOAP。

但是，我需要公开一个不适合资源范式的 Web 服务。它本质上是一个计算，我需要发送大量参数（大约 20 个字段）并检索一个数字。

我考虑过使用 HTTP POST 并在请求正文中发送一个 JSON 对象。这里的问题是，我的 Web 服务支持 SOAP-WS 和 REST，这种方法不属于这些类别中的任何一个。

我的问题是，这里有什么选择？我可以使它适合 RESTful WS 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:48:42.847

[正如您所提到的，当您在资源上公开CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete)操作时，REST 是有意义的。通常这些资源被持久化在一些数据库或存储机制中。

在您的情况下，我想没有存储或资源（您提供了一堆数字并返回结果，没有任何内容被存储，这是真的吗？）。因此，您将无法真正将这样的 WS 称为“RESTful”。

话虽如此，REST 更像是一种“哲学”。你可以拿走你喜欢的东西并使用它们。您实现 POST、将 JSON 结构与您的输入一起接收并返回带有结果的 JSON 的想法听起来不错。您还可以发布“ [application/x-www-form-urlencoded](http://en.wikipedia.org/wiki/POST_%28HTTP%29) ”内容（常规表单提交并将结果返回为“text/plain”，如果这有意义的话。

我们的想法是构建一个易于理解且易于操作的 WS。与 SOAP-WS 完全相反。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:38:56.390

经过一番研究，我发现这篇文章与这个讨论非常相关：http: [//info.apigee.com/Portals/62317/docs/web%20api.pdf](http://info.apigee.com/Portals/62317/docs/web%20api.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:27:51.923

我看不出为什么不能是 RESTful 的。将特定的计算运行视为具有自己身份的资源 ( `/calculation/ID123`)；然后，您可以执行 POST 以`/calculation`创建一个新参数，GET/PUT on`/calculation/ID123/paramA`以使用特定参数，并 GET on`/calculation/ID123/result`以检索计算结果（或说明计算结果由于某种原因不可用的描述） . 当然，GET on`/calculation`将检索您可以查看的已保存计算列表，GET on`/calculation/ID123`将检索上述子资源的描述（以及您想要提供的任何其他信息），并清除具体计算是一个DELETE。

拥有大量子资源和高度瞬态资源并没有错。要记住的重要一点是，客户端永远不应该铸造 URL。（我不知道内容协商在这种情况下是否如此有用；这真的取决于我想的特定计算。）

# php - 合并 Json 编码的行

> ID：14138067
> 
> 赞同：0
> 
> 时间：2013-01-03T11:29:17.410
> 
> 标签：php, mysql, merge, json

我在输出 json 之前无法合并数据。目标是让 json 中的每个对象包含每个“帖子”的所有数据。

下面的代码：

```
$results = mysql_query("SELECT dfuw_posts.ID, dfuw_posts.post_title,
dfuw_postmeta.meta_key, dfuw_postmeta.post_id, dfuw_postmeta.meta_value FROM
dfuw_posts INNER JOIN dfuw_postmeta ON dfuw_posts.ID = dfuw_postmeta.post_id WHERE
dfuw_posts.post_type = 'poi' AND dfuw_posts.post_status = 'publish' AND 
dfuw_postmeta.meta_key IN ('_poi_loc' ,'_poi_level' ,'_poi_type')");

$pois = array();
while($r = mysql_fetch_assoc($results)){
  $pois[] = $r;
}
echo json_encode($pois); 
```

输出：

```
[
 {
  "ID": "320",
  "post_title": "Bank",
  "meta_key": "_poi_loc",
  "post_id": "320",
  "meta_value": "70.4845662217412|-84.5123291015625"
 },
 {
  "ID": "320",
  "post_title": "Bank",
  "meta_key": "_poi_level",
  "post_id": "320",
  "meta_value": "easy"
 },
 {
  "ID": "320",
  "post_title": "Bank",
  "meta_key": "_poi_type",
  "post_id": "320",
  "meta_value": "bank"
 },
 {
  "ID": "324",
  "post_title": "A Creature",
  "meta_key": "_poi_type",
  "post_id": "324",
  "meta_value": "mob"
 },
 {
  "ID": "324",
  "post_title": "A Creature",
  "meta_key": "_poi_level",
  "post_id": "324",
  "meta_value": "med"
 },
 {
  "ID": "324",
  "post_title": "A Creature",
  "meta_key": "_poi_loc",
  "post_id": "324",
  "meta_value": "70.4845662217412|-84.5123291015625"
 }
] 
```

我希望每个帖子都像这样捆绑：

```
{
  "title": "A Creature",
  "location": "70.4845662217412|-84.5123291015625",
  "type": "mob",
  "level": "hard"
 } 
```

这是可以实现的吗？如果是这样，任何让我走上正确道路的建议将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:46:22.387

在 mysql 查询中提供自定义标题将解决您的问题。

```
$results = mysql_query("
         SELECT 
            dfuw_posts.ID,
            dfuw_posts.post_title AS title,
            dfuw_postmeta.meta_key,
            dfuw_postmeta.post_id,
            dfuw_postmeta.meta_value AS location
         FROM
            dfuw_posts
         INNER JOIN 
            dfuw_postmeta ON dfuw_posts.ID = dfuw_postmeta.post_id 
         WHERE
            dfuw_posts.post_type = 'poi'
         AND
            dfuw_posts.post_status = 'publish'
         AND 
            dfuw_postmeta.meta_key IN ('_poi_loc' ,'_poi_level' ,'_poi_type')");

$pois = array();
while($r = mysql_fetch_assoc($results)){
  $pois[] = $r;
}
echo json_encode($pois);
```

尝试并发布您最终的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:15:46.703

以下是我最终解决问题的方法。

```
$results = mysql_query("
     SELECT
        dfuw_posts.ID AS pid,
        dfuw_posts.post_title AS title,
        dfuw_postmeta.meta_key AS mkey,
        dfuw_postmeta.post_id AS pmid,
        dfuw_postmeta.meta_value AS mval
     FROM
        dfuw_posts
     INNER JOIN
        dfuw_postmeta ON dfuw_posts.ID = dfuw_postmeta.post_id
     WHERE
        dfuw_posts.post_type = 'poi'
     AND
        dfuw_posts.post_status = 'publish'
     AND
        dfuw_postmeta.meta_key IN ('_poi_loc' ,'_poi_level' ,'_poi_type')");

  $jsary = ["pois" => []];
  $lastPid = 0;
  $currentPid = 0;
  $title = "";
  $ifff = 0;
  $elss = 0;
    while($row = mysql_fetch_array($results))
    {
        $currentPid = $row['pid'];
        $title = $row['title'];

        $cmd = $row['mkey'];
        $cmt = $row['mval'];

        if($lastPid != $currentPid)
        {
                $insAry = [];
                $insAry = ["title"=> $title, $cmd => $cmt];
                array_push($jsary["pois"], $insAry);
                $lastPid = $currentPid;
                $ifff = $ifff + 1;
                $currentPid = 0;
        }
        else
        {
                $ind = 0;
                if($ifff > 0)
                {
                        $ind = $ifff-1;
                }
                $insAry = [$cmd => $cmt];
                $jsary["pois"][$ind][$cmd] = $cmt;
        }
      }

echo json_encode($jsary); 
```

这会将数据精美地输出为：

```
{
 "pois": [
 {
   "title": "Bank",
   "_poi_loc": "70.4845662217412|-84.5123291015625",
   "_poi_level": "easy",
   "_poi_type": "bank"
 },
 {
   "title": "A Creature",
   "_poi_type": "mob",
   "_poi_level": "med",
   "_poi_loc": "70.4845662217412|-84.5123291015625"
 }
] 
```

感谢所有的答复。@Joddy - 你的帖子帮助我到达了我最终的目标。泰！

# c# - 为什么在调用它的同一类中声明的公共类型需要实例化？

> ID：14138069
> 
> 赞同：0
> 
> 时间：2013-01-03T11:29:25.560
> 
> 标签：c#, sql-server-ce, windows-phone-8

使用此代码：

```
var locationsInDB = from TaSLs_SQLCELocationDataDefinition location in
                        TaSLs_SQLCELocation.TaSLs_SQLCELocationDataDefinitions
                    where location.SavedToCloud = false
                    select location; 
```

......我明白了，

> "*非静态字段、方法或属性'TaSLS_PhoneApp.MainPage.TaSLs_SQLCELocation'需要对象引用*"

我在一个单独的类中声明了 TaSLs_SQLCELocationDataContext：

```
public class TaSLs_SQLCELocationDataContext : DataContext
{
    public static string DBConnectionString = "Data Source=isostore:/gr8GooglyMoogly.sdf";

    public TaSLs_SQLCELocationDataContext(string connectionString)
        : base(connectionString)
    { }

    public Table<TaSLs_SQLCELocationDataDefinition> TaSLs_SQLCELocationDataDefinitions;
} 
```

我不能将 TaSLs_SQLCELocationDataContext 设为静态，因为它实现了 DataContext

如果我像这样实例化该类：

```
TaSLs_SQLCELocationDataContext tsldc = new TaSLs_SQLCELocationDataContext();
var locationsInDB = from TaSLs_SQLCELocationDataDefinition location in
                    tsldc.TaSLs_SQLCELocationDataDefinitions
                    where location.SavedToCloud = false
                    select location; 
```

...然后我得到，

> “*'TaSLS_PhoneApp.TaSLs_Data.TaSLs_SQLCELocationDataContext' 不包含采用 0 个参数的构造函数*”

它期待什么论据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:31:18.827

它期待连接字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:35:18.120

构造函数需要构造函数定义的连接字符串：

```
public TaSLs_SQLCELocationDataContext(string connectionString) 
```

尽管如此，由于您没有在代码中实例化您的表，您稍后会得到一个空引用异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:46:51.777

对于您的第一个问题“为什么在调用它的同一类中声明的公共类型需要实例化？” 您需要省略类名 - 在本例中为“TaSLs_SQLCELocation”并通过 this 关键字访问您的类属性。

但是，只有在您想从定义该属性的类中访问您的属性“TaSLs_SQLCELocationDataDefinitions”时才有效 - 在您的情况下为“TaSLs_SQLCELocationDataContext”

试试这个：

```
var locationsInDB = from TaSLs_SQLCELocationDataDefinition location in
                    this.TaSLs_SQLCELocationDataDefinitions
                where location.SavedToCloud = false
                select location; 
```

# oracle - 必须使用 JDBC 连接池重新启动 Webserver 以反映数据库记录更改？

> ID：14138073
> 
> 赞同：0
> 
> 时间：2013-01-03T11:29:47.003
> 
> 标签：oracle, jdbc, connection-pooling

我发现我的网络服务器有奇怪的行为。我对数据库所做的更改并没有反映在我的 Java Servlet 返回的输出中。

我的 servlet 使用 JDBC 连接池连接到 Oracle 数据库。

这是设置：

```
 <JDBCCONNECTIONPOOL name="mypool" datasourceclassname="oracle.jdbc.pool.OracleDataSource" steadypoolsize="8" 

maxpoolsize="32" poolresizequantity="2" idletimeout="300" maxwaittime="60000" 

connectionvalidationrequired="off" connectionvalidationmethod="auto-commit" 

validationtablename="" failallconnections="off" transactionisolationlevel="serializable" 

isolationlevelguaranteed="off"> 
```

要看到我的表更改，我需要重新启动我的网络服务器。

这是某种故障，还是我需要更改配置？

我确定我在 SQL Developer 上提交了所有更改。

谢谢

Ps 解释将不胜感激（加分！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:58:08.830

我看到你有：

```
 transactionisolationlevel="serializable" 
```

如果这是映射到 oracle 连接，那么您看到的行为就是我所期望的。

即即使其他会话提交，在与数据库的 java 连接提交之前，您也不会看到该行。

例如，以 2 个 sql*plus 会话为例。

```
SESSION 1                                   SESSION 2
SQL> create table foobar(id number);        SQL> alter session set isolation_level=serializable;

Table created.                              Session altered.

SQL> insert into foobar values (1);         SQL> select * from foobar;

1 row created.                              no rows selected 
```

到目前为止的预期结果，会话 2 看不到该行。现在我们在会话 1 中提交：

```
SQL> commit;                               

Commit complete.
                                           SQL> select * from foobar;

                                           no rows selected 
```

但仍然会话 2 看不到它。

```
 SQL> commit;

                                           Commit complete.

                                           SQL> alter session set isolation_level=serializable;

                                           Session altered.

                                           SQL> select * from foobar;

                                                   ID
                                           ----------
                                                    1 
```

但现在它可以一旦 session2 提交。

# sql-server - 使用北距/东距点匹配 SQL Server 中最近的几何数据

> ID：14138077
> 
> 赞同：2
> 
> 时间：2013-01-03T11:30:06.660
> 
> 标签：sql-server, geometry

我收到了一个 shapefile，其中包含英国给定区域的道路数据。

我使用[ShapeFile 上传](http://www.sharpgis.net/page/SQL-Server-2008-Spatial-Tools.aspx)器将 shapefile 上传到 SQL Server 2008 表，这很棒。

所以现在我为每一行存储了带有适当几何数据的记录。这由 LineString 数据组成，该数据由多个 Northing 作为 Easting 点组成）

例如：

> LINESTRING (338743.914 373987.193, 338750.531 373977.156, 338753.812 373973.375, 338758.156 373969.625, 338760.094 373968.156, 338762.719 373966.969, 338765.469 373966.594, 338771.125 373966.938, 338781.281 373969.844)

现在，我想创建一个查询，以便可以根据我提供的北距和东距值匹配数据库中的记录？

# ios - 从 Mac OS X 10.6.7 到最新版本的 MAC OS X

> ID：14138079
> 
> 赞同：0
> 
> 时间：2013-01-03T11:30:15.307
> 
> 标签：ios, xcode, macos

我最近将 xcode 更新为 4.4.1 。但它说，需要更新 Mac OSX。我现在有 10.6.7。我可以下载的最新版本的 Mac OSX 是什么？MAC OSX山狮是最新版本（10.8.2）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:33:23.960

是 Mac OS X 山狮 (10.8.2)（和一些小更新）是最新版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:55:41.410

是的，Mountain Lion 10.8 是 MAC OS X 的当前版本

参见[OSX 维基](http://en.wikipedia.org/wiki/OS_X)

请参阅[Apple 升级指南](http://www.apple.com/osx/how-to-upgrade/)

如您所见，您将需要其中一种型号才能升级

*   iMac（2007 年中或更新）
*   MacBook（2008 年末铝合金，或 2009 年初或更新）
*   MacBook Pro（2007 年中/后期或更新） MacBook Air（2008 年末或更新）
*   Mac mini（2009 年初或更新） Mac Pro（2008 年初或更新）
*   Xserve（2009 年初）

# java - 不同属性的双向绑定

> ID：14138082
> 
> 赞同：8
> 
> 时间：2013-01-03T11:30:29.453
> 
> 标签：java, binding, properties, javafx-2, bidirectional

我只是试图绑定一个 Integer 和一个 String 属性。经过一番谷歌搜索后，这应该可以使用提供的两种方法之一来实现：

1.  公共静态无效绑定双向（属性stringProperty，
    属性otherProperty，StringConverter转换器）

2.  public static void bindBidirectional(Property stringProperty,
    Property otherProperty, java.text.Format 格式)

不幸的是，这似乎对我不起作用。我究竟做错了什么？

```
import java.text.Format;

import javafx.beans.binding.Bindings;
import javafx.beans.property.SimpleIntegerProperty;
import javafx.beans.property.SimpleStringProperty;
import javafx.util.converter.IntegerStringConverter;

public class BiderectionalBinding {

    public static void main(String[] args) {
        SimpleIntegerProperty intProp = new SimpleIntegerProperty();
        SimpleStringProperty textProp = new SimpleStringProperty();

        Bindings.bindBidirectional(textProp, intProp, new IntegerStringConverter());

        intProp.set(2);
        System.out.println(textProp);

        textProp.set("8");
        System.out.println(intProp);    
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-06T14:39:58.500

类型混淆的简单问题

```
Bindings.bindBidirectional(textProp, intProp, new IntegerStringConverter()); 
```

应该：

```
Bindings.bindBidirectional(textProp, intProp, new NumberStringConverter()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:27:20.690

我在 Eclipse 中尝试了您的代码，并且不得不转换转换器。然后一切看起来都很好：

```
public class BiderectionalBinding {

    public static void main(String[] args) {
        SimpleIntegerProperty intProp = new SimpleIntegerProperty();
        SimpleStringProperty textProp = new SimpleStringProperty();
        StringConverter<? extends Number> converter =  new IntegerStringConverter();

        Bindings.bindBidirectional(textProp, intProp,  (StringConverter<Number>)converter);

        intProp.set(2);
        System.out.println(textProp);

        textProp.set("8");
        System.out.println(intProp);    
    }
} 
```

输出是：

字符串属性 [值：2]

整数属性 [值：8]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T13:48:35.390

我有一个类似的问题。我试图将字符串转换为文件对象并返回。但我使用了 Bindings.bindBidirectional(...,...,java.text.Format)。从字符串到文件的转换按预期工作，但在另一个方向上结果为空。我用你的例子试过了，同样的结果！我认为绑定机制存在错误，或者我对 java.text.Format 的实现是错误的..

```
package de.ludwig.binding.model;

import java.text.FieldPosition;
import java.text.Format;
import java.text.ParsePosition;

import javafx.beans.binding.Bindings;
import javafx.beans.property.SimpleIntegerProperty;
import javafx.beans.property.SimpleStringProperty;

public class BidirectionalBinding {

    public static void main(String[] args) {
        SimpleIntegerProperty intProp = new SimpleIntegerProperty();
        SimpleStringProperty textProp = new SimpleStringProperty();

        Bindings.bindBidirectional(textProp, intProp, new Format() {

            @Override
            public StringBuffer format(Object obj, StringBuffer toAppendTo,
                    FieldPosition pos) {
                return toAppendTo.append(obj.toString());
            }

            @Override
            public Object parseObject(String source, ParsePosition pos) {
                return Integer.parseInt(source);
            }

        });

        intProp.set(2);
        System.out.println(textProp);

        textProp.set("8");
        System.out.println(intProp);    
    }
} 
```

让事情按预期工作的唯一方法是按照 Hendrik Ebbers 的建议实施 StringConverter。谢谢你的提示！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:10:54.420

我认为这是一个错误。无论如何，您可以解决以下问题：

```
StringConverter sc = new IntegerStringConverter();
Bindings.bindBidirectional(textProp, intProp, sc); 
```

# lotus-notes - 通过 JAVA 应用程序连接到远程多米诺服务器的异常

> ID：14138088
> 
> 赞同：2
> 
> 时间：2013-01-03T11:31:13.317
> 
> 标签：lotus-notes, lotus-domino, lotus

当我尝试从我的 java 应用程序连接到 domino 服务器时，出现如下异常：

```
NotesException: Could not open Notes session
at lotus.domino.cso.Session.initSession(Unknown Source)
at lotus.domino.cso.Session.<init>(Unknown Source)
at lotus.domino.cso.Session.createSession(Unknown Source)
at lotus.domino.NotesFactory.createSessionUP(Unknown Source)
at lotus.domino.NotesFactory.createSession(Unknown Source)
at lotus.domino.NotesFactory.createSession(Unknown Source)
at com.nseit.email.ReadEmailRemotely.run(ReadEmailRem otely.java:23)
at java.lang.Thread.run(Unknown Source)
Caused by: org.omg.CORBA.COMM_FAILURE: java.net.ConnectException: Connection refused: connect Host: **127.0.0.1 Port: 63148** vmcid: 0x0 minor code: 1 completed: No
at lotus.priv.CORBA.iiop.ConnectionTable.get(Unknown Source)
at lotus.priv.CORBA.iiop.ConnectionTable.get(Unknown Source)
at lotus.priv.CORBA.iiop.Generic.getConnection(Unknow n Source)
at lotus.priv.CORBA.iiop.Generic.locate(Unknown Source)
at lotus.priv.CORBA.iiop.RepImpl.invokePreamble(Unkno wn Source)
at lotus.priv.CORBA.iiop.RepImpl.invoke(Unknown Source)
at lotus.priv.CORBA.portable.ObjectImpl._invoke(Unkno wn Source)
at lotus.domino.corba._IObjectServerStub.createSessio n(Unknown Source)
... 8 more
Caused by: java.net.ConnectException: Connection refused: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(Unknown Source)
at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at java.net.Socket.<init>(Unknown Source)
at lotus.priv.CORBA.iiop.Connection.newSocket(Unknown Source)
... 16 more 
```

***这是我的java代码：***

```
import lotus.domino.*;

public static void main(String argv[])
{
ReadEmailRemotely t = new ReadEmailRemotely();
Thread nt = new Thread((Runnable)t);
nt.start();
}

public void run()
{
try
{
String host = "xxx.xxx.xxx.xx:63148";
Session s = NotesFactory.createSession(host);

}
catch(Exception e)
{
e.printStackTrace();
}
} 
```

我正在使用**NCSO.jar**并且我已经验证了 DIIOP 连接的所有设置都是正确的。

既然我提供了**HARDCODE IP 地址**，为什么我的 JAVA 应用程序试图连接本地主机 IP (127.0.0.1)

**对此的任何建议都会有很大帮助。**

在 DOMINO 服务器上执行以下命令 **tell diiop show config**时，控制台输出显示几个参数，其中 2 个参数显示为

主机地址：127.0.0.1 公共主机名/地址：127.0.0.1

这是上述异常的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:35:29.133

我不确定你为什么得到 127.0.0.1，但错误“连接被拒绝”通常意味着 DIIOP 没有在该端口上运行。

从 Domino 服务器类型

```
load diiop 
```

之后尝试直接连接到 IOR_TEXT 以确保它正在运行（使用 Web 浏览器）。

例子：

```
http://xxx.xxx.xxx.xxx:63148/diiop_ior.txt 
```

如果服务器正常工作，您应该得到一串数字。

# sonarqube - 无法在网络浏览器上打开声纳服务器

> ID：14138089
> 
> 赞同：0
> 
> 时间：2013-01-03T11:31:16.410
> 
> 标签：sonarqube

我正在使用 open suse 12.2。我下载了声纳 3.4 并对其进行了配置。从终端，我启动了声纳服务器。但是当我尝试从浏览器打开它时，出现错误 503。以下是我的日志内容。

```
STATUS | wrapper  | 2013/01/03 16:55:52 | TERM trapped.  Shutting down.
INFO   | jvm 1    | 2013/01/03 16:55:53 | 2013-01-03 16:55:53.055:INFO::Graceful shutdown SelectChannelConnector@127.0.0.1:9000
INFO   | jvm 1    | 2013/01/03 16:55:53 | 2013-01-03 16:55:53.055:INFO::Shutdown hook executing
INFO   | jvm 1    | 2013/01/03 16:55:53 | 2013-01-03 16:55:53.064:INFO::Graceful shutdown org.mortbay.jetty.webapp.WebAppContext@22994311{/,file:/home/tom/sonar-3.4/war/sonar-server}
INFO   | jvm 1    | 2013/01/03 16:55:54 | 2013-01-03 16:55:54.064:INFO::Stopped SelectChannelConnector@127.0.0.1:9000
INFO   | jvm 1    | 2013/01/03 16:55:54 | 2013-01-03 16:55:54.069:INFO::Shutdown hook complete
STATUS | wrapper  | 2013/01/03 16:55:55 | <-- Wrapper Stopped
STATUS | wrapper  | 2013/01/03 16:55:55 | --> Wrapper Started as Daemon
STATUS | wrapper  | 2013/01/03 16:55:55 | Launching a JVM...
INFO   | jvm 1    | 2013/01/03 16:55:55 | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
INFO   | jvm 1    | 2013/01/03 16:55:55 |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.
INFO   | jvm 1    | 2013/01/03 16:55:55 | 
INFO   | jvm 1    | 2013/01/03 16:55:55 | 2013-01-03 16:55:55.813:INFO::Logging to org.sonar.application.FilteredLogger@76663cdf via org.sonar.application.FilteredLogger
INFO   | jvm 1    | 2013/01/03 16:55:55 | 2013-01-03 16:55:55.856:INFO::jetty-6.1.25
INFO   | jvm 1    | 2013/01/03 16:55:56 | 2013-01-03 16:55:56.034:INFO::NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,437 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,442 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,443 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.xml]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,446 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Setting up default configuration.
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,538 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,564 |-ERROR in ch.qos.logback.core.util.ContextUtil@d0a861a - Failed to get local hostname java.net.UnknownHostException: linux-svq9: linux-svq9: Name or service not known
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at java.net.UnknownHostException: linux-svq9: linux-svq9: Name or service not known
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.net.InetAddress.getLocalHost(InetAddress.java:1438)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.util.ContextUtil.getLocalHostName(ContextUtil.java:30)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.util.ContextUtil.addHostNameAsProperty(ContextUtil.java:39)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.classic.joran.action.ConfigurationAction.begin(ConfigurationAction.java:48)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.spi.Interpreter.callBeginAction(Interpreter.java:277)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:149)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.spi.Interpreter.startElement(Interpreter.java:131)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.spi.EventPlayer.play(EventPlayer.java:50)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:148)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:134)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at ch.qos.logback.core.joran.GenericConfigurator.doConfigure(GenericConfigurator.java:97)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.core.config.Logback.configure(Logback.java:71)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.core.config.Logback.configure(Logback.java:57)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.server.platform.PlatformLifecycleListener.configureLogback(PlatformLifecycleListener.java:45)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:32)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:74)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.sonar.application.StartServer.main(StartServer.java:49)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.lang.reflect.Method.invoke(Method.java:601)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.lang.Thread.run(Thread.java:722)
INFO   | jvm 1    | 2013/01/03 16:55:56 | Caused by: java.net.UnknownHostException: linux-svq9: Name or service not known
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  at java.net.InetAddress.getLocalHost(InetAddress.java:1434)
INFO   | jvm 1    | 2013/01/03 16:55:56 |   at  ... 31 common frames omitted
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,564 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,566 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [SONAR_FILE]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,607 |-INFO in ch.qos.logback.core.rolling.FixedWindowRollingPolicy@77291e95 - No compression will be used
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,625 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[SONAR_FILE] - Active log file name: /home/tom/sonar-3.4/logs/sonar.log
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,625 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[SONAR_FILE] - File property is set to [/home/tom/sonar-3.4/logs/sonar.log]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,626 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,626 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [PROFILING_FILE]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,627 |-INFO in ch.qos.logback.core.rolling.FixedWindowRollingPolicy@2c970551 - No compression will be used
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,628 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[PROFILING_FILE] - Active log file name: /home/tom/sonar-3.4/logs/profiling.log
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,628 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[PROFILING_FILE] - File property is set to [/home/tom/sonar-3.4/logs/profiling.log]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,628 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [rails] to false
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,628 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - rails level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [SONAR_FILE] to Logger[rails]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.hibernate.cache.ReadWriteCache level set to ERROR
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.hibernate level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.hibernate.SQL level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.apache.ibatis level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - java.sql level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - java.sql.ResultSet level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - org.sonar.MEASURE_FILTER level set to WARN
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.action.LevelAction - ROOT level set to INFO
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [SONAR_FILE] to Logger[ROOT]
INFO   | jvm 1    | 2013/01/03 16:55:56 | 16:55:56,629 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@6ede1fb5 - Registering current configuration as safe fallback point
INFO   | jvm 1    | 2013/01/03 16:55:56 | 
2013.01.03 16:55:56 INFO  o.s.s.p.ServerImpl  Sonar Server / 3.4 / 9db1dffb31df6def5b2d28d903fa1a7de6a725a3
2013.01.03 16:55:58 INFO  o.s.s.d.EmbeddedDatabase  Starting embedded database on port 9092 with url jdbc:h2:tcp://localhost:9092/sonar
2013.01.03 16:55:58 ERROR o.s.s.p.Platform  Unable to start database
org.sonar.api.utils.SonarException: Unable to start database
    at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:75) ~[classes/:na]
    at org.sonar.server.database.EmbeddedDatabaseFactory.start(EmbeddedDatabaseFactory.java:41) ~[classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_09]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_09]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_09]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_09]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored.start(Stored.java:110) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760) ~[picocontainer-2.14.1.jar:na]
    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:72) ~[sonar-plugin-api-3.4.jar:na]
    at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:186) ~[classes/:na]
    at org.sonar.server.platform.Platform.init(Platform.java:129) ~[classes/:na]
    at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33) [classes/:na]
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.Server.doStart(Server.java:224) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:74) [sonar-application-3.4.jar:na]
    at org.sonar.application.StartServer.main(StartServer.java:49) [sonar-application-3.4.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_09]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_09]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_09]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_09]
    at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240) [wrapper-3.2.3.jar:3.2.3]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_09]
Caused by: org.h2.jdbc.JdbcSQLException: IO Exception: "java.net.UnknownHostException: linux-svq9: linux-svq9: Name or service not known" [90028-167]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329) ~[h2-1.3.167.jar:1.3.167]
    at org.h2.message.DbException.get(DbException.java:158) ~[h2-1.3.167.jar:1.3.167]
    at org.h2.message.DbException.convert(DbException.java:273) ~[h2-1.3.167.jar:1.3.167]
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:263) ~[h2-1.3.167.jar:1.3.167]
    at org.h2.server.TcpServer.getURL(TcpServer.java:193) ~[h2-1.3.167.jar:1.3.167]
    at org.h2.tools.Server.start(Server.java:456) ~[h2-1.3.167.jar:1.3.167]
    at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:71) ~[classes/:na]
    ... 35 common frames omitted
Caused by: java.net.UnknownHostException: linux-svq9: linux-svq9: Name or service not known
    at java.net.InetAddress.getLocalHost(InetAddress.java:1438) ~[na:1.7.0_09]
    at org.h2.util.NetUtils.getLocalAddress(NetUtils.java:261) ~[h2-1.3.167.jar:1.3.167]
    ... 38 common frames omitted
Caused by: java.net.UnknownHostException: linux-svq9: Name or service not known
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method) ~[na:1.7.0_09]
    at java.net.InetAddress$1.lookupAllHostAddr(InetAddress.java:866) ~[na:1.7.0_09]
    at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1258) ~[na:1.7.0_09]
    at java.net.InetAddress.getLocalHost(InetAddress.java:1434) ~[na:1.7.0_09]
    ... 39 common frames omitted
INFO   | jvm 1    | 2013/01/03 16:55:58 | 2013-01-03 16:55:58.831:WARN::Failed startup of context org.mortbay.jetty.webapp.WebAppContext@6bf58923{/,file:/home/tom/sonar-3.4/war/sonar-server}
INFO   | jvm 1    | 2013/01/03 16:55:58 | org.sonar.api.utils.SonarException: Unable to start database
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.server.database.EmbeddedDatabase.start(EmbeddedDatabase.java:75)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.server.database.EmbeddedDatabaseFactory.start(EmbeddedDatabaseFactory.java:41)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at java.lang.reflect.Method.invoke(Method.java:601)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.behaviors.Stored.start(Stored.java:110)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:72)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:186)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.server.platform.Platform.init(Platform.java:129)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:74)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.sonar.application.StartServer.main(StartServer.java:49)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at java.lang.reflect.Method.invoke(Method.java:601)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2013/01/03 16:55:58 |   at java.lang.Thread.run(Thread.java:722)
INFO   | jvm 1    | 2013/01/03 16:55:58 | 2013-01-03 16:55:58.848:INFO::Started SelectChannelConnector@127.0.0.1:9000 
```

我的配置文件如下

# -------------------------------------------------- ------

```
# This file must contain only ISO 8859-1 characters
# see http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Properties.html#load(java.io.InputStream)
#
# To use an environment variable, use the following syntax :  ${env:NAME_OF_ENV_VARIABLE}
# For example :
#   sonar.jdbc.url: ${env:SONAR_JDBC_URL}
#
#
# See also the file conf/wrapper.conf for JVM advanced settings
#---------------------------------------------------------

#---------------------------------------------------------
# WEB SETTINGS - STANDALONE MODE ONLY
# These settings are ignored when the war file is deployed to a JEE server.
#---------------------------------------------------------
# Listen host/port and context path (for example / or /sonar). Default values are 0.0.0.0:9000/.
sonar.web.host:                           127.0.0.1
sonar.web.port:                           9000
sonar.web.context:                        /

# Log HTTP requests. Deactivated by default.
#sonar.web.jettyRequestLogs: ../../logs/jetty-yyyy_mm_dd.request.log
#sonar.web.jetty.threads.min:              5
#sonar.web.jetty.threads.max:              50
#sonar.web.jetty.threads.low:              10

#-----------------------------------------------------------------------
# DATABASE
#
# IMPORTANT : the embedded database H2 is used by default. 
# It is recommended for tests only. Please use an external database
# for production environment (MySQL, Oracle, Postgresql, SQLServer)
#
#-----------------------------------------------------------------------

#----- Credentials
# Permissions to create tables and indexes must be granted to JDBC user.
# The schema must be created first.
sonar.jdbc.username:                       sonar
sonar.jdbc.password:                       sonar

#----- Embedded database H2
# Note : it does not accept connections from remote hosts, so the
# sonar server and the maven plugin must be executed on the same host.

# Comment the following line to deactivate the default embedded database.
sonar.jdbc.url:                            jdbc:h2:tcp://localhost:9092/sonar
sonar.jdbc.driverClassName:                org.h2.Driver

# directory containing H2 database files. By default it's the /data directory in the sonar installation.
sonar.embeddedDatabase.dataDir:
# H2 embedded database server listening port, defaults to 9092
sonar.embeddedDatabase.port:               9092

#----- MySQL 5.x/6.x
# Comment the embedded database and uncomment the following line to use MySQL
#sonar.jdbc.url:                            jdbc:mysql://localhost:3306/sonar?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true

# Optional properties
#sonar.jdbc.driverClassName:                com.mysql.jdbc.Driver

#----- Oracle 10g/11g
# To connect to Oracle database :
#
# - It's recommended to use the latest version of the JDBC driver (either ojdbc6.jar for Java 6 or ojdbc5.jar for Java 5).
#   Download it in http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html
# - Copy the driver to the directory extensions/jdbc-driver/oracle/
# - Comment the embedded database and uncomment the following line :
#sonar.jdbc.url:                            jdbc:oracle:thin:@localhost/XE

# Optional properties
#sonar.jdbc.driverClassName:                oracle.jdbc.OracleDriver

# Uncomment the following property if the Oracle account has permissions to access multiple schemas,
# for example sonar schemas with different versions. In that case, use the same property during project analysis
# (-Dsonar.jdbc.schema=<schema>)
# The schema is case-sensitive.
#sonar.jdbc.schema:                         sonar

#----- PostgreSQL 8.x/9.x
# Comment the embedded database and uncomment the following property to use PostgreSQL
#sonar.jdbc.url:                            jdbc:postgresql://localhost/sonar

# Optional properties
#sonar.jdbc.driverClassName:                org.postgresql.Driver

# Uncomment the following property if the PostgreSQL account has permissions to access multiple schemas,
# for example sonar schemas with different versions. In that case, use the same property during project analysis
# (-Dsonar.jdbc.schema=<schema>)
#sonar.jdbc.schema:                         public

#----- Microsoft SQLServer
# The Jtds open source driver is available in extensions/jdbc-driver/mssql. More details on http://jtds.sourceforge.net
#sonar.jdbc.url:                            jdbc:jtds:sqlserver://localhost/sonar;SelectMethod=Cursor

# Optional properties
#sonar.jdbc.driverClassName:                net.sourceforge.jtds.jdbc.Driver

#----- Connection pool settings
sonar.jdbc.maxActive:                      20
sonar.jdbc.maxIdle:                        5
sonar.jdbc.minIdle:                        2
sonar.jdbc.maxWait:                        5000
sonar.jdbc.minEvictableIdleTimeMillis:     600000
sonar.jdbc.timeBetweenEvictionRunsMillis:  30000

#---------------------------------------------------------
# UPDATE CENTER
#---------------------------------------------------------

# The Update Center requires an internet connection to request http://update.sonarsource.org
# It is activated by default:
#sonar.updatecenter.activate=true

# HTTP proxy (default none)
#http.proxyHost=
#http.proxyPort=

# NT domain name if NTLM proxy is used
#http.auth.ntlm.domain=

# SOCKS proxy (default none)
#socksProxyHost=
#socksProxyPort=

# proxy authentication. The 2 following properties are used for HTTP and SOCKS proxies.
#http.proxyUser=
#http.proxyPassword=

#---------------------------------------------------------
# NOTIFICATIONS
#---------------------------------------------------------

# Delay (in seconds) between processing of notification queue
sonar.notifications.delay=60 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-07-27T17:41:02.890

你没有说你部署在什么操作系统上，但是在 RHEL 6.7 上，将主机名添加到 /etc/hosts 为我们解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:53:40.040

它是因为数据库初始化问题 ar localhost：
您应该在相同的 url 上使用您的数据库服务器和 Web 服务器...
如果您的 jdbc.url 不在您的本地主机中，则它应该与您在声纳服务器属性中配置的相同。

# c# - 显示等待屏幕 WindowsPhone8

> ID：14138091
> 
> 赞同：2
> 
> 时间：2013-01-03T11:31:20.453
> 
> 标签：c#, windows-phone-8

我的应用程序中的某些操作需要一些时间，我想显示等待屏幕，以便用户在操作完成之前可能不会做任何事情。

请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:45:13.367

您可以通过以下方式编辑 Frame 模板并插入特殊控件：

```
<Style x:Key="mainFrameStyle" TargetType="phone:PhoneApplicationFrame">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="phone:PhoneApplicationFrame">
            <Border x:Name="ClientArea" BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"
                    HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                    <Grid x:Name="mainFrameGrid">
                        <ContentControl ContentTemplate="{TemplateBinding ContentTemplate}"
                                Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                                HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalAlignment}"
                                VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" />

                        <Grid Background="Black" Visibility="{Binding IsBusy, Converter={StaticResource TrueToVisibleConverter}, Source={StaticResource FrameViewModel}}">
                            <TextBlock Text="Loading.." VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Grid>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并使用以下代码在 InitializePhoneApplication() 中的 App.xaml.cs 中应用此模板：

```
 RootFrame = new TransitionFrame();
    RootFrame.Style = Resources["mainFrameStyle"] as Style; 
```

因此，您只需将一些视图模型注册为静态资源，并在需要时更改它的 IsBusy 属性。

# qml - 如何在黑莓10级联qml中的listview上实现按钮单击事件？

> ID：14138094
> 
> 赞同：2
> 
> 时间：2013-01-03T11:31:24.793
> 
> 标签：qml, blackberry-10, blackberry-cascades

我有一个带有按钮的列表视图，但无法触发 qml blackberry 10 中按钮的单击事件？任何人都可以帮我解决这个问题，

```
ListView {
    verticalAlignment: VerticalAlignment.Center
    horizontalAlignment: HorizontalAlignment.Center
    layout: FlowListLayout {
    }
    dataModel: mydatamodel
    listItemComponents: [
        ListItemComponent {
            type: "item"
            Container {
                layout: DockLayout {
                }

                Button {
                    id: samplebutton
                    text: "Button"
                    horizontalAlignment: HorizontalAlignment.Right
                    onClicked: {
                        //click event not fired here..
                    }
                }
                Label {
                    horizontalAlignment: HorizontalAlignment.Left
                    text: "Sample Label"
                }
                Divider {
                    horizontalAlignment: HorizontalAlignment.Fill
                }
            }
        }
    ]
    onTriggered: {
        var selectedItem = dataModel.data(indexPath);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T15:44:01.797

我怀疑这可能是与您粘贴的代码之外的某些内容有关的问题，但是您可以尝试以下方法作为 onclicked 的替代方法，这可能对您更有效。

如果以下选项都不起作用，那么您需要检查控制台日志以查找可能导致它的任何内容。

```
onTouch: {
  if (event.isUp()) {
    //do stuff here
  }
} 
```

或者

```
gestureHandlers: [
    gestureHandlers: [
        TapHandler {
            onTapped: {
                 //do stuff.  This is equivalent to an onClick
            }                
        },
        LongPressHandler {
            onLongPressed: {
                //do stuff when user holds down
            }            
        }        
] 
```

# android - LLCP 面向连接和无连接 + P2P NFC

> ID：14138098
> 
> 赞同：0
> 
> 时间：2013-01-03T11:31:47.710
> 
> 标签：android, nfc, osi

在 LLCP 中，有 2 种传输方式：

*   面向连接
*   无连接

有人知道哪种 LLCP 传输与以下组合使用：

*   核电厂
*   SNEP

NPP 只是 1-way，所以它可能因为确认而与面向连接的结合，但我不知道。SNEP 有这个确认来确认收到的包，所以也许它与无连接 LLCP 结合以避免冗余，但我不确定。

我希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:52:09.110

我在 Google 的 Source Code 的文件 target.c 中找到了以下内容：

```
/*
 * Services a LLCP conversation with a BEAM device, such as Android ICS, or
 * an NPP device, such as Android GB. First attempts to connect on well known
 * SNEP service. If that request is denied, connects to the NPP service by
 * name. Once connected, sends the NDEF record via the available protocol.
 *
 * LLCP is a connection oriented protocol. The state is managed by llcp.c.
 * The basic flow is as follows:
 * 1) Connect on SNEP service (4)
 * 2) If fails, connect on NPP service by name
 * 3) Once connected, send payload via SNEP or NPP
 * 4) If SNEP, wait for acknowledgment (NPP does not ackonwledge)
 * 5) Disconnect
 *
 * Arguments:
 *   resp - Buffer to be reused to receive LLCP commands
 *   resp_len - Size of resp in bytes
 *   ndef - Data to send to peer, e.g. a NDEF record
 *   ndef_len - Length of payload in bytes
 *
 * Returns:
 *   true if all data was passed to peer, false on error or timeout
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T17:40:29.617

NPP 和 SNEP 都使用了面向连接的 LLCP 通道

# iphone - ViewController 解除分配上的 Rogue Zombie

> ID：14138099
> 
> 赞同：0
> 
> 时间：2013-01-03T11:31:52.697
> 
> 标签：iphone, xcode, ipad, dealloc, zombie-process

在 Xcode 中，启动一个新的主从项目。称之为“测试”。

向其中添加一个新的“文件”。`UIViewController`用 XIB把它变成一个文件。称它为 TestViewController。

在方法中修改你的 MasterViewController 代码，`insertNewObject:`这样说：

```
-(void)insertNewObject:(id)sender
{
    TestViewController *initViewController = [[TestViewController alloc] initWithNibName:@"TestViewController" bundle:nil];

    [self.navigationController pushViewController:initViewController animated:YES];

    [initViewController release];
} 
```

现在在 TestViewController.m 中添加一个`dealloc`方法并简单地调用`[super dealloc];`

在此处设置断点并运行应用程序。一切都应该运行正常。

但是，如果启用 Zombie 对象，您可能会`*** -[TestViewController class]: message sent to deallocated instance 0x7484f20 error`在跨步时得到一个`[super dealloc]`。

你也明白吗？我在 iOS6.0 模拟器上，并在尝试调试导致我出现此问题的问题时遇到了它。

想法赞赏。这是一个iOS错误吗？还是模拟器错误？

为“清晰”添加了 TestViewController 代码

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;   
} 

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning 
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)dealloc
{
    // Zombie here???
    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:01:02.333

我猜你的 TestViewController 有网点和属性。如果这些属性/插座中的任何一个被过度释放，都会导致此错误。确保 [super dealloc] 也是你的 dealloc 方法的最后一行

# r - R中的Dropbox文件夹提取

> ID：14138103
> 
> 赞同：2
> 
> 时间：2013-01-03T11:32:12.883
> 
> 标签：r, tar

我正在尝试提取存储在保管箱（文件夹中）上的一些功能。

一切都很顺利，直到我尝试解压文件。这是一个例子：

```
library("R.utils")
temp <- tempfile()
temp<-paste(temp,".gz",sep="")
download.file("http://www.dropbox.com/sh/dzgrfdd18dljpj5/OyoTBMj8-v?dl=1",temp)
untar(temp,compressed="gzip",exdir=dirname(temp)) 
```

在这里我得到一个错误：

```
Error in rawToChar(block[seq_len(ns)]) : 
  embedded nul in string: 'PK\003\004\024\0\b\b\b.... 
```

理想情况下，我会像这样加载文件夹中的所有功能：

```
sourceDirectory(dirname(temp)) 
```

...但我需要能够先解压它们。我可以在 Windows 中打开存档，但在 RI 中会出现上述错误。任何人都可以帮忙吗？我尝试使用 unzip ，但这仅适用于从保管箱下载的较小文件夹（例如上面的文件夹），较大的文件夹仅适用于 gzip 格式（至少以我的经验）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:31:26.400

```
# use the httr package
library(httr)

# define your desired file
u <- "http://www.dropbox.com/sh/dzgrfdd18dljpj5/OyoTBMj8-v?dl=1"

# save the file to a .zip
tf <- paste0( tempfile() , '.zip' )

# create a temporary directory
td <- tempdir()

# get the file
fc <- GET(u)

# write the content of the download to a binary file
writeBin(content(fc, "raw"), tf)

# unzip it.
unzip( tf , exdir = td )

# locate all files in this directory
af <- list.files( td , recursive = TRUE )

# subset the files to the ones ending with R
R.files <- af[ substr( af , nchar( af ) , nchar( af ) ) == 'R' ]

# set your working directory
setwd( td )

# source 'em
for ( i in R.files ) source( i ) 

# see that they're loaded
ls() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T12:16:46.290

也许您必须使用`mode='wb'`download.file 的选项。

# javascript - 将 ajax 返回的字符串转换为数组数组

> ID：14138106
> 
> 赞同：0
> 
> 时间：2013-01-03T11:32:12.667
> 
> 标签：javascript, ajax, json, parsing

我有一个 AJAX 调用，它返回一个`string`理想情况下应该是数组的数组

```
var jsonString = "[['name1', 30, 20], ['name2', 10, 100], ['name3', 140, 130]]"; 
```

这就是我得到的回报。我想将其转换为数组数组

```
var jsonArray = [['name1', 30, 20], ['name2', 10, 100], ['name3', 140, 130]]; 
```

显然`string.split(",")`不会工作，并给了我一个包含 9 个元素的数组。

我该如何解析这个？

我的小提琴：http: [//jsfiddle.net/codovations/hgLJh/](http://jsfiddle.net/codovations/hgLJh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:51:17.080

我检查了你的字符串，如果你确定你的字符串在数组元素中有 ' 而不是 "，你可以用 " 替换它们，然后你可以将它们解析为 json：

```
JSON.parse('[["name1", 30, 20], ["name2", 10, 100], ["name3", 140, 130]]'); 
```

返回数组数组。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:34:03.660

使用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)功能：

```
var jsonArray = JSON.parse(jsonString); 
```

虽然请注意，这仅在您传递给它的字符串是有效的 JSON 时才有效。您提供的不是 - JSON 字符串用双引号括起来，而不是单引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:57:06.633

使用此字符串，您可以使用：`JSON.parse(jsonString.replace(/'/g,'"'))`.

# jquery - jQuery如何从提交按钮中选择所有输入字段APART

> ID：14138113
> 
> 赞同：4
> 
> 时间：2013-01-03T11:32:45.300
> 
> 标签：jquery

我目前正在通过以下方式使用 jQuery 选择表单的所有输入字段：

```
$('#new_user_form *').filter(':input').each(function(key, value) { 
```

尽管它也选择了提交输入，但我不希望它这样做，但它工作正常。有没有一种简单的方法让它忽略提交按钮？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T11:33:28.810

您可以使用`:not()`：

```
$('#new_user_form input:not([type="submit"])') 
```

此外，请注意`:input`其他非标准选择器。它们没有与实现`document.querySelectorAll`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:45:49.353

试试这个：

```
var inputs = $('#new_user_form input').not(':input[type=submit]');

$(inputs).each(function() {
    // your code...
});​ 
```

[小提琴](http://jsfiddle.net/sawrW/1/)

**更新** *（基于@Blender 输入）*

```
var inputs = $('#new_user_form input').not('[type=submit]');

$(inputs).each(function() {
    // your code...
});​ 
```

[小提琴2](http://jsfiddle.net/sawrW/2/)

# debugging - 在 Kindle Fire HD 上运行时的 Unity3D 调试

> ID：14138115
> 
> 赞同：0
> 
> 时间：2013-01-03T11:32:48.477
> 
> 标签：debugging, unity3d, kindle-fire

就像主题一样，我可以在 Kindle Fire HD 上的 Unity3D 中调试运行时脚本吗？以前有人做过吗？在 MonoDev “附加到流程”中，我只能看到编辑器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-24T07:15:23.207

使用`Debug.Log();`函数进行调试。如果您需要在 Kindle 上运行时进行调试，您必须创建 GUI 脚本才能将文本呈现到屏幕上。

```
using UnityEngine;
using System.Collections;

public class ExampleClass : MonoBehaviour {
    void OnGUI() {
        GUI.Label(new Rect(10, 10, 100, 20), "Hello World!");
    }
} 
```

有关更多详细信息，请参阅此 Unity 文档页面 - [https://docs.unity3d.com/ScriptReference/GUI.Label.html](https://docs.unity3d.com/ScriptReference/GUI.Label.html)

# c# - 依赖注入的最佳实践

> ID：14138118
> 
> 赞同：9
> 
> 时间：2013-01-03T11:33:12.460
> 
> 标签：c#, asp.net-mvc, dependency-injection, asp.net-mvc-4, ninject

我正在使用 MVC 4 在 ASP.net 中创建一个新项目。

我想使用`Ninject`. 但在我继续之前，设置依赖注入时的最佳实践是什么？

目前我在 webproject 中有一个 binder 类设置，它将引用解决方案中的数据项目。

binder类如下图所示：

```
 Public static class Binder
{
    static Ninject.IKernel _kernel;

    static Binder()
    {
        _kernel = new Ninject.StandardKernel();

        _kernel.Bind<IConfig>().To<AppSettingsConfig>();
        _kernel.Bind<IDocuments>().To<DocumentsClass.Documents>();

    }

    public static T GetImplementation<T>()
    {
        return _kernel.Get<T>();
    }

} 
```

然后在我的控制器中，我使用 GetImplementation 方法来使用确切的 require 依赖项，而不是在应用程序启动时全部注册。

来自控制器的示例代码：

```
Public ActionResult Get (int id)
{
    var repository = Binder.GetImplementation<IDocuments>();

    // do some stuff with the repository here
} 
```

不确定这是否是一个好方法？任何建议都会很好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T11:59:10.810

您现在拥有的是 Service Locator 反模式的示例。谷歌了解更多细节，因为它已经讨论过很多次了。

简而言之，而不是依赖服务定位器

```
public class SomeController 
{
  public ActionResult Get (int id)
  {
      var repository = Binder.GetImplementation<IDocuments>();

      // do some stuff with the repository here
  }
} 
```

您应该将服务注入客户端类（依赖于构造函数注入）

```
public class SomeController 
{
  private IDocuments documentService { get; set; }      

  public SomeController( IDocuments documentService ) 
  {
    this.documentService = documentService;
  } 

  public ActionResult Get (int id)
  {
      var repository = documentService; 

      // do some stuff with the repository here
  }
} 
```

在这种特定情况下，您可以设置您的控制器工厂以使用您的 IoC 容器来解析您的控制器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:55:14.910

Ninject 的最佳实践是使用 Ninject 的 MVC 扩展：[https ://github.com/ninject/ninject.web.mvc/wiki/MVC3](https://github.com/ninject/ninject.web.mvc/wiki/MVC3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:47:14.173

您已链接到控制器内的 Binder 类的实例。它使您的类不可重用并且必须对其进行重构，因为控制器没有责任获得 IDocuments 实现的正确实例。必须有一些外部依赖解析器（例如示例 - Ninject）必须进行构造函数注入或属性注入。

# java - 休眠方言

> ID：14138120
> 
> 赞同：1
> 
> 时间：2013-01-03T11:33:12.873
> 
> 标签：java, hibernate

我正在使用 Hibernate 从 sql server 2008 访问数据。同时执行以下代码

```
Session session = sessionFactory.openSession();
String qry="select Form_Id,SUBSTRING( 
       (SELECT ( '' + t2.Form_Layout_Txt) FROM Form_Layout_Info t2  
            WHERE t1.Form_Id = t2.Form_Id " +
            " GROUP BY Form_Layout_Txt FOR XML path('') ), 1,1000000000) 
             FROM Form_Layout_Info t1 GROUP BY  Form_Id";

SQLQuery query = session.createSQLQuery(qry);
recordList = query.list(); 
```

我的休眠属性是

```
hibernate.connection.driver_class=com.microsoft.sqlserver.jdbc.SQLServerDriver
hibernate.connection.url=jdbc:sqlserver://localhost:1433;databaseName=abc;integratedSecurity=false;
hibernate.dialect=org.hibernate.dialect.SQLServerDialect
hibernate.connection.username=sa
hibernate.connection.password=p123asc 
```

我收到以下错误

```
No Dialect mapping for JDBC type: -9 
```

如何解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:38:02.203

您需要`hibernate.dialect=org.hibernate.dialect.SQLServerDialect`为 sql server 提供配置。

在 hibernate.cfg.xml 中将其提供为：

```
<hibernate-configuration>
    <session-factory name="session-factory">
        .....
        <property name="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</property>
        ....
 </session-factory>
</hibernate-configuration> 
```

或在属性文件中：

```
hibernate.dialect=org.hibernate.dialect.SQLServerDialect 
```

我不知道你使用的是哪种方式，所以我都知道。

我在[这里](http://devnumbertwo.com/ms-sql-server-hibernate-no-dialect-mapping-for-jdbc-type-9/)为您的问题找到了 2 个解决方案：

1.  尝试使用微软提供的 ms sql server jdbc 驱动程序将您的驱动程序更改为 jTDS 可能会导致此问题，而 jTDS 不会给出此投诉。

2.  您可能需要明确地“addScalar”到您的休眠查询。你可能有这样的事情：

    sess.createSQLQuery("SELECT * FROM CATS"); // 尝试更改为： sess.createSQLQuery("SELECT * FROM CATS") .addScalar("ID", Hibernate.LONG) .addScalar("NAME", Hibernate.STRING) .addScalar("BIRTHDATE", Hibernate.DATE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:54:27.443

此问题与返回数据时完成的类型映射有关。并且在方言中不存在该特定数据类型的映射。

[https://forum.hibernate.org/viewtopic.php?f=1&t=959583](https://forum.hibernate.org/viewtopic.php?f=1&t=959583)

休眠数据类型 -

[http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/type/StandardBasicTypes.html](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/type/StandardBasicTypes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T02:35:40.293

该错误意味着休眠不知道如何将 JDBC 类型“NVARCHAR”映射到休眠类型。

解决方案 1：像这样使用 addScalar：

```
Session session = sessionFactory.openSession();
String qry="select Form_Id,SUBSTRING( 
   (SELECT ( '' + t2.Form_Layout_Txt) as formLayoutTxt FROM Form_Layout_Info t2  
        WHERE t1.Form_Id = t2.Form_Id " +
        " GROUP BY Form_Layout_Txt FOR XML path('') ), 1,1000000000) 
         FROM Form_Layout_Info t1 GROUP BY  Form_Id";

SQLQuery query = session.createSQLQuery(qry).addScalar("formLayoutTxt", StringType.INSTANCE);
recordList = query.list(); 
```

解决方案2：在方言中注册Hibernate类型

```
public class MySQLServerDialect extends SQLServerDialect {

  public MySQLServerDialect() {
    super();

    // Register mappings
    registerHibernateType(Types.NVARCHAR, StringType.INSTANCE.getName());
  }
} 
```

有关更多详细信息，请查看[此](http://jkssweetlife.com/fix-hibernate-dialect-mapping-jdbc-type/)。

# jquery - 在 html 表单中编辑附加元素

> ID：14138123
> 
> 赞同：1
> 
> 时间：2013-01-03T11:33:30.550
> 
> 标签：jquery, html

我做了一个这样的html表单：

```
<!DOCTYPE HTML>
<html lang="en-IN">
<head>
    <title>jQuery Form</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="jquery.min.js"></script>
    <script src="main.js"></script>
</head>

<body>

<div id="left-sidebar">

  <div id="input-box" class="element" >Input Box</div>
  <div id="text-area" class="element" >Text Area</div>
</div>
<div id="main">
  <form id="myForm">
  </form>
</div> 

</body>

</html> 
```

现在我想用 jQuery 代码创建一个输入框。我在这里做过：

```
jQuery(document).ready(function() {

  textBox = 'Name: <input type="text" name="name1" id="name1" />';
  jQuery('#input-box').click(function() {
    jQuery('#myForm').append(textBox);
  });

  jQuery('#btnDel').attr('disabled','disabled');
}); 
```

之后，我得到了一个输入框，以“名称：”的形式附加到表单中。如何使名称字段可通过 jQuery 编辑，根据他的要求编辑名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:38:55.047

您可以更好地使用 onChange 函数来动态编辑文本框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:52:30.500

You can change this line
`textBox = 'Name: <input type="text" name="name1" id="name1" />';`

to this:
`textBox = '<label for="name1">Name:</label> <input type="text" name="name1" id="name1" />';`

After that you can `get` and `set` the label text using this code: `$('label[for="name1"]').html();`

# android - Android：视频可从图库播放，但当我使用 Intent.ACTION_VIEW 类型视频播放时，无法播放

> ID：14138130
> 
> 赞同：3
> 
> 时间：2013-01-03T11:33:59.873
> 
> 标签：android, video, android-intent

[这是我原来的问题](https://stackoverflow.com/questions/14133140/intent-action-view-video-external-storage-video-sorry-this-video-cannot-be-pl/)

我已经在那里实施了答案，但问题仍然存在。

这是要点：所以我正在从外部存储（SD卡）播放视频，播放视频时遇到问题，这是我的代码：

```
Uri uri = Uri.parse(url);
intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(uri, "video/*"); 
```

提示“抱歉，此视频无法播放”，但在图库中可以播放。我打印了网址，这就是我得到的：

```
VideoPlayer url: file:///mnt/sdcard/foldername/video-2012-12-26-21-26--44.mp4 
```

该文件存在于我得到的答案中。但是问题仍然存在，我不知道出了什么问题。

任何见解都值得赞赏。谢谢

编辑：致那些在第一个问题中没有看到答案的人。我已经实现了这个：

```
intent = new Intent(Intent.ACTION_VIEW);

File sdCard = Environment.getExternalStorageDirectory();
File file = new File(sdCard, "/foldername/video-2012-12-26-21-26--44.mp4");

intent.setDataAndType(Uri.fromFile(file), "video/*");

startActivity(intent); 
```

该文件存在，因为我已经检查过它。我想知道文件命名约定是否有问题。

我也在调试我的设备，三星 Galaxy Ace，Android 2.3.6，用 4.2 sdk 编译。

编辑 2：我尝试将视频重命名为更简单的视频，现在视频可以正常工作，我的猜测是该文件具有文件名长度限制或命名约定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T11:37:09.767

此代码来自我制作的工作应用程序，请尝试一下。

```
Intent intent = new Intent();
            intent.setAction(Intent.ACTION_VIEW);
            intent.setDataAndType(
                    Uri.parse("file://"+ file.getAbsolutePath()),
                    "video/*"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:46:09.667

您需要使用该`file`方案：

所以你应该使用`intent.setDataAndType("file://" + uri, "video/*");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:16:33.567

我尝试了不同的解决方案。但我猜这个问题是由于命名约定而发生的。我尝试将文件重命名为更简单的格式并且它可以工作。另外我的原始文件名的问题是文件名中有一个“--”。

# java - JavaMail 在 IMAPMessage.loadEnvelope() 上间歇性地抛出 FolderClosedExcpetion

> ID：14138139
> 
> 赞同：2
> 
> 时间：2013-01-03T11:34:33.817
> 
> 标签：java, imap, jakarta-mail

我有一个使用来自 Postfix 邮件服务器的电子邮件的 java 服务。它每秒处理大约 1 封电子邮件并处理电子邮件的内容。

但是，我间歇性地收到此异常：

```
javax.mail.FolderClosedException : * BYE [ALERT] Fatal error: Invalid argument - javax.mail.FolderClosedException: * BYE [ALERT] Fatal error: Invalid argument
        at com.sun.mail.imap.IMAPMessage.loadEnvelope(IMAPMessage.java:1256)
        at com.sun.mail.imap.IMAPMessage.getSubject(IMAPMessage.java:335)
        at com.mailparser.data.MessageParser.parse(MessageParser.java:33) 
```

如果我退出该进程并再次重新启动它，它总是会在相同的消息上抛出相同的异常，因此它们会卡在收件箱中。

这是失败的代码片段：

```
if (!message.getFolder().isOpen()) {
    message.getFolder().open(Folder.READ_WRITE);
    Logger.log("Tried to reopen folder"); //This is never hit
}
ReceivedEmail incomingMessage = new ReceivedEmail();
try {
    incomingMessage.setSubject(message.getSubject()); // Exception happens here
    [...]
} catch {
    catch (FolderClosedException ex) {
        message.getFolder().open(Folder.READ_WRITE); 
        Logger.log("Reopened", LogType.debug);
        return null;
    }
} 
```

如您所见，在尝试获取主题之前，我正在检查文件夹是否已打开，因此我怀疑是其他原因导致了此失败。一旦它抛出了对卡住消息的期望，它就会使用完全相同的文件夹和连接成功地进行。

有人对此有任何想法吗？

谢谢！

编辑：

比尔要求的调试信息：

```
 DEBUG IMAP: LOGIN command trace suppressed
    DEBUG IMAP: LOGIN command result: A0 OK LOGIN Ok.
    A1 CAPABILITY
    * CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT THREAD=REFERENCES SORT QUOTA IDLE ACL ACL2=UNION
    A1 OK CAPABILITY completed
    A2 LIST INBOX ""
    * LIST (\Marked \HasChildren) "." ""
    A2 OK LIST completed
    A3 LIST "" INBOX.TEST
    * LIST (\HasChildren) "." "INBOX.TEST"
    A3 OK LIST completed
    DEBUG: connection available -- size: 1
    A4 SELECT INBOX.TEST
    * FLAGS (\Draft \Answered \Flagged \Deleted \Seen \Recent)
    * OK [PERMANENTFLAGS (\* \Draft \Answered \Flagged \Deleted \Seen)] Limited
    * 1 EXISTS
    * 0 RECENT
    * OK [UIDVALIDITY 1351176418] Ok
    * OK [MYRIGHTS "acdilrsw"] ACL
    A4 OK [READ-WRITE] Ok

DEBUG IMAP: IMAPProtocol noop
A7 NOOP
A7 OK NOOP completed
A8 FETCH 1 (FLAGS)
* 1 FETCH (FLAGS (\Answered \Seen))
A8 OK FETCH completed.
A9 FETCH 1 (ENVELOPE INTERNALDATE RFC822.SIZE)
* BYE [ALERT] Fatal error: Invalid argument 
```

# core-data - 进行自动轻量级迁移后如何执行一段代码？

> ID：14138146
> 
> 赞同：1
> 
> 时间：2013-01-03T11:35:07.947
> 
> 标签：core-data, core-data-migration

我有一个核心数据模型，我想在另一个新的核心数据模型中删除一个实体，但是在执行此操作时（或之后），我想执行一些代码（比如说，将旧实体保存到 XML 文件或类似文件中）使用 ObjC 片段）。我知道迁移仅删除实体的模型很容易，并且可以使用轻量级迁移自动完成，但不确定是否执行一些代码。也许我别无选择，不得不创建更复杂的东西，比如映射模型，使用 NSRemoveEntityMappingType，子类 NSEntityMigrationPolicy 并重写类似 beginEntityMapping:manager:error: 或者 createDestinationInstancesForSourceInstance:entityMapping:manager:error: 但不确定最后一个，因为没有新实体，因为我想要的是删除它。

欢迎任何想法。非常感谢您的时间。里卡多。

# excel - 数据透视表最大值返回空白而不是实际值

> ID：14138150
> 
> 赞同：1
> 
> 时间：2013-01-03T11:35:14.643
> 
> 标签：excel, pivot-table

我有一个使用以下源数据构建的数据透视表

```
Group  Product Date added
Group1 Item1   2012-01-01
Group1 Item2   2012-01-02
Group1 Item3   (blank)
Group2 Item4   2011-10-03
Group2 Item5   2011-10-05 
```

当我如下构建数据透视表时

```
Row label : Group
Values    : MAX(Date added) 
```

我得到以下结果

```
Groups MAX(Date added)
Group1 (blank)
Group2 2011-10-05 
```

我不确定为什么会发生这种情况，我期待 group1 项目获得 2012-01-02。

即使我有 #ERROR 或 #VALUE 错误，也会发生相同的行为。

我该如何处理这种问题，我可以用 1900-01-01 填充我的源数据还是有一个忽略空值或错误值的函数？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:13:12.443

您的**“添加日期”**字段很可能是生成文本字段的公式，因此数据透视表可能不会将该字段理解为值。

在“添加日期”字段的右侧添加一列

```
=VALUE(C2) 
```

*其中 c2 是添加日期字段中的第一个值。将其复制到添加日期列的全部内容。

您也可以在同一列中写入：

```
=IF(ISERROR(VALUE(C2)),"",VALUE(C2)) 
```

这基本上会使所有“空白”点都为空，因此数据透视表可以读取它们。

然后在数据透视表中使用该列（添加日期 2）。

# c# - DATABASE 和 DATATABLE 之间的重复检查

> ID：14138155
> 
> 赞同：0
> 
> 时间：2013-01-03T11:35:26.280
> 
> 标签：c#, .net, mysql

我的数据库中有一个名为 PNUMSET（主键）的列包含唯一数据。（大约 1L 行）

在应用程序中，我有一个包含数据的列名为 NEWPNUM 的数据表。

我想检查现有数据库和当前数据表值之间是否没有值匹配..

注意：- 数据库和数据表中的行数可能相同也可能不同。

到目前为止我试过......

```
 String query = "Select PNUMSET FROM DUMMYTABLE";
           MySqlDataAdapter msda = new MySqlDataAdapter(query, connection);
           msda.Fill(dt);                

            for (int k = 0; k < Class1.global_dataset.Tables[0].Rows.Count; k++)
            {
                if (dt.Rows.Contains(Class1.global_dataset.Tables[0].Rows[k][4].ToString()))
                {
                    MessageBox.Show("Baj Gaya Ghanta!!!!");
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:44:25.830

您可以使用此`Linq-To-DataTable`列[连接](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)两个表，例如：

```
var commonRows = from r1 in dt.AsEnumerable()
                 join r2 in Class1.global_dataset.Tables[0].AsEnumerable()
                 on r1.Field<int>(4) equals r2.Field<int>(4)
                 select r1;
if(commonRows.Any())
{
    // do something with these rows
} 
```

（假设第 5 列和它的类型`int`）

请注意，虽然[`Enumerable.Join`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.join.aspx)效率很高，但最好在数据库中进行比较，而不是将所有内容都加载到内存中。

# python - MySQL-python 接口未使用 MySQL 服务器版本 5.5.27 插入数据

> ID：14138159
> 
> 赞同：-1
> 
> 时间：2013-01-03T11:35:46.883
> 
> 标签：python

我正在使用 MySQL-python 接口 1.2.3 和 MySQL 服务器版本 5.1.63。

编写python脚本来创建表并将数据插入表中。它的工作正常。

现在我正在使用 MySQL 服务器版本 5.5.27 并执行相同的脚本来创建表和插入数据。我能够创建表但无法将数据插入表中。

我无法找到我做错的地方。

任何人都可以帮助我如何克服这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:25:23.550

当我当时使用 MySQL 服务器版本 5.1.63 时，我没有使用 db_connection.commit() 将数据保存到数据库中。但在不使用的情况下，我也能够将数据保存到 MySQL 数据库中。

例子：

```
 c = conn.cursor()

  # Create table
  c.execute('''CREATE TABLE stocks
         (date text, trans text, symbol text, qty real, price real)''')

  # Insert a row of data
  c.execute("INSERT INTO stocks VALUES ('2006-01-05','BUY','RHAT',100,35.14)") 
```

在此执行后数据将更新到数据库中。

但是对于 5.5.27 MySQL 服务器版本，我们需要使用 db_connection.commit() 将数据保存到数据库中。

示例：c = conn.cursor()

```
 # Create table
 c.execute('''CREATE TABLE stocks
         (date text, trans text, symbol text, qty real, price real)''')

 # Insert a row of data
 c.execute("INSERT INTO stocks VALUES ('2006-01-05','BUY','RHAT',100,35.14)")

 # Save (commit) the changes
 conn.commit()

 # We can also close the connection if we are done with it.
 # Just be sure any changes have been committed or they will be lost.
 conn.close() 
```

# regex - (?: 在正则表达式中做什么

> ID：14138161
> 
> 赞同：31
> 
> 时间：2013-01-03T11:35:53.207
> 
> 标签：regex, asp-classic

我遇到了一个我不完全理解的正则表达式 - 有人可以帮我破译它：

```
^home(?:\/|\/index\.asp)?(?:\?.+)?$ 
```

它用于 url 匹配，上面的示例匹配以下 url：

```
home
home/
home/?a
home/?a=1
home/index.asp
home/index.asp?a
home/index.asp?a=1 
```

在我看来，括号内的问号`(?:`没有任何作用。有人可以启发我。

使用的正则表达式版本是 Classic ASP 提供的版本，如果有帮助的话，它正在服务器上运行。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-03T11:37:05.890

`(?:)`创建一个*非捕获组*。它将事物组合在一起而不创建反向引用。

反向引用是您可以在表达式中引用的部分或可能的替换（通常通过说`\1`或`$1`等 - 取决于风格）。在编程语言中使用正则表达式时，您通常也可以在之后从匹配中提取它们。使用的唯一原因`(?:)`是避免创建新的反向引用，从而避免增加组号，并节省（通常可以忽略不计的）内存

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-03T11:38:44.057

它是一个非捕获组，本质上与 using 相同`(...)`，但不保留内容（不能作为反向引用）。

如果你正在做这样的事情：`(abc)(?:123)(def)`你会进入`abc`和`$1`进入`def`，`$2`但`123`只会被匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-30T07:34:25.117

它真的很容易每个括号都会在内存中创建一个变量，因此您可以在之后使用括号值以便不将其保存在内存中，只需放入：？在像这样 (?:) 的括号中，然后根据需要填写其余部分。仅此而已

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-18T05:57:09.557

从文档：

```
(?:...)
A non-capturing version of regular parentheses. Matches whatever regular expression is inside the parentheses, but the substring matched by the group cannot be retrieved after performing a match or referenced later in the pattern. 
```

# x11 - 在 X11 中发送 KeyPress 事件

> ID：14138162
> 
> 赞同：1
> 
> 时间：2013-01-03T11:35:59.710
> 
> 标签：x11, keypress

我有一个程序，由于各种原因，我需要将按键事件发送到各个窗口。我现在正在使用什么

```
XEvent event;
/* set some other stuff*/
event.type = KeyPress;
event.xkey.keycode     = XKeysymToKeycode(display,XStringToKeysym(curr_key)); 
```

适用于小写字母和数字，但我需要对其进行修改，以便它能够发送回车键和大写字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:57:24.063

从 XStringToKeysym 手册页：

无效 XConvertCase（KeySym 密钥，KeySym *lower_return，KeySym *upper_return）；

XConvertCase函数返回指定Keysym的大小写形式，如果KeySym经过大小写转换；否则，将指定的 KeySym 返回给 lower_return 和 upper_return。对拉丁语和西里尔语 KeySyms 以外的转换的支持取决于实现。

所有的键符都在 /usr/include/X11/keysymdef.h 例如​​输入键是 XK_Return。字母也在那里，例如 XK_a 和 XK_A。

# windows-ce - 将 Windows Mobile Pocket PC 客户端移植到 Windows CE Mobile 客户端

> ID：14138163
> 
> 赞同：0
> 
> 时间：2013-01-03T11:36:04.297
> 
> 标签：windows-ce, pocketpc

我有一个使用 windows mobile 6 专业 SDK 编译的 Pocket PC 应用程序。

现在我希望应用程序与 Windows CE 一起工作。

在 Windows CE 上编译并使其在 Windows CE 上运行的过程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:24:38.287

这可能听起来很傻或很明显，但是：**使用 Windows CE SDK 构建它**（[下载链接](http://www.microsoft.com/en-us/download/details.aspx?id=17310)）。

**第 1 步：**安装 SDK 后，创建一个新的 Windows CE 项目。

**第 2 步：**在新 CE 项目中获取空白 Form1.cs 表单，并将其重命名为您在旧 Windows Mobile 6 项目中使用的表单。

快完成了。

**第 3 步：**现在，关闭 Visual Studio，浏览到 Windows CE 项目文件夹，然后删除刚刚重命名的那个窗体。

**第 4 步：**浏览到您的 Windows Mobile 6 项目文件夹。将**除**`bin`and`obj`文件夹以及 .proj 和 .sln 文件之外的所有内容复制到 Windows CE 项目文件夹。

**第 5 步：**打开 Visual Studio 和 Windows CE 项目。

**第 6 步：**疯狂并点击运行 [F5]。

这很可能会产生许多错误。这些错误是因为您调用了特定于 Windows Mobile 的函数，或者可能是因为同一函数的 Windows CE 版本需要不同的参数。

**第 7 步：**有些东西可能不容易移植到 Windows CE。对于这些项目，您可以启动新线程，例如*“如何使用 Windows CE 执行 FunctionWM()？”* 之类的。

# selenium-rc - 如何在 selenium RC 中查找输入的值是否被屏蔽？

> ID：14138166
> 
> 赞同：0
> 
> 时间：2013-01-03T11:36:10.020
> 
> 标签：selenium-rc

我有用户名和密码字段。输入密码后，我应该验证输入的密码是否被屏蔽。

有没有办法在 selenium - RC 中验证这一点？

谢谢钱德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:05:14.977

没有。这是视觉呈现的东西，而不是 DOM 可访问的属性。

# c# - WPF、MediaElement 和 MediaElement.Clip 与 EllipseGeometry

> ID：14138167
> 
> 赞同：0
> 
> 时间：2013-01-03T11:36:11.900
> 
> 标签：c#, wpf, mediaelement

我正在使用`MediaElement`.
我在`MediaElement`a `MediaElement.Clip`->下添加了`EllipseGeometry`仅显示部分视频。
我想做4个按钮，每个按钮都会改变椭圆几何的中心位置。
当前代码是这样的：

```
<Grid>
    <Canvas Height="279" HorizontalAlignment="Left" Margin="26,20,0,0" Name="canvas1" VerticalAlignment="Top" Width="453">
        <Button Canvas.Left="22" Canvas.Top="200" Height="30" Width="30" HorizontalAlignment="Center" VerticalAlignment="Center" Panel.ZIndex="1">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <StackPanel>
                        <ContentPresenter Content="{TemplateBinding Content}" />
                    </StackPanel>
                </ControlTemplate>
            </Button.Template>
            <Image Source="Images\play.png"/>
        </Button>
        <MediaElement Canvas.Left="22" Canvas.Top="80" Height="193" Name="mediaElement1" Width="244" Panel.ZIndex="0" Source="C:\Users\ilans\Documents\Visual Studio 2010\Projects\Wildlife.wmv">
            <MediaElement.Clip>
                <EllipseGeometry Center="50,80" RadiusX="20" RadiusY="20" />
            </MediaElement.Clip>
        </MediaElement>
        <Button Canvas.Left="356" Canvas.Top="40" Content="Button" Height="23" Name="button1" Width="75" Click="button1_Click" />
    </Canvas>
</Grid> 
```

如何添加操纵`MediaElement.Clip`和`EllipseGeometry` 位置的新按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:37:51.950

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        Point ellipsePoint = new Point(80, 80);
        mediaElement1.Clip = new EllipseGeometry(ellipsePoint, 30, 30);
    } 
```

# xcode - Xcode 中的 Flickr RSS

> ID：14138168
> 
> 赞同：0
> 
> 时间：2013-01-03T11:36:17.677
> 
> 标签：xcode, rss

有人有这个代码吗？只需要实现一个 flickr 相册的 rss 内容。我什至不知道从哪里开始。我花了很多时间在 Objectiveflickr 上搞砸，但我不断收到编译错误，最终被专业人士随便建议 RSS 图像提要就足够了。我最初怀疑这一点，但没有找到让我开始的代码。

# entity-framework-5 - 实体如何在父子关系中允许外键？

> ID：14138172
> 
> 赞同：1
> 
> 时间：2013-01-03T11:36:46.257
> 
> 标签：entity-framework-5

我有实体

```
/// <summary>
/// The greoup.
/// </summary>
public class Group
{
    #region Public Properties

    /// <summary>
    /// Gets or sets the group id.
    /// </summary>
    [Key]
    public int GroupId { get; set; }

    /// <summary>
    /// Gets or sets the parent group id.
    /// </summary>     
    public int ParentGroupId { get; set; }

    /// <summary>
    /// Gets or sets the active.
    /// </summary>
    public int Active { get; set; }

    /// <summary>
    /// Gets or sets the description.
    /// </summary>
    public string Description { get; set; }

    /// <summary>
    /// Gets or sets the group guid.
    /// </summary>
    public Guid GroupGuid { get; set; }

    /// <summary>
    /// Gets or sets the order weight.
    /// </summary>
    public int OrderWeight { get; set; }

    /// <summary>
    /// Gets or sets the parent group.
    /// </summary>
    [ForeignKey("ParentGroupId")]
    public virtual Group ParentGroup { get; set; }

    /// <summary>
    /// Gets or sets the groups.
    /// </summary>
    public virtual ICollection<Group> Groups { get; set; }

    #endregion
} 
```

我怎样才能允许退出的外键。因为当我尝试在 ParentGroupId = 0 时添加组时。我得到了异常

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:47:01.850

您正在使用此结构在数据库中创建一个自引用表。所以`ParentGroupId`必须是可以为空的。根节点不能有父节点，但是由它产生的所有节点都将有父节点，因此您需要将其设为`ParentGroupId`可空。

# drop-down-menu - Yii 框架中的依赖多下拉

> ID：14138173
> 
> 赞同：1
> 
> 时间：2013-01-03T11:36:46.817
> 
> 标签：drop-down-menu, yii, multi-select

我想做两个下拉

1.  选择组
2.  选择成员（多下拉）

当用户选择第一个下拉菜单（组）时，我想用所选组的成员动态填充成员 Multidropdowen。

选择成员是一个多下拉菜单，用户可以选择多个成员。

我能够完成依赖下拉或独立的 Multidropdown，但我无法整合这两者。我已经尝试过扩展`http://www.yiiframework[dot]com/extension/emultiselect`和`http://www.yiiframework[dot]com/extension/echmultiselect`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T09:27:34.237

您为第一个下拉列表实施 ajax 更新以更新第二个：

```
echo CHtml::dropDownList('country_id','', array(1=>'USA',2=>'France',3=>'Japan'),
array(
    'ajax' => array(
    'type'=>'POST', //request type
    'url'=>CController::createUrl('currentController/dynamiccities'), //url to call.
    //Style: CController::createUrl('currentController/methodToCall')
    'update'=>'#city_id', //selector to update
    //'data'=>'js:javascript statement' 
    //leave out the data key to pass all form values through
))); 
//empty since it will be filled by the other dropdown
echo CHtml::dropDownList('city_id','', array()); 
```

在您的控制器中，您可以拥有：

```
public function actionDynamiccities()
{
    $data=Location::model()->findAll('parent_id=:parent_id',
    array(':parent_id'=>(int) $_POST['country_id']));

    $data=CHtml::listData($data,'id','name');
    foreach($data as $value=>$name)
    {
        echo CHtml::tag('option',
            array('value'=>$value),CHtml::encode($name),true);
    }
} 
```

来源： [http ://www.yiiframework.com/wiki/24/](http://www.yiiframework.com/wiki/24/)

# arduino - Arduino 如何检测 LED 的状态？

> ID：14138176
> 
> 赞同：2
> 
> 时间：2013-01-03T11:36:52.420
> 
> 标签：arduino, led

我正在为 Arduino 开发闪烁/褪色灯程序。我正在尝试建立一些基于 LED 状态和某些开关组合的交互性。考虑：当按下按钮时，如果 LED 亮起，我想将其关闭，如果 LED 熄灭，我想将其打开。

但是，我无法找到有关确定 LED 状态的任何信息。最接近的是[这个](https://stackoverflow.com/questions/4788529/android-getting-status-on-led)关于 Android 的问题，但我想知道我是否可以从 Arduino 平台做到这一点。有没有人有任何实践经验或建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T22:33:37.920

读取输出端口是绝对可以的。那是

```
digitalWrite(LED_PORT, !digitalRead(LED_PORT)); 
```

将切换引脚。

您可能还想考虑切换库： http: [//playground.arduino.cc/Code/DigitalToggle](http://playground.arduino.cc/Code/DigitalToggle)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T11:43:15.243

你有几个选择：

一，您可以将 LED 状态存储在布尔值中，然后在按下按钮时将其取反并将其写入 LED 端口：

```
void loop()
{
    static int ledState = 0; // off
    while (digitalRead(BUTTON_PIN) == 0)
        ; // wait for button press

    ledState = !ledState;
    digitalWrite(LED_PORT, ledState);
} 
```

二、如果你不介意直接访问AVR的端口：

```
void init()
{
    DDRD = 0x01; // for example: LED on port B pin 0, button on port B pin 1
    PORTB = 0x00;
}

void loop()
{
    while (PINB & 0x02 == 0)
        ; // loop until the button is pressed

    PORTB ^= 0x01; // flip the bit where the LED is connected
} 
```

# javascript - 点击链接时会发生什么

> ID：14138177
> 
> 赞同：1
> 
> 时间：2013-01-03T11:36:57.513
> 
> 标签：javascript, jquery, mobile, hyperlink, hover

我正在建立一个网站，其中导航菜单中的某些元素有一个子菜单。当鼠标悬停在元素上时会显示这些子菜单，但是在移动设备上我当然不能这样做，因为没有实际的悬停。点击意味着点击，点击链接。我希望有一个简单的解决方案，但它不适用于我的移动设备......

这是一个循环内的代码片段，是一个包含( )`this`的菜单项 ( )：`li``submenu``ul`

```
$(this).find("a").on("mouseenter focusin click", function(e) {
    if(submenu.css("display") != "block") {
        e.preventDefault(); //should work on mobile
    }
    submenu.stop().css('display', 'block').animate({
        top: 1.2em,
        opacity: 1
    }, 200);
}); 
```

现在我在 Firefox 中进行测试。在正常使用中，您不能在子菜单出现之前实际单击菜单项，因为一旦鼠标悬停在它上面就会`display`变为。`block`因此，在 Web 控制台中，我输入：

```
$("#nav > ul > li:first-child > a").click() 
```

这给出了预期的行为。子菜单出来，但链接没有被关注。在移动设备上，该链接仍然被关注...什么给出了？

# 更新

我刚刚输入了两个警报语句。一个在处理程序中说事件类型的第一件事，一个在之前说“防止默认” `e.preventDefault`。在我的移动浏览器（Android 的 Dolphin 浏览器）上，点击菜单项会显示以下内容：

1.  事件是 mouseenter
2.  防止违约
3.  事件是点击

自然，当触发的第一个事件是“mouseenter”时，默认不会阻止单击，因为这是菜单显示的点。换句话说，我需要确保第一个 mouseenter 确实显示了菜单，但没有触发单击...我可以检查`top`css 属性，但我想知道是否还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:25:41.143

我通过添加另一个检查来查看子菜单是否在正确的位置，而不是使用`display`.

```
$(this).find("a").on("mouseenter focusin click", function(e) {
    if(e.type == "click" && submenu.css("top") != "1.2em") {
        e.preventDefault();
    }
    submenu.stop().css('display', 'block').animate({
        top: 1.2em,
        opacity: 1
    }, 200);
}); 
```

# php - 如何编写重定向到两个不同页面的“根”RewriteRule？

> ID：14138178
> 
> 赞同：0
> 
> 时间：2013-01-03T11:36:58.517
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我正在为 .htaccess 苦苦挣扎，我有以下代码：

```
<pre>
# PRODUCTS
RewriteRule ^(.*)/(.*)$     /newwebsite/product.php?category=$1&product=$2 [L,NC]

# SERVICES
RewriteRule ^(.*)/(.*)$     /newwebsite/service.php?category=$1&service=$2 [L,NC]

# PLAIN PAGES
RewriteRule ^/$                             /newwebsite/index.php  [L,NC]
RewriteRule ^signup-free$                   /newwebsite/signup-free.php  [L,NC]
RewriteRule ^about$                         /newwebsite/content.php?page=1 [L,NC]
RewriteRule ^portfolio$                     /newwebsite/portfolio.php [L,NC]
RewriteRule ^our-stores$                    /newwebsite/our-stores.php  [L,NC]
RewriteRule ^contact$                       /newwebsite/contact.php  [L,NC]
RewriteRule ^products-list$                 /newwebsite/lists.php?action=products  [L,NC]
RewriteRule ^services-list$                 /newwebsite/lists.php?action=services  [L,NC]
</pre> 
```

我的代码无法正常工作，我需要在产品和服务规则中添加一些内容，以使它们分别重定向到“product.php”和“service.php”，而不再添加“斜杠”或“子文件夹”，但我没有'不知道什么和如何，我的意思是我只需要那个：

```
http://www.root.com/maintenance-services/weekly-pool-service  
  redirects to =>  
http://www.root.com/service.php?category=maintenance-services&service=weekly-pool-service 
```

但同时我需要：

```
http://www.root.com/hot-tubs/jacuzzi 
  redirects to =>  
http://www.root.com/product.php?category=hot-tubs&product=jacuzzi 
```

如何区分产品和服务，如何告诉 apache 使用相同的参数转到不同的页面？

我很困惑。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:42:43.673

制作文件`rewrite.php`，将所有内容重定向到那里：

```
RewriteRule ^(.*)/(.*)$     /newwebsite/rewrite.php?sub=$1&second=$2 [L,NC] 
```

将所有逻辑放在这个文件中。

伪代码

```
if($_GET['sub'] exists in table "service") {
   $_GET['category'] = $_GET['sub'];
   $_GET['service'] = $_GET['second'];
   include 'service.php';
}else{
   ...
} 
```

# android - Maps api v2 android 我的位置在 2.3.3 上不起作用

> ID：14138183
> 
> 赞同：4
> 
> 时间：2013-01-03T11:37:22.327
> 
> 标签：android, google-maps, location, google-maps-android-api-2

我在支持 2.3.3 的 android 应用程序中使用 maps api v2，并且我设置了 setMyLocationEnabled(true)，当然我的按钮在果冻豆上工作正常，但在 2.3.3 上不工作。

以下是我如何称呼地图：

```
 private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap(){
    mMap.setMyLocationEnabled(true);
    if(ttdBranch!=null){
        mMap.addMarker(new MarkerOptions()
        .position(new LatLng(ttdBranch.getLatitude(), ttdBranch.getLongitude()))
        .snippet(getResources().getString(R.string.branch) + "\n" + ttdBranch.getName()));
        LatLng pos = new LatLng(ttdBranch.getLatitude(),ttdBranch.getLongitude());
        mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(pos, 14));
    }
} 
```

这是清单：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />

<uses-feature android:glEsVersion="0x00020000" android:required="true"/>

<permission android:name="*******.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>

<uses-permission android:name="*******.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_ttd_petales"
    android:label="@string/app_name"
    android:theme="@style/Holo.Theme.Light" >
    <activity
        android:name="*******.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="*******.BranchesMapActivity" />
    <activity android:name="*******.BranchDetailActivity"/>

    <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="*******"/> 
```

我确保在手机上启用了位置传感器，并且它在谷歌地图应用程序上工作，但不在我的应用程序中。

有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:14:13.017

**请在下面检查这个..**

1.检查项目中是否存在包含“android-support-v4.jar”的“libs”文件夹。

```
"android-support-v4.jar" is located in "/extras/android/compatibility/v4/android-support-v4.jar" under your "android-sdk" drectory. 
```

“Google Maps Android API 需要 API 级别 12 或更高级别才能支持 MapFragment 对象。如果您的目标应用程序**早于 API 级别 12**，您可以通过 SupportMapFragment 类访问相同的功能。您还必须包含 Android支持图书馆。” [本 Android 开发指南（点击此处）中对此](https://developers.google.com/maps/documentation/android/map)进行了描述。

2.在运行您的项目之前，您必须将您的项目构建目标设置为“Google APIs”，而不是 Android xx 版本：

```
Select your project and click Project > Properties > Project Build Target in Eclipse and select any "Google APIs ", and then run your project on your real phone(handset). If you use the emulator, you will get the failed result because the app with the Google Play Service library is not supported in the emulator. 
```

**“Android 模拟器不支持 Google Play 服务**——要使用 API 进行开发，您需要提供开发设备，例如 Android 手机或平板电脑。” [本 Android 开发指南（点击此处）](http://developer.android.com/intl/ko/google/play-services/setup.html)中对此进行了描述。

3.再一次，您不需要创建新的 Google Maps API 密钥来测试您的项目，只需使用默认提供的 API 密钥，在您的 Google中显示为“**浏览器应用程序密钥（带引用者）** ” API 控制台。

4.最后最重要的是将Google Play服务添加为Android库项目如下：

```
Select File > Import > Android > Existing Android Code Into Workspace and click Next. Select Browse..., enter /extras/google/google_play_services/libproject/google-play-services_lib, and click Finish. 
```

希望我的评论对你有用。

# java - Java –“错误：无法找到或加载主类”错误

> ID：14138188
> 
> 赞同：3
> 
> 时间：2013-01-03T11:37:41.907
> 
> 标签：java

[错误和类 http://puu.sh/1ITnS.png](http://puu.sh/1ITnS.png)

当我将类文件命名为 Main.class 时，java 说它的名称错误，当我将它命名为 shop.Main.class 时，它说找不到主类。任何人都可以帮忙吗？

```
package shop;

import java.text.DecimalFormat;

public class Main
{  
    public static void main(String args[])
    {  
        Cart cart = new Cart(new Catalogue());
        printOrder(cart);
    }

    public static void printOrder(Cart cart)
    {
        DecimalFormat df = new DecimalFormat("0.00");
        System.out.println("Your order:");
        for(int itemIndex = 0; itemIndex < cart.itemsInCart.products.size(); 
            itemIndex++)
            if (cart.itemsInCart.products.get(itemIndex).quantity != 0)
                System.out.println(cart.itemsInCart.products.get(itemIndex).quantity 
                    + " " + cart.itemsInCart.products.get(itemIndex).name 
                    + " $"+ df.format(cart.itemsInCart.products.get(itemIndex).price) 
                    + " = $" + df.format
                    ((cart.itemsInCart.products.get(itemIndex).quantity 
                    * cart.itemsInCart.products.get(itemIndex).price)));

        double subtotal = 0;
        int taxPercent = 20;
        double tax;
        double total;

        for(int itemIndex = 0; itemIndex < cart.itemsInCart.products.size(); 
            itemIndex++)
            subtotal += cart.itemsInCart.products.get(itemIndex).quantity 
            * cart.itemsInCart.products.get(itemIndex).price;
        tax = subtotal * taxPercent / 100;
        total = subtotal + tax;

        System.out.print("Subtotal: $" + df.format(subtotal) 
            + " Tax @ " + taxPercent + "%: $" + df.format(tax) 
            + " Grand Total: $" + df.format(total));
    }  
} 
```

忽略以下两行之间

––––––––––––––––––––––––––––––––––––––</p>

编辑摘要

哎呀！您的修改无法提交，因为：

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

取消

–––––––––––––––––––––––

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T11:40:58.957

执行这些命令：

```
cd ..
java shop.Main 
```

您无法从尝试引用的包中运行 java 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:40:51.523

保留它 Main.class 并`java shop.Main`从 java 文件夹中的命令行尝试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:40:58.447

编译：~/java> javac shop/Main.java

运行：~/java> java shop.Main

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:45:55.003

如果手动编译，您应该小心将类放在正确的文件夹中（包名称等于磁盘上的文件夹名称）。我建议使用 IDE（Eclipse 和 Netbeans 都是不错的免费选择）。

如果您将 Main.class 放在名为“shop”的文件夹中，然后从项目根文件夹执行“java shop/Main”，则您的示例将起作用

# sql - 伪造一个长时间运行的 SQL 语句

> ID：14138189
> 
> 赞同：16
> 
> 时间：2013-01-03T11:37:49.587
> 
> 标签：sql, sql-server

我想伪造一个长时间运行的 SQL 语句，这样我就可以试验[sys.dm_exec_requests](http://msdn.microsoft.com/en-us/library/ms177648.aspx)

“假”不是描述它的最佳方式，但有人对选择自动生成的记录有什么好的建议吗？也许使用 CTE？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-03T11:44:03.310

这是一个长时间运行的 SQL 语句：

```
WAITFOR DELAY '0:05'; 
```

执行大约需要五分钟。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T11:55:57.030

在一个查询窗口中，执行以下操作：

```
BEGIN TRANSACTION

SELECT * from TableY with (XLOCK) 
```

然后，在另一个窗口中，执行任何尝试访问`TableY`. 它会一直运行，直到您关闭第一个窗口或在其中执行`ROLLBACK`or `COMMIT`。

(*) 假设您没有`NOLOCK`向`TableY`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:40:00.240

就在我写“CTE”的时候……它让我思考。稍后快速搜索并在 [http://smehrozalam.wordpress.com/2009/06/09/t-sql-using-common-table-expressions-cte-to-generate-sequences/上进行变体](http://smehrozalam.wordpress.com/2009/06/09/t-sql-using-common-table-expressions-cte-to-generate-sequences/)

```
--define start and end limits
Declare @start bigint, @end bigint
Select @start=1, @end=99999

;With NumberSequence( Number ) as
(
    Select @start as Number
        union all
    Select Number + 1
        from NumberSequence
        where Number < @end
)

--select result
Select * From NumberSequence Option (MaxRecursion 0) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-30T11:47:40.280

我真的很喜欢 Alex KeySmith 的 CTE 答案[https://stackoverflow.com/a/14138219/318411](https://stackoverflow.com/a/14138219/318411)，因为您可以将其应用于您自己的查询；这意味着您可以以长时间运行的形式返回有效数据。

因此，例如，如果您有一个包含几行的测试表，但您想快速了解应用程序代码在处理大型结果集时的表现，您可以执行以下操作：

```
 declare @i int, @c int
    select @i = 1, @c = 10;
    with X as (
        select @i as N union all select N + 1 from x where N < @c
    )
    select 
        T.*
    from
        X,
    (   
        select 
            *
        from
            MySmallTestTable
    ) AS T
    option (MaxRecursion 0) 
```

这将重复测试数据`@c`时间。

我也用它来测试查询取消代码。

# git - Git是否可以在结帐后恢复未暂存的文件

> ID：14138193
> 
> 赞同：1
> 
> 时间：2013-01-03T11:38:09.573
> 
> 标签：git

我不小心删除了一个文件，该文件具有许多更改以及其他文件中的其他修改。

直到这部分我没有提交任何文件。

最重要的是，我检查了我之前的提交。

现在我所有的更改都丢失了。

有没有办法可以恢复这些未提交文件的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:52:11.523

Git 无法恢复未跟踪的文件（当不使用 隐藏时`git stash -u`），因为它对它们一无所知。

# python - 如何使用 python-docx 更改表格内容和样式？

> ID：14138196
> 
> 赞同：1
> 
> 时间：2013-01-03T11:38:14.260
> 
> 标签：python, docx, python-docx

我找到了 python-docx，它看起来很聪明，但是我必须做一些没有很好记录的任务。

我需要打开一个 .docx 模板，其中包含一个表格，为先前创建的列表中存在的所有实例做广告，我必须在模板内的表格中对它们进行格式化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:54:00.267

可能我已经找到了解决方案。它取决于 document.xpath，获取它的地图的一种方法是解压缩 .docx 并读取 ./word/document.xml 文件。

```
PATH_CELL = 'the path you individuate in document.xml'

docbody = document.xpath('/w:document/w:body'+PATH_CELL, 
namespaces=nsprefixes)[0]

print 'Replacing ...',
docbody = replace(docbody,'Welcome','Hello') 
```

我找到了这种运行游戏的方法。还有吗？

# python - python 正则表达式查找文本中的所有单词

> ID：14138199
> 
> 赞同：0
> 
> 时间：2013-01-03T11:38:24.780
> 
> 标签：python, regex

这听起来很简单，我知道，但由于某种原因，我无法获得所需的所有结果

在这种情况下，单词是任何字符，但空格是用空格分隔的，例如在以下字符串中：“Hello there stackoverflow”。结果应该是：['Hello','there','stackoverflow.']

**我的代码：**

```
import re

word_pattern = "^\S*\s|\s\S*\s|\s\S*$"
result = re.findall(word_pattern,text)
print result 
```

但是在我展示的字符串上使用此模式后，它只将第一个和最后一个单词放在列表中，而不是用两个空格分隔的单词

这种模式有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:40:01.940

改用`\b`边界测试：

```
r'\b\S+\b' 
```

结果：

```
>>> import re
>>> re.findall(r'\b\S+\b', 'Hello there StackOverflow.')
['Hello', 'there', 'StackOverflow'] 
```

或者根本不使用正则表达式而只使用`.split()`; 后者*将*在句子中包含标点符号（上面的正则表达式与句子中的不匹配`.`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:39:51.013

查找字符串中的所有单词 最佳使用`split`

```
>>> "Hello there stackoverflow.".split()
['Hello', 'there', 'stackoverflow.'] 
```

但是如果您必须使用正则表达式，那么您应该将您的正则表达式更改为更简单、更快速的内容：`r'\b\S+\b'`.

*   `r`将字符串转换为“原始”字符串。这意味着它不会逃脱你的角色。
*   `\b`表示边界，它是空格、换行符或标点符号。
*   `\S`你应该知道，是任何非空白字符。
*   `+`表示前面的一个或多个。

因此，这意味着找到所有可见的字符集（单词/数字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:40:51.313

如何简单地使用 -

```
>>> s = "Hello there stackoverflow."
>>> s.split()
['Hello', 'there', 'stackoverflow.'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:45:35.477

其他答案都很好。根据您想要的（例如，包括/排除标点符号或其他非单词字符），另一种方法是使用正则表达式来分割一个或多个空白字符：

```
re.split(r'\s+', 'Hello there   StackOverflow.')
['Hello', 'There', 'StackOverflow.'] 
```

# php - 实体在表单提交后保存而不被持久化

> ID：14138204
> 
> 赞同：0
> 
> 时间：2013-01-03T11:38:51.223
> 
> 标签：php, symfony, symfony-2.1, symfony-forms

我有一个 3 层的表格。

内置验证不会通过所有 3 个级别触发。因此，我必须手动检查第三级的错误。如果我发现错误，则不会保留有错误的实体。刷新总是在循环结束时触发。不幸的是，即使没有被持久化，一些无效的实体也会保存在数据库中。这是我的控制器：

```
 $form = $this->createForm(new GameListType(), $betRound);

    $request = $this->getRequest();
    if ($request->getMethod() == 'POST') {
        $form->bind($request);
        $betRound = $form->getData();
        if ($form->isValid()) {
            foreach ($betRound->getGames() as $game) {
                if ($game->hasBet()) {
                    $bet = $game->getBet();
                    // Filter are used during select
                    // , but dont work for inserts
                    // should work in this current context!
                    $bet->setGame($game);
                    $bet->setBetRound($betRound);
                    $bet->setUser($user);

                    $validator = $this->container->get('validator');
                    $errors = $validator->validate($bet);
                    if (count($errors) == 0) {
                        print($bet. ' got persisted'); <-- never triggered
                        $em->persist($bet);
                    } else {
                        // Manual Error Handling 
                        // (no cascade Validation to third level
                        foreach ($errors as $violation) {
                            $form->addError(new FormError(
                                                    $violation->getMessageTemplate(),
                                                    $violation->getMessageParameters(),
                                                    $violation->getMessagePluralization()
                                    ));
                        }
                    }
                }
            } // foreach ($betRound->getGames() as $game)
            $em->flush();

            if(!$form->hasErrors()){
                return $this->redirect($this->generateUrl('betround_show', 
                        array('id' => $betRound->getId())
                        ));
            }
        } 
```

永远不会触发持久操作，但无效的 $bet 实体仍保存在数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:05:42.357

检查您是否有关于游戏和投注之间关系的级联选项。

问题是真的持续存在还是更新了？投注是否已经存在，如果验证失败，您只是不想更新您的更改？如果是这样，您需要做的是在验证失败时撤消更改 $em->refresh($bet);

# objective-c - 更改导航栏外观

> ID：14138208
> 
> 赞同：0
> 
> 时间：2013-01-03T11:39:03.980
> 
> 标签：objective-c, ios, uinavigationcontroller, appearance

我的应用程序流程：（`AViewController -> BViewController -> CViewController`通过navigationController）。`AViewController`和`CViewController`看起来一样，只是`BViewController`看起来不同。

我是这样做的：

```
/// AppDelegate (should be 'super' settings)
[[UINavigationBar appearanceWhenContainedIn:[ABCNavigationController class], nil] setBackgroundImage:theImage forBarMetrics:UIBarMetricsDefault];

/// BViewController (should apply ONLY to BViewController)
[self.navigationController.navigationBar setBackgroundImage:BImage forBarMetrics:UIBarMetricsDefault]; 
```

问题是在`CViewController`我看到我加载的图像`BViewController`不是`appDelegate`。如何将其恢复到 appDelegate 设置？

我应该强调 backgroundImage 是我设置的许多元素之一，在这里举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:42:33.283

`CViewController`尝试将导航栏的背景图像设置为in `nil`，`viewWillAppear`因为它仍然由您的`BViewController`.

```
[self.navigationController.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

# clang-static-analyzer - 如何通过 llvm 生成人类可读的中间代码

> ID：14138210
> 
> 赞同：1
> 
> 时间：2013-01-03T11:39:10.297
> 
> 标签：clang-static-analyzer, llvm-clang

我想使用 clang 以人类可读的形式打印出抽象语法树，不想要二进制字节码。

我用过：

1.  ast打印
2.  转储

但他们提供不可读的代码..

有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T21:20:00.323

我认为您需要调用 cc1 以获取所需格式的输出。

这应该有助于：

```
clang++ -cc1 test.cpp -ast-dump 
```

否则，如果您想要机器级指令，请尝试：

```
clang++ test.cpp -mllvm -print-after-all 
```

# vba - 重命名输出文件夹中的文件

> ID：14138215
> 
> 赞同：0
> 
> 时间：2013-01-03T11:39:47.350
> 
> 标签：vba

我正在使用两个文件夹。第一个是所有输入文件所在的输入，另一个是要保存重命名文件的输出文件夹。

请参阅下面的代码。我正在使用该`Str()`函数来转换数值，但它不起作用，为什么我不知道。我也没有得到所需的输出。

`Str(m)`不工作并显示类型不匹配错误。

```
Sub ChangeFilename()

IFILEPATH = InputBox("Copy INPUT folder PATH")
OFILEPATH = InputBox("Copy OUTPUT folder PATH")
Dim strfile As String
Dim filenum As String

strfile = Dir(IFILEPATH)
startFile = InputBox("Start File NAME")
endFile = InputBox("End File NAME")
Dim r As Long
r = InputBox("Input INCREAMENT valu")
Do While strfile <> ""
    If (strfile = startFile) Then
        Do While strfile <= endFile
            x = Left(strfile, Len(strfile) - 4)
            x = Right(x, Len(x) - 2)
            y = Val(x)
            If y > 0 Or y < 9 Then
                Dim m As Long
                m = y + r
                Dim k As String
                'MsgBox Str(m)
                k = Str(m)        'This is the area where I am facing problem i.e Str(m) not WORKING and shows type mismatching Error
                x = "00" & k
                Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"
            ElseIf y >= 9 Or y < 99 Then
                m = y + r
                x = "0" & k
                Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"
            Else
                'x = Str(Val(x + r))
                Name IFILEPATH & strfile As OFILEPATH & "eq" & x & ".eps"
            End If
        Loop
    End If
    strfile = Dir
Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:32:35.847

如果将 Long 转换为字符串是您唯一的问题，我认为您正在寻找 CStr() 函数：

[http://msdn.microsoft.com/en-us/library/s2dy91zy.aspx](http://msdn.microsoft.com/en-us/library/s2dy91zy.aspx)

# lua - 电晕在容器中拖放瓷砖

> ID：14138236
> 
> 赞同：0
> 
> 时间：2013-01-03T11:41:04.733
> 
> 标签：lua, coronasdk

我以前问过类似的问题，但我需要一些帮助来清理它。我的图像像拼字游戏瓷砖，我可以将其拖放到我的容器中，但我复制了很多代码。我还想知道如何能够在任意数量的容器中而不是一个特定的容器中放置图块。这是代码片段。有人可以帮忙吗，因为我想避免重复代码，我需要弄清楚如何在多个容器上放置一个图块。*编辑*希望每个容器都读取字母并组合成一个完整的单词

```
display.setStatusBar( display.HiddenStatusBar )

local posX, posY = 100, 200
local sizeX, sizeY = 40, 40
local posX1, posY1 = 150, 200
local posx, posy = 10, 50

local container = display.newRoundedRect( posX, posY, sizeX, sizeY, 3 )
container:setFillColor( 0,0,255 )
container.strokeWidth = 3
container:setStrokeColor(100, 100, 100)

local container2 = display.newRoundedRect( posX1, posY1, sizeX, sizeY, 3 )
container:setFillColor( 0,0,255 )
container2.strokeWidth = 3
container2:setStrokeColor(100, 100, 100)

local myObject = display.newImage("letters/B.png" , 150, 10)
local myObject2 = display.newImage("letters/a.png" , 10, 10)
local myObject3 = display.newImage("letters/C.png" , 200, 10)

-- touch listener function
function myObject:touch( event )
    if event.phase == "began" then

        self.markX = self.x    -- store x location of object
        self.markY = self.y    -- store y location of object

    elseif event.phase == "moved" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        self.x, self.y = x, y    -- move object based on calculations above

        if (((x >= ((sizeX/2) + posX - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/2) * sizeY))))) then
            container:setFillColor( 0,0,255 )
        else
            container:setFillColor( 0,0,255 )
        end

    elseif event.phase == "ended" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        -- main condition: I calculated 3 areas to atract the object to the target container, 2 areas that atract it when it's 1/3 in the target and 1 area that atract it when it's 1/4 in the target
        if (((x >= ((sizeX/2) + posX - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY + ((1/2) * sizeY))))) then
            self.x, self.y = posX + (sizeX/2), posY + (sizeY/2);
        end

    end

    return true
end

---------------------------------------------------------------------------
--------------------------test---------------------------------------------
---------------------------------------------------------------------------
-- touch listener function
function myObject2:touch( event )
    if event.phase == "began" then

        self.markX = self.x    -- store x location of object
        self.markY = self.y    -- store y location of object

    elseif event.phase == "moved" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        self.x, self.y = x, y    -- move object based on calculations above
        if (((x >= ((sizeX/2) + posX1 - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/2) * sizeY))))) then
            container2:setFillColor( 0,0,255 )
        else
            container2:setFillColor( 0,0,255 )
        end

    elseif event.phase == "ended" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        -- main condition: I calculated 3 areas to atract the object to the target container, 2 areas that atract it when it's 1/3 in the target and 1 area that atract it when it's 1/4 in the target
        if (((x >= ((sizeX/2) + posX1 - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/2) * sizeY))))) then
            self.x, self.y = posX1 + (sizeX/2), posY1 + (sizeY/2);
        end

    end

    return true
end
------------------------------------------------------------------------------
-------------------------------------------------------------------------------
function myObject3:touch( event )
    if event.phase == "began" then

        self.markX = self.x    -- store x location of object
        self.markY = self.y    -- store y location of object

    elseif event.phase == "moved" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        self.x, self.y = x, y    -- move object based on calculations above
        if (((x >= ((sizeX/2) + posX1 - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/2) * sizeY))))) then
            container2:setFillColor( 0,0,255 )
        else
            container2:setFillColor( 0,0,255 )
        end

    elseif event.phase == "ended" then

        local x = (event.x - event.xStart) + self.markX
        local y = (event.y - event.yStart) + self.markY

        -- main condition: I calculated 3 areas to atract the object to the target container, 2 areas that atract it when it's 1/3 in the target and 1 area that atract it when it's 1/4 in the target
        if (((x >= ((sizeX/2) + posX1 - ((2/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((2/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/3) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((2/3) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/3) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((2/3) * sizeY)))) or ((x >= ((sizeX/2) + posX1 - ((1/2) * sizeX))) and (y >= ((sizeY/2) + posY1 - ((1/2) * sizeY))) and (x <= ((sizeX/2) + posX1 + ((1/2) * sizeX))) and (y <= ((sizeY/2) + posY1 + ((1/2) * sizeY))))) then
            self.x, self.y = posX1 + (sizeX/2), posY1 + (sizeY/2);

        end

    end

    return true
end

myObject:addEventListener( "touch", myObject )
myObject3:addEventListener( "touch", myObject3 )
myObject2:addEventListener( "touch", myObject2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T02:44:02.407

我会考虑为此使用表格。您需要将所有图块放在一个表中，因此您正在使用 myObject[1] myObject[2]

等等然后你可以使用一个单一的触摸函数，其中 event.target 是被触摸的对象（即，如果有人触摸了 myObject[2]，它将在你的函数中作为 event.target 引用。那么如果你的容器也在一个表中：

```
container[1]
container[2] 
```

然后在您的触摸处理程序中，您可以执行如下循环：

```
for i = 1, #container do
      -- do your code to check to see if your object is in your container
end 
```

您应该能够使用 event.target 是您的 tile 和循环容器这一事实的组合来摆脱单个触摸处理程序函数，以便您可以针对所有这些进行测试。

# javascript - 使用纯 Javascript 进行图像旋转

> ID：14138238
> 
> 赞同：2
> 
> 时间：2013-01-03T11:41:06.370
> 
> 标签：javascript, image-rotation

请不要推荐 JQUERY - 我做这个练习是为了学习。

我已经实现了一个 JavaScript，它使用 10 秒的设定间隔在计时器上旋转图像 (_elementSlideChange)。我还为此添加了幻灯片功能，即 7 毫秒 (_slideImage)。

图像在页面加载时每 10 秒自动旋转一次，我还提供了下一个和上一个按钮，允许用户手动更改图像。

```
_elementSlideChange: function () {
  var myString;
  var myText;
  for (var i = 0; i < this._imgArray.length; i++) {
    var imageArr = "url(" + this._imgArray[i].src + ")";
    var imageBg = this._imageHolder.style.background + "";
    if (imageArr == imageBg) {
      if (i == (this._imgArray.length - 1)) {
        myString = "url(" + this._imgArray[0].src + ")";
        myText = this._infoArray[0];
      } else {
        myString = "url(" + this._imgArray[(i + 1)].src + ")";
        myText = this._infoArray[i + 1];
      }
    }
  }
  this._imageNextSlide.style.background = myString;
  this._imageNextSlide.style.background);
  this._infoElement.innerHTML = myText;
  this._myTimer = setInterval(MyProject.Utils.createDelegate(this._slideImage, this),  7);
},
_slideImage: function () {
  if (parseInt(this._imageHolder.style.width) >= 0 && parseInt(this._imageNextSlide.style.width) <= 450) {
    this._imageHolder.style.backgroundPosition = "right";
    this._imageHolder.style.width = (parseInt(this._imageHolder.style.width) - 1) + 'px';
    console.log(this._imageNextSlide.style.background);
    this._imageNextSlide.style.width = (parseInt(this._imageNextSlide.style.width) + 1) + 'px';
  } else {
    console.log("reached 0px");
    if (parseInt(this._imageHolder.style.width) == 0) {
      this._imageHolder.style.background = this._imageNextSlide.style.background;
      this._imageHolder.style.width = 450 + 'px';
      this._imageHolder === this._imageNextSlide;
      this._imageHolder.className = "orginalImage";
      this._imageNextSlide.style.width = 0 + "px";
      this._imageNextSlide = this._dummyImageNextSlide;
      this._imagesElement.appendChild(this._imageHolder);
      this._imagesElement.appendChild(this._imageNextSlide);
      clearInterval(this._myTimer);
    }
    clearInterval(this._myTimer);
    clearInterval(this._elementSlideChange);
  }
} 
```

因此，当用户单击“下一步”箭头按钮时，会触发“单击”的事件侦听器。这将为当前显示的图像创建一个 div，并创建一个新的 div，其中将包含下一个图像。图像滑动和旋转正常工作（无论是`onLoad`还是`onClick`）。我遇到的问题是，如果我单击下一步按钮，当新的 div 图像滑入到位时，它会导致它陷入无限循环，因此与要显示的图像相同的 div 不断滑入，你越多单击下一步按钮，图像开始旋转的速度越快。

我已经尝试为图像旋转和滑块设置一个明确的间隔，但我确实理解我的代码是错误的，这会导致滑动图像的无限循环。而且我知道我即将完成功能。

谁能告诉我哪里出错了？还是我应该尝试以另一种方式实现滑动 DIV？

再次请不要推荐 jQuery。

并提前感谢您的帮助。

库什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:27:25.683

似乎您想取消幻灯片上的动画（也许在下一张幻灯片动画时让它淡出，突然取消其动画或让它完成并忽略按钮单击）

我个人通常做的是检查动画状态（是的，我使用 jquery，但您应该能够以相同的方式测试用于动画的 CSS 或定位值）您甚至可以添加“活动”动画期间的类或数据类型，以使测试更容易。全局标志也有效。如果有动画，请忽略该按钮。（对于我的工作......取决于你的意图）

就像我说的，问题可能出在按钮行为上，而不是动画例程上。查看您如何通过单击按钮调用它以及您的预期结果将是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:26:09.343

为了解决这个问题，我确实重写了整个代码，其中我有一个下一个和上一个按钮事件侦听器。

```
myProject.Utils.addHandler(this._nextImageElement, "click", myProject.Utils.createDelegate(this._changeImage, this)); 
```

两个按钮都将调用相同的功能：

```
_changeImage: function (e) 
```

在此函数中，我检查该函数是否为过渡（更改图像），我声明一个布尔值 `var forward = e.target == this._nextImageElement;`

然后检查以查看当前索引是否前进？加 1 否则减 1

```
this._currentImageIndex += forward ? 1 : -1; 
```

如果它在 Array 的末尾并且 forward 为真，则将 this._currentImageIndex 分配为重置为 0 或 Array.length - 如果它是反向的，则为 1

然后调用另一个给“div”滑动效果的函数。在这种情况下调用它`this._transitionImage(forward);`

在此函数中，将 this._inTranstion 设置为 true。（因为在这种情况下 div 是滑动的）。

**以下代码解决了我遇到的问题。**

```
this._slideImageElement.style.backgroundImage = "url(\"" + this._imgArray[this._currentImageIndex].src + "\")";

this._slideImageElement.style.backgroundPosition = forward ? "left" : "right";        
this._slideImageElement.style.left = forward ? "auto" : "0px";
this._slideImageElement.style.right = forward ? "0px" : "auto"; 
```

上面的代码非常重要，因为对象是将当前可见“div”的“sliding in div”向左或向右放置给用户，这主要取决于forward变量是true还是false。

```
var i = 0; 
```

然后开始过渡

```
setInterval( function() {
    this._currentImageElement.style.backgroundPosition = (forward ? -1 : 1) * (i + 1) + "px";
       this._slideImageElement.style.width = (i + 1) + "px"; 
```

请注意，当我们乘以 -1 或 +1 时，如果它的前向将确定 bgPosition 是否会向左移动，例如，如果用户单击 NEXT BUTTON，Forward = true 所以我们要做的第一件事就是设置

```
this._slideImageElement.style.backgroundPosition = "left" 
```

然后

```
this._slideImageElement.style.left = "auto"
this._slideImageElement.style.right = "0px" 
```

***这意味着当滑动图像在其背景位置移动时为 LEFT 但 div 放置在 RIGHT 到 0px；*** 然后 t`his._currentImageElement.style.backgroundPosition = -1 * (i + 1)` *将 currentImageElement 的位置向左移动 1px*，

增加**slideImage 的宽度，**在这种情况下，它位于当前 div 的*右侧*，并且随着*当前 div 向左移动，滑动图像开始从右侧出现*。（默认情况下，将 slideImageElement 的宽度设置为 0px，以便 div 存在但对用户不可见）。*这使它具有向前移动来自右侧的新图像的滑动效果。*

```
this._slideImageElement.style.width = (i + 1) + "px"; 
```

然后声明它在它是图像宽度时停止。在这种情况下，它将是 500px。 **if ((i = i + 2) == 500) {** 在这个 if 语句中，重置 currentImageElement 背景和背景位置“右”或“左”并不重要，只要它已被重置。

清除间隔再次将过渡设置为false然后为函数changeImage调用一个setTimeout，它将一直持续到幻灯片完成。

**下面显示了重置代码，因为这对于防止重复相同的图像非常重要（这解决了我的整个问题）**

```
// set the current image to the "new" current image and reset it's background position
this._currentImageElement.style.backgroundImage = "url(\"" + this._imgArray[this._currentImageIndex].src + "\")";
this._currentImageElement.style.backgroundPosition = "right";

// reset the slide image width
this._slideImageElement.style.width = "0px";

// clear the transition interval and mark as not in transition
clearInterval(this._transitionInterval);
                this._inTransition = false;

// setup the next image timer
this._nextImageTimeout = setTimeout(myProject.Utils.createDelegate(this._changeImage, this), 2500); 
```

}

我提供了详尽的细节，因为这样更容易理解问题的逻辑，即使您没有遇到同样的问题，这也可以帮助您找出任何问题。

我无法提供 JSfiddle，因为我使用 Javascript 创建了我的 CSS，有不同的方法可以做到这一点，但我想了解正向和反向背后的逻辑，并拥有一个不断前进的计时器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-03T11:55:46.163

CSS3 过渡怎么样？

```
transition: all 1s ease 0.5s; 
```

[JS Fiddle 上的简单示例](http://jsfiddle.net/GvJ9v/)。

这会处理动画，因此您只需要使用 JavaScript 设置预期的目的地，即

```
this.style.left = '100px'; 
```

或者

```
this.style.top = '30px'; 
```

并且 CSS3 过渡将平滑地滑动元素。

跨浏览器注意！

对于某些浏览器，该`transition`属性可能需要供应商前缀，我使用的是最新的生产 Firefox，而您不需要`-moz`。Opera 也是如此，不需要“-o”。Internet Explorer 10 不需要前缀。您可能需要`-webkit`用于 Safari / Chrome，但无需先进行测试。

# c++ - 使用 istringstream 提取？

> ID：14138239
> 
> 赞同：-1
> 
> 时间：2013-01-03T11:41:17.293
> 
> 标签：c++

我有以下内容：

```
char op; double x, y, z;
istringstream iss("v 1.0 2.0 3.0", istringstream::in);
iss>>op>>x>>y>>z; 
```

但是在输出 x、y 和 z 的值时，它们都返回 0？

更新：

我想它正在工作，但我将其输出为：

```
int length=wsprintf(result," V is %d, %d, %d ", x, y, z);
TextOut(hdc,0,0,result,length); 
```

它没有显示正确的值。

但是，如果值在 int 中，它可以正常工作，例如：

```
char op; int x, y, z;
istringstream iss("v 1 2 3", istringstream::in);
iss>>op>>x>>y>>z; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:15:30.860

`%d`格式说明符需要一个,`int`但是`x`,`y`并且`z`是 类型`double`。如果类型和格式说明符不匹配，则行为未定义。请注意，参考页面中[`wsprintf`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms647550%28v=vs.85%29.aspx)似乎没有任何格式说明符用于`double`.

建议使用[`std::wostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream)and[`std::wstring`](http://en.cppreference.com/w/cpp/string/basic_string)代替：

```
std::wostringstream ws;
ws << L" V is " << x << L"," << y << L"," << z;
const std::wstring result(ws.str());
TextOut(hdc,0,0,result.c_str(), result.length()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:26:37.197

谢谢hmjd。

对于其他任何人，这是我为正确输出值所做的。

```
int length=sprintf_s(result," V is %0.1f, %0.1f, %0.1f ", x, y, z);
TextOut(hdc,0,0,result,length); 
```

一般语法“%AB”表示小数点前A位和小数点后B位。

谢谢大家。

# r - ggplot geom_bar vs geom_histogram

> ID：14138247
> 
> 赞同：17
> 
> 时间：2013-01-03T11:42:20.063
> 
> 标签：r, ggplot2

ggplot 中的 geom_bar 和 geom_histogram 有什么区别（如果有的话）？它们似乎产生相同的情节并采用相同的参数。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T11:45:22.010

*   条形图提供分类数据的可视化表示。例子：
    *   红色、黑色和棕色头发的人数
    *   查看`geom_bar` [帮助文件](http://docs.ggplot2.org/0.9.2.1/geom_bar.html)。这些例子都是重要的。
    *   维基百科[页面](http://en.wikipedia.org/wiki/Bar_chart)
*   直方图用于绘制[间隔](http://www.ats.ucla.edu/stat/mult_pkg/whatstat/nominal_ordinal_interval.htm)（通常是数字）数据的密度。例子，
    *   年龄和身高分布
    *   `geom_hist` [帮助文件](http://docs.ggplot2.org/0.9.3/geom_histogram.html)。这些例子是电影评级的分布。

**ggplot2**

`geom_bar`经过一番调查，我认为在 ggplot2和之间没有区别`geom_histogram`。从文档：

```
 geom_histogram(mapping = NULL, data = NULL, stat = "bin",
    position = "stack", ...)
 geom_bar(mapping = NULL, data = NULL, stat = "bin",
    position = "stack", ...) 
```

我意识到在`geom_histogram`文档中它指出：

> geom_histogram 是 geom_bar 加上 stat_bin 的别名

但老实说，我不太确定这意味着什么，因为我对 ggplot2 的理解是 stat_bin 和 geom_bar 都是层（重点略有不同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-12T17:05:22.273

geom_bar 和 geom_histogram 的默认行为相同。这是因为（正如@csgillespie 所提到的），当您调用 geom_histogarm （可以理解）时，有一个隐含的 stat_bin，它也是应用于 geom_bar 的默认统计转换（可争论的行为 IMO）。这就是为什么您需要指定`stat='identity'`何时按原样绘制数据。

`stat='bin'`or`stat_bin()`是 ggplot 为您执行的统计转换。它为您提供用两个点（`..count..`和.）包围的变量作为输出`..density..`。如果您不指定`stat='bin'`，您将不会获得这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T06:54:20.737

`geom_bar()`是因为 x 和 y 值都是分类数据——所以两个条之间有空格，因为 x 值是具有不同水平的因子。

`geom_histogram()`用于一个连续数据和一个分类数据。通常我们将连续数据放在 x 轴上（因此条形图相互接触，因为它们是连续的）并将分类数据放在 y 轴上。

我们可以使用另一个图来显示上述情况（1 分类 1 连续）-- `geom_boxplot()`。通常我们使用 y 轴来表示连续数据，因为它将是一个垂直的盒须。

# objective-c - 无论设备方向如何，如何在纵向模式下加载 UIView - IOS 6

> ID：14138248
> 
> 赞同：0
> 
> 时间：2013-01-03T11:42:19.733
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uiview

我正在开发 iOS 6 应用程序，我使用以下方法处理了 UIview 旋转...

```
-(NSUInteger)supportedInterfaceOrientations

{
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL) shouldAutorotate {
    return YES;
} 
```

一切正常，问题是初始视图加载是根据设备方向决定的，例如：如果我将设备保持在横向模式，即使我已在supportedInterfaceOrientations 中强制返回纵向视图，一旦设备旋转到肖像之后它不会进入横向模式，一切正常。无论设备方向如何，是否可以在特定模式下加载视图？

我用谷歌搜索，没有任何效果。

注意：我正在使用导航控制器。我为 UINavigationController 添加了类别。

// 在 IOS6 中处理方向的自定义类别

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}
@end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:54:04.310

使用此方法：

```
 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return UIInterfaceOrientationMaskPortrait;
} 
```

将此方法与`category`for `UINavigationController`in一起添加`appDelegate`。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
  UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
  //check for which controller u need these methods
  if([navigationController.visibleViewController isKindOfClass:[yourViewController class]]) //provide specific view controller where u want protrait
  {
    [navigationController shouldAutorotate];
    [navigationController supportedInterfaceOrientations];
    [navigationController preferredInterfaceOrientationForPresentation];
  }
  return UIInterfaceOrientationMaskAll;
} 
```

**注意**`category`：如果您添加了 for ，请从所有 viewController 中删除`UINavigationController`。它应该只在 appDelegate 中。

# itext - 在 Java 中使用 IText 进行内存管理

> ID：14138249
> 
> 赞同：1
> 
> 时间：2013-01-03T11:42:20.063
> 
> 标签：itext

我正在使用 IText 生成 PDF，并注意到我使用的服务器似乎随着时间的推移内存不足。我已经关闭了使用 IText 的功能，并且服务器看起来还不错 - 所以我相当确定我的 IText 实现中有一些东西会导致内存泄漏。这是我的 IText 结构：

```
Document document = new Document(PageSize.A4);
file = new File("/tmp/Hotel-Fax-" + voucher.getVoucherID() + ".pdf");

PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(file));
writer.setStrictImageSequence(true);
document.open();

PdfContentByte cb = writer.getDirectContent();

//Some methods here which just create PDFPTables and add some text / images

cb.stroke();

document.close();

return file; 
```

我想知道即使我关闭了文档，我的 PdfWriter 或 PdfContentByte 是否会以某种方式保留内存，这意味着下次调用代码时，它只会创建新对象并且内存最终会耗尽？

# wpf - wpf ObservableCollection 填充组合框

> ID：14138250
> 
> 赞同：0
> 
> 时间：2013-01-03T11:42:22.037
> 
> 标签：wpf, combobox, observablecollection

如何将我的组合框填充到我的 ObservableCollectio 项目中？

```
public ObservableCollection<Contacts> contacts = new ObservableCollection<Contacts>(); 
```

联系人中的项目是“Grname”。这些项目需要绑定到它。首选代码，因为我想过滤掉重复项（分组）。

```
 class Contacts
{
    public string Contact_id { get; set; }
    public string Grname { get; set; }

} 
```

更新：

我找到了 ！

```
ICollectionView contactsView = CollectionViewSource.GetDefaultView(dataGrid1.ItemsSource);

cmbGroup.ItemsSource = contactsView.Groups; 
```

但是如何使用组合框的选定项过滤我的数据网格？

我有：

```
 void Filter(object sender, FilterEventArgs e)
    {

        if (cmbGroup.ItemsSource == contactsView)
        {
            e.Accepted = true;
        }
        else
        {
    e.Accepted = false;
    }
} 
```

并且过滤器绑定在我的 XAML 中的 CollectionViewSource 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:57:24.180

对于过滤、分组、排序等，您可以使用[CollectionViewSource](http://msdn.microsoft.com/en-us/library/ms613527.aspx)。这意味着类似

```
ICollectionView contactsView = CollectionViewSource.GetDefaultView(contacts);
// For filtering:
contactsView.Filter += sender => {
    // Filter logic here
    return true;
} 
```

然后将您的组合框与contactsView 绑定。

# objective-c - ios objC回调调用方法

> ID：14138255
> 
> 赞同：0
> 
> 时间：2013-01-03T11:42:37.680
> 
> 标签：objective-c, c, callback

我使用系统声音服务，用麦克风播放我有录音机的声音，工作正常，并在声音停止时使用回调，

```
//callback pa saber termina
    AudioServicesAddSystemSoundCompletion (soundID,NULL,NULL,completionCallback,(void*) self); //q es un call back?, q es (void*)self??

//Use audio services to play the sound
AudioServicesPlaySystemSound(soundID); 
```

所以当声音停止时，它会调用：

```
//usando Callback!
static void completionCallback (SystemSoundID  mySSID, void* myself) {
 NSLog(@"termino");
} 
```

但是我怎么能调用我的方法：

```
- (void)stopSoundByDemand{
self.playingMode = NO;
[self.playButton setTitle:@"Play" forState:UIControlStateNormal];
[self stopSound];
 } 
```

因此，如果我理解正确，“回调”仅适用于 C？

那么我怎样才能从这个C“回调”调用objC方法呢？

我读过它，但还没有弄清楚，

请我需要澄清什么是回调，如果仅适用于 C，

以及如何调用该方法，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:57:18.287

self 是你的对象 .. 要在回调函数中知道它，*它不是你的类的一部分，*你将它作为 (void*) 以上下文参数的形式传递给函数。

现在回到您的对象并调用您从上下文变量中获取该指针的方法

**在您的情况下，**
上下文被命名为我自己： `[(id)myself stopSoundByDemand];`

* * *

一般来说，回调是一个不属于任何实例的函数，因此不知道自己。

# c# - “奇怪”的 C# 属性语法

> ID：14138258
> 
> 赞同：8
> 
> 时间：2013-01-03T11:42:49.593
> 
> 标签：c#, properties, indexer

我刚刚在 ac# 项目中看到了这个：

```
public char this[int index] 
```

我认为自己是 C# 新手；任何人都可以帮助它是什么意思？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T11:44:26.750

它是一个索引器。

> 索引器允许类或结构的实例像数组一样被索引。索引器类似于属性，只是它们的访问器带有参数。索引器提供类似数组的语法。它允许以与数组相同的方式访问类型。诸如索引器之类的属性通常会访问后备存储。我们经常接受 int 类型的参数并访问数组类型的后备存储。

从[http://www.dotnetperls.com/indexer阅读](http://www.dotnetperls.com/indexer)

```
string s = "hello";
Console.WriteLine (s[0]); // 'h'
Console.WriteLine (s[3]); // 'l' 
```

**实现索引器**

要编写索引器，请定义一个名为 this 的属性，并在方括号中指定参数。例如：

```
class Sentence
{
   string[] words = "The quick brown fox".Split();
   public string this [int wordNum] // indexer
   {
      get { return words [wordNum]; }
      set { words [wordNum] = value; }
   }
} 
```

下面是我们如何使用这个索引器：

```
Sentence s = new Sentence();
Console.WriteLine (s[3]); // fox
s[3] = "kangaroo";
Console.WriteLine (s[3]); // kangaroo 
```

一个类型可以声明多个索引器，每个索引器都有不同类型的参数。索引器还可以采用多个参数：

```
public string this [int arg1, string arg2]
{
  get  { ... } set { ... }
} 
```

索引器在内部编译为名为`get_Item`and的方法`set_Item`，如下所示：

```
public string get_Item (int wordNum) {...}
public void set_Item (int wordNum, string value) {...} 
```

编译器`Item`默认选择名称——你实际上可以通过使用以下属性装饰你的索引器来改变它：

```
[System.Runtime.CompilerServices.IndexerName ("Blah")] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T11:43:30.460

这被称为`indexer`。

*   [索引器](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)
*   [带有访问器修饰符的 C# 属性和索引器的 C++ 实现](http://www.codeproject.com/Articles/33293/C-implementation-of-the-C-Property-and-Indexer-wit)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-03T11:43:47.777

这称为*索引器*。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)阅读有关它们的更多信息。

# rspec - 如何组合 Rspec 命令行开关（即标签和完整搜索）

> ID：14138260
> 
> 赞同：1
> 
> 时间：2013-01-03T11:42:59.837
> 
> 标签：rspec

是否可以在 Rspec 中组合用于全文搜索和标签的命令行选项？像`rspec spec -e User -t buggy`等等。如果我把它一个接一个地放，它总是会做一个 - 有没有技巧或解决方法？

（输出 `Run options: include {:full_description=>/selftest/}?`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T13:56:18.837

目前这是不可能的，必须等待 rspec 的未来版本

# java - PCSCException SCARD_E_NO_SERVICE

> ID：14138265
> 
> 赞同：2
> 
> 时间：2013-01-03T11:43:18.207
> 
> 标签：java, exception, smartcard, pcsc

我正在使用 sun.security.smartcardio 库来处理智能卡。我使用了 Ludovic Rousseau 建议的 Java 示例源代码。如果我循环该代码，当我选择可用的卡终端 (sun.security.smartcardio.PCSCTerminals.list(Unknown Source)) 时，我会遇到以下异常：

sun.security.smartcardio.PCSCException：SCARD_E_NO_SERVICE

如果我在每次使用智能卡后重新启动应用程序，一切正常。任何人都知道为什么会以这种方式发生？

谢谢你的帮助

弗朗切斯科

# jsp - jsp会话超时

> ID：14138267
> 
> 赞同：0
> 
> 时间：2013-01-03T11:43:22.060
> 
> 标签：jsp

我有一个带有按钮的 jsp 页面。当用户单击按钮时，它会在服务器上启动特定操作（数据处理）。问题是如果数据量很大，几分钟后jsp页面崩溃，我看到一条错误消息：“IE无法显示页面”。但是，服务器处理不受影响并运行完成。

我认为 jsp 会话可能会超时。为什么会发生这种情况，我能做些什么来解决它？

我正在使用 Apache Tomcat Web 服务器。

# php - 在 php 循环中编写 HTML 标签同一行

> ID：14138273
> 
> 赞同：0
> 
> 时间：2013-01-03T11:43:40.123
> 
> 标签：php, html

我想要循环打印链接

```
<?php
for ($i = 0; $i<5; $i++) {
?>
    <a href="#">a</a>
<?php
}
?> 
```

问题是当我看到源代码时，每个链接都写在新行中，我需要每个链接都在同一行。

我可以这样做：

```
$str = '';
for ($i = 0; $i<5; $i++) {
    str .= '<a href="#">a</a>';
}
echo $str; 
```

结果是我需要的，但我喜欢第一种编码风格（比如，MVC 编码风格）。第一种编码风格的解决方案是什么，用于在同一行编写标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T11:44:58.890

```
<?php
for ($i = 0; $i<5; $i++) {
    ?><a href="#">a</a><?php
}
?> 
```

您需要删除空格。

# rest - 使用 maven 的编译错误：“-source 1.3 中不支持注释”

> ID：14138278
> 
> 赞同：5
> 
> 时间：2013-01-03T11:44:14.127
> 
> 标签：rest, maven

我使用 Eclipse 创建了一个 Restful Web 服务简单项目。当我尝试编译它时，我收到以下错误。

不知道为什么不支持注释，我使用 NetBeans IDE 做了同样的事情，
它运行良好，没有任何问题。

```
**[INFO] Compilation failure
C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:[18,1] error: annotations are not supported in -source 1.3
[INFO] ------------------------------------------------------------------------
[DEBUG] Trace
org.apache.maven.BuildFailureException: Compilation failure
C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:[18,1] error: annotations are not supported in -source 1.3
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:715)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:[18,1] error: annotations are not supported** in -source 1.3 
```

这是我的 pom 文件结构：

**POM 文件**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>RestfulService</groupId>
  <artifactId>RestfulService</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <sourceDirectory>${basedir}/src</sourceDirectory>
    <outputDirectory>${basedir}/build/classes</outputDirectory>
  <pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>
    </plugins>
</pluginManagement>

</build>

<dependencyManagement>
<dependencies>

  <dependency>
    <groupId>jersey-server</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.4</version>
    <scope>system</scope>
    <systemPath>${basedir}/lib/jersey-server-1.4.jar</systemPath>
  </dependency>

<dependency>
        <groupId>javax-ws</groupId>
        <artifactId>javax-ws</artifactId>
        <version>1.4</version>
        <scope>system</scope>
        <systemPath>${basedir}/lib/javax.ws.rs.jar</systemPath>
</dependency>
</dependencies>
</dependencyManagement>
</project> 
```

**你好.java**

```
package restfu;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

// Plain old Java Object it does not extend as class or implements 
// an interface

// The class registers its methods for the HTTP GET request using the @GET annotation. 
// Using the @Produces annotation, it defines that it can deliver several MIME types,
// text, XML and HTML. 

// The browser requests per default the HTML MIME type.

//Sets the path to base URL + /hello
@Path("/hello")
public class Hello {

  // This method is called if TEXT_PLAIN is request
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String sayPlainTextHello() {
    return "Hello Jersey";
  }

  // This method is called if XML is request
  @GET
  //@Produces(MediaType.TEXT_XML)
  @Produces("application/xml")
  public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
  }

  // This method is called if HTML is request
  @GET
  @Produces(MediaType.TEXT_HTML)
  public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
        + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
  }

  // This method is called if JSON is request
  @GET
  //@Produces("appplication/json")
  @Produces(MediaType.APPLICATION_JSON)
  public String sayJsonHello() {
    return "{ \"HTML\": { \"title\": \"Hello Jersey\", \"body\": { \"h1\": \"Hello Jersey\" }}" ;
  }    
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:14:43.073

使用以下内容增强您的 pom：

```
<project>
  [...]
  <build>
    [...]
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
    [...]
  </build>
  [...]
</project> 
```

您需要至少给出 1.5，但最好是 1.6。

我建议不要更改源代码的默认位置。最好将您的源代码移动到 maven 的默认位置：src/main/java 并从您的 pom 中删除配置：

```
<build>
   <sourceDirectory>${basedir}/src</sourceDirectory>
   <outputDirectory>${basedir}/target/classes</outputDirectory>
</build> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T13:06:11.877

在（如果可能在父 pom 中）添加 java 版本**1.5 或更高版本：**`pluginManagement`

```
<pluginManagement>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
</pluginManagement> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T03:17:27.650

谢谢我在basedir中创建了lib文件夹，然后将库文件复制到其中，然后添加了如下依赖项，然后编译问题解决了，它创建了jar文件和类文件。

```
<dependencies>
  <dependency>
    <groupId>jersey-server</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.4</version>
    <scope>system</scope>
    <systemPath>${basedir}/lib/jersey-server-1.4.jar</systemPath>
  </dependency>

    <dependency>
    <groupId>javax-ws</groupId>
    <artifactId>javax-ws</artifactId>
    <version>1.4</version>
    <scope>system</scope>
    <systemPath>${basedir}/lib/javax.ws.rs.jar</systemPath>
  </dependency> 
```

# c# - 在 C# 中跳过方法调用？

> ID：14138280
> 
> 赞同：10
> 
> 时间：2013-01-03T11:44:23.727
> 
> 标签：c#, asp.net, resharper, global-asax, resharper-7.1

我有这个简单的代码：

```
 void Application_BeginRequest(object sender, EventArgs e) 
    {
        Trace.Write("Exception Handling", "......");
    } 
```

然而，关于：

![在此处输入图像描述](../Images/d10c471d1ea77eae0fd17a5ba3cf7de3.png)

> 方法调用被跳过。编译器不会生成方法调用，因为方法是有条件的，或者是没有实现的部分方法

我无法在 Trace 输出中看到这一行。

但是 - 其他痕迹 - 我确实看到了。

这是为什么 ？

（ps页面（在网站项目下）有 `trace="true"`）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T11:52:58.160

确保`TRACE`在当前构建配置的项目设置中定义了常量。

![在此处输入图像描述](../Images/7ec05287cebeaa0e5783f5ebf44ea6f1.png)

**更新**

因为它是一个网站项目，你可以把

```
#define TRACE 
```

在顶部，`Global.asax.cs`以便定义跟踪符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:50:18.430

引用[JetBrains wiki](http://confluence.jetbrains.net/display/ReSharper/Method+invocation+is+skipped)（可能*链接到 ReSharper 菜单下的“为什么 ReSharper 建议这样做”）：

> 在编码时，您可能会遇到有关编译器不会生成调用的方法的警告。为什么会这样？典型情况是不会编译的条件方法（例如，它被标记为`[ReSharperInt:Conditional("DEBUG")]`并且您处于 `RELEASE`模式）。可以跳过方法的另一个原因是，在某些时候，它的主体已被声明为`partial`并且未提供实现。

鉴于这是一种方法`Trace`，我建议这些典型案例中的第一个是适用的。

^([* 我还没有 v7])

# c# - 从其他线程中的控件获取值

> ID：14138284
> 
> 赞同：0
> 
> 时间：2013-01-03T11:44:34.630
> 
> 标签：c#, wpf, multithreading, invoke

如何在 WPF 应用程序中获取来自其他线程中滑块控件的值？

要设置我使用的值：

```
public static class ControlExtensions
    {
        public static void InvokeIfRequired(this Control control, Action action)
        {
            if (System.Threading.Thread.CurrentThread != control.Dispatcher.Thread)
                control.Dispatcher.Invoke(action);
            else
                action();
        }
        public static void InvokeIfRequired<T>(this Control control, Action<T> action, T parameter)
        {
            if (System.Threading.Thread.CurrentThread != control.Dispatcher.Thread)
                control.Dispatcher.Invoke(action, parameter);
            else
                action(parameter);
        }
    } 
```

方法调用：

```
ControlExtensions.InvokeIfRequired(_mw, value => _mw.tb_w3.Text = value, godz_w3); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:48:29.400

使用它应该可以工作，您只是将值提取到变量`text`中，而不是将其分配给`Text`我假设的属性`TextBox`

```
string text;
_mw.InvokeIfRequired(value => text = _mw.Text); 
```

# c# - 在不规则多边形中查找点的算法

> ID：14138286
> 
> 赞同：13
> 
> 时间：2013-01-03T11:44:54.400
> 
> 标签：c#, algorithm, center, polygon

想象一下，我有一个如下所示的多边形：

![不规则多边形](../Images/3b375d63d92ee605e881b4578f7738ec.png)

我正在寻找一种 C# 算法，我可以用它在任何多边形内找到一个点（可能是中间点，也可能是一个随机点）。

为了找到质心，我使用了以下算法：

```
private Point3d GetPolyLineCentroid(DBObject pObject, double pImageWidth, double pImageHeight)
        {
            Point2d[] pointArray = GetPointArrayOfRoomPolygon(pObject);

            double centroidX = 0.0;
            double centroidY = 0.0;
            double signedArea = 0.0;
            double x0 = 0.0; // Current vertex X
            double y0 = 0.0; // Current vertex Y
            double x1 = 0.0; // Next vertex X
            double y1 = 0.0; // Next vertex Y
            double a = 0.0;  // Partial signed area

            int i = 0;
            for (i = 0; i < pointArray.Length - 1; ++i)
            {
                x0 = pointArray[i].X;
                y0 = pointArray[i].Y;
                x1 = pointArray[i + 1].X;
                y1 = pointArray[i + 1].Y;
                a = x0 * y1 - x1 * y0;
                signedArea += a;
                centroidX += (x0 + x1) * a;
                centroidY += (y0 + y1) * a;
            }

            x0 = pointArray[i].X;
            y0 = pointArray[i].Y;
            x1 = pointArray[0].X;
            y1 = pointArray[0].Y;
            a = x0 * y1 - x1 * y0;
            signedArea += a;
            centroidX += (x0 + x1) * a;
            centroidY += (y0 + y1) * a;

            signedArea *= 0.5;
            centroidX /= (6.0 * signedArea);
            centroidY /= (6.0 * signedArea);

            Point3d centroid = new Point3d(centroidX, centroidY, 0);

            return centroid;
        } 
```

这适用于这样的多边形：

![L-多边形](../Images/70fb46c3e08073ea954b19ec68a3f8a8.png)

但是，如果我的多边形具有 C 或类似的形式，则此算法不起作用，因为中心偏离质量在多边形之外。

有谁知道如何在任何多边形内始终获得点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T12:13:20.387

您可以使用**多边形三角剖分**将多边形分成三角形。

[在这篇 CodeProject 文章](http://www.codeproject.com/Articles/8238/Polygon-Triangulation-in-C)中使用 c# 演示了一种这样的算法。

一旦你有了三角形，找到三角形内的任意点就很容易了。总和为 1.0 乘以三角形顶点的任何重心坐标将为您提供三角形内的一个点。

可以使用重心坐标 [0.333333, 0.333333, 0.333333] 导出中心：

```
float centerX = A.x * 0.333333 + B.x * 0.333333 + C.x * 0.3333333;
float centerY = A.y * 0.333333 + B.y * 0.333333 + C.y * 0.3333333; 
```

或更简单地说：

```
float centerX = (A.x + B.x + C.x) / 3f;
float centerY = (A.y + B.y + C.y) / 3f; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T11:36:56.917

用这个：

```
private Point getCentroid(pointArray)
{
   double centroidX = 0.0;
   double centroidY = 0.0;

   for (int i = 0; i < pointArray.Length; i++)
   {
          centroidX += pointArray[i].X;
          centroidY += pointArray[i].Y;`
   }
   centroidX /= pointArray.Length;
   centroidY /= pointArray.Length;

   return(new Point(centroidX ,centroidY));
} 
```

这段代码只是为了找到多边形的质心。要检查一个点是在多边形内部还是外部，请查看此链接[http://bbs.dartmouth.edu/~fangq/MATH/download/source/Determining%20if%20a%20point%20lies%20on%20the%20interior%20of% 20a%20多边形.htm](http://bbs.dartmouth.edu/~fangq/MATH/download/source/Determining%20if%20a%20point%20lies%20on%20the%20interior%20of%20a%20polygon.htm)

# java - 作为参数传递时转义文件名

> ID：14138289
> 
> 赞同：0
> 
> 时间：2013-01-03T11:45:01.357
> 
> 标签：java, string, escaping

我的 Java 程序正在启动另一个进程并将文件的绝对路径作为命令行参数传递。路径可能包含空格。所以我在将路径添加到参数之前引用它。当路径中出现双引号时，我将使用`\`.

这是代码：

```
private String escapeQuotes(String original) {
    StringBuilder builder = new StringBuilder();
    for (int i = 0; i < original.length(); i++) {
        if (original.charAt(i) == '"') {
            builder.append('\\');
        }
        builder.append(original.charAt(i));
    }
    return builder.toString();
} 
```

我像这样使用它，

```
String args = " \"" + escapeQuotes(filePath) + "\""; 
```

这很好用。但我想知道这种方法是万无一失的吗？或者还有什么我应该处理的事情，就像我转义双引号的方式一样？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:08:06.337

根据我在帖子下的评论：恕我直言，该方法并非万无一失，*因为*它还会转义已经转义的引号。我会使用：

```
private String escapeQuotes(String original) {
    return original.replaceAll("(?<!\\\\)\"", "\\\\\"");
} 
```

然后

```
System.out.println(escapeQuotes("Not escaped\", escaped\\\"")); 
```

印刷

`Not escaped\", escaped\"`

在控制台中，而您的版本将打印

`Not escaped\", escaped\\"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:54:09.210

我认为你不需要这样做，例如

```
Runtime.getRuntime().exec(new String[] {"cmd", "/c", "dir", "d:/test ;test"}) 
```

工作正常，请注意“f:/test ;test”包含 bot ' ' 和 ';'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T11:54:14.537

你是如何启动另一个进程的？如果您使用的[是带有数组的 Runtime.exec 版本，](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)则无需在任何参数中转义空格。

例如

```
Runtime.getRuntime().exec(new String[] { "notepad.exe", 
    "c:\path with spaces\afile.txt" }); 
```

# android - android popupmenu在屏幕右边缘被截断

> ID：14138296
> 
> 赞同：0
> 
> 时间：2013-01-03T11:45:38.843
> 
> 标签：android, popupmenu

我在屏幕的右边缘放置了一个按钮。

此按钮展开一个弹出菜单。

问题是，由于按钮的位置，菜单似乎被截断。

下面的屏幕截图显示了该活动，该活动被强制为水平方向。“选择图像”按钮展开弹出菜单，该菜单显示为截断。

我怎样才能让它完全可见？

谢谢。

![截屏](../Images/76dbac61e266980530e7448e618d1c45.png)

# java - 替换 HTML 中的所有 URL

> ID：14138297
> 
> 赞同：3
> 
> 时间：2013-01-03T11:45:45.410
> 
> 标签：java, html, web-crawler, crawler4j

我正在使用[crawler4j](http://crawler4j.googlecode.com)抓取一些 HTML 文件，我想用自定义链接替换这些页面中的所有链接。目前，我可以使用以下代码获取源 HTML 和所有传出链接的列表：

```
 HtmlParseData htmlParseData = (HtmlParseData) page.getParseData();
        String html = htmlParseData.getHtml();
        List<WebURL> links = htmlParseData.getOutgoingUrls(); 
```

然而，一个简单的`foreach`循环和搜索和替换不会让我得到我想要的。问题是 athe`WebURL.getURL();`将返回绝对 URL，但有时链接是相对的，有时不是。

我想处理所有链接（图像、URL、JavaScript 文件等）。例如我想`images/img.gif`用`view.php?url=http://www.domain.com/images/img.gif`.

我唯一想到的解决方案是使用有点复杂的方法`Regex`，但恐怕我会错过一些罕见的情况。这已经完成了吗？是否有图书馆或一些工具来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:27:51.580

它必须是Java解决方案吗？[PhantomJs](http://phantomjs.org/)结合[pjscrape](http://nrabinowitz.github.com/pjscrape/)可以对页面进行站点抓取以查找所有 url。

您只需要创建一个配置 javascript 文件。

**获取链接.js：**

```
pjs.addSuite({
    url: 'http://stackoverflow.com/questions/14138297/replace-all-urls-in-a-html',
    noConflict: true,
    scraper: function() {
          var links = _pjs.$('a').map(function() {
           // convert relative URLs to absolute
           var link = _pjs.toFullUrl($(this).attr('href'));
           return link;
      });
      return links.toArray();
    }
});
pjs.config({ 
  // options: 'stdout' or 'file' (set in config.outFile)
    log: 'stdout',
    // options: 'json' or 'csv'
    format: 'json',
    // options: 'stdout' or 'file' (set in config.outFile)
    writer: 'stdout',
    scrape_output.json
}); 
```

并运行命令`phantomjs pjscrape.js getlinks.js`。在此示例中，输出存储在一个文件中（也可以记录在控制台中）：

这是（部分）输出：

```
* Suite 0 starting
* Opening http://stackoverflow.com/questions/14138297/replace-all-urls-in-a-html
* Scraping http://stackoverflow.com/questions/14138297/replace-all-urls-in-a-html
* Suite 0 complete
* Writing 145 items
["http://stackoverflow.com/users/login?returnurl=%2fquestions%2f14138297%2freplace-all-urls-in-a-html","http://careers.stackoverflow.com","http://chat.stackoverflow.com","http://meta.stackoverflow.com","http://stackoverflow.com/about","http://stackoverflow.com/faq","http://stackoverflow.com/","http://stackoverflow.com/questions","http://stackoverflow.com/tags","http://stackoverflow.com/users","http://stackoverflow.com/badges","http://stackoverflow.com/unanswered","http://stackoverflow.com/questions/ask", ...
"http://creativecommons.org/licenses/by-sa/3.0/","http://creativecommons.org/licenses/by-sa/3.0/","http://blog.stackoverflow.com/2009/06/attribution-required/"]
* Saved 145 items 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:04:45.853

我认为您可以为此使用正则表达式：

例如 ：

```
 ...
   String regex = "\\/[^.]*\\/[^.]*\\.";
   Pattern pattern =  Pattern.compile(regex);
   Matcher  matcher = pattern.matcher(text);

   while(matcher.find()){
    String imageLink =  matcher.group();
    text = text.replace(imageLink,prefix+imageLink);
   } 
```

# android - android中的菜单选项

> ID：14138298
> 
> 赞同：6
> 
> 时间：2013-01-03T11:45:45.507
> 
> 标签：android

在参考了很多教程之后，我才知道，而不是`Menu`他们有`ActionBar`for `> API 10`. 但我使用`API 7`sdk 进行测试，我曾经`Menus`使用`drawable images`. 但只有文本来了，可绘制的图标图像没有显示在菜单选项中。请帮我解决这个问题。

我的`XML`：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <!--
             Single menu item
             Set id, icon and Title for each menu item
    -->
    <item
        android:id="@+id/savedstory"
        android:background="#000000"
        android:minHeight="20dp"
        android:title="Saved Stories"/>
    <item
        android:id="@+id/setting"
        android:background="#000000"
        android:minHeight="20dp"
        android:title="Settings"/>
    <item
        android:id="@+id/Bookmark"
        android:background="#000000"
        android:minHeight="20dp"
        android:title="Bookmark This"/>
    <item
        android:id="@+id/share"
        android:background="#000000"
        android:minHeight="20dp"
        android:title="Share This"/>
    <item
        android:id="@+id/save"
        android:background="#000000"
        android:minHeight="20dp"
        android:title="Save This"/>
    <item
        android:id="@+id/small"
        android:icon="@drawable/font3"
        android:minHeight="20dp">
This icon is not showing.
            />
        <item
            android:id="@+id/medium"
            android:background="#ffffff"
            android:minHeight="20dp"
            android:title="Medium font"/>
        <item
            android:id="@+id/big"
            android:background="#000000"
            android:minHeight="20dp"
            android:title="Big font"/>
    </item>

</menu> 
```

我的膨胀代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
  MenuInflater menuInflater = getMenuInflater();
  menuInflater.inflate(R.menu.newsdescriptionmenu, menu);
  return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:56:23.137

如果您参考[菜单文档](http://developer.android.com/reference/android/view/Menu.html)“

> **选项菜单**：图标菜单不支持项目复选标记，仅显示项目的精简标题。扩展菜单（仅在六个或更多菜单项可见时可用，通过图标菜单中的“更多”项访问）不显示项目图标，并且不鼓励使用项目复选标记。

由于我看不到你如何膨胀（什么选项等）你的菜单，我只能假设你没有看到这个项目的图标，因为它是第六个项目，并在“更多”之后点击扩展菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:01:53.813

请检查以下代码片段。

菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/Menu1"
        android:orderInCategory="1"
        android:title="Menu 1"/>
    <item
        android:id="@+id/Menu2"
        android:orderInCategory="2"
        android:title="Menu 2"/>
    <item
        android:id="@+id/Menu3"
        android:orderInCategory="3"
        android:title="Menu 3"/>
    <item
        android:id="@+id/submenu"
        android:orderInCategory="4"
        android:title="Sub menu">
        <menu>
            <item
                android:id="@+id/submenu1"
                android:title="Sub menu 1"/>
            <item
                android:id="@+id/submenu2"
                android:title="Sub menu 2"/>
        </menu>
    </item>

</menu> 
```

将这些行添加到您的`Activity Class`

```
public class MenuActivity extends Activity {
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }
  public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(getApplication()).inflate(R.menu.menu, menu);
    return(super.onPrepareOptionsMenu(menu));
  }

  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.Menu1:
      Toast.makeText(this, "Menu 1", Toast.LENGTH_SHORT).show();
    break;
    case R.id.Menu2:
      Toast.makeText(this, "Menu 2", Toast.LENGTH_SHORT).show();
    break;
    case R.id.Menu3:
      Toast.makeText(this, "Menu 3", Toast.LENGTH_SHORT).show();
    break;
    case R.id.submenu:
      Toast.makeText(this, "Sub menu", Toast.LENGTH_SHORT).show();
    break;
  }
  return(super.onOptionsItemSelected(item));
 }
} 
```

# c# - C# .Net 如何确定是否提供了可为空的 DataMember 值

> ID：14138306
> 
> 赞同：0
> 
> 时间：2013-01-03T11:46:07.990
> 
> 标签：c#, soap, datacontract, optional, datamember

我正在实施 WCF/Soap 服务操作，并已将数据合同的一些成员定义为不需要 ( `IsRequired = false`)。

我的问题与以下两种情况有关...

*   客户端为合约元素提供一个空值（i:nil="true"）
*   客户不提供可选元素（即他们向我发送部分合同）

这个问题对于复杂和可为空的原始类型都很重要。据我所知，.Net 序列化程序`null`在这两种情况下都会返回，所以我的问题是，谁能推荐一种方法来确定 SOAP 请求中是否提供了可选参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:12:06.313

一种解决方法是在您的数据合同中添加布尔*MemberSupplied类型成员。*例如：

```
[DataContract]
public class EmployeeSearchParams
{
    [DataMember]
    public Employee Manager {get; set;}

    [DataMember]
    public bool ManagerSupplied {get; set;}
} 
```

# java - XML 中的转义序列

> ID：14138323
> 
> 赞同：0
> 
> 时间：2013-01-03T11:46:59.433
> 
> 标签：java, jsp

当客户端访问 Xml 时，由于特殊字符而出现异常![在此处输入图像描述](../Images/cae17dbae1aa3aad8b2b1ebf25d0ace6.png)

谁能帮我...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:50:15.130

您需要确保特殊字符包含在`CDATA`部分中：

```
<![CDATA[
some special characters here
]]> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:28:35.923

您需要设置正确的编码，并确保使用相同的编码创建 XML 文档。

```
<?xml version="1.0" encoding="INSERT ENCODING HERE"?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:50:11.460

我在打开/读取 XML 时发现了我的错误，因为三个符号我得到了错误。所以需要将 Character: 替换为`<>&`EntityName: `&lt;&gt;&amp;`。那么只有解析错误不会显示。

[单击此处查看 HTML 符号实体参考](http://www.w3schools.com/tags/ref_symbols.asp)

[单击此处阅读 XML 基本生成](http://www.xmlnews.org/docs/xml-basics.html)

在其他情况下，需要替换实体名称的符号，然后才不会显示解析异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-10T16:57:55.010

您可以在 XPL 中包含 XML 的特殊字符。XPL 的结构与 XML 完全相同，但允许使用特殊字符。XPL 到 XML 转换实用程序将为您处理所有细节。[http://hll.nu](http://hll.nu)

# css - CSS无法弄清楚为什么div消失了

> ID：14138330
> 
> 赞同：0
> 
> 时间：2013-01-03T11:48:24.557
> 
> 标签：css, layout, html

我正在尝试通过在 2 个单独的 div 中使用 2 个图像来为搜索栏制作一些标签，但由于某种原因，它只会显示一个图像。非此即彼。如果我从 css 中注释掉 home-searchbar-school id，则会显示教授选项卡，否则只会显示学校，并且会显示教授选项卡应该在的位置。当我查看 div 在 google chrome 的开发助手中的位置时，它会在正确的位置显示它们，所以我有点难过。

这是HTML：

```
<div id="home-searchbar">
    <div id="home-searchbar-tabs">
        <div id="home-searchbar-professor" class="home-searchbar-tab">

        </div>
        <div id="home-searchbar-school" class="home-searchbar-tab">

        </div>
    </div>
    <div id="home-searchbar-container">

    </div>
</div> 
```

和CSS：

```
#home-searchbar{
    margin-left: 20px;
    float: left;
    height: 115px;
    width: 980px;
    background-color: green;    
}

#home-searchbar-tabs{
    float: left;
    width: 980px;
    height: 32px;
    background-color: red;
}

.home-searchbar-tab{
    background-color: yellow;
    width: 190px;
    height: 32px;
    float: left;
}

#home-searchbar-professor{
    background: url('../img/searchtabs.png') 0 0  no-repeat;
}

#home-searchbar-professor{
    background: url('../img/searchtabsinactive.png') 0 -64px  no-repeat;
}

#home-searchbar-container{
    float: left;
    width: 980px;
    height: 83px;
    background-color: purple;
} 
```

这些图像是精灵，它们工作正常，所以我只会上传其中一个。另一个图像是相同的只是不同的配色方案。

还有一个随机的小问题，在 div 中有一个类和 id 是不是很好？我仍在学习 CSS，所以想知道这是否是在 div 中使用两者的正确方式/最佳方式？

非常感谢您提供的任何帮助或建议！

![在此处输入图像描述](../Images/11820ad21722f0105dd8c00fb908677d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:09:20.710

好的，这是答案：“两个背景 css 都使用相同的 id，#home-searchbar-professor”

ty代表，你的css是好的顺便说一句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:57:24.900

```
#home-searchbar-professor{
    background: url('../img/searchtabs.png') 0 0  no-repeat;
}

#home-searchbar-professor{
    background: url('../img/searchtabsinactive.png') 0 -64px  no-repeat;
} 
```

两者都被调用`home-searchbar-professor`，所以将一个重命名为`home-searchbar-school`

# ios - 主要基于 AJAX 调用构建的 iOS phonegap 应用

> ID：14138331
> 
> 赞同：2
> 
> 时间：2013-01-03T11:48:24.640
> 
> 标签：ios, ajax, cordova, mobile, app-store

我正在考虑我的新 iOS 应用程序的架构。我不知道应用程序的多少部分构建为应用程序的本机部分，以及通过 AJAX 调用动态加载了多少。

例如管理区域。我可以将所有管理区域创建为本机部分，并通过 AJAX 仅加载数据。但如果我想稍后添加另一个表单字段，我将不得不发布应用程序的更新。我可以通过 AJAX 调用（不仅是数据，还有 HTML 结构）加载所有管理区域来避免这种情况。这将非常灵活。但这会增加传输的数据量，我不知道这对苹果来说是否可以接受。

这种高度 AJAX 的结构对 Apple 来说是否可以称为 app okkey？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:46:34.767

您实际上可以像这样构建一个应用程序，但这会导致您以后的用户下载量更高。

我同意以这种方式构建应用程序可能是停止每次更新都超越 Apple 的解决方案。

亲切的问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:54:45.613

我认为您不必担心，因为我的应用程序具有与您相同的结构，它通过 AJAX 加载一些数据，并且我在 App Store 上没有问题。

# javascript - Telerik sitefinity 5.1 中的“系统未定义”错误

> ID：14138333
> 
> 赞同：1
> 
> 时间：2013-01-03T11:48:29.720
> 
> 标签：javascript, jquery, telerik, sitefinity-5

我从页面编辑内容时收到“sys is undefined”错误。在 Mozilla 中，Google Chrome 和 IE8 可以正常工作，但 IE10 不支持。我在页面中使用了 css3 和 html5 属性。如何解决这个问题？

![错误](../Images/125eeb2b9940e877fcfabd17c2f96764.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T07:29:34.297

这可能有很多原因：

1.  您的服务器日期是否有可能**早**于您构建项目的日期？通常 sys 未定义发生在您有两台服务器并且您部署“**将来**”构建的 dll 时

2.  如果不是，您还可以查看 Telerik 的以下链接以了解最常见的原因：http: [//blogs.telerik.com/aspnet-ajax/posts/10-03-16/common-reasons-for-the-lsquo-sys -is-undefined-rsquo-error-in-asp-net-ajax-applications.aspx](http://blogs.telerik.com/aspnet-ajax/posts/10-03-16/common-reasons-for-the-lsquo-sys-is-undefined-rsquo-error-in-asp-net-ajax-applications.aspx)（其中一些可能不适用于 Sitefinity）。

3.  还要检查可能正在重写 Telerik.Web.UI.WebResource.axd url 的重写器（转到“网络”选项卡，单击“开始捕获”）并查看是否有 404）。

# php - 如何在zend分页中添加额外参数

> ID：14138335
> 
> 赞同：0
> 
> 时间：2013-01-03T11:48:36.790
> 
> 标签：php, zend-framework

![在此处输入图像描述](../Images/bcf5d105ef0bde31d7124ed90e01adf7.png)我如何在 zend 分页中添加额外的参数。我必须在列表用户中提供过滤功能。所以我想发送带有页码的搜索关键字。

分页码

```
$page = $this->_getParam('page', 1);
        $paginator = Zend_Paginator::factory($data);
        $paginator->setItemCountPerPage(2);//PAGING_RESULT_PER_PAGE
        $paginator->setCurrentPageNumber($page);
        $paginator->setPageRange(PAGING_PAGES_RANGE_PER_PAGE);
        $this->view->users = $paginator; 
```

我想将搜索数据 onchange 事件添加到分页。这个分页正在使用 ajax 现在我想要它应该根据过滤器数据进行更改。我无法执行此操作....你能给我任何建议吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:11:35.073

我不太确定“zend 分页中的额外参数”是什么意思……您是否试图将 GET-Parameter 传递给具有分页器的控制器？$data 里面是什么？您的搜索参数和路线如何？您可以在 bootstrap.php 中尝试以下操作（如果传递 get var 是您正在努力解决的问题）：

```
protected function _initConstants()
{
    [...]

    defined('QSA_SEARCH') || define('QSA_SEARCH', 'q');

    [...]
} 
```

在您的控制器内部，您可以通过以下方式访问它：

```
 [...]

    $search = $this->getRequest()->getParam(QSA_SEARCH);

    [...] 
```

通过 get 请求传递搜索字符串：

```
http://domain.com/<controller>/<pagenum>?q=<searchstring> 
```

例如：

```
http://domain.com/users/2?q=foo 
```

编辑：或者您在将搜索字符串传递给 Zend_Paginator::factory 时遇到问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:13:56.860

您可以从 javascript 更改代码。

```
<script>
$(document).ready(function(){
    $('.paginationControl a').click(function(){
        if($('#keyword').val() != '')
        {
            var href = $(this).attr('href')+'/keyword/'+$('#keyword').val();
            $(this).attr('href', href);
        }
    });
});
</script>

<input type="text" name="keyword" value="" id="keyword"/>

<div class="paginationControl">
  <a href="/page/2">2</a> 
  <a href="/page/3">3</a>
  <a href="/page/4">4</a>
  <a href="/page/5">5</a>
</div> 
```

# magento - 转到完整站点 Magento 链接以更改主题

> ID：14138342
> 
> 赞同：2
> 
> 时间：2013-01-03T11:49:00.837
> 
> 标签：magento

我已经使用 Magento 1.7.0.2 中的内置 iphone 主题创建了一个移动站点，我遇到的问题是创建一个链接，以便用户可以选择返回完整站点，有没有办法创建链接以更改 Magento 中的主题或创建使 Magento 将移动设备视为普通 Web 浏览器的链接？

我已经查看了很多东西，例如尝试使移动设备在单击链接后看起来具有不同的用户代理，但我没有看

提前致谢

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:20:35.227

最简单的方法是创建 2 个商店视图：一个用于移动版，第二个用于完整版。例如：[http](http://example.com/) ://example.com/和[http://example.com/m/](http://example.com/m/)

您有移动用户代理的模式，因此您可以检查用户是否使用移动设备 — 将他重定向到移动商店 (http://example.com/m/)，然后添加到主商店的链接：[http:// example.com/](http://example.com/)

另一种解决方案是使用一个相同的 URI，只需将商店代码添加到地址： `http://example.com/?___store=mobile`和`http://example.com/?___store=full`.

# jquery - ajax后功能不起作用

> ID：14138343
> 
> 赞同：-3
> 
> 时间：2013-01-03T11:49:01.983
> 
> 标签：jquery, ajax, function

> **可能重复：**
> [ajax调用后jquery绑定函数和触发器](https://stackoverflow.com/questions/7764766/jquery-bind-functions-and-triggers-after-ajax-call)

```
 $('.chatr').mouseover(function() {
    $('#'+this.id+" .action").removeClass('dn');
    }); 
```

该功能在页面加载时起作用，但是当通过ajax加载新内容时，新div的功能不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:51:07.063

您需要使用委托：

```
$(document).on('mouseover', '.chatr', function() {
    $(this).find('.action').removeClass('dn');
}); 
```

但是，如果您有一个包含所有`.chatr`元素的容器，请使用该容器的 ID 而不是`document`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T11:50:47.067

这是因为事件与页面加载有关。加载后附加特定`.chatr`元素，因此您必须使用所谓的委托事件处理程序。尝试这个：

```
$(document).on('mouseover', '.chatr', function() {
    $('#' + this.id + " .action").removeClass('dn');
}); 
```

请注意，您应该`document`使用要附加内容的最近的静态父元素替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:51:00.483

jQuery 事件处理程序仅绑定到执行代码时存在的元素。在该代码执行后添加的元素不会自动绑定事件处理程序，即使它们符合选择器的条件。解决方案是[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)：

```
$(document).on('click', '.chatr', function(e) {
    $('#'+this.id+" .action").removeClass('dn');
}); 
```

理想情况下，您将调用`.on()`函数（并将事件处理程序绑定到）最近的静态祖先元素（即始终存在并且将始终包含您要为其触发事件的元素），而不是`document`. 如果没有看到 HTML，就不可能知道应该是哪个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:53:31.200

这不适用于动态创建的元素，因为在初始页面加载后，事件处理程序绑定被删除\未为新添加的元素设置。

您可以做的是将事件侦听器添加到 '.chatr' div 的父元素，并通过 $(event.target).hasclass('chatr') 检查以确定事件是否应该触发

# mongodb - MongoDB MapReduce：超过 1000 条记录无法按预期工作

> ID：14138344
> 
> 赞同：3
> 
> 时间：2013-01-03T11:49:06.053
> 
> 标签：mongodb, mapreduce

我写了一个 mapreduce 函数，其中记录以下列格式发出

```
{userid:<xyz>, {event:adduser, count:1}}
{userid:<xyz>, {event:login, count:1}}
{userid:<xyz>, {event:login, count:1}}
{userid:<abc>, {event:adduser, count:1}} 
```

其中 userid 是键，其余的是该键的值。在 MapReduce 函数之后，我想得到以下格式的结果

```
{userid:<xyz>,{events: [{adduser:1},{login:2}], allEventCount:3}} 
```

为了实现这一点，我编写了以下reduce函数，我知道这可以通过group by..在聚合框架和mapreduce中实现，但是对于复杂的场景我们需要类似的功能。所以，我正在采用这种方法。

```
var reducefn = function(key,values){
var result = {allEventCount:0, events:[]};
values.forEach(function(value){
    var notfound=true;
    for(var n = 0; n < result.events.length; n++){
        eventObj = result.events[n];
        for(ev in eventObj){
            if(ev==value.event){
                result.events[n][ev] += value.allEventCount;
                notfound=false;
                break;
            }
        }
    }
    if(notfound==true){ 
        var newEvent={}
        newEvent[value.event]=1; 
        result.events.push(newEvent);
    }
    result.allEventCount += value.allEventCount;
});
return result; 
```

}

这运行完美，当我运行 1000 条记录时，当有 3k 或 10k 条记录时，我得到的结果是这样的

```
{ "_id" : {...}, "value" :{"allEventCount" :30, "events" :[ { "undefined" : 1},
{"adduser" : 1 }, {"remove" : 3 }, {"training" : 1 }, {"adminlogin" : 1 }, 
{"downgrade" : 2 } ]} } 
```

无法理解这`undefined`是从哪里来的，而且各个事件的总和小于 allEventCount。集合中的所有文档都有非空字段`event`，因此没有未定义的机会。

Mongo DB 版本 -- 2.2.1 环境 -- 本地机器，无分片。

在reduce函数中，为什么`result.events[n][ev] += value.allEventCount;`类似的操作`result.allEventCount += value.allEventCount;`通过了，这个操作会失败呢？

johnyHK 建议的更正答案

减少功能：

```
 var reducefn = function(key,values){
    var result = {totEvents:0, event:[]};
    values.forEach(function(value){
        value.event.forEach(function(eventElem){
            var notfound=true;
            for(var n = 0; n < result.event.length; n++){
                eventObj = result.event[n];
                for(ev in eventObj){
                for(evv in eventElem){
                    if(ev==evv){
                        result.event[n][ev] += eventElem[evv];
                        notfound=false;
                        break;
                    }
                }}
            }
            if(notfound==true){ 
                result.event.push(eventElem);
            }
        });
        result.totEvents += value.totEvents;
    });
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:39:23.057

`emit`您从函数中获取的对象的形状`map`必须与从函数返回的对象相同，因为在处理大量文档（如本例中）时`reduce`，a 的结果`reduce`可能会被反馈到。`reduce`

所以你需要改变你`emit`的发出这样的文档：

```
{userid:<xyz>, {events:[{adduser: 1}], allEventCount:1}}
{userid:<xyz>, {events:[{login: 1}], allEventCount:1}} 
```

然后`reduce`相应地更新您的功能。

# android - Android-Titanium 的注解拖放

> ID：14138345
> 
> 赞同：1
> 
> 时间：2013-01-03T11:49:07.323
> 
> 标签：android, google-maps-api-3, titanium-mobile

我是 Titanium 的新手，我想拖放图钉并获得它的坐标。我有适用于 iOS 的代码。

```
mapview.addEventListener('pinchangedragstate', function(evt)
{

    alert("pinchangedragstate Detected");
    if (evt.oldState == "dragging") {
        annotation.subtitle = [annotation.latitude, ':', annotation.longitude].join(' ');
    }
    Ti.API.info(['newState:', evt.newState, 'oldState', evt.oldState].join(' '));
}); 
```

任何人都知道如何为 Android-Titanium 做类似的工作？

# windows - 如何以纯文本格式显示当前月份？

> ID：14138348
> 
> 赞同：0
> 
> 时间：2013-01-03T11:49:25.717
> 
> 标签：windows, powershell, keyboard-shortcuts, plaintext

关于如何以纯文本快速将日历的**当前月份打印到剪贴板或 Windows 环境中的命令的任何建议？**为了清楚起见，我希望看到完整的打印月份，类似于单击 Windows 任务栏中的时钟时看到的内容。我正在考虑一个轻量级的 PowerShell 脚本，或者可能有一些其他预打包的 Windows 应用程序功能可以让我轻松地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:28:07.397

试试这个：

```
function Get-Calendar($year=(Get-Date).Year,$month=(Get-Date).Month){
    $dtfi = New-Object System.Globalization.DateTimeFormatInfo
    $AbbreviatedDayNames=$dtfi.AbbreviatedDayNames | ForEach-Object {" {0}" -f $_.Substring(0,2)}

    $header= "$($dtfi.MonthNames[$month-1]) $year"
    $header=(" "*([math]::abs(21-$header.length) / 2))+$header
    $header+=(" "*(21-$header.length))

    Write-Host $header -BackgroundColor yellow -ForegroundColor black
    Write-Host (-join $AbbreviatedDayNames) -BackgroundColor cyan -ForegroundColor black
    $daysInMonth=[DateTime]::DaysInMonth($year,$month)

    $dayOfWeek =(New-Object DateTime $year,$month,1).dayOfWeek.value__
    $today=(Get-Date).Day

    for ($i = 0; $i -lt $dayOfWeek; $i++){Write-Host (" "*3) -NoNewline}
    for ($i = 1; $i -le $daysInMonth; $i++)
    {
        if($today -eq $i){Write-Host ("{0,3}" -f $i) -NoNewline -BackgroundColor red -ForegroundColor white}
        else {Write-Host ("{0,3}" -f $i) -NoNewline -BackgroundColor white -ForegroundColor black}

        if ($dayOfWeek -eq 6) {Write-Host}
        $dayOfWeek = ($dayOfWeek + 1) % 7
    }
    if ($dayOfWeek -ne 0) {Write-Host}
}

PS> Get-Calendar

    January 2013
 Su Mo Tu We Th Fr Sa
        1  2  3  4  5
  6  7  8  9 10 11 12
 13 14 15 16 17 18 19
 20 21 22 23 24 25 26
 27 28 29 30 31 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:57:14.753

```
new-alias  Out-Clipboard $env:SystemRoot\system32\clip.exe
(get-date -Format MMMM) |Out-Clipboard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:13:15.710

日历（将线性日期分解为日/月/年的系统）没有当前任何内容。

但是，如果您的意思是[`DateTime`](http://msdn.microsoft.com/en-us/library/System.DateTime)在给定日历中获取 a 的月份，则需要查看指定 a[`CultureInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx)在 .NET 中包含选定日历的日期：

```
$d = Get-Date
$d.ToString('MMMM', [System.Globalization.CultureInfo]::CurrentCulture) 
```

有多种方法可以创建自定义`CultureInfo`或（更一般地）实例[`DateTimeFormatInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.aspx)并作为 的第二个参数传递[`DateTime.ToString()`](http://msdn.microsoft.com/en-US/library/8tfzyc64)。

最简单的方法是获取`CultureInfo`使用目标日历的实例，例如：

```
$ci = [System.Globalization.CultureInfo]::CreatedSpecifiedCulture('jp-jp') 
```

MSDN 有一整页关于使用日历： http: [//msdn.microsoft.com/en-us/library/82aak18x%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/82aak18x%28v=vs.100%29.aspx)（这是 PowerShell 3 的 .NET 4 版本）。

# oauth-2.0 - 使用 Google Picker、Oauth2 上传时出现服务器被拒绝错误

> ID：14138355
> 
> 赞同：34
> 
> 时间：2013-01-03T11:50:03.717
> 
> 标签：oauth-2.0, google-drive-api

我们试图`google.picker`让我们的用户将文件上传到**我们的**驱动器帐户（即，用户不需要拥有 Google 帐户即可上传）。

我们正在尝试将[常规 Google 帐户用作应用程序拥有的帐户](https://developers.google.com/drive/service-accounts#use_regular_google_accounts_as_application-owned_accounts)，并`AUTH_TOKEN`使用 OAuth2 并将其设置为使用 `.setOAuthToken(AUTH_TOKEN)`. 我们遵循了[文档](https://developers.google.com/picker/docs/)中描述的所有内容。

但是，在上传时，我们遇到了`Server Rejected`错误。调用`https://docs.google.com/upload/resumableupload?authuser=undefined`返回：

> {"errorMessage":{"reason":"REQUEST_REJECTED","additionalInfo":{"uploader_service.GoogleRupioAdditionalInfo":{"completionInfo":{"status":"REJECTED"},"requestRejectedInfo":{"reasonDescription":" agent_rejected"}}},"upload_id":"AEnB2Ur64Gb0JDCk_8mg5EhpdcaqL82wBQHumHjcGvDqYibtksmUzhfhBolsmBFzRuvQPRyi43SYfactJZvIWYrQ6xAqzu3L9g"}}

我们知道我们不能使用[服务帐户](https://stackoverflow.com/questions/13269201/let-anonymous-users-upload-files-to-my-google-drive-using-the-google-drive-sdk)，因为选择器不支持它。

我们是否错过了获得的东西`AUTH_TOKEN`？我们需要在控制台中做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T02:34:51.977

## 再给我们一些代码，或者检查对 gapi.auth.authorize() 的调用

1.  检查您是否使用正确的范围来获取 OAuth 令牌。
    *   范围应为[https://www.googleapis.com/auth/drive](https://www.googleapis.com/auth/drive)
2.  仔细检查范围声明：
    *   [https://developers.google.com/accounts/docs/OAuth2Login#sendauthrequest](https://developers.google.com/accounts/docs/OAuth2Login#sendauthrequest)
3.  检查调用`gapi.auth.authorize()`

    ```
    window.gapi.auth.authorize(
    {
         'client_id': clientId,
         'scope': scope,
         'immediate': false
    },
    handleAuthResult); 
    ```

    来自：[https ://developers.google.com/picker/docs/#hiworld](https://developers.google.com/picker/docs/#hiworld)

如果没有实际的代码示例，很难准确地说出发生了什么。很可能是身份验证令牌集合。但是，它也可能很简单，例如不定义谷歌用户（clientID），这反过来会影响`gapi.auth.authorize()`呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T11:44:53.520

范围似乎是问题。OAuth 令牌必须仅使用正确的范围获得：http: [//tinyurl.com/ldotq4y](http://tinyurl.com/ldotq4y)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T08:32:45.010

也许这个线程可以帮助你：[https](https://groups.google.com/forum/#!topic/Google-Picker-API/PPd0GEESO78) ://groups.google.com/forum/#!topic /Google-Picker-API/PPd0GEESO78 这是关于设置oauth上下文

或这个： [https](https://productforums.google.com/forum/#!msg/drive/GDl4uBkkbxM/jRejcxI-EV8J) ://productforums.google.com/forum/# !msg/drive/GDl4uBkkbxM/jRejcxI-EV8J 这是关于您尝试使用自动转换上传的文件类型..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-11T06:24:42.410

在 Drive 上使用带有函数 doPost 的 Google Apps 脚本将数据发送到服务器。然后使用 Drive API 写入文件。在发布时，如果进行跨域调用，您必须将权限设置为“任何人都可以访问，甚至匿名”。使脚本以您在 Google 中的用户名运行（用于测试），但您很可能希望将该功能移至 Gmail 中的某个应用程序用户帐户。

如果您需要涉及某种级别的身份验证，即使脚本是公开的，您也可以针对 CloudSQL 托管数据库和/或使用 Jdbc 库进行身份验证以连接到外部资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-30T14:34:20.837

轻松替换`scope: 'https://www.googleapis.com/auth/drive.readonly'`为`scope: 'https://www.googleapis.com/auth/drive'`. 这样您就可以进行更改，包括将某些内容上传到您的 Google Drive 帐户。

# node.js - nodeJS zeroMQ：如果sock.send不在setInterval中，为什么不能发送消息

> ID：14138356
> 
> 赞同：2
> 
> 时间：2013-01-03T11:50:07.587
> 
> 标签：node.js, zeromq

我在 nodeJS 中使用 zeroMQ。但似乎在将数据从生产者发送到工作人员时，如果我不将其放入 setInterval 中，则它不会将数据发送给工作人员。我的示例代码如下：

```
producer.js
===========           
     var zmq = require('zmq')
      , sock = zmq.socket('push');

    sock.bindSync('tcp://127.0.0.1:3000');
    console.log('Producer bound to port 3000');
    //sock.send("hello");
    var i = 0;

     //1\. var timer = setInterval(function() {
      var str = "hello";
      console.log('sending work', str, i++);

     sock.send(str);
     //2\. clearTimeout(timer);
     //3\. }, 150);

    sock.on('message', function(msg) {
    console.log("Got A message, [%s], [%s]", msg);
   }); 
```

所以在上面的代码中，如果我添加回 1、2 和 3 中注释的行，那么我确实会收到工人端的消息，否则它不起作用。

谁能阐明为什么要发送消息我需要将其放入 setInterval 中？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:05:28.297

问题隐藏在 node.js 的 zmq 绑定中。我刚刚花了一些时间深入研究它，它基本上在 send() 上执行此操作：

1.  将消息排入队列
2.  冲洗缓冲区

现在问题出在冲洗部分，因为它确实

1.  检查输出socket是否准备好，否则返回
2.  刷新排队的消息

在您的代码中，因为您调用 bind 并立即发送，所以在调用时没有连接工作人员，因为他们根本没有足够的时间注意到。所以消息被排队，我们正在等待一些工人出现。现在有趣的部分 - 我们在哪里检查新工人？在发送功能本身！因此，除非我们稍后调用 send()，否则当实际上有一些工作人员连接时，我们的消息永远不会刷新，它们会永远排队。这就是 setInterval 起作用的原因，因为工作人员有足够的时间来注意和连接，并且您会定期检查是否有任何时间。

[您可以在https://github.com/JustinTulloss/zeromq.node/blob/master/lib/index.js#L277](https://github.com/JustinTulloss/zeromq.node/blob/master/lib/index.js#L277)找到有趣的部分。

干杯;-)

# c++ - C++ 从 DLL 实例化模板类

> ID：14138360
> 
> 赞同：3
> 
> 时间：2013-01-03T11:50:16.443
> 
> 标签：c++, templates, dll, function-pointers

我试图制作一个包含以下内容的 DLL：

**基本模板类**，只有一个虚拟析构函数，没有属性（*我称之为 MatrixInterface*）

具有构造函数、析构函数、operator= 和属性的**派生类（***矩阵类*）

返回指向新派生对象的基类指针的函数：

```
#ifdef BUILD_DLL
    #define DLL_EXPORT __declspec(dllexport)
#else
    #define DLL_EXPORT __declspec(dllimport)
#endif

template<class T>
MatrixInterface<T> DLL_EXPORT * CreateMatrixInstance(unsigned int n,unsigned int m)
{
    return new matrix<T>(n,m);
} 
```

我想在我的程序中使用这个函数来实例化矩阵类，但是我不能为这个函数分配一个函数指针，我不明白为什么。我可以通过这种方式加载任何不是模板函数的函数。

```
#include <windows.h>
#include <iostream>
using namespace std;

template<class T>
class MatrixInterface
{
public:
    virtual ~MatrixInterface(void);
};

typedef MatrixInterface<int>* (*Fptr)(unsigned int,unsigned int);

int main(int argc, char* argv[])
{
    Fptr p;
    MatrixInterface<int> *x;
    char path[]="basicmatrix.dll";
    HINSTANCE hDll = LoadLibrary(path);
    cout<<(char*)path<<endl;
    if(hDll)
    {
        cout<<"Library opened succesfully!"<<endl;
        p = (Fptr)GetProcAddress(hDll,"CreateMatrixInstance");
        if(p) {
            cout<<"working!\n";
            x=p(7,8);
            cout<<"MatrixCreated"<<endl;
            delete x;

        } else {
            cout<<"Failed loading function CreateMatrixInstance\n";
        }
    }
    else
    {
        cout<<"Failed loading library "<<(char*)path<<endl;
    }
    system("pause");
    FreeLibrary(hDll);
    return 0;
} 
```

基类存在于 DLL 和可执行文件中。

* * *

由于某种原因，Visual Studio 无法打开 DLL（使用 MSVC 或 MinGW 编译）。我用 MinGW 编译了程序并加载了 .dll 文件。

* * *

你能告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-03T12:06:22.763

模板仅在编译时解析！它们将在两个不同的编译单元中成为不同的类型。（这就是为什么使用`std::string`as 参数导出函数非常危险的原因）。

因此，您应该明确地将模板实例化为您将要使用/允许使用的类型。

在您`exportimport.h`的文件中，应该有您要在 dll 中公开的所有类型的模板实例化。即`MatrixInterface<int>`.

你应该写：

```
template class MatrixInterface<int>; 
```

以便暴露一种且仅一种类型。参看。[`class template Example<int>;` 语句在 C++11 中是什么意思？](https://stackoverflow.com/questions/53030882/what-does-class-template-exampleint-statement-mean-with-c11)

请参阅此处的文档参考：[https ://en.cppreference.com/w/cpp/language/class_template#Class_template_instantiation](https://en.cppreference.com/w/cpp/language/class_template#Class_template_instantiation)

# javascript - 调用所需函数时是否会触发延迟 javascript 下载/解释？

> ID：14138362
> 
> 赞同：2
> 
> 时间：2013-01-03T11:50:17.647
> 
> 标签：javascript

假设我有两个单独的 JavaScript 块，脚本 A 和脚本 B。在脚本 BI 中，脚本 A 调用函数 a，但尚未下载和/或解释脚本 A。库应该解决依赖关系（使用表或其他东西），触发 A 的解释，然后执行所需的函数调用。

这有时可能很有用（我知道通常不会）。

我已经阅读[了这篇文章](http://wonko.com/post/painless_javascript_lazy_loading_with_lazyload)并且了解了[Lazy Ready 插件](http://archive.plugins.jquery.com/project/LazyReady)，但他们似乎并没有做我想要的依赖解析的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:54:44.980

您可以通过包含包含下载脚本的逻辑的虚拟函数来做到这一点：

```
function funcA(parameter) {
  var source = loadSynchronousAjax( 'url for script A' ); // whatever function you usually use to load data synchronously
  eval( source ); // this will replace the funcA symbol with the proper implementation 
  return funcA( parameter );
} 
```

您必须自己定义依赖关系，但解决方案应该自己处理。如果 funcA （真实的）使用另一个虚拟函数，它将以相同的方式加载。

提取公共代码：

```
function lazyFunction( obj, url, name ) {
  obj[name] = function () {
    var source = loadSynchronousAjax( url );
    eval( source ); 
    return obj[name].apply( obj, arguments );  
  };
}

lazyFunction( window, 'url for script A', 'funcA' );
lazyFunction( window, 'url for script B', 'funcB' );
lazyFunction( window, 'url for script B', 'funcC' ); 
```

这将定义两个具有三个延迟加载的函数的脚本。

我应该补充一点，我认为同步加载脚本不是一个好主意，但是如果惰性函数应该看起来像普通函数，那就没有太多选择了。

如果您可以将惰性函数的签名更改为异步调用，这实际上可能是一个值得的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:52:53.107

他们要求编写 JS 以符合他们的模式，但选项包括：

*   [要求JS](http://requirejs.org/)
*   [YUI 加载程序](http://yuilibrary.com/yui/docs/yui/yui-loader-ext.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:56:05.823

我不确定这是你所追求的，但 LABjs 是一个脚本加载器，可以做你想要的，文档中的一个快速示例

```
<script>
   $LAB
   .script("framework.js").wait()
   .script("plugin.framework.js")
   .script("myplugin.framework.js").wait()
   .script("init.js").wait();
</script> 
```

它将允许您加载文件但不执行它们，因此您也可以等待加载依赖项。希望这是有道理的。 [http://labjs.com](http://labjs.com)

# javascript - 尽管 javascript 验证返回 false 并显示警报消息，但表单仍提交

> ID：14138369
> 
> 赞同：0
> 
> 时间：2013-01-03T11:51:08.427
> 
> 标签：javascript, validation

我有一个要由用户填写的表单，空字段会提示 JavaScript 验证返回一条消息以填写该特定字段。我能够完成这一切，除了尽管返回“警报”消息，表单被提交。我该如何避免这种情况？这是我的 JavaScript：

```
function validateHandAppr(theForm) {

    // Recom or Not Recom  
    if (document.project.rec.selectedIndex == 0) {
        alert("Please Choose the Recommendation Priority .");
        project.rec.focus();
        return false;
    }

    // Recommended priorities 
    if (document.project.rec.selectedIndex == 2 && document.project.recvd_dt.value == "") {

        alert("Fill in the date when culture was received.");
        project.recvd_dt.focus();
        return false;
    }

    if (document.project.rec.selectedIndex == 2 && document.project.recvd_by.value == "") {

        alert("Specify who received the culture.");
        project.recvd_by.focus();
        return false;
    }

    if (document.project.rec.selectedIndex == 2 && document.project.recvd_dt.value != "") {
        var validformat = /^\d{4}\-\d{2}\-\d{2}$/; //.test(project.recvd_dt.value) //Basic check for format validity

        if (!validformat.test(project.recvd_dt.value)) {
            alert("Invalid Date Format. Please enter in the following format: yyyy-mm-dd.")
            return false;
        } else { //Detailed check for valid date ranges
            var yearfield = project.recvd_dt.value.split("-")[0]
            var monthfield = project.recvd_dt.value.split("-")[1]
            var dayfield = project.recvd_dt.value.split("-")[2]
            var dayobj = new Date(yearfield, monthfield - 1, dayfield)
            if ((dayobj.getMonth() + 1 != monthfield) || (dayobj.getDate() != dayfield) || (dayobj.getFullYear() != yearfield)) {
                alert("Invalid Day, Month, or Year range detected. Please correct and submit again.")
                return false;
            } else {
                return true;
            }
        }
    }
} 
```

以下是调用 JavaScript 的形式：

```
<form accept-charset="UTF-8" id="project" name="project"
      action="hand_submit_forms.php" method="post"
      onSubmit="return validateHandAppr(this)"
      class="user-info-from-cookie" enctype="multipart/form-data"> 
```

以下是根据 DaveRandom 建议的更新代码：

```
 function validateHandAppr(theForm) {

  // Recom or Not Recom  
  //var val=true;
      if ( document.project.rec.selectedIndex == 0 )
       {
          alert ( "Please Choose the Recommendation Priority ." );
      document.project.rec.focus();
          return false;
        }

    // Recommended priorities 
       if ( document.project.rec.selectedIndex ==2 && document.project.recvd_dt.value == "")
       {

            alert("Fill in the date when culture was received.");
         document.project.recvd_dt.focus();
         return false; 
    }

       if ( document.project.rec.selectedIndex ==2 && document.project.recvd_by.value == "")
     {

  alert("Specify who received the culture.");
  document.project.recvd_by.focus();
  return false; 
  }

    if ( document.project.rec.selectedIndex ==2 && document.project.recvd_dt.value != ""){
        var validformat=/^\d{4}\-\d{2}\-\d{2}$/ ; //.test(project.recvd_dt.value) //Basic check for format validity

        if (!validformat.test(project.recvd_dt.value))
        {
        alert("Invalid Date Format. Please enter in the following format: yyyy-mm-dd.")
        return false;
        }
        else{ //Detailed check for valid date ranges
        var yearfield=project.recvd_dt.value.split("-")[0]
        var monthfield=project.recvd_dt.value.split("-")[1]
        var dayfield=project.recvd_dt.value.split("-")[2]
        var dayobj = new Date(yearfield, monthfield-1, dayfield)
        if ((dayobj.getMonth()+1!=monthfield)||(dayobj.getDate()!=dayfield)||(dayobj.getFullYear()!=yearfield))
        {
        alert("Invalid Day, Month, or Year range detected. Please correct and submit again.")
        return false;}
        else
        {
        return true; }
        }
    }

  //    return val;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:03:34.773

The problem is these lines:

```
project.rec.focus();
// ...
project.recvd_dt.focus();
// ...
project.recvd_by.focus(); 
```

Your validation conditions reference `document.project` but the above lines represent simply `project` - which does not exist globally because it is a child of `document`, not `window` and you did not declare it locally.

Because these lines are between the `alert()` lines and the `return false;` lines, you will see the alert but the return statement will never be reached - so the function will not return false and the form will be submitted.

If you change the lines to:

```
document.project.rec.focus();
// ...
document.project.recvd_dt.focus();
// ...
document.project.recvd_by.focus(); 
```

...it should work.

# However

You should assign the functions to the `<form>`s DOM object's `submit` event instead of using inline event handlers.

If you do this, you will be passed an event object to the first argument of the function, and you can use [`event.preventDefault()`](https://developer.mozilla.org/en/docs/DOM/event.preventDefault) instead of returning `false`. This would avoid the problem (if the line was placed before the error occurred), and is generally a better way to handle this, because returning `false` also stops propagation of the event, which may not be desired - actually this makes little difference in this specific case but as a general rule it is true.

If you do this, the handler will be executed in the context of the DOM object - so the `this` variable will be a reference to it, and you won't need to pass it in as an argument.

# c# - 在对象图中查找具有相同键的实体以防止“ObjectStateManager 中已存在具有相同键的对象”错误

> ID：14138374
> 
> 赞同：5
> 
> 时间：2013-01-03T11:51:23.757
> 
> 标签：c#, entity-framework, ef-code-first, poco, dbcontext

我首先使用 EF 代码来开发我的 3 层 WinForm 应用程序，我使用 disconnected `POCO`s 作为我的模型实体。我所有的实体都继承自`BaseEntity`类。

我使用了 disconnected `POCO`，所以我`State`在客户端处理实体，并且在`ApplyChanges()`方法中，我将我的实体图（例如 An`Order`与它的`OrderLines`和`Products`）附加到我的`DbContext`，然后将每个实体`State`与它的客户端同步`State`。

```
public class BaseEntity
{

    int _dataBaseId = -1;

    public virtual int DataBaseId // DataBaseId override in each entity to return it's key
    {
        get { return _dataBaseId; }
    } 

    public States State { get; set; }

    public enum States
    {
        Unchanged, 
        Added,
        Modified,
        Deleted
    }
} 
```

因此，当我想保存相关实体的图表时，我使用了以下方法：

```
 public static EntityState ConvertState(BaseEntity.States state)
    {
        switch (state)
        {
            case BaseEntity.States.Added:
                return EntityState.Added;
            case BaseEntity.States.Modified:
                return EntityState.Modified;
            case BaseEntity.States.Deleted:
                return EntityState.Deleted;
            default:
                return EntityState.Unchanged;
        }
    }

    public void ApplyChanges<TEntity>(TEntity root) where TEntity : BaseEntity
    {
       _dbContext.Set<TEntity>().Add(root);
        foreach (var entry in _dbContext.ChangeTracker
        .Entries<BaseEntity>())
        {
            BaseEntity stateInfo = entry.Entity;
            entry.State = ConvertState(stateInfo.State);
        }
    } 
```

但是，如果我的图表包含 2 个或更多具有相同键的实体，我会给出此错误：

```
An object with the same key already exists in the ObjectStateManager... 
```

如何在我的 graph( `root`) 中检测具有相同键的实体并使它们在我的`ApplyChanges()`方法中是唯一的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T18:41:26.053

有一种方法可以搜索数据库并检查是否已经存在具有相同主键的记录，我不知道这是否是您要查找的内容，但代码如下：

```
public static class ObjectSetExtensions
{
    #region Constants

    private const BindingFlags KeyPropertyBindingFlags =
        BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;

    #endregion

    #region Public Methods and Operators

        public static bool RecordExists<TEntity>(
        this ObjectSet<TEntity> set, 
        TEntity entity) where TEntity : class
    {
        Contract.Requires(set != null);
        Contract.Requires(entity != null);

        var expressionParameter = Expression.Parameter(typeof(TEntity));
        var keyProperties = set.GetKeyProperties();

        var matchExpression =
            keyProperties.Select(
                pi =>
                Expression.Equal(
                    Expression.Property(expressionParameter, pi.Last()),
                    Expression.Constant(pi.Last().GetValue(entity, null))))
                .Aggregate<BinaryExpression, Expression>(
                    null,
                    (current, predicate) => (current == null) ? predicate : 
                        Expression.AndAlso(current, predicate));

        var existing =
            set.SingleOrDefault(Expression.Lambda<Func<TEntity, bool>>(
            matchExpression, 
            new[] { expressionParameter }));

        return existing != null;
    }

    #endregion

    #region Methods

    private static IEnumerable<PropertyPathCollection> GetKeyProperties<TEntity>(this ObjectSet<TEntity> objectSet)
        where TEntity : class
    {
        Contract.Requires(objectSet != null);

        var entityType = typeof(TEntity);

        return
            objectSet.EntitySet.ElementType.KeyMembers.Select(
                c => new PropertyPathCollection(entityType.GetProperty(c.Name, KeyPropertyBindingFlags)));
    }

    #endregion
}

public sealed class PropertyPathCollection : IEnumerable<PropertyInfo>
{
    // Fields
    #region Static Fields

    public static readonly PropertyPathCollection Empty = new PropertyPathCollection();

    #endregion

    #region Fields

    private readonly List<PropertyInfo> components;

    #endregion

    // Methods
    #region Constructors and Destructors

    public PropertyPathCollection(IEnumerable<PropertyInfo> components)
    {
        this.components = new List<PropertyInfo>();
        this.components.AddRange(components);
    }

    public PropertyPathCollection(PropertyInfo component)
    {
        this.components = new List<PropertyInfo> { component };
    }

    private PropertyPathCollection()
    {
        this.components = new List<PropertyInfo>();
    }

    #endregion

    #region Public Properties

    public int Count
    {
        get
        {
            return this.components.Count;
        }
    }

    #endregion

    #region Public Indexers

    public PropertyInfo this[int index]
    {
        get
        {
            return this.components[index];
        }
    }

    #endregion

    #region Public Methods and Operators

    public static bool Equals(PropertyPathCollection other)
    {
        if (ReferenceEquals(null, other))
        {
            return false;
        }

        return true;
    }

    public static bool operator ==(PropertyPathCollection left, PropertyPathCollection right)
    {
        return Equals(left, right);
    }

    public static bool operator !=(PropertyPathCollection left, PropertyPathCollection right)
    {
        return !Equals(left, right);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj))
        {
            return false;
        }

        if (ReferenceEquals(this, obj))
        {
            return true;
        }

        if (obj.GetType() != typeof(PropertyPathCollection))
        {
            return false;
        }

        return Equals((PropertyPathCollection)obj);
    }

    public override int GetHashCode()
    {
        return this.components.Aggregate(0, (t, n) => (t + n.GetHashCode()));
    }

    #endregion

    #region Explicit Interface Methods

    IEnumerator<PropertyInfo> IEnumerable<PropertyInfo>.GetEnumerator()
    {
        return this.components.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.components.GetEnumerator();
    }

    #endregion
} 
```

用法是这样的：

```
var context = this.DbContext;
var adapter = context as IObjectContextAdapter;
var objectContext = adapter.ObjectContext;

objectContext.CreateObjectSet<TEntity>().RecordExists(instance); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T09:53:40.963

当您调用`_dbContext.Set<TEntity>().Add(root);`它时，它会告诉上下文图中所有实体的状态为`EntityState.Added`. 但是 2 个具有相同 ID 的实体`EntityState.Added`是不允许的，并且会引发异常。

~~尝试将行更改为`_dbContext.Set<TEntity>().Attach(root);`. 这会将图表放入上下文中`EntityState.Unchanged`。已经在上下文中处于其他状态的实体将其状态设置为未更改。~~

~~现在你应该可以去修复状态了。~~

删除这个答案是因为`Attach`会导致相同的错误 - 根据评论

参考：

[何时使用 DbSet<T>.Add() 与 DbSet<T>.Attach()](https://stackoverflow.com/q/15950946/150342)

[为什么实体框架将现有对象重新插入到我的数据库中？](http://msdn.microsoft.com/en-us/magazine/dn166926.aspx)

[使用不存在的外键](http://msdn.microsoft.com/en-us/magazine/hh708747.aspx)

[为处理断开连接的实体提供更好的支持](https://entityframework.codeplex.com/workitem/864)

[DbSet.Attach 方法](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.attach%28v=vs.113%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T04:36:21.230

我改变了`BaseEntity`我

```
public class BaseEntity
{
   public int Id {get; set;}
   public States State { get; set; }
   public bool MustDelete {get; set;} 

   public enum States
   {
     Unchanged, 
     Added,
     Modified,
     Deleted
   }
} 
```

并且还在我的 `BaseDomainService<T>`课堂上更改了以下方法：

```
public class BaseDomainService<T> where T : class
{
    protected readonly DbContext _dbContext;

    public BaseDomainService(IUnitOfWork uow)
    {
        _dbContext = (DbContext)uow;
    }
    .....

    public static EntityState ConvertState(BaseEntity.States state)
    {
        switch (state)
        {
            case BaseEntity.States.Added:
                return EntityState.Added;
            case BaseEntity.States.Modified:
                return EntityState.Modified;
            case BaseEntity.States.Deleted:
                return EntityState.Deleted;
            default:
                return EntityState.Unchanged;
        }
    }    

    public void ApplyChanges<TEntity>(TEntity root) where TEntity : BaseEntity
    {
        _dbContext.Set<TEntity>().Add(root);
        foreach (var entry in _dbContext.ChangeTracker
        .Entries<BaseEntity>())
        {
            if (FoundAnEntityWithSameKeyInDbContext<TEntity>(entry))
                entry.State = EntityState.Detached;
            else
            {
                BaseEntity stateInfo = entry.Entity;
                if (stateInfo.MustDelete == true)
                    entry.State = EntityState.Detached;
                else
                    entry.State = ConvertState(stateInfo.State);
            }
        }
    }

    private bool FoundAnEntityWithSameKeyInDbContext<TEntity>(DbEntityEntry<BaseEntity> entry) where TEntity : BaseEntity
    {
        var tmp = _dbContext.ChangeTracker.Entries<BaseEntity>().Count(t => t.Entity.Id == entry.Entity.Id && t.Entity.Id != 0 && t.Entity.GetType() == entry.Entity.GetType());
        if (tmp > 1)
            return true;
        return false;
    }
} 
```

所以，问题解决了。

# c# - 从值中获取枚举类型

> ID：14138375
> 
> 赞同：6
> 
> 时间：2013-01-03T11:51:33.230
> 
> 标签：c#, enums

```
public enum WeekDays { Sun = 1, Mon = 2, Tue=3, Wed=4, Thu=5, Fri=6, Sat=7 } 
```

我有这个枚举，我有枚举的值。我想要做的是通过传递值来获取我想要传递给下面函数的类型。我可以通过 switch case 任何更好的方法来做到这一点？

例如：值是 6 然后 Weekdays.Fri 作为类型应该传递给下面的函数。

```
 public void CreateNew(WeekDays days)
  {
   //Some logic
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T11:52:48.863

您需要做的就是铸造价值。

```
CreateNew((WeekDays)6); 
```

枚举值本质上只是类型化的整数，因此您可以在枚举和整数类型之间自由转换两种方式。甚至可以毫无问题地将枚举中不存在的整数值强制转换为该类型，因此如果您想避免这种情况，请记住在强制转换之前添加验证以检查该值是否存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T11:52:58.457

只需将值转换为枚举：

```
CreateNew((WeekDays)value) 
```

顺便说一句，如果值的来源不安全，通常最好检查是否在枚举中声明了值。否则你可以通过`(WeekDays)42`：

```
public void CreateNew(WeekDays days)
{  
    if (!Enum.IsDefined(typeof(WeekDays), days))
        throw new ArgumentException();

    // SomeLogic
} 
```

# java - org.firebirdsql.jdbc.FBBlob 到文件

> ID：14138376
> 
> 赞同：2
> 
> 时间：2013-01-03T11:51:34.977
> 
> 标签：java, swing, casting, firebird, jaybird

我需要向用户打开一个 PDF 文件，该文件在 firebird 数据库中保存为 Blob。我试过了：

```
pdf = (File) res.getBlob("blob");
Desktop.getDesktop().open(pdf); 
```

但它不允许我将 blob 转换为文件。这样做的理想方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:05:27.050

Use the blob's `getBinaryStream()` method to read the blob, and write the stream to a `File` created via `createTempFile()`. You can then `open()` the resulting `File`.

# javascript - 在 mvc3 中选择单选按钮后重定向到另一个页面

> ID：14138378
> 
> 赞同：0
> 
> 时间：2013-01-03T11:51:37.140
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3

我有搜索框并在一个页面中添加和编辑按钮。选择单选按钮后我必须编辑详细信息。选择单选按钮并重定向到下一页的脚本如下所示。但只有“选择简历”的警报才有效。其余的代码不起作用。请帮助

```
<script type="text/javascript">
         $(document).ready(function () {
         var which_button;
         var rad;
         $('input[type="image"]').click(function (event) {
         process_form_submission(event);             
         if (which_button == "Edit") {
             if (!$("input[name='rdoUserId']:checked").val()) {
                 alert('Select a Resume!');
                 return false;
             }
             else {
                 rad = $("input[name='rdoUserId']:checked").val();
                 var url = "Edit/" + rad;

                 $('#frmIndexResume').attr("action", url);
                 $('#frmIndexResume').submit();
             }
         }            
         return false;
     })
     function process_form_submission(event) {
         event.preventDefault();
         //var target = $(event.target);  
         var input = $(event.currentTarget);
         which_button = event.currentTarget.value;
     }
 }); 
</script>
<form name="frmIndexResume" method="get"action="">
<table id="tblSearch">
<tr>
<td>Name:@Html.TextBox("Names")</td>
<td>From:@Html.TextBox("FromDate")</td>
<td>To:@Html.TextBox("ToDate")</td>
<td><input type="image" value="Search" src="@Url.Content("~/images/Search.png")"   width="60px"height="40px" alt="Search"/></td>
</tr>
</table>

<table id="Createbtn">
  <tr>
<td>
  <a href="@Url.Action("Create", "Resume")" title="Create">
    <img src="@Url.Content("~/images/Create.png")" width="40px" height="30px"alt="Create"/></a>
</td>
<td>
    <input type="image" value="Edit" src="@Url.Content("~/images/Edit.png")" width="40px" height="30px" alt="Edit"/>       
    </td>
  </tr>
</table>

<table id="tblResume">
<caption>Listings</caption>
<tr>
    <th>Select</th>
    <th>
        Name
    </th>        
    <th>
        DOB
    </th>
</tr>

@foreach (var item in Model)
{
<tr>
     <td>
     <input type="radio" value="@item.Id" name="rdoUserId" />       
    </td>  
    <td>
        @Html.DisplayFor(modelItem => item.Name)
    </td>        
    <td>
        @Html.DisplayFor(modelItem => item.DOB)
    </td>

   </tr>
}

</table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:45:36.657

您有一个循环中的单选按钮，导致单选按钮重复。

```
@foreach (var item in Model)
{
    ...
    <input type="radio" value="@item.Id" name="rdoUserId" />   
    ...    
} 
```

“名称”属性不是唯一标识符。我的猜测是 jQuery 选择表单中的最后一个或第一个单选按钮，因为其中有多个。

除此之外，表格可能还有更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:35:36.763

也许[window.location](http://www.w3schools.com/js/js_window_location.asp)是您正在寻找的。您可以通过以下方式轻松重定向：

```
window.location = url; 
```

或通过：

```
window.navigate(url); 
```

请注意，第二种方法可能是特定于 ie 的。

# php - 如何在zend中使用ajax过滤数据

> ID：14138382
> 
> 赞同：0
> 
> 时间：2013-01-03T11:51:47.410
> 
> 标签：php, zend-framework

我在 users.filer 列表中按字母顺序添加了过滤器功能。我已经在控制器中发送了 ajax 请求，但它没有向我发送过滤后的数据。

这是我的代码

```
if($this->_request->isXmlHttpRequest()) {
            //$this->_helper->viewRenderer->setNoRender();
            $this->_helper->getHelper('layout')->disableLayout();
            //die('sdfdsf');
            if(isset($params['txt_username']) && !empty($params['txt_username'])) {
                $select->where(PREFIX_USERS . 'username like "%' . $params['txt_username'] . '%"');
                $this->view->test_array = $this->getRequest()->getParams();

                //$this->_helper->P($ajax_parameters);
                //echo $_SESSION['user_list_ajax_search'];
                //$this->view->pageParams = $_SESSION['user_list_ajax_search'];
                //$select->where(PREFIX_USERS . 'username like "%' . $_SESSION['user_list_ajax_search'] . '%"');

            }
        }

        //echo $select->__toString();
        $data = $obj_user->fetchAll($select);

        # Paging section
        $page = $this->_getParam('page', 1);
        $paginator = Zend_Paginator::factory($data);
        $paginator->setItemCountPerPage(2);//PAGING_RESULT_PER_PAGE
        $paginator->setCurrentPageNumber($page);
        $paginator->setPageRange(PAGING_PAGES_RANGE_PER_PAGE);
        $this->view->users = $paginator; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:22:50.343

这些 ：

```
$params['txt_username'] 
```

应该是：

```
$this->getRequest()->getParam('txt_username') 
```

或使用：

```
$params = $this->getRequest()->getParams(); 
```

除非它在那里并且您没有发布那段代码。

# nsscrollview - NSScrollView 和内容视图调整大小

> ID：14138384
> 
> 赞同：3
> 
> 时间：2013-01-03T11:52:00.820
> 
> 标签：nsscrollview

我有一个 NSScrollView 显示一个水平滚动的大文档。

我有一个缩放功能，可以在不改变其滚动位置的情况下使文档视图更小。但是，应用程序工具包通过向右滚动文档来防止滚动视图在文档结束后显示一些空白区域。我想防止这种情况发生。我相信这是使文档视图的结尾粘在滚动视图的右/下边缘的相同机制，滚动视图被调整大小。

如何防止剪辑视图滚动？我试过 -setAutoresizeSubviews:NO （在剪辑视图上）， -setAutoresizingMask:NSViewNotSizable （在文档视图上），修改一些拥抱优先级......无济于事。我可以通过在调整大小后将文档滚动回原始位置来进行补偿，但这并不能阻止视图在调整大小时被重绘，因为剪辑视图会自动更改其边界矩形原点（这显然将文档标记为需要显示）。因此，当我调整它的大小时，会向文档视图发送 2 条 -drawRect 消息（当我调整大小时会发送一条消息，当我补偿以恢复原始滚动位置时会发送一条消息），尽管奇怪的是只有一条消息实际上在屏幕上绘制了一些东西。

谢谢你的建议。

让

# java - 初始化对象并稍后根据 if 语句中的值创建它

> ID：14138385
> 
> 赞同：3
> 
> 时间：2013-01-03T11:52:03.183
> 
> 标签：java, c++

我有与此类似的 Java 代码，其中包含许多 if-else 语句：

```
if(...){
     Object1 obj = new Object1();
     String text = obj.getString();
     int number = obj.getInt();
     //do something

}else if (...){
     Object2 obj = new Object2();
     String text = obj.getString();
     int number = obj.getInt();
     //do something
... 
```

是否有可能以某种方式编写代码：

```
<something> obj;  //<- ?

if(..)
     obj = new Object1;
else if(..)
     obj = new Object2;
...
String text = obj.getString();
int number = obj.getInt();
//do something 
```

感谢帮助。

PS：你可以用C++编写解决方案；我会为java弄清楚

PS(2):抱歉英语不好 - 这不是我的主要语言

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:53:39.020

在这两种情况下，您都需要一个基类。对于这两者，您最初可以有一个`NULL`引用 (Java) 或指针 (C++)，然后设置：

```
BaseObject* pBase = NULL;
if (...)
     pBase = new Object1;
else
     pBase = new Object2; 
```

在 Java 中它不会那么不同（缺少 asterix 而`null`不是`NULL`）；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T11:53:55.687

```
Object obj = null;
if(..)
     obj = new Object1();
else if(..)
     obj = new Object2(); 
```

但是，请注意，对于编译器，`obj`它的类型是`Object`. 您不能应用特定于`Object1`或`Object2`没有向下转换的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:04:39.120

上面的替代方法是接口

```
public interface Ibase {
  String getString();
  int getInt();
} 
```

然后，您的两个对象将实现该接口，以确保它们具有可用的方法。

```
public class Object1 implements IBase {
 public String getString() {
   return "string";
 }

 public int getInt() {
   return 0;
 }
} 
```

然后像上面一样可以使用

```
IBase object = null
if(option)
  object = new Object1()
else
 object = new Object2();

object.getString();
object.getInt(); 
```

将接口视为子类必须遵守的合同。

# javascript - 如何从包含 $.get() 请求的函数返回 javascript 变量

> ID：14138390
> 
> 赞同：1
> 
> 时间：2013-01-03T11:52:30.773
> 
> 标签：javascript, jquery

我试过用谷歌搜索，但无法重新喜欢它。对其他人来说，这似乎是一个非常简单的问题，但我对此感到困惑。我有以下代码，其中第一个警报未定义，但我仍然在第二个警报中获得正确的值。但是，如果我注释掉第一个警报（只是带有警报的行），那么第二个警报输出将变得未定义。任何人都可以解释为什么会这样，以及如何在没有第一个警报的情况下正确输出第二个警报，非常感谢任何帮助。

```
function getDetails(ID){
        var qArray = [];
        $.get('get_Question', {"Id":ID}, function(){})
        .success(function(data){
            var json = $.parseJSON(data);
            qArray.push(json.value1);
            qArray.push(json.value2);

        });
        //First Alert
        alert("-> "+qArray[0]);
        return qArray;
     } 
```

这是调用上述方法的第二个警报：

```
var myArray = getDetails(4);
alert("myArray [0]: "+myArray[0]); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T11:54:25.943

您不能返回值，`$.get()`调用是*异步*的。

您需要推迟任何操作，`qArray`直到 AJAX 调用完成，即在回调内部。

更好的是，使用延迟回调：

```
function getDetails(ID) {
    return $.get('get_Question', {"Id":ID})
            .pipe(function(json) {
               return [json.value1, json.value2];
             });
} 
```

deferred 函数创建了一个新的`.pipe`Promise，它最终将返回所需的数组，但仅在 AJAX 调用完成后才返回。

然后你会像这样使用它：

```
getDetails(ID).done(function(qArray) {
     alert("-> " + qArray[0]);
}); 
```

请注意，`$.get()`它不直接支持错误回调，但使用延迟对象可以访问它们：

```
getDetails(ID).done(function(qArray) {
     alert("-> " + qArray[0]);
}).fail(function(jqXHR, textStatus, errorThrown)) {
     alert("The AJAX request failed:" + errorThrown);
}); 
```

如果没有这个，您需要将错误处理直接构建到`getDetails()`函数中，然后需要一些机制来告诉应用程序逻辑的其余部分有关错误。

**注意**，我假设您实际上并不需要`JSON.parse()`手动调用 - 如果您的 Web 服务器返回正确的`Content-Type`标头，那么 jQuery 会自动为您执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T11:55:18.087

Ajax 调用异步发生，这意味着您不能等待调用返回并获取值。这样做的方法是使用回调。您的示例将类似于以下内容：

```
function getDetails(ID, callback){
    $.get('get_Question', {"Id":ID}, function(){})
    .success(function(data){
        var qArray = [];
        var json = $.parseJSON(data);
        qArray.push(json.value1);
        qArray.push(json.value2);
        callback(qArray)
    });
 } 
```

调用它会有所改变：

```
getDetails(4, function (myArray) {
    alert("myArray [0]: "+myArray[0]);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T11:55:44.310

First Alert 在 ajax 调用完成之前被调用，因此该变量仍然是未定义的。这是因为 $.get() 是异步完成的。$.get() 没有选项可以为异步调用传递参数，因此您应该改用 $.ajax() 并传递参数`async: false`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T12:05:35.353

正如其他几个人所说，ajax-request 是*异步*的。但是，您可以将`async`属性设置为`false`以获取*同步*请求。

例子：

```
function getDetails(ID) {
   var result = $.ajax('get_Question', { 
      async : false, 
      data : { 'Id' :  ID }
   });

   // do something with the result

   return result;
} 
```

我自己会使用回调函数，因为`async:false`这是不好的做法，也已被弃用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T11:57:25.123

该`$.get`调用为相关资源创建一个新的*异步*请求。

当您调用第一个警报时，这是`undefined`因为请求尚未完成。此外，由于您被迫暂停警报，因此请求有时间在后台完成。有足够的时间让它在第二个警报前可用。

当您注释掉第一个警报时，也会发生同样的事情。这次在请求完成之前调用了第二个警报，值为`undefined`。

您需要提出请求`synchronous`或考虑在接收到响应后继续执行，方法是使用`success`已在 中定义的回调函数中的回调函数`$.get`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T12:00:06.350

AJAX 是异步的：您无法判断请求何时完成。这通常意味着您需要传递回调方法，这些回调方法将在请求完成时与请求的结果一起调用。在您的情况下，这看起来像：

```
function getDetails(ID, callbackFunc){
    $.get('get_Question', {"Id":ID}, function(){})
    .success(function(data){
        var qArray = [];
        var json = $.parseJSON(data);
        qArray.push(json.value1);
        qArray.push(json.value2);
        callbackFunc(qarray);
    });
 }

 getDetails(4, function(qArray) {
     alert("myArray [0]: "+qArray[0]);
 }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-03T11:54:12.237

您需要重写`$.get`以使用`$.ajax`和指定`async: false`

# asp.net - EditItemTemplate Gridview 中具有父子关系的下拉列表不起作用

> ID：14138397
> 
> 赞同：1
> 
> 时间：2013-01-03T11:52:59.893
> 
> 标签：asp.net, gridview, cascadingdropdown

我有一个页面`gridview`。
我`gridview`的显示产品信息和管理员可以`Edit gridviews columns`。
我的两个`columns`展示`brand name`和`category name`每个产品；
我在网格视图中使用 ItemTemplate 标记中的标签来显示这两列值，并在我的标记中使用两个`dropdownlists`（branddrop，categorydrop） 来编辑这两列值，当管理员在branddrop 中选择一个项目时，categorydrop 应该显示类别名称，它们是与branddrop中选择的品牌名称相关。
`EditItemTemplate`

我在数据库中的品牌表中的品牌名称是：

> 三星、诺基亚、索尼爱立信、苹果、LG、HTC……

我在类别表中的类别名称是：

> Galaxy Nexus，Galaxy Tab 2 7\. 0，Galaxy S3，Asha，Lumia，iPhone，iPad，Xperia Arc，Xperia Neo，Xperia X8，Cookie 3g，Cookie lite，Km555e，擎天柱 l9，擎天柱精英，擎天柱 g，wt18i，w8 ,500,n8...

当我单击 时`Edit button`，branddrop 中的第一个项目等于 Brandlable。

ItemTemplate 中的文本，它工作正常我的问题是类别下降中的第一项不等于可分类。

ItemTemplate 中的文本和类别下拉不显示相关类别名称到品牌名称。
对于它显示 iphone 和 ipad 的每个产品，所以我必须在 branddrop 中选择另一个项目，然后再次选择与该产品相关的相关品牌名称，然后 categorydrop 可以显示相关类别名称的列表。

我尝试使用`brandDrop_SelectedIndexChanged`，`GridView1_RowEditing`但它不起作用。

我不知道如何解决它。

这是我的第一个代码：

```
<asp:TemplateField HeaderText="brand name">
            <ItemTemplate>
                <asp:Label ID="brandname" runat="server" Text='<%#Eval("brand_name") %>'></asp:Label>
                <asp:Label ID="idfrombrand" runat="server" Text='<%#Eval("idfrombrands") %>' Visible="false"></asp:Label>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Label ID="br" runat="server" Text='<%# Eval("idfrombrands") %>' Visible="false"></asp:Label><%--OnSelectedIndexChanged="brandDrop_SelectedIndexChanged" --%> 

                <asp:DropDownList  ID="brandDrop" runat="server" DataTextField="brand_name" DataValueField="id" DataSourceID="SqlDataSource4" AutoPostBack="true"  OnSelectedIndexChanged="brandDrop_SelectedIndexChanged" >
                </asp:DropDownList>
                <asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:mobile_storeConnectionString2 %>" SelectCommand="select [id],[brand_name] from [brands]" ></asp:SqlDataSource>
            </EditItemTemplate>
         </asp:TemplateField>

        <asp:TemplateField HeaderText="category name">
            <ItemTemplate>
                <asp:Label ID="catname" runat="server" Text='<%# Eval("category_name") %>'></asp:Label>
            </ItemTemplate>
           <EditItemTemplate>
               <asp:Label ID="OldCatName" runat="server" Text='<%# Eval("idfromCategories") %>' Visible="false"></asp:Label>
               <asp:DropDownList ID="categoryDrop" runat="server"  AutoPostBack="true" DataTextField="category_name" DataValueField="id" DataSourceID="SqlDataSource3">   <%-- --%>
               </asp:DropDownList>
               <asp:Label ID="cat" runat="server" Text='<%# Eval("idfromCategories") %>' Visible="false" ></asp:Label>
              <asp:SqlDataSource ID="SqlDataSource3" runat="server"   ConnectionString="<%$ ConnectionStrings:mobile_storeConnectionString2 %>" SelectCommand="select [category_name],[id],[idfrombrands] from [categories] where idfrombrands=@idfrombrands " >
                <SelectParameters>
                  <asp:ControlParameter ControlID="brandDrop" 
                    Name="idfrombrands" PropertyName="SelectedValue" Type="Int32"  />
                </SelectParameters>
               </asp:SqlDataSource>

           </EditItemTemplate>
        </asp:TemplateField> 
```

> 这是我为 GridView1_RowDataBound 和 GridView1_RowUpdating 编写的代码：

```
 protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
     int brand=0;
    int category=0;
    //Drop Brand--------------------------------------

    DropDownList list1 = (DropDownList)GridView1.Rows[e.RowIndex].FindControl("brandDrop");
    Label lbl = (Label)GridView1.Rows[e.RowIndex].FindControl("br");

    if (list1.SelectedItem.Value != null)
    {
       brand  = Convert.ToInt32(list1.SelectedItem.Value);//NewIdFromBrand

    }
    else
    {
        brand = Convert.ToInt32(lbl.Text);

    }
    //Drop Category----------------------------------------

   DropDownList list2 = (DropDownList)GridView1.Rows[e.RowIndex].FindControl("categoryDrop");
   Label lbl2 = (Label)GridView1.Rows[e.RowIndex].FindControl("OldCatName");

    //int NewIdFromBrand2 = -1;
    if (list2.SelectedItem.Value != null)
    {
       category  = Convert.ToInt32(list2.SelectedItem.Value);//NewIdFromBrand2

    }
    else
    {

        category = Convert.ToInt32(lbl2.Text);
    }

    //Photo-------------------------------------------

    string photoname = System.Guid.NewGuid().ToString();

    GridViewRow row = GridView1.Rows[e.RowIndex];
    FileUpload fileUpload = row.FindControl("FileUploadimg") as FileUpload;
    Label lbl3 = (Label)GridView1.Rows[e.RowIndex].FindControl("oldImage"); 
    if (fileUpload != null && fileUpload.HasFile)
    {
        fileUpload.SaveAs(Server.MapPath("~/P_Image") + photoname + fileUpload.FileName);

        SqlDataSource1.UpdateParameters["path"].DefaultValue = "~/P_Image" + photoname + fileUpload.FileName;
    }
    else
    {
     SqlDataSource1.UpdateParameters["path"].DefaultValue = lbl3.Text;//oldImage.Text;
    }
    int prid = Convert.ToInt32(GridView1.DataKeys[e.RowIndex].Value);
    SqlConnection cn = new SqlConnection();
    cn.ConnectionString = "server = . ; database = mobile_store ; Trusted_Connection=true";
    DataTable tb = new DataTable();
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = cn;
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "UpdateProduct";
    cmd.Parameters.AddWithValue("@brandid", brand );
    cmd.Parameters.AddWithValue("@catid", category );
    cmd.Parameters.AddWithValue("@pid", prid);
    try
    {
        cn.Open();
        cmd.ExecuteNonQuery();
        SqlDataSource1.DataBind();

    }
    catch (Exception ex2)
    {

    }
    finally { cn.Close(); }
    //GridView1.EditIndex = -1;
    //GridView1.DataBind();

}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //check if is in edit mode
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
            DataRowView dRowView1 = (DataRowView)e.Row.DataItem;
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                if ((e.Row.RowState & DataControlRowState.Edit) > 0)
                {
                    DropDownList ddlStatus = (DropDownList)e.Row.FindControl("brandDrop");
                    ddlStatus.SelectedValue = dRowView1["brandId"].ToString();
                    DropDownList ddlStatus2 = (DropDownList)e.Row.FindControl("categoryDrop");
                    ddlStatus2.SelectedValue = dRowView1["categoryID"].ToString();
                    //Label1.Text = ddlStatus.SelectedValue;

                }
            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:37:12.537

非常感谢Abide Masaraure。你帮了我很多。我删除了 grideview_rowediting 和 braddrop_selectedIndexChange 事件并在我的 GridView1_RowDataBound 事件中添加了两行。

```
 SqlDataSource sq = (SqlDataSource)e.Row.FindControl("SqlDataSource3");
 sq.SelectParameters["idfrombrands"].DefaultValue = dRowView1["brandId"].ToString(); 
```

现在我的活动是这样的：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //check if is in edit mode
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
            DataRowView dRowView1 = (DataRowView)e.Row.DataItem;
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                if ((e.Row.RowState & DataControlRowState.Edit) > 0)
                {
                    DropDownList ddlStatus = (DropDownList)e.Row.FindControl("brandDrop");
                    ddlStatus.SelectedValue = dRowView1["brandId"].ToString();
                    DropDownList ddlStatus2 = (DropDownList)e.Row.FindControl("categoryDrop");
                    ddlStatus2.SelectedValue = dRowView1["categoryID"].ToString();

                    SqlDataSource sq = (SqlDataSource)e.Row.FindControl("SqlDataSource3");
                    sq.SelectParameters["idfrombrands"].DefaultValue = dRowView1["brandId"].ToString();
                }
            }

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T13:24:08.303

To use the above code i gave you in a row editing event you have to modify it like so.Then those objects won't be null.

```
 protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
    GridView testgrid = (GridView)(sender);
    testgrid.EditIndex = e.NewEditIndex;
    testgrid.DataBind();
    DropDownList dropBand = (DropDownList)testgrid.Rows[e.NewEditIndex].FindControl("ddlProducts");

    //
} 
```

Something is definitely happening in your page cycle and is keeping on biting you.I suggest zip an mdf of your database and the offending aspx page and let me tackle it from here if you don't get it to work.Never give up.

![enter image description here](../Images/94376772c158e8356d8e2a70192caf9b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:29:43.080

尤里卡!!!。你欠我一杯咖啡。我复制了你的问题，并在两个小时后意识到你需要真正挂钩到你的索引选择的更改事件。诀窍是使用命名容器属性来定位你的下拉菜单，他们认为非常隐藏，但是 sender 参数使我们能够在 dropband 下拉触发时暴露它们。一切都像魅力一样运作。

在您选择的更改事件中使用此代码片段。

```
protected void dropBand_SelectedIndexChanged(object sender, System.EventArgs e)
{

DropDownList dropBand = (DropDownList)sender;

SqlDataSource dsc = (SqlDataSource)dropBand.NamingContainer.FindControl("SqlDataSource3");
DropDownList categoryDrop = (DropDownList)dropBand.NamingContainer.FindControl("categoryDrop");
dsc.SelectParameters("BrandID").DefaultValue = dropBand.SelectedValue;
categoryDrop.DataBind();
} 
```

如果您碰巧继续遇到问题，这次我可以向您发送演示的 zip 文件。祝您编码愉快！！！。 ![调试](../Images/9bbe8ec3e148e40b1b362ab2563cda46.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T13:33:04.253

我需要查看您在选择的索引更改事件中使用的代码。

以下级联下拉技术将消除您在尝试连接父级及其子级时所遇到的所有痛苦......我在所有项目的 Ajax 控制工具包中都使用了这个奇妙的功能。您可以使用任何您可以使用的数据检索方法想要只要它返回一个数组。我在这个例子中使用 linq 进行数据检索。假设我有名为 Brand and Model 和 classes 的表：Brand and Model and collections: Brands and Models

**在“YourWebServicePath.asmx”**（Web 服务文件）中

```
 <WebMethod()> _
    Public Function GetBrands(knownCategoryValues As String, category As String) As  CascadingDropDownNameValue()

        Dim result = From b As Bands In Brand.Brands Select New CascadingDropDownNameValue(b.BrandDesc, b.BrandID.ToString())
        Return result.ToArray()

    End Function

<WebMethod()> _
Public Function GetModels(knownCategoryValues As String, category As String) As CascadingDropDownNameValue()
    Dim brandID As Guid
    Dim brandValues As StringDictionary = AjaxControlToolkit.CascadingDropDown._
   ParseKnownCategoryValuesString(knownCategoryValues)
     brandID = New Guid(brandValues("Brand"))
    Dim result = From m As Models In Model.GetModels() Where m.brandID = brandID       Select New CascadingDropDownNameValue(m.ModelDesc, 
 _ m.ModelID.ToString())
    Return result.ToArray()
   End Function 
```

**标记**

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>

    <EditItemTemplate>

                <asp:DropDownList  ID="dropBrand" runat="server" AutoPostBack="true" >
                </asp:DropDownList>

                    <cc1:CascadingDropDown ID="BrandCascadingDropDown"
                                           runat="server"
                                           Category="Brand"
                                           TargetControlID="dropBrand"
                                           PromptText="-Select Brand-"
                                           LoadingText="Loading Brands.."
                                           ServicePath="YourWebServicePath.asmx"

                                           ServiceMethod="GetBrands">
                   </cc1:CascadingDropDown>

</EditItemTemplate>

<EditItemTemplate>
                <asp:DropDownList  ID="dropModel" runat="server" AutoPostBack="true" >
                </asp:DropDownList>

           <cc1:CascadingDropDown ID="ModelCascadingDropDown"
                                           runat="server"
                                           Category="Model"
                                           TargetControlID="dropModel"
                                           ParentControlID="dropBrand"
                                           PromptText="-Select Model-"
                                           LoadingText="Loading Models.."

                                           ServicePath="YourWebServicePath.asmx"
                                           ServiceMethod="GetModels" >
                    </cc1:CascadingDropDown> 
```

这就是您所需要的。无需连接事件。瞧！让工具包发挥作用。

# svn - 在 Subversion 等版本控制中存储图像的最佳实践

> ID：14138399
> 
> 赞同：2
> 
> 时间：2013-01-03T11:53:05.807
> 
> 标签：svn, version-control, backup, storage

我想将图像文件存储在 SVN 存储库中。我已经读到 SVN 将尝试将基于增量的更改存储到存储库中，而不仅仅是一个简单的副本。但是，另一种方法是将图像更改为 base64 并将其存储为文本版本。考虑到创建 base64 图像的成本，这会更实用还是更糟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:29:41.980

Git 不使用 deltas 来存储差异，并且对于图像文件，这无论如何都是不可能的。这意味着，如果跟踪的图像发生变化，它会在存储库的大小中增加其自身大小的 100%，并且由于图像已经被压缩，它们无法使用 git 的打包进行压缩。

问题是，图像有多大以及它们多久更改一次，您可以通过这些来估计存储库的增长速度。然后，您可以参考针对您的用例的存储库大小建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T13:13:44.040

Git（也包括 Subversion）使用 deltas 将文件存储在存储库中。在 Git 和 Subversion 中，它们都是可以很好地处理二进制文件的*二进制增量。*他们还找到匹配的字节运行，并且不依赖任何分隔符，例如存在的换行符。

虽然 subversion 对文件的先前版本进行 delta 化，但 Git 最初存储全文，并在`gc`操作期间选择一些可能的候选者并选择最相似的文件来进行 delta 处理。这意味着当更改部分或全部还原时，它可以（有时）利用单独的类似文件或旧版本。Git 将 deflate 压缩应用于全文和增量（Subversion 没有）。

没有其他通用的多版本文件压缩存储方法。当您需要保留旧版本的文件时，Git 是最佳选择或几乎是最佳选择。与专用备份系统相比，唯一的缺点是 Git 无法删除旧版本。

大多数图像都是压缩​​的，这通常意味着当存在差异时，文件的所有其余部分也会有所不同，因此它们不会从增量压缩中获得太多收益，并且被压缩不会从应用的额外压缩中获得太多收益吉特。然而，Git 有一种机制来提供[“干净”和“涂抹”过滤器](http://git-scm.com/book/en/Customizing-Git-Git-Attributes#Keyword-Expansion). “干净”过滤器在将文件存储到存储库之前应用，“涂抹”过滤器在检出时应用。如果是 PNG 文件，您可以使用它们来重写文件而不进行压缩。如果它们实际上包含在不同版本中相同的大部分，则增量压缩将利用它们，并且压缩将在之后由 git 应用（使用相同的算法），因此您不会丢失任何东西。在实践中，我怀疑只有当你有很多图像并且它们的大部分实际上是相同的时才值得麻烦。也适用于其他压缩格式，如 OpenOffice 文档。

# c# - 需要帮助以获取访问令牌

> ID：14138400
> 
> 赞同：2
> 
> 时间：2013-01-03T11:53:06.890
> 
> 标签：c#, facebook, c#-4.0

在这里，我使用 facebook 生成的用户 ID 代替 appid 。我在这里正确吗？因为我想在 Windows 窗体中设计的应用程序的用户名和密码的帮助下获取访问令牌。我正在使用下面的代码来获取它。请给我任何更好的解决方案来获取访问令牌。

```
 string appId = userid.ToString(); 
        string[] extendedPermissions = new[] { "publish_stream", "offline_access" }; 
        var oauth = new FacebookOAuthClient { ClientId = appId };
        var parameters = new Dictionary<string, object> { 
        { "response_type", "token" },  { "display", "popup" } };
        if (extendedPermissions != null && extendedPermissions.Length > 0) 
        { 
            var scope = new StringBuilder(); 
            scope.Append(string.Join(",", extendedPermissions));
            parameters["scope"] = scope.ToString(); 
        }
        var loginUrl = oauth.GetLoginUrl(parameters);
        wbTestWindow.Navigate(loginUrl);

        // this webBrowser's related navigated function
        private void wbTestWindow_Navigated(object sender, WebBrowserNavigatedEventArgs e)
        {
        FacebookOAuthResult result; 
        if (FacebookOAuthResult.TryParse(e.Url, out result)) 
        { 
            if (result.IsSuccess) 
            { 
                var accesstoken = result.AccessToken;
            } 
            else
            { 
                var errorDescription = result.ErrorDescription; 
                var errorReason = result.ErrorReason; 
            }
        } 
    } 
```

# java - 将普通语言持续时间转换为 Joda Period 或 ISO 8601

> ID：14138402
> 
> 赞同：2
> 
> 时间：2013-01-03T11:53:10.747
> 
> 标签：java, jodatime

我有一个看起来像这样的字符串：“n YEARS n MONTHS n WEEKS n DAYS”（请注意，常量可能是复数形式，也可能不是复数形式）

我需要将其转换为 Joda Period 对象或 ISO 8601 格式的字符串（又可以转换为 Period 对象）。

有没有人有任何代码，或者他们可以将我指向一个图书馆来做到这一点？

**更新**：如果有人需要这样做，这里是工作代码。不幸的是，我不得不动态构建 PeriodFormatterBuilder，因为这些字段是可选的。有点难看，但它的工作原理。

**Update2**：修复了评论中指出的错误。

```
String text = expr1a.getText();
System.out.println(text);

PeriodFormatterBuilder pfb = new PeriodFormatterBuilder().printZeroAlways();

int yearIndex = text.indexOf("YEAR");
int monthIndex = text.indexOf("MONTH");
int weekIndex = text.indexOf("WEEK");
int dayIndex = text.indexOf("DAY");

if (yearIndex > -1) {
  pfb = pfb.appendYears().appendSuffix(" YEAR"," YEARS");
}

if (monthIndex > -1) {
  if (yearIndex > -1) {
    pfb = pfb.appendPrefix(" ").appendMonths().appendSuffix(" MONTH", " MONTHS");
  } else {
    pfb = pfb.appendMonths().appendSuffix(" MONTH", " MONTHS");
  }
} 

if (weekIndex > -1) {
  if (yearIndex > -1 || monthIndex > -1) {
    pfb = pfb.appendPrefix(" ").appendWeeks().appendSuffix(" WEEK", " WEEKS");
  } else {
    pfb = pfb.appendWeeks().appendSuffix(" WEEK", " WEEKS");
  }
}

if (dayIndex > -1) {
  if (yearIndex > -1 || monthIndex > -1 || weekIndex > -1) {
     pfb = pfb.appendPrefix(" ").appendDays().appendSuffix(" DAY"," DAYS");
  } else {
    pfb = pfb.appendDays().appendSuffix(" DAY"," DAYS");
  }
}

PeriodFormatter pf = pfb.toFormatter();

Period period = Period.parse(text, pf);
return period; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:14:50.250

您可以使用[joda](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatterBuilder.html) time API 的 PeriodFormatterBuilder 来构造一个实例，它会解析您的格式。还有对[复数](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/PeriodFormatterBuilder.html#appendSuffix%28java.lang.String,%20java.lang.String%29)常量的处理。

# qt - Qt：如何调整表格中的图像大小？

> ID：14138407
> 
> 赞同：0
> 
> 时间：2013-01-03T11:53:17.457
> 
> 标签：qt, resize, qtablewidget

此代码正确显示图像，并在调整窗口大小时调整其大小：

```
QLabel *imageLabel;
QTabWidget *imageTabWidget;
// new...
imageTabWidget->addTab(imageLabel, "Image"); 
```

我希望将图像放在表格中（仍在上一个选项卡中）的相同行为。但是我现在只能得到一个固定大小的图像：

```
QTableWidget *innerTable = new QTableWidget;
innerTable->setRowCount(1);
innerTable->setColumnCount(1);
innerTable->setCellWidget(0, 0, imageLabel);
innerTable->resizeColumnsToContents();
innerTable->resizeRowsToContents();
imageTabWidget->addTab(innerTable, "Image"); 
```

是否有可能有一个可调整大小的表格？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:57:14.767

您需要使用布局来重新调整您想要的大小，请参阅：

[http://doc.qt.digia.com/qt/layout.html](http://doc.qt.digia.com/qt/layout.html)

使用设计器可以更轻松地创建布局。（在设计器中创建一个小部件，然后在代码中创建它的一个实例，然后添加到选项卡小部件）。

# ruby-on-rails - CanCan accessibly_by 在规范和控制器中返回不同的响应

> ID：14138408
> 
> 赞同：0
> 
> 时间：2013-01-03T11:53:19.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, cancan, rolify

我正在尝试测试`Farm`模型的用户身份验证，在这种情况下，该`:user`角色在登录时具有对所有场的**读取**权限（因为来宾用户也就是匿名的）。

```
# /models/ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    # Create guest user aka. anonymous (not logged in) when user is nil.
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    else # guest user aka. anonymous
      can :read, :all
      # logged in user
      if user.has_role? :user
        can :create, Farm
        can :manage, Farm, :user_id => user.id
      end
    end

  end
end 
```

...

```
# /controllers/api/v1/farms_controller.rb
class Api::V1::FarmsController < ActionController::Base

    load_and_authorize_resource
    rescue_from CanCan::AccessDenied do |exception|
        redirect_to farms_path, alert: exception.message
    end
    respond_to :json

    def index
        # Next line might be redundant refering to the CanCan wiki. See below..
        @farms = Farm.accessible_by(current_ability, :read)
        respond_with(@farms)
    end
end 
```

...

```
# /spec/api/v1/farm_spec.rb
require "spec_helper"

describe "/api/v1/farms" do
    let(:user) { create(:user) } # lets call this user1 in the discussion
    let(:token) { user.authentication_token }

    before do
        user.add_role :user
        create(:farm, user: user, name: "Testfarm")
        create(:farm, name: "Access denied")
        @ability = Ability.new(user)
    end

    context "farms viewable by this logged-in user" do
        let(:url) { "/api/v1/farms" }
        it "json" do
            get "#{url}.json"

            farms_json = Farm.accessible_by(@ability, :read).to_json

            assert last_response.ok?
            last_response.body.should eql(farms_json)
            last_response.status.should eql(200)

            farms = JSON.parse(last_response.body)

            farms.any? do |farm|
                farm["name"] == "Testfarm"
            end.should be_true

            farms.any? do |farm|
                farm["name"] == "Access denied"
            end.should be_true

        end
    end
end 
```

# 问题

当我检查时，`farms_json`我可以看到**它只**包含`Testfarm`. 当我检查时，`last_response`我可以看到它**同时**包含`Testfarm` **和** `Access denied`。这很奇怪，因为我`accessible_by`在规范和`index`操作中都使用了相同的方法。我使用的设置在名为[Fetching Records](https://github.com/ryanb/cancan/wiki/Fetching-Records)的 CanCan gem 的 wiki 中进行了描述。

# 无用的解决方法

当我将用户添加`user`到农场`Access denied`时，例如...

```
create(:farm, user: user, name: "Access denied") 
```

...然后测试成功。

# 问题

1.  为什么任何用户（包括来宾用户）都可以读取“拒绝访问”场，但它**没有返回？**
2.  是否`get "#{url}.json"`真的考虑了用户的状态？这一切都是由`load_and_authorize_resource`in 完成的`FarmsController`吗？
3.  [wiki 提到](https://github.com/ryanb/cancan/wiki/Fetching-Records)可以`@farms = Farm.accessible_by(current_ability, :read)`省略，因为“这是由索引操作自动完成的`load_resource`”。这适用于我的情况吗？

# 实验

我创建了另一个用户“user2”和另一个农场“我的小农场”。我把它们联系起来了。这样，示例中的数据库总共包含三个农场：

*   与 user1 关联的场“Testfarm”
*   场“拒绝访问”与无用户关联
*   与 user2 关联的农场“我的小农场”。

当我跑步时，`Farm.accessible_by(Ability.new(user1), :read)`我仍然只收到“Testfarm”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T17:33:45.997

我的问题的答案由多个部分组成。我希望这可以向处理类似配置的其他所有人阐明设置。

# 1.能力优先

首先请注意，[技能规则的顺序确实很重要，如技能优先级中所述](https://github.com/ryanb/cancan/wiki/Ability-Precedence)。在意识到这个事实后，我想出了一套更新的能力规则。

```
# /models/ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)
    # Create guest user aka. anonymous (not logged-in) when user is nil.
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    else
      # logged in user
      if user.has_role? :user
        can :manage, Farm, :user_id => user.id
        can :create, Farm
      end
       # guest user aka. anonymous
      can :read, :all
    end
  end
end 
```

# 2\. 农场控制器

在索引操作中保持简单。`load_and_authorize_resource`是你的朋友。

```
# /controllers/api/v1/farms_controller.rb
class Api::V1::FarmsController < ActionController::Base

    load_and_authorize_resource
    rescue_from CanCan::AccessDenied do |exception|
        redirect_to farms_path, alert: exception.message
    end
    respond_to :json

    def index
        respond_with(@farms)
    end
end 
```

# 3\. 使用认证令牌获取请求

当您从农场控制器请求数据时，不要忘记传递令牌。

```
# # /spec/api/v1/farm_spec.rb
get "#{url}.json", auth_token: :token 
```

令牌必须按如下方式添加到 User 模型中。

```
# app/models/user.rb
class User < ActiveRecord::Base
    before_save :ensure_authentication_token 
```

并且方法的名称可以在 Devise 的初始化器中配置。

```
# config/initializers/devise.rb
config.token_authentication_key = :auth_token 
```

# c++ - 使用 C++ 模板的程序编译过程

> ID：14138409
> 
> 赞同：0
> 
> 时间：2013-01-03T11:53:22.300
> 
> 标签：c++, templates

假设以下代码是为相同目的编写的。程序的其余代码是相同的。
代码1

```
#include <vector>
using namespace std;
vector<int> vector1;
vector<int> vector2;
vector<int> vector3;
vector<int> vector4; 
```

代码2

```
 #include <vector>
using namespace std;
vector<int> vector1;
vector<short> vector2;
vector<char> vector3;
vector<bool> vector4; 
```

现在哪个更好（就可执行文件大小而言）？（提示：考虑可执行文件）

我比较了 g++ -S 给出的汇编结果。
令人惊讶的是，第二个程序的行数是 1778 ，第一个是 630。这意味着第一个更好。
为了解释这种行为，我为“如何编译基于模板的程序”寻找了一个很好的资源，但我找不到。

编译器如何将使用模板的程序编译成程序集？你有好的资源吗？（这不是作业，而是在我的工作场所给出的自学问题。你是否觉得不给答案至少将我引导到一个好的资源）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T11:59:52.427

您发现的行为一点也不奇怪。编译器使用模板生成尽可能多的类。在您的第一个示例中，它只需要生成一个（`vector<int>`），而在您的第二个示例中，它需要生成四个。当然，这会生成更多代码。

至于哪个更好的问题：当然，更好地服务于它的目的。但只有你才能知道这一点。

# c++ - 我可以返回一个非参数变量吗？

> ID：14138410
> 
> 赞同：-1
> 
> 时间：2013-01-03T11:53:21.873
> 
> 标签：c++

是否可以从函数返回变量而不将其作为参数传递？例如：

```
int example(int x, int y) {
    int z = x + y;
    return z
} 
```

另外，当我回到我的主要功能时，我将如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:54:42.077

这对于像 C++ 这样的语言来说是非常基础的，可以考虑通过选择一本好书来帮助自己：
[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

> **是否可以从函数返回变量而不将其作为参数传递？**

这是完全有效的。为什么你认为不是？
返回一个局部变量以按值运行是合法的。将变量的副本返回给调用者。
您不应该做的是返回局部变量的地址，因为局部变量只存在于定义它的范围内。

> **应该避免什么？**

```
int* example(int x, int y) 
{
    int z = x + y;
    return &z;
} 
```

> **当我回到我的主要功能时，我将如何使用它？**

```
int main()
{
    std::cout<<example(4,5);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:55:06.013

这是合法的。

变量 z 的内容**被复制**。

```
int iElsewhere = 0;
iElsewhere = example(1, 2); // now iElsewhere == 3 
```

正如 Kamil Klimek 的评论所述，您应该开始阅读 C++ 小教程或介绍，因为这个问题*确实是非常基础*的C/C++ 基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:03:44.480

Your example is perfectly fine. You're returning a discrete value which is allowed. Under the hood what is happening is you're able to return a value in one of the chip's registers from a function. Just for clarity and not to be patronising a register is typically a 32/64 bit value depending on the OS.

When dealing with core types like int, bools, floats these are stored in registers so you can return this without any worries.

The other type of info you can return is a pointer of an address to some memory. When you do that the return value is again a 32/64bit pointer that is just the address for the data.

What you do need to be careful when doing is ensuring any allocated memory done in a function is done via a malloc or new (when using C or C++ respectively) and not just a declared structure in the method.

E.g. something like this is bad and will cause issues as the stack gets overwritten (unless that's your intention :) ).

void* myfunction() { MYSTRUCT muylocalstructure; void* mypointer = &mylocalstructure; return mypointer; }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T11:54:55.967

您可以返回一个非参数变量。下面给出的代码很好。

```
int example(int x, int y) {
    int z = x + y;
    return z;
} 
```

因为在这种情况下，您返回的值是原始类型，例如 int。但是有一些复杂的情况，当你返回一个变量的地址时，它已经用天才的方式[解释了。](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope/6445794#6445794)

现在在 main 中使用该变量

```
int main(){
  int ret = example(4,5);

  //do whatever with ret..
} 
```

# iphone - 在 iPhone 中重复和重叠 UITableView 单元格

> ID：14138430
> 
> 赞同：0
> 
> 时间：2013-01-03T11:54:42.133
> 
> 标签：iphone, objective-c, cocoa-touch, ios6

UITableView 单元格在滚动时重复并相互重叠。我该如何解决这个问题

这是我的代码

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 11;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIButton *buyBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImageView *img;
    UILabel *lbl;
    UIImageView *backImage;
    UILabel *textLabel;
    UILabel *detailTextLabel;

    NSInteger val = [indexPath row] * 3;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 316, 62)];
        [buyBtn setFrame:CGRectMake(257, 35, 57, 24)];
        img = [[UIImageView alloc] initWithFrame:CGRectMake(257, 10, 57, 24)];

        lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 57, 24)];
        textLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 4, 230, 25)];
        detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 25, 230, 30)];

        backImage.image = [UIImage imageNamed:@"shop-bg.png"];
        [buyBtn setImage:[UIImage imageNamed:@"buy_button"] forState:UIControlStateNormal];
        [img setImage:[UIImage imageNamed:@"price_button.png"]];
    }
    else
    {
        backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 316, 62)];
        [buyBtn setFrame:CGRectMake(257, 35, 57, 24)];
        img = [[UIImageView alloc] initWithFrame:CGRectMake(257, 10, 57, 24)];

        lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 57, 24)];
        textLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 4, 230, 25)];
        detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 25, 230, 30)];

        backImage.image = [UIImage imageNamed:@"shop-bg.png"];
        [buyBtn setImage:[UIImage imageNamed:@"buy_button"] forState:UIControlStateNormal];
        [img setImage:[UIImage imageNamed:@"price_button.png"]];
    }

    lbl.center = img.center;
    lbl.textAlignment =  UITextAlignmentCenter;
    lbl.text = [self.original_List objectAtIndex:val+2];
    lbl.backgroundColor = [UIColor clearColor];

    textLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:14];
    textLabel.backgroundColor = [UIColor clearColor];
    textLabel.text = [self.original_List objectAtIndex:val];

    detailTextLabel.text = [self.original_List objectAtIndex:val+1];
    detailTextLabel.backgroundColor = [UIColor clearColor];
    detailTextLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:10];
    textLabel.textColor = [UIColor blackColor];
    detailTextLabel.textColor = [UIColor whiteColor];
    detailTextLabel.numberOfLines = 2;

    [buyBtn setTag:[indexPath row]];
    [buyBtn addTarget:self action:@selector(buyBtnPressed:) forControlEvents:UIControlEventTouchDown];

    static NSString *myIdentifier = @"myIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
    NSLog(@"%d" , [[cell subviews] count]);
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:myIdentifier];
    }
             cell.accessoryType = UITableViewCellAccessoryNone;
        [cell setSelectionStyle:UITableViewCellEditingStyleNone];
        cell.backgroundColor = [UIColor clearColor];

    [cell.contentView addSubview:backImage];
    [cell.contentView addSubview:detailTextLabel];
    [cell.contentView addSubview:textLabel];
    [cell.contentView addSubview:buyBtn];
    [cell.contentView addSubview:img];
    [cell.contentView addSubview:lbl];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:56:39.680

试试这个代码： -

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIButton *buyBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImageView *img;
    UILabel *lbl;
    UIImageView *backImage;
    UILabel *textLabel;
    UILabel *detailTextLabel;

    NSInteger val = [indexPath row] * 3;

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 316, 62)];
        [buyBtn setFrame:CGRectMake(257, 35, 57, 24)];
        img = [[UIImageView alloc] initWithFrame:CGRectMake(257, 10, 57, 24)];

        lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 57, 24)];
        textLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 4, 230, 25)];
        detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 25, 230, 30)];

        backImage.image = [UIImage imageNamed:@"shop-bg.png"];
        [buyBtn setImage:[UIImage imageNamed:@"buy_button"] forState:UIControlStateNormal];
        [img setImage:[UIImage imageNamed:@"price_button.png"]];
    }
    else
    {
        backImage =  [[UIImageView alloc] initWithFrame:CGRectMake(2, 4, 316, 62)];
        [buyBtn setFrame:CGRectMake(257, 35, 57, 24)];
        img = [[UIImageView alloc] initWithFrame:CGRectMake(257, 10, 57, 24)];

        lbl = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 57, 24)];
        textLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 4, 230, 25)];
        detailTextLabel = [[UILabel alloc] initWithFrame:CGRectMake(4, 25, 230, 30)];

        backImage.image = [UIImage imageNamed:@"shop-bg.png"];
        [buyBtn setImage:[UIImage imageNamed:@"buy_button"] forState:UIControlStateNormal];
        [img setImage:[UIImage imageNamed:@"price_button.png"]];
    }

    lbl.center = img.center;
    lbl.textAlignment =  UITextAlignmentCenter;
    lbl.text = [self.original_List objectAtIndex:val+2];
    lbl.backgroundColor = [UIColor clearColor];

    textLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:14];
    textLabel.backgroundColor = [UIColor clearColor];
    textLabel.text = [self.original_List objectAtIndex:val];

    detailTextLabel.text = [self.original_List objectAtIndex:val+1];
    detailTextLabel.backgroundColor = [UIColor clearColor];
    detailTextLabel.font = [UIFont fontWithName:@"Arial Rounded MT Bold" size:10];
    textLabel.textColor = [UIColor blackColor];
    detailTextLabel.textColor = [UIColor whiteColor];
    detailTextLabel.numberOfLines = 2;

    [buyBtn setTag:[indexPath row]];
    [buyBtn addTarget:self action:@selector(buyBtnPressed:) forControlEvents:UIControlEventTouchDown];

    static NSString *myIdentifier = @"myIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
    NSLog(@"%d" , [[cell subviews] count]);
    //if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:myIdentifier];
    }
             cell.accessoryType = UITableViewCellAccessoryNone;
        [cell setSelectionStyle:UITableViewCellEditingStyleNone];
        cell.backgroundColor = [UIColor clearColor];

    [cell.contentView addSubview:backImage];
    [cell.contentView addSubview:detailTextLabel];
    [cell.contentView addSubview:textLabel];
    [cell.contentView addSubview:buyBtn];
    [cell.contentView addSubview:img];
    [cell.contentView addSubview:lbl];
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:58:37.987

您需要检查单元格的高度 `- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;`

它应该大于代码中使用的最大高度可能是 65

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:59:11.773

不要使用reuseIdentifier 并设置为nil。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:40:19.483

这里发生的是你使用

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
```

此代码确保当您在 UITableView 中滚动时，单元格会被重用以节省内存。由于您对所有单元格使用相同的标识符，它只会重用已经具有“backImage”、“detailTextLabel”等的单元格，并在已经存在的视图组件之上添加新的视图组件。

您可以使用与此类似的代码来解决此问题：

```
static NSString *myIdentifier = @"myIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:myIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:myIdentifier];
    // Create backImage, detailTextLabel, etc. here
    ...

    // Give view components tags
    backImage.tag = 1;
    detailTextLabel.tag = 2;
    ...
}

UIImageView* retrievedBackImage = (UIImageView*)[cell.contentView viewWithTag:1];
UILabel* retrievedDetailTextLabel = (UILabel *)[cell.contentView viewWithTag:2];
...
// Initialise values
retrievedBackImage.image = [UIImage imageNamed:@"someImage.png"];
retrievedDetailTextLabel.text = @"something";
... 
```

希望这会有所帮助。

尼古拉斯

# php - URL重写：包括源文件到“index.php”的HTTP请求，实际上并不存在

> ID：14138434
> 
> 赞同：1
> 
> 时间：2013-01-03T11:54:58.303
> 
> 标签：php, apache, .htaccess, url, url-rewriting

我在 URL 上有一个小网站`localhost/site/`。它有一个`.htaccess`文件，一个`index.php`文件和一个用于存储图像的文件夹，称为`img`

**.htaccess 文件**

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.+) index.php?url=$1 [QSA,L] 
```

正如上面的代码，如果 url 不是目录或文件，每个 url`localhost/site`都会重定向到。`index.php`

**index.php 文件**

```
<html>

<body>
    <img src="img/logo.png"/>
</body>

</html> 
```

**问题**

当我转到`localhost/site`or`localhost/site/[any_text]`时，它工作正常，这`index.php`将成功加载文件`img/logo.png`。

但是，如果我进入或进一步进入（实际上不退出，只有一个请求）中的`localhost/site/[any_text]/[any_text]`任何子目录，则不会加载`localhost/site``index.php``img/logo.png`

那为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:05:00.500

This occurs because images that are included without leading slash or another form of locator like a protocol and domain will make the client assume that the path is relative to the currently viewed path. Thus if you are viewing `http://example.com/folder/page.html` the relative image path `img/logo.png` will make the client request `http://example.com/folder/img/logo.png`.

If you instead insert a leading slash you will tell the client that the image is located relative to the root of the site and it will instead result in the client requesting the file `http://example.com/img/logo.png`.

The correct image html code will be:

```
<img src="/site/img/logo.png" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:59:50.717

```
<img src="/img/logo.png"/>
          ^ note the leading slash 
```

# c++ - 将朋友的引用成员初始化为类私有成员

> ID：14138436
> 
> 赞同：0
> 
> 时间：2013-01-03T11:55:04.947
> 
> 标签：c++, reference, friend, c++03

我想在一个对象中初始化一个成员（引用类型）以指向另一个对象（不同类型）的私有成员。我`friend`用来提供对私有成员的访问。（请耐心等待，我会进一步解释为什么我需要这样做。）

下面是我尝试开始使用的代码的最低版本，它显然不起作用。现在很明显，我只是想用这段代码初始化引用`Aries a(t.Leo);`，但因为这是在内部完成的`main()`，所以它不会编译。

我在这里和互联网上浏览了许多帖子（关于 和 的主题`friend`）`reference`，但无法找到解决问题的方法。我怎样才能使这项工作，或者我可以尝试正确绑定引用的其他方法？

```
class Aries;

class Taurus {
friend class Aries;
public:
  void setLeo(int inLeo) {
    Leo = inLeo;
  }

private:
  int Leo;
};

class Aries {
public:
  Aries(const int& inCancer) : Cancer(inCancer) {}

private:
  const int& Cancer;
};

int main() {
  Taurus t;
  Aries a(t.Leo);  // Intention: initialize (bind) the Cancer member with t's Leo.
} 
```

**注意**我知道足够多的 C++ 来理解为什么上述做法被认为是有问题的或不好的。

我正在硬件模拟环境中进行一个研究项目，其中测试台是用 C++ 编写的。该项目的目的是将类（私有）成员显示为波形。这样做的唯一可靠方法是将“波形制作器”类作为`friend`测试台对象的一个​​，然后让它“跟踪”私有成员（通过创建一个`reference`如上所述）。在测试台中提供 getter 方法的另一种选择是不切实际的，因为该项目将与价值 20 年的遗留代码一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:01:37.550

只需更改`Aries`构造函数以获取`Taurus`引用，而不是`int`直接使用私有。像这样：

```
class Aries;

class Taurus {
friend class Aries;
public:
  void setLeo(int inLeo) {
    leo = inLeo;
  }

private:
  int leo;
};

class Aries {
public:
  Aries(const Taurus& inTau) : Cancer(inTau.leo) {}

private:
  const int& Cancer;
};

int main() {
  Taurus t;
  Aries a(t);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:10:49.573

我知道你知道这`friend`是有问题的，但有时是必要的，但在这种情况下，这些课程不必成为朋友。

```
struct AriesBinder {
  AriesBinder(const int& c) : Cancer(c) {}
  const int& Cancer;
};

class Taurus {
public:
  void setLeo(int inLeo) {
    Leo = inLeo;
  }

  AriesBinder bind() const { return AriesBinder(Leo); }

private:
  int Leo;
};

class Aries {
public:
  Aries(const int& inCancer) : Cancer(inCancer) {}
  Aries(AriesBinder b) : Cancer(b.Cancer) {}

private:
  const int& Cancer;
};

int main() {
  Taurus t;
  Aries b(t.bind());  // Intention was made clear
} 
```

如果可以将许多对象如`Taurus`绑定到 ，这将特别有用`Aries`。此外，它解耦了这两个类，因为现在不必相互了解，因此您可以更改`Taurus`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:24:59.110

友谊的目的是允许访问与您的紧密耦合的某些类，通常是类工厂（在构造类时分配成员）或一些特殊的实现类。

因此，在你的情况下，如果白羊座是金牛座的朋友，你会期望两者之间存在强耦合。

您的代码不起作用，因为您是从 main 访问 Taurus.Leo，而不是从 Aries。

建立友谊的目的尤其是不必为这些变量创建公共“吸气剂”。那是因为这些变量是“内部细节”，您不希望广大公众访问，甚至不阅读。

因此，虽然我希望上面的大多数答案都是可能的解决方案并且可以编译和工作，但您必须了解友谊的概念并针对您的特定案例进行设计，看看它是否适合使用。

# iphone - 通过发送 SMS 命令远程打开/关闭 Wifi

> ID：14138440
> 
> 赞同：0
> 
> 时间：2013-01-03T11:55:20.483
> 
> 标签：iphone, ios

我是 IOS 编程的新手。对于 IOS 设备。我正在尝试构建一个应用程序，通过发送短信命令 Wifi 可以远程打开/关闭..请建议我。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:17:18.043

不，在未越狱的手机上，您无法获取任何有关 SMS 消息或电话的数据。它们与您的应用程序完全隔离。

如果您的设备已越狱，那么您可以监控位于手机上的 sqllite 数据库：/var/mobile/Library/SMS/sms.db

# java - 每次我停止点击时，Java点击计数器都会重置

> ID：14138442
> 
> 赞同：1
> 
> 时间：2013-01-03T11:55:36.777
> 
> 标签：java, swing, mouseevent, jbutton, click-counting

我想用 Java 制作一个非常简单的点击计数器。它可以工作，但是每次我停止单击“单击我”按钮时，单击次数都会重置。我尝试使用名为 clicks 的静态变量来解决这个问题。我知道这听起来可能是个愚蠢的问题，但是您实际上如何防止变量自行重置。

这是我写的代码。

```
 package clickcounter;

import java.awt.BorderLayout;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class ClickCounter extends JFrame implements MouseListener{
    private JButton b1 = new JButton("Click me");
    private static int clicks;
    private JLabel info = new JLabel();

    public ClickCounter()
    {
        super("Click counter");
        setSize(250, 150);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        b1.addMouseListener(this);
        BorderLayout bor = new BorderLayout();
        setLayout(bor);
        info.setEnabled(false);
        add(BorderLayout.NORTH, b1);
        add(BorderLayout.CENTER, info);
        setVisible(true);
    }

    public static void main(String[] args) {
        ClickCounter cc = new ClickCounter();
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        clicks = e.getClickCount();
        info.setText("Number of clicks " + clicks);
        info.repaint();
    }

    @Override
    public void mousePressed(MouseEvent e) {
        // ignore
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        //ignore
    }

    @Override
    public void mouseEntered(MouseEvent e) {
        // ignore
    }

    @Override
    public void mouseExited(MouseEvent e) {
       // ignore
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T12:00:52.320

`e.getClickCount()`用于提供有关“点击”的详细信息。它帮助应用程序响应双击、绊倒等点击。因此，当用户停止单击时，它会再次重置。

代替

```
clicks = e.getClickCount(); 
```

和

```
// *Add* the number of clicks that occurred to the click variable
clicks += e.getClickCount(); 
```

而且您的计数器不再重置。

注意：`clicks`在这种情况下不需要制作静态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T12:02:10.870

You should write

```
clicks += e.getClickCount(); 
```

instead of

```
clicks = e.getClickCount(); 
```

and init clicks with

```
private static int clicks = 0; 
```

thats all.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T11:59:30.140

你没有增加`clicks`. 您应该这样做，以计算点击次数。（或总结）

# java - 跨两个数据库访问数据

> ID：14138444
> 
> 赞同：1
> 
> 时间：2013-01-03T11:55:38.177
> 
> 标签：java, spring, mongodb

我有大量数据（超过 1TB）。这将同时被 1000 多人访问。将其存储在一个数据库中会使应用程序非常慢。所以我打算将它存储在不同的数据库中。mongo DB是否支持不同数据库之间的路由？或者这应该在我们的应用程序中？我正在使用 Java 开发并使用 Spring 框架与 mongo 进行交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T15:45:19.343

鉴于将数据拆分为多个数据库的原因是为了提高性能，我建议将单个数据库[分片](http://docs.mongodb.org/manual/core/sharding/)而不是拆分多个数据库。如果位置足够精细，并且您希望跨服务器拆分负载，则可以使用[标签感知分片](http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding)将特定位置或位置范围固定到特定服务器。这里有一个很好的[教程](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)。

在遵循这条路线之前，我建议使用您计划用于系统的硬件上的数据库对您的应用程序执行负载测试。值得确认您确实需要分片/拆分数据，如果需要，您可能需要的服务器数量。如果您的数据库将被读取而不是写入密集型，那么非分片数据库可能会处理您的负载，从而使您的[工作集](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage#CheckingServerMemoryUsage-WorkingSetSize)适合内存。

# jquery - 同时运行两个动作，fadein() & animate()

> ID：14138446
> 
> 赞同：1
> 
> 时间：2013-01-03T11:55:41.160
> 
> 标签：jquery, jquery-animate, fadein

> **可能重复：**
> [你如何同时淡入和动画？](https://stackoverflow.com/questions/1652576/how-do-you-fadein-and-animate-at-the-same-time)

我想使用jquery同时淡入和动画一个div。这是我的代码：

```
$('#div').fadeIn('slow').animate({'left' : '5%'}, duration); 
```

问题是，我先褪色，然后 div 开始自己动画；

我也试过这个，但我没有结果：

```
$('#div').fadeIn('slow');
$('#div').animate({'left' : '5%'}, duration); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:07:14.990

你可以试试这个：http: [//jsfiddle.net/dXCPF/1/](http://jsfiddle.net/dXCPF/1/)

```
$('#div').css({'display':'block', 'opacity':'0'})
         .animate({'opacity':'1','left':'5%'}, 1500); 
```

首先我做了，`display:none;`然后用 jQuery 应用 css 并对其进行动画处理。似乎两种效果同时出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T11:58:28.737

为什么不简单地`animate()`用于两者：

```
$('#div').animate({
    'left' : '5%',
    'opacity' : 1
}, 600); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:03:17.457

Try this:

```
$('#div').animate({ 
    opacity: 1
}, { duration: slow, queue: false });
$('#div').animate({
   left: '5%'
}, { duration: duration, queue: false }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T13:59:15.053

你可以简单地使用

```
$('#div').fadeIn(fast).animate({'left' : '5%'}, fast); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T12:01:29.767

animate 似乎不适用于`display: none`元素（就像`fadeIn`那样）。所以，你可能需要在使用之前把这个`animate`：

```
$('#div').css('display', 'block');
//then use animate
$('#div').animate({'left' : '5%'}, duration); 
```

# iphone - 如何在 UILabel 中按顺序显示字符串中的字符？

> ID：14138459
> 
> 赞同：1
> 
> 时间：2013-01-03T11:56:15.197
> 
> 标签：iphone, ios, uilabel

在 UILabel 中，您可以显示一个字符串以便逐个字符地填充吗？例如，如果标签文本是“IPHONE”，我想显示“I”，然后是“IP”，然后是“IPH”，一直到“IPHONE”。

我怎么能以这种方式让标签显示文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T12:05:23.563

所以你想显示一个字符串的第一个字母，然后在一段时间后显示它的第二个字母，等等。解决方案：使用一个定期调用方法的计时器；该方法将适当地设置文本：

```
NSString *theTextToDisplay = @"Hello world!";

[NSTimer scheduledTimerWithTimeInterval:0.33
                                 target:self
                               selector:@selector(timerShoot:)
                               userInfo:nil
                                repeats:YES];

- (void)timerShoot:(NSTimer *)tmr
{
    static int pos = 1;
    theUILabel.text = [theTextToDisplay substringToIndex:pos];
    if (++pos > theTextToDisplay.length) {
        [tmr invalidate];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:03:28.170

这只是一个例子，只是一个用动画逐一显示文本的逻辑。

首先添加`UILable`带有波纹管的框架，然后设置如下文本...

```
 yourLable.frame = CGRectMake(0, 112, 0, yourLable.frame.size.height); 
 yourLable.text = @"IPHONE"; 
```

之后，当您想显示`UILable`

```
-(IBAction)btnLableShow_Clicked:(id)sender
{

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.8];

    yourLable.frame = CGRectMake(0, 112, 220, yourLable.frame.size.height);  // set width with your requirement
    [UIView commitAnimations];
} 
```

# asp-classic - 下拉列表 - 显示要选择的图像选项

> ID：14138463
> 
> 赞同：0
> 
> 时间：2013-01-03T11:56:25.547
> 
> 标签：asp-classic, html-select

如果您能提供帮助，我将不胜感激。

我想要一个下拉列表，可以查看图像列表而不是文本内容。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:57:27.673

这是一个糟糕的问题，因为您没有提供太多细节，但是如果您使用的是[classic-asp](/questions/tagged/classic-asp "显示标记为“classic-asp”的问题")，您可以轻松地包含[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")（客户端 javascript 库）并使用许多提供此功能的插件，例如，一个更好的（当然只有我认为）：[http](http://designwithpc.com/Plugins/ddSlick#demo) ://designwithpc.com/Plugins/ddSlick#demo - 注意示例 - 非常易于使用，例如：

![在此处输入图像描述](../Images/0ff9b93882740ebcde4685d972f34692.png)

# java - 正则表达式获取不在 $( ) 内的部分字符串

> ID：14138467
> 
> 赞同：-2
> 
> 时间：2013-01-03T11:56:29.667
> 
> 标签：java, regex

你能帮我为下面的字符串写一个正则表达式吗？

`Hi $(abc) frnd $(xyz)`

在此文本中，我想匹配所有未被 . 包围的单词`$( )`。所以，在上面的字符串中，我想匹配`Hi`并且`frnd`

我试过了，`\$((.[^)]*.))`但它匹配 $(abc) 和 $(xyz)。但我想匹配符号之外的那些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:21:13.767

你可以在 Java 中使用否定的lookbehind吗？这似乎在 C# 中有效（但你永远不能用正则表达式告诉 100%！）

```
(?<!\$\([A-Za-z]*)[A-Za-z]+(?!\)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:33:28.913

您可以将字符串拆分为不包含 的部分，也`$(...)`可以使用`replaceAll`函数删除`$(...)`.

```
// Raw regex: \$\([^)]+\)

str.split("\\$\\([^)]+\\)");

str.replaceAll("\\$\\([^)]+\\)", "") 
```

然后你可以提取所有你想要的文本。正则表达式假定`$(...)`不允许`)`指定中间的文本。在这种情况下`$(abc$(crap)_outside`，仅`_outside`会在更换后留下。

可以编写一个正则表达式来挑选单词并忽略`$(...)`, 通过使用 last match boundary `\G`，但这样做更简单：`$(...)`在匹配文本之前删除部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:32:11.793

试试下面的代码它将打印所需的输出。

```
public static void main(String[] args)
{
    String text = "Hi $(abc) frnd $(xyz)";
    String[] textArr = text.split("\\$\\([^)]*\\)");

    for (String word : textArr)
    {
        System.out.println(word.trim());

    }

} 
```

# c# - 使用 studio 2012 构建后的任务序列化问题

> ID：14138476
> 
> 赞同：3
> 
> 时间：2013-01-03T11:57:20.180
> 
> 标签：c#, wcf

安装 studio 2012 后，构建一个针对 framework 4.0 的应用程序。我收到错误消息：

```
Type 'System.Threading.Tasks.Task' cannot be serialized. 
Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with .... 
```

我已经使用 svcutil 重新生成了服务引用。有没有办法指定所有异步的东西都从引用中排除？

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:02:28.713

据我所知，您不能在 .NET 4.0 上使用基于 WCF 任务的异步模式（可以，但需要安装[Async Targeting Pack for Visual Studio 2012](http://www.microsoft.com/en-us/download/details.aspx?id=29576)），您需要升级到 .NET 4.5 才能使其正常工作。

我怀疑您在 Visual Studo 2010 上使用了某种扩展（如[AsynCTP ）。](http://www.microsoft.com/en-us/download/details.aspx?id=9983)

在这里，您可以看到每个框架版本都支持哪些异步模式：

*   [同步和异步操作**.NET Framework 4**](http://msdn.microsoft.com/en-us/library/ms734701%28v=vs.100%29.aspx)

*   [同步和异步操作**.NET Framework 4.5**](http://msdn.microsoft.com/en-us/library/ms734701%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T19:16:44.777

我不明白为什么，但似乎在某些构建环境中，您需要`/syncOnly`在升级到 Visual Studio 2012 后为您的服务生成接口的 svcutil 命令行添加一个开关。奇怪的是，如果我构建并运行在我的桌面上本地使用 Visual Studio 2012，我将所有异步方法添加到界面中，并且一切运行正常。但是，如果我在我们单独的构建机器上构建并在第三台机器上运行，那么我会遇到您所描述的错误。[当我按照http://www.aspdotnethelp.com/a/d/type-system-threading-tasks-task1system-string-cannot-be-serialized-error-in-](http://www.aspdotnethelp.com/a/d/type-system-threading-tasks-task1system-string-cannot-be-serialized-error-in-wcf-236.aspx)`/syncOnly`中的描述添加到命令行时，错误消失了[wcf-236.aspx](http://www.aspdotnethelp.com/a/d/type-system-threading-tasks-task1system-string-cannot-be-serialized-error-in-wcf-236.aspx)

这会导致不生成异步接口成员。

我还看到包含异步方法会导致不同的错误：

> 标有 IsOneWay=true 的操作不得声明输出参数、引用参数或返回值。

我怀疑原因在于使用 .NET 4.5 工具构建 .NET 4.0 应用程序。由于这些工具正在生成代码而不是编译代码，因此它们所针对的 .NET 版本不会在输出中强制执行。然后，当您在面向 .NET 4.0 的应用程序中使用面向 .NET 4.5 的代码时，某些行为会不同步。

# c - 用互斥锁重新创建 sem_wait()？

> ID：14138483
> 
> 赞同：1
> 
> 时间：2013-01-03T11:57:36.080
> 
> 标签：c, mutex

有**什么办法**可以让我最多同时拥有 10 个线程`mutex`吗？

类似于`sem_wait()`value的东西`10`。

**编辑：**

发现这个：

它是信号量的实现，使用互斥锁和条件变量。

```
typedef struct {
  int value, wakeups;
  Mutex *mutex;
  Cond *cond;
} Semaphore;

// SEMAPHORE

Semaphore *make_semaphore (int value)
{
  Semaphore *semaphore = check_malloc (sizeof(Semaphore));
  semaphore->value = value;
  semaphore->wakeups = 0;
  semaphore->mutex = make_mutex ();
  semaphore->cond = make_cond ();
  return semaphore;
}

void sem_wait (Semaphore *semaphore)
{
  mutex_lock (semaphore->mutex);
  semaphore->value--;

  if (semaphore->value < 0) {
    do {
      cond_wait (semaphore->cond, semaphore->mutex);
    } while (semaphore->wakeups < 1);
    semaphore->wakeups--;
  }
  mutex_unlock (semaphore->mutex);
}

void sem_signal (Semaphore *semaphore)
{
  mutex_lock (semaphore->mutex);
  semaphore->value++;

  if (semaphore->value <= 0) {
    semaphore->wakeups++;
    cond_signal (semaphore->cond);
  }
  mutex_unlock (semaphore->mutex);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:11:27.833

看看是否有帮助

> 来自 Book **Begining Linux 编程**一个采用更广泛值的计数信号量。通常，信号量用于保护一段代码，以便在任何时候只有一个执行线程可以运行它。对于这项工作，需要一个二进制信号量。有时，您希望允许有限数量的线程执行给定的一段代码；为此，您将使用**计数信号量**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:17:11.357

**不**，互斥锁是一个简单的锁，有两种状态：锁定和解锁。创建时，互斥锁被解锁。**互斥锁是互斥锁。只有一个线程可以持有锁。**

`mutex`尽管您可以使用and`if`和 a实现允许十个线程进入一个部分`global variable`。（计数信号量的实现方式）

在这里阅读：[**实现计数信号量**](http://www.csee.wvu.edu/~jdm/classes/cs550/notes/tech/mutex/semimp3.html)
一可用实现：[**C 代码**](http://read.pudn.com/downloads180/sourcecode/unix_linux/837209/hw2.c__.htm)， [**制作您自己的信号量**](http://content.yudu.com/Library/A1tr3x/TheLittleBookofSemap/resources/275.htm)

# image - 与 Google 的 PageSpeed Insights 一样无损压缩图像

> ID：14138487
> 
> 赞同：3
> 
> 时间：2013-01-03T11:57:43.900
> 
> 标签：image, performance, compression

我正在使用 Google 的 PageSpeed Insights 优化我的网页。它建议：

```
Losslessly compressing http://mysite.com/.../image.jpg?... could save 33.6KiB (23% reduction). 
```

但是，当我将此图像上传到 Yahoo! Smush.it 它只能压缩 8KB，而不是 33KB。

谷歌使用什么样的超级压缩器？我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:20:24.213

有这个链接提供了一些关于图像压缩优化的通用信息： [https ://developers.google.com/speed/docs/best-practices/payload?hl=fr#CompressImages](https://developers.google.com/speed/docs/best-practices/payload?hl=fr#CompressImages)

但有趣的是，谷歌已经尝试（到目前为止没有成功）以 WebP 的名义推广自己的图像压缩格式，它应该提供更好的压缩比。 [https://developers.google.com/speed/webp/](https://developers.google.com/speed/webp/)

# javascript - 获取和设置顶部位置

> ID：14138489
> 
> 赞同：1
> 
> 时间：2013-01-03T11:57:52.243
> 
> 标签：javascript, jquery, hammer.js

我正在使用`hammer.js`制作一个基本的触摸友好型移动网站。我隐藏了顶部位置为负的顶部菜单，双击后它将使用 css3 过渡出现。但是我希望它在第二次双击时再次隐藏。

我曾尝试使用`if/else`调用顶部位置然后相应地重新设置它，但我无法让它工作，有人知道我哪里出错了吗？

```
var t = $("#topbar");
var position = t.position();

$sw.on('doubletap', function(event) {
    event.preventDefault();
    if (position.top == '-55px') {
        $('#topbar').css("top", "0");
    }
    else {
        $('#topbar').css("top", "-55px")
    }
}); 
```

网站地址是[http://www.bettondesignwork.co.uk/tim/mobile](http://www.bettondesignwork.co.uk/tim/mobile)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:04:09.467

你可以试试这个：

```
var t = $("#topbar");
var position = t.offset();

$sw.on('doubletap', function(event) {
    event.preventDefault();
    if (position.top == '-55px') {
        $("#topbar").offset({ top: "0"});
    }
    else {
        $('#topbar').offset({ top: "-55px"});
    }
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:05:32.900

问题可能是这条线

```
if (position.top == '-55px') 
```

如果我没记错的话， .top 属性是数字，所以你可以将代码更改为

```
if (position.top == -55) 
```

或者变得更具防御性

```
if (position.top < 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T16:59:38.383

获取一个**HTMLElement的顶部位置**

```
 function getHTMLElementTop(thisNode, Top)
    {
            if (Top == undefined)
            {
                var Top = 0;
            }
            if (thisNode.nodeType == 1)
            {
                Top += thisNode.offsetTop;
                //if (thisNode.parentNode)
                if (thisNode.offsetParent)
                {
                    Top = getHTMLElementTop(thisNode.offsetParent, Top);
                }
            }
            return Top;
    } 
```

可能有帮助

# android - 如何优化我的代码以在画布上绘图

> ID：14138494
> 
> 赞同：1
> 
> 时间：2013-01-03T11:58:04.850
> 
> 标签：android, canvas

在我的 android 应用程序中，我绘制了很多矩形、线条和弧线，这些矩形、线条和弧线经常随着用户操作而改变。

现在我所做的是在 onDraw() 方法中创建我的 Paint 对象，以便它们保持局部变量并且不会导致任何内存问题。

但在代码审查期间，这被指出是一个错误。我被告知这可能会减慢画布上的绘图速度，因为每次调用 onDraw() 都会调用 new()。因此，我被要求将 Paint 对象作为类变量，仅将它们初始化一次，并且仅在 onDraw() 中更改它们的属性，并在屏幕关闭/销毁时进一步使它们无效。

我想问这是正确的做法还是事情已经变得更好了，因为我没有发现我的屏幕上的 UI 很慢，我怀疑这可能是不必要的更改。

请提供建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:06:16.473

我发现`Paint paint = new Paint();`在`onDraw()`处理过程中存在延迟。我现在创建`paint`一个类变量，并`onDraw()`简单地修改已经构建的 Paint 变量的属性。

```
 public void onDraw(Canvas canvas) {
        mPaint.setColor(Color.BLUE);
        ...
        mPaint.setStyle(Style.FILL); 
        ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:08:45.800

是的，您应该使用 Paint 作为类成员。Paint的大小可能很小，我没有检查过，但它只是一个设置容器。

在 Draw 中分配任何对象是一个坏主意，因为它可能会导致 GC 启动并导致非常明显的故障，尤其是在旧设备上。

# android - seekBar 和 textswitcher

> ID：14138495
> 
> 赞同：1
> 
> 时间：2013-01-03T11:58:14.427
> 
> 标签：android

使用 textview 我使用此代码更改文本大小。现在我用 textswitcher 更改了 textview，我不能使用“setTextSize”。应该使用哪种方法？

```
mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
      mSwitcher.setFactory(this);

      Animation in = AnimationUtils.loadAnimation(this,
              android.R.anim.fade_in);
      Animation out = AnimationUtils.loadAnimation(this,
              android.R.anim.fade_out);
      mSwitcher.setInAnimation(in);
      mSwitcher.setOutAnimation(out);

        seekBar1.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
                  public void onStopTrackingTouch(SeekBar seekBar) {
        [...]
    seek=10;
              seekBar1.setProgress(seek);
//        textView1.setTextSize(seek);

I've a public View makeView() {
        TextView t = new TextView(this);
        t.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
        t.setTextSize(seek);
        return t;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:09:54.710

您可以使用

```
 mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
 mSwitcher.setFactory(this); 

 TextView t1 = (TextView) mSwitcher.getChildAt(0); 

 public View makeView() {
     TextView t = new TextView(this);
     t.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
     t.setTextSize(36);

     return t;
  } 
```

# trigger.io - 在选项卡内伪造函数

> ID：14138496
> 
> 赞同：1
> 
> 时间：2013-01-03T11:58:14.260
> 
> 标签：trigger.io

是否可以在打开本地 html 文件之类的`request.ajax()`和`prefs.get()`内部 使用伪造功能？`tabs.openWithOptions()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:28:06.490

不，使用 tabs 模块时打开的模态视图被设计成更像一个浏览器窗口，并且不允许访问伪造方法。

您是否有理由要在模态视图中打开本地页面？您应该能够使用 Javascript/CSS 在您的应用程序中显示模式对话框，而无需导航到其他页面。

# java - 如何正确隐藏 JFrame

> ID：14138499
> 
> 赞同：7
> 
> 时间：2013-01-03T11:58:23.417
> 
> 标签：java, swing, memory-leaks, jframe

我有一个非常简单的`JFrame`窗口，其中包含一个按钮：`No`.

在主函数中，我设置`setVisible(true);`了我的`JFrame`和`No`按钮监听器，我想关闭窗口，所以我将可见性设置为 false：`setVisible(false);`然后我这样做`System.exit(0);`是为了防止在多次运行程序时可能出现内存泄漏。

我有两个问题：

1.  `System.exit(0);`在上述情况下我真的需要吗？
2.  如果我把它`JFrame`作为一个`popup`窗口，我就不能真正使用`System.exit(0);`，因为这会终止整个程序。那么如何正确关闭弹出窗口并留在主`JFrame`窗口中呢？（现在我只关闭它`setVisible(false);`，当我通过程序执行多次时，程序变得非常慢）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T12:02:31.423

1.  采用[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

2.  是否有另一个弹出容器的真正原因

    *   [`JDialog`与父母一起`JFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)使用to , with [`setModal`/`ModalityTypes`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JDialog.html#JDialog%28java.awt.Dialog,%20boolean%29)

    *   [只创建一个 JDialog 并`JDialog`通过`getContentPane#removeAll()`](https://stackoverflow.com/questions/6309407/remove-top-level-container-on-runtime)

    *   用于`JOptionPane`简单的用户交互

3.  将两者放在一起，以上两点，用于与父母一起`CardLayout`弹出，注意从一张卡切换到另一张卡后可能/需要调用`JDialog``JFrame``JDialog.pack()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T12:03:32.837

1.  `setVisible`会导致减速
2.  `dispose`会导致减速
3.  `System.exit`将关闭整个 JVM

因此，您应该重用单个`JFrame`or `JDialog`。

在按钮的`ActionListener`中，调用`frame.setVisible(false);`。然后，不要创建一个新框架，而是执行`frame.setVisible(true);`. 如果你想改变框架的内容，有功能`frame.getContentPane().removeAll();`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:03:01.763

只需添加这个：`JFrame.setDefaultCloseOperation(DISPOSE_ON_CLOSE)`。注意： 的默认选项`JFrame`是`HIDE_ON_CLOSE`。

# asp.net-mvc-3 - 用于网站和 Api 的 Ninject - 序列不包含任何元素

> ID：14138503
> 
> 赞同：3
> 
> 时间：2013-01-03T11:58:36.357
> 
> 标签：asp.net-mvc-3, rest, ninject.web.mvc

我有一个带有 Web.Api 项目和 MVC 3 项目的 VS2010 解决方案。

Web.APi 和 MVC 项目都有自己的 App_Start，其中包含 NinjectWebCommon，并在其中声明了自己的绑定。

尝试使用 Api 时，我总是收到以下消息：

序列不包含任何元素

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.InvalidOperationException：序列不包含任何元素

源错误：

第 30 行：DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule)); 第 31 行：DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule)); 第 32 行：bootstrapper.Initialize(CreateKernel); 第 33 行：} 第 34 行：

源文件：D:\Code\GreenDeal\PoS\GreenDeal.UI\App_Start\NinjectWebCommon.cs 行：32

堆栈跟踪：

[InvalidOperationException：序列不包含元素] System.Linq.Enumerable.Single(IEnumerable `1 source) +371 Ninject.Web.Mvc.NinjectMvcHttpApplicationPlugin.Start() in c:\Projects\Ninject\ninject.web.mvc\mvc3\src\Ninject.Web.Mvc\NinjectMvcHttpApplicationPlugin.cs:53 Ninject.Infrastructure.Language.ExtensionsForIEnumerableOfT.Map(IEnumerable`1 series, Action `1 action) in c:\Projects\Ninject\ninject\src\Ninject\Infrastructure\Language\ExtensionsForIEnumerableOfT.cs:32 Ninject.Web.Common.Bootstrapper.Initialize(Func`1 createKernelCallback) in c:\Projects\Ninject\Ninject.Web.Common\src\Ninject.Web.Common\Bootstrapper.cs： 53 XXXX.UI.App_Start.NinjectWebCommon.Start() 在 D:\Code\XXXX\PoS\XXXX.UI\App_Start\NinjectWebCommon.cs:32

如果我从 Api 或 MVC 站点中删除 WebActivator.PreApplicationStartMethod，我不会收到此错误。

我认为有两个 Start 有问题，但不知道该怎么办？我可以让它们共存吗？我应该分成 2 个解决方案并希望它消失吗？部署站点后，api 将驻留在不同的服务器上，站点将使用 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:44:02.717

回到基础。

遵循此处定义的步骤：[http ://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/](http://www.eyecatch.no/blog/2012/06/using-ninject-with-webapi-rc/)

仍然有问题，但那是因为 MVC 客户端站点有对 ninject.webapi 的引用。删除了所有作品。

# jsf - NotSerializableException：com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate

> ID：14138506
> 
> 赞同：0
> 
> 时间：2013-01-03T11:58:48.220
> 
> 标签：jsf, glassfish, ejb, hazelcast

我使用带有两个 Glassfish 3.1.2.2 实例的 Hazelcast HttpSession Clustering。我使用`@EJB`或 @Inject 注释在托管 bean 中注入 EJB。在`@ViewScoped`和`@SessionScoped`托管豆中，我得到

```
com.hazelcast.nio.HazelcastSerializationException:
 java.io.NotSerializableException: 
  com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate Exception. 
```

当我`@EJB`用瞬态关键字标记该字段时，因此，我没有得到`SerializationException`. 但是，在反序列化之后，我的 ejb 没有重新注入，然后，我得到了一个`NullPointerException`.

我该如何处理这个问题？（注：Hazel 版本：2.4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:30:18.803

你试过让你的 EJB 类实现 Serializable 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T03:37:38.053

除了您的 EJB 类之外，请确保**嵌套**在其中的所有对象也是可序列化的。

有一个 VM 选项可以向异常添加详细信息。它将显示无法序列化的根类和嵌套类，并帮助您找出缺少的内容：

```
-Dsun.io.serialization.extendedDebugInfo=true 
```

* * *

您可能还想检查您是否为每个可序列化类（包括**超类）定义了****serialVersionUID**（如果它们是可序列化的）

 **注意：您的代码有时可能会在没有 serialVersionUID 的情况下运行，但[请阅读 Serializable 的 javadoc 中的最后一段](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)以了解为什么它会成为问题，具体取决于环境。**

# html - 在html中创建目录

> ID：14138507
> 
> 赞同：19
> 
> 时间：2013-01-03T11:58:50.360
> 
> 标签：html, tableofcontents

是否可以创建如下所示的有序列表？对于我正在创建的目录，我喜欢这个。

1.  进入
2.  第 1节
    2.1 子节 1
    2.2 子节2

3.  第 2 节
    .....

我有以下内容，但每个小节都从 1 重新开始。

```
<ol>
    <li>
        <a href="#Lnk"></a>
    </li>
    <li>
        <a href="#Lnk"></a>
    </li>
    <ol>
        <li>
            <a href="#Lnk"></a>
        </li>
        <li>
            <a href="#Lnk"></a>
        </li>
    </ol>
</ol> 
```

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-10T17:30:32.823

这确实可以用纯 CSS 来完成：

```
ol {
    counter-reset: item;
}

li {
    display: block;
}

li:before {
    content: counters(item, ".")" ";
    counter-increment: item;
} 
```

[与fiddle](http://jsfiddle.net/jasonkarns/6xkzv37e/)相同的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T12:01:25.687

有很多 jQuery 插件可以生成目录。

*   [先看这个](http://projects.jga.me/toc/#toc4)

*   [另一个在这里](http://fuelyourcoding.com/scripts/toc/examples/example2.html)，有有序列表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:01:15.143

你看过这篇文章吗： [HTML 中的数字嵌套有序列表](https://stackoverflow.com/questions/2729927/number-nested-ordered-lists-in-html)

我认为不使用 JS 是无法做到的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T08:53:18.823

这段代码会导致我想要的输出：

```
<ol>
  <li>
    <a href="#Lnk">foo</a>
  </li>
  <li>
    <a href="#Lnk">bar</a>
    <ol>
      <li>
        <a href="#Lnk">baz</a>
      </li>
      <li>
        <a href="#Lnk">qux</a>
      </li>
    </ol>
  </li>
  <li>
    <a href="#Lnk">alpha</a>
    <ol>
      <li>
        <a href="#Lnk">beta</a>
      </li>
      <li>
        <a href="#Lnk">gamma</a>
      </li>
    </ol>
  </li>
</ol> 
```

CSS：

```
ol {
    counter-reset: item;
}
li {
    display: block;
}
li::before {
    content: counters(item, ".")". ";
    counter-increment: item;
} 
```

小提琴：http: [//jsfiddle.net/Lepetere/evm8wyj5/1/](http://jsfiddle.net/Lepetere/evm8wyj5/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-23T10:17:19.120

就我自己而言，我对现有的解决方案并不满意。所以我用`Python3`and创建了一个解决方案`BeautifulSoup`。

该函数将 HTML 源代码作为字符串并查找标题标签（例如`h1`）。在接下来的步骤`id=`中，为标题和相应的目录条目创建一个。

```
def generate_toc(html_out):
    """Create a table of content based on the header tags.

    The header tags are used to create and link the toc.
    The toc as place on top of the html output.

    Args:
        html_out(string): A string containing the html source.

    Returns:
        (string): The new string.
    """
    from bs4 import BeautifulSoup

    # the parser
    soup = BeautifulSoup(html_out, 'html.parser')

    # create and place the div element containing the toc
    toc_container = soup.new_tag('div', id='toc_container')
    first_body_child = soup.body.find_all(recursive=False)[0]
    first_body_child.insert_before(toc_container)
    # toc headline
    t = soup.new_tag('p', attrs={'class': 'toc_title'})
    t.string = 'Inhalt'
    toc_container.append(t)

    def _sub_create_anchor(h_tag):
        """Create a toc entry based on a header-tag.
        The result is a li-tag containing an a-tag.
        """
        # Create anchor
        anchor = uuid.uuid4()
        h_tag.attrs['id'] = anchor  # anchor to headline
        # toc entry for that anchor
        a = soup.new_tag('a', href=f'#{anchor}')      
        a.string = h_tag.string
        # add to toc
        li = soup.new_tag('li')
        li.append(a)
        return li

    # main ul-tag for the first level of the toc
    ul_tag = soup.new_tag('ul', attrs={'class': 'toc_list'})
    toc_container.append(ul_tag)

    # helper variables
    curr_level = 1
    ul_parents = [ul_tag]

    # header tags to look for
    h_tags_to_find = [f'h{i}' for i in range(1, 7)]  # 'h1' - 'h6'
    for header in soup.find_all(h_tags_to_find):
        next_level = int(header.name[1:])

        if curr_level < next_level:  # going downstairs
            # create sub ul-tag
            sub_ul_tag = soup.new_tag('ul', attrs={'class': 'toc_list'})
            # connect it with parent ul-tag
            ul_parents[-1].append(sub_ul_tag)
            # remember the sub-ul-tag
            ul_parents.append(sub_ul_tag)
        elif curr_level > next_level:  # going upstairs
            # go back to parent ul-tag
            ul_parents = ul_parents[:-1]

        curr_level = next_level

        # toc-entry as li-a-tag
        li_tag = _sub_create_anchor(header)
        # add to last ul-tag
        ul_parents[-1].append(li_tag)

    return soup.prettify(formatter='html5') 
```

在您的所有用例中，这可能并不优雅。我自己将 TOC 放在由数据科学例程（例如 pandas）生成的 HTML 报告之上。

# asp.net - 将 QueryString 转发到另一台服务器

> ID：14138516
> 
> 赞同：1
> 
> 时间：2013-01-03T11:59:40.097
> 
> 标签：asp.net, vb.net, http, query-string

我有一个 webapp，它接受来自外部服务器的 messageid 和状态作为 QueryString。我正在将 webapp 迁移到新服务器，但我需要新服务器将 QueryString 转发到旧服务器，以防旧服务器仍在等待更新，直到我可以让我的客户端迁移过来。

外部网站使用 ?MSGID=12345678&RESPONSE=0 调用我的 webapp

例如：

```
http://dlrnotify.newserver.com/GetResponse.aspx?MSGID=12345678&RESPONSE=0 
```

我需要 GetResponse.aspx 后面的代码在本地处理消息，然后将请求转发到旧服务器。例如，调用：

```
http://dlrnotify.oldserver.com/GetResponse.aspx?MSGID=12345678&RESPONSE=0 
```

我真的不想将用户重定向到旧的 Web 服务器，只是为了从我的应用程序传递查询字符串。

我可以通过调用获取 QueryString，`Response.QueryString.ToString()`我只需要知道如何将其发布到旧服务器而不会破坏任何内容。

抱歉，如果这是一个愚蠢的问题，我不经常使用网络应用程序，并且显然使用了错误的搜索词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:04:35.463

您可以为此使用 HttpWebRequest 和 HttpWebResponse。下面是使用 thses 的示例

```
 Uri uri = new Uri("http://www.microsoft.com/default.aspx");
  if(uri.Scheme = Uri.UriSchemeHttp) 
  {
        HttpWebRequest request = HttpWebRequest.Create(uri);
        request.Method = WebRequestMethods.Http.Get;
        HttpWebResponse response = request.GetResponse();
        StreamReader reader = new StreamReader(response.GetResponseStream());
        string  tmp = reader.ReadToEnd();
        response.Close();
        Response.Write(tmp);
 } 
```

关于如何使用 HttpWebRequest 将数据发布到远程网页的示例代码

```
 Uri uri = new Uri("http://www.amazon.com/exec/obidos/search-handle-form/102-5194535-6807312");
   string data = "field-keywords=ASP.NET 2.0";
   if (uri.Scheme == Uri.UriSchemeHttp)
   {
       HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
       request.Method = WebRequestMethods.Http.Post;
       request.ContentLength = data.Length;
       request.ContentType = "application/x-www-form-urlencoded";
       StreamWriter writer = new StreamWriter(request.GetRequestStream());
       writer.Write(data);
       writer.Close();
       HttpWebResponse response = (HttpWebResponse)request.GetResponse();
       StreamReader reader = new StreamReader(response.GetResponseStream());
       string tmp = reader.ReadToEnd();
       response.Close();
       Response.Write(tmp);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:06:10.047

在新服务器上执行您的代码（处理消息）后，手动生成一个**HttpWebRequest**，它应该是您的旧服务器，其查询字符串与您已经想出的格式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T18:03:17.523

我有一个和你的帖子一样的任务。但还有一点。因为我们有两个 Web 应用程序，一个在 asp.net 中，另一个在 PHP 中。在两者中，我们都创建了用户配置文件。现在的任务是在 Asp.NET 应用程序中创建用户，我们需要从 Asp.Net 应用程序中将相同的信息保存在 PHP 应用程序中。

我正在使用下面的代码，但它没有工作，请你看看它，让我知道我错过了什么。

```
 CookieContainer cookies = new CookieContainer();
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(@"http://localhost/admin/config/popup_user_info_brand.php");
        request.PreAuthenticate = true;
        request.AllowWriteStreamBuffering = true;
        request.CookieContainer = cookies; // note this
        request.Method = "POST";

        string boundary = System.Guid.NewGuid().ToString();
        string Username = "admin";
        string Password = "admin";

        if (!string.IsNullOrEmpty(Username) && !string.IsNullOrEmpty(Password))
        {
            request.Credentials = new NetworkCredential(Username, Password);
            request.ContentType = string.Format("multipart/form-data; boundary={0}", boundary);

            StringBuilder sb = new StringBuilder();

            sb.AppendLine("Content-Disposition: form-data; name=\"name\"");
            sb.AppendLine("Singh");

            sb.AppendLine("Content-Disposition: form-data; name=\"username\"");
            sb.AppendLine("Singh123");

            sb.AppendLine("Content-Disposition: form-data; name=\"email\"");
            sb.AppendLine("a@b.com");

            sb.AppendLine("Content-Disposition: form-data; name=\"password\"");
            sb.AppendLine("P@ssword");

            // This is sent to the Post
            byte[] bytes = Encoding.UTF8.GetBytes(sb.ToString());

            request.ContentLength = bytes.Length;

            using (Stream requestStream = request.GetRequestStream())
            {
                requestStream.Write(bytes, 0, bytes.Length);
                requestStream.Flush();
                requestStream.Close();

                using (WebResponse response = request.GetResponse())
                {
                    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
                    {
                       HttpContext.Current.Response.Write(reader.ReadToEnd());
                    }
                }
            }
        } 
```

注意：- PHP 网站是第 3 方，我们无法访问代码。

谢谢，金妮。

# url - 网址仅在单击链接时打开

> ID：14138525
> 
> 赞同：-2
> 
> 时间：2013-01-03T12:00:20.353
> 
> 标签：url

有没有办法确保 url 仅在单击页面上提供的链接时成功加载页面，如果 url 被复制粘贴到浏览器地址栏中并按下 Enter 键，则阻止 url 打开？编辑会话变量就是答案.. 非常愚蠢的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:01:18.457

**你不能**。它是一个浏览器功能，您无法控制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:16:06.570

不能完全阻止用户这样做。

不过，您可以尝试使其变得艰难，例如通过隐藏的 POST 数据或通过充当页面网关的“代理”链接。在这种情况下会想到会话变量，因为您已经有效地移动了服务器端的锁定逻辑。

# h2 - H2 数据库字符串到时间戳

> ID：14138532
> 
> 赞同：36
> 
> 时间：2013-01-03T12:01:01.633
> 
> 标签：h2, milliseconds, timestamp

## 在 H2 数据库中插入时间戳

您好，我必须插入像“17-09-2012 18:47:52.69”这样的数据。函数 PARSEDATETIME 减少毫秒。查询示例：

```
CREATE TABLE TEST(ID NUMBER(19) not null,
DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP);

INSERT INTO TEST (ID, DATE) VALUES(1,
parsedatetime('17-09-2012 18:47:52.69', 'dd-MM-yyyy hh:mm:ss.SS')) 
```

在 SELECT 之后，我看到毫秒为零。

什么是解决方案？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-04T06:45:52.680

根据我的测试，使用 H2 版本 1.3.170，毫秒实际上不是零，而是 069：

```
select * from test;
ID  DATE  
1   2012-09-17 18:47:52.069 
```

如果您运行，也会发生同样的情况：

```
call parsedatetime('17-09-2012 18:47:52.69', 'dd-MM-yyyy hh:mm:ss.SS'); 
```

如果你添加一个零，那么它的工作原理：

```
call parsedatetime('17-09-2012 18:47:52.690', 'dd-MM-yyyy hh:mm:ss.SS'); 
```

H2 内部使用`java.text.SimpleDateFormat`，因此它必须承受相同的限制。如果您在 中找到解决方案`SimpleDateFormat`，您可以`parsedatetime`在 H2 中的函数中使用它。

另一种方法是使用 JDBC 中定义的 ISO 时间戳格式。这应该适用于所有符合 JDBC 标准的数据库：

```
INSERT INTO TEST VALUES(2, {ts '2012-09-17 18:47:52.69'}); 
```

# php - 正则表达式 - php - 获取前面没有空格且后面没有单词的空格

> ID：14138533
> 
> 赞同：1
> 
> 时间：2013-01-03T12:01:05.783
> 
> 标签：php, regex

有这样的东西：

```
'This or is or some or information or stuff or attention here or testing' 
```

我想捕获所有不在单词 or 之前或之后的 [空格]。

我达到了这一点，我认为我走在正确的轨道上。

```
/\s(?<!(\bor\b))\s(?!(\bor\b))/ 
```

或这个

```
/(?=\s(?<!(\bor\b))(?=\s(?!(\bor\b))))/ 
```

不过，我并没有得到所有的空间。这有什么问题？（第二个是尝试让“和”继续下去）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:22:48.333

尝试这个：

```
<?php
    $str = 'This or is or some or information or stuff or attention is   not here or testing';
    $matches = null;
    preg_match_all('/(?<!\bor\b)[\s]+(?!\bor\b)/', $str, $matches);
    var_dump($matches);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:33:59.230

怎么样`(?<!or)\s(?!or)`：

```
$str='This or is or some or information or stuff or attention here or testing';
echo preg_replace('/(?<!or)\s(?!or)/','+',$str); 

>>> This or is or some or information or stuff or attention+here or testing 
```

这使用负后瞻和前瞻，`Tor operator`例如，这将替换空格，因此如果您只想匹配`or`尾随和前导空格：

```
$str='Tor operator';
echo preg_replace('/\s(?<!or)\s(?!or)\s/','+',$str); 

>>> Tor operator 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-02T06:35:19.067

代码：（[PHP 演示](https://3v4l.org/qctm7)）（[模式演示](https://regex101.com/r/KcF2e8/1)）

```
$string = "You may organize to find or seek a neighbor or a pastor in a harbor or orchard.";
echo preg_replace('~(?<!\bor) (?!or\b)~', '_', $string); 
```

输出：

```
You_may_organize_to_find or seek_a_neighbor or a_pastor_in_a_harbor or orchard. 
```

有效的模式说：

匹配每个空格**IF**：

1.  空格前面没有完整的单词“or”（以“or”结尾的单词不算在内），并且
2.  空格后面没有完整的单词“or”（以“or”开头的单词不算数）

# java - 如何根据 C 和 C++ 的字节顺序将类转换为字节数组？

> ID：14138535
> 
> 赞同：0
> 
> 时间：2013-01-03T12:01:12.903
> 
> 标签：java, c

我正在为字节数组创建一个类对象，请参见[此处](http://www.java2s.com/Code/Java/File-Input-Output/Convertobjecttobytearrayandconvertbytearraytoobject.htm)，并通过 UDP 通信将此数组传递`DatagramPacket`到目的地发送。在目标端，有 C 应用程序正在运行，我得到了有线字符。我该死的肯定这与字节顺序有关。因为我能够在接收数据包时将 C 的结构转换为类，但反之亦然。以下是 sudo - 代码：

```
// recieving part

DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
socket.receive(packet)
UdpPacket udp = new UdpPacket(buffer);

class UdpPacket implements Serializable
{
 int a;
 byte []message = new byte[10];

 public UdpPacket(byte[] data)
 {
    ByteBuffer bb = ByteBuffer.wrap(data);
    bb.order(ByteOrder.nativeOrder());
    a = bb.getInt();
    bb.get(message);
 }

}

// sending .. 
```

根据上述链接将 UdpPacket 对象转换为字节数组，但在目的地总是有垃圾值

```
DatagramSocket clientSocket = new DatagramSocket();

byte [] respoBytes = ObjectSerializer.serializeObject(udpPacket);

ByteBuffer bb = ByteBuffer.wrap(respoBytes);

byte []test = new byte[1116];
bb.order(ByteOrder.nativeOrder()); // tried all the orders here
bb.get(test);
DatagramPacket sendPacket = new DatagramPacket(test,test.length,client, Integer.parseInt(TxtFdPort.getText().toString()));
clientSocket.send(sendPacket) 
```

;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:09:22.057

最明显的问题是忽略了读取数据的长度。

```
DatagramPacket packet = new DatagramPacket(buffer, buffer.length);
socket.receive(packet);

ByteBuffer bb = ByteBuffer.wrap(packet.getData(), 0, packet.getLength());
// you need to know the endianess, not hope it's the same.
bb.order(ByteOrder.LITTLE_ENDIAN);
int a = bb.getInt(); // asuming there is at least 4 bytes.
byte[] message = new byte[bb.remaining()];
bb.get(message); 
```

对于发送，我会这样做。

```
int port = Integer.parseInt(TxtFdPort.getText().toString());
byte [] respoBytes = ObjectSerializer.serializeObject(udpPacket);
DatagramPacket sendPacket = new DatagramPacket(respoBytes, respoBytes.length, client, port);
clientSocket.send(sendPacket); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:08:15.700

在发送之前和接收之后打印出字节序列。这将告诉您它们是否相同。然后检查对应于例如 an 的字节`int`，您将立即查看它们的顺序是否正确。

很难更具体，因为您没有显示发送代码。

# php - 循环遍历目录的所有子目录

> ID：14138538
> 
> 赞同：4
> 
> 时间：2013-01-03T12:01:24.460
> 
> 标签：php, recursion, filesystems

我有一个应该很简单的任务，

*   给定一个路径，在所有子级（1 级深）中搜索一个`less`文件夹。
*   如果找到该文件夹​​，则将完整路径添加为数组的键
*   将键的值设置为相同的路径，但替换`less`为`css`
*   在less目录内递归循环所有子目录
*   以与原始目录相同的方式添加子目录

所以，给定这个结构

> 注意：除了*randomfile*之外的所有项目都是目录

```
matthew@vaio:/var/www/constructor/public/bundles$ tree
.
├── first
│   └── less
│       ├── secondtester
│       └── tester
│           ├── anothersubtester
│           ├── randomfile
│           └── subtester
├── second
│   └── less
│       ├── secondtester
│       └── tester
│           ├── anothersubtester
│           ├── randomfile
│           └── subtester
└── third
    └── noless
        ├── secondtester
        └── tester
            ├── anothersubtester
            ├── randomfile
            └── subtester

18 directories, 3 files 
```

我想以这个数组结尾（注意我在这里截断了路径只是为了更容易阅读）

```
Array
    (
    [/b/second/less] => /b/second/css
    [/b/second/less/secondtester] => /b/second/css/secondtester
    [/b/second/less/tester] => /b/second/css/tester
    [/b/second/less/tester/subtester] => /b/second/css/tester/subtester
    [/b/second/less/tester/anothersubtester] => /b/second/css/tester/anothersubtester
    [/b/first/less] => /b/first/css
    [/b/first/less/secondtester] => /b/first/css/secondtester
    [/b/first/less/tester] => /b/first/css/tester
    [/b/first/less/tester/subtester] => /b/first/css/tester/subtester
    [/b/first/less/tester/anothersubtester] => /b/first/css/tester/anothersubtester
) 
```

现在我有下面的代码，但我认为这根本没有优化，例如我知道有`RecursiveIteratorIterators`等，但我不知道如何使用它们来完成这项任务，所以不得不求助于递归函数起重。基本上，我想知道如何编写它以更好地优化：

```
$directories = array();
$bundlePath = realpath('/public/bundles');

function lessSearcher($lessPath, $cssPath){
    $directories = array($lessPath => $cssPath);

    $lessDirs = new DirectoryIterator($lessPath);
    foreach ($lessDirs as $lessDir) {
        //we only want the directories and not the .'s
        if ($lessDir->isDot() || !$lessDir->isDir()) continue;
        $lessCurrent = $lessPath . '/' . $lessDir->getFileName();
        $cssCurrent = $cssPath . '/' . $lessDir->getFileName();
        $directories[$lessCurrent] = $cssCurrent;
        $directories = array_merge($directories, lessSearcher($lessCurrent, $cssCurrent));
    }

    return $directories;
}

$bundles = new DirectoryIterator($bundlePath);
foreach ($bundles as $bundle) {
    //we only want the directories and not the .'s
    if($bundle->isDot() || !$bundle->isDir()) continue;
    //we only want the directories that have a less directory
    if(!realpath($bundlePath.'/'.$bundle->getFileName().'/less')) continue;

    $lessPath = realpath($bundlePath . '/' . $bundle->getFileName()) . '/less';
    $cssPath = realpath($bundlePath . '/' . $bundle->getFileName()) . '/css';

    $directories = array_merge($directories, lessSearcher($lessPath, $cssPath));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:19:32.540

我认为代码已正确优化。
我制作了一个列出所有目录和子目录的脚本，然后删除那些没有“less”目录的目录，并为那些有它的目录创建一个新数组。
然后我用 1000 次循环测试了你和我的。您的脚本平均**耗时 0.93s**而我的脚本耗时**1.27s**。所以在我看来，你的代码没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:35:06.657

我不得不说，如果它足够快并且可以完成这项工作，那么我会说没有必要进一步优化。如果你达到了它不够快或不能完成工作的程度，那么然后再修改它。递归迭代器无论如何都不可能对您的实现有太大的不同。

抱歉，我帮不上什么忙。

# docpad - DocPad 生成没有扩展名的页面

> ID：14138546
> 
> 赞同：3
> 
> 时间：2013-01-03T12:01:44.487
> 
> 标签：docpad

有什么方法可以配置 DocPad 生成没有扩展名的页面，所以在 url 中作为静态站点托管它看起来像： http: [//mysite.com/page1/](http://mysite.com/page1/)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T03:01:59.850

是的，但方式不同。

为静态环境（so）生成的[cleanurls 插件](http://docpad.org/plugin/cleanurls)`docpad generate --env static`将输出说`pages/welcome.html`，`pages/welcome/index.html`它完成了你所追求的 - 你可以`pages/welcome`在浏览器中访问，不用担心。文档 URL 也将更新以反映这一点。

仅在没有扩展名的情况下输出的问题`pages/welcome`是，服务器不知道浏览器通常需要知道如何正确处理文件的文件的 mime 类型。

# android - Network latency, battery and load simulation tools for iOS and Android

> ID：14138554
> 
> 赞同：2
> 
> 时间：2013-01-03T12:02:25.287
> 
> 标签：android, ios

There is some hybrid app I need to test. I need to test it in Android and iOS.

I have device Samsung SII and iPhone 4s.

I tried to test it with different means.

By simulating the network/battery/memory.

I need some tools that would help me in that.

i.e., When the battery is full, I need to reduce it to Low and test it. And when there is lot of memory, I need to reduce it and test the app in Low memory. And when the bandwidth speed of the network is high, I need to reduce it and test the app.

Can any one suggest me tools that simulate these. Never mind it is 3 different tools or a single tool.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:54:35.383

我认为您不能只在真实设备上进行模拟。

对于模拟使用模拟器 - Android 和 iOS 模拟器都具有使您能够模拟电池/内存/来电和许多其他事件的功能。

如果你想在真实设备上做某事，你必须以艰难的方式去做——让电池掉电（例如玩 3D 游戏）、关闭互联网连接、从另一台设备拨打电话以接听来电......

对于低内存模拟，尝试在后台运行 3D 游戏，播放音频/视频等。

# java - 2 腿（客户端凭据）OAuth2 服务器的 Spring 安全上下文设置

> ID：14138556
> 
> 赞同：31
> 
> 时间：2013-01-03T12:02:30.977
> 
> 标签：java, spring, spring-security, oauth-2.0

如果我想为一个客户端保护 REST 服务器，那么 spring-security OAuth2 的最小设置是什么？我不想使用任何不必要的设置或实现任何不必要的 bean。也许已经有一个用于 spring-security + OAuth2 的“简单”教程/示例？（虽然我试图避免对此抱有太大希望）

我当前的工作设置（使用 sparklr 上下文中的 copy+past+wtf）感觉太多了：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:oauth="http://www.springframework.org/schema/security/oauth2"
       xmlns:sec="http://www.springframework.org/schema/security"
       xsi:schemaLocation="http://www.springframework.org/schema/security/oauth2
                           http://www.springframework.org/schema/security/spring-security-oauth2-1.0.xsd
                           http://www.springframework.org/schema/security
                           http://www.springframework.org/schema/security/spring-security-3.1.xsd
                           http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <oauth:authorization-server client-details-service-ref="clientDetails" token-services-ref="tokenServices">
        <oauth:client-credentials />
    </oauth:authorization-server>

    <sec:authentication-manager alias="clientAuthenticationManager">
        <sec:authentication-provider user-service-ref="clientDetailsUserService" />
    </sec:authentication-manager>

    <http pattern="/oauth/token" create-session="stateless"
            authentication-manager-ref="clientAuthenticationManager"
            xmlns="http://www.springframework.org/schema/security">
        <intercept-url pattern="/oauth/token" access="IS_AUTHENTICATED_FULLY" />
        <anonymous enabled="false" />
        <http-basic entry-point-ref="clientAuthenticationEntryPoint" />

        <!-- include this only if you need to authenticate clients via request parameters -->
        <custom-filter ref="clientCredentialsTokenEndpointFilter" before="BASIC_AUTH_FILTER" />
        <access-denied-handler ref="oauthAccessDeniedHandler" />
    </http>

    <oauth:resource-server id="resourceServerFilter"
            resource-id="rest_server" token-services-ref="tokenServices" />

    <oauth:client-details-service id="clientDetails">
        <oauth:client client-id="the_client" authorized-grant-types="client_credentials" 
                authorities="ROLE_RESTREAD" secret="1234567890" />
    </oauth:client-details-service>

    <http pattern="/**" create-session="never"
            entry-point-ref="oauthAuthenticationEntryPoint"
            access-decision-manager-ref="accessDecisionManager"
            xmlns="http://www.springframework.org/schema/security">
        <anonymous enabled="false" />

        <intercept-url pattern="/rest/**" access="ROLE_RESTREAD" method="GET" />
        <custom-filter ref="resourceServerFilter" before="PRE_AUTH_FILTER" />
        <access-denied-handler ref="oauthAccessDeniedHandler" />
    </http>

    <bean id="tokenStore" class="org.springframework.security.oauth2.provider.token.InMemoryTokenStore" />

    <bean id="tokenServices" class="org.springframework.security.oauth2.provider.token.DefaultTokenServices">
        <property name="tokenStore" ref="tokenStore" />
        <property name="supportRefreshToken" value="false" />
        <property name="clientDetailsService" ref="clientDetails" />
        <property name="accessTokenValiditySeconds" value="400000" />
        <property name="refreshTokenValiditySeconds" value="0" />
    </bean>

    <bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased"
            xmlns="http://www.springframework.org/schema/beans">
        <constructor-arg>
            <list>
                <bean class="org.springframework.security.oauth2.provider.vote.ScopeVoter" />
                <bean class="org.springframework.security.access.vote.RoleVoter" />
                <bean class="org.springframework.security.access.vote.AuthenticatedVoter" />
            </list>
        </constructor-arg>
    </bean>

    <bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
        <property name="realmName" value="theRealm" />
    </bean>

    <bean id="clientAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
        <property name="realmName" value="theRealm/client" />
        <property name="typeName" value="Basic" />
    </bean>

    <bean id="clientCredentialsTokenEndpointFilter" class="org.springframework.security.oauth2.provider.client.ClientCredentialsTokenEndpointFilter">
        <property name="authenticationManager" ref="clientAuthenticationManager" />
    </bean>

    <bean id="clientDetailsUserService" class="org.springframework.security.oauth2.provider.client.ClientDetailsUserDetailsService">
        <constructor-arg ref="clientDetails" />
    </bean>

    <bean id="oauthAccessDeniedHandler" class="org.springframework.security.oauth2.provider.error.OAuth2AccessDeniedHandler" />

    <sec:global-method-security pre-post-annotations="enabled" proxy-target-class="true">
        <sec:expression-handler ref="oauthExpressionHandler" />
    </sec:global-method-security>

    <oauth:expression-handler id="oauthExpressionHandler" />

    <oauth:web-expression-handler id="oauthWebExpressionHandler" />
</beans> 
```

我已经实现了 authenticationManager (UserDetailsS​​ervice) 作为实现基本 spring-security 的一部分，以便帐户和角色对我们的数据库进行持久化。

* * *

我没有真正得到的豆子是：

**userApprovalHandler**：为什么我需要在 client_credentials 流/授权中获得任何用户批​​准？看来，sparklr 会覆盖默认`TokenServicesUserApprovalHandler`自动批准一个客户。对于受信任的客户端和服务器之间的通信，我是否也需要这样做？

**oauthAuthenticationEntryPoint**：sparklr 对此所做的所有事情都是：

```
<bean id="oauthAuthenticationEntryPoint" class="org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint">
    <property name="realmName" value="sparklr2" />
</bean> 
```

那应该做什么？

**clientCredentialsTokenEndpointFilter** 它说，只有当我想通过请求参数进行身份验证时，我才应该包含它。所以我想到的是：向我的服务器发送一个 GET(?) 请求，并获取一个令牌和那个令牌访问资源？所以我在想，对令牌的请求应该包含秘密作为请求参数..？

**resourceServerFilter** 在我看来，这表示一个单独的资源服务器？如果我的资源与身份验证提供程序位于同一台服务器上，这将如何应用？

**accessDecisionManager** 我不记得在设置我的自定义 spring-security 实现时必须使用它，为什么我现在要这样做？

感谢您通读！希望有人能回答我的一些问题。。

## 更新

我已将设置更新为当前的工作状态。我现在可以使用客户端凭据请求访问令牌：

```
$ curl -X -v -d 'client_id=the_client&client_secret=secret&grant_type=client_credentials' -X POST "http://localhost:9090/our-server/oauth/token" 
```

并使用该令牌访问受保护的资源：

```
$ curl -H "Authorization: Bearer fdashuds-5432fsd5-sdt5s5d-sd5" "http://localhost:9090/our-server/rest/social/content/posts" 
```

它仍然感觉像很多设置，我的问题仍然存在。另外我想知道这是否是保护可信客户端和 REST 服务器之间通信的正确方法。

除非通过 https 完成，否则对令牌的初始请求仍然感觉不安全，但这就足够了吗？

还有令牌本身呢，我应该给它一个很长的生命周期并将它持久保存在客户端上吗？在任何情况下，这都意味着捕获一个令牌过期异常，然后请求一个新的异常。还是我应该为每个请求握手？刷新令牌呢？我想我在某处读到刷新令牌对于客户端凭据授予类型不安全..？是否有必要将令牌作为 HTTP 标头发送，或者我可以更改它吗？我不想为我们的客户端使用 spring-security 客户端堆栈，因为它具有相当传统的设置（jboss 5），到目前为止我们所做的只是将 REST 通信功能与请求参数集成在一起。

了解更多关于所有弹簧安全设置的信息也会有所帮助，但文档很薄。

## 编辑

将 spring 安全配置更新为我们当前的状态。另外，这是我们的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
        id="WebApp_ID" version="2.5">

    <display-name>the-display-name</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-context.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>     
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet
        </servlet-class>        
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>base.package.rest</param-value>
        </init-param>               
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
            /WEB-INF/servlet-context.xml            
            </param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>contextAttribute</param-name>
            <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.appServlet</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

注意：上面的 spring-security-context.xml 将由 servlet-context 初始化。spring-context.xml 本身只初始化 bean。（另外：我们的服务器也有一些视图，所以所有的 rest 资源都在 /rest 下运行，因此是 url 模式。但是：总是需要有一个单独的 servlet 和 spring 上下文。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-06T05:26:24.053

**userApprovalHandler**：如果您的系统中只有一个客户端，我同意用户不必批准它访问他们的数据。

**oauthAuthenticationEntryPoint**：通常，如果身份验证失败，则响应类型为 JSON。文档说“如果身份验证失败并且调用者要求特定的内容类型响应，则该入口点可以发送一个响应，以及标准的 401 状态。”

**clientCredentialsTokenEndpointFilter**：颁发访问令牌是一个两步过程。首先，您将用户发送到资源服务器进行身份验证。此重定向由客户端验证，理想情况下使用 HTTP 标头（密钥 + 秘密）。作为回报，客户端会获得一个代码，该代码可以换取一个令牌。您不会直接将密钥+秘密交易为令牌，因为它不包含用户的批准。

**resourceServerFilter**：我*认为这样*做的目的是指示哪些客户端可以访问哪些资源，如果您有许多不同的资源。

**accessDecisionManager**：对于 OAuth2，您需要一个 ScopeVoter，因此默认的 Manager 不够好。

**一般来说**：如果您只有一个客户端代表用户访问资源，那么也许考虑使用 Digest 而不是 OAuth2？如果您只想对客户端（而不是用户）进行身份验证，那么 OAuth2 就太过分了。OAuth2 中的客户端身份验证实际上与基于 https 的基本身份验证相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-29T14:28:39.460

使用 spring security ouath 2.0 的 REST 客户端和用户的 oauth2 的一个很好的示例： [http ://www.e-zest.net/blog/rest-authentication-using-oauth-2-0-resource-owner-password-flow-协议/](http://www.e-zest.net/blog/rest-authentication-using-oauth-2-0-resource-owner-password-flow-protocol/)

# jquery - 在 DOM 加载之前，可以看到包含模式对话框内容的 div

> ID：14138565
> 
> 赞同：0
> 
> 时间：2013-01-03T12:03:07.223
> 
> 标签：jquery, jquery-ui

在我的应用程序中，我有一个相当大的表，需要一些时间来加载。

我有几个[Jquery UI 模式对话框](http://jqueryui.com/dialog/#modal-form)：

```
 $( "#element_copy" ).dialog({
        autoOpen: false,
        height: 600,
        width: 550,
        modal: true,
        close: function() { 
            $(":checked").removeAttr("checked");
        }
    }); 
```

对话框工作正常。

**问题：**

在整个表格和所有内容加载之前，在窗口底部您可以看到模态窗口的所有 div。你将如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:05:50.753

将它们设置为 display:none（通过样式属性或通用 css 类）。使用 dialog('open') 后，它们将再次显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:06:16.013

隐藏 CSS 中的对话框：

```
#element_copy, #another_dialog, #yet_another {
  display: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:06:31.107

使用 css 隐藏所有元素

# ios - 我应该为 iOS 布尔状态使用什么值？

> ID：14138566
> 
> 赞同：11
> 
> 时间：2013-01-03T12:03:07.597
> 
> 标签：ios, boolean

看来，在 iOS 中，我有许多似乎适合布尔值的选项：

```
YES
NO
TRUE
FALSE
true
false 
```

我应该使用哪些？在这种特殊情况下，我隐藏了一个标签，所以我应该将`hidden`属性设置为`YES`、`TRUE`还是`true`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-03T12:21:59.517

简短回答：您应该更喜欢`YES`and`NO`设置 type 的基础属性`BOOL`。

对于长答案，让我们首先看看这些常量在哪里定义：

*   `true`并且`false`来自[`stdbool.h`](http://pubs.opengroup.org/onlinepubs/007904875/basedefs/stdbool.h.html); 它们是`#define`-d`1`和`0`
*   `TRUE`并且`FALSE`来自`CFBase.h`; 它们是`#define`-d`1`和`0`
*   `YES`并且`NO`来自`NSObjCRuntime.h`。这是 -ed as 的地方`signed char`，`typedef`它`BOOL`的两个值是`#define`-d as`((BOOL)1)`和`((BOOL)0)`or `__objc_yes`/ `__objc_no`if`objc_bool`被支持。

基础类始终使用`BOOL`for`typedef`来`signed char`表示其布尔属性。由于前两对被转换为`int`常量，使用它们可能会导致警告，尽管它可能会正常工作。然而，`YES`和`NO`常量以最适合您的编译器的方式定义，无论其版本如何。因此，我建议在整个代码中始终使用`YES`和。`NO`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T12:09:46.253

其实和没有区别`YES`，都代表一个真实的状态，用**1**表示。`TRUE``true`

 **而`NO`, `false`,`FALSE`则代表**0**所代表的虚假状态。

您还可以使用：

```
BOOL aBool = 1; 
```

等价于`BOOL aBool = true;`and`BOOL aBool = TRUE;`和 `BOOL aBool = YES;`

但：

```
BOOL bBool = 7;
if (bBool)
{
    NSLog(@"bBool is YES!\n");
}
if (bBool != YES) {
    NSLog("bBool is not YES!\n");
} 
```

将输出如下：

```
b is YES!
b is not YES! 
```

这是因为当`BOOL`类型的值为 1 以外的非零值时，与 YES 的直接比较将失败。

这是一篇不错的[**文章**](http://mobiledevelopertips.com/objective-c/of-bool-and-yes.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T12:22:08.220

我觉得他们都还好。但就个人而言，我想使用`YES`/ `NO`。

我找到了一个名为[Objective-C Runtime Reference](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)的文档：

> 布尔值 这些宏定义了方便的常量来表示布尔值。
> 
> #define YES (BOOL)1
> #define NO (BOOL)0
> 
> ### 常数
> 
> YES将 YES
> 定义为 1。
> 适用于 iOS 2.0 及更高版本。
> 在 NSObjCRuntime.h 中声明。
> 
> NO将 NO
> 定义为 0。
> 在 iOS 2.0 及更高版本中可用。
> 在 NSObjCRuntime.h 中声明。
> 
> 在
> objc.h 中声明

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:15:20.637

我同意你对此的看法，虽然它们目前的定义都是相同的，但是当你发现 TRUE != true 时，移植代码是一件痛苦的事情。 *（正是为什么我们永远不应该测试 X == 1 为 TRUE，因为有些语言使用 -1 而有些使用 1）*

我认为这可能是个人喜好，主要是关于未来的港口。

我遵循 TRUE 和 FALSE 选项，以便更容易移植到 C/C++。

如果您经常将代码转换为 Java，您可能会发现 true 和 false 更好，这样搜索/替换的次数就会减少，但我发现与 Cocoa 的一致性更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T14:14:26.290

使用 YES 和 NO 与分别使用 TRUE 和 FALSE 或 1 和 0 相同。

并使用 NSLog 来查看结果，如下所示：

```
BOOL result;
result = YES;
NSLog(@"my boolean result is %@",result ? @"Yes" : @"No"); 
```**

# php - Jquery common loading image for all divs

> ID：14138567
> 
> 赞同：0
> 
> 时间：2013-01-03T12:03:07.837
> 
> 标签：php, jquery, ajax

I am trying to use the code bellow to reveal a div that contains a loading image for all divs but I cannot make it work.

For example I have 4 divs and inside those divs I have included the div that holds the image loading icon. Each div has a button with same class name. Every time that I press the button the div that holds the loading image appears only in the first div.

P.S I want to keep this structure because I am grabbing some attributes from `<a href>`

My Jquery Code:

```
<script type="text/javascript">
    $(document).ready(function() {

        $(".mybutton").click(function() {
            var id = $(this).attr("id");
            var title = $(this).attr("title");

            var dataString = 'id='+ id;

            $('#myloader').fadeIn("fast");

            $.ajax({
                type: "POST",
                url: "getvars.php",
                data: dataString,
                cache: false,

                success: function(html) {
                    $('#myloader').fadeOut("fast");
                }

            });
        });

    });
</script> 
```

And my html Code:

```
<!-- Div 1 -->

<div id="Master" style="width:100px; height:100px;">
    <div id="myloader" style="width:50px; height:50px; display:none;">Wait...</div>
    <a href="" class="mybutton" id="someid" title="sometitle">Press me</a>
</div>

<!-- Div 2 -->

<div id="Master" style="width:100px; height:100px;">
    <div id="myloader" style="width:50px; height:50px; display:none;">Wait...</div>
    <a href="" class="mybutton" id="someid" title="sometitle">Press me</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:05:25.340

It is because you are using a div id and it should be unique on a HTML document, so you should replace `#myloader` with `.myloader` and of course `<div id="myloader"` to `<div class="myloader"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:07:07.113

您对多个元素使用相同的 id。应该只有一个元素具有 id。

尝试这个：

```
$(".mybutton").click(function() 
{

var b = this;

var id = $(this).attr("id");
var title = $(this).attr("title");

var dataString = 'id='+ id;

$('#myloader').fadeIn("fast");

$.ajax({
   type: "POST",
   url: "getvars.php",
   data: dataString,
   cache: false,

   success: function(html)
   {
   $(b).siblings('div')[0].fadeOut("fast");
   }

   });

});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:07:46.997

更改`<div id="myloader"` `to <div class="myloader"`然后将JS更改为：

```
<script type="text/javascript">
$(document).ready(function() {
    $(".mybutton").click(function() {
        var id = $(this).attr("id");
        var title = $(this).attr("title");
        var dataString = 'id='+ id;
        var $loader = $(this).parent().find('.myloader'); //Change this

        $.ajax({
            type: "POST",
            url: "getvars.php",
            data: dataString,
            cache: false,
            beforeSend: function() { //Change this
               $loader.fadeIn("fast");
            }
            success: function(html) {
               $loader.fadeOut("fast"); //Change this
            }
        });
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T12:14:09.313

ID 应该始终是唯一的（这就是为什么它被称为 ID ..:) ）..所以替换`#myloader`为`.myloader`and ..你可以使用jquery 函数`<div id="myloader"`来获取加载的 div ...`<div class="myloader"``prev()`

你的代码应该是这样的

```
$(document).ready(function() {

 $(".mybutton").click(function() 
  {

    var id = $(this).attr("id");
    var title = $(this).attr("title");

    var dataString = 'id='+ id;

    $(this).prev().fadeIn("fast"); //chnages here

  $.ajax({
     type: "POST",
     url: "getvars.php",
     data: dataString,
     cache: false,

     success: function(html)
     {
       $(this).prev().fadeOut("fast"); //and here
     }

   });

 });
}); 
```

# visual-studio-2010 - IIS7.5 会话挂在本地开发机器上

> ID：14138571
> 
> 赞同：0
> 
> 时间：2013-01-03T12:03:26.690
> 
> 标签：visual-studio-2010, iis, windows-7, iis-7.5

**概括**

我**本地**IIS7.5 中的会话无缘无故停止响应。

**细节**

我正在使用 Visual Studio 2010 在 Windows 7 Ultimate 32 位机器（这是在 VMware Workstation 中运行的 VMware 实例）上开发 ASP.NET 2.0 Web 应用程序。

没有明显的原因，IIS 似乎只是停止为当前会话工作。如果我重新启动浏览器，它会工作......一段时间，然后再次停止。如果我打开一个不同的浏览器（当第一个浏览器挂起时），新的浏览器可以工作......很短的时间。

重新启动 IIS 工作（短时间）或重建应用程序（短时间） - 但是当它停止工作时绝对没有模式......这让我发疯了！

在此期间没有高 CPU 使用率，也没有任何高内存使用率。

它似乎也不是特定于浏览器的——我通常使用 FireFox 进行开发，但这也发生在 Chrome 和 IE 上。它不仅在机器上，而且当我在其他虚拟实例中运行的旧浏览器上测试网站时。

我不确定这种情况是什么时候开始发生的，所以我无法说出当时发生了什么变化（如果有的话）。

任何人都可以提出任何可能发生这种情况的原因吗？

* * *

**更新**

这让我发疯了——所以我一直在做更多的调查。

这是 FireBug 的屏幕截图，显示实际`.aspx`请求正在正确完成，但由于某种原因，IIS 根本没有响应对页面内所有文件的请求。这些文件肯定在那里，并且由 IIS 提供了很多次。

![FireBug 显示被请求的文件，红色是那些 IIS 未能提供服务的文件，尽管在那里](../Images/f7c42963b475a32f6a533a49cf3c7d4c.png)

我已经打开了 IIS 的日志，它记录的唯一请求是那些在 FireBug 中显示为成功的请求……那些红色的丢失了。

```
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port c-ip sc-status sc-substatus sc-win32-status time-taken
2013-02-06 11:00:40 127.0.0.1 GET /default.aspx - 80 superuser 127.0.0.1 200 0 0 15
2013-02-06 11:00:40 127.0.0.1 GET /Org/Layout/Css/v0/FrontGeneral.css - 80 - 127.0.0.1 200 0 0 15
2013-02-06 11:00:40 127.0.0.1 GET /WebResource.axd d=IJ9YYVsWm9qkk8kUYcn2sYcQLbYErTn4We9MkwgF6JGUiPeoRWMmAKKsi_AbjNJQ-Je-l4D-1zuU66SBZi_kDHe1u7c1&t=634604425351482412 80 superuser 127.0.0.1 200 0 0 0
2013-02-06 11:00:40 127.0.0.1 GET /Scripts/v0/DefaultButtonFix.js - 80 - 127.0.0.1 304 0 0 0 
```

我还打开了“跟踪失败的请求”（使用[此处](http://www.iis.net/configreference/system.webserver/tracing/tracefailedrequests)的信息），但这并没有产生任何东西......目录是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:22:50.650

仍在测试这一点，但终于找到了成功。禁用我的 AVG 病毒扫描程序似乎可以解决这个问题。如果您有病毒扫描程序/安全程序包，不要费心添加例外，只需暂时禁用它并试一试。如果此测试证明成功，您可以重新添加异常。

知道你的感受。这让我发疯了好几个星期。我一直在调整 FF 和 Chrome 设置，但没有任何效果。

祝你好运...

# python - Python的property.getter的目的是什么？

> ID：14138580
> 
> 赞同：3
> 
> 时间：2013-01-03T12:03:46.043
> 
> 标签：python, new-style-class

由于 Python 力求找到一种正确的方法，我想知道 property.getter 的目的是什么。在此示例中，WhyMe 定义了一个 getter，但 Other 没有，所以我想知道 property.getter 仅使用属性的意义何在。

```
class WhyMe(object):
    def __init__(self):
        self._val = 44

    @property
    def val(self):
        print 'I am not called'
        return self._val

    @val.getter # What advantage do I bring?
    def val(self):
        print 'getter called'
        return self._val

class Other(object):
    def __init__(self):
        self._val = 44

    @property
    def val(self):
        print 'I AM called'
        return self._val 
```

并使用它们：

```
>>> why = WhyMe()
>>> why.val
getter called
44
>>> other = Other()
>>> other.val
I AM called
44 
```

我对属性并不陌生，我只是想知道制作吸气剂是否有一些优势，或者是否只是为了对称而放在那里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:05:23.543

`@property`让我们通过为该属性定义一个 getter 来定义一个全新的属性。该`@original.getter`语法允许您仅*覆盖*现有的 getter。对于属性可用的其他两种方法，还有装饰`.setter`器。`.deleter`

想象一下，您对使用属性的自定义类进行子类化，同时定义了 getter 和 setter。如果您只想覆盖该属性的*getter*，但将*setter*（或删除器）留在原处，则 using`@BaseClass.original.getter`允许您这样做：

```
>>> class Foo(object):
...     @property
...     def spam(self):
...         print 'Foo.spam called'
...         return 'spam'
...     @spam.setter
...     def spam(self, value):
...         print 'Foo.spam.setter called'
...     @property
...     def ham(self):
...         print 'Foo.ham called'
...         return 'ham'
...     @ham.setter
...     def ham(self, value):
...         print 'Foo.ham.setter called'
... 
>>> class Bar(Foo):
...     @Foo.spam.getter
...     def spam(self):
...         print 'Bar.spam override'
...         return 'eggs and spam'
...     @property
...     def ham(self):
...         print 'Bar.ham override'
...         return 'eggs and ham'
... 
>>> Bar().spam
Bar.spam override
'eggs and spam'
>>> Bar().spam = 'foo'
Foo.spam.setter called
>>> Bar().ham
Bar.ham override
'eggs and ham'
>>> Bar().ham = 'foo'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: can't set attribute 
```

请注意，我只替换了`spam` *getter*，而它的 setter 被保留了。`Bar.ham`setter不存在，我更换了物业`Foo.ham`批发。

# python - How to use variable of one function to another function without declaring global variable in this case?

> ID：14138585
> 
> 赞同：0
> 
> 时间：2013-01-03T12:04:01.893
> 
> 标签：python

I have a function like this:

```
def upload_file(request):
    if request.method == 'POST':    
        # session_name = request.POST['session']

        url = request.POST['hostname']

        username = request.POST['username']

        password = request.POST['password'] 
```

This function gets the hostname, username and password from a form and store in a respective variable. I want to use the variables url, username and password in another function:

```
def another_function():
    print url, username, password 
```

What's the right way to do this? I could make upload_file return the variable and use that but I guess it can be done only with one variable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:10:14.927

好吧，您可以在函数末尾添加：

```
 return url, username, password 
```

然后这样做

```
 url, username, password=upload_file(request) 
```

像这样，第一个函数返回所有三个变量，之后您可以在另一个函数中使用它们！

# python - Django 管理员保存错误：get_db_prep_value() 得到了意外的关键字参数“连接”

> ID：14138586
> 
> 赞同：5
> 
> 时间：2013-01-03T12:04:05.867
> 
> 标签：python, django, django-admin

当我尝试保存（使用 Django 标准管理界面）时，出现以下错误...

```
TypeError at /admin/web/campaign/dc6eb21f-87fa-462f-88af-416cf6be37f6/

get_db_prep_value() got an unexpected keyword argument 'connection' 
```

有人可以向我解释一下，为什么以及可能的解决方案？我假设这与我的自定义 HibernateBooleanField 字段有关。

完整的错误和详细信息如下。

**错误**

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/admin/web/campaign/dc6eb21f-87fa-462f-88af-416cf6be37f6/

Django Version: 1.4.2
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.flatpages',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'grappelli.dashboard',
 'grappelli',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'web')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in wrapper
  366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/views/decorators/cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/sites.py" in inner
  196\.             return view(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "/Library/Python/2.7/site-packages/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/Library/Python/2.7/site-packages/django/db/transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in change_view
  1054\.                 self.save_model(request, new_object, form, True)
File "/Library/Python/2.7/site-packages/django/contrib/admin/options.py" in save_model
  709\.         obj.save()
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/Library/Python/2.7/site-packages/django/db/models/base.py" in save_base
  529\.                             rows = manager.using(using).filter(pk=pk_val)._update(values)
File "/Library/Python/2.7/site-packages/django/db/models/query.py" in _update
  560\.         return query.get_compiler(self.db).execute_sql(None)
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  986\.         cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py" in execute_sql
  808\.             sql, params = self.as_sql()
File "/Library/Python/2.7/site-packages/django/db/models/sql/compiler.py" in as_sql
  951\.                 val = field.get_db_prep_save(val, connection=self.connection)
File "/Library/Python/2.7/site-packages/django/db/models/fields/__init__.py" in get_db_prep_save
  292\.                                       prepared=False)

Exception Type: TypeError at /admin/web/campaign/dc6eb21f-87fa-462f-88af-416cf6be37f6/
Exception Value: get_db_prep_value() got an unexpected keyword argument 'connection' 
```

**模型**

```
class Campaign(models.Model):
    campaignid = models.CharField(max_length=255, primary_key=True, db_column='campaignID')
    name = models.CharField(max_length=105)
    active = HibernateBooleanField(default=False)
    created = models.DateTimeField()
    modified = models.DateTimeField(null=True, blank=True)
    companyid = models.ForeignKey(Company, null=True, db_column='companyID', blank=True)

    class Meta:
        db_table = u'campaign'

    def __unicode__(self):
        return self.name

class HibernateBooleanField(models.BooleanField):

    __metaclass__ = models.SubfieldBase

    def get_internal_type(self):
        return "HibernateBooleanField"

    def db_type(self):
        return 'bit(1)'

    def to_python(self, value):
        if value in (True, False): return value
        if value in ('t', 'True', '1', '\x01'): return True
        if value in ('f', 'False', '0', '\x00'): return False

    def get_db_prep_value(self, value):
        return 0x01 if value else 0x00 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T12:11:39.620

是的，这将是一个公平的假设。正如您从[源代码](https://github.com/django/django/blob/master/django/db/models/fields/__init__.py#L287)中看到的那样，该方法的签名是`def get_db_prep_value(self, value, connection, prepared=False)`，因此任何子类都需要期望相同的参数或采用`*args, **kwargs`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T06:12:37.873

丹尼尔·罗斯曼（Daniel Roseman）几乎回答了这个问题，但我会用另一种方式陈述它并使用更多的词，希望你能理解。对于 Django 1.4.x 中的自定义字段，您的自定义字段的 get_db_prep_value 函数**现在必须接受**4 个参数。在 Django 1.2 中，Django 开发人员引入了多数据库支持。在 Django 1.4.x 中，开发人员删除了允许您的函数声明工作的代码。

那么你需要做什么？您需要重新定义 HibernateBooleanField.get_db_prep_value 以接受额外的参数。像下面这样更改您的 get_db_prep_value 函数，它将起作用:)

```
def get_db_prep_value(self, value, connection, prepared=False):
    return 0x01 if value else 0x00 
```

Django 文档参考：[https ://docs.djangoproject.com/en/1.2/howto/custom-model-fields/#django.db.models.Field.get_db_prep_value](https://docs.djangoproject.com/en/1.2/howto/custom-model-fields/#django.db.models.Field.get_db_prep_value)

# sql - VS2010 database projects - global system objects that have a user database reference

> ID：14138587
> 
> 赞同：1
> 
> 时间：2013-01-03T12:04:07.573
> 
> 标签：sql, sql-server, visual-studio-2010, sql-server-2008, database-project

I have something like the following in a VS2010 database project:

```
SELECT object_id
FROM [$(MyOtherDB)].sys.tables 
```

In other words referencing a global system object via a user database reference. I’ve set up references to `master.dbschema` from both the containing project and MyOtherDB project and a reference from the containing project to MyOtherDB project, but I’m still getting *SQL04151* warnings. There is some more information about it in this thread (where Gert Drapers seems to confirm that it’s a bug): [http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/914c8560-f9c3-40b6-9275-5df48baef9b1](http://social.msdn.microsoft.com/Forums/en-US/vstsdb/thread/914c8560-f9c3-40b6-9275-5df48baef9b1).

> This seems like to bug to me. The object inside the master.dbschema file is marked as GloballyScoped which means it lives inside the global namespace, which should imply that you can reference it using in the following ways:
> 
> 1.  [master].[sys].[objects]
> 2.  [userdb].[sys].[objects]
> 3.  [sys].[objects]
> 
> Option 2 clearly does not work while it should.

I couldn’t find any other references to this scenario via Google. I was just wondering if anyone had come across this and knew of any fixes or work-arounds?

# css - 内联样式元素具有不同的水平间距跨浏览器

> ID：14138596
> 
> 赞同：0
> 
> 时间：2013-01-03T12:04:36.163
> 
> 标签：css, cross-browser

我有一些内联显示的元素，它们之间有一些水平间距。这很好，但我需要间距量与当前不是相同的交叉凉亭。我可以在不使用浮点数的情况下实现这一目标吗？

我需要支持 IE7，所以我不能使用 inline-block，尽管如果绝对必要我可以使用 IE7 样式表。

[http://jsfiddle.net/2uBuu/3/](http://jsfiddle.net/2uBuu/3/)

```
<div>
    <label>label</label> 
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</div>
<div>
    <label>label</label>  
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</div>

<div>
    <label>label</label>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
     <select>
 </div>
 <div>
    <label>label</label>
    <select>
       <option>1</option>
       <option>2</option>
       <option>3</option>
     <select>
  </div>

div {
    background-color: blue;
    display: inline;
}
label {
    display: none;
}    
​
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:49:15.367

您仍然没有关闭 SELECTs（现在是第二部分）......

只需添加

```
select{
    padding: 0px;
    margin: 0px;
} 
```

覆盖与 SELECT 框相关的浏览器特定行为...例如，如果未指定，chrome 会为其添加填充和边距。

这是一个关闭所有 SELECT 并指定填充和边距的小提琴，它适用于我：http: [//jsfiddle.net/2uBuu/6/](http://jsfiddle.net/2uBuu/6/)

# c# - A single SQL query to deal with more than one one-to-many relationship and output the results once only

> ID：14138598
> 
> 赞同：2
> 
> 时间：2013-01-03T12:04:44.883
> 
> 标签：c#, asp.net, sql-server

I have 3 database tables that have between them 2 totally separate one-to-many relationships and I'm having great difficulty in writing a single SQL query to output a single record for each relevant piece of information.

Maybe, in the end, as the 2 relationships are separate it means I'll need to write 2 separate connections and SQL queries but I thought I'd ask anyway in the vain hope that someone out there has had and solved a similar issue (and in solving this I could then apply the same principle to other separate one-to-many relationships that occur throughout the database and could 'ideally' create one large query rather than even more separate connections/queries).

The query I have so far is:

```
SELECT C.court_id, court_email_desc, court_email_addr, court_opening_type_desc, court_opening_desc
FROM court C
JOIN court_email CE ON C.court_id = CE.court_id
JOIN court_opening CO ON C.court_id = CO.court_id
JOIN court_opening_type COT ON CO.court_opening_type_id = COT.court_opening_type_id
WHERE C.court_id = '" + court_id_no + "'
ORDER BY C.court_id 
```

which outputs something along the lines of:

Enquiries : enquiries@enquiries.email
Court building open : 8.30 am

Bailiffs : bailiffs@bailiffs.email
Court building open : 8.30 am

Hearings : hearings@hearings.email
Court building open : 8.30 am

Filing e-documents : ccmcce-filing@filing.email
Court building open : 8.30 am

Public Enquiries Email : ccmcccustomerenquiries@pubenq.email
Court building open : 8.30 am

Enquiries : enquiries@enquiries.email
Court building closed : 5.00 pm

Bailiffs : bailiffs@bailiffs.email
Court building closed : 5.00 pm

etc.... (**NB:** the email addresses are repeated 4 times, once for each type of opening desc)

The **desired output** would be something like this:

Enquiries : enquiries@enquiries.email
Bailiffs : bailiffs@bailiffs.email
Hearings : hearings@hearings.email
Filing e-documents : ccmcce-filing@filing.email
Public Enquiries Email : ccmcccustomerenquiries@pubenq.email

Court building open : 8.30 am
Court building closed : 5.00 pm
Telephone Enquiries from : 9.00am
Telephone Enquiries until : 5.00pm

Is there a way I can cleverly nest the query to output each email address and opening type/time only once for whichever court I choose to display? Would this even be possible in the SQL query or would the clever bit come in the C# when I output the results?

My C# code currently stands as below:

```
myDataReader3 = myCommand3.ExecuteReader();

        if (myDataReader3.HasRows) {

            string last_id = string.Empty;
            string last_id2 = string.Empty;

            while (myDataReader3.Read()) {

                string court_id = myDataReader3["court_id"].ToString();
                string court_email_desc = myDataReader3["court_email_desc"].ToString();
                string court_email_addr = myDataReader3["court_email_addr"].ToString();
                string court_opening = myDataReader3["court_opening_desc"].ToString();
                string court_opening_type = myDataReader3["court_opening_type_desc"].ToString();

                if (last_id != court_id) {

                    Response.Write("<br><strong>Email address</strong><br>" + court_email_desc + ": " + court_email_addr + "<br>");

                } else {

                    Response.Write(court_email_desc + ": " + court_email_addr + "<br>");

                }

                last_id = court_id;

                if (last_id2 != court_id) {

                    Response.Write("<br><strong>Opening times</strong><br>" + court_opening_type + ": " + court_opening + "<br>");

                } else {

                    Response.Write(court_opening_type + ": " + court_opening + "<br>");

                }

                last_id2 = court_id;

            }

        } 
```

Thanks in advance for your time and any help that comes my way.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:13:45.287

您应该能够添加`row_number() over()`到您的 SQL 查询，然后应用`CASE`语句：

```
select court_id,
  court_email_desc,
  case when rn=1 then court_email_addr else '' end court_email_addr,
  court_opening_type_desc,
  court_opening_desc
from
(
  SELECT C.court_id, 
    court_email_desc, 
    court_email_addr, 
    court_opening_type_desc, 
    court_opening_desc,
    row_number() over(partition by c.court_id order by c.court_id) rn
  FROM court C
  JOIN court_email CE 
    ON C.court_id = CE.court_id
  JOIN court_opening CO 
    ON C.court_id = CO.court_id
  JOIN court_opening_type COT 
    ON CO.court_opening_type_id = COT.court_opening_type_id
  WHERE C.court_id = '" + court_id_no + "'
) src
order by court_id 
```

这样做是`row_number()`在原始查询中添加 a 和 by `court_id`。然后将`CASE`语句应用于要返回的字段，检查是否`row_number`等于 1。如果是，那么您将显示该列的值。如果不是，那么它将显示一个空字符串。

编辑#1：如果您只希望`Open`and`closed`值出现一次，您也可以`PIVOT`使用与此类似的数据：

```
SELECT c.court_id, 
  court_email_desc, 
  court_email_addr, 
  max(case when court_opening_type_desc = 'Court building open' then court_opening_desc end) Opens,
  max(case when court_opening_type_desc = 'Court building closed' then court_opening_desc end) Closes
FROM court C
JOIN court_email CE 
  ON C.court_id = CE.court_id
JOIN court_opening CO 
  ON C.court_id = CO.court_id
JOIN court_opening_type COT 
  ON CO.court_opening_type_id = COT.court_opening_type_id
WHERE C.court_id = '" + court_id_no + "'
group by c.court_id, court_email_desc, court_email_addr; 
```

编辑#2：如果您不使用单独的查询，我的最终建议是将`row_number()`and实现`PIVOT`到一个解决方案中：

```
SELECT court_id, 
  court_email_desc, 
  court_email_addr, 
  max(case when court_opening_type_desc = 'Court building open' and rn=1 then court_opening_desc end) CourtOpens,
  max(case when court_opening_type_desc = 'Court building closed' and rn=1 then court_opening_desc end) CourtCloses
FROM
(
    SELECT c.court_id, 
        court_email_desc, 
        court_email_addr, 
        court_opening_type_desc, 
        court_opening_desc,
        row_number() over(partition by c.court_id, court_opening_type_desc order by court_email_desc) rn
    FROM court C
    JOIN court_email CE 
      ON C.court_id = CE.court_id
    JOIN court_opening CO 
      ON C.court_id = CO.court_id
    JOIN court_opening_type COT 
      ON CO.court_opening_type_id = COT.court_opening_type_id
    WHERE C.court_id = '" + court_id_no + "'
) src
group by court_id, court_email_desc, court_email_addr; 
```

查询中的数据应显示如下：

```
court_id    | court_email_desc          | court_email_addr                      | CourtOpens    | CourtCloses
------------------------------------------------------------------------------------------------------------------------
1           | Bailiffs                  | bailiffs@bailiffs.email               | 8:30am        | 5:00pm
1           | Public Enquiries Email    | ccmcccustomerenquiries@pubenq.email   |               |
1           | Filing e-documents        | ccmcce-filing@filing.email            |               |
1           | Enquiries                 | enquiries@enquiries.email             |               |
1           | Hearings                  | hearings@hearings.email               |               | 
```

# context-free-grammar - 以下上下文无关语法生成的语言和补语？

> ID：14138600
> 
> 赞同：1
> 
> 时间：2013-01-03T12:04:46.283
> 
> 标签：context-free-grammar

```
G={ {S,A} , {a} , {S -> SAS | a , A -> aS | a} ,S} 
```

在答案部分，它写道：

> `L(G) = {a, a³, a⁴, a⁶, a⁷}` 和

L(G) 的补码写成： 。`{a², a⁵, a⁸, ...}`

请帮助我了解上述语言及其补语是如何生成的？

我的尝试/分析：

上述文法的字符串至少应包含 3 个 a（否？），如：`S-> SAS`, 替换`S --> a`，`A --> a`在其中我们得到 , `S --> aaa`。但解决方案`L(G)`从`a`.

请帮助我理解这个概念，还是我解释错了。

另外，请解释是否有任何标准方法可以从任何语法中找出语言？我用谷歌搜索了很多，但找不到一般程序。提前致谢。PS-我正在为即将到来的竞争性考试做准备。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-03T14:18:36.187

对于以下语法 G：

```
G = {{S, A}, {a}, {S -> SAS | a, A -> aS | a}, S} 
```

语言：

> `L(G) = {a, a³, a⁴, a⁶, a⁷}`是**不**正确的。

字符串 a ⁵也是可能的。

`a`是可能的，因为有生产`S --> a`，

`S`- 产品是

```
S --> SAS 
S --> a 
```

和`A`- 产品是

```
A --> a
A --> aS 
```

L(G) 中的每个字符串都从 生成`S`。要将任何句子形式转换为句子，您必须应用`A --> a`或应用`S --> a`（奇数长度 1）。

**从任何语法中找出语言的骗子方法**是“按顺序生成树”。：

`w`要生成大于一个长度的字符串`|w| > 1`，您必须使用生产规则`S --> SAS`。

```
 T1:            T2:

     s             S
    /|\           /|\
   / | \         / | \  
  S  A  S       S  A  S 
  |  |  |      /  / \  \
  a  a  a     a  |   |  a
                 a   a 
```

⁴之后的下一个最小可能字符串仅是⁵：

```
 T3:  

     s             
    /|\           
   / | \         
  S  A   s       
 /  / \  |\
a  |   | a \
   a   a    a 
```

所以⁵不能用`L(G)`' 的恭维语言。

**编辑：**

⁸的想法：

```
 T4:          

     s             
    /|\           
   / | \         
  S  A   S       
 /  / \   \
a  |   |   \
   a   a    T2 
```

来自 T2 的三个`a`+ 五个`a`s = 八个`a`s

**语法语言：**

> `L(G)`= 是 { | 其中} `a^n``n != 2`

*补*是唯一`L(G)`的`{aa}`！

# db2 - IBM DB2 9.7 免费监控工具

> ID：14138604
> 
> 赞同：0
> 
> 时间：2013-01-03T12:04:59.750
> 
> 标签：db2, profile, monitor

关于使用什么工具来监控 DB2 数据库有什么好的建议吗？我使用了 db2top 命令，但想知道是否有更多详细的工具。我们的数据库在 Linux64 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:54:58.623

作为工具，您可以使用内存跟踪器 db2mtrk，问题确定 db2pd。但您也可以使用许多其他东西，例如：

*   功能表
*   行政意见
*   获取快照
*   创建和激活事件监视器。

这真的取决于你要做什么。

此外，IBM Optim Performance Expert 是查找数据库中的瓶颈或问题的好工具。也是DBI豹哥。最后，Data Studio Web 控制台是监控少数元素的基本工具。

你想监控什么？可能在执行脚本的 cron 的帮助下，您可以做很多事情。

# android - Android WebView 禁用 PinchZoom 但保留 Controlls

> ID：14138606
> 
> 赞同：0
> 
> 时间：2013-01-03T12:05:01.843
> 
> 标签：android, webview, zooming

我有一个带有 WebView 的 android-app (Android SDK 10)。在那个 WebView 上，我必须使用具有固定位置的元素。现在我知道，固定元素存在问题，但 HTML 中的代码如下：

```
<meta name="viewport"
  content="width=100%; 
  initial-scale=1;
  maximum-scale=1;
  minimum-scale=1; 
  user-scalable=no;"> 
```

这对于 Webview：

```
WebView mWebView = (WebView) findViewById(R.id.webView1);
mWebView.getSettings().setBuiltInZoomControls(true);
mWebView.getSettings().setSupportZoom(true);
mWebView.setVerticalScrollBarEnabled(true);
mWebView.loadUrl("path/to.html"); 
```

使用缩放控件时我可以缩放。然而，多点触控和双指缩放会扭曲页面。

是否有可能禁用 pich- 和 multitouchzoom 但保持缩放控件正常工作？

* * *

在 Vikalp Patel 的建议下，我得出了这个解决方案：

```
CustomWebView mWebView = (CustomWebView) findViewById(R.id.webView1);
mWebView.loadUrl("path/to.html"); 
```

CustomWebView.java

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.webkit.WebView;

public class CustomWebView extends WebView {

    /**
     * Constructor
     */
    public CustomWebView(Context context) {
        super(context);
    }

    /**
     * Constructor
     */
    public CustomWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.webkit.WebView#onTouchEvent(android.view.MotionEvent)
     */
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (event.getPointerCount() > 1) {
            this.getSettings().setSupportZoom(false);
            this.getSettings().setBuiltInZoomControls(false);
        } else {
            this.getSettings().setSupportZoom(true);
            this.getSettings().setBuiltInZoomControls(true);
        }
        return super.onTouchEvent(event);
    }
} 
```

layout.xml 中的实现

```
<package.path.CustomWebView
   ...
 /> 
```

希望，这有助于某人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:18:59.610

我查看了 WebView 的源代码并得出结论，没有优雅的方法可以完成您的要求。

我最终做的是继承 WebView 并覆盖`OnTouchEvent`

. 在`OnTouchEvent`for 中`ACTION_DOWN`，我检查有多少指针正在使用`MotionEvent.getPointerCount()`。如果有多个指针，我调用`setSupportZoom(false)`，否则我调用`setSupportZoom(true)`。然后我打电话给`super.OnTouchEvent()`.

这将在滚动时有效地禁用缩放（从而禁用缩放控件）并在用户即将捏缩放时启用缩放。这不是一个很好的方法，但到目前为止它对我来说效果很好。

请注意，这`getPointerCount()`是在 2.1 中引入的，因此如果您支持 1.6，您将不得不做一些额外的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:23:00.403

```
Try to the following code

WebView mWebView = (WebView) findViewById(R.id.webView1);
mWebView.getSettings().setSupportZoom(true);
mWebView.setVerticalScrollBarEnabled(true);
mWebView.loadUrl("path/to.html"); 
```

# asp.net-mvc - MVC CodeFirst one to many relationship creates new data

> ID：14138614
> 
> 赞同：0
> 
> 时间：2013-01-03T12:05:32.107
> 
> 标签：asp.net-mvc, code-first

I'm using CodeFirst with MVC 3 and have these two classes:

```
public class Person
{
    public int PersonId { get; set; }

    [Email]
    [Required]
    public string Email { get; set; }

    public string Passwort { get; set; }

    public virtual City City { get; set; }
}

public class City
{
    public int CityId { get; set; }

    [Required]
    public string Name { get; set; }

    public virtual IEnumerable<Person> Persons { get; set; }       
} 
```

When adding a new person I want to reference a city to this person. Therefore i'm using a SelectList with all cities in my view. The CityId and the object is transferred correctly to the Post-method, but when saving the changes to the database I will have a new object in the city-table (with same name, but new Id). I suggest there's something wrong with the relations in my models. Maybe somebody can help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:34:53.347

如果您为`Person`模型提供显式`CityId`属性，则无需`City`从存储库中检索对象，只需将`CityId`值直接分配给`Person`对象并保存即可。对于非常简单的视图，您也不需要使用视图模型，您可以在操作方法中接收一个`Person`实例并且已经被分配，假设视图中的 html 字段具有相同的名称。`POST``CityId`

这应该可以解决您的问题，因为您将知道您正在明确使用已经存在的 CityId。

无论如何，您的数据库已经包含一个`Person.City_CityId`字段，因此您不会创建任何新内容，只是让您自己更好地控制情况。有时您可能需要`[ForeignKey]`在模型中使用属性将`Person.CityId`属性与虚拟属性连接起来，但使用标准命名约定，这不是必需的。

# php - PHP 为什么在构造中启动 db connect 不好？

> ID：14138617
> 
> 赞同：5
> 
> 时间：2013-01-03T12:05:34.873
> 
> 标签：php, object

当我遇到这段代码时，我正在阅读一篇博客文章：

```
<?php
include_once 'config.php';
class User
{
//Database connect 
public function __construct() 
{
$db = new DB_Class();
} 
```

在评论中，有人发布了以下内容：

永远不要在构造函数中启动数据库连接

但与所有评论战士一样，他们从不给出原因？为什么这是错误的或不好的做法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:09:27.440

[构造函数不应该做任何实际的工作](http://misko.hevery.com/code-reviewers-guide/flaw-constructor-does-real-work/)：

> 在构造函数中工作，例如：创建/初始化协作者，与其他服务通信，以及设置自己的状态的逻辑删除测试所需的接缝，强制子类/模拟继承不需要的行为。构造函数中的过多工作会阻止实例化或更改测试中的协作者。

相反，使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)并将任何协作者传递给构造函数。这将创建更容易测试的代码。当您在 ctor 中进行某些操作时，使用[Test Double](http://en.wikipedia.org/wiki/Test_double)`new`模拟/存根要困难得多。

此外，通过注入协作者，您可以更轻松地更换具有不同实现的协作者，从而减少[耦合](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)，促进[代码重用](http://en.wikipedia.org/wiki/Code_reuse)和[针对接口而不是具体实现进行编码](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface?rq=1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:16:33.837

将数据库的实例传递给称为“依赖注入”的构造函数。这样做是为了解耦对象，这意味着降低对象之间的依赖关系。解耦的好处之一是系统具有更大的灵活性、更容易维护和编写单元测试。

但是，如果您使用设计模式、实践测试驱动开发和明确定义的架构（例如在域驱动设计中实践）来构建软件，您可以享受所有这些好处。

但是，如果您只是开始探索开发软件的 OOP 方式或刚开始学习一般的编程 - 也许您现在不应该为这些问题烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:10:22.237

我认为在构造函数中初始化数据库连接违反了构造函数的一般合同。当您`new User()`希望获得描述用户的对象时。如果这需要一个有效的数据库连接，如果建立连接失败，对象的状态是什么？构造函数不应该抛出异常，因为它的唯一目的是确保正确的对象状态。（至少这是我的观点......我知道其他人不认为构造函数的异常是坏的。但是，我这样做。）

此外：如果数据库连接被封装在一个对象中，则不能重用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:13:20.823

在这种特殊情况下，可能是处理用户数据的模型，它可能非常有用。但是如果你突然想要这个类是可移植的并且可以使用不同的数据库呢？当我想将我的用户管理器类用于不同的项目时，我自己也遇到了这个问题。

# java - java.lang.NoClassDefFoundError: com/itextpdf/text/DocumentException

> ID：14138623
> 
> 赞同：15
> 
> 时间：2013-01-03T12:05:59.873
> 
> 标签：java, itext, weblogic8.x

我正在尝试通过以下 servlet 生成动态 PDF 文件。

```
import java.io.*;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
// Document Object
import com.itextpdf.text.Document;
//For adding content into PDF document
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PdfWriter;
import com.itextpdf.text.DocumentException;

public class CreatePDFExample extends HttpServlet {

    //invoked from doGet method to create PDF through servlet 
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    //Set content type to application / pdf
    //browser will open the document only if this is set
    response.setContentType("application/pdf");
    //Get the output stream for writing PDF object        
    OutputStream out=response.getOutputStream();
    try {
        Document document = new Document();
        /* Basic PDF Creation inside servlet */
        PdfWriter.getInstance(document, out);
        document.open();
        document.add(new Paragraph("Tutorial to Generate PDF using Servlet"));
        document.add(new Paragraph("PDF Created Using Servlet, iText Example Works"));
        document.close();
    }
            catch (DocumentException exc){
            throw new IOException(exc.getMessage());
            }
    finally {            
        out.close();
    }
}
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
public String getServletInfo() {
    return "This Servlet Generates PDF Using iText Library";
}
} 
```

但我收到以下错误：

```
Error 500--Internal Server Error

java.lang.NoClassDefFoundError: com/itextpdf/text/DocumentException
at CreatePDFExample.processRequest(CreatePDFExample.java:24)
at CreatePDFExample.doPost(CreatePDFExample.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
at weblogic.servlet.internal.ServletStubImpl$ServletInvocationAction.run(ServletStubImpl.java:1053)
at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:387)
at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:305)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:6310)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:317)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:118)
at weblogic.servlet.internal.WebAppServletContext.invokeServlet(WebAppServletContext.java:3622)
at weblogic.servlet.internal.ServletRequestImpl.execute(ServletRequestImpl.java:2569)
at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:197)
at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:170) 
```

我正在使用**weblogic 应用程序服务器 8.1** .... 我正在使用**iTextPDF**。所以我已经为 jar 文件设置了 CLASSPATH。

```
CLASSPATH:
D:\itextpdf-5.3.4.jar;D:\servlet-2-3.jar;.;

PATH:
C:\Program Files (x86)\Java\jdk1.6.0_14\bin;.; 
```

请告诉我为什么我会收到此错误？？？？我为此花了很多时间。没有遇到小问题。请帮助我。

谢谢

做完建议的事情后。我收到以下错误

```
 Error 500--Internal Server Error

 java.lang.ExceptionInInitializerError
at com.itextpdf.text.pdf.PdfWriter.(PdfWriter.java:1403)
at CreatePDFExample.processRequest(CreatePDFExample.java:26)
at CreatePDFExample.doPost(CreatePDFExample.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
at weblogic.servlet.internal.ServletStubImpl$ServletInvocationAction.run(ServletStubImpl.java:1053)
at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:387)
at weblogic.servlet.internal.ServletStubImpl.invokeServlet(ServletStubImpl.java:305)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:6310)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:317)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:118)
at weblogic.servlet.internal.WebAppServletContext.invokeServlet(WebAppServletContext.java:3622)
at weblogic.servlet.internal.ServletRequestImpl.execute(ServletRequestImpl.java:2569)
at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:197)
at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:170)
 Caused by: java.lang.NullPointerException
at java.lang.Class.privateGetDeclaredFields(Class.java:1488)
at java.lang.Class.getDeclaredFields(Class.java:1073) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T17:15:57.277

上一个答案告诉您缺少一个 jar，这是一个不错的猜测，因为错误消息清楚地表明找不到 iText 类之一。

不幸的是，该错误消息具有误导性。Java 还表示，如果有任何歧义，它就无法找到一个类。如果您的 CLASSPATH 中有多个 iText jar，就会出现这种情况。

通过将另一个 iText jar 添加到您的 CLASSPATH 中，您使问题变得更糟。现在您遇到了一个问题，这是由于您的 weblogic 实例中有两个不同版本的 iText 可用于 JVM。

搜索所有 CLASSPATH，不要忘记服务器 CLASSPATH，您会发现 D:\itextpdf-5.3.4.jar 并不是 weblogic 寻找 PdfWriter 类的唯一地方。从 CLASSPATH 中删除所有 iText jar，直到只剩下一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T12:13:52.620

您需要放入 Web 应用程序的类路径，而不是系统类路径。

将 jar 文件放在类路径中以便您的服务器可以在运行时获取它的最简单方法是：

**把`itextpdf-5.3.4.jar`里面的**

**`YOUR_WEBAPP_ROOT --> WEB-INF --> lib` 文件夹**

所以现在你的 jar 文件应该出现在这里

`YOUR_WEBAPP_ROOT --> WEB-INF --> lib --> itextpdf-5.3.4.jar`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T12:10:17.787

将您的库添加到您的战争中，在 WEB-INF/lib 文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-22T16:33:01.173

就我而言，iText v.2.1.7 有效，我尝试了 5.5.3 和 5.5.4，但没有成功。

摘自 Primefaces V.5.0 用户指南，第 12 页“依赖项”

“列出的版本（itext 2.1.7、apache poi 3.7）已经过测试并且已知可与 PrimeFaces 一起使用，这些依赖项的其他版本也可能有效但未经测试。”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T02:58:46.197

在我的情况下，你在我的**pom.xml中使用它**

```
<dependency>
    <groupId>com.lowagie</groupId>
    <artifactId>itext</artifactId>
    <version>2.1.7</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-20T05:44:59.983

我遇到了类似的问题。在一个系统上，它的 pdf 生成工作正常，而在另一个系统上，我遇到了这个异常。经过一番调查后，我发现工作服务器的 itext-2.1.7.js6.jar 大小为 1105KB，而不工作的服务器有 12Kb。我用小尺寸的罐子代替了罐子，它开始工作正常。不知道我最终是如何得到具有两种不同尺寸的相同版本的 jar 的。希望这可以帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-12-21T23:02:00.277

我有一个简单的行动来解决你的错误你必须从现有的 jar 文件中创建一个新的“插件”你将这个集成到你的运行配置器中并最终使用这个插件，比如 librairie 我检查了这个解决方案，它可以正常工作

# ruby-on-rails - rails guard 正在寻找 spec 文件夹，但没有 spec 文件夹

> ID：14138628
> 
> 赞同：2
> 
> 时间：2013-01-03T12:06:18.813
> 
> 标签：ruby-on-rails, rspec, cucumber, guard

这是第一次，我正在尝试 BDD 和测试，我正在通过查看教程来尝试事情，我的问题是我发现警卫正在寻找其警卫文件中定义的 spec 文件夹，但没有 spec 文件夹，我有测试文件夹。

当我跑步时

`guard`

它尝试加载规范文件夹，但没有规范文件夹。可以编辑保护文件以查找测试文件夹而不是规范文件夹吗？

我应该进行 rspec 安装吗？

`rails g rspec install`

找不到生成器 rspec。

我的宝石文件

```
source 'https://rubygems.org'

gem 'rails',     path: '/home/phanindra/rails'
gem 'journey', git: 'https://github.com/rails/journey.git'
gem 'arel',      git: 'https://github.com/rails/arel'
gem 'activerecord-deprecated_finders', git: 'https://github.com/rails/activerecord-deprecated_finders'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sprockets-rails', git: 'https://github.com/rails/sprockets-rails'
  gem 'sass-rails',   git: 'https://github.com/rails/sass-rails'
  gem 'coffee-rails', git: 'https://github.com/rails/coffee-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', platforms: :ruby

  gem 'uglifier', '>= 1.0.3'
end
gem 'rb-inotify', '~> 0.8.8'
gem 'jquery-rails'

# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks
gem 'turbolinks'

group :test, :development do
  gem 'cucumber-rails', :require => false
  gem 'database_cleaner'
  gem 'rspec'
  gem 'spork'
  gem 'guard'
  gem 'guard-rspec'
  gem 'launchy'
end

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano', group: :development

# To use debugger
# gem 'debugger' 
```

我的保护文件

```
# A sample Guardfile
# More info at https://github.com/guard/guard#readme

guard 'rspec' do
  watch(%r{^spec/.+_spec\.rb$})
  watch(%r{^lib/(.+)\.rb$})     { |m| "spec/lib/#{m[1]}_spec.rb" }
  watch('spec/spec_helper.rb')  { "spec" }

  # Rails example
  watch(%r{^app/(.+)\.rb$})                           { |m| "spec/#{m[1]}_spec.rb" }
  watch(%r{^app/(.*)(\.erb|\.haml)$})                 { |m| "spec/#{m[1]}#{m[2]}_spec.rb" }
  watch(%r{^app/controllers/(.+)_(controller)\.rb$})  { |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] }
  watch(%r{^spec/support/(.+)\.rb$})                  { "spec" }
  watch('config/routes.rb')                           { "spec/routing" }
  watch('app/controllers/application_controller.rb')  { "spec/controllers" }

  # Capybara features specs
  watch(%r{^app/views/(.+)/.*\.(erb|haml)$})          { |m| "spec/features/#{m[1]}_spec.rb" }

  # Turnip features and steps
  watch(%r{^spec/acceptance/(.+)\.feature$})
  watch(%r{^spec/acceptance/steps/(.+)_steps\.rb$})   { |m| Dir[File.join("**/#{m[1]}.feature")][0] || 'spec/acceptance' }
end 
```

[按照找不到生成器 rspec:install](https://stackoverflow.com/questions/3426406/could-not-find-generator-rspecinstall)上的答案。 我已将 rspec-rails 添加到我的 gem 文件并进行了捆绑安装，然后 rspec 生成器工作并生成了 spec 文件夹。

但它在测试文件夹中没有任何文件夹，如夹具或验收或功能等！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:38:03.813

根据官方文档（https://github.com/rspec/rspec-rails#install），我认为你应该运行：

```
# not: rails g rspec install
rails generate rspec:install 
```

生成“spec”文件夹和“spec/spec_helper.rb”文件和其他相关内容。

# ajax - 从 ajax 调用控制器方法（ASP MVC3）方法不起作用

> ID：14138633
> 
> 赞同：0
> 
> 时间：2013-01-03T12:06:36.150
> 
> 标签：ajax, asp.net-mvc-3

我使用以下语法从 ASP 页面调用控制器方法。

```
$.ajax({
             url: 'ControllerName/MethodName',
             type: 'POST',
             contentType: 'application/json;',
             data: JSON.stringify({ param: param1}),
             success: function () {
                 alert("Success!!!");
             },
             error: function () {
                 alert("Failed!!!");
             }
         }); 
```

我有两个 ASP 页面（视图），都具有相同的控制器。如果我从第一页调用上述方法，控制器方法将被成功调用。但是，如果从第二页调用相同的方法，我会收到警报消息“失败”。我也尝试使用 GET 类型，尝试使用其他控制器方法等等。从第二个视图不会调用任何内容。谁能帮助我有什么问题？我是 MVC 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:17:28.627

尝试将内容类型更改为：

```
contentType: 'application/json; charset=utf-8' 
```

或/并使用 mvc 帮助器指定 url，例如：

```
url: @Url.Action("action"), 
```

在我的示例中有效。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:14:19.080

由于您的 ajax 期望来自 Controller 方法的 JSON 数据的结果，您是否返回 Json(data, JsonRequestBehavior.AllowGet)？

# xquery - 是否可以通过文件和方向的组合进行排序？

> ID：14138634
> 
> 赞同：0
> 
> 时间：2013-01-03T12:06:41.357
> 
> 标签：xquery, marklogic

是否可以通过文件和方向的组合进行排序？IE：

```
let $list := (<a id="1">A</a>, <a id="2">A</a>, <a id="3">B</a>)
let $ordered :=
    for $item in $list
        order by $item/text ascending, $item/@id descending
        return fn:data($item/@id)
return 
    if(fn:deep-equal((2,1,3),$ordered)) then "PASS" else "FAIL" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:41:57.743

您正在对（这意味着里面`$item/text`的元素）进行排序，而不是根据函数处理的内容进行排序。`<text/>``$item``$item/text()`

```
let $list := (<a id="1">A</a>, <a id="2">A</a>, <a id="3">B</a>)
for $item in $list
  order by $item/text() ascending, $item/@id descending
  return fn:data($item/@id) 
```

将产生所需的输出`(2,1,3)`。

# python - 绕过不可变字符串python

> ID：14138635
> 
> 赞同：0
> 
> 时间：2013-01-03T12:06:43.430
> 
> 标签：python

好的，我开始编码：

```
lastentry = 'first'
campdata = {'a1'=0,
            'b2'=0}

class Someclass:
      def on_window1_destroy(self, widget, data=None):
           print campdata

      def func1(self)
          lastentry = 'b2'

      def func2(self)
          lastentry = 'a1'

      def func2(self)
          campdata[lastcall] +=1 
```

但后来我发现python字符串（和整数）是不可变的......

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:13:42.967

我猜你的问题是你想`lastentry`通过调用`func1`or来改变全局变量的值`func2`，这是行不通的。它不起作用的原因是因为变量在全局范围内，并且在函数内部分配相同的名称只会创建一个与全局变量同名的局部变量。要分配给全局变量，您需要将其声明为：

```
lastentry = "something"

def func1():
    global lastentry #tell python to treat references to lastentry as global
    lastentry = "somethingelse" 
```

请注意，如果您对全局值所做的所有操作都是像在第三个函数中那样*读取*它，则您不需要这样做。但是，如果您分配给一个变量，则它被视为其范围的本地 - 通常是周围的函数 - 如果您没有明确声明它是全局的（或在 python3 中是非本地的）。

全局变量只应在必要时使用，因为它们会增加代码的复杂性。在您的情况下，您可能可以重构代码以使用实例变量或类变量作为 lastentry 而不是全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:09:18.447

我看不出你的代码有任何问题（除了一些细节）。在这里，字符串不变性似乎不是问题。

您可能想要编写，而不是问题中的代码：

```
campdata = {'a1': 0,  # Not "= 0"
            'b2': 0} 
```

和

```
campdata[lastentry] +=1  # not "lastcall" 
```

此外，正如 l4mpi 所提到的，您需要`global lastentry`在修改它的方法中使用 a 。

还有一点：依赖全局变量是很不寻常的。如果可能的话，最好使用实例属性（`self.campdata`, `self.lastentry`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:09:51.150

就像其他人所说的那样，似乎没有任何尝试修改代码中的字符串，所以这几乎不是问题。

也就是说，`lastcall`看起来是随机的，应该是`lastentry`吗？

# android - 在活动之间移动课程可能出现的问题

> ID：14138636
> 
> 赞同：0
> 
> 时间：2013-01-03T12:06:44.320
> 
> 标签：android, class, arraylist

我会尽量做到具体。我创建了正在填充 xml 文件的自定义对象类。这些课程是针对机器人的，机器人有武器和盔甲等。我将机器人的每次迭代都存储在一个数组列表中。然后，我将使用有关机器人的信息填充列表视图（自定义列表适配器）。当您单击机器人的不同部分时，它会显示哪些武器装甲等附加到这些组件上。这一切都很好，并且不知何故随机事情停止了工作。它几乎就像应用程序在活动之间传递时丢失数据或 GC 正在删除一些数据一样。我一直在努力弄清楚为什么它突然显示错误的数据或数据丢失。我真的希望我可以在这里发布代码，但实际上我的整个应用程序现在都遇到了这个问题。我想我的问题是。我是否将自定义对象正确存储在数组列表中。或者是他们不同的方法。我什至不知道从哪里开始调试它，因为它曾经可以工作。

```
private Mech loadMDF(Mech mech) {

    MechComponents mechComponents = null;
    String mechfile = "";
    String name = "";
    float HP = 0;
    int maxSlots = 0;
    try {
        XmlPullParserFactory factory;

        factory = XmlPullParserFactory.newInstance();
        factory.setNamespaceAware(true);
        XmlPullParser xpp = factory.newPullParser();
        // FileInputStream fis = new FileInputStream(file);

        // set the input for the parser using an InputStreamReader
        // xpp.setInput(new InputStreamReader(fis));
        xpp.setInput(getResources().getAssets().open(mech.mdf), null);
        int eventType = xpp.getEventType();

        while (eventType != XmlPullParser.END_DOCUMENT) {
            if (eventType == XmlPullParser.START_DOCUMENT) {

            } else if (eventType == XmlPullParser.START_TAG) {
                if (xpp.getName().equals("MechDefinition")) {
                    for (int i = 0; i < xpp.getAttributeCount(); i++) {
                        if (xpp.getAttributeName(i).equals("HardpointPath")) {
                            boolean found = false;
                            String[] theFilename = xpp.getAttributeValue(i)
                                    .split("/");
                            for (int n = 0; n < MechHardPointFiles.size(); n++) {
                                if (MechHardPointFiles.get(n).equals(
                                        theFilename[theFilename.length - 1])) {
                                    found = true;
                                }
                            }
                            if (!found) {
                                MechHardPointFiles
                                        .add(theFilename[theFilename.length - 1]);
                                loadMechFile(theFilename[theFilename.length - 1]);
                            }
                            mechfile = theFilename[theFilename.length - 1];

                        }
                    }
                }
                if (xpp.getName().equals("Mech")) {
                    for (int i = 0; i < xpp.getAttributeCount(); i++) {
                        if (xpp.getAttributeName(i).equals("MaxTons")) {
                            mech.MaxTons = Float.parseFloat(xpp.getAttributeValue(i));

                        }
                        if (xpp.getAttributeName(i).equals("BaseTons")) {
                            mech.BaseTons = Float
                                    .parseFloat(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("CanEquipECM")) {
                            mech.setCanEquipECM(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("MaxJumpJets")) {
                            mech.MaxJumpJets = xpp.getAttributeValue(i);
                        }
                        if (xpp.getAttributeName(i).equals("LeftArmAim")) {
                            // mech.MaxTons =
                            // Float.parseFloat(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("RightArmAim")) {
                            // mech.MaxTons =
                            // Float.parseFloat(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("MinEngineRating")) {
                            mech.MinEngineRating = Integer.parseInt(xpp
                                    .getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("MaxEngineRating")) {
                            mech.MaxEngineRating = Integer.parseInt(xpp
                                    .getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("MaxJumpJets")) {
                            mech.setCanEquipECM(xpp.getAttributeValue(i));
                        }

                    }
                }
                if (xpp.getName().equals("Component")) {
                    mechComponents = new MechComponents();
                    for (int i = 0; i < xpp.getAttributeCount(); i++) {

                        if (xpp.getAttributeName(i).equals("Name")) {

                            name = helperObjects.checkForSpace(xpp
                                    .getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("HP")) {
                            HP = Float.parseFloat(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("Slots")) {
                            maxSlots = Integer.parseInt(xpp.getAttributeValue(i));
                        }

                    }
                }
                if (xpp.getName().equals("Internal")) {

                    for (int i = 0; i < xpp.getAttributeCount(); i++) {

                        if (xpp.getAttributeName(i).equals("Name")) {
                            mechComponents.addToSlot(xpp.getAttributeValue(i));
                        }

                    }
                }
                if (xpp.getName().equals("Hardpoint")) {
                    int hpType = 0;
                    int hpSlots = 0;
                    for (int i = 0; i < xpp.getAttributeCount(); i++) {

                        if (xpp.getAttributeName(i).equals("Type")) {

                            hpType = Integer.parseInt(xpp.getAttributeValue(i));
                        }
                        if (xpp.getAttributeName(i).equals("ID")) {
                            for (int f = 0; f < MechHardPoints.size(); f++) {
                                if (MechHardPoints.get(f).hpFile.equals(mechfile)) {
                                    if (MechHardPoints.get(f).id == Integer
                                            .parseInt(xpp.getAttributeValue(i))) {
                                        hpSlots = MechHardPoints.get(f).Slots;

                                        break;
                                    }
                                }
                            }

                        }

                    }
                    mechComponents.addHardPointRestriction(new HardPointRestriction(
                            hpType, hpSlots));
                }

            } else if (eventType == XmlPullParser.END_TAG) {
                if (xpp.getName().equals("Component")) {
                    mechComponents.name = name;
                    mechComponents.HP = HP;
                    mechComponents.maxSlots = maxSlots;
                    mech.components.add(mechComponents);
                    Log.i("mwo_app",
                            "Hard Point Check: "
                                    + Integer.toString(mechComponents
                                            .getHardPointRestrictions().size()));
                }

            } else if (eventType == XmlPullParser.TEXT) {

            }

            eventType = xpp.next();
        }

    } catch (XmlPullParserException e) {

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }

    return mech;
} 
```

这是我用来切换活动的另一个片段

```
inte = new Intent(MainActivity2.this, MechView.class);
                Bundle b = new Bundle();
                b.putSerializable("com.typhonpacific.mwoapp.mech",
                        mechListAdapter.getItem(arg2));
                inte.putExtras(b);
                startActivity(inte); 
```

# ruby-on-rails - libffi.so.5：无法打开共享对象文件

> ID：14138643
> 
> 赞同：10
> 
> 时间：2013-01-03T12:07:44.213
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我从 Rails 3.0.11 升级到 3.1.3。当我启动服务器时，它给出了错误：

```
>> Using rack adapter
rake aborted!
libffi.so.5: cannot open shared object file: No such file or directory - /home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi_c.so    
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `block in require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `block in load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:640:in `new_constants_in'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi.rb:11:in `rescue in <top (required)>'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/ffi-1.0.11/lib/ffi.rb:2:in `<top (required)>'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'   
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `block in require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `block in load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:640:in `new_constants_in'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/ethon-0.5.3/lib/ethon.rb:2:in `<top (required)>'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `block in require'    
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `block in load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:640:in `new_constants_in'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:223:in `load_dependency'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.1.4/lib/active_support/dependencies.rb:240:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/typhoeus-0.5.3/lib/typhoeus.rb:2:in `<top (required)>'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'  
/home/srikanth/.rvm/gems/ruby-1.9.3-p125/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'  
/home/srikanth/projects/tango/config/application.rb:19:in `<top (required)>'  
/home/srikanth/projects/tango/Rakefile:8:in `require'  
/home/srikanth/projects/tango/Rakefile:8:in `<top (required)>'  
(See full trace by running task with --trace) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T14:17:10.827

也许 ffi gem 没有正确安装？

```
gem uninstall ffi 
```

假设您使用的是 Ubuntu：

```
sudo apt-get install libffi libffi-dev
gem install ffi -v 1.0.11 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T12:16:58.857

因为我已经安装了“ffi”。我必须找到另一个解决方案，试试下面（这对我有帮助）：

找到文件“libffi.so.5”，如果不存在，请检查“libffi.so”。（在我的情况下是 6，即 libffi.so.6）。

现在取消链接与“/usr/lib64/libffi.so.6”关联的文件。（在我的例子中，它指向“libffi.so.6.0.1”）

现在为“libffi.so.5”创建一个新的符号链接，这样“/usr/lib64/libffi.so.5”应该指向新的符号链接“libffi.so.6.0.1”。

即，最终设置应如下所示：-“/usr/lib64/libffi.so.5 -> libffi.so.6.0.1”

希望这会有所帮助。（我使用基于 Amazon Linux AMI 的实例。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-23T12:06:14.787

这对我有用。

`ln -s /usr/lib64/libffi.so.6 /usr/lib64/libffi.so.5`

# java - 来自匿名静态实例的私有实例成员访问

> ID：14138645
> 
> 赞同：17
> 
> 时间：2013-01-03T12:07:50.407
> 
> 标签：java, static, enums, private

考虑以下代码：

```
enum E {
    A { public int get() { return i; } },
    B { public int get() { return this.i; } },
    C { public int get() { return super.i; } },
    D { public int get() { return D.i; } };

    private int i = 0;
    E() { this.i = 1; }
    public abstract int get();
} 
```

我在前 2 个枚举常量声明（A 和 B）上得到编译时错误，但最后 2 个编译正常（C 和 D）。错误是：

> A 行上的错误 1：无法从静态上下文中引用非静态变量 i
> B 行上的错误 2：我在 E 中具有私有访问权限

由于`get`是实例方法，我不明白为什么我不能`i`以我想要的方式访问实例变量。

注意：`private`从声明中删除关键字`i`也会使代码可编译，我也不明白。

使用 Oracle JDK 7u9。

**编辑**

正如评论中所指出的，这并不特定于枚举，下面的代码会产生相同的行为：

```
class E {
    static E a = new E() { public int get() { return i; } };
    static E b = new E() { public int get() { return this.i; } };
    static E c = new E() { public int get() { return super.i; } };
    static E d = new E() { public int get() { return d.i; } };

    private int i = 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T17:39:05.043

观察到的行为是由 Java 语言规范规定的，特别是对封闭类型字段的隐式访问，以及不继承私有成员的规则。

**不合格的现场访问**

```
A { public int get() { return i; } } 
```

规范[要求](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1)：

> 枚举常量的可选类主体隐式定义了一个匿名类声明（第 15.9.5 节），该声明扩展了直接封闭的枚举类型。类主体由匿名类的通常规则管理；特别是它不能包含任何构造函数。

这使得表达式`i`有点模棱两可：我们指的是封闭实例的字段，还是内部实例？唉，内部实例[不继承字段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.2)：

> 声明为私有的类的成员不会被该类的子类继承。

因此，编译器得出结论，我们的意思是访问封闭实例的字段 - 但在静态块中，*没有*封闭实例，因此出现错误。

**通过现场访问`this`**

```
B { public int get() { return this.i; } }, 
```

规范[要求](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.3)：

> 当用作主要表达式时，关键字 this 表示一个值，该值是对调用实例方法的对象（第 15.12 节）或正在构造的对象的引用。

因此，很明显我们想要的是内部类的字段，而不是外部类。

编译器拒绝字段访问表达式的原因`this.i` [是](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.2)：

> 声明为私有的类的成员不会被该类的子类继承。

也就是说，私有字段只能通过声明该字段的类型的引用而不是其子类型来访问。确实，

```
B { public int get() { return ((E)this).i; } }, 
```

编译就好了。

**通过超级访问**

像这样，super[指](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.11.2)的是调用该方法的对象（或正在构造的对象）。因此很明显，我们指的是内部实例。

此外， super 是 type `E`，因此声明可见。

**通过其他字段访问**

```
D { public int get() { return D.i; } }; 
```

在这里，是对 中声明`D`的静态字段的非限定访问。由于它是一个静态字段，使用哪个实例的问题没有实际意义，并且访问有效。`D``E`

然而，它非常脆弱，因为只有在完全构造枚举对象后才分配该字段。如果有人在构造过程中调用 get() ，`NullPointerException`则会抛出 a 。

**推荐**

正如我们所见，访问其他类型的私有字段会受到一些复杂的限制。由于很少需要，开发人员可能没有意识到这些微妙之处。

虽然制作字段`protected`会削弱访问控制（即允许包中的其他类访问该字段），但可以避免这些问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T14:36:22.680

看一下这段代码：

```
public class E 
{
  final int i;
  private final int j;
  final E a;

  E() { i = j = 0; a = null; }

  E(int p_i) {
    this.i = this.j = p_i;
    a = new E() {
      int getI() { return i; }
      int getJ() { return j; }
    };
  }

  int getI() { throw new UnsupportedOperationException(); }
  int getJ() { throw new UnsupportedOperationException(); }

  public static void main(String[] args) {
    final E ea = new E(1).a;
    System.out.println(ea.getI());
    System.out.println(ea.getJ());
  }
} 
```

这打印

```
0
1 
```

和之间**的****唯一区别是访问级别！`i``j`**

这令人惊讶，但这是正确的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:18:10.397

**更新**

看起来确实是因为它是在静态块中定义的。看看以下内容：

```
 private E works = new E("A", 0) {

        public int get() {
            return i; // Compiles
        }
    };

    static {
        A = new E("A", 0) {

            public int get() {
                return i; // Doesn't Compile
            }

        };
    } 
```

* * *

**原来的**

我编译了枚举，然后使用 Jad 对其进行反编译以查看代码的样子：

```
static abstract class E extends Enum
{

    public static E[] values()
    {
        return (E[])$VALUES.clone();
    }

    public static E valueOf(String s)
    {
        return (E)Enum.valueOf(Foo$E, s);
    }

    public abstract int get();

    public static final E A;
    private int i;
    private static final E $VALUES[];

    static
    {
        A = new E("A", 0) {

            public int get()
            {
                return A.i;
            }

        }
;
        $VALUES = (new E[] {
            A
        });
    }

    private E(String s, int j)
    {
        super(s, j);
        i = 0;
        i = 1;
    }

} 
```

这让我更清楚的是，它`A`是在type**的静态 init 块中定义的匿名内部类**`E`。在匿名内部类中寻找私有成员的可见性，我在这个答案中找到了以下内容（[为什么在匿名类中只有最终变量可以访问？](https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class)）：

> 当您创建匿名内部类的实例时，该类中使用的任何变量都会通过自动生成的构造函数复制其值。这避免了编译器必须自动生成各种额外类型来保存“局部变量”的逻辑状态，例如 C# 编译器

从这里我认为它`A.i`引用了 A 中的这个复制变量，而不是`i`在 E 中声明。获得 E 中的唯一方法`i`是它是静态的还是非私有的。

* * *

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:22:45.347

`private`可以在同一个类文件中提供的嵌套类中访问方法。

出于这个原因，即使 A 是 E 的匿名子类，第一个示例仍然有效。很好奇为什么第二个示例无法编译，但我怀疑它是误导性错误消息，因为您可以这样做

```
A { public int get() { return super.i; } }; 
```

编译但

```
A { public int get() { return i; } }; 
```

给

```
error: non-static variable i cannot be referenced from a static context 
```

`super.i`如果这是一个静态上下文，这显然是不正确的。

正如马尔科所说

```
A { public int get() { return this.i; } }; 
```

产生错误信息

```
error: i has private access in E 
```

这可能更合适。即，您可以显式访问该字段，但不能隐式访问。

# php - PHP：simplexml - 获取属性值

> ID：14138654
> 
> 赞同：0
> 
> 时间：2013-01-03T12:08:50.760
> 
> 标签：php, attributes, simplexml

```
<guid isPermaLink="false">

<title>iphone cover 4</title>

<media:price>$35.95</media:price>

<media:thumbnail url="http://rlv.zcache.com/22.jpg"/>

<media:content url="http://rlv.zcache.com/440.jpg"/> 
```

上面是我要读取的xml文件，我可以得到**title**、**media price**甚至**Guid的isPermalink**属性。但我无法获取**media:thumbnail 属性** 下面是我的代码。

```
foreach ($xml->channel->item as $cool)
{
    $per = $cool->guid["isPermaLink"];
    $thumb = $cool->children('media', true)->price;
    $title = $cool->title;
    $thumb = $cool->children('media', true)->thumbnail["url"];
} 
```

如何获取**media:thumbnail 属性**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:19:22.847

尝试循环浏览缩略图属性

```
foreach ($cool->children('media', true)->thumbnail as $thumb) {
   $URL = $thumb['url']
} 
```

# web-services - 在不使用 JSONP 的情况下本地测试不同端口上的 Web 服务

> ID：14138655
> 
> 赞同：0
> 
> 时间：2013-01-03T12:08:53.243
> 
> 标签：web-services, node.js, angularjs

我目前正在为使用 node.js 托管的 AngularJS 前端编写 Web 服务（使用 node.js）

它稍后将通过 domain.com/api 下的代理提供，因此我不需要 JSONP。

出于本地测试目的，我的 AngularJS 应用程序在 localhost:80 上运行，我的 node.js 后端在 localhost:3000 上运行。自然我无法查询 json 请求。容易

什么是在本地测试我的主页而不在我的设置中搞太多的最佳设置？

我目前正在研究窗户。如果 Linux 更容易，它也是一种选择。

是否可以为 express 编写一个在同一域中托管两个应用程序的简单代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:30:47.413

您可以使用 hosts 文件将 domain.com/api 设置为 localhost。这是`/etc/hosts`在 Linux 中完成的，但它也存在于 Windows 中。对我有很大帮助的另一件事是 ssh 隧道。例如，您可以将远程端口（您的后端正在运行的地方）通过隧道连接到 localhost`ssh -L localPort:your.server:remotePort`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:54:00.590

这并不完全符合您的要求，但最简单的方法可能是让 node.js 应用程序也为 AngularJS 应用程序提供服务。它非常有效，肯定足以用于开发。

如果它是一个 expressjs 应用程序，你可以添加

```
app.use(express['static'](__dirname + "/public")); 
```

在其他路线之前，让它在 ./public/ 中查找静态文件

如果您的应用程序由您无法在 node.js 中轻松复制的模板或构建系统提供服务，那么另一种选择是在某个端口（80 或 5000 或 ...）上运行 nginx、apache 或 haproxy 并拥有它代理到应用程序的当前后端服务器和 API/数据请求的端口 3000（node.js 应用程序）。

您甚至可以让您的服务器当前在端口 80 上运行来执行此操作。

作为最后的想法，您还可以将 node.js 应用程序设置为“应用程序文件”的代理端口 80。

*编辑*- 我刚刚意识到您的两个应用程序都是用 node.js 编写的。是否可以设置它以便您在生产中单独运行它们但在开发中一起运行？将所有真正的功能放在模块中，然后拥有三个单独的“加载器”来启动应用程序，一个在一起，然后每个单独的加载器。

# file - 通过文件通信两个远程shell脚本

> ID：14138657
> 
> 赞同：0
> 
> 时间：2013-01-03T12:09:11.723
> 
> 标签：file, shell, ssh, communication

我真的需要帮助来理解我的 shell 脚本的奇怪行为。

事实上，我有两个脚本在不同的节点上运行。第一个脚本 ssh 一个远程节点并启动第二个脚本。第二个脚本计算成本并将其发送到第一个脚本。对于第二个脚本，SSH 第一个脚本的节点（asker 节点）并将成本写入第一个脚本将读取的文件中（如下所示）。

问题是，当 cost 的值为 0 时，第一个脚本继续正常执行，但如果它的值不同，则 0 第一个脚本保持挂起并且不执行 ssh 之后的指令。

有人对此有解释吗？如果需要，我可以提供有关我的代码的更多详细信息。

先感谢您。

第一个脚本：

```
....
ssh $remore_node "sh cost_computation.sh <parameters>"
cost=`cat $response_file`
if [ $cost -eq 0 ]
then
    ....
else
    ....
fi 
```

第二个脚本（cost_computation）：

```
....
computation of the cost 
ssh $asker_node "echo $cost > $response_file" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:44:44.763

你能做到这一点吗？

第一个脚本：

```
....
cost=$(ssh $remore_node "sh cost_computation.sh <parameters>")
if [ $cost -eq 0 ]
then
    ....
else
    ....
fi 
```

第二个脚本（cost_computation）：

```
....
computation of the cost 
echo $cost 
```

# shrinkwrap - 代理后面的 Shrinkwrap 解析器插件

> ID：14138658
> 
> 赞同：1
> 
> 时间：2013-01-03T12:09:15.420
> 
> 标签：shrinkwrap

我在我的 POM 文件中使用了 2.0.0-alpha-1 版本的 shrinkwrap-resolver-bom。当我尝试执行 Arquillian 测试用例时，Shrinkwrap 解析器似乎受到公司代理的影响，因为由于工件传输操作的超时时间过长，部署非常非常慢。我不断收到 org.jboss.shrinkwrap.resolver.impl.maven.LogTransferListerer transferFailed。我[在代理后面找到了 Arquillian/Shrinkwrap MavenDependencyResolver，](https://stackoverflow.com/questions/6291146/arquillian-shrinkwrap-mavendependencyresolver-behind-proxy/6292726#6292726)解释了如何处理版本 1.0.0，我猜，但我不知道如何处理版本 2.0.0。有什么建议么？谢谢马西莫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T12:38:53.847

快速而肮脏的解决方案：

*   在你的 pom 中添加缺少的 Shrinkwrap 依赖项，以便 Maven 下载它们并将它们安装在你的本地存储库中（如果你有的话，还有 Nexus）
*   删除之前在 pom.xml 中添加的依赖项。现在依赖项在本地 repo 中，shrinkwrap 应该在不尝试连接到 Maven Central 的情况下找到它们

# android - 来自 nativegetenableTags 的意外值 0

> ID：14138666
> 
> 赞同：0
> 
> 时间：2013-01-03T12:09:39.247
> 
> 标签：android

我正在为这个问题创建相同的线程。因为我想在这个问题上更进一步。问题是我收到警告

```
Unexpected value from nativegetenableTags 0 
```

[我在这里](http://code.google.com/p/android/issues/detail?id=39723)和[这里](https://stackoverflow.com/questions/13416142/unexpected-value-from-nativegetenabledtags-0)发现了一些关于这个的讨论

我将 SDK 降级为 16，但仍然出现相同的错误。我必须降级我的应用程序的最低 sdk 级别是多少？没有其他解决方案吗？:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:15:28.610

无需降级 sdk 即可删除该警告，您可以使用过滤标签正则表达式过滤警告。只需将以下行放在 Logcat 搜索栏中，以便删除所有 nativegetenable 标记。这是 API 级别 17 SDK 的问题，除了过滤器选项外无法删除。

> ^(?!. *(nativeGetEnabledTags))。*$

复制、粘贴以上行，以便删除带有 nativegetenabled 标签的所有警告消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T12:46:42.730

我相信这个问题不再是实际的了。Intel x86 Atom 映像直到今天仍然存在问题，但随着 Intel x86 Atom 4.3 映像 (API 18) 的发布，问题就消失了。刚刚测试过，可以确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T09:06:03.277

这是 API 17 模拟器中的一个错误。您可以使用 API 16 或更低版本。如果您真的想使用 API 17，您可能需要使用真实设备。

# 3d - 适合一组方向的最紧锥体

> ID：14138673
> 
> 赞同：2
> 
> 时间：2013-01-03T12:10:07.577
> 
> 标签：3d, geometry, data-fitting

给定 3D 中的一组单位方向**d_1, ..., d_n** ,

如何找到它们周围最紧的锥体？

例如，我怎样才能找到另一个单位向量**m**和一个表示角度的标量值**alpha**，例如：

foreach i, AngleBetween( **m** , **d_i** ) < **alpha**

**阿尔法**是最小的。

补充说明：方向可以跨越一半以上的空间。在这种情况下，“圆锥”是指从圆锥顶点开始并在圆锥轴给定角度内的一组半线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:19:41.700

如果您的一组方向都落在通过原点的一个半空间内，那么您可以计算单位半径球体上矢量尖端的凸包，这会在该球体上产生一个凸多边形，然后找到包围该多边形的最小圆. 您可以通过投影到合适的平面来避免球面计算。

我意识到这是一个抽象的观点，您可能需要更具体的建议，但它仍然可能会有所帮助：凸包 + 最小外接圆。

如果您的一组方向跨度超过半个空间，那么您需要在这种情况下定义“圆锥”的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T18:34:45.647

这是一个线性规划问题。

求 a, p 最大化 cos(a) 服从：
px*d1x+py*d1y*pz*d1z >= cos(a)
px*d2x+py*d2y*pz*d2z >= cos(a)
...
px *dnx+py*dny*pz*dnz >= cos(a)

我会研究 LP 算法。同时，我已经解决了一个非常相似的问题，这可能是一个起点：[https](https://github.com/VictorDavis/GeoConvexHull) ://github.com/VictorDavis/GeoConvexHull 。你是对的，一旦你找到了凸包，你就可以找到最小外接圆。但事实证明，证明 n 个点位于同一个半球并非易事。也许可以定制这个算法来回答你的“最小锥体”问题。

# html - div在浏览器中的容器中调整大小

> ID：14138674
> 
> 赞同：0
> 
> 时间：2013-01-03T12:10:11.307
> 
> 标签：html, jquery-ui, css

当我调整浏览器窗口的大小时，特定的 div 离开了主容器如何解决这个问题

[http://jsfiddle.net/48y2Q/1](http://jsfiddle.net/48y2Q/1) http://jsfiddle.net/48y2Q/1/embedded/result/

```
 <section id="main" style="background-color: #646464; padding: 0px;">
            <div class="inner clearfix" style="background-color: white;">
              <span style="color: #06546a; font-weight: bold; font-size: 14px; background-color: white;">Defie Cloud Buisness Solutions</span>helps companies of all sizes to enhance business operation, to refine the process and optimize technology, to reduce company expenses on IT maintenance, Hardware upgrade. And more importantly, to change the way buisness operate.
              <div id="primary">
                <section class="primary">
                  <ul style="width: 800px;">
                      <li style="padding-bottom: 5px; list-style: none; font-size: 14px;">
                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                           All-in-One Business Management Solutions
                      </li>
                      <li style="padding-bottom: 5px; list-style: none; font-size: 14px;">
                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                        Cloud-based File Management
                      </li>
                      <li style="padding-bottom: 5px; list-style: none; font-size: 14px;">
                        <img alt="squareList" style="margin-right: 10px;" id="logo" src="http://www.defie.co/designerImages/square_list.png">
                        Real-Time Access from any where, any time and on any devices
                      </li>
                  </ul>
                </section>
              </div>
            </div>
        </section>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:18:08.207

问题来自两个不同的地方：

```
 //Reduce width from 100% (line 815, bootstrap) because you need left margin so this can't be 100%.   
 .row-fluid {
  width: 90%;
 } 
```

还从 100px 减少 margin-left

```
<div class="row-fluid marketing" style="margin-top: 27px; margin-bottom: 0px; margin-left: 100px;"> 
```

至

```
<div class="row-fluid marketing" style="margin-top: 27px; margin-bottom: 0px; margin-left: 20px;"> 
```

# vector - Mathematica 中二维函数的矢量图

> ID：14138680
> 
> 赞同：1
> 
> 时间：2013-01-03T12:10:30.663
> 
> 标签：vector, plot, wolfram-mathematica, 2d, mathematica-8

我试图通过将 r-hat 分解为 x-hat 和 y-hat 在 Mathematica 中使用 VectorPlot 绘制 1/r (r-hat)。

我在用：

```
[Chi][x_, y_] := Sqrt[x^2 + y^2]

[Phi][x_, y_] := ArcTan[y/x] 
```

然后在 x,y 平面上绘制上述函数。

但是，对于`x<0`和`y<0`，向量没有正确的符号，因为单位向量在每个象限中具有不同的符号。我尝试定义一个分段函数来解决这个问题，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T21:02:04.953

```
VectorPlot[ 1/Sqrt[x x + y y] {Cos[ArcTan[x, y]], Sin[ArcTan[x, y]]}, 
          {x, -2, 2},  {y, -2, 2},
          RegionFunction -> Function[{x, y, vx, vy, n}, Sqrt[x x + y y] > 1/3], 
          VectorPoints -> 10] 
```

![数学图形](../Images/54d11e583a420b226ebddeb4930d4bd5.png)

# java - 碰撞检测 - 防止玩家在击中物体后移动

> ID：14138681
> 
> 赞同：0
> 
> 时间：2013-01-03T12:10:33.050
> 
> 标签：java, collision, slick2d

我有以下代码：

```
if(input.isKeyDown(Input.KEY_RIGHT)){
  player = movingRIGHT;
  pposX -= 0.15f;
  if(playerR.intersects(rec1)){
    pposX += 0.15f;
  }
}

if(input.isKeyDown(Input.KEY_LEFT)){
  player = movingLEFT;
  pposX += 0.15f;
  if(playerR.intersects(rec1)){
    pposX -= 0.15f;
} 
```

还有两个玩家 - playerR 和 rec1：

```
playerR = new Rectangle(shiftX-174,shiftY+200,player.getWidth(),player.getHeight());
rec1 = new Rectangle(448+pposX, 640-128+pposY, 32, 32); 
```

我的球员撞墙后没有停下来。我想知道坐标是否足够好，所以我尝试在完全相同的坐标处绘制矩形没有问题。但是，我的播放器刚刚通过。

我正在使用带有此代码的 java slick2d：

```
package javagame;

import org.lwjgl.input.Mouse;
import org.newdawn.slick.Animation;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.geom.Rectangle;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Play extends BasicGameState {

Animation player,movingUP,movingDOWN,movingLEFT,movingRIGHT;
Image worldMap;
Image cat;
boolean quit = false;
int [] duration = {200,200,200,200};
int [] duration2 = {200,200};
float pposX;
float pposY;
float shiftX = pposX + 430;
float shiftY = pposY + 320;
float height;
int x = 0;
int y = 0;
boolean jumping = false;
float verticalSpeed;
float mapPosX = 0;
float mapPosY = 0;
Rectangle rec1;
Rectangle rec2;
Rectangle rec3;
Rectangle rec4;
Rectangle rec5;
Rectangle rec6;
Rectangle rec7;
Rectangle rec8;
Rectangle playerR;
boolean Win;
String a = "Victory!";
public Play (int state){

}

public void init(GameContainer gc,StateBasedGame sbg) throws SlickException{
    worldMap = new Image("res/map.png");
    Image[] walkUp = {new Image("res/buckysBack.png") , new Image("res/buckysBack.png")};
    Image[] walkLeft = {new Image("res/1L.png") , new Image("res/2L.png"), new Image("res/3L.png"), new Image("res/4L.png")};
    Image[] walkRight = {new Image("res/1R.png") , new Image("res/2R.png"), new Image("res/3R.png"), new Image("res/4R.png")};
    Image[] walkDown = {new Image("res/buckysFront.png") , new Image("res/BuckysFront.png")};

    movingLEFT = new Animation(walkLeft , duration , true);
    movingRIGHT = new Animation(walkRight,duration,true);
    movingUP = new Animation(walkUp,duration2,false);
    movingDOWN = new Animation(walkDown,duration2,false);

    rec1 = new Rectangle(448+pposX, 640-128+pposY, 32, 32);
    rec2 = new Rectangle(480,640-160,32,32);
    rec3 = new Rectangle(512,640-192,64,32);

    player = movingRIGHT;
}

public void render(GameContainer gc,StateBasedGame sbg,Graphics g)throws SlickException{
    worldMap.draw(pposX,pposY);
    player.draw(shiftX-174,shiftY+200);
    g.drawRect(448+pposX, 640-128+pposY, 32, 32);
    g.drawRect(shiftX-174,shiftY+200,player.getWidth(),player.getHeight());
    g.setColor(Color.blue);
    g.drawString("Your position x: " + pposX * -1 + "\n              y: " + pposY  , 600, 30);
    int mx = Mouse.getX();
    int my = Mouse.getY();
    g.drawString("Your mouse x: " + mx + "y: " + my, 400,400);
    playerR = new Rectangle(shiftX-174,shiftY+200,player.getWidth(),player.getHeight());

    if(quit == true){
        g.drawString("Resume(R)", sbg.getContainer().getWidth()/2, 100);
        g.drawString("Main Menu(M)", sbg.getContainer().getWidth()/2, 150);
        g.drawString("Quit(Q)", sbg.getContainer().getWidth()/2, 200);
        if(quit==false){
            g.clear();
        }
    }
    if(Win){
        g.setColor(Color.red);
        g.drawString(a,sbg.getContainer().getWidth()/2 - a.length()/2,300);
    }

}

public void update(GameContainer gc,StateBasedGame sbg,int delta)throws SlickException{
    Input input = gc.getInput();

    if(input.isKeyDown(Input.KEY_UP)){
        pposY += 0.15f;
    }
    if(input.isKeyDown(Input.KEY_DOWN)){
        pposY -= 0.15f;
    }

    if(jumping){
        verticalSpeed += .007f * delta;
    }
    pposY += verticalSpeed;

    if(input.isKeyDown(Input.KEY_RIGHT)){
        player = movingRIGHT;
        pposX -= 0.15f;
        if(playerR.intersects(rec1)){
        pposX += 0.15f;
        }
        if(pposX>3100){
            Win = true;
        }
    }
    if(input.isKeyDown(Input.KEY_LEFT)){
        player = movingLEFT;
        pposX += 0.15f;
        if(playerR.intersects(rec1)){
        pposX -= 0.15f;
        }
        if(pposX> -1.5f){
            pposX-= 0.15f;
        }
    }

}
public int getID(){
    return 1;
}
} 
```

如何让玩家停在墙上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:14:40.577

```
playerR = new Rectangle(shiftX-174,shiftY+200,player.getWidth(),player.getHeight()); 
```

首先，我不知道是什么`shiftX`。您必须每帧更新矩形。例子：

```
playerR = new Rectangle(pposX, pposY, player.getWidth(), player.getHeight()); 
```

现在将该代码放在碰撞检测之前。请注意，您应该将宽度和高度存储在一个变量中，以使其更快，而不必调用`getWidth`每一`getHeight`帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:13:10.290

冲突的一个非常常见的问题是更新的离散性。由于您更新了位置，它基本上会传送，并且可以在它应该碰撞的对象上这样做。因此，请检查台阶与该区域和其他物体（或墙壁）的面积相比是否足够小。

# exe - 我可以将 .vbs 文件制作成 .exe 文件吗？

> ID：14138686
> 
> 赞同：-1
> 
> 时间：2013-01-03T12:10:49.480
> 
> 标签：exe, cmd

我想知道一种方法可以将我的 .vbs 文件转换为 .exe 文件。

是否可以？

**代码：**

```
 Option Explicit

    Dim oShell : Set oShell = WScript.CreateObject ("WScript.Shell")
    Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject") 
    Dim StartTime,Elapsed 

    'msgBox(oShell.CurrentDirectory)
    'MsgBox(FSO.GetFile(Wscript.ScriptFullName).ParentFolder )
    oShell.CurrentDirectory = FSO.GetFile(Wscript.ScriptFullName).ParentFolder

    StartTime = Timer

    IF NOT oShell.run( "ParentChildLinkFinal.vbs", 1, True) = 0 then Wscript.Quit
    IF NOT oShell.run( "Parent_Child_Merge_final.vbs", 1, True) = 0 then Wscript.Quit       

    Elapsed = Timer - StartTime

    MsgBox("Total time taken to finish this task:" & Elapsed & "in Seconds") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:15:29.110

您可以使用此实用程序 [http://www.vbs2exe.com/实现它](http://www.vbs2exe.com/)

# mysql - MySQL 了解基本连接

> ID：14138693
> 
> 赞同：3
> 
> 时间：2013-01-03T12:11:36.423
> 
> 标签：mysql, sql

我正在努力理解基本的 MySQL 连接。

基本上我有 2 个表，其中一个带有客户名字和地址 ID，另一个带有实际地址。

我希望它显示客户姓名和实际地址，而不仅仅是显示客户姓名和地址 ID。

我的基本选择语句是这样的：

```
SELECT firstName, addressId FROM Customer 
```

它将显示如下内容：

```
firstName   addressId
---------------------
Bob         56 
```

而不是我想将 addressId 与另一个表中的实际地址连接起来

像这样：

```
firstName    address
----------------------------------
Bob          45 Somewhere street 
```

有没有人可以向我展示实现这一目标的最佳方法？

也有人可以推荐一个很好的加入教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:14:13.057

```
SELECT  a.name, b.address
FROM    Customer a INNER JOIN AddressList b on a.addressID = b.addressID 
```

要了解有关联接的更多信息，请参阅下面的文章，

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:13:46.830

你的条件是inner join，这是最简单，最容易理解的Join，也是最常见的。此查询将返回左表（客户）中与右表（地址）中具有匹配记录的所有记录。这个Join是这样写的：

```
 SELECT firstName, address FROM Customer 
 INNER JOIN address ON Customer.addressId=address.addressId 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!2/5fa21/1)

样本输出：

```
FIRSTNAME       ADDRESS
  Bob       45 Somewhere street 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:14:04.180

在名称和地址表中放入相同的“addressid”，然后将两者连接为：

```
select name, address from customer join addresses 
on customer.addressid = addresses.addressid; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:15:29.670

假设两个表都有一个地址 id，你可以使用

```
SELECT firstname, address, from table1 JOIN table2 
ON table1.addressid = table2.addressid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T12:16:19.720

这将是：

```
SELECT firstName, address FROM Address As A 
INNER JOIN Customer as C ON C.addressId=A.addressId 
```

## [JOINS 的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-03T12:16:32.080

假设您有以下表格：

```
Customer(ID, FName, LName, AddressID)
Address(AddressID, Streeet, HNUmber, City) 
```

这将显示客户地址而不是 AddressID：

```
SELECT c.ID, c.Fname, c.LName, a.Street, a.HNumber, a.City
FROM Customer c, Address a
WHERE
  c.AddressID = a.AddressID 
```

# jsf-2 - 从正确的 i18n 属性文件中检索 JSF 中的密钥

> ID：14138694
> 
> 赞同：2
> 
> 时间：2013-01-03T12:11:37.093
> 
> 标签：jsf-2, properties, internationalization

有人知道下一种方法有什么问题吗？

```
public static String getMessageBundleString(String key, String localeAcronym) throws MissingResourceException {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    String messageBundleName = facesContext.getApplication().getMessageBundle();
    ResourceBundle bundle = ResourceBundle.getBundle(messageBundleName, new Locale(localeAcronym));
        //THE LOCALE OF THIS BUNDLE IS ALWAYS 'es_ES' !!!
    return bundle.getString(key);
} 
```

在**Primefaces/JSF**环境中，我想从正确的 i18n 属性文件中检索密钥。

但它总是从**messages_es_ES.properties**文件中获取它。

以下调用返回**相同的值**（='Inicio'）：

```
getMessageBundleString("home", "es_ES")
getMessageBundleString("home", "uk_UK")

messages_es_ES.properties:
home=Inicio

messages_uk_UK.properties:
home=Home 
```

谢谢

这是我的一些 faces-config.xml 内容：

```
<application>
    <locale-config>
        <supported-locale>es_ES</supported-locale>
        <supported-locale>uk_UK</supported-locale>
    </locale-config>    
    <message-bundle>cfg.i18n.messages</message-bundle>
    <resource-bundle>
        <base-name>cfg.i18n.messages</base-name>
        <var>msgs</var>
    </resource-bundle>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:55:21.307

此变体有效（分离国家和语言）：

```
public static String getMessageBundleString(String key, String language, String country) throws MissingResourceException {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    String messageBundleName = facesContext.getApplication().getMessageBundle();
    ResourceBundle bundle = ResourceBundle.getBundle(messageBundleName, new Locale(language, country));
        //Valid ones: "es","ES"; "en","GB"!!!
    return bundle.getString(key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:25:55.927

你试过这个变化吗？

```
getMessageBundleString("home", "es")
getMessageBundleString("home", "en")
messages_es.properties:
home=Inicio
messages_en.properties:
home=Home 
```

# jquery - JQuery jScrollPane 不工作。我在 div 中加载动态内容

> ID：14138695
> 
> 赞同：1
> 
> 时间：2013-01-03T12:11:37.077
> 
> 标签：jquery, jscrollpane

我想在`<DIV>`. 我正在从 AJAX 加载内容`<DIV>`。

我的代码是

```
javasript-----

var settings = {
        showArrows: true
        };

   var pane = jQuery('.scroll-pane');

   pane.jScrollPane(settings);

   var api = pane.data('jsp');

    jQuery.ajax({ // create an AJAX call...
        data : {action: "get_following_list"},
        type: 'POST',
        url: MyAjax.ajaxurl,
        success: function(response) { // on success.. mber ' + i++)

        jQuery(".followspan").html("FOLLOWING");
         if(togle == 'yes'){
            jQuery(".followers1").slideToggle("slow");
        }
        api.getContentPane().html(response);
        api.reinitialise();
        //jQuery(".scroll-pane").html(response);
     }
    }); 
```

斯科尔不工作。

如果有人知道解决方案。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:02:47.277

您是否尝试过：

```
overflow: scroll; 
```

在 .css 中。

问候。

# c# - 以 XML/JSON 格式获取 Twitter 时间线，在 Windows 8 应用程序中显示

> ID：14138705
> 
> 赞同：1
> 
> 时间：2013-01-03T12:12:33.863
> 
> 标签：c#, xml, twitter, windows-8

我目前正在关注如何在 C# 中使用 LINQ to XML 显示 Twitter 提要的教程。但是，鉴于 Microsoft 已将**WebClient**替换为**HTTPClient**，我不确定如何继续将其集成到我的 Windows 8 应用程序中。
教程： http: [//www.codeproject.com/Articles/117614/How-to-query-twitter-public-status-using-LINQ-to-X](http://www.codeproject.com/Articles/117614/How-to-query-twitter-public-status-using-LINQ-to-X)

问题是我已经“半途而废”了**DownloadStringCompleted**，我相信这不在**HTTPClient** api 中。所以在 async/await 功能上搜索了一段时间后，我将我的一些知识与我找到的一些教程和片段混合在一起，但我最终得到的结果是行不通的：

```
 public async Task<XElement> GetXmlAsync()
    {
        var client = new HttpClient();
        var response = await client.GetAsync("http://api.twitter.com/1/statuses/user_timeline.xml?screen_name=VladimirPutin");
        var text = response.Content.ReadAsStringAsync();
        return XElement.Parse(text.Result);

        XElement xmlTweets = XElement.Parse(text.Result);
        listboxTweetsSecond.ItemsSource = from tweet in xmlTweets.Descendants("status")
                                          select new UserTweet
                                          {
                                              UserImageSrc = tweet.Element("user").Element("profile_image_url").Value,
                                              UserMessage = tweet.Element("text").Value,
                                              UserName = tweet.Element("user").Element("screen_name").Value
                                          };

    } 
```

*（是的，Twitter 用户名只是一个占位符）*
我不需要完整的代码作为答案，但如果有人能指出我应该从这里去哪里以及我应该做什么，我会很高兴，因为这（当然）不起作用（例如，当我运行它/调试模式时它不显示任何内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:41:13.060

注释掉该行

```
return XElement.Parse(text.Result); 
```

它应该可以工作。

完成之后（即您不再返回 XElement），您可能可以更改方法签名 top 仅返回一个任务。

```
public async Task GetXmlAsync()
{
    // method body
} 
```

# php - 我应该如何在 MySQL 数据库中存储换行符？

> ID：14138706
> 
> 赞同：7
> 
> 时间：2013-01-03T12:12:44.740
> 
> 标签：php, html, mysql, newline

我在脑海中转来转去，试图决定如何最好地将换行符存储在 MySQL 数据库中。

一点背景；要求用户完成一个文本区域。这必须存储在 MySQL 数据库中，然后才能被读出并包含在 HTML 电子邮件中。

我应该将它们存储为：

1）字符串文字 - 这当然是危险和不好的做法

2）作为带有`\r\n`in 的字符串 - 当我从数据库中读回它时，它读取为 4 个字符，因此`nl2br()`无法正确替换它们。

3）作为HTML `<br />`- 因为它必须是html实体编码才能存储它最终被存储，`&lt;br /&gt;`所以当它到达电子邮件时`<br />`打印而不是实际的换行符。传递它`html_entity_decode()`会解码其他需要编码的字符。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T12:22:32.817

按原样保存，但**先逃跑**。这是您的选择 1\. 当您需要呈现此数据时，应用您需要对其进行格式化的任何函数。如果您需要在 HTML 使用`nl2br()`和`htmlentities()`功能中显示它。这也适用于邮件。

如果您有这样的文本区域数据，

```
$text="Hello Sir,
I am Robert'); Drop table students; --
.....
Yours most obedient pupil
....."; 
```

将其转义后按原样存储，或使用准备好的语句。

```
$text = $mysqli->real_escape_string($text); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T10:17:16.087

使用 javascript 字符串替换功能`str.replace(/\n/g,'\\n')`

将所有换行符转换为文本区域中的转义文字，同时形成 url 或 post 字符串。

使用 PHP 检索相同`json_encode()`内容并通过 textarea 显示它对我来说效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:16:36.007

这取决于应用程序类型（您希望如何显示文本）。

如果这是 HTML 电子邮件编辑器 - 我认为 html 格式会更好。

在大多数 CMS（内容管理系统）中使用 HTML 格式（joomla、wordpress、prestashop 等），因为您可以从数据库中读取它并发送到浏览器。

此外，您可能还需要其他 HTML 标记（例如`<b>`粗体或`<center>`）。

我认为`\r\n`当数据显示在 Windows 窗体控件上时，对非 Web 应用程序使用格式更好。

还有一件事 - 你可以用两种方式存储它们： -`<br>`对于 HTML 视图 -`\r\n`对于 HTML 源代码（添加一些换行符并制作更易读的 html 源代码）

通过更具可读性的 html 我的意思是：

```
<center>
This is header
</center>
<p>
This is paragraph.
<br>
Second line.
</p> 
```

而不是这个：

```
<center>This is header</center><p>This is paragraph.<br>Second line.</p> 
```

# sockets - 为什么在 Adob e Air 中使用 socket.readUnsignedInt() 时会得到意外结果？

> ID：14138711
> 
> 赞同：0
> 
> 时间：2013-01-03T12:12:54.007
> 
> 标签：sockets, air, adobe

我有两个使用套接字相互通信的空中应用程序。

应用程序 1 上的代码

```
socket.writeUnsignedInt(4); 
```

应用程序 2 上的代码

```
socket.readUnsignedInt(); 
```

我期望 readInt() 的结果是“4”（我发送的 int），但我得到“262144”

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:52:31.150

十六进制的 262144 值很可能是您的流不同步，即您在调用`00 04 00 00`之前从中读取的字节太少。`readUnsignedInt()`

# html - 悬停时的弹跳效果 在其观察到 子元素也是如此

> ID：14138715
> 
> 赞同：3
> 
> 时间：2013-01-03T12:13:17.050
> 
> 标签：html, css, css-transitions

好的，所以在经历了很多压力和咖啡之后，我提出了这段代码，通过将鼠标悬停在链接上来显示对子元素的一些反弹效果。并且在将鼠标从链接上移开时，子元素会在延迟 4 秒后隐藏。引入这个 4 秒延迟是因为在将鼠标悬停在链接上之后，人们往往会立即将鼠标悬停在下拉菜单上，并且由于反弹效果，在和

*   元素，当您将鼠标悬停在间隙上时，下拉菜单会消失，因此网站上的访问者不会知道他们必须等待反弹停止才能将鼠标悬停在菜单上，因此我引入了 4 秒的延迟。现在的问题是，当我立即尝试在下拉菜单上移动鼠标时，反弹效果会在子元素上重现，我的意思是反弹效果会发生两次，这只有通过立即悬停在下拉菜单上特别试图悬停才会发生超过菜单中的第一个选项。所以这看起来很丑陋，同时显示出糟糕的编码，有没有办法阻止这种情况发生。而且我还想知道有没有办法使用 jQuery 切换可见性，我不能使用显示选项，也不能使用 removeClass 函数。我知道， [演示](http://jsfiddle.net/BerkerYuceer/kGqRM/)

    **HTML 代码：**

    ```
    <div id="menu">
        <ul class="menu" id="tempMenu">
            <li class="listOfNumbers">
                <a id="Menus" href="">Numbers</a>
                <ul class="submenu">
                    <li>
                        <a id="one" href="">one</a>
                    </li>
                    <li>
                        <a id="two" href="">two</a>
                    </li>
                    <li>
                        <a id="three" href="">three</a>
                    </li>
                    <li>
                        <a id="four" href="">four</a>
                    </li>
                    <li>
                        <a id="five" href="">five</a>
                    </li>
                    <li>
                        <a id="six" href="">six</a>
                    </li>
                    <li>
                        <a id="seven" href="">seven</a>
                    </li>
                    <li>
                        <a id="eight" href="">eight</a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>​ 
    ```

    **CSS 代码**

    ```
    ul { margin:0; padding:0; width:0; }

    ul li {
        height: 30px;
        line-height: 30px;
        list-style: none;
    }

    ul.menu li a {

        padding:0;
        width:90px;
        display:block;

        color: #fff;
        font-size: 12px;
        font-weight: bolder;
        text-shadow: #000 0 -1px 1px;
        text-decoration: none;
        text-align: center;

        border-top: 1px solid #666;
        border-left: 1px solid #666;
        border-right: 1px solid #000;
        border-bottom: 1px solid #000;

        box-shadow: white 7px 5px 20px; /* W3 Standarts */
        -o-box-shadow: white 7px 5px 20px; /* Opera */
        -ms-box-shadow: white 7px 5px 20px; /* IE 10+ */
        -moz-box-shadow: white 7px 5px 20px; /* Firefox */
        -webkit-box-shadow:white 7px 5px 20px; /* Webkit */

        transition: text-shadow .7s ease-out,
                    background .7s ease-out; /* W3 Standarts */
        -o-transition: text-shadow .7s ease-out,
                       background .7s ease-out; /* Opera */
        -ms-transition: text-shadow .7s ease-out,
                        background .7s ease-out; /* IE 10+ */
        -moz-transition: text-shadow .7s ease-out,
                         background .7s ease-out; /* Firefox */
        -webkit-transition: text-shadow .7s ease-out,
                            background .7s ease-out; /* Webkit */
        background: linear-gradient(to bottom, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%);

        background: -moz-linear-gradient(top, rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(17,17,17,1) 60%, rgba(0,0,0,1) 77%, rgba(19,19,19,1) 91%);
        /* Webkit */
        background: #666 -webkit-gradient( linear, left bottom, left top, color-stop(0.3, rgb(00,00,00)), color-stop(0.9, rgb(80,80,80)) );
        /* Opera */
        background: #666 -o-gradient( linear, left bottom, left top, color-stop(0.3, rgb(00,00,00)), color-stop(0.9, rgb(80,80,80)) );
        /* IE 10+ */
        background: -ms-linear-gradient(top, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%);
        /* IE6-9 */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 );
    }
    ul.menu .listOfNumbers {
        margin:15px 0 0 20px;
    }
    ul.menu li .submenu {
        top:30px;
        visibility:hidden;
    }
    ul.menu li:hover .submenu {
        visibility:visible;
        animation:mymove 1.2s linear; /* W3 Standart */
        -o-animation:mymove 1.2s linear; /* Opera */
        -ms-animation:mymove 1.2s linear; /* IE 10+ */
        -moz-animation:mymove 1.2s linear; /* Firefox */
        -webkit-animation:mymove 1.2s linear; /* Safari and Chrome */
    }
    ul.menu li:not(:hover) .submenu {
        top:30px;
        opacity:0;
        transition:opacity 1.2s linear 3s,
            visibility 1.2s linear 3s; /* W3 Standart */
        -o-transition:opacity 1.2s linear 3s,
            visibility 1.2s linear 3s; /* Opera */
        -ms-transition:opacity 1.2s linear 3s,
            visibility 1.2s linear 3s; /* IE 10+ */
        -moz-transition:opacity 1.2s linear 3s,
            visibility 1.2s linear 3s; /* Firefox */
        -webkit-transition:opacity 1.2s linear 3s,
            visibility 1.2s linear 3s; /* Safari and Chrome */
    }
    @keyframes mymove
    {
        0%   {opacity:0.1;margin-top:0px;}
        10%  {opacity:0.3;margin-top:25px;}
        30%  {opacity:0.4;margin-top:50px;}
        60%  {opacity:0.5;margin-top:25px;}
        80%  {opacity:0.7;margin-top:50px;}
        90%  {opacity:0.9;margin-top:35px;}
        95%  {opacity:0.95;margin-top:25px;}
        100% {opacity:1;margin-top:0px;}
    }
    /* Opera */
    @-o-keyframes mymove
    {
        0%   {opacity:0.1;margin-top:0px;}
        10%  {opacity:0.3;margin-top:25px;}
        30%  {opacity:0.4;margin-top:50px;}
        60%  {opacity:0.5;margin-top:25px;}
        80%  {opacity:0.7;margin-top:50px;}
        90%  {opacity:0.9;margin-top:35px;}
        95%  {opacity:0.95;margin-top:25px;}
        100% {opacity:1;margin-top:0px;}
    }
    /* IE 10+ */
    @-ms-keyframes mymove
    {
        0%   {opacity:0.1;margin-top:0px;}
        10%  {opacity:0.3;margin-top:25px;}
        30%  {opacity:0.4;margin-top:50px;}
        60%  {opacity:0.5;margin-top:25px;}
        80%  {opacity:0.7;margin-top:50px;}
        90%  {opacity:0.9;margin-top:35px;}
        95%  {opacity:0.95;margin-top:25px;}
        100% {opacity:1;margin-top:0px;}
    }
    /* Firefox */
    @-moz-keyframes mymove
    {
        0%   {opacity:0.1;margin-top:0px;}
        10%  {opacity:0.3;margin-top:25px;}
        30%  {opacity:0.4;margin-top:50px;}
        60%  {opacity:0.5;margin-top:25px;}
        80%  {opacity:0.7;margin-top:50px;}
        90%  {opacity:0.9;margin-top:35px;}
        95%  {opacity:0.95;margin-top:25px;}
        100% {opacity:1;margin-top:0px;}
    }
    /* Safari and Chrome */
    @-webkit-keyframes mymove
    {
        0%   {opacity:0.1;margin-top:0px;}
        10%  {opacity:0.3;margin-top:25px;}
        30%  {opacity:0.4;margin-top:50px;}
        60%  {opacity:0.5;margin-top:25px;}
        80%  {opacity:0.7;margin-top:50px;}
        90%  {opacity:0.9;margin-top:35px;}
        95%  {opacity:0.95;margin-top:25px;}
        100% {opacity:1;margin-top:0px;}
    }
    ul.menu .submenu li a {
        -webkit-border-top-left-radius:0px;
        -webkit-border-bottom-left-radius:0px;
        -webkit-border-top-right-radius:0px;
        -webkit-border-bottom-right-radius:0px;
        -moz-border-top-left-radius: 0px;
        -moz-border-radius-bottomleft:0px;
        -moz-border-top-right-radius: 0px;
        -moz-border-radius-bottomright: 0px;
        /* margin: 68px 95px; */
        z-index: 1000;
    }

    ul.menu .submenu li:first-child a {
        -webkit-border-top-left-radius:10px;
        -webkit-border-bottom-left-radius:2px;
        -webkit-border-top-right-radius:10px;
        -webkit-border-bottom-right-radius:2px;
        -moz-border-top-left-radius: 10px;
        -moz-border-radius-bottomleft:2px;    
        -moz-border-top-right-radius: 10px;
        -moz-border-radius-bottomright: 2px;
        border-top-left-radius: 10px;
        border-bottom-left-radius:2px;    
        border-top-right-radius: 10px;
        border-bottom-right-radius:2px;
        /* margin: 34px 95px; */
        z-index: 1000;
    }

    ul.menu .submenu li:last-child a {
        -webkit-border-top-left-radius:2px;
        -webkit-border-bottom-left-radius:10px;
        -webkit-border-top-right-radius:2px;
        -webkit-border-bottom-right-radius:10px;
        -moz-border-top-left-radius: 2px;
        -moz-border-radius-bottomleft:10px;
        -moz-border-top-right-radius: 2px;
        -moz-border-radius-bottomright: 10px;
        border-top-left-radius: 2px;
        border-bottom-left-radius:10px;    
        border-top-right-radius: 2px;
        border-bottom-right-radius:10px;
        /* margin:260px 95px; */
        z-index: 1000;
    }

    ​ 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:10:20.900

如何动画父母以及 - 比如：

```
ul.menu > li:hover  {
    visibility:visible;
    animation:parentmove 1.2s linear; /* W3 Standart */
    -moz-animation:parentmove 1.2s linear; /* Firefox */
    -webkit-animation:parentmove 1.2s linear; /* Safari and Chrome */
}

@keyframes parentmove
{
    0%   {padding-bottom:5px;}
    10%  {padding-bottom:30px;}
    30%  {padding-bottom:55px;}
    60%  {padding-bottom:30px;}
    80%  {padding-bottom:55px;}
    90%  {padding-bottom:40px;}
    95%  {padding-bottom:30px;}
    100% {padding-bottom:5px;}
} 
```

[http://jsfiddle.net/kGqRM/187/](http://jsfiddle.net/kGqRM/187/)

以与移动子菜单相同的速率将填充添加到父级的底部

不幸的是，这意味着 li 必须是一个块元素并且向左浮动（以便该元素实际上被正确渲染 - 如果您当前检查您的 li 它似乎全部向左挤压，这就是您在尝试时离开它的原因去到孩子身上）

# iphone - 在 iPod 上启动应用程序时出错

> ID：14138716
> 
> 赞同：-1
> 
> 时间：2013-01-03T12:13:16.800
> 
> 标签：iphone, xcode4.5

无法启动“TapBlackJack”没有这样的文件或目录（/Users/nabeel.ahmed/Library/Developer/Xcode/DerivedData/iBlackJackPOC-fxpktgxemrwknacpmlawwnlnyyxu/Build/Products/Debug-iphoneos/TapBlackJack.app/TapBlackJack）

Xcode 上出现以下错误，而我将在我的 ipod 上运行应用程序，但它在模拟器上运行完美。 **注意** 不要说删除派生数据，退出xcode，重新启动ipod，我尝试了一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:16:49.447

只需将应用程序的那个文件夹移动到其他地方，然后退出 xcode 并重新开始。

让我知道它是否有效，我的朋友。

快乐编码！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:50:01.470

问题出在 info.plist 中。在较旧的 xcode 中，“必需的设备功能”是字典类型，而在较新的 Xcode(4.5.1) 中，它是数组类型。

# android - 从文本文件加载字符串值，创建一个 int 并传递给 androidplot

> ID：14138718
> 
> 赞同：0
> 
> 时间：2013-01-03T12:13:18.577
> 
> 标签：android, android-arrayadapter, androidplot

编辑：作为我完全傻瓜解决，并没有注意到我的 2 个活动之间的文件名是错误的。没关系，感谢所有帮助过的人。还在学习，只是希望我可以停止重新学习非常古老的课程！

我是 android 和 java 的新手，我正在尝试做看似简单的事情，但我很挣扎，不知道为什么。

我想从文本文件中加载一个字符串，并将字符串中的数字提取为 int 以在我的应用程序的其他地方使用。我想在一个数组中使用 int 然后与 androidplot 一起使用来绘制图形，我让图形与手动数组一起使用（即我自己输入一些随机数），所以为了简单起见，这里省略了大部分代码。

这是我加载 txt 文件的代码，将其拆分为“”，然后解析 int，但它不起作用。

```
 //actually load the progress file
public void loadDatacomm() {

        //load the asset file
            StringBuilder text = new StringBuilder();
        try {
            BufferedReader br = new BufferedReader(new FileReader("/sdcard/.progress/1gppi.txt"));
            String line;

        while ((line = br.readLine()) != null) {
            String line2[] = line.split(" ");  //split the string to get the progress
            commprogress1 = Integer.parseInt(line2[0]); 
                }

        }
        catch (IOException ex) {
            return;
        } 
```

我猜唯一感兴趣的是我正在构建的android plot中的数组；

```
 Number[] commprogress = {commprogress1, commprogress2, commprogress3, commprogress4, commprogress5, commprogress6, commprogress7, commprogress8, commprogress9, commprogress1}; 
```

当我加载活动时，图表不显示任何值，如果我手动声明 commprogress1、2、3 的值，则图表绘制得很好。

有人能帮助我吗？

编辑我试图加载的文件包含以下内容：

30%完成

它是由应用程序中的另一个活动编写的。

我不知道为什么代码不起作用，我在应用程序的其他地方使用类似的代码从拆分字符串中提取 int（在本例中为 30），但它在这里不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:26:26.640

如果您在尝试访问文件时遇到异常，这可能是由于其他应用程序正在写入文件时的并发性（尽管您只是在读取文件，我希望它不会成为问题）。

无论如何，如果您只想分享活动之间的百分比，我认为使用 [共享偏好](http://developer.android.com/guide/topics/data/data-storage.html#pref)可能更合适

# css - CSS 中的条件

> ID：14138721
> 
> 赞同：0
> 
> 时间：2013-01-03T12:13:20.747
> 
> 标签：css, jsp

我有一个具有以下样式的 test.css 文件：

```
....
#body
{
    font-family:Verdana, sans-serif;
    font-size:10pt;
    margin:0;
    padding:0;
}

div#inscreenalertcontainer
{
    margin:32px;
    padding:16px;
    width:100%;
}
.... 
```

对于 IE，该属性`width:100%;`在`div#inscreenalertcontainer`. 对于其他浏览器，此属性不是必需的。

有没有办法在 test.css 中使用一些条件运算符来做到这一点？由于大约有 100 个 css 文件，我不想创建另外 100 个特定于 IE 的 css 文件，只是为了更改一个属性。

或者是否可以更改 JSP 本身。

这是我的 JSP 代码：

```
<body>
    <div id="InScreenAlertContainer">
    <table  class="inScreenAlert">
    <tr valign="top">
 ....
 ....
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:18:08.923

使用[条件注释](http://www.quirksmode.org/css/condcom.html)：

```
<!--[if IE]>
    <style>
    div#inscreenalertcontainer
    {
        margin:32px;
        padding:16px;
        width:100%;
        /*plus other IE specific rules*/
    }
    </style>
<![endif]--> 
```

这被编程到所有版本的 Internet Explorer 中，以便为这些浏览器提供特定的说明。没有其他浏览器会接受它，这是告诉 IE 执行原始 CSS 之外的其他操作的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:19:00.323

针对 IE 的一种常见方法是将您的 html 标记更改为：

```
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]--> 
```

然后在你的CSS中你可以写：

```
.ie #inscreenalertcontainer {
   width: 100%;
} 
```

这种技术将使您保持代码的可读性和整洁性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:19:02.480

如果该参数不会伤害其他浏览器，您可以将其保留在那里。或者使用它仅将其应用于 IE： [http ://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

您可以选择样式表 hack 或条件注释 (html) 来定位 IE 并添加

```
<style>div#inscreenalertcontainer {width:100%}</style> 
```

在你的头标签中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:21:51.543

将此添加到您网页的标题部分。这是一个很好的链接，可以查看更多[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

```
<!--[if IE]>
div#inscreenalertcontainer
{
    margin:32px;
    padding:16px;
    width:100%;
}
<![endif]--> 
```

# android - 完全在 Android 中创建此字符串

> ID：14138722
> 
> 赞同：0
> 
> 时间：2013-01-03T12:13:32.027
> 
> 标签：android, asp.net, format, http-post, name-value

我想为 Android 和 iOs 构建 2 个相同的产品。iOs 已经可以工作了，但是 android 不行，那是因为字符串的格式。

在 iOs 中，这是：

```
NSString*jsonString = [[NSString alloc] initWithFormat:@"{\"id\":\"%@\",\"longitude\":\"%@\",\"latitude\":\"%@\",\"timestamp\":\"%@\"}", _phonenumber, longitude , latitude, stringFromDate]; 
```

而且我不知道如何在android中完全这样做。这里的格式不同。我现在拥有的是：

```
HttpClient httpclient = new DefaultHttpClient(); 
```

HttpPost httppost = new HttpPost(" [http://www.myserver.nl/locate.php](http://www.myserver.nl/locatie.php) ");

```
try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);

    nameValuePairs.add(new BasicNameValuePair("id", num));
    nameValuePairs.add(new BasicNameValuePair("longitude", longi));
    nameValuePairs.add(new BasicNameValuePair("latitude", lat));
    nameValuePairs.add(new BasicNameValuePair("timestamp", time));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {

} catch (IOException e) {

} 
```

在此先感谢，我在本周末之前需要这个，所以如果你能帮助我，那将不胜感激

我从 iOs 字符串中得到这个结果：

```
{
    "id":"0612833398",
    "longitude":"-143.406417",
    "latitude":"32.785834",
    "timestamp":"10-10 07:56"
} 
```

**好的，这就是我的问题所在。**

是的，我需要将这个确切的字符串发送到服务器上的 asp.net 文件。但我需要知道如何将其与此结合：与 http 帖子

```
HttpPost httppost = new HttpPost("http://www.myserver.nl/locatie.php"); 
```

在我像这样将它与 nameValuePPairs 结合起来之前

```
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:24:44.513

通过创建一个 JosnObject 来创建与您在 IOS 中相同的字符串：

```
JSONObject json = new JSONObject(); 
json.put("id", "0612833398"); 
json.put("longitude", "-143.406417"); 
json.put("latitude", "32.785834"); 
json.put("timestamp", "10-10 07:56"); 
```

现在，如果您为 json 对象打印，您将得到以下字符串：

```
{"id":"0612833398","longitude":"-143.406417","latitude":"32.785834",
                                                   "timestamp":"10-10 07:56"} 
```

并将 JSONObject 发布到服务器：

```
 try {
        HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost("http://www.myserver.nl/locatie.php");
        httppost.setHeader("Content-type", "application/json");

// Create json object here...
    JSONObject json = new JSONObject(); 
    json.put("id", "0612833398"); 
    json.put("longitude", "-143.406417"); 
    json.put("latitude", "32.785834"); 
    json.put("timestamp", "10-10 07:56"); 

/// create StringEntity with current json obejct

    StringEntity se = new StringEntity(json.toString()); 
    se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    httppost.setEntity(se); 

        HttpResponse response = httpclient.execute(httppost);
        String temp = EntityUtils.toString(response.getEntity());

    } catch (ClientProtocolException e) {

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:17:59.543

要创建一个字符串，您可以使用 String.format()。在这种情况下，语法与 Objective-C 非常相似：

```
String s = String.format("{\"id\":\"%s\",\"longitude\":\"%s\",\"latitude\":\"%s\",\"timestamp\":\"%s\"}", num, long, lat, time); 
```

HTTP Post 是这样的：

```
HttpPost postMethod = new HttpPost(url);

try {

HttpParams params = new BasicHttpParams();

params.setParameter(name, value);

postMethod.setParams(params);

httpClient.execute(postMethod);

} catch (Exception e) {

} finally {

postMethod.abort();

} 
```

# c# - 如何编写测试用例？

> ID：14138723
> 
> 赞同：9
> 
> 时间：2013-01-03T12:13:32.743
> 
> 标签：c#, testing, testcase

我想在编写代码之前学习如何编写测试用例。我读了一篇关于测试驱动开发的文章。我想知道开发人员如何编写测试用例？例如这个方法：

```
 public int divideNumbers(int num1, int num2)
    {
      return num1 / num2;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:19:30.700

我们现在从一个空白项目开始。你想做某事，比如说除以两个数字。因此，您编写了一个测试来描述您想要做什么：

```
Assert.That(divide(10,2), Eq(5)) 
```

该测试为您提供了一个入口点：它描述了该`divide`方法的可接受接口。因此，您继续实施它`int divide(int x, int y)`，例如。

编写描述您希望从代码中获得什么的测试。你不需要考虑太多。编写期望的最正常方式可能是设计代码的最佳方式，然后您可以实现它以满足您的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:25:30.180

测试有几个步骤。从`MSDN`;

*   [测试概述](http://msdn.microsoft.com/en-us/library/aa292191%28v=vs.71%29.aspx)
*   [单元测试](http://msdn.microsoft.com/en-us/library/aa292197%28v=vs.71%29.aspx)
*   [集成测试](http://msdn.microsoft.com/en-us/library/aa292128%28v=vs.71%29.aspx)

在你的情况下；

```
Assert.AreEqual(divideNumbers(8, 4), 2); 
```

`Assert``true`类使用/`false`命题验证单元测试中的条件。你应该写你的测试用例你期望他们的结果。您可以`TestMethod`为您的测试方法使用属性。有一篇关于[为您的 c# 代码创建单元测试](http://www.codeproject.com/Articles/391465/Creating-Unit-tests-for-your-csharp-code)的很酷的帖子。分析得非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:32:42.820

从您要开发的函数/类/组件的存根开始。它应该编译，但故意不（还）做它应该做的事情。

例如：

```
public int divideNumbers(int num1, int num2)
{
    throw new NotImplementedException();
} 
```

或者

```
 return -42; 
```

考虑预期的行为，将存根视为黑盒的接口。不关心实施（还）。想想接口的“契约”：X进去，Y出去。

识别标准案例和重要的EGDE案例。为他们编写测试。

对于整数除法（假设我们从头开始编写），实际上有很多情况需要考虑：有和没有余数、n/1、n/0、0/n、0/0、负数等。

```
Assert.IsTrue(divideNumbers(4,4) == 1);
Assert.IsTrue(divideNumbers(4,3) == 1);
Assert.IsTrue(divideNumbers(4,2) == 2);
Assert.IsTrue(divideNumbers(4,1) == 4);
Assert.Throws<ArgumentException>(() => divideNumbers(4,0));

Assert.IsTrue(divideNumbers(0,4) == 0);
Assert.Throws<ArgumentException>(() => divideNumbers(0,0));

Assert.IsTrue(divideNumbers( 4,-2) == -2);
Assert.IsTrue(divideNumbers(-4, 2) == -2);
Assert.IsTrue(divideNumbers(-4,-2) ==  2);

Assert.IsTrue(divideNumbers( 4,-3) == -1);
Assert.IsTrue(divideNumbers(-4, 3) == -1);
Assert.IsTrue(divideNumbers(-4,-3) ==  1); 
```

编译并运行单元测试。他们都失败了吗？如果不是，为什么？也许其中一项测试没有按预期工作（测试也可能有问题！）。

现在，开始实施，直到不再有测试失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:27:38.380

首先要意识到理论与实践之间的差异。

任何现实生活中的系统都会有很容易通过 TDD 创建的东西，而有些则不是。

最后一组是一切都依赖于环境，当在一个不寻求抽象环境假设但务实地接受这些假设的系统上工作时。

该组可以以 TDD 方式开发，但它需要额外的工具和对软件工厂的扩展。

对于 .Net，这将是工具和扩展，例如 MS 虚拟测试实验室和 SpecFlow。

我想传达的是**这取决于**。

对于非常简单的组件/单元测试，想法是在编写要测试的代码之前编写一个失败的测试用例，并在测试成功运行时结束开发。

对于集成测试及其他测试（系统测试），除了考虑要测试的内容之外，您还需要考虑如何将测试环境带入某种已知状态。

# nhibernate - 带有 byte[] 列的 Orchard 迁移引发 NHibernate 长度映射错误

> ID：14138725
> 
> 赞同：1
> 
> 时间：2013-01-03T12:13:36.693
> 
> 标签：nhibernate, c#-4.0, file-upload, orchardcms

我在自定义 Orchard 模块中为新表创建了数据迁移。该表需要将上传的文件数据存储在其中一列中。这是相关列的迁移代码（为简洁起见，删除了其他列）：

```
SchemaBuilder.CreateTable("Attachment", table => table
    .Column<byte[]>("Content", col => col.WithLength(2147483647).WithType(DbType.Binary).Unlimited())
); 
```

我尝试添加/删除 WithLength 和 Unlimited 方法，但都没有阻止错误的发生。这是 NHibernate 异常：

```
The length of the byte[] value exceeds the length configured in the mapping/parameter.
  at NHibernate.Type.AbstractBinaryType.Set(IDbCommand cmd, Object value, Int32 index)
  at NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index)
  at NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index) 
```

编辑：我一直在玩诸如添加二进制长度约定之类的东西（请参阅此处：[NHibernate Image Storage - The length of the byte[] value超出了配置的长度](https://stackoverflow.com/questions/12204306/nhibernate-image-storage-the-length-of-the-byte-value-exceeds-the-length-con)），这也没有帮助，但看起来好像DbType.Binary 有 8000 字节的限制，这是我要达到的上限。来自[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.data.dbtype%28v=vs.100%29.aspx)：DbType.Binary - 可变长度的二进制数据流，范围在 1 到 8,000 字节之间。答案是使用不受此限制的 SqlDbType.Image，但 Orchard Schema Builder 无法使用它。

编辑 2：我忘了添加 - 当我调用`IRepository<T>.Create()`或`IRepository<T>.Update()`创建或更新存储在附件表中的域对象时发生错误。

**有没有办法覆盖/扩展 SchemaBuilder 以便我可以使用 SqlDbType.Image 作为列类型**？我正在使用果园 1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:45:00.370

因此，问题似乎源于 Orchard 必须同时支持 SQL Server 和 SQL Compact，而 Compact Edition 不支持 VARBINARY(MAX) 的事实。我能看到的唯一前进方法是在 Orchard 中已有的东西之上创建我自己的模式构建器。我将采用的方法是创建一个自定义 CreateColumnCommand 和一个自定义 DataMigrationInterpreter（加上我需要的任何其他相关内容）来为我执行模式生成。一旦它工作，我会发布相关的代码。如果有人认为这种方法有缺陷，请大声疾呼！

编辑：但是，经过仔细检查，SQL Server CE 支持 Image 类型，所以我仍然不知道为什么 Orchard 无法做到这一点。在没有替代方案的情况下，将继续查看我的自定义解决方案。

# android - Android：带有链接的TextView在LongClick上给出NullPointerException

> ID：14138729
> 
> 赞同：0
> 
> 时间：2013-01-03T12:13:45.177
> 
> 标签：android, textview

我可以通过以下任一方式启用链接：

A）在代码中使用

```
Linkify.addLinks(textView, Linkify.ALL); 
```

B) 在 XML 中

```
android:autoLink="all"    
android:linksClickable="true" 
```

每当我启用链接时，一个长的点击监听器会获取视图的标签，它是一个视图持有者。只要 Text-view 中有任何链接，这个 View-holder 对象就会返回为 null。

我已经尝试使用 XML 和 Code 方法，但它仍然返回一个 null View-Holder 对象！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:04:53.223

使用它来提供指向 textview 的链接，然后实现 longclick 侦听器

```
TextView.setText(Html.fromHtml("<a href=\"your link here">Click here</a> "));
TextView.setMovementMethod(LinkMovementMethod.getInstance()); 
```

# ios - 通过应用内购买解锁完整版的安全方式

> ID：14138730
> 
> 赞同：6
> 
> 时间：2013-01-03T12:13:45.320
> 
> 标签：ios, in-app-purchase

我打算使用应用内购买来解锁我的应用中的一些功能。最安全的方法是什么？

最初我计划在以下位置设置一个 Bool `NSUserDefaults`：

`[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"isPro"];`

但我不确定是否有可能通过“hack”设置此值（`NSUserDefaults`由 iOS 管理，而不是直接由应用程序管理），以便用户不必执行应用程序内购买为了获得完整版。

处理这个问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:31:42.010

是的，修改应用程序首选项相对容易。但这真的重要吗？我敢打赌，任何愿意破解他们的 iPhone 文件系统并修改配置文件以节省一两英镑的人都不会是那种如果无法做到就愿意花钱的人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:53:22.453

通过[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)的安全性是最简单的方法（例如，不要将你的 var 命名为“isPro”，也许它的值不是一个简单的 BOOL，而是让它成为一些“神奇”的整数。不是万无一失，而是另一个减速带开裂。

作为使用的替代方法，`NSUserDefaults`您可以将文件保存到应用程序文件系统，然后在应用程序启动时检查其内容。

不确定是否值得花时间和麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:21:50.280

您可以将其保存在钥匙串中，但在越狱设备上也很容易阅读和更改。所以你应该加密数据。确保通过扫描二进制文件无法在您的应用中轻易找到加密密码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T01:17:49.523

我遇到了一些问题，发现了两种安全存储应用内购买的常用方法：

**1) 使用 NSUserDefaults 的安全版本：**

a）“*安全 NSUserDefaults* ”。此版本的 NSUserDefaults 为任何已保存的秘密项目生成哈希，并在之后为您提供对该项目的此哈希的验证。因此，您可以轻松地处理这种由用户“破解”默认 .plist 的情况。

在这里查看：[https ://github.com/matthiasplappert/Secure-NSUserDefaults](https://github.com/matthiasplappert/Secure-NSUserDefaults)

b）“ *SecureNSUserDefaults* ”。使用 AES 加密的 NSUserDefaults。我在这里的建议不仅仅是存储用于购买的安全布尔值，而是一些用于指示付款是否完成的模糊字符串。

在这里查看：[https ://github.com/nielsmouthaan/SecureNSUserDefaults](https://github.com/nielsmouthaan/SecureNSUserDefaults)

**2) 使用钥匙串**

a）“ *RSSecrets* ”简单类，用于在 KeyChain 中存储键值项。另请参阅此处的讨论：[在应用程序钥匙串中存储应用程序购买收据](https://stackoverflow.com/questions/4978852/storing-in-app-purchase-receipts-in-the-application-keychain)

并检查项目：[https ://github.com/jeffargast/RSSecrets](https://github.com/jeffargast/RSSecrets)

b) “ *STKeychain* ” 这个类主要用于存储 KeyChain 中的登录/密码，但在 MKStroreKit（iOS 设备的流行应用内购买 StoreKit）项目中，他们实际上使用这个类来存储应用内购买。

在这里查看：[https ://github.com/ldandersen/STUtils/blob/master/Security/STKeychain.h](https://github.com/ldandersen/STUtils/blob/master/Security/STKeychain.h)

PS我还没有在我的项目中使用任何这些类，但考虑使用“RSSecrets”

# blackberry-10 - Blackberry 10 - 在 ApplicationA 中创建的 ApplicationB 中显示自定义组件

> ID：14138737
> 
> 赞同：0
> 
> 时间：2013-01-03T12:14:08.147
> 
> 标签：blackberry-10, blackberry-cascades

我想创建一个应用程序，它在 ApplicationB 中显示一个在 ApplicationA 中创建的自定义组件（就像我们在 C#.NET 中维护 UI 项目一样）。这就像允许 ApplicationB 使用来自 ApplicationA 的通用组件屏幕并在渲染屏幕之前修改其内容（例如 Title）。我可以创建自定义组件，但无法将其引用到新项目以供使用，并且还想知道如何处理在自定义组件中创建的控件的点击事件，他们应该为其实现一些事件订阅机制。

我正在使用以下 URL 创建自定义组件： [https ://developer.blackberry.com/cascades/documentation/ui/custom_components/custom_components_tutorial.html](https://developer.blackberry.com/cascades/documentation/ui/custom_components/custom_components_tutorial.html)

但是上面的教程没有展示如何将事件从父组件绑定到自定义组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:02:04.853

与您在 Cascades 中描述的最接近的是[Cards](https://developer.blackberry.com/cascades/documentation/device_platform/invocation/cards.html)。但是，听起来这不是您想要的。如果您可以完全在 QML 中实现您的 UI 元素，并将它们放在共享目录中，ApplicationB 可以导入这些元素并使用它们。如果您在 C++ 中实现，您可以创建一个库（静态或动态）并将 ApplicationB 链接到该库。

# android - Roboguice 2.0 @将单例注入 POJO

> ID：14138745
> 
> 赞同：1
> 
> 时间：2013-01-03T12:14:39.877
> 
> 标签：android, dependency-injection, singleton, roboguice

我创建了一个用@Singleton 注释的设置类。此类已成功注入我的 RoboActivities。但是，当我尝试将其注入 POJO（普通的旧 java 对象）时，我得到一个空指针异常（即未注入）。这个 POJO 在不同的线程中实例化（我不知道它是否相关）。最后一件事，如果我想注入该类的实例，是否必须显式创建该类的默认构造函数？
感谢您的帮助，
托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:33:50.917

我的错，问题是我没有使用以下方法实例化属于另一个类的 POJO：

```
RoboGuice.getInjector(context).injectMembers(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-28T11:33:42.703

这个链接很好地解释了带有 roboguice 的单例：

它解释了一个非常重要的警告/反模式。

[阿童木示例](https://code.google.com/p/roboguice/source/browse/astroboy/src/main/java/org/roboguice/astroboy/controller/Astroboy.java)

```
@Singleton
public class Astroboy {
    // Because Astroboy is a Singleton, we can't directly inject the current Context
    // since the current context may change depending on what activity is using Astroboy
    // at the time.  Instead, inject a Provider of the current context, then we can
    // ask the provider for the context when we need it.
    // Vibrator is bound to context.getSystemService(VIBRATOR_SERVICE) in RoboModule.
    // Random has no special bindings, so Guice will create a new instance for us.
    @Inject
    Provider<Context> contextProvider;
    @Inject
    Vibrator vibrator;
    @Inject
    Random random;

    public void say(String something) {
        // Make a Toast, using the current context as returned by the Context
        // Provider
        Toast.makeText(contextProvider.get(),
                "Astroboy says, \"" + something + "\"", Toast.LENGTH_LONG)
                .show();
    }

    public void brushTeeth() {
        vibrator.vibrate(
                new long[] { 0, 200, 50, 200, 50, 200, 50, 200, 50, 200, 50,
                        200, 50, 200, 50, 200, 50, 200, 50, 200, 50, 200, 50, },
                -1);
    }

    public String punch() {
        final String expletives[] = new String[] { "POW!", "BANG!", "KERPOW!",
                "OOF!" };
        return expletives[random.nextInt(expletives.length)];
    }
} 
```

# c - 为什么在将 AVFrame 从一种格式转换为另一种格式时需要缓冲区？

> ID：14138751
> 
> 赞同：5
> 
> 时间：2013-01-03T12:14:53.137
> 
> 标签：c, ffmpeg

我指的是[这个](https://github.com/mpenkov/ffmpeg-tutorial/blob/master/tutorial01.c)源代码。此处提供的代码片段来自代码中的第 (114-138) 行。这是使用 ffmpeg 库。谁能解释为什么程序中需要以下代码？

```
// Determine required buffer size and allocate buffer
numBytes=avpicture_get_size(PIX_FMT_RGB24, pCodecCtx->width,
              pCodecCtx->height);
buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t)); 
```

从某种意义上说，我理解以下函数是将目标帧与缓冲区相关联。但是有什么必要呢？

```
avpicture_fill((AVPicture *)pFrameRGB, buffer, PIX_FMT_RGB24, pCodecCtx->width, pCodecCtx->height); 
```

PS：我尝试删除缓冲区并编译程序。它被编译了。但它显示以下运行时错误。

> [swscaler @ 0xa06d0a0] 错误的 dst 图像指针
> 分段错误（核心转储）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T12:36:39.433

我认为让您感到困惑的是，AVFrame 似乎有两个分配。

第一个，用 完成`avcodec_alloc_frame()`，为通用框架及其元数据分配空间。此时，保持帧正确所需的内存仍然未知。

`width`然后从另一个源填充该帧，然后通过传递和`height`颜色深度来指定需要多少内存：

```
numBytes=avpicture_get_size(PIX_FMT_RGB24, pCodecCtx->width, pCodecCtx->height); 
```

此时帧和它的内容是两个独立的对象（一个 AVFrame 和它的*缓冲区*）。您将它们与这段代码放在一起，这实际上根本不是*转换*：

```
avpicture_fill((AVPicture *)pFrameRGB, buffer, PIX_FMT_RGB24,
pCodecCtx->width, pCodecCtx->height); 
```

上面的代码所做的是“告诉” `pFrameRGB`：“*你是一个 RGB-24 帧，这么宽，这么高，你需要的内存在‘缓冲区’中*”。

然后，只有这样，您才能随心所欲地使用`pFrameRGB`. 否则，您尝试在没有画布的框架上绘画，并且油漆溅落 - 您会得到核心转储。

一旦有了框架（AVFrame）和画布（缓冲区），就可以使用它：

```
// Read frames and save first five frames to disk
i=0;
while(av_read_frame(pFormatCtx, &packet)>=0) {
    // Is this a packet from the video stream?
    if(packet.stream_index==videoStream) {
      // Decode video frame
      avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished,
&packet); 
```

上面的代码提取视频帧并将其解码为`pFrame`（原生格式）。我们可以在这个阶段保存`pFrame`到磁盘。我们不需要`buffer`，然后我们就不能使用`pFrameRGB`.

相反，我们使用`sws_scale()`.

要将帧转换为另一种格式，我们将源复制到不同的目标。这既是因为目标帧可能比源帧所能容纳的更大，而且因为某些转换算法需要在未转换的源的更大区域上进行操作，因此就地变形源会很尴尬。此外，源框架由库处理，并且可能无法安全写入。

## 更新（评论）

*`data[]`pFrame/pFrameRGB 指向什么*：**最初，什么都没有**。它们为 NULL，这就是为什么使用未初始化的 AVframe 会导致核心转储。`linesize[]`您使用`avpicture_fill`（适合空缓冲区，加上图像格式和大小信息）或解码函数之一（执行相同操作）初始化它们（等）。

*为什么 pFrame 不需要内存分配*：好问题。答案在 used 函数的[原型和布局](http://cekirdek.pardus.org.tr/~ismail/ffmpeg-docs/libavcodec_2utils_8c.html#eb2441bb9d76c881fc86a0085b2f13d2)中，其中*图片*参数是这样描述的：

> 将存储解码视频帧的 AVFrame。使用 avcodec_alloc_frame 获取 AVFrame，**编解码器将为实际的位图分配内存**。使用默认的 get/release_buffer()，解码器会释放/重用它认为合适的位图。使用覆盖的 get/release_buffer()（需要 CODEC_CAP_DR1），用户决定解码器解码到哪个缓冲区，一旦不再需要数据，解码器就会告诉用户，用户应用程序此时可以释放/重用/保留内存它认为合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:43:21.817

ffmpeg 在帧缓冲区中以特定顺序存储帧的像素数据。存储取决于图片格式（YUV、RGB、）。

avpicture_fill() => 这个函数获取原始缓冲区并设置 AVPicture 结构的各种指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:25:42.230

ffmpeg 或类似的库不会进行就地缓冲区转换。首先是关于不丢失原始数据和使用不同缓冲区的速度。其次，如果你做了很多转换，你可以预先分配需要的缓冲区。

# spring - 如何在 Spring Roo 中使用 jsp 文件？

> ID：14138752
> 
> 赞同：2
> 
> 时间：2013-01-03T12:15:09.887
> 
> 标签：spring, jsp, spring-roo, jspx

我在 STS 中做了一个简单的 Roo 项目。它创建了几个 .jspx 文件，我猜是模板。我希望能够在其中添加一些 HTML 和 CSS，但是每当我更改任何重要的内容时，都会出现异常。例如，当我添加一些基本的 HTML 时：

```
<div><span><p>Hello</p></span></div> 
```

我得到这个例外：

```
SEVERE: Servlet.service() for servlet [msa] in context with path [/msa] threw exception [Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/layouts/default.jspx'.] with root cause
org.apache.jasper.JasperException: /WEB-INF/views/homepage/index.jspx (line: 14, column: 6) The content of elements must consist of well-formed character data or markup. 
```

或者假设我需要遍历从控制器获得的列表：

```
<c:forEach var="announcement" items="${results}">
                    <option value ="10"><c:out value="${announcement.author}"/></option>
</c:forEach> 
```

然后我得到这个异常：

```
SEVERE: Servlet.service() for servlet [msa] in context with path [/msa] threw exception [Request processing failed; nested exception is org.apache.tiles.impl.CannotRenderException: ServletException including path '/WEB-INF/layouts/default.jspx'.] with root cause
org.apache.jasper.JasperException: /WEB-INF/views/homepage/index.jspx (line: 12, column: 54) The prefix "c" for element "c:forEach" is not bound. 
```

我不确定为什么对这个模板文件进行简单的更改如此困难。经过一番搜索，我发现.jspx文件的语法与.jsp文件的语法不同，不建议手动编辑。如何将 Roo 配置为使用 .jsp 文件？这甚至可能吗？

**编辑：**这是整个文件的示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:spring="http://www.springframework.org/tags" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" version="2.0">
  <jsp:directive.page contentType="text/html;charset=UTF-8"/>
  <jsp:output omit-xml-declaration="yes"/>
  <spring:message code="label_homepage_index" htmlEscape="false" var="title"/>
  <util:panel id="title" title="${title}">
    <spring:message code="application_name" htmlEscape="false" var="app_name"/>
    <h3>
      <spring:message arguments="${app_name}" code="welcome_titlepane"/>
    </h3>

    <div><span><p>Hello</p></span></div>

    <c:forEach var="announcement" items="${results}">
                        <option value ="10"><c:out value="${announcement.author}"/></option>
    </c:forEach>

    </util:panel>
</div> 
```

您可以注释掉我给出的第一个示例，以查看第二个示例的问题。但问题实际上并不在于这些特定情况，而是我不能在模板中使用常规 HTML，这将使我的页面编写*变得*更加困难。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:51:32.740

关于你的第一个例子，你似乎把你的东西放在了错误的地方。也许粘贴整个文件（它很短），以便我们查看是否真的有错误。

在第二个示例中，异常显示“元素“c:forEach”的前缀“c”未绑定。”。这通常意味着您的 xmlns 前缀可能未在 jspx 标头中声明。

# pdf - 找不到用于向 PDF 添加数字签名的非托管 DLL

> ID：14138754
> 
> 赞同：1
> 
> 时间：2013-01-03T12:15:17.923
> 
> 标签：pdf, dll, unmanaged, digital-signature

我很难找到能够进行数字签名 PDF 的库。

我能够创建用于签名的[.Net 应用程序](https://stackoverflow.com/questions/378247/digitally-sign-pdf-files)，但现在我需要可以在没有 .Net 框架的情况下工作的 dll。

有谁知道好的轻量级库？商业/非商业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:23:04.867

我不确定它是否归类为“轻量级”，但您可以尝试使用[Amyuni PDF Creator ActiveX](http://www.amyuni.com/en/developer/pdfcreatoractivex/features/)（商业）。您可以从 C++、Delphi、VB 等中使用它。当前版本 (4.5) 大约需要 4.7Mb。

查看[DigitalSignature](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_ACTIVE_X/Using_the_PDF_Creator_Control/Methods/Document_Handling/DigitalSignature_Method.htm)方法的文档以获取更多详细信息。

文档中的 VB 示例代码：

```
Private Sub cmdSingDocument_Click ()    
With PDFCreactiveX1    
.Open( "document.pdf", "" )    
.DigitalSignature("Amyuni Dev Signature", "Testing",    
 "signatureImage.jpg", "Montreal", 1, 100, 100, 400, 200, 1 + 2 + 4 + 8)    
.Save("signed.pdf", "" )    
End With    
End Sub 
```

*通常的免责声明适用*。

# php - 如何使用 .htaccess 创建动态子域？

> ID：14138765
> 
> 赞同：0
> 
> 时间：2013-01-03T12:15:43.243
> 
> 标签：php, apache, .htaccess

> **可能重复：**
> [使用 .htaccess (PHP) 即时创建子域](https://stackoverflow.com/questions/586129/create-subdomains-on-the-fly-with-htaccess-php)

我想使用.htaccess 具有以下域结构：

```
domain.com        REWRITES TO   Home Page (index.php)

www.domain.com    REWRITES TO   Home Page (index.php)

blog.domain.com   REWRITES TO   index.php?page=blog

*.domain.com      REWRITES TO   index.php?page=user&id=* (where * can be anything) 
```

有没有办法创造这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:12:05.707

您还没有说明您希望重写使用哪个主机名，所以我假设 www 子域

```
RewriteCond %{HTTP_HOST} ^([w]{3,3}[.]{1,1}){0,1}domain.com$
RewriteRule ^$ http://www.domain.com/index.php [R,L]

RewriteCond %{HTTP_HOST} ^blog.domain.com$
RewriteRule ^.*$ http://www.domain.com/index.php?page=blog [R,L]

RewriteCond %{HTTP_HOST} !^([w]{3,3}[.]{1,1}){0,1}domain.com$
RewriteCond %{HTTP_HOST} ^([0-9a-zA-Z-]*)[.]domain.com$
RewriteRule ^.*$ http://www.domain.com/index.php?page=user&id=%1 [R,L] 
```

# c# - 网址重写策略

> ID：14138768
> 
> 赞同：1
> 
> 时间：2013-01-03T12:15:46.567
> 
> 标签：c#, asp.net-mvc, url-rewriting

我现在的网址是`domain/{country}/{culture}/{catalog}/{index}`

现在我需要削减 {country} 蛞蝓。

这是最好的方法：

1.  追踪所有旧网址
2.  使用 a 重定向`301`到新的 URL...

在哪里管理这些东西（我不想通过 IIS 管理）？

全球.asax？

# c# - How to filter a dictionary to have items with unique values?

> ID：14138771
> 
> 赞同：7
> 
> 时间：2013-01-03T12:15:58.007
> 
> 标签：c#, .net, linq

Please bear with me if you think I haven't done enough research before asking

**Problem** Just came across a business requirement where we have to make sure the values in a dictionary are unique. i.e., We should filter a dictionary and the result of such filtering should have key value pairs with unique values.

BTW, it is a simple Dictionary with string values and string keys. To clarify more, below are the **sample input and expected output values -**
sourceDictionary would have values like below (just for the sake of representation of data, not syntactically correct) - { {"Item1", "Item One"}, {"Item11", "Item One"}, {"Item2", "Item Two"}, {"Item22", "Item Two"} } for this input, filteredDictionary should look like below - { {"Item1", "Item One"}, {"Item2", "Item Two"} }

**Solution I proposed that is working**

```
 var sourceDictionary = serviceAgent.GetSampleDictionary(); // Simplified for brevity  
    var filteredDictionary =  
        sourceDictionary.GroupBy(s => s.Value)  
            .Where(group => @group.Any())  
            .Select(g => g.First())  
            .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

**Question** Am I making too much logic into it? OR, putting it in other words, is there a simpler way to do this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T12:19:35.733

This line:

```
.Where(group => @group.Any()) 
```

is unnecessary, as you won't get any empty groups anyway. (Also not sure what the '@' is for.)

Other than that, there's not really a simpler way to do this.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:23:59.433

Your method works, but it's not extremely readable. If you create your class this way:

```
class DictionaryValueComparer<T1, T2> : IEqualityComparer<KeyValuePair<T1, T2>>
{
    public bool Equals(KeyValuePair<T1, T2> x, KeyValuePair<T1, T2> y)
    {
        return x.Value.Equals(y.Value);
    }

    public int GetHashCode(KeyValuePair<T1, T2> obj)
    {
        return obj.Value.GetHashCode();
    }
} 
```

Then you can reduce your method to:

```
dictionary = dictionary.Distinct(new DictionaryValueComparer<int, string>()).
    ToDictionary(p => p.Key, p => p.Value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:19:14.190

Why not use the Linq extension method .Distinct()?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:20:04.857

Assuming that it's not a custom type(then you need to implement [`IEqualityComparer<YourType>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx) and pass it to `Distinct`)

```
var distinctDict = sourceDictionary
    .ToDictionary(kv => kv.Key, kv => kv.Value.Distinct()); 
```

[**Demo**](http://ideone.com/3Lpd7C)

```
var sourceDictionary=new Dictionary<string, List<string>>();
sourceDictionary.Add("A", new List<string>() { "A", "A", "B"});
sourceDictionary.Add("B", new List<string>() { "C", "D", "D" });

var distinctDict = sourceDictionary.ToDictionary(kv => kv.Key, kv => kv.Value.Distinct());
foreach(var kv in distinctDict)
    Console.WriteLine("Key:{0} Values:{1}", kv.Key, string.Join(",", kv.Value));
    // "A", "B" and "C", "D" 
```

# mysql - MySQL 从同一个表中更新值与计数

> ID：14138773
> 
> 赞同：8
> 
> 时间：2013-01-03T12:16:16.240
> 
> 标签：mysql, sql, sql-update, subquery

我想要做的是为每位患者设置其唯一的患者代码，该代码以 1 开头，并且不基于行 ID。Id 仅指定顺序。像这样的东西：

```
patient_id  patient_code
    2           1
    3           2
    4           3 
```

这是我的查询：

```
UPDATE patients p1
SET p1.patient_code = (
    SELECT COUNT( * ) 
    FROM patients p2
    WHERE p2.patient_id <= p1.patient_id 
) 
```

但它抛出错误：

```
#1093 - You can't specify target table 'p1' for update in FROM clause 
```

我找到了这个线程：[Mysql error 1093 - Can't specify target table for update in FROM 子句](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause)。
但我不知道如何应用批准的答案来处理 COUNT 所必需的子查询 WHERE。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T12:36:22.697

```
UPDATE
    patients AS p
  JOIN
    ( SELECT 
          p1.patient_id
        , COUNT(*) AS cnt 
      FROM 
          patients AS p1
        JOIN 
          patients AS p2
            ON p2.patient_id <= p1.patient_id 
      GROUP BY 
          p1.patient_id
    ) AS g
    ON g.patient_id = p.patient_id
SET 
    p.patient_code = g.cnt ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:30:59.313

我找到了可行的解决方案，但这只是解决方法：

```
SET @code=0;
UPDATE patients SET patient_code = (SELECT @code:=@code+1 AS code) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:36:03.390

试试这个，

```
UPDATE patients p1 INNER JOIN
(
    SELECT COUNT(*) as count,patient_id
    FROM patients
    group by patient_id  
)p2 
SET p1.patient_code=p2.count
WHERE p2.patient_id <= p1.patient_id 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!2/3e39d6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-11T10:00:45.660

感谢[Mari 的回答](https://stackoverflow.com/a/14139078/5621032)，我找到了解决类似问题的方法。但我想补充一点解释，起初他的回答对我来说并不太清楚。

我想做的很简单，如下所示：

```
UPDATE my_comments AS c 
SET c.comment_responses = (
   SELECT COUNT(c1.*) FROM my_comments AS c1
   WHERE c.uid = c.parent_uid
); 
```

感谢Mari，我找到了如何在不遇到错误的情况下实现这一目标的解决方案`You can't specify target table 'p1' for update in FROM clause`：

```
UPDATE my_comments AS c
INNER JOIN (
    SELECT c1.parent_uid, COUNT(*) AS cnt
        FROM my_comments AS c1
        WHERE c1.parent_uid <> 0
        GROUP BY c1.parent_uid
) AS c2
SET c.comment_responses = c2.cnt
WHERE c2.parent_uid = c.uid; 
```

在获得此解决方案之前，我的问题是 2：

1.  该`parent_uid`字段并不总是包含父级的 id，这就是我`WHERE`在内部连接中添加语句的原因
2.  `GROUP BY`在我自己执行语句之前，我不太明白为什么我需要`SELECT`它，答案是：因为`COUNT`对结果进行分组并真正计算所有内容。为了防止这种行为，`GROUP BY`需要。就我而言，我不必将其分组，`uid`但`parent_uid`可以得到正确的计数。如果我将其分组，`uid`则`COUNT`始终为 1，但`parent_uid`结果中存在多次。我建议您`SELECT`在执行完整语句之前自行检查语句以检查它是否是您期望的结果`UPDATE`。

# javascript - 使用 VS 2012 调试 JavaScript

> ID：14138787
> 
> 赞同：0
> 
> 时间：2013-01-03T12:17:01.217
> 
> 标签：javascript, visual-studio-2012

我使用 VS 2010 很长一段时间，实际上能够在页面的 javascript 中放置断点并调试代码。现在，有了 VS 2012，我再也不能这样做了。有谁知道为什么或是否有调试方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:22:35.687

您是否检查了从 VS2012 运行应用程序时使用的默认浏览器是什么？请注意，您只能使用 IE 调试 JavaScript 文件

# javascript - JavaScript 向下钻取日期选择器

> ID：14138792
> 
> 赞同：0
> 
> 时间：2013-01-03T12:17:20.887
> 
> 标签：javascript, jquery-ui, datepicker

有没有人知道 Javascript 日期选择器，它可以让你从某个十年向下钻取到给定的一天？例如，最初日历只会显示几十年，然后选择十年时的年份，然后是月份等等......如果我没记错的话，Windows 7 / Vista 有一个与此类似的系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:58:58.117

看起来我将修改[Bootstrap Datepicker](https://github.com/eternicode/bootstrap-datepicker)来做到这一点。

# java - 如何以编程方式将 TableRow 从 xml 添加到 TableLayout？

> ID：14138793
> 
> 赞同：9
> 
> 时间：2013-01-03T12:17:25.090
> 
> 标签：java, android, xml, tablelayout, tablerow

我是 Android 新手，我正在尝试以编程方式将我已经用 xml 制作的 TableRow 添加到 TableLayout 中。我正在强制关闭，大多数是 NullPointerExcpetions。

这是我的java类

```
public class DayFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.subjects_list, container, false);

    TableLayout tl = (TableLayout) view.findViewById(R.id.tl);
    TableRow tr = (TableRow) view.findViewById(R.id.tr_row);

            tl.addView(tr); //not working, obviously im missing something

    //xml parsing stuff

            return view;
 }
} 
```

这是我的 TableLayout 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/horizontalScrollView1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingTop="5dp" >

<ScrollView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:orientation="vertical" >

    <TableLayout
        android:id="@+id/tl"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <include
            android:id="@+id/header"
            layout="@layout/table_header" />

        <include android:id="@+id/h_divider"
            layout="@layout/horizontal_divider"/>

    </TableLayout>
</ScrollView>

</HorizontalScrollView> 
```

和 TableRow：

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tr_row"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/tv_hour"
    android:layout_weight="1"
    android:gravity="center"
    android:padding="8dp"
    android:textSize="15sp"
    android:textStyle="bold" />

<View
    android:layout_weight="1"
    android:background="@drawable/vertical_cell_divider" />

<TextView
    android:id="@+id/tv_subject"
    android:layout_weight="1"
    android:gravity="left"
    android:padding="8dp"
    android:textSize="18sp" />

<View
    android:layout_weight="1"
    android:background="@drawable/vertical_cell_divider" />

<TextView
    android:id="@+id/tv_start"
    android:layout_weight="1"
    android:gravity="left"
    android:padding="8dp"
    android:textSize="18sp" />

<TextView
    android:id="@+id/tv_bar"
    android:layout_weight="1"
    android:gravity="left"
    android:textSize="18sp" />

<TextView
    android:id="@+id/tv_end"
    android:layout_weight="1"
    android:gravity="left"
    android:padding="8dp"
    android:textSize="18sp" />

</TableRow> 
```

我尝试了很多不同的方法来实现它，但仍然没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T12:20:33.370

替换代码：

```
TableRow tr = (TableRow) view.findViewById(R.id.tr_row);
tl.addView(tr); //not working, obviously im missing something 
```

和

```
View tr = inflater.inflate(R.layout.table_row_layout, null,false);
tl.addView(tr); //not working, obviously im missing something 
```

# sql-server - “文件”附近的语法不正确

> ID：14138794
> 
> 赞同：1
> 
> 时间：2013-01-03T12:17:27.560
> 
> 标签：sql-server, sql-server-2008

我正在尝试创建一个名为 FileTypes 的简单表。

我尝试了以下方法：

```
 create table TestDB.dbo.FileTypes(    
 Date datetime not null, 
 File varchar(100) not null,
 Type varchar(20) not null ) 
```

但我收到一条错误消息：

```
 Incorrect Syntax near 'File' & 
 Incorrect Syntax near varchar(100) and varchar(20).Expecting SELECT, or '(' 
```

这是怎么回事？请帮忙..谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:19:52.447

尝试将`Date`,`File`和`Type`放在方括号中 - 它们是 SQL 中的保留字。

```
create table TestDB.dbo.FileTypes(    
    [Date] datetime not null, 
    [File] varchar(100) not null,
    [Type] varchar(20) not null ) 
```

# actionscript-3 - 如何在 Flex 中将弹出窗口设为全局？

> ID：14138800
> 
> 赞同：0
> 
> 时间：2013-01-03T12:17:39.907
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, mxml

实际上在我的 Flex 应用程序中有一些弹出窗口，我想在这个弹出窗口中取一些值但是这些值正在出现`NULL`

那么如何将弹出窗口设为全局呢？因为我们在全球范围内使用这些值。

请给建议...

```
Edit 
```

我正在编辑一些代码......

```
Main.mxml(Main Aplication),    Demo1.mxml(PopUpWindow),    Demo2.mxml(PopUpWindow) 
```

现在在 Demo1.mxml 有变量像......

```
[Bindable]private var arrayC:ArrayCollection=new ArrayCollection();//Hear Some value their. 
```

现在我想在 Demo2.mxml 中使用 arrayC 然后..

```
public var variable1:Demo1=new Demo1();
var ac:ArrayCollection = new ArrayCollection();
ac = variable1.arrayC; 
```

但是听说 ac 包含 Null Value 为什么？

然后，现在我在想 Demo2.mxml(PopUpWindow) 正在转换为全局范围，所以它的值 Used in Any Where 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:03:10.187

如果您在全局范围内使用这些值，那么无论您所说的“将弹出窗口设置为全局”是什么意思，我强烈怀疑单例事件调度程序会为您提供最佳服务。

```
package com.example.demo.models {
    import flash.events.IEventDispatcher;
    import flash.events.EventDispatcher;
    [Bindable]
    class MyGlobalStuff extends EventDispatcher {
        public var someGlobalValue:*;

        private var _instance:MyGlobalStuff;

        public function MyGlobalStuff (lock:SingletonLock, target:IEventDispatcher=null) {
            super(target);
            if(!(lock is SingletonLock)) {
                throw(new Error("MyGlobalStuff is a singleton, please do not make foreign instances of it"));
            }
        }

        public static function getInstance():MyGlobalStuff {
             if(!_instance) {
                  _instance = new MyGlobalStuff (new SingletonLock());
             }
             return _instance;
        }
    }
}
class SingletonLock{} 
```

这个想法是这样的：您将在弹出窗口中绑定到

```
{myStuffModel.someGlobalValue} 
```

myStuffModel 将在您的 mxml 中初始化为：

```
protected var myStuffModel:MyStuffModel = MyStuffModel.getInstance(); 
```

然后在整个应用程序中的任何其他类中，您可以通过单例模型绑定或访问完全相同的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:22:03.877

Null 因为您尝试创建新实例，以便每个实例都有自己的状态。

另外我打赌你不能访问声明为私有的arrayC ArrayCollection 变量，所以你不能访问。

需要遵循几个步骤

`[Bindable]public var arrayC:ArrayCollection=new ArrayCollection();`//创建公共变量

为您的应用程序使用单例类

```
package com.foo.bar {

public class Model {

    private static var instance : Model;

    public function Model( enforcer : SingletonEnforcer ) {}

    public static function getInstance() : Model {
        if (!instance) {
            instance = new Model( new SingletonEnforcer() );
        }
        return instance;
    }

    public var arrayC:ArrayCollection = new ArrayCollection();
}
}

class SingletonEnforcer{} 
```

更多细节[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)

```
private var popup:Demo1;
popup = PopUpManager.createPopUp(this,Demo1,true) as Demo1;    
popup.arrayC =  Model.getInstance().arrayC; // Here set value from Model class
PopUpManager.centerPopUp(popup); 
```

假设您尝试访问 Demo2.mxml 中的 demo1.mxml arrayC 变量

```
var demo1_arrayC = Model.getInstance().arrayC; 
```

请注意，您可以在应用程序中的任何位置访问 arrayC arraycollection，例如 Demo2.mxml、Demo3...等。

但更好的是我们必须避免单例类（单元测试困难..等）。

# php - 带身份验证的 PHP 登录脚本，阻止用户访问特定页面

> ID：14138802
> 
> 赞同：0
> 
> 时间：2013-01-03T12:17:52.340
> 
> 标签：php, mysql

我有一个登录脚本，它检查权限 id 是 5 = admin、6 = employee 还是 7 = student。

请检查以下内容：

```
// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql = "SELECT * FROM users WHERE username='$myusername' and password='$mypassword'";
$result = mysql_query($sql);

// Mysql_num_row is counting table row
$count = mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){   
// Register $myusername, $mypassword and redirect to file "main.php"
$_SESSION["myusername"] = $myusername;
$_SESSION["mypassword"] = $mypassword;

while($count = mysql_fetch_assoc($result)) {
                              //echo $row['Username'];
                              //echo $row['access_level'];

                              if ($count['AuthorityId']== 5) {
                              //add custom content here for this user access level
                              header("location: adminpage.php");
                              exit();
                              } // end of if

  else if ($count['AuthorityId']== 6 ){
  //add custom content here for this user access level
    header("location: employeepage.php");
     exit();
  } // end of else if
  else{
    header("location: studentpage.php");
     exit();
      }

} // end of while 
}
else if( $myusername == '' || $mypassword == '' ){
echo '<script type="text/javascript">
alert("There are empty fields!");
</script>'; 
}
else {
echo '<script type="text/javascript">
alert("Wrong Username or Password")
</script>';
}
?> 
```

当用户是管理员时，他会访问 adminpage.php，但是当我直接输入employeepage.php 的 url 时，用户可以访问它。如何限制用户访问其他页面？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:20:56.933

将权限存储在另一个会话变量中，如下所示：

```
if ($count['AuthorityId']== 5) {
    //add custom content here for this user access level
    $_SESSION['authority'] = 5;
    header("location: adminpage.php");
    exit();
} // end of if 
```

然后使用：

```
if($_SESSION['authority'] != 5){
    die();
    // Or something more useful like a redirect
} 
```

在受限页面上。

# grails - grails 测试应用程序集成覆盖率给出错误

> ID：14138809
> 
> 赞同：0
> 
> 时间：2013-01-03T12:18:11.260
> 
> 标签：grails

我的代码

```
def baseRecordList = DealerBaseInfo.findAll("from DealerBaseInfo as dealers",[cache: false]) 
```

在里面给出以下错误`PriorApprovalController.groovy`

```
groovy.lang.MissingMethodException: No signature of method: DealerBaseInfo.findAll() is applicable for argument types: () values: []
Possible solutions: findAll(), findAll(), findAll(groovy.lang.Closure), findAll(java.lang.Object), findAll(java.lang.String), findAll(groovy.lang.Closure)
at DealerBaseInfo.findAll(DealerBaseInfo.groovy)
at DealerBaseInfo$findAll.call(Unknown Source)
PriorApprovalController.<init>(PriorApprovalController.groovy:37)
... 42 more
| Error Exception occurred trigger event [TestPhasesEnd]: Could not create a new instance of class [PriorApprovalController]!` 
```

grails 版本是 2.1.1 和代码覆盖插件 1.2.5 为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:13:38.547

查看 findAll() 支持的签名： http: [//grails.org/doc/2.1.0/ref/Domain%20Classes/findAll.html](http://grails.org/doc/2.1.0/ref/Domain%20Classes/findAll.html)

要使用 queryParams，我认为您应该执行以下操作：

```
def baseRecordList = DealerBaseInfo.findAll("from DealerBaseInfo as dealers", [], [cache: false]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:04:45.927

实际上，由于 findAll 方法的类级别访问而出现错误我已经在域中为 findAll 编写了一个静态方法并在控制器中访问该方法然后它起作用了

# android - 小部件未出现在 android 4.1 和 4.2 中

> ID：14138812
> 
> 赞同：0
> 
> 时间：2013-01-03T12:18:39.923
> 
> 标签：android, android-widget

我创建了一个带有小部件的应用程序，当在模拟器中使用 android 2.2 测试我的应用程序时一切正常，但是在我的带有 android 4.2 的 Galaxy 设备中，我的小部件没有显示在小部件区域中！有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T13:19:56.857

尝试这个：

第 1 步：向您的应用添加活动。

步骤#2：从主屏幕启动器启动该活动。

步骤#3：然后去寻找你的应用小部件。

`BroadcastReceivers`在 Android 3.1+ 上被禁用，直到直接调用组件（例如，活动）（例如，从启动器运行）。`AppWidgetProvider`延伸`BroadcastReceiver`。根据主屏幕实现，这可能意味着在直接调用组件之前，您的应用小部件不会出现在应用小部件列表中。

# sql - sql查询获取合作次数

> ID：14138813
> 
> 赞同：2
> 
> 时间：2013-01-03T12:18:39.757
> 
> 标签：sql

我需要有关 SQL 查询的帮助。我有这个连接表，有 22486 行。

idPerson 是制作电影的人，pesonType '1' 是演员，'2' 是导演。我需要导演和演员以及他们合作电影的人数。

例如，导演 idPeroson = 3 与演员 idPerson = 14 合作拍摄 2 部电影。

```
| idFilm | idPerson | peronType |
+---------+---------+--------+
| 1       | 14      | 1      |
| 1       | 3       | 2      |
| 1       | 34      | 1      |
| 2       | 3       | 2      |
| 2       | 14      | 1      |
+---------+---------+--------+ 
```

我要疯了。非常感谢你。抱歉英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:33:22.010

试试这个：

```
SELECT DISTINCT
  d.idPerson AS Director,
  p.idPerson AS Actor,
  (SELECT COUNT(p2.idfilm)
   FROM Persons p2
   INNER JOIN Persons d2  ON p2.idFilm = d2.idFilm 
   AND d2.peronType = 2
   WHERE p2.peronType = 1
     AND p2.idperson = p.idperson
     AND d2.idperson = d.idperson ) Counts
FROM Persons p
INNER JOIN Persons d  ON p.idFilm = d.idFilm 
                     AND d.peronType = 2
WHERE p.peronType = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/c0f52/4)

这会给你：

```
| DIRECTOR | ACTOR | COUNTS |
-----------------------------
|        3 |    14 |      2 |
|        3 |    34 |      1 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T13:28:36.830

获得同样好的结果的更有效方法是：

```
SELECT
  D.idPerson Director,
  P.idPerson Actor,
  count(1) NBFilm
FROM       Persons D
INNER JOIN Persons P ON D.idFilm = P.idFilm 
WHERE P.peronType = 1
  AND D.peronType = 2
GROUP BY  D.idPerson, P.idPerson 
```

因此，您将只有一个内部联接。select 中的子查询非常划算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:29:55.267

这将为您提供制作电影数量的人，

```
select idperson,count(distinct idfilm) NoOfFilms,
case when persontype=2 then 'Director' else 'Actor' end Profession
from table1
group by idperson 
```

[**SQL_LIVE_DEMO**](http://sqlfiddle.com/#!2/61fd8/1)

样本输出：

```
 IDPERSON    NOOFFILMS   PROFESSION
        3             2      Director
       14             2      Actor
       34             1       Actor 
```

# javascript - 不使用的 JavaScript 标识符

> ID：14138814
> 
> 赞同：9
> 
> 时间：2013-01-03T12:18:41.307
> 
> 标签：javascript

我刚刚发现命名变量`arguments`是一个坏主意。

```
var arguments = 5;

(function () { 
    console.log(arguments); 
})(); 
```

> `Output: []`

事实证明，这`arguments`是[“所有函数中可用的局部变量”](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)，因此在每个新的执行上下文中，`arguments`都被遮蔽了。

我的问题是：是否还有其他这样的危险名称，例如`arguments`，不是真正的[保留字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，但仍会导致问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T12:26:58.967

是的。例如`window`或`document`。[在此处](http://www.quackit.com/javascript/javascript_reserved_words.cfm)查看更长的列表（“其他 javascript 关键字”）。

不建议使用它们中的任何一个，即使有些会按预期工作。

[编辑：就像javascript.about.com](http://javascript.about.com/library/blreserved.htm)中提到的那样，“虽然它们不是保留字，但应避免将这些字用作变量和函数。”。它们列出了大部分被归类为[预定义类和对象](http://javascript.about.com/library/blclassobj.htm)以及[全局属性](http://javascript.about.com/library/blglobal.htm)的相同事物。

问题示例：

```
var window = 5;

(function () { 
    alert(window); 
})(); 
```

上面的代码有不可预知的结果，因为它`window`是指窗口对象的词。Firefox 阻止对其进行修改，因此 alert 仍将引用 window 对象，而在 IE8 中，您将获得带有 value 的 alert `5`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:31:12.903

您可以通过在控制台中执行以下命令来获取全局命名空间中使用的所有名称的列表：

```
var t = [];
for(v in this){t.push(v)}
console.log(t.sort()); 
```

结果：

```
["$","ArrayBuffer","Attr","Audio","AudioProcessingEvent","BeforeLoadEvent","Blob","CDATASection","CSSCharsetRule","CSSFontFaceRule","CSSImportRule","CSSMediaRule","CSSPageRule","CSSPrimitiveValue","CSSRule","CSSRuleList","CSSStyleDeclaration","CSSStyleRule","CSSStyleSheet","CSSValue","CSSValueList","CTIsPlayback","CanvasGradient","CanvasPattern","CanvasRenderingContext2D","CharacterData","ClientRect","ClientRectList","Clipboard","CloseEvent","Comment","CompositionEvent","Counter","CustomEvent","DOMException","DOMImplementation","DOMParser","DOMSettableTokenList","DOMStringList","DOMStringMap","DOMTokenList","DataView","DeviceOrientationEvent","Document","DocumentFragment","DocumentType","Element","Entity","EntityReference","ErrorEvent","Event","EventEmitter","EventException","EventSource","File","FileError","FileList","FileReader","Float32Array","Float64Array","FormData","Generator","HTMLAllCollection","HTMLAnchorElement","HTMLAppletElement","HTMLAreaElement","HTMLAudioElement","HTMLBRElement","HTMLBaseElement","HTMLBaseFontElement","HTMLBodyElement","HTMLButtonElement","HTMLCanvasElement","HTMLCollection","HTMLDListElement","HTMLDataListElement","HTMLDirectoryElement","HTMLDivElement","HTMLDocument","HTMLElement","HTMLEmbedElement","HTMLFieldSetElement","HTMLFontElement","HTMLFormElement","HTMLFrameElement","HTMLFrameSetElement","HTMLHRElement","HTMLHeadElement","HTMLHeadingElement","HTMLHtmlElement","HTMLIFrameElement","HTMLImageElement","HTMLInputElement","HTMLKeygenElement","HTMLLIElement","HTMLLabelElement","HTMLLegendElement","HTMLLinkElement","HTMLMapElement","HTMLMarqueeElement","HTMLMediaElement","HTMLMenuElement","HTMLMetaElement","HTMLMeterElement","HTMLModElement","HTMLOListElement","HTMLObjectElement","HTMLOptGroupElement","HTMLOptionElement","HTMLOutputElement","HTMLParagraphElement","HTMLParamElement","HTMLPreElement","HTMLProgressElement","HTMLQuoteElement","HTMLScriptElement","HTMLSelectElement","HTMLSourceElement","HTMLSpanElement","HTMLStyleElement","HTMLTableCaptionElement","HTMLTableCellElement","HTMLTableColElement","HTMLTableElement","HTMLTableRowElement","HTMLTableSectionElement","HTMLTextAreaElement","HTMLTitleElement","HTMLTrackElement","HTMLUListElement","HTMLUnknownElement","HTMLVideoElement","HashChangeEvent","IceCandidate","Image","ImageData","Int16Array","Int32Array","Int8Array","KeyboardEvent","Markdown","MediaController","MediaError","MediaList","MediaStreamEvent","MessageChannel","MessageEvent","MessagePort","MimeType","MimeTypeArray","MouseEvent","MutationEvent","NamedNodeMap","Node","NodeFilter","NodeList","Notation","Notification","OfflineAudioCompletionEvent","Option","OverflowEvent","PERSISTENT","PR","PR_SHOULD_USE_CONTINUATION","PageTransitionEvent","Plugin","PluginArray","PopStateEvent","ProcessingInstruction","ProgressEvent","RGBColor","RTCIceCandidate","RTCSessionDescription","Range","RangeException","Rect","SQLException","SVGAElement","SVGAltGlyphDefElement","SVGAltGlyphElement","SVGAltGlyphItemElement","SVGAngle","SVGAnimateColorElement","SVGAnimateElement","SVGAnimateMotionElement","SVGAnimateTransformElement","SVGAnimatedAngle","SVGAnimatedBoolean","SVGAnimatedEnumeration","SVGAnimatedInteger","SVGAnimatedLength","SVGAnimatedLengthList","SVGAnimatedNumber","SVGAnimatedNumberList","SVGAnimatedPreserveAspectRatio","SVGAnimatedRect","SVGAnimatedString","SVGAnimatedTransformList","SVGCircleElement","SVGClipPathElement","SVGColor","SVGComponentTransferFunctionElement","SVGCursorElement","SVGDefsElement","SVGDescElement","SVGDocument","SVGElement","SVGElementInstance","SVGElementInstanceList","SVGEllipseElement","SVGException","SVGFEBlendElement","SVGFEColorMatrixElement","SVGFEComponentTransferElement","SVGFECompositeElement","SVGFEConvolveMatrixElement","SVGFEDiffuseLightingElement","SVGFEDisplacementMapElement","SVGFEDistantLightElement","SVGFEDropShadowElement","SVGFEFloodElement","SVGFEFuncAElement","SVGFEFuncBElement","SVGFEFuncGElement","SVGFEFuncRElement","SVGFEGaussianBlurElement","SVGFEImageElement","SVGFEMergeElement","SVGFEMergeNodeElement","SVGFEMorphologyElement","SVGFEOffsetElement","SVGFEPointLightElement","SVGFESpecularLightingElement","SVGFESpotLightElement","SVGFETileElement","SVGFETurbulenceElement","SVGFilterElement","SVGFontElement","SVGFontFaceElement","SVGFontFaceFormatElement","SVGFontFaceNameElement","SVGFontFaceSrcElement","SVGFontFaceUriElement","SVGForeignObjectElement","SVGGElement","SVGGlyphElement","SVGGlyphRefElement","SVGGradientElement","SVGHKernElement","SVGImageElement","SVGLength","SVGLengthList","SVGLineElement","SVGLinearGradientElement","SVGMPathElement","SVGMarkerElement","SVGMaskElement","SVGMatrix","SVGMetadataElement","SVGMissingGlyphElement","SVGNumber","SVGNumberList","SVGPaint","SVGPathElement","SVGPathSeg","SVGPathSegArcAbs","SVGPathSegArcRel","SVGPathSegClosePath","SVGPathSegCurvetoCubicAbs","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathSegLinetoAbs","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegList","SVGPathSegMovetoAbs","SVGPathSegMovetoRel","SVGPatternElement","SVGPoint","SVGPointList","SVGPolygonElement","SVGPolylineElement","SVGPreserveAspectRatio","SVGRadialGradientElement","SVGRect","SVGRectElement","SVGRenderingIntent","SVGSVGElement","SVGScriptElement","SVGSetElement","SVGStopElement","SVGStringList","SVGStyleElement","SVGSwitchElement","SVGSymbolElement","SVGTRefElement","SVGTSpanElement","SVGTextContentElement","SVGTextElement","SVGTextPathElement","SVGTextPositioningElement","SVGTitleElement","SVGTransform","SVGTransformList","SVGUnitTypes","SVGUseElement","SVGVKernElement","SVGViewElement","SVGViewSpec","SVGZoomAndPan","SVGZoomEvent","Selection","SessionDescription","SharedWorker","SpeechInputEvent","StackExchange","Storage","StorageEvent","StyleSheet","StyleSheetList","TEMPORARY","Text","TextEvent","TextMetrics","TextTrack","TextTrackCue","TextTrackCueList","TextTrackList","TimeRanges","TouchEvent","TrackEvent","UIEvent","URL","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WebGLActiveInfo","WebGLBuffer","WebGLContextEvent","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLRenderingContext","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebKitAnimationEvent","WebKitBlobBuilder","WebKitCSSFilterValue","WebKitCSSKeyframeRule","WebKitCSSKeyframesRule","WebKitCSSMatrix","WebKitCSSRegionRule","WebKitCSSTransformValue","WebKitIntent","WebKitMediaSource","WebKitMutationObserver","WebKitPoint","WebKitSourceBuffer","WebKitSourceBufferList","WebKitTransitionEvent","WebSocket","WheelEvent","Window","WinterBash","Worker","XMLDocument","XMLHttpRequest","XMLHttpRequestException","XMLHttpRequestProgressEvent","XMLHttpRequestUpload","XMLSerializer","XPathEvaluator","XPathException","XPathResult","XSLTProcessor","__qc","_gaq","_gat","_qevents","addEventListener","alert","apiCallbacks","applicationCache","atob","blur","btoa","captureEvents","careers_adselector","careers_adurl","careers_companycssurl","careers_cssurl","careers_leaderboardcssurl","chrome","clearInterval","clearTimeout","clientInformation","close","closed","confirm","console","crypto","defaultStatus","defaultstatus","devicePixelRatio","dispatchEvent","document","event","external","find","focus","frameElement","frames","gaGlobal","gauth","genuwine","getComputedStyle","getMatchedCSSRules","getSelection","history","i","initFadingHelpText","initTagRenderer","innerHeight","innerWidth","jQuery","jQuery171005593172716908157_1357215797040","jQuery171005593172716908157_1357215797041","length","localStorage","location","locationbar","matchMedia","menubar","moveBy","moveScroller","moveTo","name","navigator","offscreenBuffering","onabort","onbeforeunload","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondeviceorientation","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onscroll","onsearch","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onunload","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","open","openDatabase","opener","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","performance","personalbar","postMessage","prepareEditor","prettyPrint","prettyPrintOne","print","profileLink","prompt","quantserve","releaseEvents","removeEventListener","resizeBy","resizeTo","sanitizeAndSplitTags","screen","screenLeft","screenTop","screenX","screenY","scriptSrc","scroll","scrollBy","scrollTo","scrollX","scrollY","scrollbars","self","sessionStorage","setInterval","setTimeout","showFadingHelpText","showModalDialog","status","statusbar","stop","styleCode","styleMedia","t","tagRenderer","tagRendererRaw","toolbar","top","uh","v","v8Intl","votesCast","webkitAudioContext","webkitAudioPannerNode","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","webkitConvertPointFromNodeToPage","webkitConvertPointFromPageToNode","webkitIDBCursor","webkitIDBDatabase","webkitIDBDatabaseException","webkitIDBFactory","webkitIDBIndex","webkitIDBKeyRange","webkitIDBObjectStore","webkitIDBRequest","webkitIDBTransaction","webkitIndexedDB","webkitIntent","webkitMediaStream","webkitNotifications","webkitPostMessage","webkitRTCPeerConnection","webkitRequestAnimationFrame","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","webkitStorageInfo","webkitURL","window"]; 
```

因此，这些不能/不应该在全球范围内使用（至少在 Google Chrome 中）。如果您将它们声明为本地范围内的变量，那就没问题了。
但是，这不会包含*所有*使用的名称，例如，因为`arguments`仅在函数范围内可用。

[注意：此函数确实从您的库中返回所有全局变量，也]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T02:54:21.277

如果这就是您的意思，函数内部没有其他自动符号（除了`this`，但无论如何您都不能创建具有该名称的变量）。但是有几个默认的全局变量，所以在函数内部定义一个同名的变量会影响全局变量。

# delphi - delphi 如何在没有用户干预的情况下调用事件？

> ID：14138815
> 
> 赞同：5
> 
> 时间：2013-01-03T12:18:42.617
> 
> 标签：delphi, delphi-xe2

我的表格上有一个按钮。以下是该按钮的单击事件

```
procedure Form1.btnOKClick(Sender: TObject);
begin
//Do something
end; 
```

只有当我单击按钮时才会调用此事件，对吧？

如何在没有任何用户干预的情况下自动调用此事件？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-03T12:56:02.363

`OnClick`调用附加到控件的事件处理程序的最佳方法是调用控件`Click`上的方法。像这样：

```
btnOK.Click; 
```

直接调用事件处理程序会强制您提供`Sender`参数。调用该`Click`方法可以让控件完成所有工作。按钮单击的 Windows 消息处理程序的实现调用该`Click`方法。

但我赞同 whosrdaddy 的回答中表达的观点。您应该将按钮背后的逻辑提取到单独的方法中。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-03T12:25:16.463

不要将您的业务逻辑放入事件处理程序中。当应用程序变大时，这将使您的代码不可读。

通常你会这样做：

```
procedure TForm1.DoSomething;
begin
 // do something
end;

procedure TForm1.btnOKClick(Sender: TObject);
begin
 DoSomething;
end; 
```

那么您需要做的就是`DoSomething`从代码中的其他部分调用

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-03T12:23:15.587

您可以像任何其他方法一样在代码中调用此事件。

```
...
btnOkClick(Self.btnOk); // Sender in this case is the btnOk
... 
```

Sender 可以是你喜欢的任何对象，也可以是 nil。

# c# - 将标签字段传递给其他视图 wf7

> ID：14138818
> 
> 赞同：0
> 
> 时间：2013-01-03T12:18:48.843
> 
> 标签：c#, windows-phone-7, view

好的，我需要将此代码中的标签传递到下一页，但我不知道如何访问它。有人可以帮忙吗。

代码 ：

```
 <ListBox x:Name="AgendaList" Width="450" Height="520" Margin="10" SelectionChanged="event_SelectionChanged">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image  Width="100" Stretch="Uniform" HorizontalAlignment="Center" Source="/SuperAgenda;component/Images/calendar.jpg" />
                            <TextBlock  Text="{Binding Title_}" Tag="{Binding EventId_}" />

                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我正在使用按钮将其发送过来，因此我需要知道如何获取标签数据并让按钮将其发送到下一页。我的按钮看起来像这样，但它不发送任何数据：

```
private void viewEvent_Click(object sender, RoutedEventArgs e)
    {

        string uri = String.Format("/Views/Event_View/Event_View.xaml?id={0}", clickedLink.Tag);
        NavigationService.Navigate(new Uri(uri, UriKind.Relative));

    } 
```

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:41:12.340

在此处使用该`Tag`属性是多余的，因为`DataTemplate`在绑定控件中包含对象的所有属性。使用`DataContext`检索对象。在您的中添加一个`Tap`事件（以便用户可以点击图像或文本）：`StackPanel``DataTemplate`

```
private void StackPanel_Tap( object sender, GestureEventArgs e ) {
    int eventid = (( sender as StackPanel ).DataContext as MyObject).EventId_;

    string uri = String.Format("/Views/Event_View/Event_View.xaml?id={0}", eventid);
    NavigationService.Navigate(new Uri(uri, UriKind.Relative));
} 
```

然后使用`NavigationContext`in payen's answer 检索接收页面上的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:32:06.457

实际上，要在页面之间*传输数据*，您应该使用 PhoneApplicationService 类。

```
 PhoneApplicationService.Current.State["field"] = someField; 
```

在您的按钮点击/点击事件中。

然后，在您的下一页上使用 cast 获取该值

```
someField = (fieldType)PhoneApplicationService.Current.State["field"]; 
```

那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:33:49.960

只需使用您导航到的页面的[Navigation Context](http://msdn.microsoft.com/en-us/library/system.windows.controls.page.navigationcontext%28v=VS.95%29.aspx)属性。

```
if (this.NavigationContext.QueryString.ContainsKey("ProductId"))
{
    productID = this.NavigationContext.QueryString["ProductId"];
}
else
{
    productID = App.Current.Resources["FeaturedProductID"].ToString();
} 
```

# yii - Yii 小部件：在哪里放置一个动作？我需要从 js 访问服务器

> ID：14138819
> 
> 赞同：1
> 
> 时间：2013-01-03T12:18:54.270
> 
> 标签：yii, geolocation, vk

我将编写一个小部件，例如用户可以选择国家和城市。该小部件将使用来自 vk.com 的 geo db，但我想在内部从服务器端请求 vk.com。目前我正在通过 actionSuggestCities() 这样做。

浏览器 <-- 小部件：js 例程 <-- 站点：actionSuggestCities() <-- vk.com: api

我怎样才能制作一个格式良好的小部件，以便有人可以安装它而不在他的控制器中添加 actionAutocomplete() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:15:17.473

我认为最好的方法是提供一个带有小部件的操作作为扩展，以便在使用扩展的每个控制器中重用，可以配置一个操作类扩展 CAction 可以有它自己的行为等，阅读[wiki](http://www.yiiframework.com/wiki/170/actions-code-reuse-with-caction/)和[api](http://www.yiiframework.com/doc/api/1.1/CAction)

# delphi - 释放带有内部接口问题的接口

> ID：14138826
> 
> 赞同：5
> 
> 时间：2013-01-03T12:19:16.407
> 
> 标签：delphi, delphi-7

我这里有一个代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  IInnerTest = interface (IInterface)
    procedure DoSth;
  end;

  TRekScannerData = record
    Source: Integer;
    Device: IInnerTest;
  end;

  ITest = interface (IInterface)
    procedure DoSth;
  end;

  ATest = class(TInterfacedObject, ITest)
  private
    FInner: Array of TRekScannerData;
  public
    procedure DoSth;
    constructor Create();
    Destructor Destroy();override;
  end;

  AInnerTest = class (TInterfacedObject, IInnerTest)
  private
    FMainInt: ITest;
  public
    constructor Create(MainInt: ITest);
    procedure DoSth;
    Destructor Destroy();override;
  end;

  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  test: ITest;

implementation

{$R *.dfm}

{ ATest }

constructor ATest.Create;
begin
  SetLength(FInner, 1);
  FInner[0].Device := AInnerTest.Create(self);
  //<----- Here is the reason. Passing main interface to the inner interface.
end;

destructor ATest.Destroy;
begin
  beep;
  inherited;
end;

procedure ATest.DoSth;
begin
  //
end;

{ AInnerTest }

constructor AInnerTest.Create(MainInt: ITest);
begin
  FMainInt := MainInt;
end;

destructor AInnerTest.Destroy;
begin
  beep;
  inherited;
end;

procedure AInnerTest.DoSth;
begin
  //
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  test := ATest.Create;
  test.DoSth;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  test := nil;
end;

end. 
```

问题是当 test 分配给 nil 时没有调用 Destroy；

我想通过一个语句释放所有内部接口......有可能吗？还是我需要在 nil 之前使用其他方法破坏所有内部结构？

## 编辑

类结构如下：

```
Var x = ITest(ATest class) has ->
  Inner Interface: IInnerTest(AInnerTest class) which has reference to:
    ITest(ATest class) 
```

Nil'ing x 不会释放所有结构......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T13:02:58.860

你有一个循环引用。您的实现`IInnerTest`包含对`ITest`. 并且您的实现`ITest`包含对`IInnerTest`. 而这个循环引用意味着接口引用计数永远不会归零。

这个问题的正常解决方案是使用弱引用。一些有用的链接：

*   [“弱参考”：需要脚踏实地的解释](https://stackoverflow.com/questions/11501029/weak-reference-down-to-earth-explanation-needed)
*   [http://www.finalbuilder.com/Resources/Blogs/PostId/410/WeakRefence-in-Delphi-solving-circular-interfac.aspx](http://www.finalbuilder.com/Resources/Blogs/PostId/410/WeakRefence-in-Delphi-solving-circular-interfac.aspx)
*   [http://delphisorcery.blogspot.co.uk/2012/06/weak-interface-references.html](http://delphisorcery.blogspot.co.uk/2012/06/weak-interface-references.html)

# iphone - 如何知道谁在 Facebook 上在线

> ID：14138830
> 
> 赞同：0
> 
> 时间：2013-01-03T12:19:30.563
> 
> 标签：iphone, facebook

我正在制作一个 iphone 应用程序，其中我需要在特定用户上网时获得通知的功能。itune 的 Who's online 上有一个应用程序使用此功能，但我不知道如何实现此功能。Facebook开发人员是否为它提供了任何API或什么。有人对这个有了解吗。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:16:24.023

只需使用官方的 Facebook iOS SDK：

[脸书 iOS SDK](https://developers.facebook.com/docs/reference/iossdk/)

# javascript - backbone.js this.model 是未定义的wine应用示例

> ID：14138831
> 
> 赞同：0
> 
> 时间：2013-01-03T12:19:34.620
> 
> 标签：javascript, backbone.js

我第一次学习主干 js 并试图让示例葡萄酒应用程序正常工作，它从数据库中提取，并且列表视图显示用户列表，但是当它调用 WineDetails 时会抛出错误。

这是代码：

```
// Models
window.Wine = Backbone.Model.extend();

window.WineCollection = Backbone.Collection.extend({
  model:Wine,
  url:"../api/users"
});

// Views
window.WineListView = Backbone.View.extend({

  tagName:'ul',

  initialize:function () {
    this.model.bind("reset", this.render, this);
  },

  render:function (eventName) {
    _.each(this.model.models, function (wine) {
        $(this.el).append(new WineListItemView({model:wine}).render().el);
    }, this);
    return this;
  }

});

window.WineListItemView = Backbone.View.extend({

  tagName:"li",

  template:_.template($('#tpl-user-list-item').html()),

  render:function (eventName) {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }

});

window.WineView = Backbone.View.extend({

  template:_.template($('#tpl-user-details').html()),

  render:function (eventName) {
    $(this.el).html(this.template(this.model.toJSON()));
    return this;
  }

});

// Router
var AppRouter = Backbone.Router.extend({

  routes:{
    "":"list",
    "users/:id":"wineDetails"
  },

  initialize:function () {
    this.wineList = new WineCollection();
    this.wineListView = new WineListView({model:this.wineList});

  },

  list:function () {
    this.wineList.fetch();
    $('#sidebar').html(this.wineListView.render().el);
  },

  wineDetails:function (id) {
    this.wine = this.wineList.get(id);
    this.wineView = new WineView({model:this.wine});
    $('#content').html(this.wineView.render().el);
  }
});

var app = new AppRouter();
Backbone.history.start(); 
```

和html

```
<div id="header"><span class="title">Backbone Cellar</span></div>

<div id="sidebar"></div>

<div id="content">
  <h2>Welcome to Backbone Cellar</h2>
  <p>
  This is a sample application part of of three-part tutorial showing how to build a CRUD    application with Backbone.js.
  </p>
</div>

<!-- Templates -->
<script type="text/template" id="tpl-user-list-item">
  <a href='#users/<%= user_id %>'><%= user_id %></a>
</script>

<script type="text/template" id="tpl-user-details">
<div class="form-left-col">

  <label>Name:</label>
  <input type="text" id="user_id" name="user_id" value="<%= user_id %>" required/>

</div>

</script>

</div> 
```

和萤火虫中的错误

```
TypeError: this.model is undefined
$(this.el).html(this.template(this.model.toJSON())); 
```

我试过添加 _.bindAll(this,"render"); 在初始化函数中，但没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:14:52.947

在你的路由器中你只做 wineList.fetch()。

您需要处理成功回调，如下所示

```
wineList.fetch({success: function(){
    $("#content").html(new WineListView({model: wineList, page: p}).el);
}}); 
```

我在 github 中使用骨干网和 requirejs 实现了示例 winecellar 项目。 [https://github.com/phillycoder/backbone-require-cellar](https://github.com/phillycoder/backbone-require-cellar)

# android - 将列表视图更新到特定项目位置

> ID：14138834
> 
> 赞同：0
> 
> 时间：2013-01-03T12:19:43.213
> 
> 标签：android, listview, broadcastreceiver, intentservice

我有一个接收器在意图服务完成服务器调用时广播，当接收器在 onReceive 中广播时，我已经用新数据更新了列表视图。我想要的是在广播之前将项目的位置设置为列表中的最后一个元素。我曾尝试使用 setSelection() 和 smoothScrollToPosition()，但每次更新列表时列表都会聚焦到第一项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:53:15.953

使用 notifyDataSetChanged() 更新列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:41:49.270

试试这个代码

```
 mAdapter.notifyDataSetChanged(); 
```

其中 mAdapter 是您用于在 ListView 中填充数据的适配器对象。它只会更新您的 ListView 而不会关注第一项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:56:00.853

也试试这个代码

listview.requestLayout(); listview.setSelectionFromTop(listview.getLastVisiblePosition()-20,0);

这使得 Listview 从底部项目中进行选择

# linux - 历史扩展在脚本中不起作用

> ID：14138835
> 
> 赞同：0
> 
> 时间：2013-01-03T12:19:46.250
> 
> 标签：linux, shell, command-line

```
rm "1/!(Thursday.tar.gz)" 
```

错误：

```
rm: cannot remove `1/!(Thursday.tar.gz)': No such file or directory 
```

在`rm 1/!(Thursday.tar.gz)`终端工作时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:29:15.153

您需要在脚本开头包含正确的[shebang 行和任何必要的 shell 选项：](//en.wikipedia.org/wiki/Shebang_%28Unix%29)

```
#!/bin/bash
shopt -s extglob 
```

特别是，在 Bash 中，“ [extglob](http://mywiki.wooledge.org/glob#extglob) ”选项对于`!(...)`globbing 语法起作用是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:24:47.123

确保您在脚本中使用与在终端中使用的正确/相同的 shell。

例如，如果您使用 bash，则可以将其添加到脚本的开头，以确保它也使用 bash：

```
#! /bin/bash 
```

您可能使用的其他外壳也是如此。

注意：`#!`被称为“shebang”，让您选择脚本所需的外壳，查看[此 wiki 页面](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)以获取更多信息。

# oracle-apex - 如何将 HTML 页面插入 APEX 区域？

> ID：14138836
> 
> 赞同：0
> 
> 时间：2013-01-03T12:19:47.533
> 
> 标签：oracle-apex

我有以下 HTML 页面，它作为 HTML 页面工作得非常好；但是，当我尝试通过将代码输入到区域中将其放入 APEX 时，它就完全出错了。

当按下提交按钮时，它会将用户带到一个启用 IFRAME 的新页面，而不是像在 HTML 页面中那样刷新页面。另一个问题是美学，它在 Firefox 中看起来很完美，但在 IE 中，IFRAME 位于页面的一半。在 Firebug 中进行调查时，我没有看到会导致这种情况的属性。

是否有将 HTML 页面嵌入 APEX 表单页面的方法？

```
<!DOCTYPE html>
<html>
<body>
<head>
</head>

<form action="http://ukserver/orderlist.asp" target="orderResults">
Enter Order Number: <input id="ord" type="text" name="ord" maxlength="50" size="20"/>

<input type="submit" value="Submit"/>
</form>

<iframe id="orderResults" name="orderResults" src="blank.html" width="100%" height="50%">
<p>Your browser does not support iframes.</p>
</iframe>

</body>
</html> 
```

这是 FireFox 中的页面，您可以看到它看起来不错。 ![在此处输入图像描述](../Images/e75987edd582dcafb359636a3d26b748.png)

这是 IE 中的页面不正确 ![在此处输入图像描述](../Images/866bd6ec20e5c63501feb897317251dd.png)

更新：

HTML 页面似乎在 APEX 页面的 HTML 标头中完美运行，但它位于我的选项卡和区域上方，这不是我想要的位置。我试图找到一个订单 (1112)，它返回了以下正确的“找不到文件”。

![在此处输入图像描述](../Images/3b8374fb58bc3b1ad641fac2b15b9845.png)

嗨，托尼，我创建了另一个 IFRAME，我想我已经完成了一半。我现在只需要让 HTML 表单工作，请参见下文：

![在此处输入图像描述](../Images/4d9fb615811870e07b7206a152c27894.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:56:27.277

听起来您在每个订单的某处服务器上的某个文件夹中都有一个 PDF 文件。如果在给定订单号的情况下文件的名称是可预测的，那么您应该能够生成如下链接：

1) 创建一个项目以接受订单号，例如 P12_ORDER_NUMBER。

2）创建一个按钮来提交页面

3) 创建当 P12_ORDER_NUMBER 不为空时显示的报告并选择：

```
select '//server/path/fileprefix' || :P12_ORDER_NUMBER || '.pdf' as url
from dual; 
```

4）通过列属性将报告列转换为链接，以便单击它启动文件。

# javascript - 在浏览器调整大小时刷新选定的 iframe

> ID：14138838
> 
> 赞同：2
> 
> 时间：2013-01-03T12:19:54.470
> 
> 标签：javascript, html, iframe, refresh

我是事物开发方面的完整初学者，非常感谢任何帮助。

我有以下代码在调整浏览器大小时刷新整个页面：

```
$(window).bind('resize',function(){
     window.location.href = window.location.href; 
}); 
```

但是，我希望刷新针对具有唯一 id 的特定 iframe 而不是整个页面。

再次，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:23:49.493

采用：

```
$(window).resize(function(){
    document.getElementById('FrameID').contentDocument.location.reload(true);
}); 
```

如果您有多个 iFrame，请考虑使用类而不是 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-26T22:42:57.570

我在使用 Facebook 社交小部件时遇到问题，我希望这能解决它。您的代码很有帮助（一个好的开始）。

也就是说，它没有用。

如果我找到一个解决方案，我会发布一个解决方案。Facebook 真的需要更新他们的小部件。响应式网站（移动设备）确实存在问题。考虑到他们创建了 React 代码，它确实写得不是很好。

jQuery 似乎是一个更好的解决方案，因为我没有要定位的 id）但问题在 iframe 中更深层次。

```
// refresh facebook iframe on page resize (did not work)
$(window).resize(function(){
  $('.fb iframe')[0].contentDocument.location.reload(true);
});

//--- other ways to reload iframes---

//reload 1 iframe
$('#iframe')[0].contentWindow.location.reload(true);

//reload all iFrames
$('iframe').each(function() {
  this.contentWindow.location.reload(true);
});

//Another way to reload all iFrames
$('iframe').attr('src', $('iframe').attr('src'));
```

更新...我发现这两个关于这个主题的写得很好的页面。希望它有效。

*   [如何使 Facebook 页面插件完全响应](https://www.mugo.ca/Blog/How-to-make-the-Facebook-Page-Plugin-fully-responsive)
*   [使 Facebook 页面插件具有响应性](https://www.praxis.net.au/blog/development-process/making-the-facebook-page-plugin-responsive/)

* * *

更新

上面的代码很好，但他们还没有准备好摇滚。为他们的网站显示的示例，我几乎可以正常工作，但我的代码中仍然存在错误。

所以...

这完全是作弊，但我正在查看源代码并从 Facebook 打开 iframe 位置，它确实有效（似乎允许）。到目前为止，它似乎也可以与其他配置文件一起使用（只要您先授予权限）。

我只是硬编码了 iframe 与使用他们的 JavaScript 代码。通过这种方式，它的工作速度也提高了 1000 倍/更快，并且已经响应。我花了这么多时间试图修复 Facebook 的代码真是太疯狂了。在 iframe 中使用直接 URL 链接加载速度更快（geezzz）。

这是我用于最终 URL 的示例（我清理了不需要的参数。

[https://www.facebook.com/v2.12/plugins/page.php?adapt_container_width=false&height=&hide_cover=true&href=https%3A%2F%2Fwww.facebook.com%2FYOURFACEBOOKUSERNAME&locale=en_US&show_facepile=false&small_header=true&tabs=timeline&width= 500](https://www.facebook.com/v2.12/plugins/page.php?adapt_container_width=false&height=&hide_cover=true&href=https%3A%2F%2Fwww.facebook.com%2FInternetBuilderConsulting&locale=en_US&show_facepile=false&small_header=true&tabs=timeline&width=500)

同样，请记住，要使其正常工作，您需要先在 Facebook 上创建一个社交框，以便您可以授予权限。我试图用我的个人用户名来做，因为我以前从未创建过一个，所以它不起作用。同样，这是理论，但这是有道理的。我的实际站点正在使用另一个客户端，我还测试了其他客户端。它似乎工作正常。

没有承诺它将在实时站点上运行。Facbook 可能会阻止不通过脚本使用它的用户，但我们会看到。我猜 Facebook 可能会在代码中使用脚本来检查位置源，所以这种方式可能会随着时间的推移而失败（还不知道）。此外，我可能缺少 Facebook 从我没有注意到（或删除）的脚本中生成的所需密钥。我清理它时很小心，我不想包含超出需要的内容。我们会看到。

无论如何，请通过源代码尝试自己的测试。我需要处理其他更重要的事情，这很有效，而且似乎是一个简单而有效的解决方案。如果它失败了，我以后会有更多的时间。客户不会再知道，它更快并且似乎工作得更好。

```
<iframe id="fb-iframe" src="https://www.facebook.com/v2.12/plugins/page.php?adapt_container_width=false&height=&hide_cover=true&href=https%3A%2F%2Fwww.facebook.com%2FInternetBuilderConsulting&locale=en_US&show_facepile=false&small_header=true&tabs=timeline&width=500" width="100%" height="100%" allowtransparency="1" scrolling="no" frameborder="0"></iframe>
```

* * *

另一个更新。

它似乎正在工作，但我仍然需要向宽度参数中的 URL 发送刷新。此外，请注意社交小部件的最大宽度为 500 像素（因此，如果您需要更大的宽度，除非您在 CSS 中使用某种变换，否则它不会更大）。

这是最终的代码。

有趣的是，我又回到了原点。我正在使用我们上面讨论过的一些代码以及我想出并编写的一些新代码。

:)

同样值得注意的是，我注意到 StackOverflow 控制台给了我一个错误。

请忽略它。该错误与 StackOverflow 不喜欢的调用 Facebook 的 iframe 引用有关。据我所知，没有错误。

如果我错了，请告诉我。

```
// Fixes Facebook iFrame on page resize (Responsive)
$(window).resize(function() {
    $('#fb-iframe').attr('src', "https://www.facebook.com/v2.12/plugins/page.php?adapt_container_width=false&height=&hide_cover=true&href=https%3A%2F%2Fwww.facebook.com%2FInternetBuilderConsulting&locale=en_US&show_facepile=false&small_header=true&tabs=timeline&width=" + $('#fb-iframe').width())
});
```

```
<script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
<iframe id="fb-iframe" src="https://www.facebook.com/v2.12/plugins/page.php?adapt_container_width=false&height=&hide_cover=true&href=https%3A%2F%2Fwww.facebook.com%2FInternetBuilderConsulting&locale=en_US&show_facepile=false&small_header=true&tabs=timeline&width=500" width="100%" height="100%" allowtransparency="1" scrolling="no" frameborder="0"></iframe>
```

# image - 复制图像字节并将其粘贴到记事本中，然后以相同的图像格式保存

> ID：14138844
> 
> 赞同：0
> 
> 时间：2013-01-03T12:20:17.360
> 
> 标签：image

我正在复制图像字节并将其粘贴到记事本中，然后以相同的图像格式保存。但是当我试图打开图像时，它说绘图失败（这个过程是手动的）。但是如何通过 java 处理字节呢？

# extjs - 如何通过单击 Extjs 中的链接打开面板/表单？

> ID：14138845
> 
> 赞同：0
> 
> 时间：2013-01-03T12:20:18.037
> 
> 标签：extjs

我想知道如何通过单击 ExtJS 的另一个面板中的超链接来打开面板/表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:31:30.697

定义“开放”。当你说打开时，我想到的是一个窗口而不是面板或表单。可以创建面板或表单。你不是很清楚你到底想要什么。

您可以像这样将其渲染到正文：

```
var panel = Ext.create('yourpanel', { renderTo: Ext.getBody() }); 
```

或将其添加到另一个容器中，例如：

```
var panel = Ext.create('yourpanel');
Ext.getCmp('id_of_somecontainer').add(panel); 
```

PS如果问题是如何从链接执行javascript，请尝试使用：

```
<a herf="javascript:somefunction();">some link</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:39:33.090

您可以添加面板 -

```
Ext.get('test_link').on('click', function(){
    var panel = Ext.create('yourpanel');
    Ext.getCmp('target_panel').add(panel);
}); 
```

# sql - Oracle窗口函数中的求和

> ID：14138846
> 
> 赞同：3
> 
> 时间：2013-01-03T12:20:20.740
> 
> 标签：sql, oracle, window-functions

谁能告诉我oracle 分区中`sum`a的意义是什么`sum` `(SUM(SUM(VAL)))`，在下面的代码片段中

```
SELECT NMS,
       SUM(SUM(VAL)) OVER(PARTITION BY NMS),  ---- SIGNIFICANCE
       EMPNO,
       SUM(SUM(VAL)) OVER(PARTITION BY EMPNO)   ---- SIGNIFICANCE
  FROM PART_TEST_PART
 GROUP BY NMS, EMPNO; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T12:45:58.513

`VAL`它计算每个`NMS`（对于第一个）和`EMPNO`（对于第二个）的总和。

首先评估 group by + SUM(VAL)，然后分析计算该结果。

例如，如果您在 group by of 之后得到结果

```
EMPNO  NMS SUM(VAL)
1      a   15
1      b   24
2      a   50 
```

你`SUM(SUM(VAL)) OVER(PARTITION BY NMS)`会有

```
EMPNO  NMS SUM(VAL) SUM(SUM(VAL)) OVER(PARTITION BY NMS)
1      a   15       65  (15+50 for NMS = a)
1      b   24       24  (24 for NMS = b)
2      a   50       65  (15+50 for NMS = a) 
```

你`SUM(SUM(VAL)) OVER(PARTITION BY EMPNO)`会有

```
EMPNO  NMS SUM(VAL) SUM(SUM(VAL)) OVER(PARTITION BY EMPNO)
1      a   15       39  (15+24 for EMPNO = 1)
1      b   24       39  (15+24 for EMPNO = 1)
2      a   50       50  (50 for EMPNO = 2) 
```

# mysql - 如何选择最后一个日历月（不是间隔）？

> ID：14138848
> 
> 赞同：2
> 
> 时间：2013-01-03T12:20:27.377
> 
> 标签：mysql

我有一个名为 transaction_date 的日期时间字段，在报告中我需要选择上一个日历月，我该怎么做？（这也应该像一月一样工作一个月）

我想出了以下方法，但这仅在月份不是一月时才有效，

```
SELECT SUM(amount)  AS pay_month FROM `users_payment`  WHERE  MONTH(transaction_datetime)= MONTH(NOW()) AND YEAR(transaction_datetime)=YEAR(NOW()) 
```

有很多使用 INTERVAL 函数的示例，但这仅选择时间间隔，而不是我想要的日历月..

像

```
SELECT SUM(amount)  AS `year_month` FROM `users_payment`   WHERE  DATE_ADD(NOW(), INTERVAL -1 MONTH) < transaction_datetime 
```

但这不是我想要的，我只想选择去年 12 月的销售额（请记住，表中还有其他年份我不想要，即 1979 年、1981 年......等）

下一部分相同的报告，我需要选择最近 2 个日历月，我也不知道如何执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:25:06.993

您是否尝试过以下方法

```
SELECT SUM(amount)  AS `year_month` FROM `users_payment`
WHERE MONTH(DATE_ADD(NOW(), INTERVAL -1 MONTH)) = MONTH(transaction_datetime) 
```

以上应该可以显示上个月；但是，它不区分年份。

再想一想，我明白您要做什么 - 获取给定月份的所有交易。试试这样的东西。

```
SELECT SUM(amount)  AS `year_month` FROM `users_payment`
WHERE transaction_datetime BETWEEN date_format(NOW() - INTERVAL 1 MONTH, '%Y-%m-01')
   AND last_day(NOW() - INTERVAL 1 MONTH) 
```

这将列出上一个日历月的所有交易。更改`INTERVAL`值以选择多个月份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:11:07.447

你可以试试这个——

```
SELECT SUM(amount)  AS pay_month FROM `users_payment`  WHERE  
PERIOD_ADD(DATE_FORMAT(NOW(),'%Y%m'), -1) = DATE_FORMAT(transaction_datetime,'%Y%m') 
```

# macos - NSColorPanel 阻止鼠标向上事件

> ID：14138852
> 
> 赞同：3
> 
> 时间：2013-01-03T12:20:35.250
> 
> 标签：macos, cocoa, nscolorpanel

我正在使用设置为持续更新的 NSColorWell。我需要知道用户何时从颜色面板中的颜色选择器编辑控件（鼠标向上）。

我安装了一个事件监视器并成功接收到鼠标按下和鼠标移动的消息，但是 NSColorPanel 似乎阻止了鼠标。

最重要的是，我想将最终选择的颜色添加到我的撤消堆栈中，而不会在用户选择他们的选择时生成所有中间颜色。

有没有办法创建自定义 NSColorPanel 并用覆盖其 mouseUp 并发送消息的想法替换共享面板？

在我的研究中，这个问题已经被提出过几次，但是我还没有看到一个成功的解决方案。

问候， - George Lawrence Storm，Keencoyote 发明服务

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T12:28:49.357

我发现，如果我们观察`color`keypath ，`NSColorPanel`我们会在鼠标向上事件中被调用一次。这使我们可以忽略`NSColorWell`鼠标左键按下时的动作消息，并从 keypath 观察者那里获得最终颜色。

在此应用程序中，委托示例代码`colorChanged:`是一个`NSColorWell`操作方法。

```
void* const ColorPanelColorContext = (void*)1001;

@interface AppDelegate()

@property (weak) NSColorWell *updatingColorWell;

@end

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)notification {
    NSColorPanel *colorPanel = [NSColorPanel sharedColorPanel];
    [colorPanel addObserver:self forKeyPath:@"color" 
                    options:0 context:ColorPanelColorContext];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object 
                        change:(NSDictionary *)change context:(void *)context {
    if (context == ColorPanelColorContext) {
        if (![self isLeftMouseButtonDown]) {
            if (self.updatingColorWell) {
                NSColorWell *colorWell = self.updatingColorWell;
                [colorWell sendAction:[colorWell action] to:[colorWell target]];
            }
            self.updatingColorWell = nil;
        }
    }
}

- (IBAction)colorChanged:(id)sender {
    if ([self isLeftMouseButtonDown]) {
        self.updatingColorWell = sender;
    } else {
        NSColorWell *colorWell = sender;
        [self updateFinalColor:[colorWell color]];
        self.updatingColorWell = nil;
    }
}

- (void)updateFinalColor:(NSColor*)color {
    // Do something with the final color...
}

- (BOOL)isLeftMouseButtonDown {
    return ([NSEvent pressedMouseButtons] & 1) == 1;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T04:27:59.550

在 Interface Builder 中，选择你的颜色，然后取消选中 Attributes Inspector 中的 Continuous 复选框。`applicationDidFinishLaunching:`此外，在方法或方法中的适当位置添加以下代码行`awakeFromNib`：

```
[[NSColorPanel sharedColorPanel] setContinuous:NO]; 
```

换句话说，共享颜色面板和您的颜色都需要连续设置为`NO`才能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:54:43.080

做你想做的事情的正确方法是使用`NSUndoManager`'s [`-begin/endUndoGrouping`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html)。所以你会做这样的事情

```
[undoManager beginUndoGrouping];
// ... whatever code you need to show the color picker
// ...then when the color has been chosen
[undoManager endUndoGrouping]; 
```

撤消组的目的正是您想要完成的 - 将所有更改都放在一个撤消中。

# windows - 比较目录的工具（Windows 7）

> ID：14138855
> 
> 赞同：168
> 
> 时间：2013-01-03T12:21:07.050
> 
> 标签：windows, file-comparison

由于一些[SVN](http://en.wikipedia.org/wiki/Apache_Subversion)运动，我在进行相当大的增强时与 SVN 断开了连接。

现在我有我当前的工作区（有更改并与 SVN 断开连接）和新的工作区（来自 SVN 的最新）。

我需要使用更改手动更新新工作区，以便我可以签入它们。

所以我正在寻找一种工具，它可以让我比较两个工作区，告诉新文件和文件夹以及更新的文件。

有这样的工具吗？如果有，能推荐一个好的吗？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-01-03T12:30:46.103

我使用[WinMerge](http://winmerge.org/)。它是免费的并且运行良好（适用于文件和目录）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-03T12:28:48.613

理查兹建议的工具非常好。

另一个令人惊叹并提供 30 天免费试用的软件是[Araxis Merge](http://www.araxis.com/merge/)。这是一个 3 路合并，比 winmerge 功能更完整，但它是一个商业产品。

您可能还想查看 Scott Hanselman 的[开发者工具列表](http://www.hanselman.com/tools)，其中除了 winmerge 之外还提到了几个

# apache - Apache mod_rewrite %{HTTP_USER_AGENT} 不等于 + 或条件（列表）

> ID：14138856
> 
> 赞同：2
> 
> 时间：2013-01-03T12:21:13.080
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我现在的情况是这样的：

```
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC] 
```

我想知道如何将这种情况交换`if not`为上述值之一。

我对这样的事情很感兴趣：

```
RewriteCond %{HTTP_USER_AGENT} !="android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC] 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T23:48:33.817

问题是你在`opera`and之间有一个空格`mobile`，这导致 mod_rewrite 将其解析为多个参数。尝试使用括号而不是引号，`!`并转义空格：

```
RewriteCond %{HTTP_USER_AGENT} !(android|blackberry|ipad|iphone|ipod|iemobile|opera\ mobile|palmos|webos|googlebot-mobile) [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:29:31.190

非常接近，您不需要`=`在 negation 之后添加`!`。

```
RewriteCond %{HTTP_USER_AGENT} !"android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC] 
```

# python - Python：一天中的执行时间

> ID：14138858
> 
> 赞同：4
> 
> 时间：2013-01-03T12:21:16.350
> 
> 标签：python

我写了一个小脚本来获取即时股票价格。

```
#script to get stock data

from __future__ import print_function
import urllib
import lxml.html
from datetime import datetime
import sys
import time

stocks=["stock1","stock2","stock3","stock4","stock5"]

while True:
 f=open('./out.txt', 'a+')
 for x in stock:
  url = "http://someurltofetchdata/"+x
  code   = urllib.urlopen(url).read()
  html   = lxml.html.fromstring(code)
  result = html.xpath('//td[@class="LastValue"][position() = 1]')
  result = [el.text_content() for el in result]
  f.write(datetime.now().strftime("%Y-%m-%d %H:%M:%S") + ' ' + x + ' ' + result[0])
  f.write("\n")
 f.close() 
```

我希望该代码仅在股市开放时间（即交易时间）获取数据。（09:00 至 12:30 和 13:30 至 17:30）。

您能否建议一种在代码上隐式执行调度的方法？（不在操作系统级别）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:24:01.293

如果您不能使用 cron（这是完成任务的最简单方法），您可以将其添加到您的代码中。如果在给定的时间范围内，它将下载数据，休眠60秒然后再次运行。

```
while True:
    now = datetime.now().strftime('%H%M')
    if '0900' <= now <= '1230' or '1330' <= now <= '1730':
        # your code starting with f=open('./out.txt', 'a+')
    time.sleep(60) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:44:28.950

看看[APScheduler](http://packages.python.org/APScheduler/)

```
from apscheduler.scheduler import Scheduler
sched = Scheduler()

@sched.interval_schedule(hours=3)
def some_job():
    print "Decorated job"

sched.configure(options_from_ini_file)
sched.start() 
```

您还可以指定 time.date

```
job = sched.add_date_job(my_job, datetime(2009, 11, 6, 16, 30, 5), ['text']) 
```

显然，您必须编写一些代码来在相关时间打开和关闭这些功能`sched.start()` `sched.stop()`，但是它会按照您在装饰器上设置的频率自动获取数据。你甚至可以安排时间表！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T13:10:39.917

如果您想在 Windows 上安排此脚本，请使用[task schedule](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)![在此处输入图像描述](../Images/42bac3be336f229143074716d2effa84.png)。它有 GUI 来配置，而且非常简单。对于 Linux，crontab 会更好。最重要的是，您不需要修改代码，并且长期运行非常稳定。

# c# - Windows 窗体中的用户控件刷新

> ID：14138863
> 
> 赞同：0
> 
> 时间：2013-01-03T12:21:50.853
> 
> 标签：c#, controls, refresh

我有一个图片框。此图片框用于地图。

地图上有元素。例如，显示器。

我从 Windows 用户控件创建了“显示”。此用户控件有“一个面板，面板上有 3 个图片框”。

任何用户在屏幕上创建“显示”并将其保存为图片框（地图）的控件。当任何用户保存数据时，它都会保存到数据库中。

每一秒，我都会查看图片框（地图），控制其中的数据以及数据库。如果“显示”改变了它的状态（比如显示去或停止，交通标志的种类），那么我找到了改变的状态并刷新它。

现在的问题是：如果我删除显示（用户控件）而不是再次将其添加到地图的（图片框）控件中，它工作得很好。在地图上可以看到更新的“显示”。但是，任何用户都可以看到该过程，因为显示会消失几毫秒并像闪烁一样回来。

如何在不删除并再次添加进程的情况下刷新此用户控件，有没有办法以某种方式刷新它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:29:35.187

为了抑制任何闪烁，您可以通过告诉 Windows 在您的闪烁生成操作之前暂停父控件绘画并在之后恢复它来作弊。检查[这个 SO 问题](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children)。

我经常在我的自定义控件上这样做，而且效果很好。您甚至可以将第一个答案中的“SuspendDrawing”和“ResumeDrawing”静态方法添加为 Control 类的扩展方法。

# arrays - 在matlab中查找数组元素之间最大间隔的行

> ID：14138866
> 
> 赞同：0
> 
> 时间：2013-01-03T12:21:54.743
> 
> 标签：arrays, matlab

我有一个大小为 mx n 的数组。每行有 n 个元素，显示一些概率（在 0 和 1 之间）。我想找到其元素之间具有最大差异的行，而如果它的非零元素也更大会更好。

例如在数组 Arr 中：

```
Arr = [0.1   0     0.33   0     0.55  0;
       0.01  0     0.10   0     0.2   0;
       1     0.1   0      0     0     0;
       0.55  0     0.33   0     0.15  0;
       0.17  0.17  0.17   0.17  0.17  0.17] 
```

最好的行是第 3 行，因为它有更多不同的值和更大的值。如何使用 Matlab 进行计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:53:53.580

似乎您正在寻找具有最大[标准偏差](http://en.wikipedia.org/wiki/Standard_deviation)的行，这基本上是衡量值与平均值相差多少的量度。

如果您想忽略零元素，请使用 Shai 的有用建议将零元素替换为`NaN`. 事实上，一些 MATLAB 的内置函数允许忽略它们：

```
Arr2 = Arr;
Arr2(~Arr) = NaN; 
```

^(为了找到)我们将沿行使用的标准偏差[`nanstd`](http://www.mathworks.com/help/stats/nanstd.html)（不是`std`，因为它不会忽略值），*即*第二维：`NaN`

 *```
nanstd(Arr2, 0, 2) 
```

为了找到最大的标准差及其对应的行索引，我们将应用[`nanmax`](http://www.mathworks.com/help/stats/nanmax.html)并获得两个输出变量：

```
[stdmax, idx] = nanmax(nanstd(Arr2, 0, 2)); 
```

现在`idx`保持保持所需行的索引。

### 例子

让我们在您在问题中提供的输入上运行此代码：

```
Arr = [0.1   0     0.33   0     0.55  0;
       0.01  0     0.10   0     0.2   0;
       1     0.1   0      0     0     0;
       0.55  0     0.33   0     0.15  0;
       0.17  0.17  0.17   0.17  0.17  0.17];

Arr2 = Arr;
Arr2(~Arr) = NaN;
[maxstd, idx] = nanmax(nanstd(Arr2, 0, 2))

idx =
    3 
```

请注意，第 3 行中的值之间的差异比第 1 行中的值大得多，因此第 3 行的标准差更大。这也对应于您的评论：

> *...因此，具有 3 个零和 3 个非零但接近值的行比具有 4 个零和 2 个非常不同的值的行更差。*

出于这个原因，我相信在这种情况下`3`确实是正确的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:52:35.067

您似乎希望忽略`0`矩阵中的 s 。您可以通过将它们设置为`NaN`并继续使用忽略 s 的特殊内置函数`NaN`（例如`nanmin`,`nanmax`等）来实现这一点

`ri`下面是一个示例代码，用于查找最小（非零）响应和最大响应之间差异最大的行 ( )：

```
nArr = Arr;
nArr( Arr == 0 ) = NaN; % replace zeros with NaNs
mn = nanmin(nArr, [], 2); % find minimal, non zero response at each row
mx = nanmax(nArr, [], 2); % maximal response
[~, ri] = nanmax( mx - mn ); % fid the row with maximal difference 
```*

# javafx-2 - 如何跳过不被混淆的资源文件？

> ID：14138868
> 
> 赞同：0
> 
> 时间：2013-01-03T12:21:59.910
> 
> 标签：javafx-2, obfuscation, proguard, executable-jar

我正在混淆 JAR，并且该 JAR 还包含一些资源文件。我不希望它们被混淆或损坏。如何要求proguard忽略资源文件，如公钥存储文件？

```
-adaptresourcefilenames
-adaptresourcefilecontents 
```

我们必须选择资源文件，但是从这两个选项中，我的公钥存储文件被损坏到输出 jar 中并引发异常 -

```
Exception in Application start method
        java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.javafx.main.Main.a(Main.java:642)
        at com.javafx.main.Main.main(Main.java:805)
        Caused by: java.lang.RuntimeException: Exception in Application start method
        at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherIm
        pl.java:403)
        at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:
        47)
        at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
        at java.lang.Thread.run(Unknown Source)
        Caused by: java.lang.AssertionError: java.security.KeyStoreException: Uninitiali
        zed keystore
        at de.schlichtherle.license.LicenseNotary.getPublicKey(Unknown Source)
        at de.schlichtherle.license.LicenseNotary.verify(Unknown Source)
        at de.schlichtherle.license.LicenseManager.verify(Unknown Source)
        at de.schlichtherle.license.LicenseManager.verify(Unknown Source)

        at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
        at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:206)
        at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
        at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29
        )
        at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
        ... 1 more
        Caused by: java.security.KeyStoreException: Uninitialized keystore
        at java.security.KeyStore.isKeyEntry(Unknown Source)
        ... 17 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:46:12.093

这两个选项都接受参数来过滤您要适应的文件：

cfr。ProGuard 手册 > 用法 > [-adaptresourcefilenames](http://proguard.sourceforge.net/manual/usage.html#adaptresourcefilenames) / [-adaptresourcefilecontents](http://proguard.sourceforge.net/manual/usage.html#adaptresourcefilenames)

# android - 在滚动时更新相同的 listView

> ID：14138871
> 
> 赞同：0
> 
> 时间：2013-01-03T12:22:12.977
> 
> 标签：android, android-layout, android-listview, android-asynctask, android-adapter

该应用程序的目的是在用户向下滚动并更新现有 ListView 时获取更多数据。

处理用户滚动的代码片段是：

```
public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, 
                     int totalItemCount) {
    int totalVisible = firstVisibleItem + visibleItemCount;

     if (view.getAdapter() != null && 
        (totalVisible >= totalItemCount) && 
        totalItemCount != priorFirst && 
        visibleItemCount != totalItemCount) {
            Log.v("MyActivity", "onListEnd, extending list");
            priorFirst = totalItemCount;

            //params is array of values passed to business layer for data fetch
            String[] params = builder.toString().split("&");

            UIHandler uiHandler = new UIHandler(this, getParent());
            //start async task      
            EnquiriesRunner enquiriesRunner = new EnquiriesRunner(uiHandler);
            enquiriesRunner.execute(params);
    } 
```

在后台，它调用业务层。

```
protected ExceptionHandler<Object> doInBackground(String... params) {
    Object obj = enquiriesCaller.getEnquiries(params);
    return new ExceptionHandler<Object>(obj);
} 
```

并将生成的数据传递给 UI 处理程序，该处理程序使用自定义适配器将其呈现给 listView。

```
ListView enquiryView = (ListView) ((Activity) childContext).findViewById(R.id.enquiryListView);
CustomAdapter adapter = new CustomAdapter(childContext, msg.obj);
enquiryView.setAdapter(adapter); 
```

msg.obj 是包装到 Object 中的搜索结果。这将被转换为适配器中所需的 POJO 引用。

如您所见，每次 listView 都被新的数据集替换。任何人都可以提出更新现有列表的可能解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:36:22.473

试试这个链接，它会对你有用。

[http://benjii.me/2010/08/endless-scrolling-listview-in-android/](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)

您可以在滚动时更新 ListView ..

# asp.net-mvc - 如何在 ASP.NET MVC 4 应用程序中使用会话？

> ID：14138872
> 
> 赞同：123
> 
> 时间：2013-01-03T12:22:13.213
> 
> 标签：asp.net-mvc, session, asp.net-mvc-4, session-variables

我是 ASP.NET MVC 的新手。我以前使用过 PHP，很容易创建会话并根据当前会话变量选择用户记录。

我在 Internet 上到处寻找一个简单的分步教程，它可以向我展示如何在我的 C# ASP.NET MVC 4 应用程序中创建和使用会话。我想创建一个包含用户变量的会话，我可以从控制器中的任何位置访问它，并且能够在我的 LINQ 查询中使用这些变量。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-01-03T12:34:45.343

尝试

```
//adding data to session
//assuming the method below will return list of Products

var products=Db.GetProducts();

//Store the products to a session

Session["products"]=products;

//To get what you have stored to a session

var products=Session["products"] as List<Product>;

//to clear the session value

Session["products"]=null; 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-12-20T11:50:37.787

由于 Web 的无状态特性，会话也是一种通过序列化对象并将它们存储在会话中来跨请求持久化对象的非常有用的方法。

一个完美的用例可能是，如果您需要在整个应用程序中访问常规信息，以便在每个请求上保存额外的数据库调用，这些数据可以存储在一个对象中并在每个请求上反序列化，如下所示：

**我们可重用、可序列化的对象：**

```
[Serializable]
public class UserProfileSessionData
{
    public int UserId { get; set; }

    public string EmailAddress { get; set; }

    public string FullName { get; set; }
} 
```

**用例：**

```
public class LoginController : Controller {

    [HttpPost]
    public ActionResult Login(LoginModel model)
    {
        if (ModelState.IsValid)
        {
            var profileData = new UserProfileSessionData {
                UserId = model.UserId,
                EmailAddress = model.EmailAddress,
                FullName = model.FullName
            }

            this.Session["UserProfile"] = profileData;
        }
    }

    public ActionResult LoggedInStatusMessage()
    {
        var profileData = this.Session["UserProfile"] as UserProfileSessionData;

        /* From here you could output profileData.FullName to a view and
        save yourself unnecessary database calls */
    }

} 
```

一旦该对象被序列化，我们就可以在所有控制器中使用它，而无需再次创建它或查询数据库以获取其中包含的数据。

**使用依赖注入注入会话对象**

在一个理想的世界里，你会'[编程到一个接口，而不是实现](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)'并使用你选择的控制反转容器将你的可序列化会话对象注入你的控制器，就像这样（这个例子使用 StructureMap，因为它是我最熟悉的）。

```
public class WebsiteRegistry : Registry
{
    public WebsiteRegistry()
    {
        this.For<IUserProfileSessionData>().HybridHttpOrThreadLocalScoped().Use(() => GetUserProfileFromSession());   
    }

    public static IUserProfileSessionData GetUserProfileFromSession()
    {
        var session = HttpContext.Current.Session;
        if (session["UserProfile"] != null)
        {
            return session["UserProfile"] as IUserProfileSessionData;
        }

        /* Create new empty session object */
        session["UserProfile"] = new UserProfileSessionData();

        return session["UserProfile"] as IUserProfileSessionData;
    }
} 
```

然后，您将在您的`Global.asax.cs`文件中注册它。

对于那些不熟悉注入会话对象的人，您可以在[此处](http://josephwoodward.co.uk/2014/06/sessions-asp-net-mvc-using-dependency-injection/)找到有关该主题的更深入的博客文章。

**一句警告：**

值得注意的是，会话应保持在最低限度，大型会话可能会开始导致性能问题。

还建议不要在其中存储任何敏感数据（密码等）。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-03T12:25:00.933

这是会话状态在 ASP.NET 和 ASP.NET MVC 中的工作方式：

[ASP.NET 会话状态概述](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

基本上，您这样做是为了在 Session 对象中存储一个值：

```
Session["FirstName"] = FirstNameTextBox.Text; 
```

要检索值：

```
var firstName = Session["FirstName"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-30T22:55:50.760

您可以使用以下方法在会话中存储任何类型的数据：

```
Session["VariableName"]=value; 
```

这个变量将持续 20 分钟左右。

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2016-04-20T14:03:19.350

您可以在会话中存储任何值，例如 Session["FirstName"] = FirstNameTextBox.Text; 但我会建议您将模型中的静态字段作为为其分配值，您可以在应用程序中的任何位置访问该字段值。你不需要会话。应避免会话。

```
public class Employee
{
   public int UserId { get; set; }
   public string EmailAddress { get; set; }
   public static string FullName { get; set; }
} 
```

在控制器上 - Employee.FullName = "ABC"; 现在你可以在应用程序的任何地方访问这个全名。

# javascript - 将数组传递给玉文件

> ID：14138879
> 
> 赞同：0
> 
> 时间：2013-01-03T12:22:26.690
> 
> 标签：javascript, node.js, express, pug

所以这是我的问题：

我在我的快速代码中的某处有这个渲染函数：

```
 function renderWithData(arrayOfEvents, res) {
    res.render("index", {
        locals: {
            pageTitle: "Wochenplaner",
            events: arrayOfEvents
        }
    });
} 
```

它向 index.jade 传递一个名为*events*的变量。现在我想在jade中解析这个变量，例如：

```
- if(locals.events[0] == true) alert("Bla"); 
```

但是 express 告诉我*locals.events*是未定义的。我如何正确地将变量传递给那种“rendering-javascript”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:12:14.763

好吧，我是菜鸟！

在我的实现中，这个 if-construct 是这样循环的：

```
for(var i = 0; i < number; i++) {
if(locals.events[i].time == 7) alert("bla");
} 
```

我没有考虑的是， locals.events[i].time 可能是“未定义的”，因为该数组中的索引处根本没有日期。所以我通过添加以下内容来解决这个问题：

```
if(typeof locals.events[i].time !== "undefined" && locals.events[i].time == 7) alert("bla"); 
```

从节点代码访问js变量并将其传递给jade的正确方法是通过对象访问它。如果这是我的对象：

```
locals: {
        pageTitle: "Wochenplaner",
        events: arrayOfEvents
    } 
```

然后我会像这样在 Jade 中访问它：

```
locals.events[index].property 
```

很抱歉浪费你的时间:)

# ios - 如何在 iOS 上使用 ImageMagick 的 ProgressMonitor 功能？

> ID：14138885
> 
> 赞同：0
> 
> 时间：2013-01-03T12:22:57.677
> 
> 标签：ios, imagemagick, progressmonitor

我在 ios 上使用 Image Magick，并且已将服务器上使用的一些命令行转换为 ConvertImageCommand。一切正常。我已将 -monitor 作为参数添加到命令中，这样我就可以看到图像上的每一个微小进展（加载、调整大小、裁剪等）

但是，我想显示一个进度条来通知用户图像处理的进度。我正在寻找一个关于如何使用进度监视器功能的非常简单的例子......

```
SetImageProgressMonitor(Image *,const MagickProgressMonitor,void *),
SetImageInfoProgressMonitor(ImageInfo *,const MagickProgressMonitor,void *); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:51:57.953

这是代码：

```
- (void)ExecuteCommand {
    /*
     command is an array which contains all the elements of the ImageMagick command.
     example:
     command (
     convert,
     imgSource.jpg,
     "-blur",
     "0x2.5",
     "-paint",
     5,
     imgSaved.jpg
     )
     */

    ImageInfo *imageInfo = AcquireImageInfo();
    int nbArgs = command.count;
    char **argv = (char **)malloc((nbArgs + 1) * sizeof(char*));

    for (unsigned i = 0; i < nbArgs; i++)
    {
        NSString *argString = [command objectAtIndex:i];
        argv[i] = strdup([argString UTF8String]);
    }

    argv[nbArgs] = NULL;

    progress_monitor_method = SetImageInfoProgressMonitor(imageInfo, &MonitorProgress, self);
    ConvertImageCommand(imageInfo, nbArgs, argv, NULL, AcquireExceptionInfo());

    if (argv != NULL)
    {
        for (unsigned index = 0; argv[index] != NULL; index++) {
            free(argv[index]);
        }
        free(argv);
    }
}

MagickBooleanType MonitorProgress(const char *text,const MagickOffsetType offset,const MagickSizeType extent,void *client_data) {
    IM_TestViewController *IMVC = client_data;
    float prog = offset;
    float tot = extent;
    NSNumber *value = [NSNumber numberWithFloat:prog/tot];
    [IMVC performSelectorInBackground:@selector(updateProgressBar:) withObject:value] ;
    NSLog(@"Action : %@ %lld on %lld", [NSString stringWithCString:text encoding:NSUTF8StringEncoding], offset, extent);
    return MagickTrue;
}

- (void)updateProgressBar:(NSNumber *)value {
    self.progressBar.progress = [value floatValue];
} 
```

# database - Access 2007 - 2010 可以使用什么 ORM？我在 WPF 绑定到表等之后

> ID：14138887
> 
> 赞同：6
> 
> 时间：2013-01-03T12:23:04.897
> 
> 标签：database, entity-framework, nhibernate, orm, ms-access-2007

我有一个所有网站都有的旧数据库，它以多种类别/子类别/子项目格式描述特定内容。到目前为止，添加/编辑内容要么是在表格中手动工作，要么是原始 sql Windows 窗体工具（我是在开始工作时构建的！）。

我想要具有 WPF 4.5 和 .net 4.5 的实体框架样式拖放、绑定和运行编码能力。

我对使用 NHibernate 犹豫不决，因为 EF5 使用起来非常简单，我知道 Nhibernate 需要更多工作（尽管 ORM 更快）。有没有效果很好的替代品？如果可能的话，我试图避免过多的手动设置。编辑器不是一个强制性项目，我不能证明在它上面做很多额外的工作是合理的——但如果把它的一个好的版本放在一起，它会让我在接下来的 2 年里的工作更轻松。

我非常清楚所有反对 Access 的论点 :) - 至少一年内都不能选择交换它。

搜索了 StackOverflow 站点后，我没有看到太多的问题，但如果我错过了一个好的问题，我深表歉意！

更新：我认为我应该稍微改进我的问题，因为我需要在什么代码生成时得到什么，这样我就不需要手动构建 Access 数据库的所有类。从我所见，Dapper 的工作是围绕效率，但与生成代码不同。来自实体框架的思维方式，我可以看到我在思考中将任务结合在一起的地方:)。所以除了煮我自己 - 有没有人知道一个很好的代码生成与Access一起使用。这我可以嫁给 Dapper :)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T14:21:44.857

您不能使用实体框架，因为它不适用于 Access 数据库。

可以将 NHibernate 与 MS Access 一起使用，尽管 NH 不支持开箱即用的 Access。
您需要来自[NHContrib的](http://sourceforge.net/projects/nhcontrib/)[NHibernate.JetDriver](http://nhcontrib.svn.sourceforge.net/viewvc/nhcontrib/trunk/src/NHibernate.JetDriver/)，[这里](https://community.jboss.org/wiki/DatabasesSupportedByNHibernate#Microsoft_Access)是 NH 配置文件的示例设置。

如果我没记错的话，NH Contrib 需要根据您使用的确切 NH 版本进行编译，因此您可能需要下载源代码并自行编译。

作为替代方案，您可以使用许多微 ORM 之一，例如 Stack Overflow 自己的[Dapper](http://code.google.com/p/dapper-dot-net/)。

Dapper 与数据库无关，因此它可以连接到包括 Access 在内的所有内容。引用自官网：

> **dapper 会与我的数据库提供商一起工作吗？**
> Dapper 没有特定于 DB 的实现细节，它适用于所有 .net ado 提供程序，包括 sqlite、sqlce、firebird、oracle、MySQL 和 SQL Server

缺点是因为 Dapper 与 DB 无关，所以你必须自己实现一些高级的东西，比如[paging](https://stackoverflow.com/a/6916791/6884)。

* * *

**编辑：**

IMO Dapper**属于**“相当容易快速运行的类别”。
看看这个：（
*完整的[演示项目在这里](https://github.com/christianspecht/code-examples/tree/master/DapperExample)）*

```
using System;
using System.Data.OleDb;
using Dapper;

namespace DapperExample
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var con = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=test.mdb"))
            {
                var list = con.Query<Product>("select * from products");

                Console.WriteLine("map to a strongly typed list:");
                foreach (var item in list)
                {
                    Console.WriteLine(item.ProductNumber + " : " + item.Description);
                }

                Console.WriteLine();

                var list2 = con.Query("select * from products");

                Console.WriteLine("map to a list of dynamic objects:");
                foreach (var item in list2)
                {
                    Console.WriteLine(item.ProductNumber + " : " + item.Description);
                }

                Console.ReadLine();
            }
        }
    }

    public class Product
    {
        public string ProductNumber { get; set; }
        public string Description { get; set; }
    }
} 
```

此示例代码中有两个不同的查询。

第一个映射到一个强类型列表，例如结果是一个`IEnumerable<Product>`. 当然，它需要一个`Product`可以映射到的类。

第二个查询返回一个`IEnumerable<Dynamic>`(>= .NET 4.0)，这意味着属性是动态评估的，您不需要之前定义类，但缺点是您失去了类型安全性（和 IntelliSense）。
我个人的观点是，缺少类型安全性对我来说是一个交易破坏者（我更喜欢第一个查询语法），但也许这适合你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-07T20:13:16.277

讨厌复活一个旧线程，但我最近做了一个 WPF 项目，使用 PetaPoco，一个微 ORM，和 MS Access，所以我想我会分享我的实现。

要将 MS Access 支持添加到 PetaPoco，您只需添加几段代码：

首先添加一个 AccessDatabaseType 类。所有 DataBaseType 类都位于 PetaPoco.cs 文件的末尾。只需在 SqlServerDatabaseType 之后添加新类。

```
class AccessDatabaseType : DatabaseType
{
    public override object ExecuteInsert(Database db, IDbCommand cmd, string PrimaryKeyName)
    {               
        db.ExecuteNonQueryHelper(cmd);
        return db.ExecuteScalar<object>("SELECT @@@IDENTITY AS NewID;");
    }

} 
```

接下来，修改 PetaPoco.Internal.DatabaseType.Resolve() 以支持 AccessDatabaseType。（此代码假定您使用的是 Jet OLEDB 提供程序）

```
public static DatabaseType Resolve(string TypeName, string ProviderName)
{
    //...

    if (ProviderName.IndexOf("Oledb", StringComparison.InvariantCultureIgnoreCase) >= 0)
        return Singleton<AccessDatabaseType>.Instance;  

    // Assume SQL Server
    return Singleton<SqlServerDatabaseType>.Instance;
} 
```

最后，要实例化 PetaPoco，请使用以下命令：

```
Db = New PetaPoco.Database("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\db.mdb", "System.Data.Oledb") 
```

* * *

限制：

*   PetaPoco 假设您的主键是自动编号/身份字段。如果您有一个不是自动编号的 PK 或者您有一个复合 PK，您需要实现自己的插入和保存逻辑。
*   我的应用程序不需要分页，所以我没有实现它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T15:07:09.860

我们正在使用 [Jet Entity Framework Provider](https://jetentityframeworkprovider.codeplex.com/discussions/661349)。这样我们以后可以轻松地移植到另一个数据库。

它没有上面提到的所有限制并且效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-22T07:56:52.030

Tortuga Chain 完全支持 Access。

[https://docevaad.github.io/Chain/Introduction.htm](https://docevaad.github.io/Chain/Introduction.htm)

# asp.net-mvc-4 - MVC 4 应用程序、EF 和 Web API 结构和用户身份验证

> ID：14138888
> 
> 赞同：3
> 
> 时间：2013-01-03T12:23:12.557
> 
> 标签：asp.net-mvc-4, asp.net-web-api, entity-framework-5

我正在使用以下技术开发一个网站：

MVC 4 EF 5 Web Api Future - 可能的 Windows Phone/Windows 8 应用程序。

我正在使用 Web API，因此我有一个可以在其他客户端上使用的开发 api。

但是，每次向 API 发出请求时，我都需要授权用户。我最初的想法是通过 HTTP 标头执行此操作。但是，我只是想知道如果我要开发手机/win 8 应用程序，是否应该只使用 MVC 控制器而不是 Web API 来创建 MVC 应用程序并创建一个 RESTful api，再次需要对用户进行身份验证。所以原来的问题依然存在。

人们的想法是什么？任何人都可以向我指出如何通过 HTTP 标头安全地传递经过身份验证的用户详细信息的教程，这也是一步一步的教程，因为我将从头开始学习并需要理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:43:11.987

我使用基本身份验证来传递授权凭据。这会将凭据放在标题中。**使用 JQuery ajax函数的****beforeSend**事件处理程序非常简单。这是一个如何执行此操作的示例。

 **```
 getAuthorizationHeader = function (username, password) {
      var authType;
      var up = $.base64.encode(username + ":" + password);
      authType = "Basic " + up;
    };
    return authType;
 };

    $.ajax({
        url: _url,
        data: _data,
        type: _type,
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", getAuthorizationHeader(username, password));
        },
        success: ajaxSuccessHandler,
        error: ajaxErrHandler
    }); 
```

这对在标头中发送的用户名/密码进行编码。请注意，仅依靠编码是不够的安全性，因为它很容易解码。您仍然希望使用 HTTPS/SSL 来确保通过网络发送的信息是安全的。

在 Web API 端，您可以创建一个自定义**AuthorizeAttribute**，它从标头中获取凭据、解码它们并执行您的授权过程。Web API 使用了一个单独的**AuthorizeAttribute ，而不是控制器。**创建自定义**AuthorizeAttribute**时，请务必使用**System.Web.Http.AuthorizeAttribute**作为基类。他们有不同的行为。用于控制器的那个将要重定向到登录页面，而用于 Web API 的那个会返回一个指示成功或失败的 HTTP 代码。如果授权未能区分由于授权而不是身份验证导致的失败，我将返回一个 HTTP 代码 Forbidden，以便客户端可以做出相应的反应。

 **这是一个示例方法，用于从可以在自定义**AuthorizeAttribute**中使用的标头中获取凭据。

```
 private bool GetUserNameAndPassword(HttpActionContext actionContext, out string username, out string password)
    {
        bool gotIt = false;
        username = string.Empty;
        password = string.Empty;
        IEnumerable<string> headerVals;
        if (actionContext.Request.Headers.TryGetValues("Authorization", out headerVals))
        {
            try
            {
                string authHeader = headerVals.FirstOrDefault();
                char[] delims = { ' ' };
                string[] authHeaderTokens = authHeader.Split(new char[] { ' ' });
                if (authHeaderTokens[0].Contains("Basic"))
                {
                    string decodedStr = SecurityHelper.DecodeFrom64(authHeaderTokens[1]);
                    string[] unpw = decodedStr.Split(new char[] { ':' });
                    username = unpw[0];
                    password = unpw[1];
                }
                gotIt = true;
            }
            catch { gotIt = false; }
        }

        return gotIt;
    } 
```

这是用于解码此方法中使用的标头数据的代码。

```
 public static string DecodeFrom64(string encodedData)
    {

        byte[] encodedDataAsBytes

            = System.Convert.FromBase64String(encodedData);

        string returnValue =

           System.Text.Encoding.ASCII.GetString(encodedDataAsBytes);

        return returnValue;

    } 
```

获得用户名和密码后，您可以执行授权过程并将适当的 HTTP 代码返回给客户端进行处理。

**2013 年 3 月 8 日更新**

我写了[一篇博文，详细介绍了如何使用 SimpleMembership 实现这一点](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html)，它是 MVC 4 Internet 应用程序的默认成员提供程序。它还包括一个实现此功能的可下载 VS 2012 项目。****

# php - 删除一行后如何更新yii CGridview摘要

> ID：14138893
> 
> 赞同：3
> 
> 时间：2013-01-03T12:23:48.333
> 
> 标签：php, yii, cgridview

使用 ajax 进行删除，但显示为 (1-25 of 100 ) 的计数摘要必须更新为 (1-25 of 99)。怎么做？

更新了代码：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'user-grid',
            'dataProvider'=>$provider,
            'filter' => $model,
            'hideHeader'=>false,
          'afterAjaxUpdate'=>'function(id,data){jQuery("#summaryUpdate").html(" - " +jQuery(".grid-view .summary").html());}',
            'columns'=>array(
                'id',
                'username',
                'dob',
                'email',
                array(
                    'class'=>'CCustomColumn',
                    'afterDelete' => 'function(id,data){jQuery("#summaryUpdate").html(" - " +jQuery(".grid-view .summary").html());}',

                    'updateButtonImageUrl'=>Yii::app()->baseUrl.'/images/edit.png',
                    'deleteButtonImageUrl'=>Yii::app()->baseUrl.'/images/delete.png',
                    'buttons'=>array(
                    'update'=>array('url'=>'Yii::app()->createUrl("user/update", array("id"=>$data["id"]))', ),
                    'delete'=>array('url'=>'Yii::app()->createUrl("user/delete", array("id"=>$data["id"]))', )
                    )
                ),
            ),
            'cssFile'=>Yii::app()->request->baseUrl."/css/gridview.css",
        )); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T22:05:20.270

它应该自动更新您使用的摘要

```
$.fn.yiiGridView.update('grid-name'); 
```

更新网格？

# java - 使用 TreeMap 模拟文件系统？

> ID：14138897
> 
> 赞同：2
> 
> 时间：2013-01-03T12:24:07.860
> 
> 标签：java, data-structures, conceptual

我试图弄清楚如何为我正在尝试制作的 Java shell 制作看起来像文件夹文件结构的东西。我希望它类似于 linux 文件夹结构（具有根目录并且所有内容都来自它）。

对于初学者，我想知道我是否应该使用 TreeMap（因此保持某种类型的顺序）或者是否有更好的东西。我知道 Java 的 API 很庞大，并且有许多不同的数据结构，我只是不确定哪个是合适的。

另一个问题是在“目录”之间导航。我所拥有的基本概念是使用变量作为“地标”，这会根据我要去或离开的地方而改变。

树中的文件夹将是由根（main.class）创建的“服务器”对象（server.class），而根（main.class）又具有由服务器对象中的方法创建的“应用程序”对象（application.class）。

我的概念是否站得住脚，或者这没有希望工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:33:17.827

如果您使用的是 java7，则可以查看 shrinkwrap[或](http://exitcondition.alrubinger.com/2012/08/17/shrinkwrap-nio2/)实现您自己的[FileSystemProvider](http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileSystemProvider.html)。

在 java7 之前，模拟“内存中的文件系统”是相当复杂的。您可以查看[commons-vfs](http://commons.apache.org/vfs/)，但如果我没记错的话，它只处理 URL 而不是文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:28:57.630

这听起来根本不像 Map（键/值存储）。

我宁愿有一个文件/目录对象的树结构。您当前的位置被简单地记录为 Directory 对象的一个​​实例。我怀疑为了效率你可能需要一个双重链接的结构。

这个[SO question/answer](https://stackoverflow.com/questions/3522454/java-tree-data-structure)可能会提供更多信息和建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:29:04.310

使用真正的 Tree 结构，而不是 TreeMap。它可以在内部将 TreeMaps 用于每个节点（文件夹）的内容，但整体不应该是 TreeMap。

# python - matplotlib 如何绘制 3D 数据集中的几乎任意平面？

> ID：14138899
> 
> 赞同：5
> 
> 时间：2013-01-03T12:24:09.763
> 
> 标签：python, numpy, matplotlib

有一个包含形状 3D 数据的数组，例如 (64,64,64)，如何通过该数据集绘制由点和法线给出的平面（类似于晶体学中的 hkl 平面）？类似于在 MayaVi 中通过在数据中旋转平面来完成的操作。

在大多数情况下，生成的图将包含非方形平面。这些可以用matplotlib（某种非矩形补丁）完成吗？

**编辑**：我自己几乎解决了这个问题（见下文），但仍然想知道如何在 matplotlib 中绘制非矩形补丁......？

**编辑**：由于下面的讨论，我重申了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:58:13.597

这很有趣，我今天刚刚回答了一个类似的问题。要走的路是：插值。您可以使用来自 scipy.interpolate 的 griddata：

[网格数据](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html#scipy-interpolate-griddata)

这个页面有一个很好的例子，函数的签名非常接近你的数据。

您仍然必须以某种方式定义平面上要插入数据的点。我会看看这个，我几年前的线性代数课

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T15:33:19.423

我有这个问题的倒数第二个解决方案。通过使用第二个答案来部分解决[Plot a plane based on a normal vector and a point in Matlab or matplotlib](https://stackoverflow.com/questions/3461869/how-to-plot-a-plane-in-matlab-or-scipy-matplotlib)：

```
# coding: utf-8
import numpy as np
from matplotlib.pyplot import imshow,show

A=np.empty((64,64,64)) #This is the data array
def f(x,y):
    return np.sin(x/(2*np.pi))+np.cos(y/(2*np.pi))
xx,yy= np.meshgrid(range(64), range(64))
for x in range(64):
    A[:,:,x]=f(xx,yy)*np.cos(x/np.pi)

N=np.zeros((64,64)) 
"""This is the plane we cut from A. 
It should be larger than 64, due to diagonal planes being larger. 
Will be fixed."""

normal=np.array([-1,-1,1]) #Define cut plane here. Normal vector components restricted to integers
point=np.array([0,0,0])
d = -np.sum(point*normal)

def plane(x,y): # Get plane's z values
    return (-normal[0]*x-normal[1]*y-d)/normal[2]

def getZZ(x,y): #Get z for all values x,y. If z>64 it's out of range
    for i in x:
        for j in y:
            if plane(i,j)<64:
                N[i,j]=A[i,j,plane(i,j)]

getZZ(range(64),range(64))
imshow(N, interpolation="Nearest")
show() 
```

这不是最终的解决方案，因为绘图不限于具有 z 值的点，不考虑大于 64 * 64 的平面，并且必须在 (0,0,0) 处定义平面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T16:48:57.960

为了减少需求，我准备了一个简单的例子

```
import numpy as np
import pylab as plt

data = np.arange((64**3))
data.resize((64,64,64))

def get_slice(volume, orientation, index):
    orientation2slicefunc = {
        "x" : lambda ar:ar[index,:,:], 
        "y" : lambda ar:ar[:,index,:],  
        "z" : lambda ar:ar[:,:,index]
    }
    return orientation2slicefunc[orientation](volume)

plt.subplot(221)
plt.imshow(get_slice(data, "x", 10), vmin=0, vmax=64**3)

plt.subplot(222)
plt.imshow(get_slice(data, "x", 39), vmin=0, vmax=64**3)

plt.subplot(223)
plt.imshow(get_slice(data, "y", 15), vmin=0, vmax=64**3)
plt.subplot(224)
plt.imshow(get_slice(data, "z", 25), vmin=0, vmax=64**3)  

plt.show() 
```

这导致以下情节：

![四个示例切片](../Images/8463ed635994598d9289cf61852522ba.png)

主要技巧是将字典映射方向映射到 lambda 方法，这使我们免于编写烦人的 if-then-else-blocks。当然，您可以决定为方向指定不同的名称，例如数字。

也许这对你有帮助。

托尔斯滕

PS：我不关心“IndexOutOfRange”，对我来说，让这个异常弹出是可以的，因为在这种情况下它是完全可以理解的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-25T05:08:03.837

我必须为 MRI 数据增强做类似的事情：

可能代码可以优化，但它可以按原样工作。
我的数据是代表 MRI 扫描仪的 3 维 numpy 数组。它的大小为 [128,128,128]，但可以修改代码以接受任何尺寸。此外，当平面位于立方体边界之外时，您必须在主函数中为变量**填充提供默认值，在我的情况下，我选择：** **data_cube[0:5,0:5,0:5].mean()**

```
def create_normal_vector(x, y,z):

    normal = np.asarray([x,y,z])
    normal = normal/np.sqrt(sum(normal**2))
    return normal

def get_plane_equation_parameters(normal,point):
    a,b,c = normal
    d = np.dot(normal,point)
    return a,b,c,d        #ax+by+cz=d  

def get_point_plane_proximity(plane,point):
    #just aproximation
    return np.dot(plane[0:-1],point) - plane[-1]

def get_corner_interesections(plane, cube_dim = 128): #to reduce the search space
    #dimension is 128,128,128
    corners_list = []
    only_x = np.zeros(4)
    min_prox_x = 9999
    min_prox_y = 9999
    min_prox_z = 9999
    min_prox_yz = 9999
    for i in range(cube_dim):
        temp_min_prox_x=abs(get_point_plane_proximity(plane,np.asarray([i,0,0])))
       # print("pseudo distance x: {0}, point: [{1},0,0]".format(temp_min_prox_x,i))
        if temp_min_prox_x <  min_prox_x:
            min_prox_x = temp_min_prox_x
            corner_intersection_x = np.asarray([i,0,0])
            only_x[0]= i

        temp_min_prox_y=abs(get_point_plane_proximity(plane,np.asarray([i,cube_dim,0])))
       # print("pseudo distance y: {0}, point: [{1},{2},0]".format(temp_min_prox_y,i,cube_dim))

        if temp_min_prox_y <  min_prox_y:
            min_prox_y = temp_min_prox_y
            corner_intersection_y = np.asarray([i,cube_dim,0]) 
            only_x[1]= i

        temp_min_prox_z=abs(get_point_plane_proximity(plane,np.asarray([i,0,cube_dim])))
        #print("pseudo distance z: {0}, point: [{1},0,{2}]".format(temp_min_prox_z,i,cube_dim))

        if temp_min_prox_z <  min_prox_z:
            min_prox_z = temp_min_prox_z
            corner_intersection_z = np.asarray([i,0,cube_dim])
            only_x[2]= i

        temp_min_prox_yz=abs(get_point_plane_proximity(plane,np.asarray([i,cube_dim,cube_dim])))
        #print("pseudo distance z: {0}, point: [{1},{2},{2}]".format(temp_min_prox_yz,i,cube_dim))

        if temp_min_prox_yz <  min_prox_yz:
            min_prox_yz = temp_min_prox_yz
            corner_intersection_yz = np.asarray([i,cube_dim,cube_dim])
            only_x[3]= i

    corners_list.append(corner_intersection_x)      
    corners_list.append(corner_intersection_y)            
    corners_list.append(corner_intersection_z)            
    corners_list.append(corner_intersection_yz)
    corners_list.append(only_x.min()) 
    corners_list.append(only_x.max())           

    return corners_list       

def get_points_intersection(plane,min_x,max_x,data_cube,shape=128):

    fill = data_cube[0:5,0:5,0:5].mean() #this can be a parameter
    extended_data_cube = np.ones([shape+2,shape,shape])*fill
    extended_data_cube[1:shape+1,:,:] = data_cube 
    diag_image = np.zeros([shape,shape])
    min_x_value = 999999

    for i in range(shape):

        for j in range(shape):

            for k in range(int(min_x),int(max_x)+1):

                current_value = abs(get_point_plane_proximity(plane,np.asarray([k,i,j])))
                #print("current_value:{0}, val: [{1},{2},{3}]".format(current_value,k,i,j))
                if current_value < min_x_value:
                    diag_image[i,j] = extended_data_cube[k,i,j]
                    min_x_value = current_value

            min_x_value = 999999

    return diag_image 
```

它的工作方式如下：

您创建一个法线向量：例如 [5,0,3]

```
normal1=create_normal_vector(5, 0,3) #this is only to normalize 
```

然后你创建一个点：（我的立方体数据形状是 [128,128,128]）

```
point = [64,64,64] 
```

您计算平面方程参数 [a,b,c,d] 其中 ax+by+cz=d

```
plane1=get_plane_equation_parameters(normal1,point) 
```

然后为了减少搜索空间，您可以计算平面与立方体的交点：

```
corners1 = get_corner_interesections(plane1,128) 
```

其中corners1 = [交叉点[x,0,0]，交叉点[x,128,0]，交叉点[x,0,128]，交叉点[x,128,128]，最小交叉点[x,y,z]，最大交叉点[x ,y,z]]

通过所有这些，您可以计算立方体和平面之间的交集：

```
image1 = get_points_intersection(plane1,corners1[-2],corners1[-1],data_cube) 
```

一些例子：

正常是 [1,0,0] 点是 [64,64,64]

[![在此处输入图像描述](../Images/bcb38cc6b236e59986d889c88a059787.png)](https://i.stack.imgur.com/kROQ2.jpg)

正常是 [5,1,0],[5,1,1],[5,0,1] 点是 [64,64,64]：

[![在此处输入图像描述](../Images/80ca725510c1d484bcfa4fed7cbabdca.png)](https://i.stack.imgur.com/VptBD.jpg)

正常是 [5,3,0],[5,3,3],[5,0,3] 点是 [64,64,64]：

[![在此处输入图像描述](../Images/7756db20646714984c1842f3ed48825c.png)](https://i.stack.imgur.com/GNvEs.jpg)

正常是 [5,-5,0],[5,-5,-5],[5,0,-5] 点是 [64,64,64]：

[![在此处输入图像描述](../Images/617c10bc32627804a86c596ed721cfb2.png)](https://i.stack.imgur.com/yjgt7.jpg)

谢谢你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-04T20:07:35.373

`scipy.interpolate.griddata`此处的其他答案对于像素上的显式循环或使用（这是为非结构化输入数据设计的）似乎不是很有效。这是一个高效（矢量化）和通用的解决方案。

有一个纯 numpy 实现（用于最近邻“插值”）和一个用于线性插值的实现，它将插值委托给`scipy.ndimage.map_coordinates`. （后一个功能在 2013 年被问到这个问题时可能不存在。）

```
import numpy as np
from scipy.ndimage import map_coordinates

def slice_datacube(cube, center, eXY, mXY, fill=np.nan, interp=True):
    """Get a 2D slice from a 3-D array.

    Copyright: Han-Kwang Nienhuys, 2020.
    License: any of CC-BY-SA, CC-BY, BSD, GPL, LGPL
    Reference: https://stackoverflow.com/a/62733930/6228891

    Parameters:

    - cube: 3D array, assumed shape (nx, ny, nz).
    - center: shape (3,) with coordinates of center.
      can be float. 
    - eXY: unit vectors, shape (2, 3) - for X and Y axes of the slice.
      (unit vectors must be orthogonal; normalization is optional).
    - mXY: size tuple of output array (mX, mY) - int.
    - fill: value to use for out-of-range points.
    - interp: whether to interpolate (rather than using 'nearest')

    Return:

    - slice: array, shape (mX, mY).
    """

    center = np.array(center, dtype=float)
    assert center.shape == (3,)

    eXY = np.array(eXY)/np.linalg.norm(eXY, axis=1)[:, np.newaxis]
    if not np.isclose(eXY[0] @ eXY[1], 0, atol=1e-6):
        raise ValueError(f'eX and eY not orthogonal.')

    # R: rotation matrix: data_coords = center + R @ slice_coords
    eZ = np.cross(eXY[0], eXY[1])
    R = np.array([eXY[0], eXY[1], eZ], dtype=np.float32).T

    # setup slice points P with coordinates (X, Y, 0)
    mX, mY = int(mXY[0]), int(mXY[1])    
    Xs = np.arange(0.5-mX/2, 0.5+mX/2)
    Ys = np.arange(0.5-mY/2, 0.5+mY/2)
    PP = np.zeros((3, mX, mY), dtype=np.float32)
    PP[0, :, :] = Xs.reshape(mX, 1)
    PP[1, :, :] = Ys.reshape(1, mY)

    # Transform to data coordinates (x, y, z) - idx.shape == (3, mX, mY)
    if interp:
        idx = np.einsum('il,ljk->ijk', R, PP) + center.reshape(3, 1, 1)
        slice = map_coordinates(cube, idx, order=1, mode='constant', cval=fill)
    else:
        idx = np.einsum('il,ljk->ijk', R, PP) + (0.5 + center.reshape(3, 1, 1))
        idx = idx.astype(np.int16)
        # Find out which coordinates are out of range - shape (mX, mY)
        badpoints = np.any([
            idx[0, :, :] < 0,
            idx[0, :, :] >= cube.shape[0], 
            idx[1, :, :] < 0,
            idx[1, :, :] >= cube.shape[1], 
            idx[2, :, :] < 0,
            idx[2, :, :] >= cube.shape[2], 
            ], axis=0)

        idx[:, badpoints] = 0
        slice = cube[idx[0], idx[1], idx[2]]
        slice[badpoints] = fill

    return slice

# Demonstration
nx, ny, nz = 50, 70, 100
cube = np.full((nx, ny, nz), np.float32(1))

cube[nx//4:nx*3//4, :, :] += 1
cube[:, ny//2:ny*3//4, :] += 3
cube[:, :, nz//4:nz//2] += 7
cube[nx//3-2:nx//3+2, ny//2-2:ny//2+2, :] = 0 # black dot

Rz, Rx = np.pi/6, np.pi/4 # rotation angles around z and x
cz, sz = np.cos(Rz), np.sin(Rz)
cx, sx = np.cos(Rx), np.sin(Rx)

Rmz = np.array([[cz, -sz, 0], [sz, cz, 0], [0, 0, 1]])
Rmx = np.array([[1, 0, 0], [0, cx, -sx], [0, sx, cx]])
eXY = (Rmx @ Rmz).T[:2]

slice = slice_datacube(
    cube, 
    center=[nx/3, ny/2, nz*0.7], 
    eXY=eXY,
    mXY=[80, 90],
    fill=np.nan,
    interp=False
    )

import matplotlib.pyplot as plt
plt.close('all')
plt.imshow(slice.T) # imshow expects shape (mY, mX)
plt.colorbar() 
```

输出（对于`interp=False`）：

[![测试用例：3D 数据集的 2D 切片](../Images/c13b5781ab0135a206c45f1a33d880fd.png)](https://i.stack.imgur.com/4fgOK.png)

对于这个测试用例（50x70x100 数据立方体，80x90 切片大小），我的笔记本电脑上的运行时间是 376 µs ( `interp=False`) 和 550 µs ( `interp=True`)。

# c++ - 如何使用某种统计方法匹配软聚合特征（眼睛、鼻子、嘴巴）？

> ID：14138905
> 
> 赞同：1
> 
> 时间：2013-01-03T12:24:45.013
> 
> 标签：c++, machine-learning, face-recognition, feature-detection

我对ML有点了解，想自己实现一个学习系统，但不知道怎么做。谁能给我一个demo或者用其他方法比对人脸？

这是一个相关的帖子： [https](https://stackoverflow.com/questions/14079794/how-to-recognize-face-by-geometric-feature-such-as-eyes-nose-mouth) ://stackoverflow.com/questions/14079794/how-to-recognize-face-by-geometric-feature-such-as-eyes-nose-mouth 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:33:39.653

由于该主题的广泛性，人们无法根据上述信息合理地回答这个问题。

首先，您应该知道这些问题通常可以使用机器学习技术来解决，例如`Neural Networks`. 您说您对 ML*有所*了解，但恕我直言，您可能想阅读更多内容或参加有关机器学习的在线课程。

Coursera.org 上有一些我喜欢的很好的课程是[Andrew Ng 的机器学习](https://www.coursera.org/course/ml)。

这些方法也在上述课程中进行了描述，并且也有一些很好的作业，这将帮助您了解机器学习背后的详细想法。

# c# - 使用不同的输入设置测试方法

> ID：14138907
> 
> 赞同：12
> 
> 时间：2013-01-03T12:24:47.743
> 
> 标签：c#, visual-studio-2010, unit-testing, vs-unit-testing-framework

我想在 C# 中为所有代码路径测试以下方法。

```
public int foo (int x)
{
    if(x == 1)
        return 1;
    if(x==2)
        return 2;
    else
        return 0;
} 
```

我见过这个[pex 单元测试](http://fernandomachadopirizen.wordpress.com/2010/05/19/unit-tests-generation-with-pex-using-visual-studio-2010-and-c-4-0/)，其中测试了多个输入。如何创建一个接受多个输入的单元测试？

```
[TestMethod()] //some setup here??
    public void fooTest()
    {
         //some assert
    } 
```

我想避免为每个输入创建测试方法。我正在使用 Visual Studio 2010/2012 和 .Net 4.0

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-03T12:33:37.610

您可以使用[XML、数据库或 CSV 数据源 MS Test](http://codeclimber.net.nz/archive/2008/01/18/How-to-simulate-RowTest-with-MS-Test.aspx)。创建 FooTestData.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<Rows>
  <Row><Data>1</Data></Row>
  <Row><Data>2</Data></Row>
</Rows> 
```

并将其设置为测试的数据源：

```
[TestMethod]
[DeploymentItem("ProjectName\\FooTestData.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML",
                   "|DataDirectory|\\FooTestData.xml", "Row",
                    DataAccessMethod.Sequential)]
public void FooTest()
{
    int x = Int32.Parse((string)TestContext.DataRow["Data"]);
    // some assert
} 
```

顺便说一句，使用 NUnit 框架更容易匹配 - 您可以使用[TestCase 属性](http://www.nunit.org/index.php?p=testCase&r=2.5.9)来提供测试数据：

```
[TestCase(1)]
[TestCase(2)]
public void FooTest(int x)
{
   // some assert
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T12:33:48.170

如果使用 NUnit[参数化测试](http://nunit.org/index.php?p=testCase&r=2.6 "参数化测试")是可行的方法

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:34:46.470

在 MS Test 中，您可以创建*数据驱动的*测试，这些测试接受相同测试方法的不同输入。

这是一篇关于它的博客文章：http: [//toddmeinershagen.blogspot.ca/2011/02/creating-data-driven-tests-in-ms-test.html](http://toddmeinershagen.blogspot.ca/2011/02/creating-data-driven-tests-in-ms-test.html)

# php - 在匿名函数中使用变量，该函数在其他地方定义

> ID：14138908
> 
> 赞同：11
> 
> 时间：2013-01-03T12:24:50.957
> 
> 标签：php, closures, anonymous-function

在 PHP 中使用匿名函数时，您可以通过使用`use()`关键字轻松地在其范围之外使用变量。

在我的情况下，匿名函数已经在某处定义，但稍后在类中（其他地方）调用。

下面这段代码就是为了说明这个想法：

```
<?php

$bla = function ( $var1 ) use ($arg)
        {
            echo $var1;
        };

class MyClass
{
    private $func;

    public function __construct ( $func )
    {
        $this->func = $func;
    }

    public function test ( $arg )
    {
        $closure =  $this->func;
        $closure ( 'anon func' );
    }
}

$c = new MyClass($bla);
$c->test ( 'anon func' ); 
```

我正在做的是创建一个`anonymous function`并将其存储在一个变量中。我将该变量传递给一个类的方法，这就是我想要运行*匿名*函数的地方。

但是我不能使用关键字从这种方式`use()`获取`$arg`参数。`method`因为*匿名*函数是在`method`.

但我真的需要一种方法来从运行匿名函数的方法中获取变量。当匿名函数在其他地方声明时，有没有办法做到这一点..？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T12:28:33.413

`use`关键字的重点是*在定义时*[将特定环境状态从父范围继承/关闭](http://php.net/manual/en/functions.anonymous.php)到闭包中，例如

 *```
$foo = 1;

$fn = function() use ($foo) {
    return $foo;
};

$foo = 2;

echo $fn(); // gives 1 
```

如果您想`$foo`稍后关闭，请稍后定义关闭，或者，如果您想`$foo`始终保持当前值 (2)，`$foo`则作为常规参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T17:35:17.070

FWIW，如果你使用一个`use reference`（[php.net](http://www.php.net/manual/en/functions.anonymous.php#example-160) ex 3.3）和一个全局的，丑陋的，因为它使用全局变量，你可以做到这一点，但只是把它放在那里：

```
<?php
$bla = function ( $var1 ) use (&$arg)
        {
            return "var1:$var1, arg:$arg";
        };

class MyClass
{
    private $func;

    public function __construct ( $func )
    {
        $this->func = $func;
    }

    public function test ( $param )
    {
        global $arg;
        $arg=$param;
        $closure =  $this->func;
        return  $closure ( 'anon func' );
    }
}

$c = new MyClass($bla);
echo $c->test ( 'bla bla' ); //var1:anon func, arg:bla bla 
```*

# android - 强制用户设置偏好的模式

> ID：14138918
> 
> 赞同：1
> 
> 时间：2013-01-03T12:25:23.253
> 
> 标签：android, sharedpreferences, usability

我的应用程序需要连接到服务器，因此如果没有设置首选项，它将无法工作。使用 设置首选项`SharedPreferences`。我正在寻找的是一种将用户引导至设置活动的模式。什么是常见的？

目前我正在检查是否设置了所有首选项，否则我开始设置活动`onCreate`。`onResume`问题是：

1.  活动启动两次（通过`onCreate`和`onResume`）
2.  用户可能不知道他/她可以使用后退硬件密钥返回主要活动

有什么建议可以实施吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:31:23.037

1.  `onResume`将始终在 之后调用`onCreate`，因此您只需要在`onResume`方法中执行检查并启动新活动。

2.  您可以`Toast`在`SettingsActivity`加载时显示一个，例如：

    ```
    Toast.makeText(context, "Press back to return.", Toast.LENGTH_SHORT).show(); 
    ```

您可能还希望显示`Toast`或`AlertDialog`何时`SettingsActivity`开始告诉用户他们必须输入这些设置才能使用该应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:32:17.303

我建议您显示一个弹出对话框，其中包含“首先设置首选项”之类的消息，并带有一个按钮来打开您的设置活动。可以在 onResume 中检查 SharedPreferences 并打开对话框。
并在用户完成编辑设置（并按下保存按钮）时自动关闭设置活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:33:33.693

创建一个 LauncherActivity 类，您可以在其中决定应该启动哪个 Activity - PreferenceActivity 或 MainActivity：还要检查[此](http://www.blackmoonit.com/2010/02/android-always-create-launcher-activity/)建议

```
public class LauncherActivity extends Activity {

    SharedPreferences settings;

    public void onCreate(Bundle savedInstanceState) {

        settings = getSharedPreferences(PREFS_NAME, 0);

        if (settings.getBoolean(PREFS_REG, false)) {
            startActivity( new Intent(this, MAinActivity.class) );
            finish();
        } else {
             Intent enableBtIntent = new Intent(this, PreferenceActivity.class);
         startActivityForResult(enableBtIntent, SETTINGS);
        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if(requestCode == SETTINGS ) {
             startActivity( new Intent(this, MAinActivity.class) );
             Editor editor = settings.edit();
             editor.putBoolean(PREFS_REG, true);
             editor.commit();
             finish();
        }

    }
} 
```

如果用户“注册”然后将 PREFS_REG 设置为*true*`onActivityResult()`

# regex - perl匹配关键字并修改关键字

> ID：14138919
> 
> 赞同：2
> 
> 时间：2013-01-03T12:25:24.943
> 
> 标签：regex, perl

我先设置了一个环境变量 X。

```
> setenv X "abc 12_3 abc" 
```

然后我在 perl 中编写了一个正则表达式，试图在 $2 中匹配第一列以及一个空格和剩余的字符串。在这里我打印第一场比赛 $1

```
> echo $X|perl -lne '$_=~m/([^\s]*[\s])(.*)/;print $1'
abc 
```

在这里，我打印第二场比赛 $2。

```
> echo $X | perl -lne '$_=~m/([^\s]*[\s])(.*)/;print $2'
12_3 abc 
```

到目前为止，看起来一切都很好。现在我想将第二场比赛中的所有下划线替换为空格

```
> echo $X | perl -lne '$_=~m/([^\s]*[\s])(.*)/;$2=~s/_/ /g;'
Modification of a read-only value attempted at -e line 1, <> line 1. 
```

好吧，错误消息说 $2 是只读的。那很好。所以我将 $2 复制到一些临时变量 $temp。因此，在复制其罚款时，$1 和 $2 仍然存在，如下所示：

```
> echo $X | perl -lne '$_=~m/([^\s]*[\s])(.*)/;$temp=$2;print $1.$2'
abc 12_3 abc 
```

现在我尝试用临时字符串 $temp 中的空格替换下划线。

```
> echo $X | perl -lne '$_=~m/([^\s]*[\s])(.*)/;$temp=$2;$temp=~s/_/ /g;print $1.$2'

> 
```

我的问题是 1 美元和 2 美元去哪儿了？即使我对 $temp 进行了更改，如果它更改了 2 美元，至少 1 美元发生了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T12:30:00.467

该语句`$temp=~s/_/ /g`重置匹配变量；所以如果你想在新的匹配/替换之后使用 then ，你必须将 then 存储在一个变量中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:24:10.863

`s/_/ /g`成功了，并且它不包含捕获，因此它将所有捕获变量设置为 undef。

此代码将执行您想要的操作：

```
perl -nle'($x,$y)=/^(\S*\s+)(.*)/; $y =~ s/_/ /g; print $1.$2;' 
```

甚至：

```
perl -ple's/^\S*\s+\K(.*)/ ($x=$1) =~ s{_}{ }g; $x /e;' 
```

甚至（5.14+）：

```
perl -ple's/^\S*\s+\K(.*)/ $1 =~ s{_}{ }gr /e;' 
```

# ruby - Ruby Range 额外打印

> ID：14138922
> 
> 赞同：1
> 
> 时间：2013-01-03T12:25:33.513
> 
> 标签：ruby, range

我是编码新手，所以请随意指出我引用代码的方式中的任何错误。

```
rows = 5
 (1..rows).each do |n|
  print n, ' '
end 
```

这会打印出我期望的结果：`1 2 3 4 5`.

但是，当我把它放到一个方法中时：

```
def test(rows)
  (1..rows).each do |n|
   print n, ' '
 end
end

puts test(5) 
```

我明白了`1 2 3 4 5 1..5`。

为什么会`1..5`出现？我该如何摆脱它？

我在方法中需要它，因为我计划向它添加更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:27:08.360

`each`on a Range 返回循环完成后的范围，您可能也在打印返回值`test`。

只是运行`test(5)`而不是`puts test(5)`什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:31:22.623

Ruby 总是返回任何函数的最后一行。

您正在执行`puts test(5)`，并`test(5)`打印您期望的数据，额外`puts`打印出`test(5)`方法返回的数据。

希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T13:32:36.703

最后`1..5`是脚本的返回值。当你在 IRB 中运行代码时，你会得到它。当您将其作为独立的 Ruby 脚本运行时，它不会显示出来，因此您无需担心。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:45:05.690

在您的情况下，Ruby 函数将返回最后一条语句`1..5`。为了说明，我会给它一个不同的返回值：

```
def test(rows)
  (1..rows).each {|n| puts "#{ n } "}
  return 'mashbash'
end

# Just the function invokation, only the function will print something
test(5) # => "1 2 3 4 5 "

# Same as above, plus printing the return value of test(5)
puts test(5) # => "1 2 3 4 5 mashbash" 
```

你可以用不同的方式编写你的例子来达到你喜欢的效果：

```
def second_test(rows)
  # Cast range to an array
  array = (1..rows).to_a # [1, 2, 3, 4, 5]
  array.join(', ') # "1, 2, 3, 4, 5", and it is the last statement => return value
end

# Print the return value ("1, 2, 3, 4, 5") from the second_test function
p second_test(5) 
# => "1, 2, 3, 4, 5" 
```

# php - 如何使用正则表达式（PHP）删除此地址重复？

> ID：14138925
> 
> 赞同：1
> 
> 时间：2013-01-03T12:25:47.690
> 
> 标签：php, regex

我在下面有一些这样的文本，我想要删除最后一个地址匹配，问题是这些地址有不同的格式，取决于文本：

我有这个：

`To find out more about Groupon Goods, see the <a href="http://www.groupon.co.uk/faq"> FAQ</a>.\n\nUK-Bedding Returns:Albany Mill, Old Hall Street, Middleton, Manchester M241AG UK-Bedding Returns:Albany Mill, Old Hall Street, Middleton Manchester M241AG\n\n<a href="http://www.groupon.co.uk/terms_and_conditions"></a> Built by gskinner.com with Fl`

输出应该是这样的（我删除了最后一个“Albany Mill, Old Hall Street, Middleton Manchester M241AG”）：

`To find out more about Groupon Goods, see the <a href="http://www.groupon.co.uk/faq"> FAQ</a>.\n\nUK-Bedding Returns:Albany Mill, Old Hall Street, Middleton, Manchester M241AG UK-Bedding Returns:\n\n<a href="http://www.groupon.co.uk/terms_and_conditions"></a> Built by gskinner.com with Fl`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:40:33.600

如果总是有重复，我会采取不同的方式：

*   用换行符分割文本（使用 preg_split 因为有多个换行符）；
*   找到地址所在的行；
*   把它切成两半。

因此，在您的示例中，类似于（额外详细）：

```
$lines = preg_split('#\n+#', $text);
$addresses = $lines[1];
$address = substr($addresses, 0, floor(strlen($addresses) / 2)); 
```

# java - 如何从由Hashmap组成的listview中获取特定textview的值？

> ID：14138927
> 
> 赞同：1
> 
> 时间：2013-01-03T12:26:18.317
> 
> 标签：java, android

我`HashMap`用来在列表视图中存储数据，我有两个`TextView`在`ListView`. 不，我只想要 textview 的一个值。我怎么能通过方法得到它`onItemClick()`？

这是我尝试过的代码：

```
public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

                String mp =map.get(position);
                String str_Title = map.get(position);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:33:36.707

在 onItemClick 事件中：

```
HashMap<String, String> mymap = (HashMap<String, String>) parent.getItemAtPosition(position);
String str_Title = mymap.get(<KEY>); 
```

简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:30:41.903

以这种方式尝试：--

```
list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int pos,
                long arg3) {
            String mp =map.get(position).yourvalue;
                        String str_Title = map.get(position).title;

        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:31:25.907

A`HashMap`需要对象作为其键和值。`position`是一个`int`，因此不是一个`Object`，并且不能用作键或值。

要将整数用作键，您需要将它们转换为`Integer`对象：

```
int index = 1;
map.put(Integer.valueOf(index), myObject); 
```

并抓住物体：

```
map.get(Integer.valueOf(position)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:34:35.560

视图应该是具有两个文本视图的行视图，可能您可以使用其中一个检索 `TextView txt = (TextView)view.findViewById(R.id.your_text_view)`

# android - Android - 不与 Eclipse 连接时记录

> ID：14138931
> 
> 赞同：2
> 
> 时间：2013-01-03T12:26:56.563
> 
> 标签：android, logcat, android-logcat

**`not connect`**使用 USB 与 Eclipse 一起使用时，我可以保存我的应用程序的日志吗？

我想以编程方式执行此操作，而不使用任何工具。

我想保存应用程序的登录文件或 SDCARD。

如果是的话，那有可能怎么办？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:39:14.740

检查下面的代码它可能会帮助你：

你的主要活动

```
package com.get_Logs;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class Get_LogsActivity extends Activity {
    private TextView textv;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textv = (TextView)findViewById(R.id.textView1);

        getallLogs();
    }

    private void getallLogs() {
        // TODO Auto-generated method stub
        try {
            Process process = Runtime.getRuntime().exec("logcat -d");
            BufferedReader bufferedReader = new BufferedReader(
                    new InputStreamReader(process.getInputStream()));

            StringBuilder log = new StringBuilder();
            String line;
            while ((line = bufferedReader.readLine()) != null) {
                log.append(line+"\n");
            }

            File myFile = new File("/sdcard/mysdfile.doc");
            if (!myFile.exists()) {
                myFile.createNewFile();
            }

            Log.e("log---->", ""+log.toString());

            textv.setText(log.toString());

            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
            myOutWriter.append(log.toString());
            myOutWriter.close();
            fOut.close();

        } catch (IOException e) {
            Log.d("D: error generate log -->", "" + e.getMessage().toString());
        }
    }
} 
```

你的主要布局文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ScrollView android:id="@+id/scrollView1"
        android:layout_height="match_parent" android:layout_width="match_parent">
        <LinearLayout android:id="@+id/linearLayout1"
            android:layout_width="match_parent" android:layout_height="match_parent">
            <TextView android:id="@+id/textView1" android:layout_height="match_parent"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:text="TextView" android:layout_width="match_parent"></TextView>
        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

你的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.get_Logs"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="13"/>
    <uses-permission android:name="android.permission.READ_LOGS"></uses-permission>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Get_LogsActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:31:20.767

是的你可以。您可以使用此命令保存日志猫

```
logcat -d -v threadtime -f /mnt/sdcard/LogCatApp.txt -s YOURTAG 
```

请注意，您需要添加 Log.d("YOURTAG", "info here"); 为了看到一些东西，你也可以用这个保存一个完整的 logcat

```
logcat -d -v threadtime -f /mnt/sdcard/LogCatApp.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T12:33:18.780

使用[日志收集器](https://play.google.com/store/apps/details?id=com.xtralogic.android.logcollector&hl=es)

收集 logcat 的输出并使用电子邮件或消息将其发送给开发人员。可以用作独立应用程序或由另一个应用程序通过意图 API 调用。

检查这也为一个例子[http://code.google.com/p/android-log-collector/downloads/detail?name=android-log-collector-1.1.0.apk](http://code.google.com/p/android-log-collector/downloads/detail?name=android-log-collector-1.1.0.apk)

# azure - 在 Azure 上开始使用 Orchard

> ID：14138937
> 
> 赞同：2
> 
> 时间：2013-01-03T12:27:19.190
> 
> 标签：azure, orchardcms

我正在尝试建立一个 Orchard 站点以部署到 Azure，但遇到了第一个障碍。我已经下载了源代码并打开了 Orchard.Azure.sln，但是当我运行它时出现错误：

拒绝访问路径“C:\APPG\src\Orchard.Azure\Orchard.Azure.Web\App_Data\Dependencies”。

我究竟做错了什么？我完全是 Azure 的菜鸟，所以请原谅我的无知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:53:14.753

这实际上与 Azure 无关，但您需要确保运行网站的身份具有对 App_Data 文件夹的写入权限。要么授予 IIS 用户访问权限，要么将 IIS 中的应用程序池标识更改为网络服务。当 Orchard 第一次启动时，它会在 App_Data 下的文件夹中写入一大堆东西。

如果您需要随时重新安装，请记住这一点。只需删除该文件夹的内容并创建一个新的空白数据库（或使用紧凑选项）将重新开始。

# talend - talend 中的 NoClassDefFound 错误

> ID：14138944
> 
> 赞同：-2
> 
> 时间：2013-01-03T12:27:45.650
> 
> 标签：talend

我的示例作业显示以下错误。可能是什么问题呢。 ![在此处输入图像描述](../Images/3f668cecb0c2cbea83e5a888bdc03670.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:31:52.370

此作业存在未解决的编译错误。查看“问题”选项卡中的问题。

# python - 交互式图形 python wx.lib.plot。选择一些点

> ID：14138946
> 
> 赞同：0
> 
> 时间：2013-01-03T12:27:55.900
> 
> 标签：python

我有疑问，想看看它是否可以在 wxpython 中实现。我想在 wxpython 上绘制数据，然后使用鼠标选择一些绘制的点，使用鼠标。目前我正在使用 wx.lib.plot 并使用 PlotMarker

有没有办法用 wx.lib.plot 做到这一点，还是我必须使用另一个图形库

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:42:53.430

使用 matplotlib 可能更方便地完成您想要的工作（matplotlib 画布可以使用[来自 matplotlib.backends.backend_wxagg](http://matplotlib.org/examples/user_interfaces/embedding_in_wx5.html)的 FigureCanvasWxAgg 本身嵌入到 wxpython 中）。

在 matplotlib 中，您可以使用 picker 属性选择一个点。[在这里](http://matplotlib.org/examples/event_handling/pick_event_demo.html)和[这里，](http://matplotlib.org/examples/event_handling/pick_event_demo2.html)您有一些示例，说明如何允许拾取您绘制的对象以及如何监听事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:33:30.617

您可以使用 matplotlib 或 pygal。PyQtGraph 中使用了与您的描述技术类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:12:42.477

我会推荐使用 Chaco / TraitsUI 来处理这类事情。它们是专门为 Python 中的交互式绘图而开发的。MAtplotlib / WX 可以工作，但如果你要做更多这类事情，我发现 Chaco 是一个更好的交互解决方案。

以下是一些有用的链接：

[查科互动](http://docs.enthought.com/chaco/user_manual/chaco_tutorial.html#plot-tools-adding-interactions)

[使用 Chaco 进行线条编辑](https://github.com/enthought/chaco/blob/master/examples/demo/edit_line.py)

[散点图选择示例](https://github.com/enthought/chaco/blob/master/examples/demo/basic/scatter_inspector.py)

[查科示例](http://docs.enthought.com/chaco/user_manual/annotated_examples.html#examples)

# iphone - 如何使用 UITouch 移动铅笔图像？

> ID：14138948
> 
> 赞同：0
> 
> 时间：2013-01-03T12:27:59.173
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想使用 UITouch 移动铅笔图像？我想移动铅笔，它会写我们想要的任何东西。

但我无法移动和书写铅笔图像。

专家的任何提示都将非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:41:06.813

**以下代码用于在您触摸时移动图像**

```
AppDelegate Classes

**// .h File**

#import <UIKit/UIKit.h>

@class UITouchTutorialViewController;

@interface UITouchTutorialAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    UITouchTutorialViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITouchTutorialViewController *viewController;

@end

//////////////////////////////////////////////////////////////////////////////////

// .m File

#import "UITouchTutorialAppDelegate.h"
#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialAppDelegate

@synthesize window;
@synthesize viewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end
//////////////////////////////////////////////////////////////////////////////

UIViewController Classes

// .h file

#import <UIKit/UIKit.h>

@interface UITouchTutorialViewController : UIViewController {
    IBOutlet UIImageView *cloud;
}

@end

// .m File

#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialViewController

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    cloud.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesBegan:touches withEvent:event];
}

/*
// Override initWithNibName:bundle: to load the view using a nib file then perform additional customization that is not appropriate for viewDidLoad.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically.
- (void)loadView {
}
*/

/*
// Implement viewDidLoad to do additional setup after loading the view.
- (void)viewDidLoad {
    [super viewDidLoad];
}
*/

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:32:51.930

使用这些方法：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [touches anyObject];
  CGPoint currentPoint = [touch locationInView:self];
  yourPencilImgView.center = [touch locationInView:self];
} 
```

和

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

  UITouch *touch = [touches anyObject];
  CGPoint currentPoint = [touch locationInView:self];
  yourPencilImgView.center  = currentPoint;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:40:05.783

您可以使用`UIPanGestureRecognizer`

```
- (void)onDraggingPencil:(UIPanGestureRecognizer *)panGR {

     CGPoint translation = [panGR translationInView:baseView];

     if (panGR.state == UIGestureRecognizerStateBegan) {

     } else if (panGR.state == UIGestureRecognizerStateChanged) {  

        CGRect _rect = panGR.view.frame;
        _rect.origin.x = dragPoint.x + translation.x;
        _rect.origin.y = dragPoint.y + translation.y;
        panGR.view.frame = _rect;

    } else if (panGR.state == UIGestureRecognizerStateEnded) {

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:42:45.793

您可以使用以下代码拖放图像

```
UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
[panRecognizer setMinimumNumberOfTouches:1];
[panRecognizer setMaximumNumberOfTouches:1];
[panRecognizer setDelegate:self];
[imageView_ addGestureRecognizer:panRecognizer]; 
```

-(void)move:(id)sender {

```
CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

    firstX = [[sender view] center].x;
    firstY = [[sender view] center].y;
}

translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);
[[sender view] setCenter:translatedPoint]; 
```

}

# asp.net - Console.WriteLine 不显示消息

> ID：14138951
> 
> 赞同：0
> 
> 时间：2013-01-03T12:28:19.400
> 
> 标签：asp.net

> **可能重复：**
> [Console.WriteLine 在 ASP.NET 中的位置？](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)

我知道删除正在发生我检查了数据库

代码：

```
 try
    {
        MyCommand.Connection.Open();

        int count = MyCommand.ExecuteNonQuery();
        if (count > 0)
        {
            Console.WriteLine("Delete Success!!!");
            //lblMessage.Text = tbTourName.Text + " Deleted!";
        }
        else
        {
            Console.WriteLine("No Delete!!!");
        }
        Console.ReadLine();

    }
    catch (SqlException ex)
    {
        Console.WriteLine("Delete Failed coz.. " + ex.Message);
    }
    finally
    {
        MyCommand.Connection.Close();
    } 
```

它是否应该在网页本身上显示消息？

敬茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:32:08.293

在 asp.net 应用程序中，`Console.WriteLine`转到.`output``visual studio`

有关更多信息，请参阅：[Console.WriteLine 在 ASP.NET 中的位置？](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:31:00.623

该`Console`对象不属于该页面。这将在您的`IDE's console`.

如果您想在您的网页上显示一条消息，那么最简单的方法是：

```
Response.Write(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:31:05.260

控制台对象无法向页面添加内容。相反，将 asp:label 控件放到窗体上并将其 Text 属性设置为所需的状态。

# mysql - FOREIGN KEY 引用同一个表的列。无法插入值

> ID：14138952
> 
> 赞同：6
> 
> 时间：2013-01-03T12:28:18.953
> 
> 标签：mysql, foreign-keys, cascade

我用 FOREIGN KEY 创建了表，不能插入任何东西。

```
CREATE TABLE menus (

id int(10),
parent_id int(10),
label varchar(255),
PRIMARY KEY (id),
FOREIGN KEY (parent_id) REFERENCES menus (id)
); 
```

我需要 FOREIGN KEY 在删除父级时自动删除子级。该表已成功创建，但我无法插入任何内容。

```
INSERT INTO `menus` (`parent_id`, `label`)
VALUES ('1', 'label1'); 
```

或者

```
INSERT INTO `menus` (`label`)
VALUES ( 'label1');
#1452 - Cannot add or update a child row: a foreign key constraint fails 
```

我真的不想在 php 代码中寻找任何孩子，所以我需要以某种方式创建具有 3 列的简单表并自动删除所有孩子和他们的孩子。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T12:39:43.617

对于您的所有需求，您应该采用这种结构

```
CREATE TABLE `menus` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) unsigned DEFAULT NULL,
  `label` varchar(255) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  KEY `fk_parent_menu` (`parent_id`),
  CONSTRAINT `fk_parent_menu` FOREIGN KEY (`parent_id`) 
    REFERENCES `menus` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/a5b5d/1/0)

Demo展示了父节点的插入和删除

所有孩子的魔法下降部分由`ON DELETE CASCADE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:38:20.307

通常，您需要允许 'root' 记录有一个 null 父项 - 即`menus.parent_id`应该可以为空，并且 'root' 菜单项将有一个 null `parent_id`。

IE

将您的 DDL 更改为：

```
 parent_id int(10) NULL 
```

然后你将你的根元素添加为 NULL 作为 parent_id

```
insert into `menus` (id, `label`, parent_id)
VALUES (1, 'label1', null); 
```

那么你最好使用子元素：

```
insert into `menus` (id, `label`, parent_id)
VALUES (2, 'subitem1', 1); 
```

等等

[SQL小提琴在这里](http://www.sqlfiddle.com/#!2/c9355/1)

# java - 休眠持久化（）方法

> ID：14138955
> 
> 赞同：2
> 
> 时间：2013-01-03T12:28:31.493
> 
> 标签：java, hibernate

以下陈述是否有效？

`persist() also guarantees that it will not execute an INSERT statement if it is called outside of transaction boundaries`

当我使用持久性尝试以下代码时；然后在没有任何事务的情况下插入该行（已注释掉）。

```
SessionFactory sessionFactory = new Configuration().configure("student.cfg.xml").buildSessionFactory();
    Session session = sessionFactory.openSession();

    //Transaction tran = session.beginTransaction();

    /*
     * Persist is working without transaction boundaries ===> why?
     */

    Student student = new Student();
    student.setFirstName("xxx");
    student.setLastName("yyy");
    student.setCity("zzz");
    student.setState("ppp");
    student.setCountry("@@@");
    student.setId("123456");
            session.persist(student);
            //tran.commit();
            session.flush();
    session.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:53:53.250

> persist() 还保证如果在事务边界之外调用它不会执行 INSERT 语句

这个说法是正确的。当控制权从`persist()`您的代码返回时，没有`INSERT`执行任何语句。这些语句保证被推迟到会话刷新。请注意，`persist()`如果没有发生**任何**插入，这将是一种毫无意义的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:44:47.450

由于 session.flush() 正在保存 AFAIK 数据，删除后尝试，大多数情况下会出现错误。

[休眠持久化](https://stackoverflow.com/questions/5168950/spring-hibernate-persist-does-not-result-in-insert)

[差异。保存并坚持](http://www.java4s.com/hibernate/difference-between-hibernate-save-and-persist-methods/)

# php - 我是否需要在 ajax 加载的 PHP 页面中再次包含 PHP 脚本？

> ID：14138962
> 
> 赞同：6
> 
> 时间：2013-01-03T12:29:11.487
> 
> 标签：php, jquery

我有一个对 php 页面的 ajax 调用，在该页面中我使用 GET 传递了一个 ID。

```
<script>
$("#oid").change(function(){
    var oid = $(this).val();
    alert(oid);
    $.ajax({
        type: "GET", 
        url: "tabela_reservas.php",
        data: "oid="+oid,
        success: function(html) {
            $("#tabela_reservas").html(html);
        }
    });
});
</script> 
```

它可以工作，只是 PHP 给了我一个错误：

> 致命错误：第 20 行的 C:\xampp\htdocs\kwagenda\tabela_reservas.php 中找不到类“Reserva”

如果我将我的类文件包含在`"tabela_reservas.php"`它的工作原理中。但是这些类文件已经加载/包含在我`"index.php"`调用这个 ajax 页面的地方。

我的问题是：我需要再次包含我的 php 类文件`"tabela_reservas.php"`还是有另一种方法？

我问这个是因为，对我来说，这似乎不是一个非常优雅的解决方案，而且看起来像是开销，因为我将在我的页面上加载两次相同的内容。

这是正确的做法还是有另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T12:31:08.267

当您向服务器发出 ajax 请求时，这是一个全新的请求，就像导航到另一个页面一样。

所以是的，您需要再次包含所有内容。

您应该研究类的自动加载，以获得更优雅的解决方案来包含类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:30:49.003

您需要在 中再次包含所有类文件，因为和`tabela_reservas.php`之间没有关系。`index.php``tabela_reservas.php`

所有 ajax 请求都是全新的，与当前（调用者）页面没有任何关系。将它们视为正在调用的新页面:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T12:30:53.230

AJAX 调用意味着：您正在调用一个新页面。调用来自哪里并不重要，就像在后台调用新页面一样。

因此，它会被重新解析，就像浏览器访问它时会被解析一样。

所以是的：您必须在通过 AJAX 调用的任何脚本中包含所有必需的脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T12:31:28.513

您需要在另一个脚本中使用此类的另一个实例。另一种方法是使用 PHP 自动加载/魔术加载（参见：[PHP：自动加载](http://php.net/manual/de/language.oop5.autoload.php)）

# regex - 如何在 Tcl 中将小写变为大写？

> ID：14138969
> 
> 赞同：4
> 
> 时间：2013-01-03T12:29:38.367
> 
> 标签：regex, tcl

我正在尝试使用字符类将文件中的所有小写字母转换为大写：

```
 regsub -all { [:lower:] } $f { [:upper:] } f 
```

但它不做替换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T13:01:15.440

只需将文件读入字符串并使用[字符串 toupper 即可](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M51)。然后将其写回文件。

```
set fp [open "somefile" r]
set file_data [read $fp]
close $fp

set file_data [string toupper $file_data]

set fp [open "somefile" "w"]
puts -nonewline $fp $file_data
close $fp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T13:07:28.540

是的，上面会像魅力一样工作。

```
set f [string toupper $f] 
```

**f**是一些列表或字符串。如果你想要文件操作，像往常一样从文件中读取和写入。

虽然如果你只是想使用 regsub，试试这个

```
set f "this is a line"

regsub -all {.*} $f {[string toupper {&}]} f

set f [subst -nobackslashes -novariables $f] 
```

现在你在**f**中的内容是大写的。

注意：它看起来很长，但在选择特定文本为大写或小写时很有用

谢谢，

# magento - 致命错误：require_once login Magento

> ID：14138977
> 
> 赞同：0
> 
> 时间：2013-01-03T12:30:10.083
> 
> 标签：magento, fatal-error, require-once, multiple-languages

我正在建立一个有两种语言的商店。当我以默认英语登录时，一切都很好，但是如果我尝试登录西班牙语，则会出现以下错误：

```
Fatal error: require_once(): Failed opening required 'app/code/core/Mage/Customer/controllers/AccountController.php' (include_path='C:\xampp\htdocs\app\code\local;C:\xampp\htdocs\app\code\community;C:\xampp\htdocs\app\code\core;C:\xampp\htdocs\lib;.;C:\xampp\php\PEAR') in C:\xampp\htdocs\app\code\local\MageWorkshop\DetailedReview\controllers\Customer\AccountController.php on line 28 
```

这是第 28 行：

```
require_once 'app/code/core/Mage/Customer/controllers/AccountController.php'; 
```

“丢失”的未找到文件在那里！

有谁知道我该如何解决这个问题？或者这像是一个需要专业人员的主要问题？

西班牙人将无法登录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:38:59.530

如果目录路径不是**绝对**的，则假定它是**相**对于 ServerRoot 位置的。

只需指定服务器根位置，您的脚本/模块似乎安装错误。

```
define('MAGENTO_LOCATION', '/var/www/vhosts/mysite');

require_once MAGENTO_LOCATION . '/app/code/core/Mage/Customer/controllers/AccountController.php'; 
```

# sql - 当 Value = GETDATE() 时触发更新记录

> ID：14138978
> 
> 赞同：1
> 
> 时间：2013-01-03T12:30:09.660
> 
> 标签：sql, triggers, sql-server-2012, getdate

我对触发器的经验是它在更新、插入或删除后会做一些事情。但是是否可以创建一个触发器以在今天的日期自动更新记录？例如，我有一个有 4 列的表。

```
 StartDate         EndDate         Active          Expired 
---------------------------------------------------------------
   2013-01-03      2013-01-05          True           False 
```

这是一条记录，我想要的是创建一个触发器，当它是=今天的日期（GETDATE（））时，它将更新该记录的`Active`列`False`和`Expired`到该记录。我该怎么做呢？`True``EndDate`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:36:00.043

不，据我所知，您不能在这种情况下使用触发器。当数据/记录发生变化时，触发器被执行。在您的情况下，数据没有改变，只有时间在流逝。

寻找“SQL 作业”来完成此任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T12:45:30.983

为了使您的列`Active`并`Expired`按照您想要的方式运行，您应该使它们成为计算列。这些列的 sql 将是这样的（假设它们是`DATE`列）：

```
--For column Active
CASE WHEN EndDate < CONVERT(DATE,GETDATE()) THEN 1 ELSE 0 END

--For Column Expired
CASE WHEN EndDate >= CONVERT(DATE,GETDATE()) THEN 1 ELSE 0 END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:36:42.873

在您的情况下，您有两个选择：

创建一个视图（转换`getdate()`为 112 以删除时间）：

```
create view <your view name>
as
    select
        T.StartDate,
        T.EndDate,
        case when T.EndDate <= convert(nvarchar(8), getdate(), 112) then 1 else 0 end as Active,
        case when T.EndDate <= convert(nvarchar(8), getdate(), 112) then 1 else 0 end as Expired
    from <your table> as T 
```

然后您可以从您的视图中选择数据（顺便说一句，我认为您不需要这两列，因为它们相互依赖）

或者您可以创建一个 SQL 作业来检查日期是否等于今天并更新您的列。

# android - 处理程序无法取消更高 api 中的 asynctask

> ID：14138979
> 
> 赞同：-1
> 
> 时间：2013-01-03T12:30:18.367
> 
> 标签：android, android-asynctask, handler

在我的应用程序中，我使用异步任务进行操作。但我也使用处理程序在超时的情况下取消我的任务。

这是我的处理程序操作

```
Handler mHandler = new android.os.Handler() {

        @Override
        public void handleMessage(Message msg) {
            task.cancel(true);
        }
    };

    Message msg = new Message();
    msg.arg1 = 0;
    mHandler.sendMessageDelayed(msg, 1000); 
```

这是我的异步任务开始

```
 final findIpTask task = new findIpTask(1, 2);
    task.execute(); 
```

在我的 asynctask 我有

```
protected void onCancelled() {

        running = false;
        dialog.dismiss();
                     //some alert dialog for time-out 
```

在 2.33 模拟器中它工作正常。但是当我在 4.0 模拟器上运行我的应用程序时它不会停止。有人知道原因并有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:36:25.117

由于未停止或取消处理程序线程，您的 AsyncTask 不会停止。

您可以停止线程和异步任务，而不是使用处理程序使用**计时器线程**，如下面的片段所示。

```
 Timer myTimer = new Timer();
  myTimer.schedule(new TimerTask() {
     @Override
     public void run() {
//Your Stuffs
 }
  }, 0, 1000); // put your delay here 

if(ButtonStopped == true){
     myTimer .cancel();
     myTimer .purge();
     //your stuffs
     task.cancle();// call here for stopping your asyncTask
     }else{
         //your stuffs

            } 
```

有关更多信息[，请访问此 Android 开发人员链接](http://developer.android.com/reference/java/util/Timer.html)。

# android - Android中的Staledata异常

> ID：14138996
> 
> 赞同：0
> 
> 时间：2013-01-03T12:30:52.327
> 
> 标签：android, android-cursor

我有一个活动，它显示用户信息并使用图像编辑用户信息。当我第一次尝试更改图像时，活动恢复。如果我第二次更改图像，活动不会恢复，它会给出一个 staledata 异常，下面是代码和日志。

日志：

```
01-03 17:44:23.539: E/AndroidRuntime(30754): FATAL EXCEPTION: main
01-03 17:44:23.539: E/AndroidRuntime(30754): java.lang.RuntimeException: Unable to resume activity {com.globalnest.event/com.globalnest.event.LeadDetails}: android.database.StaleDataException: Attempted to access a cursor after it has been closed.
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2471)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2499)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.os.Looper.loop(Looper.java:137)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.ActivityThread.main(ActivityThread.java:4448)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at java.lang.reflect.Method.invokeNative(Native Method)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at java.lang.reflect.Method.invoke(Method.java:511)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at dalvik.system.NativeStart.main(Native Method)
01-03 17:44:23.539: E/AndroidRuntime(30754): Caused by: android.database.StaleDataException: Attempted to access a cursor after it has been closed.
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.database.BulkCursorToCursorAdaptor.throwIfCursorIsClosed(BulkCursorToCursorAdaptor.java:75)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.database.BulkCursorToCursorAdaptor.requery(BulkCursorToCursorAdaptor.java:144)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.database.CursorWrapper.requery(CursorWrapper.java:186)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.Activity.performRestart(Activity.java:4505)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.Activity.performResume(Activity.java:4531)
01-03 17:44:23.539: E/AndroidRuntime(30754):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2461)
01-03 17:44:23.539: E/AndroidRuntime(30754):    ... 10 more 
```

源代码：

```
 setcur=db.rawQuery("select * from LeadDetails where QR_ID='"+ATID+"' and EventID='"+EventID+"' and UserID='"+dbUserID+"'", null);
            this.startManagingCursor(setcur);
            if(setcur!=null&&setcur.getCount()!=0){ 

                setcur.moveToFirst();

                LeadID=setcur.getString(setcur.getColumnIndex("_id"));
                fname.setText(setcur.getString(setcur.getColumnIndex("FirstName")));
                lname.setText(setcur.getString(setcur.getColumnIndex("LastName")));
                company.setText(setcur.getString(setcur.getColumnIndex("Company")));
                pno.setText(setcur.getString((setcur.getColumnIndex("PhoneNumber"))));
                email.setText(setcur.getString(setcur.getColumnIndex("EmailID")));
                city.setText(setcur.getString(setcur.getColumnIndex("City")));
                state.setText(setcur.getString(setcur.getColumnIndex("State")));
                notes.setText(setcur.getString(setcur.getColumnIndex("Notes")));

                String fwldateandtime=setcur.getString(setcur.getColumnIndex("FollowUpDate"));
                System.out.println("the date is "+fwldateandtime);

                if(fwldateandtime.equals("null")||fwldateandtime.equals(" ") ||fwldateandtime.equals("") ){
                    fwldate.setText("");

                    fwltime.setText("");

                }else{

                    String[] temp = fwldateandtime.split(" ");
                    System.out.println("the temp is "+temp);

                    SimpleDateFormat f1 = new SimpleDateFormat("hh:mm a");
                    SimpleDateFormat f2 = new SimpleDateFormat("hh:mm:ss");
                    SimpleDateFormat f4 = new SimpleDateFormat("yyyy-MM-dd");
                    SimpleDateFormat f3 = new SimpleDateFormat("yyyy-MM-dd"); 

                    String time="",date="";

                    try {

                        Date d1 = f4.parse(temp[0]);
                        date = f3.format(d1);

                        if(temp[1].equals("00:00:00")){
                            time="";
                        }else{
                            Date d = f2.parse(temp[1]);
                            time = f1.format(d); 
                            System.out.println("The time is "+time+" the object is "+d+"the date is to be"+date+"the temp"+temp[0]);

                        }

                        fwltime.setText(time);
                        fwldate.setText(date);
                    } catch (ParseException e) {
                // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
            fwltime.setText(time);
            fwldate.setText(date);

        }

        String values = email.getText().toString();
        System.out.println("the values is "+values);

        if(values.equals("")||values.equals("null")){
            email.setEnabled(true);
        }else{
            email.setEnabled(false);
        }

        title.setText(setcur.getString(setcur.getColumnIndex("Title")));

        ImageView iv=(ImageView) findViewById(R.id.leadimage);
        String imgloc=setcur.getString(setcur.getColumnIndex("ImageURL"));
        ftypes=NullChecker(setcur.getString(setcur.getColumnIndex("FollowUPTypes")));
        types="";
        System.out.println("the followuptypes are"+ftypes);
        SetImage();

        String rate=setcur.getString(setcur.getColumnIndex("Rating"));

        float f;
        if(rate.equals("null")){
             f = Float.valueOf("0").floatValue();
        }else
            f = Float.valueOf(rate).floatValue();

        System.out.println("the values for rating is "+f);
        rating.setRating(f);
        String sa1=setcur.getString(setcur.getColumnIndex("SurveyQ1Answer"));
        String sa=setcur.getString(setcur.getColumnIndex("SurveyQ2Answer"));
        String sa3=setcur.getString(setcur.getColumnIndex("SurveyQ3Answer"));
        }else{
            email.setEnabled(true);
        }

        //c.close();
            setcur1 = db.rawQuery("select * from EventDetails where EventID='"+EventID+"'", null);
        this.startManagingCursor(setcur1);
        setcur1.moveToFirst();
        TextView ename=(TextView) findViewById(R.id.textView1);
        ename.setText(setcur1.getString(setcur1.getColumnIndex("EventName")));
        //c1.close();

        //db.close();
    } 
```

/// 设置图像方法

```
public void SetImage(){

            String Imagedata=null;
             StringBuilder stringBuilder = new StringBuilder();
             FileInputStream fin;
                try {

                    InputStream isr = openFileInput(ATID+dbUserID);

                    InputStreamReader inputStreamReader = new InputStreamReader(isr);

                     BufferedReader inRd = new BufferedReader(inputStreamReader);

                     String receiveString = "";

                    while ( (receiveString = inRd.readLine()) != null ) {

                        stringBuilder.append(receiveString);
                     }
                    System.out.println("the base64 value is "+stringBuilder);

                    byte[] decodedString = Base64.decode(stringBuilder.toString(), Base64.DEFAULT);
                    Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);                 
                    LeadImage.setImageBitmap(decodedByte);

                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                if(stringBuilder.toString()==null||stringBuilder.toString().equals("null")||stringBuilder.toString().equals("")){ 
                    LeadImage.setImageResource(R.drawable.durga);
                } 

        } 
```

// ALert show 当用户点击图片时显示警报

```
 public void AlertShow(){

          final String [] items         = new String [] {"Take from camera", "Select from gallery"};                
            ArrayAdapter<String> adapter    = new ArrayAdapter<String> (this, android.R.layout.select_dialog_item,items);
            AlertDialog.Builder builder     = new AlertDialog.Builder(this);

            builder.setTitle("Select Image");
            builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                public void onClick( DialogInterface dialog, int item ) { //pick from camera
                    if (item == 0) {
                        Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                        mImageCaptureUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
                                           "tmp_avatar_" + String.valueOf(System.currentTimeMillis()) + ".jpg"));

                        System.out.println("the values are "+mImageCaptureUri);
                        intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

                        try {
                            intent.putExtra("return-data", true);

                            startActivityForResult(intent, PICK_FROM_CAMERA);
                        } catch (ActivityNotFoundException e) {
                            e.printStackTrace();
                        }
                    } else { 
                        Intent intent = new Intent();

                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);

                        startActivityForResult(Intent.createChooser(intent, "Complete action using"), PICK_FROM_FILE);
                    }
                }
            });

            final AlertDialog dialog = builder.create();
            dialog.show();
     } 
```

// 之后的结果

```
 @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (resultCode != RESULT_OK) return;

            switch (requestCode) {
                case PICK_FROM_CAMERA:
                    doCrop();

                    break;

                case PICK_FROM_FILE:  
                    mImageCaptureUri = data.getData();

                    doCrop();

                    break;          

                case CROP_FROM_CAMERA:          
                    Bundle extras = data.getExtras();

                    if (extras != null) {               
                        Bitmap photo = extras.getParcelable("data");

                        LeadImage.setImageBitmap(photo);

                        ByteArrayOutputStream blob = new ByteArrayOutputStream();
                        photo.compress(CompressFormat.JPEG, 100 , blob);
                        byte[] bitmapdata = blob.toByteArray();

                        encodedImage = Base64.encodeToString(bitmapdata, Base64.DEFAULT);

                        FileOutputStream fos;
                        try {
                            fos = openFileOutput(ATID+dbUserID, Context.MODE_PRIVATE);
                            fos.write(encodedImage.getBytes());
                            fos.close();
                            System.out.println("the file name is "+ATID);

                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                    }

                    File f = new File(mImageCaptureUri.getPath());            
                    System.out.println("the path is "+f.getAbsolutePath());
                    f.delete();

                    int id=getLastImageId();
                    removeImage(id);

                    break;

            }
        } 
```

//裁剪方法

```
 private void doCrop() {
            final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

            Intent intent = new Intent("com.android.camera.action.CROP");
            intent.setType("image/*");

            List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );

            int size = list.size();

            if (size == 0) {            
                Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();

                return;
            } else {

                intent.setData(mImageCaptureUri); 

                intent.putExtra("outputX", 90);
                intent.putExtra("outputY", 90);
                intent.putExtra("aspectX", 1);
                intent.putExtra("aspectY", 1);
                intent.putExtra("scale", true);
                intent.putExtra("return-data", true);

                if (size == 1) {
                    Intent i        = new Intent(intent);
                    ResolveInfo res = list.get(0);

                    i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                    startActivityForResult(i, CROP_FROM_CAMERA);
                } else {
                    for (ResolveInfo res : list) {
                        final CropOption co = new CropOption();

                        co.title    = getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                        co.icon     = getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                        co.appIntent= new Intent(intent);

                        co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                        cropOptions.add(co);
                    }

                    CropOptionAdapter adapter = new CropOptionAdapter(getApplicationContext(), cropOptions);

                    AlertDialog.Builder builder = new AlertDialog.Builder(this);
                    builder.setTitle("Choose Crop App");
                    builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                        public void onClick( DialogInterface dialog, int item ) {
                            startActivityForResult( cropOptions.get(item).appIntent, CROP_FROM_CAMERA);
                        }
                    });

                    builder.setOnCancelListener( new DialogInterface.OnCancelListener() {
                        @Override
                        public void onCancel( DialogInterface dialog ) {

                            if (mImageCaptureUri != null ) {

                                int id=getLastImageId();
                                removeImage(id);

                                getContentResolver().delete(mImageCaptureUri, null, null );
                                mImageCaptureUri = null;
                            }
                        }
                    } );

                    AlertDialog alert = builder.create();

                    alert.show();
                }
            }
        } 
```

# wordpress - 删除自定义分页并使用 jetpack 无限滚动

> ID：14138997
> 
> 赞同：1
> 
> 时间：2013-01-03T12:30:56.847
> 
> 标签：wordpress, pagination, infinite-scroll

我已按照自定义主题的 Jetpack Infinite 滚动说明进行操作，但仍然无法正常工作！

我在 theme/framework/functions/pagination.php 中找到了一个 pagination.php，但我不知道这是接管还是使它不起作用。

这是分页代码

```
<?php
//custom pagination function
function pagination($pages = '', $range = 4) {
 $showitems = ($range * 2)+1;
 global $paged;
 if(empty($paged)) $paged = 1;

 if($pages == '') {
     global $wp_query;
     $pages = $wp_query->max_num_pages;
     if(!$pages) {
         $pages = 1;
     }
 }  

 if(1 != $pages) {
     echo "<div class=\"page-pagination\"><div class=\"page-pagination-inner clearfix\">";
     echo "<div class=\"page-of-page\"><span class=\"inner\">".$paged." of ".$pages."</span></div>";
     for ($i=1; $i <= $pages; $i++) {
         if (1 != $pages &&( !($i >= $paged+$range+1 || $i <= $paged-$range-1) || $pages <= $showitems ))
         {
             echo ($paged == $i)? "<span class=\"current outer\"><span class=\"inner\">".$i."</span></span>":"<a href='".get_pagenum_link($i)."' class=\"inactive\"><span class=\"inner\">".$i."</span></a>";
         }
     }
      echo "</div></div>\n";
 }
} // end pagination()
?> 
```

我应该使用功能删除它以使无限滚动工作吗？