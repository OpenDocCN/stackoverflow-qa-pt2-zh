# StackOverflow 问答 14569000-14569999

# html - 一个链接 HTML 中的多个来源

> ID：14569001
> 
> 赞同：1
> 
> 时间：2013-01-28T18:49:20.073
> 
> 标签：html

我在 html 中有一个链接：

```
<a id="clicky" href="http://localhost:8080/filesystem/IT.xls"><p>Download</p></a> 
```

我想添加其他 .xls 文件以供下载。有没有办法给一个链接多个来源或在用户端组合工作表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:51:24.647

不可以。一个链接只能指向一个 URL（又名资源）。没有什么说资源不能返回多个东西，例如 .zip 中的所有请求文件，例如

```
http://example.com?file1=one.xls&file2=two.xls&file3=three.xls 
```

# c++ - C++中字符串类的属性

> ID：14569002
> 
> 赞同：1
> 
> 时间：2013-01-28T18:49:20.643
> 
> 标签：c++, string

我正在研究 Cohoon 和 Davidson 的 C++ 程序设计。这是关于字符串类属性的内容（第 3 版，第 123 页）：

*   组成字符串的字符
*   字符串中的字符数

我的问题是：如果我们知道字符串中的字符，是否意味着我们已经知道字符串中的字符数？需要明确指定第二个属性是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:55:52.583

您是对的，但是在许多地方都需要长度，例如计数，或者知道 malloc 内存的长度/结束，因此最好将长度存储为附加属性，以使您的程序快速运行。

考虑一下如果程序需要一直计算字符以告诉您其中有多少字符会发生什么。此外，当经常访问此功能时。

所以它也只是节省了存储长度的时间。

所以字符串类的所有实际实现都会存储字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:51:43.430

> 如果我们知道字符串中的字符，是否意味着我们已经知道字符串中的字符数？

好吧，在 C 中我们知道元素的数量，因为我们可以数到 NULL 终端。但是想想获得一个字符串的长度有多昂贵？它需要走完整个字符串。对于这样一个常见的操作，我们为什么不希望这是一个恒定时间的操作呢？

# asp.net - 在 ASP.Net DetailsView 图像按钮 OnClick 事件处理程序中传递参数

> ID：14569004
> 
> 赞同：0
> 
> 时间：2013-01-28T18:49:29.597
> 
> 标签：asp.net, vb.net, onclick, parameter-passing, detailsview

是否可以将 ASP.Net 图像按钮 OnClick 事件处理程序中的参数发送到代码隐藏文件？

在 DetailsView 中，我们为 Edit 模板在一周中的每一天都有这个标记，并且在此之上还有另一个用于 insert 模板的编码：

```
<EditItemTemplate>
    <asp:ImageButton 
        ID="ImageButtonEditDayOfWeekMonday" 
        runat="server" 
        ImageUrl='<%# getCheckboxImageToDisplay(Eval("DayOfWeekMonday"))%>' 
        Height="15"
        Width="15" 
        OnClick="ImageButtonEditDayOfWeekMonday_Click"
        CausesValidation="False">
    </asp:ImageButton>
</EditItemTemplate> 
```

代码隐藏文件中的处理程序：

```
Protected Sub ImageButtonEditDayOfWeekTuesday_Click(sender As Object, e As ImageClickEventArgs)

    Dim imgTheImageButton As New ImageButton

    imgTheImageButton = DetailsView.FindControl("ImageButtonEditDayOfWeekTuesday")

    If imgTheImageButton.ImageUrl = "../../Images/checked.png" = True Then

        imgTheImageButton.ImageUrl = "../../Images/unchecked.png"
        LabelCheckBoxTuesday.Text = False
    Else

        imgTheImageButton.ImageUrl = "../../Images/checked.png"
        LabelCheckBoxTuesday.Text = True
    End If
End Sub 
```

这将相当于大量的编码。

是否可以创建一个处理程序并像这样调用它？

```
OnClick="ImageButtonDayOfWeek_Click("Monday", "Edit") 
```

所有处理程序之间的唯一区别是：

```
imgTheImageButton = DetailsView.FindControl("ImageButtonEditDayOfWeekTuesday") 
```

最好在单个处理程序中使用一堆 if 语句并使用适当的“ID”放置在 DetailsView.FindControl 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:57:00.657

在您的 ImageButton 中，添加一个 CommandArgument 属性：

```
<EditItemTemplate>
<asp:ImageButton 
    ID="ImageButtonEditDayOfWeekMonday" 
    runat="server" 
    ImageUrl='<%# getCheckboxImageToDisplay(Eval("DayOfWeekMonday"))%>' 
    Height="15"
    Width="15" 
    OnClick="ImageButtonEditDayOfWeekMonday_Click"
    CommandArgument='<%# Eval("DayOfWeekMonday") %>'
    CausesValidation="False">
</asp:ImageButton> 
```

然后在您的代码隐藏中：

```
Protected Sub ImageButtonEditDayOfWeekTuesday_Click(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.CommandEventArgs)

    //e.CommandArgument should contain the actual value of DayOfWeekMonday
    Dim arg As String = e.CommandArgument.ToString()

End Sub 
```

# google-maps - 谷歌地图 api 拒绝键

> ID：14569007
> 
> 赞同：0
> 
> 时间：2013-01-28T18:49:40.150
> 
> 标签：google-maps, api-key

我正在尝试通过网站上的 api 设置谷歌地图。我在以下页面上生成了 api 密钥： [https ://developers.google.com/maps/documentation/javascript/tutorial#api_key](https://developers.google.com/maps/documentation/javascript/tutorial#api_key)

每次我尝试加载地图时，Google 都会拒绝我生成的 api 密钥。这是从谷歌网站获取的代码示例：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCz6QrORRq1YjH9YOHreY_FahL0gbvudQo&amp;sensor=false"></script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

我尝试允许推荐人或将其全部打开但无济于事。

我想我错过了一些东西，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:21:52.867

你的钥匙[对我有用](http://www.geocodezip.com/v3_simpleMap_mapwKey.html)。如果我使用特定于[geocodezip.com](http://www.geocodezip.com/v3_simpleMap_mapwKeyGeocodezip.html)的密钥，它也可以工作。

也许您有一个没有密钥卡在浏览器缓存中的版本。

# ruby-on-rails - 错误消息应与标签匹配

> ID：14569011
> 
> 赞同：1
> 
> 时间：2013-01-28T18:49:51.393
> 
> 标签：ruby-on-rails, ruby, simple-form

我有一个表格。许多标签的名称需要与模型中给出的名称不同。

```
attr_accessible :pin 
```

简单形式视图：

```
= f.input :pin, :label => "Secret Code" 
```

当验证失败时，错误会使用模型的字段名称（“Pin”），而不是我在视图中设置的标签（“Secret Code”）。用户会对哪个字段有错误感到困惑。

目前我有一个改变标签的助手：

```
def fix_pin_errors(msg)
  msg.gsub!('Pin', 'Secret Code')
end 
```

但是，如果我在许多领域都这样做，它会变得乏味且不干燥。

让错误匹配与模型给出的名称不同的标签的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:59:50.147

I18n 是你的朋友。阅读[本指南](http://guides.rubyonrails.org/i18n.html)。它将解释如何在全球范围内转换这些，以便在您需要的任何地方获取它们。

对于您的示例，它可能看起来像这样：

在`en.yml`：

```
en:
  activerecord:
    attributes:
      your_model_name:
        pin: 'Secret Code' 
```

# responsive-design - 创建一个静态 div 以在 Compass Susy 网格中保存广告？

> ID：14569012
> 
> 赞同：0
> 
> 时间：2013-01-28T18:49:54.440
> 
> 标签：responsive-design, compass-sass, susy-compass

我必须在我的布局中容纳一个 MREC 广告。广告的宽度为 300 像素，并且无法随着流体网格收缩而调整大小。

此外，广告必须是智能手机上的第一项，在标题块之前。因此，在断点上，我将其设置为 omega 以将其推送到标题“之后”，如此屏幕截图所示（灰色规则只是为了更容易查看）。

![在此处输入图像描述](../Images/6468f9241b2e3de4ad5d93d4da36e3e4.png)

标题是 8 列，广告是 4。除了 ipad 上的广告列和广告缩小到 300 像素以下，一切都很好，我们不允许这样做。那么，除了广告容器之外，如何保持一切流畅呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:36:10.807

Set max/min widths on the container?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:43:17.747

这并不难做到，但这意味着顶部的网格不会与下面的灵活网格完全匹配。我认为这不是问题。您必须使用一些函数来布置这两个元素，但其他一切都可以像以前一样完成。

您可以将广告的灵活性保持在最小宽度：

```
.ad {
  @include span-columns(4 omega);
  min-width: 300px; // you can use any width you want.
} 
```

或者您可以使广告完全静止：

```
.ad {
  float: right;
  width: columns-width(4); // you can use any width you want.
} 
```

重要的部分是**您不能在标题上设置列宽**。

您还有其他一些选择。最简单的可能是将右边距和填充设置为等于静态广告尺寸（加上装订线）：

```
.headline {
  margin-right: columns-width(4) + $gutter-width;
} 
```

或者，如果您希望该排水沟弯曲，请尝试：

```
.headline {
  margin-right: columns-width(4);
  padding-right: gutter();
} 
```

您可以添加`clear: both;`到主要内容以确保它清除标题和广告。

如果这种方法对您不起作用，请尝试为标题创建一个新的“格式上下文”。经典技术之一是简单的`overflow: hidden;`。Nicole Sullivan 有一篇很好的[博客文章，介绍了他们如何为 oocss 做到这一点](http://www.stubbornella.org/content/2010/12/09/the-hacktastic-zoom-fix/)，但它变得有点复杂，你可能不需要所有这些。

**更新：**

所有这些解决方案都要求广告首先出现在标记中。解决这个问题的唯一方法是您知道广告的高度。在这种情况下，您可以绝对定位广告而不是浮动它，以相同的方式为其创建空间，并在标题（或行容器，如果有的话）上设置最小高度。

# javascript - 失去焦点时关注输入框

> ID：14569018
> 
> 赞同：1
> 
> 时间：2013-01-28T18:50:19.810
> 
> 标签：javascript, html, focus, setfocus, lost-focus

我正在对表单输入框进行内联检查。这是我的验证功能：

```
function checkResult(input){
    var result = Number(input.value);
    if(result < 0 || result > 100){
        alert('Invalid!');
        input.focus();
    }
} 
```

如果输入无效，我想专注于输入（失去焦点）。该功能不起作用。它说它是`Invalid`，但并不专注于它。

我将输入框`onchange`事件设置为`checkResut`：

```
<input type="text" name="tel" id="tel" onchange="javascript:checkResult(this);"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:53:34.087

设置一个小的焦点时间，它会起作用：

```
setTimeout(function() {
    input.focus();
}, 100); 
```

**演示：http:** [//jsfiddle.net/q62m3/](http://jsfiddle.net/q62m3/)

# angularjs - 提交表单：断言 DOM 已完全呈现

> ID：14569022
> 
> 赞同：1
> 
> 时间：2013-01-28T18:50:39.923
> 
> 标签：angularjs

我想提交一个表单，但先添加一些隐藏的输入。隐藏的输入通过 ng-repeat 添加。最终它们将被呈现，但我如何确定在触发提交事件之前 DOM 已经更新？

部分的：

```
<form ng-submit="addValuesAndSubmit()">
  <input type="hidden" name="{{name}}" value="{{value}}" ng-repeat="(name, value) in order">
  <input type="submit">
</form> 
```

控制器：

```
$scope.addValuesAndSubmit = function() {
  $scope.order = { param1: 1, param2: 2 };
  // TODO: wait until form is rendered
  // there should be two <input type="hidden"> now
  // trigger submit action
}; 
```

据我了解，可以为此使用指令的后链接功能。我是对的还是我遗漏了一些明显的东西？

编辑：表单数据需要发布到外部网站，将浏览器重定向到响应。这是一个支付集成，我在服务器上计算 HMAC，将其作为隐藏元素添加到表单中，然后将其发布到支付提供商。$http.post() 的实现似乎没有进行重定向，而是返回响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:49:56.157

使用 Angular 应用程序，您通常希望提交模型，而不是从表单元素中提取数据。即，使用 ng-model 指定 $scope 模型对象属性，然后通过 ng-submit 提交该模型对象。在我看来，您已经可以访问`order`您的 $scope，因为您正试图让您的关联视图使用它。所以你可能不需要等待视图更新——`order`直接在你的 addValuesAndSubmit() 函数中使用。

# android - 动画纹理坐标不起作用

> ID：14569023
> 
> 赞同：1
> 
> 时间：2013-01-28T18:50:40.827
> 
> 标签：android, opengl-es-2.0, glsles, rajawali

我正在努力学习 GLSL ES，以便我可以将一堆动画从 CPU 卸载到 GPU。我的问题是创建一个使用精灵表的简单动画着色器。着色器根本不使用灯光，我只显示完整的纹理值以保持非常基本的内容。我选择的 OpenGL ES 框架是 Rajawali，所以我的一些值和参数是从这些类中提取的。

当我使用此着色器时`isAnimated = false`，纹理会按预期应用。但是，当`isAnimated = true`模型全黑时，就好像没有应用纹理一样。

我能够确认顶点和片段着色器正在评估`ifdef ANIMATED`为`true`，所以这似乎是我的纹理坐标修改引起的问题。

```
"       vTextureCoord.s = mod(uCurrentFrame, uNumTileRows) * uTileSize;" +
"       vTextureCoord.t = uTileSize * floor(uCurrentFrame  / uNumTileRows);\n" + 
```

任何帮助是极大的赞赏！

这是我完整的非工作着色器类：

```
package rajawali.materials;

import android.opengl.GLES20;

public class SimpleAnimatedMaterial extends AMaterial {
protected static final String mVShader = 
    "uniform mat4 uMVPMatrix;\n" +

    "#ifdef ANIMATED\n" +
    "uniform float uCurrentFrame;\n" +
    "uniform float uTileSize;\n" +
    "uniform float uNumTileRows;\n" +
    "#endif\n" +

    "attribute vec4 aPosition;\n" +
    "attribute vec2 aTextureCoord;\n" +
    "attribute vec4 aColor;\n" +

    "varying vec2 vTextureCoord;\n" +
    "varying vec4 vColor;\n" +      

    "void main() {\n" +
    "   gl_Position = uMVPMatrix * aPosition;\n" +
    "   #ifdef ANIMATED\n" +
    "       vTextureCoord.s = mod(uCurrentFrame, uNumTileRows) * uTileSize;" +
    "       vTextureCoord.t = uTileSize * floor(uCurrentFrame  / uNumTileRows);\n" +
    "   #else\n" +
    "       vTextureCoord = aTextureCoord;\n" +
    "   #endif\n" +
    "   vColor = aColor;\n" +
    "}\n";

protected static final String mFShader = 
    "precision mediump float;\n" +

    "uniform sampler2D uDiffuseTexture;\n" +

    "varying vec2 vTextureCoord;\n" +
    "varying vec4 vColor;\n" +

    "#ifdef ANIMATED\n" +
    "   uniform float uTileSize;\n" +
    "   uniform float uNumTileRows;\n" +
    "#endif\n" +

    "void main() {\n" +
    "#ifdef TEXTURED\n" +
    "   #ifdef ANIMATED\n" +
    "       vec2 realTexCoord = vTextureCoord + (vTextureCoord / uNumTileRows);" +
    "       gl_FragColor = texture2D(uDiffuseTexture, realTexCoord);\n" +
    "   #else\n" +
    "       gl_FragColor = texture2D(uDiffuseTexture, vTextureCoord);\n" +
    "   #endif\n" +
    "#else\n" +
    "   gl_FragColor = vColor;\n" +
    "#endif\n" +
    "}\n";

protected int muCurrentFrameHandle;
protected int muTileSizeHandle;
protected int muNumTileRowsHandle;

protected int mCurrentFrame;
protected float mTileSize;
protected float mNumTileRows;
protected boolean mIsAnimated;

public SimpleAnimatedMaterial() {
    this(false);
}

public SimpleAnimatedMaterial(boolean isAnimated) {
    this(mVShader, mFShader, isAnimated);
}

public SimpleAnimatedMaterial(String vertexShader, String fragmentShader, boolean isAnimated) {
    super(vertexShader, fragmentShader, NONE);
    mIsAnimated = isAnimated;
    if(mIsAnimated) {
        mUntouchedVertexShader = "\n#define ANIMATED\n" + mUntouchedVertexShader;
        mUntouchedFragmentShader = "\n#define ANIMATED\n" + mUntouchedFragmentShader;
    }
    setShaders(mUntouchedVertexShader, mUntouchedFragmentShader);
}

@Override
public void useProgram() {
    super.useProgram();
}

@Override
public void setShaders(String vertexShader, String fragmentShader)
{
    super.setShaders(vertexShader, fragmentShader);
    muCurrentFrameHandle = getUniformLocation("uCurrentFrame");
    muTileSizeHandle = getUniformLocation("uTileSize");
    muNumTileRowsHandle = getUniformLocation("uNumTileRows");
}

public void setCurrentFrame(int currentFrame) {
    mCurrentFrame = currentFrame;
    GLES20.glUniform1f(muCurrentFrameHandle, mCurrentFrame);
}

public void setTileSize(float tileSize) {
    mTileSize = tileSize;
    GLES20.glUniform1f(muTileSizeHandle, mTileSize);
}

public void setNumTileRows(int numTileRows) {
    mNumTileRows = numTileRows;
    GLES20.glUniform1f(muNumTileRowsHandle, mNumTileRows);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:52:29.770

我注意到您在几行中缺少一些 '\n' 换行符。虽然我不认为只是这样，但如果我记得的话，它过去给我带来了麻烦。

您将使用 (realTexCoord) 进行采样的纹理坐标的界限是什么。看起来它可能会大于 1，这对我来说通常意味着只会显示清晰的颜色。

# css - CSS中的“文本边框”装饰

> ID：14569024
> 
> 赞同：0
> 
> 时间：2013-01-28T18:50:42.907
> 
> 标签：css, text, styling

> **可能重复：**
> [CSS 字体边框？](https://stackoverflow.com/questions/2570972/css-font-border)

当我在 Photoshop 中时，我很容易输入文本，然后将白色边框应用于“文本”，然后在其中应用阴影。
![在此处输入图像描述](../Images/40ee043add48849f4ba6a905da569f57.png)

但是当我在 HTML 中时，我需要一个`<div>`,`<p>`或`<span>`任何这样的标签来写一个文本。然后像这样装饰文本，我们特别将装饰应用于标签，而不是标签的文本（或内容）。认为：

```
<span id="decor">Text</span> 
```

然后我们像这样做CSS：

```
#decor{color: #9E0B0E; border: 5px solid #FFF; box-shadow: 3px 0 2px #CCC;} 
```

但它所做的是设置跨度的样式，而不是跨度标记的内容（此处为：'Text'）。

所以，我的问题是：

*   **如何设置这样的文字样式`CSS`？**

### 第二次编辑

在一些评论和回复之后，请考虑一下，该`text-shadow`物业只做一项工作，无论是白色边框还是灰色阴影，但我都想要它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:55:06.077

您可以使用

```
<p class="decor">Text</p> 
```

接着

```
p.decor{
color: #9E0B0E; 
text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:55:38.757

不幸的是，没有任何简单的方法可以做到这一点并支持多个浏览器。Webkit 支持 css 标记 -webkit-text-stroke 但忽略了 Firefox 和 IE（以及其他）

例子：

```
p {
-webkit-text-stroke: 1px black
} 
```

# java - 如何使用 jLine 实现干净的屏幕和配置键绑定

> ID：14569027
> 
> 赞同：0
> 
> 时间：2013-01-28T18:50:59.587
> 
> 标签：java, command-line-interface, jline

我想用 jline 开发一个 java cli..我从 Internet 获得不同的 Jline 版本，但我不知道它们之间的区别..

我的操作系统是 WINDOWS XP SP2。

Jline09.9和Jline1.0也不支持清屏。如何配置键绑定以支持清洁屏幕？

源代码 WindowsTerminal.java

```
 /**
 * Windows doesn't support ANSI codes by default; disable them.
 */
public boolean isANSISupported() {
    return false;
} 
```

在 jLine0.9.9 和 Jline1.0 中，清洁屏幕不起作用.. [http://i.stack.imgur.com/2m71z.jpg](http://i.stack.imgur.com/2m71z.jpg)

在 Jline2.x 中，它支持干净的屏幕，但是当我使用数组键 UP/DOWN/LEFT/RIGHT、INSERT、DELETE、END 时，控制台会出现乱码。

Jline 2.6 和 Jline2.9 中的错误代码和奇怪字符当键入数组键或 DELETE、HOME、INSERT 键时 [http://i.stack.imgur.com/5A8d2.jpg](http://i.stack.imgur.com/5A8d2.jpg)

我不知道如何通过keybinds.properties 在Jline1.x 和Jline2.x 中配置keybind。以及如何配置 keybinds.properties ？如何使用它？？

你能给一些建议或例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T18:00:02.970

你安装了 AnsiConsole 吗？这是渲染“乱码”转义码所必需的。

```
AnsiConsole.systemInstall(); 
```

应该为你做。

# linux - 如何在使用 CRT 单元的程序中处理 SIGINT？

> ID：14569028
> 
> 赞同：2
> 
> 时间：2013-01-28T18:51:02.890
> 
> 标签：linux, freepascal, lazarus

我有一个使用*CRT*单元的控制台应用程序 ( `program`) 。在 Linux 下，当我按下 时，什么也没有发生。但是，我想按预期处理这个信号（通过立即退出程序）。我发现一些注意事项 using重新定义了 STDIN 和 STDOUT 的东西，所以普通的 SIG 处理程序不起作用。目前，我试过了，但仍然按下没有任何作用。*当我手动（通过htop* ）向进程发送 SIGINT 时，处理程序会启动。但不是使用 CTRL+C。不幸的是，不使用单位不是一种选择。*`CTRL+C``SIGINT``CRT``fpSignal(SIGINT, SignalHandler(@DoSig));``CTRL+C`*`CRT`**

 **任何帮助是极大的赞赏 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T15:00:31.917

原因是 CRT 单元将重定向标准输入/输出句柄，因此您必须“手动”检查 SIGINT，信号处理程序将不起作用。您应该使用 KeyPressed 功能检查是否按下了键，然后使用 ReadKey 检查是否已发送 SIGINT（例如：Ctrl-C）。**

# mysql - 查找mysql表和查询的差异

> ID：14569030
> 
> 赞同：1
> 
> 时间：2013-01-28T18:51:05.297
> 
> 标签：mysql

我希望我能正确解释这一点。这里是：

我有一个 id 列表，我需要根据订阅状态在 mysql 表中检查，以找出这些 id 中有多少是当前的。我有 id 和 subscriptionEnd。我的查询不工作，我没有足够的知识知道如何做到这一点。请查看并与我分享我能做些什么。我需要匹配数以千计的 id。

```
SELECT c.id, c.subscriptionEnd
FROM subscriptions c
WHERE c.subscriptionEnd > '2013-01-27`
AND c.id = 12345
AND c.id = 12939
.... 
```

这个列表一直在继续，我发现这行不通。但问题是我不知道如何让它工作。非常感谢任何关于我如何检查和获取订阅结束大于给定日期的 id 的结果的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:55:26.167

您最好的选择是，因为您有 1000 个值要检查，所以将要检查的所有 id 插入到临时表中 - 让我们`checkIds`用单列调用表`id`。

然后你可以简单地做：

```
SELECT c.id, c.subscriptionEnd
FROM subscriptions c
INNER JOIN checkIds ON c.id = checkIds.id
WHERE c.subscriptionEnd > '2013-01-27' 
```

完成后，最后删除临时表。

* * *

其他解决方案包括：

*   一个巨大而笨拙的`IN`子句，这可能是一场性能噩梦：

    ```
    SELECT c.id, c.subscriptionEnd
    FROM subscriptions c
    WHERE c.subscriptionEnd > '2013-01-27'
    AND c.id IN (12345, 12939, ...) 
    ```

*   在您的 ID 列表中查找模式：

    ```
    SELECT c.id, c.subscriptionEnd
    FROM subscriptions c
    WHERE c.subscriptionEnd > '2013-01-27'
    AND (c.id = 12345
        OR c.id BETWEEN 12939 AND 12951
        OR ...) 
    ```

# java - JVM字节码可以在编译时进行操作吗？

> ID：14569032
> 
> 赞同：6
> 
> 时间：2013-01-28T18:51:09.817
> 
> 标签：java, compilation, bytecode, java-bytecode-asm

是否可以在编译时使用像 ASM 这样的字节码操作库？

具体来说，我想使用 Java 的注释处理 API 在带注释的类上实现大量样板方法。实现[注释处理器](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/AbstractProcessor.html)很简单，但运行时文件似乎`.class`还不存在`Processor`。还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:37:44.100

您可能对 Javassist ( [http://www.jboss.org/javassist](http://www.jboss.org/javassist) ) 感兴趣，它可以在编译后步骤中增强和保存类。

本文介绍了如何保存增强类：[https ://dzone.com/articles/implementing-build-time](https://dzone.com/articles/implementing-build-time)

特别是，一旦你改变了一个类，你可以做这样的事情：

```
 compiledClass.writeFile("/tmp/modifiedClassesFolder"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:40:15.897

这应该是可能的，因为以下项目正在这样做：[Project Lombok](https://github.com/rzwitserloot/lombok)

还：

Java 8 将带来一种新机制，允许您为 Java 编译器 (javac) 编写插件。编译器插件允许您向 javac 添加新阶段，而无需更改其代码库。新行为可以封装在插件中并分发给其他人使用。例如，javac 插件可用于执行以下操作：

• 添加额外的编译时检查

• 添加代码转换

• 对源代码进行定制分析

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T19:31:02.090

您应该改用 CGLib。使用 CGLib，您可以使用方法拦截器添加代理，并让拦截器实现您的样板代码。另一种选择是查看 Javassist。使用 Javassist，您可以使用实际文本（在字符串中）创建一个新的子类，并让 javassist 将其编译为字节码。

# sql - 使用存储过程从表 A 中获取插入的 colm_ID 以在表 B 中使用它

> ID：14569035
> 
> 赞同：0
> 
> 时间：2013-01-28T18:51:20.367
> 
> 标签：sql, sql-server, stored-procedures

我只是想问一下如何从表A中获取最新插入的ID作为例子，并用它在另一个表B中输入记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:56:50.003

如果我很好地回答了您的问题，您需要`INSERT`在一个语句中执行两个语句`Stored Procedure`并使用从第一个语句生成的 ID 在第二个语句中使用它，使用`SCOPE_IDENTITY()`

```
create proc yourproc
    (
       -- parameter definitions here
    )
    as
    begin
            insert into Employee
            (FN,LN,Address) 
            values 
            (@FN,@LN,@Address)

    declare @EmployeeID int 
    set @EmployeeID = SCOPE_IDENTITY()

            insert into EmpContact
            (Empid, ContactType, ContactNumber) 
            values 
            (@EmployeeID, @ContactType, @ContactNumber) 
    end 
```

> SCOPE_IDENTITY 和@@IDENTITY 返回在当前会话的任何表中生成的最后一个标识值。但是，SCOPE_IDENTITY 返回仅在当前范围内插入的值；@@IDENTITY 不限于特定范围。

[SCOPE_IDENTITY (Transact-SQL) - MSDN](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

# ios - 使用选取器动态更改 UICollectionCell 的标签

> ID：14569038
> 
> 赞同：0
> 
> 时间：2013-01-28T18:51:25.647
> 
> 标签：ios, objective-c, xcode

基本上我有一个带有 UICollectionView 和 UIPickerView 的类设置。正如我现在拥有的那样，当用户单击单元格内的按钮时，选择器会弹出。我要做的是在用户从选择器中选择某些内容时更改文本字段的值。这是我的设置方式，但是当我更改选择器中的值时没有出现任何内容：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    static NSString *CellIdentifier=@"cell";
    activityCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    UITextView *nameLabel = (UITextView *)[cell viewWithTag:1];

    nameLabel.text = [NSString stringWithFormat:@"%@  %@",[arrayHour objectAtIndex:[pickerView selectedRowInComponent:0]], [arrayMinute objectAtIndex:[pickerView    selectedRowInComponent:1]]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:05:50.547

在您提供的代码中，您只是设置了一次文本，而不是维护文本的实时链接。您需要跟踪显示选取器视图的单元格（例如，使用 ivar），并在委托方法`-[UIPickerViewDelegate pickerView:didSelectRow:inComponent:]`中再次设置标签的文本。

# mysql - 从两个不同的表比较 mySQL

> ID：14569041
> 
> 赞同：0
> 
> 时间：2013-01-28T18:51:29.460
> 
> 标签：mysql

我有一个 mySQL 数据库，我想从一个表（tableA）中获取值（field1），从另一个表（tableB）中获取值（字段 2），然后比较它们。如果在 tableB 字段 2 中找到表 A 中的字段 1，则应将它们排除在我的选择中。

```
SELECT task_name, tasks.task_id
FROM tasks
INNER JOIN custom_fields_values ON value_object_id <>task_id 
```

这是我尝试过的，但似乎不起作用。它一式三份显示 task_id，这很奇怪。value_object_id 只有两个字段 24 和 32。task_id 有数字 1-40，基本上我需要一个没有字段值 24 和 32 的 1-40 的列表。

```
SELECT task_name, tasks.task_id
FROM tasks
INNER JOIN custom_fields_values ON value_object_id =task_id 
```

然而，这工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:54:07.263

这是因为您使用的是`INNER JOIN`- 尝试使用 a`LEFT JOIN`代替。

```
SELECT tasks.task_name, tasks.task_id
FROM tasks
LEFT JOIN custom_fields_values ON custom_fields_values.value_object_id=tasks.task_id
WHERE custom_fields_values.value_object_id IS NULL 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:54:58.613

你需要一个**[反半连接](http://en.wikipedia.org/wiki/Relational_algebra#Antijoin_.28.E2.96.B7.29)**：

```
SELECT task_name, task_id
FROM tasks AS t
WHERE NOT EXISTS
      ( SELECT *
        FROM custom_fields_values AS c
        WHERE c.value_object_id = t.task_id
      ) ; 
```

# drupal - 如何在 Drupal 中的相同内容块上显示不同的内容？

> ID：14569043
> 
> 赞同：0
> 
> 时间：2013-01-28T18:52:11.087
> 
> 标签：drupal, panels, drupal-blocks

我正在尝试构建 10 个具有相同结构的页面（右侧边栏上有 4 个方形内容块，左侧有一般内容）。我正在尝试构建它，以使每个页面上的块结构保持相同，但块内的内容不同。我尝试使用 Drupal 提供的通用块来执行此操作，但这很乏味，并且需要我仅在每个页面上单独显示块，然后在下一页上创建一个新块。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:38:21.570

您可以使用带有上下文过滤器的[视图查看此](http://drupal.org/project/views)[视频](http://vimeo.com/22180500)

# ruby - 与 Ruby File 类相关的 PATH 方法混淆

> ID：14569044
> 
> 赞同：1
> 
> 时间：2013-01-28T18:52:16.353
> 
> 标签：ruby, ruby-1.9.3

我对以下方法的实用性感到困惑`File Class`：

```
 1\. File::absolute_path
 2\. File::realdirpath
 3\. File::realpath
 4\. File::expand_path 
```

***我在下面尝试了什么：***

```
irb(main):001:0> Dir.pwd
=> "C:/Users/Matt"
irb(main):002:0> Dir.chdir('D:\VB Script\excel_ie_wsh')
=> 0
irb(main):003:0> Dir.pwd
=> "D:/VB Script/excel_ie_wsh"
irb(main):005:0> File.realdirpath('\VB Script\excel_ie_wsh')
=> "/VB Script/excel_ie_wsh"
irb(main):006:0> File.realpath('\VB Script\excel_ie_wsh')
=> "/VB Script/excel_ie_wsh"
irb(main):007:0> File.absolute_path('\VB Script\excel_ie_wsh')
=> "D:/VB Script/excel_ie_wsh"
irb(main):008:0> File.realpath('readme.txt')
=> "D:/VB Script/excel_ie_wsh/readme.txt"
irb(main):009:0> File.realdirpath('readme.txt')
=> "D:/VB Script/excel_ie_wsh/readme.txt"
irb(main):012:0> File.absolute_path('readme.txt')
=> "D:/VB Script/excel_ie_wsh/readme.txt"
irb(main):013:0> 
```

*问题：*

1.  为什么`File.realdirpath`和`File.realpath`产生相同的输出？
2.  有何`File.realpath`不同？`File.absolute_path`
3.  与有何`absolute_path(file_nam)`不同？`absolute_path(file_name[, dir_string] )`
4.  与有何`realdirpath(pathname)`不同？`realdirpath(pathname [, dir_string])`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:56:40.260

**为什么 File.realdirpath 和 File.realpath 产生相同的输出？**

根据 ruby​​-doc，这两种方法之间的唯一区别是路径名的最后一个组件是否必须存在。`realdirpath`不在乎，as哪里`realpath`会抛出异常。

例如，当获取一个不存在的文件的路径时：

```
irb(main):001:0> File.realpath('nonexistent.file')
Errno::ENOENT: No such file or directory - H:/nonexistent.file
        from (irb):1:in `realpath'
        from (irb):1
        from C:/Ruby193/bin/irb:12:in `<main>'

irb(main):002:0> File.realdirpath('nonexistent.file')
=> "H:/nonexistent.file" 
```

**File.realpath 与 File.absolute_path 有何不同？**

我不在 UNIX 系统上对此进行测试，但我的猜测是唯一的区别是路径何时开始波浪号（即 ~）。在 UNIX 中，波浪号表示主目录。我认为这两种方法之间的区别在于它是否扩展了主目录。

如果您在 Windows 上，那应该没关系（即没有主目录快捷方式）。

**realdirpath(pathname) 与 realdirpath(pathname [, dir_string]) 有何不同？**

ruby-doc 声明“如果给出了 dir_string，它将用作解释相对路径名而不是当前目录的基本目录。” 换句话说，可以指定 dir_string 来覆盖起点。

例如，让我们假设：

1.  您正在从 H: 驱动器的根目录运行 irb（即这是您的当前目录）
2.  您有一个名为“文件夹”的子文件夹（即 H:\Folder）

然后就可以看出区别了：

```
H:\>irb
irb(main):001:0> File.realdirpath('test.txt')
=> "H:/test.txt"

irb(main):002:0> File.realdirpath('test.txt', './Expense')
=> "H:/Expense/test.txt" 
```

您可以看到第二条语句相对于 dir_string 中所述的目录定位文件。

**absolute_path(file_nam) 与 absolute_path(file_name[, dir_string] ) 有何不同？**

这与上一个问题相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:06:04.643

这不是要回答您的问题，而是要帮助您在 Windows 机器上使用 Ruby、Perl 和可能的 Python 等语言时保持理智。

不要浪费时间使用反斜杠编写路径。相反，加入 *nix 类型的操作系统并在代码中使用正斜杠。这将使将文件从桌面环境移动到网络/托管环境变得更加容易，因为互联网和企业上的大铁通常是 *nix 系统。

[IO 文档](http://www.ruby-doc.org/core-1.9.3/IO.html)说：

> 如果可能，Ruby 将在不同的操作系统约定之间转换路径名。例如，在 Windows 系统上，文件名“/gumby/ruby/test.rb”将打开为“\gumby\ruby\test.rb”。在 Ruby 字符串中指定 Windows 样式的文件名时，请记住转义反斜杠：

```
"c:\\gumby\\ruby\\test.rb" 
```

> 我们这里的示例将使用 Unix 风格的正斜杠；File::SEPARATOR 可用于获取特定于平台的分隔符。

# jquery - 如果未禁用，请执行此操作

> ID：14569050
> 
> 赞同：5
> 
> 时间：2013-01-28T18:52:45.507
> 
> 标签：jquery, math

我正在添加输入到一些输入中的数字并得到一个总数。总计脚本有效，但是现在我不想包括禁用时要计算的输入。我想我需要使用 :not(:disabled) 但不确定如何正确地将其放入我的脚本中？

这是重要的脚本：

```
$('.observationPositive').each(function(){
    countP++;
    sumP += Number($(this).val());
}); 
```

我怎么说只有在未禁用时才计数？（错误编码示例）

```
$('.observationPositive').each(function(){
    countP++;
    sumP += Number($(this:not(:disabled)).val());
}); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T18:54:48.683

仅迭代未禁用的那些：

```
$('.observationPositive:not(:disabled)').each(function() {
   // increment count
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T18:54:32.153

您的选择器需要是一个字符串：

```
 $(this).is(":not(:disabled)"); 
```

这将返回一个布尔值。调用`val`不匹配任何元素的 jQuery 选择器将返回`undefined`，如果您添加`undefined`一个数字，您将得到`NaN`.

```
sumP += $(this).is(":disabled") ? 0 : Number($(this).val()); 
```

在您的特定情况下[，Jivings 的答案](https://stackoverflow.com/a/14569089/1290545)更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:55:02.987

将约束添加到主选择器：

```
$('.observationPositive:not(:disabled)').each(function(){
    countP++;
    sumP += Number($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T11:51:21.547

更简单：

```
 !$(this).is(":disabled"); 
```

# 3d - 仅使用精确的输入点作为顶点的 3D 三角形表面网格生成

> ID：14569051
> 
> 赞同：1
> 
> 时间：2013-01-28T18:52:46.480
> 
> 标签：3d, geometry, point, mesh, delaunay

我从一个精确的数值解中得到了一些点，这些点构成了一个光滑的 3D 物体的表面。这些点已经满足平滑标准并且不包含噪声（除了双精度舍入误差）。我现在需要为物理模拟软件从这些点生成一个三角形网格。

这个问题的两个方面与已经在 SO 上提出的问题不同：

*   三角测量应该完全使用规定的输入点并且*只*使用规定的点，没有插值，没有添加或省略任何点，“慢跑”等。似乎这种类型的问题在“点云”的背景下被问过几次，其中输入点表示表面上的近似位置，但我的坐标是准确的。
*   在 3d 中多次提到了 Delaunay 三角剖分，但也提到了一些注意事项，并且 Delaunay 三角剖分对于 3d 来说不是“最佳”的。

是否有开源库或算法的建议可以生成某种形式的高质量 3d 三角剖分（不需要超严格的最优性保证，但*某种*形式的质量目标会很好）只保留（和所有）规定的顶点和*不要*将此视为采样和重建问题？

使用以下一种（或多种）实现：C、OCaml、C++ 或 Python 将不胜感激。我找到了 Qhull：[http](http://www.qhull.org/) ://www.qhull.org/ （也用于 SciPy 的 scipy.spatial），但看起来它只生成 Delaunay 三角形并且有一些令人困惑的选项，所以我不确定它可以满足我的第一个约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:05:55.697

点集大小的大小是多少？它们是在凸位置，还是大部分在凸位置？你想重建什么样的表面？

[CGAL](http://www.cgal.org/)的[3D alpha 形状](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Alpha_shapes_3/Chapter_main.html)组件看起来像是从您的点重建网格的好工具。它在[GPLv3+](http://gplv3.fsf.org/)下获得许可。不过，它确实使用了 3D Delaunay 三角剖分。我想知道你在说什么警告。这取决于您拥有的点云类型。

# ios - 应用颠覆浮动

> ID：14569053
> 
> 赞同：0
> 
> 时间：2013-01-28T18:52:49.650
> 
> 标签：ios, floating-point, version, cgfloat

我得到我的应用程序的版本是这样的：

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] 
```

然后尝试将其转换为这样的浮点数：

```
[version floatValue] 
```

现在一切都很好，但是当我有一个像“1.1.1”这样的小版本时，第二个小数点后面的所有东西都会被截断。

将所有内容保持在小数点后第二位的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:01:58.147

为了使其与您的开始方式保持同步...

```
int major, minor, bug;
NSArray *versionItems = [version componentsSeparatedByString:@"."];
major = [[versionItems objectAtIndex:0] intValue]; 
minor = [[versionItems objectAtIndex:1] intValue];
bug = [[versionItems objectAtIndex:2] intValue]; 
```

但我建议看看这个..

[如何在 OS X 或 iOS（不使用格式塔）中确定运行时的操作系统版本？](https://stackoverflow.com/questions/11072804/mac-os-x-10-8-replacement-for-gestalt-for-testing-os-version-at-runtime)

# spring-mvc - 地图属性的spring mvc和复选框处理

> ID：14569063
> 
> 赞同：1
> 
> 时间：2013-01-28T18:53:27.707
> 
> 标签：spring-mvc, checkbox

我有以下内容（请注意，我正在使用以下划线作为前缀的 spring[约定](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/view.html)）：

```
<input type="checkbox" name="speakersIds[${speaker.id}]" value="true" /> 
<input type="hidden" name="_speakersIds[${speaker.id}]" value="假” />

```

SpeakerIds 是我的模型的地图属性。

```
Map<Long, Boolean> speakerIds;

```

问题是在我的控制器中，未选中的复选框未设置为 false。

例子：

*如果 SpeakerIds[0] 被选中，那么 speakerIds.get(0) == true*

*如果未检查 speakerIds[0]，则 speakerIds.get(0) == null。<--- 这不应该是 == 假吗？*

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:25:59.957

在地图的情况下，下划线约定似乎不起作用。

我终于在隐藏输入中使用了相同的属性名称。

```
<input type="checkbox" name='speakersIds["${speaker.id}"]' value="True" /> 
<input type="hidden" name='speakersIds["${speaker.id}"] ' 值="假" />

```

在测试时，我必须将 SpeakerIds 的类型从 Map<Long, Boolean> 更改为 Map<String, Boolean> 但它也应该与 map 键一起使用。

# php - php脚本如何在不重新加载页面的情况下运行

> ID：14569068
> 
> 赞同：0
> 
> 时间：2013-01-28T18:53:47.357
> 
> 标签：php, database

这似乎有点模糊，但你看到了很多。例如在 facebooks 通知系统上，它会在顶部显示通知总数。StackOverflow 在问题页面上做同样的事情，Youtube 在评论部分做同样的事情。我想我的问题真的是，页面如何在不重新加载页面的情况下与数据库交互？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T18:57:02.703

它被称为 AJAX。有一个 JavaScript 代码每隔 X 秒在后台运行一次，该代码向服务器发出 http 请求以获取最新数据。一旦从服务器获得响应，javascript 代码就会更新网页以显示新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:58:27.063

几乎所有这些都依赖[AJAX](http://en.wikipedia.org/wiki/AJAX)。在 AJAX 出现之前，一种常见的方法是将数据发布到页面上隐藏的 iframe 中，从而刷新 iframe 而不是整个页面。

[JavaScript](http://en.wikipedia.org/wiki/Javascript)使 AJAX 成为可能，尽管大多数人更喜欢使用[框架](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)来避免处理可能出现的浏览器兼容性问题。

为了快速响应，一些站点（包括 Facebook）使用 Jabber 协议的变体（[现在是 XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)），它允许服务器将信息推送到客户端，而不是客户端每隔 X 秒轮询一次服务器。这可以显着减轻服务器的负载，尤其是在站点有很多用户的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:58:30.643

运行一些称为 AJAX 的 javascript。它允许您在后台有效地加载页面并在其上执行代码，而无需离开主页。

您通常请求另一个 .php 页面，其中包含一些由用户输入或从数据库中获取的变量，然后该 PHP 页面处理数据。然后，您可以使用 document.getElementById 或类似方法更新您的主页元素。

[http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)

这个页面有助于解释它。

# ios - NSRegularExpression 分隔段落

> ID：14569074
> 
> 赞同：1
> 
> 时间：2013-01-28T18:54:08.220
> 
> 标签：ios, objective-c, regex, nsregularexpression

考虑这段文字：

> ```
> Paragraph 1: Lorem ipsum dolor sit amet, consectetur adipisicing elit,
> sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
> enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
> ut aliquip ex ea commodo consequat. 
> 
> Paragraph 2 Lorem ipsum dolor sit amet, consectetur adipisicing elit,
> sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
> enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
> ut aliquip ex ea commodo consequat.
> 
> Paragraph 3 Lorem ipsum dolor sit amet, consectetur adipisicing elit,
> sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
> enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
> ut aliquip ex ea commodo consequat. 
> ```

`\n\n`在ObjC中，阅读上面的文字时， paragraph1和paragraph2之间有两行空格。但是在第 2 段和第 3 段之间有超过 3 个行间距`\n\n\n\n`。

**我想要一个 NSRegularExpression 模式，它可以完全不考虑行空间的数量来读取和返回这些段落。**

```
NSString *pattern = @"\n(*\n)\n";

NSRegularExpression* regex1 = [[NSRegularExpression alloc] initWithPattern:pattern options:NSRegularExpressionCaseInsensitive error:nil];

NSArray *array = [regex1 matchesInString:p options:0 range:NSMakeRange(0, [p length])];
for(NSTextCheckingResult *tcr in array){
    NSTextCheckingResult *tcr = [regex1 firstMatchInString:p options:0 range:NSMakeRange(0, p.length)];
    NSRange matchRange = [tcr rangeAtIndex:1];
    NSString *amatch = [p substringWithRange:matchRange];
    NSLog(@"Found string: %@", amatch);
} 
```

我是 NSRegularExpression 的新手，任何对更好教程的参考都会很棒。在这种情况下，这是解决上述问题的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:47:37.873

您不需要 NSRegularExpression 来执行此操作。NSString 内置了大量非常有用的自然语言解析函数。

最好的方法是像这样枚举字符串......

```
NSString *string = @"Paragraph 1: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n\n\nParagraph 2 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n\n\n\n\n\n\n\n\n\nParagraph 3 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.";

NSMutableArray *paragraphs = [NSMutableArray array];

[string enumerateSubstringsInRange:NSMakeRange(0, string.length) 
                           options:NSStringEnumerationByParagraphs 
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    [paragraphs addObject:substring];
}];

for (NSString *paragraph in paragraphs) {
    NSLog(@"%@", paragraph);
} 
```

这将获取每个段落并将其放入 NSMutableArray 段落中。

这不需要任何解析或正则表达式等......它也可能比你可以编写的任何东西都快，因为它是一个原生函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:35:56.517

我相信使用标准 NSString 方法可能会更容易完成：

```
NSArray *allParagraphs = [text componentsSeparatedByString:@"\n\n"];

NSCharacterSet *charactersToTrim = [NSCharacterSet whitespaceAndNewlineCharacterSet];
for (NSString *paragraph in allParagraphs) {
    NSString *trimmedParagraph = 
            [paragraph stringByTrimmingCharactersInSet:charactersToTrim];
} 
```

或者，如果您想使用正则表达式，请尝试以下操作：

```
"(.*?)(\\n{2,}|$)" 
```

它保留所有符号，直到找到两个或更多新行或文件结尾

**编辑。**

```
NSRegularExpression *regexp =
        [NSRegularExpression regularExpressionWithPattern:@"(.*?)(\\n{2,}|$)"
                                                  options:NSRegularExpressionDotMatchesLineSeparators
                                                    error:nil];
[regexp enumerateMatchesInString:TEST_STRING
                         options:0
                           range:NSMakeRange(0, TEST_STRING.length)
                      usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop){
                          NSLog(@"%@", [TEST_STRING substringWithRange:[result rangeAtIndex:1]]);
                      }]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:02:44.113

我无法帮助您进行 NSRegularExpression 匹配和替换，但我相信您正在寻找的正则表达式是`\\n(\\n)+`.

您需要两次转义换行符。一次用于 C 字符串，一次用于正则表达式。+ 字符表示前一组中的一个或多个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T04:46:33.840

下面的工作。我还使用`enumerateMatchesInString`来查找匹配项。

```
NSString *pattern = @"(\\A|\\n\\s*\\n)(.*?\\S[\\s\\S]*?\\S)(?=(\\Z|\\s*\\n\\s*\\n))";
NSRegularExpression* regex = [[NSRegularExpression alloc] initWithPattern:pattern
                                                                  options:NSRegularExpressionCaseInsensitive
                                                                    error:&error];

[regex enumerateMatchesInString:input
                        options:0
                          range:NSMakeRange(0, [input length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         NSString *match = [input substringWithRange:[result rangeAtIndex:2]];
                         NSLog(@"match = '%@'", match);
                     }]; 
```

这不仅返回两个换行符之间的字符串（忽略返回之间的任何额外空格），还返回第一个（即在字符串的开头和两个换行符的第一个序列之间）和最后一个（即在最后一个两个换行符的序列和字符串的结尾。

# ios - 将 Struct 与 NSMutableArray 一起使用

> ID：14569078
> 
> 赞同：1
> 
> 时间：2013-01-28T18:54:22.660
> 
> 标签：ios, objective-c, xcode

> **可能重复：**
> [将 c-struct 放入 NSArray 的最佳方法是什么？](https://stackoverflow.com/questions/4516991/whats-the-best-way-to-put-a-c-struct-in-an-nsarray)

如何在 NSMutableArray 中使用 struct？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:57:48.840

你不能。Foundation 中的所有集合都只能存储 Objective-C 对象。由于 a`struct`不是 Objective-C 对象，因此不能将其存储在其中。

但是您可以将您的子类包装`struct`成一个简单的`NSObject`子类并将其存储在数组中。

或与`NSValue`：

```
#import <Foundation/Foundation.h>

struct TestStruct {
    int a;
    float b;
};

...

NSMutableArray *theArray = [NSMutableArray new];    

...

struct TestStruct *testStructIn = malloc(sizeof(struct TestStruct));
testStructIn->a = 10;
testStructIn->b = 3.14159;

NSValue *value = [NSValue valueWithBytes:testStructIn objCType:@encode(struct TestStruct)];
[theArray addObject:value];

free(testStructIn);

...

struct TestStruct testStructOut;
NSValue *value = [theArray objectAtIndex:0];
[value getValue:&testStructOut];

NSLog(@"a = %i, b = %.5f", testStructOut.a, testStructOut.b); 
```

顺便说一句，没有真正的理由为什么要分配一个结构并分配一个堆栈。只是想我会这样做以表明它有效。

# performance - 如何加快 SORM 中的简单计数操作？

> ID：14569082
> 
> 赞同：2
> 
> 时间：2013-01-28T18:54:32.573
> 
> 标签：performance, count, h2, sorm

我正在尝试使用 SORM 在大表上执行简单的计数操作。这工作速度莫名其妙。代码：

```
case class Tests (datetime: DateTime, value:Double, second:Double)

object DB extends Instance (
  entities = Set() +
    Entity[Tests](),
  url = "jdbc:h2:~/test",
  user = "sa",
  password = "",
  poolSize = 10
)

object TestSORM {
  def main(args: Array[String]) {
    println("Start at " + DB.now())
    println(" DB.query[Tests].count() = " + DB.query[Tests].count())
    println("Finish at " + DB.now())
    DB.close()
  }
} 
```

结果：

```
Start at 2013-01-28T22:36:05.281+04:00
 DB.query[Tests].count() = 3390132
Finish at = 2013-01-28T22:38:39.655+04:00 
```

花了两分半钟！在 H2 控制台中，“从测试中选择计数（*）”在一个滴答声中起作用。我的错误是什么？我可以通过它执行sql查询吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:31:59.167

这是一个已知的优化问题。目前 SORM 不使用`COUNT`操作。既然问题终于出现了，我马上就解决。预计在未来几天内会发布解决此问题的版本。

* * *

问题修复已延迟。[您可以在问题跟踪器](https://github.com/sorm/sorm/issues/14)上监控其状态。

# ios - iOS模拟器错误Xcode 4.5

> ID：14569083
> 
> 赞同：0
> 
> 时间：2013-01-28T18:54:33.270
> 
> 标签：ios

所以当我运行模拟器时，我得到：

```
2013-01-28 13:35:38.271 Gas Index[79343:11303] -[Gas isEqualToString:]: unrecognized selector sent to instance 0x71a2260
2013-01-28 13:35:38.274 Gas Index[79343:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Gas isEqualToString:]: unrecognized   selector sent to instance 0x71a2260' 
```

这是我的 ViewController.m 代码。任何帮助表示赞赏。（我是 xcode 的 n00b）

```
#import "ViewController.h"
#import "DetailViewController.h"

@interface ViewController ()

@end

@implementation ViewController {
    NSArray *gases;
}

@synthesize tableView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    Gas *gas1 = [Gas new];
    gas1.name=@"Argon";
    gas1.desc=@"An Inert Gas,Ar";

    Gas *gas2 = [Gas new];
    gas2.name=@"Carbon Dioxide";
    gas2.desc=@"An Inert Gas, CO2";

    Gas *gas3 = [Gas new];
    gas3.name=@"Nitrogen";
    gas3.desc=@"An Inert Gas, N2";

    gases = [NSArray arrayWithObjects:gas1,gas2,gas3, nil];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [gases count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"GasCell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }
    cell.textLabel.text = [gases objectAtIndex:indexPath.row];
    return cell;
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showGasDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        DetailViewController *destViewController = segue.destinationViewController;
        destViewController.gas = [gases objectAtIndex:indexPath.row];
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:10:27.287

问题在于这一行：

```
cell.textLabel.text = [gases objectAtIndex:indexPath.row]; 
```

拆分该代码：

```
Gas *gas = gases[indexPath.row];
cell.textLabel.text = gas; 
```

这就是你想要做的。您不能将`Gas`对象分配给需要`NSString`. 你可能想要这个：

```
Gas *gas = gases[indexPath.row];
cell.textLabel.text = gas.name; 
```

请注意，当您在调试器中运行此程序时，您应该会看到一个堆栈跟踪，显示该错误发生在哪一行。

# javascript - JS 对象字面量设置有问题

> ID：14569098
> 
> 赞同：0
> 
> 时间：2013-01-28T18:55:33.317
> 
> 标签：javascript, jquery, design-patterns, object

所以我已经设置了我的第一个 JS 设计模式——但我遇到了一个问题。

这是我在小提琴上的代码：http: [//jsfiddle.net/jrutter/CtMNX/](http://jsfiddle.net/jrutter/CtMNX/)

```
var emailSignup = {
'config': {
    // Configurable Options
    'container': $('#email-signup'),
    'emailButton': $('#email-submit'),
    'emailInput': $('#email-input'),
    'brontoDirectAddURL': 'URL',
    'brontoListID': '0bbc03ec000000000000000000000003287b',

},
'init': function (config) {
    // stays the same
    // provide for custom configuration via init()
    if (config && typeof (config) == 'object') {
        $.extend(emailSignup.config, config);
    }
        // Create and/or cache some DOM elements
       emailSignup.$container = $(emailSignup.config.container);
emailSignup.$button = $(emailSignup.config.emailButton);
emailSignup.$input = $(emailSignup.config.emailInput);
emailSignup.$brontoURL = emailSignup.config.brontoDirectAddURL;
emailSignup.$brontoList = emailSignup.config.brontoListID;

    // Add email track to drop image pixel into for submission
    emailSignup.$container.append('<div class="email-error"></div>');
    emailSignup.$container.append('<div class="email-track"></div>');

    // Call getEmaile
    emailSignup.getEmail(emailSignup.$button, emailSignup.$input);

    // make a note that the initialization is complete
    emailSignup.initialized = true;

},
'getEmail': function ($button, $input) {

    // click event
    emailSignup.$button.click(function () {
        // get the val
        var $emailVal = $(emailSignup.$input).val();
        // Call validateEmail
        console.log($emailVal);
        emailSignup.validateEmail($emailVal);

        return false;
    });

},
'validateEmail': function ($emailVal) {

    var $emailRegEx = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    //console.log($emailVal);

    if ($emailVal == '') {
        $(".email-error").html('<p>You forgot to enter an email address.</p>');
    } else if (!$emailRegEx.test($emailVal)) {
        $(".email-error").html('<p>Please enter a valid email address.</p>');
    } else {
        $(".email-error").hide();
        emailSignup.submitEmail($emailVal);
    }

},
'submitEmail': function ($emailVal) {
    $(".email-track").html('<img src=' + emailSignup.$brontoURL+'&email='+$emailVal+'&list1=' + emailSignup.$brontoList + '" width="0" height="0" border="0" alt=""/>');
}, 
```

};

它是一个通过 bronto 将订阅者添加到电子邮件列表的功能 - 当页面中包含脚本并且页面上也设置了 init 功能时，它可以完美运行。但是，当我将脚本包含在共享标头中并尝试从准备好的文档中触发该功能时，它似乎不起作用。

另外，如果我尝试传入一个“容器”——那也会破坏脚本。不知道我做错了什么？但是，如果我传入 URL - 那确实有效！

```
$(function () {
     emailSignup.init({
       'brontoDirectAddURL':'URL','container':'#email-signup'
        });
}); 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:15:08.947

您的默认配置对象包含 jQuery 集合。但是，您只是将字符串`"#email-signup"`作为 your`container`而不是`$("#email-signup")`. 这就是错误的来源。因此，您的初始呼叫应该是：

```
$(function () {
    emailSignup.init({
        'brontoDirectAddURL':'URL','container': $('#email-signup')
    });
}); 
```

请注意，由于您的初始模块包含一些 jQuery 调用，因此您还需要将整个`emailSignup`混乱包装到 a`$(document).ready()`中。

您可以考虑将整个事情重新配置为一个 jQuery 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:08:48.693

更改以下代码...

```
emailSignup.$container = emailSignup.config.container;
emailSignup.$button = emailSignup.config.emailButton;
emailSignup.$input = emailSignup.config.emailInput;
emailSignup.$brontoURL = emailSignup.config.brontoDirectAddURL;
emailSignup.$brontoList = emailSignup.config.brontoListID; 
```

进入以下...

```
// Create and/or cache some DOM elements
emailSignup.$container = $(emailSignup.config.container);
emailSignup.$button = $(emailSignup.config.emailButton);
emailSignup.$input = $(emailSignup.config.emailInput);
emailSignup.$brontoURL = $(emailSignup.config.brontoDirectAddURL);
emailSignup.$brontoList = $(emailSignup.config.brontoListID);

// Add email track to drop image pixel into for submission
emailSignup.$container.append('<div class="email-error"></div>');
emailSignup.$container.append('<div class="email-track"></div>'); 
```

您不能在字符串上调用 append。我已经更新了你的[JSFiddle](http://jsfiddle.net/CtMNX/29/)。

# javascript - Raphael.js - HowTo 饼图甜甜圈样式，甜甜圈扇区中带有弯曲标签

> ID：14569101
> 
> 赞同：1
> 
> 时间：2013-01-28T18:55:42.767
> 
> 标签：javascript, raphael, pie-chart, donut-chart

我想制作一个甜甜圈风格的饼图，在特定的甜甜圈扇区中带有弯曲的标签，比如这个：

![在此处输入图像描述](../Images/18012bff2faceb0fad7bb410a9ad69e1.png)

在这个模型中，用户点击了“Raphael.js”扇区。现在对于单击的扇区，还应该有一个事件处理程序，负责在饼图下方显示一个新的 HTML Div 并显示一些信息。完美的解决方案是，如果甜甜圈旋转以使点击的扇区位于底部。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:41:11.313

这是一些沿路径创建文本的代码。它并不完美，但它会让你走得更远，为你自己的项目指定。

```
var paper = Raphael(0, 0, '100%', '100%'),
    r = 200,
    path = paper.path("M100,50a" + r + "," + r + " 0 0,1 " + r + "," + r).attr({ stroke: "#000", 'stroke-width': '40px'}),
    message = "Raphael.js",
    message_length = 0,
    letters = [],
    places = [],
    ratio,
    fontsize,                                                
    letter,
    c = 0,
    p;

//since not every letter is the same width, get the placement for each letter along the length of the string
//however, Raphael appears to group the width of letters into intervals of 4px, so this won't be perfect        
for (; c < message.length; c += 1) {
    letter = paper.text(0, 0, message[c]).attr({"text-anchor" : "start"}).attr({fill: '#FFF'});
    letters.push(letter);
    places.push(message_length);
    //spaces get a width of 0, so set min at 4px
    message_length += Math.max(4, letter.getBBox().width);
}

ratio = path.getTotalLength() / message_length;
fontsize = 8 * ratio;

for (c = 0; c < letters.length; c += 1) {
    letters[c].attr("font-size", fontsize + "px"); 
    p = path.getPointAtLength(places[c] * ratio);
    //there does appear to be a bug in p.alpha around 180\. Here's the fix
    letters[c].attr({ x: p.x, y: p.y, transform: 'r' + (p.alpha < 180 ? p.alpha + 180 : p.alpha)});
} 
```

[jsFiddle](http://jsfiddle.net/4UykA/1/)

至于其他的东西，你需要先自己努力，如果你碰壁了，就提出具体的问题。

# vim - Vim 重新缩进选项

> ID：14569103
> 
> 赞同：1
> 
> 时间：2013-01-28T18:55:49.480
> 
> 标签：vim, auto-indent

我想将 C 文件从一种编码风格转换为另一种。我可以使用[缩进](https://www.gnu.org/software/indent/)和其他类似的工具。但是，我想知道 Vim 是否有对这种需求的内置支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:44:02.890

Vim 的自动缩进可以通过多种方式进行配置。您的第一步是获取它，以便它缩进您以所需样式键入的新代码。

`=`然后，您可以使用该命令重新格式化任何现有代码。例如`=G`将从当前行重新格式化到文件末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:55:12.463

抱歉，Vim 中没有内置命令`:KRToAllman`。`:AllmanToKR`您需要使用`indent`或其他一些外部程序。

虽然我怀疑您是否可以使用它从一种样式切换到另一种样式，但您可能可以看一下`:h 'cinoptions'`and `:h c-indenting`。

# java - 正则表达式提取有效的 Http 或 Https

> ID：14569104
> 
> 赞同：1
> 
> 时间：2013-01-28T18:55:51.310
> 
> 标签：java, regex

我目前在使用正则表达式提取 URL 时遇到一些问题。

我希望我的正则表达式采用 URL，例如：

```
http://stackoverflow.com/questions/ask
https://stackoverflow.com
http://local:1000
https://local:1000 
```

通过一些教程，我了解到这个正则表达式可以找到以上所有内容：`^(http|https)\://.*$`但是，当它根本不应该使用它时，它也会`http://local:1000;http://invalid` `http://khttp://`作为单个字符串使用。

我知道我的表达式不是为了排除这种情况而写的，但我的问题是我想不出如何写它，所以它会检查这种情况。

任何帮助是极大的赞赏！

编辑：

看看我的问题，我似乎可以消除我的问题，只要我可以实施检查以确保在初始 http:// 或 https:// 之后的字符串中不会出现“//”，任何想法关于如何实施？

抱歉，这将使用 Java 完成

我还需要添加以下约束：一个字符串，例如`http://local:80/test:90`因为端口重复而失败......我需要一个只允许两个总数的约束：一个有效字符串中的符号（一个在 http/s 之后）和一个港口前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:22:15.740

检查您的编程语言，看看它是否已经有解析器。例如 php 有 parse_url()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:25:22.523

如果`://`在字符串中第一次出现之后没有，这只会产生匹配。

```
^https?:\/\/(?!.*:\/\/)\S+ 
```

请注意，尝试从字符串中解析有效的 url 非常复杂，请参阅
[In search of the perfect URL validation regex](http://mathiasbynens.be/demo/url-regex)，因此上述内容不会尝试这样做。
它只会匹配协议并遵循非空格字符。

在 Java 中

```
Pattern reg = Pattern.compile("^https?:\\/\\/(?!.*:\\/\\/)\\S+");
Matcher m = reg.matcher("http://somesite.com"); 
if (m.find()) {
    System.out.println(m.group());
} else {
    System.out.println("No match");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:27:36.357

来自[http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)

```
/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ 
```

这可能会根据编程语言/工具而改变

# unobtrusive-javascript - 通过不显眼的 JavaScript 传递变量

> ID：14569107
> 
> 赞同：0
> 
> 时间：2013-01-28T18:55:55.153
> 
> 标签：unobtrusive-javascript

我想将变量从按钮传递给事件处理程序，但我不知道这样做的正确方法是什么。x线和y线都不好。但我需要这样的东西。

在 html 头部

```
window.onload = function()
{
    var myButton = document.getElementsByTagName("button");

    for (var i = 0; i < myButton.length; i++)
    {
        myButton[i].onclick = function()        // <-- line x
        {                
            alert(myButton[i].data1);           // <-- line y
        }
    }
} 
```

在 html 正文中

```
<button type = "button" data1 = "John" data2 = "52">Click Me</button>
<button type = "button" data1 = "Peter" data2 = "26">Click Me</button>
<button type = "button" data1 = "Mary" data2 = "44">Click Me</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T19:47:17.270

看看我刚刚放在一起的这个 JSFiddle 示例：http: [//jsfiddle.net/BshLK/1/](http://jsfiddle.net/BshLK/1/)

您的代码示例的问题在于`i`事件处理程序运行时未定义，因为它只有在循环运行时才具有它的值。要更正它，首先您需要访问您调用事件的元素，其次您需要使用`getAttribute()`来获取属性值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:02:41.790

从你的 onload 事件我猜你没有使用 jquery，但如果你不介意 jquery，我会看看 data() 方法。你可以做类似的事情

```
$(function(){
    $("#button1").data("name", "value"); //your example would pass ("data","abcdefg");
    //Click handler.
    $("#button1").click(function(o,e){
         alert(o.data("name")); // alerts out "value"
    }
} 
```

然后，您可以使用该元素的选择器访问该数据。

[链接到文档](http://api.jquery.com/jQuery.data/)

# java - 将2个字符串相乘

> ID：14569108
> 
> 赞同：-2
> 
> 时间：2013-01-28T18:55:59.187
> 
> 标签：java, string, multiplication

我正在尝试为我的一类将两个简单的字符串相乘。该程序本身将根据用户输入的小时费率和工作时间显示总工资。我已经进行了一些挖掘，但我发现的结果对于我想要实现的目标来说似乎过于复杂。当然，我是从 C# 到 Java，所以我承认存在差异。以下是我到目前为止的代码。

```
 String RoPString, hrswrkdString;

    double grosspay, netpay, whtax;

    //Rate of pay input dialog box.
    RoPString = JOptionPane.showInputDialog(null, "Enter employee's hourly rate", "Rate of Pay", JOptionPane.INFORMATION_MESSAGE);

    //Hours worked input dialog box.
    hrswrkdString = JOptionPane.showInputDialog(null, "Enter hours worked", "Hours Worked", JOptionPane.INFORMATION_MESSAGE);

    //Calculations
    grosspay = RoPString*hrswrkdString;

    //Summary of pay
    JOptionPane.showMessageDialog(null, "Gross Pay: $" + grosspay); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T18:57:11.667

```
grosspay = RoPString*hrswrkdString; 
```

您不能`*`对`String`类型应用运算符。转换`String`为`double`然后执行`*`.

例子：

```
 double ropdouble = Double.valueOf(RoPString);
  double hrswrkddouble = Double.valueOf(hrswrkdString); 
```

注意：在命名变量时遵循 Java 命名约定（变量名以小写开头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:58:53.687

我认为您需要使用`Double.parseDouble()`将`String`对象变成可以与乘法一起使用的东西。

```
String RoPString, hrswrkdString;
double grosspay, netpay, whtax;

//Rate of pay input dialog box.
RoPString = JOptionPane.showInputDialog(null, "Enter employee's hourly rate", "Rate of Pay", JOptionPane.INFORMATION_MESSAGE);

//Hours worked input dialog box.
hrswrkdString = JOptionPane.showInputDialog(null, "Enter hours worked", "Hours Worked", JOptionPane.INFORMATION_MESSAGE);

//Calculations
grosspay = Double.parseDouble(RoPString)*Double.parseDouble(hrswrkdString);

//Summary of pay
JOptionPane.showMessageDialog(null, "Gross Pay: $" + grosspay.toString()); 
```

}

# sublimetext2 - 多个 ST2 光标

> ID：14569111
> 
> 赞同：0
> 
> 时间：2013-01-28T18:56:08.157
> 
> 标签：sublimetext2

我需要能够为数千行选择多个光标，然后让我同时在每个光标之前添加内容。有没有办法全选然后选择多个光标选项将光标放在每行的每个字符之前？希望这听起来不会令人困惑:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:09:27.637

是的，虽然我不知道多重选择对数千行的效果如何。

1.  *从全*选开始或选择您需要编辑的行。
2.  从*选择*菜单->*拆分为行*。这将创建多个选择，每行一个。
3.  使用 键将光标移动到每行的开头`Home`。
4.  插入您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:09:32.380

### 在 Windows / OS X 上

1.  确保你有 View > Word Wrap off
2.  全选：`Ctrl / Cmd`+`A`
3.  分成几行：`Ctrl / Cmd`++`Shift``L`
4.  将光标放在行首：`Home`/ `Ctrl`+`A`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T21:50:57.570

您可以按照其他答案中的建议进行操作，它会很好地工作，sublime 可以肯定地处理数千个选择，但有时它可能会变得有点慢。

在搜索 n' 替换中使用正则表达式，这就是它的用途。

1.  `ctrl`+`h`打开搜索和替换选项卡
2.  确保按下“正则表达式”，按下“换行”并且不按下“选择中”。
3.  输入 ^ 到顶部字段，在这种情况下将表示“行首”
4.  在底部字段中输入您的文本
5.  `ctrl`++`alt`或`enter`“全部替换”的捷径

# javascript - 如何在对象循环中跳过键

> ID：14569114
> 
> 赞同：2
> 
> 时间：2013-01-28T18:56:35.917
> 
> 标签：javascript, jquery

我想知道是否有任何方法可以跳过对象循环中的键。如果我有：

```
obj = {
   key1 : [ 1, 2, 3 ],
   key2 : [ 4, 5 ],
   key3 : []
} 
```

例如，我怎样才能跳过空的。因为我想要`join()`该对象中的非空数组，并过滤​​它们。如果我加入那个空数组，过滤器会寻找空字符串，当然它没有找到它，一切都会刹车。

```
var match = $('.widget');
for ( var i in obj ){
    var joined = obj[i].join();
    match = match.filter(joined);
} 
```

我试图删除它：

```
if ( obj[i].length == 0 ) {
    delete obj[i]
}; 
```

但是会发生错误，即 obj[i] 未定义并且无法加入它。我怎么能跳过它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T18:58:41.980

使用[循环控制](http://www.tutorialspoint.com/javascript/javascript_loop_control.htm)：

```
for (var i in obj) {
   if (obj[i].length == 0) {
       continue;
   }
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:58:30.217

您需要传递密钥才能删除属性：

```
for ( var i in obj ){
    if ( obj[i].length == 0 ) {
        delete i
    }
} 
```

# .net - 有效地绘制实时波形

> ID：14569115
> 
> 赞同：3
> 
> 时间：2013-01-28T18:56:36.663
> 
> 标签：.net, wpf, performance, graph, plot

我正在使用以下 XAML 在 WPF 中绘制波形：

```
<Canvas>
    <Path Stroke="Black" StrokeThickness="3">
        <Path.Data>
            <PathGeometry>
                <PathFigure x:Name="figure" IsClosed="False">
                    <PathFigure.Segments>
                        <PolyLineSegment x:Name="polyline"/>
                    </PathFigure.Segments>
                </PathFigure>
            </PathGeometry>
        </Path.Data>
    </Path>
</Canvas> 
```

我有一个简单的计时器，每 32 毫秒运行一次，它只不过是在行中添加一个随机点：

```
private void dispatcherTimer_Tick(object sender, EventArgs e)
{
     xPos++;
     polyline.Points.Add(new Point(xPos, yPos + ((int)(rnd.NextDouble() * 10) - 5)));
} 
```

这很好用，但只要我用超过 10 行做同样的事情，CPU 使用率就会飙升。

在使用 WPF Profiler (Perforator) 检查应用程序时，我可以看到 WPF 将整个 PathGeometry 标记为“脏区域”，而不是仅仅更新对屏幕的更改。因此，它不会注意到仅更改了一个像素，而是在每次更新时重绘几乎完整的表单。

我不知道这是否是 CPU 使用率过高的原因，但有人可以告诉我如何优化这个（非常简单的）程序，或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:00:30.910

对于实时绘图，您最好使用更底层的东西，它可以让您直接调用简单的绘图操作，这[`DrawingVisual`](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)可能会起作用。

# php - 使用 ajax 将 javascript 变量值移动到 php 变量？

> ID：14569116
> 
> 赞同：0
> 
> 时间：2013-01-28T18:56:40.623
> 
> 标签：php, javascript, ajax

我对编码很陌生，正在创建一个在线系统。系统的一部分我包含了谷歌距离矩阵 API，它是 JavaScript，而我的大部分其他代码是 HTML 或 PHP。不幸的是，我需要将距离（用 JavaScript 计算）放在我的 PHP 代码中，以便我可以使用它。我读到我可以使用 AJAX？我不太确定自己在做什么，但我试了一下。

在包含谷歌地图的页面之前，有一个表格。这意味着我必须使用 SESSION 变量将数据从 Google 页面之前的页面移动到 Google 页面之后的两个页面。这也是我的 Google 脚本获取它的两个位置以找到它们之间的距离的地方。我认为这一切都很好。

谷歌页面上的 PHP：

```
$date = $_POST['date'];
$time = $_POST['time'];
$length = $_POST['length'];
$numberofpeople = $_POST['numberofpeople'];
$useofbus = $_POST['useofbus'];

session_start();
$_SESSION['time'] = $time;
$_SESSION['date'] = $date;
$_SESSION['length'] = $length;
$_SESSION['numberofpeople'] = $numberofpeople;
$_SESSION['pickuplocation'] = $pickuplocation;
$_SESSION['destination'] = $destination;
$_SESSION['useofbus'] = $useofbus;

$pickuplocation = $_POST['pickuplocation'];
$destination = $_POST['destination']; 
```

Google 页面上的 HTML：

```
</head>
<body onload="initialize()">
<div id="inputs">
  <pre class="prettyprint">
   </pre>
<form name="google" action="thirdform.php">
<table summary="google">

  <tr>
<td>&nbsp;</td>
<td><input name="Continue" value="Continue" type="submit" ></td>
<td>&nbsp;</td>
</tr> 

</table>
</form> 
</div>
<div id="outputDiv"></div>
<div id="map"></div>
</body>
</html> 
```

除了 AJAX 之外，我不会发布 Google Matrix 的 JavaScript：

```
var distance = results[j].distance.text;
$.get("thirdform.php", {miles:distance} ); 
```

我不确定上面的代码是否正确，我猜我在某个地方出错了，可能在这里。在下一页，（thirdform.php）PHP：

```
session_start();
$time = $_SESSION['time'];
$date = $_SESSION['date'];
$length = $_SESSION['length'];
$numberofpeople = $_SESSION['numberofpeople'];
$pickuplocation = $_SESSION['pickuplocation'];
$destination = $_SESSION['destination'];
$useofbus = $_SESSION['useofbus'];

var_dump($_SESSION);

echo "</br>";
$distance = $_GET['miles'];

echo "DISTANCE: " . $distance . "</br>"; 
```

我无法在 PHP 变量 $distance 中得到任何东西——它是空的。我编码不正确吗？我从该网站的某个地方在线跟踪了一个声称可以工作的示例。我已经阅读了几篇文章并在谷歌和这个网站上进行了搜索，但似乎在任何不太复杂且与我正在尝试做的事情相关的地方都没有明确的答案。我已经阅读了很多示例，但它们都太复杂了，我无法使用和更改以放入我的代码中。我阅读了一些代码，页面被直接发送到下一页，但是我需要在我的页面上显示谷歌地图，因此需要使用按钮移动到下一页。

谁能给我一个正确的方向？谢谢。

JS：

```
<script>

  var map;
  var geocoder;
  var bounds = new google.maps.LatLngBounds();
  var markersArray = [];

  var origin = '<?php echo $pickuplocation; ?>';
  var destination = '<?php echo $destination; ?>';

  var destinationIcon = 'https://chart.googleapis.com/chart? chst=d_map_pin_letter&chld=D|FF0000|000000';
  var originIcon = 'https://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=O|FFFF00|000000';

  function initialize() {
    var opts = {
      center: new google.maps.LatLng(55.53, 9.4),
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById('map'), opts);
    geocoder = new google.maps.Geocoder();
    calculateDistances()
  }

  function calculateDistances() {
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix(
      {
        origins: [origin],
        destinations: [destination],
        travelMode: google.maps.TravelMode.DRIVING,
        unitSystem: google.maps.UnitSystem.IMPERIAL,
        avoidHighways: false,
        avoidTolls: false
      }, callback);
  }

  function callback(response, status) {
    if (status != google.maps.DistanceMatrixStatus.OK) {
      alert('Error was: ' + status);
    } else {
      var origins = response.originAddresses;
      var destinations = response.destinationAddresses;
      var outputDiv = document.getElementById('outputDiv');
      outputDiv.innerHTML = '';
      deleteOverlays();

      for (var i = 0; i < origins.length; i++) {
        var results = response.rows[i].elements;

        addMarker(origins[i], false);
        for (var j = 0; j < results.length; j++) {
          addMarker(destinations[j], true);
          outputDiv.innerHTML += origins[i] + ' to ' + destinations[j]
              + ': ' + results[j].distance.text + ' in '
              + results[j].duration.text + '<br>';
        }
      } 
    }
  }

  function addMarker(location, isDestination) {
    var icon;
    if (isDestination) {
      icon = destinationIcon;
    } else {
      icon = originIcon;
    }
    geocoder.geocode({'address': location}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        bounds.extend(results[0].geometry.location);
        map.fitBounds(bounds);
        var marker = new google.maps.Marker({
          map: map,
          position: results[0].geometry.location,
          icon: icon
        });
        markersArray.push(marker);
      } else {
        alert('Geocode was not successful for the following reason: '
          + status);
      }
    });
  }

  function deleteOverlays() {
    if (markersArray) {
      for (i in markersArray) {
        markersArray[i].setMap(null);
      }
      markersArray.length = 0;
    }
  }

  </script>

  <script type="text/javascript">

  var distance = results[j].distance.text;

  $('.button-class').click(function() { $.get("thirdform.php", {miles:distance},   function (data){alert(data)} ); });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:35:46.763

Since you are overriding the form action with the `$.get`, try removing the form and using a `<button>` instead of an `<input>` button.

Then have your ajax request run on that `<button>`.

Edit: It's also worth noting that you should probably just send data from the php file. You can then do any other manipulation("DISTANCE: ", "`<br />`") in the html/js.

# hibernate - 在 web 应用程序中定期更新 hibernate 中的缓存

> ID：14569124
> 
> 赞同：0
> 
> 时间：2013-01-28T18:57:26.063
> 
> 标签：hibernate, jakarta-ee, servlets, ehcache

我正在使用 Hibernate 从三个表中获取数据。其中，table1 很少更新（一周一次），table2&table3 经常更新（8 小时一次）。我在我的 Web 应用程序中只对这些数据进行读取操作。我想在后台更新这些对象的缓存，表 1 的频率为 1 天，表 2 和表 3 的频率为 1 小时。如何使用 Hibernate、servlet 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:32:57.830

你用的是二级缓存吗？您可以使用线程池设置计时器或安排任务。让计时器执行的代码使用 Hibernate 的 Cache api（从 Session 公开）来使各种 2 级缓存无效。

# html - 使用 em 调整字体大小 - 如果 base-size = 0 会怎样？

> ID：14569127
> 
> 赞同：2
> 
> 时间：2013-01-28T18:57:31.890
> 
> 标签：html, font-size, css, em

> **可能重复：**
> [内联块列表项中不需要的边距内联块列表项](https://stackoverflow.com/questions/4969082/unwanted-margin-in-inline-block-list-items)
> [之间的空格](https://stackoverflow.com/questions/5256533/a-space-between-inline-block-list-items)

为了避免`li`设置为之间的差距`display: inline-block`，我将 的字体大小设置`ul`为 0。因此，em 大小调整的性质，0 现在作为 all 的基本字体大小传递`li`，这实际上意味着一个人看不到他们。

有没有办法在不设置`font-size: 14px`（例如）列表项的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:05:56.537

> 只是浮动它们也许它们根本不需要内联块，也许它们可以以一种或另一种方式浮动。这允许您设置它们的宽度和高度以及填充和东西。您只是不能像通过 text-align: center; 那样将它们居中。inline-block 元素的父级。

看看这个来源：[http ://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

它列出了您的问题的多种解决方案。**避免将字体大小设置为 0**；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:03:45.863

一种解决方案是将注释放入标记中，因此列表元素之间不会有空格，因此您不再需要该 hack：

```
<ul><!--
    --><li>1</li><!--
    --><li>1</li><!--
    --><li>1</li><!--
--></ul> 
```

# ruby - Ruby：读取 xls 文件的内容并获取每个单元格信息

> ID：14569128
> 
> 赞同：1
> 
> 时间：2013-01-28T18:57:40.870
> 
> 标签：ruby, spreadsheet, xls

[这](http://www.stats.gov.cn/tjsj/ndsj/2012/html/C0201e.xls)是 XLS 文件的链接。我正在尝试使用电子表格 gem 来提取 XLS 文件的内容。特别是，我想收集所有列标题，如（年份、国民生产总值等）。但是，问题是它们不在同一行。例如，国民总收入由三行组成。我还想知道合并了多少行单元格以使单元格为“年”。

我已经开始编写程序，我已经做到了：

```
require 'rubygems'
require 'open-uri'
require 'spreadsheet'

rows = Array.new
url = 'http://www.stats.gov.cn/tjsj/ndsj/2012/html/C0201e.xls'
doc = Spreadsheet.open (open(url))
sheet1 = doc.worksheet 0
sheet1.each do |row|
      if row.is_a? Spreadsheet::Formula
          # puts row.value
          rows << row.value
     else
          # puts row
          rows << row
     end
  # puts row.value
end 
```

但是，现在我被困住了，真的需要一些指导来继续。任何形式的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:45:44.013

```
require 'rubygems'
require 'open-uri'
require 'spreadsheet'

rows = Array.new
temp_rows = Array.new
column_headers = Array.new
index = 0
url = 'http://www.stats.gov.cn/tjsj/ndsj/2012/html/C0201e.xls'
doc = Spreadsheet.open (open(url))
sheet1 = doc.worksheet 0
sheet1.each do |row|
   rows << row.to_a
end

rows.each_with_index do |row,ind|
  if row[0]=="Year"
    index = ind
    break
  end
end

(index..7).each do |i|
  # puts rows[i].inspect
  if rows[i][0] =~ /[0-9]/
    break 
  else
    temp_rows << rows[i]
  end 
end

col_size = temp_rows[0].size
# puts temp_rows.inspect

col_size.times do |c|
  temp_str = ""
  temp_rows.each do |row|
    temp_str +=' '+ row[c] unless row[c].nil?
  end
  # puts temp_str.inspect
  column_headers << temp_str unless temp_str.nil?
end
puts 'Column Headers of this xls file are : '
# puts column_headers.inspect
column_headers.each do |col|
  puts col.strip.inspect if col.length >1
end 
```

# postgresql - 如何判断 postgres 是否安装了 kerberos？

> ID：14569130
> 
> 赞同：2
> 
> 时间：2013-01-28T18:57:44.427
> 
> 标签：postgresql, kerberos

我正在尝试配置 postgres (8.4.13) 以使用 Kerberos。我似乎无法让它工作。我一直在阅读的一个“陷阱”是 postgres 必须在 kerberos 支持下构建。好吧，我拥有的 postgres 是从 Internet 下载的 rpm。我如何判断这个 postgres 是否是在 Kerberos 支持下构建的？有没有办法列出“已安装的组件？谢谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:59:57.117

[`pg_config`](http://www.postgresql.org/docs/8.3/static/app-pgconfig.html)可能会有所帮助，例如：

`pg_config --configure`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:09:09.543

一些二进制文件具有类似命令的选项，可让您查看它们是如何编译的。我不确定postgres是否会这样做。您可以使用 --version （但这通常非常简约）和 --describe-config 将转储如下值：

```
Security and Authentication    STRING  FILE:/usr/local/etc/postgresql/krb5.keytab 
                 Sets the location of the Kerberos server key file 
```

如果为 postgresql 安装配置了 kerberos 功能。

许多打包系统也有捕获传递给构建过程的编译时间选项的方法（`pkg info -f`例如，FreeBSD 就是这样做的）。自从我使用 rpm 以来已经有一段时间了，较新的版本可能有直接在二进制文件上进行此类查询的方法。在我管理的基于 rpm 的系统上，我会将手头的 src.rpm 和 .spec 文件保存在每个已安装应用程序的本地存储库中。这是为了遵守内部“政策”:-) 并跟踪配置和 OPTFLAGS 设置、构建中使用的源代码等。

以下是对类似问题的回复：

[https://serverfault.com/questions/36037/how-can-i-find-what-options-an-rpm-was-compiled-with](https://serverfault.com/questions/36037/how-can-i-find-what-options-an-rpm-was-compiled-with)

查看二进制文件链接到哪些库的通用 UNIX 方法是使用“ldd”，如下所示：

```
$~/ ldd /usr/local/bin/postgres                              
/usr/local/bin/postgres:
    libgssapi.so.3 => /usr/local/lib/libgssapi.so.3 (0x800a38000)
    libxml2.so.5 => /usr/local/lib/libxml2.so.5 (0x800b74000)
    libpam.so.5 => /usr/lib/libpam.so.5 (0x800dc4000)
    libssl.so.6 => /usr/lib/libssl.so.6 (0x800ecc000)
    libcrypto.so.6 => /lib/libcrypto.so.6 (0x80101f000)
    libm.so.5 => /lib/libm.so.5 (0x8012bf000)
    libc.so.7 => /lib/libc.so.7 (0x8013df000)
    libintl.so.9 => /usr/local/lib/libintl.so.9 (0x801621000)
    libheimntlm.so.1 => /usr/local/lib/libheimntlm.so.1 (0x80172a000)
    libkrb5.so.26 => /usr/local/lib/libkrb5.so.26 (0x801830000)
    libheimbase.so.1 => /usr/local/lib/libheimbase.so.1 (0x8019ad000)
    libhx509.so.5 => /usr/local/lib/libhx509.so.5 (0x801ab1000)
    libwind.so.0 => /usr/local/lib/libwind.so.0 (0x801bf9000)
    libsqlite3.so.8 => /usr/local/lib/libsqlite3.so.8 (0x801d21000)
    libasn1.so.8 => /usr/local/lib/libasn1.so.8 (0x801ec3000)
    libcom_err.so.2 => /usr/local/lib/libcom_err.so.2 (0x802058000)
    libiconv.so.3 => /usr/local/lib/libiconv.so.3 (0x80215b000)
    libroken.so.19 => /usr/local/lib/libroken.so.19 (0x802358000)
    libcrypt.so.5 => /lib/libcrypt.so.5 (0x802469000)
    libthr.so.3 => /lib/libthr.so.3 (0x802589000)
    libz.so.5 => /lib/libz.so.5 (0x8026a2000) 
```

正如您在我的系统上看到的，postgresql 二进制文件与 libkrb5.so.26、libgssapi.so.3、libheimntlm.so.1 等链接（这些是 Heimdal Kerberos 库）。

[编辑：我仍然认为 Milen 的响应很可能是最好、最彻底和推荐的方法，但我今天遇到了一个警告：在我的大多数系统（其中大部分是 FreeBSD）上，pg_config 似乎与 postgresql-client 一起安装pkg 等可能会设置与构建 postgresql-server 时选择的选项不同的选项。我倾向于在客户端中构建大量功能，以便它们可以连接到通常在不同机器上运行的一系列服务器。带有客户端命令行 shell 和库（大多数基于 RPM 或 Linux 系统中的 postgresql-devel）的包为连接到数据库服务器的 python、perl 等数据库模块和库提供了功能。当您有一个在数据库后端抓取和存储数据 (CRUD) 的 Web 应用程序时，客户端库通常驻留在单独的主机上。也就是说，最有可能的二进制客户端/服务器/开发包是使用相同的选项集构建的；-) 无论如何，只是另一个数据点......干杯。]

希望有帮助。

干杯，

# json - 在 wcf 休息模板 40 中省略空值/默认值

> ID：14569133
> 
> 赞同：1
> 
> 时间：2013-01-28T18:57:52.110
> 
> 标签：json, wcf, rest

我有一个使用 WCF REST 模板 40 的 Web 服务。我的数据设置方式，没有任何`[DataContract]`属性`[DataMember]`，它只是类及其公共属性。例子：

```
public class Permission : ServiceClass
{        
    public int       PermissionID          { get; set; }
    public string    PermissionName        { get; set; }
    public string    PermissionCode        { get; set; }
    public string    PermissionDescription { get; set; }
    public bool      IsActive              { get; set; }
    public DateTime? StartDate             { get; set; }
    public DateTime? EndDate               { get; set; }
    public int       SystemID              { get; set; }
} 
```

这很好用，除非一个属性为空，例如两个 DateTime 对象，json 仍然包含这些值。我希望它们被省略。我试图添加`[DataMember(EmitDefaultValue=false)]`and `[DataMember(IsRequired=true)]`（我在读入时没有使用默认的序列化程序，所以我认为我不需要它）但它似乎不起作用。有没有人有这方面的经验并知道某种解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:39:31.277

`[DataMember]`仅当类也用`[DataContract]`. 你可以这样做，但是一旦你进入数据契约路由，那么序列化就变成了一个“选择加入”模型：你还需要用 [DataMember] 声明其他成员：

```
[DataContract]
public class Permission : ServiceClass
{
    [DataMember]
    public int       PermissionID          { get; set; }
    [DataMember]
    public string    PermissionName        { get; set; }
    [DataMember]
    public string    PermissionCode        { get; set; }
    [DataMember]
    public string    PermissionDescription { get; set; }
    [DataMember]
    public bool      IsActive              { get; set; }
    [DataMember(EmitDefaultValue = false)]
    public DateTime? StartDate             { get; set; }
    [DataMember(EmitDefaultValue = false)]
    public DateTime? EndDate               { get; set; }
    [DataMember]
    public int       SystemID              { get; set; }
} 
```

此外，由于此合同现在是数据合同模型的一部分，因此您的基本类型（ServiceClass）可能也必须更改才能使用数据合同。

# python - 定义一个 xml 来表示图形的邻接列表？

> ID：14569137
> 
> 赞同：1
> 
> 时间：2013-01-28T18:58:10.353
> 
> 标签：python, xml, graph, xml-parsing, adjacency-list

我正在研究一个 python 图形库，我正在使用邻接列表。我正在考虑使用 xml 来表示邻接列表，这样我就可以更轻松地存储到图形或从图形中读取。对于这样的图表：

```
 A
  |\
  | \
  |  \
  B---C 
```

邻接看起来像

A:[B,C]

B:[A,C]

出租车]

问题来了，怎么转换成xml呢？我的 xml 知识（非常）有限，所以我的看起来像：

```
<graph>
     <node>
     A
     <realtedto>[B,C]</relatedto>
     </node>
     ...
</graph> 
```

你觉得这合适吗？此外，您将如何处理图表可能不简单或方向性的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:15:49.363

Welp，您可以像这样存储您的链接：

```
<graph>
 <node id="A" />
 <node id="B" />
 <node id="C" />
 <links>
  <link first="A" second="B" />
  <link first="A" second="C" />
 </links>
</graph> 
```

但是，那你有奇怪的情况，比如“A、B 和 B、A 一样吗”？如果您正在查找。我可能永远不会采用上述方式。另一方面，如果你这样做，你就不会存储重复的信息。（可能，如果您验证以防止逆转）。如果它是有向图，那么该副作用可能是一个特征，因为在这种情况下 A,B与 B, **A**不同。

请记住，xml 将事物隐式存储在层次结构中，并且图不一定是没有转换的层次结构，因此不可能在没有某种扭曲的情况下“直接”表示。我可能会做这样的事情：

```
<graph>
<node id="A">
  <neighbors>
   <neighbor id="B" />
   <neighbor id="C" />
  </neighbors>
</node>
<node id="B">
  <neighbors>
   <neighbor id="A" />
  </neighbors>
</node>
<node id="C">
  <neighbors>
   <neighbor id="A" />
  </neighbors>
</node>
</graph> 
```

不幸的是，您有重复的信息，但是您解决了排序问题，如果您反序列化它，您总是可以参考节点的邻居进行遍历。如果你想让它成为一个有向图，你可以 `<neighbors>`分成`<inlets>`and `<outlets>`。或者`<neighbor>`，如果您不关心能够向后遍历，则只需在出口侧进行标记。

如果您希望能够遍历您的链接，您可以结合这两种方法。

这一切都归结为您希望数据具有的功能。

# java - JLabel.setBackground（颜色颜色）不起作用？

> ID：14569138
> 
> 赞同：19
> 
> 时间：2013-01-28T18:58:13.260
> 
> 标签：java, swing, colors

在此 SSCCE 代码中：

这种方法有效

`label.setForeground(Color.GREEN);`

但是下一个方法不起作用！

`label.setBackground(Color.BLUE);`

```
import java.awt.*;
import javax.swing.*;

public class LabelColorTest extends JPanel
{

    static JLabel label;
    JPanel panel;

    public LabelColorTest()
    {
        label = new JLabel();
        label.setVerticalAlignment(JLabel.CENTER);
        label.setHorizontalAlignment(JLabel.CENTER);
        label.setText("Hello world");

        panel = new JPanel();
        panel.setLayout(new BorderLayout());
        panel.add(label, BorderLayout.CENTER);

        label.setForeground(Color.GREEN);  //HERE
        label.setBackground(Color.BLUE);  //HERE

        this.setLayout(new BorderLayout());
        this.add(panel);
    }

    private static void createAndShowGUI()
    {
        JFrame frame = new JFrame("Hellow world");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 250);
        frame.add(new LabelColorTest(), BorderLayout.CENTER);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                UIManager.put("swing.boldMetal", Boolean.FALSE);
                createAndShowGUI();

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-28T19:01:19.740

一个组件必须是不透明的，它的背景才有效，一个 JLabel 的默认值为 false，所以你必须设置它：

```
label.setOpaque(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:01:40.643

您需要先将标签设置为不透明。否则，它不会被涂上。看看：[如何设置一个JLabel的背景色？](https://stackoverflow.com/questions/2380314/how-do-i-set-a-jlabels-background-color)

# scala - 比较 Option[T] 的实例避免 None == None

> ID：14569141
> 
> 赞同：14
> 
> 时间：2013-01-28T18:58:22.223
> 
> 标签：scala

昨天我突然被启发并理解了人们如何以及为什么使用带有 Option 的“map”方法来比较值。是的，我有点慢，对不起:)

我修改了这些非常好的链接并提出了我想问的问题。

[http://twitter.github.com/effectivescala](http://twitter.github.com/effectivescala)

[http://blog.tmorris.net/posts/scalaoption-cheat-sheet](http://blog.tmorris.net/posts/scalaoption-cheat-sheet)

在我的 Lift webapp 中，我有一些 Option[User] 和 Option[Server] 变量。我正在尝试通过以下检查确定此用户是否是此服务器的管理员

```
if(user.map(_.id) == server.map(_.adminId)) 
```

但我注意到，如果“用户”为“无”且“服务器”也为“无”，则此检查成功，这对我不利（如果其中任何一个为“无”，我希望此检查失败）。我可以添加 user.isDefined 条件，但我觉得有更正确的方法可以做到这一点。你能告诉如何用 Scala 方式完成它吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T19:05:31.117

您可以使用模式匹配来做到这一点（在这种情况下，这可能是最清晰的方法）：

```
(user, server) match {
  case (Some(user), Some(server)) if user.id == server.adminId =>
    // both ids are matching, handle this case here
  case _ =>
    // no match, handle this case here
} 
```

您也可以尝试单线，但在这里我不建议这样做，因为它非常模糊：

```
if ( user.flatMap{ user => server.map(_.adminId == user.id) }.getOrElse( false ) ) {
  // both ids are matching, handle this case here
}
else {
  // no match, handle this case here
} 
```

最后，如果您只需要处理 id 匹配的情况（如果不匹配则什么都不做），使用 for 理解并不是一个太糟糕的选项（没有双关语）：

```
for ( user <- user; server <- server if user.id == server.adminId ) {
  // both ids are matching, handle this case here
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-08T19:51:00.210

为此，我习惯了`exists`/的组合。`contains`

比较同一类型的两个选项时：

```
o1.exists(o2.contains) 
```

在您的情况下，可以使用以下方法应用`map`：

```
user.map(_.id).exists(server.map(_.adminId).contains) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T10:14:57.837

你可以使用 for 理解

```
def isAdmin(server: Option[Server])(user: Option[User]): Boolean = (for {
    s <- server
    u <- user
  } yield (u.id == s.adminId)
).getOrElse(false) 
```

理解会导致`Option[Boolean]`您从中`get`获得价值，或者`false`如果没有价值（`None`根据您的要求，任何选项都是 的情况）

*为什么要咖喱？*

我使方法 curried，因此您可以为特定服务器定义函数，然后重用它来检查许多用户

```
def isMyServerAdmin = isAdmin(Some(myServer)) _

isMyServerAdmin(Some(user1)) = true
isMyServerAdmin(Some(user2)) = false
isMyServerAdmin(None) = false 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-09T10:39:15.467

我们可以使用[`Option#zip`](https://www.scala-lang.org/files/archive/api/current/scala/Option.html#zip[A1%3E:A,B](that:Option[B]):Option[(A1,B)])一个`Option`元组用户/服务器：

```
user zip server exists { case (user, server) => user.id == server.adminId } 
```

其中的行为`Option#zip`是：

```
Some(User(id = "hello")) zip Some(Server(adminId = "world"))
// Some((User("hello"), Server("world")))
Some(User(id = "hello")) zip None        // None
None zip Some(Server(adminId = "world")) // None
None zip None                            // None 
```

并且 where对 .[`Option#exists`](https://www.scala-lang.org/files/archive/api/current/scala/Option.html#exists(p:A=%3EBoolean):Boolean)生成的可选元组应用谓词`zip`。

# jquery - 使用 JQuery 模式对话捕获响应

> ID：14569142
> 
> 赞同：2
> 
> 时间：2013-01-28T18:58:24.160
> 
> 标签：jquery, dialog, modal-dialog, confirmation

我有一个简单的确认对话：

```
 <script type='text/javascript'>
        function confirmPubGL( theForm )
        {
            theForm.submit.disabled = true;
            var r=confirm('Are you sure you want to press the OK button?')
            if (r==true)
            {
                alert('Submitting form data now.');

            } else {
                alert('Nothing happened.')
                theForm.submit.disabled = false;
            }

        }
    </script>   

    <form name='abc' id='abc' method='post' action='feedme.php' onSubmit="return confirmPubGL(this)">
        <input type=hidden name=action  value='submitme'>
        <input type=submit name='submit' value='Click Me!'>
    </form> 
```

我想用 JQuery 的[对话](http://jqueryui.com/dialog/)来修饰它。这些示例看起来很棒，但我没有看到如何在现有形式中使用它。我对 JQuery 还很陌生，所以我忽略了这件事可能非常容易。

```
<script>
    $(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Do it!": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
</script>

    <form name='abc' id='abc' method='post' action='feedme.php' onSubmit="return WhatDoIDoHere()">
        <input type=hidden name=action  value='submitme'>
        <input type=submit name='submit' value='Click Me!'>
    </form>

<div id='dialog-confirm' title='Submit Data?'>
<p><span class='ui-icon ui-icon-alert' style='float: left; margin: 0 7px 20px 0;'></span>You are about to submit data. Are you sure?</p>
</div> 
```

为了将 JQuery 的 Confirmation 示例与上面的表单正确合并，我需要进行哪些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:10:46.087

尝试这个：

```
<script>
    $(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Do it!": function() {
                    var confirmMsg = "Are you sure?";
                    if (confirm(confirmMsg)) {
                        // Send your form
                    } else {
                        $( this ).dialog( "close" );
                    }
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
</script> 
```

**更新：**

对不起，我在后一个答案中的错误。我不明白你的问题。

```
<script>
    function WhatDoIDoHere() {
        $("#dialog-confirm").dialog("open");
    }
</script> 
```

希望这能回答你的问题。

# c - 在 C 中打印出文件名及其大小

> ID：14569148
> 
> 赞同：2
> 
> 时间：2013-01-28T18:58:46.393
> 
> 标签：c, file, printing, size, names

我不确定 C 是否可以做到这一点，但我希望我可以制作一个程序来查看目录，并打印出目录的所有内容以及每个文件的文件大小。正如我希望它看起来像这样（可能）：

> 文件名.txt -- 300 字节
> 
> 文件名2.txt -- 400 字节
> 
> 文件名3.txt -- 500 字节

等等。

到目前为止，我创建了一个可以打开文件的程序，它会打印字节，但它不会读取整个目录，我必须具体说明我想读取哪个文件..（这不是我想）。

这是我到目前为止所拥有的：

```
#include <stdio.h>

int main(){
    FILE *fp; // file pointer
    long fileSize;
    int size;

    // opens specified file and reads
    fp = fopen( "importantcommands.txt", "rw" );

    if( fp == NULL ){
        printf( "Opening file error\n" );
        return 0;
    }

    // uses fileLength function and prints here
    size = fileLength(fp);
    printf( "\n Size of file: %d bytes", size );

    fclose(fp);

    return 0;
}

int fileLength( FILE *f ){
    int pos;
    int end;

    // seeks the beginning of the file to the end and counts
    // it and returns into variable end
    pos = ftell(f);
    fseek (f, 0, SEEK_END);
    end = ftell(f);
    fseek (f, pos, SEEK_SET);

    return end;
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:02:44.323

C当然可以做到——[`ls(1)`](http://www.manpagez.com/man/1/ls/)例如，命令可以，而且它是用C编写的。

要遍历目录，可以使用[`opendir(3)`](http://www.manpagez.com/man/3/opendir/)and[`readdir(3)`](http://www.manpagez.com/man/3/readdir/)函数。不过，让外壳为您做这件事可能更容易。

至于获取文件名，您可以通过将 main 定义为将其作为命令行参数：

```
int main(int argc, char **argv) 
```

命令行参数将从`argv[1]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:03:16.660

看看你是否在[手册页](http://linux.die.net/man/3/opendir)`opendir() / fdopendir()`中使用 linux`readdir()``dirent.h`

一个简单的例子：[SO Post](https://stackoverflow.com/questions/612097/how-can-i-get-a-list-of-files-in-a-directory-using-c-or-c)

```
DIR *dir;  
struct dirent *ent;
if ((dir = opendir ("c:\\src\\")) != NULL) {
  /* print all the files and directories within directory */
  while ((ent = readdir (dir)) != NULL) {
     printf ("%s\n", ent->d_name);
  }
  closedir (dir);
} 
else {
  /* could not open directory */
  perror ("Could not open directory");
  return EXIT_FAILURE;
} 
```

您还可以使用[fstat()](http://linux.die.net/man/2/fstat)系统调用，它可以填写`struct stat` 您想要的任何文件。从中`stat`您可以访问该文件的大小。
请使用这些`man`页面来帮助您。（几乎）所有与 Linux 相关的东西都有非常好的文档记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:05:35.840

要读取目录中的文件列表，请查看[opendir](http://linux.die.net/man/3/opendir)、[readdir](http://linux.die.net/man/3/readdir)、 closedir for Linux

使用[stat](http://linux.die.net/man/2/stat)获取文件的长度。

这些是Linux的

对于 winodws，请参见[http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365200%28v=vs.85%29.asp](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365200%28v=vs.85%29.asp)和链接[http://blog.kowalczyk.info/article/8f /Get-file-size-under-windows.html](http://blog.kowalczyk.info/article/8f/Get-file-size-under-windows.html)将向您展示如何执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:03:12.460

要获取目录中的文件列表，请查找“libc opendir”。要在不打开文件的情况下获取文件的大小，可以使用 fstat。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T23:40:45.900

对于给定的示例（在 Linux 或其他 UNIX 下），需要注意的事项很少。

1.  您只想打印出常规文件的文件名和大小。用于`S_ISREG()`测试`st_mode`字段
2.  如果您还想递归打印子目录下的所有文件，则需要使用`S_ISDIR()`测试目录并注意特殊目录`'.' and '..'`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:20:31.197

这似乎与我最近看到的另一个问题奇怪地相似。无论如何，这是我奇怪的相似答案（对于 Linux，不确定它在 Windows 7 上的表现如何）：

```
#include <stdio.h>
#include <dirent.h>
#include <sys/stat.h>

int main(int argc, char *argv[]) {
    struct stat file_stats;
    DIR *dirp;
    struct dirent* dent;

    dirp=opendir("."); // specify directory here: "." is the "current directory"
    do {
        dent = readdir(dirp);
        if (dent)
        {
            printf("%s  --  ", dent->d_name);
            if (!stat(dent->d_name, &file_stats))
            {
                printf("%u bytes\n", (unsigned int)file_stats.st_size);
            }
            else
            {
                printf("(stat() failed for this file)\n");
            }
        }
    } while (dent);
    closedir(dirp);
} 
```

# iphone - UITabBarController 作为其子视图控制器的委托

> ID：14569153
> 
> 赞同：1
> 
> 时间：2013-01-28T18:59:30.753
> 
> 标签：iphone, objective-c, delegates, interface-builder

我目前有一个情节提要，其中 UITabBarController 的子类链接到 3 个视图控制器。这些视图控制器是 UIViewController 的自定义子类，我添加了一个“委托”属性，因为我需要从主视图控制器（从 .plist 文件中检索）访问一个属性（设置）。这是一个设置类，用于处理从/向该文件读取和写入。

无论如何，我还没有找到如何从 IB 设置他们的委托属性，所以我在代码中添加了这个：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    /* Fetch settings */
    NSString* settingsPath = [[NSBundle mainBundle] pathForResource:@"Settings" ofType:@"plist"];   // Load settings from file
    settings = [[Settings alloc] initWithContentOfFile:settingsPath];

    for (UIViewController<HasDelegate> *c in [self viewControllers]) {
        c.delegate = self;
    }
} 
```

但只有第一个视图控制器（启动应用程序时显示的那个）可以访问它。其他的有一个代表属性的 nil 指针。

这是正确的方法吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:01:40.703

没关系，我访问的是 UINavigationController，而不是它的 rootViewController。我补充说：

```
if([c isKindOfClass:[UINavigationController class]]) {
    NSLog(@"UINavigationController");
    UINavigationController *navC = (UINavigationController*)c;
    [[[navC viewControllers] objectAtIndex:0] setDelegate:self];
} 
```

它就像一个魅力！

# database - 多租户数据库架构

> ID：14569158
> 
> 赞同：9
> 
> 时间：2013-01-28T18:59:39.200
> 
> 标签：database, database-design, architecture, multi-tenant, multiple-databases

我正在构建一个 SAAS 应用程序，我们正在讨论每个客户端一个数据库与共享数据库。我已经阅读了很多，在 SO 中包含了一些主题，但我仍然有很多疑问。

我们的平台应该由每个客户高度定制。（他们应该能够拥有自定义表格并将自定义字段添加到现有表格中）。在这种情况下，多数据库方法似乎很棒。

问题是。我的“用户”表应该在主数据库中还是在每个客户端数据库中？一个用户可能有一个或多个组织，因此它会出现在多个数据库中。另外，国家表等通用表呢？

在主数据库中是有意义的。但是我有很多带有 created_by 字段的表，这些表对用户有一个外键。客户也有一些权限相关的表。

如果有多个数据库，我会失去外键的力量，这意味着对数据库的更多查询。我知道如果它们在同一台服务器中，我可以在数据库之间使用交叉连接，但是我会失去可伸缩性。（我将来可能需要拥有多个数据库服务器）。我对联合表有意见。不确定性能。

我使用的技术是 php 和 symfony 2 框架以及用于数据库的 mysql。

另外，我担心这样一个系统的维护。我们可以创建一些脚本来自动化所有数据库中的模式更改，但是如果我们有 10k 个客户端，这将意味着 10k 个数据库。

您对此有何看法？我的应用程序的主要特征应该是灵活性，所以如果客户需要比基本平台没有的更具体的东西，应该可以为他做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T19:12:34.203

Some classic problems here. Have you ever been to [http://highscalability.com/](http://highscalability.com/)? Some good case studies there.

From personal experience if you try to share clients on one server, you will find that a very successful/active user will take up all the resources of the machine over time. We had one client in a SAAS that destroyed a shared server and we had to move him somewhere else.

I would rip out global enumerations into a service. You can make one central database for things like list of countries, list of states, etc. and put it behind a web service layer. Also in that database you can have user management/managing what server belongs to what user etc. You can make a management portal that reads/writes to this database for managing your user base.

If I was doing a SAAS again, I would start small and wait for the pain to hit. What you really want are good tools to address the scaling issues when they happen. Have some scripts ready to do rolling schema changes across servers (no way to avoid this once you have more than one server). Have scripts to take down machines while you are modifying the schema. Have scripts to migrate a user from a shared server to a dedicated one.

Consider setting up replication from a central database. This would pump down global information that each user partition/database would need without you having to write a lot of code.

But the biggest piece of advice I've seen - and experienced first hand - don't try too hard to build the next Facebook for scale. Start simple and see what actually happens before worrying about major scalability issues. You might be surprised as the user base grows what scales well and what does not.

# ms-access - 访问 Web 数据库迁移、VPN 和远程性能不佳

> ID：14569164
> 
> 赞同：0
> 
> 时间：2013-01-28T19:00:17.297
> 
> 标签：ms-access, networking, vpn

我有一个广泛的问题，我想得到一些建议。

目前，我在我们公司网络的一个共享位置有许多数据库。在办公室时，可以快速访问这些内容（但通过 VPN，速度很慢）。

我们在全国有多个地点，可以访问每个地点的驱动器以提取 excel 表、pdf 等。问题是，访问其他地点的共享驱动器时，Access 应用程序**非常**慢。

除了迁移到 SQL Server 和使用基于 Web 的应用程序之外，还有什么可以提高性能的吗？只是在这里寻找一般建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:40:31.143

VPN 速度慢的原因很好，因为您的 VPN 可能比您的 LAN（局域网）慢 50 到 100 倍。实际上你问了以下问题：

为什么步行到商店比开车到商店要花更长的时间？答：因为你一路走得慢（这里不是真正的火箭科学）。

一些解决方案是：

考虑将后端数据部分移动到 SQL Server。因此，虽然 ADP 正在贬值，但这绝不会影响将 Access 应用程序保留为前端并将表（数据）移动到 SQL 服务器的绝佳选择和建议。

如果您只需要几个表单，那么 Access 2010（和 2013）现在确实支持 Web 发布。这是我的一个 Access 应用程序的视频，请注意在中途我如何切换到在标准浏览器中运行该应用程序：

[http://www.youtube.com/watch?v=AU4mH0jPntI](http://www.youtube.com/watch?v=AU4mH0jPntI)

如前所述，另一个很好的解决方案是使用某种类型的远程桌面解决方案。我解释了为什么您的连接速度很慢，并在此处提供了一些在 WAN 上使用 Access 的建议：

[http://www.kallal.ca//Wan/Wans.htm](http://www.kallal.ca//Wan/Wans.htm)

所以这里的基本问题是你的 VPN 太慢了，而且比你的 LAN 慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:06:27.323

您无法通过 Access 数据库的慢速连接来提高性能。没有服务器向客户端提供记录，因此 Access 必须下载整个数据集才能对其进行操作。不过，您不必拥有基于我们的应用程序。

您可以尝试将 .mdb 转换为 .adp，或访问数据项目。如果成功，您仍将使用 Access 作为客户端，但您的所有数据都将迁移到 SQL Server。对此数据的查询将由服务器处理，您将看到慢速连接的性能大幅提升。

# spring-mvc - spring 3 mvc如何实现测试驱动开发？

> ID：14569165
> 
> 赞同：1
> 
> 时间：2013-01-28T19:00:19.747
> 
> 标签：spring-mvc, tdd

谁能告诉我，春季 3 MVC 的 TDD 涉及的基本和基本步骤是什么。

*   如何迭代开发和测试生命周期？
*   如何区分每次迭代？

请分享您使用 sping 3 MVC 在 TDD 方面的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:54:02.757

Spring-Test-MVC 效果很好 [https://github.com/SpringSource/spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)

将项目分解为可映射到 Scrum 故事和任务的离散 REST 操作。

模拟您的服务或创建实现您的接口的占位符对象。

从红色测试开始，然后填写代码。

# c#-4.0 - 如何在 C# 中检索哈希密码？

> ID：14569170
> 
> 赞同：0
> 
> 时间：2013-01-28T19:00:34.067
> 
> 标签：c#-4.0, asp.net-mvc-4, encryption, pbkdf2, password-hash

**检索/重置密码/忘记密码**的正确方法是什么？

我在 Rfc2898DeriveBytes 类中使用了基于密码的密钥派生函数 2 (PBKDF2)。

```
 public static string HashPassword(string password)
        {
            if (password == null)
            {
                throw new ArgumentNullException("password");
            }

            byte[] salt;
            byte[] subkey;
            using (var deriveBytes = new Rfc2898DeriveBytes(password, SaltSize, Pbkdf2Count))
            {
                salt = deriveBytes.Salt;
                subkey = deriveBytes.GetBytes(Pbkdf2SubkeyLength);
            }

            byte[] outputBytes = new byte[1 + SaltSize + Pbkdf2SubkeyLength];
            Buffer.BlockCopy(salt, 0, outputBytes, 1, SaltSize);
            Buffer.BlockCopy(subkey, 0, outputBytes, 1 + SaltSize, Pbkdf2SubkeyLength);
            return Convert.ToBase64String(outputBytes);
        } 
```

那么重置哈希密码的方法是什么。

# git - 损坏的 git repo 的问题

> ID：14569172
> 
> 赞同：21
> 
> 时间：2013-01-28T19:00:39.647
> 
> 标签：git, git-checkout

我的 git repo 在运行查找和替换命令时损坏（请参阅此处：[Git reset failed after find and replace](https://stackoverflow.com/questions/14564936/git-reset-failing-after-find-and-replace)）。所以我删除了一些 git 告诉我无法访问的包文件。所以我跑了 rm ./.git/index, git reset。运行 git commit 时，我收到以下消息：

```
fatal: corrupt tree sha $someSHA 
```

最后 git fsck，我的工作目录变干净了，我可以提交了。现在的 pb 是当我运行 git checkout some_other_branch 时，我收到了这条消息

```
fatal: unable to read tree $someSHA 
```

（出现的 $someSHA 是一样的）。有人可以帮助我吗？

### 编辑 1：

当我运行 git fsck --full 时，我得到了一系列

```
error: refs/remotes/repo0/master does not point to a valid object!
error: refs/remotes/repo1/new-version does not point to a valid object!
... 
```

然后是一系列

```
broken link from    tree d935b909f76ea92728d71038d0a67384353e65e1
              to    blob 05b97658ebd47fee25b76d80ac76cbd07d77961d
... 
```

然后是一些丢失的斑点......

### 编辑 2：

我跑了 git log --raw --all --full-history --subdir/my-file，我得到了

```
error: refs/remotes/repo0/master does not point to a valid object!
error: refs/remotes/repo1/new-version does not point to a valid object!
...
error: Could not read 9096eb9d9dcbdf15a04e0a7c78a3744936f82ac7
fatal: cannot simplify commit 8dfd8e3d5b698dc979300d93d8e89a757abf6ec6 (because of 9096eb9d9dcbdf15a04e0a7c78a3744936f82ac7) 
```

### 编辑 3：

我跑了`git fsck --full`，我得到了很多行

```
error: packfile .git/objects/pack/pack-fbfd8042e1e96bf5ffff88f9b5a230b8f5e4d4c4.pack does not match index
fatal: packfile .git/objects/pack/pack-fbfd8042e1e96bf5ffff88f9b5a230b8f5e4d4c4.pack cannot be accessed
... 
```

当跑到`git checkout`另一个分支时，我收到了很多消息：

```
error: packfile .git/objects/pack/pack-3e7a0c040a5e3d1c21b91256d583424d82a59706.pack does not match index
warning: packfile .git/objects/pack/pack-3e7a0c040a5e3d1c21b91256d583424d82a59706.pack cannot be accessed
....
fatal: unable to read tree 2ad71d368b65eff0b6fec1ef72c6fdde6e80edad 
```

### 编辑 4：

按照建议的答案，我解压缩了文件，当我签出时，我得到了一些这样的行：

```
error: packfile .git/objects/pack/pack-fbfd8042e1e96bf5ffff88f9b5a230b8f5e4d4c4.pack does not match index
warning: packfile .git/objects/pack/pack-fbfd8042e1e96bf5ffff88f9b5a230b8f5e4d4c4.pack cannot be accesse.... 
```

然后是一系列以

```
 error: Your local changes to the following files would be overwritten by checkout:
.idea_local_work/.name
.idea_local_work/libraries/sass_stdlib.xml
.idea_local_work/scopes/scope_settings.xml
... and then aborting 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T21:00:27.057

首先：备份您的`.git`目录，以防您在此过程中损坏更多内容。然后：

*   放回可用的包文件的最佳版本。
*   对于每个损坏的包文件，运行：

    ```
    mv .git/objects/pack/pack-**yourpack**.pack oldpack
    git unpack-objects -r < oldpack 
    ```

*   运行一遍`git fsck --full`，`git checkout`给我们输出。

*   看起来现在您应该能够签出，但您必须运行`git checkout -f **yourbranch**`，因为您的工作目录中有尚未提交的更改。但是，这些更改会在您运行时丢失`git checkout -f`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-22T21:22:57.130

使用此存储库的另一个 .git 副本中的相同文件重写此文件。

# paypal - notify_url 在 PayPal 中不再工作

> ID：14569173
> 
> 赞同：2
> 
> 时间：2013-01-28T19:00:40.197
> 
> 标签：paypal, paypal-ipn

我有以下付款表格：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="online-store-paypal">
  <input type="hidden" name="cmd" value="_xclick">
  <input type="hidden" name="business" value="kae@kvsites.ie">
  <input type="hidden" name="item_name" value="Purchase made from www.kvsites.ie">
  <input type="hidden" name="item_number" value="6">
  <input type="hidden" name="amount" value="1.00">
  <input type="hidden" name="currency_code" value="EUR">
  <input type="hidden" name="no_shipping" value="1">
  <input type="hidden" name="no_note" value="1">
  <input type="hidden" value="http://www.kvsites.ie/contact-us/Login?onlinestore_iid=6" name="return">
  <input type="hidden" name="notify_url" value="http://www.kvsites.ie/ww.plugins/online-store/verify/paypal.php">
  <input type="hidden" name="bn" value="IC_Sample">
  <input type="image" style="width:68px;height:23px;" src="https://www.paypal.com/en_US/i/btn/x-click-but23.gif" name="submit" alt="Make payments with payPal - it's fast, free and secure!">
  <img width="1" height="1" alt="" src="https://www.paypal.com/en_US/i/scr/pixel.gif">
</form> 
```

相关行是这样的：

```
<input type="hidden" name="notify_url" value="http://www.kvsites.ie/ww.plugins/online-store/verify/paypal.php"> 
```

当我直接访问它时，它（显然）已注册在我的 Web 服务器的访问日志中。

但是，当我实际/使用/表单时，付款成功完成，但 IPN 没有出现在 PayPal 的 IPN 历史页面中，也没有出现在 Apache 的日志中。

这是几个月来完美运行的东西，直到最近才完全停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:20:19.363

Paypal IPN 通知目前已关闭。[参见推特](https://twitter.com/search?q=paypal%20down)。

# javascript - Knockout JS：递增 2 的 foreach

> ID：14569174
> 
> 赞同：4
> 
> 时间：2013-01-28T19:00:41.260
> 
> 标签：javascript, knockout.js

在 Knockout JS 中，是否可以执行`foreach`2 递增的操作？类似于：

```
for (var i = 0; i < array.length; i += 2) {
    // Do stuff
} 
```

我想这样做的原因是因为我需要循环的数据是一个数组而不是一个对象。例子：

```
viewModel = function () {
    this.facets = ["Sample", 100, "Sample 2", 200];
} 
```

但是数据需要这样显示：

```
<ul data-bind="foreach: facets"> <!-- Can this foreach be incremented by 2? -->
    <li>$data[$index]: $data[$index + 1]</li>
</ul> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:08:29.043

您可以为此编写一个自定义绑定处理程序，但我宁愿让模板远离这些丑陋的细节。

我建议写一个[`ko.computed`](http://knockoutjs.com/documentation/computedObservables.html)：

```
function Model() {
    this.data = ko.observableArray(["Sample", 100, "Sample 2", 200])
    this.items = ko.computed(function() {
        var value = [];
        var data = this.data();
        for (var i=0; i<data.length; i+=2) {
            value.push({ key: data[i], value: data[i+1]);
        }
        return value;
    }, this);
}

var model = new Model(); 
```

现在您可以遍历`items`模板中的 并访问`key`和`value`。更新原始`data`数组将自动重建`items`计算出的 observable。

模板代码如下所示：

```
<ul data-bind="foreach: items">
    <li><span data-bind="text: key"></span>: <span data-bind="text: value"></span></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T21:10:05.460

我的重复绑定 ( [https://github.com/mbest/knockout-repeat](https://github.com/mbest/knockout-repeat) ) 允许您指定一个`step`选项。

```
<ul>
    <li data-bind="repeat: {foreach: facets, step: 2}"
        data-repeat-bind="text: facets[$index] + ': ' + facets[$index+1]">
    </li>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:06:08.417

这可能是您正在寻找的：

```
for (var i = 0; i < array.length; i += 2) {
    var sample = array[i];
    var number = array[i+1];
    var display = "<li>" + sample + ": " + number + "</li>" // display this
} 
```

不过，看起来你已经有了它，所以我不确定问题是什么......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:06:11.123

您可以使用函数来创建需要绑定到的结构：

```
 self.arrayFunc = function() {
    var result = [];

    for (var i = 0, length = array.length; i += 2) {
        result.push({first: array[i], second: [i + 1]};
    }

}; 
```

# java - 现代 Java 注释处理

> ID：14569183
> 
> 赞同：7
> 
> 时间：2013-01-28T19:01:15.407
> 
> 标签：java, annotations, annotation-processing

注释处理是否仍然是 Java 6+ 的一个活跃部分，或者它是否已被弃用/不鼓励/过时。如果过时，为什么（为什么不再需要/有用）？如果它仍然非常有用且“活跃”（针对 Java 6+ JDK 开发的新 Java 项目仍然会从中受益），请确认/纠正我对注释处理器如何使用的*理解：*

1.  你创建自己的注释类，比如说`@MyAnnotation`
2.  您标记某些类、方法、字段等`@MyAnnotation`
3.  在构建过程中，您调用自定义`MyAnnotationProcessor`（**如何？**）
4.  处理器扫描您的类路径以查找`@MyAnnotation`
5.  通常，注释处理器会进行动态字节码注入，即时修改/增强已编译的类

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T12:54:55.490

1.  正确的。
2.  正确的。
3.  正确的。通常你会扩展`AbstractProcessor`. 您使用该模式指定您的`MyAnnotationProcessor`类[`ServiceLoader`](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)- 这使得编译器可以发现它。[`Processor`](http://docs.oracle.com/javase/6/docs/api/javax/annotation/processing/Processor.html)Javadoc 包含有关创建此类的一些信息。
4.  正确的。
5.  这部分不正确。注释处理器框架不允许您修改类。作为构建的一部分，您将需要使用一些后编译过程来执行此操作。它允许您做的是创建新文件**。**这些可能是简单的资源、新的 Java 源文件（随后将在同一编译期间被注释处理器需要并符合条件）或 Java 类文件。您还可以对源代码执行自定义检查并将错误写入日志（导致编译失败）。

我希望能解决您的理解问题。

# ios - 放大 scrollViewDidZoom 时的 ContentSize

> ID：14569187
> 
> 赞同：0
> 
> 时间：2013-01-28T19:01:30.663
> 
> 标签：ios, objective-c, xamarin.ios

我在滚动视图中遇到 ContentSize 问题。我有一个滚动视图，其中包含一个与滚动视图大小相同的 ImageView。

我可以完美地捏合和滚动图像。

剩下要做的就是使用 ContentSize。我尝试了很多东西，但似乎每当我捏缩放图像然后滚动图像时，图像周围的空白空间大约是适合图像所需的 5 倍。

我不完全了解 ContentSize 适合的位置以及应该设置的内容。我假设我需要在 scrollViewDidZoom 期间更改它？

我不知道它是如何工作的。我不知道什么时候应该设置它，应该设置什么值。谁能帮我理解这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:05:14.567

您只需要在`contentSize`创建滚动视图时设置它，并且需要为其分配要在其中显示的 UIImage 的大小。之后，您无需执行任何其他操作。

另外，请记住让委托方法`viewForZooming~`返回您的`UIImageView`，您应该一切顺利。

# c++ - 如何编译应用程序以在多个 Glibc 版本上工作

> ID：14569199
> 
> 赞同：4
> 
> 时间：2013-01-28T19:02:04.477
> 
> 标签：c++, glibc, dynamic-linking

我如何编译应用程序以在所有 2.X Glibc 版本上工作？现在我在 2.7 GLibc 版本的机器上编译，但是当我启动 glibc 版本为 2.5 的应用程序时，我有一个错误：

```
./server: /lib64/libc.so.6: version `GLIBC_2.7' not found (required by ./server) 
```

如何编译适用于所有 2.X 版本的应用程序？

编译命令：

```
g++  -o newserver  test.cpp ... -lboost_system -lboost_thread -std=c++0x 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:07:48.240

最简单的方法是在您要支持的机器中使用最古老的 glibc 进行构建。使用 linux 机器，您甚至可以进行完整安装并将其转移到`chroot`您机器上的 ed 环境中：这样，您就无需降级*您的*工作场所。

我很高兴在其他答案中看到更方便的解决方案（如果确实*更方便*：任何涉及 GCC 重建的东西都不符合条件，恕我直言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:08:45.137

我不是专家，但我突然想到，如果应用程序需要使用 glibc 2.5 运行，那么它必须将自己限制在 2.5 中可用的功能，之后就没有了。换句话说，限制使用 2.6 或更高版本中引入的功能。那会有帮助吗？

如果你*真的*需要 glibc 2.7 的特性，那么让它成为目标系统的*明确要求*。您可以放置​​一些代码来检查它运行的系统的 glibc 版本，如果可用版本低于所需版本，则打印/记录一条综合消息并优雅退出。

然而，如果你想扩大你的网络，即计划在广泛的系统上运行你的应用程序，那么使用较低版本（如第 1 段所述）可能会更有成效。

# upload - 我可以使用 Google Cloud Storage 签名 URL 进行可恢复上传吗？

> ID：14569203
> 
> 赞同：12
> 
> 时间：2013-01-28T19:02:35.690
> 
> 标签：upload, google-cloud-storage

使用 Google Cloud Storage，我想向客户传递必要的信息以进行[可恢复的上传](https://developers.google.com/storage/docs/developer-guide#resumable)。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T19:02:35.690

是的，这是可能的。

对于已通过 Cloud Storage 服务身份验证的服务器和希望授予访问权限的客户端，典型的签名 URL 上传工作流程如下所示：

1.  客户端请求签名，以便它可以执行 PUT
2.  [您的服务器使用此处描述](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)`URL`的方法创建并返回签名
3.  客户端使用返回的 PUT`URL`

可恢复的工作流程如下所示：

1.  客户端请求签名，以便它可以执行 PUT
2.  [您的服务器确实使用此处描述](https://developers.google.com/storage/docs/accesscontrol#Signed-URLs)`URL`的方法创建并返回签名
3.  您的服务器发出 POST 请求以启动可恢复上传，如此[处所述](https://developers.google.com/storage/docs/developer-guide#resumable)
4.  您的服务器将 the`URL`和 the都返回`Upload ID`给客户端
5.  客户使用提供的`URL`和`Upload ID`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-17T13:36:27.630

[我刚刚在此处的文档](https://cloud.google.com/storage/docs/accesscontrol#Signed-URLs)中找到了此注释：

> 注意：如果您的用户只是将资源（写入）上传到访问控制的存储桶，您可以使用 Google Cloud Storage 的可恢复上传功能，并避免签署 URL 或需要 Google 帐户。在可恢复上传场景中，您的（服务器端）代码会进行身份验证并启动向 Google Cloud Storage 的上传，而无需实际上传任何数据。启动请求返回一个上传 ID，然后可以在客户端请求中使用该 ID 上传数据。客户端请求不需要签名，因为上传 ID 实际上充当身份验证令牌。如果您选择此路径，请务必通过 HTTPS 传输上传 ID。

所以基本上你不需要签名的网址。上传ID就足够了。程序如下：

1.  客户端请求上传，以便它可以执行 PUT
2.  您的服务器发出 POST 请求以启动可恢复上传。
3.  您的服务器将上传 ID 返回给客户端。
4.  客户端执行 PUT 以使用提供的上传 ID 上传文件。

# java - 在 Java 中使用 Akka 的 REST API

> ID：14569205
> 
> 赞同：11
> 
> 时间：2013-01-28T19:02:36.153
> 
> 标签：java, api, scala, rest, akka

我正在尝试使用 Java 和 Akka 创建自己的基于 REST 的 API。我已经使用 Akka 创建了我的主要算法实现。我的困惑来自于如何实现其中的 REST 部分。我见过的大多数示例和库都是专门针对 Scala 的，我目前正试图远离它。

我认为 Spray 是一个不错的选择，但我认为它应该适用于 Scala。但是，我知道 Scala 编译为 Java 字节码，Java 应该能够调用 Scala，反之亦然。可以用喷雾做到这一点吗？如果是这样，是否有任何工作示例或在线教程？我在任何地方都没有运气。

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T18:00:50.767

您可能还想查看 Spray Framework [http://spray.io/](http://spray.io/)。它可能是 Play Framework 的轻量级替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:11:14.127

我建议您使用 playframework 2.0。它已经与 akka 集成，您可以选择用 Java 或 Scala 编写代码。实现基于 REST 的 API 将非常容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-25T14:01:53.380

这是一个带有 Jersey 2 Rest Service 的 github 存储库，使用 Akka actor 在基于 Maven 的 Java 项目中进行处理。

[https://github.com/pofallon/jersey2-akka-java](https://github.com/pofallon/jersey2-akka-java)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T19:14:18.913

实际上，我走的是同样的道路：想使用 Akka 来实现基于 REST 的服务，但不想使用 Scala。

Akka 可以与 Play-mini 一起使用，它为您提供类似 Sinatra 的 REST 映射，而无需任何 ui 东西（您不需要）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-14T22:50:43.813

我想你想看看这个：

[https://www.typesafe.com/activator/template/akka-http-microservice](https://www.typesafe.com/activator/template/akka-http-microservice)

> 简单（微）服务，演示如何使用 Akka HTTP 完成 REST 服务的典型任务。项目包括：启动独立的 HTTP 服务器、处理简单的基于文件的配置、日志记录、路由、解构请求、将 JSON 实体解组为 Scala 的案例类、将 Scala 的案例类编组为 JSON 响应、错误处理、向外部服务发出请求、使用模拟进行测试的外部服务。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-28T08:08:24.370

在 akka github 上有一个旧条目 (2010) 用于 akka-sample-rest-java 示例，这将非常有趣。但是它在以下版本中被删除，不知道为什么。

[https://github.com/akka/akka-modules/tree/v1.0/akka-samples/akka-sample-rest-java/src/main/java/sample/rest/java](https://github.com/akka/akka-modules/tree/v1.0/akka-samples/akka-sample-rest-java/src/main/java/sample/rest/java)

由于没有维护，大多数类都依赖于旧版本的 akka，并且不能与最新版本一起使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-17T09:53:54.430

目前有两种现代微服务和 REST 技术：Vert.x 和 dropwizard

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-10T18:36:15.200

Akka-HTTP 是事实上的 Spray 2.0，因为这个 stackoverflow 线程显示： [Spray、Akka-http 和 Play，这是新 HTTP/REST 项目的最佳选择](https://stackoverflow.com/questions/29228552/spray-akka-http-and-play-which-is-the-best-bet-for-a-new-http-rest-project)

因此，如果您正在寻找 Akka 的基于 REST 的 API，我会选择 Akka-HTTP。

# java - 将 GUI 开发为 Eclipse 插件

> ID：14569206
> 
> 赞同：1
> 
> 时间：2013-01-28T19:02:37.460
> 
> 标签：java, user-interface, eclipse-plugin

[我知道这里](https://stackoverflow.com/questions/3590623/how-to-develop-eclipse-gui-plugins)有一个与此非常相似的主题，但我查看了为它发布的答案，我觉得我的问题略有不同，不需要相同的方法。

我正在开发一个 Eclipse 插件，它本质上是一个 GUI，它为用户提供不同的菜单、按钮、编辑区域等。它被设计成一个多合一的工具来帮助编码、重用代码和重新构建它.

我需要一些指向可用资源的指针，这些资源可以帮助我构建这个 GUI 并将它作为插件提供，这样我就可以开始工作了。我查看了上面链接中的建议，但我觉得我的插件不需要模型、视图、控制器设计模式。我只需要能够在用户启动插件并让他们与之交互时弹出一个 GUI。

非常感谢任何建议或想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:27:50.320

您的 GUI 必须是一个多页编辑器。一页（或多页）GUI，一页代码。

使用“带有多页编辑器的插件”模板开始。

这个[答案](https://stackoverflow.com/a/3590668/300257)应该可以帮助您填写模板代码。

当您有具体问题时，请随时再次提问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:30:22.613

[查看vogella.de](http://www.vogella.com/tutorials.html)上的教程，尤其是[Eclipse 插件部分](http://www.vogella.com/eclipse.html)。这些教程通常非常好。我用它学习了 Eclipse RCP。

# asp.net-mvc - 使用 ScriptIgnore 时的 JavaScriptSerializer 循环引用

> ID：14569207
> 
> 赞同：13
> 
> 时间：2013-01-28T19:02:37.823
> 
> 标签：asp.net-mvc, entity-framework, circular-reference, javascriptserializer

我将我的实体框架实体从我的 Web 项目和数据访问层拆分为一个单独的类库。在我的控制器中，我调用我的存储库以获取一个`IEnumerable<RobotDog.Entities.Movie>`，然后尝试使用序列化为 json，`JavaScriptSerializer`但即使我正在使用该`[ScriptIgnore]`属性，我也会得到一个循环引用。

**重要提示：**最初我的实体、数据访问和网络都在一个项目下，并且我能够在没有循环引用的情况下成功序列化我的实体。当我创建单独的图层时，我开始遇到问题。我没有更改任何实体。

命名空间中我的一个实体的示例`RobotDog.Entities`：

```
namespace RobotDog.Entities {
    public class Character {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        [MaxLength(200)]
        public string Name { get; set; }

        public virtual Person Person { get; set; }

        [ScriptIgnore]
        public virtual Movie Movie { get; set; }
    }
} 
```

我的控制器：

```
namespace RobotDog.Web.Controllers {
    public class MoviesController : Controller {
        private UnitOfWork _unitOfWork = new UnitOfWork();

        [HttpGet]
        public ActionResult Index() {
            var user = Membership.GetUser(User.Identity.Name);
            if(user != null) {
                var movies = _unitOfWork.UserMovieRepository.Get(u => u.UserId == (Guid) user.ProviderUserKey).Select(m => m.Movie);
                var serializer = new JavaScriptSerializer();
                var json = serializer.Serialize(movies);
                return View(json);
            }
            return View();
        }

    }
} 
```

我的仓库：

```
namespace RobotDog.DataAccess.Movies {
    public class Repository<TEntity> : IRepository<TEntity> where TEntity : class {
        internal MovieContext Context;
        internal DbSet<TEntity> DbSet;

        public Repository(MovieContext context) {
            if (context == null)
                throw new ArgumentNullException("context");

            Context = context;
            DbSet = Context.Set<TEntity>();
        }

        public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> predicate = null, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null ) {
            IQueryable<TEntity> query = DbSet;

            if (predicate != null)
                query = query.Where(predicate);

            return orderBy != null ? orderBy(query).ToList() : query.ToList();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-14T12:59:11.317

也许有点迟到了，但我对实体框架代码的 POCO 类也有类似的问题。问题是可能的属性被声明为虚拟的。在这种情况下，EF 创建了覆盖虚拟属性的代理类。似乎 ScriptIgnore 属性默认情况下不会应用于覆盖的属性，除非您像这样使用它：

```
[ScriptIgnore(ApplyToOverrides=true)] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-30T21:14:05.993

圆形对象图不能被 JSON 序列化。当你重新考虑它时，它实际上是有道理的。处理这个问题的正确方法是使用视图模型。您永远不应该将您的域实体直接传递给您的视图。始终定义一个仅包含您想要公开的必要属性的视图模型。

我确信使用这个 JSON 的客户端并不关心这个圆形对象图。因此，只需定义一个视图模型，打破这种循环依赖并仅包含您需要的属性。

然后您所要做的就是将您的域模型映射到视图模型并将此视图模型传递给 JsonResult（是的，这是您代码中的另一个问题 - 您在控制器操作中手动进行 JSON 序列化和编写管道代码，而不是将其委托给框架）。

所以：

```
[HttpGet]
public ActionResult Index() 
{
    var user = Membership.GetUser(User.Identity.Name);
    if(user != null) 
    {
        IEnumerable<Movie> movies = _unitOfWork
            .UserMovieRepository.Get(u => u.UserId == (Guid) user.ProviderUserKey)
            .Select(m => m.Movie);
        IEnumerable<MovieViewModel> moviesVm = ... map the domain model to your view model
        return Json(moviesVm, JsonRequestBehavior.AllowGet);
    }

    // return an empty movies array
    var empty = Enumerable.Empty<MovieViewModel>();
    return Json(empty, JsonRequestBehavior.AllowGet);
} 
```

您现在应该关注的重要事情是定义`MovieViewModel`仅包含您希望以 JSON 形式向客户端公开的信息的类。打破所有循环引用。随意拥有此主视图模型引用的其他视图模型，以便映射其他实体。

最重要的是：永远不要将您的域模型传递给视图。始终定义视图模型。这样，您的应用程序就完全独立于您正在使用的底层数据访问技术。您可以在不影响 UI 部分的情况下随意修改 DAL 层，因为此 UI 由视图模型表示。

# javascript - Thunderbird 扩展：以草稿形式打开 EML 文件

> ID：14569209
> 
> 赞同：0
> 
> 时间：2013-01-28T19:02:39.517
> 
> 标签：javascript, xul, thunderbird, thunderbird-addon

在我在这里[提出第一个问题](https://stackoverflow.com/questions/10984796/thunderbid-extension-open-eml-file)之后，我现在正在寻找一种方法来做同样的事情，但我不想将 EML 作为消息打开，而是将其作为草稿打开。

基本上，我想将生成的 EML 文件加载到撰写窗口中，所以我可以直接发送它。

我已经找到了一些代码，但我找不到有关如何使用它的正确文档

```
var filePath = new FileUtils.File(getPath(params));           
var uri = io.newFileURI(filePath);  

var msgComposeService = Components.classes["@mozilla.org/messengercompose;1"].getService(Components.interfaces.nsIMsgComposeService);
var  messenger = Components.classes["@mozilla.org/messenger;1"].createInstance(Components.interfaces.nsIMessenger);

var hdr = messenger.msgHdrFromURI(uri.spec);
var identity = getIdentityForHeader(hdr, Components.interfaces.nsIMsgCompType.Draft);
var msgWindow = Components.classes["@mozilla.org/messenger/msgwindow;1"].createInstance(Components.interfaces.nsIMsgWindow);
msgComposeService.OpenComposeWindow(null,null,uri,Components.interfaces.nsIMsgCompType.Draft,Components.interfaces.nsIMsgCompFormat.Default,identity,msgWindow); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:45:10.410

我建议将 eml 文件注入本地 Drafts 文件夹以获得 nsIMsgDBHdr，然后`ComposeMessage`使用`Ci.nsIMsgCompType.Draft, Ci.nsIMsgCompFormat.Default, yourMsgHdr.folder, yourMsgHdr'sURI`.

我认为有几个关于如何将给定消息注入文件夹的 StackOverflow 答案。

# ios - TFHpple 提取“firstChild”或“parent”之后的元素

> ID：14569213
> 
> 赞同：0
> 
> 时间：2013-01-28T19:02:50.007
> 
> 标签：ios, objective-c, xpath, hpple

我怎样才能让元素比`firstChild`或`parent`

```
NSString *tutorialsXpathQueryString = @"//table/tr/td/ancestor::table[1]";
//  @"//tr/td/table/tr/td/a"

NSArray *tutorialsNodes = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString];
NSLog(@"here is url: %@", tutorialsNodes);

NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in tutorialsNodes) {
    // 5
    Tutorial *tutorial = [[Tutorial alloc] init];
    [newTutorials addObject:tutorial];

    tutorial.url = [[element parent] objectForKey:@"style"];

    //tutorial.url = [element objectForKey:@"style"];

    //tutorial.url = [[element firstChild] objectForKey:@"style"];

    //tutorial.url = [element tagName];

    tutorial.title = [[element parent] objectForKey:@"title"];

    //tutorial.title = [element objectForKey:@"title"];

    //tutorial.title = [[element firstChild] objectForKey:@"title"];

    //tutorial.title = [[element firstChild] tagName]; 
```

我的数组样本：

```
{\n                   nodeAttributeArray =                                                          (\n         {\n           attributeName = style;\n                                                             nodeContent = \"background-color: #008000; border-style: none;\";\n                                                          },\n                                                                                                                 {\n                                                            attributeName = border;\n                                                              nodeContent = 0;\n                                                        },\n                                                                                                                  {\n                                                            attributeName = cellpadding;\n                                                              nodeContent = 2;\n                                                        },\n                                                                                                                  {\n                                                            attributeName = cellspacing;\n                                                              nodeContent = 2;\n                                                        }\n                                                      );\n                                                    nodeChildArray =                                                       (\n                                                                                                                   {\n                                                            nodeChildArray =                                                              (\n                                                                                                                                 {\n                                                                    nodeChildArray =                                                                      (\n            },\n                                                                                                                                                                {\n                                                                                    attributeName = border;\n                                                                                    nodeContent = 0;\n                                                                                },\n                                                                                                                                                                {\n                                                                                    attributeName = src;\n                                                                                    nodeContent = \"https://spacer.gif\";\n                                                                                },\n                                                                                                                                                                {\n                                                                                    attributeName = title;\n                                                                                    nodeContent = \"07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2\";\n                                                                                },\n                                                                                                                                                                {\n                                                                                    attributeName = alt;\n                                                                                    nodeContent = \"07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2\";\n                                                                                }\n                                                                            );\n                                                                            nodeName = img;\n                                                                        }\n                                                                    );\n                                                                    nodeName = td;\n                                                                },\n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:16:21.897

我没有使用 Objective-C 的经验，但请尝试一下。

TFHppleElement 的`parent`属性本身就是一个 TFHppleElement，因此它又具有一个`parent`. 如果你继续通过这些父母，你最终应该找到你正在寻找的节点。例如，让父母提升 2 级：

```
TFHppleElement *table = [[element parent] parent]; 
```

由于您的 XPath 只会定位`td`表下两个级别的 s（实际上，这是它们应该在的唯一位置），因此检索父级的父级应该会为您提供您正在寻找的表。

# asp.net - 如何通过按钮传递一个（或多个）参数

> ID：14569214
> 
> 赞同：0
> 
> 时间：2013-01-28T19:02:50.147
> 
> 标签：asp.net, asp.net-mvc

首先，ASP.NET MVC 对我来说是非常新的（+- 一个月）。

在我看来，我有这个代码

第一个区块

```
<label for="from">Data Inicio</label>
     <input id="from" name="from" type="text" />
<label for="to">Data Fim</label>
     <input id="to" name="to" type="text" /> 
```

第二块

```
<div class="btn-group">
    <button type="button" class="btn btn-primary" onclick="listaC006()">Pesquisa Normal</button>
    <button type="button" class="btn btn-primary"  onclick="flistaC006()">Pesquisa com filtro</button>
 </div> 
```

并且

```
function list() {
        $.ajax(
        {
            type: 'POST',
            url: '/Inscricao/_Lista',
            dataType: 'html',
            cache: false,
            async: true,
            success: function (data) {
                $('#lista').html(data);
            }
        });
    } 
```

为了`<div id="lista"></div>`动态填充这个“”。

是否可以在 onclick 事件中传递“from”和“to”的值（日期选择器）以便使用这些值来执行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:07:25.630

要在您的帖子上传递参数，请将参数添加`data`到您的帖子调用中：

```
function list() {
        $.ajax(
        {
            type: 'POST',
            url: '/Inscricao/_Lista',
            dataType: 'html',
            cache: false,
            async: true,
            data: "{'from': '" + $("#from").val() + "', 'to': '" + $("#to").val() + "' }",
            success: function (data) {
                $('#lista').html(data);
            }
        });
    } 
```

# scala - @Finally 等同于 play 2.0.x？

> ID：14569219
> 
> 赞同：0
> 
> 时间：2013-01-28T19:03:18.227
> 
> 标签：scala, playframework, playframework-2.0

我希望能够在对请求进行日志记录/清理之前向客户端发回响应。

在 play 1.x 中，这可以通过 @Finally 注释来实现。我已经阅读了一些帖子，这些帖子说这些注释已被动作组合所取代，但我不清楚如何使用它来模拟 @Finally 注释。

在我看来，只有在我的自定义操作中的所有逻辑完成后才会返回响应。

我错过了什么，还是在 Play 2.0 中没有办法做到这一点？

[为清晰而编辑] 换句话说，我希望能够在收到请求并发送响应后运行逻辑。所以我希望能够构建表单的时间线：

1.  客户端向我的服务器发送请求
2.  服务器发回 200 响应，客户端收到该响应
3.  服务器进行额外的处理、记录等

在 play 1.x 中，我相信我可以用 @Finally 注释我的附加处理逻辑，并让它像我想要的那样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:48:45.163

Action 组合不足以完成这项工作，但 Action 组合 + Future 或 Action 组合 + Actors 是实现这一目标的好方法。

**动作组合+未来**

生成您的响应，在**异步**上下文中启动您的日志记录/处理，并同时发送结果。

```
def LoggedAction(f: Request[AnyContent] => Result) = Action { request =>
  val result = f(request)
  concurrent.future(myLogAction(request, result))
  result
} 
```

**动作组合+演员**

这是实现这一目标的一种更清洁的方式。与前一种情况一样，生成您的响应，将日志记录/处理事件发送给您的参与者，并同时发送结果。

```
import play.api._
import play.api.mvc._
import play.libs._
import akka.actor._

object Application extends Controller with Finally {
  def index = LoggedAction { r =>
      Ok(views.html.index("Your new application is ready."))
  }
}

trait Finally {
  self: Controller =>

  lazy val logActor = Akka.system.actorOf(Props(new LogActor), name = "logActor")

  def LoggedAction(f: Request[AnyContent] => Result) = Action { request =>
    val result = f(request)         // Generate response
    logActor ! LogRequest(request)  // Send log event to LogActor
    println("-> now send page to client")
    result
  }

  case class LogRequest(request: Request[AnyContent]) 

  class LogActor extends Actor {
    def receive = {
      case LogRequest(req) => {
        println(req.host)
        // ....
      }
    }
  }
}

// Console
-> now send page to client
127.0.0.1:9000 
```

# group-by - TimeGrouper，熊猫

> ID：14569223
> 
> 赞同：23
> 
> 时间：2013-01-28T19:03:20.737
> 
> 标签：group-by, dataframe, pandas

我使用`TimeGrouper`from`pandas.tseries.resample`来总结每月回报到 6M，如下所示：

```
6m_return = monthly_return.groupby(TimeGrouper(freq='6M')).aggregate(numpy.sum) 
```

`monthly_return`就像：

```
2008-07-01    0.003626
2008-08-01    0.001373
2008-09-01    0.040192
2008-10-01    0.027794
2008-11-01    0.012590
2008-12-01    0.026394
2009-01-01    0.008564
2009-02-01    0.007714
2009-03-01   -0.019727
2009-04-01    0.008888
2009-05-01    0.039801
2009-06-01    0.010042
2009-07-01    0.020971
2009-08-01    0.011926
2009-09-01    0.024998
2009-10-01    0.005213
2009-11-01    0.016804
2009-12-01    0.020724
2010-01-01    0.006322
2010-02-01    0.008971
2010-03-01    0.003911
2010-04-01    0.013928
2010-05-01    0.004640
2010-06-01    0.000744
2010-07-01    0.004697
2010-08-01    0.002553
2010-09-01    0.002770
2010-10-01    0.002834
2010-11-01    0.002157
2010-12-01    0.001034 
```

6m_return 就像：

```
2008-07-31    0.003626
2009-01-31    0.116907
2009-07-31    0.067688
2010-01-31    0.085986
2010-07-31    0.036890
2011-01-31    0.015283 
```

但是我想`6m_return`从 7/2008 开始 6m，如下所示：

```
2008-12-31    ...
2009-06-31    ...
2009-12-31    ...
2010-06-31    ...
2010-12-31    ... 
```

在 TimeGrouper 中尝试了不同的输入选项（即 loffset）但不起作用。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-20T09:05:22.900

问题可以通过添加 closed = 'left' 来解决

```
df.groupby(pd.TimeGrouper('6M', closed = 'left')).aggregate(numpy.sum) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-15T20:12:08.290

`TimeGrouper`其他答案中建议的内容已弃用，将从`Pandas`. 它被替换为`Grouper`。因此，您的问题的解决方案`Grouper`是：

```
df.groupby(pd.Grouper(freq='6M', closed='left')).aggregate(numpy.sum) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T15:06:12.010

这是解决似乎是错误的解决方法，但请尝试一下，看看它是否适合您。

```
In [121]: ts = pandas.date_range('7/1/2008', periods=30, freq='MS')

In [122]: df = pandas.DataFrame(pandas.Series(range(len(ts)), index=ts))

In [124]: df[0] += 1

In [125]: df

Out[125]: 
             0
2008-07-01   1
2008-08-01   2
2008-09-01   3
2008-10-01   4
2008-11-01   5
2008-12-01   6
2009-01-01   7
2009-02-01   8
2009-03-01   9
2009-04-01  10
2009-05-01  11
2009-06-01  12
2009-07-01  13
2009-08-01  14
2009-09-01  15
2009-10-01  16
2009-11-01  17
2009-12-01  18
2010-01-01  19
2010-02-01  20
2010-03-01  21
2010-04-01  22
2010-05-01  23
2010-06-01  24
2010-07-01  25
2010-08-01  26
2010-09-01  27
2010-10-01  28
2010-11-01  29
2010-12-01  30 
```

我使用整数来帮助确认总和是否正确。似乎可行的解决方法是在数据框的前面添加一个月，以诱使 TimeGrouper 执行您需要的操作。

```
In [127]: df2 = pandas.DataFrame([0], index = [df.index.shift(-1, freq='MS')[0]])

In [129]: df2.append(df).groupby(pandas.TimeGrouper(freq='6M')).aggregate(numpy.sum)[1:]
Out[129]: 
              0
2008-12-31   21
2009-06-30   57
2009-12-31   93
2010-06-30  129
2010-12-31  165 
```

请注意，决赛`[1:]`是为了修剪第一组。

# c - Stellaris Launchpad LM4F120 上的看门狗配置

> ID：14569224
> 
> 赞同：1
> 
> 时间：2013-01-28T19:03:25.413
> 
> 标签：c, embedded

我尝试在 Stellaris Launchpad LM4F120 上配置看门狗定时器。

代码如下：

```
void configure_watchdog(void) {
    SYSCTL_RCGCWD_R = 0x1; /* Enabling Clock for WD0 */
    WATCHDOG0_LOAD_R = 0xffffffff; /* Setting initial value */
    WATCHDOG0_CTL_R = WDT_CTL_INTEN; /* Enabling interrupt generation */
} 
```

根据数据表，这应该足够了。

问题是控制器总是跌落`FaultISR`并在它之后重置。我不明白为什么。

我究竟做错了什么？

**编辑**：控制器不重置。它只是去`FaultISR`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:02:31.523

当看门狗过期时跳转到 ISR 听起来是正确的行为。您在 ISR 代码中到底在做什么？如果您正在重置 ISR 中的看门狗，那么您不应该看到微控制器自行重置（至少基于您发布的配置代码）。设置看门狗后，重新读取配置寄存器并确保它保持您期望的值。该寄存器中的某些位只能在某些情况下设置，并且您可能没有使用您认为正在使用的设置运行。

您提到您试图将看门狗计时器用作通用递减计数器。你能用其中一个通用定时器代替看门狗吗？当时间到期时，您仍然会收到中断，但常规计时器无法重置整个系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:11:29.897

您必须继续为看门狗提供服务，否则它会超时并调用为该异常设置的任何内容。 `FaultISR`在你的情况下似乎是这样。

如果您希望看门狗在超时时执行其他操作，您需要弄清楚您的特定工具链如何将函数连接到异常源并正确映射您的新函数。

如果您不希望看门狗过期（通常是为了捕获错误代码），那么您需要定期对其进行维护。编译器供应商通常会提供一个函数或内在函数来执行此操作。

# certificate - EJBCA adminweb 授权被拒绝

> ID：14569225
> 
> 赞同：1
> 
> 时间：2013-01-28T19:03:40.957
> 
> 标签：certificate, authorization, ca

我目前正在使用 EJBCA 进行测试，但在访问管理页面时遇到问题。

EJBCA-4.0.13 在 CentOS 6.2 上运行，带有 apache-ant-1.8.4、jboss-5.1.0-GA、mysql 和 mysql-connector-java。安装正常，jboss 服务器日志中没有出现错误，我可以访问 EJBCA 公共网页，网址为：https://:8443/ejbca。虽然我无法使用以下信息访问管理页面（https://:8443/ejbca/adminweb）：

授权被拒绝原因：您的证书已被吊销或无法在数据库中找到。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:36:08.490

这是在`LocalCertificateStoreSessionBean.authenticate`方法中完成的。这可能意味着您没有正确生成 SuperAdmin 证书，或者它已被撤销、超时或由 EJBACA 的 AdminCA 的另一个 CA 颁发。

检查您`superadmin.p12`的：

```
openssl pkcs12 -nokeys -in ./superadmin.p12 -out superadmin.pem
openssl x509 -in ./superadmin.pem -text 
```

# blackberry-webworks - 传感器黑莓10网络

> ID：14569231
> 
> 赞同：0
> 
> 时间：2013-01-28T19:03:58.920
> 
> 标签：blackberry-webworks

我是 BB10 Webworks 的新手……我正在用 dev alpha 的磁力计做一些实验……

我怎样才能让这些工作？我试过了

```
function magCallback(sensor, data) {
   $("#xvalueut").html(data.x);
   $("#yvalueut").html(data.y);
   $("#zvalueut").html(data.z);
   }
   blackberry.event.addEventListener("devicemagnetometer", magCallback); 
```

并没有奏效，我也放入了配置文件，并在 index.html 中`<feature id="blackberry.sensors" />`插入了一个`<script src="local:///chrome/webworks.js" type="text/javascript"></script>`

我希望你能帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:49:57.623

我们的 GitHub 存储库中有一个非常好的示例应用程序，您可能想要签出。它处理您可以通过 BlackBerry WebWorks 访问的所有传感器。

这是链接：[传感器示例应用程序](https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/Sensors)

# sql-server - 带有通配符的 SQL Server WHERE

> ID：14569237
> 
> 赞同：0
> 
> 时间：2013-01-28T19:04:26.487
> 
> 标签：sql-server, sql-server-2008

`where in`SQL Server 2008 中的语句可以使用通配符吗？

例如，我目前有：

```
SELECT something  
FROM myTable  
WHERE    (ORG + '-' + ORGSUB like '5015001-________' or
          ORG + '-' + ORGSUB like '5015018-________' or 
          ORG + '-' + ORGSUB like '_______-________') 
```

我需要这样做：

```
SELECT something  
FROM myTable 
WHERE
   (ORG + '-' + ORGSUB) in( '5015001-________','5015018-________','_______-________') 
```

我将通过存储过程将这些值作为逗号分隔列表传递。还有其他方法可以完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:10:42.550

获取您的逗号分隔列表，将其拆分，然后将其插入临时表中......

然后，您可以在此临时表中使用`LIKE`语句：`JOIN`

```
SELECT something
FROM myTable mt
JOIN #tempTable tt
    ON mt.ORG + '-' + mt.ORGSUB LIKE tt.SearchValue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:10:51.677

为什么你甚至关心`ORGSUB`你的查询（如示例中提供的）？在我看来，您应该重写您的`WHERE`子句以单独查找组件，例如：

```
SELECT something  
FROM myTable  
WHERE ORG IN (5015001, 5015018, ...) 
[add other criteria as appropriate] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:16:01.767

为什么是逗号分隔的列表？

```
DECLARE TYPE dbo.OrgSub AS TABLE(s VARCHAR(32));
GO
CREATE PROCEDURE dbo.SearchOrgSubs
  @OrgSub dbo.OrgSub READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT t.something 
    FROM dbo.mytable AS t
    INNER JOIN @OrgSub AS o
    ON t.ORG + '-' + t.ORGSUB = o.s;
END
GO 
```

现在，您可以将*集合*从 C# 或任何地方传递到存储过程中，而无需先将其形成逗号分隔的列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:15:55.970

您可以创建一个包含`split`函数结果的临时表。

```
SELECT somthing 
from myTable  
    JOIN dbo.Split('5015001-________','5015018-________','_______-________') as Splits 
    on (ORG + '-' + ORGSUB) like Splits.items 
```

# c# - 检查 LINQ to datatable 中的空值

> ID：14569247
> 
> 赞同：0
> 
> 时间：2013-01-28T19:04:59.933
> 
> 标签：c#, linq

我的 Linq 查询是这样的：

```
IEnumerable<Results> subResult = from query in datatable.AsEnumerable()
                              select new Results
                                  {
                                      Name = query.Field<string>("Name"),
                                      Date = query.Field<DateTime?>("Date")
                                  } 
```

在这一个中，“名称”字段中有一些空值，如果有的话，我如何将其设置为零`null`。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:09:10.320

使用 ？？操作员

```
IEnumerable<Results> subResult = from query in datatable.AsEnumerable()
                              select new Results
                              {
                                  Name = query.Field<string>("Name")?? string.Empty,
                                  Date = query.Field<DateTime?>("Date")
                              } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:10:42.783

您是否尝试过合并运算符？[http://msdn.microsoft.com/en-us/library/ms173224.aspx](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

就像是：

```
Name = query.Field<string>("Name") ?? "0" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:20:38.763

以下代码对我有用。你可以试试这个。

```
 class Program
{
    static void Main(string[] args)
    {
        DataTable datatable = new DataTable();
        datatable.Columns.AddRange(new DataColumn[]
            {
               new DataColumn("Name",typeof(System.String)),
               new DataColumn("Date",typeof(System.DateTime))
            });

        datatable.Rows.Add(new object[] { "Sam", DateTime.Now });
        datatable.Rows.Add(new object[] { null, DateTime.Now });

        IEnumerable<Results> subResult = from query in datatable.AsEnumerable()
                                         select new Results
                                             {
                                                 Name = query.Field<string>("Name") ?? "0" ,
                                                 Date = query.Field<DateTime?>("Date")
                                             };
    }
}

class Results
{

    public string Name { get; set; }

    public DateTime? Date { get; set; }
} 
```

# ruby-on-rails - Fedex Freight LTL 使用 active_shipping gem (Rails)

> ID：14569252
> 
> 赞同：0
> 
> 时间：2013-01-28T19:05:28.467
> 
> 标签：ruby-on-rails, fedex

很简单的问题...是否`active_shipping`支持 Fedex 货运？我已经看过并且似乎无法在他们的文档中找到答案。

[https://github.com/Shopify/active_shipping](https://github.com/Shopify/active_shipping)

如果我能指出正确的方向，我应该能够弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:25:35.473

请参阅源代码中的以下文件`active_shipping`。

**[`lib/active_shipping/shipping/carriers/fedex.rb`](https://github.com/Shopify/active_shipping/blob/master/lib/active_shipping/shipping/carriers/fedex.rb#L26-L50)**

它列出了多种`FREIGHT`服务类型。

```
"FEDEX_1_DAY_FREIGHT" => "FedEx 1 Day Freight",
"FEDEX_1_DAY_FREIGHT_SATURDAY_DELIVERY" => "FedEx 1 Day Freight Saturday Delivery",
"FEDEX_2_DAY_FREIGHT" => "FedEx 2 Day Freight",
"FEDEX_2_DAY_FREIGHT_SATURDAY_DELIVERY" => "FedEx 2 Day Freight Saturday Delivery",
"FEDEX_3_DAY_FREIGHT" => "FedEx 3 Day Freight",
"FEDEX_3_DAY_FREIGHT_SATURDAY_DELIVERY" => "FedEx 3 Day Freight Saturday Delivery",
# ...
"INTERNATIONAL_PRIORITY_FREIGHT" => "FedEx International Priority Freight",
"INTERNATIONAL_ECONOMY_FREIGHT" => "FedEx International Economy Freight", 
```

# wpf - 在运行时更改数据模板

> ID：14569255
> 
> 赞同：1
> 
> 时间：2013-01-28T19:05:40.380
> 
> 标签：wpf

我需要将数据模板包装在运行时构建的数据模板中。包装的数据模板是 WPF 元素，因为包装模板需要在代码中创建。就像是：

```
 public DataTemplate GetTemplate(DataTemplate template)
    {
        string xaml = string.Format(@"
<DataTemplate>
    <ContentControl Content=""{{Binding}}"">
        <ContentControl.ContentTemplate>
{0}
        </ContentControl.ContentTemplate>
    </ContentControl>
</DataTemplate>", template);
        return CreateTemplate(xaml);
    } 
```

显然我的数据模板比我上面使用的更复杂。

无论如何，我都不知道要采用现有的 xaml 元素并将其转换为字符串。似乎我可以使用 FrameworkElementFactory 但我看到它被贬低了，这让我觉得我错过了一些明显的东西。

已编辑---

我正在做的是创建一个用户将提供数据模板的控件，但我需要对模板进行更改。也许这个例子会更有意义......

```
 public DataTemplate GetTemplate2()
    {
        // this template would be supplied by the user
        // I'm creating it here as an example
        string t = string.Format(@"
          <DataTemplate>
            <TextBlock Text=""{{Binding Value}}""/>
        </DataTemplate>");
        T = CreateTemplate(t);

        string xaml = string.Format(@"
<DataTemplate>
    <ContentControl Content=""{{Binding}}"">
        <ContentControl.ContentTemplate>
{0}
        </ContentControl.ContentTemplate>
    </ContentControl>
</DataTemplate>", t);
        return CreateTemplate(xaml);
    } 
```

这一切都有效，因为我使用的是字符串模板（例如 t）。但是我需要想办法用实际的DataTemplate（例如T）来做这件事。不幸的是，XamlWriter 无法处理 Binding。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:59:50.433

您可以创建一个 DataTemplate 选择器。在那里，您可以添加逻辑以在运行时构建您的 DataTemplate。您还可以在 DataTemplate 选择器中创建一个dependencyProperty。然后将它在您的 xaml 中绑定到存储在某个支持模型中的 DataTemplate，然后执行任何操作...

这个[链接](http://www.switchonthecode.com/tutorials/wpf-tutorial-how-to-use-a-datatemplateselector)可能是一个很好的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:12:13.687

You can use XamlWriter (the analog to XamlReader) but it has limitations on what can be properly serialized. Things like event handlers and x:Names cause issues.

**UPDATE

Seeing the additional detail I think you should try reversing your approach. Rather than combining the templates using strings and then trying to turn that into the object you want, you can avoid all the weird parsing restrictions by just creating the user's template as a DataTemplate object and then building your own DataTemplate object around it. Your example code is also using 2 Value Paths, which is going to give you .Value.Value on the inner template Text so check to make sure on your real one that you're ending up with the Paths you want. Here's the basics of your example using the objects instead, with the paths updated to expect a String and display its length:

```
DataTemplate T = XamlReader.Parse(string.Format(@"
    <DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>
        <TextBlock Text=""{{Binding}}""/>
    </DataTemplate>")) as DataTemplate;

FrameworkElementFactory controlFactory = new FrameworkElementFactory(typeof(ContentControl));
controlFactory.SetBinding(ContentControl.ContentProperty, new Binding("Length"));
controlFactory.SetValue(ContentControl.ContentTemplateProperty, T);

DataTemplate mainTemplate = new DataTemplate { VisualTree = controlFactory }; 
```

# c# - C# IPv4/IPv6 不可知的套接字侦听器

> ID：14569257
> 
> 赞同：3
> 
> 时间：2013-01-28T19:05:54.990
> 
> 标签：c#, sockets, ipv6, ipv4

我试图弄清楚如何在 C# 中创建一个与协议无关的套接字侦听器——它应该获取 IPv4 和 IPv6 请求。我在 Google 上可以找到的所有内容似乎都是 C。尝试类似于我在 C 中看到的内容，我尝试了以下代码：

```
/*Socket*/ m_sock = null;
/*IPAddress*/ m_addr = null;
/*int*/ m_port = port; /*port passed to function*/
/*int*/ m_listenqueue = listen_queue_size; /*also passed to function, number of pending requests to allow before busy*/
IPAddress[] addrs = Dns.GetHostEntry("localhost").AddressList;
if(family == null) m_addr = addrs[0];
else
{
    foreach(IPAddress ia in addrs)
    {
        if(ia.AddressFamily == family) /*desired address family also passed as an argument*/
        {
            m_addr = ia;
            break;
        }
    }
}
if(m_addr == null) throw new Exception(this.GetType().ToString() + ".@CONSTRUCTOR@: Listener Initailization Error, couldn't get a host entry for 'localhost' with an address family of " + family.ToString());

m_sock = new Socket(m_addr.AddressFamily, SocketType.Stream, ProtocolType.IP);
/*START "AGNOSTICATION LOGIC"... Tried here...*/
if(m_addr.AddressFamily == AddressFamily.InterNetworkV6) //allow IP4 compatibility
{
    m_sock.SetSocketOption(SocketOptionLevel.Tcp, SocketOptionName.AcceptConnection, true);
    /*fails*/ m_sock.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.AcceptConnection, true);
    /*fails*/ m_sock.SetSocketOption(SocketOptionLevel.IPv6, SocketOptionName.AcceptConnection, true);
}
/*END "AGNOSTICATION LOGIC" */
IPEndPoint _endpoint = new IPEndPoint(m_addr, m_port);
m_sock.Bind(_endpoint);
/*... tried here*/
m_sock.Listen(m_listenqueue);
/*... and tried here*/ 
```

我已经在标记的三个地方尝试了逻辑，无论我把它放在哪里，列出的两行都会抛出一个无效的参数异常。

谁能向我推荐我应该如何制作一个同时监听 IPv4/IPv6 的套接字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:49:37.357

您可以使用 sock.SetSockOption(SocketOptionLevel.IPv6, SocketOptionName.IPV6Only, 0); 将套接字设置为允许与 IPv6 以外的其他协议的连接。它将从 Vista 开始工作。

[SocketOptionName 文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketoptionname.aspx)

# linux - 在 Redhat linux 上安装 Selenium Server

> ID：14569259
> 
> 赞同：1
> 
> 时间：2013-01-28T19:05:57.647
> 
> 标签：linux, selenium, redhat, selenium-grid

我正在尝试创建一个 Selenium Grid 项目。我在windows上这样做没问题，但现在我试图在redhat上这样做，我对在哪里下载服务器有点困惑。我的机器是无头的，所以我无法打开浏览器进入 selenium 主页并只需单击下载按钮。

任何人都知道所需的 yum 命令或 wget 路径吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:38:38.277

在 Linux 中使用命令行下载文件的另一种方法。

```
[root@ap4004 tmp]# curl -O http://selenium.googlecode.com/files/selenium-server-standalone-2.28.0.jar
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 31.5M  100 31.5M    0     0  2783k      0  0:00:11  0:00:11 --:--:-- 2802k 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:22:08.717

好的，这很容易。您可以使用

`wget http://selenium.googlecode.com/files/selenium-server-standalone-2.28.0.jar`

获取下载的jar文件。

然后你可以使用它通过命令行设置你的 HUB 和节点。

# eclipse - 拉新远程分支时未创建本地分支（Git）

> ID：14569264
> 
> 赞同：0
> 
> 时间：2013-01-28T19:06:13.150
> 
> 标签：eclipse, git

我在 Eclipse Juno 中使用 EGit 2.1.0。

用户**X**创建并推送了一个分支**FeatureBranch**。下一个用户**Y**从 master 拉取。现在在远程跟踪中，**FeatureBranch**在用户**Y 的**机器上可见。现在用户**Y**想加入在**FeatureBranch**上完成的工作。但是**FeatureBranch**不会自动作为本地分支使用。所以用户**Y**首先需要从远程**FeatureBranch**创建一个本地分支（否则所有提交最终将被视为分离的头）。

为什么用户**Y**必须先从远程分支手动创建本地分支，然后才能提交/推送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:07:29.397

这就是 git 的工作方式。远程分支是只读的。如果你想自动化`git checkout --track`或者你想做的任何事情，你当然可以编写脚本。

# android - 即使我坐在同一个地方，也会调用 onlocationChanged

> ID：14569268
> 
> 赞同：3
> 
> 时间：2013-01-28T19:06:33.473
> 
> 标签：android, google-maps, location

我使用了下面的代码，除了 onLocationChanged 被调用，即使我坐在同一个位置，一切正常。

我认为只有在我向右移动时才应该调用它？

**我只想在移动一定距离后获得位置。**

请帮帮我。提前致谢。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    locationMgr = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
    this);

}

    @Override
       public void onLocationChanged(Location location) {
           Toast.makeText(this, "Working!", Toast.LENGTH_SHORT).show();
                    if (location != null) {
                            double lat = location.getLatitude();
                            double lng = location.getLongitude();

                            String Text = "Latitud = " + lat + "\nLongitud = " +
     lng;

      Toast.makeText(getBaseContext(),Text,Toast.LENGTH_SHORT).show();
                    }
           } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T19:12:51.000

您正在以尽可能短的间隔/距离请求位置更新

```
locationMgr.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
this); 
```

这就是文档中关于这些参数的内容

> " 可以使用 minTime 参数控制位置更新间隔。位置更新之间的经过时间永远不会小于 minTime，尽管它可能更多取决于位置提供程序的实现和其他应用程序请求的更新间隔。"
> 
> minDistance 参数还可用于控制位置更新的频率。如果它大于 0，那么位置提供程序将仅在位置已更改至少 minDistance 米并且至少 minTime 毫秒已过去时向您的应用程序发送更新。然而，位置提供者使用 minDistance 参数来节省电量更加困难，因此 minTime 应该是节省电池寿命的主要工具。

我个人为我的应用程序使用 10 秒和 10 米的 minTime

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000,
                10, locationListener); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:13:36.413

网络位置并不像您想象的那么精确。因此，传感器返回的结果可能会波动。当您考虑到如果您与卫星没有直接视线，GPS 信号会减弱，并且可见卫星的数量也会影响精度时，更是如此。当您开始使用网络提供商时，情况会变得更糟，其中位置是通过蜂窝塔的信号强度以及可见无线网络的数量和 SSID 的三角测量来计算的。由于这些可能会波动很大，因此精度会受到很大影响。有很多平均算法和启发式算法来最小化这种波动，但最终没有什么可以稳定它以达到你期望的那样好。

一个简单的平均和变化过滤可以帮助你。添加基于设备加速度计的校正也有很大帮助，但它会使您的代码更加复杂。

# ruby - 这种行为如何与 Ruby 和 HTTParty 一起使用？

> ID：14569269
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:06:36.810
> 
> 标签：ruby, httparty

我正在学习红宝石。

我有一些代码使用 HTTParty 库来下载一些数据。远程服务器未正确定义内容类型，因此不会自动解析响应（作为 JSON）。

JSON 看起来像这样：

```
{"response":{ ............ }} 
```

在代码中是以下行：

```
if resp['response'] == 'response' 
```

在自动解析响应的情况下，这将按预期运行，并且`{ .......... }`将从原始 JSON 返回。如果它没有被解析，它会返回字符串`response`，我不知道为什么会这样。

HTTParty 库的哪个特性导致它返回字符串`response`？另一个导致纯文本数据的请求在尝试访问时返回 Nil `['response']`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:56:27.410

这就是我现在的理解。`resp['response']`尝试在 resp 对象上调用该方法`[]`，但由于未定义该`method_missing`方法，因此将调用该方法

```
# the method_missing from HTTParty::Response
def method_missing(name, *args, &block)
  if parsed_response.respond_to?(name)
    $stdout.puts parsed_response.class.inspect
    $stdout.puts parsed_response.inspect
    parsed_response.send(name, *args, &block)
  elsif response.respond_to?(name)
    response.send(name, *args, &block)
  else
    super
  end
end 
```

在未解析 JSON 的情况下，`parsed_response`它实际上是一个字符串。Ruby 中的 String 类定义`[]`这样，当给定一个字符串`response`作为参数时，返回相同的字符串，但仅在它存在于整个字符串中的情况下。

由于 JSON 字符串确实包含返回`"response"`的`response`值。

# asp.net-mvc - KendoUI MVC 包装器 - 使用 JSONP

> ID：14569273
> 
> 赞同：0
> 
> 时间：2013-01-28T19:06:54.740
> 
> 标签：asp.net-mvc, kendo-ui

我想将数据源的 READ 操作的 DATATYPE 设置为 JSONP。JavaScript 可以，但是我不知道 ASP.NET MVC Wrapper 是否可以。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:13:07.030

JSONP is auto if your using the asp.net mvc wrapper

# c# - 在 GrapeCity Spread 中保持鼠标位置

> ID：14569277
> 
> 赞同：2
> 
> 时间：2013-01-28T19:07:05.067
> 
> 标签：c#, componentone

我正在使用一个工具 GrapeCity，传播 6.NET (C#)，我给它每 5 秒绑定一次，但是每次回发页面都会返回到鼠标在回发之前的位置。随着回发完成，用户有可能在处理未结束时继续浏览，并在鼠标指针回到开始位置时结束。有什么建议么？

# javascript - 将纪元日期转换为人类可读格式时需要帮助解决问题 - Javascript

> ID：14569278
> 
> 赞同：0
> 
> 时间：2013-01-28T19:07:06.810
> 
> 标签：javascript, date, time, epoch, date-conversion

我的 java 脚本应用程序使用 .net Web 服务从后端获取数据。除了日期/时间转换外，一切正常。我需要将服务返回的纪元日期转换为用户的本地浏览器日期。

Web 服务以以下格式返回日期，

```
/Date(1335341422660-0500)/ 
```

这就是我将其转换为人类可读日期所做的工作，

我去掉连字符 (-) 之后的所有内容，并使用剩余的数据进行日期转换

```
var dateVal=dateField.replace(/-.*\)/g,')');                           
var date = new Date(parseFloat(dateVal.substr(6)));

   var dateArray=date.toString().split(" ");
   if(dateArray.length>3){
  timeZone=("("+dateArray[4])+")"
    }

 var month=date.getMonth() + 1;
 var year=date.getFullYear();
 var date=date.getDate();
 var hours= date.getHours();
 var offset=date.getTimezoneOffset();
 var finalDateStr=(year+"-"+month+"-"+dateValue)+" "+hours+":"+
                            minutes+":"+seconds+" "+timeZone; 
```

对于上述纪元值，预期日期为，

2012 年 4 月 24 日晚上 9:10:22 - 此日期显示在 .net 应用程序中，该应用程序实际上是在创建/更新新项目时将此日期插入 MS SQL 服务器的源应用程序。他们将 SQL 服务器日期转换为本地日期（使用 .net）并在 UI 中显示。

但是当我使用上面的脚本形成日期时，我得到的值是，

2012-4-25 4:10:22 (EDT)（比上述日期多 7 小时）。

我不确定我错在哪里..有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:55:41.220

对于此类日期操作，您可能需要考虑使用[Moment.js](http://momentjs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:10:00.390

不确定这是否是解决此问题的好方法...

这就是我所做的并且似乎工作正常......我再次认为这不是一个万无一失的解决方案，但我检查了不同的时区（有/没有夏令时），它似乎工作......

```
 var dateVal=dateField.replace(/-.*\)/g,')');                           
                            var date = new Date(parseFloat(dateVal.substr(6)));

                            var dateArray=date.toString().split(" ");
                            var timeZone="(Local Time)";
                            if(dateArray.length>3){
                                timeZone=("("+dateArray[4])+")"
                            }
var date2=dateField.split("-");
                     var dateOffset=(date2[1].toString().replace(")","").replace("/",""));

if( date.toString().toUpperCase().indexOf("DT")!==-1){                        
 date.setHours(date.getHours()-(parseFloat(parseFloat(dateOffset).toString().replace(/0*$/, ''))+2));
}else{
 date.setHours(date.getHours()-(parseFloat(parseFloat(dateOffset).toString().replace(/0*$/, ''))+1));
}

                            var month=date.getMonth() + 1;
                            var year=date.getFullYear();
                            var dateValue=date.getDate();
                            var hours= date.getHours();                              
                            var minutes= date.getMinutes();
                            var seconds=date.getSeconds()
                            var finalDateStr=(year+"-"+month+"-"+dateValue)+" "+hours+":"+
                            minutes+":"+seconds+" "+timeZone; 
```

# django - 运行的 PostgreSQL 进程过多（使用 Django 写入数据库）

> ID：14569279
> 
> 赞同：2
> 
> 时间：2013-01-28T19:07:16.493
> 
> 标签：django, postgresql, apache2, connection

我正在使用 Django 写入服务器上的 Postgres DB。服务器每 15 分钟接收大约 800 个插入请求。最近，当我在服务器上运行 ps aux 时，这是我看到的 postgres 进程的数量：

```
postgres  5721  0.0  0.6 102380 27372 ?        Ss   Jan27   0:04 postgres: writer process                                                      
postgres  5722  0.0  0.0 102280  1684 ?        Ss   Jan27   0:01 postgres: wal writer process                                                  
postgres  5723  0.0  0.0 102416  1800 ?        Ss   Jan27   0:03 postgres: autovacuum launcher process                                         
postgres  5724  0.0  0.0  73828  1480 ?        Ss   Jan27   0:12 postgres: stats collector process                                             
root      8621  0.0  0.2 107912  8736 ?        Ss   Jan27   0:03 /usr/sbin/apache2 -k start
www-data  8628  0.0  0.0 104444  3096 ?        S    Jan27   0:00 /usr/sbin/apache2 -k start
www-data  8629  0.0  0.0 104444  2908 ?        S    Jan27   0:00 /usr/sbin/fcgi-pm -k start
www-data  8630  0.0  0.0 105620  2976 ?        S    Jan27   0:00 /usr/sbin/apache2 -k start
www-data 29332  1.2  1.1 471932 47432 ?        Sl   18:45   0:08 /usr/sbin/apache2 -k start
www-data 29350  1.0  1.2 468712 49372 ?        Sl   18:45   0:07 /usr/sbin/apache2 -k start
www-data 29351  1.2  1.2 541820 51836 ?        Sl   18:45   0:08 /usr/sbin/apache2 -k start
postgres 29386  0.1  0.7 104932 31680 ?        Ss   18:45   0:00 postgres: abs ap 127.0.0.1(48450) INSERT                 
postgres 29401  0.1  0.7 104932 29784 ?        Ss   18:45   0:00 postgres: abs ap 127.0.0.1(48463) INSERT                 
postgres 29407  0.1  0.7 105060 29888 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48467) COMMIT                 
postgres 29408  0.1  0.7 104932 31852 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48468) INSERT                 
www-data 29409  1.2  1.0 467728 42204 ?        Sl   18:46   0:07 /usr/sbin/apache2 -k start
postgres 29428  0.1  0.7 105060 31972 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48470) COMMIT                 
postgres 29433  0.1  0.7 104932 31788 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48474) INSERT                 
postgres 29434  0.1  0.7 104932 31908 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48475) COMMIT                 
postgres 29435  0.1  0.7 104932 31836 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48476) COMMIT                 
postgres 29439  0.1  0.7 104932 31736 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48480) COMMIT                 
postgres 29440  0.1  0.7 105060 31352 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48481) COMMIT                 
postgres 29441  0.1  0.7 105056 31960 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48482) COMMIT                 
postgres 29443  0.1  0.7 104932 31248 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48484) COMMIT                 
postgres 29444  0.1  0.7 104932 31976 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48485) COMMIT                 
www-data 29445  1.0  1.0 470256 44348 ?        Sl   18:46   0:06 /usr/sbin/apache2 -k start
postgres 29487  0.1  0.7 104932 32012 ?        Ss   18:46   0:00 postgres: abs ap 127.0.0.1(48487) COMMIT                 
postgres 29489  0.1  0.7 105060 31480 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48489) INSERT                 
postgres 29491  0.1  0.7 104932 31788 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48490) INSERT                 
postgres 29492  0.1  0.7 104932 31944 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48491) INSERT                 
postgres 29496  0.1  0.7 104932 31260 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48493) COMMIT                 
postgres 29499  0.1  0.7 105056 32088 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48495) COMMIT                 
postgres 29502  0.1  0.7 105060 31936 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48497) INSERT                 
postgres 29506  0.1  0.7 104932 31916 ?        Ss   18:47   0:00 postgres: abs ap 127.0.0.1(48501) INSERT                 
postgres 29518  0.1  0.7 104932 31736 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48511) COMMIT                 
postgres 29523  0.1  0.7 104932 31524 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48512) INSERT                 
postgres 29525  0.1  0.6 104932 27776 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48514) COMMIT                 
postgres 29526  0.1  0.7 104932 30992 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48515) COMMIT                 
postgres 29531  0.1  0.7 104932 28992 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48516) INSERT                 
postgres 29532  0.1  0.7 104932 29792 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48517) COMMIT                 
postgres 29533  0.1  0.7 104932 30396 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48518) INSERT                 
postgres 29536  0.1  0.7 104932 31028 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48520) INSERT                 
postgres 29537  0.1  0.7 104932 29264 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48521) INSERT                 
postgres 29542  0.1  0.7 104932 29596 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48525) COMMIT                 
postgres 29543  0.1  0.7 104932 30560 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48526) COMMIT                 
postgres 29545  0.1  0.7 104932 30864 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48528) INSERT                 
postgres 29550  0.1  0.7 104932 30964 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48529) COMMIT                 
postgres 29552  0.1  0.7 104932 31012 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48530) COMMIT                 
postgres 29553  0.1  0.7 104932 31260 ?        Ss   18:48   0:00 postgres: abs ap 127.0.0.1(48531) SELECT                 
postgres 29554  0.1  0.7 104932 30976 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48532) INSERT                 
postgres 29556  0.1  0.7 104932 30084 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48534) INSERT                 
postgres 29557  0.1  0.7 104932 30644 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48535) INSERT                 
postgres 29558  0.1  0.7 104932 30408 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48536) INSERT                 
postgres 29559  0.1  0.7 104932 30048 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48537) INSERT                 
postgres 29560  0.1  0.7 104932 30488 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48538) COMMIT                 
postgres 29561  0.1  0.7 104932 29840 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48539) INSERT                 
postgres 29562  0.1  0.7 104932 30616 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48540) COMMIT                 
postgres 29564  0.1  0.7 104932 30456 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48541) INSERT                 
postgres 29565  0.2  0.7 104932 30612 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48542) COMMIT                 
postgres 29566  0.2  0.7 104932 30512 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48543) INSERT                 
postgres 29567  0.2  0.7 104932 30964 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48544) INSERT                 
postgres 29568  0.2  0.7 104932 30460 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48545) INSERT                 
postgres 29569  0.2  0.7 104932 30684 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48546) INSERT                 
postgres 29571  0.2  0.7 104932 31188 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48548) COMMIT                 
postgres 29572  0.2  0.7 104932 31280 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48549) INSERT                 
postgres 29573  0.2  0.7 104932 30632 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48550) COMMIT                 
postgres 29574  0.2  0.7 104932 30784 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48551) INSERT                 
postgres 29575  0.2  0.7 104932 31060 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48552) INSERT                 
postgres 29576  0.2  0.7 104932 31064 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48553) COMMIT                 
postgres 29577  0.2  0.7 105008 31184 ?        Ss   18:49   0:00 postgres: abs ap 127.0.0.1(48554) INSERT                 
postgres 29578  0.2  0.7 105016 31168 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48555) COMMIT                 
postgres 29579  0.2  0.7 105064 30632 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48556) INSERT                 
postgres 29580  0.2  0.7 105016 31208 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48557) COMMIT                 
postgres 29582  0.2  0.7 104932 31268 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48559) COMMIT                 
postgres 29583  0.2  0.7 104936 31348 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48560) COMMIT                 
postgres 29585  0.2  0.7 104932 31280 ?        Ss   18:50   0:00 postgres: abs ap 127.0.0.1(48561) COMMIT                 
postgres 29586  0.2  0.7 104936 31376 ?        Ds   18:50   0:00 postgres: abs ap 127.0.0.1(48562) COMMIT                 
www-data 29587  1.5  0.8 462216 35916 ?        Sl   18:50   0:05 /usr/sbin/apache2 -k start
postgres 29775  0.2  0.7 104932 30528 ?        Ss   18:51   0:00 postgres: abs ap 127.0.0.1(48722) INSERT                 
postgres 29776  0.2  0.7 104936 31180 ?        Ss   18:51   0:00 postgres: abs ap 127.0.0.1(48723) COMMIT                 
postgres 29777  0.2  0.7 104932 31292 ?        Ss   18:51   0:00 postgres: abs ap 127.0.0.1(48724) INSERT                 
postgres 29944  0.2  0.6 105016 28424 ?        Ss   18:51   0:00 postgres: abs ap 127.0.0.1(48890) COMMIT                 
postgres 30128  0.3  0.7 104936 29836 ?        Ss   18:52   0:00 postgres: abs ap 127.0.0.1(49070) INSERT                 
postgres 30129  0.3  0.7 104932 29444 ?        Ss   18:52   0:00 postgres: abs ap 127.0.0.1(49071) INSERT                 
postgres 30225  0.3  0.7 104932 30020 ?        Ss   18:52   0:00 postgres: abs ap 127.0.0.1(49167) INSERT                 
postgres 30301  0.2  0.7 104932 28884 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49242) COMMIT                 
postgres 30302  0.2  0.6 104932 28136 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49243) COMMIT                 
postgres 30305  0.2  0.6 104936 28116 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49245) COMMIT                 
postgres 30307  0.2  0.7 104936 29852 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49247) COMMIT                 
postgres 30308  0.4  0.7 104932 30512 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49248) INSERT                 
postgres 30309  0.2  0.6 104936 28060 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49249) COMMIT                 
postgres 30312  0.3  0.7 104932 28440 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49252) COMMIT                 
postgres 30327  0.3  0.7 104932 29324 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49267) COMMIT                 
postgres 30328  0.3  0.6 104932 27984 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49268) COMMIT                 
postgres 30375  0.3  0.7 104936 28912 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49314) COMMIT                 
postgres 30378  0.3  0.6 104936 27128 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49317) COMMIT                 
postgres 30381  0.3  0.6 104936 26372 ?        Ss   18:53   0:00 postgres: abs ap 127.0.0.1(49320) COMMIT                 
postgres 30384  0.3  0.6 104932 27720 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49323) COMMIT                 
postgres 30385  0.2  0.6 104416 26980 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49324) COMMIT                 
postgres 30386  0.2  0.6 104416 27104 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49325) INSERT                 
postgres 30387  0.2  0.6 104364 28160 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49326) COMMIT                 
postgres 30389  0.2  0.6 104416 27496 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49327) INSERT                 
postgres 30391  0.2  0.6 104396 27688 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49329) COMMIT                 
postgres 30392  0.2  0.6 104416 28252 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49330) COMMIT                 
postgres 30393  0.2  0.6 104420 28072 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49331) COMMIT                 
postgres 30394  0.2  0.6 104416 28156 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49332) COMMIT                 
postgres 30439  0.2  0.7 104420 28504 ?        Ss   18:54   0:00 postgres: abs ap 127.0.0.1(49377) INSERT                 
postgres 30658  0.0  0.2 104416  8316 ?        Ss   18:55   0:00 postgres: abs ap 127.0.0.1(49596) COMMIT                 
postgres 30896  0.0  0.1 104336  7688 ?        Ss   18:55   0:00 postgres: abs ap 127.0.0.1(49830) COMMIT                 
postgres 30946  0.0  0.1 104220  7272 ?        Ss   18:56   0:00 postgres: abs ap 127.0.0.1(49880) COMMIT                 
postgres 31073  2.5  0.6 104268 25816 ?        Ss   18:56   0:00 postgres: abs ap 127.0.0.1(50006) SELECT                 
1000     31104  0.2  0.0  19296  2068 pts/0    Ss   18:56   0:00 -bash
1000     31134  0.0  0.0  16332  1136 pts/0    R+   18:56   0:00 ps aux
postgres 31135  0.0  0.1 103960  4380 ?        Rs   18:56   0:00 postgres: abs ap 127.0.0.1(50057) startup 
```

似乎我丢失了很多插入，因为有很多进程正在运行。我经常看到这样的信息：

> psql：致命：超出非超级用户的连接限制

关于可能出现问题的任何想法？为什么进程活动这么长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:50:53.090

您可以将插入内容放在[批量创建](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.bulk_create)中吗？

```
to_insert = []

for item in items:
    to_insert.append(ObjectModel(item=item))

ObjectModel.objects.bulk_create(to_insert) 
```

如果您正在创建@cyroxx 提到的新连接，这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:10:19.713

您的存储似乎无法处理那么多事务。PID 为 29586 的 postgres 进程当前正在等待设备完成请求（它处于“D”状态，这意味着“不可中断的睡眠（通常是 IO）”）并且可能正在阻塞其他请求。它是虚拟机吗？例如 VPS？他们通常没有非常响应的 IO——尤其是对于很多[`fsync`请求](http://linux.die.net/man/2/fsync)`fsync`（每次提交都会在默认的 Postgres 配置中生成一个）。

如果在崩溃的情况下您可以承担丢失一些已确认事务的费用，那么您可以通过关闭或仅针对这些事务`synchronous_commit`来使其更快并减少对 IO 延迟的依赖。`postgresql.conf`

如果您可以使您的写入在一个事务中而不是多个事务中运行，这也可以变得更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:52:40.077

错误消息

> 致命：超出非超级用户的连接限制

是指向设置的明确指针[**`max_connections`**](http://www.postgresql.org/docs/current/interactive/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS)

设置更高的限制`postgresql.conf`（并重新启动 postgres 服务器进程）。就像是：

```
max_connections = 200 
```

或者你需要什么来满足要求。请注意，这需要一些资源。[手册中的更多信息。](http://www.postgresql.org/docs/current/interactive/kernel-resources.html#SYSVIPC)

理想情况下，您不需要如此高的设置并将这些`INSERT`请求分散或将它们捆绑到单个（或几个）连接中。甚至可能变成一个`INSERT`命令。

可能还值得检查您是否[在 Django 中启用了自动提交功能](https://docs.djangoproject.com/en/dev/ref/databases/#autocommit-mode)：

```
DATABASE_OPTIONS = {
    "autocommit": True,
} 
```

如果没有，您需要`COMMIT`在交易结束时发送。

# md5 - 校验和和md5，不是一回事吗？

> ID：14569281
> 
> 赞同：8
> 
> 时间：2013-01-28T19:07:26.340
> 
> 标签：md5

我下载了一个文件并使用 md5sum 来查看下载是否成功且没有损坏。我得到以下值：

```
 a7099fcf9572d91b10d0073b07e112cb  ./Macaca_mulatta.MMUL_1.70.dna.chromosome.1.fa.gz 
```

但是当我检查我下载文件的网站时，它给了我以下值。

```
10256 63747 Macaca_mulatta.MMUL_1.70.dna.chromosome.1.fa.gz 
```

这个 10 位代码是什么？不是md5吗？

我从以下位置下载了文件：ftp: [//ftp.ensembl.org/pub/release-70/fasta/macaca_mulatta/dna/CHECKSUMS](ftp://ftp.ensembl.org/pub/release-70/fasta/macaca_mulatta/dna/CHECKSUMS)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-26T21:52:36.100

Ensembl 正在使用 unix 'sum' 实用程序来计算 CHECKSUM.gz 文件。

以下是有关该程序的更多信息：[http ://en.wikipedia.org/wiki/Sum_%28Unix%29](http://en.wikipedia.org/wiki/Sum_%28Unix%29)

要查看您的下载是否正确，请尝试：

总和 Macaca_mulatta.MMUL_1.70.dna.chromosome.1.fa.gz

注意：它发生在 Ensembl 没有更新他们的 CHECKSUM 文件之前，所以总是会发生下载正确但 CHECKSUM.gz 文件不正确的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T19:10:03.677

它们不是同一件事。MD5 是校验和，但还有其他不是 MD5 的校验和算法，例如 SHA、CRC 等。

通常，校验和是一个函数，它接受一个大于其输出大小的输入，并且（它更好）即使输入中的一位发生了变化，也会产生截然不同的输出。

您正在查看的输出由两个 5 位十进制数字组成，因此您的校验和算法很可能是 CRC32。unix`sum`命令可用于计算/验证它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:11:12.843

MD5 是一种进行校验和的方法，但还有其他方法。CRC 是一，SHA 也是。MD5 所做的只是产生一个哈希码，而且它不是唯一这样做的算法。我不确定 10 位数字是什么，但它不能是 MD5。

# python - Numpy数组元素之间的就地差异

> ID：14569287
> 
> 赞同：2
> 
> 时间：2013-01-28T19:07:54.713
> 
> 标签：python, numpy, array-difference

这将是一个相当简单的问题，我想知道 Python 中是否有一个快速而干净的解决方法。

假设我有一个这样定义的nd-array：

```
In [10]: C = np.random.rand(2,3,3)

In [11]: C
Out[11]: 
array([[[ 0.43588471,  0.06600133,  0.81145749],
        [ 0.20270693,  0.85879686,  0.75778422],
        [ 0.68253449,  0.98287412,  0.63804605]],

       [[ 0.61591433,  0.36453861,  0.23798795],
        [ 0.26761896,  0.00657165,  0.04083067],
        [ 0.11177481,  0.55245769,  0.97274592]]]) 
```

然后我计算第三维数组中一个值与前一个值之间的差异，如下所示：

```
In [12]: C[:, :, 1:] = C[:, :, 1:] - C[:, :, 0:C.shape[2]-1]

In [13]: C
Out[13]: 
array([[[ 0.43588471, -0.36988337,  0.74545616],
        [ 0.20270693,  0.65608994, -0.10101264],
        [ 0.68253449,  0.30033963, -0.34482807]],

       [[ 0.61591433, -0.25137572, -0.12655065],
        [ 0.26761896, -0.26104731,  0.03425902],
        [ 0.11177481,  0.44068288,  0.42028823]]]) 
```

是否可以使用类似的技术恢复原始值，还是**必须**使用 for 循环和临时变量？

例如，这不能解决问题：

```
In [15]: C[:, :, 1:] = C[:, :, 0:C.shape[2]-1] + C[:, :, 1:]

In [16]: C
Out[16]: 
array([[[ 0.43588471,  0.06600133,  0.37557278],
        [ 0.20270693,  0.85879686,  0.5550773 ],
        [ 0.68253449,  0.98287412, -0.04448843]],

       [[ 0.61591433,  0.36453861, -0.37792638],
        [ 0.26761896,  0.00657165, -0.22678829],
        [ 0.11177481,  0.55245769,  0.86097111]]]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:16:57.840

首先，计算差异，而不是

```
C[:, :, 1:] - C[:, :, 0:C.shape[2]-1] 
```

你可以使用[numpy.diff](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)：

```
np.diff(C, axis = -1) 
```

* * *

```
In [27]: C = np.random.rand(2,3,3)

In [28]: D = C[:, :, 1:] - C[:, :, 0:C.shape[2]-1]

In [29]: E = np.diff(C, axis = -1)

In [30]: np.allclose(D, E)
Out[30]: True 
```

* * *

接下来，如果您知道要检索原始`C`，也许最好不要一开始就覆盖这些值。只需将差异保存在单独的数组中：

```
E = np.diff(C, axis = -1) 
```

毕竟，没有比根本不计算更快的方法来执行计算:)。

但是，如果您确实想覆盖这些值，那么要检索原始值，请使用[np.cumsum](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumsum.html#numpy-cumsum)：

```
In [20]: C = np.random.rand(2,3,3)

In [21]: D = C.copy()

In [22]: C[:, :, 1:] = np.diff(C, axis = -1)

In [23]: C = np.cumsum(C, axis = -1)

In [24]: np.allclose(C,D)
Out[24]: True 
```

# jquery - 如何在 ajax 调用成功中访问 jquery 对象 - 未捕获的错误：SYNTAX_ERR：DOM Exception 12

> ID：14569288
> 
> 赞同：1
> 
> 时间：2013-01-28T19:07:59.103
> 
> 标签：jquery, xml, ajax, dom, syntax-error

我正在尝试访问 xml 响应对象中的元素，但我得到了 Uncaught Error: SYNTAX_ERR: DOM Exception 12

这是xml：

```
<ASIInventory request="01/28/2013 08:01" excute="366">
<Inventory SKU="102040">
<ItemId>920-002478</ItemId>
<Description>
<![CDATA[
Logitech Keyboard 920-002478 Desktop K120 USB Black Retail
]]>
</Description>
<Vendor>Logitech</Vendor>
<Category>KB</Category>
<SubCategory>98</SubCategory>
<UPC>097855065537</UPC>
<Price>11.00</Price>
<Rebate>
<![CDATA[ none ]]>
</Rebate>
<Term>none</Term>
<Weight>1.63</Weight>
<Status>ACTIVE</Status>
<Qty>
<Branch Code="1016" Name="Fremont">44</Branch>
<Branch Code="1028" Name="Los Angeles">121</Branch>
<Branch Code="1116" Name="Atlanta">47</Branch>
<Branch Code="1216" Name="Chicago">37</Branch>
<Branch Code="1316" Name="Dallas">23</Branch>
<Branch Code="1516" Name="Kansas">0</Branch>
<Branch Code="1716" Name="New Jersey">3</Branch>
<Branch Code="2416" Name="Miami">0</Branch>
<Branch Code="2616" Name="Portland">0</Branch>
</Qty>
</Inventory>
</ASIInventory> 
```

这是我的浏览器脚本代码：

```
$(document).ready(function(){ 
$.ajax({ 
   url: 'some.xml', 
   dataType: "xml",
   success: function(xml) {
     var test = $(xml).find('Vendor').text();
     alert(test);
   }
  }); 
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T01:27:42.123

是我，还是你有一个额外的 '}); ' 在脚本的结尾？除此之外，这对我来说似乎没问题，或者控制台在哪一行说你有错误？

# gstreamer - 通过 gstreamer 恢复录制的 mpeg 数据

> ID：14569290
> 
> 赞同：0
> 
> 时间：2013-01-28T19:08:09.190
> 
> 标签：gstreamer, video-recording

我创建了一个使用 appsrc 来记录 mp4/mpeg 文件的应用程序。每当我必须停止录制并成功创建文件时，都会发送 EOS 事件。一切顺利，我的管道是

应用程序！队列 ！视频速率！ffmpeg色彩空间！x264enc ！mp4 多路复用器！文件接收器位置=video.mp4

偶然地，如果我的应用程序崩溃（无法生成成功的 EOS ），记录的数据量会完全丢失。

有没有办法在 gstreamer 中恢复此类文件。我在想是否可以通过在 gstreamer 中读取此类文件来附加 EOS。是否有规定可以这样做或类似的事情，这样我就不会丢失数据。

谢谢，

拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:58:02.160

您可能希望将数据复用到 MPEG 传输流 (.ts) 而不是 MP4 文件中。应用程序崩溃后 MP4 文件不可读的原因是 mp4mux 没有机会写入文件的“moov”原子，这只能在记录所有多媒体数据后（即处理 EOS 时）完成. .ts 文件是为流式传输而构建的，即使文件末尾不完整，仍然可以读取。

要调用它，请将管道的末尾更改为：

```
... ! x264enc ! mpegtsmux ! filesink location=video.ts 
```

如果需要 MP4，.ts 文件可以在录制后轻松无损地重新组合成 MP4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:58:53.570

您可以使用“moov-recovery-file”属性并能够在崩溃的情况下修复文件。有关详细信息，请参阅[原子恢复](http://cgit.freedesktop.org/gstreamer/gst-plugins-good/tree/gst/isomp4/atomsrecovery.c)。

# javascript - Javascript画布：触摸动画框，仅查看边框

> ID：14569292
> 
> 赞同：0
> 
> 时间：2013-01-28T19:08:19.537
> 
> 标签：javascript, html, html5-canvas

我正在尝试用 html5 做一个简单的动画。请通过触摸屏设备查看下面的链接。

[https://dl.dropbox.com/u/41627/wipe.html](https://dl.dropbox.com/u/41627/wipe.html)

问题如下：每次用户触摸屏幕时，都会在手指周围画一个从小到大的动画框。我只想看到最外面的边界，而不是其余的。我不想清除画布，因为我希望保留画布其余部分的状态。

图片说明问题： ![初始屏幕](../Images/598e46b8c308c3d2ec700bbb9ee51531.png) ![试图画出盒子](../Images/5161d1a645df11a6695f24b67e0a6c2d.png) 我的代码如下：

```
 function init() {
        var canvas = document.getElementById('c');
        var ctx = canvas.getContext('2d');

        var img = document.createElement('IMG');

        img.onload = function () {
            ctx.beginPath();
            ctx.drawImage(img, 0, 0);
            ctx.closePath();    
            ctx.globalCompositeOperation = 'destination-out';    
        }

        img.src = "https://dl.dropbox.com/u/41627/6.jpg";

        function drawPoint(pointX,pointY){
            var grd = ctx.createRadialGradient(pointX, pointY, 0, pointX, pointY, 30);
            grd.addColorStop(0, "rgba(255,255,255,.6)"); 
            grd.addColorStop(1, "transparent"); 
            ctx.fillStyle = grd;
            ctx.beginPath();
            ctx.arc(pointX,pointY,50,0,Math.PI*2,true);
            ctx.fill();
            ctx.closePath();
        }
        var a = 0;
        var b = 0;
        function boxAround(pointX,pointY, a, b) {
            ctx.globalCompositeOperation = 'source-over'; 
            ctx.strokeStyle = "black";
            ctx.strokeRect(pointX-a, pointY-b, (2*a), (2*b));
            ctx.globalCompositeOperation = 'destination-out';  
            if(a < 100) {
                setTimeout(function() {
                    boxAround(pointX,pointY, a+5, b+5);
                }, 20); 
            }

        }

        canvas.addEventListener('touchstart',function(e){
            drawPoint(e.touches[0].screenX,e.touches[0].screenY);
            boxAround(e.touches[0].screenX,e.touches[0].screenY,0 , 0);

        },false);

        canvas.addEventListener('touchmove',function(e){
            e.preventDefault();
            drawPoint(e.touches[0].screenX,e.touches[0].screenY);
        },false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:07:28.623

您可以通过使用第二个画布来实现此效果，或者甚至只是让框成为位于`<div>`画布上的普通元素。否则，就无法重绘画布。

# java - JAXB XmlAdapter 如何用于编组列表？

> ID：14569293
> 
> 赞同：2
> 
> 时间：2013-01-28T19:08:24.467
> 
> 标签：java, json, jaxb, jersey, xmladapter

此类的实例是大型对象图的一部分，并且不在对象图的根部：

```
public class Day
{
    public Day(LocalDate date, List<LocalTime> times)
    {
        this.date = date;
        this.times = times;
    }

    public Day()
    {
        this(null, null);
    }

    public LocalDate getDate()
    {
        return date;
    }

    public List<LocalTime> getTimes()
    {
        return times;
    }

    private final LocalDate date;

    private final List<LocalTime> times;
} 
```

使用 Jersey 和 JAXB 将对象图转换为 JSON。我已经`XmlAdapter`注册了`LocalDate`和`LocalTime`。

问题是它只适用于`date`财产而不是`times`财产。我怀疑这与`times`列表而不是单个值有关。那么，我如何告诉 Jersey/JAXB`times`使用已注册的来编组列表中的每个元素`XmlAdapter`？

**更新：**

通过添加标量属性并观察 JSON 中的预期输出，我确认`LocalTime`编组确实适用于标量属性。`LocalTime``LocalTime`

为了完整起见，这里是 package-info.java：

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value = LocalDateAdapter.class, type = LocalDate.class),
    @XmlJavaTypeAdapter(value = LocalTimeAdapter.class, type = LocalTime.class)
})
package same.package.as.everything.else; 
```

`LocalDateAdapter`：

```
public class LocalDateAdapter extends XmlAdapter<String, LocalDate>
{
    @Override
    public LocalDate unmarshal(String v) throws Exception
    {
        return formatter.parseLocalDate(v);
    }

    @Override
    public String marshal(LocalDate v) throws Exception
    {
        return formatter.print(v);
    }

    private final DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyyMMdd");
} 
```

`LocalTimeAdapter`：

```
public class LocalTimeAdapter extends XmlAdapter<String, LocalTime>
{
    @Override
    public LocalTime unmarshal(String v) throws Exception
    {
        return formatter.parseLocalTime(v);
    }

    @Override
    public String marshal(LocalTime v) throws Exception
    {
        return formatter.print(v);
    }

    private final DateTimeFormatter formatter = DateTimeFormat.forPattern("HHmm"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:29:05.507

一个`XmlAdapter`类应用于该类型的映射字段/属性，在集合的情况下，应用于集合中的每个项目。下面的例子证明这是可行的。您是否尝试过将示例独立运行到 XML 以验证映射。怀疑问题出在`XmlAdapter`具体问题之外。

**字符串适配器**

以下`XmlAdapter`将在解组操作中将 a 转换`String`为小写，并在编组时将其转换为大写。

```
package forum14569293;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class StringAdapter extends XmlAdapter<String, String> {

    @Override
    public String unmarshal(String v) throws Exception {
        return v.toLowerCase();
    }

    @Override
    public String marshal(String v) throws Exception {
        return v.toUpperCase();
    }

} 
```

**包信息**

就像在您的问题中一样，`@XmlJavaTypeAdapters`将使用包级别注释来注册`XmlAdapter`. 这将为这个包`XmlAdapter`中的所有映射`String`属性注册它（参见：[http](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html) ://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html ）。

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=StringAdapter.class, type=String.class)
})
package forum14569293;

import javax.xml.bind.annotation.adapters.*; 
```

**根**

下面是一个与您的类类似的示例域模型，`Day`具有两个映射属性。第一个是 type `String`，第二个是`List<String>`. 关于您的课程，我注意到的一件事`Day`是您只有`get`方法。这意味着您需要`@XmlElement`为 JAXB 实现添加注释以考虑映射属性。

```
package forum14569293;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    public Root(String foo, List<String> bar) {
        this.foo = foo;
        this.bar = bar;
    }

    public Root() {
        this(null, null);
    }

    @XmlElement
    public String getFoo() {
        return foo;
    }

    @XmlElement
    public List<String> getBar() {
        return bar;
    }

    private final String foo;
    private final List<String> bar;

} 
```

**演示**

```
package forum14569293;

import java.util.*;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        List<String> bar = new ArrayList<String>(3);
        bar.add("a");
        bar.add("b");
        bar.add("c");
        Root root = new Root("Hello World", bar);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);

    }

} 
```

**输出**

下面是运行演示代码的输出，我们看到所有字符串都被`XmlAdapter`.

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <bar>A</bar>
    <bar>B</bar>
    <bar>C</bar>
    <foo>HELLO WORLD</foo>
</root> 
```

* * *

**更新**

> 谢谢。我试过了，XML 只包含一个空标记，这意味着 JAXB 不喜欢 POJO 模型。（也许它应该是可序列化的？）

JAXB 不要求 POJO 实现`Serializable`.

> 这很有趣，因为它似乎表明 JAXB 在其中发挥的唯一作用是将其注释和一些其他接口（例如 XmlAdapter）借给 JSON（反）序列化器，这就是关系结束的地方。

这取决于用作 JSON 绑定层的内容。[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)规范不包括 JSON 绑定，因此这种类型的支持超出了规范。EclipseLink JAXB (MOXy) 提供原生 JSON 绑定（我是 MOXy 负责人），您可以使用它执行以下操作：

```
Marshaller marshaller = jc.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
marshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
marshaller.setProperty(MarshallerProperties.JSON_INCLUDE_ROOT, false);
marshaller.marshal(root, System.out); 
```

并获得以下考虑在内的输出`XmlAdapter`：

```
{
   "bar" : [ "A", "B", "C" ],
   "foo" : "HELLO WORLD"
} 
```

> 不过，当我有机会时，我会尽我所能让 JAXB 生成 XML，这可能会揭示一些其他的东西。

这将很有用，因为我不相信您看到的是 JAXB 问题，而是您正在使用的 JSON 绑定层中的问题。

# php - CakePHP 在控制器中为 CakePHP 2.2.5 切换数据库连接

> ID：14569294
> 
> 赞同：5
> 
> 时间：2013-01-28T19:08:27.523
> 
> 标签：php, database, cakephp

我正在尝试从控制器中的两个不同数据库中获取数据

***应用程序/控制器/用户控制器.php***

我的数据库连接在***database.php中声明***

```
$default = array(
    ...
    'database' => 'test'
    ...
    );
$test = array(
    ...
    'database' => 'test1'
    ...
    ); 
```

在我的`display()`行动中：

```
public function display() {
    $this->set('defaultUsers', $this->User->find('all'));
    $this->User->schemaName = 'test1';
    $this->User->cacheQueries = false;
    $this->set('testUsers', $this->User->find('all'));
} 
```

这将使我能够成功地从两个不同的来源获取数据，但是问题是这两个数据库必须具有相同的密码，否则它将无法工作。

我已经尝试过在这里和其他网站找到的其他解决方案。喜欢：

*   改变`$this->User->useDbConfig = 'test'`并且`$this->User->cacheQueries = false`仍然会给我相同的数据集；

*   使用`ConnectionManager::getDataSource()`and `setConfig()`, `create()`, `drop()`,`setDataSource()`等。这些都不起作用，有些甚至不再存在。

任何帮助将不胜感激！因为我需要为两个类似的应用程序（也就是两个数据库）使用相同的代码库。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:24:10.617

您可能需要使用“setDataSource()”来切换数据源/连接，因为这将重置模型上的“缓存”模式等；

```
public function display() {
    $this->set('defaultUsers', $this->User->find('all'));
    $this->User->setDataSource('test1');
    $this->set('testUsers', $this->User->find('all'));
} 
```

如果您需要在整个应用程序中访问两个数据库中的数据，另一种选择是创建*两个*用户模型，一个使用“test”作为数据源，另一个使用“test1”作为数据源。这样您就不必一直切换数据源

例子：

```
class TestUser extends AppModel {
    public $useTable = 'users'; // name of the database table 
    public $useDbConfig = 'test1';  // name of the database configuration in database.php
} 
```

进一步说明：'$test' 数据库配置是用于运行 CakePHP 单元测试的预配置数据库连接。您可以考虑创建自己的数据库连接名称

# css - 如何使用 AlphaImageLoader 过滤器让按钮和锚点在元素内部工作？

> ID：14569295
> 
> 赞同：1
> 
> 时间：2013-01-28T19:08:27.543
> 
> 标签：css, internet-explorer, background, size

为了在 IE 8 中将大小应用于背景图像，我遵循了这个问题的公认答案[How do I make background-size work in IE?](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)

但是，放置在分区中的锚点和按钮在 IE 8 中不起作用。有人可以推荐一个简单的解决方案吗？

```
<!-- Here is my HTML !-->
<div id="masthead">
<div class="inner_masthead_inner_wrapper">

    <h1>HEADLINE</h1>
    <p>Sales copy</p>
    <h2>Give it a try, it's free!</h2>

    <button type="button" class="btn fbLoginBtn" onClick="FB.login();">Login with Facebook</button>

  </div>
</div>

<!-- Here is my CSS !-->

#masthead{
background: url(../images/social-media-marketing-tool.jpg) no-repeat #000;
background-size: 100% 100%;

filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/social-media-marketing-tool.jpg',
sizingMethod='scale');

-ms-filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='images/social-media-marketing-tool.jpg',
sizingMethod='scale')';
} 
```

# java - 动态设置微调器的值

> ID：14569296
> 
> 赞同：4
> 
> 时间：2013-01-28T19:08:28.240
> 
> 标签：java, android, eclipse, spinner, arrays

我有一个`ArrayAdapter`如下

```
ArrayAdapter<String>dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item); 
```

这是我要用于我的 .我的文件`Spinner`中的值集（字符串数组）的适配器。`Spinner``strings.xml`

如何务实地设置微调器`<string-array>`？`string.xml`请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:24:56.300

只需在创建时将其添加到您的 ArrayAdapter 中。

```
String[] yourArray = getResources().getStringArray(R.array.array_name);

ArrayAdapter<String>dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item, yourArray); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:25:36.887

你可以尝试这样的事情：

```
String[] mTestArray;
ArrayAdapter<String>dataAdapter;

mTestArray = getResources().getStringArray(R.array.testArray);
dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item,mTestArray); 
```

然后将适配器连接到 Spinner。

```
spinner.setAdapter(dataAdapter); 
```

希望这可以帮助！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:30:15.043

```
spinner2 = (Spinner) findViewById(R.id.spinner2);
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_dropdown_item);  
String[] itemNames = getResources().getStringArray(R.array.stringArrayName); 

   for (int i = 0; i < 16; i++) // Maximum size of i upto --> Your Array Size 
    {  
    dataAdapter.add(itemNames[i]);  
     } 

spinner2.setAdapter(dataAdapter); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T19:24:39.333

本教程：[Android Spinners](http://developer.android.com/guide/topics/ui/controls/spinner.html)指出您将使用以下代码根据资源设置 Spinner 数组：

```
ArrayAdapter<CharSequence> dataAdapter = ArrayAdapter.createFromResource(this,
    R.array.string-array-id, android.R.layout.simple_spinner_item);
dataAdapter .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

使用该`createFromResource()`方法而不是`new`提供数组的资源 ID 应该可以提供预期的结果。有关更多详细信息，请参阅教程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-09T09:39:19.557

如果您想从 Web 服务加载数据并在微调器中设置该数据，您可以使用以下代码：-

```
public class MainActivity extends AppCompatActivity {

    Spinner spinner;
    List<String> usersList;
    ArrayAdapter<String> catAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        spinner = (Spinner)findViewById(R.id.spinner);
        usersList = new ArrayList<String>();

        catAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, usersList);
        spinner.setAdapter(catAdapter);

        getHttpResponse();

    }

    public void getHttpResponse() {

        String url = "https://cakeapi.trinitytuts.com/api/listuser";

        OkHttpClient client = new OkHttpClient();

        Request request = new Request.Builder()
                .url(url)
                .header("Accept", "application/json")
                .header("Content-Type", "application/json")
                .build();

        client.newCall(request).enqueue(new Callback() {

            @Override
            public void onFailure(Call call, IOException e) {
                String mMessage = e.getMessage().toString();
                Log.w("failure Response", mMessage);
                //call.cancel();
            }

            @Override
            public void onResponse(Call call, Response response) throws IOException {

                final String mMessage = response.body().string();

                MainActivity.this.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        Log.e("Response", mMessage);
                        try {
                            JSONObject users = new JSONObject(mMessage);
                            JSONArray usersArr = users.getJSONArray("users");

                            for(int i =0; i < usersArr.length(); i++){
                                JSONObject user = usersArr.getJSONObject(i);
                                Log.e("user", user.getString("username"));
                                usersList.add(user.getString("username"));
                            }

                            catAdapter.notifyDataSetChanged();

                        } catch (JSONException e) {
                            e.printStackTrace();
                        }

                    }
                });
            }
        });
    }
} 
```

您可以在这篇文章中阅读完整信息：-[将动态数据添加到微调器](https://trinitytuts.com/add-dynamic-data-to-spinner-in-android-application/)

# java - 从相机意图中拍照并在其上叠加另一个小图像

> ID：14569303
> 
> 赞同：2
> 
> 时间：2013-01-28T19:08:54.387
> 
> 标签：java, android, image-processing, bitmap, camera

我有一个应用程序，现在只需单击一个按钮即可打开相机。然后用户可以使用标准相机应用程序拍照，这会导致取消/保存选项。如果选择取消，则可以重新拍摄照片。如果选择了保存选项，图像将保存到图库。我想在这个取消/保存模式中添加一些东西到图像中，然后再单击任何一个。

我认为最好的方法是将照片带入我的应用程序并在那里进行修改并使用按钮保存。我不知道该怎么做。我知道我必须使用 onActivityResult 函数，但仅此而已。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:21:26.430

当您启动 IMAGE_CAPTURE 意图让用户拍照时，您应该将存储图像的路径作为参数传递。首先你应该保存拍摄图片的路径，然后，当用户回到你的活动时，管理位图并与其他元素组合。

```
 camera.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    String storageState = Environment.getExternalStorageState();
                    if (storageState.equals(Environment.MEDIA_MOUNTED)) {
                        long time = System.currentTimeMillis();

                        File root = Environment
                                .getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);

                        File dir = new File(root.getAbsolutePath() + "/Camera");
                        if (dir.exists() == false) {
                            dir.mkdirs();
                        }

                        String path = dir.getAbsolutePath() + File.separatorChar
                                + time + ".jpg";
                        filesaved = new File(path);
                        try {
                            if (filesaved.exists() == false) {
                                filesaved.getParentFile().mkdirs();
                                filesaved.createNewFile();
                            }

                        } catch (IOException e) {
                            Toast.makeText(
                                    context,
                                    "Unable to create external file"
                                            + storageState, Toast.LENGTH_LONG).show();
                            return;
                        }

                        uritopass = Uri.fromFile(filesaved);
                        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                        intent.putExtra(MediaStore.EXTRA_OUTPUT, uritopass);
                        startActivityForResult(intent, TAKE_PICTURE);
                    } else {
                        Toast.makeText(
                                context,
                                "External Storeage (SD Card) is required.\n\nCurrent state: "
                                        + storageState, Toast.LENGTH_LONG).show();

                    }
                }

            });

    ...
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK) {
            if (requestCode == TAKE_PICTURE) {
                //user took a photo
                File imageFile = new File(filesaved.toString());
                Bitmap bm = decodeFile(imageFile);
                if (bm != null) {
                    bm = combineImages(bm);
                    img.setImageBitmap(bm);
                }
            }
        }
}

... 
```

`decodefile`方法从原始文件加载位图[Here](https://stackoverflow.com/a/4182060/2015318)。

`combineImages`将 2 个或多个 Bitmap [Here](https://stackoverflow.com/a/4863551/2015318)组合在一起的方法。

# mysql - MySQL 查询上的 '".$string."' 和 '$string" 有什么不同

> ID：14569304
> 
> 赞同：0
> 
> 时间：2013-01-28T19:09:01.717
> 
> 标签：mysql

`'".$string."'`以下两个查询的开启和之间有什么不同`'$string'`

```
SELECT * FROM users WHERE UserName='".$USERNAME."' AND Pass='".$PASS."'
/* AND */
SELECT * FROM users WHERE UserName='$USERNAME' AND Pass='$PASS' 
```

如果不同，什么对安全性更好？*字符串在输入时始终是安全的，但仅适用于上述不同*

**编辑：** 我在 PHP JUST 上使用上述查询并需要它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:10:46.133

至少在 PHP 中，两者之间完全没有区别——它们做的事情完全相同。两者都同样容易受到 SQL 注入的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:16:56.190

在您的情况下，它们之间没有区别。

但是，如果您要连接的字符串**不包含特殊字符**（例如`'`），您会看到不同之处：

```
$b = 'b';
$string = "a" . $b . "c"; 
```

不等于：

```
$b = 'b';
$string = "a$bc"; 
```

因为 PHP 会寻找`$bc`变量。但这相当于：

```
$b = 'b';
$string = "a{$b}c"; 
```

以及您的示例等效于：

```
SELECT * FROM users WHERE UserName='{$USERNAME}' AND Pass='{$PASS}' 
```

但请注意，单引号字符串：

```
$b = 'b';
$string = 'a{$b}c'; 
```

将被逐字阅读为`a{$b}c`.

最后，正如@duskwuff 警告的那样，您应该注意[sql injections](http://bobby-tables.com/about.html)。

# smalltalk - 不能分配给方法参数？

> ID：14569311
> 
> 赞同：0
> 
> 时间：2013-01-28T19:09:28.317
> 
> 标签：smalltalk, pharo

我设计了一个用于发送基本电子邮件的 UI，可以通过

```
 SMTPClient  
    deliverMailFrom: sender
to: recipients
text: message
usingServer: '' . 
```

我有一个方法可以接受电子邮件，主题来自用户的所有标题。这是我的方法。

```
 AddHeader:Headername Email: asString Message:message --> "I want to update this"

 " update is nothing but adding dictionay values to that "
|data|
 data:= Dictionary new.
 'To'= Headername ifTrue[data at:#To put:Email.].
 'From'= Headername ifTrue[data at: #From put:Email].
 'subject'= Headername ifTrue[data at: #subject put:Email].

"adding dicitonay values to message"
message:= String streamContents:[:stream|
data values do:[:each| stream nextPutAll: each ]
    separatedBy: [ stream nextPut: Character space ]]. 
```

当我尝试保存此方法时，我收到一条错误消息，提示无法存储到消息中。那么将值添加到已定义的消息中的正确方法是什么。

从字典中添加的其他事物值不会按照放置顺序添加。那么有没有办法我可以添加这些值，以便将它们放在首位，从下一个，然后是主题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:23:02.133

我不知道您是否只是在询问错误，或者您是否正在尝试在代码的基础上实现其他目标。由于代码分散且不完整，我无法给你一个正确的答案，但我会改编一个类似于你的代码，它似乎可以工作：

```
|data|
data:= Dictionary new.
('To'= 'To') ifTrue: [data at:#To put:'someone@mail.com'].
('To'= 'Another thing') ifTrue: [data at:#To put:'shouldnt appear'].
data at:#From put:'me@mail.com'.

message:= String streamContents:
            [:stream|
                    data values 
                            do:[:each| stream nextPutAll: each ]
                            separatedBy: [ stream nextPut: Character space ]]. 
```

如果您将其复制到工作区并检查其`data`内容，它将为您提供以下`ByteString` `'someone@mail.com me@mail.com'`. 但我认为你已经完成了这项任务。您能否详细说明您正在寻找的内容并在您编写代码时放置完整的代码？

***根据 OP 说明进行编辑***

Ok, now I see the problem. The thing is that in Smalltalk you don't have "out" parameters and that is why the compiler is telling you that it can't store new contents in the `message` parameter. From the point of view of the object sending the message, you see that message send as telling an object to perform an action and passing the required collaborators to that object to perform it. If there is a response from the message send it is expected to be in the return value. I re-wrote your method a little bit here to do that:

```
addHeader: headerName email: aString message: aMessage 

| data newValues |

 data:= Dictionary new.
 'To'= headerName ifTrue: [data at:#To put: aString.].
 'From'= headerName ifTrue: [data at: #From put: aString].
 'subject'= headerName ifTrue: [data at: #subject put: aString].

"adding dicitonay values to message"
newValues := String streamContents:[:stream|
data values do:[:each| stream nextPutAll: each ]
    separatedBy: [ stream nextPut: Character space ]].
^aMessage  , newValues. 
```

as you can see the idea is to use the `#,` message to join the two strings and return the new value. Some things to note here are:

1.  I changed a little bit the names to use a more accepted capitalization pattern.
2.  You may want to take a look at the `#asSymbol` message to avoid the if statements.

HTH

# .net - 刚升级到 .net 4 时调用 asmx 404

> ID：14569319
> 
> 赞同：1
> 
> 时间：2013-01-28T19:10:00.650
> 
> 标签：.net, asmx

我刚刚将 .NET 2 ASMX Web 服务升级到 .NET 4。

Web 服务的预升级版本在 .NET 2 经典应用程序池中的 IIS 7 Web 服务器上运行良好。

将应用程序池更改为 .NET 4 经典会导致它给出 404 错误。无论我是否为 Web 服务放置了新的 .NET 4 二进制文件，都会发生这种情况。

我在事件审核中找不到任何线索。

我怀疑问题与处理程序映射有关，但每当我尝试添加这些时，都会收到 500 错误。

我的 web.config 目前非常简单 - 只包含 appsettings。

Web 服务的 .NET 4 编译版本在开发中的 vshost 中运行良好。

希望有人能给我一些线索。

# javascript - 在javascript中模拟按钮点击

> ID：14569320
> 
> 赞同：35
> 
> 时间：2013-01-28T19:10:03.607
> 
> 标签：javascript

所以我想要做的是当我点击一个按钮时，它将这个点击事件传递给网页中的另一个元素，或者你可以说它会在另一个元素中创建一个新的点击事件。下面是我的代码，它不起作用，请让我知道它有什么问题，它看起来很有意义......

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#datepicker" ).datepicker();
});

</script>
</head>
<body>
<p>Date: <input type="text" id="datepicker" onClick=alert("error") /></p>
<button type="button" value="submit" onClick="document.getElementById("datepicker").click()">submit </button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-28T19:11:24.407

由于您使用的是 jQuery，因此您可以使用这个 onClick 处理程序，它调用[`click`](http://api.jquery.com/click/)：

```
$("#datepicker").click() 
```

这与`$("#datepicker").trigger("click")`.

对于无 jQuery 版本，请查看[SO 上的这个答案](https://stackoverflow.com/a/2706236/1290545)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-28T19:11:23.423

要模拟事件，您可以使用[`trigger`](http://api.jquery.com/trigger/)JQuery 功能。

```
$('#foo').on('click', function() {
      alert($(this).text());
    });
$('#foo').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-28T19:12:53.583

解决此问题的最小更改是更改

```
onClick="document.getElementById("datepicker").click()"> 
```

到

```
onClick="$('#datepicker').click()"> 
```

`click()`是一个 jQuery 方法。此外，用于 HTML 元素属性的双引号和用于 JavaScript 函数参数的双引号之间存在冲突。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T19:31:07.073

您的代码无法按您期望的方式运行的原因是因为这一行：

```
<button type="button" value="submit" onClick="document.getElementById("datepicker").click()">submit </button> 
```

应改为：

```
<button type="button" value="submit" onClick="document.getElementById('datepicker').focus()">submit </button> 
```

这里有两点需要注意：

1：`"`周围的 s`datepicker`已更改为`'`s，这样它们就不会干扰`onclick`事件周围的报价。

2：`click()`已更改`focus()`为激活日期选择器日历。按下按钮时。

现在，这解决了您的问题……但我同意其他帖子，即使用 jQuery 访问 DOM 元素并触发事件是更好的方法。由于您已经通过 为 jQuery datapicker 插件执行此操作`<script src="http://code.jquery.com/jquery-1.8.3.js"></script>`，因此这应该不是问题。

不推荐内联事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T19:19:26.010

或者您可以使用 JQuery 已经为您制作的内容：

[http://jqueryui.com/datepicker/#icon-trigger](http://jqueryui.com/datepicker/#icon-trigger)

这就是你想要达到的目标，不是吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T19:22:28.763

试试这个

```
document.getElementById("datapicker").addEventListener("submit", function()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-30T11:07:37.690

用这个

```
jQuery("input.second").trigger("click"); 
```

# objective-c - 仅在执行任务时隐藏 UIBarButtonItem

> ID：14569323
> 
> 赞同：0
> 
> 时间：2013-01-28T19:10:12.113
> 
> 标签：objective-c, uibarbuttonitem

我有一个带有刷新 rightBarButtonItem 的导航栏，我想在刷新时隐藏它。

我尝试将其设置为 nil，然后在任务完成后将其设置回刷新按钮，但任务可能太快，所以它不显示。

还有什么办法可以隐藏吗？

我想给用户一个反馈，即除了我正在使用的 MBProgressHUD 之外，还点击了刷新按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:14:09.833

您要做的不是删除它，而是禁用它，这将使其“变灰”。

使用此代码：

`rightBarButtonItem.enabled = NO;`或`[rightBarButtonItem setEnabled: NO];`取决于您的语法选择。

您首先需要对 rightBarButtonItem 有一个引用，这可以通过使用 IBOutlet 来实现。

# mysql - 自引用表以获取未修改的记录

> ID：14569326
> 
> 赞同：0
> 
> 时间：2013-01-28T19:10:19.757
> 
> 标签：mysql

我正在使用一个记录没有更新的表。发生更改时会插入新修订。修订由序列字段和位置字段相关联，这意味着同一表中的主记录及其相应修订在该位置具有唯一的序列号，但该序列可以在另一个位置重复使用。修订字段随着每个修订增加 1。

我正在尝试选择状态为 4、5 或 6 的所有记录，其中没有其他记录的版本号高于其序列号和位置匹配的版本号。我不确定如何做到这一点。

```
CREATE TABLE `table` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`serial` int(10) NOT NULL DEFAULT '0',
`location` int(10) NOT NULL DEFAULT '0',
`revision` int(3) NOT NULL DEFAULT '0',
`status` int(1) NOT NULL DEFAULT '0',
PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:15:48.110

您需要使用子查询：

**更新**

```
SELECT * FROM table t1
WHERE location = 'location' 
AND status IN (4,5,6) 
AND revision = (SELECT MAX(revision) FROM table t2 WHERE t2.serial = t1.serial AND t2.location = t1.location) 
```

# c# - 如何通过 Winform 应用程序从 c# 中的数据库打印数据？

> ID：14569328
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:10:30.100
> 
> 标签：c#, sql, winforms, printing

我正在寻找一种`Sql DB`使用 my打印数据的简单方法，`Winform Application` 但我希望能够对其进行自定义。就像添加标题并能够决定每件事情在打印页面上的位置。我发现了很多像我一样的问题，但没有得到/理解答案。我正在寻找可以完成的最简单的方法。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:44:19.190

在 Visual Studio 2010 中，您可以访问 Crystal Reports 和 Microsoft Reporting 工具，我建议您从那里开始。

网上有很多关于 Crystal 报表的教程。这是关于codeguru的一个：http: [//www.codeguru.com/csharp/csharp/cs_graphics/chartsandgraphing/article.php/c10483/Beginners-Guide-to-Crystal-Reports-Part-I-Winforms.htm](http://www.codeguru.com/csharp/csharp/cs_graphics/chartsandgraphing/article.php/c10483/Beginners-Guide-to-Crystal-Reports-Part-I-Winforms.htm)

这是微软报告工具的一个，就在stackoverflow上： [WinForm应用程序中的微软报告教程](https://stackoverflow.com/questions/6124093/a-tutorial-for-microsoft-report-in-winform-applications)

VS2012 似乎没有附带 Crystal 报告，但它可能可用。VS2012 NuGet 上还有其他可用的报告库

# c - st_mtimensec 在 struct stat 中不可用

> ID：14569330
> 
> 赞同：2
> 
> 时间：2013-01-28T19:10:36.963
> 
> 标签：c, mips, cross-compiling, stat, uclibc

我正在尝试为主机**mipsel-linux-uclibc编译**[Evas](http://docs.enlightenment.org/auto/evas/)。我正在使用我公司的旧二进制工具链来做到这一点。它是在 2008 年左右编译的，我现在有点坚持。看起来此工具链在 stat.h 的 struct stat 中缺少以下字段：

 **```
unsigned long int st_mtimensec; /* Nsecs of last modification.  */ 
```

我最接近的是：

```
__time_t st_mtime;      /* Time of last modification.  */ 
```

看起来这与uclibc有关。有没有简单的方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:24:26.930

`struct stat`*应该*包含*一个*成员并且应该`struct timespec st_mtim;`包含. 如果您的 uClibc 太旧而无法拥有这些权利，您可以尝试将它们破解到标题中（可能只有一个成员和一个填充成员在它旁边应该是纳秒的地方）。重要的是您**必须**保持成员的布局（它们在结构中的偏移量）相同，否则事情会严重破坏。`stat.h`*`#define st_mtime st.mtim.tv_sec``time_t st_mtime;`*

 ***一个更好的问题可能是为什么 Evas 不能移植到较旧的（POSIX-2008 之前）系统，以及为什么它对纳秒字段使用错误的名称（正确的名称是`st_mtim.tv_nsec`，而不是`st_mtimensec`。最有益的行动方案可能是在 Evas 的上游获取这些修复程序，以便其他用户将来不会遇到问题。*****

# ios - 从 NSMutableArray 中删除重复项，并在“for”循环中添加对象

> ID：14569335
> 
> 赞同：2
> 
> 时间：2013-01-28T19:10:49.023
> 
> 标签：ios, objective-c, nsmutablearray

现在，我在这里和谷歌上查看了这个，似乎每个人都`NSSet`用来删除欺骗。这很酷，但似乎这种方法也删除了排序。

是否有 1) 一种按字母顺序对 NSSet 进行排序的方法？2）一种更好的方法来删除循环`NSMutableArray`内外的重复，我通过从文件中`for`读取它们将它们添加到数组中。`.csv`

谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:15:00.470

我相信您想使用`NSOrderedSet`. 这是关于它的文档：

[http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:07:37.723

[`NSOrderedSet`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSOrderedSet_Class/Reference/Reference.html)你可以从你的数组中构造一个*；using`+orderedSetWithArray:`将保留数组的现有顺序。如果它的顺序不正确，则不能直接对集合进行排序，因此使用有序集合没有什么意义，但是您可以轻松构造一个正则`NSSet`并将其排序到另一个数组中，使用`-sortedArrayUsingDescriptor:`，甚至更好`allObjects`，然后的任何`NSArray`排序方法。

另一方面（我可能会得到一些关于这个的讨厌的评论，但是......），因为`NSArray`并且`NSSet`似乎是建立在相同的[哈希表功能](http://ridiculousfish.com/blog/posts/array.html)[之上的](https://stackoverflow.com/questions/5863510/nsset-implementation/)，你可以这样做：

```
id newObj = // Acquire new object from wherever
while( newObj ){
    if( ![arrayImConstructing containsObject:newObj] ){
        [arrayImConstructing addObject:newObj]
    }
    newObj = // Acquire next object
} 
```

无论如何，这基本上是有序集合必须做的事情，并且很可能您的数组足够小（如果您将其放入 a`UIPicker`中），您根本不会注意到性能差异。不过，**测量两者**，然后再决定。

* * *

*`NSOrderedSet`适用于 iOS > 5.0（或 OS X > 10.7）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:15:43.983

NSOrderedSet 为您提供一组排序。

# zend-framework2 - Zend框架2流程图

> ID：14569337
> 
> 赞同：6
> 
> 时间：2013-01-28T19:10:50.350
> 
> 标签：zend-framework2

我正在尝试理解 ZF2 流程，但如果没有像 ZF1 这样的流程图，这有点困难：

[http://tournasdimitrios1.files.wordpress.com/2011/05/zend-framework-sequence_flowchart.jpg](http://tournasdimitrios1.files.wordpress.com/2011/05/zend-framework-sequence_flowchart.jpg) [http://otroblogmas.com/wp-content/uploads/2010/07/zend-framework-flow-diagram.png](http://otroblogmas.com/wp-content/uploads/2010/07/zend-framework-flow-diagram.png)

或者，我如何记录在我的应用程序中发送的自定义事件？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T20:58:12.967

有一个备忘单：

*   [~~德文版 ZF2 备忘单~~](http://zendframework2.de/cheat-sheet.html)（不再可用）
*   [~~ZF2 备忘单英文版~~](http://zendframework2.de/en/cheat-sheet.html)（不再可用）
*   [ZF2 备忘单英文版（替代链接）](http://okeowoaderemi.com/site/assets/files/1103/zf2-flowchart.jpg)

请注意，这些受版权保护，您不得在任何地方使用或重新分发它们。您只能链接到它们。

# android - Android：从 EditText 字段获取数据时出现 NumberFormatException

> ID：14569340
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:10:59.040
> 
> 标签：android, android-layout, android-emulator

java.lang.RuntimeException：无法启动活动 ComponentInfo { com.project/com.project.simple}：java.lang.NumberFormatException

```
EditText et1,et2,et3;
Button b1, b2;
Float two,three,four;   
@Override
protected void onCreate(Bundle savedInstanceState) {

// TODO Auto-generated method stub

super.onCreate(savedInstanceState);

setContentView(R.layout.can);

et1 = (EditText) findViewById(R.id.editText1);

two = Float.valueOf(et1.getText().toString());

et2 = (EditText) findViewById(R.id.editText2);

three = Float.valueOf(et2.getText().toString());

et3 = (EditText) findViewById(R.id.editText3);

four = Float.valueOf(et3.getText().toString());

    b1 = (Button) findViewById(R.id.button1);

b2 = (Button) findViewById(R.id.button2);

b1.setOnClickListener(new OnClickListener() { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:12:21.400

It seems that the input is not valid. Please check twice that you don't try to parse a letters to a number. If you have a float please check that you use the right locale for parsing. E.g. in germany is pi 3,1415... and not 3.1415...

If you cannot preparse the values you could put the parsing trys in try catch blocks like this:

```
float value;
try {
    value=Float.parseFloat(someString);
} catch(NumberFormatException e) {
    // input was no valid float
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:15:11.113

您在`onCreate()`指定字段的位置。用户没有时间输入任何有效数据。您需要将数据的获取移到其他地方……就像您的那样`onClick()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:16:17.953

将您的代码从 onCerate 移动到其他方法（例如 Button 的 onClick 方法），您应该尝试以下操作：

```
try{
   two = Float.parseFloat(et1.getText().toString());
}catch(NumberFormatException e){
   two = 0;       
   Toast toast = Toast.makeText(this, 'Invalid number format on `two` field', 500);
   toast.show();  
} 
```

对于您要阅读的每个文本字段注释：浮点格式是 2.3，不要使用 2,3

# android - Is Broadcast Receiver what I need?

> ID：14569350
> 
> 赞同：0
> 
> 时间：2013-01-28T19:11:37.117
> 
> 标签：android

I’m trying to execute custom code that is invoked from a listprefeence radio box elsewhere in the setting UI. Its code that will allow the user to select different styles of battery icons on their phone on the fly without a reboot. I have everything done and the code executes fine with one exception. It takes 10-12 seconds for the change to take place. Kind of like it’s not executing until the system does its own check on battery status. How to I get it to execute immediately upon checking the box? Is this done through the use of a broadcast receiver? I am trying to learn android development and have become pretty good with smali but not so much with actual Java yet. I know it’s backwards but I’m trying….

Any help would be appreciated!

Thanks, Jimmie

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:25:42.387

不完全是广播接收器，您想要的是找出检查电池状态的系统服务。一旦在 UI 上收到用户请求，您就可以调用系统服务来检查电池状态并随后更改图标。

此外，您正在寻找的系统服务可能不一定是电池状态检查服务，它可能是 UI 更新程序或其他一些在超时后运行并反映您的更改的更新程序服务。

因此，您需要弄清楚哪个系统服务反映了您的更改，然后在用户更改了他的偏好后手动调用该系统服务。

# delphi - Delphi Project 中的 Advantage 无法识别错误 5018 句柄

> ID：14569351
> 
> 赞同：2
> 
> 时间：2013-01-28T19:11:37.370
> 
> 标签：delphi, advantage-database-server

我有一个 delphi 项目，不知何故已损坏。我升级到 Advantage 11.1 组件（使用 XE），现在打开项目时收到以下错误消息：

> acctTbl：错误 5018：Advantage 无法识别给定的句柄。验证指定的句柄是否打开/活动。给定句柄未被识别为有效的 Advantage 客户端引擎

因为出现错误，数据模块DFM没有建好，所以不能“调整”任何设置。

`acctTbl`是 DFM 中的第一个表，所以后面的表可能会出现错误，但我不知道。

我们没有使用服务器，只是“本地服务器”。

我已尝试返回到组件的版本 10，但错误仍然存​​在。

我还尝试删除所有项目目标代码，只打开 PAS 和 DFM 文件（通过从 SVN 恢复）。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:01:12.040

您可以`.dfm`在文本编辑器（如记事本）中打开 ，并将`AdsConnection.Connected`属性更改为`false`，并将任何`AdsTable`或`ADSQuery`组件的`Active`标志更改`false`为 。（我建议先关闭 IDE，以确保它不会缓存引用。）这至少可以让您打开项目并进行所需的任何更改以使用新版本的 ADS 进行编译。

如果该文件已通过 XE 之前的许多旧版本的 Delphi 进行了更新，那么您仍有可能拥有一个二进制格式的`.dfm`文件（这意味着当您打开文件时，您会在记事本中看到各种奇怪的符号`.dfm`）。如果是这种情况，Delphi 包含一个转换实用程序（`convert.exe`在您的`$(DELPHI)\Bin`文件夹中找到），您可以使用以下步骤将其转换为文本格式，然后进行更改（之后无需将其转换回来 - 默认为创建新表单时创建文本`.dfm`文件，Delphi 很好地使用它们作为文本）。

**首先将数据模块的备份副本`.DFM`放在安全的地方！**

制作备份副本后，在项目文件夹中打开命令窗口，然后运行

```
Convert.exe -1 YourDataModule.dfm 
```

该命令说要就地转换 ( `-i`)，这意味着现有二进制文件`.dfm`被新文本 .dfm 覆盖（以及我强调**首先制作备份副本**的原因）。如果不想覆盖，可以省略`-i`开关，它会`YourDataModule.txt`在文件夹中创建一个文件；然后您可以手动重命名`YourDataModule.dfm`为其他名称，然后重命名`YourDataModule.txt`为`YourDataModule.dfm`.

# android - NoClassDefFoundError, OnLayoutChangeListener and Intellij IDEA

> ID：14569354
> 
> 赞同：0
> 
> 时间：2013-01-28T19:11:39.093
> 
> 标签：android, intellij-idea

I've read that `OnLayoutChangeListener` is not available under API Level 11\. However, IDEA compiles this project successfully for 2.3.3 (but not for 2.2), and it crashes, of course. And I don't know even places where those caveats are hidden. It'll shot one day.

I'm using IDEA 12 EAP. Is it a bug? Should I ask the support?

# java - Java、NetBeans IDE 和 JTextField

> ID：14569355
> 
> 赞同：0
> 
> 时间：2013-01-28T19:11:43.780
> 
> 标签：java, swing, netbeans, netbeans-7, jtextfield

很遗憾，我关于 SO 的第一个问题是如此愚蠢，但我无法解决这个问题。

经过数小时的“蒸馏”后，我将问题简化为：

我使用 Netbeans 制作了一个 JFrame，并在其中放入了一个 Jbutton1 和一个 JTextField（名为 sinonimo）。这个想法是使用文本字段来获取用户输入。所以我像这样设置按钮的onClick动作

```
private void jButton1MouseClicked(java.awt.event.MouseEvent evt) {                                      

    System.out.println(sinonimo.getText());

} 
```

问题是：我可以在文本字段中输入任何内容，getText() 方法将只返回在 Netbeans 的“文本”属性中设置的字符串，它永远不会改变。

我是否错过了有关 java 的一些重要信息？有人能指出我正确的方向吗？

编辑：在复制完整代码时，我发现了问题：在框架的构造函数中，initComponents() 被调用了两次，生成了另一个无法从 MouseClicked 事件中访问的文本字段副本（我认为）。现在一切似乎都很好，谢谢你们的照明反应！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:31:21.237

使用 JTextField，如果您调用 getText()，如果索引超出范围或 Document 为 null，它将返回 null。如果您可以发布更多代码，我可以进一步帮助解决这个问题。使用以下代码，这可以很好地工作。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class Test {

    public static void main(final String[] args) {
        final JFrame frame = new JFrame();
        final JButton button = new JButton("Print");
        final JTextField field = new JTextField();
        frame.setLayout(new BorderLayout());
        frame.add(button, BorderLayout.NORTH);
        frame.add(field, BorderLayout.SOUTH);
        frame.setVisible(true);
        frame.pack();
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println(field.getText());
            }
        });
    }

} 
```

据我所知，在您发布更多代码之前，您打印它的方法没有被使用，文档返回 null 或者 sinonimo 实例没有正确添加并且没有按应有的方式运行。

# java - 使用多返回类型 json 对象解析 Gson

> ID：14569356
> 
> 赞同：1
> 
> 时间：2013-01-28T19:11:47.490
> 
> 标签：java, android, json, gson

我正在尝试解析一个好的 json 对象，当它好的时候是 int ，而当它不是字符串时，这是一个例子：

```
id: "11271",
title: "Top Gun: An IMAX 3D Experience",
year: 1986,
mpaa_rating: "PG",
runtime: 110,
release_dates: {
theater: "2013-02-08",
dvd: "1998-10-20"
},
ratings: {
critics_rating: "Rotten",
critics_score: 50,
audience_rating: "Upright",
audience_score: 48
},

id: "771270981",
title: "Identity Thief",
year: 2013,
mpaa_rating: "R",
runtime: "",
release_dates: {
theater: "2013-02-08"
},
ratings: {
critics_score: -1,
audience_score: 97
}, 
```

有问题的问题是“运行时”

问题的原因是：“java lang NumberFormatException：Invalid double：”

你肯定知道使用 Gson 你需要创建一个像这样的类：

```
private int runtime;
public void setRuntime(int runtime) {
    this.runtime = runtime;
}

public int getRuntime() {

        return runtime;
    }

} 
```

我怎么能欺骗程序，知道它不是我的 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:19:13.077

通过更改`private int runtime;`为`private String runtime;`

根据您之后所做的事情，您可以检查它是否为 int，如果是，则将其作为 int 处理，否则将其作为 String 处理。

# junit - JUnit JavaBean assert not null deep

> ID：14569358
> 
> 赞同：1
> 
> 时间：2013-01-28T19:12:01.737
> 
> 标签：junit, javabeans, assert, mybatis

How can a **JavaBean** be tested for **deep not null**?

I have a JavaBean with about **400 properties**. **MyBatis** fetches the data from a database and uses a **Result Map** to initialize the JavaBean. What I'm looking to do is test the Result Map for correctness. The first step I'm considering is to test for deep not null.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T21:02:08.490

使用 java.beans.Introspector 获取 BeanInfo 和 getPropertyDescriptors()。

# xdt-transform - xdt:transform with similar attributes

> ID：14569362
> 
> 赞同：3
> 
> 时间：2013-01-28T19:12:11.257
> 
> 标签：xdt-transform

I have a configuration file that contains WCF settings:

```
<host>
    <add baseAddress="net.tcp://myaddress.com:12345/MyService"/>
    <add baseAddress="net.tcp://anotheraddress:67890/MyOtherService"/>
</host> 
```

The 'add' element only has a baseAddress attribute and so I can't use the Match locator. How would one approach transforming multiple elements like in my example?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-31T19:55:15.223

我最终做的是将 xdt:Transform="Replace" 移动到父节点，例如：

```
<host xdt:Transform="Replace">
    <add baseAddress="net.tcp://myaddress.com:12345/MyService"/>
    <add baseAddress="net.tcp://anotheraddress:67890/MyOtherService"/>
</host> 
```

# android - Automatically inflating parent and children ListFragments?

> ID：14569363
> 
> 赞同：0
> 
> 时间：2013-01-28T19:12:11.613
> 
> 标签：android, android-layout, android-listview

Is there a way to automatically create a ListFragment containing just TextViews and when an item in the list is clicked, create another ListFragment with TextViews and so on, up until an item with no children at which point clicking on it launches some other action?

Basically I just need to drill down through categories and subcategories and sub-subcategories and so on until I reach a value that doesn't have it's own list and instead corresponds to another action entirely.

I feel like there might be an easy way to do this through XML, but I'm not 100% sure.

# kohana - Kohana 3 validation rule error - Illegal offset type in isset or empty

> ID：14569368
> 
> 赞同：0
> 
> 时间：2013-01-28T19:12:22.737
> 
> 标签：kohana, kohana-3

I am trying to validate file, but I get following error: Illegal offset type in isset or empty . What I am doing wrong ?

```
$array = Validate::factory($_FILES);
             $array->rule($_FILES['image'], 'Upload::not_empty');

             if ($array->check())
             {
               $directory = DOCROOT.'uploads/';
               $filepath = Upload::save($_FILES['image'], 'SDFFasreixcsd.jpg', $directory);
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:40:14.963

1`Validation`不使用`Validate`
2\. 将文件名作为第一个参数传递

```
$validation = Validation::factory($_FILES)->rule('image', 'Upload::not_empty');  
if ($validation->check())  
{  
       // Your code  
} 
```

# twitter-bootstrap - Bootstrap navbar between 768px and 979px is not centered

> ID：14569372
> 
> 赞同：0
> 
> 时间：2013-01-28T19:12:44.797
> 
> 标签：twitter-bootstrap

Just look at this: [http://jsfiddle.net/QA6Rs/1/](http://jsfiddle.net/QA6Rs/1/)

I'm trying to solve my problem since 3h trying to replace classes.. and I give up.

What I'm trying to do is to make navbar full-width when screen width is between 768px and 979px. As you can see on jsfiddle, the navbar (when resizing) is not centered with the container.

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <div class="row">
        <div class="span8 offset2">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </a>

      <a class="brand" href="#">Kipi</a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav pull-right">
          <li class="active"><a href="#"><i class="icon-home"></i> <small>...</small></a></li>
          <li><a href="#"><i class="icon-plus-sign"></i> <small>Contact</small></a></li>
          <li><a href="" title="Grid"><i class="icon-th"></i></a></li>
        </ul>
      </div> <!-- end .nav-collapse -->

    </div>
    </div>
    </div> <!-- end .container -->
  </div>
</div>

<div class="content container">
<div class="row">
  <div class="span8 offset2">
    <section>
      d<br>......
    </section>
  </div>
</div> 
```

```
.content.container { margin-top: 25px;  }
.content.container .row {  }
.content.container .row .span8 { background: #000;  }
.content.container .row .span8 > section { padding: 50px;  } 
```

I would like to display navbar full-width between 768px and 979px of screen width Any ideas appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:07:18.567

这应该适合你：

```
@media (max-width: 979px) and (min-width: 768px) {
  .navbar-inner .span8 {
    width:100%;
    padding-left: 0px;
    padding-right:0px;
  }
  .navbar-inner .offset2 {
    margin-left:10px;
  }
  .navbar .brand {
    padding-left:20px;
  }
  .btn.btn-navbar {
    margin-right:20px;
  }
} 
```

在此处查看实际操作：http: [//jsfiddle.net/QA6Rs/29/](http://jsfiddle.net/QA6Rs/29/)

但是，我不确定为什么您需要在导航栏中包含 row 和 span8 。[在http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)的响应式导航栏中检查响应式导航栏示例。

# php - How to stop Gravatar setting cookies

> ID：14569373
> 
> 赞同：3
> 
> 时间：2013-01-28T19:12:50.713
> 
> 标签：php, html, cookies, gravatar

I am using the Gravatar service on my website. However there is a problem: it sets two cookies, `gravatar` and `__qca`, which cause users with 3rd party cookies blocked to see a warning that the site tried to set 3rd party cookies. I don't want this to happen.

The cookies themselves are obviously useless - Gravatar works fine if I block them. They are likely for tracking purposes, which is another reason to block them.

My questions to Gravatar have not been answered.

So how can I stop Gravatar setting cookies?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T00:38:24.057

在我的第二封电子邮件之后，我收到了这样的回复：

> 嘿，
> 
> 谢谢您联络我们。我们目前正在调查设置这些 cookie 的原因，并检查我们是否可以在没有任何影响的情况下删除它们。一旦我们为您找到答案，我会尽快通知您！
> 
> 最好的，
> 
> 菲尔 WordPress.com | 自动公司

如果他们再次与我联系，我会更新此信息。

* * *

**编辑：**我没有收到他们的另一封电子邮件，但看起来这些 cookie 不再在 Gravatar 图像请求中设置。感谢格拉瓦塔！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-05T06:55:08.920

GDPR wants me to communicate every possible privacy risk (that includes cookies).

My conclusion: I am not going to use avatar any more.

# algorithm - Algorithmically generate a Zebra/Einstein puzzle

> ID：14569375
> 
> 赞同：22
> 
> 时间：2013-01-28T19:12:51.737
> 
> 标签：algorithm, zebra-puzzle

Firstly I'm not necessarily looking for a complete algorithm I can just copy and paste, then call it a day. Any "general approach" solutions would be fine for me!

This entire post was spurred by a slow day at work, and stumbling upon [this site](http://www.mensus.net/brain/logic.shtml) and not being able to figure out how they implemented their generator.

# The Problem

For those of you who don't know, the "Zebra Puzzle" or "Einstein's Puzzle" is a famous logic puzzle that you've probably ran into before.

The full wiki article is [here](http://en.wikipedia.org/wiki/Zebra_Puzzle), but I'll post the relevent bits.

```
There are five houses.
The Englishman lives in the red house.
The Spaniard owns the dog.
Coffee is drunk in the green house.
The Ukrainian drinks tea.
The green house is immediately to the right of the ivory house.
The Old Gold smoker owns snails.
Kools are smoked in the yellow house.
Milk is drunk in the middle house.
The Norwegian lives in the first house.
The man who smokes Chesterfields lives in the house next to the man with the fox.
Kools are smoked in the house next to the house where the horse is kept. 
The Lucky Strike smoker drinks orange juice.
The Japanese smokes Parliaments.
The Norwegian lives next to the blue house.

Now, who drinks water? Who owns the zebra? In the interest of clarity, it must be
added that each of the five houses is painted a different color, and their inhabitants
are of different national extractions, own different pets, drink different beverages 
and smoke different brands of American cigarets [sic]. One other thing: in statement 
6, right means your right. 
```

This is all well and good. I've found several concise and neat ways online to solve this problem, especially using constraint programming. However, what interests me is making more of these types of puzzles.

# Making More

Obviously, a matrix representation is a logical way to think about this. With each column containing a person, house, what they drink, what type of car they drive, etc.

My initial thought was to start with a randomly generated grid that is complete (ie, solved) then (somehow) create hints from the solved version that uniquely identify it. Every time something can be determined, it's removed from the grid.

Ripping off the site I listed at the beginning, the following "hints" that can be used to solve the grid can be of the following type:

*   The person/animal/plant lives/grows in a given house.

*   The person/animal/plant does not live/grow in a given house.

*   The person/animal/plant lives in the same house as the other person/animal/plant.

*   The person/animal/plant is a direct neighbor of the other person/animal/plant.

*   The person/animal/plant is the left or right neighbor of other person/animal/plant.

*   There is one house between the person/animal/plant and the other person/animal/plant.

*   There is one house between the person/animal/plan and the other person/animal/plant on the left or right.

*   There are two houses between the person/animal/plant and the other person/animal/plant.

*   There are two houses between the person/animal/plan and the other person/animal/plant on the left or right.

*   The person/animal/plant lives left or right from the other person/animal/plant.

You can see how these could be generalized, extended, etc;

The difficulty is, using my approach (starting with a complete grid and generating these hints), I'm not sure how to make sure the set of hints I create would absolutely result in the target grid.

For example, if you say "The Englishman does not own a pine tree" you cannot decisively pair two things together at any given time in the puzzle. Yet if there were only two trees remaining to solve for, this could in fact be a decisive piece of evidence.

Am I thinking about this the entirely wrong way? Would a better approach be to create a grid with some randomized, pre-defined known elements (ie, the red house is in the middle) and then build up the grid using these hints as rules for building?

Any advice, articles to read, programming techniques to learn about, etc. would be greatly appreciated!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T20:00:14.073

这是一个使用求解器的简单算法：

1.  生成一个随机拼图实例。

2.  建立一个包含与这个谜题实例有关的所有可能线索的集合*C。*（可能的线索是有限的，实际上非常少：例如，如果有 5 个房子，则有 5 个可能的线索，形式为“A 住在 B 房子”，8 个可能的线索，形式为“A 住旁边的房子B”，等等。）

3.  *选择C*​​中线索的随机排列*c* [1] , *c* [2] , ..., *c* [*n*]。

**   设置*i* = 1。

    *   如果*i* > *n*，我们就完成了。线索集*C*是最小的。

    *   令*D* = *C* - { *c* [*i*] }。*在线索集D*上运行你的求解器并计算可能的解决方案的数量。

    *   如果只有一个解，则设置*C* = *D*。

    *   设置*i* = *i* + 1 并返回步骤 5。* 

 *（您可以通过批量删除线索而不是一次删除一条线索来加快此过程，但这会使算法更难以描述。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:40:11.017

我对这个解决方案并不完全有信心，但这就是我的处理方式：

从一个随机的解决方案开始（即，温室持有吸 LM 的波兰人，红房子持有抽丁香的爱尔兰人等）。您可以将该解决方案视为语句之间的关系图。其中每个元素（抛光剂、红房子等）通过“是”边缘或“无边缘”连接到所有其他元素（在我们的例子中，抛光剂通过“是”边缘连接到温室，并连接到带有“无边”的丁香（在许多其他边中，这个初始图是一个完整的有向图）。

现在，如果你随机去掉边，直到你得到一个最小的连通图，你应该有一个代表一个可解谜题的图。将每个 yes 边缘转换为“foo is/does bar”，将每个 no 边缘转换为“foo is not/doesn't bar”。

直觉上，这听起来对我来说是正确的。但同样，这绝不是正式或公认的方式，而且可能是完全错误的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-09T10:08:04.373

你也可以反过来做（这也会给你一个求解器）：

1.  生成*S*，所有可能的解决方案（即表格）的列表。
2.  生成一个随机事实*f*（例如：挪威人有一只猫）。
3.  设置*T = S*
4.  *从T*中过滤掉所有违反*f*的解决方案。
5.  如果*|T| = 0*然后转到*2*（事实与前一个相矛盾）
6.  如果*|T| < |S|* 然后设置*S = T*和*F.append(f)*（事实尚未体现在先前的事实中）
7.  如果 |S| > 1 然后转到 2

一旦完成 - *F*将是导致*S*中剩下的唯一表格的事实列表。

诚然，这是非常蛮力的，并且可能不适用于 5X5 或更大的表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-05T19:26:19.427

有趣的是，“爱因斯坦”谜题（意在引用，所有“聪明”的东西都倾向于分配给爱因斯坦，可能更有魅力），与数独生成算法（通过适当的术语翻译）和魔方（3x3x3）有关求解算法

在数独的情况下，线索对应于网格上已经分配的数字，而缺失的信息对应于空槽

在魔方（我觉得更有趣）的情况下，线索对应于立方体的对称性（例如，绿色紧挨着红色，等等）并且通过重新对齐（解决）找到丢失的数据立方体

这是一个粗略的大纲，谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-26T13:56:51.083

这是另一个想法——一旦你生成了完整的网格，在你提供线索之前删除项目之前在你的手机上拍一张照片（或复制设计）。您可能会完成任务的一半而忘记原始/最终布局的外观，并且可以避免误导您的科目/应试者。

想为复活节做一个，类似的图案，5 个人，5 种巧克力，5 种年龄，5 种不同的复活节帽子，5 种不同的最喜欢的饮料，冰淇淋等。*

# ruby - Ruby - How to run rails console commands inside ruby file?

> ID：14569378
> 
> 赞同：0
> 
> 时间：2013-01-28T19:12:57.307
> 
> 标签：ruby, ruby-on-rails-3

Is it possible to create a ruby script that can execute rails commands?

Like:

rails_start.rb:

```
Class RailsStart
    #Start rails server
    rails server
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:17:12.840

你总是可以掏腰包。

```
system('rails server') 
```

或者

```
`rails server` # backticks 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:17:09.693

最简单的方法是在命令周围加上反引号：

```
`rails server` 
```

但是你想做什么？

# css - 在 ipad 上查看时，我的 CSS 菜单不会缩小

> ID：14569380
> 
> 赞同：0
> 
> 时间：2013-01-28T19:13:14.317
> 
> 标签：css, dotnetnuke

我在我的网站上创建了一个子菜单：http: [//fredrikstad.dnn2.labora-portal.no/](http://fredrikstad.dnn2.labora-portal.no/)

该菜单似乎适用于所有浏览器，但在 iPad 上查看时显得很宽。这看起来不太好，如果能帮助我解决这个问题，我将不胜感激。

最好的问候阿斯比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:16:08.290

门户 CSS，第 21 行左右。

在#snarvei 中，您的固定宽度为 940 像素。

固定的将防止您的菜单缩小。删除它，你的 li float:left 会在你收缩它时开始下降。

看起来不太好它是如何掉下来的，但这就是为什么你的菜单是固定宽度的，也是你问题的答案。

# javascript - 为什么这些符号链接会发生无限递归循环

> ID：14569390
> 
> 赞同：1
> 
> 时间：2013-01-28T19:14:00.623
> 
> 标签：javascript, node.js, unix, symlink, gruntjs

我正在使用节点来构建一些 jQuery 插件。每个测试都使用 grunt 和 qunit 运行，并包括来自共享目录的 jQuery 副本，该共享目录位于每个 grunt 服务器的 Web 根目录之上（即外部）。

```
/plug1 //web root for plug2's server
  /libs
    /jquery
  /tests
/plug2 //web root for plug2's server
  /libs
    /jquery
  /tests
/jquery
  jquery-1.9.0.js
   ...
  jquery-1.5.0.js 
```

所以我试图使用符号链接来在测试中包含 jQuery

```
ln -s ../jquery/* libs/jquery 
```

但是当我运行我的测试任务时（在从页面的查询字符串中读取版本号后，通过为正确的版本编写脚本标记来为每个版本的 jQuery 运行一次测试）我收到以下错误

```
Running "qunit:urls" (qunit) task
Testing test.html?jquery=1.5.0Error: ELOOP, stat '/Users/me/Sites/opensource/jquery/plug1/libs/jquery/jquery-1.5.js' 
```

我对 Unix 比较陌生，但我想这意味着存在一些无限递归错误或类似错误。

有没有办法让 node/grunt 使用符号链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:24:25.017

从 jquery 目录运行 ln。

```
cd plugs1/libs/jquery
ln -s ../../jquery/* .

cd ../../plugs2/libs/jquery
ln -s ../../jquery/* . 
```

# php - PHP/Ajax 轮询进度

> ID：14569394
> 
> 赞同：1
> 
> 时间：2013-01-28T19:14:08.987
> 
> 标签：php, ajax, jquery

我正在尝试实现 php 脚本循环的实时轮询，但到目前为止我的尝试没有运气。到目前为止，这是我所拥有的：

在表单提交时：

```
$.ajax({
data: $(this).serialize(),
success: showResponse,
url: 'process.php',
type: 'post'
});

function showResponse(){
$.ajax({
type: "GET",
url: "progress.php",
cache: false,
success: function(data) {
var response = $.parseJSON(data);
if (response.processing === true) {
console.log("Current Item: " + response.currentItem +
"Total Items: " + response.totalItems +
 "Percent Complete: " + response.percentComplete);
setTimeout(checkProgress, 1000);
});
} 
```

在 process.php 脚本中：

```
session_start();
echo json_encode(array("processing" => true));
$totalItems = 10000000;
$_SESSION['totalItems'] = $totalItems;
$_SESSION['processing'] = true;
$_SESSION['error'] = false;
for ($i=0; $i <= $totalItems; $i++) {
$_SESSION['currentItem'] = $i;
$_SESSION['percentComplete'] = round(($i / $totalItems * 100));
} 
```

在进度 php 脚本中：

```
session_start();
echo json_encode(array(
"processing" => $_SESSION['processing'],
"error" => $_SESSION['error'],
"currentItem" => $_SESSION['currentItem'],
"totalItems" => $_SESSION['totalItems'],
"percentComplete" => $_SESSION['percentComplete']
)
); 
```

不知道我在哪里出错了，但它所做的只是在完成 100% 后循环。任何建议将不胜感激！

*编辑* 我将上面的内容更改为在 process.php 中使用 apc：

```
apc_store('totalItems', $totalItems);
apc_store('processing', true);
apc_store('error', false);
apc_store('currentItem', $i);
apc_store('percentComplete', round(($i / $totalItems * 100))); 
```

在progress.php中：

```
echo json_encode(array(
"processing" => apc_fetch('processing'),
"error" => apc_fetch('error'),
"currentItem" => apc_fetch('currentItem'),
"totalItems" => apc_fetch('totalItems'),
"percentComplete" => apc_fetch('percentComplete')
    )
); 
```

仍然无法按照我希望的方式正常工作，是我做错了什么吗？它只显示错误值，直到脚本完成并显示 100%，就像之前的会话使用一样。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:21:20.877

会话信息是只能独占使用的资源，您没有考虑到这一点。

具体来说，在默认设置下，`session_start`PHP 会在包含会话数据的文件上获取排他锁。`session_write_close`在脚本退出或被调用之前，该文件不会解锁。

在您的示例中，`process.php`获取锁并开始工作。同时，`progress.php`尝试`session_start()`并且不能（由于锁定）。`process.php`在满足对进度信息的请求之前，需要有足够的时间来完成和退出（从而释放锁）。

您可以进行的一个会立即生效的小更改是在您的工作循环中调用`session_write_close`和`session_start`从：

```
for ($i=0; $i <= $totalItems; $i++) {
    session_start();
    $_SESSION['currentItem'] = $i;
    $_SESSION['percentComplete'] = round(($i / $totalItems * 100));
    session_write_close();
} 
```

这将允许两个脚本轮流锁定会话存储文件，因此您将看到事情按预期工作。但是，性能会**下降**（这是处理会话存储文件的一种非常不礼貌的方式）。

如果您需要在现实世界中执行类似的操作，则有必要利用会话数据以外的其他内容来启用 PHP 脚本之间的这种信息交换（例如 APC 或 memcached 等内存缓存）。

# html - colspan 怎么会在 Firefox 中中断？

> ID：14569398
> 
> 赞同：0
> 
> 时间：2013-01-28T19:14:16.957
> 
> 标签：html, firefox, html-table

我有一个简单的登录页面的表。我没有坚持这一点，因为我知道我可以把桌子拆开并以另一种方式进行样式设置，但似乎 colspan 在 Firefox 中被破坏了。

**HTML**

```
<table>
    <tbody>
        <tr>
            <td>E-mail:</td>
            <td colspan="2">
                <input type="textbox" name="email">
            </td>
        </tr>
        <tr>
            <td>Password:</td>
            <td colspan="2">
                <input type="password" name="password">
            </td>
        </tr>
        <tr>
            <td colspan="3">
                <input type="submit" value="Login">
            </td>
        </tr>
        <tr>
            <td colspan="2">Forgot your password?</td>
            <td style="width: 70px;"><a href="reset.php">Reset It</a>
            </td>
        </tr>
        <tr>
            <td colspan="2">Don't Have an Account?</td>
            <td><a href="create.php">Make One</a>
            </td>
        </tr>
    </tbody>
</table> 
```

**CSS**

```
table {
    width: 250px;
}
td:last-child {
    text-align: right;
} 
```

[**这是我表的 jsFiddle**](http://jsfiddle.net/yjZEC/)。在 Chrome 或 IE 中查看此表，您可以看到我正在尝试做的事情，即让电子邮件和密码的输入框与“忘记密码”和“没有帐户”这两个词重叠。所以 colspan 应该在 chrome 和 IE 中进行重叠，但在 Firefox 中没有。为什么它在 Firefox 中失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:21:42.573

在我看来，Firefox 正确显示它。文本在 IE 和 Chrome 中溢出。您实际上需要有 3 列才能使您`colspan`的 s 工作：

```
<table>
  <tbody>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
... 
```

# sql - Oracle SQL 表达式根据所选月份汇总六个月的付款

> ID：14569400
> 
> 赞同：0
> 
> 时间：2013-01-28T19:14:30.863
> 
> 标签：sql, oracle, date, sum, period

基本上我要做的是计算预计期间CreditPayments的平均百分比和CashPayments的平均百分比（回溯3个月，然后在前六个月总计所有正确类型的paymnents）

因此，如果平均（在正确的回溯期内）= 75% 的信用和 25% 的现金，那么对于我那个月的未结应收账款，我可以预测什么百分比将是信用，什么百分比将是现金。我想运行它 12 个月，每个 MOS 的回溯都在变化。

现在我的结果总是0，这显然是错误的。我知道最初的内部查询是正确的；但是，当外部查询运行时会出现问题。我认为问题出在T1上。MOS，我认为这限制了结果。任何帮助将不胜感激。

```
SELECT
    T1.Facility Facility
    , T1.CustType CustType
    , T1.MOS MOS
    , SUM(CASE WHEN (T1.MOS BETWEEN ADD_MONTHS(T1.MOS,-9) AND (ADD_MONTHS(T1.MOS,-3)-1) THEN T1.CredPmts ELSE 0 END)/SUM(CASE WHEN (T1.MOS BETWEEN ADD_MONTHS(T1.MOS,-9) AND (ADD_MONTHS(T1.MOS,-3)-1) THEN T1.Charges ELSE 0 END)
    , SUM(CASE WHEN (T1.MOS BETWEEN ADD_MONTHS(T1.MOS,-9) AND (ADD_MONTHS(T1.MOS,-3)-1) THEN T1.CashPmts ELSE 0 END)/SUM(CASE WHEN (T1.MOS BETWEEN ADD_MONTHS(T1.MOS,-9) AND (ADD_MONTHS(T1.MOS,-3)-1) THEN T1.Charges ELSE 0 END)
FROM
(
SELECT
    T.FACILITY Facility
    , T.CUSTTYPE CustType
    , trunc(to_date(T.SERVICEDATE,'j'),'MONTH') MOS
    , SUM(CASE WHEN T.TYPE = 'C' THEN T.AMOUNT ELSE 0 END) Charges
    , SUM(CASE WHEN (T.TYPE IN ('P1','62','12','75','P6','23') THEN T.AMOUNT ELSE 0 END CredPmts
    , SUM(CASE WHEN (T.TYPE IN ('92','57','P3','P9','26','39') THEN T.AMOUNT ELSE 0 END CashPmts
FROM TRANSTABLE T
WHERE
    T.FACILITY = '123'
    AND T.SERVICEDATE BETWEEN to_char(ADD_MONTHS(to_date('20120101', 'yyyymmdd'),-9), 'j') AND to_char(to_date('20121231', 'yyyymmdd'), 'j')
GROUP BY
    T.FACILITY
    , T.CUSTTYPE
    , trunc(to_date(T.SERVICEDATE,'j'),'MONTH')
)T1
GROUP BY
    T1.Facility
    , T1.CustType
    , T1.MOS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:49:57.447

`CASE WHEN`外部查询的子句中有不匹配的括号：

`WHEN (T1.MOS BETWEEN ADD_MONTHS(T1.MOS,-9) AND (ADD_MONTHS(T1.MOS,-3)-1)`**)**

所有四个地方。你能检查一下吗？

# android - 单击列表视图的项目时出错

> ID：14569402
> 
> 赞同：0
> 
> 时间：2013-01-28T19:14:39.147
> 
> 标签：android

我是 android 新手，我正在开发一个应用程序，它进行 mysq 查询并返回数据，我解释得更好，我有第一个屏幕，其中有一个名字，例如收入，并根据如果找到返回姓名和姓氏发送给彼得到目前为止，在屏幕上显示的列表视图中的另一个很好，问题是当我点击这个名字时应该显示另一个屏幕，这也应该显示这个人的所有数据应该显示姓 cedula 等等......但是 q 通过单击给我一个错误这是我得到 logcat 的错误

```
01-17 16:03:49.590: E/AndroidRuntime(1072): FATAL EXCEPTION: main
01-17 16:03:49.590: E/AndroidRuntime(1072): android.os.NetworkOnMainThreadException
01-17 16:03:49.590: E/AndroidRuntime(1072): at android.os.StrictMode$AndroidBlockGuardPolicy.onNe twork(StrictMode.java:1117)
01-17 16:03:49.590: E/AndroidRuntime(1072): at libcore.io.BlockGuardOs.connect(BlockGuardOs.java: 84)
01-17 16:03:49.590: E/AndroidRuntime(1072): at libcore.io.IoBridge.connectErrno(IoBridge.java:127 )
01-17 16:03:49.590: E/AndroidRuntime(1072): at libcore.io.IoBridge.connect(IoBridge.java:112)
01-17 16:03:49.590: E/AndroidRuntime(1072): at java.net.PlainSocketImpl.connect(PlainSocketImpl.j ava:192)
01-17 16:03:49.590: E/AndroidRuntime(1072): at java.net.PlainSocketImpl.connect(PlainSocketImpl.j ava:459)
01-17 16:03:49.590: E/AndroidRuntime(1072): at java.net.Socket.connect(Socket.java:842)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.conn.scheme.PlainSocketFactory.con nectSocket(PlainSocketFactory.java:119)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.conn.DefaultClientConnectionO perator.openConnection(DefaultClientConnectionOper ator.java:144)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.conn.AbstractPoolEntry.open(A bstractPoolEntry.java:164)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.conn.AbstractPooledConnAdapte r.open(AbstractPooledConnAdapter.java:119)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.client.DefaultRequestDirector .execute(DefaultRequestDirector.java:360)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.client.AbstractHttpClient.exe cute(AbstractHttpClient.java:555)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.client.AbstractHttpClient.exe cute(AbstractHttpClient.java:487)
01-17 16:03:49.590: E/AndroidRuntime(1072): at org.apache.http.impl.client.AbstractHttpClient.exe cute(AbstractHttpClient.java:465)
01-17 16:03:49.590: E/AndroidRuntime(1072): at com.example.taller06oct.JSONParser.makeHttpRequest (JSONParser.java:62)
01-17 16:03:49.590: E/AndroidRuntime(1072): at com.example.taller06oct.EditEmpleadosActivity$GetE mpleadoDetails$1.run(EditEmpleadosActivity.java:13 4)
01-17 16:03:49.590: E/AndroidRuntime(1072): at android.os.Handler.handleCallback(Handler.java:725 )
01-17 16:03:49.590: E/AndroidRuntime(1072): at android.os.Handler.dispatchMessage(Handler.java:92 )
01-17 16:03:49.590: E/AndroidRuntime(1072): at android.os.Looper.loop(Looper.java:137)
01-17 16:03:49.590: E/AndroidRuntime(1072): at android.app.ActivityThread.main(ActivityThread.jav a:5039)
01-17 16:03:49.590: E/AndroidRuntime(1072): at java.lang.reflect.Method.invokeNative(Native Method)
01-17 16:03:49.590: E/AndroidRuntime(1072): at java.lang.reflect.Method.invoke(Method.java:511)
01-17 16:03:49.590: E/AndroidRuntime(1072): at com.android.internal.os.ZygoteInit$MethodAndArgsCa ller.run(ZygoteInit.java:793)
01-17 16:03:49.590: E/AndroidRuntime(1072): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:560)
01-17 16:03:49.590: E/AndroidRuntime(1072): at dalvik.system.NativeStart.main(Native Method) 
```

我正在审查，显然问题出在转换 q json 但正如我所说我是 java 新手，android 不明白如何修复它，我留下我的 Java 代码，顺便说一下我使用 AsyncTask 会提到.. .

```
try {
// Building Parameters
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("cedula", cedula));
Log.i("1","busca empleado para cargar detalles");
// getting Empleado details by making HTTP request
// Note that Empleado details url will use GET request
**JSONObject json = jsonParser.makeHttpRequest(
url_detalles_empleado, "GET", params);**
Log.i("1","llama a php busqueda");

// check your log for json response
Log.d("Single Empleado Details", json.toString());

// json success tag
success = json.getInt(TAG_SUCCESS); 
```

在此先感谢，希望您的帮助谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:17:02.790

您不能在主线程中进行网络操作。

结帐 AsyncTask [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

用于无痛穿线。

# actionscript-3 - 1084：语法错误：在程序结束之前需要右括号。- AS3

> ID：14569406
> 
> 赞同：0
> 
> 时间：2013-01-28T19:14:52.120
> 
> 标签：actionscript-3, syntax-error

这件事有什么错误 - ：

`var decodeChars:Vector.<int> = new <int>[-1, -1, -1, -1, -1];`

我收到四个编译器错误，三个说“1084：语法错误：在程序结束之前需要右括号”。第四个说“1100：语法错误：XML 没有匹配的开始和结束标记。”。

实际问题是什么？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:37:01.397

[如http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#Vector()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#Vector())所示，您的代码似乎格式正确

1：编译前打开调试模式（发布设置>Flash>允许调试）。从给出的错误来看，听起来这条线并不是问题的原因。调试模式会告诉你哪一行抛出错误。

2：正如 The_asMan 已经提到的，1084 表示您缺少右括号。确保正确缩进代码，这个问题应该很明显。

3: 1100 表示您加载的 XML 文件格式错误。通过语法验证器运行您的 XML，例如[http://validator.w3.org/](http://validator.w3.org/)

# d3.js - d3 文本元素的读取宽度

> ID：14569415
> 
> 赞同：34
> 
> 时间：2013-01-28T19:15:19.763
> 
> 标签：d3.js

我想在`<text>`创建后读取在 d3 中创建的元素的宽度。

我试过了

```
svg.selectAll("text")
    .each(function () {
        console.log('text', d3.select(this).style("width"));
    }); // 'auto' 
```

和

```
svg.selectAll("text")
    .each(function () {
        console.log('text', $(this).css("width"));
    }); // '0px' 
```

提前致谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-28T19:35:12.803

在选择方法（例如 attr）中：

```
 this.getComputedTextLength(). 
```

在一个元素的选择中，你可以说

```
 selection.node().getComputedTextLength(). 
```

您还可以使用**getBBox**作为宽度和高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T08:00:44.827

您可以使用：

```
var wh = {w:-1,h:-1};
Array.from(document.querySelectorAll('text')).map(function(ele) {
  var bbox = ele.getBoundingClientRect();
  wh = {
   w: (wh.w<bbox.width) ? bbox.width :wh.w,
   h: (wh.h<bbox.height) ? bbox.height :wh.h
  }
}) 
```

在此之后`wh.w`将包含最大宽度`wh.h`并将包含任何文本的最大高度。然后，您应该输入更精确的 CSS 选择器以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-17T06:29:28.027

基于 Rachel Gallen 使用`getComputedTextLength()`2020 年创建的函数的示例，该函数适用于 Chrome。

```
<svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="800px" height="600px">
    <script type="text/javascript" href="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/JavaScript">
        // select Tooltip <text> element by 'id' using d3 library
        var tooltip = d3.select("#tooltip-text");
        // change Tooltip text 
        var sTooltip = "tooltip string with more information";
        tooltip.node().innerHTML = sTooltip;

        // compute text length
        var iTextLength = tooltip.node().getComputedTextLength();
    </script>

    <rect id='tooltip-rect' x='20' y='20' width='100' height='25' fill="yellow"/>
    <text id='tooltip-text' x='0' y='0'>
        Tooltip: ?
    </text>
</svg> 
```

使用此技术，我现在在将鼠标拖动到某些设备上时有工具提示。

[![带有工具提示的电气模式](../Images/7b492971c98093071ed21fd9cb42aec4.png)](https://i.stack.imgur.com/MSSjN.png)

```
document.addEventListener("DOMContentLoaded", function(event) { 

var tooltip = d3.select("#tooltip-text");
var toolrec = d3.select("#tooltip-rect");
var iTextLength = 0;

d3.select("svg").selectAll("use")
    .on("mouseover", function ()
		{
		var sTooltip = "";

        var e = this.nextElementSibling;
	    if (e != null)
	        {
		    if (e.className.baseVal == "info")
		        {
	            sTooltip = e.innerHTML;
                }
            }

        if (sTooltip == "")
            {
            sTooltip = this.href.baseVal;
            }

        if (sTooltip == "")
            {
            sTooltip = "? Tooltip";
            }

        tooltip.node().innerHTML = sTooltip;
		iTextLength = tooltip.node().getComputedTextLength();
		tooltip.style("opacity", "1");
		toolrec.style("opacity", "1");
		})
    .on("mousemove", function ()
		{
        toolrec.attr("x", d3.select(this).attr("x") - 5);
        toolrec.attr("y", d3.select(this).attr("y") - 12);
        toolrec.attr("width", iTextLength + 10);
        tooltip.attr("x", d3.select(this).attr("x"));
        tooltip.attr("y", d3.select(this).attr("y"));
		})
    .on("mouseout", function ()
		{
        tooltip.style("opacity", "0");
        toolrec.style("opacity", "0");
		return true;
		});

});
```

```
:root {
    --line-color: black;
    --line-width: 2;
    }

line, polyline, rect, circle, path {
    stroke-width: var(--line-width);
    stroke: var(--line-color);
    }

#tooltip-text {
    max-width: 800px;
    text-align:left;
    transition: opacity 0.4s;
    pointer-events:none;
    opacity: 0;
    padding: 4px;
    font-family: Arial;
    font-size: 14;
	}

#tooltip-rect {
    background: yellow;
    border:solid gray;
    max-width: 800px;
    transition: opacity 0.4s;
    pointer-events:none;
    opacity: 0;
	}

svg {
    margin:10px 20px;
    overflow:visible; 
	}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.min.js"></script>
<svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="8000px" height="6000px">
  <defs>
    <g id="differentiel">
      <rect x="-5" y="0" width="40" height="40" style="opacity:0" />
      <g transform="rotate(-20,0,0)">
        <polyline points="0 0 0 40 5 40 5 35 0 35" fill="none" />
      </g>
    </g>
    <g id="disjoncteur" transform="rotate(-20,0,0)">
      <polyline points="0 0 0 40 5 40 5 35 0 35" fill="none" />
    </g>
    <g id="prise">
      <path d="m40,-20 a20,20 0 0,0 0,40 z" fill="white" style="stroke:white" />
      <line x1="0" y1="0" x2="20" y2="0" />
      <line x1="20" y1="-15" x2="20" y2="15" />
      <path d="m40,-20 a20,20 0 0,0 0,40" fill="none" />
      <line x1="40" y1="-20" x2="40" y2="-28" />
      <line x1="40" y1="20" x2="40" y2="28" />
    </g>
    <g id="connexion">
      <rect x="0" y="-10" width="20" height="20" fill="white" />
    </g>
    <g id="lampe">
      <circle cx="0" cy="0" r="15" stroke="none" style="opacity:0" />
      <line x1="-10" y1="-10" x2="10" y2="10" />
      <line x1="10" y1="-10" x2="-10" y2="10" />
    </g>
    <g id="interrupteur">
      <circle cx="10" cy="0" r="10" fill="white" />
      <g transform="rotate(-60 10 0)">
        <line x1="20" y1="0" x2="50" y2="0" />
      </g>
    </g>
    <g id="int-sans-fil">
      <rect x="0" y="-5" width="10" height="10" fill="white" />
    </g>
    <g id="int-wifi">
      <rect x="0" y="-5" width="10" height="10" fill="white" />
    </g>
    <g id="int-radio">
      <rect x="0" y="-5" width="10" height="10" fill="white" />
    </g>
    <g id="int-unipolaire">
      <circle cx="10" cy="0" r="10" fill="white" />
      <g transform="rotate(-60 10 0)">
        <line x1="20" y1="0" x2="50" y2="0" />
        <line x1="50" y1="0" x2="50" y2="5" />
      </g>
    </g>
    <g id="int-bipolaire">
      <circle cx="10" cy="0" r="10" fill="white" />
      <g transform="rotate(-60 10 0)">
        <line x1="20" y1="0" x2="50" y2="0" />
        <line x1="50" y1="0" x2="50" y2="5" />
        <line x1="45" y1="0" x2="45" y2="5" />
      </g>
    </g>
    <g id="int-va-et-vient">
      <circle cx="10" cy="0" r="10" fill="white" />
      <g transform="rotate(-60 10 0)">
        <line x1="20" y1="0" x2="50" y2="0" />
        <line x1="50" y1="0" x2="50" y2="5" />
        <line x1="0" y1="0" x2="-30" y2="0" />
        <line x1="-30" y1="0" x2="-30" y2="-5" />
      </g>
    </g>
    <g id="inverseur">
      <g transform="translate(w²²0 0)">
        <circle cx="10" cy="0" r="10" fill="white" />
        <g transform="rotate(-60 10 0)">
          <line x1="20" y1="0" x2="50" y2="0" />
          <line x1="50" y1="0" x2="50" y2="5" />
          <line x1="0" y1="0" x2="-30" y2="0" />
          <line x1="-30" y1="0" x2="-30" y2="-5" />
        </g>
        <g transform="rotate(60 10 0)">
          <line x1="20" y1="0" x2="50" y2="0" />
          <line x1="50" y1="0" x2="50" y2="-5" />
          <line x1="0" y1="0" x2="-30" y2="0" />
          <line x1="-30" y1="0" x2="-30" y2="5" />
        </g>
      </g>
    </g>
    <g id="machine-à-laver">
      <rect x="0" y="-20" width="40" height="40" fill="white" fill-opacity="0.0" />
      <circle cx="20" cy="0" r="12" stroke="blue" fill="none" />
      <circle cx="20" cy="0" r="5" stroke="blue" fill="red" />
    </g>
    <g id="séchoir">
      <rect x="0" y="-20" width="40" height="40" fill="white" fill-opacity="0.0" />
      <circle cx="15" cy="-8" r="5" fill="none" />
      <circle cx="25" cy="-8" r="5" fill="none" />
      <circle cx="20" cy="8" r="5" fill="black" />
    </g>
    <g id="chauffe-eau">
      <circle cx="20" cy="0" r="20" fill="white" fill-opacity="0.0" />
      <circle cx="20" cy="0" r="15" fill="cyan" />
      <path d="m5,0 l 5,-5 l 10,10 l 10,-10 l 5,5" fill="none" />
    </g>
    <g id="chauffe-eau-direct">
      <circle cx="20" cy="0" r="20" fill="cyan" />
      <path d="m0,0 l 5,-5 l 10,10 l 10,-10 l 10,10 l 5,-5" fill="none" />
    </g>
    <g id="télérupteur">
      <rect x="0" y="-10" width="40" height="20" fill="white" />
      <path d="m5,5 h10 v-10 m20,10 h-10 v-10" fill="none" />
    </g>
    <g id="télérupteur-radio">
      <rect x="0" y="-10" width="40" height="20" fill="none" />
      <path d="m5,5 h10 v-10 m20,10 h-10 v-10" fill="none" />
      <path d="M25,15 A5,5 0 0,1 15,15" fill="none" stroke-width="1" />
      <path d="M30,15 A10,10 0 0,1 10,15" fill="none" stroke-width="1" />
      <path d="M35,15 A15,15 0 0,1 5,15" fill="none" stroke-width="1" />
    </g>
    <g id="télérupteur-wifi">
      <rect x="0" y="-10" width="40" height="20" fill="none" />
      <path d="m5,5 h10 v-10 m20,10 h-10 v-10" fill="none" />
    </g>
    <g id="bouton-poussoir">
      <circle cx="10" cy="0" r="10" fill="none" />
      <circle cx="10" cy="0" r="5" fill="red" />
    </g>
    <g id="transformateur">
      <circle cx="10" cy="0" r="10" fill="none" />
      <circle cx="20" cy="0" r="10" fill="none" />
    </g>
    <g id="lave-vaisselle">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
      <line x1="0" y1="-20" x2="40" y2="20" />
      <line x1="0" y1="20" x2="40" y2="-20" />
      <circle cx="20" cy="0" r="10" fill="white" />
    </g>
    <g id="plaque-cuisson">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
      <circle cx="30" cy="-10" r="5" stroke="blue" fill="none" />
      <circle cx="30" cy="10" r="5" stroke="blue" fill="none" />
      <circle cx="10" cy="10" r="5" stroke="blue" fill="none" />
    </g>
    <g id="télévision">
      <rect x="0" y="-20" width="60" height="40" fill="white" />
      <rect x="5" y="-15" width="50" height="30" fill="none" />
      <line x1="30" y1="20" x2="30" y2="25" />
      <line x1="20" y1="25" x2="40" y2="25" />
    </g>
    <g id="ordinateur">
      <rect x="0" y="-20" width="40" height="30" fill="white" />
      <rect x="5" y="-15" width="30" height="20" fill="none" />
      <rect x="0" y="15" width="40" height="10" fill="none" />
      <line x1="20" y1="20" x2="35" y2="20" />
    </g>
    <g id="four-classique">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
      <line x1="0" y1="-10" x2="40" y2="-10" />
      <circle cx="20" cy="5" r="5" fill="none" />
    </g>
    <g id="four-pyrolyse">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
    </g>
    <g id="micro-onde">
      <rect x="0" y="-20" width="40" height="40" fill="white" fill-opacity="0.0" />
      <g transform="scale(0.2 0.2)">
        <path d="M20 -30 C 40 -80 , 80 -80 , 100 -30 S 160 30, 180 -30" stroke="black" fill="none" />
        <path d="M20   0 C 40 -50 , 80 -50 , 100   0 S 160 50, 180   0" stroke="black" fill="none" />
        <path d="M20  30 C 40 -20 , 80 -20 , 100  30 S 160 80, 180  30" stroke="black" fill="none" />
      </g>
    </g>
    <g id="frigo">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
      <text x="20" y="6" dominant-baseline="middle" text-anchor="middle" font-size="24">*</text>
    </g>
    <g id="congélateur">
      <rect x="0" y="-20" width="40" height="40" fill="white" />
      <text x="20" y="4" dominant-baseline="middle" text-anchor="middle">***</text>
    </g>
    <g id="radiateur">
      <rect x="0" y="-15" width="60" height="30" fill-opacity="0.0" />
      <path d="m0,0 l5,0 l 5,-10 l 10,20 l 10,-20 l 10,20 l 10,-20 l 5,10 l5,0" fill="none" stroke="black" stroke-width="1" />
    </g>
    <g id="volet">
      <rect x="0" y="-20" width="40" height="40" fill-opacity="0.0" />
      <path d="M0,-15 h 40 M0,-10 h 40 M0,-5 h 40 M0,0 h 40 M0,5 h40" fill="none" stroke="black" stroke-width="1" />
    </g>
    <g id="spot">
      <path d="m10,-10 a10,10 0 0,0 0,20" fill="none" />
      <circle cx="10" cy="0" r="5" fill="yellow" />
      <g transform="rotate(-45,10,0)">
        <line x1="5" y1="0" x2="15" y2="0" stroke-width="1" />
        <line x1="10" y1="-5" x2="10" y2="5" stroke-width="1" />
      </g>
    </g>
    <g id="neon-simple">
      <line x1="0" y1="-5" x2="0" y2="5" stroke="black" />
      <line x1="40" y1="-5" x2="40" y2="5" stroke="black" />
      <rect x="0" y="-2" width="40" height="4" fill="yellow" stroke="black" stroke-width="1" />
    </g>
    <g id="neon-double">
      <line x1="0" y1="-7" x2="0" y2="7" stroke="black" />
      <line x1="40" y1="-7" x2="40" y2="7" stroke="black" />
      <rect x="0" y="-6" width="40" height="4" fill="yellow" stroke="black" stroke-width="1" />
      <rect x="0" y="2" width="40" height="4" fill="yellow" stroke="black" stroke-width="1" />
    </g>
    <g id="compteur">
      <rect x="0" y="-20" width="40" height="40" fill="none" />
      <line x1="0" y1="-10" x2="40" y2="-10" />
      <text x="20" y="5" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-size="16">kWh</text>
    </g>
  </defs>

<line x1='100' y1='50' x2='100' y2='90'/>
<text x ='110' y='70' fill='black' font-family='Arial' font-size='20'>Différenciel PRINCIPAL</text>
<text x ='110' y='100' fill='black' font-family='Arial' font-size='12'>&#x0394;300 mA</text>
<use href='#differentiel' x='100' y='90'/>
<line x1='100' y1='130' x2='100' y2='170'/>
<line x1='100' y1='170' x2='100' y2='210'/>
<text x ='110' y='190' fill='black' font-family='Arial' font-size='20'>B</text>
<text x ='110' y='220' fill='black' font-family='Arial' font-size='12'>10A</text>
<use href='#differentiel' x='100' y='210'/>
<desc class='info'>
B: éclairage Etage + Cave  + Hall + WC + cagibi +
</desc>
<line x1='100' y1='250' x2='100' y2='330'/>
<text x='90' y='334' fill='black' font-family='Arial' font-size='16' text-anchor='end'>B1</text>
<line x1='100' y1='330' x2='120' y2='330'/>
<use href='#int-va-et-vient' x='120' y='330'/>
<desc class='info'>
hall: interrupteur à droite des escaliers
</desc>
<use href='#int-va-et-vient' x='140' y='330'/>
<desc class='info'>
hall: interrupteur à gauche de la porte de la cuisine
</desc>
<line x1='160' y1='330' x2='200' y2='330'/>
<use href='#lampe' x='200' y='330'/>
<desc class='info'>
lampe Hall dans l'entrée
</desc>
<line x1='100' y1='330' x2='100' y2='410'/>
<text x='90' y='414' fill='black' font-family='Arial' font-size='16' text-anchor='end'>B7</text>
<line x1='100' y1='410' x2='120' y2='410'/>
<use href='#int-unipolaire' x='120' y='410'/>
<desc class='info'>
chambre Est: interrupteur à gauche de la porte
</desc>
<line x1='140' y1='410' x2='180' y2='410'/>
<use href='#lampe' x='180' y='410'/>
<desc class='info'>
lampe chambre Est (Musson)
</desc>
<line x1='100' y1='410' x2='100' y2='490'/>
<text x='90' y='494' fill='black' font-family='Arial' font-size='16' text-anchor='end'>B8</text>
<line x1='100' y1='490' x2='120' y2='490'/>
<use href='#int-va-et-vient' x='120' y='490'/>
<desc class='info'>
interrupteur à gauche de l'escalier
</desc>
<line x1='140' y1='490' x2='170' y2='490'/>
<use href='#inverseur' x='170' y='490'/>
<desc class='info'>
interrupteur à droite du passage entre caves
</desc>
<line x1='190' y1='490' x2='220' y2='490'/>
<use href='#int-va-et-vient' x='220' y='490'/>
<desc class='info'>
interrupteur à droite de la porte de garage
</desc>
<line x1='240' y1='490' x2='280' y2='490'/>
<use href='#lampe' x='280' y='490'/>
<desc class='info'>
lampes cave petit garage
</desc>
<line x1='100' y1='490' x2='100' y2='570'/>
<text x ='90' y='574' fill='black' font-family='Arial' font-size='16' text-anchor='end'>B12</text>
<line x1='100' y1='570' x2='120' y2='570'/>
<use href='#télérupteur-radio' x='120' y='570'/>
<use href='#int-radio' x='140' y='610'/>
<use href='#int-radio' x='160' y='610'/>
<use href='#int-radio' x='180' y='610'/>
<line x1='160' y1='570' x2='200' y2='570'/>
<use href='#lampe' x='200' y='570'/>
<desc class='info'>
lampe couloir étage Ouest (Signeulx)
</desc>
<line x1='100' y1='170' x2='350' y2='170'/>
<line x1='350' y1='170' x2='350' y2='210'/>
<text x ='360' y='190' fill='black' font-family='Arial' font-size='20'>C</text>
<text x ='360' y='220' fill='black' font-family='Arial' font-size='12'>25A</text>
<use href='#differentiel' x='350' y='210'/>
<desc class='info'>
C: triphasé cuisine
</desc>
<line x1='350' y1='250' x2='350' y2='330'/>
<text x ='340' y='334' fill='black' font-family='Arial' font-size='16' text-anchor='end'>C1</text>
<line x1='350' y1='330' x2='370' y2='330'/>
<use href='#connexion' x='370' y='330'/>
<desc class='info'>
connection directe
</desc>
<line x1='390' y1='330' x2='410' y2='330'/>
<line x1='410' y1='330' x2='430' y2='330'/>
<use href='#four-classique' x='430' y='330'/>
<desc class='info'>
four Siemens
</desc>
<line x1='350' y1='330' x2='350' y2='410'/>
<text x ='340' y='414' fill='black' font-family='Arial' font-size='16' text-anchor='end'>C2</text>
<line x1='350' y1='410' x2='370' y2='410'/>
<use href='#connexion' x='370' y='410'/>
<desc class='info'>
connection directe
</desc>
<line x1='390' y1='410' x2='410' y2='410'/>
<line x1='410' y1='410' x2='430' y2='410'/>
<use href='#micro-onde' x='430' y='410'/>
<desc class='info'>
micro-onde Siemens
</desc>
<line x1='350' y1='170' x2='530' y2='170'/>
<line x1='530' y1='170' x2='530' y2='210'/>
<text x ='540' y='190' fill='black' font-family='Arial' font-size='20'>Différentiel SECONDAIRE</text>
<text x ='540' y='220' fill='black' font-family='Arial' font-size='12'>&#x0394;30 mA</text>
<use href='#differentiel' x='530' y='210'/>
<line x1='530' y1='250' x2='530' y2='290'/>
<line x1='530' y1='290' x2='530' y2='330'/>
<text x ='540' y='310' fill='black' font-family='Arial' font-size='20'>E</text>
<text x ='540' y='340' fill='black' font-family='Arial' font-size='12'>16A</text>
<use href='#differentiel' x='530' y='330'/>
<desc class='info'>
E: éclairage et 2 prises dans salle de bain principale
</desc>
<line x1='530' y1='370' x2='530' y2='450'/>
<text x='520' y='454' fill='black' font-family='Arial' font-size='16' text-anchor='end'>E1</text>
<line x1='530' y1='450' x2='550' y2='450'/>
<use href='#int-unipolaire' x='550' y='450'/>
<desc class='info'>
interrupteur à gauche de la colonne de descente d'eau
</desc>
<line x1='570' y1='450' x2='610' y2='450'/>
<use href='#lampe' x='610' y='450'/>
<desc class='info'>
lampe salle de bain
</desc>
<line x1='530' y1='450' x2='530' y2='530'/>
<text x ='520' y='534' fill='black' font-family='Arial' font-size='16' text-anchor='end'>E2</text>
<use href='#prise' x='530' y='530'/>
<desc class='info'>
bloc prises à gauche de la colonne de descente d'eau
</desc>
<use href='#prise' x='550' y='530'/>
<desc class='info'>
bloc prises à gauche de la colonne de descente d'eau
</desc>
<line x1='530' y1='290' x2='680' y2='290'/>
<line x1='680' y1='290' x2='680' y2='330'/>
<text x ='690' y='310' fill='black' font-family='Arial' font-size='20'>F</text>
<text x ='690' y='340' fill='black' font-family='Arial' font-size='12'>16A</text>
<use href='#differentiel' x='680' y='330'/>
<desc class='info'>
F: Salle-de-bain ETAGE + prise TV + prise PC bureau
</desc>
<line x1='680' y1='370' x2='680' y2='450'/>
<text x ='670' y='454' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F1</text>
<use href='#prise' x='680' y='450'/>
<desc class='info'>
prise TV au Salon
</desc>
<line x1='680' y1='450' x2='720' y2='450'/>
<line x1='720' y1='450' x2='740' y2='450'/>
<use href='#télévision' x='740' y='450'/>
<desc class='info'>
TV Philips
</desc>
<line x1='680' y1='450' x2='680' y2='530'/>
<text x ='670' y='534' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F2</text>
<use href='#prise' x='680' y='530'/>
<desc class='info'>
prise PC au Bureau
</desc>
<line x1='680' y1='530' x2='720' y2='530'/>
<line x1='720' y1='530' x2='740' y2='530'/>
<use href='#ordinateur' x='740' y='530'/>
<desc class='info'>
ordinateur Dell
</desc>
<line x1='680' y1='530' x2='680' y2='610'/>
<text x ='670' y='614' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F3</text>
<line x1='680' y1='610' x2='700' y2='610'/>
<use href='#télérupteur-radio' x='700' y='610'/>
<use href='#int-radio' x='720' y='650'/>
<line x1='740' y1='610' x2='780' y2='610'/>
<use href='#lampe' x='780' y='610'/>
<desc class='info'>
Salle-de-bain: lampe plafond
</desc>
<line x1='680' y1='610' x2='680' y2='690'/>
<text x ='670' y='694' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F4</text>
<use href='#prise' x='680' y='690'/>
<desc class='info'>
Salle-de-bain: lampe meuble
</desc>
<line x1='680' y1='690' x2='680' y2='770'/>
<text x ='670' y='774' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F5</text>
<use href='#prise' x='680' y='770'/>
<desc class='info'>
Salle-de-bain: prise radiateur
</desc>
<line x1='680' y1='770' x2='720' y2='770'/>
<line x1='720' y1='770' x2='740' y2='770'/>
<use href='#radiateur' x='740' y='770'/>
<desc class='info'>
radiateur Jaga
</desc>
<line x1='680' y1='770' x2='680' y2='850'/>
<text x ='670' y='854' fill='black' font-family='Arial' font-size='16' text-anchor='end'>F6</text>
<use href='#prise' x='680' y='850'/>
<desc class='info'>
Salle-de-bain: bloc de prises sous le meuble
</desc>
<use href='#prise' x='700' y='850'/>
<desc class='info'>
Salle-de-bain: bloc de prises sous le meuble
</desc>
<line x1='680' y1='290' x2='860' y2='290'/>
<line x1='860' y1='290' x2='860' y2='330'/>
<text x ='870' y='310' fill='black' font-family='Arial' font-size='20'>G</text>
<text x ='870' y='340' fill='black' font-family='Arial' font-size='12'>16A</text>
<use href='#differentiel' x='860' y='330'/>
<desc class='info'>
G: Salle-de-bain PRINCIPALE + Bloc machines à laver
</desc>
<line x1='860' y1='370' x2='860' y2='450'/>
<text x ='850' y='454' fill='black' font-family='Arial' font-size='16' text-anchor='end'>G1</text>
<use href='#prise' x='860' y='450'/>
<desc class='info'>
bloc de prises à l'évier
</desc>
<use href='#prise' x='880' y='450'/>
<desc class='info'>
bloc de prises à l'évier
</desc>
<line x1='860' y1='450' x2='860' y2='530'/>
<text x ='850' y='534' fill='black' font-family='Arial' font-size='16' text-anchor='end'>G2</text>
<use href='#prise' x='860' y='530'/>
<desc class='info'>
lampe meuble
</desc>
<line x1='860' y1='530' x2='860' y2='610'/>
<text x ='850' y='614' fill='black' font-family='Arial' font-size='16' text-anchor='end'>G3</text>
<use href='#prise' x='860' y='610'/>
<desc class='info'>
bloc de prises au petit garage à gauche de l'évier
</desc>
<use href='#prise' x='880' y='610'/>
<desc class='info'>
bloc de prises au petit garage à gauche de l'évier
</desc>
<use href='#prise' x='900' y='610'/>
<desc class='info'>
bloc de prises au petit garage à gauche de l'évier
</desc>
<use href='#prise' x='920' y='610'/>
<desc class='info'>
bloc de prises au petit garage à gauche de l'évier
</desc>
<line x1='920' y1='610' x2='960' y2='610'/>
<line x1='960' y1='610' x2='980' y2='610'/>
<use href='#machine-à-laver' x='980' y='610'/>
<desc class='info'>
machine à laver
</desc>
<line x1='530' y1='170' x2='1080' y2='170'/>
<line x1='1080' y1='170' x2='1080' y2='210'/>
<text x ='1090' y='190' fill='black' font-family='Arial' font-size='20'>I</text>
<text x ='1090' y='220' fill='black' font-family='Arial' font-size='12'>16A</text>
<use href='#differentiel' x='1080' y='210'/>
<desc class='info'>
I: chambre étage Ouest (Signeulx)
</desc>
<line x1='1080' y1='250' x2='1080' y2='330'/>
<text x ='1070' y='334' fill='black' font-family='Arial' font-size='16' text-anchor='end'>I1</text>
<use href='#prise' x='1080' y='330'/>
<desc class='info'>
prise à gauche de la porte
</desc>
<line x1='1080' y1='330' x2='1080' y2='410'/>
<text x ='1070' y='414' fill='black' font-family='Arial' font-size='16' text-anchor='end'>I2</text>
<use href='#prise' x='1080' y='410'/>
<desc class='info'>
prise radiateur en dessous de la fenêtre
</desc>
<line x1='1080' y1='410' x2='1120' y2='410'/>
<line x1='1120' y1='410' x2='1140' y2='410'/>
<use href='#radiateur' x='1140' y='410'/>
<desc class='info'>
radiateur Siemens
</desc>
<line x1='1080' y1='410' x2='1080' y2='490'/>
<text x ='1070' y='494' fill='black' font-family='Arial' font-size='16' text-anchor='end'>I3</text>
<line x1='1080' y1='490' x2='1100' y2='490'/>
<use href='#connexion' x='1100' y='490'/>
<desc class='info'>
volet chambre étage Ouest
</desc>
<line x1='1120' y1='490' x2='1140' y2='490'/>
<line x1='1140' y1='490' x2='1160' y2='490'/>
<use href='#volet' x='1160' y='490'/>
<desc class='info'>
volet
</desc>
<line x1='1080' y1='490' x2='1080' y2='570'/>
<text x ='1070' y='574' fill='black' font-family='Arial' font-size='16' text-anchor='end'>I4</text>
<use href='#prise' x='1080' y='570'/>
<desc class='info'>
bloc de prises à gauche de la paque de cuisson en vitrocéramique
</desc>
<use href='#prise' x='1100' y='570'/>
<desc class='info'>
bloc de prises à gauche de la paque de cuisson en vitrocéramique
</desc>
<use href='#prise' x='1120' y='570'/>
<desc class='info'>
bloc de prises à gauche de la paque de cuisson en vitrocéramique
</desc>
<line x1='1080' y1='170' x2='1260' y2='170'/>
<line x1='1260' y1='170' x2='1260' y2='210'/>
<text x ='1270' y='190' fill='black' font-family='Arial' font-size='20'>J</text>
<text x ='1270' y='220' fill='black' font-family='Arial' font-size='12'>16A</text>
<use href='#differentiel' x='1260' y='210'/>
<desc class='info'>
J: Prises bloc de cuisson
</desc>
<line x1='1260' y1='250' x2='1260' y2='330'/>
<text x ='1250' y='334' fill='black' font-family='Arial' font-size='16' text-anchor='end'>J1</text>
<use href='#prise' x='1260' y='330'/>
<desc class='info'>
bloc de prises à droite de la plaque de cuisson en vitrocéramique
</desc>
<use href='#prise' x='1280' y='330'/>
<desc class='info'>
bloc de prises à droite de la plaque de cuisson en vitrocéramique
</desc>
<use href='#prise' x='1300' y='330'/>
<desc class='info'>
bloc de prises à droite de la plaque de cuisson en vitrocéramique
</desc>
<rect id='tooltip-rect' x='20' y='20' width='100' height='25' fill="yellow"/>
<text id='tooltip-text' x='20' y='20' dominant-baseline="middle" text-anchor="start">
Tooltip: ?
</text>
</svg>
```

# php - php json解码facebook上共享链接的curl_exec结果

> ID：14569416
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:15:20.030
> 
> 标签：php, json, facebook-graph-api, curl

我使用 curl php 在 facebook 上共享链接一切都很好，我得到了这个结果 `{ "id": "the_link_id" }`。我试图通过以下方式获取 ID：

```
$result = curl_exec($ch);
$json = json_decode($result);
$post_id = $json->{'id'};
echo $post_id; 
```

但我收到了这个错误：

> 试图获得非对象的属性......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:25:37.657

我找到了我刚刚添加的解决方案 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

# hibernate - 尽管在 WEB-INF/classes 中，log4j 没有找到 .properties 文件

> ID：14569418
> 
> 赞同：1
> 
> 时间：2013-01-28T19:15:25.667
> 
> 标签：hibernate, log4j, classloader

我有一个非常烦人的问题，其中 log4j 拒绝在我的新项目中找到属性文件。我正在使用 Hibernate4，它出于某些不虔诚的原因使用 jboss-logging。通过制作资源源文件夹，我的 WEB-INF/classes 中有一个 log4j.properties。我可以在 classes 文件夹中看到 log4j.properties，所以我知道 RAD 正在获取文件作为源。如下所示：

```
log4j.rootLogger=WARN, stdout
log4j.gov.usdoj=INFO

#Direct log messages to the console
log4j.appender.stdout = org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout = org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern = %d{yyyy-MM-dd HH:mm:ss} %c{2}[%M:%L] %p %m%n

# Hibernate logging options(INFO only shows startup messages)
#org.hibernate Log everything. This is a lot of information but it is useful for troubleshooting 
log4j.logger.org.hibernate=WARN
#org.hibernate.type Log all JDBC parameters 
log4j.logger.org.hibernate.type=WARN
#org.hibernate.SQL Log all SQL DML statements as they are executed (like show_sql setting) 
log4j.logger.org.hibernate.sql=WARN
#org.hibernate.tool.hbm2ddl Log all SQL DDL statements as they are executed 
log4j.logger.org.hibernate.tool.hbm2ddl=WARN
#org.hibernate.pretty Log the state of all entities (max 20 entities) associated with the session at flush time 
log4j.logger.org.hibernate.pretty=WARN
#org.hibernate.cache Log all second-level cache activity 
log4j.logger.org.hibernate.cache=WARN
#org.hibernate.transaction Log transaction related activity 
log4j.logger.org.hibernate.transaction=WARN
#org.hibernate.jdbc Log all JDBC resource acquisition 
log4j.logger.org.hibernate.jdbc=WARN
#org.hibernate.hql.internal.ast.AST Log HQL and SQL ASTs during query parsing 
log4j.logger.org.hibernate.hql.internal.ast.AST=WARN
#org.hibernate.secure Log all JAAS authorization requests 
log4j.logger.org.hibernate.secure=WARN 
```

但是我已经在其中放入了故意的错误（如 XML）并且它不会“爆炸”，所以我很确定 log4j 甚至没有找到它。启动时指向 (org.hibernate.type.BasicTypeRegistry) 时出现“无附加程序”错误。我在引导区域中有 hibernate-jpa，因为 RAD 有不同版本的它运行的同一个 jar，如果我们不将 hibernate-jpa 放在引导区域中，我们会检查 Orphan ManyToOne 错误。如果有人知道更好的解决方案，我想听听，因为我讨厌这样做。

但是手头的话题是，由于某种原因，在这个项目上我无法让 log4j 找到那个 log4j.properties 文件。我有点怀疑我是休眠的类加载器问题的受害者，但 log4j.jar 在我的 WEB-INF/lib 中。

# jquery - 使用 jQuery 获取嵌套 DIV 的真实宽度？

> ID：14569422
> 
> 赞同：0
> 
> 时间：2013-01-28T19:15:39.403
> 
> 标签：jquery, html, width

在我的示例页面中：http: [//j25.wasen.net/modules/mod_simplefilelisterv2.0/index.html](http://j25.wasen.net/modules/mod_simplefilelisterv2.0/index.html)

我添加了一个 DIV 作为 200px 宽的包装器。

我使用 jQuery 来尝试检测此 DIV 内的 DIV 的宽度，但即使它们更宽（或更窄），它们也都显示为 200px 宽。

我已经尝试了在网站上找到的几种不同的技术，但到目前为止都失败了......我怎样才能在包装器中获得 DIV 的真实宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:17:23.727

`display: inline-block`用作 div 的样式。目前`display: block`将使 div 与其父级一样大，而内部标签的显示值为`inline`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:18:09.787

您没有指定元素内 div 的宽度。它们是块元素，会自动继承父元素的宽度。

如果您希望它们具有基于其文本的真实宽度，您可以尝试像 span 这样的内联元素，或者将它们显式声明为内联或内联块。对于大于父项的项目，您需要指定 white-space:nowrap; 尽管。

您可以通过在 Chrome 上使用开发者工具或在 Firefox 上使用 Firebug 来了解我的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:28:15.203

根据您的示例，执行以下操作：

CSS：

```
.item{ display: inline-block; } 
```

这是一个演示：http: [//jsfiddle.net/StPGT/2/](http://jsfiddle.net/StPGT/2/)

# model-view-controller - MVC 文件夹结构与替代方案是否有充分的理由？

> ID：14569425
> 
> 赞同：4
> 
> 时间：2013-01-28T19:15:43.140
> 
> 标签：model-view-controller, organization

在我使用过的大多数 MVC / MV* 类型框架中，他们希望您的源代码组织如下：

```
model/
    FooModel.xyz
    BarModel.xyz
view/
    FooView.xyz
    BarView.xyz
controller/
    FooController.xyz
    BarController.xyz 
```

基于 MVC 元素而不是应用程序对象类型组织到目录中。如果代码是这样组织的，我的某些部分总是觉得生活会更轻松：

```
Foo/
    FooModel.xyz
    FooView.xyz
    FooController.xyz
Bar/
    BarModel.xyz
    BarView.xyz
    BarController.xyz 
```

因为一般来说，如果我正在处理 Foo（例如添加一个新字段），我经常会打开所有 Foo* 文件，这很乏味（第一世界问题），因为所有 Foo 文件都位于不同的目录中。

这是 Foo 源之间耦合太紧的代码味道吗？

当然，当我们的模型、视图或控制器没有相应的视图、控制器和模型时，这种替代方案的吸引力会降低。这通常是（通常？）情况......

那么为什么 MV* 框架的标准组织实际上比我提出的稻草人替代方案更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:42:13.080

我自己也陷入了同样的困境。查看 StackOverflow，[您在 Java 项目中使用什么策略来命名包，为什么？](https://stackoverflow.com/questions/533102/what-strategy-do-you-use-for-package-naming-in-java-projects-and-why)有一些有趣的见解，特别[是 Bob 大叔的粒度设计原则](http://www.objectmentor.com/resources/articles/granularity.pdf)。在**通用重用原则**中，他说：

> 包中的类可以一起重用。如果你重用一个包中的一个类，你就重用它们。

在您提到的设计包中，拥有一个包非常有意义`model`，因为通过控制器和视图层重用多个模型类是很常见的。另一方面，`foo`包很难像应用程序模块本身一样重用。此外，根据**通用封闭原则**：

> 一个包中的类应该一起关闭以防止相同类型的更改。影响软件包的更改会影响该软件包中的所有类。

一些与技术相关的更改——比如更改 JavaScript 库或依赖注入框架——对`model-view-controller`包的影响（只有一个包应该更改）比功能性的影响最小（更改将跨越所有包）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:07:00.507

不确定其他 MVC 框架，但对于 ASP.NET MVC，视图应该在`Views/`文件夹中。

ASP.NET MVC 背后的原则之一是*约定优于配置*。视图引擎期望在特定位置找到视图。我相信您可以覆盖它，但通常最好不要这样做。（使用约定）

我认为这种文件组织的最大问题是级联更改。如果我需要添加一个字段，我需要更新 5 个地方（模型、视图、视图模型、控制器、单元测试）。如果您在文件夹树中四处寻找这些东西，那可能会很乏味。

也许问题背后的问题是“如何更有效地浏览我的解决方案工件？” 再次不确定其他 IDE，但由于我使用 Visual Studio，我有自己的一组偏好来帮助完成该任务。

在 Visual Studio`ctrl+,`中（控制逗号）非常适合导航到解决方案中的类型/文件/工件。我也将`F12`and`Shift+F12`用于“goto 定义”和“查找所有引用”。我还自定义了“在文件中查找”按钮以在工具栏中显示图像和文本，以使按钮更容易点击。

# .net - “大小属性的大小为 0 无效。”

> ID：14569433
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:16:07.057
> 
> 标签：.net, sql-server, vb.net

我正在使用这个功能：

```
Private Sub Trigger_sales(HIden As Guid)
        Dim connection As New SqlConnection(connectionString)
        connection.Open()
        Dim Command As New SqlCommand()
        Command.Connection = connection
        Command.CommandType = CommandType.StoredProcedure
        Command.CommandText = "[WebSite].[ValidateWebTran]"
        Command.Parameters.Add("@UidWenTranGUID", SqlDbType.UniqueIdentifier)
        Command.Parameters("@UidWenTranGUID").Value = HIden
        Command.Parameters.Add("@sResultDesc", SqlDbType.VarChar)
        Command.Parameters("@sResultDesc").Direction = ParameterDirection.Output
        Command.ExecuteScalar()
        If (String.IsNullOrEmpty(error_process.text = Command.Parameters("@sResultDesc").Value.ToString)) Then
            complete_sales(HIden)
        End If
    End Sub 
```

导致此错误：

> String[1]：Size 属性的大小为 0 无效。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:13:02.727

尝试：

```
Command.Parameters.Add("@sResultDesc", SqlDbType.VarChar, 255) 
```

（替换`255`为任何参数类型`@sResultDesc`。如果是`MAX`使用`-1`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:21:09.503

我认为是这一行：

```
Command.Parameters.Add("@sResultDesc", SqlDbType.VarChar) 
```

你实际上并没有在那里设置 Param 的值，它应该看起来像

```
Command.Parameters.Add("@sResultDesc", SqlDbType.VarChar).Value = 'myValue 
```

就像我说的，这是您的存储过程的哪一部分抛出异常的猜测

# python - python可以读取电子表格中单元格的值吗？

> ID：14569434
> 
> 赞同：5
> 
> 时间：2013-01-28T19:16:10.847
> 
> 标签：python, openoffice-calc, libreoffice, qgis

全部，

python可以读取电子表格中单元格的值吗？

从制图/GIS/分析的角度来看：最简单的示例是在给定 shapefile（GIS 数据集）上运行缓冲区（接近）工具的脚本。

对于缓冲距离参数，脚本将指向电子表格单元格中的值（首选自由或开放式办公室），而不是仅使用“1000”英尺之类的数字。

如果有一种方法可以通过按钮从电子表格中触发脚本，那将是下一步（那么下一步就是在电子表格中添加一个地图控件以查看更新的结果！）

只是为了让我深入了解我的目标：我想使用电子表格作为分析“仪表板”，用户可以在其中使用不同的参数进行分析 - 公园（杂货店等）周围的距离是多少在 1/2 英里对 1/4 英里......然后电子表格中的另一张表将对该附近的人口统计数据进行细分。

谢谢！！！

（也在这里发布：[https](https://gis.stackexchange.com/questions/49288/can-python-read-the-value-of-a-cell-in-a-spreadsheet) ://gis.stackexchange.com/questions/49288/can-python-read-the-value-of-a-cell-in-a-spreadsheet ）

-mb

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-22T21:11:18.730

[pyoo](https://pypi.python.org/pypi/pyoo/)是一个简单的包。安装

```
python-uno
python3-uno 
```

然后安装pyoo

```
python setup.py install
python3 setup.py install 
```

运行 soffice（LibreOffice 或 OpenOffice）

```
soffice --accept="socket,host=localhost,port=2002;urp;" --norestore --nologo --nodefault # --headless 
```

以下脚本显示了它在 python 中的工作方式

```
desktop = pyoo.Desktop('localhost', 2002)
doc = desktop.open_spreadsheet(path)
sheet = doc.sheets[0]
for i in range(0,14):
  for j in range(0,4):
    print(sheet[i,j].value) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:12:56.293

有一些很棒的 Python-Excel 工具可用： http: [//www.python-excel.org](http://www.python-excel.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T19:40:26.007

这一切都很棒，但太模糊了。你在哪里执行安装命令？即使您以某种方式发现您必须转到 pip3.6.exe 脚本并从那里运行它，它也不会找到 python3-uno。它会找到 python-uno 但即使那样你也不会在开始时运行任何带有 import uno 的脚本，因为缺少元素，这在某种程度上是不可能的。在 LibreOffice 中，即使是最简单的事情也很难做到。

# java - 从 ArrayList 转换 收藏?

> ID：14569437
> 
> 赞同：4
> 
> 时间：2013-01-28T19:16:30.070
> 
> 标签：java, junit, junit4

我有一个必须返回数组集合的方法。（这是 JUnit 中的参数化测试。）我实际上只需要返回三个字符串，但它们需要位于数组集合中。这是我的方法：

```
public static Collection<Object[]> browserList() {
    String[] firefox = { "firefox" };
    String[] chrome = { "chrome" };
    String[] ie = { "ie" };
    ArrayList<String[]> list = new ArrayList<String[]>(3);
    list.add(firefox);
    list.add(chrome);
    list.add(ie);
    return list;
} 
```

这给出了一个错误：`Type mismatch: cannot convert from ArrayList<String[]> to Collection<Object[]>`。

所以真的有两个问题：（a）这有什么问题，考虑到这`ArrayList`是一个实现`Collection`并且`String`派生自`Object`; (b) 我将如何解决它？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T19:19:20.233

对于第一个问题，[a`Collection <String []>`不是 a`Collection <Object []>`](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)因为泛型不是多态的。

对于第二个问题，只需将所有内容声明为对象：

```
public static Collection<Object[]> browserList() {
    Object[] firefox = { "firefox" };
    Object[] chrome = { "chrome" };
    Object[] ie = { "ie" };
    ArrayList<Object[]> list = new ArrayList<Object[]>(3);
    list.add(firefox);
    list.add(chrome);
    list.add(ie);
    return list;
} 
```

你可以浓缩在：

```
public static Collection<Object[]> browserList() {
    Object[] firefox = { "firefox" };
    Object[] chrome = { "chrome" };
    Object[] ie = { "ie" };

    return Arrays.asList(firefox, chrome, ie);
} 
```

# ms-access - 访问宏以从 MS Outlook 读取电子邮件

> ID：14569447
> 
> 赞同：1
> 
> 时间：2013-01-28T19:17:04.527
> 
> 标签：ms-access, outlook, vba, instance

我在 Access 中有一个宏，它连接到正在运行的 MS Outlook 实例。

宏一直在工作，直到上周我开始收到错误消息： Activex 组件在我运行宏时**无法创建对象。**

这是一段代码以及当前失败的地方：

```
Function GatherDailyStats()
Dim oOlAp As Object, oOlns As Object, oOlInb As Object
Dim oOlItm As Object
'Dim FileName As
Dim i, j As Integer
Dim strDir1 As String
Dim strDir2 As String
'~~> Get Outlook instance
Set oOlAp = GetObject(, "Outlook.Application") '--**THIS IS WHERE IT FAILS**
Set oOlns = oOlAp.GetNamespace("MAPI")
Set oOlInb = oOlns.GetDefaultFolder(olFolderInbox).Folders.Item("Daily Stats")

'~~> Check if there are any actual unread emails
If oOlInb.Items.Restrict("[UnRead] = True").Count = 0 Then
    MsgBox "NO Unread Email In Daily Stats folder"
    Exit Function
End If 
```

自从我创建并彻底测试后，代码没有任何变化。

* * *

更新：我刚刚在另一台计算机上测试了相同的应用程序，它在那里运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:01:54.327

[这是一篇关于 ROT 的知识库文章，以及 Office 应用程序设计如何在启动序列完成之前不注册。](http://support.microsoft.com/?scid=kb%3Ben-us%3B238610&x=10&y=11.)您可能会看到一个一直存在的问题，只是以前从未遇到过，无论出于何种原因。

从[这个讨论](http://answers.microsoft.com/en-us/office/forum/office_2010-customize/getobject-fails-with-outlook-2010/1ee65231-2118-4223-8c40-95a9680000f8?page=2)中解脱出来，您可能想尝试添加一个后备以确保应用程序正在运行：

```
 On Error Resume Next
    Set objOutlook = GetObject(, "Outlook.Application")
    If Err.Number = 429 Then
        Set objOutlook = CreateObject("Outlook.Application") 
    End If 
```

从同一个讨论中，重要的是要注意 Outlook 2010 显然在未以管理员模式启动时在 ROT 中注册存在某种问题。

显然，有人发布[了一项解决方法，其中包括：](http://social.msdn.microsoft.com/Forums/sk/isvvba/thread/da19d1be-f62e-4f0a-8bb8-d104dbc2a5b3)

> ...如果您将 Everyone 组完全权限分配给 Office 安装目录，它将起作用。

不确定这是不是最好的主意，但它是 Office 2010 的一个已知问题。

编辑：[这是最后一个资源](http://support.microsoft.com/kb/828550)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:05:52.650

如果应用程序未运行，GetObject 将引发错误。你需要检查这个：

```
On Error Resume Next
Set oOlAp = GetObject(, "Outlook.Application")
If Err.Number <> 0 Then Set oOlAp = New Outlook.Application 
```

或者，您可以只创建对象的新实例：

```
Set oOlAp = CreateObject("Outlook.Application") 
```

当然，在已经初始化相同类型的对象的情况下，使用`CreateObject`创建新实例会增加资源负载。换一种说法，为了提高性能并降低系统资源的使用，最好使用第一个建议的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:34:07.993

首先，在创建 Outlook.Application 对象的实例时始终使用 CreateObject - Outlook 是一个单例，因此只有一个实例将为登录用户运行。
其次，Outlook 和 Access 的版本是什么？都是同一个版本吗>? 如果不是，它们都是 32 位还是 64 位？

# c - 在 C 中格式化浮点数

> ID：14569450
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:17:11.180
> 
> 标签：c, printf

> **可能重复：**
> [避免 printf() 中的尾随零](https://stackoverflow.com/questions/277772/avoid-trailing-zeroes-in-printf)

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    int main(void)
    {
      FILE *file;
      double n;  
      file = fopen("fp.source", "r");
      while(!feof(file)) {
        fscanf(file, "%lf", &n);
        printf("Next double:\"%lf\"\n", n); 
    }
    fclose(file);
    return 0;
    } 
```

嗨，我正在尝试扫描浮点数并且我已经让它工作了，但是我得到了我不想要的尾随零。有没有办法避免这种情况？例如，我得到的当前输出是： Next double:"11.540000"

在现实中我想要：下一个双倍：“11.54”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:22:06.537

这不是扫描的问题。这是[printf 格式](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)的问题。

从文档（强调我的）：

> **f, F**
> 
> double 参数应转换为样式中的十进制表示法`"[-]ddd.ddd"`，其中基数字符后的位数等于精度规范。**如果精度缺失，则取 6**；如果精度显式为零且不存在`'#'`标志，则不应出现基数字符。如果出现基数字符，则在它之前至少出现一个数字。低位数字应以实现定义的方式四舍五入。

你可能想要`%g`（再次强调我的）：

> **克，克**
> 
> 双参数应以 f 或 e 样式（或在 G 转换说明符的情况下以 F 或 E 样式）转换，其精度指定有效位数。如果显式精度为零，则应取为 1。使用的样式取决于转换的值；只有当这种转换产生的指数小于 -4 或大于或等于精度时，才应使用样式 e （或 E ）。**应从结果的小数部分中删除尾随零**；基数字符仅在其后跟一个数字或存在“#”标志时才会出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:20:30.137

> 有没有办法避免这种情况？

是的，只需正确格式化输出：

```
printf("Next double:\"%.0lf\"\n", n); 
```

printf 格式字符串中的`.0`表示您不想打印小数点后的任何数字。`0`如果您想要小数点后一位、两位、三位或更多位，您可以将 更改为其他值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:22:14.790

试试这个。

```
printf("Next double:\"%l.0f\"\n", n); 
```

这是字符串格式说明符的一个很好的参考。

[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

# python - 使用 xlrd、xlwt 和 xlutils 编辑现有的 excel 工作簿

> ID：14569456
> 
> 赞同：1
> 
> 时间：2013-01-28T19:17:38.290
> 
> 标签：python, excel, xlrd, xlwt, xlutils

如何使用 xlrd、xlwt 和 xlutils 模块编辑和保存现有 Excel 工作簿中的数据？有人可以提供一个示例代码来编辑和保存 Excel 工作簿中的数据吗？

我正在尝试将数据从一个工作簿放到另一个工作簿。

```
import xlrd, xlwt, xlutils

wb1 = xlrd.open_workbook('workbook1.xls', formatting_info=True)
wb2 = xlrd.open_workbook('workbook2.xls', formatting_info=True)

value 1 == wb2.sheet_by_name('Sheet1).cell(2,1).value

wb1.sheet_by_name('Sheet1').cell(2,2).value == value1 
```

如何将这些数据保存在 workbook1.xls 中？

抱歉，我之前问过这个问题，但这次我想更清楚我的问题。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:39:54.563

您可以使用`wb1.save('workbook1.xls')`. 您可能会收到文件已存在的 IOError。在这种情况下，请在保存前尝试`os.remove()`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T14:23:30.730

我同意之前使用 xlwt 库保存方法的答案。但是你也应该对你的代码做一些校对。您缺少 Sheet1 的右引号，并且变量名称不能有空格。

# java - 创建 Thread 对象或实际启动线程是否昂贵？

> ID：14569457
> 
> 赞同：2
> 
> 时间：2013-01-28T19:17:40.743
> 
> 标签：java, multithreading

考虑[这个问题](https://stackoverflow.com/questions/5483047/why-is-creating-a-thread-said-to-be-expensive)。

现在有多种原因可以解释为什么创建线程很昂贵，特别是需要分配大量内存并且需要注册线程。

现在考虑这段代码：

```
Thread thread = new Thread(new SomeRunnable());
thread.start(); 
```

其中哪一部分是“昂贵”的部分？实际创建 Thread 对象的行还是启动线程的行？或两者？我问的原因是因为我正在编写游戏的服务器组件，并且我正在讨论是否应该在玩家连接后立即创建 Thread 对象并在玩家完成登录后启动线程，或者我应该两者兼而有之在玩家完成登录后创建并启动线程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T19:20:49.283

创建一个`Thread`对象非常便宜。你只需付出调用构造函数的代价。它`start()`是占用空间的方法（本机调用、堆栈内存等）

另一方面，如果您创建大量线程，请考虑提前创建（并启动它们）并拥有一个池。这已经为您完成了，请查看[`Executors`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html)课程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:19:18.443

这对我来说确实有点过早的优化。我真的怀疑您是否会看到更早而不是更晚实例化或启动线程之间的任何区别。如果是 100 个线程，那么我可能会有不同的感觉。

如果您*发现*应用程序存在性能问题，那么我鼓励您使用分析器来发现真正的性能问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:20:41.090

如果您想避免创建线程的成本，请使用线程池。不过我同意@Gray。与连接池一样，线程池可以防止您一遍又一遍地创建事物（并且它可以防止线程数量不受控制地增长）。

# asp.net - Linq DataContext - 它在课堂上的什么位置？

> ID：14569458
> 
> 赞同：0
> 
> 时间：2013-01-28T19:17:44.387
> 
> 标签：asp.net, linq

我还是 LINQ 的新手，并且在知道将 DataContext 放在类中的什么位置时遇到了一些问题。

这是我尝试过的：

```
public class Student
{
    private static LinqClassesDataContext db = new LinqClassesDataContext();
    public static Profile GetProfile(int uID)
    {
        var profile = (from p in db.Profiles
                        where p.uID == uID
                        select p).FirstOrDefault();
        return profile;
    }
} 
```

但是我遇到了结果缓存的问题（？） - 请参阅这个问题：[ASP.net/Linq 的奇怪缓存问题](https://stackoverflow.com/questions/14564896/weird-caching-issue-with-asp-net-linq/14565299)

然后，我尝试将 DataContext 放在类中的每个方法中：

```
public class Student 
{
    public static Profile GetProfile(int uID)
    {
        using (LinqClassesDataContext db = new LinqClassesDataContext())
        {
            var profile = (from p in db.Profiles
                           where p.uID == uID
                           select p).FirstOrDefault();
            return profile;
        }
     }
} 
```

但后来我的应用程序中出现“Dispose 后访问的 DataContext”错误。

所以，我见过的唯一另一种方式是这样：

```
public class Student 
{
    public static Profile GetProfile(int uID)
    {
        LinqClassesDataContext db = new LinqClassesDataContext();
        {
            var profile = (from p in db.Profiles
                           where p.uID == uID
                           select p).FirstOrDefault();
            return profile;
        }
     }
} 
```

但这似乎不是最有效的方法。也许我错误地使用了 Linq（我是一个自学的 ASP.net'er），但是有人能告诉我什么是前进的最佳方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:30:39.540

对象被附加到上下文中，所以一旦你处理它，如果你试图导航它的关系，你会得到这些类型的错误，就像你使用选项 #2 一样。

由于 ASP.NET 是无状态的，因此您需要在每次需要时加载配置文件对象，而不是静态缓存该对象，或者使用 LINQ to SQL 的 DataLoadOptions 对象加载该对象及其所有相关数据（[请参阅this](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.aspx)）。这样，您在访问相关数据集时就不需要上下文。

至于放在哪里，我总是把它放在`HttpContext.Current.Items`集合中，它可以存储每个请求的实例，然后从这里在所有请求中共享它。我在它周围包装了一些代码，所以我的应用程序不知道它是从这里获取的。但是，您必须小心，因为如果 ASP.NET 之外的进程使用相同的代码，这种方法会因为没有 HTTP 上下文而失败。在这种情况下，每次都实例化上下文。

# java - 为什么我不能打包这个 maven 项目？

> ID：14569460
> 
> 赞同：0
> 
> 时间：2013-01-28T19:17:46.110
> 
> 标签：java, eclipse, maven, jenkins

当我在 eclipse 中打开 maven 项目时，它编译得很好，但是当我执行“mvn package”时它失败了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:26:36.793

AnnotationProcessorFactory (APT) 是一个标准工具，作为 JDK 的一部分提供。您的类路径中缺少 tools.jar。检查您的 Java 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:28:19.550

确保您从 JDK 运行 Maven。此外，对于 Java 7，尝试强制依赖于**tools.jar**

```
<dependency>
   <groupId>com.sun</groupId>
   <artifactId>tools</artifactId>
   <version>${java.version}</version>
   <scope>system</scope>
   <systemPath>${java.home}/../lib/tools.jar</systemPath>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T02:15:42.820

我通过在 Eclipse 中执行“更新 maven 项目”解决了这个问题。

# azure - 在虚拟目录的 csdef 文件中使用变量

> ID：14569469
> 
> 赞同：1
> 
> 时间：2013-01-28T19:18:17.100
> 
> 标签：azure, tfs, tfsbuild, azure-web-roles

我们在 azure 机器中托管 3 个不同的 Web 应用程序，我们正在使用 CI 将这些更改从 azure 中的构建服务器 TFS 推送到我们的机器。

问题出在physicalDirectory 属性中，因为我们找不到任何可能在那里使用任何构建变量，所以我们必须使用这样的相对路径

```
physicalDirectory="..\..\..\..\..\..\bin\_PublishedWebsites\xxxxxx" 
```

我们有两个问题，一个是本地构建和托管构建需要不同的相对路径，第二个是我们的两个分支不在同一级别。

我试过了

```
physicalDirectory="$(OutpuPath)\_PublishedWebsites\xxxxxx" 
```

也

```
physicalDirectory="%OutpuPath%\_PublishedWebsites\xxxxxx" 
```

其中任何一个都没有成功。

这有可能吗，如果没有，还有其他方法可以替换这个值吗？

谢谢阿尔米尔

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-31T21:39:25.827

您可以在 azure 中定义自己的环境变量，这种方法可能适合您“ [http://msdn.microsoft.com/en-us/library/windowsazure/gg432991.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432991.aspx) ”

# symfony - 无法在基本布局中呈现动作并从子模板执行它

> ID：14569470
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:18:17.037
> 
> 标签：symfony

我正在开发一个 Symfony2 应用程序，它的功能之一是允许用户选择访问网站的不同部分，并且可以从网站的任何地方（任何页面）访问。为了简化让我们说：当用户想要排序时，他/她从下拉选择表单中选择并提交。

我用测试根构建了动作和模板来验证这个函数和这个工作（当我直接在我的 app_dev/test 地址上使用 sortAction() 的呈现时。

问题是，当我尝试从通用模板（app/Resources/views/base.html）访问此操作时，我可以使用默认视图查看选择表单，但是当我选择排序并尝试提交页面重新加载时并返回默认视图。

我在 .../base.html 中使用 {% render "MycompanyMybundleBundle:Mycontroller:sort" %} 并且我希望此操作在（例如）mysite/anypage 这个最后扩展的捆绑布局（布局也是范围基础）上工作。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:44:34.333

您的问题的描述不是很清楚，但我认为问题在于表单操作。您是否已配置此操作？如果要将其提交到同一页面，则应将其留空。

另一种解决方案是利用 Twig 的扩展可能性。将表单定义为父级中的块，并在子级中覆盖它。

[http://twig.sensiolabs.org/doc/tags/extends.html](http://twig.sensiolabs.org/doc/tags/extends.html)

编辑：

你可以让表单动作成为一个块，这就是我的意思......

```
<form action="{% block formAction %}defaulttargetpage.php{ %endblock% }"> <!-- formcontent --> </form> 
```

# javascript - 客户端图像质量降低

> ID：14569473
> 
> 赞同：0
> 
> 时间：2013-01-28T19:18:34.403
> 
> 标签：javascript, jquery, image, image-processing

是否有任何纯 JavaScript 方法可以将质量降低到指定大小？例如，如果有人尝试上传 12MP 图像，有没有办法将其减少到 5MP？目前我们正在使用 Aurigma，但希望摆脱对用户可能拥有或不拥有的插件的依赖。

所以推荐[这篇](https://stackoverflow.com/questions/6723540/image-processing-in-client-side)文章作为一个可能的问题/答案，但这似乎处理裁剪图像。我需要减小图像客户端的大小。这是可能的吗？有没有 jQuery 插件可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T05:02:05.750

您尝试使用[Plupload](http://www.plupload.com/)库。我一直在使用它来上传多个文件，但从来没有使用它的 PNG、JPEG 调整大小功能。

[Image resize before upload](https://stackoverflow.com/questions/961913/image-resize-before-upload)有一个相关问题

# php - 使用 PHP PDO rowCount() 检测错误与未受影响的行

> ID：14569474
> 
> 赞同：0
> 
> 时间：2013-01-28T19:18:44.140
> 
> 标签：php, pdo, rowcount

使用 PHP PDO，有没有办法区分 UPDATE 失败和 UPDATE 成功运行但将字段设置为其现有值？

```
$sql = 'UPDATE table SET column = :column WHERE id = :id';
$statement = $db->prepare($sql);
$statement->bindParam(':column', $column, PDO::PARAM_STR);
$statement->bindParam(':id', $id, PDO::PARAM_INT);
$statement->execute();
$RowsUpdated = $statement->rowCount();
echo '$RowsUpdated = '.$RowsUpdated.'<br />'; 
```

如果 $column 的值是新值，则上面的代码将 $RowsUpdated 设置为 1，如果与现有值相同，则将其设置为 0。我试图通过更改 SQL 语句来强制出错，但它永远不会返回非数字值（例如 NULL 或 False），并且永远不会小于 0。

当使用 COUNT(*) 选择行时，fetchColumn() 如果有行，则返回行数，如果没有，则返回 0，如果有错误，则返回其他内容。所以我可以使用 ($countRowsSelected > 0) 来检测行， ($countRowsSelected === "0") 来检测没有行， ELSE 来检测错误。

是否可以通过更新来做到这一点？除了更新之外，我还想触发辅助操作，但前提是保存的值已更改，所以我想要这个：

```
if ($RowsUpdated > 0) {
    // We go a NEW value, let's do a little dance
} else if ($RowsUpdated === "0") {
    // It saved, but the value was unchanged
} else {
    // Error!
} 
```

我尝试将 PDO::MYSQL_ATTR_FOUND_ROWS => true 添加到我的 PDO 中，但这会导致 rowCount() 无论值是否更改都返回 1，所以它没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:22:45.583

您可以执行以下操作之一：

1.  [`PDO::errCode()`](http://php.net/manual/de/pdo.errorcode.php)分别使用[`PDOStatement::errorCode()`](http://php.net/manual/de/pdostatement.errorcode.php)来检查是否发生 SQL 错误，或
2.  `PDO::ATTR_ERRMODE`使用设置初始化您的数据库连接`PDO::ERRMODE_EXCEPTION`（参见[手册](http://php.net/manual/de/pdo.error-handling.php)）。这样 PDO 会抛出一个您可以捕获的异常。

# java - Java 旋转文本具有反转的字符序列

> ID：14569475
> 
> 赞同：6
> 
> 时间：2013-01-28T19:18:46.590
> 
> 标签：java, text, awt, graphics2d

在 a 的子类中，`JPanel`我正在这样做：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D)g;        
    g2d.rotate(Math.toRadians(90.));
    g2d.drawString(aString, 40, -40);
} 
```

字母已正确旋转，但第二个字母不在第一个字母下方（在其右侧，在旋转空间中）的预期位置，而是在其上方（在其左侧），第三个在上方（在左侧）第二个，依此类推。将旋转角度更改为 45 度会导致每个字符顺时针旋转 45 度，正如预期的那样，但字符行顺时针旋转 45 度，这与两个旋转都向结果的一半方向旋转 90 度一致.

在 0 度旋转时，文本正确显示。

我在 Mac OS X 10.8.2 上使用 NetBeans 7.1.2 进行开发。Win 7 SP1 上相同版本的 NetBeans 没有问题。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-23T23:57:07.580

我为这个问题找到了一个奇怪的解决方案（与错误的奇怪性相匹配）

```
FontRenderContext frc = new FontRenderContext(g2.getTransform(), true, true);

g2.drawGlyphVector(currentFont.createGlyphVector(frc, aString), textX, textY); 
```

出于某种原因，在 FontRenderContext 上将 anti-aliasing 设置为 true 会导致它正确运行。似乎有人在渲染代码的某处遗漏了一个减号，或者误解了他们编写的规范！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:45:54.887

我们看到的是同样的事情。我们的代码在大多数 JRE 6 和 7 版本的 Windows 上运行良好。今天相同的代码展示了向后旋转的字符问题。问题 JRE 版本在 OS X 上是 1.6.0_37。它以前在 OS X 上可能工作过，也可能没工作过。我们 99.9% 的用户使用 Windows。

一种解决方法是将文本呈现为 BufferedImage，然后旋转图像。这是我用来在视觉上将文本旋转 20-30 度左右获得更好结果的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-20T12:41:44.283

在 OS X 10.10 与 Windows 7 上，我遇到了完全相同的问题，但反过来！即在绘制垂直文本之前旋转整个图形上下文看起来不错，但是将 AffineTransform 应用于新字体会产生奇怪的旋转文本。

我认为仅旋​​转文本会稍微有效一些，因此如果不优雅的解决方案是先检查平台，则可行：

```
 Font font = g.getFont();
    if (System.getProperty("os.name").startsWith("Mac")) {
        g.rotate(-Math.PI / 2, x, y);
        g.drawString(string, x, y);
        g.rotate(Math.PI / 2, x, y);                
    } else {
        AffineTransform fontAT = new AffineTransform();                
        fontAT.rotate(-Math.PI / 2);
        g.setFont(font.deriveFont(fontAT));
        g.drawString(string, x, y);
        g.setFont(font);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-22T16:40:05.690

下面 user1181445 发布的 AffineTransformation 方法适用于所有平台，包括有问题的 OSX，直到最近的 Java OSX 更新（版本 7，更新 55）。现在旋转的文本搞砸了，但只在小程序上。我在我们的应用程序的独立版本中没有看到问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T19:35:56.047

There are 2 things that could work from what I can see right now.

The first would be to split the String into a char array, then after the rotate go 1-by-1 incrementing the font size (+1 or 2 if bolded) so that they line up, going top to bottom.

The second way would be to make your own font, which I wouldn't recommend. If you draw the String before the rotation, then when it rotates hypothetically if you made the font correctly it will display as it should.

If I can think of another way I will post it.

Edit:

```
final AffineTransform at = new AffineTransform();
final Font font = g.getFont();
// Derive a new font using a rotatation transform (Theta is angle in radians).
at.rotate(theta);
final Font newFont = font.deriveFont(at);
// set the derived font in the Graphics2D context
g2d.setFont(newFont);

// Render a label instance of type String using the derived font
g2d.drawString(label, x, y); 
```

So, to draw vertically that would be a rotate of 270 degrees, or 3/2 * pi

# flash - wecam H.264 http流直播

> ID：14569477
> 
> 赞同：1
> 
> 时间：2013-01-28T19:18:59.440
> 
> 标签：flash, flash-media-server

我需要网络摄像头直播的解决方案。广播员从他的浏览器使用 Flash 客户端，同时观众在计算机上使用 Flash，在 iso 和掌上电脑上使用 html http 流。

到目前为止，我想出的是使用 Flash 客户端在 Flash Player 11 上进行网络摄像头广播，以便在 FMS 上以 H.264 编码播放实时视频。但我感到困惑的是，FMS 是否会自动为 http 提供实时流，以便使用 ajax 在 iso 上显示，另一方面，使用 rtmp 的 flash 查看器屏幕会自动显示，还是我理解这一点的错误轨道。

什么是使用 flash 客户端作为广播客户端的最佳方法，用于在 ios 设备上使用 ajax/html5 查看器客户端进行 http 流，在设备上使用带有 flash 查看器客户端的 rtmp，以及通过 FMS 支持 Flash 的 pc。

谢谢。

# javascript - 解析错误/语法

> ID：14569478
> 
> 赞同：0
> 
> 时间：2013-01-28T19:19:06.013
> 
> 标签：javascript, dojo, onload-event

我正在尝试使用 onload 事件从服务器调用我的 json 对象并将它们放在标题窗格中。目前我只是想从数据库中取出一个对象。但是，我在控制台上不断收到此错误：

```
 dojo/parser::parse() error SyntaxError {} 
```

它突出显示了 parser.js 文件第 411 行。

这是一个片段：

```
<div data-dojo-props="title: 'Json is here', open:false" data-dojo-type="dijit/TitlePane" id="tab"  onload= " dojo.require('dijit/TitlePane');

    dojo.xhrGet({
    url: 'http://171.23.34:3000/page.json',
    handleAs: 'json',
    timeout : 2000,

    load: function(data){

    dojo.byId('tab').innerHTML = data[0].Name;
     dojo.parser.parse('tab');

},
error: function(error){
    dojo.byId('tab').innerHTML = "An unexpected error occurred:" + error;
}
}

});"
preload="true" selected="true" >

</div> 
```

如果我这样做完全错误，有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:43:55.720

您已经定义了一个 html 属性`onLoad="..."`，并且在 onload 函数中您有以下内容：

```
 dojo.byId('tab').innerHTML = "An unexpected error occurred:" + error; 
```

此行中的第一个引号关闭 HTML 中的 onLoad 属性，并且该函数的其余部分被解析为 html 并失败。

尝试将您的 onload 方法放在声明性脚本标记中。

[http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html#declarative-scripting-arguments](http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html#declarative-scripting-arguments)

编辑

除了更改为单引号外，您的函数中还有一个额外的右大括号。

```
dojo.xhrGet({
    url: 'http://171.23.34:3000/page.json',
    handleAs: 'json',
    timeout : 2000,

    load: function(data){
        dojo.byId('tab').innerHTML = data[0].Name;
        dojo.parser.parse('tab');

    },
    error: function(error){
        dojo.byId('tab').innerHTML = 'An unexpected error occurred:' + error;
    }
    //} <-- extra brace
}); 
```

# mysql - 无法通过navicat连接到远程mysql数据库

> ID：14569479
> 
> 赞同：2
> 
> 时间：2013-01-28T19:19:08.617
> 
> 标签：mysql, ubuntu, ssh, terminal, navicat

我在非托管机架空间云服务器上有一个 mysql 数据库。我可以毫无问题地连接到 phpmyadmin。我检查了端口 3306 是否正在侦听，并且是。`/etc/mysql/my.conf`显示`bind-address = 127.0.0.1`。

当我使用 navicat 通过 ssh 连接时，它说`SSH tunnel: Invalid username or password!`我已经重置了密码并重新启动了 mysql 和服务器以确保但我仍然无法连接。接下来我可以尝试什么来使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:45:39.283

请连接到 MySQL 并运行

```
SELECT USER(),CURRENT_USER(); 
```

这个输出什么？？？

*   [`USER()`](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_user)报告您如何尝试在 MySQL 中进行身份验证
*   [`CURRENT_USER()`](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_current-user)报告您是如何被允许在 MySQL 中进行身份验证的

如果这两个函数的输出不匹配，您将需要创建一个与`USER()`or匹配的用户`CURRENT_USER()`。

如果两者都是`root@localhost`，请运行

```
SELECT user,host,password FROM mysql.user; 
```

现在，可见比较所有 root 用户是否具有相同的密码。

另外，请检查`/etc/hosts`服务器上的内容。

这不完全是一个答案，但我希望这会有所帮助！

# c# - C#线程使用invoke，冻结表单

> ID：14569482
> 
> 赞同：6
> 
> 时间：2013-01-28T19:19:14.443
> 
> 标签：c#, multithreading, invoke

我正在尝试使用线程并防止程序在线程忙时冻结。它应该显示进度（写入 0/1），而不仅仅是在完成后显示结果，同时冻结表单。

在当前程序中，我正在尝试写入文本框，并且实际上看到了持续的进度，并且表单不会受到其他线程的任务的影响。

我现在拥有的是我可以使用调用写入带有线程的文本框，但它只显示结果（线程忙时表单冻结），并且表单冻结。

表格图片：

![在此处输入图像描述](../Images/5c5fece61a5dd3b346066847389a5ad6.png)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace MultiThreading
{
public partial class MultiThreading : Form
{
    public MultiThreading()
    {
        InitializeComponent();
    }

    Thread writeOne, writeTwo;

    private void writeText(TextBox textBox, string text)
    {
        if (textBox.InvokeRequired)
        {
            textBox.BeginInvoke((MethodInvoker)delegate()
            {
                for (int i = 0; i < 500; i++)
                {
                    textBox.Text += text;
                }
            });
        }
        else
        {
            for (int i = 0; i < 500; i++)
            {
                textBox.Text += text;
            }
        }
    }
    private void btnWrite1_Click(object sender, EventArgs e)
    {
        writeOne = new Thread(() => writeText(txtOutput1, "0"));
        writeOne.Start();
    }

    private void btnWrite2_Click(object sender, EventArgs e)
    {
        writeTwo = new Thread(() => writeText(txtOutput2, "1"));
        writeTwo.Start();
    }

    private void btnClear1_Click(object sender, EventArgs e)
    {
        txtOutput1.Clear();
    }

    private void btnClear2_Click(object sender, EventArgs e)
    {
        txtOutput2.Clear();
    }

    private void btnWriteBoth_Click(object sender, EventArgs e)
    {
        writeOne = new Thread(() => writeText(txtOutput1, "0"));
        writeTwo = new Thread(() => writeText(txtOutput2, "1"));

        writeOne.Start();
        writeTwo.Start();
    }

    private void btnClearBoth_Click(object sender, EventArgs e)
    {
        txtOutput1.Clear();
        txtOutput2.Clear();
    }
}

} 
```

编辑：

顺便说一句，对于任何想知道的人，我是多线程的新手，我只是想编写一个小程序来了解执行此操作的最佳方法。

我知道我之前的调用并没有真正帮助，因为我仍然没有给表单更新的机会，所以它到了那里。

好的，所以像这样运行 1 个线程是可行的，但仍然同时运行多个线程，直到线程完成后才会更新表单。
我添加了一个 thread.sleep() 以便我可以在写作时尝试清除，看看我是否仍然可以使用该表单。

写入 1 个文本框时，我仍然可以在写入时清除屏幕。
但是一旦我使用了 2 个线程，我就不能再使用表单了，直到线程完成并给出输出。

```
private void writeText(TextBox textBox, string text)
    {
        for (int i = 0; i < 500; i++)
        {
            Invoke(new MethodInvoker(() =>
            {
                textBox.Text += text;
                Thread.Sleep(2);
            }));
        }

    } 
```

（如果我在这方面完全错了，我不介意阅读一些示例/线程，除了后台工作人员之外，我仍在尝试查看执行此操作的最佳方法）

编辑2：

我通过减少写入量来减少调用次数，但增加延迟会产生与持续写入相同的效果，只是减少负载。

```
private void writeText(TextBox textBox, string text)
    {
        for (int i = 0; i < 500; i++)
        {
            Invoke(new MethodInvoker(() =>
            {
                textBox.Text += text;
                Thread.Sleep(2);
            }));
        }

    } 
```

编辑 3：

Sumeet 的示例使用

> 应用程序.DoEvents();

（注意 s，.DoEvent 不起作用，可能是拼写错误：P），同时编写多个字符串并让它们显示进度而不仅仅是结果。

所以代码再次更新:)

*使用新按钮创建 5 个线程，将随机数写入两个文本框

```
private void writeText(TextBox textBox, string text)
    {
        for (int i = 0; i < 57; i++)
        {
            Invoke(new MethodInvoker(() =>
            {
                textBox.Text += text;
                Thread.Sleep(5);
                Application.DoEvents();
            }));
        }

    }
private void btnNewThread_Click(object sender, EventArgs e)
    {
        Random random = new Random();
        int[] randomNumber = new int[5];
        for (int i = 0; i < 5; i++)
        {
            randomNumber[i] = random.Next(2, 9);
            new Thread(() => writeText(txtOutput1, randomNumber[i-1].ToString())).Start();
            new Thread(() => writeText(txtOutput2, randomNumber[i-1].ToString())).Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T19:40:47.277

**该解决方案有效！已经检查过了。**

问题是您一直告诉 UI 线程更改文本，但从不让它有时间向您显示更新的文本。要使您的 UI 显示更改后的文本，请添加[Application.DoEvents](http://msdn.microsoft.com/en-us//library/system.windows.forms.application.doevents.aspx)行，如下所示：

```
textBox.Text += text;
Application.DoEvents(); 
```

ps：删除 If / Else 循环的 else 块，这是多余的，而且正如其他人所指出的那样，创建这 2 个线程没有任何用处，因为他们所做的只是在 UI 线程本身上发布消息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T19:22:39.700

您仍在执行单线程任务，如果需要，只需在 UI 线程上重新启动它。

```
for (int i = 0; i < 500; i++){
    string text = ""+i;
    textBox.BeginInvoke((MethodInvoker)delegate()
            {
                textBox.Text += text;
            });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T19:25:48.720

问题是您正在启动一个新线程，然后该新线程什么都不做，只是为 UI 线程添加一个新任务以处理大量工作。为了让你的表单保持响应，你需要有时间让 UI 线程什么都不做，或者至少不花大量时间做任何一项任务。

为了保持表单响应，我们需要有很多小`BeginInvoke`（或`Invoke`）调用。

```
private void writeText(TextBox textBox, string text)
{
    for (int i = 0; i < 500; i++)
    {
        Invoke(new MethodInvoker(() =>
        {
            textBox.Text += text;
        }));
    }
} 
```

通过有很多小的调用调用，它允许在操作过程中处理诸如绘制事件、鼠标移动/单击事件等。另请注意，我删除了`InvokeRequired`通话。我们*知道*这个方法会在非 UI 线程中调用，所以不需要它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T19:22:19.973

您正在破坏使用线程的目的。

您的线程所做的只是告诉**UI 线程**使用`BeginInvoke()`.

所有实际工作都发生在 UI 线程上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T20:16:14.893

要么您正在处理数据，要么您只是尝试为 UI 设置动画。

对于数据处理，您应该在后台线程上完成所有繁重的工作，并且只偶尔更新 UI。在您的示例中，TextBox 在这方面特别麻烦，因为您要向底层数据模型添加数百次数据，并且每次呈现 UI 元素（TextBox）需要更长的时间。 **您必须注意更新 UI 的频率，**以便 UI 更新的处理不会压倒数据模型更新。文本框就是那样讨厌。

在下面的示例中，在绘制事件期间设置的标志可确保在 TextBox 完成绘制最后一次更新之前，其他 UI 更新不会排队：

```
string str = string.Empty;
public void DoStuff()
{
    System.Threading.ThreadPool.QueueUserWorkItem(WorkerThread);
}

void WorkerThread(object unused)
{
    for (int i = 0; i < 1000; i++)
    {
        str += "0";
        if (updatedUI)
        {
            updatedUI = false;
            BeginInvoke(new Action<string>(UpdateUI), str);
        }
    }
    BeginInvoke(new Action<string>(UpdateUI), str);
}

private volatile bool updatedUI = true;
void textbox1_Paint(object sender, PaintEventArgs e) // event hooked up in Form constructor
{
    updatedUI = true;
}

void UpdateUI(string str)
{
    textBox1.Text = str;
} 
```

另一方面，如果 UI 动画是您的目标，那么您可能应该使用 TextBox 以外的东西。它只是不适合如此频繁地处理更新。您可以针对特定用例对文本呈现进行一些优化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T04:01:02.983

您绝不能在大容量应用程序中使用字符串。用户界面与否。多线程与否。

您应该使用 StringBuilder 来累积字符串。然后分配

```
tb.Text = sb.ToString(); 
```

# ios - 如何在 iOS 的 UITableView 中显示垂直滚动条？

> ID：14569483
> 
> 赞同：0
> 
> 时间：2013-01-28T19:19:16.603
> 
> 标签：ios, cocoa-touch, uitableview

我只是一个新的学习者`iOS`。

我想`UITableView`按照图片的滚动条做我的喜欢。

![在此处输入图像描述](../Images/68ebed35b8e1ccd0b56b56325b338278.png)

我想在我的`UITableView`.

我还可以在这些栏中添加自定义文本吗？

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:21:27.920

那不是滚动条，那是索引列表。您需要实现`UITableViewDataSource sectionIndexTitlesForTableView:`提供该数据的方法。您还需要实现该`UITableViewDataSource tableView:sectionForSectionIndexTitle:atIndex:`方法。

使用常量`UITableViewIndexSearch`获取搜索符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:25:49.280

您必须实现`sectionIndexTitlesForTableView`表视图数据源的方法。正如[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDataSource_Protocol/Reference/Reference.html)所说，该方法返回一个数组，其索引列表显示在右侧。例如，您可以返回一个包含从“A”到“Z”的字母的数组。

# java - 如何将文本移动到 JButton 的底部

> ID：14569484
> 
> 赞同：3
> 
> 时间：2013-01-28T19:19:18.367
> 
> 标签：java, swing, layout, icons, jbutton

我有一个使用以下代码创建的 JButton。

```
JButton button = new JButton ( "Document",appletRec.getIcon()) ;
button.addActionListener ( this ) ;                    
button.setOpaque                 ( true ) ; //changed false from true.
button.setFocusPainted           ( true ) ; //changed false from true.
button.actAsLink                 ( true ) ;
button.setHighlightForeground    ( Color.blue ) ;
button.setVerticalTextPosition   ( SwingConstants.BOTTOM ) ;
button.setVerticalAlignment      ( SwingConstants.TOP ) ;
button.setHorizontalTextPosition ( SwingConstants.CENTER ) ; 
```

但是我的按钮看起来像这样 ![在此处输入图像描述](../Images/35754668036c6c0acc77c79c82a5cd2d.png)

我想将文本移动到按钮的底部。任何建议高度赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:26:39.960

[button.setVerticalAlignment(SwingConstants.BOTTOM)](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setVerticalAlignment%28int%29) 会将所有内容（**文本+图标**）移动到按钮的底部。

如果你想要文本和图标之间的间距，你可以使用 [button.setIconTextGap(int distance)](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractButton.html#setIconTextGap%28int%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:36:29.403

如果你改变

```
button.setVerticalAlignment ( SwingConstants.TOP ) ; 
```

到

```
button.setVerticalAlignment ( SwingConstants.BOTTOM ) ; 
```

标签将显示在按钮的底部。

# database - 如何在 SORM 中为数据库连接设置超时？

> ID：14569486
> 
> 赞同：2
> 
> 时间：2013-01-28T19:19:18.257
> 
> 标签：database, connection, timeout, sorm

我在 SORM 的嵌入式模式下使用 H2 数据库。如果数据库很忙，那么 SORM 就继续等待。没有例外，没有任何事情发生。这是误导。:(那么我如何设置数据库连接超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:28:12.903

它为什么会产生误导以及例外情况如何更好？如果您需要进程是非阻塞的，只需像这样使用[Future](http://www.scala-lang.org/api/current/index.html#scala.actors.Future)：

```
future{ Db.query[Artist].fetch() }.foreach{ artists => ... } 
```

认为这是以下内容的非阻塞版本：

```
val artists = Db.query[Artist].fetch() 
```

# c++ - NLP：使用 lemmaGen c++ 进行词形还原

> ID：14569495
> 
> 赞同：4
> 
> 时间：2013-01-28T19:20:05.103
> 
> 标签：c++, nlp, lemmatization

我正在增强一个聊天机器人，我希望从输入句子中找到单词的引理。聊天机器人是用 c++ 编写的，我发现了一个免费的开源词形还原工具，称为 LemmaGen。我已经下载了 c++ 的 2.2 版，但它没有关于如何引用甚至使用它的文档。

过去有没有人使用 LemmaGen for c++ 的经验？任何信息都会有所帮助。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-22T12:43:00.407

我没有使用 c++ 版本，但我确实使用了 C# 版本。在 C# 中使用 LemmaGen 很简单，也很直接。首先你用模型文件的参数初始化 Lemmatizer 类型的对象，然后你可以调用它的公共方法来 Lemmatize 表示为字符串的单词。因此，您所要做的就是对文本进行标记，然后对每个标记逐个进行词形还原。方法返回表示输入词引理的字符串。

我猜C++版本的使用是相似的。

# php - 网站申请表的PHP代码

> ID：14569496
> 
> 赞同：-4
> 
> 时间：2013-01-28T19:20:07.270
> 
> 标签：php

我在这个页面上建立了一个申请表：http: [//www.pazzle.co.uk/indulgence/recruitment.html](http://www.pazzle.co.uk/indulgence/recruitment.html)

我知道我需要对其进行编程，以便在提交时将信息和上传的图像实际发送到我的电子邮件地址，但我的 PHP 技能不太好。是否有可用的 PHP 脚本，我可以在其中调整值以使用我的表单，或者我是否必须雇用某人为我做这件事？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:28:14.843

你可以使用这样的东西：

```
$name = $_POST["name"];
$email = $_POST["email"];
$message = $_POST["message"];

$to = "uremailaddress@website.com";
$subject = "You Have a Message From  ".$field_name;

$emailmessage = "From: ".$name."\n";
$emailmessage .= "E-mail: ".$email."\n";
$emailmessage .= "Message: ".$message;

$headers = "From: ".$email."\r\n";
$headers .= "Reply-To: ".$email."\r\n";

$mail_status = mail($to, $subject, $emailmessage, $headers); 
```

# c++ - 来自 libzip 的 zip_open 错误

> ID：14569497
> 
> 赞同：2
> 
> 时间：2013-01-28T19:20:09.457
> 
> 标签：c++, zip, zlib, unzip

我正在学习 C++，我决定制作一个压缩/解压缩文件的小程序来训练我。我下载了[libzip](http://www.nih.at/libzip/index.html)和 zlib 并将它们链接到我的编译器（MinGW with Code::Blocks on Windows）。因此，我尝试使用 zip_open() 打开我的 zip 文件并出现错误：

> 未定义的引用`_imp__zip_open`

这是代码：

```
#include <zip.h>
#include <zlib.h>

int main()
{
    int error(0);
    zip *foo = zip_open("foo.zip", 0, &error);
    return 0;
} 
```

我不知道这是从哪里来的，我真的很想得到一些帮助，因为我在 Google 上找不到任何东西（肯定是因为问题很简单）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:55:57.853

看起来你还没有链接到 libzip。确保您实际上链接到它，并且 lib 的路径在您的链接路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T21:35:47.777

从 libzip-discuss 列表中关于[此线程](http://www.nih.at/listarchive/libzip-discuss/msg00304.html)的讨论来看，您似乎正在尝试链接 libzip 的静态版本，但`ZLIB_DLL`定义了预处理器符号。`ZLIB_DLL`如果链接到 dll 版本，您应该只定义。

# javascript - Javascript：使用 Sinon 模拟构造函数

> ID：14569499
> 
> 赞同：55
> 
> 时间：2013-01-28T19:20:13.203
> 
> 标签：javascript, unit-testing, constructor, mocking, sinon

我正在努力弄清楚如何使用 sinon 来模拟构造函数。我有一个函数，它将通过调用一个接受一些参数的构造函数来创建多个小部件。我想验证构造函数是否使用正确的参数被调用了正确的次数，但我不想实际构造小部件。以下链接似乎解释了一种模拟构造函数的简单方法，但它对我不起作用：

[使用 Jasmine 监视构造函数](https://stackoverflow.com/questions/9347631/spying-on-a-constructor-using-jasmine)

[http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html](http://tinnedfruit.com/2011/03/25/testing-backbone-apps-with-jasmine-sinon-2.html)

当我对构造函数进行以下调用时：

```
sinon.stub(window, "MyWidget"); 
```

我收到以下错误：

```
Uncaught TypeError: Attempted to wrap undefined property MyWidget as function 
```

在 Chrome 中调试时，我看到 MyWidget 出现在 Scope Variables 的 Local 部分中，但是窗口中没有 MyWidget 属性。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-11-19T16:48:31.210

我需要一个解决方案，因为我的代码正在调用 new 运算符。我想模拟新调用创建的对象。

```
var MockExample = sinon.stub();
MockExample.prototype.test = sinon.stub().returns("42");
var example = new MockExample();
console.log("example: " + example.test()); // outputs 42 
```

然后我使用 rewire 将其注入到我正在测试的代码中

```
rewiredModule = rewire('/path/to/module.js');
rewiredModule.__set__("Example", example); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T21:12:46.363

来自 sinonjs 的官方网站：

> 用存根函数替换 object.method。调用object.method.restore()可以恢复原来的函数；（或 stub.restore();）。如果属性不是>已经是函数，则会引发异常，以帮助避免在存根方法时出现拼写错误。

这只是说明您要为其创建存根的函数必须是*对象*对象的成员。

把事情说清楚；你打电话

```
sinon.stub(window, "MyWidget"); 
```

MyWidget 函数需要在全局范围内（因为您将*window*作为参数传递）。但是，正如您已经说过的，此函数位于本地范围内（可能在对象文字或命名空间中定义）。

在 javascript 中，每个人都可以访问全局范围，但反之则不行。

检查您在哪里声明 MyWidget 函数并将容器对象作为第一个参数传递给 sinon.stub()

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-12T22:26:55.073

使用 Sinon 4.4.2，我能够模拟这样的实例方法：

```
const testObj = { /* any object */ }
sinon.stub(MyClass.prototype, "myMethod").resolves(testObj)
let myVar = await new MyClass(token).myMethod(arg1, arg2)
// myVar === testObj 
```

这里提供了一个类似的解决方案： [Stubbing a class method with Sinon.js](https://stackoverflow.com/questions/21072016/stubbing-a-class-method-with-sinon-js)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-17T17:39:02.807

我使用 Mockery 来模拟构造函数/函数，没有任何问题。

```
var mockery = require('mockery');
var sinon = require('sinon');

mockery.enable({
  useCleanCache: true,
  warnOnReplace: false,
  warnOnUnregistered: false
});

exports.Client = function() {/* Client constructor Mock */};
var ClientSpy = sinon.spy(exports, 'Client');
mockery.registerMock('Client', ClientSpy);

var Factory = require('Factory'); // this module requires the Client module 
```

您应该能够像上面的示例一样应用 Sinon Spy。

确保在测试后禁用或重置 Mockery！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-11T09:36:20.907

使用`sinon.createStubInstance(MyES6ClassName)`，则当使用`new`关键字调用 MyES6ClassName 时，将返回 MyES6ClassName 实例的存根。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-04T14:18:36.640

刚刚在[文档中找到了这个。](http://sinonjs.org/docs/#stubs)

> 如果要创建 MyConstructor 的存根对象，但不希望调用构造函数，请使用此实用程序函数。
> 
> var stub = sinon.createStubInstance(MyConstructor)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-12T00:52:06.897

我通过错误输入`sinon.stub.throws(expectedErr)`而不是`sinon.stub().throws(expectedErr)`. 我以前犯过类似的错误，以前没有遇到过这个特定的消息，所以它把我扔了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-25T14:49:22.343

# 用 sinon 模拟和存根构造函数

我给出两个解决方案。第一个解决了这个问题，如何用行为来模拟构造函数，第二个展示了如何用一个假人来存根它。谷歌多次引导我回答这个问题，以搜索如何存根。

## 用行为模拟构造函数

我不知道这是否是最短路径。至少它确实如此，所要求的。

首先，我使用 sinon 的`fake`方法来创建一个`Mock`具有我想要的行为的模拟构造函数。然后我必须一一添加方法。由于我没有调查的原因，在将整个原型设置为`UnderTest`to时它不起作用`Mock`。

```
require('chai').should();
const { fake} = require('sinon');

class UnderTest {
  constructor() {
    this.mocked = false;
  }

  isMocked() {
    return this.mocked;
  }
}

describe('UnderTest', () => {
  let underTest;
  let isMocked;
  before(() => {
    const Mock = fake(function () { this.mocked = true; });
    Mock.prototype.isMocked = UnderTest.prototype.isMocked;
    underTest = new Mock();
    isMocked = underTest.isMocked();
  });
  it('should be mocked', () => {
    isMocked.should.be.true;
  });
}); 
```

## 用假人存根构造函数

如果你被引导到这篇文章，因为你只想存根构造函数以防止它被执行。

Sinon`createStubInstance`创建了一个存根构造函数。它还存根所有方法。因此，被测方法必须先恢复。

```
require('chai').should();
const { createStubInstance } = require('sinon');

class UnderTest {
  constructor() {
    throw new Error('must not be called');
  }

  testThis() {
    this.stubThis();
    return true;
  }

  stubThis() {
    throw new Error('must not be called');
  }
}

describe('UnderTest', () => {
  describe('.testThis()', () => {
    describe('when not stubbed', () => {
      let underTest;
      let result;
      before(() => {
        underTest = createStubInstance(UnderTest);
        underTest.testThis.restore();
        result = underTest.testThis();
      });
      it('should return true', () => {
        result.should.be.true;
      });
      it('should call stubThis()', () => {
        underTest.stubThis.calledOnce.should.be.true;
      });
    });
  });
}); 
```

* * *

## 回答 #9

> 赞同：-19
> 
> 时间：2013-06-13T20:41:44.343

经过一些调整后，我能够让[StubModule](https://github.com/agrc/StubModule)工作，最值得注意的是在存根模块中需要时将 async:false 作为配置的一部分传递。

感谢戴维斯先生把这些放在一起

# r - ggplot2中连续变量的构面

> ID：14569502
> 
> 赞同：9
> 
> 时间：2013-01-28T19:20:23.257
> 
> 标签：r, ggplot2, facet

> **可能重复：**
> [ggplot - 函数输出方面](http://facebook.stackoverflow.com/questions/12271844/ggplot-facet-by-function-output)

`ggplot2`的`facets`选项非常适合按因子显示多个图，但我在学习有效地将连续变量转换为其中的因子时遇到了困难。使用以下数据：

```
DF <- data.frame(WindDir=sample(0:180, 20, replace=T), 
                 WindSpeed=sample(1:40, 20, replace=T), 
                 Force=sample(1:40, 20, replace=T))
qplot(WindSpeed, Force, data=DF, facets=~cut(WindDir, seq(0,180,30))) 
```

我得到错误：`At least one layer must contain all variables used for facetting`

我想`Force~WindSpeed`通过离散的 30 度间隔来检查关系，但似乎`facet`需要将因素附加到正在使用的数据框（显然我可以这样做`DF$DiscreteWindDir <- cut(...)`，但这似乎没有必要）。有没有办法`facets`在将连续变量转换为因子时使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:37:48.310

举例说明如何使用`transform`进行内联转换：

```
qplot(WindSpeed, Force,
      data = transform(DF,
                       fct = cut(WindDir, seq(0,180,3))),
      facets=~fct) 
```

您不会“污染” `data`faceting 变量，但它在数据框中供 ggplot 进行刻面（而不是作为刻面规范中列的函数）。

这在扩展语法中同样有效：

```
ggplot(transform(DF,
                 fct = cut(WindDir, seq(0,180,3))),
       aes(WindSpeed, Force)) +
  geom_point() +
  facet_wrap(~fct) 
```

# c# - ASP.NET DataPager 不保留 QueryString 参数顺序

> ID：14569505
> 
> 赞同：2
> 
> 时间：2013-01-28T19:20:26.690
> 
> 标签：c#, asp.net, query-string, datapager, querystringparameter

我有一个`ListView`按钮`DataPager`（1,2,3，...）中的分页不保留在上下文中是坏事的顺序`parameters`（`querystring`机器人`SEO`认为它是重复的内容）。

IE 如果我的页面是：

```
Test.aspx?r=8&type=10
the pager buttons show:
Test.aspx?type=8&r=10&page=1
Test.aspx?type=8&r=10&page=2 
```

等等...我认为控件按字母顺序排列它们？

我试图在控制`PreRender()`事件上覆盖这些 URL，但它仍然呈现`URL`如上所述的...

有人遇到过这个问题吗？？

谢谢。

ASPX：

```
 <asp:ListView ID="ListViewSearchResults" runat="server"  GroupItemCount="3" 
                    OnItemDataBound="ListViewSearchResults_ItemDataBound"        
   OnPagePropertiesChanging="ListViewSearchResults_PagePropertiesChanging" >
   ......
                </asp:ListView> 
```

......

```
 <asp:DataPager ID="ListViewPager" runat="server"  QueryStringField="page"          
    OnDataBinding="ListViewPager_DataBinding" OnPreRender="ListViewPager_PreRender"
    PagedControlID="ListViewSearchResults" PageSize="21"  >
    <Fields>
    <asp:NextPreviousPagerField  ShowFirstPageButton="true"          
    ShowPreviousPageButton="false" ShowNextPageButton="false"       
     ShowLastPageButton="false" ButtonCssClass="pagingright1"   ButtonType="Link"     
     FirstPageText=""  />
     <asp:NextPreviousPagerField ShowFirstPageButton="false"      
     ShowPreviousPageButton="true"   ShowNextPageButton="false" 
     ShowLastPageButton="false" ButtonCssClass="pagingright2"   ButtonType="Link" 
     PreviousPageText="" />                      
                    <asp:NumericPagerField  ButtonType="Link" CurrentPageLabelCssClass="pagingcurrent"  RenderNonBreakingSpacesBetweenControls="false" ButtonCount="10" />                       
                <asp:NextPreviousPagerField  ShowFirstPageButton="false" ShowPreviousPageButton="false" ShowNextPageButton="true" ShowLastPageButton="false" ButtonCssClass="pagingleft2"   ButtonType="Link"  NextPageText="" />
                <asp:NextPreviousPagerField ShowFirstPageButton="false" ShowPreviousPageButton="false"   ShowNextPageButton="false" ShowLastPageButton="true" ButtonCssClass="pagingleft1"   ButtonType="Link" LastPageText="" />

            </Fields>
        </asp:DataPager> 
```

CS：尝试以编程方式修复链接

```
 private void FixAllPagerLinks(string FixedUrl)
    {

    foreach (Control c in ListViewPager.Controls)
    {
        if(c.HasControls()) 
        {
            if(c.Controls[0] is HyperLink)
            {
                string PageParam = string.Empty; 
                string CurrentUrl = ((HyperLink)c.Controls[0]).NavigateUrl;
                char[] pageparam = new char[CurrentUrl.Length - CurrentUrl.IndexOf("page")];                    
                CurrentUrl.CopyTo(CurrentUrl.IndexOf("page"), pageparam, 0, CurrentUrl.Length - CurrentUrl.IndexOf("page"));
                PageParam = new string(pageparam);
                ((HyperLink)c.Controls[0]).NavigateUrl = string.Format("/{0}&{1}", FixedUrl , PageParam);
            }
        }
    }
}

    // in the DataPager PreRender Event nothing happen
    //but on page prerender event  it show the correct links but after 
    //clicking on next page in the pager it's messed up again
    protected override void OnPreRender(EventArgs e)
    {
    //getting the URL
    string NextPageurl = ((System.Web.UI.WebControls.HyperLink)        
    (ListViewPager.Controls[0].Controls[0])).NavigateUrl;
    //removing the page=1 to get the Basic url of the link
        NextPageurl = NextPageurl.Replace("&page=1", string.Empty).Replace("?page=1", string.Empty);
        string FullFixedUrl = FixQueryStringParameters(NextPageurl );
    FixAllPagerLinks(FullFixedUrl);
    }

private string FixQueryStringParameters(string QueryWithParams)
{
    string returnQueryStringParams = string.Empty;

    string p1 = string.Empty;
    string p2 = string.Empty;
    string p3 = string.Empty;
    Dictionary<string, string> QSKeyValuePairs = new Dictionary<string, string>();

    if (QueryWithParams.Split('?').Length > 1)
    {
        string parameters = QueryWithParams.Split('?')[1];

        if (parameters.Split('&').Length > 1)
        {
            p1 = parameters.Split('&')[0];
            QSKeyValuePairs.Add(p1.Split('=')[0], p1.Split('=')[1]);
            p2 = parameters.Split('&')[1];
            QSKeyValuePairs.Add(p2.Split('=')[0], p2.Split('=')[1]);

            if (parameters.Split('&').Length > 2)
            {
                p3 = parameters.Split('&')[2];
                QSKeyValuePairs.Add(p3.Split('=')[0], p3.Split('=')[1]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T16:33:09.887

解决方法是将修改URL的代码放在相关ListView的DataBound事件中。这是我的代码

ASPX：

```
<asp:DataPager PagedControlID="_lvCategoryProduct" PageSize="3" ID="dpProducts" runat="server" QueryStringField="p">
    <Fields>
        <asp:NextPreviousPagerField ButtonCssClass="lnkPager bold" PreviousPageText="Previous" ButtonType="Link" ShowFirstPageButton="False" ShowNextPageButton="False" ShowPreviousPageButton="true" />
        <asp:NumericPagerField CurrentPageLabelCssClass="selectedPager" NumericButtonCssClass="lnkPager pagerNumber" />
        <asp:NextPreviousPagerField ButtonCssClass="lnkPager bold" NextPageText="Next" ButtonType="Link" ShowLastPageButton="False" ShowNextPageButton="True" ShowPreviousPageButton="False" />
    </Fields>
</asp:DataPager>
<asp:ListView ID="_lvCategoryProduct" runat="server" GroupItemCount="3" ItemPlaceholderID="_phItems" GroupPlaceholderID="_phGroups">
    ...
</asp:ListView> 
```

页面代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    _lvCategoryProduct.DataBound += _lvCategoryProduct_DataBound;
}
protected void _lvCategoryProduct_DataBound(object sender, EventArgs e)
{
    if (!String.IsNullOrEmpty(_dpProducts.QueryStringField))
    {
        Common.SetDataPagerUrls(_dpProducts);
    }
} 
```

“通用”对象中的方法

```
/// <summary>
/// Method to change DataPager URLs so they keep the URL Rewriting pattern
/// Code adapted from http://weblogs.asp.net/anasghanem/archive/2009/10/08/programmatically-modifying-the-hyperlinks-in-the-datapager-control.aspx
/// </summary>
/// <param name="pager">The DataPager for which we modify the URLS</param>    
static public void SetDataPagerUrls(DataPager pager)
{
    string queryStringField = pager.QueryStringField;

    //Rewrited URL is in Page.Request.RawUrl
    string rawUrl = pager.Page.Request.RawUrl;
    //Get the value of the current page =>  abc.aspx?[queryStringField]=[X]
    string currentQueryStringValue = pager.Page.Request[queryStringField];

    //Remove the current page querystring from the URL
    rawUrl = rawUrl.Replace(queryStringField + "=" + currentQueryStringValue,"");        
    //Remove the trailing "?" or "&"        
    if (rawUrl.EndsWith("?") || rawUrl.EndsWith("&"))
    {
        rawUrl = rawUrl.Substring(0, rawUrl.Length - 1);
    }

    string queryStringValue = "";    
    //Loop through the DataPager HyperLinks to modify the NavigateUrl   
    foreach (DataPagerFieldItem Pitem in pager.Controls)
    {
        foreach (Control c in Pitem.Controls)
        {
            if (c is HyperLink)
            {
                HyperLink link = c as HyperLink;
                //Get the page value for the link NavigateUrl
                queryStringValue = GetQueryStringNumericValue(queryStringField, link.NavigateUrl);

                //Set the new URL
                link.NavigateUrl = rawUrl;
                if (link.NavigateUrl.Contains("?"))
                {
                     link.NavigateUrl += "&";
                }
                else
                {
                     link.NavigateUrl += "?";
                }
                link.NavigateUrl += queryStringField + "=" + queryStringValue;                    
            }
        }
    } 
}

/// <summary>
/// Gets a numeric value of a querystring parameter in a URL
/// </summary>
/// <param name="queryStringField">The name of the querystring field</param>
/// <param name="url">The URL in which the querystring value must be found</param>
/// <returns></returns>
static protected string GetQueryStringNumericValue(string queryStringField, string url)
{
    string returnValue = "";
    //Regular expression will match value like "p=9" in a url like "abc.aspx?p=9" or "abc.aspx?a=1&p=9&..."
    string pat = queryStringField + @"=[0-9]+";
    Regex r = new Regex(pat, RegexOptions.IgnoreCase);
    MatchCollection m = r.Matches(url);
    if (m.Count > 0)
    {
        //Remove the "[parameter]=" to keep only the value
        returnValue = m[0].Value.Replace(queryStringField + "=", "");
    }
    return returnValue;
} 
```

# javascript - 仅在具有特定类的链接上使用 Ajax

> ID：14569507
> 
> 赞同：1
> 
> 时间：2013-01-28T19:20:27.133
> 
> 标签：javascript, jquery, ajax, wordpress

我已经让我的 wordpress 主题使用 ajax 加载页面内容。我遇到的唯一问题是我是否想控制加载内容的链接。我能想到的最简单的方法是在我的标签上使用类。

我可以通过使用 :not 来限制激活 ajax 的链接

```
$(document).on("click", "a[href^='"+siteUrl+"']:not([href*='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/']):not('nonajaxlink')", function() {
    location.hash = this.pathname;
    return false;
}); 
```

但是如果我采用这种方法，我将不得不给所有不与 ajax 一起使用的链接一个特殊的类。

我也试过这个：

```
$('.ajaxlink').click(function(){
    $(document).on("click", "a[href^='"+siteUrl+"']:not([href*='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/'])", function() {
        location.hash = this.pathname;
        return false;
    });
}); 
```

但是 ajax 似乎忽略了单击功能，并且无论如何都会这样做。

有没有办法让我只能选择某些链接来使用我的 ajax？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:43:37.953

如果您需要它是通用`.ajaxLink`的，请在以下位置查找`document`：

```
$(document).on('click', '.ajaxLink', function(e) {
    e.preventDefault();
    location.hash = e.target.pathname;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:37:07.020

试试这个：

```
$(document).on("click", "a[href^='"+siteUrl+"']:not([href*='/wp-admin/']):not([href*='/wp-login.php']):not([href$='/feed/']).ajaxlink", function() {
    location.hash = this.pathname;
    return false;
}); 
```

这样，您将选择器设置为仅具有类 ajaxLink 的选择器。

# ios - iPhone 5 的 iOS 按钮定位

> ID：14569509
> 
> 赞同：0
> 
> 时间：2013-01-28T19:20:36.167
> 
> 标签：ios, objective-c, uibutton, uistoryboard, iphone-5

我的应用程序由三个按钮组成，这些按钮是我以编程方式创建的，位于导航栏的正下方。我遇到的问题是，在模拟器中运行我的应用程序时，按钮非常适合 iphone 3.5"，但是在新的更大屏幕尺寸上，它们的位置会下降一点。在我的代码中，我使用 self .view.frame.size.height-465 作为我的 y 坐标，因此无论屏幕大小如何，按钮都位于正确的位置。我也没有启用任何自动调整大小蒙版，因为我希望按钮位于当视图的大小发生变化时，位置相同。你们认为我做错了什么，因为每当我在 iphone 5 模拟器上运行我的程序时，按钮都会稍微降低一些。

编辑：我现在附上两个屏幕尺寸的按钮截图，这样你就知道我在说什么了。

![http://imgur.com/Igb5Hdq&UJ1TiQk#0](../Images/07790cfe5934968cf8d38b98b89f5ed0.png "第一党卫军")
![http://imgur.com/Igb5Hdq&UJ1TiQk#1](../Images/71ba8aa4cff1ba898adfd84d4f07d855.png "秒 SS")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:29:58.593

你不应该在代码中做任何事情。如果您将它放在导航栏的正下方，在 IB 中，它应该在任一屏幕尺寸中保持相同的距离（由于自动布局）。

**编辑后：**

如果您没有使用自动布局，并且在代码中执行所有操作，那么您应该从顶部设置 y 值，而不是高度 - 465。只需为 y 使用固定值。在下面的代码中，框架是在CustomButton的init方法中设置的，然后我只是改变它的位置：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    CustomButton1 *button = [[CustomButton1 alloc] init];
    [button addTarget:self action:@selector(doStuff:) forControlEvents:UIControlEventTouchUpInside];
    [button setTitle:@"test" forState:UIControlStateNormal];
    button.center = CGPointMake(self.view.center.x, 30);
    [self.view addSubview:button];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:26:10.793

```
 CGSize screenSize = [[UIScreen mainScreen] bounds].size;

            if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
                if (screenSize.height > 480.0f) {
                    /*Do iPhone 5 stuff here.*/

        myButton.frame = CGRectMake(0,0,129,412);
                } else {
                    /*Do iPhone Classic stuff here.*/ 

    myButton.frame = CGRectMake(0,0,123,412);
                }
            } else {
                /*Do iPad stuff here.*/
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:59:56.010

我强烈建议使用约束而不是框架。它会完全按照您的要求进行，并且会容易得多。您的代码可能看起来像

```
[self.superViewOfButton addSubview:self.button1];
[self.superViewOfButton addSubview:self.button2];
[self.superViewOfButton addSubview:self.button3];

 NSDictionary *viewsDic = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:self.button1, self.button2, self.button3, nil]
                                                      forKeys:[NSArray arrayWithObjects:@"button1", @"button2", @"button3", nil]];

[self.superViewOfButton      addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[button1]"     options:0 metrics:0 views:viewsDic]];
[self.superViewOfButton      addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-20-[button1]"     options:0 metrics:0 views:viewsDic]];
[self.superViewOfButton      addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[button2]"      options:0 metrics:0 views:viewsDic]];
[self.superViewOfButton      addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-20-[button2]"      options:0 metrics:0 views:viewsDic]]; 
```

这是视觉语法语言的链接：http: [//developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html)

并记住将所有控件设置为

```
button1.translatesAutoresizingMaskIntoConstraints = NO; 
```

起初它可能看起来有点多，但在阅读大约五分钟后，它非常简单，并且使您的应用程序更加灵活。希望这可以帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-28T20:03:12.057

1.  定义这个

`#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON )`

2.使用此代码

```
-(void)viewDidLoad  {
if( IS_IPHONE_5 )
   {
   int newY=(self.view.frame.size.height +( 568-480) )-465;
   [myButton setFrame:CGRectMake(0,newY,width,height);
   }  
else
   {
   int newY=(self.view.frame.size.height-465;
   [myButton setFrame:CGRectMake(0,newY,width,height);
   }

} 
```

# android - 移植iOS游戏的最低安卓版本？

> ID：14569512
> 
> 赞同：-3
> 
> 时间：2013-01-28T19:20:44.140
> 
> 标签：android, android-version

我刚刚完成了一个 iPhone/iOS 游戏（“Ktalu: Planet of Terror”）。我想将它移植到 Android，所以我下载并安装了 Andorid SDK/Eclipse 等。当我创建一个新项目时，它会询问我要支持的最低 Android 版本。默认值为 API 级别 8 (Froyo)。

我的 iOS 游戏是使用 Cocos2D 版本 2.0 用 Objective C 编写的。这是一款单人游戏，2D 横向卷轴，使用加速度计进行输入。它具有应用内购买功能，并使用代码允许人们在 Facebook 或 Twitter 上发布分数。它使用 SoundEngine 来发出声音。它使用 GameCenter 作为排行榜和一些成就。

我假设上述所有（或大部分）都有 Android 等价物。此外，如果很少有人仍然拥有运行这些版本的手机，我不想支持真正旧的 Android 版本。

那么有人可以建议我应该使用什么来支持最低 Android 版本吗？

另外，有谁知道网络上哪里有关于流通中（2012 年底或 2013 年初）有多少手机使用各种版本的 Android 的信息？同样，即使我的游戏在技术上可以支持 Android Level 8，如果目前只有 1% 的手机运行 Level 8 或更低，那么尝试支持它是没有意义的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:19:59.470

您现在可以选择最小版本。Eclipse 和 android 文档将“告诉”（在移植过程中）您何时需要更高版本。您将来可能会在几秒钟内更改它。

以下是一些版本使用统计信息（只是为您搜索）[http://www.androidtapp.com/tag/android-statistics/](http://www.androidtapp.com/tag/android-statistics/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:05:49.390

您不能只是“选择”一个版本，您需要研究一个具有您需要使用的所有功能的版本。仅仅告诉我们它使用什么并没有帮助，因为我们不知道它会使用什么方法调用。您可以根据需要更新 API 级别中的函数来更改最低 API 级别。

# jquery - 升级 wordpress jquery 后停止工作

> ID：14569516
> 
> 赞同：1
> 
> 时间：2013-01-28T19:21:09.980
> 
> 标签：jquery, wordpress

升级到新的 wrpdress jquery 后停止工作。

```
Uncaught TypeError: Cannot read property 'expr' of undefined
2
Uncaught TypeError: Property 'jQuery' of object [object Window] is not a function www.xxx.si:313
Uncaught TypeError: Property 'jQuery' of object [object Window] is not a function thickbox.js:18
Uncaught TypeError: undefined is not a function jquery.form.min.js:12
Uncaught TypeError: undefined is not a function scripts.js:3
Uncaught TypeError: Property 'jQuery' of object [object Window] is not a function 
Uncaught TypeError: Property 'jQuery' of object [object Window] is not a function 
```

详情例如：

```
cannot read property 'expr' of undefined 
```

jQuery.extend(jQuery.expr[':'], {

```
undefined is not a function scripts.js:3
$(function() { 
```

怎么了？我该如何解决这个问题？

编辑：

Mat帮我找到这个noConflict jquery，它是事件日历插件的一部分

```
// jQuery DOM extreme protection management
    $options = get_option('optionsEventsCalendar');
   echo ' <script type="text/javascript">',"\n\t";
   echo '// <![CDATA[',"\n\t";
   echo 'var ecd = {};',"\n\t";
   echo 'ecd.jq = jQuery.noConflict('.$options['jqueryextremstatus'].');',"\n\t";
   echo '//]]>',"\n";
   echo ' </script>',"\n";
    echo "<!-- End Of Script Generated By Events-Calendar - ".EVENTSCALENDARVERS." -->\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:23:12.823

您在 www.mdns-maribor.si 上的代码使用[$.noConflict](http://api.jquery.com/jQuery.noConflict/)：

```
<script type="text/javascript">
// <![CDATA[
var ecd = {};
ecd.jq = jQuery.noConflict(true);
//]]>
</script> 
```

这将删除`jQuery`和`$`变量。`jQuery`除非您想覆盖and`$`值，否则您不需要 jQuery.noConflict 。如果您确实需要它，请等到其余代码运行后再调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:22:53.523

看起来您的升级以某种方式删除了您对 jQuery 源代码的包含。

查看解决方案中包含它的部分。

吸烟枪是

> 对象 [object Window] 的属性“jQuery”不是函数

您的代码正在调用 jQuery，但 JavaScript 告诉您它没有定义。

# php - 用 PHP 执行 mysql “create function” 语句

> ID：14569528
> 
> 赞同：8
> 
> 时间：2013-01-28T19:21:45.423
> 
> 标签：php, mysql, function, create-function

我想`mysql`从 PHP 运行以下创建函数语句：

```
DELIMITER $$
CREATE FUNCTION `myFunc`(`instring` varchar(4000)) RETURNS int(11)
    NO SQL
    DETERMINISTIC
    SQL SECURITY INVOKER
BEGIN
    DECLARE position int;
    ....here comes function logic
    RETURN position;
END$$
DELIMITER ; 
```

但我得到这个mysql错误：

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在“DELIMITER”附近使用的正确语法

我能做些什么？我可以在没有 DELIMITER 关键字的情况下执行创建语句吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T19:26:27.653

您很可能不需要该`DELIMTER`命令。那属于以 MySQL 为中心的客户端程序。

请尝试使用普通的旧分号：

```
if (!$mysqli->query("DROP PROCEDURE IF EXISTS p") ||
    !$mysqli->query("CREATE PROCEDURE p(IN id_val INT) BEGIN INSERT INTO test(id) VALUES(id_val); END;")) {
    echo "Stored procedure creation failed: (" . $mysqli->errno . ") " . $mysqli->error;
} 
```

并让 PHP 担心分隔

# 警告

我从[http://php.net/manual/en/mysqli.quickstart.stored-procedures.php得到了上面的代码](http://php.net/manual/en/mysqli.quickstart.stored-procedures.php)

# jquery - 使用 jQuery.animate 更改元素的位置（CSS 左、右、上、下）时，Firefox 的行为很奇怪

> ID：14569536
> 
> 赞同：2
> 
> 时间：2013-01-28T19:22:01.243
> 
> 标签：jquery, css, firefox, jquery-animate

考虑 Firefox 中的以下小提琴：http: [//jsfiddle.net/rawKC/1/](http://jsfiddle.net/rawKC/1/)

单击红色矩形，看看它是如何移动的。它立即消失，然后在顶部某处不知从何处发出颤音，并在其适当的终点停止。预期的行为（例如在 Chrome 中可以看到）是以直线游荡到终点，改变动画调用中指定的大小。

矩形使用 left、right、top 和 bottom 属性进行绝对定位。这也是它的大小是如何确定的。单击后，包装器的定位属性将更改。我不知道为什么动画在 Firefox 中不起作用。

我可以想到许多解决方法，但我想找出这个特定用例有什么问题。有人有想法吗？

**编辑**

似乎包含元素的样式根本不重要。只有移动的元素表现得很奇怪。我已经更新了问题并相应地摆弄了。

*代码片段供参考：*

```
<div id="wrapper"></div> 
```

```
$(function() {
    var $wrapper = $('#wrapper');

    $wrapper.click(function() {
        $wrapper.animate({
            bottom: '85%',
            left: '2%',
            right: '75%',
            top: '2%'
        });
    });
}); 
```

```
#wrapper {
    bottom: 35%;
    left: 18%;
    position: absolute;
    right: 18%;
    top: 35%;
} 
```

# php - 有没有一种方法可以在上传到服务器时自行编码视频

> ID：14569544
> 
> 赞同：0
> 
> 时间：2013-01-28T19:22:17.477
> 
> 标签：php, html, ffmpeg, mysqli

下面是我的代码，它将文件上传到服务器并将每个上传文件的名称存储到数据库中：

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

    if ($_FILES['fileVideo']['error'] === UPLOAD_ERR_OK) { 

$result = 0;

if( file_exists("VideoFiles/".$_FILES['fileVideo']['name'])) {
    $parts = explode(".",$_FILES['fileVideo']['name']);
    $ext = array_pop($parts);
    $base = implode(".",$parts);
    $n = 2;

    while( file_exists("VideoFiles/".$base."_".$n.".".$ext)) $n++;
    $_FILES['fileVideo']['name'] = $base."_".$n.".".$ext;

    move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
    "VideoFiles/" . $_FILES["fileVideo"]["name"]);
    $result = 1;

}
    else
      {
      move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
      "VideoFiles/" . $_FILES["fileVideo"]["name"]);
      $result = 1;
  }

    $videosql = "INSERT INTO Video (VideoFile) 
    VALUES (?)";

        if (!$insert = $mysqli->prepare($videosql)) {
      // Handle errors with prepare operation here
    }

    //Assign the variable
$vid = 'VideoFiles/'.$_FILES['fileVideo']['name'];

            //Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$vid);

 $insert->execute();
 $id = $mysqli->insert_id;

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();     

        }else{
  echo "Upload was not successful";   
  }

?>

 <script language="javascript" type="text/javascript">
 window.top.stopVideoUpload(<?php echo $result; ?>,'<?php echo $id; ?>', '<?php echo $_FILES['fileVideo']['name']; ?>');
 </script>  

</body>
</html> 
```

现在我正在使用 jwplayer，它需要视频文件来匹配此页面上的视频格式：

[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12539/supported-video-and-audio-formats/](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12539/supported-video-and-audio-formats/)

因此，当文件上传到服务器时，我需要能够在服务器上自动对文件进行编码。我不希望用户尝试自己手动编码视频文件，我希望它自动完成。但我的问题是如何让自动服务器端文件编码工作？

我有一个演示如何上传视频文件：[DEMO](http://helios.hud.ac.uk/u0867587/Mobile_app/InputTest2.php)

使用演示：

1.  单击`Add Question`按钮，文件输入将出现在表格中

2.  点击直接上传，您将看到一个简单的验证，说明允许使用哪种视频文件格式（这只需检查视频文件扩展名即可）

3.  浏览一个视频文件，选择然后点击`Upload`等待上传完成（我推荐一个简短的视频文件以节省时间）。文件上传后会显示成功信息，视频文件上传到服务器，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:32:41.460

这样做的方法很多。就程序员时间而言，最简单和最快的方法是使用 ffmpeg 直接将事物编码为可用的东西，就在您的上传脚本中（使用`exec`或`system`这样做）。

但是，这会带来一些问题：当服务器忙于处理请求时，您的浏览器可能会超时。此外，您无法真正分散负载。

所以，上传成功后，调用ffmpeg：

```
exec("ffmpeg -i $vid -vcodec libx264 -vpre default -crf 21 ".
                      "-acodec libfaac -ab 128k $vid-transcoded.mp4"); 
```

您必须参考[`ffmpeg`](http://ffmpeg.org/)网站了解所有选项（有**很多**选项）。另外，jwplayer 非常流行，所以应该有很多关于如何转码的资源。

因此，另一种解决方案是让服务器将文件上传到一个`to_be_processed`目录并有一个后台进程（也许是 cronjob？）来处理该目录中的所有文件。这样，上传完成后浏览器请求就完成了，您可以完全控制处理资源。然而，这需要相当多的程序员时间。您将必须创建处理作业，并进行一些管理工作以让用户知道处理的程度。

# python - 如何使用 Python 和 GTK3+ 将 PDF 渲染成 Pixbuf

> ID：14569551
> 
> 赞同：2
> 
> 时间：2013-01-28T19:22:40.217
> 
> 标签：python, python-3.x, gtk, cairo, poppler

我想将 PDF 文件中的页面显示到 GtkIconView 中。为此，我需要在我的 GtkTreeModel 中有一个 GDK_TYPE_PIXBUF 类型的列。**如何将我的 PDF 页面呈现为 Pixbuf？**

有`page`, a `PopplerPage`，我试过这个：

```
surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, 320, 240)
page.render(surface)
img = Gdk.pixbuf_get_from_surface(surface, 0, 0, 320, 240) 
```

`((*&(&cr->ref_count)->ref_count) > 0)`但是，当它执行`render`命令时，我得到一个关于断言的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:02:33.030

最后，我想通了。我必须渲染到 cairo 上下文，如下所示：

```
surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, w, h)
ctx = cairo.Context(surface)
page.render(ctx)
img = Gdk.pixbuf_get_from_surface(ctx.get_target(), 0, 0,
        ctx.get_target().get_width(),
        ctx.get_target().get_height()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:50:18.807

试试这个

```
 # get pdf
 pdf = mkpdf(ds,sample=True)

# render pdf onto pixbuf
pixbuf = Pixbuf(COLORSPACE_RGB,False,8,286,225)
doc = poppler.document_new_from_data(pdf,len(pdf),password='')
page0=doc.get_page(0)
page0.render_to_pixbuf(0,0,8,11,1,0,pixbuf)

# save pixbuf as png
# There has to be a better way to get the image?
lst=[]
pixbuf.save_to_callback(lambda b,l: l.append(b), 'png', user_data=lst)
png=''.join(lst)

return png 
```

[参考](http://comments.gmane.org/gmane.comp.python.reportlab.user/9063)

# c++ - 如何对带有 .cpp 文件的 Makefile 使用隐式规则？

> ID：14569553
> 
> 赞同：4
> 
> 时间：2013-01-28T19:22:44.627
> 
> 标签：c++, makefile

对于 C++ 文件，Makefile 中有一条隐式规则，使用 .C 或 .cc 扩展名。但我通常有 C++ 源代码的 .cpp 文件扩展名。

如何对 .cpp 文件使用 Makefile 的隐式规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:54:18.200

请参阅[隐式规则目录](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules)：

> 编译 C++ 程序
> 
> no 是从 n.cc、n.cpp 或 nC 自动生成的，其配方格式为“$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c”。我们鼓励您对 C++ 源文件使用后缀“.cc”而不是“.C”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:01:07.493

这是来自[GNU make docs](http://www.gnu.org/software/make/manual/make.html#Implicit-Rules)。

> 模式规则的先决条件中的“%”代表与目标中的“%”匹配的相同词干。为了应用模式规则，其目标模式必须与所考虑的文件名匹配，并且其所有先决条件（在模式替换之后）必须命名存在或可以生成的文件。这些文件成为目标的先决条件。因此，形式的规则
> 
> ```
>  %.o : %.c ; recipe... 
> ```
> 
> 指定如何制作一个文件no，以另一个文件nc为前提，前提是nc存在或可以制作。

所以你可以尝试类似的东西

```
%.o : %.cpp %.hpp
   $(CC) $(CFLAGS) $@ 
```

# mercurial - Mercurial Queues - 导出补丁

> ID：14569555
> 
> 赞同：3
> 
> 时间：2013-01-28T19:22:47.250
> 
> 标签：mercurial, mercurial-queue

我的本地机器上有一个 mercurial 队列补丁，我需要与我不想提交到上游存储库的同事共享。有没有一种简单的方法可以打包该补丁并与他共享？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:36:52.630

mq 将`.hg\patches\`文件夹中的补丁存储为不带扩展名的文件。

您可以复制或通过电子邮件发送这些文件并`hg qimport FILE`在另一端使用，将它们带入另一个存储库的补丁队列中。请注意，如果您将其直接复制到目标`.hg\patches\`文件夹，则需要使用`--existing`开关，以便`hg`知道不要创建文件。

顺便说一句，该`.hg/patches`文件夹本身可以是一个存储库，用于跟踪补丁队列本身的更改。您可以使用 初始化它`hg init --mq`并提交当前补丁`hg com --mq`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:36:45.453

*   如果双方都启用了 MQ，则可以使用 for pull|push --mq 选项
*   您可以使用 MQCollab 扩展
*   您可以从补丁目录（默认：`.hg/patches）复制所需的 mq-patch 并使用任何方式传输它：补丁是普通的差异，即使没有 MQ，它也可以应用于存储库中的“外部”文件

# java - 从 World Wind 中的 geoserver 下载 GeoTiff

> ID：14569557
> 
> 赞同：1
> 
> 时间：2013-01-28T19:22:51.937
> 
> 标签：java, geoserver, wms, worldwind

我正在尝试使用 wms 请求将 tiff 文件下载到地理服务器，以便我可以通过 World Wind 中的 geotiff 解析器运行它。使用 World Wind Java SDK，我可以解析本地存储在计算机上的 tiff 文件，但我需要能够解析地理服务器上的文件。知道我该怎么做吗？因为已经有工具可以在本地解析它，所以我想也许我可以编写代码来在本地下载服务器请求并将其传递进去，这样我就不必重写解析器了。World Wind 支持解析 WMS 请求，但我需要能够解析返回 tiff 文件的 wms 请求。

非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T14:52:35.490

所以，我不是一个很好的程序员；这可能不是一个好的解决方案，但它应该可以工作。

在此处的“ImportImagery.java”示例中：

[http://worldwind31.arc.nasa.gov/svn/trunk/WorldWind/src/gov/nasa/worldwindx/examples/dataimport/](http://worldwind31.arc.nasa.gov/svn/trunk/WorldWind/src/gov/nasa/worldwindx/examples/dataimport/)

我编辑了 ImportImagery() 方法以包括三个输入字符串文件路径字符串扩展名和 AppFrame appframe。这个方法里面是“ExampleUtil.saveResourcetoTempFile(filepath, extension)。这是读取图像的内容。虽然我输入的是文件路径，但也可以接受 URL。

[http://builds.worldwind.arc.nasa.gov/worldwind-releases/daily/docs/api/index.html](http://builds.worldwind.arc.nasa.gov/worldwind-releases/daily/docs/api/index.html)

# php - 向 Arduino 发送命令的最佳策略：发送 UDP 数据包或从动态网页获取配置？

> ID：14569559
> 
> 赞同：1
> 
> 时间：2013-01-28T19:22:59.363
> 
> 标签：php, logging, udp, command, arduino

我想将一些配置参数发送到 Arduino 以太网板，我想出了两个潜在的解决方案。如果您能就使用其中任何一个提出您的想法，我将不胜感激。

第一个（显而易见的）选项是向 Arduino 发送包含配置的[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)命令。但是，这需要重新配置大多数路由器以启用端口转发或禁用防火墙。

所以我的第二个选择是通过从 Ardino 访问包含所有必需信息的网页来获取配置（这将使用服务器上的[PHP](http://en.wikipedia.org/wiki/PHP)脚本进行更新）。此页面将每分钟左右检查一次，如果找到新配置，则更新配置。每分钟通信的要求不是问题，因为另一个方向也有流量（我的 Arduino 在网站上记录温度）。

哪种方法最好，我应该避免哪些陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:28:48.127

我最近完成了我的[WebPlayer.ino](http://mpflaga.github.com/Sparkfun-MP3-Player-Shield-Arduino-Library/_web_player_8ino_source.html)，它通过网络推送了关于从 SD 卡播放到 MP3 芯片的文件的命令，以及音量和速度控制。与您的目标相似，我不得不从各处拉出一堆碎片。因此，它可能是如何解析 Web 命令的一个很好的例子。

在 UDP 或 TCP 中并使用本机以太网库，需要从`ethernet.client`. 无论方向和 TCP 与 UDP。我看到的 UDP 的一个优点是有一些示例使用“字符串”类型来获取整体数据，但这并不重要。我会坚持使用 TCP，看看我的示例如何读取 Web 服务器请求。

此外，[Webduino](http://code.google.com/p/webduino/)库是一个简化获取命令的包装器。它提供[JSON](http://en.wikipedia.org/wiki/JSON)等。所以这对你的工作非常有用。但它使用了大量的 RAM 和 ROM。因此我的项目没有使用它。

# r - 在 R 中使用指示变量指定回归

> ID：14569563
> 
> 赞同：2
> 
> 时间：2013-01-28T19:23:14.553
> 
> 标签：r, formula, regression

我想在 R 中指定一个回归，该回归将估计`x`以第三个变量为条件的系数`z`大于 0。例如

```
y ~ a + x*1(z>0) + x*1(z<=0) 
```

使用公式在 R 中执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T20:17:10.067

“:”（冒号）运算符用于构造条件交互（当与用 构造的不相交预测变量一起使用时`I`）。应该与预测一起使用

```
> y=rnorm(10)
> x=rnorm(10)
> z=rnorm(10)
> mod <- lm(y ~ x:I(z>0) )
> mod

Call:
lm(formula = y ~ x:I(z > 0))

Coefficients:
    (Intercept)  x:I(z > 0)FALSE   x:I(z > 0)TRUE  
      -0.009983        -0.203004        -0.655941  

> predict(mod, newdata=data.frame(x=1:10, z=c(-1, 1)) )
         1          2          3          4          5          6          7 
-0.2129879 -1.3218653 -0.6189968 -2.6337471 -1.0250057 -3.9456289 -1.4310147 
         8          9         10 
-5.2575108 -1.8370236 -6.5693926 
> plot(1:10, predict(mod, newdata=data.frame(x=1:10, z=c(-1)) )  )
> lines(1:10, predict(mod, newdata=data.frame(x=1:10, z=c(1)) ) ) 
```

可能有助于查看其模型矩阵：

```
> model.matrix(mod)
   (Intercept) x:I(z > 0)FALSE x:I(z > 0)TRUE
1            1      -0.2866252     0.00000000
2            1       0.0000000    -0.03197743
3            1      -0.7427334     0.00000000
4            1       2.0852202     0.00000000
5            1       0.8548904     0.00000000
6            1       0.0000000     1.00044600
7            1       0.0000000    -1.18411791
8            1       0.0000000    -1.54110256
9            1       0.0000000    -0.21173300
10           1       0.0000000     0.17035257
attr(,"assign")
[1] 0 1 1
attr(,"contrasts")
attr(,"contrasts")$`I(z > 0)`
[1] "contr.treatment" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:16:59.470

```
 y <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
  z <- sample(x=-10:10,size=length(trt),replace=T)
  x <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
  a <- rnorm(n=length(x))
  lm(y~a+I(x*1*I(z>0))+ I(x*1*I(z<=0))) 
```

但我认为`:`在 DWIN 解决方案中使用运算符更优雅..

**编辑**

lm(y~a+I(x*1*I(z>0))+ I(x*1*I(z<=0)))

称呼：

```
lm(formula = y ~ a + I(x * 1 * I(z > 0)) + I(x * 1 * I(z <= 0)))

Coefficients:
         (Intercept)                     a   I(x * 1 * I(z > 0))  I(x * 1 * I(z <= 0))  
              6.5775               -0.1345               -0.3352               -0.3366  

> lm(formula = y ~ a+ x:I(z > 0))

Call:
lm(formula = y ~ a + x:I(z > 0))

Coefficients:
    (Intercept)                a  x:I(z > 0)FALSE   x:I(z > 0)TRUE  
         6.5775          -0.1345          -0.3366          -0.3352 
```

# .net - Visual Studio 2010 中的 _fpreset 错误

> ID：14569565
> 
> 赞同：1
> 
> 时间：2013-01-28T19:23:35.213
> 
> 标签：.net, visual-studio-2010, visual-c++

早上好。

我在使用 c++ 的 Visual Studio 2008 解决方案上有以下定义（这个程序是由在我之前在这里工作的人创建的）：

```
[DllImport("msvcr70.dll", CallingConvention = CallingConvention::Cdecl)]
extern int _fpreset(); 
```

这条线完美无缺，我可以在代码上调用 _fpreset。

由于我们需要将其实现为 64 位应用程序，因此我安装了 Visual Studio 2010。从存储库下载解决方案后，它会要求我进行转换才能正常工作。我单击是，当我尝试编译程序时，出现以下错误：

```
error C2556:'int _fpreset(void)': overloaded functions only differ by return type with 'void _fpreset(void)' 
```

当我在 Visual Studio 2008 中再次尝试时，它完美地工作......

任何想法为什么它在 2010 年不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:49:03.070

声明是错误的。你现在被提醒了，因为你 #include 引入了 float.h 的其他一些 VS2010 .h 文件，它是声明 _fpreset() 的头文件。这给出了这个 CRT 函数的正确声明，返回类型为*void*。

您应该删除这个 [DllImport] 声明，不仅因为它是错误的，而且它还使您的程序依赖于古老的 VS2002 CRT (msvcr70.dll)。将此添加到实际调用 _fpreset() 的任何源代码文件中：

```
 #include <float.h> 
```

在托管代码中调用 _fpreset() 非常有问题，只有在调用弄乱 FPU 控制字的本机代码时才这样做。

# ruby-on-rails - Amazon Mechanical Turk - Rturk - RestClient::BadRequest: 400 Bad Request

> ID：14569568
> 
> 赞同：0
> 
> 时间：2013-01-28T19:23:44.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-web-services, mechanicalturk

我正在尝试设置 Rturk 将一些工作外包给亚马逊的 Mechanical Turk。当我尝试创建我的`HITs`时，我一直在控制台中遇到以下错误：

```
RestClient::BadRequest: 400 Bad Request 
```

当我复制 URL 并将其粘贴到浏览器中以获取响应时，我收到以下消息：

```
This user is not authorized to perform the requested operation 
```

你们知道这里会发生什么吗？我正在关注 github 上的 rturk 文档。[https://github.com/mdp/rturk](https://github.com/mdp/rturk) gem 是否有可能需要更新？

```
RTurk.setup(ENV['AWS_ACCESS_KEY_ID'], ENV['AWS_SECRET_ACCESS_KEY_ID'], :sandbox => true)

  hit = RTurk::Hit.create(
    :title => "Sample turk",
    :assignments_duration => 1.hour,
    :expires_at => 1.day.from_now
  ) do |hit|
    hit.lifetime = 1.day
    hit.assignments = 1
    hit.description = "Test description."
    hit.keywords = "places, search, map, location"
    hit.question(mturk-fb_path, :frame_height => 750)
    hit.reward = reward
    if approval_rate
      hit.qualifications.add :approval_rate, { :gt => approval_rate }
    end         if abandoned_rate
      hit.qualifications.add :abandoned_rate, { :lt => abandoned_rate }
    end
    if is_us
      hit.qualifications.add :country, { :eql => "US" }
    end
  end    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:54:54.500

这里可能会发生一些事情：

*   我不相信`:assignments_duration`并且`:expires_at`是有效的选择。您应该使用它`hit.duration`来指定工作人员在接受命中后必须完成的时间量，并`hit.lifetime`设置命中到期前的时间量。
*   这可能只是您帖子中的错字，但`mturk-fb_path`不是有效的 ruby​​ 变量名。（不能使用破折号）

尝试从最简单的例子开始，一旦你开始工作，你就可以构建它。这个来自 rturk 的例子应该是一个好的开始：[https](https://github.com/mdp/rturk#creating-hits) ://github.com/mdp/rturk#creating-hits 。

此外，我绝对建议阅读 mturk 文档以创建热门：[http](http://docs.aws.amazon.com/AWSMechTurk/2011-10-01/AWSMturkAPI/ApiReference_CreateHITOperation.html) ://docs.aws.amazon.com/AWSMechTurk/2011-10-01/AWSMturkAPI/ApiReference_CreateHITOperation.html 。

# javascript - javaScript 不适用于 jquery 加载函数加载的页面

> ID：14569572
> 
> 赞同：2
> 
> 时间：2013-01-28T19:23:52.397
> 
> 标签：javascript, jquery, html

**第 1 页**

```
<html>
<head>
<script src="jquery-1.8.3.js" type="text/javascript"></script>
</head></head>
<body><div id="main"></div> </body>
<script>$('div[id=main]').load('page2.php')
$('span[id*=temp]').on('click',function(){
alert(this.id); }); //this block of code not working!!
</script>
</html> 
```

**第2页**

```
<div>
<span id="temp">
this is demo
</span>
</div> 
```

基本上我想在单击标签时在主 div 中再次加载 page2 但无法获取第一页中标签的 id，page1 的脚本不适用于第 2 页的项目或标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:34:39.240

您正试图在 AJAX 调用之后立即绑定事件，因此该元素尚不存在。该调用是异步的，因此它不会停止代码执行以等待响应。

在内容加载后绑定元素，使用方法的`success`回调`load`：

```
$('div#main').load('page2.php', function(){
  $('span[id*=temp]').on('click', function(){
    alert(this.id);
  });
}); 
```

或使用委托将事件绑定到父元素：

```
$('div#main').load('page2.php');
$('div#main').on('click', 'span[id*=temp]', function(){
  alert(this.id);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:26:56.593

因为您需要指定父选择器以考虑动态创建的元素。

例子：

```
$("#main").on('click', 'span[id*="temp"]', function() {alert('Handler is working!');}) 
```

这是一个很好的相关问题：[jQuery 1.7 on() and off() methods for dynamic elements](https://stackoverflow.com/questions/8029589/jquery-1-7-on-and-off-methods-for-dynamic-elements)

# php - 使用下拉菜单动态更改照片

> ID：14569575
> 
> 赞同：1
> 
> 时间：2013-01-28T19:24:10.237
> 
> 标签：php, javascript, jquery

我是 PHP 新手，正在尝试弄清楚如何编写一些特定功能。我有一个显示照片的产品页面，并且有两个下拉菜单，一个用于大小，一个用于颜色。我想做的是当页面第一次加载时，我设置了一个具有默认产品 SKU 的变量。当菜单更改时，我想将变量更改为所选两个菜单项的组合值。随着变量的变化，我想在照片和隐藏的表单值中反映这一点（最终提交到购物车）。

因此，当页面加载时，它会在大小和颜色下拉列表中显示图片 A 以及相关值。然后，当任一下拉菜单更改时，照片会动态更改以反映它（同时也更新隐藏的表单值）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:31:05.737

JavaScript，或者像 jQuery 这样的 JS 库，是你需要的。

对于 jQuery（首选，更简单）：

```
var $select = $('#Dropdown'),
    $img = $('#Picture');

$select.on('change',function(){
    $img.attr('src',$(this).val());
}); 
```

对于 JavaScript：

```
var dropdown = document.getElementById('Dropdown'),
    img = document.getElementById('Picture');

dropdown.addEventListenter('change',function(){
    img.src = this.value;
}); 
```

未经测试，但应该可以工作。

编辑：使用 JavaScript 解决方案时，请确保先加载窗口（如果元素尚不存在，它将不起作用）。

```
window.onload = function(){
    // do your magic here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:40:59.820

首先，PHP 是一种服务器端语言，这实际上意味着它生成的任何内容都必须由服务器处理，然后发送回浏览器。因此，在这种特殊情况下，您需要使用诸如 Javascript 之类的客户端语言，或者为了使代码更简单，使用诸如 jQuery 之类的库。

要了解有关 jQuery 的更多信息，请参见此处：

[http://jquery.com/](http://jquery.com/)

用非常笼统的术语（因为您没有发布任何代码），这是一个使用 jQuery 更改图像的示例：

```
// Select the dropdown from the DOM
var dropdown = $('#dropdown_id');

// Select the image from the DOM
var image = $('#image');

// Set the onchange event
// This will be fired when the select value is changed
dropdown.on('change',function(){
    // Get the value of the selected option
    var value = $(this).val();

    // Change the source of the image
    image.attr('src',value);
}); 
```

# process - mpi 进程 ID

> ID：14569577
> 
> 赞同：1
> 
> 时间：2013-01-28T19:24:17.273
> 
> 标签：process, mpi, pid

我想获取从 mpirun/mpiexec 工具开始的 mpi 应用程序的进程 ID。

例如，我使用假设 8 个进程运行我的代码，并希望在执行开始时获取所有这 8 个进程的进程 ID，以提供给另一个工具作为输入。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:26:26.980

我不相信有任何 MPI 库例程会返回运行 MPI 进程的 o/s 进程的 pid。绝对准确地说，我不认为 MPI 标准要求 MPI 进程和 o/s 进程之间存在一对一的映射，也不需要任何其他映射基数，尽管我认为我从未使用过流程的不同视图之间没有一对一映射的 MPI 实现。

`getpid`除此之外，如果你在 Linux 机器上，为什么不简单地使用呢？每个 MPI 进程都应该有自己的 pid。我想有一个 Windows 系统调用可以做同样的事情，但我对 Windows 不太了解。

# javascript - JS Regexp：从 html 获取内联 javascript

> ID：14569580
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:24:27.513
> 
> 标签：javascript, regex

我需要从 html 字符串中获取所有脚本标签，将内联脚本和“链接”脚本分开。内联脚本是指没有`src`属性的脚本标签。

这是我获得“链接脚本”的方法：

`<script(.)+src=(.)+(/>|</script>)`

因此，`<script`后跟一个或多个*任意字符*，后跟`src=`，后跟`/>`or `</script>`。

这按预期工作。

现在我想得到所有没有 src 标签的脚本标签，在`<script .....>`and之间有一些javascript代码`</script>`，但我不知道该怎么做。我刚开始理解正则表达式，所以需要更有经验的 re guru 的帮助:)

**更新** 好的，亲爱的反对者。我在变量中有整个 html 页面的 html 代码。我想从中提取脚本标签。如何做到这一点，例如使用jquery？

```
var dom = $(html);
console.log(html.find('script'); 
```

不管用。那么，实现这一目标的方法是什么？

**更新 2** 我不需要用正则表达式来解决这个问题，但是因为现在我正在学习它们，所以我想我会尝试一下。我愿意接受任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:44:37.263

使用 创建一个 DOM 元素`document.createElement`，然后将其设置`innerHTML`为 HTML 字符串的内容。这将使用浏览器的内置解析器自动解析您的 HTML，并用子元素填充您新创建的元素。

```
dummyDoc = document.createElement("html");
dummyDoc.innerHTML = "<body><script>alert('foo');</script></body>"; // or myInput.value
var dom = $(dummyDoc);
var scripts = dom.find('script'); 
```

（我只使用 jQuery，因为你在你的问题中这样做了。如果没有 jQuery，这当然也是可能的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T00:23:01.090

如果您处于没有可用 dom 访问权限的位置（nodejs？），您将被迫使用正则表达式。这是在类似情况下对我有用的解决方案：

```
function scrapeInlineScripts(sHtml) {
    var a = sHtml.split(/<script[^>]*>/).join('</script>').split('</script>'),
        s = '';

    for (var n=1; n<a.length; n+=2) {
        s += a[n];
    }
    return s;
} 
```

# asp.net - 单击 asp 按钮发送电子邮件后，我的表单移动到页面左侧。不应该发生

> ID：14569581
> 
> 赞同：0
> 
> 时间：2013-01-28T19:24:29.463
> 
> 标签：asp.net, css, forms, vbscript, css-position

我有这个CSS代码：

```
form 
{
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#FFFFFF, endColorstr=#6EA5FF);
background: -webkit-gradient(linear, bottom, left 175px, from(#CCCCCC), to(#EEEEEE));
background: -moz-linear-gradient(bottom, #CCCCCC, #EEEEEE 175px);
background-color: #E0E0E0;
margin:auto;
position:relative;
width:640px;
height:820px;
font-family: Tahoma, Geneva, sans-serif;
font-size: 14px;
font-style: normal;
line-height: 24px;
font-weight: bold;
color: black;
text-decoration: none;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius: 10px;
padding:10px;
border: 1px solid #999;
border: inset 1px solid #333;
-webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
-moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
} 
```

对于这种形式：

```
<form  id="form" runat="server">
    <h1 align="center">Ticker Tape Updater</h1>
        <legend>Message (to be appended to current message)</legend> 
```

每当我单击表单内的 asp 按钮发送电子邮件时，表单就会移动到屏幕的左侧，该屏幕最初是居中的。在我发送一封电子邮件后，我的 vbscript 中有一些代码会调用一个警报框来弹出说电子邮件已发送。如果我刷新页面，我会收到电子邮件弹出框并且电子邮件再次发送并且表单仍然在页面的左侧。如果我单击页面上清除所有文本框并重置所有复选框的 asp 按钮，则表单将返回到中间。我认为，当我刷新页面并再次收到警报消息并再次发送电子邮件时，代码没有完成运行或其他什么。有任何想法吗？这是我的vb代码：

```
Protected Sub submitBtn_Click(sender As Object, e As System.EventArgs) Handles submitBtn.Click

    Dim msg As String = "- " + TextBox1.Text + " -"

    If (Checkbox4.Checked = True Or Checkbox5.Checked = True) And (DepartmentIsSelected() = False) Then
        Exit Sub
    Else

        If AtLeastOneIsChecked() = True Then

            'Add message to Screen 1
            If Checkbox1.Checked Then
                UpdateMessage(1, msg)
            End If

            'Add message to Screen 2
            If Checkbox2.Checked Then
                UpdateMessage(2, msg)
            End If

            'Add message to Screen 3
            If Checkbox3.Checked Then
                UpdateMessage(3, msg)
            End If

        End If

        If (Checkbox4.Checked = True Or Checkbox5.Checked = True) And (DepartmentIsSelected() = True) Then

            'Send emails
            If Checkbox4.Checked And DepartmentIsSelected() Then
                SendMessageToEmailOrText("email", msg)
            End If

            'Send texts
            If Checkbox5.Checked And DepartmentIsSelected() Then
                SendMessageToEmailOrText("text", msg)
            End If

        End If

        If AtLeastOneIsChecked() Then
            ClearAll()
        End If
    End If

End Sub

Protected Sub UpdateMessage(ByVal screenNumber As Integer, ByVal message As String)

"code for sub"

End Sub
    Protected Sub SendMessageToEmailOrText(ByVal emailOrText As String, ByVal message As String)
        'This section grabes the email addresses and text address from the function then send out the emial and text seperately not in the same message.

    'grabEmailAddresses()
    'grabTextAddresses()
    Dim subject As String = "Broadcast Alert"
    Dim mClient = New SmtpClient("smtp.aaicorp.com")
    Dim addresses As String
    Dim addresses1 As String

    If emailOrText = "email" Then
        '*******************************************************************************************************************
        'This section addes Bcc to the To: line so there is no one listed in this line and the people do not see all the emil addresses

        'create the mail message
        Dim mail As New MailMessage()

        'set the addresses
        'to specify a friendly 'from' name, we use a different ctor
        mail.From = New MailAddress("flims@aai.textron.com", "FLIMS Site")

        'since the To,Cc, and Bcc accept addresses, we can use the same technique as the From address
        'since the To, Cc, and Bcc properties are collections, to add multiple addreses, we simply call .Add(...) multple times
        'addresses = "spowers@aai.textron.com"
        addresses &= grabEmailAddresses() ' addresses is dimensioned before the if statement The grabEmailAddressed is a function to get the email addresses
        Dim SendBcc As String = (addresses)
        mail.Bcc.Add(SendBcc)

        'Response.Write("<script>alert('" & addresses & "')</script>")
        'Response.Write("<script>alert('" & SendBcc & "')</script>")

        'set the content
        mail.Subject = "Broadcast Alert"

        'set the body 
        mail.Body = message

        'Send the email 
        'mClient.Send(mail) 'mClient is dimensioned before the if statement
        Response.Write("<script>alert('Email Messages Sent')</script>")

        System.Threading.Thread.Sleep(4000) ' This is used to have a pause to send out the first message if you send email and text

        '*****************************************************************************************************************************
        'If you want to see all of the sender do this instead uncomment this section and commnet out the above

        ''Response.Write("<script>alert('" & addresses & "')</script>")
        'Dim m = New MailMessage("flims@aai.textron.com", addresses, subject, message)
        'mClient.Send(m)
        'System.Threading.Thread.Sleep(4000) ' This is used to have a pause to send out the first message if you send email and text
    Else
        addresses1 &= grabTextAddresses() ' addresses is dimensioned before the if statement The grabTextAddressed is a function to get the text phone numbers
        'Response.Write("<script>alert('" & addresses1 & "')</script>")
        'Response.Write("<script>alert('" & message & "')</script>")
        Dim m = New MailMessage("flims@aai.textron.com", addresses1, subject, message)
        'mClient.Send(m) ' mClient is dimensioned befor the if statement and "m" is dimension above
        Response.Write("<script>alert('Text Messages Sent')</script>")
    End If

End Sub

Protected Function grabEmailAddresses() As String

    "code for function"
End Function

Protected Function grabTextAddresses() As String
    "code for function"
End Function 
```

我把所有相关的代码都放在这里以防你想看，我知道它很多。按钮点击是第一个，所有后续功能都运行。现在电子邮件/文本发送 (mClient.Send()) 已被注释掉以进行测试。欢迎对我的问题提出任何意见，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:18:50.663

我仍然不知道为什么这会将表单向左推，但是我将位置更改为绝对位置`position:absolute;`并做到了`left:25%;`，并且将其居中。所以这是一个修复，只是不是我要找的那个。

# f# - 从文件/数据库创建可区分的联合数据

> ID：14569582
> 
> 赞同：2
> 
> 时间：2013-01-28T19:24:33.953
> 
> 标签：f#, discriminated-union

对于像这样的表达式，我有一个有区别的联合（EQ =; GT >; 等）

```
 (AND (OR (EQ X 0)
           (GT X 10))
       (OR (EQ Y 0)
           (GT Y 10))) 
```

我想从保存在文件/数据库中的此类表达式创建 DU 的实例。我该怎么做？如果不可行，在 F# 中处理它的最佳方法是什么？

Daniel：这些表达式以前缀格式（如上）保存为文本，将在 F# 中解析。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:35:35.917

If you just want to know how to model these expressions using DUs, here's one way:

```
type BinaryOp =
  | EQ
  | GT

type Expr =
  | And of Expr * Expr
  | Or of Expr * Expr
  | Binary of BinaryOp * Expr * Expr
  | Var of string
  | Value of obj

let expr = 
  And(
    Or(
      Binary(EQ, Var("X"), Value(0)),
      Binary(GT, Var("X"), Value(10))),
    Or(
      Binary(EQ, Var("Y"), Value(0)),
      Binary(GT, Var("Y"), Value(10)))) 
```

Now, this may be too "loose," i.e., it permits expressions like `And(Value(1), Value(2))`, which may not be valid according to your grammar. But this should give you an idea of how to approach it.

There are also some [good examples](http://en.wikibooks.org/wiki/F_Sharp_Programming/Lexing_and_Parsing#Step_1%3a_Define_the_Abstract_Syntax_Tree) in the F# Programming wikibook.

If you need to parse these expressions, I highly recommend [FParsec](http://www.quanttec.com/fparsec/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:34:51.617

丹尼尔的回答很好。这是一个类似的方法，以及一个使用活动模式构建的简单自上而下的解析器：

```
type BinOp = | And | Or
type Comparison = | Gt | Eq

type Expr =
| BinOp of BinOp * Expr * Expr
| Comp of Comparison * string * int

module private Parsing = 
    // recognize and strip a leading literal 
    let (|Lit|_|) lit (s:string) =
        if s.StartsWith(lit) then Some(s.Substring lit.Length)
        else None

    // strip leading whitespace
    let (|NoWs|) (s:string) =
        s.TrimStart(' ', '\t', '\r', '\n')

    // parse a binary operator
    let (|BinOp|_|) = function
    | Lit "AND" r -> Some(And, r)
    | Lit "OR" r -> Some(Or, r)
    | _ -> None

    // parse a comparison operator
    let (|Comparison|_|) = function
    | Lit "GT" r -> Some(Gt, r)
    | Lit "EQ" r -> Some(Eq, r)
    | _ -> None

    // parse a variable (alphabetical characters only)
    let (|Var|_|) s =
        let m = System.Text.RegularExpressions.Regex.Match(s, "^[a-zA-Z]+")
        if m.Success then
            Some(m.Value, s.Substring m.Value.Length)
        else
            None

    // parse an integer
    let (|Int|_|) s =
        let m = System.Text.RegularExpressions.Regex.Match(s, @"^-?\d+")
        if m.Success then
            Some(int m.Value, s.Substring m.Value.Length)
        else
            None

    // parse an expression
    let rec (|Expr|_|) = function
    | NoWs (Lit "(" (BinOp (b, Expr(e1, Expr(e2, Lit ")" rest))))) -> 
        Some(BinOp(b, e1, e2), rest)
    | NoWs (Lit "(" (Comparison (c, NoWs (Var (v, NoWs (Int (i, Lit ")" rest))))))) ->
        Some(Comp(c, v, i), rest)
    | _ -> None

let parse = function
| Parsing.Expr(e, "") -> e
| s -> failwith (sprintf "Not a valid expression: %s" s)

let e = parse @"
    (AND (OR (EQ X 0)
             (GT X 10))
         (OR (EQ Y 0)
             (GT Y 10)))" 
```

# jquery - 如何使用 jquery 将光标突出显示的文本粘贴到文本输入字段中

> ID：14569584
> 
> 赞同：1
> 
> 时间：2013-01-28T19:24:50.720
> 
> 标签：jquery

我的页面有一个`<div>`与从数据库馈送的书籍脚本相呼应的内容。

用户应该找到一些文本，用光标突出显示它，然后右键单击以显示我从 Andrew Whitaker，Stack/4495626 获得的自定义上下文菜单。

然后，用户应单击上下文菜单中的选项之一 `<Idiom>Idiom</Idiom>`，`<Proverb>Proverb</Proverb>`等，将光标突出显示的文本插入文本字段`id="element"`。

User704808：我尝试了 jsfiddle，但它不会让上下文菜单在该窗格中工作，所以我用下面的一整页代码进行了更新。前三个测试正确，因为它们是静态的；这是我无法工作的动态 getSelected() 。再次感谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
<script type="text/javascript">
$(document).bind("contextmenu", function(event) {
event.preventDefault();
$("div.custom-menu").show();
$(".custom-menu").appendTo("body").css({
top: event.pageY + "px",
left: event.pageX + "px",
visibility: "visible"
});
}).bind("click", function(event) {
if (!$(event.target).is(".custom-menu")) {
    $("div.custom-menu").hide();
}
});
</script>
<script type="text/javascript">
var getSelected = function(){
var t = '';
if(window.getSelection) {
  t = window.getSelection();
} else if(document.getSelection) {
t = document.getSelection();
} else if(document.selection) {
t = document.selection.createRange().text;
}
return t;
}   </script>
<style>
body {font-family:Verdana, Arial, Helvetica, sans-serif; margin-top:14%;}
.custom-menu { z-index:1000; height:85px; position: absolute; background-color:#F0F0F0;       border-right: 1px solid black;border-bottom: 1px solid black;border-top: 1px solid     white;border-top: 1px solid white; padding: 2px; left: 1103px; top: 12px;visibility:hidden;     }
</style>
</head>
<body>
<div class='custom-menu'>
<table width="426" cellpadding="6">
<tr>
<td nowrap="nowrap"><Idioms>Idioms</Idioms></td>
<td nowrap="nowrap"><IdiomsSentence>Idioms Sentence</IdiomsSentence></td>
</tr>
<tr>
<td nowrap="nowrap"><Proverb>Proverbs</Proverb></td>
<td nowrap="nowrap"><ProverbSentence>Proverbs Sentence</ProverbSentence></td>
</tr>
</table></div>
<form name="form13" method="post">
<input type="text" class="cleanup" name="element" id="element" value="" size="70" />
element:<br />
<input class="cleanup" name="elementSentence" type="text" id="elementSentence" value=""      size="70" /></td></tr>
elementSentence :</form>
<script type="text/javascript">
$(document).ready(function() {
$("Idioms").click(function(){
$("#element").val("Idioms Test");});

$("IdiomsSentence").click(function(){
$("#elementSentence").val("IdiomsSentence Test");});

$("Proverb").click(function(){
$("#element").val("Proverb Test");});

$("ProverbSentence").click(function(){
$("#elementSentence").val(getSelected());});}); </script>
<div id="dialogue">
<ul>
  <li>I have left in place three 'static' test examples that work. Please right-click,   select either 'Idioms', 'Proverbs', or 'IdiomsSentence', and you'll see they insert,   singly, into the form correctly.<br />
<br />
</li>
<li>The one that isn't working is the one that has the getSelected() wherein someone   should drag their cursor over some text like 'There is more than one way to skin a   politician.', then right click, select 'Proverbs Sentence', and it should auto-enter the  second field.</li>
</ul>
<p>Proverb: There is more than one way to skin a politician.</p>
<p>Idiom: Actions speak louder than words, but I'm pretty loud anyway.</p>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:34:31.357

**编辑：**为了简洁明了，替换了整个答案。

对问题中的 HTML 文档进行以下更改：

将 中的两个`script`块替换为`head`包含以下内容的块：

```
dialogApp = {};

dialogApp.getSelectedHtml = function () {
    var html = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                container.appendChild(sel.getRangeAt(i).cloneContents());
            }
            html = container.innerHTML;
        }
    } else if (typeof document.selection != "undefined") {
        if (document.selection.type == "Text") {
            html = document.selection.createRange().htmlText;
        }
    }
    return html;
}

$(document).bind("contextmenu", function (event) {
    dialogApp.selection = dialogApp.getSelectedHtml();
    event.preventDefault();
    $("div.custom-menu").show();
    $(".custom-menu").appendTo("body").css({
        top: event.pageY + "px",
        left: event.pageX + "px",
        visibility: "visible"
    });
}).bind("click", function (event) {
    if (!$(event.target).is(".custom-menu")) {
        $("div.custom-menu").hide();
    }
}); 
```

在您的其他脚本块中更改此行：

```
$("#elementSentence").val(getSelected());});}); </script> 
```

到

```
$("#elementSentence").val(dialogApp.selection); 
```

在 Chrome 和 IE9 中测试成功。我应用的修复是：

[我用这个答案](https://stackoverflow.com/a/6668159/704808)中更有效的函数替换了我最初建议的 getSelected 函数。

我使用命名空间技术来减轻在此页面上使用的全局变量。

我在显示上下文菜单之前立即缓存了所选文本，以防显示菜单会更改浏览器对当前所选内容的评估。

# javascript - jquery ui选项卡在asp.net中的页面加载上选择

> ID：14569586
> 
> 赞同：2
> 
> 时间：2013-01-28T19:25:03.553
> 
> 标签：javascript, jquery, asp.net, jquery-ui, webforms

我在 asp.net 中有 jqueryUI 选项卡。一切正常，但默认情况下第一个选项卡正在打开。我正在模式弹出窗口中执行一些代码，我希望当用户单击操作按钮时，回发位于触发弹出窗口的选项卡中。这是 jquery ui 选项卡代码：

```
<ul>
    <li><a href="#tabs-1">Tab1</a></li>
    <li><a href="#tabs-2">Tab2</a></li>
    <li><a href="#tabs-3">Tab3</a></li>
  </ul>
  <div id="tabs-1">   
  </div>
  <div id="tabs-2">           
  </div>
  <div id="tabs-3">  
  </div> 
```

我想知道如何选择加载页面时默认打开哪个选项卡，例如，如果我在查询字符串中有： mypage.aspx?tab=1 或 mypage.aspx?tab=2 其他一些示例可能有效更好的。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:44:08.213

使用[此问题](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)`getParameterByName`中的函数获取值：

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

然后做这样的事情：

```
$("#tabs").tabs({
    create: function(event, ui){
       var index = parseInt(getParameterByName("tab"));
       $(this).tabs("option", "active", index);
    }
}); 
```

希望这会有所帮助，如果您有任何问题，请告诉我！

链接：

*   [http://api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T18:34:04.167

听起来你想要我昨天解决这个问题时想要的两件事：（1）指定起始选项卡的能力，以及（2）控制从页面回发后打开哪个选项卡。一种方法：在 .aspx 中包含一个隐藏字段：

```
<asp:HiddenField runat="server" ID="hfLastTab" Value="0" /> 
```

（假设第一个/第 0 个选项卡是您的默认选项，如果没有指定）。在 Page_Load() 中，提供一个 !Page.IsPostBack 分支来解析查询字符串参数，并设置隐藏字段的值：

```
 if (!Page.IsPostBack) {
        string pat = @"t=(\d)";
        Regex r = new Regex(pat, RegexOptions.IgnoreCase);
        Match m = r.Match(Request.Url.Query);
        if (m.Success) hfLastTab.Value = m.Groups[0].ToString();
    } 
```

最后，jQuery 就绪函数根据隐藏字段的值告诉要显示哪个选项卡：

```
 $(function () {
        $("#tabs").tabs({ active: <%= hfLastTab.Value %> });
    }); 
```

服务器端回发处理代码同样可以将 hfLastTab.Value 设置为适当的索引。如果您的模态弹出窗口可以由多个选项卡引发，并且您不知道控件要打开哪个选项卡，则您必须做更多的工作。从一个类似问题的答案中，当用户选择一个选项卡时，在 jQuery 中指定一个“激活”函数将设置 hiddenField 值，您可以从回发中读取该值：

```
$("#tabs").tabs({
    activate: function() {
        var selectedTab = $('#tabs').tabs('option', 'active');
        $("#<%= hfLastTab.ClientID %>").val(selectedTab);
    },
    active: <%= hfLastTab.Value %>
}); 
```

# php - CURL POST 后重定向不会更改 URL

> ID：14569587
> 
> 赞同：2
> 
> 时间：2013-01-28T19:25:03.497
> 
> 标签：php, curl

我的网站上有一个表格。提交表单后，它需要将该信息发布到内部（或外部）网站，然后将浏览器重定向到该内部（或外部）网站。

表格位于`https://www.mysite.com/form.php`

```
<?php
$urlToPostTo = 'https://www.mysite.com/postPage.php';
$urlToRedirectTo = 'https://www.mysite.com/redirectPage.php';

$curlConnection = curl_init($urlToPostTo);
curl_setopt($curlConnection, CURLOPT_POST, true);
curl_setopt($curlConnection, CURLOPT_POSTFIELDS, $valuesToPost);

curl_exec($curlConnection);
curl_close($curlConnection);

header("Location: $urlToRedirectTo");
exit;

?> 
```

表单使用 CURL 正确发布，我看到的最后一页是`$urlToRedirectTo`，但浏览器中列出的 URL 仍然是`mysite.com`URL。

如果 POST 和 Redirect 页面位于外部域中，则一切正常。浏览器中的 URL 会发生变化。只有当它是同域 URL 时才会出现这种奇怪的行为。通常，它将发布到外部 URL，但是当它是内部 URL 时，我需要它正常工作，而无需编写单独的代码。

注意：要发布/重定向到的 URL 作为变量出现在我这里 - 我不知道它是指向内部域还是外部域。

关于如何使其正确处理内部重定向（更新浏览器 URL）的任何想法？

# ruby-on-rails-3 - Ruby on Rails 将 id 传递给新的创建表单

> ID：14569590
> 
> 赞同：4
> 
> 时间：2013-01-28T19:25:16.030
> 
> 标签：ruby-on-rails-3, rails-models

好的，我搜索了高低，阅读教程，观看了视频，但我仍然没有得到任何结果。我在这里读过类似的问题，但问题更复杂或缺乏答案 - 所以这里......

我有模型帐户和发票。显示帐户时，我想要与该帐户相关的“创建新发票”链接。（稍后我实际上希望在创建发票时选择一个选择字段来选择一个帐户，但我将把它留给另一个痛苦）。

这是我的模型... 帐户：

```
class Account < ActiveRecord::Base
  attr_accessible :name, :invoice 
  attr_accessible :name, :invoice
  has_many :invoices
end 
```

和发票：

```
class Invoice < ActiveRecord::Base
  belongs_to :account
  attr_accessible :amount_pretax, :amount_total, :date_sent, :project, :status, :tax, :account, :account_id
end 
```

现在，在我的 /views/accounts/show.html.erb

```
<p id="notice"><%= notice %></p>
<p>
  <b>Name:</b>
  <%= @account.name %>
</p>
<%= link_to 'New Invoice', new_invoice_path(:account_id=>@account.id) %>
<%= link_to 'Edit', edit_account_path(@account) %> |
<%= link_to 'Back', accounts_path %> 
```

所以，发生的事情是，当我单击 New Invoice 链接时，它会显示新表单，其中填充了这个奇怪的文本的帐户字段：`#<Account:0x10fe16bc0>`然后当我提交表单时，我收到此错误： **ActiveRecord::AssociationTypeMismatch in InvoicesController#create** 连同这个声明：`Account(#2281084000) expected, got String(#2267210740)` 连同这个：

```
app/controllers/invoices_controller.rb:45:in `new'
app/controllers/invoices_controller.rb:45:in `create' 
```

这是发票控制器中的内容：

```
def new
  @invoice = Invoice.new(:account_id => params[:account_id])
  respond_to do |format|
  format.html # new.html.erb
  format.json { render :json => @invoice }
  end
end

def create
  @invoice = Invoice.new(params[:invoice])
   ....
end 
```

以上是我认为我出错的地方，但目前这些行的内容是我无法理解的。我完全是一个初学者，任何解决这个功能的帮助肯定会教我​​很多东西。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:38:11.400

当您单击页面`New invoice`上的链接时`/views/accounts/show`，我想您希望您的新发票属于此帐户。

因此，在您的表单中，您不必让用户选择帐户。例如，您可以将相应的字段替换为`hidden_field`：

```
<%= f.hidden_field :account_id, :value => params[:account_id] %> 
```

同样在`new`控制器的操作中，替换`@invoice = Invoice.new(:account_id => params[:account_id])`为`@invoice = Invoice.new`

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:05:58.457

您没有发布表单的代码，但我猜您正在使用文本字段来处理`account`关联。这是错误的！

如果您使用文本字段，则 rails 将尝试将其存储为字符串 =>`Account(#2281084000) expected, got String(#2267210740)`

您需要使用某种关系字段（例如下拉菜单或其他任何内容）来选择已经存在的帐户之一。

那里有很多很好的例子，这可能会对你有所帮助：[http ://railscasts.com/episodes/102-auto-complete-association-revised](http://railscasts.com/episodes/102-auto-complete-association-revised)

# ghostscript - 使用 ghostscript 将 .ps 转换为 .pcx

> ID：14569591
> 
> 赞同：1
> 
> 时间：2013-01-28T19:25:20.350
> 
> 标签：ghostscript

在 Windows 7 上使用 ghostscript 将具有多个页面的 Simulation.ps 文件转换为单独的 .pcx 文件的命令是什么。我尝试了以下命令：

cd c:\Program Files\gs\gs\9.06\bin

gswin32c -dNOPAUSE -sDEVICE=pcx24b –g1024x768 -sOutputFile=simulation%%04d.pcx simulation.ps

我得到以下输出：

GPL Ghostscript 9.06 (2012-08-08) 版权所有 (c) 2012 Artifex Software, Inc. 保留所有权利。此软件不提供任何担保：有关详细信息，请参阅文件 PUBLIC。从 %rom%Resoruce/Font/NimbusSanL-Regu 加载 NimusSanL-Regu 字体... 2637176 1249969 2756072 1473902 1 完成。

c:\Program Files\gs\gs\9.06\bin\ 目录中没有创建文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:42:57.510

尝试只使用一个“%”符号而不是 2。除此之外，您的命令行对我有用（我用高尔夫球手 EPS 文件替换了您的“simlation.ps”）

# ios - 第二个 ScrollView 不缩放或滚动

> ID：14569592
> 
> 赞同：0
> 
> 时间：2013-01-28T19:25:22.217
> 
> 标签：ios, objective-c

我在 xib 中有两个滚动视图，它们都包含一个非常大的图像，应该从完全按比例缩小以适合。第一个 ScrollView 完美运行，当您缩放或滚动时，对象都在正确移动，但第二个 ScrollView 开始完全放大，无法缩小。

ScrollView 现在显示 25% 的图像（在 0,0 处完全放大），也无法拖动以查看其余部分。如果我捏缩放，图像沿对角线向上和向左移动而根本不缩放，我现在可以将图像拖回 0,0 并返回到它对角滚动的最大点。

.h 文件

```
UIScrollView *_scrollView;
UIScrollView *_miamiScrollView;
UIView *_mapImageView;
UIView *_mapMiamiView;
UIView *_mapContentView;
NSArray *_autoLayoutViews;
NSArray *_staticViews;

@property (strong, nonatomic) IBOutlet UIScrollView *scrollView;//(linked to working scrollview)
@property (strong, nonatomic) IBOutlet UIScrollView *miamiScrollView;//(Linked to 'broken' scrollview) 
```

.m 文件

```
- (void)viewDidLoad
{
    [self _customizeViews];
}

- (void) _customizeViews
{

    UIImageView *mapImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"MainGameDisplay.jpg"]];
    mapImageView.userInteractionEnabled = YES;
    UIImageView *mapMiamiView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"miami.jpg"]];
    mapMiamiView.userInteractionEnabled = YES;

    _mapContentView = [[UIView alloc] initWithFrame:CGRectMake(0, 50, 568, 270)];
    _mapContentView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    _mapContentView.clipsToBounds = YES;
    _mapContentView.userInteractionEnabled = YES;
    [_mapContentView addSubview:_scrollView];
    [_mapContentView addSubview:_miamiScrollView];
    [self.view addSubview:_mapContentView];
    [self.view sendSubviewToBack:_mapContentView];

    UIScrollView *scrollView = _scrollView;
    CGRect scrollFrame = scrollView.frame;
    scrollFrame.origin = CGPointZero;
    scrollView.frame = scrollFrame;
    scrollView.delegate = self;
    scrollView.minimumZoomScale = 1;
    scrollView.maximumZoomScale = 1.0;
    [scrollView addSubview:mapImageView];
    scrollView.contentSize = mapImageView.frame.size;
    _scrollView = scrollView;
    _mapImageView = mapImageView;

    UIScrollView *miamiScrollView = _miamiScrollView;
    CGRect miamiScrollFrame = CGRectMake(0 , 270, 568, 270);
    scrollFrame.origin = CGPointZero;
    miamiScrollView.frame = miamiScrollFrame;
    miamiScrollView.delegate = self;
    miamiScrollView.minimumZoomScale = 0.125;
    miamiScrollView.maximumZoomScale = 1;
    [miamiScrollView addSubview:mapMiamiView];
    miamiScrollView.contentSize = mapMiamiView.frame.size;
    _miamiScrollView = miamiScrollView;
    _mapMiamiView = mapMiamiView;

    [self _setupAutolayoutViews];
    [self _setupStaticViews];

    [self _zoomToFit: _scrollView];
    [self _zoomToFit: _miamiScrollView];
   [self _updatePositionForViews:_autoLayoutViews];
}

- (void) _zoomToFit: (UIScrollView*)view
{
    CGFloat contentWidth = view.contentSize.width;
    CGFloat contentHeigth = view.contentSize.height;
    CGFloat viewWidth = view.frame.size.width;
    CGFloat viewHeight = view.frame.size.height;

    CGFloat width = viewWidth / contentWidth;
    CGFloat heigth = viewHeight / contentHeigth;

    CGFloat scale = MAX(width, heigth);

    if ( scale < view.minimumZoomScale ) {
        view.minimumZoomScale = scale;
    } else if ( scale > view.maximumZoomScale ) {
        view.maximumZoomScale = scale;
    }

    view.zoomScale = scale;
}

#pragma mark - Positions

- (void) _updatePositionForViews:(NSArray *)views
{
    CGFloat scale = _scrollView.zoomScale;
    CGPoint contentOffset = _scrollView.contentOffset;
    contentOffset.x -= _scrollView.frame.origin.x;
    contentOffset.y -= _scrollView.frame.origin.y;

    for ( UIView *view in views ) {
        CGPoint basePosition = [self _basePositionForView:view];
        [self _updatePositionForView:view scale:scale basePosition:basePosition offset:contentOffset];
    }
}

- (CGPoint) _basePositionForView:(UIView *)view
{
    NSString *key = [NSString stringWithFormat:@"%d", view.tag];
    NSString *stringValue = [_coordinates objectForKey:key];
    NSArray *values = [stringValue componentsSeparatedByString:@":"];

    if ( [values count] < 2 ) return CGPointZero;

    CGPoint result = CGPointMake([[values objectAtIndex:0] floatValue], [[values objectAtIndex:1] floatValue]);
    return result;
}

- (void) _updatePositionForView:(UIView *)view scale:(CGFloat)scale basePosition:(CGPoint)basePosition offset:(CGPoint)offset;
{
    CGPoint position;
    position.x = (basePosition.x * scale) - offset.x;
    position.y = (basePosition.y * scale) - offset.y;

    CGRect frame = view.frame;
    frame.origin = position;
    view.frame = frame;
}

////////////////////////////////////////////////////////////////////////////////////// 
#pragma mark - UIScrollViewDelegate

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView;
{
    [self _lockInteraction];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate;
{
    [self _unlockInteraction];
}
- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollView withView:(UIView *)view
{
    [self _lockInteraction];    
}
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale;
{
    [self _unlockInteraction];
}

- (void) _lockInteraction
{
    [self _setControls:_staticViews interacted:NO];
    [self _setControls:_autoLayoutViews interacted:NO];
}

- (void) _unlockInteraction
{
    [self _setControls:_staticViews interacted:YES];
    [self _setControls:_autoLayoutViews interacted:YES];
}

- (void) _setControls:(NSArray *)controls interacted:(BOOL)interacted
{
    for ( UIControl *control in controls ) {
        if ( [control isKindOfClass:[UIControl class]]) {
            control.userInteractionEnabled = interacted;
        }
    }
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_autoLayoutViews];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self _updatePositionForViews:_autoLayoutViews];
}

- (UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView;
{
    return _mapImageView;
}

//DEFAULT BUTTONS.
- (void) _setupAutolayoutViews
{
    UIButton *btn1 = [UIButton buttonWithType: UIButtonTypeDetailDisclosure];
    [btn1 addTarget:self action:@selector(quickTest:) forControlEvents:UIControlEventTouchUpInside];
    btn1.tag = kAddContactButton;
    btn1.center = CGPointZero;
    [_mapContentView addSubview:btn1];

    _autoLayoutViews = [[NSArray alloc] initWithObjects:btn1, nil];
}

//CUSTOM BUTTONS.
- (void) _setupStaticViews
{
    UIButton *openMiamiButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [openMiamiButton setBackgroundImage:[UIImage imageNamed:@"logo.png"] forState:UIControlStateNormal];
    [openMiamiButton addTarget:self action:@selector(quickTest:) forControlEvents:UIControlEventTouchUpInside];
    openMiamiButton.frame = CGRectMake(0.0 ,0.0, 50.0, 50.0);
    openMiamiButton.tag = OpenMiamiButton;
    openMiamiButton.enabled = YES;
    openMiamiButton.alpha = 0.5;
    [_mapImageView addSubview:openMiamiButton];

    _staticViews = @[openMiamiButton,];

    for ( UIView *view in _staticViews ) {
        CGPoint point = [self _basePositionForView:view];
        CGRect frame = view.frame;
        frame.origin = point;
        view.frame = frame;

    }
}

//And for the transition between views:
-(void) quickTest: (UIButton *)button
{
    /*
    if (!openMiami)
        openMiami = [[MiamiGameDisplay alloc] initWithNibName:nil bundle:nil];
    openMiami.mainPage = self;
    [self.navigationController pushViewController:openMiami animated:YES];
     */
    if (!testBool){
    [UIView animateWithDuration:0.5f
                     animations:^{
                         _scrollView.frame = CGRectMake(0 , -270, 568, 270);
                     }
                     completion:Nil];

        [UIView animateWithDuration:0.5f
                         animations:^{
                             _miamiScrollView.frame = CGRectMake(0 , 0, 568, 270);
                         }
                         completion:Nil];
        testBool=YES;
    }
    else {
        [UIView animateWithDuration:0.5f
                         animations:^{
                             _miamiScrollView.frame = CGRectMake(0 , 270, 568, 270);
                         }
                         completion:Nil];
        [UIView animateWithDuration:0.5f
                         animations:^{
                             _scrollView.frame = CGRectMake(0 , 0, 568, 270);
                         }
                         completion:Nil];
        testBool=NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:52.127

我遇到了类似的问题`scrollViews`。基本上，据我所知，只有最后`scrollView`添加到窗口的才会响应为`scrollView`.

您可以在`scrollView`.

例子 ：

```
[[self window] addSubview:logo];
[[self window] addSubview:scrollView]; 
```

会工作，但是：

```
[[self window] addSubview:scrollView];
[[self window] addSubview:logo]; 
```

将不会。（目前针对 iOS 6.1.2 和 xCode 4.6.1 运行）

# python - Python - 使用 Numpy 读取列

> ID：14569595
> 
> 赞同：0
> 
> 时间：2013-01-28T19:25:25.420
> 
> 标签：python

我有一个文件，其中包含以下 X、Y、Z 列

```
#file.csv
X,Y,Z
1,2,3
4,2,5
15,9,1
# 
```

我正在尝试使用 numpy 读取 X 列并给我平均值、标准差和其他统计数据。我无法让 numpy 像我想要的那样将它们读取为列。

```
import numpy as np
import math 
my_data = np.genfromtxt(filename, delimiter=',', dtype=float, names=[x,y,z]) 
```

如果我做的事情`np.average(my_data)`是平均每一行而不是每一列。如何使其平均 X、Y 和 Z，然后将它们打印到文件中？

X 有很长的数字，例如 2747477447437.959843848，我不想四舍五入。这些是 ID，根本不应该更改！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:40:22.633

选择`axis = 0`计算列的平均值（或其他值）。如果您真的不需要第一列，请`usecols`在使用时指定参数`genfromtxt`以选择要读取的列。

```
In [1]: import numpy as np

In [2]: from StringIO import StringIO

In [3]: f = StringIO("""X,Y,Z
   ...: 1,2,3
   ...: 4,2,5
   ...: 15,9,1""")

In [4]: arr = np.genfromtxt(f, delimiter=',', dtype=float, skip_header=1)

In [5]: arr
Out[5]: 
array([[  1.,   2.,   3.],
       [  4.,   2.,   5.],
       [ 15.,   9.,   1.]])

In [6]: np.average(arr, axis=0)
Out[6]: array([ 6.66666667,  4.33333333,  3\.        ]) 
```

# javascript - 选择触发功能的表单内的所有输入

> ID：14569604
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:25:46.387
> 
> 标签：javascript, jquery

我试图找到使用 jquery 选择表单中的所有输入，触发器是从那里启动的。例如，如果在表单 1 中单击按钮，则只会选择表单 1 中的输入，而不会选择表单 2 中的任何内容。

```
<form action="" method="POST">    <!--form 1-->

<input type="text" />
<input type="text" />
<input type="hidden" value="87678"  />

<input type="button" onclick="doit()" />

</form>

<form action="" method="POST">   <!--form 2-->

<input type="text" />
<input type="text" />
<input type="hidden" value="87678"  />

<input type="button" onclick="doit()" />

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:36:28.520

Try this...

```
$(':button').on('click', function(){
    var form = $(this).parents('form:first');
    $(form).children().each(function(evt){
        if($(this).attr('type') == 'text'){
            alert(this.value);
        }
    });
}); 
```

See this [Example jsFiddle](http://jsfiddle.net/DAnbq/2/)

Greetings.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:30:26.483

使用事件目标到达父表单并查找该表单中的所有输入

```
function doit(event){
    $(event.target).parent("form").find("input")
} 
```

为此，您需要将锚标记的 html 更改为

```
<input type="button" onclick="doit(event)" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:30:48.540

```
$('input[type=button]').click(function(){ 
    console.log( $('input',$(this).closest('form')) ) 
}); 
```

[http://jsfiddle.net/kR3ws/1/](http://jsfiddle.net/kR3ws/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:31:26.773

将`id`字段添加到您的按钮和表单。

```
<form id="form1" action="" method="POST">    <!--form 1-->
<input type="text" />
<input type="text" />
<input type="hidden" value="87678"  />
<input id="btn1" type="button" onclick="doit()" />
</form>

<form id="form2" action="" method="POST">   <!--form 2-->
<input type="text" />
<input type="text" />
<input type="hidden" value="87678"  />
<input id="btn2" type="button" onclick="doit()" />
</form> 
```

然后像这样声明事件：

```
$('#btn1').click(function(){
    var data = $('#form1').serialize();
    alert('form1 : '+data);
});

$('#btn2').click(function(){
    var data = $('#form2').serialize();
    alert('form2 : '+data);
}); 
```

# ruby-on-rails - 如何对数组中的项目进行排序以匹配它在另一个数组中出现的顺序

> ID：14569609
> 
> 赞同：0
> 
> 时间：2013-01-28T19:25:51.973
> 
> 标签：ruby-on-rails, ruby, arrays, refactoring

我想从数据库中的电影中获取评分并返回一组独特的评分，按以下顺序排序：

```
G PG PG-13 R NC-17 
```

一个平原`Array#sort`是不够的：

```
["PG-13", "PG", "NC-17", "G", "R"].sort
# => ["G", "NC-17", "PG", "PG-13", "R"] 
```

下面的代码给了我想要的东西，但似乎有更好的方法来编写它，而不必使用`delete`and `<<`。任何想法，将不胜感激。

```
class Movie < ActiveRecord::Base
  def self.all_ratings
    allRatings = []
    Movie.all.each do |movie|
      unless allRatings.include?(movie.rating)
        allRatings << movie.rating
      end
    end
    if allRatings.include?("NC-17")
      allRatings.sort!
      allRatings.delete("NC-17")
      allRatings << "NC-17"
      return allRatings
    else
      return allRatings.sort
    end
  end
end 
```

* * *

更新：使用 Sergio 的提示，我能够重构代码。如果有人有其他想法，我会很感激反馈。

```
class Movie < ActiveRecord::Base

  def self.all_ratings
    allRatings = []
    Movie.all.each do |movie|
      unless allRatings.include?(movie.rating)
        allRatings << movie.rating
      end
    end
    allRatings.sort_by! {|t| t == 'NC-17' ? 'ZZZ' : t}
  end
end 
```

* * *

更新：使用 ByScripts 提示，此代码运行良好且非常简洁。我必须从 Rails 3.1.0 升级到 Rails 3.2.8 才能获得该`pluck`方法。看起来它是在 3.2.1 中引入的。

我还必须添加`.sort`以获得所需的输出。

```
class Movie < ActiveRecord::Base

  def self.all_ratings
    all_ratings = Movie.pluck(:rating).uniq.sort# don't retrieve unnecessary datas
    all_ratings << all_ratings.delete('NC-17') # directly inject NC-17 at the end if exists
    all_ratings.compact # remove nil values
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:31:12.337

你可以使用这个小技巧

```
sorted = ["PG-13", "PG", "NC-17", "G", "R"].sort_by {|t| t == 'NC-17' ? 'ZZZ' : t }

sorted # => ["G", "PG", "PG-13", "R", "NC-17"] 
```

基本上，出于排序目的，您将“NC-17”替换为最后排序的“ZZZ”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:35:25.693

那应该有效：

```
def self.all_ratings
  all_ratings = Movies.order(:rating).pluck(:rating).uniq # don't retrieve unnecessary datas
  all_ratings << all_rating.delete('NC-17') # directly inject NC-17 at the end if exists
  all_ratings.compact # remove nil values
end 
```

你也可以做`Movies.uniq.pluck(:rating)`

那会做一个`SELECT DISTINCT`查询（`pluck.uniq`过滤数组的地方）。不知道是否会对性能产生影响（可能是内存占用较低？）。

无论如何，两者应该是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:35:32.397

我喜欢 Sergio 的把戏，但如果您正在寻找原始代码的更简单版本，但仍然有`delete`and `<<`，试试这个

```
def sort(ratings)
  ratings.sort!
  return ratings unless ratings.include?("NC-17")

  ratings.delete("NC-17")

  ratings << "NC-17"
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T09:12:14.497

```
class Movie < ActiveRecord::Base
  RatingOrder = %w[G PG PG-13 R NC-17]
  def self.all_ratings
    RatingOrder & Movie.all.map(&:rating)
  end
end 
```

# ruby - 在 ruby 中排序数组

> ID：14569613
> 
> 赞同：0
> 
> 时间：2013-01-28T19:26:06.967
> 
> 标签：ruby, arrays, sorting

我有这样的代码：

```
Manufacturer.all.collect {|p| [ p.MFA_BRAND, p.MFA_ID ] } 
```

我是新手，我只知道如何对 AR 对象进行排序，但在我的情况下该怎么做，因为我还需要收集……那么如何对我的数组进行排序并收集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:29:29.667

在 Enumerable 模块中查找 sort 和 sort_by 函数。数组是一个可枚举的。在网上搜索示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:29:38.597

您可以使用 对 AR 记录进行排序`order`，然后收集您想要的内容：

```
Manufacturer.order(:MFA_BRAND).all.collect{|p| [p.MFA_BRAND, p.MFA_ID]} 
```

或者，您可以在收集之前或之后排序为 ruby​​ Enumerable：

```
Manufacturer.all.sort_by(&:MFA_BRAND).collect{|p| [p.MFA_BRAND, p.MFA_ID] }
Manufacturer.all.collect{|p| [p.MFA_BRAND, p.MFA_ID] }.sort_by{|r| r[0]} 
```

# php - MongoDB 在 PHP 中聚合，将秒数添加到日期/时间

> ID：14569614
> 
> 赞同：1
> 
> 时间：2013-01-28T19:26:09.987
> 
> 标签：php, mongodb, aggregation-framework

我有一个`MongoDB`聚合`PHP`定义为：

```
$results = $c->aggregate(array(
    array(
      '$project' => array(
          'year' => array('$year' => array('$add' => array('$executed.getTime()', 3600))),
          'month' => array('$month' => array('$add' => array('$executed.getTime()', 3600))),
          'day' => array('$dayOfMonth' => array('$add' => array('$executed.getTime()', 3600)))
      ),
    ),
    array(
      '$group' => array(
          '_id' => array('year' => '$year', 'month' => '$month', 'day' => '$day'),
          'count' => array('$sum' => 1)
      ),
    ),
    array(
      '$sort' => array(
          '_id' => 1
      ),
    ),
    array(
      '$limit' => 30
    )
)); 
```

问题是`$add`聚合函数`$project`不起作用。

```
 exception: the $year operator does not accept an object as an operand 
```

在日期/时间字段中添加任意秒数的正确方法是什么`$executed`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:31:44.330

您看到的问题是 MongoDB 中的一个错误，我在[SERVER-9289](https://jira.mongodb.org/browse/SERVER-9289)中报告了该错误。解决此问题的方法是将日期运算符的参数包装在一个数组中，如以下 shell 示例所示：

```
> db.foo.drop()

> db.foo.insert({x:ISODate()})

> db.foo.aggregate({$project: {x:1, y: {$year: {$add:['$x',1000]}}}})
Error: Printing Stack Trace
    at printStackTrace (src/mongo/shell/utils.js:37:7)
    at DBCollection.aggregate (src/mongo/shell/collection.js:897:1)
    at (shell):1:8
Mon Apr  8 18:15:15.198 JavaScript execution failed: aggregate failed: {
    "errmsg" : "exception: the $year operator does not accept an object as an operand",
    "code" : 16021,
    "ok" : 0
} at src/mongo/shell/collection.js:L898

> db.foo.aggregate({$project: {x:1, y: {$year: [{$add:['$x',1000]}]}}})
{
    "result" : [
        {
            "_id" : ObjectId("516341333512acfb2d33f156"),
            "x" : ISODate("2013-04-08T22:14:11.665Z"),
            "y" : 2013
        }
    ],
    "ok" : 1
} 
```

将它移植到 PHP 应该是微不足道的。

话虽如此，您的原始代码确实在对`$executed`. 根据[$project](http://docs.mongodb.org/manual/reference/aggregation/project/#project-aggregation)文档，您可以按名称（或指向对象/数组中的字段的虚线路径）引用 BSON 文档中的字段，但不支持在这些字段上调用 ​​JavaScript 方法。沿着这些思路，聚合管道在原始 BSON 文档上运行，因此这些类型在管道过程中永远不会转换为它们的 JavaScript 表示形式（例如，BSON 日期永远不会成为 ISODate）。

值得庆幸的是，`$executed.getTime()`MongoDB 2.4 甚至不需要调用。[SERVER-6239](https://jira.mongodb.org/browse/SERVER-6239)改进了对 BSON 日期处理`$add`和`$subtract`. 您可以查看该票证以了解更多详细信息，例如减去两个日期或添加日期和数字的预期结果。

# entity-framework - EF 5.x DbContext Fluent 生成器

> ID：14569621
> 
> 赞同：0
> 
> 时间：2013-01-28T19:26:37.727
> 
> 标签：entity-framework, ef-code-first

我运行了 EF 5.x DbContext Fluent Generator 来生成我的代码优先文件和映射。我想要的是让所有生成的类都包含一个基本接口 IEntity。我还在考虑一个抽象基类 EntityBase，它具有 Id 和 rowVersion 的属性。我相信很多人都这样做了，但我似乎无法在搜索中找到它

所以例如我所有的实体看起来像这样

部分类人：EntityBase，IEntity

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T23:00:50.977

我远非专家，因此请谨慎对待。

你有正确的想法，只需创建一个部分类并将继承/接口引用放在那个类中。

您根本不需要修改生成的类，这就是部分类的美妙之处。

# c# - Html.TextBoxFor 显示空值但模型不为空

> ID：14569625
> 
> 赞同：0
> 
> 时间：2013-01-28T19:26:51.300
> 
> 标签：c#, asp.net-mvc-3

大家好，我在文本框中正确显示数据时遇到问题这是我的 Print partialView

```
@{ Layout = null; }
@model Estudio.WebUI.Models.PrintViewModel
@using (Ajax.BeginForm("Print", new { @class = "openDialog data-dialog-id='PrintDialog' data-dialog-Title='Print'" }, new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "PrintDialog" }))
{
@Html.HiddenFor(m => m.FacturaId)
<div class="editor-label">
    @Html.LabelFor(m => m.NComprobante)
    <div class="editor-field">
        @Html.TextBoxFor(m => m.NComprobante)
    </div>
</div>
<br/>
<div class="editor-label">
    @Html.LabelFor(m => m.SendMail)
    <div class="editor-field">
        @Html.CheckBoxFor(m => m.SendMail)
    </div>
</div>
<input type="submit" name="Imprimir" value="Imprimir" id="Imprimir"/>

<script type="text/javascript">
    $(document).ready(function () {
        $("#NComprobante").mask("99999-999999999999");
    });
</script>    
} 
```

这是 ActionResult 打印

```
 public ActionResult Print(string id)
    {
        ...
        var model = new PrintViewModel
                        {
                            FacturaId = factura.FacturaId,
                            NComprobante = numero[0] + "-" + comprabante.ToString("000000000000")
                        };
        return PartialView("Print", model);
    } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:17:55.303

错误的代码

```
NComprobante = numero[0] + "-" + comprabante.ToString("000000000000") 
```

正确的是：

```
var comprabante = numero[0] + "-" + (Convert.ToDouble(numero[1]) + 1).ToString("0000000000000"); 
```

# tree - 递归查找树中的所有孩子

> ID：14569626
> 
> 赞同：0
> 
> 时间：2013-01-28T19:26:51.477
> 
> 标签：tree, d3.js

我在 D3 中处理树木，到目前为止，这很有趣。给定用户点击内部节点（圆圈），我想

*   提供所有叶子名称的列表
*   为从该节点到叶子的所有路径着色。

这是我为此目的编写的一些代码

```
 var circles = nodeEnter.append("svg:circle")
      .attr("r", function(d){ return d.children ? 5 : 0; })
      .on("click", get_all_children);

    function get_all_children(d){
         var all_children = get_all_childs(d);
             console.log("end, our array has: "+all_children.length+" elements");
            all_children.forEach(function(elem){
                console.log(elem.name);
        });
}

function get_all_childs(d, all_childs){
    var all_children = new Array;
    all_children.push(all_childs);

    if(d.children){
            var children = d.children;
            for (var i = 0; i < children.length; i++) {
                var temp_array = get_all_childs(children[i], all_children);
                console.log("got from recursion: : "+temp_array.length+" children");
                all_children.push(temp_array);
            }
    }
    else{
        //return all_children;
        //console.log("end, our array has: "+all_children.length+" elements");
    }
    return all_children;
} 
```

看起来我的递归工作不正常。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:31:13.337

尝试移动 var all_children = new Array; 在 get_all_childs() 函数的范围之外。在每次调用该函数时将该变量重新声明为新数组，您最终只会得到该函数最终调用的结果。

然而，如果该变量存在于该函数的范围之外，则随着代码的递归，推送到该数组上的值将通过多次调用该函数而保持不变。

# validation - 以编程方式控制验证组并且仅针对当前事务

> ID：14569627
> 
> 赞同：0
> 
> 时间：2013-01-28T19:26:56.340
> 
> 标签：validation, jpa, bean-validation

是否可以更改哪些验证组适用于短期交易的更新前事件？

即告诉jPA，当它提交事务时，它必须将特定的验证组应用于更新前事件......

我知道我可能可以手动进行这种验证 - 事情是我有约束设置并且我有基础设施来呈现约束违规异常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:07:11.657

使用以下属性：

*   javax.persistence.validation.group.pre-persist
*   javax.persistence.validation.group.pre-update
*   javax.persistence.validation.group.pre-remove

您可以指定哪些组应针对相关事件的验证。但是，这些属性通常在*persistence.xml*中定义或在实体管理器工厂创建时作为属性传递。这些不是您可以在每个事务中动态更改的属性。AFAIK 除非您自己触发验证，否则无法以编程方式执行此操作。

# ssl - Azure 网站自定义 SSL ASP.Net MVC 解决方法

> ID：14569630
> 
> 赞同：2
> 
> 时间：2013-01-28T19:27:06.963
> 
> 标签：ssl, azure, asp.net-mvc-4, azure-web-app-service

当前 Azure 网站不允许自定义 SSL 证书，但它们为 *.azurewebsites.net 域启用了通配符 SSL。我的 Web 应用程序需要一个安全的登录表单，但没有自定义 SSL，看来我是 SOL。

有什么解决方法吗？是否有可能以某种方式在[https://mydomain.azurewebsites.net](https://mydomain.azurewebsites.net)上创建一个表单身份验证票证，然后该票证将在[http://mydomain.com](http://mydomain.com)上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:12:13.613

我现在正与 WAWS 团队直接合作，为此提供一些公共指导。团队目前正在评估一个包含需求的 GitHub 存储库（我在 1 小时前将其发送给他们）。希望该解决方案将在几周内获得批准并公开。

我可以这样说 - 除了存储库和随附的文档之外，不会完全支持解决方法或给出关于其使用的太多自定义指导。从字面上看，SSL 是该产品的第一要务，数百人正在疯狂地工作以使每个人都能实现它。这种解决方法也应该被视为临时的，因为一旦启动了完整的 SSL 功能，您将不再需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:45:33.030

几个月前，我遇到了完全相同的问题，即应用程序是在 Azure 网站上构建的，必须在自定义域上运行，而不是`*.azurewebsites.net`必须允许安全登录过程。

我们使用的解决方法是将*iframe*（使用安全协议和`.azurewebsites.net`域名，例如`https://oursite.azurewebsites.net/login`）嵌入到自定义域（例如 ）上的非安全页面中`http://mysite.com/login`。整个登录过程都是在*iframe*中执行的。

您应该注意一件事，即许多客户检查他们提供凭据的页面是否使用安全连接。在我们的案例中，非安全页面中的*安全 iframe引起了很多客户投诉。*该问题的解决方法是添加一条消息，确认登录过程使用安全连接。该消息进行了一些改进，但是仍然有一定数量的客户抱怨。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T19:20:46.103

这并不是您问题的真正答案，但 Microsoft 非常清楚将自定义映射的 SSL 映射到网站是 Azure 网站最需要的功能之一，并且他们已经表示他们正在努力。 [Scott Hanselman 本人在这里证实了这一点](http://www.mygreatwindowsazureidea.com/forums/34192-windows-azure-feature-voting/suggestions/3138164-enable-https-ssl-for-web-sites)

与此同时，汤姆的回答是一个完全有效的解决方法。

我会非常警惕的一件事是汤姆提出的一些问题：浏览器将出现的安全警告。您会惊讶于有多少人在看到该消息时吓坏了并且不再继续！我们有一个相当活跃的电子商务网站，有时我们不小心在 SSL 页面上使用了不安全的图像路径，并且我们总是收到客户的电子邮件，询问我们的网站是否被黑客入侵或类似情况！汤姆提到的免责声明是个好主意，但我认为它仍然会让一些人望而却步。

# css - CSS负右背景位置

> ID：14569633
> 
> 赞同：5
> 
> 时间：2013-01-28T19:27:26.653
> 
> 标签：css, background-image, background-position

我知道我可以像这样在背景图像上设置负左位置：

```
#element {
    background: url(image.png) -20px 0 no-repeat;
} 
```

这会将背景图像定位在 的左边缘左侧 20 像素处`#element`，而与`#element`的宽度无关。

但是有没有办法设置一个负的*右*位置，*而不*给出`#element`一个固定的宽度（然后只设置一个高的正左值）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-24T00:43:50.090

这种效果不可能通过简单的 CSS 获得，这根本不是真的。无需使用不必要的伪元素或多个 div 使您的标记复杂化。

您可以使用 CSS 中的“calc”函数让浏览器计算 100% 的容器宽度，然后像这样添加负边距（记住将负边距添加到 100%*而不是*减去它）：

```
background-position: calc(100% + 20px) 0; 
```

或者，如果您更喜欢简写格式的标记：

```
background: url("image.png") calc(100% + 20px) 0 no-repeat; 
```

这会将您的背景图像从其容器的左侧定位 100%（从而获得与使用*background-position: right*相同的效果），并通过将 20px 添加到该位置，您将获得负右边距。

您可以在这个 jsFiddle 中看到函数如何表现的演示：http: [//jsfiddle.net/58u665fe/](http://jsfiddle.net/58u665fe/)

大多数主流浏览器都支持“计算”功能，但在某些情况下缺乏对 IE9< 的支持。[您可以在http://caniuse.com/#feat=calc](http://caniuse.com/#feat=calc)阅读更多关于哪些浏览器支持此功能的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:09:20.547

你想做的事情不可能以你想做的方式。

解决方法可能是创建一个具有`position: relative;`属性的父 div，然后对另一个 div 进行 z-index 索引，该 div 是一个包含您的内容的 div。

```
<style>
    #parent {
        position: relative; 
    }
    #background {
        background: url(img.png) top left no-repeat;
        position: absolute;
        top: 0;
        left: -20px;
    }
    #content {
        position: absolute;
        top: 0;
        left: 0;
    }
</style>

<div id="parent">
    <div id="background"></div>
    <div id="content"></div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T04:49:36.107

还有另一种方法可以在不更改标记的情况下实现此目的：

使用 :after 伪选择器，您可以将图像添加到任何块的右侧，尽管与实际的 css 背景不同

所以你可以这样做：

```
#element {
  position: relative;
}
#element:after{
  content: "";
  background: transparent url(image.png) 0 0 no-repeat;
  position: absolute;
  right: -20px;
  top: 0;
  height: 50px /*add height of your image here*/ 
  width: 50px /*add width of your image here*/
  z-index: 1;  
}
#element *{
  position: relative; 
  z-index: 2; /*this makes sure all the "background image" doesn't sit above the elements*/  
} 
```

# ruby - Cucumber 功能可以将常量传递给步骤定义吗？

> ID：14569636
> 
> 赞同：1
> 
> 时间：2013-01-28T19:27:26.917
> 
> 标签：ruby, cucumber, constants, static-libraries

我有一个 XPATH 库，用于 XPATH 定期更改的站点。我之所以编写它，是因为我无需遍历每个功能文件并更改它发送的 XPATH，而是可以简单地更改我在 .rb 库中拥有的变量的值。

是否可以通过 .feature 文件将这些常量传递给步骤定义？

.feature 功能文件示例：

```
Scenario: I want to test a button
    When I go to url "blah"
    And I click on the XPATH: XPATH_CONSTANT_VARIABLE 
```

.rb 步骤定义示例：

```
When /^I click on the XPATH: {I DON'T KNOW WHAT TO PUT HERE}$/ do |path|
    @driver.find_element(:xpath, path).click
end 
```

示例 XPATH .rb 库：

```
XPATH_CONSTANT_VARIABLE = "//*[@id="blahblah"]/div[1]/div/div[2]/div/div[1]/div/div[5]/div/div/div/div[2]" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:13:48.140

你的场景是非常必要的。我建议您使它们更具声明性，并且不要在场景中使用（或引用）XPathes。读：

*   [你搞错了](http://www.elabs.se/blog/15-you-re-cuking-it-wrong)
*   [用户故事中的命令式与声明式场景](http://benmabey.com/2008/05/19/imperative-vs-declarative-scenarios-in-user-stories.html)

* * *

如果你真的想保持你的场景不变，你可以使用：

```
When /^I click on the XPATH: \w+$/ do |constant|
  xpath = Kernel.const_get constant
  @driver.find_element(:xpath, xpath).click
end 
```

但是像你一样将所有常量放到全局空间对我来说似乎很难看。将它们放入 YAML 文件可能会更好。

# c++ - 派生类和类型检查

> ID：14569642
> 
> 赞同：0
> 
> 时间：2013-01-28T19:27:55.787
> 
> 标签：c++, overloading, typechecking, typeid

我正在尝试编写一个方法，它将派生自 std::string 的类作为参数。该方法重载了几个不同的函数签名。如果我尝试使用 std::string 调用它，或者至少是运行时错误，我希望编译失败，但显然编译器对我来说太聪明了。

```
class NotAString : public std::string {
    NotAString(std::string str) : std::string(str) { }
};

class Foo {
   Foo();
   void bar(NotAString);
   void bar(int)
}; 
```

这编译并运行

```
Foo foo();
foo.bar(NotAString("baz")); 
```

但这也是如此：

```
Foo foo();
foo.bar(std::string("baz")); 
```

我试过像这样使用 typeid(str) ：

```
void Foo::Bar(NotAString str) {
    if(typeid(&str) != typeid(new NotAString()) {
        throw std::bad_typeid();
    }
} 
```

但如果将 std::string 或 NotAString 传递给它，它总是会抛出异常。我试过像这样使用dynamic_cast：

```
void Foo::Bar(NotAString str) {
    if (dynamic_cast<NotAString*>(&str) == NULL) {
        throw std::bad_type();
    }
} 
```

但它从不抛出异常。

目标是能够区分字符串和表示键值查找键的字符串。如何更改我的 NotAString 类或通过编译器强制执行一些更严格的类型检查，以使其按我的意愿工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:30:28.900

问题是您的`NotAString(std::string str)`构造函数不是这样，它允许从to[`explicit`](https://stackoverflow.com/questions/121162/what-does-the-explicit-keyword-in-c-mean)隐式转换。`std::string``NotAString`

当您使用编译器调用函数时`std::string`，编译器会注意到您可以通过构造函数转换参数来调用它，因此它会创建一个`NotAString`临时变量并将其传递给函数。

如果您声明它，`explicit NotAString(std::string str)`那么它将不允许那些隐式转换。

*您检查函数内部*类型的尝试永远不会起作用，到那时编译器已经创建 a`NotAString`并且您要测试的只是`NotAString`参数是否不是`NotAString`... 这显然不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:31:42.700

抛开糟糕的设计理念，改变这个构造函数......

```
class NotAString : public std::string {
    NotAString(std::string str) : std::string(str) { }
}; 
```

...成为`explicit`：

```
class NotAString : public std::string {
    explicit NotAString(std::string str) : std::string(str) { }
}; 
```

这将防止`std::string`对象在`NotAString`用作函数参数时被隐式转换为。

# classpath - RealmBase 加密问题

> ID：14569647
> 
> 赞同：2
> 
> 时间：2013-01-28T19:28:28.617
> 
> 标签：classpath, tomcat7, server.xml

我正在尝试通过以下命令使用 RealmBase 将 server.xml 的密码加密到 Tomcat7 中：

```
java -cp bin\tomcat-juli.jar;lib\catalina.jar;lib\tomcat-util.jar; org.apache.catalina.realm.RealmBase -a SHA passwd 
```

我在执行命令时遇到以下错误：

```
C:\Program Files\Apache Software Foundation\Tomcat 7.0>java -cp bin\tomcat-juli.jar;lib\catalina.jar;lib\tomcat-util.jar; org.apache.catalina.realm.RealmBase -a  MD5 passwd
Exception in thread "main" java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletRequest
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$100(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 18 more

C:\Program Files\Apache Software Foundation\Tomcat 7.0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:33:17.797

尝试包括`servlet-api.jar`。

```
java -cp bin\tomcat-juli.jar;lib\catalina.jar;lib\tomcat-util.jar;lib\servlet-api.jar org.apache.catalina.realm.RealmBase -a SHA passwd 
```

**编辑**

在尝试自己运行它之后，又缺少另一个类。与其手动将每个 JAR 包含在类路径中，我决定将它们全部包含在`lib\*`. 试试这个……它对我有用！

```
java -cp bin\tomcat-juli.jar;lib\* org.apache.catalina.realm.RealmBase -a SHA passwd 
```

# c# - 将文件复制到由注册表项标识的位置

> ID：14569648
> 
> 赞同：0
> 
> 时间：2013-01-28T19:28:30.350
> 
> 标签：c#, registry, registrykey

我想编写一个小型应用程序，它将一些嵌入式文件复制到注册表项中标识的位置。

我希望应用程序查找该密钥，如果找到，则复制文件。否则告诉用户他们必须先执行一些其他操作。

但我不知道如何从 C# 访问注册表项。关于从哪里开始的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:30:34.380

对于注册表查询/操作，您可以使用[**Registry**](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry%28v=vs.110%29.aspx)类。

# c# - WPF MVVM 模式中的关注点分离

> ID：14569651
> 
> 赞同：2
> 
> 时间：2013-01-28T19:29:02.740
> 
> 标签：c#, .net, wpf, mvvm

我正在使用 WPF 和 MVVM 设计模式编写应用程序（我也是 MVVM 模式的新手）。此应用程序管理和跟踪用户观看过的电影。它还需要联系外部网站以下载电影的元数据。我通过使用 .NET TMDb 和 Rotten Tomatoes 库来做到这一点。

目前，我`Movie`在 Models 文件夹中有一个类，该类包含电影的所有属性以及设置 TMDb/RT 库、搜索匹配结果以及下载所有元数据所需的方法和逻辑。然而，这让我的`Movie`课堂比我想象的要混乱和沉重。

将访问第三方 API 的方法和逻辑完全移到`MovieViewModel`另一个类甚至另一个类是否更有意义？模型类应该有多简单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:34:12.767

> 模型类应该有多简单？

通常，[**POCO**](http://en.wikipedia.org/wiki/Plain_Old_CLR_Object) -简单。将*模型层*视为**领域对象定义**+**业务逻辑**是安全的。领域对象通常是简单的数据持有者（如提到的 POCO 类），而业务逻辑是执行应用程序请求的功能（数据检索、持久性、与其他 API 通信等）所需的任何东西。

ViewModel 是将所有内容绑定在一起并提供给视图的粘合剂。

> 将访问第三方 API 的方法和逻辑移动到 MovieViewModel 甚至是另一个类是否更有意义？

是的。为了关注点分离、可测试性或通常不使视图模型层混乱（当正确实施时，模型类可以很容易地在视图模型中重用[POCO-正确地是]）。

此外，请考虑进一步分离您的模型：

```
Model.Entities -- POCO 域对象
Model.Contract -- 业务逻辑接口
Model.* -- 以上的具体实现

```

这有多个优点：

*   您的实体（域对象）没有与数据访问层混淆（这往往是常见的滥用）。因此，更换数据层或添加新的数据库支持非常容易，
*   由于其简单性，实体组件很容易在其他项目中重用（请记住，仅限 POCO），
*   视图模型只需要了解实体和合同程序集——它们保持干净，并且再次很容易替换/重用实现，
*   您的项目将保持松散耦合、模块化和灵活。

总体而言，设计/实现模型层时的小错误（或偶然的懒惰）将在项目的后期阶段滚雪球。将整个 DAL 拉到 VM，将第 3 方 API 程序集链接到 VM（*“因为模型代码滑倒”*），无法编写单元测试都是糟糕的层设计的结果。结果，不是可重用的视图模型，而是每个人都害怕触摸的不可维护的怪物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:40:56.083

我想说：将下载数据的代码完全移到另一个类中。模型应该是数据的简单表示。让您的应用程序代码调用您的 API 帮助程序来下载数据并返回一个简单的模型或模型列表（甚至模型对象的层次结构）。然后将这些模型包装在视图模型中，并将视图模型提供给视图的 DataContext。

# jsp - 如何在jsp中翻译生成的自定义标签

> ID：14569652
> 
> 赞同：0
> 
> 时间：2013-01-28T19:29:17.183
> 
> 标签：jsp, jsp-tags

我正在尝试在 java 中生成树结构以显示在 html 中。我可以通过在 Java 中生成纯 html 来使其工作，但我更愿意将树组件（根、分支、叶）的 html 保留在标签中，而不是为了可维护性。有没有一种好方法可以将包含自定义标签（或任何标签）的java字符串翻译成html？

我尝试了几件事：

- 在控制器中构建字符串，然后在 jsp 中打印（通过 scriptlet 或 EL） 字符串未翻译，但按原样打印，即显示在浏览器中

- 在控制器中构建结构，将其传递给生成字符串的自定义标签（更多自定义标签）与上述相同的问题。无法让它重新翻译正文。我尝试了 BodyTagSupport 和 SimpleTagSupport

-use core tags 结构太复杂，所以这不是一个选项

-scriptlet 不能很好地处理标签

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:04:55.420

如果我理解正确，您的标签会生成包含另一个自定义标签实例的 HTML 代码。所以实际上它生成的不是HTML，而是JSP代码。这是不允许的。JSP 容器不会重新解析和解释您的标签生成的代码。

但是没有理由不能自己调用​​标记方法（或 JSP 标记，如果实现为标记文件）来实现递归。这是一个使用 JSP 标记文件（tree.tag，以节点集合作为参数）的简单示例：

```
<%@ tag %>
<%@ attribute name="nodes" required="true" rtexprvalue="true" type="java.util.collection" %>
<ul>
    <c:forEach var="node" items="${nodes}">
        <li><c:out value="${node.text}"/>
            <c:if test="${!empty node.subNodes}">
                <myTags:tree nodes="${node.subNodes}">
            </c:if>
        </li>
    </c:forEach>
<ul> 
```

# wpf - ObservableCollection 的 CollectionChanged 事件

> ID：14569655
> 
> 赞同：1
> 
> 时间：2013-01-28T19:29:32.847
> 
> 标签：wpf, observablecollection

我有一个 ObservableCollection，这个集合有 2 个项目（模型），模型有 Value 作为属性。

集合有一个事件 CollectionChanged，它假设在更改项目时触发，所以我希望看到这个事件在模型值设置时触发，但我不知道应该如何构建模型来触发该事件？

我知道 Model 可以有一个事件，并且在添加 Model 时可以为该事件分配一个处理程序，但我想知道 CollectionChanged 如何更改集合中的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:34:20.270

`CollectionChanged`*仅当模型替换*您集合中的另一个模型时才会引发。对已经在集合中的模型的属性更改不会引发它。

您将需要处理`INotifyPropertyChanged.PropertyChanged`您的模型必须公开的事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:33:43.190

如果元素中的属性发生更改，它不会触发，只有当您将新的“模型”项分配给集合的索引时。

如果您希望 WPF 在您更改模型类中的属性值时更新，您需要使模型实例实现`INotifyPropertyChanged`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-17T15:33:26.820

hack 是将新元素添加到集合中并立即将其删除。这将引发 collectionchanged 事件。

# html - 如何使用悬停更改 li 标签的背景颜色？

> ID：14569661
> 
> 赞同：3
> 
> 时间：2013-01-28T19:29:55.600
> 
> 标签：html, css

`li`使用 onMouseOver更改标签背景颜色的最佳方法是什么？我用这种方式尝试过，但它不起作用：

生成 HTML 的代码：

```
echo "<a href=".$obj_players->Page." target=_parent>
      <li style=\"background-color:#FFFFFF;\"><span class=\"left\">" . $obj_players->Name . "</span><span class=\"right\">" . $obj_players->Viewers . "</span></li></a>"; 
```

CSS：

```
#navlist li:hover {
    background-color:#2EA620;
}

#navlist li {
    width:175px;
    height:30px;
    text-align:center;
    line-height:30px;
    font:"Myriad Pro";
    font-size:14px;
    padding-left:10px;
    padding-right:10px;
    border-bottom:1px solid;
    border-color:#333;
} 
```

说明：我必须在`li`标签中声明背景颜色，因为我有`li`不同背景颜色的不同元素。并且 li 在一个`div`带有 ID 的导航列表中。

我也有一个问题，我不希望每个`li`人都用 onmouseover 改变背景颜色，但我稍后会解决这个问题，因为我认为我应该能够自己管理它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T19:35:19.817

You need to remove the `background-color:#FFFFFF` inline, and add that to the css. Then `#navlist li:hover { background-color:#2EA620; }` should work.

example: [http://jsfiddle.net/jU8Pp/](http://jsfiddle.net/jU8Pp/)

# c++ - c++11 async<>，可用内核数量未知

> ID：14569662
> 
> 赞同：0
> 
> 时间：2013-01-28T19:29:55.927
> 
> 标签：c++, multithreading, asynchronous, c++11

我的 C++ 代码在时间序列数据 (t2 >> t1) 上计算非常大的积分。积分是固定长度的，当前存储在双精度的 [mx 2] 列数组中。第 1 列是时间。第 2 列是被整合的信号。代码在四核或八核机器上运行。

对于具有*k*核的机器，我想：

*   分拆 k-1 个工作进程（每个剩余核心一个）以评估积分的部分（梯形积分）并将其结果返回到等待的主线程。
*   在不深度复制原始数组部分的情况下实现上述目标。
*   实现 C++11 异步模板以实现可移植性

如何在不硬编码可用内核数量的情况下实现上述目标？

我目前正在使用 VS 2012。

**更新清晰度：**

例如，这是粗略的伪代码

```
data is [100000,2] double

result = MyIntegrator(data[1:50000,1:2]) + MyIntegrator(data[50001:100000, 1:2]); 
```

我需要`MyIntegrator()`在单独的线程中评估函数。主线程等待这两个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:35:07.877

怎么样`std::thread::hardware_concurrency()`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:42:07.033

获取运行的核心数量，通常可以通过`std::thread::hardware_concurrency()`

> 返回实现支持的并发线程数。该值应仅被视为一个提示。

如果这是零，那么您可以尝试运行基于操作系统的特定命令。 [这](https://stackoverflow.com/questions/150355/programmatically-find-the-number-of-cores-on-a-machine)似乎是找出核心数量的好方法。

您仍然需要进行测试以确定多线程是否会给您带来实实在在的好处，请记住不要过早优化:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T21:01:39.537

这是对问题进行多线程集成的源代码。

```
#include <vector>
#include <memory>
#include <future>
#include <iterator>
#include <iostream>

struct sample {
  double duration;
  double value;
};
typedef std::pair<sample*, sample*> data_range;
sample* begin( data_range const& r ) { return r.first; }
sample* end( data_range const& r ) { return r.second; }

typedef std::unique_ptr< std::future< double > > todo_item;

double integrate( data_range r ) {
  double total = 0.;
  for( auto&& s:r ) {
    total += s.duration * s.value;
  }
  return total;
}

todo_item threaded_integration( data_range r ) {
  return todo_item( new std::future<double>( std::async( integrate, r )) );
}
double integrate_over_threads( data_range r, std::size_t threads ) {
  if (threads > std::size_t(r.second-r.first))
    threads = r.second-r.first;
  if (threads == 0)
    threads = 1;
  sample* begin = r.first;
  sample* end = r.second;

  std::vector< std::unique_ptr< std::future< double > > > todo_list;

  sample* highwater = begin;

  while (highwater != end) {
    sample* new_highwater = (end-highwater)/threads+highwater;
    --threads;
    todo_item item = threaded_integration( data_range(highwater, new_highwater) );
    todo_list.push_back( std::move(item) );
    highwater = new_highwater;
  }
  double total = 0.;
  for (auto&& item: todo_list) {
    total += item->get();
  }
  return total;
}

sample data[5] = {
  {1., 1.},
  {1., 2.},
  {1., 3.},
  {1., 4.},
  {1., 5.},
};
int main() {
  using std::begin; using std::end;
  double result = integrate_over_threads( data_range( begin(data), end(data) ), 2 );
  std::cout << result << "\n";
} 
```

它需要一些修改才能以您指定的格式读取数据。

但是你可以用`std::thread::hardware_concurrency()`线程数来调用它，它应该可以工作。

（特别是，为了简单起见，我有成对的 (duration, value) 而不是 (time, value)，但这只是一个小细节）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T20:40:31.193

你可以过度安排，看看它是否会损害你的表现。将您的数组拆分为固定长度的小间隔（可在一个 quant 中计算，可能适合一个缓存页面），并查看其性能与根据 CPU 数量进行拆分的比较。

使用 std::packaged_task 并将其传递给线程以确保您不会受到“启动”配置的伤害。

下一步将是引入线程池，但这更复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T19:34:12.370

您可以接受工作线程数的命令行参数。

# fortran - 在 fortran 中初始化参数数组的正确方法是什么？

> ID：14569665
> 
> 赞同：10
> 
> 时间：2013-01-28T19:30:04.553
> 
> 标签：fortran, fortran90

这工作得很好：

```
 program main
    integer,parameter,dimension(3) :: x = [1,2,3]
    print*,x
  end program main 
```

就像这样：

```
 program main
    integer,parameter,dimension(3) :: x = (/1,2,3/)
    print*,x
  end program main 
```

是否有理由认为一种形式应该优于另一种形式（例如向后兼容性）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T19:43:25.420

方括号形式已添加到 Fortran 2003 中的语言中。如果您正在写入 Fortran 90（根据问题上的标签），那么方括号形式是语法错误（方括号不在 Fortran 90 字符集中） .

除了语言标准，这是个人喜好和风格的问题。

# javascript - 函数对象内部原型

> ID：14569666
> 
> 赞同：2
> 
> 时间：2013-01-28T19:30:13.423
> 
> 标签：javascript, prototype

据说每个javascipt对象都有内部prototype属性，那么预定义的Function对象也有内部prototype属性。那么它的内部原型**proto** 指向哪个对象原型呢？

```
function Object(){}
alert(Object.constructor)//function Function(){[native code]} 
```

所以我指的是函数 Function(){} 对象的内部原型，而不是它的原型属性。像 Function 对象实例的内部原型指向 Function object.prototype 同样 Function 对象内部原型指向什么？不考虑添加到它的原型属性。我知道原型对象的内部原型将指向什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:34:43.373

所有对象都继承自`Object.prototype`，但它们也可能继承自其他原型，具体取决于对象的类型。函数继承自`Function.prototype`（继承自`Object.prototype`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:35:16.613

In Javascript, functions are just a specific type of object. Thus a function's prototype is the same thing as an object's prototype. For more reading on functions as objects, check out [this link](http://helephant.com/2008/08/19/functions-are-first-class-objects-in-javascript/).

# oracle - 找到最好的版本

> ID：14569668
> 
> 赞同：3
> 
> 时间：2013-01-28T19:30:14.850
> 
> 标签：oracle, plsql, oracle11g

我正在使用 Oracle Database 11g Enterprise Edition Release 11.2.0.2.0

我有一张如下表：

```
Table1:
Name              Null     Type          
----------------- -------- ------------- 
NAME              NOT NULL VARCHAR2(64)  
VERSION           NOT NULL VARCHAR2(64) 

Table1
Name    Version
---------------
A         1
B         12.1.0.2
B         8.2.1.2
B         12.0.0
C         11.1.2
C         11.01.05 
```

我希望输出为：

```
Name    Version
---------------
A        1
B        12.1.0.2
C        11.01.05 
```

基本上，我想获取具有最高版本的每个名称的行。为此，我使用以下查询：

```
SELECT t1.NAME, 
       t1.VERSION
FROM TABLE1 t1 
LEFT OUTER JOIN TABLE1 t2
on (t1.NAME = t2.NAME and t1.VERSION < t2.VERSION)
where t2.NAME is null 
```

现在 't1.VERSION < t2.VERSION' 仅适用于正常版本情况，但适用于以下情况：

```
B         12.1.0.2
B         8.2.1.2 
```

它失败了，我需要一个 PL/SQL 脚本来规范化版本字符串并比较它们以获得更高的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T20:18:36.797

您可以通过明智地使用[REGEXP_SUBSTR()](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#SQLRF06303)来做到这一点；无需使用 PL/SQL。

```
select *
  from ( select a.*
              , row_number() over ( 
                  partition by name
                      order by to_number(regexp_substr(version, '[^.]+', 1)) desc
                             , to_number(regexp_substr(version, '[^.]+', 2)) desc
                             , to_number(regexp_substr(version, '[^.]+', 3)) desc
                             , to_number(regexp_substr(version, '[^.]+', 4)) desc
                               ) as rnum
          from table1 a )
 where rnum = 1 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/c6ac2/7)请注意我必须如何将每个部分转换为数字才能使其正常工作。

但是，如果您将它们分成不同的列，主要版本，次要版本等，我不能强调您的生活会变得多么容易。然后您可以有一个虚拟列将它们连接在一起以确保您的导出始终是标准化的，如果你愿意。

例如，如果您创建了一个表，如下所示：

```
create table table1 ( 
    name varchar2(64)
  , major number
  , minor number
  , build number
  , revision number
  , version varchar2(200) generated always as (
      to_char(major) || '.' || 
      to_char(minor) || '.' || 
      to_char(build) || '.' || 
      to_char(revision)
      ) 
```

您的查询变得更容易理解；也在[SQL Fiddle](http://www.sqlfiddle.com/#!4/6981d/2)

```
select name, version
  from ( select a.*
              , row_number() over ( 
                   partition by name
                       order by major desc
                              , minor desc
                              , build desc
                              , revision desc ) as rnum
           from table1 a )
 where rnum = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T02:30:09.460

此解决方案与版本代码中有多少数字部分无关。
它只假设每个数字部分由不超过 6 个数字组成。

```
select 
  name,
  max(version) keep (dense_rank first order by version_norm desc) 
    as max_version
from (
    select 
      t.*,
      regexp_replace(
        regexp_replace('000000'||version, '\.', '.000000')||'.',
        '\d*(\d{6}\.)', '\1') 
        as version_norm
    from table1 t
  )
group by name 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/c6ac2/33/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:54:23.133

您需要以某种方式将字符串值转换为数值，然后通过一些适当的乘数对其进行缩放。假设每个版本值必须是 0..99 之间的数字作为示例。因此，如果您的字符串是“8.2.1.2”，您将缩放字符串的数值，“abcd” = d + c*100 + b*10000 + a*1000000, = 2 + 100 + 20000 + 8000000 = 8020102 ，然后您可以使用该值进行排序。

我找到了一个函数，您可以使用它来解析分隔字符串中的标记：

```
CREATE OR REPLACE FUNCTION get_token (the_list     VARCHAR2,
                                      the_index    NUMBER,
                                      delim        VARCHAR2 := ',')
   RETURN VARCHAR2
IS
   start_pos   NUMBER;
   end_pos     NUMBER;
BEGIN
   IF the_index = 1
   THEN
      start_pos := 1;
   ELSE
      start_pos :=
         INSTR (the_list,
                delim,
                1,
                the_index - 1);

      IF start_pos = 0
      THEN
         RETURN NULL;
      ELSE
         start_pos := start_pos + LENGTH (delim);
      END IF;
   END IF;

   end_pos :=
      INSTR (the_list,
             delim,
             start_pos,
             1);

   IF end_pos = 0
   THEN
      RETURN SUBSTR (the_list, start_pos);
   ELSE
      RETURN SUBSTR (the_list, start_pos, end_pos - start_pos);
   END IF;
END get_token; 
```

所以叫类似

```
select to_number(get_token(version,1,'.'))*1000000 +  to_number(get_token(version,2,'.'))*10000 + .. etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:16:47.637

只需编写一个 MySQL 用户定义函数即可完成任务，您可以轻松地将其移植到 ORACLE PL/SQL。

```
DELIMITER $$

DROP FUNCTION IF EXISTS `VerCmp`$$

CREATE FUNCTION VerCmp (VerX VARCHAR(64), VerY VARCHAR(64), Delim CHAR(1))
RETURNS INT DETERMINISTIC
BEGIN
    DECLARE idx INT UNSIGNED DEFAULT 1;
    DECLARE xVer INT DEFAULT 0;
    DECLARE yVer INT DEFAULT 0;
    DECLARE xCount INT UNSIGNED DEFAULT 0;
    DECLARE yCount INT UNSIGNED DEFAULT 0;
    DECLARE counter INT UNSIGNED DEFAULT 0;

SET xCount = LENGTH(VerX) - LENGTH(REPLACE(VerX, Delim,'')) +1;
SET yCount = LENGTH(VerY) - LENGTH(REPLACE(VerY, Delim,'')) +1;

IF xCount > yCount THEN
    SET counter = xCount;
ELSE
    SET counter = yCount;
END IF;

WHILE (idx <= counter) DO

    IF (xCount >= idx) THEN
        SET xVer = SUBSTRING_INDEX(SUBSTRING_INDEX(VerX, Delim, idx), Delim, -1) +0;
    ELSE
        SET xVer =0;
    END IF;
    IF (yCount >= idx) THEN
        SET yVer = SUBSTRING_INDEX(SUBSTRING_INDEX(VerY, Delim, idx), Delim, -1) +0;
    ELSE 
        SET yVer = 0;
    END IF;

    IF (xVer > yVer) THEN
        RETURN 1;
    ELSEIF (xVer < yVer) THEN
        RETURN -1;
    END IF;

    SET idx = idx +1;
END WHILE;

RETURN 0;

END$$;

DELIMITER ; 
```

我运行的几个测试：

```
select vercmp('5.2.4','5.2.5','.');
+------------------------------+
| vercmp('5.2.4','5.2.5','.')  |
+------------------------------+
|                           -1 |
+------------------------------+

select vercmp('5.2.4','5.2.4','.');
+------------------------------+
| vercmp('5.2.4','5.2.4','.')  |
+------------------------------+
|                            0 |
+------------------------------+

select vercmp('5.2.4','5.2','.');
+----------------------------+
| vercmp('5.2.4','5.2','.')  |
+----------------------------+
|                          1 |
+----------------------------+

select vercmp('1,2,4','5,2',',');
+----------------------------+
| vercmp('1,2,4','5,2',',')  |
+----------------------------+
|                         -1 |
+----------------------------+ 
```

# c++ - Supply C99 complex arguments from C++

> ID：14569690
> 
> 赞同：3
> 
> 时间：2013-01-28T19:31:37.327
> 
> 标签：c++, c, c99

> **Possible Duplicate:**
> [Passing a C++ complex array to C](https://stackoverflow.com/questions/5020076/passing-a-c-complex-array-to-c)

If a third party C library expects an array of C99 complex numbers as an argument, what is the easiest way to call it from C++, where my complex numbers use the STL complex type? I could just wrap it in a new c function that accepts floats and converts them to complex, but is there a more direct way to do it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:48:21.967

According to C99:

> 6.2.5/13 Each complex type has the same representation and alignment requirements as an array type containing exactly two elements of the corresponding real type; the first element is equal to the real part, and the second element to the imaginary part, of the complex number.

and according to C++11:

> 26.4 if `a` is an expression of type `cv* std::complex<T>*` and the expression `a[i]` is well-deﬁned for an integer expression `i`, then:

*   `reinterpret_cast<cv T*>(a)[2*i]` shall designate the real part of `a[i]`, and
*   `reinterpret_cast<cv T*>(a)[2*i + 1]` shall designate the imaginary part of `a[i]`

Together, these mean that the two types have the same layout, so you can simply pass the C function a pointer to the array of `std::complex`.

Note that older versions of C++ did not guarantee this layout.

# iphone - 全局队列中的计时器未在 iOS 中调用

> ID：14569693
> 
> 赞同：6
> 
> 时间：2013-01-28T19:31:51.127
> 
> 标签：iphone, ios, nstimer, grand-central-dispatch

```
-(void)viewDidLoad{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [NSTimer scheduledTimerWithTimeInterval:0.10 
                                         target:self 
                                       selector:@selector(action_Timer) 
                                       userInfo:nil 
                                        repeats:YES];
        }
    );
}

-(void)action_Timer{
    LOG("Timer called");
} 
```

`action_Timer`没有被调用。我不知道为什么。你有什么主意吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T20:08:49.057

您`+[NSTimer scheduledTimerWithTimeInterval:...]`从 GCD 工作线程调用。GCD 工作线程不运行运行循环。这就是为什么你的第一次尝试没有奏效。

当您尝试时`[[NSRunLoop mainRunLoop] addTimer:myTimer forMode:NSDefaultRunLoopMode]`，您正在从 GCD 工作线程向主运行循环发送消息。存在的问题`NSRunLoop`不是线程安全的。（这在[*NSRunLoop 类参考*](http://developer.apple.com/library/ios/#Documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRunLoop/addTimer:forMode:)中有记录。）

相反，您需要分派回主队列，以便当您将`addTimer:...`消息发送到主运行循环时，它在主线程上完成。

```
-(void)viewDidLoad {
    [super viewDidLoad];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSTimer *timer = [NSTimer timerWithTimeInterval:0.10 
                                         target:self 
                                       selector:@selector(action_Timer) 
                                       userInfo:nil 
                                        repeats:YES];
        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];
        });        
    });
} 
```

实际上，如果您要在主运行循环中安排它，则没有理由在后台队列上创建计时器。您可以直接分派回主队列来创建和调度它：

```
-(void)viewDidLoad {
    [super viewDidLoad];
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSLog(@"on background queue");
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"on main queue");
            [NSTimer scheduledTimerWithTimeInterval:0.10 
                                         target:self 
                                       selector:@selector(action_Timer) 
                                       userInfo:nil 
                                        repeats:YES];
        });        
    });
} 
```

请注意，我的两个解决方案都将计时器添加到主运行循环中，因此计时器的操作将在主线程上运行。如果您希望计时器的操作在后台队列上运行，您应该从操作中分派给它：

```
-(void)action_Timer {
    // This is called on the main queue, so dispatch to a background queue.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        LOG("Timer called");
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:55:59.327

您必须将计时器添加到主运行循环才能触发计时器，但首先，您应该在私有 ivar 或属性中保存对计时器的引用：

```
-(void)viewDidLoad{
        // on the main queue
        self.mytimer = [NSTimer scheduledTimerWithTimeInterval:0.10 
                                                        target:self 
                                                      selector:@selector(action_Timer) 
                                                      userInfo:nil 
                                                        repeats:YES];
        [[NSRunLoop mainRunLoop] addTimer:myTimer forMode:NSDefaultRunLoopMode];
}

-(void)action_Timer{
    dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void){
        LOG("Timer called");
    });
} 
```

我发现在被调用的方法中更容易离开主队列。在某个时候，也许 in`viewDidUnlod`或 in `dealloc`，你会有 call `[self.myTimer invalidate]; self.myTimer = nil;`。

*   [NS定时器](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)
*   [NSRunLoop](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html#//apple_ref/occ/instm/NSRunLoop/addTimer%3aforMode%3a)
*   [NSObject](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)

# ruby - 如何在 IRB 中重定向漂亮的打印

> ID：14569698
> 
> 赞同：0
> 
> 时间：2013-01-28T19:32:12.297
> 
> 标签：ruby, mechanize, pretty-print

我正在尝试在 IRB 中重定向漂亮的打印输出，但 pp page >> results.txt 不起作用。如何将漂亮的打印重定向到文件？我正在使用 Windows 操作系统。

**我的代码**

```
require 'nokogiri'
require 'mechanize'

agent = Mechanize.new

agent.user_agent_alias = 'Windows Mozilla'

page = agent.get('http://www.asus.com/Search/')
pp page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:35:22.273

You can't redirect output to a file inside a Ruby script using `>>`. That trick only works at the command-line.

To write to a file use:

```
File.open('results.txt', 'a') { |fo| pp page, fo } 
```

See the [documentation](http://ruby-doc.org/stdlib-1.9.3/libdoc/pp/rdoc/PP.html#method-c-pp) for `pp` for more information.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:25:23.603

好的，我让它工作了，对于任何好奇的人，这是基于我发现的另一个漂亮的打印问题：

```
require 'nokogiri'
require 'mechanize'

agent = Mechanize.new

agent.user_agent_alias = 'Windows Mozilla'

page = agent.get('http://www.asus.com/Search/')
pp page

File.open("results.txt","w") do |f|
PP.pp(page,f)
end 
```

# css - CSS Business Catalyst 下拉菜单不隐藏

> ID：14569701
> 
> 赞同：0
> 
> 时间：2013-01-28T19:32:27.263
> 
> 标签：css, drop-down-menu, business-catalyst

真是奇怪的故障。我有一个 CSS 菜单，当用户将鼠标悬停在带有子菜单的一个链接上时，它会显示子菜单。如果您在任何其他页面上，则当您将鼠标移出包含元素时，菜单将消失。但是，如果您实际上在页面上（服务），那么即使在鼠标移出后它仍然可见。

超级诡异。我什至无法检查元素。我也不想使用 Javascript 来隐藏它。想法？

[http://firstglancesolutions.kinetixbizsuite.com/services.htm](http://firstglancesolutions.kinetixbizsuite.com/services.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:49:24.853

服务页面上给出了以下错误：

> 未捕获的类型错误：无法调用 null 的方法“getElementsByTagName”

```
var _anchors = document.getElementById(menuid).getElementsByTagName('a'); 
```

上面的行（来自 Java_DynMenusSelectedCSS.js）正在寻找 menuid 的 id，但我在服务页面 html 中找不到这样的 id。

all.css 的第 216 行：

```
#nav .drop-li ul.drop {
position: absolute;
top: 13%;
padding: 0 4px 7px;
clear: both;
z-index: 1000;
margin-top: 50px; } 
```

我已删除`display:none;`，它现在的行为应如此。你也有溢出：none！important；这不是一个有效的属性，`hidden;`如果您仍想使用溢出，请改用。

# c++ - 继承一个 std::container 包括它的 boost 序列化

> ID：14569706
> 
> 赞同：0
> 
> 时间：2013-01-28T19:32:43.433
> 
> 标签：c++, serialization, boost

我有一个这样定义的类：

```
template <typename T>
class MyMap
    :public std::map<MyKey, T>
{
    // ...
}; 
```

该类不添加任何成员，它只是包装`std::map`并提供了一些辅助功能（为方便起见）。

现在，我的目标是使此类增强序列化兼容。也就是我不仅要支持序列化，还要兼容`std::map`同模板参数的序列化。

如何做到这一点？我试图让类保持原样（希望它会从基类派生序列化） - 无法编译。试图添加一个`serialize`调用基础的简单实现 - 无法编译。

我还尝试添加我的实现。可以的，但是不兼容`std::map`。

有什么想法吗？提前致谢。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:56:38.977

**[阅读序列化文档](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/serialization.html)**中的基类部分

```
template<class Archive>
void serialize(Archive &ar, const unsigned int version)
{
    ar & boost::serialization::base_object<std::map<MyKey, T>>(*this);

    //Serialize your stuff after the base class
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:39:13.620

你可以在你的类中强制实例化 boost::serialization::implementation_level_impl。（这就是 BOOST_CLASS_IMPLEMENTATION 创建的）

在你的情况下，这样的事情会起作用：

```
template <typename T>
class MyMap
    :public std::map<MyKey, T>
{
    boost::serialization::implementation_level_impl<MyMap<T>> temp; //Causes template instantiation
};

namespace boost {                                    
    namespace serialization {      
        template <typename T>
        struct implementation_level_impl< const MyMap<T> >                     
        {                                                    
            typedef mpl::integral_c_tag tag;                 
            typedef mpl::int_< boost::serialization::object_serializable > type;                     
            BOOST_STATIC_CONSTANT(                           
                int,                                         
                value = implementation_level_impl::type::value    
                );                                               
        };                                                   
    }                                                    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:02:00.243

[摘自The C++ Standard Library: A Tutorial and Reference](https://rads.stackoverflow.com/amzn/click/com/0201379260)一书的第 6.7 节：

> 有三种不同的方法可以使容器“支持 STL”：
> 
> 1.  侵入性方法：
> 
> 有时使用术语侵入性和非侵入性来代替侵入性和非侵入性。您只需提供啊 STL 容器所需的接口。特别是，您需要容器的常用成员函数，例如 begin() 和 end()。这种方法是侵入性的，因为它要求以某种方式编写容器。
> 
> 2.  无创方法：
> 
> 您编写或提供特殊迭代器，用作算法和特殊容器之间的接口。这种方法是非侵入性的。它所需要的只是能够遍历容器的所有元素，任何容器都以某种方式提供的能力。
> 
> 3.  包装方法
> 
> 结合前面的两种方法，您编写了一个封装类，该类使用类似 STL 容器的接口封装任何数据结构。

如果您打算使用包装器方法支持 std::map 的附加/不同功能，则应**将映射封装**在包装器类中，而不是从 std::map 继承。

# clojure - Clojure 正则表达式宏

> ID：14569707
> 
> 赞同：1
> 
> 时间：2013-01-28T19:32:55.743
> 
> 标签：clojure

我正在尝试创建一个接受 2 个字符串的宏，其中 1 个是正则表达式模式，另一个是用于测试它的字符串。从一些阅读（包括这里）并看到 #"" 是我尝试使用的阅读器宏，`re-pattern`但它似乎在运行时失败：

> 线程“main”java.lang.ClassCastException 中的异常：clojure.lang.Symbol 无法转换为 java.lang.CharSequence

我的代码：

```
(defmacro checkre [ strre strstring ] 
  (re-find (re-pattern strre) strstring)) 
```

示例调用：

```
(defn hasthing [xp]
  (checkre "(?i)^.*blabla" xp)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:58:13.227

你很近；但是您不需要（并且可能不应该使用）宏：

```
(defn checkre [ strre strstring ] 
  (re-find (re-pattern strre) strstring))
(defn hasthing [xp]
  (checkre "(?i)^.*blabla" xp))
(hasthing "stuff blabla")
;=> "stuff blabla" 
```

宏最好只在需要时使用，因为它们不像函数那样容易组合并且更难推理（因为宏扩展阶段）。

您的宏版本失败的原因是它试图绑定`strre`并且`strstring`在宏扩展时，当它们是符号而不是字符串时。一个有效的（稍微变态的）宏版本是：

```
(defmacro checkre [ strre strstring ] 
  `(re-find ~(re-pattern strre) ~strstring))
(defn hasthing [xp]
  (checkre "(?i)^.*blabla" xp))
(hasthing "stuff blabla")
;=> "stuff blabla" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:58:02.863

你为什么要把它做成一个宏？只要让它成为一个功能，它就会正常工作。

```
=> (defn checkre 
     [strre strstring] 
     (re-find (re-pattern strre) strstring))
#'user/checkre
=> (checkre "[aeiou]" "Hello")
"e" 
```

如果你想创建一个绑定正则表达式的函数，让你的函数返回一个函数

```
=> (defn checkre 
     [strre] 
     (fn [strstring] (re-find (re-pattern strre) strstring)))
=> (def hasthing (checkre "[aeiou]"))
=> (hasthing "Hello")
"e" 
```

# android - View 的 setId() 函数可以创建一个名为 R.id.whatever 的 id 吗？

> ID：14569708
> 
> 赞同：0
> 
> 时间：2013-01-28T19:32:57.100
> 
> 标签：android, view

我一直在 XML 文件中创建我的所有布局。但是，我现在应该将一些页面移植到我的 java 代码中以编程方式构建它们。

我找到了 View.setId() 函数，但它给了我错误。我已经读到您可以只使用正整数来标识您的观点，但我有很多观点并且想正确地标记它们。

我知道我可以在我的类中创建一堆带有名称的整数，但是有没有一种方法可以`setId`用来创建一个`id`可以通过调用引用的新整数`R.id.whatever`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:34:00.840

不，R 实际上是一个生成的类。您不能在运行时添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:38:47.693

您可以创建一些类 IDS 并在那里存储 id 常量。

```
public class Ids  {
    private Ids(){}
    public static int BUTTON_OK = 0;
    public static int BUTTON_CANCEL = 1;
} 
```

并参考那些ID。

# jquery - 事件目标是按钮单击真 jquery

> ID：14569712
> 
> 赞同：0
> 
> 时间：2013-01-28T19:33:10.693
> 
> 标签：jquery

我怎样才能完成这样的事情：

```
function (e) { 
if(e.("#this_button_is_clicked").true)
{//then do this}
}); 
```

?

**编辑：**

```
 $("body").click
       (
         function (e) {
             if (e.target.className !== cls || e.target.click("#bUpdate")) {
               //do this
             }
         }
       ); 
```

我有一个文本框，每当我单击其他地方时，它都会在该文本框模糊时触发。但是当我单击按钮时，它看起来并没有将其视为“body.click”，所以我只想将其添加到我的条件为`button.clicked.true`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:36:00.583

jQuery event objects have a [`target`](http://api.jquery.com/event.target/) property:

```
if ($(e.target).is("#this_button_is_clicked"))
{
    console.log(e);
} 
```

# c++ - quickfix sendToTarget 和持久性

> ID：14569713
> 
> 赞同：1
> 
> 时间：2013-01-28T19:33:13.293
> 
> 标签：c++, quickfix

在 c++ quickfix 服务器应用程序中，有没有办法在目标会话未登录时调用 sendToTarget，这样当客户端稍后可能登录时，它将获取自登录以来“发送”的所有消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T21:14:27.973

默认情况下，QuickFIX 将存储所有传出消息，以防客户端稍后请求它们。如果客户端检测到传入序列号中的间隙，他们将请求重新发送消息。如果您在客户端未连接时发送消息，它将被存储，并且客户端将在下次登录时请求重新发送。

# aptana - 文件关联在文件基础上是可变的

> ID：14569716
> 
> 赞同：0
> 
> 时间：2013-01-28T19:33:48.077
> 
> 标签：aptana

我对 Aptana 文件/编辑器关联有疑问。我已将 PDT 安装到 Aptana 中。在一个目录中，我有三个（以及更多）PHP 文件。当我打开第一个 Aptana 时会打开“PHP 编辑器”，当我打开第二个 Aptana 时会出现错误（“不支持的内容类型编辑器”），而第三个 Aptana 会打开“PHP 源代码编辑器”。都具有相同的扩展名 ( `.php`)。我希望 Aptana 使用“PHP 编辑器”打开所有 PHP 文件。当我使用“PHP 编辑器”显式打开引发错误的文件时，我得到了同样的错误。

我已经激活了 PHP 视角。Content Types > Text > PHP Content Type has `*.php (locked)`， Content Types > Text > PHP Source has `*.php (locked)`，也是。在文件关联中，我为 *.php 列出了两个编辑器（和两个文本编辑器），并且“PHP 编辑器”是默认编辑器。

该项目是一个（本地）GIT 存储库。在另一个项目（也是一个 GIT 存储库）中，它可以正常工作（所有 *.php 文件都在“PHP 编辑器”中打开）。

有人可以向我解释那个“魔法”并给我一个提示如何解决我的问题。我不想切换到另一个 IDE 或类似的东西……</p>

**编辑**

以下是不同文件的行为方式：

```
 Open With…    Open With…           Open With…
file     double click         PHP Editor    PHP Source Editor    Default Editor
-------- -------------------- ------------- -------------------- --------------
a.php    Error                Error         PHP Source Editor    Error
b.php    PHP Editor           PHP Editor    PHP Source Editor    PHP Editor
c.php    PHP Source Editor    PHP Editor    PHP Source Editor    PHP Editor 
```

正如 Sarah Kemp 在她的回答中所描述的那样，b.php 和 c.php 的不同行为是正确的。但是为什么我不能用 PHP 编辑器打开文件 a.php？

**编辑 2**

当我查看文件属性时，`b.php`类型`c.php`为“文件（PHP 内容类型）”并`a.php`具有“文件（PHP 源）”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:15:48.190

您也可以在每个文件的基础上设置文件关联，看起来这可能是您的问题，因为您的其他存储库工作正常？

在项目资源管理器中右键单击您的文件（这是我测试的地方）并选择“打开方式...”并从子菜单中选择您喜欢的编辑器。一旦您在此列表中选择了一个编辑器，Aptana 将记住您对该文件的偏好，并在您将来双击时使用它——即使该类型的所有其他文件以其他方式打开。

希望这对你有用。

# asp-classic - msxml 服务器端经典 ASP 和证书

> ID：14569718
> 
> 赞同：4
> 
> 时间：2013-01-28T19:33:57.207
> 
> 标签：asp-classic, ssl-certificate, serverxmlhttp

我有一个经典的 ASP 应用程序，它执行非常简单的服务器端 GET。

我多年来一直使用相同的代码，并且在数百名用户中没有出现任何问题。但是，现在只有一个用户报告以下错误：

```
msxml3.dll error '80072f06'
The host name in the certificate is invalid or does not match 
```

我无法在我尝试过的任何系统（操作系统和浏览器的各种组合）上重现该错误。

而且，我更加困惑，因为这是纯粹的服务器端代码——服务器正在从另一个 ASP 页面（在同一台服务器上）请求数据，所以我不确定客户端浏览器有什么影响。

有问题的代码非常简单：

```
 Set HTTP = Server.CreateObject("MSXML2.ServerXMLHTTP.3.0")
  URL="https://www.someserver.com/somepage.asp?id=12345"
  HTTP.Open "GET", URL, FALSE, username,password
  HTTP.SetRequestHeader "User-Agent",Request.ServerVariables("HTTP_USER_AGENT")
  HTTP.Send "" 
```

同样，这对数百名用户来说都很好——只有一个我们听说过的问题。

有问题的用户正在运行 Win7（64 位）和 IE9（如果这很重要）（因为我确实将代理设置为用户的实际代理）。但是，当我手动将代理设置为用户的确切字符串时，我仍然无法重现该问题。

有什么想法或想法吗？我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:23:55.227

您需要使用 setOption 方法和 getOption 方法，

这应该可以帮助您：

[带有自签名证书的 VBA ServerXMLHTTP https 请求](https://stackoverflow.com/questions/11573022/vba-serverxmlhttp-https-request-with-self-signed-certificate)

# visual-studio-2010 - 带有 TFS 和独家结帐的 Git

> ID：14569723
> 
> 赞同：0
> 
> 时间：2013-01-28T19:34:05.333
> 
> 标签：visual-studio-2010, visual-studio, git, version-control, tfs

我想要一些关于如何在我的计算机上本地使用 Git 以及 Visual Studio 和 TFS 服务器的建议。不幸的是，我公司的技术负责人为 TFS 设置了**独家签出**政策，因此每次有人签出文件时，其他人都无法对其进行编辑。

使这两个系统共存的正确方法是什么？我会尝试使用*Git-TF*，但我不相信签入阶段。工作流程应如下所示：

1.  克隆项目
2.  切换到 Visual Studio 的离线模式
3.  使用 Git 离线工作
4.  从 TFS 服务器获取并变基
5.  *报到？*

问题是：如果其他人已经签出了我需要更改的文件，我该如何签入我的文件？Git-TF 在签入文件时如何真正工作？

我想到的另一个没有 Git-TF 的工作流程可能如下：

1.  打开 TFS 项目
2.  切换到离线模式
3.  使用 Git 创建一个新分支
4.  在树枝上工作
5.  返回主分支，更新它
6.  专门签出我的 Git 分支上已更改的文件
7.  合并master上的分支
8.  *使用 TFS 签入（切换到在线模式后？）*

你有什么建议吗？

# postgresql - PostgreSQL - 在 Apache2 httpd.conf 中存储数据库凭据

> ID：14569724
> 
> 赞同：0
> 
> 时间：2013-01-28T19:34:06.613
> 
> 标签：postgresql, apache2, php

我有一个 PHP 应用程序需要连接到 Postgres 数据库，如果可以的话，我不想将凭据存储在 Web 树之外的配置文件中。我安装了 pgsql 模块。

我读[了这篇 SO 帖子](https://stackoverflow.com/questions/146354/setting-php-variables-in-httpd-conf)，并喜欢将它们放在 httpd.conf 中的想法

我想知道是否有人想出了一种在 httpd.conf 中存储 PostgreSQL 数据库凭据的方法。

据我所知，PostgreSQL PHP 模块没有预定义的 php.ini 指令，就像 MySQL PHP 模块一样：

[http://php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

```
php_value mysql.default.user      myusername
php_value mysql.default.password  mypassword
php_value mysql.default.host      server 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:00:49.237

您在这里有几个选择。

1.  如果可以的话，最好的选择是使用证书身份验证和客户端证书。

2.  如果可以的话，第二个最佳选择是使用 .pgpass 文件，该文件会将其存储在运行 Apache 的用户的主目录中。

3.  您的第三个选项是您可以`mod_rewrite`用来设置`PGUSER`和`PGPASSWORD`环境变量。请注意，这是非常危险的，因为服务器上的任何人都可以访问环境并了解用户名和密码。

# css - 是否有任何针对现代浏览器的 CSS 重置库？

> ID：14569725
> 
> 赞同：6
> 
> 时间：2013-01-28T19:34:09.913
> 
> 标签：css, css-reset

我的目标是只支持 IE10+，以及最流行的浏览器的最新版本。我想知道是否有针对那些忽略旧 IE 和 Moz 修复的特定浏览器的 CSS 重置。

我找不到任何东西，但也许我在谷歌上搜索时忽略了一些。当然，我计划创建自己的，如果有可以使用的库，我只是不想重做工作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:39:48.937

HTML5 中的现代重置？

[Blue Print Framework 有一个很好的重置](http://github.com/joshuaclayton/blueprint-css)

[http://html5reset.org/](http://html5reset.org/)

然后是 YUI， [http://code.google.com/p/reset5/](http://code.google.com/p/reset5/) ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:43:25.673

CSS 基础和重置旨在应用于您使用的所有 HTML 元素，以便浏览器无需使用其默认样式即可在您的页面上呈现任何内容。[* 在 HTML5中删除](http://dev.w3.org/html5/html4-differences/#obsolete-elements)了一些元素，因此如果有任何元素，您可以从重置中删除这些元素，但这可能会过度优化。对于它的价值，YUI 3 CSS 基础和重置帐户非常适合现代浏览器。

编辑：

*   更正：它们已被标记为过时；IE10 等兼容的浏览器仍然需要支持它们，因此除非您确定您的页面/应用程序永远不会使用它们中的任何一个，否则不应将它们从您的基础/重置中删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:52:40.747

[Normalize](http://necolas.github.com/normalize.css/)作为 CSS 重置的替代方案值得一看。它不是重置所有样式，而是针对需要更改以在较小文件大小的浏览器中为您提供理智、一致的结果的样式。

这意味着没有太多样式可以使您的开发工具调试混乱。它还修复了一些常见的错误。这是一个维护良好的主流项目，专注于现代（ie8+）浏览器，并被一些知名网站使用。

在此处阅读[更多相关信息](http://nicolasgallagher.com/about-normalize-css/)。

# android - 在android listView中仅将按钮添加到一行

> ID：14569726
> 
> 赞同：0
> 
> 时间：2013-01-28T19:34:11.950
> 
> 标签：android, android-listview, android-button, android-adapter

我正在尝试在我的 listView 中间添加一个按钮。理想情况下，该按钮将拆分 listView，然后它将继续，但如果这不可能，我可以在 listView 的一行内使用一个按钮。例如。我的列表视图将有第一行（图像+文本）、第二行（图像+文本）、按钮，然后继续列表视图。

我写了以下代码。这会在 listView 的一行中添加一个按钮，但同时它也会在我的 listView 中的每一行中添加一个空按钮（带有现在文本的按钮）。此外，中心的重力设置不起作用。

我的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

     <ImageView android:id="@+id/imgUserIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginRight="10dp"
        android:layout_marginTop="5dp"
        android:gravity="center_vertical"
        android:scaleType="fitStart" />

     <Button
         android:id="@+id/buttonShowHide"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:gravity="center"
         android:text="@string/showHide" />

     <TextView android:id="@+id/txtTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp" 
                    android:layout_marginTop="5dp"
            />

</LinearLayout> 
```

我的适配器

```
public class UserAdapter extends ArrayAdapter<UserAccountData> {
    Context context;
    int layoutResourceId;
    User data[] = null;

    public UserAdapter(Context context, int layoutResourceId,
            UserAccountData[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        UserAccountDataHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new UserAccountDataHolder();
            holder.imgIcon = (ImageView) row.findViewById(R.id.imgUserIcon);
            holder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);
            holder.showHide = (Button) row.findViewById(R.id.buttonShowHide);

            row.setTag(holder);
        } else {
            holder = (UserHolder) row.getTag();
        }

        User user = data[position];
        holder.txtTitle.setText(user.title);    
        holder.imgIcon.setImageResource(user.icon);
        holder.showHide.setText(user.buttonName);
        return row;
    }

    static class UserHolder {
        ImageView imgIcon;
        TextView txtTitle;
        Button showHide;    
    }
} 
```

该行的我的 Java 对象。我创建了两个构造函数，一个用于按钮，一个用于图像和文本。

```
public class UserAccountData {
    public int icon;
    public String type;
    public String title;
    public CharSequence buttonName;
    public UserAccountData(){
        super();
    }
    // for image and text
    public UserAccountData(int icon, String title, String type) {
        super();
        this.icon = icon;
        this.title = title;
        this.type = type;
    }
    // for button
    public UserData(CharSequence buttonName, String type) {
        super();
        this.buttonName = buttonName;
        this.type = type;
    }

    public void setType(String type){
        this.type = type;
    }
} 
```

在我的活动中，我将以下两行添加到数组中，稍后我的适配器将使用它来创建 listView（我传递给它的 ArrayList 被更改为数组）

```
user_data.add(new UserAccountData(icon, "title,"type"));
user_data.add(new UserAccountData("show Password","button")); 
```

a) 有没有办法拆分 listView 和中间并添加一个按钮？并继续相同的listView？因为我当前的解决方案试图在一行中添加一个按钮。

b）任何想法为什么我实际上也在图标中添加一个空按钮，标题类型行？我在实际的 listView 上得到图标、标题、空按钮

非常感谢你

更新：找到两个博客 [http://logc.at/2011/10/10/handling-listviews-with-multiple-row-types/](http://logc.at/2011/10/10/handling-listviews-with-multiple-row-types/) 和 [http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296) ，但仍然不没有运气。将不胜感激一些更深入的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:45:35.297

> 有没有办法拆分 listView 和中间并添加一个按钮？并继续相同的listView？因为我当前的解决方案试图在一行中添加一个按钮。

如果我理解你的问题，你想要类似的东西：

> 我的列表视图将具有：
> 
> *   图片+文字
> *   图片+文字
> *   按钮
> *   图片+文字
> 
> ETC...

`getViewTypeCount()`如果您覆盖和 ，您可以拥有不止一种类型的行布局`getItemViewType()`。

*   `getViewTypeCount()`应该返回类型的数量，在本例中为 2。
*   `getItemViewType(int position)`将返回该行`position`所在的类型，在本例中为 0 或 1。

* * *

**添加**

> 我真的不知道如何区分图像文本行和按钮。我试图找到一种方法来查看我的图像是否为空（使用第二个构造函数），但这似乎不起作用

这听起来是个不错的方法，但由于`icon`它`int`永远不会是`null`，因此未初始化整数的默认值为 0。试试：

```
@Override
public int getItemViewType(int position) {
    UserAccountData data = getItem(position);
    if(data.icon == 0)
        return 1;
    return 0;

    // The same thing in one line:
    //return getItem(position).icon == 0 ? 1 : 0;
} 
```

# asp.net - jqGrid ASP.NET 父行选择和子编辑问题

> ID：14569730
> 
> 赞同：0
> 
> 时间：2013-01-28T19:34:19.240
> 
> 标签：asp.net, jqgrid, jqgrid-asp.net

我第一次尝试使用 jqGrid ASP.NET，但在我的表单上正确使用父子网格时遇到了问题。

**场景：**在我的表单上，我有两个网格，一个是显示产品信息的父网格，另一个是用于编辑父行中产品价格集合的子网格。当用户单击父行中的加号时，将处理 OnDataRequesting 事件，并使用该产品的价格加载子网格。当用户单击子网格中的价格时，我使用 ClientSideEvents RowSelect 和服务器端 RowEditing 事件来执行内联编辑。

所有这些设置起来都很简单，而且效果很好。我遇到的问题是我希望父网格中的选定行充当页面其余部分的上下文，即页面的其余部分显示与所选产品相关的信息（图表、图形、 ETC）。为此，我为 OnRowSelecting 事件设置了一个事件处理程序，然后从事件 args 中捕获 RowKey。这很好用。但是......设置该处理程序的意外副作用是，一旦用户在子网格中选择一行进行编辑，OnRowSelecting 事件会在父网格中触发，页面回发，并且当页面重新加载子网格时关闭并且尝试的编辑被阻止。

我想知道的是，是否有任何内置方法可以通过客户端 jqGrid 库或 Trirand.Web 库来处理这种情况？或者我是否需要编写一些自定义脚本来异步发送选定的父行，或者可能捕获展开的子网格并在回发完成后尝试重新打开它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:13:25.753

我想我会在这里刷掉风滚草，并注入我最终从 Trirand 的支持中得到的答案。截至撰写本文时，您无法执行此操作。如果您处理 OnRowSelecting 事件，则您不能使用可编辑的子网格，因为他们构建它是为了在您选择子网格中的一行时专门触发父级的 OnRowSelecting 事件。

# ruby-on-rails - 与变量的关系条件

> ID：14569732
> 
> 赞同：2
> 
> 时间：2013-01-28T19:34:20.600
> 
> 标签：ruby-on-rails, rails-activerecord

我有以下型号：

```
class Publication < ActiveRecord::Base
  has_many :reviews
  has_many :users, :through => :owned_publications
  has_many :owned_publications
end

class User < ActiveRecord::Base
  has_many :publications, :through => :owned_publications
  has_many :owned_publications
end

class OwnedPublication < ActiveRecord::Base
  belongs_to :publication
  belongs_to :user
  has_one :review, :conditions => "user_id = #{self.user.id} AND publication_id = #{self.publication.id}"
end 
```

在第三个模型中，我试图用一对变量设置一个条件。语法似乎有效，只是 self 不是 OwnedPublication 的实例。是否可以获取 OwnedPublication 的当前实例并将其置于条件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:37:58.823

该解决方案需要使用 :through 和 :source 选项，以及 proc 调用：

```
has_one :review, :through => :publication, :source => :reviews,
  :conditions => proc { ["user_id = ?", self.user_id] } 
```

Proc 是将动态变量传递给 ActiveRecord 关联条件的技巧，至少从 Rails 3.0 开始。简单地调用：

```
has_one :conditions => proc { ["publication_id = ? AND user_id = ?",
  self.publication_id, self.user_id] } 
```

不过，这行不通。这是因为该关联最终会在评论表中搜索“reviews.owned_publication_id”列，该列不存在。相反，您可以使用发布的 :reviews 关联作为来源，通过发布找到正确的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:40:59.103

我认为您最好的选择是让评论记录属于 OwnedPublication，并设置您的发布模型以通过以下方法获取评论：

```
def reviews
  review_objects = [] 
  owned_publications.each do |op|
    review_objects << op
  end
  review_objects
end 
```

如果您使用子查询来获取信息，这可能是一种更有效的方式，但它消除了具有不必要关联的概念。

# jasper-reports - 每行有多个系列的图表

> ID：14569733
> 
> 赞同：3
> 
> 时间：2013-01-28T19:34:20.353
> 
> 标签：jasper-reports, ireport

我正在尝试使用此表*制作 iReport*图表

```
name|totalcalls|handled|abandoned|rejected

customerservice|300|100|100|100

itsupport|500|300|100|100 
```

这个想法是在这种情况下应该有 2 个图表，这很容易通过将图表放入详细信息行来解决。

但我无法弄清楚如何让*iReport*将最后 3 列（已处理、已放弃、已拒绝）视为不同的系列。

理想情况下，我想做一个如下所示的堆叠条形图：

```
customerservice|-100-|-100-|-100-

itsupport|---300---|-100-|100 
```

我不知道如何使这项工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T12:42:05.147

为此，您可以使用堆积条形图。打开 iReport 并将图表元素从调色板拖放到报表设计器中。在向导中选择*Stacked Bar*，然后单击*Finish*。

右键单击图表并选择*Chart Data* > *Details*：

*   点击*添加*，输入系列表达式：`"Handled"`，类别表达式：`$F{name}`，值表达式：`$F{handled}`，点击*确定*
*   *添加*，系列表达式：`"Abandoned"`，类别表达式：`$F{name}`，值表达式：`$F{abandoned}`，*确定*
*   *添加*，系列表达式：`"Rejected"`，类别表达式：`$F{name}`，值表达式：`$F{rejected}`，*确定*

然后单击*关闭*。现在在报表设计器中选择图表对象，并在属性面板中将*Orientation*更改为Horizo *​​ntal*。

我将图表放入汇总带中，将两行数据保存在一个图表中。如果需要，您可以将相同的设置应用于详细信息带中配置的图表以获得类似的输出。

![报告预览](../Images/d756220431841e3c26a92b3e35e0e768.png)

我还附上了 JRXML 以供进一步参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report7" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="42d0d6ab-85f6-496b-8e61-c3d7588cfd8e">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[select  'customerservice' as name, 300 as totalcalls, 100 as handled, 100 as abandoned, 100 as rejected
union select 'itsupport', 500, 300, 100, 100]]>
    </queryString>
    <field name="name" class="java.lang.String"/>
    <field name="totalcalls" class="java.lang.Long"/>
    <field name="handled" class="java.lang.Long"/>
    <field name="abandoned" class="java.lang.Long"/>
    <field name="rejected" class="java.lang.Long"/>
    <summary>
        <band height="92">
            <stackedBarChart>
                <chart>
                    <reportElement uuid="f0bfeda6-003e-40c0-8d75-0c61bc620978" x="0" y="0" width="555" height="92"/>
                    <chartTitle/>
                    <chartSubtitle/>
                    <chartLegend/>
                </chart>
                <categoryDataset>
                    <categorySeries>
                        <seriesExpression><![CDATA["Handled"]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{name}]]></categoryExpression>
                        <valueExpression><![CDATA[$F{handled}]]></valueExpression>
                    </categorySeries>
                    <categorySeries>
                        <seriesExpression><![CDATA["Abandoned"]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{name}]]></categoryExpression>
                        <valueExpression><![CDATA[$F{abandoned}]]></valueExpression>
                    </categorySeries>
                    <categorySeries>
                        <seriesExpression><![CDATA["Rejected"]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{name}]]></categoryExpression>
                        <valueExpression><![CDATA[$F{rejected}]]></valueExpression>
                    </categorySeries>
                </categoryDataset>
                <barPlot>
                    <plot orientation="Horizontal"/>
                    <itemLabel/>
                </barPlot>
            </stackedBarChart>
        </band>
    </summary>
</jasperReport> 
```

# java - 无法从外部库加载主类清单属性

> ID：14569734
> 
> 赞同：0
> 
> 时间：2013-01-28T19:34:21.827
> 
> 标签：java

我正在使用 postgresql 驱动程序通过 java 连接到 sql server。
它包含在我从那里网站下载的 jar 文件中。

```
java -classpath /home/asdf/myProgram;/home/asdf/myProgram/lib/postgresql-9.2-002.jdbc4.jar myMainClass 
```

导致错误：无法从 /home/asdf/myProgram/lib/postgresql-9.2-002.jdbc4.jar 加载主类清单属性

主类在 /home/asdf/myProgram/myMainClas.class

在签入 postgresql-9.2-002.jdbc4.jar 之前，我如何让 java 进行检查

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:42:34.153

从路径“/home/”判断，您使用的是 Linux。分号结束您当前的命令并开始一个新命令。

因此，您正在有效地输入：

```
java -classpath /home/asdf/myProgram
/home/asdf/myProgram/lib/postgresql-9.2-002.jdbc4.jar myMainClass 
```

这可能意味着您正在运行 jexec 服务，该服务正在尝试运行 postgres jar。

改用冒号，或者反斜杠冒号，如下所示：

```
java -classpath /home/asdf/myProgram\:/home/asdf/myProgram/lib/postgresql-9.2-002.jdbc4.jar myMainClass 
```

# jquery - Why is setting my widget option evaluating to an object instead of being passed as a key and value?

> ID：14569742
> 
> 赞同：0
> 
> 时间：2013-01-28T19:35:00.653
> 
> 标签：jquery, jquery-ui, jquery-plugins

I've created (or am trying to create) a jQuery UI widget using the widget factory and have set up my `_setOptions` method this way as found here: [http://wiki.jqueryui.com/w/page/12137708/How%20to%20use%20jQuery%20UI%](http://wiki.jqueryui.com/w/page/12137708/How%20to%20use%20jQuery%20UI%)

```
_setOptions: function (key, value) {
    if (this.options[key] !== value) {
        this.options[key] = value;
        this._update();
    }
}, 
```

This is my options object:

```
 options: {
            title: 'Legend',
            colors: ['#0000CC', '#6600CC', '#009900', '#990000', '#6600FF', '#CCFF00', '#FF9900', '#000000', '#FFFFFF', '#00FF00'],
            items: undefined
        } 
```

However, when I pass in a new title value for my legend widget, I am getting an object for `key` instead of a `key` and `value` in `_setOptions`. `value` comes in undefined, for the record.

```
$('#myLegend').legend('option', 'title', 'New Title'); 
```

![The key object](../Images/6154553e1f05be1d449733f6fa213a39.png)

My expectations were this:

```
key==='title'
value==='New Title' 
```

If there some common misconception I'm missing or can anyone think of why this would be happening?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:43:17.137

该`_setOptions`方法确实使用第一个参数的对象调用，它包含所有更改的选项的键/值对。

[http://api.jqueryui.com/jQuery.widget/#method-_setOptions](http://api.jqueryui.com/jQuery.widget/#method-_setOptions)

你可能打算使用的是`_setOption`而不是`_setOptions`

# google-apps-script - Script to copy and sort form submission data

> ID：14569747
> 
> 赞同：1
> 
> 时间：2013-01-28T19:35:13.987
> 
> 标签：google-apps-script, google-sheets, google-forms

I'm using Google forms to create a spreadsheet that I want sorted automatically by datestamp Z-A. The sorting will be triggered whenever anyone fills out a form.

I think the way to do it is:

1.  ask if there is a "copy of Form responses" on spreadsheet...
    *   if yes, clear all contents...
    *   else...
2.  copy spreadsheet to "copy of form responses"...
3.  sort according to timestamp

Below is what I've cobbled so far. It works only the first time a response is recorded. I'm not a coder so any help is appreciated. If someone could also point me to a list of commands with basic syntax I'd be grateful.

```
function CopySheet() {
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var msheet = ss.getSheetByName("Form Responses"); 
    msheet.copyTo(ss);

    var CopySheet = ss.getSheetByName("Copy of Form Responses"); 
    CopySheet.sort(1,   false); // here 1 is for column no. 1 that 
               // is "Column A" and true is for ascending, make it 
               // false if you want descending.
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T04:01:03.620

您可以在没有脚本的情况下通过`QUERY()`在副本表中使用来完成此操作。例如，如果您将此函数放在副本表的单元格 A1 中，并将密钥替换为您的表单响应电子表格，您最终将得到一个反向时间戳排序的响应副本：

```
=Query(ImportRange(spreadsheet_key,"Form Responses!A:Z"), "select * order by Col1 desc") 
```

此数据将定期刷新（约 5 分钟），因此它将反映新的表单提交，但不是实时的。

注意：当`ImportRange()`用作 的源数据时`Query`，您需要使用`ColN`符号来引用查询字符串中的列。

或者，您可以在接收表单提交的电子表格中生成表单提交触发函数，并将排序的表单响应复制到您的副本表。下面的函数就是这样做的。您需要将其设置为电子表格表单提交事件的触发功能。有关如何测试此类功能的信息，请参阅[如何在 GAS 中测试触发功能？](https://stackoverflow.com/questions/16089041/how-can-i-test-a-trigger-function-in-gas/16089067#16089067).

```
function copyFormSubmissions(e) {
  var sourceSheet = e.range.getSheet();
  var data = sourceSheet.getDataRange().getValues();
  var headers = data.splice(0,1)[0]; // remove headers from data
  data.sort(reverseTimestampOrder);  // Sort 2d array
  data.splice(0,0,headers);          // replace headers

  var destId = "--copy-sheet-ID--";
  var destSheet = SpreadsheetApp.openById(destId).getSheetByName('Sheet1');
  destSheet.clear();
  destSheet.getRange(1,1,data.length,data[0].length).setValues(data);
};

function reverseTimestampOrder(a,b) {
  // Timestamp is in first (zero-th) column
  return (b[0]-a[0]);
} 
```

> 如果有人还可以向我指出具有基本语法的命令列表，我将不胜感激。

Google Apps Script API 类和方法参考在[这里](https://developers.google.com/apps-script/reference)。如果您正在学习，请尝试教程（同一个地方），我建议您通过某种形式的电子学习来熟悉 Javascript - CodeAcademy.com 是一个很好的起点，因为它介绍了所有的语言结构，而不是专注于网页开发，使其与 Googls Apps Script 非常相关。

# r - multiple ifelse statements

> ID：14569748
> 
> 赞同：0
> 
> 时间：2013-01-28T19:35:14.110
> 
> 标签：r, if-statement, conditional-statements

I am attempting to assign values to a column based on conditional statements but the POSIXct format seems to be throwing me off. I have a column of times and would like to assign them to day/night/dawn/dusk with something like this:

```
if(t40636$time>t40636$dawn.b&t40636$time<t40636$dawn.e){
  t40636$time.periods=1
} else {
  if(t40636$time>t40636$mid.day.b&t40636$time<t40636$mid.day.e){
    t40636$time.periods=2
  } else {
    if(t40636$time>t40636$dusk.b&t40636$time<t40636$dusk.e){
      t40636$time.periods=3
    } else {
      if(t40636$time>t40636$mid.night.b&t40636$time<t40636$mid.night.e){
        t40636$time.periods=4
        } else {
          t40636$time.periods=0
        }
    }
  }
} 
```

However, this code does not work because of the format of the columns and yields the matrix seen below (only 0s in the time.periods column).

```
 Date Temp..ºC. Depth..m. Light  time time.at.depth dawn.b dawn.e dusk.b
1 2012-06-19     14.47     -21.5   255 15:32             0  01:42  04:42  19:13
2 2012-06-19     16.99     -20.2   255 15:37             5  01:42  04:42  19:13
3 2012-06-19     12.60     -18.8   255 15:41             4  01:42  04:42  19:13
4 2012-06-19     16.36     -17.5   255 15:46             5  01:42  04:42  19:13
5 2012-06-19     16.36     -13.4   255 15:51             5  01:42  04:42  19:13
6 2012-06-19     17.94      -2.7   255 15:56             5  01:42  04:42  19:13
  dusk.e mid.day.b mid.day.e mid.night.b mid.night.e time.periods
1  22:13     10:27     13:27       22:27       01:27            0
2  22:13     10:27     13:27       22:27       01:27            0
3  22:13     10:27     13:27       22:27       01:27            0
4  22:13     10:27     13:27       22:27       01:27            0
5  22:13     10:27     13:27       22:27       01:27            0
6  22:13     10:27     13:27       22:27       01:27            0 
```

ifelse yields something close to what I want but I can't do multiple statements with it. Any suggestions are greatly appreciated.

```
t40636$time.periods=ifelse(t40636$time>t40636$dawn.b&t40636$time<t40636$dawn.e,1,0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:41:39.897

“修复我的多个 if-else 语句”的答案几乎总是“不要使用多个 if-else 结构”。

R 语言有一个很好的`switch`功能，它的帮助页面有一些很好的例子。

# loops - What's is the name for the construct $myVar | % { ...... ...... }

> ID：14569752
> 
> 赞同：0
> 
> 时间：2013-01-28T19:35:19.903
> 
> 标签：loops, powershell, scripting

All the loop constructs have a name, like "*foreach loop*" or "*do loop*" etc. How should we refer to the following construct:

```
$myVar | % {
    ......
    ......
} 
```

Please, do address this query for its i

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:40:17.177

'%' 是 Foreach-Object cmdlet 的别名，基本上它是一个循环，但更多的是为管道设计的 foreach 循环。有关详细信息，请参阅[about_Foreach](http://technet.microsoft.com/en-us/library/hh847816.aspx)主题。

# angularjs - Angular Directive: Unable to bind to model properties

> ID：14569753
> 
> 赞同：1
> 
> 时间：2013-01-28T19:35:20.277
> 
> 标签：angularjs, angularjs-directive

I'm using Angular to create a simple directive. I'd like to display the model properties x and y as attributes in the directive. However, instead of the values x and y in scope.textItems, I only get 'item.x' and 'item.y' as the values.

Can one of you tell me why?

thanks!

```
<div id="b-main-container" class="b-main-container" ng-app="editorApp" ng-controller="EditorCtrl">
  <div class="b-grid">
    <div id="b-main" class="b-main g1080">

      <b-text-el ng-repeat="item in textItems" x="item.x" y="item.y"">
      </b-text-el>

   </div><!-- end b-main --> 
        </div>
</div><!-- end grid -->

var myComponent = angular.module('components', []);
myComponent.directive("bTextEl", function () {
    return {
        restrict:'E',
        scope: {  },
        replace: false,
        template: '<span>text</span>',
        compile: function compile(tElement, tAttrs, transclude) {
          return {
            pre: function preLink(scope, iElement, iAttrs, controller) { console.log('here 1'); },
            post: function linkFn(scope, element, attrs) {
                $(element).draggable();

            }
          }
        }
    };
});

var myEditorApp = angular.module('editorApp', ['components']);

function EditorCtrl($scope) {
  $scope.textItems = [
        {"id": "TextItem 1","x":"50","y":"50"},
        {"id": "TextItem 2","x":"100","y":"100"}
  ];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:58:57.757

您想显示指令中的值`template`吗？如果是这样：

HTML：

```
<b-text-el ng-repeat="item in textItems" x="{{item.x}}" y="{{item.y}}"> 
```

指示：

```
return {
    restrict:'E',
    scope: { x: '@', y: '@' },
    replace: false,
    template: '<span>text x={{x}} y={{y}}</span>',
    .... 
```

输出：

```
text x=50 y=50text x=100 y=100 
```

[小提琴](http://jsfiddle.net/mrajcok/6QWwb/)。

另请注意，它`element.draggable();`应该可以工作（而不是`$(element).draggable();`），因为 element 应该已经是一个包装的 jQuery 元素（如果您在包含 Angular 之前包含了 jQuery）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:27:18.750

您需要 $eval 传递给 x 和 y 属性的内容，或者您​​需要 $watch 它们。根据您的目标（以及您传递的内容）：

```
 post: function linkFn(scope, element, attrs) {
                //this will get their values initially
                var x = scope.$eval(attrs.x),
                    y = scope.$eval(attrs.y);

                //this will watch for their values to change
                // (which also happens initially)
                scope.$watch(attrs.x, function(newX, oldX) {
                     // do something with x's new value.
                });

                $(element).draggable();

            } 
```

# x509 - adding certificate to remote x509store miss the private key

> ID：14569756
> 
> 赞同：2
> 
> 时间：2013-01-28T19:35:25.817
> 
> 标签：x509, x509certificate2

The task is to import certificate to remote server (win2008 server web edition/ IIS7).

certificate is in .pfx file.

after installation I noticed the private key saved on the client server (from which script is running) (in C:\ProgramData\Microsoft\Crypto\RSA\MachineKeys), but not on destination server (where certificate is installed). Due this certificate can't be used for site binding with error:

> A specified logon session does not exist. It may be already have been terminated.

So. I can see certificate is installed on the remote server but private key is not. What I did wrong ?

```
Dim pathToPFXFile As String = "\\CertServer\e$\tmp\CPVanitySSLInstall.pfx" 
    Dim passwordForPFXFile As String = "xxx"
    Dim WinVanitySSLTable As Data.DataTable
    Dim cert, cert1 As X509Certificate2
    Dim certs As X509Certificate2Collection
    Dim store As X509Store

    cert = New X509Certificate2(pathToPFXFile, passwordForPFXFile, X509KeyStorageFlags.MachineKeySet Or X509KeyStorageFlags.PersistKeySet Or X509KeyStorageFlags.Exportable)
    store = New X509Store("\\DestinationServerName\My", StoreLocation.LocalMachine)
    If (cert IsNot Nothing) Then
        store.Open(OpenFlags.MaxAllowed)
        store.Add(cert)
        store.Close()
    End If 
```

BTW when I run this script on destination server itself it works completely as expected. Except of this i checked access to machine keys store on remote server \DestinationServerName\C$\ProgramData\Microsoft\Crypto\RSA\MachineKeys and it is OK.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-09T14:58:53.597

您可以使用 Windows 中的证书管理器来验证证书是否具有关联的私钥。在列表中选择证书，然后单击打开或查看图标，如果其中有一个小密钥，您有一个私钥。如果它确实有私钥，请确保 iis 或您的 asp.net 应用程序有权访问它。您可以在 C:\Users\All Users\Microsoft\Crypto\RSA\MachineKeys 找到私钥文件以检查权限。

# solr - solr NGramFilterFactory 不适用于数字

> ID：14569757
> 
> 赞同：1
> 
> 时间：2013-01-28T19:35:25.970
> 
> 标签：solr, lucene, n-gram

我不知道这是错误还是功能，但 Solr NGramFilterFactory 不适用于数字。

这是我的字段类型：

```
<fieldType name="phone_test" class="solr.TextField" positionIncrementGap="100">
   <analyzer type="index">
      <tokenizer class="solr.LowerCaseTokenizerFactory"/>
       <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="30" side="front" />
   </analyzer>
   <analyzer type="query">
      <tokenizer class="solr.LowerCaseTokenizerFactory"/>
   </analyzer>
</fieldType> 
```

当我在 Solr 管理界面中使用分析器并输入诸如“业务”之类的单词时，它工作正常，但是当我写数字（例如 12345678）时，它不起作用。

我想要的是搜索部分电话号码。如果我有 123456789 作为电话号码，并且我搜索 456 或 6789，我应该会成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:53:40.620

[LowerCaseFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.LowerCaseTokenizerFactory)的定义如下。

> 通过小写所有字母并删除非字母来创建标记。

它正在删除您的数字，因为它们是非字母。我建议使用[KeywordTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeywordTokenizerFactory)或[StandardTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.StandardTokenizerFactory)。因为这些应该正确处理您的数字输入。

# javascript - Internet Explorer 的 nvd3.js 渲染解决方案

> ID：14569763
> 
> 赞同：4
> 
> 时间：2013-01-28T19:35:35.877
> 
> 标签：javascript, internet-explorer, d3.js, nvd3.js

我正在考虑实现一些东西来帮助在 Internet Explorer 中显示渲染的 SVG 图（使用 nvd3.js 生成）

这样做的复杂性是我没有使用对 raphael.js 有一些支持的 d3.js（通过 D34raphael）。Raphael.js 基本上采用 svg 元素并在其包装函数中围绕它们绘制路径以生成 vml 或 svg。有些人报告说能够完成所有 d3 逻辑，然后在 raphael 语句中封装实际的 svg 绘图。

但是 NVD3.js 在代码周围的很多地方生成 svg 元素，而不是一个地方。

我正在研究涉及对我的 php 服务器运行 ajax 调用的解决方案，该调用将读取呈现的 html 页面，提取呈现的 nvd3 svg，并在其位置创建图像。在我进入那个兔子洞之前，我不确定这有多实用。

SVGweb 似乎并没有真正起作用，Chrome Frame 并不是一个真正的选择，所以我不确定其他人使用什么。任何见解表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:36:45.203

尝试使用 r2d3。它是 IE 的一个库，使用与 D3 完全相同的语法。

[https://github.com/mhemesath/r2d3](https://github.com/mhemesath/r2d3)

# java - Spring MVC Json 解析限制的最佳解决方法

> ID：14569767
> 
> 赞同：4
> 
> 时间：2013-01-28T19:35:49.463
> 
> 标签：java, json, spring, spring-mvc

我有一个使用 Spring、Hibernate 的项目，并且有返回 JSON 的控制器。自然，我的模型包含列表等使用 JPA 注释来定义休眠关系，因此，例如，我有用户，其中包含他们拥有的一组挑战，同样挑战包含拥有它的用户。

不幸的是，我的 JSON 中嵌入的集合似乎有很多问题。

例如，通过这种设置（用户拥有挑战，挑战拥有所有者），我可以很好地返回挑战。我可以很好地返回一个用户。但是，当我尝试返回挑战列表时，一切都崩溃了！我从 Jmeter 测试中收到以下错误：

错误 500 服务器错误

我相信这意味着 Jackson json 解析器在设置 json 时遇到了问题。我相信这一点，因为如果我使用 @JsonIgnoreProperties({"challengesOwned"}) 那么我可以很好地返回挑战列表，因为每个单独的挑战对象不再具有嵌入其中的列表。

这对我来说似乎很奇怪。Jackson 真的不能在 JSON 中映射简单的嵌入式列表吗？我也遇到了一个大问题，因为我有一个使用 User 作为其键的 Map ...而且似乎根本不可能将 JSON 映射的键定义为嵌入式对象！

有人对我的问题有建议吗？我是否必须手动定义一些 Json 映射？有没有我不知道的简单解决方案？

编辑：

虽然 j0ntech 所说的似乎是真的，但事实证明这并不是故事的全部。似乎当 Spring 使用 Jackson 将我的一个休眠实体序列化为它的 JSON 版本时，休眠试图延迟加载该实体的属性之一，但由于该实体当时不在其事务中（“在”控制器中） )，它导致了一个异常，它刚刚被吞没了。

所以实际上有两个问题。我通过尝试手动使用 Jackson 在实际返回它之前序列化我返回的对象来解决这个问题。这样我实际上得到了另一个问题的堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:26:41.433

您可能有一个递归循环（根据 DwB 的评论）：用户包含一个挑战列表，每个挑战都包含一个用户，其中包含一个挑战列表等等。解析器（或您的整个服务器）不喜欢这样。您应该使用注释[JsonManagedReference](http://jackson.codehaus.org/1.6.3/javadoc/org/codehaus/jackson/annotate/JsonManagedReference.html)和[JsonBackReference](http://jackson.codehaus.org/1.6.3/javadoc/org/codehaus/jackson/annotate/JsonBackReference.html)。

[您可以在此处](http://wiki.fasterxml.com/JacksonFeatureBiDirReferences)和[此处](http://www.javacodegeeks.com/2012/09/json-jackson-to-rescue.html)阅读有关如何使用这些注释的信息。我在自己的一些项目中使用过它们，如果正确实施，它们会很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:47:01.170

您可以尝试使用 flexjson（由 Spring Roo 使用）或 gson（由 google 开发）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:50:08.177

用列表解析 GSON 似乎很简单

[http://risabhsays.wordpress.com/2011/02/24/parsing-list-of-json-objects-with-gson/](http://rishabhsays.wordpress.com/2011/02/24/parsing-list-of-json-objects-with-gson/)

# c++ - 测试左移运算符的存在

> ID：14569768
> 
> 赞同：5
> 
> 时间：2013-01-28T19:35:50.037
> 
> 标签：c++, boost, stl, typetraits

我正在尝试找到一个工作类型特征来检测给定类型是否具有用于 a 的左移运算符重载`std::ostream`（例如可与`std::cout`or互操作`boost::lexical_cast`）。`boost::has_left_shift`除了类型是 POD 或类型的 STL 容器的情况外，我已经取得了成功`std::string`。我怀疑这与 STL 类型或 operator<< 函数的特化有关。使用有效的左移运算符一般识别类型的正确方法是什么`std::ostream`？如果这不可行，是否有单独的方法来检测 POD 或 std::string 类型的 STL 容器上的左移运算符的过载？

下面的代码显示了我当前正在使用的代码，并演示了如何`boost::has_left_shift`无法检测到重载`operator<<`函数，即使它在下一行被调用。该程序在 GCC 4.5.1 或更高版本和 clang 3.1 中编译和工作。

为了规避明显的反应，我尝试将模板化`operator<<`函数替换为用于各种类型的特定版本，但无济于事。我还尝试了这两种类型的 const-ness 和 l-value/r-value 说明符的各种组合（各种调整使我看到编译器消息指向`operator<<`带有 r-value ostream 的重载）。我也尝试过实现我自己的 trait，它充其量给我的结果与`boost::has_left_shift`.

提前感谢您提供的任何帮助。如果能详细解释为什么会发生这种行为以及解决方案的工作原理，我也将不胜感激。我正在扩展我的模板知识的极限，并且很想知道为什么这不能像我想象的那样工作。

```
#include <string>
#include <vector>
#include <iostream>
#include <boost/lexical_cast.hpp>
#include <boost/type_traits/has_left_shift.hpp>

using namespace std;

struct Point {
    int x;
    int y;
    Point(int x, int y) : x(x), y(y) {}
    string getStr() const { return "("+boost::lexical_cast<string>(x)+","+boost::lexical_cast<string>(y)+")"; }
};

ostream& operator<<(ostream& stream, const Point& p)
{
    stream << p.getStr();
    return stream;
}

template <typename T>
ostream& operator<<(ostream& stream, const std::vector<T>& v)
{
    stream << "[";
    for(auto it = v.begin(); it != v.end(); ++it)
    {
        if(it != v.begin())
            stream << ", ";
        stream << *it;
    }
    stream << "]";
    return stream;
}

template <typename T>
void print(const string& name, T& t)
{
    cout << name << " has left shift = " << boost::has_left_shift<ostream , T>::value << endl;
    cout << "t = " << t << endl << endl;
}

int main()
{
    cout << boolalpha;

    int i = 1;
    print("int", i);

    string s = "asdf";
    print("std::string", s);

    Point p(2,3);
    print("Point", p);

    vector<int> vi({1, 2, 3});
    print("std::vector<int>", vi);

    vector<string> vs({"x", "y", "z"});
    print("std::vector<std::string>", vs);

    vector<Point> vp({Point(1,2), Point(3,4), Point(5,6)});
    print("std::vector<Point>", vp);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T20:31:28.217

它不起作用的原因是 C++ 有时有令人惊讶的（但动机良好的）解决函数调用的规则。特别是，名称查找首先在调用发生的名称空间和参数的名称空间（对于 UDT）中执行：如果找到具有匹配名称（或匹配的内置运算符）的函数，则选择它（或者如果找到多个，则执行重载决议）。

**只有在 arguments 的命名空间中没有找到具有匹配名称的函数时**，才会检查父命名空间。如果找到具有匹配名称的函数但不能用于解析调用，或者如果调用不明确，编译器将不会继续在父命名空间中查找以希望找到更好或更明确的匹配：相反，它会得出没有办法解决呼叫的结论。

[Stephan T. Lavavej 的演讲](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-1-of-n)和[Herb Sutter 的这篇旧文章](http://www.gotw.ca/publications/mill08.htm)很好地解释了这种机制。

在您的情况下，检查此运算符是否存在的函数位于`boost`命名空间中。您的参数要么来自`std`命名空间 ( `ostream`, `string`, `vector`) 要么是 POD ( `int`)。在`std`命名空间中，存在一个**不可行**的重载`operator <<`，因此编译器不会费心在定义重载的父（全局）命名空间中查找。它将简单地得出结论，在`boost`命名空间中完成的（模拟）调用以检查是否`operator <<`已定义无法解析。

现在`boost::has_left_shift`可能有一些 SFINAE 机制来将编译错误转换为失败的替换，并将分配`false`给`value`静态变量。

**更新：**

答案的原始部分解释*了为什么*这不起作用。现在让我们看看是否有办法**解决它**。由于使用了 ADL 并且`std`命名空间包含 的不可行重载`operator <<`，*事实上*阻止了解析调用的尝试，因此可能会试图将*可行*的重载`operator <<`从全局命名空间移动到`std`命名空间中。

唉，C++ 标准**禁止**`std`扩展命名空间（如果我们要添加新的重载，我们会这样做`operator <<`） 。相反，允许的是**专门**化命名空间中定义的模板函数（除非另有说明）；但是，这在这里对我们没有帮助，因为没有模板可以通过. 此外，**函数模板不能部分特化**，这会使事情变得更加笨拙。****`std``vector<int>`****

 ******不过还有最后一种可能性：**将重载添加到调用解析发生的命名空间**。这是在 Boost.TypeTraits 机制中的某个地方。特别是，我们感兴趣的是进行调用**的命名空间的名称。**

在当前版本的库中，恰好是`boost::detail::has_left_shift_impl`，但我不确定它在不同 Boost 版本之间的*可移植性。*

但是，如果您真的需要解决方法，您可以在该命名空间中声明您的运算符：

```
namespace boost 
{ 
    namespace detail 
    { 
        namespace has_left_shift_impl
        {
            ostream& operator<<(ostream& stream, const Point& p)
            {
                stream << p.getStr();
                return stream;
            }

            template <typename T>
            std::ostream& operator<<(std::ostream& stream, const std::vector<T>& v)
            {
                stream << "[";
                for(auto it = v.begin(); it != v.end(); ++it)
                {
                    if(it != v.begin())
                        stream << ", ";
                    stream << *it;
                }
                stream << "]";
                return stream;
            }
        } 
    } 
} 
```

事情将开始奏效。

There is one *caveat* though: while this compiles and runs fine with GCC 4.7.2 with the expected output. However, Clang 3.2 seems to require the overloads to be defined in the `boost::details::has_left_shift_impl` *before* the `has_left_shift.hpp` header is included. I believe this is a bug.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T20:30:03.150

您的问题与命名空间和名称查找有关。当你使用

```
boost::has_left_shift<ostream , T>::value 
```

代码位于命名空间 boost 中。它将在那里和模板参数的命名空间中搜索，但找不到匹配的`operator<<`. 编译器不会在全局命名空间中查找，因为所涉及的类型都不存在于那里。

另一方面，`print`函数本身位于全局命名空间中，并且会看到在其上方声明的运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:29:48.630

当它调用`boost::has_left_shift<>()`该函数时，会考虑使用参数相关名称查找找到的运算符重载。您的重载是全局的，但它们的参数来自`std`命名空间，这就是为什么在参数依赖名称查找中`boost::has_left_shift<>()`找不到它们的原因。

要解决您将重载移动到`std`命名空间的问题：

```
namespace std {

ostream& operator<<(ostream& stream, const Point& p); // definition omitted.

template <typename T>
ostream& operator<<(ostream& stream, const std::vector<T>& v); // definition omitted.

} 
```

* * *

由于标准禁止在`std`命名空间中定义新的重载，因此有一种方法可以将标准或第 3 方类的自定义打印机打包到自己的命名空间中：

```
#include <vector>
#include <iostream>

namespace not_std {

// Can't directly overload operator<< for standard containers as that may cause ODR violation if
// other translation units overload these as well. Overload operator<< for a wrapper instead.

template<class Sequence>
struct SequenceWrapper
{
    Sequence* c;
    char beg, end;
};

template<class Sequence>
inline SequenceWrapper<Sequence const> as_array(Sequence const& c) {
    return {&c, '[', ']'};
}

template<class Sequence>
std::ostream& operator<<(std::ostream& s, SequenceWrapper<Sequence const> p) {
    s << p.beg;
    bool first = true;
    for(auto const& value : *p.c) {
        if(first)
            first = false;
        else
            s << ',';
        s << value;
    }
    return s << p.end;
}

} // not_std

int main() {
    std::vector<int> v{1,2,3,4};
    std::cout << not_std::as_array(v) << '\n';
} 
```******

# sublimetext2 - 如何在 Sublime Text 2 中全局配置 JSHint 选项？

> ID：14569785
> 
> 赞同：13
> 
> 时间：2013-01-28T19:36:54.833
> 
> 标签：sublimetext2, jshint

在使用 Sublime Text 2 的 JSHint 插件时，我想全局关闭特定警告。例如，“laxcomma”。

我尝试在 JSHint 的 Sublime Packages 文件夹中编辑 .jshintrc 文件，但这不起作用。

```
{
  "laxcomma": true
} 
```

添加具有相同选项的项目特定 .jshintrc 文件可以解决该特定项目的问题，但我希望这些选项是全局的。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T23:40:19.963

从 JSHint 文档页面： http: [//www.jshint.com/docs/](http://www.jshint.com/docs/)

> JSHint 将在当前工作目录中查找该文件，如果未找到，则将目录树上移一层，一直到文件系统根目录。

因此，从技术上讲，您可以将`.jshintrc`文件放在文件系统的根级别 ( `/.jshintrc`)，并且每个新项目都会默认使用这些选项。个别项目可以根据需要覆盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T13:31:25.583

如果有人在 Windows 中创建 a 时遇到问题`.jshintrc`，您可以转到*AppData\Roaming\Sublime Text 3\Packages\SublimeLinter*，例如复制`.editorconfig`、重命名和编辑它，然后将其放在您的根目录中，如@philip-walton 建议的那样。

如果您在此处编辑文件，您可能需要以*管理员*身份运行文本编辑器。

如果您尝试在此处重命名文件，您可能需要右键单击该文件，转到安全，高级，将所有者对象名称更改为自己（PC-Name\User-Name），然后将自己添加到列表中通过选择委托人的权限。

# twitter-bootstrap - 在 mouseenter 上引导轮播循环并在 mouseleave + 间隔上暂停

> ID：14569788
> 
> 赞同：1
> 
> 时间：2013-01-28T19:37:11.000
> 
> 标签：twitter-bootstrap, hover, carousel, cycle

我想让 Bootstrap Carousel 只`on:hover`在鼠标离开后循环和暂停。我正在使用默认的 Bootstrap 代码库。具有此功能的页面上将有多个轮播。

如果可能的话，我还想控制间隔速度。data-interval 属性似乎不起作用。

这段代码几乎可以工作，但只是第一次当鼠标悬停在轮播上时。第二次不工作，不控制间隔。

```
<script>
  $(document).ready(function(){
    $('.carousel').mouseenter(function() {
        $(this).carousel('cycle');
    }).mouseleave(function() {
        $(this).carousel('pause');
    });
  });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T03:11:21.463

```
<script>
$(document).ready(function(){
  $(`.carousel`).on(`mouseenter`,function() {
  $(this).carousel('cycle');
  }).on(`mouseleave`, function() {
  $(this).carousel('pause');
  });
});
</script> 
```

以防万一其他人正在寻找这个解决方案。

# ruby-on-rails - 如何在更新前获取 association_ids？

> ID：14569789
> 
> 赞同：0
> 
> 时间：2013-01-28T19:37:16.530
> 
> 标签：ruby-on-rails, redmine

我正在为 redmine 制作一个插件，我不想修改它的代码。

Redmine 有一个名为的类`Member`，其中有很多`Role`.

更新时`Member`，角色被修改。我想进行回调`after_update`，或者`around_update`我无法`role_ids`在更新之前获得。

角色 ID 正在使用 进行修改`member.role_ids =`。

我想我可以尝试覆盖其中的方法`role_ids=`，`Member`但我不确定当 Redmine 的更新可用时会产生什么影响。

RoR 3.2.11 Redmine 2.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:13:08.117

如果您有权访问`Member`该类的实例，则可以在运行时扩展它并覆盖 role_ids 方法：

```
module ExtendedMember
  def role_ids=(value)
    # do something (you can even call super)
  end
end

@member = Member.new
@member.extend ExtendedMember
@member.role_ids = [1,2,3] # will call the role_ids method of ExtendedMember

# ... 
```

请注意，您的方法仅适用于`Member`该类的这一实例！

# android - 使用 NFC 更改事件“触摸到光束”

> ID：14569791
> 
> 赞同：0
> 
> 时间：2013-01-28T19:37:17.733
> 
> 标签：android, nfc, nfc-p2p

我有一个应用程序使用 NFC 光束与其他应用程序进行通信。光束 NFC 工作。我只希望当我激活 NFC 时，屏幕不会调整大小，我只想要一个小振动来确认数据传输。这个想法可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:03:05.320

您必须编写自己的 Android Beam 实现，然后关闭 Android Beam。这可能比你想要的要多得多。Android Beam 功能内置于系统本身，因此您目前无法在人们的手机上更改它的几乎所有方面。

这包括更改文本。

# php - 使用 ISBN-13 数字查找书籍的价格

> ID：14569792
> 
> 赞同：0
> 
> 时间：2013-01-28T19:37:17.850
> 
> 标签：php, api, rest, amazon-web-services, isbn

> **可能重复：**
> [我没有通过亚马逊产品广告 API 获得价格](https://stackoverflow.com/questions/8304757/i-dont-get-prices-with-amazon-product-advertising-api)

我有一个包含 230 个 ISBN-13 号码的列表，我想使用它们，并且可能使用 Amazon Web Services 之类的东西来查找它们识别的书籍的总价格。但是，我迷失在 Amazon Web Services 文档中。我希望找到可以通过 PHP 脚本（例如）使用的 REST API 之类的东西，但情况似乎并非如此，或者我完全遗漏了一些东西。

# wpf - 如何将 RelayCommand 绑定到 IsChecked 属性？

> ID：14569793
> 
> 赞同：0
> 
> 时间：2013-01-28T19:37:27.910
> 
> 标签：wpf, relaycommand, ischecked

到目前为止，我不得不依靠事件背后的代码来检查或取消选中按钮（例如粗体字体工具栏按钮），我想知道是否有更好、更简洁的方法来使用 RelayCommand 来完成它，因为它已经绑定到 RelayCommand 用于执行和可以执行。

使用 RelayCommand，可以通过提供 CanExecute 委托轻松启用或禁用按钮。有没有办法将另一个委托绑定到按钮（或菜单）的 IsChecked 属性？

# ruby - 在 Ruby 中提取字符串的一部分

> ID：14569794
> 
> 赞同：1
> 
> 时间：2013-01-28T19:37:29.327
> 
> 标签：ruby, string, parsing, string-parsing

我知道这是一个简单的问题，但我想用导轨提取字符串的一部分。我会像 Java 一样通过知道字符串的开始和结束字符并提取它来做到这一点，但我想通过 ruby​​ 方式来做到这一点，这就是我需要你帮助的原因。

我的字符串是：

```
<a href="javascript:launchRemote('99999','C')">STACK OVER AND FLOW             </a> 
```

我想要引号之间的数值=>`99999`和链接的值=>`STACK OVER AND FLOW`

我应该如何在 ruby​​ 中解析这个字符串？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:19:50.043

如果需要解析html：

```
> require 'nokogiri'
> str = %q[<a href="javascript:launchRemote('99999','C')">STACK OVER AND FLOW</a>]
> doc = Nokogiri.parse(str)
> link = doc.at('a')
> link.text
=> "STACK OVER AND FLOW"
> link['href'][/(\d+)/, 1]
=> "99999" 
```

[http://nokogiri.org/](http://nokogiri.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:42:48.950

如果您在字符串中只有一个链接，这应该可以工作

```
str = %{<a href="javascript:launchRemote('99999','C')">STACK OVER AND FLOW             </a>}
num = str.match(/href=".*?'(\d*)'.*?/)[1].to_i
name = str.match(/>(.*?)</)[1].strip 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:59:27.693

一次获得两者的方法：

```
str = "<a href=\"javascript:launchRemote('99999','C')\">STACK OVER AND FLOW         </a>"
num, name = str.scan(/launchRemote\('(\d+)'[^>]+>\s*(.*?)\s*</).first
# => ["99999", "STACK OVER AND FLOW"] 
```

# jquery - 下拉列表选择器 JQUERY

> ID：14569798
> 
> 赞同：0
> 
> 时间：2013-01-28T19:37:55.943
> 
> 标签：jquery, list, each

我正在尝试创建一个高效且最小化的 jQuery 下拉脚本。我需要一种方法将几个 uls 与一个 li 相关联，并在每个循环中引用它。将每个可点击的 li 标题视为一个集群，它们下方的“子”ul 也是其中的一部分。

我想编写一段高效的代码，使用 each 循环遍历每个可点击的 lis 并展开与其关联的子列表 uls。问题是我需要知道如何以可以在每个循环中引用的方式将这些子列表 ul 与父 li 关联起来。没有标准的 jquery 选择器可以真正帮助我，因为子列表 uls 并不是 li 的真正孩子。

下面的 HTML 和 Jquery 尝试。请帮忙

```
<ul>
        <li class='tier1'>This is what I want to click</li>
            <ul (#1)>
                <li>I want this to drop down</li>

            </ul>
                             <ul>
                <li  id="gap">I want these to drop down</li>

            </ul>
       <li class='tier1'>Another clickable title</li>
            <ul>
                <li  id="gap">I dont want this to drop down when I click the li at the top of this markup</li>

            </ul>
</ul> 
```

我的问题是，当我单击其上方的 li 时，我想要滑动切换的 ul （#1）不是一个孩子。

所以我做了以下代码：

```
$(document).ready(function(){
    $('.tier1').each(function(){
        $(this).click(function(){
            $(this).children('ul').slideToggle('slow');
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:50:22.410

您的主要问题可能是在您提供的 HTML 中，“tier1”类没有任何内容。您也不需要`.each()`函数，因为您只需将 click 函数附加到类：

```
$('.tier1').click(function(){
    $(this).children('ul').slideToggle('slow');
}); 
```

您的 HTML 也无效，您不能将 UL 嵌套在 UL 中。固定版本：

```
<ul>
    <li class="tier1">This is what I want to click
        <ul>
            <li>I want this to drop down</li>
        </ul>
        <ul>
            <li  id="gap">I want these to drop down</li>
        </ul>
    </li>
    <li class="tier1">Another clickable title
        <ul>
            <li id="gap">I dont want this to drop down when I click the li at the top of this markup</li>
        </ul>
    </li>
</ul> 
```

您还需要一些 CSS 在单击之前隐藏子项：

```
ul li ul{
    display: none;
} 
```

[在这个小提琴](http://jsfiddle.net/9xjYy/)中工作演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:50:33.323

在这里查看我的示例：http: [//jsfiddle.net/D29mQ/2/](http://jsfiddle.net/D29mQ/2/)

您的标记中有一些错误。A`ul`不能是 a 的直接后代`ul`，但可以是 a 的直接后代`li`。我在 li.drawer`hide()`中的`ul`'s 上添加了一个，以便在禁用 javascript 时不会隐藏内容（我不建议使用 css 隐藏这些内容）。

```
<ul>
<li>
    <p class='handle'>This is what I want to click</p>
    <ul  class='drawer'>
        <li>
            <p class='handle'>This has a drawer too!</p>
            <ul  class='drawer'>
            <li>I want this to drop down</li>
            </ul>
        </li>
    </ul>
    <ul  class='drawer'>
        <li>I want these to drop down</li>
    </ul>
</li>

<li>
    <p class='handle'>This is what I want to click</p>
    <ul  class='drawer'>
        <li>I want this to drop down</li>
    </ul>
    <ul  class='drawer'>
        <li>I want these to drop down</li>
    </ul>
</li>
</ul>

<div>
    <p class='handle'>Here is an example using a wrapper div and paragraph tags.</p>
    <p  class='drawer'>
        I want this to drop down
    </p>
    <p  class='drawer'>
        I want these to drop down
    </p>
</div> 
```

和jQuery

```
$(document).ready(function(){
  $('.drawer').hide();
  $('.handle').click(function(){
        $(this).parent().children().not(this).slideToggle('slow');        
  });
}); 
```

# vb.net - 接口最小化可重用性和可维护性

> ID：14569799
> 
> 赞同：0
> 
> 时间：2013-01-28T19:38:06.077
> 
> 标签：vb.net, design-patterns

我读到只有当你想使用覆盖工具时才应该使用继承。如果您仅将继承用于代码共享，则应使用接口和组合。看看下面的代码：

```
Public Class Animal
    Public Overridable Sub Eat()
        MsgBox("Animal Eat no arguement")
    End Sub
End Class

Public Class Horse
    Inherits Animal
    Public Overrides Sub Eat()
        MsgBox("Horse Eat no arguement")
    End Sub
End Class 
```

Horse 继承自 Animal 并覆盖 Eat。根据我阅读的内容，这是对继承的有效使用。现在假设您添加了一个继承自 animnal 的 Cat 类和 Dog 类。现在说那匹马；Cat 和 Dog 使用 Animal 类中的 Eat 函数（而不是覆盖它），那么根据我读到的内容，这是对继承的无效使用（应该使用接口）。当然，如果您使用接口（即 IEatable）来实现 Eat 接口，则必须在每个类中编写 Eat，这会最大程度地降低可重用性和可维护性。我在这里想念什么？

更新阅读回复后，我相信我可以做这样的事情：

```
 Public Class Animal
    Public Overridable Sub Eat()
        MsgBox("Animal Eat no arguement")
    End Sub
End Class

Public Class Fish
    Inherits Animal
    Implements ISwim
    Private s1 As New Swim
    Public Sub Swim() Implements ISwim.Swim
        s1.Swim()
    End Sub
End Class

Public Class Shark
    Inherits Animal
    Implements ISwim
    Private s1 As New Swim
    Public Sub Swim() Implements ISwim.Swim
        s1.Swim()
    End Sub
End Class

Public Class Elephant

End Class

Public Class Swim
    Public Sub Swim()
        MsgBox("Animal can swim")
    End Sub
End Class

Public Interface ISwim
    Sub Swim()
End Interface 
```

在上面的代码中，三只动物中的两只实现了 ISwim，并使用组合来提供 Swim 的实现。这是一种有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:45:08.453

`Eat`如果您可以对所有或部分类使用相同的代码，您将使用继承来实现。如果您需要某些类的不同实现，您可以将其设为虚拟并使用`Animal`任何没有具体实现的类中的实现。

如果您对所有类都有不同的实现，或者您只想向某些类添加功能，您将使用接口。例如，该`ISwim`接口将仅由某些动物实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:44:47.590

应该使用继承来建模[`IS-A`](http://en.wikipedia.org/wiki/Is-a)关系。因为`Horse`是一种类型， `Animal`所以在这里继承是非常有意义的——代码重用不在讨论之列。

大多数情况下，许多类型的动物都有共同的行为，因此您可以看到代码共享在起作用。但是共享实现是层次结构正确建模问题域的*结果*，而不是继承的*原因。*

当您有许多共享默认实现的动物类型时，请在基类中提供该实现`Animal`。当没有适用于大多数动物的明显实现时（或者当您想强制动物的创建者明确说明他们希望如何实现行为时），请使用抽象函数。当有不相关类型的对象具有相似的行为（例如，飞机和麻雀都可以飞行）并且并非所有类型的动物都表现出给定的行为时，使用接口（例如）描述共同行为是有意义的`IFlightCapable`。

# c++ - OpenGL链接错误？未解决的外部 glCreateShader()

> ID：14569800
> 
> 赞同：3
> 
> 时间：2013-01-28T19:38:08.743
> 
> 标签：c++, windows, opengl, linker, shader

我正在开发一个 OpenGL 程序来测试着色器并尝试编译它们。但是，对 glCreateShader() 的调用（以及其他着色器调用，如 glDeleteShader）会给出以下错误：

（此错误来自 glCreateShader()）

```
Error   3   error LNK2001: unresolved external symbol _pglCreateShader 
```

我正在使用 Visual Studio 2012 和 Windows 7。获得了最新的 nvidia 卡之一，包括最新的驱动程序，所以不能是我的 OpenGL 版本。

我正在为 OpenGL Superbible 第 4 版的所有辅助函数使用 glTools 头文件。不确定使用这些文件是否有错误？

我会发布我的包含内容，以防这也有任何帮助。

```
#pragma once

#include <Windows.h>

// Basic C++ includes
#include <stdio.h>
#include <tchar.h>
#include <iostream>
#include <string>
#include <sstream>
#include <fstream>
#include <vector>
using namespace std;

// OpenGL specific and GUI includes
#include "shared/gltools.h"
#include "shared/math3d.h"
#include <SOIL.h> 
```

和链接器选项：

```
soil.lib;opengl32.lib;gltools.lib; 
```

* * *

好的，由于答案，问题已解决：

我编辑了我的 glTools.h 以包含“gl/glew.h”而不是“glee.h”，在我的链接器中添加了一个 ;glew32.lib 选项，并在进入主循环之前添加了 glewInit()。我还将 GLEW 库、dll 和包含添加到适当的文件夹中，所有功能都可以正常工作！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:41:04.043

[获取 GLEW](http://glew.sourceforge.net/)的副本来处理扩展加载。

手动操作[是](http://www.opengl.org/wiki/Load_OpenGL_Functions)……烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:43:59.980

在 Windows 上，您使用 WGL，而在使用 WGL 时，您不能直接链接到 GL 函数。你得到的所有功能都是[这些](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374394%28v=vs.85%29.aspx)；您应该在使用它们之前动态地获取指向您想要的 GL 入口点的指针`wglGetProcAddress`（如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374386%28v=vs.85%29.aspx)）。

基本上，如果您手动加载 GL 入口点函数指针，Windows 上的 OpenGL 就是一个 PITA。使用实用程序库为您获取指针要容易得多，例如[GLEW](http://glew.sourceforge.net/)。

# ios - 像 Apple 的 iPad 邮件应用一样构建“分组”动画

> ID：14569801
> 
> 赞同：1
> 
> 时间：2013-01-28T19:38:13.997
> 
> 标签：ios, ipad, cocoa-touch

我怎样才能像 Apple 邮件或 Gmail iPad 应用程序那样制作这种“分组”动画？

这是否需要进行硬编码，并完全使用动画框架完成，或者 Apple 是否为此公开了一个 API。我检查了开发人员文档，但没有看到类似的内容。但是 Gmail 能够准确地复制 Apple 的动画，这就是为什么我很想知道它是否可以以更简单的方式完成。

![在此处输入图像描述](../Images/ddc0ea0927ba6af9ffdbe2076c22c5bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:54:21.663

我 95% 确定 Apple 没有 UIStackOfPaperViewController 或类似的东西。您必须自己编写代码。

从概念上讲，它并不太复杂：带有纹理的背景视图，每个子视图以随机角度倾斜，下方有一个阴影。您可以通过在“真实”视图周围的视图中绘制渐变来制作阴影。Core Animation 的默认行为可能会做正确的事情，例如，如果您在屏幕外创建页面视图，然后设置最终位置，它将按照您的意愿飞入堆栈。

如果您不需要支持 iOS 6 之前的版本，Collection View Controller 中可能有一些好东西可以让这更容易。

希望这些信息足以让您入门，但是您的问题确实很广泛。很难回答“我该怎么做 X？” 如果您没有指定起点，或者回答“我怎样才能以更简单的方式做到这一点？” 如果你没有具体说明你认为困难的方式是什么。

# javascript - 表单验证失败，但表单已提交

> ID：14569804
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:38:18.883
> 
> 标签：javascript, validation, jsp, form-submit, onsubmit

我无法验证表单并停留在同一页面上。下面是我的 javascript 验证，当我收到弹出窗口时它正在工作。

```
function valueChecks(input){

var reqdFields = false;
var ncFields = false;
var catCheck = false;
var refCheck = false;
var dtCheck = false;
var retval = false;
reqdFields = checkRequiredFields(input) ; 
ncFields = checkNonComplianceFields(input);
catCheck = checkCat();
refCheck = checkRef();
dtCheck = subDate();
var mesgNo="0";
if (reqdFields == true){ 
    mesgNo="0";
} else { mesgNo="1";
}

if (catCheck == true){ 
    mesgNo=mesgNo+"0";
} else { mesgNo=mesgNo+"2";
}

if (refCheck == true){ 
    mesgNo=mesgNo+"0";
} else { mesgNo=mesgNo+"3";
}

if (dtCheck == true){ 
    mesgNo=mesgNo+"0";
} else { mesgNo=mesgNo+"4";
}

if (ncFields == true){
    mesgNo=mesgNo+"0";
    } else {mesgNo=mesgNo+"5";
}
if (mesgNo =="00000"){
    retval=true;
}
else if ((mesgNo =="10000")||(mesgNo =="12000")||(mesgNo =="12300")||(mesgNo =="12340")||(mesgNo =="12345")||(mesgNo =="10300")||(mesgNo =="10340")||(mesgNo =="10040")){
    retval = false;
    alert("Please check that you have filled in all the Mandatory Fields");
}
else if ((mesgNo =="02000")||(mesgNo =="02300")||(mesgNo =="02040")||(mesgNo =="02340")||(mesgNo =="02345")){
    retval = false;
}
else if ((mesgNo =="00300")||(mesgNo =="00340")||(mesgNo =="00345")){
    retval = false;
    alert ("Please enter at least one Reference Value (File Number, STT or BL Number)");
}
else if ((mesgNo =="0004")||(mesgNo =="00045")){
    retval = false;
    alert ("The Incident Date must be less than or equal today's Date");
}
else if ((mesgNo =="0005")){
    retval = false;
    alert ("Please enter at least one Non Conforming Party");
}
return retval; 
```

}

这就是我声明我的表格的方式。

```
 <html:form action="/qaeditsrl" onsubmit="return valueChecks(this);" >

 <input type=submit value="Submit" name="method" > 
```

有人可以告诉我为什么会出错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:42:57.147

尝试将提交按钮更改为输入类型=按钮。删除表单上的onsubmit，并添加一个id。然后在按钮上添加 onclick 进行所有检查，如果没有发现错误，请使用 document.getElementById('formId').submit() 提交；

# groovy - groovy Clibuilder 使用打印 null

> ID：14569806
> 
> 赞同：1
> 
> 时间：2013-01-28T19:38:30.183
> 
> 标签：groovy

更多的是一个美学问题，但为什么打印 cli.usage() 最后给出一个空值？

```
def cli = new CliBuilder(usage:'helloWord') 
 cli.help('prints this message') 
 cli.project(args:1, argName:'project', 'project name') 
 cli.desc(args:2, argName:'desc', 'project description')
 cli.f('force creation')
 def options = cli.parse(args)

if (options.help){
 print cli.usage()
 return
} 
```

使用 groovy helloWorld.groovy -help 输出

```
 usage: helloWorld 
     -desc <desc>          project description
     -f                           force creation
     -help                        prints this message
     -project <project>           project name
    null 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:56:48.393

`cli.usage()`不返回使用字符串；它打印使用字符串。代替

```
print cli.usage() 
```

只需调用它没有`print`：

```
cli.usage() 
```

# javascript - 在 Ember.js 中创建自定义文本输入错误消息

> ID：14569807
> 
> 赞同：0
> 
> 时间：2013-01-28T19:38:36.023
> 
> 标签：javascript, forms, model-view-controller, ember.js

我正在尝试创建一个自定义文本字段，该字段具有允许我传入自定义错误消息并将此错误消息显示为 DOM 的一部分的功能。

我知道我会从扩展 TextField 元素开始，如下所示：

```
CustomTextField = Ember.TextField.extend({
   inValid: function(error) {
      //function body
   }
}); 
```

但事实证明，我需要重写和创建的确切方法对我来说很难发现。最好有类似的东西：

```
<input type="text" /> 
```

去：

```
 <span class="input-error"><input type="text" />Invalid Email</span> 
```

例如。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:31:55.870

我不完全确定您打算如何更新视图对象上的消息，但您可以执行以下操作，从而每个视图都关注其内容的状态：

```
isValid: function() {
    return Boolean(String(this.get('value')).match(new RegExp('.+?@.+?\..{2,3}', 'i')));
}.property('value') 
```

我在这里为你创建了一个 JSFiddle：http: [//jsfiddle.net/geXsU/1/](http://jsfiddle.net/geXsU/1/)

# autofac - Autofac IComponentRegistration

> ID：14569809
> 
> 赞同：0
> 
> 时间：2013-01-28T19:38:39.683
> 
> 标签：autofac

我们正在使用 autofac，我注意到 ContainerBuilder 的 RegisterComponent 方法。我找不到任何它的用法示例，这是否意味着由客户端代码使用？如果是这样，有关如何使用它的任何示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:43:00.370

RegisterComponent 主要用于较低级别的 Autofac 支持/扩展，例如，如果您正在创建手动构建组件注册的自定义注册源。如果您搜索 Autofac 源代码，您可以找到它的用途。

一般来说，大多数客户端代码不会使用该方法。

# c - 线程同步问题：可能的竞争、易失性的滥用、缓存一致性？

> ID：14569812
> 
> 赞同：4
> 
> 时间：2013-01-28T19:38:53.770
> 
> 标签：c, synchronization, pthreads

我开始熟悉**pthreads**编程；以下代码是一个简单的生产者/消费者设计，其中数据从全局列表中放置/获取。问题是：消费者函数中的数据指针被尝试释放两次。此外，如果我`printf()`在循环的开头添加 a ，一切似乎都很好......我做错了什么？我怀疑关键字的滥用`volatile`，或者缓存隐藏的东西......除非它只是一个设计问题（可能是：p）。

感谢您的见解。

注意：`malloc()/free()`在我的系统上是线程安全的。我正在使用它进行编译`$ gcc -pthread -O0`，我猜这应该可以减少由于滥用`volatile`. 最后，在这段代码片段中，我们并不关心内存不足（如果生产者多于消费者）。

**编辑：**将代码更改为单个列表头。

```
#include <pthread.h>
#include <stdlib.h>
#include <string.h>

pthread_mutex_t lock;
pthread_cond_t new_data;

struct data {
  int i;
  struct data *next;
};

struct data *list_head = NULL;

void *consume(void *arg)
{
  struct data *data;

  while (1) {
    pthread_mutex_lock(&lock);
    while (list_head == NULL) {
      pthread_cond_wait(&new_data, &lock);
    }
    data = list_head;
    list_head = list_head->next;
    pthread_mutex_unlock(&lock);
    free(data);
  }

  return NULL;
}

void *produce(void *arg)
{
  struct data *data;

  while (1) {
    data = malloc(sizeof(struct data));
    pthread_mutex_lock(&lock);
    data->next = list_head;
    list_head = data;
    pthread_mutex_unlock(&lock);
    pthread_cond_signal(&new_data);
  }

  return NULL;
}

int main()
{
  pthread_t tid[2];
  int i;

  pthread_mutex_init(&lock, NULL);
  pthread_cond_init(&new_data, NULL);
  pthread_create(&tid[0], NULL, consume, NULL);
  pthread_create(&tid[1], NULL, produce, NULL);
  for (i = 0; i < 2; i++) {
    pthread_join(tid[i], NULL);
  }
} 
```

和输出：

```
$ ./a.out 
*** glibc detected *** ./a.out: double free or corruption (fasttop): 0x00007f5870109000 *** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:30:18.987

考虑以下场景：

1.  产生 -> 获得锁
2.  消费 -> 等待锁
3.  产生 -> 分配 d0，write_ptr = d0，read_ptr = d0，信号，解锁
4.  消费 -> 获得锁
5.  产生 -> 等待锁
6.  消费 -> 满足条件
7.  消费 -> 数据 = d0，read_ptr = NULL，解锁
8.  消耗 -> 释放 d0
9.  产生 -> 获得锁，分配 d1
10.  消费 -> 等待锁
11.  产生 ->`write_ptr != null`所以`write_ptr->next = d1`
12.  产生 ->`read_ptr == null`所以`read_ptr = d1`

看看第 11 步`write_ptr`，它仍然是 d0，即使它是独立于生产者线程而释放的。您需要确保`consume`不会使`write_ptr`.

双向链表可以让您避免其中的一些困难（因为读者和作者从不同的端工作）。

主要的：

*   创建哨兵节点`HEAD`和`TAIL`，链接`HEAD`和`TAIL`
*   产卵生产者
*   产生消费者

制片人：

*   锁
*   创建节点
*   链接`HEAD->next->prev`到`node`
*   链接`node->next`到`HEAD->next`
*   链接`HEAD->next`到`node`
*   链接`node->prev`到`HEAD`
*   开锁
*   信号

消费者：

*   锁
*   等待`TAIL->prev != HEAD`( `do { pthread_cond_wait } while (condition);`)
*   `data = TAIL->prev`
*   链接`TAIL->prev`到`data->prev`
*   链接`TAIL->prev->next`到`TAIL`
*   开锁
*   采用`data`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T20:30:32.897

我相信您的问题出在以下几行：

```
if (NULL != write_ptr)
  write_ptr->next = data;
write_ptr = data;
if (NULL == read_ptr)
  read_ptr = data; 
```

我认为您没有正确构建您的列表。事实上，我不明白你为什么有两个列表。但无论如何...

我假设您想将新数据添加到列表的开头。否则，您将需要一个尾指针，或者您每次都需要追到列表的末尾。

为此，您需要将当前列表头添加为数据的下一项。它应该看起来像：

```
data->next = write_ptr;
write_ptr = data; 
```

不需要对 write_ptr 进行 NULL 检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T20:12:40.773

更新：正如 Billy ONeal 所指出的，pthread 函数提供了所需的内存屏障，因此只要受到 pthread 锁的保护，就没有必要声明任何 volatile 。（有关详细信息，请参阅此问题：[使用 pthread 互斥锁保护变量是否保证它也不会被缓存？](https://stackoverflow.com/questions/3208060/does-guarding-a-variable-with-a-pthread-mutex-guarantee-its-also-not-cached)）

但是我对一些奇怪的行为得到了另一种解释：生产者创建的链接列表已损坏：假设`write_ptr`不是 NULL 并观察行为：

```
/* 1 */ if (NULL != write_ptr)
/* 2 */   write_ptr->next = data;
/* 3 */ write_ptr = data; 
```

假设 write_ptr 指向先前分配的实例 AAnext 为 NULL。我们新分配了一个实例 B 并将所有内容设置为 NULL（因此：B.next 为 NULL）。

第 1 行评估为真，因此执行第 2 行。A.next 现在指向 B。执行第 3 行后，write_ptr 指向 B B.next 为 NULL => A 丢失导致内存泄漏。

但是现在我不明白为什么 libc 抱怨双重免费。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T20:44:10.317

错误在行中

```
if (NULL != write_ptr)
   write_ptr->next = data;
write_ptr = data; 
```

这应该是： if (NULL != write_ptr) data->next = write_ptr; write_ptr = 数据；

出于调试目的，还要确保您将预期值从队列中取出。

也不需要`volatile`变量。由于您的队列受互斥锁保护，操作系统将确保队列访问是原子的。`volatile`仅在访问内存映射的硬件资源时才需要，并且绝不能用于同步。它所做的只是不必要地将数据强制存储到内存中。

还有另一个问题。如果你的生产者比你的消费者快，你最终会耗尽内存，除非你限制队列的大小并强制生产者等待消费者。较小的队列响应速度更快，选择较大队列的唯一原因是消除生产者中的干扰。

# java - MongoDB查询性能分析

> ID：14569813
> 
> 赞同：2
> 
> 时间：2013-01-28T19:38:55.457
> 
> 标签：java, mongodb

我已经对获取有关慢速查询的信息进行了合理的搜索，但我发现的信息似乎表明您可以从数据库中获取的数据相当有限。

我想知道查询花费了多少时间等待锁，查询使用了哪个索引，等待/从磁盘获取花费了多少时间，以及处理花费了多少时间（对聚合框架特别感兴趣表现）。

我想看看这里的人是否对测量这些参数有任何建议，和/或是否有可能。

提前致谢。:)

*编辑。如果这很重要，我倾向于使用 java mongo 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:27:03.793

如果您没有查看`mongod`日志，有些事情可能并不明显 - 所有花费超过“慢毫秒”阈值（默认为 100 毫秒，但您可以更改它）的操作都会记录到 mongod 日志文件中。

以下是它的外观以及如何阅读的示例：

`update training.scores query: { score: { $lte: 90.0 } } update: { $set: { grade: "B" } } nscanned:4876 nmoved:2438 nupdated:2438 keyUpdates:0 numYields: 2 locks(micros) w:400877 235ms`

[您可以在这里](http://docs.mongodb.org/manual/reference/database-profiler/#output-reference)看到其中一些字段的含义，但您感兴趣的是锁、numYields、nmoved 和 nupdated 以及 nscanned - 还有 scanAndOrder（即排序是使用索引还是必须在内存中完成）。

我建议查看该文档页面，了解您可以从 system.profile 集合以及 mongod 日志中获得哪些信息，以帮助调查集群的性能。

# php - 字符串 PHP 中的浮点值

> ID：14569814
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:39:02.587
> 
> 标签：php

我有一个 html 表单（它是商店的收据表单），其中包含大约一百个文本框，并且假设用户输入一个**浮点值**或**"20.2*33.4"**形式的东西。表单被提交到一个 php 页面。我想确保每个文本框都包含相同的模式，然后我想评估文本内部的乘法。

我想知道如何检查字符串是否为“float*float”格式？

任何人都可以帮忙。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:15:53.020

您可以使用正则表达式检查格式，然后解析出数字和运算符，然后进行计算。

```
$total = 0;
$string = '20.2*33.4';
if(preg_match('/^(\d*\.?\d+)(?:\*)(\d*\.?\d+)$/', $string, $matches) === 1){
    $total = floatval($matches[1]) * floatval($matches[2]);
} 
```

演示：http: [//ideone.com/azhMag](http://ideone.com/azhMag)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T19:42:35.767

这是不可能的，您可以使用的唯一功能是 eval 但在表单中使用它非常危险。

如果要评估表达式，则需要创建自己的语言（使用解析器、词法分析器等）。

所以这是不可能的。你可以看这里[http://en.wikipedia.org/wiki/Shunting-yard_algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)

编辑：如果它只是一个简单的乘法，总是有两个部分，你可以按照上面的评论来分解它。

# java - Java：如何使用同步和易失性

> ID：14569815
> 
> 赞同：5
> 
> 时间：2013-01-28T19:39:03.520
> 
> 标签：java, multithreading, synchronized, volatile

我有两个线程。第一个线程调用 setX 方法，第二个线程调用 getX 方法。尽管我只有一个写作线程，但我是否必须将方法设置为同步？我也可以用第二类和 volatile 变量解决我的线程问题吗？

```
public class Test {
    private int x;  

    public synchronized  void setX(int x) {
        this.x = x;
    }

    public synchronized  int getX() {
        return this.x;
    }
}

public class Test2 {
    private volatile int x; 

    public void setX(int x) {
        this.x = x;
    }

    public int getX() {
        return this.x;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T19:42:35.857

我个人不会使用`synchronized` *or* ，而是使用：`volatile`[`AtomicInteger`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html)

```
public class Test {
    private final AtomicInteger x = new AtomicInteger();  

    public void setX(int value) {
        x.set(value);
    }

    public int getX() {
        return x.get();
    }
} 
```

（请注意，我还修复了您的`get`/ `set`- 之前您`getX`的设置，而您`setX`正在获取...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:46:45.253

要回答您的问题，是的，您需要某种形式的同步。由于您的共享状态是单个变量，并且此变量的类型为`int`，因此写入将是原子的（如果变量是 long 或 double 则不是这种情况）。但是您仍然需要同步以确保您没有*可见性*问题：线程 A 可以写入变量，而线程 B 看不到写入的值，而是看到前一个值。

在这种情况下，可以使用 synchronized、volatile 或 AtomicInteger 来实现同步。所有这些技术将确保写入对变量的任何后续读取都是可见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:58:06.513

> `Volatile`变量只保证变量对线程的可见性和代码顺序。但它没有为线程提供方法所有权的便利。`Synchronized`关键字让线程拥有`synchronized`方法的所有权。

按照您的查询：

> 第一个线程调用`setX`方法，第二个调用方法。尽管我只有一个写入线程，但我必须`getX` 设置方法吗？`synchronized`

取决于你想要什么。如果您希望 Thread2`getX`仅在Thread1 调用之后调用`setX`，那么是的，您需要同步方法，但是您还必须使用`wait()`and`notify()`方法。

> 我也可以用第二类和 `volatile`变量解决我的线程问题吗？

同样，这取决于您想要什么。如果您希望您的 Thread2 调用`getX`方法而不关心`setX`其他调用的方法，`Thread`那么您应该使用`volatile`Thread2 可以获取最新的`x`.

# mysql - 在一列中收集多个结果

> ID：14569817
> 
> 赞同：4
> 
> 时间：2013-01-28T19:39:21.023
> 
> 标签：mysql, sql, database

我有两张桌子：

```
╔══════════════╦═════════════╗
║ Table: book  ║ Column info ║
╠══════════════╬═════════════╣
║ - id         ║ int, pk     ║
║ - title (128)║ varchar     ║
╚══════════════╩═════════════╝

╔══════════════╦═════════════╗
║Table: author ║ Column info ║
╠══════════════╬═════════════╣
║ - id         ║ int, pk     ║
║ - name (128) ║ varchar     ║
║ - bookId     ║ int, fk     ║
╚══════════════╩═════════════╝ 
```

*（我确实意识到这不是一个完全规范化的例子，试图保持简单。）*

从他们那里收集数据非常简单：

```
SELECT b.title, a.name FROM book b
INNER JOIN author a ON a.bookId = b.id
WHERE b.id = x 
```

然而，这显然会为每个作者产生一行——这不是我想要的。相反，我正在尝试实现这个数据结构：

> [字符串标题，字符串[]作者（数组）]

**是否可以在一个查询中执行此操作？**最好不要将作者列“合并”成一个字符串。类似于列本身的内部数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:46:47.263

> 是否可以在一个查询中执行此操作？最好不要将作者列“合并”成一个字符串。类似于列本身的内部数组。

**不 ：）**

GROUP_CONCAT 和类似的产生一个标量（字符串）结果。[标准] SQL中*没有*“字符串数组”数据类型。

这是*“好的”*，因为

1.  客户端程序可以对数据本身进行反规范化¹以进行进一步处理，或者
2.  可以将非规范化字符串发送到命令行/文本客户端以进行数据可视化，或者
3.  规范化的形式是使用结果与进一步查询²所需要的。

* * *

¹创建一个数组以进行进一步处理通常在客户端上完成，并且因语言而异 - 它是 C#/LINQ 中的一个微不足道的单行代码。

²通过将其保留为规范化形式，可以应用进一步的[关系代数运算/优化。](http://en.wikipedia.org/wiki/Relational_algebra)尽早对数据进行反规范化可以消除大量有效（并且可能更有效）的查询计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:41:25.717

你想要`group_concat`：

```
select b.title,
       group_concat(a.name)
from book b join
     author a
     on b.id = a.bookid
group by b.id, b.title 
```

这会将所有作者放入一个逗号分隔的列表中。您可以使用`SEPARATOR`语句指定分隔符。

请注意，我还按书籍 ID 分组，以防两本书具有相同的标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:45:04.797

尝试这个

```
 SELECT b.title,a.name, concat('[',b.title,',',a.name, ']') as output
 FROM book b 
 INNER JOIN author a
 ON b.id = a.bookid
 GROUP BY b.id, b.title 
```

[**SQL 演示**](http://sqlfiddle.com/#!2/1acbb/2)

# ruby-on-rails - 要求用户选择一个值

> ID：14569819
> 
> 赞同：1
> 
> 时间：2013-01-28T19:39:43.787
> 
> 标签：ruby-on-rails, ruby

我有一个选择菜单，就像这样

```
<%= f.select(:size, options_for_select(@sizes_availiable), :prompt => "Select Size") %> 
```

提示“选择尺寸”。问题是，用户可以选择“选择尺寸”，它仍然允许提交表单。鉴于所有大小也是字符串，我如何禁止用户选择它作为值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:01:29.333

您可以做几件事：

```
# as suggested, use :include_blank
f.select :size, options_for_select(@sizes_availiable), include_blank: "Select Size"
# wihch creates an 'option' tag with no value and 'Select Size' text

# or/and add a validation
validates :size, presence: true
validates :size, numericality: true       # or
validates :size, format: { with: /\d+/ }  # 
```

但是，您应该始终包含验证以防止恶意用户操纵表单并提交随机内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:46:54.747

使用`include_blank`而不是`prompt`.

```
 <%= f.select(:size, options_for_select(@sizes_availiable), {:include_blank => "Select Size"}) %> 
```

比你可以`size`在你的模型中验证。

```
validates :size,   :presence => true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T19:44:08.200

使用：禁用

```
<%= f.select(:size, options_for_select(@sizes_availiable), :prompt => "Select Size", :disabled => 'Select Size') %> 
```

参考：

[http://zittlau.ca/ruby-on-rails-disabling-a-select-tag-using-the-select-helper/](http://zittlau.ca/ruby-on-rails-disabling-a-select-tag-using-the-select-helper/)

# javascript - 为什么 Node.js 函数接受对象作为参数？

> ID：14569821
> 
> 赞同：3
> 
> 时间：2013-01-28T19:39:59.083
> 
> 标签：javascript, node.js

这可能是一个 JavaScript 问题，但在 Node.js 中，我通常会看到模块或方法将“选项”对象作为参数。例如，我正在谈论的内容，请查看以下从 Node.js API 文档获取的*http.request()方法。*

```
var options = {
  hostname: 'www.google.com',
  port: 80,
  path: '/upload',
  method: 'POST'
};

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

我在许多编程语言中看到的问题之一是传递参数时没有明确什么值应该对应于什么。这是一种用于使可读性更容易的技术，还是我缺少一个基本概念？我可以在 PHP 等其他语言中合理地使用相同的技术吗？（当然使用关联数组而不是对象）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T19:50:49.483

您当然可以在其他语言中使用此技术。我不能说它在 JavaScript 中可能有任何结构改进，但据我所知，这个想法是减少输入参数的数量之一。

作为一个风格问题（可读性、可支持性、软件应该具有的所有良好的直观内容），这里遵循的基本“规则”是方法参数越少越好。如果不需要所有参数，则*尤其如此。*

考虑一个来自静态类型语言 C# 的示例：

```
public Widget WidgetFactory(int widgetNumber, string widgetName, bool isActive, Widget parentWidget, List<Widget> childWidgets)
{
    // parentWidget may be null if there's no parent
    // childWidgets may be empty or null for no children
    // etc.
} 
```

对于更复杂的对象，这可能会*很快变得**非常*难看。想象一下大量可选（可为空）参数。（如果您在 4.0 之前的 .NET 中使用过 COM 互操作，则不必想象。）还可以想象一下，如果您有多个需要这些参数的函数。再次，它变得丑陋得很快。

 *因此，使用的模式是将所有选项封装到另一个对象中，该对象的唯一职责是维护这些选项：

```
public class WidgetCreationOptions
{
    public int WidgetNumber;
    public string WidgetName;
    // etc.
} 
```

别处...

```
public Widget WidgetFactory(WidgetCreationOptions options)
{
    // etc.
} 
```

随着选项变得越来越复杂并且内部包含相互引用的逻辑，将它们抽象为自己的对象变得越来越有意义。这是向许多小的简单对象而不是较少的大对象移动的常见 OO 实践。

确实，您在此声明中是绝对正确的：

> 我在许多编程语言中看到的问题之一是传递参数时没有明确什么值应该对应于什么。

当涉及到许多方法参数时，有许多“代码异味”：

*   争论太多。
*   布尔标志作为参数（表明被调用的方法不止一件事）
*   可空参数（如果你不需要它，为什么需要它？）

目前可能还有更多让我无法理解的东西。但是，正如您所确定的，这很难阅读：

```
someObject.SomeFunction(1, false, null, "this is a string", false); 
```

而这要清楚得多：

```
var options = {
    widgetNumber: 1,
    isActive: false,
    widgetName: "this is a string"
};

// ... elsewhere ...

someObject.SomeFunction(options); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:46:04.320

这是 JavaScript 中非常常见的模式，因为函数可以更松耦合。说起来容易得多：

```
doStuff( { someValue: 1, anotherValue: 2 } ); 
```

而不是：

```
doStuff(1, null, null, null, 2); 
```

前一种设计有两个优点：

1.  它更易于阅读，并且更清楚地传递了哪些值。我可以省略我不想指定的参数，而不必传入空值。我也得到了关于参数是什么的*提示*，因为它用一个键标记。
2.  函数签名可以更改，添加更多密钥，而不会破坏现有代码。我可能会删除`anotherValue`，我可以忽略该键，而不必在函数签名中保留一个空白参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:46:06.280

它使调用者更容易不必传递一些参数。假设端口默认为 80，方法默认为“POST”，您只需要以下代码

```
http.request({
  hostname: 'www.google.com',
  path: '/upload',
}, callback) 
```

如果您切换到所有参数，您的请求函数将采用以下参数

```
http.request(hostname, port, path, method, callback); 
```

在需要默认值的情况下，您需要将其称为

```
http.request(hostname, undefined, path, undefined, callback); 
```

你可以看到它看起来不太漂亮。我同意这种风格的参数通常没有记录，如果没有很好的记录，它会让人更难理解如何调用它

在提供类的语言中，如 PHP、C# 和 Java，您可以创建一个类来表示 JavaScript 中的匿名对象。

在 PHP 中，您还可以使用数组来模拟 JavaScript 匿名对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:56:55.217

我看到这种模式的一些好处：

1.  无需记住参数的顺序
2.  更容易使一些（或所有）参数成为可选的
3.  在函数体本身中，当您引用参数时非常清楚。例如`options.user`，而不仅仅是`user`. 这使得错误地覆盖传递的参数变得更加困难。*

# css - Cufon 用 üäëö 将单词大写

> ID：14569822
> 
> 赞同：0
> 
> 时间：2013-01-28T19:40:10.033
> 
> 标签：css, cufon

Cufon 非常适合我的菜单，但是当涉及到大写“über uns”之类的条目时，结果是“ÜBer Uns”。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:04:16.950

尝试根据[此站点切换到开发版本。](https://groups.google.com/forum/?fromgroups=#!topic/cufon/rZjITFQ22-Y)

在开发版本中，正则表达式是不同的：

```
@@ -210,7 +210,7 @@ var Cufon = (function() {
           return s.toLowerCase();
         },
         capitalize: function(s) {
-          return s.replace(/\b./g, function($0) {
+          return s.replace(/(?:^|\s)./g, function($0) {
             return $0.toUpperCase();
           });
         } 
```

来源：[https ://github.com/sorccu/cufon/commit/b64768265b51efc0d4de220482173f4c33491c15](https://github.com/sorccu/cufon/commit/b64768265b51efc0d4de220482173f4c33491c15)

# ios - 关闭应用程序时删除自定义窗口

> ID：14569827
> 
> 赞同：2
> 
> 时间：2013-01-28T19:40:21.687
> 
> 标签：ios, uiwindow

我正在创建一个有两个窗口的应用程序，它的工作方式如下：当我单击按钮时，第二个窗口出现并接管屏幕。当我点击关闭按钮（在第二个窗口上）时，第二个窗口从屏幕上消失。

问题是这样的：当它显示第二个窗口时，我双击主页按钮退出应用程序，应用程序跳转到显示第一个窗口（原始窗口），然后我回到应用程序后，它仍然显示第一个窗口，但关键窗口是第二个窗口，所以所有的命中事件仍然转到第二个窗口。它使我的应用程序看起来冻结，除非我单击“关闭”按钮所在的位置，否则应用程序会恢复正常。

有没有人经历过这个？我无法弄清楚是什么造成了这个问题，它看起来像是系统切换了窗口。

并不是每次我进出应用程序时都会发生这种情况，它偶尔会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T20:27:13.187

所以我没有弄清楚如何处理这个问题，但我有一个替代解决方案。即通过 secondWindow.hidden = NO; 显示第二个窗口 而不是 [secondWindow makeKeyAndVisible];

这样，它也将解决许多其他问题（例如将点击传递到第一个窗口时的关键窗口问题，或者有一个新窗口，例如出现警报视图或模式视图），因为它仍然让系统处理关键窗口分配任务，而不是抓住我们手中的控制权。

希望这也能帮助遇到同样问题的其他人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:49:39.817

您可以再试`[currentWindow makeKeyAndVisible];`一次，或者您可以更改您的设计并简单地使用模态视图控制器而不是一个全新的窗口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T20:42:27.493

您可能还想查看 上的`windowLevel`属性`UIWindow`。

> 级别是有序的，以便每个级别将其中的窗口分组在所有先前组中的窗口之前。例如，警报窗口出现在所有正常级别窗口的前面。当一个窗口进入一个新的层级时，它会排在该层级的所有对等体前面。有关可能值的列表，请参阅“UIWindowLevel”。默认值为`0.0`。

我有一个应用程序，它使用两个窗口来显示一个漂浮在视频播放器上方的透明窗口。警报视图使用提升的窗口级别来展示自己，所以我将背景窗口的级别设置为 -1.0，活动窗口的级别设置为 0.0。

# appmobi - 无法让 AppMobi.contacts.chooseContact() 在 iPhone 上工作并在 Android 上崩溃 app-lab

> ID：14569830
> 
> 赞同：0
> 
> 时间：2013-01-28T19:40:22.990
> 
> 标签：appmobi

我无法以这种最简单的 AppMobi.contacts.chooseContact() 示例工作。它可以在 XDK 中运行，但不适用于 iPhone 4s 的 app-lab，我在旧的 Kindle Fire 上进行了尝试，它在选择一两个联系人后崩溃了 app-lab 应用程序。它在您正确取消选择联系人时处理，但如果您选择一个，则事件侦听器似乎永远不会被调用。

我还在为 iPhone 编译的本机应用程序中运行它，并遇到同样的问题。这是我用来最小化重现问题的代码，我在 Windows 上的 XDK 以及 iPhone 和 Kindle Fire 上使用 App-lab 上的 Test Anywhere 运行，它表现出与下面描述的相同问题。代码包含在下面。我知道我可能正在做一些非常愚蠢的事情，只是看不到它，但我无法弄清楚。谢谢你。

```
<!DOCTYPE html><!--HTML5 doctype-->
<html>
<head>
<title>Your New Application</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"> 
<style type="text/css">
    /* Prevent copy paste for all elements except text fields */
    *  { -webkit-user-select:none; -webkit-tap-highlight-color:rgba(255, 255, 255, 0); }
    input, textarea  { -webkit-user-select:text; }

    /* Set up the page with a default background image */
    body {
        background-color:#fff;
        color:#000;
        font-family:Arial;
        font-size:48pt;
        margin:0px;padding:0px;
        background-image:url('images/background.jpg');
    }
</style>
<script type="text/javascript" charset="utf-8" src="_appMobi/appmobi_local_bootstrap.js"></script> 
<script type="text/javascript" charset="utf-8" src="http://localhost:58888/_appMobi/xhr.js"></script> 
<script type="text/javascript">
/* This function runs once the page is loaded, but appMobi is not yet active */
var init = function(){

};
window.addEventListener("load",init,false);  

/* This code prevents users from dragging the page */
var preventDefaultScroll = function(event) {
    event.preventDefault();
    window.scroll(0,0);
    return false;
};
document.addEventListener('touchmove', preventDefaultScroll, false);

/* This code is used to run as soon as appMobi activates */
var onDeviceReady=function(){
    //Size the display to 768px by 1024px
    AppMobi.display.useViewport(768,1024);

    //hide splash screen
    AppMobi.device.hideSplashScreen();  

    document.addEventListener('appMobi.contacts.choose', onChooseContact);
    document.addEventListener('appMobi.contacts.busy', onChooseContactBusy);
    // runs right away more or less.
    AppMobi.contacts.chooseContact();

};
document.addEventListener("appMobi.device.ready",onDeviceReady,false);

function onChooseContact(evt)
{
    if (evt.success == true)
    {
        alert("Choose Contact Success");
        //AppMobi.contacts.editContact(evt.contactid);
    }
    else if (evt.cancelled == true)
    {
        alert("Choose Contact Cancelled");
    } else {
        alert("Huh, how did it get here?");
    }
}

function onChooseContactBusy()
{
    alert('got in OnChooseContactBusy');
}

</script>

</head>
<body>

    <a class="button"
        onclick="AppMobi.contacts.chooseContact();" >Click Here to Choose Contact</a>
    <br />

</body>
</html> 
```

# deployment - 错误“文件的流数据尚不可用。” 发布 Web 角色 Azure 项目

> ID：14569839
> 
> 赞同：2
> 
> 时间：2013-01-28T19:40:56.783
> 
> 标签：deployment, azure, azure-web-roles

我已经使用 Visual Studio 的 Windows Azure SDK 插件建立了一个 Windows Azure 项目。此项目中有一个 Web 角色指向同一解决方案中的几个网站。我已经为 azure 项目配置了发布设置，并且能够毫无问题地推送整个 azure 项目。

我不想每次都推送整个角色部署（并被迫等待重建实例。）有时我只想将一些 Web 文件更改直接推送到现有 Web 实例。

Azure 似乎理解这一点，并在 Web 项目中自动创建了一个 publishsettings.pubxml 文件。但是，当我右键单击其中一个 Web 项目并选择“发布”时，我收到以下错误：

> 错误 112 Web 部署任务失败。（（1/28/2013 10:49:05 AM）在远程计算机上处​​理请求时发生错误。）
> 
> （1/28/2013 10:49:05 AM）在远程计算机上处​​理请求时发生错误。**'C:\dev\[solution]\[project]\obj\Dev\Package\PackageTmp\bin\[project].dll'的流数据尚不可用。**

我已经摇动了我能找到的所有手柄，并且无法克服这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:45:43.680

您不能将“部分”解决方案发布到云服务。您只能发布 Cloud 项目和该项目中的所有角色。这就是 Azure 具有暂存和生产部署概念的原因。您将更改发布到 staging、测试它们、满意时交换 VIP，然后删除旧部署。Azure 负载均衡器在 VIP 交换期间处理移动客户端，以防止客户端停机。

如果您在生产中运行多个实例，则可以直接更新部署，Azure 将一次更新一个实例，并再次使用负载均衡器处理移动客户端。

# angularjs - 在 AngularJS E2E 测试中使用 element().offset()

> ID：14569840
> 
> 赞同：3
> 
> 时间：2013-01-28T19:40:58.013
> 
> 标签：angularjs, angularjs-e2e

我正在用 Angular 编写端到端测试，我想验证一个 DOM 元素相对于另一个 DOM 元素的位置。幸运的是，Angular E2E DSL 为 jQuery 的 offset() 方法提供了一个直通方法。非常适合我的用例！

但是，我很困惑如何使用此方法返回的对象。对 offset() 的调用返回一个具有**top**和**left**属性的对象。当我尝试在测试中访问这些属性时，Angular 会抱怨。

这段代码很好用：

```
expect(element("#anID").offset()).toEqual({"top":100,"left":100}); 
```

此代码不起作用，并引发错误：

```
expect(element("#anID").offset().top).toEqual(100);

TypeError: Cannot read property 'name' of undefined
    at Object.angular.scenario.matcher.(anonymous function) (http://localhost:8000/test/angular/angular-scenario.js:23994:41)
    at Object.executeStatement (http://localhost:8000/test/angular/angular-scenario.js:23960:30)
    at Object.chain.(anonymous function) [as toEqual] (http://localhost:8000/test/angular/angular-scenario.js:23968:37)
    at Object.<anonymous> (http://localhost:8000/test/E2E-scenarios.js:78:53) 
```

如何使用 offset() 的返回来构造一个大致如下的期望：

```
expect(element("#anID").scrollTop() - element("#anotherID").offset().top).toEqual(100); 
```

* * *

## 更新

在与 Josh David Miller 反复讨论之后，我发现我真正的问题是：如何在 expect() 调用之外获取 angular.scenario.Future 对象的值，这样我就可以将其用作其他期望的基础?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:40:36.100

[在Angular 邮件列表中](https://groups.google.com/forum/?fromgroups=#!topic/angular/FszMlvnrQfY)找到了答案。这样的事情将适用于在单个期望中使用多个 angular.scenario.Future 对象值：

```
 it('async expectation', function() {
    browser().navigateTo('index.html');
    var relativeElement = element("#anID").prop( 'offsetTop' )

    this.addFuture('ScenarioRunner step title', function(done) {
      expect(element('#anotherID').scrollTop()).toEqual(relativeElement.value - 100);
      done();
    });
  }); 
```

[angular github repo](https://github.com/angular/angular.js/issues/429)上有一个问题可以更优雅地集成到 ScenarioRunner 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:41:56.707

你实际上不应该需要 jQuery passthrough。这应该可以正常工作：

```
expect( element.prop( 'offsetLeft' ) ).toEqual( 361 );
expect( element.prop( 'offsetTop' ) ).toEqual( 451 ); 
```

如果没有，您可以在 jsfiddle 或 plunker 上发布一个完整的最小示例吗？

# actionscript-3 - 使用多个影片剪辑的 numChildren 值并将它们加在一起以获得总和变量？

> ID：14569848
> 
> 赞同：0
> 
> 时间：2013-01-28T19:41:33.720
> 
> 标签：actionscript-3, variables

我在场景中有 15 个空（带有空白关键帧）影片剪辑，我将 png 文件调用到它们中。（通过加载（新 URLRequest））我希望它们像插槽一样工作。在场景中添加相应的 PNG 按钮，每个插槽都会有一个 PNG。现场有“减去PNG按钮”

当所有插槽都已满时，我想向用户显示一条消息（例如 warning_mc.visible=true）“所有 15 个插槽已满，请至少将其中一个插槽留空”。

为此，我认为是检测所有movieclips numChildren 值并将它们相加，并使用一个变量来获取总和值，如果变量值超过总和，则会向用户显示警告消息。

但我认为不能以这种方式使用 numChildren 值？对此还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:21:43.140

你想要一个类似于这样的模型：

```
var mySlots:Vector = new Vector<MovieClip>(mc1,mc2,mc3, mc4, mc15); //make an array/vector of all your containers

function get slotTotal():int {
    var count:int = 0;
    for(var i:int=0;i<mySlots.length;i++){ //go through each slot and see if it has children
        if(mySlots[i].numChildren > 0){
            count++;
        }    
    }
    return count;
}

function get isValid():Boolean {
   return (mySlots.length - slotTotal == 1); //if total slots is one less than all the containers, then return true
} 
```

# jquery - jQuery Validation Plugin -- 只有当我多次点击提交按钮时才会发送表单

> ID：14569853
> 
> 赞同：0
> 
> 时间：2013-01-28T19:41:51.323
> 
> 标签：jquery, jquery-validate

我在 jQuery Validation Plugin 的帮助下验证表单，它完美地验证并且还在我的 PHP 文件中执行 POST 并在 DIV 中插入正确的答案。显然一切都很完美。

但是...（总有一个但是）

仅当我多次单击提交按钮时才会发送表单，必须单击两次或更多次才能运行 Ajax 以及验证后应该发生的其他事情。

有谁知道这是为什么？

```
$('#contact-form').validate(
    {
        rules: {
            contact_name: {
                minlength: 3,
                required: true
            },
            contact_email: {
                required: true,
                email: true
            },
            contact_department: {
                required: true
            },
            contact_message: {
                minlength: 2,
                required: true
            },
            contact_agree: {
                required: true
            }
        },
        highlight: function(label) {
            $(label).closest('.control-group').removeClass('success').addClass('error');
        },
        success: function(label) {
            label
                    .text('OK!').addClass('valid')
                    .closest('.control-group').removeClass('error').addClass('success');

        },
        submitHandler: function(form) {
            jQuery('#contact-form-submit')
                    .click(function() {
                var btn = $(this);
                btn.button('loading');
                setTimeout(function() {
                    btn.button('reset');
                }, 2000);
            });

            $('#contact-form-submit').click(function(e) {
                $.post("pages/contact/submit", {
                    contact_name: $('#contact_name').val(),
                    contact_email: $('#contact_email').val(),
                    contact_department: $('#contact_department').val(),
                    contact_message: $('#contact_message').val(),
                    contact_agree: $('#contact_agree').val()
                }, function(data) {
                    $('#resultado').html(data);
                });
                e.preventDefault();
            });

        }
    }); 
```

如果有人知道可以用一个例子回答我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:14:31.203

您的问题是由选项 `click()`内部的处理程序引起的。`submitHandler:`

无需再次捕获点击，因为它已经被`submitHandler:`回调捕获一次。（*您在同一个按钮上也有两个`click()`处理程序......这在任何其他情况下也是不必要的冗余。*）

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)：

> **submitHandler**，*回调，默认值：默认（本机）表单提交*
> 
> “表单有效时处理实际提交的回调。获取表单作为唯一参数。替换默认提交。**在验证后通过 Ajax 提交表单的正确位置**。”

试试这个（假设你的`click()`处理程序中的代码是正确的）......

```
submitHandler: function(form) {

        var btn = $('#contact-form-submit');
        btn.button('loading');
        setTimeout(function() {
            btn.button('reset');
        }, 2000);
        $.post("pages/contact/submit", {
            contact_name: $('#contact_name').val(),
            contact_email: $('#contact_email').val(),
            contact_department: $('#contact_department').val(),
            contact_message: $('#contact_message').val(),
            contact_agree: $('#contact_agree').val()
        }, function(data) {
            $('#resultado').html(data);
        });
        return false;

} 
```

# linq - 如何在 LINQ to Entities 中创建此查询

> ID：14569854
> 
> 赞同：0
> 
> 时间：2013-01-28T19:42:04.550
> 
> 标签：linq, entity-framework, linq-to-entities

我有一个`MVC`应用程序正在使用`Linq to Entities`，我很难弄清楚如何编写查询的这一部分。这是一个有效的摘录`SQL Stored Procedure`。我知道我可以使用该程序，但我试图更好地理解`LINQ`. 目标是获取申请的最后一个路由，并且 ReqRoutingID 是一个身份文件，因此表中的最后一个条目始终是我想要的那个。

```
SELECT
    h.ReqID,
    rr.RoutingSectionID
FROM LOG_ReqHeader h
JOIN dbo.Log_ReqRoutings rr
    ON  rr.ReqRoutingID = (
        SELECT TOP 1 r.ReqRoutingID
        FROM Log_ReqRoutings r1
        WHERE r1.ReqID = h.ReqID 
        ORDER BY r1.ReqRoutingID desc) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:22:15.190

```
var query = from h in db.LOG_ReqHeader
            from rr in db.Log_RequRoutings
            where rr.ReqRoutingID == (from r1 in db.Log_RequRoutings
                                      where r1.Req == h.ReqID
                                      orderby r1.ReqRoutingID descending
                                      select r1).FirstOrDefault().ReqRoutingID
            select new { h.ReqID, rr.RoutingSectionID }; 
```

# dynamics-crm - 如何使用具有 CrmDateTime 类型的 Dynamics 4.0 Web 服务发送日期

> ID：14569857
> 
> 赞同：0
> 
> 时间：2013-01-28T19:42:15.983
> 
> 标签：dynamics-crm, dynamics-crm-4

我在 Dynamics 4.0 中的自定义字段上有一个 crmdatetime 字段。我正在使用网络服务发送日期。不幸的是，日期没有被保存。有什么想法吗：

```
 CrmDateTime crmstartdate = new CrmDateTime();
            CrmDateTime crmstartDate = new CrmDateTime();
            crmstartdate.date = System.Convert.ToString(startingdate);
            CrmDateTime crmendDate = new CrmDateTime();
            crmendDate.date = System.Convert.ToString(endingdate);
            ev.new_startingdate = crmstartdate;
            ev.new_endingdate = crmendDate;
            Guid eventid=util.service.Create(ev); 
```

因此，即使我将日期发送过去，它也没有被保存。

想到这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:51:35.113

看起来您的问题与[此](http://technet.microsoft.com/en-us/library/bb959840.aspx)类似。看看[这个功能](http://technet.microsoft.com/en-us/library/bb959840.aspx)

# css - 如何设置 css 层次结构

> ID：14569858
> 
> 赞同：2
> 
> 时间：2013-01-28T19:42:20.037
> 
> 标签：css, css-selectors

我在我的 CSS 中将主类的链接设置为橙色，但是，我希望阅读更多链接为白色，而我所做的一切都不起作用。

好的，这是页面设置：

```
<div class="entry_post">
<a href="http://localhost/" class="more-link">
Read More
</a>
</div> 
```

我的 CSS：

```
.entry_post a {
    color:#FF8800;
}
.entry_post .more-link a{
        color:#ffffff;
}
.more-link {
    color:#ffffff;
} 
```

我确定我做错了什么，但对于我的生活，我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:49:11.993

这里有两个问题：

```
.entry_post .more-link a{
    color:#ffffff;
} 
```

这是不正确的：上面的规则将*匹配*`a`一个锚元素（你想要的是：*`.more-link``.entry-post`*

 *```
.entry_post a.more-link {
    color:#ffffff;
} 
```

其次，即使您已经拥有`.more-link {color: #ffffff;}`，它也被`.entry_post a`（更具体的）覆盖，因此它不适用。但是，如果您解决了第一个问题，则根本不需要为此烦恼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:43:48.373

您需要结合标签和类选择器（标签选择器是可选的）：

```
.entry_post a.more-link {
        color:#ffffff;
} 
```

`.entry_post .more-link a`不起作用，因为它意味着 a `a`in a `.more-link`in a `.entry_post`。`.more-link`简单的问题`.entry_post a`是更[具体](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)，所以它会覆盖它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T19:46:12.783

尝试

```
.entry_post a {
    color:#FF8800;
}
.entry_post .more-link {
        color:#ffffff !important; 
```

}

你那里有一些裁员*

# java - 在 ImageAdapter 中更改 ImageView onClick

> ID：14569859
> 
> 赞同：0
> 
> 时间：2013-01-28T19:42:32.100
> 
> 标签：java, android, uiimageview, onclick

正如标题已经提到的那样，我想更改我的 ImageView onClick。我在 ImageAdapter 中制作了一个包含 4 个项目的 GridView。当我单击每个 ImageView 时，它会在其周围创建一个大的橙色区域。我有一个自定义的“按下 ImageView”并想使用它。我该怎么做？

提前致谢

图像适配器：

```
public class ImageAdapter extends BaseAdapter {
private Context context;
private final String[] buttonValues;

public ImageAdapter(Context context, String[] buttonValues) {
    this.context = context;
    this.buttonValues = buttonValues;
}

public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {

        gridView = new View(context);

        // get layout from mobile.xml
        gridView = inflater.inflate(R.layout.mobile, null);

        // set image based on selected text
        ImageView imageView = (ImageView) gridView
                .findViewById(R.id.grid_item_image);

        String button = buttonValues[position];

        if (button.equals("homework")) {
            imageView.setImageResource(R.drawable.button_schedule);
        } else if (button.equals("schedule")) {
            imageView.setImageResource(R.drawable.schedulebut);
        } else if (button.equals("planner")) {
            imageView.setImageResource(R.drawable.plannerbut);
        } else {
            imageView.setImageResource(R.drawable.settingsbut);
        }

    } else {
        gridView = (View) convertView;
    }

    return gridView;
}

@Override
public int getCount() {
    return buttonValues.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

} 
```

我的 GridView 方法（活动）：

```
static final String[] MOBILE_OS = new String[] { "homework", "schedule",
        "planner", "settings" };
private void setGridView() {
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, MOBILE_OS));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {
            switch (position) {
            case 0:
                v.setBackgroundColor(R.drawable.button_schedule);
                break;
            case 1:
                Toast.makeText(getApplicationContext(), "schedule", Toast.LENGTH_SHORT).show();
                break;

            case 2:
                Toast.makeText(getApplicationContext(), "planner",
                        Toast.LENGTH_SHORT).show();
                break;

            case 3:
                Toast.makeText(getApplicationContext(), "settings",
                        Toast.LENGTH_SHORT).show();
                break;
            }

        }
    });

} 
```

我的按钮选择器：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/homeworkpres" android:state_pressed="true"/>
<item android:drawable="@drawable/homeworkpres" android:state_enabled="false"/>
<item android:drawable="@drawable/homework"/> 
```

移动.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:gravity="center"
android:padding="5dp" >

<ImageView
    android:id="@+id/grid_item_image"
    android:layout_width="140dp"
    android:layout_height="140dp"
    android:layout_gravity="center"
    android:contentDescription="@string/logo"
    android:src="@drawable/plannerbut"
    >
</ImageView> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:51:07.860

```
gridview.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub

        arg1.setBackgroundColor(R.drawable.selector);

        }}); 
```

选择器.xml

```
 <item 
        android:state_pressed="true"
        android:drawable="@drawable/btn_pressed"/>
    <item 
        android:state_enabled="false"
        android:drawable="@drawable/btn_pressed"/>
    <item
        android:drawable="@drawable/btn_normal"/> 
```

其中 btn_pressed 和 btn_normal 是您的图像。

# c# - 如何使用 SharpPcap 打开 pcap 文件

> ID：14569864
> 
> 赞同：-2
> 
> 时间：2013-01-28T19:42:39.307
> 
> 标签：c#, pcap, packets

我正在制作 ac# 数据包分析器，它将打开由 wireshark 创建的 pcap 文件......并将数据包加载到图形列表中。soo，我怎样才能让 sharppcap 解析文件并显示数据包（即使在控制台窗口中）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:52:05.323

这是一个示例，显示了如何去做你所要求的。

[从文件中读取](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET#readFromFile)

大约一年前，我将它用于我正在从事的一个项目。最后，该库发布了一个（抱歉，我不记得确切的细节）。所以最后，我不得不使用 WinPCap 和 pInvoke 一个原生 C++ 库。但是 pcap 文件的打开和显示与 SharpPcap 配合得很好

# android - 一个 Asynctask 用于多个活动？

> ID：14569868
> 
> 赞同：3
> 
> 时间：2013-01-28T19:42:59.310
> 
> 标签：android, android-asynctask

基本上，我有一个 Asynctask 用于下载文件。我可以从我的主 UI 活动中调用它，但如果我想从不同的活动中调用它怎么办 - 即一个活动是带有下载手册链接的主菜单，另一个活动是所有可用文档的 ListView要下载。

我必须为此创建另一个 Asynctask 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:47:50.763

我猜你的 MainActivity 中有 AsyncTask 作为内部类。您可以获取 AsyncTask 的代码并将其放入两个类都公开（或可访问）的新文件中。请记住，您不能多次[执行](https://stackoverflow.com/questions/6373826/execute-asynctask-several-times)AsyncTask 的实例，但可以创建 AsyncTask 的多个实例。

```
class MainActivity{
new MyTask().execute();
} 
```

.

```
class DifferentActivity {
  new MyTask().execute();//a new instance
} 
```

.

```
class MyTask extends AsyncTask{
   public MyTask(Context context){
   }//Pass in context.
} 
```

所有不同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:51:13.497

必须从 UI 线程调用 Asynctasks，这通常是正在运行的活动。

听起来这些活动是通过意图启动的，并且它们显示自己的 UI，所以是的，您可以从它们运行 Asynctasks。

唯一的规定是现在您需要在所有活动都可以看到的地方声明/定义异步任务（因此可以创建一个扩展异步任务 com.myapp.MyAsyncTask 的类，该类还包括活动，例如 com.myapp.MyMainMenuActivity）。

# rest - REST 返回正确的响应

> ID：14569872
> 
> 赞同：0
> 
> 时间：2013-01-28T19:43:20.540
> 
> 标签：rest

我有一个 API，允许客户端通过 uri 发布请求消息：[url]/Request

```
The Request message is xml:
<Request>
    <Source>1234</Source>
    <Destination>5551111</Destination>
    <Message>Hello</Message>
</Request>

The response message is
<Response>
    <Id>2589</Id>
    <Status>Stored</Status>
</Response> 
```

在 REST 意义上，位于 /Request 的服务在 HTTP 响应中返回响应消息是否正确？或者，/Request 帖子是否应该返回一个类似

```
/Response?MessageId=2589 
```

在哪里返回响应消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:45:49.320

`POST`HTTP 规范对请求有这样的说法：

> 如果在源服务器上创建了资源，则响应应该是 201（已创建）并包含描述请求状态并引用新资源的实体和 Location 标头（参见第 14.30 节）。

因此，从技术上讲，如果一个实体包含在 POST 响应中，它应该描述请求的状态。然而，什么构成`status of the request`，完全取决于实施者。大多数大型实现将返回新创建资源的表示以指示“成功”，并返回错误消息以指示“失败”。在任何情况下，您都希望将`Location`响应的标头设置为新创建资源的 URI。

# asynchronous - 如何添加延迟以包含脚本

> ID：14569873
> 
> 赞同：0
> 
> 时间：2013-01-28T19:43:22.677
> 
> 标签：asynchronous, include, smarty

我用于我的网站的软件使用 smarty 模板，因此每个 Javascript 都添加到所有页面，如下所示：

```
{script src="/js/jquery.min.js"} 
```

与此类似的行在软件模板文件中，所有这些文件都由 .tpl、.js 和 .css 文件组成。这些 {script} 行在 scripts.tpl 中，通过 {include template="scripts/scripts.tpl"} 从 header.tpl 调用。

我尝试了各种不同的方法来添加延迟或异步，但这些似乎在生成代码时被删除了。例如：

```
{script src="/js/jquery.min.js" defer="async"} 
```

解析后，网站源代码显示为：

```
<script type="text/javascript" src="/js/jquery.min.js"></script> 
```

请注意，延迟异步完全丢失。

有没有办法可以将“延迟”标签添加到这些 {script} 包含？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:06:38.943

您需要像这样使用 {literal} 标签：

```
{literal}
<script type="text/javascript" src="script.js"></script>
{/literal} 
```

如果你想在其中打开花括号，你需要使用 {ldelim} 和 {rdelim} 而不是花括号。

[http://www.smarty.net/docsv2/en/language.function.ldelim.tpl](http://www.smarty.net/docsv2/en/language.function.ldelim.tpl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:01:18.207

我认为您可以使用文字标签，在标签中您必须调用 javascript 文件。

```
{literal} {/literal} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T14:13:34.723

利用

```
{script src="/js/jquery.min.js" defer} 
```

代替

```
{script src="/js/jquery.min.js" defer="async"} 
```

# ruby-on-rails - 快速测试：如何包含活动记录的一部分

> ID：14569877
> 
> 赞同：1
> 
> 时间：2013-01-28T19:43:26.713
> 
> 标签：ruby-on-rails, rspec

在不加载整个 Rails 应用程序的情况下测试模型时，如何加载我需要的 Rails 位？例如，我有一个包含验证的模型，但我不知道如何加载 active_model/validations。

我试过这个：

```
require 'activemodel/lib/active_model/validations' 
```

但它抛出了这个错误：

```
cannot load such file -- activemodel/lib/active_model/validations 
```

我也试过这个：

```
require ActiveModel::Validations 
```

但它抛出了这个错误：

```
uninitialized constant ActiveModel (NameError) 
```

知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:58:24.053

考虑尝试[Spork](https://github.com/sporkrb/spork)

Spork 预加载 Rails，因此当您运行每个测试时，它没有那么多的前置时间。

这是 Ryan Bates 关于如何设置 spork 的截屏视频。

[http://railscasts.com/episodes/285-spork](http://railscasts.com/episodes/285-spork)

# jquery - Grails：标签 [remotelink] 不存在。找不到命名空间的标记库：g

> ID：14569886
> 
> 赞同：2
> 
> 时间：2013-01-28T19:43:58.530
> 
> 标签：jquery, grails, grails-2.0

我正在尝试在我的项目中使用 g:remotelink 标签。当我尝试渲染项目主页时，出现以下错误：

```
 Error mapping onto view [/index]: Error processing GroovyPageView: Tag [remotelink] does not exist. No tag library found for namespace: g
   Line | Method
->> 886 | runTask in java.util.concurrent.ThreadPoolExecutor$Worker
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   908 | run     in     ''
^   680 | run . . in java.lang.Thread
Caused by GroovyPagesException: Error processing GroovyPageView: Tag [remotelink] does not exist. No tag library found for namespace: g
->> 461 | runTask in /grails-app/views/index.gsp
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
Caused by GrailsTagException: Tag [remotelink] does not exist. No tag library found for namespace: g
->>   8 | doCall  in /grails-app/views/index.gsp 
```

这里发生了什么？我可以毫无问题地在同一页面中使用其他 grails 标签！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:58:42.627

看起来像大写：`remoteLink`

# javascript - 选择并将类应用于具有相同类的多个 div

> ID：14569890
> 
> 赞同：1
> 
> 时间：2013-01-28T19:44:09.033
> 
> 标签：javascript, jquery, css

我有一个带有类似于此的标记的项目列表：

```
<article class="day past">
  <div class="schedule schedule-261 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-283 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-290 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-261 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-290 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-300 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article>
<article class="day past">
  <div class="schedule schedule-261 event">
    <h4>Title</h4>
    <p>Lorem ipsum...</p>
  </div>
</article> 
```

`schedule-NUMBER`类别是根据数据库中的项目 ID 分配的。基本上，这是来自具有重复事件的日历的标记，因此某些事件将共享相同的数据库记录。

如果一个项目是“重复的”（即存在多个 div ），我想为所有div`schedule-261`添加/删除一个额外的类。`schedule-261`如果一个项目不是“重复的”（即只有一个 div 带有`schedule-283`），则悬停时不会应用额外的类。

jQuery 是这个特定项目的首选库，因此首选 jQuery 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:56:45.540

```
$(".schedule").each(function() {
    var cls = (this.className.match(/schedule-\d+/) || []).pop();
    if (cls.length === 0) return;

    var els = $(".schedule." + cls);
    if (els.not(this).length > 0) {
        els.hover(function() {
            els.addClass("someClass");
        }, function() {
            els.removeClass("someClass");
        });
    }
}); 
```

**演示：http:** [//jsfiddle.net/DSYpA/](http://jsfiddle.net/DSYpA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:54:29.923

```
$('article .schedule').on('mouseover', function () {

    var s = $(this); 
    if(s.size()>1) {
       s.addClass('myHoverClass');
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:49:42.080

找到“schedule-[Number]”类并添加样式类：

```
$(".schedule").on("someevent", function(){
    var className = this.className;
    var classes = className.split(" ");
    for(var i=0;i<classes.length;i++)
    {
        var cls = classes[i];
        if (cls.indexOf("schedule") != -1 && cls.replace("schedule").length !== 0 && $("." + cls).length > 1)
        {
              $("." + cls).addClass("whatever");
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T20:05:43.530

```
$('.schedule').each(function()
{
   var s=this.className.split(/\s+/).filter(function(w){return /schedule-\d+/.test(w);});
   if (s && $('.' + s).length > 1) $('.' + s).addClass('yourclass');  
}); 
```

# html - 内容超出 div

> ID：14569893
> 
> 赞同：0
> 
> 时间：2013-01-28T19:44:19.313
> 
> 标签：html, css, css-float, overflow, positioning

正如标题所暗示的，我的问题是内容不会留在主容器内（不使用浮动）。

是的，我知道 Stack 上有很多关于这个问题的问题，尽管我尝试过的解决方案都不适合我。

我试过的：

*   溢出：隐藏在“#infoBox”上
*   “#infoBox”中最后一个节点为“clear:both”的 div
*   位置：'#infoBox' 的 CSS 中的相对位置

**HTML：**

```
<div id="infoBox">
    <div id="statsDiv">
        <div id="nrOfCrimes">
            <div id="nrOfCrimesGraphDiv">
                //... code for jQuery Visualize (graphs)
            </div>
            <ul>
                //... li's ...
            </ul>
        </div>
        <div id="crimesPerMonth">
            <div id="crimesPerMonthGraphDiv">
                //... code for jQuery Visualize (graphs)
            </div>
            <ul>
                //... li's ...
            </ul>
        </div>
    </div>
</div> 
```

**CSS：**

```
#infoBox {
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
  width: 89%;
  background: #fbfbf7;
  margin: 0px auto;
  margin-bottom: 40px;
  padding-left: 40px;
  padding-right: 40px;
}

#nrOfCrimesGraphDiv {
  position: absolute;
  top: -100px;
  left: 300px;
}

#crimesPerMonthGraphDiv {
  position: absolute;
  top: -80px;
  left: 300px;
} 
```

**注意：**没有为“#statsDiv”、“#nrOfCrimes”和“#crimesPerMonth”指定 CSS。

正如您在此图像上看到的，元素漂浮在主容器之外：

![](../Images/e679d5947d9d76cbc6e6d05972651809.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:47:43.177

您的图形 div 绝对定位在具有静态定位的 div 内。您可能想要添加 position:relative 到您的 #infoBox 规则。这将导致绝对定位在 #infoBox 边界框内生效，而不是在外部边界框内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:48:57.273

绝对定位从布局中移除一个元素——因此父容器不再知道该元素有多大（甚至它在哪里）。

您要么必须手动设置容器的大小来弥补这一点，要么使用浮动。如果您确实使用浮动，请务必清除浮动以允许正常的文档流继续。

# ios - UIViewController 仅处理共享功能

> ID：14569894
> 
> 赞同：0
> 
> 时间：2013-01-28T19:44:20.023
> 
> 标签：ios, share, viewcontroller

我有一堆应用程序密集地向社交网络、电子邮件等共享数据。我还必须检查用户的设备是否运行 iOS 5 或 6，以便显示 UIActivityViewController 或 UIActionSheet 等。

我想取消我的视图控制器的所有这些功能，并将代码放在一个我可以调用的类中：[ShareManager share:userInfo] 然后这个“ShareManager”类应该向用户并执行相应的操作。问题是大部分共享都是通过模态视图控制器完成的，因此“ShareManager”应该是一个视图控制器，对吧？哪种方法是正确的？没有视图的视图控制器？一些模式？根本不取出代码？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:25:57.197

自己找了几个项目：

[https://github.com/jmacmullin/BCDShareSheet](https://github.com/jmacmullin/BCDShareSheet)

[https://github.com/blockhaus/BMSocialShare](https://github.com/blockhaus/BMSocialShare)

两者都使用共享实例（继承 NSObject）来完成工作。

欢迎任何其他想法

# c++ - 状态机解释

> ID：14569896
> 
> 赞同：-1
> 
> 时间：2013-01-28T19:44:42.577
> 
> 标签：c++, command-line, operating-system, switch-statement, state

这学期我们在操作系统课上学习状态机，我很挣扎。这是我们提供的一些代码的片段。谁能向我解释它在做什么或如何实现开关？我没有运气就读完了这本书，而且我的老师这周没有空。这不是一个作业，而是一个不计分的练习，可以帮助我们理解如何实现状态。请帮我！

```
/* Implements a state machine that parses the command line arguments, searching for switches and switch parameters.*/

int switches::getswitch()
{
while (true)                        // loop until a switch is        identified and returned
{
    int c = next();             // get next character to parse

    switch (state)                  // process the current state
    {
        case START:    //whats going on here?
        {
            sign = 0;

            if (c == END_S && index >= args.size())
                return END_S;
            switch (c)
            {
                case '/':
                    state = S_SWITCH;
                    break;
                default:
                    next_arg();
                    state = START;
                    break;
            }
            break;
        }

        // Add states here, what are the states that need to be implemented and how are they implemented?

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:56:42.110

状态机只是解决软件或计算机硬件问题的一种方式。您将设计分解为一系列有意义的步骤（称为状态），然后根据特定条件从一个状态转换到另一个状态。[有关简单示例](http://en.wikipedia.org/wiki/State_machine#Example%3a_a_turnstile)，请参阅有关状态机的 Wikipedia 文章。

`switch`在这种情况下，使用语句（常用方法）检查​​当前状态。每种情况的代码都会为该状态执行它需要执行的任何特定任务，然后设置下一个状态。如果您对`switch`语句的作用感到困惑，请参阅[本指南](http://www.cplusplus.com/doc/tutorial/control/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T20:05:08.987

这基本上是一个轮询循环（谷歌是什么意思）。您有“c”，它是当前输入，由“next()”收集。

在每个循环中，您只有 2 条信息：

-state (你当前的状态) -c (你当前的输入)

您必须使用状态图追踪所有相关案例。您必须切换“状态”，并且在每种情况下都必须正确处理“c”（当然，如果必须更新状态，则必须更新）。可选地，根据当前输入和状态（例如“next_arg()”调用），还有其他事情要做。

如何实施新状态？只需在 switch 语句中添加更多案例，当然首先您需要一个好的状态图作为参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:04:39.807

蛇和梯子游戏将是最简单的状态图示例。如果您处于某种状态并且输入是 X 并且基于输入您可以移动下一个状态（上/下/水平）。

在您的示例中，它将等同于

读取输入 检查当前位置 移动空格 Case UP 做一些动作 Case DOWN 做一些动作

希望这个类比对你有帮助

# android - 每次关闭 Eclipse 时都无法重建 R.java

> ID：14569899
> 
> 赞同：0
> 
> 时间：2013-01-28T19:44:51.990
> 
> 标签：android, eclipse, r.java-file

我知道有很多关于 R.java 问题的问题，但我找不到我的确切问题的好答案。

我有一个运行良好的项目。但是一旦我关闭并重新打开 Eclipse，它就会停止解析 R.java。然后，如果我清理项目，它不会重建文件。我找到的唯一解决方案如下：

*   删除项目文件夹和 .metadata 文件夹。
*   重新导入项目
*   然后它工作正常

但是您确实明白，每次我想关闭 Eclipse 时都这样做对我来说并不好玩。我有时需要关闭 Eclipse ;)

而且当然 ：

*   我检查了我所有的 XML 都很好
*   我之前曾多次尝试清理/重建项目
*   我试图重新导入项目，但它不起作用
*   对于其他更简单的项目，我没有这个问题。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:54:00.907

看起来这是 ADT 21.0.1 的错误！基本上，它无法构建我的项目，因为它包含“.SVN”文件夹。此外，每次我想导出我的 Android 应用程序时都会遇到构建错误。我下载了新的21.1版本，问题解决了！

以下是有关此错误的更多详细信息： [https ://code.google.com/p/android/issues/detail?id=42051](https://code.google.com/p/android/issues/detail?id=42051)

它说它在 Windows 7 上，但我在 Mac OS X 上，我遇到了同样的问题。

# jquery-chosen - 如何将标题属性添加到选择的选项标签？

> ID：14569903
> 
> 赞同：3
> 
> 时间：2013-01-28T19:45:16.967
> 
> 标签：jquery-chosen

我正在使用“选择的插件”，但不确定如何将属性添加到选择列表的选项标签中。

我已经在准备好的文档上使用 jQuery 进行了尝试，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-24T09:36:47.630

您需要将 Chosen.Jquery.js 修改为以下内容以使其工作

使用选择 1.0 版本

第62行添加这行代码

```
this.parsed.push({
        array_index: this.parsed.length,
        options_index: this.options_index,
        value: option.value,
        text: option.text,
        html: option.innerHTML,
    title: option.title, // this is Line 62 add this line
        selected: option.selected,
        disabled: group_disabled === true ? group_disabled : option.disabled,
        group_array_index: group_position,
        classes: option.className,
        style: option.style.cssText
      }); 
```

修改第 255 行

```
return "<li title=\"" + option.title +"\"  class=\"" + (classes.join(' ')) + "\"" + style + " data-option-array-index=\"" + option.array_index + "\">" + option.search_text + "</li>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T05:06:24.093

`I have tried this..but no luck`

这取决于你尝试了什么。试试这个函数，用你希望它选择的对应物继承标题的选择元素调用它

```
function cloneTitles(selectBox) {
    //make sure it has already been chosen-ised
    selectBox = $(selectBox).chosen();

    //get all the original options, should be in same order as chosen ones
    var origOpts = selectBox.find('option');

    //get all the chosen-created 'options'
    //NB there may be a better way to grab the chosen created element
    var chznOpts = selectBox.next().find('.active-result')

    //foreach option
    origOpts.each(function(index, origOpt) {
        //copy the attribute from the original
        $(chznOpts[index]).attr('title', $(origOpt).attr('title'));
    });
} 
```

`I have tried this on document ready`
您的问题可能是您在 selected.js 转换您的选择框之前所做的任何尝试，但此功能应该可以缓解这种情况。

此外，如果您需要多个选择框，只需使用`.each()`
（例如`selectArray.each(function(i, select) { cloneTitles(select); })`

我假设您使用的是 jQuery 而不是 Prototype（给定您的最后一行）
所以如果您愿意，您可以传入 '#id' 而不是 <DOMObj> 。
可以修改代码以克隆给定属性，而不是`'title'`，甚至是给定属性的数组！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T21:49:08.777

使用选择的 1.1 版本

```
html: option.innerHTML,   // Search
title: option.title,      // Add 
```

.

```
option_el.innerHTML = option.search_text;    // Search
option_el.title = option.title;              // Add 
```

# javascript - 对象有键，但计算结果为 null

> ID：14569906
> 
> 赞同：0
> 
> 时间：2013-01-28T19:45:24.417
> 
> 标签：javascript, object, types, properties, indexeddb

问题是，没有可以编写的“标准函数”来检测是否“设置”了某些东西。例如，如果它确实是一个空对象，那么你就不想使用它；但是，如果它有键，那么您确实想使用它 - 但是，如果您尝试查看它是否有键而它没有，即使“typeof”返回“object”，使用“Object.keys()”抛出一个错误，说它不是一个对象。所以，我们似乎在这里有一个catch 22（o_O）......有没有更好的方法来查看一个对象是否真的为空，或者它是否有键，而不会引发错误？

我一直在使用一个基本函数来查看一个对象是否甚至是 SET，然后再查看它是否具有有效的 VALUE，但是，我遇到了失败的情况。在 indexeddb 场景和“this.items”场景中，即使它们的“类型”是“对象”，并且它们的“对象”有键，它们的计算结果都为“null”；但是如果我在没有键时评估键，它将引发另一个错误，因为此时对象 TRULY 为空（没有键/属性）。使用“对象”函数，例如“Object.keys”或“hasOwnProperty”等会引发“这不是对象”错误。

本质上，我需要做的是能够正确确定：“这个对象是否被设置为任何东西，或者它是一个真正的空对象？”。在这种情况下，这意味着“它是否具有任何属性，即使它们各自的值为‘null’？” - 我只需要知道它们确实有属性，而不使用“try catch”块，也没有使用对象函数（因为如果对象真的为空，它们就会失败）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:13:48.970

在失去问题以及复制它的能力之后，我再次发现了问题，并且，由于我没有被剥夺睡眠，我解决了它，并且，我可以告诉你如何复制它：

```
var $o = {};
// THIS is the CAUSE of the problem
$o.property = [];
$key = '1234asdf';
$value = 'this is a value for 1234asdf';
$o.property[$key] = $value;
alert(Array.isArray($o.property)); 
```

但是，出于所有意图和目的，这必须作为“对象”而不是数组传递，因为各种库函数取决于正确的标识。我知道，根据“ecma”，这实际上是“正确的”，但是，如果不调用“对象”函数（eh：“Object.keys”）来查看它是否产生，我们肯定无法正确检测到它一个致命错误，这意味着它确实是一个“数组”，而不是“转换为带有键的对象的数组”。

```
var $o = {};
// THIS is the SOLUTION to the problem
$o.property = {};
$key = '1234asdf';
$value = 'this is a value for 1234asdf';
$o.property[$key] = $value;
alert(Array.isArray($o.property)); 
```

所以，答案是：确保在可能的情况下使用正确的构造器，因为在某些时候，它确实很重要！jsfiddle：http: [//jsfiddle.net/vector_thorn/RqhBm/1/](http://jsfiddle.net/vector_thorn/RqhBm/1/)

哦，这也是对象“$o.property”被评估为“无效”的原因，因为被检测为空或 null 或 false。它会 == false，但不会 === false，这是因为“空数组”对我来说没用，所以，由于它被检测为数组，因此函数正在评估“$o.property.length”，它是 0，而不是“Object.keys($o.property).length”，它是 1 - 它具有 VALID 和 USABLE 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:53:34.953

使用类似的东西怎么样`typeof foo === 'undefined'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:59:09.440

要确定变量/字段/任何内容是否是实际对象（与`null`、`undefined`或原语相反），您可以编写如下函数：

```
function isActualObject(x) {
    return x && // not null, undefined, false, 0, or ''
           typeof x !== 'number' && // not a numeric primitive
           typeof x !== 'boolean' && // not true
           typeof x !== 'string'; // not a string primitive
} 
```

请注意，这不会检测对象*是否*有键，只检测它是否*可以*有键。要检测它*是否*有密钥，您可以添加一个额外的检查：

```
function hasActualKeys(x) {
    return isActualObject(x) && Object.keys(x).length > 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T02:12:15.067

如果您收到游标对象，IndexedDB API 会确保该键存在于对象存储中。记录可能还在`undefined`。

```
req = objectStore.openCursor();
req.onsuccess = function(e) {
  var cursor = e.event.target; 
  if (cursor) {
    var record = cursor.value; // record may still be undefined
    cursor.continue();
  } else {
    console.log('no more record');
  }
} 
```

您提到的问题只有在使用`get`方法时才会发生，无法区分不存在的键和`undefined`记录值。[它在规范](http://www.w3.org/TR/IndexedDB/#widl-IDBObjectStore-get-IDBRequest-any-key)中明确说明（见注） 。

# rally - 如何在 Rally 中获取用户的所有任务

> ID：14569908
> 
> 赞同：2
> 
> 时间：2013-01-28T19:45:34.503
> 
> 标签：rally

作为我的应用程序的一部分，我需要为给定项目和工作区中用户拥有的所有任务显示 Estimate、ToDo 和 Actuals 的总和（如在 TeamStatus 选项卡中完成的）。为此，我计划检索项目中每个用户拥有的所有任务，然后总结 Estimate、ToDo 和 Actuals 的特定值。我如何知道参与特定项目的人员？有没有办法获得用户拥有的所有任务？我应该如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:53:59.797

我认为您会发现以下 Stackoverflow 答案非常有用 - 这几乎符合您的需求：

[按团队成员查询任务](https://stackoverflow.com/questions/8851691/query-tasks-by-team-members)

# java - Java中IPv6地址中的奇怪符号

> ID：14569912
> 
> 赞同：2
> 
> 时间：2013-01-28T19:45:40.367
> 
> 标签：java, network-programming, ipv6

当我调用 method`NetworkInterface.getInetAddresses()`时，我得到以下字符串：

```
"fe80:0:0:0:f06c:31b8:cd17:5a44%5" 
```

我想知道`%5`这里是什么意思？如果没有这个，是否可以使用 IPv6 地址`%5`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:53:05.750

它在这里解释：

[Inet6Adress - 格式](http://docs.oracle.com/javase/6/docs/api/java/net/Inet6Address.html#format)

> 指定*scope_id*的一般格式如下：
> 
> ```
> *IPv6-address%scope_id* 
> ```
> 
> IPv6 地址是如上所述的文字 IPv6 地址。*scope_id*指的是本地系统上的一个接口，它可以通过两种方式指定。
> 
> 1.  *作为数字标识符。*这必须是一个正整数，用于标识系统理解的特定接口和范围。通常，数值可以通过系统上的管理工具来确定。每个接口可能有多个值，每个范围一个。如果未指定范围，则使用的默认值为零。
>     
>     
> 2.  *作为一个字符串。*这必须是[NetworkInterface.getName()](http://docs.oracle.com/javase/6/docs/api/java/net/NetworkInterface.html#getName())针对相关特定接口返回的确切字符串。以这种方式创建 Inet6Address 时，通过查询相关 NetworkInterface 在创建对象时确定数字范围 ID。
>     
>     
> 
> 另请注意，数字*scope_id*可以从 NetworkInterface 类返回的 Inet6Address 实例中检索。这可用于找出系统上配置的当前范围 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:50:54.267

5 是区域索引。% 用于分隔它。

一台 Windows 机器将有一个，例如 %1。

一台 Unix 机器会有一个，例如 %eth0。使用接口名称作为区域索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-18T02:11:52.570

% 符号表示 IPv6 区域或范围 ID。

[开源 IPAddress Java 库](https://seancfoley.github.io/IPAddress/)将验证 IPv6 的所有标准表示。您可以提取区域，如图所示。免责声明：我是那个图书馆的项目经理。

代码示例：

```
 try {
            IPAddressString str = new IPAddressString("fe80:0:0:0:f06c:31b8:cd17:5a44%5");
            IPAddress addr = str.toAddress();
            if(addr.isIPv6() || addr.isIPv6Convertible()) {
                IPv6Address ipv6Addr = addr.toIPv6();
                String zone = ipv6Addr.getZone();
                IPv6Address noZoneAddr = new IPv6Address(ipv6Addr.getSection());
                System.out.println("zone is " + zone + " for address " + noZoneAddr);
            }
            //use address
        } catch(AddressStringException e) {
            //e.getMessage has validation error
        } 
```

输出：

```
 zone is 5 for address fe80:0:0:0:f06c:31b8:cd17:5a44 
```

# macos - 如何在 Cocoa 中绘制 PDF 上下文

> ID：14569917
> 
> 赞同：1
> 
> 时间：2013-01-28T19:45:51.147
> 
> 标签：macos, pdf, cocoa, draw, quartz-graphics

我正在尝试使用`NSView`对象保存 PDF 文件。这是`Square`类（的子类`NSView`）的实现。

```
@implementation Square

- (id)initWithColor:(NSColor *)aColor;
{
if (self = [super init])
{
    self.frame = NSMakeRect(0, 0, 50, 50);
    self.color = aColor;
}
return self;
}

- (void)drawRect:(NSRect)dirtyRect
{
[self.color set];
NSRectFill(dirtyRect);

} 
```

这是 my `DrawView`- sublcass 的实现的一部分`NSView`

```
- (void)awakeFromNib
{
squareGroup = [[NSMutableArray alloc] init];
}

- (void)addSquare:(Square *)square
{
[squareGroup addObject:square];
[self addSubview:square];
}

- (void)drawRect:(NSRect)dirtyRect
{
[[NSColor whiteColor] set];
NSRectFill(dirtyRect);
} 
```

我可以单击按钮`Red`或`Blue`添加`Square`蓝色或红色的对象，当我单击时，`Save`我想保存`DrawView`带有`Square`对象的白色。我现在可以移动`Square`物体，`DrawView`所以每个`Square`物体都在不同的地方。

我的保存方法如下所示（在`DrawView`课堂上）：

```
- (void)saveAsPDF
{
NSString *homeDirectory = NSHomeDirectory();
NSURL *fileURL = [NSURL fileURLWithPath:[homeDirectory stringByAppendingPathComponent:@"file.pdf"]];

CGRect mediaBox = self.bounds;
CGContextRef ctx = CGPDFContextCreateWithURL((__bridge CFURLRef)(fileURL), &mediaBox, NULL);

CGPDFContextBeginPage(ctx, NULL);

for (Square *square in squareGroup) {
    [square.layer renderInContext:ctx];
}

[self.layer renderInContext:ctx];

CGPDFContextEndPage(ctx);
CFRelease(ctx);
} 
```

结果我在主目录中只有空白文件。

我的保存方法有什么问题？我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:58:06.083

[这里](http://cocoadevcentral.com/articles/000074.php)有一个非常有用的教程可以帮助你

他们提出了两种方法：第一种是这样，但第二种更全面，值得一看。

```
(void)didEnd:(NSSavePanel *)sheet
returnCode:(int)code
saveFormat:(void *)saveType
{
if (code == NSOKButton)
{
    if (pageIt)
    {

    }
    else
    {
        NSRect r = [textView bounds];
        NSData *data = [textView dataWithPDFInsideRect:r];

        [data writeToFile:[sheet filename] atomically:YES];
    }
}
} 
```

# sml - SML：尾递归局部辅助函数

> ID：14569926
> 
> 赞同：0
> 
> 时间：2013-01-28T19:46:33.430
> 
> 标签：sml, tail-recursion

我正在尝试使用尾递归本地辅助函数作为分配的一部分重新编写代码。

all_except_option 是一个返回类型为 fn 的函数：string * string list -> string list option

```
fun all_except_option ([], _ ) = NONE
| all_except_option (_, "") = NONE
| all_except_option (str_list, str) =
let
  fun all_except_option' [] = []
    | all_except_option' (x::str_list) =
      if x = str then
        all_except_option' str_list
      else
        x :: all_except_option' str_list
in
  SOME (all_except_option' str_list)
end; 
```

下面的函数是没有使用尾递归本地辅助函数的函数

```
fun sub1 ([], s) = []
| sub1 (x :: xs, s) =
case all_except_option(x, s) of  NONE => sub1(xs, s) // 
| SOME y => y @ get_substitutions1(xs, s); 
```

此函数使用尾递归，但是在递归调用辅助函数时出现错误。错误是：错误：非构造函数应用于模式中的参数：all_except_option

```
fun get_substitutions2 (s,str) = 
let fun aux(s,x::xs,acc) =  
    case x of [] => acc
| all_except_option(x, s) => aux(s,xs,xs::acc) 
in 
aux(s,str,[])
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:59:27.197

在这两种情况下，您都`all_except_option`使用`x`(a `string`) 作为第一个参数调用，而它期望 a`string list`作为第一个参数。

此外，case 的 case 不能是对函数的调用，而是对某个类型的构造函数的调用。例如，仔细查看您的代码：

```
case x of 
[] => acc
| all_except_option(x, s) => aux(s,xs,xs::acc) 
```

请注意您如何使用函数调用而不是`all_except_option`返回的类型构造，并且您正在使用`xs::acc`在这种情况下无效的构造，如`xs`列表。最后，`x`是列表的头部，所以它不能是`[]`。我仍然不清楚该`aux`功能想要实现什么，但这些错误是可疑的。

# php - 将 Post 数据从 iPhone 发送到 Codeigniter 后端

> ID：14569933
> 
> 赞同：0
> 
> 时间：2013-01-28T19:46:56.060
> 
> 标签：php, codeigniter, post, afnetworking

所以我在将 POST 数据发布到我的 codeigniter 控制器时遇到问题，但是如果我有一个带有 $_POST 的常规 PHP 脚本，它可以工作，这是我的代码：

iPhone方法：

```
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:

                            [username text],@"username",

                            nil];

    AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://www.mysite.com/"]];

    [client postPath:@"test/text_func" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {

        NSString *response = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];

        NSLog(@"%@",response);

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {

        NSLog(@"%@",[error localizedDescription]);

    }]; 
```

Codeigniter 控制器：

```
public function test_func() {
    echo "Username: " . $this->input->post('username');
} 
```

如果我从手机运行它，我会在日志中得到“用户名：”，没有实际用户名。

但是，如果我在单独的服务器上创建一个 PHP 脚本：

```
echo "Username: " . $_POST['username']; 
```

当我从手机运行它时，我会得到这个：

```
"Username: my username" 
```

所以我知道 iPhone 应用程序正在发布数据，但我无法让 codeigniter 控制器读取它。

我已经制作了许多使用 AFNetworking 没有问题的 iPhone 应用程序，但从来没有使用 codeigniter 后端，所以我不知道问题可能是什么。

我没有开启 CSRF 保护。

任何帮助将不胜感激。

以上所有代码都严格用于测试目的，虽然不是真正的方法，但具有相同的基本概念。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:01:55.293

好的，问题是我在电话网址上的 https 中缺少“s”，该网站是安全的...

# google-maps - 谷歌地图 V3 bindDom 等效？

> ID：14569935
> 
> 赞同：1
> 
> 时间：2013-01-28T19:47:01.443
> 
> 标签：google-maps, google-maps-api-3

我们正在从 Google V2 maps API 迁移，我在将此行转换为 V3 时遇到了一些麻烦：

```
GEvent.bindDom(this.DOMItem, 'mousedown', this, this._customFunction); 
```

我知道`google.maps.event.addDomListener`但是有没有办法`this`像 bindDom 在 V2 中那样传递参数？否则我们的自定义函数无法访问创建绑定的对象。该对象具有我们在自定义函数中需要的属性。也许我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:18:01.003

你可以只使用javascript的`call`方法。

```
google.maps.event.addDomListener(this.DOMItem, 'mousedown', function() { this._customFunction.call(this); }); 
```

在 的范围内`_customFunction`，`this`将设置为您作为第一个参数传递给`call`.

# html - 同时使用顶部、左侧、右侧和底部 css 来调整元素大小是否有效？

> ID：14569936
> 
> 赞同：6
> 
> 时间：2013-01-28T19:47:03.240
> 
> 标签：html, css

我以前见过它并且已经做过，所以我知道它的工作原理非常一致，但是，我想知道这是否有效，以及是否有我没有想到的警告。

示例： http: [//jsfiddle.net/sfctB/67/](http://jsfiddle.net/sfctB/67/)我最近为有 FF 溢出问题的人提供了此修复程序，这是由 box-sizing 属性引起的。添加简单的 -moz- 前缀也修复了它，但我选择了一些对我来说似乎更有效的东西。我在内容 div 上设置了顶部和底部，以便它始终在固定页眉和固定页脚之间延伸。然后设置边距以避免溢出。

我直觉地认为同时使用 top 和 bottom 或 right 和 left 会导致问题，但是，它似乎做的是在已经说明左的情况下使右行为有点像宽度，并使底部行为有点像当已经有一个顶部时的高度。

但这有效吗？在考虑长期支持时我应该使用它吗？

代码

```
html, body {
    height:100%;
    width:100%;
    overflow:hidden;
}
body {
    padding: 60px 0px;
    height: 100%;
}
.header {
    height:60px;
    background:#000;
    color:#fff;
    width: 100%;
    position: fixed;
    top:0;
}
.body {
    overflow-y: scroll;
    position:fixed;
    bottom:0;
    top:60px;
    margin: 0 0 60px 0;
}
.footer {
    height:60px;
    background:#000;
    position:fixed;
    bottom:0px;
    width:100%;
    color:#fff;
}

<!DOCTYPE html>
<html>

    <head></head>

    <body>
        <div class="header">This is header</div>
        <div class="body">[content here]</div>
        <div
        class="footer">This is footer</div>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T20:29:44.950

好问题。我想知道这个问题很久了，所以我去了规范（[http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-width)和[http://www. w3.org/TR/CSS2/visudet.html#abs-non-replaced-height](http://www.w3.org/TR/CSS2/visudet.html#abs-non-replaced-height)）。看起来它是一个完整的拼写，答案就是你所期望的。对于绝对定位的元素，如果宽度为“auto”并且定义了 left 和 right，则：

```
5\. 'width' is 'auto', 'left' and 'right' are not 'auto', then solve for 'width' 
```

同样对于高度：

```
5\. 'height' is 'auto', 'top' and 'bottom' are not 'auto', then 'auto' values for 'margin-top' and 'margin-bottom' are set to 0 and solve for 'height' 
```

然而，我认为 tPlummer 提出了一个很好的观点。规格和现实可能是两个不同的东西；尤其是对于较旧的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:01:40.543

就我而言，这是有效的加价。我已经看到该`padding`属性在 IE 中存在问题，但是，在大多数情况下，这也是 IE。

# asp.net - IIS 7 到 IIS 6 - 操作系统的差异

> ID：14569937
> 
> 赞同：0
> 
> 时间：2013-01-28T19:47:10.150
> 
> 标签：asp.net, iis, iis-7, configuration, iis-6

我们的 Windows 开发机器有 Windows 7 操作系统和 IIS 7。如果我们在这个环境中进行开发，而生产环境是 W 2003 和 IIS 6。我必须有哪些选择才能有效地将我的开发转移到生产中。不能将 Production 从 2003 升级到 2008 或更高版本。从 Windows 7 降级开发机器也不是一个好主意。感谢您的评论和反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:51:54.057

您可以将 IIS 7 中的应用程序池设置为在经典模式下运行，这使其能够像在 IIS 6 中一样处理请求。

# jquery - 在 Fancybox 2.0（使用 NextGen Gallery）中，弹性选项使图像从屏幕中心出现，而不是图像原点

> ID：14569939
> 
> 赞同：0
> 
> 时间：2013-01-28T19:47:21.537
> 
> 标签：jquery, fancybox, fancybox-2

在 Fancybox 2.0（使用 NextGen Gallery）中，弹性选项使图像从屏幕中心出现，而不是图像原点

我希望它看起来像示例中那样来自图像位置。我已经从示例中复制了确切的代码，但没有得到想要的结果

网站： [http ://www.beerpong.kevindaniels.net/competitive-beer-pong/wsobp-archive/wsobp-7/](http://www.beerpong.kevindaniels.net/competitive-beer-pong/wsobp-archive/wsobp-7/)

**编辑**：我的代码（移自评论）

```
jQuery('.fancybox').fancybox({
    openEffect: 'elastic',
    openSpeed: 150,
    closeEffect: 'elastic',
    closeSpeed: 150,
    prevEffect: 'none',
    nextEffect: 'none',
    closeBtn: false,
    helpers: {
        title: {
            type: 'inside'
        },
        buttons: {}
    },
    afterLoad: function () {
        this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
    }
}).removeAttr("title"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:49:42.110

添加此选项：`'orig': $(this)`

它将效果的原点设置为被单击的元素。

# mysql - Mysql list tables and sizes - order by size

> ID：14569940
> 
> 赞同：37
> 
> 时间：2013-01-28T19:47:22.267
> 
> 标签：mysql

What would be the query to list all tables in a database order by their size in mysql?

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-01-28T19:51:51.360

Try this...

```
SELECT TABLE_NAME, table_rows, data_length, index_length, 
round(((data_length + index_length) / 1024 / 1024),2) "Size in MB"
FROM information_schema.TABLES WHERE table_schema = "schema_name"
ORDER BY (data_length + index_length) DESC; 
```

Note: Replace `schema_name` above with the name of your database

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-20T06:28:38.403

Run the following query in the mysql client

```
SELECT table_name AS "Tables", 
round(((data_length + index_length) / 1024 / 1024), 2) "Size in MB" 
FROM information_schema.TABLES 
WHERE table_schema = "$DB_NAME"
ORDER BY (data_length + index_length) DESC; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-01-03T08:36:30.857

Execute following query in information_schema database:

```
SELECT table_schema AS "Database name",
SUM(data_length + index_length) / 1024 / 1024 AS "Size (MB)" 
FROM information_schema.TABLES 
GROUP BY table_schema 
ORDER BY (SUM(data_length + index_length) / 1024 / 1024) DESC; 
```

# css - 为什么我不能针对智能手机而不是响应式设计的智能手机

> ID：14569941
> 
> 赞同：0
> 
> 时间：2013-01-28T19:47:22.827
> 
> 标签：css, responsive-design

我正在尝试为智能手机定义 CSS，而我的 CSS 中的其他所有内容都可以按原样进行。

CSS：

```
.content { background: orange; padding: 30px; }
#mobile { display:none; }

@media screen and (max-device-width: 480px){
    #mobile { display: block; }
    #desktop { display: none; }
} 
```

html:

```
<!DOCTYPE html>
<html>
<head></head>
<body>
  <div id="mobile">this is mobile</div>
  <div id="desktop">this is desktop</div>
</body>
</html> 
```

现场演示：http: [//jsfiddle.net/L5zDQ/](http://jsfiddle.net/L5zDQ/)

如果您使用上面的演示缩小浏览器窗口，“这是移动的”永远不会出现。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:51:00.003

而不是使用`max-device-width`你应该使用`max-width`，这取决于浏览器当前状态的大小：

```
@media screen and (max-width: 480px) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:51:19.740

max-device-width 是屏幕的大小，*当*您调整窗口大小时它不会改变。

您想要的是`max-width`与浏览器窗口的大小相比；

```
@media screen and (max-width: 480px){
    #mobile { display: block; }
    #desktop { display: none; }
} 
```

有关该主题的更多讨论，请参阅[此问题。](https://stackoverflow.com/questions/6747242/what-is-the-difference-between-max-device-width-and-max-width-for-mobile-web)

# css - 引导程序：使用 .btn 和 .accordion-toggle

> ID：14569942
> 
> 赞同：0
> 
> 时间：2013-01-28T19:47:24.030
> 
> 标签：css, twitter-bootstrap

我将该`btn`类添加到`accordion-toggle`手风琴小部件的 div 中，它似乎工作正常。我只是想知道这是否会被视为未定义的行为，以及我是否应该期望在未来的版本中看到它中断。

[jsfiddle](http://jsfiddle.net/mss9b/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:54:28.563

该类`.btn`只真正添加了视觉样式（字体大小、背景颜色等），所以我看不出它将来会中断的原因。

也就是说，如果您担心，为什么不直接重用样式`.btn`并将其直接应用于？`.accordion-toggle`

# jquery - Youtube 暂停所有具有相同类的 iframe

> ID：14569951
> 
> 赞同：1
> 
> 时间：2013-01-28T19:47:48.957
> 
> 标签：jquery, iframe, youtube-api

我想通过简单的点击暂停所有 youtube 电影（与其 ID 无关）。我为可以使用特定 ID 的代码制作了一个 jsfiddle。但是，由于我无法分配唯一 ID，因此我希望能够暂停所有 youtube iframe。然而，iframe 确实有一个类。[http://jsfiddle.net/4bPAJ/3/](http://jsfiddle.net/4bPAJ/3/) 任何正确方向的帮助表示赞赏:)

干杯，阿德南

Javascript：

```
function callPlayer(e, t, n) {
    function o(e, t) {
        var n = e ? window.addEventListener : window.removeEventListener;
        n ? n("message", t, !1) : (e ? window.attachEvent : window.detachEvent)("onmessage", t)
    }
    if (window.jQuery && e instanceof jQuery) e = e.get(0).id;
    var r = document.getElementById(e);
    if (r && r.tagName.toUpperCase() != "IFRAME") {
        r = r.getElementsByTagName("iframe")[0]
    }
    if (!callPlayer.queue) callPlayer.queue = {};
    var i = callPlayer.queue[e],
        s = document.readyState == "complete";
    if (s && !r) {
        window.console && console.log("callPlayer: Frame not found; id=" + e);
        if (i) clearInterval(i.poller)
    } else if (t === "listening") {
        if (r && r.contentWindow) {
            t = '{"event":"listening","id":' + JSON.stringify("" + e) + "}";
            r.contentWindow.postMessage(t, "*")
        }
    } else if (!s || r && (!r.contentWindow || i && !i.ready)) {
        if (!i) i = callPlayer.queue[e] = [];
        i.push([t, n]);
        if (!("poller" in i)) {
            i.poller = setInterval(function () {
                callPlayer(e, "listening")
            }, 250);
            o(1, function u(t) {
                var n = JSON.parse(t.data);
                if (n && n.id == e && n.event == "onReady") {
                    clearInterval(i.poller);
                    i.ready = true;
                    o(0, u);
                    while (n = i.shift()) {
                        callPlayer(e, n[0], n[1])
                    }
                }
            }, false)
        }
    } else if (r && r.contentWindow) {
        if (t.call) return t();
        r.contentWindow.postMessage(JSON.stringify({
            event: "command",
            func: t,
            args: n || [],
            id: e
        }), "*")
    }
}
callPlayer("whateverID", "playVideo") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:00:12.310

试试这个：

```
$(document).ready(function () {
    var i = 0;
    $(".youtubeplayer").each(function () {
        $(this).attr("id", "youtubeplayer" + i);
        callPlayer("youtubeplayer" + i, "playVideo");
        i++;
    });
}); 
```

这将为每一帧添加一个 id，并在后面调用该函数。

# c++ - 如何在 OpenMp 中管理共享变量

> ID：14569954
> 
> 赞同：0
> 
> 时间：2013-01-28T19:47:54.093
> 
> 标签：c++, c, multithreading, openmp

我正在尝试编写一个 OpenMp 程序。我有一个迭代 100 次的 for 循环。我把它分成了10个线程。每个线程运行 10 次迭代并根据某些条件生成一些计数。所以按照这个逻辑，每个线程都会生成自己的计数。

我想要的只是将此计数复制到一个变量中，该变量将保存所有线程的所有计数的总和。如果我们让这个变量（共享）在循环中写入，我猜它会序列化线程。我只想将每个线程的最后一个计数复制到一个全局变量中。这样我将只序列化 10 个赋值语句。我尝试使用`lastprivate`，但我对如何使用它来满足我的要求感到困惑。

这是我的代码

```
#pragma omp parallel for private(i) schedule(dynamic) shared(count)
for (i = 1; i <= 100 ; i++)
{
    if(i%2==0)
        count++; 
}
printf("Total = %d \n", count); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:54:26.970

你应该使用减少

```
int count = 0;
int i;
#pragma omp parallel for private(i) schedule(dynamic) reduction(+:count)
for (i = 1; i <= 100 ; i++)
    if(i%2==0)
        count++; 
```

# php - 如何正确自动加载 Doctrine ODM 注释？

> ID：14569955
> 
> 赞同：2
> 
> 时间：2013-01-28T19:48:01.033
> 
> 标签：php, zend-framework, mongodb, doctrine-odm

尝试使用 odm:schema:create 运行命令行工具，但出现以下错误：

```
"[Semantical Error] The annotation "@Document" in class Company_Model_Auth was never imported. Did you maybe forget to add a "use" statement for this annotation?" and
"[Semantical Error] The annotation "@EmbeddedDocument" in class Company_Model_Auth was never imported. Did you maybe forget to add a "use" statement for this annotation?" 
```

以及其他人，基本上适用于每个注释。

当我添加“使用\Doctrine\ODM\MongoDB\Mapping\Annotations\EmbeddedDocument;” （或 \Document）到它工作的文件并进入下一个模型。然后它将在下一个文件中抱怨缺少相同的类（Document / EmbeddedDocument 和任何其他注释）。是否预计我必须将 use 语句添加到每个文件中？

这是我构建 DocumentManager 的方式::

```
public function _initDm() 
{
        AnnotationDriver::registerAnnotationClasses();
        $config = new Configuration();
        $config->setProxyDir(APPLICATION_PATH . '/../data/Proxies');
        $config->setProxyNamespace('Proxies');
        $config->setHydratorDir(APPLICATION_PATH . '/../data/Hydrators');
        $config->setHydratorNamespace('Hydrators');
        $config->setMetadataDriverImpl(AnnotationDriver::create(APPLICATION_PATH . '/models'));     

        // Pull in mongo db connection options from application.ini
        $options = $this->getOption('mongo');
        $config->setDefaultDB($options['database']);

        // Create a DocumentManager and store in ZendRegistry
        $dm = DocumentManager::create(new Connection($this->_createMongoDbConnectionString($options)), $config);
        Zend_Registry::set('dm', $dm); 
} 
```

我仔细检查了 ./repos/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/Mapping/Annotations/DoctrineAnnotations.php 文件肯定被击中并且是 require_once 正确的注释文件。

作曲家提供的版本：

```
"doctrine/common": "2.3.0-RC3",
"doctrine/mongodb": "1.0.1",
"doctrine/mongodb-odm": "1.0.0-BETA7",
"symfony/console": "2.1.*@dev", 
```

任何帮助将不胜感激，因为我认为我不应该向每个文件添加 use 语句。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T20:30:35.827

注释解析器确实要求在使用之前导入注释类。代替显式导入每个注释类，您可以执行以下操作（从[测试套件](https://github.com/doctrine/mongodb-odm/blob/master/tests/Documents/User.php)中提取）：

```
<?php

namespace Documents;

use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;

/**
* @ODM\Document
*/
class User
{
    /** @ODM\Id */
    protected $id;

    /** @ODM\Field(type="string") */
    protected $username;

    // Other fields follow...
} 
```

# android - 由于要显示大量图像缩略图而导致内存不足错误

> ID：14569960
> 
> 赞同：0
> 
> 时间：2013-01-28T19:48:25.810
> 
> 标签：android, performance, android-layout, android-intent, android-ndk

以下代码用于检索所有照片，以便在 gridview 上显示。但是，如果我有 1000 张照片，则会导致内存不足错误。有没有人可以帮助解决这个问题？

PS如果有人可以，你能显示上面的编辑代码以利用延迟加载和缓存吗？我很迷茫。初始化方法主要用于设置 gridview 将使用的 ImageAdapter

谢谢！！

```
 public void initialize() {
        images.clear();
        final String[] columns = { MediaStore.Images.Thumbnails._ID };
        final String orderBy = MediaStore.Images.Media._ID;
        @SuppressWarnings("deprecation")
        Cursor imagecursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,
                 null, null, orderBy);

        if(imagecursor != null){
            int image_column_index = imagecursor
                    .getColumnIndex(MediaStore.Images.Media._ID);
            int count = imagecursor.getCount();
            for (int i = 0; i < count; i++) {
                imagecursor.moveToPosition(i);
                int id = imagecursor.getInt(image_column_index);
                ImageItem imageItem = new ImageItem();
                imageItem.id = id;
                lastId = id;
                imageItem.img = MediaStore.Images.Thumbnails.getThumbnail(
                        getApplicationContext().getContentResolver(), id,
                        MediaStore.Images.Thumbnails.MICRO_KIND, null);
                images.add(imageItem);
            }
            //imagecursor.close();
        }
        notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:53:07.663

您正在用尽内存，因为您正在加载大量占用大量内存的位图。简单（且正确）的答案是：不要一次全部加载它们。[相反，您应该根据需要在适配器](http://developer.android.com/guide/topics/ui/declaring-layout.html#AdapterViews)中加载每个图像。

# android - 将像素值转换为 mm - Android

> ID：14569963
> 
> 赞同：7
> 
> 时间：2013-01-28T19:48:46.123
> 
> 标签：android, pixel

由于特定需要，在我的android布局中，我使用了“mm”来提供尺寸。在 TextView 中，我也提供了以“mm”为单位的尺寸。当我这样做`textView.getTextSize()`时，返回的大小始终是像素值。我想将该像素值转换为“mm”。例如，如果我将字体大小设置为“2mm”，那么在任何设备上，当我这样做时`getTextSize()`，我想获得“2mm”。

我应该为此使用任何特定方法吗？我可以找到将“mm”转换为“pixel”的答案，但找不到任何关于转换反之亦然的信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T20:04:29.657

我们使用[TypedValue.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/util/TypedValue.java)

```
float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_MM, 1, 
                getResources().getDisplayMetrics());

  public static float applyDimension(int unit, float value,
                                       DisplayMetrics metrics)
    {
        switch (unit) {
        case COMPLEX_UNIT_PX:
            return value;
        case COMPLEX_UNIT_DIP:
            return value * metrics.density;
        case COMPLEX_UNIT_SP:
            return value * metrics.scaledDensity;
        case COMPLEX_UNIT_PT:
            return value * metrics.xdpi * (1.0f/72);
        case COMPLEX_UNIT_IN:
            return value * metrics.xdpi;
        case COMPLEX_UNIT_MM:
            return value * metrics.xdpi * (1.0f/25.4f);
        }
        return 0;
    } 
```

所以你可以试试

Pix = mm * metrics.xdpi * (1.0f/25.4f);

MM = pix / metrics.xdpi * 25.4f；

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-22T11:07:18.317

我想说一个更强大的方法（随着 Android 框架中应用的任何新见解而发展）是这样的：

```
public static float pxToMm(final float px, final Context context)
{
    final DisplayMetrics dm = context.getResources().getDisplayMetrics();
    return px / TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_MM, 1, dm);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:52:44.323

尝试查看此链接。您正在寻找屏幕像素密度。

[在android中以编程方式获取屏幕密度？](https://stackoverflow.com/questions/3166501/getting-the-screen-density-programmatically-in-android)

从这里您可以使用英寸到毫米的转换（1 英寸 == 25.4 毫米）来获得答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:56:02.520

这是谷歌的另一个选择：http: [//developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html)

您需要将此数字缩放为毫米，因此请使用 25.4 毫米 = 1 英寸。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-28T20:00:36.877

```
float mm = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX, 1, 
            getResources().getDisplayMetrics()); 
```

[应用维度参数](http://developer.android.com/reference/android/util/TypedValue.html#applyDimension%28int,%20float,%20android.util.DisplayMetrics%29)

# jdbc - 无法通过 JDBC 连接 Oracle 10g Release 2 (10.2) Express Edition

> ID：14569969
> 
> 赞同：0
> 
> 时间：2013-01-28T19:49:04.063
> 
> 标签：jdbc, oracle10g

我正在开发一个 Java EE 项目。我已经在我的项目 WebContent/WEB-INF/lib 中包含了[ojdbc14.JAR](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-10201-088211.html)

我写的代码：

```
Connection conn = null;
String driverName = "oracle.jdbc.OracleDriver";
String url = "jdbc:oracle:thin:@//127.0.0.1:8080/apex";
Class.forName(driverName);
conn = DriverManager.getConnection(url, "system", "mahesh"); 
```

我得到的运行时异常是：

```
java.sql.SQLException: Io exception: Got minus one from a read call
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:112)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:255)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:387)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:420)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:165)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:35)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:801)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at com.obos.utility.ConnectionManager.main(ConnectionManager.java:26) 
```

从最后一行开始，异常发生在 DriverManager.getConnection()

我怀疑问题出在连接字符串上，因为我可以通过 SQL 命令行实用程序使用用户名和密码登录。但我无法纠正它。

我使用了“jdbc:oracle:thin:@//127.0.0.1:8080/apex”，因为我在以下地址的浏览器中获取数据库管理器：

![在此处输入图像描述](../Images/423332ae0245018173ad0719826d6533.png)

不过我也试过“jdbc:oracle:thin:@//127.0.0.1:8080”，但没用。请帮忙。

我正在运行 Windows 8 x64。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:23:57.430

8080 是托管 webapp 的 web 服务器的端口，允许访问数据库。数据库本身不在此端口上侦听。AFAIR，Oracle 数据库的默认端口是 1521。阅读[http://docs.oracle.com/cd/B25329_01/doc/appdev.102/b25320/getconn.htm](http://docs.oracle.com/cd/B25329_01/doc/appdev.102/b25320/getconn.htm)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:31:38.357

你犯了和我一样的错误

连接字符串应该是

**字符串 url = jdbc:oracle:thin:@127.0.0.1:1521:XE**

# ruby-on-rails - 有没有办法通过 Rails 中的 has_many 关系取回一条记录？

> ID：14569970
> 
> 赞同：1
> 
> 时间：2013-01-28T19:49:06.967
> 
> 标签：ruby-on-rails, associations

在我的 Rails (3.2) 应用程序中，an`Order`有很多`LineItems`. A`LineItem`有很多`LineItemPayments`。A`LineItemPayment`有一个`Payment`。（`LineItems`可能会支付多次（订阅），这就是我在那里有连接表的原因。）

我需要能够从付款记录中查询订单信息。我可以通过关系获得一系列订单，但我知道它们总是相同的订单。Rails 中有没有办法建立关联来反映这一点？如果不是，最好设置一种方法来检索数组，然后从中挑选订单，或者只是将其`order_id`与付款一起存储并建立一个直接关系来回避这一切？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:44:28.947

您需要使用订单集合并根据您自己的逻辑相应地缩小范围。尽管您当然“可以”将 order_id 直接添加到付款中，但这将使您的数据（作为缓存）非规范化，仅在您开始遇到查询中的性能瓶颈时才建议这样做 - 否则它会在数据完整性方面遇到麻烦：

```
class Payment < ActiveRecord::Base
  has_many :line_item_payments
  has_many :line_items, :through => :line_item_payments
  has_many :orders, :through => :line_items

  # use this to get the order quickly
  def order
    orders.first
  end

  # use this to narrow the scope on the query interface for additional modifications
  def single_order
    orders.limit(1)
  end
end

class LineItemPayment < ActiveRecord::Base
  belongs_to :line_item
  belongs_to :payment
end

class LineItem < ActiveRecord::Base
  belongs_to :order
  has_many :line_item_payments
end 
```

# python - 将单独的 WX GUI 嵌入到笔记本选项卡中

> ID：14569971
> 
> 赞同：0
> 
> 时间：2013-01-28T19:49:07.603
> 
> 标签：python, wxpython, wxwidgets, wxnotebook

我基本上有 3 个独立的 wxPython GUI，我想将它们组合成一个应用程序，为每个 GUI 提供自己的笔记本选项卡。不过，我不确定如何执行此操作，并且正在寻找一些建议。我很感激我能得到的任何意见或想法。

我的想法是它应该看起来像这样：

```
import wx
import OtherFrame

class PageOne(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageOne object", (20,20))

        panel=OtherFrame.Panel(parent)
        box = wx.BoxSizer(wx.VERTICAL)
        panel.SetSizer(self,box)
        panel.Layout(self, parent)        

class PageTwo(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageTwo object", (40,40))

class PageThree(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "This is a PageThree object", (60,60))

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Simple Notebook Example")

        p = wx.Panel(self)
        nb = wx.Notebook(p)
        page1 = PageOne(nb)
        page2 = PageTwo(nb)
        page3 = PageThree(nb)
        nb.AddPage(page1, "Page 1")
        nb.AddPage(page2, "Page 2")
        nb.AddPage(page3, "Page 3")
        sizer = wx.BoxSizer()
        sizer.Add(nb, 1, wx.EXPAND)
        p.SetSizer(sizer)

if __name__ == "__main__":
    app = wx.App()
    MainFrame().Show()
    app.MainLoop() 
```

但这会产生一些错误和崩溃。如果没有 PageOne 下的 sizer，它只会在右上角放一个灰色方块，有了它们，它就会崩溃。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:49:59.253

感谢您的帮助，我得到了这个为我工作。由于我的每个其他 wx 应用程序都有包含我想要的所有小部件的 Panel 类，所以我不需要为每个页面创建类。这是代码：

```
import wx
import OtherFrame1
import OtherFrame2
import OtherFrame3

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Simple Notebook Example")

        p = wx.Panel(self)
        nb = wx.Notebook(p)
        page1 = OtherFrame1.Panel(nb)
        page2 = OtherFrame2.Panel(nb)
        page3 = OtherFrame3.Panel(nb)
        nb.AddPage(page1, "Page 1")
        nb.AddPage(page2, "Page 2")
        nb.AddPage(page3, "Page 3")
        sizer = wx.BoxSizer()
        sizer.Add(nb, 1, wx.EXPAND)
        p.SetSizer(sizer)

if __name__ == "__main__":
    app = wx.App(redirect=False)
    MainFrame().Show()
    app.MainLoop() 
```

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:10:46.237

我假设你的每个框架都有面板，里面有你想要的代码。只需从每个框架中获取小部件的代码并将其放入每个 Page 类中。您可能必须将小部件的父级更改为“self”而不是“panel”或您所称的任何内容。

这样您就不会在每个页面代码库中打开一个框架。你不想在那里打开一个框架。您希望页面成为小部件的父级，而不是打开其他东西。

# scite - 将当前选择从 Scite 提交给 R

> ID：14569977
> 
> 赞同：0
> 
> 时间：2013-01-28T19:49:27.030
> 
> 标签：scite

我想将当前选择提交给 R 而不是整个文件。目前我在我的 r.properties 中有这个（它提交整个文件）：

命令.go. *.R="C:\Program Files\R\R-2.15.2\bin\x64\Rscript.exe" --vanilla "$(FileNameExt)" command.go.subsystem。*.R=0

如何仅提交我当前在 Scite（在 Windows 上）中选择的内容？ [http://www.scintilla.org/SciTEDoc.html](http://www.scintilla.org/SciTEDoc.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:26:47.503

您可以使用`command.input.number.filepattern`，您链接的文档中对此进行了说明。例如：

```
command.name.10.$(file.patterns.r)=Pipe selection to R
command.mode.10.$(file.patterns.r)=subsystem:0,savebefore:no
command.10.$(file.patterns.r)="C:\Program Files\R\R-2.15.2\bin\x64\Rscript.exe"
command.input.10.$(file.patterns.r)=$(CurrentSelection) 
```

它将当前选择的数据通过管道传输到`Rscript.exe`. 我不使用 R，所以我不知道你的`Rscript.exe`工具是否接受这样的管道输入，但你可能已经知道了。

# python - Python 的 set() 和 set([]) 的速度有什么区别？

> ID：14569983
> 
> 赞同：1
> 
> 时间：2013-01-28T19:49:49.897
> 
> 标签：python, performance, set

这两个代码片段的速度是否有很大差异？

1.

```
x = set( i for i in data ) 
```

相对：

2.

```
x = set( [ i for i in data ] ) 
```

我见过人们推荐`set()`而不是`set([])`; 这只是风格问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:51:14.490

表格

```
x = set(i for i in data) 
```

是以下的简写：

```
x = set((i for i in data)) 
```

这将创建一个[生成器表达式](http://www.python.org/dev/peps/pep-0289/)，该表达式会延迟计算。相比：

```
x = set([i for i in data]) 
```

在将其传递给*之前*创建一个完整的列表`set`

* * *

从性能的角度来看，生成器表达式允许在某些函数中短路（`all`并且`any`想到）并且占用更少的内存，因为您不需要存储额外的列表——在某些情况下，这可能非常重要。

如果您实际上要遍历整个 iterable `data`，并且内存对您来说不是问题，我发现通常列表理解比等效的生成器表达式稍快*。

```
temp $ python -m timeit 'set(i for i in "xyzzfoobarbaz")'
100000 loops, best of 3: 3.55 usec per loop
temp $ python -m timeit 'set([i for i in "xyzzfoobarbaz"])'
100000 loops, best of 3: 3.42 usec per loop 
```

请注意，如果您对速度感到好奇——您最快的赌注可能只是：

```
x = set(data) 
```

证明：

```
temp $ python -m timeit 'set("xyzzfoobarbaz")'
1000000 loops, best of 3: 1.83 usec per loop 
```

*仅限 Cpython——我不知道 Jython 或 pypy 如何优化这些东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T19:51:49.133

该`[]`语法创建一个列表，该列表在创建集合后立即被丢弃。所以你正在增加程序的内存占用。

生成器语法避免了这种情况。

# dynamics-crm-2011 - 在哪里下载以前的 SDK for CRM 2011 v 5.0.12？

> ID：14569987
> 
> 赞同：1
> 
> 时间：2013-01-28T19:50:03.377
> 
> 标签：dynamics-crm-2011

目前搜索 CRM 2011 SDK 似乎总是产生[这个](http://www.microsoft.com/en-us/download/details.aspx?id=24004)下载页面，这是 SDK 的最新版本（截至本文，它的版本 5.0.13 用于汇总 12）。我们将在本月的产品盒上安装汇总 11。我想获取以前版本的SDK，但一直找不到。有没有人碰巧有SDK 5.0.12 版本的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:12:00.813

我最近不得不降级并使用[此链接](http://www.microsoft.com/en-us/download/details.aspx?id=29692)。而且我不确定是否推荐更新版本。绝对不是UR12。

而对于 UR11，可能[就是这个链接](http://www.microsoft.com/en-us/download/details.aspx?id=34969)。

那是你要找的吗？

# php - 使用模块视图

> ID：14569990
> 
> 赞同：0
> 
> 时间：2013-01-28T19:50:15.463
> 
> 标签：php, codeigniter, module, hmvc

我正在为我的 Codeigniter 应用程序使用 HMVC 模块化分离，并试图弄清楚如何使用我设置的模板来尝试这个。可能有更好的方法来处理这个问题，我不确定，但如果有人能提出建议，我会全力以赴。这是我当前的文件系统。

每个模块控制器内部都有一个名为 $view_file 的变量。这是传递给正文内容视图页面的变量，并告诉它在我的控制面板的内容包装器中显示哪个视图文件。

我还包含了我的正文内容视图的代码，其中包含一个 if 语句来找出

```
/application
    /modules
        /dashboard
            /controllers
                dashboard.php
            /views
                dashboard_view.php
    /views
        index_view.php
        components/
            body_content_view.php  

<!--Body content-->
<div id="content" class="clearfix">
    <div class="contentwrapper"><!--Content wrapper-->

<?php 
if ($this->functions_model->null_check($view_file) === TRUE)
    {
        $this->load->view('components/body_unknown_view');
    }
    else
    {
        if (file_exists($view_file))
        {
            $this->load->view($view_file);
        }
        else
        {
            $this->load->view('components/body_unknown_view');
        }
    }
?>
</div><!-- End contentwrapper -->
</div><!-- End #content --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T00:48:27.117

我无法判断您使用的框架的选择，但是，如果您真的想使用 HMVC 模式，为什么要坚持使用 CI？

不要误会我的意思，它是一个很好的可编写代码的框架，可能这就是你选择它的原因，但是当涉及到超出它的范围的事情时，它是一个底层的痛苦。

你为什么不使用其他原生支持这个的框架，比如[Symfony](http://symfony.com/)或[Laravel](http://laravel.com/)？

无论如何，如果您仍然想坚持使用 CI，请仔细阅读[本文](http://somethingstatic.com/setting-hmvc-codeigniter-2-1/)

# php - 如何在mysql中删除句子中的空格

> ID：14569992
> 
> 赞同：0
> 
> 时间：2013-01-28T19:50:18.453
> 
> 标签：php, html, mysql, phpmyadmin

有人可以帮助我如何删除我的 sql 中的空格。例如，假设我输入“**我是一个好男孩**”......我希望它在我的 mysql 表列中保存为“ **iamagoodboy** ”，删除我发送的任何内容的所有空格......在下面的这段代码中我可以做到这一点，非常感谢

```
$sql = 'INSERT INTO messages (username,usernameto, message_content, message_time)      VALUES ("' . $username . '", "' . $messageTo . '", "' . $message . '", ' . $time . ')';

$result = mysql_query($sql, $cn) or

die(mysql_error($cn)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:53:32.530

```
str_replace(' ', '', $message); 
```

在 PHP 中应该可以正常工作。作为一般规则，不要把那种功能放在数据库上，没有理由把负载放在那个服务器上——而是在 Web 服务器上做。

所以你的代码看起来像这样（假设你把空格去掉`$message`）：

```
$sql = 'INSERT INTO messages (username,usernameto, message_content, message_time)      VALUES ("' . $username . '", "' . $messageTo . '", "' . str_replace(' ', '', $message) . '", ' . $time . ')'; 
```

不过，更好的解决方案可能是使用`preg_replace('/\s+/', '', $string);`它将去除所有空白（制表符、换行符等）。取决于你到底想要完成什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:52:51.877

使用 str_replace：

```
$string = str_replace(' ', '', $string); 
```

或删除所有空格

```
$string = preg_replace('/\s+/', '', $string); 
```

来源：[如何从 php 中的字符串中去除所有空格？](https://stackoverflow.com/questions/2109325/how-to-strip-all-spaces-out-of-a-string-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:53:44.030

您可以使用 SQL -> SELECT REPLACE(caption,'\"','\'') FROM ... 替换字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:55:53.070

你可以试试这个

```
 '".str_replace(' ', '', $messageTo)."' 
```

其他的也一样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T19:58:56.247

```
$sql = 'INSERT INTO messages " . 
. "(username,usernameto,message_content,message_time) " .
. "VALUES ("'.$username.'","'.$messageTo.'",REPLACE("'.$message.','' '','''')",'.$time .')';

$result = mysql_query($sql, $cn) or   die(mysql_error($cn)); 
```

# core-data - 具有 20 条最后记录的 NSPredicate

> ID：14569997
> 
> 赞同：0
> 
> 时间：2013-01-28T19:50:23.670
> 
> 标签：core-data, nspredicate, nsfetchrequest

我正在处理核心数据，我尝试使用最后 20 条记录，`setFecthLimit`但在这些最后的记录中我想获得未读计数，我使用这个

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Post" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];
[request setFetchLimit:20];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isRead = NO OR isRead = NIL"];
[request setPredicate:predicate];                    

NSError *error = nil;
NSMutableArray *records = [[_managedObjectContext
                                            executeFetchRequest:request
                                            error:&error] mutableCopy]; 
```

但它总是返回我 20，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:09:56.840

一个简单的解决方案是删除谓词。抓取 20 个对象，然后根据谓词过滤它们。

例如：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Post" inManagedObjectContext:_managedObjectContext];
[request setEntity:entity];
[request setFetchLimit:20];                    

NSError *error = nil;
NSArray *records = [_managedObjectContext executeFetchRequest:request
                                                        error:&error];

// do some error checking here...
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isRead = NO OR isRead = nil"];
// [NSPredicate predicateWithFormat:@"isRead = %@", [NSNumber numberWithBool:NO]];
NSArray *filteredRecords = [records filteredArrayUsingPredicate:predicate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:08:45.053

我认为您的谓词格式有错字：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Post"]
request.fetchLimit = 20;
request.predicate = [NSPredicate predicateWithFormat:@"(isRead == NO) OR (isRead == NULL)"];
NSSortDescriptor = [...insert your sort descriptor code here...]
request.sortDEscriptos = @[sd]; 
```

记住排序，这样你就可以得到最后的 20 个，而不仅仅是随机的 20 个。

# python - 如何在array.array中分配一个新元素

> ID：14569998
> 
> 赞同：1
> 
> 时间：2013-01-28T19:50:25.840
> 
> 标签：python

当我尝试从 array.array 模块分配数组时，如下所示：

```
a = array('f')

a[0] = 2.2 
```

我的数组赋值超出了范围，所以基本上我必须在第一条语句本身中分配一些虚拟值和大小，例如`a = array('f',[0]*20)`. 是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:53:09.010

不一定-您还可以使用以下方法添加元素`append`：

```
a.append(2)
print a
# array('f', [2.0]) 
```

或`extend`：

```
a.extend([1, 2, 3, 4])
print a
# array('f', [2.0, 1.0, 2.0, 3.0, 4.0]) 
```

因此，它的工作方式与常规 Python 列表大致相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:53:54.277

这也发生在`list`：

```
>>> L = []
>>> L[0] = 'a'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list assignment index out of range 
```

基本上`[]`语法**要求**索引是有效的。它不能用于添加元素。

该类`array.array`支持大多数`list`方法，您可以使用这些方法在创建后添加元素。