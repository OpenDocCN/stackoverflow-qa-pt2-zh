# StackOverflow 问答 13932000-13932999

# c# - 将字符附加到列表字符串

> ID：13932001
> 
> 赞同：9
> 
> 时间：2012-12-18T11:30:37.790
> 
> 标签：c#, list, append

我的应用程序中有一个可选的自定义前缀和后缀，我想将它们添加到字符串列表中的每个项目中。我已经尝试了以下所有方法，但没有一个有效。有人可以指出我正确的方向吗？

```
List<string> myList = new List<string>{ "dog", "cat", "pig", "bird" };

string prefix = "my ";
string suffix = " sucks!";

StringBuilder sb = new StringBuilder();
sb.Append(suffix);
sb.Insert(0, prefix);
MyList = sb.ToString();  //This gives me red squigglies under sb.ToString(); 
```

我也试过：

```
myList = myList.Join(x => prefix + x + suffix).ToList();  //Red squigglies 
```

和：

```
sortBox1.Join(prefix + sortBox1 + suffix).ToList();  //Red squigglies 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-18T11:32:22.570

目前还不清楚你为什么`StringBuilder`在这里使用 a ，或者你为什么要尝试加入。听起来你想要：

```
var suckingList = myList.Select(x => "my " + x + " sucks")
                        .ToList(); 
```

这是使用 LINQ 对列表中的每个项目执行投影的绝对正常方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:35:17.750

```
List<string> myList = new List<string>{ "dog", "cat", "pig", "bird" };
List<string> myNewList = new List<string>();

string prefix = "my ";
string suffix = " sucks!";

foreach(string s in myList)
{
     myNewList.Add(string.Format("{0}{1}{2}", prefix, s, suffix);
} 
```

myNewList 现在包含正确的数据。

# opengl - 剥离剂技术是否会提高性能？

> ID：13932002
> 
> 赞同：3
> 
> 时间：2012-12-18T11:30:38.930
> 
> 标签：opengl

我读过很多次，将几何从三角形合并到三角形条带或三角形扇形可以提高 3D 渲染的性能，因为必须处理的顶点更少等等......在使用 VBO 和索引渲染的上下文中，所有这些考虑因素有多相关?

例如，我有一个由三角形组成的图元（球体）。我有 VBO，我只存储唯一的顶点，我有 VBO（绑定到 GL_ELEMENT_ARRAY_BUFFER），我存储索引以从顶点构造图元。所有渲染都是通过`glDrawElementsInstanced()`. 在应用一些条带化技术并将我的基元渲染为 GL_TRIANGLE_STRIP 并启用基元重启后，我会获得任何性能提升吗？

文档说OpenGL管道在所有每个顶点操作之后和光栅化之前组装图元。我可以猜到，这意味着驱动程序首先为所有顶点调用顶点（几何等）着色器，然后才开始使用索引数组来获取三角形。如果这是真的，则条带化会减慢该过程，因为将应用对原始重启的额外检查。

我试图找到一些剥离器库，但我发现的所有东西看起来都在几年前被遗弃了。于是人们突然对这个领域失去了兴趣……

考虑到所有这些因素，没有必要进行条带化。我是正确的还是我错过了一些重要的事情？是否需要在现代硬件上进行剥离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:35:16.537

一般来说，不，你不会从三条中获得优势。现代硬件期待索引数据，并为此进行了优化。

这并不是说可以随机访问索引——因为数据被缓存，所以局部性很重要。因此，按条形顺序排列三角形可能会有所改进。

性能也会有所不同，具体取决于实际花费了多少时间来担心三角形设置和顶点处理，以及实际着色的时间。

与所有事情一样 - 分析您的表现以查看适合您自己情况的方法，但自 PS2 以来我没有为剥离三角形而烦恼。

# php - Javascript 代码未在 onbeforeunload 运行

> ID：13932004
> 
> 赞同：1
> 
> 时间：2012-12-18T11:30:48.323
> 
> 标签：php, javascript, html, onbeforeunload

我有 3 个变量来跟踪在网站上花费的时间

```
 $_SESSION['checkin']; //logged when user first enters the site 
 $_SESSION['loggedAt']; //logged when the user leaves the site
 $_SESSION['timespent']; //time spent in minutes 
```

我想做的是每次用户离开页面时，这些值都会被推送到数据库中。我所做的是使用onbeforeunload。

下面是我如何使用它：

在每一页上：

```
 <script type="text/javascript" src="js/storeSession.js"></script> 
```

storeSession.js：

```
window.onbeforeunload = confirmExit();
  function confirmExit()
  {
        var xhr = new XMLHttpRequest();
        xhr.open('post','../php/storeSession.php',true);
        xhr.send();
        return "Are you sure you want to leave?";
  } 
```

和 storeSession.php：

```
$_SESSION['loggedAt'] = time();
$temptime = (double)$_SESSION['timespent']/60;
$_SESSION['timespent'] = $_SESSION['loggedAt'] - $_SESSION['checkin'];

mysql_select_db($db, $conn) or die(mysql_error()); 

$data = mysql_query("INSERT INTO user (user_id, timespent) VALUES ($tempuser, $temptime) ON DUPLICATE KEY UPDATE timespent = timespent + $temptime")
        or die(mysql_error()); 

$_SESSION['timespent'] = null;
$_SESSION['loggedAt'] = null;
$_SESSION['checkin'] = null;

mysql_close($con); 
```

我找不到问题，一切似乎都正常（没有错误等）。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:33:46.037

一个问题是这一行：

```
window.onbeforeunload = confirmExit(); 
```

您调用了函数并将返回值分配给`window.onbeforeunload`，而不是分配函数本身。

将行更改为：

```
window.onbeforeunload = confirmExit; 
```

...或使用闭包。

此外，您在不发送任何数据的情况下发出 POST 请求（您没有将任何内容传递给 的第一个参数`send()`） - 您可能希望改为发出 GET 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:37:25.110

您需要从 onbefore 函数中删除括号

```
window.onbeforeunload = confirmExit; 
```

此外，您将在确认之前通过 XHR 呼叫结束会话。如果用户取消卸载，他仍然处于注销状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:57:24.527

您是否尝试过使用`onunload`而不是`onbeforeunload`. 我记得后一个是受限制的，因为它可能被用来阻止用户退出页面（甚至是浏览器）。我不完全确定，但我认为（大多数）浏览器只读取返回的字符串并忽略其余部分。

另外，我自己在 on(before)unload 操作上遇到了一些问题，并通过显式使用与服务器的同步通信来解决这些问题（我使用了 jquery + ajax），否则 ajax 请求没有完成（尽管我没有经验`XMLHttpRequest`，但我认为这个选项应该是可比的）

# git - Git克隆带有子模块的框架

> ID：13932021
> 
> 赞同：0
> 
> 时间：2012-12-18T11:32:14.377
> 
> 标签：git

我目前有以下情况。我有一个私人项目，它就像一个框架，我想将其用作一系列其他项目的基础。在项目的根目录中，有一些名为主题、模块、插件等的文件夹也用于进行独特的更改。进行克隆后，主要目标是更新这些子文件夹并将内容添加到这些子文件夹中。

```
framework/
 | - config.ini
 | - core.c
 | - module_handler.c
 | - plugin_handler.c
 | - theme_handler.c
 | - modules/
 | - plugins/
 | - public/
      | - images/
 | - themes/ 
```

*   我希望能够在每个克隆中**更新框架版本。**（**重要**）
*   我想要克隆**根目录中的框架。**（**重要**）
*   我希望**能够选择克隆中的提交/更改并**有时将它们推回框架。（会很好，但我可以忍受手动操作的痛苦）
*   **我最不使用分支。**它们是明显分开的。

我一直在阅读有关子模块的一整天，我觉得这个概念会很完美。除了似乎它们不能存在于新项目的根目录中，因为 .git 文件夹显然是冲突的。但是如果它不能在根目录中，我不知道我将如何处理它。有什么黑客或我可以使用的东西吗？

如果我不能得到所有东西，我可以在没有能力轻松地将更改合并回框架的情况下生活。

我假设我将永远独自处理这件事。我只是希望它更有条理和自我解释。

解决此问题并实现此功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:57:40.463

```
git add .
(addig every changes to repo)

git push master master
(update the whole master) 
```

# vb.net - vb.net 中的 Google Cloud Messaging Server 端示例

> ID：13932023
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:32:19.827
> 
> 标签：vb.net

我想在 vb.net 中编写/实现 Google Cloud Messaging Server Side Sample

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:02:03.760

它会让你开始我认为如果你使用 C# ysearch google for c# to vb 转换器，它会完成这项工作，你将有一些代码开始。下次请在提问之前说明您的问题或在您所做的事情上付出一些努力。

[调用 Google GCM 时未授权](https://stackoverflow.com/questions/11431261/unauthorized-when-calling-google-gcm)

# c# - 如何知道 Visual Studio 2010 中哪些类继承自另一个类？

> ID：13932030
> 
> 赞同：0
> 
> 时间：2012-12-18T11:32:43.737
> 
> 标签：c#, visual-studio-2010, visual-studio

我想要一些方法，例如，将鼠标放在类名上，然后能够看到项目中从该类继承的所有类。

例如，我有

```
public class MyClass{} 
```

我如何知道哪些其他类扩展`MyClass`并导航到它们以查看它们的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:37:13.590

Vanilla Visual Studio 没有此功能。

Jetbrains广泛使用[的 Resharper](http://www.jetbrains.com/resharper/)确实如此：http: [//www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Go_to_Inheritor.html](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Go_to_Inheritor.html)

我认为 Resharper 物有所值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:41:29.140

右键单击界面中的一个方法->调用层次结构（快捷键Ctrl+k，Ctrl+t）->在调用层次结构窗口中，查看下`Implements "method name"`

您还可以确定`find all references`哪些实现了接口！

好吧，如果可以，请获得 Resharper。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T21:16:57.460

如果您可以使用 Visual Studio 扩展，Visual Studio 平台团队提供了一套出色的工具，称为“生产力工具”。它有一个称为“解决方案导航器”的工具。 [http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)

请在此博客中找到有关如何使用此工具的信息：http: [//blogs.msdn.com/b/visualstudio/archive/2010/07/20/solution-navigator-blog-post.aspx](http://blogs.msdn.com/b/visualstudio/archive/2010/07/20/solution-navigator-blog-post.aspx)

“查看有关类和成员的相关信息（例如 C# 的引用或调用者/被调用者）”部分可帮助您了解所需内容。

随着时间的推移，我发现它非常有用，就像您只需使用其搜索栏就可以在解决方案中搜索任何类或文件名。它比其他商业工具快得多。它还可以很好地集成到 Visual Studio 中，因为它只是来自 Visual Studio 团队。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:34:02.600

使用[生产力工具](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef)是一种最快的方式。安装后，将鼠标悬停在 ClassName 上，单击弹出窗口并选择`Derived Types`。您将获得您正在寻找的所有课程的列表。

# testing - 如何对网站进行负载测试？

> ID：13932035
> 
> 赞同：3
> 
> 时间：2012-12-18T11:33:24.477
> 
> 标签：testing, load

我想做性能测试。但我们没有任何要求。我想为网站做负载测试。我如何进行这些测试？

我的网站就像 youtube（社交应用程序）。在这个我想检查在特定时间有多少用户可以上传视频，我们可以存储多少视频，10000个视频可能不是？如何测试这些。

我目前正在使用 JMeter 进行负载测试。

你能提出一些建议吗？我们要检查的时间是什么？需要多少并发用户？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:16:16.737

这里有两个不同的问题：

1.  要求：您要查找的统计数据是什么？
2.  技术：你如何测试你是否达到了你为自己设定的目标？

关于（1）：在一个完美的世界中，您将能够分析您的目标客户范围并了解有多少人将同时使用您的系统。然后，您将了解其中有多少实际上会（同时）在您的网站中触发响应，并从中了解您需要同时处理多少个请求。

您可能想知道的另一个问题是您可以预期拥有的数据大小。如果您有 1,000,000 个用户，并且每 100 个用户中就有 1 个上传视频，那么您的数据库中就有 10,000 个视频。所以这个问题的答案再次取决于用户的数量和他们的行为。

进行某种市场调查并得出数字可能是可能的，但精益创业方法论指出，您通常不知道这些问题的答案，您只能猜测，而且通常您猜错了。

所以，假设你真的什么都不懂，你应该了解如何让你的系统以一种可以支持任意数量的并发用户和任意大小的数据的方式进行扩展。

但是，您可能想知道有关您正在使用的当前基础架构的统计信息。这将我们引向（2）。

JMeter 是测试并发负载的好工具，您没有说明您的服务器是用什么编写的，但 JMeter 建议使用 Java，在这种情况下，您应该了解内存限制和垃圾收集时间。

假设一个无状态（或至少会话粘性）分布式系统，您可能希望测试单个“典型”服务器的响应时间和给定数量并发请求的故障。从小处着手，在结果仍然可以接受的情况下再往上走（即，对于 100 个并发请求，50ms 响应时间和 0 个失败响应是可以接受的，1000 个并发给你 300ms 延迟和 5 个失败响应，在 5000 时你可以达到 500ms和 15 个失败的响应，这是您认为可以接受的最高延迟，以及您可以接受的尽可能多的失败）

您可能希望从上面更改“典型”并查看不同的基础架构如何为您提供不同的结果，今天的云服务的好处是您可以轻松进入 EC2 并以很少的投资获得任何类型的基础架构并测试您的结果所以你知道你需要买什么（假设你不想继续托管在 EC2 上）。您还可以使用 EC2 来托管 JMeter 实例（我曾经读过一篇关于此的文章，不记得在哪里，但谷歌它），并且您可以以低于 200 美元/测试的价格发出许多并发请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T20:09:25.847

[http://www.loadstorm.com](http://www.loadstorm.com)

是一个不错的开始进行负载测试的网站。

如果您正在寻找更先进的东西，请尝试 hp loadrunner-

[http://www8.hp.com/us/en/software-solutions/software.html?compURI=1175451#.UmbpLZRgY08](http://www8.hp.com/us/en/software-solutions/software.html?compURI=1175451#.UmbpLZRgY08)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:43:37.420

根据我的加载测试经验，您可能会研究这些解决方案

*   [http://www.webperformance.com/](http://www.webperformance.com/)我们使用 Web Performance 来生成虚拟客户端，它们提供了非常好的工具，集成到 AWS 中，因此与其他解决方案相比，它既快速又便宜。
*   [http://newrelic.com](http://newrelic.com)这家伙监控我们的服务器和应用程序，图表显示非常详细的信息（瓶颈、资源等）

哦，关于这个问题有一本有趣的书（http://www.amazon.com/Scalability-Rules-Principles-Scaling-Sites/dp/0321753887），它会很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T13:50:21.590

> 但是我们没有任何要求。

构建性能测试是一项微型开发工作。如果没有要求，您将不知道要在测试中构建什么，从要包括哪些业务流程到每种类型的用户有多少到被认为是可接受的响应时间。如果您正在对现有应用程序的更新进行性能测试，那么您可能拥有可供现有用户群使用的事务数据（可能还有转换数据）。希望这些信息是历史信息，以便您可以观察到随着时间的推移的增长。为您的负荷计划 18 个月，最好是 36 个月。

您将需要参与需求的业务利益相关者。此应用程序旨在满足业务需求，根据此部署的成功或失败，某人将被降职、解雇、晋升或奖金。找到那个人！任何将在此应用程序上获得奖金或职位的人也可能非常了解业务需求和期望。

如果这是您第一次从事性能测试工作，那么您最好聘请该领域的专家。您需要的大约 85% 的技能与工具无关，最后一点由您的工具为您的测试工作填充。这 85% 在需求、监控、分析和报告部分至关重要。作为一名性能测试员与许多其他学科没有什么不同，因为最好的发展路线是通过确认核心技能、对流程、方法和工具的正式指导，然后是一段时间的实习。你有没有见过像理发师那样不熟练的人理发，或者没有接受过砌体训练的人砌砖墙？如果是这样，那么您就会了解如果您刚刚进入该角色，性能测试将具有什么价值。

聘请经验丰富的项目负责人。像刚出生的小狗一样跟着他们走。做大量笔记。问很多问题。确保您可以维护他们为将来使用而开发的内容，并了解开发项目的原因

否则，如果没有要求，您就有走上“艺术测试”之路的危险。艺术测试是与需求和/或生产数据观察分离的性能测试。你会在很多环境中看到这一点，最后只剩下一两个星期进行性能测试，项目不会出现滑点，也没有时间解决任何问题。简而言之，它变成了一个价值不高的复选框。

哦，检查您的日志以了解上传时的实际并发性。您可能会发现的东西会让您感到惊讶和高兴。我花了很多个小时与某人讨论，他们告诉我他们的网站上有 10000 个并发用户，只是在查看日志时发现平均会话持续时间不到 10 分钟，而 10 分钟块中的最大并发数仅为几百个用户。

# ios - 需要帮助从 ios 设备上传多个大图像

> ID：13932036
> 
> 赞同：4
> 
> 时间：2012-12-18T11:33:28.710
> 
> 标签：ios, nsurlconnection, afnetworking, nsinputstream

我使用 alasset 库成功获取了我的 iphone 图片库中的所有图片 url 并存储在一个数组中。现在我正在尝试上传到服务器，这是我的代码：

我尝试了两种方法，但都在迭代大约 10 张图像后崩溃，没有任何崩溃日志。图片不上传到服务器，上传前崩溃。

**1：**

```
NSData *imgData; UIImage *img; NSInputStream *stream;

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://my.url.com"]];

for(int i=0; i<_dataContainer.count; i++)
{
    img = [UIImage imageWithCGImage:[[[_dataContainer objectAtIndex:i] defaultRepresentation]fullResolutionImage]];
    imgData = UIImageJPEGRepresentation(img, 1.0);
    stream = [[NSInputStream alloc] initWithData:imgData];
    [request setHTTPBodyStream:stream];
    [request setHTTPMethod:@"POST"];
    [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                               NSLog(@"Finished with status code: %i", [(NSHTTPURLResponse *)response statusCode]);
                           }];
} 
```

**2：使用 Afnetworking**

```
AFHTTPClient *client= [[AFHTTPClient alloc]initWithBaseURL:[NSURL URLWithString:@"http://my.url.com"]];
     NSURLRequest *myRequest;
    __block UIImage *img;
    __block NSData *imgData;
    __block NSString *fName;

    myRequest = [client multipartFormRequestWithMethod:@"POST" path:@"/images/mypage.php" parameters:nil constructingBodyWithBlock:
                 ^(id <AFMultipartFormData>formData)
                 {                     
                     img = [UIImage imageWithCGImage:[[[_dataContainer objectAtIndex:0] defaultRepresentation]fullResolutionImage]];
                     imgData = UIImageJPEGRepresentation(img, 1.0);
                     fName = [self returnDateTimeWithMilliSeconds];

                     [formData appendPartWithFileData:imgData name:@"photo" fileName:[NSString stringWithFormat:@"%@.jpg",fName] mimeType:@"image/jpeg"];

                     NSLog(@"FN=>%@ | Size=>%@",fName, [NSByteCountFormatter stringFromByteCount:[imgData length] countStyle:NSByteCountFormatterCountStyleFile]);
                 }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:myRequest];
    [operation start];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
     {

         NSLog(@"Success Data -> %@", operation.responseString);
     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         NSLog(@"Failed");
     }];

    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Progrees -> %f", ((float)((int)totalBytesWritten) / (float)((int)totalBytesExpectedToWrite)));
    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:07:59.393

```
@interface MyHTTPClient : AFHTTPClient

+ (id)sharedClient;

@end

@implementation MyHTTPClient

+ (id)sharedClient
{
    static MyHTTPClient *sharedClient;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedClient = [[MyHTTPClient alloc] initWithBaseURL:nil];
    });
    return sharedClient;
}

@end

@implementation MyViewController

- (void)uploadImages
{
    NSURLRequest *myRequest;
    __block UIImage *img;
    __block NSData *imgData;
    __block NSString *fName;

    myRequest = [client multipartFormRequestWithMethod:@"POST" path:@"/images/mypage.php" parameters:nil constructingBodyWithBlock:
                 ^(id <AFMultipartFormData>formData)
                 {                     
                     img = [UIImage imageWithCGImage:[[[_dataContainer objectAtIndex:0] defaultRepresentation]fullResolutionImage]];
                     imgData = UIImageJPEGRepresentation(img, 1.0);
                     fName = [self returnDateTimeWithMilliSeconds];

                     [formData appendPartWithFileData:imgData name:@"photo" fileName:[NSString stringWithFormat:@"%@.jpg",fName] mimeType:@"image/jpeg"];

                     NSLog(@"FN=>%@ | Size=>%@",fName, [NSByteCountFormatter stringFromByteCount:[imgData length] countStyle:NSByteCountFormatterCountStyleFile]);
                 }];

    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:myRequest];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject)
     {

         NSLog(@"Success Data -> %@", operation.responseString);
     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         NSLog(@"Failed");
     }];

    [operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
        NSLog(@"Progrees -> %f", ((float)((int)totalBytesWritten) / (float)((int)totalBytesExpectedToWrite)));
    }];

    [[MyHTTPClient sharedClient] enqueueHTTPRequestOperation:operation]
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:52:53.557

您应该`[operation start];`在设置完成和进度块回调之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:09:36.503

您的崩溃可能是由于内存过载。首先，在**第 1 节**中，您需要在每次迭代时排空自动释放池，如下所示：

```
NSData *imgData; UIImage *img; NSInputStream *stream;

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://my.url.com"]];

    for(int i=0; i<_dataContainer.count; i++)
    {
        @autoreleasepool {
            img = [UIImage imageWithCGImage:[[[_dataContainer objectAtIndex:i] defaultRepresentation]fullResolutionImage]];
            imgData = UIImageJPEGRepresentation(img, 1.0);
            stream = [[NSInputStream alloc] initWithData:imgData];
            [request setHTTPBodyStream:stream];
            [request setHTTPMethod:@"POST"];
            [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]
                                   completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                                       NSLog(@"Finished with status code: %i", [(NSHTTPURLResponse *)response statusCode]);
                                   }];
        }
    } 
```

方法`imageWithCGImage:`和`UIImageJPEGRepresentation`返回大型自动释放对象，因此您需要确保尽快释放它们以释放内存。

**在第 2 节中：**

对于 AFNetworking，打电话`[operation start]`是没用的。该操作将在超出范围后立即发布，因此不太可能真正完成。您需要保留 AFHTTPClient 实例（通常作为单例完成，但一个属性就足够了）并通过调用对其进行排队操作：

```
[httpClient enqueueHTTPRequestOperation:operation] 
```

# ruby-on-rails - rake assets:precompile 清除 tmp/cache

> ID：13932037
> 
> 赞同：1
> 
> 时间：2012-12-18T11:33:33.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 Rails 3.2.3 应用程序，在文件存储中有一个非常大的缓存。需要 30 分钟才能清除整个缓存。我正在尝试迁移应用程序以使用资产管道。

发现运行`rake assets:precompile`实际上会清除缓存（请参阅[assets.rake 的 3.2.3](https://github.com/rails/rails/blob/v3.2.3/actionpack/lib/sprockets/assets.rake#L69)。考虑到清除整个事物所需的时间，我认为每次需要部署时都清除缓存并不是一个好主意。

*   资产管道是否涉及缓存？
*   为什么要清除它，因为所有内容都编译到 public/assets 文件夹中？如果我只缓存片段怎么办？
*   有没有一种方法可以在不访问文件存储缓存的情况下使用管道（并且每次部署时都不会清除缓存）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:22:51.477

经过一段时间的思考，我意识到每次更新*图像*时清除缓存是非常安全的（有时是不可避免的） 。

如果`config.assets.digest = true`，那么当更新图像时，缓存页面/片段中的图像链接需要更新和破坏，以便使用新图像。如果资产被清理，缓存清理失败将导致死链接，或者直到浏览器丢失缓存。

至于 javascripts 和样式表，清除缓存的原因是更新链接`application.js`和`application.css`文件。但是如果我们小心不要将源代码缓存到 JS 和 CSS 文件中，那么清除缓存是多余的。

不这样做会导致使用旧的 JS 和 CSS 文件。

# smalltalk - 如何在 smalltalk 中获得新线路？

> ID：13932039
> 
> 赞同：1
> 
> 时间：2012-12-18T11:33:31.777
> 
> 标签：smalltalk

我想使用 smalltalk 代码以以下格式显示数字

```
 1
     1 2
     1 2 3
     1 2 3 4 
```

我写了以下代码

```
| i j y k |
i :=1.
j :=1.
y:= ('y' at: 1 put: $ )out.

(i<=4)ifTrue: [
i to: 4 by:1 do:[:i |

     (j<=i)ifTrue: [
     j to: i by: 1 do:[:j |

         ( j print++y print)out.

         ]
            ]

     ]
] 
```

当我执行上述程序时，它以下列格式显示数字

输出：

```
1 ' '
1 ' '
2 ' '
1 ' '
2 ' '
3 ' '
1 ' '
2 ' '
3 ' '
4 ' ' 
```

谁能帮助我以金字塔格式显示输出以及在 smalltalk 中获取新行的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:44:33.000

试试下面的一段代码。

```
|n|
Transcript cr.
n := 4.
1 to: n do: [:i |
    1 to: i do: [:j |
        Transcript show: j].
    Transcript cr]. 
```

要回答您的问题：您会通过 Transcript cr 获得一个换行符，然后将其发送给 Character cr。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:38:41.080

您可以使用单个回车符创建一个字符串

```
(String with: Character cr) 
```

但是您应该学习如何使用`Stream`而不是连接字符串，请参阅消息 writeStream、#nextPut:、#nextPutAll: 和类 WriteStream

**编辑**我不想提供现成的解决方案，但是由于您还有很多其他解决方案，所以这里可能会坚持使用字符串。正如您的问题所暗示的那样，我认为 #out 会生成自己的 CR。然后我自己的解决方案是 #inject:into: 累积而不是在每个循环中重新创建整个字符串：

```
(1 to: 4) inject: String new into: [:str :num |
    (str , num printString , ' ') out; yourself] 
```

或使用传统的成绩单：

```
(1 to: 4) inject: String new into: [:str :num |
    | newStr |
    newStr := str , num printString , ' '.
    Transcript cr; show: newStr.
    newStr] 
```

我希望它打开一些关于更高级别的集合迭代器的观点，而不是愚蠢的#to:do：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:22:08.710

```
| max resultString |
max := 5 .
resultString := String new.
1 to: max do: [ :line |
    1 to: line do: [ :number |
        resultString add: number asString, ' '
    ].
    resultString lf.
].
resultString 
```

# c - 在 c 中的流式套接字上读取消息

> ID：13932047
> 
> 赞同：1
> 
> 时间：2012-12-18T11:33:50.263
> 
> 标签：c, sockets, streaming

我正在编写一个客户端服务器模型应用程序，服务器在与客户端的流连接上以非常高的速率发送大量消息（不同大小），客户端在大于预期消息大小的缓冲区上读取这些消息

```
while (ret = read (sd, buf, sizeof buf) > 0)
{
      // decode message here
} 
```

这里的问题是客户端可能会像这样在缓冲区上读取多个消息，如果我假设缓冲区是 B 并且消息是 M#，它将收到如下消息

|----B----|----B----|----B----|----B----| ……

|-M1--|-M2-|--M3-|-M4-|---M5---|--M6-| ……

这使得消息的解码不正确。所以，我想接收如下消息（每个缓冲区只有一条消息）

|----B----|----B----|----B----|----B----| ……

|-M1--|,,|-M2-|,,,|--M3-|,,|-M4-| .... (,,, 什么都不是，只是为了格式化)

请注意，我必须使用流连接，并且我不喜欢在消息之间不使用任何分隔符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:38:08.613

您无法控制流的字节如何传递给应用程序，它是*字节流*，而不是单个消息。

即使您不“喜欢”分隔符，这也正是它们如此频繁使用的原因。这不是一个有趣的想法，它是这个问题的基本解决方案。不“喜欢”它不是很有趣，因为反对。

除了分隔符之外，您唯一的希望是实现消息解析，该解析可以始终正确确定它是否有完整的消息，如果有的话，是哪条消息。如果消息是“前缀”；这样一个特定的字节序列 B 既可以是完整的消息 M1 又可以是 M2 的开头，那么我认为你是敬酒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:29:33.310

分隔符有很多种。协议中“非法”的任何字符都将成为出色的分隔符，但如果您可以选择可打印的字符，则可以使协议在嗅探器或使用 telnet 时更具可读性。

基于 XML 或类似结构化数据的协议也是一种选择。这使得分隔符更加复杂。

二进制协议通常使用 TLV (http://en.wikipedia.org/wiki/Type-length-value)，其中长度指定消息中的字节数（仅值部分或类型、长度和值两者）。

# macos - OSX 在重置权限时复制 DVD 数据

> ID：13932050
> 
> 赞同：1
> 
> 时间：2012-12-18T11:33:52.180
> 
> 标签：macos, permissions, terminal, dvd

我有一张 .dwg 文件的 DVD，需要从 DVD 复制到我的 mac。这些文件也在 DVD 上以文件夹结构组织。

问题似乎是，虽然我可以处理文件夹中的某些文件，但它们具有只读权限。由于复制过程未完成，文件无权写入这些只读文件夹。实现了约 70% 的转移。

手动重置权限和复制需要几天时间。

有没有办法，也许在终端，我可以强制 DVD 复制所有数据？或者，一种使用新的读/写权限进行复制的方法，允许 DVD 完全复制。

非常感谢任何帮助！

# php - 以 {index: {key1: value1, key2: valu2, .... }} 的形式编码 json 其中 index = key1 在 PHP

> ID：13932051
> 
> 赞同：0
> 
> 时间：2012-12-18T11:33:52.213
> 
> 标签：php, jquery, json

我正在获取查询结果并将其转换为 json。在这里查看我的代码 -

```
$sql = "select * from students";
$query = $this->db->query($sql);
if($query->num_rows() != 0 ){
    $result = $query->result();
    $data = json_encode($result);
} 
```

*所以，对于我的学生*表中的两行，数据**就像**-

```
[{"id": "1", "name": "foo", "email": "foo@example.com"}, {"id": "2", "name": "bar", "email": "bar@example.com"}] 
```

所以基本上我得到了一个数组。但我想像这样编码它 -

```
{"1": {"id": "1", "name": "foo", "email": "foo@example.com"}, "2": {"id": "2", "name": "bar", "email": "bar@example.com"}} 
```

这样我的数据就像 index: {key1: val1, key2: val2} 其中 index 是 key1。我该怎么做呢？

此处数据的原因是我的 js 使用上述数据为我的复选框提供 id -

```
destTable = $('#dataTable');
$.post("/examplec/getData",
        params, function(data) {
        var newRow;
        var json = $.parseJSON(data);
        $(json).each(function(i,val){
            newRow = "<tr><td style='right:10px'><input type='checkbox' name = 'case' class = 'case' id=" + i + " onclick='checkAll();'></td>";
            $.each(val,function(k,v){
                newRow = newRow + "<td>" + v + "</td>";
            });
            newRow = newRow + "</tr>";
            destTable.append(newRow);
        });

}); 
```

来自 MVC 模式的模型将数据返回到控制器*examplec.php*。但我希望每个复选框的**id**都是我的**data**中的 id 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:39:57.477

在 PHP 5.3+ 上，您可以执行以下操作：

```
$data = json_encode($result, JSON_FORCE_OBJECT); 
```

从[手册](http://php.net/manual/en/json.constants.php)：

> **JSON_FORCE_OBJECT**
> 使用非关联数组时输出对象而不是数组。当输出的接收者期待一个对象并且数组为空时特别有用。自 PHP 5.3.0 起可用。

编辑：您不需要 ID 作为密钥，这样做只是在复制数据。您可以访问该`id`属性并将其分配为复选框 ID：

```
newRow = "<tr><td style='right:10px'><input type='checkbox' name = 'case' class = 'case' id='" + val.id + "' onclick='checkAll();'></td>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:37:46.133

你可以这样：

```
$results = $query->result();

$data = array();

foreach($results as $result)
{
    // Assuming it returns objects, not arrays, else use $result["id"]
    $data[$result->id] = $result;
}

echo json_encode($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:44:46.237

```
$sql = "select * from students";
$query = $this->db->query($sql);
$res=array();
if($query->num_rows() != 0 ){
    $result = $query->result();
    $res[]=$result;

}
$data = json_encode($res); 
```

# android - 如何在 achartengine android 中设置绘图带？

> ID：13932052
> 
> 赞同：2
> 
> 时间：2012-12-18T11:33:55.363
> 
> 标签：android, achartengine

我正在使用 achartengine 在 android 中显示图表。我想将一系列 y 值（例如 120 到 160）的背景颜色设为绿色，其余的我想显示为白色。有可能实现吗？我找不到怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:20:35.830

不，这在 AChartEngine 中不受支持。

但是，您可以下载代码并自己编写功能。

# iphone - ios - 今天上午 10 点

> ID：13932054
> 
> 赞同：0
> 
> 时间：2012-12-18T11:34:06.580
> 
> 标签：iphone, ios, nsdate

如何在ios中获得今天上午10点和明天上午10点？

```
NSDateComponents *nowComponents = [calendar components:NSYearCalendarUnit | NSWeekCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:today]; 
```

[现在组件集小时：10]；

这没有给出适当的回应。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:06:08.990

试试这个代码，希望它能工作。如果您想获得明天的`10 am`then，请将 hour 设置为`34`。

```
NSDate *date = [NSDate date];
NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];
[gregorian setTimeZone:gmt];
NSDateComponents *components = [gregorian components: NSUIntegerMax fromDate: date];
[components setHour: 10];
[components setMinute:0];
[components setSecond: 0];
NSDate *newDate = [gregorian dateFromComponents: components];
NSLog(@"Date%@", newDate);
[gregorian release]; 
```

# php - 将 CSV 值分配给变量

> ID：13932055
> 
> 赞同：1
> 
> 时间：2012-12-18T11:34:07.440
> 
> 标签：php, variables, csv

我希望下面的代码为从我的 CSV 文件中读取的每个值分配一个变量。

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo $data[$c] . "<br />\n";
        }
    }
    fclose($handle);
}
?> 
```

例如，在 CSV 文件中，我有来自 2 个 Excel 列的 4 个值：

```
Jack,31/01/1991
Ross,15/03/1989 
```

我想要 make Jack 变量31/01/1991 ， Ross和`$vrble1`15/03/1989 。`$vrble2``$vrble3``$vrble4`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:41:58.523

我不知道你为什么要这样做，但我认为你可以这样做（如果我没有弄错的话）：

```
for ($c=0; $c < $num; $c++) {
  $vname = 'vrble' . ($c+1);
  $$vname = $data[$c];
} 
```

这样，您就可以在 $vrble1、$vrble2 等变量中获得值。

让我知道这是否回答了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:45:09.947

每次迭代都将数据合并到一个数组中：

```
$file = new SplFileObject("test.csv");
$file->setFlags(SplFileObject::READ_CSV);
$data = call_user_func_array('array_merge', iterator_to_array($file)); 
```

然后您可以将数组数据提取到本地变量中，如下所示：

```
$data = array_combine(range(1, count($data)), $data);
extract($data, EXTR_PREFIX_ALL, 'vrble'); 
```

见[`array_combine`](http://php.net/array_combine)和[`extract`](http://php.net/extract)。

但是，如果您问我，您应该继续使用数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:46:40.197

只是一个小编辑

```
for ($c=0; $c < $num; $c++) 
{
    $vname = 'vrble' . ($c+1);
    $$vname = $data[$c][1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:47:12.990

在进入 while 循环之前创建一个迭代器变量：

```
$i = 0; 
```

...然后在 while 循环中，执行以下操作：

```
list(${'vrble'.++$i}, ${'vrble'.++$i}) = $data; 
```

（假设您总是每行有 2 列。有关详细信息，请参阅[list() 上的手册](http://php.net/manual/en/function.list.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T11:50:35.557

```
<?php
$row = 1;
$arr = array();
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
        for ($c=0; $c < $num; $c++) {
            $arr[$c] = $data[$c];
        }
    }
    fclose($handle);
}
?> 
```

# c# - .NET 应用程序配置以存储电子邮件联系信息

> ID：13932056
> 
> 赞同：5
> 
> 时间：2012-12-18T11:34:12.167
> 
> 标签：c#, .net

我有一个简单的应用程序，可以向我们的一些内部用户发送状态电子邮件。

我使用一个简单的应用程序配置文件 (App.config) 来存储有关预期用户的电子邮件地址和姓名信息。由于 appSettings 部分似乎只支持简单的键/值对，它目前看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="toName" value="Recipient Name" />
    <add key="toAddr" value="some@email.com" />
    <add key="toName2" value="Another Recipient Name" />
    <add key="toAddr2" value="another@email.com" />
    <add key="ccName" value="An Archive"/>
    <add key="ccAddr" value="copies@email.com"/>
    <add key="ccName2" value="Another Archive"/>
    <add key="ccAddr2" value="morecopies@email.com"/>
  </appSettings>
</configuration> 
```

然后我在代码中单独添加每个收件人。

目前，这意味着每次添加或删除收件人时，我还需要重写代码来处理新的收件人并重新构建和重新部署应用程序

我希望能够存储自定义配置条目，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <recipients>
    <recipient recType="to" recAddr="some@email.com" recName="Recipient Name" />
    <recipient recType="to" recAddr="another@email.com" recName="Another Recipient Name" />
    <recipient recType="cc" recAddr="copies@email.com" recName="An Archive"/>
    <recipient recType="cc" recAddr="morecopies@email.com" recName="Another Archive"/>
  </recipients>
</configuration> 
```

所以我可以遍历它们：

```
MailMessage message = new MailMessage();
foreach(recipient rec in recipients)
{
  MailAddress mailAddress = new MailAddress(recipient["recAddr"],recipient["recName"]);
  if(recipient["recType"] == "cc")
    message.CC.Add(mailAddress);
  else
    message.To.Add(mailAddress);
} 
```

如何做到这一点？

**回答：** 使用 Regfor 链接中的示例，我能够构建一个自定义配置部分，其中包含一组自定义 ConfigurationElement，如下所示：

```
public class RecipientElement : ConfigurationElement
{
    [ConfigurationProperty("name", IsRequired = true, IsKey = true)]
    public string Name
    {
        get
        {
            return (string)base["name"];
        }
    }

    [ConfigurationProperty("mailAddr", IsRequired = true)]
    public string Address
    {
        get
        {
            return (string)base["mailAddr"];
        }
    }

    [ConfigurationProperty("isCC")]
    public bool IsCC
    {
        get
        {
            return (bool)base["isCC"];
        }
    }
} 
```

最后的配置部分：

```
<recipientSection>
  <recipients>
    <recipient name="Primary recipient" mailAddr="usermailbox@email.com" isCC="false" />
    <recipient name="Archive" mailAddr="copies@email.com" isCC="true" />
  </recipients>
</recipientSection> 
```

循环浏览`recipients`集合让我可以添加尽可能多的收件人，因为 SmtpClient 会让我发送到:)

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:47:55.950

您应该为您的收件人编写自定义配置部分，然后包含此部分。使用自定义部分，您还可以将接收者配置存储在主配置文件之外，并使用 configSource 属性包含它。

首先，您可以在这里查看：http: [//haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)

简而言之，您应该：

1.  通过继承**ConfigurationElement**（对于一个元素）和**ConfigurationElementCollection**（对于集合，您需要在您的情况下进行集合，并且每个接收者都是连接元素）来实现您的自定义配置部分。示例实现在这里回答： [如何在 ConfigurationElementCollection 中拥有自定义属性？](https://stackoverflow.com/questions/8829414/how-to-have-custom-attribute-in-configurationelementcollection)

2.  在主配置中定义配置部分

3.  添加您的自定义配置，它可以作为单独的配置文件包含在内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:47:14.220

在 web.config 中创建自定义部分。您可以在[http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx](http://haacked.com/archive/2007/03/11/custom-configuration-sections-in-3-easy-steps.aspx)找到一些示例，或者您可以在 Google 上搜索一下。

如果您将创建用于表示电子邮件接收者的 POCO，那么您可以将该部分中的实体映射到某种类型。

因此，您只需要使用一组电子邮件接收器来简化您的工作。

并且不要忘记创建用于发送电子邮件的服务层。

所以这里是你必须做的步骤：

1.  创建自定义配置部分。
2.  创建电子邮件接收者的 Poco 表示
3.  将自定义配置中的实体映射到 poco 集合
4.  创建用于发送电子邮件的服务或简单助手

顺便说一句，将域/应用程序特定的逻辑分离到单独的文件是一个很好的做法，所以请看看这个链接以及[将自定义配置组移动到单独的文件](https://stackoverflow.com/questions/1562679/moving-a-custom-configuration-group-to-a-separate-file)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:28:06.650

虽然我同意自定义配置部分是一种有效的方法，但可以将多个地址（包括显示名称）放在单个 appSetting 中。例如：

```
<add key="To" 
  value='"Recipient Name" &lt;some@email.com>, "Another Recipient Name" &lt;another@email.com>'/>

...
string to = ConfigurationManager.AppSettings["To"];
MailMessage m = new MailMessage();
m.To.Add(to); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:47:57.220

您可以创建自定义配置部分，请看这里：http: [//msdn.microsoft.com/en-us/library/2tw134k3 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/2tw134k3(v=vs.100).aspx)

适用于 ASP.NET，我认为也适用于 WPF 和 WinForms。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:02:20.593

您可以将名称/地址值存储在每个邮件寻址的部分中。

```
<configuration>
  <configSections>
    <section 
      name="MailAddressing" 
      type="System.Configuration.NameValueFileSectionHandler,System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>

  <MailAddressing>
     <add key="To" value="&quot;An Example&quot; <someone@example.com>;&quot;Second Example&quot; <another@example.com>" />
     <add key="CC" value="someone@example.com" />
     <add key="BCC" value="third@example.com" />
     <add key="From" value="sender@example.com" />
  </MailAddressing>
</configuration> 
```

然后通过以下方式访问地址

```
 NameValueCollection section =
        (NameValueCollection)ConfigurationManager.GetSection("MailAddressing"); 
```

也许最简单的序列化解决方案是使用 MailAddress 类中的字符串转换器来处理设置的值。

```
// Test data
var addressList = new[]
    {
        new MailAddress("someone@example.com", "An Example"),
        new MailAddress("another@example.com", "Second Example")
    };

// To String for saving in config
string strValue = addressList.Select(i => i.ToString())
            .Aggregate((i, j) => i + ';' + j);

// From String for reading from config
MailAddress[] addressList2 = strValue.Split(';').Select(i => 
            new MailAddress(i)).ToArray(); 
```

现在，您可以为每个按邮件地址分组的 To/CC/BCC 值设置一个配置设置。它适用于单个或多个地址，无论是否显示名称。

# addressbook - 英国邮政编码检查器

> ID：13932058
> 
> 赞同：0
> 
> 时间：2012-12-18T11:34:14.583
> 
> 标签：addressbook, postal-code

我想使用邮政编码检查器。在这里，我将在文本框中发布邮政编码。然后它会自动过滤与该邮政编码相关的所有英国地址。我将从哪里得到这个 api？是付费的还是免费的？并且还提供了如何使用这个api。请给我这个api的详细信息。我在 php 工作。

我需要购买这个api吗？我从哪里可以买到这个 api？请帮我 ...

谢谢，里帕萨哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:31:35.893

Royal Mail also offer this service , their data set is likely to be the most comprehensive and upto date as new postcodes/streetmappings are changed.

See the PAF file (Postcode Address File)

[http://www.royalmail.com/marketing-services/address-management-unit/address-data-products/postcode-address-file-paf?campaignid=paf_redirect](http://www.royalmail.com/marketing-services/address-management-unit/address-data-products/postcode-address-file-paf?campaignid=paf_redirect)

# java - Java 图像仅绘制第二次

> ID：13932066
> 
> 赞同：0
> 
> 时间：2012-12-18T11:35:01.997
> 
> 标签：java, image, draw

我正在尝试用 Java 绘制图像，我有下一个代码：

```
public void draw(Graphics g) {
    Image strike_mid;
    strike_mid = Toolkit.getDefaultToolkit().getImage(getClass().getResource("strike_mid.gif")); 

    for (int i=0;i<30;i++) {
        for (int j=0;j<30;j++) {
            if (strikeGrid[i][j]) {
                g.drawImage(strike_mid, i*10, j*10, null);
            }
        }
    }
} 
```

第一次调用draw方法时，并没有绘制strike_mid图像，而我很确定for循环中存在到达drawImage的状态。

当我第二次调用draw方法时，绘图成功。

我确信它也是第一次到达 drawImage，因为当我选择绘制另一个 .gif 文件时，它也是第一次工作。

那么这里有什么问题呢？怎么可能第一次用strike_mid.gif 不画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:04:46.620

如果我正确地记得我的 Swing/AWT 的话，仅仅因为`getImage`来自`Toolkit`返回的调用并不意味着图像已经完全加载。您可以查看`MediaTracker`或`ImageObserver`了解有关异步加载的更多信息。无论如何，你绝对应该把跟注`getImage`拉出平局。该工具包可能会缓存 Image 对象，如文档中所述，但没有理由一遍又一遍地重新加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:41:13.073

正如 Tom 所提到的，这些`Toolkit`方法通常是异步的。或者使用`ImageIO.read(File/URL/InputStream`) 作为加载图像的阻塞方法。

# c# - 就SQL注入而言，哪个sql查询更安全

> ID：13932068
> 
> 赞同：3
> 
> 时间：2012-12-18T11:35:07.130
> 
> 标签：c#, sql, database, sql-injection

我有两个 SQL 查询，每次调用查询时，我都在尝试更新`sup`和值分别为 +1 和 -1。`opp`

第一个查询：

```
 query=update disc set sup=@sup, opp=@opp where did=@did

    int sup=getnoofsup(did);
    int opp = getnoofopp(did);

    com.Parameters.AddWithValue("@sup", sups + 1);
    com.Parameters.AddWithValue("@opp", opps - 1);
    com.Parameters.AddWithValue("@did", did);

    com.ExecuteNonQuery(); 
```

第二次查询

```
string query="update disc set sup=sup+1, opp=opp-1 where did=@did" ;
com.Parameters.AddWithValue("@did", did);

com.ExecuteNonQuery(); 
```

`@sup`因为我交换，第二次注入查询是否有任何威胁`sup+1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:37:50.673

不，第二个查询与第一个查询一样安全，因为它是完全参数化的，因此不提供外部数据可以输入 SQL 查询本身文本的路径。该`sup+1`表达式由 RDBMS 计算，而不是由您的程序^*计算，因此它不能提供将新代码注入现有 SQL 的机会。

* * *

^*并且它不会随后呈现给 SQL 的`exec`存储过程进行重新解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:38:47.150

这两个查询对于 Sql 注入同样安全，但是

```
com.Parameters 
```

总是更可取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:40:39.380

第二个查询更好。

```
string query="update disc set sup=sup+1, opp=opp-1 where did=@did" ;
com.Parameters.AddWithValue("@did", didparameter);
com.ExecuteNonQuery(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:41:01.997

这两个查询都是安全的，但第二个更可取，因为您不需要添加额外的`parameter`。在第一个查询中，您找到了您不需要的值`sup`和值。`opp`

# jquery - JQuery if 语句没有按预期工作并且 == 停止工作

> ID：13932069
> 
> 赞同：0
> 
> 时间：2012-12-18T11:35:09.610
> 
> 标签：jquery, function, if-statement

此代码不起作用。曾经使用 source == "youtube" 但突然 == 甚至不工作或返回任何东西，当我这样做时，总是只有一个 ifs 得到批准，无论是 youtube 还是 vimeo，取决于你先放哪个编码。我检查了传递给函数的源代码，它很好。那么问题是什么？为什么 == 停止工作？

```
if (source = "youtube") {
    $("#videowrap article").html("<iframe src='http://www.youtube.com/embed/"+video_url+"' frameborder='0' allowfullscreen></iframe>");
    $("#videowrap article iframe").css({"width" : VideoWidth+"px","height" : VideoHeight+"px"});
    $("#videowrap article").css("marginLeft",MarginLeft+"px");
    $("#videowrap").fadeIn(500);
}
if (source = "vimeo") {
    $("#videowrap article").html("<iframe src='http://player.vimeo.com/video/"+video_url+"?badge=0' frameborder='0' webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>");
    $("#videowrap article iframe").css({"width" : VideoWidth+"px","height" : VideoHeight+"px"});
    $("#videowrap article").css("marginLeft",MarginLeft+"px");
    $("#videowrap").fadeIn(500);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:35:54.517

```
if (source == "vimeo") 
```

或者

```
 if (source === "vimeo") 
```

不是

```
if (source = "vimeo") 
```

# emacs - 在 EMACS 组织模式下，如何使某些文本不折叠

> ID：13932071
> 
> 赞同：1
> 
> 时间：2012-12-18T11:35:14.623
> 
> 标签：emacs, org-mode

像这样：

* * *

[展开文本]

```
* Top level headline
** 2nd level
*** 3rd level
       some text
*** 3rd level
       more text

THESE DON'T NEED TO FOLD.
SOME TEXT CONTENT ~~~ 
```

* * *

[折叠文本]

```
* Top level headline...

THESE DON'T NEED TO FOLD.
SOME TEXT CONTENT ~~~ 
```

* * *

怎么做 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:02:38.090

Org 模式是一个大纲——**出现在标题之后的内容将属于一个标题**。

没有办法解决这个问题。看到[这个问题](https://stackoverflow.com/questions/9793428/how-to-end-todo-lists-in-emacs-org-mode)。

您可以使用：

```
* Top level headline...

* Unfolded headline

THESE DON'T NEED TO FOLD.
SOME TEXT CONTENT ~~~ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:41:48.497

`:VISIBILITY:`您可以使用该属性指示某些子树始终以展开状态打开。

# d - 为什么在编译时没有发现数组字面量大小不匹配？

> ID：13932076
> 
> 赞同：7
> 
> 时间：2012-12-18T11:35:37.440
> 
> 标签：d

我有以下代码：

```
import std.stdio;

int main(string[] args)
{
   int[3] my_array = [1, 2];
   return 0;
} 
```

这编译得很好，然后在执行时中止，给出这个错误：

```
arrays_init
object.Exception@src/rt/arraycat.d(31): lengths don't match for array copy
----------------
arrays_init(_Dmain+0x64) [0x416bbc]
arrays_init(extern (C) int rt.dmain2.main(int, char**).void runMain()+0x1c) [0x418c5c]
arrays_init(extern (C) int rt.dmain2.main(int, char**).void tryExec(scope void delegate())+0x2a) [0x4185d6]
arrays_init(extern (C) int rt.dmain2.main(int, char**).void runAll()+0x3b) [0x418ca3]
arrays_init(extern (C) int rt.dmain2.main(int, char**).void tryExec(scope void delegate())+0x2a) [0x4185d6]
arrays_init(main+0xd1) [0x418561]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed) [0x7f60bc41d30d] 
```

如果数组文字有 3 个项目，这运行良好，因此显然数组文字必须匹配静态数组的大小。但这不应该给出编译错误，因为两者的大小都可以在编译时计算吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T14:31:54.063

数组字面量属于 类型`T[]`，即它们是动态数组，在编译时不知道它们的大小。

您的代码编译的原因与编译的原因相同：

```
void foo(int[] xs)
{
    int[3] ys = xs;
    ...
} 
```

编译器根本不知道有多大`xs`。

在您的情况下，编译器*可以*在编译时知道，因为所有信息都在那里，但它会超出编译器的义务。严格解释代码，没有类型不匹配，所以可以编译。

数组文字是动态数组的另一个副作用是您拥有的代码实际上会分配内存。它在堆上分配动态数组，复制到静态数组中，然后你必须等待一个垃圾回收周期才能回收内存。如果您在紧密循环中初始化这样的数组，这可能会导致性能不佳。

同样，编译器*可以避免*分配，但 DMD 至少在当前版本 (2.060) 中没有。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T12:08:22.727

那是因为`[1, 2]`(动态数组) 的类型不保留数组中元素的数量，所以当编译器到达赋值 ( `=`) 时，它不知道右边的表达式中有多少元素边。

简单地说：编译器根本不够聪明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:38:45.280

可能是因为这条线：

```
int[3] my_array = [1, 2]; 
```

在左侧，您说的是数组中的 3 个值，即您正在定义`static array of 3 ints`，但仅分配两个值。

将其更改为：

```
int[3] my_array = [1, 2, 3]; 
```

问题应该得到解决。

# javascript - html2canvas 外部网站截图

> ID：13932077
> 
> 赞同：3
> 
> 时间：2012-12-18T11:35:38.377
> 
> 标签：javascript, jquery, html2canvas

我什至不知道如何做到这一点，而且 html2canvas 的文档在这部分并没有真正的帮助。

我可以用这段代码截取我的 html 截图：

```
target = $('#myDiv');
        html2canvas( target, {
        onrendered: function( canvas ) {
            /* canvas is the actual canvas element, 
               to append it to the page call for example 
             */
               document.body.appendChild( canvas );
            }
        }) 
```

但我希望能够传递一个 url 并制作此页面的屏幕截图。就像他们在示例页面中所做的那样：http: [//html2canvas.hertzen.com/screenshots.html](http://html2canvas.hertzen.com/screenshots.html)

如果有人能给我一个提示如何开始，我会很高兴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:43:10.347

出于安全原因，您不能只加载任何外部 URL。这就是为什么，正如他们在您链接到的页面上所描述的那样，您需要设置一个单独的服务器端脚本来获取该页面。然后，您可以直接或通过 AJAX 使用该脚本为 html2canvas 提供输入。

# android - Monkeytalk：我无法自动化已使用 AutoCompleteTextView 的文本区域

> ID：13932081
> 
> 赞同：0
> 
> 时间：2012-12-18T11:35:55.850
> 
> 标签：android, automation

我想使用 MonkeyTalk IDE 自动化 android 应用程序。我无法自动化使用 AutoCompleteTextView 的文本区域。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:40:04.520

我也无法使其正常工作，行的视图也不会显示在组件树上。

Monkeytalk 在包括弹出窗口和对话框在内的许多小部件上都有问题，所以这并不让我感到惊讶。例如，[我们必须旋转 90 度](http://www.gorillalogic.com/content/unable-record-specific-menu-button-press)才能按下弹出菜单选项。另一方面，据说它支持微调器。

# java - Jboss Java EE 容器和一个 ExecutorService

> ID：13932083
> 
> 赞同：29
> 
> 时间：2012-12-18T11:35:59.387
> 
> 标签：java, multithreading, concurrency, jboss, ejb

我有一个独立的 java 应用程序，它使用 ExecutorService 并行处理多个作业

```
 ExecutorService es = Executors.newFixedThreadPool(10); 
```

我现在想在 EJB bean 中重新使用相同的解决方案，但不确定如何正确初始化 ThreadPool，因为我通常会离开 Java EE 容器来控制所有线程资源。我可以只使用相同的代码还是有另一种正确的方法来获取 Jboss 托管线程池？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-10-16T13:20:30.390

在 EJB 中执行此操作的正确方法是使用 ManagedExecutorService，它是 Concurrency Utils API (Java EE7) 的一部分。您不应该在企业代码中使用任何属于 java.util.concurrent 的 ExecutorService。

通过使用 ManagedExecutorService，您的新线程将由容器创建和管理。

以下示例取自我的[网站](http://blog.chris-ritchie.com/2013/10/managed-thread-factory-example-in-wildfly.html)。

要使用 ManagedExecutorService 创建新线程，首先创建一个实现 Callable 的任务对象。在 call() 方法中，我们将定义我们希望在单独的线程中执行的工作。

```
public class ReportTask implements Callable<Report> {

    Logger logger = Logger.getLogger(getClass().getSimpleName());

    public Report call() {
        try {
            Thread.sleep(3000);
        catch (InterruptedException e) {
            logger.log(Level.SEVERE, "Thread interrupted", e);
        }
        return new Report();
    }
} 
```

然后我们需要通过将任务传递给 ManagedExecutorService 的 submit() 方法来调用任务。

```
@Stateless
public class ReportBean {

    @Resource
    private ManagedExecutorService executorService;

    public void runReports() {
        ReportTask reportTask = new ReportTask();
        Future<Report> future = executorService.submit(reportTask);
    }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-19T04:33:10.653

*强制性警告：不鼓励在 Java EE 应用服务器（甚至 Tomcat）中创建自己的线程，因为这可能是一个巨大的性能问题，并且在大多数情况下会阻止容器功能（例如 JNDI）工作。新线程将不知道它们属于哪个应用程序，不会设置线程上下文类加载器以及许多其他隐藏问题。*

幸运的是，有一种方法可以让 Java EE 服务器通过 Java EE 6`@Asynchronous`和这种巧妙的设计模式来管理线程池。可移植到任何经过 Java EE 6 认证的服务器。

在您的应用程序中创建此 EJB。

```
package org.superbiz;

import javax.ejb.Asynchronous;
import javax.ejb.EJB;
import javax.ejb.Stateless;
import java.util.concurrent.Callable;
import java.util.concurrent.Executor;

@Stateless(name="Executor")
public class ExecutorBean implements Executor {

    @Asynchronous
    @Override
    public void execute(Runnable command) {
        command.run();
    }
} 
```

然后，您可以通过简单的依赖注入在应用程序的其他地方引用此 bean（如果引用组件是 Servlet、Listener、Filter、其他 EJB、JSF 托管 bean）。

```
@EJB
private Executor executor; 
```

然后`Executor`正常使用。

如果该组件不是另一个 Java EE 组件，您可以通过以下方式查找 bean：

```
InitialContext initialContext = new InitialContext();
Executor executor = (Executor) initialContext.lookup("java:module/Executor"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-03T13:24:29.797

嗯......大卫的解决方案对我不起作用，原因如下：

1.  编译器一直在抱怨 java.util.concurrent 是不允许的……这在 JBOSS 范围内是有道理的。
2.  另外：公共静态类...？阅读本文：[为什么不能在 Java 中将类声明为静态？](https://stackoverflow.com/questions/3584113/java-static-class)

这是我所做的：
我的安装：
- JBOSS AS 7.1.1
- Java 1.6
- RHEL - 使用[Gradle](http://www.gradle.org)和[Arquillian](http://arquillian.org/)
运行示例：

```
@Stateless
public class ExecutorBean {
    @Asynchronous
    public void execute(Runnable command) {
        command.run();    
    }
} 
```

然后你的客户看起来像这样：

```
@EJB ExecutorBean eb;
@Test
public void testExecutorBean() {
    eb.execute(new YourCustomizedRunnableWhichDoesALotOfUsefulStuff());
    assertFalse(!true);
} 
```

不过要当心：在我的standalone.xml（或者一般来说我的JBOSS配置文件中，我有一个“线程池”部分。看看它（如果你碰巧使用JBOSSAS）并修改那里的值。找出它是如何表现的。当我使用带有 arquillian 测试的线程时，尽管我的 keepalive-time 非常高，但我得到的线程被杀死了。我认为这与 arquillian 微部署的方式有关。当 arquillian 完成时，所有正在运行的未完成线程都被杀死在运行测试时……至少我认为我观察到了这一点。另一方面，所有已完成的线程实际上都表现良好，因为它们完成了任务/操作。

希望这篇文章有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-28T09:18:20.973

在 EE7 之前，您可能希望使用 JSR 237 中的 WorkManager

[http://docs.oracle.com/javaee/1.4/api/javax/resource/spi/work/WorkManager.html](http://docs.oracle.com/javaee/1.4/api/javax/resource/spi/work/WorkManager.html)

该规范目前已被撤销，仍有一些应用服务器实施它。我在 WebSphere 8.5 - [IBM WorkManager](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r0/index.jsp?topic=/com.ibm.websphere.javadoc.doc/public_html/api/com/ibm/websphere/asynchbeans/WorkManager.html)中使用 ibm 实现。它是完全托管的资源，可在管理控制台中使用。请注意，它与 Oracle 的接口不兼容。

以下是 IBM 版本的示例：

```
@Resource(lookup = "wm/default")
WorkManager workManager;

public void process() {
    try {
        ArrayList<WorkItem> workItems = new ArrayList<WorkItem>();
        for (int i = 0; i < 100; i++) {
            // submit 100 jobs
            workItems.add(workManager.startWork(new Work() {
                @Override
                public void run() {
                    try {
                        System.out.println(Thread.currentThread().getName() + " Running");
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

                @Override
                public void release() {
                    System.out.println(Thread.currentThread().getName() + " Released");
                }
            }));
        }
        // wait for all jobs to be done.
        workManager.join(workItems, WorkManager.JOIN_AND, 100000);
    } catch (WorkException e) {
        e.printStackTrace();
    }
} 
```

我也知道[Commonj Workmanager](http://commonj.myfoo.de/jsr237-api/commonj/work/WorkManager.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-27T15:45:49.757

如果你使用 JBoss，你可以使用 org.jboss.seam.async.ThreadPoolDispatcher。

ThreadPoolDispatcher 是完全托管的。

对于其他有用的托管类，请参见包：org.jboss.seam.async。

# wpf - XPS 查看器“页面无法显示”

> ID：13932084
> 
> 赞同：3
> 
> 时间：2012-12-18T11:36:02.273
> 
> 标签：wpf, xps, documentviewer

我正在使用 WPF 创建自定义报告。我正在将 DocumentViewer 与 FixedDocument 一起使用，并且显然一切正常，我正在创建的文档在屏幕上可见，并且它也可以在打印机上运行。但是，如果我尝试使用*Microsoft XPS Document Writer*虚拟打印机进行打印，并使用 XPS 文档接收器打开创建的文件，则会收到“**无法显示页面**”错误： ![在此处输入图像描述](../Images/35079600e1a1e6e1320ddae97acdaf2d.png)

我在项目历史记录中做了一些回滚，显然当文档从单页传递到多页时会发生错误。作为另一个提示：文档包含图像和字体作为嵌入资源。不知道这是否会改变行为。

**编辑** 我发现导致问题的代码：

```
<Style TargetType="FixedPage">
                <Setter Property="Width" Value="1122.24"/>
                <Setter Property="Height" Value="793"/>
            </Style> 
```

这些是横向 A4 的尺寸。如果我指定的尺寸与默认尺寸不同，xps viever 似乎会发疯，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:08:52.753

我自己想通了。由于某些原因，我无法理解是否将页面大小设置为样式表单资源，它适用于打印机和 DocumentViewer，但**在导出 xps 时会失败**。为了解决这个问题，我只是在每页中指定了大小：

```
<FixedPage Height="816" Width="1056" > 
```

这有点傻，因为我事先知道每页有多大，所以拥有基于类型的样式对我来说似乎是个好主意，但它没有用。

# android - Android：从 MediaStore.Audio.Genres.Members 表中删除条目

> ID：13932085
> 
> 赞同：0
> 
> 时间：2012-12-18T11:36:05.190
> 
> 标签：android, mediastore

我正在编写一个能够编辑 MP3 歌曲流派的 Android 音乐播放器。

我遵循的程序是：

1.  编辑 MP3 文件本身的流派标签
2.  更新 SqlLite MediaStore.Audio.Genres 表以反映更改（我不想为 Android 触发冗长的“重新扫描”操作以自行获取更改）

我的研究表明我需要修改 MediaStore.Audio.Genres.Members 表（即这是我用来获取流派信息的表）。

我的问题是一个看似简单的删除操作没有按预期工作。

注意：我知道不要使用如图所示的硬编码 URI，但这只是测试代码......

```
String uriStr = "content://media/external/audio/genres/2/members";
Uri uri = Uri.parse(uriStr);

// Query the table for the row with ID=5448
Cursor cursor = context.getContentResolver().query(uri, null, BaseColumns._ID + "=5448", null, null);
Log.v("Test", "Row count: " + cursor.getCount());
cursor.close();

// Try to delete row 5448
int rowsCount = context.getContentResolver().delete(uri, BaseColumns._ID + "=5448", null);
Log.v("Test", "Rows deleted: " + rowsCount);

// Try (again) to delete row 5448
rowsCount = mService.getContentResolver().delete(uri, BaseColumns._ID + "=?", new String[]{"5448"});
Log.v("Test", "Rows deleted: " + rowsCount);

// Query (again) the table for the row with ID=5448         
Cursor cursor1 = mService.getContentResolver().query(uri, null, BaseColumns._ID + "=5448", null, null);
Log.v("Test", "Row count: " + cursor1.getCount());
cursor1.close(); 
```

上述代码的日志是...

```
Row count: 1
Rows deleted: 0
Rows deleted: 0
Row count: 1 
```

为什么上面的**查询**返回一个有效的条目，但**删除**失败？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:31:00.943

编辑表格没有意义。安卓会自动更新它在你标记的音乐上找到的内容。为什么不从 mp3 的角度来看问题呢？向用户展示流派列表，提供替换功能，然后使用新流派更新曲目，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T18:30:26.463

也许您不再需要这个，但如果您这样做，我可以建议我使用的解决方案：当您显示流派时，只需检查每个流派的曲目数，如果它为 0，则不显示此流派。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T15:09:03.980

您宁愿使用 AUDIO_ID 列，而不是 BaseColumns._ID，因为每次删除行时行 ID 都会更新。

这是我在自己的应用程序中所做的（在 Android 4.0.4 上测试并运行良好）：

```
context.getContentResolver().delete(MediaStore.Audio.Genres.Members.getContentUri(
                "external", genreId), MediaStore.Audio.Genres.Members.AUDIO_ID + " = " + song.getId(), null); 
```

# c++ - 如何用非类型参数重载类模板的<<运算符？

> ID：13932088
> 
> 赞同：6
> 
> 时间：2012-12-18T11:36:10.043
> 
> 标签：c++

我正在尝试重载`operator<<`类模板，如下所示：

```
template<int V1,int V2>
class Screen
{
    template<int T1,int T2> friend ostream& operator<< (ostream &,Screen<T1,T2>&);  
    private:
        int width;  
        int length;
    public:
        Screen():width(V1),length(V2){}
};
template<int T1,int T2>
ostream& operator<< (ostream &os,Screen<T1,T2> &screen)
{
    os << screen.width << ' ' << screen.length;
    return os;
} 
```

上面的代码运行正确！但我想知道是否有任何方法可以`operator<<`通过不将其设置为函数模板来以某种方式重载：

`friend ostream& operator<< (ostream &,Screen<T1,T2>&);` ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T11:41:09.410

是的，但您必须预先声明模板并使用`<>`语法：

```
template<int V1, int V2> class Screen;
template<int T1, int T2> ostream &operator<< (ostream &,Screen<T1,T2> &);
template<int V1, int V2>
class Screen
{
    friend ostream& operator<< <>(ostream &, Screen&);
    ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T11:44:50.053

好的做法是有一些`printContent`像这样的公共功能 -

```
void Screen::printContent(ostream &os)
{
    os << width << ' ' << length;
}

ostream& operator<< (ostream &os,Screen<T1,T2> &screen)
{
    screen.printContent(os);
    return os;
} 
```

因此你不需要任何`friend`s

# iphone - 从 iPad 主屏幕将 Web 应用程序作为 iPhone Web 应用程序运行？

> ID：13932089
> 
> 赞同：2
> 
> 时间：2012-12-18T11:36:15.907
> 
> 标签：iphone, ios, ipad, web-applications, web

几周前，在为 iPhone/iPad 开发网络应用程序时，我尝试将其添加到 iPad 的主屏幕。当我启动它时，它作为在 iPad 上运行的 iPhone 应用程序启动（带有 1x/2x 放大镜的肖像）。

尽我所能，我无法重现导致这种情况发生的任何原因。是我在元标记、初始屏幕中指定的内容，还是与页面宽度有关的内容？我在网上找不到任何关于它的信息。

# javascript - Youtube iFrame API 的 cueVideoById 在移动设备上不起作用？

> ID：13932090
> 
> 赞同：3
> 
> 时间：2012-12-18T11:36:21.833
> 
> 标签：javascript, iframe, youtube-api

我正在开发一个网站，该网站涉及在移动设备上播放嵌入的 Youtube 视频片段。[API](https://developers.google.com/youtube/iframe_api_reference#Queueing_Functions "API")声明 cueVideoById 支持定义 startSeconds 和 endSeconds 参数，只要您使用如下对象语法即可：

```
player.cueVideoById({videoId:String, 
                     startSeconds:Number, 
                     endSeconds:Number, 
                     suggestedQuality:String}):Void 
```

这在桌面浏览器上运行良好，但在 Android 和 Windows Phone 8 中，我都会收到标准的 Youtube 消息，指出视频当前不可用。如果我将 cueVideoById 切换回这样的参数语法，一切正常：

```
player.cueVideoById(videoId:String, 
                    startSeconds:Number, 
                    suggestedQuality:String):Void 
```

...但是我再也无法访问 endSeconds 了。有谁知道原因，甚至更好的解决方法？我使用的代码基于 API 中的基本入门示例：

```
<!DOCTYPE html>
<html>
  <body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
      // 2\. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "//www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3\. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4\. The API will call this function when the video player is ready.
      function onPlayerReady(event) {

      event.target.cueVideoById("u1zgFlCw8Aw", 10, "medium");   // Works on mobile
      /*
        event.target.cueVideoById({ videoId: "u1zgFlCw8Aw",         // Doesn't work on mobile
                                    startSeconds: "10",
                                    endSeconds: "15",
                                    suggestedQuality: "medium"});
        */
        event.target.playVideo();
      }

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T14:03:04.710

现在在 android jellybean 上这一切都对我有用......

我添加了这个：

函数 onPlayerStateChange(事件) {

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T13:53:27.377

我添加了这个：

```
function onPlayerStateChange(event) {

} 
```

就像你在评论中所说的那样，现在只有第一个例子对我有用。

# javascript - javascript下拉菜单onclick

> ID：13932093
> 
> 赞同：4
> 
> 时间：2012-12-18T11:36:45.420
> 
> 标签：javascript, drop-down-menu

我已经为此工作了一段时间，但不明白我的代码有什么问题。我敢肯定这很简单——总是如此！

基本上，我有一个下拉菜单，有一些选项。我希望它在选择第三个选项管道工时转到网页。当单击其他任何一个时，什么都不会发生。

到目前为止，我的代码是：

```
<select id = 'search'>
<option value="1">Carpenter</option>
<option value="2">Electrician</option>
<option value="3">Plumber</option>
<option value="4">Tiler</option>
<option value="5">Boiler Installation</option>

</select> 
```

去

我的javascript是：

```
<script>
function go_button {
if (search.value=="3") {
location="search_results.htm"
}
}

</script>​​​​​​​ 
```

但它不起作用。有人可以告诉我有什么问题吗？

谢谢。

C。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:45:44.097

您可以通过脚本在控件上放置[更改事件](http://www.w3schools.com/jsref/event_onchange.asp)，也可以将其直接添加到控件中。

直接法：

```
<select id="search" onChange="OnSelectedIndexChange()"> 
```

这是您需要放入脚本的函数：

```
//function for changed selection
function OnSelectedIndexChange()
{
if (document.getElementById('search').value == "3"){
    location.href="search_results.htm";
}
} 
```

使用脚本（JavaScript 或 JQuery）添加更改事件：

我建议[JQuery](http://jquery.com/)这样做（这里的 onSelectedIndexChange 函数已过时）

```
$('#search').change( function() {

if(this.val() == "3"){
location.href="search_results.htm";
}

}); 
```

如果您不想使用 JQuery，只需添加以下代码：

```
 var yourdropdown = document.getElementById('search');
    yourdropdown.Attributes.Add("onChange", "return OnSelectedIndexChange();") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:44:30.390

```
<select id="search"> 
```

我想，有很多空间。

```
getElementById("search").value 
```

我已经有一段时间没有使用它了，但它不是......

```
location.href = "search_results.htm"; 
```

有点像这样使您可以访问该对象。最后但并非最不重要的一点是，您需要将函数“go_button”与下拉框的事件相关联，如下所示：

```
<select id="search" onClick="go_button();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:54:29.390

我认为 - 如果可能的话 - 使用 jQuery 或其他 js 框架，它们都有内置的 select 和其他 html/dom 插件和方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:38:27.717

您需要告诉 javascript 您对哪个元素感兴趣。

用于`getElementById("search")`返回元素，然后您可以查看获取它的值。

# database - 插入 OLEDB VB.NET

> ID：13932095
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:36:47.670
> 
> 标签：database, vb.net, insert, oledb

这有什么问题？

```
da.InsertCommand = New OleDb.OleDbCommand("Insert Into Table1 Values( 1, '" & TextBox1.Text & "')")
da.InsertCommand.Connection = con
con.Open()
da.Update(ds)
con.Close() 
```

无论如何，数据库永远不会更新。还是有更好的方法插入数据库？我已经尝试过 CommandBuilder，但它似乎也不起作用。或者我可以直接在 VB.NET 中对我的数据库执行查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:10:52.190

您对 DataAdapter.Update 的作用有些困惑。更新将您的 InsertCommand、UpdateCommand、DeleteCommand 应用于 DataSource 中存在的每个已添加、已修改或已删除的行（假设 ds 是一个数据集）。
它不会自行向数据库添加/删除/更新记录。

如果你想向数据库中添加一条记录，你应该像这样编写（伪）代码

```
Using con = GetConnection()
Using cmd = new con.CreateCommand()
    cmd.CommandText = "Insert Into Table1 Values( 1, ?)"
    cmd.Parameters.AddWithValue("@param1", textbox1.Text)
    cmd.Connection = con
    con.Open()
    cmd.ExecuteNonQuery()
End Using
End Using 
```

请注意使用 Using 语句来确保关闭和处理连接和命令。此外，永远不要连接字符串来构建 sql 命令。使用参数可以避免解析问题和 SQLInjection 攻击。

编辑：根据您在下面的评论并假设 Table1 的第一列是自动编号字段，您可以通过这种方式更改代码

```
Using con = GetConnection()
Using cmd = new con.CreateCommand()
    cmd.CommandText = "Insert Into Table1 Values(?)"
    cmd.Parameters.AddWithValue("@param1", textbox1.Text)
    cmd.Connection = con
    con.Open()
    cmd.ExecuteNonQuery()
End Using
End Using 
```

此外，对于“未添加任何内容”的问题，我认为您的项目中包含数据库文件 (mdb)，并且属性`Copy To The Output Directory` 设置为`Copy Always`

[在此页面上查看 MSDN 上](http://msdn.microsoft.com/en-us/library/ms246989.aspx)的详细说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:43:53.800

是的，这是因为您还没有尝试运行非查询。请记住，SELECT 语句是查询语句，而 INSERT、UPDATE、DELETE 是非查询语句。da.Update() 或 da.Fill() 只会从查询操作中提取结果。

在打开连接后，您需要添加额外的一行 da.ExecuteNonQuery() 或任何在 VB.NET 中执行非查询语句的语句！

~夏基尔·沙比尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:10:22.627

干净整洁...

```
Using oCmd As New OleDbCommand("Insert Into Table1 Values(1, '" & TextBox1.Text & "')", con)
    oCmd.ExecuteNonQuery()
End Using 
```

这有点讨厌，因为 SQL 注入或 Textbox1.Text 可能包含单引号，但出于测试/开发目的，它会起作用。

# hadoop - 从 Hadoop Job Tracker Web 界面访问 EMR 任务日志

> ID：13932106
> 
> 赞同：1
> 
> 时间：2012-12-18T11:37:14.510
> 
> 标签：hadoop, amazon-ec2, emr

我已经为我的主/从节点打开了 EC2 安全组，因此我可以从本地浏览器访问作业跟踪器界面。我使用`http://MASTER-IP:9100`.

一切正常，直到我尝试从任务详细信息中访问任务跟踪器日志 -`http://ec2-xx-xx-xx-xx.compute-1.amazonaws.com:9100/taskdetails.jsp?tipid=task_201212181113_0001_m_000000`

我获得的链接指向内部 EC2 IP 地址，因此我无法从本地计算机访问它们（链接是`http://10.116.xxx.xx:9103/tasklog?attemptid=attempt_201212181113_0001_m_000000_0&all=true`）

有没有办法更改 EMR 以使这些链接包含任务跟踪器的公共 IP？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:21:50.133

你可以很容易地做的是`ssh`到主节点，然后从那里你 cab 到`curl`这个日志位置。通常我们总是通过隧道连接到主节点并通过以下方式访问 Job tracker web iterface`http://localhost:9100`

为了隧道，您可以执行以下操作：

```
ssh -i your-pem-file.pem -L 9100:ec2-xx-xx-xx-xx.computamazonaws.com:9100 hadoop@ec2-xx-xx-xx-xx.compute-1.amazonaws.com 
```

然后通过简单的方式访问日志`curl`，例如：

```
$ curl http://10.116.xxx.xx:9103/tasklog?attemptid=attempt_201212181113_0001_m_000000_0&all=true 
```

您还可以登录到您的 aws 控制台并在那里查找正在运行的 ec2 实例的列表。从那里你可以得到你想要的机器日志的私有 IP 和相应的公共 IP，然后你可以在日志的 URL 中用这个检索到的公共 IP 替换私有 IP，你就可以开始了。

但是第一个解决方案非常简单，也是我们通常所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:07:37.270

将所有从属服务器的公共 IP 及其主机名添加到您的 /etc/hosts 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T04:22:52.180

尝试 ssh 隧道。并使用 Firefox-Plugin FoxyProxy。您应该能够从本地浏览器看到作业跟踪器界面并浏览日志

# iphone - arrayWithContentsOfFile 与 plist 在 5.1 iPad 上返回部分键

> ID：13932110
> 
> 赞同：0
> 
> 时间：2012-12-18T11:37:21.007
> 
> 标签：iphone, objective-c, ios, nsarray, plist

我有以下方法可以读取 plist 文件[请参阅随附的屏幕截图]并将其作为可变数组返回：

```
+(NSMutableArray *)getSharersPlistArray:(NSString*)plist
{
    NSString *AppDetailPlist = [[NSBundle mainBundle] pathForResource:plist ofType:@"plist"];
    NSMutableArray* toReturn = [NSMutableArray arrayWithArray:[NSArray arrayWithContentsOfFile:AppDetailPlist]];
    NSLog(@"toReturn:%@", toReturn);
    return toReturn;
} 
```

这在 iPad 1 / iOS 5.1 上的不完整结果：

```
(
        {
        2 =         {
            image = "Icon-72.png";
            name = Email;
            type = ShareCell;
        };
    },
        {
        0 =         {
            image = "Icon-72.png";
            name = Share;
            type = ShareCell;
        };
    }
) 
```

在 5.1 或 6.0 模拟器上的正确/完整结果：

```
(
        {
        0 =         {
            image = "Icon-72.png";
            name = Facebook;
            type = ShareCell;
        };
        1 =         {
            image = "Icon-72.png";
            name = Twitter;
            type = ShareCell;
        };
        2 =         {
            image = "Icon-72.png";
            name = Email;
            type = ShareCell;
        };
    },
        {
        0 =         {
            image = "Icon-72.png";
            name = Share;
            type = ShareCell;
        };
        1 =         {
            image = "Icon-72.png";
            name = Follow;
            type = ShareCell;
        };
    }
) 
```

我确实验证了 plist，它看起来不错：

寻找 。-name '*plist' -exec plutil {} \;

./Share.plist：好的

任何想法为什么？我将不胜感激任何见解）

![在此处输入图像描述](../Images/6fa49a7eee0f30cd2b3907aba9213af1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:43:25.463

试试这个：

1.  清理你的 Xcode 项目；

2.  从您的 iPad 1 / iOS 5.1 设备中删除该应用程序。

重新构建/运行。

希望这能解决它。

# php - setParameter 不替换通配符？

> ID：13932115
> 
> 赞同：1
> 
> 时间：2012-12-18T11:37:35.127
> 
> 标签：php, symfony, doctrine-orm

我一直在浪费很多时间试图弄清楚为什么我不能在 Symfony 2 中的 Doctrine Query 对象上使用 setParameter 方法。

我创建了一个自定义存储库类，我想在其中添加一些自定义搜索方法/查找器。

我已经尝试了很多不同的构建 DQL 组合，并且在每种情况下它都不会替换我指定的通配符。我希望这是我错过的显而易见的事情，但我还是有点困惑。

```
// Repository class

namespace Acme\PurchaseOrderBundle\Entity;

use Doctrine\ORM\EntityRepository;

class PurchaseOrderRepository extends EntityRepository
{
    public function findAllFiltered($sortType = 'id', $sort = 'ASC', $offset = 1, $limit = 30)
    {
        //Variation 1
        $query = $this->getEntityManager()
        ->createQuery('
                      SELECT po FROM AcmePurchaseOrderBundle:PurchaseOrder po
                      WHERE po.id = ?1'
        );
        $query->setParameter(1, 1);

        return $query->getDql();    

        // Yields: SELECT po FROM AcmePurchaseOrderBundle:PurchaseOrder po WHERE po.id = ?1

        //Variation 2
        $query = $this->getEntityManager()
        ->createQuery('
                      SELECT po FROM AcmePurchaseOrderBundle:PurchaseOrder po
                      WHERE po.id = :value'
        );

        $query->setParameter('value', 1);

        return $query->getDql();
        // Yields: SELECT po FROM AcmePurchaseOrderBundle:PurchaseOrder po WHERE po.id = :value
    }
} 
```

我开始使用 QueryBuilder，但这也以同样的问题告终，我无法获取要保存的参数！这真是太奇怪和令人沮丧了。

我正在使用 Symfony 2.1.5-DEV

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:48:01.803

这就是准备好的语句`getDQL()`的工作方式 - 返回准备好的语句。要获取您需要做的参数

```
$query->getParameters(); 
```

Doctrine 传递准备好的语句和执行参数，它不发送查询。

# c# - 路径无法访问 asp.net 中根目录下的 css 或 js 文件

> ID：13932120
> 
> 赞同：0
> 
> 时间：2012-12-18T11:37:52.613
> 
> 标签：c#, asp.net, path, resolveurl

当我尝试从子文件夹文件访问 CSS 或 JS 文件时，我无法获得正确的路径`en/Default.aspx`。

我有以下文件夹结构

```
Default.aspx
  en/Default.aspx
  en/MasterPage.master
  ar/Default.aspx
  ar/MasterPage.master
scripts/slider/script.js
styles/slider-en.css
scripts/slider/jquery.easing.js 
```

`en/Default.aspx`文件中的代码

```
<%@ Page Title="" Language="C#" MasterPageFile="~/en/MasterPage.master" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="Default" %>
<%@ Register Src="~/en/UserControls/ucSliderHP.ascx" TagName="ucSlider"  TagPrefix="uc"%>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server"></asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
<script src="../scripts/slider/jquery.easing.js" type="text/javascript"></script>
<script src="../scripts/slider/script.js" type="text/javascript"></script>
<link href="<%= Page.ResolveUrl("./styles/slider-en.css") %>" rel="stylesheet" type="text/css" />

<div id="content-container-750">
    <!-- Slider   -->
    <!-- Sidebar   -->
<div id="sidebar-container-240"></div>
<!-- Sidebar   -->
    <div id="Slider-Wrapper-750x300">
       <uc:ucSlider ID="NewsSlider" runat="server" />       
    </div>
     <!-- Slider   -->

      <!-- Banner   -->
      <div id="content-Banner-750x100HP">
      </div>
      <!-- Banner   -->
      <!-- Article   -->
      <div id="article-wrapperHP">
      </div>
      <!-- Article   -->
</div>

</asp:Content> 
```

当我使用`../`路径时，它总是返回路径为 `http://localhost:49831/en/scripts/slider/script.js`

当我使用 `Page.ResolveURL 或 ResolveURL 它返回我的路径为

`http://localhost:49831/website/en/Default.aspx?language=en-us&issue=5`

我不知道我应该怎么做我尝试过`../../`它也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:45:14.443

尝试使用 ResolveUrl：

```
<script src="<%=ResolveUrl("~/scripts/slider/jquery.easing.js")%>"  type="text/javascript"></script> 
```

代替

```
<script src="../scripts/slider/jquery.easing.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:45:16.123

您还可以添加波浪号 ( `~`) 并`runat="server"`让 ASP .NET 根据根目录解析 url。

例如

```
<link href='~/styles/slider-en.css' rel="stylesheet" type="text/css" runat="server"/> 
```

[查看此问题的其他选项](https://stackoverflow.com/questions/735684/asp-net-path-to-use-to-reference-css-and-js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:15:08.350

```
You can Use
    /scripts/slider/jquery.easing.js
<script src="/scripts/slider/jquery.easing.js" type="text/javascript"></script>

"/" 
```

指根。

# c++ - Linux 网络堆栈何时丢弃收到的 RTP 数据包？

> ID：13932121
> 
> 赞同：2
> 
> 时间：2012-12-18T11:37:53.607
> 
> 标签：c++, debugging, sockets, rtp, packet-loss

我正在调试接收 RTP 的 C++ 程序的丢包问题。在我的程序运行了很长时间接收大量 RTP 数据后，它开始丢失数据包。

使用 Wireshark 进行跟踪会显示丢失的数据包，但我的应用程序从未收到它们。似乎网络堆栈在将它们交付给应用程序之前将它们丢弃。重新启动我的应用程序后，一切都恢复正常。

为了产生错误情况，我用 RTP 使机器超载，当时丢包发生，这是有充分理由的。但是即使在我停止过载并开始以中等速率发送之后，仍然会发生丢包，我必须重新启动我的应用程序才能再次接收所有数据。

这是 Linux 接收缓冲区处理的问题吗？我可以检查哪些 Linux 统计信息来查看那些丢失的数据包去了哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T14:05:33.423

您消耗 UDP 输入的速度不够快。以下是缓解这种情况的一些常用步骤：

*   切换到[`recvmmsg(2)`](http://man7.org/linux/man-pages/man2/recvmmsg.2.html)如果您的内核支持它以减少系统调用开销，
*   预分配输入处理期间使用的所有内存，
*   分析您的应用程序，查找热点并进行优化，
*   也许农场处理到单独的线程，但保持锁定范围尽可能小，
*   增加你的套接字[接收缓冲区](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)（[`setsockopt(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/setsockopt.2.html)），

# regex - Lazarus Pascal 或 Delphi - 为安全/完整性转义字符

> ID：13932124
> 
> 赞同：3
> 
> 时间：2012-12-18T11:38:04.263
> 
> 标签：regex, delphi, escaping, lazarus

在 PHP（和 MySQL）中，我们有许多技术来确保输入的数据是有效和安全的。添加斜线、MySQL 的转义字符串和正则表达式是我们经常使用的一些。

我已经看过这个链接，它对该主题进行了非常初步的介绍，但它*可能*不完整或不是最新的。

我的问题：

1.  Lazarus/FPC 是否提供此类功能？

2.  德尔福提供什么？至少一些线索或函数名称可能会给我一个想法，以便我可以为 Lazarus 构建它。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T11:45:58.327

在几乎任何框架中，防止坏数据最可靠的方法不是试图逃避它，而是总是简单地使用准备好的语句。

Lazarus/FreePascal 也不例外 - 请参阅一些示例如何[在 FreePascal 中使用准备好的语句](http://wiki.freepascal.org/SqlDBHowto#How_to_use_parameters_in_a_query.3F)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T11:51:20.377

这个问题似乎完全是关于注射的。您可以通过使用参数将所有用户数据传递到数据库来防御这种情况。当你这样做时，没有必要逃避任何事情。不要试图以任何其他方式解决这个问题。

# wpf - 为 TextBlock.TextTrimming 启用继承

> ID：13932126
> 
> 赞同：0
> 
> 时间：2012-12-18T11:38:16.260
> 
> 标签：wpf, wpf-controls, textblock, texttrimming

我有一个自定义控件，我想告诉每个`TextBlock`内部使用`TextBlock.TextTrimming = CharacterEllipsis`，但我不想单独设置该属性。我的意思是即使后来用户定义了 a`ContentTemplate`并将其放在我的自定义控件中并且`ContentTemplate`包括一些`Textblocks`，他们也应该自动设置`TextBlock.TextTrimming = CharacterEllipsis`。

我怎么做？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:37:19.157

您可以创建具有[属性值继承的](http://msdn.microsoft.com/en-us/library/vstudio/ms753197%28v=vs.110%29.aspx)[附加属性](http://msdn.microsoft.com/en-us/library/vstudio/ms749011.aspx)，并将其应用于您的自定义控件，例如在其构造函数中。只要目标对象是 TextBlock，附加属性就会将其值复制到目标对象。

```
public class CustomControl : ContentControl
{
    public CustomControl()
    {
        SetTextTrimming(this, TextTrimming.CharacterEllipsis);
    }

    public static readonly DependencyProperty TextTrimmingProperty =
        DependencyProperty.RegisterAttached(
            "TextTrimming", typeof(TextTrimming), typeof(CustomControl),
            new FrameworkPropertyMetadata(
                default(TextTrimming),
                FrameworkPropertyMetadataOptions.Inherits,
                TextTrimmingPropertyChanged));

    public static TextTrimming GetTextTrimming(DependencyObject obj)
    {
        return (TextTrimming)obj.GetValue(TextTrimmingProperty);
    }

    public static void SetTextTrimming(DependencyObject obj, TextTrimming value)
    {
        obj.SetValue(TextTrimmingProperty, value);
    }

    private static void TextTrimmingPropertyChanged(
        DependencyObject obj, DependencyPropertyChangedEventArgs e)
    {
        var textBlock = obj as TextBlock;

        if (textBlock != null)
        {
            textBlock.TextTrimming = (TextTrimming)e.NewValue;
        }
    }
} 
```

请注意，无需`TextTrimming`在派生控件类中定义此附加属性。你也可以在一个特殊的帮助类中定义它，它甚至不需要从 DependencyObject 派生。

该属性也适用于在其可视化树中使用 TextBox 的任何其他控件，例如标准 ContentControl：

```
<ContentControl local:CustomControl.TextTrimming="WordEllipsis"
                Content="Some sample text to be trimmed"/> 
```

# java - 为什么 javax.xml.xpath.XPath 对克隆节点的行为不同？

> ID：13932130
> 
> 赞同：4
> 
> 时间：2012-12-18T11:38:32.160
> 
> 标签：java

给定以下 XML (basic.xml)：

```
<rdr>
  <details>
    <detail>
        <name>version</name>
        <value>15.0</value>
    </detail>
    <detail>
        <name>resolution</name>
        <value>1080X1920</value>
    </detail>
  </details>
</rdr> 
```

我想得到名称和版本，所以我有以下代码。这不是很整洁，但我出于说明目的创建了它，但代码确实可以正常运行：

```
import java.io.FileInputStream;
import java.io.IOException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class Example {

    private static XPath factoryXpath = null;

    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException, XPathExpressionException {
        FileInputStream fin = new FileInputStream("basic.xml");
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document document = builder.parse(fin);

        XPathFactory xPathFactory = XPathFactory.newInstance();
        factoryXpath = xPathFactory.newXPath();

        printDetails(document);
    }

    public static void printDetails(Node node) throws XPathExpressionException {
        NodeList nodes = (NodeList) factoryXpath.evaluate("//detail", node, XPathConstants.NODESET);

        printNameAndValue(nodes.item(0));
        printNameAndValue(nodes.item(1));

    }

    public static void printNameAndValue(Node node) throws XPathExpressionException {
        System.out.println("Name=" + (String) factoryXpath.evaluate("//name", node, XPathConstants.STRING));
        System.out.println("Value=" + (String) factoryXpath.evaluate("//value", node, XPathConstants.STRING));
    }

} 
```

这将输出以下内容：

```
Name=version
Value=15.0
Name=version
Value=15.0 
```

为什么它两次输出相同的名称和值？

如果我先克隆节点，那么 printNameAndValue 现在看起来像这样：

```
public static void printNameAndValue(Node node) throws XPathExpressionException {
    Node clonedNode = node.cloneNode(true);
    System.out.println("Name=" + (String) factoryXpath.evaluate("//name", clonedNode, XPathConstants.STRING));
    System.out.println("Value=" + (String) factoryXpath.evaluate("//value", clonedNode, XPathConstants.STRING));
} 
```

我得到以下输出：

```
Name=version
Value=15.0
Name=resolution
Value=1080X1920 
```

为什么克隆节点的行为不同？

我删除了克隆的节点并恢复到它不起作用的原始示例，并添加了此处描述的方法[https://stackoverflow.com/a/2325407/211560](https://stackoverflow.com/a/2325407/211560)但它在其属性中采用节点而不是文档。这将打印出以下结果：

```
<?xml version="1.0" encoding="UTF-8"?><detail>
        <name>version</name>
        <value>15.0</value>
    </detail>
Name=version
Value=15.0
<?xml version="1.0" encoding="UTF-8"?><detail>
        <name>resolution</name>
        <value>1080X1920</value>
    </detail>
Name=version
Value=15.0 
```

从中可以清楚地看出，该节点是我们所期望的；但它将 XPath 应用于第一个节点，或者可能应用于原始文档。我可以克隆一个节点并使用它，但我真的很想知道为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:51:15.933

XPath 表达式`//name`是*绝对*路径（以 a 开头`/`），因此选择包含`name`上下文节点所属文档中所有元素的节点集。因此，根据 XPath 1.0 数据模型将该表达式评估为字符串将为您提供按文档顺序排列的*第一个*此类节点的字符串值。

第一句话的关键部分是“上下文节点所属的文档”——克隆节点不附加到文档，因此 XPath 评估器将节点本身视为文档片段的根，并根据该节点评估表达式片段（仅包含一个`name`元素）而不是针对原始文档（包含两个）。

如果`printNameAndValue`你使用了相对 XPath 表达式

```
public static void printNameAndValue(Node node) throws XPathExpressionException {
    System.out.println("Name=" + (String) factoryXpath.evaluate("name", node, XPathConstants.STRING));
    System.out.println("Value=" + (String) factoryXpath.evaluate("value", node, XPathConstants.STRING));
} 
```

（或者`.//name`如果`name`元素可能是孙子或更深而不是直接子元素）那么您应该得到您期望的输出，即指定的第一个`name`（分别`value`）元素子元素的值`node`。

# xaml - XamChart 轴标签被切断

> ID：13932134
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:38:59.820
> 
> 标签：xaml, charts, infragistics, axis-labels

我正在使用 Blend 4，WPF 中的一些 XamCharts。图表数据通过 .xml 文件加载，但这不是问题。

我的问题是轴标签被切断了。因此，它决定切断标签，而不是为条形图使用更少的空间。有没有办法增加标签相对于图形视觉效果使用的空间量？

我已经尝试增加 XamChart 本身的大小，但这会不必要地拉伸图表，搞砸我的布局！

我想要的只是标签文本不会被截断，无论图表占用多少空间。任何想法将不胜感激，谢谢！

[切断标签](http://i.stack.imgur.com/PTTPu.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:14:24.417

XamChart 使用从 ContentControl 派生的场景，其中是从 ChartCanvas 派生和从 Canvas 派生的 ScenePane。场景窗格包含用于标签的 AxisLabelsPane。

调整标签大小的挑战在于 ScenePane、ChartCanvas 和 AxisLabelsPane 都是内部的，并且为标签保留的大小是硬编码的。

您拥有的两个选项是获取 XamChart 的源代码并在源代码中更改它，或者使用反射来更改值。由于 XamChart 已被 Infragistics 淘汰，并且不会再有任何错误修复，我建议您获取源代码并在那里进行所需的更改。

如果您确实希望使用反射，则添加到 ChartRendered 事件时的以下逻辑将使图表底部的 x 轴标签的大小加倍，但不会阻止图表在移动后呈现在标签顶部：

```
Scene scene = this.AssociatedObject.Scene;
Type sceneType = typeof (Scene);
PropertyInfo scenePaneProperty = sceneType.GetProperty("ScenePane",
                                                        BindingFlags.GetProperty | BindingFlags.Instance |
                                                        BindingFlags.NonPublic);
Canvas scenePane = scenePaneProperty.GetValue(scene, null) as Canvas;
Type scenePaneType = scenePane.GetType();
Type chartCanvasType = scenePaneType.BaseType;
FieldInfo horizontalAxisLabelsPanel1FieldInfo = scenePaneType.GetField("_labelsHorizontal1",
                                                                BindingFlags.Instance | BindingFlags.NonPublic |
                                                                BindingFlags.GetField);
Canvas horizontalAxisLabelsPanel1 = horizontalAxisLabelsPanel1FieldInfo.GetValue(scenePane) as Canvas;

PropertyInfo relativePositionProperty = chartCanvasType.GetProperty("RelativePosition",
                                                                    BindingFlags.NonPublic |
                                                                    BindingFlags.Instance |
                                                                    BindingFlags.GetProperty);
relativePositionProperty.SetValue(horizontalAxisLabelsPanel1, new Rect(0,70,100,30),null); 
```

# android - 保持旋转水平滚动视图

> ID：13932135
> 
> 赞同：1
> 
> 时间：2012-12-18T11:39:18.070
> 
> 标签：android, horizontalscrollview

我有一个水平滚动视图，附加了一些关于活动的图像视图，我希望当加载活动时水平滚动视图中的图像应该从左到右移动，即像横幅形式一样。

这在android中可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:49:01.067

我相信这是可能的。在 scrollView 类里面有一个设置位置的方法

[http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollBy(int](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollBy(int) , int)

这可能会帮助你。我知道您可能希望改变速度，我正在寻找解决方案。我自己没有尝试过，只是我顺便看到的一种方法

这也可能有帮助

滚动到（int x，int y）

您可以在不同的线程中计算 x 应该每 30 秒在哪里，然后调用 scrollTo(int x, int y) 并传入您想要的数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:54:11.573

将一些图像文件添加到 res/drawable 文件夹并使用以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"

>
<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
>

<ImageView
     android:src="@drawable/pic1"
     android:id="@+id/img1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     />

<ImageView
     android:src="@drawable/pic2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     />
<ImageView
     android:src="@drawable/pic3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     />
<ImageView
     android:src="@drawable/pic4"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     />
</LinearLayout>
</HorizontalScrollView> 
```

# django - 在 Django 中更新配置文件时允许用户模型上的空白密码字段

> ID：13932137
> 
> 赞同：10
> 
> 时间：2012-12-18T11:39:23.427
> 
> 标签：django, django-forms

## 编辑以包含代码

```
class UserForm(UserCreationForm):

    def __init__(self, *arg, **kw):
        super(UserForm, self).__init__(*arg, **kw)

        # re-order so email appears last on this form
        email_field = self.fields.pop('email')
        self.fields['email'] = email_field

    class Meta:
        model = User
        fields = ('first_name', 'last_name', 'username', 'email') 
```

* * *

我有一个表格，用户可以更新他们的个人资料详细信息。

用户可以选择更新他们的`passwords`，但更新其他配置文件字段不是必需的。

问题是当`password`and`password confirmation`字段为空白时，我的验证正在启动。

我认为`User`模型字段是一个和字段，因此我需要一种在验证此模型时简单地忽略表单中的空白输入的方法。`Password``required=True``blank=False`

该`User`模型是 Django 附带的模型：

`from django.contrib.auth.models import User`

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T15:11:44.600

`UserCreationForm`旨在用于**创作**。创建一个新的 ModelForm 比使用这个更好。

```
class UserUpdateForm(forms.ModelForm):
    # Feel free to add the password validation field as on UserCreationForm
    password = forms.CharField(required=False, widget=forms.PasswordInput)

    class Meta:
        model = User
        # Add all the fields you want a user to change
        fields = ('first_name', 'last_name', 'username', 'email', 'password') 

    def save(self, commit=True):
        user = super(UserUpdateForm, self).save(commit=False)
        password = self.cleaned_data["password"]
        if password:
            user.set_password(password)
        if commit:
            user.save()
        return user 
```

或者，如果您想继承`UserCreationForm`我不推荐的子类。你可以这样做 ：

```
class UserForm(UserCreationForm):
    password1 = forms.CharField(label=_("Password"), required=False
                            widget=forms.PasswordInput)
    password2 = forms.CharField(label=_("Password confirmation"),
                            widget=forms.PasswordInput, required=False)
    class Meta:
        model = User
        fields = ('first_name', 'last_name', 'username', 'email')

    def save(self, commit=True):
        user = super(UserUpdateForm, self).save(commit=False)
        password = self.cleaned_data["password"]
        if password:
            user.set_password(password)
        if commit:
            user.save()
        return user 
```

我建议你使用一个简单的

```
class UserUpdateForm(forms.ModelForm):       
    class Meta:
        model = User
        # Add all the fields you want a user to change
        fields = ('first_name', 'last_name', 'username', 'email') 
```

对于密码更改，您可以使用另一种专用表单，`django.contrib.auth.forms.SetPasswordForm`因为更改密码与更新用户信息的过程不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:05:11.617

您可以创建自己的密码表单字段并手动处理。或者您可以自己覆盖 clean 方法并删除与密码相关的错误。

# android - 显示 PopupWindow 时无法单击父 Activity 按钮

> ID：13932139
> 
> 赞同：1
> 
> 时间：2012-12-18T11:39:30.490
> 
> 标签：android, popup

在我的父活动中，我有一个按钮，当我单击它时，会显示带有 2 个 ImageButton 的 PopUpWindow。当此 PopUpWindow 存在时，我无法单击我的父活动按钮。这是我的代码，是否有任何问题。

```
public class PopUpExample extends Activity {

    Button but;
    LinearLayout mainLayout;
    PopupWindow popUp;
    boolean click = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);      

        mainLayout = (LinearLayout) findViewById(R.id.main_layout);     
        but = (Button) findViewById(R.id.main_btn);     

        but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                View popView;

                if(click){
                    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
                    popUp = new PopupWindow(inflater.inflate(R.layout.popup_example, null, false),100, 50, true);
                    popUp.showAtLocation(mainLayout, Gravity.CENTER, 0, 0);
                    popUp.update();
                    click = false;

                    popView = popUp.getContentView();

                    ImageButton call = (ImageButton) popView.findViewById(R.id.call_btn);   

                    call.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {                           
                            Toast.makeText(PopUpExample.this, "Calling...", Toast.LENGTH_SHORT).show();
                        }
                    });

                    ImageButton sms = (ImageButton) popView.findViewById(R.id.sms_btn); 

                    sms.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {                           
                            Toast.makeText(PopUpExample.this, "Sms...", Toast.LENGTH_SHORT).show();
                        }
                    });

                }else{
                    popUp.dismiss();
                    click = true;
                }                       

            }    
        });
    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:26:00.523

The popview when created takes away focus from the mainView so the user is not able to click the elements which are on the main view.
To click on the main view one need to dismiss popview first.
With respect to the above theory in your code You trying to dismiss popview by clicking on the button which is at main activity which is not possible.

Below code has the changes which you need to incorporate in your above code

```
public class PopUpExample extends Activity {    
    Button but;
    LinearLayout mainLayout;
    PopupWindow popUp;
    //boolean click = true;
    View popView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainLayout = (LinearLayout) findViewById(R.id.main_layout);     
        but = (Button) findViewById(R.id.main_btn);     

        but.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                // if(click){
                    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
                    popUp = new PopupWindow(inflater.inflate(R.layout.popup_example, null, false),100, 50, true);
                    popUp.showAtLocation(mainLayout, Gravity.CENTER, 0, 0);
                    popUp.update();
                    //click = false;

                    popView = popUp.getContentView();

                    ImageButton call = (ImageButton)popView.findViewById(R.id.call_btn);   

                    call.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {                           
                            Toast.makeText(MainActivity.this, "Calling...", Toast.LENGTH_SHORT).show();
                            popUp.dismiss();
                        }
                    });

                    ImageButton sms = (ImageButton)popView.findViewById(R.id.sms_btn); 

                    sms.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {                           
                            Toast.makeText(MainActivity.this, "Sms...", Toast.LENGTH_SHORT).show();
                            popUp.dismiss();
                        }
                    });

               //}else{
                   // popUp.dismiss();
                 // click = true;
               // }                       

            }    
        });
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:49:10.200

要启用活动按钮，您必须关闭弹出窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T13:16:16.203

感谢您的回答，很抱歉回答我的问题.. 在这一行

```
popUp = new PopupWindow(inflater.inflate(R.layout.popup_example, null, false),100, 50, true); 
```

它的意思是...

```
PopupWindow(View contentView, int width, int height, boolean focusable); 
```

我将focusable设置为true，因此它阻止父视图..所以当我将其设置为false时，我可以访问单击父视图按钮..:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T13:24:26.363

另一种最简单的方法是

```
 public class MainActivity extends Activity {

      Button but;
     LinearLayout mainLayout;
     PopupWindow popUp;

        @Override
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main2);      
        mainLayout = (LinearLayout) findViewById(R.id.lin);   
        final Button btnOpenPopup = (Button)findViewById(R.id.openpopup);
        btnOpenPopup.setOnClickListener(new Button.OnClickListener(){

   @Override
   public void onClick(View arg0) {
       LayoutInflater layoutInflater =       
       (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
       View popupView = layoutInflater.inflate(R.layout.activity_main, null);  
             final PopupWindow popupWindow = new PopupWindow (popupView,   
             LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
             popupWindow.showAtLocation(mainLayout, Gravity.CENTER, 0, 0);
       ImageButton call = (ImageButton)   
             popupView.findViewById(R.id.imageButton1);   

    call.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {                           
            Toast.makeText(MainActivity.this, "Calling...", Toast.LENGTH_SHORT).show();
            popupWindow.dismiss();
        }
    });

    ImageButton sms = (ImageButton) popupView.findViewById(R.id.imageButton2); 

    sms.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {                           
            Toast.makeText(MainActivity.this, "Sms...", Toast.LENGTH_SHORT).show();
            popupWindow.dismiss();
        }
    });

   }
   });
    }
} 
```

main2.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:id="@+id/lin" >

<Button
    android:id="@+id/openpopup"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Open Popup Window" /> 
```

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:orientation="vertical" 
  android:background="@android:color/background_light">

    <ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

   <ImageButton
         android:id="@+id/imageButton2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/ic_launcher" />

      </LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-20T07:18:05.913

这个对我有用 set popupWindow.setFocusable(false);，背景和弹出窗口关闭将同时工作

# arrays - 简单错误：点数组

> ID：13932140
> 
> 赞同：0
> 
> 时间：2012-12-18T11:39:34.723
> 
> 标签：arrays, visual-c++, point

我有以下内容：

```
array<Point>^ ADC1=gcnew array<Point>(2);
ADC1={Point(period,points[0][0]),Point(period,points[0][1])}; // error here! 
```

但是，当我尝试编译代码时出现以下错误：

错误 C2059：语法错误：'{'

错误在 ADC1={ ...

period 是一个 int，points 是一个具有 int 值的二维数组。

谁能帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:46:44.907

我认为您只能在构造函数级别显式初始值，请尝试：

```
array<Point>^ ADC1=gcnew array<Point>(2);
ADC1[0] = Point(period,points[0][0]);
ACD1[1] = Point(period,points[0][1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:50:04.647

与常规 C++ 一样，C++ COM 扩展仅允许您在构造时使用聚合进行初始化，您不能将聚合分配给现有数组。不过，这样的事情应该可以工作：

```
array<Point>^ ADC1 = gcnew array<Point>{Point(period,points[0][0]),Point(period,points[0][1])}; 
```

有关详细信息，请参阅此页面上的第二个示例：http: [//msdn.microsoft.com/en-us/library/vstudio/dtbydz1t.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dtbydz1t.aspx)

# iphone - Facebook 登录正在 Facebook Native 应用程序中打开，而不是在 ios 6.0 的 iPhone 设备上的 Safari 浏览器中打开

> ID：13932141
> 
> 赞同：0
> 
> 时间：2012-12-18T11:39:42.040
> 
> 标签：iphone, facebook

您好，我正在使用 FBSession 打开登录视图，它打开 Safari 以在 iOS5.0 和 ios 6.0 模拟器中登录，但在 ios 6.0 iPhone 中打开 Facebook APP 而不是 safari。请告诉我是什么原因，我该如何解决？这里是我的 Facebook 登录代码。

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }];
}

/*
 * Callback for session changes.
 */
- (void)sessionStateChanged:(FBSession *)session
                      state:(FBSessionState) state
                      error:(NSError *)error
{
    switch (state) {
        case FBSessionStateOpen:
            if (!error) {
                // We have a valid session
                NSLog(@"User session found");

                if ([[IntegrationManager sharedInstance] facebookDidLogin:nil]) {
                    [self.window.rootViewController dismissModalViewControllerAnimated:YES];
                };

            }
            break;
        case FBSessionStateClosed:NSLog(@"Fbsession close");
        case FBSessionStateClosedLoginFailed:
            [FBSession.activeSession closeAndClearTokenInformation];
            break;
        default:
            break;
    }

    [[NSNotificationCenter defaultCenter]
     postNotificationName:FBSessionStateChangedNotification
     object:session];

    if (error) {
        UIAlertView *alertView = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:error.localizedDescription
                                  delegate:nil
                                  cancelButtonTitle:@"OK"
                                  otherButtonTitles:nil];
        [alertView show];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:47:18.013

为方便用户，启动 facebook 应用程序而不是打开网站。这样做是为了让用户不必再次登录，也称为单点登录。

如果您使用的是 Facebook iOS SDK，则您无能为力，也不应该对此做任何事情。

# perl - 如何在 PDF::Extract 中使用`sprintf`

> ID：13932149
> 
> 赞同：2
> 
> 时间：2012-12-18T11:39:55.667
> 
> 标签：perl

我目前正在使用该[`PDF::Extract`](https://metacpan.org/module/PDF%3a%3aExtract)模块

我试过：

```
testing.pdf 
```

脚本：

```
use strict;

use PDF::Extract;

my $input = $ARGV[0];
my $newpdf = new PDF::Extract(PDFDoc => $input);
my $i = 1;
$i++ while ($newpdf->savePDFExtract(PDFPages => sprintf("%03d", $i))); 
```

此脚本成功运行，但在提取过程中缺少某些页面。2\. 要点：

```
use strict;

use PDF::Extract;

my $input = $ARGV[0];
my $newpdf = new PDF::Extract(PDFDoc => $input);
my $i = 1;
$i++ while ($newpdf->savePDFExtract(PDFPages => $i)); 
```

该脚本成功运行并且所有页面都成功提取，但我所有页面都提取并带有序列`001`，`002`等`003`。

例如：

```
testing001.pdf
testing002.pdf
testing003.pdf 
```

...ETC。

所有页面也在此表单中，没有丢失的页面。我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:10:06.833

的`PDFPages`参数`savePDFExtract`采用页码列表。它并非旨在让您指定自定义文件命名方案。您可以自己指定名称，如下所示：

```
$i++ while ($newpdf->savePDFExtract(
        PDFPages  => $i, 
        PDFSaveAs => $base_file_name . sprintf("%03d", $i)
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:26:59.613

你应该总是`use warnings`，这并不重要，`use strict`但会提供一些关于容易忽略的问题的有价值的调试信息。

我知道这不是文档所说的，但你也应该避免使用间接对象表示法，如`new PDF::Extract`. 类方法调用`PDF::Extract->new`更安全。

我不明白为什么您的程序会按原样跳过页面，因为字符串`001`与数值一样有效`1`。但是指定输出文件名的方法是将`PDFSaveAs`xcall 的选项设置为所需的文件名字符串。

此代码通过`sprintf`从原始文件名构建格式来工作。例如，它更改`testing.pdf`为`testing%03.pdf`. 然后可以在调用中使用这种格式`setVars`来命名文件，然后再生成它。

```
use strict;
use warnings;

use PDF::Extract;

my $input = $ARGV[0];
my $format = $input =~ s/\.([^.]*)\z/%03d.$1/r;

my $newpdf = new PDF::Extract(PDFDoc => $input);

my $i = 1;
while (1) {
    $newpdf->setVars(PDFSaveAs => sprintf($format, $i));
    my $success = $newpdf->savePDFExtract(PDFPages => $i));
    last unless $success;
    ++$i;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:31:59.680

这个脚本对于你想要做的事情来说太过分了。我只会使用 PDFTK： [http ://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)

它可以非常有效地完成您所需要的：

```
pdftk testing.pdf burst output testing%03d.pdf 
```

如果您需要它成为 Perl 脚本的一部分，您可以通过系统调用调用 PDFTK。

# python - Matplotlib - 在同一轴上绘制两个 3D 表面时重叠错误

> ID：13932150
> 
> 赞同：24
> 
> 时间：2012-12-18T11:40:03.503
> 
> 标签：python, matplotlib

我正在尝试使用 plot_surface 命令在 matplotlib 中的相同轴上绘制两个 3D 曲面。

```
fig = plt.figure()
fig.figsize = fig_size
ax = fig.gca(projection='3d')

surf = ax.plot_surface(X, Y, Exp_Fric_map, alpha = 1, rstride=1, cstride=1, cmap=cm.winter, linewidth=0.5, antialiased=True)
surf = ax.plot_surface(X, Y, Fric_map, alpha = 1, rstride=1, cstride=1, cmap=cm.autumn,linewidth=0.5, antialiased=True) 
```

我遇到的问题是，在查看绘图时，并不总是正确的表面在“顶部”，例如在绘图中：

![示例图](../Images/c8df180e03e9b41fb14c3ea344d2b282.png)

在后角（轴上为 200N，2.5Hz），蓝绿色表面“在顶部”，而实际上黄红色更靠近观察者。如果我旋转情节：

![第二个示例图](../Images/36067eb079dc392b0eb8bd3dee34fafe.png)

现在看起来一切正常，蓝绿色表面在 200N 和 2.5Hz 的黄红色表面下方（现在在左侧）。我曾尝试搜索 stackoverflow 和 Google，但找不到任何类似的解决方案问题。

我在 Linux 上使用 Python 2.7.3、Numpy 1.6.1 和 Matplotlib 1.1.1rc。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-03-24T16:07:07.270

此行为记录在 matplotlib FAQ [here](http://matplotlib.org/mpl_toolkits/mplot3d/faq.html)中。同一页面建议安装适用于 3D 绘图的[Mayavi 。](http://docs.enthought.com/mayavi/mayavi/auto/examples.html)

*   它的界面与 matplotlib 非常相似。
*   ~~它的主要问题是在 python 3 上安装它仍然很棘手。~~（现在变得容易多了）

* * *

这是一个演示“matplotlib vs mayavi”比较：

```
# generate data
import numpy as np

x = np.arange(-2, 2, 0.1)
y = np.arange(-2, 2, 0.1)
mx, my = np.meshgrid(x, y, indexing='ij')
mz1 = np.abs(mx) + np.abs(my)
mz2 = mx ** 2 + my ** 2

# A fix for "API 'QString' has already been set to version 1"
# see https://github.com/enthought/pyface/issues/286#issuecomment-335436808
from sys import version_info
if version_info[0] < 3:
    import pyface.qt

def v1_matplotlib():
    from matplotlib import pyplot as plt
    from mpl_toolkits.mplot3d import Axes3D

    fig = plt.figure()
    ax = fig.gca(projection='3d')
    surf1 = ax.plot_surface(mx, my, mz1, cmap='winter')
    surf2 = ax.plot_surface(mx, my, mz2, cmap='autumn')
    ax.view_init(azim=60, elev=16)
    fig.show()

def v2_mayavi(transparency):
    from mayavi import mlab
    fig = mlab.figure()

    ax_ranges = [-2, 2, -2, 2, 0, 8]
    ax_scale = [1.0, 1.0, 0.4]
    ax_extent = ax_ranges * np.repeat(ax_scale, 2)

    surf3 = mlab.surf(mx, my, mz1, colormap='Blues')
    surf4 = mlab.surf(mx, my, mz2, colormap='Oranges')

    surf3.actor.actor.scale = ax_scale
    surf4.actor.actor.scale = ax_scale
    mlab.view(60, 74, 17, [-2.5, -4.6, -0.3])
    mlab.outline(surf3, color=(.7, .7, .7), extent=ax_extent)
    mlab.axes(surf3, color=(.7, .7, .7), extent=ax_extent,
              ranges=ax_ranges,
              xlabel='x', ylabel='y', zlabel='z')

    if transparency:
        surf3.actor.property.opacity = 0.5
        surf4.actor.property.opacity = 0.5
        fig.scene.renderer.use_depth_peeling = 1

v1_matplotlib()
v2_mayavi(False)
v2_mayavi(True)

# To install mayavi, the following currently works for me (Windows 10):
#
#   conda create --name mayavi_test_py2 python=2.7 matplotlib mayavi=4.4.0
#    (installs pyqt=4.10.4 mayavi=4.4.0 vtk=5.10.1)
#    * the `use_depth_peeling=1` got no effect. Transparency is not correct.
#    * requires `import pyface.qt` or similar workaround
#
# or
#
#   conda create --name mayavi_test_py3 python=3.6 matplotlib
#   conda activate mayavi_test_py3
#   pip install mayavi 
```

[![matplotlib vs mayavi_no_transparency vs mayavi_with_transparency](../Images/41c979d07dda8c0f001af193f283e36f.png)](https://i.stack.imgur.com/mwugN.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T12:23:03.780

这就像绘画一样。哪个“在上面”取决于您最后绘制的哪个。

您可能想使用**`zorder`**属性来告诉 matplotlib 应该以什么顺序绘制表面。

例如：

```
ax.plot_surface(X, Y, Exp_Fric_map, alpha = 1, rstride=1, cstride=1, cmap=cm.winter, linewidth=0.5, antialiased=True, zorder = 0.5)
ax.plot_surface(X, Y, Fric_map, alpha = 1, rstride=1, cstride=1, cmap=cm.autumn,linewidth=0.5, antialiased=True, zorder = 0.3) 
```

* * *

**更新**：

我已经进行了几次测试，我相信这是matplotlib 在一个图形中绘制多个表面时的**错误。**例如，它制作了一些在我们的 3D 世界中不应该存在的表面，例如：

![在此处输入图像描述](../Images/c35a84db288d1b195d873be40308386d.png)

, 尝试后看不出有效的解决方案。因果关系是绘画的顺序，正如我所说：**matplotlib 总是一件一件地绘画**。如果表面的一部分应该在顶部，而另一部分应该在底部，matplotlib 就会出错。

因此我的建议是停止解决这个问题，除非你想为 matplotlib 做出贡献，否则这是浪费时间。如果这是你必须解决的问题，我建议你去寻找另一个绘图工具来完成你的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-01T16:23:20.087

可以为此进行手动修复。这显然不是最干净的解决方案，但它给了你你想要的。假设您想为公共 X 和 Y 绘制 Z1 和 Z2。

1.  创建一个数组 Z1_gte，作为 Z1 的副本，其中 Z1>=Z2，否则为 np.nan。
2.  创建一个数组 Z1_lte，作为 Z1 的副本，其中 Z1<=Z2，否则为 np.nan。
3.  按以下顺序绘制三个曲面：Z1_lte、Z2、Z1_gte。沿 z 轴从高到低查看时，您的表面看起来是正确的。如果您希望在沿 z 轴从低到高查看时表面看起来正确，请反转 te 顺序。

或直接：

```
ax.plot_surface(X,Y,np.where(Z1<Z2,Z1,np.nan))
ax.plot_surface(X,Y,Z2)
ax.plot_surface(X,Y,np.where(Z1>=Z2,Z1,np.nan)) 
```

这种方法的明显缺点是它仅适用于沿 z 轴的一个特定观察方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T16:56:32.400

另一个对某些应用程序可能有用的技巧是将您的表面更改为一种颜色，并将两个表面的 alpha 值更改为 0.5，然后您至少可以通过旋转表面来了解正在发生的事情. 如果您正在调试交叉表面，或者在我的情况下，如果您想检查尖峰平滑的外观，这会很快。蓝色是下面的平滑表面，红色是原始表面。

[![两个表面的轮廓](../Images/dec2b811a060477a28e89bde16c10cbc.png)](https://i.stack.imgur.com/C6EVM.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-08T15:43:25.537

您可以通过同时绘制两者来规避该问题。只需附加两个矩阵并为它们指定单独的颜色。

```
def plotTwo(ax, X, Y, Z1, Z2):
    col1 = np.full(Z1.shape, 'b', dtype='U50')
    col2 = np.full(Z2.shape, 'r', dtype='U50')
    ax[2].plot_surface(np.append(X, X, axis=0),
                      np.append(Y, Y, axis=0),
                      np.append(Z1, Z2, axis=0),
                      facecolors= np.append(col1, col2, axis=0),
                      edgecolor='none', alpha=1) 
```

# sql - 如果值在非唯一行上是唯一的，则仅插入到表中

> ID：13932153
> 
> 赞同：1
> 
> 时间：2012-12-18T11:40:11.960
> 
> 标签：sql, sqlite

我在现有的数据库和表上尝试这个 sqlite 查询：

```
INSERT INTO Actions (guide_id, user_id, action_type, action_date, article_id,  guide_name) VALUES (33, 1199180, 2, 1355829894, 2457, 'Amsterdam'); 
```

这可行，但如果我再次运行相同的东西，它将插入不需要的重复值。

这是表格的样子：

![表的描述](../Images/5d0a6ec81cb3a03cf92af61be39ddb06.png)

这里的问题是 article_id 不是唯一的。我希望仅当列中不存在 article_id 时才运行插入。

理论上我想要类似的东西：

```
IF x DOES NOT EXISTS IN article_id DO (INSERT INTO Actions (guide_id, user_id, action_type, action_date, article_id,  guide_name) VALUES (33, 1199180, 2, 1355829894, 2457, 'Amsterdam')); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:45:32.167

尝试：

```
INSERT INTO Actions (guide_id, user_id, action_type, action_date, article_id,  guide_name)
VALUES (33, 1199180, 2, 1355829894, 2457, 'Amsterdam') WHERE NOT article_id = x; 
```

另一种方法是将 定义`article_id`为`UNIQUE`键：

```
create unique index unique_name on Actions (article_id ); 
```

[您可以在sqlite 手册](http://www.sqlite.org/lang_createtable.html#constraints)中找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:22:25.777

也许是这样的？

```
CREATE TRIGGER delete_duplicates_articles
AFTER INSERT ON Article
BEGIN
   DELETE FROM Article 
   WHERE action_date NOT IN (SELECT MIN(action_date) 
                             FROM Article 
                             WHERE article_id = new.article_id)
   AND article_id = new.article_id;
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:46:49.277

当您希望 article_id 唯一时，article_id 应该是主键，而不是 action_id。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-18T12:24:27.133

为什么不能添加`UNIQUE`约束？

```
ALTER TABLE Actions
ADD UNIQUE (article_id); 
```

# appharbor - 在 appharbor 上构建 web 服务时无法找到 nuget.exe

> ID：13932154
> 
> 赞同：88
> 
> 时间：2012-12-18T11:40:20.037
> 
> 标签：appharbor

我正在尝试使用 codeplex 在 appharbor 部署我的 web 服务。在第一次尝试并进行了一些研究后，我发现我必须使用 NuGet，以便找到参考。

现在我只剩下 1 个错误，我不知道如何解决

```
 "D:\temp\g3wyilvx.uln\input\WebService\Webservice.sln" (default target) (1) ->
   "D:\temp\g3wyilvx.uln\input\WebService\Webservice\Webservice.csproj" (default target) (2) ->
   (CheckPrerequisites target) -> 
     D:\temp\g3wyilvx.uln\input\WebService\.nuget\nuget.targets(72,9): error : Unable to locate 'D:\temp\g3wyilvx.uln\input\WebService\.nuget\nuget.exe' [D:\temp\g3wyilvx.uln\input\WebService\Webservice\Webservice.csproj]
0 Warning(s)
1 Error(s)
Time Elapsed 00:00:00.17 
```

我想如何解决这个错误？任何可能在未来帮助我的有用链接也受到赞赏。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2013-12-10T18:07:45.823

我通过更改 NuGet.targets 文件中的这一行并将其设置为 true 来解决此问题：

```
<DownloadNuGetExe Condition=" '$(DownloadNuGetExe)' == '' ">true</DownloadNuGetExe> 
```

但是**您必须重新启动 Visual Studio 或重新加载解决方案**（[请参阅此](https://stackoverflow.com/a/12025734/381082)内容）才能使其生效。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-08-29T17:11:03.130

我通过右键单击解决方案解决了问题，然后单击

```
Enable NuGet Package Restore 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-25T21:59:05.817

.gitignore 中的可执行文件可能会被忽略

```
*.exe 
```

将此行添加到 .gitignore：

```
!.nuget/NuGet.exe 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T23:10:46.980

这是一篇关于[通过 AppHarbor 使用 NuGet 包还原的博文](http://blog.appharbor.com/2012/02/06/use-nuget-package-restore-to-avoid-pushing-packages-to-appharbor)。在您的情况下，问题可能是您没有`.nuget`在存储库中包含该文件夹。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-13T13:23:07.147

*   启用 NuGet 包还原 ![在此处输入图像描述](../Images/c402851ea166d70120c07977a95075de.png)
*   然后右键单击解决方案
*   选择启用 NuGet 包还原

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-12T17:04:20.197

当我的一位同事在解决方案中添加了一个新项目时，我遇到了这个问题。他从 nuget 添加了新包。上面评价最高的答案对我来说是不可接受的，因为一旦我更新了 nuget 包，它就会更新项目中所有引用的库。

`import`我如何通过从 .csproj 文件中删除 nuget 包的语句来删除此错误。

为此，请右键单击 .csproj 文件，然后在记事本中打开它并删除该语句。

# c# - 服务器控制 - 嵌入图像 - 在 css 中引用

> ID：13932156
> 
> 赞同：0
> 
> 时间：2012-12-18T11:40:27.857
> 
> 标签：c#, asp.net, custom-controls

我已经成功创建了一个带有嵌入式 css 和嵌入式 js 文件的服务器控件。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Security.Permissions;
using System.Text;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using FCC.Web.UI.CustomControl;
using System.Web.UI.HtmlControls;

[assembly: TagPrefix("CustomControls", "asp")]
namespace FCC.Web.UI.CustomControl
{
    [AspNetHostingPermission(SecurityAction.Demand, Level = AspNetHostingPermissionLevel.Minimal)]
    [AspNetHostingPermission(SecurityAction.InheritanceDemand, Level = AspNetHostingPermissionLevel.Minimal)]
    [DefaultProperty("Value")]
    [ValidationProperty("Value")]
    [ToolboxData("<{0}:DatePicker runat=server></{0}:DatePicker>")]
    public class DatePicker : CompositeControl, iDynamicControl
    {
    #region-- privates --
    private TextBox textbox1;
    private RequiredFieldValidator requiredFieldValidator1;
    private RegularExpressionValidator regularExpressionValidator1;
    private HtmlInputHidden hiddenField1;
    #endregion

    #region -- properties--

    [Bindable(true)]
    [Category("Styles")]
    [Themeable(true)]
    [DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Content)]
    [PersistenceMode(PersistenceMode.InnerProperty)]
    [Localizable(true)]
    public Style TextBoxStyle
    {
        get
        {
            EnsureChildControls();
            return textbox1.ControlStyle;
        }
        set
        {
            EnsureChildControls();
            textbox1.ControlStyle.MergeWith(value);
        }
    }

    [Bindable(true)]
    [Category("Styles")]
    [Localizable(true)]
    public string TextBoxCssStyle
    {
        get
        {
            EnsureChildControls();
            return textbox1.CssClass;
        }
        set
        {
            EnsureChildControls();
            textbox1.CssClass = value + " calender";
        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    [Description("Text displayed on the textbox")]
    public String Value
    {
        get
        {
            EnsureChildControls();
            if (textbox1.Text.IsNullOrEmpty()) { return string.Empty; }
            else
            {
                DateTime date1 = DateTime.Parse(textbox1.Text);
                string datestring = string.Format("<day>{0}</day><month>{1}</month><year>{2}</year>", date1.Day.ToString(), date1.Month.ToString(), date1.Year.ToString());
                return datestring;
            }
        }
        set
        {

        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    public string InvalidDateErrorMessage
    {
        get
        {
            EnsureChildControls();
            return regularExpressionValidator1.ErrorMessage.IsNullOrEmpty() ? "Invalid date" : regularExpressionValidator1.ErrorMessage;
        }
        set
        {
            EnsureChildControls();
            regularExpressionValidator1.ErrorMessage = value;
        }
    }

    [Bindable(true)]
    [Category("Default")]
    [Localizable(true)]
    public bool IsRequired
    {
        get
        {
            EnsureChildControls();
            return requiredFieldValidator1.Enabled;
        }
        set
        {
            EnsureChildControls();
            requiredFieldValidator1.Enabled = value;
        }
    }

    [Bindable(true)]
    [Category("Default")]
    [DefaultValue("")]
    [Localizable(true)]
    [Description("Validation group for the textbox and inbuilt validations")]
    public string ValidationGroup
    {
        get
        {
            EnsureChildControls();
            return textbox1.ValidationGroup;
        }
        set
        {
            EnsureChildControls();
            regularExpressionValidator1.ValidationGroup = value;
            requiredFieldValidator1.ValidationGroup = value;
            textbox1.ValidationGroup = value;
        }
    }

    [Bindable(true)]
    [Category("Default")]
    [DefaultValue("")]
    [Localizable(true)]
    [Description("cssClasses that apply to all validators")]
    public string ValidationErrorCssClass
    {
        get
        {
            EnsureChildControls();
            return requiredFieldValidator1.CssClass;
        }
        set
        {
            EnsureChildControls();
            requiredFieldValidator1.CssClass = regularExpressionValidator1.CssClass = value;
        }
    }

    [Bindable(true)]
    [Category("Default")]
    [DefaultValue("")]
    public DateTime? Date
    {
        get
        {
            EnsureChildControls();
            if (textbox1.Text.IsNullOrEmpty()) { return null; }
            else
            {
                return DateTime.Parse(textbox1.Text);
            }
        }
        set
        {
            EnsureChildControls();
            textbox1.Text = !value.HasValue ? string.Empty : value.Value.ToString("dd-MMM-yyyy");
        }
    }

    [Bindable(true)]
    [Category("Appearance")]
    [DefaultValue("")]
    [Localizable(true)]
    [Description("Error message that appears when text box is empty")]
    public string RequiredErrorMessage
    {
        get
        {
            EnsureChildControls();
            return requiredFieldValidator1.ErrorMessage.IsNullOrEmpty() ? "Required Field" : requiredFieldValidator1.ErrorMessage;
        }
        set
        {
            EnsureChildControls();
            requiredFieldValidator1.ErrorMessage = value;
        }
    }

    #endregion

    protected override void OnLoad(EventArgs e)
    {
        EnsureChildControls();
        base.OnLoad(e);
    }

    protected override void CreateChildControls()
    {
        Controls.Clear();
        #region--hiddenField--
        hiddenField1 = new HtmlInputHidden();
        hiddenField1.ID = "hiddenVal1";
        hiddenField1.Attributes["class"]="hiddenVal";
        #endregion

        #region-- textbox--
        textbox1 = new TextBox();
        textbox1.ID = "textbox1";
        textbox1.Style[HtmlTextWriterStyle.VerticalAlign] = "middle";
        #endregion
        #region--required validation--
        requiredFieldValidator1 = new RequiredFieldValidator();
        requiredFieldValidator1.ID = "validator1";
        requiredFieldValidator1.ErrorMessage = RequiredErrorMessage;
        requiredFieldValidator1.Display = ValidatorDisplay.Dynamic;
        requiredFieldValidator1.ControlToValidate = textbox1.ID;
        requiredFieldValidator1.Enabled = false;
        requiredFieldValidator1.SetFocusOnError = true;

        #endregion
        #region--regular expression validator--
        regularExpressionValidator1 = new RegularExpressionValidator();
        regularExpressionValidator1.ID = "validator2";
        regularExpressionValidator1.Enabled = true;
        regularExpressionValidator1.ErrorMessage = InvalidDateErrorMessage;
        regularExpressionValidator1.Display = ValidatorDisplay.Dynamic;
        regularExpressionValidator1.ControlToValidate = textbox1.ID;
        regularExpressionValidator1.SetFocusOnError = true;
        regularExpressionValidator1.ValidationExpression = "^((((((0?[1-9])|([1-2][0-9])|(3[0-1]))-(([jJ][aA][nN])|([mM][aA][rR])|([mM][aA][yY])|([jJ][uU][lL])|([aA][uU][gG])|([oO][cC][tT])|([dD][eE][cC])))|(((0?[1-9])|([1-2][0-9])|(30))-(([aA][pP][rR])|([jJ][uU][nN])|([sS][eE][pP])|([nN][oO][vV])))|(((0?[1-9])|(1[0-9])|(2[0-8]))-([fF][eE][bB])))-(20(([13579][01345789])|([2468][1235679]))))|(((((0?[1-9])|([1-2][0-9])|(3[0-1]))-(([jJ][aA][nN])|([mM][aA][rR])|([mM][aA][yY])|([jJ][uU][lL])|([aA][uU][gG])|([oO][cC][tT])|([dD][eE][cC])))|(((0?[1-9])|([1-2][0-9])|(30))-(([aA][pP][rR])|([jJ][uU][nN])|([sS][eE][pP])|([nN][oO][vV])))|(((0?[1-9])|(1[0-9])|(2[0-9]))-([fF][eE][bB])))-(20(([13579][26])|([2468][048])))))$";

        #endregion

        Controls.Add(textbox1);
        Controls.Add(hiddenField1);
        Controls.Add(requiredFieldValidator1);
        Controls.Add(regularExpressionValidator1);
    }

    protected override void RecreateChildControls()
    {
        EnsureChildControls();
    }

    protected override void OnPreRender(EventArgs e)
    {
        base.OnPreRender(e);

        ClientScriptManager cs = this.Page.ClientScript;

        string jqueryResource = "FCC.Web.UI.CustomControl.jQuery1_8_3.js";
        cs.RegisterClientScriptResource(typeof(DatePicker), jqueryResource);

        string jqueryUIresource = "FCC.Web.UI.CustomControl.jquery-ui-1.9.2.smoothness_all.min.js";
        cs.RegisterClientScriptResource(typeof(DatePicker), jqueryUIresource);

        string calenderScriptResource = "FCC.Web.UI.CustomControl.calender.js";
        cs.RegisterClientScriptResource(typeof(DatePicker), calenderScriptResource);

        string templink = "<link rel='stylesheet' text='text/css' href='{0}' />";
        string csslocation = Page.ClientScript.GetWebResourceUrl(this.GetType(), "FCC.Web.UI.CustomControl.jquery-ui-1.9.2.smoothness_all.min.css");
        LiteralControl lc = new LiteralControl(string.Format(templink, csslocation));
        Page.Header.Controls.Add(lc);

    }

    protected override void Render(HtmlTextWriter writer)
    {
        AddAttributesToRender(writer);

        textbox1.RenderControl(writer);

        hiddenField1.RenderControl(writer);
        requiredFieldValidator1.RenderControl(writer);
        regularExpressionValidator1.RenderControl(writer);
        //writer.Write("DateControl");
    }
}
} 
```

我的 CSS 具有指向服务器上存在的图像（背景图像）的链接。我想通过将这些图像嵌入到控件中来使其成为一个完整的控件。问题是我将如何引用 css 文件中嵌入的图像资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T08:46:52.083

这是在这里回答：[https ://stackoverflow.com/a/1196850/1402923](https://stackoverflow.com/a/1196850/1402923)

在此引用：

> ```
> <% = WebResource("image1.jpg") %> 
> ```
> 
> 您可以在 CSS 文件中使用上述语句，并且在使用 WebResourceAttribute 注册 CSS 时，可以将“PerformSubstitution”设置为 true
> 
> ```
> Default.css
> body{
>     background: <%=WebResource("xyz.jpg")%>
> }
> 
> [assembly, WebResource("Default.css","text/css", PerformSubstitution=true)]
> [assembly, WebResource("xyz.jpg","image/jpg")] 
> ```

# jquery - 如何在 Jquery 菜单中将 onclick 事件添加到锚标记

> ID：13932157
> 
> 赞同：0
> 
> 时间：2012-12-18T11:40:27.680
> 
> 标签：jquery

在下面的代码中，如何添加 onclick 事件`aaa`？

```
var aaa = $('<a/>')
    .html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
    .attr('data-transition', 'slide').click(onclick,'javascript:navigation_message_details()')
    .appendTo(li); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:41:53.403

您可以添加使用来自 jQuery[**的方法**](http://api.jquery.com/on/)

```
$('<a/>').on('click', function(){}); 
```

**编辑：**

***从 jQuery 1.7 开始，.on() 方法是将事件处理程序附加到文档的首选方法。对于早期版本，.bind() 方法用于将事件处理程序直接附加到元素。处理程序附加到 jQuery 对象中当前选定的元素，因此这些元素必须存在于调用 .bind() 的位置。有关更灵活的事件绑定，请参阅 .on() 或 .delegate() 中有关事件委托的讨论。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:44:50.693

```
var aaa = $('<a/>',{
    click: function(){
      navigation_message_details();
    }
}).html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
.attr('data-transition', 'slide')
.appendTo(li); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:45:45.997

使用您发布的代码：

```
var aaa = $('<a/>')
            .html(yourJson.data[i].name + " <span class='patient-list_txt2-blue'>" + yourJson.data[i].dateTime + "</span>")
            .attr('data-transition', 'slide')
            .on('click', function(){navigation_message_details();})
            .appendTo('li');
        //------------^^^^------------you were missing the quotes here.    
         }); 
```

# android - ListActivity 工作正常..但没有出现

> ID：13932158
> 
> 赞同：0
> 
> 时间：2012-12-18T11:40:32.890
> 
> 标签：android, android-listview, listactivity, simpleadapter

我创建了一个 ListActivity，将数据库中的数据放入游标，然后将它们添加到 ArrayLisy>，然后将其发布到 Simple adatper。

一切正常，但它显示一个空白屏幕。

**这是代码：**

```
public class Cities extends ListActivity {

    ListView listV ;
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.only_text_listview);

        //getting the database opened from the adapter 
        CitiesAdapter mDbHelper = new CitiesAdapter(this);
        mDbHelper.createDatabase();
        mDbHelper.open();
        // getting cursor from data base 
        Cursor testdata = mDbHelper.getTestData(); 

        ArrayList<HashMap<String, String>> data = new ArrayList<HashMap<String,String>>();
        if(testdata.moveToFirst()){
            HashMap<String, String> map = new HashMap<String, String>();
            do{
                Log.d("Cursor", testdata.getString(2));
                map.put("name_en", testdata.getString(2));
            }while(testdata.moveToNext());
            data.add(map);
        }

        String[] from = {"name_en"};
        int[] to = {R.id.only_text_lv};

         SimpleAdapter SA = new SimpleAdapter(this, data,    R.layout.only_text_listview , from, to);
        this.setListAdapter(SA);

        mDbHelper.close();

    } 
```

xml 文件：

only_text_list.xml

```
<ListView 
    android:id ="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    /> 
```

only_text_lv.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView 
    android:id ="@+id/only_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:45:40.870

像这样更改您的代码

```
if(testdata.moveToFirst()){
    HashMap<String, String> map;
    do{
        map = new HashMap<String, String>();
        Log.d("Cursor", testdata.getString(2));
        map.put("name_en", testdata.getString(2));
        data.add(map);
    }while(testdata.moveToNext());

} 
```

# sql - 如何使用子查询优化复杂的 SQL 查询/视图

> ID：13932161
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:40:40.260
> 
> 标签：sql, sql-server

我有一个非常复杂的 SQL 视图。我的问题是，当我想报告时，它非常慢并且需要大量内存。视图的作用：它查询一个总值并将其乘以一个因子显然这是因为它包含很多子查询......（如果你算上它，则为 9）

该查询在具有数百万个数据集的系统上运行。

我的问题。优化点在哪里？如果我制作准备好的程序或为子查询创建 sql 视图，它会更快吗？

```
SELECT 
    CASE BID WHEN 1 THEN 
        b.TOTAL 
    ELSE 
        (b.TOTAL * - 1) 
    END 
    * 
    CASE WHEN
        (SELECT 
            (CAST(DATEDIFF(day, 
                ISNULL
                ((SELECT dbo.TableA.TimestampFrom + 1 AS start FROM dbo.TableB INNER JOIN
                    dbo.TableA ON dbo.TableB.SID = dbo.TableA.SID
                    WHERE   (dbo.TableB.PID = dbo.TableC.PID) AND
                        (dbo.TableB.MString = 'S' OR dbo.TableB.MString = 'ST') AND
                        (dbo.TableB.TimestampCreated <
                            (SELECT TimestampCreated
                                FROM dbo.TableB AS TableB_2
                            WHERE (RID = dbo.TableC.RID)))
                        AND
                            (dbo.TableB.VPFrom =
                                    (SELECT VPFrom FROM dbo.TableB AS TableB_1
                                            WHERE (RID = dbo.TableC.RID))
                            )), VPFrom), VPTo)
                            AS Float) + 1)
            / 
            (CAST(DATEDIFF(day, start, Vertragsende) AS Float) + 1) AS Faktor

            FROM dbo.TableC
                WHERE (LaufNr = b.LaufNr))
                    > 1 
        THEN 
            1 
        ELSE
            (SELECT (CAST(DATEDIFF(day, 
                ISNULL
                    ((SELECT dbo.TableA.TimestampFrom + 1 AS start FROM dbo.TableB INNER JOIN
                            dbo.TableA ON dbo.TableB.SID =  dbo.TableA.SID
                            WHERE (dbo.TableB.PID = dbo.TableC.PID) AND
                                (dbo.TableB.MString = 'S' OR dbo.TableB.MString = 'ST') AND
                                (dbo.TableB.TimestampCreated <
                                    (SELECT TimestampCreated FROM dbo.TableB AS TableB_2
                                     WHERE (RID = dbo.TableC.RID)))
                                AND (dbo.TableB.VPFrom =
                                    (SELECT VPFrom FROM dbo.TableB AS TableB_1
                                    WHERE (RID = dbo.TableC.RID)))
                        ), VPFrom),VPTo) AS Float) + 1)
                / (CAST(DATEDIFF(day, start, Vertragsende) AS Float) + 1) AS Faktor 
                FROM dbo.TableC
                WHERE (LaufNr = b.LaufNr)) 
        END AS GrossPremium
    ,RID, PID, ONR, OPosLaufNr, LaufNr, bdate
FROM dbo.TableC AS b 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:01:45.557

索引的经验法则是

*   首先，阅读执行计划，

然后考虑添加一个索引

*   WHERE 子句中使用的每一列，
*   JOIN 条件中使用的每一列，
*   ORDER BY 中使用的每一列。

在某些情况下，一个多列索引在 SELECT 语句中会比几个单列索引更快。

然后，确保您的 WHERE 子句是[sargable](http://en.wikipedia.org/wiki/Sargable)。

最后，尝试将一些子查询转换为视图进行测试确实有意义。我的猜测是问题的根本原因是您正在执行不同的子查询，具体取决于几个 CASE 语句的返回值。

# c# - Visual C# Express 2010 ToolStrip 按钮在重新启动后丢失图标

> ID：13932166
> 
> 赞同：0
> 
> 时间：2012-12-18T11:40:54.887
> 
> 标签：c#, winforms, visual-studio-2010, icons, toolstrip

我有一个非常奇怪的问题。在我使用 c#/winforms 的简单项目中，我有 ToolStrip 和插入的标准按钮。一切正常，但突然重启后图标消失了。按钮仍然存在，但没有图像。

我对此感到非常震惊，找不到任何错误。好吧，我添加了另一个带有标准按钮的 ToolStrip。图标在那里。我注意到，在 Designer.cs 文件中，新按钮定义有一行：

```
this.newToolStripButton1.Image = 
      ((System.Drawing.Image)(resources.GetObject("newToolStripButton1.Image"))); 
```

不幸的是，重新启动后，这些行和图标都消失了。

可能是什么问题呢？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-12T03:30:24.867

刚刚有一个类似的问题，我的 ToolStripButtons 从 ToolStrip 中脱离出来。我进行得很好，编译并运行了我的程序，ToolStripButtons 简单地离开了。

进行网络搜索，这似乎偶尔会发生，而没有任何真正的答案。

查看设计器文件，“this.myToolStrip.Items.AddRange”命令已从表单的 myToolStrip 部分消失，但按钮仍然存在。

要修复，我只是将其添加回来（在设计器文件中）...

```
this.myToolStrip.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
this.myToolStripButton1,
this.myToolStripButton2,
this.myToolStripButton3,
this.myToolStripButton4}); 
```

要获取格式，只需向现有 ToolStrip 添加一个新按钮，然后在设计器中搜索“AddRange”。

# gridview - CGridView 改变分页位置

> ID：13932167
> 
> 赞同：1
> 
> 时间：2012-12-18T11:41:00.840
> 
> 标签：gridview, yii

我只是想将分页位置复制到列表顶部，有没有 Yii 方法可以做到这一点，或者我只需要使用 javascript 来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:46:55.793

很简单：只需在 CGridView 中查看代码，或在 yii 网站上查看文档：

```
$this->widget('zii.widgets.grid.CGridView', array(
  'template' => "{pager}\n{summary}\n{items}\n{pager}",
//
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T17:49:43.777

还有另一种根据要求呈现 gridview 组件的方法：

```
$myGrid = $this->widget(); 
```

$this->widget(); 返回一个对象，然后我们可以使用这个对象在页面上任何需要的地方渲染不同的组件。

```
$myGrid->renderPager();
echo '<div>My other content</div>'; 
$myGrid->renderItems(); 
```

其他渲染方法可以在[文档中找到](http://www.yiiframework.com/doc/api/1.1/CBaseListView)

# c# - c# 可以在覆盖对象中为 null 吗？

> ID：13932176
> 
> 赞同：3
> 
> 时间：2012-12-18T11:41:30.270
> 
> 标签：c#, logging, null

希望有人可以帮助解决这个问题，这让我发疯。

我有一个继承自父对象并覆盖该对象的某些方法的类。其中一个覆盖中的相关代码如下所示（我已经删除了正常运行的代码）：

```
 public override void Initialise()
    {
        if (Url != null)
        {
            _logger.LogInfo("Initialising for file " + Url);

            // call the base Initialise method
            try
            {
                base.Initialise();
            }
            catch (Exception ex)
            {
                _logger.LogError("Error on initialise : ", ex);
            }
      }
 } 
```

logger 对象写入我们的应用程序日志数据库。

当它第一次到达代码中的这一点时，它会在初始化时记录错误，并给我一个未设置为对象错误实例的对象引用。但是没有更多信息，没有内部异常，也没有行号。

我想知道是否有任何方式 base 可能为空？这似乎很奇怪而且不太可能，但我无法解释为什么没有更多信息以及为什么代码拒绝了我所有试图从中获取更多信息的尝试。

它在实时服务器上，所以我无法单步执行，也无法在测试服务器上复制错误。如果有人对我如何获得更多关于哪里以及如何出错的细节有任何想法，我们将不胜感激。

干杯，马特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:47:47.257

你的问题的答案是否定的。Base 不能为 null，因为它是在子类之前实例化的（如果您不调用特定的基类型构造函数，则在子类构造函数执行之前调用默认的构造函数）。您的错误来自`base.Initialize()`方法。

# javascript - 控制栏上没有按钮 - mediaelement.js

> ID：13932181
> 
> 赞同：4
> 
> 时间：2012-12-18T11:42:00.710
> 
> 标签：javascript, jquery, mediaelement.js

我已经上传了原始目录中的所有 MediaElement 文件，但在演示中，视频和音频播放正常，但控制栏上看不到播放、音量和全屏按钮。

有什么想法有什么问题吗？

谢谢

马特

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T09:36:44.580

我也遇到了同样的问题。确保您在服务器上为 SVG 图像添加了正确的 MIME 类型。如果它们不存在，或者配置错误，您的浏览器将不会显示它们。

我通过 .htaccess 处理了这个：

```
AddType image/svg+xml svg
AddType image/svg+xml svgz 
```

如果您仍然无法显示 SVG 图像，您可以随时更改 CSS 中的背景图像以使用 .png 版本的控制栏和播放图标。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-16T19:38:09.477

在阅读了 spncr 的第一个答案后，我在 MEjs 样式表中找到了使用 PNG 文件而不是 SVG 的 no-svg 类。我使用该类用 DIV 包装了我的音频元素。

```
<div class="no-svg">
  <audio id="player1" controls>
    <source src="file.mp3" type="audio/mp3" >
    <p>This browser doesn't support audio.</p>
  </audio>
</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T11:37:40.003

我遇到了这个问题，基本上是因为我移动了文件并且CSS在错误的位置寻找控件图像文件。

在 mediaelementplayer.css

```
 .mejs-controls .mejs-button button {
background: transparent url(controls.png) no-repeat;
} 
```

确保背景的 url 与 controls.png 文件的实际位置匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T20:13:39.207

这是用于代替 Windows 服务器上的 .htaccess 文件的 web.config 文件的代码。

```
<configuration>
   <system.webServer>
      <staticContent>
         <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
         <mimeMap fileExtension=".svgz" mimeType="image/svg+xml" />
      </staticContent>
   </system.webServer>
</configuration> 
```

# php - 从独立函数中访问另一个类的方法

> ID：13932191
> 
> 赞同：-3
> 
> 时间：2012-12-18T11:42:49.363
> 
> 标签：php, class, object, methods

我正在将我的网站转换为 PDO，在大约 200 个脚本之后，我已经接近尾声了。每个脚本都访问相同的函数脚本。在函数脚本中，我有一个如下所示的数据库类：

```
class Database {
    private $db_con = ''; //stores the connection

    public function db_login(){
        //log into the database
    }
    public function db_control($query, $params){
        //run the query
    }
}
//initiate the class and log in
$db = new Database();
$db->db_login(); 
```

这两个函数都可以正常工作，并且适用于每种类型的查询，因此我几乎完成了。但是，我遇到了一个问题。

我正在处理的脚本上有一个独立函数，该函数在脚本中多次使用。我通常运行 db_control：

```
$results = $db->db_control($query, $params); 
```

但是从一个函数中运行它：

```
function func(){
    $results = $db->db_control($query, $params);
} 
```

返回错误。

> 致命错误：在第 39 行调用 C:..php 中非对象上的成员函数 db_​​control()

我究竟做错了什么？删除此功能后，该类肯定会启动，因为脚本上的其他查询可以正常工作。如何从独立函数中访问 db_control()？

谢谢你，
乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:47:31.897

`$db`在功能范围内不可用，您可以

`$db`作为参数传递

```
function func($db, $query, $params){
    return $db->db_control($query, $params);
}
$results = func($db, $query, $params); 
```

或者

```
function func($query, $params){
    global $db;
    return $db->db_control($query, $params);
}
$result = func($query, $params); 
```

用于`global`使其在函数中可用，可能还有其他解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:47:15.907

`$db`从函数内调用时超出范围。您可以`$db`作为参数传递给函数

```
function func($db){ 
```

还有一个非常糟糕的`global`方法：

```
function func(){
    global $db; // $db is now accessible 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:47:22.740

了解[变量范围](http://php.net/manual/en/language.variables.scope.php)。该变量`$db`未在函数内部声明，因此它不存在于函数内部。你需要把它传入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T11:50:07.410

哦，您已将 $db 作为全局启动：/

您不想这样做的原因有很多，我不会在这里讨论，主要是因为我的时间有点短，我将等待纯粹主义者在下面发表评论。但快速解决方法是添加。

```
global $db 
```

不是最理想的情况，但应该可以解决您的问题。

# magento - magento 框架如何与各种代码池交互？

> ID：13932194
> 
> 赞同：-2
> 
> 时间：2012-12-18T11:42:54.330
> 
> 标签：magento

任何人都知道magento 框架如何与各种代码池交互？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:51:42.703

Magento 有三个不同的代码池：

1.  社区

2.  核

3.  当地的

首先它包括本地代码池，然后是社区，然后是核心，它允许开发人员在不更改核心文件的情况下覆盖类。自动加载器首先检查本地文件夹，然后是社区，然后是核心和 lib。这就是为什么您可以将**Mage/Catalog/Model/Product.php**放在本地目录中的原因，它将被加载而不是核心类。

# objective-c - 有没有办法在 Objective-C 中以原子方式运行代码？

> ID：13932196
> 
> 赞同：0
> 
> 时间：2012-12-18T11:43:00.663
> 
> 标签：objective-c, multithreading, atomic

我正在尝试优化一段代码，该代码从硬盘驱动器加载大量图像并对其进行一些计算。我第一次尝试加快速度是为每个图像创建一个`NSOperationQueue`单独的加载和计算。`NSOperations`

不幸的是，这并没有真正缩短所用时间。

一个原因可能是创建`NSOperations`并将它们添加到`queue`. 另一个可能的原因是硬盘驱动器不是为多线程工作而设计的，因此磁盘的标题需要在扇区之间来回跳转，而不是逐个读取文件。

所以我的问题是，是否有任何方法可以原子地运行**obj-C**或**C**代码，这样当一个人`NSOperation`读取一个文件时，它不会受到试图读取另一个文件的某些操作的干扰，但仍然所有人都`NSOperations`可以对他们的图像进行计算?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:45:28.400

为什么不简单地使用**GCD**（Grand Central Dispatch）而忘记显式线程？

[这](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)是一个很好的Apple指南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:46:58.870

看看[NSLock](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html)类。它允许您实现关键部分。

# android - Android getsupportedvideosizes 在模拟器上返回 null

> ID：13932199
> 
> 赞同：0
> 
> 时间：2012-12-18T11:43:12.380
> 
> 标签：android, camera

我试图在模拟器中获得支持的视频大小，但它总是返回 null。为什么会这样？我在 4.03 中尝试过。提前致谢

```
 Camera camera=Camera.open();
    android.hardware.Camera.Parameters params = camera.getParameters();
    supportedPicSizes = params.getSupportedVideoSizes();
    if (supportedPicSizes==null){
        Log.i("*****supportedVideoSize*****", "*****Null****"); 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:48:00.610

这是一个[已知的 Android 错误](http://code.google.com/p/android/issues/detail?id=6271)。

这还没有得到修复，但它在错误跟踪系统上的事实可能意味着谷歌有计划通过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:04:10.673

这是您可以获得`Camera Preview Size`设备的选项之一。

```
Camera camera=Camera.open();
android.hardware.Camera.Parameters params = camera.getParameters();
Size supportedPicSizes = params.getPreviewSize();
if (supportedPicSizes==null){
      Log.i("*****supportedVideoSize*****", "*****Null****"); 
}
else{
      Log.i("*****supportedVideoSize*****", "*****"+supportedPicSizes.height); 
      Log.i("*****supportedVideoSize*****", "*****"+supportedPicSizes.width); 
} 
```

希望它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T07:20:39.420

[这里](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedVideoSizes%28%29)明确指出，此方法返回 null 意味着设备不支持预览和视频的不同输出。如果是模拟器，这种情况一定很突出，因为模拟器没有物理摄像头，一般不用于测试摄像头相关的模块。

我想补充一点，即使文档指出这是一种正常情况，我仍然无法为患有这种疾病的设备找到合适的替代方案。例如，S3 的 Verizon 变体对“getSupportedVideoSizes()”和“getPreferredPreviewSizeForVideo()”都返回 null。有没有人解决这个问题？非常感谢您的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-23T09:32:15.173

[也在这里回答](https://stackoverflow.com/a/22022062)

示例代码：

```
public List<Size> getSupportedVideoSizes(Camera camera) {
    if (camera.getParameters().getSupportedVideoSizes() != null) {
        return camera.getParameters().getSupportedVideoSizes();
    } else {
        // Video sizes may be null, which indicates that all the supported
        // preview sizes are supported for video recording.
        return camera.getParameters().getSupportedPreviewSizes();
    }
} 
```

# c# - 为什么我在 C# WinForms 到 MySQL 数据库的 SELECT 语句中出现此错误？

> ID：13932200
> 
> 赞同：0
> 
> 时间：2012-12-18T11:43:17.427
> 
> 标签：c#, mysql, select

我收到此错误：

```
Unknown column 'admin' in 'where clause' 
```

这是我的登录按钮代码：

```
 mycon.Open();
        string cmdstr = "SELECT * FROM usersettingsdb WHERE user_ID = " + textBox1.Text + "";
        cmd = new MySqlCommand(cmdstr, mycon);
        dr = cmd.ExecuteReader();
        string inputpw = "";
        string dbpw = "";
        while (dr.Read())
        {
            inputpw = maskedTextBox1.Text;
            dbpw = (dr["user_pw"].ToString());
        }
        dr.Close();
        mycon.Close(); 
```

我不太明白为什么会出现该错误，因为我的 Select 语句与我在网上看到的所有其他 select 语句相同

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T11:44:21.583

用单引号将文本框值括起来

```
 string cmdstr = "SELECT * FROM usersettingsdb WHERE user_ID = '" + textBox1.Text + "'"; 
```

## 编辑：

正如蒂格兰所评论的那样。使用参数化查询，而不是仅连接来自控件的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:53:06.070

> 我不太明白为什么会出现该错误

然后开始调试。在行上放一个断点`cmd =`并检查`cmdstr`的内容。你会看到查询是：

```
SELECT * FROM usersettingsdb WHERE user_ID = admin 
```

然后你会看到你需要在用户名周围加上引号。现在阅读有关 SQL 注入、参数化查询和 DAL 的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:45:33.813

您需要在围绕 textbox1.Text 的 where 子句中添加一组额外的“”，否则您不会将字符串传递给它。

```
string cmdstr = "SELECT * FROM usersettingsdb WHERE user_ID = \"" + textBox1.Text + "\""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T11:56:07.803

做这样的事情..

```
 string cmdstr = string.Format("SELECT * FROM usersettingsdb " + 
                "WHERE user_ID = '{0}'", textBox1.Text.Replace("'","''")); 
```

替换`'`为`''`因为 sql 认为`'`是*转义字符*。

但是建议使用[参数化查询](https://www.owasp.org/index.php/Query_Parameterization_Cheat_Sheet)。

# java - Eclemma 总是报告 0% 的代码覆盖率

> ID：13932211
> 
> 赞同：11
> 
> 时间：2012-12-18T11:43:38.760
> 
> 标签：java, eclemma

我的应用程序有一个 Maven 测试项目。

JUnit 测试运行良好，代码覆盖率测试也运行良好。

但报告总是显示 0% 的代码覆盖率。

我应该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T02:27:16.877

根据官方网站，[Eclemma](http://www.eclemma.org/)是 Eclipse 的代码覆盖插件，基于 JaCoCo 库。

由于您想在 eclipse 之外使用相同的代码覆盖引擎，您应该在项目的 Maven 配置 (pom) 中包含插件[Jacoco](http://www.eclemma.org/jacoco/trunk/doc/maven.html)，如下所示（[此代码是从敏捷工程博客复制的](http://www.agile-engineering.net/2012/01/unit-test-code-coverage.html)）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.6.0.201210061924</version>
            <executions>
                <execution>
                    <id>jacoco-initialize</id>
                    <goals>
                        <goal>prepare-agent</goal>
                    </goals>
                </execution>
                <execution>
                    <id>jacoco-site</id>
                    <phase>test</phase>
                    <goals>
                        <goal>report</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

要运行测试，只需在命令行工具上键入以下内容：

```
mvn clean test 
```

ps：您还可以使用其他代码覆盖插件，例如[Cobertura](http://cobertura.github.io/cobertura/)或[Emma](http://emma.sourceforge.net/maven-emma-plugin/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T02:54:14.193

现在我意识到您只想使用 Eclipse 中的工具获取报告...

Eclipse 对话框中的代码覆盖率如何？您是否尝试使用[鼠标右键单击此对话框来导出会话（报告）](http://agile.csc.ncsu.edu/SEMaterials/tutorials/eclemma/#section4_0)，或在[File -> Export](http://www.eclemma.org/userdoc/importexport.html)中？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T13:40:23.170

以防万一您忘记执行以下操作：

1.  您是否使用 @Test 注释您的测试？
2.  您是作为 JUnit 测试用例还是从覆盖按钮运行该类？

我不确定问题的原因是什么，因为它总是对我有用。您是否从 Eclipse 本身安装了它？尝试卸载它，然后从 eclipse 重新安装。以下是如何做到以防万一：

1.  在 Eclipse 中，单击“帮助”>“安装新软件”
2.  单击“添加”，然后键入以下内容：
    *   名称：EclEmma（或您想要的任何名称）
    *   路径：[http ://update.eclemma.org/](http://update.eclemma.org/)
3.  选择 EclEmma，然后安装

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-02T16:25:10.447

**这是多年来**的一个已知问题，不幸的是还没有官方的解决方案。****

 **你可以[在这里](https://code.google.com/p/powermock/issues/detail?id=402)、[这里](http://sourceforge.net/p/eclemma/discussion/614869/thread/6c0be2a0)和[这里看到它](https://github.com/jacoco/eclemma/issues/15)

一种不太好的解决方案可能是尝试使用[eCobertura](http://ecobertura.johoop.de/) （或将 eclemma 从 2.x 降级到 1.x）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-07T14:07:45.387

如果你使用 eclemma，你需要添加 jacoco 依赖。如果已添加 jacoco，但您仍然面临此问题，请参阅[eclemma 常见问题解答：“为什么一个类显示为未覆盖，尽管它已被执行？”](http://www.eclemma.org/jacoco/trunk/doc/faq.html)

它说，

> 首先确保已收集到执行数据。为此，请选择 HTML 报告右上角的 Sessions 链接，并检查是否列出了相关类。如果它在执行时列出但未链接，则该类是不同的类文件。确保您在运行时使用与生成报告完全相同的类文件。请注意，某些工具（例如 EJB 容器、**模拟框架**）可能会在运行时修改您的类文件。

所以，Mockito / PowerMockito 可能会导致这个问题。就我而言，我在@PrepareForTest() 中添加了该类。我被证明测试用例执行得很好，没有错误，但 Jacoco 并没有提高其报告中的代码覆盖率。

最后，从 @PrepareForTest() 注释中删除类改进了代码覆盖率。检查您是否添加了它，如果添加了它，请将其从注释中删除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-12T23:48:34.027

我刚刚遇到这个问题，它是由错误配置的类路径引起的。执行单元测试时，它们是针对已编译的 jar（在 eclipse 之外编译的实际源代码）而不是我的实际源代码执行的。从我的类路径中删除 jar 后，单元测试正确地命中了我的包源。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-10-26T04:30:05.200

我能够通过在测试用例顶部调用类的实例来解决我的问题。IE

```
public hotelOccupancy hotel = new hotelOccupancy();

@Test
public void testName() {
    // some test here
} 
```

一旦我这样做了，我的所有报道都开始工作并且问题得到解决。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-02-17T10:50:24.670

我正在使用 eclemma 2.3.2，它在 eclipse 上运行良好

我只需要在我的 pom.xml 中添加这些依赖项

```
<dependency>
    <groupId>org.jboss.arquillian.extension</groupId>
    <artifactId>arquillian-jacoco</artifactId>
    <version>1.0.0.Alpha6</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>org.jacoco</groupId>
    <artifactId>org.jacoco.core</artifactId>
    <version>0.7.1.201405082137</version>
    <scope>test</scope>
</dependency> 
```

然后我构建项目，更新 maven 项目配置并按预期运行覆盖插件**

# c# - 在 C# 中使用 xmlDocument 读取子属性

> ID：13932218
> 
> 赞同：-2
> 
> 时间：2012-12-18T11:43:57.857
> 
> 标签：c#, xml

我想读取所有`order_h`和`order_d`属性数据。但在我的程序代码上只能显示 order_h 标签数据。下面是我的代码。谢谢

```
<document>
<order>
<order_h owner="ABC" order_no="96431"/>
    <order_d owner="ABC" order_no="96431" item_no="0153-8196-010">
        <size assoc_id="1274847" size_id="B0153_0150XSXXLNIVINT_VAEC000076_BK"/>
    </order_d>
    <order_d owner="ABC" order_no="96431" item_no="0153-8196-020">
            <size assoc_id="1274847" size_id="B0153_0150XSXXLNIVINT_VAEC000076_BK"/>
    </order_d>
<order_h/>
</order>
<order>
<order_h owner="ABC" order_no="96432">
    <order_d owner="ABC" order_no="96431" item_no="0153-8196-030">
        <size assoc_id="1274847" size_id="B0153_0150XSXXLNIVINT_VAEC000076_BK"/>
    </order_d>
    <order_d owner="ABC" order_no="96431" item_no="0153-8196-040">
            <size assoc_id="1274847" size_id="B0153_0150XSXXLNIVINT_VAEC000076_BK"/>
    </order_d>
<order_h/>
</order>
</document>

 XmlDocument doc = new XmlDocument();
        doc.Load(@"File.xml");

        XmlNode OrderListNode =
 doc.SelectSingleNode("/document");
        XmlNodeList OrderNodeList =
            OrderListNode.SelectNodes("order/order_h");

        foreach (XmlNode node in OrderNodeList)
        {
            Console.WriteLine(node.Attributes.GetNamedItem("owner").Value);
            Console.WriteLine(node.Attributes.GetNamedItem("order_no").Value);
            Console.WriteLine(node.Attributes.GetNamedItem("profoma_po").Value);

            XmlNodeList OrderdNodeList = OrderListNode.SelectNodes("order_h/order_d");
             foreach (XmlNode orderd in OrderdNodeList)
            {
                Console.WriteLine("D " + orderd.Attributes.GetNamedItem("owner").Value);
                Console.WriteLine("D " + orderd.Attributes.GetNamedItem("order_no").Value);
                Console.WriteLine("D " + orderd.Attributes.GetNamedItem("item_no").Value);
            }

            Console.WriteLine("*****************new Line*******************");

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:02:47.997

您需要调用不同对象上`SelectNodes`的`order_d`节点。如果你想要`order_d`从属于 current 的节点`node`，你需要`SelectNodes`调用`node`：

```
foreach (XmlNode node in OrderNodeList)
{
    Console.WriteLine(node.Attributes.GetNamedItem("owner").Value);
    Console.WriteLine(node.Attributes.GetNamedItem("order_no").Value);
    Console.WriteLine(node.Attributes.GetNamedItem("profoma_po").Value);

    XmlNodeList OrderdNodeList = node.SelectNodes("/order_d");
    foreach (XmlNode orderd in OrderdNodeList)
    {
        Console.WriteLine("D " + orderd.Attributes.GetNamedItem("owner").Value);
        Console.WriteLine("D " + orderd.Attributes.GetNamedItem("order_no").Value);
        Console.WriteLine("D " + orderd.Attributes.GetNamedItem("item_no").Value);
    }

    Console.WriteLine("*****************new Line*******************");
} 
```

# dojo - dojo 和动态添加选项到 dijit.form.select

> ID：13932225
> 
> 赞同：4
> 
> 时间：2012-12-18T11:44:32.270
> 
> 标签：dojo, dijit.form

我使用 dojo 1.8.2，这是我的问题（我已经看到[了这个](https://stackoverflow.com/questions/7869805/programmatically-set-the-selected-value-of-a-dijit-select-widget)和[这个](https://stackoverflow.com/questions/11159140/dijit-form-select-wont-set-value-programmatically)问题，但它们没有帮助）：

我的`JS`代码从服务器接收一些`JSON`格式的数据。有了这个，我动态地创建了一些选项`dijit.form.select`：

```
var select = registry.byId('zgloszenieDoFirmyEdycja');
for (var uzytkownik in dane.uzytkownicy){
    var idUzytkownika = dane.uzytkownicy[uzytkownik]['_id']['$oid'];
    var imie = dane.uzytkownicy[uzytkownik].imie;
    var nazwisko = dane.uzytkownicy[uzytkownik].nazwisko;
    var wybrany = (idUzytkownika == id);
    var opcja = {};

    opcja.label = imie + ' ' + nazwisko;
    opcja.value = idUzytkownika;
    opcja.selected = wybrany;

    console.log(wybrany);
    console.log(idUzytkownika + ' | ' + imie + ' ' + nazwisko);
    console.log(opcja);

    select.addOption(opcja);
    /*select.addOption({
        label: imie + ' ' + nazwisko,
        value: idUzytkownika,
        selected: wybrany
    });*/
} 
```

这是我的控制台输出：

```
false
5077d2a1e4b0f5734a9850a1 | zero zero
Object { label="zero zero", value="5077d2a1e4b0f5734a9850a1", selected=false}
true
50c0776f096aa0e726d221a3 | raz raz
Object { label="raz raz", value="50c0776f096aa0e726d221a3", selected=true}
false
50d019c3096aa862c6898cdb | dwa dwa
Object { label="dwa dwa", value="50d019c3096aa862c6898cdb", selected=false} 
```

但是在`dijit.form.select`更新之后，`selected`参数会以某种方式混淆并且设置为 true 不是我设置的选项，而是第一个：

```
console.log(select);
...
Object[Object { label="zero zero", value="5077d2a1e4b0f5734a9850a1", selected=true},      
       Object { label="raz raz", value="50c0776f096aa0e726d221a3", selected=false}, 
       Object { label="dwa dwa", value="50d019c3096aa862c6898cdb", selected=false}
]
... 
```

我不明白为什么会这样，有什么线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T10:25:16.700

查看问题的源代码`dijit/form/_FormSelectWidget`是由于以下事实引起的，即如果未选择任何选项，则默认选择第一个选项。当您添加第一个选项时，此条件已满足并且第一个选项被选中。

**解决方法**：一次将所有选项添加为数组：

```
var select = registry.byId("select1");

option1 = { value: "o1", label: "option 1", selected: false };
option2 = { value: "o2", label: "option 2", selected: true };

select.addOption([option1, option2]); // add all options at once as an array 
```

在行动中看到它：http: [//jsfiddle.net/phusick/BfTXC/](http://jsfiddle.net/phusick/BfTXC/)

# jquery - 使用jquery从表单属性中减去已知字符或最后7个字符

> ID：13932226
> 
> 赞同：0
> 
> 时间：2012-12-18T11:44:36.657
> 
> 标签：jquery

例子

```
<form id='A_forward' name='A_forward' action='/some_url.php' method='POST'>
</form> 
```

如何使用 jquery 获取此表单的名称，减去`'forward'`字符和警报`'A_'`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:51:39.880

如果您总是需要删除 7 使用：

```
var token = $("#A_forward").attr("name").substring(0, $("#A_forward").attr("name").length - 7); 
```

示例：http: [//jsfiddle.net/BRJxh/](http://jsfiddle.net/BRJxh/)

如果后缀总是向前使用：

```
var token = $("#A_forward").attr("name").substring(0, $("#A_forward").attr("name").indexOf("forward")); 
```

示例：http: [//jsfiddle.net/BRJxh/1/](http://jsfiddle.net/BRJxh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:51:39.943

这将采用 name 属性值并警告前两个字母（有点冗长以更好地解释它）

```
var formname = $('#A_forward').attr('name');
var firstTwoChars = formname.substring(0,2);

alert(firstTwoChars)​; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:52:36.667

```
var name = $('#A_forward').attr('name'); //read the name of the element

name.replace("forward", ""); //replace 'forward' with an Empty string

alert(name); //alert the name_prefix. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T11:54:13.557

如果要删除 7 last char ：

```
var name = $("form").attr("name");
var str = name.substring(0,name.length-7);
alert(str); 
```

如果“前进”是修复：

```
var name = $("form").attr("name").replace('forward','');
alert(name ); 
```

编辑：只要得到你想要的:)

```
console.log($("form"));
var name = $("form").attr("name").split('_');
alert(name[0]+'_');​ 
```

[提琴手](http://jsfiddle.net/b5eWc/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:00:54.273

试试这个，

```
alert($("#A_forward").attr('name').substring(0,2)); 
```

# websphere - Websphere 可以自动删除临时文件吗？

> ID：13932245
> 
> 赞同：0
> 
> 时间：2012-12-18T11:45:33.003
> 
> 标签：websphere, websphere-6.1, birt, maximo

我目前正在使用 Websphere 来托管 IBM Maximo，当创建 BIRT 报告并通过电子邮件发送时，Websphere 将其存储在其临时文件中。这些文件通常非常大并且占用大量磁盘空间。

有谁知道 Websphere/Maximo/BIRT 中删除这些的设置。

Websphere - 6.1 Maximo - 7.1 BIRT - 2.3.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:43:38.300

我不知道设置，但你可以在 Linux 中设置一个 cron 任务来删除超过你想要的时间的文件：

[http://www.howtogeek.com/howto/ubuntu/delete-files-older-than-x-days-on-linux/](http://www.howtogeek.com/howto/ubuntu/delete-files-older-than-x-days-on-linux/)

```
 find /path/to/files* -mtime +5 -exec rm {} \; 
```

上述声明将删除超过五天的文件。

# java - Java：如何在 Firefox 中创建类似橙色的 appmenu 按钮？

> ID：13932246
> 
> 赞同：1
> 
> 时间：2012-12-18T11:45:38.343
> 
> 标签：java, swing, firefox

Windows 版本的 Firefox 有一个特殊的橙色按钮和应用程序标题，它取代了传统的菜单栏：

![火狐橙色按钮](../Images/a2dc0d23dcbbac159b7bef55aa92349c.png)

是否可以在 Java 中创建类似的东西？或者其他公式：如何在Java的标题栏中放置一个按钮？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:54:45.910

您不能更改标题栏，因为它取决于操作系统。但是您可以将 JFrame 设置为 undecorated(true) 并通过创建 JPanel 创建自定义标题栏，将其添加到框架的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T04:06:02.127

正如其他人所说，您不能在标准标题栏中添加按钮。

但是，如果您愿意容忍使用 Metal 的外观和感觉，您可以让它为您创建一个标题栏，您可以半可靠地向其中添加组件：

```
JButton button = new JButton(" Menu \u25be ");

JFrame frame = new JFrame("Title");
frame.setUndecorated(true);
frame.getRootPane().setWindowDecorationStyle(JRootPane.FRAME);

// Force creation of title bar components.
frame.setPreferredSize(new Dimension(400, 400));
frame.pack();

JLayeredPane layeredPane = frame.getLayeredPane();
JComponent titlePane = (JComponent) layeredPane.getComponentAt(0, 0);
for (Component c : titlePane.getComponents()) {
    if (c instanceof Container &&
        ((Container) c).getLayout() instanceof DefaultMenuLayout) {

        int layer = layeredPane.getLayer(titlePane);
        layeredPane.setLayer(button, layer + 1);

        button.setLocation(c.getX() + c.getWidth() + 3, 1);
        Dimension size = button.getPreferredSize();
        size.height = Math.min(size.height, titlePane.getHeight() - 2);
        button.setSize(size);
        layeredPane.add(button);

        break;
    }
} 
```

这仅在使用 Metal 外观时才有效，因为这是唯一一个`getSupportsWindowDecorations`方法返回 true 的 LookAndFeel 类（我认为）。

# hibernate - Hibernate Inverse 中的混淆

> ID：13932249
> 
> 赞同：0
> 
> 时间：2012-12-18T11:45:45.817
> 
> 标签：hibernate

我在使用 inverse = true 的 Hibernate 一对多映射中感到困惑。

1.Inverse提供双向映射。我们把它放在收集侧，另一侧将拿船主。2.Inverse和Cascade都用于不同的目的。

3.In Casecade = all Hibernate 将在一次调用中保存父级及其关联。

4.在 Cascade =none 中，我们需要进行不同的调用来保存父级及其子级。

5.在 cascade = all 和 inverse =true 中，在一对多的情况下会少一个更新查询来更新约束。

但是在 cascade= none 或者 inverse= true 或 inverse=false(In one to many) 的情况下，我无法在 sql 查询中找到任何更改。

所以我的问题是在 cascade = none 的情况下 inverse=true 究竟做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:29:15.140

`cascade`和`inverse`ae 正交概念。

`inverse`简单地说，关联是双向的，由关联的另一端映射。它使另一方成为协会的所有者。

一个关联只有一方是所有者方，Hibernate 在持久化时只考虑所有者方。这意味着如果一个实体`a`有一组包含`b1`,`b2`和的`b3`B，但这些 B 实例都没有`a`作为它们的父对象引用，那么 Hibernate 将不会保持关联，因为所有者方 (B) 说：我没有链接到任何父母A。

# html - 将数据从jsp传递到html表中的servlet

> ID：13932253
> 
> 赞同：0
> 
> 时间：2012-12-18T11:45:53.167
> 
> 标签：html, jsp, session, servlets

我正在使用 JSP 和 Servlet 开发一个 Web 应用程序。在该应用程序中，我必须在 html 表中显示来自数据库表 stud(studID, name, add) 的数据，并且表中的每一行在最后一列都有一个与之关联的超链接。单击该超链接后，我想从表中获取（studID）...

到目前为止，我已经从数据库中获取数据，然后将其放入列中，然后为每一行添加超链接。但我无法从与超链接关联的 html 表中获取（studID）。

提前致谢....

源代码 ：

```
<% 
String[][] data = (String[][])request.getAttribute("data"); 
String[] cNames = (String[])request.getAttribute("columnNames"); 
//headings 
%> 
<table> 
<tr> 
<% 
for(int i=0;i<cNames.length;i++) { 
%> 
<th>
<%= cNames[i] %>
</th>
<% 
} 

//data if(data!=null) 
for(int i=0;i<data.length;i++) { 
%>
<tr> 
<% 
for(int a=0;a<3;a++) {
%> 
<td>
<%= 
data[i][a] 
%>
</td> 
<% 
//hyperlink 
if(a==2) { 
%> 
<td>
<a href="PlanProtocol" id=<%=i%> onclick="<% session.setAttribute("ID","p2"); %>" >Edit</a></td> 
<% 
} 
} 
%>
</tr> 
<% } %> 
<tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:52:12.607

您可以在 url 中将 id 作为查询字符串传递。简单地：

```
 <a href="myservlet?id=<%=stuid%>">My Link</a> 
```

将工作。但是，如果您使用的是 JSTL 或其他标签库，那么您可以执行以下操作：

```
 <c:url value="/myservlet" var="myURL">
     <c:param name="id" value="1234"/>
  </c:url>

  <a href="<c:out value="myURL">mylink</a> 
```

这有它的优点，例如 url 编码等。

* * *

因此，要将 id 添加到您发布的代码中的 URL，您可以：

```
 <a href="PlanProtocol?id=<%=i%>" >Edit</a> 
```

网址最终会像这样：`PlanProtocol?id=1234`.

在 Servlet 中，您可以通过以下方式获取参数：

```
 request.getParameter("i"); 
```

但是，正如我上面提到的，您可能希望使用 JSTL 之类的标记库，而不是将这些 scriptlet 放置在您的页面中。有几个优点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:50:27.350

认为您应该在JSP中提取studID并将studID格式化为URL，html页面的查询字符串。(?studID=xxxxx) 所以 servlet 会知道 studID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:58:59.003

您可以`request.setAttribute("studID","value");`在您的 jsp 页面中使用来设置值并`request.getAttribute("studID");`在 servlet 中使用来获取值

# attributes - 使用 schematron 计算属性数

> ID：13932254
> 
> 赞同：0
> 
> 时间：2012-12-18T11:45:53.550
> 
> 标签：attributes, count, schematron

我正在尝试使用 Schematron 检查属性的存在。

```
<Layout>
<Pages>
    <Page id="id-001" description="Database Sections">  
    </Page>
</Pages>
<TreeViews>
    <TreeView id="id-001" description="">
    </TreeView>
</TreeViews> 
```

如果有“TreeView id”，它必须已经存在于“Page id”中

所以我试图计算与我的“Treeview id”同名的“Page id´s”，它们必须> = 1：

```
 <?xml version="1.0" encoding="UTF-8"?>
<sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron"
            xmlns:xs="http://www.w3.org/2001/XMLSchema"
            queryBinding="xslt2">

   <sch:pattern name="Vote Count">
      <sch:rule context="Layout/TreeViews/Treeview/@name">
         <sch:report test="count(Layout/Pages/Page[@id=current()]) >= 1">
             min. 1
        </sch:report>    
      </sch:rule>
   </sch:pattern>
</sch:schema> 
```

我究竟做错了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:54:18.337

这个规则怎么样：

```
<iso:pattern id="check IDs">
  <iso:rule context="TreeView">
    <iso:assert test="parent::*/parent::*/Pages/Page/@id = @id">
      TreeViews/TreeView/@id = <iso:value-of select="./@id" /> NOT FOUND in Pages
    </iso:assert>
  </iso:rule>       
</iso:pattern> 
```

希望这可以帮助。

# excel - Excel - 基于日期的总和值

> ID：13932255
> 
> 赞同：0
> 
> 时间：2012-12-18T11:45:55.597
> 
> 标签：excel, excel-formula

我有一个单元格，其中包含供用户选择的月份下拉列表。我想做的是使用下拉菜单中选择的任何月份来驱动工作簿中的总和。

例如，在一张表中，我有 C4 中月份的下拉列表。

在另一张表中，我有日期和相应的数据（从 A1 和 A2 开始）：

```
July  August  September  October  etc...      YTD Total
50    100     75         60       etc...      ? 
```

因此，我希望在这里实现的是将截至用户在下拉菜单中选择的日期的每月数字相加，即如果在下拉菜单中选择了 9 月 - 那么年初至今的总数将包括 7 月、8 月、9 月（NB - 财政年度从 7 月开始，而不是 1 月）。

提前感谢人们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:04:53.827

使用 INDIRECT，您可以从字符串创建 SUM 的范围引用。像这样的东西：

```
=SUM(INDIRECT("R2C1:R2C"&MATCH(C4,A1:E1,0),FALSE)) 
```

# php - 仅由数字组成的唯一 ID

> ID：13932259
> 
> 赞同：2
> 
> 时间：2012-12-18T11:46:05.217
> 
> 标签：php, unique

我需要获取仅由数字组成的基于**时间**的*唯一*ID，我想简单地使用这样的东西：

```
str_replace(".", "", microtime(true)) 
```

我会将此 id 用于许多事情，例如评论发布，并且我预计流量会很高，所以我想知道与`microtime`功能发生冲突的可能性有多大？

也许有更好的方法来获取数字唯一ID？请记住，它必须基于时间，以便进行排序。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-02-18T11:48:20.537

您可以使用它来获取 uniqid 但不是数字：

```
$id = uniqid(); //58aea16085f6b 
```

使用它来将其仅转换为数字：

```
$id = hexdec( uniqid() ); //1560112880181100 
```

如果它太长使用这个但可能会得到负数：

```
$id = crc32( uniqid() ); //-1551585806 
```

如果您只需要积极的数字，您可以这样做：

```
$id = abs( crc32( uniqid() ) ); //1551585806 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T11:48:51.940

如果它必须基于时间，您可以使用微时间。但我猜你正在将东西存储在数据库中，所以我的投票会选择一个带有type 和一个 default的`primary key`列`Id`，`auto_increment`然后是第二个列。`timestamp``current time`

然后您可以按时间戳排序，即使流量非常大，也可以拥有 100% 的唯一标识符。但是，如果需要订购（所以不要在日期之间搜索），那么您就不需要根据时间进行订购。

1, 2, 3, 4 的顺序与 microtime 键的顺序相同，只是更大更远。

更新

如果它必须是唯一键并且不能从数据库中使用，请尝试以下操作。重复键的变化非常小，可以忽略不计。

```
$key = microtime() + floor(rand()*10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:50:12.663

如果你必须避免基于时间的碰撞是行不通的。最终你会发生碰撞。为什么不使用带有信号量的计数器。

[http://php.net/manual/en/book.sem.php](http://php.net/manual/en/book.sem.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:01:15.210

如果您需要使用纯基于时间的 ID，则需要确保避免冲突，因此 a) 在数据库中使用主键，然后 b) 使用递归检查以确保您的基于时间的 ID 尚未被使用：

```
$id = getTimeId();

function getTimeId() {
    // Generate microtime
    // Query to ensure it does not exist
    // Return microtime
} 
```

我将把它留给你，好先生，享受使它递归的乐趣。

# xslt - 在表行上是否有“keep-together='always'”的替代方法？

> ID：13932261
> 
> 赞同：10
> 
> 时间：2012-12-18T11:46:13.097
> 
> 标签：xslt, xsl-fo, apache-fop

在找到“keep-together”属性并且不需要在行内分页后`keep-together="always"`，我在 xslt 中的每个 table-row 元素上添加。有没有更好的方法来达到同样的效果？这似乎有点hacky。（ps。如果没有人提供更好的答案，我会接受“不”作为答案，前提是提供某种解释。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T13:18:33.597

`keep-together="always"`很危险，因为这是一个也间接设置的复合属性`keep-together.within-line="always"`（禁止在表格单元格内换行）。你应该`keep-together.within-column="always"`改用。但是在表格行上指定它实际上是要走的路。没什么可笑的。

另见：[http ://www.w3.org/TR/xsl11/#datatype](http://www.w3.org/TR/xsl11/#datatype)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-16T11:33:56.913

我使用以下三种方法将表行保持在一起并取得了一些成功：

### 将整个街区保持在一起

```
<tr keep-together.within-page="always">
...
</tr> 
```

### 将相邻的块保持在一起

```
<tr keep-with-next.within-page="always">
    <td keep-together.within-page="always">...</td>
    ...
</tr>
<tr>...</tr>

<tr>...</tr>
<tr keep-with-previous.within-page="always">
    <td keep-together.within-page="always">...</td>
    ...
</tr> 
```

尽管您必须小心 - 如果行或单元格跨越生成文档的多页，您会将该页面的底部从底部松开！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T07:08:19.443

当我需要将表格锁定在一起时，这个答案解决了我的表格行在分页符上流动的问题。我用了`<fo:table keep-together="always"></fo:table>` 谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-19T08:54:22.253

With an XSL formatter that handles integer keeps, you can use an integer value so that the formatter will try to keep the row together but will break the row rather than run off the end of the page. However, this question is tagged for FOP, and FOP's compliance page currently states that it has limited support for integer keeps ([http://xmlgraphics.apache.org/fop/compliance.html#fo-property-keep-together](http://xmlgraphics.apache.org/fop/compliance.html#fo-property-keep-together)), so YMMV.

# php - 如何使用实时编辑（即时编辑）和 PHP/Ajax 生成 PDF

> ID：13932263
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:17.453
> 
> 标签：php, ajax, pdf

我将编写一个可以生成 PDF 的工具。我过去用 FPDF 和静态数据生成了 PDF。

现在我将通过实时编辑生成pdf。

例如：用户可以查看最终的 pdf 页面并单击法律字段以键入文本。

有没有人想法？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:35:25.070

无法在浏览器中直接编辑 PDF 文件。您所能做的就是从用户那里获取输入并在您的服务器上使用 fpdf（最好使用 tfpdf 支持 utf）生成 PDF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:31:52.563

您如何使用 TinyMce 之类的工具来编辑数据，获取输出 html 并使用 MPDF 或 html2pdf 从中创建 PDF

# php - JqG rid + 自动完成

> ID：13932264
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:20.240
> 
> 标签：php, javascript, jqgrid

我在 jqgrid 中实现自动完成时遇到了麻烦。我一直在研究，直到我把这个问题建立在一个目前不满足的网站上。问题是，我必须在我正在开发的整个应用程序中多次使用自动完成功能。现在我有了这个功能：

Javascript：

```
function autocomplete_element(value, options) {
    var $ac = $('<input type="text"/>');
    $ac.val(value);
    $ac.autocomplete({
    source: function(request, response) 
    {        
        $.getJSON("autocomplete.php?id=estrategico",
            { q: request.term }, response);
    }
    });
    return $ac;
} 
```

Jqgrid：

```
jQuery("#obj_oper_org").jqGrid({
    (...)
        {name:'COD_OBJ_EST',index:'COD_OBJ_EST', hidden: true, editable:true, editrules:{required:true, edithidden:true}, edittype : 'custom', editoptions : {'custom_element' : autocomplete_element}}, 
```

旨在将参数传递给javascript函数的目的是为了不为每个字段永远重复相同的函数，因为我需要不断更改url。有没有可能制作出这种类型的东西？很抱歉这个问题，但我在 javascript 方面没有太多经验，所以我遇到了一些困难

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:09:29.733

首先，您不需要`edittype : 'custom'`使用 jQuery UI 自动完成功能。取而代之的是，您可以使用 just `dataInit`。

您可以定义`myAutocomplete`功能，例如

```
function myAutocomplete(elem, url) {
    setTimeout(function () {
        $(elem).autocomplete({
            source: url,
            minLength: 2,
            select: function (event, ui) {
                $(elem).val(ui.item.value);
                $(elem).trigger('change');
            }
        });
    }, 50);
} 
```

然后使用

```
{ name:'COD_OBJ_EST', hidden: true, editable: true,
    editoptions: {
        dataInit: function (elem) {
            myAutocomplete(elem, "autocomplete.php?id=estrategico");
        }
    }} 
```

请注意，将发送到服务器的参数名称是标准名称`term`，而不是`q`您当前使用的名称。我个人认为不需要更改参数的默认名称。

# responsive-design - 响应式框架的简单替代方案

> ID：13932265
> 
> 赞同：1
> 
> 时间：2012-12-18T11:46:21.600
> 
> 标签：responsive-design

最近几个月我完成了许多响应式构建，并认为我使用的基本样式表可能值得分享！它非常简单但非常有效。我使用了几个 Javascript 库来修复常见错误，但在评论中引用了这些错误。

**HTML 文档**

```
<!DOCTYPE html>
<html lang="en">
<head>
   <title></title>
   <meta charset="utf-8">
   <meta name="description" content="" />
   <meta name="keywords" content="" />
   <meta name="copyright" content="" />

   <!-- http://modernizr.com -->
   <script src="scripts/modernizr.min.js"></script> 

   <link rel="stylesheet" href="css/base.css"  />    
</head>
<body>
   <header id="header" class="env clearfix"><p>Header Content</p></header>
   <div id="body-content" class="env clearfix">
       <p>Body Content</p>
       <p class="mobile-only">Hello Mobile Users</p>
   </div>
   <footer id="footer" class="env clearfix"><p>Footer Content</p></footer>
</body>
</html>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<!-- http://www.blog.highub.com/mobile-2/a-fix-for-iphone-viewport-scale-bug/ -->
<script src="scripts/MobileBoilerplate.js"></script>
<script type="text/javascript"> 
    MBP.scaleFix();
</script>

<!-- https://github.com/scottjehl/Respond -->
<script src="scripts/respond.min.js"></script> 
```

**Base.css**

```
body{ }  

#header{ background-color:red; }
#footer{background-color:green;}

p{padding:25px;}

.env { position:relative; max-width:1000px; padding:0; margin:0 auto; width:100%; }
.mobile-only{display:none;}  

@media only screen and (min-width: 1000px)  
{
    .env { max-width: 1400px; }    
    p{padding:50px;}
}

@media only screen and (min-width: 701px) and (max-width: 850px) 
{
    body{font-size:0.9em;}
    .env { max-width: 850px; }    
    p{padding:20px;}
}

@media only screen and (min-width: 701px)  
{    
     .mobile-only{display:none !important;}  
}

@media only screen and (max-width: 700px) {
    .env { max-width: 700px;  min-width:300px;}
    body{font-size:0.9em;}

    .hide-in-mobile{display:none;}
    .mobile-only{display:block;}  
    p{padding:10px;}
}

@media only screen and (min-width: 450px) and (max-width: 700px) 
{
    p{padding:15px;}
}

@media screen and (-webkit-min-device-pixel-ratio: 2), screen and (max--moz-device-pixel-ratio: 2) {
    #logo{ background:url(/images/logo@2x.png) no-repeat; background-size: 84px 140px;   }
}

.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom:1;clear: both; } 
```

# wordpress - WordPress 博客在主页上显示 404 错误，除非您已登录

> ID：13932266
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:26.627
> 
> 标签：wordpress

我的博客`techshali.com`在主页上显示 404 错误。如果您访问我的博客，您可能会看到 404 错误，但此错误仅在主页上，登录用户不会看到此错误。我不知道为什么会这样。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:48:35.373

一个原因可能是由于帖子被选为“私人”而不是“已发布”。你检查过这个吗？

# postgresql - 在plpgsql中迭代整数[]

> ID：13932268
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:35.533
> 
> 标签：postgresql, iteration, plpgsql, postgresql-8.4

如果我有，我该如何迭代 integer[]：
`operators_ids = string_to_array(operators_ids_g,',')::integer[];`
我想要迭代`operators_ids`.
我不能这样做：
`FOR oid IN operators_ids LOOP`
这：
`FOR oid IN SELECT operators_ids LOOP`
`oid`是`integer`；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:05:41.047

您可以遍历一个数组，例如

```
DO
$body$
DECLARE your_array integer[] := '{1, 2, 3}'::integer[];
BEGIN
    FOR i IN array_lower(your_array, 1) .. array_upper(your_array, 1)
    LOOP

    -- do something with your value
    raise notice '%', your_array[i];

    END LOOP;
END;
$body$
LANGUAGE plpgsql; 
```

但在我看来，主要问题是：为什么需要这样做？您有机会以更好的方式解决问题，例如：

```
DO
$body$
DECLARE i record;
BEGIN
    FOR i IN (SELECT operators_id FROM your_table)
    LOOP

    -- do something with your value
    raise notice '%', i.operators_id;

    END LOOP;
END;
$body$
LANGUAGE plpgsql; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:05:46.503

我认为德索是对的。您不需要使用索引来循环数组。如果您根据 person_id 结合限制 1 进行选择语句分组，您将获得所需的结果集：

```
create or replace function statement_example(p_data text[]) returns int as $$
declare
 rw event_log%rowtype;
begin
  for rw in select * from "PRD".events_log where (event_type_id = 100 or event_type_id = 101) and person_id = any(operators_id::int[]) and plc_time < begin_date_g order by plc_time desc group by person_id limit 1 loop
  raise notice 'interesting log: %', rw.field;
  end loop;
  return 1;
end;
$$ language plpgsql volatile; 
```

那应该表现得更好。如果您仍然喜欢循环一个整数数组并且有很多 person_ids 需要照顾，那么您是否可以考虑使用享元设计模式：

```
create or replace function flyweight_example(p_data text[]) returns int as $$
declare
 i_id int;
 i_min int;
 i_max int;
begin
 i_min := array_lower(p_data,1);
 i_max := array_upper(p_data,1);
 for i_id in i_min .. i_max loop
  raise notice 'interesting log: %',p_data[i_id];
 end loop;
 return 1;
end;
$$ language plpgsql volatile; 
```

# android - android中带有取消选项的日期选择器

> ID：13932272
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:48.527
> 
> 标签：android, android-datepicker

是否可以使用具有取消/设置选项的日期/时间选择器来代替单个设置命令。我的用例是，当我单击日期选择器并且该字段不是强制性的时，我可能想清除选定的值。我的代码看起来像这样：

```
private DatePickerDialog datePicker = null;

datePicker = new DatePickerDialog(getContext(), new DateSetListener(), year, monthOfYear, dayOfMonth); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:50:49.193

我会使用一个简单的对话框，其中包含一个 DateTimePicker 以及 SET 和 CANCEL 按钮或您想要包含的任何其他功能之王

您可以实现的另一个 UI/X 解决方案是按需显示 DateTimePicker（例如，用户单击按钮）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:15:39.030

DatePickerDialog 和 TimePickerDialog 存在问题（问题 #34833）。我们可以使用计数器来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T06:17:44.817

我知道它晚了一个解决方案（我不希望任何人在这上面浪费时间）因为这可能看起来像这样..（感谢[https://stackoverflow.com/users/642161/dmon](https://stackoverflow.com/users/642161/dmon)）

```
import android.app.DatePickerDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.widget.DatePicker;

import java.lang.reflect.Field;

/**
 * Created by root on 12/8/15.
 */
public class DatePickerDialogFragment extends DatePickerDialog {

public DatePickerDialogFragment(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
    super(context, null, year, monthOfYear, dayOfMonth);
    initializePicker(callBack);
}

public DatePickerDialogFragment(Context context,int theme,OnDateSetListener callBack,int year, int monthOfYear, int dayOfMonth)
{
    super(context, theme, null, year, monthOfYear, dayOfMonth);
    initializePicker(callBack);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setCancelable(false);
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    dismiss();

}

private void initializePicker(final OnDateSetListener callback) {
    try {
        //If you're only using Honeycomb+ then you can just call getDatePicker() instead of using reflection
        Field pickerField = DatePickerDialog.class.getDeclaredField("mDatePicker");
        pickerField.setAccessible(true);
        final DatePicker picker = (DatePicker) pickerField.get(this);
        this.setButton(DialogInterface.BUTTON_NEGATIVE, getContext().getText(android.R.string.cancel), (OnClickListener) null);
        this.setButton(DialogInterface.BUTTON_POSITIVE, getContext().getText(android.R.string.ok),
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        picker.clearFocus(); //Focus must be cleared so the value change listener is called
                        callback.onDateSet(picker, picker.getYear(), picker.getMonth(), picker.getDayOfMonth());
                    }
                });
    } catch (Exception e) { /* Reflection probably failed*/ }
}
} 
```

# linux - BackTrack 5 R3 中的 ACR120U 读卡器

> ID：13932274
> 
> 赞同：0
> 
> 时间：2012-12-18T11:46:49.680
> 
> 标签：linux, nfc, mifare

我无法在 BackTrack 5 R3 (Linux) 中使用 ACR120U 阅读器，我已经下载并安装了必要的[驱动程序。](http://www.acs.com.hk/drivers/eng/ACR120U_driver_Lnx_1504_A.zip)

`lsusb`显示 ACR 阅读器已连接，但如何使用它， `nfc-list`显示没有 RFID 阅读器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T12:35:12.577

`libnfc`不支持`ACR120U reader`。我不得不用它`ACR122 reader`来完成任务。

# javascript - 在数据绑定中动态设置绑定

> ID：13932284
> 
> 赞同：0
> 
> 时间：2012-12-18T11:47:17.187
> 
> 标签：javascript, knockout.js

在 knockout.js 中，我们有一个最基本的文本绑定示例：

```
Today's message is: <span data-bind="text: myMessage"></span>

<script type="text/javascript">
    var viewModel = {
        myMessage: ko.observable() // Initially blank
    };
    viewModel.myMessage("Hello, world!"); // Text appears
</script> 
```

这直接来自教程[http://knockoutjs.com/documentation/text-binding.html](http://knockoutjs.com/documentation/text-binding.html) 如果我想要一个定义实际绑定属性的变量怎么办。这可能看起来像这样：

```
Today's message is: <span data-bind="myBinding: myMessage"></span>

<script type="text/javascript">
    var viewModel = {
        myMessage: ko.observable(), // Initially blank
        myBinding: ko.observable(), // Initially blank
    };
    viewModel.myMessage("text");
    viewModel.myMessage("Hello, world!"); // Text appears
</script> 
```

上面的代码显然是错误的，但正确的情况是什么？

我正在研究一些像 ko.applyBindingsToNode 之类的东西（[我可以在自定义绑定中动态绑定元素吗？](https://stackoverflow.com/questions/13109455/can-i-dynamically-bind-element-inside-custom-binding)）但是这次 Google FU 完全让我失望了，因为我发现的大部分东西都是将绑定应用于动态构建的元素而不是应用动态动态绑定类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:16:02.260

您不能将可观察对象用作自定义绑定类型。Observable 用于存储数据。

You can get the functionality you want by using either a [Custom Binding](http://knockoutjs.com/documentation/custom-bindings.html) or a [Computed Observables](http://knockoutjs.com/documentation/computedObservables.html). Personally, if this is something special that you need one time, then use a Computed Observable. Otherwise, use a custom binding.

# c++ - 对象构造语法

> ID：13932287
> 
> 赞同：2
> 
> 时间：2012-12-18T11:47:25.603
> 
> 标签：c++, oop

> **可能重复：使用 new 实例化对象与不**[创建对象有](https://stackoverflow.com/questions/6337294/creating-an-object-with-or-without-new)
> [什么区别：使用或不使用 `new`](https://stackoverflow.com/questions/3673998/what-is-difference-between-instantiating-an-object-using-new-vs-without)

这两种说法有什么区别

```
 HttpUtil httpUtil; 
```

和

```
 HttpUtil *net = new HttpUtil(); 
```

哪个更好用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:49:16.463

第一个创建一个自动变量。内存管理是自动的，分配更快，因为它在堆栈上，没有内存泄漏的机会。

第二个版本创建一个动态变量——你负责清理内存，堆上的分配速度较慢。

永远喜欢第一个。如果您必须使用动态分配（用于持续生命周期或多态行为），请使用智能指针而不是原始指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:51:26.057

第一条语句创建一个`httpUtil`在“堆栈”上调用的变量 - 这意味着，一旦包含该行的函数完成，该变量就会“超出范围”并被释放（它使用的内存可以自由用于其他东西）。

第二条语句在“堆”上创建一个变量——这意味着该变量将保留在内存中，直到您调用`delete`它。在堆上分配变量时，您需要确保始终`delete`在某个时候使用它，否则您会出现内存泄漏 - 这是您无法再看到`*net`变量的地方，但内存仍然被分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:52:15.210

第一个是静态创建的对象，您无需担心它的破坏。后来一个是动态创建的对象，您需要在应用程序终止之前处理它的销毁。

第一个是首选，您不需要担心内存管理。

# hibernate - 使用 Hibernate 制作不可删除且只读的实体

> ID：13932288
> 
> 赞同：0
> 
> 时间：2012-12-18T11:47:30.290
> 
> 标签：hibernate, jakarta-ee, entity, jpa-2.0, readonly

我有一个名为 UserRights 的表，其中包含用户可以通过 ManyToMany 关联获得的可能权限列表。
因此我希望这个表是只读的/不可变的。**因此，即使通过级联**，也不会删除和更新。

在休眠文档中，我找到了只读实体（[链接](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch12.html)），但它不是我想要的：引用文档：

> *   可以删除只读实体。

你知道有什么方法可以实现我想要的吗？
此外，我更喜欢 JPA2 解决方案而不是特定于 Hibernate 的解决方案。

# php - 动态获取 PHP 类命名空间

> ID：13932289
> 
> 赞同：13
> 
> 时间：2012-12-18T11:47:30.350
> 
> 标签：php, oop, introspection

如何自动检索类命名空间？

魔术 var`__NAMESPACE__`是不可靠的，因为在子类中它没有正确定义。

例子：

`class Foo\bar\A`-> `__NAMESPACE__`=== Foo\bar

`class Ping\pong\B extends Foo\bar\A`-> `__NAMESPACE__`=== Foo\bar（应该是 Ping\pong）

ps：我注意到使用相同的错误行为`__CLASS__`，但我解决了使用`get_called_class()`...有类似的东西`get_called_class_namespace()`吗？我怎样才能实现这样的功能？

更新：
我认为解决方案是我自己的问题，因为我意识到`get_called_class()`返回完全限定的类名，因此我可以从中提取名称空间：D ...无论如何，如果有更有效的方法让我知道；）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T12:04:47.620

`class Foo\Bar\A`is的命名空间`Foo\Bar`，所以`__NAMESPACE__`运行得很好。您正在寻找的可能是*命名空间的类名*，您可以通过 join 轻松获得`echo __NAMESPACE__ . '\\' . __CLASS__;`。

考虑下一个例子：

```
namespace Foo\Bar\FooBar;

use Ping\Pong\HongKong;

class A extends HongKong\B {

    function __construct() {
        echo __NAMESPACE__;
    }
}

new A; 
```

将打印出`Foo\Bar\FooBar`非常正确的...

即使你这样做

```
namespace Ping\Pong\HongKong;

use Foo\Bar\FooBar;

class B extends FooBar\A {

    function __construct() {
        new A;
    }
} 
```

它会回显`Foo\Bar\FooBar`，这又是非常正确的......

**编辑：**如果您需要在嵌套它的主目录中获取嵌套类的命名空间，只需使用：

```
namespace Ping\Pong\HongKong;

use Foo\Bar\FooBar;

class B extends FooBar\A {

    function __construct() {
        $a = new A;
        echo $a_ns = substr(get_class($a), 0, strrpos(get_class($a), '\\'));
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-30T13:00:53.343

在 PHP 5.5 中，::class 可用，这使事情变得简单了 10 倍。例如 `A::class`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-25T23:35:48.957

使用[反射类](https://www.php.net/manual/en/reflectionclass.getnamespacename.php)。

```
$class_name = get_class($this);

$reflection_class = new \ReflectionClass($class_name);

$namespace = $reflection_class->getNamespaceName(); 
```

# css - 使用 data-uri 的 css 光标

> ID：13932291
> 
> 赞同：14
> 
> 时间：2012-12-18T11:47:38.410
> 
> 标签：css, data-uri, mouse-cursor

我正在尝试使用 data uri 使用自定义 png 光标，但光标没有改变。我已经在支持 png 作为自定义光标的 FF 17 上进行了测试。相同的数据 uri 用作背景图像。

我是否使用了错误的语法或者 data-uri 不能用作光标图像？

示例：http: [//jsfiddle.net/u8t3j/](http://jsfiddle.net/u8t3j/)

```
 <!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>cursor test</title>
<style>
        #cursor {
          width: 300px;
          height: 300px;
          border: 1px solid black;
          cursor: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAJFklEQVR42rWXCXBU9R3Hv+/Ye7PZTbLZJCQBRIej2JHSkStgoS2jWJlBzhpNOKscBR2wIrSlVA4NIGoJMBVBoTOFloKlDGEIV0K4hyvDCBEQAiSQY7PZ7G52913//t4L4WiCoh3ezl5v3/v/Pr/f//s7lsN9h8fjcdpstmcFnq9rjkYrOY6L1NfXq3iMB3f/F7fbnZGamrqtS5cnfnL7dk1JdXV1SSwWKzObTRV1dfW3HjuA3W7J8KZmbFmw/KOcZ7pkYf++Azh69AiruFhxrPpWdVE8Ht9vtVrL/X5/6PEAWO2+5BT3P976YNWg/LEjkCQAtAU4d+4sjh09hrLDhwPnz58vbmxs/JLn+ZKmpqbq/xsgi8uxArxFYXI4yF9JTe7Ab576x2WDeg38OXqlJ8Lnst+9+Nq1azhz5gz27d+vHC4rO3b16tXdpJedDYHAuR8MkMn1d9Fbqsa0UEyo89p9sU/nLFrSt8+QYWiONqN3tg+JdjPYfeGKRCK4fOUKSkpKULRr16Uzp08fjkWjfwuGQvt+CEACA5/GGIvJQtBnTmlc9faihX2GvTwW9cEQBDL9TFYqRF4AQYIyAwLfgqIxhpqa26STY9i+bXvdkSOHT/gb/BtUWf13OBJWHgmgAzcggd58LQCNXlNKYPWs38/rO2JcPmRZQigag8tmRbe0JAOAsXs3kw5whwXNzc2klXPYtGlT8969e8tramoKnU7nVsqk2LcD8P0TwPg7AEGvmOQvnDb37X5jXpsMWZGhqSqisop0twNZngSoqgb2v4tQVHgi0Vk0jeHEiePYuHEjKy0tPUgAK0VRLK6rq2sXhLYgh7YABoAiBlN4d33hlNlv9s+dOBWKqhCAZnguaxo6p7iR7LC2C3EvKgRDQPrvBw8cxOefb2DFxcVrSTfvUda0qSVcFj/IqWmaj5aUCMDDu+oKJ8yanpP/xiyoigJVUw3PZDKqh7yrzwObWSQ47Vv3VhB4475QKIQPP1yJDRvW7wlHIpP89fU3HwDI5gY4VSMCIICmROa8vSpvxhvPTZoxh8Kpkbdyi2fklb4VdjKuQ+hCVDX2UABdK3QLRAKpq/dj+EsvSZe+rnjV39DwzwcjwD3r1GDxgWmyJISczHnrL+Mmjx8ydfa7xt4qinJnn2lReoRjCpIcNoJwG1mgsfYhdMP6cf36daz7bB02b95cVnWzaiyJ9YHixXUU+jpkTUzjGJMlPmTXnLc/eTlv9C9nzv0ThVE0hHj3Yt0zegaaJXRKSkDHFFfbrSBS8U5q7NixA+vXr8ep06fOUvWcEA6Fz7bRQCe+n0NiQhrPoMTRZNZcNStfGPXii7MXLIbFYjNSscU4Z0RA3wrdqD8SQ/f0ZGRQdrRCtKblhYsXsaZwNUpKS0B9Y08gEJhJnle0mwU+5NjNHEvXGKdS1nPMVftBztD+o+ctWYkElwuSAdDqewuGQBCBWNzYjt7ZqUhJsBmLkZcU6i04VFqKyuuVuF55Yx+l38hYPBp8mFa4NOTYBI5l0LoE0Mw4d+3Cp/t0z1+4Yg2SvamQJemesO6D0D9VB8OwWaz4aWYSvqKGtWXrVmRnZyM3N5ckxTBz5szKnTt3jg6Fmk4+FCAT/W2M4wiAYzIicd7TMLdz9/QZC1YUolOXpyDF4w+q+04F0GMS0zjUNoVxdNeXiNZWY9KE8ejxox53+0Z5eTny8vKOkxCH0jY0PQzASgBp5JcpzqIhwR2Y6s2yzV+wfJXQs1dvxOP3Clir71S0YLPZ0Uxw69cWIhgMYuL0tzCwayZIzEZ6tvaMpUuXqgUFBX+g7VnaLkAGBljo2nTeAIgFhcSmXzu8yuJ5i5c5+g8ZSgBRtJY9HUAvTHa7wzi17qMCNIQiGPn6m+ApY5502/AkpWdrpdRT8UJFBcaMGnW6qqpqcHtR0JuRid4zaHGzwqQgczT9zJoc+XjGO/PTho/JRTwWM7xuNe5wOI3FVxcsQmXlDUx6989wJ7ogU+t22S3o2SEFZkGgazUDgMov8vPzbx06dGgkZcTRtmnI9RNl8OlkwKYyNaxagp1FT+CzMfnju74+ey4USW7pghRWZ4KTIiJh9bLFOFi8G7OXrUbPnk/DxasUbh7BqIRMali+RLsBoJ/TS/HkyZP9RUVFE+jzf9oAZKGPoHGirgGHXo7jXKPZ6gut7dG7x+DFn/wVdvJYkWU4nQkI+OuxZsX72LNjGzI6PoGFa77AUx18oKZhiC4iqYhT9+zidcNtMxlFqeLSZbyW+0otCTGXWvTedkTYh+N4kSYiJNJXJcbCUUda83y7m02bMvMdbsSreSQsDV9f+Aprlr+P8lPHYXM4qFGq4rARY/DbOb+jAiRQyZYNATZGZUjkvcdJBYpqyOrlS7Br+9ZL9NPzNNJ9004EBujwSZRRyRQFTWJSBI7AwJRsodDudKb8atQ4WEnxO7f+HTW3bsLEO8oDtbG19kRhuMmqPf+LF4bjlYlTkOpLgyiajC4UpiJ15epV/OuL9ThZdgA02n9K8+Nv2s0C/SWL6+eiZptqpBn1lxgaeUeaND0hWciPxpo9+nmT2eJXouLuULXwsSoJ3zBTuJsnk3+PM8mDU7w+dOvxY3gJQqHuWV9Tg0sUsQa/HxzPH6utrc1raGi49FAAmgttpPM0vXvCCLiqxVmTYEqUBjvc4lAaMdRoI3ZJQUuxCTYmcLyTaobevn2udEyjSAyT5bi3pQfrT54ywHJTlpWiSCRcQKP95YdWQv0lFQNFE6+mUzW00Ql98tRVT6WZchCKlUqKxMEcMcHkIQN6nDX9VpUaaBwhkylBGWBN4PuYzBwNt6TDqHBDFkO7q6orD+A7jrt/TDK5vh4G0Xun6rCWCU8fArQw9cAAOUW+MS9NKVaqcrqvxjU0D9DEIMUYZJGusNF8SedFfy1OBr7L+AMAejoyTkwiI/r/BOq6TNEYHxHABW+wQ0ZD6MDrf2JYCjG2tD8j5i2jF/TZxCjSkEwQ/JUojX0vABjlcABHPckmMt6kUEJwjI9Xs7IHJg7Si4nucpP/DjImoLVXUwsg6AhjYqjqEY23AXjUI417jqd4m8BkC8czXtN4KgKQSb7yTRxh32et/wJPSoRd6oGs9QAAAABJRU5ErkJggg==);
        }

        #background {
          width: 300px;
          height: 300px;
          border: 1px solid black;
          margin-top: 10px;
          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAJFklEQVR42rWXCXBU9R3Hv+/Ye7PZTbLZJCQBRIej2JHSkStgoS2jWJlBzhpNOKscBR2wIrSlVA4NIGoJMBVBoTOFloKlDGEIV0K4hyvDCBEQAiSQY7PZ7G52913//t4L4WiCoh3ezl5v3/v/Pr/f//s7lsN9h8fjcdpstmcFnq9rjkYrOY6L1NfXq3iMB3f/F7fbnZGamrqtS5cnfnL7dk1JdXV1SSwWKzObTRV1dfW3HjuA3W7J8KZmbFmw/KOcZ7pkYf++Azh69AiruFhxrPpWdVE8Ht9vtVrL/X5/6PEAWO2+5BT3P976YNWg/LEjkCQAtAU4d+4sjh09hrLDhwPnz58vbmxs/JLn+ZKmpqbq/xsgi8uxArxFYXI4yF9JTe7Ab576x2WDeg38OXqlJ8Lnst+9+Nq1azhz5gz27d+vHC4rO3b16tXdpJedDYHAuR8MkMn1d9Fbqsa0UEyo89p9sU/nLFrSt8+QYWiONqN3tg+JdjPYfeGKRCK4fOUKSkpKULRr16Uzp08fjkWjfwuGQvt+CEACA5/GGIvJQtBnTmlc9faihX2GvTwW9cEQBDL9TFYqRF4AQYIyAwLfgqIxhpqa26STY9i+bXvdkSOHT/gb/BtUWf13OBJWHgmgAzcggd58LQCNXlNKYPWs38/rO2JcPmRZQigag8tmRbe0JAOAsXs3kw5whwXNzc2klXPYtGlT8969e8tramoKnU7nVsqk2LcD8P0TwPg7AEGvmOQvnDb37X5jXpsMWZGhqSqisop0twNZngSoqgb2v4tQVHgi0Vk0jeHEiePYuHEjKy0tPUgAK0VRLK6rq2sXhLYgh7YABoAiBlN4d33hlNlv9s+dOBWKqhCAZnguaxo6p7iR7LC2C3EvKgRDQPrvBw8cxOefb2DFxcVrSTfvUda0qSVcFj/IqWmaj5aUCMDDu+oKJ8yanpP/xiyoigJVUw3PZDKqh7yrzwObWSQ47Vv3VhB4475QKIQPP1yJDRvW7wlHIpP89fU3HwDI5gY4VSMCIICmROa8vSpvxhvPTZoxh8Kpkbdyi2fklb4VdjKuQ+hCVDX2UABdK3QLRAKpq/dj+EsvSZe+rnjV39DwzwcjwD3r1GDxgWmyJISczHnrL+Mmjx8ydfa7xt4qinJnn2lReoRjCpIcNoJwG1mgsfYhdMP6cf36daz7bB02b95cVnWzaiyJ9YHixXUU+jpkTUzjGJMlPmTXnLc/eTlv9C9nzv0ThVE0hHj3Yt0zegaaJXRKSkDHFFfbrSBS8U5q7NixA+vXr8ep06fOUvWcEA6Fz7bRQCe+n0NiQhrPoMTRZNZcNStfGPXii7MXLIbFYjNSscU4Z0RA3wrdqD8SQ/f0ZGRQdrRCtKblhYsXsaZwNUpKS0B9Y08gEJhJnle0mwU+5NjNHEvXGKdS1nPMVftBztD+o+ctWYkElwuSAdDqewuGQBCBWNzYjt7ZqUhJsBmLkZcU6i04VFqKyuuVuF55Yx+l38hYPBp8mFa4NOTYBI5l0LoE0Mw4d+3Cp/t0z1+4Yg2SvamQJemesO6D0D9VB8OwWaz4aWYSvqKGtWXrVmRnZyM3N5ckxTBz5szKnTt3jg6Fmk4+FCAT/W2M4wiAYzIicd7TMLdz9/QZC1YUolOXpyDF4w+q+04F0GMS0zjUNoVxdNeXiNZWY9KE8ejxox53+0Z5eTny8vKOkxCH0jY0PQzASgBp5JcpzqIhwR2Y6s2yzV+wfJXQs1dvxOP3Clir71S0YLPZ0Uxw69cWIhgMYuL0tzCwayZIzEZ6tvaMpUuXqgUFBX+g7VnaLkAGBljo2nTeAIgFhcSmXzu8yuJ5i5c5+g8ZSgBRtJY9HUAvTHa7wzi17qMCNIQiGPn6m+ApY5502/AkpWdrpdRT8UJFBcaMGnW6qqpqcHtR0JuRid4zaHGzwqQgczT9zJoc+XjGO/PTho/JRTwWM7xuNe5wOI3FVxcsQmXlDUx6989wJ7ogU+t22S3o2SEFZkGgazUDgMov8vPzbx06dGgkZcTRtmnI9RNl8OlkwKYyNaxagp1FT+CzMfnju74+ey4USW7pghRWZ4KTIiJh9bLFOFi8G7OXrUbPnk/DxasUbh7BqIRMali+RLsBoJ/TS/HkyZP9RUVFE+jzf9oAZKGPoHGirgGHXo7jXKPZ6gut7dG7x+DFn/wVdvJYkWU4nQkI+OuxZsX72LNjGzI6PoGFa77AUx18oKZhiC4iqYhT9+zidcNtMxlFqeLSZbyW+0otCTGXWvTedkTYh+N4kSYiJNJXJcbCUUda83y7m02bMvMdbsSreSQsDV9f+Aprlr+P8lPHYXM4qFGq4rARY/DbOb+jAiRQyZYNATZGZUjkvcdJBYpqyOrlS7Br+9ZL9NPzNNJ9004EBujwSZRRyRQFTWJSBI7AwJRsodDudKb8atQ4WEnxO7f+HTW3bsLEO8oDtbG19kRhuMmqPf+LF4bjlYlTkOpLgyiajC4UpiJ15epV/OuL9ThZdgA02n9K8+Nv2s0C/SWL6+eiZptqpBn1lxgaeUeaND0hWciPxpo9+nmT2eJXouLuULXwsSoJ3zBTuJsnk3+PM8mDU7w+dOvxY3gJQqHuWV9Tg0sUsQa/HxzPH6utrc1raGi49FAAmgttpPM0vXvCCLiqxVmTYEqUBjvc4lAaMdRoI3ZJQUuxCTYmcLyTaobevn2udEyjSAyT5bi3pQfrT54ywHJTlpWiSCRcQKP95YdWQv0lFQNFE6+mUzW00Ql98tRVT6WZchCKlUqKxMEcMcHkIQN6nDX9VpUaaBwhkylBGWBN4PuYzBwNt6TDqHBDFkO7q6orD+A7jrt/TDK5vh4G0Xun6rCWCU8fArQw9cAAOUW+MS9NKVaqcrqvxjU0D9DEIMUYZJGusNF8SedFfy1OBr7L+AMAejoyTkwiI/r/BOq6TNEYHxHABW+wQ0ZD6MDrf2JYCjG2tD8j5i2jF/TZxCjSkEwQ/JUojX0vABjlcABHPckmMt6kUEJwjI9Xs7IHJg7Si4nucpP/DjImoLVXUwsg6AhjYqjqEY23AXjUI417jqd4m8BkC8czXtN4KgKQSb7yTRxh32et/wJPSoRd6oGs9QAAAABJRU5ErkJggg==);
        }
</style>
</head>
<body>
  <div id="cursor"></div>
  <div id="background"></div>
</body>
</html> 
```

答案适用于 FF 和 Chrome 中的 png，所以我添加了一个在 IE 中不起作用的 .cur 图像示例

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>cursor test</title>
<style>
        #cursor {
          width: 300px;
          height: 300px;
          border: 1px solid black;
          cursor: url(data:application/cur;base64,AAACAAEAICAAAAAAAACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAgBAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPwEYAkABHAc7ABwOOgIdEDwAGws8ARsGOgAcAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADsBGgE6AhkKPAEdDzoCGQk8ARoCAAAAAAAAAAAAAAAAAAAAADoBHAU6AhwVOwEcIDsBGyM7ARskOwEbIzsAGyA6ARwVPgAbCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3AB0DOwEcFToBGyM7ARslOgIcITwBGhY9AR0HAAAAAAAAAAA8AhsIOwIbHDsBGyU7ARslOgEbJDwBGyQ8ARwkPAAcIjsAGyE7ABobPgAfCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgBHBE8ARsmOwEbJjsBGyU8ARwlPQEcJTsAHBk9ABsIPQIcCTwCGx46ABsmOwEcJTsBGyQ8ARwkOwAaIDUAFhgwABUcLwEVJTEAFSQ1ABYRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9ABYEOgIbHTsBGyY7ARwkPAIcJDsAGyEzABUZLwAVITIAFhs4ABcQPQAcITwBHCY7ARwkPAEcJDcAGR4qABIjJg0XXigaH5UpICStKR8jpiwWIIkfGhtBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoBHAk7ARshOwEcJTwBHCQ5ARoiKwATJSUPGGYpHyOsKx8kqSsPG18yABUaOwAaGT0BHSU0ABYfJgQSNiYdIKAkJSXqHSAg/xwfIP8bICD/HSEg/yQkJOMgHx+aFBQUJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOQEdDjsBGyQ8ARwkPAAbIiwAEyQmGB6PKSsr7h8jIv8gIyP/Jyko7CsgJKQuBhc1MQAUEyUFEzsnISS+IiYl/zk7Of9nZWH/f3x2/3p5cv9jYl7/OTk5/yYmJ/8oKCjHEhISJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADsAHQE7AB0TOwEbJjwBHCQ2ABYZJQsWVigpKus0NTT/jImA/5aSiP89Pjz/ISUl/ywnKtEkERlpJyAjtyUoKP9zcWz/2NPG//Dq3P/17uD/9O3g/+3l1P/MxLH/amVe/ykpKf8hISGaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANwAcATsCHRc7ARsmPAEbIjAAExkmGB6UJSgo/pyWjf/68t7/+PHf/87Iuf9WVFD/HyEi/yosK/snKCj/fXly//Pt3//27+H/8evd//Dq3v/r4c7/6d/I//Tr2f/u5tX/dHJr/yAhIdogICAiAAAAAAAAAAAAAAAAAAAAAAAAAAA3AB0DOwEbGzwBHCY8ABsgLAEUJh8YHL5JS0b/493L/+/o1f/q49H/9+/d/+PczP9raWP/GRsd/zs6N//c0bj/8+zd/+/p3f/v6d7/7OPT/+ngzP/59e///v7////////b2tj/NTU16RcXF0QAAAAAAAAAAAAAAAAAAAAAAAAAADkBIAQ7ARsdPAEcJjkAGRoqBxY7GRga2Hl3cP/x6tf/7OTT/+rj0f/p4dD/9e7c/+/n1f90cmv/LC0r/8K4nv/v5Mr/7ObY/+7o2//o38z/9fDo///////9/fz///////Ly8v9WVlbsDQ0NTQAAAAAAAAAAAAAAAAAAAAAAAAAAOwEbBTsBGx88ARwlNgAYFigLF1YdHh/nmJWL//Pr2f/r49L/6uPR/+vj0v/o4c//9Oza//Ts2f94dm//W1dQ/93Qs//r38P/4da+/+jgzP/8+/j///7+//38+///////8fHx/1BQUOYTExM5AAAAAAAAAAAAAAAAAAAAAAAAAAA7ABoHOwEbIDwBHSU0ABYWJg8ZbyIkJPStqZ7/8+vY/+rk0f/q49H/6uPR/+vj0v/o4c//8+vZ//Pr2P99e3T/cm5i/+LVtf/m2Lf/7+jb///////9/Pz//fz7///////Y2Nb/LCwszREREQ4AAAAAAAAAAAAAAAAAAAAAAAAAADoAHAg7ARsgPAEcJTMAFRgiEBiBKy0t/L+5rP/y6tj/6uPR/+rj0f/q49H/6+PS/+rj0f/p4tD/8+vZ/+zkz/+BfG3/cm1e/+PYwP////3//v7+//38+//+/fz//////4aGhvwQEBB5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgAcCTsBGyM8ABsiMQAWGx8RGJM4Ojn/zce4//Lq2P/r49L/6+PS/+vj0v/r49L/6uPR/+rj0f/q49L/6+HK/9/TtP+PiXv/dXNy/9XU1f/////////+///////R0dH/Ly8vyBEREQ4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8ABgJOwEbIzsAGyAxABUfGxAWoERHQ//b1MT/8enX/+vj0v/r49L/6+PS/+rj0f/r49H/6uPS/+rj0f/e1Lf/5tvA//j39P/IyMr/dHRz/5KSkf/t7ez/7Ovr/1pZWeAODQ01AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwAFwo7AR0jPAAbIC8AFSEZDhSqU1RQ/+Layv/w6Nf/6uPR/+vj0f/q49H/6+PR/+rj0v/r5NX/5NzE/+DUuP/28uv////////////v7+//mJeX/1pZWv87Ozv/HhwdvAkHCA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOQIgCzwBGiM8ABwfLgAVJRcOE7RiYlz/5+HP//Do1v/q49H/6uPR/+vj0v/q49H/6+TT/+nhz//h1rz/9O/l///////9/Pv//fz7///+/f//////19fW/21sbf8uLi7/GxsbuQoKCicAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4Ax8LPAEaIzsAGx4uAhUoFg4TumtsZf/r5NP/7+fW/+rj0f/q49H/6uPR/+rj0v/q49H/5NnA//Hr4P///////fz7//38+//9/Pv//fz7//79+////////////7Gxsf9PT0//HB0czwwNDDAAAAAAAAAAAAAAAAAAAAAAAAAAADYBHQw9ARsjOwAbHi4DFSoVDxS9dXNs/+7m1f/v59b/6+PS/+vj0v/r5NP/6uTS/+bcxv/v59j///7///79/f/9/Pv//fz7//38+//9/Pv//fz7//38+////////////+Hh4f99fn3/JSYlwwoKChoAAAAAAAAAAAAAAAAAAAAAOwEeDDsBGyM7ABodLQQWLBUQFcB9fHP/8ejW/+/m1P/q49H/6uPR/+vk0//o38r/7OXU//38+//+/v7//fz7//38+//9/Pv//fz7//38+//9/Pv//fz7//37+v/9/Pv//////+zr6v85ODj5EhITVQAAAAAAAAAAAAAAAAAAAAA+Ah0MPAAbIzsAGR0sBBUuFxIXw4KBeP/x6df/7eXU/+rj0f/q49L/6ODN/+riz//7+fb///////38+//9/Pv//fz7//38+//9/Pv//fz7//38+//9/Pv////+///////y8vL/gYCA/x8fH7kUFBMcAAAAAAAAAAAAAAAAAAAAADwBHA08ARskOwAaHCwEFjAYFBjFiId9//Hp2P/t5tT/6+PS/+ni0P/n4Mv/9/Ts///////9/Pz//fz7//38+//9/Pv//fz7//38+//9/Pv//v79//////////7/v76+/15eXv4ZGRmWDg4OGQAAAAAAAAAAAAAAAAAAAAAAAAAAOgIbDTwBGyQ7ABocLAMVMRkVGcaOjYP/8urZ/+3m1P/q49L/597J//Lu4v///////fz8//38+//9/Pv//fz7//38+//+/fz////+///////+/f3/x8fH/2lpaf4rKyu+ERERTRUVFQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7ARsNPAEbJDsAGhwrAxUxGhcax5STif/z69r/7ebV/+XdyP/t5tb///7+//39/P/9/Pv//fz7//38+////v3////////////19fX/xsbG/2lpafUlJSXHDg4OXBoaGggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADoBHA08ARslOwAaHSwDFTQcFxvInZuQ//Tt2v/n3sb/5t7J//z7+f///f3//fz7//79/P////////////7+/f/m5+b/rq6t/11cXOoiIiK0DxAPUwwLDAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOgEcDjsBHCQ5ABoXJAMSLBwaHMeinpD/7ODH/+LXvf/59fD//////////v////////////T09P/R0dD/kpKR/0hISNoWFhefDQ0PQwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AR0IPgEdDzkAGQMWAgoZGB0dwaObhv/m2Lf/9fHo/////////////////9/f3/+urq7/bGxr+zAwMMMPDw97ERESLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoIChcaHB3BrqWO///87f//////6+vr/7u8vP+Dg4T/SEhI7hwcHKkMDAxZDg4OGgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwoKGiEgH8OxrJ7/zs/O/42MjP9TU1P+LCssxhISEn0LCws7ExMTDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAaJiYmyEhJSfoxMTG7FxcXfA8PD0AUFRUZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEREQwaGhpCHBwdLRMTEw4UFBQDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//gP/+DwB//AYAP/wAAD/4AAAf+AAAB/gAAAPwAAAD8AAAAfAAAAHwAAAB8AAAAfAAAAHwAAAD8AAAA/AAAAfwAAAH8AAAA/AAAAHwAAAA8AAAAPAAAADwAAAB8AAAA/AAAA/wAAA/8AAB//AAB//+AB///gB///4D///+D///8=), pointer;
        }

        #background {
          width: 300px;
          height: 300px;
          border: 1px solid black;
          margin-top: 10px;
          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAJFklEQVR42rWXCXBU9R3Hv+/Ye7PZTbLZJCQBRIej2JHSkStgoS2jWJlBzhpNOKscBR2wIrSlVA4NIGoJMBVBoTOFloKlDGEIV0K4hyvDCBEQAiSQY7PZ7G52913//t4L4WiCoh3ezl5v3/v/Pr/f//s7lsN9h8fjcdpstmcFnq9rjkYrOY6L1NfXq3iMB3f/F7fbnZGamrqtS5cnfnL7dk1JdXV1SSwWKzObTRV1dfW3HjuA3W7J8KZmbFmw/KOcZ7pkYf++Azh69AiruFhxrPpWdVE8Ht9vtVrL/X5/6PEAWO2+5BT3P976YNWg/LEjkCQAtAU4d+4sjh09hrLDhwPnz58vbmxs/JLn+ZKmpqbq/xsgi8uxArxFYXI4yF9JTe7Ab576x2WDeg38OXqlJ8Lnst+9+Nq1azhz5gz27d+vHC4rO3b16tXdpJedDYHAuR8MkMn1d9Fbqsa0UEyo89p9sU/nLFrSt8+QYWiONqN3tg+JdjPYfeGKRCK4fOUKSkpKULRr16Uzp08fjkWjfwuGQvt+CEACA5/GGIvJQtBnTmlc9faihX2GvTwW9cEQBDL9TFYqRF4AQYIyAwLfgqIxhpqa26STY9i+bXvdkSOHT/gb/BtUWf13OBJWHgmgAzcggd58LQCNXlNKYPWs38/rO2JcPmRZQigag8tmRbe0JAOAsXs3kw5whwXNzc2klXPYtGlT8969e8tramoKnU7nVsqk2LcD8P0TwPg7AEGvmOQvnDb37X5jXpsMWZGhqSqisop0twNZngSoqgb2v4tQVHgi0Vk0jeHEiePYuHEjKy0tPUgAK0VRLK6rq2sXhLYgh7YABoAiBlN4d33hlNlv9s+dOBWKqhCAZnguaxo6p7iR7LC2C3EvKgRDQPrvBw8cxOefb2DFxcVrSTfvUda0qSVcFj/IqWmaj5aUCMDDu+oKJ8yanpP/xiyoigJVUw3PZDKqh7yrzwObWSQ47Vv3VhB4475QKIQPP1yJDRvW7wlHIpP89fU3HwDI5gY4VSMCIICmROa8vSpvxhvPTZoxh8Kpkbdyi2fklb4VdjKuQ+hCVDX2UABdK3QLRAKpq/dj+EsvSZe+rnjV39DwzwcjwD3r1GDxgWmyJISczHnrL+Mmjx8ydfa7xt4qinJnn2lReoRjCpIcNoJwG1mgsfYhdMP6cf36daz7bB02b95cVnWzaiyJ9YHixXUU+jpkTUzjGJMlPmTXnLc/eTlv9C9nzv0ThVE0hHj3Yt0zegaaJXRKSkDHFFfbrSBS8U5q7NixA+vXr8ep06fOUvWcEA6Fz7bRQCe+n0NiQhrPoMTRZNZcNStfGPXii7MXLIbFYjNSscU4Z0RA3wrdqD8SQ/f0ZGRQdrRCtKblhYsXsaZwNUpKS0B9Y08gEJhJnle0mwU+5NjNHEvXGKdS1nPMVftBztD+o+ctWYkElwuSAdDqewuGQBCBWNzYjt7ZqUhJsBmLkZcU6i04VFqKyuuVuF55Yx+l38hYPBp8mFa4NOTYBI5l0LoE0Mw4d+3Cp/t0z1+4Yg2SvamQJemesO6D0D9VB8OwWaz4aWYSvqKGtWXrVmRnZyM3N5ckxTBz5szKnTt3jg6Fmk4+FCAT/W2M4wiAYzIicd7TMLdz9/QZC1YUolOXpyDF4w+q+04F0GMS0zjUNoVxdNeXiNZWY9KE8ejxox53+0Z5eTny8vKOkxCH0jY0PQzASgBp5JcpzqIhwR2Y6s2yzV+wfJXQs1dvxOP3Clir71S0YLPZ0Uxw69cWIhgMYuL0tzCwayZIzEZ6tvaMpUuXqgUFBX+g7VnaLkAGBljo2nTeAIgFhcSmXzu8yuJ5i5c5+g8ZSgBRtJY9HUAvTHa7wzi17qMCNIQiGPn6m+ApY5502/AkpWdrpdRT8UJFBcaMGnW6qqpqcHtR0JuRid4zaHGzwqQgczT9zJoc+XjGO/PTho/JRTwWM7xuNe5wOI3FVxcsQmXlDUx6989wJ7ogU+t22S3o2SEFZkGgazUDgMov8vPzbx06dGgkZcTRtmnI9RNl8OlkwKYyNaxagp1FT+CzMfnju74+ey4USW7pghRWZ4KTIiJh9bLFOFi8G7OXrUbPnk/DxasUbh7BqIRMali+RLsBoJ/TS/HkyZP9RUVFE+jzf9oAZKGPoHGirgGHXo7jXKPZ6gut7dG7x+DFn/wVdvJYkWU4nQkI+OuxZsX72LNjGzI6PoGFa77AUx18oKZhiC4iqYhT9+zidcNtMxlFqeLSZbyW+0otCTGXWvTedkTYh+N4kSYiJNJXJcbCUUda83y7m02bMvMdbsSreSQsDV9f+Aprlr+P8lPHYXM4qFGq4rARY/DbOb+jAiRQyZYNATZGZUjkvcdJBYpqyOrlS7Br+9ZL9NPzNNJ9004EBujwSZRRyRQFTWJSBI7AwJRsodDudKb8atQ4WEnxO7f+HTW3bsLEO8oDtbG19kRhuMmqPf+LF4bjlYlTkOpLgyiajC4UpiJ15epV/OuL9ThZdgA02n9K8+Nv2s0C/SWL6+eiZptqpBn1lxgaeUeaND0hWciPxpo9+nmT2eJXouLuULXwsSoJ3zBTuJsnk3+PM8mDU7w+dOvxY3gJQqHuWV9Tg0sUsQa/HxzPH6utrc1raGi49FAAmgttpPM0vXvCCLiqxVmTYEqUBjvc4lAaMdRoI3ZJQUuxCTYmcLyTaobevn2udEyjSAyT5bi3pQfrT54ywHJTlpWiSCRcQKP95YdWQv0lFQNFE6+mUzW00Ql98tRVT6WZchCKlUqKxMEcMcHkIQN6nDX9VpUaaBwhkylBGWBN4PuYzBwNt6TDqHBDFkO7q6orD+A7jrt/TDK5vh4G0Xun6rCWCU8fArQw9cAAOUW+MS9NKVaqcrqvxjU0D9DEIMUYZJGusNF8SedFfy1OBr7L+AMAejoyTkwiI/r/BOq6TNEYHxHABW+wQ0ZD6MDrf2JYCjG2tD8j5i2jF/TZxCjSkEwQ/JUojX0vABjlcABHPckmMt6kUEJwjI9Xs7IHJg7Si4nucpP/DjImoLVXUwsg6AhjYqjqEY23AXjUI417jqd4m8BkC8czXtN4KgKQSb7yTRxh32et/wJPSoRd6oGs9QAAAABJRU5ErkJggg==);
        }
</style>
</head>
<body>
  <div id="cursor"></div>
  <div id="background"></div>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T11:55:08.497

`, auto`在您的数据网址之后添加，如下所示：

```
cursor: url(data:image/png;base64,...), auto; 
```

不知道为什么这可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-08T16:01:46.480

IE 不支持光标数据 uri。IE 也不支持 PNG 作为光标。因此，对于这种情况，我能得到的最佳后备方案如下：（在 IE、Edge、Chrome、FF、Safari 上测试

```
style.cssText += ";cursor:url('cursors/" + file + ".cur'), auto;"; // For IE
style.cssText += ";cursor:url('cursors/" + file + ".cur') 16 16, auto;"; // For other browsers - this will do nothing in IE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T09:44:56.213

您应该将回退设置为自动而不是默认值。默认值回退到浏览器默认值，其中 auto 确定应根据上下文显示哪个光标（来源） – My Head Hurts 2012-12-18 12:02

# python - 使用复杂的 if 语句来处理数组？Python

> ID：13932292
> 
> 赞同：2
> 
> 时间：2012-12-18T11:47:40.177
> 
> 标签：python, arrays, if-statement, numpy, function

我想做这样的事情：

```
def fun(a,b,c):
    if (a<b**2) & (a<b*c):
        result = a/math.pi
    elif (a<b**2) & (a>=b*c):
        result = b*2/math.pi
    elif (a>=b**2) & (a<b*c):
        result = c*exp(1)
    elif (a>=b**2) & (a>=b*c):
        result = a*b*c*math.pi
    return result, 
```

但是我将如何让它与一个 numpy 数组一起工作呢？数组将是 a、b 和 c 将是单个数字。

我知道 numpy.where 但我只是不知道如何让它像这段代码一样执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:05:32.790

您可以嵌套几个[`np.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)，并且广播应该负责将数组和数字顺利混合：

```
result = np.where((a < b**2) & (a < b * c), a / np.pi,
                  np.where((a < b**2) & (a >= b * c), b * 2 / np.pi,
                           np.where((a >= b**2) & (a < b*c), c * np.exp(1),
                                    a * b * c * np.pi))) 
```

例如：

```
>>> a = np.arange(12).reshape(3,4)
>>> a
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
>>> b = 1
>>> c = 2
>>> np.where((a < b**2) & (a < b * c), a / np.pi,
             np.where((a < b**2) & (a >= b * c), b * 2 / np.pi,
                      np.where((a >= b**2) & (a < b*c), c * np.exp(1),
                               a * b * c * np.pi)))
array([[  0\.        ,   5.43656366,  12.56637061,  18.84955592],
       [ 25.13274123,  31.41592654,  37.69911184,  43.98229715],
       [ 50.26548246,  56.54866776,  62.83185307,  69.11503838]]) 
```

# c++ - 检查是否在二进制文件中使用了 boost

> ID：13932299
> 
> 赞同：0
> 
> 时间：2012-12-18T11:47:58.273
> 
> 标签：c++, boost, dylib

我在为 osx 上文档记录不佳的应用程序编写插件作为 dylib 时遇到问题，我想知道这是否是因为我的 .dylib 和应用程序中使用的 boost 库不匹配。有谁知道有什么方法可以检查是否使用了 boost，如果是，是什么版本？

我知道这是一个远射

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:47:21.050

尝试

```
$ nm some.dylib | grep boost 
```

但我怀疑你会找到一个确切的版本......

# r - 将多个条件应用于数据框的不同列

> ID：13932308
> 
> 赞同：0
> 
> 时间：2012-12-18T11:48:27.213
> 
> 标签：r

我有以下数据框：

```
id1 id2 qtty    cat output
15994   15994   30  1   1
25787   26275   7   2   1
122301  122301  0   0   0
36199   35333   14  2   1
36199   36199   15  1   1
46223   45746   14  2   1
46223   46223   15  1   1
80570   80570   0   0   0
55728   55728   1   1   1
94218   94218   0   0   0
69456   66837   5   2   1 
```

`cat`我要根据以下条件生成的列在哪里：

```
id1=id2 and qtty=0 then cat=0
id1=id2 and qtty>0 then cat=1
id1!=id2 and qtty=0 then cat=2
id1!=id2 and qtty>0 then cat=2 
```

`output`是我得到的，我所做的是：

```
 status<-function(dataframe){
  store<-rep(0,length(dataframe[,1]))
  for(i in 1: length(dataframe[,1])) {
    if(dataframe[i,1]==dataframe[i,2]) {
      if(dataframe[i,3]==0) {store[i]<-0}
        else
          if(dataframe[i,1]==dataframe[i,2]) {
            if(dataframe[i,3]>0) {store[i]<-1}
              else
                if(dataframe[i,1]!=dataframe[i,2]) {
                  if(dataframe[i,3]>0) {store[i]<-2}
                    else store[i]<-2
               }
            }
         }
     }
  return(store)
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:54:53.653

这可以通过`ifelse`：（假设`dat`是您的数据框）来完成

```
within(dat, cat <- ifelse(id1 != id2, 2, qtty > 0)) 
```

结果：

```
 id1    id2 qtty cat output
1   15994  15994   30   1      1
2   25787  26275    7   2      1
3  122301 122301    0   0      0
4   36199  35333   14   2      1
5   36199  36199   15   1      1
6   46223  45746   14   2      1
7   46223  46223   15   1      1
8   80570  80570    0   0      0
9   55728  55728    1   1      1
10  94218  94218    0   0      0
11  69456  66837    5   2      1 
```

*这个怎么运作：*

该函数`ifelse`检查`id1`和`id2`是否相同。如果是这种情况，则将该值`2`分配给 中的相应条目`cat`。如果它们不相同，`qtty > 0`则分配结果。后者返回一个布尔值 ( `FALSE`and `TRUE`) 的逻辑向量，这些值被转换为整数 ( `0`and `1`)。

# c# - 使用字符串函数时，应用程序在 64 位 DllImport 上崩溃

> ID：13932309
> 
> 赞同：2
> 
> 时间：2012-12-18T11:48:31.880
> 
> 标签：c#, string, dllimport

我有一个在 .NET 4.0 下运行的 Windows 窗体应用程序。此应用程序导入一个 DLL，可用于：

*   32 位
*   64 位

这是我的代码片段：

```
[DllImport("my64Bit.dll"), EntryPoint="GetLastErrorText"]
private static extern string GetLastErrorText();

// Do some stuff...

string message = GetLastErrorText(); 
```

调用此函数（针对 x64 编译）时，应用程序会崩溃。我什至在 Visual Studio 2012 中都看不到任何调试消息。与 32 位 DLL（为 x86 编译）相同的代码工作正常。原型是：

`LPCSTR APIENTRY GetLastErrorText()`

不幸的是，我没有关于 DLL 的任何进一步信息，因为它是第三方产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T14:01:59.673

函数签名相当麻烦。您的代码是否会崩溃取决于您运行的操作系统。XP 上没有任何反应，Vista 及更高版本会引发 AccessViolation 异常。

问题在于返回字符串的 C 函数通常需要通过返回指向存储字符串的缓冲区的指针来实现。该缓冲区需要从堆中分配，调用者需要在使用字符串后释放该缓冲区。pinvoke marshaller 实现了该契约，它在将返回的字符串指针转换为 System.String 后调用 CoTaskMemFree()。

结果总是很糟糕，C 函数几乎从不使用 CoTaskMemAlloc() 来分配缓冲区。XP 堆管理器非常宽容，它只是忽略了错误的指针。不是更高版本的 Windows，它们故意生成异常。顺便说一句，“Vista 糟透了”标签的强大推动力，程序员花了一段时间来修复他们的指针错误。如果您启用了非托管调试，那么您将从堆管理器获得诊断，警告指针无效。非常好的功能，但是当您调试托管代码时，非托管调试总是被禁用。

您可以通过将返回值声明为 IntPtr 来阻止 pinvoke 编组器尝试释放字符串。然后，您必须自己使用 Marshal.PtrToStringAnsi() 或其朋友之一来编组字符串。

您仍然有必须释放字符串缓冲区的问题。没有办法可靠地做到这一点，你不能调用正确的释放器。您唯一的希望是 C 函数实际上返回一个指向字符串文字的指针，该指针存储在数据段中并且不应该*被*释放。这可能适用于返回错误字符串的函数，只要它没有实现任何像本地化这样的花哨的东西。const char* 返回类型令人鼓舞。

您需要对此进行测试，以确保不释放字符串缓冲区不会导致内存泄漏。很容易做到，在循环中调用这个函数十亿次。如果您没有将 IntPtr.Zero 作为返回值，并且程序不会因内存不足异常而崩溃，那么您很好。对于 64 位 pinvoke，您需要密切关注测试程序的内存消耗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:43:47.517

找到了。本机函数返回`LPCSTR`，即 C# 函数不能返回字符串。相反，`IntPtr`必须像这样返回：

```
[DllImport("my64Bit.dll"), EntryPoint="GetLastErrorText"]
private static extern IntPtr GetLastErrorText();

// Do some stuff...

IntPtr ptr = GetLastErrorText();
string s = Marshal.PtrToStringAnsi(ptr); 
```

# sql - SQL查询从同一张表中选择不同时期的数据

> ID：13932317
> 
> 赞同：-2
> 
> 时间：2012-12-18T11:49:10.643
> 
> 标签：sql, oracle, oracle11g, plsqldeveloper

我想在 2012 年的各个月份为我的员工获取个人工资。这是代码。

```
SELECT 
jd.job_grade,
e.employee_title||'. '|| e.first_name||' '||e.initials||' '||e.surname as FULLNAME,
e.employee_code,
sum(NVL(jan.amount,0)) as JAN_PAY,
sum(NVL(feb.amount,0)) as FEB_PAY,
sum(NVL(mar.amount,0)) as MAR_PAY,
sum(NVL(apr.amount,0)) as APR_PAY,
sum(NVL(may.amount,0)) as MAY_PAY,
sum(NVL(jun.amount,0)) as JUN_PAY,
sum(NVL(jul.amount,0)) as JUL_PAY,
sum(NVL(aug.amount,0)) as AUG_PAY,
sum(NVL(sep.amount,0)) as SEP_PAY,
sum(NVL(oct.amount,0)) as OCT_PAY,
sum(NVL(nov.amount,0)) as NOV_PAY,
sum(NVL(ar.amount,0)) as DEC_PAY/*,
0.05*sum(NVL(ar.amount,0)) as Bonus*/ 
from (((((((((((((tbl_actual_run ar
JOIN tbl_actual_run JAN ON jan.emp_code=ar.emp_code)
JOIN tbl_actual_run FEB ON feb.emp_code=ar.emp_code)
JOIN tbl_actual_run MAR ON mar.emp_code=ar.emp_code)
JOIN tbl_actual_run APR ON apr.emp_code=ar.emp_code)
JOIN tbl_actual_run MAY ON may.emp_code=ar.emp_code)
JOIN tbl_actual_run JUN ON jun.emp_code=ar.emp_code) 
JOIN tbl_actual_run JUL ON jul.emp_code=ar.emp_code)
JOIN tbl_actual_run AUG ON aug.emp_code=ar.emp_code)
JOIN tbl_actual_run SEP ON sep.emp_code=ar.emp_code)
JOIN tbl_actual_run OCT ON oct.emp_code=ar.emp_code)
JOIN tbl_actual_run NOV ON nov.emp_code=ar.emp_code) 
JOIN TBL_EMPLOYEE E ON E.EMPLOYEE_CODE=ar.emp_code) 
JOIN tbl_job_details jd ON jd.employee_code=ar.emp_code) 
where (ar.payroll_date LIKE '%DEC-12%' and ar.ed_code in ('0001','0011','0012','0003')) 
and  (nov.Payroll_Date LIKE'%NOV-12%'and nov.ed_code in ('0001','0011','0012','0003'))
and (oct.Payroll_Date LIKE'%OCT-12%' and oct.ed_code in ('0001','0011','0012','0003'))
and (sep.Payroll_Date LIKE'%SEP-12%' and oct.ed_code in ('0001','0011','0012','0003'))
and (aug.Payroll_Date LIKE'%AUG-12%' and aug.ed_code in ('0001','0011','0012','0003'))
and (jul.Payroll_Date LIKE'%JUL-12%' and jul.ed_code in ('0001','0011','0012','0003'))
and (jun.Payroll_Date LIKE'%JUN-12%' and jun.ed_code in ('0001','0011','0012','0003'))
and (may.Payroll_Date LIKE'%MAY-12%' and may.ed_code in ('0001','0011','0012','0003'))
and (apr.Payroll_Date LIKE'%APR-12%' and apr.ed_code in ('0001','0011','0012','0003'))
and (mar.Payroll_Date LIKE'%MAR-12%' and mar.ed_code in ('0001','0011','0012','0003'))
and (feb.Payroll_Date LIKE'%FEB-12%' and feb.ed_code in ('0001','0011','0012','0003'))
and (jan.Payroll_Date LIKE'%JAN-12%' and jan.ed_code in ('0001','0011','0012','0003'))
GROUP BY jd.job_grade,e.employee_title,e.first_name,e.initials,e.surname,e.employee_code 
order by TO_NUMBER(jd.job_grade) DESC, e.first_name,e.surname 
```

问题是

1.  这些数字是累积的，没有反映每个人每个月的收入情况。
2.  一年内被雇用或解雇的个人没有出现

笔记：

*   TBL_ACTUAL_RUN 是保存所有月薪的地方
*   TBL_Employee 是保存所有员工的地方
*   TBL_JOB_Details 是保存员工工作信息的地方

有人可以帮忙吗？您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:04:56.793

这对于评论来说太长了，所以我将其发布为答案。我认为您将很难使用所有这些连接来调试您的查询。这是一个在没有所有连接的情况下可能更容易调试的版本。这是做同样的事情，除了您使用带有`CASE`语句的聚合来决定每个月。语法类似于：

```
SELECT jd.job_grade,
  e.employee_title||'. '|| e.first_name||' '||e.initials||' '||e.surname as FULLNAME,
  e.employee_code,
  sum(case when ar.payroll_date LIKE '%JAN-12%' then ar.amount else 0 end) JAN_PAY,
  sum(case when ar.payroll_date LIKE '%FEB-12%' then ar.amount else 0 end) FEB_PAY,
  sum(case when ar.payroll_date LIKE '%MAR-12%' then ar.amount else 0 end) MAR_PAY,
  sum(case when ar.payroll_date LIKE '%APR-12%' then ar.amount else 0 end) APR_PAY,
  sum(case when ar.payroll_date LIKE '%MAY-12%' then ar.amount else 0 end) MAY_PAY,
  sum(case when ar.payroll_date LIKE '%JUN-12%' then ar.amount else 0 end) JUN_PAY,
  sum(case when ar.payroll_date LIKE '%JUL-12%' then ar.amount else 0 end) JUL_PAY,
  sum(case when ar.payroll_date LIKE '%AUG-12%' then ar.amount else 0 end) AUG_PAY,
  sum(case when ar.payroll_date LIKE '%SEP-12%' then ar.amount else 0 end) SEP_PAY,
  sum(case when ar.payroll_date LIKE '%OCT-12%' then ar.amount else 0 end) OCT_PAY,
  sum(case when ar.payroll_date LIKE '%NOV-12%' then ar.amount else 0 end) NOV_PAY,
  sum(case when ar.payroll_date LIKE '%DEC-12%' then ar.amount else 0 end) DEC_PAY
from tbl_actual_run ar
left join TBL_EMPLOYEE E 
  ON E.EMPLOYEE_CODE=ar.emp_code 
left JOIN tbl_job_details jd 
  ON jd.employee_code=ar.emp_code) 
where ar.payroll_date LIKE '%-12%' 
  and ar.ed_code in ('0001','0011','0012','0003')
group by jd.job_grade,e.employee_title,e.first_name,e.initials,e.surname,e.employee_code
order by TO_NUMBER(jd.job_grade) DESC, e.first_name,e.surname 
```

# c - 如何在 C 中初始化/重置数据结构数组

> ID：13932321
> 
> 赞同：0
> 
> 时间：2012-12-18T11:49:23.520
> 
> 标签：c, data-structures, initialization

我有一个数据结构：

```
typedef struct{
    int a;
    int b;
    int c;
}EVENTS;

EVENTS newone[20]; 
```

然后我在某处使用 newone 。现在，我想将 newone[20] 的所有值重置为 0。有没有捷径可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T11:50:20.557

最短的方法是使用[memset](http://linux.die.net/man/3/memset)

```
memset(newone, 0, sizeof(newone)); 
```

# algorithm - 如何使用 Octave 标准化图像？

> ID：13932327
> 
> 赞同：1
> 
> 时间：2012-12-18T11:49:35.710
> 
> 标签：algorithm, image-processing, machine-learning, octave, face-detection

在他们描述[Viola-Jones 对象检测框架](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)（Viola 和 Jones 的 Robust Real-Time Face Detection）的论文中，据说：

> 用于训练的所有示例子窗口都进行了方差归一化，以最大限度地减少不同照明条件的影响。

**我的问题是**“如何在 Octave 中实现图像标准化？”

我不是在寻找 Viola & Jones 使用的特定实现，而是在寻找产生几乎相同输出的类似实现。我一直在关注很多 haar 培训教程（试图检测手），但还不能输出一个好的检测器（xml）。

我已经尝试联系作者，但仍然没有回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:26:31.347

[我已经在这个线程](https://stackoverflow.com/q/13835311/572670)的一般指导方针中回答了如何去做。

下面是如何在octave中做方法1（归一化到标准法线偏差）（Demonstrating for a random matrix `A`，当然可以应用于任何矩阵，这就是图片的表示方式）：

```
>>A = rand(5,5)
A =

   0.078558   0.856690   0.077673   0.038482   0.125593
   0.272183   0.091885   0.495691   0.313981   0.198931
   0.287203   0.779104   0.301254   0.118286   0.252514
   0.508187   0.893055   0.797877   0.668184   0.402121
   0.319055   0.245784   0.324384   0.519099   0.352954

>>s = std(A(:))
s =  0.25628
>>u = mean(A(:))
u =  0.37275
>>A_norn = (A - u) / s
A_norn =

  -1.147939   1.888350  -1.151395  -1.304320  -0.964411
  -0.392411  -1.095939   0.479722  -0.229316  -0.678241
  -0.333804   1.585607  -0.278976  -0.992922  -0.469159
   0.528481   2.030247   1.658861   1.152795   0.114610
  -0.209517  -0.495419  -0.188723   0.571062  -0.077241 
```

在上面你使用：

*   要获得矩阵的标准差：`s = std(A(:))`
*   要获得矩阵的平均值：`u = mean(A(:))`
*   `A'[i][j] = (A[i][j] - u)/s`然后使用矢量化版本遵循公式：`A_norm = (A - u) / s`

* * *

用向量归一化对其进行归一化也很简单：

```
>>abs = sqrt((A(:))' * (A(:)))
abs =  2.2472
>>A_norm = A / abs
A_norm =

   0.034959   0.381229   0.034565   0.017124   0.055889
   0.121122   0.040889   0.220583   0.139722   0.088525
   0.127806   0.346703   0.134059   0.052637   0.112369
   0.226144   0.397411   0.355057   0.297343   0.178945
   0.141980   0.109375   0.144351   0.231000   0.157065 
```

在上面：

*   `abs`是向量的绝对值（它的长度），它是用向量化乘法计算的（`A(:)' * A(:)`实际上是`sum(A[i][j]^2)`）
*   然后我们使用它来规范化向量，使其长度为 1。

# c# - Windows 应用商店应用 Facebook SDK 集成

> ID：13932330
> 
> 赞同：3
> 
> 时间：2012-12-18T11:49:40.030
> 
> 标签：c#, facebook, windows-8, windows-store-apps

在将 API 与 C# 应用程序一起使用时，我是新手，我决定启动一个 windows 8 Modern UI 应用程序。我一直在寻找有关如何使用 facebook API 将 facebook 集成到项目中的信息，我找到了一些有用的答案，但有些事情我仍然不清楚......

我还没有找到任何用于 C# 的官方 Facebook API，我在 Facebook 上创建了一个开发人员帐户，但是当我想使用它创建一个项目时，没有选择 ac# 应用程序。

我搜索了互联网，发现了这个：[https ://github.com/facebook-csharp-sdk/facebook-windows8-sample](https://github.com/facebook-csharp-sdk/facebook-windows8-sample)

我下载了它并将我从 Facebook 获得的应用程序 ID 放在上面，但它不起作用。我的问题很简单：是否有任何带有文档的官方 API 或网站，我可以从中获得真实和准确的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:56:06.077

Facebook的[官方 SDK](https://developers.facebook.com/docs/sdks/)仅适用于 PHP、Javascript、iOS 和 Android。

对于 .NET 世界，您已经找到了[Facebook C# SDK 。](http://csharpsdk.org)您可以用它做任何事情，包括与 Facebook 集成的完整 Windows 8 应用程序。

主站点位于[http://CSharpSDK.org/](http://CSharpSDK.org/)

# spring - 开发 GWT GXT 应用程序的环境要求

> ID：13932332
> 
> 赞同：1
> 
> 时间：2012-12-18T11:49:59.387
> 
> 标签：spring, gwt, ide, gxt

我必须维护一个使用 GWT 2、GXT 2.2、RPC 调用、Hibernate、Spring 和 MySql 构建的 Web 应用程序。为了调试应用程序服务器/客户端，编译和工作的最低要求是什么（Windows Xp 系统）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:54:29.043

**GWT 团队的推荐 -**
![在此处输入图像描述](../Images/4b3528d4ba54317018ab329e9c82ec31.png)

来源 - [https://vaadin.com/blog/-/blogs/the-future-of-gwt-report-2012](https://vaadin.com/blog/-/blogs/the-future-of-gwt-report-2012) 您可以投票 GWT 开发请求以改进编译时间 - [https://vaadin.com/gwt/report- 2012/愿望清单](https://vaadin.com/gwt/report-2012/wishlist)

其他一些技巧 -[如何改进 GWT 托管模式/编译时间？](https://stackoverflow.com/questions/7242045/how-to-improve-gwt-hosted-mode-compilation-times)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:15:17.933

Eclipse 几乎可以在任何硬件上工作。编译可能只需要更长的时间。我在一台使用了 3 年的笔记本电脑上进行开发，速度足够快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:17:58.997

我建议您将[Eclipse](http://www.eclipse.org/)与[Google Plugin For Eclipse](https://developers.google.com/eclipse/)一起使用，然后使用 Google Plugin For Eclipse 创建您的 GWT 项目并[为您的项目配置 gxt](http://www.sencha.com/learn/getting-started-with-ext-gwt/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T21:53:51.997

好吧，我使用 -localWorkers 6 作为参数，使用 -Xmx512m 作为 VM，我已经清理了旧的 .class 文件，但仍然停留在 6 分钟（我的项目是 9.5MB），我认为唯一可以改善编译时间是使用足够快的强大CPU

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T20:05:21.667

我对所有项目所做的最大性能改进是**将我的工具包 VM 移动到固态驱动器上**。

为获得最佳效果，请将您的笔记本电脑系统磁盘升级到 SSD，但如果无法缩小尺寸，请将 60G SSD 装入外壳中，将其连接到 ESATA 端口，然后进行编译。USB 3.0 是 esata 的合适替代品，但 USB 无法维持相同的峰值吞吐量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T17:30:01.470

自 12 月以来我的问题得到了解决：D，通过重新格式化我的旧 PC，编译时间花了 2 分钟，只为 ie8 使用编译，没有其他配置，但是您的回复将来对我有用；）

# windows-phone-7 - UI有很多元素时如何快速导航？

> ID：13932336
> 
> 赞同：5
> 
> 时间：2012-12-18T11:50:11.367
> 
> 标签：windows-phone-7, user-interface, pivot, element

我正在开发一个 Windows Phone 7 应用程序。在我的主页中，有一个具有 6 的枢轴`PivotItem`。在其中的每`PivotItems`一个`ListBox`中都有许多文本和图像。

当我从主页导航到第 1 页时，需要很长时间（大约 5-8 秒）。主页上的 UI 越重，花费的时间就越长。

我无法减少主页上的元素，那么有什么建议可以快速进入第 1 页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:15:11.287

折叠当前不可见的枢轴项目的根元素，并在它们进入视图时使其可见。您很可能会保持 UI 线程排列和绘制不可见的 UI 元素。

这将允许您监控内存和图形性能

```
Application.Current.Host.Settings.EnableFrameRateCounter = true; 
```

[如何解释 FrameRateCounter](http://blogs.msdn.com/b/ssehgal/archive/2012/07/17/windows-phone-emulator-frame-rate-counters.aspx)

# ant - Jacoco Agent 应该添加到执行测试的 JVM 中，还是添加到运行应用服务器的 JVM 中？

> ID：13932343
> 
> 赞同：1
> 
> 时间：2012-12-18T11:50:29.630
> 
> 标签：ant, selenium, sonarqube, agent, jacoco

我正在检测针对 JBoss 服务器中的应用程序运行的 Selenium 测试。许多文档提到应该将 Jacoco 代理作为参数添加到 JVM。但是，它们没有说明它们是指运行 Selenium 测试的 JVM 还是运行 JBoss 应用服务器的 JVM。它们是完全不同的机器。那么，Jacoco 代理是否添加到：

```
1\. the app server JVM upon start
2\. or the JVM where Selenium tests are run? 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:05:10.953

我从未尝试将 JaCoCo 与 Selenium 测试一起使用，但显然代理应该以某种方式附加到运行应用程序的已编译源的 JVM，以便它可以在运行时干扰您的代码（因此，这是在服务器端）。

# javascript - 为什么使用 apply 方法

> ID：13932344
> 
> 赞同：0
> 
> 时间：2012-12-18T11:50:32.450
> 
> 标签：javascript

我读了一些关于全局 apply 方法的内容，但我不明白为什么我应该使用 apply 方法？你能给我写一些例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:54:32.653

当你`.apply`想调用一个带有可变数量参数的函数并且你事先不知道你将提供多少参数时，你可以使用它。因此，您将这些参数放入一个数组并调用该函数：

```
myfunc.apply(context, array); 
```

这相当于

```
myfunc(array[0], array[1], ...); 
```

设置`this`等于`context`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:52:35.553

看看 MDN 有一个非常好的描述（带有示例）的 apply()：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

# java - 如何在java中替换字符串值

> ID：13932351
> 
> 赞同：0
> 
> 时间：2012-12-18T11:50:51.627
> 
> 标签：java, string

我在如下语句中替换特定字符串

```
SQL = SQL.replaceAll("CUSTOMER_NUMBER", customer); 
```

此转换以整数形式进行，但我想将其替换为字符串，如下所示

```
AND CIMtrek_accountlist_customer_number = '0002538' 
```

但目前它替换如下

```
AND CIMtrek_accountlist_customer_number = 0002538 
```

如何在java中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:52:33.493

让它输出'以及客户变量

```
SQL = SQL.replaceAll("CUSTOMER_NUMBER", "'" + customer + "'"); 
```

但是，正如@jlordo 在评论中提到的那样，您应该考虑使用准备好的语句，这将允许您将值注入到准备好的 sql 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:57:28.950

虽然你应该在`PreparedStatement`运行 SQL 时使用，但是如果占位符`"CUSTOMER_NUMBER"`在你的控制之下，最好使用 String.format。[请参阅此处](https://stackoverflow.com/questions/3695230/how-to-use-java-string-format)的示例

# websphere-portal - 在 IBM Web Sphere 门户 5.0 中恢复主题设置

> ID：13932354
> 
> 赞同：0
> 
> 时间：2012-12-18T11:50:57.833
> 
> 标签：websphere-portal

我是这个 IBM 门户 5.0 个性化的新手。我通过复制 IBM Websphere 门户 5.0 中已有的主题创建了新主题，并将其命名为 Mytheme。我把这个主题设为poratl default（这是我犯的错误）。我验证了所有页面，是否所有页面都得到反映。当时我能够将主题默认设置更改为现有主题和新创建的主题。因为我登录了门户。

今天我尝试访问门户，但它在内容区域中没有显示任何内容（未显示 Portlet）。它没有显示登录 Portlet。所以无法以管理员身份登录。什么都改不了。。

谁能帮我解决这个问题。我必须恢复我的更改。所有配置都存储在 Oracle DB 中。

任何想法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:04:49.280

您将需要使用 xmlAccess 来纠正您的问题。这个其他问题看起来为您提供了解决方案。

[WebSphere Portal 6.1 默认主题已删除](https://stackoverflow.com/questions/6184976/websphere-portal-6-1-default-theme-deleted)

# php - 如何从 PHP 数组生成 JSON 文件？

> ID：13932358
> 
> 赞同：-5
> 
> 时间：2012-12-18T11:51:14.887
> 
> 标签：php, json

> **可能重复：**
> [如何使用 php 生成 json？](https://stackoverflow.com/questions/1435072/how-to-generate-json-using-php)

我想使用 PHP 生成一个 JSON 文件。现在我正在生成一个 XML 文件：

```
public function CreateXML($array){

/*$array contains several arrays and look like this:
  [0] => Array( [0] => Jonas [1] => Anne [2] => Peter)
  [1] => Array( [0] => Andersen [1] => Berg [2] => Jobs)
  [2]......*/   

$newArray = array2();
for($i = 0; $i <= count($array[0]); $i++) {
    $newArray[] = array2($array[0][$i], $array[1][$i], $array[2][$i]);

}

$xmlDoc = new DOMDocument("1.0", "iso-8859-1");

$root = $xmlDoc->appendChild(
          $xmlDoc->createElement("Contacts"));

  foreach($newArray as $row) {

  $tag = $root->appendChild(
              $xmlDoc->createElement("Contact"));

    $tag->appendChild(
       $xmlDoc->createElement("Firstname", $row[0]));

    $tag->appendChild(
       $xmlDoc->createElement("Lastname", $row[1]));
     .......
      }

 $xmlDoc->formatOutput = true;
 echo $xmlDoc->saveXML();
}

//output
<Contacts>
  <Contact>
    <Firstname>Jonas</Firstname>
    <Lastname>Andersen</Lastname>
    .......
  </Contact>
 ......
</Contacts> 
```

所以我的问题是，我怎样才能得到相同的结果，而是生成 JSON？这是我第一次使用 JSON，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:54:16.803

```
$jsonArray = json_encode(array); 
```

开箱即用（但当然在此之前您应该将数组更改为关联数组）:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:56:33.893

最简单的方法是使用 json_encode($array) 函数。此函数将数组的 json 表示形式返回为字符串。这个字符串可以写在一个文件中。

# typo3 - 从当前 UiD 的子页面获取内容

> ID：13932359
> 
> 赞同：0
> 
> 时间：2012-12-18T11:51:16.190
> 
> 标签：typo3, typoscript, templavoila

我正在 TYPO3 中开发我的第一个站点，目前我的结构如下所示：

```
Page1
      subpage1
      subpage2
      subpage folder -> with images

Page2
      subpage1
      subpage2
      subpage3 folder -> with images 
```

我想要做的是将 Page1 的子页面中的内容加载到我的子页面中（比如文件夹中的图像将是滑块的一部分，subpage1 将是主要内容，subpage2 将是侧边栏内容。

这个想法是使用 templavoila 并通过 Typoscript 对象映射它。

现在我面临的问题是，我不知道如何从当前的 UID 子页面中获取内容。在上述情况下，我将如何做到这一点？

我不是要求一个完成的解决方案，只是指出我正确的方向或展示类似的例子等。

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:15:42.927

您需要先获取 pid 列表，然后才能使用`CONTENT`TS 对象。正确地，您可以使用该`stdWrap.cObject`属性在对象内生成页面 ID 列表`CONTENT`。

发表评论你需要一个例子。

# javascript - 如何从 Jquery 中的另一个页面关闭模态对话框

> ID：13932362
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:51:19.093
> 
> 标签：javascript, jquery-ui, jquery

> **可能重复：**
> [如何从另一个页面关闭模式表单](https://stackoverflow.com/questions/13929326/how-do-close-modal-form-from-another-page)

我有两页。从第一页开始，我想用 url test.html 调用模态表单，我想用 href="#" onclick="">Close 从 test.html 页面关闭模态表单，我正在使用以下代码打开模态对话框

```
$(document).ready(function()
 {
     $("#create-user").button().click(function()
     {`enter code here`
         $("#dialog-form").load('test.html').dialog({ modal:true, }); 
     }); 
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:11:01.770

考虑到您想从 test.html 关闭模态，一个潜在的解决方案可以是找到生成对话模态的父级的 id 并关闭它这可以通过以下方式完成：

```
a href="#" onclick="closeModal()"

function closeModal()
{
 window.parent.document.getElementById('dialog-form').style.display = 'none';
} 
```

这将从 test.html 关闭模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:08:24.737

你可以关闭你的对话框

```
$("#dialog-form").close(); 
```

从代码中的任何地方。

由于对话框内容是动态加载的，您可以在包含的 div 上绑定一个事件

```
$(document).ready(function()
{
  $("#create-user").button().click(function()
  {
     $("#dialog-form").on('click', '.close_link', function() {
         $("#dialog-form").close();
         return false;
     };
     $("#dialog-form").load('test.html').dialog({ modal:true, }); 
  }); 
}); 
```

您只需添加`close_link`要用于关闭对话框的按钮/链接。

# php - Drupal 中的 GmailConnect

> ID：13932374
> 
> 赞同：0
> 
> 时间：2012-12-18T11:52:17.023
> 
> 标签：php, drupal, google-apps

我正在使用 Drupal 6 并尝试在我的个人资料页面上从 Google A/c 访问用户邮件。我正在使用 GmailConnect 模块[http://drupal.org/project/gmail_connect](http://drupal.org/project/gmail_connect)来实现此功能。我已经使用正确的消费者密钥/秘密密钥正确配置了它。

请帮帮我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:08:25.820

确保您首先在您的谷歌应用程序域控制面板中启用了 IMAP，然后在个人用户帐户设置中启用了 IMAP。

# python - 按公共列合并两个表

> ID：13932375
> 
> 赞同：1
> 
> 时间：2012-12-18T11:52:18.907
> 
> 标签：python, file-io, python-2.7, file-handling

假设我有两个文件，有数据

table1.txt 内容

```
avvd, 1234, ufgh
klpn, 5678, oppr
srtv, 9abc, pxyz 
```

table2.txt 内容

```
abcd, 1234, efgh
klmn, 5678, opqr
stuv, 9abc, wxyz 
```

现在我想合并它们，因为它们的第二列是相同的，并显示结果。

所需的输出是如果 table1.txt 和 table2.txt 列相同，则合并两个表并使它们成为一个并在输出中显示它们

```
avvd, 1234, ufgh, abcd, efgh
klpn, 5678, oppr, klmn, opqr
srtv, 9abc, pxyz, stuv, wxyz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:47:07.570

```
#input

file1 = open('1.txt', 'r')
file2 = open('2.txt', 'r')
matrix1 = [line.rstrip().split(', ') for line in file1.readlines()]
matrix2 = [line.rstrip().split(', ') for line in file2.readlines()]
file1.close()
file2.close()

#combine

t_matrix1 = [[r[col] for r in matrix1] for col in range(len(matrix1[0]))]
t_matrix2 = [[r[col] for r in matrix2] for col in range(len(matrix2[0]))]
final_t_matrix = []
for i in (t_matrix1 + t_matrix2):
    if i not in final_t_matrix:
        final_t_matrix.append(i)
final_matrix = [[r[col] for r in final_t_matrix] for col in range(len(final_t_matrix[0]))]

#output

outfile = open('out.txt', 'w')
for i in final_matrix:               
    for j in i[:-1]:
        outfile.write(j+', ')
    outfile.write(i[-1]+'\n')
outfile.close() 
```

# django - Django 1.3 分页不显示页面链接并显示所有记录

> ID：13932376
> 
> 赞同：0
> 
> 时间：2012-12-18T11:52:21.753
> 
> 标签：django, pagination, django-1.3

我正在尝试在 Django 1.3 中设置 Django Pagination，它似乎不起作用，因为我返回了超过 5 条记录并且链接被弄乱了

看法：

```
def directory(request, bought_in_control_panel_id):

    listings = Directory.objects.all().exclude(visible=False).order_by('rank', 'company__name').filter(company__uuid__in=local_uuids)

    paginator = Paginator(listings, 5) # Show 25 contacts per page

    # Make sure page request is an int. If not, deliver first page.
    try:
        page = int(request.GET.get('page', '1'))
    except ValueError:
        page = 1

    # If page request (9999) is out of range, deliver last page of results.
    try:
        page_listings = paginator.page(page)
    except (EmptyPage, InvalidPage):
        page_listings = paginator.page(paginator.num_pages)
    return share.output_page(request, 'directory/directory.html', {'listings': page_listings, 'bought_in_control_panel_id': bought_in_control_panel_id}) 
```

模板：

```
{% block main %}
<link href="/media/css/bootstrap.min.css" rel="stylesheet">
<div class="container-fluid">
<div class="dbx-group">
<div class="dbx-box">
<h3 class="dbx-handle"><div class="tools"></div>  <img src="/media/img/32x32/addressbook.png" style="position:absolute; margin-top:-16px;"><div class="title">Online Suppliers listings {% jms_help_link user 'directory_listings' %}</div></h3>
<h3 class="dbx-handle"><div class="tools"></div>  <a title="Change region" href="{% url change_flag bought_in_control_panel_id iso %}"><img src="/media/img/flags-iso/48/{{ iso|lower }}.png" alt="Change region" align="right" style="margin-top:-45px;"></a><div class="title"></div></h3>
<ul class="dbx-content" width=98%>
    {% if listings %}
        {% for listing in listings %}
            {% if listing.visible %}
            <div class="well well-small" onclick="window.location.href = '{% url view_directory listing.uuid bought_in_control_panel_id %}'" style="cursor:pointer;">
                <div class="row-fluid">
                    <div class="span12">
                        <a style="display:block" href="{% url view_directory listing.uuid bought_in_control_panel_id %}">
                            <h4>{{ listing.company.name }}</h4>
                        </a>
                        <div class="row-fluid">
                            <div class="span10">
                                <blockquote>{{listing.description|truncatewords:30}}</blockquote>
                                <p>Click for more info and downloads</p>
                            </div>
                            <div class="span2">
                                <img src="{% url view_banner listing.uuid %}" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        {% endfor %}
        <div class="pagination">
            <span class="step-links">
                {% if listings.has_previous %}
                    <a href="?page={{ listings.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ listings.number }} of {{ listings.paginator.num_pages }}.
                </span>

                {% if listings.has_next %}
                    <a href="?page={{ listings.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
    {% else %}
        <p align="center"><b>No listings!</b></p>
    {% endif %}
<div style="clear:both;"></div>
</div>
</div>
</div>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="/media/js/bootstrap.min.js"></script>
{% endblock %} 
```

share.output_page:

```
def output_page(request, htmlpage, dct={}):
    t = loader.get_template(htmlpage)
    c = RequestContext(request,dct)
    return http.HttpResponse(t.render(c)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:41:53.720

在 Django 1.3 中，您需要使用：

```
{% for listing in listings.object_list %} 
```

它在 Django 1.4 中发生了变化。

# python - Sqlite3 dbapi2.py 日期转换问题

> ID：13932380
> 
> 赞同：2
> 
> 时间：2012-12-18T11:52:35.543
> 
> 标签：python, sqlite

我在我的脚本中看到了最奇怪的行为。我从 dbapi2.py 得到一个 ValueError ，它似乎正在尝试对 datetime.date 对象进行转换，就好像它是 datetime.datetime 对象一样：

```
 File "C:\Python27\Lib\sqlite3\dbapi2.py", line 66, in convert_timestamp
    datepart, timepart = val.split(" ")
  ValueError: need more than 1 value to unpack 
```

我没有做任何特别的事情，事实上我有几个其他脚本在做完全相同的事情，但 tSql 略有不同，完全没有问题。这是构建 Sql 的类：

```
class TransactionQuery:

    def __init__(self, account_iter, date):
        self.account_iter = tuple(account_list)
        self.date = date
        placeholder = ("?" for item in self.account_list)
        placeholders = ', '.join(item for item in placeholder)
        self.query = """select * from transactions where account_cd in (%s) and 
                        effected_dt = ?""" % placeholders

    @property
    def params(self):
        return (self.account_list) + (self.date,) 
```

调用它的代码：

```
with Sqlite() as curs:
    print mquery.query
    print mquery.params
    curs.execute(mquery.query, mquery.params)
    return curs.fetchall() 
```

以及打印语句的输出：

```
select * from transactions where account_cd in (?, ?, ?, ?) and effected_dt = ?
('713271', '71204', '713311', '713471', datetime.date(2012, 12, 17)) 
```

任何想法为什么 Sqlite 在这种情况下会遇到 datetime.date 对象的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:01:46.780

你错过了`timepart`：

```
(datepart, timepart) = str( datetime.date(2012, 12, 17) ).split( ' ' )
## ValueError: need more than 1 value to unpack 
```

`sqlite3`正在击中[`convert_timestamp`](https://github.com/python-git/python/blob/master/Lib/sqlite3/dbapi2.py#L55)转换器。

[默认适配器和转换器](http://docs.python.org/2/library/sqlite3.html#default-adapters-and-converters)文档页面`sqlite3`显示了一些示例。据我所知，我可以尝试假设这`effected_dt`是一个`timestamp`需要完整`datetime.datetime`字符串的替代。

所以你要做的是以下几点：

*   `datetime.datetime`改为使用
*   `timestamp`为接受日期的类型注册一个新的转换器（例如返回“2012-12-17 00:00:00”）
*   更改您的列类型

希望这有意义并有所帮助。

# java - 从不同的包中导入两个具有相同名称的不同类

> ID：13932383
> 
> 赞同：0
> 
> 时间：2012-12-18T11:52:41.200
> 
> 标签：java

我`Logger`使用. `java.util.logging`_ `import java.util.logging.Logger`除此之外，根据要求，我需要从其他包中导入用户创建的类。但问题是，该类名也`Logger`[在用户定义的包中创建]。我无权更改该用户定义的类和包的名称。这两个类都有静态方法。

所以我需要导入两个类，那么有什么可行的解决方案呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:54:14.963

调用完整的类名，即`package.class`。
例如，如果您要创建一些名为 的类`File`，您仍然可以使用`java.io.File`而不导入它。
导入只允许您使用较短的名称。一个类的全名前面加上它的包名

在你的情况下，你有：`some.user.package.Logger`，所以你可以完全像那样使用它。

```
some.user.package.Logger userLogger = new some.user.package.Logger();
java.util.logging.Logger realLogger = java.util.logging.Logger.getAnonymousLogger(); //or whatever... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:56:02.540

您必须指定完整路径。

```
Logger logger = new Logger();
com.abc.Logger yourLogger = new com.abc.Logger(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:56:22.710

当使用具有相同名称但不同包的类之一时，

使用完全限定的类名，如：

```
java.util.logging.Logger logger;
mypackage.Logger myLogger; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:57:34.853

最好的方法是在类中使用完全限定的类名，而不导入任何内容

# php - PHP 水印脚本 - 返回 500 内部服务器错误

> ID：13932385
> 
> 赞同：0
> 
> 时间：2012-12-18T11:52:51.037
> 
> 标签：php, image-processing, watermark, internal-server-error

我有一个图像上传脚本，当添加用于插入水印的功能时，它开始给出 BPOD 或 500 内部服务器错误:(

我花了整个上午试图解决这个问题，但没有结果。我知道它有很多代码，但会感谢您的帮助：

```
<?php
//connect
include_once('connect.php');

$storage = 'store/';

$filename = htmlentities(isset($_FILES["file"]["name"]) ? $_FILES["file"]["name"] : '', ENT_QUOTES);
$podpis = htmlentities(isset($_POST['podpis']) ? $_POST['podpis'] : '', ENT_QUOTES);
$nick = htmlentities(isset($_POST['nick']) ? $_POST['nick'] : '', ENT_QUOTES);

if(isset($_FILES['file'])) {
    $errors     = array();
    $maxsize    = 2097152;
    $acceptable = array(
        'image/jpeg',
        'image/jpg',
        'image/gif',
        'image/png'
    );

    if(($_FILES['file']['size'] >= $maxsize) || ($_FILES["file"]["size"] == 0)) $errors[] = 'Plik za duży. Dopuszczalny max. rozmiar = 2MB. ';
    if(!in_array($_FILES['file']['type'], $acceptable) && (!empty($_FILES["file"]["type"]))) $errors[] = 'Plik zabroniony. Dopuszczalne pliki: JPG, GIF i PNG. ';   
    if (file_exists("store/" . $filename)) {
        $filename = explode(".", $filename);;
        $filename = rand(1, 100) . $filename[0] . "." . $filename[1];

    }

    $filename = str_replace(" ", "_", $filename);

    if(count($errors) !== 0) {
        foreach($errors as $error) echo $error;     
        die();
    }

    if ( $_FILES['file']['type'] !== 'image/gif' ) {

        move_uploaded_file($_FILES["file"]["tmp_name"], $storage . $filename);

        if ( $_FILES['file']['type'] == 'image/jpeg' || $_FILES['file']['type'] == 'image/jpg' )
            $im = imagecreatefromjpeg("$storage/$filename");    

        $stamp = imagecreatefrompng('stamp.png');

        $marge_right = 10;
        $marge_bottom = 10;
        $sx = imagesx($stamp);
        $sy = imagesy($stamp);

        // Copy the stamp image onto our photo using the margin offsets and the photo 
        // width to calculate positioning of the stamp. 
        imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, imagesx($stamp), imagesy($stamp));

        // Output and free memory
        header('Content-type: image/png');
        imagepng($storage . $im);
        imagedestroy($im);

        $query = "INSERT INTO demoty (filename, title, nick, czas, upy) VALUES ('$im', '$podpis', '$nick', '$czas', 0)";

    } else {
        move_uploaded_file($_FILES["file"]["tmp_name"], $storage . $filename);
        $query = "INSERT INTO demoty (filename, title, nick, czas, upy) VALUES ('$filename', '$podpis', '$nick', '$czas', 0)";
    }

    $czas = date('d-m-y G:H');

    mysql_query($query) or die('connect error 4');  

    #echo '<script type="text/javascript">window.location = "index.php?page=0"</script>';

} 
```

# java - web.xml 是否有基于正则表达式的 servlet 过滤器？

> ID：13932389
> 
> 赞同：3
> 
> 时间：2012-12-18T11:52:56.980
> 
> 标签：java, spring, guice, servlet-filters, web.xml

我正在将一些代码从 Guice 迁移到 Spring。guice-servlet 有一个很好的特性，它允许您使用正则表达式匹配 servlet 过滤器。例如我正在使用

```
filterRegex("^.*\\.cache\\..*$").through(ForceCacheFilter.class); 
```

我需要在春天复制这个。

我可以轻松编写一个过滤器，它采用正则表达式和过滤器的类名作为参数/属性委托给它。如果需要，它会将 URL 与正则表达式匹配并委托给过滤器类。我想这可以更进一步，并且有一个过滤器可以根据正则表达式分派到多个过滤器 - 就像 Guice 正在做的那样。

令我惊讶的是，我还没有找到可以做到这一点的东西。也许我看起来不够努力，或者这不是一个好主意？

是否存在这样的事情或者我需要编写一些代码？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-02-11T10:22:45.920

你的意思是什么？

```
<filter>
        <filter-name>someFilter</filter-name>
        <filter-class>org.springframework.web.filter.SomeFilter</filter-class>
</filter>

<filter-mapping>
        <filter-name>someFilter</filter-name>
        <url-pattern>/somePath/*</url-pattern>
</filter-mapping> 
```

# vba - 从网页中提取数据 - 使用 VBA

> ID：13932393
> 
> 赞同：1
> 
> 时间：2012-12-18T11:53:12.100
> 
> 标签：vba, excel, data-extraction

使用 VBA，我需要从网页[http://emops.tse.com.tw/t21/sii/t21sc03_2011_9_e.htm中提取数据](http://emops.tse.com.tw/t21/sii/t21sc03_2011_9_e.htm)

我可以使用以下代码获取所有数据：

```
With ActiveSheet.QueryTables.Add(Connection:="URL;http://emops.tse.com.tw/t21/sii/t21sc03_2012_2_e.htm", Destination:=Range("$A$1"))
        .Name = "67083361_zpid"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlEntirePage
        .WebFormatting = xlWebFormattingNone
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
End With 
```

但问题是我不想要整个页面的数据。**我想要行业名称为 Electron 的表中的数据（在这种情况下是最后一个表）**

请问有什么技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-30T15:29:21.467

改变：

```
.WebSelectionType = xlEntirePage to .WebSelectionType = xlSpecifiedTables 
```

添加：

```
.WebTables = "2" below .WebFormatting = xlWebFormattingNone 
```

'您将不得不对“2”使用反复试验来找到您想要抓取的确切表格

# asp.net - 在第一次加载页面时显示组的验证消息

> ID：13932399
> 
> 赞同：3
> 
> 时间：2012-12-18T11:53:28.580
> 
> 标签：asp.net, validation

我检查了 SO 的解决方案，但我没有找到任何有用的东西，它们要么[像这个孤立链接一样](https://stackoverflow.com/questions/3381547/how-to-trigger-validation-on-first-load)没有得到答复，要么不相关。现在我在这里问：

*是否可以让验证器在页面首次加载时显示他们的消息？*

我的页面上有几个验证器（必需的、自定义的、范围 ...），并且我已将它们分组。我希望所需的验证组在首次加载时显示他们的消息（当 !page.IsPostBack 时），以便我的客户一眼就能看到什么是强制性的，什么不是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:59:53.387

以下代码应该可以满足您的要求。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        // for all validators to fire, first time
        Page.Validate();
        // Or Only validators under a specific group will fire
        Page.Validate("ValidationGroupName");
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:58:05.523

只需调用`Validate()`来自的验证器`Page_Load`。

```
if(!IsPostBack)
{
    this.UserNameRequired.Validate();
    // and all the other mandatory validators
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T11:58:38.017

当然......只需调用`submit`表单的方法。

这不是你真正需要的吗？提交表单并获取所有消息？

```
$(function() {

    // this will submit the form, but as you have validation, 
    // it will fire up all validations
    $("form").submit(); 

}); 
```

这是一个简单的技巧，我有时会这样做。

# android - Web 视图无法显示网页

> ID：13932400
> 
> 赞同：1
> 
> 时间：2012-12-18T11:53:30.217
> 
> 标签：android

```
public class MyPlayer extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(akki.player.R.layout.main);

    boolean flashInstalled = false;
    try {
      PackageManager pm = getPackageManager();
      ApplicationInfo ai = pm.getApplicationInfo("com.adobe.flashplayer", 0);
      if (ai != null)
        flashInstalled = true;
    } catch (NameNotFoundException e) {
      flashInstalled = false;
    }
    if(flashInstalled){
    WebView browser=(WebView) findViewById(akki.player.R.id.webView1); 
    //
    browser.getSettings().setJavaScriptEnabled(true); 
    ;
    browser.getSettings().getPluginsEnabled();
    browser.getSettings().setAllowFileAccess(true);

    browser.getSettings().setAppCacheEnabled(false);

    browser.loadUrl("http://sound30.mp3pk.com/indian/dabangg2/[Songs.PK]%2004%20-%20Saanson%20Ne%20-%20Dabangg%202.mp3");
           Toast.makeText(this, "Flash Player installed ....", 1).show();
    }
    else
    {
        Toast.makeText(this, "Install Flash Player First  ..", 1).show();
    }
    } 
```

这是我从网站播放歌曲的代码。但它说网页不可用。

什么是可能的错误。？提前谢谢。我也有一个将播放器链接到网站的 player.html 文件。代码工作正常，因为它要求安装代码中提到的 Flash 播放器，但是当我启动应用程序时，它只是不显示网页。相反，它说网页不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:55:52.053

我认为你应该下载它并用 Mediaplayer 播放它。我看到您尝试使用 Flash 播放器，但不支持 Flash 播放器：

[http://arstechnica.com/gadgets/2012/06/no-flash-for-android-4-1-no-new-installs-after-august-15/](http://arstechnica.com/gadgets/2012/06/no-flash-for-android-4-1-no-new-installs-after-august-15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:18:45.137

最主要的是你把 mp3 文件放在 webview 中。您可以将链接更改为[http://www.musikmaza.com/2012/11/dabangg-2-2012-latest-hindi-mp3-songs.html](http://www.musikmaza.com/2012/11/dabangg-2-2012-latest-hindi-mp3-songs.html)。更改链接后检查页面是否显示。

如果你想播放 mp3 文件，那么你需要一个 downloadManager 来下载 mp3 文件，然后是 MediaPlayer 来播放该文件。

# javascript - 上传文件重命名

> ID：13932403
> 
> 赞同：4
> 
> 时间：2012-12-18T11:53:54.493
> 
> 标签：javascript, jquery, amazon-s3, plupload

我正在使用 Plupload 上传到 S3；我的问题是我想更改文件的名称，因此当它们驻留在 S3 中时，它们将更改为我想要的格式。我设法检索了该函数上传的文件的文件名：

```
 FilesAdded: function (up, files) {
                    for (var i in files) {
                        files[i].name = files[i].name.split('_').join(' ').trim();
                        alert('Selected files: ' + files[i].name);

                    } 
```

控件中的文件名发生了变化，但是当我检查 S3 时，文件没有改变。

我确保 unique_names 属性为 false 并将属性重命名为 true；但没有任何帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-23T00:06:08.563

我遇到了同样的问题，即对 S3 使用 pluploader 并希望在上传之前规范化文件名。不幸的是，“文件”参数似乎是只读的，对文件名的任何更改都不会显示在提交的表单中。

但是如果我们将 'key' 参数更改为一个精确的字符串（标准化名称），它将导致 S3 用不同的名称保存它。我们可以创建一个规范化的名称，并在“FileAdded”回调的 multipart_param 中的“key”参数中使用它。

```
....
FilesAdded: function(up, files) {
  console.log("Uploader.FilesAdded ", up, files);

  var file = files[0];

  //Replace unwanted characters with "_"
  var new_name = file.name.replace(/[^a-z0-9\.]+/gi,"_").toLowerCase();

  console.log("Changing file name to ", file.name);

  //Create multipart_params here (or just set the 'key' and 'Filename')
  var multipart_params =  {
    'key': config.key + new_name, // *instead of ${filename}
    'Filename':  config.key + new_name,
    'acl': config.acl,
    'Content-Type': '',
    'AWSAccessKeyId' : config.accessId,
    'policy': config.policy,
    'signature': config.signature
  };

 //
 up.settings.multipart_params = multipart_params;
}
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-10T19:54:55.137

在执行分段上传到 S3*之前*，我需要为上传队列中的*所有*文件添加一个用户可定义的前缀。在我的情况下，可以在开始上传之前随时编辑前缀 - 因此使用**FilesAdded**事件是不可接受的。

 ***对我有用的解决方案是使用**BeforeUpload**在开始上传之前为队列中的每个文件触发。

```
 BeforeUpload: function(up, file) {

     //Change the filename          
     file.name = appendUniqueId(file.name);
     file.name = addPrefix(file.name);

     var params = up.settings.multipart_params;
     params.key = file.name;
     params.Filename = file.name;

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:14:49.537

尝试使用 unique_names:true 和 rename:true。这个对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T11:21:20.270

我发现这个问题的唯一完全有效的解决方案是利用`multipart_params`Plupload 上传器上的属性。

我正在使用的代码是；

```
uploader.bind('BeforeUpload', function (up, file) {
    uploader.settings.multipart_params = { 'renamedFileName': 'yourRenamedFileName' };
}); 
```

然后，当您处理图像时，您可以从发布的信息中请求；

**c# 代码**

```
var renamedFileName = context.Request["renamedFileName"].ToString(); 
```

对于您的代码，您可以尝试；

```
uploader.bind('BeforeUpload', function (up, file) {
    uploader.settings.multipart_params = { 'renamedFileName': file.name.split('_').join(' ').trim(); };
}); 
```

然后，您可以使用此附加信息重命名服务器上的文件。***

# .net - 任务内部的异常存储在哪里？

> ID：13932404
> 
> 赞同：1
> 
> 时间：2012-12-18T11:53:54.513
> 
> 标签：.net, c#-4.0, exception-handling

如果我在下面的示例中取消注释行，`Wait()`我`startNew.Result`将捕获`AggregateException`. 如果这些代码行被注释，为什么我看不到任何异常？

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            Task<int> startNew = Task.Factory.StartNew(() => int.Parse(""), 
                                             TaskCreationOptions.LongRunning);
            //int result = startNew.Result;
            //startNew.Wait();
            Thread.Sleep(10000);             
        }
        catch (AggregateException ex)
        {
            Console.WriteLine("Catched in aggregated");
        }
        catch (Exception)
        {
            Console.WriteLine("Catched in general");
        }

        Console.WriteLine("The end");
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:02:46.397

> 但是，如果这些代码行被注释，为什么我看不到任何异常？

因为没有什么东西可以扔掉它们！您真的不*希望*一个线程的异常在任意点被抛出到另一个线程中，而不需要您做任何事情来导致它。

`Task<>` *记住*异常，但它不会抛出它们，除非您专门执行诸如`Wait()`or之类的操作`Result`，如您所见。

您还可以使用[`Task.Exception`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.exception.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:18:25.700

Jon Skeet 是对的，但他的回答并不完整。

我应该补充一点，如果您不调用 Wait() 或 Result，那么您可能会遇到在 Task 对象上调用 Finalize 方法的情况，并且该调用将检查内部任务对象异常集合中是否存在异常，然后抛出UnobservedTaskException 导致应用程序立即崩溃的原因（只要您不为 TaskScheduler.UnobservedTaskException 注册回调，强烈不建议这样做）。

# python - Python 关于 LearnPythonTheHardWay 练习 3

> ID：13932407
> 
> 赞同：0
> 
> 时间：2012-12-18T11:54:08.780
> 
> 标签：python

所以我一直在[学习 Python the Hard Way](http://learnpythonthehardway.org/)，目前正在[练习 3](http://learnpythonthehardway.org/book/ex3.html)。

按照我的理解，当我输入像`print "I will now count my chickens:"`and之类的语句时`print "Hens", 25 + 30 / 6`，我应该在终端中看到等效的输出`"I will now count my chickens and Hens 30 "`。

这似乎并非如此，任何人都知道为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:56:56.183

使用 shebang 标头 ie`#!/usr/bin/python3` 或任何对您来说等效的路径。这告诉 shell 在哪里使用你的解释器来处理这个脚本。

然后，保存文本文件。

通过使用使其从终端可执行（因为您在 Mac 上）`chmod +x filename.py`

然后，只需从终端执行文件`./filename.py`，您应该会看到所需的输出。

# java - 在 JSP 中使用 java 代码打开输入文件

> ID：13932408
> 
> 赞同：0
> 
> 时间：2012-12-18T11:54:08.567
> 
> 标签：java, jsp, netbeans, glassfish, glassfish-3

我在 NetBeans 上使用 JSP。

在 java 代码中，我试图从文件中读取数据。首先，我通过指定文件的路径来打开文件。

因为我的代码在服务器（GlassFish）上运行，所以我希望我的文件路径独立于它运行的机器。因此，我想以包含保存在项目目录根目录中的文件的文件夹名称开始路径。我非常努力地实现这一目标，但我做不到。

我在网上阅读并找到了这种方式，但它仍然不起作用：

```
<%

  //building the tree here.
GraphBuilder tree = new GraphBuilder("${pageContext.request.contextPath}\\src\\java\\Database\\OptimizedFullTermFile.pad");

%> 
```

任何人都可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:57:21.290

只需从类路径中读取它。鉴于您使用的是`src`代表 Java 源代码（Java 包/类结构）的典型文件夹，我假设该文件`OptimizedFullTermFile.pad`位于 Java 包中`java.Database`（eek，包名中的大写字母？全部小写）。在这种情况下，它已经在类路径中，因此您可以直接从那里获取它，如下所示：

```
InputStream input = Thread.currentThread().getContextClassLoader().getResourceAsStream("java/Database/OptimizedFullTermFile.pad");
// ... 
```

至于你失败的尝试：EL`${pageContext.request.contextPath}`永远不会在*scriptlet*中工作。即使这样做了，也不是正确的，它返回 webapp URL 中的上下文路径，这绝对不是本地磁盘文件系统路径的一部分，更不用说类路径了。[顺便说一句，十年来强烈不鼓励](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)[使用*scriptlet*](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)。

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)
*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:12:00.100

您可以尝试以下代码从以下代码中获取项目中的目录文件。

```
this.getServletContext().getRealPath("")+[your file path in project web directory] 
```

# c# - null 引用对象未设置为对 label.text 属性上的对象的引用

> ID：13932418
> 
> 赞同：0
> 
> 时间：2012-12-18T11:54:22.950
> 
> 标签：c#, windows, forms, nullreferenceexception

我一直在绞尽脑汁（不难）试图找出这个例外。我有一个显示用户信息的表单。当我设置断点并单步执行代码时。方法调用返回对象（在即时窗口中检查），但是当我将用户属性分配给标签时，就会发生这种情况。

这是我的代码：

```
public Form2()
        {
            UserInfo user = FileAccess.UserInfoFromXML();
            // All the members of user exist.
            label1.Text = "Screen Name: " + user.ScreenName; //This is throwing an Null Reference exception the UserInfo is not null
            label2.Text = "Full Name: "+ user.FirstName + " " + user.LastName;
            label3.Text = "Address: " + user.StreetAddress + " " + user.City + " " + user.State + " " + user.Zip;
            label4.Text = "Email Address: " + user.email;
            label5.Text = "Date Of Birth: " + user.DateOfBirth;
            label6.Text = "Start Date: " + user.StartDate;
            DateTime dt = DateTime.Parse( user.StartDate );
            dt.AddDays( 30 );
            label7.Text = "End Date: " + dt.ToShortDateString();

        } 
```

有任何想法吗？谢谢你

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T11:55:48.310

您必须让`InitializeComponent()`调用停留在构造函数的顶部。

`null`这个设计器生成的方法会初始化您的组件，因此当您访问它们时标签将不再存在。

# javascript - 检查等效性

> ID：13932422
> 
> 赞同：1
> 
> 时间：2012-12-18T11:54:42.290
> 
> 标签：javascript, ruby-on-rails-3.1, underscore.js, gmaps4rails

好的，我在这里遗漏了一些东西，我似乎找不到它，因为逻辑对我来说似乎是正确的，但我确定我没有看到错误。

```
var VisibleMarkers = function() {
var filtered = _.reject(Gmaps.map.markers, function(marker) {
  return marker.grade != $('.mapDataGrade').val() && !_.contains(marker.subjects,$('.mapDataSubjects').val())
  });
return filtered
} 
```

我正在使用 underscore.js 和 jQuery 来简化我的 JavaScript 工作。

所以现在，我正在通过选择哪些数据被拒绝来检查，然后我在（谷歌）地图上显示过滤后的标记（如果它有帮助，这是使用 gmaps4rails，它工作得很好，它这个一些javascript让我失去了我头上的最后一根头发）。

目前，“.mapDataGrade”选择的代码 100% 正确运行，但“.mapDataSubjects”却不是。现在标记对象有一个主题的 json 数组（这是给学生的），并且数组中的每个项目都有它的 ID。它是我应该检查的这个 ID。

有人可以看到我做错了什么吗？

如果需要包含更多信息，请告诉我。

这是在使用 gmaps4rails 的 RoR 应用程序上的纯 JavaScript 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:58:53.930

> 现在标记对象有一个主题的 json 数组（这是给学生的），并且数组中的每个项目都有它的 ID。它是我应该检查的这个 ID。

`_.contains`比较值，但听起来您希望迭代器将值与对象的“id”属性进行比较。为此，[`_.some`](http://underscorejs.org/#some)会起作用；就像`contains`，除了比较值，您可以将比较编写为函数：

> 如果列表中的任何值通过迭代器真值测试，则返回 true。

下面是你如何使用它：

```
!_.some(marker.subjects, function(subject) {
    return subject.id == $('.mapDataSubjects').val();
}) 
```

如果我是对的，整行应该是这样的：

```
return marker.grade != $('.mapDataGrade').val() && 

    // check that none of the subjects is a match
    !_.some(marker.subjects, function(subject) {

        // the current subject is a match if its ID matches the selected value
        return subject.id == $('.mapDataSubjects').val();
    }); 
```

# c# - 如何计算c#中的按钮按下时间？

> ID：13932423
> 
> 赞同：0
> 
> 时间：2012-12-18T11:54:43.097
> 
> 标签：c#, winforms

我的表单中有各种按钮，每个按钮按下一个动作与之相关联。我想测量按钮被按下和释放之间的时间（以毫秒为单位）。我怎样才能为每个按钮做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:03:09.470

在 Form_Load 事件中，您可以迭代所有按钮并将 Stopwatch 动态附加到每个按钮，然后处理它们的 MouseDown 和 MouseUp 事件：

```
this.Controls.OfType<Button>().ToList().ForEach(button =>
{
    button.Tag = new Stopwatch();
    button.MouseDown += new MouseEventHandler(button_MouseDown);
    button.MouseUp += new MouseEventHandler(button_MouseUp);
}); 
```

和功能：

```
void button_MouseUp(object sender, MouseEventArgs e)
{
    Stopwatch watch = ((sender as Button).Tag as Stopwatch);
    watch.Stop();
    MessageBox.Show("This button was clicked for " + watch.Elapsed.TotalMilliseconds + " milliseconds");
    watch.Reset();
}

void button_MouseDown(object sender, MouseEventArgs e)
{
    ((sender as Button).Tag as Stopwatch).Start();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:59:21.250

[可以使用StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)测量时间跨度，或使用*性能分析器*，如
[Equatec](http://eqatec.com/Profiler/)，它也有一个免费选项。

`StopWatch`相对的[StartNew](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.startnew.aspx)和[Stop](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.stop.aspx)方法可以在事件处理程序的前面和末尾注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:04:42.277

您需要捕获down 事件的 and`KeyDown`和up事件的 and。`MouseDown``KeyUp``MouseUp`

```
 public Form1()
    {
        InitializeComponent();
        button1.KeyDown += new KeyEventHandler(button1_down);
        button1.MouseDown+=new MouseEventHandler(button1_down);

        button1.KeyUp += new KeyEventHandler(button1_Up);
        button1.MouseUp += new MouseEventHandler(button1_Up);
    }

    void button1_down(object sender, EventArgs e)
    {
        Console.WriteLine(DateTime.Now.Ticks / TimeSpan.TicksPerMillisecond);
    }

    private void button1_Up(object sender, EventArgs e)
    {
        Console.WriteLine(DateTime.Now.Ticks / TimeSpan.TicksPerMillisecond);
    } 
```

# mysql - 以相反的方式合并

> ID：13932427
> 
> 赞同：1
> 
> 时间：2012-12-18T11:54:55.400
> 
> 标签：mysql

嗨，我有这种情况

**我的桌子**

```
 create table foo(
    id int,
    num int1,
    stage enum('a','b','c'),
    unique(id,stage)
); 
```

**这是数据的片段**

```
INSERT INTO `foo` (`id`, `num`, `stage`) VALUES
(1, 1, 'a'),
(1, 2, 'b'),
(1, 3, 'c'),
(2, 1, 'a'),
(2, 2, 'b'),
(2, 3, 'c'),
(3, 1, 'a'),
(3, 2, 'b'),
(4, 1, 'a'); 
```

> > **桌子上的注释**
> > 
> > *具有 c 状态的 id 必须具有 a,b 的先前状态触发没有问题*

## 将此查询为

![Heidisql 输出](../Images/f8bd4c8b76b6eb4b804c7bb773ed610a.png)

> 我使用 distinct 和标量相关子查询来做到这一点

```
SELECT DISTINCT
id, IFNULL((
SELECT num
FROM foo f
WHERE f.id = foo.id AND f.stage = 'a'),'') `a`, IFNULL((
SELECT num
FROM foo f
WHERE f.id = foo.id AND f.stage = 'b'),'') `b`, IFNULL((
SELECT num
FROM foo f
WHERE f.id = foo.id AND f.stage = 'c'),'') `c`
FROM foo 
```

> > **[底线]** 我想要一个更好的系紧来做到这一点

*谢谢*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:57:09.213

```
SELECT   id,
         MAX(IF(stage = 'a', num, NULL)) AS `a`
         MAX(IF(stage = 'b', num, NULL)) AS `b`
         MAX(IF(stage = 'c', num, NULL)) AS `c`
FROM     foo
GROUP BY id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:03:10.940

尝试这个：

```
SELECT id, IF(a=0, '', a) a, IF(b=0, '', b) b, IF(c=0, '', c) c
FROM (SELECT id, SUM(IF(stage = 'a', num, '')) a, 
            SUM(IF(stage = 'b', num, '')) b, SUM(IF(stage = 'c', num, '')) c
    FROM foo GROUP BY id) AS A 
```

# php - ASCII 字符返回 null NSJSONSerialization

> ID：13932428
> 
> 赞同：0
> 
> 时间：2012-12-18T11:55:07.567
> 
> 标签：php, objective-c, ios

I have data stored in mysql database, the data is encoded in ascii because of some special characters, i am trying to fetch data for iphone application, the json format is correct but due to special characters it returned me null 42756666616c6f205068696c6c79e28099732077696e67732c20636865657365737465616b7320616e64206d6f7265 this is stored in mysql桌子虽然实际上是**Buffalo Philly 的翅膀、奶酪** 牛排等等，但我尝试了 html_entity_decode、html2text 但没有人帮助我，请帮助我，我真的被困住了。

这是我如何从 db 获取数据并以 json 格式打印的代码：

```
$sql = "SELECT  p.product_id,p.image,p.model,d.name,d.product_id,d.language_id  FROM product AS p ,product_description AS d

        WHERE 
        d.product_id = p.product_id
        AND
        d.language_id = 1

        ORDER BY p.date_added

        limit 10
    ";

$rs = mysql_query($sql);
$data = array();
$products = '{"products":{';
$num = mysql_num_rows($rs);

while($d = mysql_fetch_array($rs)){
$image = new SimpleImage();
$image->load($path.$d['image']);
$image->resize(55,55);
$img = strtotime("now").$count;
$image->save("images/".$img.'.jpg');
$pimage = "$img_url/$img.jpg";

$name = html_entity_decode($d['name'],ENT_QUOTES, 'UTF-8');

$highlight = html_entity_decode($d['model'],ENT_QUOTES, 'UTF-8');

if($count < $num){
    $products .= '"'.$d["product_id"].'":[
                                            {
                                                "id":"'.$d["product_id"].'",
                                                "name":"'.$name.'",
                                                "image_url":"'.$pimage.'",
                                                "highlight":"'.$highlight.'"
                                            }
                                        ],';
    }else{
    $products .= '"'.$d["product_id"].'":[
                                            {
                                                "id":"'.$d["product_id"].'",
                                                "name":"'.$d["name"].'",
                                                "image_url":"'.$pimage.'",
                                                "highlight":"'.$highlight.'"
                                            }
                                        ]';
}

}
$products .='}}';

print($products); 
```

对象-c代码是：

```
NSData *data = [NSData dataWithContentsOfURL:soURL];
    NSError *error;
    productsRaw = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    products = [productsRaw objectForKey:@"products"];
    productKeys = [products allKeys]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:35:15.070

该字符串似乎是十六进制编码的。您可以使用[pack](http://php.net/manual/en/function.pack.php)功能，如下所示：

```
pack('H*', $data); 
```

如[this SO page](https://stackoverflow.com/questions/7488538/convert-hex-to-ascii-characters)中所述，或接近它的东西（`'h*'`包装参数可能有效）。

请注意，生成的字符串将进行**语言环境**编码，因此根据原始应用程序中使用的语言环境，您可能需要进行一些语言环境转换才能获得正确编码的字符串。为此，我建议使用[iconv](http://php.net/manual/en/function.iconv.php)函数，但无论如何你必须知道最初使用的语言环境。

# android - Android edittext 无法复制文本

> ID：13932429
> 
> 赞同：0
> 
> 时间：2012-12-18T11:55:07.517
> 
> 标签：android, android-edittext

我正在尝试以用户身份复制粘贴我的应用程序的 editText 的内容。

不幸的是，它不起作用，而且这似乎不是一个常见问题。

我怀疑一个愚蠢的原因，但仍然找不到原因。以防万一这是我的 xml 代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<com.adylitica.customlistview.CustomLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutContainer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/default_enlightenment"
    android:orientation="horizontal" >

<com.adylitica.components.EditTextNotes
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/note"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@null"
    android:paddingBottom="25dp"
    android:paddingTop="10dp"
    android:textColor="#301e1b"
    android:textSize="24dp" />

<TextView
    android:id="@+id/time"
    android:layout_width="82dp"
    android:layout_height="65dp"
    android:background="@drawable/circle_background"
    android:gravity="center"
    android:textColor="@drawable/color_text"
    android:textSize="18dp" /> 
```

这是扩展 EditText 的组件的代码：

```
package com.adylitica.components;

import com.adylitica.activity.R;

import android.content.Context;
import android.content.SharedPreferences;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.EditText;
import android.widget.TextView;

/**
 * Defines a custom EditText View that draws lines between each line of text that is displayed.
 */
public class EditTextNotes extends EditText {

private Context contextP;
private Rect mRect;
private Bitmap line;
public static int nbLines = 0;

public EditTextNotes(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);

    contextP = context;
    line = BitmapFactory.decodeResource(contextP.getResources(), R.drawable.line_thin);
    line = Bitmap.createBitmap(line, 0, 0, 2000, 1);

    mRect = new Rect();
}

public EditTextNotes(Context context, AttributeSet attrs) {
    super(context, attrs);

    contextP = context;
    line = BitmapFactory.decodeResource(contextP.getResources(), R.drawable.line_thin);
    line = Bitmap.createBitmap(line, 0, 0, 2000, 1);

    mRect = new Rect();

}

public EditTextNotes(Context context) {
    super(context);

    contextP = context;
    line = BitmapFactory.decodeResource(contextP.getResources(), R.drawable.line_thin);
    line = Bitmap.createBitmap(line, 0, 0, 2000, 1);

    mRect = new Rect();
}

@Override
protected void onDraw(Canvas canvas) {

    int count = getLineCount();

    Rect r = mRect;

    int baseline = 0;
    int addSize = 0;
    canvas.drawBitmap(line, 0, baseline, null);

    for (int i = 0; i < count; i++) {
        baseline = getLineBounds(i, r) + addSize;
        canvas.drawBitmap(line, 0, baseline, null);
        nbLines++;
    }

    super.onDraw(canvas);
}

} 
```

PS：否则editText的行为还可以，就像我可以得到焦点一样，写进去......我只是无法选择整个文本并复制它。

# sql - 在sql中显示10条记录中的唯一字段

> ID：13932434
> 
> 赞同：1
> 
> 时间：2012-12-18T11:55:28.160
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的 sql 查询是

```
select I.[Old Product Code], 
    I.[Trade Name], 
    I.[Short Name], 
    SIL.[BOM Item No_] ,
    CASE when SIL.[Dimension Group Code] = 'IOL' 
        then I.[Group Description] 
        else I.[Short Name] END as GD,
    CASE when SIL.[BOM Item No_] <> '' 
        then 'Kit' end
from [Sales Invoice Header] SIH, [Sales Invoice Line]  SIL, [Item] I 
where I.No_ =  SIL.No_ 
    and SIL.[Document No_] = 'PEXP1213-153' 
    and SIH.No_ = SIL.[Document No_] 
group by I.[Old Product Code], I.[Trade Name], I.[Short Name],  
    SIL.[Dimension Group Code], I.[Group Description], SIL.[BOM Item No_] 
```

我的结果是

![电流输出](../Images/c166078dd2d0a38404dffad84dcbe410.png)

在这 21 行中，我有 17 行作为套件。我需要将此套件分组并在旧产品代码中显示为一行而不是 17 行的套件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:46:18.597

查看您要执行的操作，您可能可以使用类似这样的方法来返回数据：

```
;with data as
(
  select I.[Old Product Code], 
      I.[Trade Name], 
      I.[Short Name], 
      SIL.[BOM Item No_] ,
      CASE when SIL.[Dimension Group Code] = 'IOL' 
          then I.[Group Description] 
          else I.[Short Name] END as GD,
      CASE when SIL.[BOM Item No_] <> '' 
          then 'Kit' end CombinedKit
  from SalesInvoiceHeader SIH
  inner join SalesInvoiceLine  SIL
    on SIH.No_ = SIL.[Document No_] 
  inner join Item I 
    on I.No_ =  SIL.No_ 
  where SIL.[Document No_] = 'PEXP1213-153' 
),
d2 as
(
  select [Old Product Code],
    [Trade Name],
    [Short Name],
    [BOM Item No_],
    GD,
    CombinedKit,
    row_number() 
      over(partition by CombinedKit order by [Old Product Code]) rn
  from data
) 
select 
    case when combinedkit = 'kit' 
        then 'Kit' else [Old Product Code] end  [Old Product Code],
    [Trade Name],
    [Short Name],
    [BOM Item No_],
    GD
    --, CombinedKit
from d2
where (CombinedKit = 'Kit' and rn = 1)
  or (CombinedKit is null) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/df9b5/16)

编辑，如果您想以特定方式订购它，您可以使用`Order By`语句`CASE`：

```
;with data as
(
  select I.[Old Product Code], 
      I.[Trade Name], 
      I.[Short Name], 
      SIL.[BOM Item No_] ,
      CASE when SIL.[Dimension Group Code] = 'IOL' 
          then I.[Group Description] 
          else I.[Short Name] END as GD,
      CASE when SIL.[BOM Item No_] <> '' 
          then 'Kit' end CombinedKit
  from SalesInvoiceHeader SIH
  inner join SalesInvoiceLine  SIL
    on SIH.No_ = SIL.[Document No_] 
  inner join Item I 
    on I.No_ =  SIL.No_ 
  where SIL.[Document No_] = 'PEXP1213-153' 
),
d2 as
(
  select [Old Product Code],
    [Trade Name],
    [Short Name],
    [BOM Item No_],
    GD,
    CombinedKit,
    row_number() 
      over(partition by CombinedKit order by [Old Product Code]) rn
  from data
) 
select 
    case when combinedkit = 'kit' 
        then 'Kit' else [Old Product Code] end  [Old Product Code],
    [Trade Name],
    [Short Name],
    [BOM Item No_],
    GD
    --, CombinedKit
from d2
where (CombinedKit = 'Kit' and rn = 1)
  or (CombinedKit is null) 
order by 
  case when combinedkit = 'kit' then 0 else 1 end, [Old Product Code] 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/df9b5/20)

# c# - 使用 Entityframework 4.1 或更高版本查询大数据时遇到超时

> ID：13932435
> 
> 赞同：0
> 
> 时间：2012-12-18T11:55:28.817
> 
> 标签：c#, entity-framework-4.1, repository-pattern, unit-of-work

使用 EF 4.1，我正在尝试用 50000 查询大型数据表。我为 DbContext 设置了相对较高的超时时间：

```
 public class YourContext : DbContext
{
  public YourContext()
    : base("YourConnectionString")
  {
    // Get the ObjectContext related to this DbContext
    var objectContext = (this as IObjectContextAdapter).ObjectContext;

    // Sets the command timeout for all the commands
    objectContext.CommandTimeout = 500;
  }
} 
```

但它似乎仍然不够，但当我采取（10000）时，它可以工作。我在这里没有服务器端分页的选项。很高兴知道如何摆脱这种超时情况。

它是由实现或存储库模式引起的还是 EF 无法处理大数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:06:22.947

你在那里走了一条糟糕的路……

从数据库加载所有数据是一种不好的做法。
如果您实现了服务器端分页，或者如果您不需要填充，则只需实现按需加载功能会更好。

我怀疑用户将查看所有数据，因此无需从数据库中获取它。

最好每天多花一些额外的时间，但要做到这一点。

正如实践表明的那样，您将收到客户/客户/用户对性能的抱怨，您必须正确地重写漏洞。

你最好三思而后行，不要偷懒；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:06:58.173

EF 可以处理大数据。

它只是一个配置，因为您已经发现大多数“连接”都有（您也可以在 ADO.net 中使用 timeOut）。默认情况下，它设置为 30 秒，您可以更改它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:09:46.373

在您当前的情况下，很难确定 EF 可以处理的最大数据量。我建议选择延迟加载，但这并不能完全解决问题。如果我在你的地方，我会尝试使用一些缓存功能，因为在你的情况下分页也不可行。

这些只是我的建议而不是解决方案。

# android - Android Google Maps v2 - 为 myLocation 设置缩放级别

> ID：13932441
> 
> 赞同：118
> 
> 时间：2012-12-18T11:55:47.657
> 
> 标签：android, google-maps-mobile, google-maps-android-api-2

是否可以使用新的 Google Maps API v2 更改 myLocation 的缩放级别？

如果您设置`GoogleMap.setEnableMyLocation(true);`，您会在地图上找到一个按钮来查找您的位置。

如果您单击它，那么地图会将您带到您的位置并将其放大到一定程度。我可以将此缩放更改为更少或更多吗？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-12-18T15:43:03.537

您是否可以使用默认的 myLocation 标记在单击时更改它，这是值得怀疑的。但是，如果您希望应用程序在找到您的位置后自动放大，我会查看我对[这个问题的回答](https://stackoverflow.com/questions/13739990/map-view-following-user-mylocationoverlay-type-functionality-for-android-maps/13753518#13753518)

请注意，我提供的答案没有放大，但是如果您将 onLocationChanged 方法修改为如下所示，则可以选择您喜欢的任何缩放级别：

```
@Override
public void onLocationChanged(Location location) {
    if( mListener != null ) {
        mListener.onLocationChanged( location );

        //Move the camera to the user's location and zoom in!
        mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(location.getLatitude(), location.getLongitude()), 12.0f));
    }
} 
```

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2013-03-19T16:45:48.380

您还可以使用：

```
mMap.animateCamera( CameraUpdateFactory.zoomTo( 17.0f ) ); 
```

只需将缩放值更改为最小值 = 2.0 和最大值 = 21.0 之间的任何所需值。

API 警告说，并非所有位置都具有处于或接近最大缩放值的图块。

有关. [_](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory#zoomBy%28float,%20android.graphics.Point%29) _`CameraUpdateFactory`

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-10-13T10:14:57.887

带位置 - 在新的 GoogleMaps SDK 中：

```
mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(chLocation,14)); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-06-15T08:27:40.470

以下是[大概的缩放级别](https://developers.google.com/maps/documentation/android-sdk/views#zoom)和它们的作用：

```
1: World
5: Landmass/continent
10: City
15: Streets
20: Buildings 
```

所以你可以做这样的事情来放大到街道水平例如（注意下面的“15f”是街道水平）：

```
 override fun onMapReady(googleMap: GoogleMap?) {
    googleMap?.mapType = GoogleMap.MAP_TYPE_NORMAL
    googleMap?.addMarker(MarkerOptions()
            .position(LatLng(37.4233438, -122.0728817))
            .title("cool place")

            .icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_ROSE)))

    googleMap?.animateCamera(CameraUpdateFactory.newLatLngZoom(LatLng(37.4233438, -122.0728817), 15f)) 
```

注意：只是为了让您知道不同的位置可以有不同的最大缩放级别。`googleMap.maxZoomLevel`如果您想获得最大或最小缩放级别，请尝试使用。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-06-30T16:22:59.190

与 HeatfanJohn 的解决方案略有不同，我将缩放相对于当前缩放级别更改：

```
// Zoom out just a little
map.animateCamera(CameraUpdateFactory.zoomTo(map.getCameraPosition().zoom - 0.5f)); 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2018-01-28T13:44:46.753

在 onMapReady() 方法中

将 zoomLevel 更改为任何所需的值。

```
float zoomLevel = (float) 18.0;
mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, zoomLevel)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-28T13:38:55.740

你只需要在 maps_activity.xml 中写一行

```
map:cameraZoom="13" 
```

我希望这能解决你的问题......

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-10-07T10:57:09.583

您可以使用

```
 CameraUpdate center = CameraUpdateFactory.newLatLng(new LatLng(location.getLatitude(), location.getLongitude()));
    CameraUpdate zoom = CameraUpdateFactory.zoomTo(12); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-07T12:51:43.903

即使我最近也有同样的查询....有些上面提到的 setmaxzoom 或 map:cameraZoom="13" 都没有工作所以我发现我使用的依赖是旧的，请确保您对谷歌地图的依赖是正确的这是最新的使用这个

```
compile 'com.google.android.gms:play-services:11.8.0' 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-10-16T08:52:09.390

`mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(currentPlace,15));` 这是不会有动画效果的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-05-04T20:25:52.247

我试过“mMap.animateCamera（CameraUpdateFactory.zoomTo（17.0f））；” 但这对我不起作用。所以我用这个动画在开始时放大。

```
LatLng loc = new LatLng(33.8688, 151.2093);
mMap.addMarker(new MarkerOptions().position(loc).title("Sydney"));
mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(loc, 18), 5000, null); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-09-14T07:00:34.777

```
Location locaton;
double latitude = location.getlatitude;
double longitude = location.getlongitude; 
```

如果你想保存缩放或一直获取它，你只需要调用以下

```
int zoom = mMap.getCameraPosition().zoom;

//To set that just use

mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(getlatitude(), getlongitude),zoom); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-17T13:17:02.250

上面的大多数答案要么已弃用，要么通过保留当前的纬度和经度来进行缩放，并且不会缩放到您想要的确切位置。将以下代码添加到您的**onMapReady()**方法中。

```
@Override
public void onMapReady(GoogleMap googleMap) {
    //Set marker on the map
    googleMap.addMarker(new MarkerOptions().position(new LatLng(0.0000, 0.0000)).title("Marker"));
    //Create a CameraUpdate variable to store the intended location and zoom of the camera
    CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(new LatLng(0.0000, 0.0000), 13);
    //Animate the zoom using the animateCamera() method
    googleMap.animateCamera(cameraUpdate);
} 
```

# python - Python字符串不可变？

> ID：13932442
> 
> 赞同：1
> 
> 时间：2012-12-18T11:55:55.150
> 
> 标签：python, string, python-3.x, immutability

Python 字符串应该像整数一样是不可变的。考虑一下：

```
>>> num1 = 34
>>> num2 = 36
>>> id(num1)
505894832
>>> num4 = 34
>>> id(num4)
505894832 
```

`num4`具有与 num1 完全相同的 ID，这意味着它们指向同一事物。字符串不应该发生同样的事情吗？我很困惑：

```
>>> name = "Sumeet"
>>> id(name)
35692000
>>> name = "Ali"
>>> id(name)
35926912
>>> naam = "Sumeet"
>>> id(naam)
35926848 
```

最后的输出不应该是： `35692000`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:03:22.717

多个变量具有相同 id 的事实与实际对象是不可变的没有太大关系。

事实上，由于它们的不变性，这可以安全地发生（节省内存）。

假设 python 中的字符串不是不可变的，您声明：

`a = 'abc'`

`b = 'abc'`

如果你改变了`a`，这意味着`b`要么引用一个完全不同的对象（复制表示相同文字字符串所需的内存），或者当`a`改变时，必须复制整个对象才能进行更改（这样 b 就不会受到影响）。

由于字符串是不可变的，因此两个变量可以安全地指向同一个对象。对不可变数据结构的任何更改都会创建一个新结构，并且指向它的引用将更改为新结构，而对“旧”结构的所有其他引用保持不变。不可变数据结构中没有副作用极大地降低了由于共享结构/对象在代码中的其他位置被更改而发生错误的可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:01:44.137

CPython 实习了一些非常小的整数和非常小的字符串，但你不能依赖它，因为它依赖于实现。

因此，这里有一些针对您的发现的反例：

```
>>> a = 123456
>>> b = 123456
>>> id(a)
30497296
>>> id(b)
30496144
>>> a = "hey"
>>> b = "hey"
>>> id(a)
44067112
>>> id(b)
44067112 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T12:13:59.523

不，它并不指向同一件事，原因很简单。

当你这样做时：

```
name = 'Sumeet' 
```

您实际上创建了一个新`string`对象并将其绑定到`name`引用。当你这样做时：

```
naam = 'Sumeet' 
```

您将再次创建一个**NEW** `string`对象并将其绑定到`naam`引用。为了让它们指向同一个对象，您应该这样做：

`naam = name`

这使得`naam`引用同一个对象`name`。

* * *

关于整数，`CPython`Python 的实现有一个缓存小整数的特性。例如，根据[这个源](http://choorucode.wordpress.com/2012/05/01/integer-caching-in-python/)python 3.2 缓存整数对象从`-5`to `256`。

# c++ - VS 2012 中的错误 C1047

> ID：13932447
> 
> 赞同：0
> 
> 时间：2012-12-18T11:56:09.997
> 
> 标签：c++, visual-studio-2012

我使用的是 VS 2012，当我在调试模式下编译我的项目时，没有错误。但是在尝试以发布模式编译项目时，我收到下一条错误消息（错误 C1047）：

> 致命错误 C1047：对象或库文件“ *file.lib* ”是使用比其他对象更旧的编译器创建的；重建旧对象和库

我了解到旧版本的 VS 安装了解决此问题的 SP1，但找不到此问题的解决方案。

有没有人看到这个并且知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:43:05.900

如果您使用的是由不同编译器构建的库，则需要在 VS2012 中重新编译这些库。

# asp.net - 为子目录应用不同的配置（全球化）设置

> ID：13932448
> 
> 赞同：0
> 
> 时间：2012-12-18T11:56:13.200
> 
> 标签：asp.net

我正在尝试在子目录（~/MainSite/Forum/）上应用不同的设置（全球化）。为此，我在子目录 ~/MainSite/Forum/web.config 下创建了一个配置文件

但是子目录（~/MainSite/Forum/）总是从根配置（~/MainSite/web.config）而不是它自己的配置（~/MainSite/Forum/web.config）文件中获取全球化设置。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:01:27.363

尝试在根 web.config 中使用：

```
 <location path="/MainSite/Forum/">
    <system.web>
      <globalization/>
    </system.web>
  </location> 
```

# android - 在 android 设备上直接在 wifi 中共享数据

> ID：13932451
> 
> 赞同：1
> 
> 时间：2012-12-18T11:56:31.530
> 
> 标签：android, wifi, wifi-direct

在过去的两天里，我一直在阅读有关 WiFi direct 的信息，发现在没有中间接入点的设备之间共享数据非常有趣。我想知道是否可以在两个设备之间共享数据，并且它们之间有第三个设备连接？

示例：如果设备A想与设备B共享（发送/接收）数据，是否可以连接到中间设备C建立连接并共享数据？通过这种方式，A 到 B 之间的范围可以无间断地增加。

谢谢。乌迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:02:26.943

这是可能的，但不是直接的。您可以在和之间建立`WiFi Direct`链接，也可以在和之间建立链接。缺少的是 . 中的 2 个链接之间的数据转发。这被称为。您应该能够找到进行桥接的 android 应用程序。`A``C``B``C``C``bridge`

# android - 获取 PNR 状态的公共 API 调用

> ID：13932453
> 
> 赞同：6
> 
> 时间：2012-12-18T11:56:33.327
> 
> 标签：android, iphone

我想在我的应用程序中集成获取 PNR 状态功能，但没有任何 api 调用来获取它。是否有任何公共 api 调用可用于获取当前的印度铁路 PNR 状态。如果是，请提供该呼叫和呼叫模式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T12:02:41.263

在那里你可以使用这个网址`http://pnrapi.appspot.com/+ tenDigitPNRNumber`

你可以[**在这里**](http://pnrapi.appspot.com/)查看更多

或者你可以去[**erail**](https://github.com/dash1291/erail_script)

查找火车--> 请求 URL：[http ://erail.in/rail/getTrains.aspx?Station_From=GWL&Station_To=NDLS&DataSource=0&Language=0](http://erail.in/rail/getTrains.aspx?Station_From=GWL&Station_To=NDLS&DataSource=0&Language=0)

---火车模式

---火车项目

```
//Use  this regex to get the value  
reg=re.compile(r'\^\d+\~[A-Za-z0-9 ]+')

    ---train numbers from train items
        reg=re.compile(r'\d+')
    ---train names from train items
        reg=re.compile(r'[A-Za-z0-9 ]+') 
```

查找可用性--> 请求 URL： http://indiatrain.in/Rail/getAvailabilityMMT2.aspx?Train_No=11077&Station_From=GWL&Station_To=NDLS&mDay=10&mMonth=10&mYear=2011&mClass=3A&mQuota=GN&temp= [1318195420696](http://indiatrain.in/Rail/getAvailabilityMMT2.aspx?Train_No=11077&Station_From=GWL&Station_To=NDLS&mDay=10&mMonth=10&mYear=2011&mClass=3A&mQuota=GN&temp=1318195420696)

# php - 我需要从 wordpress 网站上的表单中填充 pdf

> ID：13932461
> 
> 赞同：1
> 
> 时间：2012-12-18T11:56:58.160
> 
> 标签：php, forms, wordpress, pdf

我以为我可以为此找到一个插件，但似乎没有。

这是必需的过程：

用户在网站上填写表格（最好是 cforms！）表格中的数据填充服务器上 pdf 的空单元格

然后，一旦我走到那一步，我就会担心接下来的步骤！

生成 pdf 不是一种选择，因为它是法律文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T11:59:15.510

好的，我已经想出了如何做到这一点，它似乎有点乱，可惜没有更简单的方法！

我使用的两个插件是 cforms (www.deliciousdays.com/cforms-plugin) 和一个加载 Zend 框架的插件 (h6e.net/wordpress/plugins/zend-framework) pdf写作能力。

激活两个插件后，在 cforms 插件目录中找到名为 my-functions.php 的文件并下载到您的计算机。该文件的大部分内容已被注释掉，因此您需要取消注释该功能

```
function my_cforms_action($cformsdata) {

} 
```

按下提交按钮时，此函数中的任何内容都会运行（有关详细信息，请参阅 cforms API 文档）。您可以测试它是否有效，但会在 this 函数中回显某些内容。您还可以测试 Zend 框架是否已加载使用

```
if (defined('WP_ZEND_FRAMEWORK') && constant('WP_ZEND_FRAMEWORK')) {
      echo 'Zend is working!';
  } 
```

表单字段以数组形式出现，因此我们需要先将其打印出来以计算字段名称（将“5”替换为您使用的任何表单）：

```
$formID = $cformsdata['id'];
$form   = $cformsdata['data'];

if ( $formID == '5' ) {
    print_r($form);
} 
```

一旦你有了你的字段名称，这就是写入 pdf 的完整代码

```
//Get the ID of the current form and all the data that's been submitted
$formID = $cformsdata['id'];
$form   = $cformsdata['data'];

//run this code only if it's the form with this ID
if ( $formID == '5' ) {

        //Loads the Zend pdf code
    require_once 'Zend/Pdf.php';

    //Set the path of the pdf (in the root of my wordpress installation)
    $fileName = 'c100-eng2.pdf';

    //loads the pdf 
    $pdf = Zend_Pdf::load($fileName);

        //Selects the page to write to
    $page = $pdf->pages[0];
       //Selects which font to use
    $font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);
    $page->setFont($font, 12);

    //Writes the text from the field 'Your name' 210 points from the left and 420 points from the bottom of the selected page
    $page->drawText($form['cf_form5_Your name'], 210, 420);

    //for some reason there is no way to wrap text using Zend_pdf so we have to do it ourselves for any paragraphs...
    //starting 600 points from the bottom of the page
    $startPos = 600;
    //we're using the form field "About you"
    $paragraph = $form['cf_form5_About you'];
    //sets the width of the paragraph to 30 characters 
    $paragraph = wordwrap( $paragraph, 30, '\n');
    //breaks paragraph into lines
        $paragraphArray = explode('\n', $paragraph);
    //writes out the lines starting 200 points from the left with a line height of 12 points
        foreach ($paragraphArray as $line) {
            $line = ltrim($line);
            $page->drawText($line, 200, $startPos);
            $startPos = $startPos - 12;
        }

 //saves the pdf
$pdf->save('new.pdf'); 
```

我一开始就遇到了问题，因为我使用的 pdf 类型不正确，您可以通过使用 Zend pdf 创建一个 pdf 来检查您的代码是否正确，因为这应该始终有效（在此处了解如何做到这一点：framework.pdf）。 zend.com/manual/1.12/en/zend.pdf.html）。

我使用 Photoshop 通过将标尺设置为“点”来计算出我想要书写的确切位置

# c++ - 在 C++ 中查找和存储超像素邻域的算法和数据结构

> ID：13932464
> 
> 赞同：7
> 
> 时间：2012-12-18T11:57:03.333
> 
> 标签：c++, data-structures, boost-graph

我有一张图像，包含分割结果，就像这个。![在此处输入图像描述](../Images/c94c89984d317e77f9c293177fccbdbc.png)

我需要建立一个补丁邻域图，用不同的颜色着色。结果我想要一个结构，代表以下 ![在此处输入图像描述](../Images/5fd7404e2acd78e27aee0efdd5deb9bb.png)

这里的数字代表单独的补丁，线代表补丁的邻域。目前我不知道从哪里开始，谷歌要搜索哪些关键字。

任何人都可以提出任何有用的建议吗？

图像存储在 OpenCV 的 cv::Mat 类中，至于图形，我打算使用 Boost.Graph 库。

所以，请给我一些代码示例和算法或关键字的链接。

谢谢。

**更新**。在茶歇和一些讨论之后，我想到了以下内容。

1.  构建一个大点阵图，其中每个节点对应每个图像像素，链接连接 8 个或 4 个邻居。
2.  用相应的像素值标记每个图形节点。
3.  尝试以某种方式合并具有相同标签的节点。

我的另一个问题是我不熟悉 BGL（但是这本书正在编写中:)）。

那么，您如何看待这个解决方案？

**Update2** 可能，此[链接](http://en.wikipedia.org/wiki/Connected-component_labeling)可以提供帮助。

但是，仍然没有找到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:40:58.857

你可以这样解决它：

1.  定义区域（图表中的数字）

    *   制作一个存储区域编号的二维数组
    *   从 (0/0) 开始并将其设置为 1（区域编号）
    *   使用洪水填充算法或其他方法将整个区域设置为 1。
    *   在填充期间，您可能会遇到颜色不同的坐标。将它们存储在队列中。如果您之前的填充完成，则从这些坐标开始填充并增加区域编号。

    .

2.  建立区域之间的联系

    *   遍历您的二维数组。
    *   如果您有相邻的数字，请存储数字对（可能以排序方式，您还必须检查该对是否已经存在）。如果您从左到右前进，您只需要检查下面的元素，右边和右边的一个对角线。

虽然我不得不承认我对这个话题一无所知..只是我的简单想法..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:48:10.213

您可以使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)来标记区域。

要将 cv::Mat 暴露给 BGL，您应该编写大量代码。我认为编写自己的 bfs 要简单得多。

比你为每两个 negbos 写他们的分数`std::set<std::pair<mark_t, mark_t>>`。而不是从中构建图表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:47:49.887

我认为如果你的色块是随机的，你可能需要一个蛮力算法来做你想做的事。一个想法可能是：

*   做第一次蛮力传球。这必须识别所有补丁。例如，制作一个与图像大小相同的矩阵A，并将其初始化为0。对于每个仍然为零的像素，从它开始并将其标记为新的patch，并尝试使用蛮力方法找到整个补丁的范围。然后，每个矩阵单元的值将等于它所在的块的数量。
*   补丁号必须是`2^N`，例如 1, 2, 4, 8, ...
*   制作另一个图像大小的矩阵 B，但每个单元格包含两个值。这将表示像素之间的连接。对于矩阵 B 的每个单元，第一个值将是像素中的补丁编号与相邻像素的补丁编号之间的绝对差。第一个值是与下方像素的差异，第二个是与左侧像素的差异。
*   选择矩阵 B 中的所有唯一值，您就有了所有可能的连接。

这是有效的，因为补丁编号之间的每个差异都是唯一的。例如，如果在 B 中你最终得到数字 3、6、7，这将意味着补丁 (4,1)、(8,2) 和 (8,1) 之间存在联系。值 0 当然意味着同一块中有两个像素彼此相邻，因此您只需忽略它们即可。

# yii - 下拉列表中的 Yii 和数据库行

> ID：13932468
> 
> 赞同：5
> 
> 时间：2012-12-18T11:57:16.287
> 
> 标签：yii

我有两个模型： test1 ， test2 和 test1 中的一个动作：

```
public function active_widgets_list()
{
    $widgets = SiteWidget::model()->find('status=:status', array(':status' => '1'));
    return $widgets;
} 
```

我将在 test2 的视图中将 test1.tbl_1 行显示为下拉列表：

```
$list=CHtml::listData(SiteWidget::model()->active_widgets_list(), 'id', 'title');
echo $form->dropDownList($model,'widget_id', $list, array('empty' => 'Select Please')); 
```

但下来不起作用。我只有一个空的下拉菜单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:09:57.530

您应该使用[`findAll`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail "http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail")而不是`find`，因为`find`仅返回具有指定条件的单个活动记录。

```
$widgets = SiteWidget::model()->findAll('status=:status', array(':status' => '1')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T04:47:45.697

如果你使用 Gii 工具，你不需要任何东西来保存。它会生成您需要的所有代码。制作大量模型、控制器、视图和 CRUD 非常容易。

[http://www.yiiframework.com/doc/guide/1.1/en/topics.gii](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii)

# android - GooglePlayServicesUtil.getErrorDialog 为空

> ID：13932474
> 
> 赞同：37
> 
> 时间：2012-12-18T11:57:33.070
> 
> 标签：android, google-maps, google-maps-android-api-2, google-play-services

我正在使用 ACRA ( [arca.ch](http://acra.ch) ) 生成自动错误报告。

我刚刚使用 Google Maps Android API v2 发布了我的应用程序的新版本。我在尝试显示 GooglePlayServicesUtil.getErrorDialog 返回的对话框时收到 EEEPad 和 Transformer Pad 用户报告的错误。有谁知道为什么会发生这种情况？

以下是 acra 报告的相关代码和 Logcat：

调用此行时：

```
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
if(resultCode != ConnectionResult.SUCCESS)
{
        //The dialog that comes back is null (probably due to the logcat message)
        Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 69);
        //So when I call the next line, the app crashes with a NullPointerException
        dialog.show();
}
... 
```

日志猫：

```
12-18 04:21:04.531 W/GooglePlayServicesUtil( 3977): Google Play Store signature invalid.
12-18 04:21:04.551 E/GooglePlayServicesUtil( 3977): Google Play services is invalid. Cannot recover. 
```

提前感谢您提供的任何帮助。

**更新**

谷歌尚未解决该问题，一旦我听到任何内容，我将更新此问题（请参阅 CommonsWare 对 Google Bug 报告链接的回答）。同时，如果您遇到此问题并且不希望您的应用程序崩溃，这就是我目前正在做的事情：

```
public void checkGooglePlayServicesAvailability()
{
    int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    if(resultCode != ConnectionResult.SUCCESS)
    {
        Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, this, 69);
        if(dialog != null)
        {
            dialog.show();                
        }
        else
        {
            showOkDialogWithText(this, "Something went wrong. Please make sure that you have the Play Store installed and that you are connected to the internet. Contact developer with details if this persists.");
        }
    }

    Log.d("GooglePlayServicesUtil Check", "Result is: " + resultCode);
}

public static void showOkDialogWithText(Context context, String messageText)
{
    Builder builder = new AlertDialog.Builder(context);
    builder.setMessage(messageText);
    builder.setCancelable(true);
    builder.setPositiveButton("OK", null);
    AlertDialog dialog = builder.create();
    dialog.show();
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-04T22:37:05.080

如果结果代码为,或. Google[建议](https://developer.android.com/google/play-services/setup.html)（也在[docs](https://developer.android.com/reference/com/google/android/gms/common/ConnectionResult.html)中）调用。所以可能是最后一个可能的状态代码 ( ) 是造成问题的原因。`getErrorDialog()``SERVICE_MISSING``SERVICE_VERSION_UPDATE_REQUIRED``SERVICE_DISABLED``SERVICE_INVALID`

我正在使用以下代码，到目前为止它似乎工作正常（在模拟器中测试，平台 2.3.3）：

```
int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(activity.getApplicationContext());
if (resultCode == ConnectionResult.SUCCESS) {
    activity.selectMap();
} else if (resultCode == ConnectionResult.SERVICE_MISSING ||
           resultCode == ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED ||
           resultCode == ConnectionResult.SERVICE_DISABLED) {
    Dialog dialog = GooglePlayServicesUtil.getErrorDialog(resultCode, activity, 1);
    dialog.show();
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-08-04T08:40:30.273

似乎您必须`isUserRecoverableError`在尝试显示对话框之前进行检查。

```
 int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
  if (status != ConnectionResult.SUCCESS) {
    if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
      GooglePlayServicesUtil.getErrorDialog(status, this, 
      REQUEST_CODE_RECOVER_PLAY_SERVICES).show();
    } else {
      Toast.makeText(this, "This device is not supported.", 
          Toast.LENGTH_LONG).show();
      finish();
    }
  } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-26T04:41:02.857

基于 Rahim 的代码，我添加了防止用户关闭 Google Play 服务对话框（通过点击后退按钮）并在未安装 Google Play 服务的情况下继续使用该应用程序的功能：

```
private void checkGooglePlayServicesAvailable() {
    int status = GooglePlayServicesUtil.isGooglePlayServicesAvailable(this);
    if (status != ConnectionResult.SUCCESS) {
        if (GooglePlayServicesUtil.isUserRecoverableError(status)) {
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(status, this, 0);
            dialog.setOnCancelListener(new DialogInterface.OnCancelListener() {
                @Override
                public void onCancel(DialogInterface dialogInterface) {
                    MainActivity.this.finish();
                }
            });
            dialog.show();
        } else {
            Toast.makeText(this, "This device is not supported.", Toast.LENGTH_LONG).show();
            finish();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T08:22:44.213

[@Nevermore](https://stackoverflow.com/users/1948704/nevermore)对答案的更新，因为`GooglePlayServicesUtil`不推荐使用方法以支持`GoogleApiAvailability`：

```
GoogleApiAvailability googleApiAvailability = GoogleApiAvailability.getInstance();
int resultCode = googleApiAvailability.isGooglePlayServicesAvailable(activity.getApplicationContext());
if (resultCode == ConnectionResult.SUCCESS) {
    activity.selectMap();
} else if (resultCode == ConnectionResult.SERVICE_MISSING ||
           resultCode == ConnectionResult.SERVICE_VERSION_UPDATE_REQUIRED ||
           resultCode == ConnectionResult.SERVICE_DISABLED) {
    Dialog dialog = googleApiAvailability.getErrorDialog(activity, resultCode, 1);
    dialog.show();
} 
```

请注意，前两个参数的顺序在实现中`getErrorDialog()`已被调换`GoogleApiAvailability`。

# php - MySql select，需要添加到我的语句中

> ID：13932478
> 
> 赞同：-4
> 
> 时间：2012-12-18T11:57:49.170
> 
> 标签：php, mysql, select

我有一个从数据库中选择活动项目的语句，但我也想让它选择以名称 BlueBall 开头的项目。

我当前的代码：

```
$query = "SELECT ShortName FROM product WHERE Active = 1"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:59:22.097

```
SELECT ShortName FROM product WHERE Active = 1 OR ShortName LIKE 'BlueBall%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:59:23.540

```
SELECT ShortName FROM product WHERE Active = 1 AND ShortName LIKE 'BlueBall%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:05:53.477

```
SELECT ShortName FROM product WHERE Active = 1 OR ShortName LIKE 'BlueBall%' 
```

会工作。 [http://w3schools.com/sql/sql_like.asp](http://w3schools.com/sql/sql_like.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:59:55.477

您需要使用这样的`like`条件：

```
$query = "SELECT ShortName FROM product WHERE Active = 1 AND ShortName like 'BlueBall%'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:00:30.280

```
SELECT ShortName FROM product WHERE Active = 1 AND ShortName LIKE "BlueBall%" 
```

见：[http ://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T12:00:52.277

只需`where`使用 OR 运算符将名称添加到子句
以下是重写的查询：

```
$query = "SELECT ShortName FROM product WHERE Active = 1 OR name like 'BlueBall%'; 
```

# intellij-idea - Intellij Idea 12 gradle 构建

> ID：13932481
> 
> 赞同：3
> 
> 时间：2012-12-18T11:58:07.317
> 
> 标签：intellij-idea, gradle

我正在尝试使用 Intellij Idea 12（商业版）中的 gradle 构建一个项目，但这一直失败。我启用了**gradle 插件**以及**gradle gui**插件。本机项目 gradle 导入正在运行。（我没有使用`gradle idea`顺便说一句。）

使用*bash*时，我只运行`gradle war`来构建我的 Web 应用程序。现在我想在 Intellij 中做同样的事情。

gradle **gui**插件似乎使用了错误的 JDK（我猜这是 Idea 使用的一个 1.6 JDK），因此无法编译，因为这是一个 JDK 1.7 项目。而且它不能很好地集成到 Idea 中，因为它看起来像是一个外部构建过程（比如触发外部 ant 任务）。

到目前为止，我所做的是以一种等同于构建的方式配置我自己的**工件。**`gradle war`但这意味着很多配置，而且感觉不对。应该有更好的方法吗？

那么我该怎么做才能让 Idea 以类似于命令行 gradle 任务的方式编译项目呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:59:36.970

JetGradle 插件目前不提供原生任务支持。它计划用于 v.12.1 - [IDEA-95897](http://youtrack.jetbrains.com/issue/IDEA-95897)。随时跟踪[插件的新闻](http://confluence.jetbrains.com/display/IDEADEV/News)并在提供相应支持后立即[手动更新。](http://confluence.jetbrains.com/display/IDEADEV/Gradle+integration#Gradleintegration-Preassembledset%28applicablefortheIJv.12%29)

# excel - 目的地，通过电话号码查找前缀 - Excel

> ID：13932484
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:58:31.797
> 
> 标签：excel, excel-2007, vba

我有两张桌子。

*   表一包含：电话号码列表

*   表二包含：前缀和目的地列表

我想查找电话号码的前缀和目的地。

下面给出行数据表和结果表

**表01**（电话号码表）

```
Phone Number     
------------
12426454407       
12865456546       
12846546564       
14415332165       
14426546545        
16496564654       
16896546564        
16413216564 
```

**表 02**（前缀和目的地列表）

```
PREFIX |COUNTRY              
-------+---------------------
1      |Canada_USA_Fixed     
1242   |Bahamas              
1246   |Barbados             
1268   |Antigua              
1284   |Tortola              
1340   |Virgin Islands - US  
1345   |Cayman Island        
144153 |Bermuda-Mobile       
1473   |Grenada              
1649   |Turks and Caicos     
1664   |Montserrat 
```

**表 03**（结果）

```
Phone Number  | PREFIX | COUNTRY            
--------------+--------+-------------------
12426454407   | 1242   | Bahamas           
12865456546   | 1      | Canada_USA_Fixed  
12846546564   | 1284   | Tortola           
14415332165   | 144153 | Bermuda-Mobile    
14426546545   | 1      | Canada_USA_Fixed  
16496564654   | 1649   | Turks and Caicos  
16896546564   | 1      | Canada_USA_Fixed  
16643216564   | 1664   | Montserrat 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T10:27:00.370

我也在做最长的前缀匹配，就像谷歌出现的其他人一样，它也适用于国际电话号码前缀！

我的解决方案适用于我的 200 个前缀表（包括世界 1 区，即美国/加拿大有 1 个，巴哈马有 1242 个等）。

首先，您需要这个数组公式（我将在下面将其称为“X”，但您需要完整输入）

```
(LEFT(ValueToFind,LEN(PrefixArray))=PrefixArray)*LEN(PrefixArray) 
```

这使用了将逻辑值与整数相乘的技巧，因此如果不匹配，则结果为零。您可以使用它在一个单元格中找到最大值（我称之为“MaxValue”）。

```
{=MAX(X)} 
```

如果 MaxValue 大于零（因此找到了某种匹配），那么您可以在前缀数组中找到最大值的位置。

```
{=MATCH(MaxValue,X,0)} 
```

我不担心这里的重复 - 您可以在 PrefixArray 中单独检查它们。

新手注意事项：

*   PrefixArray 应该是一个绝对引用，可以用大量的 $ 或“命名范围”来表示。

*   我假设您将 ValueToFind、MaxValue 和结果索引作为同一行上的单元格放入 PrefixArray，因此在它们的列字母而不是行号上有一个 $。这允许轻松粘贴大量的 ValueToFind 行。

*   数组公式由大括号表示，但通过键入不带大括号的文本然后按 Ctrl-Shift-Enter 来输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:16:34.017

假设最长的前缀是 6 位数，您可以在表 1 中的电话号码列旁边添加 6 列 (B:G)（我假设这是 A 列）。在 B 列中，您将使用 显示前 6 个字符`=LEFT(A2,6)`，在下一列中，您将显示 5 个字符等。

然后添加另外 6 列 (H:M) ，每列执行 a`=MATCH(B2,Table2!A:A,0)`以查看此前缀是否在前缀列表中。

现在，如果 6 个潜在前缀中的任何一个匹配，您将获得前缀的行号 - 否则您将收到 #N/A 错误。将以下公式放入 N 列：`{=INDEX(H2:M2,MATCH(FALSE,ISERROR(H2:M2),0))}`- 将公式作为数组公式输入，即输入后不要按 Enter，而是按 Ctrl-Shift-Enter -`{}`然后您会在公式周围看到这些，所以不要手动输入!.

N 列现在包含匹配前缀的行，如果没有前缀匹配，则为 #N/A。因此，放入`=IF(ISNA(N2,'No matching prefix',INDEX(Table2!B:B,N2))`下一列，您就完成了。

您也可以使用较少列但更复杂的公式的上述方法，但我不推荐它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:10:50.360

假设电话号码在 A 列中，现在在 B 列中，您需要提取前缀。像这样的东西：

```
=LEFT(A1, 4) 
```

但是，您的 Canada_USA_Fixed 和 Antigua 手机一样会产生问题。我会让你自己解决这个问题。从 IF 语句开始。

现在您已经提取了前缀，您可以轻松地使用它`VLOOKUP()`来获取国家/地区。

# graphics - 如何在引用卡中创建内容（如 dzone）

> ID：13932486
> 
> 赞同：0
> 
> 时间：2012-12-18T11:58:36.253
> 
> 标签：graphics

我们中的许多人都使用过裁判卡。我在Dzone见过很多。

如何为我自己的目的创建内容/引用卡（有效利用空间的图形和文本）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T10:35:52.713

一种方法是使用这些在线工具创建信息图表：

[http://www.easel.ly/](http://www.easel.ly/)

[https://infogr.am/](https://infogr.am/)

# objective-c - 是否可以在 UIView 类中传递参数

> ID：13932488
> 
> 赞同：3
> 
> 时间：2012-12-18T11:58:38.843
> 
> 标签：objective-c, xcode

我有一个视图控制器。当我传递一个额外的对象时，我在下面的函数中收到此错误@No visible interface。你能帮帮我吗。下面是代码。我在哪里传递一个照片类型的对象。

```
 ItemImageView *itemImage = [[ItemImageView alloc]initWithFrame:CGRectMake(currentPhotoPositionX,0,pageButtonWidth,pageButtonHeight) andPhoto:photo];

@ItemImageview

 - (id)initWithFrame:(CGRect)frame :andPhoto:(Photo *)photo
   {
self = [super initWithFrame:frame];
if (self) {
    // Initialization code

    //Create Activity Indicator
     activityIndicator= [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(225, 115, 30, 30)];
    [activityIndicator setBackgroundColor:[UIColor clearColor]];
    [activityIndicator setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleWhite];
    [self addSubview:activityIndicator];

    //Create Label Comments

    lblComments = [[UILabel alloc] initWithFrame:CGRectMake(30.0f, 100.0f, 60.0f, 43.0f)];
    [lblComments setText:@"Comments"];
    [lblComments setBackgroundColor:[UIColor clearColor]];
    [self addSubview:lblComments];

    //Create Label Likes

    lblLikes = [[UILabel alloc] initWithFrame:CGRectMake(100.0f, 100.0f, 60.0f, 43.0f)];
    [lblLikes setText:@"Likes"];
    [lblLikes setBackgroundColor:[UIColor clearColor]];
    [self addSubview:lblLikes];

    //Create Item Button

    btnItem = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btnItem addTarget:self
                action:@selector(:)
      forControlEvents:UIControlEventTouchUpInside];
    [btnItem setBackgroundImage:[UIImage imageNamed:@"1.png"] forState:UIControlStateNormal];
    btnItem.frame = CGRectMake(0.0f, 0.0f, 144.0f, 143.0f);
    [self addSubview:btnItem];

}

return self; 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T11:59:47.803

将其更改为：

```
- (id)initWithFrame:(CGRect)frame andPhoto:(Photo *)photo 
```

还要记住将其添加到您的 .h 文件中。

# java - Hibernate：将原始 long 用于标识符属性

> ID：13932492
> 
> 赞同：2
> 
> 时间：2012-12-18T11:58:47.763
> 
> 标签：java, hibernate

根据休眠文档：

> 我们建议您在持久类上声明一致命名的标识符属性，并使用可空（即非原始）类型。

当 GenerationType 设置为 AUTO 且标识符属性为 long（原始）类型时，可能会出现哪些问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:01:06.177

使用一个`Long`对象，即`java.lang.Long`

我认为 hibernate 可能对原始类型有问题，因为有时它可能会尝试将其设置为`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:28:16.497

When using Hibernate's 'query-by-example' capabilities a `null` value for the id may be desirable, for example when trying to find a *set* of objects with different id values. In this case, `long id`, defaulting to `0`, may not be the same as `Long id` with a value of `null` - maybe the value `0` is a valid id in the database?

# dotfuscator - Dotfuscator FrameworkElement 警告

> ID：13932494
> 
> 赞同：1
> 
> 时间：2012-12-18T11:58:50.977
> 
> 标签：dotfuscator, frameworkelement

我正在混淆 Windows Phone 项目并收到以下类型的警告：

[警告] MarkupAnalysis 在方法 Foo.Bar() 中标记了某些内容，原因如下：使用 FrameworkElement 的名称，可能需要额外的排除。

我找不到有关此警告的任何文档。纠正的最佳行动方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:43:53.523

检查方法 Foo.Bar() 并查看它如何以及在何处引用`Name`a 的属性`FrameworkElement`，如果它`FrameworkElement`具有支持成员（属性或字段，可能是类），则该成员将（可能）必须被排除在重命名之外混淆。

另请注意，即使排除完成（或成员因其他原因被排除），Dotfuscator 也会继续发出警告。

# post - 带有正文的 Loopj Post 请求

> ID：13932498
> 
> 赞同：3
> 
> 时间：2012-12-18T11:59:02.173
> 
> 标签：post, request, loopj

亲爱的，我正在使用[Loopj](http://loopj.com/android-async-http/)并且非常喜欢它。它让我的生活更轻松。现在我想在帖子请求的正文中发布 json。请检查我做错了什么我的代码在下面。

```
params.put("SaleOrderItems", mJsonArrayOfObject.toString());
    params.put("CustomerReferenceNumber", "asdf");
    // /*mSaleOrder.getmCustomerReferenceNo()*/);
    params.put("RecordType", "HOS");
    params.put("DeliveryDate", "2012-12-28T12:04:27.3553985+01:00"); // mSaleOrder.getmDeliveryDate());
    params.put("SellToCustomerNumber", "user"); 
```

然后我这样打电话。

```
mAsyncHttpClient.post(WEBCONSTANTS.ORDER_SERVICE_SAVE_ORDER, mParams,
            new AsyncHttpResponseHandler(){}; 
```

我收到了这个错误

```
{"Message":"No HTTP resource was found that matches the request URI} 
```

请告诉我如何使用 LoopJ 在 post 请求的正文中发送对象的 json 数组。此致，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T00:36:46.413

我想这就是你要找的：

```
String url = "<your site url>";
JSONObject jdata = new JSONObject();
try {
  jdata.put("key1", val1);
  jdata.put("key2", val2);
} catch (Exception ex) {
  // json exception
}
StringEntity entity;
try {
  entity = new StringEntity(jdata.toString());
  client.post(getBaseContext(), url, entity, "application/json", new AsyncHttpResponseHandler() {
    @Override
    public void onSuccess(String response) {
      JSONObject res;
      try {
        res = new JSONObject(response);
        Log.d("debug", res.getString("some_key")); // this is how you get a value out
      } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
    }

  });
} catch (UnsupportedEncodingException e1) {
  // TODO Auto-generated catch block
  e1.printStackTrace();
} 
```

# java - 无法呼叫超级

> ID：13932499
> 
> 赞同：0
> 
> 时间：2012-12-18T11:59:11.907
> 
> 标签：java, smartgwt, smartclient

当我在派生小部件中调用 this.Super("initWidget") 时，浏览器给出异常

```
**TypeError: this.Super is not a function** 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:51:56.720

this 和 super 是关键字。this 指的是当前对象，而 super 指的是父类。如果您尝试调用 super，则您正在调用超类的构造函数。在您的情况下，只有一个参数。你应该只使用

```
super("initWidget"); 
```

因为 this 之后的点运算符意味着您要在当前对象中使用方法。

# web - 托管您网站的几乎重复的“测试”版本，而不会遭受 SEO 后果？

> ID：13932504
> 
> 赞同：0
> 
> 时间：2012-12-18T11:59:24.343
> 
> 标签：web, seo

我正在处理的网站有一些小问题，我想发布一个测试版本，在其中进行一些调整以查看外观（我也想在移动设备上进行测试，因此拥有实时版本肯定是在多个设备上进行测试的最简单方法）。

理想情况下，我希望有类似 mysite.com/test/ 的东西，它将从主站点的精确副本开始。但是，我不想因为“重复内容”而在谷歌等方面遇到任何问题。

避免此类问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:09:20.507

放 `<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:04:13.933

我想您会希望域根目录中有一个 robots.txt 文件来指示爬虫程序可以扫描哪些页面。

[http://tools.seobook.com/robots-txt/](http://tools.seobook.com/robots-txt/)

# class - 对于在 vba 中具有用户定义的类对象的每个循环

> ID：13932512
> 
> 赞同：3
> 
> 时间：2012-12-18T11:59:54.867
> 
> 标签：class, excel, vba

代码在这里，你会在每个语句的第一行得到一个运行时错误“424”对象

```
Public Sub test()

Dim a As clsTest
Dim dic As Dictionary
Dim tmpObj As clsTest
Set dic = New Dictionary
Set a = New clsTest
dic.Add "1", a
dic.Add "2", New clsTest
dic.Add "3", New clsTest

For Each tmpObj In dic.Items '--<< error: Run-time error '424' Object required
  Debug.Print tmpObj.i
Next tmpObj

Stop
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:45:37.497

三个选项

1)

```
Dim tmpObj As Variant

For Each tmpObj In dic.Items

  Debug.Print tmpObj.i

Next tmpObj 
```

2)

```
for i = 0 to dic.Count - 1
    set tmpObj = dic.Items(i)
   ... 
```

3)

```
Public Sub test()

Dim a As clsTest
Dim dic As Dictionary
Dim vTmpObj As Variant
Dim tmpObj As clsTest
Set dic = New Dictionary
Set a = New clsTest
dic.Add "1", a
dic.Add "2", New clsTest
dic.Add "3", New clsTest

For Each vTmpObj In dic.Items
  Set tmpObj = vTmpObj
  Debug.Print tmpObj.i
Next vTmpObj 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:15:06.287

你有两个选择：。将变量声明为变体：

```
Dim tmpObj As Variant

For Each tmpObj In dic.Items

  Debug.Print tmpObj.i

Next tmpObj 
```

或遍历集合：

```
Dim tmpObj As clsTest

For i = 0 To dic.Count - 1

    Set tmpObj = dic.Items(i)

    Debug.Print tmpObj.i

Next i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:15:16.947

A`Dictionary.Items()`是一个变体数组，因此`For Each`需要`tmpObj`作为`Variant`.

使用类型的替代方法`tmpObj`是：

```
for i = 0 to dic.Count - 1
    set tmpObj = dic.Items(i)
    ... 
```

# css - 是什么导致了这个巨大的负空间？

> ID：13932517
> 
> 赞同：0
> 
> 时间：2012-12-18T12:00:08.990
> 
> 标签：css

除非您有移动设备，否则我遇到的问题非常具体且很难详细说明。

我最近一直在努力使我的网站具有响应性，并且在桌面上运行良好。我刚刚让一些人在移动设备（Android 和 Windows Phone）上对其进行了测试，他们告诉我有相当多的负空间，就好像它被缩小了一样。

查看我的代码，我不知道为什么会这样。谁能启发我？

[这是问题](http://www.tomdwyerdesign.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:10:08.557

尝试将您的视口标签更改为以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

# php - fwrite 中的 UTF-8 字符

> ID：13932519
> 
> 赞同：0
> 
> 时间：2012-12-18T12:00:18.097
> 
> 标签：php

我正在尝试将 HTML 保存到 .html 文件中，

这是有效的：

```
$html_file = "output.html";
$output_string="string with characters like ã or ì";
$fileHandle = fopen($html_file, 'w') or die("file could not be accessed/created");
fwrite($fileHandle, $output_string);
fclose($fileHandle); 
```

当我检查 output.html 文件时，我的 output_string 中的这些特殊字符没有被正确读取。

我的 HTML 文件**不能**有`<head>`带有字符集信息的标签，这使它工作，但我的输出不能有任何`<html>`,`<head>`或`<body>`标签。

我尝试过类似的东西

```
header('Content-type: text/plain; charset=utf-8'); 
```

我还在 fwrite 之前在字符串上尝试了**utf8_encode()**，但到目前为止没有成功。

如果我在 Notepad++ 或 Netbeans IDE 中读取 output.html 文件，它会显示正在保存的正确字符，是浏览器没有正确读取它们。

我很确定 PHP 正在使用不正确的字符集保存我的文件，因为如果我在计算机中使用这些特殊字符（即使没有任何字符集设置）创建 HTML 文件，这些都可以正确读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:04:30.640

尝试将 BOM（字节顺序标记）添加到您的文件中：

```
$output_string = "\xEF\xBB\xBF";
$output_string .= "string with characters like ã or ì";
$fileHandle = // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:03:52.607

是的，PHP 正在正确写入文件，只有*读取*程序不知道它是什么字符编码，并使用错误的字符集解释数据。如果您不能包含传达正确字符集的元信息，并且文件格式本身（纯文本）不提供指定字符集的方法，并且如果阅读应用程序无法正确猜测字符集，那么就没有解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:04:59.500

无论您使用什么编辑器来编写此代码，都必须能够将字符类型设置为“UTF-8”。

设置您编写此代码的文件的字符类型。我正在使用一个允许从底部更改文件的字符编码的编辑器。您正在使用的编辑器必须有类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:07:52.010

如果您需要 UTF-8 中的字符串而不管 php-script-file-encoding （如果它是单字节的），您应该使用这些字符的 UTF-8 编码：

```
$output_string = "string with characters like \xC3\xA3 or \xC3\x8C"; 
```

# email - Magento 翻译电子邮件 - 电子邮件标题

> ID：13932520
> 
> 赞同：2
> 
> 时间：2012-12-18T12:00:18.893
> 
> 标签：email, magento, translation

您如何在第二语言商店视图中更改电子邮件标题。新订单确认电子邮件中的“新订单”示例。在这种情况下，csv 文件没有响应...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T18:38:35.743

另一种解决方案。您可以将默认电子邮件模板复制到您要使用的语言文件夹中，然后手动翻译它们。

1.  将所有内容复制`app/locale/en_US/template`到`app/locale/[YOUR LANGUAGE CODE]/template`.

    更改`[YOUR LANGUAGE CODE]`为所需语言的语言代码。[你可以在这里](http://msdn.microsoft.com/en-us/library/ms533052%28v=vs.85%29.aspx)找到一个列表。确保它的格式为`en_US`.

2.  `app/locale/[YOUR LANGUAGE CODE]/template`修改文件夹中的电子邮件模板。

3.  在 Magento 中，转到`System > Configuration > General`. 在左上角，将您的更改`Current Configuration Scope:`为您要翻译的商店。

4.  将 更改为`Locale`您翻译成的语言。它必须匹配正确的文件夹命名空间中使用的语言代码。

**注意：**编辑电子邮件模板文件时，您会注意到顶部的一些注释包含变量等。你会看到类似`<!--@subject Welcome, {{var customer.name}}! @-->`. 更改此设置将更改 Magento 使用的主题行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T18:23:47.120

您可以创建自定义交易电子邮件，其中包括商店视图所需的翻译。

1.  使用商店所需的语言创建新的交易电子邮件模板。转到`System > Transactional Emails`并单击`Add New Template`。加载您尝试翻译和修改电子邮件主题和正文的默认模板。

2.  转到`System > Configuration > Sales Emails` 在您的配置的左上角，更改为您希望将这些电子邮件分配到的所需商店视图。

3.  将 更改为`New Order Confirmation Template`您创建的交易电子邮件模板。单击`Save Config`。

4.  从该商店订购的商品现在应该使用您创建的翻译电子邮件发送电子邮件。

# ios - 从弹出的视图控制器获取数据到父视图控制器

> ID：13932524
> 
> 赞同：1
> 
> 时间：2012-12-18T12:00:32.933
> 
> 标签：ios, uinavigationcontroller

我有一个问题，我可以使用将所有数据传递给推送视图控制器

```
[self performSegueWithIdentifier:@"Expense" sender: self]; 
```

和

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

但是，当视图控制器弹出时，我不知道如何取回数据。我有几个数组需要从弹出的视图控制器传递到父视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:30:56.703

Create a class to serve as the data model for your application and have it include the arrays you need to pass around. Create an object of that class in your first controller, share it with the second controller during `prepareForSegue:`, let the second controller update it, and read the new values when the parent's view appears again.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:33:00.527

You should use segues to pass data forward and Delegate Methods to send data back in your navigation stack. That is the recommended approach. I answered a similar [question](https://stackoverflow.com/questions/13674271/iphone-how-can-you-get-a-url-from-the-second-uiviewcontroller-to-load-in-a-web/13901694#13901694) earlier. Although the question may sound different, the underlying solution should work in your case as well.

# c++ - std::condition_variable::notify_all() 保证

> ID：13932525
> 
> 赞同：5
> 
> 时间：2012-12-18T12:00:46.350
> 
> 标签：c++, c++11

假设条件变量上有 N 个等待线程（读取器），它们由另一个线程（生产者）通知。现在所有 N 个读者将继续尝试拥有他们所引用的 unique_lock，一次一个。现在假设生产者出于某种原因想要再次锁定相同的 unique_lock，在这些唤醒的读者中的任何一个甚至开始拥有锁之前。按照标准，只有在所有通知的读者都开始锁定步骤后，生产者才能成功（尝试）进入其临界区？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:03:14.633

除了第 1.10 节第 2 段中给出的相当模糊的安排之外，没有任何关于调度的保证：

> 实现应该确保所有未阻塞的线程最终都会取得进展。[*注意：*标准库函数可能会静默阻塞 I/O 或锁定。执行环境中的因素，包括外部强加的线程优先级，可能会阻止实现对前进进度做出某些保证。——<em>尾注]

如果你想确保没有读者在生产者之前获得锁，你可以简单地在通知之前获得锁。

如果你想确保生产者只能在所有读者都完成后才能获得锁，你需要一些更复杂的同步，可能涉及某种计数器。

# postgresql - HP NonStop 系统上的 postgresql

> ID：13932527
> 
> 赞同：0
> 
> 时间：2012-12-18T12:00:51.577
> 
> 标签：postgresql, hp-ux, hp-nonstop

我想在 HP NonStop J 系列服务器上安装 postgres。有类似配置经验的人可以帮助我吗？我没有为 NonStop 服务器找到任何 postgres 库/安装包/补丁。

我是 NonStop 系统的新手，但曾在 linux 和 unix (HP-UX) 环境中工作。NonStop 系统提供开放系统服务 (OSS) 环境，它是 HP NonStop 操作系统的开放计算接口，基于 POSIX 标准。

Postgres 软件包可用于 HP-UX 系统；可以在不间断服务器上为 OSS 环境配置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:01:04.560

您几乎可以肯定必须从源代码编译 PostgreSQL - 可能还有它的依赖项，具体取决于为 HP-UX 预打包的可用内容。请参阅文档中的[源代码安装。](http://www.postgresql.org/docs/current/static/installation.html)

PostgreSQL 运行良好且编译合理，并且有一个[HP-UX ia64 buildfarm 成员](http://buildfarm.postgresql.org/cgi-bin/show_history.pl?nm=anole&br=HEAD)，因此构建在 HP-UX 上进行测试。

# c# - .Net EntityFramework 4.0 中类似数据库表的继承

> ID：13932530
> 
> 赞同：6
> 
> 时间：2012-12-18T12:00:57.627
> 
> 标签：c#, .net, inheritance, entity-framework-4

我正在寻找以下问题的解决方案：

我有许多表在少数/无列中相互区分（为什么会发生这种情况并非如此，因为我没有设计所述数据库，也无法更改它）。

示例：表用户：Columns{name,surname,age} 表 OldUser：Columns(name,surname,age,lastDateSeen} 等

有什么方法可以指示 Visual Studio 中的 EntityFramework 4.0 扩展由 _name、_surname、_age 字段及其相应属性组成的基类，以便我可以将该类用于代码中的批处理作业？

我目前的解决方案是制作这个类并使用转换器将持久对象中的值传递给它的对象。它有效，但它并不优雅，我不喜欢它。

我来自 java/hibernate 环境，这是基本功能。

（如果我希望类实现接口，是否可以做同样的事情以供将来参考？）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:12:59.887

由于您的 RDBMS（至少 SQL Server 2008 和更早版本）不允许表继承，我建议您不要在 C# 的 DB 模型中使用继承。当您无法控制表格的设计时，尤其建议您这样做。

如果您实际上有那些将从抽象中受益的类的客户，请改为使用接口，但是无法控制 DB 的设计会使这变得不那么有价值，因为 DB 设计者可以更改表，从而使您的 EF 类不再实现界面：

```
public interface IUser {
  public string Name { get; }
  // etc...
}

public class User : IUser {
  public string Name { get; set; }
  // etc...
}

public class OldUser : IUser {
  public string Name { get; set; }
  // rest of IUser
  public DateTime? LastSeenOn { get; set; }
} 
```

# social-networking - 构建具有 twitter 等安全性的社交网站的最佳框架

> ID：13932539
> 
> 赞同：0
> 
> 时间：2012-12-18T12:01:23.867
> 
> 标签：social-networking

我正在寻找构建社交网站的框架。

特点： 1）用户可以发推文。推文或消息应该根据安全设置可用，例如如果用户只选择给朋友，那么这些推文应该只给朋友。（或）我应该说只向朋友提供公共、私人等安全性，而不是推文和消息。

2) 个人资料、图像、视频应根据安全限制显示（仅限朋友或公众）。

我发现 Elgg 在 stackoverflow 中获得了最佳投票。但我不知道 Elgg 是否提供这种功能。

Elgg 框架是否提供上述功能？

（或者）

您会建议任何其他具有此类功能的最佳框架。

请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T12:05:24.743

Elgg 具有您需要的大部分功能。elgg 包附带的线插件可让您创建类似推文的系统。

# ios - UITextView 替代方案

> ID：13932550
> 
> 赞同：1
> 
> 时间：2012-12-18T12:01:44.697
> 
> 标签：ios, ios6, uitextview, nsattributedstring, nslayoutconstraint

正如我从 Apple 文档的 UITextView 的属性文本属性中了解到的那样：

> 此属性默认为 nil。为该属性分配一个新值也会用相同的字符串数据替换 text 属性的值，尽管没有任何格式信息。此外，分配新的 a 值会更新 font、textColor 和 textAlignment 属性中的值，以便它们反映从属性字符串中位置 0 开始的样式信息。

因此，我无法通过在不同位置具有多个属性的代码添加属性字符串。

有人可以帮我在iOS6中通过代码创建以下效果吗？这可以使用 nib 文件并通过更改 UITextView 中文本部分的范围属性来实现，但我似乎无法通过代码重现效果。

<'font systemFontOfSize=18>**想要**的</font>**效果**<'textColor = [UIColor redColor]>**写成 b** </textColor> **y 代码**。

假设标签对应于属性。

PS 我不想使用 CATextLayers，因为我正在尝试将 AutoLayout 功能与 UITextView 一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:28:08.837

您可以使用包含您需要的所有属性的 NSDictionary 构建 NSAttributedString：

```
NSAttributedString* attString = [[NSAttributedString alloc] 
               initWithString: @"Desired effect to be written by code" 
                   attributes: (NSDictionary*)attributes]; 
```

或者使用它的可变子类 NSMutableAttributedString：

```
NSMutableAttributedString *attString = [[NSMutableAttributedString alloc]  
               initWithString: @"Desired effect to be written by code"];

    [attString addAttribute: NSForegroundColorAttributeName 
                      value: [UIColor redColor] 
                      range: NSMakeRange(15,15)]; 
```

......
然后......

```
myTextView.attributedText = attString; 
```

每个属性都应用于字符串的一个 NSRange（位置、长度）。不同的属性类型（例如颜色、字体大小）可以重叠不同的范围。

**更新**
使用 NSMutableAttributedString 示例。`NSAttributedString's initWithString:attributes`将在字符串的整个范围内应用属性，这是您要避免的，抱歉造成混淆。

# java - #后如何从地址中获取值？

> ID：13932553
> 
> 赞同：1
> 
> 时间：2012-12-18T12:01:51.250
> 
> 标签：java, jsp, url

我想`#`从 jsp 中的 URL 地址签名后获取值

```
http://www.example.com/testsite/sative.do?runninginformation=11-1970-1#11197011201240649438FT 
```

如何使用查询字符串获取它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:04:08.990

尝试

```
String url = "http://www.example.com/testsite/sative.do?runninginformation=11-1970-1#11197011201240649438FT";
String f = new URI(url).getFragment();
System.out.println(f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:04:37.830

您可以使用`split`，它将值拆分为数组。

```
String x = "hello#World";
String[] y = x.split("#");
System.out.print(y[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:08:50.660

怎么样：

```
"http://www.example.com/testsite/sative.do?runninginformation=11-1970-1#11197011201240649438FT".replaceAll(".*#",""); 
```

这将返回`11197011201240649438FT`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:11:30.053

你不能。井号 (#) 之后的值永远不会发送到服务器。

您将需要进行一些 javascript 处理。基本上为每个链接添加一个 onclick 处理程序，解析链接的 URL 并提取哈希部分并将其添加为常规参数。

# ruby-on-rails - 如何在模型中使用 current_user？

> ID：13932554
> 
> 赞同：0
> 
> 时间：2012-12-18T12:01:54.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我想`current_user`在我的模型中使用 Devise 的助手，这样我就可以`Shop`在`Dress`模型中使用`before_save`.

这不起作用：

```
# Dress model
before_save :set_currency

def set_currency
  self.currency = current_user.shop.currency
end 
```

它确实在控制器中工作：

```
def create
  @dress = current_user.shop.dresses.create(params[:dress])
  @dress.update_column(:currency, current_user.shop.currency)
end 
```

但它似乎效率低下，因为它会做一个`UPDATE`after `COMMIT`。StackOverflow 上的其他用户说不`current_user`应该在模型中使用。有没有其他方法可以`current_user`在模型中访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:12:32.850

一种方法是将用户作为参数传递给模型方法，而不使用 before_save 回调

```
# Dress model

def set_currency(user)
  self.currency = user.shop.currency
end 
```

另一种方法是专门设置货币。由于货币是 Dress' 字段，您可以使用当前用户货币在表单上放置一个隐藏字段，该字段将作为参数传递给您的创建操作，并为您透明地保存。

如何实现它：

```
 # At your Dress form, in your View
  <%= f.hidden_field :currency, :value => @user.shop.currency %>

  # At your controller
  def create
      @user = current_user
  end 
```

像这样，您无需做任何事情来保存货币。它将传递参数以创建连衣裙，您只需确保它`currency`是一个 ActiveRecord 字段。

通常，将这种关于特定时间应用程序*状态*的知识附加到模型是不好的。如果您发现自己处于绝对确定自己需要这种行为的情况下，请停下来问问自己这是否真的有意义。

在这个例子中，我真的觉得（不知道你的应用程序，有）货币应该是表单中的隐藏字段，因为它是你的模型必须存在的东西，它确实是一个字段，因此它使感觉要与模型的参数一起传递。

最好的祝福

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:17:14.570

在控制器中使用 .build 而不是 .create 将值设置为 Dress 模型的货币属性。

```
def create
    @dress = current_user.shop.dresses.build(params[:dress])
    @dress.currency = current_user.shop.currency
    if @dress.save
       .....
    else
       .....
    end
  end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:11:58.467

我建议只处理在控制器中设置它们，但是......

如果您不介意稍微违反 MVC，可以使用以下方法：

```
# application_controller.rb
before_filter :set_current
def set_current
  User.current = current_user
end

# app/models/user.rb
cattr_accessor :current

# app/models/dress.rb
before_save :set_currency
def set_currency
  self.currency = User.current.shop.currency
end 
```

# android - 清除片段堆栈会导致错误

> ID：13932556
> 
> 赞同：3
> 
> 时间：2012-12-18T12:01:55.933
> 
> 标签：android, android-fragments, screen-orientation, android-fragmentactivity, back-stack

你能帮我解决这个问题吗？我有带标签的应用程序。每个选项卡都包含自己的片段返回堆栈。当我在用户按下任何选项卡时尝试清除后台堆栈时会出现问题。在调用堆栈活动时，我正在尝试清除堆栈`onResume()`。但是此解决方案会导致以下错误：

```
12-18 12:41:41.700: E/AndroidRuntime(4136): FATAL EXCEPTION: main
12-18 12:41:41.700: E/AndroidRuntime(4136): java.lang.RuntimeException: Unable to resume activity {cz.anywhere.fio_t/cz.anywhere.fio_t.fragments.stack.MarketStack}: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

这是用于回栈的类。

```
public class MarketStack extends TabFragmentActivity{

    final public static String MARKET_MAIN_FRAGMENT_TAG = "main_market_fragment";
    final public static String MARKET_SECURITIES_FRAGMENT_TAG = "market_securities_fragment";
    final public static String MARKET_DETAIL_FRAGMENT_TAG = "market_detail_fragment";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.i("MarketStack", "onCreate");

        if(savedInstanceState == null){
            addFragmentToStack(new MarketFragment(), MARKET_MAIN_FRAGMENT_TAG);
        }

    }

    @Override
    protected void onResume() {
        super.onResume();

        Log.i("MarketStack", "onResume");

    }

} 
```

和父类。在`onResume()`方法中发生了错误。

```
public class TabFragmentActivity extends SherlockFragmentActivity { 

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_in_tab);

            Log.i("TabFragmentActivity", "onCreate");
        }

        public void addFragmentToStack(Fragment newFragment, String fragmentTag) {
            FragmentManager manager = getSupportFragmentManager();
            FragmentTransaction ft = manager.beginTransaction();
            ft.replace(R.id.content, newFragment, fragmentTag);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
            ft.addToBackStack(null);

            ft.commit();
        }

        @Override
        public void onBackPressed() {

            Log.i("TabFragmentActivity", "onBackPressed");

            FragmentManager manager = getSupportFragmentManager();
            if (manager.getBackStackEntryCount() > 1) {
                super.onBackPressed();
            } else {            
                // Otherwise, ask user if he wants to leave :)
                //showExitDialog();
                super.onBackPressed();
            }
        }

        @Override
        protected void onResume() {
            super.onResume();

            FragmentManager fm = getSupportFragmentManager();

            for(int i = 0; i<fm.getBackStackEntryCount()-1; i++){
                fm.popBackStack();
            }
        } 
```

谢谢你的建议。

# java - 进程杀手识别

> ID：13932560
> 
> 赞同：4
> 
> 时间：2012-12-18T12:02:04.727
> 
> 标签：java, linux, jakarta-ee, linux-kernel

> **可能重复：**
> [谁“杀死”了我的流程，为什么？](https://stackoverflow.com/questions/726690/who-killed-my-process-and-why)

我的服务器正在运行一个 java 进程。在日志中我发现我的服务器自动重新启动（逻辑是如果进程被终止，则自动启动）。在这里，我不知道是谁在杀死我的 java 进程。可能是一些脚本，或者任何东西……不知道。

有没有办法找出谁是进程杀手。

我在 Linux 机器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:35:57.987

尝试[SystemTap](http://sourceware.org/systemtap/)：

```
apt-get install systemtap 
```

将此代码保存到**sigmon.stp**文件中：

```
# Track when a specific process ID receives a specific signal.  For example,
# when process ID 31994 receives a SIGKILL signal.
#
# Example command line: 
#
#   stap -x 31994 sigmon.stp SIGKILL
#
# Example output: 
#
#   SPID     SNAME            RPID  RNAME            SIGNUM SIGNAME
#   5609     bash             31994 find             9      SIGKILL 
#

probe begin
{
  printf("%-8s %-16s %-5s %-16s %6s %-16s\n",
         "SPID", "SNAME", "RPID", "RNAME", "SIGNUM", "SIGNAME")
}

probe signal.send 
{
  if (sig_name == @1 && sig_pid == target())
    printf("%-8d %-16s %-5d %-16s %-6d %-16s\n", 
      pid(), execname(), sig_pid, pid_name, sig, sig_name)
} 
```

# jpeg - 使用 Matlab 的 jpeg 工具箱中的 jpeg_read 读取图像时出错

> ID：13932561
> 
> 赞同：2
> 
> 时间：2012-12-18T12:02:11.750
> 
> 标签：jpeg, matlab, mex

当我尝试使用 Matlab 的 jpeg 工具箱读取 jpeg 图像时，出现以下错误：

> 尝试将 SCRIPT jpeg_read 作为函数执行

虽然我不确定（因为我得到了工具箱和我应该运行的代码），但我相信所有必须编译的东西已经是。工具箱文件夹中的文件是：

```
vec2im.m
quantize.m
jpeg_write.mexmaci64
jpeg_write.mexmaci
jpeg_write.mexa64
jpeg_write.m
jpeg_write.dll
jpeg_write.c
jpeg_read.mexmaci64
jpeg_read.mexmaci
jpeg_read.mexa64
jpeg_read.m
jpeg_read.dll
jpeg_read.c
jpeg_qtable.m
im2vec.m
ibdct.m
dequantize.m
bdctmtx.m
bdct.m 
```

[版本为 1.4，与http://www.philsallee.com/jpegtbx/index.html](http://www.philsallee.com/jpegtbx/index.html)中的相同。我已经将该文件夹添加到 Matlab 的路径中。对函数 jpeg_read 的调用如下：

jpeg_read(path_to_image)

我正在尝试在 Windows 7 64 下的 Matlab R2011a 上运行它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:27:30.340

您没有适用于 windows 的 mex 文件。您应该有一个已编译的库`jpeg_read.mexw64`以及`jpeg_write.mexw64`. 因为看起来你有源代码，所以你只需要在 Matlab 中编译它们：

```
>> mex -largeArrayDims -O jpeg_read.c
>> mex -largeArrayDims -O jpeg_write.c 
```

在运行这些命令之前，请确保您有一个 mex 编译器设置：

```
>> mex -setup 
```

我通常在 Windows 机器上使用 Visual Studio 编译器。

# struts2 - 输入的非数字数据的服务器端验证

> ID：13932562
> 
> 赞同：1
> 
> 时间：2012-12-18T12:02:13.277
> 
> 标签：struts2

我有文本字段数组，它必须只接受数值，即 1-5。

```
<s:textfield name="marks[0]" maxlength="1" /> 
<s:textfield name="marks[1]" maxlength="1" /> 
<s:textfield name="marks[2]" maxlength="1" />  and so on upto 9 textfields. 
```

我有如下的getter/setter方法

```
public List<Integer> getMarks(){
     return marks;
}
public void setMarks(List<Integer> marks){
     this.marks = marks;
} 
```

如何确保用户不会输入字母等非数字值？如果我输入字符，它会引发运行时异常“java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Integer”，指向 Next JSp 页面中的 validate 方法。

```
public void validate(){
  for(i=0;i<9;i++){
     if (marks.get(i)>5)     //this line throws above ClassCastException
    addFieldError("...");
  }
} 
```

如何解决此异常以及验证以继续？在存在单个文本字段的其他页面中，显示 invalid.fieldvalue.error 但对于列表，我遇到了异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:07:31.397

只需将您的验证逻辑放在`try catch`块内

```
public void validate(){
  try{
    for(i=0;i<9;i++){
      if (marks.get(i)>5)     //this line throws above ClassCastException
        addFieldError("...");
    }
  }catch(Exception e){
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:24:43.337

我通常这样做（可能有更好的解决方案）

```
public void setMarks(List<String> marksStr){
  List<Integer> marks = new ArrayList();

  for(String markStr : marksStr) {
    try {
      Integer mark = Integer.parseInt(markStr);
      marks.add(mark);
    } catch (NumberFormatException e) {
      addFieldError("", "Wrong mark value: " + markStr);
    }
  }
  this.marks = marks;
} 
```

# android - 我在哪里使用自定义适配器指定哪些值在 listView 中的位置？

> ID：13932564
> 
> 赞同：0
> 
> 时间：2012-12-18T12:02:16.817
> 
> 标签：android, android-layout, listview

我正在android中开发一个简单的应用程序。我有一个类别列表（现在），我想将其显示为列表，然后（但这很远）单击，开始另一个具有某些功能的活动......好吧，情况：

我的 single_list_item.xml：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
  <!-- Name Label -->
  <TextView android:id="@+id/category_label"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"           
            android:textStyle="bold"
            android:paddingTop="10dip"
            android:paddingBottom="10dip"
            android:textColor="#43bd00"/>
  <!-- Description Label -->

</LinearLayout> 
```

在主要活动中，我在这里调用适配器和布局：

```
List<categorie> values = datasource.getAllCategorie();

        // Use the SimpleCursorAdapter to show the
        // elements in a ListView
        ArrayAdapter<categorie> adapter = new ArrayAdapter<categorie>(this,
            R.layout.single_list_item, values);
        setListAdapter(adapter); 
```

在数据源中，我在这里声明 getAllCategorie：

```
public List<categorie> getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
            cursor.close();
            return categorie;
          } 
```

最后是 categorie.class ：

```
public class categorie {
      private long id;
      private String nome;
      private long preferita;

      public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

      public String getNome() {
        return nome;
      }

      public void setNome(String nome) {
        this.nome = nome;
      }

      public long getPreferita() {
        return preferita;
    }

    public void setPreferita(long preferita) {
        this.preferita = preferita;
    }

    // Will be used by the ArrayAdapter in the ListView
      @Override
      public String toString() {
        return nome;
      }
    } 
```

目前，如果我运行该应用程序，它会在启动列表视图时冻结，使其完全为空。我想指定每个类别元素的放置位置，例如名称、id 或者是否“喜欢”（在 categorie.class 中获取并设置 Preferita）。

当我开始时，适配器部分是：

```
ArrayAdapter<categorie> adapter = new ArrayAdapter<categorie>(this,
            android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter); 
```

一切都神奇地好……为什么使用默认布局好？再次，我在哪里指定什么去哪里？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:31:39.180

When you want to implement a simple list, there is no problem using a stock `ArrayAdapter`. Android looks at the objects you supply to the adapter, calls `toString()` on those objects and populates a `TextView` with `id=@android:id/text1` with that `String`. It worked "magically" when you used `android.R.layout.simple_list_item_1` because that layout includes a `TextView` with `id=@android:id/text1`

If you want more control over the layout of each row in your `ListView`, you can use the [SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html#SimpleAdapter%28android.content.Context,%20java.util.List%3C?%20extends%20java.util.Map%3Cjava.lang.String,%20?%3E%3E,%20int,%20java.lang.String%5B%5D,%20int%5B%5D%29) which lets you map values to certain `Views` in your row layout. Alternatively, you can write your own adapter class by extending `ArrayAdapter`. I recommend writing your own Adapter, as it is both fun and it gives some insight in how lists are populated. [Here's](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) a guide on how to get started with that.

# mysql - mysql别名数据不选中

> ID：13932582
> 
> 赞同：0
> 
> 时间：2012-12-18T12:03:30.377
> 
> 标签：mysql

对不起，不知道如何提出这个问题。我会尽力解释。这是一个查询：

```
SELECT CONCAT(uno, due, tre) AS smth ... HAVING smth LIKE ... 
```

它允许我对聚合的多列数据执行操作，虽然它工作正常，但我不希望实际选择并返回“smth”列的结果。有可能做这样的事情吗？：

```
SELECT ... WHERE CONCAT(uno, due, tre) AS smth LIKE '...' OR smth LIKE '...' ... 
```

或者 mysql 是否已经优化了具有多个相同连接的查询以不连接相同的数据两次？

我希望这个问题很清楚。谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:05:01.217

`WHERE`在相关的or`HAVING`子句中直接使用所需的表达式：

```
SELECT
  -- etc.
HAVING CONCAT(uno, due, tre) LIKE '...'
    OR CONCAT(uno, due, tre) LIKE '...'
  -- etc. 
```

MySQL 仅在每个查询给定相同参数的情况下评估确定性函数一次，因此尽管查询很冗长，但它的效率并不低（除了可以忽略不计的解析量）。

或者，您可以对查询执行外部选择以仅返回感兴趣的列：

```
SELECT ... FROM (
  SELECT CONCAT(uno, due, tre) AS smth ... HAVING smth LIKE ...
) t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:06:34.757

首先，MySQL 在任何较新的版本上执行此优化。

其次你需要写

```
WHERE CONCAT(uno, due, tre)  LIKE '...' 
```

没有别名 - 别名是在字段列表中**定义**的，而不是在`WHERE`子句中（当然你可以在 where 子句中**使用它们）**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:05:11.017

如果您不想选择它应该可以工作：

```
SELECT ... WHERE CONCAT(uno, due, tre)  LIKE '...' OR smth LIKE '...' ... 
```

# c# - 我们如何验证组框是否选择了任何单选按钮？

> ID：13932584
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:03:45.197
> 
> 标签：c#

我在我的主窗体和我的显示按钮上使用一个组框，我想验证是否选择了任何收音机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:10:44.537

您可以使用它[`Enumerable.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)来过滤并转换为您想要的类型，在这种情况下`RadioButton`：

```
var allRadios = groupBox1.Controls.OfType<RadioButton>();
bool anyChecked = allRadios.Any(rb => rb.Checked); 
```

您需要添加`using System.Linq;`.

# zend-framework - Zend_Cache 与 memcached 和多个实例

> ID：13932585
> 
> 赞同：0
> 
> 时间：2012-12-18T12:03:48.207
> 
> 标签：zend-framework, memcached, zend-cache

我试图让 Zend_Cache 与两个不同的 memcached 实例一起工作。两个实例都处于活动状态并且正在侦听，我对此进行了测试，但 Zend_Cache 继续将所有内容塞入 memcached 的默认端口中，完全无视第二个实例。这是我的引导程序中的代码：

```
 $backend = array(
        'name' => 'Memcached',
        'servers' => array( array(
            'host' => '127.0.0.1',
            'port' => '11211'
        ) ),
        'compression' => true
    );

    $backend_system = array(
        'name' => 'Memcached',
        'servers' => array( array(
            'host' => '127.0.0.1',
            'port' => '11212'
        ) ),
        'compression' => true
    );   

    $systemCache = array(
            'frontend' => array(
                'name' => 'Core',
                'options' => array(
                    'lifetime' => 7*24*60*60,
                    'automatic_serialization' => true
                )
            ),
            'backend' => $backend_system
        );            

    $dataCache = array(
            'frontend' => array(
                'name' => 'Core',
                'options' => array(
                    'lifetime' => 1*60*60,
                    'automatic_serialization' => true
                )
            ),
            'backend' => $backend
        );

    $manager = new Zend_Cache_Manager;
    $manager->setCacheTemplate('system', $systemCache);
    $manager->setCacheTemplate('data', $dataCache);
    Zend_Registry::set( 'manager' , $manager ); 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:13:58.683

答案很简单：我忘记将我的选项包含在 $backend* 数组中的一个数组中，如下所示：

```
 $backend_system = array(
        'name' => 'Memcached',
        'options' => array(
            'servers' => array( array(
                'host' => '127.0.0.1',
                'port' => '11212'
            ) ),
            'compression' => true
        )
    ); 
```

# excel - 将数据从文件加载到excel

> ID：13932595
> 
> 赞同：0
> 
> 时间：2012-12-18T12:04:18.300
> 
> 标签：excel, excel-2007, vba

我有这项工作需要在 VBA 中完成，如果我打开 IDE 并从那里运行代码，所有行为都按预期运行，将数据从 txt 文件加载到新的临时工作簿，复制并粘贴到我的工作表，关闭临时工作簿。

但是当使用快捷方式运行时，即 Ctr+Sft+L，它会将数据加载到临时工作簿，激活它并在那里停止执行......不会将数据粘贴回工作表。我怎样才能解决这个问题？

这是代码：

```
Sub Load_Text() 
    Dim wsSheet As Worksheet 
    InsertWorkSheet ("Data") 

    Set wsSheet = ThisWorkbook.Sheets("Data") 

    Workbooks.OpenText Filename:="C:\Documents and Settings\w059\Desktop\20121107_Report.txt", _ 
    Origin:=xlMSDOS, StartRow:=1, DataType:=xlDelimited, TextQualifier:=xlDoubleQuote, _ 
    ConsecutiveDelimiter:=False, Tab:=False, Semicolon:=True, Comma:=False, _ 
    Space:=False, Other:=False, FieldInfo:=Array(Array(1, 1), Array(2, 1), Array(3, 1), _ 
    Array(4, 1), Array(5, 1), Array(6, 1), Array(7, 1)), TrailingMinusNumbers:=True 
    ActiveWorkbook.Worksheets(1).Cells.Copy wsSheet.Range("A1") 
    ActiveWorkbook.Close True 
End Sub 
Public Sub InsertWorkSheet(name As String) 
    Dim wsSheet As Worksheet 
    On Error Resume Next 
    Set wsSheet = ThisWorkbook.Sheets(name) 

    If wsSheet Is Nothing Then 
        ThisWorkbook.Sheets.Add After:=Sheets(Sheets.Count) 
        ThisWorkbook.Sheets(Sheets.Count).name = name 
    End If 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:19:56.660

我对 ActiveWorkbook 的引用有误。这更正了它：

更换

```
ActiveWorkbook.Worksheets(1).Cells.Copy wsSheet.Range("A1") 
ActiveWorkbook.Close True 
```

和

```
Dim wb As Workbook
Set wb = ActiveWorkbook
wb.Worksheets(1).Cells.Copy wsSheet.Range("A1")
wb.Close True 
```

# android - 在 Android monkeyrunner 中，有没有类似于 waitForPageToLoad() 的东西

> ID：13932608
> 
> 赞同：0
> 
> 时间：2012-12-18T12:05:07.380
> 
> 标签：android, selenium, monkeyrunner

在 Android monkeyrunner 中，是否有任何类似于 waitForPageToLoad() 的内容（例如在 Selenium 中），因为我不想使用 Thread.sleep() 因为它的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T15:24:00.910

试试[Robotium](http://code.google.com/p/robotium/)，它是一个 Android 应用程序的测试框架。

引用：“Robotium 是一个 Android 测试框架，它完全支持活动、对话框、吐司、菜单和上下文菜单。项目主页位于[http://www.robotium.org/](http://www.robotium.org/) ”

Robotium 提供了一组 API 用于等待 Activity/View 等，例如 `waitForActivity(String name)`和 `waitForView(Class<T> viewClass)`

# c++ - 如何在不将文件内容加载到内存的情况下创建文件的 md5 或 sha1 校验和？

> ID：13932609
> 
> 赞同：2
> 
> 时间：2012-12-18T12:05:06.633
> 
> 标签：c++, winapi, md5, checksum, sha

我的意思是类似的事情 php `sha1_file`。

我发现不需要像 boost 这样的外部库的非常好的和紧凑的脚本：[http ://code.google.com/p/smallsha1/source/browse/trunk/sha1.cpp](http://code.google.com/p/smallsha1/source/browse/trunk/sha1.cpp)

但是，当文件大小为例如 10GB 时，有没有办法将文件流传递给它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:11:51.550

那个确切的代码不能接受流，不。

看看循环`while (currentBlock <= endOfFullBlocks)`。它通过实际的哈希码一次运行 64 个字节。因此，为了修改此代码以获取流，您需要它从流中读取这 64 个字节，而不是从中获取它们`sarray`（指向与输入相同的数据`src`）。

每次读取 64 字节*并不是*读取 10GB 数据的有效方式，因此实际上您可能希望引入第二个循环：一个从文件中读取更大的块，另一个通过散列放置 64 字节块。

当然，您还需要修改代码以处理输入数据中不是 64 倍数的“剩余”部分。

或者，使用“init”、“update”、“finish”/“digest”函数找到不同的 SHA1 实现，然后改用它。此类接口的想法是，您可以根据需要多次调用“更新”，传入便于读取流的任何大小的数据块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:10:56.247

对于大文件，您可以内存映射文件的一部分，计算总和，重新映射到文件的下一部分并继续求和，等等。

# android - 打算选择照片或视频

> ID：13932611
> 
> 赞同：3
> 
> 时间：2012-12-18T12:05:21.730
> 
> 标签：android, android-intent, mime-types

> **可能重复：**
> [Android 中的多种 MIME 类型](https://stackoverflow.com/questions/1698050/multiple-mime-types-in-android)

我有一个要求，我必须让用户选择照片或视频。这可以在一个单一的意图中完成吗？目前我正在询问用户是否要选择照片或视频，并根据他的输入设置意图的 MIME 类型为“ `image/*`”或“ `video/*`”。

有没有办法让用户以单一意图选择照片/视频？

谢谢，约格什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:23:30.687

你可以尝试这样的事情：

[安卓文件对话框](http://code.google.com/p/android-file-dialog/)

这也允许以下功能。

> FORMAT_FILTER - 文件过滤器。如果文件名以过滤器之一结尾，则将显示该文件。

因此，您可以使用它指定所需的过滤器，并为用户提供不同文件的选择。

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:09:51.727

试试这个

```
Intent i = new Intent(Intent.ACTION_GET_CONTENT);
i.setType("image/*");
startActivityForResult(Intent.createChooser(i, "Pick a photo"), requestCode); 
```

尚未测试结果，但 Intent 已正确启动（我已经测试过了）

# html - 将 div 的高度设置为 70%

> ID：13932612
> 
> 赞同：0
> 
> 时间：2012-12-18T12:05:25.417
> 
> 标签：html, css

我有一个超级简单的页面：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />   
    <link rel="stylesheet" href="@Url.Content("~/ui/all.min.css")" type="text/css" />
</head>
<body>   
    <div class="header">

</div>

</body>
</html> 
```

和CSS：

```
.header
{
    height:70%;
    width:100%;
    background:#990663;
}

body
{
    margin:0px;
    padding: 0px;
    height:100%;
    width:100%;
}

*
{
    margin: 0px auto;
} 
```

我希望 div 高度为屏幕的 70%。我怎样才能做到这一点？如果我把高度设置为 400 像素，它就可以工作。那么为什么不是70%呢？任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:07:53.890

您只需要更新`html`以具有 100% 的高度（以及`body`）：

```
html, body { height: 100%; } 
```

( [JSFiddle](http://jsfiddle.net/3wYNG/) )

这是因为`100%`总是相对于**父**容器（对于`body`那个`html`）。

关于该主题的一篇[有用的帖子在这里](http://www.dave-woods.co.uk/index.php/100-height-layout-using-css/comment-page-5/)。自由贸易协定：

> 首先，我们需要为 html 和 body 标签提供 100% 的高度。这通常被忽略，但非常重要，因为除非它知道它的父高度当前占据什么，否则任何元素都不会调整到百分比高度。由于容器是body标签的后代，而body标签是html标签的后代，所以这是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:08:00.997

只需将 100% 添加到 HTML 的高度，您就可以对其进行排序。

```
html{
    height:100%;
} 
```

[在这里检查](http://jsfiddle.net/KYWKg/)

# asp.net-web-api-routing - 找不到方法：'System.Web.Http.Controllers.ServicesContainer

> ID：13932623
> 
> 赞同：1
> 
> 时间：2012-12-18T12:06:13.793
> 
> 标签：asp.net-web-api-routing

我试图在 VS2012 中使用 webAPI 注册路由。在 GlobalConfiguration.Configuration.Routes 它抛出以下错误。有人可以帮我弄这个吗？

* * *

```
Server Error in '/' Application.
Method not found: 'System.Web.Http.Controllers.ServicesContainer  
System.Web.Http.HttpConfiguration.get_Services()'.
Description: An unhandled exception occurred during the execution of the current web request.    
Please review the stack trace for more information about the error and where it originated in  the code.

Exception Details: System.MissingMethodException: Method not found: 'System.Web.Http.Controllers.ServicesContainer System.Web.Http.HttpConfiguration.get_Services()'.

Source Error:

An unhandled exception was generated during the execution of the current web request.    
Information regarding the origin and location of the exception can be identified using the       
 exception stack trace below. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:56:08.563

听起来您需要 System.Web.Http.Common.dll 程序集。

# linux - 我可以依靠 valgrind/callgrind 的绝对成本来衡量和比较不同的实现吗？

> ID：13932624
> 
> 赞同：0
> 
> 时间：2012-12-18T12:06:19.507
> 
> 标签：linux, valgrind, callgrind

现在我正在使用 valgrind/callgrind 来衡量和比较不同的算法实现。假设一个算法有两种实现，处理链如下：

```
void main()
{
    //Procedure 1
    fun1();
    //Procedure 2
    fun2();
    //Procedure 3
    Algorithm_imp_1();  //Algorithm_imp_2(); 
   //Procedure 4
    fun4();
} 
```

这两种实现的区别在于第三个过程，其中执行了两种不同的算法实现。为了看看哪个实现更好，我现在在 kachegrind 的帮助下使用 valgrind/callgrind。

据我所知，if`Algorithm_imp_1()`比 更有效`Algorithm_imp_2()`，它的两个指标：一个是已用于运行程序的绝对时间，另一个是第三个程序所用时间的百分比，应该更小。但是，我使用 valgrind 获得的结果非常令人困惑：

```
Method 1 whole procedure: overall circle 106858896849   
        Algorithm_imp_1():  circle 2971828457(3.03%)
Method 2 whole procedure: overall circle 137889090577
        Algorithm_imp_2(): circle 351826053(0.26%) 
```

由于这两种方法的整个过程都是一样的，除了第三部分，如果第三部分消耗的时间百分比很小，我们可以预计运行程序的总时间也应该很小。然而，我们在上面观察到的是矛盾的。我想知道我的分析有什么问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:23:16.057

shell 有一个内置`time`命令。如果您使用它，它将显示挂钟以及用户和系统时间。

```
linux> /bin/sh
$ time a.out
    0m1.01s real     0m0.00s user     0m0.00s system 
```

如果您需要比 0.01 秒更好的分辨率，您可以使用`getrusage`和`gettimeofday`。

在对函数进行剖析时，最好将仪器放置在尽可能靠近函数的位置。使用类似 valgrind 的东西很可能会掩盖函数中发生的事情。

测量的信噪比必须很高才能有用。

```
linux> cat a.c
#include <stdio.h>
#include <unistd.h>
#include <sys/time.h>
#include <sys/resource.h>

/*
 * Time elapsed in milli-seconds. Tweak this to get micro-seconds. 
 */

int
time_diff(struct timeval *t2, struct timeval *t1)
{
    int r;

    r = (t2->tv_sec - t1->tv_sec)*1000 + t2->tv_usec/1000 - t1->tv_usec/1000;

    return(r);
}

int
main()
{
    struct rusage r1, r2;
    struct timeval t1, t2;

    (void)gettimeofday(&t1, 0);
    (void)getrusage(RUSAGE_SELF, &r1);

    sleep(1); /* Function to be profiled. */

    (void)getrusage(RUSAGE_SELF, &r2);
    (void)gettimeofday(&t2, 0);

    printf("real = %d (ms), user = %d (ms), system = %d (ms)\n", 
            time_diff(&t2, &t1),
            time_diff(&r2.ru_utime, &r1.ru_utime),
            time_diff(&r2.ru_stime, &r1.ru_stime));

    return(0);
} 
```

当您运行上述程序时，您应该会看到类似于下面的内容。

```
linux> a.out
real = 1000 (ms), user = 0 (ms), system = 0 (ms) 
```

# c# - 如何使用 c# 在按钮单击时编辑 .aspx 页面并保存在 asp.net 中？

> ID：13932628
> 
> 赞同：1
> 
> 时间：2012-12-18T12:06:35.853
> 
> 标签：c#, asp.net, writetofile, textwriter

我是来自应用程序根目录的 DropdownList 中的 .aspx 页面列表。我在 RichTextBox 中显示整个 .aspx 页面内容以进行编辑。但是，当我单击保存按钮时，它显示错误：从客户端检测到潜在危险的 Request.Form 值（ctl00$MainContent$TextBox1="...xt" %>

示例代码在这里：

```
<asp:TextBox ID="TextBox1" runat="server" Height="314px" TextMode="MultiLine" 
        Width="771px"></asp:TextBox>

<asp:Button ID="BtnSaveContent" runat="server" onclick="BtnSaveContent_Click" 
        Text="Save Content" />

In .aspx.cs file:
private void GetFilesNames()
    {

        TextReader tr = new StreamReader(Server.MapPath("") + "/CopyText.aspx");
        TextBox1.Text = tr.ReadToEnd();
        // close the stream
        tr.Close();
    }

    protected void BtnSaveContent_Click(object sender, EventArgs e)
    {
        WritetoFile();
    }

    private void WritetoFile()
    {
        TextWriter tw = new StreamWriter(Server.MapPath("") + "/CopyText.aspx");

        // write a line of text to the file
        tw.WriteLine(TextBox1.Text);

        // close the stream
        tw.Close();
    } 
```

页眉：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" validateRequest="false" CodeFile="CopyText.aspx.cs" Inherits="CopyText" %>

<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true" validateRequest = false
    CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

我还在页面级别和控制级别尝试了 validateRequest="false"。但不起作用！任何想法来解决这个错误？帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:10:17.790

你是正确的，你需要`validateRequest = false`。

但如果这是 .Net 4.0，您还需要添加`requestValidationMode="2.0"`到 httpRuntime 配置部分`web.config`：

```
<system.web>
  <httpRuntime requestValidationMode="2.0"/>
</system.web> 
```

# jquery - 使用 jquery 加载

> ID：13932631
> 
> 赞同：0
> 
> 时间：2012-12-18T12:06:46.027
> 
> 标签：jquery, css, jsp

我对 Jquery 知之甚少，我需要尽快解决这个问题。以下是我的 html 和 jQuery 代码。

```
<a class="btn1"  href="#" ref="<%=Id%>">View Activity</a> 
```

单击此按钮后，将发生以下事件。

```
$('.btn1').bind('click',function(){

              var id = $(this).attr("ref");

                $('.tinted').load('./webservices/getDetail.jsp',{"id":id});
                return false;  

            }); 
```

每当我单击获取活动链接时，结果会显示在 tinted 类中，但相同的结果会显示在所有其他 .tinted 类中。解决方案的问题可能是获取链接的父级，然后仅在类中加载内容那个父母。但我不知道该怎么做。我将不胜感激您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:10:23.537

尝试：

```
$('.btn1').bind('click',function(){
   var id = $(this).attr("ref");
   var parDiv = $(this).parent("div.tinted");
   parDiv.load('./webservices/getDetail.jsp',{"id":id});
   return false;  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:11:09.263

你可以这样做：

```
$(this).closest('.tinted').load('./webservices/getDetail.jsp',{"id":id}); 
```

# android - 在运行时减小位图的大小

> ID：13932632
> 
> 赞同：0
> 
> 时间：2012-12-18T12:06:46.750
> 
> 标签：android

我正在使用尺寸很大的位图。在内存中加载位图时，它给了我 outofmemoryexception 有没有办法在不改变高度、宽度和质量的情况下减小大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:11:19.413

通过这些课程有效地显示位图：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:13:35.480

使用此代码减小您需要减少图像尺寸的图像大小

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:17:41.287

以下代码将在运行时为您提供屏幕分辨率。

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
deviceHeightPix = displaymetrics.heightPixels;
deviceWidthPix = displaymetrics.widthPixels; 
```

并且您可以根据需要在以下功能中传递这些高度和宽度或分辨率。此函数将返回从原始样本创建的样本大小。它不会降低任何质量。例如，您的屏幕尺寸为 480 * 800（普通和中等密度）而您的图像尺寸为 1500*2000，所以首先获取您的屏幕尺寸，传递给以下函数，它将返回 480*800 分辨率的图像而不减小其质量。

```
public Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    Log.d("Home", "Image Resizer -> ReqHieght : " + reqHeight);
    Log.d("Home", "Image Resizer -> ReqWidth  : " + reqWidth);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth,
            reqHeight);
    Log.d("Home", "Image Resizer -> Samplesize:" + options.inSampleSize);
    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
} 
```

要使用上述功能，

`Bitmap bitmap = DecodeSampledBitmapFromResource(getResources(),R.drawable.home_screen,480,800);`

使用此功能的好处是，您无需`TWO`创建`Bitmap`. 第一个对象保存`decoded`图像，第二个对象使用第一个对象`scale`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:30:06.350

```
/**
 * decodes image and scales it to reduce memory consumption
 * 
 * @param file
 * @param requiredSize
 * @return
 */
public static Bitmap decodeFile(File file, int requiredSize) {
    try {

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(file), null, o);

        // The new size we want to scale to

        // Find the correct scale value. It should be the power of 2.
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < requiredSize
                    || height_tmp / 2 < requiredSize)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;

        Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(file),
                null, o2);

        return bmp;

    } catch (FileNotFoundException e) {
    } finally {
    }
    return null;
} 
```

# facebook - 共享者网址上的其他共享选项

> ID：13932633
> 
> 赞同：0
> 
> 时间：2012-12-18T12:06:47.017
> 
> 标签：facebook, facebook-sharer

我在[演示](http://jsfiddle.net/qx3tc/)中使用共享者链接但无法将此消息发送到朋友的时间线或在演示中使用带有 url 的私人消息发送。我希望发送选项位于共享窗口上，如下图所示。我应该在下面的共享者网址上更改什么？ ![在此处输入图像描述](../Images/d49ecbeedb3759304dfd4e12a8ccbbdf.png)

```
<a href="https://www.facebook.com/dialog/feed?%20app_id=186479208146565&%20link=http%3A%2F%2Fwww.cruisear.com%2Findex.php%3Fview%3Ds%26artist%3Djohn+lee+hooker%26track%3Di%27m+in+the+mood&%20picture=http://userserve-ak.last.fm/serve/126/8623397.jpg&%20name=john+lee+hooker+-+i%27m+in+the+mood&caption=cruisear.com&description=Discover%20new%20artists,%20listen%20new%20songs.&redirect_uri=http://www.cruisear.com" facebook"="" on="" title"share="" target="_blank"><img alt="share on facebook" src="http://www.olmasigereken.com/demo2/img/face.gif">
</a> 
```

# c# - 当阅读器以随机方式关闭时，对于在同一纳秒处理多个请求的门户，尝试调用无效

> ID：13932634
> 
> 赞同：0
> 
> 时间：2012-12-18T12:06:50.073
> 
> 标签：c#, asp.net, ado.net

我正面临危急情况的问题

当阅读器以随机方式关闭时，对于在同一纳秒处理多个请求的门户，尝试调用无效

从最近几天开始，在测试或调试项目时没有出现这种情况。

前任：

web.config中的连接是这样的

```
<add name="testconnection" connectionString="Data Source=1.1.1.1;Initial Catalog=testdb;MultipleActiveResultSets=True;Persist Security Info=True;User ID=testUser;Password=testpassword;Max Pool Size=20000;Min Pool Size=5;Pooling=true;" providerName="System.Data.SqlClient" /> 
```

C#中的代码是这样的：

```
SqlConnection conn= new SqlConnection(ConfigurationManager.ConnectionStrings["testconnection"].ToString());

    public string Adscategory(string Name)   
    {    
     string temp = string.Empty; 

     if (conn.State != ConnectionState.Open)     
     {      
      conn.Open();      
     }       
 SqlCommand comm = new SqlCommand("select Id from TestTable where tid='" + Name + "'", conn);    

   try       
   {      
    temp = Convert.ToString(comm.ExecuteScalar());      
   }   

  catch{}
  finally   
  {          
  conn.Close();       
  }       
return temp;   

} 
```

现在我有两个问题

1- 读取器关闭时调用读取的尝试无效，这发生在 comm.ExecuteScalar() 这条线上，当同时发出多个请求时。

2-连接未关闭。连接的当前状态是正在连接。这发生在 conn.Open() 也以随机方式生成。

任何帮助都应该是可观的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:04:28.367

`SqlParameter`使用和正确的异常处理应该有助于避免错误。`using`也强烈建议使用一次性物品以防止泄漏。

```
public string Adscategory(string Name)
{
string temp = String.Empty;
using (SqlConnection conn= new SqlConnection(ConfigurationManager.ConnectionStrings["testconnection"].ToString()))
{
    conn.Open();
    // INJECTION ALERT: Use the appropriate SqlParameters
    using (SqlCommand comm = new SqlCommand(String.Format("SELECT Id FROM TestTable WHERE tid=@nameParam", Name), conn))
    {
        comm.Parameters.AddWithValue("@nameParam", Name);

        try
        {
            temp = comm.ExecuteScalar().ToString();
        }
        catch(SqlException ex) { /*DB error, react appropriately !*/ }
        // catch(Exception ex) { /*Gotta catch'em all ... don't do this. */ }
    }
    return temp;
} 
```

# objective-c - 获取实际的设备方向

> ID：13932635
> 
> 赞同：1
> 
> 时间：2012-12-18T12:06:55.057
> 
> 标签：objective-c, ios, uiinterfaceorientation

在 ios 应用程序上工作，我试图弄清楚即使应用程序固定在纵向模式下如何获得实际的设备方向。目前所有的方向检查都给了我肖像。这是我检查过的。

```
CGRect frame = [[UIScreen mainScreen] applicationFrame];
UIInterfaceOrientation orientation2 = [[UIApplication sharedApplication] statusBarOrientation];
UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation]; 
```

基本上我想知道照片的拍摄方向，但是如果相机选择器以纵向加载并且手机在此之后变成横向，则照片的结果方向是纵向。我希望能够在拍摄照片的那一刻检查实际的设备方向并进行相应的转换。关于如何解决这个问题的任何想法？

编辑：我将研究使用陀螺仪，因为这将报告情况如何。

编辑：对不起，我应该提到手机本身是固定的纵向。但是有没有办法绕过它来看看它实际上是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:25:04.173

使用`UIDevice`的`orientation`属性

```
[[UIDevice currentDevice] orientation]; 
```

它返回您设备的物理方向。

[参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-DontLinkElementID_4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:14:03.377

将您捕获的图像传递给此函数，它会以您捕获的方向返回图像。

```
- (UIImage *)fixOrientation:(UIImage *)myImage 
{

    // No-op if the orientation is already correct
    if (myImage.imageOrientation == UIImageOrientationUp) return myImage;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (myImage.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, myImage.size.width, myImage.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, myImage.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, myImage.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (myImage.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, myImage.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, myImage.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, myImage.size.width, myImage.size.height,
                                             CGImageGetBitsPerComponent(myImage.CGImage), 0,
                                             CGImageGetColorSpace(myImage.CGImage),
                                             CGImageGetBitmapInfo(myImage.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (myImage.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,myImage.size.height,myImage.size.width), myImage.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,myImage.size.width,myImage.size.height), myImage.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
} 
```

# c - 如何读取连接在 SPI 总线上的 ROM 的第零地址？

> ID：13932637
> 
> 赞同：0
> 
> 时间：2012-12-18T12:07:12.507
> 
> 标签：c, embedded-linux, 8051

我的主人是一个ARM9处理器。

我想读取连接在 SPI 总线上的 8051 内部 ROM 的第零地址？

我可以使用`read()`系统调用来做到这一点吗？正如我在用户空间中想要的那样，我可以使用`mmap()` 系统调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:23:39.023

系统调用将`read()`调用您之前使用系统调用打开的设备驱动程序的读取例程`open()`；如果您有一个驱动程序可以访问您的 8051，那么您可以根据它已实现的方式使用它。

如果您没有驱动程序，`mmap()`如果您有权将物理内存映射到内存空间，并且知道要配置的正确寄存器位置（如果需要）、读写 SPI 设备，则可以选择使用。如果您不知道这些寄存器位置（或通信协议），则需要阅读特定的 CPU 手册（不是通用的 ARM9 手册，而是与您的制造商/型号完全相同的手册）以获取所需的信息。

您还需要知道 8051 使用的通信协议来向其发送适当的 SPI 命令。

# iphone - 项目未在苹果设备中运行

> ID：13932638
> 
> 赞同：0
> 
> 时间：2012-12-18T12:07:19.027
> 
> 标签：iphone, ios, ipad, ios-simulator

> **可能重复：**
> [应用程序未在设备中自动启动并在 xcode 上出现错误](https://stackoverflow.com/questions/13373994/application-not-automatically-launching-in-device-and-getting-error-on-xcode)

您好想`iOS`在设备上运行我的应用程序。我有配置文件，但是每当我在设备上运行我的应用程序时，它都会显示以下错误：

```
No such file or directory (/Users/varun/Library/Developer/Xcode/DerivedData/Myproj-axtuxgmraelfbkczsttvahwpsmzj/Build/Products/Debug-iphoneos/Myproj.app/Myproj) 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:14:03.303

退出`Xcode`并尝试运行它。它会正常工作的。仍然如果你有问题 delete `Derived data`，打开你的`organizer`和 goto`projects`选项卡，选择你的`Project`和 Delete`Derived data`在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:12:36.160

我以前也遇到过同样的情况。

1.  断开的设备。
2.  已删除的应用程序
3.  清理了我的项目。
4.  连接并安装了我的应用

之后它对我来说非常有效。

# c# - 在基类中使用动态关键字并调用泛型方法会导致 StackOverflowException

> ID：13932640
> 
> 赞同：3
> 
> 时间：2012-12-18T12:07:46.027
> 
> 标签：c#, generics, inheritance, dynamic, .net-4.0

根据我的[问题](https://stackoverflow.com/questions/12855930/reusable-non-generic-method-for-generic-methods)（通用方法的可重用非通用方法），我已经实现了提供的解决方案，但是经过一些重构（将代码移动到基类），我的代码导致了我不理解的 StackOverflowException。

对`Handle(new TestCommand())`结果的调用`IMessageHandler.Handle(IMessage)`被调用，然后`Handle<TMessage>(TMessage)`被调用，但不是调用`Handle(TestCommand message)`继承的类，而是`IMessageHandler.Handle(IMessage)`再次调用。

泛型方法中的 as-cast to`IMessageHandler<TestCommand>`有效，否则它将调用`HandleUnknownMessage(IMessage)`.

很难描述，所以这里是我的测试代码：

```
class Program {
    static void Main(string[] args) {

        MyProcess p = new MyProcess();
        IMessageHandler handler = p;

        handler.Handle(new DummyCommand()); // works -> HandleUnknownMessage gets called as expected

        handler.Handle(new TestCommand());  // fails -> results in a StackOverflowException 
    }
}  

public abstract class ProcessBase : IMessageHandler {
    void IMessageHandler.Handle(IMessage message) {
        System.Diagnostics.Debug.WriteLine("Dynamic Message gets handled");
        dynamic dynamicMessage = message;

        Handle(dynamicMessage);
    }

    private void Handle<TMessage>(TMessage message) where TMessage : IMessage {
        System.Diagnostics.Debug.WriteLine("Generic Message gets handled");
        var handler = this as IMessageHandler<TMessage>;
        if (handler == null)
            HandleUnknownMessage(message);
        else
            handler.Handle(message);
    }

    protected virtual void HandleUnknownMessage(IMessage unknownMessage) {
        System.Diagnostics.Debug.WriteLine("Unknown message {0} passed to Process".FormatWith(unknownMessage.GetType()));
        // Handle unknown message types here.
    }
}

public class MyProcess : ProcessBase, IMessageHandler<TestCommand>, IMessageHandler<TestEvent> {

    public void Handle(TestCommand commandMessage) {
        System.Diagnostics.Debug.WriteLine("TestCommand gets handled");
    }

    public void Handle(TestEvent eventMessage) {
        System.Diagnostics.Debug.WriteLine("TestEvent gets handled");
    }
}

public class DummyCommand : IMessage {    }

public class TestCommand : IMessage {    } 
```

如果我将代码从我的基类`ProcessBase`放到`MyProcess`，代码可以正常工作。将动态关键字与泛型方法和继承结合使用是否有任何限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:20:18.223

尝试定义`IMessageHandler<TMessage>`一个`void Handle<TMessage>(TMessage message)`方法。

由于它没有被定义，你定义的`MyProcess.Handle`事件*只*属于那个类而不属于它实现的接口。当您的代码尝试调用您的`IMessageHandler<TMessage> handler`时，它不知道它实际上是`MyProcess`具有这些特定方法的。添加接口方法后，调用解析应该识别出这些方法存在`MyProcess`并调用它们。否则它只会调用`IMessageHandler.Handle(IMessage)`产生无限循环的下一个最佳方法。

# html - HTML5 Canvas 拖放和调整图像大小

> ID：13932641
> 
> 赞同：0
> 
> 时间：2012-12-18T12:07:46.597
> 
> 标签：html, image-resizing, kineticjs

我在我的网站[http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)中使用此示例来调整图像大小。但问题是图像没有按比例调整大小。

例如-宽度=200；高度=138；当我将宽度辞职为 202 时，高度将按比例变化，但不适用于按比例变化

谢谢先生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:30:11.577

在这里工作正常。这取决于浏览器的版本。画布区域应始终大于图像大小，以便您可以在画布内拉伸图像，否则它将消失。此外，它还取决于您在哪里更改函数内部的值。

# node.js - 猫鼬连接不断关闭

> ID：13932644
> 
> 赞同：1
> 
> 时间：2012-12-18T12:07:57.103
> 
> 标签：node.js, mongodb, mongoose

我有一个应该永远运行的 Node.js 应用程序，并且正在创建一个 mongodb 连接。然而，连接在几秒钟后继续关闭并使应用程序崩溃。我已将所有代码剥离为仅创建连接方法。应用代码：

```
var mongoose = require('mongoose'),
    db = mongoose.createConnection("mongodb://localhost:28017/mwa"); 
```

然后几秒钟后我得到：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
Error: connection closed
    at [object Object].<anonymous> (/home/gavin/mwa/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/server.js:557:24)
    at [object Object].emit (events.js:88:20)
    at [object Object].<anonymous> (/home/gavin/mwa/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:109:15)
    at [object Object].emit (events.js:70:17)
    at Socket.<anonymous> (/home/gavin/mwa/node_modules/mongoose/node_modules/mongodb/lib/mongodb/connection/connection.js:427:12)
    at Socket.emit (events.js:67:17)
    at Array.0 (net.js:335:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:11:45.290

检查 MongoDB 的日志文件，看看它是否遇到任何导致连接中断的问题。正如您所提到的，如果日志中没有任何内容，重新启动 MongoDB 将是一件好事。

# eclipse - Eclipse，通过热键格式化代码

> ID：13932648
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:08:19.963
> 
> 标签：eclipse, visual-studio-2010, ide

在 Visual Studio 中，我可以说“Ctrl+E,D”，它会格式化代码。Eclipse 怎么样，我如何以这种方式格式化代码？我想用热键来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:37:11.533

选择要格式化的代码并使用 CTRL + SHIFT + F，这会格式化/缩进代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T13:41:24.653

如果你对eclipse格式化代码的方式不满意，可以根据需要自定义，

去`Window -> Preferences -> Java -> Code Style -> Formatter`

选择一个配置文件并`Edit`相应地。

# javascript - 增加 django 消息的显示时间

> ID：13932653
> 
> 赞同：3
> 
> 时间：2012-12-18T12:08:33.677
> 
> 标签：javascript, django

在我的应用程序中，每当删除一个问题时，它都会显示一条 django 消息，表明该问题已被删除。相关代码为：

```
from django.contrib import messages

msg= _('Question is deleted')
messages.info(request, msg) 
```

该消息会根据需要显示，但是我希望**显示消息持续更长**的时间至少 10 秒。或者直到用户点击它。

在 django 文档中看到消息过期但仍然无法弄清楚，而且我没有可以设置为 false 的消息存储。

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T12:41:46.643

你想做的是javascript域。下面的代码将显示您的消息 10 秒，或者您可以手动关闭它。在模板中，您可以这样做：

```
{% for message in messages %}
    <div class="message">
        {{ message }}
        <a href="#" class="del-msg">&times;</a>
    </div>
{% endfor %} 
```

在javascript中：

```
<script>
    $(document).ready(function() {
        // messages timeout for 10 sec 
        setTimeout(function() {
            $('.message').fadeOut('slow');
        }, 10000); // <-- time in milliseconds, 1000 =  1 sec

        // delete message
        $('.del-msg').live('click',function(){
            $('.del-msg').parent().attr('style', 'display:none;');
        })
    });
</script> 
```

# wpf - 在 WPF 的 Grid 中显示附件路径

> ID：13932655
> 
> 赞同：0
> 
> 时间：2012-12-18T12:08:49.897
> 
> 标签：wpf

我正在开发一个 WPF 应用程序。

请检查此图像：

![截屏](../Images/41e1db39f8e3bfa17384ccf0ad448519.png)

当我单击 + 号按钮时，我想在下面的网格中显示附件路径。为此，我做了一些工作，我将在下面向您展示。

### XAML 文件

```
<StackPanel>
    <StackPanel Orientation="Horizontal">
        <Appctr:GridToolBar x:Name="attachmentTool" Grid.Row="0" RemoveRowClick="attachmentTool_RemoveRowClick" AddRowClick="attachmentTool_AddRowClick" MoveUpClick="attachmentTool_MoveUpClick" MoveDownClick="attachmentTool_MoveDownClick" ToolBtn_Search="ButtonEditSettings_attachmentUsedClick" Height="25" />
    </StackPanel>
    <dxg:GridControl x:Name="dxgAttachment" Height="200" AutoPopulateColumns="False" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" >
        <dxg:GridControl.View>
            <dxg:TableView x:Name="vwAttachment" ShowGroupPanel="False" AllowBestFit="True" AutoWidth="True">
            </dxg:TableView>
        </dxg:GridControl.View>
        <dxg:GridControl.Columns>
            <!--<dxg:GridColumn FieldName="SlNo" Header="Sl #"></dxg:GridColumn>-->
            <dxg:GridColumn FieldName="LocalPath" Header="Attachment Path" Width="Auto" ReadOnly="True" EditSettings="{dxe:TextSettings TextWrapping=Wrap}"></dxg:GridColumn>
            <!--<dxg:GridColumn FieldName="LocalPath" Header="Attachment Path" Width="1130" ReadOnly="True" EditSettings="{dxe:TextSettings TextWrapping=Wrap}"></dxg:GridColumn>-->
        </dxg:GridControl.Columns>
    </dxg:GridControl>
</StackPanel> 
```

### .CS 文件

```
private void attachmentTool_AddRowClick(object sender, RoutedEventArgs e)
{
    Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();

    // Set filter for file extension and default file extension
    //dlg.DefaultExt = ".txt";
    //dlg.Filter = "Text documents (.txt)|*.txt";

    // Display OpenFileDialog by calling ShowDialog method
    Nullable<bool> result = dlg.ShowDialog();

    // Get the selected file name and display in a TextBox
    if (result == true)
    {
        try
        {
            // Open document
            string filePath = dlg.FileName;
            AttachmentInfo info = new AttachmentInfo();
            info.LocalPath = filePath;
            info.FileName = System.IO.Path.GetFileNameWithoutExtension(filePath);
            info.FileExtension = System.IO.Path.GetExtension(filePath).Replace(".", "");
            Stream strm = dlg.OpenFile();
            byte[] data = new byte[strm.Length];
            strm.Read(data, 0, data.Length);
            info.AttachmentContent = data;
            strm.Close();
            strm.Dispose();
            this.dxgAttachment.ItemsSource = info;

        }
        catch (Exception ex)
        {
            DXMessageBox.Show("Unable to attach file. " + ex.Message);
        }
    }
} 
```

### 问题

1.  如何在网格中显示附件路径？

2.  附加单个或多个文件后，我还想将所有文件保存在数据库中。这个怎么做？

通过使用上面的代码，我无法在网格中显示附件列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T23:49:10.917

我不知道您使用的是哪种 DataGrid，但 ItemsSource 可能应该是一个 IEnumerable（项目的集合），而不仅仅是一个项目。

尝试这个：

```
this.dxgAttachment.ItemsSource = new List<AttachmentInfo>() { info }; 
```

# html - 如何在 CSS 中调整子菜单的高度和宽度？

> ID：13932658
> 
> 赞同：1
> 
> 时间：2012-12-18T12:08:56.217
> 
> 标签：html, css, drop-down-menu

我想调整网站菜单>子菜单的宽度和高度`http://www.cooltvforum.com/`。

一些长子菜单项的高度不合适，看起来不太好。我想解决这个问题。

这是css代码：

**子菜单代码**

```
#menu3 li ul {background: #292929;border: solid #000;border-width: 0;height: auto;left:-999em;margin-left: -65px;position: absolute;width: 344px;z-index: 9999;} 
```

**一个 href 访问过的链接代码**

```
#menu3 li li a, #menu3 li li a:link, #menu3 li li a:visited {color: #fff;float: none;margin: 0;padding: 9px 7px;width: 158px;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:11:45.870

添加`height:auto`到`#menu3 li li, #menu3 li li li`及其`hover`样式

![在此处输入图像描述](../Images/c7e57aef85ba240f1fd03c275db708a6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:24:05.073

使用 min-height 作为 li 高度，也许可以解决问题

# java - jBPM：在 java 类或 BPMN 中声明流程变量

> ID：13932660
> 
> 赞同：0
> 
> 时间：2012-12-18T12:09:07.400
> 
> 标签：java, jbpm, bpmn

想知道是否有人可以给我一个直接的答案。这主要是好奇心，尽管可能很重要。

使用 jBPM 时，我有 2 个选项来声明流程变量：

1）通过java代码向BPMN传递参数，使用一个Map，其中string是变量名，Object是它的值

2）直接上BPMN属性

我最近注意到在 BPMN 中声明流程变量就足够了。我应该只在那里声明它还是应该在java类中声明它？这里有什么区别？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:09:35.663

BPMN 文件必须定义将在流程的不同节点中使用的所有流程变量。流程变量主要用于将输入/输出变量映射到任务/从任务映射。如果在 TaskA 中需要来自流程的变量，则必须在流程中定义一个变量，并且必须定义正确的映射。为了在您的流程中使用变量，您必须先定义它。这里的误解是 BPMN 只定义其变量的名称和类型，而不是它们的结构。如果您想在流程启动时为这些变量设置值，您必须提供您提到的 Map。jBPM 会将 Map 的值“复制”到流程中的变量中。您在 Map 中使用的键必须与您在流程中定义的变量的名称相对应。

希望能帮助到你，

# php - 如何使用php将html转换为pdf

> ID：13932661
> 
> 赞同：-3
> 
> 时间：2012-12-18T12:09:08.977
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [使用 PHP 将 HTML 转换为 PDF（不是 PDF 到 HTML）](https://stackoverflow.com/questions/1403820/converting-html-to-pdf-not-pdf-to-html-using-php)

下面是我的代码，我想通过单击`value='print'`div`id ='letter'`应该包含来自 html 表单的所有值的位置来生成 pdf。div`id="letter"`应该保留在 PDF 中，但它也包含来自 html 表单的值。建议任何示例 PDF

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>PDF</title>
<script type="text/javascript">
            <!--
            function OnEditChange(obj, ev, display) {
                var key;
                if (window.event) {
                    key = window.event.keyCode;
                } else if (ev) {
                    key = ev.which;
                }  

                var dest = document.getElementById("d-"+obj.name);
                if (display) {
                    dest.style.display = (obj.value.length) ? display : 'none';
                }  

                dest.innerHTML=obj.value;
                return key;
            }
            function OnMPANKeyUp(ev) {
                var key;
                if (window.event) {
                    key = window.event.keyCode;
                } else if (ev) {
                    key = ev.which;
                }

                var pc = document.getElementById("pc");
                var mtc = document.getElementById("mtc");
                var llf = document.getElementById("llf");
                var rec = document.getElementById("rec");
                var mpan1 = document.getElementById("mpan1");
                var mpan2 = document.getElementById("mpan2");
                var mpan3 = document.getElementById("mpan3");
                var snumber = document.getElementById("snumber");
                snumber.innerHTML = "<span style=\"font-weight: bold;\">" + pc.value + mtc.value + llf.value+" "+rec.value + mpan1.value+mpan2.value+mpan3.value + "</span>";
                return key;
            }
            function OnMPANKeyPress(myfield, len, dec, e)
            {
            var key;
            var keychar;

            if (window.event)
                key = window.event.keyCode;
            else if (e)
                key = e.which;
            else
                return true;
            keychar = String.fromCharCode(key);

            if ((key==null) || (key==0) || (key==8) || (key==9) || (key==13) || (key==27))
                return true;
            else if ((("0123456789").indexOf(keychar) > -1))
                {
                if (dec && myfield.value.length == len-1)
                {
                myfield.value += keychar;
                dec.select();
                return false;
                }
                return true;
                }
            return false;
            }
            -->
        </script>
</head>

<body>
<div class="termination_centerinner">
                                <div class="innercontent">
                                    <p>
                                        This letter can be sent to your existing electricity supplier to inform them you wish to terminate your existing contract when it expires.
                                    </p>
                                    <p>
                                        Fill in the details for yourself, your meter, and your current supply contract, then click on the 'Print' button.
                                    </p>
                                </div>
                                <form action="termnotice.php?" method="post">
                                    <input type="hidden" name="action" value="print" />
                                    <span class="termination_form_descriptor">From:</span><input type="text" name="name" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event,'block')" /><br /><br />
                                    <span class="termination_form_descriptor">Company:</span><input type="text" name="company" maxlength="120" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event,'block')" /><br /><br />
                                    <span class="termination_form_descriptor">Address:</span><input type="text" name="address1" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event,'block')" /><br />
                                    <input class="termination_form_input_without_descriptor" type="text" style="width: 325px;" name="address2" maxlength="80" value="" onkeyup="return OnEditChange(this, event,'block')" /><br />
                                    <input class="termination_form_input_without_descriptor" type="text" style="width: 325px;" name="city" maxlength="80" value="" onkeyup="return OnEditChange(this, event,'block')" /><br /><br />
                                    <span class="termination_form_descriptor">Postcode:</span><input type="text" name="postcode" maxlength="10" size="10" value="" onkeyup="return OnEditChange(this, event,'block')" /><br /><br />
                                    <span class="termination_form_descriptor supplier">Supplier:</span><input type="text" name="supplier" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event, 'block')" /><br /><br />
                                    <span class="termination_form_descriptor">Address:</span><input type="text" name="sa1" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event, 'block')" /><br />
                                    <input class="termination_form_input_without_descriptor" type="text" name="sa2" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event, 'block')" /><br />
                                    <input class="termination_form_input_without_descriptor" type="text" name="sa3" maxlength="80" style="width: 325px;" value="" onkeyup="return OnEditChange(this, event, 'block')" /><br /><br />
                                    <div class="termination_meterform">
                                        <div class="termination_meterform_s">
                                            S&nbsp;
                                        </div><!-- S -->
                                        <div class="termination_meterform_toprow">
                                            <input name="pc" type="text" id="pc" size="5" maxlength="2" onkeypress="return OnMPANKeyPress(this, 2, mtc, event)" onkeyup="return OnMPANKeyUp(event)" />
                                            <input name="mtc" type="text" id="mtc" size="6" maxlength="3" onkeypress="return OnMPANKeyPress(this, 3, llf, event)" onkeyup="return OnMPANKeyUp(event)" />
                                            <input name="llf"  type="text" id="llf" size="6" maxlength="3" onkeypress="return OnMPANKeyPress(this, 3, rec, event)" onkeyup="return OnMPANKeyUp(event)" />

                                        </div><!-- toprow -->
                                        <div class="termination_meterform_bottomrow">
                                            <input name="rec"  type="text" id="rec" size="2" maxlength="2" onkeyup="return OnMPANKeyUp(event)" onkeypress="return OnMPANKeyPress(this, 2, mpan1, event)" />
                                            <input name="mpan1" type="text" id="mpan1" size="4" maxlength="4" onkeyup="return OnMPANKeyUp(event)" onkeypress="return OnMPANKeyPress(this, 4, mpan2, event)" />
                                            <input name="mpan2" type="text" id="mpan2" size="4" maxlength="4" onkeyup="return OnMPANKeyUp(event)" onkeypress="return OnMPANKeyPress(this, 4, mpan3, event)" />
                                            <input name="mpan3" type="text" id="mpan3" size="3" maxlength="3" onkeyup="return OnMPANKeyUp(event)" />
                                        </div><!-- bottomrow -->
                                    </div><!-- meterform -->
                                    <br />
                                    <span class="termination_form_descriptor">Expiry Date</span><input type="text" name="expirydate" maxlength="20" size="20" value="" onkeyup="return OnEditChange(this, event)" /><br />
                                    <script type="text/javascript">
                                        <!--
                                        function printSelection(node) {
                                            var content=node.innerHTML
                                            var pwin=window.open('','print_content','width=100,height=100');
                                            pwin.document.open();
                                            pwin.document.write('<html><body onload="window.print()">'+content+'</body></html>');
                                            pwin.document.close();
                                            setTimeout(function(){pwin.close();},1000);
                                        }
                                        -->
                                    </script>
                                    <input class="termination_form_print_button" type="image" src="/images/print.png" alt="Print" value="Print" onclick="printSelection(document.getElementById('letter'));return false;" />
                                </form>
                                <div id="letter" class="letter">
                                    <div style="text-align: right">
                                        <div class="filled" id="d-company"></div>
                                        <div class="filled" id="d-address1"></div>
                                        <div class="filled" id="d-address2"></div>
                                        <div class="filled" id="d-city"></div>
                                        <div class="filled" id="d-postcode"></div>
                                        <br />
                                        18th Dec 2012                                        <br />
                                    </div>
                                    <br />
                                    <div id="d-supplier"></div>
                                    <div class="filled" id="d-sa1"></div>
                                    <div class="filled" id="d-sa2"></div>
                                    <div class="filled" id="d-sa3"></div>
                                    <br />
                                    <br />
                                    Dear Sir/Madam<br />
                                    <br />
                                    <center><span style="font-weight: bold; text-decoration: underline;">Re: Termination Notice of Contract to Supply Electricity</span></center>
                                    <br />
                                    In accordance with your contract Terms and Conditions, I hereby give notice to terminate my Electricity Supply contract with you, on the contract expiry date for the meter detailed below.
                                    <br />
                                    <br />
                                        <table>
                                            <tr>
                                                <td>
                                                    Supply 'S' Number&nbsp;
                                                </td>
                                                <td>
                                                    <div id="snumber"></div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Contract Expiry Date&nbsp;</td>
                                                <td>
                                                    <span style="font-weight: bold;" id="d-expirydate"></span>
                                                    <br />
                                                </td>
                                            </tr>
                                        </table>
                                    <br />
                                    I would be grateful if you could formally acknowledge receipt and acceptance of this Termination Notice of Contract to Supply Electricity in writing by return.
                                    <br />
                                    <br />
                                    Yours faithfully,<br />
                                    <div style="height:25mm;">
                                        &nbsp;
                                    </div>
                                    <div class="filled" id="d-name">
                                                                            </div>
                                </div>
                            </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:11:46.090

也许这很有用：

1.  [https://github.com/dompdf/dompdf](https://github.com/dompdf/dompdf)
2.  [http://www.html2pdf.fr/en](http://www.html2pdf.fr/en)
3.  [http://pdfcrowd.com/hub/2011/04/18/convert-html-to-pdf-in-php.html](http://pdfcrowd.com/hub/2011/04/18/convert-html-to-pdf-in-php.html)
4.  [http://www.phpclasses.org/package/2905-PHP-Convert-HTML-to-PDF-using-Web-services.html](http://www.phpclasses.org/package/2905-PHP-Convert-HTML-to-PDF-using-Web-services.html)

下次，做一个谷歌搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:18:28.617

也许 tcpdf 是您的解决方案。您将看到足够多的示例：

[看这个](http://www.tcpdf.org/examples.php)

# c# - 具有多个鉴别器的继承？

> ID：13932663
> 
> 赞同：0
> 
> 时间：2012-12-18T12:09:14.783
> 
> 标签：c#, inheritance

我仍处于规划具有多功能交易系统的应用程序的早期阶段，该系统将考虑多种交易类型和支付处理程序。

假设我有以下基类：

```
public class Transaction {
    public int Id { get; set; }
    public TransactionTypes Type { get; set; }
    public PaymentHandlers PaymentHandler { get; set; }
    public decimal Amount { get; set; }
} 
```

其中 TransactionTypes 是一个确定交易类型的枚举。以下是交易类型为产品时的示例：

```
public class ProductTransaction : Transaction {
    public Address DeliveryAddress { get; set; }
} 
```

PaymentHandlers 是一个枚举，用于确定交易的支付处理程序。以下是付款处理程序为 PayPal 时的示例：

```
public class TransactionPayPal : Transaction {
    public string AccountName { get; set; }
} 
```

但是我不确定我是否完全正确，因为我有两个不同的类，它们从具有不同鉴别器的 Transaction 继承。我假设有某种规则反对这一点，因为我可以想象这会在稍后插入和获取数据时引起问题。

我很感激有关如何实现这一目标的建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:22:52.663

根据 Steven 的建议，我重构了我的设计。现在我有一个 TransactionHandler 类型，它将处理程序信息与事务分开。最后，我在这两个类之间添加了一个连接（数据库中的外键）。

# jquery - $.each 循环中的列数

> ID：13932664
> 
> 赞同：0
> 
> 时间：2012-12-18T12:09:17.470
> 
> 标签：jquery

我有以下 jquery 脚本

```
success: function(data) {
                    //$("#divReport").html(CreateReportHTML(data));
                    $.each(data, function(key, value) {
                        createDynamicTable($("#tbReport"), key, 5);
                    });    

                    $("#btnViewReport").attr("disabled",false);
                    $("#btnExportToExcel").attr("disabled",false);
                }, 
```

如您所知，“key”用于索引，而“value”具有列。这些值像 value.FirstName、value.LastName 等一样被回收。

我需要从 $.each 获取“值”中可用的列数。我将如何找到它？我尝试了 value.length，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:12:40.177

您可以使用以下内容来检索“值”对象中的键数。

```
Object.keys(value).length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:13:05.963

`Object.keys()`您可以使用( [reference](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys) ) 方法计算Javascript 中任何对象的属性/键的数量。在你的情况下，这将是：

```
Object.keys(value).length 
```

参考：

1.  [如何有效地计算 JavaScript 中对象的键/属性数？](https://stackoverflow.com/questions/126100/how-to-efficiently-count-the-number-of-keys-properties-of-an-object-in-javascrip)
2.  [浏览器支持](http://kangax.github.com/es5-compat-table/)

# asp.net - 如何从其他网站访问 nopcommerce 网站？

> ID：13932665
> 
> 赞同：1
> 
> 时间：2012-12-18T12:09:17.360
> 
> 标签：asp.net, asp.net-mvc, web-services, nopcommerce

我想安装**nopcommerce**。该网站的域名类似于 shop.mydomain.com。我想从其他网站 www.exampleshop.com 访问这家商店。

我将从 shop.mydomain.com**获得类别和产品。**然后我将在 www.exapleshop.com 上**显示返回值。**如果客户在购物车中添加了一些产品，我会将它们保存在会话中。之后如果客户下订单，我会将需要的信息发送到 shop.mydomain.com。

执行此机制的最佳方法是什么。我该怎么做？有没有这样的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:15:16.213

会话与 cookie 相关联，cookie 与域名相关联，因此当您尝试将购物车存储在会话上（无论如何这都不是好主意）并从一个域移动到另一个域时，会话将丢失，并且所以购物车。

所以你描述的例子是行不通的。

当您尝试在购物车中添加不在最终域中的产品时，商店会做什么，它会理解它并将他重定向到一个页面上，该页面会双重询问用户他是否仍然赢得将产品添加到购物车中 - 但是现在是在最终域上。

# c# - 耦合到依赖注入框架

> ID：13932668
> 
> 赞同：2
> 
> 时间：2012-12-18T12:09:28.203
> 
> 标签：c#, .net, design-patterns, dependency-injection

## 前言

我觉得在使用 DI 框架时确实有可能让自己陷入困境。
（我选择的框架是 ninject，所以我将在我的示例中使用它。）

我将退后一步，看看 DI**框架**存在的原因：
*为了防止不得不手动进行 DI*

没错，本着 Ninjects 文档的精神，假设我们有一个`Dojo`创建`Samurai`s 的对象。这些`Samurai`s 是`IWeapon`在制作时给出的。

```
class Samurai{
    readonly IWeapon weapon;

    public Samurai(IWeapon weapon){
        this.weapon = weapon;
    }
} 
```

现在我的理解是`Dojo`在`Kernel.Get<IWeapon>()`创建`Samurai`.

**哇**
，我不是只是将我的 Dojo 与内核耦合了吗？
另外...应该如何获得内核：DI，单例，服务位置？

我觉得我们很快就打破了 DI 的目的，因为现在我依赖于我的 DI 框架。如果忍者被击败并且忍者也死了会发生什么？

## 问题

我们如何在不耦合到 DI 框架的情况下使用 DI？

### 邮报

我确定以前有人问过这个问题，但是我找不到任何东西。请使用评论发布相关问题，以便我们可以汇集知识以找出最佳解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:21:26.770

在进行依赖注入时，诀窍是让所有类通过构造函数注入它们的依赖项。这样，您可以让内核从根对象为您构建一个完整的对象图。

然而，这个“根对象”必须通过调用直接解决`kernel.Get<HomeController>()`（如果`HomeController`是根对象）。因此，您必须在应用程序的某个地方调用`kernel.Get`. 没有是不可能的。

诀窍是将其最小化为应用程序中理想的单行代码，并将其放置在启动路径附近。可能靠近您注册依赖项的地方。应用程序的其余部分忽略了任何 DI 框架的使用。

甚至还有用于 Ninject 和其他容器的集成包，允许您根据使用的应用程序平台删除单行代码。例如，ASP.NET MVC 具有很好的扩展点，允许您插入一个`ControllerFactory`允许您让该工厂`kernel.Get`为您调用的点。

> 我们如何在不耦合到 DI 框架的情况下使用 DI？

总会有一些耦合，但理想情况下，这应该只是启动路径。所有其他代码都应该忽略容器的使用。仍然会有一个程序集依赖，但这个依赖只会存在于启动项目中，而不存在于您的业务层中。

> 查看 DI 框架存在的原因：防止不得不手动进行 DI

更准确地说。DI 有助于使您的应用程序更易于维护。DI 框架有助于使您的应用程序（又名[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)）的启动路径更易于维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:51:00.527

实际上 Service Locator 设计模式被认为是有害的（实际上从许多角度来看[被认为是反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)），所以我强烈反对在你的代码中使用它。

使用服务定位器会导致您的类 ( `class Dojo`) 与其客户之间的接口不明确。阅读你的类头将不可能理解所需的上下文：我应该怎么做才能正确使用这个类：我应该在什么里面放什么来满足所有的要求。

实际上，我更喜欢使用另一种称为[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)的模式，当我们仅在应用程序的一个位置使用容器（又名服务定位器）时：在应用程序的根目录中，例如`Main`等`HomeController`。

我强烈建议看一下有关该主题的书： Mark Seeman[的“.NET 中的依赖注入”](http://manning.com/seemann/)，它更详细地涵盖了所有这些主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:25:10.017

您还可以对 DI 容器进行某种抽象。考虑这样的界面，

```
public interface IDependencyResolver
{
    T Get<T>();
} 
```

然后你有一个实现 - 对于 Ninject 它可能看起来像这样。

```
public class NinjectDependencyResolver : IDependencyResolver
{
    private readonly IKernel _kernel = new StandardKernel();

    public T Get<T>()
    {
        return _kernel.Get<T>();
    }
} 
```

这意味着您可以像使用项目中的任何其他 3rd 方组件一样使用 Ninject，但读取的行除外

```
IDependencyResolver resolver = new NinjectDependencyResolver(); 
```

根据您的需要，只能在某个地方找到一次。然后，您使用您的`IDependencyResolver`实例而不是`IKernel`Ninject 提供的实例（或其他框架的类似容器）。

切换 DI 容器只需实现一个新的`IDependencyResolver`.

# objective-c - 词法预处理器问题（找不到文件）

> ID：13932671
> 
> 赞同：1
> 
> 时间：2012-12-18T12:09:40.040
> 
> 标签：objective-c, ios6

我在 iOS 4.3 iOS 中开发了我的项目。之后我将我的 Mac OSX 10.7 升级到 10.8。并安装了**Xcode 4.5.1（带有 6.0 iOS）。**

之后，当我打开我的项目时，它会给我一条错误消息，如下图所示。

![请看这张图片：](../Images/80b0af1280a3e81d3f30e5cdb7f99cbf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:11:45.267

CMSync 是 iOS 6。检查项目的目标

# image - 使用 Delphi6 在 MS-Access 数据库中存储图像

> ID：13932672
> 
> 赞同：1
> 
> 时间：2012-12-18T12:09:41.713
> 
> 标签：image, delphi, ms-access

如何使用 Blob 数据类型将图像存储在 MS-Access 数据库中？我想使用记录类型来存储数据。那么，如何处理Record Type中的图像保存在数据库中呢？

编辑：我想用 Image 存储数据。我有以下记录类型：

```
type
  TPersonInfoRecType = Record
     FirstName: string[20];
     MiddleName: string[20];
     LastName: string[20];
     DateOfBirth: TDateTime;
     Age: integer;
     Gender: string[8];
     Mobile: string[11];
     LandLine: string[13];
     Adderss1: string[50];
     City: string[15];
     State: string[20];
     Country: string[20];
     ZipCode: string[6];
     Photo: TBlobField;
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:18:37.130

一种可能，允许存储不同类型的图像，您可以缩短或扩展 RegisterClasses 中的列表。

```
unit LoadSaveImageBlobs;

// 20120224 by Thomas Wassermann

interface
uses Classes,DB,Graphics,Jpeg,PngImage;

Procedure SavePicture2Blob(Blob: TBlobField; Picture: TPicture);
Procedure LoadPictureFromBlob(Picture: TPicture; Blob: TBlobField);
implementation

Procedure SavePicture2Blob(Blob: TBlobField; Picture: TPicture);
var
  ms, ms2: TMemoryStream;
  theClassName: AnsiString;
  len: Byte;
begin
  ms := TMemoryStream.Create;
  try
    Blob.Clear;
    theClassName := Picture.Graphic.ClassName;
    len := Length(theClassName);
    ms.WriteBuffer(len, 1);
    if len > 0 then
      ms.WriteBuffer(theClassName[1], len);
    ms2 := TMemoryStream.Create;
    try
      Picture.Graphic.SaveToStream(ms2);
      ms2.Position := 0;
      if ms2.Size > 0 then
        ms.CopyFrom(ms2, ms2.Size);
    finally
      ms2.Free;
    end;
    Blob.LoadFromStream(ms);
  finally
    ms.Free;
  end;
end;

Procedure LoadPictureFromBlob(Picture: TPicture; Blob: TBlobField);
var
  ms, ms2: TMemoryStream;
  len: Byte;
  theClassName: AnsiString;
  Graphic: TGraphic;
  GraphicClass: TGraphicClass;
begin
  ms := TMemoryStream.Create;
  Blob.SaveToStream(ms);
  ms.Position := 0;
  try
    ms.ReadBuffer(len, 1);
    SetLength(theClassName, len);
    if len > 0 then
      ms.ReadBuffer(theClassName[1], len);
    GraphicClass := TGraphicClass(FindClass(theClassName));
    if (GraphicClass <> nil) and (len > 0) then
    begin
      Graphic := GraphicClass.Create;
      ms2 := TMemoryStream.Create;
      try
        ms2.CopyFrom(ms, ms.Size - len - 1);
        ms2.Position := 0;
        Graphic.LoadFromStream(ms2);
      finally
        ms2.Free;
      end;
      Picture.Assign(Graphic);
    end;
  finally
    ms.Free;
  end;
end;

initialization
RegisterClasses([TIcon, TMetafile, TBitmap, TJPEGImage,TPngImage]);

end. 
```

# excel - 我们可以过滤这些值并使用 VBScript 将它们放入一个数组中吗？

> ID：13932673
> 
> 赞同：0
> 
> 时间：2012-12-18T12:09:42.100
> 
> 标签：excel, vbscript, vba

考虑下面的 Excel 表：

```
 Emp Id    Job Status
    741         P
    788         T
    111         T
    124         P
    136         P 
```

我想要一个高级的 VBScript 代码，它可以一次完成这样的过滤，就像我们在 Excel 中手动完成的那样。过滤后，我希望第一列过滤值只放入一个数组中。

**代码**

```
Dim IntRow1,Arr,Index
Index=0

Do while objSheet1.Cells(IntRow1,1) <> ""
    If objSheet1.Cells(IntRow1,2) = "P" Then
        Arr(Index)=objSheet1.Cells(IntRow1,1)
        Index=Index+1
    End If
IntRow1=IntRow1=1
Loop 
```

***更新**

```
Option Explicit

Dim Dic, DicItems, Dickeys
Dim objExcel1
Dim strPathExcel1
Dim objSheet1, lastRow

Set objExcel1 = CreateObject("Excel.Application")

strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
objExcel1.Workbooks.Open strPathExcel1
Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

Set Dic = CreateObject("Scripting.Dictionary")

lastRow = 1
Do Until lastRow > objExcel1.Application.WorksheetFunction.CountA(objSheet1.Columns(1))
    Dic.Add objSheet1.Cells(lastRow, 1).Value, objSheet1.Cells(lastRow, 2).Value
    lastRow = lastRow + 1
Loop

DicItems = Dic.Items
Dickeys = Dic.Keys

For lastRow = 0 To Dic.Count - 1
    If DicItems(lastRow) = "P" Then
        Dic.Remove (Dickeys(lastRow))
    End If
Next

DicItems = Dic.Items
'=======================
objExcel1.ActiveWorkbook.SaveAs strPathExcel1
objExcel1.Workbooks.Close
objExcel1.Application.Quit
'====================== 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T15:20:03.337

请看我的回答：

选项显式

```
 Dim Dic,DicItems,Dickeys
 Dim objExcel1
 Dim strPathExcel1
 Dim objSheet1,lastRow

 Set objExcel1 = CreateObject("Excel.Application")

 strPathExcel1 = "D:\VA\CopyofGEWingtoWing_latest_dump_21112012.xls"
 objExcel1.Workbooks.open strPathExcel1
 Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

 Set Dic = CreateObject("Scripting.Dictionary")

 lastRow=1
  Do Untill lastRow >         objExcel1.Application.WorksheetFunction.CountA(objSheet1.Columns(1))

  Dic.Add objSheet1.Cells(lastRow,1).Value,objSheet1.Cells(lastRow,2).Value

 lastRow=lastRow+1
 Loop

DicItems=Dic.Items
Dickeys=Dic.Keys

 For lastRow=0 to Dic.Count -1

 If DicItems(lastRow)="P" Then

    Dic.Remove(Dickeys(lastRow))

 End If

  Next

 DicItems=Dic.Items

 '=======================
  objExcel1.ActiveWorkbook.SaveAs strPathExcel1
  objExcel1.Workbooks.close
  objExcel1.Application.Quit
 '====================== 
```

# iphone - 访问 JSON 文件以填充 UIPickerView

> ID：13932674
> 
> 赞同：0
> 
> 时间：2012-12-18T12:09:43.353
> 
> 标签：iphone, ios, json, ios6, uipickerview

这个网站上有一个与此类似的问题，但由于我不能以问题的形式对该问题添加其他评论，所以我选择在这里写我的，请原谅我。这里，

我在本地服务器上有一个 JSON 文件，并试图访问我的 UIPickerView 上的值。问题是我得到一个“问号，即“？”“而不是 JSON 文件上的字符串。是什么问题，我该如何解决？我还是个初学者，所以放轻松。

这是代码，

```
#import "ViewController.h"
#import "JSON.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize picker;
@synthesize terrainJsonArray;

- (void)viewDidLoad
{
[super viewDidLoad];

NSString *terrainString = [NSString stringWithFormat:@"http://terrainracing.com/ios/events_json.php"];

NSURL *terrainUrl = [NSURL URLWithString:terrainString];

NSData  *terrainData = [NSData  dataWithContentsOfURL:terrainUrl];

NSError *error;

self.terrainJsonArray = [NSJSONSerialization JSONObjectWithData:terrainData options:kNilOptions error:&error];

NSLog(@"%@", terrainJsonArray);

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
 numberOfRowsInComponent:(NSInteger)component {
return self.terrainJsonArray.count;
}

#pragma mark Picker Delegate Methods
- (UIView *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
{

return [self.terrainJsonArray objectAtIndex:row];

}
@end 
```

![在此处输入图像描述](../Images/a651eeee78cb7d7e8fe836ef3d00c160.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:28:22.680

Start by fixing your delegate method - `- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component` returns NSString not UIView and you need to obviously return a string for it to work

I can see in your response items as

```
{"event_name":"Phoenix","date":"Oct 27","event_id":"14"} 
```

so you need to grab the string of "sub-item" you want to display

for instance

```
return [[self.terrainJsonArray objectAtIndex:row] valueForKey:@"event_name"]; 
```

# javascript - 在 $(window).resize 上分隔 div

> ID：13932680
> 
> 赞同：1
> 
> 时间：2012-12-18T12:09:55.897
> 
> 标签：javascript, jquery, css

我试图在“.elements” div 内均匀地水平间隔可变数量的“.wrapper” div。

.wrapper 是`position: relative`和`float: left`

.elements 是`position: absolute`

我用来分隔“.wrapper” div 的函数如下：

```
$(window).resize(function() { //on resize we...
    x = $('.elements').width(); //new width means new x
    y = Math.floor(x / pane); //new x means new y
    marginSize = (x - (pane * y)) / (2 * y); //set margineSize with new params
    $('.wrapper').css({
        'margin-left': marginSize,
        //change left margin on resize
    });
}); 
```

这应该均匀地分隔 .wrapper div。但只有在非常特殊的情况下，它们才会在 .elements 包装器 div 中均匀分布。大多数时候，它们似乎向左移动。

是）我有的：

- 几个 div 彼此均匀分布 - div 彼此接近一个像素（或更接近？）

我想要的是：

- 几个 div 彼此均匀分布以均匀地放入另一个 div -div 彼此之间保持 25px 的最小距离

这是我正在谈论的[工作的 jsfiddle 版本。](http://jsfiddle.net/aL3fy/12/ "jsfiddle")调整输出大小以了解我的意思。

我希望我的解释是有道理的。如果需要任何澄清或补充，请告诉我。（这是我在这里的第一个问题......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:12:32.553

将 25 添加到您的 marginSize：

```
marginSize=(x-(pane*y))/(2*y)+25; //Sets marginSize 
```

这就是你想要的吗？

[http://jsfiddle.net/muffls/thZgT/](http://jsfiddle.net/muffls/thZgT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:10:01.757

我将边距分成左右两部分，并将容纳容器 (#holder) 居中，以确保容器之间始终存在相等的空间。

```
$(window).resize(function() {
    x=$('.elements').width();
    y=Math.floor(x/pane);
    marginSize=(x-(pane*y))/(2*y);
    $('#holder').css({width:(pane*y)+(marginSize*y)});
    $('.wrapper').css({
        'margin-right':marginSize/2,
        'margin-left':marginSize/2
    });
}); 
```

你会在这里找到我的解决方案：http: [//jsfiddle.net/axelmichel/jnmWE/](http://jsfiddle.net/axelmichel/jnmWE/)。
此外，我通过向容器添加边框来模拟 25px / 50px 的最小空间。如果您有不同的背景而无法使用边框，则可以使用包含最小空间的嵌套 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:58:00.747

为什么不为“.elements” div 分配以 px 为单位的最小宽度？

# java - Java：读取和解析 XML 文件总是返回 null

> ID：13932684
> 
> 赞同：0
> 
> 时间：2012-12-18T12:10:12.127
> 
> 标签：java, xml, readxml

我有 XML 文件，我尝试读取到 Document 对象：

```
<MCSA_Configuration>
    <Variables>
        <python27_path> C:\Python27\python.exe </python27_path>
        <python32_path> C:\Python32\python.exe </python32_path>
        <xlrd> xlrd-ok </xlrd>
    </Variables>
</MCSA_Configuration> 
```

我尝试通过代码将其读入 Document 对象：

```
 import java.io.File;
    import java.text.DecimalFormat;
    import java.util.ArrayList;
    import javax.xml.parsers.DocumentBuilder;
    import javax.xml.parsers.DocumentBuilderFactory;
    import org.w3c.dom.Document;
    import org.w3c.dom.NamedNodeMap;
    import org.w3c.dom.Node;
    import org.w3c.dom.NodeList;

public static Document Get_XML_Document(String xml_file_path) {

        File file;
        Document xml_doc = null;
        // TODO code application logic here 
        try {
            file = new File(xml_file_path);
            if (file.exists()) {
                    DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
                    xml_doc = docBuilder.parse(file);
            } else {
                System.out.println("Error: XML File not found!");
            }

        } catch (Exception ex) {
            System.out.println(ex.getMessage());
        }
        return xml_doc;
    } 
```

我总是得到 xml_doc NULL 有人可以帮我解决问题吗？

我总是知道文件不存在，使用： Document doc = XMLReader.Get_XML_Document("C:\MCSA\MCSA_config.xml");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:23:40.443

而不是仅仅检查`if (file != null)`文件是否存在`if (file.exists())`。可能的问题是该路径中不存在文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:54:27.927

你的代码工作正常。

拿到文件后检查情况

```
if(xml_doc == null)
  System.out.println("Doc is null");
else 
  System.out.println("Doc is not  null"); 
```

你会得到

> 文档不为空

当您尝试打印文档时，它将给出输出

> [#文档：空]

您可以通过该文档对象执行操作。

# mysql - 谷歌地图标记集群显示相同的信息窗口

> ID：13932692
> 
> 赞同：1
> 
> 时间：2012-12-18T12:10:50.277
> 
> 标签：mysql, google-maps, marker, markerclusterer

我多年来一直坚持这一点。我创建了一个地图，它使用 php 从 mysql 数据库中提取数据。一切都很好，我正在为每个标记获取信息窗口。我添加了运行良好的聚类代码。现在它只在单击标记时显示相同的信息框。我已尝试在此站点上发布与我的问题相关的解决方案，但似乎找不到解决方案。任何帮助，将不胜感激

```
var customIcons = {
  BB: {
    icon: '/assets/img/bb-icon.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  SC: {
    icon: '/assets/img/sc-icon.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  BOTH: {
    icon: '/assets/img/both-icon.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
    var cluster = [];
  var map = new google.maps.Map(document.getElementById("maplocation"), {
    center: new google.maps.LatLng(<?php echo $coord; ?>),
    zoom: 9,
    mapTypeId: 'roadmap'
  });
  var infowindow = new google.maps.InfoWindow();

  // Change this depending on the name of your PHP file
  downloadUrl("/generate-coords.php?map=<?php echo $_GET['area']; ?>", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
 for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var thetitle = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var farmno = markers[i].getAttribute("farmno");
        var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
        var html = '<b>' + name + '</b> <br />' + address+ '<br /><a href="/fulldetails.php?farmno=' + farmno + '">More Details</a>';
        var icon = customIcons[type] || {};
        var marker = new google.maps.Marker({
           map: map,
           position: point,
           icon: icon.icon,
           shadow: icon.shadow,
           title:thetitle,
           content:html
          });
       google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent('<div style=height:80px;overflow:none>'+html+'</div>');
                        infowindow.open(map, this);
                    }
                })(marker, i));
             cluster.push(marker);
         }

        var markerClustererOptions = {   
           maxZoom: null,
           gridSize: 15 ,   
          title: 'Click to zoom in and see farms.'
         };  
    var mc = new MarkerClusterer(map,cluster,markerClustererOptions);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:23:26.837

试试这个

```
google.maps.event.addListener(marker, 'click', (function(marker, i, html) {
    return function() {
        infowindow.setContent('<div style=height:80px;overflow:none>'+html+'</div>');
        infowindow.open(map, marker);
})(marker, i, html)); 
```

# ruby-on-rails - Rails 表单错误

> ID：13932695
> 
> 赞同：0
> 
> 时间：2012-12-18T12:10:56.123
> 
> 标签：ruby-on-rails, select, hide, show

我有一个`component`模型`has_many :framework`。要将框架与我编写的表单中的组件相关联：

```
<div class="field">
  <%= f.label :frameworks %><br />
  <%= f.collection_select :frameworks, Framework.all, :id, :name, {}, {:multiple => true}  %>
</div> 
```

但现在这给了我：

```
Framework(#70243540172600) expected, got String(#70243531874180) 
```

还有一个问题：

如何使用按钮隐藏/显示此 div？因为列表可能很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:50:50.387

如果组件 has_many :frameworks，则不能使用 collection_select。

在这种情况下，形式为：

```
<%= f.collection_select :frameworks, Framework.all, :id, :name ... etc... {:multiple => true} %> 
```

将返回 params[:component][:frameworks] = ["3", "4", "55"]。但是 component.frameworks - 是一个只接受框架对象的关联，但是你传递字符串！

您必须使用手工制作的访问器，它将接受字符串化整数数组（框架的 ID）：

```
class Component < ActiveRecord::Base
  attr_accessible :framework_ids

  def framework_ids=(ids)
    ids.each do |framework_id|
      frameworks << Framework.find(framework_id)
    end
  end
end 
```

然后你的表单选择器必须看起来像：

```
<%= f.collection_select :framework_ids, Framework.all, :id, :name ... etc... %> 
```

按钮呢……你必须学习[JQuery UI](http://jqueryui.com)的东西。

# python - PyQT Qscintilla Progress 4gl

> ID：13932696
> 
> 赞同：3
> 
> 时间：2012-12-18T12:10:59.670
> 
> 标签：python, pyqt, progress-4gl, qscintilla

最近，我一直在通过在我的 python 应用程序中实现 QsciLexerCustom 来创建自己的 Progress 4GL 编辑器。但是在浏览 Qscintilla Source 时，我注意到他们已经在 QScintilla/lexers/LexProgress.cpp 中有一个进度 4gl 词法分析器，但是在阅读[http://www.riverbankcomputing.com/static/Docs/QScintilla2/annotated.html](http://www.riverbankcomputing.com/static/Docs/QScintilla2/annotated.html)时，他们没有指定任何QsciLexerProgress 类或任何访问此词法分析器的方法，我可以看到。

有谁知道如何做到这一点？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:52:17.573

QScintilla 显然是使用[Qt](http://en.wikipedia.org/wiki/Qt_%28framework%29) GUI 框架的 Scintilla 的一个端口。移植词法分析器可能需要一些工作，因此他们可能只是没有花时间为不流行的语言移植词法分析器。

换句话说，我认为您找到的 .cpp 文件只是 Scintilla 的残余文件，从未移植到 QScintilla 但仍在其代码库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:17:16.317

这些`QSciLexer*`类的名称具有误导性。他们根本不是真正的词法分析器。相反，它们为基于 Scintilla 的编辑器[SciTE使用的](http://www.scintilla.org/SciTE.html)*属性文件*提供了一个包装器。属性文件包含配置特定 Scintilla 词法分析器所需的所有设置（字体、颜色、关键字等）。

默认情况下，QScintilla 不会为`QsciLexer*`Scintilla 支持的每种语言提供一个类。它只提供最常用的语言，以及[邮件列表中](http://www.riverbankcomputing.com/mailman/listinfo/qscintilla)用户请求的任何语言。AFAIK，Qscintilla 的作者很高兴为`QsciLexer*`Scintilla 支持的任何语言添加一个类 - 唯一的要求是对应的词法分析器存在可用的 SciTE 属性文件。

不幸的是，当前的 SciTE 源不包含 Progress 4GL 词法分析器的属性文件！但是，完全有可能有人在某个时间创建了一个，所以稍微搜索一下很可能会产生一个。如果做不到这一点，你总是可以自己创建一个。

PS：QScintilla 不允许`QsciLexer`正确地对类进行子类化（一些关键的虚函数不是公开的），这真是令人烦恼。如果是这样，就可以为 Scintilla 支持的任何语言创建自定义包装类，而无需要求 Qscintilla 的作者添加一个。

# facebook-graph-api - 查询优化和 API 限制

> ID：13932700
> 
> 赞同：6
> 
> 时间：2012-12-18T12:11:03.727
> 
> 标签：facebook-graph-api, optimization, query-optimization, facebook-fql, throttling

我们正在跟踪一些客户的 Facebook 页面和帖子指标，我们有一些关于高 CPU 强度和过多的帖子/评论调用的问题 - 根据开发人员洞察控制台报告的内容（洞察 -> 开发人员 ->活动和错误）。文档对 Graph API 的限制和限制有些不清楚，我们只是想确保我们对可用的资源有正确的理解。

我们正在努力优化我们的软件和查询，以降低错误率和请求数量。关于这项工作，我们有几个问题：

1.  我们已更改为使用 FQL 查询而不是常规的 Graph API 请求来获取帖子评论，这使我们能够为每个请求获取多个帖子的评论。这导致请求数量显着减少。我们使用 page_id IN (PAGE_ID_1, PAGE_ID_2, ....) 的查询。与常规 Graph API 请求相比，这会增加 CPU 强度吗？

2.  我们还对我们的请求实施了限制，以确保我们随着时间的推移均匀地分配我们的请求，而不是大爆发。对于页面评论，我们确保在 10 分钟内请求的最大数量不超过 300。换句话说，我们将主页评论请求的数量限制为每秒 0.5 次或每分钟 30 次。这还高吗？

3.  一旦超过请求限制，我们假设这是访问令牌，而不是 APP ID？因此，如果我们的一个客户过度使用资源，我们的 APP 是否仍会继续代表我们拥有不同访问令牌的其他客户工作？

4.  在开发者控制台中，在我们的应用程序的 Insights -> Developer -> Activity & Errors 页面下，API Throttling 表在其上方有一个时间。例如 1 小时 14 分钟。这个时间表示什么，这个表多久更新一次，数字有多旧？

5.  我们收到少量响应代码为 500 的错误。这些错误通常是超出请求和/或 CPU 限制的结果吗？如果没有，是否有任何方法可以确定真正导致它们的原因，以及我们是否可以做些什么来解决它？

我们将不胜感激任何对我们假设的意见和确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:35:44.770

您的问题的一些答案：

*   Facebook 对图形 API 请求的限制是每 600 秒 600 个请求……但批处理请求被计为批处理中每个请求的一个请求……我认为 FQL 限制是相同的……
*   此限制适用于一个 IP 和一个访问令牌，如果您有多个令牌和/或 IP，您可以调整此限制
*   实际上我没有示例，但是当您打破速度限制时，错误消息类似于“请求过多”，而不是错误 500...不知道在您的情况下会导致这种情况

我不明白的一些问题： - 当您谈到“CPU 强度”时，您是指在您这边还是 FB 那边？在 FB 方面，我从未见过这样的限制，唯一的限制是 600 req / 600 sec ...

更多信息： [Facebook Graph API 速率限制和批量请求](https://stackoverflow.com/questions/8805316/facebook-graph-api-rate-limit-and-batch-requests) [Facebook 的 Graph API 调用限制是什么？](https://stackoverflow.com/questions/8713241/whats-the-facebooks-graph-api-call-limit)

# javascript - 如何使用 SVG (+JS) 绘制正弦波？

> ID：13932704
> 
> 赞同：22
> 
> 时间：2012-12-18T12:11:10.910
> 
> 标签：javascript, html, svg

在 SVG 中绘制正弦波的最简单解决方案是什么？我想正弦波应该用 JavaScript 在一个简单的循环中重复...... :)

这是 XY 坐标作为一个好的开始...... :)

[http://jsbin.com/adaxuy/1/edit](http://jsbin.com/adaxuy/1/edit)

```
<svg>
  <line x1="0" y1="250" x2="500" y2="250"
        style="stroke:black;stroke-width:1"/>
  <line x1="250" y1="0" x2="250" y2="500"
        style="stroke:black;stroke-width:1"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-18T14:46:37.990

直线近似的替代方法是贝塞尔近似。一个周期的第一季度的一个非常好的近似值是具有以下控制点的三次贝塞尔曲线：

```
 0   0
1/2 1/2
 1   1
π/2  1 
```

**编辑：** 使用以下控制点可以进行更精确的近似：

```
0                    0
0.512286623256592433 0.512286623256592433
1.002313685767898599 1
1.570796326794896619 1 
```

（见评论中 NominalAnimal 的解释）

[演示比较线元素（灰色）和“好”贝塞尔曲线（红色）和“更好”贝塞尔曲线（绿色）。](http://codepen.io/Sphinxxxx/pen/LpzNzb)

精确插值样条端点的斜率和曲率的近似值是

```
 0                0 
(6−(3/2π−3)²)/6  (6−(3/2π−3)²)/6
       1                1
      π/2               1 
```

（[见推导](http://mathb.in/1447)）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-18T13:13:06.317

`line`这是向 SVG 元素添加多个元素的概念证明：

```
var svg = document.getElementById('sine_wave').children[0];
var origin = { //origin of axes
    x: 100,
    y: 100
};
var amplitude = 10; // wave amplitude
var rarity = 1; // point spacing
var freq = 0.1; // angular frequency
var phase = 0; // phase angle

for (var i = -100; i < 1000; i++) {
    var line = document.createElementNS("http://www.w3.org/2000/svg", "line");

    line.setAttribute('x1', (i - 1) * rarity + origin.x);
    line.setAttribute('y1', Math.sin(freq*(i - 1 + phase)) * amplitude + origin.y);

    line.setAttribute('x2', i * rarity + origin.x);
    line.setAttribute('y2', Math.sin(freq*(i + phase)) * amplitude + origin.y);

    line.setAttribute('style', "stroke:black;stroke-width:1");

    svg.appendChild(line);
}
```

```
html, body, div{
    height:100%;
}
```

```
<div id="sine_wave">

  <svg width="1000" height="1000">
    <line x1="100" y1="0" x2="100" y2="200"
          style="stroke:black;stroke-width:1"/>
    <line x1="0" y1="100" x2="1000" y2="100"
          style="stroke:black;stroke-width:1"/>
  </svg>

</div>
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-18T13:02:51.673

以下将为您的 SVG 图形添加一个单周期正弦波：

```
const XMAX = 500;
const YMAX = 100;

// Create path instructions
const path = [];
for (let x = 0; x <= XMAX; x++) {
    const angle = (x / XMAX) * Math.PI * 2;  // angle = 0 -> 2π
    const y = Math.sin(angle) * (YMAX / 2) + (YMAX / 2);
    // M = move to, L = line to
    path.push((x == 0 ? 'M' : 'L') + x.toFixed(2) + ',' + y.toFixed(2));
}

// Create PATH element
const pathEl = document.createElementNS("http://www.w3.org/2000/svg", "path");
pathEl.setAttribute('d', path.join(' ') );
pathEl.style.stroke = 'blue';
pathEl.style.fill = 'none';

// Add it to svg element
document.querySelector('svg').appendChild(pathEl);
```

```
<svg width="500" height="100"/>
```

这使用由“lineto”（直线）命令组成的[PATH 元素。](http://www.w3.org/TR/SVG/paths.html)这是有效的，因为毫不奇怪，它包含许多 (500) 个小线段。您可以通过使用贝塞尔曲线绘制线段来简化路径以减少点，但这会使代码复杂化。你要求简单。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-27T04:02:56.060

如果它对任何人有用：这是一个单线 SVG，它使用三次贝塞尔近似近似接近正弦波的一半。

```
<svg width="100px" height="100px" viewBox="0 0 100 100">
    <path stroke="#000000" fill="none" d="M0,0 C36.42,0,63.58,100,100,100" />
</svg> 
```

我`36.42`通过最小化贝塞尔曲线和真实余弦曲线之间的平方和 (l2) 距离来拟合参数。[https://octave-online.net/bucket~AN33qHTHk7eARgoSe7xpYg](https://octave-online.net/bucket~AN33qHTHk7eARgoSe7xpYg)

我的回答部分基于[如何在 SVG 中用贝塞尔路径近似半余弦曲线？](https://stackoverflow.com/q/29022438/1407170)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T12:53:13.913

在 X 轴上循环，每次迭代都使用当前 X 值的正弦函数计算 Y 位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-30T03:21:41.563

为了在插图中使用，此近似值效果很好。

```
<path d="M0,10 q5,20,10,0 t 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10 0 10,0" stroke="black" fill="none"/> 
```

它结构紧凑，使用起来相对容易。

*   M0,10

    *   M 之后的第一个 10 将其向下移动 10（如果使用默认视图框，则进入视图）
    *   后面的零可用于向右或向左移动波。
    *   移动一小部分波长以显示相移
*   q5,20,10,0

    *   绘制前半波
    *   5 和 10 使半波 10 宽，因此全波的 20
        *   您可以将它们与 t 之后的所有 10 一起缩放
        *   您可以通过调整周期来说明 FM（见下文）
    *   20 使波的幅度为 10。（按口味缩放）
*   t 10 0

    *   重复前一个半波反转。
    *   每增加一个 10 0 10 0 产生一个额外的全波
    *   您也可以调制频率
        *   例如 10 0 10 0 7.5 0 5 0 5 0 5 0 7.5 0 10 0 10 0 10 0
        *   移动频率时，使用中间值，如 7.5
        *   中间值不会使波浪倾斜

我发现这对于说明数据通信中的调制很有用。为了说明 AM（甚至 QAM），只需使用新参数重复 q 命令。如果增加幅度，您可能需要调整 M 命令以将其移到视图中

要在 HTML5 中使用它，只需将其放入 svg 元素中

```
<h1>FM and QAM Examples</h1>
<svg>
  <path d=" 
M0,20
q 5 20 10 0 t 10 0 10 0 10 0 10 0 
7.5 0 5 0 5 0 5 0 5 0 5 0 5 0 7.5 0 
10 0 10 0 10 0 10 0 10 0 10 0 
10 0 10 0 10 0 10 0 10 0 10 0 

M0,60
q 5 20 10 0 t 10 0 10 0 10 0 10 0 
q 5 20 10 0 t 10 0 10 0 10 0 10 0 
q 5 40 10 0 t 10 0 10 0 10 0 10 0
q 5 -20 10 0 t 10 0 10 0 10 0 10 0 10 

" stroke="black" fill="none"/>
</svg> 
```

[![在此处输入图像描述](../Images/eeb95290ac063dfafa48b53e66743587.png)](https://i.stack.imgur.com/iRS5B.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-07T05:37:57.067

这是一个 CDMA 插图，其中我使用三次样条来说明 CDMA 概念。首先定义这些函数：

```
<script>
function go(x,y) {return(`M ${x},${y}`)}
function to(y) {return(`c 5 0 5 ${y} 10 ${y}`)}
function dn(y=10) {return to(y)}
function up(y=10) {return to(-y)}
function path(d,color='black') {return `<path d="${d}" stroke=${color} fill="none"/>`}
function svg(t) {return `<svg>${t}</svg>`}
function bits(n) {
  let s='', n0=(n>>1)
  for (m=0x80;m;m>>=1) s+= up(10* (!(m&n0)-!(m&n))  )
  return s;
}
function plot(a) {
  let s='', y0=0
  for (let y of a) {
    s += up(y-y0); y0=y
  }
  return s
}
function add(a) {
  let s=''
  if typeof y0 == 'undefined' var y0=0
  for (m=0x80;m;m>>=1) {
    let y=0; for (let e of a) y+= 5-10*!(e&m)
    s += up(y-y0); y0=y   
  }
  return s
}
</script> 
```

然后你可以大致说明波浪是这样的：

```
<script>
  document.write(svg(path(go(0,25)+(up()+dn()).repeat(10))))
</script> 
```

[![用于说明目的的简单余弦波](../Images/9ebc251d30dcb77084d4b6b2c7452e94.png)](https://i.stack.imgur.com/rqGED.png)

这是使用此技术的 CDMA 示例

```
<h1>CDMA Example</h1>
<script>
a=0b00010010 
b=0b00010101 
document.write(svg(
  path(go(0,40)+bits(a)+bits(~a)+bits(a)+bits(~a)+bits(a),'red')+
  path(go(0,80)+bits(b)+bits(b)+bits(~b)+bits(~b)+bits(~b),'orange')+
  path(go(0,100+add([a,b])+add([~a,b])+add([a,~b])+add([~a,~b])+add([a,b])+add([~a,~b])))
))
</script> 
```

[![使用 CDMA 风格技术复用两个信号（简化）](../Images/db26f59c7cb7087cfd2114361c2cc0e6.png)](https://i.stack.imgur.com/p1NC8.png)

注意：实际的 CDMA 信号不会是位对齐的，甚至不会是芯片对齐的

# android - Android中HTTP服务器的非阻塞响应

> ID：13932707
> 
> 赞同：0
> 
> 时间：2012-12-18T12:11:24.813
> 
> 标签：android, http, sockets, nio, httpserver

我已经使用套接字在 Android 中实现了 HTTP 服务器（处理 GET.POST 和 DELETE 请求）。为了使服务器不阻塞，我看到有

```
java.nio 
```

包[http://developer.android.com/reference/java/nio/package-summary.html](http://developer.android.com/reference/java/nio/package-summary.html)。但是，选择键是接受、读取或写入。是否有任何示例链接或教程说明我将如何使用 nio 为提到的每种方法实现非阻塞服务器？

注意：不能使用 Http Core，因为 Android 不支持 org.apache.http.nio.*

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:16:04.380

[http://www.integratingstuff.com/2011/10/24/adding-a-webserver-to-an-android-app/](http://www.integratingstuff.com/2011/10/24/adding-a-webserver-to-an-android-app/)给出了一个 Android Web 服务器的例子和链接[http://hc.apache.org/httpcomponents -core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java)解释多线程服务器。由于客户端的数量只有 10 个，所以我使用了线程。

# r - 如何控制条之间的空间？

> ID：13932708
> 
> 赞同：12
> 
> 时间：2012-12-18T12:11:25.573
> 
> 标签：r, bar-chart

我正在使用以下代码绘制条形图：

```
heights1=c(5,5,4.5,4)
barplot(heights1, main="Language ", names.arg=c("Hindi R/W", "Speak" , "English 
R/W","Speak"), ylab=" level ", xlab="Language starting with mostly used",  
cex.names=0.8, col=c("darkblue","red")) 
```

输出如下：

![在此处输入图像描述](../Images/df832d6021f3cee3d20c44603db9c2e5.png)

但我想要的是“Hindi R/w”和“Speak”应该**没有任何间隙**地结合起来，然后出现一个空格，然后“English R/w”和“Speak”应该结合起来。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T12:16:02.977

`space=`您应该为您的函数添加参数`barplot()`，其中数字对应于每个条形之前的空格。

```
heights1=c(5,5,4.5,4)    
barplot(heights1, main="Language ", names.arg=c("Hindi R/W", "Speak" , "English 
  R/W","Speak"), ylab=" level ", xlab="Language starting with mostly used",  
  cex.names=0.8, col=c("darkblue","red"),space=c(0.2,0,0.2,0)) 
```

![在此处输入图像描述](../Images/4ebb3d048905119055bcbde4730811b7.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-18T18:44:14.563

如果您的数据格式正确，您的生活会轻松得多。该`barplot`函数接受 a`vector`或的输入`matrix`。当输入为 a`matrix`时，R 可以使用`dimnames`为您自动标记事物。

尝试这个：

```
heights1 = c(5, 5, 4.5, 4)
barplot(t(matrix(heights1, ncol=2, byrow=TRUE, 
                 dimnames=list(c("Hindi", "English"), 
                               c("Read/Write", "Speak")))), 
        main="Language ", ylab="Level", 
        xlab="Language starting with mostly used", 
        col=c("darkblue", "red"), 
        beside=TRUE, ylim = c(0, 6), 
        legend.text = TRUE,
        args.legend = list(x = "topright")) 
```

![在此处输入图像描述](../Images/b9b464762337d503eaee586666edd07a.png)

如果两组之间的间距太大，那么@Didzis 的建议在这里也很合适。添加`space = c(0, .2)`到您的`barplot`命令中，记住文档中的详细信息：

> If`height`是一个矩阵并且`beside`是`TRUE`,`space`可以由两个数字指定，其中第一个是同一组中的条之间的空间，第二个是组之间的空间。如果没有明确给出，则默认为`c(0,1)`如果 height 是矩阵并且旁边是`TRUE`，`0.2`否则默认为。

# javascript - 每次弹出窗口被阻止时

> ID：13932709
> 
> 赞同：0
> 
> 时间：2012-12-18T12:11:29.303
> 
> 标签：javascript, html

在我的应用程序中，我们使用的是弹出窗口 Ex。窗口.打开（）；当我尝试登录时，每次弹出窗口在 IE 7、IE 8 和 IE 9 中都被阻止。

如何使用 JavaScript 代码禁用它。

提前致谢..，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:44:06.807

弹出窗口阻止程序应该阻止附加到`onload`和`onunload`（以及其他与请求弹出窗口的人没有直接关联的事件）等事件的弹出窗口出现，但不应该阻止那些附加到`onclick`链接上的事件（以及其他可以被认为是指该人已提出要求）。

并非所有浏览器都足够聪明，可以意识到如果`onclick`链接上的事件调用了一个函数，并且该函数的目的是打开一个实际上已请求弹出窗口的弹出窗口。他们在函数中看到弹出代码，但不够聪明，无法看到该代码是由于使用浏览器的人的操作而被调用的。以这种方式对我们的弹出窗口进行编码会导致弹出窗口被阻止，尽管它被请求了，这是一种让某人生气的肯定方法，尽管问题实际上是他们的浏览器，但您的网站无法正常工作。

对于许多愚蠢的浏览器来说，解决这个问题的方法是将弹出代码放入`onclick`自身而不是调用函数。

例如，

```
<a href="some_page.html" onclick="window.open('some_other_page.html')">Open Popup</a> 
```

以下是一些可能对您有所帮助的以前的帖子，

[设置 JQuery event.preventDefault() 时绕过 window.open 上的弹出窗口阻止程序](https://stackoverflow.com/questions/9514698/bypass-popup-blocker-on-window-open-when-jquery-event-preventdefault-is-set)

[阻止与非阻止弹出窗口](https://stackoverflow.com/questions/1816127/blocked-vs-non-blocked-pop-up-window)

# mobiscroll - Mobiscroll 在 Chrome 中失败，在 FF 和 IE 中运行良好

> ID：13932722
> 
> 赞同：0
> 
> 时间：2012-12-18T12:11:56.593
> 
> 标签：mobiscroll

我将 Mobiscroll 称为如下：

```
$(joInputField).scroller({ 
    width:      60,  
    wheels:         wheels,     // wheels variable has been defined above
    headerText:     false,   // false for production!
    onSelect:       function(){  // event fired by BOTH set and cancel
        var stDate = '';
        var rawDate = $(joInputField).scroller('getValue');  
        // a bunch more code 
```

Mobiscroll 的这种设置在 Firefox 17 和 IE9 中都可以正常工作。但是，它在 Chrome 23 中完全失败了。在 Chrome 中，当我单击输入字段以弹出 Mobiscroller 时，我什至会刷新页面。

点击事件按应有的方式附加，所以我认为这不是我的 HTML 页面中让 Chrome 感到不安的东西。此外，我在控制台中没有收到任何错误。

我刚刚将 Mobiscroll 从 1.5 升级到 2.3.1 这没有任何区别。在 Chrome 中仍然失败，在 FF 和 IE 中就像一个魅力。

有人有预感吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:43:54.670

好吧，终于有时间想办法了。

这是我的输入元素的配置方式：

```
<input id="mobiScroll" class="mobiscroll scroller" type="image" readonly="" value="5 07 05 19 5 5" name="mobiDick" src="<?php echo $options['assetsBase'] ?>/img/calendar-icon-40px2.png"> 
```

事实证明，在这种配置中，图像覆盖在输入元素上，Chrome 不会触发焦点事件。Mobiscroll 依赖于那个焦点事件。

最简单的解决方案（即最耗时）是这种变通方法，即单击输入元素会在所述元素上引发焦点事件，进而启动 Mobiscroll。

```
 // work around a Chrome quirk where focus event is not raised on input element:
joInputField.click(function() {
        joInputField.trigger('focus');                      
}); 
```

希望这可以帮助某人，在路上的某个地方......

# android - 在 Android 中获取 WiFi 信号强度

> ID：13932724
> 
> 赞同：54
> 
> 时间：2012-12-18T12:12:02.833
> 
> 标签：android, android-wifi

我可以使用以下代码获得以 dBm 为单位的 WiFi 信号电平。

```
for (ScanResult result : wifiScanResultList) {
    int signalLevel = result.level;
} 
```

它给出负值。当我们看到默认的系统 WiFi 设置并单击已连接的 WiFi 网络时，它会给出“好”或“坏”作为信号强度。我们可以将这些负值过滤为“好”信号强度或“坏”信号强度的范围是多少？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-08-30T16:58:04.867

这是一个旧帖子，但这可能会对某人有所帮助......

```
WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
int numberOfLevels = 5;
WifiInfo wifiInfo = wifiManager.getConnectionInfo();
int level = WifiManager.calculateSignalLevel(wifiInfo.getRssi(), numberOfLevels); 
```

文档：[public static int calculateSignalLevel (int rssi, int numLevels)](http://developer.android.com/reference/android/net/wifi/WifiManager.html#calculateSignalLevel%28int,%20int%29)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-11-13T09:28:21.163

请检查接收到的无线信号功率的 dBm 值是如何表示的。

优秀 >-50 dBm

良好 -50 至 -60 dBm

一般 -60 至 -70 dBm

弱 < -70 dBm

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-06-17T20:21:33.260

```
WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);

// Level of a Scan Result
List<ScanResult> wifiList = wifiManager.getScanResults();
for (ScanResult scanResult : wifiList) {
  int level = WifiManager.calculateSignalLevel(scanResult.level, 5);
  System.out.println("Level is " + level + " out of 5");
}

// Level of current connection
int rssi = wifiManager.getConnectionInfo().getRssi();
int level = WifiManager.calculateSignalLevel(rssi, 5);
System.out.println("Level is " + level + " out of 5"); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-18T12:59:49.987

对，就是这样。这就是接收信号功率的 dBm 值的表示方式。[以下是](http://en.wikipedia.org/wiki/DBm#Unit_conversions)Wikipedia 上的一些详细信息。

-100 表示最低值（完全没有信号），0 表示非常好的信号（100%）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-07-14T19:54:24.710

你已经有了等级，所以我将告诉你如何将 wifi 分类为高、中或低强度。以下是一段代码

```
 int level = result.level;

    if (level >= -50) {
        //Best signal
    } else if (level >= -70) {
        //Good signal         
    } else if (level >= -80) {
        //Low signal
    } else if (level >= -100) {
       //Very weak signal
    } else {
       //Too low signal
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-17T18:46:17.763

以下是三星 A7 使用的 wifi 信号电平：

```
return when (rssi) {
    in -63..-1 -> 4
    in -73..-64 -> 3
    in -83..-74 -> 2
    in -93..-84 -> 1
    else -> 0
} 
```

我认为其他品牌应该非常相似。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-08T21:51:23.520

[WifiManager.java](https://android.googlesource.com/platform/frameworks/base/+/79a3981/wifi/java/android/net/wifi/WifiManager.java#339)中的常量略有不同，因此我将在此处添加它们：

`MIN_RSSI`: 任何小于或等于**-100**的都将显示**0 条**。

`MAX_RSSI`: 任何大于或等于**-55**的都将显示**最大条**。

# java - 使用 javax.net.ssl.SSLContext 时禁用弱 ssl 密码

> ID：13932726
> 
> 赞同：1
> 
> 时间：2012-12-18T12:12:24.070
> 
> 标签：java, ssl, encryption

我使用 javax.net.ssl.SSLContext 类实现安全连接，代码：

```
 ...
        SSLContext sslcontext = SSLContext.getInstance("TLS");
        sslcontext.init(null, trustManager, null);
        SSLSocketFactory sf = new SSLSocketFactory(sslcontext);
        ... 
```

我想禁用弱 ssl 密码。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:27:01.413

Have you looked at the [JavaDoc for SSLSocketFactory](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocketFactory.html#getSupportedCipherSuites%28%29)? I paraphrase

> ...Normally, only a subset of these will actually be enabled by default, since this list may include cipher suites which do not meet quality of service requirements...

In other words, you probably shouldn't worry, but if you do, you can explicitly supply your own implementation/extension of the default impl of `SSLSocketFactory` and override said method, or simply set the cipher suites you want enabled on your `SSLSocket`.

Cheers,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:23:13.620

他们已经被禁用。如果要禁用更多密码套件，请使用`SSLSocket.setEnabledCipherSuites()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-07T15:29:08.497

您可以使用[3rd 方 SSLContext 构建器](https://github.com/soulwing/ssl-context-tools)，它允许您为密码指定白名单和黑名单。

# javascript - Sonar 可以从我的 git 存储库中提取代码并定期分析吗？

> ID：13932727
> 
> 赞同：4
> 
> 时间：2012-12-18T12:12:23.807
> 
> 标签：javascript, code-analysis, sonarqube, static-code-analysis, sonar-runner

我的源存储库托管在 GitHub 中。我现在希望我的 Sonar 实例（部署在 Amazon EC2 上）定期从 git 存储库中提取以分析代码库。该项目是一个简单的 JavaScript 项目，我不希望 ANT、Maven 或 Jenkins 参与其中，而只希望 Sonar 定期拉取代码。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:00:02.063

Sonar 没有内置的 cron，也没有任何连接到 SCM 工具来检索源代码的连接器。因此，检索源和触发分析超出了它的范围：这是 CI 服务器（Jenkins / Hudson / Team City / Bamboo / ...）等其他工具的职责。

# php - 如何将变量从 php 传递给 jquery ajax 作为其 url 参数？

> ID：13932731
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:12:31.057
> 
> 标签：php, javascript, jquery, ajax

我是 JavaScript 领域的新手，所以我很困惑。首先，当我单击一些文本时，我试图加载数据库表数据，其中我提到`onclick`了关闭一些文本的标签内的事件。每个文本也都从数据库中检索。这意味着他们为他们分配了 id（一些文本）。
问题是如何将特定行的 id 传递给 Jquery ajax 显示它可以与 ajax url 一起传递给另一个 php 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:14:36.530

首先，在您寻求答案之前，请向我们展示您的一些工作示例。你做了什么来尝试解决这个问题。

您可以简单地在 javascript 中输出任何 php 数据：

```
<script type="text/javascript">
    var a = "<?php echo $my_var; ?>";
</script> 
```

基于此，您可以尝试在 AJAX 调用中将您的 id 输出到 URL 的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:21:40.223

将数据传递给 javscript 的最简单方法是创建一个带有隐藏输入的隐藏表单：

```
<form id="jsData">
    <?php foreach($data as $key=>$value): ?>
        <input type="hidden" id="<?= htmlspecialchars($key, ENT_QUOTES) ?>" value="<?= htmlspecialchars($value) ?>">
    <?php endforeach; ?>
</form> 
```

您使用 $('#keyxxx').val(); 获取数据

您还可以使用其他隐藏的 HTML 元素将数据传递给 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:22:07.580

现在我不知道您的代码中的数据流。我用的是：

```
<?php 
 $phpvar="yourvalue";
 echo '<script>var i="'.$phpvar.'";</script>';
?> 
```

看看它是否对你的情况有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:19:22.243

JavaScript 在客户端运行，php 在服务器上运行。您不能直接在 php 上使用 js 变量。但是你有一些资源可以做到这一点。尝试使用可以将信息从服务器传输到客户端的 POST 方法。jQuery 中的一个例子：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# google-analytics - 谷歌分析漏斗的步骤数含义

> ID：13932737
> 
> 赞同：1
> 
> 时间：2012-12-18T12:12:42.637
> 
> 标签：google-analytics

你们中的任何人都可以帮助我处理这个 google-analytics 漏斗吗？

漏斗的步骤如下：

我的域的结构非常简单：

```
domain.com/brands/brand_name.html
domain.com/brands/brand_name/product_name.html
domain.com/style/style_name/product.html 
```

第 1 步 / 第 2 步 /marcas/nike.html 第 3 步 /checkout/cart

52 位用户进入第 1 步。

为什么 47+1+1+1+1=51 而报告说是 52？如果我将 / 作为漏斗的一个步骤，为什么会包含 /new-balance-574vn.html 之类的页面？

39 名用户在第 1 步下车。

为什么 18+4+3+2+2=29 和报告注释 39？39-29=10 个用户去哪儿了？

6 个用户进入第 2 步。

为什么有 6 个用户进入第 2 步（/marcas/nike.html） 这 6 个用户是否从注明的页面转到 /marcas/nike.html？

图片在这里：

```
<a href="http://tinypic.com/r/2iizg41/6">Funnel view</a> 
```

你能帮忙吗？

我真的很感谢你的帮助

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:06:25.440

左侧和右侧的框是前 5 个 url 及其各自的进入/退出路径。理论上，还有第 6 个没有列出（只有前 5 个）。

39 人在第 1 步“退出”漏斗，没有转到第 2 步。您没有在目标漏斗中选中“必填步骤”；这是让其他人在第 2 步“输入”。

第 1 步：52
退出 1：-39
输入 2：+6
第 2 步总计：19

# networking - 什么是主机名？

> ID：13932739
> 
> 赞同：-3
> 
> 时间：2012-12-18T12:12:58.787
> 
> 标签：networking

我一直在读一本关于网络编程的书，但我对一些术语感到困惑， **hostname**，**fqdn**和**canonical**。我对 fqdn 有所了解，但它们之间有什么区别？我真的不明白什么是主机名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:06:46.117

主机名只不过是一个标签名称，当它与网络连接时分配给设备。例如，在 Internet 中，将域名的主机名分配给本地计算机。en.wikipedia.org 是主机名的示例（en 是主机名），（wikipedia.org）是域名。

# java - 配置 Jetty 集群以共享 Web 会话

> ID：13932740
> 
> 赞同：6
> 
> 时间：2012-12-18T12:12:59.783
> 
> 标签：java, jetty

我是 Jetty 的新手。我正在尝试设置一个集群，其中包括 2 个使用[HAProxy](http://haproxy.1wt.eu/)作为负载均衡器的[Jetty](http://jetty.codehaus.org/jetty/)服务器。但是，两个 Jetty 服务器分开工作，没有共享会话。

我找到了这个[文档](http://docs.codehaus.org/display/JETTY/Jetty+Clustering+with+WADI)，它指示使用 WABI。但似乎该文档已被弃用，因为它使用了 Jetty 6。

我正在使用 jetty-distribution-8.1.8。我该如何配置？

感谢你的关心。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:12:52.133

*   数据库 - [http://wiki.eclipse.org/Jetty/Feature/Session_Clustering_Using_a_Database](http://wiki.eclipse.org/Jetty/Feature/Session_Clustering_Using_a_Database)
*   mongodb - [http://wiki.eclipse.org/Jetty/Tutorial/MongoDB_Session_Clustering](http://wiki.eclipse.org/Jetty/Tutorial/MongoDB_Session_Clustering)

还有其他一些基于 nosql 的，在 github 上有一个 memcached。我的一般建议是最初采用数据库方法，一旦您有经验并了解其他人不符合要求时的细微差别。

# asp.net-mvc - HttpModule 触发多次

> ID：13932742
> 
> 赞同：0
> 
> 时间：2012-12-18T12:13:08.690
> 
> 标签：asp.net-mvc

我有带有 HttpModule 的 ASP.NET MVC 4。我知道模块的 Init 方法可能会被调用多次，每个 HttpApplication 对象一次，但我希望实际的 BeginRequest 事件只为每个传入的 Web 请求触发一次。这不是正在发生的事情。

我注意到 BeginRequest 始终为我发送到服务器的简单 POST 触发两次。我确定我只发送一个请求——没有图像。

为什么要多次调用 BeginRequest 以对服务器进行简单的 POST？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:19:28.310

每次请求都会触发它，它可能是图像、脚本、处理程序、页面等等。

如果您调试并踩它，您可以看到哪些文件调用它。你也可以把这条线放在里面，看看什么叫它活。

```
Debug.Write("call from: " + HttpContext.Current.Request.Path); 
```

# asp.net - 我想将 .bak 格式的 SQL Server 数据库连接到我创建的 ASP.net Web 应用程序

> ID：13932743
> 
> 赞同：1
> 
> 时间：2012-12-18T12:13:11.770
> 
> 标签：asp.net, .net, sql-server-2005, sql-server-2012

我在另一台计算机上创建了一个带有 SQL Server 2005 数据库的 ASP.Net Web 应用程序。

我想把它转移到另一台电脑上。因此，我复制了 ASP.Net 项目以及 SQL 数据库的`.bak`格式。我需要配置应用程序以连接到数据库，并且需要帮助以获取正确的连接字符串。

PS：创建的数据库是SQL Server 2005，我需要部署在SQL Server 2012上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:15:51.743

bak 文件是 Sql Server 备份文件。您需要将其还原到 Sql Server 2012 并从那里开始。

在 Sql Server 2012 中恢复数据库文件-> [http://msdn.microsoft.com/en-us/library/ms177429.aspx](http://msdn.microsoft.com/en-us/library/ms177429.aspx)

以及将您的应用程序连接到它的连接字符串 - > [http://connectionstrings.com/sql-server-2012](http://connectionstrings.com/sql-server-2012)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:30:44.553

“tucaz”的链接是很好的例子。你也可以按照这些步骤来获得一个想法。

1.  在新 PC 上的 SQL Server 2012 上创建新数据库

2.  右键单击新创建的数据库并找到还原数据库选项。提供恢复所需的 .bak 文件

3.  确保在还原数据库文件窗口中选择“覆盖现有数据库（WITH REPLACE）”选项

4.  恢复备份后，在应用程序配置文件中使用以下格式的连接字符串。

    ```
    <add name="connectionstring" 
         connectionString="Data Source=ServerName;Initial catalog=DBName;user id=UserName;password=password;Language=British;" /> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:16:30.473

您必须在新的 sql server 2012 上恢复数据库，然后您可以创建一个新的连接字符串。如果名称保持不变，则只需更改连接字符串中的服务器名称。

# facebook - 无法在developers.facebook.com 上注册我的网站

> ID：13932744
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:13:20.000
> 
> 标签：facebook, facebook-graph-api

我想使用`Facebook graph API`. 我想做的是，如果我有一个人的电子邮件地址，我想看看他是否有一个带有该 ID 的 Facebook 帐户。所以我用谷歌搜索了一下，发现我可以使用它。

```
graph.facebook.com\search?q=abc@xyz.com&type=user 
```

我必须提供的只是电子邮件 ID（在本例中是`abc@xyz.com`），因此我将从 Facebook 数据库中获取用户 ID 的一些输出，并且我可能会查看他的个人资料。问题是我不知道如何使用这个 URL 开始工作。我在[https://developers.facebook.com/apps创建了一个应用程序](https://developers.facebook.com/apps)

并获得了我的**App ID/API Key**和**App Secret**，但我认为我需要注册一个 URL，以便我可以访问 Facebook 数据库。但我找不到在哪里以及如何。我没有找到任何好的文档来指导我。谁能仁慈地让我知道该怎么做？
PS我使用此代码检查一切是否正常：

```
<?php
require_once("src/facebook.php");

$config = array();
$config[‘appId’] = 'api key';
$config[‘secret’] = 'secret';
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config); 
$user = $facebook->getUser();
echo "user = ".$user;
?> 
```

它总是返回`user = 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:12:58.733

`getUser`如果没有授权，将始终返回 0，这就是函数的重点；返回应用程序的授权用户。

如果您正在寻找不需要有效用户的 Graph API 调用，那么您不需要使用该函数。当不存在用户访问令牌时，PHP SDK 将使用应用程序令牌进行调用。

[https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L407](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L407)

# android - 以编程方式使 Google Drive 文档离线可用

> ID：13932745
> 
> 赞同：0
> 
> 时间：2012-12-18T12:13:22.850
> 
> 标签：android, google-docs, google-docs-api, google-drive-api

在 Google Drive 应用程序中，我可以手动“固定”某些我想离线使用的文档。

我正在谈论的功能是：

打开驱动器应用>我的驱动器>点击并按住所需的文档>“离线可用”

下载后，即可在 Drive 应用程序的离线文件夹中使用它。

如果我知道文档的 ID，我是否可以通过编程方式进行“固定”？

如果有怎么办？如果没有，为什么不，我什么时候可以？

我不一定要一步一步地寻找如何去做（但我不会拒绝它），只是朝着正确的方向轻推或指针，到目前为止我还没有发现任何有用的东西信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:25:19.037

我对此做了一些测试。在我的 Android 平板电脑上，我将存储在我的 Google 驱动器上的 PDF 文件标记为“离线可用”。然后我确保它已完成下载并与平板电脑上的 Google Drive 重新同步。然后转到我的 Android 手机（连接到同一个 Google 帐户）。我执行了同步并检查了脱机文件夹。

即使我在平板电脑上将其标记为 PDF 文件，也无法在手机上离线使用。因此可以安全地假设“离线”标志/属性是特定于设备的，而不是存储在谷歌云中的东西。

这意味着为了以编程方式将文件标记为脱机可用，您需要从每个 Android 设备本身执行此操作，这不是您可以通过 Web 服务执行的操作。我不是 Android 专家，但您可能会查看意图以查看是否有任何选项。

# java - 如何在 ServletContextListener 中出现异常时中止 Tomcat 启动？

> ID：13932746
> 
> 赞同：11
> 
> 时间：2012-12-18T12:13:23.597
> 
> 标签：java, tomcat, servlets

我有一个类实现`ServletContextListener`在启动时加载一些资源。

这些资源对应用程序至关重要，当我的逻辑中发生一些不良事件时，我希望整个启动失败。

我可以从`ServletContextListener.contextInitialized()`方法内部执行任何命令来停止和失败整个 Tomcat 启动吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T12:18:43.460

尝试指定：

```
-Dorg.apache.catalina.startup.EXIT_ON_INIT_FAILURE=true 
```

在您的`java`运行时选项中，引用[官方文档](http://tomcat.apache.org/tomcat-7.0-doc/config/systemprops.html)：

> 如果为 true，如果在服务器初始化阶段发生异常，服务器将退出。
> 
> 如果未指定，将使用默认值 false。

更新：

如果你想通过代码做到这一点，会`System.exit()`工作吗？

```
public class FailFastListener implements ServletContextListener {

    private static final Logger log = LoggerFactory.getLogger(FailFastListener.class);

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        try {
            //initialization
        } catch(Exception e) {
            log.error("Sooo bad, shutting down", e);
            System.exit(1);
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {
    }
} 
```

您可以使用[装饰器](/questions/tagged/decorator "显示标记为“装饰器”的问题")模式来包装现有的侦听器，而不会弄乱它们。不知道Tomcat会如何反应你......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-11T20:50:48.160

如果您想停止 Tomcat，因为您的 webapp 部署失败，我假设您没有将其他应用程序部署到 tomcat。在这种情况下，为什么不将此应用程序构建为具有嵌入式 Tomcat/Jetty 的独立 Web 应用程序？这样，只要你的 webapp 没有正常启动，嵌入式服务器也会关闭。

对我来说，看起来你专注于`ServletContextListener`解决一个不是`ServletContextListener`本意的问题。

不要使用`System.exit()`，因为它会杀死可能运行其他已部署应用程序的服务器。如果没关系，因为您知道永远不会有其他应用程序（并且您不想这样做），那么请制作一个独立的 webapp。这种不良做法在 CWE 中被列为潜在弱点：[CWE-382](http://cwe.mitre.org/data/definitions/382.html "CWE-382")

只是一个提示：spring boot 有助于构建带有嵌入式服务器的独立 webapp。请参阅本指南：[https ://spring.io/guides/gs/spring-boot/](https://spring.io/guides/gs/spring-boot/)

很好的文章解释了为什么这可能是您正在寻找的：[http ://www.beyondjava.net/blog/application-servers-sort-of-dead/](http://www.beyondjava.net/blog/application-servers-sort-of-dead/)

# python - python线程应用程序错误到许多参数

> ID：13932747
> 
> 赞同：8
> 
> 时间：2012-12-18T12:13:28.997
> 
> 标签：python, multithreading, python-2.7

这个 python 源代码有什么问题？

```
import threading
import subprocess as sub

def ben(fil):
    pr = sub.Popen(fil,stdout=sub.PIPE,stderr=sub.PIPE)
    output, errors = pr.communicate()
    print output

theapp = '''blender
            blender-softwaregl'''.split()
print theapp

for u in theapp:
    print u
    tr = threading.Thread(target=ben, args=(u))
    tr.daemon = True
    tr.start() 
```

错误是：

```
['blender', 'blender-softwaregl']
blender
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/local/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
TypeError: ben() takes exactly 1 argument (7 given)

blender-softwaregl
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "/usr/local/lib/python2.7/threading.py", line 504, in run
    self.__target(*self.__args, **self.__kwargs)
TypeError: ben() takes exactly 1 argument (18 given) 
```

这是我的问题。这是什么错误？

```
 TypeError: ben() takes exactly 1 argument (18 given) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T21:21:53.750

`args`参数`threading.Thread`需要一个序列，但您提供的是一个字符串。这导致它将字符串的每个字母解释为单独的参数，从而导致目标函数的参数过多。

您非常接近拥有正确的代码。您只需要通过在括号中添加尾随逗号来修复您的元组语法：

```
tr = threading.Thread(target=ben, args=(u,)) # comma makes args into a 1-tuple 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:32:51.540

出于某种原因，您似乎将字符列表作为参数而不是字符串传递。

我明白了，因为搅拌机有 7 个字母，而您通过了类型错误 7 个参数。Blender-softwaregl 有 18 个字母，所以你有 18 个参数的类型错误，而不是一个。

如果您想将多个参数传递给子进程。Popen，尝试使用变量名填充和值列表传递字典。

```
def ben(fil):
    pr = sub.Popen(fil,stdout=sub.PIPE,stderr=sub.PIPE)
    output, errors = pr.communicate()
    print output

d = {'fil':['command1', 'command2']}

ben(**d) 
```

**还有一件事。如果要打开子进程，为什么要打开线程？？？**子进程是一个单独的进程，您不需要线程部分。我猜你的代码在没有线程部分的情况下也能工作。

# php - 插入语句在 foreach 语句中不起作用

> ID：13932748
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:13:30.650
> 
> 标签：php

我有一个爬虫，它爬取以 www.bbc.co.uk/news 开头的网站。它抓取所有以[http://www.bbc.co.uk/news](http://www.bbc.co.uk/news)开头的链接，找到它们的描述、链接和标题，并将它们插入数据库。

由于某种原因，它似乎没有插入。

有任何想法吗？

PS 完全没有输出，网页完全空白

```
 foreach ($links as $link) {
    $output = array(
"title"       => Titles($link), //dont know what Titles is, variable or string?
"description" => getMetas($link),
"keywords" => getKeywords($link), 
"link"        => $link                 
 );
if (empty($output["description"])) {
$output["description"] = getWord($link);
 }

 if (substr($ouput, 0, 26) == "http://www.bbc.co.uk/news/") {

 $data = '"' . implode('" , "', $output) . '"';
 $success = mysql_query( "INSERT INTO news_story (`title`, `description` , `keywords`, `link`)
 VALUES (" . $data . ")") or zerror_reporting();
 if ($sucess) {
echo "YEAH!";
   }

   if (!$sucess) {
echo "NO!!";
    }
    print_r($data);
     }} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:33:25.283

问题在这里：

```
 if (substr($ouput, 0, 26) == "http://www.bbc.co.uk/news/") {

   $data = '"' . implode('" , "', $output) . '"';
  $success = mysql_query( "INSERT INTO news_story (`title`, `description` , `keywords`, `link`)
  VALUES (" . $data . ")") or zerror_reporting();
 if ($sucess) {
echo "YEAH!";
  } 
```

你的`$ouput`变量在哪里......我想你想写......`$output`但它也没有执行，因为`$output`变量是一个数组而不是一个`string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:31:10.110

Sanitization your value before inserting in to database

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:15:46.987

@Mrinmoy 的解决方案是正确的，但代码中似乎存在更多问题，因为您的代码从未进一步触及这一点。

首先设置显示错误：

```
ini_set('error_reporting',E_ALL);
ini_set('display_errors','on');
foreach ($links as $link) { 
```

PHP 讲了很多，如果你能听的话。我个人使用 E_ALL|E_STRICT ，但对于今天来说这有点太多了。:) 然后清理您的数据，否则您很少会成功插入记录。你的数据会有很多句子：

```
 $output = array(
"title"       => mysql_real_escape_string(Titles($link)), //dont know what Titles is, variable or string?
"description" => mysql_real_escape_string(getMetas($link)),
"keywords" => mysql_real_escape_string(getKeywords($link)), 
"link"        => mysql_real_escape_string($link)                 
 );
if (empty($output["description"])) {
$output["description"] = mysql_real_escape_string(getWord($link));
 } 
```

然后更正变量拼写错误并使用输出数组的链接索引：

```
if (substr($output['link'], 0, 26) == "http://www.bbc.co.uk/news/") { 
```

最后，如果你仍然没有得到数据，你肯定会知道更多来自己修复它。并`print_r($output); echo $data;`在调用 mysql_query 之前使用。另一种跟踪进度的方法是通过填充代码`echo __LINE__ . "\n";`来查看它在哪里死亡。通过名称验证您的代码中有一个方法`zerror_reporting`或替换为`die(mysql_error());`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:26:11.997

The blank white page is a PHP Fatal error that produces a `500 Internal Server Error` response. That is caused by this undefined function `zerror_reporting()`:

```
mysql_query(...) or zerror_reporting(); 
```

Change that to something like

```
mysql_query(...) or trigger_error(mysql_error()); 
```

The trigger_error() call will add the mysql error to your error log.

The second problem is you're trying to `substr()` on an array, you should be doing that on the `link` element:

```
 if (substr($output['link'], 0, 26) == "http://www.bbc.co.uk/news/") { 
```

# mysql - TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT 最大存储大小

> ID：13932750
> 
> 赞同：876
> 
> 时间：2012-12-18T12:13:35.297
> 
> 标签：mysql, innodb

根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.7/en/blob.html)，有四种 TEXT 类型：

1.  小文本
2.  文本
3.  中文本
4.  长文

假设字符编码为 UTF-8，我可以在每种数据类型的列中存储的最大长度是多少？

* * *

## 回答 #1

> 赞同：1644
> 
> 时间：2012-12-18T12:18:06.890

从[文档（MySQL 8）](https://dev.mysql.com/doc/refman/8.0/en/storage-requirements.html#data-types-storage-reqs-strings)：

```
      类型 | 最大长度
-----------+-------------------------
  小文本 | 255 (2 8 -1) 个字节
      正文 | 65,535 (2 16 -1) 字节 = 64 KiB
中文本 | 16,777,215 (2 24 -1) 字节 = 16 MiB
  长文 | 4,294,967,295 (2 32 -1) 字节 = 4 GiB

```

请注意，可以存储在列中的字符数取决于*字符**编码*。

* * *

## 回答 #2

> 赞同：272
> 
> 时间：2014-04-19T12:18:30.700

相同答案的扩展

1.  这篇[SO 帖子](https://stackoverflow.com/questions/7755629/varchar255-vs-tinytext-tinyblob-and-varchar65535-vs-blob-text)详细概述了开销和存储机制。
2.  如第 (1) 点所述，应始终使用 VARCHAR 而不是 TINYTEXT。但是，在使用 VARCHAR 时，最大行大小不应超过 65535 字节。
3.  如此处所述[http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-utf8.html](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-utf8.html)，utf-8 最多 3 个字节。

这是一个用于快速决策的粗略估计表！

1.  所以最坏情况假设（每个 utf-8 字符 3 个字节）到最好情况（每个 utf-8 字符 1 个字节）
2.  假设英语平均每个单词有 4.5 个字母
3.  x 是分配的字节数

xx

```
 Type | A= worst case (x/3) | B = best case (x) | words estimate (A/4.5) - (B/4.5)
-----------+---------------------------------------------------------------------------
  TINYTEXT |              85     | 255               | 18 - 56
      TEXT |          21,845     | 65,535            | 4,854.44 - 14,563.33  
MEDIUMTEXT |       5,592,415     | 16,777,215        | 1,242,758.8 - 3,728,270
  LONGTEXT |   1,431,655,765     | 4,294,967,295     | 318,145,725.5 - 954,437,176.6 
```

请同时参考 Chris V 的回答：[https ://stackoverflow.com/a/35785869/1881812](https://stackoverflow.com/a/35785869/1881812)

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2016-03-04T00:33:26.057

面对@Ankan-Zerob 的挑战，这是我对可以存储在**以单词为单位**的每种文本类型中的最大长度的估计：

```
 Type |         Bytes | English words | Multi-byte words
-----------+---------------+---------------+-----------------
  TINYTEXT |           255 |           ±44 |              ±23
      TEXT |        65,535 |       ±11,000 |           ±5,900
MEDIUMTEXT |    16,777,215 |    ±2,800,000 |       ±1,500,000
  LONGTEXT | 4,294,967,295 |  ±740,000,000 |     ±380,000,000 
```

在**英语**中，每个单词 4.8 个字母可能是一个不错的平均值（例如[norvig.com/mayzner.html](http://norvig.com/mayzner.html)），尽管单词长度会因领域而异（例如口语与学术论文），所以没有必要太精确。英语大多是单字节的 ASCII 字符，很少有多字节字符，所以接近一个字节一个字母。字间空格必须允许一个额外的字符，所以我从每个字 5.8 个字节向下舍入。带有很多口音的语言（例如说波兰语）会存储稍​​少的单词，例如带有较长单词的德语。

需要**多字节**字符的语言，如希腊语、阿拉伯语、希伯来语、印地语、泰语等，通常需要 UTF-8 中的每个字符两个字节。疯狂地猜测每个单词 5 个字母，我已经从每个单词 11 个字节四舍五入了。

CJK 脚本（汉字、汉字、平假名、片假名等）我一无所知；我相信字符在 UTF-8 中主要需要 3 个字节，并且（经过大量简化）它们可能被认为每个单词使用大约 2 个字符，因此它们将介于其他两个字符之间。（使用 UTF-16 的 CJK 脚本可能需要更少的存储空间，具体取决于）。

这当然忽略了存储开销等。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-05-18T15:36:47.587

这很好，但没有回答问题：

“应始终使用 VARCHAR 而不是 TINYTEXT。” 如果您有很宽的行，Tinytext 很有用 - 因为数据存储在记录之外。有性能开销，但它确实有用。

# primefaces - 单击 Primefaces Menuitem 时使用 AJAX 动态加载 xhtml 页面

> ID：13932754
> 
> 赞同：2
> 
> 时间：2012-12-18T12:13:54.480
> 
> 标签：primefaces

当在左侧部分中选择菜单项时，我需要在主要内容部分中动态加载 xhtml 页面，从而避免页面刷新。

我在左侧创建了一个 Prime Faces 动态面板菜单，其中包含子菜单列表和每个子菜单的菜单项。菜单根据登录用户的角色动态加载。选择菜单项时，会调用相应的 Action Listener，但不会加载或显示页面

该应用程序正在使用 Prime Faces 3.4.1 / JSP 2.0 / Spring Framework 3.1.1 开发

## 有关应用程序背景的更多信息

屏幕布局分为四个部分。

页眉 - 所有通用的徽标和图标 页脚 - 包含页脚信息 左侧栏 - 包含菜单。这是根据登录用户的角色动态填充的 Main Content - 这会在左侧显示对应于所选菜单项的实际 .xhtml 页面

我使用 Facelet 模板来定义布局和内容。以下是定义的模板

## 布局模板.xhtml

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
    <title>RF</title>

    <link type="text/css" rel="stylesheet" href="# {facesContext.externalContext.requestContextPath}/javax.faces.resource/main.css.xhtml?ln=css" />

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</h:head>
<h:body>
    <f:view contentType="text/html; charset=UTF-8" encoding="UTF-8" >

        <div id="outerWrapper">
            <div id="pageHeader">
                <ui:insert name="pageHeader">
                </ui:insert>
            </div>
            <div id="contentWrapper">
                <div id="leftPanel">
                    <div class="jsmenu">
                        <ui:insert name="leftPanel">
                        </ui:insert>
                    </div>
                </div>
                <div id="mainContent">
                    <div id="mainStyle">
                        <h:panelGroup id="mainOutputPanel">
                            <h:form id="mainContentForm">
                                <ui:insert name="mainContent">
                                </ui:insert>
                            </h:form>
                        </h:panelGroup>
                    </div>
                </div>
                <div class="clearFloat"></div>
            </div>
            <div id="footer">
                <ui:insert name="footer">
                </ui:insert>
            </div>
        </div>
    </f:view>
</h:body>
</html> 
```

## 主屏幕布局

以下是包含上面定义的模板的主屏幕布局。我已经包含了 header.xhtml、footer.xhtml 和 rfleft.xhtml，其中包含动态填充的菜单。在 中，我正在获取要从 JSF 支持 bean 加载的页面

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">

<h:body>
    <ui:composition template="/pages/protected/templates/layoutTemplate.xhtml">

        <ui:define name="pageHeader">
            <ui:include src="/pages/protected/templates/loginHeader.xhtml">
            </ui:include>
        </ui:define>
        <ui:define name="leftPanel">
            <ui:include src="/pages/protected/templates/rfleft.xhtml">
            </ui:include>
        </ui:define>
        <ui:define name="mainContent">
              <ui:include id="mainPage" src="#{menuMB.screenName}">
              </ui:include>
        </ui:define>
        <ui:define name="footer">
            <ui:include src="/pages/protected/templates/footer.xhtml">
            </ui:include>
        </ui:define>

    </ui:composition>

</h:body>

</html> 
```

## 左菜单动态加载菜单 (rfleft.xhtml)

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:body>

    <h:form id="leftMainForm">
        <p:panelMenu style="width:200px" model="#{menuMB.mnuModel}">
        </p:panelMenu>
    </h:form>

</h:body>
</html> 
```

## JSF 支持 Bean

```
@SessionScoped
@ManagedBean(name = "menuMB")
public class MenuMB implements Serializable {

@ManagedProperty(value = "#{LoginService}")
ILoginService loginService;

private String screenName = "";

String menuUrl = "";

User loggedUser = null;
private List<FunctionMaster> fmList = null;
private MenuModel mnuModel = new DefaultMenuModel();

public MenuMB() {
    loggedUser = (User) RFContextUtil.getSessionFromContext("user");
}

@PostConstruct
public void loadMenu() {
    if (loggedUser != null) {

       //Load the actions to be performed by the logged user . Loading as menu item
        fmList = loginService.getMenuForUser(loggedUser.getUserID());
    }

    createMenu(fmList);
}

private void createMenu(List<FunctionMaster> fmList) {

    try {
        if (fmList != null) {
            for (FunctionMaster sub : fmList) {
                if (sub.getParentFunctionID() == 0) {
                    Submenu rfSubMenu = new Submenu();
                    rfSubMenu.setLabel(sub.getScreenDisplayName());
                    getMnuModel().addSubmenu(rfSubMenu);

                    for (FunctionMaster item : fmList) {
                        if (item.getParentFunctionID() != 0) {
                            if (item.getParentFunctionID() == sub.getFunctionID()) {
                                MenuItem rfSubItem = new MenuItem();

                                rfSubItem.setId(item.getFunctionName() + item.getFunctionID().toString());
                                rfSubItem.setValue(item.getScreenDisplayName());

                                rfSubItem.setImmediate(true);
                                rfSubItem.setProcess("@form");
                                rfSubItem.setPartialSubmit(true);
                                rfSubItem.setUpdate(":mainOutputPanel");
                                rfSubItem.setAjax(true);
                                rfSubItem.setRendered(true);

                                //Adding Action Listener

                                ExpressionFactory factory =                FacesContext.getCurrentInstance().getApplication().getExpressionFactory();

                                 MethodExpression methodExpr = factory.createMethodExpression(FacesContext.getCurrentInstance().getELContext(), "#{menuMB.loadScreenFromMenu}", Void.class, new Class[]{ActionEvent.class});

                                 MethodExpressionActionListener actionListener = new MethodExpressionActionListener(methodExpr);

                                 rfSubItem.addActionListener(actionListener);
                                 rfSubMenu.getChildren().add(rfSubItem);

                            }
                        }
                    }
                }

            }
        }
    } catch (Exception ex) {
        String excep = ex.getMessage();
    }

}

public void loadScreenFromMenu(ActionEvent event) {
    MenuItem menuItem = (MenuItem) event.getComponent();
    String attrName;

    try {
        if (menuItem != null) {

            screenName = RequestFactoryContextUtil.getResourceBundleString(menuItem.getId());

             //Set the screen that needs to be displayed. This is the property that is used in the Main Screen layout

            setScreenName(screenName);

        }
    } catch (Exception exc) {

    }

}
} 
```

任何帮助表示赞赏。

-巴斯卡

# jquery - 从 h1 中查找文本并使用它来替换 foo2 文本

> ID：13932762
> 
> 赞同：10
> 
> 时间：2012-12-18T12:14:20.620
> 
> 标签：jquery

我正在尝试使用 jQuery 在 H1 中查找文本，然后使用它来替换 foo2 中已经存在的文本。下面的例子：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Take text from element</title>
<script type="text/javascript">
var str = $("h1").text();
    $("#foo2").html(str);
    $("#foo2").replaceWith( str );
</script>
</head>

<body>

<div id="foo"><div id="foo2">replace with h1</div></div>

<h1>Text I want to take</h1>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-18T12:16:32.753

```
$("#foo2").text($("h1").text()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T12:18:14.893

```
<script type="text/javascript">
 $(function() {
  var str = $("h1").text();
  $("#foo2").html(str);
  $("#foo2").replaceWith( str );
 });
</script> 
```

您的代码有效，只需将 $(function() { // 您的代码放在这里 }); 周围。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T12:16:28.090

这应该有效：

```
$('#foo2').text($('h1').text()); 
```

正如 Jamiec 建议的那样，不要忘记将其包装在`$(document.ready();`：

```
$(document).ready(function() {
    $('#foo2').text($('h1').text());
}); 
```

否则它将在 DOM 加载之前执行，这意味着它不会找到任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:16:53.923

以下页面可能对您有用：

[获取标签值或元素内容](http://www.mkyong.com/jquery/jquery-how-to-get-the-tag-value-or-element-content/)

# c++ - 如何基于类定义构建对话窗口？（像django的模型系统）

> ID：13932763
> 
> 赞同：0
> 
> 时间：2012-12-18T12:14:22.593
> 
> 标签：c++, django, model-view-controller, visual-c++

[Django](https://docs.djangoproject.com/en/1.4/intro/overview/)提供了这种很棒的方法，您所要做的就是编写数据模型，Django 将根据您的模型属性生成正确的（最基本的）视图。

例如：

```
class Article(models.Model):
    pub_date = models.DateTimeField()
    headline = models.CharField(max_length=200)
    content = models.TextField()
    reporter = models.ForeignKey(Reporter)

    def __unicode__(self):
        return self.headline 
```

Django 显示的任何表单都将使用与属性类型（DateTimeField、CharField、TextField 等）匹配的正确和适当的字段类型。

我想知道是否**可以这样做`C++`**？我正在考虑编写一个应用程序设置类，我不想手动构建对话窗口。如果我可以自动建立一个对话框，我会更喜欢。我不关心各个输入字段的顺序和位置。我认为这应该是可能的，因为无论如何我都遵循模型视图控制器模式。

**编辑**如果答案可以包括示例代码或示例链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:53:47.150

在 C++ 中，没有反射机制允许您查询类的成员，因此不可能像在 Python 中那样轻松地实现您想要的。但是，您可以应用 C++ 序列化库使用的技术，例如 Boost。本质上，您需要在类中添加一个等效的 boost 序列化`serialize`方法，这将弥补检索类成员信息所需的反射工具的不足，这里有一个 boost 序列化教程解释这一点：[http:// www.boost.org/doc/libs/1_35_0/libs/serialization/doc/serialization.html](http://www.boost.org/doc/libs/1_35_0/libs/serialization/doc/serialization.html)。

一些 C++ 序列化系统也使用的另一个选项是解析 C++ 类源代码并生成执行序列化的 C++ 代码（在您的情况下，它也会生成 GUI 对话框）。

# git - 如何通过合并的分支名称获取 git log

> ID：13932766
> 
> 赞同：0
> 
> 时间：2012-12-18T12:14:25.243
> 
> 标签：git

合并前的 git 分支

```
A-->B-->C-->D-->E    <-master
         \->X-->Y    <-debug 
```

合并后看起来像

```
A-->B-->C-->D-->E-->X'-->Y'-->M 
```

那么如果在分支`debug`和有任何提交`master`，它们将看起来像

```
A-->B-->C-->D-->E-->X'-->Y'-->M-->F      <-master
         \                   / 
          ->X-->Y-----------/---->Z      <-debug 
```

`Z,Y,X`有什么方法可以在没有`A, B`分支的情况下进行 git log `debug`???
我尝试通知`..`，`git log master..debug`但是，只得到`Z`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:20:45.240

`master`如果您在合并之前使用井号标签，而不是, 的井号标签`E`，您将得到`X`,`Y`和`Z`.

```
git log <commit hash tag for E>..debug 
```

该命令给出了分支之间的差异，合并后唯一的区别是`Z`. 所以你必须在历史上回到他们真正不同的时候。

# testing - Symfony2 WebTestCase 在 Jenkins 中通过 ant 运行时忽略我的数据库更改

> ID：13932768
> 
> 赞同：1
> 
> 时间：2012-12-18T12:14:31.983
> 
> 标签：testing, symfony, jenkins, propel

我有一个系统可以捕获登录事件并在重定向后根据存储在数据库中的值触发响应（弹出模式）。

为了正确测试这一点，我设置了一个功能测试，清除此数据库表并用一组测试数据填充它。

当我单独运行测试时，它工作正常。但是，当我在 Jenkins 中运行它（或者像 Jenkins 那样使用 ant）时，它不会。

调查表明，当 WebTestCase 登录时，它的行为就好像我对数据库所做的更改尚未进行一样。我曾尝试在各个地方清除 instancePools，但这没有什么区别。

有任何想法吗？

# php - 更正 PHP 代码以从 MAGENTO 属性中删除小数

> ID：13932769
> 
> 赞同：2
> 
> 时间：2012-12-18T12:14:31.677
> 
> 标签：php, magento

我需要编辑以下代码行以显示不带小数的数字。不四舍五入，只需要显示一个自然数。“数字”是数据库中的一个属性。这是代码：
`<?php echo $this->__('Wir haben noch ') ?> <?=Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty()?><?php echo $this->__(' auf Lager.') ?>`

这是它现在显示的示例。（抱歉，我无法发布图片）[http://weinwerk-klimascout.de/weinkeller/flaschenhalter-spirale.html](http://weinwerk-klimascout.de/weinkeller/flaschenhalter-spirale.html)

我需要“ *Wir haben noch 10 auf Lager* ” ，而不是*Wir haben 10.0000 auf Lager。*

 *提前致谢 ！！！
:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:18:13.207

```
$number = '123.45';

echo intval($number); 
```

所以：

```
<?php echo $this->__('Wir haben noch ') ?> <?= intval(Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty()); ?><?php echo $this->__(' auf Lager.') ?> 
```*

# batch-file - 批量解压缩，但文件必须保留在文件夹中

> ID：13932771
> 
> 赞同：0
> 
> 时间：2012-12-18T12:14:35.103
> 
> 标签：batch-file, extract, unrar

所以我有一个大的 unrar 工作。这是目录的布局：

```
MAIN DIR
    SUBFOLDER
        file1.rar
        file1.r00
        file1.r01 
```

最终结果是：

```
MAIN DIR
    SUBFOLDER
        extracted.file 
```

为了完善这一点，它还将删除`.rar`文件并将其重命名`extracted.file`为子文件夹的名称，如果可能的话，那将是很棒的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:26:48.653

```
del *.r*
ren extracted.file %~dp0.* 
```

Maybe best to prompt to delete the `*.r*` files (`del *.r* /p`) before doing it automatically, just to make sure there are no others that you want to keep (as long as it only contains rar files then it should be fine).

# django - 如何在不定义内容类型或模型的情况下使用 Django 权限？

> ID：13932774
> 
> 赞同：98
> 
> 时间：2012-12-18T12:14:38.277
> 
> 标签：django, django-permissions

我想使用基于权限的系统来限制我的 Django 应用程序中的某些操作。这些操作不需要与特定模型相关（例如访问应用程序中的部分、搜索...），因此我不能直接使用[库存权限框架](https://docs.djangoproject.com/en/dev/topics/auth/#permissions)，因为[`Permission`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.models.Permission)模型需要引用已安装的内容类型。

我可以编写自己的权限模型，但是我必须重写 Django 权限中包含的所有好东西，例如：

*   为用户和组分配权限的可能性。
*   [`permission_required`装饰](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required)师。
*   [`User.has_perm`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.has_perm)和相关的用户方法。
*   模板[`perms`变量](https://docs.djangoproject.com/en/dev/topics/auth/#id9)。
*   ...

我检查了一些应用程序，例如[django-authority](http://packages.python.org/django-authority/)和[django-guardian](https://github.com/lukaszb/django-guardian)，但它们似乎通过允许每个对象的权限来提供与模型系统更加耦合的权限。

有没有办法在没有为项目定义任何模型（除了`User`和`Group`）的情况下重用这个框架？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2016-06-23T10:07:35.973

对于那些仍在寻找的人：

您可以创建一个没有数据库表的辅助模型。该模型可以为您的项目带来您需要的任何权限。无需处理 ContentType 或显式创建 Permission 对象。

```
from django.db import models

class RightsSupport(models.Model):

    class Meta:

        managed = False  # No database table creation or deletion  \
                         # operations will be performed for this model. 

        default_permissions = () # disable "add", "change", "delete"
                                 # and "view" default permissions

        permissions = ( 
            ('customer_rights', 'Global customer rights'),  
            ('vendor_rights', 'Global vendor rights'), 
            ('any_rights', 'Global any rights'), 
        ) 
```

之后`manage.py makemigrations`，`manage.py migrate`您可以像使用其他任何权限一样使用这些权限。

```
# Decorator

@permission_required('app.customer_rights')
def my_search_view(request):
    …

# Inside a view

def my_search_view(request):
    request.user.has_perm('app.customer_rights')

# In a template
# The currently logged-in user’s permissions are stored in the template variable {{ perms }}

{% if perms.app.customer_rights %}
    <p>You can do any customer stuff</p>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-12-18T12:27:31.007

Django 的`Permission`模型[需要一个`ContentType`实例](https://github.com/django/django/blob/1.5b2/django/contrib/auth/models.py#L73)。

我认为解决它的一种方法是创建一个`ContentType`与任何模型都不相关的虚拟对象（`app_label`and`model`字段可以设置为任何字符串值）。

如果您希望一切都干净漂亮，您可以创建一个`Permission` [代理模型](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)来处理假人的所有丑陋细节`ContentType`并创建“无模型”权限实例。您还可以添加自定义管理器，过滤掉`Permission`与真实模型相关的所有实例。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2012-12-19T12:09:05.840

按照[Gonzalo 的建议](https://stackoverflow.com/a/13933002/486362)，我使用[代理模型](https://docs.djangoproject.com/en/1.5/topics/db/models/#proxy-models)和[自定义管理器](https://docs.djangoproject.com/en/1.5/topics/db/managers/#custom-managers)来处理具有虚拟内容类型的“无模型”权限。

```
from django.db import models
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType

class GlobalPermissionManager(models.Manager):
    def get_query_set(self):
        return super(GlobalPermissionManager, self).\
            get_query_set().filter(content_type__name='global_permission')

class GlobalPermission(Permission):
    """A global permission, not attached to a model"""

    objects = GlobalPermissionManager()

    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        ct, created = ContentType.objects.get_or_create(
            name="global_permission", app_label=self._meta.app_label
        )
        self.content_type = ct
        super(GlobalPermission, self).save(*args, **kwargs) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-06-24T15:50:36.737

修复了 Chewie 在 Django 1.8 中的回答，这是一些评论中要求的。

它在发行说明中说：

> django.contrib.contenttypes.models.ContentType 的 name 字段已被迁移删除并被属性替换。这意味着不能再通过该字段查询或过滤 ContentType。

因此，在 GlobalPermissions 中没有使用的是 ContentType 中引用的“名称”。

当我修复它时，我得到以下信息：

```
from django.db import models
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType

class GlobalPermissionManager(models.Manager):
    def get_queryset(self):
        return super(GlobalPermissionManager, self).\
            get_queryset().filter(content_type__model='global_permission')

class GlobalPermission(Permission):
    """A global permission, not attached to a model"""

    objects = GlobalPermissionManager()

    class Meta:
        proxy = True
        verbose_name = "global_permission"

    def save(self, *args, **kwargs):
        ct, created = ContentType.objects.get_or_create(
            model=self._meta.verbose_name, app_label=self._meta.app_label,
        )
        self.content_type = ct
        super(GlobalPermission, self).save(*args) 
```

GlobalPermissionManager 类没有改​​变，但为了完整性而包含在内。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-21T12:18:47.060

这是替代解决方案。首先问自己：为什么不创建一个真正存在于数据库中但从未被使用过的虚拟模型，除了持有权限？这不好，但我认为这是有效且直接的解决方案。

```
from django.db import models

class Permissions(models.Model):

    can_search_blue_flower = 'my_app.can_search_blue_flower'

    class Meta:
        permissions = [
            ('can_search_blue_flower', 'Allowed to search for the blue flower'),
        ] 
```

上述解决方案的好处是，您可以`Permissions.can_search_blue_flower`在源代码中使用该变量，而不是使用文字字符串“my_app.can_search_blue_flower”。这意味着 IDE 中的拼写错误更少，自动完成功能更多。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-27T14:47:29.630

您可以`proxy model`将此用于虚拟内容类型。

```
from django.contrib.auth.models import Permission
from django.contrib.contenttypes.models import ContentType

class CustomPermission(Permission):

    class Meta:
        proxy = True

    def save(self, *args, **kwargs):
        ct, created = ContentType.objects.get_or_create(
            model=self._meta.verbose_name, app_label=self._meta.app_label,
        )
        self.content_type = ct
        super(CustomPermission, self).save(*args) 
```

现在您可以使用模型的权限`name`创建`codename`权限`CustomPermission`。

```
 CustomPermission.objects.create(name='Can do something', codename='can_do_something') 
```

您可以像这样仅查询和显示模板中的自定义权限。

```
 CustomPermission.objects.filter(content_type__model='custom permission') 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-01T13:20:42.407

*就我而言，对于任何更大的项目，我发现拥有一个不属于我的项目数据模型本身*的通用应用程序很有用——我通常将其称为“projectlibs”。这是一个简单的 django 应用程序，我在其中放置了诸如用于导入的固定装置、可用于多个应用程序的模板标签等内容。其中一些是我发现自己经常重复使用的模板内容，因此拥有此类内容的额外好处一个应用程序是它可以重复用于其他项目。

所以在里面`projectlibs/models.py`，你可以：

本质上，您可以创建那个“元应用程序”，并将其分配`content_type`给一些虚拟类：

```
class UserRightsSupport(models.Model):
    class Meta:
        default_permissions = ()  # disable defaults add, delete, view, change perms
        permissions = (
            ("perm_name", "Verbose description"),
        ) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-01T16:30:47.963

除了这个，所有的答案都对我不利：

```
content_type = ContentType.objects.get_for_model(Permission)

Permission.objects.create(
    content_type=content_type,
    name='...', codename='...',
) 
```

它处理无模型权限而不添加任何额外内容。

# jquery - 来自 PHP 的 Jquery 替换 DIV 内容

> ID：13932775
> 
> 赞同：0
> 
> 时间：2012-12-18T12:14:46.773
> 
> 标签：jquery, html, replace

在页面中，我在摘录末尾有带有“阅读更多”的摘录帖子，所以我尝试通过点击“阅读更多”来替换包含摘录的 div 内容为完整长度的帖子。当点击“阅读更多”时，点击事件不会发生任何事情。这是我的function.php中的代码和平

```
 if ($show_more_tag) {
        $excerpt = $excerpt.' <a class="more-link" href="'.$perma_link.'">'.$more_tag.'</a>';
        /* JQuery Start*/
                   echo '<script type="text/javascript">
                     $(".more-link").click(function(event) {
                    $(this).parent("div").load($(this).attr("href")); //load the data
                    event.preventDefault(); // prevent the browser from following the link
                      });
                    </script>';
        /* JQuery End */
    } 
```

错在哪里？请帮助这是我第一次尝试为网络制作东西。

感谢大家！这是对我有用的代码：

```
<script type="text/javascript">
    $(document).ready(function() 
    {
        $('.more-link').click(function(event) 
        {
            event.preventDefault();
            $(this).parents('div:eq(0)').load($(this).attr('href') + ' #container', function()
            {
                $('#container .PicturePlaceHolder a').each(function(index, el) 
                    {
                    $(el).addClass('fancybox');
                    });
                    $('#container .fancybox').fancybox(
                    {
                    'transitionIn' : 'elastic', 
                    'transitionOut' : 'elastic',
                    'centerOnScroll': 'true',
                    'cyclic' : 'true'
                    });
            });
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:40:26.190

您在实际内容之前输出脚本。因此 $('.more-link') 选择器不匹配任何东西。将 JS 代码包装在 document.ready 回调中：

```
 /* JQuery Start*/
 echo '<script type="text/javascript">
 $(function(){
   $(".more-link").click(function(event) {
     $(this).parent("div").load($(this).attr("href")); //load the data
     event.preventDefault(); // prevent the browser from following the link
   });
});
</script>';
/* JQuery End */ 
```

# c# - 使用 ASP.NET (C#) 在 SQL Server 中插入和选择 XML 数据

> ID：13932777
> 
> 赞同：0
> 
> 时间：2012-12-18T12:14:57.553
> 
> 标签：c#, asp.net, sql-server, xml

我在数据类型 XML 的 SQL Server 数据库表中有一个字段。

建议的格式如下：

```
<remarks>
    <remark>
        <author>Patrick Keane</author>
        <date>18/12/2012 10:06</date>
        <content>My content Here</content>
    </remark>
    <remark>
        <author>Joe Blogs</author>
        <date>19/12/2012 11:32</date>
        <content>My content Here</content>
    </remark>
    ......
    ......
</remarks> 
```

使用 ASP.NET (C#)，我想向该字段添加一个新条目（其中可能已经或可能没有条目）。我还希望能够检索最后一个条目（用于显示在我的 .aspx 页面上）和完整的条目列表（用于显示在 .xml 页面上）。

我一直在寻找信息/教程，我发现的大部分内容是导出数据并转换为 XML。任何人都可以向我指出相关教程或为我提供一些信息吗？泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:31:40.563

You can use a class that hold the data you won to export (and import) to xml.
You use the `[Serializable]` for make the class available for xml export. So for example if you have this class:

```
[Serializable]
public class MyClassThatKeepTheData
{
    public List<int> cListWithValues;

    public int Value1;

    public int Value2;
} 
```

Then you can use the XmlSerializer to convert it to XML (and vice verse) as:

```
public static string ObjectToXML(Type type, object obby)
{
    XmlSerializer ser = new XmlSerializer(type);
    using (System.IO.MemoryStream stm = new System.IO.MemoryStream())
    {
        //serialize to a memory stream
        ser.Serialize(stm, obby);
        //reset to beginning so we can read it.  
        stm.Position = 0;
        //Convert a string. 
        using (System.IO.StreamReader stmReader = new System.IO.StreamReader(stm))
        {
            string xmlData = stmReader.ReadToEnd();
            return xmlData;
        }
    }
}

public static object XmlToObject(Type type, string xml)
{
    object oOut = null;    

    if (xml != null && xml.Length > 0)
    {
        System.Xml.Serialization.XmlSerializer serializer = new System.Xml.Serialization.XmlSerializer(type);

        using (System.IO.StringReader sReader = new System.IO.StringReader(xml))
        {
            oOut = serializer.Deserialize(sReader);

            sReader.Close();
        }
    }

    return oOut;
} 
```

and make the convert to XML as:

```
MyClassThatKeepTheData cTheObject = new MyClassThatKeepTheData();

ObjectToXML(typeof(MyClassThatKeepTheData), cTheObject) 
```

Relative: [How to optimize class for viewstate](https://stackoverflow.com/questions/2784132/how-to-optimize-class-for-viewstate/2788062#2788062)

and I suggest also the [protobuf-net](http://code.google.com/p/protobuf-net/) is not XML, but its a lot faster and do the same work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:29:58.910

插入：

将要附加到存储过程中的 xml 作为参数传递，然后尝试以下查询：

```
update [dbo].[TableName]
  set remark.modify ('insert sql:variable("@varibleName") as last into (/remarks/)[1]') WHERE [Condition] 
```

# android - Mac OS 上的 Android Ndk 编译问题

> ID：13932778
> 
> 赞同：1
> 
> 时间：2012-12-18T12:15:00.000
> 
> 标签：android, macos, android-ndk

在 Mac OS Ver 10.6.8 上编译我的 Native C 文件时 - 我收到以下错误

```
VibhasChandra:com.htp.DrivingRange vibhasc$ /Users/vibhasc/Desktop/myeclipse/android-ndk-r8c/ndk-build 
SharedLibrary  : libndk1.so
dyld: lazy symbol binding failed: Symbol not found: _memmem**

Referenced from: /Users/vibhasc/Desktop/myeclipse/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld
Expected in: /usr/lib/libSystem.B.dylib
dyld: Symbol not found: _memmem**

Referenced from: /Users/vibhasc/Desktop/myeclipse/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld
Expected in: /usr/lib/libSystem.B.dylib

clang: error: unable to execute command: Trace/BPT trap
clang: error: linker command failed due to signal (use -v to see invocation)
make: *** ****[obj/local/armeabi/libndk1.so] Error 254 
```

我知道这在 linux 机器上很容易工作，但在 Mac 上它会给出错误......如何解决这个问题..?? 如何在中创建 dyLib 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:09:16.443

一些尝试在 OS X 上使用 R8C 的人已经报告了这一点。例如，参见android-ndk 列表上的[这篇文章。](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/2L0TyNaiywA)

建议的解决方法如下：

> 我能够为这个特定问题想出一个可能的解决方法。我创建了一个实现 memmem() 的新共享库。我使用 DYLD_INSERT_LIBRARIES 让 memmem.dylib 加载到进程中，并使用 DYLD_FORCE_FLAT_NAMESPACE=1 让 ld 在 memmem.dylib 中找到 _memmem 而不是它想要查找的 libSystem.B.dylib。我不确定是否有任何其他符号需要相同的处理。

恐怕它不包含比这更多的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:19:16.273

此问题已在较新版本的 Android NDK 修订版 8d（2012 年 12 月）中修复，即 android-ndk-r8d 版本。

供您参考：http: [//developer.android.com/tools/sdk/ndk/index.html#Revisions](http://developer.android.com/tools/sdk/ndk/index.html#Revisions)

修复信息在这里：

> 修复了用于 Mac OS X 10.6.x 的 NDK 8c 版本的链接器故障，该故障会产生以下错误：
> 
> > dyld：惰性符号绑定失败：找不到符号：_memmem 引用自：...../arm-linux-androideabi/bin/ld 预期在：/usr/lib/libSystem.B.dylib
> 
> 此问题是由在 Mac OS X 10.7 上构建引起的，它生成的二进制文件与 Mac OS 10.6.x 和 NDK 不兼容。

已下载并尝试使用较新的 NDK。工作正常。

# javascript - Angular.js - 从输入中过滤无效字符的控制器函数在输入有效字符之前不会删除字符

> ID：13932782
> 
> 赞同：7
> 
> 时间：2012-12-18T12:15:09.233
> 
> 标签：javascript, angularjs, angularjs-directive

我已经创建了我在这里遇到的问题的 JSFiddle：http: [//jsfiddle.net/9qxFK/4/](http://jsfiddle.net/9qxFK/4/)

我有一个输入字段，我只想允许使用小写字母、数字和连字符（该字段将用于 URL）。

为了做到这一点，我有以下 angular.js 控制器方法：

```
$scope.auto_slug = function() {
    $scope.slug = $scope.slug.toLowerCase().replace(/[^a-z0-9\-\s]/g, '').replace(/\s+/g, '-');
}; 
```

只有在无效字符之后键入有效字符时，才会删除无效字符。

谁能告诉我为什么这不起作用？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T13:36:50.157

而不是在控制器上这样做，你应该使用这样的指令：

```
app.directive('restrict', function($parse) {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, iElement, iAttrs, controller) {
            scope.$watch(iAttrs.ngModel, function(value) {
                if (!value) {
                    return;
                }
                $parse(iAttrs.ngModel).assign(scope, value.toLowerCase().replace(new RegExp(iAttrs.restrict, 'g'), '').replace(/\s+/g, '-'));
            });
        }
    }
});​ 
```

然后`input`像这样使用它：

```
<input restrict="[^a-z0-9\-\s]" data-ng-model="slug" ...> 
```

jsFiddle：http: [//jsfiddle.net/9qxFK/5/](http://jsfiddle.net/9qxFK/5/)

# php - PHP 的 gethostname 和 gethostbyname 是否总是有效？

> ID：13932784
> 
> 赞同：1
> 
> 时间：2012-12-18T12:15:15.703
> 
> 标签：php, networking, gethostbyname

我正在开发一个 PHP 应用程序，该应用程序需要锁定到特定的服务器 IP 地址，以便人们无法轻松地将其复制到其他服务器。该应用程序将安装在客户办公室的内部服务器上。

我有一个编码的许可证文件，其中存储了允许的服务器 IP 地址，并且在登录页面上我想检查它是否与服务器的 IP 匹配。

为此，我使用以下代码：

```
if(getHostByName(getHostName()) != $licensedServerIp){
  throw new Exception("The server's IP address does not match that in your license file.");
} 
```

这在我的开发机器上工作得很好，但是有什么情况需要我注意这个函数会失败的地方吗？我不知道该功能实际上在后台做什么 - 某些网络问题会阻止它工作吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T12:19:02.087

不
，请点击以下链接：

[http://php.net/manual/en/function.gethostbyname.php](http://php.net/manual/en/function.gethostbyname.php)
[https://bugs.php.net/bug.php?id=63730](https://bugs.php.net/bug.php?id=63730)
[https://bugs.php.net/bug.php?id= 8754](https://bugs.php.net/bug.php?id=8754)

推荐，不要在生产现场使用

# sql - select语句将多个表合并为一个变量

> ID：13932786
> 
> 赞同：0
> 
> 时间：2012-12-18T12:15:15.820
> 
> 标签：sql, database, relational

为我设计了一个输入表单，它将信息存储在一个数据库中的 4 个不同的表中。我现在需要将它们重新组合成一个。

主表是`Paintings`

所有变量字段的实际数据都存储在`Medium_options`

`PID`in和in连接`Paintings`在一起`MOID``Medium_options``Painting_medium`

我的目标是编写一个`SELECT`语句来将这些数据组合成一个 $sql 语句：

[这](http://www.davidsdomaindesign.com/marknutt/test.php)是我拥有和需要的一个例子。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:02:36.960

试试这个，将 * 更改为您需要的列（p.size、m.medium_name 等）：

```
SELECT  *  
FROM    paintings AS p  
        INNER JOIN painting_medium AS pm  
            ON p.pid = pm.pid  
        INNER JOIN medium_options mo  
            ON pm.moid = mo.moid
        INNER JOIN medium m
            ON mo.medium_id = m.medium_id 
```

所以你的第一行将是：

```
SELECT  p.category AS Category
       ,mo.medium_option AS Size
       ,m.medium_name AS Material
FROM   paintings AS p  
etc 
```

# visual-studio - 当测试和源代码位于不同的解决方案中时，在 Visual Studio 2012 中查找代码覆盖率

> ID：13932789
> 
> 赞同：3
> 
> 时间：2012-12-18T12:15:32.383
> 
> 标签：visual-studio, nunit, code-coverage

我在两种不同的解决方案中有源代码和单元测试。测试项目是指源代码二进制文件。怎样才能找到代码覆盖率？如果我选择“测试”菜单下的“分析代码覆盖率”菜单，Visual Studio 会显示覆盖率，但它看起来像是测试代码的覆盖率，而不是源代码的覆盖率。当我从代码覆盖率窗口双击测试时，测试代码会突出显示。没有办法看到代码突出显示可以在源代码（被测代码）中显示覆盖的代码，这实际上是在不同的解决方案中。我使用 Visual Studio 2012 和 Nunit（通过 Nunit Visual Studio 适配器）作为我的单元测试工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-26T19:12:48.763

请更准确地说明您如何运行测试 - NUnit 或 VS Test Runner？

但是，如果您使用 NUnit 来运行此问题中标记的测试，那么请查看“OpenCover”工具（只需 google 即可）。

OpenCover 能够启动您的 Testrunner（以及所有其他可执行文件），然后进行检测并产生覆盖结果。

它很容易配置，例如：

```
OpenCover.Console.exe -register:user -target:Target.exe -filter:+[*]* -output:output.xml 
```

典型用途是批量运行它，然后添加一个 ReportGenerator 步骤。

我们在我们的持续集成系统 (Jenkins) 中以这种方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T06:43:30.680

尝试使用[NCover](https://www.ncover.com/)等工具。对于不同解决方案中的产品代码和测试代码，我必须像您一样这样做。有效。但是，您必须阅读文档并调整设置。可悲的是，我忘记了这些细节。

# php - 从单选按钮打印检查值

> ID：13932790
> 
> 赞同：0
> 
> 时间：2012-12-18T12:15:37.040
> 
> 标签：php

所以，我有这个价值：

```
$row['status']; 
```

如何将已检查的值标记为已检查？这是表格：

```
<input type="radio"  id="status" name="status" value="1" /> Mbyllur<br />
<input type="radio"  id="status" name="status" value="0" /> Hapur<br /> 
```

因此，如果值为 1，则应选中单选按钮.. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:20:58.290

您应该首先检查变量是否已设置，否则您将得到`Undefined variable: row`-Error 然后检查它的值：

```
<input type="radio"  id="status" name="status" <?php if(isset($row['status']) && $row['status'] == 1){ ?> checked="checked" <?php } ?> value="1" /> Mbyllur<br />
<input type="radio"  id="status2" name="status2" <?php if(isset($row['status2']) && $row['status2'] == 0){ ?> checked="checked" <?php } ?> value="0" /> Hapur<br /> 
```

编辑：您不应在页面上多次使用 ID（“状态”）。ID 是唯一标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:18:45.097

```
<input type="radio"  id="status" name="status" <?php if($row['status'] == 1){ ?> checked="checked" <?php } ?> value="1" /> Mbyllur<br />
<input type="radio"  id="status" name="status" <?php if($row['status'] == 0){ ?> checked="checked" <?php } ?> value="0" /> Hapur<br /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:33:06.647

Chris answer is absolutely correct except both radio buttons having same id.
With all due respect to those who has answered, it is just my suggestion that no two elements in page should have same id.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:17:50.233

```
<input type="radio" id="status" name="status" value="1" <?=($row[ 'status' ] ? "checked" : "") ?>/>
<input type="radio" id="status" name="status" value="0" <?=($row[ 'status' ] ? "" : "checked") ?>/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:18:20.730

这应该有效：

```
<input type="radio"  id="status" name="status" <?=($row['status'] == 1 ?"checked=\"checked\"" : "") ?> value="1" /> Mbyllur<br />
<input type="radio"  id="status" name="status" <?=($row['status'] == 0 ?"checked=\"checked\"" : "") ?> value="0" /> Hapur<br /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T12:18:23.273

```
if ($row['status'] == 1) { echo 'checked="checked"'; } 
```

# css - Bootstrap 按钮的 IE9 渲染问题

> ID：13932798
> 
> 赞同：4
> 
> 时间：2012-12-18T12:16:08.377
> 
> 标签：css, twitter-bootstrap, internet-explorer-9

IE9 似乎使用 Twitter Bootstrap 使禁用按钮变得非常丑陋。按钮文本变得模糊，我找不到任何方法来消除这种模糊，甚至无法重置为默认的 IE9 按钮外观。

![IE9 bootstrap 禁用按钮文本渲染问题](../Images/d02653f80eb8a0626e5f93a124b54b80.png)

最好的解决方案是如果有人可以解决这个字体/模糊渲染问题。如果这是不可能的，我希望拥有默认的 IE9 按钮外观和感觉，因为这至少是可读的。

**我不想下载任何补丁，或者只是在我自己的浏览器中修复它！**

我试图重置 IE9 按钮的外观，但由于某种原因，这似乎是不可能的。文本的颜色变成灰色，上面看起来像一个丑陋的旧 IE 过滤器。

![IE9引导按钮重置不起作用](../Images/8e1993da46a27bbf5f242487a6c0aee2.png)

我在末尾包含了一个 LT IE10 样式表`<head>`

```
<!--[if lt IE 10]><link rel="stylesheet" type="text/css" href="css/ie9.css" media="screen" /><![endif]--> 
```

使用以下CSS：

```
.btn.disabled,
.btn[disabled] {
    background: 0;
    background-color: #a9a2a1;
    opacity: 1;
    filter: none !important;
    text-shadow: none !important;
    -ms-color: #000000 !important;
    color: #000000 !important;
    zoom: 1;    
}
input:-ms-input-placeholder {
    color: black !important;
} 
```

文本仍然是灰色的，按钮看起来像上面的灰色...

### 我的解决方案：

感谢 Emily 的回答，我做了一个 hack：

```
#sok.btn.disabled,
#sok.btn[disabled] {
    opacity: 1;
    font-size: 0;
    background-image: url('image.jpg');
    width: 48px;
} 
```

所有其他 css 规则都可以不用管

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:10:31.460

引导人员确实在他们的 github 页面上提到了这一点，他们目前没有办法修复它。这只是 IE9 的问题，因为它会覆盖他们的代码，以及其他任何人的代码。目前还没有解决这个问题的方法，尽管我想你可以尝试创建一个禁用的按钮图像，并使用更高的 z-index 将它放在看起来令人讨厌的按钮的顶部，尽管这可能是一个公平的麻烦的数量...希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-21T07:59:25.647

如果是 IE 9，您将需要添加以下样式，

在您的 HTML 中：

```
<!--[if gte IE 9]>
 <link href="/bootstrap/i9_btn_fix.css" rel="stylesheet" type="text/css"  />
<![endif]--> 
```

i9_btn_fix.css：

```
.btn.disabled:before,
.btn.disabled:after{
     cursor: default;
     background-image: none;
     opacity: 0.65;
     filter: alpha(opacity=65);
     -moz-box-shadow: none;
     box-shadow: none;
   } 
```

# objective-c - Xcode JIT 编译器会忽略一些预处理器宏

> ID：13932800
> 
> 赞同：1
> 
> 时间：2012-12-18T12:16:14.973
> 
> 标签：objective-c

这个问题让我发疯了，它几乎肯定与 Xcode 中的一些错误有关，但也许有一些我不熟悉的解决方法或者我可能忽略了的东西。它是这样的：

我们为不同的子项目提供了多个构建目标，这些目标生成具有部分重叠代码的单独可执行文件。为了排除不应该进入一个或另一个应用程序的某些代码位，我们`#define`在每个子项目的相应 .pch 文件中定义了许多宏，例如在*main-app.pch*

```
#ifndef MY_APP
    #define MY_APP 1
#endif 
```

在*sub-app.pch 中*

```
#ifndef SUB_APP
    #define SUB_APP 1
#endif 
```

然后，在一些代码中，你会看到

```
- (void)doSomething
{
#ifdef MY_APP
    NSLog(@"This is just an example");
#endif
} 
```

现在，问题是 Xcode 有时，即仅在*某些*机器上，不做语法高亮或条件编译代码的代码完成。也就是说，对于我的同事来说，它工作得非常好，而无论我做什么，我都不会看到语法突出显示。作为记录，我们都在 Xcode 4.5.2 上。我尝试删除派生数据和重新索引，改组目标/模式的顺序，并将预处理器宏放在项目和目标设置中，而不是 .pch 文件中，但似乎没有任何帮助。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:59:01.253

在这个烦人的问题上花费了大部分时间之后，我找到了一种“解决方案”：使用 Xcode 工作区而不是子项目来处理所有属于同一个应用程序包的独立可执行文件。我现在没有创建构建依赖项，而是在当前方案的“构建”部分（**产品**->**编辑方案...**）中添加其他目标。

# ios - 从 iOS 中的 SQL 表中获取特定行？

> ID：13932810
> 
> 赞同：1
> 
> 时间：2012-12-18T12:16:35.427
> 
> 标签：ios, database, sqlite

我使用 SQLite Manager（firefox 插件）创建了一个 4 列和 5 行的表。现在我想借助以下代码从该表中获取整个随机行，但它不起作用，因为我以前从未使用过它。我可能做错了什么？

```
-(NSDictionary *)fetchQuestionsWithRowID:(NSInteger)rowID withDbPath:(NSString *)dbPath
        {

      NSDictionary *questDic=[NSDictionary dictionary];
            sqlite3 *database=nil;
            if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK)
            {
                const char *sql = "SELECT * FROM quizQuestions Where rowid=?";

                sqlite3_stmt *selectstmt;

                int result = sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL);

                if(result != SQLITE_OK) {
                    NSLog(@"Prepare-error #%i: %s", result, sqlite3_errmsg(database));
                }

                if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK)
                {
// confused here
                    sqlite3_bind_text16(selectstmt, 1, &rowID, -1, SQLITE_TRANSIENT);
                    while(sqlite3_step(selectstmt) == SQLITE_ROW) {

                        NSString *str = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];

                        NSLog(@"string is %@",str);

                    }
                }
            }
            sqlite3_close(database);
            return questDic;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:28:12.773

Hemant，看看下面的代码可能会有所帮助，但您需要根据需要制作该代码，意味着需要更正表格等：

```
 NSString* sqliteQuery = NULL;
    sqliteQuery = [NSString stringWithFormat:@"SELECT roomImage,bookID,roomName,floorID,roomDesc,id FROM roomTbl"];
    sqlite3_stmt* statement;
    if( sqlite3_prepare_v2(db, [sqliteQuery UTF8String], -1, &statement, NULL) == SQLITE_OK )
    {
        while( sqlite3_step(statement) == SQLITE_ROW )
        {
            NSMutableDictionary* dict = [NSMutableDictionary new];
            NSData* data = nil;
            int length = sqlite3_column_bytes(statement, 0);
            data       = [NSData dataWithBytes:sqlite3_column_blob(statement, 0) length:length];
            [dict setObject:[Base64 encode:data] forKey:@"imageFloorBytes"];
            int idFR = sqlite3_column_int(statement, 1);
            [dict setObject:[NSString stringWithFormat:@"%d",idFR] forKey:@"BookingID"];

            [dict setObject:[NSString stringWithFormat:@"%s",(const char*)sqlite3_column_text(statement, 2)] forKey:@"roomName"];
            [dict setObject:[NSString stringWithFormat:@"%d",sqlite3_column_int(statement, 3)] forKey:@"floorID"];
            [dict setObject:[NSString stringWithFormat:@"%s",(const char*)sqlite3_column_text(statement, 4)] forKey:@"roomDesc"];
            [dict setObject:[NSString stringWithFormat:@"%d",sqlite3_column_int(statement, 5)] forKey:@"roomID"];
            [arr addObject:dict];
            [dict release];
        }
    }
    // Finalize and close database.
    sqlite3_finalize(statement); 
```

另外，你导入你的数据库了吗？而且，在进行任何操作之前，您还必须检查以下文件或数据库是否存在。

希望能解决你的问题

# jquery - 如果我通过 ajax 请求获取表单，客户端验证 gem 不起作用

> ID：13932812
> 
> 赞同：6
> 
> 时间：2012-12-18T12:16:38.227
> 
> 标签：jquery, ajax, ruby-on-rails-3, simple-form, client-side-validation

如果我使用 ajax 请求获取 simple_form，客户端验证 gem 不起作用..

```
<%= link_to 'Add +', new_group_path, :remote => true, :id => "new_group_link" %> 
```

现在表单新组将显示并且它不会触发客户端验证。

我遇到了客户端功能未与表单绑定的问题。（JavaScript 资产中指定的函数。）

但是我如何触发这些功能.??

**编辑**

想想标准的脚手架形式。因此，根据上面指定的 link_to 标记。new_group_path 将执行新操作并使用 respond_to 块，将呈现 new.js.erb 文件。对。这是 new.js.erb 中的代码

```
 $('#new_group_link').hide().after('<%= j render("form") %>'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-25T09:30:30.463

当你得到一个带有 ajax 的表单时，你应该自己启用客户端验证。这是[链接](https://github.com/bcardarella/client_side_validations#enabling-disabling-and-resetting-on-the-client)：

```
$(new_form).enableClientSideValidations(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T05:26:06.820

如果您希望客户端验证触发通过 ajax 加载的所有表单，请在 main.js 中的某处使用：

```
$(document).ajaxSuccess(function(){
    if($('form[data-validate]').length){
        $('form[data-validate]').enableClientSideValidations();
    }
}); 
```

当然，你应该有`:validate => true`这个工作的形式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T12:13:44.107

**从文档中发现：**

* * *

在您的 Gemfile 中添加以下内容：

```
gem 'simple_form'
gem 'client_side_validations'
gem 'client_side_validations-simple_form' 
```

`Order matters here.` `SimpleForm`和`ClientSideValidations`

需要 `required before ClientSideValidations-SimpleForm`。

* * *

在您的 FormBuilder 中，您只需要启用验证：

```
<%= form_for @user, :validate => true do |f| %> 
```

这应该足以让你继续前进。

默认情况下，验证器将被序列化并嵌入到`<script>`标签后面的标签中。如果您想在`<script>`其他地方呈现该标签，您可以通过将名称传递给`:validate`

```
<%= form_for @user, :validate => :user_validators do |f| %> 
```

* * *

如果您通过 AJAX 将新表单呈现到页面中，则需要启用该表单以进行验证：

```
$(new_form).enableClientSideValidations(); 
```

您应该将此附加到新 HTML 呈现时触发的事件。

如果向现有表单引入新输入，则可以使用相同的函数：

```
$(new_input).enableClientSideValidations(); 
```

# python - “命令”对象没有属性“标准输出”

> ID：13932814
> 
> 赞同：1
> 
> 时间：2012-12-18T12:16:55.240
> 
> 标签：python, django, command, stdout

```
from django.core.management.base import BaseCommand, CommandError
class Command(BaseCommand):
    def handle(self, *args, **options):
        ......
        self.handle_noargs()

    def handle_noargs(self, **options):
        packages_count = Package.objects.all().count()
        Package.objects.all().delete()
        print >> self.stdout, u'Deleted %d packages' % packages_count
        ...... 
```

我正在为提供的代码编写测试，但是每当我调用 handle_noargs 函数时，我都会收到以下错误：

```
AttributeError: 'Command' object has no attribute 'stdout' 
```

我正在使用 Django 1.3.1。

```
>>> import django
>>> django.VERSION
(1, 3, 1, 'final', 0) 
```

关于谷歌搜索答案标准输出是在一些版本之前在 BaseCommand 类中实现的，所以我不知道为什么 django 找不到它。

添加目录（自我）：

```
>>> from webui.packagedb.management.commands.packagedb_clear import Command
>>> dir(Command)
['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribut
e__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_e
x__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '_
_weakref__', 'args', 'can_import_settings', 'create_parser', 'execute', 'get_ver
sion', 'handle', 'handle_noargs', 'help', 'option_list', 'output_transaction', '
print_help', 'requires_model_validation', 'run_from_argv', 'usage', 'validate'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:31:32.383

我认为你不能直接调用handle_noargs，BaseCommand 类命令有一个execute() 方法，它调用handle() 并且在初始化stdout 和stderr 之前

因此，每次运行命令时，都会调用 execute() 方法，该方法期望实现句柄方法

# nsis - 如何从 nsis 的注册表中获取已安装程序的路径？

> ID：13932816
> 
> 赞同：2
> 
> 时间：2012-12-18T12:17:00.013
> 
> 标签：nsis

如何从 nsis 的注册表中获取已安装程序的路径？我正在通过 readregistry 命令读取注册表并分配给一个变量。实际上我想找到我的 uninstall.exe 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:30:16.803

如果您使用该[`InstallDirRegKey`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.22)指令，您可以指定一个注册表项，该`$INSTDIR`目录将在其中保存以供将来使用。下次安装程序启动时会自动读取该密钥。

您可以使用它来定位`uninstall.exe`

`UninstallString`你也可以在安装的时候写几个key来配置windows的“添加/删除程序”，然后通过注册表值就可以找到卸载程序了：

```
!define PRODUCT_UNINST_KEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\my_application"
WriteRegStr HKLM "${PRODUCT_UNINST_KEY}"  "DisplayName" "my_application Uninstaller"
WriteRegStr HKLM "${PRODUCT_UNINST_KEY}"  "DisplayIcon" "$INSTDIR\my_application.exe,0"
WriteRegStr HKLM "${PRODUCT_UNINST_KEY}"  "Publisher" "My company"
WriteRegStr HKLM "${PRODUCT_UNINST_KEY}"  "HelpTelephone" "555-123456"

WriteRegStr HKLM "${PRODUCT_UNINST_KEY}" "UninstallString" '"$INSTDIR\uninstall.exe"' 
```

# php - 是否有正确/更好的方式将 html 跨入 php，反之亦然

> ID：13932818
> 
> 赞同：0
> 
> 时间：2012-12-18T12:17:05.503
> 
> 标签：php

我有时会像其他人一样下载示例代码以节省时间而不必重新发明轮子

我刚刚在一个非常复杂的代码函数之后遇到了这个问题，所以编写它的人似乎知道他们在做什么 PHP 明智：

```
<?php if (isset($menu)) { ?>
    <?php echo $menu; ?>
  <?php } ?> 
```

你为什么不写：

```
<?php if (isset($menu)) { echo $menu; } ?> 
```

好奇哪个更好，如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:19:40.350

这纯粹是品味/风格的问题，它对功能甚至系统设计都没有影响。就像替代语法不会以任何方式影响任何东西，除了样式。这本来可以很好地写成：

```
<?php if (isset($menu)): echo $menu; endif ?> 
```

这将是同样的事情。

但是请注意，对于纯逻辑文件，跳出 PHP 通常是个坏主意。下面的代码：

```
<?php if ($test == 1) { ?>
    <?php ++$test; ?>
<?php } ?> 
```

类似于：

```
<?php

if ($test == 1) {
    echo "    ";
    ++$test;
} 
```

`<?php ++$test; ?>`这引入了打印四个空格（或制表符，或用于缩进块的任何内容）的不需要且经常被忽视的副作用。同样的事情也适用于关闭`?>`- 通常最好将其留在纯逻辑文件中，因为编辑器倾向于在文件末尾添加一个空的换行符，如果它跟在`?>`, 之后将被`echo`编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:20:06.143

在您的第一个示例中，无需关闭然后重新打开 PHP 标签，可以按照您在示例 2 中提供的操作来完成。

```
<?php
    if(isset($menu)){
        echo $menu;
    }
?> 
```

您需要关闭然后重新打开标签的唯一原因是如果您还想打印更多的 HTML：

```
<?php
    if(isset($menu)){ ?>
        <div id="menu">
            <?= $menu ?>
        </div>
    <? }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:22:35.637

对我来说，这完全取决于偏好和我想要实现的目标。

在 100% PHP 代码文件中，我可能会这样做：

```
if (isset($somevariable))
{
    // do some stuff here
} 
```

甚至这个

```
if (isset($somevariable)) echo htmlentities(print_r($somevariable, true)); 
```

而在混合的 HTML / PHP 文件（例如视图）中，我可以这样做：

```
<table>
<?php foreach ($result_set as $row) : ?>
    <tr>
        <td><?php echo $row['column']; ?></td>
    </tr>
<?php endforeach; ?>
</table> 
```

我觉得更容易区分

我没有意见哪个“更好”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:23:37.413

这两个片段之间没有功能差异。

代码最初可能看起来像这样：

```
<?php if (isset($menu)) { ?>
<a href='home.php'>Home</a> | <a href='links.php'>Links</a>
<?php } ?> 
```

并且只有第二行已被动态生成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:23:49.740

我能看到的唯一原因是这段代码中是否混合了 HTML，例如

```
<?php if (isset($menu)) { ?>
    Html stuff here
<?php echo $menu; ?>
    More html stuff here.
<?php } ?> 
```

但是，我无法想象有任何实际用途。

我个人会做类似您的示例 2 的事情。没有理由脱离 PHP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T12:24:11.270

如果您启用了 PHP 短标签，您可以使用

```
<?=$menu ?> 
```

这意味着与以下行完全相同：

```
<?php echo $menu;?> 
```

对于您的 if 情况，这可能很有用，但可能不太清楚

```
<?=isset($menu)? $menu : "" ?> 
```

如果您要合并这些行，请记住允许换行：

```
<?php
    if(isset($menu)){
        echo $menu;
    }
?> 
```

如果您不喜欢乱码，您可能还想使用 Google PHP 模板库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T12:26:27.153

只是一个想法而不是一个问题，但我不能在评论中发布代码，所以这里是。

也许它只是一种遗留格式？即以前它是这样的：

```
<?php if (isset($menu)) { ?>
    <p>Here comes the menu!</p>
    <?php echo $menu; ?>
    <p>So how did you like it?</p>
<?php } ?> 
```

然后其他人删除了 HTML 并保持 PHP 不变。

无论如何，我同意@Matt Clark（甚至在他编辑他的答案之前:)）和@rid 以及其他人的观点，即代码应该易于阅读并根据行业标准进行格式化。

# glkit - 使用 GLKBaseEffect 的常量定位光

> ID：13932819
> 
> 赞同：1
> 
> 时间：2012-12-18T12:17:06.113
> 
> 标签：glkit, light, glkbaseeffect

我需要使用 GLKBaseEffect 设置 const 聚光灯位置：所以当我更改模型视图时，灯光会停留在同一个地方。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:45:02.890

当您使用 GLKBaseEffect 设置灯光的位置时，它使用当前存储在其 modelviewMatrix 属性中的值。因此，您需要设置此值两次，一次用于灯光，一次用于您的对象：

```
self.effect.transform.modelviewMatrix = GLKMatrix4Identity;
self.effect.light1.position = GLKVector4Make(0.0, 1.0, 3.0, 1);

GLKMatrix4 modelViewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -3.0f);
modelViewMatrix = GLKMatrix4Rotate(modelViewMatrix, GLKMathDegreesToRadians(90), 0, 1, 0);
self.effect.transform.modelviewMatrix = modelViewMatrix; 
```

这应该够了吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T03:49:09.813

在这里帮助我的唯一解决方案是制作自己的着色器。

# python - Paramiko 只连接到 IP 地址而不是 Python 中的主机名？

> ID：13932825
> 
> 赞同：4
> 
> 时间：2012-12-18T12:17:16.967
> 
> 标签：python, paramiko

我在python中有这样的功能：

```
def test_ssh(host, username, password):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(host, username=username, password=password) 
```

问题是： `test_ssh('127.0.0.1', 'root', 'hello')`工作

但`test_ssh('localhost', 'root', 'hello')`不起作用

我得到的错误是：

```
ssh: Could not resolve hostname localhost: Name or service not known 
```

这是什么原因造成的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:29:32.147

尝试给予`ssh.connect(hostname=host, username=username, password=password)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:40:59.713

由于我的评论没有多大意义（将它们放在一起）（假设您的操作系统是 Linux）-

您错误的原因 -

> ssh：无法解析主机名 localhost：名称或服务未知

是 - HOSTNAME 的 DNS 解析没有提供正确的 IP（注释#1）

使用此命令（终端）进行测试-

> **主机** *本地主机*

你可以尝试什么 -

编辑 **/etc/hosts** 文件，在此文件中输入 IP 和主机名。那应该像这样解决您的主机名和IP-

> #IP 主机名 [[alias1] [...]]
> 127.0.0.1 localhost
> 172.22.0.9 mymachine.home mymachine

最后是一个很棒的链接 - [http://bit.ly/IHhA1R](http://bit.ly/IHhA1R)

*编辑*

可能的工作流程 -

*   用户注册，输入**HOSTNAME**
*   我们运行命令（使用 python 我们可以使用 os.subprocess 或 os.popen） -

> **bash$**挖掘*主机名*

*   获取 HOSTNAME 的 IP
*   尝试使用 IP 而不是 HOSTNAME 连接到 HOST

始终使用相同的工作流程来获取用户提供的 HOSTNAME 的最新 IP，使用 IP 而不是 HOSTNAME 进行连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T15:40:00.337

实际上，当主机可以解决时，这甚至不起作用。

第一次尝试：

```
import socket
socket.getaddrinfo('google.com', None)
socket.getaddrinfo('localhost', None) 
```

如果 google.com 返回带有地址的元组并且 localhost 也正确返回 - 那么您的系统设置是正确的。我不知道为什么，但我遇到了这个问题并且通过了`socket.getaddrinfo(host, None)[0][1][4]`。

# android - 将复杂和嵌套对象作为参数传递给 dotnet Web 服务

> ID：13932826
> 
> 赞同：1
> 
> 时间：2012-12-18T12:17:31.323
> 
> 标签：android, web-services

我正在尝试将复杂和嵌套对象作为参数传递给`.net web service`. Complex 对象包括另一个类对象。请帮我

# iis - 放 ' 我需要允许我正在安装的站点覆盖错误页面委托，以便它正常运行，而不会影响 Web 服务器上的任何其他站点或设置。 首先，我尝试使用 C# 自定义操作编辑 Xml，但即使自定义操作以完全管理员权限运行，它也找不到文件 (FileNotFoundExcepti 问问题 问问题 2012-12-18T12:18:09.527 1277 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我需要允许我正在安装的站点覆盖错误页面委托，以便它正常运行，而不会影响 Web 服务器上的任何其他站点或设置。 首先，我尝试使用 C# 自定义操作编辑 Xml，但即使自定义操作以完全管理员权限运行，它也找不到文件 (FileNotFoundException)。我已经对 AppCmd.exe 进行了各种尝试，但我没有设法以任何我能看到的方式更改 applicationHost.config，更不用说我想要的方式了（overrideMode="Allow"）。我很难理解为什么因为手动更改很容易，所以代码很难。 此尝试背后的原因是，如果错误处理的根级别功能委托设置为“只读”，我不希望出现 500.19 HTTP 错误。换句话说，我只想安装我的应用程序。 从单个共享 exe 文件运行 dotnet 应用程序 据您所知，从共享的 exe 文件运行 C# 应用程序是否有任何问题？这是来自客户的请求，要求他们的 20 个客户在共享路径上运行相同的 exe 文件。 第一次测试没有显示问题，但不知道长期。我个人不喜欢这样，不认为开发框架时考虑到这一点，但他们这样做是为了在需要时快速升级 exe 文件。 有什么要劝阻的吗？ 谢谢萨夫 _ iiscustom-actionappcmd 4 1 回答 1 This answer is useful 0 这是我用来解锁该system.webServer/security/ipsecurity部分的命令： C:\Windows\System32\inetsrv>appcmd unlock config /section:system.webServer/secur ity/ipsecurity Unlocked section "system.webServer/security/ipSecurity" at configuration path "M ACHINE/WEBROOT/APPHOST". 注意：这必须通过提升的命令提示符（以管理员身份运行）运行。 有关AppCmd.exe 入门的更多信息。 于 2013-09-05T02:53:56.043 回答 Related 1 android - 广播接收器监听文本选择 1 ruby-on-rails-3 - 为 Devise 的用户模型定义 FactoryGirl 失败 0 javascript - How can I display more then one video in an HTML5 page? 2 android-linearlayout - When LinearLayout is selected are his child too? 1 c# - 许多并发异步调用的客户端中的随机 TimeoutException 4 php - Stop PHP with ajax 2 android - 预蜂窝上带有分隔线的 LinearLayout 2 java - Emailing STDERR and a file after a Java program has run 3 c++ - 使用函数调用初始化静态全局数据（在编译时） 2 extjs - EXTJS4 Gridpanel- How to focus/highlight a particular row? Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13932835
> 
> 赞同：1
> 
> 时间：
> 
> 标签：iis, custom-action, appcmd

我需要允许我正在安装的站点覆盖错误页面委托，以便它正常运行，而不会影响 Web 服务器上的任何其他站点或设置。

首先，我尝试使用 C# 自定义操作编辑 Xml，但即使自定义操作以完全管理员权限运行，它也找不到文件 (FileNotFoundException)。我已经对 AppCmd.exe 进行了各种尝试，但我没有设法以任何我能看到的方式更改 applicationHost.config，更不用说我想要的方式了（overrideMode="Allow"）。我很难理解为什么因为手动更改很容易，所以代码很难。

此尝试背后的原因是，如果错误处理的根级别功能委托设置为“只读”，我不希望出现 500.19 HTTP 错误。换句话说，我只想安装我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T02:53:56.043

这是我用来解锁该`system.webServer/security/ipsecurity`部分的命令：

```
C:\Windows\System32\inetsrv>appcmd unlock config /section:system.webServer/secur
ity/ipsecurity
Unlocked section "system.webServer/security/ipSecurity" at configuration path "M
ACHINE/WEBROOT/APPHOST". 
```

注意：这必须通过**提升的命令提示符（以管理员身份运行）运行**。

[有关AppCmd.exe 入门的](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)更多信息。

# c# - 从单个共享 exe 文件运行 dotnet 应用程序

> ID：13932839
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:18:18.417
> 
> 标签：c#, .net, share

据您所知，从共享的 exe 文件运行 C# 应用程序是否有任何问题？这是来自客户的请求，要求他们的 20 个客户在共享路径上运行相同的 exe 文件。
第一次测试没有显示问题，但不知道长期。我个人不喜欢这样，不认为开发框架时考虑到这一点，但他们这样做是为了在需要时快速升级 exe 文件。
有什么要劝阻的吗？

谢谢萨夫
_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:47:08.767

首先要考虑的是部署问题。在 .NET 3.5 SP1 之前，默认情况下不允许这样做，因为随附的安全策略以不太受信任的方式处理网络位置。.NET 3.5 SP1 及更高版本，[情况不再如此](http://blogs.msdn.com/b/vancem/archive/2008/08/13/net-framework-3-5-sp1-allows-managed-code-to-be-launched-from-a-network-share.aspx)。当然，如果您正在使用之前的框架版本，您可以使用 caspol[修改此安全策略以允许这样做。](http://blogs.msdn.com/b/brada/archive/2007/10/26/adhoc-poll-allowing-net-exes-to-run-off-a-network-share.aspx)此外，一些较新版本的 Windows[可能具有 .NET 之外的其他安全策略](https://serverfault.com/questions/226526/is-it-possible-to-restrict-executing-an-exe-on-a-network-drive-with-windows-7)，可以防止从远程位置执行。

第二个考虑是确保应用程序的设计方式使其了解其环境，而不是假设环境与本地机器相关（这可能会影响外部资源的解析，并且取决于这种情况下，可能会导致资源争用或用户覆盖彼此的数据）。

第三是可用性。如果托管该可执行文件的服务器不可用（意外关闭、崩溃、遇到网络问题、重命名等）怎么办？这可以接受吗？可执行文件有多大？如果它很大，则可能会增加网络流量，并且无论如何都会导致可执行文件在通过网络调用时启动缓慢。

我想对于琐碎的应用程序，这些问题可能可以忽略不计。但是，有很多方法可以在客户端计算机上安装应用程序，这些方法可以快速轻松地安装和更新，例如[ClickOnce 部署](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:22:01.980

我们目前运行内部设计的软件。这运行一个中央 SQL 数据库。每台计算机都设置了一个批处理程序，该批处理程序通过 Windows 启动运行并从中央服务器下载当前程序文件。因此，.exe 在个人计算机上运行，​​而不是在服务器上运行。至少在我们的案例中，这是最有效的方法。

# html - 如何在 Firefox 和 IE 中显示滚动条？

> ID：13932847
> 
> 赞同：0
> 
> 时间：2012-12-18T12:18:29.433
> 
> 标签：html, css, scrollbar, positioning

我想在 div 上使用属性 overflow:auto 并在 body 上设置 overflow:hidden 使用滚动条。它适用于 Chrome，但不适用于 Firefox 和 IE。

谁能解释我为什么这段代码有两种不同的行为？

```
<html lang="en" class="fillScreen" dir="ltr"><head> 
   <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
   <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <link rel="stylesheet" href="template4.css" type="text/css">  

    <style>

        .fillScreen {
            bottom:0px;
            height:100%; 
        } 

         html, body {
            margin: 0; padding: 0;
            height: 100%;
            overflow: hidden; 
        }

    </style>

  </head> 

  <body class="fillScreen"> 

   <div class="fillScreen" style="display:table;width:100%">

        <div class="fillScreen" style="display:table-row">

            <div style="border: solid 2px red;overflow:auto;display:table-cell;overflow:auto" class="fillScreen" >              

                    <div class="fillScreen" style="display:table;width:100%;overflow:auto">             

                        <div class="fillScreen" style="border: solid 1px blue;" style="display:table-row">              

                            <div class="fillScreen" style="display:table-cell">             
                                <div class="fillScreen" style="position:relative">   

                                    <button width="142px" height="20px" style="position:absolute;top:99px;left:20px;">OK</button>

                                </div>
                            </div>          

                        </div>

                    </div>

            </div>
        </div>

    </div>

</body>
</html> 
```

调整窗口大小时，可以在这里测试它[http://jsfiddle.net/nMSvv/2/](http://jsfiddle.net/nMSvv/2/) 滚动条出现在 Chrome 中。

我补充说，我绝对需要显示具有绝对位置的按钮，并且需要保持这种 div 结构

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:25:15.073

解决方案在这里：http: [//jsfiddle.net/nMSvv/3/](http://jsfiddle.net/nMSvv/3/)

我需要将 div 包裹在我想要滚动条的地方：

```
<div class="fillScreen" style="position:relative;overflow:auto">               
    <div style="position:absolute;top:0px;left:0px">

    </div>
</div> 
```

# mysql - Mysql引用子查询结果在父where子句中

> ID：13932852
> 
> 赞同：0
> 
> 时间：2012-12-18T12:18:44.260
> 
> 标签：mysql, subquery

在我们学校，当一个学生表现良好时，他们会得到一个存储在数据库中的虚拟英镑（或美元）。

这是我的查询：

```
SELECT s.chosen_name, s.chosen_surname, s.regId, s.admission_number, 
    (
        SELECT SUM(a.pounds_amount) 
        FROM tbl_pounds_log a 
        WHERE a.student_id=l.student_id
    ) AS total_pounds, 
    (
        SELECT SUM(b.pounds_amount) 
        FROM tbl_pounds_log b 
        WHERE b.student_id=l.student_id 
        AND b.staff_id=:staffId 
        AND b.action_timestamp>(UNIX_TIMESTAMP()-3600) 
    ) AS available_pounds 
FROM TBL_student s 
LEFT JOIN tbl_pounds_log l 
    ON l.student_id=s.admission_number 
WHERE ((s.chosen_name LIKE :termOne AND s.chosen_surname LIKE :termTwo) 
        OR (s.chosen_name LIKE :termThree AND s.chosen_surname LIKE :termFour))
    AND (total_pounds>=:lowerPoundLimit 
        AND total_pounds<=:upperPoundLimit) 
GROUP BY s.admission_number 
ORDER BY s.chosen_surname ASC, s.chosen_name ASC  
LIMIT 0,10 
```

（我使用 PHP PDO 执行查询，因此使用 :text 占位符）。

当涉及到父查询中的 WHERE 条件时，我遇到了一些问题。

它在哪里说：

```
... AND (total_pounds>=:lowerPoundLimit and total_pounds<=:upperPoundLimit) 
```

total_pounds 字段是子查询的列结果，但是当我运行查询时，它不断出现：

```
Unknown column 'total_pounds' in 'where clause' 
```

有谁知道解决这个问题？

谢谢

菲尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:05:35.593

`WHERE`问题是在评估子句时别名还不可用。应该通过将子查询从`SELECT`子句移动到如下子句来解决问题`JOIN`：

```
SELECT s.chosen_name, s.chosen_surname, s.regId, s.admission_number, 
       total_pounds.pound_amount as total_pounds,
       available_pounds.pound_amount as available_pounds
FROM TBL_student s
LEFT JOIN
  (SELECT student_id, SUM(pounds_amount) AS pound_amount 
   FROM tbl_pounds_log
   GROUP BY student_id) AS total_pounds
ON total_pounds.student_id = s.admission_number 
LEFT JOIN
  (SELECT student_id, SUM(b.pounds_amount) AS pound_amount
   FROM tbl_pounds_log 
   WHERE b.staff_id=:staffId 
   AND b.action_timestamp>(UNIX_TIMESTAMP()-3600)
   GROUP BY student_id) as available_pounds  
ON available_pounds.student_id = s.admission_number
WHERE ((s.chosen_name LIKE :termOne AND s.chosen_surname LIKE :termTwo) 
        OR (s.chosen_name LIKE :termThree AND s.chosen_surname LIKE :termFour))
    AND (total_pounds.pound_amount >= :lowerPoundLimit 
        AND total_pounds.pound_amount <= :upperPoundLimit) 
GROUP BY s.admission_number 
ORDER BY s.chosen_surname ASC, s.chosen_name ASC  
LIMIT 0,10 
```

似乎也可以编写没有子查询的查询：

```
SELECT s.chosen_name, s.chosen_surname, s.regId, s.admission_number,
       SUM(tp.pounds_amount) AS total_pounds
       SUM(ap.pounds_amount) AS available pounds
FROM tbl_students s
LEFT JOIN tbl_pounds_log tp
ON tp.student_id = s.admission_number
LEFT JOIN tbl_pounds_log ap
ON ap.student_id = tp.student_id
AND ap.staff_id = tp.staff_id
AND ap.staff_id = :staffId
AND ap.action_timestamp = tp.action_timestamp
AND ap.action_timestamp > (UNIX_TIMESTAMP()-3600)
WHERE s.chosen_name LIKE :termOne AND s.chosen_surname LIKE :termTwo
OR s.chosen_name LIKE :termThree AND s.chosen_surname LIKE :termFour
GROUP BY s.admission_number, s.name, s.regId, s.admission_number
HAVING SUM(tp.pounds_amount) BETWEEN upperPoundLimit AND lowerPoundLimit
ORDER BY s.chosen_surname, s.chosen_name
LIMIT 0,10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:23:20.643

尽量避免子查询可能是“真正的”解决方案（可以连接表和 GROUP BY 结果）

无论如何，由于您不能在 WHERE 子句中引用“total_pounds”，因此一个简单的解决方案是重复子查询。这很难看，但也许查询优化器和/或您的服务器的缓存（如果启用）将避免每个子查询执行 2 次...

# javascript - 画布 - 将图像翻转一半

> ID：13932855
> 
> 赞同：2
> 
> 时间：2012-12-18T12:18:49.813
> 
> 标签：javascript, canvas, html5-canvas, image-manipulation

我在画布中有一些图像数据，现在我需要取图像的左半部分，将其翻转并应用到右侧，就像镜像效果一样。

**示例**，由此：

![在此处输入图像描述](../Images/80853c1c95aeb398b00ecb27d8957c58.png)

对此：

![在此处输入图像描述](../Images/a6ef6a0d1d2f30f294a5ea07df19e46a.png)

我做到了这一点（我已经准备好图像数据）：

```
ctx.drawImage(this, 0, 0, 960, 540);
var imgData = ctx.getImageData(0,0,960,540);
// loop through the data and apply mirror ?? 
```

宽度和高度是已知的。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:28:26.560

1.  循环遍历图像数据
2.  如果当前像素在图像的左半边，则将其复制到右侧的位置：

```
for(var y = 0; y < height; y++) {
    for(var x = 0; x < width / 2; x++) { // divide by 2 to only loop through the left half of the image.
        var offset = ((width* y) + x) * 4; // Pixel origin

        // Get pixel
        var r = data[offset];
        var g = data[offset + 1];
        var b = data[offset + 2];
        var a = data[offset + 3];

        // Calculate how far to the right the mirrored pixel is
        var mirrorOffset = (width - (x * 2)) * 4;

        // Get set mirrored pixel's colours 
        data[offset + mirrorOffset] = r;
        data[offset + 1 + mirrorOffset] = g;
        data[offset + 2 + mirrorOffset] = b;
        data[offset + 3 + mirrorOffset] = a;
    }
} 
```

我没有对此进行测试，但它应该（或多或少）工作，或者至少让你知道如何去做。

# c - 比较两个数据结构的值

> ID：13932856
> 
> 赞同：1
> 
> 时间：2012-12-18T12:18:51.500
> 
> 标签：c, data-structures, comparison

我有两个数据结构：

```
typedef struct{
    int a;
    int b;
    int c;
}EVENTS;

EVENTS typeone[20];
EVENTS typetwo[20]; 
```

这些已经填满了。typeone 已被填充到 typeone[5] 和 typetwo 直到 typetwo[8]。

我只想比较 typeone 和 typetwo 的前六个，看看它们的所有成员是否相等。

有没有办法`typeone[1] == typetwo[1]` 基本上比较 [1] 处数据结构内的所有值。有没有一种简短的方法可以做到这一点，还是我必须遍历每个成员并分别比较？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:34:35.867

这是一个[comp.lang.c 常见问题解答](http://c-faq.com/struct/compare.html)。简而言之，不，C 不支持与`==`运算符进行结构比较（常见问题解答中的答案说明了为什么在一般情况下很难做到这一点的几个原因）。您必须编写自己的函数并逐个成员进行比较。正如所指出的，由于访问填充字节时*未指定的行为*`memcmp()`，这**不是**一种保证方式。

 *```
int eventsequal (const EVENTS *const a, const EVENTS *const b)
{
    if (a->a != b->a) return 0;
    if (a->b != b->b) return 0;
    if (a->c != b->c) return 0;
    return 1;
} 
```

然后你的例子`typeone[1] == typetwo[1]`变成

```
if (eventsequal (typeone + 1, typetwo + 1)) {
   /* They're equal. */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:36:39.717

为避免填充问题，您必须单独比较字段。这不必那么可怕：

```
#include <stdbool.h>

bool EVENTS_equal(const EVENTS *e1, const EVENTS *e2)
{
  return e1->a == e2->a && e1->b == e2->b && e1->c == e2->c;
} 
```

然后循环：

```
size_t i;
bool   equal = true;

for(i = 0; i < 6; ++i)
{
  if(!EVENTS_equal(typeone + i, typetwo + i))
  {
    equal = 0;
    break;
  }
} 
```

它实际上并没有那么多代码，当然您可以将循环简单地封装在一个交叉比较两个数组的前*n* 个插槽的函数中。`EVENTS`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:52:28.377

```
 typedef struct{
     int a;
     int b;
     int c;
 }EVENTS;

 #pragma pack(1)
     EVENTS typeone[20];
     EVENTS typetwo[20];
 #pragma pack()

 int equal(EVENTS* v1, EVENTS* v2)
 {
      return 0==memcmp(v1, v2, sizeof(*v1));
 } 
```

注意`#pragma pack(1)`。它确保结构中没有填充字节。这种方式 memcmp 不会尝试比较填充字节，并且比较比逐字段方法快得多，但是在这种情况下，性能不太可能受到不利影响，请采取：

```
 typedef struct{
         char a;
         long b;
     } somestruct;

 #pragma pack(1)
     somestruct foo;
 #pragma pack() 
```

与填充结构相比，检索`foo.b`将需要更多的机器代码，因为它会错过可以使用单个 32 位指令检索的字对齐位置，必须通过四个字节读取来挑选它，然后从这四个部分组装到目标寄存器中。因此，请考虑性能影响。

另外，检查您的编译器是否支持`#pragma pack`. 大多数现代编译器都会这样做，但仍然可能发生异常。*

# php - WAMP 服务器为绿色，但仅获得 404

> ID：13932857
> 
> 赞同：14
> 
> 时间：2012-12-18T12:18:53.303
> 
> 标签：php, mysql, apache, wamp

好的女士们先生们。我有一个相当令人费解的问题。我在工作时在我的 WIN7 机器上安装了 WAMP 服务器，一切正常且花花公子。几个星期没有使用它，因为我被卷入了其他事情。前几天我试图启动它......图标是绿色的，我认为我们很好。然后我尝试打开 localhost 并得到一个 404 错误：

> HTTP 错误 404。未找到请求的资源。

我不知道为什么会这样，我们在 2-3 周前工作得很好，现在什么也没有。你们中是否有人有绿色图标但无法打开任何页面？我到底要去哪里，因为我在这里撞墙了。

提前致谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-18T12:59:34.890

也有可能一些其他服务正在端口 80 上运行（可能是 IIS Express、一些 Torrent 客户端、Skype..）。一个解决方案可能是更改正在监听的端口（正如[Mithun Sen](https://stackoverflow.com/users/1754171/mithun-sen)所说）。

所以改变 Wamp 监听的端口：

*   点击 Wamp 服务器 -> Apache -> httpd.conf
*   更改`Listen 80`为其他内容，例如：`Listen 81`
*   我也会`ServerName localhost:80`改为`ServerName localhost:81`

如果你已经这样做了，并且保存了 httpd.conf，你必须重新启动 Wamp 服务器。然后`localhost:81`用作您的根网址。

所以网址看起来像

```
localhost:81/phpmyadmin
localhost:81/mysite_directory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T20:42:55.357

对我来说，我所要做的就是点击 WAMP 图标，然后点击“Put Online”，它就上线了。那里的其他人也可能是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:38:19.263

尝试更改端口：

单击 wamp 图标 -> Apache -> httpd.conf 将“Listen 80”更改为“Listen 81”。

重新启动 Wamp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T09:11:12.393

检查端口 80 是否正在被任何其他服务使用。在我的情况下，图标为棕色，服务器在线且`apache`服务未启动。

这是我为修复它所做的：

在我的情况下`"Web Deployment Agent Service"`，使用端口阻止 apache 使用它。

停止服务并在属性中将其启动类型更改为“手动”，默认为“自动”，这样可以避免问题再次发生。

请在以下链接中找到有关如何查找和停止服务的更多详细信息： [https ://stackoverflow.com/a/35252219/5894548](https://stackoverflow.com/a/35252219/5894548)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-30T21:41:30.103

以防万一其他人有同样的问题，我将发布我如何解决我的问题。

我最近想将我在 WAMP 中的 PHP 更新到更新的版本。当这不起作用时，我只是决定用更新的 PHP 版本下载更新版本的 WAMP。下载并安装所有 Visual C++ 包后，我安装了新的 WAMP。我还下载了新版本的 Joomla，并将文件放在 wamp/www/ 目录中。我打开了 WAMP，获得了绿灯，然后尝试安装新的 Joomla。当我输入 URL：[http://localhost/joomla/installation/index.php](http://localhost/joomla/installation/index.php)时，找不到该文件。我没有注意到我下载的新 WAMP 文件名为“wamp64”。我把joomla文件从wamp/www/中取出，放到wamp64/www/中，最后找到了安装文件。

也许这条信息可以避免其他人拔掉他们的头发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-06T14:34:19.593

如果您收到
HTTP 错误 404。未找到请求的资源。
甚至 Wampserver 灯是绿色的 检查您的端口 80 可能它正在被其他服务使用。
所以你应该这样做；

1- 单击 Wampserver 转到 Apache -> httpd.conf
2- 找到 Listen 80 并将其更改为 Listen 8080
3- 保存 .txt 文件并重新启动 Wampserver

注意：如果在端口号为 Listen 8080

1-再次更改端口号（如 Listen 8081 并重新启动所有服务）时重新启动计算机后遇到同样的问题，然后单击 LocalHost。
2-如果页面再次打开很好，但是如果您遇到错误，则将端口号更改回 Listen 8080 并重新启动它，您将看到它可以工作..

* * *

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-18T20:03:12.287

我的问题是文件实际上并不存在。

自从我从 32 位升级到 64 位时，我遇到了这个问题。

我的所有文件都在`Wamp`其中，而`localhost`在`Wamp64`.

所以，我所做的只是将文件从`Wamp/www -> Wamp64/www`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-07T00:22:29.803

我遇到了同样的问题，我通过将 Apache 端口从 80 更改为 81 来修复它：

[![在此处输入图像描述](../Images/af2fc9fc44254e762c4c0a42ceb8cf49.png)](https://i.stack.imgur.com/LIEvW.png)

您不必使用 81。只要确保它不是 80 并且您使用的是免费的端口，而不是您已经在使用的端口。

[![在此处输入图像描述](../Images/5fc0755c670148833f91e45c50aed399.png)](https://i.stack.imgur.com/AXX1E.png)

我认为在我的情况下，问题是在我安装 Microsoft SQL Server 2012 时开始的，我认为某个服务或其他东西占用了端口 80，然后当 Apache 尝试使用它时，该端口已经被占用。幸运的是，只需使用不同的端口即可轻松解决。

确保最后重新启动 Apache。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-03-23T06:57:00.573

[![在此处输入图像描述](../Images/177b32ae3de8125a83a103746bd847d1.png)](https://i.stack.imgur.com/bjn4m.png)

检查端口，它可能不是 80

# php - 我可以在哪里放置 SELECT @rank:=0 在这个查询中

> ID：13932858
> 
> 赞同：1
> 
> 时间：2012-12-18T12:18:59.497
> 
> 标签：php, mysql, sql, variables

我需要放在`set @rank:=0;`这个查询中，但我可以把它放在哪里？

```
SELECT @rank:=@rank+1 AS rank, p.* FROM points p 
inner join distributor d 
on p.distributor_id=d.id_distributor 
where p.month='$prev_month' 
and d.group='$dist_group' 
ORDER BY p.tot_point DESC 
```

我必须`mysql_query("set @rank:=0;");`在主查询之前使用，它的工作原理。但在另一台服务器上它不会工作。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:30:32.177

```
SELECT @rank:=@rank+1 AS rank, p.* FROM points p, (SELECT @rank:=0) AS dummy
inner join distributor d 
on p.distributor_id=d.id_distributor 
where p.month='$prev_month' 
and d.group='$dist_group' 
ORDER BY p.tot_point DESC 
```

基本上只是`, (SELECT @rank:=0) AS dummy`在`FROM points p`.

我对此查询的首选布局：

```
SELECT @rank := @rank + 1 AS rank, p.*
FROM 
    points AS p
  CROSS JOIN 
    (SELECT @rank:=0) AS dummy
  INNER JOIN 
    distributor AS d
      ON p.distributor_id = d.id_distributor 
WHERE p.month = '$prev_month' 
  AND d.group='$dist_group'
ORDER BY p.tot_point DESC ; 
```

# shopify - Shopify 应用程序可以在商店主题内自动注入液体代码吗？

> ID：13932861
> 
> 赞同：9
> 
> 时间：2012-12-18T12:19:09.293
> 
> 标签：shopify, liquid, inject

我正在构建一个 Shopify 应用程序，并且我有兴趣将液体内容自动添加到商店的主题中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T15:34:48.110

具有 .liquid 扩展名的文件被视为资产。既然您可以将资产添加到商店，答案是肯定的，您确实可以将 Liquid 模板代码注入到商店的主题中。

如果您使用应用代理，您还可以发送 Shopify Liquid 字符串，Shopify 会在 Shopify 中为您呈现该字符串。很整洁的东西。

# asp.net-ajax - 扩展第二级 Infragistics WebHierarchicalDataGrid 时，ASP.NET Ajax 客户端框架加载失败

> ID：13932867
> 
> 赞同：0
> 
> 时间：2012-12-18T12:19:28.363
> 
> 标签：asp.net-ajax, infragistics

我想我阅读了有关此错误的所有 Infragistics 和 StackOverflow 帖子，但我无法确定我的问题。我正在使用：

Infragistics4, v11.2 Visual Studio 2012 及其 IIS DotNetNuke 6.1 我有一个三层分层网格。扩展第一级时没有问题。这是一些代码

```
public void Page_Init(object sender, System.EventArgs e)
{
  this.reportGrid.RowIslandsPopulating += (s, arg) => reportGrid_RowIslandsPopulating(s, arg);
  this.reportGrid.PreRender += (s, arg) => reportGrid_PreRender(s, arg);
  this.reportGrid.InitializeRow += (s, arg) => reportGrid_InitializeRow(s, arg);
}

protected void Page_Load(object sender, System.EventArgs e)
{
   if (IsPostBack)
   {

     if (AppSettings.IsAjaxPostBack)
     {
       reportGrid.DataSource = report.Universities;
       reportGrid.DataBind();
     }
     else
    {
      DoSearch();
     }
} 

void reportGrid_RowIslandsPopulating(object sender, ContainerRowCancelEventArgs e)
{
  e.Cancel = true;
  switch (e.Row.Level)
  {
    case 0:
      BindSecondLevel(e);
      break;
    case 1:
      BindThirdLevel(e);
      break;
  }
}

void reportGrid_InitializeRow(object sender, RowEventArgs e)
{
  if (((ContainerGridRecord)e.Row).Level < 2)
     ((ContainerGridRecord)e.Row).IsEmptyParent = true;
}

private void BindSecondLevel(ContainerRowCancelEventArgs e)
{
  var child = new ContainerGrid();
  e.Row.RowIslands.Add(child);
  child.Level = 1;
  child.AutoGenerateColumns = false;
  child.DataKeyFields = "DisciplineID";
  child.Columns.Add(new BoundDataField(false) { Key = "DisciplineID", DataFieldName = "DisciplineID", Hidden = true });
  child.Columns.Add(new BoundDataField(false) { Key = "Name", DataFieldName = "Name" });
  child.ViewStateMode = System.Web.UI.ViewStateMode.Disabled;

  child.DataSource = someDisciplines;
  child.DataBind();
} 
```

当我单击第二级展开按钮时，它会抛出：

脚本块中第 22 行第 34 列未处理的异常

0x800a139e - Microsoft JScript 运行时错误：无法加载 ASP.NET Ajax 客户端框架

EDIT1：我发现扩展第二级行时AppSettings.IsAjaxPostBack等于false，但是扩展第一级行时等于true

EDIT2：web.config

```
<system.webServer>
        <modules>
            <add name="Compression" type="DotNetNuke.HttpModules.Compression.CompressionModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="RequestFilter" type="DotNetNuke.HttpModules.RequestFilter.RequestFilterModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="UrlRewrite" type="DotNetNuke.HttpModules.UrlRewriteModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="Exception" type="DotNetNuke.HttpModules.Exceptions.ExceptionModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="UsersOnline" type="DotNetNuke.HttpModules.UsersOnline.UsersOnlineModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="DNNMembership" type="DotNetNuke.HttpModules.Membership.MembershipModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="Personalization" type="DotNetNuke.HttpModules.Personalization.PersonalizationModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="Analytics" type="DotNetNuke.HttpModules.Analytics.AnalyticsModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="ClientDependencyModule" type="ClientDependency.Core.Module.ClientDependencyModule, ClientDependency.Core" preCondition="managedHandler"/>
            <add name="MobileRedirect" type="DotNetNuke.HttpModules.MobileRedirectModule, DotNetNuke.HttpModules" preCondition="managedHandler"/>
            <add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule, Telerik.Web.UI" preCondition="managedHandler"/>
        </modules>
        <handlers>
            <add name="LogoffHandler*" path="Logoff.aspx" verb="*" type="DotNetNuke.Services.Authentication.LogOffHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="RSSHandler" path="RSS.aspx" verb="*" type="DotNetNuke.Services.Syndication.RssHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="LinkClickHandler" path="LinkClick.aspx" verb="*" type="DotNetNuke.Services.FileSystem.FileServerHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="CaptchaHandler" path="*.captcha.aspx" verb="*" type="DotNetNuke.UI.WebControls.CaptchaHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="UserProfilePageHandler" path="User.aspx" verb="*" type="DotNetNuke.Services.UserProfile.UserProfilePageHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="RadProgressHandler" verb="*" path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.Upload.RadUploadProgressHandler, Telerik.Web.UI" preCondition="integratedMode"/>
            <add name="ClientDependencyHandler" verb="*" path="DependencyHandler.axd" type="ClientDependency.Core.CompositeFiles.CompositeDependencyHandler, ClientDependency.Core" preCondition="integratedMode"/>
            <add name="Telerik.Web.UI.WebResource" verb="*" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" preCondition="integratedMode"/>
            <add name="Telerik.Web.UI.ChartHttpHandler" verb="*" path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler, Telerik.Web.UI, Culture=neutral, PublicKeyToken=121fae78165ba3d4"/>
            <add name="SitemapHandler" path="Sitemap.aspx" verb="*" type="DotNetNuke.Services.Sitemap.SitemapHandler, DotNetNuke" preCondition="integratedMode"/>
            <add name="HtmTemplateFileHandler" verb="*" path="*.htmtemplate" type="DotNetNuke.HtmlEditor.TelerikEditorProvider.HtmTemplateFileHandler, DotNetNuke.HtmlEditor.TelerikEditorProvider" preCondition="integratedMode"/>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <remove name="ScriptHandlerFactory"/>
            <remove name="ScriptHandlerFactoryAppServices"/>
            <remove name="ScriptResource"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        </handlers>
        <validation validateIntegratedModeConfiguration="false"/>
    </system.webServer>
<system.web>

        <!-- HttpModules for Common Functionality -->
        <httpModules>
            <!-- add name="Authentication" type="DotNetNuke.HttpModules.AuthenticationModule, DotNetNuke.HttpModules.Authentication" / -->
            <add name="Compression" type="DotNetNuke.HttpModules.Compression.CompressionModule, DotNetNuke.HttpModules"/>
            <add name="RequestFilter" type="DotNetNuke.HttpModules.RequestFilter.RequestFilterModule, DotNetNuke.HttpModules"/>
            <add name="UrlRewrite" type="DotNetNuke.HttpModules.UrlRewriteModule, DotNetNuke.HttpModules"/>
            <add name="Exception" type="DotNetNuke.HttpModules.Exceptions.ExceptionModule, DotNetNuke.HttpModules"/>
            <add name="UsersOnline" type="DotNetNuke.HttpModules.UsersOnline.UsersOnlineModule, DotNetNuke.HttpModules"/>
            <add name="DNNMembership" type="DotNetNuke.HttpModules.Membership.MembershipModule, DotNetNuke.HttpModules"/>
            <add name="Personalization" type="DotNetNuke.HttpModules.Personalization.PersonalizationModule, DotNetNuke.HttpModules"/>
            <add name="Analytics" type="DotNetNuke.HttpModules.Analytics.AnalyticsModule, DotNetNuke.HttpModules"/>
            <add name="ClientDependencyModule" type="ClientDependency.Core.Module.ClientDependencyModule, ClientDependency.Core"/>
            <add name="MobileRedirect" type="DotNetNuke.HttpModules.MobileRedirectModule, DotNetNuke.HttpModules"/>
            <add name="RadUploadModule" type="Telerik.Web.UI.RadUploadHttpModule, Telerik.Web.UI"/>
        </httpModules>
        <httpHandlers>
            <!-- This is for CAPTCHA support -->
            <add verb="*" path="*.captcha.aspx" type="DotNetNuke.UI.WebControls.CaptchaHandler, DotNetNuke"/>
            <!-- This is for Serving files, secure, insecure, from database -->
            <add verb="*" path="LinkClick.aspx" type="DotNetNuke.Services.FileSystem.FileServerHandler, DotNetNuke"/>
            <!-- This adds syndication support -->
            <add verb="*" path="RSS.aspx" type="DotNetNuke.Services.Syndication.RssHandler, DotNetNuke"/>
            <!-- This adds legacy support for the Logoff page -->
            <add verb="*" path="Logoff.aspx" type="DotNetNuke.Services.Authentication.LogOffHandler, DotNetNuke"/>
            <!-- ASP.NET AJAX support -->
            <add path="User.aspx" verb="*" type="DotNetNuke.Services.UserProfile.UserProfilePageHandler, DotNetNuke"/>
            <add verb="*" path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.Upload.RadUploadProgressHandler, Telerik.Web.UI"/>
            <add verb="*" path="DependencyHandler.axd" type="ClientDependency.Core.CompositeFiles.CompositeDependencyHandler, ClientDependency.Core"/>
            <add verb="*" path="DependencyHandler.axd" type="ClientDependency.Core.CompositeFiles.CompositeDependencyHandler, ClientDependency.Core "/>
            <add verb="*" path="Telerik.Web.UI.WebResource.axd" validate="false" type="Telerik.Web.UI.WebResource, Telerik.Web.UI"/>
            <add verb="*" path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler, Telerik.Web.UI, Culture=neutral, PublicKeyToken=121fae78165ba3d4" validate="true"/>
            <add verb="*" path="Sitemap.aspx" type="DotNetNuke.Services.Sitemap.SitemapHandler, DotNetNuke"/>
            <add verb="*" path="*.htmtemplate" type="DotNetNuke.HtmlEditor.TelerikEditorProvider.HtmTemplateFileHandler, DotNetNuke.HtmlEditor.TelerikEditorProvider"/>
        </httpHandlers>
...
</system.web> 
```

EDIT3：第二级的扩展也不适用于清晰的网站（我的意思不是DotNetNuke）

Edit4：我附上了一个样本 [http://ckpi-bg.com/sample.rar](http://ckpi-bg.com/sample.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:37:27.477

我发现了问题。它是 EnableViewState = False。我无法向自己解释为什么在 EnableViewState = False 时扩展第一级有效，但第二级无效。

# mysql - 如何在IOS中点击按钮导航？

> ID：13932868
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:19:28.887
> 
> 标签：mysql, xcode, ios6

我是 iphone 开发的新手。

我正在使用用户名和密码创建简单的登录应用程序。

成功登录后，我想将 UI 导航到另一个 UI。

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:26:12.230

如果您使用的是 UINavigation 控制器

```
[self.navigationController pushViewController:viewControllerObj animated:YES]; 
```

如果您使用故事板

```
[self performSegueWithIdentifier:@"identifier" sender:self]; 
```

# spring - Cloudfoundry 未获取弹簧配置文件的问题

> ID：13932870
> 
> 赞同：0
> 
> 时间：2012-12-18T12:19:33.987
> 
> 标签：spring, cloud-foundry

我在让 spring 配置文件与 cloudfoundry 一起工作时遇到问题。我的个人资料没有被 cloudfoundry 的 tomcat 拾取...

这是我的**web.xml**：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="3.0" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" metadata-complete="true">
    <display-name>kadjoukor</display-name>
    <description>Roo generated kadjoukor application</description>
    <!-- Enable escaping of form submission contents -->
    <context-param>
        <param-name>defaultHtmlEscape</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>contextConfigLocation</param-name>

    <param-value>classpath*:META-INF/spring/applicationContext*.xml classpath:META-INF/cloud/cloudfoundry-auto-reconfiguration-context.xml</param-value></context-param>
    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter>
        <filter-name>HttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>HttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>Spring OpenEntityManagerInViewFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>
    <listener>
        <listener-class>
            org.springframework.security.web.session.HttpSessionEventPublisher
        </listener-class>
    </listener>
    <!-- Handles Spring requests -->
    <servlet>
        <servlet-name>kadjoukor</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>

        <param-value>WEB-INF/spring/webmvc-config.xml classpath:META-INF/cloud/cloudfoundry-auto-reconfiguration-context.xml</param-value></init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>kadjoukor</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>30</session-timeout><!-- TODO -->
    </session-config>
<context-param><param-name>contextInitializerClasses</param-name><param-value>org.cloudfoundry.reconfiguration.spring.CloudApplicationContextInitializer</param-value></context-param></web-app> 
```

这是**WEB-INF/libs**目录的内容：

```
activation-1.1.1.jar                     67.8K
antlr-2.7.6.jar                         433.0K
aopalliance-1.0.jar                       4.4K
asm-3.3.1.jar                            42.6K
aspectjrt-1.7.0.RC1.jar                 113.5K
aspectjweaver-1.7.0.RC1.jar               1.7M
auto-reconfiguration-0.6.5.jar          693.3K
cglib-2.2.2.jar                         280.5K
cglib-nodep-2.2.2.jar                   319.3K
commons-beanutils-1.8.3.jar             226.6K
commons-codec-1.5.jar                    71.4K
commons-collections-3.2.1.jar           561.9K
commons-dbcp-1.3.jar                    145.3K
commons-digester-2.1.jar                192.2K
commons-fileupload-1.2.2.jar             58.2K
commons-io-2.1.jar                      159.3K
commons-lang3-3.1.jar                   308.4K
commons-logging-1.0.4.jar                37.1K
commons-pool-1.5.6.jar                   98.1K
dom4j-1.6.1.jar                         306.5K
ehcache-core-2.6.0.jar                    1.3M
flexjson-2.1.jar                         79.2K
guava-11.0.2.jar                          1.6M
hamcrest-core-1.1.jar                    74.8K
hibernate-commons-annotations-3.2.0.Final.jar      69.6K
hibernate-core-3.6.9.Final.jar            3.0M
hibernate-entitymanager-3.6.9.Final.jar     416.3K
hibernate-jpa-2.0-api-1.0.1.Final.jar     100.3K
hibernate-validator-4.2.0.Final.jar     358.0K
httpclient-4.1.2.jar                    344.0K
httpcore-4.1.2.jar                      177.0K
imgscalr-lib-4.2.jar                     27.2K
jackson-core-asl-1.9.9.jar              226.7K
jackson-mapper-asl-1.9.9.jar            762.0K
java-xmlbuilder-0.4.jar                  18.1K
javassist-3.12.0.GA.jar                 618.5K
javassist-3.16.1-GA.jar                 643.9K
javax.inject-1.jar                        2.4K
jcl-over-slf4j-1.6.4.jar                 16.9K
jets3t-0.9.0.jar                        527.1K
jmimemagic-0.1.2.jar                     44.5K
joda-time-2.1.jar                       557.1K
jsr305-1.3.9.jar                         32.2K
jstl-api-1.2.jar                         29.8K
jstl-impl-1.2.jar                       382.8K
jta-1.1.jar                              14.7K
junit-dep-4.8.2.jar                     213.2K
log4j-1.2.16.jar                        470.2K
mail-1.4.3.jar                          451.3K
mysema-commons-lang-0.2.4.jar            11.8K
mysql-connector-java-5.1.18.jar         771.4K
ognl-3.0.5.jar                          222.5K
oro-2.0.8.jar                            63.7K
prettytime-1.0.8.Final.jar               65.4K
querydsl-core-2.9.0.jar                 367.3K
querydsl-jpa-2.9.0.jar                   93.3K
slf4j-api-1.6.4.jar                      25.4K
slf4j-log4j12-1.6.4.jar                   9.5K
spring-aop-3.2.0.RELEASE.jar            327.0K
spring-aspects-3.2.0.RELEASE.jar         68.2K
spring-beans-3.2.0.RELEASE.jar          590.6K
spring-context-3.2.0.RELEASE.jar        834.0K
spring-context-support-3.2.0.RELEASE.jar     124.1K
spring-core-3.2.0.RELEASE.jar           842.8K
spring-data-commons-core-1.3.0.RELEASE.jar     215.0K
spring-data-jpa-1.1.0.RELEASE.jar       129.8K
spring-expression-3.2.0.RELEASE.jar     189.2K
spring-jdbc-3.2.0.RELEASE.jar           391.6K
spring-js-resources-2.2.1.RELEASE.jar       4.3M
spring-orm-3.2.0.RELEASE.jar            383.0K
spring-security-acl-3.1.2.RELEASE.jar      77.7K
spring-security-config-3.1.2.RELEASE.jar     198.9K
spring-security-core-3.1.2.RELEASE.jar     332.1K
spring-security-taglibs-3.1.2.RELEASE.jar      20.3K
spring-security-web-3.1.2.RELEASE.jar     245.2K
spring-social-core-1.0.2.RELEASE.jar     113.7K
spring-social-facebook-1.0.2.RELEASE.jar     117.2K
spring-social-web-1.0.2.RELEASE.jar      18.0K
spring-tx-3.2.0.RELEASE.jar             235.3K
spring-web-3.2.0.RELEASE.jar            609.7K
spring-webmvc-3.2.0.RELEASE.jar         621.0K
thymeleaf-2.0.14.jar                    677.9K
thymeleaf-extras-tiles2-1.0.0-beta3-SNAPSHOT.jar      46.7K
thymeleaf-spring3-2.0.14.jar            161.9K
tiles-api-2.2.2.jar                      35.1K
tiles-core-2.2.2.jar                    157.2K
tiles-jsp-2.2.2.jar                      49.6K
tiles-servlet-2.2.2.jar                  58.3K
tiles-template-2.2.2.jar                 23.9K
validation-api-1.0.0.GA.jar              46.3K
xercesImpl-2.7.1.jar                      1.1M
xml-apis-1.0.b2.jar                     106.8K
xmlParserAPIs-2.0.2.jar                  76.6K 
```

上面的列表中似乎**缺少一个 cloudfoundry jar 库。**谁能告诉我那是哪一个？

另外，我做错了什么**可能会阻止弹簧型材工作**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:43:19.403

如果您在类路径上的多个位置（例如两个 jar 文件）中有一个包（或像 /META-INF/cloud 这样的伪包），那么根据类加载器决定加载它们的顺序，它们可以相互隐藏。特别是在使用`classpath:/...`路径加载资源时会发生这种情况。您有时可以使用`classpath*:/...`，但在这种情况下，该选项可能未打开。cloudfoundry 自动配置 jar 包含 /META-INF/cloud 并且它被您的应用程序隐藏。Spring 框架运行时代理将`classpath:/...`路径添加到您的 web.xml，因此除非您想显式添加，否则您`classpath*:/...`可以做的最好的事情是将您拥有的东西移动`/META-INF/cloud`到不同的位置。

# sql-server - TSQL - 检查多条记录的最快方法是什么？

> ID：13932874
> 
> 赞同：8
> 
> 时间：2012-12-18T12:20:00.793
> 
> 标签：sql-server, performance, tsql

有时我需要检查是否*存在至少一条记录*，通常我使用：

```
IF EXISTS (SELECT TOP 1 1 FROM [SomeTable] WHERE [Fields] = [Values]) BEGIN
-- action
END 
```

有没有一种快速的方法来检查是否存在*多个*记录？我可以做类似的事情：

```
IF EXISTS (SELECT 1 FROM [SomeTable] 
                        WHERE [Fields] = [Values] 
                                HAVING Count(*) > 1) 
BEGIN
    -- action
END 
```

但我不确定这是否是最快的方法，因为它将测试集合中的所有记录。有更快的方法吗？

“where”部分可能非常复杂，可能包含多个 AND 和 OR。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T12:46:35.103

SQL Server 通常不会短路聚合查询。有时它可以将查询转换为使用与（[在此处的评论中讨论的](http://sqlblog.com/blogs/andrew_kelly/archive/2007/12/15/exists-vs-count-the-battle-never-ends.aspx)`HAVING COUNT(*) > 0`）相同的计划，但仅此而已。`EXISTS`

查询将`HAVING COUNT(*) > 1` 始终计算所有行，即使理论上它可能会在第 2 行之后停止计数。

考虑到这一点，我会使用

```
IF EXISTS(
  SELECT * FROM (
                 SELECT TOP 2 *
                 FROM [SomeTable] 
                 WHERE [Fields] = [Values] 
) T
HAVING COUNT(*)=2) 
```

迭代器将在`TOP 2`返回第二个行后停止请求行，从而允许内部查询提前短路，而不是全部返回并计算它们。

两个版本的示例计划如下

[![计划](../Images/10a8f954ffad891069d1d087c39e521b.png)](https://i.stack.imgur.com/I5QmU.jpg)

关于评论中的问题

> “你怎么知道哪个最好？是查询成本吗？”

在计划中显示的特定情况下，成本将是一个合理的指示，因为估计的和实际的行数非常准确，并且两个计划非常相似，除了添加了`TOP`迭代器。因此，计划中显示的额外成本完全表示需要扫描（并且可能从磁盘读取）并计算额外数量的行。

在这种情况下，很明显，这只是代表额外的工作。在其他计划中可能不是。添加`TOP 2`可能会显着改变它下面的查询树（例如，不喜欢带有[阻塞迭代器](http://blogs.msdn.com/b/craigfr/archive/2006/06/19/637048.aspx)的计划）

在这种情况下，执行计划中显示的成本可能不是一个可靠的指标。即使在实际执行计划中，显示的成本也是基于估计的，因此仅与那些一样好，即使估计的行数很好，显示的成本仍然只是基于某些建模假设。

SQL Kiwi[在 DBA 网站上的这个最近的回答中很好地说明了这一点](https://dba.stackexchange.com/a/29650)

> 优化器成本估算主要仅对内部服务器有用。它们不是用来评估潜在性能的，即使是在“高水平”。该模型是一种抽象，恰好可以很好地用于其设计的内部目的。估计成本与硬件和配置上的实际执行成本有任何明显相似之处的可能性确实非常小。
> 
> 根据对您来说重要的任何实际问题，选择其他指标来比较性能。

逻辑读取（在 时显示`SET STATISTICS IO ON;`）是一种可以查看的指标，但再次专注于这一点可能会产生误导。测试查询持续时间可能是唯一可靠的方法，但即使这也不是一门精确的科学，因为性能可能会因服务器上的并发活动而异（等待内存授予、可用 DOP、缓存中相关页面的数量）。

最后，它只是归结为获得一个看起来可以有效利用服务器上资源的查询计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:43:30.907

我确信有一些技巧可以让您更快地执行此检查 - 尽管它在很大程度上取决于您的架构（尤其是索引），并且特定检查可能适用于一种情况而不适用于另一种情况。

像下面这样的东西可能对你有用。

```
IF EXISTS (SELECT * FROM [SomeTable] T1
           INNER JOIN [SomeTable] T2
           ON T1.UniqueID <> T2.UniqueID
           WHERE T1.[Fields] = T1.[Values]
           AND T2.[Fields] = T2.[Values]) 
BEGIN
    -- action
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:28:26.897

不要打扰`top`or `select 1`。

```
if exists (select * ...) 
```

一样快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-29T08:17:06.523

我在具有 1900 万条记录的表中使用此解决方案获得了出色的性能：

```
IF EXISTS (
        SELECT '1' FROM (
            SELECT TOP(2) '1' AS 'N'
            FROM TBL_KV3) AS Z
            HAVING COUNT(*) > 1     
            ) 
    SELECT '1'
ELSE
    SELECT '0' 
```

![在此处输入图像描述](../Images/6bc4860f4219f186e897d63bafe83d73.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T12:36:52.663

不确定性能，但您可以使用`CTE`and `COUNT(*)OVER`：

```
WITH Match AS
(
    SELECT t1.*, COUNT(*)OVER(PARTITION BY t1.Fields)AS CountFields
    FROM SomeTable t1
    WHERE t1.Fields=@Values
)
SELECT m1.* 
FROM Match m1
WHERE CountFields >= 2 
```

[**演示**](http://www.sqlfiddle.com/#!6/f011c/2/0)

# eclipse - 在 Scala IDE 中重命名 .scala 文件不会重命名类

> ID：13932878
> 
> 赞同：4
> 
> 时间：2012-12-18T12:20:10.083
> 
> 标签：eclipse, scala, scala-ide

当我通过 Eclipse 重命名 .scala 文件时，类名本身不会被重命名。

这是预期的行为吗？它似乎没有破坏任何东西。

我希望它被重命名，来自 Java 背景，文件名/类名必须彼此相等。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T12:32:13.343

scala 中不需要类名和文件名之间的对应关系。您可以（并且通常会）在每个 scala 文件中定义多种类型。编译器将尝试为每个公共类型创建一个不同的 .class 文件，文件名对应于类型名称，以实现与 java 的互操作性（对于在 java 中没有直接对应关系的复杂或嵌套类型，scalac 将生成 .具有奇怪/损坏名称的类文件...）

关于为什么不强制执行这种通信的一些说明（可能不是完整的列表，只是为了给您一个想法）：

1.  考虑到 scala 的简洁性，这将是一种浪费。`case class Foo(foo:String)`对应于一个完整且有些复杂的java类，但是将它放在自己的文件中似乎很浪费......
2.  它会降低代码的可读性。有时，您定义案例类的层次结构，这些类与（例如）您发送给参与者的各种消息相对应。让他们在一起强调了他们的意图。
3.  通常这是没有意义的。scala 中相对简单的定义，like`trait Fooer {def foo="foo"}`可以转换为各种类似 java 的类型，它们实现了特征的“具有默认实现的接口”性质。对于 scala 语法允许并用于一些常见 scala 模式的嵌套对象/类/类型，这会变得更糟。
4.  有 Scala 语义（特别是密封特征）实际上需要在单个文件中定义多个类（归功于 @DaveGriffith 下面的评论）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:28:34.013

在 scala 中，一个 .scala 文件可以包含许多（公共）类或包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T12:29:42.513

scala 中的文件名不必与文件中的任何类名匹配。您可以在 scala 文件中拥有任意数量的类。包结构也不必与文件夹结构匹配，但建议对齐。

# jekyll - 在 Jekyll 帖子列表中添加广告

> ID：13932879
> 
> 赞同：2
> 
> 时间：2012-12-18T12:20:15.597
> 
> 标签：jekyll

我正在寻找一种方法来做这样的事情：

```
<ul>
    <li class="post"></li>
    <li class="ad"></li>
    <li class="post"></li>
    <li class="post"></li>
    <li class="post"></li>
</ul> 
```

生成帖子列表对我来说不是问题，它将 注入`li.ad`到帖子列表中。

目前，我已经获得了返回所有帖子的基本 for 循环：

```
{% for post in site.posts %}
<li class="post">
    <h1><a href="{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></h1>
    <p>{{ post.summary }}</p>
</li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:00:52.937

结果证明这是完美的——非常感谢[Dave Rupert](http://twitter.com/davatron5000)的帮助。

```
{% for post in site.posts %}

    <li class="post">
        <!-- post stuff -->
    </li>

{% if forloop.first %}

    <li class="ad">
        <!-- ad stuff -->
    </li>

{% endif %}

{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T17:44:06.287

`for`循环有一个`forloop`可以跟踪索引的变量，因此您可以执行以下操作：

```
{% for post in site.posts %}
  {% if forloop.index == 2 %}<li class="ad"><!-- ad stuff --></li>{% endif %}
  <li class="post"><!-- post stuff --></li>
{% endfor %} 
```

# java - java中的图像映射？

> ID：13932882
> 
> 赞同：2
> 
> 时间：2012-12-18T12:20:17.933
> 
> 标签：java, map, imagemap

我正在创建一个小型儿童游戏，其中我在面板中有一张爱尔兰地图，并且会弹出一个问题，要求用户单击某个县。将地图划分为每个县的各个部分的最佳方法是什么？

所以我会随机弹出一个问题，询问“都柏林在哪里？” 然后用户点击都柏林的黑点。

我有一个想法，我将如何处理随机出现的问题（如果没有，我稍后会回来），但是有没有为我的图像分配热点的建议？

![爱尔兰地图](../Images/b9cc032a9a95057ed7bdb8d7ba2e097c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:25:59.827

我假设这是一张图片，并且显示为未重新缩放

这样你就可以

1.  预先计算并记下黑点的文件或数据结构位置（即Photoshop）
2.  当用户点击获取坐标时
3.  找到一个最近的黑点指向用户点击

UPD：通过第 1 步，您可以为每个黑点确定一些精度半径。如果点击的点不在最近黑点的精度半径范围内，您可以要求用户澄清。

UPD2：提高准确性的另一种方法是记住每个黑点的区域颜色。如果单击点的颜色与最近黑点区域的颜色不同，则要求用户再次单击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:34:58.177

您可以将地图矢量化，以便将每个县定义为多边形。有一些常用算法可以确定一个点是否在多边形内。但是有些形状非常复杂，所以这可能需要很多工作。

当您想要保持栅格化方法时，您可以将每个县的图形放在单独的图像对象中，并让每个县在点击时做出反应。当用户点击面板时，首先确定点击所在的所有这些子图形（它们会重叠，所以可以有多个）。然后检查每个子图形中单击的像素是否透明。当它不透明时，用户点击了那个县。

当您将每个县作为单独的图形时，您可以与它们一起玩很多其他游戏。就像拼图游戏或显示形状一样，用户必须猜测它是哪个县。不过，我不知道您是否会为此获得报酬。

# visual-studio-2005 - 在 Visual Studio 2005 项目中使用 microsoft reportviewer 11

> ID：13932886
> 
> 赞同：1
> 
> 时间：2012-12-18T12:20:41.187
> 
> 标签：visual-studio-2005, reportviewer

我正在使用带有 Visual Studio 2005 的报告查看器版本 8，在开发环境中工作正常，但在共享主机环境中它给出错误“文件尚未预编译，无法请求”。我猜这是因为主机服务器支持报告查看器版本 11。

是否可以在 Visual Studio 2005 项目中使用报告查看器版本 11？还有其他解决方法吗？

# c# - FEZ 触摸驱动程序总是返回相同的 X 和 Y 坐标

> ID：13932887
> 
> 赞同：1
> 
> 时间：2012-12-18T12:20:44.117
> 
> 标签：c#, .net, pandaboard

我使用 FEZ_Components.FEZTouch 控件，当触摸屏幕时，我总是收到相同的坐标：

239,319

知道我在做什么错吗？

编辑

经过一些调试，我发现`while (!terminateTouchThread)`循环中的代码总是返回 x=0 和 y=0。然后，在该`'Calibrate'`部分中，它总是使那些 0,0 值中的 239,319

# python - python文字二进制到十六进制转换

> ID：13932893
> 
> 赞同：2
> 
> 时间：2012-12-18T12:21:08.900
> 
> 标签：python, binary, hex

我有一个包含一系列位的文本文件，在 ascii 中：

```
cat myFile.txt
0101111011100011001... 
```

我想以二进制模式将此写入另一个文件，以便我可以在十六进制编辑器中读取它。我怎么能做到这一点？我已经尝试使用以下代码对其进行转换：

```
f2=open(fileOut, 'wb')
    with open(fileIn) as f:
      while True:
            c = f.read(1)
            byte = byte+str(c)
            if not c:
                print "End of file"
                break
            if count % 8 is 0:
                count = 0 
                print hex(int(byte,2))
                try:
                    f2.write('\\x'+hex(int(byte,2))[2:]).zfill(2)
                except:
                     pass
                byte = ''
            count += 1 
```

但这并没有达到我的计划。你有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:41:30.087

*   一次读取和写入一个字节非常缓慢。`f.read`只需在每次调用and时从文件中读取更多数据，您就可以将代码加速约 45 倍`f.write`：

    ```
    |------------------+--------------------|
    | using_loop_20480 | 8.34 msec per loop | 
    | using_loop_8     | 354 msec per loop  |
    |------------------+--------------------| 
    ```

    `using_loop`是本文底部显示的代码。`using_loop_20480`是 chunksize = 1024*20 的代码。这意味着一次从文件中读取 20480 个字节。`using_loop_1`与 chunksize = 1 的代码相同。

*   关于`count % 8 is 0`：不要`is`用来比较数值；改为使用`==` 。以下是一些示例，为什么`is`可能会给您错误的结果（可能不在您发布的代码中，但总的来说，`is`这里不合适）：

    ```
    In [5]: 1L is 1
    Out[5]: False

    In [6]: 1L == 1
    Out[6]: True

    In [7]: 0.0 is 0
    Out[7]: False

    In [8]: 0.0 == 0
    Out[8]: True 
    ```

*   代替

    ```
    struct.pack('{n}B'.format(n = len(bytes)), *bytes) 
    ```

    你可以使用

    ```
    bytearray(bytes) 
    ```

    它不仅打字少，而且速度也快了一点。

    ```
    |------------------------------+--------------------|
    |             using_loop_20480 | 8.34 msec per loop |
    | using_loop_with_struct_20480 | 8.59 msec per loop |
    |------------------------------+--------------------| 
    ```

    [字节数组](http://dabeaz.blogspot.com/2010/01/few-useful-bytearray-tricks.html)非常适合这项工作，因为它弥合了将数据视为字符串和数字序列之间的差距。

    ```
    In [16]: bytearray([97,98,99])
    Out[16]: bytearray(b'abc')

    In [17]: print(bytearray([97,98,99]))
    abc 
    ```

    正如您在上面看到的，`bytearray(bytes)`允许您通过传递一个整数序列 (in `range(256)`) 来定义字节数组，并允许您将其写出来，就好像它是一个字符串：`g.write(bytearray(bytes))`。

* * *

```
def using_loop(output, chunksize):
    with open(filename, 'r') as f, open(output, 'wb') as g:
        while True:
            chunk = f.read(chunksize)
            if chunk == '':
                break
            bytes = [int(chunk[i:i+8], 2)
                     for i in range(0, len(chunk), 8)]
            g.write(bytearray(bytes)) 
```

确保 chunksize 是 8 的倍数。

* * *

这是我用来创建表的代码。请注意，[prettytable](http://code.google.com/p/prettytable/)也做了类似的事情，建议使用他们的代码而不是我的 hack：[table.py](https://gist.github.com/4330910)

这是我用来计时代码的模块：[utils_timeit.py](https://gist.github.com/4330933)。（它使用 table.py）。

这是我用来计时的代码`using_loop`（和其他变体）：[timeit_bytearray_vs_struct.py](https://gist.github.com/4330943)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:38:27.080

使用[`struct`](http://docs.python.org/2/library/struct.html)：

```
import struct
...
f2.write(struct.pack('b', int(byte,2))) # signed 8 bit int 
```

或者

```
f2.write(struct.pack('B', int(byte,2))) # unsigned 8 bit int 
```

# php - 处理非常大的上传

> ID：13932894
> 
> 赞同：0
> 
> 时间：2012-12-18T12:21:10.933
> 
> 标签：php, http, upload, ftp

> **可能重复：**
> [使用 PHP 上传的非常大的文件](https://stackoverflow.com/questions/864570/very-large-uploads-with-php)

这里的第一个问题！我见过一些类似的话题，但从来没有遇到过完全相同的问题。

我目前正在管理一个大学校园服务器，其目标是允许学生上传和下载各种文件。目前，如果文件大于 1.5GB 左右，上传将失败。这可能是因为我们目前使用的是 http 协议，起初，我完全赞成切换到 ftp，但我最近了解到它与浏览器相关得多（大多数不允许上传大于 4GB...）。

唯一的当务之急是允许在浏览器上上传，而不使用外部应用程序。使用小程序是唯一的选择吗？是否可以避免使用 Java 或 Silverlight 小程序（如果可能，我想阻止用户收到“您需要将 X 安装到 Y”或“您是否允许 X 使用 Y”消息）。也许闪光？或者您可以告诉我标准的 http 或 ftp 可以让您更加放心？我说的是非常大的文件（10GB 将是一个不错的上限）。

我当然已经删除了任何 php 相关的限制。

非常感谢您提供任何信息或评论；）

# oracle - 调整以下 Sql 查询

> ID：13932895
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:21:17.400
> 
> 标签：oracle, database-performance, performance

我有一个旧版本 Oracle 8.1.7 的数据库，我一直在运行以下联合查询

```
select c_ordine_es
         ,c_ordine_salesnet
         ,v_oyov
         ,v_annuale
         ,v_oneoff
         ,v_canone
         ,c_operatore_tam
     from v_ordine_cliente_easysell

    where d_ultima_modifica>DataRif
    union
   select c_ordine_es
         ,c_ordine_salesnet
         ,v_oyov
         ,v_annuale
         ,v_oneoff
         ,v_canone
         ,c_operatore_tam
     from v_ordine_cliente_easysell v
         ,scarti_interfaccia_easysell_o s
    where s.c_codice_es=v.c_ordine_es
      and s.t_tabella_es=pkType.K_SCARTO_ORDINE_CLIENTE; 
```

每次我运行这些查询时，SQL 客户端（我正在使用 Toad）都会挂起。在这里我必须提到数据`v_ordine_cliente_easysell`，`scarti_interfaccia_easysell_o`这两个视图/同义词是使用 DB Link（到另一个 SIEBEL DB）获取的。我想问题是在通过 DB_LINK 获取数据时发生的，因为 SIEBEL DB 一直很忙。请您建议我如何调整上述查询？

解释计划如下

```
操作选项 OBJECT_NODE 位置成本基数字节
选择声明 28 28 478912 61779648
哈希连接 1 28 478912 61779648
索引快速全扫描 1 2 11354 102186
远程 SIEB.WORLD 2 23 4218 506160

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:49:40.630

1.  制作 table 的本地副本`v_ordine_cliente_easysell`。
2.  `scarti_interfaccia_easysell_o`制作使用过滤 的表的本地副本`t_tabella_es=pkType.K_SCARTO_ORDINE_CLIENTE`。
3.  在本地副本上运行查询，但使用`UNION ALL`

# ldap - 外部 LDAP 的 Zimbra 登录身份验证错误

> ID：13932900
> 
> 赞同：1
> 
> 时间：2012-12-18T12:21:50.427
> 
> 标签：ldap, zimbra

我正在尝试使用***openLDAP*****的外部 LDAP**登录 Zimbra 。当我使用 Zimbra 管理控制台测试登录身份验证时，测试成功。但我无法使用 Web 客户端登录 Zimbra。收到这样的错误：

 *`The username or password is incorrect. Verify that CAPS LOCK is not on, and then retype the current username and password.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T13:31:45.440

使用像 Username@domain.inc 这样的绑定 DN

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T05:34:34.780

用户名或密码不正确。确认 CAPS LOCK 未打开，然后重新键入当前用户名和密码。*

# php - Magento api：指定的网络服务适配器无效

> ID：13932908
> 
> 赞同：18
> 
> 时间：2012-12-18T12:22:16.087
> 
> 标签：php, api, magento

我需要做些什么才能让 magento 中的 api 正常工作吗？

我在本地安装 (1.7) 上访问 /api/soap/?wsdl 并返回以下错误：

```
Invalid webservice adapter specified. 
```

网站中的所有内容看起来都已启用，但我找不到任何有关使 api 正常工作所需执行的其他步骤的信息。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-10T11:42:55.817

我已经通过关闭这样的 MultiViews 选项从 htaccess 解决了这个问题：

从

```
<Directory /var/www/magento>
            Options Indexes FollowSymLinks MultiViews
</Directory> 
```

到

```
<Directory /var/www/magento>
            Options +Indexes +FollowSymLinks -MultiViews
</Directory> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:46:30.397

如果您想保持与旧 API 调用的兼容性，可以使用不同的方法。`^api/...`由于某种不明原因，我的 Apache 服务器在重写解析期间没有分析字符串。

但是您仍然可以在`http://www.somedomain.com/api/v2_soap?wsdl=1`不更改 Magento PHP 代码的情况下使用。您只需要更改 .htaccess，如下所示：

在 .htaccess 中替换：

`RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]`

经过

`RewriteRule ^api(\.php)?/([a-z][0-9a-z_]+)/?$ api.php?type=$2 [QSA,L]`（请参阅 ^api.php/ 而不是 ^api/）

如果你们中的一些人有`http://www.somedomain.com/api/V2_soap?wsdl=1`（V2_soap 是大写的），甚至更好，你将不得不添加一个`RewriteMap`使用内部 apache 函数来设置小写的参数。将 RewriteMap 添加到您的虚拟主机：

`RewriteMap lc int:tolower`

在 .htaccess 中

`RewriteRule ^api(\.php)?/([a-zA-Z][0-9a-z_]+)/?$ api.php?type=${lc:$2} [QSA,L]`

这将设置为小写 api.php 脚本的参数，并在正则表达式中接受“V2_soap”

最后一部分由[@dreeves 在这个答案中提出](https://stackoverflow.com/a/2924084/469995)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-17T07:17:21.797

我通过编辑我的虚拟主机文件来解决这个问题，*`(/etc/apache2/sites-available/mag.dev.conf)`*如下所示：

```
 <Directory /var/www/mag/mag>
      Options +Indexes +FollowSymLinks -MultiViews
      .....
    </Directory> 
```

现在它正在加载 xml 响应。

平台是 ubuntu 12.04

# c - C中两个日期之间的差异

> ID：13932909
> 
> 赞同：10
> 
> 时间：2012-12-18T12:22:17.570
> 
> 标签：c, date

我是C的初学者。

*   日期是否有任何数据类型？
*   在 C 语言中，我们可以处理时间，是否也有时间处理？
*   如何计算两个日期之间的差异？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T12:33:02.713

是的，标准库[`C Time Library`](http://en.cppreference.com/w/c/chrono)包含您想要的结构和功能。您可以使用它`struct tm`来存储日期并`difftime`获取差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T12:33:44.693

> 保存日期是否有任何数据类型？

不，尽管对于“现在加上或减去几十年”范围内的日期，您可以在相关日期的（例如）午夜使用`time_t`或包含日期时间。`struct tm`或者，您可以研究一个称为“朱利安日”的事物：计算它并将其存储为您喜欢的任何整数类型。

> C也有任何库吗？

标准函数都与日期/时间有关，而不仅仅是日期：`mktime`, `localtime`, `gmtime`.

> 如何计算两个日期之间的差异

将其放入 a 后，`time_t`您可以将两者相减并除以 86400。但请注意，由于夏令时的变化，两个不同日子的“当地时间午夜”可能不是 24 小时的精确倍数。

如果您需要一个超出实施范围的日历，`time_t`那么您基本上只能靠自己了。如果`time_t`是 64 位，那已经超过了宇宙的年龄，但如果`time_t`是 32 位，则对历史没有好处。甚至养老金计划。无论如何，历史应用程序对日历都有自己的要求（儒略历，与公历完全无关的日历）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T12:31:59.693

> 日期是否有任何数据类型？

不，内置数据类型`C`，您必须定义用户定义的数据类型。

> 如何计算两个日期之间的差异？

你可以试试这个：

```
struct dt
{
  int dd;
  int mm;
  int yy;
};
typedef dt date; 
```

在 main() 中，您需要为 type 声明三个变量`data`。
在以下示例`today`差异中，
例如您想要获取当前日期 ( `c_date`) 和出生日期 ( `dob`) 之间的差异

```
 date dob,c_date,today;

  if(c_date.dd>=dob.dd)
    today.dd = c_date.dd-dob.dd;
  else
  {
      c_date.dd+=30;
      c_date.mm-=1;
      today.dd = c_date.dd-dob.dd;
   }
   if(c_date.mm>=dob.mm)
     today.mm = c_date.mm-dob.mm;
   else
   {
      c_date.mm+=12;
      c_date.yy-=1;
      today.mm = c_date.dd-dob.mm;
   }
   today.yy = c_date.yy-dob.yy; 
```

在`today`你有两个日期之间的差异。

还有另一种方法： 阅读此答案： 1.[如何比较格式为“月日期 hh:mm:ss”的两个时间戳](https://stackoverflow.com/questions/15555406/how-to-compare-two-time-stamp-in-format-month-date-hhmmss-to-check-ve-or-v/15556395#15556395) 2.[如何在 C 中找到两个日期之间的时间差异？](https://stackoverflow.com/a/21864664/1673391)[`double difftime (time_t end, time_t beginning);`](http://www.cplusplus.com/reference/ctime/difftime/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-21T11:16:04.287

日期和时间的标准 C 库选项非常糟糕，并且带有警告和限制。如果可能，请使用诸如 Gnome Lib 之类的库，它提供[GDate 和许多有用的日期和时间函数](https://developer.gnome.org/glib/stable/glib-Date-and-Time-Functions.html)。这包括[`g_date_days_between()`](https://developer.gnome.org/glib/stable/glib-Date-and-Time-Functions.html#g-date-days-between)获取两个日期之间的天数。

这个答案的其余部分将自己限制在标准 C 库中，但是如果您不必将自己限制在标准中，请不要折磨自己。约会出奇地难。

* * *

> *日期是否有任何数据类型？*

`struct tm`将服务。只需将小时、分钟和秒数保留为 0。

确保`struct tm`正确填充的所有字段的最简单方法是使用`strptime`.

```
struct tm date;
strptime( "2017-03-21", "%F", &date );

puts( asctime(&date) );  // Mon Mar 21 00:00:00 2017 
```

但这不是存储日期的好方法。事实证明，最好使用 Julian Days（见下文）。

> *在 C 语言中，我们可以处理时间，是否也有时间处理？*

如果您指的是`time_t`，那也适用于日期时间。[它是自 POSIX 系统上 1970-01-01 00:00:00 UTC的“纪元”](https://en.wikipedia.org/wiki/Unix_time)以来的秒数，但不一定是其他系统。不幸的是，它的安全范围只有 1970 到 2037 年，尽管任何最新版本的操作系统都会大大扩展该范围。

> *如何计算两个日期之间的差异？*

取决于你想要什么。如果您想要秒数，您可以将 转换`struct tm`为`time_t`using`mktime`然后使用`difftime`，但这仅限于 1970-2037 年的安全范围`time_t`。

```
int main() {
    struct tm date1, date2;
    strptime( "2017-03-21", "%F", &date1 );
    strptime( "2018-01-20", "%F", &date2 );

    printf("%.0lf\n", difftime(mktime(&date1), mktime(&date2)));
} 
```

如果您想要天数，您[可以将日期转换为儒略天](https://en.wikipedia.org/wiki/Julian_day#Julian_day_number_calculation)数，即自公元前 4714 年 11 月 24 日以来的天数，然后减去。虽然这看起来很荒谬，但这个相对简单的公式利用了日历周期并且只使用整数数学。

```
// The formulas for a and m can be distilled down to these tables.
int Julian_A[12] = { 1, 1, 0 };
int Julian_M[12] = { 10, 11, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };

int julian_day( struct tm *date ) {
    int a = Julian_A[date->tm_mon];
    int m = Julian_M[date->tm_mon];
    int y = date->tm_year + 1900 + 4800 - a;

    return date->tm_mday + ((153*m + 2) / 5) + 365*y + y/4 - y/100 + y/400 - 32045;
}

int main() {
    struct tm date1, date2;
    strptime( "2017-03-21", "%F", &date1 );
    strptime( "2018-01-20", "%F", &date2 );

    // 305 days
    printf("%d days\n", julian_day(&date2) - julian_day(&date1));
} 
```

还有其他简单的公式可以在儒略日期和日历日期之间进行转换。

很难获得年、月和日的差异，因为一个月中的天数因月和年而异，而且必须标准化。例如，您不会说 2 年，-1 个月，2 天。你会说 1 年 11 个月 29 天（或者可能是 28 天，取决于月份）。出于这个原因，尽可能在儒略日做日期数学。

为了了解所涉及的内容，[PHP 将其实现为`date_diff`](https://secure.php.net/manual/en/function.date-diff.php). 看看[需要多少 C 代码](https://github.com/php/php-src/blob/master/ext/date/lib/interval.c)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T12:24:59.037

您可以创建具有以下字段的`struct`命名**日期**

```
typedef struct 
{
 int day;
 int month;
 int year;
}date; 
```

它只是您想要的蓝图，现在制作和对象`date`并相应地工作。要找到差异，请编写一个函数来分别获取两个结构之间的`day` `month`差异`year`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-14T21:57:20.263

您必须定义一个日期结构：

```
typedef struct date {
    int day;
    int month;
    int year;
} Date; 
```

然后定义一个简单的`date_compare()`方法：

```
int date_compare(Date *date1, Date *date2) {

    if (date1->year != date2->year)
        return (date1->year - date2->year);
    if (date1->month != date2->month)
        return (date1->month - date2->month);
    return (date1->day - date2->day);

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-06T13:06:08.433

```
/*  Version 3 (better)
Date Difference between the two dates in days
like VBA function DateDiff("d", date1, date2)
in case of Gregorian. Same basic principle you
can translate in lot of other languages. This
is complete C code with date validity control.
*/

#include<stdio.h>

void main(){
  long d1,m1,y1,d2,m2,y2;
  printf("Enter first date day, month, year\n");
  scanf("%d%d%d",&d1,&m1,&y1);
  printf("Enter second date day, month, year\n");
  scanf("%d%d%d",&d2,&m2,&y2);
  if((IsValid(d1,m1,y1)==0)||(IsValid(d2,m2,y2)==0)){
    printf("Invalid date detected\n");
  }else{
    d1=DatDif(d1,m1,y1,d2,m2,y2);
    printf("\n\n Date difference is %d days\n",d1);
  }
}// end main

long DatDif(d1,m1,y1,d2,m2,y2)
{ long suma;
  suma=rbdug(d2,m2,y2) - rbdug(d1,m1,y1);
  if(y1 != y2){
    if(y1 < y2){
      suma+=Godn(y1,y2);
    }else{
      suma-=Godn(y2,y1);
    }
  }
  return(suma);
}// end DatDif

long Godn(yy1,yy2)
{ long jj,bb;
  bb=0;
  for(jj=yy1;jj<yy2;jj++){
    bb+=365;
    if(((((jj%400)==0)||((jj%100)!=0))
      &&((jj%4)==0))) bb+=1;
  }
  return(bb);
}// end Godn

//Day of the Year
long rbdug(d,m,y)
{ long a,r[13];
  r[1] = 0; r[2] = 31; r[3] = 59;
  r[4] = 90; r[5] = 120; r[6] = 151;
  r[7] = 181; r[8] = 212; r[9] = 243;
  r[10]= 273; r[11]= 304; r[12]= 334;
  a=r[m]+d;
  if(((((y%400)==0)||((y%100)!=0))
      &&((y%4)==0))&&(m>2)) a+=1;
  return(a);
}//end rbdug

//date validity
long IsValid(dd,mm,yy)
{ long v[13];
  if((0 < mm) && (mm < 13)){
    v[1] = 32; v[2] = 29; v[3] = 32;
    v[4] = 31; v[5] = 32; v[6] = 31;
    v[7] = 32; v[8] = 32; v[9] = 31;
    v[10]= 32; v[11]= 31; v[12]= 32;
    if(((((yy%400)==0)||((yy%100)!=0))
      &&((yy%4)==0))) v[2]+=1;
    if((0 < dd) && (dd < v[mm])){
      return(1);
    }else{
      return(0);
    }
  }else{
    return(0);
  }
}//end IsValid 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-20T18:20:35.263

```
/* Version 4 ( 100 % correct):
Proleptic Gregorian date difference in days.
Date Difference between the two dates in days
like VBA function DateDiff("d", date1, date2)
and better (without limitations of DateDiff)
in case of Gregorian. Same basic principle you
can translate in lot of other languages. This
is complete C code with date validity control.
*/

#include<stdio.h>

void main(){
  long d1,m1,y1,d2,m2,y2;
  printf("Enter first date day, month, year\n");
  scanf("%d%d%d",&d1,&m1,&y1);
  printf("Enter second date day, month, year\n");
  scanf("%d%d%d",&d2,&m2,&y2);
  if((IsValid(d1,m1,y1)==0)||(IsValid(d2,m2,y2)==0)){
    printf("Invalid date detected\n");
  }else{
    d1=DatDif(d1,m1,y1,d2,m2,y2);
    printf("\n\n Date difference is %d days\n",d1);
  }
}// end main

long DatDif(d1,m1,y1,d2,m2,y2)
{ long suma;
  suma=rbdug(d2,m2,y2) - rbdug(d1,m1,y1);
  if(y1 != y2){
    if(y1 < y2){
      suma+=Godn(y1,y2);
    }else{
      suma-=Godn(y2,y1);
    }
  }
  return(suma);
}// end DatDif

long Godn(yy1,yy2)
{ long jj,bb;
  bb=0;
  for(jj=yy1;jj<yy2;jj++){
    bb+=365;
    if(IsLeapG(jj)==1) bb+=1;
  }
  return(bb);
}// end Godn

//Day of the Year
long rbdug(d,m,y)
{ long a,r[13];
  r[1] = 0; r[2] = 31; r[3] = 59; r[4] = 90;
  r[5] = 120; r[6] = 151; r[7] = 181; r[8] = 212;
  r[9] = 243; r[10]= 273; r[11]= 304; r[12]= 334;
  a=r[m]+d;
  if((IsLeapG(y)==1)&&(m>2)) a+=1;
  return(a);
}//end rbdug

//date validity
long IsValid(dd,mm,yy)
{ long v[13];
  if((0 < mm) && (mm < 13)){
    v[1] = 32; v[2] = 29; v[3] = 32; v[4] = 31;
    v[5] = 32; v[6] = 31; v[7] = 32; v[8] = 32;
    v[9] = 31; v[10]= 32; v[11]= 31; v[12]= 32;
    if ((mm==2)&&(IsLeapG(yy)==1)) v[2]=30;
    if((0 < dd) && (dd < v[mm])){
      return(1);
    }else{
      return(0);
    }
  }else{
    return(0);
  }
}//end IsValid

//is leap year in Gregorian
long IsLeapG(yr){
  if(((((yr%400)==0)||((yr%100)!=0))&&((yr%4)==0))){
    return(1);
  }else{
    return(0);
  }
}//end IsLeapG 
```

# unix - cURL 按钮单击 POST 问题

> ID：13932916
> 
> 赞同：1
> 
> 时间：2012-12-18T12:22:40.970
> 
> 标签：unix, curl, web-scraping, web-crawler

我正在尝试通过 cURL 执行按钮单击，我遇到的问题可能是由于单击时的 java 脚本。HTML 源代码为：

```
<input id="ctl00_SPWebPartManager1_g_1bb6dc86_55ab_4ea9_a4db_4747922a8202_ctl00_RequestOption_0" class="radio" type="radio" checked="checked" value="1" name="ctl00$SPWebPartManager1$g_1bb6dc86_55ab_4ea9_a4db_4747922a8202$ctl00$RequestOption">
<label for="ctl00_SPWebPartManager1_g_1bb6dc86_55ab_4ea9_a4db_4747922a8202_ctl00_RequestOption_0">    View Summary Data Online</label> 
```

我以这种方式发送命令，但它仍然不执行该单击事件：

```
curl -d "RequestOption_0=1" https://xxx.xxxxx.com/customer-service/rates-pricing/customer-choice/Pages/usage-data.aspx > test20121812.txt 
```

POST应该是怎样的？请注意，我在 Windows 上使用 cURL。谢谢！

# php - Apache 将“返回路径：”重置为 在 PHP 的 mail() 函数中

> ID：13932918
> 
> 赞同：1
> 
> 时间：2012-12-18T12:22:58.943
> 
> 标签：php, email, return-path

以下标头使用 PHP 的 mail() 函数发送：

```
$emailheaders = "From: " . $sender . "\n";
$emailheaders .= "Return-Path: " . $sender . "\n";
$emailheaders .= "MIME-Version: 1.0\n";
$emailheaders .= "Content-type: text/html; charset=UTF-8\r\n";

mail($email, $subject, $body, $emailheaders); 
```

它工作正常，除了`Return-Path:`重置为`nobody@server.com`，或者至少这是在查看使用上述标题接收的电子邮件的扩展标题时显示的内容。这自然意味着不会收到退回的电子邮件。

Apache 是否重置了标头，在这种情况下为什么，或者我使用`mail()`不正确？

我能做些什么来防止这种情况发生。使用`mail()`的第五个参数（例如`-f sender@server.com`）是不可能的，因为 PHP 处于安全模式并且提供者不会改变它。我想尽管安全模式已打开，但没有办法允许某些用户使用第五个参数。

服务器正在运行 Apache 2.2.3 和 PHP 版本 5.1.6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:40:23.707

服务器的邮件传输代理 (MTA) 正在覆盖`return-path`. 例如，如果使用进出口：

`return-path`在`/etc/exim/exim.conf`配置文件中设置：

```
return_path = sender@example.com 
```

如果您无权访问服务器配置或`mail()`第五个参数，那么您可能无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:34:26.417

您正在使用拆分标题，`\n`但根据 PHP，它应该是 \r\n （请参阅[Which line break in php mail header, \r\n or \n?](https://stackoverflow.com/questions/4415654/which-line-break-in-php-mail-header-r-n-or-n)）。

也许这就是标头未正确发送的原因。

# vim - 使用 viEMU 突出显示代码块

> ID：13932922
> 
> 赞同：0
> 
> 时间：2012-12-18T12:23:05.980
> 
> 标签：vim, viemu

我可以知道如何突出显示代码区域，例如

```
public void foo()
{
blah();
blah1();
blah2();
} 
```

我的光标位于 first 的“b”处`blah()`，如何使用 viEmu 或 VIM 本身突出显示整个代码区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:48:44.317

在 Vim 中，这是`va{`（或`va}`，或`vaB`作为同义词）。`v`进入视觉模式，并且是一个选择*Block*的`a{`文本对象。如果您不希望包含大括号，请改用( *inner Block* )。如果你想对块进行操作（例如删除），你可以跳过视觉模式，只使用一个带有动作的命令，例如.*`i{`*`da{`**

# java - 找不到 SpringJUnit4ClassRunner 类

> ID：13932928
> 
> 赞同：22
> 
> 时间：2012-12-18T12:23:26.027
> 
> 标签：java, spring, maven, sts-springsourcetoolsuite

我正在尝试使用 SpringJUnit4ClassRunner 创建一个单元测试，但每次我执行测试时它都说它无法使用 mvn install 找到 SpringJUnit4ClassRunner。

```
\src\test\java\com\jr\freedom\util\JsonParserUtilTest.java:11: cannot find symbol
[ERROR] symbol: class SpringJUnit4ClassRunner
[ERROR] -> [Help 1] 
```

这是我的代码

```
@RunWith(SpringJUnit4ClassRunner.class)
public class JsonParserUtilTest {

    private String jsonUser = "{ \"username\":\"jono111\",\"emailAddress\":\"jon@google.com\", \"password\":\"12345678\",\"firstName\":\"jono\", \"surname\":\"richy\", \"country\":\"united kingdom\",\"bio\":\"Bio stuff goes here about the user. where he comes from etc etc. all is well. lets go go go\" }";

    @Test
    public void testToJsonObject() {

        User user = new User();
        user.setBio("bio mate");
        user.setCountry("uk");
        user.setEmailAddress("jonney@hello.com");
        user.setFirstName("jono");
        user.setPassword("passwordfdsadsa");
        user.setUsername("crazy8");
        JSONObject jsonUser =  JsonPojo.toJsonObject(user);
        assertNotNull(jsonUser);
        assertNotNull(jsonUser.keys());
        System.out.println(jsonUser);

    }

    @Test
    public void testToObject(){
        JSONObject jsonUser = JSONObject.fromObject(jsonUser);
    } 
```

这是我的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>FreedomSpring</groupId>
    <artifactId>FreedomSpring</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.0</version>
                <configuration>
                    <source>1.5</source>
                    <target>1.5</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <!-- specifiy which directory within the project hierarchy will be considered 
                        as the root directory from the generated war file -->
                    <warSourceDirectory>WebContent</warSourceDirectory>
                    <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <!-- Dependencies below for spring, hibernate, json etc -->
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>net.sf.json-lib</groupId>
            <artifactId>json-lib</artifactId>
            <version>2.4</version>
            <classifier>jdk15</classifier>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.1.7.Final</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-mock</artifactId>
            <version>2.0.8</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.2.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.0</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>
    </dependencies>

</project> 
```

我正在使用 springSource 工具套件 IDE 来开发这个 spring mvc 应用程序，并且在 IDE 上它突出显示 SpringJUnit4ClassRunner 作为一个错误，尽管我在我的 pom 文件中包含了所有必要的依赖项，但它无法解决。

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T12:46:08.357

我下载了你的代码并让它在本地工作，只要我包含相关的导入语句：

```
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.junit.runner.RunWith;
import org.junit.Test;
... 
```

也许您在某处缺少导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-10T13:23:28.480

我修复了这个

*   删除我的本地 maven repo (~/.m2/repository) 和
*   在 Eclipse 中强制进行新构建（项目-> 清理...）

[来自 appfuse 论坛](http://appfuse.547863.n4.nabble.com/Maven-not-finding-junit-or-spring-dependencies-td3426778.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-26T15:34:57.047

仅供参考，将其添加到您的 pom.xml

```
 <dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-test</artifactId>
  <scope>test</scope>
</dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-29T11:49:45.380

转到 pom.xml 并确保您的文件包含此依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>5.1.7.RELEASE</version>
</dependency> 
```

还要确保在此依赖项中没有“范围”节点：

```
<scope>test</scope> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-03T13:37:51.027

我不得不将 spring-test jar 放在 Java Build Path 的“TOP” [![构建路径图](../Images/6c2b963781568c75bd0757bc5b103600.png)](https://i.stack.imgur.com/g2qCM.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-20T13:32:17.767

如果您使用的是 linux，请打开终端并执行以下命令。不要忘记在“用户名”所在的地方添加用户

```
cd /home/you-user/.m2/repository/
sudo rm -r junit 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-19T01:49:41.397

也许你丢失了包裹

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-test</artifactId>
  <version>5.1.7.RELEASE</version>
</dependency> 
```

# c - 为什么重定向到文件时 stdout 需要显式刷新？

> ID：13932932
> 
> 赞同：35
> 
> 时间：2012-12-18T12:23:31.207
> 
> 标签：c, linux, stdout

的行为`printf()`似乎取决于 的位置`stdout`。

1.  如果`stdout`被发送到控制台，`printf()`则被行缓冲并在打印换行符后被刷新。
2.  如果`stdout`被重定向到一个文件，缓冲区不会被刷新，除非`fflush()`被调用。
3.  此外，如果`printf()`使用 before`stdout`被重定向到文件，则后续写入（到文件）是行缓冲的，并在换行符之后刷新。

何时进行`stdout`行缓冲，何时`fflush()`需要调用？

### 每个的最小示例：

```
void RedirectStdout2File(const char* log_path) {
    int fd = open(log_path, O_RDWR|O_APPEND|O_CREAT,S_IRWXU|S_IRWXG|S_IRWXO);
    dup2(fd,STDOUT_FILENO);
    if (fd != STDOUT_FILENO) close(fd);
}

int main_1(int argc, char* argv[]) {
    /* Case 1: stdout is line-buffered when run from console */
    printf("No redirect; printed immediately\n");
    sleep(10);
}

int main_2a(int argc, char* argv[]) {
    /* Case 2a: stdout is not line-buffered when redirected to file */
    RedirectStdout2File(argv[0]);
    printf("Will not go to file!\n");
    RedirectStdout2File("/dev/null");
}
int main_2b(int argc, char* argv[]) {
    /* Case 2b: flushing stdout does send output to file */
    RedirectStdout2File(argv[0]);
    printf("Will go to file if flushed\n");
    fflush(stdout);
    RedirectStdout2File("/dev/null");
}

int main_3(int argc, char* argv[]) {
    /* Case 3: printf before redirect; printf is line-buffered after */
    printf("Before redirect\n");
    RedirectStdout2File(argv[0]);
    printf("Does go to file!\n");
    RedirectStdout2File("/dev/null");
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-18T13:07:12.393

Flushing for`stdout`由其缓冲行为决定。缓冲可以设置为三种模式：（完全缓冲：尽可能`_IOFBF`等待）、 （行缓冲：换行触发自动刷新）和（始终使用直接写入）。“对这些特性的支持是由实现定义的，并且可能会受到和函数的影响。” [C99:7.19.3.3]`fflush()``_IOLBF``_IONBF``setbuf()``setvbuf()`

“在程序启动时，三个文本流是预定义的，不需要显式打开——标准输入（用于读取常规输入）、标准输出（用于写入常规输出）和标准错误（用于写入诊断输出）。最初打开时，标准错误流没有被完全缓冲；标准输入和标准输出流被完全缓冲当且仅当可以确定流不引用交互式设备时。” [C99:7.19.3.7]

### 观察到的行为的解释

所以，发生的事情是实现做了一些特定于平台的事情来决定是否`stdout`要进行行缓冲。在大多数 libc 实现中，此测试在第一次使用流时完成。

1.  行为 #1 很容易解释：当流用于交互式设备时，它是行缓冲的，并且`printf()`会自动刷新。
2.  案例 #2 现在也是预期的：当我们重定向到一个文件时，流是完全缓冲的，并且不会被刷新`fflush()`，除非你向它写入 gobloads 的数据。
3.  最后，对于只对底层 fd 执行一次检查的实现，我们也了解案例 #3。因为我们强制 stdout 的缓冲区在 first 中初始化，所以`printf()`stdout 获得了行缓冲模式。当我们将 fd 换出到文件时，它仍然是行缓冲的，因此数据会自动刷新。

### 一些实际的实现

每个 libc 在如何解释这些要求方面都有自由度，因为 C99 没有指定什么是“交互式设备”，[POSIX 的 stdio 条目](http://pubs.opengroup.org/onlinepubs/9699919799/)也没有扩展它（除了要求打开 stderr 以供阅读）。

1.  格利布。请参阅[filedoalloc.c:L111](http://sourceware.org/git/?p=glibc.git;a=blob;f=libio/filedoalloc.c;h=c9b0f01722a1c5b65f4e2df24e951154d133ae21;hb=HEAD#l111)。这里我们`stat()`用来测试 fd 是否为 tty，并相应地设置缓冲模式。（这是从 fileops.c 调用的。）`stdout`最初有一个空缓冲区，它是在第一次使用流时根据 fd 1 的特性分配的。

2.  BSD 库。非常相似，但要遵循更清晰的代码！请参阅[makebuf.c 中的这一行](http://bxr.su/o/lib/libc/stdio/makebuf.c#__swhatbuf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-23T14:47:23.823

您错误地组合了缓冲和非缓冲 IO 功能。这种组合必须非常小心地完成，尤其是当代码必须是可移植的时。（而且编写不可移植的代码是不好的......）
**当然最好避免在同一个文件描述符上组合缓冲和非缓冲 IO。**

**缓冲 IO:** `fprintf()` , `fopen()`, `fclose()`, `freopen()`...

**无缓冲 IO:** `write()` , `open()`, `close()`, `dup()`...

当您使用`dup2()`重定向标准输出时。该函数不知道由 填充的缓冲区`fprintf()`。因此，当`dup2()`关闭旧描述符 1 时，它不会刷新缓冲区，并且内容可能会被刷新到不同的输出。在您的情况下 2a 它被发送到`/dev/null`.

## 解决方案

在您的情况下，最好使用`freopen()`而不是`dup2()`. 这解决了你所有的问题：

1.  它刷新原始`FILE`流的缓冲区。（案例 2a）
2.  它根据新打开的文件设置缓冲模式。（案例3）

这是您的功能的正确实现：

```
void RedirectStdout2File(const char* log_path) {
    if(freopen(log_path, "a+", stdout) == NULL) err(EXIT_FAILURE, NULL);
} 
```

不幸的是，使用缓冲 IO，您无法直接设置新创建文件的权限。您必须使用其他调用来更改权限，或者您可以使用不可移植的 glibc 扩展。见[`fopen() man page`](http://linux.die.net/man/3/fopen)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:43:31.717

您不应该关闭文件描述符，因此如果您希望消息仅在文件中打印，请移除`close(fd)`并关闭。 `stdout_bak_fd`

# vb.net - 绑定到只读字段的 DataGridView 列必须将 ReadOnly 设置为 True

> ID：13932934
> 
> 赞同：4
> 
> 时间：2012-12-18T12:23:37.770
> 
> 标签：vb.net, winforms

我知道这个问题必须有一个简单的解决方案，但我似乎错过了答案。我有一个 Visual Studio 2008 Winforms 应用程序，我在其中创建了一个 datagridview 来向用户显示数据。在 datagridview 我允许用户编辑信息。其中一个单元格设置为只读，用户希望现在能够编辑此信息。当我进入 datagridview 设计器将单元格设置为 Readonly = False 时，不会保存更改。不管我做什么改变都不会被保存。我现在正在考虑使用以下代码在运行时更改它：

当我使用该代码时，我得到了标题中提到的错误。在我看来，我现在被卡住了......我无法使用 Visual Studio 设计器将单元格更改为 readonly = false。我无法在运行时将单元格设置为 readonly = false。

问题：我做错了什么？还有什么我可以做的吗？对于多个用户来说，这是一个相当大的应用程序，这是大多数用户提出的请求。

任何帮助，将不胜感激。

```
Dim oDL As New MTN.BusinessLayer.MasterTables()
Dim dt As DataTable = oDL.GetTheItems() DataGridView1.DataSource = dt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T15:48:15.087

您实际上可以为 DataTable 列设置 ReadOnly 属性！

```
Dim dt As DataTable = oDL.GetTheItems()
dt.Columns("Selected").ReadOnly = false
DataGridView1.DataSource = dt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:48:30.430

你有没有尝试过？（设置属性）：

```
AllowUserToAddRows = False
AllowUserToDeleteRows = False
ReadOnly = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T09:58:15.020

首先将DataTable ReadOnly 属性设置为False，然后将Gridview ReadOnly 属性设置为false

EX- DataTable dt=("Select * prom priceList"); dt.Columns["Rate"].ReadOnly = false;

数据网格视图 dgv=.dataSource=dt; dgv.Columns["Rate"].ReadOnly = false;

# android - 如何在画布上重新开始？

> ID：13932941
> 
> 赞同：2
> 
> 时间：2012-12-18T12:24:00.330
> 
> 标签：android, canvas

在我的应用程序中，我在画布上绘制了很多东西。在我绘制一个新图形之前，我想删除所有以前的图形并重新开始。

换句话说，我想执行一个 NEW 操作，就像我们在 MS-Paint 中使用新的画布一样，没有任何东西在上面绘制。

我怎样才能实现这样的功能？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:50:55.707

最好的方法是在整个画布上绘制所需的起始颜色。如果你想清楚，就像原来一样。

```
myCanvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR); 
```

或者如果你想要像 MSPaint 这样的白色背景

```
myCanvas.drawColor(Color.WHITE); // Will accept any color. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:39:40.217

如果要清除画布，可以这样做：

```
 protected void onDraw(Canvas canvas) {

                    ...
                    canvas.drawBitmap(fundo, 0, 0, null);
                    ... 
```

在这种情况下，我再次绘制背景场景，但您也可以使用“清除”画布

```
Canvas.drawColor(Color.BLACK) 
```

请看这个[帖子](https://stackoverflow.com/questions/5729377/android-canvas-how-do-i-clear-delete-contents-of-a-canvas-bitmaps-livin)

# ruby-on-rails - Rails 模型错误

> ID：13932945
> 
> 赞同：0
> 
> 时间：2012-12-18T12:24:05.557
> 
> 标签：ruby-on-rails, json, model, has-many

我有一个 has_many :framework 的组件模型。但是 :framework 不属于 :component，因为一个框架可能属于许多组件。

我有一个控制器，它返回一个带有具体组件框架的 json：

```
def getFrameworks
    @component = Component.find(params[:component_id])
   respond_to do |format|
      format.html { redirect_to components_url }
      format.json { render json: @component.frameworks, location: @component }
   end
end 
```

但它给了我以下错误：

```
SQLite3::SQLException: no such column: frameworks.component_id: SELECT "frameworks".* FROM "frameworks"  WHERE "frameworks"."component_id" = 298 
```

我定义错误的模型吗？怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:29:23.223

A`has_many`需要`belongs_to`相关模型，对于您的情况，我相信您想使用`has_and_belongs_to_many`关系，请参阅[文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many)

这是您需要的迁移示例：

```
class CreateComponentsFrameworks < ActiveRecord::Migration
  def change
    create_table :components_frameworks, :id => false do |t|
      t.integer :component_id
      t.integer :framework_id
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:29:18.643

是的，模型定义确实是错误的，`has_many`relashionship 依赖于框架模型有一个名为 component_id 的字段这一事实。由于 Component 不属于 Framework，因此您尚未在模型上定义该字段。

为了实现你想要的，你可以使用一种`has_and_belongs_to_many`关系，它可以准确地模拟你想要的：一个组件有很多框架，一个框架可以属于许多组件

[链接到指南](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:30:41.717

是的，您定义了错误的模型，定义了多对一关系，这就是为什么您会收到与 component_id 相关的错误。

[这](http://guides.rubyonrails.org/association_basics.html#the-has_many-association)就是你正在做的事情，[这里](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)或[这里](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)是你需要做的事情。[这](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)也将帮助您决定使用哪个选项。

# css - 从背景中切出的透明文本

> ID：13932946
> 
> 赞同：99
> 
> 时间：2012-12-18T12:24:09.253
> 
> 标签：css, svg, fonts, css-shapes

有没有办法用CSS**从背景效果中剪切出透明文本**，如下图所示？
由于图像替换文本而失去所有宝贵的 SEO 将是可悲的。

![从背景中切出的透明文本](../Images/aa18a9d17f103e1a6dfd43808c0476d3.png)

我首先想到了阴影，但我想不出任何东西......

图片是网站背景，一个绝对定位的`<img>`标签

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-18T12:49:35.020

css3 可以，但并非所有浏览器都支持

带背景剪辑：文本；您可以为文本使用背景，但您必须将其与页面背景对齐

```
body {
    background: url(http://www.color-hex.com/palettes/26323.png) repeat;
    margin:10px;
}
h1 { 
    background-color:#fff;
    overflow:hidden;
    display:inline-block; 
    padding:10px; 
    font-weight:bold;
    font-family:arial;
    color:transparent;
    font-size:200px;
}
span { 
    background: url(http://www.color-hex.com/palettes/26323.png) -20px -20px repeat;
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
    display:block;
}
```

```
<h1><span>ABCDEFGHIKJ</span></h1>
```

[http://jsfiddle.net/JGPuZ/1337/](http://jsfiddle.net/JGPuZ/1337/)

* * *

## 自动对齐

使用一点 javascript，您可以自动对齐背景：

```
$(document).ready(function(){
  //Position of the header in the webpage
  var position = $("h1").position();
  var padding = 10; //Padding set to the header
  var left = position.left + padding;
  var top = position.top + padding;
  $("h1").find("span").css("background-position","-"+left+"px -"+top+"px"); 
});
```

```
body {
    background: url(http://www.color-hex.com/palettes/26323.png) repeat;
    margin:10px;
}
h1 { 
    background-color:#fff;
    overflow:hidden;
    display:inline-block; 
    padding:10px; 
    font-weight:bold;
    font-family:arial;
    color:transparent;
    font-size:200px;
}
span { 
    background: url(http://www.color-hex.com/palettes/26323.png) -20px -20px repeat;
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
    display:block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<h1><span>ABCDEFGHIKJ</span></h1>
```

​</p>

[http://jsfiddle.net/JGPuZ/1336/](http://jsfiddle.net/JGPuZ/1336/)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-04-20T12:18:52.793

尽管这可以通过 CSS 实现，但更好的方法是使用带有[SVG masking的](https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Clipping_and_masking)[内联 SVG](https://developer.mozilla.org/en-US/docs/SVG_In_HTML_Introduction)。这种方法比 CSS 有一些优势：

*   **更好的浏览器支持**： IE10 +、chrome、Firefox、safari...
*   这不会影响 SEO，因为蜘蛛可以抓取 SVG 内容（[谷歌从 2010 年开始索引 SVG 内容](https://googlewebmastercentral.blogspot.fr/2010/08/google-now-indexes-svg.html)）

CodePen 演示：[SVG 文本掩码](http://codepen.io/web-tiki/pen/eNOLwm)

![透明文字剪裁背景](../Images/73978df653338ec5d90e52a8717c2694.png)

```
body,html{height:100%;margin:0;padding:0;}
body{
  background:url('https://farm9.staticflickr.com/8760/17195790401_94fcf60556_c.jpg');
  background-size:cover;
  background-attachment:fixed;
}
svg{width:100%;}
```

```
<svg viewbox="0 0 100 60">
  <defs>
    <mask id="mask" x="0" y="0" width="100" height="50">
      <rect x="0" y="0" width="100" height="40" fill="#fff"/>
      <text text-anchor="middle" x="50" y="18" dy="1">SVG</text>
      <text text-anchor="middle" x="50" y="30" dy="1">Text mask</text>
    </mask>
  </defs>
  <rect x="5" y="5" width="90" height="30" mask="url(#mask)" fill-opacity="0.5"/>    
</svg>
```

如果您的目标是使文本可供选择和搜索，则需要将其包含在`<defs>`标签之外。以下示例显示了一种将透明文本与[`<use>`](https://developer.mozilla.org/en/docs/Web/SVG/Element/use)标签保持一致的方法：

```
body,html{height:100%;margin:0;padding:0;}
body{
  background:url('https://farm9.staticflickr.com/8760/17195790401_94fcf60556_c.jpg');
  background-size:cover;
  background-attachment:fixed;
}
svg{width:100%;}
```

```
<svg viewbox="0 0 100 60">
  <defs>
    <g id="text">
      <text text-anchor="middle" x="50" y="18" dy="1">SVG</text>
      <text text-anchor="middle" x="50" y="30" dy="1">Text mask</text>
    </g>
    <mask id="mask" x="0" y="0" width="100" height="50">
      <rect x="0" y="0" width="100" height="40" fill="#fff"/>
      <use xlink:href="#text" />
    </mask>
  </defs>
  <rect x="5" y="5" width="90" height="30" mask="url(#mask)" fill-opacity="0.5"/>
  <use xlink:href="#text" mask="url(#mask)" />
</svg>
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-01-30T22:27:15.463

适用于大多数现代浏览器的一种方法是使用

```
background: black;
color: white;
mix-blend-mode: multiply; 
```

对于黑色背景上的透明文本，或

```
background: white;
color: black;
mix-blend-mode: screen; 
```

用于白色背景上的透明文本。

[![在此处输入图像描述](../Images/dce45e7a4a7f6956484ba47c13c9d342.png)](https://i.stack.imgur.com/N5QgK.jpg)

为了在 chrome 中工作，您还需要在`html`元素上设置任何背景颜色。

将这些样式放在您的文本元素上，然后在其后面放置您想要的任何背景。Multiply 基本上将 0-255 颜色代码映射到 0-1，然后将其乘以它后面的任何内容，因此黑色保持黑色，白色乘以 1 并有效地变为透明。对于这种情况，屏幕实际上是相反的。 [http://codepen.io/nic_klaassen/full/adKqWX/](http://codepen.io/nic_klaassen/full/adKqWX/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-18T12:37:43.040

这*是*可能的，但到目前为止只有基于 Webkit 的浏览器（Chrome、Safari、Rockmelt，任何基于 Chromium 项目的东西。）

诀窍是在白色元素中有一个与正文具有相同背景的元素，然后`-webkit- background-clip: text;`在内部元素上使用，这基本上意味着“不要将背景延伸到文本之外”并使用透明文本。

```
section
{
    background: url(http://norcaleasygreen.com/wp-content/uploads/2012/11/turf-grass1.jpg);
    width: 100%;
    height: 300px;
}

div
{
    background: rgba(255, 255, 255, 1);
    color: rgba(255, 255, 255, 0);

    width: 60%;
    heighT: 80%;
    margin: 0 auto;
    font-size: 60px;
    text-align: center;
}

p
{
    background: url(http://norcaleasygreen.com/wp-content/uploads/2012/11/turf-grass1.jpg);
    -webkit-background-clip: text;
}
​ 
```

[http://jsfiddle.net/BWRsA/](http://jsfiddle.net/BWRsA/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-10T06:30:44.557

我刚刚发现了一种新的方法来解决这个问题，我不完全确定它是如何工作的（如果其他人想解释，请做）。

它似乎工作得很好，并且不需要双重背景或 JavaScript。

这是代码： [JSFIDDLE](https://jsfiddle.net/ngf5bwqv/)

```
body {
  padding: 0;
  margin: 0;
}

div {
  background: url(http://www.color-hex.com/palettes/26323.png) repeat;
  width: 100vw;
  height: 100vh;
}

body::before {
  content: '$ALPHABET';
  left: 0;
  top: 0;
  position: absolute;
  color: #222;
  background-color: #fff;
  padding: 1rem;
  font-family: Arial;
  z-index: 1;
  mix-blend-mode: screen;
  font-weight: 800;
  font-size: 3rem;
  letter-spacing: 1rem;
}
```

```
<div></div>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-29T12:30:47.200

在不久的将来我们可以用它`element()`来实现这个

> element() 函数允许作者将文档中的元素用作图像。当引用的元素改变外观时，图像也会改变^([ref](https://drafts.csswg.org/css-images-4/#element-notation))

诀窍是创建一个带有文本的通用 div，然后`element()`结合使用`mask`.

这是一个基本示例，目前仅适用于最新版本的 Firefox。

```
#text {
  font-size:35px;
  font-weight:bold;
  color:#000;
  font-family:sans-serif;
  text-transform: uppercase;
  white-space:nowrap;
  /* we hide it */ 
  position:fixed;
  right:200vw;
  bottom:200vh
}

body {
  background:url(https://picsum.photos/id/1018/800/800) center/cover; 
}

.main {
  margin:50px;
  height:100px;
  background:red;
  -webkit-mask:
    -moz-element(#text) center/contain no-repeat, /* this behave like a background-image*/
    linear-gradient(#fff 0 0);
  mask-composite:exclude;
}
```

```
<div id="text">
You can put your text here
</div>

<div class="main">

</div>
```

它将产生以下内容：

[![背景图像上的 CSS 透明文本](../Images/dbbf38c4bc420760db0e50b2c9e5bc2a.png)](https://i.stack.imgur.com/2fXsb.png)

它是响应式的，因为我们依赖于基本的背景属性，并且我们可以使用基本的 CSS 轻松更新文本。

我们可以考虑任何类型的内容，也可以创建模式：

```
#text {
  font-size:30px;
  font-weight:bold;
  color:#000;
  font-family:sans-serif;
  text-transform: uppercase;
  white-space:nowrap;
  padding:20px;
  /* we hide it */ 
  position:fixed;
  right:200vw;
  bottom:200vh
}
#text span {
  font-family:cursive;
  font-size:35px;
}

body {
  background:url(https://picsum.photos/id/1018/800/800) center/cover; 
}

.main {
  margin:50px;
  height:100px;
  background:red;
  -webkit-mask:
    -moz-element(#text) 0 0/20% auto, /* this behave like a background-image*/
    linear-gradient(#fff 0 0);
  mask-composite:exclude;
}
```

```
<div id="text">
Your <span>text</span> here 
</div>

<div class="main">

</div>
```

[![背景上的 CSS 文本掩码](../Images/fe91be0c08629f59e9d4047bdaad3f32.png)](https://i.stack.imgur.com/5RSkm.png)

为什么不使用一些动画来创建无限滚动文本：

```
#text {
  font-size:30px;
  font-weight:bold;
  color:#000;
  font-family:sans-serif;
  text-transform: uppercase;
  white-space:nowrap;
  padding:20px 5px;
  /* we hide it */ 
  position:fixed;
  right:200vw;
  bottom:200vh
}

body {
  background:url(https://picsum.photos/id/1018/800/800) center/cover; 
}

.main {
  margin:50px;
  height:100px;
  padding-right:calc(50% - 50px);
  background:red;
  -webkit-mask:
    -moz-element(#text) 0 50%/200% auto content-box, /* this behave like a background-image*/
    linear-gradient(#fff 0 0);
  mask-composite:exclude;
  animation:m 5s linear infinite;
}

@keyframes m{
  to {-webkit-mask-position:200% 50%}
}
```

```
<div id="text">
Srolling repeating text here 
</div>

<div class="main">

</div>
```

[![使用 CSS 掩码的动画文本](../Images/1b8d2dd01722f0e259146dae3c241326.png)](https://i.stack.imgur.com/WdhGK.gif)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-18T12:37:08.067

我想你可以[使用`background-clip`](https://developer.mozilla.org/en-US/docs/CSS/background-clip)实现类似的东西，但我还没有测试过。

请参阅此示例：
[http](http://www.css3.info/wp-content/uploads/2008/03/webkit-backgroundcliptext_color.html)
://www.css3.info/wp-content/uploads/2008/03/webkit-backgroundcliptext_color.html （仅限Webkit，我还不知道如何将黑色背景更改为白色）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-22T06:29:32.527

只是把那个CSS

```
 .banner-sale-1 .title-box .title-overlay {
      font-weight: 900;
      overflow: hidden;
      margin: 0;
      padding-right: 10%;
      padding-left: 10%;
      text-transform: uppercase;
      color: #080404;
      background-color: rgba(255, 255, 255, .85);

      /* that css is the main think (mix-blend-mode: lighten;)*/
      mix-blend-mode: lighten;

    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-11T11:24:31.270

这对我`mix-blend-mode: color-dodge`使用相反颜色的容器有用。

```
.main{
 background: url('https://cdn.pixabay.com/photo/2015/04/23/22/00/tree-736885__340.jpg');
 height: 80vh;
 width: 100vw;
 padding: 40px;
}

.container{
   background-color: white;
   width: 80%;
   height: 50px;
   padding: 40px;
   font-size: 3em;
   font-weight: 600;
   mix-blend-mode: color-dodge;
}

.container span{
  color: black;
}
```

```
<div class="main">
<div class="container">
<span>This is my text</span>
</div>
</div>
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-17T15:05:47.467

**您可以使用 myadzel 的[Patternizer](https://github.com/myadzel/patternizer) jQuery 插件**跨浏览器实现此效果。目前，还没有跨浏览器的方法可以仅使用 CSS 来完成此操作。

您可以通过添加到希望将文本绘制为图像模式的 HTML 元素来使用 Patternizer `class="background-clip"`，并在附加`data-pattern="…"`属性中指定图像。请参阅[演示](http://www.myadzel.ru/tests/html/text-background/)的来源。Patternizer 将创建一个带有图案填充文本的 SVG 图像，并将其置于透明渲染的 HTML 元素上。

如果在问题的示例图像中，文本填充图案应该是超出“图案化”元素的背景图像的一部分，我会看到两个选项（未经测试，我最喜欢的第一个）：

*   **在 SVG 中使用遮罩而不是背景图像。**正如[web-tiki 的回答](https://stackoverflow.com/a/29747686)一样，使用 Patternizer 仍然会自动生成 SVG 并在顶部添加一个不可见的 HTML 元素，允许文本选择和复制。
*   **或者使用图案图像的自动对齐。**可以使用类似于[Gijs 答案中的](https://stackoverflow.com/a/13933418)JavaScript 代码来完成。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-10-17T15:23:47.933

**您可以使用倒置/负/反转字体**并将其与`font-face="…"`CSS 规则一起应用。您可能必须使用字母间距来避免字母之间出现小的白色间隙。

如果您不需要特定的字体，那很简单。下载一个喜欢的，例如从这个[倒排字体集合](http://www.1001fonts.com/inverted-fonts.html)。

如果您需要特定的字体（例如“Open Sans”），那就很难了。您必须将现有字体转换为反转版本。这可以通过 Font Creator、FontForge 等手动实现，但我们当然想要一个自动化的解决方案。我还没有找到相关说明，但有一些提示：

*   [如何将位图字体转换为 TrueType 字体](https://stackoverflow.com/q/3750124)（还有[另一种方法](http://ubuntuforums.org/showthread.php?t=1902659)）。首先使用 ImageMagick 命令将字体字形渲染为高分辨率光栅图像并反转它们，然后使用上述说明将它们转换回 TrueType 字体。
*   [是否可以使用 FontForge 或其他 PGM 反转字体？](http://osdir.com/ml/fonts.fontforge.devel/2006-08/msg00083.html)
*   [创建反向（黑底白字）字体](http://forum.high-logic.com/viewtopic.php?t=1120)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-23T08:34:21.633

[![演示截图](../Images/2017baf4c5a918f7169c2ac3ceb73ac9.png)](https://i.stack.imgur.com/HHtAP.png)

我需要制作看起来与原始帖子中完全相同的文本，但我不能通过排列背景来伪造它，因为元素后面有一些动画。似乎还没有人提出这个建议，所以这就是我所做的：（试图使其尽可能易于阅读。）

```
var el = document.body; //Parent Element. Text is centered inside.
var mainText = "THIS IS THE FIRST LINE"; //Header Text.
var subText = "THIS TEXT HAS A KNOCKOUT EFFECT"; //Knockout Text.
var fontF = "Roboto, Arial"; //Font to use.
var mSize = 42; //Text size.

//Centered text display:
var tBox = centeredDiv(el), txtMain = mkDiv(tBox, mainText), txtSub = mkDiv(tBox),
ts = tBox.style, stLen = textWidth(subText, fontF, mSize)+5; ts.color = "#fff";
ts.font = mSize+"pt "+fontF; ts.fontWeight = 100; txtSub.style.fontWeight = 400;

//Generate subtext SVG for knockout effect:
txtSub.innerHTML =
"<svg xmlns='http://www.w3.org/2000/svg' width='"+stLen+"px' height='"+(mSize+11)+"px' viewBox='0 0 "+stLen+" "+(mSize+11)+"'>"+
    "<rect x='0' y='0' width='100%' height='100%' fill='#fff' rx='4px' ry='4px' mask='url(#txtSubMask)'></rect>"+
    "<mask id='txtSubMask'>"+
        "<rect x='0' y='0' width='100%' height='100%' fill='#fff'></rect>"+
        "<text x='"+(stLen/2)+"' y='"+(mSize+6)+"' font='"+mSize+"pt "+fontF+"' text-anchor='middle' fill='#000'>"+subText+"</text>"+
    "</mask>"+
"</svg>";

//Relevant Helper Functions:
function centeredDiv(parent) {
    //Container:
    var d = document.createElement('div'), s = d.style;
    s.display = "table"; s.position = "relative"; s.zIndex = 999;
    s.top = s.left = 0; s.width = s.height = "100%";
    //Content Box:
    var k = document.createElement('div'), j = k.style;
    j.display = "table-cell"; j.verticalAlign = "middle";
    j.textAlign = "center"; d.appendChild(k);
    parent.appendChild(d); return k;
}
function mkDiv(parent, tCont) {
    var d = document.createElement('div');
    if(tCont) d.textContent = tCont;
    parent.appendChild(d); return d;
}
function textWidth(text, font, size) {
    var canvas = window.textWidthCanvas || (window.textWidthCanvas = document.createElement("canvas")),
    context = canvas.getContext("2d"); context.font = size+(typeof size=="string"?" ":"pt ")+font;
    return context.measureText(text).width;
} 
```

只需将其放入您的 window.onload 中，将身体的背景设置为您的图像，然后观看魔术发生！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-25T15:47:03.283

[`mix-blend-mode`](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode)也有可能达到那种效果。

> CSS 属性设置元素的`mix-blend-mode`内容应该如何与元素的父元素的内容和元素的背景混合。

```
h1 {
background:white;
mix-blend-mode:screen;

/* demo purpose from here */
padding:0.25em;
mix-blend-mode:screen;
}

html {
background:url(https://i.picsum.photos/id/1069/367/267.jpg?hmac=w5sk7UQ6HGlaOVQ494mSfIe902cxlel1BfGUBpEYoRw)center / cover ;
min-height:100vh;
display:flex;
}
body {margin:auto;}
h1:hover {border:dashed 10px white;background-clip:content-box;box-shadow:inset 0 0 0 2px #fff, 0 0 0 2px #fff}
```

```
<h1>ABCDEFGHIJKLMNOPQRSTUVWXYZ</h1>
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-12-18T12:27:11.510

Not possible with CSS just now I'm afraid.

Your best bet is to simply use an image (probably a PNG) and and place good alt/title text on it.

Alternatively you could use a SPAN or a DIV and have the image as a background to that with your text you want for SEO purposes inside it but text-indent it off screen.

# java - 如何解决 Java 错误：'The Method toLowerCase() is undefined for type ArrayList "

> ID：13932948
> 
> 赞同：-1
> 
> 时间：2012-12-18T12:24:11.453
> 
> 标签：java, file, types, arraylist

我正在尝试使用具有特定文件类型（.dbf）的特定目录中的文件填充微调器。不幸的是，我不断收到错误“对于 ArrayList 类型的 toLowerCase() 方法未定义”。我该如何解决？

```
public ArrayList<String> ReadDirectory(){
String path="./database";

File folder = new File(path);
File[] ListOfFiles = folder.listFiles();

for (int i = 0; i < ListOfFiles.length; i++){
    if (ListOfFiles[i].isFile()){
        files.add(ListOfFiles[i].getName());
        if (files.endsWith(".dbf") || files.endsWith(".DBF")){
            }
    }
}
return files;
        }

} 
```

此行给出错误：

```
if (files.endsWith(".dbf") || files.endsWith(".DBF")){ 
```

文件以下列方式在脚本顶部声明：

```
ArrayList<String> files = new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:28:16.297

> How do I solve the Java error: 'The Method toLowerCase() is undefined for the type ArrayList'

I cant see you using `toLowerCase()` method in your posted code. however, i assume you are trying to call `toLowerCase()` on a list reference. List doesnt have `toLowerCase()` method. String has [`toLowerCase()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#toLowerCase%28%29) method.

you probably ment to do this:

```
List<String> list = new ArrayList<String>();
System.out.println(list.get(0).toLowerCase()); //this is legal
System.out.println(list.toLowerCase()); //this isn't legal as there is no toLowerCase() method in list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:32:12.263

You can't use `.endsWith()` on a File. Considering you are using a `for` loop, you should go for `files[i].endsWith()`. However, using an enhanced for, e.g. `for (File currentFile : files)` is a more common approach.

Same thing goes for the `.toLowerCase()` method.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:30:14.937

据我所知，toLowerCase() 仅针对字符串对象定义，因此在迭代期间从 ArrayList 中获取单个字符串，更改此字符串并替换 ArrayList 中的旧字符串

# c# - C# 中的动态选择语句到 MySQL 数据库？

> ID：13932950
> 
> 赞同：0
> 
> 时间：2012-12-18T12:24:18.113
> 
> 标签：c#, mysql, select

最近我有很多关于 MySQL 中的 SQL 语句的问题，但没有一个符合我的目的。

我有一个类，我的 SQL 语句将保存在其中，以便我可以将它们用作保持代码整洁的方法。我已经完成了 Insert、Update、Delete 和 Count 语句，但我似乎找不到 SELECT 语句的解决方案

以下是其他语句的代码：

```
public void Insert(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);
            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public void Update(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand();
            cmd.CommandText = query;
            cmd.Connection = mycon;

            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public void Delete(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);
            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public int Count(string query)
    {
        int count = 0;

        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);

            count = int.Parse(cmd.ExecuteScalar() + "");

            CloseConnnection();

            return count;
        }

        else
        {
            return count;
        }
    } 
```

我正在考虑一个看起来像这样的 SELECT 方法：

```
 public string[] Select(string query, int colnum)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);
            MySqlDataReader dr = new MySqlDataReader();
            string[] info = new string[colnum];
            dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                for (int i = 0; i <= colnum; i++)
                {
                  info[i] = (dr[colnum].ToString());
                }
            }
        }
    } 
```

这条线是相当虚构的`info[i] = (dr[colnum].ToString());` ，因为我知道它不会按照我想要的方式运行。我正在寻找具有类似逻辑或类似逻辑的东西，它可以让我通过使用方法来利用 SELECT 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:30:34.907

为什么不使用 Nhibernate (http://nhforge.org/)。阅读[http://geekswithblogs.net/pariam/archive/2006/07/26/86352.aspx](http://geekswithblogs.net/pariam/archive/2006/07/26/86352.aspx)以获得将 nhibernate 与 mysql 一起使用的教程

**编辑：** 使用您的代码，我不确定如何处理并发。但是 Nhibernate 会为您做到这一点。读[这个](http://nhforge.org/blogs/nhibernate/archive/2009/04/14/nhibernate-mapping-concurrency.aspx)

阅读[此](http://en.wikipedia.org/wiki/Concurrency_control#Why_is_concurrency_control_needed.3F)内容以了解并发概念详细信息

# windows - 创建虚拟文件夹并将它们挂接到文件系统

> ID：13932953
> 
> 赞同：8
> 
> 时间：2012-12-18T12:24:27.790
> 
> 标签：windows, winapi, file-io, filesystems

我有大量用于我正在处理的项目的文件夹。很长一段时间以来，我一直试图找到一种更好的方法来对它们进行排序，我想编写一个应用程序来根据我所说的任何标准创建组，例如“2011 年的文件夹”或“包含 ax 类型文件的文件夹” “ ETC。

这相当简单，并且在 winForms 或 WPF 或其他东西中使用自己的 UI 进行编码不会带来太大问题。但我认为如果我能让这些文件夹看起来是文件系统的一部分会好得多，这样其他应用程序（如现有的文件浏览器）可以看到它们。

这可能吗？会不会引起我没有考虑过的问题？如果可能的话，我该怎么做？

我想到的一种方法是让应用程序监视文件系统并在每次发生更改时创建文件夹快捷方式，但我很好奇是否有可能通过“网关”文件夹向资源管理器提供假文件系统

**编辑：**好吧，这显然是可能的，因为[http://www.virtualfolder.net/](http://www.virtualfolder.net/)可以做到，现在我认为**TrueCrypt**也可以，尽管如果它不必显示为单独的驱动器会很好。那么问题就变成了，我该如何实现呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T19:02:14.827

您可以创建一个[Shell 命名空间扩展](http://msdn.microsoft.com/en-us/library/windows/desktop/ff521728.aspx)来收集您想要的文件信息，并以您希望的任何方式在 Windows 资源管理器中显示它。 [您可以选择](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144096.aspx)扩展的位置，无论是作为其自己的顶级节点、另一个系统虚拟文件夹/扩展的子节点，还是作为文件系统文件夹的子节点。

编写 SNE 并非易事，但它比编写低级文件系统驱动程序要容易得多，并且不需要特殊的面向驱动程序的编译器。任何支持开发 COM 对象的编译器都可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T16:58:27.930

这是使用文件系统驱动程序或文件系统过滤器驱动程序来完成的。首先让您创建一个虚拟文件系统并将其挂载到驱动器号以及 NTFS 驱动器上的文件夹（文件夹必须存在，但其内容被虚拟文件系统目录树“替换”）。文件系统过滤器驱动程序允许您在现有文件夹中引入虚拟文件和文件夹，而无需替换它们。

VirtualFolder 在创建驱动器号时使用文件系统驱动程序。

这两种类型的驱动程序都是用 C 语言编写的，并且在内核模式下工作。编写它们需要深入了解 Windows 内部结构和驱动程序开发经验（因为文件系统驱动程序是最复杂的驱动程序类型之一）。

我们提供多种与虚拟存储相关的产品。其中之一，回调文件系统，是一个文件系统驱动程序。它调用您的用户模式代码来执行实际的文件系统功能。另一个产品 CallbackFilter 是一个 FS 过滤器驱动程序（它也调用您的用户模式代码）。但是，当前版本的 CallbackFilter 不允许您引入虚拟文件和文件夹（这将在下一个版本中实现）。

还有 Pismo File Mount 产品可用，它们使用过滤驱动技术。您可以与他们核对是否可以完成您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:46:08.877

从我收集到的信息中，您正在寻找一种方法来呈现预定义文件查询的结果，以使它们看起来好像它们位于文件系统中的特定位置。如果这是正确的，您可能需要查看[Hard Links and Junctions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365006.aspx "硬链接和连接点")。您可以使用这些文件系统服务做什么是有限制的。然而，它真的很容易实施。

# ios - 将 iOS 应用程序移植到 Mac OS-X（音频捕获和播放）

> ID：13932954
> 
> 赞同：2
> 
> 时间：2012-12-18T12:24:29.270
> 
> 标签：ios, macos, audio, core-audio, audio-recording

我在 iOS 中有一个示例应用程序，用于实时从麦克风和播放中捕获音频。我想在 macosx 中转换这个应用程序，但发现了一些错误。当我尝试在 macosx 中编译我的应用程序时，它会在“kAudioSessionCategory_PlayAndRecord”、“AudioSessionSetActive”上返回错误

```
flag = kAudioSessionCategory_PlayAndRecord;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(flag), &flag);
//Float32 fflag = 1.0;
//AudioSessionSetProperty(kAudioSessionProperty_InputGainScalar, sizeof(fflag), &fflag);
flag = kAudioSessionMode_VoiceChat;
AudioSessionSetProperty(kAudioSessionProperty_Mode, sizeof(flag), &flag);

AudioSessionSetActive(true); 
```

对于上面的代码行，macosx 中的等效代码是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:33:35.463

简而言之，在 OS X 上您不需要 AudioSession——它的作用是协调设备上音频硬件的共享使用。在 OS X 上，所有应用程序都可以同时访问音频硬件。事实上，如果你检查一下，`AudioToolbox/AudioSession.h`你会看到`__OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_2_0);`所有的功能——这意味着 AudioSession 在 OS X 上不可用。

您可以简单地`#ifdef`为您的 OS X 构建项目中的任何 AudioSession 代码。

# c# - 减少数据库往返

> ID：13932958
> 
> 赞同：2
> 
> 时间：2012-12-18T12:24:52.407
> 
> 标签：c#, .net, winforms, sql-server-2008, .net-4.0

我的应用程序中有一个选项，其中一些数据根据在文本框中输入的文本进行搜索。

`text- change`所以我确实对文本框事件执行搜索（调用以字符串为输入的存储过程） 。

我阅读了一篇关于[提高 ADO.NET 性能](http://msdn.microsoft.com/en-us/library/ff647768.aspx)的文章，我发现减少数据库往返可以提高性能。

对于这些情况有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:58:45.523

不确定它是否符合您的要求，但您可以进行数据库调用并将所需的表加载到数据集中，然后在本地调用数据集。如果您在使用计时器触发文本更改事件时引入延迟，那么您就完成了您的要求，一切都应该很快。我们在我们的应用程序中使用了这种方法，效果很好。

但另一方面，我想强调的是，即使这种方法对提高性能也没有太大影响。如果应用程序的规模相当大，应用程序的速度基于其架构和流程。但是想到技术的捷径总是很棒的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:30:33.643

使用搜索索引实现怎么样？我这样做是为了解决一个非常相似的问题。

在开始我的应用程序时，我会启动 Lucene 索引。该索引将定期刷新以适应更改。

[http://www.codeproject.com/Articles/29755/Introducing-Lucene-Net](http://www.codeproject.com/Articles/29755/Introducing-Lucene-Net)

这比直接调用数据库要快得多，并且由于只需准备好索引，因此数据库服务器上的负载也更少。此外，Lucene 支持一组非常强大的搜索条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T14:17:35.263

您留下一些猜测，因为不知道搜索返回什么。

您可以将数据读入字典，其中键是文本框输入，值是搜索返回的内容。然后您可以使用 LINQ 搜索密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T12:33:22.970

如果文本框的每次更改都必须触发更新，则取决于您所需的用户体验，您无能为力。textchanged 不应为每个键入的字母触发，而应仅在用户离开文本框且值已更改后触发

如果用户可以搜索多个字段但在按钮后面搜索

如果这个函数被大量使用并且没有太多的数据是相当静态的，你可以在你的应用程序中缓存数据并从缓存中获取

# node.js - 如何使用 node.js 从（大）文件中进行随机访问读取？

> ID：13932967
> 
> 赞同：5
> 
> 时间：2012-12-18T12:25:34.997
> 
> 标签：node.js, seek, random-access

我是否遗漏了某些东西，或者 node.js 的标准文件 I/O 模块是否缺少通常的文件随机访问方法的类似物？

*   `seek()`/`fseek()`
*   `tell()`/`ftell()`

如果没有这些，如何从节点中的大文件中读取随机固定大小的记录？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T04:54:33.327

`tell`不是，但是很少有不知道你在文件中的位置，或者没有办法跟踪自己的情况。

`seek`通过and的`position`论点间接暴露。给出时，参数将在执行其操作之前寻找该位置，如果，它将使用它之前的任何位置。`fs.read``fs.write``null`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:35:22.637

节点没有内置这些​​，您可以获得的最接近的方法是使用`fs.createReadStream`参数`start`从偏移量开始读取，（传入现有的`fd`以避免重新打开文件）。

[http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T12:41:29.270

我想 createReadStream 一遍又一遍地创建新的文件描述符。我更喜欢同步版本：

```
function FileBuffer(path) {
const fd = fs.openSync(path, 'r');

function slice(start, end) {
    const chunkSize = end - start;
    const buffer = new Buffer(chunkSize);

    fs.readSync(fd, buffer, 0, chunkSize, start);

    return buffer;
}

function close() {
    fs.close(fd);
}

return {
    slice,
    close
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-24T08:22:45.747

用这个：

```
fs.open(path, flags[, mode], callback) 
```

然后这个：

```
fs.read(fd, buffer, offset, length, position, callback) 
```

阅读本文了解详情：

[https://nodejs.org/api/fs.html#fs_fs_read_fd_buffer_offset_length_position_callback](https://nodejs.org/api/fs.html#fs_fs_read_fd_buffer_offset_length_position_callback)

# c# - If I use an IocContainer at all, should it be used everywhere?

> ID：13932969
> 
> 赞同：2
> 
> 时间：2012-12-18T12:25:50.883
> 
> 标签：c#, inversion-of-control

We use an Ioc Container to resolve most of the objects in a project, however it seems like it might be innappropriate to use it everywhere. At runtime, the user is in the context of a single company Id and it seems appropriate to me to pass that company Id in the constructor of, for example, a repository or unit of work. We could use a parameter override for the company Id at runtime, but is there any benefit in using

```
var uow = IocContainer.Resolve<IUnitOfWork>(new ParameterOverride("companyId", companyId)) 
```

as opposed to

```
var uow = new UnitOfWork(companyId) 
```

OK, so I understand that I might want to create a different implementation of IUnitOfWork some time and I could then easily swap in the new implementation with Ioc configuration, but I am not convinced I will ever do that anyway.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:28:50.140

不，有时呼叫`new`正是您想要的。一个示例是方法调用或狭窄范围的本地对象。

模型对象通常不受 IoC 容器的控制。您为每个新会话或请求范围实例化一个，使用从用户传递给您的数据，这些数据在启动时 IoC 容器永远无法知道。

更新：Honza Brestan 关于逻辑单元的观点是正确的。典型的 Spring 层排列是基于接口的：

```
view->controller->service->persistence 
```

服务使用其他服务、模型对象和持久性来完成用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T12:35:36.530

我发现 IoC 的最大优势不在于实现交换（在大多数项目中人们几乎不会这样做），而是迫使您将代码划分为更清晰的逻辑单元，这通常意味着它是可单元测试的、可管理的并且更容易整体原因。

考虑到这一点，我建议根据项目的逻辑单元为自己决定“注入粒度”。可能是 5 个较大的模块，也可能是几十个不同的小连接器。同样正如 duffymo 提到的，`new`可能是您想要的本地/狭窄范围。

# wcf - Form POST data is lost in ASP.NET MVC

> ID：13932978
> 
> 赞同：0
> 
> 时间：2012-12-18T12:26:23.677
> 
> 标签：wcf, asp.net-mvc-4

I have ASP.NET MVC 4\. Just recently I upgraded to .NET Framework 4.5, VS 2012, and I believe it also upgraded IIS express to version 8\.

Now that I upgraded, my application looses POST data. In one of my WCF components I look into `HttpContext.Current.Request.Form` -- it now gives me 0 fields, while I expect 4 fields. For troubleshooting, I added HttpModule with an empty body, and if I break on BeginRequest, I consistently can see all my form fields in `HttpContext.Current.Request.Form` from HttpModule, but when I hit F5, I **sometimes** get the Form fields in the component and sometimes the Forms objects is empty.

Sounds like some kind of race condition inside of ASP.NET, MVC or something.

I am at a loss.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:35:55.507

我建议您使用 HTTP 嗅探器（例如[Fiddler](http://www.fiddler2.com/fiddler2/) ）检查您的 POST，看看是否正确发送了帖子。

有时您发送的 POST 编码不正确，它也可能会导致您出现类似的问题。

如果在使用 Fiddler 检查 POST 并确保您使用正确的编码后，您仍然找不到问题所在，我建议您创建一小段代码来重现错误，以便我们更好地帮助您。

# silverstripe - 使用作曲家更新到 silverstripe 3.1

> ID：13932981
> 
> 赞同：0
> 
> 时间：2012-12-18T12:26:29.927
> 
> 标签：silverstripe

是否可以使用 composer 将我的项目更新到 Silverstripe 3.1 的 beta 版本？

我在 Silverstripe 项目的根目录中安装了 composer 以及 composer.json 文件。这是我的 composer.json 文件：

```
{
"name": "silverstripe/installer",
"description": "The SilverStripe Framework Installer",
"require": {
    "php": ">=5.3.2",
    "silverstripe/cms": "3.0.*@stable",
    "silverstripe/framework": "3.0.*@stable",
    "silverstripe-themes/simple": "*"
},
"require-dev": {
    "silverstripe/compass": "*",
    "silverstripe/docsviewer": "*"
},
"minimum-stability": "dev" 
```

}

当我运行 composer update /Path/To/My/Site

Composer 告诉我它无法找到 composer.json 文件，即使它在那里。

我运行错误的命令吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:00:27.937

您需要删除“composer.lock”文件（如果存在），将“3.0.*@stable”替换为“3.1.x-dev”，然后调用“composer update”。这将为您提供最新的 3.1 分支。

以这种方式升级到 3.1.0-beta1 是不可能的，因为我在标签中弄乱了 composer.json 依赖项。您需要根据提交给此标签的 composer.lock 文件为此创建一个新项目：

```
composer create-project silverstripe/installer test 3.1.0-beta1 
```

# mysql - Idiorm (MySQL) - 原始查询 - 显示表格

> ID：13932984
> 
> 赞同：1
> 
> 时间：2012-12-18T12:26:42.853
> 
> 标签：mysql, orm, idiorm

我使用[Idiorm](https://github.com/j4mie/idiorm)作为 MySQL 和 PHP 的 ORM。

我需要检查是否创建了表。

**在 SQL 中**

这适用于 phpMyAdmin

```
SHOW TABLES LIKE 'ro_globals' 
```

**我在 Idiorm 中尝试过的**

```
ORM::raw_query("SHOW TABLES LIKE 'ro_globals'")->count() 
```

> 调用未定义的方法 admin::count()

是否可以使用 Idiorm 进行这项工作？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T19:28:07.150

正确的答案是：

```
ORM::forTable()->rawQuery('SHOW TABLES')->findMany()->count(); 
```

或带下划线：

```
ORM::for_table()->raw_query('SHOW TABLES')->find_many()->count(); 
```

前缀表：

```
ORM::for_table()->raw_query('SHOW TABLES LIKE ' . $prefix . '%')->find_many()->count(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:36:45.650

我在 Saharsh 的评论中得到了答案。这不是 Idiorm 问题，可以使用 SQL 解决。

**结果**

```
CREATE TABLE IF NOT EXISTS 
```

# java - 问题在循环中一一创建套接字

> ID：13932985
> 
> 赞同：1
> 
> 时间：2012-12-18T12:26:43.670
> 
> 标签：java, android, sockets, wifi, serversocket

我制作了一个学校应用程序，教师在其中向学生发送字符串消息。教师持有已登录学生的哈希图。当老师在他的平板电脑上按下下一页命令时，学生应该看到下一页。这就是通常发生的情况，但有时当教师由于某种原因无法与哈希图中的单个学生建立联系时，整个过程变得非常缓慢，并且系统很少停止进一步响应。

```
public static void SendToEveryStudent(String message) throws IOException, ELearningException 
{   
    String command;
    String host;
    int port;
    String failedStudents = "";
    int leftOverStudents = 0;
    ApplicationLog.log("Command Queue: sendToEveryStudent : " + message, InitializeTeacherJar.getInstance().isLoggingEnabled());
    int socketTimeout;

    Socket studentSocket = null;

    StudentUtility.studentCounter = 0;

    port = InitializeTeacherJar.getGlobalPort();
    socketTimeout = InitializeTeacherJar.getInstance().getTeacherStudentSocketTimeout();

    // Check if no of students are more then zero
    if (InitializeTeacherJar.getInstance().getStudentIPList().keySet().size() > 0)
    {
        StudentUtility.studentCounter = InitializeTeacherJar.getInstance().getStudentIPList().keySet().size();

        for (String key : InitializeTeacherJar.getInstance().getStudentIPList().keySet())
        {
            try 
            {   
                host = InitializeTeacherJar.getInstance().getStudentIPList().get(key).get(0);

                if (!host.equalsIgnoreCase(""))
                {   
                    if (studentSocket != null)
                    {
                        studentSocket.close();
                        studentSocket = null;
                    }

                    try
                    {   
                        studentSocket = new Socket(InetAddress.getByName(host), port);
                        studentSocket.setSoTimeout(socketTimeout);
                    }
                    catch (Exception e)
                    {
                        leftOverStudents++;
                        failedStudents = key + InitializeTeacherJar.getInstance().getDelimiter();
                        ApplicationLog.log("Exception :: " + host +" is not reachable as the server is down at his end.", InitializeTeacherJar.getInstance().isLoggingEnabled());
                        continue;
                    }

                    if (studentSocket != null)
                    {
                        if (InitializeTeacherJar.getInstance().getStudentIPList().get(key).get(1).equalsIgnoreCase("present"))
                        {
                            studentSocket.getOutputStream().write((message + "\n").getBytes());

                            ApplicationLog.log("Command Queue: Message to student :: " + message + " :: " + key, InitializeTeacherJar.getInstance().isLoggingEnabled());

                            BufferedReader in = new BufferedReader(new InputStreamReader(studentSocket.getInputStream()));

                            String line = null;

                            while ((line = in.readLine()) != null)
                            {
                                if (line.equalsIgnoreCase("ack"))
                                {
                                    //ApplicationLog.log("InitializeTeacherJar :: Student Counter is :: " + StudentUtility.studentCounter, InitializeTeacherJar.getInstance().isLoggingEnabled());
                                    ApplicationLog.log("Command Queue: Ack recvd for :: "+ key + " :: " + host, InitializeTeacherJar.getInstance().isLoggingEnabled());
                                }
                                else
                                {
                                    ApplicationLog.log("Command Queue: Did Not received ACK for :: "+ key + " :: " + host, InitializeTeacherJar.getInstance().isLoggingEnabled());
                                }
                            }
                        }
                        else 
                        {
                            studentSocket.getOutputStream().write((CONSTANTS.ALERT + InitializeTeacherJar.getInstance().getDelimiter() + ErrorCodes.TABLET_NOT_ASSIGNED).getBytes());

                            ApplicationLog.log("StudentUtility :: Tablet not assigned to :: " + key, InitializeTeacherJar.getInstance().isLoggingEnabled());
                        }

                        studentSocket.close();
                    }
                }
            }
            catch (Exception e) 
            {
                ApplicationLog.log("CommandQueue :: sendToEveryStudent Exception :: " + e, InitializeTeacherJar.getInstance().isLoggingEnabled());

                studentSocket.close();
            }

            studentSocket = null;
        }
    }

    if (leftOverStudents > 0)
    {
        failedStudents = StudentUtility.m_stripLastChar(failedStudents);

        ApplicationLog.log("SendToEveryStudent :: Some Students Were Not Connected :: " + ErrorCodes.TEACHER_STUDENT_SOCKET_NOT_CONNECTED + InitializeTeacherJar.getInstance().getDelimiter() + failedStudents, InitializeTeacherJar.getInstance().isLoggingEnabled());

        InitializeTeacherJar.getInstance().getMyFlexSocket().getOutputStream().write((CONSTANTS.ALERT + InitializeTeacherJar.getInstance().getDelimiter() + ErrorCodes.TEACHER_STUDENT_SOCKET_NOT_CONNECTED + InitializeTeacherJar.getInstance().getDelimiter() + failedStudents + InitializeTeacherJar.getInstance().getCommandDelimeter()).getBytes());
        InitializeTeacherJar.getInstance().getMyFlexSocket().getOutputStream().flush();         
    }
    else if (leftOverStudents == 0)
    {
        InitializeTeacherJar.getInstance().getMyFlexSocket().getOutputStream().write((CONSTANTS.ALERT + InitializeTeacherJar.getInstance().getDelimiter() + CONSTANTS.SENT_SUCCESSFULLY_TO_ALL + InitializeTeacherJar.getInstance().getDelimiter() + "Sent To All" + InitializeTeacherJar.getInstance().getCommandDelimeter()).getBytes());
        InitializeTeacherJar.getInstance().getMyFlexSocket().getOutputStream().flush();
    }

    StudentUtility.studentCounter = StudentUtility.studentCounter - leftOverStudents;
    }
} 
```

我担心的地方是

1) 循环 - 循环，它使套接字和调用阻塞调用，即接受，应该进入一个 AsynTask。2) SocketTimeout - 它应该是最小的，现在是 1.2 秒。这个的最佳值是多少？

这可能是太多的代码，但我希望解释有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:58:21.170

这是一种倒退的设置。想象一个 Web 服务器将连接到所有潜在客户端以推送网页 - 跳过所有 NAT/防火墙问题，这些问题只是无法扩展并且在顺序单线程中容易出现列表头延迟实现并在任何多线程设置中浪费资源。

我建议切换到传统的客户端-服务器模型，其中教师是服务器，学生是按需连接的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T08:50:35.317

暂时我有一个垫片来处理它。但是，在我完成软件的适当发布后，我将尝试“收集活动套接字”的事情。

无论如何，我所做的是对上述代码的更改：

```
 try
                {   
                    inAddress = InetAddress.getByName(host);

                    if (!inAddress.isReachable())
                    {
                       leftOverStudents++;
                       failedStudents = key + InitializeTeacherJar.getInstance().getDelimiter();
                       ApplicationLog.log("Exception :: " + host +" is not reachable as the server is down at his end.", InitializeTeacherJar.getInstance().isLoggingEnabled());
                       continue; 
                    }

                    studentSocket = new Socket(inAddress, port);
                    studentSocket.setSoTimeout(socketTimeout);
                } 
```

如果无法到达，我所做的只是转移到下一个学生。无论如何感谢您的帮助。

# datagridview - 在 c#.net 中离开 datagridview 后，如何在单列中的所有单元格中添加 EditedFormattedValues

> ID：13932986
> 
> 赞同：0
> 
> 时间：2012-12-18T12:26:45.267
> 
> 标签：datagridview, cell

我想添加（总和）单列中的所有值并显示到一个文本框中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:59:15.960

您可以为此使用`Leave`事件。`DataGridView`

```
private void dataGridView1_Leave(object sender, EventArgs e)
{
    int sum = 0;
    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        sum += Convert.ToInt32(row.Cells[0].Value);
    }
    textBox1.Text = sum.ToString();
} 
```

# android-layout - android对整个屏幕应用背景，包含超过1个textview

> ID：13932992
> 
> 赞同：0
> 
> 时间：2012-12-18T12:27:00.210
> 
> 标签：android-layout

我正在开发一个带有主屏幕的应用程序，它有 6 个文本视图，按某种顺序排列。现在，我想将图像作为背景应用到它们。

如果我将该图像应用于父布局，则它不可见，因为它被所有子布局/文本视图覆盖。因此，我必须将该背景单独应用于所有文本视图，以使其可见。

但是，这不是我想要的。有没有办法将该图像作为背景应用到父布局，使其在所有子布局中都可见。

意味着，我想将该图像应用为背景，以便单个图像可以覆盖整个屏幕并且在文本视图上可见，而不是将图像应用于所有单独的 texview。

您也可以将问题视为如何使文本视图透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:40:03.080

实际上，我想出了一种方法。我可以在可绘制文件夹的单独文件中定义自定义布局。在那里，我可以定义一个选择器，我可以在其中定义一个形状来定义

渐变（用于背景渐变），

固体（用于应用纯色）..like 元素。

在固体元素中，我可以将颜色属性定义为

```
<solid android:color="@android:color/transparent" /> 
```

然后，我可以将此布局作为所有文本视图的背景。

或者，如果您不想要其他效果而只是应用背景，您可以在不创建文件的情况下执行此操作。

分别对每个 TextView 应用背景：

```
android:background="@android:color/transparent" 
```

这两种方式都可以轻松解决问题。

# c# - mvc razor 允许用户选择有自己的主题 css

> ID：13932994
> 
> 赞同：3
> 
> 时间：2012-12-18T12:27:05.760
> 
> 标签：c#, css, asp.net-mvc, razor

我正在使用 MVC/Razor/.Net/C#，我希望允许用户更改网站的主题，就像您可以在 microsoft windows 中更改主题一样。

有谁知道如何，或者，可以指出一些好的教程/示例的方向。

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:33:28.050

这是一个非常非常广泛的问题，有许多正确的方法。

您可以创建一个基本控制器，在每个请求期间从数据库加载用户选择的 CSS 主题名称。然后您可以将该值放入`ViewBag`(or `ViewData`) 并在您的视图中引用它：

```
<head>
  @{
    var themeName = ViewBag.ThemeName;
  }
  @if (String.IsNullOrWhiteSpace(themeName)) {
    themeName = "default";
  }
  <link href="@Url.Content(String.Format("~/themes/{0}.css", themeName))" type="text/stylesheet" />
</head> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:32:58.173

通常这个功能是通过多个 CSS 文件实现的，并且几乎没有（或与 .NET 无关）。

您应该以语义的方式设计您的 HTML，以便通过更改 CSS 文件，整个输出随着应用的每个 CSS 不同而不同。

此链接对该主题进行了更详细的介绍-> [http://www.thesitewizard.com/css/switch-alternate-css-styles.shtml](http://www.thesitewizard.com/css/switch-alternate-css-styles.shtml)

完成此操作后，您需要在应用程序中将用户偏好（什么皮肤）存储在会话或类似内容中，并相应地更改 CSS 文件。

Asp.Net WebForms 曾经有皮肤/主题功能，但我认为它已被弃用（它不是很好），我还看到了一个实现，开发人员使用 XML 和 XSLT 文件而不是 HTML 来呈现视图（其中对我的口味来说也太复杂了）。

# openlayers - Creating openlayers text

> ID：13932997
> 
> 赞同：0
> 
> 时间：2012-12-18T12:27:26.043
> 
> 标签：openlayers, marker, point-of-interest

I'm kinda new to OpenLayers and I would like to ask whats the problem in my code. This is actually just from the examples I got from the internet but I seem can't make it work. All I want to do is to make POIs using Openlayers.layers.text.

```
map = new OpenLayers.Map("mapdiv");
map.addLayer(new OpenLayers.Layer.OSM());
var pois = new OpenLayers.Layer.Text( "My Points",
                { location:"./textfile.txt",
                  projection: map.displayProjection
                });
map.addLayer(pois); 
```

and in my textfile is

```
lat lon title   description iconSize    iconOffset  icon
10  20  title   description 21,25   -10,-25 http://www.openlayers.org/dev/img/marker.png 
```

I've been trying to figure out whats wrong with my codes all day but i cant make it work. Can anyone help me to figure out whats wrong with my code? only the map will be shown with no popup/marker..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:26:24.363

确保您的`textfile.txt`文件符合以下要求：

*   数据文件的第一行应该是带有数据列名的标题行。每列应由`tab`空格分隔。
*   最后一行`textfile.txt`应该是一个空字符串。
*   `textfile.txt`应放置在与原始应用程序相同的主机上。
*   `OpenLayers.Layer.Text`如果您尝试从文件系统运行应用程序，则不起作用。使用网络服务器。

看我的[现场演示](http://gis-lab.info/share/DR/sandbox/marker.html)。.txt 文件示例：![在此处输入图像描述](../Images/afa4815f3e2c3d0b624d6c014a56ab58.png)

# jqgrid - JQGrid rendering performance

> ID：13932998
> 
> 赞同：1
> 
> 时间：2012-12-18T12:27:29.467
> 
> 标签：jqgrid, html-rendering

We have performance issues with JQgrid rendering. Please advise.

JQGrid v4.3.2, jquery-1.7.2.min.js, jquery-ui-1.8.1.sortable.min.js, jquery-ui-1.8.20.custom.min.js Browser: IE6,7

Every user is shown data in 2 grids - actions and fyi's. Typical data range is ~300 rows in each grid. The list of columns could vary for user groups and hence the colModel structure is dynamic. After getting data we apply conditional styles to each row (to be bold or not etc) and change the number formatting.

Code sample for grid is as below:

```
jQuery('#ActionItems').jqGrid({
    url: 'http://actionsurl',
    mtype: 'GET',
    datatype: 'json',
    page: 1,
    colNames: actionsColNames,
    colModel: actionsColModel,
    viewrecords: true,
    loadonce: true,
    scrollrows: false,
    prmNames: { id: "PrimaryID" },
    hoverrows: false,
    jsonReader: { id: "PrimaryID" },
    sortname: 'CreateDt',
    sortorder: 'desc',
    gridComplete: function () {
        fnActionsGridComplete();
    },
    recordtext: "Displaying {1} of {2} Records",
    emptyrecords: "No data to view",
    emptyDataText: "No data found.",
    loadtext: "Loading...",
    autoWidth: true,
    rowNum: 1000,
    grouping: true,
    groupingView: groupingViewOp
}); 
```

Formatting code in fnActionsGridComplete():

1.  Set column widths in %
2.  Iterate thru rows to apply conditional css styles

    ```
    $("#Actions").find("tbody tr").each(function () {
        if ($(this)[0].id != '') { 
            var data = $(this).find('.IsItemNew').html();
                if(data == "Y") {            
                $(this).css("fontWeight", "bold");
                }                
        }                    
    }); 
    ```

3.  Formatting for specific columns.

Currently we have performance issues for >200 rows of data in any grid. After analysis we found that formatting and rendering is taking most time.

Can you suggest any optimal way to improve performance here. (paging is no-no)

Regards, Rajani

- We did testing on IE9 and its lot better. But users cant immediately upgrade.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:54:11.983

原因是代码`fnActionsGridComplete`。我建议您阅读[答案，该答案](https://stackoverflow.com/a/12519858/315935)解释了为什么使用`gridview: true`和减少页面 DOM 元素的更改次数非常重要。

您尝试做的似乎可以通过添加`cellattr`到 column来实现`"IsItemNew"`。该代码可能是关于以下

```
cellattr: function (rowId, value) {
    // additional parameter of cellattr: rawObject, cm, rdata are optional
    if (value === "Y") {
        return ' style="font-weight:bold;"';
    }
} 
```

或者，您可以添加`class`属性而不是在类中`style`定义`font-weight: bold`。

我建议你阅读[答案](https://stackoverflow.com/a/7408355/315935)，[这个](https://stackoverflow.com/a/6048865/315935)，[这个](https://stackoverflow.com/a/12180842/315935)等等。如果你需要在整行而不是你可以使用的单元格上设置一些属性`rowattr`（见[答案](https://stackoverflow.com/a/10531680/315935)）。

如果您包含`gridview: true`并使用`cellattr`,`rowattr`或自定义格式化程序，您会发现网格的性能绝对是另一个级别。