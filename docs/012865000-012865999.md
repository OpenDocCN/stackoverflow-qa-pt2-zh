# StackOverflow 问答 12865000-12865999

# web-services - JAX-WS Web 服务中的 CDI 构造函数注入

> ID：12865000
> 
> 赞同：1
> 
> 时间：2012-10-12T18:26:45.613
> 
> 标签：web-services, jax-ws, cdi

我有一个 JAX-WS webservice 部署到 Java EE 6 容器。

我想使用 CDI 将会话 bean 注入这个 web 服务。到目前为止，我已经使用字段注入成功地做到了这一点，但公司的政策是使用基于构造函数的注入。Web 服务实现不是会话 bean。也是

```
@WebService
public class MyWebservice{

  private ServiceA serviceA;

  private ServiceB serviceB;

  @Inject
  public MyWebservice( ServiceA serviceA, ServiceB serviceB)
  {
     this.serviceA = serviceA;
     this.serviceB = serviceB;
  }

  public void webMethod1()
  {
     serviceA.doSomething();
     serviceB.doSomething();
  }
} 
```

CDI 可以接受吗？

# macos - textmates 的 c++ 关键字颜色

> ID：12865001
> 
> 赞同：0
> 
> 时间：2012-10-12T18:26:46.450
> 
> 标签：macos, textmate

我想知道如何在 textmate 中启用多色功能以彩色显示关键字（类似 c 的语法）？

因此，例如在 sublime 中，按 CTRL+SHIFT+P 将弹出一个菜单，用户可以从中选择代码的着色模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T14:21:25.803

在窗口底部有一个下拉菜单，其中显示了您可以使用的所有不同样式和上下文。![指向并单击](../Images/4159aa5aa78f0b17fd6e26eebb88ce2f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:17:19.293

只需使用您正在使用的编程语言的文件扩展名保存文件，例如 c 的 .c 和语法突出显示就会出现。

# jquery - jQuery：根据鼠标位置移动的全屏“背景”图像

> ID：12865005
> 
> 赞同：3
> 
> 时间：2012-10-12T18:27:15.717
> 
> 标签：jquery, css, background, viewport

我正在尝试实现根据鼠标位置移动的全屏背景。

例如，如果您将鼠标移动到左上角，则视口将显示图像的左上角以及可以放入视口的图像的其余部分。在这种情况下，假设 - 屏幕是 1280 * 960，但图像是 1800 * 1300。

![例子](../Images/045c225732c2e05bf847cbc771523cd1.png)

我以前见过这个，但我不记得在哪里，我想不出用来描述我想要达到的目标的术语。这不是视差或滚动背景图像......

寻找一个 jQuery 插件和开始的 CSS 我需要完成它。

感谢任何知道答案和解决方案的人！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-23T07:10:34.720

就这样，这有一个更清晰的答案。

该效果称为平移，您可以使用以下插件在 jQuery 中实现此目的：

[http://manos.malihu.gr/jquery-image-panning/](http://manos.malihu.gr/jquery-image-panning/)

还值得看一下这个例子，它只是使用全屏图像从左到右平移（这是使用 CSS 封面，因此不适合跨浏览器，但如果您热衷于自定义，则提供鼠标悬停效果的关键概念工作）

[http://www.dnitza.com/super-simple-panning-background/](http://www.dnitza.com/super-simple-panning-background/)

来自主题的另一个活生生的例子：

[http://demo.undsgn.com/egofolio/light/portfolio/double-trouble/](http://demo.undsgn.com/egofolio/light/portfolio/double-trouble/)

# ruby-on-rails-3 - Rails 服务器无法以 ruby mine 中的退出代码 1 启动

> ID：12865006
> 
> 赞同：0
> 
> 时间：2012-10-12T18:27:17.680
> 
> 标签：ruby-on-rails-3, webserver, rubymine, webrick

我昨天使用我的服务器没问题。今天回来，启动服务器时出现错误

```
runnerw.exe C:\Ruby187\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) "C:/Users/Stefan/RubymineProjects/gallery/gallery-app/script/rails" server -b 127.0.0.1 -p 3000 -e development
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://127.0.0.1:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/Ruby187/lib/ruby/gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:278:in `eval_block': C:/Ruby187/lib/ruby/gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1508: syntax error, unexpected kEND, expecting $end (SyntaxError)
    from C:/Ruby187/lib/ruby/gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:297:in `clear!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:297:in `each'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:297:in `clear!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:35:in `clear!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:33:in `each'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:33:in `clear!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:15:in `reload!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:26:in `updater'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
    from C:0:in `execute_if_updated'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application/finisher.rb:66
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `run_initializers'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `send'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from C:/Users/Stefan/RubymineProjects/gallery/gallery-app/config/environment.rb:5
    from C:/Users/Stefan/RubymineProjects/gallery/gallery-app/config.ru:4:in `require'
    from C:/Users/Stefan/RubymineProjects/gallery/gallery-app/config.ru:4
    from C:/Ruby187/lib/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from C:/Ruby187/lib/ruby/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from C:/Users/Stefan/RubymineProjects/gallery/gallery-app/config.ru:1:in `new'
    from C:/Users/Stefan/RubymineProjects/gallery/gallery-app/config.ru:1

Process finished with exit code 1 
```

不知道是什么原因造成的，这让我很困惑，为什么它现在才决定弹出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:31:37.773

我能够通过重新安装`actionpack`gem 来解决这个问题。它一定是损坏了，或者我在昨晚和今天之间不小心更改了它。

# c++ - 有效地计算来自两个加权集合的对，按每对的总权重排序

> ID：12865007
> 
> 赞同：2
> 
> 时间：2012-10-12T18:27:17.980
> 
> 标签：c++, algorithm, language-agnostic

假设我有两组数据，每个条目都包含一个权重。每组按权重升序排列。我将列出几个示例集：

```
Set 0: {4, 8, 19, 25, 25, 26}    
Set 1: {1, 2, 3, 8, 20, 27} 
```

我想找到这两组之间的每一对，但我想按照它们的总重量从小到大的顺序找到这些对。所以 4+1、4+2、4+3、8+1 等。你可以假设这些集合是 c++ `std::multiset`，但除此之外，我认为它在任何语言中都是一样的。

现在，我考虑过使用 2 个迭代器并从第一个迭代器开始迭代，然后按顺序每秒钟配对一次，等等，但这不会从最小的总权重开始按顺序计算每一对，因为在这个例子中是`Set 0: 4`+ `Set 1: 8`> `Set 0: 8`+ 。`Set 1: 1`我总是可以将结果转储到为我进行排序的容器中，但这似乎效率低下。我还有其他的优化取决于能否做到这一点。有没有一种聪明的方法可以在最后没有额外的排序？

编辑：我需要得到每一个可能的配对，所以它不像增加一个迭代器或另一个迭代器来获得最小的和那么简单。这将错过大多数（一半？）对。虽然可能有某种迭代器堆栈......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:51:52.613

Let us denote the 2 sorted lists A (size m) and B (size n).

The algorithm:

1.  Calculate the sum of A[0] and B[i] for all i = 0 to n - 1\. You need to identify which element from list A the sum includes - **one way** is to attach the index (which is 0 for all sums here). Push all the pairs into a min-heap which is ordered by the sum.
2.  Pop the heap, and take out the sum. Use the index attached to calculate the sum with the next element in list A. If the index is m - 1 already, no need to do anything; otherwise increment the index and push it back into the heap.
3.  Repeat step 2 until the heap is empty (for all m * n values).

Step 1 will be O(n log n).

Step 2 is at most O(log n) since the size of the heap may decrease and never increase. Repeating step 2 by m * n times result in time complexity of O(mn log n).

Overall complexity is O(mn log n).

By using the smaller list as list B in the algorithm above, we can achieve a slightly better time complexity (we only need to manage a small heap instead of a big heap).

An implementation using `std::priority_queue` (by [Stacker](https://stackoverflow.com/users/1094151/stacker)):

```
#include <iostream>
#include <set>
#include <queue>
#include <limits>

std::multiset<int> set1 {4, 8, 19, 25, 25, 26};
std::multiset<int> set2 {1, 2, 3, 8, 20, 27};

struct Node
{
  Node(std::multiset<int>::const_iterator set1Iterator, int set2Value) :
    set1Iterator(set1Iterator),
    set2Value(set2Value),
    sum(*set1Iterator + set2Value)
  {
  }

  bool operator < (const Node& other) const
  {
    return sum > other.sum; // Reverse order as std::priority_queue sorts for the greatest value
  }

  std::multiset<int>::const_iterator set1Iterator;
  int set2Value;
  int sum;
};

int main()
{
  std::priority_queue<Node> heap;
  for (auto i = set2.begin(); i != set2.end(); ++i)
    heap.push(Node(set1.begin(), *i));

  while (!heap.empty())
  {
    Node min(heap.top());
    heap.pop();

    std::cout << *min.set1Iterator << " + " << min.set2Value << " = " <<
      min.sum << std::endl;
    if (++min.set1Iterator != set1.end())
    {
      min.sum = *min.set1Iterator + min.set2Value;
      heap.push(min);
    }
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:30:24.873

```
#include <iostream>
#include <set>
#include <vector>
#include <limits>

std::multiset<int> set1 {4, 8, 19, 25, 25, 26};
std::multiset<int> set2 {1, 2, 3, 8, 20, 27};

int main()
{
  std::vector<std::pair<std::multiset<int>::const_iterator,
    std::multiset<int>::const_iterator>> setIterators;
  for (auto i = set1.begin(); i != set1.end(); ++i)
    setIterators.push_back(std::make_pair(i, set2.begin()));

  for (std::size_t count = set1.size() * set2.size(); count != 0; --count)
  {
    int minValue = std::numeric_limits<int>::max();
    auto minElement = setIterators.begin();
    for (auto i = setIterators.begin(); i != setIterators.end(); ++i)
    {
      if (i->second == set2.end())
        continue;
      int sum = *i->first + *i->second;
      if (sum < minValue)
      {
        minValue = sum;
        minElement = i;
      }
    }
    std::cout << *minElement->first << " + " << *minElement->second << " = " <<
      minValue << std::endl;
    ++minElement->second;
  }
  return 0;
} 
```

输出：

```
$ g++ -std=c++11 main.cpp -o main && ./main
4 + 1 = 5
4 + 2 = 6
4 + 3 = 7
8 + 1 = 9
8 + 2 = 10
8 + 3 = 11
4 + 8 = 12
...
26 + 27 = 53 
```

# ios - UIPickerView 有两行

> ID：12865008
> 
> 赞同：0
> 
> 时间：2012-10-12T18:27:20.217
> 
> 标签：ios, xcode, uipickerview

我正在尝试为一些单位的东西制作一个简单的转换器，我似乎无法管理从两列中获取数据并将它们变成我可以计算的变量。我也遇到了一些错误，如果有人愿意调查，我将不胜感激。错误出现在#pragma 标记处 - PickerView Delegate，我认为我的代码中有 90% 是错误的。

这是完整的 .h 文件。（希望这次我做对了）如果有人有时间研究它，这里是完整的项目。[http://www.mediafire.com/download.php?ss706o783ioa59u](http://www.mediafire.com/download.php?ss706o783ioa59u)

```
#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController
@synthesize _convertFrom, _convertTo, _convertRates;
@synthesize dollarText, picker, resultLabel;
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
_convertFrom = @[@"Australia (AUD)", @"China (CNY)",
@"France (EUR)", @"Great Britain (GBP)", @"Japan (JPY)"];

_convertRates = @[ @0.9922f, @6.5938f, @0.7270f,
@0.6206f, @81.57f];

_convertTo = @[@"Australia (AUD)", @"China (CNY)",
@"France (EUR)", @"Great Britain (GBP)", @"Japan (JPY)"];

_convertRates = @[ @0.9922f, @6.5938f, @0.7270f,
@0.6206f, @81.57f];

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
//dont forget to put something in here later
}

- (IBAction)textFieldReturn:(id)sender {
[sender resignFirstResponder];

}

#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:      (NSInteger)component
{
if (component == 0)  {
    return [_convertFrom count];
}
return [_convertTo count];
}

- (NSString *) pickerView: (UIPickerView *)pickerView
          titleForRow:(NSInteger)row
         forComponent:(NSInteger)component
{
if (component == 0) {
    return [_convertFrom objectAtIndex:[pickerView selectedRowInComponent:0]];
    }
return [_convertTo objectAtIndex:[pickerView selectedRowInComponent:1]];
    }

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
    float from = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]     floatValue]];
    float to = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1] floatValue]];
float input = [dollarText.text floatValue];

// This stuff is from some guide.
//float rate = [_convertRates[row] floatValue];
//float dollars = [dollarText.text floatValue];
//float result = dollars * rate;

NSString *resultString = [[NSString alloc] initWithFormat:
                          @"%.2f @% = %.2f %@", input, [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0] floatValue]], result, [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0] floatValue]]];
resultLabel.text = resultString;
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showAlternate"]) {
    [[segue destinationViewController] setDelegate:self];
    }
}

@end 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:47:32.380

我刚刚看了你的代码，但对你的计算仍有一些疑问，但你的大括号是错误的，请只像这样实现它：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
    float from = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]] floatValue];
    float to = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];
    float input = [dollarText.text floatValue];

    // This stuff is from some guide.
    float rate = from;
    float dollars = input;
    float result = dollars * rate;

    NSString *resultString = [[NSString alloc] initWithFormat:
                              @"result = %f = %f * %f", result, dollars, rate];
    resultLabel.text = resultString;
} 
```

-（IBAction）清除{

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:52:06.113

这两行：

```
float from = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]     floatValue]];
float to = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1] floatValue]]; 
```

应该：

```
float from = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]] floatValue];
float to = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue]; 
```

你有括号在错误的位置。看起来'resultString'行多次出现同样的问题。

# c++ - 使用 c(++) 扩展时的 @staticmethod

> ID：12865009
> 
> 赞同：0
> 
> 时间：2012-10-12T18:27:24.533
> 
> 标签：c++, python, c, extend

在 Python 中创建一个可用的类非常简单： [http ://code.activestate.com/recipes/54352-defining-python-class-methods-in-c/](http://code.activestate.com/recipes/54352-defining-python-class-methods-in-c/)

但是如何使方法静态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:39:12.110

使用[PyMethodDef](http://docs.python.org/c-api/structures.html#PyMethodDef)`METH_STATIC`中的标志。该方法将传递 NULL 作为第一个参数，而不是类型的实例。

```
static PyMethodDef FooMethods[] = 
{
    {"__init__", Foo_init, METH_VARARGS, 
     "doc string"},
    {"doSomething", Foo_doSomething, METH_VARARGS | METH_STATIC,
     "doc string"},
    {NULL},
}; 
```

# asp.net - IE8 文档模式设置不正确

> ID：12865011
> 
> 赞同：0
> 
> 时间：2012-10-12T18:27:31.897
> 
> 标签：asp.net, http-headers

我有一个网站，IIS 在标头中发送以下内容（这对于整个网站都是正确的）：

```
 X-UA-Compatible: IE=Edge 
```

但是，在特定页面上，我的`<head>`部分顶部有以下内容：

```
<!--[if lt IE 9]>
    <meta http-equiv="X-UA-Compatible" content="IE=7" />
<![endif]--> 
```

IE8 正确解释了这一点，因为它显示在我查看页面源代码的顶部。但是，它永远不会将我的文档模式从“IE8 标准”更改为“IE7 标准”。浏览器模式默认在 IE8 兼容性视图中（它是一个内网站点），但即使在正常的 IE8 模式下，它仍然存在相同的文档模式问题。

我认为页面上的元标记会覆盖服务器初始标头中发送的任何内容。我还能做些什么来更改这一页的文档模式吗？

编辑：如果我将以下内容放在我的 aspx 页面的 Page_Load 中，我可以强制 IE7 文档模式，`Response.AddHeader("X-UA-Compatible", "IE=7");`所以我现在在 IE=Edge 标题之后显示了这个标题，所以只有第二个被解释。但这实际上并没有解决我的问题，因为上面的元标记具有不在 IE9 或 IE10 中使用的优点，并且当强制进入 IE7 文档模式时，页面的一些细节会消失。我只是特别需要它来为 IE8 和更早版本工作。

此外，如果我删除条件 CSS，它似乎使文档模式正确。那么是否有可能在页面加载后执行条件 CSS，如果是这样，我该如何修复它以使 IE7 文档模式仅显示在 IE8 和更早的浏览器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:35:13.377

你确定你的订单正确吗？我刚刚尝试了我在[这里](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)找到的这个页面，我的浏览器默认为“IE7 标准”。

```
<html>
<head>      
  <!--[if lt IE 9]>
  <meta http-equiv="X-UA-Compatible" content="IE=7" >
  <![endif]-->
  <title>My webpage</title>
</head>
<body>
  <p>Content goes here.</p>
</body>
</html> 
```

# javascript - 使用 jQuery 一个一个字符地显示文本

> ID：12865012
> 
> 赞同：1
> 
> 时间：2012-10-12T18:27:37.607
> 
> 标签：javascript, jquery, jquery-ui

我想在`ul`某些文本的鼠标悬停时一一显示标签中的文本。它显示了一些错误。我该如何解决？

[您可以在链接中的](http://wordpress.vinspro.org/invus/jquery-type.html)“将鼠标悬停在此处再次悬停”链接上检查代码鼠标悬停。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:30:14.757

您是 gettign 错误，因为您正在调用未定义的函数： `hideCaption`

# entity-framework - 无法使用 Devart dotConnect for PostgreSQL 产品正确生成 EF 模型

> ID：12865017
> 
> 赞同：0
> 
> 时间：2012-10-12T18:27:53.007
> 
> 标签：entity-framework, postgresql, devart, dotconnect

在使用 Devart dotConnect for PostgreSQL 产品从现有 PostgreSQL 数据库创建实体框架模型时遇到问题。该产品提供 2 种从数据库生成 EF 模型的方法，但似乎都不起作用。将 ADO.Net 实体数据模型与此 Devart 提供程序一起使用时，从数据库生成模型时，向导中的表列表显示为空。使用 Devart 实体模型时，表列表正确显示在向导中并生成模型，但缺少所有导航属性，并且所有不可为空的字段都生成为实体键。任何人都有使用此产品的经验并且可以确认我是否遇到错误或我没有正确使用它？谢谢

艾蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:39:02.287

经过一番调查，我用来从实体框架访问数据库的 PostgreSQL 中的数据库用户似乎缺少 INHERIT 属性。如果没有这个属性，用户就不会从他的组权限继承，使他能够访问数据库对象......

两种生成 EF 模型的方式之间的行为差​​异是由于在 ADO.NET 实体数据模型向导中获取元数据主要是通过“information_schema”来实现的，而在 Entity Developer 中是通过“pg_catalog”来实现的。

# css - 灰度 SVG 在 Firefox 上不起作用

> ID：12865023
> 
> 赞同：2
> 
> 时间：2012-10-12T18:28:18.767
> 
> 标签：css, svg

[关联](http://demos.namanyayg.com/furiousnerds)

在 chrome 中，它运行良好。但是，在 Firefox 中，图像不会出现。

我已经设置了 SVG 的 mime 类型，并且 mime 类型检查器显示 mime 类型是正确的。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:06:42.930

这是因为您在 html 元素上使用新的[速记符号](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html#FilterFunction)来过滤效果（定义[见此处](https://dvcs.w3.org/hg/FXTF/raw-file/tip/filters/index.html)），在 Firefox 中，您必须对过滤器使用 url(#...) 符号（也是同一规范的一部分，并且SVG 1.1，它已经工作了很长时间）。

如果您想了解如何在大多数浏览器中使用灰度过滤器，[请参见此处](http://xn--dahlstrm-t4a.net/svg/filters/grayscale-filter.svg)，如果您想了解如何使其应用于某些 html，请参见[此处](http://robert.ocallahan.org/2008/06/applying-svg-effects-to-html-content_04.html)。

# javascript - 将 SVGSVGElement 转换为字符串

> ID：12865025
> 
> 赞同：20
> 
> 时间：2012-10-12T18:28:24.397
> 
> 标签：javascript, xml, svg

我一直在寻找答案，但找不到将 SVGSVGElement 转换为字符串的方法。我正在使用 Chrome(22)。如果之前已经回答过这个问题，但我无法找到它（在此处或在 Google 上），我深表歉意。

我在 HTML 页面中嵌入了 SVG (XML) 图像，并正在使用 Javascript 操作 SVG（添加/删除形状等）。我的目标是将修改后的 SVG XML 图像放入内存并将其保存到文件中（通过发布到 php 表单）。post 和 php 表单正在工作，但我目前遇到的问题是我无法获得修改后的 SVG 图像的字符串表示形式。

我在下面发布了一个简化页面，我只是试图从加载的 SVG 中获取原始 XML 并将其粘贴到 textarea 中。如果您测试下面的 html，您会看到 textarea 只包含字符串：“ **[object SVGSVGElement]** ”。

我可以使用 Javascript 访问 SVG 中的每个元素并操作元素和属性，但我似乎无法将整个内容变成一个字符串。我已经尝试过 JQuery 和 JQuery SVG 但无法让它工作。console.log() 能够显示 svg/xml，但它不是字符串，所以我似乎无法存储/发送它。非常感谢任何帮助！

我什至会找到一种将任何 SVG*Element 对象转换为字符串的方法，因为我可以使用 .childNodes[x] 属性来遍历所有对象，但这些仍然是对象，我似乎无法获得原始 XML。

测试.html：

```
<html>
<head>
<script type='text/javascript' src='js/jquery.js'></script>
<script>
function startup() {
    svgOutput = document.getElementById("svgCanvas").getSVGDocument().documentElement;    
    console.log(svgOutput);
    document.getElementById("output").value = svgOutput;
}
</script>
</head>
<body style="margin: 0px;" onload="startup()">
<textarea id="output"></textarea><br/>
<embed src="svg1.svg"
    id="svgCanvas"
    width="75%" height="75%"
    type="image/svg+xml"
    codebase="http://www.adobe.com/svg/viewer/install"
></embed>
</body>
</html> 
```

svg1.svg：

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events">
<image id="svgBackground" x="0px" y="0px" width="100%" height="100%" preserveAspectRatio="none" xlink:href="bg1.jpg"/>
<g id="1">
    <text id="shape" x="30" y="30" font-size="16pt" fill="black" visibility="hidden">circle</text>
    <text id="elementName" x="30" y="30" font-size="16pt" fill="black" visibility="hidden">Element 1</text>
    <circle id="circle" cx="12%" cy="34%" r="15" opacity="1" fill="grey" stroke="darkgrey" stroke-width="5px"/>
</g>
<g id="2">
    <text id="shape" x="30" y="30" font-size="16pt" fill="black" visibility="hidden">circle</text>
    <text id="elementName" x="30" y="30" font-size="16pt" fill="black" visibility="hidden">Element 2</text>
    <circle id="circle" cx="21%" cy="63%" r="15" opacity="1" fill="grey" stroke="darkgrey" stroke-width="5px"/>
</g>
</svg> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T19:12:57.867

您可以使用[XMLSerializer](https://developer.mozilla.org/en-US/docs/XMLSerializer)将元素转换为字符串。

```
var s = new XMLSerializer();
var str = s.serializeToString(documentElement); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-02-02T14:55:15.933

SVG 是一个 DOM 元素，因此您可以简单地使用`outerHTML`SVG Elements 的属性来获取序列化的 HTML。

```
 var stringData = document.getElementById('my-svg').outerHTML; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T10:40:03.543

使用 jQuery 更容易，如下所示：

```
svgObject  // your SVGSVGElement

svgStringData = $(svgObject).html()  // will convert data of SVGSVGElement Object to string 
```

# google-places-api - 如何防止地方提交批准？

> ID：12865029
> 
> 赞同：0
> 
> 时间：2012-10-12T18:28:50.707
> 
> 标签：google-places-api

有没有办法对地方/事件提交进行沙箱（用于测试）所以它们不被批准（所以它们不被提交到审核队列）？

[https://developers.google.com/places/documentation/actions](https://developers.google.com/places/documentation/actions)

说：

“新地点将立即在您的应用程序发起的地点搜索中可用，并将进入审核队列以考虑用于 Google 地图。新添加的地点在获得审核程序批准之前将无法用于其他应用程序。 "

谢谢

弗雷德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:49:15.297

不，没有办法阻止提交地点/事件提交以供审核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:31:06.143

目前，只有少数受信任的应用程序提交的请求会被审核以集成到 Google 地方信息中。

# c# - 将对象分配给 C# 大对象堆时是否引发事件？

> ID：12865030
> 
> 赞同：1
> 
> 时间：2012-10-12T18:28:52.267
> 
> 标签：c#, memory-management

我想让我的程序（比如在内存监视模式下）告诉我它何时将某些东西分配到大对象堆上。这样我也许可以调整不应该使用 LOH 的区域。

将对象分配到大对象堆时是否会引发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:39:46.813

看看[CLR ETW Events](http://msdn.microsoft.com/en-us/library/dd264810.aspx)下的[垃圾收集](http://msdn.microsoft.com/en-us/library/ff356162.aspx)事件：

您将对 和 最`GCAllocationTick_V2 Event`感兴趣`GCStart_V1 Event`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:39:44.307

在 LOH 上分配大小 >= 85000 字节的对象。据我所知，除非您想为 CLR 提供内存分配的自定义实现，否则不会引发任何事件。但是，您可以使用 SOS（罢工之子）调试扩展来分析堆。

# ruby - Apache2 + 乘客 + Redmine 的问题

> ID：12865035
> 
> 赞同：1
> 
> 时间：2012-10-12T18:29:18.013
> 
> 标签：ruby, passenger, redmine

我在安装 Redmine 时遇到问题。它似乎在 webrick 下运行得很好，如下所示：

```
redmine@machine:~$ /usr/bin/ruby1.8 script/rails server webrick -e production 
```

请注意，这是当我以用户“redmine”身份登录时。

我针对现有的 Apache2 安装安装了 Passenger (v3.0.17)，并使用 /etc/apache2/mods-enabled/passenger.conf，如下所示：

```
LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerDefaultUser www-data
PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17
PassengerRuby /usr/bin/ruby1.8 
```

我的虚拟主机配置也很简单：

```
<VirtualHost *:80>
    ServerAdmin webmaster@machine.com
    ServerName redmine.machine.com

    RailsEnv production

    DocumentRoot /home/redmine/redmine-2.1/public

    <Directory /home/redmine/redmine-2.1/public>
        # This relaxes Apache security settings.
        AllowOverride all
        # MultiViews must be turned off.
        Options -MultiViews
    </Directory>

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn
    ErrorLog /var/log/apache2/redmine.error.log
    CustomLog /var/log/apache2/redmine.access.log combined
</VirtualHost> 
```

当我运行它时，我收到一个错误“没有要加载的文件--bundler”。但是，请注意：

```
redmine@machine:~$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activerecord-mysql2-adapter (0.0.3)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
builder (3.0.0)
bundler (1.2.1)
coderay (1.0.8)
daemon_controller (1.0.0)
erubis (2.7.0)
fastercsv (1.5.5)
fastthread (1.0.7)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
jquery-rails (2.0.3)
json (1.7.5)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
mysql (2.8.1)
mysql2 (0.3.11)
net-ldap (0.3.1)
passenger (3.0.17)
pg (0.14.1)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-openid (1.3.1)
rack-ssl (1.3.2)
rack-test (0.6.2)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rmagick (2.13.1)
ruby-openid (2.1.8)
rvm (1.11.3.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.11)
tzinfo (0.3.33) 
```

中的所有文件`/home/redmine/redmine-2.1`都归`redmine:redmine`. 所有目录都是`0755`，所有文件都是`0644`.

现在，当我展示流程时，我注意到了一件有趣的事情：

```
redmine@machine:~$ ps -ef | grep "Passenger"
root     21764 21759  0 10:49 ?        00:00:00 PassengerWatchdog
root     21773 21764  0 10:49 ?        00:00:00 PassengerHelperAgent
root     21775 21773  0 10:49 ?        00:00:00 Passenger spawn server                                                                                                                                           
nobody   21778 21764  0 10:49 ?        00:00:00 PassengerLoggingAgent 
```

我当然不是 Ruby/Rails/Passenger/Redmine 方面的专家，但我怀疑Passenger 运行`nobody`而不是`redmine`可能是问题所在。根据此处的文档：[http](http://www.modrails.com/documentation/Users%20guide%20Apache.html#user_switching) ://www.modrails.com/documentation/Users%20guide%20Apache.html#user_switching，Passenger应该将用户切换到拥有 /config/environment.ru 的用户，只要那个用户可以读/写日志，但不是`root`，对吗？从上面可以看出，该文件（实际上是整个应用程序）由 拥有`redmine`，包括`rwx`所有者的日志和`redmine`≠`root`所以，我相信我已经通过了乘客切换运行的要求`redmine`.

**三个直接问题：**

1.  这是我无法在Passenger下运行Redmine的原因吗？和**
2.  为什么乘客仍然运行`nobody`？**
3.  在尝试解决此问题时，我尝试添加以下行：

    乘客默认用户 www 数据

进入我的 /etc/apache2/mods-enabled/passenger.conf （如上所示），但它似乎没有生效。有这条线和没有这条线，一切的结果都是一样的。我没想到它会解决问题，但我确实希望它会显示为当我列出进程时，Passenger 运行的用户。它没有。

其他可能相关的信息：

```
redmine@machine:~$ uname -a
Linux machine.****.com 2.6.18-028stab092.1 #1 SMP Wed Jul 20 19:47:12 MSD 2011 x86_64 GNU/Linux
Ubuntu 10.04.4 LTS

redmine@machine:~$ /usr/bin/ruby1.8 --version
ruby 1.8.7 (2010-01-10 patchlevel 249) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:12:19.927

捆绑器是问题所在。你有什么特别的理由使用 Ruby 1.8.x 吗？我强烈建议您升级到 Ruby 1.9.x，最好是 1.9.3。否则，您可能想尝试更古老的捆绑器[版本](http://rubygems.org/gems/bundler/versions)，例如 0.9.x。此外，您应该将 Rubygems 降级到[1.3.7 或类似](https://rubygems.org/gems/rubygems-update/versions)的版本。

理论上Rubygems可以降级如下：

```
sudo gem update --system 1.3.7 
```

要安装旧的捆绑器版本：

```
sudo gem uninstall bundler
sudo gem install bundler --version=0.9.1 
```

有几次我不得不处理过时的 Ruby 软件，最好的办法是*不要*安装系统 Ruby，而是自己从源代码编译它。（毕竟不是那么难，Ruby 已经很好地打包了。）然后从源代码安装适当的 Rubygems 版本。或者看看[RVM](http://en.wikipedia.org/wiki/Ruby_Version_Manager)，虽然这在开始时可能会很痛苦。

顺便说一句：我还建议使用 nginx 而不是 Apache。安装没有很好的文档记录，但因此配置文件要简单得多。

# android - 安卓地图API

> ID：12865038
> 
> 赞同：-1
> 
> 时间：2012-10-12T18:29:41.670
> 
> 标签：android, api, maps

我正在制作一个 android 地图应用程序，并且我对 API 了解更多，但我需要知道是否有人可以帮助我找到一个 API，使我能够将地图服务器更改为本地服务器。我还需要一些关于该 API 的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:47:59.747

你可以试试

*   MapsForge - 两者，链接中的 API 和文档：[mapsforge](http://code.google.com/p/mapsforge/)
*   Osmdroid - 两者，链接中的 API 和文档：[Osmdroid](http://code.google.com/p/osmdroid/)

地图锻造。两者，链接中的 API 和文档：[mapsforge](http://code.google.com/p/mapsforge/)

# java - 如何使我的 Swing JComboBox 水平扩展而不是垂直扩展？

> ID：12865039
> 
> 赞同：2
> 
> 时间：2012-10-12T18:29:42.987
> 
> 标签：java, swing, jscrollpane, jcombobox, jpopup

我正在使用 Swing 并将 JComboBox 添加到 JPanel。通常，当您单击 JComboBox 时，它会垂直枚举可能的选项（类似于任何网站上的组合框）。

但是，我希望 ComboBox 水平扩展 - 有没有办法在不编写自定义渲染器的情况下做到这一点？

垂直扩展

```
[ ComboBox ]

- Option
- Option
- Option 
```

横向扩展

```
[ ComboBox ] -- [ Option | Option | Option | Option ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:43:21.260

我很确定你的问题的答案是“不”。您将必须至少构建渲染器的一部分才能为您执行此操作。但这是一个开始：

```
//Override the createPopup method - everything else can stay the same
public static CustomRenderer extends MetalComboBoxUI{
    @Override
    protected ComboPopup createPopup() {
        // Do something different here
        ComboPopup result = super.createPopup();
        return result;
    }
} 
```

并且您将希望将此 UI 安装在您希望将其应用于使用的 ComboBox 上`box.setUI(new CustomRenderer());`

# javascript - 调整背景图像大小以适合浏览器窗口 JavaScript/HTML/CSS/JQuery

> ID：12865048
> 
> 赞同：4
> 
> 时间：2012-10-12T18:30:19.117
> 
> 标签：javascript, jquery, html, css

如何设置背景图像以适合浏览器窗口的确切大小。我熟悉 JavaScript/HTML/CSS/JQuery，所以任何语言都适合我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:49:01.737

感谢@Nelson 的评论，我在这里找到了答案：http: [//css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:33:20.177

HTML 和 CSS：

```
<html>
<head>
<title>bg</title>
<style>
.bg {
    background: url(yourimage);
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
}
</style>
</head>

<body>
<div class="bg"></div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:40:18.710

我以前为此使用过 Backstretch jQuery 插件。

[http://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T08:51:12.160

试试这个：

```
<img src="images/BG.jpg" 

style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-5000;"> 
```

[http://thewebthought.blogspot.com/2010/10/css-making-background-image-fit-any.html](http://thewebthought.blogspot.com/2010/10/css-making-background-image-fit-any.html)

# c# - 如何制作可插入的静态类

> ID：12865049
> 
> 赞同：3
> 
> 时间：2012-10-12T18:30:21.337
> 
> 标签：c#, .net, plugins, static-classes

我知道如何在 c# 中制作可插入的东西。定义一个接口，`Activator.CreateInstance(<class>)`等等。或者我可以有一个显式创建插入类的实例的代码路径。很多种方法。

但是，如果我想使可插入的服务是静态的怎么办（我知道我可以重构，所以它不是，但这不是问题的重点）

具体例子。我有一个提供磁盘 I/O 抽象的类（读取文件、列表目录……）。现在我想要这个抽象的不同实现，它提供来自真实 FS、数据库的文件。

根据 Olivier Jacot-Descombes 的回复，我将有一个`FileSystem`像这样的课程（这是真实的）

```
public static class FileSystem
{
    static IFSImplemenation s_imple;
    static FileSystem()
    {
        if(<some system setting>)
            // converted to singleton instead of static
            s_imple = new OldFileSystem() 
        else
            s_imple = new DbFileSystem();
    }

    public static byte[] ReadFile(string path)
    {
        return s_imple.ReadFile(path);
    }

    ...
} 
```

重申一下-我有大量代码不想更改，因此保持调用签名相同很重要-此解决方案实现了这一点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:35:21.127

你不能，这是 .NET 和大多数面向对象的系统/语言中类型系统的限制。

原因是“可插拔的东西”（正如您所指的那样）需要[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)才能有效。

您定义一个合同（一个接口，在 .NET 中），然后您*实现*该合同。您的系统只处理*合同*。

静态成员在 .NET 中不是多态的，因此您永远无法让它们实现合同。

对于您的磁盘 I/O 抽象示例，您不会为此创建静态类，而是创建一个接口并实现该接口，并在接口周围传递。

当然，使用接口的好处是更容易测试合同实施的双方：

*   在合约是客户端的情况下，您可以轻松地模拟接口并将模拟传递给合约的消费者（这是您可能开始考虑[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)的地方）
*   您可以将实现与系统的其余部分分开测试。

在你的磁盘 I/O 抽象的情况下，对于调用你的合约的所有东西，你永远不必担心*实际*接触文件系统，你只需要让合约的行为（通过适当的模拟设置）就好像它*正在*接触一样文件系统。

如果您有一个通过静态成员公开的现有服务，并且您希望能够将其与另一个实现交换，那么您必须执行以下操作：

*   创建一个定义服务操作的抽象（合同/抽象类型）。
*   创建一个实现，将调用从抽象实现的实例转发到静态方法。
*   使用实现实例重新连接对服务的所有静态调用。此时，您确实*必须*使用某种依赖注入；如果你不这样做，你只是在调用站点创建具体的实现，这几乎是一样的（如果你想使用另一个实现，你必须再次更改每个调用站点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:36:05.200

静态类不是“可插入的”。如果您希望能够将其换出，则需要对其进行重构以使用可以注入的接口。

有些类有一个静态`Current`或`Default`参数，例如 ServiceLocator。然后，您可以使用在静态上下文中`ServiceLocator.Current`访问当前。`IServiceLocator`

您可以更进一步并隐藏`Current`对象。虽然我不建议这样做，但它可以避免重构所有代码的需要。但是，使用这种方法的维护要高得多，因为`Foo`没有实现`IFoo`。

假设你有一个静态类`Foo`

```
static class Foo
{
    public static string GetBar() { return "Bar"; }
} 
```

你可以做一个界面`IFoo`

```
interface IFoo
{
    string GetBar();
} 
```

现在将您的类 Foo 更改为以下

```
static class Foo 
{
    private static IFoo _foo;

    public static void SetFoo(IFoo foo) { _foo = foo; }

    public static string GetBar() { return _foo.GetBar(); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:39:03.897

使用静态类作为非静态实现的外观

```
public static class DB
{
    private static IDbInterface _implementation;

    public static void SetImplementation(IDbInterface implementation)
    {
        _implementation = implementation;
    }

    public static Customer GetCustomerByID(int custId)
    {
        return _implementation.GetCustomerByID(custId);
    }

    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T18:39:03.990

使您的静态类驻留在主机应用程序中并实际上是一个工厂：通过接口返回插件提供的实现。

# javascript - jQuery跨域请求在IE中仍然失败，但使用jsonp

> ID：12865053
> 
> 赞同：2
> 
> 时间：2012-10-12T18:30:43.840
> 
> 标签：javascript, jquery, internet-explorer-9, cross-domain

我的 Ajax 跨域请求在 IE 9 中失败并显示“访问被拒绝”。我已经阅读了有关该主题的几篇文章，并且 AFAIK 它应该可以工作。

1.  IE9 和 jQuery 1.8.1
2.  呼叫是`async`，`jsonp`并且`crossdomain`，`cache`是`false`。这些是我找到的先决条件。
3.  适用于最新的 Firefox 和 Chrome。
4.  `jQuery.support.cors`是真的
5.  甚至设置了响应标头`Access-Control-Allow-Origin:*`：（[SO](https://stackoverflow.com/questions/9485347/jquery-cross-domain-request-response-headers)）
6.  返回的 JSON 代码也是正确的，使用了检查器（另见 3。）

那么为什么**Access denied**会失败呢？任何想法？可能是因为我的代码是从“JavaScript”库中调用的，而不是`<script></script>`页面上的标签吗？

我错过了什么？

```
 // The code is part of an object's method (prototype)
    // code resides in a library "Mylib.js"

    $.ajax({
        type: 'GET',
        url: url,
        cache: false,
        async: true,
        crossdomain: true, // typo, crossDomain, see my answer below
        datatype: "jsonp", // dataType
        success: function (data, status) {
            if (status == "success" && !Object.isNullOrUndefined(data)) {  ... }

        },
        error: function (xhr, textStatus, errorThrown) {
           // access denied
        }
    }); 
```

-- 编辑 -- 基于 Robotsushi 的评论，一些进一步的研究 ---

1.  `XDomainRequest`确实，在jQuery源代码（1.8.1）中找不到
2.  如果我不设置 cors ( `jQuery.support.cors = true`)，我最终会出现“无传输”异常。
3.  仍然想知道为什么其他人在 IE9 跨域请求中明显成功，例如这里：[jQuery Cross-Domain Ajax JSONP Calls Failing Randomly For Unknown Reasons In Some IE Versions](https://stackoverflow.com/questions/9170718/jquery-cross-domain-ajax-jsonp-calls-failing-randomly-for-unknown-reasons-in-som?rq=1)
4.  jQuery 处理这个问题的方式似乎是围绕下面的代码，但在我的特定情况下没有调用它，不知道为什么？

    // 绑定脚本标签 hack transport jQuery.ajaxTransport( "script", function(s) {

    ```
    // This transport only deals with cross domain requests
    if ( s.crossDomain ) { 
    ```

5.  2010 年的类似情况：[Jquery $.ajax 在 IE 中的跨域调用失败](https://stackoverflow.com/questions/3362474/jquery-ajax-fails-in-ie-on-cross-domain-calls?rq=1)然而，这应该已经被后来的 jQuery 版本解决了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T21:21:25.567

好的，现在工作。我这边的几个错误：

1.  是`crossDomain: true, dataType: "jsonp"`，错字 - 错过了大写字母。
2.  JSONP 请求**不透明**。数据不是简单的 JSON 表示法，而是必须包含在 Js 函数调用中（在服务器端）：请参阅[http://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)基本上这意味着，如果您无法修改发送的数据, JSONP 不适合您。

考虑到所有因素，它有效。所以我的个人清单是：

1.  `json`尽可能使用（例如使用 Chrome、FF 或最有可能的 IE10）。确保设置了响应标头：`Access-Control-Allow-Origin:*`
2.  如果使用`jsonp`, 检查: `async: true`, `jsonp`and `crossdomain: true`, `cache`is `false`, `jQuery.support.cors`is`true`这些是我找到的先决条件。
3.  还要确保`jsonp`响应是函数调用（[JSON 包裹在函数中](http://en.wikipedia.org/wiki/JSONP)），**而不是**“普通的”JSON 数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-15T15:30:31.107

我在尝试访问存储在 Google Cloud Storage 上的一些 json 并使用 jQuery 的 ajaxing 访问时遇到了类似的问题。这在 Chrome 和 Firefox 中运行良好，但在 IE（9 及更低版本）中测试时收到“拒绝访问”消息。

我解决它的方法是明确地使用 jsonP：

1.  将我的 json 文件重写为带有 javascript 变量以保存 json 数据的 javascript 文件，例如

`(function (o) { variableName = [json]; }(window.[nameSpace] = window.[nameSpace]|| {}));`

1.  在 html 文件的标记中包含 javascript 文件的 url，例如

    `<script type="application/javascript" src="[url to javascript file]"></script>`

2.  通过它的 variableName 使用数据

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T18:35:49.740

IE 要求您使用`XDomainRequest`XHR 而不是跨站点。

你可以查看easyXDM，它是一个为你抽象这个过程的js库。

或者看到这个：

[拒绝访问 IE 上的 jQuery 脚本](https://stackoverflow.com/questions/5087549/access-denied-to-jquery-script-on-ie)

# linux - 编译到内核中的驱动程序的 init 函数调用

> ID：12865054
> 
> 赞同：5
> 
> 时间：2012-10-12T18:30:46.223
> 
> 标签：linux, operating-system, linux-kernel, linux-device-driver

`module_init()`在 Linux 中，如果设备驱动程序被构建为可加载的内核模块，那么在插入设备驱动程序内核模块时，内核会调用宏所指出的设备驱动程序的 init 函数。

这对于静态编译到内核中的设备驱动程序如何工作？他们的 init 函数是如何调用的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T01:36:50.593

内置驱动程序的*init*`module_init()`例程仍然可以使用宏来声明该入口点。或者`device_initcall()`当驱动程序永远不会被编译为可加载模块时，驱动程序可以使用。或者要在引导序列的早期移动其初始化，驱动程序可以使用`subsys_initcall()`.

在`include/linux/init.h`调用这些*init*例程的顺序中描述为：

```
/* initcalls are now grouped by functionality into separate 
 * subsections. Ordering inside the subsections is determined
 * by link order. 
 * For backwards compatibility, initcall() puts the call in 
 * the device init subsection.
 *
 * The `id' arg to __define_initcall() is needed so that multiple initcalls
 * can point at the same handler without causing duplicate-symbol build errors.
 */ 
```

我假设设备驱动程序的这些*小节*对应于`drivers`Linux 内核源代码树目录中的子目录，并且*链接顺序*记录在每个子目录的*built-in.o*文件中`drivers`。因此，在内核启动期间，每个内置驱动程序的*init*`do_initcalls()`例程最终都由in执行`init/main.c`。

设备驱动程序的*init*例程负责探测系统以验证硬件设备是否确实存在。当探测失败时，驱动程序不应分配任何资源或注册任何设备。

**更新**：
在内核命令行上传递选项“initcall_debug”将导致每次 initcall 的计时信息打印到控制台。initcalls 用于初始化静态链接的内核驱动程序和子系统，并为 Linux 引导过程贡献大量时间。输出如下所示：

```
calling  tty_class_init+0x0/0x44 @ 1
initcall tty_class_init+0x0/0x44 returned 0 after 9765 usecs
calling  spi_init+0x0/0x90 @ 1
initcall spi_init+0x0/0x90 returned 0 after 9765 usecs 
```

参考：[http ://elinux.org/Initcall_Debug](http://elinux.org/Initcall_Debug)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T12:14:25.413

如内核 init.h 中的注释所指定

> “module_init() 将在 do_initcalls() 期间（如果是内置的）或在模块插入时（如果是模块）被调用。”

如果你查看 init.h 那么你会看到

> # 定义 module_init(x) __initcall(x);

如果你仔细观察

> # 定义 __initcall(fn) device_initcall(fn)

和

> # 定义 device_initcall(fn) __define_initcall("6",fn,6)

所以基本上模块 init 只在启动时导致 initcall （**注意：仅适用于静态编译的模块**）。

# c++ - C ++：将输入的不同部分分配给不同的变量

> ID：12865056
> 
> 赞同：2
> 
> 时间：2012-10-12T18:30:47.943
> 
> 标签：c++, variable-assignment, fractions

我正在编写一个必须执行分数运算的程序，并且用户必须能够以 w/x（运算符）y/z 的形式输入表达式。（即 1/2 + 1/4。）如何获取该输入并将其不同部分分配给不同的变量，即分子、分母和运算符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:33:33.967

使用`scanf("%d/%d %c %d/%d", ...)`. 如果您愿意，可以使用跳过运算符和操作数之间的空格`scanf("%d/%d%*[ \t]%c%*[ \t]%d/%d", ...);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:46:45.190

如果您的教授还没有教您 scanf()，您可以使用 cin 获取输入，然后使用教授教您的方法*对其进行解析。*

阅读[本文](http://www.cs.uregina.ca/Links/class-info/330/ParsingLine/parsingline.html)应该可以帮助您理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:51:23.877

Supposing that you can assume that the input is well-formed, you can read a fraction by reading its constituent parts, similar to this:

```
int numerator, denominator;
char slash;
std::cin >> numerator >> slash >> denominator; 
```

Wrap that in a function that returns an instance of the data structure you're representing fractions with.

Then handle the operators.

# asp.net - 将两个或多个类模型导入 ASP.NET 上的单个控制器

> ID：12865058
> 
> 赞同：0
> 
> 时间：2012-10-12T18:30:59.053
> 
> 标签：asp.net, database, import, controller

我对[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)很陌生，但我知道一点 Java 编程。我想使用[邮政编码](http://en.wikipedia.org/wiki/ZIP_code)查询将返回字符串的数据库，然后使用该字符串查询另一个数据库。我想在同一个控制模型上做到这一点。我认为这很容易，而且听起来很容易。

当我创建控制器时，我放置了第一个数据库的模型类，到目前为止，我已经查询了第一个数据库，但是现在我有了字符串，我想通过 DBEntities 查询第二个数据库.

这会显示一条错误消息：

```
> The model item passed into the dictionary is of type
> 'System.Collections.Generic.List`1[FinalBallot.Models.AgainCandidate]',
> but this dictionary requires a model item of type
> 'System.Collections.Generic.IEnumerable`1[FinalBallot.Models.ZipTable]'. 
```

有没有办法以简单的方式解决这个问题？

```
public class Default1Controller : Controller
{
    private CandidatesDBEntities db = new CandidatesDBEntities();

    public string districString = "";
    //
    // GET: /Default1/

    public ViewResult Index(string searchString)
    {
        var queryZip = from s in db.ZipTables select s;
        var queryCandidates = from s1 in db.AgainCandidates select s1;
        double sT = 0;

        //method so it doesnt display the whole db
        if (String.IsNullOrEmpty(searchString))
        {
            queryZip = queryZip.Where(s => s.ZipL.Equals(0));
        }

        if (!String.IsNullOrEmpty(searchString))
        {
            sT = double.Parse(searchString);
            queryZip = queryZip.Where(s => s.ZipL.Equals(sT));

            try
            {
                districString = queryZip.ToList().ElementAt(0).District;
            }
            catch
            {
            }

            if (!String.IsNullOrEmpty(districString))
            {
                queryCandidates = queryCandidates.Where(s1 => s1.District.Equals(districString));
            }
        }
        return View(queryCandidates.ToList());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:49:57.953

在您看来，您是否将模型指定为`IEnumerable<ZipTable>`？您传递给视图的模型是`IEnumerable<AgainCandidate>`，因此如果您将模型指定为其他内容，则会收到错误消息。您需要将视图中的模型更改为`IEnumerable<AgainCandidate>`.

更新：根据您修改后的解释，您可以做几件事：1）创建一个“ViewModel”，为您要在页面上显示的每个集合创建两个属性，如下所示：

```
public class MyViewModel
{
    IEnumerable<ZipTable> Zips { get; set; }
    IEnumerable<AgainCandidate> Candidates { get; set; }
} 
```

在您的操作方法中实例化它并将其作为模型返回。这将是我的首选方法。

2）在您的操作方法中将您的两个集合存放在 ViewData 包中：

```
ViewData["Zips"] = queryZip.ToList();
ViewData["Candidates"] = queryCandidates.ToList();

return View(ViewData); 
```

您可以像这样在视图中提取这些数据：

```
@foreach (var zip in ViewData["Zips"] as IEnumerable<ZipTable>) 
{
    ...
} 
```

# android - Android GPS 检查崩溃？

> ID：12865066
> 
> 赞同：1
> 
> 时间：2012-10-12T18:31:34.983
> 
> 标签：android, crash, gps

从昨天开始广泛搜索，找不到有这个问题的人：

我创建了一个 GPS 检查函数，它只返回 true 或 false 指示 GPS 是否打开。这在模拟器上的 android 2.2 和 4.1 以及运行 4.1 的手机上运行良好。

功能如下：

```
 private Boolean checkGPSEnabled(){
        try{
            String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);
            if(provider.toLowerCase().contains("gps")){
                return true;
            }
        }
        catch(IllegalArgumentException e){
            return true;
        }

        return false;
    } 
```

问题是，当在 Android 模拟器上执行此检查时启用 GPS 时，模拟器会彻底崩溃。

以下是发生错误时在 LogCat 中打印的内容：

```
10-12 15:23:45.593: W/dalvikvm(899): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-12 15:23:45.644: E/AndroidRuntime(899): FATAL EXCEPTION: main
10-12 15:23:45.644: E/AndroidRuntime(899): java.lang.IllegalStateException: Could not execute method of the activity
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.view.View$1.onClick(View.java:3591)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.view.View.performClick(View.java:4084)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.view.View$PerformClick.run(View.java:16966)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.os.Handler.handleCallback(Handler.java:615)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.os.Looper.loop(Looper.java:137)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-12 15:23:45.644: E/AndroidRuntime(899):  at java.lang.reflect.Method.invokeNative(Native Method)
10-12 15:23:45.644: E/AndroidRuntime(899):  at java.lang.reflect.Method.invoke(Method.java:511)
10-12 15:23:45.644: E/AndroidRuntime(899):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-12 15:23:45.644: E/AndroidRuntime(899):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-12 15:23:45.644: E/AndroidRuntime(899):  at dalvik.system.NativeStart.main(Native Method)
10-12 15:23:45.644: E/AndroidRuntime(899): Caused by: java.lang.reflect.InvocationTargetException
10-12 15:23:45.644: E/AndroidRuntime(899):  at java.lang.reflect.Method.invokeNative(Native Method)
10-12 15:23:45.644: E/AndroidRuntime(899):  at java.lang.reflect.Method.invoke(Method.java:511)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.view.View$1.onClick(View.java:3586)
10-12 15:23:45.644: E/AndroidRuntime(899):  ... 11 more
10-12 15:23:45.644: E/AndroidRuntime(899): Caused by: java.lang.IllegalArgumentException: requested provider network doesn't exisit
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.os.Parcel.readException(Parcel.java:1429)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.os.Parcel.readException(Parcel.java:1379)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:646)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.location.LocationManager._requestLocationUpdates(LocationManager.java:660)
10-12 15:23:45.644: E/AndroidRuntime(899):  at android.location.LocationManager.requestLocationUpdates(LocationManager.java:482)
10-12 15:23:45.644: E/AndroidRuntime(899):  at com.desmill.taxi.activity.TaxiCaller.callTaxi(TaxiCaller.java:52)
10-12 15:23:45.644: E/AndroidRuntime(899):  ... 14 more 
```

有任何想法吗？我如何让它显示它所说的其他错误...14 more...？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:37:03.273

您可以将 logcat 输出转储到文本文件中，您应该可以在那里读取它，尽管我不肯定。只需打开一个终端窗口，使用您的 adb 可执行文件导航到目录（除非它在您的 PATH 中）并输入：

`adb logcat -d > logcat.txt`

另一个用于清除 logcat 内容的有用命令是：

`adb logcat -c`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:38:11.160

这在 2.2+ 中对我有用

```
 try {
        LocationManager locManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception e) {

    } 
```

# php - 使用 php 和 mysql 为嵌套菜单生成链接

> ID：12865070
> 
> 赞同：2
> 
> 时间：2012-10-12T18:31:52.470
> 
> 标签：php, mysql, menu, nested-lists

我经历了几十个类似的问题，但没有真正解决我的具体要求。

我有一个由三个变量（id、name、pid）定义的 mysql 表

使用以下函数生成嵌套菜单：

```
function get_categories($parent = '0') {
    $html = '<ul id="menu">';
    $query = mysql_query("SELECT * FROM `categories` WHERE `pid` = '$parent'");
    while($row = mysql_fetch_assoc($query)) {
        $current_id = $row['id'];
        $html .= '<li><a href="">' . $row['name'] . '</a>';
        $has_sub = NULL;
        $has_sub = mysql_num_rows(mysql_query("SELECT COUNT(`pid`) FROM `categories` WHERE `pid` = '$current_id'"));
        if($has_sub) {
            $html .= get_categories($current_id);
        }
        $html .= '</li>';
    }
    $html .= '</ul>';
    return $html;
}
print get_categories(); 
```

我的问题是如何生成链接，以便以“漂亮的 url”方式呈现。前任。`<a href="/parent_category/sub_category/sub_sub_category">`? 任何帮助将不胜感激。

# c++ - 需要帮助将 c-strings 从嵌入式 SQL fetch 复制到单独结构中的另一个 c-string

> ID：12865077
> 
> 赞同：3
> 
> 时间：2012-10-12T18:32:35.613
> 
> 标签：c++, struct, char, cstring, embedded-sql

我遇到了一个程序，该程序使用嵌入式 SQL 从数据库表中获取行，将行数据存储在一个结构中，然后处理该数据并将结果存储在另一个结构中并推送到一个链表。存储获取数据的结构如下：

```
struct rowstruct {
    char    *first;
    char    *last;
    long    amt;
}   client; 
```

我用来存储处理过的数据（并随后作为我的链表中的一个节点推送）的结构是这样的：

```
struct mystruct {
        char    *firstN;
        char    *lastN;
        long    total;
    }   data; 
```

我的问题是，每次发生 fetch 循环时，我都需要将 client.first 和 client.last 值复制到 data.firstN 和 data.lastN 中，但我无法让它工作。以下使用赋值运算符似乎只是在复制指针，而不是值：

```
data.firstN = client.first;
data.lastN = client.last; 
```

如果我在循环的第一次迭代后输出 data.firstN 和 data.lastN，则值看起来是正确的，但在第二次 fetch 迭代之后，我列表中的第一个节点将反映来自第二次 fetch 的值，而不是第一个。

strcpy 将编译，但由于分段错误而在运行时失败，从这里阅读是由于使用了 char*，尽管我认为在使用嵌入式 SQL 获取数据时我不能使用 char[] 或字符串，所以这似乎是一个死胡同。

我敢肯定有办法做到这一点，这对大多数人来说可能很明显，但我不知所措。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:36:55.747

如果代码说要复制指针，那正是发生的情况。

可能你想要的是类似的东西

```
data.firstN = strdup (client.first);
data.lastN = strdup (client.last); 
```

有更多的 C++-ish 方法可以做同样的事情，但这应该会让你克服困难。

* * *

您不需要重新声明结构。相反，您可以`data`声明

```
struct rowstruct data; 
```

# javascript - JSON.Net 是否有 javascript 序列化程序？

> ID：12865083
> 
> 赞同：2
> 
> 时间：2012-10-12T18:33:08.930
> 
> 标签：javascript, jquery, json.net

我正在使用 Newtonsoft JSON.Net 反序列化启用了[PreserveReferencesHandling](http://james.newtonking.com/projects/json/help/index.html?topic=html/PreserveObjectReferences.htm)的对象。jQuery 不支持基于 JSON.Net 使用的 $ref 和 $id 语法重新链接引用（我不知道 jQuery 是否支持此功能）。

我尝试使用 Douglas Crockford 的[cycle.js](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)，但这似乎不适用于我的对象，返回的对象与传入的对象相同。

我对 JSON.Net 不是很熟悉，但我似乎找不到任何可以序列化（或解析）其 .NET 组件输出的 JSON 的 JavaScript 库。

如何完成将对象引用重新组合在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T14:29:32.483

我也在寻找解决这个问题的方法，最后破解了 Douglas Crockford 的[JSON.retrocycle](https://github.com/douglascrockford/JSON-js/blob/master/cycle.js)函数。他的函数不适用于 $ref= *some number*，但它会寻找类似 xpath 的东西。

这是我的快速和肮脏的版本 - 不要按原样使用它 - 我没有做任何清理，它可能应该是一个插件，但它可以完成工作并且足以开始：

```
function retrocycle(o) {
var self = this;
self.identifiers = [];
self.refs = [];

self.rez = function (value) {

    // The rez function walks recursively through the object looking for $ref
    // properties. When it finds one that has a value that is a path, then it
    // replaces the $ref object with a reference to the value that is found by
    // the path.

    var i, item, name, path;

    if (value && typeof value === 'object') {
        if (Object.prototype.toString.apply(value) === '[object Array]') {
            for (i = 0; i < value.length; i += 1) {
                item = value[i];
                if (item && typeof item === 'object') {
                    path = item.$ref;
                    if (typeof path === 'string' && path != null) {
                        //self.refs[parseInt(path)] = {};

                        value[i] = self.identifiers[parseInt(path)]
                    } else {
                        self.identifiers[parseInt(item.$id)] = item;
                        self.rez(item);
                    }
                }
            }
        } else {
            for (name in value) {
                if (typeof value[name] === 'object') {
                    item = value[name];
                    if (item) {
                        path = item.$ref;
                        if (typeof path === 'string' && path != null) {
                            //self.refs[parseInt(path)] = {};

                            value[name] = self.identifiers[parseInt(path)]
                        } else {
                            self.identifiers[parseInt(item.$id)] = item;
                            self.rez(item);
                        }
                    }
                }
            }
        }
    }

};
self.rez(o);
self.identifiers = [];
} 
```

像这样使用它：

```
 $.post("url/function", { ID: params.ID }, function (data) {

        retrocycle(data)

        // data references should be fixed up now

    }, "json"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T00:59:34.343

这是我的@Dimitri 增强版。@Dimitri 代码有时无法重建引用。如果有人改进了代码，请告诉我。

问候，马尔科·阿尔维斯。

```
if (typeof JSON.retrocycle !== 'function') {
    JSON.retrocycle = function retrocycle(o) {
        //debugger;

        var self = this;
        self.identifiers = [];
        self.refs = [];

        self.buildIdentifiers = function (value) {
            //debugger;

            if (!value || typeof value !== 'object') {
                return;
            }

            var item;

            if (Object.prototype.toString.apply(value) === '[object Array]') {
                for (var i = 0; i < value.length; i += 1) {
                    item = value[i];

                    if (!item || !item.$id || isNaN(item.$id)) {
                        if (item) {
                            self.buildIdentifiers(item);
                        }

                        continue;
                    }

                    self.identifiers[parseInt(item.$id)] = item;
                    self.buildIdentifiers(item);
                }

                return;
            }

            for (var name in value) {
                if (typeof value[name] !== 'object') {
                    continue;
                }

                item = value[name];

                if (!item || !item.$id || isNaN(item.$id)) {
                    if (item) {
                        self.buildIdentifiers(item);
                    }

                    continue;
                }

                self.identifiers[parseInt(item.$id)] = item;
                self.buildIdentifiers(item);
            }
        };

        self.rez = function (value) {

            // The rez function walks recursively through the object looking for $ref
            // properties. When it finds one that has a value that is a path, then it
            // replaces the $ref object with a reference to the value that is found by
            // the path.

            var i, item, name, path;

            if (value && typeof value === 'object') {
                if (Object.prototype.toString.apply(value) === '[object Array]') {
                    for (i = 0; i < value.length; i += 1) {
                        item = value[i];
                        if (item && typeof item === 'object') {

                            if (item.$ref)
                                path = item.$ref;

                            if (typeof path === 'string' && path != null) {
                                //self.refs[parseInt(path)] = {};

                                value[i] = self.identifiers[parseInt(path)];
                                continue;
                            }

                            //self.identifiers[parseInt(item.$id)] = item;
                            self.rez(item);
                        }
                    }
                } else {
                    for (name in value) {
                        if (typeof value[name] === 'object') {
                            item = value[name];
                            if (item) {
                                path = item.$ref;
                                if (typeof path === 'string' && path != null) {
                                    //self.refs[parseInt(path)] = {};

                                    value[name] = self.identifiers[parseInt(path)];
                                    continue;
                                }

                                //self.identifiers[parseInt(item.$id)] = item;
                                self.rez(item);
                            }
                        }
                    }
                }
            }

        };

        self.buildIdentifiers(o);
        self.rez(o);
        self.identifiers = []; // Clears the array
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:07:40.957

您必须在您的 js 解析器中进行双重查找。从技术上讲，保留引用处理是为了绕过循环引用，也就是说在解析过程中通常会导致堆栈溢出。

JSON 没有用于处理此问题的本机语法。Newtonsoft 版本是自定义实现，因此解析 JSON 将是自定义实现。

如果您确实必须保留此类引用，那么 XML 可能是更好的解决方案。那里有一些 json->xml 库。

这是一种可能有用的解析解决方案，或者至少是一个指南： [https ://blogs.oracle.com/sundararajan/entry/a_convention_for_circular_reference](https://blogs.oracle.com/sundararajan/entry/a_convention_for_circular_reference)

# javascript - Javascript中的Selenium RC添加外部js文件

> ID：12865086
> 
> 赞同：0
> 
> 时间：2012-10-12T18:33:20.513
> 
> 标签：javascript, selenium, extjs

> **可能重复：**
> [在 selenium 中加载包含有用测试功能的外部 js 文件](https://stackoverflow.com/questions/7675492/load-an-external-js-file-containing-useful-test-functions-in-selenium)

我必须使用 Selenium RC 对系统进行性能测试，并用 Javascript 编写测试，以便团队的其他成员能够理解它们。我需要能够 Sencha Ext 库来访问页面上的某些控件，因此我需要能够定义外部 js 库。在我对 selenium 的测试中，我无法使用将脚本标记写入页面的常规方法来定义库；文档未定义。也尝试使用其他 selenium 命令，如 addScript 似乎没有太大帮助。

有没有更好的方法在 Selenium 中包含一个外部 js 库？我在本地确实有开源 Sencha Ext 库，所以我可以把它放在任何地方。

我可以只加载库作为苏打水的参考吗？我确实看到有人修改了 Selenium 独立 RC jar 文件，但这是我理解的方式。我有点迷失在这里从哪里去。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:14:41.933

好吧，从js可以这样从selenium test运行的角度来看：

```
WebDriver driver;
// create driver, i.e. driver = new FirefoxDriver();
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("alert('Hello from Selenium!');"); 
```

所以实际上我们需要通过 selenium API 包含 js lib。恕我直言，您的解决方案如下：

```
 WebDriver driver;
    // create driver, i.e. driver = new FirefoxDriver();
    JavascriptExecutor js = (JavascriptExecutor) driver;

//Load an external js file containing useful test functions in selenium
js.executeScript("var doc = this.browserbot.getCurrentWindow().document; var scriptTag = doc.createElement("script"); scriptTag.type = "text/javascript" scriptTag.src = 'your_script_URL_goes_here'; doc.body.appendChild(scriptTag)"); 
```

这样我们就包含了所需的 js lib。以类似的方式，您可以调用包含在此外部 js 库中的函数。

[这篇](http://code-thrill.blogspot.com/2012/04/integrating-jquery-with-selenium.html)文章可能对你有帮助。还要调查[这个](https://stackoverflow.com/questions/7675492/load-an-external-js-file-containing-useful-test-functions-in-selenium)问题。问候。

# php - 如何通过 mysql 中的 JOIN 搜索改进我的 LIKE？

> ID：12865089
> 
> 赞同：7
> 
> 时间：2012-10-12T18:33:37.540
> 
> 标签：php, mysql, join, search, sql-like

我目前有一个看起来像这样的搜索：

```
SELECT s.ID 
    FROM Shoe s
        INNER JOIN Account a
            ON s.UserID = a.ID
        WHERE s.Publish='1' AND
            (s.Brand LIKE '%$Search%'
             OR s.Name LIKE '%$Search%'
             OR s.PrimaryColor LIKE '%$Search%'
             OR a.User LIKE '%$Search%') 
        ORDER BY s.ID DESC
LIMIT $offset, $rowsPerPage" 
```

当我进行诸如“Blue”或“Nikes”之类的搜索时，这很好用，但如果我进行诸如“Blue Nikes”之类的搜索，则没有任何返回。我应该使用`FULLTEXT`吗？我该如何改进呢？我希望能够搜索可能与搜索变量相关的所有列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:55:18.167

所以在搞砸并测试了不同的东西之后，我想出了这个：

```
"FROM Shoe AS s
    LEFT JOIN Accounts AS a ON s.UserID = a.ID
    WHERE (MATCH (s.Brand, s.Name, s.PrimaryColor AGAINST('$Search' IN BOOLEAN MODE)
        OR MATCH (a.User) AGAINST('$Search' IN BOOLEAN MODE))
            AND s.Publish='1'
    ORDER BY s.ID DESC" 
```

这似乎解决了我上面提到的问题，我现在可以进行搜索，例如“Blue Nike”，所有与 blue & nike 相关的项目都会显示出来。不确定这是否是最有效的方法，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:50:19.833

而不是`LIKE`尝试使用[`SOUNDEX`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)，或两者兼而有之。

其次，您可能希望优化查询以保持大小写，例如：

```
(lower(s.Brand) LIKE '%" . strtolower($Search) . "%'
OR lower(s.Name) LIKE '%" . strtolower($Search) . "%'
OR lower(s.PrimaryColor) LIKE '%" . strtolower($Search) . "%'
OR lower(a.User) LIKE '%" . strtolower($Search) . "%') 
```

# vim - vim :make 没有外部窗口

> ID：12865090
> 
> 赞同：2
> 
> 时间：2012-10-12T18:33:42.017
> 
> 标签：vim, makefile

在 vim 中，当我使用

```
:make 
```

make 的输出显示在“外部”窗口中，我不喜欢这个，我使用这个地图

```
 nnoremap <leader>m :w <bar> make<CR><CR><CR>:copen<CR> 
```

但是，在某些情况下，make 的输出是

```
 make: Nothing to be done for `all'. 
```

当 copen 有时，我如何添加自动关闭到 copen `make: Nothing to be done for all.`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:18:05.590

您可以通过查看快速修复列表的内容`getqflist()`。然后，如果第一行与您不想看到的文本不匹配，我只会有条件地打开 quickfix 窗口：

```
nnoremap <leader>m :w <bar> make<CR><CR><CR>
\:if get(get(getqflist(), 0, {}), 'text', '') !~# 'Nothing to be done' <Bar> 
\  copen <Bar>
\endif<CR> 
```

`get()`当列表为空时，访问通过避免错误。

`:cclose`如果更适合您的需要，您也可以始终打开列表，然后在条件中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T09:57:36.397

我有一个对我有很大帮助的 vim 脚本：

*   首先它保存当前的编辑窗口（如果可能，如果只读则不起作用）
*   然后它运行 make 并将错误（stderr）重定向到临时文件（stdout 被忽略）
*   如果构建失败，则打开快速修复窗口并用错误消息填充它。
*   删除临时文件

```
 command! -nargs=* Build call s:RunBuild()

function! s:RunBuild()
    let tmpfile = tempname()

    "build and surpresses build status messages to stdout
    "(stdout message are not very informative and may be very very long)
    "Error messages are redirected to temporary file.
    let buildcmd = "make -j 2> " . tmpfile . " >/dev/null"

    let fname = expand("%")
    if fname != ""
        " save current buffer if possible (your bad if file is read only)
        write
    endif

    " --- run build command --- 
    echo "Running make ... "
    let cmd_output = system(buildcmd)

    "if getfsize(tmpfile) == 0
    if v:shell_error == 0
      cclose
      execute "silent! cfile " . tmpfile
      echo "Build succeded"
    else

      let old_efm = &efm
      set efm=%f:%l:%m
      execute "silent! cfile " . tmpfile
      let &efm = old_efm

      botright copen
    endif

    call delete(tmpfile)
endfunction 

```

然后我映射 F5 键以在每个 vim 模式下进行构建

 ````
"F5 - run make (in normal mode)
:nnoremap  :Build

"F5 - run make (in visual mode)
:vnoremap  :Build

"F5 - run make (in insert mode)
:inoremap  :Build 

````

# spring - Spring 3.x JSON状态406“根据请求“接受”标头（）的特征不可接受”

> ID：12865093
> 
> 赞同：43
> 
> 时间：2012-10-12T18:33:56.230
> 
> 标签：spring, spring-mvc

在尝试使用 获取我的响应时`JSON`，`Spring 3.x`我得到`406 error`“此请求标识的资源只能生成具有根据`request`“接受”标头 () 不可接受的特征的响应。

这是我的环境

```
* Spring 3.2.0.RELEASE
* included jackson-mapper-asl-1.7.9.jar, jackson-core-asl-1.7.9.jar
* Tomcat 6.x
* mvc:annotation-driven in Spring configuration XML file 
```

我的控制器：

```
@RequestMapping("/contest")
public class ContestController {

    @RequestMapping(value="{name}", headers="Accept=*/*", method = RequestMethod.GET)
    public @ResponseBody Contest getContestInJSON(@PathVariable String name) {
        Contest contest = new Contest();
        contest.setName(name);
        contest.setStaffName(new String("contestitem1"));

        return contest;
    }

} 
```

我的 Spring 配置文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<context:component-scan base-package="com.contestframework.controllers" />

<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">

<property name="mediaTypes">
    <map>
      <entry key="atom" value="application/atom+xml"/>
      <entry key="html" value="text/html"/>
      <entry key="json" value="application/json"/>
    </map>
 </property>

 <property name="viewResolvers">
 <list>
  <bean class="org.springframework.web.servlet.view.BeanNameViewResolver"/>
  <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/pages/"/>
    <property name="suffix" value=".jsp"/>
  </bean>
 </list>
 </property>

 <property name="defaultViews">
  <list>
   <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
  </list>
 </property>

 </bean>

<mvc:annotation-driven />

</beans> 
```

在此之后，我只需使用以下方式访问控制器：

```
http://domain/SpringWebProject/json/contest/abcd 
```

我得到的响应是状态 406：“此请求标识的资源只能生成具有根据请求“接受”标头（）不可接受的特征的响应。”

我还尝试了另一种机制，通过访问它`Javascript` `AJAX`来确保我的请求标头具有`application/JSON`，但这导致了相同的状态 406 结果

```
$.getJSON('contest/abcd', function(data) {
console.log(data) } 
```

这是我从浏览器捕获的请求标头：

```
Request URL:http://localhost:8080/SpringWebProject/json/contest/abcd
Request Method:GET
Status Code:406 Not Acceptable

Accept:application/json, text/javascript, */*; q=0.01
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:JSESSIONID=59689C95B0B9C21494EB0AB9D9F7BCCD
Host:localhost:8080
Referer:http://localhost:8080/SpringWebProject/json/welcome
User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4
X-Requested-With:XMLHttpRequest
Response Headersview source
Content-Length:1070
Content-Type:text/html;charset=utf-8
Date:Fri, 12 Oct 2012 18:23:40 GMT
Server:Apache-Coyote/1.1 
```

感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-18T18:35:17.797

我也遇到了同样的问题。看来这是最新的 3.2.0.RELEASE 的问题，因为我之前有 3.1.2.RELEASE 并且一切正常。更改为 3.2.0.RELEASE 后，它会中断。已经用 3.1.3.RELEASE 测试过，效果很好。所以现在我建议回滚到 3.1.3.RELEASE

编辑：感谢本网站上链接到以下位置的另一篇文章：http: [//static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-配置内容协商](http://static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation)

我现在通过根据请求路径的扩展禁用获取媒体类型来使其工作。这可以通过以下方式完成：

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>
<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <!-- Turn off working out content type based on URL file extension, should fall back to looking at the Accept headers -->
    <property name="favorPathExtension" value="false" />
</bean> 
```

并为所有 xsd 模式位置指定版本 3.2。

这是使用以下杰克逊罐子：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.1.2</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.1.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-13T12:37:16.597

您的配置没有任何问题，但让我建议一些小的更改：

a）您的命名空间出现错误 - 它们指的是 3.0 模式，只需将它们更改为 3.1 或不明确引用版本，例如这种方式。

```
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans.xsd 
```

或者

```
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
```

b）您不需要 ContentNegotiatingViewResolver，您可以从配置中删除除`component-scan`and之外的所有内容`<mvc:annotation-driven/>`

c) 请求不会直接从浏览器工作，因为它明确需要“application/json”的 Accept 标头 -`$.getJson`尽管它发送了正确的标头，但调用应该可以工作

d)`headers=Acc..`从@RequestMapping 中删除，并且还产生，两者都是过滤条件以匹配正确的映射方法调用。

有了这些，就没有理由不提供 json 了，你能试试这些看看效果如何。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-12-22T06:46:02.163

我遇到了同样的问题，我通过添加以下依赖项解决了它

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

以前我正在使用以下依赖项

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>${com.jackson.core-version}</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-annotations</artifactId>
    <version>${com.jackson.core-version}</version>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>${com.jackson.core-version}</version>
</dependency> 
```

简而言之，我已将 com.fasterxml.jackson.core 替换为**org.codehaus.jackson**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-08-29T20:10:19.780

我在 Spring MVC 4 中遇到了这个问题。添加 jackson-annotations、jackson-core 和 jackson-databind 并没有解决问题。试试这个库：

```
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-core</artifactId>
  <version>2.1.2</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.1.2</version>
</dependency>
<dependency>
  <groupId>org.codehaus.jackson</groupId>
  <artifactId>jackson-mapper-asl</artifactId>
  <version>1.9.13</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-12T18:50:20.513

我认为您需要在您的@RequestMapping 中添加一个produces="application/json" （有一段时间没有看过spring mvc，所以我不是100% 肯定的）...

[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)

> 16.3.2.6 可生产的媒体类型
> 
> 您可以通过指定可生产媒体类型的列表来缩小主要映射范围。仅当 Accept 请求标头与这些值之一匹配时，才会匹配该请求。此外，使用产生条件可确保用于生成响应的实际内容类型尊重产生条件中指定的媒体类型。例如：

```
@Controller
@RequestMapping(value = "/pets/{petId}", method = RequestMethod.GET, produces="application/json")
@ResponseBody
public Pet getPet(@PathVariable String petId, Model model) {    
    // implementation omitted
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-08-14T09:50:44.960

我有同样的问题，Biju Kunjummen 在这个答案中添加的评论对我来说非常有用

[https://stackoverflow.com/a/12873170/20654](https://stackoverflow.com/a/12873170/20654)

那就是在我的 Java 类中有公共吸气剂

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-12-12T16:19:21.343

我有一个类似的问题，当我添加`jackson-databind`库时它得到了解决。

这些是我的依赖项：

```
<dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.12</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.4.3</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-04-23T09:13:30.833

感谢您分享您的经验。我遇到了同样的问题，它适用于我使用如下所示的配置：

1.  Spring MVC 版本：3.2.5.RELEASE
2.  Apache-tomcat-6.0.24
3.  JDK1.6
4.  杰克逊核心asl-1.9.10.jar
5.  jackson-mapper-asl-1.9.10.jar

Spring MVC 配置文件：

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>
<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
<!-- Turn off working out content type based on URL file extension, should fall back to looking at the Accept headers -->
    <property name="favorPathExtension" value="false" />
</bean> 
```

模型类：Country.java

```
 private Integer countryId;
 private String name;
 //public setters and getters 
```

控制器方法：

```
@RequestMapping(value = "/get_country_json",method = RequestMethod.GET)
@ResponseBody
public Country getCountry() 
```

部署描述符（web.xml）

```
 <servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>       
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

请求调用控制器方法的 URL：/SpringCURDApp/get_country_json.htm

我希望这可以帮助某人。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-09-05T17:59:04.257

不要犯我犯过的同样的错误，整天玩 Spring 配置，实际上你在 Web 服务中返回的对象没有正确地编组为 XML。似乎 Spring 捕获了一个 JAXB 编组错误并且没有报告它。使用此沙盒代码验证 JAXB 封送处理：

```
MyClass myclass = new MyClass();
//populate myclass here

JAXBContext context = JAXBContext.newInstance(MyClass.class);

Marshaller m = context.createMarshaller();
StringWriter w = new StringWriter();

m.marshal(myclass, w);
System.out.println(w); 
```

这产生并显示了一个异常。修复了这个原因，我的 Web 服务在 XML 和 JSON 中都可用。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-06-10T21:36:43.257

不久：

对于 Spring MVC 4.1.6 来说已经足够了：

```
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.5.0</version>
</dependency> 
```

*jackson-databind*依赖于*核心*和*注释*工件。

* * *

详细说明：

什么是**HTTP 406**错误？

*406 Not Acceptable 请求的资源只能生成根据请求中发送的 Accept header 不可接受的内容。*

这意味着服务器无法生成*Accept* Header中规定的*MEDIA TYPE的内容。*

 *但是服务器如何知道它可以生成哪些*MEDIA TYPE而哪些不能呢？*

Spring Web 有[HttpMessageConverter](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/converter/HttpMessageConverter.html)的概念。其中一些转换器已经在 Spring 中注册，并且[AbstractMessageConverterMethodArgumentResolver](http://docs.spring.io/autorepo/docs/spring-framework/4.1.6.RELEASE/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodArgumentResolver.html)将它们保存在属性*messageConverters*中。

在请求处理期间[AbstractMessageConverterMethodProcessor](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/AbstractMessageConverterMethodProcessor.html)分析 spring 可以转换的内容并将所有支持的*MEDIA TYPES*保存在*producibleMediaTypes*变量中。如果请求的*媒体类型*不可生产，则显示错误 406 == 我无法生成请求的媒体类型。对不起。

长话短说 - 注册所需的转换器。在您的情况下，它是生成**application/json的杰克逊库**

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-06-07T07:23:47.887

请参阅[http://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation](http://docs.spring.io/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation) 如您所见

> “对于请求 URI、MVC Java 配置和 MVC 命名空间中的文件扩展名，如果存在相应的依赖项（例如 Jackson、JAXB2 或 Rome），则会自动注册 .json、.xml、.rss 和 .atom 等扩展名类路径。”

您应该在 URI 的末尾添加“.json”（例如[http://domain/SpringWebProject/json/contest/abcd.json](http://domain/SpringWebProject/json/contest/abcd.json)）它适用于我。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-14T15:55:46.897

我有类似的问题，但很奇怪。我将解释我是如何解决的。

在我的 web.xml 中，我的调度程序 servlet 被映射到 *.htm

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

无论我做什么，它总是抛出 -

> 此请求标识的资源只能生成具有根据请求“接受”标头不可接受的特征的响应

最后我把它改成了

```
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

它奏效了。我的想法是当你指定

```
<mvc:annotation-driven/> 
```

扩展优先于接受标头，而 .htm 正在制造问题。显然我不能使用 xml 或 json，因为 servlet 本身没有被映射。

我还想补充一点，它会产生注释，spring 将尝试映射它将接受传入请求的标头。我正在为 json 和 xml 制作通用的请求处理程序方法。由于我使用的是 Java 8 并且 Jaxb 是 Java 内置的，因为 Java 7 不需要 JAXB 依赖项。对于 json 我只需要添加 -

```
<dependency org="com.fasterxml.jackson.core" name="jackson-databind" rev="2.8.5"/> 
```

我正在使用常春藤进行依赖管理。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-06-05T08:46:50.833

也许你应该更新你的杰克逊图书馆。我使用 Spring v4.3.8，我使用它如下：

```
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-core</artifactId>
  <version>2.8.7</version>
</dependency>
<dependency>
  <groupId>com.fasterxml.jackson.core</groupId>
  <artifactId>jackson-databind</artifactId>
  <version>2.8.7</version>
</dependency> 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-05-30T06:06:51.617

如果您使用的是 Spring 4，那么您必须只更新您的库：

```
 <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-core</artifactId>
        <version>2.3.0</version>
    </dependency>

    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.3.0</version>
    </dependency> 
```*

# html - HTML5 开始屏幕图像在屏幕上的位置

> ID：12865094
> 
> 赞同：0
> 
> 时间：2012-10-12T18:34:02.360
> 
> 标签：html, image

我正在制作一个开始屏幕，我有一个充当按钮的图像，我完全忘记了如何将它放在页面上我想要的位置。

```
<div id="SplashScreen" width="400" height="400">
    <h1>Game Title</h1>
    <img id="StartButton" src="play.png"/>
</div> 
```

我如何将它放置在屏幕上我想要的位置？我不介意它是如何编码的，因为我知道

顺便说一句，我是 html 新手，所以请原谅我的菜鸟问题 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T14:55:11.823

在 html 中有几种主要的方式来定位内容。
以下是定位内容的所有不同方式的链接：http: [//www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

实际上，启动屏幕最常见的方式可能是绝对定位。

```
<div id="SplashScreen" width="400" height="400" style="position:absolute; top:0; left:0; z-index:100;">
    <h1>Game Title</h1>
    <img id="StartButton" src="play.png"/>
</div> 
```

这会将启动画面定位在浏览器的左上角。top:0 将使其距顶部 0 个单位，left:0 将使其距左侧 0 个单位。如果你想调整这些，你可以这样做，但记得添加单位，如 top:400px;

我还添加了一个 z-index，这样它就会出现在页面上任何其他内容的顶部。

最后一件事，就像一个注释，你应该使用类而不是样式来定位。这更容易维护。

```
<style>
.splashScreen {
    position:absolute;
    top:0;
    left:0;
    z-index:100;
    width:400px;
    height:400px;
}
</style> 
```

将是类并使用它，你可以用这个替换你所拥有的：

```
 <div id="SplashScreen" class="splashScreen">
    <h1>Game Title</h1>
    <img id="StartButton" src="play.png"/>
</div> 
```

正如上面的评论所提到的，这是为了让你开始，如果你想让它位于屏幕的中心，或者相对于其他东西，你必须对类进行调整。

GL！

# mysql - 加入两个不同的表？

> ID：12865096
> 
> 赞同：0
> 
> 时间：2012-10-12T18:34:06.517
> 
> 标签：mysql

如何连接表`a`和表`b`并获取每个表的记录？不是真正的加入……不知道这叫什么。

因此，如果我有 3 条记录`a`和 5 条记录`b`，我想要 8 条记录。

在 的记录中`a`，所有`b`字段都可以为空。在 的记录中`b`，所有`a`字段都可以为空。

* * *

**编辑：我的表有不同的字段。**

```
Error Code: 1222\. The used SELECT statements have a different number of columns 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:45:29.980

像其他提到的，你需要一个工会

```
SELECT intColumn, varcharColumn, intColumn FROM a
UNION
SELECT intColumn, varcharColumn, 0 FROM b 
```

但是您必须具有相同数量的列，并且它们也必须具有相似的数据类型。

[这是](http://www.w3schools.com/sql/sql_union.asp)一个很好的教程

此外，如果您想要不在两个表中的列，您可以填充空值或常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:35:08.047

你想要一个[`UNION`](http://dev.mysql.com/doc/refman/5.5/en/union.html)：

```
SELECT something FROM a
UNION
SELECT something FROM b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:39:19.347

试试这个

```
SELECT * FROM a
LEFT JOIN b ON a.id1 = b.id2
UNION
SELECT * FROM a
RIGHT JOIN b ON a.id1 = b.id2 
```

只需确保 A 和 B 具有不同的 ID

编辑：[**工作小提琴**](http://sqlfiddle.com/#!2/cd093/1/0)

您还可以使用其他一些`id`在两个表中不相同的字段

编辑：更新的小提琴

# javascript - Photoshop Layer -> SVG

> ID：12865103
> 
> 赞同：5
> 
> 时间：2012-10-12T18:34:41.620
> 
> 标签：javascript, html, vector, svg, photoshop

I've got PSD file with vector logo (smart object). I need to save it as SVG for website use. I don't see such option directly in Photoshop though (I can only export it as .AI file).

1.  How does export process look like (PS CS5 or CS6 - current versions)?
2.  What are the best settings that web developer should use when exporting logo? You can set various sizes of SVG file in (AI -> SVG) converters like this one: [http://image.online-convert.com/convert-to-svg](http://image.online-convert.com/convert-to-svg)
3.  Is there anything else to pay attention to in case of settings?
4.  How should SVG files be included on website in logo area? What is the best approach? Like this? [http://jsfiddle.net/danielfilho/GdCcA/](http://jsfiddle.net/danielfilho/GdCcA/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:45:59.237

1.  You can pay for it ([SVG Kit](http://en.wikipedia.org/wiki/SVG_Kit_for_Adobe_Creative_Suite)), or the best alternative is to export/paste to Illustrator and then save as SVG. The question [Photoshop Custom Shape to SVG path string](https://stackoverflow.com/questions/5413719/photoshop-custom-shape-to-svg-path-string) details this.
2.  Look at the [Illustrator site](http://help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-6561a.html#WS714a382cdf7d304e7e07d0100196cbc5f-655ba) for details of the different options when saving as SVG. It depends on whether you are concerned with details such as target devices (mobile vs. desktop) and whether you want to display gradients, transparency and SVG filter effects.
3.  [Best practices for creating web graphics](http://help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-636fa.html#WSC97B6FDD-B90E-4f1b-B2F0-6D7B9A3DFC26) by Adobe talks about using web-safe colors, Pixel Preview mode in Illustrator and addressing certain challenges of mobile devices.
4.  Agree with @Kolink's comments above.

# ruby-on-rails-3.2 - 数据映射器和连接池逻辑

> ID：12865104
> 
> 赞同：3
> 
> 时间：2012-10-12T18:34:44.980
> 
> 标签：ruby-on-rails-3.2, datamapper

所以我试图在我的 Rails 3.2.8 应用程序中使用数据映射器。

我有一个`config/initializers/dm.rb`我加载的地方`database.yml`

```
hash = YAML.load(File.new("database.yml"))
DataMapper.setup(:default, hash[Rails.env]) 
```

我`pool`在 database.yml 文件中设置了一个属性，但我注意到 datamapper 不使用它。它有`8`一个它使用的幻数，这个数字是从哪里来的？以及如何配置数据映射器的池设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T04:04:41.350

就在 DataMapper.finalize 之后，我为我的测试添加了这个（使用 'sqlite3::memory:' ）以将池大小减少到 1

```
class DataObjects::Pooling::Pool
  alias :initialize_old :initialize
  def initialize(max_size, resource, args)
    initialize_old( 1, resource, args)
  end
end 
```

# javascript - Codeigniter 2.1，jquery - ajax(post) 不允许的关键字符

> ID：12865107
> 
> 赞同：0
> 
> 时间：2012-10-12T18:34:51.963
> 
> 标签：javascript, jquery, codeigniter

Jquery函数（它正在工作）：

```
del_selected.on('click', function(e){

    box.filter(':checked').each(function(){
        selektovane_slike.push($(this).val());
        $(this).parent().slideUp('fast');
    });
    data = JSON.stringify(box.serialize(), null, 2);
    console.log(data);
    $.post(del_url, data, function(){

    }, JSON);
    e.preventDefault();
}); 
```

这个函数给出了这个结果：

> "slike=apples.jpg&slike=50BestBandLogos.jpg&slike=Great-Logos-200x200.jpg"

在 PHP 中，我们有这个：

```
function ypg_delete_img_selected()
{
    print_r($_POST);
} 
```

我得到的回应是：

**不允许的关键字符。**

问题是什么？

HTML：

```
<div class="zuta_strana_trenutne_slike">
                            <p>All Images</p>
                            <?php $imgs = explode(',', $zts['image']);
                                foreach($imgs as $img) : ?>
                            <div class="zuta_strana_izmena_slika">
                                <img src="<?php echo IMG ?>zute_strane/thumbs/<?php echo $img ?>" title="<?php echo $zts['name'] ?>" />
                                <input type="checkbox" name="slike" value="<?php echo $img  ?>" />
                                <a href="<?php echo base_url() ?>zute_strane/ypg_delete_img/<?php echo $img . '/' . $zts['id_global_info'] ?>" title="<?php echo $img ?>">Obriši Sliku</a>
                            </div>
                            <?php endforeach; ?>
                            <a class="zute_strane_izmena_selektuj_sve">Select All</a>
                            <a href="<?php echo base_url() ?>zute_strane/ypg_delete_img_selected/<?php echo $zts['id_global_info'] ?>" class="zute_strane_izmena_obrisi_sve">Delete Selected</a>
                        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:40:34.787

您需要在 application/config/config.php 中更新您允许的字符：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%\.\:_\+-,?&='; 
```

显然修改它以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:43:18.973

Relate an id to each image on the server and deal with ids instead of arbitrary file names. The way you are currently doing this is going to lead to a lot of headaches.

# html - Facebook Open Graph Tags og：图像不显示给定图像

> ID：12865109
> 
> 赞同：0
> 
> 时间：2012-10-12T18:35:02.443
> 
> 标签：html, facebook, image, facebook-opengraph

五个页面有相同的 Open Graph Tags og:image url。由于某种原因，给定的图像仅显示在一个页面上，其余四个 facebook 从页面中选择其他图像。

有任何想法吗？

这是页面：[http](http://time-time.net/timer/timers-and-clocks.php) ://time-time.net/timer/timers-and-clocks.php '倒计时'显示想要的图像，但其他人将页面徽标作为 og:image。

Facebook 调试器显示一切正常 (http://developers.facebook.com/tools/debug)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:59:26.257

我觉得没问题。
![OG：图像](../Images/d675f49a928cd0d2256957d0d843baaa.png)
Facebook 哪里没有显示这张图片？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-08T15:11:36.370

您必须在`<head>`.

```
<meta prefix="og: https://graph.facebook.com/10151069666995572"> 
```

# xcode - iPhone：视图更改时启动声音剪辑不会停止

> ID：12865116
> 
> 赞同：0
> 
> 时间：2012-10-12T18:35:31.673
> 
> 标签：xcode, xcode4.3, avaudioplayer, appdelegate

我有一个应用程序，它在启动时会播放介绍剪辑。以下代码在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`appDelegate.m 中，它工作得非常好。

```
NSLog(@"PLAY SOUND CLIP WHILE LOADING APP");
NSURL *clip = [[NSBundle mainBundle] URLForResource: @"intro" withExtension:@"caf"];
self.startupPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:clip error:NULL];
[self.startupPlayer play]; 
```

如果用户在介绍声音结束之前更改视图，它仍会继续播放。我已将此代码放在`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`认为它会有所帮助但没有。

```
-(void)viewDidDisappear:(BOOL)animated {
[super viewDidDisappear:animated];
// Stop Sound
[self.startupPlayer stop];
} 
```

我想也许如果我在加载请求之后放置一个 if 语句可能会奏效，但它没有奏效。参见示例：

```
NSLog(@"PLAY SOUND CLIP WHILE LOADING APP");
NSURL *clip = [[NSBundle mainBundle] URLForResource: @"intro" withExtension:@"caf"];
self.startupPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:clip error:NULL];
[self.startupPlayer play];

if ([viewDidDisappear == YES]) {
[self.startupPlayer stop];
} 
```

如果用户在该剪辑完成播放之前更改视图，任何会停止介绍声音的建议都会很棒。哦，我已经成功地在应用程序的其他部分使用了“viewWillDisappear”，但在这种情况下，我选择了“viewDidDisappear”，因为后者也不起作用。所以我很难过。提前致谢。

编辑：所以我将 viewWillDisappear 移动到我的 MainViewController 中并调用了委托，但我仍然没有任何运气。再次，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:43:03.140

我通过将 *startupPlayer 的 @property 声明并将其放在 AppDelegate.h 文件中而不是下面的方式解决了这个问题；

在 AppDelegate.m

```
@interface AppDelegate () 

@property (nonatomic, strong) AVAudioPlayer *startupPlayer;
@end 
```

然后我仍然在 .m 文件中 @synthesized 它，如下所示，并保持 didFinishLaunchingWithOptions 相同：

```
@implementation AppDelegate 
@synthesize startupPlayer = _startupPlayer;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

//------ PLAY SOUND CLIP WHILE LOADING APP -----

NSLog(@"PLAY SOUND CLIP WHILE LOADING APP");
NSURL *clip = [[NSBundle mainBundle] URLForResource: @"intro" withExtension:@"caf"];
self.startupPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:clip error:NULL];
[self.startupPlayer play]; } 
```

然后在我的 MainViewController.m

```
#import "AppDelegate.h"

-(void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
//stop intro sound
AppDelegate *introClip = (AppDelegate *)[[UIApplication sharedApplication]delegate];
[[introClip startupPlayer]stop];} 
```

Now even if the intro music is still playing through one cycle, the user can switch to another view and stop that music.

# php - 使用 Codeigniter 通过多步表单“携带”大数据的最佳方式。

> ID：12865121
> 
> 赞同：1
> 
> 时间：2012-10-12T18:35:48.977
> 
> 标签：php, codeigniter, csv

这是我的表格的过程：

第 1 步：用户上传 CSV。系统解析它并接受一些记录，拒绝一些其他记录。

第 2 步：用户可以看到有多少被接受，有多少没有被确认。用户可以选择仅使用 CSV 中的成功记录进行处理，也可以一起取消该过程（通过取消按钮或仅返回主页）。

现在，对我来说，将 CSV 数据“保存”到第 2 步及以后（如果他们想继续）的最佳方法是什么？我正在考虑将步骤 1 中的所有记录存储到数据库中，但这会导致大量不必要的数据库活动，并可能使数据库因剩余记录而变得太大。我还考虑将服务器上的文件留在服务器上，如果他们选择继续执行步骤 2，则只保留成功的记录，但是我必须一直清理一堆所有文件（例如。如果他们只是在第 2 步关闭浏览器）。第三，存储在会话中会使会话过大。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:40:04.940

我看到了 3 个潜在的选择：

```
1 - Store it in db and look it up on every page
2 - Store it in session
3 - Pass it through url in query string 
```

我不确定你传递了多少数据，但如果它太大而无法在会话中保存它，并且太大而无法通过 url 传递它，那么 db 似乎是你最好的解决方案。就性能而言，数据库调用通常不会影响您的网站的成败。

# asp.net - 移动设备上的 Sharepoint 2010 下拉菜单

> ID：12865122
> 
> 赞同：4
> 
> 时间：2012-10-12T18:35:50.683
> 
> 标签：asp.net, css, drop-down-menu, sharepoint-2010, sharepoint-designer

我在 Sharepoint 2010 中有一个悬停下拉菜单，可以很好地使用鼠标，但我还试图实现的是让菜单不在移动设备上重新加载页面（因为用户必须单击菜单下拉菜单）和表现得更像 a `onHover`，我尝试删除`href`菜单但没有做任何事情。我还将我的应用程序与使用 sharepoint 制作的其他在移动设备上运行良好的应用程序进行了比较，我真的看不出他们在做什么不同

是我缺少的某种CSS吗？如果您之前遇到过这个问题，我会非常感谢您的帮助。

这是在 asp 菜单中设置的属性：

```
<SharePoint:AspMenu
  ID="TopNavigationMenuV4"
  Runat="server"
  EnableViewState="false"
  DataSourceID="topSiteMap"
  AccessKey="<%$Resources:wss,navigation_accesskey%>"
  UseSimpleRendering="true"
  UseSeparateCss="false"
  Orientation="Horizontal"
  StaticDisplayLevels="1"
  MaximumDynamicDisplayLevels="2"
  SkipLinkText=""
  CssClass="s4-tn"/> 
```

这是我查看源代码时生成的 html：

```
 <li class="static dynamic-children selected"><br>
 <a class="static dynamic-children selected menu-item" title="Home" href="/sites/Test/Pages/default.aspx" accesskey="1">
 <span class="additional-background"><br>
 <span class="menu-item-text"><br>
 Test <br>
 </span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T20:46:35.173

你的问题不是很明显。但我可以告诉你这一点。如果你不想发生任何事情，你可以使用

```
onclick="return false;" 
```

# java - java中函数重载的歧义

> ID：12865124
> 
> 赞同：0
> 
> 时间：2012-10-12T18:35:51.643
> 
> 标签：java

由于返回类型在函数重载中没有任何作用，编译器只检查调用时使用的那部分代码的唯一性。

那为什么这段代码不包含错误

```
class Temp{
  Temp(){
    System.out.println("Default Constructor");
  }
  void Temp(){
    S.o.p("HEll"); 
  }
  public static void main(String a[]){
    new Temp();
  }
} 
```

输出=默认构造函数...//我很震惊没有编译时间错误，因为编译器只检查调用时使用的那些代码部分，这意味着编译器只需要检查 Temp() 的唯一存在并且没有Temp() 的独特存在。

请详细说明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:37:19.600

因为`void Temp()`是一种方法，您应该在实例上调用它。允许使用类名声明方法，但调用不同。您只能使用`new`运算符调用构造函数。

[您可以在JLS#8.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8)中阅读有关构造函数的更多信息。[构造函数声明](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8)

> 构造函数永远不会被方法调用表达式调用（第 15.12 节）。

**您应该注意的主要区别是构造函数没有返回类型，并且重载的定义包括返回类型。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:37:48.693

[构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)不需要返回类型，`void Temp()`将被视为方法而不是构造函数。

调用时`void Temp();`，将调用不带参数的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:38:24.350

一个是构造函数，另一个不是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T18:38:43.843

编译器使用关键字区分方法和构造函数调用`new`。只有构造函数可以在`new`关键字之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:42:57.203

类、方法和字段位于不同的命名空间中。编译器总是可以确定使用什么构造，并且很容易区分`new Temp()`（类）与`o.Temp()`（方法）和`o.Temp`（字段）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T18:46:00.090

使用 Eclipse，您可以避免这种用法：

![请参阅上面的行](../Images/d5df6adb5e678dc69c0b2f41f5f3f548.png) 请参阅“应用”按钮上方的行

# java - 从 Java 传递到 C 后未初始化的 JNA 结构数组

> ID：12865130
> 
> 赞同：2
> 
> 时间：2012-10-12T18:36:36.540
> 
> 标签：java, c, arrays, jna, structure

我一直在使用 JNA 相对成功地从 Java 调用我编写的小型 C 库的本机函数。一旦你掌握了结构映射、内存管理和通过引用传递的技巧，将结构或指针从一个传递到另一个就非常有用。

我现在试图从 Java 到 C 传递一个结构数组。这是结构的C代码：

```
typedef struct key {
  int length;
  void *data;
} key_t; 
```

我在Java中有匹配的定义：

```
public class Key extends Structure {

  public int length;
  public Pointer data;

  public Key() {
    this.setFieldOrder(new String[] {"length", "data"});
  }

  public void setAsLong(long value) {
    this.length = 8;
    this.data = new Memory(this.length);
    this.data.setLong(0, value);
  }

  public long longValue() {
    return this.data != null ? this.data.getLong(0) : Long.MIN_VALUE;
  }
}; 
```

如果我理解了文档和在线阅读的内容，我需要通过在 Java 端执行以下操作来将我的数组创建为一个连续的内存部分：

```
Key[] keys = new Key().toArray(2);
for (int i=0; i<2; i++) {
  k.setAsLong(42+i);
} 
```

到现在为止还挺好。如果我使用 转储`Key`Java 中每个结构的内容`Structure.toString()`，那么一切都在此处。请注意，当我将单个`Key`结构从 Java 传递到 C 时，关于设置为长值、为键的内容分配内存等的代码工作正常。所以在这里我通过使用指向第一个的指针将数组传递给我的本机函数数组元素：

```
instance.foo(keys[0].getPointer(), keys.length); 
```

我的 C 函数当然是这样定义的：

```
void foo(key_t *keys, size_t count) {
  ...;
} 
```

数组正确到达那里：`keys`C端的指针与Java中的地址相同`keys[0].getPointer()`，但不幸的是，数组中每个结构的成员都是`0/NULL`，正如GDB所指出的那样：

```
(gdb) print keys
$1 = (key_t *) 0x7fd7e82389e0
(gdb) print keys[0]
$2 = {length = 0, data = 0x0} 
```

在这一点上，老实说，我不知道发生了什么。正如我所说，如果我只通过一个结构，它可以正常工作，但这里没有办法。我能看到的唯一区别是 Java 本机方法签名，它使用`Pointer`而不是，`Key[]`但是当我使用数组时，我得到：

```
IllegalArgumentException: [Lfoo.bar.Key; is not a supported argument type (in method foo ... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:10:25.087

如果您传递一个`Pointer`值，JNA 不知道您实际上是在传递`Structure`它们的一个或一个数组，并且您需要确保在本机调用`Structure.write()`之前和`Structure.read()`之后调用。

如果您传递 a`Structure`或`Structure[]`，则 JNA 将自动处理同步。在 的情况下`Structure`，JNA 使用内部簿记来确定您传递的结构是否位于结构数组的开头。

# linux - 用于搜索任何出现的短语并返回文件和路径列表的 Bash 命令

> ID：12865138
> 
> 赞同：1
> 
> 时间：2012-10-12T18:37:18.523
> 
> 标签：linux, bash, shell, command

我正在寻找一个简单的 bash 命令来在文件名、目录名和所有文件的文本中搜索短语。它应该返回文件和目录的列表。理想情况下，我希望可以选择将其通过管道传输到 > myfiles.txt 之类的文件中

就像是：

```
find 'my key phrase'
find 'my key phrase' > mylist.txt 
```

会返回：

```
/home/stuff/filewithmykeyphraseinit.txt
/home/stuff/a filename with my key phrase.doc
/home/stuff/a directory with my key phrase/another subdirectory/ 
```

**编辑：** 我收到了很多我目前正在测试的好建议。一个问题：有没有办法让这些不区分大小写？我相信将 -i 添加到 grep 有效。查找文件路径/名称怎么样？另外，我希望可以选择将输出发送到文本文件或屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:48:17.920

```
{ find . -name '*my key phrase*' ;
  grep -rl 'my key phrase' .     ;
} | sort -u > mylist.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:41:36.580

您快到了，只需指定要匹配文件名并将通配符添加到您的模式：

```
find -name '*my key phrase*' > mylist.txt 
```

要在文件内容中搜索，请使用 grep 命令（带有`-r`递归选项或 rgrep）：

```
rgrep -l 'my key phrase' >> mylist.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:09:17.720

一个命令完成所有操作（使用 xargs 和 bash）

```
find | xargs -I {} bash -c '(([[ -f "{}" ]] && grep -l "my key phrase" "{}") || ([[ "{}" =~ "my key phrase" ]] && echo {}))' 
```

# c# - 正则表达式 - 如何创建

> ID：12865141
> 
> 赞同：1
> 
> 时间：2012-10-12T18:37:41.283
> 
> 标签：c#, regex, data-annotations

我正在寻找写一个正则表达式，我的在线研究让我到处都是。这是我想要做的：

```
[Required]
[RegularExpression("MyRegExString", ErrorMessage = "Use only valid characters.")]
public string Name { get; set; } 
```

我想让我的用户输入任何字母字符（大写或小写）和数字，有空格，并且只有 _（下划线）、$、#、*、（、）、+、@、、（逗号）、和 '（撇号）。

谁能帮我生成这个字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:44:56.720

只需将它们全部输入一个字符类，并要求它们整个字符串由该类中的字符组成（分别在开头和结尾放置`^`和锚点）：`$`

```
"^[a-zA-Z0-9_ $#*()+@,']*$" 
```

正则表达式还有一个内置的字符类`\w`，可以匹配字母（大小写）、数字或下划线，允许这个稍短的版本：

```
"^[\w $#*()+@,']*$" 
```

如果要禁止空字符串，请在末尾使用`+`而不是。`*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:46:18.123

`\w`表示任何字母字符、数字或下划线。Rest 必须一一添加，但在某些环境中，美元符号应该用 转义`\`，因为没有它，它代表字符串的结尾。符号`^`表示字符串的开头。星`*`的意思是“没有或更多”，`[...]`意思是“里面的任何字符”。

```
^[\w \$#*()+@,']*$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:53:32.007

继续`^[a-zA-Z]+$`添加您想要的任何字符`[...]`。

一些特殊字符需要转义`\`。

例子：

```
/^[a-zA-Z!”$%&’()*\+,\/;\[\\\]\^_{|}~]+$/ 
```

# c# - 如何从外部网页获取信息？

> ID：12865145
> 
> 赞同：0
> 
> 时间：2012-10-12T18:37:54.187
> 
> 标签：c#, .net, web

对于我正在从事的个人项目，我想从网站上获取流量数据。有问题的网站在表格的一个单元格中显示了这一点。我可以简单地让我的程序连接到该站点，打开页面，然后将该单元格的内容作为字符串获取吗？在 .NET 框架中主要使用 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:46:09.840

这是一种通常称为“网页抓取”的操作。您可以使用 WebClient 手动完成：

```
using System.Net;

using (WebClient client = new WebClient ()) 
{
    html = client.DownloadString(@"http://somesite.com/somepage.html");        
} 
```

然后解析字符串以查找您想要的数据。这可能很容易或非常困难，具体取决于您正在抓取的页面的复杂性。

更好的方法是使用像[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)这样的网络抓取库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:40:33.800

假设它是一个简单的 GET，使用 System.Net.WebClient 到 DownloadString(...)，然后使用 RegExpr 查找单元格的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:44:16.173

看看[WebFetch](http://www.csharp-station.com/HowTo/HttpWebFetch.aspx)。

这是一个关于获取 HTTP 内容的非常好的教程和示例代码。

# c# - 将字典作为 ICollection 返回

> ID：12865158
> 
> 赞同：0
> 
> 时间：2012-10-12T18:38:44.213
> 
> 标签：c#, generics, collections, dictionary, icollection

我有一个可以实现各种集合和数据类型的接口，它适用于某些集合但字典给我带来了问题，我猜是因为字典有点不同并且有键值对？

```
public interface IStructure
{
    void InsertRun<T> (T item);
    ICollection RetrieveSortedListRun<T>();
    T RetrieveItemRun<T>(T item);
}

class DictionaryRun : IStructure
{
    IDictionary<int, object> dictionary;

    public DictionaryRun()
    {
        dictionary = new Dictionary<int, object>();
    }

    public void InsertRun<T>(T item)
    {
        dictionary.Add(dictionary.Count + 1, item);
    }

    public ICollection RetrieveSortedListRun<T>()
    {
        return dictionary;
    }

    public T RetrieveItemRun<T>(T item)
    {
        return item;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:50:36.063

`IDictionary<TKey, TValue>`不执行`ICollection`，执行`ICollection<KeyValuePair<TKey, TValue>>`。

照原样，如果您将字典更改为 a`IDictionary`您的代码将编译。

但是，在我看来，您对界面和对象的整体设计可能会被重新设计。

```
public interface IStructure<T>
{
  void InsertRun(T item);
  ICollection<T> RetrieveSortedListRun();
  T RetrieveItemRun(T item);
}

class DictionaryRun<T> : IStructure<T>
{
  IDictionary<int, T> dictionary;

  public DictionaryRun()
  {
    dictionary = new Dictionary<int, T>();
  }

  public void InsertRun(T item)
  {
    dictionary.Add(dictionary.Count + 1, item);
  }

  public ICollection<T> RetrieveSortedListRun()
  {
    return dictionary.Values;
  }

  public T RetrieveItemRun(T item)
  {
    return item;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:55:30.523

A`Dictionary<TKey,TValue>`实现`ICollection<KeyValuePair<TKey,TValue>>`不了`ICollection<TValue>`。似乎您从未使用过密钥，那么为什么不使用 a`HashSet<T>`呢？`HashSet<T>`实现`ICollection<T>`。

* * *

**更新**

你的代码行

```
dictionary.Add(dictionary.Count + 1, item); 
```

让我认为您所需要的只是一个有序列表。与根据键对列表进行排序的排序列表相比，有序列表保持原始插入顺序。因此，您可能最好使用`List<T>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:47:11.063

是的，但 Dictionary 有一种方法可以将自身转换为实现 ICollection 的 List：

```
public ICollection RetrieveSortedListRun<T>()
{
    return dictionary.ToList();
} 
```

这将返回`KeyValuePair`s 的集合。

# php - 按二级键对多维数组进行排序

> ID：12865167
> 
> 赞同：3
> 
> 时间：2012-10-12T18:39:19.507
> 
> 标签：php, sorting, multidimensional-array

我有一个看起来像这样的数组：

```
array(3) { 
    ["Fall Quarter 2012"]=> array(2) { 
          [20121018]=> array(1) { 
              ["agenda"]=> string(55) "Fall_2012/Agenda_20121018.pdf" 
          }
          [20121011]=> array(2) { 
              ["agenda"]=> string(55) "Fall_2012/Agenda_20121011.pdf" 
              ["minutes"]=> string(56) "Fall_2012/Minutes_20121011.pdf" 
          } 
    } 
    ["Spring Quarter 2012"]=> array(1) { 
          [20120413]=> array(1) { 
              ["agenda"]=> string(57) "SPRing_2012/Agenda_20120413.pdf" 
          } 
    } 
    ["Summer Quarter 2012"]=> array(1) { 
          [20120610]=> array(2) { 
              ["agenda"]=> string(57) "Summer_2012/Agenda_20120610.pdf" 
              ["minutes"]=> string(58) "Summer_2012/Minutes_20120610.pdf" 
          } 
    } 
 } 
```

而且我想使用日期键对其进行排序，以便季度按正确的顺序排列秋季/夏季/春季。应该是这样的：

```
array(3) { 
    ["Fall Quarter 2012"]=> array(2) {
          [20121018]=> array(1) { 
              ["agenda"]=> string(55) "Fall_2012/Agenda_20121018.pdf" 
          }
          [20121011]=> array(2) { 
              ["agenda"]=> string(55) "Fall_2012/Agenda_20121011.pdf" 
              ["minutes"]=> string(56) "Fall_2012/Minutes_20121011.pdf" 
          } 
    }
    ["Summer Quarter 2012"]=> array(1) { 
          [20120610]=> array(2) { 
              ["agenda"]=> string(57) "Summer_2012/Agenda_20120610.pdf" 
              ["minutes"]=> string(58) "Summer_2012/Minutes_20120610.pdf" 
          } 
    } 
    ["Spring Quarter 2012"]=> array(1) { 
          [20120413]=> array(1) { 
              ["agenda"]=> string(57) "SPRing_2012/Agenda_20120413.pdf" 
          } 
    } 
 } 
```

有没有办法通过使用日期排序来获得这个结果，或者我应该使用[uksort()](http://php.net/manual/en/function.uksort.php)函数用我自己的模式对季度进行排序？

请让我知道你在想什么！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:40:03.437

您应该使用 uasort 功能。您的代码可能如下所示：

```
function myComparison($a, $b){
    return (key($a) > key($b)) ? -1 : 1;
} 

uasort ( $quarters , 'myComparison' ); 
```

这将使用`$quarters["Fall Quarter 2012"]["20121018"]`例如

# java - 堆栈跟踪是如何生成的？

> ID：12865180
> 
> 赞同：3
> 
> 时间：2012-10-12T18:40:00.457
> 
> 标签：java, exception, stack-trace

程序中没有一个方法“知道”它在堆栈中的位置。它所知道的只是它自己的小工作，它会做这件事并返回。那么当抛出异常并打印堆栈跟踪时，这是从哪里来的呢？

JVM 中的每个应用程序旁边是否隐式运行了一个单独的线程来监视程序的状态？或者 JVM 本身是否保存了这些信息，并且异常在抛出它们时会以某种方式从中提取数据？

如果是其中任何一种情况，是否可以使用某些调用来检索堆栈跟踪（从监视器线程或 JVM）*而不*抛出异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:41:34.060

每个线程都有自己的`stack`. 每个方法调用都会创建一个堆栈帧。如果任何方法的代码中发生错误，它将传播到调用者方法。这样 JVM 可以跟踪哪个方法产生了错误以及调用层次结构是什么。

如果您正确地观察堆栈跟踪，您将在顶部看到发生错误的方法，在底部看到层次结构。

[斯坦福大学教授在youtube](http://www.youtube.com/watch?v=W8nNdNZ40EQ&feature=relmfu)上有一个很棒的讲座，以了解它是如何工作的。我建议看一下。

注意：这是理论。如果您想了解 API 的工作原理，@Peter Lawrey 的回答可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:42:10.187

它来自通过代码运行的 Thread 类。

```
Thread.dumpStack(); 
```

要查看它，您可以：

```
 StackTraceElement[] trace = Thread.currentThread().getStackTrace();
    for (int i=0; i < trace.length; i++)
        System.out.println("\tat " + trace[i]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T18:42:29.453

可以通过 . 知道方法所属的线程`Thread.currentThread`。使用这个线程，您可以获得 StackTrace，因为 JVM 中的每个线程都有一个堆栈。此外，`main`程序在`main`线程中运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T18:49:50.357

当您创建 Throwable 时（而不是在您抛出它时），它记录堆栈跟踪是与 Throwable 相关联的低级/隐藏方式。当您第一次调用 getStackTrace() 时，它会根据`StackTraceElement[]`低级信息创建对象。它不会这么懒惰，因为堆栈跟踪通常不被使用。

# jquery - kendo ui：如何进行默认排序、电话号码格式化以及将单词 null 替换为 none

> ID：12865190
> 
> 赞同：1
> 
> 时间：2012-10-12T18:40:45.800
> 
> 标签：jquery, asp.net-mvc-3, user-interface, formatting, kendo-ui

在我的代码中，我想按姓氏升序进行默认排序，电话号码格式为 (xxx)-xxx-xxxx 并将单词 null 替换为 none，例如某些 mobiel 号码为 null，我想显示没有

```
{
                    field: "LName",
                    width: 100,
                    title: "Last Name",
                    defaultSorting: true

                }, {
                    field: "DateOfBirth",
                    width: 100,
                    title: "Date of Birth",
                    type: 'date',
                    template: '#= kendo.toString(DateOfBirth,"MM/dd/yyyy") #'

                }, {
                    field: "Email",
                    width: 230,
                    title: "Email"
                }, {
                    field: "MobileNumber",
                    width: 100,
                    title: "Mobile Number"

                }, 
```

任何人以前做过这个，或者有想法请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:35:09.263

设置默认排序是在[数据源](http://docs.kendoui.com/api/framework/datasource#sort%20array%20%20objectdefault)上完成的，可以这样完成：

```
sort: { field: "LName", dir: "asc" } 
```

格式化电话号码有点棘手，因为没有内置的格式化支持。您必须将数字分开，然后您可以使用[format 函数](http://docs.kendoui.com/api/framework/kendo#format)来格式化数字（假设您的数字格式为 1234567890）：

```
function formatPhoneNumber(phoneNumber) {
    var piece1 = phoneNumber.substring(0, 3); //123
    var piece2 = phoneNumber.substring(3, 6); //456
    var piece3 = phoneNumber.substring(6); //7890

    //should return (123)456-7890
    return kendo.format("({0})-{1}-{2}", piece1, piece2, piece3);
} 
```

要将 null 替换为 none，请使用另一个模板函数。这也可以应用电话号码格式：

```
template: '#= (MobileNumber) ? formatPhoneNumber(MobileNumber) : "none" #' 
```

您需要确保您的 formatPhoneNumber 函数是作用域的，以便 kendo 模板可以在绑定时访问它。

# java - Groovy 没有方法调用 Java 库的签名

> ID：12865191
> 
> 赞同：1
> 
> 时间：2012-10-12T18:40:57.797
> 
> 标签：java, groovy, casting, static-methods

随着许多问题的开始，这让我发疯。

我有一个本土的`StarTeam`java 库。我有一个像这样的静态方法：

```
public static Label getLatestDeploymentLabel(com.starbase.starteam.File child) {
 // blah
} 
```

当我从 java 调用该方法时，该方法按预期工作。当我从 Groovy 调用它时，我得到：

```
Caught: groovy.lang.MissingMethodException: 
No signature of method: static pkg.starteam.StarTeamUtils.getLatestDeploymentLabel() 
is applicable for argument types: (com.starbase.starteam.File) 
values: [FILENAME-FOO.sql] at starteam.run(starteam.groovy:54) 
```

`println`在调用该方法之前，我输入了一个权利：

```
chgset.elements().each() { item ->
  println "type of item is ${item.class.getName()}"
  def latestlabel = StarTeamUtils.getLatestDeploymentLabel(item)
} 
```

并确认，事实上，它正在迭代我期望它正在迭代的内容：

`type of item is com.starbase.starteam.File`

我在其他与静态方法相关的帖子中看到了一些不同的类似问题，并且响应类似于“你确定它是静态方法吗？”。我确定这是一个静态方法。

这没有太多的常规代码。它的所有内容都包含在默认包中的单个脚本中。然后隐式调用 main 方法，并在脚本类的主体中调用 java 库。我在 DOS 批处理包装脚本中设置类路径，例如：

```
SET INITIALCLASSPATH=%CLASSPATH%
SET NEWCP=c:/libs/etc.jar;c:/etc/etc.jar
SET GROOVYPATH=c:/groovy.bat
SET CLASSPATH=%NEWCP%
%GROOVYPATH% %*
SET CLASSPATH=%INITIALCLASSPATH% 
```

我创建了一个简单的情况，我*认为*它可以模仿我的情况。

```
C:\apps\groovy-1.8.6\scripts>type Other.java
class Other {
    private String name = "notset";
    public Other(String name) {
        this.name = name;
        System.out.println("Created an other");
    }
    public String toString() {
        return name;
    }
}
C:\apps\groovy-1.8.6\scripts>type ThingList.java
import java.util.ArrayList;
import java.util.Iterator;

class ThingList {
    ArrayList ourlist = new ArrayList<Other>();
    public ThingList(){}
    public ArrayList add(Other thing) {
        ourlist.add(thing);
        return ourlist;
    }
    public Iterator iterator(){
        return ourlist.iterator();
    }
}
C:\apps\groovy-1.8.6\scripts>type JavaLib.java
class JavaLib {
    public JavaLib() {}
    public static ThingList getThingList(Other thing) {
        ThingList tl = new ThingList();
        Other one = new Other("extra one");
        tl.add(thing);
        tl.add(one);
        return ThingList;
    }
}
C:\apps\groovy-1.8.6\scripts>type testthing.groovy
def myOther = new Other("A new other")
println "type of myOther is ${myOther.class.getName()}"
def myList = getThingList(myOther)
myList.each() {
  println it
}
C:\apps\groovy-1.8.6\scripts>type wrapper.bat
@ECHO OFF
SET INITIALCLASSPATH=%CLASSPATH%
SET GROOVY=C:\apps\groovy-1.8.6\bin\groovy.bat
SET CP=.
SET CLASSPATH=%CP%

%GROOVY% %*

SET CLASSPATH=%INITIALCLASSPATH%
C:\apps\groovy-1.8.6\scripts>wrapper.bat testthing.groovy
Created an other
type of myOther is Other
Caught: groovy.lang.MissingMethodException: No signature of method: testthing.ge
tThingList() is applicable for argument types: (Other) values: [A new other]
groovy.lang.MissingMethodException: No signature of method: testthing.getThingLi
st() is applicable for argument types: (Other) values: [A new other]
        at testthing.run(testthing.groovy:3)

C:\apps\groovy-1.8.6\scripts> 
```

任何见解或建议将不胜感激！

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:26:56.797

如果没有重现的方法，就不可能确定问题出在哪里。一种可能性是这是一个类加载问题。Groovy 代码是否包含在位于类路径上的常规 Groovy 类中，或者 Groovy 代码是否被动态加载（例如通过使用`GroovyShell`）？

# css - Rails 中的页面特定 css 样式表（使用两个不同版本的 twitter bootstrap）

> ID：12865192
> 
> 赞同：3
> 
> 时间：2012-10-12T18:40:58.943
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, styles

我已经启动了一个 Rails 项目并在其中实现了 bootstrap-sass。不久之后，我找到了一个使用不同版本的 twitter bootstrap 的主题/模板。我已将模板添加到应用程序中，但视图未按预期完美对齐。然后，我将主题/模板附带的特定资产添加到我的项目中（例如 jquery 版本、另一个较旧的引导程序版本），结果几乎是完美的。但是，仍然存在一些对齐问题。当我检查 CSS 时，我可以看到这是由于两个版本的引导程序之间的冲突而发生的。

我想我应该这样做，以便这个模板只使用它附带的 twitter bootstrap 版本。如果是这样，我该怎么做？我怎样才能让rails视图只使用某个css样式表而不是从其他人那里读取？

（如果这不是最好的解决方案，我应该考虑哪些替代方案？）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T20:32:00.470

试试这个：

1）使用 2 个布局（application.html.erb 和 new_application.html.erb）2）有两个主 javascript/css 文件（application.js 和 new_application.js，application.css 和 new_application.css）3）在您的应用程序中。 html.erb 包括第一个 application.js 和 application.css，在您的第二个布局中，导入新的应用程序 js 和 css 4) 对于页面的特定部分，在控件上从您想要的任何布局的右父控制器继承.

```
class NewBootstrapController < ActionController::Base
  layout 'new_application'
end

class OldBootstrapController < ActionController::Base
  layout 'application'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:30:31.190

最佳实践是尝试将您的项目视为由“组件”而不是页面组成。因此，请专注于使您的组件的样式保持最新和一致。

因此，与其为单个页面编码（即使是小型（ish）项目也难以扩展且难以维护），而是寻找将元素转换为可重用组件的方法。默认情况下，Bootstrap 是这种方式，因此如果您使用的某些组件比其他组件多，请将这些组件作为重构的优先级，然后在您的页面中寻找重复模式，并尝试考虑如何创建语义化、基于组件的类来描述它们。

而不是这个：

```
.sidebar-home {} 
```

试试这个：

```
.sidebar-narrow {} // or whatever describes your element 
```

这里的操作要点是，如果您的工作超出这个项目，养成将 CSS/HTML 视为由组件组成的良好习惯，您将能够重用代码并更快地识别模式你的用户界面。

# c# - 使用 C# 在浏览器中搜索文本

> ID：12865193
> 
> 赞同：1
> 
> 时间：2012-10-12T18:41:03.297
> 
> 标签：c#, regex

在 c# 中，我使用 Web 客户端类来打开 html。在那个 html 中有特定的 IP。我想搜索我的本地机器IP

```
 WebClient wbclint = new WebClient();
       value1 = wbclint.DownloadString("foo.html");
                        Console.WriteLine("testing");
                        Console.ReadKey(true); 
```

那么使用这个 web 客户端如何捕获特定的 ip？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:47:49.973

使用正则表达式搜索字符串， http: [//msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms228595%28v=vs.80%29.aspx)这是一个在 c# 中使用正则表达式执行非常类似的操作的示例；验证电话号码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:59:05.767

```
public class Test
{
    public static void Main (string[] args)
    {
        if (args == null || args.Length == 0)
        {
            throw new ApplicationException ("Specify the URI of the resource to retrieve.");
        }

        var client = new WebClient ();
        var s = client.DownloadString (args[0]);

        // var data = client.OpenRead(args[0]);
        // var reader = new StreamReader(data);
        // var s = reader.ReadToEnd();

        var myIP = "100.100.100.100";
        var ipFound = s.Contains(myIP);

        Console.WriteLine("Is my IP in the web page?: {0}", ipFound );

        data.Close ();
        reader.Close ();
    }
} 
```

# ios - UICollectionView registerClass: forCellWithReuseIdentifier 方法会破坏 UICollectionView

> ID：12865196
> 
> 赞同：30
> 
> 时间：2012-10-12T18:41:09.953
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell

方法的作用是`registerClass:forCellWithReuseIdentifier:`什么？根据 Apple 的开发人员文档，它应该

> “注册一个用于创建新集合视图单元格的类。”

当我尝试在我的项目中使用它时，我得到了一个黑色的集合视图。当我删除它时，一切正常。

```
#define cellId @"cellId"
#import "ViewController.h"
#import "Cell.h"
@interface ViewController ()
@property (weak, nonatomic) IBOutlet UICollectionView *collectionView;
@property(strong, nonatomic)NSMutableArray * photoArray;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSLog(@"%@",_photoArray);
    _photoArray = [[NSMutableArray alloc]initWithCapacity:0];
    [_collectionView registerClass:[Cell class] forCellWithReuseIdentifier:cellId];
    for(int i=1;i<=12;i++)
    {
        NSString * imgName = [NSString stringWithFormat:@"%d.png",i];
        UIImage *img  = [UIImage imageNamed:imgName];
        [_photoArray addObject:img];
    }
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section{
    return _photoArray.count;
}

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath{

    Cell* cell = [_collectionView  dequeueReusableCellWithReuseIdentifier:cellId forIndexPath:indexPath];
    cell.cellImage.image = [_photoArray objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-14T17:58:36.907

如果您已经在 Storyboard 中创建了 UICollectionView，连接了您的`dataSource`and `delegate`，并且您已经添加了所有必需的方法：

*   `numberOfItemsInSection`
*   ~~`numberOfSectionsInCollectionView`~~（不是必需的方法 -[请参阅此评论](https://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-uicolle/12884938#comment23861991_12884938)）
*   `cellForItemAtIndexPath`

然后`registerClass`/`registerCell`方法不是必需的。但是，如果您需要重用视图、数据或单元格，那么您应该使用这些方法，以便 iOS 可以根据需要填充您的 UICollectionView。这也可以在你的 Storyboard 中通过设置**Prototype Cell**来完成（与方法相同的原理`registerClass`。

此外，如果您正在寻找关于它的`registerCell`作用和使用方法的良好解释，请查看[此链接](http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout)并滚动到标题为“单元格和视图重用”的底部部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T10:06:12.000

同意[RazorSharp 的回答](https://stackoverflow.com/questions/12865196/uicollectionview-registerclass-forcellwithreuseidentifier-method-breaks-my-coll/12884938#12884938)，并想指出[Techtopia 链接](http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout)中对我来说的关键短语是：

> If the cell class was written in code, the registration is performed using the registerClass: method of UICollectionView, otherwise use registerNib

# opengl - 如何解决 NVIDIA 通道异常？

> ID：12865198
> 
> 赞同：1
> 
> 时间：2012-10-12T18:41:20.553
> 
> 标签：opengl, nvidia

我应该如何调试这个？目前我正在使用 OpenGL Profiler，并打印日志以查看发生了什么。但是，似乎错误发生在其他地方，我不确定如何找出导致问题的原因。

我的代码：

```
vertexCount = 3;
GLfloat vertices[] = {
    -1.0f, -1.0f,
    1.0f, -1.0f,
    -1.0f,  1.0f,
};

/* Create Buffer -- (I know this shoudn't be done every frame, but I wanted to be sure the buffer wasn't getting lost somehow */
    GLuint buffer[1];
glGenBuffers(1, buffer);

// -- vertices
    glBindBuffer(GL_ARRAY_BUFFER, buffer[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat) * vertexCount, &vertices, GL_STATIC_DRAW);

/* Render */
    glBindBuffer(GL_ARRAY_BUFFER, buffer[0]);
    glVertexAttribPointer(
                      0,                                /* attribute */
                      1,                                /* size */
                      GL_FLOAT,                         /* type */
                      GL_FALSE,                         /* normalized? */
                      sizeof(GLfloat)*2,                /* stride */
                      (void*)0                          /* array buffer offset */
                      );
    glEnableVertexAttribArray(0);

glDrawArrays(GL_TRIANGLES, 0, vertexCount);

    glDisableVertexAttribArray(0);

if(glGetError())
    NSLog(@"Error!");
else
    NSLog(@"No error"); 
```

...和控制台日志：

```
10/12/12 2:34:26.000 PM kernel[0]: NVDA(OpenGL): Channel exception! exception type = 0xd = GR: SW Notify Error
10/12/12 2:34:26.000 PM kernel[0]: IOVendorGLContext::ReportGPURestart 
10/12/12 2:34:26.000 PM kernel[0]: 0000006e
10/12/12 2:34:26.000 PM kernel[0]: 00100000 00008597 00000474 00000000
10/12/12 2:34:26.000 PM kernel[0]: 0000047e 00000904 00008000 0000000e
10/12/12 2:34:26.000 PM kernel[0]: 00000000 00000000 00000000
10/12/12 2:34:26.000 PM kernel[0]: 00000000 0000000c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T23:39:43.073

如果这是您的所有相关代码，那么您正在生成越来越多的 VBO，而无需再次使用 删除它们`glDeleteBuffer()`，这可能会导致驱动程序在一段时间后出现恐慌。

我有一个类似的问题，我不小心同时绘制和重新创建 VBO，这会在内部将它们堆叠起来，直到出现太多。这导致了相同的驱动程序异常，冻结屏幕甚至自动重启我的 MacBook Pro。

无论如何，NVidia 驱动程序不应该以这种方式吓坏。这是一个耻辱。

# android - 确定的安卓屏幕尺寸

> ID：12865199
> 
> 赞同：0
> 
> 时间：2012-10-12T18:41:21.487
> 
> 标签：android, screens

我已经查看了有关此问题的 stackoverflow 上的页面，然后查看了作为提供的一些答案提供的链接，但我仍然很困惑。我使用 Photoshop 在我的 Android 应用程序中开发我的屏幕截图。它分解为这一点，res 文件夹中有四个文件夹，用于不同的手机类型 Small Medium Large X-Large。如果我想创建一个用作完全填充背景的背景的图像，并且我在 Photoshop 上以每英寸 72 像素的默认分辨率创建该图像，我应该为每个图像使用什么方法和尺寸？

我在清单文件中使用的规范将设置为宽度和高度的填充父级。

我知道有许多类型的手机具有不同的屏幕尺寸，但我需要最通用的

据我了解，图像将被调整大小以适合屏幕，但如果原始图像最初没有设置为有点接近，这本身会导致创建奇怪的图像。

所以我需要每个文件夹的典型背景图像的尺寸有点接近。

小 -> X_Dim x Y_Dim

中 -> X_Dim x Y_Dim

大 -> X_Dim x Y_Dim

超大 -> X_Dim x Y_Dim

四夹四套尺寸

我再次使用 Photoshop 和 72 像素/英寸

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:11:38.253

屏幕尺寸与屏幕 dpi 的概念不同

因此，根据您的问题，每个 dpi 最通用的屏幕分辨率是：

ldpi 240 x 320 像素

mdpi 320 x 480 像素

高清 480 x 800 像素

xhdpi 720 x 1280 像素

我说的是每个 ldpi/mdpi/hdpi/xhdpi 通常具有的通用屏幕分辨率，因此如果您可以创建具有这四种尺寸的资产，它将适合大多数设备。

# forms - 重力形式创建动态输入名称和 ID

> ID：12865200
> 
> 赞同：3
> 
> 时间：2012-10-12T18:41:24.337
> 
> 标签：forms, wordpress, gravity

我将尽我所能描述我正在尝试做的事情以及我所做的事情，但是，如果您需要更多信息来提供帮助，请告诉我。

我想要做的是创建一个 html 表，它有 5 列和任意数量的行。这是一个非常基本的订单表格，将列出我们出售的文学作品。前 4 列提供有关商品的信息，第 5 列是一个简单的文本输入“数量”字段，允许用户输入他们希望购买的商品的“数量”。你可以在这里看到它的样子：[http](http://web.go-spi.com/cgl/literature/) ://web.go-spi.com/cgl/literature/ 。

需要注意的是，表格是通过我在 Wordpress 中创建的自定义循环动态生成的。我这样做是为了让我们能够从表中动态添加或删除文献项目。

编码：

```
<div class='gf_browser_chrome gform_wrapper' id='gform_wrapper_6' >
<a id='gf_6' name='gf_6' class='gform_anchor' ></a>
<form method='post' enctype='multipart/form-data' target='gform_ajax_frame_6' id='gform_6'  action='/cgl/literature/#gf_6'>
<div class='gform_body'>
<div id='gform_fields_6' class='gform_fields top_label description_below'>

<?php $literature_query = new WP_Query( array( 'post_type' => 'literature', 'showposts' => '50', 'orderby' => 'meta_value', 'meta_key' => 'ecpt_brochurerow', 'order' => 'ASC'));
if( $literature_query->have_posts() ):?>
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="data">
    <thead>
        <tr>
            <th>Brochure Type</th>
            <th><label class='gfield_label' for='input_6_1'>Description</label></th>
            <th>Cost</th>
            <th>Qty/Pack</th>
            <th><label class='gfield_label' for='input_6_2'>Qty</label></th>
        </tr>
    </thead>
    <tbody>
    <?php  while( $literature_query->have_posts() ): $literature_query->the_post();?>
    <tr>
    <td><?php echo get_post_meta($post->ID, 'ecpt_brochuregroup', true); ?></td>
    <td><?php echo get_post_meta($post->ID, 'ecpt_brochuredescription', true); ?><input type='hidden' class='gform_hidden' name='input_1' id='input_6_1' value="<?php echo get_post_meta($post->ID, 'ecpt_brochuredescription', true); ?>"/></td>
    <td><?php echo get_post_meta($post->ID, 'ecpt_brochurecost', true); ?></td>
    <td><?php echo get_post_meta($post->ID, 'ecpt_brochureqtyperpack', true); ?></td>
    <td><input name='input_2' id='input_6_2' type='text' value='' class='medium'/></td>
    </tr>
<?php endwhile;
wp_reset_postdata();   
?>
</tbody>
</table>
<?php else: ?>
<div class="alert alert-block">
<p>Sorry, there is currently no literature available. Please check back later.</p>
</div>
<?php endif; ?>
</div>
</div>
<div class='gform_footer top_label'> 
<input type='submit' id='gform_submit_button_6' class='button gform_button' value='Submit' tabindex='1' /><input type='hidden' name='gform_ajax' value='form_id=6&amp;title=&amp;description=' />
<input type='hidden' class='gform_hidden' name='is_submit_6' value='1' />
<input type='hidden' class='gform_hidden' name='gform_submit' value='6' />
<input type='hidden' class='gform_hidden' name='gform_unique_id' value='5077469db6b44' />
<input type='hidden' class='gform_hidden' name='state_6' value='YToyOntpOjA7czo2OiJhOjA6e30iO2k6MTtzOjMyOiJjMDlmZjFlZmU1MjMzN2M3M2FkODliMmVjY2Y5YzIxMyI7fQ==' />
<input type='hidden' class='gform_hidden' name='gform_target_page_number_6' id='gform_target_page_number_6' value='0' />
<input type='hidden' class='gform_hidden' name='gform_source_page_number_6' id='gform_source_page_number_6' value='1' />
<input type='hidden' name='gform_field_values' value='' />          
</div>

</form>
</div>

<iframe style='display:none;width:0px; height:0px;' src='about:blank' name='gform_ajax_frame_6' id='gform_ajax_frame_6'></iframe>
<script type='text/javascript'>function gformInitSpinner_6(){jQuery('#gform_6').submit(function(){if(jQuery('#gform_ajax_spinner_6').length == 0){jQuery('#gform_submit_button_6').attr('disabled', true).after('<' + 'img id="gform_ajax_spinner_6"  class="gform_ajax_spinner" src="/cgl/wp-content/plugins/gravityforms/images/spinner.gif" alt="" />');jQuery('#gform_wrapper_6 .gform_previous_button').attr('disabled', true); jQuery('#gform_wrapper_6 .gform_next_button, #gform_wrapper_6 .gform_image_button').attr('disabled', true).after('<' + 'img id="gform_ajax_spinner_6"  class="gform_ajax_spinner" src="/cgl/wp-content/plugins/gravityforms/images/spinner.gif" alt="" />');}} );}jQuery(document).ready(function($){gformInitSpinner_6();jQuery('#gform_ajax_frame_6').load( function(){var contents = jQuery(this).contents().find('*').html();var is_postback = contents.indexOf('GF_AJAX_POSTBACK') >= 0;if(!is_postback){return;}var form_content = jQuery(this).contents().find('#gform_wrapper_6');var is_redirect = contents.indexOf('gformRedirect(){') >= 0;jQuery('#gform_submit_button_6').removeAttr('disabled');var is_form = !(form_content.length <= 0 || is_redirect);if(is_form){jQuery('#gform_wrapper_6').html(form_content.html());jQuery(document).scrollTop(jQuery('#gform_wrapper_6').offset().top);if(window['gformInitDatepicker']) {gformInitDatepicker();}if(window['gformInitPriceFields']) {gformInitPriceFields();}var current_page = jQuery('#gform_source_page_number_6').val();gformInitSpinner_6();jQuery(document).trigger('gform_page_loaded', [6, current_page]);}else if(!is_redirect){var confirmation_content = jQuery(this).contents().find('#gforms_confirmation_message').html();if(!confirmation_content){confirmation_content = contents;}setTimeout(function(){jQuery('#gform_wrapper_6').replaceWith('<' + 'div id=\'gforms_confirmation_message\' class=\'gform_confirmation_message_6\'' + '>' + confirmation_content + '<' + '/div' + '>');jQuery(document).scrollTop(jQuery('#gforms_confirmation_message').offset().top);jQuery(document).trigger('gform_confirmation_loaded', [6]);}, 50);}else{jQuery('#gform_6').append(contents);if(window['gformRedirect']) {gformRedirect();}}jQuery(document).trigger('gform_post_render', [6, current_page]);} );} );</script><script type='text/javascript'> jQuery(document).ready(function(){jQuery(document).trigger('gform_post_render', [6, 1]) } ); </script> 
```

问题：

1) 我不确定如何动态设置输入名称和 id，以便它们在您进入表单时是连续的。目前，随着代码的设置，无论填写多少个输入，我都只会收到第一个输入的提交值。

感谢您提供的任何帮助。谢谢！

# javascript - 从后面的代码中调用javascript函数来删除div，但是回发时会出现div

> ID：12865203
> 
> 赞同：0
> 
> 时间：2012-10-12T18:41:34.003
> 
> 标签：javascript, jquery, asp.net, code-behind

我有 2 个带有 asp 控件的 div。当我想执行某个操作时，我希望 div 出现，其余的，我需要它们隐藏。

在我的 Page_load 中，我有这段代码来调用 javascript 函数：

```
if (Request.QueryString["isMovingTask"] != null)
    {
        isMovingTask = Convert.ToBoolean(Request.QueryString["isMovingTask"].ToString());
    }
    if (!isMovingTask)
    {
        Page.ClientScript.RegisterStartupScript(GetType(),"Remove","removeDiv();",true);
    } 
```

isMovingTask 是从我的操作文件（“viewTask.aspx”）发送的布尔值。如果是真的，这意味着我要求移动一个任务，所以我需要显示 div，否则隐藏它们。所以在 if 语句中我检查它是否不正确，然后我想隐藏 div。所以我调用了一个名为“removeDiv()”的 JS 函数，它看起来像：

```
<script type="text/javascript">
        function removeDiv() {
            $('#checkboxes').remove();
            $('#exhibitWarning').remove();
        }
    </script> 
```

“viewTask.aspx”是我的页面，它在fancybox 中调用了一个“moveTemplate.aspx”文件，所有这些代码都在“moveTemplate.aspx”页面中。因此，当我第一次启动它时，一切正常，div 被隐藏等。但是当我单击导致回发的单选按钮时，出于某种原因，它会将 div 放回原处。

关于它为什么这样做的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:48:51.380

您可以改用面板控件。并且可以将它们的可见属性设置为真或假。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T11:32:14.080

可以使用面板控件。很容易将它们的可见属性设置为真或假，然后你的任务就完成了。

# sql - SQL将行旋转到列...动态行数

> ID：12865206
> 
> 赞同：1
> 
> 时间：2012-10-12T18:41:51.657
> 
> 标签：sql, sql-server-2008, tsql, pivot

> **可能重复：**
> [SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

我有一个具有以下结构的数据集。

```
CREATE TABLE #TempTable
  (
     Measure_ID  INT,
     measurement DECIMAL(18, 4)
  )

INSERT INTO #TempTable
VALUES
(1,2.3)
,(1,3.4)
,(1,3.3)
,(2,3)
,(2,2.3)
,(2,4.0)
,(2,4.5) 
```

我需要产生看起来像这样的输出。

```
1,2.3,3.4,3.3
2,3,2.3,4.0,4.5 
```

基本上它是 Measure_ID 的一个支点。不幸的是，可能有无限数量的 measure_id。所以 Pivot 出来了。

我希望避免 CURSORS，但如果事实证明这是最好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:49:03.270

如果您有未知数量的值，则可以使用`PIVOT`带有动态 SQL 的 a：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' 
                        + QUOTENAME('Measurement_' + cast(rn as varchar(10))) 
                    from temptable
                    cross apply
                    (
                      select row_number() over(partition by measure_id order by measurement) rn
                      from temptable
                    ) x
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT measure_id, ' + @cols + ' from 
             (
                select measure_id, measurement,
                  ''Measurement_''
                    + cast(row_number() over(partition by measure_id order by measurement) as varchar(10)) val
                from temptable
            ) x
            pivot 
            (
                max(measurement)
                for val in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/59342/4)

如果您有已知数量的值，则可以对这些值进行硬编码，类似于：

```
SELECT measure_id, [Measurement_1], [Measurement_2], 
               [Measurement_3], [Measurement_4]
from 
(
  select measure_id, measurement,
    'Measurement_'
     + cast(row_number() over(partition by measure_id order by measurement) as varchar(10)) val
  from temptable
) x
pivot 
(
   max(measurement)
   for val in ([Measurement_1], [Measurement_2], 
               [Measurement_3], [Measurement_4])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/59342/5)

两个查询将产生相同的结果：

```
MEASURE_ID | MEASUREMENT_1 | MEASUREMENT_2 | MEASUREMENT_3 | MEASUREMENT_4
==========================================================================
1          | 2.3           | 3.3           | 3.4           | (null)
2          | 2.3           | 3             | 4             | 4.5 
```

# vb.net - 反编译 vb.net 应用程序

> ID：12865207
> 
> 赞同：3
> 
> 时间：2012-10-12T18:41:53.853
> 
> 标签：vb.net, encryption, executable, decompiling

我不知道这是否是发布此问题的正确位置，如果位置不正确，请见谅。

**问题：**

第三方反编译我的 vb.net 应用程序有多容易？我的意思是它甚至可能吗？

例如，我有一个 .exe，有​​人会将那个 .exe 放入反编译器中然后... BAAM !!，他们可以看到所有代码吗？说到代码，在编译时，代码会被加密吗？如果没有，有没有办法加密代码？

我使用 SWF 反编译器将 .SWF 反编译为 .FLA，使用此工具反编译 SWF 真的非常简单。反编译一个.exe会这么容易吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:45:16.390

是的。*你可以很*容易地反编译你的代码。[.Net Reflector](http://www.reflector.net/)是一款出色的工具，可以完全按照您的描述进行操作。

想象一下，如果你加密了代码。用户计算机上的运行时仍需要对其进行解密才能理解它。

你能做的最好的就是[混淆](http://www.preemptive.com/)你的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:53:28.333

.net 反射器不再免费，我推荐 Telerik JustDecompile，免费且非常易于使用，是一个很棒的工具[http://www.telerik.com/products/decompiler.aspx](http://www.telerik.com/products/decompiler.aspx)。它能够按照您描述的方式反编译所有内容

# ruby-on-rails - 在 Rails 控制器中处理默认值的规范方法

> ID：12865210
> 
> 赞同：0
> 
> 时间：2012-10-12T18:42:12.263
> 
> 标签：ruby-on-rails

我倾向于写一堆这样的：

```
if params[:my_val]
  my_val=params[:my_val]
else
  my_val=0
end 
```

但这似乎太冗长了。大多数特定于 ruby​​ 的习语仍然是两行（如 ||=）。什么是更短（更好）的方式？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:44:39.490

一个班轮

```
my_val =  params[:my_val] || 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:46:42.023

不一定更好，但更短的是：

```
my_val = params[:my_val] ? params[:my_val] : 0 
```

# r - 摆脱“AsIs”类属性

> ID：12865218
> 
> 赞同：11
> 
> 时间：2012-10-12T18:42:47.407
> 
> 标签：r, dataframe

我认为简单的问题，但还没有找到答案。如何摆脱我的数据框中的“AsIs”类属性。它阻止了`write.dbf`包`foreign`中的转换为 dbf。我正在使用 rpy2，但它确实适用于没有“AsIs”的 R 数据框。我将完整代码放在错误消息下方。dbfs = write_dbf(r_dataframe)

```
Error in function (dataframe, file, factor2char = TRUE, max_nchar = 254)  : 
  data frame contains columns of unsupported class(es) AsIs

---------------------------------------------------------------------------
RRuntimeError                             Traceback (most recent call last)
<ipython-input-26-9072df63231a> in <module>()
----> 1 dbfs = write_dbf(r_dataframe)

/home/matthew/.virtualenvs/mypython/lib/python3.2/site-packages/rpy2-2.2.6dev_20120814-py3.2-linux-i686.egg/rpy2/robjects/functions.py in __call__(self, *args, **kwargs)
     80                 v = kwargs.pop(k)
     81                 kwargs[r_k] = v
---> 82         return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)

/home/matthew/.virtualenvs/mypython/lib/python3.2/site-packages/rpy2-2.2.6dev_20120814-py3.2-linux-i686.egg/rpy2/robjects/functions.py in __call__(self, *args, **kwargs)
     32         for k, v in kwargs.items():
     33             new_kwargs[k] = conversion.py2ri(v)
---> 34         res = super(Function, self).__call__(*new_args, **new_kwargs)
     35         res = conversion.ri2py(res)
     36         return res

RRuntimeError: Error in function (dataframe, file, factor2char = TRUE, max_nchar = 254)  : 
  data frame contains columns of unsupported class(es) AsIs 
```

我正在使用 python rpy2 与 R 对话。这不是问题所在，但这是我的代码。`write.dbf`如果我使用 R 中没有“AsIs”的数据框，则来自 Rpy2的作品。

（Python）

```
 df = DataFrame({'A': [1, 2, 3], 'B': [4, 5, 6], 'C':[7,8,9]},index=["one", "two", "three"])  I am going from python pandas dataframe to and R datafram using 

    fore = importr("foreign")

    In [19]:

    r_dataframe = com.convert_to_r_dataframe(df)

    In [20]:

    print(type(r_dataframe))

    <class 'rpy2.robjects.vectors.DataFrame'>

    In [32]:

    r_dataframe

    Out[32]:

<DataFrame - Python:0xb3db8ac / R:0xc23ac50>
[IntVector, IntVector, IntVector]
  A: <class 'rpy2.robjects.vectors.IntVector'>
  <IntVector - Python:0xc1fb1ec / R:0xc23ac28>
[       1,        2,        3]
  B: <class 'rpy2.robjects.vectors.IntVector'>
  <IntVector - Python:0xc1fb36c / R:0xc23ac00>
[       4,        5,        6]
  C: <class 'rpy2.robjects.vectors.IntVector'>
  <IntVector - Python:0xc1fb4ec / R:0xc23abd8>
[       7,        8,        9]

    print(r_dataframe)

          A B C
    one   1 4 7
    two   2 5 8
    three 3 6 9

    In [25]:

    write_dbf =robjects.r("write.dbf")

    read_dbf = robjects.r("read.dbf")

    In [26]:

    dbfs = write_dbf(r_dataframe)

Error in function (dataframe, file, factor2char = TRUE, max_nchar = 254)  : 
  data frame contains columns of unsupported class(es) AsI

    dbfs = write_dbf(r_dataframe) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T20:27:09.797

以下是我如何摆脱`AsIs`类属性。请注意，我注意保留向量可能具有的任何其他类属性：

```
unAsIs <- function(X) {
    if("AsIs" %in% class(X)) {
        class(X) <- class(X)[-match("AsIs", class(X))]
    }
    X
}

## Show why the function is needed
a <- 1:10
b <- factor(1:10)

class(I(a))
# [1] "AsIs"
class(I(b))
# [1] "AsIs"   "factor"

## Show that the function reverses the effect of `I()`
identical(a, unAsIs(I(a)))
# [1] TRUE
identical(b, unAsIs(I(b)))
# [1] TRUE 
```

# c# - 单点登录的概念视图

> ID：12865219
> 
> 赞同：1
> 
> 时间：2012-10-12T18:42:53.867
> 
> 标签：c#, asp.net, .net

我想为多个网站（sitea.com、siteb.com、sitec.com）创建单点登录。所有网站都属于同一家公司。任何数据库也与相同的公司/位置。有些是 asp.net 网络应用程序，有些是论坛。我想尝试抽象出 SSO，这样它就不会与任何一个站点纠缠在一起。我在下面概述了我的方法：

1.  用户登录到对用户进行身份验证的 sitea.com。sessionid 由 sitea.com 创建。
2.  带有用户名和 sessionid 的 cookie 被放置在用户的机器上。sessionid 被插入到所有站点都可以访问的数据库 centralAuthDB 中。
3.  用户单击 sitea.com 中对 siteb.com（论坛）执行 SSO 的链接。
4.  siteb.com 从 cookie 中检索用户名和 sessionid。然后 siteb.com 对照 centralAuthDB 检查这些凭据。
5.  与 centralAuthDB 匹配，并且 SSO 已通过身份验证。但是，论坛 (siteb.com) 也有自己的用户数据库。用户名也在这个数据库中被检查，现在用户无缝登录到论坛。

以上安全实用吗？

凭据是否应该通过 web 服务发送到 centralAuthDB？

cookie 需要一些通用名称吗？那么 username 和 sessionid 的值会放在这个 cookie 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:40:19.413

对于任何 SSO，您都需要一个服务来获取凭证并生成安全的身份验证令牌。令牌必须加密，使其无法被伪造；只有身份验证服务才能对其进行解密以检查其有效性。然后，该令牌可以传递给任何你想要的东西——很可能是在查询字符串中。Cookie 被排除在外，因为它们无法跨主机名访问。

正如对您的问题的评论中提到的，调查该问题的现有解决方案是明智的。比你或我更聪明的人已经花费了数千个工时来解决此类系统的所有问题。

我个人的选择是 OAuth，因为它是我最熟悉的实现。您可能还想查看 Facebook 如何对令牌可能包含的内容进行身份验证。

# c++ - 在 Xcode 4.5 中，“C++ 标准库”和“C++ 语言方言”的“编译器默认值”是什么？

> ID：12865226
> 
> 赞同：3
> 
> 时间：2012-10-12T18:43:22.640
> 
> 标签：c++, xcode, c++11, libstdc++, libc++

Xcode 4.5 中“C++ 标准库”和“C++ 语言方言”的“编译器默认值”是什么值？

我的猜测是 libstdc++ 和 GNU++98，但最好能澄清一下。

来自[Xcode 4.5 发行说明](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html#//apple_ref/doc/uid/TP40001051-SW174)：

> 使用此 Xcode 版本创建的项目使用标准 C++ 库的新 libc++ 实现。libc++ 库仅适用于 iOS 5.0 及更高版本以及 OS X 10.7 及更高版本。12221787
> 
> 要在项目中的早期版本的 iOS 和 OS X 上启用部署，请将 C++ 标准库构建设置设置为 libstdc++（Gnu C++ 标准库）。

我注意到创建一个新项目明确设置了 GNU++11 和 libc++，但“编译器默认值”可能是别的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:05:53.330

这是找出答案的最佳方法：

```
 #include <iostream>

int main()
{
#ifdef _LIBCPP_VERSION
    std::cout << "Using libc++\n";
#else
    std::cout << "Using libstdc++\n";
#endif
#ifdef __GXX_EXPERIMENTAL_CXX0X__
#if __cplusplus == 1
    std::cout << "Language mode = gnu++11\n";
#else
    std::cout << "Language mode = c++11\n";
#endif
#else
#if __cplusplus == 1
    std::cout << "Language mode = gnu++98\n";
#else
    std::cout << "Language mode = c++98\n";
#endif
#endif
} 
```

只需使用编译器默认值构建一个测试项目并运行它。

# xmlserializer - 递归 XmlSerializer 丢失元素

> ID：12865227
> 
> 赞同：1
> 
> 时间：2012-10-12T18:43:24.327
> 
> 标签：xmlserializer

使用 C# 和 .Net 4.0，我有一个递归 XSD 架构。基于 XSD 的 XML 可以使用 XmlSerializer 很好地序列化。它也反序列化没有错误，但没有检索所有元素。

这是来自 XSD 的片段：

```
 <xs:complexType name="SettingGroup">
    <xs:sequence>
      <xs:element name="Name" type="xs:string" />
      <xs:element name="Notes" type="xs:string" minOccurs="0" />
      <xs:element name="SettingGroup" type="SettingGroup" minOccurs="0" maxOccurs="unbounded" />
      <xs:element name="Setting" type="Setting" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType> 
```

请注意，SettingGroup 类型递归地包含 0 个或多个 SettingGroup 元素，以及 0 个或多个名为 Setting 的不同类型的元素。当 SettingGroup 仅包含 SettingGroups 或仅包含 Settings 时，它运行良好。但是，当 SettingGroup 同时具有 SettingGroups 和 Settings 时，尽管它按预期序列化，但在反序列化时，所有 Settings 元素都将丢失。

我也尝试过使用 ref，结果相似：

```
<xs:element ref="SettingGroup" minOccurs="0" maxOccurs="unbounded" /> 
```

我手动创建了 .xsd 文件，并使用 xsd.exe 创建了 C# 类。

如果它可能有用，这里是设置的定义：

```
 <xs:complexType name="Setting">
    <xs:sequence>
      <xs:element name="Name" type="xs:string" />
      <xs:element name="Notes" type="xs:string" minOccurs="0" maxOccurs="1" />
      <xs:element name="Roam" type="xs:boolean" minOccurs="0" default="true" />
      <!--<xs:element name="RoamConditions" type="RoamConditions" />-->
      <xs:element name="SettingLocation" type="SettingLocation" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType> 
```

对于反序列化为何无法检索所有元素的任何建议，我将不胜感激。

# javascript - 树形图单击功能冲突

> ID：12865231
> 
> 赞同：0
> 
> 时间：2012-10-12T18:43:36.490
> 
> 标签：javascript, click, d3.js, tree-structure

我在同一页面上有两棵树。第一个是[http://bl.ocks.org/1249394](http://bl.ocks.org/1249394)，另一个是[http://bl.ocks.org/2503502](http://bl.ocks.org/2503502)。我按照我的树的这 2 个链接上的示例进行操作，当然还有一些更改。我已将两者都包含在同一页面上。然而，点击功能似乎是冲突的。[http://bl.ocks.org/1249394](http://bl.ocks.org/1249394)上的树 效果很好，但是[http://bl.ocks.org/2503502](http://bl.ocks.org/2503502)上的树会生成具有正确数据的树，但是当我单击根节点折叠时，子节点数据更改为[http://bl.ocks.org/1249394](http://bl.ocks.org/1249394)上第一棵树的子节点数据。我该如何解决这个冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:23:01.330

您是否尝试过以不同的方式命名点击处理程序？这看起来像你有可能在同一范围内的同名函数，所以你应该要么

*   确保每个图表都在不同的范围内（例如，将每个图表的所有代码包含在不同的函数中），或者

*   确保页面上的所有功能都有唯一的名称，或者

*   两个都。

# javascript - 同一网页上的多个 IP 摄像机源

> ID：12865232
> 
> 赞同：2
> 
> 时间：2012-10-12T18:43:36.393
> 
> 标签：javascript, html, ajax, ip-camera

我有 2 个具有内部服务器页面的 IP 摄像机（即 http:\192.168.1.10\video.html）。此页面从相机接收 jpeg 图像并使用 javascript 自动刷新（加载）。

源代码来自`video.html`

```
<html>
<head>
    <title>ipCam - JPEG Video</title>
    <style type='text/css'>
        html,body
        {
            background-color:white;
            color:black;
            font-family:arial;
            font-size:12pt;
        }
        a,a:visited,a:active
        {
            color:grey;
            text-decoration:none;
        }
        a:hover
        {
            text-decoration: underline;
        }
        h1
        {
            background-color:black;
            color:white;
            padding:5px;
        }
        h2
        {
            background-color:lightgrey;
            padding:5px;
        }
    </style>
    <script type='text/javascript'>
        function loadImage()
        {
            var now=new Date();
            document.getElementById('the_img').src='image.jpg?'+now.getTime();
        }
    </script>
</head>
<body>
    <img id='the_img' src='image.jpg' onload='loadImage()' onerror='loadImage()'>
    <br><br>
    <a href='.'>Home</a>

</body> 
```

我想做的是建立一个自定义站点，其中包含两个实时提要。我宁愿不使用`<iframe>`. 我宁愿使用 Javascript 或类似的东西。

我对 HTML 有基本的了解，但很少有 Javascript 经验。显然，我可以查看代码以了解正在发生的事情，但这让我很困惑！

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:56:41.200

我猜您可以在本地网络服务器上创建一个新的 HTML 页面（只需从其中一个摄像头复制 video.html）并修改脚本以包含`img`您正在更新的元素的 ID 和您的摄像头的 IP 地址正在从...获取提要（设置为每 4 秒自动更新一次图像）--（免责声明：空气代码，未经测试）

*感谢@AMK 修复了我的代码中的一些愚蠢错误：*

```
<script type='text/javascript'>         
    function loadImage(imgID, address)         
    {             
        var now=new Date();
        document.getElementById(imgID).src='http://' + address + '/image.jpg?'+now.getTime();
    }          

    setInterval(function() {
        loadImage("the_img_1", "192.168.0.1");
        loadImage("the_img_2", "192.168.0.2");
    }, 4000); //Interval to refresh at, in milliseconds
</script> 
```

然后只需设置另一个`img`标签来接收图像：

```
<body>
    <img id='the_img_1' src='http://192.168.0.1/image.jpg'>     
    <br><br>     
    <img id='the_img_2' src='http://192.168.0.2/image.jpg'>

    <a href='.'>Home</a>    
</body> 
```

请注意，您`img`现在有两个元素，每个元素都有一个唯一的 id，该 id 与摄像机的 IP 地址一起馈送到函数中。

这可能不适用于您的情况，但这应该让您了解如何完成它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T19:01:15.823

```
 // JS 9 CAM...

    //LAN.JS add http : // if you need

    var URL11='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL12='IP:Port/cgi-bin/CGIProxy.fcgi?cmd=snapPicture2&usr=XXXXX&pwd=XXXXX';
    var URL13='IP:Port/cgi-bin/CGIProxy.fcgi?cmd=snapPicture2&usr=XXXXX&pwd=XXXXX';
    var URL14='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL15='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL16='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL17='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL18='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';
    var URL19='IP:Port/snapshot.cgi?&user=XXXXX&pwd=XXXXX';

    var L=window.location.search;
    L=L.substring(1,5);
    if(L=="")L=1;
    NewImage=new Image();
    var I=new Date().getTime();
    var imgW=320*L;

    function kamera1011(){document.getElementById("imgDisplay11").src=URL11+'&'+I++;};
    function kamera1012(){document.getElementById("imgDisplay12").src=URL12+'&'+I++;};
    function kamera1013(){document.getElementById("imgDisplay13").src=URL13+'&'+I++;};
    function kamera1014(){document.getElementById("imgDisplay14").src=URL14+'&'+I++;};
    function kamera1015(){document.getElementById("imgDisplay15").src=URL15+'&'+I++;};
    function kamera1016(){document.getElementById("imgDisplay16").src=URL16+'&'+I++;};
    function kamera1017(){document.getElementById("imgDisplay17").src=URL17+'&'+I++;};
    function kamera1018(){document.getElementById("imgDisplay18").src=URL18+'&'+I++;};
    function kamera1019(){document.getElementById("imgDisplay19").src=URL19+'&'+I++;};
    function kamera1020(){document.getElementById("imgDisplay20").src=URL20+'&'+I++;};
    function kamera1021(){document.getElementById("imgDisplay21").src=URL21+'&'+I++;};
    function kamera1022(){document.getElementById("imgDisplay22").src=URL22+'&'+I++;}

    <! HTML-index.htm >
<html>
<script language="JavaScript" src="js/lan.js"></script>
    <body onload="kamera1011(); kamera1012(); kamera1013(); kamera1014(); kamera1015(); kamera1016(); kamera1017(); kamera1018(); kamera1019();>

    <table border="1" width="100%" cellspacing="1" cellpadding="1">

    <tr>
    <td width="100%" align="center">

    </td>
    <td>
    <a href="index.htm">
    Updates Cams...
    </a>
    </td>
    </tr>

    <tr>
    <td>
    <! Cam 1 >
    <img id="imgDisplay11" border="1" width="412" height="318" onload=setTimeout("kamera1011()",10) onerror=setTimeout("kamera1011()",100)>
    </td>

    <td>
    <! Cam 2 >
    <img id="imgDisplay12" border="1" width="412" height="318" onload=setTimeout("kamera1012()",10) onerror=setTimeout("kamera1012()",100)>
    </td>

    <td>
    <img id="imgDisplay13" border="1" width="412" height="318" onload=setTimeout("kamera1013()",10) onerror=setTimeout("kamera1013()",100)>

    </td>
    </tr>

    <tr>
    <td>
    <img id="imgDisplay14" border="1" width="412" height="318" onload=setTimeout("kamera1014()",10) onerror=setTimeout("kamera1014()",100)>
    </td>

    <td>
    <! Cam 5 >
    <img id="imgDisplay15" border="1" width="412" height="318" onload=setTimeout("kamera1015()",10) onerror=setTimeout("kamera1015()",100)>
    </td>

    <td>
    <! Cam 6 >
    <img id="imgDisplay16" border="1" width="412" height="318" onload=setTimeout("kamera1016()",10) onerror=setTimeout("kamera1016()",100)>
    </td>
    </tr>

    <tr>
    <td>
    <! Cam 9 >
    <img id="imgDisplay17" border="1" width="412" height="318" onload=setTimeout("kamera1017()",10) onerror=setTimeout("kamera1017()",100)>
    </td>

    <td>
    <! Cam 8 >
    <img id="imgDisplay18" border="1" width="412" height="318" onload=setTimeout("kamera1018()",10) onerror=setTimeout("kamera1018()",100)>
    </td>

    <td>
    <! Cam 9 >
    <img id="imgDisplay19" border="1" width="412" height="318" onload=setTimeout("kamera1019()",10) onerror=setTimeout("kamera1019()",100)>
    </td>
    </tr>
    </table></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:00:01.860

只需将以下 javascript 放在您的页面中，将`interval`参数更改为您喜欢的：

```
<script type='text/javascript'>
        var interval = 5; //Interval in seconds, to retrieve images
        setInterval(function loadImage() {
            var now=new Date();
            document.getElementById('the_img').src='image.jpg?'+now.getTime();
        }, interval * 1000);
</script> 
```

并在 html 中将图像插入到您想要的任何位置，如下所示：

```
<img id='the_img' src='image.jpg'> 
```

# naudio - NAudio：所有混音器输入必须具有相同的 WaveFormat

> ID：12865234
> 
> 赞同：0
> 
> 时间：2012-10-12T18:43:46.710
> 
> 标签：naudio

我使用 Pcm16BitToSampleProvider 将 WaveProvider16 转换为 SampleProvider。然后我将它添加到 MixingSampleProvider。日志确实表明两者都是 IeeeFloat。但是程序在 AddMixerInput 行停止并且错误是所有混音器输入必须具有相同的 WaveFormat。

有没有想过我错过了什么？

```
 myWaveProvider = new MyWaveProvider16();
    mySampleProvider = new Pcm16BitToSampleProvider(myWaveProvider);
    mixerBusWaveFormat = WaveFormat.CreateIeeeFloatWaveFormat(8000, 1);
    myMixer = new MixingSampleProvider(mixerBusWaveFormat);
    myMixerSampleSource = new MixerSampleSource();

    Debug.WriteLine("mySampleProvider waveformat:  " + mySampleProvider.WaveFormat.ToString());
    Debug.WriteLine("myMixer waveformat:  " + myMixer.WaveFormat.ToString());
    myMixer.AddMixerInput(mySampleProvider); 
```

输出：

mySampleProvider 波形：IeeeFloat

myMixer 波形：IeeeFloat

NAudio.dll 中出现“System.ArgumentException”类型的第一次机会异常 NAudio.dll 中出现“System.ArgumentException”类型的未处理异常

附加信息：所有混音器输入必须具有相同的 WaveFormat

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:45:58.147

用户错误：采样率不匹配。

这一行：

```
myWaveProvider = new MyWaveProvider16(); 
```

应该：

```
myWaveProvider = new MyWaveProvider16(8000, 1); 
```

否则默认为 44100。

# tabs - Chrome 扩展历史 API

> ID：12865236
> 
> 赞同：9
> 
> 时间：2012-10-12T18:43:52.647
> 
> 标签：tabs, google-chrome-extension

我正在编写一个 chrome 扩展，它需要分析*特定选项卡的最近浏览历史记录。*[chrome.history API](http://developer.chrome.com/extensions/history.html)允许我在全局历史记录中搜索项目，但似乎无法将结果本地化到特定选项卡。我错过了什么，或者这是不可能得到的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T16:01:01.220

我认为您正在寻找的是[导航 API](http://developer.chrome.com/extensions/webNavigation.html)。Chrome 历史记录与特定标签无关。如果您想使用或从历史中删除选项卡导航的元素，您可以使用带有导航信息的历史搜索功能。

# delphi - 如何在不使用匿名方法的情况下迭代 Delphi Chromium Embedded 中的 DOM 节点？

> ID：12865242
> 
> 赞同：1
> 
> 时间：2012-10-12T18:44:34.927
> 
> 标签：delphi, delphi-7, tchromium

[德尔福嵌入式 Chrome](https://stackoverflow.com/questions/5960721/delphi-embedded-chrome)

由于我的技能有限，我无法弄清楚如何在 Delphi 7 中做同样的事情，因为它不支持匿名方法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:01:51.147

```
procedure TheProcThatHandlesItAll(const doc: ICefDomDocument)
var
  q: ICefDomNode;
begin
  // "q" is the ID of the text input element
  q := doc.GetElementById('q');
  if Assigned(q) then
    q.SetElementAttribute('value', 'Hello, world');
end

procedure TMainForm.actDomExecute(Sender: TObject);
begin
  crm.Browser.MainFrame.VisitDomProc(TheProcThatHandlesItAll);
end; 
```

# python - 使用python元素树将节点插入XML

> ID：12865244
> 
> 赞同：1
> 
> 时间：2012-10-12T18:44:40.123
> 
> 标签：python, xml, xml-parsing, python-3.x, elementtree

我有以下 XML 结构，如果特定位置不存在，我想添加一个新节点。

```
<root>
    <OuterLevel>
        <Node>
            <Name>NodeA</Name>
        </Node>
        <Node>
            <Name>NodeB</Name>
        <Node>
        <SpecialNode>
            <Name>NodeZ</Name>
        </SpecialNode>
    </OuterLevel>
 </root> 
```

我使用元素树编写了一个 python 脚本。[http://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)

```
import xml.etree.ElementTree as ET
tree = ET.parse('sampleFile.xml')
root = tree.getroot()
newNodeStr = 'NewNode'

if root[0][0].tag != newNodeStr :
    print('Now we add it')
    newNode = ET.Element(newNodeStr)
    newNodeName = ET.Element('Name')
    newNodeName.text = 'NodeC'
    newNode.append(newNodeName)
    root[0].insert(0, newNode)

tree.write('sampleFileNew.xml') 
```

我希望 XML 结构看起来像这样：

```
<root>
    <OuterLevel>
        <NewNode>
            <Name>NodeC</Name>
        </NewNode>
        <Node>
            <Name>NodeA</Name>
        </Node>
        <Node>
            <Name>NodeB</Name>
        <Node>
        <SpecialNode>
            <Name>NodeZ</Name>
        </SpecialNode>
    </OuterLevel>
 </root> 
```

但相反，它看起来像这样：

```
<root>
    <OuterLevel>
        <NewNode><Name>NodeC</Name></NewNode><Node>
            <Name>NodeA</Name>
        </Node>
        <Node>
            <Name>NodeB</Name>
        <Node>
        <SpecialNode>
            <Name>NodeZ</Name>
        </SpecialNode>
    </OuterLevel>
 </root> 
```

我使用了元素树中的 insert() 方法，因为我认为它可以满足我的需要，即在特定位置插入一个节点。但是，看起来 insert() 实际上并不关心树结构中该位置已经存在的内容。有没有一种方法可以用来修复排序？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:56:27.040

从语法上讲，这两个输出是相同的，如果您保存文件然后重新解析它，tree.write() 可能会按照您想要的方式打印输出，尽管我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T12:31:22.427

试试这个，它会根据需要打印输出。

```
 try:
        reparsed = mini.parseString(mini.parse('YOUR_FILE_NAME').toxml())
        pretty_string =  '\n'.join([line for line in reparsed.toprettyxml(indent=' '*4).split('\n') if line.strip()])

        f = open('YOUR_FILE_NAME', 'w') 
        f.write(pretty_string) 
    finally:
        f.close() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-19T17:56:54.367

将树重写到文件时，您可能需要使用 pretty_print = True 。也许您正在以之前的 pretty_print 形式对其进行解析，但 insert() 并未以 pretty_print 形式添加您的新节点。

如果您不使用 LXML，我不确定这是否可行，但请尝试将打印更改为：

tree.write('sampleFileNew.xml', pretty_print = True)

同样，您可能需要导入 lxml 才能使用此功能。希望这可以帮助。

# c# - EWL 中的 initUserDefaultOptionalParameterPackage 有什么用？

> ID：12865248
> 
> 赞同：1
> 
> 时间：2012-10-12T18:45:09.360
> 
> 标签：c#, asp.net, web-applications, enterprise-web-library

我正在使用 EWL，我有一个`EwfPage`，当我`partial`在`Info`课堂上输入时，我看到：

```
partial void initDefaultOptionalParameterPackage( OptionalParameterPackage package ) 
```

和

```
partial void initUserDefaultOptionalParameterPackage( OptionalParameterPackage package ) 
```

我真的不明白它们是用来做什么的。它们听起来也很相似，我想知道它们之间的区别是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:29:59.960

如果您希望可选参数默认为其 C# 数据类型的默认值以外的其他值，则可以使用它们。有两个显着的区别：

*   `initUserDefaultOptionalParameterPackage`*仅*在您为页面创建对象时调用`Info`；请求页面时不会调用它。如果在 URL 中没有参数值的请求，框架将回退到指定的值`initDefaultOptionalParameterPackage`或数据类型默认值。
*   如果满足 doc 注释中指定的条件`AppTools.User`，则可以访问.`initUserDefaultOptionalParameterPackage``AppTools.User`

您可能使用`initUserDefaultOptionalParameterPackage`的一个示例是默认显示当前登录用户的信息但有一个选择列表或可以让您查看其他用户信息的页面。

# mysql - 什么是 MySQL 中“显示表”的 Oracle 等价物

> ID：12865252
> 
> 赞同：2
> 
> 时间：2012-10-12T18:45:29.510
> 
> 标签：mysql, oracle11g

关于如何查看 oracle 数据库中的所有表，网上有各种各样的建议。我对 Oracle 很陌生，但是如果我创建一个在 Oracle 用语中称为“实例”的“数据库”，我将如何找到属于该实例而不是所有 Oracle 的所有表？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:48:54.317

```
select *
from dba_tables 
```

（请注意，通常只有 DBA 角色有权访问该视图）。

如果您实际上只想查看当前用户（而不是“实例）**拥有的表，请使用**

```
select *
from user_tables; 
```

要查看当前用户*可访问的表，请使用：*

```
select *
from_all_tables; 
```

更多详细信息，请参阅手册：

*   [DBA_TABLES](https://docs.oracle.com/database/121/REFRN/GUID-480A67CD-39FD-40B8-9395-164E92E439E6.htm#REFRN23286)
*   [USER_TABLES](https://docs.oracle.com/database/121/REFRN/GUID-564CEA73-E79E-4664-AC32-0CBAB817CF5A.htm#REFRN26286)
*   [ALL_TABLES](https://docs.oracle.com/database/121/REFRN/GUID-6823CD28-0681-468E-950B-966C6F71325D.htm#REFRN20286)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T03:42:11.273

我认为您正在寻找的术语是“模式”或“用户”，而不是“数据库”。表在三个[数据字典](http://docs.oracle.com/cd/E11882_01/server.112/e25513/toc.htm)视图中描述：

[USER_TABLES](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5480.htm#i1635629)：属于当前用户的所有表

[ALL_TABLES](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2117.htm#i1592091)：当前用户可见的所有表

[DBA_TABLES](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5056.htm#i1627762)：数据库中的所有表，所有用户，包括 SYS 拥有的那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-21T09:43:30.003

这就是你要找的`select table_name from tabs;`

# jquery - 使用“escape”键关闭fancybox时如何保持jQuery UI对话框打开

> ID：12865253
> 
> 赞同：-1
> 
> 时间：2012-10-12T18:45:32.103
> 
> 标签：jquery, jquery-ui, fancybox, jquery-ui-dialog, fancybox-2

[这是此处发布](https://stackoverflow.com/q/12819555/1055987)的原始问题的重新表述

我有一个带有jQ​​uery [UI Dialog](http://jqueryui.com/dialog/)的页面，我从此类 Dialog 窗口内的链接打开 Fancybox。

典型的 UI Dialog init 如下：

```
 $("#dialog-modal").dialog({
  height: 240,
  modal: true
 }); // dialog 
```

...和典型的 Fancybox（本例中为 v2.1.1）初始化，如：

```
 $(".fancybox").fancybox({
  closeClick: false,
  helpers: {  
   title : { type : 'inside' }
  }
 }); // fancybox 
```

...到目前为止一切顺利，没什么特别的。然后是 html：

```
 <div id="dialog-modal" title="jQuery UI modal dialog">
  <p>You should be able to close this UI Dialog using the "escape" key.</p><br />
  <a class="fancybox" href="images/01.jpg" title="Press the 'escape' key to close Fancybox" >Open Fancybox</a>
 </div> 
```

现在，问题是，如果我使用“ `escape`”键关闭 Fancybox，Fancybox 和 UI 对话框（从我启动 fancybox 的位置）都将关闭。

Fancybox 和 UI 对话框都可以使用`escape`键关闭，但**理想情况下**，我希望在关闭 Fancybox（使用`escape`键）后保持 UI 对话框打开......例如，如果使用`close`按钮关闭 Fancybox，则 UI 对话框保持打开状态。

为了说明这个问题，我在[这里创建了一个 DEMO](http://www.picssel.com/playground/jquery/openFancyboxFromUIdialog_11Oct12.html)。

那么如何在`escape`不关闭打开 Fancybox 的 UI 对话框的情况下使用该键关闭 Fancybox？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:45:32.103

解决方案 ：

禁用`escape`Fancybox 和 UI 对话框中的事件并捕获任何`escape`事件以手动关闭 Fancybox（如果打开）或 UI 对话框。

为了避免按下`escape`键被关闭，两个插件都提供了一个 API 选项......所以对于 UI Dialog 添加`closeOnEscape`选项设置为`false`like ：

```
$("#dialog-modal").dialog({
    height: 240,
    modal: true,
    closeOnEscape: false // disable escape event on dialog
}); // dialog 
```

... 对于 Fancybox，请使用[keys](http://fancyapps.com/fancybox/#docs) API 选项，例如：

```
$(".fancybox").fancybox({
    closeClick: false,
    helpers: {
        title: {
            type: 'inside'
        }
    },
    keys: {
        close: [null] // disable escape on fancybox
    }
}); // fancybox 
```

...然后捕获文档的`escape`事件（使用 jQuery [.keyup()](http://api.jquery.com/keyup/)）并手动关闭 Fancybox（如果打开）或 UI 对话框，否则使用此功能：

```
$(document).keyup(function (event) {
    if (event.keyCode === 27) {
        // if fancybox is opened, close it, otherwise close dialog
        if ($.fancybox.isActive) {
            $.fancybox.close();
        } else {
            $("#dialog-modal").dialog("close");
        }
    }
}); //keyup 
```

查看[工作演示](http://www.picssel.com/playground/jquery/openFancyboxFromUIdialog_fixed_12Oct12.html)并随意探索源代码。

在 Chrome v22.0.1229.94 m、Firefox v16.0.1、IE7+、Opera v11.61(1250) 和 Safari (Windows) v5.1.7(7534.57.2) 中测试

# php - AJAX/PHP：从 mysql 数据库传递/检索两个变量

> ID：12865256
> 
> 赞同：0
> 
> 时间：2012-10-12T18:45:53.633
> 
> 标签：php, mysql, ajax

这是我的第一页。我的问题是，当我选择一个选项时，页面保持空白。我知道问题出在我的 javascript 中，但不确定我哪里出错了？在此先感谢！（此页面上的数据库调用填充下拉列表）：

```
<?php 

if (isset($_GET['t'])) {
 $t=$_GET ['t'];

mysql_select_db($database_db_tutorials2, $db_tutorials2);
$query_Recordset1 = "SELECT * FROM UC GROUP BY $t";
$Recordset1 = mysql_query($query_Recordset1, $db_tutorials2) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" ></script>
<script type="text/javascript">

function showUser() {
  var Tsearch = document.getElementById("Tsearch"),
  Stype = document.getElementById("Stype");
  var str = "";
if (Tsearch.value != "") {
str += "Tsearch=" + encodeURIComponent(Tsearch.value);
}
if (Stype.value != "") {
str += (str.length == 0? "" : "&") + "Stype=" + encodeURIComponent(Stype.value);
}

if (str=="")
{
document.getElementById("txtHint").innerHTML="";
return;
}
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
}
}

xmlhttp.open("GET","process_as.php?" + string, true);
xmlhttp.send();
alert(xmlhttp.responseText);
} 
</script>
</head>
<body>

<form>
<select name="Tsearch" onchange="showUser(this.value,'Tsearch');">
<option selected="selected" value="">Choose</option>
<?php
          do {  
             ?>
<option value="<?php echo $row_Recordset1 [$t] ?>"> <?php echo $row_Recordset1 [$t];?></option>
<?php
    } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1));
      $rows = mysql_num_rows($Recordset1);
      if($rows > 0) {
          mysql_data_seek($Recordset1, 0);
          $row_Recordset1 = mysql_fetch_assoc($Recordset1);
      }
    }
 ?>
</select>
<input name="Stype" type="hidden" value="<?php echo $t ?> "/>
</form>
<br />
<div id="txtHint"><b>Info will be listed here:</b></div>
<hr />
</body>
</html> 
```

这是 process_as.php 页面：

```
<?php $path = $_SERVER['DOCUMENT_ROOT'];
 include($path . '/connections/db_tutorials2.php'); 

 $con = mysql_connect($hostname_db_tutorials2, $username_db_tutorials2,         $password_db_tutorials2);
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

mysql_select_db($database_db_tutorials2, $con);
$Tsearch=$_GET ["Tsearch"];
$stype=$_GET ["stype"];

echo "this is search:".$Tsearch.'</br>';
echo "this is stype:".$stype.'</br>';

$sql= sprintf("SELECT * FROM UC WHERE UC.%s = '%s'", mysql_real_escape_string($Tsearch),mysql_real_escape_string($stype)); 

$result = mysql_query($sql) or die($sql."<br/>oopsa<br/>".mysql_error());
echo "<table border='1'>
<tr>
<th>Category</th>
<th>Tutorial name</th>
<th>Fmt</th>
<th>Website</th>
</tr>";

while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['Category'] . "</td>";
echo "<td>" . $row['Tutorial_Name'] . "</td>";
echo "<td>" . $row['Fmat'] . "</td>";
echo "<td>" . $row['Website'] . "</td>";
echo "</tr>";
}
echo "</table>";
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:00:09.960

我可以看到您已链接到 JQuery 框架。看看jquery如何处理 [ajax](http://api.jquery.com/jQuery.ajax/)

**尝试这个**

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" ></script>
<script type="text/javascript">
    $(document).ready(function () {  
      $(document).on('change', '#tsearch', function() {
              $.get("process_as.php", { 'Tsearch':$('#tsearch').val(),'Stype':$('#Stype').val()},
          function(data){
             $('#txtHint').html(data);
          }).error(function() { alert('error'); });;
      });
    });
    </script> 
```

# c - 代码的系统相关限制

> ID：12865258
> 
> 赞同：0
> 
> 时间：2012-10-12T18:45:59.077
> 
> 标签：c, system-dependent

具有以下功能：

```
int five(int n)
{
    if ((n%5)==0)
        return 1;
    else
        return 0;
} 
```

为什么即使没有余数也只有这个正数的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:49:25.283

对于 n == -2，某些硬件将计算`n%5`为 3，而其他硬件将其评估为 2。为了适应这种情况，标准`%`对负值留下了模棱两可的含义。

# oracle - oracle断开连接行为

> ID：12865262
> 
> 赞同：4
> 
> 时间：2012-10-12T18:46:14.707
> 
> 标签：oracle, oracle11g

如果长时间运行时连接丢失会怎样？

例如，有一个 select 语句需要几分钟才能完成，并且在执行过程中连接丢失。它会继续执行还是停止？

对于删除语句：当客户端断开连接时，它会执行完成还是中断？数据会发生什么：它会被提交还是回滚，多快？

对于 ddl 操作：我有一个长时间运行的`alter table tbl_name move`操作，当客户端失去连接时会发生什么？会继续执行还是会被中断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T20:29:51.633

我假设我们正在谈论类似于客户端应用程序崩溃或网络连接断开的情况，而不是应用程序进行完全断开连接的情况，因为您无法在事务打开时进行完全断开连接，更不用说在一条语句正在运行。

通常，该语句将在服务器上运行完成（其中 a 的“完成”`SELECT`是它可以返回客户端请求的第一组行的点，这可能需要也可能不需要完整地执行该语句）。然后，服务器将尝试将结果准备就绪的事实传达回客户端。当它没有得到响应时（可能需要几分钟才能等待`ACK`数据包），它知道客户端进程已死并开始回滚未提交事务的过程（这会释放事务持有的所有锁）。如果您在事务中对数据库进行了更改（即您已经完成了插入、更新和/或删除），那么回滚更改所需的时间可能与最初生成更改所需的时间一样长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:27:47.243

`select`对于像and这样的简单 DML 语句`delete`，事务将被回滚或提交。

**“什么时候”会出现这种情况？** 其实没关系。其他客户端只看到已提交事务的结果，因此时间无关紧要。

对于 DDL 语句，根据[官方文档](http://docs.oracle.com/cd/E11882_01/server.112/e25789/sqllangu.htm)，“在数据库执行 DDL 语句之前立即发生隐式 COMMIT，之后立即发生 COMMIT 或 ROLLBACK”。

在事务中，如果您要执行一些 DML 语句，然后执行 DDL 语句，则 DML 语句可能会被提交，但 DDL 语句会回滚——即使它们都在同一个事务中。

但是，对于您提供的简单示例，全有或全无。...而且一般来说，如果您在收到已提交交易的确认之前失去了连接 - 无论它是否有效，您都不会知道。你必须验证。

[**编辑**：只是稍微详细说明*“你必须验证”* ......你必须验证你是否已经向数据库发送了一个“提交”（显式或隐式），并且在你知道数据库是否执行之前你失去了连接提交。
如果您在发出提交之前断开连接，则可以保证它将被回滚（上面的 DDL 警告）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:51:34.193

所有数据库操作都是根据`ACID`属性进行的。

```
Atomicity 
```

对数据的所有更改都像单个操作一样执行。也就是说，所有更改都已执行，或者没有一个。
这意味着根据原子性，更改会被回滚。

# android - java.io.FileNotFoundException：即使我在 AndroidManifest 中设置了权限，访问也被拒绝

> ID：12865267
> 
> 赞同：0
> 
> 时间：2012-10-12T18:46:34.050
> 
> 标签：android, manifest, access-denied, external-sorting

我再次需要你的帮助！！

我有一个 android 应用程序，可以向外部存储器写入/读取文件。我已经在 AndroidManifest 中编写了所有必需的权限，但我仍然收到拒绝访问的错误。

继承我的代码：

```
private static File convertStreamToFile(InputStream is) throws IOException {

    String dir = Environment.getExternalStorageDirectory().getAbsolutePath();

// I have tried this one too but it didn't work!!
//   File root = new File (Environment.getExternalStorageDirectory(),"ekg_daten.zip");
    File root = new File(dir+ "/ekg_daten.zip");

    if (!root.exists()) 
    {
        root.mkdirs();
    }

//    File zippedDaten = new File(root, "outPut.zip");

    ZipInputStream zin = new ZipInputStream(is);
    ZipEntry ze = null;

    while ((ze = zin.getNextEntry()) != null) {                                           

        FileOutputStream fout = new FileOutputStream(root);

        for (int c = zin.read(); c != -1; c = zin.read()) {
            fout.write(c);
        }

        zin.closeEntry();

        fout.close();
    } 
```

我的 AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.praktikum.androidcrestclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" > 
    </uses-permission>
   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >  
    </uses-permission>
    <uses-permission android:name="android.permission.READ_CONTACTS" >  
    </uses-permission>

and my logcat

10-12 18:33:24.297: I/ActivityManager(79): Force stopping package com.praktikum.androidcrestclient uid=10034
10-12 18:33:24.537: I/installd(34): move /data/dalvik-cache/data@app@com.praktikum.androidcrestclient-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.praktikum.androidcrestclient-1.apk@classes.dex
10-12 18:33:24.537: D/PackageManager(79): New package installed in /data/app/com.praktikum.androidcrestclient-1.apk
10-12 18:33:24.537: W/PackageManager(79): Unknown permission android.permission.WRITE_INTERNAL_STORAGE in package com.praktikum.androidcrestclient
10-12 18:33:24.790: I/ActivityManager(79): Force stopping package com.praktikum.androidcrestclient uid=10034
10-12 18:33:24.887: D/dalvikvm(79): GC_EXPLICIT freed 662K, 59% free 4335K/10375K, external 3511K/3903K, paused 67ms
10-12 18:33:24.947: D/dalvikvm(228): GC_EXPLICIT freed 4K, 51% free 2885K/5831K, external 5876K/7285K, paused 79ms
10-12 18:33:25.077: W/RecognitionManagerService(79): no available voice recognition services found
10-12 18:33:25.187: D/dalvikvm(235): GC_EXPLICIT freed 85K, 53% free 2755K/5767K, external 1625K/2137K, paused 228ms
10-12 18:33:25.277: D/dalvikvm(79): GC_EXPLICIT freed 216K, 59% free 4288K/10375K, external 3511K/3903K, paused 87ms
10-12 18:33:25.297: I/installd(34): unlink /data/dalvik-cache/data@app@com.praktikum.androidcrestclient-2.apk@classes.dex
10-12 18:33:25.307: D/AndroidRuntime(1938): Shutting down VM
10-12 18:33:25.317: D/dalvikvm(1938): GC_CONCURRENT freed 101K, 72% free 295K/1024K, external 0K/0K, paused 1ms+1ms
10-12 18:33:25.328: D/jdwp(1938): Got wake-up signal, bailing out of select
10-12 18:33:25.328: D/dalvikvm(1938): Debugger has detached; object registry had 1 entries
10-12 18:33:25.858: D/AndroidRuntime(1952): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
10-12 18:33:25.858: D/AndroidRuntime(1952): CheckJNI is ON
10-12 18:33:26.487: D/AndroidRuntime(1952): Calling main entry com.android.commands.am.Am
10-12 18:33:26.517: I/ActivityManager(79): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.praktikum.androidcrestclient/.MainActivity } from pid 1952
10-12 18:33:26.547: I/ActivityManager(79): Start proc com.praktikum.androidcrestclient for activity com.praktikum.androidcrestclient/.MainActivity: pid=1960 uid=10034 gids={3003, 1015}
10-12 18:33:26.587: D/AndroidRuntime(1952): Shutting down VM
10-12 18:33:26.607: D/dalvikvm(1952): GC_CONCURRENT freed 103K, 69% free 319K/1024K, external 0K/0K, paused 7ms+2ms
10-12 18:33:26.648: I/AndroidRuntime(1952): NOTE: attach of thread 'Binder Thread #3' failed
10-12 18:33:26.670: D/dalvikvm(1952): Debugger has detached; object registry had 1 entries
10-12 18:33:27.637: I/ActivityManager(79): Displayed com.praktikum.androidcrestclient/.MainActivity: +1s98ms
10-12 18:33:28.857: D/dalvikvm(157): GC_EXTERNAL_ALLOC freed 40K, 44% free 3469K/6151K, external 6952K/7268K, paused 44ms
10-12 18:33:32.627: W/KeyCharacterMap(157): No keyboard for id 0
10-12 18:33:32.627: W/KeyCharacterMap(157): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
10-12 18:33:33.006: D/dalvikvm(389): GC_EXPLICIT freed 7K, 54% free 2537K/5511K, external 1625K/2137K, paused 311ms
10-12 18:33:34.257: D/getrespond()(1960): service calling
10-12 18:33:34.726: W/System.err(1960): java.io.FileNotFoundException: /mnt/sdcard/ekg_daten.zip (Permission denied)
10-12 18:33:34.736: W/System.err(1960):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
10-12 18:33:34.736: W/System.err(1960):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
10-12 18:33:34.736: W/System.err(1960):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
10-12 18:33:34.736: W/System.err(1960):     at java.io.FileOutputStream.<init>(FileOutputStream.java:66)
10-12 18:33:34.736: W/System.err(1960):     at com.praktikum.androidcrestclient.RestClient.convertStreamToFile(RestClient.java:181)
10-12 18:33:34.736: W/System.err(1960):     at com.praktikum.androidcrestclient.RestClient.executeRequest(RestClient.java:152)
10-12 18:33:34.736: W/System.err(1960):     at com.praktikum.androidcrestclient.RestClient.Execute(RestClient.java:112)
10-12 18:33:34.736: W/System.err(1960):     at com.praktikum.androidcrestclient.MainActivity.retrieveSampleData(MainActivity.java:37)
10-12 18:33:34.736: W/System.err(1960):     at java.lang.reflect.Method.invokeNative(Native Method)
10-12 18:33:34.736: W/System.err(1960):     at java.lang.reflect.Method.invoke(Method.java:507)
10-12 18:33:34.736: W/System.err(1960):     at android.view.View$1.onClick(View.java:2139)
10-12 18:33:34.736: W/System.err(1960):     at android.view.View.performClick(View.java:2485)
10-12 18:33:34.746: W/System.err(1960):     at android.view.View$PerformClick.run(View.java:9080)
10-12 18:33:34.746: W/System.err(1960):     at android.os.Handler.handleCallback(Handler.java:587)
10-12 18:33:34.746: W/System.err(1960):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-12 18:33:34.746: W/System.err(1960):     at android.os.Looper.loop(Looper.java:123)
10-12 18:33:34.746: W/System.err(1960):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-12 18:33:34.746: W/System.err(1960):     at java.lang.reflect.Method.invokeNative(Native Method)
10-12 18:33:34.756: W/System.err(1960):     at java.lang.reflect.Method.invoke(Method.java:507)
10-12 18:33:34.756: W/System.err(1960):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-12 18:33:34.756: W/System.err(1960):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-12 18:33:34.756: W/System.err(1960):     at dalvik.system.NativeStart.main(Native Method)
10-12 18:33:34.766: W/System.err(1960): java.lang.NullPointerException 
```

拜托，谁能帮忙！！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:51:18.523

先打开路径，然后添加文件：

**更新**

```
String dir = Environment.getExternalStorageDirectory(); // getAbsolutePath is not requried
File path = new File(dir);
File root = new File(path,  "ekg_daten.zip"); 
```

# wcf - 实体框架消耗大量内存（可能内存泄漏？）

> ID：12865268
> 
> 赞同：3
> 
> 时间：2012-10-12T18:46:40.783
> 
> 标签：wcf, entity-framework, iis, entity-framework-4, autofac

我们在 WCF 服务（我们的业务\应用层）中使用 EF4.3.1。我们将 EF Code First 与现有数据库和 Fluent 映射 (EntityTypeConfiguraiton) 一起使用。为每个请求创建一个 DbContext 实例，然后将其丢弃。

我们有一个使用 DbContext 的通用存储库。

在测试服务器上运行时，我们发现业务层应用程序池在 30 分钟左右内存不足，同时有 10 个并发用户。我们对 IIS 工作进程进行了转储，发现 EF 正在消耗大量内存，EF 创建的大型对象堆中有很多对象。我们可以看到从堆上的数据库检索到的数据对象。不确定 DbContext 处置是否正在处理这个问题。GC 中的时间百分比非常高（> 16%）。我们在转储文件中注意到的一件奇怪的事情是，有一个巨大的字符串对象（大约 87MB）存储我所有映射文件的字符串表示形式。我发现这很奇怪，

有没有人遇到过 EF 的任何此类内存泄漏问题？如果我们在使用 EF 时出现问题，也请告诉我们。如果需要更多详细信息，请告诉我。

谢谢普拉萨德

**编辑** 我们使用 AutiFac DI（WCF 集成）注入 DbContext 实例。Dbcontext 的生命周期是 InstancePerLifeTime（每个 http 请求一个请求）。我们已经实现了这种方式来在一个 HTTP 请求中共享所有存储库实例中的 DbContext 实例。

我们访问数据库的方式是 // 声明 IGenericRepository UserRepository {get;set;} // 使用 AutoFac 进行属性注入

// 用法 var user = UserRepository.FindBy(u => u.userid == "test@test.com");

我们没有在存储库中使用显式事务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:46:24.863

We had a similar issue when recursively querying a lot of records (millions) without disposing the `DbContext`. With the state-less nature of WCF services, and because you are disposing of the 'DbContext', this likely is not your problem (unless each user is simultaneously pulling a lot of data into context in one method call).

Ensure that you have each block of database logic wrapped in a using statement. This should allow the garbage collector to remove everything in context from memory.

For example:

```
public void MyWcfMethod()
{
    using(MyDbContext db = new MyDbContext ())
    {
        // All calls to database go here.
    }
} 
```

My only other thought would be that some other library in your service (automapper, etc.) still has a reference to the `DbContext` thereby preventing from going out of scope.

# windows - 关于 WCF 服务总线

> ID：12865272
> 
> 赞同：1
> 
> 时间：2012-10-12T18:46:47.567
> 
> 标签：windows, wcf, service, azure, bus

在我即将毕业的项目提案中，我需要从另一个 Intranet 外部访问 Intranet，他让我使用 WCF 服务总线（Windows Azure），事实上我对 WCF 一无所知，我的全部经验是在 WPF 和C#，所以我想知道

1.  什么是服务总线以及何时使用？
2.  我可以建立一个普通的连接来访问公司另一部分的资源吗？
3.  是否有任何底层所需的网络知识来理解服务总线？
4.  服务总线有什么好处和优势？为什么人们在使用它？
5.  我应该在使用 WCF 之前完全了解它吗？还是我可以直接跳起来学习？

拜托，任何关于这些东西的额外信息对我来说都非常有用，非常感谢:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T00:48:41.450

Azure 服务总线提供了许多不同的功能，但您似乎最感兴趣的是中继。

请考虑以下[摘录](https://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/)：

> 服务总线中继服务使您能够构建在 Windows Azure 数据中心和您自己的本地企业环境中运行的混合应用程序。服务总线中继通过使您能够将驻留在公司企业网络中的 Windows Communication Foundation (WCF) 服务安全地公开给公共云来促进这一点，而无需打开防火墙连接或需要对公司网络基础结构进行侵入性更改。
> 
> 服务总线中继允许您在现有企业环境中托管 WCF 服务。然后，您可以将对这些 WCF 服务的传入会话和请求的侦听委托给在 Windows Azure 中运行的服务总线。这使您能够将这些服务公开给在 Windows Azure 中运行的应用程序代码，或者向移动工作人员或外联网合作伙伴环境公开。服务总线允许您安全地控制谁可以在细粒度级别访问这些服务。它提供了一种强大且安全的方式来从您现有的企业解决方案中公开应用程序功能和数据，并从云中利用它。

我认为这段摘录回答了你的第一个和第四个问题。

要回答您的第二个问题，如果“普通连接”是指使用 HTTP 或 TCP 协议的连接，[那么 yes](http://msdn.microsoft.com/en-us/library/windowsazure/hh528527.aspx)。

要回答您的其他问题，是的，至少在一定程度上了解您正在使用的技术总是有帮助的，特别是如果您想避免常见错误并保持良好的性能。虽然您不需要使用 WCF 连接到 Azure 服务总线，但如果您计划在项目中将 WCF 与 Azure 服务总线中继结合使用，那么了解该技术自然会对您大有裨益。我建议您遵循 MSDN“入门”教程。

# codeigniter - CodeIgniter 传递数组而不是对象

> ID：12865274
> 
> 赞同：0
> 
> 时间：2012-10-12T18:47:00.357
> 
> 标签：codeigniter, object

**框架**：CI

**情况：**

我在codeigniter中有这个非常令人沮丧的问题。

这是代码：（控制器）

```
class sampleController extends CI_Controller {

function index() {
    data['message'] = 'something';

    data['js'] = array('script1.js', 'script2.js');
    data['css'] = array('style1.css', 'style2.css', 'style3.css');

    $this->load->model('user_model');
    $user = $this->input->post('username');

    data['user_id'] = $this->user_model->getUserIdByUsername($user);
    data['user_info'] = $this->user_model->getAllUserInfo($user);

    $this->load->view('someview', $data);

}

} 
```

好的，我的控制器去了，我传递了几个数据，比如`js`，，和`css``user_id``user_info`

这是我的模型中的方法：

```
getUserIdByUsername($user) {
$this->db->select("id");
$this->db->where("username", $user);
$result = $this->get("users");
return $result->row();

}

getAllUserInfo($user) {
$this->db->select("first_name, last_name, age");
$this->db->where("username", $user);
$result = $this->get("users");
return $result->row();
} 
```

问题出现在视图中，当我尝试访问控制器传递的所有变量时

1.  如果我尝试回显`$message`，它将像这样正确渲染=`something`
2.  如果我尝试循环使用 foreach`$js`并`$css`像这样

    `foreach($js as $key){//echo script here}`

    `foreach($css as $key){// echo link rel stylesheet here}`

`<script src='script1.js'></script><script ...></script>`它会像迭代`$js`一样正确渲染`css`

但如果我尝试回显 $user_id 。. 它不会，因为。它是一个对象。

所以为了解决这个问题我所做的是。. `<?php foreach($user_id as $id){} ?>`在这种情况下，我可以回显 $id 无论如何，这样我就可以简单地回显它，而不会出现混乱的 foreach。

我明白，当我谈到时`$user_info`，这样做很好，`foreach($user_info as $key => $value){$info[$key]=$value}` 但是在视图中是否有更好的方法呢？

也许在视图可以使用之前发送数组而不是对象？

非常感谢

编辑：固定相同的方法名称；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:25:45.417

`$result->row();`返回一个包含所有选定字段的对象。仅仅因为您只`SELECT`编辑了该`id`字段并不会更改返回值。试试这个：

```
$data['user_id'] = $this->user_model->getUserIdByUsername($user)->id; 
```

或者：

```
getUserIdByUsername($user) {
    $this->db->select("id");
    $this->db->where("username", $user);
    $result = $this->get("users");
    return $result->row()->id;
} 
```

如果您想要数组而不是对象，请查看 CI 文档以[获取有关生成查询结果的更多信息：](http://codeigniter.com/user_guide/database/results.html)

> `result_array()`
> 
> 该函数将查询结果作为纯数组返回，或者在没有结果时返回空数组。
> 
> `row_array()`
> 
> 与上面的 row() 函数相同，除了它返回一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T18:54:41.647

使用`{$user_id[0]['id']}`时，它应该在视图中回显用户 ID。顺便说一句，在您的问题中，两种方法名称都相同，我认为第二个应该是`getAllUserInfo($user)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:26:08.010

就像你说的，它是一个对象。因此，您可以像访问字段一样访问字段。

```
echo $user_id->id; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T19:54:07.133

如果您对此感兴趣，则在模型中使用 row_array 函数会将其作为数组而不是对象返回。您可以在此处阅读生成查询结果：http: [//ellislab.com/codeigniter/user_guide/database/结果.html](http://ellislab.com/codeigniter/user_guide/database/results.html)

# ios - iExplorer 如何获取 iPhone 的电话号码？

> ID：12865278
> 
> 赞同：0
> 
> 时间：2012-10-12T18:47:21.970
> 
> 标签：ios

iOS 应用程序不可能以编程方式获取电话号码。

但如果你将 iPhone 插入 iExplorer 应用程序，它会显示数字。它是如何获得的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:02:10.460

从技术上讲，iOS 应用程序和桌面（Windows 和 OS X）应用程序都可以通过与特定设备通信来检索电话号码（以及其他设备特定信息，例如 IMEI、序列号等）。 iOS 中的锁定守护进程。锁定守护进程 ( `lockdownd`) 是在设备上运行的守护进程，并通过 Apple 的专有 API 和协议提供对这些信息的访问。

这一切如何运作？对于桌面应用程序，开发人员必须链接到 MobileDevice 库（据我所知，它默认存在于 OS X 上并与 Windows 上的 iTunes 一起安装）并使用反向工程头文件（[此处](http://theiphonewiki.com/wiki/index.php?title=MobileDevice_Library)）中的函数来获取这样的数据。供您参考，在 Linux 上，同样可以使用[libimobiledevice](http://www.libimobiledevice.org/)来实现。

对于 iOS 应用程序，应用程序的开发人员必须链接`/usr/lib/liblockdownd.dylib`并导入相应的（逆向工程）头文件[`liblockdown.dylib`](https://github.com/kennytm/iphone-private-frameworks/blob/master/liblockdown.h)，才能使用其功能。

# php - 如何通过ajax更改元素中的文本？

> ID：12865283
> 
> 赞同：1
> 
> 时间：2012-10-12T18:48:12.973
> 
> 标签：php, jquery, html, ajax

我有一个下载按钮，单击它应该更改元素跨度的文本，但我在 ajax 部分有问题

点击后会显示一个小按钮，文本不会改变

这是我的html

```
//somecode
    <span class="num">Downloaded:<?php echo $downloadcount;?></span>
     </td></tr>
     </table>
     </div>
<button type = "button" class="button" id="<?php echo $id; ?>" name="dl">
    <a href='./mp3/<?php echo basename($filename);?>'>Download</a>
</button>
         </td>
     </tr>
    </table> 
```

这是我的ajax：

```
 $(function() {
        $(".button").click(function() 
        {
        var id = $(this).attr("id");
        var name = $(this).attr("name");
        var dataString = 'id='+ id ;
        var parent = $(this);
        if(name=='dl')
        {
        $(this).fadeIn(200).html('<img src="dot.gif" align="absmiddle">');
        $.ajax({
           type: "POST",
           url: "download_number.php",
           data: dataString,
           cache: false,

           success: function(html)
           {
//THE PROBLEM IS HERE
            $(".num").text(html);

          }  });

        }
        });
        }); 
```

我也试过`$(".num").html(html);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T18:53:25.283

你不应该在`<a>`里面放一个`<button>`- 链接将战胜按钮动作[[见小提琴](http://jsfiddle.net/5T5ZE/1/)]。

除此之外，您的代码似乎是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T18:52:11.467

将数据字符串更改为此

```
var dataString = "{'id'="+ id+"}" ; 
```

并添加datatpe json ...这样做可能会起作用....只是猜测

```
datatype:'json', 
  success: function(html)
               {
               alert(html);
               // First see...what u r getting in response and then move forward

              } 
```

# regex - 带有可选组的正则表达式

> ID：12865284
> 
> 赞同：4
> 
> 时间：2012-10-12T18:48:15.057
> 
> 标签：regex

我正在寻找一个匹配以下 4 种情况的正则表达式（获取 id 以便我可以重写 url）

```
http://localhost/gallery/test-name/123456
http://localhost/gallery/test-name/123456/
http://localhost/gallery/test-name/123456/video-name/159
http://localhost/gallery/test-name/123456/video-name/159/ 
```

当前的正则表达式如下，但在所有情况下它都不能正确获取 id。那里的任何专家都知道我做错了什么？

```
^(.*)/gallery/(.*)/([0-9]{1,15})(/)?((.*)/([0-9]{1,15})(/)?)? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:54:16.537

`.*`（你第二次使用它）是贪婪的。因此，它会消耗所有内容，直到您的最后一个 ID。这就是为什么如果您有两个 ID，第一个 ID 会丢失。让它变得不贪婪：

```
^(.*)/gallery/(.*?)/([0-9]{1,15})(/)?((.*?)/([0-9]{1,15})(/)?)? 
```

如果您想为此添加更多参数，我还在`?`最后添加了一个。`.*`但是，无论如何，简单地拆分字符串`/`可能要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:43:00.940

I know it's not exactly what you were wanting, but have you considered something along the lines of:

```
string l_url = "http://localhost/gallery/test-name/123456/video-name/159";
string l_id = l_url.Split( '/' )[5]; 
```

As you did not specify a language, the above is in C#, but could be easily converted to any other language.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T18:54:56.023

`.*`通过将正则表达式中的第二个更改为`.*?`，您应该获得您期望的示例字符串的捕获组：

```
^(.*)/gallery/(.*?)/([0-9]{1,15})(/)?((.*)/([0-9]{1,15})(/)?)? 
```

示例：[http ://www.rubular.com/r/CdBgdA1PlY](http://www.rubular.com/r/CdBgdA1PlY)

# mobile - 在 Flash Builder 中测试移动设备时禁用旋转

> ID：12865305
> 
> 赞同：1
> 
> 时间：2012-10-12T18:50:14.880
> 
> 标签：mobile, flash-builder, screen-rotation

由于某种未知原因，当我在 Flash Builder 的模拟器（AIR SDK 为 3.5）中测试移动应用程序时，菜单中的两个旋转选项被禁用。AutoOrients 设置为 true，当在设备上编译和测试时，它会按预期工作。更奇怪的是，这种轮换曾经有过几次完美的工作（但一开始它也没有工作），但我认为我没有改变任何可能改变这种行为的东西。

你有没有遇到过这样的情况，如果有，你是如何让轮换再次工作的？

# java - 从android中的应用程序外部调用活动

> ID：12865312
> 
> 赞同：1
> 
> 时间：2012-10-12T18:50:35.347
> 
> 标签：java, android, testing, android-activity, adb

我想通过从应用程序外部调用来测试我的应用程序的所有活动。

是否可以？目前我只能从 adb 调用主要活动。是否可以启动其他活动？

一种解决方案可能是在我将所有活动声明为主要活动的 android 清单中。可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:25:47.127

您可以从 adb shell 启动任何活动

```
adb shell am start -n package-name/activity-1-name 
```

# javascript - 需要 JavaScript OOP 和 setInterval 帮助

> ID：12865313
> 
> 赞同：0
> 
> 时间：2012-10-12T18:50:43.070
> 
> 标签：javascript, oop, timer

我正在编写一个网页，它每 4 秒会发出一条不同的消息。我已经构建了一个自定义对象，我打算从中提取信息以创建要显示的字符串。我正在使用一个类似于 Math.random 的函数，称为“rand”，它可以让我随机访问对象。我已将间隔设置为 4 秒。我可以显示要显示的字符串，但之后网页继续加载和加载并开始严重滞后，以至于我不得不退出。我正在使用的代码如下所示。请帮忙！

```
 var name = "Barack Obama";

  var Actions = {

    "ActionList" : [

        { "action" : "watches a 30 minute TV show",
          "time"   : 30,
          "time_measure" : "minute",
          "assuming" : "assuming he sat through the commercials too"
         },

        {
          "action" : "makes some pizza rolls",
          "time" : 9,
          "time_measure" : "minute",
          "assuming" : "he only made one plateful"
         },

        {
          "action" : "takes a 2 hour nap",
          "time" : 2,
          "time_measure" : "hour",
          "assuming" : "assuming he's a heavy sleeper"
         },

        {
          "action" : "1000 jumping jacks",
          "time" : 1,
          "time_measure" : "hour",
          "assuming" : "he doesn't take a break, or slow down"
         }
    ]

  };

  function rand(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  function run() {

    /**
     * RANDOMLY SELECT OBJECTS
    ***/
    var r = rand(0, 3);

    var x = Actions.ActionList[r]["action"];

    document.write( x );

  }

  setInterval(run, 4000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:52:26.440

页面加载后不能使用 document.write。它破坏了当前页面。

您应该使用 DOM 方法，例如 appendChild() 或 innerHTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:10:32.857

[http://jsfiddle.net/aHrpC/2/](http://jsfiddle.net/aHrpC/2/)

这个 JSFiddle 有一个工作示例。它与 document.write 有关。代码中的其他所有内容都正常工作。

# cordova - Phonegap - 更新 JavaScript 和 CSS 而不将应用程序提交到 appStore

> ID：12865316
> 
> 赞同：14
> 
> 时间：2012-10-12T18:50:50.957
> 
> 标签：cordova, app-store

每次对appStore进行更改时，是否可以在不提交应用程序的情况下更新phonegap中WWW文件夹的内容？它有任何法律问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T18:24:05.253

简短的回答 - 是的，你可以 - 但你需要重新定位 www 才能写信。

长答案 - 收紧你的短裤朝圣者，这可能会变得颠簸......

因此，当您打包您的应用程序时，应用程序包包含您的 www 目录以及您的 PG 自包含 Web 应用程序的所有各种和杂项部分。应用程序包中的所有内容都是静态的 - 因此无法写入。但是，您可以为您的应用程序写入 NSDocumentDirectory - 它是私有的沙盒存储区域。

第一步是（在启动时）将您的 www 文件夹复制到 NSDocumentDirectory 中。

其次，您需要覆盖 CDVCommandDelegateImpl pathForResource 方法，以便将 PG 指向新的 www 位置。

此时，您的应用程序应该像包含在应用程序包中时那样运行。一个值得注意的例外是现在可以修改每个文件。

我的应用程序是可以具有附加内容的基础产品。如果我包含所有附加内容，则应用程序的大小将达到数百 MB。因此，我将基本应用程序包含在单个（示例）数据包中，并且当用户需要扩展产品时，他们会选择额外的数据包，这些数据包会被下载、提取并复制到 www 文件夹的相应子目录中，因为它存在于NS 文档目录。

作为奖励，如果我发现 HTML 中的错误 - 或想要添加功能，我可以这样做而无需重新提交应用程序。我需要重新提交应用程序的唯一原因是是否存在 Objective-C 错误修复。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-18T22:00:04.937

这只是添加到迈克尔的答案中。

**1）**将您的 www 文件夹复制到 NSDocumentDirectory： - 对于 phonegap ios，将其添加到 /ProjectName/Classes/AppDelegate.m

```
- (BOOL)应用程序:(UIApplication*)应用程序didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];

    self.window = [[[UIWindow alloc] initWithFrame:screenBounds] autorelease];
    self.window.autoresizesSubviews = YES；

    self.viewController = [[[MainViewController alloc] init] autorelease];
    //self.viewController.useSplashScreen = YES;

    // 通过在 config.xml 中设置标签来设置应用的起始页。
    // 如有必要，取消注释下面的行以覆盖它。
    // self.viewController.startPage = @"index.html";

    // 注意：要自定义视图的帧大小（默认为全屏），覆盖
    // [self.viewController viewWillAppear:] 在你的视图控制器中。

    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"AppFirstLaunch"])
        {
            NSLog(@"应用已经启动！");
        }
        别的
        {
            [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"AppFirstLaunch"];
            [[NSUserDefaults standardUserDefaults] 同步];

            NSLog(@"App首次上线！");

            布尔成功1；
            NSError *error1;

            NSFileManager *fileManager1 = [NSFileManager defaultManager];

            fileManager1.delegate = 自我；

            NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

            NSString *documentsDirectory1 = [paths1 objectAtIndex:0];

            NSString *writableDBPath1 = [documentsDirectory1 stringByAppendingPathComponent:@"/www"];

            成功1 = [fileManager1 fileExistsAtPath:writableDBPath1];

            如果（成功1）
            {
                NSString *defaultDBPath1 = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"www"];
                NSLog(@"默认成功/AppDelegate路径%@",defaultDBPath1);
                success1 = [fileManager1 copyItemAtPath:defaultDBPath1 toPath:writableDBPath1 error:&error1];
            }
            别的
            {
                if (![[NSFileManager defaultManager] fileExistsAtPath:writableDBPath1])
                    [[NSFileManager defaultManager] createDirectoryAtPath:writableDBPath1 withIntermediateDirectories:NO attributes:nil error:&error1];
            }
        }

    返回是；
}

```

**2 )**要覆盖默认路径（原设置为 www 文件夹），在 CordovaLib/Classes/CDVCommandDelegateImpl.m 中，替换函数的主体：

-(NSString*) pathForResource:(NSString*)resourcepath

和：

```
- (NSString*)wwwFolderName
{
    NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [NSString stringWithFormat:@"%@/www",[searchPaths objectAtIndex:0]];
}

- (NSString*) pathForResource:(NSString*)resourcepath
{
    NSBundle* mainBundle = [NSBundle mainBundle];
    NSMutableArray* directoryParts = [NSMutableArray arrayWithArray:[resourcepath componentsSeparatedByString:@"/"]];
    NSString* 文件名 = [directoryParts lastObject];

    [directoryParts removeLastObject];

    NSString* directoryPartsJoined = [directoryParts componentsJoinedByString:@"/"];
    NSString* directoryStr = [self wwwFolderName];

    if ([directoryPartsJoined 长度] > 0)
    {
        directoryStr = [NSString stringWithFormat:@"%@/%@", [self wwwFolderName], [directoryParts componentsJoinedByString:@"/"]];
    }

    NSLog(@"默认路径 %@",directoryStr);

    if (![[self wwwFolderName] isEqualToString:@"www"])
    {
        return [NSString stringWithFormat:@"%@/%@",[self wwwFolderName],@"shared/index.html"];
    }

    return [mainBundle pathForResource:filename ofType:@"" inDirectory:directoryStr];
}

```

其他参考：

*   [将文件夹从主包复制到 iphone 中的文档目录](https://stackoverflow.com/questions/17669944/copy-folder-from-main-bundle-to-documents-directory-in-iphone)
*   [如何检测 iPhone 上的首次应用启动](https://stackoverflow.com/questions/9964371/how-to-detect-first-time-app-launch-on-an-iphone)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T20:04:29.260

好吧，由于 Phonegap 使用的是 WebView，您可以将部分代码存储在`localstorage`其中`eval`，并且每次用户可以访问 Internet 时，您都可以从您的服务器下载更新的部分代码并`localstorage`重新放置它们。

至于文件，您无法在打包时替换它们。

尽管这需要您设计一个巧妙的“更新”逻辑，因为让您的用户不了解更新和新功能/修复是一个坏主意。

祝你好运！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-12T19:57:42.700

No, the www folder is packaged in your application so if you want to update those files you'll have to resubmit to the app store. Other platforms like Android and BB will allow you to host your app remotely but if you want to be in the iOS app store those files will need to be local.

# c# - 生成的 FormItems 中的 validationErrorNotifier 的目的是什么？

> ID：12865319
> 
> 赞同：1
> 
> 时间：2012-10-12T18:50:58.437
> 
> 标签：c#, asp.net, validation, web-applications, enterprise-web-library

我已经`FormItem`针对我的 SQL 数据库中的表生成了 s。我正在查看`FormItem`为 my 生成的 s ，`TableModification`并注意到一个有趣的可选参数`Action validationErrorNotifier`。

如何使用这个参数，它带来什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:17:40.850

假设您有一个包含两个电话号码字段的表单。假设您希望`Validation`在两个电话号码的区号不匹配时产生错误。您可以将该`validationErrorNotifier`参数与 a 结合使用`bool`，以确保仅`Validation`在两个电话号码都有效时才执行后续操作：

```
var phonesInvalid = false;
var stack = ControlStack.CreateWithControls(
    myTableMod.GetPhone1FormItem( ..., validationErrorNotifier: () => phonesInvalid = true, validationList: myDataMod ).ToControl(),
    myTableMod.GetPhone2FormItem( ..., validationErrorNotifier: () => phonesInvalid = true, validationList: myDataMod ).ToControl()
);
formItemBlock.Add( FormItem.Create(
    "Phone Numbers",
    stack,
    validationGetter: control => new Validation(
        ( pbv, validator ) => {
            if( !phonesInvalid && myTableMod.Phone1.AreaCode != myTableMod.Phone2.AreaCode )
                validator.NoteErrorAndAddMessage( "Area codes must match." );
        },
        myDataMod
    )
) ); 
```

# c# - 如何将 AggregateException 展开为单个异常？

> ID：12865321
> 
> 赞同：1
> 
> 时间：2012-10-12T18:51:08.257
> 
> 标签：c#, multithreading, list, exception, thread-safety

由于我的`IEnumerable`. 具体来说，`List<T>`。

这是我的工作流程：

```
List<string> IDs = getIDs();
RunTask(IDs);
RunTask(IDs);

public void RunTask(List<string> IDs)
{
    TaskScheduler scheduler = new TaskScheduler();
    TaskFactory factory = new TaskFactory(scheduler);
    var tasks = IDs.Select(name => factory.StartNew(() => action(name))).ToArray();
    Task.WaitAll(tasks);
} 
```

我在`WaitAll()`通话中遇到一般性错误。

我的想法是我得到了某种不同步的 IEnumerator，我需要复制我的`List`via `Array.CopyTo()`，然后将它传递给我的多个线程。

这是我的例外：

```
Error: One or more errors occurred.
One or more errors occurred.
at System.Threading.Tasks.Task.WaitAll(Task[] tasks, Int32 millisecondsTimeout, CancellationToken cancellationToken)
at System.Threading.Tasks.Task.WaitAll(Task[] tasks, Int32 millisecondsTimeout)
at System.Threading.Tasks.Task.WaitAll(Task[] tasks) 
```

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:55:39.027

我不认为这是一个线程错误 - 只要每个任务不修改`IDs`列表，它就应该是安全的。`Task.WaitAll()`如果任何等待的任务抛出`AggregateException`异常或被取消，则抛出一个。

您可以访问`InnerExceptions`异常以查看错误是什么。

```
try
{
    Task.WaitAll(tasks);
}
catch(AggregateException ex)
{
    foreach(Exception in ex.InnerExceptions) { ... }
} 
```

# php - 数据阅读器 mysql

> ID：12865331
> 
> 赞同：1
> 
> 时间：2012-10-12T18:51:37.093
> 
> 标签：php, mysql, pdo

好的，我有一个存储过程，我想为每个结果集构建一个数组。

可以说是数组数组。

当我通过 mysql 工作台运行时，我的存储过程返回正确的结果。

它通过正确循环每个集合来工作。但是，在最后一个结果之后，它会返回结果，然后抛出异常捕获的错误。

异常消息只是 SQLSTATE[HY000]: 一般错误。

如果看起来下一个结果走得很远。

我该如何解决这个问题。尝试读取不存在的结果时发生错误。一个集合可能在那里，但它可能没有行，所以行数不会绕过它，因为在后面的代码中我需要知道数组映射到哪个对象的位置，即 $image = result[0], $events = $result [1]；

如果我做了行计数 $result[0] 可能会结束被设置为事件。

```
public static function getHomePageContent()
{
    $results = array();

    try{
        $connection = Yii::app()->db;
        $command = $connection->createCommand("CALL get_homepage_content()");

        $dataReader = $command->query();
        $dataReader->setFetchMode(PDO::FETCH_ASSOC);

        do {                   
                $results[] =  $dataReader->readAll();

        } while ($dataReader->nextResult());

        $dataReader->close();
    }

    catch(Exception $e){
        Yii::log('', CLogger::LEVEL_ERROR, $e->getMessage());
    }

    $connection->setActive(false);

    return $results;
} 
```

存储过程是

```
BEGIN

SET @slideshow_visible := 1;
SET @image_approved :=1;
SET @image_visible  :=1;
SET @image_format_type :='image';
SET @video_format_type :='video';

/* Main Slideshow Details */
SELECT title, button_url, title_text, alt_text, image_path, caption
FROM slideshow 
WHERE visible = @slideshow_visible
ORDER BY slideshow.order ASC;

/* News Section */
SELECT p1.*,wm2.meta_value
FROM warring_blogw.wp_posts p1
LEFT JOIN
      warring_blogw.wp_postmeta wm1
      ON (
              wm1.post_id = p1.id
              AND wm1.meta_value IS NOT NULL
              AND wm1.meta_key = "_thumbnail_id"
      )
LEFT JOIN
      warring_blogw.wp_postmeta wm2
      ON (
              wm1.meta_value = wm2.post_id
              AND wm2.meta_key = "_wp_attached_file"
              AND wm2.meta_value IS NOT NULL
      )         
/*LEFT JOIN 
     warring_blogw.wp_usermeta wm3
         ON(
                wm3.user_id = p1.post_author
            )*/
WHERE
      p1.post_status="publish"
      AND p1.post_type="post";

/* Photos */
SELECT im.title,im.alias_title, im.description, im.thumbnail_image_small, im.hits 
FROM image im
WHERE im.approved = @image_approved AND im.visible = @image_visible AND im.format_type = @image_format_type;

SELECT * from event; 
```

它总是在最后一个结果上我得到错误 - 即使我使用 while 循环或 do while 错误发生在 fetchall

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:25:50.027

要返回结果集，而不是异常，您可以在存储过程的顶部添加以下内容：

```
DECLARE EXIT HANDLER FOR SQLEXCEPTION
        SELECT 'SQLEXCEPTION raised' AS errmsg; 
```

当然，您可能应该首先解决异常被抛出的事实。也许您想发布存储过程的内容？

# git - 从 git 存储库中删除旧的提交信息以节省空间

> ID：12865332
> 
> 赞同：14
> 
> 时间：2012-10-12T18:51:47.453
> 
> 标签：git

我有一个存储库，用于存储一些越来越大的大型二进制文件（tifs、jpgs、pdfs）。还有相当数量的文件被创建、删除和重命名，我不关心单个提交历史。这个问题有些简化，因为我正在处理一个没有分支和标签的存储库。

我很好奇是否有一种简单的方法可以从系统中删除一些历史记录以节省空间。

[我在 git 邮件列表中](http://git.661346.n2.nabble.com/purging-unwanted-history-td1507638.html)找到了一个旧线程，但它并没有真正指定如何使用它（即 $drop 是什么）：

```
git filter-branch --parent-filter "sed -e 's/-p $drop//'" \
        --tag-name-filter cat -- \
        --all ^$drop 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T18:57:49.023

您总是可以删除`.git`并重新`git init`进行一次初始提交。当然，这将删除*所有*提交历史记录。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T21:13:50.470

我认为，您可以按照以下答案缩小历史记录：

[如何删除 github gist 的特定修订？](https://stackoverflow.com/questions/5912274/how-to-delete-a-specific-revision-of-a-github-gist/5912484#5912484)

决定要保留哪些历史点。

```
pick <hash1> <commit message>
pick <hash2> <commit message>
pick <hash3> <commit message>   <- keep
pick <hash4> <commit message>
pick <hash5> <commit message>
pick <hash6> <commit message>   <- keep
pick <hash7> <commit message>
pick <hash8> <commit message>
pick <hash9> <commit message>
pick <hash10> <commit message>  <- keep 
```

然后，将每个“保留”之后的第一个保留为“选择”，并将其他标记为“壁球”。

```
pick   <hash1> <commit message>
squash <hash2> <commit message>
squash <hash3> <commit message>   <- keep
pick   <hash4> <commit message>
squash <hash5> <commit message>
squash <hash6> <commit message>   <- keep
pick   <hash7> <commit message>
squash <hash8> <commit message>
squash <hash9> <commit message>
squash <hash10> <commit message>  <- keep 
```

然后，通过保存并退出编辑器来运行 rebase。在每个“keep”点，消息编辑器将弹出一个组合提交消息，范围从先前的“pick”到“keep”提交。然后，您可以只保留最后一条消息，或者实际上将它们组合起来以记录原始历史记录，而不保留所有中间状态。

在那次变基之后，中间文件数据仍将在存储库中，但现在未引用。`git gc`现在确实会让你摆脱这些数据。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T19:06:18.410

$drop 是一个变量（你想要寻找的）

如果要清理不必要的文件并优化本地存储库，则必须检查命令[git gc](http://git-scm.com/docs/git-gc)

并且[git prune](http://git-scm.com/docs/git-prune)是另一种选择，因为它删除了任何可到达分支中的任何对象不再指向的对象。

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T04:25:14.160

如果您想从 Git 历史记录中查找和删除大文件，[Pro Git](http://git-scm.com/book)有一个名为[Removing Objects](http://git-scm.com/book/en/Git-Internals-Maintenance-and-Data-Recovery#Removing-Objects)的部分，它会指导您完成此过程。这有点复杂，但它可以让您从历史记录中删除无论如何都已删除的文件，同时保持其余历史记录完好无损。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-02T09:48:42.137

让 git 忘记文件有点复杂。

`git rm`从现在开始只会删除该分支上的文件，但它会保留在历史记录中，git 会记住它。

`git filter-branch`正如其他人在这里提到的那样，正确的方法是使用。它将重写分支历史记录中的每个提交以删除该文件。

但是，即使在这样做之后，git 仍然可以记住它，因为在 reflog、remote、tags 等中可以引用它。

我写了一个小工具叫做`git forget-blob`

[https://ownyourbits.com/2017/01/18/completely-remove-a-file-from-a-git-repository-with-git-forget-blob/](https://ownyourbits.com/2017/01/18/completely-remove-a-file-from-a-git-repository-with-git-forget-blob/)

这很容易，只要做`git forget-blob file1.txt`。

这将删除所有引用，做`git filter-branch`，最后运行 git 垃圾收集器`git gc`以完全摆脱你的 repo 中的这个文件。

# ajax - 页面更改时ajax调用停止

> ID：12865336
> 
> 赞同：1
> 
> 时间：2012-10-12T18:52:00.310
> 
> 标签：ajax, forms, internet-explorer, jquery

我有一个表格，它需要能够从英语到西班牙语来回切换。为此，我正在使用 `<a href ="page.php?lan=SP">`. 在我的代码中，我有：

```
<?php
if($_GET['lan'] == 'SP'){
     session_start();
     $_SESSION['language'] = $_GET['lan'];
?> (spanish form)
<?php
}else{
    session_start();
    $_SESSION['language'] = 'EN';
     ?> (english form)
} 
```

在表格中我有一个文本框：

```
<input name = "PromoCode" type = "text" id = "code" style ="width:250px" onkeyup="PCcheck(this.value)" maxlength="10"> 
```

以及一段用文字更新的段落，说明您输入的内容是否为有效代码：

```
<p name =" " id="PC" style="width:250px"></p> 
```

其中 PCcheck(this.value) 进行 ajax 调用以查看文本框中的值每次用户单击该框时都与我的数据库中的代码匹配。

在我使用的每个浏览器（safari、chrome、firefox）中，这都有效。在 IE 中，它最初可以完美运行，但是当我单击链接更改语言时，会加载表单，绑定文本调用函数但不会更新 p 标签。我的功能如下所示：

```
function PCcheck(pc)
{
    //alert(pc);
   if((/^\s*$/).test(pc))
    {
    }else{
        $.ajax({url:"check.php",
            type:"GET",
            data:'code=' +pc,
            success:function(result)
            {
                if(result =='Valid' || result == 'V&acute;lido')
                {
       document.getElementById("PC").innerHTML = "<font color ='green'>" + result + "</font>";
                }
                else
                {
        document.getElementById("PC").innerHTML = "<font color ='red'>" + result + "</font>";
                }
            }
        });
} 
```

check.php 看起来像：

```
<?php
session_start();
$lan = $_SESSION['language'];
include('../db.php');
$code = $_GET['code'];
    $query = "SELECT * 
               FROM table
             Where Code = '$code'";

        $result = mysql_query($query) or die(mysql_error());

        $row = mysql_fetch_array($result);
        if($row['Code'] == ''){
            if($lan == 'EN'){
                echo("Invalid Code");
            }else{
               echo('C&oacute;digo no v&aacute;lido');
            }
        }
        else if($row['FirstName'] != ''){
            if($lan == 'EN'){
                $response = 'Used on ' . $row['RDate'];
            }else{
                $response = 'Utilizado en ' . $row['RDate'];
            }
            echo($response);
        }
        elseif($row['Date'] < $date){
            if($lan == 'EN'){
                echo('Expired');
            }else{
                echo 'Expirado';
            }
        }
        else{
            if($lan == 'EN'){
                echo('Valid');
            }else{
            echo 'V&aacute;lido';
            }
        } 
```

正如我所说，它适用于所有浏览器，并且在初始加载时使用 IE，但如果我更改语言（表单以正确的语言加载，并且调用函数，但它看起来不像发生 ajax 调用）。我遗漏了一些不相关的代码，只是这个不起作用。

经过多一点测试后编辑：它停止进行 $.ajax 调用。我不知道为什么它第一次会起作用，但在单击语言链接后就不行了。此外，在页面刷新后，它会再次开始工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:57:23.943

javascript中的错字？

```
 if(result =='Valid' || result == 'V&acute;lido)
                                                          ^-- missing ' 
```

# android - 在 Android 4 上重复通知

> ID：12865337
> 
> 赞同：5
> 
> 时间：2012-10-12T18:52:02.360
> 
> 标签：android, notifications, alarmmanager

**目标：**如果满足特定条件，通知会在每天下午 2 点出现一次。

**示例：**为简单起见，假设每天都满足通过 Internet 连接检查的条件。如果今天已经是下午 2 点之后，我们将从明天开始通知。例如，用户在周一下午 4 点启动应用程序，然后在周二下午 2 点、周三下午 2 点、周四下午 2 点等收到通知。

**问题：**在下午 2 点有第一个通知，但随后我在随机时间一遍又一遍地收到相同的通知。

**问题似乎只在 Android >= 4.0 上。**它在早期的 Android 上运行良好。

这是我发送通知的方式：

```
public class NotifyService extends Service
{       
static final int NOTIFICATION_ID = 1;
// ...

@Override
public IBinder onBind(Intent intent)
{
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    try
    {
        Symbol biggest = getBiggestMover();
        if (biggest != null)
        {
            String title = getString(R.string.app_name);
            String text = getNotificationText(biggest.symbol, biggest.change);
            sendNotification(title, text);
        }
    }
    catch (Exception e)
    {
        // If there is Internet problem we do nothing, don't want to disturb the user.
        e.printStackTrace();
    }

    return super.onStartCommand(intent, flags, startId);
}

/** @return Symbol which is the biggest mover today. If there is no big mover - null is returned.
 * @throws Exception If there is Internet problem. */
private Symbol getBiggestMover() throws Exception
{
    Symbol biggest = null;
    Symbol[] equities = Network.getTraded(SymbolType.EQUITY);
    for (Symbol equity : equities)
    {
        if (Utilities.isToday(equity.lastTraded) && isBigMove(equity.change) && isBigger(equity, biggest))
        {
            biggest = equity;
        }
    }
    return biggest;
}   

private void sendNotification(String title, String text)
{
    Notification notification = new Notification(R.drawable.ic_launcher, text, System.currentTimeMillis());
    notification.flags = Notification.FLAG_AUTO_CANCEL;

    Intent clickIntent = new Intent(this, MainActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, clickIntent, PendingIntent.FLAG_CANCEL_CURRENT);

    notification.setLatestEventInfo(this, title, text, pendingIntent);

    NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    manager.notify(NOTIFICATION_ID, notification);
}   
// ...  
} 
```

`sendNotification()`在下午 2 点被调用，因为`AlarmManager`：

```
public class ServiceStarter extends BroadcastReceiver
{

@Override
public void onReceive(Context context, Intent intent)
{
    setNotificationAlarm(context);
}

/** Set repeating notifications every 24 hours. */
public static void setNotificationAlarm(Context context)
{
    Intent intent = new Intent(context, NotifyService.class);
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    PendingIntent pendingIntent = PendingIntent.getService(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);

    final int oneDay = 24 * 60 * 60 * 1000;
    alarmManager.setRepeating(AlarmManager.RTC, getTriggerTime(), oneDay, pendingIntent);
}

private static long getTriggerTime()
{
    GregorianCalendar calendar = new GregorianCalendar();
    calendar.set(GregorianCalendar.HOUR_OF_DAY, 14);
    calendar.set(GregorianCalendar.MINUTE, 0);
    calendar.set(GregorianCalendar.SECOND, 0);
    calendar.set(GregorianCalendar.MILLISECOND, 0);

    if (calendar.before(new GregorianCalendar()))
    {
        calendar.add(GregorianCalendar.DAY_OF_MONTH, 1);
    }

    return calendar.getTimeInMillis();
}

} 
```

`setNotificationAlarm()`从 2 个地方调用。首先，在应用程序开始时。其次，从上面的代码中，当手机重新启动时（`onReceive()`接收`BOOT_COMPLETED`）。我这样做是因为当用户关闭手机时，它会`AlarmManager`清除它的警报。

所以一切都应该工作，因为`alarmManager.setRepeating()`覆盖了以前的警报。

我发现有人有同样的问题，但也没有答案：
[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/t_tDU4PwR3g](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/t_tDU4PwR3g)

同样在这里我发现了类似的问题： [http ://comments.gmane.org/gmane.comp.handhelds.android.devel/171471](http://comments.gmane.org/gmane.comp.handhelds.android.devel/171471)

*前段时间我问如何创建这样的通知，所以这是相关的：
[每天在特定时间通知](https://stackoverflow.com/questions/12125537/everyday-notifications-at-certain-time)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:40:46.480

在 ICS+ 设备上遇到了同样的问题。我的解决方法非常简单-> 显示通知时将当前时间放在共享首选项中。在此之前，请始终检查间隔是否真的通过，如果不只是中止。

```
 long lastnotification = sharedPrefs.getLong("lnnd", -1);
            Calendar now = Calendar.getInstance();
            if (!namedayalarmEnabled) {
                    return;
            }
            if (lastnotification > 1) {
                    Calendar last = Calendar.getInstance();
                    last.setTimeInMillis(lastnotification);
                    long distance = (now.getTimeInMillis() - last
                                    .getTimeInMillis());
                    if (distance < YOURINTERVAL) {
                            return;
                    } else {
                            SharedPreferences.Editor editor = sharedPrefs.edit();
                            editor.putLong("lnnd", now.getTimeInMillis());
                            editor.commit();
                    }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T07:22:59.563

使用 AlarmManager.RTC_WAKEUP 安装的 AlarmManager.RTC

在 AlarmManager.RTC

System.currentTimeMillis() 中的闹钟时间（UTC 挂钟时间）。此警报不会唤醒设备；如果它在设备睡眠时熄灭，则直到设备下次唤醒时才会发送。

在 AlarmManager.RTC_WAKEUP 中

System.currentTimeMillis() 中的闹钟时间（UTC 挂钟时间），它会在设备关闭时唤醒设备。

# c# - 进度条从不显示

> ID：12865342
> 
> 赞同：1
> 
> 时间：2012-10-12T18:52:27.593
> 
> 标签：c#, winforms, progress-bar

我只是想要一个不确定的进度条，它变得可见并显示一些“活动”以指示查询正在运行，然后，当查询完成时，又回到不可见状态。看起来很简单；但使用此代码：

```
try
{
    Cursor.Current = Cursors.WaitCursor;
    progressBarChanges.Value = 50;
    progressBarChanges.Step = 20;
    progressBarChanges.Visible = true;
    ... // the meat of the code, where the query is being done, elided
} finally
{
    progressBarChanges.Visible = false;
    Cursor.Current = Cursors.Default;
} 
```

...进度条永远不会显示，即使查询需要一段时间才能运行。进度条位于 DGV 上。我意识到我的进度代码有点蹩脚，但首先要做的是——我只是想让这该死的*东西*为初学者展示一些东西。

## 更新

在调用运行查询的 BackgroundWorker proc 之前，我将 progressBar 设置为可见*方式：*

```
progressBarChanges.Value = 50;
progressBarChanges.Step = 20;
progressBarChanges.Visible = true;
. . .    
if (args.KeyCode == Keys.Enter)
{
    if (ValidEntryForCRID(textBoxID.Text))
    {
        RetrieveAndBindPlatypusData();
        var tb = (TextBox)Controls.Find("textBoxDuckbill", true).First();
        if (tb != null)
        {
            tb.Focus(); 
        }
        if ((!string.IsNullOrWhiteSpace(textBoxID.Text)) &&
            (backgroundWorkerShowChanges.IsBusy != true))
        {
            backgroundWorkerShowChanges.RunWorkerAsync();
        }
    . . . 
```

...然而，progressBar 永远不会变得可见（除非在 DGV 的 DataSource 分配了返回的查询/结果集的 OracleDateTable 值之后，我从未将其设置回 visible = false ）。如果我将其评论出来，那么它（迟来的）终于出现了，显然（错误地）认为“迟到总比没有好”。

有没有办法强制Windows“注意”“progressBarChanges.Visible = true;” 马上线？类似 .ProcessMessages() 或 this.Refresh 或...？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T18:54:58.100

发生这种情况是因为您没有给 UI 线程时间来更新。您正在更新为可见并立即运行您的代码。代码应该在后台线程上运行并发送更新消息。

详细说明：

当您设置 Visible 属性时，UI 线程实际上不会更新，直到当前逻辑结束。所以，正在发生的事情是这样的：

*   可见的
*   运行过程
*   不可见的
*   代码已完成，因此 UI 已解冻并更新...最后一个状态为不可见

**你想要的是：**

*   可见的
*   开新线跑肉
*   UI 代码已完成，因此 UI 已解冻并将栏更新为可见

然后这个：

*   ==>新线程运行肉类向UI线程发送更新，以便进度条可以更新

然后这个：

*   新线程结束并在其最终方法中设置不可见
*   UI 代码已完成，因此 UI 已解冻并将栏更新为不可见

[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)或[Backgroundworker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)应该很容易实现这一点。

**更新代码以显示恒定滚动**

我相信您只是缺少进度条的样式应该是`ProgressBarStyle.Marquee`. 如果您已经将工作卸载到后台工作人员，那么其余的应该可以工作

```
 public Form1()
    {
        InitializeComponent();
        this.backgroundWorker1.DoWork += new System.ComponentModel.DoWorkEventHandler(this.backgroundWorker1_DoWork);
        this.backgroundWorker1.RunWorkerCompleted += new System.ComponentModel.RunWorkerCompletedEventHandler(this.backgroundWorker1_RunWorkerCompleted);
        progressBar1.Enabled = progressBar1.Visible = false;
        progressBar1.Style = ProgressBarStyle.Marquee;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        progressBar1.Visible = true;
        progressBar1.Enabled = true;
        backgroundWorker1.RunWorkerAsync();
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        System.Threading.Thread.Sleep(10000);
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        progressBar1.Visible = progressBar1.Enabled = false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:34:44.550

这就是我让它工作的方式：

我在 BackgroundWorker 调用之前启用了 ProgressBar：

```
progressBarChanges.Visible = true;
backgroundWorkerShowChanges.RunWorkerAsync(); 
```

BackgroundWorker 代码从数据库中获取 OracleDataTable：

```
private void backgroundWorkerShowChanges_DoWork(object sender, System.ComponentModel.DoWorkEventArgs args)
{
    holdChanges = GetChangesMade(textBoxID.Text);
} 
```

BackgroundWorker 的“完成”事件更新 UI：

```
private void backgroundWorkerShowChanges_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs args)
{
    PopulateChangesGrid();
} 
```

在 PopulateChangesGrid() 中，将 OracleDataTable 对象分配给 DGV 后，我将进度条设置为不可见：

```
private void PopulateChangesGrid()
{
    dgvPlatypi.DataSource = holdChanges;
    progressBarChanges.Visible = false;
} 
```

它就像一个魅力（<--不一定是对 Windows 8“Metro”魅力的引用）。

# asp.net - (ASP.NET) 从回发中获取占位符控件的价值

> ID：12865346
> 
> 赞同：2
> 
> 时间：2012-10-12T18:53:09.627
> 
> 标签：asp.net, visual-studio, forms, postback, placeholder

# 如何在回发后检索占位符内的控件的值？

**背景资料**

我有 2 个动态创建的控件（它们位于占位符内）。表单提交按钮也是动态创建的。为了澄清我想在按下按钮后获取动态创建的字段的值。

**问题**

使用 request.form 时，我不断收到空值。我尝试将 ClientIDMode 设为静态，但问题仍然存在。我也尝试过简单地使用 PLACEHOLDER1.FindControll 方法，但这也返回 null

**代码（我在哪里尝试检索控件的值）**

```
 Protected Sub submitEdit_Click(ByVal sender As Object, ByVal e As EventArgs) Handles submitEdit.Click
    Dim currentClass As String = submitEdit.CssClass

    If currentClass = "hidden active" Then
        'Get Rid of Controls
        EditHeaderH1.Visible = False
        submitEdit.Visible = False
        submitEdit.CssClass = "hidden inactive"
        currentStatus.value = "updated"
        ''''''''''''''''''''''''''''''''''''''''

        'Find subject and Post Content''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

        Dim subjectText As String = Request.Form("editSubject")
        Dim editorText As String = Request.Form("editEditor")
        Dim editID As String = Request.Form("hiddenID")
        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        Dim connStr As String = ConfigurationManager.ConnectionStrings("oakfratnewsConnectionString").ConnectionString
        Dim nCon As New SqlConnection(connStr)
        Dim addCon As New SqlConnection(connStr)
        Dim addCom As New SqlCommand("UPDATE News SET Subject = @Subject, [Content] = @Content WHERE (ID = @ID)", addCon)
        addCom.Parameters.AddWithValue("@Content", Server.HtmlDecode(editorText))
        addCom.Parameters.AddWithValue("@Subject", subjectText)
        addCom.Parameters.AddWithValue("@ID", editID)

        Try
            addCon.Open()
            addCom.ExecuteNonQuery()
            addCon.Close()
        Catch ex As Exception

        End Try

    End If

End Sub 
```

**CODE：最初创建字段的位置**

```
Public Sub GridView1_RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles GridView1.RowCommand

    If e.CommandName = "editPost" Then
        plcEditor.Controls.Clear()
        GridView1.Visible = False
        Dim index As Integer = Convert.ToInt32(e.CommandArgument)
        Dim row As GridViewRow = GridView1.Rows(index)
        Dim ID As String = GridView1.Rows(index).Cells(0).Text
        ''''''''''''''''''''''''''''''''''''''''CREATE Controls for Placeholder
        Dim editEditor As New CuteEditor.Editor
        Dim hiddenID As New HiddenField
        Dim subjectTXT As New TextBox
        Dim br As New Literal

        hiddenID.Value = ID
        hiddenID.ID = "hiddenID"
        editEditor.ID = "editEditor"
        editEditor.ClientIDMode = ClientIDMode.Static
        subjectTXT.ID = "editSubject"
        subjectTXT.ClientIDMode = ClientIDMode.Static
        hiddenID.ClientIDMode = ClientIDMode.Static

        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        Dim i As Integer = 100
        Dim editButton As New Button
        editButton.ID = String.Concat("editButton-", i)
        editButton.CommandArgument = i.ToString

        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        Dim sbjLabel As New Label

        sbjLabel.Text = "Subject:   "

        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        editEditor.AutoConfigure = CuteEditor.AutoConfigure.Simple
        br.Text = "<br/><br/>"
        plcEditor.Controls.Add(hiddenID)
        plcEditor.Controls.Add(sbjLabel)
        plcEditor.Controls.Add(subjectTXT)
        subjectTXT.Width = "100"
        subjectTXT.Height = "25"
        subjectTXT.CssClass = "editInput"
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(editEditor)
        plcEditor.Controls.Add(br)
        plcEditor.Controls.Add(br)
        '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
        Dim connStr As String = ConfigurationManager.ConnectionStrings("oakfratnewsConnectionString").ConnectionString
        Dim nCon As New SqlConnection(connStr)
        Dim addCon As New SqlConnection(connStr)
        Dim addCom As New SqlCommand("SELECT * FROM [News] WHERE ([ID] = @ID)", addCon)
        addCom.Parameters.AddWithValue("@ID", ID)

        Dim results As SqlDataReader
        addCon.Open()
        results = addCom.ExecuteReader
        While results.Read()
            Dim editText As String = results.Item("Content")
            Dim Subject As String = results.Item("Subject")
            EditHeaderH1.InnerText = "Edit Post - " & Subject
            editEditor.Text = editText
            subjectTXT.Text = Subject
        End While
        results.Close()
        addCon.Close()

        ''BUTTON Fade-IN Effect''
        submitEdit.CssClass = "hidden active"
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:04:30.643

我认为您必须重新创建控件 OnInit，并使用与回发之前相同的 id。如果您重新创建控件，数据将绑定到它们，您应该能够在按钮事件中访问它。

# c++ - 在while循环c ++中输入负值

> ID：12865347
> 
> 赞同：4
> 
> 时间：2012-10-12T18:53:12.850
> 
> 标签：c++, while-loop

我有这个代码：

```
double i;
while(cin >> i)
{
    if ( i < 0.0)
        cout << "ENTER A POSITIVE NUMBER: ";
    else
        break;
} 
```

我想要这样的代码（我不想使用中断）：

```
while((cin >> i) < 0.0)
{
    cout << "ENTER A POSITIVE NUMBER: ";
} 
```

我在这一行得到一个错误：`while((cin >> i) < 0.0)`说`invalid operands to binary expression`.

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T18:56:05.923

像这样使用它。

```
while ((cin >> i) && (i < 0.0)) 
```

的重载函数`cin`通过引用返回一个对象`istream class`。因此，您不能将其与双精度值进行比较。

```
cin >> i
|-------| //this is an object of istream class 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T18:57:08.037

你想检查 i 的值，而不是 cin 的返回

```
while((cin >> i) && ( i < 0.0))
{
    cout << "ENTER A POSITIVE NUMBER: ";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T18:58:39.177

该表达式`(cin >> i)`不返回双精度值。

您可以编写相同的语句，不带`break`, 为：

```
double i;
while ((cin >> i) && (i < 0.0)) {
    cout << "ENTER A POSITIVE NUMBER: "; 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T18:55:47.203

的返回值`cin >> i`是流，而不是读取值。这是为了允许操作数的链接

```
cin >> i >> j; 
```

~~你可以试试这个：~~

 ~~```
while( (cin >> i, i) < 0\. )
{
    cout << "ENTER A POSITIVE NUMBER: ";
} 
```~~ 

~~逗号运算符应该返回值，`i`但我还没有测试过。~~

编辑：不要使用这种方法，因为 David Rodríguez 已经注意到这会丢弃读取的结果。改为使用`while( (cin >>i) && (i<0.) )`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T18:55:55.250

做：

```
while( cin >> i && i < 0.0 )
{
    cout << "ENTER A POSITIVE NUMBER: ";
} 
```

该错误是由于表达式`(cin >> i)`对于与双精度比较无效的事实引起的。

# soapui - Mule 服务代理，COULD_NOT_READ_XML_STREAM

> ID：12865349
> 
> 赞同：2
> 
> 时间：2012-10-12T18:53:21.633
> 
> 标签：soapui, mule

我设置了服务代理，并且可以查看 wsdl，但是当我尝试使用soapUI 对其进行测试时，它几乎似乎超时了。我将发布 mule 配置、soapUI 日志和 mule studio 日志。当我在没有代理的情况下正常访问 wdsl 时，这是一个快速响应。

谷歌结果似乎没有产生太多，所以任何关于来源、soapUI 或 Mule 的指导，以及这个问题都会有所帮助。

骡流

```
<flow name="UPCFlow1" doc:name="UPCFlow1">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="4040" path="upc" doc:name="HTTP" contentType="text/xml" mimeType="text/xml"/>

    <cxf:proxy-service namespace="http://searchupc.com/" service="UPCSearch" payload="envelope" wsdlLocation="http://www.searchupc.com/service/UPCSearch.asmx?WSDL"  doc:name="SOAP" enableMuleSoapHeaders="false"/>
<http:outbound-endpoint address="http://www.searchupc.com/"
    exchange-pattern="request-response" doc:name="HTTP" contentType="text/xml" mimeType="text/xml"/>
</flow> 
```

soapUI 错误日志

```
 Fri Oct 12 13:32:08 CDT 2012:ERROR:java.net.SocketException: socket closed
   java.net.SocketException: socket closed
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:149)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:110)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:264)
    at org.apache.http.impl.conn.LoggingSessionInputBuffer.readLine(LoggingSessionInputBuffer.java:115)
    at org.apache.http.impl.io.ChunkedInputStream.getChunkSize(ChunkedInputStream.java:246)
    at org.apache.http.impl.io.ChunkedInputStream.nextChunk(ChunkedInputStream.java:204)
    at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:167)
    at org.apache.http.impl.io.ChunkedInputStream.read(ChunkedInputStream.java:196)
    at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:155)
    at org.apache.http.util.EntityUtils.toByteArray(EntityUtils.java:100)
    at org.apache.http.entity.BufferedHttpEntity.<init>(BufferedHttpEntity.java:60)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.HttpMethodSupport.getResponseBody(HttpMethodSupport.java:281)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.support.methods.ExtendedPostMethod.getResponseBody(ExtendedPostMethod.java:128)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.SinglePartHttpResponse.<init>(SinglePartHttpResponse.java:49)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.support.attachments.WsdlSinglePartHttpResponse.<init>(WsdlSinglePartHttpResponse.java:36)
    at com.eviware.soapui.impl.wsdl.submit.filters.HttpPackagingResponseFilter.wsdlRequest(HttpPackagingResponseFilter.java:71)
    at com.eviware.soapui.impl.wsdl.submit.filters.HttpPackagingResponseFilter.afterAbstractHttpResponse(HttpPackagingResponseFilter.java:48)
    at com.eviware.soapui.impl.wsdl.submit.filters.AbstractRequestFilter.afterRequest(AbstractRequestFilter.java:64)
    at com.eviware.soapui.impl.wsdl.submit.transports.http.HttpClientRequestTransport.sendRequest(HttpClientRequestTransport.java:297)
    at com.eviware.soapui.impl.wsdl.WsdlSubmit.run(WsdlSubmit.java:123)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

Eclipse 控制台

```
 INFO  2012-10-12 13:31:06,229 [[upc].connector.http.mule.default.receiver.02] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default outbound transformer: org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest
INFO  2012-10-12 13:31:06,234 [[upc].connector.http.mule.default.receiver.02] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default response transformer: org.mule.transport.http.transformers.MuleMessageToHttpResponse
INFO  2012-10-12 13:31:06,234 [[upc].connector.http.mule.default.receiver.02] org.mule.transport.service.DefaultTransportServiceDescriptor: Loading default outbound transformer: org.mule.transport.http.transformers.ObjectToHttpClientMethodRequest
INFO  2012-10-12 13:31:06,235 [[upc].connector.http.mule.default.receiver.02] org.mule.lifecycle.AbstractLifecycleManager: Initialising: 'connector.http.mule.default.dispatcher.2040380475'. Object is: HttpClientMessageDispatcher
INFO  2012-10-12 13:31:06,239 [[upc].connector.http.mule.default.receiver.02] org.mule.lifecycle.AbstractLifecycleManager: Starting: 'connector.http.mule.default.dispatcher.2040380475'. Object is: HttpClientMessageDispatcher
WARN  2012-10-12 13:33:05,590 [[upc].connector.http.mule.default.receiver.02] org.apache.cxf.phase.PhaseInterceptorChain: Interceptor for {http://searchupc.com/}UPCSearch has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: COULD_NOT_READ_XML_STREAM
    at org.apache.cxf.databinding.stax.StaxDataBinding$XMLStreamDataWriter.write(StaxDataBinding.java:133)
    at org.apache.cxf.databinding.stax.StaxDataBinding$XMLStreamDataWriter.write(StaxDataBinding.java:117)
    at org.apache.cxf.databinding.stax.StaxDataBinding$XMLStreamDataWriter.write(StaxDataBinding.java:113)
    at org.apache.cxf.interceptor.AbstractOutDatabindingInterceptor.writeParts(AbstractOutDatabindingInterceptor.java:119)
    at org.apache.cxf.interceptor.BareOutInterceptor.handleMessage(BareOutInterceptor.java:68)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:232)
    at org.mule.module.cxf.CxfInboundMessageProcessor$1.write(CxfInboundMessageProcessor.java:373)
    at org.mule.transport.http.HttpServerConnection.writeResponse(HttpServerConnection.java:315)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:164)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.ctc.wstx.exc.WstxParsingException: Duplicate attribute 'name'.
 at [row,col {unknown-source}]: [29,468]
    at com.ctc.wstx.sr.StreamScanner.constructWfcException(StreamScanner.java:612)
    at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:485)
    at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:470)
    at com.ctc.wstx.sr.AttributeCollector.throwDupAttr(AttributeCollector.java:522)
    at com.ctc.wstx.sr.NsAttributeCollector.resolveNamespaces(NsAttributeCollector.java:248)
    at com.ctc.wstx.sr.NsInputElementStack.resolveAndValidateElement(NsInputElementStack.java:351)
    at com.ctc.wstx.sr.BasicStreamReader.handleStartElem(BasicStreamReader.java:2923)
    at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2783)
    at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1048)
    at org.mule.module.xml.stax.DelegateXMLStreamReader.next(DelegateXMLStreamReader.java:237)
    at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:551)
    at org.apache.cxf.staxutils.StaxUtils.copy(StaxUtils.java:513)
    at org.apache.cxf.databinding.stax.StaxDataBinding$XMLStreamDataWriter.write(StaxDataBinding.java:124)
    ... 13 more
ERROR 2012-10-12 13:33:05,595 [[upc].connector.http.mule.default.receiver.02] org.mule.exception.DefaultSystemExceptionStrategy: Caught exception in Exception Strategy: Software caused connection abort: socket write error
java.net.SocketException: Software caused connection abort: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.DataOutputStream.write(Unknown Source)
    at org.apache.commons.httpclient.ChunkedOutputStream.writeClosingChunk(ChunkedOutputStream.java:130)
    at org.apache.commons.httpclient.ChunkedOutputStream.finish(ChunkedOutputStream.java:144)
    at org.mule.transport.http.HttpServerConnection.writeResponse(HttpServerConnection.java:319)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:164)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
ERROR 2012-10-12 13:33:05,602 [[upc].connector.http.mule.default.receiver.02] org.mule.exception.DefaultSystemExceptionStrategy: Caught exception in Exception Strategy: Software caused connection abort: socket write error
java.net.SocketException: Software caused connection abort: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at java.io.DataOutputStream.write(Unknown Source)
    at sun.nio.cs.StreamEncoder.writeBytes(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlushBuffer(Unknown Source)
    at sun.nio.cs.StreamEncoder.implFlush(Unknown Source)
    at sun.nio.cs.StreamEncoder.flush(Unknown Source)
    at java.io.OutputStreamWriter.flush(Unknown Source)
    at java.io.BufferedWriter.flush(Unknown Source)
    at java.io.FilterWriter.flush(Unknown Source)
    at org.mule.transport.http.ResponseWriter.flush(ResponseWriter.java:69)
    at org.mule.transport.http.HttpServerConnection.writeResponse(HttpServerConnection.java:300)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:201)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:29:51.047

有几个问题：

*   远程 Web 服务的地址错误，
*   缺少`cxf:proxy-client`元素，
*   缺少复制 SOAPAction（如果不使用 SOAP 1.2）。

下面是 SOAP 1.1 的固定示例。请注意，我已将 CXF 元素放置在端点内：这不是必需的（它们可以直接在流中），而只是将它们放置在配置中的常用方式。

```
<flow name="UPCFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        host="localhost" port="4040" path="upc">
        <cxf:proxy-service namespace="http://searchupc.com/"
            service="UPCSearch" payload="body"
            wsdlLocation="http://www.searchupc.com/service/UPCSearch.asmx?WSDL"
            enableMuleSoapHeaders="false" />
    </http:inbound-endpoint>
    <copy-properties propertyName="SOAPAction" />
    <http:outbound-endpoint
        address="http://www.searchupc.com/supc/service/UPCSearch.asmx"
        exchange-pattern="request-response" method="POST">
        <cxf:proxy-client payload="body" />
    </http:outbound-endpoint>
</flow> 
```

对于 SOAP 1.2：

```
<flow name="UPCFlow1">
    <http:inbound-endpoint exchange-pattern="request-response"
        host="localhost" port="4040" path="upc">
        <cxf:proxy-service namespace="http://searchupc.com/"
            service="UPCSearch" payload="body"
            wsdlLocation="http://www.searchupc.com/service/UPCSearch.asmx?WSDL"
            enableMuleSoapHeaders="false" />
    </http:inbound-endpoint>
    <http:outbound-endpoint
        address="http://www.searchupc.com/supc/service/UPCSearch.asmx"
        exchange-pattern="request-response" method="POST">
        <cxf:proxy-client payload="body" soapVersion="1.2" />
    </http:outbound-endpoint>
</flow> 
```

# android - OnTouchEvent 方法在 ScrollView 中没有响应

> ID：12865358
> 
> 赞同：1
> 
> 时间：2012-10-12T18:53:51.170
> 
> 标签：android

我已经阅读了更多关于此的文章，但我还没有找到任何解决方案，对不起！

我有一个带有滚动视图的 .xml 文件：

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

</ScrollView> 
```

我有下一个代码：

```
public class Example extends Activity{

//I have more code

public boolean onTouchEvent(MotionEvent event) {
int x = (int) event.getX();
int y = (int) event.getY();

switch(event.getAction()) {
    case MotionEvent.ACTION_DOWN:

    break;
    case MotionEvent.ACTION_MOVE:

    break;
    case MotionEvent.ACTION_UP:

    break;
}   
return true;
}
} 
```

如果我有scrollView，则永远不会执行该方法，但如果我退出scrollView，则该方法可以完美运行。如何使该方法与滚动视图一起使用？感谢您的关注和帮助。

# android - SherlockActivity 无法解析为类型

> ID：12865360
> 
> 赞同：0
> 
> 时间：2012-10-12T18:54:30.623
> 
> 标签：android, actionbarsherlock

我正在尝试更新项目中的 ABS 库。

所以我删除了旧版本并添加了最新版本。

我收到以下错误：

> SherlockActivity 无法解析为类型

在第一行之一：

```
public class MyActivity extends SherlockActivity {
(...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:54:50.217

我最终通过更新 eclipse 和 android SDK 解决了我的问题。

# php - 将一个字符串插入另一个字符串，每 N 个字符

> ID：12865361
> 
> 赞同：0
> 
> 时间：2012-10-12T18:54:31.140
> 
> 标签：php, string

假设我们有字符串`$string="lolololol|lolololol|lolololol|lolololol"`。因为我需要在浏览器中显示它，所以我想每 N（比如 50）个字符添加一个`<wbr>`标签（[请参阅](http://www.quirksmode.org/oddsandends/wbr.html "标签的简要说明")），但我不确定如何在 PHP 中执行此操作。我看到了一些使用正则表达式的其他语言的解决方案，但我实际上并不知道如何使用它，所以我更喜欢其他解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T18:58:25.673

您可以为此使用自动换行

```
<?php
$string="lolololol|lolololol|lolololol|lolololol";
echo wordwrap( $string, 50, "<wbr>", true); 
```

[演示](http://sandbox.onlinephpfunctions.com/code/dc11fedb6f1d1f76e2c869826f5a8f6a344c41b9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:04:09.037

```
$string="lolololol|lolololol|lolololol|lolololol";
echo chunk_split($string, 7,"TRO"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T12:29:23.060

红宝石 答案：

```
 def put_wbr str, sub_str, num
  new_str = ""
  str.each_char{ |s| new_str.length % num == 0 ? new_str += sub_str : new_str += s }
  new_str[4..-1]
end 

```

# android - 如何以编程方式设置默认启动器应用程序？

> ID：12865367
> 
> 赞同：5
> 
> 时间：2012-10-12T18:55:05.407
> 
> 标签：android, launcher, android-launcher

> **可能重复：**
> [Android：更改默认 Home 应用程序](https://stackoverflow.com/questions/3836215/android-change-default-home-application)

我想创建一个像“ [Home Switcher](https://play.google.com/store/apps/details?id=ymst.android.homeswitcher&hl=en) ”这样的程序，它可以以编程方式设置默认启动器。我还没有编写代码，但可以弄清楚如何找到可用的启动器应用程序，但我不知道如何以编程方式设置默认值。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T18:59:34.050

这是不可能的，除非可能是通过一些安全漏洞。我会调查它并尝试修复这个缺陷，假设这个应用程序确实有效。

有根设备应该能够做到这一点，但不是无根设备。

* * *

**更新**

据我所知，这些应用程序实际上并没有设置默认主页。他们只是`startActivity()`用`MAIN`/调用`LAUNCHER` `Intent`，`createChooser()`用于强制出现选择器对话框，让用户有机会选择主屏幕并将其设为默认值。这是完全合法的，因为它需要用户参与该过程。

至少，其中三个以这种方式工作，而一个在尝试设置主屏幕时简单地崩溃。

# java - Scala 的并发范式与 Go 相比如何？

> ID：12865375
> 
> 赞同：3
> 
> 时间：2012-10-12T18:55:48.247
> 
> 标签：java, scala, concurrency, jvm, go

与传统的 Java 线程等相比，我读到了 Go 如何使与并发相关的开发变得非常容易且不易出错。

Scala 的并发库与 Go 相比如何？它们是否有相似之处，或者 Go 在这方面仍然领先？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T23:31:10.013

Scala 没有像 go 这样的内置并发原语，但是有很多用于并发的库和包。[即使有了与CSP](http://en.wikipedia.org/wiki/Communicating_sequential_processes)类似的标准库[Actors](http://www.scala-lang.org/node/242) ，并发模式也随之而来。

不要忘记[akka](http://akka.io/)。

说到 CSP，go 并不领先。他们只是让它更容易忍受和使用一致。以二郎为例。他们现在使用 CSP 很长时间了。

# odata - 带有日期时间过滤器的 Tridion OData 查询 - 错误：日期时间不是实体的属性

> ID：12865376
> 
> 赞同：8
> 
> 时间：2012-10-12T18:55:50.623
> 
> 标签：odata, tridion, tridion-2011, tridion-content-delivery

我正在尝试使用 .net 客户端查询 OData 以获取特定 DateTime 内的 Last Published 组件。它总是失败并出现异常`'datetime' is not property of entity: 'com.tridion.storage.ComponentMeta'`

```
var lastPubComponents = _client.Components
                               .Where(p => p.PublicationId == sitePubId && p.LastPublishDate > Convert.ToDateTime(DateTime.Now.ToString("yyyy-MM-ddThh:mm:ss")))
                               .ToList(); 
```

当我检查构造的 Odata URL 时，它看起来如下所示，我尝试使用来自浏览器的相同 URL 只是为了仔细检查我得到了预期的相同错误。

**我尝试使用 LINQ 时的 Odata URL**

```
/cd_webservice/odata.svc/Components?$filter=PublicationId eq 59 and LastPublishDate ge datetime'2012-10-11T09:22:14' 
```

我尝试`datetime`从上面的 URL 中删除字符串并再次从浏览器中检查。此 URL 按预期工作，我得到了正确的结果。

**以下是 URL（工作不带日期时间）**

```
/cd_webservice/odata.svc/Components?$filter=PublicationId eq 59 and LastPublishDate ge '2012-10-11T09:22:14' 
```

这让我认为 LINQ 和/或 .net 客户端组合有问题。

我尝试使用不同的日期时间格式组合，我得到了同样的错误。当我检查 Odata 标准时，建议使用`datetime`字符串，但这是我遇到的问题。

有人知道如何从 LINQ 代码调试/解决这个问题吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T06:53:17.837

[OData 规范确实提到了在http://www.odata.org/documentation/overview#AbstractTypeSystem](http://www.odata.org/documentation/overview#AbstractTypeSystem)中使用“LastPublishDate ge datetime'2012-10-11T09:22:14'”等结构进行查询的可能性， 但这并未实现产品。但是，产品中包含 OData 规范允许用于过滤的日期方法 ( [http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption](http://www.odata.org/documentation/uri-conventions#FilterSystemQueryOption) )。它们是 day()、hour()、minute()、month()、second() 和 year()，这基本上会转化为您的噩梦查询：

```
DateTime timeNow = DateTime.Now;
int yearNow = timeNow.Year;
int monthNow = timeNow.Month;
int dayNow = timeNow.Day;
int hourNow = timeNow.Hour;
int minuteNow = timeNow.Minute;
int secondNow = timeNow.Second;
var lastPubComponents = service.Components
     .Where(p => p.PublicationId == 3 && 
            (p.LastPublishDate.Value.Year > yearNow || 
              (p.LastPublishDate.Value.Year == yearNow && p.LastPublishDate.Value.Month > monthNow) ||
               (p.LastPublishDate.Value.Year == yearNow && p.LastPublishDate.Value.Month == monthNow && p.LastPublishDate.Value.Day > dayNow) ||
               (p.LastPublishDate.Value.Year == yearNow && p.LastPublishDate.Value.Month == monthNow && p.LastPublishDate.Value.Day == dayNow && p.LastPublishDate.Value.Hour > hourNow) ||
               (p.LastPublishDate.Value.Year == yearNow && p.LastPublishDate.Value.Month == monthNow && p.LastPublishDate.Value.Day == dayNow && p.LastPublishDate.Value.Hour == hourNow && p.LastPublishDate.Value.Minute > minuteNow) ||
               (p.LastPublishDate.Value.Year == yearNow && p.LastPublishDate.Value.Month == monthNow && p.LastPublishDate.Value.Day == dayNow && p.LastPublishDate.Value.Hour == hourNow && p.LastPublishDate.Value.Minute == minuteNow && p.LastPublishDate.Value.Second > secondNow)
              )
             )
     .ToList(); 
```

希望这可以帮助。

问候，丹尼尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:59:53.043

试试这个

```
var lastPubComponents = _client.Components
                               .Where(p => p.PublicationId == sitePubId && p.LastPublishDate.ToString("yyyyMMdd") < DateTime.Now.ToString("yyyyMMdd")))
                               .ToList(); 
```

# wicket - 找不到 StringValidator.maximumLength（int 长度）的资源键

> ID：12865377
> 
> 赞同：0
> 
> 时间：2012-10-12T18:55:51.263
> 
> 标签：wicket

我正在将我的 Wicket Web 应用程序从 1.5.8 迁移到 6.1.1。作为此过程的一部分，我正在更新我的文本字段的验证器。我的验证器的资源密钥`TextArea`不再被识别，我得到了一个标准

```
'sComments' is longer than the maximum of 250 characters. 
```

使用我认为是它的资源密钥的闪存消息而不是我所期望的：

```
Your comments have a length of 255, which is longer than the maximum of
250 characters that we allow. Please would you amend your comments and try again. 
```

有没有其他人遇到过这个问题，或者可以帮我命名我的资源密钥以使其在 Wicket 6.1.1 中工作？

我的旧 1.5.8 资源密钥

```
sComments.StringValidator.maximum 
```

在 Wicket 6.1.1 中工作（文档指出，出于向后兼容性的原因，仍然检查形式 StringValidator.* 的资源键），但我想在 Wicket 的未来版本失败之前转向“现代”的做事方式.

代码

```
<textarea wicket:id="sComments" cols="50" rows="5"
 tabindex="5"
></textarea> 
```

JAVA代码

```
private static final int M_N_MAX_LEN_MESSAGE = 250;

// The matching HTML "textarea" component has no maximum length attribute
TextArea<String> taComments = new TextArea<String>("sComments");
// taComments.add(new MaximumLengthValidator(M_N_MAX_LEN_MESSAGE));    1.5.8 code
taComments.add(StringValidator.maximumLength(M_N_MAX_LEN_MESSAGE));
frmForm.add(taComments); 
```

属性文件摘录

```
# The resource key that worked in Wicket 1.5.8
# sComments.StringValidator.maximum = Your comments have a length of \
# ${length}, which is longer than the maximum of ${maximum} characters \
# that we allow. Please would you amend your comments and try again.

# Wicket 6.1.1 resource key that does not work
sComments.RangeValidator.maximum = Your comments have a length of \
${length}, which is longer than the maximum of ${maximum} characters \
that we allow. Please would you amend your comments and try again. 
```

（我也试过：

```
sComments.RangeValidator.Maximum
sComments.RangeValidator.MaximumValidator
sComments.MaximumValidator
sComments.RangeValidator.minimum
sComments.RangeValidator.range
sComments.RangeValidator.exact 
```

没有成功。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:03:01.457

在我看来，该验证器的 Wicket 6.1.1 的正确资源键是表单`sComments.StringValidator.maximum`，尽管 StringValidator 的 javadoc 推荐了表单的资源键`sComments.RangeValidator.maximum`。

# animation - UIView 动画神器

> ID：12865380
> 
> 赞同：1
> 
> 时间：2012-10-12T18:55:59.213
> 
> 标签：animation, uiview, artifact

我遇到了一个有趣的工件，它放置在显示在阴影视图下的动画上，例如 a`UIActionSheet`或`UIAlertView`.

下面的图片显示了这个问题。我也看到这种情况发生`UIActivityInidicators`在白色背景上。

我已经看到了复制/粘贴弹出窗口，它显示在`UITextFields`白色背景后面的箭头上`UITextField`。

有任何想法吗？

![在此处输入图像描述](../Images/610431cce4c536dc5577dcf2e78689d6.png) ![在此处输入图像描述](../Images/d6c94e2c3ea8cf9620d1e2d2a469255a.png) ![在此处输入图像描述](../Images/4e4751f04b33f94ef06b4ae5f8f9abd2.png)

# java - 覆盖泛型

> ID：12865385
> 
> 赞同：-2
> 
> 时间：2012-10-12T18:56:12.213
> 
> 标签：java

我未能创建包含可比较的泛型的此类层次结构。我在这里想念什么？这会引发错误。

```
public class Generics <T extends Comparable<T>> 
    extends Parent<T extends Comparable<T>> {

    ArrayList<T> ar;

    public Generics() {
        ar = new ArrayList<>();
    }

    @Override
    public void add(T elt){
        ar.add(elt);
    }
} 
```

父类是：

```
public class Parent <T extends Comparable<T>>{
    int size =0;
    public Parent(){
        size=0;
    }

    public void add(T elt){
        size++;
    }
} 
```

在下面尝试“提取超类”。我尝试提取 ArrayList 和 add(T elt)。这是在以下配置上：

产品版本：NetBeans IDE 7.2（内部版本 201207171143）Java：1.7.0_07；Java HotSpot(TM) 64 位服务器 VM 23.3-b01 系统：在 amd64 上运行的 Linux 版本 3.2.0-30-generic；UTF-8；en_US (注)

```
public class Generics <T extends Comparable<T>> {

    ArrayList<T> ar;
    int size;

    public Generics() {
        ar = new ArrayList<>();
        size = 0;
    }

    public void add(T elt){
        ar.add(elt);
        size++;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T18:58:55.337

试试这个

```
public class Generics <T extends Comparable<T>> 
    extends Parent<T> {

    ArrayList<T> ar;

    public Generics() {
        ar = new ArrayList<>();
    }

    public void add(T elt){
        ar.add(elt);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:59:42.353

```
public class Generics <T extends Comparable<T>> extends Parent<T> {

ArrayList<T> ar;

public Generics() {
    ar = new ArrayList<T>();
}

    public void add(T elt){
      ar.add(elt);
    }
}

public class Parent <T extends Comparable<T>>{
int size =0;
   public Parent(){
       size=0;
    }

    public void add(T elt){
      size++;
    }
} 
```

# jquery - 使用 html 和 css 滑动 jQuery 图像

> ID：12865388
> 
> 赞同：0
> 
> 时间：2012-10-12T18:56:20.140
> 
> 标签：jquery, html

我在这里有一个演示来说明我的问题。

[http://www.ttmt.org.uk](http://www.ttmt.org.uk)

左边的红色块是一个图像，当你将鼠标悬停在它上面时，它会随着 jQuery 上下滑动。

我想这样做，但右侧块上没有图像。

右块是包含 div 中的两个 div。我的问题是我无法让它工作，任何人都可以看到我
哪里出错了。

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>

      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">

        #wrap{
            margin:50px
        }
        #box{
            height:215px;
            width:330px;
            float:left;
            position:relative;
          overflow:hidden;
            margin:0 15px 15px 0;
        }
        #box img{
            position:absolute;
        }

        #box2{
          width:330px;
          height:215px;
          position:relative;
          1top:300px;
          overflow:hidden;
        }
        #box2 .con{
          width:330px;
          height:215px;
        }
        #box2 #top{
          background:red;
        }
        #box2 #bottom{
          background:#eee;
        }
      </style>

      </head>

    <body>

      <div id="wrap">

        <div id="box">
          <a href=""><img src="box.png" alt="" /></a>
        </div>

        <div id="box2">

          <div id="boxWrap">
            <div id="top"  class="con">
            </div>

            <div id="bottom" class="con">
            </div>
          </div>  
        </div><!--boxWrap-->

        </div><!--wrap-->

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
      <script src="jquery.easing.1.3.js" type="text/javascript"></script>

      <script>
        $('#box a').hover(function(){
          $("img", this).stop().animate({top:"-215px"},{queue:false, duration:280});
        },function(){
          $("img", this).stop().animate({top:"0px"},{queue:false, duration:260});
        })
        //
        $('#box2').hover(function(){
          $('#boxWrap' ,this).stop().animate({top:"-215px"},{queue:false, duration:280});
        },function(){
          $('#boxWrap' ,this).stop().animate({top:"0px"},{queue:false, duration:260});
        })
      </script>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:03:32.107

你不应该改变/动画顶部，你应该改变/动画#boxwrap div的margin-top

我在下面修改了您的代码（检查 $('#box2').hover 部分）：

```
 <!DOCTYPE html>
    <html>
      <head>
      <title>Title of the document</title>

      <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/3.4.1/build/cssreset/cssreset-min.css">

      <style type="text/css">

        #wrap{
            margin:50px
        }
        #box{
            height:215px;
            width:330px;
            float:left;
            position:relative;
          overflow:hidden;
            margin:0 15px 15px 0;
        }
        #box img{
            position:absolute;
        }

        #box2{
          width:330px;
          height:215px;
          position:relative;
          overflow:hidden;
        }
        #box2 .con{
          width:330px;
          height:215px;
        }
        #box2 #top{
          background:red;
        }
        #box2 #bottom{
          background:#eee;
        }
      </style>

      </head>

    <body>

      <div id="wrap">

        <div id="box">
          <a href=""><img src="box.png" alt="" /></a>
        </div>

        <div id="box2">

          <div id="boxWrap">
            <div id="top"  class="con">
            </div>

            <div id="bottom" class="con">
            </div>
          </div>  
        </div><!--boxWrap-->

        </div><!--wrap-->

      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
      <script src="jquery.easing.1.3.js" type="text/javascript"></script>

      <script>
        $('#box a').hover(function(){
          $("img", this).stop().animate({top:"-215px"},{queue:false, duration:280});
        },function(){
          $("img", this).stop().animate({top:"0px"},{queue:false, duration:260});
        })
        //
        $('#box2').hover(function(){
          $('#boxWrap' ,this).stop().animate({"margin-top":"-215px"},{queue:false, duration:280});
        },function(){
          $('#boxWrap' ,this).stop().animate({"margin-top":"0px"},{queue:false, duration:260});
        })
      </script>

    </body>

    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:04:01.710

要使代码正常工作，您需要做的就是设置位置：相对于 boxWrap 的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:06:44.293

或者，您可以设置`position: relative;`On `#boxWrap`That 应该也可以。

# python - Tkinter 消息框的行为不像模态对话框

> ID：12865392
> 
> 赞同：6
> 
> 时间：2012-10-12T18:56:34.300
> 
> 标签：python, tkinter, messagebox

我将消息框用于一个简单的是/否问题，但不应回避这个问题，所以我想让它不可避免，而且似乎我有一个问题框。

```
messagebox.askyesno("text", "question?") 
```

然后我可以回到 tkinter 的根窗口，问题仍在等待响应，但如果我有

```
messagebox.askyesno("text", "question?")
messagebox.askyesno("text", "question?") 
```

打开第一个消息框后，我仍然可以返回 tkinter 的根窗口，但使用另一个问题框我无法（就像我需要的那样）。这适用于我测试的每个消息框。谁能解释一下为什么会这样以及如何使第一个问题框不可避免，或者我只需要`messagebox`在我的实际问题框之前做一个空白。有什么我做错了，因为我认为消息框不应该关心它之前是否有一个消息框。

为了更好地说明我的观点，我开始整理一个简单且组织良好的示例，并且效果很好。我弄清楚有什么区别，当我`messagebox`第一次开始使用时，我想测试它的能力，并没有把它放在一个函数中。在一个函数中它完美地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T17:19:11.143

用于`grab_set`在消息框被回答之前保持焦点离开根目录。或者`wait_window()`在打开消息框后调用。只需要1个或其他

```
import tkinter as tk
from tkinter.messagebox import askyesno

def onClick():
    root.grab_set() # Prevent clicking root while messagebox is open
    ans = askyesno('Confirm', 'Press Yes / No')
    root.wait_window() # Prevent clicking root while messagebox is open
    if ans:
        print('Yes Pressed')
    else:
        print('No Pressed')

root = tk.Tk()

tk.Button(root, text='Click me', command=onClick).pack()

root.mainloop() 
```

# c# - WPF Canvas 项目和 DataTemplate

> ID：12865398
> 
> 赞同：2
> 
> 时间：2012-10-12T18:57:01.963
> 
> 标签：c#, wpf, datatemplate

如果我有一个 DataTemplate （或类似的东西），有没有一种方法可以在画布中使用非 UIElements？我觉得我以前做过这个，这是可能的，但我想不通。这是一些代码...

```
<Window x:Class="EntityTranslator.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:EntityTranslator"
        Title="MainWindow" Height="350" Width="525">

  <Window.Resources>
    <local:Entity x:Key="DesignEntity}" EntityName="Test" />

    <DataTemplate DataType="{x:Type local:Entity}">
      <StackPanel>
        <TextBlock Text="{Binding Name}"/>
      </StackPanel>
    </DataTemplate>
  </Window.Resources>

    <Grid>
    <Canvas>
      <local:Entity EntityName="Test" />
    </Canvas>
  </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:19:54.950

将它们包装在[ContentPresenter](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentpresenter.aspx)或[ContentControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)中，它们是可以在其内部托管任何对象类型的控件`Content`

```
<ContentPresenter>
    <local:Entity EntityName="Test" />
</ContentPresenter> 
```

将使用您的隐式自动`ContentPresenter`绘制项目`DataTemplate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:28:04.453

您的问题是您不能将模型项添加到面板，而只能添加 UI 元素。为此，您需要执行以下操作：

```
 <Window.Resources>
        <DataTemplate DataType="{x:Type WpfApplication2:Entity}">
            <StackPanel>
                <TextBlock Text="{Binding EntityName}"/>
            </StackPanel>
        </DataTemplate>
    </Window.Resources> 
```

您的资源，以及：

```
 <ListBox ItemsSource={Binding SomeEntityCollection}>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox> 
```

试试这个，你也可以从模型中设置 X 和 Y 属性，设置 ItemsContainerStyle。希望这对你有用...

# android - ViewPagerIndicator 编译错误'dividerPadding 无法解决'

> ID：12865407
> 
> 赞同：1
> 
> 时间：2012-10-12T18:57:42.617
> 
> 标签：android, viewpagerindicator

我一辈子都无法编译**ViewPagerIndicator**以在我的项目中使用！

网址： http: [//viewpagerindicator.com/](http://viewpagerindicator.com/)
Github：[https ://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

**以下是我采取的步骤：**

1.  从[http://viewpagerindicator.com/](http://viewpagerindicator.com/)下载**版本 2.4.1 — 2012-09-11**。 （我也尝试过从**git** repo 克隆）

***   在 Eclipse`File->Import->Existing Projects into Workspace`中。

    *   在 Import 对话框中，我浏览到**Android-ViewPagerIndicator**目录并导入**示例**和**库**项目。

    *   然后 Eclipse 导入项目并显示以下编译错误：

    *   容器“Android Dependencies”引用了不存在的库“C:\Users\Jonathan\workspace\Android-ViewPagerIndicator\library\bin\library.jar”

    *   错误：错误：找不到与给定名称匹配的资源：attr 'android:dividerPadding'。

    *   dividerPadding 无法解析或不是字段

    *   SHOW_DIVIDER_NONE 无法解析为变量

    *   错误：错误：找不到与给定名称匹配的资源：attr 'android:showDividers'。

    *   SHOW_DIVIDER_MIDDLE 无法解析为变量

    *   在解决构建路径错误之前无法构建项目

    *   showDividers 无法解析或不是字段** 

 ****我的环境：**

*   视窗 7 SP 1
*   Eclipse 平台**4.2.0.I20120608-1400** - org.eclipse.platform.ide
*   已安装Android **2.3.3** (API 10)
*   已安装Android**支持库**
*   Java v7.0.70.11

这些错误看起来很愚蠢，为什么会缺少**基本的常量和属性？**

我已经用谷歌搜索这个该死的东西几个小时了，但什么也找不到，非常感谢您的**帮助**！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:53:46.873

ViewPagerIndicator 库需要使用 Android 4.0 或更高版本进行编译。

VPI 使用仅在 API 14 和更新版本中可用的常量，最终直接编译到类文件中。这就是为什么尽管使用来自新 API 的东西，您仍然可以通过 Android 1.6 使用该库。**

# php - Javascript 不能与 PHP 一起运行

> ID：12865408
> 
> 赞同：0
> 
> 时间：2012-10-12T18:57:42.840
> 
> 标签：php, jquery, web, web-deployment

我有一个漫画网站，它遍历数据库中的所有图像并将它们显示为缩略图。用户可以单击其中一张图像，在 viewcomic.php 模板上以正常大小查看它。

我想让用户按左右箭头来导航图像。

在 viewcomic.php 中，我有以下 javascript，它仅在我注释掉任何 php 时运行。

```
 //so if I comment out this line, it will run fine 
var imgArray = [<?php echo implode(',', getImages()) ?>];

$(document).ready(function() {
    var img = document.getElementById("theImage");
    alert("run");
    var imgIndex = 0;
    $(document).keydown(function (e) {
        if (e.which == 39) {
            alert("next image");
            img.src = imgArray[imgIndex++]
        }

    });
}); 
```

在萤火虫中，我收到以下错误：

```
invalid regular expression flag a
[Break On This Error] 
```

参考：

```
 var imgArray = [/images/all_comics/'Number_1.jpg',/images/all_comics/'Number_2.j... 
```

但是，Firebug 显示 imgArray 似乎正确地填充了 jscript 可读的字符串：

```
 var imgArray = [/images/all_comics/'Number_1.jpg',/images/all_comics/'Number_2.jpg',/images/all_comics/'Number_3.jpg',/images/all_comics/'Number_4.jpg',/images/all_comics/'Number_5.jpg']; 
```

任何想法，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:16:24.367

正如 Firebug 错误所述，由于您的数组值引用不完整，它会将它们解析为错误的正则表达式，因为斜杠是正则表达式分隔符。

代替

`/images/all_comics/'Number_1.jpg'`

您需要将整个值引用为

`'/images/all_comics/Number_1.jpg'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:05:31.873

您需要在字符串中添加引号，例如：

```
var imgArray = ['<?php echo implode("','", getImages()) ?>']; 
```

另一种可能性是使用json：

```
var imgArray = <?php echo json_encode(getImages())?>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:05:39.987

改变

```
var imgArray = [<?php echo implode(',', getImages()) ?>]; 
```

至

```
var imgArray = ["<?php echo implode('","', getImages()) ?>"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T19:06:06.237

该`getImages()`函数似乎尝试引用字符串，但它仅引用文件名，而不是完整路径：

```
/images/all_comics/'Number_1.jpg' 
```

对比

```
'/images/all_comics/Number_1.jpg' 
```

这会导致`[]`声明中的语法不正确。

# php - 创建一个基于 PHP 的 API？

> ID：12865410
> 
> 赞同：1
> 
> 时间：2012-10-12T18:57:49.717
> 
> 标签：php, api, frameworks

我正在寻找有关如何构建基于 php 的 api 的框架（或教程/网站指南）。该 api 将由网站和移动应用程序访问。以下是规格：

1.  我需要能够创建 php 类并通过发布请求访问这些方法
2.  验证！用户需要登录（我猜这本身就是一个类），但最重要的是，尝试访问 api 的应用程序/系统首先需要提供有效的访问令牌

我调查了 Zend，但我不确定它是否能完成我想要的。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:01:55.463

试试 Symfony 2 加上 FOSUserBundle 和 FOSRestBundle。[在这里](http://williamdurand.fr/2012/08/02/rest-apis-with-symfony2-the-right-way/)你可以找到一个很好的教程，对我有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:11:10.933

您可以使用任何框架。我更喜欢使用 Zend，另一个开发者 Symfony，另一个 CakePHP 等。例如这篇关于如何使用 Zend 创建 REST Api 的文章 [http://www.chrisdanielson.com/2009/09/02/creating-a-php-rest-api-使用zend框架/](http://www.chrisdanielson.com/2009/09/02/creating-a-php-rest-api-using-the-zend-framework/)

您可以搜索其他框架的类似文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:05:22.690

[Symfony2 框架](http://symfony.com)对REST API 有很多很好的支持。FOSRestBundle[很](https://github.com/FriendsOfSymfony/FOSRestBundle)受欢迎，可以为您完成大部分 API 工作，他们刚刚在巴黎的开发者大会上发布了一段[关于 REEST API 的演讲视频。](http://symfony.com/video/designing-http-interfaces-and-restful-web-services/English)

对于身份验证，Symfony2 内置了用户身份验证（[文档](http://symfony.com/doc/current/book/security.html)）。大多数人还使用[FOSUSerBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)，它添加了用户注册、密码恢复等功能。

# mysql - 按部分字符串分组

> ID：12865411
> 
> 赞同：1
> 
> 时间：2012-10-12T18:57:58.297
> 
> 标签：mysql, group-by

这是我的桌子：

```
----------+-----------+--------------
45678-sm-w|   18      | Mens clothing
----------+-----------+--------------
45678-sm-b|   5       | Mens clothing
----------+-----------+--------------
2189-L-Wh |   4       | Juniors Clothing
----------+-----------+--------------
2189-L-Bl |   3       | Juniors Clothing
----------+---------- +-------------- 
```

这就是期望的结果：

```
----------+-----------+--------------
45678     |   23      | Mens clothing
----------+-----------+--------------
2189      |   7       | Juniors Clothing
----------+-----------+-------------- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T19:10:14.603

如果您正在选择数据，那么您可以使用以下内容：

```
select SUBSTRING_INDEX(col1, '-', 1) col1, 
  sum(col2) Total, 
  col3
from table1
group by SUBSTRING_INDEX(col1, '-', 1), SUBSTRING_INDEX(col3, ' ', 1)
order by col1 desc 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/86d78/5)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T19:22:37.327

你能改变桌子吗？`col1`通过拆分为三列（例如`id`、`size`和）来更改表是最有意义的`color`，这样您就可以按新`id`列进行分组：

```
-----+----+----+-----------+--------------
45678| sm | w  |   18      | Mens clothing
-----+----+----+-----------+--------------
45678| sm | b  |   5       | Mens clothing
-----+----+----+-----------+--------------
2189 |  L | Wh |   4       | Juniors Clothing
-----+----+----+-----------+--------------
2189 |  L | Bl |   3       | Juniors Clothing
-----+----+----+---------- +-------------- 
```

您可以通过使用`ALTER TABLE`添加您需要的三列并更改主键，使用`SUBSTRING_INDEX`and`UPDATE`提取和存储拆分值以及另一个`ALTER TABLE`用于清理来完成此操作。像这样的东西：

```
ALTER TABLE t
DROP PRIMARY KEY;

ALTER TABLE T
ADD id INT UNSIGNED NOT NULL,
ADD size VARCHAR(255),
ADD color VARCHAR(255),
ADD PRIMARY KEY (col1);

UPDATE TABLE t
SET id = CONVERT(SUBSTRING_INDEX(col1, '-', 1), UNSIGNED INTEGER),
SET size = SUBSTRING_INDEX(col1, '-', 2),
SET color = SUBSTRING_INDEX(col1, '-', 3);

ALTER TABLE t
DROP COLUMN col1; 
```

* * *

如果您无法更改表，则可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)提取所需的 id 号：

```
SELECT SUBSTRING_INDEX(col1, '-', 1), col2, col3 FROM table; 
```

给出：

```
-----+-----------+--------------
45678|   18      | Mens clothing
-----+-----------+--------------
45678|   5       | Mens clothing
-----+-----------+--------------
2189 |   4       | Juniors Clothing
-----+-----------+--------------
2189 |   3       | Juniors Clothing
-----+---------- +-------------- 
```

对于最终查询，我将使用一个`SELECT`来提取您需要的 id，并使用一个外部`SELECT`来进行分组：

```
SELECT id, SUM(col2) AS total, col3
FROM 
    (SELECT SUBSTRING_INDEX(col1, '-', 1) AS id, col2, col3
    FROM table) AS t
GROUP BY id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:03:54.673

将第一列转换为数字，将索引添加到新创建的列，并在该列上按总和运行一个组。

```
update table set `left`=CAST(col1 AS SIGNED );

select `left`,sum(*),`col3` from table; 
```

# sql - 如何判断一个日期是否是假期

> ID：12865412
> 
> 赞同：0
> 
> 时间：2012-10-12T18:58:23.727
> 
> 标签：sql, vb.net, date

我需要确定接下来的两个连续工作日是否是假期（美国工作日），不包括周末。

我为解决这个问题所做的努力：

```
todayVariable = Date.Now() 
```

取这个变量的日期部分，如果是 1 或 7，那意味着它是一个周末，所以我将不理会它。但是，我不知道如何确定工作日是否不是假期。例如，我如何获得未来两年所有法定假日的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-14T04:58:07.340

如果明天是假期，用这个来回答：

```
Dim todayVariable As Date = Today
Debug.Print(isHoliday(todayVariable.AddDays(1)))

Function isHoliday(ByVal dt As Date)
    Return getHolidayList(dt.Year).Any(Function(x) x = dt)
End Function 
```

下面的代码将计算美国联邦假期的日期。这种方法的一个缺点是，由于规则是硬编码的，我需要在国会更改规则的罕见事件中更改代码。对于我的内部软件来说这不是问题，但对于其他人来说可能是这样。

此外，我不计算复活节，因为那不是美国联邦假日。参见[Nature (1876) 计算复活节日期的算法](http://www.smart.net/~mmontes/nature1876.html)

```
Public Function getHolidayList(ByVal vYear As Integer) As List(Of Date)

    Dim FirstWeek As Integer = 1
    Dim SecondWeek As Integer = 2
    Dim ThirdWeek As Integer = 3
    Dim FourthWeek As Integer = 4
    Dim LastWeek As Integer = 5

    Dim HolidayList As New List(Of Date)

    '   http://www.usa.gov/citizens/holidays.shtml      
    '   http://archive.opm.gov/operating_status_schedules/fedhol/2013.asp

    ' New Year's Day            Jan 1
    HolidayList.Add(DateSerial(vYear, 1, 1))

    ' Martin Luther King, Jr. third Mon in Jan
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 1, 1), DayOfWeek.Monday, ThirdWeek))

    ' Washington's Birthday third Mon in Feb
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 2, 1), DayOfWeek.Monday, ThirdWeek))

    ' Memorial Day          last Mon in May
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 5, 1), DayOfWeek.Monday, LastWeek))

    ' Independence Day      July 4
    HolidayList.Add(DateSerial(vYear, 7, 4))

    ' Labor Day             first Mon in Sept
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 9, 1), DayOfWeek.Monday, FirstWeek))

    ' Columbus Day          second Mon in Oct
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 10, 1), DayOfWeek.Monday, SecondWeek))

    ' Veterans Day          Nov 11
    HolidayList.Add(DateSerial(vYear, 11, 11))

    ' Thanksgiving Day      fourth Thur in Nov
    HolidayList.Add(GetNthDayOfNthWeek(DateSerial(vYear, 11, 1), DayOfWeek.Thursday, FourthWeek))

    ' Christmas Day         Dec 25
    HolidayList.Add(DateSerial(vYear, 12, 25))

    'saturday holidays are moved to Fri; Sun to Mon
    For i As Integer = 0 To HolidayList.Count - 1
        Dim dt As Date = HolidayList(i)
        If dt.DayOfWeek = DayOfWeek.Saturday Then
            HolidayList(i) = dt.AddDays(-1)
        End If
        If dt.DayOfWeek = DayOfWeek.Sunday Then
            HolidayList(i) = dt.AddDays(1)
        End If
    Next

    'return
    Return HolidayList

End Function

Private Function GetNthDayOfNthWeek(ByVal dt As Date, ByVal DayofWeek As Integer, ByVal WhichWeek As Integer) As Date
    'specify which day of which week of a month and this function will get the date
    'this function uses the month and year of the date provided

    'get first day of the given date
    Dim dtFirst As Date = DateSerial(dt.Year, dt.Month, 1)

    'get first DayOfWeek of the month
    Dim dtRet As Date = dtFirst.AddDays(6 - dtFirst.AddDays(-(DayofWeek + 1)).DayOfWeek)

    'get which week
    dtRet = dtRet.AddDays((WhichWeek - 1) * 7)

    'if day is past end of month then adjust backwards a week
    If dtRet >= dtFirst.AddMonths(1) Then
        dtRet = dtRet.AddDays(-7)
    End If

    'return
    Return dtRet

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:49:32.900

没有一个普遍认可的美国官方假期清单。最接近的可能是[联邦假日](http://en.wikipedia.org/wiki/Federal_holidays_in_the_United_States)日历，但其中包括大多数企业保持营业的日子，例如华盛顿生日和哥伦布日。

许多企业选择将他们的假期放在数据库表中或合并到日历表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T10:29:16.360

正如其他人已经指出的那样，似乎没有可以“计算”或简单地“到达某个地方”的假期列表。您必须对适用的日期列表进行硬编码。

关于您的描述的一些评论，以帮助您避免任何其他问题：

Date.Now 给出“现在”的日期和时间。如果您想在不考虑时间的情况下比较日期，您可以使用 Date.Today。

dateValue.DatePart 确实为您提供了日期部分（年、月、日）。您可能想知道星期几（星期日，星期一，...）。这是这样的：

```
 Dim dayValue As System.DayOfWeek = dateValue.DayOfWeek 
```

结果是一个整数 Enum，其值为 Sunday(=0)、Monday(=1) 等等。

为避免混淆：dateValue (dateValue.Day) 的 Day 属性为您提供一个月中的天数 (1..31)。

# mysql - 简单计数Mysql查询

> ID：12865414
> 
> 赞同：0
> 
> 时间：2012-10-12T18:58:25.883
> 
> 标签：mysql, count

```
receipt_id           order_id
1                       A
2                       B
3                       B
4                       C
5                       C 
```

显示该表中order_id计数大于1的所有记录的sql代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T18:59:31.977

你只需要一个聚合函数`GROUP BY`

```
select order_id
from yourtable
group by order_id
having count(order_id) > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8887e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:00:22.723

试试这个：

```
 Select * from table where order_id in (select  distinct order_id
 from table
 group by order_id
 having count(order_id) > 1) 
```

**[演示](http://sqlfiddle.com/#!2/96d2e/4/0)**

# mysql - App.objects.get(foo=bar) 没有 'order_by' 属性

> ID：12865418
> 
> 赞同：0
> 
> 时间：2012-10-12T18:58:30.067
> 
> 标签：mysql, database, django, postgresql, orm

我正在做一个查询，需要在 TODAY 的一个对象上获得最大票数。我试过`max_votes = App.objects.get(day=today).order_by("-votes")[0]`了，但这给了我一个属性错误。当我这样做时，我没有得到那个错误`max_votes = Day.objects.all().order_by("-votes")[0]`

如何正确获得对今天的一个对象的最大投票数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:02:56.610

好的，所以 get() 应该只返回一个对象。get() 是为按主键获取而设计的。如果它有多个具有相同属性的对象，它会给你一个错误。您可能正在寻找的是[filter()](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)

所以你可以做这样的事情

```
max_votes = App.objects.filter(day=today).order_by("-votes")[0] 
```

# javascript - Javascript数组构造函数属性不起作用

> ID：12865419
> 
> 赞同：4
> 
> 时间：2012-10-12T18:58:37.327
> 
> 标签：javascript, arrays

任何对象的 Constructor 属性都返回其构造函数，但它不适用于 Array。

```
var o={};
o.constructor; --> returns Object()

var a=new Array();
a.constructor; --> Expecting Array() but it returns [undefined] 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:36:05.257

对象的`constructor`属性将引用一个函数。而不是检查变量是否包含数组，请执行以下操作：

```
if (Object.prototype.toString.call(a)==='[object Array]') alert('Array!'); 
```

建议的 a.length 解决方法不会 100% 起作用，因为可能有一个具有长度属性的对象而不是实际的数组。

# java - 我做了一个程序，在循环中随机生成 0 和 1。如何使循环在程序连续生成十个 0 时停止？

> ID：12865421
> 
> 赞同：0
> 
> 时间：2012-10-12T18:58:52.760
> 
> 标签：java, string, math, loops, random

这是我到目前为止的鳕鱼：

```
public class Laboratoire05E {
public static void main(String[] args) {

    int number = 0;
    int counter = 0;

     do {
        bin = (int) (Math.random()*2);
        System.out.print(bin);
        counter++;

        if(counter>=80) {
            System.out.print("\n");
            counter = counter-80;
            }
        } while (bin < 2);
} 
```

}

控制台的输出如下：

01000111000011101011010011011000000100100110100101011011010100111011111110110111 00101100001001100010001100101001101110011000110110111010100010011111000101110011 00000010111101011110100100100100000101001111000110001101010011000001110100000011 10100001001011100110100110010011100110001110100111111110111101111000010100001110 11011001110001101111110111010111111110100110100000100001011100011100011001000101 01001111111011001101000010111010111010111100001101010001100001101011111010001111 00110010110101100010000101001111011111

这会无限期地持续下去。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T19:02:52.337

请记住，您的循环可能会连续找到 10 个 0 `(.5^10) = 0.0977 %`。如果您增加该数量，您可能需要额外检查何时`counter`超过生成的数字数量的某个阈值。

```
int zeroCount = 0
do {
    bin = (int) (Math.random()*2);
    System.out.print(bin);
    counter++;

    // Check for 10 in row:
    if(bin == 0) {
        zeroCount ++;
    } else {
        zeroCount = 0;
    }
    if(zeroCount == 10) {
        break;  // Exit loop
    }

    if(counter>=80) {
        System.out.print("\n");
        counter = counter-80;
        }
} while (bin < 2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T19:14:58.270

创建一个`Random`可以稍微更有效

```
Random rand = new Random();
for (int i = 1; i <= 10; i++) {
    int bin = rand.nextInt(2);
    System.out.print(bin);
    if (bin == 1) i = 0;
} 
```

打印例如：

> 111101001011001001011000111100010110011001011111011100001110100011100100100101101011110110111101101010110111000000110111011010111001101111010100111011000000101011000100000010001001010010011100100011111100010100011101101111100100111110110101101010111010001111111010000101010011100110111100010001100011011011101001000010001001010010110000011000001011101001110001111110000101101100011100111110000010000010001100000001011110110000110000001000100010001010000111001111111111100101101111110101011000010101110000110010011111001100100010111001001010110100001111011001000101011101101010110110010010001000001011010101000001000101011001000101000001111100111011110111101100010010110100001111011111110000011001010111100101100100110101101101000011100101011010111001110011110011110010001110001111001101000001111001001100101101010111101000000101011011110100001001100000111100000101111010111011000010110011001010011000001001101001100011101100001000100110101011000100010010001011100100100010000111111010001010000001101011010101101001000110110011110000100101100100000000101001100011110110000000000

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T19:24:00.933

逐位解决方案很有趣...

```
int mask = 0x3FF; // masks last 10 bits
int buffer = mask; // initialize buffer to all ones

while ((mask & buffer) != 0) {
    int digit = (int) (Math.random() * 2);
    buffer = (buffer << 1) | digit;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T19:08:41.160

1.  在循环外将计数器变量初始化为零
2.  如果随机结果为 0，则递增计数器，否则将计数器重置为 0
3.  如果计数器 == 10，则中断

# asp.net-mvc-3 - mvc3 的模型绑定以在同一视图上编辑表单数据

> ID：12865424
> 
> 赞同：0
> 
> 时间：2012-10-12T18:58:57.360
> 
> 标签：asp.net-mvc-3, model-binding

我是 MVC3 的新手，经过 2 天的阅读，我找不到我做错了什么。这是场景：

我有一个强类型视图：

```
<%@ Page Title="" Language="C#" 
MasterPageFile="~/Views/Shared/NestedMasterPage.Master"    
Inherits="System.Web.Mvc.ViewPage<AdminToolMVC.Models.PageModels.MembershipVM>" %>

<% using (Html.BeginForm("UpdateUser", "Admin")) 
{ %>
   <%: Html.CheckBoxFor(m => m.Tab6VM.Programs[0].Selected, 
      new { id = "prog1" })%>
   <%: Model.Tab6VM.Programs[0].Description %></br>
   <%: Html.CheckBoxFor(m => m.Tab6VM.Programs[1].Selected, 
      new { id = "prog2" })%>
   <%: Model.Tab6VM.Programs[1].Description %></br>
   <%: Html.CheckBoxFor(m => m.Tab6VM.Programs[2].Selected, 
     new { id = "prog3" })%>
   <%: Model.Tab6VM.Programs[2].Description %></br>
   <%: Html.CheckBoxFor(m => m.Tab6VM.Programs[3].Selected, 
     new { id = "prog4" })%>
   <%: Model.Tab6VM.Programs[3].Description %></br>
   <input type="submit" id="btnUpdate"  value="Update"  />
<%} %> 
```

在我的管理控制器中：

```
public ActionResult Index()
{
     //return some view
}

[HttpPost]
    public ActionResult UpdateUser(MembershipVM pageModel)  
    {
        UserAdminDW dataWriter;
        Models.PageModels.MembershipVM = 
          new  Models.PageModels.MembershipViewModel();
        try
        {
            model = StateHelper.MEMBERSHIP;
        }
        catch (Exception e)
        {

            return RedirectToAction("SessionExpired", "Error");
        }
    } 
```

我的印象是，我的强类型视图页面应该将用户在表单中更改的数据发送到我的 AdminController 类中的 UpdateUser 方法。

但相反，我得到的是“没有为此对象定义的无参数构造函数”。错误。

我试图从视图中向控制器调用添加一个参数，但是通过控制器的页面模型为空。我要做的就是在页面上显示用户数据后，让用户更新一些信息并将其发送回控制器，这样我就可以将其保存在数据库中。我错过了什么？我没有使用 Razor 引擎，只使用经典的 MVC3。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:08:36.347

当模型绑定器尝试填充对象（视图模型）并且找不到公共/无参数构造函数（哦，rly？）时，会发生错误。

*例子*

**视图模型**

```
public class CustomerViewModel {
    public CustomerViewModel() { // <- public constructor without params.
        Created = DateTime.Now;
    }

    public Guid CustomerId { get; set; }
    public DateTime Created { get; set; }
    public AddressViewModel Address { get; set; }
}

public class AddressViewModel {
    public AddressViewModel(Guid customerId) { // <- BOOM! AddressViewModel have none parameterless constructor, so it can't be created
        CustomerId = customerId;
    }        

    public Guid CustomerId { get; set; }
    public string Street { get; set; }
    public string ZipCode { get; set; }
    public string Country { get; set; }

    public CustomerViewModel Customer { get; set; }
} 
```

**行动**

```
[HttpPost]
public ActionResult UpdateCustomer(CustomerViewModel customer) {
    // when modelbinder are trying to create the 'customer', it sees that CustomerViewModel have an AddressViewModel(which have none parameterless constructor) property, and you know what happen.
} 
```

希望能帮助到你。

# c# - IsDirty 标志模式

> ID：12865425
> 
> 赞同：6
> 
> 时间：2012-10-12T18:59:00.103
> 
> 标签：c#, .net

我有一个 BLL 的基类，其中包括以下函数：

```
 public bool IsDirty { get; protected set; }

    internal void SetField<TParam>(ref TParam field, TParam value)
    {
        if (EqualityComparer<TParam>.Default.Equals(field, value) == false)
        {
            field = value;
            IsDirty = true;
        }
    } 
```

在继承基类的类中，我使用它作为 SET 对象的包装器，例如：

```
 public string UserName
    {
        get { return _userName; }
        set { SetField(ref _userName, value); }
    } 
```

我使用 IsDirty 属性来测试是否需要发布更新。如果至少其中一个属性发生更改，则保存到数据库。这适用于大多数类型，但集合和列表可以在不使用 set 的情况下更改。我为 Collection 编写了一个包装器，以便在 List 上有一个 IsDirty 标志，可以对其进行更改测试：

```
 public class CollectionChangeTracked<T> : Collection<T>
    {
        public bool IsDirty {get; set;}

        public CollectionChangeTracked()
        {
            IsDirty = false;
        }

        protected override void InsertItem(int index, T newItem)
        {
            base.InsertItem(index, newItem);
            IsDirty = true; 
        }

        protected override void SetItem(int index, T newItem)
        {
            base.SetItem(index, newItem);
            IsDirty = true;
        }

        protected override void RemoveItem(int index)
        {
            base.RemoveItem(index);
            IsDirty = true;
        }

        protected override void ClearItems()
        {
            base.ClearItems();
            IsDirty = true;
        }
    }
} 
```

问题是我现在必须测试 Classe 的 IsDirty 属性和任何 CollectionChangeTracked.IsDirty 标志以进行更新。我可以创建在一个地方执行测试的方法，例如：

```
 public CollectionChangeTracked<ApplicationRole> RolesList
    {
        get { return _rolesList; }
        set { SetField(ref _rolesList, value); }
    }

    public override bool IsDirty
    {
        get { return ResolveIsDirty(); }
        protected set { _isDirty = value; }

    private bool ResolveIsDirty()
    { 
        bool returnValue;

        if (_isDirty || RolesList.IsDirty)
            returnValue = true;
        else
            returnValue = false;

        return returnValue;
    } 
```

但似乎我应该能够提出一个更简洁的解决方案，允许包含 Collection 的类订阅 CollectionChangeTracked 对象的 IsDirty 更改并根据该更改更新 IsDirty。这是更好的方法吗？我将如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:11:53.177

您可以使用事件`ObservableCollection<T>`寄存器并在`CollectionChanged`引发事件时标记 IsDirty 标志。

```
...

ObservableCollection<int> myCollection = new ObservableCollection<int>();
myCollection.CollectionChanged += OnCollectionChanged;

...

public void OnCollectionChanged( Object sender, NotifyCollectionChangedEventArgs e )
{
   IsDirty = true;
} 
```

# java - 如何在 java.security 和策略文件中指定与平台无关的路径？

> ID：12865429
> 
> 赞同：0
> 
> 时间：2012-10-12T18:59:20.913
> 
> 标签：java, security

我想为我们的客户提供一个安全策略文件——Linux 和 Windows。在 java.security 文件中，我添加了一行指向我们的文件，但由于路径不同，我必须为 Windows 和 Linux 指定不同的文件

```
policy.url.3=file:/${our.home}/lib/OurSecurity.policy  # Windows
policy.url.3=file:${our.home}/lib/OurSecurity.policy   # Linux 
```

Windows 上需要“file:”之后的第一个“/”，因为变量 our.home 被定义为“C:\foo”。我在策略文件本身也有同样的问题：

```
grant codeBase "file:/${our.home}/-"   // Windows
grant codeBase "file:${our.home}/-"    // Linux 
```

我特别在寻找一种巧妙的方法来以独立于平台的方式指定 codeBase。顺便说一句，重新定义 our.home 并不是一个真正的选择，因为它需要在 FilePermission 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:30:04.733

如果是我，我会接受这样一个事实，即我需要不同的文件并通过删除“/”的脚本从 Windows 版本生成 linux 版本。

但是，如果您真的需要使用同一个文件，您可以通过定义另一个环境变量来表示 Windows 上的“/”并在 linux 上将其留空，从而将一种痛苦换成另一种痛苦。

```
# our.hack = "/" on windows
# our.hack = "" on linux
policy.url.3=file:${our.hack}${our.home}/lib/OurSecurity.policy 
```

也许 our.hack 不是生产环境中最好的名称，但您明白了。该变量不用于其他任何用途，因此不应干扰应用程序的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:03:02.277

为什么要使用相同的策略文件？
JRE 对于 Linux 和 Windows 是不同的，因此您应该遵循这一点并为每次安装保留不同的版本。*在这种*
情况下 ，IMO 没有维护 2 个文件的问题。 此外，我建议您将关注点集中在 java 更新可能会删除您的策略文件这一事实上。

# asp.net - 具有 SCOPE_IDENTITY 和 ADO.NET 参数化查询的 SQL Server 存储过程

> ID：12865433
> 
> 赞同：1
> 
> 时间：2012-10-12T18:59:34.050
> 
> 标签：asp.net, sql-server, stored-procedures

我的存储过程应该返回我新创建的行的标识，但事实并非如此。

存储过程语法（简而言之）：

```
Alter Procedure dbo.udsp_insert_record
    @record_title VARCHAR(100)
AS
BEGIN
    INSERT INTO tbl_records (RecordTitle) VALUES (@record_title)
    SELECT SCOPE_IDENTITY()
END 
```

当我在 SQL Server Management Studio 中执行该过程时，这将按预期工作——插入一个新行并返回其标识。但是，当我从我的网络应用程序执行时，使用下面的代码，我得到一个错误。

```
dim obj_command as New SqlCommand("udsp_insert_record",obj_connection)
obj_command.CommandType = CommandType.StoredProcedure
obj_command.Parameters.Add("@record_title",SqlDbType.VarChar).Value = "just testing"
dim n_new_record_id as Integer = obj_command.ExecuteScalar()
obj_command.Dispose()  'etc., etc. 
```

当它运行时，我收到错误

> *输入字符串的格式不正确*

`ExecuteScalar`与命令 就行了。

我的解释是 SQL Server 没有返回一个整数值——它必须返回一个对象、a`DBNull`或其他东西。

但这是为什么呢？和发生在同一范围内`INSERT`，`SELECT SCOPE_IDENTITY()`因此 SQL Server 交回的标识值必须是有效的（我通过 SQL Server Management Studio 进行的测试证明了这一点）。

我想我在某处读到，当您在 ADO.NET 中使用与 SQL Server 存储过程对话的参数化查询时，范围不是您所期望的，因为它实际上使用另一个存储过程来执行您要求的存储过程。这有什么好处吗？

有任何想法吗？

编辑：使用`SELECT CAST(SCOPE_IDENTITY() AS INT)`也不起作用。另外：即使我没有将 ExecuteScalar 的结果分配给 Integer 值，我也会收到此错误 - 即使我只是这样做，我也会收到相同的错误`response.write obj_command.ExecuteScalar()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:13:03.283

我会尝试稍微更改存储过程：

```
Alter Procedure dbo.udsp_insert_record
  @record_title VARCHAR(100)
AS
BEGIN
  INSERT INTO tbl_records (RecordTitle) VALUES (@record_title)
  SELECT CAST(SCOPE_IDENTITY() AS INT)
END 
```

据我记得，它`SCOPE_IDENTITY()`是十进制类型，因此您不能轻易将其转换为int。您可以在服务器上（正如我建议的那样）或在客户端上执行此操作，方法是`ExecuteScalar`将`Decimal`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:04:16.997

ExecuteScaler 始终返回对象数据类型。所以要从中检索整数值，你必须像这样转换它。

例如。

```
object id=cmd.ExecuteScaler(...........
if(id != null)
{   
 int newId=Convert.ToInt32(id);
} 
```

# objective-c - Objective-C 项目中的常量

> ID：12865434
> 
> 赞同：0
> 
> 时间：2012-10-12T18:59:35.173
> 
> 标签：objective-c, static, constants

我正在用 Cocos2D for iPhone 创建一个游戏。以下表达式出现在代码周围的几个地方：

```
CGFloat screenCenter = [CCDirector sharedDirector].winSize.width / 2.0; 
```

我想把它放在一个常量文件或类似文件中，这样表达式就不会在所有地方重复。一个想法是把

```
#define SCREEN_CENTER [CCDirector sharedDirector].winSize.width / 2.0 
```

并`Constants.h`根据需要导入。然而，我的印象是，在 Objective-C 中以`static const`某种能力使用更好的风格/实践。

我怎样才能`screenCenter`在一个地方声明，`static const`然后根据需要在整个代码中重新使用它？

这样做的一个潜在好处是只进行一次除法，而不是每次计算屏幕中心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:03:44.360

这不是编译时表达式，因此您不能将其设为`static const`.

如果要保留`#define`，则需要将括号包裹起来，否则可能会引入细微的错误。

您可能还需要考虑使用内联函数

```
inline CGFloat screenCenter() {
    return [CCDirector sharedDirector].winSize.width / 2.0f;
} 
```

或者你可以直接把它挂起来`CCDirector`。假设您不拥有该类，则可以使用类别

```
@interface CCDirector (FunkyStuff)
- (CGFloat)screenCenter;
@end

@implementation CCDirector (FunkyStuff)
- (CGFloat)screenCenter {
    return self.winSize.width / 2.0f;
}
@end

...
x = [[CCDirector sharedDirector] screenCenter]; 
```

为了增加方便，您甚至可以将其变成类方法。

# javascript - 在Javascript中添加/减去浮点数时出现奇怪的结果

> ID：12865437
> 
> 赞同：4
> 
> 时间：2012-10-12T18:59:38.170
> 
> 标签：javascript, addition, subtraction

我是第一次尝试 JavaScript。我的目标是构建一个小的“配置器”。在我的页面上，有 2 个按钮触发以下功能`onclick`：

```
function default()
{
 curPrice = parseFloat(document.getElementById('price').innerHTML);
 newPrice = curPrice-priceEngraving;
 document.getElementById('price').innerHTML=newPrice;
} 
```

另一个看起来像这样：

```
function engrave()
{
var str = document.getElementById('price').innerHTML;
newPrice = curPrice+priceEngraving;
document.getElementById('price').innerHTML=newPrice;
} 
```

`priceEngraving`定义为 1，#price 的“默认”`innerHtml`为 5.30。按下按钮 1 时，出现以下结果：
6.3

这没关系，并且是预期的结果（在末尾附加 0 并不太难）。

当触发按钮 #2 时，会出现以下结果：5.3000000000000004

我不知道我的代码中的问题在哪里。我也试过`++`and `--`（我不喜欢，因为如你所知，价格可能会发生变化）。

另外，我知道使用 JavaScript 时的安全问题，但这是唯一的光学问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:09:33.087

问题是某些数字不能精确地表示为浮点数。如果您总是想要 2 位小数，那么您可以在您的数字上使用方法`toFixed(2)`（[文档）。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

```
document.getElementById('price').innerHTML=newPrice.toFixed(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:06:25.497

你有浮点问题。有关详细信息，请参阅[此帖子](https://stackoverflow.com/questions/1458633/elegant-workaround-for-javascript-floating-point-number-problem)，这些问题已在此处详细介绍。基本上没有办法足够准确地映射你所拥有的东西。

# javascript - 简化 JavaScript 代码

> ID：12865438
> 
> 赞同：1
> 
> 时间：2012-10-12T18:59:41.697
> 
> 标签：javascript, jquery, input, checkbox

我想简化这段代码，并喜欢任何建议。

**页面结构：**

*   有10个不同的部分。
*   每个部分都有一个问题。
*   每个问题都有三个答案。
*   每个答案都有一个复选框。
*   当用户选中复选框时，会显示针对该特定答案的反馈。
*   当用户选中另一个复选框时，所有其他答案和复选框都会重置。

我已经创建了功能以使其在三个功能中工作。每个答案一个。为了使每个部分都能正常工作，我需要创建 30 个函数。我敢肯定有一个更简单的方法，我只是不知道从哪里开始。

**我的代码**

```
// Action 1
$('.choice input.choice-a:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-1 .mod3-6-1_choice_A .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-1 .mod3-6-1_choice_A .mod3-6-1_feedback").focus();
});
$('.choice input.choice-b:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-1 .mod3-6-1_choice_B .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-1 .mod3-6-1_choice_B .mod3-6-1_feedback").focus();

});
$('.choice input.choice-c:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-1 .mod3-6-1_choice_C .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-1 .mod3-6-1_choice_C .mod3-6-1_feedback").focus();
});
// Action 2
$('.choice input.choice-a:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-2 .mod3-6-1_choice_A .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-2 .mod3-6-1_choice_A .mod3-6-1_feedback").focus();
});
$('.choice input.choice-b:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-2 .mod3-6-1_choice_B .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-2 .mod3-6-1_choice_B .mod3-6-1_feedback").focus();

});
$('.choice input.choice-c:checkbox').on('change', function(){
    $('.choice input:checkbox').attr('checked', false);
    $(this).attr('checked', true);
    hide_choices();
    $("#action-2 .mod3-6-1_choice_C .mod3-6-1_feedback").removeClass("screen-reader");
    $("#action-2 .mod3-6-1_choice_C .mod3-6-1_feedback").focus();
}); 
```

Action 1 和 Action 2 之间唯一不同的是向用户显示反馈的父 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:07:07.740

一个简单的改进是使用单选按钮而不是复选框，您可以删除这些行：

```
$('.choice input:checkbox').attr('checked', false);
$(this).attr('checked', true); 
```

编辑。这是我将如何尝试的方法。输入元素需要 data-action="1" 和 data-choice="A" 属性。

```
$('.choice input').on('change', function(){
    var action = $(this).data('action');
    var choice = $(this).data('choice');

    $("#action-" + action).find(".mod3-6-1_choice_" + choice).find(".mod3-6-1_feedback").removeClass("screen-reader").focus();
}); 
```

# python - 装饰来自 twisted.internet.udp 的 Port 类

> ID：12865442
> 
> 赞同：1
> 
> 时间：2012-10-12T18:59:56.327
> 
> 标签：python, protocols, twisted, twisted.internet

有没有可能从 twisted.internet.udp 装饰 Port 类？我想修改 Port 类的某些方法的行为，使其不时丢失或重复......或延迟数据包。我的目标是“模拟”一些扰动并测试我自己的协议（在 UDP 之上设计）是否正确运行。

任何的想法 ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T21:30:42.993

您不想以`udp.Port`任何方式装饰或子类化或修改类的行为，除非通过向 Twisted 上游提交补丁。一方面，这个类真的应该是私有的；它从未打算供公众使用，它是`IReactorUDP`接口的实现细节。

其次，它不是 Twisted 中*唯一*的此类实现细节。另请参阅`twisted.internet.iocpreactor.udp.Port`，它并没有分享它的大部分实现。

你想要做的是简单地编写一个实现相同接口的包装器 - 实现的东西[`IUDPTransport`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IUDPTransport.html)- 然后`self.transport = MyPacketDelayingWrapper(self.transport)`在你的[`DatagramProtocol`](http://twistedmatrix.com/documents/current/api/twisted.internet.protocol.DatagramProtocol.html).

# c# - 自定义字符串解析

> ID：12865445
> 
> 赞同：-3
> 
> 时间：2012-10-12T19:00:13.893
> 
> 标签：c#, string, parsing, c#-4.0

我正在研究一个我想从时髦的字符串中获取用户名的作品。

例子：

*   a> Jacob+Delta+2012_Bio
*   b> Diana_Bio_smith_2011
*   c> Bio_5+10+2012+Steve00

我想**解析字符串**，并**删除特殊字符**和某些常用词，如 Bio、Year 和 Dates，并**得到如下所示的结果字符串**。

*   a> Delta 的 Jacob 想要将两者都放在一个数组中。
*   B>戴安娜·史密斯
*   c>史蒂夫

以下是我正在尝试的事情：

```
 class TestStringSplit
        {
            static void Main()
            {

 char[] delimiterChars = { ' ', ',', '.', ':', '\t', '_','+','-' };

                string text = "Jacob+Delta+2012_Bio";
                System.Console.WriteLine("Original text: '{0}'", text);

                string[] words = text.Split(delimiterChars);
                System.Console.WriteLine("{0} words in text:", words.Length);

                foreach (string s in words)
                {
                    System.Console.WriteLine(s);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:58:14.310

你可以这样做：

```
string[] originals = new[]
    {
        "Jacob+Delta+2012_Bio",
        "Diana_Bio_smith_2011",
        "Bio_5+10+2012+Steve00"
    };

string[] ignoreMe = new[]
    {
        "Bio", "bio", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "_", "+"
    };

IEnumerable<string[]> results = originals.Select(
    o => o.Split(ignoreMe, StringSplitOptions.RemoveEmptyEntries)); 
```

请注意，这会一次性完成剥离和拆分，这是一个巧妙的技巧。

# sql-server - 我如何加入这两个表？

> ID：12865449
> 
> 赞同：1
> 
> 时间：2012-10-12T19:00:23.153
> 
> 标签：sql-server, tsql

我在 SQL Server 中有 2 个表：

![在此处输入图像描述](../Images/05e44fcd32ad1d0ca6cebf98cba2677b.png)

现在我想写一个 select 语句来加入这 2 个表来获取`MatchId`,`Host name`和`Guest name`.

我尝试了什么：

```
select Match.Id, Team.Name, Team.Name 
from Match 
join Team on Match.HostId = Team.Id 
```

我得到的主机名和客人名是相同的。

```
select Match.Id, Team.Name, Team.Name 
from Match 
join Team on Match.HostId = Team.Id 
join Team on Match.GuestId = Team.Id 
```

我有错误。

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:03:12.550

您将需要查看[简单的连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT m.Id AS MatchId, h.Name AS HostName, g.Name AS GuestName
FROM Match AS m
INNER JOIN Team AS h ON m.HostId = h.Id
INNER JOIN Team AS g ON m.GuestId = g.Id 
```

您需要将 Match 表的 HostId 和 GuestId 分别加入到 Team 表中，以获取每个单独的团队名称。我使用别名来防止您在第二次尝试中看到的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T19:03:32.067

您只需要在桌子上加入两次：

```
select m.id MatchId, 
   h.name HostName, 
   g.name GuestName
from match m
left join team h
  on m.hostid = h.id
left join team g
  on m.guestid = g.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:07:51.227

假设 ID 用于链接两个表中的记录（即，虽然它是两个表的主键，但它也被用作外键）：

```
select m.HostId, m.GuestId, t.Name 
from Match m
left outer join Team t
    on m.id = t.id 
```

如果 ID 不同，您可以执行以下操作以将所有团队匹配到所有匹配项：

```
select m.HostId, m.GuestId, t.Name 
from Match m
cross join Team t 
```

如果这不是您所追求的，您可能需要向其中一个表添加外键，或者创建一个包含 MatchId 和 TeamId 的新表来链接两者），然后加入该表

```
create table MatchTeam
(
    MatchId bigint not null
    ,TeamId bigint not null
)

go

select m.HostId, m.GuestId, t.Name 
from Match m
left outer join MatchTeam mt
    on m.Id = mt.MatchId
left outer join Team t
    on mt.TeamId = t.id 
```

如果 hostid 和 guestid 与团队表相关：

```
select m.id MatchId
, h.Name HostName
, g.Name GuestName 
from Match m
left outer join Team h
    on m.HostId = h.id
left outer join Team g
    on m.GuestId = h.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:13:37.007

您收到错误的原因是因为`Match`是 SQL 中的关键字，因此您需要使用`'Match'`或为您的表使用不同的名称来转义它。

我将只接受亚当的查询并根据您的需要对其进行修改：

```
SELECT m.Id AS MatchId, h.Name AS HostName, g.Name AS GuestName
FROM `Match` AS m
INNER JOIN Team AS h ON m.HostId = h.Id
INNER JOIN Team AS g ON m.GuestId = g.Id 
```

# matlab - MATLAB 中的符号参数

> ID：12865450
> 
> 赞同：1
> 
> 时间：2012-10-12T19:00:30.917
> 
> 标签：matlab, parameters

我最近（实际上是昨天）开始尝试为几个即将进行的项目学习 MATLAB。我有一个简单的问题。对于其中一个项目，我必须编写一个函数来接收两个符号方程*f*和*g*。如果我在使用之前尝试运行我的函数`syms x y`（因为*f*和*g*仅包含*x*或*y*变量），我会收到未定义的变量错误。我明白这意味着什么，但我想知道无论如何只传递*f*和*g*而不运行`syms x y`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:48:01.243

我不确定您的问题到底出在哪里，但这就是您可以使用两种稍微相似且方便的方式进行新函数定义的方法。

**使用函数句柄**：将函数输入参数传递给句柄

```
x = (-1:0.25:1); % input vals
f = @(x) cos(2*pi*x).^2; 
g = @(x) sin(2*pi*x).^2; 

h = @(f1, f2) f1 + f2;
h(f(x), g(x)) 
```

**使用符号方程**：`sym`仅在构建方程时使用

```
% symbolic
f = sym('cos(2*pi*x)^2');
g = sym('sin(2*pi*x)^2');

h = f + g;
subs(h, x) 
```

显然，您可以将上述内容推广到多个自变量，即`(x,y).`希望这很接近！

# iphone - iphone应用程序图标不显示

> ID：12865452
> 
> 赞同：0
> 
> 时间：2012-10-12T19:00:36.877
> 
> 标签：iphone, objective-c, icons, emulation

> **可能重复：**
> [iPhone Icon@2x.png 未显示在 Retina 显示屏中](https://stackoverflow.com/questions/3916361/iphone-icon2x-png-not-showing-in-retina-display)

在构建 Iphone 应用程序时，困扰我的一个问题是我似乎无法在模拟器上显示自己的图标。我尝试过的事情：

1.  将图标拖入构建摘要 -> 应用程序图标
2.  手动编辑 Info.plist 文件
3.  关闭 PNG 压缩
4.  重命名文件
5.  使用不同的文件

我还会注意到启动图像确实有效。我在这里不知所措，我可能会错过什么吗？这通常很简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:05:28.417

更多信息在这里：http: [//developer.apple.com/iphone/library/qa/qa2010/qa1686.html#IPHONEADDITEMS](http://developer.apple.com/iphone/library/qa/qa2010/qa1686.html#IPHONEADDITEMS)

# jsp - 在 JSP 页面上提交后禁用提交表单按钮出错

> ID：12865456
> 
> 赞同：0
> 
> 时间：2012-10-12T19:00:58.123
> 
> 标签：jsp

所以我有一个表单，我想在用户单击一次后禁用表单上的提交“按钮”以防止多次提交，我想知道如何才能实现这个结果。所以代码是这样的：

```
<form id = "id" name= "blah" method = "post" onsubmit="$('input[type=submit]').attr('disabled', 'disabled');" ...>
items for the form goes here
<input title="Save" type="submit" value="Save" tabindex="20"/> 
```

但我在控制台中遇到错误：“错误：属性‘$’的值为 null 或未定义，不是函数对象”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:17:36.340

使用以下代码

onsubmit="document.getElementById('submit').disabled = 1;"

让我知道它是否不起作用。

# javascript - 使用没有预加载器功能的 SoundJS

> ID：12865459
> 
> 赞同：1
> 
> 时间：2012-10-12T19:01:22.943
> 
> 标签：javascript

有没有人有一个如何在不使用 preloaderJS 的情况下使用 SoundJS 的示例。

我很遗憾地看到在[Git hub](https://github.com/CreateJS/SoundJS/tree/master/examples)上他们只有使用我不需要的预加载器的示例。

我正在尝试以下操作，但声音实例未播放：

> var instance = createjs.SoundJS.play("/sounds/mysound.mp3"); //instance.playState 的值导致“playFailed”

任何人都知道如何获得更具体的错误信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T00:08:00.843

我知道这是一个非常古老的帖子，但是：

如果你没有使用 PreloaderJS，你需要先通过 registerSound() 注册声音：

```
 createjs.Sound.registerSound("/sounds/mysound.mp3", "mysoundID"); 
```

然后，当你想触发它时：

```
 createjs.Sound.play("mysoundID"); 
```

此外，您可能希望创建文件的 ogg 版本（“|”作为分隔符）并在同一 ID 下注册两者：

```
 createjs.Sound.registerSound("/sounds/mysound.mp3|/sounds/mysound.ogg", "mysoundID"); 
```

*SoundJS 将根据当前浏览器确定调用哪一个。

欲了解更多信息： [http ://www.createjs.com/Docs/SoundJS/classes/Sound.html](http://www.createjs.com/Docs/SoundJS/classes/Sound.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T11:41:22.673

是的，从死里复活，因为这个问题本身仍然是正确的（哈！双关语）。

从 SoundJS 0.6.1 开始（来自[http://createjs.com/docs/soundjs/classes/Sound.html](http://createjs.com/docs/soundjs/classes/Sound.html)的文档）：

"**注册和预加载** 在播放声音之前，必须先注册它。您可以使用 registerSound 执行此操作，或使用 registerSounds 注册多个声音。如果您在尝试使用 play 播放之前未注册声音，或者使用创建它createInstance，音源会自动注册，但是播放会失败，因为源还没有准备好。如果你使用PreloadJS，在预加载声音时会为你处理注册。建议在内部使用注册函数或预加载声音在外部使用 PreloadJS，以便在您想要使用它们时准备好它们。”

在内存有限的移动设备（例如 512MB iPad Mini）上开发声音丰富的应用程序时，这是相当成问题的。

这就是其他声音库（如 Howler）成为不错选择的地方。

# visual-studio-2010 - VS 2010 项目不断过时

> ID：12865462
> 
> 赞同：1
> 
> 时间：2012-10-12T19:01:35.493
> 
> 标签：visual-studio-2010

我是这个网站的新手，如果我在错误的地方问这个问题，请原谅我。

我有用于编程课程的 VS 2010。现在我遇到了一个问题，我编写了一个简单的“Hello World”程序，当我尝试运行它时，它显示“项目已过期。”

“世界-调试 Win32”

然后它要求我运行它，如果我选择“是”，我会收到以下消息：

```
"1>------ Build started: Project: World, Configuration: Debug Win32 ------
1>Build started 10/12/2012 2:50:17 PM.
1>PrepareForBuild:
1>  Creating directory "C:\Users\x Keyaki x\Documents\Visual Studio 2010\Projects    \World    \Debug\".
1>InitializeBuildStatus:
1>  Creating "Debug\World.unsuccessfulbuild" because "AlwaysCreate" was specified.
1>ClCompile:
1>  World.cpp
1>LINK : fatal error LNK1123: failure during conversion to COFF: file invalid or corrupt
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:05.02 
```

========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

“存在构建错误。您要继续并运行上次成功的构建吗？”

我还是 VS 2010 的新手，所以我对它一无所知，但我知道如果我在学校的 VS 2010 上制作相同的程序，我知道它会正常工作。但是，如果我在家里尝试，我会收到此消息，即使如果我在家上学，我也会执行完全相同的过程来制作程序。

当我制作项目时，我总是选择带有“空项目”的“Win32 控制台解决方案”。我再次在学校做同样的事情，一切正常，但是当我在家里用自己的电脑做这件事时，我收到了上述错误消息。

就像我说的，我还是 VS 2010 的新手，所以我不记得我是否有任何“未来日期”或类似的文件。

那么，有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:41:26.823

这篇文章中的答案很可能会解决您的问题；[安装 Visual Studio 2012 Release Preview 后出现错误“链接：致命错误 LNK1123：转换为 COFF 期间失败：文件无效或损坏”](https://stackoverflow.com/questions/10888391/link-fatal-error-lnk1123-failure-during-conversion-to-coff-file-invalid-or-c)

对于安装了 VS 2012 的 VS 2010 用户来说，这个错误听起来是一个常见问题。

# github - 打印 Github 问题列表

> ID：12865465
> 
> 赞同：2
> 
> 时间：2012-10-12T19:01:58.060
> 
> 标签：github, cappuccino

有没有办法打印出 Github 问题列表？除了打印 HTML 页面。

我试过使用[GitHub Issues Cappuccino App](http://cappuccino.org/discuss/2010/05/13/github-issues-cappuccino-app-desktop-and-web/)。我让该应用程序在 Chrome 中运行，但它从未完成加载问题。我认为这可能是因为我的仓库是私有的，但我也无法让它完成从公共仓库加载问题。

有没有人找到这样做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T23:45:47.197

几周前，我偶然发现了这篇博客文章：[http](http://www.fullo.net/blog/2012/06/25/export-github-issues-as-csv-with-v3-api/) ://www.fullo.net/blog/2012/06/25/export-github-issues-as-csv-with-v3-api/ 。它解释了如何通过命令行 curl 调用新 API 来获取问题，并将它们填充到 csv 文件中，并使用一个简单的 php 脚本。这是迄今为止我发现的最简单的解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T00:30:12.447

我有一个脚本可以将 github 问题导出到 CSV 文件，然后您可以打印该文件。它位于[https://github.com/josephhainline/export_github_issues_to_csv](https://github.com/josephhainline/export_github_issues_to_csv)

随意分叉并修改以适应您的需求。

# flash - Red5 视频聊天冻结

> ID：12865470
> 
> 赞同：1
> 
> 时间：2012-10-12T19:02:22.410
> 
> 标签：flash, stream, red5

我遇到了基于 red5 服务器的视频聊天问题。一切正常，但如果有些人关闭浏览器而不是单击“停止聊天”按钮，则他们的流中有最后一帧。所以它看起来像冰冻的溪流。有没有办法杀死这样的流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:10:58.517

选项不是，但您可以在 Red5 应用程序中实现一个方法，例如实现该方法：

```
/**
 * Notification that a broadcasting stream is closing.
*/
@Override
public void streamBroadcastClose(IBroadcastStream stream) {
  //Notify all clients
} 
```

然后通过 RTMP 向用户离开的所有客户端发送消息，然后您可以在客户端 UI 中做出反应并正确删除/黑屏已离开用户的屏幕。

塞巴斯蒂安

# xslt-1.0 - 使用 XSLT 对 XML 进行分组

> ID：12865471
> 
> 赞同：1
> 
> 时间：2012-10-12T19:02:44.567
> 
> 标签：xslt-1.0

我正在尝试创建一个从另一个 xml 设置的标头详细信息 XML 文档。

源xml文档：

```
<items>
    <item>
        <col1>H</col1>
        <col2>header1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail1.1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail1.2</col2>
    </item>
    <item>
        <col1>H</col1>
        <col2>header2</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.2</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.3</col2>
    </item>
</items> 
```

期望的输出：

```
<xml>
    <transaction>
        <items>
            <item>
                <col1>H</col1>
                <col2>header1</col2>
            </item>
            <item>
                <col1>D</col1>
                <col2>detail1.1</col2>
            </item>
            <item>
                <col1>D</col1>
                <col2>detail1.2</col2>
            </item>
        </items>
    </transaction>
    <transaction>
        <items>
            <item>
                <col1>H</col1>
                <col2>header2</col2>
            </item>
            <item>
                <col1>D</col1>
                <col2>detail2.1</col2>
            </item>
            <item>
                <col1>D</col1>
                <col2>detail2.2</col2>
            </item>
            <item>
                <col1>D</col1>
                <col2>detail2.3</col2>
            </item>
        </items>
    </transaction>
</xml> 
```

我尝试的 XSLT：

```
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
    <xsl:template match="/ | node() | @* | comment() | processing-instruction()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="item[col1='H']">
        <transaction>
            <xsl:apply-templates/>
        </transaction>
    </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:40:00.527

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kItemByCol2Num" match="item[starts-with(col2, 'detail')]"
  use="substring-before(substring-after(col2, 'detail'), '.')"/>

 <xsl:key name="kItemByCol2Num" match="item[starts-with(col2, 'header')]"
  use="substring-after(col2, 'header')"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "item
   [starts-with(col2, 'header')
  and
    generate-id()
   =
    generate-id(key('kItemByCol2Num', substring-after(col2, 'header'))[1])
   ]">
  <transaction>
    <xsl:copy-of select="key('kItemByCol2Num', substring-after(col2, 'header'))"/>
  </transaction>
 </xsl:template>
 <xsl:template match="item"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<items>
    <item>
        <col1>H</col1>
        <col2>header1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail1.1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail1.2</col2>
    </item>
    <item>
        <col1>H</col1>
        <col2>header2</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.1</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.2</col2>
    </item>
    <item>
        <col1>D</col1>
        <col2>detail2.3</col2>
    </item>
</items> 
```

**产生想要的正确结果：**

```
<items>
   <transaction>
      <item>
         <col1>H</col1>
         <col2>header1</col2>
      </item>
      <item>
         <col1>D</col1>
         <col2>detail1.1</col2>
      </item>
      <item>
         <col1>D</col1>
         <col2>detail1.2</col2>
      </item>
   </transaction>
   <transaction>
      <item>
         <col1>H</col1>
         <col2>header2</col2>
      </item>
      <item>
         <col1>D</col1>
         <col2>detail2.1</col2>
      </item>
      <item>
         <col1>D</col1>
         <col2>detail2.2</col2>
      </item>
      <item>
         <col1>D</col1>
         <col2>detail2.3</col2>
      </item>
   </transaction>
</items> 
```

**说明**：

1.  正确使用 Muenchian 方法进行分组。

2.  正确使用钥匙。

# asp.net-mvc - ASP.net Web API 和 System.Net.Http

> ID：12865477
> 
> 赞同：9
> 
> 时间：2012-10-12T19:03:13.687
> 
> 标签：asp.net-mvc, asp.net-web-api

按照本文中的例子：http: [//blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using -apiexplorer.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)

我已经设置了所有内容来为我的 Web API 项目提供文档，但我遇到了一个问题。当我尝试使用时，`@api.HttpMethod`我得到了他在文章中描述的错误。他说您必须在 web.config 中手动添加对`System.Net.Http`, Version=2.0.0.0 程序集的引用（即使它默认位于 References 文件夹中），但是如果您按照他的示例通过传统方式添加程序集web.config 中的标签.....好吧，您会发现它在 4.5 中不再是有效标签，并且一切都通过 AssemblyRedirects 完成。我试过了，但没有用。任何有这个问题或知道如何帮助更改 web.config 的人？我错过了一个会议吗？

Visual Studio 2012 MVC4 Web API 项目（不是来自 Nuget，VS2012 附带的最终版本）

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T09:01:48.207

在节点下的 Web.config 文件中添加以下配置`<system.web>`（假设您的应用在 .NET 4.5 上运行，`targetFramework`属性设置为 4.5）：

```
<compilation targetFramework="4.5">
  <assemblies>
    <add assembly="System.Net.Http, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </assemblies>
</compilation> 
```

还在`<configuration>`节点下的根级别添加以下内容：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Net.Http" publicKeyToken="b03f5f7f11d50a3a" />
      <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

这应该可以解决您的问题。

# c++ - Visual Studio New Debug Configuration

> ID：12865484
> 
> 赞同：0
> 
> 时间：2012-10-12T19:03:31.777
> 
> 标签：c++, visual-studio-2010, debugging, configuration, configurationmanager

I am trying to configure Visual Studio 2010, to add a Debug configuration.

Configuration Manager->either by starting in the active solution configuration:, or Project, added New, created a New configuration, copied from Debug... (if solution, either created new configuration, or just used Debug and added new project configuration)...

[http://msdn.microsoft.com/en-us/library/kwybya3w.aspx](http://msdn.microsoft.com/en-us/library/kwybya3w.aspx)

Build -> errors that suggest a mix of Debug and Release:

defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library -> easy to fix

mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '2' doesn't match value '0' -> don't know how to fix.

I tried to manually change the project file... But I don't know how to fix this. ![resultant configuration ?](../Images/db3579411ad6d0d2487484d977bcd1b3.png)

What is more, I can't just fix this specific instance - there will be lots and lots of situations where this situation will happen again, so, what am I doing wrong ?

Note: I need a DEBUG configuration in order to be able to do unit testing (c++), and be able to separate building executables from unit tests.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:59:03.323

I can set the configuration options in a property sheet, where I can add things like

```
<ItemDefinitionGroup Condition="'$(Configuration)' == 'DebugCopy'">
    <ClCompile>
      <PreprocessorDefinitions>_ITERATOR_DEBUG_LEVEL=2;%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
  </ItemDefinitionGroup> 
```

(as well as any other options I require that may not be set by default).

It is a way to override some global settings that have been imposed on all projects I am using, which have caused the bug I had (mostly because I wasn't aware of those settings).

# facebook - 是否有我们可以使用页面访问令牌查询的端点并发送提要定位参数来获得估计的覆盖率？

> ID：12865495
> 
> 赞同：5
> 
> 时间：2012-10-12T19:04:33.880
> 
> 标签：facebook, feed, facebook-insights, targeting

是否有我们可以使用页面访问令牌查询的端点并发送提要定位参数来获得估计的覆盖面？

没有任何关于如何获取此信息的记录，尽管它可用于广告组：[https ://developers.facebook.com/docs/reference/api/page/#targeting](https://developers.facebook.com/docs/reference/api/page/#targeting)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T22:45:46.920

你看过 Facebook Insights API 吗？[https://developers.facebook.com/docs/reference/api/insights/](https://developers.facebook.com/docs/reference/api/insights/)

# objective-c - 使用 Webkit，我如何使页面离线可用？Obj-C，可可

> ID：12865496
> 
> 赞同：1
> 
> 时间：2012-10-12T19:04:55.247
> 
> 标签：objective-c, cocoa, webkit

好吧。所以我有一个从 Wikipedia.org/WolframAlpha.com 加载网页的应用程序。我想添加一个下载页面以供离线使用的按钮。我将如何使用 Webkit 来做到这一点？我不相信我想要纯缓存，因为我希望页面始终可用，直到用户删除它（我想我需要下载到硬盘或其他东西）。

我对 Webkit 不是很熟悉，所以任何帮助都将不胜感激。目前我只有：

```
- (IBAction)downloadWebpage:(id)sender {
    //Download Webpage
} 
```

我的 webView 定义为`*webView`. 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:09:53.403

您可以使用 NSURLRequest 和 NSURLConnection 来获取 URL 的数据，并将其保存在本地文件中。UIWebView 有一些你可以使用的方法，例如 – loadData:MIMEType:textEncodingName:baseURL:，它可以让你在 web view 上渲染本地数据。

一些相关文档：[NSURLRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)，[UIWebview](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)，[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T02:27:24.090

对不起，我有点晚了。

WebKit 内置了它。正确的做法是使用 WebArchive。有关这方面的更多信息，请参阅 WebArchive 的 -data 方法。

以下代码未经测试，但它应该解释您需要了解的内容。

```
WebFrame      *webFrame = [webView mainFrame];
WebDataSource *dataSource = [webFrame dataSource];
WebArchive    *webArchive = [dataSource webArchive];
NSString      *filename = @"MyTestArchive.webarchive";
NSString      *path = @"~/MyArchives";
NSString      *pathname = [path stringByAppendingPathComponent:filename];
NSError       *error = NULL;

pathname = [pathname stringByExpandingTildeInPath];
[[webArchive data] writeToFile:pathname options:NSAtomicWrite error:&error]; 
```

您也可以通过以下方式获取 webArchive：

```
NSString   *urlString = @"http://www.example.com/";
NSURL      *url = [NSURL URLWithString:urlString];
WebArchive *webArchive = [[WebArchive alloc] initWithContentsOfURL:url];

[webArchive autorelease];

... (save [webArchive data] like above) 
```

要获取文件名，您可以尝试询问 NSURL ...

```
url = [[dataSource response] URL];
filename = [[url relativePath] lastPathComponent];
if(0 == [filename length] || [filename isEqualToString:@"/"])
{
    // try getting a name that makes sense. If you have a dataSource, try this...
    filename = [dataSource pageTitle];
    if(0 == [filename length])
    {
        filename = @"index";
    }
}
filename = [filename stringByAppendingPathExtension:@"webarchive"]; 
```

如果要加载 webArchive，可以使用 WebFrame 的 -loadArchive: 方法。

# css - css - 边框上有边距的圆圈

> ID：12865500
> 
> 赞同：15
> 
> 时间：2012-10-12T19:05:14.010
> 
> 标签：css

我正在尝试创建一个带有边距轮廓的圆圈。
一切似乎都有效，除了我似乎无法获得那么少`px`的利润。
请问有什么建议吗？

![在此处输入图像描述](../Images/cd88aa5b6ff3aba25b87171bb9d2fc2c.png)

```
.ui-corner-all { -moz-border-radius: 30px; -webkit-border-radius: 30px; border-radius: 30px; border: 1px solid black; margin:5px; width:30px; height:30px;} 
```

这是我的小提琴：http: [//jsfiddle.net/nalagg/K6pdr/](http://jsfiddle.net/nalagg/K6pdr/)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-12T19:12:52.170

我会说这样对待它：

外部“边框” - 使用[盒子阴影](https://developer.mozilla.org/en-US/docs/Web/CSS/box-shadow)
内部“边缘” - 使用白色边框
内部区域 - 使用背景颜色

总之，你得到：

```
.circle {
  background-color: #F80;
  border: 3px solid #FFF;
  border-radius: 18px;
  box-shadow: 0 0 2px #888;
  height: 30px;
  width: 30px;
}
```

```
<div class="circle"></div>
```

* * *

您可以通过在 box-shadow 上将 blur-radius 设置为 0 来使外边界更加清晰。

```
.circle {
  background-color: #F80;
  border: 3px solid #FFF;
  border-radius: 18px;

  /* offset-x | offset-y | blur-radius | spread-radius | color */
  box-shadow: 0 0 0 2px #888;
  height: 30px;
  width: 30px;
}
```

```
<div class="circle"></div>
```

* * *

作为替代方案，您可以使用第二个元素：

```
.circle {
  border: 1px solid #CCC;
  border-radius: 19px;
  display: inline-block;
}

.inner {
  background-color: #F80;
  border-radius: 15px;
  margin: 3px;
  height: 30px;
  width: 30px;
}
```

```
<div class="circle">
  <div class="inner"></div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-25T12:44:13.613

正如其他人所说，只有Firefox支持这一点。这是一个解决方法，它做同样的事情，甚至可以使用虚线轮廓。

[![圆圈](../Images/79d872a412d07dcd3da1d5faa97cffde.png)](https://i.stack.imgur.com/HrSnl.png)

```
.has-outline {
    background: #51ab9f;
    border-radius: 50%;
    padding: 5px;
    position: relative;
    width:200px;
    height:200px;
}
.has-outline:after {
  border-radius: 50%;
  padding: 5px;
  border: 2px dashed #9dd5cf;
  position: absolute;
  content: '';
  top: -6px;
  left: -6px;
  bottom: -6px;
  right: -6px;
}
```

```
<div class="has-outline">
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:09:24.763

尝试：

```
.ui-corner-all { -moz-border-radius: 30px; -webkit-border-radius: 30px; border-radius: 30px; border: 1px solid black; margin: 2px; background: #fcc; width: 30px; height: 30px; } 
```

或使用内部填充：

```
.ui-corner-all2 { -moz-border-radius: 30px; -webkit-border-radius: 30px; border-radius: 30px; border: 1px solid black; padding: 2px; background: #fcc;  width: 30px; height: 30px; } 
```

另请参阅this fiddle使用margin vs padding CSS属性时的区别。

**[http://jsfiddle.net/MQx7r/4/](http://jsfiddle.net/MQx7r/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:10:39.823

您可以`outline`与 结合使用`outline-radius`。检查这个[jsFiddle](http://jsfiddle.net/zuRVX/)。

# java - 为 weblogic 指定部署配置设置？

> ID：12865510
> 
> 赞同：1
> 
> 时间：2012-10-12T19:05:52.143
> 
> 标签：java, configuration, weblogic

我有一个超轻量级的 weblogic 应用程序，我需要访问一个会根据环境而变化的字符串。我搜索了一下，我的所有选项似乎都需要构建类和加载器等。但是，随着应用程序配置文件的数量 weblogic 有我完全期望有一个更好的地方来存储单个全局属性以供快速参考可以使用 plan.xml 文件进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:20:31.553

我认为您可以`plan.xml`在部署期间使用以下条目来覆盖`myEnvVariable`通过上下文定义的上下文变量值`web.xml`。[**Oracle 网站**](http://docs.oracle.com/cd/E13222_01/wls/docs90/deployment/wlplangenerator.html)上提供了详细信息。

```
 <variable-definition>
  <variable>
      <name>myEnvVariable</name>
      <value>myEnvironmentDependentValue</value>
  </variable>
 </variable-definition> 
```

您可能想`plan.xml`为不同的环境创建不同的。

上下文变量 in`web.xml`可以定义如下：

```
 <context-param>
    <param-name>myEnvVariable</param-name>
    <param-value>myEnvironmentDefaultValue/param-value>
 </context-param> 
```

可以使用请求对象在服务器端检索上下文变量，如下所示：

```
 String myEnvVariableString= getServletContext().getInitParameter("myEnvVariable"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T23:50:43.263

不确定，如果您正在寻找这个（添加另一个答案）。

1.  `startWebLogic.cmd/startWebLogic.sh`在您的 weblogic 域文件夹中打开可用。
2.  `set JAVA_OPTIONS=%JAVA_OPTIONS% -Dmy.environment=TestEnviroment`在调用之前添加文件的顶部`call "%DOMAIN_HOME%\bin\startWebLogic.cmd" %*`
3.  保存文件并重新启动`Weblogic`服务器。

此变量现在存在于环境中以供使用。

# c# - 可以访问“共享”列表框的多线程

> ID：12865512
> 
> 赞同：2
> 
> 时间：2012-10-12T19:06:03.907
> 
> 标签：c#, multithreading, visual-studio-2010, user-interface, listbox

问题很简单我有 GUI c#/xaml 应用程序，我想在一个线程中运行 GUI，在另一个线程中运行一些方法（无限循环）。我需要从第二个线程修改 GUI（列表框）中的元素。我尝试从网络创建全局变量和其他一些技巧，但没有一个运行良好。

现在我有类似的东西：

```
public delegate void InvokeDelegate(listdata Mujlist);
//in global scope
// and in Window class
public void UpdateList(listdata Mujlist)
{
    mujlistbox.DataContext = Mujlist;
}
// and in the second thread this
object[] obj = new object[1];
obj[0] = Mujlist;
mujlistbox.BeginInvoke(new InvokeDelegate(UpdateList), obj); 
```

这可能做得很好，但我不能尝试这个，因为 VS 2010 发现错误

```
Error 1 'System.Windows.Controls.ListBox' does not contain a definition for 'BeginInvoke' and no extension method 'BeginInvoke' accepting a first argument of type 'System.Windows.Controls.ListBox' could be found (are you missing a using directive or an assembly reference?)   D:\..\MainWindows.xaml.cs 85 28 WPFChat 
```

但是 System.Windows.Forms**有**这种[方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.aspx)，所以我对此感到[困惑](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx)。

所以，问题是我怎样才能简单地从子线程更新“GUI线程”中的列表框？

我哪里出错了？有更好的方法吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:11:46.367

使用 WPF，您需要使用该`Dispatcher.BeginInvoke`方法。

虽然[`ListBox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox.aspx)是 a `UIElement`，它不包含`BeginInvoke`方法，但它确实派生自`DispatcherObject`. 因此，它有一个[`Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.dispatcher.aspx)属性可用于访问`Dispatcher`：

```
mujlistbox.Dispatcher.BeginInvoke(new InvokeDelegate(UpdateList), obj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:10:58.793

使用 a`BackGroundWorker`并在方法中实现您的长时间运行的操作`BackGroundWorker.DoWork`。添加进度报告处理程序并从进度事件更新您的 UI。简单得多。

请参阅[此](https://stackoverflow.com/questions/5483565/how-to-use-wpf-background-worker)问题的标记答案

# javascript - 日期对象在谷歌脚本（javascript）中没有捕捉到比较

> ID：12865520
> 
> 赞同：0
> 
> 时间：2012-10-12T19:06:42.747
> 
> 标签：javascript, google-apps-script

我有一个脚本将两个日期相互比较。但两者的进入方式不同。一个我转换为字符串格式 Mo/day/year 然后转换为日期格式。另一个直接用于已经采用日期格式的谷歌电子表格单元格。但是当我对它们进行比较时，即使日期在比较范围内，它也不起作用。这是我的代码：

```
 function formatDate(someDate){
  var x = someDate.split("T");
  var v = x[0].split("-");
  var newDate = new Date();
  newDate.setFullYear(v[0],(v[1]-1),v[2]);
  //var newDate = v[1]+"/"+ v[2]+"/"+v[0];

  return newDate;
  }

 //calling formatDate within another function
 if(startDate != ''){
    if(singleCard[j].date != undefined){
      var k = singleCard[j].date;
      var f = formatDate(k);
      var dt = new Date(f);

 if(dt >= startDate && dt <= endDate){  //date comparison
   //do something here
 } 
```

开始/结束日期采用以下格式：

```
 Fri Oct 12 2012 00:00:00 GMT-0700 (PDT) 
```

singleCard[j].date 以字符串形式出现：

```
 "2012-10-12T16:57:51.517Z" 
```

然后我使用：

```
 var f = formatDate(date) -> var dt = new Date(f) 
```

来处理它。
我不确定我在这里做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:35:28.443

当你这样做

`var newDate = v[1]+"/"+ v[2]+"/"+v[0];`

你确定你以正确的顺序使用*年/月/日* 吗？

您是否尝试记录结果`var dt = new Date(f);`以将其值视为日期对象？

*抱歉，如果我的问题看起来很明显，但是由于我不知道您的本地日期设置，我不确定您是如何处理的。（我在我们使用 dd/mm/yyyy 的国家/地区，所以我习惯了有问题;)*

**编辑**：刚刚看到你的评论......不应该是`v[0]+"/"+ v[1]+"/"+v[2]`（yyyy/mm/dd）

***编辑 2***：我认为您在使用 setFullYear(); 时也必须提供 hh mm ss 参数；

就像是

```
 newDate.setFullYear(v[0],(v[1]-1),v[2],0,0,0,0); 
```

为了让它工作。也有必要（我什至说是强制性的）将 hh mm ss 和 mSec 设置为 0，因为您正在使用 a`<=`和`>=`比较，如果您让 hours 、 minutes 、 seconds 和 milliseconds 自由地生活，平等可能永远不会成立生活。

不要忘记日期对象总是带有时间的完整日期，即使您不显示/使用它们也是如此。

# c++ - 在 Eclipse 中的 Ubuntu 上调试 C++ 项目不会在断点处停止

> ID：12865522
> 
> 赞同：0
> 
> 时间：2012-10-12T19:06:45.230
> 
> 标签：c++, eclipse, gdb

我在 Eclipse 的 Ubuntu 12 上运行 C++ 项目。我在 main 方法中放置了一个断点。我可以从控制台窗口看到应用程序正在运行。但它并没有在我的断点处停止。所以，我的问题是......在 Eclipse 3.7.2 中，为什么它不在我的断点处停止？是否有我可能缺少的设置？我已经看到它停止了 2 次，但我单击“恢复”并且应用程序运行。但是接下来的几次它并没有在断点处停止。我错过了什么？

任何想法，将不胜感激！

电动汽车

更新：我现在在控制台窗口中看到了这个：

```
 Error in re-setting breakpoint 2: Warning:
 Cannot insert breakpoint 2.
 Error accessing memory address 0x8054ff2: Input/output error.

 Warning:
 Cannot insert breakpoint 2.
 Error accessing memory address 0x8054ff2: Input/output error. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:12:50.563

Eclipse 将显示一个选中的紫色圆圈作为一个处于活动状态的断点，而仅显示一个紫色圆圈作为设置的断点。如果您的没有选中标记，则“断点”视图中有几个断点选项。右键单击您设置的断点并确保类型设置为常规。

# javascript - 在 contenteditable div 中自动更新模板

> ID：12865526
> 
> 赞同：3
> 
> 时间：2012-10-12T19:07:11.117
> 
> 标签：javascript, underscore.js, contenteditable

我有一个 contentEditable div 元素，我在其中插入一个带有 document.execCommand 方法的下划线模板：

```
var data = {a: 100, b: 200};

var info = _.template('<span><%= data.a %>,<%= data.b %></span>');

document.execCommand('insertHTML', false, info({'data': data})); 
```

这按预期工作。我现在正在寻找一种在数据源更改时自动更新此 span 元素的方法。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T09:41:46.253

以防万一它对任何人有用，这就是我的做法-

1) 向数据源添加了事件触发/订阅机制。2) 在任何数据更改时触发“更改”事件。3) 使用重置 contenteditable 元素中相应元素的 html 的函数来处理更改事件。

不过，仍在寻找更优雅的解决方案。

# d3.js - Cubism.js - 范围到颜色映射

> ID：12865529
> 
> 赞同：2
> 
> 时间：2012-10-12T19:07:17.193
> 
> 标签：d3.js, cubism.js

我正在使用 cubism.js 生成 CPU 利用率时间序列。我有显示系列，但是我注意到关于如何将颜色分配给值的一些奇怪的事情。

例如，值 10 的颜色与值 100（红色）相同。我在下面定义了 50 种颜色。我希望每 5 个值（0 以上）将分配给相应的颜色。

我本来希望值 10 获得颜色 #00DDDD，值 100 获得颜色 #FF0000。

从比例范围到颜色的映射在哪里定义？

这是我正在谈论的代码部分的片段。

```
var colors = ["#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff", "#ffffff",
"#00BBBB", "#00CCCC", "#00DDDD", "#00EEEE", "#00FFFF", "#00BB5E", "#00CC66", "#00DD6F", "#00EE77", "#00FF84", "#BBBB00", "#CCCC00", "#DDDD00", "#EEEE00", "#FFFF00J", "#BB5E00", "#CC6600m", "#DD6F00", "#EE7700", "#FF8000", "#BB0000", "#CC0000", "#DD0000", "#EE0000", "#FF0000"];

// Iterate through each search criteria, passing the host, criteria tuple.
// Queries and returns app server metrics, finally graphing accordingly.

var scale = d3.scale.linear().range([0,100]);
d3.select("body").selectAll(".horizon")
    .data(search_criterias.map(app_server_data_collector))
    .enter().insert("div", ".bottom")
    .attr("class", "horizon")
    .call(context.horizon().scale(scale).colors(colors).format(d3.format("+,"))); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T17:19:19.413

与此问题类似：[cubism.js 的色带](https://stackoverflow.com/questions/12574844/color-bands-for-cubism-js)

Cubism 使用该`extent`选项来设置水平图的最小值和最大值，而不是比例的范围。如果您没有明确设置范围，它只会使用数据中的最小值和最大值，这可能不会为您提供所需的色带。相反，请确保添加`horizon.extent([0, 100])`而不是比例范围。

此外，您似乎打算让所有数据都是积极的。请记住，水平线图将颜色的前半部分分配给负值，将后半部分分配给正值。如果您只有正值，则颜色数组的前半部分将被忽略。

# jquery - 数据表-无法在 Symfony2 中解析 Json 数据

> ID：12865530
> 
> 赞同：1
> 
> 时间：2012-10-12T19:07:17.210
> 
> 标签：jquery, jquery-plugins, symfony, datatables

我不断收到此错误：

DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的。

我不确定问题是什么。是不是路由不正确？[我验证了使用http://jsonlint.com/](http://jsonlint.com/)生成的 json 文件是有效的。

控制器：公共函数 indexAction($id) {

```
 return $this-render('CetiucValidateSurveyBundle:Validate:validatespreadsheet.html.twig');

} 
```

具有 javascript 和表格的 twig(view) 文件。

validatespreadsheet.html.twig'：

```
<table id="myDataTable" >
   <thead>
   <tr>
       <th>Company name</th>
       <th>Address</th>
       <th>Town</th>
   </tr>
   </thead>
   <tbody>

   </tbody> 
```

用于从控制器检索表数据的 javascript：

```
<script language="JavaScript" type="text/javascript">
$(document).ready(function () {
    $('#myDataTable').dataTable(

            {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "{{ path('CetiucValidateSurveyBundle_renderJson')}}"
            }

    );

}); 
```

控制器中用于将数据返回给视图的方法

```
public function renderJsonAction(Request $request)
{

    $arr = array ('aaData' => array(
        array('3','35','4', '$14,500', '$15,200','$16,900','5','1'),
        array('1','16','4', '$14,200', '$15,100','$14,900','Running','1'),
        array('5','25','4', '$14,500', '$15,600','$16,900','Not Running','1')
    )
    );

    $post_data = json_encode($arr);

    return new Response( $post_data,200,array('Content-Type'=>'application/json'));//make sure it has the correct content type

} 
```

这是返回 json 的操作的路由条目

```
CetiucValidateSurveyBundle_renderJson:
   defaults: { _controller: "CetiucValidateSurveyBundle:Validate:renderJson" }
   pattern:   /json
   requirements: { _method: POST } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:42:08.393

不要使用

```
requirements: { _method: POST } 
```

另外，您确定要使用`bServerSide = true`吗？

# lookup - AX2009 RU7 自定义查找列表

> ID：12865531
> 
> 赞同：0
> 
> 时间：2012-10-12T19:07:26.280
> 
> 标签：lookup, axapta, dynamics-ax-2009

多年来，我一直在 AX2009 中成功使用自定义查找。提升到 RU7 后，以前的方法似乎不再有效。关于我应该改变什么以修复它的任何建议？

这是我一直用来调用自定义查找的代码：

```
public void lookup()
{
List    valueList = new List(Types::String);
;
    //add the choices to the list
    valueList.addEnd('@ABC123');
    valueList.addEnd('@ABC246);
//display the list using the customized syslookup routine
SysLookup::lookupList(this, valueList, "@ABC369");
super();
} 
```

这是我添加到 sysLookup 类的方法：

```
public static client void lookupList(FormStringControl _formStringControl, List _valueList, str _columnLabel = '')
{
Args    args;
FormRun formRun;
;
if (_formStringControl && _valueList && _valueList.typeId() == Types::String)
{
    args = new Args(formstr(SysLookup));
    args.parmObject(_valueList);
    args.parm(_columnLabel);
    formRun = classFactory.formRunClass(args);
    formRun.init();
    _formStringControl.performFormLookup(formRun);
}
} 
```

在我们安装了 RU7 之前，这一切都很好。现在，我们收到以下错误：

执行代码时出错：DictEnum 对象未初始化。(C)\Classes\DictEnum\label (C)\Forms\SysLookup\Methods\run (C)\Classes\FormStringControl\performFormLookup (C)\Classes\SysLookup\lookupList - 第 16 行 (C)\Classes\FormStringControl\Lookup

我愿意接受有关如何解决当前问题或如何在 RU7 中创建相同效果的建议（不引入 RU7 之前的 syslookup 类，它确实有效，但不可接受。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:45:30.610

我想知道您可以在哪个应用程序版本中成功使用自定义查找。即使在 RU-3 中也无法正常工作。我想您的`SysLookup`表单已经过定制，以便您可以使用您的`lookupList`方法 - 我建议您验证它。

标准 SysLookup 表单仅使用 args.parm() 而不是 args.parmObject()，因此您的 _valueList 根本不会被使用。您可以检查如何调用查找表单`\Forms\KMQuestionnaireStatistics\Designs\Design\[Tab:Tab]\[TabPage:RangesTab]\[Group:Ranges]\StringEdit:rangeGender\Methods\lookup`

I don't know the value of your label `"@ABC369"`, but in standard AX you won't have an error only if it this label holds some base enum's ID (e.g. "732" for `NoYesCombo`). You can also check it, however your List won't be displayed in the lookup. You'd better check how the `SysLookup` form had been customized in the environment where you've been successfully using the code snippet you provided.

# jquery - 在 jQuery 插件上管理事件处理程序的范围

> ID：12865532
> 
> 赞同：1
> 
> 时间：2012-10-12T19:07:32.190
> 
> 标签：jquery, events, jquery-plugins

我正在使用 jQuery 的事件系统来允许外部代码驱动我的插件。在我的事件处理程序中，“this”设置为事件绑定到的元素，那么我自己访问插件方法的最佳方式是什么？

```
;(function($, window, document, undefined){
    var pluginName = "book";

    // Standard constructor
    function Plugin(element, options){
        this.element = element;
        this.options = $.extend({}, defaults, options);

        this.init();
    }

    // Simple init
    Plugin.prototype.init = function(){
        this.setBindings();
    }

    // Tie local methods to event channels
    // so that external code can drive the plugin. 
    Plugin.prototype.setBindings = function(){
        var events = {
            'book-open'      : this.open,
            'book-next-page' : this.toNext,
            'book-prev-page' : this.toPrev,
            'book-cover'     : this.toFront,
            'book-back'      : this.toBack
        }

        for(event in events){
            var fn = events[event];
            console.log(event);
            this.$element.on(event, fn);
        }
    };

    // Event Handlers
    Plugin.prototype.open = function(){
        // when called externally 'this' refers
        // to the element the plugin was intialized on.
        // I want to be able to call the plugin's 'private'
        // methods, like someMethod() below.
    };

    /* .... other event handlers ...  */

    // 'Private' plugin methods
    Plugin.prototype.someMethod = function(){
        // do something
    }

    // Wrap and return technique from @ajpiano & @addyosmani
    $.fn[pluginName] = function ( options ) {
        return this.each(function () {
            if ( !$.data(this, "plugin_" + pluginName )) {
                $.data( this, "plugin_" + pluginName,
                    new Plugin( this, options ));
            }
        });
    }

 })(jQuery, window, document); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:22:50.890

您可以调用一个函数，而不是传递函数本身，而是调用一个函数，该函数将返回您要执行的函数，该函数是围绕插件的闭包。

```
var createBookOpenFunction = function () {
    var self = this; //since you execute this function on the plugin, "this" will be the plugin
    return function () {
        self.open();
    }
}; 
```

然后，而不是打电话...

```
this.$element.on(event, fn); 
```

你改为打电话

```
this.$element.on(event, this.createBookOpenFunction()); 
```

所以现在，当在 $element 上调用函数时，实际执行是在插件对象上完成的，因为它在“self”上关闭。
您可以通过返回的函数将参数（如果有的话）输入到调用“self.open（）”中。

此外，这个线程可能会有所帮助： [Controlling the value of 'this' in a jQuery event](https://stackoverflow.com/questions/520019/controlling-the-value-of-this-in-a-jquery-event)

（我不直接使用 jQuery，所以我不熟悉 API 中可用的所有内容，但这里的一些帖子似乎对您的问题有替代解决方案）

# algorithm - 从具有 N 个节点的树中选择 K 个节点，成本最低

> ID：12865533
> 
> 赞同：1
> 
> 时间：2012-10-12T19:07:35.650
> 
> 标签：algorithm

有一棵树有 N 个节点和 N-1 条边（使它成为一棵树）。每个节点都有一个权重 W(i)。如何选择一个仍包含原始树根的大小为 K 个节点的子树？我必须这样做，以便最大限度地减少选择此“子树”的“成本”，其中成本定义为保留的所有边的权重之和。

我想我以前做过这样的问题，看起来像 DP/recursion。但是，当每个节点限制为 2 个子节点时，我知道如何处理它。您已经定义了一个函数 cost(n, i)，这意味着从节点 n 开始保持 i 个节点的最小成本。您将在其中一个孩子中从 i = 0 迭代到 n ，并将其余部分交给另一个孩子。但是，由于每个节点可以有无限数量的孩子，有没有办法解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:19:10.670

对于给定的节点，您希望使用其子节点的 cost(n, i) 计算成本(n, i)。从 0..K 开始给孩子编号，你就有了另一个动态程序。在第 j 阶段，您希望仅使用子 0..j 计算出可能的最佳成本集（n，i）。

我一直在考虑编写这样的代码，同时玩弄机器学习（只是为了好玩，我想编写通过安装两个 Weka 分类器而不是一个来查找异常的程序）。这和你的目的一样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:59:00.433

DP 解决方案（可能与 mcdowella 所描述的相似，也可能不同）：

让根节点编号为0。其余节点可以任意编号（但最好的方法是逐级对节点进行编号）。

`f(i, j)`表示当我们考虑索引大于 i 的所有兄弟节点加上任何子节点（如果适用）时的最小成本，并且我们从有效节点中挑选 j 个节点。

```
f(i, 0) = 0            // i can be anything, even NOT_FOUND
f(NOT_FOUND, j) = +Inf // j > 0
f(i, j) = min(f(x, j), // Node i not chosen
              min[r = 0 to j - 1] (f(x, j - 1 - r) + f(y, r)) + cost(i))
              // Node i is chosen, then we can pick some elements from 
              // children node, or from untouched sibling nodes + descendants 
```

在哪里

*   `x`是大于 的最小索引`i`，并且 node`x`和`i`是兄弟节点
*   `y`是最小索引，其中节点`y`是节点 i 的子节点。
*   如果未找到索引`x`，则分配 NOT_FOUND 。`y`

结果将在`f(0, K)`.

# c# - 具有接口类型的接口不能强制转换

> ID：12865534
> 
> 赞同：2
> 
> 时间：2012-10-12T19:07:37.177
> 
> 标签：c#, asp.net-mvc, interface

这是我的示例界面：

```
public interface IJob<T, R>
    where T : IStep
    where R : IDelivery
{
    T Step { get; set; }
    R Delivery { get; set; }
} 
```

这是我的示例实现

```
public class ImageJob<T, R> : IJob<T, R>
    where T : ImageStep
    where R : ImageDelivery
{
    public T Step { get; set; }
    public R Delivery { get; set; }
} 
```

ImageStep和**ImageDelivery****都**实现了各自的接口（IStep、IDelivery）

现在我要做的是接口我所有的存储库方法。我们以这个方法为例：

```
public void CreateJob(IJob<IStep, IDelivery> job); 
```

所以我创建了一个新的：

```
var job = new ImageJob<ImageStep, ImageDelivery>
{
    ...
} 
```

然后我尝试将其传递给存储库方法：

```
repository.CreateJob(job); 
```

我收到一条错误消息：

```
Unable to cast ImageJob<ImageStep, ImageDeliver> to type IJob<IStep, Idelivery> 
```

有人可以向我解释为什么这会引发错误吗？我实施和连接完全错误吗？

我正在尝试做的事情有一个优雅的解决方案吗？

我想用不同的**Step**和**Delivery方法等抽象出每个***Job*。这可能是其他方式吗？还是我完全错过了什么？

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:14:05.563

我认为可以使用协方差。这使您能够将特定的泛型类型转换为其泛型接口或基类之一，例如：

```
MyType<object> list = new MyType<MyType>; 
```

类和接口声明：

```
public interface IMyType<out T>{...}
public class MyType<T> : IMyType<T> {...} 
```

Generic decleration 中的“out”关键字启用强制转换。

[这](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)是 MSDN 上的一个不错的页面，可以进一步帮助您

在您的情况下，它会是（如果您没有在界面中使用设置器

```
public interface IJob<out T, out R>
    where T : IStep
    where R : IDelivery
{
    T Step { get; }
    R Delivery { get; }
} 
```

这应该适用于您实现的类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:11:42.513

我认为`IJob`需要声明

```
public interface IJob<T, R>
    where T : IStep
    where R : IDelivery
{
    T Step { get; set; }
    R Delivery { get; set; }
} 
```

否则，`T`and`R`参数永远不会在接口中使用，并且`IJob`实际上是非泛型的。除此之外，为清楚起见，您可能需要命名类型参数`TStep`和`TDelivery`.****

# c# - 写文件有些奇怪

> ID：12865539
> 
> 赞同：2
> 
> 时间：2012-10-12T19:07:56.400
> 
> 标签：c#, asp.net, .net, io, remote-server

所以，这是一个问题：我有几个文本框，我需要序列化它们。这就是我这样做的方式：

```
 protected void Button1_Click1(object sender, EventArgs e)
    {   
        Environment.CurrentDirectory = "d:/DZHosts/LocalUser/YoYoZ/LOL/Reports";

        string[] s = new string[4];
        FileStream fs = new FileStream(Environment.CurrentDirectory + "Report #" + i + ".rep", FileMode.OpenOrCreate, FileAccess.ReadWrite);
        BinaryFormatter bf = new BinaryFormatter();
        s[0] = TextBox1.Text;
        s[1] = TextBox2.Text;
        s[2] = TextBox3.Text;
        s[3] = TextBox4.Text;
        bf.Serialize(fs, s);
        fs.Close();
        i++;
        Label1.ForeColor = Color.Green;
        Label1.Text = "Complete!";
        System.Threading.Thread.Sleep(3000);
        Response.Redirect("http://LOL/Default.aspx");
    } 
```

但是当我按下写它说：

```
Access to the path 'C:\Windows\SysWOW64\inetsrv\Report #0.rep' is denied. 
```

为什么它不尝试写入正确的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:25:22.227

我相信问题是

```
Environment.CurrentDirectory = "d:/DZHosts/LocalUser/YoYoZ/LOL/Reports"; 
```

没有按预期工作。尝试这个

```
Directory.SetCurrentDirectory(@"C:\Temp"); 
string whereami = Environment.CurrentDirectory; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:12:12.077

你为什么要改变 Environment.CurrentDirectory？如果您希望它可能在不同的情况下发生变化，您只想参考它。如果您只想从预定义的路径读取/写入，为什么不调用

FileStream fs = new FileStream("d:/DZHosts/LocalUser/YoYoZ/LOL/Reports/Report #" + i + ".rep", FileMode.OpenOrCreate, FileAccess.ReadWrite);

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:10:37.647

您的网站（它是应用程序池）在 IUSR 帐户下运行，该帐户只能访问网站的根文件夹，除此之外没有任何权限。如果您需要访问站点根目录之外的其他文件夹，则需要将 IUSR 帐户添加到这些文件夹中。

但是，一般来说，访问系统文件夹是个坏主意，因为它为潜在的攻击者提供了一种访问和可能修改系统文件的方法 - 如果您的服务器被黑客入侵。

您最好使用站点根文件夹中的本地文件夹来存储报告输出。这样，您站点的所有文件都将位于一个根文件夹下，您不必担心管理磁盘上的其他文件夹。如果您需要使用共享主机（您不控制服务器），这也是您唯一的选择 - 在共享主机服务上，站点可能无法访问其根文件夹之外的任何内容。

要获取站点根文件夹的物理路径，请使用：

```
string sPath = Server.MapPath("/"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:11:02.417

如果您的程序有权访问 Windows 安装目录下的文件夹，那将是一个非常糟糕的主意。事实上，如果您的程序没有作为管理员组的成员运行，则默认情况下它没有访问权限。同样默认情况下（并且有充分的理由），ASP.Net 程序以最低权限集运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T13:37:35.760

所以，问题是我试图上传原始网站，没有正确打包。我在项目菜单中使用了包选项，然后完整的站点在 obj\Release\Package 中。感谢所有试图提供帮助的人！

# php - 密码保护 Web 目录和文件

> ID：12865543
> 
> 赞同：0
> 
> 时间：2012-10-12T19:08:11.330
> 
> 标签：php, html, .htaccess, authentication, .htpasswd

用户进入我的网站并到达主页，他/她应该始终且仅在主页上。所有其他文件都是由主页运行的脚本，但用户不应该导航到它们。所以这是我的目录布局：
![目录](../Images/57e9e38d38c522f176bd59c2f180d530.png)

他们将到达 Front.php 并且应该**始终**留在 Front。所以我创建了一个包含以下代码的 htaccess 文件：

```
DirectoryIndex Front.php index.html
AuthType Basic
AuthName "Login"
AuthUserFile /disks/*/*/*/.htpasswd
Require valid-user 
```

现在，**一切**都需要身份验证。但我希望**除**Front.php 之外的所有内容都需要身份验证。如何从身份验证中排除 Front.php？

此外，此身份验证会阻止脚本运行还是只是阻止用户通过 url导航*到文件？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:22:03.060

> 现在，一切都需要身份验证。但我希望除 Front.php 之外的所有内容都需要身份验证。如何从身份验证中排除 Front.php？

尝试：

```
SetEnvIfNoCase Request_URI ^/Front.php norequire_auth=true

# Auth stuff
AuthType Basic
AuthName "Login"
AuthUserFile /disks/*/*/*/.htpasswd

# Setup a deny/allow
Order Deny,Allow
# Deny from everyone
Deny from all
# except if either of these are satisfied
Satisfy any
# 1\. a valid authenticated user
Require valid-user
# or 2\. the "require_auth" var is set
Allow from env=norequire_auth 
```

这使用`Satisfy`指令并将其设置为*`any`*，这意味着 the`Require valid-user`或 the`Allow`都足够好。该变量`norequire_auth`仅在 URI 为 时设置`/Front.php`。如果需要，您可以通过包含其他`SetEnvIfNoCase`指令来添加其他列入白名单的 URI。

> 此外，此身份验证会阻止脚本运行还是只是阻止用户通过 url 导航到文件？

`include`如果您通过 a或包含它们，它不会阻止脚本运行`require`。但是，如果您*直接从 的 HTML 内容链接*到它们`Front.php`，则会弹出 Front.php 的登录对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:13:05.273

您说您不希望能够输入其他脚本，但是您向其中添加了身份验证。

如果您不想直接执行这些脚本，最好将它们移出 public_html 文件夹，这样就根本无法从外部访问它们。您仍然可以在 front.php 中包含/要求它们。

管理脚本可以很容易地移动到一个子目录中，您可以在其中添加来自 .htaccess 的身份验证。如果您想为某些文件添加身份验证，但不是全部，您还可以选择从 PHP 脚本发送所需的标头。

您经常会在文件开头看到这样的检查：

```
defined('MYAPPDEFINE') || die('No direct access allowed'); 
```

在入口页面（index.php、front.php 等）中，您可以添加以下行：

```
define('MYAPPDEFINE', 'Whatever value'); 
```

这样，每一个被直接调用的文件都会立即死亡并终止，但是当从front.php中包含时，检查成功并且包含该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:10:50.463

使用此规则集：

```
<Filesmatch "^((?!Front\.php).)*$">
AuthType Basic
AuthName "Login"
AuthUserFile /disks/*/*/*/.htpasswd
Require valid-user
</Filesmatch>

<Files "Front.php">
allow from all
</Files> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:32:20.423

使用此 .htaccess 内容来防止人们请求除 front.php 之外的任何内容：

```
RewriteEngine On

RewriteCond %{THE_REQUEST} !front.php [NC]
RewriteRule .* - [F,L] 
```

现在只有 fron.php 可供访问您的 apache 的任何人使用。

顺便说一句-据我所知-您可以强制 Apache 对特定目录中的任何内容进行身份验证，但不能对单个文件进行身份验证。

# java - 介绍java作业

> ID：12865545
> 
> 赞同：-1
> 
> 时间：2012-10-12T19:08:27.907
> 
> 标签：java, if-statement, random, for-loop

**我的作业说明：http:** [//media.orvsd.org/FLVS/backup-ap_computer_science_a_v9_gs_-20120821-1900/course_files/flvs/educator_apcsa_v9_gs/module05/rtfmod05/5.06_AssignmentInstructionsBottleCapPrize.pdf](http://media.orvsd.org/FLVS/backup-ap_computer_science_a_v9_gs_-20120821-1900/course_files/flvs/educator_apcsa_v9_gs/module05/rtfmod05/5.06_AssignmentInstructionsBottleCapPrize.pdf)

基本上，我必须进行 1000 次试验。每次试用都是我成功挑选“带奖瓶盖”的时候。因此，每次我获得该奖品时，我还必须查看我在获得该奖品之前经历了多少瓶盖。我最终应该输出的是平均需要经过多少瓶盖才能找到奖盖。

我无法在我的程序中获得平均数量的瓶子，这就是我需要帮助的地方。我的平均结果最终并不正确。至于文件的输入和输出，这是任务的一部分，我已经想通了，所以我不需要帮助。还有一件事，前两行 outputFile.println 代码只是为了测试程序是否正常工作。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.io.File;
import java.util.Scanner;
import java.util.Random;
public class BottleCapPrize
{
public static void main(String [] args) throws IOException
{
    PrintWriter outputFile = new PrintWriter(new File("MonteCarlo.txt"));
    Random randNum = new Random();
    int bottleCapNumber = 0;
    int wins = 0;
    int capsOpened = 0;

    for(int i = 1; i <= 1000; i++)
    {
        bottleCapNumber = randNum.nextInt(5);
        while(bottleCapNumber != 0)
        {
        bottleCapNumber = randNum.nextInt(5);
        capsOpened++;
        }
        if(bottleCapNumber == 0)
        {
            capsOpened++;
            wins++;
        }
    }
    outputFile.println(capsOpened);
    outputFile.println(wins);
    int averageNumberOfBottles = (int)(((double)wins / (double)capsOpened) * 10);
    outputFile.println("The average amount of bottles that need to be opened are: " + averageNumberOfBottles);    
    outputFile.close();

    Scanner inputFile = new Scanner(new File("MonteCarlo.txt"));
    while(inputFile.hasNextLine())
    {
        String token = inputFile.nextLine();
        System.out.println(token);
    }
        inputFile.close();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:23:11.627

虽然这可能不是问题的根源，但在我看来

```
while (bottleCapNumber != 0) {
    bottleCapNumber = randNum.nextInt(5);
    capsOpened++;
}
if (bottleCapNumber == 0) {
    capsOpened++;
    wins++;
} 
```

可以用更直接、更*清晰*的方式重写。由于在*while*语句的末尾，`bottleCapNumber` **必须**相等`0`（否则，您仍然会在 while 语句中循环），它可以被重写。

```
while (bottleCapNumber != 0) {
    bottleCapNumber = randNum.nextInt(5);
    capsOpened++;
}
capsOpened++;
wins++; 
```

由于加法的结合特性，很容易重新排列

```
capsOpened++;
while (bottleCapNumber != 0) {
    bottleCapNumber = randNum.nextInt(5);
    capsOpened++;
}
wins++; 
```

这很明显您正在使用基于 1 的编号例程`capsOpened`。

至于除法来计算平均值，正如其他人所指出的那样，您正在强制*整数*除法，这意味着您不会产生非整数输出（结果只会是完全可能的除法次数） . 这将极大地改变答案。

你需要的是

```
 double averageNumberOfBottles = ((double)capsOpened / wins); 
```

请注意`double`. `capsOpened`这会强制`capsOpened`将其作为实数值而不是整数值处理。由于`capsOpened`现在作为实数处理，除以整数也将产生一个实数。自然地，您需要一个实变量来保存结果，因此您不会截断数字。

我也不清楚你为什么决定分开`wins/capsOpened`，因为这会给你每个开放上限的平均获胜次数。我以为你想要每次获胜的平均打开盖帽数。引入一个狂野的“然后将其乘以 10”可能是试图找出问题所在的剩余部分，但您当然不想要 10 倍的正确答案。

最后一个副业。虽然`java.util.Random`是一个“好的”随机数生成器，但它不像其他一些选项那样随机。当然它是内置的，并且可以很快返回数字；但是，如果您真的想要更好（更慢）的随机数来源，请使用`java.secure.SecureRandom`. 在我的测试中，我通常会回来

```
with java.util.Random : 
4.696
4.948
4.766
4.901
4.832

with java.secure.SecureRandom : 
4.929
5.058
5.065
4.932
4.782 
```

这不足以确定输出差异的静态显着性，但它肯定表明它`java.util.Random`比很少超过 5.0 标记的随机性要`java.secure.SecureRandom`小`java.util.Random`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:21:29.250

您正在计算每次获胜打开的上限，因此**平均公式是错误的**应该是

```
 int averageNumberOfBottles = (capsOpened / wins); 
```

# php - 不明索引/非法字符串偏移

> ID：12865547
> 
> 赞同：0
> 
> 时间：2012-10-12T19:08:36.243
> 
> 标签：php, string, web, content-management-system

首先，我很抱歉问题标题没有解释太多，我是 PHP 新手，很难说出这个问题，因为我什至不确定什么是错的。

这是PHP

```
 <?php
    include 'includes/connection.php';

    $pName = $_POST['pName'];
    $pAuth = $_POST['pAuth'];
    $pCon = $_POST['pCon'];
    $Page = $_POST['Page'];
    $id = $_POST['id'];

    $update = "UPDATE content SET POST_TITLE = '$pname(pname)',POST_AUTHOR = '$pauth(pauth)',POST_CONTENT = '$pcon(pcon)',PAGE = '$page(page) WHERE ID = '$id[id]'";

    $result = mysql_query($update) or die (mysql_error());

    Header("Location:admin.php?refer=editsuccess");
?> 
```

和错误，

```
Notice: Undefined index: pauth in C:\xampp\htdocs\cms\editp.php on line 5

Warning: Illegal string offset 'id' in C:\xampp\htdocs\cms\editp.php on line 10 
```

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:20:07.217

这里有几点需要注意。

由于您尝试将变量插入查询字符串的方式，您会收到警告和通知。您首先将变量从 $_POST 中拉出并放入局部变量中。但是，您不是使用这些变量，而是尝试访问它们，就好像它们是函数和数组一样。记住 PHP 中的变量名区分大小写也很重要。您还缺少一两个报价。

查询应该看起来更像这样：

`$update = "UPDATE content SET POST_TITLE = '$pName', POST_AUTHOR = '$pAuth', POST_CONTENT = '$pCon', PAGE = '$Page' WHERE ID = '$id'";`

话虽如此，这个查询本质上是不安全的，因为用户可以很容易地[更改您的查询](http://st-curriculum.oracle.com/tutorial/SQLInjection/index.htm)并对您的数据库做各种有害的事情。

这些`mysql_`函数被认为是不安全和过时的，因此您可以通过将它们替换为两个更现代的 mysql 包装器之一来解决与 SQL 注入相关的问题：[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:16:51.170

我认为你的 mysql 查询应该是这样的：

```
$update = "UPDATE content SET POST_TITLE = '$pname',POST_AUTHOR = '$pauth',POST_CONTENT = '$pcon',PAGE = '$page' WHERE ID = '$id'"; 
```

# python - 如何在pygame上隐藏任务栏

> ID：12865549
> 
> 赞同：4
> 
> 时间：2012-10-12T19:08:38.723
> 
> 标签：python, pygame, taskbar, titlebar

我想知道有人知道如何隐藏 pygame 任务栏吗？

我的 pygame 程序真的需要这个！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-04T19:09:01.100

您可以使用`pygame.NOFRAME`：

```
screen = pygame.display.set_mode((640, 480), pygame.NOFRAME) 
```

[文档](http://pygame.org/docs/ref/display.html#pygame.display.set_mode)说：

> `pygame.NOFRAME display window will have no border or controls`

# ssh - 在终端（iTerm2）中留下 tmux 回滚

> ID：12865559
> 
> 赞同：18
> 
> 时间：2012-10-12T19:09:33.417
> 
> 标签：ssh, tmux, gnu-screen, tty, iterm

通常`tmux`只会显示与我的终端当前显示的行数一样多的输出。然后当我分离它时，它会清除它的所有内容。我知道如何查看回滚 ( `ctrl+A`, `[`, `k`, ...)，但是如何配置 tmux 以将其所有输出打印到终端，就好像我根本没有使用它一样？

我喜欢`tmux`是因为我不擅长记住`nohup`某些任务，并且因为它使查看长时间运行的作业的输出变得更容易。但我希望能够更自然地查看它的回滚，只需在 iTerm2 中回滚即可*。*

或者，如果有办法做到这一点`screen`，我也可以使用它。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-10T01:20:04.230

iTerm2 build 1.0.0.20130302 有一个首选项，即使存在所谓的硬状态行，它也能捕获回滚：

![iTerm2 首选项窗格](../Images/c93ad07961f26f8d8f9cf26d63750f17.png)

对我有用，用`tmux`v1.8 测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-12T16:20:35.730

我在 Superuser.com 上偶然发现了另一种解决方案：[使用终端滚动条和 tmux](https://superuser.com/questions/310251/use-terminal-scrollbar-with-tmux)。将此添加到您的`~/.tmux.conf`：

```
# Pretend our terminal doesn't support alternative screens, and thus all text 
# should be placed into the scrollback buffer when it goes off the top of the 
# screen.
#
# https://superuser.com/questions/310251/use-terminal-scrollbar-with-tmux
set-option -ga terminal-overrides ',xterm*:smcup@:rmcup@' 
```

适用于`gnome-terminal`v3.4.1.1 和`tmux`v1.9

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-28T11:00:14.663

将此添加到您的`~/.tmux.conf`，您只需滚动即可进入复制模式：

```
setw -g mode-mouse on 
```

您可能还想启用其他鼠标功能：

```
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on 
```

请参阅这些功能的优秀文章：http: [//tangledhelix.com/blog/2012/07/16/tmux-and-mouse-mode/](http://tangledhelix.com/blog/2012/07/16/tmux-and-mouse-mode/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T22:03:55.453

就我而言，只需`set-option -g status off`输入`.tmux.conf`就可以将回滚留在终端中。但是你失去了状态栏。

# c# - 如何使用for循环修改多个控件（gridview）

> ID：12865562
> 
> 赞同：0
> 
> 时间：2012-10-12T19:09:38.360
> 
> 标签：c#, asp.net, gridview

大家好，是否可以使用for循环来循环一组gridviews并修改它们中的每一个？

假设我有 10 个名为 Gridview1、Gridview2、Gridview3 等的网格视图。

我可以写类似的东西吗

```
for(int i=1; i<=10;i++)
{
    Gridview[i].Rows[1]...
} 
```

希望我足够清楚，对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:16:15.790

在你的 for 循环中，

```
for(int i=1; i<=10; i++)
{
    (Page.FindControl("GridView" + i) as GridView).Rows[1]...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:14:01.047

你可以使用`foreach`循环。像这样。

```
 foreach (GridView gv in Page.Controls.OfType<GridView>())
        {
           gv.Rows[1].........
        } 
```

其他方法，如果您使用的是 2.0 版本

```
for(int i=1; i<=10; i++)
{
     ((GridView) Page.FindControl("GridView" + i)).Rows[1].........
} 
```

[更多关于 foreach](http://www.dotnetperls.com/foreach)和[OfType](http://www.dotnetperls.com/oftype)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:14:11.910

前提是您已经将网格视图存储在这样的列表中：

```
List<DataGridView> GridViews = new List<DataGridViews>();

GridViews.Add(myFirstGridView);
GridViews.Add(mySecondGridView);
.... 
```

# c - Linux 上的 UTF-16 的 wchar_t？

> ID：12865564
> 
> 赞同：5
> 
> 时间：2012-10-12T19:09:44.243
> 
> 标签：c, linux, unicode, utf-16, wchar-t

`wchar_t*`在 Linux上存储 UTF-16 编码的文本是否有意义？明显的问题是`wchar_t`在 Linux 上是四个字节，而 UTF-16 通常每个字符占用两个（或有时两组两个）字节。

我正在尝试使用可以完全做到这一点的第三方库，这似乎很令人困惑。看起来事情搞砸了，因为在 Windows 上`wchar_t`是两个字节，但我只是想仔细检查一下，因为它是一个非常昂贵的商业库，可能我只是不明白一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T20:03:09.200

虽然可以将 UTF-16 存储在 中`wchar_t`，但此类`wchar_t`值（或用作字符串的数组）不适合与任何采用`wchar_t`或指向`wchar_t`字符串的标准函数一起使用。因此，要回答您最初的“这有意义吗……？”的问题，我会以明确的否定回答。你当然可以使用`uint16_t`这个目的，或者`char16_t`如果 C11 可用的话，虽然我看不出有任何理由为什么后者会更可取，除非你也打算使用 C11 函数来处理它（而且它们似乎没有尚未实施）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T19:21:41.163

[http://userguide.icu-project.org/strings](http://userguide.icu-project.org/strings)说

> Unicode 标准定义了基于 16 位代码单元的默认编码。ICU 中将 定义为`UChar`无符号 16 位整数类型支持这一点。这是 ICU 中字符串的字符数组的基本类型。

因此，如果您使用 ICU，那么您可以使用`UChar*`. 如果没有，如果`uint16_t`您想与`UChar`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:47:10.403

好吧，最好的解决方案可能是使用`char16_t`UTF-16，因为这是标准的 16 位字符类型。从 gcc 4.4 开始就已支持此功能，因此应该存在于您将看到的大多数 Linux 系统上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T20:34:04.723

不，解码 UTF-16 并将其存储在 wchar_t 数组中是有意义的。并非所有 Unicode 代码点在 UTF-16 中都只有一个 16 位字，但它们都适合 wchar_t。

无论如何，UTF-16 是比其他任何东西都更糟糕的折衷方案，并且永远不应该使用。要么使用 UTF-8（在大多数情况下效率更高，也更常用），要么使用 wchar_t[]。

# android - 如何给蓝色轮廓编辑文本android？

> ID：12865567
> 
> 赞同：11
> 
> 时间：2012-10-12T19:09:54.613
> 
> 标签：android

我有一个编辑文本视图，我希望它的边框是蓝色的，只有它的边框或轮廓是蓝色的，而不是完整的编辑文本视图。如何获得蓝色边框？请帮忙

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T19:12:17.247

您可以使用[可绘制形状](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)作为编辑文本视图的背景。您可以在 res/drawable 文件夹中的 xml 文件中定义它：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/transparent" />
    <stroke
        android:width="1dp"
        android:color="#0000ff" />
</shape> 
```

如果要根据编辑文本视图是否具有焦点等来制作背景变量，则可以将上述内容用作[状态列表 drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)的一个元素。

# json - 过滤 Jackson 中的字段和子字段

> ID：12865569
> 
> 赞同：5
> 
> 时间：2012-10-12T19:10:00.223
> 
> 标签：json, serialization, filter, field, jackson

对于一些 JSON：

```
{
  "id":123,
  "name":"Test",
  "sub_object":{
    "sub_field_1":1,
    "sub_field_2":2,
    "sub_field_array":[
      {
        "array_field_1":true,
        "array_field_2":false
      },
      {
        "array_field_1":false,
        "array_field_2":true
      }
    ],
    "sub_sub_object":{
      "field_1":"me",
      "field_2":"myself",
      "field_3":"i",
    }
  }
} 
```

我想应用一个树状的字段名称列表。这可能用 JSONPath 表示：

```
root
  |-id
  |-sub_object
    |-sub_field_2
    |-sub_field_array
      |-array_field_1
    |-sub_sub_object 
```

然后我应该得到类似的东西：

```
{
  "id":123,
  "sub_object":{
    "sub_field_2":2,
    "sub_field_array":[
      {
        "array_field_1":true
      },
      {
        "array_field_1":false
      }
    ],
    "sub_sub_object":{
      "field_1":"me",
      "field_2":"myself",
      "field_3":"i",
    }
  }
} 
```

这个想法是，对于某些字段层次结构，我想限制输出的字段。

我正在通过一个已注释其对象字段的库来执行此操作，但我无法修改该库。我是否可以这样做并不重要，因为层次结构将基于每个序列化。目前，我将对象传递给 JsonGenerator 的 writeObject 方法，但这会返回所有内容。

一些子对象可能共享字段名，所以并不是创建一个 SimpleBeanPropertyFilter 来只序列化一组名称那么简单。

先感谢您，

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T17:02:36.810

您可以编写一个自定义属性过滤器，该过滤器将考虑到序列化属性的声明类。

您应该扩展[SimpleBeanPropertyFilter](http://fasterxml.github.io/jackson-databind/javadoc/2.3.0/com/fasterxml/jackson/databind/ser/impl/SimpleBeanPropertyFilter.html)并覆盖该`include(PropertyWriter writer)`方法。如果给定的`writer`参数是`BeanPropertyWriter`类的实例，您可以提取有关属性来源的信息并应用您的自定义过滤逻辑。

下面是一个过滤器示例，它将排除信息存储在类及其属性名称的映射中：

```
public class JacksonHierarchyFilter {
    @JsonFilter("filter")
    public static class A {
        public final String field1;

        public A(final String field1) {this.field1 = field1;}
    }

    @JsonFilter("filter")
    public static class B {
        public final String field1;
        public final List<A> list;

        public B(final String field1, final List<A> list) {
            this.field1 = field1;
            this.list = list;
        }
    }
    @JsonFilter("filter")
    public static class Foo {
        public final String field1;
        public final List<B> field2;

        public Foo(final String field1, final List<B> field2) {
            this.field1 = field1;
            this.field2 = field2;
        }
    }

    public static class MyFilter extends SimpleBeanPropertyFilter {
        private final Map<Class<?>, Set<String>> excludePropMap;

        public MyFilter(final Map<Class<?>, Set<String>> excludePropMap) {
            this.excludePropMap = excludePropMap;
        }

        @Override
        protected boolean include(final BeanPropertyWriter writer) {
            return false;
        }

        @Override
        protected boolean include(final PropertyWriter writer) {
            if (writer instanceof BeanPropertyWriter) {
                final Class<?> cls = ((BeanPropertyWriter) writer).getMember().getDeclaringClass();
                final Set<String> excludePropSet = excludePropMap.get(cls);
                return excludePropSet == null || !excludePropSet.contains(writer.getName());
            }
            return true;
        }
    }

    public static void main(String[] args) throws JsonProcessingException {
        final B b = new B("B1", Arrays.asList(new A("A1"), new A("A2")));
        final Foo foo = new Foo("foo", Arrays.asList(b));
        final ObjectMapper mapper = new ObjectMapper();
        final SimpleFilterProvider filters = new SimpleFilterProvider();
        final Map<Class<?>, Set<String>> excludePropMap =
                Collections.<Class<?>, Set<String>>singletonMap(
                        B.class,
                        Collections.singleton("field1"));
        filters.addFilter("filter", new MyFilter(excludePropMap));
        mapper.setFilters(filters);
        final ObjectWriter objectWriter = mapper.writerWithDefaultPrettyPrinter();
        System.out.println(objectWriter.writeValueAsString(foo));
    }

} 
```

输出：

```
{
  "field1" : "foo",
  "field2" : [ {
    "list" : [ {
      "field1" : "A1"
    }, {
      "field1" : "A2"
    } ]
  } ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T12:25:49.867

我需要在我的序列化中添加一个自定义忽略注释。我最终的结果是

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
@Documented
public @interface Unsigned {} 
```

和

```
ObjectMapper mapper = new ObjectMapper();
mapper.configure(SerializationConfig.Feature.SORT_PROPERTIES_ALPHABETICALLY, true);
mapper.setAnnotationIntrospector(new JacksonAnnotationIntrospector() {
    @Override
    public String[] findPropertiesToIgnore(AnnotatedClass ac) {
        Set<String> result = new HashSet<>();
        for (AnnotatedField field : ac.fields()) {
            if (field.getAnnotated().isAnnotationPresent(Unsigned.class)) {
                result.add(field.getName());
            }
        }
        String[] tmp = super.findPropertiesToIgnore(ac);
        if (tmp != null) {
            result.addAll(Arrays.asList(tmp));
        }
        return result.toArray(new String[] {});
    }
});
ObjectWriter writer = mapper.writer(); 
```

# ruby-on-rails - 用于数据映射器迁移的“schema_migrations”表

> ID：12865572
> 
> 赞同：0
> 
> 时间：2012-10-12T19:10:31.933
> 
> 标签：ruby-on-rails, ruby, migration, datamapper

我在 Rails 应用程序中使用 datamapper 而不是 activerecord。我想查看版本详细信息，但在`schema_migrations`任何地方都看不到表格。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:10:36.710

如果您将显式迁移与[dm-migrations](https://github.com/datamapper/dm-migrations#readme)一起使用，它将创建一个`migration_info`包含迁移名称的表。

```
CREATE TABLE "migration_info" ("migration_name" VARCHAR(255) UNIQUE); 
```

# spring - 为什么我的图片没有出现在我的 Spring Web Flow 项目中

> ID：12865576
> 
> 赞同：0
> 
> 时间：2012-10-12T19:10:42.240
> 
> 标签：spring, spring-mvc, spring-webflow

为什么我的图片没有显示在我的 Spring Web Flow 项目中。

我的jsp页面中有以下代码

```
<img src="<c:url value="/images/getacro.gif" />" alt="Get Adobe Reader" align="top" height="31" width="88"> 
```

但图像没有显示在我的 Spring webflow 项目的网页上。所以我检查了我的 tomcat 服务器，我确实在以下位置看到了图像：

**apache-tomcat-7.0.29/webapps/Enroll/images**

但我检查了日志，我在日志中看到了 404 错误：

[12/Oct/2012:15:04:13 -0400]“GET /Enroll/images/getacro.gif HTTP/1.1”404 952

但它在文件系统上。它可能是什么......我认为这是我的弹簧设置。

这是我的 mvc.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <mvc:annotation-driven />

  <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"
          p:basenames="messages" />

    <!-- Declare the Interceptor -->
    <mvc:interceptors>    
        <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor"
              p:paramName="locale" />
    </mvc:interceptors>

  <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

</beans> 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

    <display-name>Enroll</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/root-config.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>Resource Servlet</servlet-name>
        <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
    </servlet>

    <!-- Map all /resources requests to the Resource Servlet for handling -->
    <servlet-mapping>
        <servlet-name>Resource Servlet</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

    <!-- Spring Security Configuration -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:16:50.947

从你的配置文件中，因为你有一个资源 servlet，我会说试试

`<img src="<c:url value="/resources/images/getacro.gif" />" alt="Get Adobe Reader" align="top" height="31" width="88">`

# c++ - std::decimal::decimal64 正确用法，g++ 4.6.3

> ID：12865585
> 
> 赞同：11
> 
> 时间：2012-10-12T19:11:21.693
> 
> 标签：c++, g++, decimal

我正在研究用 g++ 的 std::decimal::decimal32/64/128 类型替换我们的代码中的双精度，以达到货币数量和价格的目的，但是我陷入了如何最好地输入和输出的问题上数据。具体来说，似乎没有任何用于与字符串进行转换的例程，并且字符串流机制不会针对这些类型进行编译。我看到这样做的唯一方法是使用 double 作为中间类型，但是如果我们总是通过双精度输入和输出，这肯定至少部分违背了使用小数类型的目的？

我确定我在这里不了解某些内容，因此欢迎就如何最好地使用这些类型提供一些反馈。

编辑：

我已经破解了几个输入/输出例程，但是我对任何一个都不满意。输入几乎没有鲁棒性（不支持科学记数法），输出例程过于简单，更不用说由于双重转换而导致的低效。

```
#define MAX_DEC_LEN 17

std::decimal::decimal64 FromString(const char* str)
{
    if (strlen(str) > MAX_DEC_LEN)
        throw std::runtime_error("bad input");
    char buf[MAX_DEC_LEN+1];
    strncpy(buf, str, MAX_DEC_LEN+1);
    char* point(NULL); 
    if ((point = strchr(buf, '.')) != NULL)
        *(point++) = '\0';
    std::decimal::decimal64 ret(atoi(buf));
    if (point != NULL && *point != '\0')
    {
        int exponent(strlen(point));
        long long unsigned coeff(atoi(point));
        std::decimal::decimal64 d2(std::decimal::make_decimal64(coeff, -exponent));
        if (*buf == '-')
            ret -= d2;
        else
            ret += d2;
    }
    return ret;    
}

std::string ToString(std::decimal::decimal64 dec)
{
    double d(std::decimal::decimal_to_double(dec));
    std::ostringstream oss;
    oss << std::fixed << std::setprecision(6) << d;
    return oss.str();
} 
```

我真的对这两个方面都有更好的追求，再加上一轮（以特定的精度）来四舍五入（请原谅双关语）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T19:22:41.307

[Decimal TR](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2849.pdf)分别在第 3.2.10 节和第 3.2.11 节中定义了输入和输出的重载。从外观上看，它们不是由 gcc 实现的。gcc 中的十进制支持是根据 libdecnum 实现的，它提供了从字符串转换为字符串的例程。我将使用 I/O 运算符创建一个简单的实现来开始。

编辑于 2012-10-17：查看格式化 gcc 库（`std::decimal::decimal64`和系列）中的十进制值显示，不幸的是 gcc 没有安装 decNumber 库头文件或库。此外，[decNumber](http://download.icu-project.org/files/decNumber/)的其他来源与 gcc 附带的版本不太一致。结果，到目前为止，我发现格式化十进制数字的唯一方法是使用显式声明并在编译 gcc 期间使用库构建。

简单的部分是源代码，尽管实现相当简单。首先，将进入合适标题的声明，例如`<decimal/decimal>`：

```
std::ostream& operator<< (std::ostream&, std::decimal::decimal32 const&);
std::ostream& operator<< (std::ostream&, std::decimal::decimal64 const&);
std::ostream& operator<< (std::ostream&, std::decimal::decimal128 const&); 
```

一个相当简单的实现一些格式化的东西，虽然没有任何选项可能看起来像这样：

```
extern "C" char* decimal32ToString(std::decimal::decimal32 const*, char*);
extern "C" char* decimal64ToString(std::decimal::decimal64 const*, char*);
extern "C" char* decimal128ToString(std::decimal::decimal128 const*, char*);

std::ostream& operator<< (std::ostream& out,
                          std::decimal::decimal32 const& value)
{
    char buffer[128];
    decimal32ToString(&value, buffer);
    return out << buffer;
}

std::ostream& operator<< (std::ostream& out,
                          std::decimal::decimal64 const& value)
{
    char buffer[128];
    decimal64ToString(&value, buffer);
    return out << buffer;
}

std::ostream& operator<< (std::ostream& out,
                          std::decimal::decimal128 const& value)
{
    char buffer[128];
    decimal128ToString(&value, buffer);
    return out << buffer;
} 
```

有了这个，仍然存在一个问题，除非使用某种程度的优化，即`-O1`（或更高），否则我无法使用小数构建任何东西。除非使用优化，否则存在未引用的符号，但这与打印值完全无关。为了获得实现中使用的函数的定义，我需要链接到在`libdecnumber.a`构建 gcc 时创建的库：

```
g++ -o prog decimal-io.cpp main.cpp <gcc-build-root>/libdecnumber/libdecnumber.a 
```

除此之外，我有自己的[Decimal TR](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2849.pdf)实现，带有[一些扩展](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3407.html)，并基于 decnumber 库并正确实现 I/O。我的实现有望在某个时候公开发布，但不会很快。

# java - 在java环境中解析C++源代码

> ID：12865587
> 
> 赞同：7
> 
> 时间：2012-10-12T19:11:23.317
> 
> 标签：java, c++, static-analysis, abstract-syntax-tree

我有一个 C++ 应用程序，我也有它的源代码，它是基于 .Net 框架构建的。我现在正在寻找的是一种工具（理想情况下是免费的），它可以将我的源代码作为输入，并且经过一些预处理或一些必需的编程后，可以为我提供源代码元素的结构依赖性的中间表示，例如 AST 或调用图。我正在使用 java 来检查这个 C++ 源代码，所以如果解决方案是在 java 环境中，比如 eclipse 的插件或其他东西，那就更好了。有没有适合我需要的可用工具？谢谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:17:35.687

你可能对 doxygen 感兴趣，它是一个基于源代码生成文档的免费工具。无需任何额外工作，您就可以生成调用图、继承图、协作图和许多其他有用的工具。

[http://www.doxygen.nl/](http://www.doxygen.nl/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T06:54:58.480

我已经使用 NetBeans 的 CND 模块成功地解析了 Java 中的 C++。它仍然丑陋，但可能比使用原始 ANTLR 或其他更好。[首先，为简单起见，从http://netbeans.org/downloads/zip.html](http://netbeans.org/downloads/zip.html)下载“all-in-one”包（CND 实际上并不需要所有这些类）并将其解压缩到当前目录中的某个位置。接下来，这是我一直在玩的一个玩具 C++ 头文件：

```
namespace foo {

int f(int p);

template<typename A> class bar {
    void run(A) { }
};

} 
```

这是我用 CND 解析它的尝试：

```
import java.io.*;
import java.util.*;
import org.openide.filesystems.*;
import org.netbeans.modules.cnd.api.model.*;
import org.netbeans.modules.cnd.api.model.services.*;
import org.netbeans.modules.cnd.modelimpl.csm.*;

public class Foo {
    public static void main(String[] args) throws Exception {
        FileObject fo = FileUtil.toFileObject(new File(args[0]));
        CsmStandaloneFileProvider fp = CsmStandaloneFileProvider.getDefault();
        CsmModel model = CsmModelAccessor.getModel();
        CsmModelState modelState = CsmModelAccessor.getModelState();

        CsmFile cf = fp.getCsmFile(fo);
        cf.scheduleParsing(true);
        Collection<CsmOffsetableDeclaration> c = cf.getDeclarations();
        c = ((CsmNamespaceDefinition)c.toArray()[0]).getDeclarations();
        for (CsmOffsetableDeclaration d : c) {
            if (d instanceof CsmFunction) {
                CsmFunction f = (CsmFunction)d;
                System.out.print(f.getQualifiedName() + " " + f.getName() + "(");
                Collection<CsmParameter> pp = f.getParameters();
                for (CsmParameter p : pp) {
                    System.out.print(p.getType().getClassifierText());
                }
                System.out.println(")");
            } else if (d instanceof ClassImpl) {
                ClassImpl cls = (ClassImpl)d;
                System.out.println("Got template? " + cls.isTemplate());
                List<CsmTemplateParameter> lt = cls.getTemplateParameters();
                for (CsmTemplateParameter t : lt) {
                    System.out.println(t.getQualifiedName() + " " + t.getName());
                }
                Collection<CsmMember> cm = cls.getMembers();
                for (CsmMember m : cm) {
                    CsmFunction f = (CsmFunction)m;
                    System.out.print(f.getQualifiedName() + " " + f.getName() + "(");
                    Collection<CsmParameter> pp = f.getParameters();
                    for (CsmParameter p : pp) {
                        System.out.print(p.getType().getClassifierText());
                    }
                    System.out.println(")");
                }
            }
        }
    }
} 
```

我们需要添加到类路径中的 JAR 文件的数量非常大，并且必须有更好的方法来处理这个问题，但目前这可行：

```
$ export CLASSPATH=netbeans/platform/modules/org-netbeans-modules-editor-mimelookup.jar:netbeans/platform/modules/org-netbeans-modules-queries.jar:netbeans/dlight/modules/org-netbeans-modules-dlight-libs-common.jar:netbeans/ide/modules/org-netbeans-modules-projectapi.jar:netbeans/platform/modules/org-netbeans-api-progress.jar:netbeans/platform/modules/org-openide-windows.jar:netbeans/platform/modules/org-openide-text.jar:netbeans/platform/modules/org-openide-awt.jar:netbeans/platform/lib/org-openide-modules.jar:netbeans/platform/modules/org-openide-nodes.jar:netbeans/platform/modules/org-netbeans-modules-masterfs.jar:netbeans/platform/core/org-openide-filesystems.jar:netbeans/platform/lib/org-openide-util.jar:netbeans/platform/lib/org-openide-util-lookup.jar:netbeans/platform/modules/org-openide-loaders.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-api-model.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-api-project.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-model-services.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-modelimpl.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-modelutil.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-utils.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-repository.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-repository-api.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-apt.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-source.jar:netbeans/cnd/modules/org-netbeans-modules-cnd-antlr.jar:.
$ javac Foo.java
$ java Foo Foo.h 
```

并输出以下内容：

```
foo::f f(int)
Got template? true
foo::bar::A A
foo::bar::run run(A) 
```

顺便说一句，我们可以用 Eclipse CDT 做类似的事情： [Parsing / reading C-Header files using Java](https://stackoverflow.com/questions/10300021/parsing-reading-c-header-files-using-java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-16T02:54:41.657

您可以使用以纯**Java**实现且只有 2 个 jar的**Eclipse Parser 。**我已经给出了如何使用的详细信息，请参见链接：[https ://stackoverflow.com/a/27496664/955857](https://stackoverflow.com/a/27496664/955857)

 **上面的链接还有一个项目，它对 Eclipse Parser 进行了抽象，带来了更简单的结构（但并不适合所有情况）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:35:09.170

根据您的要求，您可能会对 Synopsis 感兴趣：[http ://synopsis.fresco.org/](http://synopsis.fresco.org/)

这是一个解析源代码（C/C++/Python/IDL）并生成抽象语法图的模块化工具。该图可以通过 API 进行遍历（例如，也可以将其传递给其他概要模块以生成源文档）。Synopsis 提供 C++ 和 Python API，不幸的是没有 Java API - 但我想它可以通过 Jython（当然也可以是 JNI ;-) 从 Java 中使用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T19:39:40.073

我认为你应该看看 Xogastan。它将 C++ 的 AST 生成为 XML 文档。Xogastan 有很多选择。

[索加斯坦之家](http://xogastan.sourceforge.net/intro.html)

问候，

编辑：它不直接与 Java 连接，但您可以将其用作外部工具，然后分析生成的 XML。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-10T05:11:29.570

塞缪尔·奥德特是对的！但他缺少 JAR 文件。您需要添加以下 JAR 文件：org-netbeans-modules-cnd-indexing.jar、org-netbeans-modules-parsing-lucene.jar、org-netbeans-libs-lucene.jar 和 lucene-core-3.5.0 。罐。**

# c# - 在 ASP.NET 的中继器上使用 JQuery TableSorter 插件不起作用

> ID：12865591
> 
> 赞同：2
> 
> 时间：2012-10-12T19:11:51.933
> 
> 标签：c#, jquery, .net, tablesorter

我正在尝试使用此[页面](http://tablesorter.com/docs/)中的 tablesorter 插件。这是一个非常简单的插件，可以在客户端进行排序。

这是我的中继器：

```
<asp:Repeater ID="RepeaterChangeLog" runat="server" >
        <HeaderTemplate>
            <table id="ChangeLogTable" class="table tablesorter table-bordered"> 
            <thead>
                <tr>
                <th>Date de correction</th>
                <th>Correcteur</th>
                <th>BugID</th>
                <th>Catégorie</th>
                <th>Module</th>
                <th>Description de la correction</th>
                <th>Impact</th>
                <th>Rapporté par</th>
                <th>Demandé par</th>
                </tr>
            </thead>
        </HeaderTemplate>
        <ItemTemplate>
            <tbody>
                <tr>
                    <td width="125px"> <%# DataBinder.Eval(Container.DataItem, "ChangeLogDate")%></a></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "FixedBy")%> </td>
                    <td width="75px"> <%# DataBinder.Eval(Container.DataItem, "BugID")%> </td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "Category")%> </td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "Module")%> <%# DataBinder.Eval(Container.DataItem, "AdditionalModule")%></td>
                    <td width="300px"> <%# DataBinder.Eval(Container.DataItem, "Description")%> </td>
                    <td width="300px"> <%# DataBinder.Eval(Container.DataItem, "Impact")%> </td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "ReportedBy")%> </td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "AskedBy")%> </td>
                </tr>
            </tbody>
        </ItemTemplate>

        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

这是我如何称呼tablesorter

```
$(document).ready(function () {
            $("#ChangeLogTable").tablesorter();
    }); 
```

结果很奇怪。我可以看到应用了 CSS，当我单击标题时，向上和向下箭头正在改变，但排序本身不起作用。[我尝试了](http://tablesorter.com/docs/#Getting-Started)在**同一**页面中找到的一个非常简单的表，并且该表运行良好。我可以看到两者之间的唯一区别是一个是使用转发器生成的，另一个是纯 HTML。在我看来，这应该没有什么不同，因为结果是相同的 html，但也许微软在标题中放置了一些秘密和隐藏代码，导致插件失败。

我希望有人可以帮助我解决这个问题！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:11:06.477

我发现了问题，我不敢相信我第一次没有看到它，但是呃……那是星期五！

该插件与我不太习惯的“新”thead 和 tbody 一起使用。创建中继器时，我只是将thead 放在HeaderTemplate 中，将tbody 放在ItemTemplate 中。但我忘记的是 ItemTemplate 在每一行都不断重复，所以我的表有多个 tbody。这是不行的，插件不能用这个。换句话说，那是糟糕的 HTML。

所以这是一个很好的中继器，将 tbody 放置在正确的位置：

```
<asp:Repeater ID="RepeaterChangeLog" runat="server" >
        <HeaderTemplate>
            <table id="ChangeLogTable" class="table tablesorter table-bordered"> 
            <thead>
                <tr>
                <th>Date de correction</th>
                <th>Correcteur</th>
                <th>BugID</th>
                <th>Catégorie</th>
                <th>Module</th>
                <th>Description de la correction</th>
                <th>Impact</th>
                <th>Rapporté par</th>
                <th>Demandé par</th>
                </tr>
            </thead>
            <tbody>
        </HeaderTemplate>
        <ItemTemplate>
                <tr>
                    <td width="125px"> <%# DataBinder.Eval(Container.DataItem, "ChangeLogDate")%></a></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "FixedBy")%></td>
                    <td width="75px"><a href="http://adobs.aquadata.com/edit_bug.aspx?id=<%# DataBinder.Eval(Container.DataItem, "BugID")%>"><%# DataBinder.Eval(Container.DataItem, "BugID")%></a></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "Category")%></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "Module")%> <%# DataBinder.Eval(Container.DataItem, "AdditionalModule")%></td>
                    <td width="300px"> <%# DataBinder.Eval(Container.DataItem, "Description")%></td>
                    <td width="300px"> <%# DataBinder.Eval(Container.DataItem, "Impact")%></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "ReportedBy")%></td>
                    <td width="100px"> <%# DataBinder.Eval(Container.DataItem, "AskedBy")%></td>
                </tr>                
        </ItemTemplate>
        <FooterTemplate>
            </tbody>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T19:00:50.117

我遇到的一个问题是我引用的是中继器 ID，而不是其中的表的 ID。

# css - 列表中的项目符号如何删除它

> ID：12865596
> 
> 赞同：-1
> 
> 时间：2012-10-12T19:12:12.593
> 
> 标签：css, list

您好，我想知道如何使用 css 覆盖它，我尝试了内容：“。” 在我的课上，但不工作。

```
.postcontent ul > li::before, .post ul > li::before, .textblock ul > li::before {
content: url('../images/postbullets.png'); 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:15:44.380

这将从您的列表中删除项目符号并将其替换为您的图像：

```
.postcontent ul > li {
    list-style-type: none;
    list-style-image: url('../images/postbullets.png');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:15:35.460

尝试这个：

```
li {list-style-type: none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:15:36.803

如何删除列表中的项目符号？我有一种我误读了这个问题的感觉......

CSS

```
list-style-type: none; 
```

[http://www.w3schools.com/cssref/pr_list-style-type.asp](http://www.w3schools.com/cssref/pr_list-style-type.asp)

# c# - 如何编写通用测试方法以确保一个类具有单独类的属性子集？

> ID：12865598
> 
> 赞同：1
> 
> 时间：2012-10-12T19:12:21.483
> 
> 标签：c#, generics, properties, lambda

我正在努力编写一个测试方法来确定一个类是否具有不同类的属性的超集。这是为了从域对象映射到视图模型对象，因此这两个类之间没有关系。

例如，如果我有域类`Foo`和视图模型类`FooMap`，我想测试它们`Foo`具有`FooMap`预期的属性。

```
public class Foo
{
    public string Bar { get;set; }
    public string Baz { get;set; }
    public string NoOneCaresProp { get; set; }

    public string GetBarBaz() { return Bar + Baz; }
}

public class FooMap
{
    public string Bar { get; set; }
    public string GetBarBaz { get; set; }
    public string NotAFooProp { get; set; }
} 
```

鉴于`FooMap`此测试目的的属性，我想确保该类`Foo`具有`Bar`属性和`GetBarBaz`方法。应忽略任一类的其他方法或属性。我编写了以下静态方法来执行这样的测试，但对我的实现不满意：

```
public static void ExpectedPropertiesExist<TSource, TDestination, R>(params
    Expression<Func<TDestination, R>>[] exclude)
{
    var excludedProperties = exclude.Select(e => (e.Body as
        MemberExpression).Member.Name);
    var mappedProperties = typeof(TDestination).GetProperties()
        .Select(p => p.Name)
        .Except(excludedProperties);

    var sourceType = typeof(TSource);

    var baseTypeNames = sourceType.GetProperties().Select(b => b.Name).ToList();
    baseTypeNames.AddRange(sourceType.GetMethods().Select(b => b.Name));

    Assert.IsTrue(new HashSet<string>(baseTypeNames)
        .IsSupersetOf(mappedProperties));
} 
```

调用上述代码的代码并不像我希望的那样简洁：

```
// what my call to the function looks like now
TestExtensionFun.ExpectedPropertiesExist<Foo, FooMap,
    object>(fm => fm.NotAFooProp);

// I'd prefer it to look like this
TestExtensionFun.ExpectedPropertiesExist<Foo, FooMap>(fm => fm.NotAFooProp); 
```

我也不确定该方法是否尽可能熟练。编写通用测试方法以确保类具有单独类的属性子集的最佳机制是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T14:16:56.280

由于您并不真正关心表达式返回什么（您将 object 作为 R 的类型传递），您可以从 ExpectedPropertiesExist 方法中删除泛型类型参数 R：

```
public static void ExpectedPropertiesExist<TSource, TDestination>(params
    Expression<Func<TDestination, object>>[] exclude)
{
    var excludedProperties = exclude.Select(e => (e.Body as
        MemberExpression).Member.Name);
    var mappedProperties = typeof(TDestination).GetProperties()
        .Select(p => p.Name)
        .Except(excludedProperties);

    var sourceType = typeof(TSource);

    var baseTypeNames = sourceType.GetProperties().Select(b => b.Name).ToList();
    baseTypeNames.AddRange(sourceType.GetMethods().Select(b => b.Name));

    Assert.IsTrue(new HashSet<string>(baseTypeNames)
        .IsSupersetOf(mappedProperties));
} 
```

这样，您可以使用所需的语法（只有两个泛型类型参数）调用该方法。

# ruby-on-rails - rails 控制器，仅在未定义时覆盖受保护的方法

> ID：12865601
> 
> 赞同：1
> 
> 时间：2012-10-12T19:12:31.163
> 
> 标签：ruby-on-rails

所以我有一个控制器，它从应用程序控制器向下继承。它定义了各种受保护的方法，应用程序控制器也是如此。现在，如果应用程序控制器已经定义了这些方法，我不希望它们被其子类覆盖。我一直在这个控制器中尝试一些事情，例如：

```
class SomeController < ApplicationController

protected
  unless instance_methods.include? "some_method"
    def some_method
    end
  end 
```

但是，使用 Rails 记录器，我仍然可以看到正在调用 some_method。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:22:47.963

做一些进一步的搜索，我能够弄清楚:)，这要感谢这里关于这个问题的海报：[如何判断一个方法是否在一个类中定义？](https://stackoverflow.com/questions/3403004/how-to-judge-whether-a-method-has-defined-in-a-class)

```
class SomeController < ApplicationController

protected
  unless method_defined? "some_method"
    def some_method
    end
  end 
```

# git - 我应该如何从现有的 Git 存储库中创建一个单独的项目？

> ID：12865607
> 
> 赞同：0
> 
> 时间：2012-10-12T19:13:00.400
> 
> 标签：git, version-control, github

我有一个网站，自从我开始研究它以来，我就在 git 中对其进行了跟踪。现在我想使用类似的代码建立第二个网站。我的第一个想法是，“好吧，我将克隆 ClientA 的存储库，将克隆重命名为 ClientB 并从那里开始。” 但在我看来，这似乎不是组织它的理想方式。最终，我想我想要一个名为 WebsiteBoilerplate 的仓库，每个客户都有几个分支。或者我应该为每个客户创建单独的仓库？**这类事情有最佳实践吗？**还是我应该按照我的感觉去做？有一次，我确定了我需要去哪里，**我需要一些帮助，从这里到那里，就我需要运行哪些命令而言**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:17:21.373

就像它所依赖的一切一样，但是拥有一个开发通用代码的主分支听起来是一种合理的方法。然后，您可以为每个站点拥有不同的分支，并保持站点特定的分支与公共 master 同步。

创建站点特定的分支很容易：

```
git checkout -b siteName 
```

通过合并或重新调整来自 master 的更改，与 master 保持同步

```
git merge master 
```

或者

```
git rebase -i master 
```

如果您想在一段时间后拥有单独的存储库，您也可以这样做。只需 fork 主存储库，您仍然可以通过从“上游”存储库中拉取更改来保持同步。

要在 git 中分叉（与 github 上的分叉不同），我通常会克隆、将源重命名为上游并推送到我的新源。我还设置了我的本地来跟踪新的来源。

假设您已经有一个远程命名的来源，您希望将其重命名为上游并在新来源上设置跟踪。

```
git remote rename origin upstream
git remote add origin https://origin.git
git branch --set-upstream master origin/master
git push origin master 
```

既然您在上游拥有通用代码，并且在来源中拥有特定于站点的代码，您可以通过以下方式跟踪上游的更改：

```
git fetch upstream master #checks if there are changes
git merge upstream/master #merges master with the changes in upstream 
```

您可以将上面的两个命令与`git pull upstream master`

# jquery - jQuery on event 找到其他页面上的元素

> ID：12865610
> 
> 赞同：1
> 
> 时间：2012-10-12T19:13:17.927
> 
> 标签：jquery, html, css

我有 2 页`index.html`和`genres.html`.
我在`index.html`页面上有类别列表，还有关于每个列表项的详细信息`genres.html`。
现在单击列表中的任何 1 个类别，`index.HTML`我希望它在`genres.HTML`页面上重定向我并**突出显示页面中单击的类别的详细**信息`index.html`。
现在这可以用 HTML CSS 和 jQuery 来完成吗？
我试过做上面的事情，但是 sum-one 告诉我你需要使用 php，因为我的项目是在 PHP 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:31:15.287

使链接看起来像：

```
<a href='genres.html#specific-category'>Specific category</a>
<a href='genres.html#other-category'>Other category</a> 
```

在页面genres.html 上有

```
<div id='specific-category'>Information</div>
<div id='other-category'>Information</div> 
```

然后就可以访问window.location.hash来获取`#specific-category`。这样你就可以：

```
$(document).ready(function () {
      $(window.location.hash).anything_you_want_the_effect_to_be();
} 
```

它还将使页面滚动到您要突出显示的类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:17:29.283

通过为 index.html 中的每个类别链接 Genres.html?category="nameOfCategory" 来做到这一点

在您的genres.html 页面上，您可以通过调用查看在javascript 中传递了哪一个

```
var selectedCategory = getURLParameter("category"); 
```

确保您在脑海中包含此功能：

```
function getURLParameter(name) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:20:19.923

您可以使用相对路径和 javascript/jquery 分几步完成此操作。

1.  通过 URL 传递一些参数：EX： [http ://test.com/project?hightlight=id1](http://test.com/project?hightlight=id1)

2.  当页面加载时抓取 url 并获取参数的值。例如：hightlight=id1。

3.  您可以使用 animate 显示该 div 的动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:36:51.183

我同意 Tom，这是我使用的 QueryString 函数：

```
function getQuerystring(key, default_)
{
  if (default_==null) default_="";
  key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regex = new RegExp("[\\?&]"+key+"=([^&#]*)");
  var qs = regex.exec(window.location.href);
  if(qs == null)
    return default_;
  else
    return qs[1];
} 
```

所以在 Index.html 上，你有如下链接：

```
<ul>
<li><a href="Genres.html?g=genre1#genre1">Genre 1 - Foo</a></li>
<li><a href="Genres.html?g=genre2#genre2">Genre 2 - Bar</a></li>
<li><a href="Genres.html?g=genre3#genre3">Genre 3 - Etc</a></li>
</ul> 
```

在 Genres.html 你有这个（使用 jQuery）：

```
<script type="text/javascript">
$(dcoument).ready(function(){
    var genre = getQuerystring('g');
    $("#" + genre).addClass("highlight");
});
</script>

<style type="text/css">
    .highlight { color: Red; font-size: 28px; }
</style>

<div id="genre1">
    Stuff on Genre 1
</div>

<div id="genre2">
    Stuff on Genre 2
</div>

<div id="genre3">
    Stuff on Genre 3
</div> 
```

# c# - 浅拷贝值类型数组的一段

> ID：12865611
> 
> 赞同：4
> 
> 时间：2012-10-12T19:13:19.353
> 
> 标签：c#, arrays, shallow-copy

我正在尝试将 double[] 浅复制到段中，并将这些段传递给新线程，如下所示：

```
for (int i = 0; i < threadsArray.Length; i++)
{
    sub[i] = new double[4];

    //Doesn't shallow copy since double is a value type
    Array.Copy(full, i * 4, sub[i], 0, 4);
    double[] tempSub = sub[i];

    threadsArray[i] = new Thread(() => DoStuff(tempSub));
    threadsArray[i].Start();               
} 
```

让创建的段引用原始数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:15:35.567

您可以使用以下[`ArraySegment<T>`](http://msdn.microsoft.com/en-us/library/1hsbd92d.aspx)结构：

```
for (int i = 0; i < threadsArray.Length; i++)
{
    sub[i] = new ArraySegment<double>(full, i * 4, 4);

    ArraySegment<double> tempSub = sub[i];

    threadsArray[i] = new Thread(() => DoStuff(tempSub));
    threadsArray[i].Start(); 
} 
```

（请注意，您需要更改签名`DoStuff`以接受一个`ArraySegment<double>`（或至少一个`IList<double>`而不是一个数组）

`ArraySegment<T>`不复制数据；它只是表示数组的一部分，通过保留对原始数组的引用、偏移量和计数。由于 .NET 4.5 它实现了`IList<T>`，这意味着您可以使用它而不必担心操作偏移量和计数。

在 .NET 4.5 之前的版本中，您可以创建一个扩展方法来轻松枚举`ArraySegment<T>`：

```
public static IEnumerable<T> AsEnumerable<T>(this ArraySegment<T> segment)
{
    for (int i = 0; i < segment.Count; i++)
    {
        yield return segment.Array[segment.Offset + i];
    }
}

...

ArraySegment<double> segment = ...
foreach (double d in segment.AsEnumerable())
{
    ...
} 
```

如果您需要按索引访问项目，则需要创建一个实现`IList<T>`. 这是一个简单的实现： http: [//pastebin.com/cRcpBemQ](http://pastebin.com/cRcpBemQ)

# ios - 在允许运行循环继续的同时延迟的正确方法

> ID：12865614
> 
> 赞同：6
> 
> 时间：2012-10-12T19:13:34.163
> 
> 标签：ios, xcode, cocoa, time, runloop

我需要延迟一段时间，但允许同一个运行循环上的其他东西继续运行。我一直在使用以下代码来执行此操作：

```
[[NSRunLoop currentRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:1]]; 
```

这似乎完全符合我的要求，只是有时函数会立即返回而无需等待所需的时间（1 秒）。

任何人都可以让我知道可能导致这种情况的原因吗？在允许运行循环运行时等待的正确方法是什么？

注意：我想以类似于 sleep() 的方式进行延迟，这样在延迟之后我回到与以前相同的执行流中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:51:40.887

您应该为此使用 GCD `dispatch_after`。它更新更高效（并且是线程安全的），并且非常易于使用。

甚至在 Xcode 中嵌入了一个代码片段，因此如果您开始输入`dispatch_after`它会建议该片段，如果您验证它会在您的代码中为您编写准备好的 2-3 行:)

![Xcode 的代码片段建议](../Images/a7e92b206c1efc23c062bd4b3c6b7522.png)

```
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    <#code to be executed on the main queue after delay#>
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:18:59.650

使用 NSTimer 在一定延迟后触发对某个方法的调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:04:40.447

你试过`performSelector:withObject:afterDelay:`吗？

来自[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html "苹果文档")

> 在延迟后使用默认模式在当前线程上调用接收者的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T04:06:53.867

我有一个类似的问题，这是我的解决方案。希望它也适用于其他人。

```
__block bool dispatched = false;
while ( put your loop condition here )
{
    if (dispatched)
    {
        // We want to relinquish control if we are already dispatched on this iteration.
        [ [ NSRunLoop currentRunLoop ] runMode: NSDefaultRunLoopMode beforeDate:[ NSDate date ] ];
        continue;
    }

    // mark that a dispatch is being scheduled
    dispatched = true;

    int64_t delayInNanoSeconds = (int64_t) (0.1 * (float) NSEC_PER_SEC);
    dispatch_time_t delayTime = dispatch_time(DISPATCH_TIME_NOW, delayInNanoSeconds);

    dispatch_after(delayTime, dispatch_get_main_queue(), ^() {
       // Do your loop stuff here
       // and now ready for the next dispatch
       dispatched = false;
    } );
}  // end of while 
```

# sql - 使用 Microsoft Query SQL 选择和导入与最近日期相关的数据

> ID：12865617
> 
> 赞同：1
> 
> 时间：2012-10-12T19:13:57.747
> 
> 标签：sql, oracle, odbc, maxdate, ms-query

我正在尝试修改我创建的 Microsoft Query 中的当前 SQL 代码，以返回在井上进行的最新生产测试。现在，下面的查询返回从 [Date Parameter=01/01/08] 到现在 [Well Parameter= Well#1] 的任何井的测试列表。此外，为了获得我需要的所有数据，我必须连接两张表，一张带有井名，一张带有生产数据，并且都包含一个唯一的井#，我将其加入。

```
SELECT 
P.TEST_DT, P.BOPD, P.BWPD, P.MCFD
FROM 
WELL_TABLE C, PRODTEST_TABLE P
WHERE 
C.UNIQUE_WELL_ID = P.UNIQUE_WELL_ID 
AND ((C.WELL_NAME=?) 
AND (P.TEST_DT>=?))
ORDER BY P.TEST_DT DESC 
```

现在我的桌子看起来像这样：

```
TEST_DT P.BOPD P.BWPD P.MCFD
2012 年 9 月 23 日 23 125 0
2010 年 8 月 23 日 21 137 0
2009 年 7 月 15 日 29 123 0
```

我只想返回最近的测试：

```
TEST_DT P.BOPD P.BWPD P.MCFD
2012 年 9 月 23 日 23 125 0
```

任何帮助将不胜感激......我已经尝试使用 max(TEST_DT) 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:49:02.263

```
SELECT tab.* 
  FROM (SELECT P.TEST_DT, P.BOPD, P.BWPD, P.MCFD
          FROM  WELL_TABLE C, PRODTEST_TABLE P
         WHERE C.UNIQUE_WELL_ID = P.UNIQUE_WELL_ID 
           AND C.WELL_NAME=?
         ORDER BY P.TEST_DT DESC) tab
 WHERE ROWNUM=1; 
```

# c++ - 添加两个数组？

> ID：12865622
> 
> 赞同：4
> 
> 时间：2012-10-12T19:14:06.617
> 
> 标签：c++, c, arduino

在 Arduino IDE 中，我想添加两个现有数组的内容，如下所示：

```
#define L0 { {0, 0, 0, 0}, {0, 0, 0, 1}, {0, 0, 0, 0} }
#define L1 { {0, 0, 0, 1}, {0, 0, 0, 0}, {0, 0, 0, 0} } 
```

应该成为

```
 int myarray[3][4] = { {0, 0, 0, 1}, {0, 0, 0, 1}, {0, 0, 0, 0} } 
```

我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:44:28.817

我认为您对如何*访问*数组感到困惑`L0`，`L1`因为它们被定义为宏。只需将它们分配给数组，因为预处理器将简单地替换它们：

```
int l[][4]=L0;
int m[][4]=L1; 
```

预处理器将用它们的值替换`L0`和`L1`，编译器只会将它们视为：

```
int l[][4]={ {0, 0, 0, 0}, {0, 0, 0, 1}, {0, 2, 0, 0} };
int m[][4]={ {0, 0, 0, 5}, {0, 0, 0, 6}, {0, 0, 7, 0} }; 
```

现在，您可以使用`l`&`m`来访问数组的元素。从这里开始应该很容易添加两个数组:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T20:34:57.077

你这个；

```
const int a[3][4] = { {0, 0, 0, 0}, {0, 0, 0, 1}, {0, 0, 0, 0} };
const int b[3][4] = { {0, 0, 0, 1}, {0, 0, 0, 0}, {0, 0, 0, 0} };

int c[3][4];

const int* pa = &a[0][0];
const int* pb = &b[0][0];
int* pc = &c[0][0];

for(int i = 0; i < 3 * 4; ++i)
{
    *(pc + i) = *(pa + i) + *(pb + i);
} 
```

# generics - Haskell中多种类型的列表

> ID：12865623
> 
> 赞同：2
> 
> 时间：2012-10-12T19:14:09.243
> 
> 标签：generics, haskell, types, functional-programming, polymorphism

假设我有一组记录，如

```
data A = A { a:: String } deriving (Show)
data B = B { b:: String } deriving (Show) 
```

然后是一些类型类

```
class Foo a where
    foo :: a -> IO ()

instance Foo A where
    foo c = ... 
```

我也想做类似的事情

```
bar = do
    push (A {a="x"})
    push (B {b="y"}) 
```

并将这些东西放在一个列表中，以便稍后在某个地方运行，这样我就可以

```
map foo l 
```

我是否应该编写模板 haskell 来生成包装器类型并派生实例，以便列表可以是包装器类型？有没有更聪明的方法来解决这个问题？老实说，我对 haskell 类型系统感到非常困惑，并且知道必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T19:20:23.200

存在量化有很多方法可以做到这一点，但这通常是矫枉过正的。一种更类似于 Haskell 的方法是简单地预先应用`foo`并保留`[IO ()]`结果操作的列表，然后您可以`sequence`稍后运行它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:27:14.747

一个使用的例子`Existential`，但我真的会放弃使用它，并会建议 hammar 所说的。

```
{-# LANGUAGE ExistentialQuantification #-}
data A = A String deriving Show
data B = B String deriving Show

class Foo a where
    foo :: a -> IO ()

instance Foo A where
    foo c = putStrLn $ "FOOA " ++ show c

instance Foo B where
    foo c = putStrLn $ "FOOB " ++ show c

data Wrap = forall a . Foo a => Wrap a

instance Foo Wrap where
    foo (Wrap c) = foo c

bar :: [Wrap]
bar = [Wrap $ A "x", Wrap $ B "y"]

main = mapM_ foo bar 
```

# jquery - 选择class选择的元素的value标签

> ID：12865625
> 
> 赞同：0
> 
> 时间：2012-10-12T19:14:14.307
> 
> 标签：jquery, jquery-selectors, element

我有一个页面有一大堆按钮

```
<button value=<?php val?> class='hot' >Hot</button> 
```

我按班级选择它们，因为值都会不同。我试图让他们在点击时提醒值，但我不知道如何访问值字段。

我的功能是

```
$(".hot").click(function() {
}); 
```

我尝试使用以下方法访问它（经过大量时间谷歌搜索）：

```
$(this).find('option:selected').attr('value'); 
```

导致

```
$(".hot").click(function() {
     $(this).find('option:selected').attr('value');
}); 
```

但是，当我提醒这一点时，它只是说未定义。

想法会很棒！我对 php 非常熟悉，但 javascript 和 JQuery 对我来说还很陌生，因此非常感谢链接和良好的解释，而不仅仅是一个答案。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:17:02.640

使用`.val()`：

```
$(".hot").click(function() {
   var valueOfButton = $(this).val();
}); 
```

另请参阅其他 SO 问题，了解`.val()`和之间的区别`.attr('value')`：[jQuery .val() 和 .attr('value') 有什么区别？](https://stackoverflow.com/questions/4837133/whats-the-difference-bewteen-jquery-val-and-attrvalue)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:17:14.337

您只需要：

```
$(".hot").click(function(e) {
   alert( $(this).attr('value') );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:19:49.223

试试这个……它会提醒被点击的按钮的值……

```
$(".hot").click(function() {
alert($(this).val());
}); 
```

# constructor - 如何在 TypeScript 中匿名类

> ID：12865626
> 
> 赞同：7
> 
> 时间：2012-10-12T19:14:20.913
> 
> 标签：constructor, anonymous-class, typescript

我正在尝试创建一个辅助函数，以添加柯里化，为类生成通用设置。例如：

```
class Person {
    private name: string;
    private sex: string;

    constructor (name: string, sex: string) {
        this.name = name;
        this.sex = sex;
    }
}

var newPersonSex = function (sex: string) {
    return function (name: string) {
        return new Person(name, sex);
    }
}

var MalePerson = newPersonSex('male'); 
var FemalePerson = newPersonSex('female'); 
```

所以现在当 MalePerson 和 FemalePerson 对象被创建时，它实际上只是返回了一个新的 Person 实例。

```
var m = new MalePerson( 'john' ); 
```

为了让类型系统允许我仍然使用“new”，MalePerson 需要是构造函数类型。例如：'new (name:string) => Person'。这也需要是函数的返回类型。

但是，添加了这些声明后，我无法从“newPersonSex”内部返回函数。例如这是无效的：

```
var newPersonSex = function (sex: string) : new(name:string) => Person {
    return function (name: string) {
        return new Person(name, sex);
    }
} 
```

如何动态创建和返回新的构造函数或类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:17:27.857

试试这个 newPersonSex 的定义：

```
var newPersonSex = function (sex: string) {
    return <new (name: string) => Person> <any> function (name: string) {
        return new Person(name, sex);
    }
} 
```

您的代码的问题在于函数只有调用签名，而不是构造签名。我上面的示例通过首先断言该函数的类型是 any，然后断言 any 类型实际上是构造函数来解决这个问题。

请注意，newPersonSex 的类型将从其返回类型推断，因此无需添加函数注释。

# mysql - 删除重复行，没有唯一键 - 关系表

> ID：12865627
> 
> 赞同：1
> 
> 时间：2012-10-12T19:14:28.733
> 
> 标签：mysql, sql

我有一个关系表，它根据它们的 ID 连接另外两个表。两列都可以重复 - 但不能有两次相同的行。我处理检查代码方面。

如何删除重复行（见下文）：

```
select * from people:

a | b
1   2
1   3
1   3
1   7
2   3
2   5
2   5
2   9 
```

我希望结果是：

```
a | b
1   2
1   3
1   7
2   3
2   5
2   9 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:19:01.840

这应该有效：

```
ALTER IGNORE TABLE people ADD UNIQUE (a,b); 
```

如果您不想添加索引，那么这应该可以：

```
DROP TABLE IF EXISTS people_old;
DROP TABLE IF EXISTS people_new;
CREATE TABLE people_new LIKE people;
INSERT INTO people_new SELECT DISTINCT * FROM people;
RENAME TABLE people TO people_old, people_new TO people; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:22:14.810

这就是删除重复行的方法......我会写给你我的例子，你需要应用到你的代码。我有带有 ID 的 Actors 表，我想删除重复 first_name 的行

```
mysql> select actor_id, first_name from actor_2;
+----------+-------------+
| actor_id | first_name  |
+----------+-------------+
|        1 | PENELOPE    |
|        2 | NICK        |
|        3 | ED          |
....
|      199 | JULIA       |
|      200 | THORA       |
+----------+-------------+

200 rows in set (0.00 sec) 
```

- 现在，如果下一行具有相同的 first_name（重复，如果不是，则为 null），我使用一个名为 @a 的变量来获取 ID。

```
mysql> select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name;
+---------------+----------------+
|  first_names  | @a:=first_name |
+---------------+----------------+
|          NULL | ADAM           |
|            71 | ADAM           |
|          NULL | AL             |
|          NULL | ALAN           |
|          NULL | ALBERT         |
|           125 | ALBERT         |
|          NULL | ALEC           |
|          NULL | ANGELA         |
|           144 | ANGELA         |
...
|          NULL | WILL           |
|          NULL | WILLIAM        |
|          NULL | WOODY          |
|            28 | WOODY          |
|          NULL | ZERO           |
+---------------+----------------+
200 rows in set (0.00 sec) 
```

- 现在我们只能得到重复的 ID：

```
mysql> select first_names from (select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name) as t1;
+-------------+
| first_names |
+-------------+
|        NULL |
|          71 |
|        NULL |
 ...
|          28 |
|        NULL |
+-------------+
200 rows in set (0.00 sec) 
```

- 最后一步，让我们删除！

```
mysql> delete from actor_2 where actor_id in (select first_names from (select if(first_name=@a,actor_id,null) as first_names,@a:=first_name from actor_2 order by first_name) as t1);
Query OK, 72 rows affected (0.01 sec) 
```

- 现在让我们检查一下我们的表格：

```
mysql> select count(*) from actor_2 group by first_name;
+----------+
| count(*) |
+----------+
|        1 |
|        1 |
|        1 |
...
|        1 |
+----------+
128 rows in set (0.00 sec) 
```

它有效，如果您有任何问题，请给我回信

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T21:34:29.277

> 两列都可以重复 - 但不能有两次相同的行

这是您尚未实现的对表的约束。约束是`unique index`on `(a,b)`。如果您有索引，则不会有重复项。

恕我直言，您最好的方法是将唯一索引添加到表中，使用临时表首先删除重复项：

1.  复制人到`person_temp`
2.  全部删除`person`
3.  添加唯一索引到`person`
4.  复制`unique a,b`自`person_temp``person.

# javascript - 使用没有 data-main 的 Require.js

> ID：12865630
> 
> 赞同：33
> 
> 时间：2012-10-12T19:14:43.263
> 
> 标签：javascript, requirejs

我可以在开发中使用 Require.js 而不使用`data-main`属性加载到我的初始脚本中吗？IE。`<script data-main="scripts/main" src="scripts/require.js"></script>`我发现我很难在我的开发环境中使用这个属性。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-12T19:25:33.673

是的，看看文档：[http ://requirejs.org/docs/api.html#config](http://requirejs.org/docs/api.html#config)

您需要调用 require.config() 并设置 baseUrl。根据您的示例：

```
<script src="scripts/require.js"></script>
<script>
    require.config({
        baseUrl: "scripts"
    });

    require( [ /*...*/ ], function(  /*...*/ ) {
        /*...*/
    });
</script> 
```

# c++ - 将 directshow 音频设备录制到文件

> ID：12865632
> 
> 赞同：0
> 
> 时间：2012-10-12T19:14:51.653
> 
> 标签：c++, visual-c++, directshow, audio-recording

我偶然发现了一些代码来枚举我的麦克风设备（[在一些帮助下](http://www.codeproject.com/Articles/31022/A-simple-console-audio-input-device-reader)），并且能够从每个设备中获取“友好名称”和“clsid”信息。

我已经对 GraphEd.exe 做了一些修改，试图弄清楚如何从 directshow 获取音频并将其写入文件（我目前不关心格式，wav 应该没问题），但似乎无法找到正确的组合。

我读过的一篇文章链接到[这个 Windows SDK 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390969%28v=vs.85%29.aspx)，但是当我检查代码时，我最终对如何使用该代码感到非常困惑，即。设置输出文件，或指定要使用的音频捕获设备。

我还看到了[一篇 codeguru 文章](http://www.codeguru.com/cpp/g-m/multimedia/audio/article.php/c4711/MFC-Multithreaded-Classes-for-Recording-Playing-and-Saving-WAV-Files-Sound.htm)，它有一个很好的录音机，但它没有选择音频设备的界面，我似乎无法找到它静态选择要使用的录音设备的位置。

我想我最感兴趣的是弄清楚如何使用 Windows SDK 示例，但是对这两种方法中的任何一种的任何解释都会很棒。

**编辑**：我应该提到我作为一个win32 COM程序员的知识和能力在规模上非常低，所以如果这很容易，请像我五岁一样给我解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T20:06:33.050

使用 DirectShow 将音频录制到文件中需要您构建正确的过滤器图，您应该已经知道了。零件包括：

1.  您通过名字对象（不是 CLSID！）实例化的设备本身，它通常是 PCM 格式
2.  将流转换为容器格式的多路复用器组件
3.  File Writer Filter 接受文件兼容的流并写入文件

棘手的时刻是 #2，因为没有可用的标准组件。但是，Windows SDK 示例包含缺少的部分 - [WavDest 过滤器示例](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390969%28v=vs.85%29.aspx)。构建它并使其准备好使用，您可以构建一个图表，将设备记录到 .WAV 文件中。

您的图表将如下所示，并且它也很容易以编程方式构建：

![在此处输入图像描述](../Images/022cde4d11f29fc6466c956ee37404a3.png)

我注意到我在 Google Earth 中安装了 WavDest 的一个变体——如果你自己构建它时遇到麻烦，你将寻找预构建的二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:37:06.540

您可以指示 ffmpeg 从 directshow 设备录制，并输出到文件。

# c# - 控制多个窗口

> ID：12865634
> 
> 赞同：0
> 
> 时间：2012-10-12T19:15:00.843
> 
> 标签：c#, .net, wpf, winforms

我目前正在尝试学习 WPF，并且正在编写一个简单的应用程序来测试我学到的一些概念。

基本上，一旦我的应用程序运行，就会出现一个窗口，充当登录屏幕。一旦用户输入他的详细信息并按下登录按钮，窗口将关闭并打开一个新窗口。

最好的方法是什么？我记得在使用 WinForms 时遇到过许多问题，尤其是在关闭和处理窗口时。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:20:34.477

一种方法是让“新的”成为应用程序的主窗口。然后在“new one”的构造函数后面的代码中，您可以显示登录窗口。如果登录成功，则 newOne 启动。如果失败，则应用程序退出。

```
public NewOne()
{
  InitializeComponent();

  LoginWindow login = new LoginWindow();
  bool? result = login.ShowDialog();
  if (!result.HasValue || result.Value == false)
    this.Close();
} 
```

# xml - 将内容从 Wordpress 导入到表达式引擎的最佳方式

> ID：12865635
> 
> 赞同：0
> 
> 时间：2012-10-12T19:15:00.517
> 
> 标签：xml, json, wordpress, import, expressionengine

我被要求创建一个新的表达式引擎站点来代替当前的 Wordpress 运行站点。我想知道从 Wordpress 导出并导入到 Expression Engine 的最佳方法是什么。

我在 EE 中创建的频道有 5 个字段。例如：标题、副标题、内容、标签和类别。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:42:49.660

[DataGrab](http://brandnewbox.co.uk/products/details/datagrab) - can take an XML feed of a WordPress site and import it into EE.

You basically give the module the location of the feed and then map the XML nodes to the appropriate custom fields.

Great module and great support too.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T23:52:54.160

您可能想查看我的演示文稿 Importing to EE2 with DataGrab：

[http://www.slideshare.net/lealea/importing-to-ee2-using-datagrab](http://www.slideshare.net/lealea/importing-to-ee2-using-datagrab)

它有一些关于如何使用 Datagrab 的分步示例可能会有所帮助，尽管最新版本的 Datagrab 具有更直接的 Wordpress 导入，但分步操作的内容可能仍然有助于总体上理解附加组件。

# python - 为什么 Python 在使用绝对路径执行时不会退出引发的异常？

> ID：12865637
> 
> 赞同：10
> 
> 时间：2012-10-12T19:15:15.187
> 
> 标签：python, exception-handling

已解决：重新启动机器似乎已解决问题。如果问题再次出现，我会更新。

我遇到了`Python2.6`在引发异常后挂起的问题，特别`foo.py`是在使用绝对路径 ( `/home/user/bar/foo.py`) 调用时。然后我被要求`ctrl+c`退出该计划。如果从`bar`目录 as`./foo.py`或从根目录 as调用`./home/user/bar/foo.py`，程序正确终止。

foo.py：

```
#!/usr/bin/env python2.6
print 'begin'
x = [0, 1, undefined]
print 'x' 
```

或者

```
#!/usr/bin/env python2.6
print 'begin'
raise Exception('stopping here') 
```

我还可以提到 a`sys.exit()`工作正常，没有问题。

```
#!/usr/bin/env python2.6
import sys
print 'begin'
sys.exit(0) 
```

无法终止程序的异常发生了什么？这可能特定于我的配置。我应该从哪里开始寻找解决方案？

编辑： `execfile('/home/user/bar/foo.py')`如果运行交互模式，工作正常。此外，运行`nohup /home/user/bar/foo.py &`会导致必须终止的挂起进程。

运行 CentOS 6.3 版（最终版）。这个问题并不总是存在。这只是大约一个月前的一个周末才开始的（当时我没有使用这台机器）。

更新：使用 GDB 进行调试，回溯指向`libpthread.so.0`.

```
#0  0x000000364340e890 in __connect_nocancel () from /lib64/libpthread.so.0
#1  0x00007ffff18960d8 in ?? () from /usr/lib64/python2.6/lib-dynload/_socketmodule.so
#2  0x00007ffff189815c in ?? () from /usr/lib64/python2.6/lib-dynload/_socketmodule.so
#3  0x00007ffff7d0a706 in PyEval_EvalFrameEx () from /usr/lib64/libpython2.6.so.1.0
#4  0x00007ffff7d0c797 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.6.so.1.0
#5  0x00007ffff7d0abe4 in PyEval_EvalFrameEx () from /usr/lib64/libpython2.6.so.1.0
#6  0x00007ffff7d0bccf in PyEval_EvalFrameEx () from /usr/lib64/libpython2.6.so.1.0
#7  0x00007ffff7d0bccf in PyEval_EvalFrameEx () from /usr/lib64/libpython2.6.so.1.0
#8  0x00007ffff7d0c797 in PyEval_EvalCodeEx () from /usr/lib64/libpython2.6.so.1.0
#9  0x00007ffff7c9adb0 in ?? () from /usr/lib64/libpython2.6.so.1.0
#10 0x00007ffff7c70303 in PyObject_Call () from /usr/lib64/libpython2.6.so.1.0
#11 0x00007ffff7d04dd3 in PyEval_CallObjectWithKeywords () from /usr/lib64/libpython2.6.so.1.0
#12 0x00007ffff7d28cd2 in PyErr_PrintEx () from /usr/lib64/libpython2.6.so.1.0
#13 0x00007ffff7d29297 in PyRun_SimpleFileExFlags () from /usr/lib64/libpython2.6.so.1.0
#14 0x00007ffff7d35c32 in Py_Main () from /usr/lib64/libpython2.6.so.1.0
#15 0x000000364281ecdd in __libc_start_main () from /lib64/libc.so.6
#16 0x0000000000400649 in _start () 
```

有人知道这是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T22:53:51.587

这个确切的问题在 RHEL 6 机器上一直困扰着我一段时间。在某些情况下，异常会导致挂起。事实上，我能够逐字获取您的代码并重现症状。

感谢 abrtd 的回答，我确定安装了 abrt-addon-python 包，它将 abrt_exception_handler.py 放入站点包位置，并在 python 启动期间调用。此文件覆盖 sys.excepthook 函数，该函数使用套接字联系 abrt 守护程序。有关详细信息，请参阅[ABRT 项目文档](http://abrt.readthedocs.org/en/latest/design.html)。

我验证了在 python 调用中添加 -S 可以防止挂起。但是，这不是一个好的解决方案，因为 -S 选项会阻止在启动时导入所有站点包。

更好的解决方案是在您的 python 代码中添加以下内容：

```
import sys
sys.excepthook = sys.__excepthook__ 
```

它恢复了原始异常挂钩并防止挂起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:08:55.850

*   请检查`sys.path`非绝对目录。
*   你总是[可以用调试器闯入它，例如 gdb](http://wiki.python.org/moin/DebuggingWithGdb)
*   有时我有一些东西`PYTHONSTARTUP`，这会导致交互式解释器做一些不同的事情......
*   `strace`也可以成为你的朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:18:52.347

*   重新启动机器。

在全能管理员的恩宠下，我能够重新启动机器。一切都很好。如果问题再次出现，我会更新问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:25:12.973

我追踪了这个问题。它正在尝试写入由 abrtd 保持打开的套接字。

重新启动 abrtd “修复”了该问题。这就是机器重启起作用的原因。不过，我还没有找到问题的根本原因。

# algorithm - 后缀树中的最大和最小边数

> ID：12865639
> 
> 赞同：2
> 
> 时间：2012-10-12T19:15:23.410
> 
> 标签：algorithm, suffix-tree

后缀树中的最大和最小边数是多少？我知道最大值是 2m-1，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:28:31.160

首先，关于**最大**边数：

如果您认为边有两种形式，那就很容易理解了：通向叶节点的边和通向内部节点的边。在下文中，我将假设构建后缀树的字符串的`N`长度是字符。

1.  关于**通向树叶的边缘**。每个后缀必须恰好有一个叶子，并且每个叶子只有一个入站边（并且没有出站边）。所以必须有`N`边缘通向叶子。

2.  关于**通向内部节点的边**。与叶节点一样，内部节点也只有一个入站边。因此，要确定可能有多少条边通向内部节点，只需确定可以有多少个内部节点即可。那么，内部节点的最大可能数量是多少？

    为此，重要的是要看到内部节点仅在分支点处插入到后缀树中，即内部节点的*出站*边数始终至少为 2（如果只有一个出站边，则内部节点不会' t 已首先构建）。但是每个出站边最终都必须通向一个叶节点（可能在经过进一步的内部节点之后）。换句话说，每个插入到树中的内部节点都会使叶子节点的总数至少增加 1。此外，即使一棵没有任何内部节点的树，也必须至少有一条边从根节点出来（除非树是空的）。因此，在非空树中，叶子的总数`L`必须是

    ```
    L >= I + 1 
    ```

    其中`I`是内部节点的数量。相反，内部节点的数量是

    ```
    I <= L - 1 = N - 1 
    ```

    回到原来的问题，通向内部节点的边数，正如我们所说的，与内部节点的数量相同，因此也受`N - 1`.

**我们得出结论**，边的总数是通向叶子 ( `N`) 的边数加上通向内部节点 ( `<=N-1`) 的边数，因此它的**最大值**为

```
N + (N-1) = 2N - 1 
```

quod erat 示范。

* * *

关于**最小**边数：这遵循相同的原则，即我们计算通向叶子的边数和通向内部节点的边数，然后将它们相加。

导致叶子的节点数始终为`N`，即`N`最大和最小可能。

然而，通向内部节点的节点数量可能为零。例如，当输入字符串没有重复元素时，例如`abcdef`，恰好有`N`边，每个边都从根直接到叶。没有分支点，没有内部节点。因此，通向内部节点的最小边数为 0。

**总之，最小边数是`N + 0 = N`。**

# javascript - Django Compressor 与 TypeScript 一起使用

> ID：12865648
> 
> 赞同：5
> 
> 时间：2012-10-12T19:16:03.610
> 
> 标签：javascript, django, typescript, django-compressor

我希望[Django Compressor](http://django_compressor.readthedocs.org/en/latest/settings/#django.conf.settings.COMPRESS_PRECOMPILERS)与 Microsoft 新语言[TypeScript](http://www.typescriptlang.org)一起使用。

我下载了编译器`tsc`，它工作正常。

当尝试以这种方式将它与 Django Compressor 一起使用时：

```
COMPRESS_PRECOMPILERS = (
    ('text/less', 'lessc {infile} {outfile}'),
    ('text/typescript', 'tsc {infile} {outfile}'),
    ) 
```

和

```
{% compress js %}
        <script type="text/typescript" charset="utf-8">
            var x=3;
            function greeter(person: string) {
            return "Hello, " + person;
            }

            var user = "Jane User";
        </script>
{% endcompress %} 
```

输出是一个空的 JS 脚本标签

```
<script type="text/javascript"></script> 
```

我猜这是因为 tsc 程序没有将代码写入预定义文件的选项。

有人有想法吗？

（如前所述，tsc 的工作原理与 LESS 的 django 压缩器一样好。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:38:04.667

`tsc file1.ts file2.ts`将 file1.ts 和 file2.ts 分别编译为 file1.js 和 file2.js。

```
> tsc.exe
Syntax:   tsc [options] [file ..]

Examples: tsc hello.ts
      tsc --out foo.js foo.ts
      tsc @args.txt 
```

好像你想跑`tsc {infile} --out {outfile}`

# java - 在线程“main”java.lang.Error 中获取异常：未解决的编译：在 FileTest.main(FileTest.java:39)

> ID：12865654
> 
> 赞同：0
> 
> 时间：2012-10-12T19:16:24.300
> 
> 标签：java

我在线程“main”java.lang.Error 中遇到异常：未解析的编译：在 FileTest.main(FileTest.java:39) 第 39 行是`public static void main(String[] args){`我做错了什么？

```
public class FileTest{
    public static void main(String[] args){

        try{
            String inFileName = args[0];
            String outFileName = args[1];
            BufferedReader ins= new BufferedReader(new FileReader(inFileName));
            BufferedReader con = new BufferedReader(new InputStreamReader(System.in));
            PrintWriter outs = new PrintWriter(new FileWriter(outFileName));

            String first = ins.readLine(); //read from file
            while(first != null){
                System.out.print("Type in a word to follow " + first + ":");
                String second = con.readLine(); //read from console
                //append and write 
                outs.println(first+ ", " + second);
                first = ins.readLine(); //read from file
            }
            ins.close();
            outs.close();
        }
        catch (IOException ex){
            ex.printStackTrace(System.err);
            System.exit(1);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:18:51.640

你的牙套似乎太多了。您可以删除最后一个`}`字符以使此代码编译。

# android - 如何从下载的png设置android imageview

> ID：12865656
> 
> 赞同：2
> 
> 时间：2012-10-12T19:16:36.587
> 
> 标签：android, png, imageview

我有一个在线数据库，提供图像文件位置和文件名

我正在尝试更新 android 屏幕中的 imageview。这是我获取图像的代码和我尝试过的东西：

```
// successfully received product details
JSONArray productObj = json.getJSONArray("product"); // JSON Array

// get first product object from JSON Array
JSONObject product = productObj.getJSONObject(0);

// product with this pid found
// imageview
imageVw = (ImageView) findViewById(R.id.imageView1);

// display data in imageview
//imageStr = "http://somesite.com/images/" + product.getString("imagefile");
imageStr = "file://somesite.com/images/" + product.getString("imagefile");

//imgUri=Uri.parse("file:///data/data/MYFOLDER/myimage.png");
//imgUri=Uri.parse(imageStr);
//imageVw.setImageURI(imgUri);
imageVw.setImageBitmap(BitmapFactory.decodeFile(imageStr)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:26:28.827

如果你想获取存储在网络上的图像的位图，你可以这样做。我个人使用名为[ImageDownloader](http://code.google.com/p/android-imagedownloader/)的库。该库易于使用。

您必须了解“URL 是 URI，但 URI 不是 URL。URL 是 URI 的一种特殊化，它定义了给定资源的特定表示的网络位置。” 因此，如果您的文件位置是 http，那么您需要执行如下所示的函数来获取位图。我使用 ImageDownloader 库，因为它运行自己的线程并且还管理一些缓存以更快地下载图像。

```
 private Bitmap getImageBitmap(String url) { 
            Bitmap bm = null; 
            try { 
                URL aURL = new URL(url); 
                URLConnection conn = aURL.openConnection(); 
                conn.connect(); 
                InputStream is = conn.getInputStream(); 
                BufferedInputStream bis = new BufferedInputStream(is); 
                bm = BitmapFactory.decodeStream(bis); 
                bis.close(); 
                is.close(); 
           } catch (IOException e) { 
               Log.e(TAG, "Error getting bitmap", e); 
           } 
           return bm; 
        } 
```

# c# - 从在 IIS 7 上运行的另一个 Net.Tcp WCF 服务调用自托管 WCF 服务

> ID：12865671
> 
> 赞同：1
> 
> 时间：2012-10-12T19:17:36.770
> 
> 标签：c#, wpf, wcf, iis-7, self-hosting

我在我的客户端机器上运行了一个 NetTcp 自托管服务，并且在服务器上的 IIS 上运行了另一个 NetTcp 服务。我正在尝试从 IIS 中的服务中使用自托管服务。它抛出一个带有超时错误的异常。

我使用 WCF 测试客户端来测试自托管服务，它工作正常。另外，我编写了一个示例 C# 应用程序，它调用自托管服务并且工作正常。只有当 IIS 上的服务尝试调用时，才会失败。

我猜它必须在 IIS 上进行一些安全设置，以防止外出通话，从而导致超时。有什么线索吗？

**调用自托管服务的代码：**

```
private object CallClient(string message)
    {
        var myBinding = new NetTcpBinding(SecurityMode.None);
        var myEndpoint = new EndpointAddress("net.tcp://<myIP>:8188/MessageReceiverService/");
        var myChannelFactory = new ChannelFactory<IMessageReceiverService>(myBinding, myEndpoint);

        IMessageReceiverService client = null;
        var result = new MessageCenterResponse { Result = message };

        try
        {
            client = myChannelFactory.CreateChannel();
            result.Result += client.TestMethod("Shankar");
        }
        catch (Exception ex)
        {
            if (client != null)
            {
                ((ICommunicationObject)client).Abort();
            }
            result.Result += "Exception!!" + myEndpoint.Uri + " - " + ex.Message;
        }
        finally
        {
            ((ICommunicationObject)client).Close();
        }

        return result;
    } 
```

**消息接收器服务（在自托管服务上）：**

```
public bool TestMethod(string testMessage)
    {
        return testMessage.Equals("Shankar");
    } 
```

上面的代码在从独立应用程序调用时工作正常，但在行后从 IIS 调用时失败：`client.TestMethod("Shankar");`

**这就是我启动自托管服务的方式：**

```
private void StartMessageCenterService()
    {
        var tcpUrl = new Uri("net.tcp://<myIP>:8188/MessageReceiverService/");
        var messageCenterHost = new ServiceHost(typeof(MessageReceiverService), tcpUrl);

        messageCenterHost.Faulted += MessageCenterHost_Faulted;

        messageCenterHost.Open();
    } 
```

**App.config 中的自托管 WebService 代码：**

```
<services>
  <service name="MessageCenter.Proxy.VirtualServer.MessageReceiverService" behaviorConfiguration="DebugServiceBehavior">
    <endpoint address=""
              binding="netTcpBinding"
              bindingConfiguration="InsecureTcp"
              behaviorConfiguration="LargeDataEndpointBehavior"
              contract="MessageCenter.Common.Interfaces.IMessageReceiverService">
    </endpoint>
    <endpoint address="mex"
              binding="mexTcpBinding"
              contract="IMetadataExchange" />
  </service>
</services> 
```

# php - 使用 php 和 html，如何计算从下拉列表中进行选择的次数？

> ID：12865673
> 
> 赞同：1
> 
> 时间：2012-10-12T19:17:54.027
> 
> 标签：php

我正在开发的程序本质上是一家餐馆的收据机。有一个下拉列表，其中包含从数组中取出的一堆食物。该数组包括每个项目的价格，截至目前，程序将显示从下拉列表中选择的任何食品项目，列出各个价格，并将它们加起来为总价。我遇到的问题是，如果有人多次选择同一个项目，我无法注册该项目的数量。基本上，我需要一些代码来检查当前选择与过去的选择是否有任何重复。我真的不知道该怎么做。到目前为止，[这是我的代码。](https://gist.github.com/3881162)请查看并传递任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:26:55.840

您可以将您选择的值存储在会话中，并使用 PHP 的[in_array](http://nl1.php.net/is_array "php.net 上的 in_array")函数检查会话中是否已经存在该选择的值。一旦值为 false，您可以添加选择而不复制其他值。

编辑; 假设您有一个名为 item 的选择框，并且您在更改时发布。该值将存储在 $_POST['item'];

如果页面已发布，您可以这样做：

```
<?PHP
if(!in_array($_POST['item'], $_SESSION['items'])) {
    $_SESSION['items'][] = $_POST['item']; // add posted item to array value items in session
}
?> 
```

不要忘记 session_start(); 在页面的最顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:28:11.437

为数组键使用某种唯一的产品 ID，在将新产品添加到数组之前，可能会创建一个副本，通过数组键检查其 ID 是否已经存在。如果存在，只需运行类似：

```
if (isset($products[$id]) {
    $products[$id]['quantity'] = $products[$id]['quantity']++;
} else {
    // Create new array item as you're doing now...
} 
```

# php - 通过 mod-rewrite 创建数千个 url

> ID：12865675
> 
> 赞同：5
> 
> 时间：2012-10-12T19:17:56.567
> 
> 标签：php, mysql, .htaccess, mod-rewrite

我正在编写一个网站，该网站有很多用户存储在 mysql_database 中，每个用户在其他字段中都有一个 ID 和 profilename（如**jim.button.1 ）。**我想要一个具有以下结构的 url（通过例如用户 ID 上的 mysql_select 获取配置文件）：**www.mysite.com/jim.button.1**

现在我知道我可以使用 mod_rewrite_rule 来做到这一点，但是对于成千上万的用户，我会得到一个非常大的 .htaccess 文件。顺便说一句，我目前还不是 mod 重写方面的专家，但我了解它是如何工作的。

有没有办法做到这一点，比如一个或两个 mod_rewrite_rules 或者有另一种聪明的方法来完成这个？

欢迎所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:32:24.907

您可以使用以下方法重写所有未映射到现有文件的 URL：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

然后通过`$_SERVER['REQUEST_URI']`. 这是一个例子：

```
$parts = parse_url($_SERVER['REQUEST_URI']);
$user = $parts['path']; 
```

有关示例，请参见[https://github.com/zendframework/ZendSkeletonApplication/blob/master/public/.htaccess 。](https://github.com/zendframework/ZendSkeletonApplication/blob/master/public/.htaccess)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T21:59:23.717

我会结合罗斯史密斯和 JvdBerg 的，所以你最终会得到类似的东西：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^(.*)$ profile.php?user=$1 [NC,L]
</IfModule> 
```

这将使您的脚本更容易处理，而不必解析整个 URL。打开后的前 4 行`RewriteEngine`是必需的，以便站点的其余部分可以继续操作（检查目录、文件、链接），如果 url 是一个将使用第一条规则并且不再处理。然后第二条规则是，如果它不是前面的规则之一，并重定向为您的“profile.php”页面。

然后在你的“profile.php”页面中，你可以得到你的值：

```
list($fname, $lname, $id) = explode('.', $_REQUEST['user']); 
```

然后从那里走。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:30:37.490

你可以使用这样的东西：

```
RewriteEngine On
RewriteRule ^(.+)$ users.php?user=$1 [QSA,L] 
```

在您的 users.php 中，您可以像这样获取用户：

```
$user = $_GET['user'];
// do your stuff with the user 
```

您必须对其进行微调以使其与站点的其余部分集成，但您明白了。

# asp.net - 用户单击 GridView 上的更新链接后未调用 CustomValidator 处理程序

> ID：12865679
> 
> 赞同：0
> 
> 时间：2012-10-12T19:18:05.837
> 
> 标签：asp.net, gridview

在 DropDownList SelectedIndexChanged 上，页面回发并在单选按钮中记录开发人员的姓名。当用户单击 GridView 上的更新链接时，我希望**customValidator**检查**Radiobutton 是否为空**。

```
<EditItemTemplate>
   <table>
       <tr>
          <td>
              <asp:DropDownList ID="_ddlAllDev" runat="server" AutoPostBack = "true" DataTextField = "Text"
                   DataValueField = "Value" OnSelectedIndexChanged = "ddlAllDev_SelectedIndexChanged">
              </asp:DropDownList>
          </td>
        </tr>
        <tr>
           <td>
              <asp:RadioButtonList ID="_rblAllDev" runat="server" AutoPostBack = "true" DataTextField = "Text"
                   DataValueField = "Value" OnSelectedIndexChanged = "rblAllDev_SelectedIndexChanged">
              </asp:RadioButtonList>
              <asp:CustomValidator ID="_valDev" runat="server" ControlToValidate = "_rblAllDev" Text = "*" 
                   ErrorMessage="Please choose at leat one developer for this task" OnServerValidate = "AllDev_ServerValidate" />
           </td>
        </tr>
     </table>    
</EditItemTemplate> 
```

问题是，在用户单击 GridView 上的 UPPDATE 链接后，似乎甚至没有调用 CustomerValidator 处理程序。我在方法中放置了一个断点，但该方法甚至没有被调用。

```
protected void AllDev_ServerValidate(object sender, ServerValidateEventArgs args)
{

} 
```

我错过了什么吗？

感谢您的帮助。

# android - 用于移动位图的 Surface 视图和画布

> ID：12865684
> 
> 赞同：0
> 
> 时间：2012-10-12T19:18:34.643
> 
> 标签：android, canvas, surfaceview

我有一个`SurfaceView`，我希望`Bitmap Logo`它的里面`canvas`是可移动的

我做错了什么？

```
static float x, y;
Bitmap logo;

SurfaceView ss = (SurfaceView) findViewById(R.id.svSS);   
    logo = BitmapFactory.decodeResource(getResources(), R.drawable.logo);

    x = 40;
    y = 415;
    ss.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent me) {
            try {
                Thread.sleep(50);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        switch(me.getAction()) {
        case MotionEvent.ACTION_DOWN:
            x = me.getX();
            y = me.getY();
            break;
        case MotionEvent.ACTION_UP:
            x = me.getX();
            y = me.getY();
            break;
        case MotionEvent.ACTION_MOVE:
            x = me.getX();
            y = me.getY();
            break;
            }
        return true;
        }
    });

public class OurView extends SurfaceView implements Runnable{

    Thread t = null;
    SurfaceHolder holder;
    boolean isItOK = false;

    public OurView(Context context) {
        super(context);
        holder = getHolder();

    }
    public void run (){
        while (isItOK == true){
            //canvas DRAWING
            if (!holder.getSurface().isValid()){
                continue;
            }
            Canvas c = holder.lockCanvas();
            c.drawARGB(255, 200, 100, 100);
            c.drawBitmap(logo, x,y,null);
            holder.unlockCanvasAndPost(c);
        }
    }
    public void pause(){
        isItOK = false;
        while(true){
            try {
                t.join();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            break;
        }
        t = null;
    }
    public void resume(){
        isItOK = true;
        t = new Thread(this);
        t.start();

    }
} 
```

现在表面视图只是黑色..什么也没发生，它也没有颜色`200, 100, 100`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:04:15.400

您可能会忘记在类中实现`onDraw(Canvas c)`方法`OurView`，并在类内部移动`onTouchEvent`。

类结构应该是这样的：

```
public class OurView extends View implements Runnable {

//...your runnable stuff here
//...Runnable stuff means your run(), pause() etc.

  public OurView(Context context) {
    super(context);
    //your constructor stuff here
    // your constructor, do you find the similar stuff to this you wrote? That's your constructor, so you can just add:
    holder = getHolder();
}

protected void onDraw (Canvas c) {

    c.drawBitmap(bitmap, x, y);
//set colour, draw bitmap here, onDraw() will be called automatically, so just call invalidate(); when you need to "refresh" the view
}

public boolean onTouchEvent(MotionEvent e) {
    float x = e.getX();
    float y = e.getY();

    swith(e.getAction()) {
    case MotionEvent.ACTION_DOWN:
     ...
    }
}
} 
```

有关更明确的示例和参考，请访问：

[实现自定义视图](http://developer.android.com/reference/android/view/View.html#)

[自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html#custom)

希望它可以帮助你。

# module - 为什么不调用 Ninject 拦截器？

> ID：12865686
> 
> 赞同：1
> 
> 时间：2012-10-12T19:18:54.657
> 
> 标签：module, inversion-of-control, ninject, interceptor

快速提问 - 我无法弄清楚以下内容：

我写了一个 Ninject 模块：

```
public void OnLoad(IKernel kernel)
{
    kernel.Bind<GenericRepository>()
          .ToConstructor(syntax => new GenericRepository(new DbContext()))
          .Intercept()
          .With<LogInterceptor>();
} 
```

我有一个拦截器：

```
public void Intercept(IInvocation invocation)
{
    invocation.proceed();
} 
```

应用程序构建，模块被加载，存储库返回实体，但是 - 如果我在拦截器中放置一个断点，它永远不会被调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:26:47.797

如果我没记错的话，Ninject 拦截依赖于 Castle Proxy 技术……所以它只能与虚拟成员一起使用。

# javascript - 如何在不使用内置 debugdraw 的情况下使用 Box2D javascript？

> ID：12865693
> 
> 赞同：0
> 
> 时间：2012-10-12T19:19:14.163
> 
> 标签：javascript, box2d

假设我想使用 Box2D javascript 将下落物体的坐标简单地打印到文本框中，而不是使用 debugDraw 模拟场景。

或者，假设我想使用 Box2D javascript 将其模拟到使用 WebGL 或其他库的画布上，而不是使用 debugDraw 模拟场景。

我查看了许多教程（包括 Seth 的），它们都向我们展示了如何使用 debugDraw 模拟物理。

有什么方法可以让我获得每个身体的位置坐标、角度、速度等？也许所有这些参数将使我能够创建自己的模拟而不是来自 debugDraw。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:05:36.563

好的，经过一番研究，我发现这里的[文档](http://www.kyucon.com/doc/box2d/)包含方法和成员，例如`m_position`, `GetAngle()`，`GetBodyList()`它们返回有关主体参数的信息，可以使用 WebGL 之类的图形库对其进行渲染。

# jquery - jquery mobile href 短信 android

> ID：12865694
> 
> 赞同：1
> 
> 时间：2012-10-12T19:19:22.870
> 
> 标签：jquery, mobile, sms, send

我想使用以下代码发送短信：

```
 <a href="sms:؟body=sdsadweqw">Invite a friend by SMS</a> 
```

但它不起作用——我收到一条没有正文的短信（它是空的）。

问题可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:23:44.973

`<a href="sms:+1234567890?body=message">SMS Link</a>`
您没有数字，看起来您正在使用`؟`而不是问号`?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T21:49:58.090

这完全取决于您的电子邮件客户端，一些电子邮件客户端只获取电话号码，之后忽略任何内容。

在 iOS 上，如果您想添加正文，请尝试添加“;” 代替 ”？”

```
sms://000-000-0000;body=hello+world 
```

# git - 通过运行 setup.exe 更新 cygwin 中的软件包，但它存储在 temo 文件中

> ID：12865695
> 
> 赞同：1
> 
> 时间：2012-10-12T19:19:27.170
> 
> 标签：git, cygwin

我试图更新 cygwin ，所以运行 setup.exe 并在我的系统中选择 cygwin 目录。所有这些包存储在

> **C:\cygwin\http%3a%2f%2fmirrors.163.com%2fcygwin%2f\release**

一些 temo 目录，但它并没有像 bin 和 all 那样稳定到所需的路径。如何让它发生。

我对这个环境很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:02:46.303

如果你想要 git 和 Cygwin，你需要在更新 Cygwin 时在包列表步骤中选择它：

从[在 Cygwin 上安装 Git](http://www.celinio.net/techblog/?p=818)

> 从“开发”类别中选择 Git 包。他们是 ：
> 
> *   混帐
> *   git完成
> *   git-gui
> *   git-svn（可选）
> *   吉特克

![Cygwin 上的 git](../Images/1bc0b27415e7b51735b9ad6482db5586.png)

从[安装 git](http://oreilly.com/software-engineering/excerpts/version-control-git/installing-git.html)：

> 选择要安装的软件包后，再单击几次下一步，直到 Cygwin 安装完成。然后，您可以从“开始”菜单启动 Cygwin Bash Shell，该菜单现在应该包含 git 命令

![Cygwin 外壳](../Images/bb67e9e397acfcb4ca7909e1bcdb5169.png)

# sql - sqlite - 将数据插入 blob

> ID：12865697
> 
> 赞同：7
> 
> 时间：2012-10-12T19:19:30.380
> 
> 标签：sql, shell, sqlite

我正在尝试使用 SQLite3 的 shell 将二进制数据插入到 blob 中，这意味着常规的 SQL 语句。这是我的桌子：

```
CREATE TABLE MYTABLE
    (ID INTEGER,
     BINDATA BLOB NOT NULL,
     SOMEFK INTEGER REFERENCES OTHERTABLE(ID) NOT NULL,
     PRIMARY KEY(ID)
); 
```

这是我正在尝试的那种插入语句：

```
INSERT INTO MYTABLE (BINDATA, SOMEFK)
VALUES (__READBINDATA('/tmp/somefile'), 1); 
```

成为我`__READBINDATA(file)`正在寻找的功能。那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T21:05:49.037

没有将文件读入 blob 的内置函数或 shell 函数。

但是，在该[`hexdump`](http://linux.die.net/man/1/hexdump)工具的帮助下，可以将文件的内容转换为[blob 文字](http://www.sqlite.org/lang_expr.html#litvalue)：

```
echo "insert into mytable(bindata, somefk) " \
     "values(x'"$(hexdump -v -e '1/1 "%02x"' /tmp/somefile)"', 1);" 
```

然后可以将该命令通过管道传输到`sqlite3`shell 中。

# c# - C# 相当于 Java 的通配符

> ID：12865701
> 
> 赞同：3
> 
> 时间：2012-10-12T19:20:06.853
> 
> 标签：c#, java, generics

如果存在，以下 Java 代码的 C# 等价物是什么：

```
new HashMap<Class<? extends BaseClass>, Integer>(); 
```

我目前使用`new Dictionary<Type, int>()`的，这更像是
`new HashMap<Class<?>, Integer>()`哪个，显然不一样。

*`HashMap`（忽略和之间的差异`Dictionary`）*

**编辑：**为了澄清，我不是想定义一个新类，只是创建一个`HashMap`/的实例`Dictionary`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:21:59.187

我相信您想将类型参数限制为泛型类型 - [where](http://msdn.microsoft.com/en-us/library/bb384067.aspx)关键字用于：

```
class MyDict<TKey, TValue> : Dictionary<TKey, TValue> where TValue : SomeBaseClass
{
    ...
} 
```

这是你要问的还是我误解了你的问题？

**编辑：**你不能完全按照你在 C# 中的要求去做——你不能用类型约束定义泛型类型的本地实例。但是，您可以预先声明您的约束`Dictionary`类型（如我的示例），然后创建该类型的实例，如下所示：

```
// SomeClass will have to inherit from SomeBaseClass
MyDict<SomeClass> instance = new MyDict<SomeClass> (); 
```

我*认为*这与您正在寻找的内容很接近。如果我误解了，请发表评论 - 我对 Java 的了解并不深。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T19:32:27.010

C# 中没有等效的 Java 通配符。在 Java 中，类型的类型是类本身的`Class<T>`位置。`T`C# 中的等价物是类型`Type`，它*不是通用*的。所以似乎你能做的最好的事情就是拥有，如你所说， a `Dictionary<Type, int>`，如果它被封装在一个类中，你可以限制你在代码中放入字典中的内容（所以它只是一个运行时检查）：

```
private Dictionary<Type, int> myDictionary = new Dictionary<Type, int>();
public void Add(Type type, int number) {
   if (!typeof(BaseClass).IsAssignableFrom(type)) throw new Exception();
   myDictionary.Add(type, number);
} 
```

您甚至可以[`IDictionary`](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)使用该逻辑实现您自己的。

**更新**

我能想到的另一个*运行时*技巧是为您的类型使用包装类：

```
public class TypeWrapper<T>
{
    public Type Type { get; private set; }
    public TypeWrapper(Type t)
    {
        if (!typeof(T).IsAssignableFrom(t)) throw new Exception();
        Type = t;
    }
    public static implicit operator TypeWrapper<T>(Type t) {
        return new TypeWrapper<T>(t);
    }
} 
```

（也实现`Equals`and `GetHashCode`，只是委托给`Type`。）

然后你的字典变成：

```
var d = new Dictionary<TypeWrapper<BaseClass>, int>();
d.Add(typeof(BaseClass), 2);
d.Add(typeof(Child), 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T03:47:58.320

正在研究同样的问题，这个穷人的检查器是我能想到的最好的东西：

```
class MyValue {
    public Type Type { get; private set; }

    private MyValue(Type type)
    {
        this.Type = type;
    }

    public MyValue of<T>() where T : BaseClass
    {
        return new MyValue(typeof(T));
    }
}

IDictionary<int, MyValue> myDictionary = new Dictionary<int, MyValue>()
{
    { 1, MyValue.of<SubClass1>(); },
    { 2, MyValue.of<SubClass2>(); },
    { 3, MyValue.of<NotSubClass>(); }, // this causes a compile error
}; 
```

# ios - Urban AirShip 丰富的推送通知收件箱方向更改

> ID：12865708
> 
> 赞同：1
> 
> 时间：2012-10-12T19:20:28.050
> 
> 标签：ios, cocos2d-iphone, urbanairship.com

您好，我在 cocos2d 中为 IOS 使用 Urban AirShip 丰富的推送通知。我正在获取丰富通知的收件箱，但我正在以肖像模式获取它。我想以横向模式获取收件箱。

这是我正在使用的代码

```
 [UAInbox useCustomUI:[UAInboxUI class]];//sample UI implementation
    [UAInbox shared].pushHandler.delegate = [UAInboxUI shared];

   // If the application gets an UAInbox message id on launch open it up immediately.
    // Only works for the default inbox
    [UAInboxUI shared].inboxParentController=window_.rootViewController;
    [UAInboxPushHandler handleLaunchOptions:launchOptions];

     if ([[UAInbox shared].pushHandler hasLaunchMessage]) {
        [[[UAInbox shared] uiClass] loadLaunchMessage];
    }

    // Create the main window
    window_ = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [UAInbox displayInbox:window_.rootViewController animated:YES]; 
```

任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:12:48.323

好的自己解决了这个问题。Urban Airship 已经具备了横向展示的能力。

始终在 viewdidfinishwithlaunchingoptions 中编写方法以在 AppDelegate.mm 中显示 UAInbox（在我的情况下，我需要在启动时显示收件箱）

此外，如果您想在按钮单击时添加 UrbanAirship 收件箱（来自 cocos2d 场景），那么在我的情况下，始终将其添加到 cocos2d 游戏的`window_.rootViewController`rootViewController 中，而不是通过将其添加到 uiviewcontroller 和使用 uiviewcontroller 向 cocos2d 场景显示`the [[CCDirector SharedDirector]view]addsubview:uiviewcontroller].`

# javascript - 检测到滚动时的 ScrollTop

> ID：12865713
> 
> 赞同：1
> 
> 时间：2012-10-12T19:21:02.373
> 
> 标签：javascript, jquery, scroll, scrolltop

我想制作一个类似于此页面上的功能。[B&O BeoPlay A3](http://www.beoplay.com/Products/BeoplayA3)

当您向下滚动时，它会自动滚动到下一页。

我一直在玩 window.pageYOffset。到目前为止我有这个：

```
window.onscroll = scroll;

        function scroll () {
            setTimeout(function() {
                if (window.pageYOffset < 100 && window.pageYOffset > 2) {
                    scrollLogin();
                }
                else if (window.pageYOffset > 100 && window.pageYOffset < 159 && window.pageYOffset != 124) {
                    scrollSky();
                }
                else if (window.pageYOffset > 159 && window.pageYOffset < 248) {
                    scrollCity();
                }
            },500);
        }
        function scrollLogin() {
            $('html,body').animate({
                scrollTop: $("#login").offset().top
            }, 500);
        }
        function scrollSky() {
            $('html,body').animate({
                scrollTop: $("#skyContainer").offset().top
            }, 500);
        }
        function scrollCity() {
            $('html,body').animate({
                scrollTop: $("#city").offset().top
            }, 500);
        } 
```

问题是这种方式根本无法无缝运行。我必须等待 500 毫秒才能再次滚动。如果这也仅适用于固定的屏幕分辨率。您知道存档此功能的更好方法吗？这也允许百分比测量，以便它在不同分辨率的显示器上工作？

[链接到我的尝试](http://chrisc.dk/dwd/weather.html)。

所以我想要视口坚持的 3 个状态：顶部（登录栏）、中间（天空动画）和底部（搜索栏）。

非常感谢你！

编辑：

采取2：

我做了一个变量来告诉我动画是否结束。它只是在动画打开时将值设置为“1”，这可以防止各种混乱。

所以我的脚本现在工作得很好。唯一的问题是它只适用于我的 innerHeight 和 innerWidth。（内部高度：863 - 内部宽度：1440）。

有没有办法以百分比制作 window.pageYOffset ？这是存档此效果的最佳方式吗？

感谢您有一个愉快的一天。

这是我的新代码：

```
window.onscroll = scroll;

        var animationIsOn = 0;

        function scroll () {
            if (animationIsOn == 0) {
                var pageY = window.pageYOffset;
                if (pageY < 119 && pageY > 69) {
                    scrollLogin();
                }
                else if (pageY > 5 && pageY < 69 || pageY > 179 && pageY < 254) {
                    scrollSky();
                }
                else if (pageY > 129 && pageY < 179) {
                    scrollCity();
                }
            }
        }
        function scrollLogin() {
            animationIsOn = 1;
            $('html,body').animate({
                scrollTop: $("#login").offset().top
            }, 500, function() {
                animationIsOn = 0;
            });
        }
        function scrollSky() {
            animationIsOn = 1;
            $('html,body').animate({
                scrollTop: $("#skyContainer").offset().top
            }, 500, function() {
                animationIsOn = 0;
            });
        }
        function scrollCity() {
            animationIsOn = 1;
            $('html,body').animate({
                scrollTop: $("#city").offset().top-600
            }, 500, function() {
                animationIsOn = 0;
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:55:24.537

要将 pageYOffset 获取为百分比，只需将 pageYOffset 除以 document.documentElement.scrollHeight 并乘以 100。

编辑：Ckrill 发现他需要使用 window.innerHeight 而不是文档的 scrollHeight 属性。

# batch-file - 如何编写 bat 文件以重命名文件层次结构中的文件

> ID：12865714
> 
> 赞同：0
> 
> 时间：2012-10-12T19:21:04.413
> 
> 标签：batch-file, file-rename

我在文件系统中有很多图片。我正在尝试找出一种方法来重命名所有文件，如果可能的话将它们放在一个文件夹中。至少在它们所在的位置重命名它们。

它们目前处于这样的层次结构中：

```
folder1\folder2\filename.jpg 
```

有什么办法可以编写脚本来重命名文件，以便实际文件的名称为：

```
folder1-folder2-filename.jpg 
```

我不知道该怎么做。任何建议或朝着正确方向的推动将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:53:05.617

尝试这个..

```
for %%* in (.) do set name=%%~pn*
set name=%name:\=-%
set name=%name:~1% 
```

%name% 现在有文件夹名称。将此添加到您的文件名中。

# controller - Yii：控制器操作，以相同的操作方法处理记录创建和更新

> ID：12865715
> 
> 赞同：0
> 
> 时间：2012-10-12T19:21:07.127
> 
> 标签：controller, yii, action

对于某些基本功能，我无法在控制器中绘制操作布局。我有一个提供帐户基本信息的视图。帐户跨越许多领域，因此用户最有可能进行频繁保存。我所经历的是，每次我进行保存时，都会创建一个新行。actionCreate 被调用，它只是将数据转储到表中。我一定要让用户在同一个界面上填写所有数据。

从到目前为止我收集到的信息来看，我不能为 actionCreate 方法设置动作参数，因为它失败了，因为它在第一次保存时为空。

按照我的 actionCreate 控制器方法中的代码片段：

```
 public function actionCreate()
{
    $model=new Account;
    $accaddress=new AccAddress;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Account'],$_POST['AccAddress']))
    {
        $model->attributes=$_POST['Account'];

        if($model->save()) //Account data saving

            if (isset($_POST['AccAddress'])){
            //Yii::log('Dumping infomration for multiple models.');
            $accaddress->attributes=$_POST['AccAddress'];
            $accaddress->acc_id=$model->id;

            if ($pataddress->save()){//Account address saving
            }
            //$this->redirect(array('create','id'=>$model->id));
            }
    }

    $this->render('create',array(
        'model'=>$model,
        'accaddress'=>$accaddress,
        'tabss'=>$tabarray,
    ));
} 
```

急切期待建议/意见。提前致谢。

问候，费萨尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:40:42.573

看起来您正在使用 Gii 生成的代码，这很好。你的帖子有点不清楚到底出了什么问题，但这里有一些事情需要检查？

用户提交的数据是否存在不正确的问题，他们需要修复它吗？如果是这样，那么您需要使用[验证规则](http://www.yiiframework.com/doc/guide/1.1/en/form.model#declaring-validation-rules)。

您是否使用相同的表单来创建和更新记录？如果是这样，那么您需要确保将 ID 作为隐藏表单字段包含在某处。当您运行时`$model->attributes=$_POST['Account'];`，它能够更新已经存在的记录的唯一方法是 ID 是否是遇到的字段之一`$_POST['Account']`。

是账户地址的问题吗？例如，您是否尝试将多个帐户地址模型附加到一个帐户？如果是这样，您将需要在此处添加逻辑来处理多个可能的模型。

希望其中之一有所帮助。

# mysql - CASE语句组错误的MySql SELECT AVG

> ID：12865717
> 
> 赞同：2
> 
> 时间：2012-10-12T19:21:11.263
> 
> 标签：mysql, select, group-by, case, average

我正在尝试根据使用带有 a 的子句的语句填充单个平均值，但是`CASE`它返回对组函数错误代码 1111 的无效使用：`WHERE``MONTHS``COUNT`

```
SELECT 
count(ORDER_NUMBER) as cnt,
a.ITEM,
MONTH(TRANS_DATE) as Month,
AVG(CASE
WHEN count(ORDER_NUMBER) IS NULL THEN 0
WHEN count(ORDER_NUMBER) < 1 AND a.CAT != 'E' THEN 0
WHEN count(ORDER_NUMBER) < 1 AND a.CAT = 'E' THEN .05
WHEN count(ORDER_NUMBER) >= 1 AND count(ORDER_NUMBER) < 4 AND a.CAT = 'E' THEN .5
WHEN count(ORDER_NUMBER) >= 4 AND a.CAT = 'E' THEN 1
WHEN count(ORDER_NUMBER) <= 5 AND a.CAT != 'E' THEN .05
WHEN count(ORDER_NUMBER) >= 6 AND count(ORDER_NUMBER) < 11 AND a.CAT != 'E' THEN .25
WHEN count(ORDER_NUMBER) >= 11 AND count(ORDER_NUMBER) < 21 AND a.CAT != 'E' THEN .5
WHEN count(ORDER_NUMBER) >= 21 AND a.CAT != 'E' THEN 1 END) as TSCORE
FROM trx.TRX_Import t2
    JOIN ATTRIBUTES a
    ON a.ITEM = t2.ITEM
WHERE `TRANS_DATE` BETWEEN DATE_SUB(CURDATE(), INTERVAL 365 DAY) AND CURDATE()
AND t2.ITEM = 'WARI-BB150' 
```

当我添加额外的`GROUP BY MONTH`它正确识别每个月的 TSCORE...我宁愿它只是吐出所有这些 TSCORE 的一个平均值。

随着`GROUP BY MONTH`，它吐出：

```
 cnt     ITEM        Month   TSCORE
    1   WARI-BB150      1       0.5
    2   WARI-BB150      2       0.5
    1   WARI-BB150      3       0.5
    2   WARI-BB150      4       0.5
    2   WARI-BB150      5       0.5
    2   WARI-BB150      6       0.5
    4   WARI-BB150      7       1
    2   WARI-BB150      10      0.5
    3   WARI-BB150      11      0.5
    1   WARI-BB150      12      0.5 
```

我希望数据仅根据上表吐出一个项目的平均 TSCORE（所以只有 1 行信息）：

```
cnt   ITEM          TSCORE
20    WARI-BB150     0.55 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:05:07.890

我必须在`FROM`子句中使用子查询并在其上创建一个`AVG`：

```
SELECT
t2.ITEM as Item,
AVG(t2.TSCORE) as AvgTSCORE
FROM 
(SELECT count(ORDER_NUMBER) as cnt, t3.ITEM, MONTH(TRANS_DATE) as Month, 
(CASE
WHEN count(ORDER_NUMBER) IS NULL THEN 0
WHEN count(ORDER_NUMBER) < 1 AND a.CAT != 'E' THEN 0
WHEN count(ORDER_NUMBER) < 1 AND a.CAT = 'E' THEN .05
WHEN count(ORDER_NUMBER) >= 1 AND count(ORDER_NUMBER) < 4 AND a.CAT = 'E' THEN .5
WHEN count(ORDER_NUMBER) >= 4 AND a.CAT = 'E' THEN 1
WHEN count(ORDER_NUMBER) <= 5 AND a.CAT != 'E' THEN .05
WHEN count(ORDER_NUMBER) >= 6 AND count(ORDER_NUMBER) < 11 AND a.CAT != 'E' THEN .25
WHEN count(ORDER_NUMBER) >= 11 AND count(ORDER_NUMBER) < 21 AND a.CAT != 'E' THEN .5
WHEN count(ORDER_NUMBER) >= 21 AND a.CAT != 'E' THEN 1 END) as TSCORE
FROM trx.TRX_Import t3
JOIN ATTRIBUTES a
    ON a.ITEM = t3.ITEM
WHERE `TRANS_DATE` BETWEEN DATE_SUB(CURDATE(), INTERVAL 365 DAY) AND CURDATE()
AND t3.ITEM = 'WARI-BB150'
GROUP BY MONTH
) t2 
```

吐出：

```
Item         AvgTSCORE
WARI-BB150   0.55000 
```

# java - 请解释所有不同的 Eclipse 注释类型？

> ID：12865723
> 
> 赞同：3
> 
> 时间：2012-10-12T19:21:48.660
> 
> 标签：java, eclipse, javadoc, comments

我正在[Eclipse Color Themes](http://eclipsecolorthemes.org/)构建一个漂亮的配色方案（这极大地增强了 Eclipse 体验，非常感谢！）。我看到有许多不同的评论类型。我了解其中一些，但想找到对不同评论类型的明确描述。他们来了：

*   单行注释
*   多行注释
*   评论任务标签
*   文档
*   javadoc链接
*   javadoc标签
*   javadoc关键字

如果有人知道描述这些不同评论类型的重要特征/方面的地方的链接，请告诉我（谷歌搜索**非常**不满意）。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:29:08.860

```
//singleLineComment

/*multiple
  line
  comment*/

//TODO commentTaskTag
//FIXME commentTaskTag
//XXX commentTaskTag

/**
 * javadoc
 *
 */

/**
 * javadocLink
 * {@link}
 */

/**
 * javadocTag
 * <a href="" />
 */

/**
 * javadocKeyword
 * @author Jagger
 */ 
```

# sql-server-2008 - SELECT 语句的问题 - 查找不同条件下的最小值、最大值 - SQL Server 2008

> ID：12865731
> 
> 赞同：1
> 
> 时间：2012-10-12T19:22:15.460
> 
> 标签：sql-server-2008, max

这是我的选择的样子：

```
DocID   DocNumber   MilestoneDate   MilestoneID
30      14-1        2001-10-01  10
30      14-1        2001-10-15  11
30      14-1        2002-11-06  13
30      14-1        2003-11-01  27
30      14-1        2003-11-01  30
30      14-1        2004-03-01  28
30      14-1        2004-03-01  31
31      14-3        2003-06-27  13
31      14-3        2004-05-05  27
31      14-3        2004-05-05  30
31      14-3        2005-07-20  35
31      14-3        2005-08-31  23
36      1-2         1996-10-01  10
36      1-2         1996-10-01  11
36      1-2         1996-12-01  28
36      1-2         1996-12-01  31 
```

我需要从这个选择中生成一个报告，每个 DocID 有 1 行。它将具有列 DocID、DocNumber、EarliestDate = 如果 MilestoneID 10 或 11 不为空，则从这两个中选择更大的，否则该 DocID 的其他 MilestoneID 的最早日期（这是我的麻烦）任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:57:12.860

Is this what you're looking for?

```
DECLARE @Table TABLE (DocID INT, DocNumber VARCHAR(10), MilestoneDate DATETIME, MilestoneID INT)
INSERT INTO @Table VALUES (30, '14-1', '10-01-2001', 10)
INSERT INTO @Table VALUES (30, '14-1', '10-15-2001', 11)
INSERT INTO @Table VALUES (30, '14-1', '11-06-2002', 13)
INSERT INTO @Table VALUES (30, '14-1', '11-01-2003', 27)
INSERT INTO @Table VALUES (30, '14-1', '11-01-2003', 30)
INSERT INTO @Table VALUES (30, '14-1', '03-01-2004', 28)
INSERT INTO @Table VALUES (30, '14-1', '03-01-2004', 31)
INSERT INTO @Table VALUES (31, '14-3', '06-27-2003', 13)
INSERT INTO @Table VALUES (31, '14-3', '05-05-2004', 27)
INSERT INTO @Table VALUES (31, '14-3', '05-05-2004', 30)
INSERT INTO @Table VALUES (31, '14-3', '07-20-2005', 35)
INSERT INTO @Table VALUES (31, '14-3', '08-31-2005', 23)
INSERT INTO @Table VALUES (36, '1-2', '10-01-1996', 10)
INSERT INTO @Table VALUES (36, '1-2', '10-01-1996', 11)
INSERT INTO @Table VALUES (36, '1-2', '12-01-1996', 28)
INSERT INTO @Table VALUES (36, '1-2', '12-01-1996', 31)

-- get the items where we want the max
SELECT DocID, DocNumber, MAX(MilestoneDate) AS MilestoneDate
FROM @Table WHERE MilestoneID IN (10, 11)
GROUP BY DocID, DocNumber
UNION -- get the items where we want the min
SELECT DocID, DocNumber, MIN(MilestoneDate)
FROM @Table 
WHERE DocID NOT IN (SELECT DocID FROM @Table WHERE MilestoneID IN (10, 11))
GROUP BY DocID, DocNumber

Result:
DocID      DocNumber        MilestoneDate
30         14-1             2001-10-15 00:00:00.000
31         14-3             2003-06-27 00:00:00.000
36         1-2              1996-10-01 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:58:23.980

```
SELECT
    t.DocID,
    t.DocNumber,
    EarliestDate = 
        ISNULL(MAX(CASE WHEN t.MilestoneID IN (10, 11)
                        THEN t.MilestoneDate END),
               MIN(CASE WHEN t.MilestoneID IN (10, 11)
                        THEN NULL ELSE t.MilestoneDate END))
FROM [table] t
GROUP BY
    t.DocID,
    t.DocNumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T19:20:00.690

我为我的问题提供了一个解决方案。

任何改进建议都更受欢迎。因为我需要将 pvanhouten 给我的建议合并到另一个查询中，所以我决定做这样的事情：

```
Select t1.DocID, t1.DocNumber, t1.DocTitle, t1.DevStatus, t1.GrOrgType, t1.DocType,  
       t1.WebStatus, t1.RecommandType, t1.ProjectPlanApprovedBySponsor, 
       t1.ProjectPlanApprovedByWG, t1.Completed, t2.MilestoneDate as EarliestDate From
  (Select * From 
   (Select distinct d.DocID, d.DocNumber, d.DocTitle,dm.MilestoneDate,lkpds.DevStatus,   
                    lkpgt.GrOrgType, lkpdt.DocType, lkpws.WebStatus, lkprt.RecommandType,
        CASE dm.MilestoneId 
          WHEN 10 Then 'PPAW'
          WHEN 11 Then 'PPAS'
          WHEN 35 Then 'Completed'
        END as [MilestoneName],   

       (CASE WHEN not dv.DocID  is Null THEN 'Yes' END) OldVersionExist

        FROM Document d LEFT JOIN lkpDocDevStatus lkpds ON d.DocDevStatID = lkpds.DocDevStatID
            LEFT JOIN lkpDocType lkpdt ON d.DocTypeID = lkpdt.DocTypeID
            LEFT JOIN lkpDocRecType lkprt ON d.DocRecTypeID = lkprt.DocRecTypeID
            LEFT JOIN lkpWebStatus lkpws ON d.WebStatID = lkpws.WebStatID
            LEFT JOIN Doc_Group dg ON d.DocID = dg.DocID
            LEFT JOIN GroupOrg gro ON dg.GroupID = gro.GroupID
            LEFT JOIN lkpGroupOrgType lkpgt ON lkpgt.GrOrgTypeID = gro.GrOrgTypeID
            LEFT JOIN Doc_Milestone dm ON d.DocID = dm.DocID
            JOIN Milestones m ON m.MilestoneID = dm.MilestoneID
            LEFT JOIN Doc_Version dv ON d.DocID = dv.DocID

         Where dg.GrOrgRoleID = 5 and lkpds.DocDevStatID <> 1 and  lkpds.DocDevStatID <> 9             

 Group By d.DocID, d.DocNumber, d.DocTitle, lkpds.DevStatus, lkpds.DocDevStatID,  
          lkpgt.GrOrgType, lkpdt.DocType, 
          lkpws.WebStatus, lkprt.RecommandType, dv.docID, dm.MilestoneDate, dm.Milestoneid) T

 PIVOT
 (
  Max(MilestoneDate)
  FOR [MilestoneName] IN ([PPAW],[PPAS],[Completed])
  ) AS PivotTable
 ) t1

 JOIN 
  (SELECT dm.DocID , MAX(MilestoneDate) AS MilestoneDate 
     FROM document d JOIN Doc_Milestone as dm ON d.DocID = dm.DociD WHERE MilestoneID IN (10,   
      11) 
     GROUP BY dm.DocID
     UNION -- get the items where we want the min 
     SELECT dm.DocID, MIN(MilestoneDate) 
     FROM document d JOIN Doc_Milestone as dm ON d.DocID = dm.DociD  
     WHERE dm.DocID NOT IN (SELECT dm.DocID FROM Doc_Milestone as dm WHERE dm.MilestoneID IN (10,
     11)) 
     GROUP BY dm.DocID) as t2

 ON t1.DocID = t2.DocID 
```

# jakarta-ee - 如何将调用者的信息从 Web 层传递到 EJB 层？

> ID：12865733
> 
> 赞同：5
> 
> 时间：2012-10-12T19:22:21.170
> 
> 标签：jakarta-ee, jboss, ejb-3.0

在我们的企业应用程序中，有**服务层**（EJB3.0，包括业务逻辑和数据库访问）和**Web 层**（Servlet/JSP）。JBoss AS 7 在分布式机器中部署了分离的耳朵和战争。

服务层包含有**状态**和**无状态**EJB。

我们有用于方法调用的 EJB 拦截器。对于从**Web**层登录的用户，用户信息保存在**HttpSession**中（用户验证只需通过在 DB 中查询他的帐户和密码来处理）。

现在性能调优需要知道哪个用户调用了这些 EJB 方法、用户信息、日期信息等。这些将被提取并记录或存储在数据库中以供我们使用。

现在我的问题是：

***如何区分 EJB 层的调用者信息***？

EJB 拦截器可以获取 EJB 方法的参数以及何时调用它。但我们不知道是谁打电话给它的。

我们知道将 EJB 层与 Web 层结合起来很难看。所以我们不会将 HttpSession/HttpRequest 传递给 EJB 层，即使这可能有助于从 Session/Request 对象中获取我们需要的内容。

而且有太多的 EJB 方法，我们无法将 TuningInfo（包括请求信息、用户信息等）作为参数从 Web 传递给每个 EJB 方法。

***是否可以在 EJB 层中获取调用者的信息？***

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:28:22.397

如果 Web 层和 EJB 层在同一个 JVM 上，则可以通过线程本地传递用户信息。 [http://javacodesamples.wordpress.com/2012/07/11/understanding-the-concept-behind-threadlocal/](http://javacodesamples.wordpress.com/2012/07/11/understanding-the-concept-behind-threadlocal/)

# java - 在 JAR 文件中包含 JDOM 等外部库

> ID：12865737
> 
> 赞同：-3
> 
> 时间：2012-10-12T19:22:43.147
> 
> 标签：java, jar, include, external, jdom

> **可能重复：**
> [将发布合并到一个 jar 文件中的最简单方法](https://stackoverflow.com/questions/81260/easiest-way-to-merge-a-release-into-one-jar-file)

我做了一个有 4 个类的简单项目。它使用 JDOM 库，我将它包含在我的类路径中。当我制作一个 JAR 文件，放入 4 个类和一个清单时，当我执行 JAR 时出现此错误。

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/jdom/JDOMException
    at Frame.setPeople(Frame.java:230) 
```

它告诉我`JDOMException`找不到类。那么，在 Jar 文件中包含外部库有什么技巧吗？如果可能的话，你能给我一个关于如何包含 JDOM 库的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:43:21.313

Hmmm... if you don't want to use ANT, I bet you won't want to use maven either. But this problem is not going to solve itself. You will have to do something. Anyhow...

Check out the maven shade plugin. You will have to switch your build environment to use maven, but once you do, the shade plugin can create an uber, executable jar with your code plus all your dependencies. See [http://maven.apache.org/plugins/maven-shade-plugin/](http://maven.apache.org/plugins/maven-shade-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:54:55.433

```
 java -cp pat/to/jdom.jar:path/to/my.jar my.main.JavaClass 
```

罗尔夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T22:25:37.300

您可以通过使用 Winzip、存档管理器或类似工具解压缩 JDOM 库 JAR 的内容，添加您的类，然后将所有组合文件重新压缩到一个新 JAR 中来完成此操作。

JAR 只是一个 Zip 存档，因此有很多工具可以解压和压缩它们。

# java - 使用 ComboBox 获取行的索引值

> ID：12865741
> 
> 赞同：0
> 
> 时间：2012-10-12T19:23:07.380
> 
> 标签：java, swt, jface, tableviewer

我表中的一行是 ComboBox。他们可以在“是”、“否”、“两者”之间进行选择。如果他们选择“两者”，则必须对正在构建表的数据数组进行一些修改并刷新表。在上一篇文章中建议在 Both 的 else 语句中构建我的逻辑。

```
protected void setValue(Object element, Object value) 
{
   if((element instanceof AplotDatasetData) && (value instanceof Integer)) {
        Integer choice = (Integer)value;
        String option = ((AplotDatasetData)element).getMarkupValue();;
        if(choice == 0) {
            option = "No";
        }    
        else if(choice == 1) {
            option = "Yes";
        }    
        else {
            option = "Both";
            abd.getIndexOfSelectedBoth(); <<<<<<<<<
        }    
       ((AplotDatasetData)element).setMarkupValue(option);
        getViewer().update(element, null);
    }
} 
```

上面的代码在类 OptionEditingSupport 中。

该表在 AplotBaseDailog 类中。

所以在OptionEditingSupport类中，我导入了AplotBaseDailog类并赋值。

```
AplotBaseDialog abd; 
```

然后我在 AplotBaseDailog 类中编写了一个方法来获取他们刚刚更改为 Both 的列的行索引。我需要索引值来从数组中获取数据。

```
 public void getIndexOfSelectedBoth() {
     int row = viewer.getTable().getSelectionIndex();
     AplotDataModel.getInstance().rebuildDataArray(row);
     updateTableViewer();
  } 
```

然后我将行的索引传递给我的 dataModel 类中的一个方法。它位于具有数据数组的 dataModel 类中。

我猜我在这里重新发明轮子。必须有更好的方法来完成这个过程。现在，我的所有代码都已到位，我在调用 AplotBaseDialog 的行处收到空指针错误

```
else {
        option = "Both";
        abd.getIndexOfSelectedBoth(); <<<<----
      } 
```

您可以在 OptionEditingSupport 类中获取索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:46:08.303

所以你想找到`AplotDatasetData`选择“两者”的索引。

您的`ModelProvider`( `APlotDataModel`) 包含`List`您的数据，对吗？

每个都`List`实现方法[`indexOf(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)。因此，您可以使用此方法获取当前对象的索引。

```
AplotDatasetData selected = ...
int index = AplotDataModel.getInstance().getIndexOf(selected); 
```

并在您的模型中：

```
public int getIndexOf(APlotDatasetData object)
{
    return LIST_HOLDING_YOUR_DATA.indexOf(object);
} 
```

# algorithm - x+yz 在 -1 和 1 之间

> ID：12865747
> 
> 赞同：-3
> 
> 时间：2012-10-12T19:23:48.347
> 
> 标签：algorithm, list, language-agnostic, integer

让是范围内**不同**整数`[a_1 a_2 ... a_n]`的列表。给出一个算法，如果存在三个不同的元素，例如 ，则返回，否则返回。**`[1,10n]``true``x,y,z``-1 <= x+y-z <= 1``false`**

 **蛮力算法（检查所有可能的组合`x+y-z`，及时运行`O(n^3)`。有更有效的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:58:56.353

就在这里。这是使用额外空间的`O(n^2)`最坏情况算法。`O(n)`

这个想法是检查所有可能的对（而不是三元组），并迭代地标记您已经看到的元素，并将每对的总和与它们进行比较。
对于每一对，检查它的总和是否有匹配的元素，该元素恰好是总和 ( `x+y-z == 0`) 或者如果添加 1 ( ) 可以得到的元素，`x+y+1-z == 0 -> x+y-z = -1`或者如果减少 1 ( `x+y-1-z == 0 -> x + y - z == 1`)可以得到的元素

伪代码：

```
mark = new boolean[10n]; //all initialized to false
sort arr //O(nlogn)
for each i in n,1: (reverse order)
   for each j in 1,i-1:
      //neglected range check, make sure it is done
      if (mark[arr[i]+arr[j]] || mark[arr[i]+arr[j]+1] || mark[arr[i]+arr[j]-1]):
          return true
      mark[arr[i]] = true
return false 
```

请注意，我们`i`从`n`1 迭代，因为`z > x`和`z > y`- 我们要确保我们正在检查所有与已经在列表中的元素的对（如果它存在）

**正确性证明：**
如果有一个解决方案`x+y-z = 0`- 那么`z > x`和`z > y`（所有元素都是正的不同整数）。
不失一般性，我们假设`x > y`。所以，当`arr[i]=x`在外循环中迭代时，会有一些`j<i`这样的`arr[j]=y`. 另外，因为`z>x`-`mark[z] == true`因为我们在之前迭代它时标记了它。
因此：该算法将找到`mark[arr[x] + arr[y]] == true`，并产生`true`。 案件
的类似证明。`+-1`

如果算法结果为真，那么它发现条件之一为真。让我们假设它是`mark[arr[i] + arr[j]]`（其他情况的证明将是相似的）。
所以，我们发现了`mark[arr[i] + arr[j]] == true`——所以我们插入了它，因为有一些`z`这样`z = arr[i] + arr[j]`的元素，并且算法对于这种情况是正确的。**

# wordpress - Wordpress 上的自定义重写规则

> ID：12865751
> 
> 赞同：1
> 
> 时间：2012-10-12T19:24:01.527
> 
> 标签：wordpress, url-rewriting, permalinks

我有以下 url 查询，它将参数 texas 和 County harris 添加到查询的永久链接中。这些是称为地理的自定义分类法的一部分。

`xyz.com/dealers/honda/?geography=texas&geography=harris`

如何在 wordpress 中将此 url 重写为：

`xyz.com/dealers/honda/texas/harris/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:27:05.023

您可以在 functions.php 中执行以下操作：

```
add_rewrite_rule('^dealers/honda/([^/]*)/([^/]*)/?','index.php?geography=$matches[1]&geography=$matches[2]','top'); 
```

但是你应该注意你已经设置了两次地理，最后一个是将要使用的。

您还需要导航到您的永久链接页面，`xyz.com/wp-admin/options-permalink.php`然后才能真正起作用，否则您将收到 404ish 错误。

# sql - concatrelated vba excel的使用

> ID：12865752
> 
> 赞同：2
> 
> 时间：2012-10-12T19:24:01.207
> 
> 标签：sql, excel, vba

我在使用 sql 语句上的函数 concatrelated 时遇到问题。我想获得如下：

我的数据是：

```
A.CABNRO E01.EXCCEX
90001 500
87000 400
90001 450
90001 300
87000 500
76005 
```

我想获得：

```
A.CABNRO NEW FIELD
90001 500,450,300
87000 400,500
76005 
```

当我包含与 concatrelated 相关的语句时，以下代码不会运行。如果有人可以帮助我，我将不胜感激！！！

```
MYSQL = "SELECT A.CABFPR, A.CABCIA, A.CABCTR, B.CTRDTR, A.CABLOE, "
MYSQL = MYSQL & "A.CABNRO, A.CABCAR, A.CABFED, A.CABHOD, A.CABFEI, "
MYSQL = MYSQL & "A.CABHOI, A.CABFEF, A.CABHOF, A.CABFEE, A.CABHOE, "
MYSQL = MYSQL & "A.CABCCL, A.CABNEM, A.CABDEM "
MYSQL = MYSQL & "CONCATRELATED(EXCCEX, E01, A.CABNRO=E01.EXCNRO) "
MYSQL = MYSQL & "FROM BDYOBEL.AIPDTA.AIPCAB A "
MYSQL = MYSQL & "LEFT OUTER JOIN BDYOBEL.AIPDTA.AIPCTR B ON A.CABCIA=B.CTRCIA AND A.CABCTR=B.CTRCTR "
MYSQL = MYSQL & "LEFT OUTER JOIN BDYOBEL.AIPDTA.AIPEXC E01 ON A.CABNRO=E01.EXCNRO "
MYSQL = MYSQL & "WHERE A.CABCIA='LOR' AND A.CABFED>="
MYSQL = MYSQL & Chr$(39) & fini & Chr$(39) & "AND A.CABFED<=" & Chr$(39) & ffin & Chr$(39)
MYSQL = MYSQL & " AND (A.CABCTR='DM' OR A.CABCTR='L1' OR A.CABCTR='L5' OR A.CABCTR='LR') AND A.CABCAR<>'0'" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:53:09.303

在[http://allenbrowne.com/func-concat.html](http://allenbrowne.com/func-concat.html)上声明

> 如果 ConcatRelated 函数返回超过 255 个字符，并且您在查询中使用它作为另一个记录集的源，Access 中的错误可能会为剩余的字符返回垃圾。

这可以解释为什么您的代码不起作用。
在 Access 中无法为不固定数量的列聚合数据。你能做的最好的事情就是写这样的东西，然后用文本编辑器把这些列组合起来。

```
TRANSFORM Sum(E01.EXCCEX) AS SumOfEXCCEX
SELECT A.CABNRO
FROM [BDYOBEL-AIPDTA-AIPCAB] AS A INNER JOIN [BDYOBEL-AIPDTA-AIPEXC] AS E01 ON 
  A.CABNRO = E01.EXCNRO
GROUP BY A.CABNRO
ORDER BY A.CABNRO DESC , E01.EXCCEX DESC 
PIVOT E01.EXCCEX; 
```

运行查询会为您的示例数据提供以下结果： ![访问输出截图](../Images/9cfc04e73d5caf8572c15b83dfe1a06a.png).

# ajax - Telerik MVC 网格数据绑定使用存储过程

> ID：12865753
> 
> 赞同：0
> 
> 时间：2012-10-12T19:24:09.510
> 
> 标签：ajax, data-binding, telerik, telerik-grid, telerik-mvc

我正在使用 Telerik mvc 网格通过传递用户在 HTML 文本框中输入的文本来填充数据。输入文本后，我有一个按钮，单击该按钮后，它应该用数据填充 Telerik mvc 网格（数据应该通过将文本传递到存储过程中来）。

我有存储过程，我有适当的控件，我想使用 ajax 绑定使用视图模型从控制器获取数据。我是 Razor 新手，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:08:16.577

查看这个演示，我认为它与您解释的案例非常接近。

[http://demos.telerik.com/aspnet-mvc/Grid/Filtering?theme=vista](http://demos.telerik.com/aspnet-mvc/Grid/Filtering?theme=vista)

# latex - 使用 RStudio 在 .Rnw 文件中插入 LaTeX 表

> ID：12865755
> 
> 赞同：2
> 
> 时间：2012-10-12T19:24:23.927
> 
> 标签：latex, knitr, rstudio

我正在使用 RStudio 并编写一个 .Rnw 文件以包含 LATEX 和 R 代码。有一个要插入的表格，我在 .Rnw 文件中使用标准 LATEX 代码，例如

```
\begin{table}[t]
\caption{SUMMARY}
\centering
\begin{tabular}{c|c|c|c|c|c}
\toprule
Data & stat1 & stat2 & stat3 & stat4 & stat5 \\
\midrule

itme1 & 36.101954 & 45 & 0.825500 & 0.220198 & 0.293448 \\
item2 & 51.828572 & 45 & 0.224900 & 0.499718 & 0.690064\\
item3 & 53.187455 & 45 & 0.188100 &  0.133086 & 0.603072 \\
item4 & 61.513952 & 45 & 0.051300 & 0.002566 & 0.014714 \\

\bottomrule
\end{tabular}
\label{tab:xxx}
\end{table} 
```

但是，当我在 RStudio 中单击“编译 PDF”时，会出现错误消息。我在网上搜索了关于在.Rnw文件中插入表格的内容，得到了使用`xtable`包的结果。我可以使用标准的 LATEX 代码来执行此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T04:23:43.120

“我们是否可以在 .Rnw 文件中插入用于制作表格的原始乳胶代码”的答案是肯定的。我终于发现错误来自下划线：如果你的列名包含a `_`，那么你需要写`\_`。否则，当你在 RStudio 中点击编译 PDF 时，会产生错误信息（而且非常难以调试！）

# scala - 为什么这个循环反应块的循环部分没有像我期望的那样“循环”？

> ID：12865763
> 
> 赞同：0
> 
> 时间：2012-10-12T19:25:19.573
> 
> 标签：scala, actor

我正在做一个家庭作业，修改我的教授创建的代码。不幸的是，他目前对我不可用，所以我正在与 stackoverflow 人群联系。

此片段来自文件“Peer.scala”，该文件与来自另一个类“RemoteActorChat.scala”的演员进行通信。为了简洁起见，我只包含了我认为是问题原因的片段。如果其余代码对找到解决方案有用，我会很乐意发布它。

我的意图是让 Peer 在连续循环中从控制台捕获输入，同时对从 RemoteChatActor 接收到的任何消息做出反应。

...

```
def act {
...
loop {
  val textInput = Console.readLine(name + ">").toString()
  textInput match {
    case "Unsubscribe" =>
      unsubscribe

    case "Subscribe" =>
      subscribe(name))

    case "?" =>
      println("Type any message to send it to the chatroom")
      println("Type 'Unsubscribe' (without quotes) to leave the chatroom")
      println("Type 'Subscribe' (without quotes) to re-join the chatroom")

    case _ =>
      post(textInput)
  }

  react {
    case Post(msg) =>
      println(name + " got a post = " + msg)
  }
} 
```

}

...

当 inputText 与 _ 匹配时，调用 post 函数，是不是这样，我得到另一个提示。如果我愿意，我可以像这样整天发布消息。

但是，当 inputText 与“Unsubscribe”、“Subscribe”或“?”匹配时，行为是不同的。案例中的语句被执行 IE）取消订阅或订阅函数被调用并按预期做他们的事情。但是，我没有收到继续从控制台发送输入的提示。对等点基本上只是在这一点上挂起。我期待另一个提示，但控制台窗口只是空的，不接受任何额外的输入。

显然，我对这应该如何工作的理解是有缺陷的。
我有什么误解，我怎样才能做到我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:00:20.713

演员正在等待一个`Post`内幕`react`。它不会继续，直到它得到一个。由于您只发送一个案例，因此只有该案例才能通过。

如果你想让其他情况正常工作，要么让他们也发送一个`react`块可以接收的消息（至少作为`case _`反应块内部的一个），或者移动反应块，这样只有在实际上有的情况下才会输入在某个`Post`时候回来。

# javascript - Twitter bootstrap 通过 Rails 中的 Javascript 管理多个单选按钮

> ID：12865766
> 
> 赞同：2
> 
> 时间：2012-10-12T19:25:39.750
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap

我在我的 rails 应用程序中使用 twitter bootstrap，并且正在构建一个带有多个单选按钮输入的表单。为了管理表单数据，我创建了一个隐藏字段，其值通过 Javascript 更新。

下面是任何给定输入的示例代码：

```
<div class="btn-group" data-toggle="buttons-radio">
          <button type="button" class="btn" id="ornamental_only_yes" name="ornamental_only" value="yes">Yes</button>
          <button type="button" class="btn" id="ornamental_only_no" name="ornamental_only" value="no">No</button>
        </div>
        <input type="hidden" id="ornamental_only" name="ornamental_only" value=""> 
```

这是管理此事件的 Javascript：

```
<script>
  var btns = ['ornamental_only_yes', 'ornamental_only_no'];
  var input = document.getElementById('ornamental_only');
  for(var i = 0; i < btns.length; i++) {
    document.getElementById(btns[i]).addEventListener('click', function() {
      input.value = this.value;
    });
  }
</script> 
```

我的问题：有没有办法以同时应用于多个单选按钮输入的方式抽象 Javascript 代码？（例如，如果我用不同的 id 重复上面的代码块 3 次）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:27:18.187

假设这是您的带有多组按钮的 HTML：

```
<div class="btn-group" id="btn_group_1" data-toggle="buttons-radio">
    <button type="button" class="btn" id="ornamental_only_yes" name="ornamental_only" value="yes">Yes</button>
    <button type="button" class="btn" id="ornamental_only_no" name="ornamental_only" value="no">No</button>
</div>
<input type="hidden" id="hidden_1" name="ornamental_only" value="">
<div class="btn-group" id="btn_group_2" data-toggle="buttons-radio">
    <button type="button" class="btn" id="awesome_only_yes" name="awesome_only" value="yes">Yes</button>
    <button type="button" class="btn" id="awesome_only_no" name="awesome_only" value="no">No</button>
</div>
<input type="hidden" id="hidden_2" name="awesome_only" value=""> 
```

要动态监听所有按钮组的点击，您可以执行以下操作（未经测试的 jQuery）：

```
$('.btn-group .btn').on('click', function() {
    var parentID = $(this).parent().attr('id');
    $('#hidden_' + parentID.substr(parentID.length - 1)).val($(this).val());
}); 
```

`input`这只是根据末尾的数字来定位隐藏字段`id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:49:27.710

使用 jQuery。

```
var buttonObjs = $(".btn-group").find("button");
buttonObjs.click(function(){
  $("#ornamental_only").val(this.value);  
}); 
```

要将此代码应用于多个块，您需要做的就是为 btn-group 元素分配一个特定的类，例如，

```
<div class="btn-group js_radio_toggle"> 
```

在js代码中只需使用，

```
var buttonObjs = $(".btn-group.js_radio_toggle").find("button"); 
```

现在这段代码可以在任何地方重用。

也在你的js代码中。你可以这样做，

```
document.getElementsByClassName("js_radio_toggle"). 
```

但我建议你使用 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:33:10.910

尝试使用这个：

```
for(var i = 0; i <= btns.length; i++) { 
```

# ajax - 网站解构：Ajax 加载页面然后滑入

> ID：12865771
> 
> 赞同：2
> 
> 时间：2012-10-12T19:25:55.930
> 
> 标签：ajax, navigation, preloader

我正在尝试重现这种效果，但我并不熟悉 javascript 来自行解构这些网站。以下是具有我正在寻找的效果的网站（仅导航）：

[http://www.serialcut.com/](http://www.serialcut.com/)
[http://www.ultranoir.com/](http://www.ultranoir.com/)
*http://kikk.be/*
*http://www.marcusthomasllc.com/*

*   我希望当前页面/部分具有 width:100% 以便它可以响应并且不显示其他部分的内容。
*   加载新页面时，加载 gif 效果很好（可选）
*   最后，这就是我认为 ajax 的用武之地；如果我在一个页面上，说*联系*，然后我点击*主页，从**联系*到*主页*只有一页幻灯片，而不是中间的每一页。

我不希望任何人真正为我分解这些网站，但我希望能朝着正确的方向前进。也许我可以使用一些 jQuery 插件或基本概念。我已经搜索过这个网站，但只能找到简单的 jQuery 幻灯片效果。

谢谢你所有的时间。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:49:23.770

Here are some options.

This tutorial: [http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery](http://www.queness.com/post/356/create-a-vertical-horizontal-and-diagonal-sliding-content-website-with-jquery)

The jQuery scrollTo plugin: [http://demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

The Supersized plugin: [http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

Or maybe this tutorial: [http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/](http://tympanus.net/codrops/2010/06/02/smooth-vertical-or-horizontal-page-scrolling-with-jquery/)

**Just use Google**, there are thousands and thousands of pages with examples and plugins.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:00:27.273

在这里你使用jQuery：

```
 var slideAjax = function(elementid, url, data){
        $('#'+elementid).hide(); //make sure the div we are loading into is hidden
        $.ajax({
            url: url,
            type: 'POST',
            data: data,
        }).done(function(data)){
            $('#'+elementid).html(data).show('slide',{direction: 'right'}, 200); //slide in
        });
    } 
```

如果您不介意复杂性，您可以创建一个 setTimeout 以将加载程序 html 推送到 200 毫秒的时间长度。然后，使用 done 函数清除计时器。这样，它仅在页面加载时间超过 200 毫秒时才显示加载器。如果您可以在钟形曲线上绘制加载时间，这将非常有用。通常，页面的加载时间将位于倒置的钟形曲线上，它要么在 0 和 X 之间，要么在 Y 和无穷大之间。如果您可以绘制 Y，则可以将加载程序设置为从 Y 开始，这样它就不会只显示一秒钟然后被切断。

# git - 在 Git 存储库的 Flex Flash Builder 项目中如何忽略以及忽略哪些文件？

> ID：12865774
> 
> 赞同：2
> 
> 时间：2012-10-12T19:26:01.567
> 
> 标签：git, apache-flex, flex4, flash-builder

我有一个 Flash Builder 项目，它位于 Git 中。/bin-debug 和 .actionScriptProperties 等文件显示为待处理。我应该犯这些吗？

您在 Flash Builder 项目中忽略了哪些文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T20:21:28.680

Eclipse 项目文件：

*   。项目
*   .settings

FlashBuilder 特定项目文件：

*   .actionScriptProperties
*   .flexProperties（仅适用于非库项目）
*   .flexLibProperties（仅适用于库项目）

一些更奇特的 FlashBuilder 项目文件：

*   .FlexUnitSettings（在 FB 中运行单元测试时生成）
*   .externalToolBuilders（使用 Web 服务生成器工具时生成）
*   .model（使用数据建模工具时生成）

FlashBuilder 默认输出文件夹：

*   bin-debug（仅适用于非库项目）
*   bin-release（仅适用于非库项目）
*   bin（仅用于库项目）

您永远不应该提交与 IDE 相关的文件。它使您团队中的其他开发人员更难使用他们选择的 IDE。如果您从事开源项目，则尤其如此。

# c - 强制函数只接受特定定义？

> ID：12865775
> 
> 赞同：2
> 
> 时间：2012-10-12T19:26:02.473
> 
> 标签：c

我想强制函数参数只接受特定的定义。例如，`#define OUTPUT 1`考虑`#define INPUT 0`和`void restrictedFunction(int parameter);`。

我将如何强制`restrictedFunction(int parameter)`仅接受`OUTPUT`or `INPUT`？

我还想考虑到另一个定义可能具有相同的值，例如`#define LEFT 1`和`#define RIGHT 0`。

因此，在这种情况下，我希望`restrictedFunction(int parameter)`能够仅`OUTPUT`且`INPUT`具体地接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:29:09.037

```
typedef enum { INPUT = 0, OUTPUT = 1 } IO_Type;

void restrictedFunction(IO_Type parameter) { ... } 
```

它并不绝对强制使用这些值（编译器会让某人编写`restrictedFunction(4)`），但它和你得到的一样好。

如果您真的想强制使用正确的类型，那么：

```
typedef enum { INPUT = 0, OUTPUT = 1 } IO_Type;
typedef struct { IO_Type io_type } IO_Param;

void restrictedFunction(IO_Param parameter) { ... } 
```

在 C99 或更高版本中，您可以使用以下命令调用它：

```
restrictedFunction((IO_Param){ INPUT }); 
```

这是一个复合文字，动态创建一个结构。不完全清楚结构类型是否真的很买你，但它会迫使用户思考一下，并且当他们使用错误时可能会改善编译器的诊断（但他们可能`restrictedFunction((IO_Param){ 4 });`仍然可以使用）。

这意味着您的`restrictedFunction()`代码应该准备好验证参数：

```
void restrictedFunction(IO_Type io_type)
{
    switch (io_type)
    {
    case INPUT:
        ...do input handling...
        break;
    case OUTPUT:
        ...do output handling...
        break;
    default:
        assert(io_type != INPUT && io_type != OUTPUT);
        ...or other error handling...
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:28:41.767

你可以使用枚举。

```
typedef enum TrafficDirection { INPUT = 0, OUTPUT = 1 } TrafficDirection;

restrictedFunction(TrafficDirection direction); 
```

当然，这并不完美。只要您使用强制转换，您仍然可以将任何 int 传递给它。

```
restrictedFunction((TrafficDirection) 4); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:28:55.853

您没有得到尽可能多的保护，但您可以：

```
enum func_type { INPUT, OUTPUT };
void restrictedFunction( enum func_type parameter ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T20:12:53.913

您可以使用包装器来验证参数：

```
#define restrictedFunction(x) do {                          \
   static_assert((x) == INPUT || (x) == OUTPUT);            \
   assert(!strcmp(#x, "INPUT") || !strcmp(#x, "OUTPUT"));   \
   restrictedFunction(x);                                   \
} while(0) 
```

笔记：

*   这假设`restrictedFunction()`返回一个`void.`如果它返回一个您实际使用的值，您将需要类似 gcc 的复合语句[http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)的东西。或者——更好——你可以使用`BUILD_BUG_ON_ZERO`（参见[什么是“:-!!”在 C 代码中？](https://stackoverflow.com/q/9229601/318716)），我一直忘记，因为它似乎不适用于 C++。
*   就是“`do ... while(0)`吞下分号”；在这里并不重要。
*   `static_assert()`是编译时断言；有许多变体可用。这是一个链接，[https://stackoverflow.com/a/9059896/318716](https://stackoverflow.com/a/9059896/318716)，如果你没有自己的方便的话。
*   `assert()`是标准的运行时断言。
*   使用 gcc 4.1.2 和我的版本，当两者替换为;时，`static_assert(),`您可以用`assert()`编译时断言替换运行时断言。请参见下面的示例。我没有用其他编译器测试过这个。`!strcmp()``==`
*   `x`仅在宏扩展中使用***一次***，因为前四个引用仅在编译时使用。

当您实际定义函数时，您必须添加括号以禁用宏扩展，如：

```
void (restrictedFunction)(int x){ ... } 
```

此外，如果您的代码有特殊情况（其代码没有？），您需要使用您需要编写`restrictedFunction()`的参数调用：`foo,`

```
 (restrictedFunction)(foo); 
```

这是一个完整的示例，它对标准库函数进行了包装`exit()`：

```
#include <stdlib.h>

#define CONCAT_TOKENS(a, b)     a ## b
#define EXPAND_THEN_CONCAT(a,b) CONCAT_TOKENS(a, b)
#define ASSERT(e)    enum{EXPAND_THEN_CONCAT(ASSERT_line_,__LINE__) = 1/!!(e)}
#define ASSERTM(e,m) enum{EXPAND_THEN_CONCAT(m##_ASSERT_line_,__LINE__)=1/!!(e)}

#define exit(x) do {                                                \
   ASSERTM((x) ==  EXIT_SUCCESS  || (x) ==  EXIT_FAILURE,  value);  \
   ASSERTM(#x  == "EXIT_SUCCESS" || #x  == "EXIT_FAILURE", symbol); \
   exit(x);                                                         \
} while(0)

int main(void) {
   exit(EXIT_SUCCESS); // good
   exit(EXIT_FAILURE); // good
   exit(0);  // bad
   exit(3);  // doubly bad
} 
```

如果我尝试编译它，我会得到：

```
gcc foo.c -o foo
foo.c: In function 'main':
foo.c:17: error: enumerator value for 'symbol_ASSERT_line_17' is not an integer constant
foo.c:18: warning: division by zero
foo.c:18: error: enumerator value for 'value_ASSERT_line_18' is not an integer constant
foo.c:18: error: enumerator value for 'symbol_ASSERT_line_18' is not an integer constant 
```

# ruby-on-rails - 用于安装 gem 迁移的 Rake 任务仅执行一次

> ID：12865776
> 
> 赞同：4
> 
> 时间：2012-10-12T19:26:04.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

为什么这个 rake 任务

```
gems = %w(gem1 gem2 gem3)
namespace :gems do
  namespace :install do
    desc "Runs install:migrations for all gems"
    task :migrations do
      gems.each do |gem_name|
        print "\nInstalling migrations for the #{gem_name} gem...\n"
        Rake::Task["#{gem_name}:install:migrations"].invoke
      end
      print "\n\nGem migrations installed."
    end
  end
end 
```

仅实际运行第一组迁移，无论我使用的 gems/gem ordering/random 调用 reenable 吗？

```
Installing migrations for the gem1 gem...
Copied migration whatever from gem1
Copied migration whatever from gem1
Copied migration whatever from gem1
Copied migration whatever from gem1

Installing migrations for the gem2 gem...
(nothing)

Installing migrations for the gem3 gem...
(nothing)

Gem migrations installed. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T21:42:14.380

该`invoke`方法仅“根据需要”运行，这基本上意味着一旦运行一次，除非重新启用，否则它不会再次运行。

您可以`.reenable`在每个之后调用`.invoke`以重置它，或使用`.execute`命令来运行任务。

需要注意的`.execute`是，如果您拥有它们，它将不会运行任务的依赖项。

[为什么 Rake 不能连续调用多个任务？](https://stackoverflow.com/questions/2532427/why-is-rake-not-able-to-invoke-multiple-tasks-consecutively)

[如何从 Rake 任务中运行 Rake 任务？](https://stackoverflow.com/questions/577944/how-to-run-rake-tasks-from-within-rake-tasks)

# c# - C# 读取 Excel 工作簿

> ID：12865779
> 
> 赞同：1
> 
> 时间：2012-10-12T19:26:13.327
> 
> 标签：c#, arrays, excel

> **可能重复：**
> [从 C# 读取 Excel 文件](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)

我看过类似的帖子，但我的帖子比我见过的其他帖子更琐碎。

我需要从 excel 文件中读取默认工作表，并获取前 3 列数据并将它们导入到我的应用程序中，就像在列表中一样

```
List<MyObj> obj = new List<MyObj>();.

 obj.col1 = ...
 obj.col2 = ...
 obj.col3 = ... 
```

文档中没有标题，只有数据。有一个适用于两种格式（XLS，XLSX）的解决方案也很好，但如果不可能的话，那也没关系。

XLSX 和 XLS 的代码也不同吗？

我使用 .NET 2 但如果需要我可以使用 c# 4

```
col1data  |  col2data | col3data
col1data  |  col2data | col3data
col1data  |  col2data | col3data
col1data  |  col2data | col3data
... 
```

# php - 特定文件的 mod_rewrite 异常

> ID：12865780
> 
> 赞同：9
> 
> 时间：2012-10-12T19:26:13.797
> 
> 标签：php, .htaccess, apache

由于我的 .htaccess 文件设置为：

```
RewriteEngine on  
RewriteCond $1 !^(index\.php|resources|robots\.txt)  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

我将这个设置用于我的 MVC 框架，所以我得到类似的 url， `/controller/method/argument`但是当我重定向到 /forum/login.php 时，它会切换到 /forum/。

如何将此添加为例外，以便我能够重定向到`/forum/login.php`

我在我的 /forum/ 目录中发现了另一个 .htaccess，这也会导致问题吗？

```
# BEGIN PunBB

<IfModule mod_rewrite.c>
    # MultiViews interfers with proper rewriting
    Options -MultiViews

    RewriteEngine On

    # Uncomment and properly set the RewriteBase if the rewrite rules are not working properly
    #RewriteBase /

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . rewrite.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T20:31:50.407

首先我会告诉你如何阅读你的 RewriteRule：

您从第一个（或下一个）RewriteRule 条目开始：

`RewriteRule ^(.*)$ index.php/$1 [L,QSA]`

第一个参数是一个可以匹配您请求的 URL 的正则表达式。`^(.*)$`匹配所有内容，并将这个“所有内容”存储在一个可以稍后使用的变量中。

仅当存在前面的 RewriteCond 条目时，它们才会被评估：

`RewriteCond $1 !^(index\.php|resources|robots\.txt)`

`$1`是对 RewriteRule 的第一个括号内匹配的内容的引用。这与第二个参数进行比较，第二个参数是一个正则表达式，说明几个显式名称，并且`!`否定表达式，例如，此规则仅在正则表达式不匹配时才允许执行 RewriteRule。如果此条件返回 true，则将查看下一个条件。

`RewriteCond %{REQUEST_FILENAME} !-f`

如果请求的文件名不是硬盘上的真实文件，则此条件为真。

`RewriteCond %{REQUEST_FILENAME} !-d`

如果请求的文件名不是真正的目录，则此条件为真。

只有当所有这些条件都为真（它们用 AND 链接在一起）时，我们才回到重写规则：

`RewriteRule ^(.*)$ index.php/$1 [L,QSA]`

这个重写步骤的结果被定义为第二个和第三个参数。`$1`再次与匹配内容一起使用，并且参数定义此规则，如果最初匹配，将是最后一个规则 (L)，并且重写目标中定义的任何查询字符串都将附加到任何查询字符串原始 URL (QSA)。

批判：

MVC 框架的通常重写尝试尽可能提高性能。您的重写条件都必须经过评估才能成功重写。仅当任何 RewriteCond 返回 false 时才会停止。每个被重写的请求都要经过大量的 CPU 密集型测试。首先是 RewriteRule 正则表达式，然后是第一个 RewriteCond 中的正则表达式，然后是文件系统上的两个硬盘测试文件是否存在。

另一方面，第一个 RewriteCond 似乎是不必要的。它测试某些名称，如果找到，则中止重写。“index.php”应该被第二个 RewriteCond 检测到，因为它是一个现有文件（如果不是，重写将如何工作）。任何以“resources”开头的东西也会被匹配，但出于同样的原因可能不应该匹配：现有资源将被第二个 RewriteCond 找到。最后是“robots.txt”文件。如果您想在机器人获取您的网站时避免 404，那么拥有一个可能是空的总是一个好主意。

由于您没有更改查询字符串中的任何内容，因此不需要 [QSA] 指令。

改进：

```
RewriteEngine on  
RewriteCond %{REQUEST_FILENAME} -f [OR] 
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [L]  
RewriteRule ^.*$ index.php [L] 
```

第一个 RewriteRule 将匹配整个请求的路径。两个 RewriteCond 用 [OR] 连接，所以第一个返回 true 的 RewriteCond 将取消进一步的评估。第一个 RewriteCond 测试请求的文件是否存在。如果存在，则返回true，处理返回到第一个RewriteRule。目标表达式为“-”，表示“不重写”。[L] 停止对重写规则的进一步处理。所以最后，对于一个现有文件，我们只有一个正则表达式和一个文件系统测试，然后，这个现有文件将被发送到浏览器。

如果没有找到文件，第一个 RewriteRule 和 RewriteCond 不会触发，所以那里的 [L] 不会停止进程。所以第二个 RewriteRule 被执行。这个是无条件的，正则表达式和之前一样，匹配一切，重写为“index.php”。

如果存在任何文件，包括 /forum/login.php，此重写将不会调用您的 index.php。

`RewriteRule ^.*$ index.php/$0 [L]`如果您确实想继续解析`$_SERVER['PATH_INFO']`而不是.您可以将第二个更改为`$_SERVER['REQUEST_URI']`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:30:57.217

试试这个：

```
RewriteEngine on  
RewriteCond $1 !^(index\.php|forum|resources|robots\.txt)  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

和这个：

```
# BEGIN PunBB

# ----------------------------------------------------------------------
# Start rewrite engine
# ----------------------------------------------------------------------

<IfModule mod_rewrite.c>
    # MultiViews interfers with proper rewriting
    Options -MultiViews

    RewriteEngine On

    # Uncomment and properly set the RewriteBase if the rewrite rules are not working properly
    RewriteBase /forum/

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . rewrite.php [L]
</IfModule>

# ----------------------------------------------------------------------
# Better website experience for IE users
# ----------------------------------------------------------------------

# Force the latest IE version, in various cases when it may fall back to IE7 mode
# github.com/rails/rails/commit/123eb25#commitcomment-118920
# Use ChromeFrame if it's installed for a better experience for the poor IE folk

<IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
        BrowserMatch MSIE ie
        Header set X-UA-Compatible "IE=Edge,chrome=1" env=ie
    </IfModule>
</IfModule>

<IfModule mod_headers.c>
    # Because X-UA-Compatible isn't sent to non-IE (to save header bytes),
    # We need to inform proxies that content changes based on UA
    Header append Vary User-Agent
    # Cache control is set only if mod_headers is enabled, so that's unncessary to declare
</IfModule>

# ----------------------------------------------------------------------
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
AddCharset utf-8 .html .css .js .xml .json .rss

# ----------------------------------------------------------------------
# A little more security
# ----------------------------------------------------------------------

# Do we want to advertise the exact version number of Apache we're running?
# Probably not.
## This can only be enabled if used in httpd.conf - It will not work in .htaccess
# ServerTokens Prod

# "-Indexes" will have Apache block users from browsing folders without a default document
# Usually you should leave this activated, because you shouldn't allow everybody to surf through
# every folder on your server (which includes rather private places like CMS system folders).
<IfModule mod_autoindex.c>
    Options -Indexes
</IfModule>

# END PunBB 
```

# java - Selenium - WebElement 对象是否存储它们的数据或“实时”检索它？

> ID：12865782
> 
> 赞同：3
> 
> 时间：2012-10-12T19:26:22.320
> 
> 标签：java, selenium, webdriver

如果我实例化一个 WebElement 对象，getAttribute 调用（以及提取有关元素信息的其他调用）是否会成功返回正确的数据，即使该数据在对象创建后发生更改？

我已经为一个元素表创建了一个对象映射，所以我担心如果我对存储在这个映射中的任何元素进行更改，我需要重新设置对象以便使用更改更新地图。这让我想知道 Selenium 的 WebElement 在底层是如何工作的：它们是在创建它们时读取所有属性数据和其他信息，然后再将静态数据吐出，还是它们只是包含对“真实”UI 元素的引用和每次都动态检索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:34:53.047

我相信它会在您触发时读取数据`get Attribute`。

获取元素的给定属性的值。将返回**当前值**，即使在页面加载后已对其进行了修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:57:05.407

如果刷新页面后元素的 id 未更改，Selenium 将检索日期“活动”，否则将抛出 NoSuchElementException。

# ruby-on-rails - AWS S3 使用 aws-sdk 更改存储桶/前缀

> ID：12865786
> 
> 赞同：2
> 
> 时间：2012-10-12T19:26:29.927
> 
> 标签：ruby-on-rails, ruby, amazon-s3, aws-sdk

我可以看到有一种方法可以使用以下方法更改集合的前缀：

```
objects = collection.with_prefix('a/').with_prefix('b/', :replace)
objects.prefix #=> 'b/' 
```

问题：如何保存此更改？

[http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3/ObjectCollection:with_prefix](http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3/ObjectCollection:with_prefix)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:29:12.943

您可以使用 AWS::S3::S3Object#move_to 方法在 S3 中的“文件夹”之间移动对象。

```
bucket.objects.with_prefix('a/').each do |obj|
  obj.move_to(obj.key.sub(/^a/, 'b'))
end 
```

AWS::S3::ObjectCollection#with_prefix 上的 :replace 和 :append 参数控制 #with_prefix 如何构建前缀的行为，该前缀将用于在链接时过滤枚举对象。:append 的示例用法可能如下所示：

```
# enumerates objects inside folder1 / folder2
bucket.objects.with_prefix(folder1).with_prefix(folder2, :append).each do |obj|
end 
```

当然，您可以通过在一次调用#with_prefix 中加入前缀来完成此操作：

```
# enumerate objects with the prefix 'abc/xyz/'
folder1 = 'abc/'
folder2 = 'xyz/'
bucket.objects.with_prefix("#{folder1}#{folder2}").each do |object|
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:25:48.840

忽略我的回答，如果我不明白你的意思？

您想更改 s3 存储桶中存在的对象的前缀。只有在复制带有新前缀的对象然后删除旧的对象时才有可能。

# python - 如何使用python忽略许多XML文件中的标签

> ID：12865787
> 
> 赞同：3
> 
> 时间：2012-10-12T19:26:42.137
> 
> 标签：python, xml, xml-parsing

我有很多 xml 文件，其中包含很多文本。这段文字我需要小写并删除标点符号。但我不知道如何使用 python 说我希望它忽略所有标签。

我找到了一个名为 ElementTree 的 xml 解析器，并且我有一个正则表达式来查找标签： `pattern = re.compile ('<[^<]*?>')`

我对其进行了测试，它只给了我第一个标签中的文本（有很多标签名为 ）。为什么？

我在一个字符串中进行测试以进行不同的测试以获取所有标签：

```
text = "<root> <test>aaaaaaa </test> <test2> bbbbbbbbb </test2> </root> <root> <test3> cccccc </test3> <test4> ddddd </test4> </root>"
pattern = re.compile ('<[^<]*?>')
tmp = pattern.findall(content, re.DOTALL) 
```

它给了我：

```
['</test>', '<test2>', '</test2>', '</root>', '<root>', '<test3>', '</test3>', '<test4>', '</test4>', '</root>'] 
```

为什么不`<root> <test>`呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T19:32:42.313

您实际上似乎并没有使用 ElementTree。

[这](http://docs.python.org/library/xml.etree.elementtree.html)是一个如何使用 ElementTree 的示例

```
import xml.etree.ElementTree as ET
tree = ET.parse('country_data.xml')
root = tree.getroot() 
```

您可以使用递归通过一个函数运行所有标签来清理它们：

```
def clean_tag(tag):
    for child in tag:
        clean_tag(child)
    if tag.text != None:
        # add your code to do lowercase and punctuation here
        tag.text = tag.text.lower()

clean_tag(tree.getroot())
clean_xml = ET.tostring(tree) 
```

# r - 将 MIAMIA305 转换为 R 中的地图

> ID：12865790
> 
> 赞同：0
> 
> 时间：2012-10-12T19:26:53.980
> 
> 标签：r

我有一个小问题。我有要映射的数据，但问题是我没有真正的位置名称，只有简短的形式，例如：SANSAN210 或 miamia305，我认为是州和县以及区号电话号码。有人如何转换它，以便我可以将它映射到美国地图上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:02:59.827

您只需要区号（或者可能是县区号交叉口）。有区号地图作为 shapefile。使用`readShapePoly`或`readOGR`合并两者。

# c++ - 插入 BST 会导致错误 C++

> ID：12865794
> 
> 赞同：0
> 
> 时间：2012-10-12T19:27:10.927
> 
> 标签：c++, binary-search-tree

我已经实现了 BST，当我插入一些值时，我在 INSERT 函数中得到了错误。如果我将 main 函数中的 -32 替换为 32（***参见 main***），它工作正常，但现在出现错误。我找不到它。

```
#include <iostream>
#include <cstdlib>
using namespace std;

struct Node{
    int val;
    Node* l;
    Node* p;

    Node(int val){
        this->val = val;
        l = NULL;
        p = NULL;
    }
};

struct BST{
    Node* root;
    BST(int val){
        root = new Node(val);
    }
};

bool insert(Node* e, int val){
    if(e->val == val){
        return false;
    }
    else if(val < e->val){
        if(e->l == NULL){
            e->l = new Node(val);
            return true;
        } else
            return insert(e, val);
    } else if(val > e->val){
        if(e->p == NULL){
            e->p = new Node(val);
            return true;
        }else
            return insert(e->p, val);
    } return false;
}

bool insert(BST* d, int val){
    insert(d->root, val);
}

void infixDisplay(Node* w){
   if(w != NULL){
        infixDisplay(w->l);
        cout<<w->val<<endl;
        infixDisplay(w->p);
    }
}

void infixDisplay(BST* d){
    infixDisplay(d->root);
}

int main(){
    BST* d = new BST(4);
    insert(d,12);
    insert(d,-32); // REPLACE WITH +32 IT IS OK!
    insert(d,4);
    insert(d,89);
    insert(d,6);
    insert(d,3);
    infixDisplay(d);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:31:27.137

该行：

```
return insert(e, val); 
```

应该

```
return insert(e->l, val); 
```

# php - 这个“$books = $this->model->getBookList();”是什么意思 $this 有两个 -> -> 表示

> ID：12865796
> 
> 赞同：-5
> 
> 时间：2012-10-12T19:27:24.930
> 
> 标签：php

我正在阅读 MVC。我找到了这个“$books = $this->model->getBookList();” $this 带有两个 -> -> 表示 this 是什么意思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:29:54.907

这意味着`$this`是一个对象，您可以`$model`使用`$this->model`. And`$model`也是一个对象，您可以`getBookList`使用`$this->model->getBookList();`.

示例可能如下所示：

```
class Model
{
    public function getBookList()
    {
        // return book list
    }
}

class A
{
    private $model;

    public function doSomething()
    {
        // $this means "this instance of class A"
        // $this->model means "this instance of class A's $model property
        $this->model = new Model();

        // this will call the getBookList function of class Model:
        echo $this->model->getBookList();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:30:20.673

`->`在 PHP 中，您可以访问对象的属性或方法。

当你调用时`$this->model`，你会得到`model`对象实例的属性`$this`。在 PHP 中，您可以继续调用该 `->getBookList()`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:31:45.867

据我可以从您的问题中说，这意味着您正在从当前工作类（this）的子类模型中的方法 getBookList 中获取列表。

# java - 如何在 Java 中刷新 GUI？

> ID：12865803
> 
> 赞同：6
> 
> 时间：2012-10-12T19:27:52.480
> 
> 标签：java, swing, user-interface

我有一个与 Java 相关的一般性问题。

我正在编写一个具有 GUI 菜单的应用程序。我正在尝试根据单选按钮的选择来更改 GUI 菜单的一部分。

我需要：

1.  重绘整个窗口或只更新该部分：

    ```
    setVisible(true)? 
    ```

2.  如果我只使用上面#1 中的语句.. GUI 很好——直到我将鼠标移到它上面，然后我看到上一个按钮选择。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:29:51.317

Swing 组件具有 repaint()、revalidate() 和 doLayout() 方法。其中一个应该能够重新绘制你想要的任何部分。但是， doLayout 不是您应该负责的事情，这是布局引擎的责任。

您可能还想查看[这篇文章](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint "这个帖子")，第一个回复有一个很好的解释，并链接到更详细的文章。

关于您问题的第二部分，我不确定，但我们可能需要查看一些代码才能了解。“替换区域”是否实际上已从视图中删除？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T19:59:43.553

> ..在我的应用程序中，用户选择他们想要进行顶级测试的设备平台类型（该选择是左侧的一组两个单选按钮）。当用户选择 Android 或 iOS 时，复选框的中心分组会发生变化，以反映他们可以测试的一组 Android 设备或一组他们可以测试的 iOS 设备。

1.  在“中心分组”中放置一个面板。
2.  使用 a`CardLayout`作为面板。
3.  使用卡片布局将 iOS 和 Android 控件添加到面板。
4.  根据需要在它们之间翻转。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T19:37:45.733

调用`revalidate()`顶层组件。

# computer-vision - 是否有可能创建一个可以识别图像上下文的软件？

> ID：12865804
> 
> 赞同：0
> 
> 时间：2012-10-12T19:27:55.753
> 
> 标签：computer-vision, image-recognition

由于好奇，我在使用 Google Goggle 和 Google 的“按图像搜索”时提出了这个问题。

如果您尝试向 Google 提供要搜索的图片，它可以向您显示一些结果。相同的图像效果最好（当然），但拍摄各种物体的照片可能很困难。

我猜 Google Goggle 通过使用文本识别和图像匹配识别来解决一些问题。如果文本识别找到了文本，例如“SONY”，那么事情可能会变得更简单。如果检测到品牌的形象，那么事情也应该更简单。其他著名品牌和著名地标也是如此，例如埃菲尔铁塔。拥有文字和品牌形象有助于轻松识别事物。

但是，如果我们要寻找更晦涩的东西（这里需要更好的措辞），例如，请使用这个拉面图像。

![拉面](../Images/580deefefffc0ab05f149444be7d4723.png)

如果你把这张图片放到谷歌上，你会得到各种其他图片的图片，这些图片有相似的颜色，有时也有相似的形状。哎呀，结果中还有其他拉面图像，但我认为如果这些拉面图像在顶部会更好，因为我们输入了拉面图像，而我们这里的上下文是拉面。

所以这里是我的问题，是否有可能创建这样一个可以理解图像上下文的软件？我们如何在软件中表达上下文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:35:53.630

伙计，你只是指出了这么多人从事计算机视觉工作的原因。

用数学方法描述对象很容易。颜色，形状，密度，。. . 所有这些都可以很容易地计算出来。

但是当谈论“现实生活中的物体”时，计算机视觉变得非常复杂。

角度、亮度和简单的不一致性使得准确地检测物体几乎是不可能的。

在从事计算机视觉工作时，您应该始终问自己：是什么让我想要识别的对象与众不同？

我可以使用没有其他对象拥有的描述符？

问问自己关于这些拉面的问题。假设我只是想检测拉面。如果汤的颜色变了怎么办？如果肉大了怎么办？

如果你想了解更多，你应该阅读模式识别和模式匹配。

如果你能以通用的方式找到这类问题的解决方案，你可以注册我认为的诺贝尔价格:)

现在有些东西是众所周知的，例如人脸识别或OCR；但它们通常非常专业，只适用于一个领域。想想看，当你用拉面喂它时，即使是谷歌的图像搜索算法也很糟糕。不过，数独非常有效，因为他确切地知道他在寻找什么。所有的区别都在训练中产生，你给出一个假设列表来帮助算法。

所以基本上你明白了。要么您创建一个非常好的计算机视觉系统，该系统擅长基于大量假设检测一件事，要么创建一个“好的”但非常通用的系统:)。选择主要取决于您的应用程序

# c# - C# 中的代码“幽灵”

> ID：12865813
> 
> 赞同：1
> 
> 时间：2012-10-12T19:28:30.710
> 
> 标签：c#, bitmap, draw

我现在遇到两次的问题是我的程序似乎正在运行不再存在的代码。我认为一些旧版本被卡住了，但不知道如何让编译器运行我编写的更新代码。

我发现问题的方法是观察我加载的位图即使在我删除了这样做的指令之后仍然被绘制。即使删除了对相关图像的所有引用，包括内容加载行，问题仍然存在。

第一次发生这种情况时，重新启动编译器并没有解决问题，但重新启动计算机却解决了。现在完全关闭后问题仍然存在。

如果有任何影响，我正在使用 ms C# 2008 速成版。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:34:14.607

我的第一个想法是构建失败并且 Visual Studio 正在运行旧版本。我没有 VS 2008，但在 VS 2010 中，更改此选项的选项位于 Tools->Options->Projects and Solutions->Build and Run。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:43:42.953

In my experience this happens when configuration profile is changed from debug. For instance if I am running the debug profile, it works. Then I change to the QA profile and make changes and then build the new assemblies. The assemblies are built to a directory called "QA" however, when I debug through visual studio it runs the code from the debug profile. I can remove references, recompile the code, visual studio will still run from the debug profile. It appears that none of the changes I made are in the code. When in reality I'm inadvertently running a old build.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:32:03.120

您必须弄清楚不匹配的来源。从 VS 外部运行 .exe 会发生什么？从VS内部呢？您能否验证构建后，您正在执行的二进制文件具有更新的时间戳？.dll 中的陈旧代码是否没有被拉入新版本？

# php - 从 MySQL 中的 DOB 获取年龄

> ID：12865822
> 
> 赞同：3
> 
> 时间：2012-10-12T19:29:03.773
> 
> 标签：php, mysql, date

我正在尝试在个人资料页面中显示我的会员年龄。在 php 文件中，我刚刚添加了这段代码来显示用户的生日：

```
$data = $db->super_query( "SELECT dob FROM dle_users" );
$tpl->set("{bdate}", $data['dob']); 
```

在个人资料页面中我有这个结果：

```
1364-07-09 
```

*它是波斯语的日期：yyyy-mm-dd*

现在我需要显示会员年龄，我在谷歌和这个网站上搜索，我找到了一些答案和提示，但对我不起作用！我不知道为什么。

我怎么能显示年龄？:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T19:37:19.000

您可以使用 MySQL 的[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)功能：

```
SELECT TIMESTAMPDIFF(YEAR, dob, CURRENT_DATE) AS age FROM dle_users 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:30:52.113

看看 MySQL（如果你正在使用的）日期函数，它们会为你完成大量的转换。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

也许`DATEDIFF( NOW(), dob )`或一些这样的错误，但这会在几天或`TIMESTAMPDIFF(MONTH, NOW(), dob )`几个月内返回差异

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:42:43.857

您可以使用

```
SELECT DATEDIFF(dob, NOW()) AS difference from dle_users; 
```

这将为您提供日期差异，您可以使用 PHP 将其转换为各种格式

```
date("m/d/y g:i (A)", $DB_Date_Field); 
```

您也可以直接将 TIMESTAMPDIFF 用作：

```
SELECT TIMESTAMPDIFF(YEAR, dob, CURDATE()) as difference from dle_users; 
```

阅读 [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T19:49:06.973

只为多样化：

```
select year(now()) - year(dob) - if(dayofyear(now()) < dayofyear(dob), 1, 0) from dle_users 
```

# vba - 使用 VBA 解析 XML 网页文件

> ID：12865824
> 
> 赞同：1
> 
> 时间：2012-10-12T19:29:06.427
> 
> 标签：vba, ms-access, xml-parsing, livelink

我正在研究一个 MS Access 项目 (2003)，并希望解析网页返回的 XML 代码。它实际上在我们的 Intranet 上。

例如，我想解析`https://myLivelinkServer.myEnterprise.com/livelink/livelink.exe?func=search&boolean2=or&where1=something&where1=anything&outputformat=xml`

我想将结果放入记录集中。以下是上述页面生成的一些 XML 的示例，其中包含另一个搜索查询（只有 2 个结果）：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Output>
    <SearchResults>
        <SearchResult>
            <OTCreatedBy DisplayName="Créé par">
                <![CDATA[5063560]]>
            </OTCreatedBy>
            <OTLocation DisplayName="Emplacement" Protocol="https" ServerName="livelink.myServer.com" URL="/livelink/livelink.exe?func=ll&amp;objId=53080774&amp;objAction=browse">
                2000 1237258 10236341 12909408 14593490 40170727 53076463 53076481 53080774 60751603 
            </OTLocation>
            <OTMIMEType DisplayName="MIMEType" Protocol="https" ServerName="livelink.myServer.com" IconURL="/llk97s/otemail/emailcontainer.gif">

            </OTMIMEType>
            <OTName DisplayName="Nom" Protocol="https" ServerName="livelink.myServer.com" ViewURL="/livelink/livelink.exe?func=ll&amp;objId=60751603&amp;objAction=browse" DownloadURL="/livelink/livelink.exe?func=ll&amp;objID=60751603&amp;objAction=download">
                2008-07-04 09 22 - ACCUSÉ DE RÉCEPTION - DEMANDE D'ACHAT # 12854509 - Louise Plante
            </OTName>
            <OTObjectDate DisplayName="Date" Mask="YYYY-MM-DD">
                2012-05-29
            </OTObjectDate>
            <OTObjectSize DisplayName="Taille" Suffix="Eléments">
                3
            </OTObjectSize>
            <Functions Protocol="https" ServerName="livelink.myServer.com" ServerPort="443" URL="/livelink/livelink.exe?func=SearchResultsFunctionMenu&amp;hitID=1&amp;searchCacheID=2006218356&amp;version=0&amp;dataID=60751603&amp;HH=false&amp;subtype=264" />
        </SearchResult>
        <SearchResult>
            <OTCreatedBy DisplayName="Créé par">
                <![CDATA[5063560]]>
            </OTCreatedBy>
            <OTLocation DisplayName="Emplacement" Protocol="https" ServerName="livelink.myServer.com" URL="/livelink/livelink.exe?func=ll&amp;objId=60739493&amp;objAction=browse">

            </OTLocation>
            <OTMIMEType DisplayName="MIMEType" Protocol="https" ServerName="livelink.myServer.com" IconURL="/llk97s/webdoc/outlook.gif">
                application/x-outlook-msg
            </OTMIMEType>
            <OTName DisplayName="Nom" Protocol="https" ServerName="livelink.myServer.com" ViewURL="/livelink/livelink.exe?func=ll&amp;objId=60751711&amp;objAction=Open&amp;vernum=1&amp;nexturl=%2Flivelink%2Flivelink%2Eexe%3Ffunc%3Dsearch%26where1%3D12854509%26boolean2%3Dor%26where2%3D3091%2D40014%2D024%2D01%2D0%2DCE%2DL%2DQUF28%2D01%2DUA%26outputformat%3Dxml%26gofor%3D2" DownloadURL="/livelink/livelink.exe?func=ll&amp;objID=60751711&amp;objAction=download">
                2008-07-04 09 22 - ACCUSÉ DE RÉCEPTION - DEMANDE D'ACHAT # 12854509 - Louise Plante
            </OTName>
            <OTObjectDate DisplayName="Date" Mask="YYYY-MM-DD">
                2008-07-04
            </OTObjectDate>
            <OTObjectSize DisplayName="Taille" Suffix="Ko">
                23
            </OTObjectSize>
            <Functions Protocol="https" ServerName="livelink.myServer.com" ServerPort="443" URL="/livelink/livelink.exe?func=SearchResultsFunctionMenu&amp;hitID=2&amp;searchCacheID=2006218356&amp;version=1&amp;dataID=60751711&amp;HH=false&amp;subtype=264" />
        </SearchResult>
    </SearchResults>

    <!-- File: websbroker/resultbar.xml -->
    <SearchResultsInformation>
        <CurrentStartAt>0</CurrentStartAt>
        <NumberResultsThisPage>2</NumberResultsThisPage>
        <RawTotalResults>123</RawTotalResults>
        <EstTotalResults>66</EstTotalResults>
        <TotalResults>3</TotalResults>
        <PreviousQuery>
            <Parameter Name="where1"><![CDATA[12854509]]></Parameter>
            <Parameter Name="boolean2"><![CDATA[or]]></Parameter>
            <Parameter Name="where2"><![CDATA[3091-40014-024-01-0-CE-L-QUF28-01-UA]]></Parameter>
            <Parameter Name="outputformat"><![CDATA[xml]]></Parameter>
            <Parameter Name="gofor"><![CDATA[2]]></Parameter>
        </PreviousQuery>
    </SearchResultsInformation>
    <!-- End File: websbroker/resultbar.xml -->
</Output> 
```

有没有一种简单的方法可以用 VBA（显然没有任何浏览器）打开该页面并解析它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:48:45.823

您可以将 URL 作为 MSXML DOMDocument 加载，然后使用其方法解析出所需的值。

您可以在这个 SO 问题中找到一个简短的代码大纲示例：[Late Binding conversion for XML import syntax](https://stackoverflow.com/questions/5899696/late-binding-conversion-for-xml-import-syntax)

SO上有更多的VBA代码示例：[site:stackoverflow.com vba msxml](https://www.google.com/search?q=site:stackoverflow.com%20vba%20msxml)

# javascript - 如何防止在某些页面上加载 javascript 代码？

> ID：12865829
> 
> 赞同：0
> 
> 时间：2012-10-12T19:29:45.170
> 
> 标签：javascript, janrain, x-cart

我们使用电子商务平台 X-cart 来托管我们的购物车以及 Janrain 的内置集成，它允许通过 facebook 等进行社交登录。我们希望将登录到购物车页面的能力限制为 .js 代码导致我们的网站在产品页面上加载缓慢。我们如何防止 .js 代码在产品页面上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:33:26.950

只需将以下内容放在导致速度缓慢的 javascript 文件的开头：

```
if (window.location.href.indexOf('/path/to/shopping/cart/pages') != -1) {
   //We are in shopping cart pages
   //and we don't this js file to cause slowness, so just exit
   return;
}
// rest of the js file
... 
```

# jpa - JPA EntityManager 合并异常

> ID：12865839
> 
> 赞同：2
> 
> 时间：2012-10-12T19:30:24.023
> 
> 标签：jpa, merge, entitymanager

当存在具有相同主键的现有实体时，我`primaryKeyUpdateDisallowed ValidationException`尝试将实体合并到数据库中。

当然，当我执行 a`TypedQuery`并让实体管理器首先返回实体，更新适当的值，然后合并时，我不会得到异常。问题是这个过程在资源方面太昂贵了。我需要能够简单地合并而不会产生异常。

有没有办法构造我们的实体类，以便我们可以覆盖记录，包括主键？或者其他解决问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T00:19:32.593

在 JPA 中，如果您希望这样做：

```
entityManager.merge(someEntity); 
```

那么您必须首先将 someEntity 从数据库加载到 entityManager 持久性上下文中，然后通过“entityManager.detach(someEntity)”或清除持久性上下文进行分离。如果 someEntity 没有预先加载和分离，而是通过“new SomeEntity()”创建，则 merge() 函数将确定您添加了新实体并执行非常类似于 entityManager.persist(某个实体）。当数据在事务中被刷新或提交时，它会生成一个 SQL INSERT，这将与预先存在的 PK 冲突。

这是 JPA 2 规范中的指定行为：

* * *

*应用于实体 X 的合并操作的语义如下：*

*   *如果 X 是分离实体，则 X 的状态被复制到具有相同身份的预先存在的受管实体实例 X' 上，或者创建 X 的新受管副本 X'。*
*   *如果 X 是一个新的实体实例，则创建一个新的托管实体实例 X'，并将 X 的状态复制到新的托管实体实例 X'。*

* * *

*> 问题是这个过程在资源方面过于昂贵。我需要能够简单地合并而不会产生异常。*

这不应该是这样。从数据库中检索实体或实体列表应该是有效的。可能您的查询可以改进。查询中有“where”子句吗？刷新期间是否有很多实体级联（通过 @OneToMany 或 @ManyToOne 等关系上的属性 cascade=CascadeType.REFRESH/ALL）？您是否有一个包含许多实体/表的非常复杂的继承层次结构？如果您可以提供您的 JPQL 或条件查询，我相信问题将很容易解决。:-)

# installation - Windows Installer 能够使用不同的 URI 放置快捷方式

> ID：12865840
> 
> 赞同：1
> 
> 时间：2012-10-12T19:30:24.237
> 
> 标签：installation, windows-installer

我有一个 Windows 窗体应用程序，它通过使用 msi 文件通过活动目录安装在客户端 pc 上，应用程序是一个 32 位应用程序，正在部署到 32 位和 64 位 Windows 系统，并且我们知道应用程序文件夹名称在 32和 64 位系统、Program Files 和 Program Files(x86)，也在安装过程中将应用程序快捷方式放置在启动文件夹中，因此当我们启动 PC 时应用程序将启动。问题：是否有机会通过 Visual Studion 提供的 Windows Installer 构建 msi，这样它会检查它正在安装的操作系统，并将快捷方式放入具有正确 URI 的启动文件夹，到 Program Files\Applicaiton\或程序文件（x86）\应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T20:30:30.717

初始化时，Windows Installer 收集有关操作系统的信息并自动设置可在安装应用程序使用的可选条件语句中使用的属性，例如[VersionNT64](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/190f8251-a377-4490-9de9-98d149185865)和“[系统文件夹属性](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c91119b9-59d5-4a33-91cd-d3ba63659d12#system_folder_properties)”

如果安装程序需要知道此信息，则首选做法是允许 Windows Installer 服务确定文件夹位置，而不是尝试将此信息硬编码到包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:39:40.477

Windows 安装程序包是平台感知的（x86、x64）。Windows Installer 不支持在 32 位平台上运行的 64 位程序包或写入 64 位程序文件的 32 位程序包。

您可以将 EXE 编译为 AnyCPU，即使它安装为 32 位，它也会以 64 位执行。尽管 Visual Studio 团队已经摆脱了这一点，并在最新版本的 Visual Studio 中默认编译为 x86。

# c# - 通用 FromEvent 方法

> ID：12865848
> 
> 赞同：7
> 
> 时间：2012-10-12T19:31:05.193
> 
> 标签：c#, async-await, task-parallel-library, cil, reflection.emit

使用新的 async/await 模型，在事件触发时生成一个`Task`完成的事件是相当简单的；你只需要遵循这个模式：

```
public class MyClass
{
    public event Action OnCompletion;
}

public static Task FromEvent(MyClass obj)
{
    TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();

    obj.OnCompletion += () =>
        {
            tcs.SetResult(null);
        };

    return tcs.Task;
} 
```

这允许：

```
await FromEvent(new MyClass()); 
```

问题是您需要为您想要`FromEvent`的每个类中的每个事件创建一个新方法`await`。这可能会很快变得非常大，而且它大多只是样板代码。

理想情况下，我希望能够做这样的事情：

```
await FromEvent(new MyClass().OnCompletion); 
```

然后我可以对任何实例上的任何事件重复使用相同的`FromEvent`方法。我花了一些时间尝试创建这样的方法，但有很多障碍。对于上面的代码，它将产生以下错误：

> 事件 'Namespace.MyClass.OnCompletion' 只能出现在 += 或 -= 的左侧

据我所知，永远不会有办法通过代码传递这样的事件。

因此，下一个最好的事情似乎是尝试将事件名称作为字符串传递：

```
await FromEvent(new MyClass(), "OnCompletion"); 
```

这并不理想；如果该类型的事件不存在，您不会得到智能感知，并且会出现运行时错误，但它仍然可能比大量的 FromEvent 方法更有用。

`GetEvent(eventName)`所以使用反射和获取`EventInfo`对象很容易。下一个问题是该事件的委托在运行时是未知的（并且需要能够改变）。这使得添加事件处理程序变得困难，因为我们需要在运行时动态创建一个方法，匹配一个给定的签名（但忽略所有参数），该签名访问`TaskCompletionSource`我们已经拥有的 a 并设置其结果。

幸运的是，我找到[了这个链接](http://msdn.microsoft.com/en-us/library/ms228976.aspx#procedureSection1)，其中包含有关如何 [几乎] 完全通过`Reflection.Emit`. 现在的问题是我们需要发出 IL，而我不知道如何访问`tcs`我拥有的实例。

以下是我在完成这项工作方面取得的进展：

```
public static Task FromEvent<T>(this T obj, string eventName)
{
    var tcs = new TaskCompletionSource<object>();
    var eventInfo = obj.GetType().GetEvent(eventName);

    Type eventDelegate = eventInfo.EventHandlerType;

    Type[] parameterTypes = GetDelegateParameterTypes(eventDelegate);
    DynamicMethod handler = new DynamicMethod("unnamed", null, parameterTypes);

    ILGenerator ilgen = handler.GetILGenerator();

    //TODO ilgen.Emit calls go here

    Delegate dEmitted = handler.CreateDelegate(eventDelegate);

    eventInfo.AddEventHandler(obj, dEmitted);

    return tcs.Task;
} 
```

我可以发出什么 IL 来允许我设置`TaskCompletionSource`? 或者，是否有另一种方法来创建一个为任意类型的任意事件返回任务的方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-12T22:21:01.723

干得好：

```
internal class TaskCompletionSourceHolder
{
    private readonly TaskCompletionSource<object[]> m_tcs;

    internal object Target { get; set; }
    internal EventInfo EventInfo { get; set; }
    internal Delegate Delegate { get; set; }

    internal TaskCompletionSourceHolder(TaskCompletionSource<object[]> tsc)
    {
        m_tcs = tsc;
    }

    private void SetResult(params object[] args)
    {
        // this method will be called from emitted IL
        // so we can set result here, unsubscribe from the event
        // or do whatever we want.

        // object[] args will contain arguments
        // passed to the event handler
        m_tcs.SetResult(args);
        EventInfo.RemoveEventHandler(Target, Delegate);
    }
}

public static class ExtensionMethods
{
    private static Dictionary<Type, DynamicMethod> s_emittedHandlers =
        new Dictionary<Type, DynamicMethod>();

    private static void GetDelegateParameterAndReturnTypes(Type delegateType,
        out List<Type> parameterTypes, out Type returnType)
    {
        if (delegateType.BaseType != typeof(MulticastDelegate))
            throw new ArgumentException("delegateType is not a delegate");

        MethodInfo invoke = delegateType.GetMethod("Invoke");
        if (invoke == null)
            throw new ArgumentException("delegateType is not a delegate.");

        ParameterInfo[] parameters = invoke.GetParameters();
        parameterTypes = new List<Type>(parameters.Length);
        for (int i = 0; i < parameters.Length; i++)
            parameterTypes.Add(parameters[i].ParameterType);

        returnType = invoke.ReturnType;
    }

    public static Task<object[]> FromEvent<T>(this T obj, string eventName)
    {
        var tcs = new TaskCompletionSource<object[]>();
        var tcsh = new TaskCompletionSourceHolder(tcs);

        EventInfo eventInfo = obj.GetType().GetEvent(eventName);
        Type eventDelegateType = eventInfo.EventHandlerType;

        DynamicMethod handler;
        if (!s_emittedHandlers.TryGetValue(eventDelegateType, out handler))
        {
            Type returnType;
            List<Type> parameterTypes;
            GetDelegateParameterAndReturnTypes(eventDelegateType,
                out parameterTypes, out returnType);

            if (returnType != typeof(void))
                throw new NotSupportedException();

            Type tcshType = tcsh.GetType();
            MethodInfo setResultMethodInfo = tcshType.GetMethod(
                "SetResult", BindingFlags.NonPublic | BindingFlags.Instance);

            // I'm going to create an instance-like method
            // so, first argument must an instance itself
            // i.e. TaskCompletionSourceHolder *this*
            parameterTypes.Insert(0, tcshType);
            Type[] parameterTypesAr = parameterTypes.ToArray();

            handler = new DynamicMethod("unnamed",
                returnType, parameterTypesAr, tcshType);

            ILGenerator ilgen = handler.GetILGenerator();

            // declare local variable of type object[]
            LocalBuilder arr = ilgen.DeclareLocal(typeof(object[]));
            // push array's size onto the stack 
            ilgen.Emit(OpCodes.Ldc_I4, parameterTypesAr.Length - 1);
            // create an object array of the given size
            ilgen.Emit(OpCodes.Newarr, typeof(object));
            // and store it in the local variable
            ilgen.Emit(OpCodes.Stloc, arr);

            // iterate thru all arguments except the zero one (i.e. *this*)
            // and store them to the array
            for (int i = 1; i < parameterTypesAr.Length; i++)
            {
                // push the array onto the stack
                ilgen.Emit(OpCodes.Ldloc, arr);
                // push the argument's index onto the stack
                ilgen.Emit(OpCodes.Ldc_I4, i - 1);
                // push the argument onto the stack
                ilgen.Emit(OpCodes.Ldarg, i);

                // check if it is of a value type
                // and perform boxing if necessary
                if (parameterTypesAr[i].IsValueType)
                    ilgen.Emit(OpCodes.Box, parameterTypesAr[i]);

                // store the value to the argument's array
                ilgen.Emit(OpCodes.Stelem, typeof(object));
            }

            // load zero-argument (i.e. *this*) onto the stack
            ilgen.Emit(OpCodes.Ldarg_0);
            // load the array onto the stack
            ilgen.Emit(OpCodes.Ldloc, arr);
            // call this.SetResult(arr);
            ilgen.Emit(OpCodes.Call, setResultMethodInfo);
            // and return
            ilgen.Emit(OpCodes.Ret);

            s_emittedHandlers.Add(eventDelegateType, handler);
        }

        Delegate dEmitted = handler.CreateDelegate(eventDelegateType, tcsh);
        tcsh.Target = obj;
        tcsh.EventInfo = eventInfo;
        tcsh.Delegate = dEmitted;

        eventInfo.AddEventHandler(obj, dEmitted);
        return tcs.Task;
    }
} 
```

此代码适用于几乎所有返回 void 的事件（无论参数列表如何）。

如有必要，可以对其进行改进以支持任何返回值。

您可以在下面看到 Dax 和我的方法之间的区别：

```
static async void Run() {
    object[] result = await new MyClass().FromEvent("Fired");
    Console.WriteLine(string.Join(", ", result.Select(arg =>
        arg.ToString()).ToArray())); // 123, abcd
}

public class MyClass {
    public delegate void TwoThings(int x, string y);

    public MyClass() {
        new Thread(() => {
                Thread.Sleep(1000);
                Fired(123, "abcd");
            }).Start();
    }

    public event TwoThings Fired;
} 
```

简而言之，我的代码**实际上**支持任何类型的委托类型。您不应该（也不需要）像`TaskFromEvent<int, string>`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T21:08:06.873

这将为您提供所需的东西，而无需做任何 ilgen，而且更简单。它适用于任何类型的事件代表；您只需为事件委托中的每个参数数量创建一个不同的处理程序。以下是 0..2 所需的处理程序，这应该是您的绝大多数用例。扩展到 3 及以上是从 2 参数方法进行的简单复制和粘贴。

这也比 ilgen 方法更强大，因为您可以在异步模式中使用由事件创建的任何值。

```
// Empty events (Action style)
static Task TaskFromEvent(object target, string eventName) {
    var addMethod = target.GetType().GetEvent(eventName).GetAddMethod();
    var delegateType = addMethod.GetParameters()[0].ParameterType;
    var tcs = new TaskCompletionSource<object>();
    var resultSetter = (Action)(() => tcs.SetResult(null));
    var d = Delegate.CreateDelegate(delegateType, resultSetter, "Invoke");
    addMethod.Invoke(target, new object[] { d });
    return tcs.Task;
}

// One-value events (Action<T> style)
static Task<T> TaskFromEvent<T>(object target, string eventName) {
    var addMethod = target.GetType().GetEvent(eventName).GetAddMethod();
    var delegateType = addMethod.GetParameters()[0].ParameterType;
    var tcs = new TaskCompletionSource<T>();
    var resultSetter = (Action<T>)tcs.SetResult;
    var d = Delegate.CreateDelegate(delegateType, resultSetter, "Invoke");
    addMethod.Invoke(target, new object[] { d });
    return tcs.Task;
}

// Two-value events (Action<T1, T2> or EventHandler style)
static Task<Tuple<T1, T2>> TaskFromEvent<T1, T2>(object target, string eventName) {
    var addMethod = target.GetType().GetEvent(eventName).GetAddMethod();
    var delegateType = addMethod.GetParameters()[0].ParameterType;
    var tcs = new TaskCompletionSource<Tuple<T1, T2>>();
    var resultSetter = (Action<T1, T2>)((t1, t2) => tcs.SetResult(Tuple.Create(t1, t2)));
    var d = Delegate.CreateDelegate(delegateType, resultSetter, "Invoke");
    addMethod.Invoke(target, new object[] { d });
    return tcs.Task;
} 
```

使用会是这样的。如您所见，即使事件是在自定义委托中定义的，它仍然有效。您可以将事件值捕获为元组。

```
static async void Run() {
    var result = await TaskFromEvent<int, string>(new MyClass(), "Fired");
    Console.WriteLine(result); // (123, "abcd")
}

public class MyClass {
    public delegate void TwoThings(int x, string y);

    public MyClass() {
        new Thread(() => {
            Thread.Sleep(1000);
            Fired(123, "abcd");
        }).Start();
    }

    public event TwoThings Fired;
} 
```

[如果上述三种方法对您的偏好而言，复制和粘贴过多，则这里有一个帮助函数](https://stackoverflow.com/a/12886260/171121)，它允许您在一行中编写 TaskFromEvent 函数。必须归功于 max 以简化我最初的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T20:27:23.583

如果您愿意为每种委托类型使用一种方法，则可以执行以下操作：

```
Task FromEvent(Action<Action> add)
{
    var tcs = new TaskCompletionSource<bool>();

    add(() => tcs.SetResult(true));

    return tcs.Task;
} 
```

你会像这样使用它：

```
await FromEvent(x => new MyClass().OnCompletion += x); 
```

请注意，这样您就永远不会取消订阅活动，这对您来说可能是也可能不是问题。

如果您使用的是泛型委托，则每种泛型类型一个方法就足够了，您不需要每个具体类型一个方法：

```
Task<T> FromEvent<T>(Action<Action<T>> add)
{
    var tcs = new TaskCompletionSource<T>();

    add(x => tcs.SetResult(x));

    return tcs.Task;
} 
```

尽管类型推断对此不起作用，但您必须显式指定类型参数（假设类型`OnCompletion`为`Action<string>`此处）：

```
string s = await FromEvent<string>(x => c.OnCompletion += x); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-03-24T19:12:36.513

我通过尝试为 编写`GetAwaiter`扩展方法来面对这个问题`System.Action`，忘记了它`System.Action`是不可变的，并通过将它作为参数传递来制作副本。`ref`但是，如果您使用关键字传递它，则不会制作副本，因此：

```
public static class AwaitExtensions
{ 
    public static Task FromEvent(ref Action action)
    {
        TaskCompletionSource<object> tcs = new TaskCompletionSource<object>();
        action += () => tcs.SetResult(null);
        return tcs.Task;
    }
} 
```

用法：

```
await AwaitExtensions.FromEvent(ref OnActionFinished); 
```

**注意：TCS 监听器保持订阅状态**

# php - Wordpress - 列出了重复的搜索结果？

> ID：12865854
> 
> 赞同：1
> 
> 时间：2012-10-12T19:31:43.310
> 
> 标签：php, wordpress

使用的主题是 CookingPress v1.2。- [http://bit.ly/zgCtE0](http://bit.ly/zgCtE0)

**问题：** 如果“test-blog-post”有 5 个标签并在搜索结果中返回，那么它将在结果列表中列出 5 次。

**问题：** 我可以在下面的代码中添加一些内容来纠正搜索结果的重复吗？如果没有，是否有任何其他代码可能导致这种情况？

下面是呈现搜索结果的代码（来自**loop-search.php**）。

```
 <?php if (!have_posts()) : ?>
        // No Results
    <?php endif; ?>
    <?php while (have_posts()) : the_post(); ?>
        // Show Posts
    <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:47:15.510

那不是完整的代码。您已经删除了“//显示帖子”之后的重要内容。请发布该代码，并请发布查询数据库的代码。我问是因为我认为它不是 WordPress 原生查询。也就是说，我认为 vanilla Wordpress 根本不会搜索标签。这意味着这是一个自定义查询，或者开发人员已连接到 WordPress 查询并对其进行了更改。如果没有这些信息，您的问题将无法回答。

# php - SimpleXMLElement 使用命名空间访问元素？

> ID：12865858
> 
> 赞同：1
> 
> 时间：2012-10-12T19:32:07.953
> 
> 标签：php, xml, simplexml, xml-namespaces

我有以下 XML：

```
<ns1:getBannerLinksResponse xmlns:ns1="http://endpoint.website.com/">
    <ns1:return>
        <ns1:campaignID>0</ns1:campaignID>
        <ns1:categoryID>200230455</ns1:categoryID>
        <ns1:categoryName>Promotion</ns1:categoryName>
        <ns1:linkID>10001599</ns1:linkID>
        <ns1:linkName>KFL-20% off No Min</ns1:linkName>
        <ns1:mid>3071</ns1:mid>
        <ns1:nid>1</ns1:nid>
        <ns1:clickURL>
            http://someurl
        </ns1:clickURL>
        <ns1:endDate>Oct 15, 2012</ns1:endDate>
        <ns1:height>250</ns1:height>
        <ns1:iconURL>
            http://someurl
        </ns1:iconURL>
        <ns1:imgURL>
            http://someurl
        </ns1:imgURL>
        <ns1:landURL>
            http://someurl
        </ns1:landURL>
        <ns1:serverType>22</ns1:serverType>
        <ns1:showURL>
            http://someurl
        </ns1:showURL>
        <ns1:size>13</ns1:size>
        <ns1:startDate>Oct 14, 2012</ns1:startDate>
        <ns1:width>300</ns1:width>
    </ns1:return>
</ns1:getBannerLinksResponse> 
```

我尝试了以下没有运气：

```
$data = new SimpleXMLElement($xml);
$data->registerXPathNamespace('ns1','http://endpoint.website.com/');
foreach($data->xpath('//ns1:return') as $banner)
{
  $banner->registerXPathNamespace('ns1','http://endpoint.website.com/');
  var_dump($banner);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:42:14.747

所有你需要的是

```
$data = new SimpleXMLElement($xml);
$data->registerXPathNamespace('ns1','http://endpoint.websitecom/');
$part = $data->xpath("//ns1:return");
var_dump($part[0]->children("ns1",true)); 
```

输出

```
object(SimpleXMLElement)[3]
  public 'campaignID' => string '0' (length=1)
  public 'categoryID' => string '200230455' (length=9)
  public 'categoryName' => string 'Promotion' (length=9)
  public 'linkID' => string '10001599' (length=8)
  public 'linkName' => string 'KFL-20% off No Min' (length=18)
  public 'mid' => string '3071' (length=4)
  public 'nid' => string '1' (length=1)
  public 'clickURL' => string '
            http://someurl
        ' (length=36)
  public 'endDate' => string 'Oct 15, 2012' (length=12)
  public 'height' => string '250' (length=3)
  public 'iconURL' => string '
            http://someurl
        ' (length=36)
  public 'imgURL' => string '
            http://someurl
        ' (length=36)
  public 'landURL' => string '
            http://someurl
        ' (length=36)
  public 'serverType' => string '22' (length=2)
  public 'showURL' => string '
            http://someurl
        ' (length=36)
  public 'size' => string '13' (length=2)
  public 'startDate' => string 'Oct 14, 2012' (length=12)
  public 'width' => string '300' (length=3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T20:47:11.383

您需要使用该`->children()`方法。如果您避免使用 XPath 而只使用 SimpleXML 运算符，那么您的代码最终会简单得多。

命名空间元素也是使用标准 PHP 调试函数调试相当神奇的 SimpleXML 对象时不可见的许多事物之一。（下面使用 [my [`simplexml_dump()`function](https://github.com/IMSoP/simplexml_debug)代替。）

```
$data = new SimpleXMLElement($xml);
$banner = $data->children('ns1', true)->return; 
// Or to avoid relying on the 'ns1' alias: ->children('http://endpoint.website.com/', false);
simplexml_dump($banner); 
```

请注意，在另一个`->children()`调用之前，“ns1”命名空间保持选中状态：

```
// Remember to cast to string if you want the content of an element or attribute
var_dump( (string)$banner->linkName ); 
```

如果`<return>`可以发生多次，这显然变成：

```
foreach ( $data->children('ns1', true)->return as $banner )
{
    simplexml_dump($banner);
} 
```

# c# - C#中的日期时间格式

> ID：12865859
> 
> 赞同：2
> 
> 时间：2012-10-12T19:32:08.443
> 
> 标签：c#, asp.net, date

我有一个简单的问题：我想将日期写在 asp:label 中，格式如下：MMM dd, yyyy 我试过这个：

```
lblDate.Text = System.DateTime.Today.ToString("MMM dd, yyyy"); 
```

结果是：“okt. 12, 2012”

1.  我想从中删除点。
2.  月份名称应以大写字母开头。

正确的格式：“Okt 12, 2012”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T19:42:07.410

您可以为此使用[AbbreviatedMonthNames属性：](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.abbreviatedmonthnames.aspx)

```
CultureInfo ci = CultureInfo.CreateSpecificCulture("en-US");
DateTimeFormatInfo dtfi = ci.DateTimeFormat;
dtfi.AbbreviatedMonthNames = new string[] 
{ 
  "Jan", "Feb", "Mar", 
  "Apr", "May", "Jun", 
  "Jul", "Aug", "Sep", 
  "Oct", "Nov", "Dec", "" 
}; 

lblDate.Text = DateTime.Now.ToString("MMM dd, yyyy", dtfi); 
```

然后输出将是`Okt 12, 2012`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T19:40:52.003

`DateTime.ToString()`根据当前文化中规定的规则格式化日期。您可以使用@naspinski 显示的技术手动更改它，但您的应用程序的其他用户可能会得到不同的结果，具体取决于他们特定于文化的设置。例如，某些文化使用点作为日期分隔符，如“12.10.2012”。您可以在 Windows 控制面板中更改您的区域设置，以按照您喜欢的方式进行格式化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T19:35:44.580

手动执行此操作的方法：

```
string dt System.DateTime.Today.ToString("MMM dd, yyyy")Replace(".","");
if(dt.length>0) dt = dt.SubString(0,1).ToUpper() + dt.SubString(1, dt.Length - 1);
lblDate.Text = dt; 
```

# linux - 如何编写一个搜索目录并列出具有最大编号后缀的文件的 Bash 程序？

> ID：12865863
> 
> 赞同：0
> 
> 时间：2012-10-12T19:32:24.273
> 
> 标签：linux, bash, shell

我正在尝试编写一个程序，该程序将搜索主目录的子目录并列出最后数量最多的文件。例如：文件名_100。

```
find . -name "*_*" | sort -n | tail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:27:17.183

`sort`从字符串的开头开始排序，因此如果不先拆分文件名的前导部分，就不能使用它。这个循环会做到这一点；它打印出 之后的文件名部分`_`，然后是完整的文件名。

```
for fn in `find . -name '*_*'`; do
    echo "${fn##*_} $fn"
done 
```

然后，您可以将输出通过管道传输到`sort`并`tail`获取最大的数字，然后`cut`仅选择文件名本身。

```
for fn in `find . -name '*_*'`; do
    echo "${fn##*_} $fn"
done | sort -n | tail -n 1 | cut -d' ' -f 2- 
```

然后你需要提取下划线之前的文件名部分。这可能最好通过将最后一部分的结果存储在变量中来完成，

```
largest_filename="$(for fn in `find . -name '*_*'`; do
    echo "${fn##*_} $fn"
done | sort -n | tail -n 1 | cut -d' ' -f 2-)" 
```

之后，您可以使用 bash 的后缀删除来去除下划线后面的部分，然后列出共享该前缀的所有文件。

```
largest_filename="$(for fn in `find . -name '*_*'`; do
    echo "${fn##*_} $fn"
done | sort -n | tail -n 1 | cut -d' ' -f 2-)"
ls ${largest_filename%_*}_* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:42:05.410

```
tmp1=$(mktemp)
#retrieve largest suffix
find . -name '*_*' | xargs -n 1 basename | awk -F'_' '{print($NF, $0)}' | sort -k1,1 -n -r | awk '{print($1)}' | head -1 > $tmp1
tmp2=$(mktemp)
#retrieve file names containing largest suffix
join -o2.2 -1 1 -2 1  $tmp1 <(find . -name '*_*' | xargs -n 1 basename | awk -F'_' '{print($NF, $0)}' | sort -k1,1 ) > $tmp2
join -o2.1,2.2 -1 1 -2 1 -t"_" $tmp2 <(find . -name '*_*' | xargs -n 1 basename | sort -k1,1 -t"_") 
```

# jquery - jQuery cookie 与 cookies.set && 不设置过期/仅会话

> ID：12865866
> 
> 赞同：0
> 
> 时间：2012-10-12T19:32:39.983
> 
> 标签：jquery, cookies

我有一个创建 cookie 的简单 jQuery 函数（是的，我包括插件），我可以使用以下方法获取创建 cookie 的脚本：

```
$.cookies.set('LastArticle',  $(this).attr("id"), { expires: 1 } ); 
```

但是创建的 cookie（在多个浏览器中）**只是一个没有过期日期的会话 cookie。**

我尝试使用更简单的：

```
$.cookie('TEST_COOKIE2', 2, {expires: 30}); 
```

测试页面：[http ://www.armorama.com/test2.php](http://www.armorama.com/test2.php)

这根本不会产生任何饼干。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:51:46.447

您收到“TypeError: $.cookie is not a function”错误。尝试使用文档准备功能：

```
$(document).ready(function() {
  //Your Code
}); 
```

另外，我认为您正在混淆 jQuery Cookie 脚本。您使用的那个[http://code.google.com/p/cookies/](http://code.google.com/p/cookies/)不会以这种方式设置 cookie。您需要使用 $.cookie.set 因为 $.cookie 不是函数。

Expires 选项是 expiresAt，所以应该是：

```
$.cookies.set('LastArticle',  $(this).attr("id"), { expiresAt: 1 } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:17:57.277

我不相信您使用的插件实际上有`.cookie`方法。

它有`.cookies`，但没有`.cookie`。

有很多 jQuery cookie 插件（很多人都写过它，因为它相当简单，而且是 jQuery 核心的明显遗漏）；也许您使用的插件与您认为的插件不同？

# linux - 使用 sed 匹配任何东西和 \s

> ID：12865870
> 
> 赞同：0
> 
> 时间：2012-10-12T19:32:53.953
> 
> 标签：linux, bash, shell, sed

我有以下内容：

```
sed -i "s/SYNFLOOD_RATE  = \"100/s\"/SYNFLOOD_RATE  = \"10\s\"/g" 
```

问题是如何避免这个错误？

```
/bin/sed: -e expression #1, char 28: unknown option to `s' 
```

有没有办法进行通配符匹配并用 sed 替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:35:08.487

如果你想先`grep`替换：

```
sed -i '/SYNFLOOD_RATE  = \"100/s/"\/SYNFLOOD_RATE  = \"10\s\"/replacement/g' 
```

但定界符可以是除 之外的任何东西`/`，请参阅：

```
sed -i '/SYNFLOOD_RATE  = "100/s@"/SYNFLOOD_RATE  = "10\s"@replacement@g' 
```

（这里的分隔符是`@`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:10:47.783

你有太多的斜线，4 应该有 3。使用不同的分隔符；*逗号*(,)、 *砰*(!)、*哈希*(#) 和*at* (@) 是常见的替代方法。

`sed -i "s,SYNFLOOD_RATE = \"100/s\",SYNFLOOD_RATE = \"10\s\",g"`

请注意，原始版本中有“100/s”，替换版本中有“10s”（无斜线）。要实际插入*反斜杠*，您需要输入其中的 4 个：`10\\\\s`。每对将被外壳减少为单个，然后剩余的双精度将被解释为文字反斜杠`sed`。

# asp.net - 无法在控制台应用程序中访问 MembershipUser

> ID：12865873
> 
> 赞同：1
> 
> 时间：2012-10-12T19:33:06.523
> 
> 标签：asp.net, asp.net-membership

我创建了一个控制台应用程序并将其转换为 .Net Framework 4.0，以便我可以使用`System.Web.Security`. 然后我添加了对这个类的引用。我可以访问`System.Web.Security.Membership`但无法访问`System.Web.Security.MembershipUser`，当我输入时它甚至不会在智能感知中显示为选项`System.Web.Security.`

我似乎错过了一步，但无法弄清楚那是什么步骤，有什么想法吗？

**使用语句**编辑：****

 **```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Linq;
using System.Text;
using System.Net.Mail;
using System.Web;
using System.Web.Management;
using System.Web.Security; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:42:33.307

[MembershipUser](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.aspx)位于 System.Web.ApplicationServices 程序集 (dll) 中，因此您需要在项目中引用它。**

# alignment - 在文档中重新引入空格

> ID：12865876
> 
> 赞同：0
> 
> 时间：2012-10-12T19:33:15.740
> 
> 标签：alignment, nlp

假设我们手头有一些参考文本

> 四零七年前，我们的父辈在这片大陆上创造了一个新的国家，这个国家是在自由中孕育的，并致力于人人生而平等的主张。现在我们正在进行一场伟大的内战，考验那个国家，或者任何一个如此构思和如此奉献的国家，是否能够持久。我们在那场战争的伟大战场上相遇。我们来奉献该领域的一部分，作为那些在这里献出生命以使该国得以生存的人们的最后安息之地。我们应该这样做是完全合适和适当的。但是，在更大的意义上，我们不能奉献，我们不能奉献，我们不能圣化这片土地。在这里奋斗的勇敢者，无论生者还是死者，都将它奉献给了它，远远超出了我们微弱的能力来增加或减少。世界不会注意到，也不会记住我们在这里说的话，但它永远无法忘记他们在这里所做的一切。对我们这些活着的人来说，更确切地说，应该在这里献身于他们在这里战斗的他们迄今为止如此高尚地推进的未完成的工作。更确切地说，我们要在这里献身于摆在我们面前的伟大任务——从这些光荣的死者身上，我们将更加致力于他们为之付出最后全部奉献的事业——我们在此下定决心，这些死者不会已经徒劳地死去——这个国家在上帝的统治下将获得自由的新生——人民的政府、民治的政府、民享的政府不会从地球上消失。

我们会收到该文本的片段，没有空格或标点符号，并且删除、插入和替换了一些字符

```
ieldasafinalrTstingplaceforwhofoughtheregavetheirliZesthatthatn 
```

使用参考文本，我们可以使用哪些工具（在任何编程语言中）来尝试正确地分隔单词

```
ield as a final rTsting place for who fought here gave their liZes that that n 
```

不需要纠正错误，只需间隔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T22:49:57.533

你遇到了奇怪的问题:)

如果您不能依靠大写来获得提示，只需将所有内容都小写即可。

然后得到一个单词字典。也许只是一个[单词表](http://wordlist.sourceforge.net/)，或者你可以试试[Wordnet](http://wordnet.princeton.edu/)。

还有一个类似的、正确间隔的材料的语料库。如果合适，请下载[Wikipedia dump](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)。你需要清理它并分解成 ngram。3 克可能适合这项任务。或者节省时间并使用 Google 的 ngram 数据。[网络 ngrams](http://googleresearch.blogspot.co.uk/2006/08/all-our-n-gram-are-belong-to-you.html)（付费）或[书籍 ngrams](http://books.google.com/ngrams/datasets)（免费）。

设置最大字长上限。假设20个字符。

取你的神秘字符串的第一个字符并在字典中查找它。然后取前 2 个字符并查找它们。继续这样做，直到你达到 20 个。存储你得到的所有匹配，但最长的可能是最好的。通过您的字符串，一次移动起点 1 个字符。

您最终会得到一组有效的单词匹配。

循环遍历这个新数组并将每个值与以下值配对，将其与原始字符串进行比较，以便识别所有可能的不重叠的有效单词组合。您最终可能会得到 1 个或多个输出字符串。

如果您有多个，请将每个输出字符串分成 3 克。然后在您的新 ngram 数据库中查找以查看最常见的组合。

可能还有一些节省时间的技术，例如从停用词开始，在字典中检查它们并结合两边的增量字母，然后先在其中添加空格。

... 或者我把整个问题都考虑得太多了，而且有一个 awk 的班轮，有人会用它来谦卑我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:34:54.713

您可以使用编辑距离并找到参考的最小编辑距离子字符串来执行此操作。在此处查看我对类似问题的回答（PHP 实现）：

[具有错误字符容差的最长公共子串](https://stackoverflow.com/questions/12742348/longest-common-substring-with-wrong-character-tolerance/12792902#12792902)

使用`shortest_edit_substring()`上面链接中的函数，您可以在删除除字母（或您想要保留的任何内容：字母、数字等）之外的所有内容后添加它以进行搜索，然后将结果正确映射回原始版本。

```
// map a stripped down substring back to the original version
function map_substring($haystack_letters,$start,$length,$haystack, $regexp)
{
    $r_haystack = str_split($haystack);
    $r_haystack_letters = $r_haystack;
    foreach($r_haystack as $k => $l) 
    {   
        if (preg_match($regexp,$l))
        {       
            unset($r_haystack_letters[$k]);
        }       
    }   
    $key_map = array_keys($r_haystack_letters);
    $real_start = $key_map[$start];
    $real_end = $key_map[$start+$length-1];
    $real_length = $real_end - $real_start + 1;
    return array($real_start,$real_length);
}

$haystack = 'Four score and seven years ago our fathers brought forth on this continent a new nation, conceived in liberty, and dedicated to the proposition that all men are created equal. Now we are engaged in a great civil war, testing whether that nation, or any nation, so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this. But, in a larger sense, we can not dedicate, we can not consecrate, we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us—that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion—that we here highly resolve that these dead shall not have died in vain—that this nation, under God, shall have a new birth of freedom—and that government of the people, by the people, for the people, shall not perish from the earth.';

$needle = 'ieldasafinalrTstingplaceforwhofoughtheregavetheirliZesthatthatn';

// strip out all non-letters
$regexp_to_strip_out = '/[^A-Za-z]/';

$haystack_letters = preg_replace($regexp_to_strip_out,'',$haystack);

list($start,$length) = shortest_edit_substring($needle,$haystack_letters);
list($real_start,$real_length) = map_substring($haystack_letters,$start,$length,$haystack,$regexp_to_strip_out);

printf("Found |%s| in |%s|, matching |%s|\n",substr($haystack,$real_start,$real_length),$haystack,$needle); 
```

这也将进行纠错；实际上做起来比不做要容易。如果您想要比 PHP 更快的东西，最小编辑距离搜索在其他语言中实现起来非常简单。

# linux - 在 Linux 中使用 tar 删除以前缀开头的文件

> ID：12865878
> 
> 赞同：2
> 
> 时间：2012-10-12T19:33:34.907
> 
> 标签：linux, tar

是否可以从压缩的 tarball 中删除所有以特定名称开头的文件，而无需再次提取和重新创建存档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:37:50.350

tar 文件格式是一种流格式，因此可以通过读取旧文件、跳过不需要的文件并将所有要保留的数据复制到新的 tar 文件来执行此操作。如果 tar 文件也被压缩（例如`.tar.gz`），那么您将不得不解压缩、过滤、重新压缩和写入。

我不知道有任何现有的工具可以做到这一点，但例如使用[Python`tarfile`模块](http://docs.python.org/library/tarfile.html)应该相当简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:43:10.923

您可以`tar`使用[tardy](http://tardy.sourceforge.net/)对流进行后处理，它可以过滤 tar 文件以删除（或重命名）某些文件。您可能想要使用该`-EXclude`选项，或者可能是该选项`-Remove_Prefix`。（`tardy`有区分大小写的选项）。

# html - 我的字符集声明必须在我的 html 文档中的多少字节内？

> ID：12865880
> 
> 赞同：1
> 
> 时间：2012-10-12T19:33:47.690
> 
> 标签：html, character-encoding

当我在[w3.org](http://www.w3.org/TR/html-markup/syntax.html#character-encoding)上读到：

> 包含字符编码声明的元素必须在文档的前 512 个字节内完全序列化。

然后通过 html5boilerplate 文档 [http://cl.ly/K7Vt] 链接到[whatwg.org](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#charset)并阅读此内容后，我不确定哪个是正确的：

> 包含字符编码声明的元素必须在文档的前 1024 个字节内完全序列化。

哪个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:09:10.643

引用的第一个文档是一份非规范的 W3C 文档，旨在以一种可以理解的方式将 HTML5 描述为一种标记语言。第二个是 WHATWG 文档，声称是“生活标准”（矛盾修饰语），但主要符合 W3C HTML5 文档，这是一个工作草案，这意味着它远非官方（甚至不一定被认可）所有工作组成员），但旨在导致创建“标准”（W3C 建议）。在这种情况下，后者的[说法](http://www.w3.org/TR/html5/the-meta-element.html#charset)与 WHATWG 文件相同。

在我看来，在 W3C 草案中，这个数字在[2011 年 4 月 5 日的草案](http://www.w3.org/TR/2011/WD-html5-20110405/semantics.html#charset)中从 512 提高到了 1024 。非规范性文件大概只是在这方面没有更新。

因此，即使在松散的 W3C 意义上，也没有标准，因此没有确定的正确性标准。但显然 1024 应该是下限。它应该被理解为对作者的建议；浏览器实际上可能会采用更自由的策略。

实际上，`meta`指定编码的标签应该出现在部件的任何其他元素之前`head`。即使您使用带有`<html>`和`<head>`标签的详细标记，您也远不及 512 个字符的限制。如果您在 HTML 文档的开头有大量注释，只需删除它们；有更好的文档位置。

# c++ - 使用字符串作为运算符的 C++ 比较

> ID：12865884
> 
> 赞同：1
> 
> 时间：2012-10-12T19:33:58.833
> 
> 标签：c++, operators, compare, string-comparison

我正在写下面的函数，并开始认为可能有更好的方法来实现它；但是谷歌并没有出现太多，所以任何见解都会受到赞赏。我也有一个非常相似的情况，涉及整数。

```
bool compare_strs (std::string operator_, std::string str_0, std::string str_1)
{
    if (operator_ == ">")
    {
        return str_0 > str1;
    }
    else if (operator_ == "<")
    {
        return str_0 < str1;
    }
    else if (operator_ == "<=")
    {
        return str_0 <= str1;
    }
    else
    {
        return str_0 >= str1;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:51:01.093

You can use a map to store operators and related functors. In C++11, something along these lines should work, though there might be a couple subtle errors. In C++03, you'll have to change a couple things, including changing `std::function` to `boost::function` or function pointers, as well as using `std::make_pair` to store the map values.

```
#include <functional> //for std::function and std::less et al.
#include <map> //for std::map
#include <stdexcept> //for std::invalid_argument
#include <string> //for std::string

struct StringComparer {
    static bool compare( //split up to fit width
        const std::string &oper, 
        const std::string &str0, const std::string &str1
    ) {
        MapType::const_iterator iter = operations.find(oper); 
        if (iter == std::end(operations)) //check if operator is found
            throw std::invalid_argument("No match for provided operator.");

        return iter->second(str0, str1); //call the appropriate functor
    }

private:
    using MapType = std::map< //makes life easier, same as typedef
        std::string, 
        std::function<bool(const std::string &, const std::string &)>
    >;

    static const MapType operations; //a map of operators to functors
};

const StringComparer::MapType StringComparer::operations = { //define the map
    {"<", std::less<std::string>()}, //std::less is a functor version of <
    {"<=", std::less_equal<std::string>()},
    {">", std::greater<std::string>()},
    {">=", std::greater_equal<std::string>()}
}; 
```

You can also [see it in action](http://liveworkspace.org/code/286cba105526afe42dbd33848cdc4244). The nice thing about an approach like this is that it's very easy to include more operators, as all you have to do is add them to the map.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:50:16.910

As others have mentioned, you should first ask yourself why you are doing this - there is likely a better solution. Going with this though, I might do something like:

```
template <typename T1, typename T2>
bool mycompare(std::string operator_, const T1 & _lhs, const T2 & _rhs)
{
    if (operator_ == ">")
    {
        return _lhs > _rhs;
    }
    else if (operator_ == "<")
    {
        return _lhs < _rhs;
    } 
    //etc.
    else
    {
        throw new exception("Invalid operator");
    }
} 
```

# jquery - jQuery.validate 触发后杀死字符计数器

> ID：12865886
> 
> 赞同：2
> 
> 时间：2012-10-12T19:34:10.113
> 
> 标签：jquery, validation, charactercount

在对这个问题进行了广泛的搜索之后，我无法自己找到一个问题的答案，因为我遇到的问题是 jQuery 验证插件正在蚕食我用于 SMS-via-PHP 表单的字符计数插件。

如果您进入表单，在前端，并开始在文本区域中输入，计数器工作得很好，当然验证不会触发，因为元素中有文本......但是，为了感兴趣在测试中，如果您尝试在没有消息的情况下提交表单，则会触发验证，并显示相对于 的错误消息`textarea`，并且当您输入副本时，验证消息会消失，但字符计数器不再起作用。

这是我正在使用的字符计数器：http: [//cssglobe.com/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas/](http://cssglobe.com/jquery-plugin-simplest-twitterlike-dynamic-character-count-for-textareas/)

这是我布置脚本的方式：

```
$(function(){
    //irrelevant functions have been omitted

    $("#smsMessage").charCount({
        allowed:110,        
        warning:10, 
    });
    $('form').validate();
}); 
```

我什至尝试重新触发 counter 函数，作为对验证的回调，但这只会导致重复的、非功能性的计数器被放置在`textarea`.

```
$(function(){
    //irrelevant functions have been omitted

    $("#smsMessage").charCount({
        allowed:110,        
        warning:10, 
    });
    $('form').validate({
        invalidHandler: function(form, validator) {
            var errors = validator.numberOfInvalids();
            if (errors) {
                $("#smsMessage").charCount({
                    allowed:110,        
                    warning:10, 
                });
            }
        }
    });
}); 
```

诚然，这是我一段时间以来的第一个单独的 webDev 项目——它是为我的未婚妻和我的婚礼网站准备的，所以我试着把它分类一下。如果有任何方法可以让计数器和验证很好地结合在一起，那就太好了。如果不是，这并不是世界末日，但它仍然不够理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:56:09.407

问题是您的计数器插件在跟踪计数器的位置方面不是很聪明。它通过将计数器放在文本区域之后来创建计数器。验证插件对它的错误消息做同样的事情。最简单的解决方法是告诉 validate 插件将它的错误放在其他地方。尝试这个：

```
$('form').validate({
    errorPlacement: function(error,element){
        if (element.attr('id') == 'smsMessage'){
            error.insertAfter(element.next());
        } else {
            error.insertAfter(element);
        }            
    }       
});​ 
```

我做了一个工作示例，您可以尝试一下：http: [//jsfiddle.net/ryleyb/6HKuq/](http://jsfiddle.net/ryleyb/6HKuq/)

# javascript - 在 SVG Tiny 1.2 中获取 SVGAnimation 元素的当前时间

> ID：12865888
> 
> 赞同：0
> 
> 时间：2012-10-12T19:34:15.367
> 
> 标签：javascript, jquery, svg

我有一个 SVG 动画元素。

```
...
<animation id="playlist" begin="indefinite" dur="60.0" repeatDur="indefinite" width="1920" height="1080" preserveAspectRatio="xMidYMid" xlink:href="playlist.svg"/>
... 
```

在 playlist.svg 中，有几个 svg 视频元素。例如：

```
...
<video begin="0;item_8.end" dur="10.0" width="1920" height="1080" xlink:href="files/content/movie.mp4" id="item_1" preserveAspectRatio="xMidYMid" />
... 
```

一切运行良好，这些视频剪辑连续运行而没有错误。

我正在尝试获取播放列表的经过时间。我们尝试过使用

```
var elapsed_time = document.getElementById('playlist').getCurrentTime();
//  or
var elapsed_time = $('#playlist').getCurrentTime(); 
```

但它回来了

```
$("#playlist").getCurrentTime is not a function 
```

我们要么需要获取播放列表当前时间的方法，要么需要保存经过时间的变量的名称，或者需要为我们生成它的代码片段。

仅供参考，这些都不是在浏览器中；它在运行 SVG 文件并生成日志的设备上，因此我们无法访问 Firebug、console.log 等，但我们可以 alert() 并查看错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:44:36.403

我怀疑您正在寻找的是根 svg 元素上的[getCurrentTime() 。](http://www.w3.org/TR/SVGTiny12/svgudom.html#svg__SVGSVGElement)每个动画没有一个，仅用于整个文档片段。

# objective-c - 将 GLfloat [] 数组转换为 GLfloat * 数组

> ID：12865892
> 
> 赞同：1
> 
> 时间：2012-10-12T19:34:42.627
> 
> 标签：objective-c, c, opengl-es, objective-c++

有没有更快的方法将以下数据转换为 ac 样式指针数组？

```
GLfloat verticalLines [] = {
0.59, 0.66, 0.0,    
0.59, -0.14, 0.0
} 
```

我目前的方法是使用以下方法手动迭代数据：

```
-(GLfloat *)updateLineVertices{

int totalVertices = 6;
GLfloat *lineVertices =  (GLfloat *)malloc(sizeof(GLfloat) * (totalVertices));

for (int i = 0; i<totalVertices; i++) {
    lineVertices[i] = verticalLines[i];
}

return lineVertices;
} 
```

一些额外的信息。最终，我将需要一种易于操作的格式的数据，例如：

```
-(void)scaleLineAnimation{
GLfloat *lineVertices = [self updateLineVertices];
for (int i = 0; i<totalVertices; i+=3) {
     lineVertices[i+1] += 0.5; //scale y axis
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:58:09.660

It depends on if verticalLines is going to stick around or not. If it's defined like it is above and it's not going to change, you can forgo the whole malloc and just point lineVertices to it.

```
linesVertices = &verticalLines[0] 
```

if verticalLines is going to change, you probably want your own copy, so you've got no choice but to copy the actual data from one part of memory to another as you are doing, that being said, this might be a bit more elegant

```
for (int i = 0; i<totalVertices; i++){
    lineVertices[i] = verticalLines[i];
} 
```

or the preferred method is probably to use memcopy(), here is some working code

```
//MemcopyTest.c
#include <cstdlib>
#include <stdio.h>
#include <string.h>

int main(){
   float a[] = {1.0,2.0,3.0};     //Original Array

   int size = sizeof(float)*3;      
   float *b = (float*)malloc(size); //Allocate New Array
   memcpy(b, a, size);              //Copy Data

   for(int i = 0; i<3; i++){
      printf("%f\n", b[i]);
   }
   free(b);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:05:19.573

直接使用有什么问题`verticalLines`？任何类型`T ident[n]`都可以隐式转换为`T* ident`就好像您编写了`&ident[0]`. 如果你真的想明确，你可以直接写`&ident[0]`。

# c# - 按 Id 的 MVC4 种子数据库外键

> ID：12865893
> 
> 赞同：2
> 
> 时间：2012-10-12T19:34:44.333
> 
> 标签：c#, ef-code-first, asp.net-mvc-4

我有 2 个保存餐馆数据的类。

**状态.cs**

```
public class Status
{

    [Required]
    public int StatusId { get; set; }

    [Required]
    [DisplayName("Status")]
    public string Name { get; set; }
} 
```

**餐厅.cs**

```
public class Restaurant
{
    public int RestaurantId { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    [EmailAddress]
    public string Email { get; set; }

    [Required]
    public string Telephone { get; set; }

    [Required]
    public int StatusId { get; set; }

    // NAVIGATION PROPERTIES

    public virtual Status Status { get; set; }
} 
```

我正在尝试将数据播种到数据库中。

首先，我为状态表播种，然后我希望为餐厅表播种。

```
var statuses = new List<Status>
{
    new Status { Name = "Draft" },
    new Status { Name = "Live" },
    new Status { Name = "Invisible" },
    new Status { Name = "Discontinued" }
};
statuses.ForEach(a => context.Statuses.Add(a));

var restaurants = new List<Restaurant> 
{ 
    new Restaurant { Name = "The Restaurant Name", Email = "email@restaurant.com", Telephone = "012345566787", StatusId = 1 }
};
restaurants.ForEach(a=>context.Restaurants.Add(a));

base.seed(context); 
```

这不起作用，因为它不喜欢我尝试将 StatusId = 1 播种到 Restaurant 的方式。

我知道我可以在新餐厅中创建新状态，但是，我已经将状态播种到数据库中。如何将餐厅的状态设置为草稿？？？

我必须每次都这样做吗？？？

```
new Restaurant { Name = "The Restaurant Name", Email = "email@restaurant.com", Telephone = "012345566787", StatusId = new Status { Name = "Draft"} } 
```

每次我创建一个状态为“草稿”的新餐厅时，这不会在状态表中生成一个名为“状态”的新行吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T20:41:08.453

不要设置`StatusId`，设置`Status`：

```
var restaurants = new List<Restaurant> 
{ 
    new Restaurant { 
        Name = "The Restaurant Name", 
        Email = "email@restaurant.com", 
        Telephone = "012345566787", 
        Status = statuses.Single(s=>s.Name=="Draft") }
}; 
```

这样，`StatusID`由上下文设置并使用与 相同的 ID `Status`。

如果您想通过索引（例如`statuses[0]`for `"Draft"`）引用列表中的状态，也可以；不过，恕我直言，按名称选择更合适。

**编辑**

只需阅读问题的结尾 - 所以回答这个问题：

当您创建一个“新”`Status`并将其附加到您的`Restaurant`时，上下文不知道您要使用 的现有状态`"Draft"`，因此它会按照您告诉它的操作 - 创建一个新状态。当您附加上下文中的现有项时`Status`，将使用该 ID，因为它是同一个实例。

# android - 从应用程序中关闭选定的活动

> ID：12865897
> 
> 赞同：0
> 
> 时间：2012-10-12T19:35:07.270
> 
> 标签：android, android-intent, android-activity

```
Hi androidians, 
```

我的应用程序中有许多模块，我可以通过某个链接从一个模块转到另一个模块。但是在转到其他模块之前，我想关闭与前一个模块相关的所有活动，您可以说我有每个模块的活动堆栈，我想在开始使用其他模块堆栈之前清除它。

```
**Example**
 Module1 contains Activity 1,2,3 Module 2 Contains Activity 4,5,6 
```

*我从 go 1->2->3(of module1) 旅行如果我从 3->4(of module2) 我想完成活动 1,2,3(of module1)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:36:59.897

您可以使用标志清除堆栈中的所有其他活动

或清除历史记录的标志，应清除历史记录中的活动

在您开始活动之前，这可能是您意图中的标志`FLAG_ACTIVITY_CLEAR_TOP`

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

# javascript - 后继者

> ID：12865901
> 
> 赞同：0
> 
> 时间：2012-10-12T19:35:08.763
> 
> 标签：javascript, underscore.js

我最近在看一些 JavaScript 并遇到了以下例程。谁能向我解释它是如何工作的？

```
function groupConsecutive(numbers, successor) {
successor || ( successor = function(n) { return n + 1; });
var groups = [];
return _.each(numbers, function(number) {
    if (groups.length === 0) {
        groups.push([number]);
    } else { 
        successor.call(this, _.last(_.last(groups))) === number ? _.last(groups).push(number) : groups.push([number]);
    }
}, this), groups;
} 
```

具体来说，我试图理解这`successor || {`一点。如果我在这里使用“use strict”，它会引发“预期分配或函数调用，而是看到一个表达式”错误，所以我相信它应该是因为在调用函数之前从未定义过继任者。因此，对于我的思维方式，每当例程启动时，后继函数是未定义的。此例程使用 underscore.js 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:40:51.330

该表达式使用运算符的副作用`||`。由于运算符使用短路评估，因此仅当第一个操作数评估为假时才评估第二个操作数。

所以，这一行：

```
successor || ( successor = function(n) { return n + 1; }); 
```

做同样的事情：

```
if (!successor) {
  successor = function(n) { return n + 1; };
} 
```

严格模式在抛出错误方面做得很好，因为该行包含一个被评估但结果被丢弃的表达式。通常这意味着你忘记对结果做一些事情。

如果您使用这种形式，您可以`||`在严格模式下使用运算符：

```
successor = successor || function(n) { return n + 1; }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:40:32.203

你问的那条线，

```
successor || ( successor = function(n) { return n + 1; }); 
```

是一种较短的写作方式：

```
if( successor === undefined ) {
    successor = function(n) { return n + 1; };
} 
```

或者：

```
successor = ( successor ? successor : function(n) { return n + 1; } ); 
```

# c# - 创建具有 500 个表的 EntityFramework 5 模型

> ID：12865903
> 
> 赞同：0
> 
> 时间：2012-10-12T19:35:15.087
> 
> 标签：c#, asp.net, entity-framework-5

我对 EntityFramework 相对较新，并且被要求探索使用其中包含 500 多个表的模型与使用多个表拆分的模型对性能的影响。我已经读过使用多个模型是首选，但是为了测试性能并证明这个概念，我需要能够创建巨大的模型。我试图更新 .edmx 文件，但只能添加 ~275 个表。有谁知道允许添加更多功能的配置设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:23:55.253

不建议在使用 .edmx 文件时使用那么多实体。使用 Code First 方法您将获得更好的性能（即使您有一个现有的数据库，您仍然可以使用代码优先）。

如果您有那么多表，您还需要预渲染实体视图。

[http://msdn.microsoft.com/en-us/library/bb896240.aspx](http://msdn.microsoft.com/en-us/library/bb896240.aspx)

# php - php - xml - 随机过滤并存储订单

> ID：12865906
> 
> 赞同：2
> 
> 时间：2012-10-12T19:35:27.940
> 
> 标签：php, xml

PHP：我得到了 20 篇文章的 XML 提要，我随机挑选了 3 篇文章并以相同的格式打印 xml。随机选择的文章应该每天随机变化，而不是每次刷新。

所以例如：art1，art2，art3，art......art20 它应该显示：art4，art2，art 19（随机），但它应该与同一篇文章一整天 - (10/12/12)明天应该是 art1,art20,art13 （另一个随机集）

```
<?php
// Load our XML document
$doc = new DOMDocument();
$doc->load('feed.xml');

// Create an XPath object and register our namespaces so we can
// find the nodes that we want    
$xpath = new DOMXPath($doc);
$xpath->registerNamespace('p', 'http://purl.org/dc/elements/1.1/');

// Random generated xml should go here

// Write our updated XML back to a new file
$doc->save('feedout.xml');

?> 
```

由于存储文章订单需要服务器文件存储，我可以将其推回。如何随机化文章

```
for ($i = 0; $i < $nodes->3; $i++) {
$node = $nodes->item($i);} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:40:51.617

只需使用日期名称保存文件然后检查该日期不存在怎么样

```
// Write our updated XML back to a new file
        if( !file_exists( $date . '_feedout.xml' ) )
            $doc->save( $date . '_feedout.xml' ); 
```

或者

```
 // Write our updated XML back to a new file
            if( date( "Y/m/d", filemtime( 'feedout.xml' ) ) != $date )
                $doc->save( 'feedout.xml' ); 
```

# java - 在我的 groovy 脚本中使用 jenkins 颠覆凭证

> ID：12865908
> 
> 赞同：2
> 
> 时间：2012-10-12T19:35:44.080
> 
> 标签：java, groovy, jenkins

作为构建过程的一部分，我需要在更改文件后签入文件。我可以使用 groovy 脚本来做到这一点，但我必须将用户名密码放在脚本中。如果可能的话，我想尽量避免它。有没有办法在我的 groovy 脚本中使用已经存储在 Jenkins*源代码管理部分中的凭据？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T00:17:15.237

据我所知，没有办法做到这一点，但是您可以使用带有 SVN 命令行客户端的批处理或 shell 脚本来完成基本相同的事情。

您必须在所有从属设备上手动执行一次签出或提交，但是一旦您执行此操作，凭据将被缓存在该机器上，您可以通过批处理或 shell 命令在您的作业中使用它们，而无需用户或密码。

这并不理想，但它确实完成了工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T17:54:52.323

这个插件应该可以工作。

[https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Binding+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Credentials+Binding+Plugin)

它允许您从 jenkins 中提取凭据并将它们公开为环境变量。

从那里你可以在你的 groovy 脚本中访问它们：

```
def env = System.getenv() 
```

# android - 清除活动堆栈并从服务android启动新活动

> ID：12865910
> 
> 赞同：2
> 
> 时间：2012-10-12T19:35:46.660
> 
> 标签：android, android-activity, android-service

我的 Android 应用程序包含许多活动，每个活动代表一个菜单：

*   活动 A（主活动和一级菜单）
*   活动 B（二级菜单）
*   活动 C（第三个也是最后一个菜单）

我正在监视用户在服务中的操作。当事件（由服务检测到）发生时，我想关闭所有活动并重新启动活动 A。我在下面编写的代码仅适用于 Activity，而不适用于 Service：

```
Intent myIntent = new Intent();
myIntent.setClassName("main.activity", "ActivityA");
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|
                  Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(myIntent); 
```

我怎样才能在服务中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:51:05.987

那这个呢：

```
Intent myIntent = new Intent();
myIntent.setClassName("main.activity", "ActivityA");
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|
              Intent.FLAG_ACTIVITY_SINGLE_TOP|
              Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(myIntent); 
```

# django - Django CSS 和静态媒体未加载

> ID：12865914
> 
> 赞同：1
> 
> 时间：2012-10-12T19:36:40.837
> 
> 标签：django, django-templates

所以在过去的一个小时里，我一直在碰壁，似乎无法弄清楚为什么在我的模板被渲染时没有静态媒体（CSS、图像、JS 等）。有人可以帮我找出我需要进行调整的原因吗？以下是来自 Settings.py、Index.html 和样式表的片段，如果需要更多信息，请告诉我。

我的静态文件位于以下目录中：/djangoproject/website/static

```
Settings.py    -  Located /djangoproject/djangoprojectname/
STATIC_ROOT = os.path.normpath(os.path.join(PROJECT_ROOT,
"/static/"))

STATIC_URL = '../website/static/' 
```

这是我的 index.html 中的一个片段，它应该使用 {{ STATIC_URL }} 调用 css 样式表

```
Index.html  - Location /djangoproject/website/templates/  
<link rel="stylesheet" href="{{ STATIC_URL }}css/style.css"> 
```

CSS 样式表的位置

```
style.css - Location /djangoproject/website/static/css/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:14:57.320

来自 Django 文档：

> 如果 {{ STATIC_URL }} 在您的模板中不起作用，您可能在渲染模板时没有使用 RequestContext。
> 
> 作为一个简短的复习，上下文处理器将变量添加到每个模板的上下文中。但是，上下文处理器要求您在呈现模板时使用 RequestContext。如果您使用的是通用视图，这会自动发生，但在手工编写的视图中，您需要显式使用 RequestContext 要查看其工作原理并阅读更多详细信息，请查看[Subclassing Context:RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:00:55.557

在我看来，你正在设置`STATIC_URL`一个路径，当它应该设置为一个 URL 时。您需要将其设置为包含您的 css 文件的文件夹的网址，例如：

```
STATIC_URL = 'http://mydomain.com/static_files/' 
```

尝试通过在浏览器中输入您希望它出现的地址来在线查找您的 CSS 文件。以这种方式找到 CSS 文件后，只需复制将您带到那里的根 URL。

# java - javax.xml.ws.Service 通过 SSL 使用 SOAP 服务

> ID：12865915
> 
> 赞同：1
> 
> 时间：2012-10-12T19:36:46.900
> 
> 标签：java, soap, ssl, jax-ws

我想通过 HTTPS 使用 SOAP 服务。我已经写了一个客户来做到这一点。我没有使用自动类生成，因为目标服务在多个系统上运行，因此服务 URL 在运行时会发生变化。

这是使用 JAX-WS 的实现：

```
public class SAPClient implements Callable<...> {

private Service service = null;
private SOAPMessage response = null;
private boolean submitted = false;
private boolean successfull = false;
private QName serviceName;
private QName portName;
private SAPResult result = new SAPResult();
private Dispatch<SOAPMessage> dispatch = null;
private SOAPBody resBody = null;
private SapConnector connector;

public SAPClient(EricAgent agent, SapConnector connector) {
    this.connector = connector;
    serviceName = new QName(connector.getUrl(), Environment.SAP_CLIENT_SERVICE_NAME);
    portName = new QName(connector.getUrl(), Environment.SAP_CLIENT_PORT);
    this.service = Service.create(serviceName);
    service.addPort(portName, SOAPBinding.SOAP11HTTP_BINDING, connector.getUrl());
    this.successfull = false;
}

(...)

public synchronized void invoke() throws SOAPException {
    try {
        dispatch = service.createDispatch(portName, SOAPMessage.class, Service.Mode.MESSAGE);

        MessageFactory mf = MessageFactory.newInstance(SOAPConstants.SOAP_1_1_PROTOCOL);
        SOAPMessage message = mf.createMessage();
        SOAPPart part = message.getSOAPPart();
        SOAPEnvelope env = part.getEnvelope();
        SOAPBody body = env.getBody();

        SOAPElement operation = body.addChildElement(
                Environment.SAP_CLIENT_OPERATION_NAME,
                Environment.SAP_CLIENT_TARGET_NAMESPACE.getPrefix(),
                Environment.SAP_CLIENT_TARGET_NAMESPACE.getURI());

        // Add ticket
        SOAPElement ticketValue = operation.addChildElement("ITicket");
        ticketValue.addTextNode(...);

        // Add "Informationsprotokoll"
        String resultString = buildEricResultString(agent);
        SOAPElement xmlValue = operation.addChildElement("IXml");
        xmlValue.addTextNode(resultString);
        message.saveChanges();

        Response<SOAPMessage> sapResponse = dispatch.invokeAsync(message);

        long waitingTime = 0;

        while (true) {
            if (waitingTime > Environment.SAP_CLIENT_TIME_OUT) {
                //... handle timeout
            }

            if (sapResponse.getContext() != null) {
                Environment.LOGGER.debug("got response");
                response = sapResponse.get();
                submitted = true;
                successfull = result.returnCode.equals("0");

                //...

                break;
            }

            wait(1000);
            waitingTime += 1000;
        }
    } catch (Throwable ex) {
        Environment.LOGGER.error(null, ex);
        this.submitted = false;
        this.successfull = false;
    }
}

} 
```

我现在想通过 SSL 使用这个服务。你能解释一下我是如何告诉`Service`班级使用特定证书的吗？例如，我如何通过密钥库...我四处搜索并没有找到令人满意的结果。提前致谢！

**更新 1：**

通过增加：

```
 System.setProperty("javax.net.ssl.keyStore", certPath);
    System.setProperty("javax.net.ssl.keyStorePassword", certPass); 
```

我可以让 SSL 工作 - 感谢 zuxqoj！

输出看起来像这样，连接超时：

```
keyStore type is : jks
keyStore provider is : 
init keystore
init keymanager of type SunX509
trustStore is: ***
trustStore type is : jks
trustStore provider is : 
init truststore
adding as trusted cert:
  Subject: CN=***, OU=I0020498236, OU=SAP Web AS, O=SAP Trust Community, C=DE
  Issuer:  CN=***, OU=I0020498236, OU=SAP Web AS, O=SAP Trust Community, C=DE
  Algorithm: RSA; Serial number: 0x20120718050810
  Valid from Wed Jul 18 07:08:10 CEST 2012 until Fri Jan 01 01:00:01 CET 2038

trigger seeding of SecureRandom
done seeding SecureRandom
Ignoring unavailable cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
Ignoring unavailable cipher suite: TLS_DHE_DSS_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
Ignoring unsupported cipher suite: TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unsupported cipher suite: TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
Ignoring unavailable cipher suite: TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
Ignoring unavailable cipher suite: TLS_RSA_WITH_AES_256_CBC_SHA
Ignoring unsupported cipher suite: TLS_RSA_WITH_AES_128_CBC_SHA256 
```

为了通过超时，我必须将此属性传递给 JVM，并且 http(s) 请求通过：

```
-Djava.net.preferIPv4Stack=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:46:42.650

在 SOAP 调用之前将此添加到您的代码中

```
System.setProperty("javax.net.ssl.keyStore",certificatePath);
System.setProperty("javax.net.ssl.keyStorePassword", certificatePassword));
System.setProperty("javax.net.ssl.keyStoreType", "JKS"); 
```

您可以从服务器 url 下载 .cer 证书并使用命令将其转换为 jks

```
keytool -importcert -file certificate.cer -keystore keystore.jks -alias "Alias" 
```

现在您需要与每个目标服务器相对应的证书，并且在您的系统中某处您需要维护服务器 url 和证书之间的映射

# django - 在不重新启动服务器的情况下重新加载 django url

> ID：12865916
> 
> 赞同：1
> 
> 时间：2012-10-12T19:36:49.983
> 
> 标签：django, url, caching, urlconf

为什么？我想要路径的第一级有多个模型:)

使用：Django 1.4.1

代码设置网址：

```
PAGE_SLUGS = '|'.join(Page.objects.values_list('slug', flat=True))
BRAND_SLUGS = ... same concept
(r'^(?P<brand_slug>%s)/$' % BRAND_SLUGS, 'novomore.apps.catalog.views.product_showcase_list'),

url(r'^%s/$' % PAGE_SLUGS, 'prefab.apps.pages.views.page_detail', name='page'), 
```

在模型Page的save方法中：

```
if self.pk is None:
    clear_url_caches() 
```

我不想对每个请求都运行查询，所以这就是我使用这种方法的原因，当我添加一个实例时，需要更新 PAGE_SLUGS。

clear_url_caches() 似乎不起作用

有什么建议么？

这不能解决问题：

```
if settings.ROOT_URLCONF in sys.modules:
    reload(sys.modules[settings.ROOT_URLCONF])
    reload(importlib.import_module(settings.ROOT_URLCONF)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:58:29.687

From [How to reload Django's URL config](http://codeinthehole.com/writing/how-to-reload-djangos-url-config/):

```
import sys
from django.conf import settings

def reload_urlconf(self):
    if settings.ROOT_URLCONF in sys.modules:
        reload(sys.modules[settings.ROOT_URLCONF])
    return import_module(settings.ROOT_URLCONF) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:35:28.323

我不认为你试图做的是一个好主意。为什么不在 URL 正则表达式中简单地允许任何 slug 模式，但如果找不到有`Page`问题的则返回 404？那将具有相同的效果并且要简单得多。

```
url(r'^(?P<slug>\w+)/$', 'prefab.apps.pages.views.page_detail', name='page'), 
```

那么您的视图代码可以执行类似的操作

```
from django import shortcuts

def page_detail(request, slug):
    page = shortcuts.get_object_or_404(Page, slug=slug)
    ... 
```

# ruby-on-rails - 获得红宝石的价值

> ID：12865919
> 
> 赞同：2
> 
> 时间：2012-10-12T19:37:01.023
> 
> 标签：ruby-on-rails, ruby

在红宝石中，我有

```
res = [[0, :product, "client"], [0, :os, "windows"], [0, :architecture, "32rs"]] 
```

我想获得操作系统的价值。我可以通过 res[1][2] 来做到这一点，但我不想依赖索引，因为它可以改变。我所拥有的是关键，即：os，那么找到它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T19:43:16.650

假设您无法更改数据的结构方式，您可以执行以下操作：

```
res.select{|h| h.include?(:os)}.map(&:last) 
```

但在我看来，您的数据最好用哈希表示。

```
res_hash = res.each_with_object({}) do |value, memo| 
  memo[value[1]] = value[2]
end
# => {:product=>"client", :os=>"windows", :architecture=>"32rs"} 
```

然后您可以像这样访问离散数据属性：

```
res_hash[:os]
# => "windows" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T19:48:49.860

```
hash = Hash[res.map{ |a| a[1..-1] }]
hash[:os] # windows 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:59:59.550

虽然@pje 是在您无法更改数据的假设下回答的，但我将详细说明他在哈希中构造数据的建议：

```
res = [ [0, product: "client"],
        [0, os: "windows"],
        [0, architecture: "32rs"] ] 
```

逗号存在和冒号位置的微小变化会导致 Ruby 编译器将 [] 表达式解析为其最后一个元素的哈希值：

```
[ [0, {product: "client}], [0, {os: "windows"}], [0, architecture: "32rs"] ] 
```

然后你可以轻松地解决你需要的东西

```
res[1][1][:os] 
```

如果您担心二级数组的顺序会发生变化，您应该更深入地重构数据，例如：

```
res = { product: [ 0, "client" ], os: [ 0, "windows" ], architecture: [ 0, "32rs" ] ] 
```

并以这种方式解决它。

# python - 列表和字符串和循环

> ID：12865921
> 
> 赞同：-5
> 
> 时间：2012-10-12T19:37:06.323
> 
> 标签：python, python-3.x

编写一个函数，要求用户选择一个神秘单词的字母。用户猜错超过 4 次会导致计算机显示“游戏结束”。超过 4 次正确猜测会导致计算机说“好的，现在尝试猜测这个词。” 如果猜对了，就会说“你赢了”。</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T10:29:23.857

您可能能够执行以下某些步骤，没有冒犯。多做一些小步骤。了解如何将较大的问题分解为较小的问题。想象一下，如果没有计算机，您将如何做到这一点——只需与您的朋友一起，使用纸和铅笔：

*   编写一个`print(...)`命令说*Hello*，并将其存储到`guess.py`文件中。
*   了解如何启动 Python 程序。
*   `game`围绕上面写一个函数`print`（即前面多行，加上`print`.
*   在函数定义下面添加调用函数。
*   再次启动`guess.py`（即相同的输出，不同的实现）。
*   添加从键盘读取输入（将其`input('prompt:')`存储到`x`变量中，然后打印变量。
*   启动程序。
*   将变量添加`playing`到函数的开头并将其初始化为`True`.
*   在下面添加`while playing:`循环并缩进`input`and`print`命令以使它们在循环中。
*   启动程序，使用 Ctrl+C 退出。
*   更改`print(x)`以`print(repr(x))`查看您真正从`input`.
*   发射。
*   添加`x = x.rstrip()`就在该`input`行下方和上方`print`。
*   发射。
*   将以下测试添加到 while 循环体的末尾。

.

```
if x == '': 
    playing = False 
```

*   如果要退出程序，请启动并按 Enter 键而不输入任何字符。

（在第一次试验后继续）

想想你将如何生成一个神奇的单词（使用纸、铅笔和一些随机的方法来选择字符）。考虑如何存储单词。你如何检查角色是否在里面？您将如何检查猜测尝试的次数？使用小步骤增强程序，使其始终有效。当它达到你的预期时停止编程。

# android - Android 动态壁纸设置按钮未将我发送到设置

> ID：12865924
> 
> 赞同：0
> 
> 时间：2012-10-12T19:37:23.077
> 
> 标签：android, live-wallpaper

所以我设法让设置按钮出现在我的动态壁纸预览中。我遇到的唯一问题是它没有让我参加我喜欢的活动。（我已经记录了它，但我从未参加过活动）。

我有一种感觉，我一定在某个地方的 XML 中犯了一个错误……但我似乎无法发现它。

这是我的壁纸.xml

```
<?xml version="1.0" encoding="utf-8"?>
   <wallpaper xmlns:android="http://schemas.android.com/apk/res/android"
   android:thumbnail="@drawable/icon"
   android:description="@string/wallpaper_description"
   android:settingsActivity="com.company.app.package.LiveWallpaperPrefs">
</wallpaper> 
```

这是我清单中的相关片段。

```
<service
    android:name="com.company.app.package.LiveWallpaperService"
    android:enabled="true"
    android:icon="@drawable/icon"
    android:label="app"
    android:permission="android.permission.BIND_WALLPAPER" >
    <intent-filter android:priority="1" >
        <action android:name="android.service.wallpaper.WallpaperService" />
    </intent-filter>

    <meta-data
        android:name="android.service.wallpaper"
        android:resource="@xml/wallpaper" />
</service>

<activity android:name="com.company.app.package.LiveWallpaperPrefs"/> 
```

有人知道为什么当我按下设置时它没有将我发送到我的 LiveWallpaperPrefs 吗？它实际上给了我一个错误“不幸的是，动态壁纸选择器已停止。”

谢谢！

* * *

实际上想通了...我没有授予系统权限以从我的应用程序外部输入我的应用程序的该设置部分...这是修复我的代码的原因。

在清单中（替换旧的 LiveWallpaperPrefs）

```
<activity android:name="com.company.app.package.LiveWallpaperPrefs">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T23:12:09.127

您可以像这样导出 LiveWallpaperPrefs：

```
<activity
    android:name="com.company.app.package.LiveWallpaperPrefs"
    android:exported="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T16:09:27.927

我意识到这个问题有点老了，但我遇到了类似的问题。我在网上找到的建议*似乎都*没有奏效。无论我做什么，点击按钮时设置都不会显示。

浪费了大约 3 个小时后，我意识到**它正在工作**，但由于某种原因，我不得不从设备中完全删除该应用程序并重新安装它。

通常，清理项目并将其重新上传到设备实际上会更改应用程序。但由于某种原因*，该更改在删除并重新安装应用程序之前不会生效*。

希望这对将来的人有所帮助！

# javascript - 将画布样式设置为可变变量

> ID：12865925
> 
> 赞同：0
> 
> 时间：2012-10-12T19:37:31.263
> 
> 标签：javascript, canvas

为什么这行得通，

```
var color = Math.sin( time ) * 128;
color = 128;
context.fillStyle = "rgb(" + color + ", " + color + ", " + color + ")"; 
```

但这不？

```
var color = Math.sin( time ) * 128;
color += 128;
context.fillStyle = "rgb(" + color + ", " + color + ", " + color + ")"; 
```

由于某种原因，变量一旦变为动态就会停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:08:43.133

想通了。我正在发送一个浮动值，其中画布正在寻找一个整数。

它应该是 Math.floor(Math.sin( time ) * 128);

# java - 如何在java中将相同的记录插入到两个不同的表中？

> ID：12865926
> 
> 赞同：0
> 
> 时间：2012-10-12T19:37:34.170
> 
> 标签：java, mysql, database, jtable

如何将记录插入两个不同的表中？我做了两个sql语句，它不起作用。

```
private void cmdsubmitActionPerformed(java.awt.event.ActionEvent evt) {                                          
        // TODO add your handling code here:
        try {
            String sql = "Insert into customer (Customer_ID,First_Name,Last_Name,Birthdate,Gender,Occupation,Address,Email,Contact,Status,Income,Amount,Term,Interest,Date_Applied,Purpose,Other) values (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
            pst = conn.prepareStatement(sql);
            pst.setString(1, txtID.getText());
            pst.setString(2, txtfname.getText());
            pst.setString(3, txtlname.getText());
            pst.setString(4,((JTextField)birthdate.getDateEditor().getUiComponent()).getText());
            String gender = cmbgender.getSelectedItem().toString();
            pst.setString(5, gender);
            pst.setString(6, txtoccupation.getText());
            pst.setString(7, txtaddress.getText());
            pst.setString(8, txtemailadd.getText());
            pst.setString(9, txtcontact.getText());
            String status = cmbstatus.getSelectedItem().toString();
            pst.setString(10, status);
            String income = cmbincome.getSelectedItem().toString();
            pst.setString(11,income);
            pst.setString(12, txtamount.getText());
            String period = cmbperiod.getSelectedItem().toString();
            pst.setString(13, txtloan.getText() + " " + period);
            pst.setString(14, txtinterest.getText());
            pst.setString(15, ((JTextField)datechooser.getDateEditor().getUiComponent()).getText());
            String purpose = cmbpurpose.getSelectedItem().toString();
            pst.setString(16, purpose);
            pst.setString(17, txtother.getText());

            Double balance = Double.parseDouble(txtamount.getText()) * Double.parseDouble(txtinterest.getText());
            String s = "Insert into payments (Customer_ID,Customer_Name,Amount,Interest,To_Pay) values (?,?,?,?,?)";
            pst = conn.prepareStatement(s);
            pst.setString(1, txtID.getText());
            pst.setString(2, txtfname.getText()+","+txtlname.getText());
            pst.setString(3, txtamount.getText());
            pst.setString(4, txtinterest.getText());
            pst.setString(5, balance.toString());

            pst.execute();
            JOptionPane.showMessageDialog(null, "Record Save");

            Menu menu = new Menu();
            this.setVisible(false);
            menu.setVisible(true);

        }
        catch (Exception e) {
            JOptionPane.showMessageDialog(null, e);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:40:24.700

问题似乎是您`pst.execute()`在致电此行之前没有致电：
`pst = conn.prepareStatement(s);`

这是覆盖你以前的`pst`变量；创建一个新的`PreparedStatement`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:40:54.950

我不完全确定那个 API，但似乎你有一个执行两个语句。此外，如果大部分代码完全相同，您应该考虑创建一个函数。需要维护的地方更少

# powershell - 使用 PowerShell 获取分区名称

> ID：12865927
> 
> 赞同：5
> 
> 时间：2012-10-12T19:37:35.967
> 
> 标签：powershell, drive, removable-storage

我有一个我格式化的闪存驱动器，因此驱动器上的卷标是“PHILIP”。

![在此处输入图像描述](../Images/67acbf351268c5e0439d4526edd103bd.png)

我`Get-PSDrive H -PSProvider FileSystem`用来确定驱动器是否已插入，但是我真的很想确定驱动器是否通过卷标插入，即`Get-PSDrive -VolumeLabel PHILIP -PSProvider FileSystem`. 当然`VolumeLabel`参数不存在所以这不起作用。

有没有办法按卷名列出计算机中的驱动器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T19:42:13.353

You can use WMI, I guess:

```
Get-WMIObject Win32_Volume | ? { $_.Label -eq 'PHILIP' } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T20:29:09.763

您也可以使用 .NET 框架中的[DriveInfo](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)类：

```
PS> [System.IO.DriveInfo]::GetDrives()
Name               : C:\
DriveType          : Fixed
DriveFormat        : NTFS
IsReady            : True
AvailableFreeSpace : 217269202944
TotalFreeSpace     : 217269202944
TotalSize          : 320070479872
RootDirectory      : C:\
VolumeLabel        : OS 
```

然后，您可以将其通过管道传输到`Where-Object`cmdlet（两者`?`都是`Where`别名），以将其过滤到您正在寻找的卷：

```
PS> [System.IO.DriveInfo]::GetDrives() | ? {$_.VolumeLabel -eq "PHILIP" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-20T12:49:25.160

我像 Joey 建议的那样使用 Get-WMIObject。要将 wmi 结果链接到例如 get-partition 我使用标题参数。在这个例子中，我将卷 Philip 的分区号​​设置为 D

> $datavolume=Get-WMIObject Win32_Volume | ? { $_.Label -eq 'PHILIP' }
> 
> $datavolume=$datavolume.Caption
> 
> 获取分区-DiskNumber 0 | 其中 {$_.accesspaths -like " *$* datavolume "} | 设置分区-NewDriveLetter D

# .net - 在使用 ILMerge/Costura 组合程序集后，有什么方法可以让 VS（2010）接受 PDB？

> ID：12865931
> 
> 赞同：5
> 
> 时间：2012-10-12T19:37:59.667
> 
> 标签：.net, visual-studio-2010, localization, ilmerge, fody-costura

这个问题的相关性超出了我自己的情况，因为任何拥有本地化应用程序并且必须交付独立 EXE 的人都会遇到这个问题——他们会想要使用 ILMerge（或 Costura 或一些自制解决方案）来放置本地化 DLL（或任何其他程序集） ) 到他们的 EXE 中——但是一旦他们这样做了，他们就不能再调试他们的代码了。VS 调试器将拒绝接受为原始 EXE 生成的原始 PDB 文件，可能是因为 ILMerge 步骤更新校验和或更改 GUID。

我想知道是否有任何方法可以解决这个问题.. 可能像一些鲜为人知的 ILMerge 选项？在我看来，这是一种非常常见且不必要的调试能力损失。

我相信在本地化之后调试此类应用程序的唯一其他方法是维护一个使用 DLL un-ILMerged 的​​并行构建选项，这很好，除非您碰巧想要调试本地化代码本身（例如，我）。 .那你真的不走运了。谁能想到其他选择？

我也尝试使用 Costura，但由于本地化 DLL 都包含同名的资源（并且与主资源 AppName.resource 相同），因此您只能将一个这样的 DLL 添加到引用中：不允许后续的 DLL。有什么方法可以让 Costura 工作吗？（如果它可以工作，可能不会出现 PDB 问题，因为该组合是 Visual Studio 构建的一部分......？）

编辑：我正在寻找导致 PDB/EXE 匹配的想法。我意识到您可以在十六进制编辑器中破解 pdb。不过，该问题专门询问了如何使系统按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T02:08:57.540

ILMerge 还将生成合并的 pdb。您是否关闭了此选项，或者合并的 pdb 也不适合您？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:55:53.560

PDB 文件和 EXE 都有一个 GUID。如果 GUID 不匹配，则调试器将拒绝加载 PDB 文件。如果您手动编辑两个文件之一以使 GUID 匹配，则将加载 PDB 文件。这可能会导致反汇编中的符号信息不正确。

# java - Java freebase 查询

> ID：12865934
> 
> 赞同：1
> 
> 时间：2012-10-12T19:38:30.787
> 
> 标签：java, url, freebase

我正在尝试使用 Java 读取 freebase 查询的结果：

```
URL url = null;
String inputLine;

try{
  url = new URL("https://www.googleapis.com/freebase/v1/mqlread?query={\"id\":\"/en/madonna\", \"name\": null, \"type\":\"/base/popstra/celebrity\",\"/base/popstra/celebrity/friendship\": [{\"participant\": [] }] }");

} catch (MalformedURLException e) {
  e.printStackTrace();
}
BufferedReader in;
try {
  URLConnection con = url.openConnection();
  con.setReadTimeout( 1000 ); //1 second
  in = new BufferedReader(new InputStreamReader(con.getInputStream()));
  while ((inputLine = in.readLine()) != null) {
  System.out.println(inputLine);
}
in.close();

} catch (IOException e) {
  e.printStackTrace();
} 
```

但是，我收到以下错误：

```
java.io.IOException: Server returned HTTP response code: 400 for URL:     https://www.googleapis.com/freebase/v1/mqlread?query={ "id":"/en/madonna", "name": null, "type": "/base/popstra/celebrity","/base/popstra/celebrity/friendship": [{ "participant": [] }] }

at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
at FreebaseCelebrities.main(FreebaseCelebrities.java:66) 
```

我之前已经这样做了（有其他请求）并且它有效，那么这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:06:30.570

如果有的话！！！

api没有正确解析emply空格使用这个：

```
 url = new URL("https://www.googleapis.com/freebase/v1/mqlread?query={\"id\":\"/en/madonna\", \"name\": null, \"type\":\"/base/popstra/celebrity\",\"/base/popstra/celebrity/friendship\": [{\"participant\": [] }] }".replace(" ", "")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:21:12.070

创建 URL 时尝试以下代码：

```
try {
  String query = "{\"id\":\"/en/madonna\", \"name\": null, \"type\":\"/base/popstra/celebrity\",\"/base/popstra/celebrity/friendship\": [{\"participant\": [] }] }";
  url = new URL("https://www.googleapis.com/freebase/v1/mqlread?query="+URLEncoder.encode(query, "UTF-8"));
} catch (UnsupportedEncodingException e) {
  e.printStackTrace();
} catch (MalformedURLException e) {
  e.printStackTrace();
} 
```

您需要对查询字符串参数进行 URL 编码。

# mongodb - 如何在 MongoDB 中编写适用于查找和聚合函数的 fieldValue.contains("someString") 查询

> ID：12865935
> 
> 赞同：4
> 
> 时间：2012-10-12T19:38:34.320
> 
> 标签：mongodb

我需要在 MongoDB 查询中实现 fieldValue.contains("someString") 搜索吗？

我找到的解决方案是

```
db.main.find(  { $where: "this.content.indexOf('someString') != -1" } ); 
```

它适用于查找功能。

但是当我在聚合函数中做同样的事情时

```
db.foo.aggregate(
    {
        $match: 
                { $where: "this.content.indexOf('someString') != -1" }
    },
    {
        $project :
                {
                    _id : 1,
                    words : 1
                }
    },
    {
        $unwind : "$words"
    },
    {
        $group : {
                    _id : { tags : "$words" },
                    count : { $sum : 1 }
                }
    },
    {
        $sort: {count:-1}
    },
    {
        $limit : 5
    }
); 
```

我得到了这个结果：

```
{
        "errmsg" : "exception: $where is not allowed inside of a $match aggregation expression",
        "code" : 16395,
        "ok" : 0
} 
```

问题：如何在 MongoDB 中编写适用于查找和聚合函数的 fieldValue.contains("someString") 查询。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T19:56:56.510

You can use a [regular expression](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-RegularExpressions) for that:

```
$match: { content: /someString/ } 
```

You should use a regular expression instead of a `$where` for the `find` case, too, as it's more efficient.

```
db.main.find( { content: /someString/ } ); 
```

# c# - c#组件之间的c#数据绑定？

> ID：12865937
> 
> 赞同：0
> 
> 时间：2012-10-12T19:38:43.400
> 
> 标签：c#, .net, user-interface, data-binding

我们可以在 C# 中将 listofradiobuttons 与 listofstring 绑定吗？我们能否在 .net 组件（如单选按钮或 Richtextbox）之间执行数据绑定，因为我主要找到了关于组件和数据库之间数据绑定的数据绑定教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:48:09.843

是的，当然你可以绑定

```
Class MyAccount
{
public int Id{get;set;}
public string Name{get;set;}
}

List<MyAccount> li=new List<MyAccount>();
MyAccount m1=new MyAccount{
Id=1,
Name='abc'
};
MyAccount m2=new MyAccount{
Id=2,
Name='def'
};
li.add(m1);
li.add(m2);

DropDown.DataSource=li;
DropDown.DataTextField="Name";
DropDown.DataValueField="Id";
DropDown.DataBind(); 
```

首先用两个道具做了一个类。然后列出那个。在列表中添加项目。将列表的数据源属性分配给任何集合（如字典、hastable 等）或数据集。分配它的数据文本和数据值字段属性，不要忘记通过调用 DataBinde() 函数来绑定它。就这样。

# asp.net-mvc - 带有 IE 条件注释的 MVC4 捆绑/缩小

> ID：12865939
> 
> 赞同：13
> 
> 时间：2012-10-12T19:39:01.453
> 
> 标签：asp.net-mvc, asp.net-mvc-4, conditional-comments, asp.net-optimization, bundling-and-minification

我正在尝试使用 MVC4 的新“捆绑和缩小”。

对于 IE 条件注释，我仍然使用旧方法：`<!--[if lt IE 9]><link href=.../><![endif]-->`或者`<!--[if lt IE 9]>@Styles.Render("~/foo")<![endif]-->`，但我似乎没有得到自动调试/发布处理。

有没有内置的方法可以做到这一点？其他人如何做到这一点？

编辑：
能够`<noscript>`在渲染输出中包含标签（用于回退）也很棒。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T21:37:26.403

在我找到更好的方法之前，我制作了一个名为 的适配器类`Bundles`，它具有以下方法：

```
public static IHtmlString RenderStylesIe(string ie, params string[] paths) {
  var tag = string.Format("<!--[if {0}]>{1}<![endif]-->", ie, Styles.Render(paths));
  return new MvcHtmlString(tag);
} 
```

脚本也有类似的方法。视图这样称呼它们：

```
@Bundles.RenderStylesIe("lt IE 9", "~/Content/foo")
@Bundles.RenderScriptsIe("lte IE 7", "~/Scripts/bar") 
```

如果有更好的方法，我将不胜感激。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T21:30:10.633

即将发布的 1.1-alpha1 更新将支持使用 Scripts/Styles 助手进行您自己的标签格式化。

有一个新的 DefaultTagFormat 属性，默认设置为：

`"<script src="{0}"></script>"`

还有一个 RenderFormat 方法也接受标签格式。您应该能够使用这些更多地控制渲染。您尝试使用格式字符串执行的操作是否可行？

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-27T09:29:52.293

我在这里找到了一个替代方案：[https ://coderwall.com/p/5zqvkg](https://coderwall.com/p/5zqvkg)

这是一个偏好问题

（仍然喜欢上面的代码 - 它更干净，更容易阅读

```
@Bundles.RenderStylesIe("lt IE 9", "~/Content/foo")
@Bundles.RenderScriptsIe("lte IE 7", "~/Scripts/bar") 
```

)

# php - 使用 PHP 回显 jQuery 循环

> ID：12865940
> 
> 赞同：0
> 
> 时间：2012-10-12T19:39:05.483
> 
> 标签：php, jquery, post, loops, jquery-post

搜索了很长时间后，我决定在这里问一下，因为我发现的东西要么不起作用（或者我无法让它们起作用；）） - 要么要求我更改服务器上的东西，我想避免。

我希望下面的函数在每个结果之后显示输出，因此不必先加载该函数，这需要很长时间。正如您在下面看到的，我的想法是用 jQuery(1.8.2) 来尝试这个。

它不起作用，我根本无法让它工作。有一个更好的方法吗？我在某处犯了错误导致它不起作用吗？

如果您需要更多信息，请询问。

```
<?php
print_r($_POST);

if(isset($_POST['p']) && isset($_POST['domain']) && isset($_POST['option']))
{   error_reporting(0);
define('INCLUDE_CHECK',true);
require('admin/API/class_api.php');
require('admin/functions/core.inc.php');

    $dom = explode('.',$_POST['domain']);
    $dom = $dom[0];
    $ext = array('nl','be','eu','net','com','org','biz','info','tk','ws','gr','me','cc','in','gs','name','ch','co','tv','ru','bz','li','lu','pl','se','vg','cx','tl','im','sg','ms','sh','io','mu','fm','am','xxx','ag','sc','nf','md');

    if ($_POST['loop']==40)
     { print 'Laatste loop dus .. STOP : .'.$ext[41]; }
    else
     { print 'Loop: '.$_POST['loop'].' - zoek op : .'.$ext[$_POST['loop']];
       ?>
       <script>
        $.post('test.php', { p:'full', domain:dom, option:opt, loop:'<?php echo $_POST['loop']+1; ?>'},
        function(data){
          $('#domresults2').css('display','block').html(data);
          $('#domloading').css('display','none');
        });
       </script>
       <?php
     }

}
?>

//Start JS
<script>
$('#domsubmit.complete').click( function() {
  var dom = escape($('#domsearch').val());
  var opt = escape($('#option').val());

  $('#domresults2').css('display','none').html('');
  $('#domloading').css('display','inline');

  $.post('test.php', { p:'full', domain:dom, option:opt, loop:0},
     function(data){
       $('#domloading').css('display','none');
       $('#domresults2').css('display','block').html(data);
   });

return false;
});
</script>
//end JS 
```

////////////////////////

### 更新：解决了！

那么，出了什么问题？-> core.inc.php 中的 php 函数引用了一个与 jQuery 1.8.2 不兼容的库（'qTip2'）。感谢您的支持！

```
<?php
print_r($_POST);

if (isset($_POST['p']) && isset($_POST['domain']) && isset($_POST['option'])) {
error_reporting(0);
define('INCLUDE_CHECK', true);
require('admin/API/class_api.php');
require('admin/functions/core.inc.php');

$dom = explode('.', $_POST['domain']);
$dom = $dom[0];
$ext = array('nl','be','eu','net','com','org','biz','info','tk','ws','gr','me','cc','in','gs','name','ch','co','tv','ru','bz','li','lu','pl','se','vg','cx','tl','im','sg','ms','sh','io','mu','fm','am','xxx','ag','sc','nf','md');

$loop = $_POST['loop'];
DomCheck($_POST['domain'],$ext[$_POST['loop']]);

if ($loop != count($ext)) {
$loop++;?>
  <script type="text/javascript">
        var opt = '<?php echo $_POST['option']; ?>';
        var dom = '<?php echo $_POST['domain']; ?>';
        $.post('test.php', { p:'full', domain:dom, option:opt, loop:'<?php echo $loop; ?>'},
        function(data){
            $('#domresults2').css('display','block').append(data);
            <?php if ($loop < count($ext)) {
                      echo "$('#domloading').css('display','none');";
                  } ?>
        });
    </script>
<?php
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:44:46.043

One thing you need to understand is that PHP executes on the server and JavaScript (jQuery) executes on the client.

This means that by the time jQuery starts executing, PHP is **done**.

However, I don't see a loop anywhere in your code. I think this is more of what you wanted. You're not doing a "PHP loop using jQuery," you're outputting jQuery code in a PHP loop:

```
<?php
if (isset($_POST['p']) && isset($_POST['domain']) && isset($_POST['option'])) {
    error_reporting(0);
    define('INCLUDE_CHECK', true);
    require('admin/API/class_api.php');
    require('admin/functions/core.inc.php');

    $dom = explode('.', $_POST['domain']);
    $dom = $dom[0];
    $ext = array('nl','be','eu','net','com','org','biz','info','tk','ws','gr','me','cc','in','gs','name','ch','co','tv','ru','bz','li','lu','pl','se','vg','cx','tl','im','sg','ms','sh','io','mu','fm','am','xxx','ag','sc','nf','md');

    foreach ($_POST['loop'] as $loop) {
        if ($loop == 40) {
            print "Laatste loop dus .. STOP : .{$ext[41]}";
        } else {
            print "Loop: {$loop} - zoek op : .{$ext[$loop]}";
?>      <script>
            $.post('test.php', { p:'full', domain:dom, option:opt, loop:'<?php echo $loop; ?>'},
            function(data){
                $('#domresults2').css('display','block').html(data);
                $('#domloading').css('display','none');
            });
        </script>
<?php   }
    }
}
?> 
```

# arrays - 字符串数组作为哈希函数键？

> ID：12865942
> 
> 赞同：7
> 
> 时间：2012-10-12T19:39:14.257
> 
> 标签：arrays, string, function, hash, key

是否有可能在任何语言中（没关系）都有一个使用字符串数组作为键的哈希函数？

我的意思是这样的：

```
hash(["word1", "word2", ...]) = "element" 
```

而不是经典的：

```
hash("word") = "element" 
```

我需要这样的东西，因为我想用作键的每个单词都可以更改函数的输出元素。我有一个单词序列，我想要该序列的特定输出（顺序也可能会改变结果）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T20:06:57.180

当然。任何数据结构都可以被散列。您只需要提出一个严格的相等定义，然后确保 hash(A) == hash(B) if A == B。假设您的定义是 [s1, s2, ..., sm] == [t1, t2, ..., tn] 当且仅当 m == n 和 si == ti 对于 i = 1..m 和进一步的字符串 s == t 当且仅当 |s|==|t| s[i]==t[i] 表示 0<=i<|s|。您可以通过多种方式构建哈希：

*   连接列表中的所有字符串，并使用任何字符串散列函数对结果进行散列。
*   执行相同操作，添加逗号 (,) 等分隔符
*   单独散列每个字符串并对结果进行异或运算。
*   单独散列 eash 字符串，移动之前的散列值，并将新值异或到散列中。
*   无限更多的可能性...

严格的平等定义很重要。例如，如果列表中的顺序无关紧要，或者字符串比较不区分大小写，则哈希函数仍必须设计为确保 hash(A) == hash(B) 如果 A == B 。弄错这个会导致查找失败。

Java 是一种允许您为任何数据类型定义散列函数的语言。事实上，使用默认散列函数的字符串库列表可以作为键正常工作。

```
HashMap<ArrayList<String>, String> map = new HashMap<ArrayList<String>, String>();

ArrayList<String> key = new ArrayList<String>();
key.add("Hello");
key.add("World");

map.put(key, "It's me.");
// map now contains mapping ["Hello", "World"] -> "It's me." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T20:00:22.883

是的，这是可能的，但在大多数情况下，您必须定义自己的哈希函数，将数组转换为哈希键。例如，在 java 中，array.hashCode() 基于 Object.hashCode() 函数，该函数基于 Reference 本身而不是 Object 的内容。

如果您对构建在数组之上的散列函数的实现感兴趣，您还可以查看[java 中的 Arrays.deepHashCode() 函数。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#deepHashCode%28java.lang.Object%5B%5D%29)

# javascript - 在 jquery 移动应用程序中本地安全地存储用户密码

> ID：12865943
> 
> 赞同：7
> 
> 时间：2012-10-12T19:39:15.343
> 
> 标签：javascript, security, cordova, jquery-mobile

我需要使用 jquery 移动 api 访问需要基于每个用户进行 http 身份验证的 api。

我计划将该应用程序作为网站提供，并将其打包在 Cordova 中以用于各种设备。

如果我有一个登录表单，它捕获用户名和密码并将其存储为 javascript 变量，有没有办法公开这些数据？

如果是这样，处理存储用户身份验证详细信息的最佳选择是什么？如果我不需要的话，我不愿意建立一个中间服务器。

非常感谢。:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T04:16:38.467

我建议不要将用户名或密码存储在 localStorage 中，而是存储访问令牌。访问令牌可以经常更新和更改，它也不会透露用户是谁或他们的哈希密码是什么。

除了 iOS 钥匙串，或者如果您正在为非 iPhone 设备编写代码以增加安全性，您还可以：

*   在每次登录和每次使用应用程序时更改访问令牌
*   将设备 ID 存储在服务器数据库中（请参阅[http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#device.uuid](http://docs.phonegap.com/en/2.2.0/cordova_device_device.md.html#device.uuid)）
*   如果访问令牌或设备 ID 与数据库中存储的数据不匹配，则清除 localStorage 并请求新的登录

确保您没有将设备 ID 存储在 localStorage 中。

为了增加安全性，您还可以将用户的 IP 地址存储在数据库中并检查（服务器端）IP 地址是否匹配，但这可能太多了，因为用户每次连接到新位置的互联网时都必须登录或如果他们的 IP 地址发生变化。

将 IP 地址存储在服务器数据库中，然后检查它是否匹配（服务器端）可能是最安全的，因为是否有人掌握了 localStorage 数据并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T13:59:30.817

所以我知道你不控制你登录的后端？如果你这样做，我会更倾向于发送一次用户名/密码，然后存储一些访问令牌，以便你后续访问。

如果您不控制后端，那么您将无法存储用户名/密码。我会说，将它们设置在 localStorage 中是尽可能安全的（诚然，这不是很安全。再说一次，如果您的登录没有发生在 HTTPS 上，我会更担心密码在那里泄漏而不是从设备泄漏本身）。您可以使密码更难找到，而不是调用变量“用户名/密码”，在 javascript 中加密它们，混淆您的代码。但最终，只要正确访问设备，就可以毫不费力地检索它们。

打包为原生应用后，您有更多选择，例如 iOS 钥匙串：[http ://shazronatadobe.wordpress.com/2010/11/06/ios-keychain-plugin-for-phonegap/](http://shazronatadobe.wordpress.com/2010/11/06/ios-keychain-plugin-for-phonegap/)

# objective-c - 在 Objective-C 中混淆返回值

> ID：12865947
> 
> 赞同：0
> 
> 时间：2012-10-12T19:39:32.750
> 
> 标签：objective-c, ios

我正在编写一个应用程序，出于安全原因，我想混淆从静态方法返回的值。调用静态方法的结果`ClassA`应该是 a`BOOL`但我想让攻击者尽可能难以获得返回的真实值（即我不想返回 a `BOOL`，我想返回一些垃圾看起来是随机的，但在某种程度上是有意义的）。

```
// in ClassA
returnValue = [ClassB staticMethod];
BOOL actaulReturnValue = // some magic to de-obfuscate returnValue 
```

例如：返回 1024 位大部分是随机的垃圾，但在某处是一个有意义的数字（可能每次都有不同的位）。

另一个例子：返回 10 个左右看似随机的数字，但如果这 10 个数字出现在 pi 的前 1000 个数字中，那么实际值是`TRUE`（接受 10,000,000,000 误报率中的 1 个的事实）。

这是我能想到的两个例子，但我把它留给 stackoverflow 社区来帮助思考其他（可能更好）的方法。如果您还可以提供代码，则可以加分。

**编辑：**逆向工程越难越好。如果我可以运行 cycript 并确定游戏的秘密，那么游戏就结束了。
**编辑 2：**即使攻击者知道我是如何混淆返回值的，它仍然应该很难（如果不是不可能的话）找出真正的值（这也是我的第二个示例的问题）

**编辑 3：**我以对 iOS 应用程序进行渗透测试为生。我知道内存中的任何内容都可以读取，因为我每天都在为客户做这件事。我也不是要暗示混淆和安全是一回事。话虽如此，我正试图找出一种方法来防止攻击者修补单个 API 调用以始终返回 FALSE。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T20:59:42.227

我对你说实话：不要打扰。原因如下：

***在某些时候，您需要将未加密的值加载到内存中***

假设你设计了你的方法来混淆它的返回值——当你真正需要使用那个值时会发生什么？您对其进行混淆处理*并将其加载到内存中存在的变量中*。然后你的攻击者只需要检查那个内存位置，在越狱设备和一些额外的工具上是微不足道的。

你永远无法克服这个问题。做你想做的事绝对没有意义。你基本上注定要失败。如果您有兴趣让您的应用程序更安全，那么我发现[O'Reilly 出版的一本很棒的书非常有用。](http://shop.oreilly.com/product/0636920023234.do)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:53:20.110

例如，您可以对结果进行一些棘手的按位运算以获得一些位索引，并检查该索引处的位以查看它是否已设置。

在以下示例中：

*   然后给定 32 位的神秘结果，我计算神秘结果的第 2 和第 4 个字节的 XOR，然后再次将高 4 位与低 4 位进行异或。这给了我一个 4 位的结果，可以解释为`index`0 到 15 之间的值。
*   然后我使用这个索引来知道我需要在剩余的 2 个字节中检查哪个位：我连接第 3 个字节和第一个字节以获得一个 16 位字，并检查该`index`字的第 - 位以查看该位是否设置与否。

这是我测试的解码功能：

```
-(BOOL)decodeCrypticResult:(long)crypticResult
{
  u_int8_t* bytes = (u_int8_t*)&crypticResult;

  u_int8_t xor = bytes[1] ^ bytes[3];
  u_int8_t idx = ((xor>>4)&0xF) ^ (xor&0xF); // value in range [0..15]
  u_int16_t word = ((bytes[2]<<8) & 0xFF00) | bytes[0]; // bytes 2 and 0 concatenated into a 16-bit word
  BOOL res = (word >> idx) & 1; // check the idx-th bit of this word
  return res;
} 
```

要生成您的神秘结果以返回一个神秘的`YES`或`NO`从`staticMethod`您的库中返回，这很容易：

*   生成一个随机的 32 位数字
*   从这个随机数的表示中计算上面的位索引
*   在返回之前设置或取消设置（取决于`BOOL`您需要返回）随机数的第一个或第三个字节中的相应位

所以这给出了以下代码：

```
-(long)returnCrypticBoolValue:(BOOL)boolValue
{
  u_int32_t crypticResult = arc4random();
  u_int8_t* bytes = (u_int8_t*)&crypticResult;

  u_int8_t xor = bytes[1] ^ bytes[3];
  u_int8_t idx = ((xor>>4)&0xF) ^ (xor&0xF); // value in range [0..15]
  if (boolValue) {
    // set the idx-th bit of byte 2 or 0
    bytes[ (idx&8)?2:0 ] |=  (1 << (idx&7));
  } else {
    // unset the idx-th bit of byte 2 or 0
    bytes[ (idx&8)?2:0 ] &= ~(1 << (idx&7));
  }
  return crypticResult;
} 
```

# c++ - “int”数据类型是否被定义为一个类？

> ID：12865949
> 
> 赞同：0
> 
> 时间：2012-10-12T19:39:48.523
> 
> 标签：c++

我想知道“int”是否被定义为一个类，这意味着就像某个头文件中的某个地方它们是一个名为 int 的类

```
class int
{

} 
```

当我们声明一个变量时，会创建一个 int 类的实例吗？如果'int'是一个类，它存储在哪个文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:44:08.897

No; `int` is *not* a type of "class-type". It is a so-called "scalar" type.

To determine more generally whether a given object type `T` is of scalar, array, union or class type, you can `#include <type_traits>` and use `std::is_scalar<T>::value`, and similarly for the traits `is_array`, `is_union` and `is_class`.

(Note further that not all types are object types; there are also reference types and function types. You can use [`std::is_object`](http://en.cppreference.com/w/cpp/types/is_object) and `is_function` and `is_reference` to make that distincition first.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T19:41:21.347

`int` is not a class, its a native type.

When you declare an int:

```
int x; 
```

You do create an instance of `int`.

C++ is different than many other languages in this respect where, like in Java or Ruby for instance, "everything is an object." This generally means that everything is derived from one root class, or at least appears to be.

Consider for example Ruby, where everything is ultimately derived from `Object`. `Object`, in turn, is implemented as a fully-fledged class. It has methods on it like `to_s` and code that implements those methods.

C++ isn't like that. C++ has very basic types, like `int`, that aren't derived from anything. There's no code behind these types, and they have no methods on them. You can't do something like this:

```
int x = 42;
string s = x.to_s(); 
```

because there's no `to_s()` method on an `int`, or any methods.

You also asked,

> If 'int' is a class , in which file it is stored??

`int` isn't "stored" in any file. The meaning and definition of an `int` is built in to the compiler itself. There's no file that you can open on your machine to see how an `int` is defined. When you do something like:

```
int x = 42;
x += 77; 
```

...the compiler doesn't have to look in any header file to know how to add 77 to 42\. It already knows, because and `int` is something that the compiler already knows about. Almost like a-priori knowledge, it's "just there".

How does the compiler already know? Because the people who wrote the compiler (probably using C or C++, by the way) coded that knowledge in. How did the compiler writes know what to write? They followed a document, called the C++ Standard, which explains exactly how a conformant compiler should behave.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:45:42.073

不，`int`是基本类型，定义如下：

### 3.9.1 基本类型[basic.fundamental]

> 2）有五种有符号整数类型：“<code>signed char”、“<code>short int”、“<code>int”、“<code>long int”和“long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。普通整数具有执行环境架构所建议的自然大小）；提供其他有符号整数类型以满足特殊需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T19:41:34.050

No, `int` is a built-in type. It is not a class. The compiler has built-in knowledge of how to deal with `int`.

# c++ - 析构函数在 Dev-C++ 和 Code::Blocks 中搞砸了

> ID：12865952
> 
> 赞同：2
> 
> 时间：2012-10-12T19:40:17.150
> 
> 标签：c++, destructor, codeblocks, dev-c++

```
#include <iostream>
using namespace std;

class Exem {
    int *a;

    public:
        Exem() { a = new int; *a = 0; };
        Exem (int x) { a = new int; *a = x; };

        ~Exem () { delete a; };

        int f (void);

        Exem operator+ (Exem);
};

int Exem::f (void) {
    return *a * 2;
}

Exem Exem::operator+ (Exem nimda) {
    Exem aux;

    *aux.a = *a + *nimda.a;

    return aux;
}

int main() {
    Exem adabo(1);
    Exem inakos(2);

    adabo = adabo + inakos;

    cout << adabo.f();
    cin.get();
} 
```

这是我的代码，一个用于展示问题的示例类。理论上，main() 的输出是“6”，但实际显示的只是无意义的数字。

这显然与类的析构函数有关，据我了解，它在 operator+ 函数结束时被调用得太早 - aux 在实际传递之前就丢失了。我得出这样的结论是因为 ~Exem() 在被注释时允许程序按预期执行。

我猜这与这两个编译器有关，因为当我尝试在 Embarcadero RAD Studio 中编译完全相同的代码时，它会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T19:47:55.027

您需要显式定义复制构造函数和赋值运算符，`Exem`因为您有一个动态分配的成员变量。

如果没有为类显式定义复制构造函数和赋值运算符，编译器会生成它们的默认版本，这不适用于具有动态分配成员的类。默认生成的版本不合适的原因是它们执行成员的浅拷贝。在 的情况下`Exem`，当它的一个实例被复制时，不止一个 的实例`Exem`指向同一个`int`名为 的动态分配成员`a`。当其中一个实例被销毁时，`a` `delete`d，并为另一个实例留下一个悬空指针和未定义的行为。

见[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

A simple fix for `Exem` would be change `a` from an `int*` to an `int`. The default copy constructor, assignment operator and destructor would be correct.

* * *

Note that `Exem::operator+()` should take a `const Exem&` parameter as it does not change its argument.

# php - PHP检查href是否是一个文件

> ID：12865959
> 
> 赞同：0
> 
> 时间：2012-10-12T19:40:28.180
> 
> 标签：php, preg-match

我正在使用脚本来检查给定页面上的链接。我正在使用简单的 html DOM 将信息解析为数组。我必须检查所有 a 标签的 href 以查找它们是否包含文件或 # 或 JS 之类的东西。

我尝试了以下但没有成功。

```
if(preg_match("|^(.*)|iU", $href)){
    save_link();
} 
```

我不知道我的模式是错误的，或者是否有更好的方法来完成这个功能。

我希望能够检测 $href 是否包含 .com .php .file 扩展名。这样，它将过滤掉像 # "function()" 和 href 属性中使用的其他项目。

编辑： parse_url 将不起作用停止发布它。值 # 作为有效 url 返回，就像我在上面所说的那样，我正在尝试查找任何后跟 .* 且 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:48:15.070

您可以使用[parse_url()](http://www.php.net/manual/en/function.parse-url.php)，如下所示：

```
$res = parse_url($href);
if ( $res['scheme'] == 'http' ||  $res['scheme'] == 'https'){
    //valid url
    save_link();
} 
```

**更新：**
我添加了代码以仅过滤**http**和**https** url，感谢 Baba 发现了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:51:38.230

I believe that the function you're looking for is [`parse_url()`](http://php.net/manual/en/function.parse-url.php).

This function will take a URL string, and return an array of components, which will allow you to work out what kind of URL it is.

However note that it has issues with incomplete URLs in PHP versions prior to 5.4.7, so you need to have the very latest PHP to get the best out of it.

Hope that helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T19:52:29.577

See [http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

I'm assuming you don't want to match fragments (#) because you are not concerned with following internal anchors.

parse_url breaks up the different parts of the url into an array. You can see the path component of the URL in this array and run your check against that.

# c++ - c++ 在 2D std::vector 中找到最大值的位置

> ID：12865971
> 
> 赞同：3
> 
> 时间：2012-10-12T19:41:09.420
> 
> 标签：c++, vector, max, stdvector

假设我们有 int 的二维向量，如：

```
1   4   3   0
1   5   6   3
2   0   0   1
6   5   9*  3
3   5   4   2 
```

现在如何在上面的示例中找到 2D 向量中最大值的位置：[2][3]==9。答案是 2,3

我知道我可以使用 std::max_element() 但它提供了迭代器。

另一点是我不想先找到最大值，然后使用 std::find() 方法找到它的位置。（因为它效率不高）

实际上，我如何定义自定义比较函数以通过单次迭代来完成此任务。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T20:01:43.353

```
int Array[4][4] = { {2, 3, 4, 6}, {1, 98, 8, 22}, {12, 65, 1, 3}, {1, 7, 2, 12}};

struct location
    {
       int x;
       int y;
    };

int main()
{
    int temp = 0;
    location l;

    for(int i = 0; i < 4; i++)
        for(int j = 0; j< 4; j++)
            if(temp < Array[i][j])
            {
                temp = Array[i][j];
                l.x = i+ 1;
                l.y = j+ 1;
            }

            cout<<"Maximum Value is "<<temp<<" And is found at ("<<l.x<<","<<l.y<<")";
system("pause");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-06T06:31:37.490

假设它是**N*N**向量（在这种情况下为 4*4），并且这个向量的名称是**sum**

```
7 4 2 0 
4 8 10 8 
3 6 7 6 
3 9 19* 14 
```

定义一个一维向量，如下图

```
vector<int> oneDimVector;
for(int i = 0; i < 4; i++){
    for(int j = 0; j < 4; j++){
        oneDimVector.push_back(sum[i][j]);
    }
} 
```

然后找出该一维向量中的最大元素，如下所示

```
vector<int>::iterator maxElement;
maxElement = max_element(oneDimVector.begin(), oneDimVector.end()); 
```

然后找出矩阵中的确切位置如下图

```
int dist = distance(oneDimVector.begin(), maxElement);
int col = dist % 4;
int row = dist / 4; 
```

现在你得到了你所期望的位置

```
cout << "Max element is " << *maxElement << " at" << " " << row << "," << col << endl; 
```

注意 - 我们假设 (0,0) 作为初始位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T09:55:43.287

它给出了元素的位置及其值

> 在）

时间很少的 for 循环。

找到下面的代码：

```
#include <bits/stdc++.h>
using namespace std;

int main() {
    vector<vector<int>> a = { {2, 3, 4, 6}, {1, 98, 8, 22}, {12, 65, 1, 3}, {1, 7, 2, 12}};
    vector<int> tmp;

    //create 1-dimensional array to find the max element
    for(int i=0;i<a.size();i++){
        tmp.insert(tmp.end(),a[i].begin(),a[i].end());
    }

    //get the row and column location of the elment
    int row = (max_element(tmp.begin(),tmp.end()) -tmp.begin())/a.size();
    int col = (max_element(tmp.begin(),tmp.end()) -tmp.begin())%a.size();

    // gets the value of the max element in O(n) time
    int val = *max_element(tmp.begin(),tmp.end());

    cout<<"Max element is located at:"<<(row+1)<<","<<(col+1)<<"and the value is "<<val<<endl;

    return 0;
} 
```

# twitter - Is there any way to customize embedded Twitter feed?

> ID：12865972
> 
> 赞同：1
> 
> 时间：2012-10-12T19:41:17.307
> 
> 标签：twitter, widget

I'd like to add a simple text-based twitter feed to the footer of my website. From what I've read, you must generate the code for the feed through twitter, but the customization options seem extremely limited. Is there another way possible? This is the result I currently have:

[http://www.charissasantos.la/mezcaleria.html](http://www.charissasantos.la/mezcaleria.html)

I'd like to change the background, decrease the height, remove the username photos, etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T23:48:01.700

您可以试试这个 Javascript 库，它可以让您将自定义 CSS 添加到 twitter 嵌入小部件。[https://github.com/kevinburke/customize-twitter-1.1](https://github.com/kevinburke/customize-twitter-1.1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T15:41:36.307

您可以将您的 css 注入 iframe：

```
resources (twitter iframe)
$(window).on('load', function() {
      $('#twitter-widget-0').contents().find('head').append('<link href="http://website.com/style.css" rel="stylesheet" type="text/css" />');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-04T08:35:50.490

按照[此链接](https://dev.twitter.com/web/embedded-timelines)中给出的简单步骤，可以生成 twitter 小部件的各种时间线。请按照以下步骤创建自定义时间线小部件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-04T07:44:26.463

可能这对你有帮助

这是一个示例代码和演示，可用于在 twitter 中搜索

[http://www.codexworld.com/create-custom-twitter-widget-using-php/](http://www.codexworld.com/create-custom-twitter-widget-using-php/)

您也可以查看此示例，这可能会完全满足您的要求。[http://dev.kim-maida.com/twitter/](http://dev.kim-maida.com/twitter/)

这是演示代码和代码示例链接。[https://github.com/kmaida/twitter-timeline-php](https://github.com/kmaida/twitter-timeline-php)

# wordpress - Wordpress：评论的 Facebook 图标与默认图标重叠

> ID：12865980
> 
> 赞同：1
> 
> 时间：2012-10-12T19:41:39.753
> 
> 标签：wordpress, facebook-comments

这是我正在使用的主题的默认布局。有一个气泡表示该帖子的评论数量。 [http://twitpic.com/b3hr1j/full](http://twitpic.com/b3hr1j/full)

在我安装 Facebook 插件并启用评论框后，一个 facebook 图标与默认图标重叠。 [http://twitpic.com/b3hrxj/full](http://twitpic.com/b3hrxj/full)

我怎样才能删除其中一个，或两者都删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:02:59.117

如果你在你的`style.css`

```
.entry-header .comments-link {display: none;} 
```

它会隐藏标注，但[这里](http://randyzwitch.com/comment-bubble-twenty-eleven/)有一个更详细/更好的隐藏标注的解决方案，[这个](http://www.techtipsworld.com/remove-comment-bubble-posted-on-date-posted-in-category-and-tag-from-twenty-eleven-theme/207/)也可能有帮助。

# objective-c - 将 NSString 解析为 Double

> ID：12865981
> 
> 赞同：3
> 
> 时间：2012-10-12T19:41:48.973
> 
> 标签：objective-c

所以我想转换`NSString`成双倍。我找到了以下示例：

```
NSString * s = @"1.5e5";
NSLog(@"%lf", [s doubleValue]); 
```

它可以工作，但如果`doubleValue`不能将字符串转换为双精度，它只会返回 0.0，这不是我需要的。我需要一些方法来尝试将双精度的字符串表示形式转换为双精度，并以某种方式指示它是否无法转换。c#有一个绝妙的方法

```
double d;
boolean Double.TryParse(str, out d) 
```

Objective C中是否有与上述方法类似的方法？或者最好使用正则表达式？但是，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T19:48:30.343

您可以使用`NSScanner`该类：

```
NSString *s = @"1.5e5";
NSScanner *scanner = [NSScanner scannerWithString:s];
double d;
BOOL success = [scanner scanDouble:&d]; 
```

如果要确保已扫描整个字符串（数字后没有多余的字符），请使用

```
BOOL isAtEnd = [scanner isAtEnd]; 
```

# assembly - X86 Fibonacci program

> ID：12865984
> 
> 赞同：-1
> 
> 时间：2012-10-12T19:42:04.087
> 
> 标签：assembly, x86, masm

My assignment is to write a program that calculates first seven values of fibonacci number sequence. the formula given is:

```
Fib(1) = 1, Fib(2) = 1, Fib(n) = Fib(n-1) + Fib(n-2) 
```

I believe that is a function but I do not understand how to incorporate it into code. I need to place the values in EAX register. I am using MASM not that makes any difference. Any hints?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T20:10:42.407

我怀疑这是一项学术作业，所以我只会部分回答这个问题。

非负整数的斐波那契数列正式定义如下：

```
F(n) = n                   | n < 2
     = F(n - 1) + F(n - 2) | n >= 2 
```

这给出了：

```
 n | F(n)
  0 |   0
  1 |   1
  2 |   1
  3 |   2
  4 |   3
  5 |   5
  6 |   8
  7 |  13
etc etc... 
```

你可以用几个寄存器来做，让我们来识别它们：

*   R [n] (请求的斐波那契数)
*   R [f1]（用于计算斐波那契数）
*   R [f2]（也用于计算斐波那契数）
*   R [x]（保存返回值的寄存器。可以与任何其他寄存器重叠）

R [n]作为参数传递给函数。R [f1]应从 0 开始，R [f2]应从 1 开始。

以下是我们为获得答案所做的工作，按例程划分：

**开始**

1.  [将 R f1]初始化为 0。
2.  [将 R f2]初始化为 1。
3.  继续循环。

**环形**

1.  [从 R n]中减去 2 。
2.  如果 R [n]小于 0，则跳转到 Finish。
3.  将 R [f2]与 R [f1 相加]，将结果存储在 R [f1]中。
4.  将 R [f1]与 R [f2 相加]，将结果存储在 R [f2]中。
5.  跳到循环。

**结束**

1.  如果 R [n] AND 1 为假（暗示 R [n]是偶数）跳转到 FinishEven。
2.  将R [f1]存储为返回值。
3.  返回。

**完成均匀**

1.  将R [f2]存储为返回值。
2.  返回。

跟踪 R [n] = 5：

1.  R [f1] = 0
2.  R [f2] = 1
3.  R [n] = R [n] - 2 // R [n] = 3
4.  测试 R [n] < 0 // 假
5.  R [f1] = R [f1] + R [f2] // R [f1] = 0 + 1 = 1
6.  R [f2] = R [f1] + R [f2] // R [f2] = 1 + 1 = 2
7.  无条件跳转到循环
8.  R [n] = R [n] - 2 // R [n] = 1
9.  测试 R [n] < 0 // 假
10.  R [f1] = R [f1] + R [f2] // R [f1] = 1 + 2 = 3
11.  R [f2] = R [f1] + R [f2] // R [f2] = 3 + 2 = 5
12.  无条件跳转到循环
13.  R [n] = R [n] - 2 // R [n] = -1
14.  测试 R [n] < 0 // 真
15.  跳转到完成
16.  测试 R [n] & 1 // 真
17.  R [x] = R [f2] // 5

我们的表显示 F(5) = 5，所以这是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-26T12:36:04.823

```
TITLE  Chapter 4 Exercise 6                (ch04_06.asm)

Comment !
Description: Write a program that uses a loop to calculate the first
seven values in the Fibonacci number sequence { 1,1,2,3,5,8,13 }.
Place each value in the EAX register and display it with a
call DumpRegs statement inside the loop.

Last update: 05/02/2002
!
INCLUDE Irvine32.inc

.code
main PROC
    mov   eax,1
    call  DumpRegs
    mov   ebx,0 ; initial setup
    mov   edx,1
    mov   ecx,6 ; count
L1:
    mov  eax,ebx    ; eax = ebx + edx
    add  eax,edx
    call DumpRegs   ; display eax
    mov  ebx,edx
    mov  edx,eax
    Loop L1

    exit
main ENDP
END main 
```

# iphone - UISwitch 打开/关闭 UILongPressGestureRecognizer

> ID：12865988
> 
> 赞同：0
> 
> 时间：2012-10-12T19:42:13.523
> 
> 标签：iphone, ios6, uigesturerecognizer, uiswitch

`UILongPressGestureRecognizer`我在我的应用程序中声明了以下方法，我想在我的 mapView中实现一个开关来打开和关闭。

```
- (IBAction)addNewPin:(UISwitch *)sender {

if (sender.on) {

NSLog(@"ON!!");
}

else {

NSLog(@"OFF!!");
}

}

- (IBAction)didPressForPin:(UILongPressGestureRecognizer *)sender {

CGPoint point = [sender locationInView:self.mapView];
CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];

MKPointAnnotation *pa = [[MKPointAnnotation alloc]init];
pa.coordinate = locCoord;
pa.title = @"Test Title!";
[mapView addAnnotation:pa];

NSLog(@"Pressed!!");

} 
```

我知道我可以添加或删除手势识别器或实现`.enabled = NO`，但我不知道如何在 switch 方法中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T20:09:36.370

`longPressGestureRecognizer`假设您拥有财产，这样的事情可能会有所帮助：

```
@synthesize longPressGestureRecognizer = _longPressGestureRecognizer;

- (UILongPressGestureRecognizer *)longPressGestureRecognizer
{
    if (_longPressGestureRecognizer) {
        return _longPressGestureRecognizer;
    }

    _longPressGestureRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPressGesture:)];
    return _longPressGestureRecognizer;
}

- (IBAction)toggleAddPinSwitch:(UISwitch *)sender
{
    if ([sender isOn]) {
        [self.mapView addGestureRecognizer:self.longPressGestureRecognizer];
    } else {
        [self.mapView removeGestureRecognizer:self.longPressGestureRecognizer];
    }
} 
```

# wordpress - .htaccess 重写问题仅加载主页

> ID：12865990
> 
> 赞同：0
> 
> 时间：2012-10-12T19:42:28.203
> 
> 标签：wordpress, .htaccess, permissions

我已经将一个站点从我的测试开发移动到一个实时服务器（它的 wordpress），并且出于某种原因，无论我点击什么页面，都只会加载主页。

认为我已将其范围缩小到我的 htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

特别是这一行：

```
RewriteRule . /index.php [L] 
```

如果我删除它或完全删除 htaccess，我会收到 Forbidden 403 错误。

我希望有人能帮我解决这个问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T19:55:54.367

非常常见的问题是重定向插件。禁用所有插件并回发。您的网站是在根文件夹中还是在子目录中？

更新：

# 更改站点 URL

> 有四种简单的方法可以手动更改站点 URL。这些方法中的任何一种都可以工作并执行相同的功能。编辑 wp-config.php
> 
> 可以在 wp-config.php 文件中手动设置站点 URL。
> 
> 将这两行添加到您的 wp-config.php，其中“example.com”是您网站的正确位置。
> 
> 定义('WP_HOME','http://example.com'); 定义（'WP_SITEURL'，'http://example.com'）；

这不一定是最好的解决方法，它只是将值硬编码到站点本身中。使用此方法时，您将无法再在常规设置页面上编辑它们。

[来源](http://codex.wordpress.org/Changing_The_Site_URL)

更新：

转到 wp-config.php

并添加

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:17:26.480

结果发现根目录中有一堆随机文件，我只能通过 FTP 访问 public_html。我们清除了许多 htaccess 文件和其他配置文件，它解决了问题。

# c# - 以百分比显示进度

> ID：12865994
> 
> 赞同：0
> 
> 时间：2012-10-12T19:42:40.813
> 
> 标签：c#, int, percentage

这应该比较简单。

**是）我有的：**

```
int progress; // iteration we are on, starts at 0, always incr by 1
int percentage; // from 1 - 100, starts at 0
int percentage_trip; // derived from total_results / 100
int total_results; // lets say its 200 (note that it can be anything, like 939049) 
```

**我需要的：**

在上面的示例中，每次*进度*达到 2、4、6、8 等时，百分比整数应增加 1（即百分比++；）

我的想法围绕着格式非常糟糕的嵌套 IF 语句展开，我正在寻找正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T19:55:28.833

```
int incrementAmount = total_results/100;
if (progress % incrementAmount) { percentage++; } 
```