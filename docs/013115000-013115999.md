# StackOverflow 问答 13115000-13115999

# java - Zkoss 网格分页定制

> ID：13115000
> 
> 赞同：0
> 
> 时间：2012-10-29T01:50:50.837
> 
> 标签：java, jsp, zk

我正在尝试建立一个带有分页的网格，但我想更改出现在数字之前/之后的文本。

```
<grid sclass="myTable" mold="paging" pageSize="1" >
...
</grid>
//Under the table now there is a pagination 
```

现在它类似于“上一个”和“下一个”。我怎样才能在这里使用图像？

或者，如果不可能，有人可以向我展示如何使用自定义渲染器执行此操作的教程吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:48:41.880

您可以使用 Javascript 替换元素或使用 CSS3 将一些文本与元素一起放置。例如，

```
<style>
.myTable .z-paging-text:before {
    content: 'before';
}
.myTable .z-paging-text:after {
    content: 'after';
}
</style> 
```

# c# - Visual Studio 2010 不显示运行时错误

> ID：13115003
> 
> 赞同：1
> 
> 时间：2012-10-29T01:51:12.967
> 
> 标签：c#, visual-studio-2010, runtime-error

> **可能重复：**
> [C# 中的静默失败，看似未处理的异常，不会使程序崩溃](https://stackoverflow.com/questions/1583351/silent-failures-in-c-seemingly-unhandled-exceptions-that-does-not-crash-the-pr)

如果这已经被讨论过，我很抱歉，但我真的很想找它，找不到答案。

在使用 Windows 窗体应用程序时，它发生在 Visual Studio 2010 上。

问题是当我使用“开始调试”选项执行它时，它不会显示运行时错误。它适用于我在这里保存的旧项目，但是当我开始一个新项目时，我遇到了这个问题。例如，我简单地启动一个新应用程序并将其放在 Form_Load 上：

```
int a = 0; int b;
b = 4 / a; 
```

如果我按 Ctrl + F5 运行我的应用程序，它通常会显示除以零异常。但如果我按 F5 运行它，它只会忽略错误。它不会停止应用程序并指出通常会执行的错误行。并且所有其他错误也被忽略。当我在没有调试的情况下运行我的应用程序时会发生错误，但在调试时不会。

我测试了 C# 和 VB.NET 应用程序并遇到了同样的问题。我不记得在 VS 配置上进行了任何更改，有人知道为什么在新应用程序上没有向我显示错误吗？

谢谢。

编辑：

谢谢，Jeff E。如链接所示：[C# 中的静默失败，看似未处理的异常不会使程序崩溃](https://stackoverflow.com/questions/1583351/silent-failures-in-c-seemingly-unhandled-exceptions-that-does-not-crash-the-pr)

我从来不知道表单加载上没有显示错误。我尝试的所有代码都在表单加载和表单激活上。

很抱歉我的无知，再次感谢大家。

# c# - 同一个 HttpVerb 的多个操作

> ID：13115004
> 
> 赞同：9
> 
> 时间：2012-10-29T01:51:16.223
> 
> 标签：c#, asp.net-web-api, asp.net-web-api-routing

我有一个具有以下操作的 Web API 控制器：

```
 [HttpPut]
    public string Put(int id, JObject data)

    [HttpPut, ActionName("Lock")]
    public bool Lock(int id)

    [HttpPut, ActionName("Unlock")]
    public bool Unlock(int id) 
```

并映射了以下路线：

```
 routes.MapHttpRoute(
            name: "Api",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
        routes.MapHttpRoute(
            name: "ApiAction",
            routeTemplate: "api/{controller}/{action}/{id}"
        ); 
```

当我提出以下请求时，一切都按预期工作：

```
PUT /api/items/Lock/5
PUT /api/items/Unlock/5 
```

但是当我尝试提出请求时：

```
PUT /api/items/5 
```

我得到以下异常：

```
Multiple actions were found that match the request:
    Put(int id, JObject data)
    Lock(int id)
    Unlock(int id) 
```

我尝试向默认路由添加一个空操作名称，但这没有帮助：

```
[HttpPut, ActionName("")]
public string Put(int id, JObject data) 
```

有什么想法可以将默认的 RESTful 路由与自定义操作名称结合起来吗？

**编辑：**路由机制不会因控制器的选择而混淆。它对单个控制器上的***操作***选择感到困惑。我需要的是在未指定任何操作时匹配默认操作。希望能澄清事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T20:09:33.847

这是来自默认操作选择器的预期错误，即`ApiControllerActionSelector`. 您基本上具有三种对应于 HTTP`Put`动词的操作方法。还要记住，默认动作选择器考虑简单动作参数类型，它们都是原始 .NET 类型、众所周知的简单类型（`System.String`、`System.DateTime`、`System.Decimal`、`System.Guid`、`System.DateTimeOffset`、`System.TimeSpan`）和底层简单类型（例如：`Nullable<System.Int32>`）。

作为您的问题的解决方案，我将为以下控制器创建两个控制器：

```
public class FooController : ApiController { 

    public string Put(int id, JObject data)
}

public class FooRPCController : ApiController { 

    [HttpPut]
    public bool Lock(int id)

    [HttpPut]
    public bool Unlock(int id)
} 
```

路线如下所示：

```
routes.MapHttpRoute(
    name: "ApiAction",
    routeTemplate: "api/Foo/{action}/{id}",
    defaults: new { controller = "FooRPC" }
);

routes.MapHttpRoute(
    name: "Api",
    routeTemplate: "api/Foo/{id}",
    defaults: new { id = RouteParameter.Optional, controller = "Foo" }
); 
```

另一方面（与您的主题不完全相关），我有三篇关于动作选择的博客文章，尤其是复杂类型参数。我鼓励您查看它们，因为它们可能会给您更多的视角：

*   [使用 ASP.NET Web API 的复杂类型动作参数和控制器动作选择](http://www.tugberkugurlu.com/archive/complex-type-action-parameters-and-controller-action-selection-with-asp-net-web-api)
*   [ASP.NET Web API 中使用 ComplexTypeAwareActionSelector 的复杂类型操作参数 - 第 1 部分](http://www.tugberkugurlu.com/archive/complex-type-action-parameters-with-complextypeawareactionselector-in-asp-net-web-api-part-1)
*   [ASP.NET Web API 中使用 ComplexTypeAwareActionSelector 的复杂类型操作参数 - 第 2 部分](http://www.tugberkugurlu.com/archive/complex-type-action-parameters-with-complextypeawareactionselector-in-asp-net-web-api-part-2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:39:21.970

[在Giscard Biamby](https://stackoverflow.com/users/239185/giscard-biamby)的帮助下，我找到[了这个答案](https://stackoverflow.com/a/12185249/99373)，它为我指明了正确的方向。最终，为了解决这个特定问题，我这样做了：

```
routes.MapHttpRoute(
    name: "ApiPut", 
    routeTemplate: "api/{controller}/{id}",
    defaults: new { action = "Put" }, 
    constraints: new { httpMethod = new HttpMethodConstraint("Put") }
); 
```

谢谢@GiscardBiamby

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-29T07:15:05.463

首先，删除`[HttpPut, ActionName("")]`然后修改你的路线到这个

```
config.Routes.MapHttpRoute(
    name: "Api",
    routeTemplate: "api/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional },
    constraints: new { id = @"^[0-9]+$" }
    ); 
```

# android - 在Android上绘制位图而不缩放

> ID：13115006
> 
> 赞同：4
> 
> 时间：2012-10-29T01:52:01.310
> 
> 标签：android, bitmap, screen, android-canvas, scaling

我试图在画布上绘制位图。在模拟器中，图像似乎模糊了。android可能会自动缩放位图吗？我确实尝试禁用缩放，例如

```
< supports-screens android:smallScreens="false" android:normalScreens="true" 
android:largeScreens="false" android:xlargeScreens="false" android:anyDensity="true" /> 
```

模糊意味着如果我在位图中有一个像素，我看到的是 2x2 像素。有时会丢失一个像素。所以我假设 Android 会自动对其进行缩放以适应不同的屏幕。我只是使用 WVGA，如何防止这种缩放？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-01T17:48:31.193

实际上，两者`Bitmap`都`Canvas`具有密度属性，如果画布和位图的密度不同，则绘制位图会自动缩放位图。

来自[Bitmap.setDensity()](http://developer.android.com/reference/android/graphics/Bitmap.html#setDensity%28int%29)文档：

> 指定此位图的密度。当位图被绘制到也有密度的 Canvas 上时，它会被适当地缩放。

您可以调用`bitmap.setDensity(Bitmap.DENSITY_NONE)`以完全禁用此自动缩放行为。如果您从资源中加载位图，将其放置在下面`drawable-nodpi`就足够了。

对于好奇的：这种行为背后的逻辑是在`Canvas.cpp`（的本机部分`android.graphics.Canvas`）中实现的，在`drawBitmap__BitmapFFPaint()`方法中：

```
static void drawBitmap__BitmapFFPaint(JNIEnv* env, jobject jcanvas,
                                      SkCanvas* canvas, SkBitmap* bitmap,
                                      jfloat left, jfloat top,
                                      SkPaint* paint, jint canvasDensity,
                                      jint screenDensity, jint bitmapDensity) {
    SkScalar left_ = SkFloatToScalar(left);
    SkScalar top_ = SkFloatToScalar(top);

    if (canvasDensity == bitmapDensity || canvasDensity == 0
            || bitmapDensity == 0) {
        if (screenDensity != 0 && screenDensity != bitmapDensity) {
            SkPaint filteredPaint;
            if (paint) {
                filteredPaint = *paint;
            }
            filteredPaint.setFilterBitmap(true);
            canvas->drawBitmap(*bitmap, left_, top_, &filteredPaint);
        } else {
            canvas->drawBitmap(*bitmap, left_, top_, paint);
        }
    } else {
        canvas->save();
        SkScalar scale = SkFloatToScalar(canvasDensity / (float)bitmapDensity);
        canvas->translate(left_, top_);
        canvas->scale(scale, scale);

        SkPaint filteredPaint;
        if (paint) {
            filteredPaint = *paint;
        }
        filteredPaint.setFilterBitmap(true);

        canvas->drawBitmap(*bitmap, 0, 0, &filteredPaint);

        canvas->restore();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:58:35.513

我认为把你的位图放在 drawable-nodpi 文件夹中可以解决这个问题。顺便说一句，标签仅供 Google Play 使用。

# c# - 渲染视图时会发生 LINQ 延迟执行，还是更早发生？

> ID：13115008
> 
> 赞同：7
> 
> 时间：2012-10-29T01:52:21.697
> 
> 标签：c#, asp.net-mvc, linq, deferred-execution

给定一个返回到 MVC 视图的非常基本的 LINQ，延迟执行在什么时候触发？

在控制器中：

```
public ActionResult Index()
{
    var model = _fooService.GetAll();
    return View(model);
} 
```

在模型中：

```
@foreach (var item in Model) {    
    <tr>
        <td>@item.Bar</td>
   </tr>
} 
```

当然，当我们调用时，查询不会执行`_fooService.GetAll()`，而是推迟到稍后的某个时间点——但它在哪个确切时间点执行？

*   控制器中的`return View(model);`语句（看起来不像）？
*   视图中的`@foreach (var item in Model)`线？
*   第一次`@item.Bar`点击视图中的线？
*   `return View(model);`在与正在渲染的视图之间发生的其他事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:09:37.040

查询执行（我假设 GetAll 返回 iqueryable）将推迟到视图中，并将在 foreach 行上展开，因为这是您开始迭代集合的第一个地方。

**更新** 对于任何感兴趣的人，这里是“证明”。像这样创建一个类：

```
public class DiagnosticCollection<T> : System.Collections.Generic.List<T>
{
    public new Enumerator GetEnumerator()
    {
        Debug.Print("Collection Unwrap");
        return base.GetEnumerator();
    }
} 
```

像这样在你的视图中测试它：

```
@model PlayMvc.Models.DiagnosticCollection<string>
@{System.Diagnostics.Debug.Print("Before foreach");}
@foreach (var item in Model)
{
    System.Diagnostics.Debug.Print("After foreach");
    @item
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T04:25:42.360

[MSDN 文档](http://msdn.microsoft.com/en-us/library/bb738633.aspx)在延迟查询执行部分（强调我的）下解决了这个问题。

> 在返回值序列的查询中，查询变量本身从不保存查询结果，只存储查询命令。查询的执行被推迟**，直到查询变量在 foreach 或 For Each 循环中被迭代**...

这缩小了选项 2 和 3 的答案。

`foreach`只是语法糖，在编译器下面将其重写为while循环。[对这里](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)发生的事情有一个非常彻底的解释。基本上你的循环最终会看起来像这样

```
{
  IEnumerator<?> e = ((IEnumerable<?>)Model).GetEnumerator();
  try
  { 
    int m;  // this is inside the loop in C# 5
    while(e.MoveNext())
    {
      m = (?)e.Current;
      // your code goes here
    }
  }
  finally
  { 
    if (e != null) ((IDisposable)e).Dispose();
  }
} 
```

枚举器在到达循环内的代码之前是高级的，所以在你到达`@item.Bar`. 这只剩下选项 2，即该`@foreach (var item in Model)`行（尽管从技术上讲，在编译器完成您的代码后该行不存在）。

`GetEnumerator()`如果查询将在调用或第一次调用时执行，我不起诉`e.MoveNext()`。

* * *

正如@pst 在评论中指出的那样，还有其他方法可以触发查询的执行，例如通过调用`ToList`，并且它可能不会在内部使用`foreach`循环。MSDN 文档在这里解决了这个[问题](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)：

> IQueryable 接口继承了 IEnumerable 接口，因此如果它表示一个查询，则可以枚举该查询的结果。 **枚举导致与要执行的 IQueryable 对象关联的表达式树。**“执行表达式树”的定义特定于查询提供程序。例如，它可能涉及将表达式树转换为底层数据源的适当查询语言。**调用 Execute 方法时会执行不返回可枚举结果的查询。**

我对此的理解是尝试枚举表达式将导致它执行（无论是通过`foreach`某种方式还是其他方式）。具体如何发生将取决于提供者的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T15:46:46.023

作为澄清点，LINQ to SQL/Entity Framework 在调用 GetEnumerator 时评估 LINQ 查询表达式。这被 foreach 在幕后使用，因此虽然延迟执行似乎要等到 foreach 发生，但实际上 foreach 使用的 GetEnumerator 才是真正的关键执行点。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-29T04:05:56.647

工作被推迟到**需要**完成时。在您的示例中，查询将在尝试获取`item`.

# javascript - 查找新的对象属性

> ID：13115010
> 
> 赞同：3
> 
> 时间：2012-10-29T01:52:44.763
> 
> 标签：javascript, jquery, ecmascript-5

> **可能重复：**
> [检测 Javascript 对象中的更改](https://stackoverflow.com/questions/11578377/detecting-change-in-a-javascript-object)

是否有任何可靠的跨浏览器方法来检测或“读取”对象的新属性名称，当它们被分配时？

例如：

```
var obj = {};

obj.newProperty = true; 
```

我想拦截该过程并检索`"newProperty"`. 到目前为止，我的想法是：

*   使用 ES5 getter 函数？
*   使用 Object.watch 吗？
*   使用 setInterval 检查新属性？

我认为 Object.watch 仅在 Firefox 中可用，因此实际上不是真正的选择。我需要的是类似于原生 Javascript 对象的“突变事件”。帮助 ？

# java - 如何在 Java 中比较和排序两个数组列表

> ID：13115012
> 
> 赞同：1
> 
> 时间：2012-10-29T01:53:35.473
> 
> 标签：java

我从硬盘驱动器上的两个文件中获取输入：

studentNames.txt 和 studentScores.txt - 名称包含学生 ID 和姓名，而分数包含学生 ID 和分数。我已将数据放入两个 ArrayLists 中，并希望对数据进行排序，以便成绩转到匹配的 ID。

例如：

```
+------+--------------+---------+
|  ID  |     Name     |  Grade  |
+------+--------------+---------+
| 3305 | Smith Henry  | 92.0    |
| 5555 | Eddy Olivia  | 95.5    |
| 8915 | Johnson Luke | 98.5    |
+------+--------------+---------+ 
```

并且数据继续仅填充 ID / Grade - 我知道我需要使用 if 语句，但我将如何去做呢？

这是我的代码：

```
import java.util.*;
import java.io.*;

public class P_Supplemental_9 {

public static void main(String[] args) throws FileNotFoundException {
   File file1 = new File("c:/temp/studentNames.txt");
   File file2 = new File("c:/temp/studentScores.txt");

   if(file1.exists()) {
   Scanner input = new Scanner(file1);

   ArrayList<Student> students = new ArrayList();

   while(input.hasNext()) {
   students.add(new Student(input.nextInt(),input.nextLine()));
   }

   input.close();

   for(int o = 0;o < students.size();o++) {
   System.out.printf("%10d %20s avg\n", students.get(o).getStuId(),     students.get(o).getStuName());

   } // end for

   }

   if(file2.exists()) {
       Scanner input = new Scanner(file2);

       ArrayList<Student> grades = new ArrayList();

       while(input.hasNext()) {
           grades.add(new Student(input.nextInt(), input.nextLine()));

       } /// end while
       input.close();

   for(int o = 0;o < grades.size();o++) {

       System.out.printf("%10d %20s avg\n", grades.get(o).getStuId(), grades.get(o).getStuName());
   } // end for

   } // end if(file2.exists)

  } // end main method
 } // end P_Supplemental_9

class Student {
    private int stuId;
    private String stuName;
    private ArrayList <Double> grades;

    Student(int idIn, String nameIn) {

        this.stuId = idIn;
        this.stuName = nameIn;
       } // end student class

    Student(int idIn, ArrayList gradesIn) {
        this.stuId = idIn;
        this.grades = gradesIn;

    }

        public int getStuId() {
            return stuId;
        }

        /**
         * @param stuId the stuId to set
         */
        public void setStuId(int stuId) {
            this.stuId = stuId;
        }

        /**
         * @return the stuName
         */
        public String getStuName() {
            return stuName;
        }

        /**
         * @param stuName the stuName to set
         */
        public void setStuName(String stuName) {
            this.stuName = stuName;
        }

        /**
         * @return the grades
         */
        public ArrayList getGrades() {
            return grades;
        }

        /**
         * @param grades the grades to set
         */
        public void setGrades(ArrayList grades) {
            this.grades = grades;
        }

} // end student class 
```

这是来自 Studentnames.txt 的数据

```
3305 Smith Henry
5555 Eddy Olivia
8915 Johnson Luke 
```

这是来自 Studentscores.txt 的数据

```
3305 92.0
5555 95.5
8915 98.5
3305 89.0
5555 90.5
8915 95.5
3305 78.5
5555 85.0
8915 82.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:02:45.323

您可以使用[`Collections#sort(List, Comparator)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)对两个列表进行排序。

假设他们是学生和他们的分数之间的一对一关系，这将允许您获取学生和分数以及列表的每个元素。

我会想象它看起来像这样。

```
Collections.sort(studentNames, new Comparator<Student>() {
    public int compareTo(Student o1, Student o2) {
        return o1.getStuId() - o2.getStuId();
    }
}); 
```

这将为您提供`List`按学生 ID 排序的学生。

然后，您将使用相同的概念对分数列表进行排序。一旦你有了它，这两个列表现在应该按学生 ID 顺序排列，你应该能够遍历它们。

另一个想法是将学生和分数存储在`Map`学生 ID 的键控中。

然后，您将能够迭代地图的键并根据这些 ID 提取每个学生并评分

**已更新以满足要求**

阅读更新后的要求后，我注意到最好使用排序地图而不是列表。

基本上，我们将每个学生的姓名放入一个以个人 ID 为关键字的排序映射中。然后，我们将每一个都放在一个排序地图中的一个列表中，该地图以 ID 为键

```
public class TestArraySort {

    public static void main(String[] args) {
        new TestArraySort();
    }

    public TestArraySort() {

        try {
            File file1 = new File("studentNames.txt");
            File file2 = new File("studentScores.txt");

            // Better to check for both files here, other wise it's just wasting time
            if (file1.exists() && file2.exists()) {
                // Create the sorted maps so that they are in scope...
                Map<Integer, String> mapStudents = new TreeMap<Integer, String>();
                Map<Integer, List<Double>> mapScores = new TreeMap<Integer, List<Double>>();

                Scanner input = null;
                try {
                    input = new Scanner(file1);
                    // Read the student information...
                    while (input.hasNext()) {
                        int id = input.nextInt();
                        String name = input.nextLine().trim();
                        mapStudents.put(id, name);
                    }
                    // Safty net
                } finally {
                    input.close();
                }

                try {
                    // Read the scores
                    input = new Scanner(file2);
                    while (input.hasNext()) {
                        int id = input.nextInt();
                        double score = input.nextDouble();

                        // If the list doesn't already exist, create it
                        List<Double> scores = mapScores.get(id);
                        if (scores == null) {
                            scores = new ArrayList<Double>(25);
                            mapScores.put(id, scores);
                        }
                        scores.add(score);
                    } /// end while
                    // Safty net
                } finally {
                    input.close();
                }

                // Dump the results
                System.out.println("+------------+----------------------+------+");
                for (Integer id : mapStudents.keySet()) {
                    // Display the student results
                    String name = mapStudents.get(id);
                    System.out.printf("| %10d | %-20s | ", id, name);
                    List<Double> scores = mapScores.get(id);
                    if (scores.size() > 0) {

                        // Sort the list
                        Collections.sort(scores);
                        // Reverse the list so that the scores are now in order from highest to lowest
                        // Sure, I could create a reverse comparator when I sort it, but
                        // I'm lazy...
                        Collections.reverse(scores);

                        // Print the first score...
                        System.out.printf("%4.1f |\n", scores.get(0));
                        // Print the remaining scores...
                        for (int index = 1; index < scores.size(); index++) {
                            System.out.printf("| %10s | %-20s | %4.1f |\n", "", "", scores.get(index));
                        }

                    } else {

                        System.out.println("00.0 |");

                    }
                    System.out.println("+------------+----------------------+------+");

                }

            } // end if(file2.exists)    }

        } catch (IOException exp) {
            exp.printStackTrace();
        }
    }
} 
```

哪个生产

```
+------------+----------------------+------+
|       3305 | Smith Henry          | 92.0 |
|            |                      | 89.0 |
|            |                      | 78.5 |
+------------+----------------------+------+
|       5555 | Eddy Olivia          | 95.5 |
|            |                      | 90.5 |
|            |                      | 85.0 |
+------------+----------------------+------+
|       8915 | Johnson Luke         | 98.5 |
|            |                      | 95.5 |
|            |                      | 82.0 |
+------------+----------------------+------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T08:07:22.013

```
File one data
abc
abcd
bcd

file two data
abc
abcd 
bcd
cdf

final resutlt

abc
abc 
abcd
abcd
bcd
bcd
cdf

package com.ravisoft.logic;
/*
String tempDataArray[] =
    StringUtils.split(mergeStr, Utils.LINE_SEPARATOR);
java.util.Arrays.sort(tempDataArray);

String data = StringUtils.join(tempDataArray, Utils.LINE_SEPARATOR, 0);*/

import java.util.ArrayList;
import java.util.Collections;
import java.io.*;

public class ReadDemo
{
    public static void main(String args[]){
        ArrayList<String> fileData = new ArrayList<String>();
        String fileName1 = "E:\\ROUTINE_WORK\\MAY_ROUTINE_WORK\\MAY282013\\New1.TXT";
        String fileName2 = "E:\\ROUTINE_WORK\\MAY_ROUTINE_WORK\\MAY282013\\New2.TXT";
        int lines = 0;
        try 
        {
          // set up input stream1
        FileReader fr1 = new FileReader(fileName1);
          // buffer the input stream
        BufferedReader br1 = new BufferedReader(fr1);

          // set up input stream2
        FileReader fr2 = new FileReader(fileName2);
          // buffer the input stream
        BufferedReader br2 = new BufferedReader(fr2);

          // read and display1
        String buffer1 = "";

        while ((buffer1 = br1.readLine()) != null)
        {
          fileData.add(buffer1);

          System.out.println("First file: "+buffer1);  // display the line
          ++lines;
        }

      br1.close();

        String buffer2 = "";

            while ((buffer2 = br2.readLine()) != null) 
            {
                  fileData.add(buffer2);

                  System.out.println("Second file: "+buffer2);  // display the line
                  ++lines;
            }

      br2.close();
    System.out.println("Total lines before sorting: "+lines);
    lines=0;
      Collections.sort(fileData);

      System.out.println("Sorted list");
      System.out.println();
      System.out.println();
      System.out.println();
      System.out.println();
      System.out.println();

        for(String s : fileData) {
            ++lines;
          System.out.println(s);
        }
        System.out.println("Total lines after sort: "+lines);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

      }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:07:26.500

在[`Comparable`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Comparable.html)您的`class`. 现在您可以轻松调用`Collections.sort(studentNames)`（假设`studentNames`是 a [`List`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/List.html)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T01:59:02.320

如果您尝试比较来自不同 arrayLists 的两个值，假设它们是字符串值

`if (array1.get(i).toString().compareTo(array2.get(j).toString()) == 0`)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T02:04:45.597

我认为最好的方法是使用[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html). 在阅读任一文件时，将学生 ID 映射到与其关联的数据（姓名或考试成绩）。然后，遍历学生 ID 的集合，分别用`nameMap.get(id)`和获取姓名和分数`scoreMap.get(id)`- 其中每个`id`都是 ID 集合的一个元素，可通过 获取`nameMap.keySet()`。

# android - HTML 选择标签：桌面与移动

> ID：13115014
> 
> 赞同：3
> 
> 时间：2012-10-29T01:53:48.830
> 
> 标签：android, css, mobile, select, drop-down-menu

我注意到在我的 android 浏览器上，当我选择某些下拉菜单时，我会弹出标准的 android 弹出窗口，而其他网站似乎为他们的选择菜单设置了自定义 CSS。

一个例子是[http://carwoo.com/](http://carwoo.com/)

如果我转到该网站的移动版本，它会为我提供我期望在我的移动浏览器上出现的默认下拉菜单。当我在手机上请求网站的桌面版本时，我看到了一个更难导航的自定义下拉菜单。

我的问题是选择标签的哪些属性对此负责？编辑样式表时，如何确保在移动设备上获得默认选择菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:48:54.717

该网站上的自定义下拉菜单不是选择标签，而是几个`ul`：

```
<li id="makes_drop_down" class="droppable">
  <div id="make_name" class="selection">Select Make</div>
  <div class="arrow">▼&lt;/div>
  <div class="drop-down" style="display: block; ">
    <div class="spanner"></div>
    <ul class="drop-down-items">
      <li class="grouped-drop-down-items">
        <ul>
         <li class="drop-down-item"><a href="#" data-make-id="80000001">Acura</a></li>
         ...
        </ul>
      </li>
      <li class="grouped-drop-down-items">
        <ul>
          <li class="drop-down-item"><a href="#" data-make-id="80000015">GMC</a></li>
          ...
         </ul>
      </li>
      <li class="grouped-drop-down-items">
        <ul>
         <li class="drop-down-item"><a href="#" data-make-id="80000002">MINI</a>
         ...
        </ul>
      </li>
    </ul>
  </div>
</li> 
```

您创建的任何常规`select`都应使用设备浏览器的标准下拉菜单。

# java - java long 数据类型转换为无符号值

> ID：13115015
> 
> 赞同：0
> 
> 时间：2012-10-29T01:54:02.230
> 
> 标签：java, long-integer, unsigned

我正在将一些 C++ 代码移植到 Java 代码中。

java中没有可以容纳64位的无符号数据类型。

我有一个哈希码，它存储在 Java 的`long`数据类型中（当然是签名的）。

```
long vp = hashcode / 38; // hashcode is of type 'long' 
```

因为这里的 38 大于 2，所以得到的数字可以安全地用于 java 中的任何其他算术。

问题是如果“哈希码”中的有符号位设置为 1 会怎样。我不想在变量 vp 中得到负值。我想要一个正值，就好像数据类型是无符号的一样。

PS：由于性能问题，我不想为此目的使用 Biginteger。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:09:42.857

Java 的原始整数类型被认为是有符号的，您对此无能为力。但是，根据您的需要，这可能无关紧要。

由于整数都是在二进制补码中完成的，所以有符号和无符号在二进制级别是完全相同的。不同之处在于您如何解释它们以及在某些操作中。具体来说，右移、除法、取模和比较不同。无符号右移可以用`>>>`操作符来完成。只要您不需要缺少的运算符之一，您就可以`long`完美地使用 s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:05:15.493

如果您可以使用第三方库，例如，您可以使用 Guava 的[`UnsignedLongs`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/primitives/UnsignedLongs.html)类将`long`值视为无符号用于多种用途，包括除法。（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:41:10.090

那么这就是我如何解决这个问题。将哈希码右移 1 位（除以 2）。然后将该右移数字除以 19（即 38/2）。所以基本上我将这个数字除以 38，就像它在 c++ 中所做的那样。我得到的值与我在 c++ 中得到的值相同

# php - 警告：升级 PHP 时从 joomla 中的空值创建默认对象

> ID：13115021
> 
> 赞同：2
> 
> 时间：2012-10-29T01:55:01.650
> 
> 标签：php, joomla

我已经为这个问题搜索了很多。但是找不到确切的答案。我收到此错误警告：在第 85 行从 mod_random_image/helper.php 中的空值创建默认对象。我的代码如下：

```
 58         function getImages(&$params, $folder)
 59         {
 60                 $type           = $params->get( 'type', 'jpg' );
 61 
 62                 $files  = array();
 63                 $images = array();
 64 
 65                 $dir = JPATH_BASE.DS.$folder;
 66 
 67                 // check if directory exists
 68                 if (is_dir($dir))
 69                 {
 70                         if ($handle = opendir($dir)) {
 71                                 while (false !== ($file = readdir($handle))) {
 72                                         if ($file != '.' && $file != '..' && $file != 'CVS' && $file != 'index.html' ) {
 73                                                 $files[] = $file;
 74                                         }
 75                                 }
 76                         }
 77                         closedir($handle);
 78 
 79                         $i = 0;
 80                         foreach ($files as $img)
 81                         {
 82                                 if (!is_dir($dir .DS. $img))
 83                                 {
 84                                         if (preg_match("#$type#i", $img)) {
 85                                                 $images[$i]->name       = $img;
 86                                                 $images[$i]->folder     = $folder;
 87                                                 ++$i;
 88                                         }
 89                                 }
 90                         }
 91                 }
 92 
 93                 return $images;
 94         } 
```

我将 PHP 版本升级到 5.4.8 后出现此错误。我也查看了 joomla 配置文件。我设置了 var $error_reporting = '-1'; 在 joomla 配置中。但我仍然遇到同样的错误。我以前没有使用过 Joomla。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:03:31.067

发生错误是因为`$images[$i]`尚未将其定义为对象，并且 PHP`stdClass`隐式实例化了默认对象（类型为 ）。要解决这个问题，只需在第 85 行之前添加这一行：

```
$images[$i] = new stdClass(); 
```

# eclipse - 调试maven构建配置时缺少源

> ID：13115023
> 
> 赞同：0
> 
> 时间：2012-10-29T01:55:19.060
> 
> 标签：eclipse, maven-3, m2eclipse

我有一个`maven build`运行配置，用于启动 tomcat 服务器。几乎没有这是`tomcat:run`由 m2eclipse 插件执行的命令。

在我需要跳入 Spring 源代码之前，这一切都很好。我无法为调试器设置源代码查找！！！所有 jar 都有其源代码位置设置，因此我可以通过`Ctrl+click`. 但是调试器似乎不理解这个设置，我试图将项目添加到源代码查找中，但这仅适用于该项目中的代码而不是其依赖项中的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:19:20.010

试试 Igor 的[源代码查找功能](https://github.com/ifedorenko/com.ifedorenko.m2e.sourcelookup)，它将帮助您在外部进程执行期间自动获取 jar 源（在您的情况下是 maven 插件调用）。

# symfony - 想象一下图书馆不能在共享主机中工作

> ID：13115026
> 
> 赞同：0
> 
> 时间：2012-10-29T01:55:31.247
> 
> 标签：symfony

所以我正在开发一个需要调整图像大小的网站，所以我决定使用使用想象库的 avalanche123/imagine-bundle 在我的本地一切正常，然后我将项目上传到共享主机当我转到想象生成的 url bundle 打印一个零所以我试图找出问题所在，我发现它一直执行到这一行

```
$image = $this->imagine->open($sourcePath); 
```

$this->imagine 是一个具有类 Imagine\Image\ImagineInterface 的对象

因此，当执行此行时，它只返回 0 没有抛出异常，日志中也没有显示任何内容而且我真的不知道想象在里面是如何工作的，似乎没有其他人有这个问题所以有人知道是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:56:08.897

[AvalancheImagineBundle](https://github.com/avalanche123/AvalancheImagineBundle)使用[Imagine](https://github.com/avalanche123/Imagine) PHP 库来计算图像。如[自述文件](https://github.com/avalanche123/Imagine/blob/develop/README.md)中所述：

> 根据所选的 Image 实施，您可能需要以下之一：
> 
> *   GD2
> *   想象一下
> *   魔术师

看来您可以选择具有以下配置的驱动程序：

```
avalanche_imagine:
    driver: gd 
```

该值可以是`gd`，`imagick`或`gmagick`似乎`gd`是默认值。继续通过输出查看这三个中的任何一个是否安装在共享主机上`phpinfo();`。只需搜索特定的字符串，看看它是否可用。

# java - BlueJ 中的循环输入（无限循环）

> ID：13115028
> 
> 赞同：1
> 
> 时间：2012-10-29T01:55:40.637
> 
> 标签：java, infinite-loop, bluej

我正在为学校做一个项目，现在我很难过。当我运行我的项目时，VM 似乎卡在一个循环中并且无法加载（应该会弹出一个控制台，允许我为 CombinationLock 类`setDigit()`方法输入字符）。我相信这与我`Interface.java`课堂上的 for 循环有关。如果有人可以看看并引导我朝着正确的方向前进，那将不胜感激。非常感谢！

**接口.java**

```
import java.util.*;
public class Interface
{
    public static void main() {
        Scanner in = new Scanner(System.in);
        CombinationLock combo = new CombinationLock();    

        for(int i = 0; i < 3; i++) {
            String ltr = in.nextLine();
            combo.setDigit(ltr.charAt(0), i);
            System.out.println("Digit " + i + " has been set to " + ltr);
        }
    }
} 
```

**组合锁.java**

```
public class CombinationLock
{
    String[] combo = new String[3];

    public CombinationLock() { }

    public boolean setDigit(char letter, int index) {
        if (Character.isDigit(letter)) {
            return false;
        }
        combo[index] = String.valueOf(letter);
        return true;
    }

    public boolean unlock(String combo) {
        if (combo.length() > 3) {
            return false; //Longer then it can be, not valid
        }

        char[] comboArray = combo.toCharArray();
        for (char c : comboArray) {
            if (Character.isDigit(c)) {
                return false; //Contains numbers, not valid
            }
        }

        boolean valid = true;
        for (int i = 0; i < 3; i++) {
            if (combo.charAt(i) != comboArray[i] && valid == true) {
                valid = false;
                break;
            }
        }

        return valid;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:04:06.997

您已在类中初始化 `combo`数组`CombinationLock`，长度`0`为`String[] combo = {};`. 这是`ArrayIndexOutOfBoundsException`你打电话时的原因`combo.setDigit(ltr.charAt(0), i);`。请更正初始化。我相信您想捕获 3 个输入，在这种情况下，请 使用长度 3 进行初始化`combo`，如下所示：`CombinationLock`

```
 String[] combo = new String[3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:07:51.020

你的问题是（主要方法的签名是错误的）

```
 public static void main() { 
```

它应该是

```
 public static void main(String[] args) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:13:48.310

我发现我的错误在哪里，使用 BlueJ IDE 必须在控制台显示之前向控制台输出一些内容并允许您输入数据，因此它从未弹出，因为我从未使用过`System.out.println`或`System.out.print`. 这样做之后，控制台弹出并允许我输入我的数据。感谢您的所有建议和帮助！

# ios6 - 如何在 Facebook SDK 3.1 中请求更少的权限？

> ID：13115030
> 
> 赞同：12
> 
> 时间：2012-10-29T01:56:14.853
> 
> 标签：ios6, facebook-ios-sdk

我正在尝试在我们的应用程序中实现 Facebook SDK 3.1，严格来说是为了允许用户在他们自己的墙上发布我们的应用程序。我们根本不想要任何用户的信息。我们只是希望他们非常喜欢使用该应用程序，以便他们分享有关它的信息，以便其他人购买并下载它。

我按照以下 Facebook 页面上的说明开始操作以及 Facebook 登录：

[https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.1/)

在运行 iOS 6.0 的设备上，我很失望地看到以下代码块，它应该是请求基本信息：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    return [FBSession openActiveSessionWithReadPermissions:nil
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
} 
```

导致向用户显示以下 UIAlertView 对话框消息：

```
"App Name" would like to access your basic profile info and list of friends. 
```

作为最终用户，我想知道为什么这个应用程序需要我的朋友列表。实际上，我们的应用程序不需要朋友列表，并且会担心应用程序会开始向我的朋友发送垃圾邮件（就像我们授予权限的许多应用程序一样）。

再次，假装我是最终用户，在不情愿地授予权限后，我转到浏览器并访问我在 Facebook 中的帐户设置并选择应用程序。然后我选择我刚刚授予访问权限的应用程序。它说：

这个应用程序需要：

```
 Your email address
  Your birthday
  Your location 
```

同样，该应用程序不需要这些东西。

在 Facebook 的同一应用程序设置页面上，它有一个“最后一次数据访问”->“查看详细信息”选项。当我单击它时，它会显示以下内容：

```
Last Data Access
In the last 90 days, "App Name" accessed the following information on your behalf:
Basic Information
Education History, Current City and Work History 
```

剧情变厚了！我的应用不需要教育历史、当前城市和工作历史。

这让我感到困扰的原因是，我相信用户会拒绝这些访问请求，因为他们不明白为什么我的应用程序需要所有这些东西。

我如何真正追求最低权限，以便我可以允许用户从我们的应用程序在他们自己的墙上发布关于我们的应用程序的信息？

有没有人能够成功地做到这一点？

# python - 无法导入 pymongo ubuntu

> ID：13115031
> 
> 赞同：7
> 
> 时间：2012-10-29T01:56:20.557
> 
> 标签：python, mongodb, pymongo

我目前正在运行带有 mongodb 2.2 和 pymongo 2.3 版的 Ubuntu 12.04。我正在尝试使用 Twitters API 收集一些信息，但在尝试导入 mymongo 时出现错误。这是我所拥有的：

```
import pycurl, json
import pymongo

STREAM_URL = "https://stream.twitter.com/1/statuses/filter.json"
WORDS = "track=#obama"
USER = "myuser"
PASS = "mypass" 
```

ImportError：没有名为 pymongo 的模块有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T21:55:26.363

我有同样的问题。Pymongo 与`bson`包冲突。这对我有用：

```
sudo pip uninstall pymongo
sudo pip uninstall bson
sudo apt-get remove python-bson
sudo apt-get remove python-gridfs    # not sure if it's necessary
sudo pip install pymongo -U 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T00:37:58.333

我遇到了同样的问题，我像这样手动安装它：

```
$ wget http://pypi.python.org/packages/source/p/pymongo/pymongo-2.3.tar.gz
$ tar xzf pymongo-2.3.tar.gz
$ cd pymongo-2.3
$ python setup.py install 
```

为我工作。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-22T22:08:46.483

我遇到了同样的问题。简单的方法是安装 pip 并安装 pymongo。

wget --no-check-certificate [https://bootstrap.pypa.io/get-pip.py](https://bootstrap.pypa.io/get-pip.py) python get-pip.py python -m pip install pymongo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-07T13:32:48.547

光盘 /tmp/

wget --no-check-certificate [https://github.com/mongodb/mongo-python-driver/archive/master.zip](https://github.com/mongodb/mongo-python-driver/archive/master.zip)

解压master.zip

cd mongo-python-driver-master/

python setup.py 安装

# android - onClick 阻塞 onFling

> ID：13115032
> 
> 赞同：1
> 
> 时间：2012-10-29T01:56:22.153
> 
> 标签：android

在我的活动中，我有一个 imageView（在顶部）和 textView（在底部）。使用这两个视图，我显示了一个图像及其相应的描述。我已经使用“SimpleOnGestureListener”实现了投掷......这样用户就可以浏览不同的图像及其相应的描述（在每次投掷时，我都会加载不同的图像并将其展示给用户）。

现在，当我为 ImageView 添加 onClickListener 时问题就开始了（我需要检测 onClick 以便我可以显示带有图像描述的 Toast）。但是 onClick 似乎阻止了投掷事件。我如何检测一扔。

已经在这个论坛中解决了以下问题（以及其他几个问题）..

[android - onTouch 优先于 onClick](https://stackoverflow.com/questions/6664756/android-giving-ontouch-priority-over-onclick)

[Android onClick 阻塞 onFling](https://stackoverflow.com/questions/4249036/android-onclick-blocking-onfling)

但仍然无法确定解决方案。

下面给出的是代码

 `````
public class MainActivity extends Activity{
    ImageView m_imageView;
    String[] m_imageNames = { "img1__", "img2__", "img2__"};
    int m_index = 0;
    Resources m_res;
    Drawable m_drawable;

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       Log.v("INFO", "Inside oncreate");

       m_imageView = (ImageView)findViewById(R.id.imageView1);
       m_res = getResources();
       int imageId = m_res.getIdentifier(m_imageNames[m_index], "drawable", getPackageName());
       Drawable drawable = m_res.getDrawable(imageId);
       m_imageView.setImageDrawable(drawable);

       m_imageView.setOnClickListener(new View.OnClickListener() {

       @Override
       public void onClick(View v) {
          Log.v("INFO", "Inside onClick");
       }
       });
  }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
     Log.v("INFO", "onTouchEvent detected");
     return gestureDetector.onTouchEvent(event);
  }

  SimpleOnGestureListener simpleOnGestureListener
   = new SimpleOnGestureListener(){

    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, 
        float velocityY) {
                //Fling code goes here
        }
   };

   GestureDetector gestureDetector = new GestureDetector(null, SimpleOnGestureListener);

} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:43:23.613

这些方法通常有`boolean`返回，这表明此事件已被消耗，不应进一步传播。尝试更改返回值。``

# excel - excel vba 组合框

> ID：13115034
> 
> 赞同：2
> 
> 时间：2012-10-29T01:56:29.417
> 
> 标签：excel, combobox, vba

我想使用 VBA 填充来自另一个工作表的行（不是列）值的内容的组合框。如果我将列表分配给行的范围，我只会看到第一个值，所以我猜 excel 坚持有一列范围。所以，我正在尝试添加项目：

```
Private Sub ComboBox2_GotFocus()

 Dim i As Integer
 Dim myArray As Variant

 myArray = Worksheets("data").Range("A4:PB4").Value

 For i = LBound(myArray) To UBound(myArray)
  Me.ComboBox2.AddItem myArray(i)
 Next

End Sub 
```

两个问题。我不认为这是一个数组，它是一个范围。而且，如果我使用 add，我需要每次都清除它，但是在同一个例程中使用 ComboBox2.Clear 会以某种方式清除它，即使它已加载？所以什么都没有出现:(

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:36:13.137

这似乎起到了作用：

```
Private Sub ComboBox2_GotFocus()

  myArray = WorksheetFunction.Transpose(Worksheets("data").Range("A4:PB4"))
  With Me.ComboBox2
   .List = myArray
  End With

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:39:57.030

您可能希望避免此处的数组声明，而只使用您正在使用的东西的本机格式（范围）。在填充组合框之前调用该`clear`方法似乎对我来说很好。它清除然后重新填充。?

```
Private Sub Worksheet_Activate()
 Dim i As Integer
 Dim myRange As Range
 ComboBox1.Clear
 Set myRange = Worksheets("data").Range("A4:PB4")
 Dim c As Range
 For Each c In myRange 
  Me.ComboBox1.AddItem c.Value
 Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:32:26.623

您犯的唯一错误是没有转置并将 myArray 更改为键入“Range”

```
 myArray = WorksheetFunction.Transpose(Worksheets("data").Range("A4:PB4"))
     For each cell in myArray
     Me.combobox2.additem(cell)
    Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T13:26:28.657

更好的解决方案：

```
 Private Sub ComboBox1_GotFocus()

  Dim myArray As Variant

  lastcol = Worksheets("data").Range("A4").End(xlToRight).Column
  With Worksheets("data")
   Set SourceRng = .Range(.Cells(4, 1), .Cells(4, lastcol))
  End With
  myArray = WorksheetFunction.Transpose(SourceRng)
  With Me.ComboBox1
   .List = myArray
  End With

 End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-29T22:32:50.990

他是解决方案：

```
Sub PopulateComboBox()
    Dim n As Integer, i, names() As String
    n = WorksheetFunction.CountA(Rows("1:1"))
    ReDim names(n) As String
    For i = 1 To n
        names(i) = Cells(1, i)
        NameForm.ComboBox1.AddItem names(i)
    Next i

End Sub 
```

# dynamic - KineticJS - 动态创建形状

> ID：13115035
> 
> 赞同：2
> 
> 时间：2012-10-29T01:56:33.760
> 
> 标签：dynamic, shapes, kineticjs

所以我试图根据从数据库中提取的数字动态创建形状。我尝试了最合乎逻辑的方法，将 for 循环包裹在创建形状并随后将形状添加到图层中。但是由于某种我不知道的原因，即使存储在图层中的形状应该位于不同的位置（和不同的属性），它也会不断地重新修改相同的形状。

我的代码如下：

```
function graph(w) {
        barLayer.removeChildren();
        var bar = new Array();

        for (var i = 1; i <= array.length; i++) {
            var pos = i * Math.PI / 30;
            var scaleUp = (i / array.length) * 2.5;
            bar[i-1] = new Kinetic.Shape({
                drawFunc: function(context) {
                    context.beginPath();
                    context.moveTo(radius2, radius2);
                    context.arc(radius2, radius2, scaleUp * radius2, (- Math.PI / 2) - w + pos, (- Math.PI / 2) - w + (Math.PI / 30) + pos, false);
                    context.closePath();
                    this.stroke(context);
                    this.fill(context);
                },
                fill: "#333",
                stroke: "#000",
                strokeWidth: 4,
                x: centerX,
                y: centerY,
                offset: [200,200],
            });
            console.log("Starting: ", (- Math.PI / 2) - w + pos, "/ Ending: ",  (- Math.PI / 2) - w + (Math.PI / 30) + pos);
        }

        for (var n = 0; n < bar.length; n++) {
            barLayer.add(bar[n]);

        }
        barLayer.draw();
    } 
```

从将形状放入数组到创建新形状并将其添加到 for 循环中，我已经尝试了所有方法。我肯定错过了一些东西。

我对该主题进行了一些搜索，发现一条与我正在尝试做的事情相关的评论：

> 基本上，您需要保留一个形状对象数组，并在添加新形状时将新对象推送到数组上。在 kin 对象的 setDrawStage() 方法中，只需循环遍历数组并绘制每个对象。我会在实验室发布后通知您。

我已经到处寻找 setDrawStage() 方法，但找不到太多与之相关的数据。他还表示将 for 循环放在方法中，这有点令人困惑，因为我不仅想绘制形状，而且还想将它存储在一个图层中（就像我对其他所有形状所做的那样）。

有人可能有解决方案吗？非常感谢先进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:00:46.450

我认为您遇到了 JavaScript 闭包问题。更多关于：

[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

尝试将 for 循环内的所有逻辑移动到一个函数中以引入作用域。另外，为什么不使用 Kinetic.Shape，而不是使用 Kinetic.Circle？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T14:14:49.093

据我所知，您脚本中的 X 和 Y 没有变化，所以您的形状总是从同一个位置开始？

# php - 如何使用适用于 Linux 的 Microsoft ODBC 驱动程序正确显示“文本”数据？当前显示为随机字符

> ID：13115039
> 
> 赞同：1
> 
> 时间：2012-10-29T01:58:17.403
> 
> 标签：php, sql-server, odbc

我试图在 MS SQL 数据库中显示字段的内容，其数据类型是“文本”。当我在 PC 上使用 MS Excel 连接到数据库时，值类似于：

> 发货时间：12 年 10 月 18 日收费 IPEC 内容编号：XXX XXX XXXX

当我使用适用于 Linux 的 Microsoft ODBC 驱动程序通过 PHP 连接到数据库时，文本字段的输出将显示随机字符，每次运行完全相同的脚本时这些字符都会略有不同。这是它最后四次输出的内容：

> Xisep)!ØwXment.class.php))
> 
> 5isep)!ment.class.php))
> 
> µ}isep)!Ø}ment.class.php))
> 
> t)!!Owner_IDt)Ø©Ø8

不知道它从哪里得到“ment.class.php”位。这看起来像是我的一个类的名称的结尾，但不是这个特定脚本中包含的一个。是驱动坏了还是什么？所有其他数据类型（int、varchar、datetime 等）似乎都能正确显示，问题似乎只发生在这一文本字段中。

这是代码：

```
<?php

require('ConnectWise.inc.php');

$config = new CW_Config;

// Connect to database
$dbcnx = odbc_connect("ConnectWise", $config->db_username, $config->db_password);

// Query database
$query = "select * from Billing_Log where Invoice_Number = '24011'";
$result = odbc_exec($dbcnx, $query);
while ($row = odbc_fetch_array($result)) {
    echo $row['Top_Comment'] . "\n";
}

odbc_close($dbcnx); 
```

这是我最近几次尝试的输出：

> \3È¶ä!!¶äY！
> 
> öÈö§!!ö§Y！
> 
> &Èö×!!ö×Y！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:05:38.077

看起来你正在溢出。由于某种原因，SQL 将您的文本字段的长度作为 0 传递，这对 SQL 表示“长”，但对 PHP 表示“我不知道”，因此 PHP 在其预期数据（或其他内容）的位置显示其内存中的任何内容像那样 - 任何 PHP 专家愿意解释吗？）。

我以前用 varchar(max) 见过这个，但不是文本。（转换为）文本通常是修复它的方法。所以也许我错了。

希望这个对你有帮助。我不是 PHP 开发人员，我只是偶尔使用它，这听起来很像我以前经历过的痛苦经历 :)

# r - 从另一个 data.frame 回填

> ID：13115040
> 
> 赞同：4
> 
> 时间：2012-10-29T01:58:20.570
> 
> 标签：r

我经常遇到必须从另一个数据源“填写”信息的情况。

例如：

```
x <- data.frame(c1=letters[1:26],c2=letters[26:1])
x[x$c1 == "m","c2"] <- NA
x[x$c1 == "a","c2"] <- NA

   c1   c2
1   a <NA>
2   b    y
3   c    x
4   d    w
5   e    v
6   f    u
7   g    t
8   h    s
9   i    r
10  j    q
11  k    p
12  l    o
13  m <NA>
... 
```

现在，有了那个缺失的变量，我想检查并使用单独的 data.frame 填充它，让我们称之为`y`

```
y <- data.frame(c1=c("m","a"),c2=c("n","z")) 
```

所以，我希望用 y 填充 x。（第 13 行应该是 c("m","n")，第 1 行应该是 c("a","z")）

我用来处理这个问题的方法目前看起来很复杂和间接。你的方法是什么？请记住，我的数据不一定像这样的顺序很好，但顺序应该保持在`x`. 我的偏好是不依赖于基础 R 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:11:42.030

`character`如果您处理变量，这将是一个简单得多的命题，而不是`factors`.

我将提出一个简单的 `data.table`解决方案（优雅且易于使用的语法以及许多其他优点）

```
x <- data.frame(c1=letters[1:26],c2=letters[26:1], stringsAsFactors =FALSE)
x[x$c1 == "m","c2"] <- NA
y <- data.frame(c1="m",c2="n", stringsAsFactors = FALSE)
library(data.table)
X <- as.data.table(x)
Y <- as.data.table(y) 
```

为了简化合并，我将创建一个列，指示

```
X[,missing_c2 := is.na(c2)]
# a similar column in Y
Y[,missing_c2 := TRUE]

setkey(X, c2, missing_c2)
setkey(Y, c2, missing_c2)
# merge and replace (by reference) those values in X with the the values in `Y` 
X[Y, c2 := i.c2] 
```

`i.c2`意味着我们使用`c2`from`i`参数的值`[`

这种方法假设不是所有的值 where`c1 = 'm'`都会丢失，`X`并且您不想`c2`用`'m'`where替换所有的值`c1='m'`，只有那些丢失的值

* * *

# 基础解决方案

这是一个基本解决方案——我使用合并，以便`y`data.frame 可以包含`missing`比实际需要更多的替换（即可以具有所有值的`c1`值，尽管只`c1=`需要 m``。

```
 # add a second missing value row because to make the solution more generalizable
x <- rbind(x, data.frame(c1 = 'm',c2 = NA, stringsAsFactors = FALSE) )
missing <- x[is.na(x$c2),]
merged <- merge(missing, y, by = 'c1')

x[is.na(x$c2),] <- with(merged, data.frame(c1 = c1, c2 = c2.y, stringsAsFactors = FALSE)) 
```

如果你使用`factors`，你会遇到一堵痛苦的墙，确保水平对应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T02:19:37.103

在base R中，我相信这对你有用：

```
nas <- is.na(x$c2)
x[nas, ] <- y[y$c1 %in% x[nas, 1], ] 
```

# ruby - 如何在 OS X 10.8 Mountain Lion 上安装 Ruby 1.8.7

> ID：13115044
> 
> 赞同：9
> 
> 时间：2012-10-29T01:59:05.360
> 
> 标签：ruby, osx-mountain-lion, homebrew, ruby-1.8.7

我一直在寻找最好的方法来做到这一点，并找到了一种比同时安装 tcl 和 tk 更简单的方法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-29T01:59:05.360

```
# Install homebrew
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"

# Install command line tools for Xcode -- requires free Apple ID
http://developer.apple.com/downloads

# Install requirements
brew update
brew tap homebrew/dupes
brew install autoconf automake apple-gcc42 rbenv ruby-build

# rbenv method
CONFIGURE_OPTS="--without-tcl --without-tk" rbenv install 1.8.7-p370

# rvm method
rvm install 1.8.7 --without-tcl --without-tk 
```

# ruby-on-rails - Rails：ajax 将表单提交到具有嵌套资源的操作

> ID：13115049
> 
> 赞同：1
> 
> 时间：2012-10-29T02:01:05.300
> 
> 标签：ruby-on-rails, ruby, ajax, ruby-on-rails-3

这是**练习**模型的**显示**视图的一部分：

 **```
<div id="smoke_screen" style="min-height:100px">

    <% question =  @exercise.random_question %>
    <b class="question"><%= question.name %></b>

    <ul>
        <% question.answers.each do |answer| %>
            <li><%= answer.content %></li>

        <% end %>
    </ul>

</div> 
```

它在浏览器中看起来像这样：

![在此处输入图像描述](../Images/37ababd72af2f01c53a14231a84b5f0b.png)

@answer 和 @question 是练习的嵌套模型（练习 has_many 问题，问题 has_many 答案），这都是从练习模型的显示视图中查看的。

我正在尝试为每个答案添加一个单选按钮，并对我将创建的名为“save_answer”的操作进行 ajax 调用。此操作将接收问题和答案对象，保存答案并返回另一个问题，该问题将使用 ajax 替换 #smoke_screen。

我是 Rails 的新手，`form_to`用属性尝试了很多东西，但都`:remote => true`没有成功。我将不胜感激有关如何解决此问题的任何方向**

# oncheckedchanged - RadioGroup.setOnCheckedChangeListener(this) 导致 NullPointerException

> ID：13115050
> 
> 赞同：2
> 
> 时间：2012-10-29T02:01:06.643
> 
> 标签：oncheckedchanged

我来自德国，是使用 java 和 Android 编程的新手。在我的第一个应用程序中，我有 2 个页面。第一页（aktivity_main.xml）此时是空的。在那里，我想建立一个listView。当我进入菜单并单击***“Hinzufügen”***（--> 表示英语中的“添加”）时，第二页（mypage）打开。

在此，我可以输入我的输入。这里开始我的问题。（我搜索了几天，但不管我怎么做，它都不起作用！）当我在无线电组中更改状态时，文本*（TextDefinitionWert：“Bitte geben Sie Ihren gewünschten Maximalwert ein:”）* 应该更改为另一个文本，保存在字符串中.xml。但它不起作用。只有一个**NullPointerException**

这是我的**MainActivity.Java**代码：

```
package ilyas.ausgabenkontrolle;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.*;
import android.widget.RadioGroup.*;

public class MainActivity extends Activity implements RadioGroup.OnCheckedChangeListener {

TextView TextHeaderNeuBearbeiten;
TextView TextDefinitionWert;
RadioButton RadioUp;
RadioButton RadioDown;
EditText EditName;
EditText EditWert;
Button ButtonOKnb;
RadioGroup RadioGroup;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextHeaderNeuBearbeiten = (TextView) findViewById(R.id.TextHeaderNeuBearbeiten) ;
    TextDefinitionWert = (TextView ) findViewById(R.id.TextDefinitionWert);
    RadioUp = (RadioButton) findViewById(R.id.RadioUp);
    RadioDown = (RadioButton) findViewById(R.id.RadioDown);
    EditName = (EditText) findViewById(R.id.EditName);
    EditWert = (EditText) findViewById(R.id.EditWert);
    ButtonOKnb = (Button) findViewById(R.id.ButtonOKnb);
    RadioGroup = (RadioGroup) findViewById(R.id.radioGroup1);
//the next line causes the Exception. When I delete this line, the Emulator starts, but when I change the stats, nothing happens:
    RadioGroup.setOnCheckedChangeListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.toString().equals("Hinzufügen")) {
        setContentView(R.layout.neuesbearbeiten);
    }
    return true;
}

public void onCheckedChanged(RadioGroup RadioGroup, int checkedId) {
    // TODO Auto-generated method stub
switch (checkedId) {
    case R.id.RadioUp:
        TextDefinitionWert.setText(R.string.definitionup);
        break;
    case R.id.RadioDown:
        TextDefinitionWert.setText(R.string.definitiondown);
        break;
    }
} 
```

}

（因为我是新来的，所以不能发图片。）

LogCat 是这样的：

```
ilyas.ausgabenkontrolle/ilyas.ausgabenkontrolle.MainActivity}: java.lang.NullPointerException
at android.app.activityThread.performLaunchActivity(ActivityThread.java:1956)
at android.app.activityThread.handleLaunchActivity(ActivityThread.java:1981)
at android.app.activityThread.access$600(ActivityThread.java:123)
at android.app.activityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at ilyas.ausgabenkontrolle.MainActivity.onCreate(MainActivity.java:37)
at android.app.Activity.performCreate(Activity.java:4465)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.activityThread.performLaunchActivity(ActivityThread.java:1920)
... 11 more 
```

我希望你能帮助我。我不知道为什么会这样。

# scala - scala匿名函数缺少参数类型错误

> ID：13115053
> 
> 赞同：27
> 
> 时间：2012-10-29T02:01:55.190
> 
> 标签：scala

我写了以下

```
def mapFun[T, U](xs: List[T], f: T => U): List[U] = (xs foldRight List[U]())( f(_)::_ ) 
```

当我这样做的时候

```
def f(x: Int):Int=x*x
mapFun(List(1,2,3), f) 
```

它工作得很好。但是，我真的很想做以下工作

```
mapFun(List(1,2,3), x=>x*x) 
```

它抱怨“缺少参数类型”。我知道我可以使用柯里化，但是有没有办法仍然使用匿名函数来处理我上面的非柯里化 def？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-29T02:12:24.317

在我看来，因为“f”与“xs”在同一个参数列表中，所以您需要提供一些关于 x 类型的信息，以便编译器可以解决它。

在您的情况下，这将起作用：

```
mapFun(List(1,2,3) , (x: Int) => x * x) 
```

你看到我如何通知编译器 x 是一个 Int 吗？

你可以做的一个“技巧”是currying f。如果您不知道什么是柯里化，请查看： http: [//www.codecommit.com/blog/scala/function-currying-in-scala](http://www.codecommit.com/blog/scala/function-currying-in-scala)

你最终会得到一个这样的 mapFun：

```
def mapFun[T, U](xs: List[T])(f: T => U): List[U] = 
    (xs foldRight List[U]())( f(_)::_ ) 
```

这将起作用：

```
mapFun(List(1,2,3))(x => x * x) 
```

在最后一次调用中，x 的类型在编译器检查第一个参数列表时被解析。

**编辑：**

正如 Dominic 指出的那样，您可以告诉编译器您的类型是什么。导致：

```
mapFun[Int, Int](List(1,2,3), x => x * x) 
```

干杯!

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-29T02:30:12.807

您在这里遇到的 scala 类型系统的限制是类型信息在参数组中从左到右**流动，而不是****在参数组内**从左到右流动。

这意味着`T`通过提供 a来指定类型参数`List[Int]`不会将该信息提供给组内的其他参数，例如`f`. 这会导致缺少参数类型错误。`f`但如果 f 是下一个参数组的一部分，它将提供它。这就是柯里化函数方法有效的原因。

即，如果你这样定义它：

```
def mapFun[T, U](xs: List[T])(f: T => U): List[U] = (xs foldRight List[U]())( f(_)::_ ) 
```

`T`您在第一个参数组中定义的类型参数： `(xs: List[T])`as`Int`将可用于下一个参数组：`(f: T => U)`。因此，现在您不必`T`在调用站点明确指定。

# java - 静态 Java 命令行解析器的生成器

> ID：13115055
> 
> 赞同：0
> 
> 时间：2012-10-29T02:02:44.100
> 
> 标签：java, parsing, parser-generator

我正在尝试为 Java 程序的命令行参数制作解析器，以免重新发明轮子很棒的工具，但它们在运行时创建对象，我需要我的解析是静态的，以免用不必要的功能（和内存）弄乱代码，所以我真正在寻找的是一个命令行解析器生成器，在那个线程中我找到了 XTC、Rats 和 JavaCC，但它们看起来工作量很大，而且我认为我需要的更简单。

最后我决定使用JavaCC制作我的解析器，这个问题只是为了确保没有人知道更简单的方法......

谢谢

编辑：JavaCC 线程是一个哑弹，因为它逐个字符地工作，不太适合命令行解析

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:02:27.250

这个[相关的 SO question](https://stackoverflow.com/questions/367706/is-there-a-good-command-line-argument-parser-for-java)对命令行解析器库有很多有用的建议。我想专注于为什么经典的解析器生成器不是解决问题的好方法。

有两个根本原因：

1.  命令行语法需要简单、易于记忆、与一般样式/约定中的其他命令行语法一致，并且具有最小的语法噪音。传统 PGS 的问题在于，每种语法都与其他语法不同，并且需要明确解析……这往往会导致句法噪音。（好吧，如果你有纪律，你可以避免这些陷阱，但是......）

    相比之下，典型参数解析器库的 API*鼓励*程序员使用一致的风格；例如，`-x`与`--longForm`，选项优先，`--`意味着没有更多选项，等等。而且因为“语言”不关心歧义，程序员可以随意地非正式地解决这个问题（没有过多的语法）或简化语法。

2.  解析器生成器要么生成解析树，要么要求您将代码嵌入到语法中。这些都不是命令行解析的理想选择，因为它们都增加了应用程序代码的复杂性来处理这个问题。

    相比之下，典型的参数解析器库创建或填充平面数据结构，这更容易处理。

* * *

您似乎也过度担心性能和内存使用情况：

> ...我需要我的解析是静态的，以免用不必要的功能（和内存）使代码混乱

第一个观察是这可能无关紧要。与应用程序的其余部分相比，运行时对象的数量和大小很可能是微不足道的......以及在解析参数之前在正常 JVM 启动期间发生的所有隐藏的东西......以及之后。

第二个观察结果是基于 PGS 的解决方案可能具有相当的开销。除了生成解析树（例如）之外，生成的解析器还需要初始化和保留一堆特定于语法的解析器表。当然，生成的解析器代码也往往很大。

# git - 如何使用 GitHub 管理大数据文件？

> ID：13115058
> 
> 赞同：21
> 
> 时间：2012-10-29T02:03:10.867
> 
> 标签：git, version-control, github

我有一个（目前）120 MB 的大文本数据文件。

将它放在回购中是一种不好的做法吗？它会影响 GitHub 上的搜索功能吗？

这似乎是个坏主意，因为整个源代码只有 900 行。

不打算更新文件。

可以将它放在 Dropbox 或 Google Docs 上，但它与 repo 是分开的。

如果不是 GitHub，是否有更好的方法来管理/备份大型数据文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:13:36.637

如果满足以下条件，请将其放入 repo：
1-您想要跟踪更改
2-它实际上是项目的一部分，并且您希望人们在克隆 repo 时收到它

如果出现以下情况，请勿将其放入存储库（使用 .gitignore 排除）：
1- 它经常更改，但更改没有意义，并且您不想保留历史记录
2- 它可以在线获得，或者您可以制作它在线提供并在回购中放置链接或其他内容，以便人们知道在哪里可以找到它

如果您没有很多人下载 Dropbox，它是不错的选择，Amazon S3 是您托管它的最佳选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-27T17:48:02.390

有很好的方法来处理这种情况。例如，当我在一个分析数据的项目上工作时，尤其是在清理和预处理步骤之后，共享代码而不是数据集（当然出于数据集大小的原因）是蹩脚的。这是我发现的：

*   [git lfs 大文件存储](https://git-lfs.github.com)，这允许您跟踪和提交二进制文件、数据文件、图像等并将其推送到同一个远程，如果您克隆存储库，您不必提取所有内容。

*   [git-annex](https://git-annex.branchable.com/)使用自己的命令，因此您将分别提交 repo 和附件文件。它看起来非常适合在任何远程设备上管理这些文件，例如硬盘驱动器、s3、谷歌驱动器等等。

[有人在这里对 git-annex 与 git lfs 做了一个很好的比较](https://workingconcept.com/blog/git-annex-vs-git-lfs)，[这篇文章比较了几种简短的方法。](http://blog.deveo.com/storing-large-binary-files-in-git-repositories/)

它们看起来都很棒，git附件目前更成熟，但是git lfs是由我使用的github开发的，这就是我使用git lfs的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T02:12:21.140

您可以将它放在 github 上，但我建议将它放在另一个存储库中并通过子模块链接到它。这将确保文件不会被传输/调整，除非您通过子模块命令明确这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T02:07:35.207

如果文件不需要受版本控制，那么我不愿意将它放在 git hub 上。

根据讨论更新...

来自[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

> 成功运行 git checkout 后，将运行 post-checkout 挂钩；您可以使用它为您的项目环境正确设置工作目录。这可能意味着移动不需要源代码控制的大型二进制文件、自动生成文档或类似的东西。

因此，使用这种机制，您可以将外部存储的数据文件下载到您的工作副本中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T05:27:16.917

pages.github.com 是正确的地方吗？不

github:help 非常清楚地回答了这个问题（我也在找他们）

[https://help.github.com/articles/what-is-my-disk-quota](https://help.github.com/articles/what-is-my-disk-quota)

大型媒体文件

二进制媒体文件与 Git 不能很好地相处。对于这些文件，通常最好使用专为您正在使用的内容设计的服务。

对于视频和音乐等大型媒体文件，您应该自己托管文件或使用 Vimeo 或 Youtube 等服务。

对于像 PSD 和 3D 模型这样的设计文件，像 Dropbox 这样的服务通常工作得很好。这就是 GitHub 的设计者用来保持同步的方法；只有最终的图像资产被提交到我们的存储库中。

和 [https://help.github.com//articles/distributing-large-binaries](https://help.github.com//articles/distributing-large-binaries)

# google-apps - 如何在不尝试修改域的情况下检查域是否启用了 GData 配置 API？

> ID：13115063
> 
> 赞同：0
> 
> 时间：2012-10-29T02:03:50.307
> 
> 标签：google-apps, google-provisioning-api

如何在不尝试修改域的情况下检查域是否启用了 GData 配置 API？

我能找到的唯一能给出 API 失败响应的方法是尝试创建一个新用户。这显然是一种可怕的方式。

![域设置](../Images/2d4e8407774a3287fda2bf8efb22145d.png)

当我通过 OAuth 请求访问时的响应是相同的，与他们是否检查了域设置无关。获取请求（例如获取域的用户列表）不需要启用此设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:22:06.317

由于您正在执行 OAuth，因此您应该拥有您所扮演的管理员的电子邮件地址。尝试切换用户 ipWhitelisted 标志。这个标志几乎没有意义，但如果你成功了，你可能应该把它翻转回来。 [https://developers.google.com/google-apps/provisioning/#updating_a_user_account](https://developers.google.com/google-apps/provisioning/#updating_a_user_account)

如果您愿意添加额外的 OAuth 范围，请考虑添加管理员设置 API 范围并尝试在那里检索设置，我很确定如果 Prov. 管理员设置 API 的只读调用将失败。API 标志在 CPanel 中被禁用。 [https://developers.google.com/google-apps/admin-settings/](https://developers.google.com/google-apps/admin-settings/)

# c++ - 在 (V)C++ (2010) 中创建一个类似于 PEG 的简单解析器

> ID：13115064
> 
> 赞同：0
> 
> 时间：2012-10-29T02:03:58.527
> 
> 标签：c++, parsing, visual-c++

对于一个学校项目，我需要解析一个包含简化的“假”编程语言的文本/源文件来构建一个[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。我看过`boost::spirit`，但是因为这是一个小组项目，而且大多数人似乎不愿意学习额外的库，而且讲师/助教建议倾向于在 C++ 上创建一个简单的库。我想过走那条路。有没有一些例子或关于如何开始的想法？我有一些尝试，但还没有真正成功......

**逐行解析**

*   用一堆正则表达式测试每一行（1个用于过程/函数声明），一个用于赋值，一个用于while等......
    *   但我需要假设一行中没有多个语句：例如。`a=b;x=1;`
*   当我到达容器语句、程序、while 等时，我将增加`indent`. 所以所有嵌套语句都将在此之下
*   当我达到 a`}`我会减少缩进

有更好的想法或建议吗？我需要解析的示例代码（这里非常简化......）

```
procedure Hello {
    a = 1;
    while a {
        b = a + 1 + z; 
    }
} 
```

另一个想法是将整个文件读入一个字符串，然后自上而下。匹配所有过程，然后捕获其中的所有内容，`{ ... }`然后开始匹配语句（以 结尾`;`）或容器`while { ... }`。这类似于 PEG 做事的方式？但我需要阅读整个文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:21:38.467

多通道使事情变得更容易。在第一次通过时，将事物拆分为标记，例如“=”或“abababa”，或引号分隔的字符串或空格块。不要破坏性（保留原始数据），而是将事情分解成简单的块，并且可能有一个小的结构或枚举来描述令牌是什么（即空格、字符串文字、标识符类型的东西等） .

所以你的示例代码变成： identifier(procedure) whitespace( ) identifier(Hello) whitespace( ) operation({) whitespace(\n\t) identifier(a) whitespace( ) operation(=) whitespace( ) number(1 ) 操作(;) 空格(\n\t) 等。

在这些标记中，您可能还希望在行上存储行号和偏移量（这将有助于稍后生成错误消息）。

一个快速的测试是将其转回原始文本。另一个快速测试可能是在 html 或其他内容中转储漂亮的打印版本（您将空白着色为粉红色背景，标识符为浅蓝色，操作为浅绿色，数字为浅橙色），并查看您的标记器是否正在制作感觉。

现在，您的语言可能对空格不敏感。因此，如果是这种情况，请丢弃空格！（C++ 不是，因为`//`注释结束时需要换行来学习）

（注意：专业的语言解析器将尽可能接近一次通过，因为它更快。但你是学生，你的目标应该是让它工作。）

所以现在你有一个这样的令牌流。在这一点上有很多方法。您可以提取一些严重的解析部分并构建一个 CFG 来解析它们。（你知道什么是 CFG 吗？LR(1)？LL(1)？）

一种更简单的方法可能是更临时地做它。查找 operator({) 并通过上下计数找到匹配的 operator(})。查找语言关键字（如过程），然后需要一个名称（下一个标记），然后是一个块（a {）。一个非常简单的语言的临时解析器可能工作得很好。

我已经为一种非常简单的语言做到了这一点，其中解析器由一个非常简单的 PDA 组成。它可能对你们有用。或者它可能不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:34:51.413

既然你提到了 PEG，我想加入我的开源项目：[https ://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_c++](https://github.com/leblancmeneses/NPEG/tree/master/Languages/npeg_c++)

这是一个可以导出C++版本的可视化工具：[http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench)

规则语法文档：[http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-dsl-documentation)

如果我正在编写自己的语言，我可能会查看 System.Linq.Expressions 中的终端/非终端，因为这些对于您的语法规则来说是一个很好的开始。

[http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx](http://msdn.microsoft.com/en-us/library/system.linq.expressions.aspx)

```
System.Linq.Expressions.Expression
System.Linq.Expressions.BinaryExpression
System.Linq.Expressions.BlockExpression
System.Linq.Expressions.ConditionalExpression
System.Linq.Expressions.ConstantExpression
System.Linq.Expressions.DebugInfoExpression
System.Linq.Expressions.DefaultExpression
System.Linq.Expressions.DynamicExpression
System.Linq.Expressions.GotoExpression
System.Linq.Expressions.IndexExpression
System.Linq.Expressions.InvocationExpression
System.Linq.Expressions.LabelExpression
System.Linq.Expressions.LambdaExpression
System.Linq.Expressions.ListInitExpression
System.Linq.Expressions.LoopExpression
System.Linq.Expressions.MemberExpression
System.Linq.Expressions.MemberInitExpression
System.Linq.Expressions.MethodCallExpression
System.Linq.Expressions.NewArrayExpression
System.Linq.Expressions.NewExpression
System.Linq.Expressions.ParameterExpression
System.Linq.Expressions.RuntimeVariablesExpression
System.Linq.Expressions.SwitchExpression
System.Linq.Expressions.TryExpression
System.Linq.Expressions.TypeBinaryExpression
System.Linq.Expressions.UnaryExpression 
```

# iphone - 从相机保存图像

> ID：13115067
> 
> 赞同：1
> 
> 时间：2012-10-29T02:04:46.030
> 
> 标签：iphone, objective-c, ios

这就是我从相机中显示和保存的方式：

```
-(IBAction)Camera:(id)sender{
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects: (NSString *) kUTTypeImage,nil];
        imagePicker.allowsEditing = NO;
        [self presentModalViewController:imagePicker animated:YES];

        newMedia = YES;
    }
}

-(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [self dismissModalViewControllerAnimated:YES];

    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [self scaleThenRotateImage:[info objectForKey:UIImagePickerControllerOriginalImage]];

        imageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:finishedSavingWithError:contextInfo:), nil);
    }

    else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
        // Code here to support video if enabled
    }
} 
```

但问题是，我正在使用一个选择器`ALAsset`，它可以多选然后在所选图像上显示一个复选标记。

因此，例如，我从我的相机（使用上面的代码）拍摄一张照片，然后转到我的相机胶卷以选择带有 的图像（多个/单个），`imageTaken`当我显示选择器时它不会显示任何复选标记，所以我假设解决方案是我需要通过/使用来保存它`ALAsset`。

我应该改变这个：

`UIImagePickerControllerOriginalImage`

至

`UIImagePickerControllerMediaMetadata`

或者我应该做什么/改变？感谢您的回答。

# ios - 使用 ErrorReauthorizedFailedReasonUserCancelled 调用 reauthorizeWithPublishPermissions 处理程序

> ID：13115069
> 
> 赞同：2
> 
> 时间：2012-10-29T02:05:02.943
> 
> 标签：ios, ios6, facebook-ios-sdk

我正在使用 iOS SDK 3.1.1 并尝试同时获得读取和发布权限。正如教程所说，我正在调用 FBSession openActiveSessionWithReadPermissions 并在其处理程序 - 处理程序 A - 调用 [[FBSession activeSession] reauthorizeWithPublishPermissions 只有当处理程序 A 以 FBSessionStateOpen 的会话状态调用时。

当我在 iOS 6 的设置中设置了 facebook 帐户时，reauthorizeWithPublishPermissions 的处理程序 - 处理程序 B - 被正常调用，错误参数为 nil。

但是，如果我没有在 iOS 6 的设置中设置 facebook 帐户，则当应用程序切换到 Safari 以获得发布权限时，将调用处理程序 B 并出现名为“ErrorReauthorizeFailedReasonUserCancelled”的 reauth 错误。

更奇怪的是这个。在调用处理程序 B 之前的这两种情况下，调用处理程序 A 时会话状态为 FBSessionStateOpenTokenExtended。

这些是新 SDK 的正常行为还是预期行为？如果是这样，我是否应该检查处理程序 B 中的错误是否为零？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:56:03.163

发生在我身上，经过一段时间的搜索，我找到了解决方案。您必须在`dispatch_async`openActiveSessionWithReadPermissions 的处理程序 A 中调用 reauthorizeWithPublishPermissions：

```
dispatch_async(dispatch_get_current_queue(), ^{
    [[FBSession activeSession] reauthorizeWithPublishPermissions:permissions
                                                 defaultAudience:FBSessionDefaultAudienceEveryone
                                               completionHandler:^(FBSession *session, NSError *error) {
                                                   // handle the flow here
                                           }];
}); 
```

# c# - Castle.Windsor 代码审查

> ID：13115072
> 
> 赞同：0
> 
> 时间：2012-10-29T02:06:12.540
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, castle-windsor

我在一个工厂类中使用 Castle.Windsor 来创建所需类的实例。您可以在下面找到示例。

```
public class MyFactory : IDisposable
{
    protected readonly IKernel Kernel;

    protected MyFactory(IKernel kernel)
    {
        Contract.Requires<ArgumentNullException>(
            kernel.NotNull(),
            "'kernel' parameter must be initialized.");

        Kernel = kernel;
    }

    public IMyType Create(long param1, long param2)
    {
        return Kernel.Resolve<IMyType>(
            new { numberOfRows, numberOfCells });
    }

    public void Dispose()
    {
        DisposeManagedResources();
    }

    protected virtual void DisposeManagedResources()
    {
        Kernel.Dispose();
    }
} 
```

1.  我不确定我是否需要 IDisposable ......我应该在处置 MyFactory 实例后立即处置内核吗？
2.  我不确定 IKernel（在构造函数中）是在 Create 方法中解析 IMyType 的最佳方法。我想，有人可以建议一个更优雅的版本:)

还有其他想法吗？

谢谢你提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:06:27.083

作为一般规则，一个类应该只处理它拥有的资源。由于该资源是从外部提供的，因此该类不负责处置它，除非该资源的所有权被“明确”传递给它。这种传递所有权的明确性通常是通过文档或使用常见的设计模式来完成的。例如，工厂方法（名为 ）很自然`CreateXXX`地将所有权与返回的实例一起传递给调用者。另一方面，DI 容器包含`Get`、`GetInstance`或`Resolve`方法，它们不会将所有权传递给调用者。

但除此之外，在您的情况下，您正在处理一个 DI 容器。DI 容器实例通常应该在应用程序的总持续时间内存在。尽管容器通常需要处理，但在此类中调用 dispose 显然是错误的地方。这样做不是这个工厂类的责任。由于容器应该在应用程序的持续时间内存在，所以这样做的正确位置是在应用程序拆卸期间。例如，在 ASP.NET 应用程序中，这通常是`Application_End`global.asax 中的事件。

# python - 从python中的以下字符串中提取值的最佳方法？

> ID：13115083
> 
> 赞同：1
> 
> 时间：2012-10-29T02:08:29.663
> 
> 标签：python, regex

假设我有以下字符串：

```
thestring = "1) My Favorite Pokemon Charizard *22.00 MP* [Pre-Avatar Mode Cost: 15.75 MP] [Post-Avatar Mode Cost: 6.250 MP]" 
```

其他一些样本可能是：

```
thestring = "1) My Favorite Pokemon Mew *1 MP* [Pre-Avatar Mode Cost: 0.5 MP] [Post-Avatar Mode Cost: 0.5 MP]"

thestring = "1) My Favorite Pokemon Pikachu *6.25 MP* [Pre-Avatar Mode Cost: 5 MP]; [Post-Avatar Mode Cost: 1.25 MP]" 
```

（第三种情况的冒号是故意的）

如何最好地提取“Pre-Casting Cost”和“Post-Avatar Mode Cost”的值？我听到了正则表达式，也听到了 string.find 方法，但我不确定完成此操作的最佳方法是什么。请注意，虽然“前头像模式成本”可能是 15.75 MP，但也可能取决于品种，也可能是 15.752 或包含多个小数位。语法受到赞赏。

更新：

我正在使用 Python 2.7。最接近的答案如下：

```
m = re.match('\[Pre-Avatar Mode Cost: (?P<precost>\d(\.\d*){0,1}) MP\] \[Post-Avatar Mode Cost: (?P<postcost>\d(\.\d*){0,1}) MP\]', '1) My Favorite Pokemon Mew *1 MP* [Pre-Avatar Mode Cost: 0.5 MP] [Post-Avatar Mode Cost: 0.5 MP]') 
```

虽然它看起来实际上并没有正确匹配，但由于没有匹配，导致 m 结果为“Nonetype”。

我通过使用以下内容进行了轻微更改：

```
m = re.match('(.*)\[.*(?P<precost>\d+(\.\d*){0,1}).*\].*\[.*(?P<postcost>\d+(\.\d*){0,1}).*\]', '1) My Favorite Pokemon Mew *1 MP* [Pre-Avatar Mode Cost: 0.5 MP] [Post-Avatar Mode Cost: 0.5 MP]') 
```

虽然看起来 precost 和 postcost 都等于“5”。知道正则表达式可能有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:15:48.550

[http://docs.python.org/2/howto/regex.html](http://docs.python.org/2/howto/regex.html)

这是所需的分组：

```
m = re.match('\[Pre-Avatar Mode Cost\: (?P<precost>\d(?:\.\d*)?) MP\] \[Post-Avatar Mode Cost\: (?P<postcost>\d(?:\.\d*)?) MP\]', '1) My Favorite Pokemon Mew *1 MP* [Pre-Avatar Mode Cost: 0.5 MP] [Post-Avatar Mode Cost: 0.5 MP]') 
```

以下是您访问群组的方式：

```
m.group('precost')
m.group('postcost') 
```

如果您不关心字符串的内容并且知道值在 2 个方括号中，您可以：

```
m = re.match('\[.*?(?P<precost>\d+(?:\.\d*)?).*?\].*?\[.*?(?P<postcost>\d+(?:\.\d*)?).*\]', 'your long string')
m.group('precost')
m.group('postcost') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:31:47.207

我认为正则表达式是最好的选择：

```
pattern = re.compile(r"\[.*?([0-9]+(?:\.[0-9]+)?).*?\]")
pre, post = [float(x) for x in re.findall(pattern, thestring)] 
```

无论小数位数（或缺少）如何，这都应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:25:43.733

这可能会对您正在搜索的文本中*没有*的内容做出太多假设，但肯定会更短并且可能更快：

```
re.findall('\[Pre[^:]+:\s+(?P<precost>\S+)[^[]+\[Post[^:]+:\s+(?P<postcost>\S+)', 
    thestring)
[('5', '1.25')] 
```

这些假设可能不正确：

*   在成本之后和“PM”之前总是有一个空格。
*   方括号内的冒号只出现一次，并且总是放在“成本”之后。
*   括号内没有任何其他以“Pre”或“Post”序列开头的组。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T02:18:21.523

绝对是 RegEx，因为它非常精确。我没有看到您所说的“预铸成本”部分。也许您的意思是“前头像模式”？

但是对于后头像模式成本，您必须考虑某些文本的一致性。如果您知道“Post-Avatar Mode Cost:”始终是一致的分隔符，您可以做一个简单的匹配。

假设您想要浮点值，您可以执行以下操作：

```
import re
post_avatar_cost = re.match("\[Post-Avatar Mode Cost: (?P<PostCost>[0-9]*\.[0-9]*) MP\]")
post_avatar_cost = post_avatar_cost.group('PostCost') 
```

这会给你一个浮点数（作为一个字符串）。例如，我在这里做了很多假设，我正在快速写一些东西给你一个想法。但是您可以循环使用它来找到所有这些值。

这个页面将是你最好的朋友：[http ://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

# java - 调用扩展 JPanel 的类的更新

> ID：13115091
> 
> 赞同：0
> 
> 时间：2012-10-29T02:09:55.727
> 
> 标签：java, swing, graphics, paint, updates

我有一个 A 类，它扩展了 JPanel 并覆盖了paintComponent 方法。现在我有另一个 B 类，它创建 A 类的对象。现在如何从 B 调用 A 的更新方法？一种仅更新图形且不从头开始绘制的方法。

即使当我调用 JLabel（A 类对象）的 update(Graphics g) 方法时，它也会从新对象中提取并且不会保留旧对象。

A类的代码片段：

```
class MyLabel extends JLabel 
{
int[] x,y;
int total;
MyLabel(ImageIcon i)
{
    super(i);
    total=0;
}

@Override 
public void update(Graphics g)
{
    super.update(g);
}

@Override
protected void paintComponent(Graphics g)
{
    super.paintComponent(g);
    if(total!=0)
    {
        g.setColor(Color.RED);
        g.drawPolygon(x, y, total);
    }

}

public void setPoints(int xx[], int yy[], int tt)
{
    total = tt;
    x = new int[tt];
    y = new int[tt];
    System.arraycopy(xx, 0, x, 0, tt);
    System.arraycopy(yy, 0, y, 0, tt);
}
} 
```

这是 B 类的代码片段。

```
sf.map_label.setPoints(x,y,total);
sf.map_label.update(sf.map_label.getGraphics());
sf.map_label.setVisible(false);
sf.map_label.setVisible(true); 
```

# c - 关于使用多个信号量的同步

> ID：13115093
> 
> 赞同：1
> 
> 时间：2012-10-29T02:10:25.727
> 
> 标签：c, synchronization, pthreads, semaphore

您好，我正在处理有关使用多信号量的 POSIX 线程的任务。分配的简要说明是：有 4 个不同的数据包（char/video/audio/image），每个数据包由不同的线程承载，并且我们有一个共享缓冲区。系统上可以工作的最大线程数将由用户维护作为输入。例如; 如果用户输入 10，则最多可以创建 10 个线程来在给定时间内通过缓冲区传输数据包。现在让我感到困惑的是，这个缓冲区可以立即包含有限的数据包。（例如，它最多可以包含 10 个字符数据包和 20 个视频数据包等）所以我们必须为每种数据类型设置不同的信号量。这个问题我知道如何使用信号量控制缓冲区大小，这非常简单，但无法设置使用数据包信号量的正确想法。即使我尝试了一些不同的方法，我也总是面临死锁错误。这是我的伪代码，可以更清楚地了解我的程序。

```
define struct packege
define semaphore list

main

initialize variables and semaphores

while threadCounter is less than MaxThreadNumber

switch(random)
case 0: create a character package
    create a thread to insert the package in buffer
case 1: create a video package
    create a thread to insert the package in buffer
case 2: create an image package
    create a thread to insert the package in buffer
case 3: create an audio package
    create a thread to insert the package in buffer

increment  threadCounter by one
end of while

create only one thread which will make the dequeue operation
end of main

producer function

for i->0 to size_of_package
    sem_wait(empty_buffer) // decrement empty_buffer semaphore by size of package

    lock_mutex
        insert item into queueu
        decrement counter of the buffer by size of package
    unlock_mutex

for i->0 to size_of_package
    sem_post(full_buffer) // increment full_buffer semaphore by size of package

end of producer function

consumer function

while TRUE // Loops forever

    lock_mutex

        if queue is not empty
            dequeue

        increment counter of the buffer size of package

    unlock_mutex

for i->0 to size_of_package // The reason why i making the sem_wait operation here is i cant make the dequeue in outer region of mutex.
    sem_wait(full_buffer)
for i->0 to size_of_package
    sem_post(empty_buffer)
end of consumer function 
```

使用此实施程序可以正常工作。但我无法正确使用属于包线程的信号量。我可以听取每一个建议，每一个回答都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:36:33.097

由于这是一项任务，您可能不需要读取和写入真实的数据包数据，而只需模拟它们的处理。

在这种情况下，问题归结为当生产者线程达到可以写入缓冲区的数据包限制时如何有效地阻止它们。据我所知，目前，您正在使用信号量来计算写入缓冲区的数据包的各个元素。

想象一下，您在缓冲区中的写入是原子的，并且您只想计算数据包，而不是数据包元素。每次生产者写入数据包时，它必须使用适当的信号量向消费者发出信号，而每次消费者读取数据包时，它必须向适当的生产者发出信号。

让我强调其他几点：

*   信号量的重要特性是当它达到零时它会阻塞。比如它的初始值为10，在连续10个sem_get之后，第11个就会阻塞。
*   您有 4 种类型的数据包，每种类型对可写入缓冲区的数量都有不同的阈值。

正如我所说，生产者必须发出信号，表示它写了一个数据包，但一旦达到阈值，它也必须停止。为了实现这一点，你让它在每次发布新数据包时获取信号量，使用`sem_get`. 您让消费者在`sem_post`每次读取数据包时执行一次，这与您对单个信号量版本所做的相反。但是，由于您希望生产者在阈值处停止，因此您初始化信号量的容量为`N - 1`，N 是阈值。请注意，在将新数据包写入缓冲区后，您必须发出信号表明新数据包可用，否则消费者可能会阻塞缓冲区。

```
producer<type> function

  write_packet()  // put the packet in the buffer
  sem_wait(type)    // signal a new packet is available 
  // (if there's not enough space for another packet, the producer will block here) 

end producer<type> function

consumer function

  while TRUE // Loops forever

      switch packet_available() // look if there's a new packet available
       case video:
         read_packet<video>()
         sem_post(video)
       (...)
       default: // no packet available, just wait a little
          sleep()
      end if
  end while 
```

您仍然需要定义`packet_read`、`packet_write`和`packet_available`函数，可能使用互斥锁来限制对缓冲区的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:00:30.923

这不是信号量的使用方式。缓冲区的控制变量/结构应该计算缓冲区中包含的消息数量和类型。互斥锁保护缓冲区及其控制变量/结构免受不同线程的并发访问。信号量（如果使用）只是向消费者发送缓冲区状态信号，与数据包的大小无关；它当然不会随着数据包的大小而增加！

最好建议您使用 pthread 条件变量而不是信号量。这些与 pthread 互斥锁一起使用，以保证线程之间的无竞争信号。生产者循环这样做：

*   锁定互斥体，
*   修改缓冲区等以添加新数据包，
*   表示条件变量，并且
*   解锁互斥锁。

消费者循环这样做：

*   锁定互斥体，
*   处理所有缓冲的数据，
*   等待条件变量。

继续阅读`pthread_cond_init`和。`pthread_cond_signal``pthread_cond_wait`

# python - Numpy 子类化：创建具有不同形状、相同元数据的数组副本

> ID：13115095
> 
> 赞同：0
> 
> 时间：2012-10-29T02:10:31.040
> 
> 标签：python, arrays, numpy, reshape

我有一个子类 numpy 数组 - 一个带有元数据（例如单位）的“光谱轴”。

我可以使用创建任何实例的副本`arr.copy`或使用例如`arr2=arr[2:5]`.

有什么方法可以创建具有*不同形状*但保持相同元数据/数据类型的这些数组之一的新实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T10:05:59.443

一个简单的解决方案是在您的子类中定义一个`.reshape`方法。此`.reshape`方法应调用`__array_finalize__`负责从对象复制元数据的方法。

例如，`MaskedArray`子类使用`_update_from`私有方法将一些元数据（...）从一个对象复制`_fill_value`到`_optinfo`另一个对象，或者如果这些元数据尚不可用，则为这些元数据设置默认值。被`_update_method`称为内`__array_finalize__`。您可以按照[来源](https://github.com/numpy/numpy/blob/master/numpy/ma/core.py)作为示例。

# java - How to catch a given user ID to display different Activity in Login?

> ID：13115099
> 
> 赞同：1
> 
> 时间：2012-10-29T02:10:39.923
> 
> 标签：java, android

with this Login form, an admin with (ID: 001) should get a 'AdminActivity' whereas every other userID should get a 'UserActivity', and this is the code. It's not returning the adminID for some reason. Thank you

```
btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {

                UserFunctions userFunction = new UserFunctions();   

                String id = inputId.getText().toString();
                String pswd = inputPassword.getText().toString();

                JSONObject json = userFunction.loginUser(id, pswd);             

                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");

                        String res = json.getString(KEY_SUCCESS); 

                        if(Integer.parseInt(res) == 1){

                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());

                            JSONObject json_user = json.getJSONObject("user");                          

                            if(id == "001"){
                                // Launch Admin Activity
                                Intent tab1 = new Intent(getApplicationContext(), AdminActivity.class);                     
                                    // Close all views before launching requestActivity
                                tab1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(tab1);
                            }

                            // Clear all previous data in database
                            userFunction.logoutUser(getApplicationContext());

                            db.addUser(json_user.getString(KEY_ID), 
                                       json_user.getString(KEY_NAME), 
                                       json_user.getString(KEY_EMAIL),                                     
                                       json_user.getString(KEY_CREATED_AT));                            

                                // Launch User Activity
                            Intent tab = new Intent(getApplicationContext(), UserActivity.class);                       
                                // Close all views before launching requestActivity
                            tab.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(tab);

                        }else{

                            loginErrorMsg.setText("Incorrect username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:16:56.713

```
 if("001".equals(id)){
                            // Launch Admin Activity
                            Intent tab1 = new Intent(getApplicationContext(), AdminActivity.class);                     
                                // Close all views before launching requestActivity
                            tab1.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(tab1);
                            return;
                        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:16:27.093

You can't compare Strings in Java using `==`
Try something like this:
`if(id.equals("001"))`

# haskell - 如何使用类型来分隔不兼容的值

> ID：13115100
> 
> 赞同：5
> 
> 时间：2012-10-29T02:10:42.630
> 
> 标签：haskell

我正在编写一个用于大地测量计算的库。我想要包括的一件事是网格投影的类型（例如军械测量国家网格）和这些网格上的点（由“东线”和“北线”指定）。网格由将其与地球联系起来的原点和一组几何参数指定。应用程序程序员可以使用这些参数创建许多任意网格。还将有一系列基于不同基础投影的网格类型。

显然，我希望能够对网格点（例如距离、方位等）进行计算，但同​​时我想使用 Haskell 类型系统来防止应用程序程序员询问不同网格上两点之间的距离。我想知道使用 ST monad 的类型参数的 Reader Monad 是否可以工作，但我希望应用程序程序员能够将这些位置值存储在 monad 之外，而 ST 完全是为了防止 STRefs 从runST。

对于底层椭球体上的大地测量位置（纬度和经度），我也遇到了类似的问题。但是网格版本可能更容易解释，因为这个问题的重点是类型系统而不是大地测量。

我已经阅读了 GADT 和存在类型，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:36:49.977

您可以使用两个 GHC 扩展来允许您使用它们来自的网格标记坐标：

```
{-# LANGUAGE DataKinds, KindSignatures #-}

data CoordinateType = Geodetic | OSNG -- etc.

data Coordinate (grid :: CoordinateType) = Coord Int Int

zeroZero :: Coordinate Geodetic
zeroZero = Coord 0 0 
```

（扩展在 GHC 7.4+ 中工作，不确定是否更低。）

`grid`然后，任何需要它的函数都可以强制幻像参数相等：

```
distance :: Coordinate grid -> Coordinate grid -> Float
distance p q = undefined 
```

现在`distance zeroZero (Coord 1 2 :: Coordinate OSNG)`给出类型错误。

# php - 使用变量名动态抓取数据

> ID：13115107
> 
> 赞同：0
> 
> 时间：2012-10-29T02:13:06.107
> 
> 标签：php, content-management-system, block, mybb

这可能是一个相当独特的情况，但是我正在为 myBB 编写一些自定义代码。它本质上是一个小型 CMS，其中一部分允许用户定义块和块区域，并用代码填充这些块区域。

我希望它起作用的方式是用户创建一个块区域，然后在模板中定义它的位置。由于用户可以定义他们想要的任何块名称并将它们放置在他们想要的任何区域中，我很难弄清楚如何在代码中处理这个问题。

我的想法是我可以让用户在他们的模板中定义一个名为 block_blockarea_name 的变量，然后我可以抓取该变量，然后解析变量的名称删除“block_”，然后使用名称的其余部分来检查任何块分配给该区域名称。我正在尝试在自定义页面上执行此操作，而不是通过插件本身。

我唯一的其他选择是有一个类似的标记并在其上使用查找和替换。

只是想知道是否有人对处理此问题的更好方法有任何想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:47:44.887

您是否在问如何在 MyBB 上的自定义 PHP 页面中包含模板？我总是用它来输出像标题这样的东西，也许你的会以同样的方式工作：

```
<?php
output_page("{$header}");
?> 
```

# java - 这种 if 语句在哪种情况下有用？`如果（条件）；`

> ID：13115110
> 
> 赞同：2
> 
> 时间：2012-10-29T02:13:36.847
> 
> 标签：java

今天我读到了这行 Java 代码：

```
if (results.add(userName)); 
```

对我来说，这是`if`我见过的第一个没有 then 或 else 子句的语句。我很惊讶这不是语法错误。

那么这种`if`说法有什么用吗？也就是说，`if`没有 then 或 else 子句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:17:15.673

没用。这很可能是一个错字。然而，这不是一个特殊的 if 语句。是`;`一个语句，空语句，从语言的角度来看，它相当于一个空块`{}`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:21:27.847

我能想到的唯一用途是向读者展示您“可以”检查返回值但目前对它不感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:21:43.153

从技术上讲，它没有用，即`if`没有做任何额外的事情。**但是**，它可以很好地提醒/显示`results.add(userName)`实际返回*boolean*的代码的读者，并且如果不存在，人们可能会怀疑它是*无效*`if`的。

# iphone - 通过 writeImageToSavedPhotosAlbum:metadata:completionBlock: 保存时，我可以使用相机胶卷将图像保存到特定相册吗？

> ID：13115114
> 
> 赞同：1
> 
> 时间：2012-10-29T02:13:58.460
> 
> 标签：iphone, image, camera, uiimagepickercontroller, photos

我有一个应用程序可以编辑照片的 exif 数据，然后通过以下方式将该图像保存到相机胶卷：

```
[library writeImageToSavedPhotosAlbum:[newTestImage CGImage] metadata:metadata completionBlock:^(NSURL *assetURL, NSError *error) {
    //error
}]; 
```

这很好用，但是有没有办法可以将图像保存到相机胶卷中的特定（理想情况下是新的）相册中？我在这里和其他地方进行了广泛的搜索，并且我知道 addAssetsGroupAlbumWithName: 但因为它不会添加新的图像元数据，所以我认为我不能使用它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:21:57.370

有一个很棒的类别可以帮助您轻松地将照片保存到自定义相册。

这是在 GitHub 上

[https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum](https://github.com/Kjuly/ALAssetsLibrary-CustomPhotoAlbum)

您还需要进行一些调整以支持保存元数据，但它应该像替换上面代码的使用一样简单

```
- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef orientation:(ALAssetOrientation)orientation completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 
```

并在传入元数据后使用它

```
- (void)writeImageToSavedPhotosAlbum:(CGImageRef)imageRef metadata:(NSDictionary *)metadata completionBlock:(ALAssetsLibraryWriteImageCompletionBlock)completionBlock 
```

# java - UDP - 多线程

> ID：13115115
> 
> 赞同：1
> 
> 时间：2012-10-29T02:14:07.157
> 
> 标签：java, multithreading, udp

基本上，我有一个图形摇摆应用程序。我需要使用 UDP 发送和接收数据，但我不希望应用程序代码中有任何接收（数据包）调用。我决定在一个单独的线程上运行程序的接收端。该线程有一个 int 字段，该字段更新为来自传入数据包的值。我将如何从线程中获取该字段的值。我可以只调用字段的get方法，还是必须先中断线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:41:52.923

尽管 GUI 线程可以安全地读取 int getter（假设有适当的同步或 volatile 变量），但请考虑花时间使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，因为它会使您的应用程序更具响应性。基本上，您将自定义线程替换为 SwingWorker 对象。您现在拥有的代码`run()`进入`SwingWorker.doInBackground()`.

您启动工作程序，`doInBackground`代码在单独的线程中执行。大概这是一个UDP接收循环。当您的循环收到一个新的 int 时，您调用`publish`（仍在后台线程中）。这将导致在事件线程中调用另一个 SwingWorker 方法`process`（您已经用一些自定义代码覆盖了该方法）。在这里您可以安全地更新您的 GUI，因为您正在事件线程中运行。

这消除了创建计时器来轮询 UDP 线程的 getter 的需要。UI 响应更快，因为接收 -> 发布 -> 处理顺序非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:21:38.567

您应该在数据包接收器线程类的传入数据包计数字段上创建一个同步的 getter 方法。

有关该概念的快速教程，请参阅此[页面](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:28:16.427

您在这里只有 1 个目标。UI 不应等待并挂起网络上的数据。您需要一个 LinkedList（不是 ArrayList），一个 dataJustArrived 方法，它通知您的 LinkedList 对象。一个正在运行一段时间 (true) 并在 LinkedList 上等待的线程。

dataJustArrived，将数据对象添加到链表并通知等待。等待解锁，并检查linkedList.lenght > 0，并从列表中删除（不是GETS，而是删除）数据并处理UI。

要点

*   添加和等待应该在同步（dataList）代码块中
*   addLast 和 removeFirst
*   删除，不要使用 get
*   LinkedList 会工作，ArrayList 不会工作（将是非常昂贵的操作）
*   等待解锁后，检查 dataList.length > 0
*   在等待之前，请检查 dataList.lenght > 0，如果有数据要处理，为什么还要等待？

    ```
    public synchronized void dataJustArrived(Object data) {
        synchronized (dataList) {
        dataList.addLast(data);
        this.notify();
        }
    }

    public void run() {
        Object data ;
        while (true) {
            synchronized (this) {
                 if (dataList.isEmpty()) {
                    try {
                       dataList.wait();
                    } catch (InterruptedException ignored) {
                       ignored.printStackTrace();
                    }
                 }
                 if (!dataList.isEmpty)
                     data = dataList.removeFirst();
                 //
                 // Process your UI here
                 //
            }
        }
    } 
    ```

# php - 用于过滤 _POST 用户名中的域名的 PHP 正则表达式

> ID：13115117
> 
> 赞同：1
> 
> 时间：2012-10-29T02:15:17.507
> 
> 标签：php, regex, post

我有一些硬编码的 if/else 语句来根据 $_POST["username"] 输入将 $page 变量（稍后在标题中使用：“.page”）设置为给定的网站。

代码：

```
if ($_POST["username"] == "username1@domain1.com") {
$page = "http://www.google.com";
}
 else if ($_POST["username"] == "username2@domain1.com"){
$page = "http://www.yahoo.com";
}
 else if ($_POST["username"] == "username1@domain2.com"){
$page = "http://www.stackoverflow.com";
}
 else if ($_POST["username"] == "username2@domain2.com"){
$page = "http://www.serverfault.com";
}
 else if ($_POST["username"] == "username@domain3.com"){
$page = "http://www.superuser.com";
}
 else if (!preg_match($domain2.com, $_POST["username"]))  { //THIS IS VERY WRONG
$page = "http://www.backblaze.com";
}
else{
$page = "DefaultBackupPage.php";
} 
```

我想说的是，如果您的用户名末尾有“@domain.com”，请将 $page 设置为，在本例中为 backblaze.com，但可以是任何内容。

我知道这很混乱，我实际上并不喜欢这种实现。它只需要适合这个模式，我需要一个快速修复！

我收到的当前错误是正则表达式为空。我希望这对于了解 PHP 的人来说是毫无疑问的 - 我一直在匆忙尝试学习！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:21:16.990

```
if (preg_match('/@domain2\.com$/i',$_POST['username'])) 
```

将捕获以 . 结尾的用户名`domain2.com`。请注意点的转义反斜杠。如果您想针对相反的情况进行测试（也就是不**以**结尾`domain2.com`），那么在函数之前使用感叹号[`preg_match()`](http://php.net/manual/en/function.preg-match.php)。

这是你问的吗？

**编辑 1：**我将`i`标志添加到模式中以使其查找不区分大小写的匹配。

**编辑2：**为了可读性和控制，我会将它包装在一个函数中，但这是我自己的偏好，所以它不是建议的方法或任何东西。如果您的代码又长又复杂……</p>

```
function get_page($username) {
    $username = strtolower($username);
    switch ($username) {
        case "username1@domain1.com"    : return "http://www.google.com";
        case "username2@domain1.com"    : return "http://www.yahoo.com";
        case "username1@domain2.com"    : return "http://www.stackoverflow.com";
        case "username2@domain2.com"    : return "http://www.serverfault.com";
        case "username@domain3.com"     : return "http://www.superuser.com";
    }
    return preg_match('/@domain2\.com$/',$username) ?
    "http://www.backblaze.com" : "DefaultBackupPage.php";
}

$page = get_page($_POST['username']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:21:32.950

该行：

```
 else if(!preg_match($domain2.com, $_POST["username"])) 
```

必须：

```
 else if(!preg_match("/domain2\.com/", $_POST["username"])) 
```

# objective-c - 将 NSNumberFormatter 连接到 NSTextfield

> ID：13115119
> 
> 赞同：0
> 
> 时间：2012-10-29T02:15:21.737
> 
> 标签：objective-c, cocoa, nstextfield, nsnumberformatter

我正在尝试使用 NSTextField 的格式化程序出口将 NSNumberFormatter 连接到 NSTextfield（如下图所示）。我的格式化程序子类如下：

```
#import <Foundation/Foundation.h>

@interface FieldFormatter : NSNumberFormatter

@end

#import "FieldFormatter.h"

@implementation FieldFormatter

- (NSNumberFormatterBehavior)formatterBehavior {
    return NSNumberFormatterBehavior10_4;
}

- (NSNumberFormatterStyle)numberStyle {
    return NSNumberFormatterDecimalStyle;
}

@end 
```

![在此处输入图像描述](../Images/01d5a50691012bd54fbe8d9a60e3b7a2.png)

运行程序时我没有收到任何错误，但格式化程序无法正常工作。当我在文本字段中输入小数时，它会向上取整，即 13.8 变为 14。我根本无法在文本字段中输入小数。

`NSTextField with NSNumberFormatter`在使用Interface Builder时，我可以让它正常工作。但我更愿意通过代码来做到这一点，这样我就可以更好地控制格式。

所以我想要做的是 - 子类 NSNumberFormatter，将格式化程序连接到 XIB 中的文本字段，然后在用户将数字输入到文本字段后，该数字被格式化。

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:03:08.983

Alloc 初始化您的格式化程序，然后在您的文本字段上调用 ​​setFormatter:。

```
FieldFormatter *formatter = [[FieldFormatter alloc] init];
[myTextField setFormatter:formatter]; 
```

而且，如果您在 IB 中没有对它做任何事情，您应该摆脱该连接和代表您的 FieldFormatter 实例的蓝色立方体。

# c - 当用户输入“-1”时让数组停止

> ID：13115123
> 
> 赞同：2
> 
> 时间：2012-10-29T02:16:14.653
> 
> 标签：c

我的项目是我必须让用户将 5000 个数字输入到一个数组中，但允许他们随时停止。我有大部分代码，但是当用户输入“-1”然后显示数组时，我不知道如何停止一切。到目前为止，这是我的代码：

```
#include <stdio.h>
#include<stdlib.h>
#define pause system("pause")
#define cls system("cls")
#define SIZE 50
int i;

main() 
{

int i;
int userInput[SIZE];

for (i = 0; i < SIZE; i++) 
{
    printf("Enter a value for the array (-1 to quit): ");
    scanf("%i", &userInput[i]);

} // end for

for (i = 0; i < SIZE; i++) 
{
    if (userInput[i] == -1) 
    printf("%i. %i\n", i + 1, userInput[i]);
    pause;
} // end for

pause;
  } // end of main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:19:05.653

在第一个`for`循环中，添加一个 if 语句来检查输入并在输入为 时中断循环`-1`。

```
 for (i = 0; i < SIZE; i++) {
    printf("Enter a value for the array (-1 to quit): ");
    scanf("%i", &userInput[i]);
    if(userInput[i] == -1){
      break; //break the for loop and no more inputs
    }
  } // end for 
```

另外我认为您想显示用户输入的所有数字。如果是，那么第二个循环应该如下：

```
for (i = 0; i < SIZE; i++) {
   printf("%i. %i\n", i + 1, userInput[i]);
   if (userInput[i] == -1) {
      break; //break the for loop and no more outputs
   }
 } // end for 
```

# java - Java：actionlistener 和检索文本框输入的问题

> ID：13115129
> 
> 赞同：2
> 
> 时间：2012-10-29T02:17:02.797
> 
> 标签：java, swing, awt, jbutton, actionlistener

我正在做一项任务，我需要将华氏温度转换为摄氏温度。我已经创建了表单和 actionlistener 按钮。

我遇到的问题是将代码放在 actionlistener 中以检索文本框输入并进行计算并将其修剪到小数点后两位并将答案发布在摄氏度文本框中。

这是我到目前为止所拥有的：

```
 import java.util.Scanner;
 import javax.swing.*;
 import java.awt.*;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;

 public class Part3Question1 extends JFrame implements ActionListener {

     public static void main(String[] args) {
         JFrame mp = new Part3Question1();
         mp.show();
     }

     public Part3Question1() {
         setTitle("My Farenheit to Celsius Converter");
         setSize(400, 250);
         setLocation(400, 250);
         setVisible(true);
         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         setLayout(null);

         JLabel fahrenheitLabel = new JLabel();
         fahrenheitLabel.setText("Fahrenheit: ");
         fahrenheitLabel.setBounds(130, 40, 70, 20);
         add(fahrenheitLabel);

         JTextField fahrenheitTB = new JTextField();
         fahrenheitTB.setHorizontalAlignment(fahrenheitTB.RIGHT);
         fahrenheitTB.setBounds(200, 40, 70, 20);
         add(fahrenheitTB);

         JLabel celsiusLabel = new JLabel();
         celsiusLabel.setText("celsius: ");
         celsiusLabel.setBounds(149, 60, 70, 20);
         add(celsiusLabel);

         Color color = new Color(255, 0, 0);
         JTextField celsiusResultsTB = new JTextField();
         celsiusResultsTB.setText("resultbox ");
         celsiusResultsTB.setHorizontalAlignment(celsiusResultsTB.CENTER);
         celsiusResultsTB.setForeground(color);
         celsiusResultsTB.setEditable(false);
         celsiusResultsTB.setBounds(200, 60, 70, 20);
         add(celsiusResultsTB);

         JButton convertButton = new JButton("Convert");
         convertButton.setBounds(10, 100, 364, 80);
         add(convertButton);

         convertButton.addActionListener(this)
     }

     public void actionPerformed(ActionEvent e) {
         Part3Question1 convert = new Part3Question1();
         double Farenheit = Double.parseDouble(convert.fahrenheitTB.getText());

         double = Celcius(5.0 / 9.0) * (Farenheit - 32);

         convert.fahrenheitTB.SetText = Celcius;
     }
 } 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:20:53.140

不，不要在您的 actionPerformed 方法中创建另一个 Part3Question1 对象：

```
public void actionPerformed(ActionEvent e)
{   
    Part3Question1 convert = new Part3Question1();
    double Farenheit = Double.parseDouble(convert.fahrenheitTB.getText()); 
```

是的，您可以创建一个 Part3Question1 对象，但要了解它与当前显示的 Part3Question1 对象完全无关，即当前实例，如果您愿意的话。

此外，即使您的代码工作正常，这也不是您调用 setText(...) 方法的方式：

```
fahrenheitTB.SetText = Celcius; // you're not even calling a method here!! 
```

相反，只需调用您所在的当前 Part3Question1 对象的方法：

```
double farenheit = Double.parseDouble(fahrenheitTB.getText()); 
```

`String.format("%.2f", someDoubleValue)`如果您喜欢此工具，可以使用 或使用 DecimalFormat修剪转换结果。

# php - 从订单表中提取本周的记录

> ID：13115130
> 
> 赞同：0
> 
> 时间：2012-10-29T02:17:04.260
> 
> 标签：php, mysql, codeigniter, datetime

我有一张包含以下信息的表格...

```
Id | orderNumber | orderDate | customerId 
```

`orderDate`是一个 MySQL 日期时间字段，当前日期、月份、年份和时间在写入记录时插入到数据库中。

所以我的问题是如何提取本周某一天的订单列表。我的目标是使用谷歌图表 API 为**“本周的销售”**制作一个图表，上面写着：

```
 var data = google.visualization.arrayToDataTable([
                      ['Day', 'Sales'],
                      ['Mon',  1],
                      ['Tue',  0],
                      ['Wed',  4],
                      ['Thurs',  3],
                      ['Fri',  0],
                    ]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:26:28.547

让我们做你想做的事：

```
SELECT
    WEEKDAY(`datetime_field`) AS `week_day`,
    COUNT(*) AS `sale_count`
FROM `orders`
WHERE YEARWEEK(`datetime_field`) = YEARWEEK(NOW())
GROUP BY `week_day`
ORDER BY `week_day` ASC; 
```

**这将返回一组带有`week_day`和的记录`sale_count`。** [在这里了解更多](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekday)。如果您使用`NOW()`本地日期时间或使用`UTC_TIMESTAMP()`GMT 播放，请使用。

*请记住，我不知道您的数据库名称或字段名称。你需要填写这些。*

**工作示例：**

```
CREATE TABLE `orders` (
  `OrderID` int(11) NOT NULL AUTO_INCREMENT,
  `OrderDate` datetime NOT NULL,
  `OrderValue` decimal(7,2) unsigned NOT NULL,
  PRIMARY KEY (`OrderID`)
);

INSERT INTO `orders` VALUES ('1', '2012-10-29 14:02:19', '100.00');
INSERT INTO `orders` VALUES ('2', '2012-10-30 14:02:19', '123.00');
INSERT INTO `orders` VALUES ('3', '2012-10-31 14:02:19', '103.00');
INSERT INTO `orders` VALUES ('4', '2012-11-01 14:02:19', '232.00');
INSERT INTO `orders` VALUES ('5', '2012-11-02 14:02:19', '321.00');
INSERT INTO `orders` VALUES ('6', '2012-11-03 14:02:19', '154.00');
INSERT INTO `orders` VALUES ('7', '2012-11-04 14:02:19', '112.00');
INSERT INTO `orders` VALUES ('8', '2012-10-29 14:02:19', '100.00');

SELECT
    WEEKDAY(`OrderDate`) AS `week_day`,
    COUNT(*) AS `sales_count`,
    SUM(`OrderValue`) AS `sales_value`
FROM `orders`
WHERE YEARWEEK(`OrderDate`) = YEARWEEK(NOW())
GROUP BY `week_day`
ORDER BY `week_day` ASC; 
```

这是创建表的 SQL，本周每天添加 1 个订单，但在星期一添加 2 个订单。以及获取报告的查询。

**[**这**](http://sqlfiddle.com/#!8/a5455/1/0)**是 SQLFIDDLE.COM**[示例](http://sqlfiddle.com/#!8/a5455/1/0)。**

# python - Python：我不明白这个生成器发生了什么

> ID：13115135
> 
> 赞同：1
> 
> 时间：2012-10-29T02:18:41.327
> 
> 标签：python, generator, coroutine

我很好奇这里发生了什么。了解生成器和协程的人能否很好地解释这段代码。

```
def b():
    for i in range(5):
        yield i
        x = (yield)
        print(x)

def a():
    g = b()
    next(g)
    for i in range(4):
        g.send(5)
        print(next(g))

a() 
```

输出

```
None
1
None
2
None
3
None
4 
```

但是当我在第 3 行和第 4 行切换时： 和 行`yield i`，`x = (yield)`我得到以下信息。

```
5
None
5
None
5
None
5
None 
```

我怀疑问题可能是我尝试使用 yield 语句在同一个函数中接收和发送值。这在 Python 中是不可能的吗？

我已经成功编写了几个使用协程的程序，所以我熟悉它们的工作方式，但我对这段代码的行为方式感到困惑。对此的任何见解将不胜感激。

谢谢

编辑：感谢 BrenBarn 和 unutbu 的回答。当您将问题扩展为这样时，这里发生的事情更有意义。

```
def b():
    for i in range(5):
        yield i
        x = yield None

def a():
    g = b()
    print('* got', g.send(None) )
    for i in range(4):
        print('+ got', g.send(5) )
        print('- got', g.send(None))

a() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T02:45:19.613

我不太明白你在问什么，但基本上：当你使用 时`send`，它会导致生成器中最近到达的 yield 表达式评估为你发送的值。另请注意，`send`将生成器推进到下一个`yield`. 可能让您感到困惑的一件事是，您正在打印`x`生成器内部的值，并且正在打印`next(g)`inside的值`b`，但是生成器也产生了 at 的值`g.send(5)`，而您没有打印这些值。

在您的第一种情况下，您的第一个`send`导致`yield i`语句评估为 5 inside `b`，但您没有在内部使用此值`b`（您没有分配`yield i`任何东西），所以它什么也不做。此外，当您这样做时`send(5)`，生成器会产生 None （从该`x = (yield)`行），但您不打印它，所以您不知道这一点。然后用 再次推进生成器`next(g)`。最近达到的产量是`x = yield`，但`next(g)`不传递任何值，因此`x`设置为无。

在第二种情况下，调用的奇偶校验是相反的。现在您的第一个`send`确实发送到该`x = yield`行，因此`x`设置为 5。这`send`也会在 中产生循环值`b`，但是您忽略该值`a`并且不打印它。然后你 print `next(g)`，它是无。在每次后续发送时，`b`打印 的值`x`，它始终为 5，因为这是您始终发送的值，然后`a`打印*下一个*产生的值，它始终为 None（因为这就是`x = yield`产生的值）。

我不太明白“使用 yield 语句在同一个函数中接收和发送值”的意思。您当然可以这样做，但您必须意识到： a) 即使您调用 ，仍然会发送一个值 (None) `next(g)`；b) 当您调用`g.send(5)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T03:04:24.943

用于逐行`traceit`执行程序：

```
import sys
import linecache

class SetTrace(object):
    '''
    with SetTrace(monitor):
        ...
    '''
    def __init__(self, func):
        self.func = func
    def __enter__(self):
        sys.settrace(self.func)
        return self
    def passit(self, frame, event, arg):
        return self.passit
    def __exit__(self, ext_type, exc_value, traceback):
        sys.settrace(self.passit)

def traceit(frame, event, arg):
    '''
    http://www.dalkescientific.com/writings/diary/archive/2005/04/20/tracing_python_code.html
    '''
    if event == "line":
        lineno = frame.f_lineno
        filename = frame.f_globals["__file__"]
        if (filename.endswith(".pyc") or
            filename.endswith(".pyo")):
            filename = filename[:-1]
        name = frame.f_globals["__name__"]
        line = linecache.getline(filename, lineno)
        print("%s  # %s:%s" % (line.rstrip(), name, lineno, ))
    return traceit       

def b():
    for i in range(5):
        yield i
        x = (yield)
        print(x)

def a():
    g = b()                    
    next(g)
    for i in range(4):
        g.send(5)
        print(next(g))

with SetTrace(traceit):
    a() 
```

我们获得

```
g = b()  # __main__:44
next(g)  # __main__:45                 # runs b until you get to a yield
for i in range(5):  # __main__:38
    yield i  # __main__:39             # stop before the yield; resume a
    ^
for i in range(4):  # __main__:46
    g.send(5)  # __main__:47           # resume b; (yield i) expression evals to 5 then thrown away
    x = (yield)  # __main__:40         # stop before yield; resume a
         ^
    print(next(g))  # __main__:48      # next(g) called; resume b; print not called yet
    print(x)  # __main__:41            # next(g) causes (yield) to evaluate to None
None
for i in range(5):  # __main__:38
    yield i  # __main__:39             # yield 1; resume a; `print(next(g))` prints 1
1
for i in range(4):  # __main__:46
    g.send(5)  # __main__:47           # resume b; (yield i) expression evals to 5 then thrown away 
```

右侧（上图）的注释解释了 Python 打印`None`then的原因`1`。如果你走得那么远，我认为你得到`None`,`2`等的原因就很清楚了——这又是同一个故事，但 . 的值不同`i`。

可以类似地分析其他情况，其中`x = (yield)`和是相反的。`yield i`

# python - 网站需要在 python 中更新

> ID：13115138
> 
> 赞同：2
> 
> 时间：2012-10-29T02:19:07.967
> 
> 标签：python, django, google-app-engine, templates, livechat

我正在大修的网站目前使用 python 2.3.7，并使用 Google App Engine 进行管理，它必须更新到 2.7，并且由于新版本的功能，模板部分已折旧。需要进行哪些必要的更改？仅供参考，我是一名高中生，为聊天室网站做这件事。当我为 app.yaml 重写更改时，更改 .py 中的代码（然后我将文件重命名为 .app），它会引发此回溯错误。帮助？

```
File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 196, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/base/python27_runtime/python27_lib/versions/1/google/appengine/runtime/wsgi.py", line 255, in _LoadHandler
    handler = __import__(path[0])
ImportError: No module named devchat 
```

我的进口是

```
import cgi
import os
import urllib
import logging

from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext import db
from google.appengine.ext.webapp import template
from google.appengine.api import memcache 
```

关于模板的代码部分在这里

```
class BaseRequestHandler(webapp.RequestHandler):

  def generate(self, template_name, template_values={}): 
    # We check if there is a current user and generate a login or logout URL
    user = users.get_current_user()

    if user:
      log_in_out_url = users.create_logout_url('/')
    else:
      log_in_out_url = users.create_login_url(self.request.path)

    # We'll display the user name if available and the URL on all pages
    values = {'user': user, 'log_in_out_url': log_in_out_url}
    values.update(template_values)

    # Construct the path to the template
    directory = os.path.dirname(__file__)
    path = os.path.join(directory, 'templates', template_name)

    # Respond to the request by rendering the template
    self.response.out.write(template.render(path, values, debug=_DEBUG))

class MainRequestHandler(BaseRequestHandler):
  def get(self):
    if users.get_current_user():
      url = users.create_logout_url(self.request.uri)
      url_linktext = 'Logout'
    else:
      url = users.create_login_url(self.request.uri)
      url_linktext = 'Login'

    template_values = {
      'url': url,
      'url_linktext': url_linktext,
      }

    self.generate('index.html', template_values);

class ChatsRequestHandler(BaseRequestHandler):
  def renderChats(self):
    greetings_query = Greeting.all().order('date')
    greetings = greetings_query.fetch(1000)

    template_values = {
      'greetings': greetings,
    }
    return self.generate('chats.html', template_values)

  def getChats(self, useCache=True):
    if useCache is False:
      greetings = self.renderChats()
      if not memcache.set("chat", greetings, 10):
        logging.error("Memcache set failed:")
      return greetings

    greetings = memcache.get("chats")
    if greetings is not None:
      return greetings
    else:
      greetings = self.renderChats()
      if not memcache.set("chat", greetings, 10):
        logging.error("Memcache set failed:")
      return greetings

  def get(self):
    self.getChats()

  def post(self):
    greeting = Greeting()

    if users.get_current_user():
      greeting.author = users.get_current_user()

    greeting.content = self.request.get('content')
    greeting.put()

    self.getChats(False)` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:21:32.613

这是一个非常好的视频，它解释了如何更新应用程序：[https ://developers.google.com/events/io/sessions/gooio2012/300/](https://developers.google.com/events/io/sessions/gooio2012/300/)

# java - 如何将文本从文本字段获取到变量？

> ID：13115141
> 
> 赞同：1
> 
> 时间：2012-10-29T02:19:47.977
> 
> 标签：java, swing, variables, textfield, gettext

我想从 txt 字段 val1 和 val2 中获取值并将其存储在变量 n1 和 n2 中。然后将解析 n1 和 n2 以获得计算器的值。这是代码：

```
 public class CalcUI extends javax.swing.JFrame {
    String n1 = val1.getText();
    String n2 = val2.getText();
    double num1 = Double.parseDouble(n1);
    double num2 = Double.parseDouble(n2); 

/**
 * Creates new form CalcUI
 */
public CalcUI() {

    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    val1 = new javax.swing.JTextField();
    val2 = new javax.swing.JTextField();
    plus = new javax.swing.JButton();
    multiply = new javax.swing.JButton();
    clr = new javax.swing.JButton();
    exit = new javax.swing.JButton();
    minus = new javax.swing.JButton();
    divide = new javax.swing.JButton();
    ans = new javax.swing.JLabel();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    plus.setText("+");
    plus.setMaximumSize(new java.awt.Dimension(41, 41));
    plus.setMinimumSize(new java.awt.Dimension(41, 41));
    plus.setPreferredSize(new java.awt.Dimension(41, 41));
    plus.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            plusActionPerformed(evt);
        }
    });

    multiply.setText("*");
    multiply.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            multiplyActionPerformed(evt);
        }
    });

    clr.setText("Clear");
    clr.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            clrActionPerformed(evt);
        }
    });

    exit.setText("Exit");
    exit.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            exitActionPerformed(evt);
        }
    });

    minus.setText("-");
    minus.setMaximumSize(new java.awt.Dimension(41, 41));
    minus.setMinimumSize(new java.awt.Dimension(41, 41));
    minus.setPreferredSize(new java.awt.Dimension(41, 41));
    minus.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            minusActionPerformed(evt);
        }
    });

    divide.setText("/");
    divide.setMaximumSize(new java.awt.Dimension(41, 41));
    divide.setMinimumSize(new java.awt.Dimension(41, 41));
    divide.setPreferredSize(new java.awt.Dimension(41, 41));
    divide.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            divideActionPerformed(evt);
        }
    });

    ans.setBorder(javax.swing.BorderFactory.createEtchedBorder());

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(val1)
                .addComponent(val2)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(clr)
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(exit)))
            .addContainerGap())
        .addGroup(layout.createSequentialGroup()
            .addGap(134, 134, 134)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                .addComponent(multiply, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(plus, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGap(77, 77, 77)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(minus, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(divide, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addGap(143, 143, 143))
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(ans, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addContainerGap())
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(46, 46, 46)
            .addComponent(val1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(18, 18, 18)
            .addComponent(val2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(ans, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(26, 26, 26)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(plus, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(minus, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(34, 34, 34)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(multiply, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(divide, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 31, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(clr)
                .addComponent(exit))
            .addContainerGap())
    );

    pack();
}// </editor-fold>

private void plusActionPerformed(java.awt.event.ActionEvent evt) {                                     
    double add = num1 + num2;
    ans.setText(Double.toString(add));
         // TODO add your handling code here:
}                                    

private void minusActionPerformed(java.awt.event.ActionEvent evt) {                                      
    double min = num1 - num2;
    ans.setText(Double.toString(min));                                     
   // TODO add your handling code here:
}                                     

private void divideActionPerformed(java.awt.event.ActionEvent evt) {                                       
    double div = num1 / num2;
    ans.setText(Double.toString(div));
       // TODO add your handling code here:
}                                      

private void exitActionPerformed(java.awt.event.ActionEvent evt) {                                     
    System.exit(0);
      // TODO add your handling code here:
}                                    

private void clrActionPerformed(java.awt.event.ActionEvent evt) {                                    
       val1.setText("");
        val2.setText("");
           ans.setText("");
        // TODO add your handling code here:
}                                   

private void multiplyActionPerformed(java.awt.event.ActionEvent evt) {                                         
    double mult = num1 * num2;
    ans.setText(Double.toString(mult));   
        // TODO add your handling code here:
}                                        

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {

    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(CalcUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(CalcUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(CalcUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(CalcUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new CalcUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JLabel ans;
private javax.swing.JButton clr;
private javax.swing.JButton divide;
private javax.swing.JButton exit;
private javax.swing.JButton minus;
private javax.swing.JButton multiply;
private javax.swing.JButton plus;
private javax.swing.JTextField val1;
private javax.swing.JTextField val2;
// End of variables declaration 
```

}

问题是在声明中

```
String n1 = val1.getText();
String n2 = val2.getText(); 
```

我收到一个错误，说非法前向引用。我该如何解决？

这是固定的。

现在当我使用以下代码时：

```
 public class CalcUI extends javax.swing.JFrame { 
```

双 num1 ; 双 num2 ;

```
/**
 * Creates new form CalcUI
 */

public CalcUI(){
    val1 = new javax.swing.JTextField();
    val2 = new javax.swing.JTextField();

    num1 = Double.parseDouble(val1.getText());
    num2 = Double.parseDouble(val2.getText()); 

    initComponents();
} 
```

我收到一个构建错误，上面写着：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: empty String
at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1011)
at java.lang.Double.parseDouble(Double.java:540)
at CalcUI.<init>(CalcUI.java:24)
at CalcUI$7.run(CalcUI.java:227)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
at java.awt.EventQueue.access$000(EventQueue.java:102)
at java.awt.EventQueue$3.run(EventQueue.java:662)
at java.awt.EventQueue$3.run(EventQueue.java:660)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

我该如何解决？代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:23:05.853

我想您的 JTextField 组件在您调用时不会被初始化：

```
String n1 = val1.getText();
String n2 = val2.getText(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-07T05:45:35.480

如果您使用此代码，您将看到您的输入是什么。

> ```
> private void yourActionButtonActionPerformed(java.awt.event.ActionEvent evt) {     
> 
> JOptionPane.showMessageDialog(null,yourTextField.getText());
> 
> } 
> ```

因此，这应该将您的数据存储到 n1。

> ```
>  private void yourActionButtonActionPerformed(java.awt.event.ActionEvent evt) { 
> 
> String n1;                                   
> n1 = yourTextField.getText();
> 
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T02:24:19.107

您缺少将进行计算的“等于”按钮。向该按钮添加一个侦听器，然后在侦听器的 actionPerformed() 中 getText() 然后计算计算。另外，我想没有必要将 n1 和 n2 作为类级变量。

# network-programming - 如何在不使用 ICMP 的情况下测试连接性？

> ID：13115144
> 
> 赞同：1
> 
> 时间：2012-10-29T02:20:00.940
> 
> 标签：network-programming

在我们的系统中，我们曾经使用 ICMP 消息来测试不同节点之间的连通性。但出于安全考虑，我们的客户要求禁止这种保活机制。所以我们必须用其他一些协议消息来代替ICMP消息。目前，我们的解决方案是使用 TCP。显然，这种解决方案至少有两个缺点： 1\. 一个 TCP 连接发生故障并不一定意味着其他连接发生了同样的事情，也不意味着低层连接（例如，IP）也发生故障。2.建立TCP连接和发送/接收TCP消息相当耗时，这对我们现有的连通性测试计划是另一个挑战。

我想知道除了 TCP 之外是否还有其他解决方案可以满足我们的要求。

# java - Java Robot 获取其他应用程序的焦点

> ID：13115146
> 
> 赞同：2
> 
> 时间：2012-10-29T02:20:46.213
> 
> 标签：java, awtrobot

我有一个 java Robot 程序，它可以在记事本、单词等上输入一个单词。

但问题是我**没有获得窗口应用程序的焦点**，当我尝试使用**ALT-TAB**手动在其文本框中输入光标时，

并且该应用程序在列表中不可用，在执行 ALT-TAB 时，它在**任务管理器-> 应用程序选项卡**中也不可见， 但它**在任务管理器的进程选项卡中**可用。是否有任何解决方案可以使用 Java Robot 获得该 Windows 应用程序的 keyPress 焦点。

此外，在其他一些 PC 上，当我在运行 java 机器人程序后手动放置光标时，我得到了应用程序的清晰焦点。我已经在我所有的 PC 上安装了**JDK1.6**。它不仅适用于我的电脑。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:45:17.800

您可以将机器人置于后台，而不是获取其他应用程序的焦点，返回之前在前台（即您的目标应用程序）中的任何内容以获取焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:56:56.120

我认为您最好的选择是使用 JNA 来允许您进行系统调用。

假设是一个 Windows 程序，您可以使用 JNA 调用 user32.dll，包括 dll 函数，`FindWindowEx(...)`并将`SetForegroundWindow(...)`您选择的窗口设置为前台。

# group-by - JasperReports group by all - 即使没有返回也显示行

> ID：13115148
> 
> 赞同：0
> 
> 时间：2012-10-29T02:21:00.230
> 
> 标签：group-by, jasper-reports

我试图让 JasperReports 模仿 SQL`GROUP BY ALL`功能。我正在分组`MY_BOOL`，可以按 0 或 1 进行分组，我正在显示该值，并计算我的报告中的行数。但是，我想为每个显示一行，即使其中一个值有 0 行。例如，如果我的查询返回十行，并且`MY_BOOL=0`对于所有十行，我希望看到：

```
MY_BOOL | COUNT
0         10
1         0 
```

我怎样才能在 JasperReports 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:01:42.907

已编辑：听起来您需要 2 个变量并且没有组。

$V{MY_BOOL_0} 计算 $F{MY_BOOL} 为 0 的所有行。$V{MY_BOOL_1} 计算 $F{MY_BOOL} 为 1 的所有行。每个变量的初始值为 0，所以如果$F{MY_BOOL} = 0 的行数为零。

在标题（或摘要或任何地方）中显示 2 个变量以提供 2 个“分组”小计。

注意：这两个变量根本不使用组，但它们与组兼容。例如，如果您按月份分组，您可以计算每个月的 MY_BOOL_0 和 MY_BOOL_1 值。

# objective-c - 移除 obj-c 中的对象

> ID：13115152
> 
> 赞同：1
> 
> 时间：2012-10-29T02:21:20.453
> 
> 标签：objective-c, ios, automatic-ref-counting, sparrow-framework

我正在使用ARC。

我有一个运行此代码的按钮，用于创建对象（使用 Sparrow 框架的 SPPrite 对象）

```
 SKMarket *market = [[SKMarket alloc] initWithScrollContainer:scrollContainer]; 
```

在那个市场项目里面我有一个“关闭”按钮，它运行这个代码......

```
[self removeAllMarketButtons];

    [closeMarketButton removeFromParent];

    scrollContainer2.visible = YES;

    [self removeFromParent]; 
```

这确实删除了市场对象，但我不明白的是当我单击按钮再次设置市场时会发生什么，我再次运行这条线......

```
 SKMarket *market = [[SKMarket alloc] initWithScrollContainer:scrollContainer]; 
```

我是一名 AS3，在我的关闭按钮中的 AS3 中，我会执行上述所有操作，但我也会执行类似...

```
parent.market = null; 
```

所以当我运行设置市场的代码时，一切都是从新开始的，

1.  在 obj-c 的那种情况下会发生什么？
2.  即使不可见，该项目是否仍然存在？
3.  从一个新的市场对象开始会更好吗？或者..
4.  如果旧的市场对象仍然存在，以某种方式再次用新资产重新刷新它？

# wordpress - Author.php 上的 WordPress 查询不起作用

> ID：13115161
> 
> 赞同：1
> 
> 时间：2012-10-29T02:23:01.950
> 
> 标签：wordpress

以下查询不适用于我的主题的 WordPress author.php 模板。它包含在页脚中，该页脚在所有页面中都是相同的页脚，并且查询在除 author.php 之外的所有其他页面上都可以正常工作

```
 <?php if(have_posts()):?>
  <?php query_posts( array( 'post_type' => 'connect' ) ); while (have_posts()) : the_post(); ?>
  <div class="title"><?php the_title();?></div>
  <div class="logos">  
  <?php the_content();?>
  </div>
  <?php endwhile;?>
  <?php wp_reset_query(); ?>
  <?php endif;?> 
```

我已经花了一个多小时试图弄清楚发生了什么以及为什么这不起作用，但我现在觉得我正在与混凝土碰撞。为什么它不起作用？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T04:01:52.340

为了让我解释为什么它只在某些页面上起作用，您需要了解 query_posts() 的实际作用。

query_posts() 修改默认的 Wordpress 循环。无论您在哪个页面上，总是有一个由核心初始化的默认循环。除非您打算修改该循环，否则您必须**完全停止使用 query_posts()**。

query_posts() 经常被滥用的原因有很多，并且在许多论坛以及 Wordpress Codex 本身中都有详细说明。但这涉及到与您的问题无关的领域。

首先，让我们看看您的代码在做什么：

```
<?php if(have_posts()):?> //If the default loop finds posts....
<?php query_posts( array( 'post_type' => 'connect' ) );?> //Modify the loop to fit these new parameters 
```

基本上，只有在默认循环能够返回一组结果时，您的新查询才会运行。这适用于其他页面，因为默认循环通常适用于大多数情况。

它不适用于您的 Author.php 模板，因为无论出于何种原因，它都无法返回一组结果来运行您修改后的查询。

## 那么如何解决呢？

您需要更改结构以及调用查询的方式。我不知道您对项目的了解程度如何，如果这与客户的截止日期非常紧迫，但我的建议是放弃所有 query_posts() 调用以支持[WP Query](http://codex.wordpress.org/Class_Reference/WP_Query)

是不是看起来有点复杂？当然。但是，将其作为任何当前和未来 Wordpress 主题的生计将最终为您节省大量时间和麻烦。

**坏方法**：

```
<?php
query_posts( array( 'post_type' => 'connect' ) );
if(have_posts()): while (have_posts()) : the_post();
?>
<div class="title"><?php the_title();?></div>
<div class="logos">  
<?php the_content();?>
</div>
<?php
endwhile;
wp_reset_query();
endif;
?> 
```

**正确的方法**：

```
<?php
$q = new WP_Query( array( 'post_type' => 'connect' ) );
if($q->have_posts()) : while($q->have_posts()) : $q->the_post;
?>
<div class="title"><?php the_title();?></div>
<div class="logos">  
<?php the_content();?>
</div>
<?php
endwhile;
wp_reset_postdata();
endif;
?> 
```

希望这会有所帮助，祝你好运。

**更新：**

WP_Query 确实允许您按作者查询帖子，并且您假设在新的 WP_Query 对象中提供的默认值通常会反映给定页面上的默认查询似乎是有道理的，并且可以潜在地解释您所看到的行为。

由于 WP_Query 文档并没有真正提供一种明确搜索作者类型“任何”的方法，因此我们可能不得不在这个方面有点脏：

```
$user_ids = get_users(array('who'=>'author', 'fields'=>'ID'));
$q = new WP_Query( array( 'post_type' => 'connect', 'author'=>implode(',', $user_ids) ) ); 
```

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:58:08.640

尝试改用 wp 查询

```
$the_query = new WP_Query();
$the_query->query(array( 'post_type' => 'connect' ));
if ($the_query->have_posts()) : 
while($the_query->have_posts()) : $the_query->the_post();

endwhile; 
endif; 
wp_reset_postdata(); 
```

或者，如果 wp_query 不起作用，您也可以尝试使用**get_posts 。**我很确定这将在 author.php 中工作

```
global $post;
$args = array( 'post_type' => 'connect' );
$posts = get_posts( $args );
foreach( $posts as $post ): setup_postdata($post); 
   //you can call the_title the_content and any other method that runs under query_posts and WP_Query
endforeach; 
```

# vb.net - 如何将 DLL 动态导入到我的程序中？(vb.net)

> ID：13115163
> 
> 赞同：1
> 
> 时间：2012-10-29T02:24:13.163
> 
> 标签：vb.net, dll

有没有办法可以在运行时导入 DLL？例如，像这样：

```
Dim lib = ImportDLL("library.dll")
Dim result = lib.someNamespace.someClass.someFunction(arg1, arg2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:26:44.287

您可能指的是[反射](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)。网上有一堆文章，比如[微软](http://msdn.microsoft.com/en-us/magazine/cc163750.aspx)的。这个[代码项目](http://www.codeproject.com/Articles/206412/Reflection-101-An-Introduction-to-Reflection-in-NE)也是一个很好的演练。

# architecture - Hadoop：在地图任务之前，作业首先在哪里执行？

> ID：13115166
> 
> 赞同：0
> 
> 时间：2012-10-29T02:24:44.237
> 
> 标签：architecture, hadoop

这是一个典型`main`的 Hadoop Job 方法：

```
public class MyHadoopJobDriver extends Configured implements Tool {

  public static void main(String[] args) throws Exception {
    int exitCode = ToolRunner.run(new MyHadoopJobDriver(), args);
    System.exit(exitCode);
  }
  ...

} 
```

当我运行这个作业`hadoop MyHadoopJobDriver`时，**上面的代码是在任务跟踪器上自己的 JVM 中执行的吗？**那么一旦作业被调度，地图任务就会被分配给任务跟踪器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:30:39.760

是的，通常。请注意，如果您在 Eclipse 中“调试 -> 作为 Java 应用程序”该类，那么您可以使用调试器进行测试、设置断点等。请注意，即使您在 Eclipse 中运行驱动程序类和映射器/缩减器，您仍然需要在您的机器上运行 hadoop 以支持 HDFS。

# java - jsp中获取文件夹位置

> ID：13115169
> 
> 赞同：1
> 
> 时间：2012-10-29T02:25:09.737
> 
> 标签：java, jsp

我有这个jsp页面，它调用servlet类。在这个servlet类中，它调用另一个java类。然后这个java类试图找到一个名为“profiles”的文件夹。但是当我尝试在浏览器上运行jsp页面时，它保持返回ClassNotFoundException（是由于指定了错误的目录还是缺少JAR文件引起的？）。我要问的问题是：如何获得该文件夹的正确路径？

编辑：
这是代码：
在 UserClientSearch.jsp 中：

```
 <form id="form" method="post" action="UserClientServlet"> 
```

在 UserClientServlet.java 中：

```
 String value = request.getParameter("screenName");
    request.setAttribute("screenName", value);

    UserClientFilterSpam fs = new UserClientFilterSpam();
    ArrayList<String> content= fs.filterSpam(value); 
```

在 UserClientFilterSpam.java 中：

```
 try {
        lds.init("profiles");
    } catch (LangDetectException ex) {
        System.out.println("Error encountered: "+ ex);
    } 
```

这是堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [servlet.UserClientServlet] in context with path [/MarcusFYPJ] threw exception [Servlet execution threw an exception] with root cause
java.lang.ClassNotFoundException: com.cybozu.labs.langdetect.LangDetectException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at servlet.UserClientServlet.doPost(UserClientServlet.java:47)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:48:14.263

`com.cybozu.labs.langdetect.LangDetectException`该错误是由类路径中缺少的事实引起的。

您需要确保它包含在已部署的 Web 应用程序中。如果它是第 3^方JAR 文件，它可以驻留在 Web 应用程序的`WEB-INF/lib`文件夹中。

# lucene - 如何使用 lucene 从一份简历中提取信息

> ID：13115170
> 
> 赞同：0
> 
> 时间：2012-10-29T02:25:16.907
> 
> 标签：lucene

每个人！

我是 Lucene 的新手。

我正在使用 lucene 进行简历过滤器项目。首先，我想从简历中提取一些基本信息，例如生日等。

假设总是有一行说生日：1989/10/19 或类似的东西。我如何使用 Lucene 而不是直接使用正则表达式来提取这种信息。

目前我发现使用 SpanNearQuery 可能会有所帮助。但似乎我无法将 WildcardQuery 添加到 SpanNearQuery 以匹配生日信息。

我完全被卡住了。有什么好的建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:17:57.763

从包含一堆文本和日期格式的 Lucene 字段中提取日期并没有灵丹妙药。最好的方法是编写一个自定义分析器，它可以在索引过程中将术语分开并将数字字符识别为日期。

我为 Lucene 写了几个分析器，但是这样的东西并不是很简单……特别是如果你是 Lucene 的新手。

# xcode - iPhone 模拟器在 XCode 中只显示白屏

> ID：13115174
> 
> 赞同：2
> 
> 时间：2012-10-29T02:25:56.317
> 
> 标签：xcode

刚刚下载了最新版本的xcode。我是新手，我会很感激我能得到的任何帮助。我使用情节提要功能创建了一个非常基本的应用程序。它有 1 个表格视图（有 3 行；列为红色、蓝色和绿色），然后当您单击红色行时，它“应该”将您带到另一个屏幕，它会在文本视图窗口中告诉您关于红色的所有信息. 但是，当我启动 iphone 模拟器时，它只显示一个白屏。我将假设我不能将情节提要功能用作成熟的创建者，并且我需要在某处添加一些代码？

# python - python中非常小的数字的指数

> ID：13115176
> 
> 赞同：9
> 
> 时间：2012-10-29T02:26:00.797
> 
> 标签：python, math, exponential, underflow

我正在尝试计算python中-1200的指数（这是一个例子，我不需要-1200特别是-1200左右的数字集合）。

```
>>> math.exp(-1200)
0.0 
```

它给了我一个下溢；我该如何解决这个问题？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T02:31:53.873

在标准库中，您可以查看`decimal`模块：

```
>>> import decimal
>>> decimal.Decimal(-1200)
Decimal('-1200')
>>> decimal.Decimal(-1200).exp()
Decimal('7.024601888177132554529322758E-522') 
```

如果您需要的功能多于`decimal`支持的功能，则可以查看`mpmath`我使用并非常喜欢的 library：

```
>>> import mpmath
>>> mpmath.exp(-1200)
mpf('7.0246018881771323e-522')
>>> mpmath.mp.dps = 200
>>> mpmath.exp(-1200)
mpf('7.0246018881771325545293227583680003334372949620241053728126200964731446389957280922886658181655138626308272350874157946618434229308939128146439669946631241632494494046687627223476088395986988628688095132e-522') 
```

但如果可能的话，你应该看看你是否可以重铸你的方程以完全在对数空间中工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T02:32:34.020

尽可能长时间地尝试在对数域中计算。即避免计算精确值，但继续使用指数。

exp(-1200) 是一个非常小的数字（就像 exp(1200) 是一个非常非常大的数字一样），所以也许确切的值并不是您真正感兴趣的。如果您只需要比较这些数字，那么对数空间应该足够了。

# c# - 用户界面变得慢得多，甚至长时间运行时崩溃

> ID：13115181
> 
> 赞同：0
> 
> 时间：2012-10-29T02:27:20.590
> 
> 标签：c#, winforms

我正在使用 .Net 4.0 和 VS2010。

我的程序只是一个多线程获取请求发送者，它更新一个 bindingList 并通过 DataGridView 显示列表。datagridview 处于虚拟模式。此外，我制作了一个文本框和状态栏来显示请求的状态，一个请求通常会在文本框中添加 4-5 行并更改状态栏中的数字。

工作负载保持不变，每两秒一个请求。请求速度很快，大部分时间只有一个请求突出。新请求线程由最后一个旧请求线程调用。UI 使用 begininvoke 和委托在每个线程中更新几次。

```
MyInvoke mi = new MyInvoke(change);
this.BeginInvoke(mi, new Object[] { true, "Row " + pos + " standing by...", (pos + 1),0 }); 
```

我一开始在 datagridview 上显示全部 3000 个请求，内存使用量为 30MB。当内存使用量为 4XMB 达到 2XXX 请求时，我可以看到状态栏编号和文本框更新速度越来越慢。例如，2000->2001->2002->2003 变为 2000->2003。

如果我选择应用程序窗口，有时整个 UI 甚至会冻结。我的 datagridview 用虚拟模式固定在几行上。我相信这是UI线程的问题。当它冻结时，我可以等到所有请求都完成并且一切再次变得顺利。

对正在发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:47:46.807

最后，我弄清楚了为什么它这么慢。像我这样的菜鸟可能很容易犯这种错误。我在线程期间使用的大量 begininvoke 确实有影响，但不足以冻结 UI 线程。

繁重的工作量主要是由以下代码购买的，它每次都将整个文本分配给文本框

```
 textbox1.Text += "string" 
```

下面的代码可以解决它

```
textbox1.AppendText("string") 
```

# objective-c - 为什么这种类型转换本身不适用？

> ID：13115183
> 
> 赞同：0
> 
> 时间：2012-10-29T02:27:28.310
> 
> 标签：objective-c, ios, crash, nsdate, abaddressbook

我一直在研究这个问题一段时间，似乎无法找到解决方案。在我的应用程序中，我根据创建日期唯一标识联系人`ABAddressBook`，因为不能同时创建两个联系人。在我的应用程序中，创建日期存储在一个名为 的字符串中`uid`，如下所示。我正在检查两个联系人是否相同，我通过执行以下条件语句来做到这一点：

```
NSString *uid = @"some string";

if([(__bridge_transfer NSString *)ABRecordCopyValue(currentPersonRef, kABPersonCreationDateProperty) isEqualToString:uid]) {

    //Do some code
} 
```

但是，当我运行此代码时，出现以下错误：

> [__NSDate isEqualToString:]：无法识别的选择器发送到实例 0x8c7c770

我很确定问题在于`ABRecordCopyValue()`返回的 NSDate 对象没有被转换为`NSString`，`(__bridge_transfer NSString *)`所以当我将它与`uid`using进行比较时`isEqualToString`，它会崩溃。问题是，我认为通过将其转换为 NSString 对象`isEqualToString:`会起作用。我的问题是：

### 为什么 (__bridge_transfer NSString *) 不强制转换 NSDate 对象？

* * *

## 编辑：

提供的答案很有用，但它们并没有完全解决我的问题（实际上他们确实如此，但我有一个后续问题）。在我的代码的另一部分，我运行这个：

```
NSString *uid = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonCreationDateProperty); 
```

如果我 NSLog`uid`我得到这个：

> 2012-10-28 21:55:29 +0000

那么如果不起作用，我将如何`uid`在上述条件语句中进行比较？`isEqualToString:`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:40:35.640

强制转换永远不会改变对象的类或类型。它只是告诉编译器，你确信这个对象是另一种类型，而不是编译器可能假设的。

因此，如果您将日期对象转换为字符串，它仍然是日期对象。

在 OOP 中，您通常需要向上转换：一个方法希望您传入一个对象，但实际上您传入的是子类的一个对象。如果您随后需要访问由子类定义的属性或方法，您将通过强制转换告诉编译器您拥有子类的对象。
iOS 中一个非常常见的示例是`tableview:cellForRowAtIndexPath:`子类单元格。

在 cocoa(-touch) 中，您还知道[免费桥接的](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html)铸造。请参阅此文档以获取有效的演员表。

* * *

> 提供的答案很有用，但它们并没有完全解决我的问题（实际上他们确实如此，但我有一个后续问题）。在我的代码的另一部分，我运行这个：
> 
> ```
> NSString *uid = (__bridge_transfer NSString *)ABRecordCopyValue(currentPerson, kABPersonCreationDateProperty); 
> ```
> 
> 如果我 NSLog uid 我得到这个：
> 
> ```
> 2012-10-28 21:55:29 +0000 
> ```

您正在创建一个变量，您将其声明为 NSString，但实际上您分配给它的对象是一个日期对象。

```
NSDate *uidDate = (__bridge_transfer NSDate *)ABRecordCopyValue(currentPerson, kABPersonCreationDateProperty);

NSString *uid = [NSString stringWithFormat:uidDate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:35:05.493

好吧，我不知道你的问题的答案，但你为什么不直接将 ABRecordCopyValue() 转换为 NSString，然后执行 isStringEqual:？

像 -

```
NSString *string = [NSString stringWithFormat:@"%@", ABRecordCopyValue(currentPersonRef, kABPersonCreationDateProperty)];
if([string isEqualToString: uid]){
    //do your thing
} 
```

# c# - 如何在 Windows 8 Metro 程序中使用密码解压 zip？

> ID：13115184
> 
> 赞同：0
> 
> 时间：2012-10-29T02:27:56.210
> 
> 标签：c#, windows-8, .net-4.5

我有一个 zip 密码文件并且知道这个密码。

我需要在 Windows 8 Metro 应用程序代码中打开这个 zip 文件。

但在 Windows 8 Metro 应用程序代码中不支持使用密码解压缩 zip 的“System.IO.Compression.ZipArchive”。

我正在尝试 SharpZipLib 和 DotNetZip。但它们不支持 net 4.5。所以我不在我的地铁程序代码中使用它们。

我正在尝试 Ionic.Zip。在程序代码中没问题。我想构建包以上传到 Windows 商店。但不能通过微软代码审查。

还有其他方法吗？多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T05:28:13.350

该`System.IO.Compression.FileSystem`程序集不适用于 Windows 应用商店应用程序，因此您不能使用[ZipFileExtensions 类](http://msdn.microsoft.com/en-us/library/system.io.compression.zipfileextensions.aspx)`ExtractToDirectory`的扩展方法。

使用 StorageFile 代替 DirectoryInfo、FileInfo 等。有关如何在 Metro 风格应用程序中读取和写入文件的更多信息，请参阅[访问数据和文件](http://msdn.microsoft.com/en-us/library/windows/apps/hh464959.aspx)和[文件访问示例。](http://go.microsoft.com/fwlink/?LinkId=231445)然后，您需要将文件中的数据读取到流中，然后将其传递给以下类之一的方法（您的选择）：

*   [DeflateStream](http://msdn.microsoft.com/en-us/library/system.io.compression.ziparchive.aspx)（从 .NET 4.5 开始在内部使用 zlib）

*   [ZipArchive](http://msdn.microsoft.com/en-us/library/windows/apps/system.io.compression.ziparchive%28v=vs.110%29.aspx)或[GZipStream](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)类。这些[适用](http://msdn.microsoft.com/en-us/library/windows/apps/hh454050%28v=vs.110%29.aspx#sectionToggle1)于 Metro 风格的应用程序，即使文件特定的扩展方法不可用。

*   Windows 运行时类型的[解压](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.compression.decompressor.aspx?cs-save-lang=1&cs-lang=csharp)器来解压文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T08:25:33.607

您可以使用[https://sharpcompress.codeplex.com/](https://sharpcompress.codeplex.com/)。它支持打开文件 zip 有密码

代码如下

//如果文件zip有一个文件pdf，一个文件xml

异步无效读取（存储文件文件）{

```
 MemoryStream memoryFilePDf = new MemoryStream();

        MemoryStream memoryFileXml = new MemoryStream();

        FilePdf = null;

        FileXml = null;

        using (var zipStream = await file.OpenStreamForReadAsync())
        {
            using (MemoryStream zipMemoryStream = new MemoryStream((int)zipStream.Length))
            {
                await zipStream.CopyToAsync(zipMemoryStream);
                try
                {
                    using (var archive = ZipArchive.Open(zipMemoryStream, PassWord))
                    {
                        bool isFilePdf = false;
                        foreach (var entry in archive.Entries)
                        {
                            if (!entry.Key.ToLower().EndsWith(".pdf") && !entry.Key.ToLower().EndsWith(".xml"))
                            {
                                continue;
                            }

                            if (entry.Key.ToLower().EndsWith(".pdf"))
                            {
                                isFilePdf = true;
                                entry.WriteTo(memoryFilePDf);
                            }
                            else
                            {
                                isFilePdf = false;
                                entry.WriteTo(memoryFileXml);
                            }

                            var fileName = entry.Key.Split(new char[] { '/' }, StringSplitOptions.RemoveEmptyEntries).LastOrDefault();
                            var createFile = await ApplicationData.Current.TemporaryFolder.CreateFileAsync(fileName, Windows.Storage.CreationCollisionOption.GenerateUniqueName);

                            using (IRandomAccessStream stream = await createFile.OpenAsync(FileAccessMode.ReadWrite))
                            {
                                // Write compressed data from memory to file
                                using (Stream outstream = stream.AsStreamForWrite())
                                {
                                    byte[] buffer = isFilePdf ? memoryFilePDf.ToArray() : memoryFileXml.ToArray();
                                    outstream.Write(buffer, 0, buffer.Length);
                                    outstream.Flush();
                                }
                            }

                            if (isFilePdf)
                            {
                                FilePdf = createFile;
                            }
                            else
                            {
                                FileXml = createFile;
                            }

                        }
                    }
                }
                catch (Exception ex)
                {
                    throw new Exception(ex.Message);
                }
            }
        }
    } 
```

# java - 未找到接口参数函数

> ID：13115185
> 
> 赞同：0
> 
> 时间：2012-10-29T02:27:57.270
> 
> 标签：java, interface, parameters

我有以下代码：

```
public class Utils{
    public static void closeQuietly(Closeable c){
         try{c.close();} catch(Exception e){}
    }
    public static void main(String [] args){
         Closeable cl = new Socket();
         closeQuietly(cl);
    }
} 
```

这看起来很简单，但由于某种原因，我收到以下编译器错误：

```
error: cannot find symbol
closeQuietly(cl);
^
symbol:   method closeQuietly(Closeable)
location: class Utils 
```

我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:29:12.793

我在 ideone.com 上试过你的代码，它编译得很好。

从编译错误信息来看，很明显是找不到`closeQuietly(Closeable)`，而且“箭头”是指向方法名的，很有可能不存在这个名字的方法。请再次检查您的实际代码中是否有任何拼写错误。

# c# - MVC 4 Web 应用程序中的应用程序范围日志记录

> ID：13115186
> 
> 赞同：2
> 
> 时间：2012-10-29T02:28:14.540
> 
> 标签：c#, asp.net, asp.net-mvc-4, error-logging

在 MVC4 中实现应用程序范围日志记录的最佳方法是什么？是否可以仅使用配置来实现全局异常日志记录？是否有任何现有的做法可以为其分配某种自定义级别？（例如：跟踪、警告、错误、异常等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T02:35:10.553

[Elmah](http://code.google.com/p/elmah/)在未处理的异常日志记录方面非常受欢迎，但要在 MVC 中正常工作可能会有些挑战。

我个人使用受[Elmah](http://sourceforge.net/p/elfar/wiki/Home/) “启发”但更针对 MVC 的 Elfar。

有多种方法可以将定期登录合并到您的应用程序中，实际上其中有很多。 [Log4net](http://logging.apache.org/log4net/)、[NLog](http://nlog-project.org/)和其他人为您提供了进行日志记录的工具。

# ruby - 使用 RVM 的 Ruby 安装问题

> ID：13115189
> 
> 赞同：2
> 
> 时间：2012-10-29T02:28:34.223
> 
> 标签：ruby, installation, rvm

我在使用 RVM 安装 Ruby 时遇到问题。我曾尝试使用 readline 和其他在线建议。没有一个解决方案奏效。

我使用 Cygwin、Bash 并安装了 RVM。

```
rvm install 1.9.2
No binary rubies available for: /ruby-1.9.2-p320.
Continuing with compilation. Please read 'rvm mount' to get more information on    binary  rubies.
Fetching yaml-0.1.4.tar.gz to /home/arvenkataraman/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /home/arvenkataraman/.rvm/src
Configuring yaml in /home/arvenkataraman/.rvm/src/yaml-0.1.4.
Compiling yaml in /home/arvenkataraman/.rvm/src/yaml-0.1.4.
Error running 'make', please read /home/arvenkataraman/.rvm/log/ruby-1.9.2-p320/yaml/make.log
Installing Ruby from source to: /home/arvenkataraman/.rvm/rubies/ruby-1.9.2-p320, this may take a while depending on your cpu(s)...
ruby-1.9.2-p320 - #downloading ruby-1.9.2-p320, this may take a while depending on your connection...
ruby-1.9.2-p320 - #extracting ruby-1.9.2-p320 to /home/arvenkataraman/.rvm/src/ruby-  1.9.2-p320
ruby-1.9.2-p320 - #extracted to /home/arvenkataraman/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #configuring
ruby-1.9.2-p320 - #compiling
ruby-1.9.2-p320 - #installing
ruby-1.9.2-p320 is not installed.
To install do: 'rvm install ruby-1.9.2-p320' 
```

我在错误日志“/home/arvenkataraman/.rvm/log/ruby-1.9.2-p320/yaml/make.log”中看到以下内容

```
$ cat /home/arvenkataraman/.rvm/log/ruby-1.9.2-p320/yaml/make.log
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /home/arvenkataraman/.rvm/src/yaml-0.1.4/config/missing --run aclocal-1.11
cd . && /bin/sh /home/arvenkataraman/.rvm/src/yaml-0.1.4/config/missing --run automake-1.11 --foreign
src/Makefile.am:2: Libtool library used but `LIBTOOL' is undefined
src/Makefile.am:2:   The usual way to define `LIBTOOL' is to add `LT_INIT'
src/Makefile.am:2:   to `configure.ac' and run `aclocal' and `autoconf' again.
src/Makefile.am:2:   If `LT_INIT' is in `configure.ac', make sure
src/Makefile.am:2:   its definition is in aclocal's search path.
Makefile:256: recipe for target `Makefile.in' failed
make: *** [Makefile.in] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:12:43.500

这项工作对我来说确保 RVM 是最新的

```
rvm get head

CC=/usr/bin/gcc rvm install 1.9.2 --enable-shared 
```

注意：/usr/bin/gcc ==> path/to/gcc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:28:44.090

几个步骤：

1.  更新 RVM：`rvm get head`
2.  阅读并遵循说明：`rvm requirements`
3.  重新安装红宝石：`rvm reinstall 1.9.2`

# ruby-on-rails - Rails 3.1 中的 Mapstraction 预编译错误

> ID：13115190
> 
> 赞同：0
> 
> 时间：2012-10-29T02:29:33.583
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.1, mapstraction

我有一个 Rails 3.1 应用程序，其资产设置为在生产中预编译（在本例中为 Heroku）。这包括 jQuery、jQueryUI 和 Mapstraction。然而，运行`heroku logs`显示 Mapstraction，一个映射 JS 库，可能没有成功预编译：

```
2012-10-25T05:13:11+00:00 app[web.1]: ActionView::Template::Error (mxn.js?(googlev3) isn't precompiled):
2012-10-25T05:13:11+00:00 app[web.1]:     8:   <%= javascript_include_tag :application %>
2012-10-25T05:13:11+00:00 app[web.1]:     9:   <%= csrf_meta_tag %>
2012-10-25T05:13:11+00:00 app[web.1]:     11:   <%= javascript_include_tag "mxn.js?(googlev3)" %>
2012-10-25T05:13:11+00:00 app[web.1]:     12:   <script type="text/javascript">
2012-10-25T05:13:11+00:00 app[web.1]:     10:   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

我怀疑由于 Mapstraction (mxn.js) 是使用地理数据服务提供者名称作为 Rails 可能无法处理的参数构建的。不过，它在开发环境中本地工作，无需预编译。关于为什么在这种情况下预编译会失败的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T21:42:13.817

您可以手动包含必要的文件以使 Mapstraction 与 Rails 资产管道一起工作：

```
curl https://raw.github.com/mapstraction/mxn/master/source/mxn.js > vendor/assets/javascripts/mxn.js
curl https://raw.github.com/mapstraction/mxn/master/source/mxn.core.js > vendor/assets/javascripts/mxn.core.js
curl https://raw.github.com/mapstraction/mxn/master/source/mxn.openlayers.core.js > vendor/assets/javascripts/mxn.openlayers.core.js 
```

然后你把

```
//= require mxn
//= require mxn.core
//= require mxn.openlayers.core 
```

# firefox - 我的网站似乎首先在 Firefox 上加载脚本，预加载器无法正常工作

> ID：13115194
> 
> 赞同：1
> 
> 时间：2012-10-29T02:30:13.443
> 
> 标签：firefox, scripting, load, background-image

因此，Firefox 似乎在其他所有内容之后加载背景图像。我重新组织了我的网站，所以第一张图片不是背景图片，因此它似乎首先加载。好消息......但其他图像在最后继续加载。我打算进一步优化它们，但我认为这不是问题。

[http://www.nogginusers.com/eco/index.html](http://www.nogginusers.com/eco/index.html)

# node.js - fluent-ffmpeg 缩略图创建错误

> ID：13115200
> 
> 赞同：8
> 
> 时间：2012-10-29T02:31:08.400
> 
> 标签：node.js, ffmpeg, thumbnails

我尝试使用 fluent-ffmpeg 创建视频缩略图这是我的代码

```
var ffmpeg = require('fluent-ffmpeg');

exports.thumbnail = function(){
    var proc = new ffmpeg({ source: 'Video/express2.mp4',nolog: true })
    .withSize('150x100')
    .takeScreenshots({ count: 1, timemarks: [ '00:00:02.000' ] }, 'Video/', function(err, filenames) {
    console.log(filenames);
    console.log('screenshots were saved');
  });
} 
```

但我不断收到此错误

```
 "mate data contains no duration, aborting screenshot creation" 
```

知道为什么，

顺便说一下我在windows上，我把ffmpeg文件夹放在c/ffmpeg中，我把ffmpeg/bin添加到我的环境变量中，我不知道fluent-ffmpeg是否需要知道ffmpeg的路径，但我可以成功使用以下代码创建缩略图

```
 exec("C:/ffmpeg/bin/ffmpeg -i Video/" + Name  + " -ss 00:01:00.00 -r 1 -an -vframes 1 -s 300x200 -f mjpeg Video/" + Name  + ".jpg") 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-07T09:43:22.680

我认为这个问题可能是由 .withSize('...') 方法调用引起的。医生说：

> 它与过滤器的交互效果不佳。特别是，不要使用 size() 方法来调整缩略图的大小，而是使用 size 选项。

size() 方法是 withSize() 的别名。

另外-但这不是您的问题-您不需要同时设置计数和时间标记。医生说：

> 指定时间标记或时间戳时忽略计数。

然后你可能可以解决：

```
const ffmpeg = require('fluent-ffmpeg');

exports.thumbnail = function(){
    const proc = new ffmpeg({ source: 'Video/express2.mp4',nolog: true })
    .takeScreenshots({ timemarks: [ '00:00:02.000' ], size: '150x100' }, 'Video/', function(err, filenames) {
    console.log(filenames);
    console.log('screenshots were saved');
  });
} 
```

看看文档： [https ://github.com/fluent-ffmpeg/node-fluent-ffmpeg#screenshotsoptions-dirname-generate-thumbnails](https://github.com/fluent-ffmpeg/node-fluent-ffmpeg#screenshotsoptions-dirname-generate-thumbnails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T00:29:01.957

FFmpeg 需要知道视频文件的持续时间，而大多数视频在文件头中有此信息，有些文件没有，主要是原始视频，如原始 H.264 流。

一个简单的解决方案可能是在拍摄快照之前重新混合视频，此任务的 FFmpeg 0.5 命令非常简单：

```
ffmpeg -i input.m4v -acodec copy -vcodec copy output.m4v 
```

该命令告诉 FFmpeg 读取“input.m4v”文件，使用相同的音频编码器和视频编码器（根本不编码）进行输出，并将数据输出到文件 output.m4v 中。

FFmpeg 会自动添加以后拍摄快照所需的所有额外元数据/标头信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T13:15:29.947

尝试使用此代码从视频创建缩略图

```
// You have to Install Below packages First
var ffmpegPath = require('@ffmpeg-installer/ffmpeg').path;
var ffprobePath = require('@ffprobe-installer/ffprobe').path;
var ffmpeg = require('fluent-ffmpeg');
ffmpeg.setFfmpegPath(ffmpegPath);
ffmpeg.setFfprobePath(ffprobePath);

          var proc = ffmpeg(sourceFilePath)
          .on('filenames', function(filenames) {
            console.log('screenshots are ' + filenames.join(', '));   
          })
          .on('end', function() {
            console.log('screenshots were saved');
          })
          .on('error', function(err) {
            console.log('an error happened: ' + err.message);
          })
          // take 1 screenshots at predefined timemarks and size
          .takeScreenshots({ count: 1, timemarks: [ '00:00:01.000' ], size: '200x200' }, "Video/"); 
```

# php - 为某些控制器强制使用 SSL 的最佳方法？

> ID：13115206
> 
> 赞同：1
> 
> 时间：2012-10-29T02:32:00.310
> 
> 标签：php, lithium

我想对某些控制器强制使用 SSL，并为其他所有控制器删除 SSL。前段时间我在自定义 Controller 类的 _init() 中有一个片段，它没有像我希望的那样工作：

```
$ssl = $this->request->is('ssl');

$forceSecured = in_array($this->request->controller, array('Orders', 'Customers'));

//remove SSL for non-ssl pages
if ($ssl && !$forceSecured) {
    return $this->redirect(Router::match(
                    $this->request->params,
                    $this->request,
                    array('absolute' => true, 'scheme' => 'http://')
            )
    );
}

// Force ssl on for ssl pages
if (!$ssl && $forceSecured) {
    return $this->redirect(Router::match(
                    $this->request->params,
                    $this->request,
                    array('absolute' => true, 'scheme' => 'https://')
            )
    );
} 
```

我支持一个遗留应用程序，所以我定义了多个硬编码路由。我确信我可以在 Router::connect 中使用处理程序，但我宁愿检查所有请求。延续路线会是去这里的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T12:29:37.180

有两件事：（1）你不能返回一个`Response`对象`_init()`（这是`redirect()`返回的），（2）你有一个微妙的设计问题。我建议这样做：

```
protected $_secure = false;

public function __invoke($request, $params, array $options = array()) {
    if (!$this->_secure && !$request->is('ssl')) {
        return parent::__invoke($request, $params, $options);
    }
    return $this->redirect(Router::match($request->url, $request, [
        'absolute' => true, 'scheme' => 'https://'
    ]));
} 
```

**观察：**

*   您正在重定向到相同的 URL，但对于协议，冗余生成 URL 没有意义
*   特定控制器是否被重定向的决定由控制器决定；当您达到这一点（并且您可能*会*达到这一点）不仅是每个控制器而且是每个动作时，这一点变得更加重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:34:46.430

为什么让它进入应用程序？如果您正在使用特定路由来强制使用 ssl，请使用 htaccess 重写。

ssl 是传输协议细节，与你的站点代码无关，让 apache（或 nginx）处理这些细节。分工负责什么事情最好处理。

如果您提供要捕获的 exac url，我相信有些人可以帮助重写条件逻辑

# django - 一对一和外键关系的区别？

> ID：13115207
> 
> 赞同：2
> 
> 时间：2012-10-29T02:32:05.517
> 
> 标签：django, django-models

有人可以解释将 Django 模型中的关系指定为一对一的重要性，而不仅仅是外键吗？

具体来说，我想知道将关系指定为 1-1（如果有）有什么好处。

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T06:52:33.783

`OneToOneField`'ForeignKey' 之后在 Django 中的演变。从概念上讲，`ForeignKey`带有`unique=True`约束的 a 类似于`OneToOneField`。

因此，如果您想确保每张图片都有一个用户，反之亦然，请使用`OneToOneField`.

如果您希望一个用户拥有任意数量的图片，请使用`ForeignKey`.

选择事物的方式也不同。在做的情况下`OneToOneField`，可以做user.picture，直接获取图片。如果`ForeignKey`您`user.picture_set[0]`需要获取第一张图片或访问与该用户关联的所有图片。

[MultiTableInheritance](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)在内部隐式使用 OneToOneField，您可以看到这个概念的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:04:49.513

他们是不一样的; 想一想：

`User`如果 a和 a之间存在一对一的关系`Picture`，则表示用户只能拥有一张图片（并且一张图片只能拥有一个用户）。如果你有一个`Picture`带有外键的`User`，那么你是说一张图片必须只有一个用户，但一个用户可能有 0、1 或多张图片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T03:41:41.883

1-1 的附加约束提供了更紧密和更丰富的概念模型，但也可以提供可以进行更直观检索的洞察力。由于多对一表示父/集合关系，因此与检索特定实体的任何给定集合相关的成本不明确。由于 1-1 提供了一个平面映射，因此检索的成本也是一个平面。这将导致诸如在相关时更喜欢急切获取之类的事情，因为连接将能够轻松优化，并且生成的数据集将是已知大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T03:03:02.650

Django 的外键是多对一的关系。现在，它们之间的区别与一对一和多对一关系之间的区别相同。例如，如果您有 User 和 Profile 实体。您想添加一个约束，即每个用户只能拥有一个配置文件。然后，使用 django 的一对一字段会对数据库级别产生限制，因此您将无法将用户与多个配置文件相关联，反之亦然。使用外键不会提供此约束。

# c# - 检查 xml 值是否包含在列表中

> ID：13115208
> 
> 赞同：0
> 
> 时间：2012-10-29T02:32:16.847
> 
> 标签：c#, linq

我有：

```
var results = response.Xml.Descendants("M").Where(foo => foo.Value.Contains("john")); 
```

我如何将其更改为：

```
List<string> ValidUsers = new List<string>();
ValidUsers.Add("John");
ValidUsers.Add("Smurf");
var results = response.Xml.Descendants("M")
    .Where(foo => foo.Value.Contains(ValidUsers)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:36:14.707

切换它（只是猜测，而不是 testet）。

不是`foo.Value.Contains(ValidUsers)`但是`ValidUsers.Contains(foo.Value)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:12:47.247

弄清楚了：

```
var results = doc.Descendants("M")
　　　　.Where(foo => ValidUsers.Any(s => foo.Value.Contains(s))); 
```

# jakarta-ee - EJB 容器初始化错误

> ID：13115210
> 
> 赞同：0
> 
> 时间：2012-10-29T02:32:24.780
> 
> 标签：jakarta-ee, glassfish, ejb

我正在尝试实现 EJB 命令来传达两个 jsf 项目。

我创建了一个 EAR，其中有我的两个 jsf 项目 + ejb 。

不幸的是，我似乎无法启动该项目。

```
WARNING: StatefulContainerbuilder instantiated store: org.glassfish.ha.store.adapter.file.FileBackingStore@ece71a0; ha-enabled: false ==> BackingStoreConfiguration{clusterName='null', instanceName='null', storeName='Login-88570309275090944-BackingStore', shortUniqueName='88570309275090944', storeType='file', maxIdleTimeInSeconds=-1, relaxVersionCheck='null', maxLoadWaitTimeInSeconds=0, baseDirectoryName='C:\Users\Joff\AppData\Roaming\NetBeans\7.2\config\GF3\domain1\session-store\Login-88570309275090944', keyClazz=interface java.io.Serializable, valueClazz=class org.glassfish.ha.store.util.SimpleMetadata, synchronousSave=false, typicalPayloadSizeInKiloBytes=0, vendorSpecificSettings={start.gms=false, async.replication=true, key.transformer=com.sun.ejb.base.sfsb.util.SimpleKeyGenerator@9bdd877, local.caching=true, value.class.is.thread.safe=true, broadcast.remove.expired=false}}
SEVERE: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer load method
java.lang.RuntimeException: EJB Container initialization error
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:242)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:305)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:108)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.RuntimeException: Erreur lors de la liaison du nom JNDI EJB.LoginRemote#EJB.LoginRemote pour l'EJB Login
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1553)
    at com.sun.ejb.containers.StatefulSessionContainer.initializeHome(StatefulSessionContainer.java:213)
    at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:167)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
    ... 33 more
Caused by: javax.naming.NameAlreadyBoundException: Use rebind to override
    at com.sun.enterprise.naming.impl.TransientContext.doBindOrRebind(TransientContext.java:333)
    at com.sun.enterprise.naming.impl.TransientContext.bind(TransientContext.java:268)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.bind(SerialContextProviderImpl.java:98)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.bind(LocalSerialContextProviderImpl.java:99)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:672)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:689)
    at javax.naming.InitialContext.bind(InitialContext.java:423)
    at javax.naming.InitialContext.bind(InitialContext.java:423)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:208)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:189)
    at com.sun.ejb.containers.BaseContainer$JndiInfo.publish(BaseContainer.java:5629)
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1540)
    ... 36 more

SEVERE: Exception while loading the app
SEVERE: Exception while loading the app : EJB Container initialization error
java.lang.RuntimeException: Erreur lors de la liaison du nom JNDI EJB.LoginRemote#EJB.LoginRemote pour l'EJB Login
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1553)
    at com.sun.ejb.containers.StatefulSessionContainer.initializeHome(StatefulSessionContainer.java:213)
    at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:167)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:305)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:108)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.naming.NameAlreadyBoundException: Use rebind to override
    at com.sun.enterprise.naming.impl.TransientContext.doBindOrRebind(TransientContext.java:333)
    at com.sun.enterprise.naming.impl.TransientContext.bind(TransientContext.java:268)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.bind(SerialContextProviderImpl.java:98)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.bind(LocalSerialContextProviderImpl.java:99)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:672)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:689)
    at javax.naming.InitialContext.bind(InitialContext.java:423)
    at javax.naming.InitialContext.bind(InitialContext.java:423)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:208)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:189)
    at com.sun.ejb.containers.BaseContainer$JndiInfo.publish(BaseContainer.java:5629)
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1540)
    ... 36 more 
```

如果有人能告诉我我做错了什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T12:28:53.263

不是因为您在两个项目中都有相同的 EJB（具有相同的远程接口）吗？当您部署第一个时，它工作正常。当您部署第二个时，Glassfish 会抱怨，因为存在命名冲突。

# java - MySQL Java 更新语法

> ID：13115212
> 
> 赞同：2
> 
> 时间：2012-10-29T02:32:30.447
> 
> 标签：java, mysql, syntax, syntax-error

我只是想在我的应用程序中使用更新，但我不能。控制台，这个 mysql 命令有效，但在这里，没有。

好吧，我在我的程序中使用它：

```
 conexao = poolMySQL.connect();
    final String sql = "UPDATE professor  SET codlocal = ?  WHERE codprof = ?";

    pstmt = conexao.prepareStatement(sql);

    pstmt.setInt(1, local);
    pstmt.setInt(2, id);
    try {
        pstmt.executeUpdate(sql);
    } catch (SQLException ex) {
        Logger.getLogger(ProfessorDAO.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

提醒一下，codlocal 是来自另一个名为 Localidade 的表的外键。我看到了一些关于加入的例子，但我无法想象这对我有什么用。

我明白了：

```
 Grave: null
    com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '?  WHERE codprof = ?' at line 1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:409)
    at com.mysql.jdbc.Util.getInstance(Util.java:384)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1054)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3566)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3498)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1959)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2113)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2562)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1664)
    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1583)
    at DAO.ProfessorDAO.atualizaLocalidade(ProfessorDAO.java:153)
    at DAO.Main.main(Main.java:23) 
```

那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:36:48.363

你必须使用 pstmt.executeUpdate(); 代替 pstmt.executeUpdate(sql);

# python - 将文件读入字典并记数

> ID：13115214
> 
> 赞同：0
> 
> 时间：2012-10-29T02:32:35.840
> 
> 标签：python, file, function, dictionary

我有一个文本文件，其中包含 4 篇不同的文章，其中包含单词，每篇文章都由文本分隔`"<NEW ARTICLE>"`：

```
<NEW ARTICLE>
Take a look at 
what I found.
<NEW ARTICLE>
It looks like something
dark and shiny.
<NEW ARTICLE>
But how can something be dark
and shiny at the same time?
<NEW ARTICLE>
I have no idea. 
```

我想要做的是读取这个文件并将其变成字典，然后计算使用了多少次`"<NEW ARTICLE>" or "ARTICLE>"`。这样，当我搜索`"dark and shiny"`第二次和第三次`"<NEW ARTICLE>"`出现的单词时。

要搜索的单词将是用户输入的变量，我想我可以弄清楚如何在文件中搜索它，我只是无法弄清楚如何将文件的内容变成字典然后保留count everytime`"<NEW ARTICLE>" or "ARTICLE>"`出现，这样当用户在文件中搜索一个词时，它会显示该词存在的文章的编号（可以是多个文章中该词的多个实例）。

输出看起来像这样：

```
Input - Word(s) to search for: dark and shiny
Output - Word(s) found in articles: 2 3
Input - Read which article?: 2
Output - It looks like something dark and shiny. 
```

使用 Python 3，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:45:07.243

这个问题对我来说听起来像是家庭作业。所以我给你一个算法，让你自己实现：

1.  创建一个空字典
2.  维护一个整数（让我们称之为`articleNum`）。从 0 开始。
3.  遍历输入文件（首先打开它进行阅读，最好使用`with`）
4.  如果您看到的行包含`<NEW ARTICLE>`，则递增`articleNum`。
5.  否则，遍历行中的单词（使用`line.split()`）
6.  对于行中的每个单词，检查该单词是否是字典中的键
7.  如果它还不是字典中的键，则将其作为键添加到字典中并使其值成为一个列表，其中包含`articleNum`
8.  如果它已经是字典中的键，则追加`articleNum`到该键的值
9.  读完文件后，作为用户进行输入。
10.  从字典中获取用户输入的值（如果输入已经是字典中的键）；这应该是一个整数列表
11.  将这个整数列表打印给用户，作为输出

希望这可以帮助

# php - 如何使用 php If 条件选择范围

> ID：13115215
> 
> 赞同：-6
> 
> 时间：2012-10-29T02:32:53.623
> 
> 标签：php, if-statement

我有一个带有数字的自动生成字符串。它可以从 0 到 99。我如何从中选择每个***“2,3,4”***？***（x2、x3、x4 等）***

```
$n = 53;

if($i == ?){ echo "there is 3";} 
```

我需要打印什么而不是“？” 象征？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:50:31.173

真的只是在这里猜测：

```
<?php

$i=23;//13,33,43,9999999993
if(substr($i,-1) == 3){ 
echo "there is 3";
} 
```

编码

```
substr($i,-1) 
```

返回字符串 $i 的最后一个字符

* * *

覆盖 2 或 3 或 4

```
$i=24;
if(in_array(substr($i,-1),array(2,3,4))){ 
echo "ends in 2 or 3 or 4";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:52:01.387

这里的算法解决方案是：

```
if ($i % 10 == 3) { 
```

`%`是[模运算符](http://php.net/manual/en/language.operators.arithmetic.php)。这里例如除以`53`，`10`因此`3`作为比较的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:52:19.527

如果您的问题是判断字符串是否包含字符（例如`53`包含 a `3`），则可以使用[strpos](http://php.net/manual/en/function.strpos.php)或[strstr](http://php.net/manual/en/function.strstr.php)（可能还有其他几个函数也可以这样做）：

```
$i = "53";
if(strpos($i, "3") !== FALSE) {
    echo "There is a 3 in $i";
} 
```

# javascript - 显示/隐藏列表项单独工作，但不在站点代码中

> ID：13115222
> 
> 赞同：0
> 
> 时间：2012-10-29T02:34:31.717
> 
> 标签：javascript, hide, show

我有一个消息列表（一个带有几个 li 的 ul），我想将其显示/隐藏为淡入/淡出选取框。

很简单：

```
 function InOut(elem) {
        elem.delay(100).fadeIn(1200).delay(10000).fadeOut(1200,

        function() {
            if (elem.next().length > 0) {
                InOut(elem.next());
            }
            else {
                InOut(elem.siblings(':first'));
            }

        });
    }

    $(function() {
        $('#myul li').hide();
        InOut($('#myul li:first'));

    }); 
```

这可以按照我想要的方式单独工作（我在 JSFiddle 中对其进行了调整，并且涉及 CSS 等）。

但是，当我将代码放入我的实时站点时，它失败了。我将代码放在结束 HEAD 标记之前，以防出现“订单”问题。

我的怀疑是 $(function()... 没有生效。

该实现是一个 IP Board 站点，代码放置在该站点的模板文件之一中。这些模板文件加载了 PHP 调用、自定义 CSS 等。因此，调试有点像噩梦。

我没有看到任何异常被抛出。

由于在这种情况下我对 javascript 不够熟悉，所以我不确定这里需要做什么。而且我意识到如果无法共享页面代码，这可能会很困难（再说一遍，可能真的很简单）。

任何帮助表示赞赏。

谢谢！

/s/ Jon C. Munson II

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:04:03.323

好的，我通过这些更改使这个工作（有些可能是不必要的）：

```
 (function($){    
                 var InOut = function (elem) {
                      elem.delay(100).fadeIn(1200).delay(10000).fadeOut(1200,
                           function() {
                                if (elem.next().length > 0) {
                                     InOut(elem.next());
                                }
                                else {
                                     InOut(elem.siblings(':first'));
                                }
                           });
                  }
                  $(function(){
                       $('#ayeups li').hide();
                       InOut($('#ayeups li:first'));
                  });
             })(jQuery); 
```

感谢大家的关注等。感谢@ianpgall 提供的帮助。:D

# ruby-on-rails - Heroku 上的“PG::Error - 数值字段溢出”

> ID：13115229
> 
> 赞同：4
> 
> 时间：2012-10-29T02:36:03.023
> 
> 标签：ruby-on-rails, postgresql, heroku

我已经构建了一个应用程序，可以查询 Google Analytics 过去 7 天的数据。一切都在本地工作。在 Heroku 上，该过程运行顺利，直到它尝试获取今天日期的数据。然后我收到以下错误：

```
2012-10-29T02:32:02+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:   numeric field overflow
2012-10-29T02:32:02+00:00 app[web.1]: DETAIL:  A field with precision 8, scale 2 must round to an absolute value less than 10^6. 
```

我试图弄清楚它对哪个变量不满意，但我现在不知道。我假设它与日期或时间有关。

任何想法或想法都会很棒:)

- 更新 - -

```
ActiveRecord::Schema.define(:version => 20121014153338) do
  create_table "analytics", :force => true do |t|
    t.string   "site"
    t.integer  "visits"
    t.date     "start_date"
    t.date     "end_date"
    t.decimal  "revenue_per_transaction", :precision => 8, :scale => 2
    t.integer  "transactions"
    t.decimal  "item_quantity",           :precision => 8, :scale => 2
    t.integer  "goal_starts"
    t.integer  "goal_completes"
    t.decimal  "goal_conversion",         :precision => 8, :scale => 2
    t.datetime "created_at",                                            :null => false
    t.datetime "updated_at",                                            :null => false
    t.decimal  "goal_abandon",            :precision => 8, :scale => 2
    t.decimal  "revenue",                 :precision => 8, :scale => 2
    t.string   "source"
  end

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:42:34.347

您有一个`numeric`带有 typmod 的字段，`numeric(8,2)`并且您试图存储一个大于其中的值`999999.99`。有关数值刻度和精度的信息，请参阅[PostgreSQL 手册`NUMERIC`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-NUMERIC-DECIMAL)，它们是括号中类型之后显示的限定符。

[这个较早的问题](https://stackoverflow.com/q/10609855/398670)似乎涵盖了 Rails 的相同问题，显示了 Rails 模型以及如何分配比例和精度。

`NUMERIC`不是日期/时间字段，而是数字字段。

问题演示：

```
regress=> SELECT  NUMERIC(8,2) '999999.99';
  numeric  
-----------
 999999.99
(1 row)

regress=> SELECT  NUMERIC(8,2) '1000000.00';
ERROR:  numeric field overflow
DETAIL:  A field with precision 8, scale 2 must round to an absolute value less than 10^6. 
```

可惜Pg是字段的时候没有告诉你这是什么字段。但是，它很难这样做，因为它在解析字符串文字时通常不知道哪个值将进入哪个字段。`log_statement = 'all'`在`postgresql.conf`、`ALTER USER ... SET`、`ALTER DATABASE ... SET`或 per-session 中启用，`SET log_statement = 'all'`然后重新测试并检查查询日志。

`\dt`另请查看带有in的表定义，`psql`以查看可能具有该类型`numeric(8,2)`并可能导致问题的表定义。

至于为什么在本地工作：本地数据库是 PostgreSQL 吗？一些 Rails 用户似乎有一个非常奇怪的设置，他们在本地使用 SQLite，在 Heroku 上使用 PostgreSQL。这是混乱和部署问题的秘诀。在开发和测试中使用相同的数据库。如果*是*本地的PostgreSQL，是不是同一个版本？

# plsql - AutoHotkey 在 PLSQL Developer 中不起作用

> ID：13115230
> 
> 赞同：1
> 
> 时间：2012-10-29T02:36:03.753
> 
> 标签：plsql, autohotkey

win7下不能使用PLSQL Developer 7.0中的宏功能，所以想用AutoHotkey来解决这个问题。不幸的是它也不能正常工作，是 AutoHotkey 还是 PLSQL Developer 的问题？我可以通过配置 AutoHotkey 来解决问题吗？

我知道PLSQL Developer 9.0 修复了win7 中的宏功能，但我只有PLSQL Developer 7.0 的许可证。

有什么帮助吗？非常感谢。

# php - 在另一台服务器上完美运行的结构中的 php 错误

> ID：13115233
> 
> 赞同：-3
> 
> 时间：2012-10-29T02:36:29.413
> 
> 标签：php, mysql, migrate

我正在将 php 结构迁移到新服务器上，

[http://www.texility.com/](http://www.texility.com/)上的原始测试台运行良好，我制作了相同的 mySQL 结构，并在[http://www.sequility.com/的新服务器上使用相同的 php](http://www.sequility.com/)

但是正如你所看到的，PHP 中突然出现了错误。

具体来说：

> 注意：未定义变量：第 58 行 /home/sequilit/public_html/index.php 中的设置警告：第 58 行 /home/sequilit/public_html/index.php 中的 foreach() 提供的参数无效
> 
> 警告：无法修改标头信息 - 第 100 行 /home/sequilit/public_html/index.php 中的标头（输出开始于 /home/sequilit/public_html/index.php:58）
> 
> 错误：无法加载模板/home/sequilit/public_html/app/view/index.php！

我试图修复这些数组，但我对代码的理解很差，因为我没有编写它，而且对 PHP 的理解也很差，但我正在努力学习。如果我更改数组变量名称，页面会显示，但没有任何效果，因为我想其他代码需要那些原始变量名称。

我已经仔细检查过，即使没有文件，测试台上的 php 也是相同的`/home/sequilit/public_html/app/view/index.php`，有人能帮我指出正确的方向来解决这个问题吗？对于我在这个主题上的天真而导致的任何缺乏解释，我深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:49:37.560

您观察到的环境差异是由于配置差异造成的。特别是在错误报告和输出缓冲方面。

您可以关闭[错误报告](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)并打开[输出缓冲](http://www.php.net/manual/en/outcontrol.configuration.php#ini.output-buffering)（4096 应该可以解决问题），但真正的问题是糟糕的代码。另请注意，第一个问题（报告错误）肯定会导致第二个问题（标头已发送）。

我会聘请开发人员或与原作者讨论解决问题。

## 更新

需要指出的是，第 58 行的代码`index.php`试图`$settings`在`foreach`循环中使用变量，但`$settings`此时尚未定义。你可以解决这个问题，但我的猜测是这只会产生更多`E_NOTICE`级别的错误。

# java - 如何在 C++ 中实现方法返回类似 Java 中的对象

> ID：13115234
> 
> 赞同：0
> 
> 时间：2012-10-29T02:36:32.243
> 
> 标签：java, c++

我正在从 Java 背景学习 C++，这是我刚刚遇到的一个问题：

假设我有一个名为 A 的类。我使用了一个名为 AWrapper 的包装器。我希望 A 有一个指向其包装器的链接，而不仅仅是 AWrapper，而是任何包装器。所以在Java中，我可以如下实现：

```
public class A {
    Object tag;
    Object getTag() {
        return tag;
    }

    void setTag(Object tag) {
        this.tag = tag;
    }
} 
```

及其包装：

```
public class AWrapper {
    A a;
    public AWrapper(A a) {
        this.a = a;
        a.setTag(this);
    }
} 
```

但在 C++ 中，一切都不是那么简单。首先，C++ 在 Java 中没有任何对象作为对象。其次，如果我在 getTag() 中不使用 Object 而使用 AWrapper 作为返回，我将遇到循环依赖问题。谁能告诉我如何解决这个问题？

如果我的问题很愚蠢，我真的很抱歉，我的 C++ 技能仍然很差，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:58:49.060

我认为你所需要的只是一个 void 指针 - 这可以编译，但我还没有玩过它：

```
class A
{
public:
    void *tag;
    virtual void *getTag()
    {
        return tag;
    }

    virtual void setTag(void *tag)
    {
        this->tag = tag;
    }
};

class AWrapper
{
public:
    A *a;
    AWrapper(A *a)
    {
        this->a = a;
        a->setTag(this);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:47:15.670

我不知道你的用例是什么，所以我不知道这是否能解决你的问题（如果你真的有一个）：

```
template<typename TagT>
class A
{
    TagT* ptag_;
public:
    A() :ptag_() {}

    TagT& getTag() { return *ptag_; }

    void setTag(TagT& tag) { ptag_ = &tag; }
};

class AWrapper
{
    A<AWrapper> a_;
public:
    AWrapper(A<AWrapper> a) {
        a_ = a;
        a_.setTag(this);
    }
}; 
```

但在这种情况下，A 类实际上并不是一个类。它是一个类模板。每种类型的 A 将只能存储一种类型的标签。所以，`A<X>`只能有 type 的标签`X`，`A<Z>`也只能有 type 的标签`Z`。我不知道这个限制是否符合您的要求，因为您的要求对我来说完全不清楚。

# excel - 将 VBA 表单中的复选框、单选和下拉值插入 Excel 电子表格

> ID：13115238
> 
> 赞同：0
> 
> 时间：2012-10-29T02:37:00.633
> 
> 标签：excel, vba

关于将 VBA 表单中的复选框、单选和下拉值插入 Excel 电子表格，我有一些多方面的问题。我目前正在尝试在我的代码中适应几个案例场景。

我要插入的第一组项目是具有以下名称/值的**复选框：**

```
Name         Value
==========   =====
chk_week1    1
chk_week2    2
chk_week3    3
chk_week4    4
chk_week5    5
chk_week6    6
chk_week7    7
chk_week8    8
chk_week9    9
chk_week10   10
chk_week11   11
chk_week12   12
chk_week13   13
chk_week14   14
chk_week15   15 
```

如果用户选择了几个复选框，那么它应该被插入到表单中`1,2,4,5`——例如，如果用户选择了`chk_week1, chk_week2, chk_week4 and chk_week5`.

* * *

我要插入的第二组项目是从无线电组中选择的一个，在框架内具有以下名称/值`fr_Priority`：

```
Name         Value
==========   =====
priority_y   Yes
priority_n   No 
```

因此，如果用户选择`priority_y`然后`Yes`插入到 Excel 电子表格中。

* * *

我要插入的第三组项目来自三个下拉菜单。这相当简单，但用户需要在所有三个下拉菜单中进行选择。如果他们对偏好不感兴趣，那么他们会选择`'No Preference'`。如果用户做出此决定，则不应将任何内容插入单元格。存在以下名称/值：

```
Name         
==========   
cbo_fac1   
cbo_fac2
cbo_fac3 
```

例如，如果用户`111,222,No Preference`在**cbo_fac1**、**cbo_fac2**、**cbo_fac3**中进行选择，则只会`111,222`被插入。如果`111,No Preference,No Preference`被选中，那么只会`111`被插入。

* * *

这是我现在使用的代码：

```
Private Sub btnSubmit_Click()

Dim ws As Worksheet
Dim rng1 As Range
Set ws = Worksheets("main")

' Copy the data to the database
' Get last empty cell in column A
Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

deptCodeSplit = Split(cbo_deptCode.Value, " ")

rng1.Offset(1, 0) = deptCodeSplit(0)
rng1.Offset(1, 1) = cbo_moduleCode.Value
rng1.Offset(1, 2) = cbo_moduleName.Value
rng1.Offset(1, 3) = txt_studentNo.Value
rng1.Offset(1, 4) = cbo_day.Value
rng1.Offset(1, 5) = cbo_period.Value
' rng1.Offset(1, 6) = weeks
rng1.Offset(1, 7) = cbo_weeks.Value
rng1.Offset(1, 8) = cbo_semester.Value
rng1.Offset(1, 9) = cbo_rounds.Value
rng1.Offset(1, 10) = cbo_priority.Value
' rng1.Offset(1, 11) = lectureStyle
rng1.Offset(1, 12) = txt_noRooms.Value
rng1.Offset(1, 13) = cbo_park.Value
' rng1.Offset(1, 14) = fac
' rng1.Offset(1, 15) = pref
rng1.Offset(1, 16) = txt_specialReq.Value

End Sub 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:15:24.967

对您遇到的问题进行一些澄清将有助于我为您提供更好的答案。听起来您正在尝试填充大小未知的范围，因为用户可以在第一组中选择最多 15 个项目，在第二组中选择 1 个，在第三组中选择最多三个。所以，第一件事我会做一些数组来保存用户选择的项目，比如..

```
 Dim group1 as arraylist
      Dim group2 as arraylist
      Dim group3 as arraylist

      ' Go through checkboxes and add values if they are checked
      if checkbox1.checked = true then
       group1.add(1)
      end if ' do that for each checkbox or if you have a checklistbox do 

      for each thing in checklistbox1
        if thing.checked=true then
        group1.add(checklistbox1.indexof(thing)-1)
        end if
        next 
```

对第 2 组和第 3 组执行相同类型的程序

```
 if not dropdown1.selecteditem = "no preference" then
          group3.add(...)
         end if ' so an and so forth 
```

现在，您可以将 group1、group2 和 group3 添加到工作表中，例如

```
 Dim StartingRange as range = ws.Cells(Rows.Count, "a").End(xlUp)
         Dim total_items as integer = (group1.items.count + group2.items.count + group3.items.count) 
```

我不知道您要以哪种方式添加项目，在行中还是在列中，但您可以通过...调整起始范围的大小

```
 startrange.resize(totalitems, 1) ' resizes range to 1 column and total items in rows 
```

然后

```
 Dim cell as variant

          for each cell in startrange
            cell.value = group1.item(0)
            group1.removeat(0)   ' this effectively moves the item at index 1, to index 0
             next 
```

为其他团体做

如果那没有帮助，请告诉我。我的 VBA 有点生疏了，所以我可能遗漏了代码中的一些东西，比如“设置”范围等，所以我对此深表歉意。

# javascript - 如何使用事件处理程序从 dom 树中删除元素

> ID：13115239
> 
> 赞同：0
> 
> 时间：2012-10-29T02:37:23.743
> 
> 标签：javascript, javascript-events

这是我要删除的元素：

```
<div id="tobeRemoved">
    <div class="eventAttached"></div>
    <div>
        <div class="eventAttached"></div>
    </div>
</div> 
```

它的孩子可能有附加的事件。

现在我想从 dom 树中删除它，我知道我可以使用它：

```
var ele=document.getElementById("tobeRemoved");
ele.parentNode.removeChild(ele); 
```

但是事件呢？它们是否同时自动清除？

顺便说一句，我更喜欢跨浏览器的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:45:55.107

如果你知道事件类型，你可以试试这个：

```
function removeEventHandler(elem,eventType,handler) {
 if (elem.removeEventListener) 
    elem.removeEventListener (eventType,handler,false);
 if (elem.detachEvent)
    elem.detachEvent ('on'+eventType,handler); 
} 
```

或 jQuery 的[.unbind()](http://api.jquery.com/unbind/)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T02:45:30.867

如果事件是用 jQuery 添加的，它会在元素被移除时移除事件。

# r - 在 R 中用标准误差绘制黄土会导致整数溢出

> ID：13115241
> 
> 赞同：1
> 
> 时间：2012-10-29T02:37:37.030
> 
> 标签：r, double, stack-overflow, loess

我正在尝试与 R 中`predict`的`loess`对象一起使用。有 112406 个观察值。里面有一个特定的行，`stats:::predLoess`它试图乘以`N*M1`where `N=M1=112406`。这会导致整数过低，并且函数会爆炸。执行此操作的代码行如下（从`predLoess`源代码复制）：

```
L <- .C(R_loess_ise, as.double(y), as.double(x), as.double(x.evaluate[inside, 
]), as.double(weights), as.double(span), as.integer(degree), 
as.integer(nonparametric), as.integer(order.drop.sqr), as.integer(sum.drop.sqr), 
as.double(span * cell), as.integer(D), as.integer(N), as.integer(M1), 
double(M1), L = double(N * M1))$L 
```

有没有人解决了这个问题或找到了解决这个问题的方法？我正在使用 R 2.13。这个论坛的名字很适合这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:17:05.617

听起来您正在尝试对所有 N=112406 观察结果进行预测。首先，你真的需要这样做吗？例如，如果您想要图形输出，在数据范围内的小网格上获得预测会更快。

如果您确实需要 112406 个预测，您可以将数据拆分为子集（例如每个子集的大小为 1000）并独立获取每个子集的预测。这避免了在内部形成一个巨大的矩阵`predLoess`。

# php - 使用 sha1 和 salt 存储密码

> ID：13115242
> 
> 赞同：3
> 
> 时间：2012-10-29T02:38:00.870
> 
> 标签：php, hash, mysqli, sha1, salt

我有一个用 php 完成的简单注册脚本，我只是好奇我这样做的方式是否足够安全以存储用户密码。我正在生成一个 32 位随机盐并将其附加到一个 sha1 散列密码。

```
//create new validator object
    $validator = new data_validation();
    //validate user input
    $firstName = $validator->validate_fname($firstName); //is the first name a string?
    $lastName = $validator->validate_lname($lastName); // is the last name a string?
    $username = $validator->validate_username($username); // is the username a string?
    $email = $validator->validate_email($email); //is the email in valid format?

    //make sure there isn't duplicate emails
    $valQuery = $link->query("SELECT email FROM users WHERE email = '" .$email. "'");

    if ($valQuery->num_rows == 1) {
        echo "An email is already registered with that address";
        return false;
    }

    // generate a random salt for converting passwords into sha1
    $salt = $link->real_escape_string(bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM)));
    $saltedPW =  $password . $salt;
    $hashedPW = sha1($saltedPW);

    mysqli_connect($db_host, $db_user, $db_pass) OR DIE (mysqli_error());
    // select the db
    mysqli_select_db ($link, $db_name) OR DIE ("Unable to select db".mysqli_error($db_name));

     // our sql query
    $sql = "INSERT INTO users (first_name, last_name, username, email, password, salt) VALUES ('$firstName', '$lastName', '$username', '$email', '$hashedPW', '$salt');";

    //save the updated information to the database          
    $result = mysqli_query($link, $sql) or die("Error in Query: " . mysqli_error($link));

    if (!mysqli_error($link)) 
    {
        $row = mysqli_fetch_assoc($result);
        $_SESSION['user_id'] = $row['user_id'];
        $_SESSION['loggedin'] = TRUE;
        header("Location: ../home");
    } 
```

此外，我正在使用程序和 oop php 的组合。其中大部分是在程序中完成的，但也有一些 oop 类，例如您在上面的脚本中看到的验证类。这会导致使用这两种样式的任何性能问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T02:42:39.243

不。停止你正在做的事情，阅读[How to secure hash passwords](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)，然后阅读[Secure hash and salt for PHP passwords](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)：

最重要的是：

> *   尽可能使用 scrypt；bcrypt 如果你不能。
> *   如果不能使用 bcrypt 或 scrypt，请使用 PBKDF2。

有关 PBKDF2、bcrypt 和 scrypt 的比较，请参阅[此答案](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage/6415#6415)。

另请参阅经常链接的文章[如何安全地存储密码](http://codahale.com/how-to-safely-store-a-password/)：

> [MD5, SHA1, SHA256, SHA512, SHA-3, etc] 都是通用哈希函数，旨在在尽可能短的时间内计算出海量数据的摘要。这意味着它们非常适合确保数据的完整性，而存储密码则完全是垃圾。

[PHPass](http://www.openwall.com/phpass/)可能是在 PHP 中进行 bcrypt 散列的最简单方法。如果需要，您也可以使用[crypt 函数](http://php.net/manual/en/function.crypt.php)[以艰难的方式完成此](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php/6337021#6337021)操作，但请注意，有很多方法会出错，并且界面相当晦涩（就像您指定盐值的方式一样）。`CRYPT_BLOWFISH`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T02:41:08.620

在过程和 OO 之间切换本身不会影响性能。加载和实例化类的开销可以忽略不计。但是，管理不断增长的非 OO 代码库可能是一项不可忽视的任务——尤其是在全局命名空间中处理所有事情。

在插入中添加一个额外的字段（盐）也不会影响任何事情。使用盐不会通过将 sha1 算法附加到密码的末尾来增加开销。

我对你如何选择生成随机盐有点困惑，但它看起来也不是很系统密集。

# android - 为 Android 设备构建 ADB

> ID：13115246
> 
> 赞同：1
> 
> 时间：2012-10-29T02:39:06.943
> 
> 标签：android, compilation, hardware, adb

我想用另一个来控制一个 android 设备。我有一个带有 USB 主机适配器的三星 Galaxy S III，并且想通过 ADB 控制另一部安卓手机。我查看了这篇 SO 帖子： [build android adb for arm 处理器](https://stackoverflow.com/questions/5904765/build-android-adb-for-arm-processor) ，但这不一定适用于 Android Host。有谁知道如何为 Android 构建 ADB？它已经完成了吗？

此外，针对在仿真设备上运行的 Linux 发行版构建 ADB 是否“更容易”？可以通过仿真应用程序控制设备 USB 端口吗？

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T19:55:27.007

我找到了一个用于此目的的项目： [p2p-adb](https://github.com/kosborn/p2p-adb)。它有一个设备上的 adb 可执行文件，因此可以使用手机“调试”/控制其他手机。

# javascript - Javascript 正则表达式

> ID：13115247
> 
> 赞同：0
> 
> 时间：2012-10-29T02:39:14.010
> 
> 标签：javascript, regex

我需要在 Javascript 中验证用户名，其中只有以下模式可以通过：

1.  ABC-DE-0001
2.  XEG-SS-21626
3.  FK1S-DAD-51345

我的目前正在使用`^[A-Z]{3}[\- ]?[A-Z]{2}[\- ]?[0-9]{4}$`.

是否有任何改进可以在一个字符串中验证所有上述模式？

```
var v = document.getElementById('<%=txtCode.ClientID%>').value;
var patternForID = /^[A-Z]{3}[\- ]?[A-Z]{2}[\- ]?[0-9]{4}$/;
if (patternForID.test(v) == '') {
  sender.innerHTML = "Please enter Valid Remeasurement Code";
  args.IsValid = false;  // field is empty
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:48:38.223

以下正则表达式匹配您的所有三个示例：

```
^([A-Z]{3}|[A-Z0-9]{4})-[A-Z]{2,3}-[0-9]{4,5}$ 
```

很难从这些示例中准确说出您的要求是什么，但这是上面的正则表达式匹配的内容。

`([A-Z]{3}|[A-Z0-9]{4})`- 三个大写字母或大写字母和数字中的 4 个字符的任意组合。

`[A-Z]{2,3}`- 两个或三个大写字母。

`[0-9]{4,5}`- 四位或五位数字。

我认为这`-`是您唯一的合法分隔符，所以我`-`在正则表达式中将其设为文字。如果您的分隔符真的可以是空格或a `-`，请将其改回`[- ]`。此外，`?`在分隔符后添加 a 使其可选，这似乎不适合您的示例。当然，如果分隔符是可选的，您需要将其放回原处。

使用您的示例查看它在[RegexPal中的工作。](http://regexpal.com/?flags=gm&regex=%5E%28%5BA-Z%5D%7B3%7D%7C%5BA-Z0-9%5D%7B4%7D%29-%5BA-Z%5D%7B2,3%7D-%5B0-9%5D%7B4,5%7D%24&input=ABC-DE-0001%0AXEG-SS-21626%0AFK1S-DAD-51345%0A)

# html - 固定宽度溢出容器

> ID：13115250
> 
> 赞同：1
> 
> 时间：2012-10-29T02:40:20.530
> 
> 标签：html, css, fixed

我的网站容器的宽度为 95%。我正在尝试创建一个跨越整个容器宽度的导航。在我添加'位置：固定;'之前它工作正常 到导航，然后它只是忽略容器并溢出容器。

下面是我的 CSS 代码和图片链接。

```
#page {
width: 95%;
max-width: 1440px;
height: auto;
margin-left: auto;
margin-right: auto;
border: solid 1px #000;
}

.nav {
width: 100%;
background-color: fuchsia;
height: 50px;
    position: fixed;
}

.nav ul {
list-style: none;

}

.nav ul li {
float: left;
display: block;
padding: 5px;
background-color: fuchsia;
line-height: 40px;
} 
```

问题图片... [http://i.imgur.com/pZEbe.png](http://i.imgur.com/pZEbe.png)

谢谢你的帮助！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:59:41.740

您正在提供`position:fixed`的内容使您的导航脱离父 div 或元素。

在导航元素中添加如下内容：

```
.nav 
{
  width:95%;      /*dont give width as 100% */
  margin:0 auto;  /* for center alignment purpose */
  background-color: fuchsia;
  height: 50px;      
  position: fixed;
} 
```

# servicestack - 逐步为服务添加缓存支持

> ID：13115254
> 
> 赞同：0
> 
> 时间：2012-10-29T02:40:33.790
> 
> 标签：servicestack

我想在我的服务中使用内存缓存但无法配置它。我已经`global.asax`按照说明注册了。

这是我的服务的外观：

```
public class CustomerSerivce: Service
{
    public CustomerResponse Any(Customer customer)
    {
        //code to connect to db here - this code is called regardless of cache entry
        return customer;
    }
} 
```

我知道那里有`this.RequestContext.ToOptimized`什么东西，但有些东西对我不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:45:43.083

你有没有声明： using ServiceStack.ServiceHost;

对于扩展方法

```
base.RequestContext.ToOptimizedResultUsingCache(...) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:19:00.673

一步一步在[这里](https://github.com/ServiceStack/ServiceStack/wiki/Caching)。您还可以在[此处](https://stackoverflow.com/questions/12283839/modeling-editable-lists-in-dtos-used-by-services/12300042#12300042)查看带有 http 304 Not Modified 处理的缺失链接。

# objective-c - 检查 NSString 是否包含全部或部分字符

> ID：13115264
> 
> 赞同：1
> 
> 时间：2012-10-29T02:42:54.757
> 
> 标签：objective-c, ios, nsstring, comparison, predicate

我有一个名为 NSString 的名称`query`，其中包含约 10 个字符。

我想检查调用的第二个 NSString 是否`word`包含 中的所有字符`query`或某些字符，但不包含 中未指定的其他字符`query`。

此外，如果查询中的字符只出现一次，则单词中的字符只能出现一次。

请你能告诉我怎么做吗？

```
NSString *query = @"ABCDEFJAKSUSHFKLAFIE";
NSString *word  = @"fearing"; //would pass as NO as there is no 'n' in the query var. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T03:02:10.403

以下回答前半部分：

```
NSCharacterSet *nonQueryChars = [[NSCharacterSet characterSetWithCharactersInString:[query lowercaseString]] invertedSet];
NSRange badCharRange = [[word lowercaseString] rangeOfCharacterFromSet:nonQueryChars];
if (badCharRange.location == NSNotFound) {
    // word only has characters in query
} else {
    // found unwanted characters in word
} 
```

我需要考虑需求的后半部分。

好的，下面的代码应该满足这两个要求：

```
- (NSCountedSet *)wordLetters:(NSString *)text {
    NSCountedSet *res = [NSCountedSet set];

    for (NSUInteger i = 0; i < text.length; i++) {
        [res addObject:[text substringWithRange:NSMakeRange(i, 1)]];
    }

    return res;
}

- (void)checkWordAgainstQuery {
    NSString *query = @"ABCDEFJAKSUSHFKLAFIE";
    NSString *word  = @"fearing";

    NSCountedSet *queryLetters = [self wordLetters:[query lowercaseString]];
    NSCountedSet *wordLetters = [self wordLetters:[word lowercaseString]];
    BOOL ok = YES;
    for (NSString *wordLetter in wordLetters) {
        int wordCount = [wordLetters countForObject:wordLetter];
        // queryCount will be 0 if this word letter isn't in query
        int queryCount = [queryLetters countForObject:wordLetter];
        if (wordCount > queryCount) {
           ok = NO;
           break;
        }
    }

    if (ok) {
        // word matches against query
    } else {
        // word has extra letter or too many of a matching letter
    }
} 
```

# opengl - opengl - 使用 2D 纹理绘制多个元素

> ID：13115265
> 
> 赞同：3
> 
> 时间：2012-10-29T02:43:22.800
> 
> 标签：opengl, textures, glut, texture2d

我正在研究带有“过剩功能”显示的 n 体代码。我想用 bmp 图像中的 2D 纹理显示每个身体。目前，我可以使用以下代码绘制单个纹理元素：

```
 glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);// Clear The Screen And The Depth Buffer

        glBindTexture(GL_TEXTURE_2D, texture[0]);    // pick the texture.
        glBegin(GL_QUADS); // begin drawing the textured quad.
        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f, 0.0f);
        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f, 0.0f);
        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, 0.0f);
        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f, 1.0f, 0.0f);
        glEnd(); // done drawing the textured quad. 
```

在我的代码的第一个版本中，我使用以下显示函数绘制每个身体的位置：

```
void drawPoints()
{       
        GLuint vbo;

        glBindBuffer(GL_ARRAY_BUFFER, vbo);
        glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), pos);   
        glEnableClientState(GL_VERTEX_ARRAY);

        if (colorVBO) {
            glBindBuffer(GL_ARRAY_BUFFER, id_colorVBO);
            glColorPointer(4, GL_DOUBLE, 4*sizeof(double), pos);
            glEnableClientState(GL_COLOR_ARRAY);
            glEnable(GL_BLEND);
            glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
        }

        glColor3f(1, 1, 0);
        glDrawArrays(GL_POINTS, 0, numBodies);

        glBindBuffer(GL_ARRAY_BUFFER, 0);
        glDisableClientState(GL_VERTEX_ARRAY);
        glDisableClientState(GL_COLOR_ARRAY);
} 
```

其中`pos`数组包含每个身体的坐标 x、y、z。我正在使用`glDrawArrays`函数同时绘制所有点。

你能告诉我如何绘制所有纹理元素，而不仅仅是一个，即一种使用坐标`pos`数组来指示所有纹理体的位置并绘制它们的方法。

更新 ：

好的，我尝试将 glTexCoordPointer 与以下显示功能一起使用：

```
void drawPoints()
{       
    glPushMatrix();

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);// Clear The Screen And The Depth Buffer
    glBindTexture(GL_TEXTURE_2D, texture[0]);    // pick the texture.
    glLoadIdentity(); // reset the view before we draw each star.
    glTranslatef(0.0f, 0.0f, zoom);    // zoom into the screen. 

    glEnableClientState(GL_VERTEX_ARRAY);
    lEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glVertexPointer(4, GL_DOUBLE, 4*sizeof(double), pos);   
    glTexCoordPointer(4, GL_DOUBLE, 4*sizeof(double), pos);

    // Assign A Color Using Bytes
    glColor4ub(30, 100, 120, 255);
    glBegin(GL_QUADS);  // Begin Drawing The Textured Quad
    glTexCoord2f(0.0f, 0.0f);  glVertex3f(-1.0f,-1.0f, 0.0f);
    glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f,-1.0f, 0.0f);
    glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f, 1.0f, 0.0f);
    glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f, 1.0f, 0.0f);
    glEnd();   // Done Drawing The Textured Quad

    glDrawArrays(GL_QUADS, 0, numBodies);           
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);   
    glDisableClientState(GL_VERTEX_ARRAY);  

    glPopMatrix();  
} 
```

但只显示一个纹理元素。

有人看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:00:25.303

除了[glVertexPointer](http://www.opengl.org/sdk/docs/man2/xhtml/glVertexPointer.xml)之外，您还应该使用[glTexCoordPointer](http://www.opengl.org/sdk/docs/man2/xhtml/glTexCoordPointer.xml)。不要忘记[启用](http://www.opengl.org/sdk/docs/man2/xhtml/glEnableClientState.xml)相应的客户端状态，`GL_TEXTURE_COORD_ARRAY`. 官方 wiki 上也有一个完整的[示例，具有交错的属性。](http://www.opengl.org/wiki/VBO_-_just_examples)

请注意，新的（3.0+）方法是使用[glVertexAttribPointer](http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer.xml)和着色器。wiki 上也有一个非常[描述性的页面。](http://www.opengl.org/wiki/Vertex_Specification)

# java - 如何坚持用户输入是int？

> ID：13115266
> 
> 赞同：1
> 
> 时间：2012-10-29T02:43:26.323
> 
> 标签：java, input, int, java.util.scanner

这里的基本问题..我将首先要求您不要回复任何代码，因为这可能只会让我更加困惑（编程菜鸟）。我正在寻找关于如何解决我遇到的这个问题的明确解释。

我有一个读取用户输入的扫描仪。提示用户输入 1 到 150 之间的 int 值（仅限整数）。我得到的值如下：

```
 Scanner scan = new Scanner(System.in);
    int input = scan.nextInt(); 
```

继续我的程序，一切正常。

不幸的是，代码并不完全是防弹的，因为任何不是整数的输入都可能破坏它（字母、符号等）。

我怎样才能使代码更健壮，它会验证只输入了一个 int？

这些是我希望得到的结果：

假设输入是：

```
23 -> valid
fx -> display an error message, ask the user for input again (a while loop would do..)
7w -> error, again
3.7 -> error
$$ -> error
etc 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T02:45:51.850

[Scanner.hasNextInt()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextInt())`true`如果下一个标记是数字则返回，否则`false`返回。

在本例中，我调用 hasNextInt()。如果它返回`true`，我会过去一段时间并设置输入；如果它返回`false`，那么我丢弃输入 ( `scanner.next();`) 并重复。

```
Scanner scan = new Scanner(System.in);
while(!scan.hasNextInt()) {
    scan.next();
}
int input = scan.nextInt(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T03:03:48.797

这是一个带有提示和注释的简单示例。

```
Scanner scan = new Scanner(System.in);
System.out.print("Enter an integer: "); // Initial prompt for input

// Repeat until next item is an integer
while (!scan.hasNextInt()) 
{        
    scan.next(); // Read and discard offending non-int input
    System.out.print("Please enter an integer: "); // Re-prompt
}

// At this point in the code, the user has entered an integer
int input = scan.nextInt(); // Get the integer

// And now you can use the input variable. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T02:47:00.547

用于`scan.hasNextInt()`确保下一个输入是`int`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-19T18:48:33.633

我写了一个例子，确保程序只有在输入数字而不是无效值时才会继续。别担心，我添加了所需的解释。

该程序要求用户输入一个数字。循环确保在输入有效数字之前不会继续处理。在此之前，我定义了一个默认值为 false 的变量“inputAccepted”。如果他输入一个数字，则变量“inputAccepted”设置为真，程序退出循环。但是如果他输入的不是数字，此时就会抛出异常，并且将变量“inputAccepted”设置为true的行将不会被执行。相反，将打印一条消息，告诉用户他的输入无效。由于“inputAccepted”无法设置为 true，循环将再次执行相同的操作，直到字符串可以转换为数字。

[你可以在这里测试程序。](https://repl.it/@Dexter1997/SaveIntegerInput)

```
import java.util.Scanner;

public class Test {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        boolean inputAccepted = false;
        while (!inputAccepted) {
            try {
                System.out.print("Please enter a number: ");
                Integer.valueOf(input.nextLine());
                inputAccepted = true;
            } catch (NumberFormatException e) {
                System.out.println("Not a valid number.");
            }
        }
        System.out.println("Thank you!");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T02:50:03.680

只需获取“任何内容”并解析它：

```
Scanner scan = new Scanner(System.in);

Integer number = null;
while (number == null) {
    try {
        number = Integer.parseInt(scan.next());
    } catch (NumberParseException e) {
        System.out.println("bad input: " + input);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-06T02:00:24.377

没有任何代码，只有英文，我想说有两件事你必须测试或注意。首先输入是 int，其次 int 在正确的范围内。

就伪代码而言，首先要做的是确保它是一个 int。声明一个名为“input”的 int，我会放置一个 try/catch 块，您可以在其中尝试使用 parseInt() 将用户输入扫描为 int。如果 try 部分失败，您知道它不是 int 并且可以返回错误消息。

那么，既然你知道“input”是一个int，你可以测试它是小于1还是大于150，如果是则返回错误信息！

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-04T08:55:25.470

公共类样本{

```
/**
 * author CLRZ
 */
public static void main(String[] args) {
    int a; // variable
    Scanner in = new Scanner(System.in); // scans your input
    System.out.println("Enter your number's choice:"); 
    int sem1 = in.nextInt(); // reads next integer
    if (sem1 == 1) // conditioned if your choice number is equal to 1
    System.out.println("Hello World1"); // output wil be Hello World
    int b;

    System.out.println("Enter your number's choice:");
    int sem2 = in.nextInt(); 
    if (sem2 == 2)
    System.out.println("Hello World2");
    int c;

    System.out.println("Enter your number's choice:");
    int sem3 = in.nextInt(); 
    if (sem3 == 3)
    System.out.println("Hello World3");
} 
```

}

# asp.net - asp ajax collapsepanelextender 面板调整大小

> ID：13115268
> 
> 赞同：2
> 
> 时间：2012-10-29T02:43:52.113
> 
> 标签：asp.net, resize, panel

我有一个 asp.net 网络表单，其布局如下所示。我试图在这个线程中粘贴图像，但由于我是新用户，我不允许在问题中发布图像。

布局描述如下： 代码创建一个 1 行 5 列的 asp 表。在下面的描述中，列按顺序称为 COl1、Col2、Col3、Col4、Col5。

我有两个折叠面板扩展器，它们执行以下操作： 1\. 折叠面板扩展器 1 分别控制 col1 和 col2 中的 asp 面板。每当按下 col1 时，col2 就会隐藏/显示 2。折叠面板扩展器 2 分别控制 col4 和 col5 中的 asp 面板。每当按下 col5 时， col4 隐藏/显示

下面的代码适用于后端 C# 类中的折叠面板初始化代码。

现在我的问题是，我希望 col3 中的 asp 面板根据 Col2 和 COl4 面板的行为自动调整其当前大小。每当隐藏此面板时，Col3 应最大化以占用 Col2、Col3 和 Col4 的空间。当显示 Col2 和 COl4 时，它应该调整回原来的大小。

我尝试了多种方法，但都没有奏效。

```
 <div id="page_content_middle">
                <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server"></ajaxToolkit:ToolkitScriptManager>
                <asp:Table ID="page_content_middle_table" runat="server">
                    <asp:TableRow>
                        <asp:TableCell BorderStyle="Dashed" BorderWidth="1" Width="1%">
                            <asp:Panel ID="pnlHeader1" runat="server" BorderStyle="Solid">
                                <asp:Image ID="imgToggle1" runat="server" ImageUrl="~/images/collapse.jpg" ImageAlign="Top" />
                            </asp:Panel>
                        </asp:TableCell>
                        <asp:TableCell BorderStyle="Dashed" BorderWidth="1" Width="14%">
                            <asp:Panel ID="pnlInfo1" runat="server" Width="100%" height="100%" BorderStyle="Solid">
                                <asp:Menu ID="Menu1" runat="server" BackColor="#B5C7DE" DynamicHorizontalOffset="2" Font-Names="Verdana" 
                                    Font-Size="0.8em" ForeColor="#284E98" StaticSubMenuIndent="10px">
                                    <DynamicHoverStyle BackColor="#284E98" ForeColor="White" />
                                    <DynamicMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
                                    <DynamicMenuStyle BackColor="#B5C7DE" />
                                    <DynamicSelectedStyle BackColor="#507CD1" />
                                    <Items>
                                        <asp:MenuItem Text="Menu1" Value="Menu1"></asp:MenuItem>
                                        <asp:MenuItem Text="Menu2" Value="Menu2"></asp:MenuItem>
                                        <asp:MenuItem Text="Menu3" Value="Menu3"></asp:MenuItem>
                                        <asp:MenuItem Text="Menu4" Value="Menu4"></asp:MenuItem>
                                    </Items>
                                    <StaticHoverStyle BackColor="#284E98" ForeColor="White" />
                                    <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="2px" />
                                    <StaticSelectedStyle BackColor="#507CD1" />
                                </asp:Menu>
                            </asp:Panel>
                        </asp:TableCell>
                        <asp:TableCell BorderStyle="Dashed" BorderWidth="1" Width="65%">
                            <asp:Panel ID="pageContent" runat="server">
                                Som random text
                            </asp:Panel>
                        </asp:TableCell>
                        <asp:TableCell BorderStyle="Dashed" BorderWidth="1" Width="19%">
                            <asp:Panel ID="pnlInfo2" runat="server" Width="64px" BorderStyle="Solid">
                                Some Random Information
                            </asp:Panel>
                        </asp:TableCell>
                        <asp:TableCell BorderStyle="Dashed" BorderWidth="1" Width="1%">
                            <asp:Panel ID="pnlHeader2" runat="server" Width="15px" BorderStyle="Solid">
                                <asp:Image ID="imgToggle2" runat="server" ImageUrl="~/images/collapse.jpg" ImageAlign="Top" />
                            </asp:Panel>
                        </asp:TableCell>
                    </asp:TableRow>
                </asp:Table>

            </div> 
```

# javascript - Javascript YouTube API - 加载播放器

> ID：13115274
> 
> 赞同：3
> 
> 时间：2012-10-29T02:45:02.527
> 
> 标签：javascript, jquery

我的网站上有一个 YouTube 视频列表，每个列表项如下所示：

```
<div class="video_item" id="<YouTubeVideoID>"> 
    // video thumbnail and information
</div> 
```

如果用户点击这些视频项目之一，一个面板会下拉，一旦面板完成其滑动操作，应该加载 API 并显示视频播放器：

```
$(document).ready(function(e) {
    $('.video_item').live('click', function() {
        var vid_id = $(this).attr('id');
        if (vid_id) {
            $("html").animate({ scrollTop: $('#main').offset().top-20 }, 1000, function() {
                setTimeout(function() {
                    $('.video_drop_panel_wrap').slideDown('slow', function() {

                        var tag = document.createElement('script');
                        tag.src = "http://www.youtube.com/iframe_api";
                        var firstScriptTag = document.getElementsByTagName('script')[0];
                        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                        var player;
                        function onYouTubeIframeAPIReady() {
                          player = new YT.Player('youtube_player', {
                            height: '371',
                            width: '570',
                            videoId: vid_id,
                            events: {
                              'onReady': onPlayerReady
                            }
                          });
                        }

                        function onPlayerReady(event) {
                          event.target.playVideo();
                        }
                    });
                },1000);
            });
        }
    });
}); 
```

问题是，它不会显示播放器，而且我的 JS 开发人员控制台中也没有收到任何错误。我已经在没有所有滑动面板的情况下测试了 API 和播放器，并且确实可以工作——只是不是我想要的。我不确定这是 DOM 问题还是其他问题。如果有人能发现我做错了什么，我会很感激一巴掌……哦，告诉我哪里错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:00:33.803

发生错误是因为您`onYouTubeIframeAPIReady()`在全局范围内不存在，它只存在于`$('.video_drop_panel_wrap').slideDown('slow', function() {...})`. api 的延迟加载相当于`<script>`从作用域的角度将其放置在标签内，因此它会搜索全局函数。

您可以重构您的代码，以便在`onYouTubeIframeAPIReady()`触发时指向有关您希望加载的视频的信息。

大约在加载 api 后，您最终会得到

```
<script> 
       //Youtube api stuff
         (function(){
             //Do Stuff
             onYouTubeIframeAPIReady();
         })();
</script>
<script>
       $(document).ready(function(){'Your Stuff Here'})
</script> 
```

因此，当进行 API 就绪调用时，它不知道它来自的上下文，因为它源自它自己的独立函数。

一个粗略的解决方案可能是将代码从下面的行更改`var player`为

```
onYouTubeIframeAPIReady = function(){
  player = new YT.Player('youtube_player', {
    height: '371',
    width: '570',
    videoId: vid_id,
    events: {
      'onReady': onPlayerReady
    }
  });
} 
```

因为它是在没有使用`var`语句的情况下定义的，所以如果在作用域链中找不到同名变量，则将在全局作用域中创建该变量。`onPlayerReady`不需要相同的处理，因为它在`onYouTubeIframAPIReady`创建时存在（本地范围）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:45:53.990

尝试使用这个插件...... [https://code.google.com/p/jquery-ytiframetracker/](https://code.google.com/p/jquery-ytiframetracker/)

# ruby-on-rails - 生产中缺少帮助文件 helpers/addressable/uri.rb

> ID：13115275
> 
> 赞同：0
> 
> 时间：2012-10-29T02:45:06.383
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我正在尝试使用 Rails 3.1.8 设置 Debian 挤压服务器。该应用程序在开发中启动得非常好，但在生产模式下，我在下面得到了这个堆栈跟踪。我的 ruby​​ 构建有什么问题吗？有什么推荐的挤压标志吗？

> > 将 PID 写入 /home/railsapps/localhost_production/shared/tmp/thin.2.pid 使用机架适配器 退出！/home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:306:independ_on `rescue in depend_on': Missing helper file helpers/addressable/uri.rb (LoadError) from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:301:in`' 来自 /home/railsapps/localhost_production/shared/bundle/ ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:214:in `require_dependency' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:135:in`block in modules_for_helpers' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack -3.1.8/lib/abstract_controller/helpers.rb:131:in `map!' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:131:in`modules_for_helpers' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/action_controller/metal/ helpers.rb:89:in`modules_for_helpers' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:95:in`来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:159:in`default_helper_module!' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:22:in`块中的 helper' 继承自 /home/railsapps/localhost_production /shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:22:in`class_eval' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/abstract_controller/helpers.rb:22:in`继承自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/ gems/actionpack-3.1.8/lib/action_controller/metal/hide_actions.rb:32:in`inherited' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/action_controller/metal/params_wrapper.rb:130:in`继承自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib /abstract_controller/railties/routes_helpers.rb:7:in `block (2 levels) in with' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/actionpack-3.1.8/lib/action_controller/railties/paths.rb:7:in`block (2 levels) in with' from /home/railsapps/localhost_production/releases/20121028215215/app/controllers/application_controller.rb:1:in`<top (required)>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in`需要'来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `block in require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:225:in`load_dependency' 来自 /home/railsapps/localhost_production/shared /bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:348:in`require_or_load' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/ activesupport-3.1.8/lib/active_support/dependencies.rb:489:in `load_missing_constant' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:181:in`block in const_missing' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support /dependencies.rb:179:in `each' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:179:in`const_missing' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:212：在`const_missing_from_s3_library' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/inherited_resources-1.3.1/app/controllers/inherited_resources/base.rb:11:in`'来自/home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/inherited_resources-1.3.1/app/controllers/inherited_resources/base.rb:1:in`<top (required)>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in`来自/home/railsapps/localhost_production/ shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `block in require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:225:in`load_dependency' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems /activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:348:in`require_or_load' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/ dependencies.rb:489:in `load_missing_constant' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:181:in`block in const_missing' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:179:在`each' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:179:in`const_missing' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:212:in `const_missing_from_s3_library' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-7d09a0ac8252/lib/active_admin/base_controller/menu.rb:2:in`' 来自 /home/railsapps/ localhost_production/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-7d09a0ac8252/lib/active_admin/base_controller/menu.rb:1:in `<top (required)>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in`require'来自/home/railsapps/localhost_production/shared/bundle/ruby/1.9 .1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:240:in `block in require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:225:in`load_dependency' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/ lib/active_support/dependencies.rb:240:in `require' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-7d09a0ac8252/lib/active_admin/base_controller.rb:2:in`'来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-7d09a0ac8252/lib/active_admin/application.rb:222:in`before_filter' from /home/railsapps/localhost_production/releases/20121028215215/config/initializers/active_admin.rb:91:in`从 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/bundler/gems/active_admin-7d09a0ac8252/lib/active_admin.rb:71:in 阻止`setup' from /home/railsapps/localhost_production/releases/20121028215215/config/initializers/active_admin.rb:1:in`/home/railsapps/localhost_production/shared/bundle /ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:234:in `load' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:234:in`block in load' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/ activesupport-3.1.8/lib/active_support/dependencies.rb:225:in `load_dependency' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/activesupport-3.1.8/lib/active_support/dependencies.rb:234:in`load' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/engine .rb:556:in `block (2 levels) in <class:Engine>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/engine.rb:555:in`each' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/engine.rb:555:in`block in <class:Engine>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/initializable.rb:30:in`instance_exec' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/initializable.rb:30:in`run' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/initializable.rb:55:in`块中 run_initializers' 来自 /home/railsapps/localhost_production /shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/initializable.rb:54:in `each' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/initializable.rb:54:in`run_initializers' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/ gems/railties-3.1.8/lib/rails/application.rb:96:in `initialize!' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/railties-3.1.8/lib/rails/railtie/configurable.rb:30:in`method_missing' from /home/railsapps/localhost_production/current/config/environment.rb:5:in `<top (required)>' from /home/railsapps/localhost_production/current/config.ru:3:in`require' from /home/railsapps/localhost_production/ current/config.ru:3:in `block in <main>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in`instance_eval' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in`initialize' from /home/railsapps/localhost_production/current/config.ru:1:in`新的'来自 /home/railsapps/localhost_production/current/config.ru:1:in `<main>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in`eval' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack /adapter/loader.rb:33:in `load' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:42:in`for' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:169：从`load_adapter' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:73:in`/home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in start' 开始`run_command' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in`！来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>' from /home/railsapps/localhost_production/shared/bundle/ruby/1.9.1/bin/thin:19:in`load' 来自 /home/railsapps/localhost_production/shared/bundle/ruby/1.9 .1/bin/thin:19:in `'

# iphone - 无法导航到 UITableView 中的详细视图

> ID：13115290
> 
> 赞同：0
> 
> 时间：2012-10-29T02:46:10.863
> 
> 标签：iphone, ios, uitableview, ios6

我正在尝试导航到 UITableView 中的详细视图，并且在执行它时似乎遇到了一些问题。

我的代码：

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    NSArray *tableItems;
    NSArray *images;

}

@property (nonatomic,retain) NSArray *tableItems;
@property (nonatomic,retain) NSArray *images;

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tableItems,images;
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableItems = [[NSArray alloc] initWithObjects:@"Item1",@"Item2",@"Item3",nil];
    images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"clock.png"],[UIImage imageNamed:@"eye.png"],[UIImage imageNamed:@"target.png"],nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    { 
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        UIView *v = [[UIView alloc] init];
        v.backgroundColor = [UIColor redColor];
        cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Set the image in the row
    cell.imageView.image = [images objectAtIndex:indexPath.row];

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.backgroundColor = [ UIColor greenColor];
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SecondViewController *detailViewController = [[SecondViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

    [detailViewController printRowNumber:indexPath.row+1];

    //NSArray *dataItem = [self.tableItems objectAtIndex:[indexPath row]];

    //detailViewController.dataSource = dataItem;

    [self.navigationController pushViewController:detailViewController animated:YES];
    //[self presentViewController:detailViewController animated:YES completion:NULL];
}
@end 
```

SecondViewController.h

```
#import <UIKit/UIKit.h>

@interface SecondViewController : UIViewController{
    IBOutlet UILabel *lbl;
}

-(void) printRowNumber:(int)num;

@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) printRowNumber:(int)num{
    lbl.text = @"Hello";
    NSLog(@"%d",num);
}
@end 
```

我能够在输出中打印出 indexPath.row 的值，但无法显示 SecondViewController 的详细视图。不确定是什么问题。需要一些指导...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:31:04.417

看看这个：

[嵌入导航控制器](https://stackoverflow.com/questions/11341337/embed-navigation-controller)

如果你想使用方法，你需要嵌入你`mainViewController`的。`NavigationController``pushViewController:`

如果你不想使用`NavigationController`那么你可以使用`presentViewController:`方法加载`detailViewController`和`dismissViewController:`方法返回`mainViewController`

# jquery - XML解析问题jquery

> ID：13115292
> 
> 赞同：0
> 
> 时间：2012-10-29T02:46:51.330
> 
> 标签：jquery, xml

这是我的问题我有这个 jquery xml 解析问题。有趣的是，一切正常都接受 id 不断出现未定义。我的问题是导致 ID 未定义的原因是什么？哪个不好！所以这是我的脚本。

```
$(document).ready(function() {
         $.get('http://www.mytasteofitaly.com/menu/menu-1a.xml', function(data){
                     $(data).find('main').each(function(){
                    var $main = $(this);
                    var id = $main.attr('id');

            var html = '<div class="mainmen" id="main_' + id + '">';
            $('#menuitem').append($(html));
    });
        $(data).find('menu').each(function(){
        var $menu = $(this);
        var head = $menu.find('menuhead').text();

        var html = '<table class="menus"><th><h1>' + head + '</h1></th>';

        $('.mainmen').append($(html));
    });
        $(data).find('menuitem').each(function(){

            var $menuitem = $(this);
            var name = $menuitem.find('menuname').text();
            var desc = $menuitem.find('menudesc').text();
            var price = $menuitem.find('price').text();
            var desprice = $menuitem.find('price2des').text();
            var price2 = $menuitem.find('price2').text();

            var html = '<tr class="menu_item">';
            html += '<td class="h-menu">' + name + '</td>';
            html += '<td class="d-menu">' + desc + '</td>';
            html += '<td class="price">' + price + '</td>';
            html += '<td class="desprice">' + desprice + '</td>';
            html += '<td class="price2">' + price2 + '</td>' + '</tr>';

            $('.menus').append($(html));   
    });
});
}); 
```

这是我的 XML

```
<main>
    <menu id="appet">
        <menuhead>
        Appetizers
        </menuhead>
        <menuitem>
            <menuname>
            Cheese Stick
            </menuname>
              <menudesc>
             (6 Sticks)
            </menudesc>
            <price>
            $7
            </price>
            <price2des>
            </price2des>
            <price2>
            </price2>
        </menuitem>
        <menuitem>
        <menuname>
        Fried Mushrooms
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $7
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>
    <menuitem>
        <menuname>
        Fried Calamari
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $9
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>
    <menuitem>
        <menuname>
        Bruchetta
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $10
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>
    <menuitem>
        <menuname>
        Shrimp Bruchetta
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $10
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>
    <menuitem>
        <menuname>
        Garlic Bread
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $3
        </price>
        <price2des>
        With Cheese
        </price2des>
        <price2>
        $4
        </price2>
    </menuitem>

    <menuitem>
        <menuname>
        Soups
        </menuname>
        <menudesc>
        (Minestrone or Pasta Fagioli) Cup
        </menudesc>
        <price>
        $4
        </price>
        <price2des>
        Bowl
        </price2des>
        <price2>
        $6
        </price2>
    </menuitem>

    <menuitem>
        <menuname>
        Zupa de Mussels
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $7
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>

    <menuitem>
        <menuname>
        Side Meatballs or Sausage or Alfredo Sauce
        </menuname>
        <menudesc>
        </menudesc>
        <price>
        $4
        </price>
        <price2des>
        </price2des>
        <price2>
        </price2>
    </menuitem>
</menu>
 </main> 
```

这是我的 HTML

```
<div id="Menuitem">
</div> 
```

这是我设置的 jsfiddle [http://jsfiddle.net/cornelas/MEgdw/](http://jsfiddle.net/cornelas/MEgdw/)

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:59:01.073

`main`标签没有 ID....`menu`标签有

**编辑：xml解析循环的问题**

`menuitems`嵌套在`menu`嵌套在`main`

这意味着在`each`祖先中，您需要调用每个孩子。嵌套数据意味着嵌套循环

```
$(data).find('main').each(function() {

    var $main = $(this);

    $main.find('menu').each(function() {

        var $menu = $(this);

        $menu.find('menuitem').each(function() {

        });
    });
})​;​ 
```

# jquery - jquery父子点击事件处理

> ID：13115295
> 
> 赞同：-1
> 
> 时间：2012-10-29T02:47:03.417
> 
> 标签：jquery, click, parent, stoppropagation

我有一个表行，其中包含我动态添加的 2 列（如下）。

```
var lientry='<tr id=\"'+kmlFeatureData.type+kmlFeatureData.id+'\">
<td>blah blah</td>
<td><a class="msg_head">'+'click for more</a></td></tr>'; 
```

我有一个用于第一列 id=... 的单击处理程序，它工作正常，我想为第二列 class="msg_head" 提供第二个单击处理程序，但是当我尝试捕获它时，它只调用父处理程序。

我尝试了一些建议，例如停止传播，但没有成功。

```
$(".msg_head a").click(function(e) {
    e.stopPropagation();
    alert('jquery msg_head click');
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:55:09.757

你的选择器是错误的。改用`a.msg_head`：

```
$("a.msg_head").click(function(e) {
    alert('jquery msg_head click');
}); 
```

或者只是摆脱标签选择器，并使用`$(".msg_head")`.

# java - 处理重复 INSERT 语句的最佳实践

> ID：13115296
> 
> 赞同：0
> 
> 时间：2012-10-29T02:47:17.520
> 
> 标签：java, sql, database, sql-server-2008, exception

我目前正在使用 Java 尝试在我的数据库中插入客户：

```
public void saveCustomer(Customer c)  {
    getConnection();

 try {

     CallableStatement pstmt =  con.prepareCall("{call sp_saveCustomer(?,?)}");
     pstmt.setString(1, c.getName());
     pstmt.setString(2, a.getLastName());
     pstmt.executeUpdate();

     closeConnection();
    } catch (SQLException e) {
       // Handle Exception
    }
} 
```

当用户尝试插入重复记录时，将触发 catch 块。我担心的是我不知道这是否意味着性能下降。检查客户是否已经存在不是更好的方法吗？就像是：

```
public void saveCustomer(Customer c) {
    getConnection();

 boolean exists = false; 

     CallableStatement pstmt =  con.prepareCall("{call sp_checkCustomerExistence(?,?)}");
     pstmt.setString(1, c.getName());
     pstmt.setString(2, a.getLastName());
     ResultSet rs = pstmt.executeQuery();
     if (rs.next()) exists = true;
     if ( exists ){
     closeConnection(); 
     return;
     } 

     CallableStatement pstmt =  con.prepareCall("{call sp_saveCustomer(?,?)}");
     pstmt.setString(1, c.getName());
     pstmt.setString(2, a.getLastName());
     pstmt.executeUpdate();

     closeConnection();

} 
```

基于最佳性能的最佳解决方案是什么？如果客户存在，我应该检查自己还是应该抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:54:30.700

事先检查 = 两次数据库调用或两次 IO 交互。尝试仅插入可能发生异常的异常只是其中之一。只要处理了异常，它们不一定是坏事。

虽然可能不是首选，但这将是您列出的两种方法中最快的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T02:55:09.070

**我认为检查重复项比捕获异常更可取。**唯一的建议是，如果您可以创建一个程序`sp_check_and_save_customer`来检查重复项并在不存在时保存，那么我有它自己在您的程序中执行检查。这样，检查和插入之间的时间差就会非常小，这在重负载应用程序中变得更加重要。

**尽管如此，请进行异常处理，并且**仍然有可能另一个进程在检查和插入之间插入数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T02:59:51.197

```
} catch (SQLException e) { 
```

你正在捕捉的`SQLException`那个可能意味着任何东西。这并不一定意味着它是由于数据库表中的重复行而发生的。因此，只是它不够可靠，无法用于该用例。

您只需要在尝试创建之前拨打电话，以适当的方式处理它。

# java - 将多个对象相互传递

> ID：13115297
> 
> 赞同：2
> 
> 时间：2012-10-29T02:47:19.790
> 
> 标签：java, oop, pass-by-value

这是一个有点奇怪的问题，我有一个**GUI**类，它在构造函数中启动一个**逻辑**类，负责处理应用程序中的处理或物流，然后它们是一个**处理**程序类，其中包含一堆`ActionListners` `KeyListeners`附加到 UI **GUI**类中的组件

在**Logic**和**Handler**类的构造函数中，我将**GUI**类作为参数，以便能够从**Logic**和**Handler**类操作在**GUI**类中创建的**GUI组件**

 ******我的问题是**Handler** 使用**Logic**类，反之亦然（**Logic**类使用**Handler**类），而我上面描述的方法实际上是不可能的，一个是实例在另一个之前，一个在尝试时将为空使用另一个。

例子：

```
public class GUI() 
{
    this.handler = new Handler(this);
    this.logic = new Logic(this);
} 
```

如果`handler`尝试使用某些东西，`logic`那么`null`将被退回。

解决这个问题的一种方法是让 setter`handler`接受`logic`，反之亦然，但这似乎不是这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:50:54.613

简单的：

```
public class GUI() 
{
    this.handler = new Handler(this);
    this.logic = new Logic(this);
    handler.setLogic(logic);
    logic.setHandler(handler);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:46:23.473

我认为可以只在 GUI 中公开 Handler 和 Logic，并让公众访问它。通过这样做，由于您的 Handler 和 Logic 已经引用了 GUI，它们可以间接地相互访问：

```
class Gui {
  private Handler handler;
  private Logic logic;

  public Handler getHandler() {
    return this.handler;
  }
  public Logic getLogic() {
    return this.logic;
  }
}

class Handler {
  private Gui gui;
  public Handler(Gui gui) {
    this.gui = gui;
  }

  public void doSomething() {
    // access logic
    this.gui.getLogic().doSomeLogic();
  }
} 
```

关于“优雅”，我认为组件之间（恕我直言）凌乱依赖的原始设计根本不是优雅的:) 所以，与其专注于让这些东西看起来“优雅”，不如做一些重新思考，可能你会发现一切自动变得更加优雅。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:52:34.753

在你第一次使用之前`handler`，`logic`你可以把这个代码片段
if(handler == null)
this.handler = new Handler(this);
if(logic == null)
this.logic = new Logic(this);******

# python - Twitter 搜索 API 结果不反映高级搜索功能

> ID：13115304
> 
> 赞同：1
> 
> 时间：2012-10-29T02:48:41.827
> 
> 标签：python, twitter, twitter-search

我有兴趣使用查询检查底特律半径 300 英里内的推文`tigers`。这是我一直用于我的 python 程序的链接：

```
DetroitTigersURL='http://search.twitter.com/search.json?q=tigers&amp;rpp=100&amp;lang=en&amp;geocode=42.42,83.02,300mi&amp;' 
```

...仅返回大约 15 条推文，其中 13 条来自哈萨克斯坦的一个人。

这是使用 Twitter 内置高级搜索的相同搜索： [https ://twitter.com/search?q=%22tigers%22%20near%3A%22Detroit%22%20within%3A300mi&src=typd](https://twitter.com/search?q=%22tigers%22%20near%3A%22Detroit%22%20within%3A300mi&src=typd)

...有大量新鲜的推文可供挑选。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:03:42.210

很抱歉其中一种答案，但这似乎是`geocode`API 参数的问题。有关一些相关的讨论，请参见以下链接：

*   [https://dev.twitter.com/discussions/4003](https://dev.twitter.com/discussions/4003)
*   [https://dev.twitter.com/discussions/4004](https://dev.twitter.com/discussions/4004)
*   [https://dev.twitter.com/discussions/2147](https://dev.twitter.com/discussions/2147)
*   [https://dev.twitter.com/discussions/3360](https://dev.twitter.com/discussions/3360)

# java - Android 时间小部件未收到更新

> ID：13115308
> 
> 赞同：2
> 
> 时间：2012-10-29T02:48:56.193
> 
> 标签：java, android, android-layout, android-intent, android-widget

为什么我的 Android 时间小部件不会自行更新？我为主屏幕创建了一个时间和日期小部件，但问题是我的时间小部件只有在屏幕方向发生更改时才会更新，例如从横向更改为纵向。它应该在实时模式下自动更新。这是我的代码：

```
public class PointlessWidget extends AppWidgetProvider {
    Time mCalendar;
    float mMinutes;
    float mHour;

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        // TODO Auto-generated method stub
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        mCalendar = new Time();

        // Line below sets time that will be displayed - modify if needed.
        mCalendar.setToNow();

        int hour = mCalendar.hour;
        int minute = mCalendar.minute;
        int second = mCalendar.second;

        mMinutes = minute + second / 60.0f;
        mHour = hour + minute / 60.0f;

        final int N = appWidgetIds.length;

        for (int i = 0; i < N; i++) {
            int awID = appWidgetIds[i];
            RemoteViews v = new RemoteViews(context.getPackageName(),
                    R.layout.widget);

            v.setTextViewText(R.id.textHour, " " + hour);
            v.setTextViewText(R.id.textMinute, " " + minute);

            appWidgetManager.updateAppWidget(awID, v);
        }
    }

     @Override
     public void onDeleted(Context context, int[] appWidgetIds) {
     // TODO Auto-generated method stub
     super.onDeleted(context, appWidgetIds);

     Toast.makeText(context, "Widget Deleted!", Toast.LENGTH_SHORT).show();
     }

} 
```

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidwidgets"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <receiver android:name=".PointlessWidget" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_stuff" />
        </receiver>
        <service android:name="TimeSettableAnalogClockService"/>

        <activity android:name=".WidgetsConfig" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的 widget_stuff xml。我已经在转换中设置了 updatePeriodMillis="1000" 或相当于 1 秒。

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialLayout="@layout/widget"
    android:minHeight="30dp"
    android:minWidth="274dp"
    android:updatePeriodMillis="1000" >

</appwidget-provider> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:09:46.110

要更新您的时间小部件，请使用 AlarmManager 类。

或者

您可以使用后台服务来更新您的时间小部件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T02:41:24.237

我已经在我的问题中找到了解决方案。为了与我有同样问题的其他人，我将分享我的代码：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;

import android.os.Bundle;
import android.os.Handler;
import android.widget.TextView;
import android.widget.Toast;
import android.app.Activity;

public class DigitalClock extends Activity {
    private Runnable updateTimeTask;
    private Handler handler;

    public static final int TIME_UPDATE_INTERVAL_MSEC = 1000;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (updateTimeTask == null) {
            updateTimeTask = new Runnable() {
                @Override
                public void run() {
                    // if (!DigitalClock.this.isActive()) return;

                    timeAndDate();
                    handler.postDelayed(this, TIME_UPDATE_INTERVAL_MSEC);
                }
            };
        }
        if (handler == null) {
            handler = new Handler();
        }
        handler.removeCallbacks(updateTimeTask);
        handler.postDelayed(updateTimeTask, TIME_UPDATE_INTERVAL_MSEC);
    }

    public void timeAndDate() {
        Calendar c = Calendar.getInstance();

        SimpleDateFormat time = new SimpleDateFormat("hh:mm:ss");
        SimpleDateFormat date = new SimpleDateFormat("MMMM dd yyyy");
        SimpleDateFormat day = new SimpleDateFormat("EEEE");
        SimpleDateFormat am_pm = new SimpleDateFormat("aa");
        String sTime = time.format(c.getTime());
        String sDate = date.format(c.getTime());
        String sDay = day.format(c.getTime());
        String sAm_Pm = am_pm.format(c.getTime());

        // formattedDate have current date/time
        Toast.makeText(this, sDate + " | " + sTime, Toast.LENGTH_SHORT).show();

        // Now we display value in TextView
        TextView txtTime = (TextView) findViewById(R.id.txtHour);
        TextView txtDay = (TextView) findViewById(R.id.txtDay);
        TextView txtDate = (TextView) findViewById(R.id.txtDate);
        TextView txtAm_Pm = (TextView) findViewById(R.id.txtAm_Pm);

        txtTime.setText(sTime);
        txtDate.setText(sDate);
        txtDay.setText(sDay);
        txtAm_Pm.setText(sAm_Pm);
    }
} 
```

# android - 如何显示按钮主页、菜单和返回的导航栏？

> ID：13115313
> 
> 赞同：0
> 
> 时间：2012-10-29T02:50:37.673
> 
> 标签：android

有一些 divice android 有 3 个按钮：Home、Menu 和 Back 在底部。但有些设备安卓手机没有 3 个按钮：主页、菜单和返回。如何在屏幕底部显示 3 个按钮 Home、Menu 和 Back 作为操作栏？作为： ![在此处输入图像描述](../Images/359236bfef67975b4deaa20cba746041.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:56:27.533

这不是操作栏。这是导航栏，在某些手机上可用。具体来说，它将出现在运行 Android 4.0 或更高版本且没有这些键的屏幕外功能的手机上。

> 如何在屏幕底部显示 3 个按钮 Home、Menu 和 Back

这是在固件级别处理的。设备制造商将设置固件以在需要的地方显示导航栏。您无法通过 Android SDK 为不需要的设备添加导航栏。

# sql-server - 用户名的休眠 SQLServerException

> ID：13115314
> 
> 赞同：0
> 
> 时间：2012-10-29T02:50:47.347
> 
> 标签：sql-server, hibernate

我正在尝试运行一个使用 Hibernate 和 MS SQL Server Express 的 java 应用程序。

SQL Server 配置了 Windows 身份验证作为登录方法。我还启用了 TCP/IP 端口 1433（默认），但我仍然不断收到以下错误。

```
...// more output
at test.models.TestHibernate.main(TestHibernate.java:11)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'not required'. ClientConnectionId:de7daf69-2619-4906-b063-459a5b614bdb
...// more output 
```

抛出异常的行：

```
session.beginTransaction(); 
```

休眠.cfg.xml：

```
<property name="connection.driver_class">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
        <property name="connection.url">jdbc:sqlserver://localhost;databaseName=hibernatexml;integratedSecurity=false;</property>
        <property name="connection.username">not required</property>
        <property name="connection.password"/> 
```

我删除了其他配置错误，但是我没有想法。如果您需要更多信息，请告诉我

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:06:53.570

> SQL Server 配置了 Windows 身份验证作为登录方法。jdbc:sqlserver://localhost;databaseName=hibernatexml;integratedSecurity=false;

如果你想在你的 java 应用程序中[使用 SQL Server 的集成身份验证，那么](http://vikdor.blogspot.in/2012/10/connecting-to-sql-server-express.html)

*   JDBC URL 应该将`integratedSecurity`属性设置为`true`.
*   `sqljdbc_auth.dll`安装中的位置`Microsoft SQL Server JDBC Driver`应设置为`java.library.path`JVM 参数。例如

    ```
    -Djava.library.path="C:/Program Files/sqljdbc_4.0.2206.100_enu/sqljdbc_4.0/enu/auth/x64/sqljdbc_auth.dll" 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T14:08:45.690

将 DLL 的整个路径放在 java.library.path 中是行不通的，至少对于 Java 1.7 是这样。您必须只指定目录，没有结尾“/”。

例如：（1）失败...

```
java -cp .;"C:\Program Files\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\sqljdbc4.jar"
     -Djava.library.path="C:\Program Files\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x64\sqljdbc_auth.dl"
     ConnectMSSQLServer 
```

警告：无法加载 sqljdbc_auth.dll 原因：java.library.path 中没有 sqljdbc_auth

com.microsoft.sqlserver.jdbc.SQLServerException：此驱动程序未配置为集成身份验证。

(2) 好的！

```
java -cp .;"C:\Program Files\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\sqljdbc4.jar"
     -Djava.library.path="C:\Program Files\Microsoft JDBC Driver 4.0 for SQL Server\sqljdbc_4.0\enu\auth\x64"
     ConnectMSSQLServer 
```

希望这可以帮助，

何塞。

# php - mysql中列的排序和排名值

> ID：13115316
> 
> 赞同：1
> 
> 时间：2012-10-29T02:50:56.290
> 
> 标签：php, mysql

假设我有 3 列和 3 行，第一列是 ID，第二列是名称，第三列是投票。喜欢：

```
+----+------+-------+
| id | name | votes |
+----+------+-------+
|  1 | bob  |     7 |
|  2 | jill |     2 |
|  3 | jake |     9 |
+----+------+-------+ 
```

我如何让 PHP 比较投票字段中的值并按数字最高的排序，并根据它的投票数附加 #1、2、3 等排名？

每个值将显示在单独的页面上。例如，如果我访问 ID 为 1 的“bob 页面”，我需要它显示“#2 bob”，因为他将在投票中排名第二。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T02:58:12.750

每当您的投票发生变化时，您都可以通过运行以下代码来创建单独的列排名并更新它。这种方法将使您更有效率，因为当用户访问他的页面时，您不会一次又一次地对表格进行排序：

```
 $q = "select * from tableName order by votes DESC";
    $a = mysql_query($q);
    $count = 1;
    while($arr = mysql_fetch_array($a){
       $up = "update tableName set(rank) VALUES($count) WHERE name=$arr['name']";
       $aq = mysql_query($up);
       $count++;
    } 
```

现在在单个页面上，您可以检索排名值并显示

```
$user = "Bob";
$q = "select rank from tableName where name=$user";
$a = mysql_query($q);
$arr = mysql_fetch_array($a);
echo $arr[0]; 
```

这（对其他答案的轻微修改）也应该适合你：-

```
SELECT @rownum:=@rownum+1 AS rank, name, vote FROM table, (SELECT @rownum:=0) as P ORDER BY vote DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:10:25.980

您可以使用 MySQL 'ORDER BY' 并使用 PHP 显示这些排名：对于此示例：

```
<?php
//connection
//DB selection
$query = "SELECT * FROM table_votes ORDER BY votes DESC";
$result = mysql_query($query);

for(int $i=1; $row = mysql_fetch_array($result);i++)
{
    echo "#".$i.$row['name']."<br/>";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T02:55:03.883

您可以将查询返回的值读入一个数组，然后对所述数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T03:03:08.750

您希望`SELECT`查询进行`ORDER BY`投票，并创建一个特殊变量来处理行的排名：

```
SELECT @rownum:=@rownum+1 AS rank, name, vote FROM table, (SELECT @rownum:=0) ORDER BY vote DESC 
```

这个查询应该让你获取一个数组，其中包含你表中每个人的排名、姓名和投票数。

或者，您可以按投票排序，然后使用 PHP 自己添加排名值。

# python - Python 的瓶子和长轮询？

> ID：13115324
> 
> 赞同：1
> 
> 时间：2012-10-29T02:52:21.657
> 
> 标签：python, jquery, long-polling, bottle

我目前有一个单页的 Bottle 项目正在通过`localhost:8080`.

对于这个问题，假设单页只是一个基本的短轮询聊天，从 Python 中检索聊天对象，其中只包含发送者的姓名和消息的正文。

这些聊天线对象存储在聊天对象中，该项目允许多个聊天。

聊天和发件人由 URL 确定。例如，如果一条聊天线是从 发送的`localhost:8080/chat/23/50`，它将作为发送者 50 发送到聊天 23，并将`localhost:8080/chat/23/*`在基本`overflow:auto`div 中显示聊天 23 的所有聊天线。

当前的短轮询 AJAX 每秒向 Python 请求一次数据。我想让事情变得更加实时，并决定使用长轮询（尽管如果你喜欢 HTML5 WebSockets，我也不介意学习它们）。

我的问题分为两部分：

1.  我将如何在这样的聊天系统中实现长轮询方法，最好还是使用 Python 的 Bottle 模块？
2.  然后，我将如何通过可从外部访问的实际服务器（即，不仅从本地主机）交付项目？即使通过 LAN 提供它也很好。

我知道长轮询可能会导致 Apache 等服务器出现严重的性能问题，如果可以将这一事实纳入任何答案，我将不胜感激；我想要一个尽可能可扩展的解决方案。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:04:39.653

我最近参加了一个关于实时客户端-服务器应用程序的演示，该应用程序充分利用了 Python/服务器端的[gevent和客户端的](http://www.gevent.org/)[socket.io](http://socket.io/)。演讲者 Alexandre Bourget 在 github 上发布[了一个 gevent-socketio 模块](https://github.com/abourget/gevent-socketio)，可用于简化所有管道。

一切都只适用于 HTTP 长轮询（但 socket.io 包含切换到 HTML5 WebSocket 或 Flash 套接字的所有逻辑）。虽然框架是 Pyramid，但我相信它也应该适用于 Bottle！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T05:39:02.470

我没有尝试过，但我认为您可以将瓶子与 Tornado 一起使用[http://www.tornadoweb.org/](http://www.tornadoweb.org/)（请参阅[Tornado - mount Bottle 应用程序](https://stackoverflow.com/q/10329668/117092)）。

可以使用 Tornado 进行长轮询。查看 Tornadio 项目[https://github.com/mrjoes/tornadio](https://github.com/mrjoes/tornadio)。

您可能还对[http://pypi.python.org/pypi/bottle-tornado-websocket](http://pypi.python.org/pypi/bottle-tornado-websocket)感兴趣。我从未使用过这个，但它看起来像您正在寻找的东西。

Tornado 文档有一个关于在生产中运行的部分：[http ://www.tornadoweb.org/documentation/overview.html#running-tornado-in-production](http://www.tornadoweb.org/documentation/overview.html#running-tornado-in-production)

我希望它有帮助

# php - 将 Supervisord 与 Zend App 一起使用，重定向似乎正在扼杀它

> ID：13115330
> 
> 赞同：1
> 
> 时间：2012-10-29T02:53:22.083
> 
> 标签：php, zend-framework, supervisord

我有一个运行良好的 Zend 应用程序。

我在我的库中创建了一个 Zend Queue 脚本来运行一些向站点成员发送电子邮件的过程。

该应用程序有许多运行良好的模型，但是当我尝试在队列脚本中启动应用程序时，它没有运行。

我能看到的唯一原因是扩展 Zend_Controller_Action_Helper_Redirector 的自定义帮助程序。此重定向器检查是否需要 https。

在不启动应用程序的情况下，为了获得队列而跑来跑去几乎是不可能的。

在我从 Supervisrd 调用的脚本中，我正在设置我的环境和 $application->bootstrap()->run();

然后我调用脚本类，但它不会冒险越过->run()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:36:40.500

重定向器助手调用 exit()，这就是它不起作用的原因。我将重写端点以删除对重定向的调用，或者编写一个不同的端点以供 supervisord 处理的 CLI 作业使用。

# jsf - JSF 重定向到另一个 Web 项目

> ID：13115334
> 
> 赞同：2
> 
> 时间：2012-10-29T02:54:23.340
> 
> 标签：jsf

如何从一个项目重定向到另一个 Web 项目。我知道如何重定向，但只在同一个项目上，通常重定向的代码是这样的：

```
FacesContext context = FacesContext.getCurrentInstance();
    context.getExternalContext().redirect("login.xhtml"); 
```

好吧，这里发生的事情是它调用支持 bean 进行初始化或其他任何事情。我的老板希望我链接所有项目以使其成为一个应用程序问题是我如何互连这些项目并将链接重定向到我知道的这些项目重定向，但我不知道如何使这成为可能，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T02:58:11.090

只需提供绝对 URL 而不是相对 URL。即开始`http://`等等。

```
externalContext.redirect("http://stackoverflow.com"); 
```

# python - 如何使用从另一个变量确定的颜色绘制 3d 散点图？

> ID：13115335
> 
> 赞同：3
> 
> 时间：2012-10-29T02:54:23.627
> 
> 标签：python, numpy, matplotlib

我制作了一个 3d 散点图，显示了星系团中星系的位置（基本上就像纬度和经度）作为它们速度的函数。但是，我被要求让数据点的颜色由代码中的另一个变量 h 确定。知道变量的目的并不重要，但在我的实际代码中，每个数据点都是由 4 个数组确定的。在花了很长时间查找如何做到这一点之后，我终于（几乎）拥有了它。唯一的问题是，当我绘制它时，只要我移动绘图以从不同的方向查看它，点的颜色就会改变。另外，我在尝试显示彩条时遇到了问题。

```
import pylab as p
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import matplotlib.cm as cm

ra=np.random.random((100))
dec=np.random.random((100))
h=np.random.random((100))
z=np.random.random((100))

datamin=min(h)
datamax=max(h)
fig=p.figure()

ax3D=fig.add_subplot(111, projection='3d')
ax3D.scatter(ra, dec, z, c=h, vmin=datamin, vmax=datamax, 
marker='o', cmap=cm.Spectral)

p.title("MKW4s-Position vs Velocity")
p.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:41:45.330

“重绘时更改颜色”问题是一个[错误](https://github.com/matplotlib/matplotlib/issues/152)，但看起来它已在最新版本 (1.1.1) 中修复。我已经测试并确认它在 1.1.1 中可以正常工作。

对于`colorbar`，它需要一个可映射的。您可以使用从返回的集合`scatter`：

```
import pylab as p
import numpy as np
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import matplotlib.cm as cm

ra=np.random.random((100))
dec=np.random.random((100))
h=np.random.random((100))
z=np.random.random((100))

datamin=min(h)
datamax=max(h)
fig=p.figure()

ax3D=fig.add_subplot(111, projection='3d')
collection = ax3D.scatter(ra, dec, z, c=h, vmin=datamin, vmax=datamax, 
                          marker='o', cmap=cm.Spectral)
p.colorbar(collection)

p.title("MKW4s-Position vs Velocity")
p.show() 
```

# solr - solr4.0，有点时主机名错误

> ID：13115338
> 
> 赞同：1
> 
> 时间：2012-10-29T02:54:35.380
> 
> 标签：solr, cloud, cluster-computing, hostname

我正在不同的服务器上构建一个完整的分布式 solr 集群，服务器是`server1.mycompany.com`和`server2.mycompany.com`. 配置后，当我单击`server1.mycompany.com`Web 控制台时，solr 尝试连接 `server1:8983/solr`而不是`server1.mycompany.com:8983/solr`. 我使用java API：

```
ZkStateReader zkStateReader = cloudQuery.getCloudSolrServer().getZkStateReader();
ClusterState clusterState = zkStateReader.getClusterState();
System.out.println(clusterState); 
```

我还是明白了`"node_name":"server1:8983_solr","base_url":"http://server1:8983/solr"`。

有人给个提示吗？这是一个错误还是要配置的东西？

# html - 响应式导航——从一行到三列？

> ID：13115340
> 
> 赞同：0
> 
> 时间：2012-10-29T02:55:05.177
> 
> 标签：html, css, responsive-design, fluid-layout, multiple-columns

使用标准`<nav> & <ul>`时，很容易创建显示在单行上的导航：

![在此处输入图像描述](../Images/c08c80487a56ff7d07a11d2326bbdac0.png)

*桌面：http: [//jsfiddle.net/Baumr/Be9ma/1/](http://jsfiddle.net/Baumr/Be9ma/1/)*

由于这是用于响应式布局，因此在较小的显示器上，导航将收缩为 3 列（甚至可能是 2 列），并带有媒体查询（代码中未包含）：

![在此处输入图像描述](../Images/d99758c5753d7119bbd08e7e0d37e66e.png)

*手机：http: [//jsfiddle.net/Baumr/Be9ma/](http://jsfiddle.net/Baumr/Be9ma/)*

**但它在美学上没有间隔：**

由于`nav li`元素的宽度是 33.3333%，所以间距是混乱的——一些导航项很长，一些很短。但是间距不是流动的。

**如何将每列调整为仅与最宽元素 + 填充/边距一样宽？**也就是说，没有分离或嵌套`ul`输出——这会破坏语义，并且在宽显示器上查看时。

这是简单的 HTML：

```
<nav>
    <ul>
    <li>Home</li>
    <li>Very Long Link</li>
    <li>Blog</li>
    <li>About</li>
    <li>Also Long Link</li>
    <li>Email</li>
    </ul>
</nav>​ 
```

这是相关的CSS：

```
nav {
    clear: both;
    background: pink;
}

    nav ul {
        padding: 20px 10px 0 30px;
        margin: 0;
        overflow: hidden;
        font-size: 16px;
    }

    nav li {
        font-variant: small-caps;
        text-decoration: underline;
        list-style: none;
        display: block;
        float: left;
        padding: 0 0 30px 0;
        margin: 0; 
        width: 33.33333%;
        float: left;
} 
```

很想听听你的想法。先感谢您！

PS 我想强调**跨浏览器的兼容性和语义**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:22:41.033

为移动设备添加一些@media 查询。

[http://jsfiddle.net/bf9cB/](http://jsfiddle.net/bf9cB/)
您需要打开/收缩中心栏以查看更改

```
@media only screen and (max-width: 480px) {
    nav li { max-width:160px; text-align:center } /* This would only allow 3 to fit */
}

@media only screen and (max-width: 320px) {
    nav li { max-width:106px; text-align:center }
} 
```

投注字体大小将是 320 像素宽（仅供参考）的一个因素。你的问题让我想起了我最近读的一本书：[《移动优先》](http://www.abookapart.com/products/mobile-first)。简而言之：在移动设备上开始构建，然后从那里“向上”工作。Def值得一试。

# perl - 需要帮助安装 Spreadsheet::ParseExcel

> ID：13115345
> 
> 赞同：2
> 
> 时间：2012-10-29T02:56:08.750
> 
> 标签：perl, cpan, parseexcel

我正在尝试安装 Spreadsheet::ParseExcel 以与 ExcelLatex 一起使用。这就是我所做的：安装 Active perl，然后安装 CPAN.pm，`perl -MCPAN -e shell` 我被要求进行配置和镜像站点，然后让 perl 进行自动配置。最后我收到以下消息：`Autoconfiguration complete.`然后我尝试： `perl -MCPAN -e 'install "Spreadsheet::WriteExcel"'` 它尝试安装它，但最后我收到以下错误：

```
ERROR: Can't create '/Library/Perl/5.12/Spreadsheet'
mkdir /Library/Perl/5.12/Spreadsheet: Permission denied at     /System/Library/Perl/5.12/ExtUtils/Install.pm line 494

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 at -e line 1
make: *** [pure_site_install] Error 13
  JMCNAMARA/Spreadsheet-WriteExcel-2.37.tar.gz
  /usr/bin/make install  -- NOT OK 
```

我真的很感激，请帮助我如何解决问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T07:52:59.887

它正在尝试在根目录中创建一个目录（mkdir /Library/Perl/5.12/Spreadsheet）

你必须是 root 才能做到这一点。

您可以使用[PerlBrew](http://perlbrew.pl/)或[local::lib](http://search.cpan.org/dist/local-lib/lib/local/lib.pm)将您的 perl 库安装到您的主目录中。

```
 # Install Spreadsheet::WriteExcel and its missing dependencies to the '~/perl5' directory
  perl -MCPAN -Mlocal::lib -e 'CPAN::install(Spreadsheet::WriteExcel)'

  # Just print out useful shell commands
  $ perl -Mlocal::lib
  export PERL_MB_OPT='--install_base /home/username/perl5'
  export PERL_MM_OPT='INSTALL_BASE=/home/username/perl5'
  export PERL5LIB='/home/username/perl5/lib/perl5/i386-linux:/home/username/perl5/lib/perl5'
  export PATH="/home/username/perl5/bin:$PATH"
  #create a environment setting script and execute it.
  perl -Mlocal::lib > ~/.setenv && . ~/.setenv 
```

问候，

# java - 在 linux maven 命令行上运行的 testng

> ID：13115349
> 
> 赞同：2
> 
> 时间：2012-10-29T02:57:21.953
> 
> 标签：java, linux, maven, automated-tests, testng

如何`testng.xml`在 linux 命令行中从 maven 命令运行文件？

我是自动化新手。我使用 Interlij Idea 创建了一个 maven 项目（java）来测试网页。我可以使用 Idea 在 testng.xml 中运行测试组。

我现在需要的是从 linux 命令行运行这些测试组。（运行 testng xml 文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:15:19.620

您需要[在 linux 上下载 maven](http://www.sonatype.com/books/mvnref-book/reference/installation-sect-maven-install.html)，然后 AFAIK 命令应该没有任何不同，因此您可以在 pom 中使用 surefire[插件](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)并将 suiteXmlFile 参数指定为 mvn test 命令，例如 `mvn test -DsuiteXmlFile=/src/test/resources/yourxml.xml`

希望能帮助到你..

# ruby-on-rails - strptime -- 无效日期错误

> ID：13115351
> 
> 赞同：3
> 
> 时间：2012-10-29T02:57:31.310
> 
> 标签：ruby-on-rails, ruby

这应该非常简单，但我很难过：

```
require 'time'
# works fine, prints "2/20/2012 6:46:00 PM"
puts Time.new(2012,2,20,18,46,0).strftime('%-m/%-d/%Y %-l:%M:%S %p')
test_date = '2/20/2012 6:46:00 PM'
# Invalid date error -- why??
# What am I doing wrong in my usage of strptime?
last_login = DateTime.strptime(test_date, '%-m/%-d/%Y %-l:%M:%S %p') 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T03:14:17.430

`strptime`和之间似乎有一点区别`strftime`。我认为你不需要`-`在`strptime`.

```
test_date = '2/20/2012 6:46:00 PM'
last_login = DateTime.strptime(test_date, '%m/%d/%Y %l:%M:%S %p') 
```

# java - Android SQLite，查询但找不到行，给我错误

> ID：13115356
> 
> 赞同：0
> 
> 时间：2012-10-29T02:58:17.517
> 
> 标签：java, android, sqlite

我尝试使用 cursor == null，但无济于事，并且 cursor.getCount == 0，以及 moveFirst 方法..仍然错误，这是我的代码..

```
 public void getColumns()
        {

            String[] columns = new String[] {"CLASSROOM_ID"};
            Cursor c = ourDatabase.query("CLASSROOM_TABLE", columns, "CLASSROOM_AVAILABLE =  0", null,
                    null, null, null);

            if (c.moveToFirst())
                    {
                int[] myid = new int[c.getCount()];
                int i = 0;

                while (!c.isAfterLast()) 
                    {

                    myid[i]=c.getInt(0);
                    ContentValues cv = new ContentValues();
                    cv.put("CLASSROOM_AVAILABLE", 1);
                    ourDatabase.update("CLASSROOM_TABLE", cv, "CLASSROOM_ID = "+myid[i], null);

                    i++;
                    c.moveToNext();

                    }
                    }

        } 
```

我真的不知道我做错了什么，我应该怎么做才能让我的应用程序知道光标找不到行？

这是日志猫

```
10-29 12:04:23.903: D/AndroidRuntime(22782): Shutting down VM
10-29 12:04:23.903: W/dalvikvm(22782): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-29 12:04:23.923: E/AndroidRuntime(22782): FATAL EXCEPTION: main
10-29 12:04:23.923: E/AndroidRuntime(22782): java.lang.IllegalStateException: Could not execute method of the activity
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$1.onClick(View.java:2072)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View.performClick(View.java:2408)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$PerformClick.run(View.java:8816)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Handler.handleCallback(Handler.java:587)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.os.Looper.loop(Looper.java:123)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.app.ActivityThread.main(ActivityThread.java:4627)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invokeNative(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invoke(Method.java:521)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at dalvik.system.NativeStart.main(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782): Caused by: java.lang.reflect.InvocationTargetException
10-29 12:04:23.923: E/AndroidRuntime(22782):    at my.skul.Mainmenu.sectwenty(Mainmenu.java:71)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invokeNative(Native Method)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at java.lang.reflect.Method.invoke(Method.java:521)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.view.View$1.onClick(View.java:2067)
10-29 12:04:23.923: E/AndroidRuntime(22782):    ... 11 more
10-29 12:04:23.923: E/AndroidRuntime(22782): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:99)
10-29 12:04:23.923: E/AndroidRuntime(22782):    at my.skul.MyCreateClassrooms.get(MyCreateClassrooms.java:111)
10-29 12:04:23.923: E/AndroidRuntime(22782):    ... 15 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T02:59:50.250

您需要使用[moveToFirst()将光标移动到第一个位置](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)

> 如果光标为空，此方法将返回 false

（或者）

另一种方法是：

```
 while (cursor.moveToNext()) {
     //Your logic
    } 
```

# apache2 - Apache2 无法运行 WSGI 脚本

> ID：13115362
> 
> 赞同：0
> 
> 时间：2012-10-29T02:59:20.950
> 
> 标签：apache2, wsgi, review-board

我在 linux 上安装 Reviewboard，我已将安装包提供的配置复制到 httpd.conf

```
 <VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/usr/www/reviewboard/htdocs"

    # Error handlers
    ErrorDocument 500 /errordocs/500.html

    WSGIPassAuthorization On
    WSGIScriptAlias "/reviewboard" "/usr/www/reviewboard/htdocs/reviewboard.wsgi/reviewboard"

    <Directory "/usr/www/reviewboard/htdocs">
            AllowOverride All
            Options -Indexes FollowSymLinks
            Allow from all
    </Directory>

    # Alias static media requests to filesystem
    Alias /reviewboard/media "/usr/www/reviewboard/htdocs/media"
    Alias /reviewboard/errordocs "/usr/www/reviewboard/htdocs/errordocs"
    Alias /reviewboard/favicon.ico "/usr/www/reviewboard/htdocs/media/rbcommons/images/favicon.png"
    </VirtualHost> 
```

但是，当我访问“http://SITE/reviewboard/htdocs/reviewboard.wsgi”时，它只会以纯文本形式提供文件，而不是运行脚本

我已经通过“apache2ctl -t -D DUMP_MODULES”检查了 mod_wsgi 是否在 apache2 上运行

我错过了任何其他配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:03:31.000

您应该使用以下网址：

```
http://SITE/reviewboard 
```

并且 WSGIScriptAlias 指令应该是：

```
WSGIScriptAlias "/reviewboard" "/usr/www/reviewboard/htdocs/reviewboard.wsgi" 
```

请注意，将整个 Django 站点放在 DocumentRoot 下是不好的做法。您所看到的 WSGI 脚本文件的源代码突出了它不好的原因。也就是说，您的 Apache 配置有问题，您可以公开所有源代码供人们下载。如果 settings.py 在那里并且包含数据库密码，则尤其糟糕。

现在，解决这些问题并用你当时的问题和下一个问题来更新问题，因为我不希望这能完全解决问题，因为这些错误你应该遇到与你描述的不同的问题，所以怀疑你的配置甚至没有被使用。

# java - 转换为 byte[] 时，Java 客户端服务器聊天用正方形填充字符串

> ID：13115367
> 
> 赞同：1
> 
> 时间：2012-10-29T02:59:48.947
> 
> 标签：java, string, bytearray

我正在构建一个聊天客户端和服务器作为课程项目的一部分，并且遇到了一个我似乎无法解决的问题。`byte[]`根据特定情况，文本必须以固定大小（32 或 64 字节）的形式传递。

当我将字符串更改为`byte[]`使用该`.getBytes()`方法时，它会用空方块填充字符串的长度。这在运输和收货期间很好，但在某些时候我需要将字符串更改为原始格式（目前已完成`new String(byte[])`并删除空方块。

我似乎找不到这样做的好方法。有什么建议么？

相关代码位客户端：

```
byte[] bigDataByte = new byte[64];
sendData[2] = (bigDataByte = message.getBytes())
for (int i = 0; i < sendData.length; i++){
    if (sendData[i] != null){
        DatagramPacket sendPacket = new DatagramPacket(sendData[i], sendData[i].length, IPAddress, clientPort);
        clientSocket.send(sendPacket);
    }
} 
```

相关码位服务器端：

```
 String name = new String(getBytes(32));

 private static byte[] getBytes(int size) throws IOException {
    byte[] dataByte = new byte[size];
    DatagramPacket dataPacket = new DatagramPacket(dataByte, dataByte.length);
    servSocket.receive(dataPacket);
    return dataPacket.getData();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:13:19.663

不确定，但问题可能是您没有指定字符集。

尝试使用

*   构造函数：[`String(byte[] bytes, String charsetName)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5b%5d,%20java.lang.String%29)
*   和方法：[`getBytes(String charsetName)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)。

例如

```
byte[] bytes = str.getBytes("UTF-8"); 
```

和

```
String str = new String(bytes, "UTF-8"); 
```

默认的使用平台的默认字符集，这可能会导致不匹配。

# wso2 - 代理服务 WSO2 ESB 中的默认命名空间和前缀

> ID：13115374
> 
> 赞同：4
> 
> 时间：2012-10-29T03:00:41.060
> 
> 标签：wso2, wso2esb

我正在 WSO2 ESB 中开发代理服务。

使用此配置，我检索 xml Web 服务响应。响应使用默认命名空间，如下所示：

```
<enrich>
<source type="body" clone="true" />
<target type="property" property="soapXmlResponseReadCahceDataService" />
</enrich> 
```

这是 xml 响应：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body>
<cacheServices **xmlns="http://cache.services"**>
<cacheService>
   <id>1</id>
   <xmlrequesthash>b1e97b67-1226-4b1d-9081-b2a140690efd</xmlrequesthash>
   <xmlrequestpayload>c</xmlrequestpayload>
   <xmlresponsepayload>d</xmlresponsepayload>
   <quantity>1</quantity>
   </cacheService>
</cacheServices>
</soapenv:Body> </soapenv:Envelope> 
```

此后我需要获取元素**数量**：

```
<property xmlns="http://cache.services" name="count" expression="//cacheServices/cacheService/quantity" /> 
```

WSO2 ESB 不允许您放置没有前缀的命名空间，而且我无法获得该值。我可以获取这个值，因为 xml 响应没有命名空间前缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:08:14.507

Can you try this xpath in property mediator ?

```
 <property name="count" expression="//*[name()='cacheServices']/*[name()='cacheService']/*[name()='quantity']" scope="default" type="STRING"/> 
```

Alternatively you can use this by adding any namespace prefix since you are using default namespace.

```
 <property xmlns:ns1="http://cache.services" name="count" expression="//ns1:cacheServices/ns1:cacheService/ns1:quantity" scope="default" type="STRING"/> 
```

# url - Magento - 开发服务器 - 网址不起作用

> ID：13115375
> 
> 赞同：0
> 
> 时间：2012-10-29T03:00:42.190
> 
> 标签：url, magento, installation

我正在尝试在我的开发服务器上设置 Magento，但我无法让 URL 正常工作。

我有一个我安装的实时版本的副本。然后我更新了文件，清空`config.xml`了缓存文件夹（`var/cache``core_config_data`

任何想法或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:00:29.597

如果这里没有其他答案，关于确保所有值在数据库中正确设置，是正确的，可能是 var/cache 目录不可写。在这种情况下，您需要清除系统临时目录中的缓存（在大多数基于 *nix 的系统上是 /tmp/magento/）。

作为替代方案，检查您的 .htaccess 文件并确保您的活动域根本没有被引用（RedirectRules、Redirect 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:07:08.307

如果你去数据库，找`core_config_data`表。您需要将`web/unsecure/base_url`和的值更改`web/secure/base_url`为您的开发服务器 url。

您可能需要清除缓存`./var/cache`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:34:20.627

在您的开发服务器数据库中有 Live Server Url。

只需在 Dev server Database 中找到 Live server Url 并将其替换为 Development Server Url。

**例子：**

**直播服务器：**

```
http://live-server.com 
```

**开发服务器：**

```
http://dev-server.com 
```

您只需 `http://live-server.com`在开发服务器数据库中找到并替换为`http://dev-server.com`.

这对你会有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T23:22:10.857

哎呀。:) 我发现了我自己的问题...

显然我有一份实时文件的`app/etc/local.xml`副本`backup_local.xml`

但是，应用程序会加载**所有**具有`.xml`扩展名的文件 - 所以它也在加载`backup_local.xml`文件......糟糕！

我希望这个问题可以帮助其他有类似问题的用户！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T07:35:22.267

转到 phpmyadmin，执行此查询并更正找到的值。

```
SELECT * FROM (SELECT * FROM  `core_config_data` WHERE path LIKE  "%url%") AS A 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T07:14:31.283

您是否尝试清除会话文件夹？

# javascript - onload vs onLoad（区分大小写）

> ID：13115377
> 
> 赞同：2
> 
> 时间：2012-10-29T03:00:49.070
> 
> 标签：javascript, html, canvas

我`js`在网页中有 2 个函数（）用于将图像附加到画布元素：

```
 function attachImage(tile, x, y)
    {
      base_image = new Image();
      base_image.src = 'Images/tiles/'+(tile-1)+'.png';
      base_image.onload = function(){
        context.drawImage(base_image, 32*x,32*y);
      }
    } 
```

我从字面上复制并粘贴它并将其复制到另一个画布上

```
 function attachImage2(tile2, x2, y2)
    {
        base_image2 = new Image();
        base_image2.src = 'Images/tiles/'+(tile2-1)+'.png';
        base_image2.onLoad = function(){
            context2.drawImage(base_image2, 32*x2,32*y2);
      }
    } 
```

在 Firefox 上，如果我制作一个`onload`和另一个`onLoad`，那么它工作正常。但无论我为 chrome 做什么，它都无法正确加载图像。

编辑：这是firefox和chrome之间的图像比较：

火狐：http : [//imgur.com/JaEgy](http://imgur.com/JaEgy)

铬：http: [//imgur.com/VJc6q](http://imgur.com/VJc6q)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T03:16:29.607

您应该使用`onload`（*小写*）。

一些一般注意事项

*   当您需要局部变量时，请使用`var`.
*   您应该`onload`在实际设置之前设置，`src`否则（*对于缓存*的）图像`onload`可能不会被调用。
*   由于您的方法做同样的事情，您应该只使用一个，并将上下文作为参数传递

所以

```
<script>
var canvas = document.getElementById('map');
context = canvas.getContext('2d');

var canvas2 = document.getElementById('map2');
context2 = canvas2.getContext('2d');

function attachImage(tile, x, y, canvasContext)
{
  var base_image = new Image();
  base_image.onload = function(){
    canvasContext.drawImage(base_image, 32*x,32*y);
  }
  base_image.src = 'Images/tiles/'+(tile-1)+'.png';
}
</script> 
```

`script`并且您不应该为每个呼叫创建标签

```
<?php
echo("<script>");
for($tr = 0; $tr < count($mapArray)-1; $tr++) {
    for($tc = 0; $tc < count($mapArray[$tr])-1; $tc++) {
        $tile = $mapArray[$tr][$tc];
        echo "attachImage(" . $tile . "," . $tc . "," . $tr . ",context);";
    }
}

for($tr = 0; $tr < count($mapArrayy)-1; $tr++) {
    for($tc = 0; $tc < count($mapArrayy[$tr])-1; $tc++) {
        if($mapArrayy[$tr][$tc]!=0){
            echo "attachImage(" . $mapArrayy[$tr][$tc]. "," . $tc . "," . $tr . ",context2);";
        }
    }
}
echo("</script>");
?> 
```

# c# - XNA 随机重生“敌人”

> ID：13115378
> 
> 赞同：1
> 
> 时间：2012-10-29T03:01:09.000
> 
> 标签：c#, xna

我正在尝试制作游戏，我希望“敌人”或流星从右侧产生并前往左侧。我正在编写一些代码，它似乎工作得很好，但是重生失败了。他们最终产卵一个和一个真的很慢，然后过了一段时间他们根本不产卵。所有帮助将不胜感激。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace WindowsGame2
{

public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    List<Enemies> enemies = new List<Enemies>();
    Random random = new Random();

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {

        base.Initialize();
    }
    protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);
    }

    protected override void UnloadContent()
    {
    }

    float spawn = 0;
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        spawn += (float)gameTime.ElapsedGameTime.TotalSeconds;

        foreach (Enemies enemy in enemies)
        {
            enemy.Update(graphics.GraphicsDevice);
        }
        LoadEnemies();

        base.Update(gameTime);
    }

    public void LoadEnemies()
    {
        int randY = random.Next(100, 400);
        if (spawn > 1)
        {
            spawn = 0;
            if (enemies.Count() < 10)
                enemies.Add(new Enemies(Content.Load<Texture2D>("meteor"), new Vector2(1110, randY)));
        }
        for (int i = 0; i < enemies.Count; i++)
        {
            if (!enemies[i].isVisible)
            {
                enemies.RemoveAt(i);
                i--;
            }
        }
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        spriteBatch.Begin();
        foreach (Enemies enemy in enemies)
        {
            enemy.Draw(spriteBatch);
        }
        spriteBatch.End();
        base.Draw(gameTime);
    }
}
} 
```

这是我的课：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework;

namespace WindowsGame2
{
class Enemies
{
    public Texture2D texture;
    public Vector2 position;
    public Vector2 velocity;
    public bool isVisible = true;

    Random random = new Random();
    int randX, randY;

    public Enemies(Texture2D newTexture, Vector2 newPosition)
    {
        texture = newTexture;
        position = newPosition;

        randX = random.Next(-4, 4);
        randY = random.Next(-4, -1);
        velocity = new Vector2(randX, randY);
    }

    public void Update(GraphicsDevice graphics)
    {
        position += velocity;

        if (position.Y <= 0 || position.Y >= graphics.Viewport.Height - texture.Height)
        {
            velocity.Y = -velocity.Y;
        }

        if (position.X < 0 - texture.Width)
        {
            isVisible = false;
        }
    }
    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, Color.White);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:32:56.477

你的问题就在这里。你的一些流星向右移动，一些根本不动。

```
randX = random.Next(-4, 4); 
```

尝试使用

```
randX = random.Next(-4, -1); 
```

你的敌人/流星有时在 X 上的速度在 0 到 4 之间，所以它们向右移动。

我可以看到你把 Y 改成了这个，也许你把它们弄混了？

# apache-flex - .swf 文件的嵌入皮肤

> ID：13115379
> 
> 赞同：0
> 
> 时间：2012-10-29T03:01:11.807
> 
> 标签：apache-flex

我下载了这样的css样式。

```
Panel
{

closeButtonDisabledSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonDisabled");
closeButtonDownSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonDown");
closeButtonOverSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonOver");
closeButtonUpSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonUp");
titleBackgroundSkin: Embed(source="AeonGraphical.swf", symbol="PanelTitleBackground");

borderColor: #A1A5AF;
borderAlpha: 1;
backgroundColor: #eeeeee;
backgroundAlpha: 1;
borderThicknessTop: 0;
borderThicknessBottom: 0;
borderThicknessLeft: 4;
borderThicknessRight: 4;
cornerRadius: 10;
headerHeight: 36;
titleStyleName: "mypanelTitle";     

}

.mypanelTitle {
    color: #4b5f0c;
    fontSize: 13;
    fontWeight: bold;
} 
```

但我发现 Flex 没有这四个部分

```
closeButtonDisabledSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonDisabled");
    closeButtonDownSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonDown");
    closeButtonOverSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonOver");
    closeButtonUpSkin: Embed(source="AeonGraphical.swf",symbol="CloseButtonUp");
    titleBackgroundSkin: Embed(source="AeonGraphical.swf", symbol="PanelTitleBackground"); 
```

我该如何使用它？这四部分是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:25:18.167

这些“部分”意味着有人创建了一个带有单独皮肤符号的 swf（使用 flash），用于每个按钮状态。如果没有该 swf 文件，您将无法使用该 css（或您自己创建一个新文件）。

# grammar - 野牛班次减少冲突

> ID：13115382
> 
> 赞同：3
> 
> 时间：2012-10-29T03:01:35.800
> 
> 标签：grammar, bison, shift-reduce-conflict

有冲突的语法的精简版本：

```
body: variable_list function_list;
variable_list:
  variable_list variable | /* empty */
;
variable:
  TYPE identifiers ';'
;
identifiers:
  identifiers ',' IDENTIFIER | IDENTIFIER
;
function_list:
  function_list function | /* empty */
;
function:
  TYPE IDENTIFIER '(' argument_list ')' function_body
; 
```

问题是变量和函数都以 TYPE 和 IDENTIFIER 开头，例如

```
int some_var;
int foo() { return 0; } 
```

在这种语言中，变量总是在函数之前声明，但是当尝试解析时，它总是给出

> 解析错误：语法错误，意外'（'，期待'，'或';' [在foo之后]

如何使 variable_list 不那么贪婪，或者让解析器意识到如果下一个标记是 '(' 而不是 ';' 或 ''，那么它显然是一个函数而不是变量声明？

冲突的野牛调试输出是

```
state 17

3 body: variable_list . function_list
27 variable_list: variable_list . variable

T_INT    shift, and go to state 27
T_BOOL   shift, and go to state 28
T_STR    shift, and go to state 29
T_VOID   shift, and go to state 30
T_TUPLE  shift, and go to state 31

T_INT     [reduce using rule 39 (function_list)]
T_BOOL    [reduce using rule 39 (function_list)]
T_STR     [reduce using rule 39 (function_list)]
T_VOID    [reduce using rule 39 (function_list)]
T_TUPLE   [reduce using rule 39 (function_list)]
$default  reduce using rule 39 (function_list)

variable       go to state 32
simpletype     go to state 33
type           go to state 34
function_list  go to state 35 
```

我已经尝试了各种 %prec 语句以使其更喜欢 reduce（尽管我不确定在这种情况下会有什么区别），但没有成功让野牛使用 reduce 来解决这个问题，我也尝试过改组规则围绕制定诸如 non_empty_var_list 之类的新规则并将正文拆分为 function_list | non_empty_var_list function_list 并且没有任何尝试可以解决此问题。我是新手，我已经没有如何解决这个问题的想法了，所以我完全感到困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T03:51:45.537

> 问题在于变量和函数都以 TYPE 和 IDENTIFIER 开头

不完全是。问题是 function_list 是左递归的并且可能是空的。

When you reach the semi-colon terminating a `variable` with TYPE in the lookahead, the parser can reduce the variable into a variable_list, as per the first variable_list production. Now the next thing might be function_list, and function_list is allowed to be empty. So it could do an empty reduction to a function_list, which is what would be necessary to start parsing a function. It can't know not to do that until it looks at the '(' which is the third next token. That's far too far away to be relevant.

Here's an easy solution:

```
function_list: function function_list
             | /* EMPTY */
             ; 
```

Another solution is to make function_list non-optional:

```
body: variable_list function_list
    | variable_list
    ;

function_list: function_list function
             | function
             ; 
```

If you do that, bison can shift the TYPE token without having to decide whether it's the start of a variable or function definition.

# automation - 具有类 c 脚本语言的自动化软件

> ID：13115385
> 
> 赞同：1
> 
> 时间：2012-10-29T03:02:13.213
> 
> 标签：automation, autohotkey

是否有像 AutoHotKey 这样使用类 c 语言编写脚本的自动化解决方案？AutoHotKey 非常有用，但它的语法很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:48:37.873

AutoHotkey 是用 C++ 编写的，并且是完全[开源](https://github.com/Lexikos/AutoHotkey_L)的。您可以将您的项目与它混合，尽管它非常杂乱无章。

一个更现实的选择是使用[AutoHotkey.dll](http://www.autohotkey.net/~HotKeyIt/AutoHotkey/files/AutoHotkey-txt.html) ^([直接下载](http://www.autohotkey.net/~HotKeyIt/AutoHotkey.zip))。任何可以使用机器代码 DLL 或 COM（组件对象模型）的语言。它可能包括 C，但它确实包括所有这些。（读者：随意添加）。

*   C++
*   C＃
*   爪哇
*   Python
*   AutoHotkey 它自己

Python 有一个名为[AutoPy](http://www.autopy.org/) ^([GitHub](https://github.com/msanders/autopy/))的包。它是跨平台的，并且似乎具有与 AutoHotkey 相似的功能。不过，我对它的经验很少。

# android - 第一个 Android 应用程序 - 无法将 EditText 转换为整数值

> ID：13115387
> 
> 赞同：0
> 
> 时间：2012-10-29T03:02:43.540
> 
> 标签：android, parseint

我正在尝试编写我的第一个 Android 应用程序。它将接受用户在 EditText 字段中输入的数字，将其转换为整数，然后找到因子。我想从我之前编写的 Java 程序中移植它。我有存根工作到我有一个 UI，但我还没有移植可以找到这些因素的代码。我一直试图将 EditText 转换为整数。如果我插入以下任一行，程序会在模拟器中崩溃。Log.Cat 说，“由 NumberFormatExcepion 引起：无法将 '' 解析为整数。”

任何建议表示赞赏。

userNumber 是取自 EditText 字段的值的名称，EditText 字段也被命名为 userNumber。我不知道这是否是不好的形式。我想将 userNumber 的值分配给整数值 userInt。然后将考虑 userInt。

这些方法中的任何一种都会导致问题：

```
userNumber = (EditText) findViewById(R.id.userNumber);
userInt = Integer.parseInt(userNumber.getText().toString());

Integer userInt = new Integer(userNumber.getText().toString()); 
```

XML 的 EditText 块如下所示：

```
<EditText
    android:id="@+id/userNumber"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="number" >

    <requestFocus />
</EditText> 
```

这是该课程的相关代码：

```
public class AndroidFactoringActivity extends Activity {

// Instance Variables
EditText userNumber;
Button factorButton;
TextView resultsField;
int factorResults = 1;
int userInt = 0;  // This comes out if using Integer userInt

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    resultsField = (TextView) findViewById(R.id.resultsField);
    factorButton = (Button) findViewById(R.id.factorButton);
    userNumber = (EditText) findViewById(R.id.userNumber); 
                // userNumber is also the name of the EditText field.

    // userInt = Integer.parseInt(userNumber.getText().toString());

    // Integer userInt = new Integer(userNumber.getText().toString());

    resultsField.append("\n" + String.valueOf(userInt)); 
               //Later, this will be factorResults, not userInt.
               // Right now, I just want it to put something on the screen.      

}   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:12:05.727

您正在尝试解析`onCreate`方法中的 int，这发生在用户有机会在`EditText`. 因此尝试解析空字符串的异常。

您必须按下按钮，然后将 int 从 中解析出来`EditText`，或者将侦听器附加到`EditText`将在输入内容时解析它。

# javascript - HTML 中的复选框和表格数据

> ID：13115391
> 
> 赞同：1
> 
> 时间：2012-10-29T03:03:07.423
> 
> 标签：javascript, html

这些表格复选框是否有任何理由会返回“1”或 true 声明，无论它们是否被选中？

```
<table>
    <tr>
        <td>Lake/Body Name:</td>
        <td><input type="text" id="title"></td>
    </tr>
    <tr>
        <td>Fishing:</td>
        <td><input type="checkbox" value="1" id="fish"></td>
    </tr>
    <tr>
        <td>Wakeboarding:</td>
        <td><input type="checkbox" value="1" id="wake"></td>
    </tr>
    <tr>
        <td>Skiing:</td>
        <td><input type="checkbox" value="1" id="ski"></td>
    </tr>
    <tr>
        <td>Tubing:</td>
        <td><input type="checkbox" value="1" id="tube"></td>
    </tr>
    <tr>
        <td>Comments:</td>
        <td><input type="text" id="comments"></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="button" value="Save &amp; Close" onclick="saveBoat()"></td>
    </tr>
</table> 
```

这是谷歌地图信息窗口的内容VAR，顺便说一句......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:10:30.287

这取决于您使用什么 Javascript 来检查它是否被“检查”。`.value`在复选框元素上使用与使用属性`.checked`不同。如果您看到，您将`value`HTML 中的复选框元素的属性设置为`1`. 正如我之前所说，这与其`checked`状态无关，并且访问方式不同。

# binary-tree - 二叉树随机植针

> ID：13115394
> 
> 赞同：0
> 
> 时间：2012-10-29T03:03:26.253
> 
> 标签：binary-tree, binary-search-tree, binary-search

我需要生成一个（平衡）二叉树，其中一个节点上随机放置一根针，这样我就可以比较不同的盲搜索算法。我已经生成了树和搜索，但我正在努力研究如何随机分配一个节点作为针。为了比较公平，needle 需要逼近一个随机节点，否则它会扭曲结果。（50%的针应该在最底层等）

最好的答案是给定根节点和深度的算法，它将分配一个节点作为针，但其他答案将被接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:22:04.280

解决方案的快速代码转储，以帮助将来的任何人

```
plantNeedle(TreeNode root, int nodes, int random){
    //calculate pivot node value
    int pivot=nodes/2+1;
    if(random==pivot)root.val=42;//this is our new needle
    if(random>pivot)plantNeedle(root.right,nodes/2,random-pivot);//needle should be on right
    if(random<pivot)plantNeedle(root.left,nodes/2,random);//needle should be on left
} 
```

# javascript - 如何检索 html 表单元素并在页面的其他位置显示值

> ID：13115396
> 
> 赞同：0
> 
> 时间：2012-10-29T03:03:42.430
> 
> 标签：javascript, html, forms

如果这是一个愚蠢的问题，我很抱歉，但我正在环顾四周，但没有找到适合我的答案。我正在使用 JavaScript，并且我有一个带有一个文本输入的 html 表单。当有人为该输入输入一个值并提交表单时，我想返回到相同的 HTML 页面，但他们输入的内容显示在页面的其他位置。这是我的表格：

```
<form name="chatInput" action="index.html"  method="get">
        chat:<input type="text" name="chat"/>
</form> 
```

我看到了一些关于拥有的东西：

```
var chatText = document.forms[0].elements[0]; 
```

但是当我尝试使用它时，我得到 [object HTMLInputElement]

此外，如果表单已经输入过一次但最初没有输入，我只想创建该变量。我将如何检查这个？

感谢您提供任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:08:20.790

```
var chatText = document.forms[0]['chat'].value; 
```

[http://jsfiddle.net/XLeAn/](http://jsfiddle.net/XLeAn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:06:41.523

尝试这个：

```
var chatText = document.forms[0].elements[0].value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T03:11:09.590

如果您不想重新更新 html，我建议您不要使用表单标签。

相反，我会创建一个带有 onclick 属性的按钮。

```
<input type="button" value="Update" onclick="someFunction()"> 
```

然后在 JS 部分，有这样的东西。

```
var someFunction = function(){
    var chatText = document.getElementById("this-is-the-element-I-want").value;
} 
```

当然，请确保您尝试从中检索信息的元素具有 id。

```
<input type="text" name="chat" id="this-is-the-element-I-want"> 
```

编辑：代码缩进和清晰度

# java - 试图让 JTable + JScrollPane 滚动

> ID：13115400
> 
> 赞同：2
> 
> 时间：2012-10-29T03:04:08.400
> 
> 标签：java, swing, jtable, jscrollpane

我已经完成了 Google 搜索，并尝试实现了许多关于 JTable 和 JScrollPane 的不同解决方案。以下是我遇到的问题的自包含示例。我希望能够有一个带有这些表的水平滚动条。您的帮助将不胜感激：

```
package org.examples;

import java.awt.EventQueue;
import java.awt.Frame;
import java.awt.Rectangle;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JViewport;
import javax.swing.ListSelectionModel;
import javax.swing.table.AbstractTableModel;

public class TableTest extends JFrame {

    private JTable tableTest_1;
    private ArrayListStringTableModel tableTestModel_1;

    private JTable tableTest_2;
    private ArrayListStringTableModel tableTestModel_2;

    private JScrollPane tableTestScrollPane_1;
    private JScrollPane tableTestScrollPane_2;

    private class ArrayListStringTableModel extends AbstractTableModel {

        /**
         * 
         */
        private static final long serialVersionUID = 3071398398073956893L;

        private List <String> listOfStrings;

        private String[] columnNames = {""};

        public ArrayListStringTableModel (String[] lColumnNames) {
            columnNames = lColumnNames;
            listOfStrings = new ArrayList<String>();
        }

        public void addString (String lString) {
            String localString = lString;
            listOfStrings.add(localString);
        }

        public int getColumnCount () {
            return columnNames.length;
        }

        public int getRowCount () {
            return listOfStrings.size();
        }

        public String getColumnName (int col) {
            return columnNames[col];
        }

        public Object getValueAt (int row, int column) {
            Object returnObject = null;
            String localString = listOfStrings.get(row);
            switch (column) {
            case 0 :
                returnObject = (Object)localString;
                break;
            }
            return returnObject;
        }

    }

    /**
     * Initialize the contents of the frame.
     */
    public TableTest() {

        String[] rows = {"Damage Resistance (only vs. Head Shots)  Physical Damage Reduction, Resistant, 75% ; Only Works Against Head Shots Rare attack , Only Amyklai can use   Energy Damage Reduction, Resistant, 75% ; Only Works Against Head Shots Rare attack , Only Amyklai can use",
                "Mental Defense (10 points total),Only Amyklai can use",
                "Sight Group Flash Defense (5 points),Only Amyklai can use",
                "Resistant Protection (10 PD/10 ED),STR Min 18 , Costs Half Endurance",
                "Banded Mail Resistant Protection (8 PD/8 ED)"
        };

        String[] columns = {"Damage"};

        tableTestModel_1 = new ArrayListStringTableModel(columns);
        tableTestModel_2 = new ArrayListStringTableModel(columns);

        // Set up the main window frame
        setTitle("Table Test");
        setSize(435, 375);
        getContentPane().setLayout(null);

        for (int i=0; i <= 4; i++) {
            tableTestModel_1.addString(rows[i]);
            tableTestModel_2.addString(rows[i]);
        }
        tableTest_1 = new JTable(tableTestModel_1);
        tableTest_1.setBounds(new Rectangle(10, 10, 395, 250));
        tableTest_1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        tableTestScrollPane_1 = new JScrollPane(tableTest_1);
        tableTestScrollPane_1.setBounds(10, 10, 405, 80);
        tableTestScrollPane_1.setColumnHeaderView(tableTest_1);

        tableTest_2 = new JTable(tableTestModel_2);
        tableTest_2.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        tableTest_2.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        tableTestScrollPane_2 = new JScrollPane(tableTest_2);
        tableTestScrollPane_2.setBounds(10, 100, 200, 80);

        JViewport viewport = new JViewport();
        viewport.setView(tableTest_2);
        viewport.setPreferredSize(tableTest_2.getPreferredSize());
        tableTestScrollPane_2.setRowHeaderView(viewport);
        tableTestScrollPane_2.setCorner(JScrollPane.UPPER_LEFT_CORNER, tableTest_2.getTableHeader());

        getContentPane().add(tableTestScrollPane_1);
        getContentPane().add(tableTestScrollPane_2);

    }   

    /**
     * @param args
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    TableTest testtableWindow = new TableTest();
                    testtableWindow.setVisible(true);                                                   
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T03:13:45.597

这是将表格移动到没有滚动条的滚动窗格列标题位置...摆脱它...

```
tableTestScrollPane_1.setColumnHeaderView(tableTest_1); 
```

这实际上是`tableTest_2`从滚动窗格中删除并将其放置在新的视口中并将其添加到行标题中......没有滚动条。

```
viewport.setView(tableTest_2);
...
tableTestScrollPane_2.setRowHeaderView(viewport); 
```

一个组件只能属于一个父...

尝试类似的东西；

```
tableTest_1 = new JTable(tableTestModel_1);
tableTest_1.setBounds(new Rectangle(10, 10, 395, 100));
tableTest_1.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
tableTestScrollPane_1 = new JScrollPane(tableTest_1);

tableTest_2 = new JTable(tableTestModel_2);
tableTest_2.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
tableTest_2.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
tableTestScrollPane_2 = new JScrollPane(tableTest_2);

getContentPane().add(tableTestScrollPane_1);
getContentPane().add(tableTestScrollPane_2); 
```

# android - Android PopupWindow showAsDropDown() 无法正常工作

> ID：13115401
> 
> 赞同：16
> 
> 时间：2012-10-29T03:04:20.670
> 
> 标签：android, popupwindow

我正在使用带有 showAsDropDown(anchor) 的 PopupWindow。当锚点位于屏幕顶部时，它可以正常工作，但是当位于屏幕底部时，什么都没有显示。根据 PopupWindow.showAsDropDown() 的文档，这应该可以工作：

[http://developer.android.com/reference/android/widget/PopupWindow.html#showAsDropDown%28android.view.View%29](http://developer.android.com/reference/android/widget/PopupWindow.html#showAsDropDown%28android.view.View%29)

“在锚定到锚视图左下角的弹出窗口中显示内容视图。如果屏幕上没有足够的空间来完整显示弹出窗口，则此方法会尝试找到要滚动的父滚动视图。如果不能滚动父滚动视图，弹出窗口的左下角固定在锚视图的左上角。”

据推测，弹出窗口总是锚定在锚视图的左下角。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-24T04:29:33.217

你可以试试这个..可能有帮助

```
mWindow.showAtLocation(mRootView, Gravity.BOTTOM|Gravity.LEFT, 0, distanceFromTop); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-03T15:59:31.623

我知道这是一个旧线程，但我想我会发布我的解决方案。看起来您必须在调用 showAsDropDown()*之前显式设置 popupWindow 的宽度和高度。*

```
 menuLayout.measure( View.MeasureSpec.UNSPECIFIED, 
                        View.MeasureSpec.UNSPECIFIED );
    int height = menuLayout.getMeasuredHeight();
    int width = menuLayout.getMeasuredWidth();
    popupMenu.setWidth( width );
    popupMenu.setHeight( height );

    popupMenu.showAsDropDown( clickedCell ); 
```

在这种情况下 menuLayout 是 popupWindow 中显示的视图。

# c++ - C ++将向量项转换为单个字符串错误？

> ID：13115403
> 
> 赞同：0
> 
> 时间：2012-10-29T03:04:35.613
> 
> 标签：c++

所以我有一个函数，一个被调用`KaylesPosition`的类在哪里：`vector<int>``piles`

```
// Produces a key to compare itself to equivalent positions     
std::string KaylesPosition::makeKey(){
  std::vector<int> temp(piles.size());
  for (int i = 0;i<piles.size();i++){
    temp[i]=piles[i];
  }

  std::sort (temp.begin(),temp.end());
  std::string key = "" + temp.at(0);
  for (int i=1 ; i<temp.size() ; i++){
    key.push_back('.');
    key.push_back(temp.at(i));
  }

  return key;
} 
```

我的预期输出应该是`piles`按顺序排列的所有元素，用句点分隔。但是，相反，我`key`以“_M_range_check”的形式返回。我已经使用 std::string.append() 尝试过这个，我得到一个空字符串或一个句点。如何让这个函数`piles`按预期返回一个包含所有值的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:11:14.467

问题似乎在这里：

```
key.push_back(temp.at(i)); 
```

您正在尝试将整数附加到字符串而不首先获取整数的字符串表示形式。尝试将该行替换为：

```
key += std::to_string(temp.at(i)); // This will only work if your compiler supports C++11 
```

如果你的编译器不支持 C++11，试试这个（别忘了`#include <sstream>`）：

```
std::ostringstream o;
o << temp.at(i);
key += o.str(); 
```

或者，如果你可以选择使用 Boost (http://boost.org/)，试试它的 lexical_cast：

```
key += boost::lexical_cast<std::string>(temp.at(i)); 
```

之所以首先编译此代码，是因为它`push_back`接受 a`char`作为其参数，并且您传递的是`int`转换为 char 的 a （尽管在这种情况下我希望编译器会发出警告）。

PS：同样适用于线路

```
 std::string key = "" + temp.at(0); 
```

# php - PHP 正则表达式字符串返回两个相同的数组

> ID：13115408
> 
> 赞同：1
> 
> 时间：2012-10-29T03:05:41.583
> 
> 标签：php, regex, preg-match-all

我在这里有一个正则表达式查询来提取页面中的所有标签。它看起来像这样：

```
preg_match_all('%<tr[^>]++>(.*?)</tr>%s', $pageText, $rows); 
```

问题在于，虽然它确实在返回数组中找到了页面上的所有标签，但它实际上返回了一个多维数组，其中第一个数组的每个条目都包含一个包含所有匹配项的数组。换句话说，它给了我第一个数组的多个相同副本，即我真正想要的那个。

请帮忙？

编辑：也相关：我不允许在这个应用程序中使用 DOM，尽管它是一种更容易（和更好）的处理方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:30:40.867

试试这个：

```
preg_match_all('~<tr(?:\\s+[^>]*)?>(.*?)</tr>~si', $pageText, $rows);
var_dump($rows[1]); 
```

**不要使用 % 来包装正则表达式。**`printf()`它是一个为类似功能保留的字符，并且在 Pattern 的末尾`%s`或结尾处，它可能会非常令人困惑。`%i`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:35:43.660

您实际上要问的是`$row[0]`列表，它再次冗余地包含`<tr>...</tr>`blob。如果您只关心`(.*?)`内部数据，则使用`\K`重置完整匹配。

```
preg_match_all('=<tr\b[^>]*+>(.*?)</tr>\K=s', $pageText, $rows); 
```

完全摆脱是不可能的`$row[0]`。您将不得不忽略它，并`$row[1]`单独使用它。

# ruby-on-rails - Jruby Rails 独立战争文件 ClassNotFoundException

> ID：13115409
> 
> 赞同：1
> 
> 时间：2012-10-29T03:06:19.553
> 
> 标签：ruby-on-rails, jruby, war

我是经验丰富的 ROR 开发人员，但对 JRuby 不熟悉。我正在尝试在 Jruby 中创建 Rails 应用程序，然后使用 Warbler 制作可执行的 WAR 文件。

```
$warble executable war 
```

它创建了一个 WAR 文件，但是当我尝试运行它时

```
$java -jar myapp.war 
```

它只是抛出这个错误。

```
error: java.lang.ClassNotFoundException: winstone.Launcher 
```

我在带有 RVM 的 Ubuntu 上使用 JRuby 1.6.8，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:24:36.787

Warbler 在执行的时候会为你下载这个依赖`warble executable war`，所以在那个阶段一定是出了什么问题。这可能是一个莺虫错误，您使用的是什么版本？

以下是一些线索：

*   winstone jar 是在下面下载的`~/.m2/repository/org/jenkins-ci/winstone`吗？
*   网络服务器是否正确打包在您的战争中？

    `jar tvf your.war | grep webserver.jar`

*   `config/warble.rb`通过编辑 warbler 配置并添加以下内容来尝试不同的服务器：

    `config.server = 'jetty'`

    （如果您还没有配置，请运行`warble config`；这会创建`config/warble.rb`）

*   尝试卸载`warbler`gem，然后重新安装。

# android - 为什么我创建的位图总是泄漏内存？

> ID：13115414
> 
> 赞同：1
> 
> 时间：2012-10-29T03:07:38.213
> 
> 标签：android, memory-leaks, bitmap

我正在尝试使用反射创建一个可绘制对象，这是我的代码：

```
public Drawable createReflectedImage(Drawable d) {

    int width = d.getIntrinsicWidth();
    int height = d.getIntrinsicHeight();
    Bitmap originalImage = Bitmap.createBitmap(width, height,
            Config.ARGB_8888);
    d.setBounds(0, 0, width, height);
    Canvas canvas = new Canvas(originalImage);
    d.draw(canvas);

    final int reflectionGap = 4;

    Matrix matrix = new Matrix();
    matrix.preScale(1, -1);

    Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0,
            height / 2, width, height / 2, matrix, false);

    Bitmap bitmapWithReflection = Bitmap.createBitmap(width,
            (height + height / 2), Config.ARGB_8888);

    canvas = new Canvas(bitmapWithReflection);

    canvas.drawBitmap(originalImage, 0, 0, null);

    Paint deafaultPaint = new Paint();
    canvas.drawRect(0, height, width, height + reflectionGap, deafaultPaint);

    canvas.drawBitmap(reflectionImage, 0, height + reflectionGap, null);

    Paint paint = new Paint();
    LinearGradient shader = new LinearGradient(0,
            originalImage.getHeight(), 0, bitmapWithReflection.getHeight()
                    + reflectionGap, 0x70ffffff, 0x00ffffff,
            TileMode.MIRROR);

    paint.setShader(shader);

    paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));

    canvas.drawRect(0, height, width, bitmapWithReflection.getHeight()
            + reflectionGap, paint);
    BitmapDrawable drawable = new BitmapDrawable(getContext()
            .getResources(), bitmapWithReflection);
    originalImage.recycle();
    reflectionImage.recycle();
    return drawable;
} 
```

每次`createReflectedImage`调用时都会显示以下日志，即使我只是在此函数结束时返回 null。

```
10-29 10:56:48.541: I/dalvikvm-heap(23989): Grow heap (frag case) to 19.332MB for 960016-byte allocation 
```

谁能帮我弄清楚这个内存泄漏是怎么发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:15:29.977

这不是内存泄漏。每个 Android 设备都有每个应用程序的最大堆大小。出于性能原因，Android 不会为每个应用程序分配该大小，而是等到应用程序需要更多内存并分配它。您看到的这条消息是 DVM 在您的应用程序请求时分配更多内存并且完全正常。

在内存泄漏期间，您会看到 GC 过于频繁地启动，这可能会在 logcat 中向您提示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:10:27.563

这是谷歌所说的：

移动设备通常具有受限的系统资源。Android 设备可以只有`16MB of memory available`一个应用程序。Android 兼容性定义文档 (CDD)，第 3.7 节。虚拟机兼容性为各种屏幕尺寸和密度提供所需的最低应用程序内存。应优化应用程序以在此最小内存限制下执行。但是，请记住，许多设备都配置了更高的限制。

位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），会立即耗尽某些设备的每个应用程序的限制。

尝试在此链接中阅读[Android 开发人员](http://developer.android.com/training/displaying-bitmaps/index.html)

# bash - 如何在 bash 脚本中超时？

> ID：13115419
> 
> 赞同：0
> 
> 时间：2012-10-29T03:08:29.007
> 
> 标签：bash, shell, timeout

> **可能的重复：**
> [在 bash 中超时命令而没有不必要的延迟](https://stackoverflow.com/questions/687948/timeout-a-command-in-bash-without-unnecessary-delay)

所以这就是我想要做的 -

```
for test in `ls Tests`; do

for file in `ls FileFolder`; do

output=`python devcap $test $file`

echo $test $file $output >>result.txt

done

done 
```

如果 $output 花费的时间超过 5 秒并移动到下一个 $file，我该如何超时？

我也可以将 stderr 重定向到 result.txt 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:12:56.450

尝试这个：

```
for test in `ls Tests`; do

for file in `ls FileFolder`; do

output=`python devcap $test $file`

sleep 5

echo $test $file $output >>result.txt

done

done 
```

# javascript - 动态设置 oncomplete 事件

> ID：13115424
> 
> 赞同：0
> 
> 时间：2012-10-29T03:09:58.880
> 
> 标签：javascript, ajax4jsf

在我的 JSF 页面中，在`<script>`标签内我有以下内容。

> `<script>`
>     `function func() {`
>         `alert("Button clicked");`
>     `}`
>     `window.onload = function() {`
>        `#{rich:element("btn")}.onclick = func;`
>     `}`
> `</script>`

我在页面正文中有一个 a4j 按钮。

> `<a4j:commandButton id="btn" value="save" />`

加载页面后，我单击按钮并成功显示警报。但是我现在想要的是为按钮`func`的**oncomplete**事件设置功能。我尝试了以下方式，但没有奏效。请帮忙。

> `window.onload = function() {`
>        `#{rich:element("btn")}.oncomplete = func;`
> `}`

我更喜欢没有 jQuery 的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:12:02.217

我终于找到了解决方法。
我最初将函数添加到`oncomplete`事件中，并在运行时更改函数的主体。

> `<a4j:commandButton id="btn" value="save" oncomplete="func()"/>`

然后在我的内部`<script></script>`我添加了以下代码。

> `<script>`
>      `var func;`
>      `window.onload = function() {`
>           `func = function(){`
>                `alert("Button clicked");`
>           `}`
>      `}`
> `</script>`

# python - Python 无法在 C:\Windows\System32\oobe\Info\backgrounds 中打开文件

> ID：13115425
> 
> 赞同：4
> 
> 时间：2012-10-29T03:10:09.000
> 
> 标签：python, windows, pygame

Windows 7 x64，Python 2.7。试图制作一个脚本来自动更改登录背景。我正在使用 pygame，它是 python 的 SDL 包装器，但代码应该是不言自明的：

```
import pygame
import os
image = pygame.image.load(os.path.normpath("C:/Users/nivekuil/Desktop/backgroundDefault.jpg"))
surface = pygame.Surface((1366,768))
surface.fill((255,255,255))
surface.blit(image, (0,0))
surface = pygame.image.save(surface, os.path.normpath("C:/Windows/System32/oobe/Info/backgrounds/backgroundDefault.jpg")) 
```

返回错误：

```
Traceback (most recent call last):
File "C:/Users/nivekuil/Documents/background.py", line 8, in <module>
surface = pygame.image.save(surface, os.path.normpath("C:/Windows/System32/oobe/Info/backgrounds/backgroundDefault.jpg"))
error: SaveJPEG: could not open C:\Windows\System32\oobe\Info\backgrounds\backgroundDefault.jpg 
```

我认为这不是 pygame 的问题，因为如果我将它保存到桌面之类的地方，它就可以正常工作。我还以管理员身份运行 IDLE，并且我还在任务计划程序中将程序作为任务运行，并选中了“以最高权限运行”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T06:33:48.990

找到了解决方案！根据[这篇](http://www.driveridentifier.com/blog/?p=89)文章，我将 /System32/ 替换为 /Sysnative/，一切都很好。

# javascript - 信息窗口不工作

> ID：13115430
> 
> 赞同：0
> 
> 时间：2012-10-29T03:10:35.120
> 
> 标签：javascript, google-maps-api-3, click, geojson

我一直试图解决这个问题几个小时，但没有运气。希望有人能给我一个解决方案。

我有几个多边形，我想在单击它们时从 siteName 显示它们的值。我没有收到错误消息，但也没有显示信息窗口。

预先感谢您的帮助。

```
 <!DOCTYPE html>
 <html>
<head>
<p id="demo">coordinates</p>
</br>
<p id="coords">coordinates</p>
<style>
  html, body, #map_canvas { margin: 0; padding: 0; height: 100%; }
</style>
<script
  src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=visualization,MVCObject">
</script>
<script>
    var map;

    function initialize() {
        var kansas_city = new google.maps.LatLng(39.00495613,-94.64780668);
        var mapOptions = {
        zoom: 10,
        center: kansas_city,
        mapTypeId: google.maps.MapTypeId.TERRAIN
        };

    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    // Create a <script> tag and set the geoJSON file as the source.
    var script = document.createElement('script');
    // (In this example we use a locally stored copy instead.)
    script.src = 'sector.json';
    document.getElementsByTagName('head')[0].appendChild(script);
    }

    // Loop through the results array and place a marker for each
    // set of coordinates.
    var siteNames;
    window.sector_callback = function(results) { 
        for (var i = 0, len = results.features.length; i < len; i++) {
            var coords = results.features[i].geometry.coordinates[0];
            siteNames = results.features[i].properties.Name; // added for site names
            var path = [];

            for ( var j = 0, len2 = coords.length; j < len2; j++ ){ // pull out each set of coords and create a map object
                path.push(new google.maps.LatLng(coords[j][1], coords[j][0]));
            }

            var polygons = new google.maps.Polygon({
            path: path,
            map: map
            });

            var contentString = siteNames;
            var infowindow = new google.maps.InfoWindow({

            });                     

            google.maps.event.addListener(polygons, 'click', function() {
                infowindow.open(map,polygons);
                content: contentString
            });

            google.maps.event.addListener(polygons, 'mouseover', function() {
            var currentPolygon = this;

            currentPolygon.setOptions({ // setOptions is a method and properties below
                fillOpacity: 0.45,
                fillColor: "#FF0000",

                })
            });

            google.maps.event.addListener(polygons, 'mouseout', function() {
            var currentPolygon = this;
            currentPolygon.setOptions({ 
                fillOpacity: 0.35,
                fillColor: "#000000"
                })
            });             
        }
    }
 </script>
 </head>
 <body onload="initialize()">
  <div id="map_canvas"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:17:04.083

可能不是唯一的问题，但绝对是一个。文字`content: contentString`在茫茫荒野中徘徊；我想你想要这样：

```
var infowindow = new google.maps.InfoWindow({
    content: contentString
});                     

google.maps.event.addListener(polygons, 'click', function() {
    infowindow.open(map,polygons);
}); 
```

*编辑*

这是第二个问题：`infowindow`循环的每次迭代都会被覆盖。它需要被咖喱：

```
google.maps.event.addListener(polygons, 'click', (function(infowindow) {
        return function() {
            infowindow.open(map,polygons);
            content: contentString
        }
    })(infowindow)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:23:12.120

将信息窗口内容与多边形相关联的一种方法是使用[函数闭包](http://econym.org.uk/gmap/closure.htm)。如果您不将信息窗口与标记一起使用，您还需要设置显示信息窗口的位置，唯一允许的锚点（至少目前）是标记。

一种可能的“createClickablePoly”函数：

```
function createClickablePoly(poly, html) {
        google.maps.event.addListener(poly, 'click', function(evt) {
            infowindow.setContent(html);
            infowindow.setPosition(evt.latLng);
            infowindow.open(map);
        });
} 
```

[使用函数闭包的示例](http://www.geocodezip.com/v3_polygon_example_infoWindowA.html)

# jquery - 如何使 jQuery 使用包含重复 ID 的无效 HTML？

> ID：13115431
> 
> 赞同：1
> 
> 时间：2012-10-29T03:10:35.013
> 
> 标签：jquery

我有一个旧项目，其中包含带有重复 ID 的 HTML。将选择器从 id 切换到类需要很多工作，我可以用 JQuery 来做吗，特别是我知道要隐藏多少个 div。

```
<div id="d"></div>
<div id="d"></div>
<div id="d"></div> 
```

我想用一个动作把它们全部隐藏起来：

```
$('#d').hide(); 
```

但它只隐藏了第一个 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:13:19.720

ID 应该是唯一的。尝试设置一个类，然后基于它隐藏。

```
<div class="d"></div>
<div class="d"></div>
<div class="d"></div>

$('.d').hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:13:31.270

你用 id 隐藏了，因为你有非唯一的 id，所以这不起作用。为它们添加一个 data-* 属性或一个类作为标志。

```
<div data-someattributename="flag" id="d">

$('div[data-someattributename]').hide(); 
```

由于您的编辑：

```
$.each($('div'), function() {
    If ($(this).attr('id')=="d") {
        $(this).hide();
    }
}); 
```

我不确定 ID 是否在第一个之后被擦除，因为它们是重复的，但如果不是，这应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T03:18:14.937

使用 class 而不是 id 属性，因为每个元素的 id 必须是唯一的：

```
 <div class="d"></div>
    <div class="d"></div>
    <div class="d"></div> 
```

然后：

```
 $(document).ready(function(){
            $(".d").hide();
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T03:18:31.540

您可以通过父类或 div 来执行此操作

```
(".parent_class/id>div").hide(); 
```

或者

正如布兰登所说的那样添加一个类

最重要的是 id 必须是唯一的

每个 ID 属性必须在文档中具有唯一值。

id和类选择器的区别

唯一真正的区别是何时应该使用它们。ID 选择器通常保留给页面上出现一次的内容。例如，如果您有一个包含多个主题标题的页面，但您希望有一个特定的主题标题从其他主题标题中脱颖而出，那么您将为该特定主题标题创建一个 ID 选择器规则。ID 选择器为其提供了唯一的名称和标识，因此您可以更改该主题标题而不会影响集合的其余部分。

如果您要验证多次使用相同 ID 的页面，则会出现错误

# python - 在python中反转切片

> ID：13115435
> 
> 赞同：6
> 
> 时间：2012-10-29T03:11:13.590
> 
> 标签：python, list, slice

有什么简单的方法可以在 python 中反转列表切片吗？给我*除了*一片以外的所有东西？例如：

鉴于`a = [0,1,2,3,4,5,6,7,8,9]`我希望能够提取的列表，`[7,8,9,0,1,2]`即除 a[3:7] 之外的所有内容。

从逻辑上考虑，我认为 a[-3:3] 会给我想要的东西，但它只返回一个空列表。

我更喜欢适用于 python 2 和 3 的解决方案

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T03:12:57.327

切片不会那样包装，但`a[-3:] + a[:3]`会给你那个列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T03:14:52.147

如果您愿意销毁列表（或它的副本），您可以删除您不想要的部分：

```
>>> a = [0,1,2,3,4,5,6,7,8,9]
>>> a[3:7] = []
>>> a
[0, 1, 2, 7, 8, 9] 
```

顺序与您要求的不同，尽管这对您来说可能并不重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T15:26:10.137

Itertools 是你的朋友：

```
itertools.islice(itertools.cycle(a),7,13) 
```

或者一般来说

```
itertools.islice(itertools.cycle(a),gapEnd,len(a)-gapLen) 
```

这是一个生成器，因此您可以获取列表，`list(...)`也可以在循环中使用它。作为生成器，它不会创建列表的额外副本，也不会破坏原始列表等。

```
>>> list(itertools.islice(itertools.cycle(a),7,13))
[7, 8, 9, 0, 1, 2] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T15:07:30.420

```
 1) b=a[7:10]+a[:3]
     [7, 8, 9, 0, 1, 2]
  2) c=list(set(a).difference([3,4,5,6]))
     [0, 1, 2, 7, 8, 9]

  3) lis=[i for i in a if i<3 or i >6]
     [0, 1, 2, 7, 8, 9]

   4) b=[3,4,5,6]
      c=[i for i in a if i not in b] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T03:51:24.430

顺序重要吗？

```
>>> [j for i,j in enumerate(a) if not 3<=i<7]
[0, 1, 2, 7, 8, 9] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T14:44:42.080

好的，所以这可能不是您想要的，但在您可能想要这样的切片的某些情况下很有用。

有两个重要的免责声明。

*   它不保持秩序
*   它删除重复的项目

`list(set(a).difference(a[3:7]))`

# android - 无法调试 NDK。奇怪的错误

> ID：13115439
> 
> 赞同：0
> 
> 时间：2012-10-29T03:12:28.413
> 
> 标签：android, android-ndk, ubuntu-12.04

我运行了 NDK 项目，然后键入命令。它会产生错误。我不知道如何解决它。

这是命令。

```
hieund@hieund:~/Programs/AndroidNDK/samples/hello-gl2$ $NDK_HOME/ndk-gdb
/home/hieund/Programs/AndroidNDK/build/core/build-local.mk:40: build/core/init.mk: No such file or directory
/home/hieund/Programs/AndroidNDK/build/core/build-local.mk:166: /add-application.mk: No such file or directory
/home/hieund/Programs/AndroidNDK/build/core/build-local.mk:174: /setup-imports.mk: No such file or directory
/home/hieund/Programs/AndroidNDK/build/core/build-local.mk:191: /build-all.mk: No such file or directory
make: *** No rule to make target `/build-all.mk'.  Stop.
ERROR: The device does not support the application's targetted CPU ABIs!
       Device supports:  armeabi-v7a armeabi
       Package supports: 
```

我检查了make的版本，没问题。

```
hieund@hieund:~/Programs/AndroidNDK/samples/hello-gl2$ make -version
GNU Make version 3.75, by Richard Stallman and Roland McGrath.
Copyright (C) 1988, 89, 90, 91, 92, 93, 94, 95, 96
    Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

Report bugs to <bug-gnu-utils@prep.ai.mit.edu>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:21:04.690

`The device does not support the application's targetted CPU ABIs!`您正在构建您的设备不支持的库。检查您的设备`CPU ABI`

```
String abi=Build.CPU_ABI;
Toast.makeText(CpuinfoActivity.this, "CPU ABI is :::"+abi, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:52:13.013

我认为问题是 ndk-gdb 找不到最新的品牌。此命令修复了问题：

```
export GNUMAKE=/usr/bin/make 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:40:52.720

`ndk-gdb`期望 Linux 上的特定环境。我按如下方式运行它：

```
 >ANDROID_NDK_ROOT=/etc/android-ndk-r8b GNUMAKE=/etc/android-ndk-r8b/prebuilt/linux-x86/bin/make ndk-gdb 
```

`/usr/bin/make`如果您愿意，可以使用。

# task - VC++ PPL，将调度程序分配给 task_group

> ID：13115440
> 
> 赞同：2
> 
> 时间：2012-10-29T03:12:31.530
> 
> 标签：task, scheduler, ppl

假设我们有一个类：

```
class Foo
{
private:
 Concurrency::task_group _tasks;  
}; 
```

如何将调度程序分配给此 task_group？我不想使用默认调度程序，因为我还在代码的其他地方使用了 parallel_for。

task_group 将通过调度程序设置其最大并发级别，以根据小时使用所有内核或它们的子集。应用程序可能会运行数小时，因此需要更改 maxconcurrency。

我在 PPL 中找不到这样做的好方法。在 .NET 中，这很容易——您所要做的就是设置 MaxDegreeOfParallelism。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:45:18.183

有几种解决方案：

1.  如果您使用 MSVS C++ 2012，则：

    ```
    _tasks.run([]()
    {
        Context::Oversubscribe(true);
        //
        // long time running task
        //
       Context::Oversubscribe(false);
    }); 
    ```

2.  如果您的 APP 在 Win7x64 或 Windows Server 2008 R2 上运行，请尝试[UMS](http://blogs.msdn.com/themes/blogs/generic/post.aspx?WeblogApp=nativeconcurrency&y=2010&m=07&d=26&WeblogPostName=the-promise-of-ums&GroupKeys=)：

    ```
    Scheduler::SetDefaultSchedulerPolicy( SchedulerPolicy(1, SchedulerKind, UmsThreadDefault) ); 
    ```

3.  最后。在创建新的繁重时间任务之前，使用新的超额订阅策略（放大 MaxConcurrency）创建新的当前调度程序。

    ```
    CurrentScheduler::Create( SchedulerPolicy(1, MaxConcurrency, 8) );
    _tasks.run([](){
        //
        // long time running task
        //
     });
    CurrentScheduler::Detach(); 
    ```

# iphone - 查找所有 .nib 并从路径中提取资源

> ID：13115445
> 
> 赞同：0
> 
> 时间：2012-10-29T03:13:11.630
> 
> 标签：iphone, ios, nib

我正在制作一个应用程序的原型，我希望有多个 .nib 布局文件，让朋友们尝试不同的布局，看看哪种布局最适合他们。

我已经有代码可以在已知 .nib 文件的硬编码数组之间正确切换，但我想全面扩展我的知识，所以我想我只是尝试编写一个可以在包中找到所有 .nib 文件的通用系统，所以我如果我添加新的 .nib 布局，则不必更改任何代码。

我看到给定资源的路径实际上是完整路径。就像是：

```
/var/mobile/Applications/69B85DBB-3B79-43F0-B88E-FFFF/TestApp.app/en.lproj/some_asset.nib 
```

我尝试使用完整路径名加载 .nib ，但据我所知它不起作用。似乎唯一可行的方法是剥离路径和扩展名以获取资源名称？

如果是这样，那么我有以下内容：

```
NSArray *availableNibs = [[NSBundle mainBundle] pathsForResourcesOfType:@"nib"
                                                            inDirectory:nil];

// Just grab the first .nib as a test and remove the .nib extension
NSString *aNib = [availableNibs[0] stringByReplacingOccurrencesOfString:@".nib"
                                                             withString:@""];

// Start at the end of the string and find the first '/'
for (NSInteger index = [aNib length] - 1; index >= 0; --index) {
    if ([aNib characterAtIndex:index] == '/' ) {
        // Get us down to the resource name - return string starting after that '/'
        aNib = [aNib substringFromIndex:index + 1];
        break;
    }
}
// have resource name in 'aNib', so open
self.viewController = [[My_ViewController alloc] initWithNibName:aNib
                                                          bundle:nil]; 
```

也许我的期望是错误的，但这似乎比我预期的要笨拙？有没有更简单的方法来提取资源名称，也许使用更少的代码？

一般来说，在尝试做这种事情时我可能会意识到其他任何陷阱，或者这是否是大致正确的方法？

提前喝彩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:19:22.540

尝试

```
NSString *nibPath = availableNibs[0];
NSString *nibName = [[nibPath lastPathComponent] stringByDeletingPathExtension];
self.viewController = [[My_ViewController alloc] initWithNibName:nibName bundle:nil]; 
```

# c# - 如何处理 TcpClient 与 TcpListener 断开连接

> ID：13115451
> 
> 赞同：2
> 
> 时间：2012-10-29T03:14:04.147
> 
> 标签：c#, .net, networking, tcp, client

我有一个使用 TcpClient 的客户端和一个使用 TcpListener 的服务器。当客户端与服务器断开连接时，我该如何处理？如果程序崩溃了，我该如何处理断开连接呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:44:57.857

如果您的程序崩溃，操作系统中所有当前的连接都将被关闭。

使用 TCPClient，您可以将其分配给您自己的类（在构造函数等中），并从您的类中产生一个用于断开连接的事件。

然后在连接到达时在您的侦听器中创建您的类，在某处添加对该类的引用（列表、字典等）。附加事件并愉快地进行。

如果您想在套接字级别处理服务器连接断开连接，通常只有当您想“写入”到套接字时，您才能真正检测到它不再在远程端连接，除非您正确发送了正常断开连接。

# javascript - 使用 Ember.js，我如何在启动时收集由一个类组成的所有 mixin？

> ID：13115452
> 
> 赞同：0
> 
> 时间：2012-10-29T03:14:09.277
> 
> 标签：javascript, ember.js

具有三个 mixin 的类的示例：

```
Object = Ember.Object.extend( mixin1, mixin2, mixin3 {
                 init: function(){
                     this._super();
                     var myMixins = this.gatherMixins();
                 },

                 gatherMixins: function(){
                     // what goes in here?
                 }

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:00:46.247

你可以这样做：

```
gatherMixins: function() {
  Ember.Mixin.mixins(this).forEach(function (mixin) {
    Ember.Logger.log(mixin);
  });
} 
```

[小提琴](http://jsfiddle.net/RWD9S/4/)

以下代码和平列出了您的 mixin 的所有属性

```
var mixinKeys = Ember.A();
Ember.Mixin.mixins(this).forEach(function (mixin) {
  Ember.Logger.log('mixin: ' + mixin.toString());     
  mixin.keys().forEach(function (key) {
    if (!mixinKeys.contains(key)) {
      mixinKeys.pushObject(key);
    }
  });
});
mixinKeys.forEach(function(key) {
  Ember.Logger.log(key);            
}); 
```

# java - java中的方法之前的'int'有什么用？

> ID：13115454
> 
> 赞同：-5
> 
> 时间：2012-10-29T03:14:23.220
> 
> 标签：java

在下面的代码中我们可以直接使用'calculate()'，但是在calculate()之前'int'有什么用呢？

```
class Rectangle{
    int length, breadth;
    void show(int x, int y){
        length = x;
        breadth = y;
    }
    int calculate(){
        return(length * breadth);
    }
}
public class EnterValuesFromKeyboard{
    public static void main(String[] args) {
        Rectangle rectangle = new Rectangle();
        int a = Integer.parseInt(args[0]);
        int b = Integer.parseInt(args[1]);
        rectangle.show(a, b);
        System.out.println(
              " you have entered these values : " +  a  + " and " +  b);
        int area = rectangle.calculate();
        System.out.println(" area of a rectange is  : " + area);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:14:56.373

告诉`return`方法的类型

```
int calculate(){
  return(length * breadth);
  } 
```

在这种情况下，它告诉调用者该`calculate()`方法返回一个`int`值。

我建议阅读[java基础知识](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:16:11.277

函数中的第一个关键字指定返回值的类型。所以在这种情况下

```
 int calculate(){
  return(length * breadth);
 } 
```

**int**建议返回的值是一个整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T03:19:46.710

调用 calculate() 方法后，结果将是 int 类型。这有助于您将该方法用作值。eg: int a = calculate() // calculate() 的结果将被赋值给变量 a。
xyz = a + calculate() + b // 计算的返回值将加入公式等。

# java - response.sendError() 显示 Tomcat 默认错误页面而不是 web.xml 指定的错误页面

> ID：13115459
> 
> 赞同：3
> 
> 时间：2012-10-29T03:15:03.317
> 
> 标签：java, tomcat, servlets

我正在尝试使用 servlet 来处理简单 Web 应用程序的错误，并且它对于在我的 web.xml 中使用异常类型专门定义的任何错误都非常有效。但是，如果我尝试使用 HttpServletResponse.sendError 方法发送 HTML 错误代码，web.xml 似乎并没有发现错误，而只是显示 Tomcat 针对该特定 HTML 状态代码的默认错误页面。

我的错误处理 servlet 有几个“包罗万象”的通用错误页面，如果它与特定的错误代码不匹配，它将生成，所以错误根本没有进入 servlet，我完全困惑于为什么它会这样。

这是我的 web.xml 中的相关片段：

```
<error-page>
  <error-code>400</error-code>
  <location>/Error</location>
</error-page>
<error-page>
  <exception-type>java.lang.Throwable</exception-type>
  <location>/Error</location>
</error-page> 
```

这是我试图在 servlet 中发送的错误示例：

```
if (thing.getSizeOfThing() == null || thing.getQuantity() <= 0) {
    response.sendError(400);
} 
```

我的错误处理 servlet 将根据错误代码或异常类型以及生成错误的 servlet 显示相关的错误页面。正如我所提到的，这对于异常非常有用，而对于使用 sendError 方法发送的错误则根本不起作用。

我已经确保响应中最小内容大小的问题不是问题（或不应该是问题），因为我没有收到浏览器特定的错误页面，而是 tomcat 的通用 400 错误页面。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:17:59.057

解决了：

这是我在错误处理 servlet 中忽略的 NullPointerException 的问题，因此 tomcat 默认为其自己的错误页面。

# java - 如何创建一个类似于 System.in 的 InputStream

> ID：13115460
> 
> 赞同：2
> 
> 时间：2012-10-29T03:15:03.140
> 
> 标签：java

我正在尝试创建一个 InputStream 类，它的行为类似于 System.in InputStream 但可以以编程方式添加到（可以动态添加到的无限 InputStream ）

如果您无法理解我的意思，这就是我所写并尝试过的

```
 public class QueuedInputStream extends InputStream {

        private LinkedList<Character> list;

        public QueuedInputStream() {
            list = new LinkedList<Character>();
        }

        @Override
        public int read() throws IOException {
            while (list.isEmpty()) {
                try {
                    Thread.sleep(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            int value = (byte)list.get(0).charValue();
            list.remove();
            return value;
        }

        public void queue(String s) {
            char[] chars = s.toCharArray();
            for(int i = 0; i < chars.length; i++) {
                list.add(chars[i]);
            }
        }

    } 
```

我在正确的轨道上吗？还是我尝试这样做完全错了？如果您想让我解释更多，请随时询问

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T03:21:42.203

[管道输入流](http://docs.oracle.com/javase/7/docs/api/java/io/PipedInputStream.html)：

> 管道输入流应该连接到管道输出流；然后，管道输入流提供写入管道输出流的任何数据字节。

[字节数组输入流](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html)：

> ByteArrayInputStream 包含一个内部缓冲区，其中包含可以从流中读取的字节。（你在构造过程中给出一个数组，流将从它读取。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T03:27:17.660

你的方法有一些优雅，但不是围绕时序逻辑。您应该通过 a 来支持您的流，`BlockingQueue`这样您就不必进行令人讨厌的睡眠。如果您调用`take()`阻塞队列，则调用将阻塞，直到有输入。

但是您可能已经可以使用一些实用程序。一种选择是使用`PipedInputStream`and `PipedOutputStream`，然后`PipedOutputStream`像任何其他一样写入`OutputStream`。这是一个完整的例子：

```
public static void main(String[] args) throws IOException, InterruptedException {
    PipedOutputStream pipedOutputStream = new PipedOutputStream();
    final PipedInputStream in = new PipedInputStream(pipedOutputStream);

    PrintWriter writer = new PrintWriter(pipedOutputStream, true);

    new Thread(new Runnable() {
        @Override
        public void run() {
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            try {
                for (String line; (line = reader.readLine()) != null; ) {
                    System.out.println(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }).start();

    for (int i = 0; i < 1000; i++) {
        writer.println(i);
        Thread.sleep(1000);
    }
} 
```

# c# - 异步读写文件

> ID：13115466
> 
> 赞同：2
> 
> 时间：2012-10-29T03:16:24.847
> 
> 标签：c#, asynchronous, windows-8, .net-4.5

我想将一些内容写入本地文件，然后在文本块中表示它。我有两种方法，CreateFile 和 Output，第一种方法使用 WriteTextAsync 方法将内容写入文件，第二种方法使用 ReadTextAsync 方法读取内容。我一一调用了这两种方法，比如

```
CreateFile(data);
Output(file); 
```

file 是一个全局变量，CreateFile 方法将“数据”写入文件，Output 方法输出它的内容。不幸的是，它并不总是有效，有时会出现“对象引用未设置为对象”的异常，经过研究，我发现有时文件为空，我认为可能是由于执行了输出方法，但文件创建未完成。所以如果我添加一个断点，它总是有效的。任何人都可以帮助我在文件创建完成后如何让输出方法执行？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T04:10:30.617

原因之一可能是**文件尚未创建**，当第二种方法尝试读取它时：

![图1](../Images/9b877607a09b9723690f5fad77318217.png)

因此，第二种方法必须**等待第一种方法完成**：

![图 2](../Images/146963de6d311b588ff96620f5caf33f.png)

有几种方法可以实现这一目标。

其中之一是使用任务[并行库中的](http://msdn.microsoft.com/en-us/library/dd460717.aspx)[**任务类**](http://msdn.microsoft.com/en-us/library/System.Threading.Tasks.Task.aspx)及其[**等待方法**](http://msdn.microsoft.com/en-us/library/dd235635.aspx)：[](http://msdn.microsoft.com/en-us/library/dd235635.aspx)

 **```
var task = new Task(() => CreateFile(data));
task.Wait(); 
```

另一个，例如[ManualResetEvent 类](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)：

> **ManualResetEvent**允许线程通过信号相互通信。通常，这种通信涉及一个线程必须在其他线程可以继续之前完成的任务。

其他一些相关链接：

*   [Joseph Albahari 网站](http://www.albahari.com/)上一篇关于C# 多线程的精彩文章： [http ://www.albahari.com/threading/](http://www.albahari.com/threading/)

*   [C# 常见问题：使用异步进行文件访问](http://blogs.msdn.com/b/csharpfaq/archive/2012/01/23/using-async-for-file-access-alan-berman.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:31:18.097

由于您的方法调用异步方法，一个简单的解决方法是像这样调用您的方法：

```
await CreateFile(data);   // This waits for the method to complete before continuing.  
Output(file); 
```**

# c# - 什么可以替代 Windows 8 的桌面小工具？

> ID：13115469
> 
> 赞同：1
> 
> 时间：2012-10-29T03:17:02.320
> 
> 标签：c#, widget, windows-8, windows-desktop-gadgets

我期待使用 W8。我一直认为“动态图块”是 Android 小部件的直接模拟 - 即完全在小屏幕区域内显示其内容的小型自给自足应用程序......

但是我刚刚了解到事实并非如此，并且动态瓷砖不是为此而设计的...

我错过了什么吗？是否有一个特定的新功能可以用来编写“小部件”（如果您愿意，也可以使用 Vista 小工具）？（最好使用 C#） - 因此它可以与其他磁贴一起放置在“开始”屏幕上并显示实时信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:59:24.740

您需要开发一个 WinRT 应用程序。此[链接](http://msdn.microsoft.com/en-us/library/windows/apps/br211386)将让您开始了解如何完成，但它确实支持 XAML / C# 以及 HTML / Javascript。请记住，虽然动态磁贴并没有真正实时更新 - 它们每 30 分钟更新一次或通过推送提供程序更新。

# java - 解析时的线程

> ID：13115471
> 
> 赞同：0
> 
> 时间：2012-10-29T03:17:13.860
> 
> 标签：java, android

让我首先澄清我的问题。

我正在这样做，解析数据（使用 DOM）并将其绑定到我的列表视图上。一切正常，直到我发现需要很长时间才能做出回应。为了做到这一点，我想出了一个想法，我应该把它放在一个线程中。所以我添加了一个扩展线程的类。

我的解析代码

```
 public  void SetFriendString()
{
    XMLParser parser2 = new XMLParser(); 
    parser2.getXmlFromUrl(URL_HERE); 

      //HTTP POST
      String url_Getmembermob= URL_FBFRIEND ;
      //String xml_getMembermob=null;
      try {
      HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost(url_Getmembermob);

      List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4); 
      nameValuePairs.add(new BasicNameValuePair("oAuth", "Test123"));
      nameValuePairs.add(new BasicNameValuePair("""", modGen...));
      nameValuePairs.add(new BasicNameValuePair("", modGen....));
      nameValuePairs.add(new BasicNameValuePair("", "here"));

      //Log.i("nameValuePairs", "nameValuePairs=" + nameValuePairs);

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse httpResponse = httpclient.execute(httppost);

        HttpEntity httpEntity = httpResponse.getEntity();

        FBFRIENDS = EntityUtils.toString(httpEntity);    

        Button GetFriends =(Button) findViewById(R.id.btnAllFriends);
        GetFriends.setBackgroundDrawable(getResources().getDrawable(R.drawable.leftcornerclicked));
        KEY_FRIENDSDATA = FBFRIENDS;

        Log.i("xml-return",""+ FBFRIENDS);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace(); 
    }catch (ClientProtocolException e) { 
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

} 
```

并添加了这个类

```
 public class thread extends Thread {
        public void run() {
            SetFriendString();
            //SetMyRequestString();
            //SetMyFriendRequestString();
            pDialog.dismiss();
            }
        } 
```

现在我在我的 OnCreate 上调用这个类

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_friends);
    mContext = this;
    pDialog = new ProgressDialog(this);
    pDialog.setMessage("Loading All Merchants...");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        pDialog.show();
    //Set All Required data
    thread t = new thread();
    t.start(); 
```

现在我的应用程序强制关闭。使用调试器我发现线程跳过了我的方法。这是为什么？

```
10-29 11:13:29.411: E/AndroidRuntime(2463): FATAL EXCEPTION: main
10-29 11:13:29.411: E/AndroidRuntime(2463): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fb.connect/com.fb.connect.MyFriendsAdd}: java.lang.NullPointerException
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.os.Looper.loop(Looper.java:130)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at java.lang.reflect.Method.invokeNative(Native Method)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at java.lang.reflect.Method.invoke(Method.java:507)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at dalvik.system.NativeStart.main(Native Method)
10-29 11:13:29.411: E/AndroidRuntime(2463): Caused by: java.lang.NullPointerException
10-29 11:13:29.411: E/AndroidRuntime(2463):     at com.fb.connect.MyFriendsAdd.SetAllFacebookFriends(MyFriendsAdd.java:193)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at com.fb.connect.MyFriendsAdd.onCreate(MyFriendsAdd.java:145)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-29 11:13:29.411: E/AndroidRuntime(2463):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-29 11:13:29.411: E/AndroidRuntime(2463):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:29:53.620

我在这里看到的问题：

1.  `onCreate()`尚未完成，当您显示对话框时。
2.  `dismiss()`从 UI 线程以外的线程调用进度条。
3.  从方法更新`Button`，您在 UI 线程以外的线程上运行。

尝试使用`Handler`or `AsyncTask`。

NPE 位于`MyFriendsAdd.SetAllFacebookFriends`，因此您可以发布该代码，以准确查明特定原因。

# .htaccess - 用于缩短 URL 的 htaccess 规则

> ID：13115472
> 
> 赞同：0
> 
> 时间：2012-10-29T03:17:27.750
> 
> 标签：.htaccess

我正在尝试使用重写规则来使用 URL#1 屏蔽和访问 URL#2

```
URL#1 http://www.domain.com/user/username/send
URL#2 http://www.domain.com/user.php?user=username&action=send

URL#1 http://www.domain.com/user/username/receive
URL#2 http://www.domain.com/user.php?user=username&action=receive 
```

仅有的两个变量是用户名和发送/接收

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:23:43.740

您需要做的第一件事是将内容中的所有链接从包含**用户**和**操作**查询字符串的链接更改为具有干净外观的 URL（例如`http://www.domain.com/user/username/send`）的链接。然后，您需要将其添加到文档根目录（您的 webroot，`http://www.domain.com/`指向哪里）的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?user/([^/]+)/([^/]+)/?$ /user.php?user=$1&action=$2 [L,QSA] 
```

您的网站之外的链接（例如在 google 上）可能仍然指向带有查询字符串的 URL。如果是这样，您需要在外部 301 将它们的请求重定向到看起来干净的 URL：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD|POST)\ /user\.php\?user=([^&]+)&action=([^&\ ]+)
RewriteRule ^ /user/%2/%3? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:35:23.950

试试这个规则：

```
RewriteEngine On
RewriteRule ^user\/([a-zA-Z0-9_-])\/([a-zA-Z])$ http://www.domain.com/user.php?user=$1&action=$2 [L,R=Permanent] 
```

# wpf - MVVM Light - 继电器命令参数值间歇性出现

> ID：13115474
> 
> 赞同：4
> 
> 时间：2012-10-29T03:17:39.740
> 
> 标签：wpf, silverlight, mvvm-light

我正在使用 Silverlight 应用程序。尝试将按钮的单击命令绑定到 ViewModel 中的中继命令并将一些参数传递给它。我的视图代码是：

```
<Button x:Name="button" Content="Button" VerticalAlignment="Top" Margin="173,0,152,0">
        <i:Interaction.Triggers>
            <i:EventTrigger EventName="Click">
                <i:InvokeCommandAction CommandParameter="{Binding ActualWidth, ElementName=button, Mode=TwoWay}" Command="{Binding CRelayDecimal, Mode=OneWay}"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>
</Button> 
```

按钮将其 ActualWidth 作为命令参数的参数传递。我的 ViewModel 代码是：

```
public Page1()
{
    InitializeComponent();
    CRelayDecimal = new RelayCommand<Object>(this.GetDecimal);
}

public RelayCommand<Object> CRelayDecimal { get; private set; }

private void GetDecimal(Object Obj)
{
    var value = (double)Obj;
} 
```

现在，我在这里看到的问题是，大多数时候我收到的传递参数值是 0.0。间歇性地，我看到价值应该是精确的价值（比如.. 75.0）。

还有其他方法吗？

提前感谢大家的帮助。

谢谢并恭祝安康

尼山特拉纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:23:10.513

好的得到了为什么这不起作用的答案..因为这是silverlight中的一个已知问题。

阅读[此](http://connect.microsoft.com/VisualStudio/feedback/details/522231/silverlight-grid-stackpanel-canvas-actualheight-and-acutalwidth-is-0)链接以了解 MSFT 的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:37:09.180

谢谢你们的反馈！

我进一步调查并发现问题是由于我绑定到它的属性，即“ActualWidth”。如果我尝试将它绑定到属性“宽度”，那么它工作正常。

因此，我相信它只采用“ActualWidth”属性的初始化值。

让我再做一些测试，然后我会给你更多的结果。

谢谢并恭祝安康

尼山特拉纳

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T03:41:05.113

我认为它是从 DataContext 中提取“ActualWidth”的绑定值，这可能是 ViewModel（其中 ActualWidth 不作为属性存在）。

这可能会奏效。您可以尝试设置“this.button.DataContext=this;” 在视图代码的 Loaded 事件处理程序中。因此视图成为按钮的首选数据上下文。CRelayDecimal 等未解析的绑定属性仍应回退到 ViewModel。

或者也许最简单的做法是在按钮上连接一个普通的单击处理程序，以便视图代码处理。视图代码将计算事件发送者的 ActualWidth 并根据需要发送模型的 RelayCommand。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T03:58:02.453

是的，至少有另一个人可以做到这一点。从您的示例中，使用它没有意义，`Command`因为您只想将值从 View 发送到 ViewModel。

我建议您使用 Messenger 在 View 和 ViewModel 之间发送值。你需要做的是：

1) 在您的 ViewModel 中注册一条消息。我更喜欢在它的构造函数中这样做。您还必须添加一个方法来处理来自信使的回调。请注意，`"tokenId"`用于确保您将消息发送给预定订阅者。

```
Messenger.Default.Register<double>(this, YourMethodHere, "tokenId");

private void YourMethodHere(double value)
{
    // do your work here
} 
```

2）在视图中，您必须向按钮添加一个事件，然后通过信使发送消息。

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Messenger.Default.Send<double>(this.ActualWidth, "tokenId");
} 
```

3）您可以`Unregister`在其析构函数中订阅ViewModel，以防止发送多条消息。

# ruby-on-rails - Rails remotipart gem，如何绑定到ajax“进度”事件

> ID：13115477
> 
> 赞同：6
> 
> 时间：2012-10-29T03:18:36.370
> 
> 标签：ruby-on-rails, ajax

我正在尝试实现一个基于 ajax 事件的进度条，我在许多来源中都读到过。我的特殊问题是我不知道如何将自定义事件处理程序绑定到“remotipart”gem 的 ajax 事件中。

这是我想要做的那种甚至挂钩的描述：

[http://warp.byu.edu/site/content/1172](http://warp.byu.edu/site/content/1172)

或者

[http://www.centurion-project.org/articles/html5-multiple-file-upload-with-progress-bar](http://www.centurion-project.org/articles/html5-multiple-file-upload-with-progress-bar)

我提到的远程宝石：

[https://github.com/JangoSteve/remotipart](https://github.com/JangoSteve/remotipart)

我正在使用带有`:remote => true`表单的 rails 3 和 jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:55:23.267

## Remotipart 可能不是答案

这么少的免责声明，我自己没有使用过 Remotipart gem，但我花了很多时间处理文件上传和 Rails。不幸的是，根据我对 Remotipart 的理解，它不支持您正在寻找的进度条用例，因为底层 iFrame 传输策略不支持进度事件。

为了解释，让我们看看我们作为开发人员在浏览器级别可用的不同选项。无论您使用什么服务器端框架或库，这些选项都适用。

## 无刷新文件上传

1.  iFrame 传输
2.  支持插件（Flash/Silverlight/其他）
3.  HTML5（文件和 XHR2 API，可选拖放）

### 选项 1 - iFrame 传输（Remotipart 的策略）

最古老和最广泛支持的（就浏览器而言）无刷新页面加载策略本质上涉及执行表单的标准提交，但使用隐藏的 iFrame 作为目标。不幸的是，此选项不支持进度事件，请参阅此链接（来自 Remotipart 的自述文件）：
[http ://www.alfajango.com/blog/ajax-file-uploads-with-the-if​​rame-method/](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)

### 选项 2 - 支持插件

使用上传模块（通常用 Flash 或 Silverlight 编写）来绕过历史浏览器标准施加的限制。允许多个文件上传和进度事件，但需要用户安装第 3 方浏览器扩展（尽管我们可以假设大多数桌面浏览器都有 Flash）。

### 选项 3 - HTML 5（您参考的文章使用的策略）

因此，像往常一样，HTML 5 是应对所有生活挑战的答案。使用 File 和 XHR2 API，无需任何浏览器扩展即可支持带有进度事件的多文件上传。这是您参考的文章所使用的策略，通常是未来的最佳实践，但需要注意的是，您可能会看到很多用户的浏览器不支持它。

## 我所做的

我是任何解决方案的忠实拥护者，它可以让您利用最新最好的，同时在旧浏览器上优雅地降级。考虑到这一点，我使用一个名为 Plupload 的库来上传文件：
[http ://www.plupload.com/](http://www.plupload.com/)

Plupload 包含 4 个上传“运行时”，捆绑在一个库中：

*   HTML5（选项 3）
*   闪光灯（选项 2）
*   Silverlight（选项 2）
*   HTML4（选项 1）

您配置您的偏好顺序，Plupload JS 运行时将智能地加载用户浏览器支持的第一个。无论使用哪个运行时，库的 JS 部分都非常出色地为您提供了一致的事件进行编程。作为开发人员，让我们专注于构建一个漂亮的 UI，无论使用哪个运行时，它都能“正常工作”。

当然，如果您一直降级到 HTML4，您将失去获取进度更新的能力，因此您应该为此做好准备。

希望有帮助！如果您对使用 Plupload 感兴趣，这里有很多很好的文章和答案可以提供帮助。

# gwt - 如何本地化 DateLabel 和 NumberLabel customFormat 属性？

> ID：13115483
> 
> 赞同：1
> 
> 时间：2012-10-29T03:20:27.357
> 
> 标签：gwt, localization, uibinder

我正在本地化一个相当大的 GWT UIbinder 代码库，并且遇到了几个设置属性的过程不起作用的实例。

[日期标签 javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/DateLabel.html)

[数字标签 javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/NumberLabel.html)

我需要在 LocalizableResource_xx.properties 文件中为 DateLabel 和 NumberLabel 小部件指定日期格式和数字格式。

我尝试转换这个片段

```
 <g:DateLabel styleName="{style.formPromptData}" 
        ui:field="createDate" customFormat="MMM d, yyyy" /> 
```

使用[ui:attribute 方法](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinderI18n#HTML_attributes_that_need_translation)没有成功

调用生成器 com.google.gwt.uibinder.rebind.UiBinderGenerator [错误] 找不到应用消息属性 customFormat 元素的方法 (:63)

有没有办法本地化这些元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T10:00:12.567

`customFormat="XXX"`转换为`DateTimeFormat.getFormat("XXX")`并且没有不同的 wrt 本地化：也就是说，它不可本地化。

如果您想要可本地化的自定义格式，请使用 a [`CustomDateTimeFormat`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/shared/CustomDateTimeFormat.html)（当前依赖于 ICU4J 的[`DateTimePatternGenerator`](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/DateTimePatternGenerator.html)）或 a [`Constants`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Constants.html)or[`Messages`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/Messages.html)接口。实例化它`<ui:with>`并使用 with `customFormat="{intf.customPattern}"`（`format="{intf.customPattern}"`实际上如果你使用 a `CustomDateTimeFormat`）。

# java - 如何访问 java ee 中的属性文件

> ID：13115497
> 
> 赞同：0
> 
> 时间：2012-10-29T03:23:46.713
> 
> 标签：java, jsp

> **可能重复：**
> [在 Servlet/JSP 中加载属性文件](https://stackoverflow.com/questions/12507016/load-properties-file-in-servlet-jsp)

我想知道如何从 Java 类访问属性文件，该项目是使用 Java EE 完成的，因为堆栈跟踪一直给我这个消息（是因为该文件夹不可访问吗？）。问题是：如何访问Java EE中Java类的属性文件？

这是代码：

在 UserClient.java 中：

```
 Properties config = new Properties();
        config.load(new FileInputStream("C:/Users/L31207/Desktop/FYPJ/OpenCalais/MarcusFYPJ"));
        String[][] categories = fetchArrayFromPropFile("content", config); 
```

这是堆栈跟踪：

```
 java.io.FileNotFoundException: C:\Users\L31207\Desktop\FYPJ\OpenCalais\MarcusFYPJ (Access is denied) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:28:42.413

仅仅因为您使用程序打开文件并不意味着您可以完全忽略操作系统已采取的安全措施。运行程序的“用户”没有打开此文件的权限。

这就是为什么您在堆栈跟踪中的“原因”是“访问被拒绝”。也许您实际上可以打开这个文件，但*您的程序以**它运行的用户*身份运行却不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:25:07.307

编辑：愚蠢的我，Yogendra Singh 说的是对的。我没有指定文件名，只有文件夹名。

# wordpress - 致电联盟赞助商在 wp ecommerce 上展示

> ID：13115498
> 
> 赞同：1
> 
> 时间：2012-10-29T03:23:53.230
> 
> 标签：wordpress

我是 MySQL 新手。我的 Wordpress 插件有问题。我尝试通过另一个插件从数据库插件中调用数据。

这是我要调用的数据（来自文件 wp-affiliasi/memberarea.php）

```
<?php if ($datasponsor->nama) echo '<p>Nama Sponsor : <b>'.$datasponsor->nama.'</b>'; ?> 
```

我想在`wpsc-shopping_cart_page.php`.

要调用数据，我正在查看此文件，因为它正确显示了数据。`wp-affiliasi/memberarea.php`. 这是代码：

```
 <?php
 global $premium, $freemember;
 $member = $wpdb->get_row("SELECT * FROM `wp_member` WHERE idwp = '$user_ID'");
 $sponsor = $member->id_referral;
 if ($user_ID != 1) {
  $datasponsor = $wpdb->get_row("SELECT * FROM `wp_member` WHERE idwp = '$sponsor'");
 }

 $datakomisi = get_option('komisi');

 if ($member->membership == 2 || $datakomisi['pps'][0]['free']>0) :
 ?> 
```

我已将该代码复制到 中`wpsc-shopping_cart_page.php`，但我仍然可以在 中看到数据`wpsc-shopping_cart_page.php`。这是代码：

```
 <?php
 global $wpsc_cart, $wpdb, $wpsc_checkout, $wpsc_gateway, $wpsc_coupons;

 $wpsc_checkout = new wpsc_checkout();
 $wpsc_gateway = new wpsc_gateways();
 $alt = 0;
 if(isset($_SESSION['coupon_numbers']))
    $wpsc_coupons = new wpsc_coupons($_SESSION['coupon_numbers']);
 if(wpsc_cart_item_count() < 1) :
    _e('Daftar belanja Anda kosong.', 'wpsc') . "<a href=".get_option("product_list_url").">" . __('Please visit our shop', 'wpsc') . "</a>";
    return;     
 endif;
 ?> 
```

我怎么称呼这些数据？

# mysql - ComboBox 是数据绑定的，我想在文本框中显示数据

> ID：13115501
> 
> 赞同：1
> 
> 时间：2012-10-29T03:25:17.413
> 
> 标签：mysql, vb.net, winforms, visual-studio-2010

非常感谢您提供一点提示或帮助，谢谢。

`DataBound ComboBox`我的表中有一个`MySql`名为`"formmaintenance"`，它有 3 列，即`FormCode`, `FormName`, `FormDescription`, `Combobox DisplayMember`is`FormCode`和`ValueMember`is `FormCode`，我有 2 个`TextBoxes` 名为`txtName`and `txtDesc`。

我想要发生的是，当我在 Combobox 中选择一个项目（例如：form101）时，我想在on和on 上显示`FormName`所选项目（例如名称：Paper）的值。`txtName``FormDescription``txtdesc`

我还不知道如何开始，因为我对 Vb.Net 很陌生。

这是我的代码（**更新**）

```
 If conn.State = ConnectionState.Closed Then
            conn.ConnectionString = "Server = localhost; Username= root; Password =; Database =forms"
            Try
                conn.Open()
                MsgBox("Connection Established")
                Dim dt As New DataTable

                Dim sql = "SELECT FormName FROM formma WHERE  FormCode = '" & cmbCode.Text & "';"
                Dim Result As String

                cmd.Connection = conn
                cmd.CommandText = sql
                Result = cmd.ExecuteScalar()
                da.SelectCommand = cmd

                dr = cmd.ExecuteReader()

                If Result IsNot Nothing Then
                    txtName.Text = Result.ToString()

                End If

            Catch ex As MySqlException
                Console.WriteLine("Error: " & ex.ToString())

            End Try
        End If

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:37:53.620

在组合框的 SelectedIndex_Changed 事件中，您应该编写以下内容

```
Dim st As String = "SERVER=localhost;DATABASE=forms;UID=root;"
Dim conn As New MySqlConnection(st)
Dim cmd As MySqlCommand = conn.CreateCommand()
cmd.CommandText = "SELECT FormName, FormDescription FROM formmaintenance WHERE  FormCode = '" + cmbCode.Text + "'"
conn.Open()
Dim dr As MySqlDataReader = cmd.ExecuteReader()
If dr.Read() Then
    txtName.Text = dr(0).ToString()
    txtdesc.Text = dr(1).ToString()
End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T07:13:18.877

如果我正确理解您的问题，这里是提示。

1- 从数据库加载数据并将其绑定到组合框：

```
 Dim tableFormula as new DataTable("formula");
     using (Dim sqlConn as new SqlConnection("Server = localhost; Username= root; Password =; Database =forms"))
     {
        Dim sqlQuery  as string = "SELECT FormCode, FormName, FormDescription FROM formma;"
        Dim cmd as new SqlCommand(sqlQuery, sqlConn);
        Dim da  as new SqlDataAdapter(cmd); 
        //create dataTable and bind it with dataSet:
        da.Fill(tableFormula);
     }              
     //setting dataSource to comboBox:
     this.cmbCode.DataSource = new BindingSource(tableFormula, null); 
```

2- 在 cmbCode 组合框的 SelectedIndex_Changed 事件处理程序上，根据组合框的选定项设置文本。

```
 if(cmbCode.SelectedItem != null) 
        {
            txtName.Text = ((DataRow)cmbCode.SelectedItem)["FormName"].ToString();
            txtdesc.Text = ((DataRow)cmbCode.SelectedItem)["FormDescription"].ToString();
        } 
```

HTH。

# command-line - 有任何方法可以将 vbscript 直接运行到 wscript 或 cscript 命令行

> ID：13115508
> 
> 赞同：8
> 
> 时间：2012-10-29T03:26:14.387
> 
> 标签：command-line, batch-file, vbscript, wsh

我想像批量调用一样从命令行运行 vbs 命令

```
cmd.exe /c "echo.Hello World! & pause" 
```

显然这不起作用

```
wscript /C MsgBox("Hello world") 
```

我可以打印vbs然后调用临时文件然后删除它

```
cmd.exe /c "echo. [VBSCODE] > temp.vbs & wscript temp.vbs & del temp.vbs" 
```

但这太乱了，我不想弹出提示。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-26T02:03:31.033

这直接在命令行上工作：

```
mshta vbscript:Execute("MsgBox(""Message"",64,""Title"")(window.close)") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T13:13:22.443

VBScript 的源代码需要一个文件。您想将标准输入指定为“文件”，但没有机制可以做到这一点。所以答案是否定的——你不能在不使用临时文件的情况下从命令行生成和运行 VBS 代码。

大多数人使用批处理脚本来编写临时 VBS 代码，执行，然后删除临时代码，正如 PA 所演示的。

我发现了一种将 VBS 代码嵌入批处理文件的机制，无需临时文件。但它不是很漂亮。请参阅[是否可以在不使用临时文件的情况下在批处理文件中嵌入和执行 VBScript？](https://stackoverflow.com/q/9074476/1012053)

[将 JScript 嵌入到批处理文件](https://stackoverflow.com/a/5656250/1012053)中要干净得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T09:16:56.637

避免一遍又一遍地输入相同的内容，只需使用要运行的命令创建一个 bat

**sovb.bat**

```
@echo off
echo %* >%temp%\temp.vbs
wscript %temp%\temp.vbs
del %temp%\temp.vbs 
```

然后从命令行调用它

```
sovb MsgBox("Hello World") 
```

# android - 单击按钮时，会添加另一行元素（TextView、Spinner 等）

> ID：13115509
> 
> 赞同：0
> 
> 时间：2012-10-29T03:26:57.630
> 
> 标签：android, button

我目前正在做一份关于食谱的申请。我想在应用程序上添加食谱。我遇到一个问题：

添加配料时，当点击*AddButton*（带“+”的那个）时，将添加另一行*TextView*、*Spinner*、*TextView*和*AddButton*（而之前点击的*AddButton*将消失）。 ![在此处输入图像描述](../Images/0188c152933c8435f2d34c8a39449a31.png)

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:09:39.603

是的，您可以将列表视图与自定义适配器一起使用，然后在按钮上单击您可以将可见性设置为之前将按钮添加到 View.GONE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:17:53.290

对的，这是可能的

```
addButton1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
addButton1.setVisibility(View.GONE);
// your code to add new line of textView, spinner, etc;
}
} 
```

尝试这个

# javascript - TypeScript 中的 JQuery 和 JQueryStatic 接口有什么区别？

> ID：13115516
> 
> 赞同：4
> 
> 时间：2012-10-29T03:28:24.373
> 
> 标签：javascript, jquery, typescript

有人可以解释一下吗？我意识到 jQuery 接口是预定义的，但 JQueryStatic 是什么？

我有以下内容：

```
(function($)
{

    $.fn.disableBt = function()
    {
        $(this).attr('disabled', true);
        if ($.browser.msie && $.browser.version < 9)
        {
            $(this).addClass('disabled');
        }
    }

})(jQuery); 
```

我可以让 typescript 了解这一点的唯一方法是将它添加到 jQuery 界面中，如下所示：

```
 disableBt();
} 
```

我尝试将它添加到 jQueryStatic 但它似乎没有工作：

```
interface JQueryStatic {
  modal( options );
  disableBt();
} 
```

这是在我的模式中定义选项的方式：

```
$.modal.defaults = {
    content: false,
    useIframe: false,
    ...
    ...
var settings = $.extend({}, $.modal.defaults, options), 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T06:10:03.383

是否定义了“选项”（在模式（选项）中）？

JQueryStatic 接口具有静态方法（“$ 和 jQuery 本身的那些”）

JQuery 接口具有可以在 jQuery 元素上运行的成员，其中许多都返回 JQuery 本身以实现可链接性。

```
interface JQueryStatic {
    someAdditionalMethod(): any;
}
$.someAdditionalMethod();

interface JQuery {
    pluginMethod(): JQuery;
}
$("body").pluginMethod(); 
```

如果你的情况是这样的：

```
interface ModalDefaultOptions {
    content?: bool;
    useIframe?: bool;
}

interface JQueryStatic {
    modal: {
        defaults: ModalDefaultOptions;
    };
}

interface JQuery {
    disableBt(): void; // or :JQuery if you returned 'this' from the function 
}

$("#someButton").disableBt();
$.modal.defaults.content = false; 
```

# android - ViewPager OnPageSelected() 或 OnPageShow() 中的片段？

> ID：13115519
> 
> 赞同：3
> 
> 时间：2012-10-29T03:28:55.320
> 
> 标签：android, android-viewpager

ViewPager 中的 Fragment 是否具有类似`OnPageSelected()`Or的等效方法`OnPageShow()`？显示特定页面时我应该做些什么？

* * *

我在 In page adapter 中设置了每个 Fragment 的隐藏状态`onPageScrolled()`，我想知道为什么`onHiddenChanged(`) 不被调用？

// 在 PageAdapter(扩展 FragmentPagerAdapter)

```
 public void onHiddenChanged(int arg0)
    {
        for (int i = 0; i < getCount(); i++) {
            if (i == arg0) {
                mAdapter.getItem(arg0).onHiddenChanged(true);
            } else {
                mAdapter.getItem(arg0).onHiddenChanged(false);
            }
        }
    } 
```

// 在 PageActivity(扩展 FragmentActivity)

```
public void onPageSelected(int arg0)
{
    mAdapter.onHiddenChanged(arg0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:31:31.580

在`Android`for 中`ViewPager`有一个`listener`被调用`ViewPager.OnPageChangeListener`的方法，例如

```
onPageScrollStateChanged(int state),

onPageScrolled(int position, float positionOffset, int positionOffsetPixels) , 

onPageSelected(int position) 
```

如果你想为页面做一些特定的任务，你需要编写`ViewPager.OnPageChangeListener`和覆盖`onPageSelected(int position)`方法。

有关更多详细信息，[请参见此处](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:32:44.380

您可以使用[`OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html). 当页面更改时，您会收到回调，例如：

```
mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

    @Override
    public void onPageSelected(int position) {
        // this will be called when the page is changed
    }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) {
    }

    @Override
    public void onPageScrollStateChanged(int arg0) {
    }
}); 
```

# objective-c - 透明度 iOS

> ID：13115524
> 
> 赞同：2
> 
> 时间：2012-10-29T03:30:14.327
> 
> 标签：objective-c, ios, xcode

我有一张用我的 iOS 设备拍摄的图像，其中包含几行文字和一点背景颜色（红色）。我希望图像只向用户显示单词（他们会做类似的事情）。我不能以任何方式使用 UIImageView，所以简单地拍摄图像并将其放在背景上是行不通的。

所以我想知道是否有人可以告诉我以下哪种方法会给我最好的结果，如果可能的话，例子会很好。我已经在下面发布了我尝试做的事情的代码（选项 2）。

1.  将背景设为白色，以便只显示单词
2.  从图像中去除红色

提前致谢

```
 UIImage *image = [UIImage imageNamed:@"pic1.jpg"];

const float colorMasking[6] = {0.0, 0.0, 0.0, 0.0, 0.0, 0.0};
image = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(image.CGImage, colorMasking)]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:20:41.300

```
UIImage *image = [UIImage imageNamed:@"image1.jpg"];
UIImage *inputImage = [UIImage imageWithData:UIImageJPEGRepresentation(image, 1.0)];

const float colorMasking[6] = {225.0, 255.0, 225.0, 255.0, 225.0, 255.0};
CGImageRef imageRef = CGImageCreateWithMaskingColors(inputImage.CGImage, colorMasking);

UIImage *img2 = [UIImage imageWithCGImage:imageRef]; 
```

我已经从图像的背景中删除了浅灰色。RGB 的颜色范围在 225 到 255 之间。现在它看起来是透明的。

# git - 如何使用 SmartGit 克隆到现有目录？

> ID：13115529
> 
> 赞同：1
> 
> 时间：2012-10-29T03:30:49.907
> 
> 标签：git, smartgit

我在 BitBucket 上有一个现有的存储库，并在 Windows 7 (x64) 上使用 SmartGit 3 在本地克隆它。我有一个文件夹，假设`C:/FolderA/FolderB`我想把它放在里面。（这样`readme.txt`就变成了`C:/FolderA/FolderB/readme.txt`。）

但是，当我克隆存储库并将路径设置为 时`C:/FolderA/FolderB`，它会`readme.txt`在`C:/FolderA/FolderB/repository-name/readme.txt`. 我怎样才能防止这种情况？

如果 SmartGit 无法做到这一点，我如何从 Git 命令行实现它？

注意：谷歌对此也无话可说…… [[1]](https://www.google.com/search?q=smartgit+clone+to+existing+folder) [[2]](https://www.google.com/search?q=smartgit+force+directory+name) [[3]](https://www.google.com/search?q=smartgit+clone+to+custom+folder)等等……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:41:15.720

您可以使用

```
git clone <git-url> [target-dir] 
```

如果您不指定目标目录，默认情况下它将创建以 repo 名称命名的新目录（这就是您所看到的）。

您可以随时重命名目标目录或根据需要移动它（例如上一级） - git 并不关心，只要`.git`子目录完好无损。

# c# - 关于网格视图EditButton

> ID：13115533
> 
> 赞同：0
> 
> 时间：2012-10-29T03:31:41.540
> 
> 标签：c#, asp.net

我是 asp.net 的新手，正在编写一些程序来执行一些更新删除操作。我已经创建了一个 gridview 并连接了 db 程序，现在我想启用编辑按钮，但将其更改为将 editGrid.aspx 中的 id 传递给 editDetials.aspx，让用户可以在详细信息视图中编辑内容。

这是editGrid.aspx中的脚本

```
<asp:CommandField ShowEditButton="True" ShowDeleteButton="True" /> 
```

如何使用 gridview 编辑按钮使其传递 id 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:37:54.217

使用gridview的DataKeyNames属性
[这里是一个例子](http://msdn.microsoft.com/en-us/library/ms972948.aspx)

# windbg - windbg 命令行捕获子进程并下断点

> ID：13115536
> 
> 赞同：2
> 
> 时间：2012-10-29T03:32:00.053
> 
> 标签：windbg

最近我不得不用windbg调试一个应用程序，在阅读了[WinDbg Command-Line Options](http://msdn.microsoft.com/en-us/library/windows/hardware/ff561306%28v=vs.85%29.aspx)之后，我找到了一些解决方案，但是没有一个可以在一次运行中解决所有这些问题。

Ganerally，我使​​用**-c**选项在启动时设置断点，使用**-logo**选项将日志记录内容输出到静态文件，使用**-pn**选项启动我的应用程序，所以最初我的命令如下：

```
windbg -pn myapp.exe -logo "log.txt" -c 'bp WININET!InternetSetCookieExW "r; dv; kb; .dump /mu cookiedbg.dmp; g"' 
```

此命令将启动**myapp.exe ，在****WININET!InternetSetCookieExW** WIN32 API处创建一个断点，当此断点被命中时，它将信息转储到**log.txt**然后继续（通过**g**命令）。

但是，我还有一些问题没有解决，下面列出我的实际需求：

1.  由于我的应用程序会创建子进程，windbg 应该能够调试主进程和所有子进程
2.  **一切都应该是自动化**的，所以 windbg 应该在我的应用程序启动时创建一个断点，在断点上记录一些信息

对于**第一**点，我发现**-o**选项调试所有子进程，所以`windbg -pn myapp.exe -o`似乎工作>

但不幸的是，当给出**-o**选项时，每次分叉子进程时，windbg 都会遇到断点，我必须手动使用**g**命令继续，这不是自动的。

为此，我找到了**-g**选项，它会忽略初始断点，但它仍然会引发一个关键问题。

问题是，当指定**-g**选项时，我的应用程序启动后无法立即执行**-c**选项提供的命令，因为初始断点被忽略，我必须手动提出断点，然后我的命令可以在那一击。

我尝试了**-e**选项来引发一些中断事件，但没有得到任何结果。

综上所述，我使用**-o**和**-g**选项使 windbg 捕获所有子进程，并且在创建进程时不命中初始断点，但随后我无法通过**-c**选项注入命令。

感谢有人可以帮助提供正确的命令行选项组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T14:28:59.057

您可以省略**-g**选项并将**g**添加到初始命令中，如下所示：

```
-c 'bp WININET!InternetSetCookieExW "r; dv; kb; .dump /mu cookiedbg.dmp; g"; g' 
```

因此，在初始断点和命令执行之后，您将恢复被调试进程的执行。

至少它解决了我的问题

# dom - 如何在 v8 中更改 DOM 元素的值

> ID：13115537
> 
> 赞同：0
> 
> 时间：2012-10-29T03:32:00.773
> 
> 标签：dom, v8

我正在尝试直接在 object.cc 文件中的方法 SetPropertyForResult 中更改 HeapObjects 的 _nodeValue。（用加密的替换值）。更改后，我检查 _noveValue 并看到更改已应用于对象。但令人惊讶的是，当它被分配给一个变量时，我看到了旧值。

v8 中是否有任何物体的影子？或者 _nodeValue 不是我必须改变的地方？或 SetPropertyForResult 不是正确的地方。也许我必须去 ic.cc 中的方法 Store。

感谢您的帮助

# python - Python记录到同一个文件，不同的用户

> ID：13115538
> 
> 赞同：3
> 
> 时间：2012-10-29T03:32:02.570
> 
> 标签：python, linux, logging, file-permissions

我正在使用python的日志记录模块。

在单元测试的情况下（我们使用 py.test），每次启动测试时，一些日志信息都会进入某个文件。在集成服务器中，每次有人推送代码（我们也使用 git :) 我们运行测试。

问题是，一旦用户 A 创建了文件，当用户 B 尝试运行测试时，测试将失败，因为用户 B 无权在同一文件上写入。

到目前为止，我们已经手动更改了文件权限，但看起来像是一个肮脏的解决方案。此外，我们虽然为每个用​​户创建一个日志文件，但同样感觉不对。

我们在测试中记录的代码是

```
logging.basicConfig(level=logging.DEBUG,
    format='%(asctime)s %(name)-12s %(levelname)-8s %(message)s',
    datefmt='%m-%d %H:%M',
    filename='/tmp/py.test.log',
    filemode='w')
log.setLevel(logging.DEBUG)
log.addHandler(logging.StreamHandler()) 
```

有没有办法避免这个问题？也许使用 filemode = 'a' 可以做到，但假设我每次都想要一个新文件（老实说，这是一个真正的问题，但我仍然想做正确的事）

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T05:26:45.537

听起来日志记录过程正试图在另一个用户拥有的现有文件之上写入。下面是允许组访问`loggroup`目录的过程`logdir`。

1.  使包含目录组可写。

    ```
    $ chgrp loggroup logdir
    $ chmod g+w logdir 
    ```

2.  将**setgid**位设置为 on `logdir`。这使得新文件`logdir`始终归该组所有。否则，新文件归创建者组所有。

    ```
    $ chmod g+s logdir 
    ```

3.  确保所有登录用户都属于`loggroup`.

    ```
    $ usermod -a -G loggroup myuser 
    ```

4.  确保所有写入进程都具有正确的 umask，以便它们可以使新创建的文件可组写入。

    ```
    $ umask 0002 
    ```

5.  现在该组的所有成员都`loggroup`可以在其中创建文件`logdir`并覆盖彼此的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:45:10.677

您可以使用 git 哈希作为文件名的一部分。然后，如果日志中有奇怪的消息，您就会知道是哪个版本导致的。

另一种可能性是从不同的目录甚至在 chroot 中运行测试。

更改权限或删除文件也可能有效，但如果测试由两个或更多用户同时运行，您仍然会得到一个混乱的日志文件。

如果您不关心内容，也可以制作一个不记录任何内容的记录器，或者记录到数据库或......真正正确/最佳答案取决于具体情况

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-16T18:21:16.747

```
import os
os.chmod("/some/location/file.type", 0777) 
```

我猜你可以为创建的文件执行此操作。其中 0777 是八进制的权限。您可以将其更改为您想要的任何内容。

# jsf - 不重新渲染

> ID：13115544
> 
> 赞同：1
> 
> 时间：2012-10-29T03:33:06.153
> 
> 标签：jsf, richfaces

我有两个组合框（类别和子类别），我想呈现取决于类别组合框的选择 id 的子类别组合框。但是，子类别组合框不呈现？这是我的代码，

```
<h:panelGrid>
    <h:outputText value="Cateogyr : "/>
    <rich:comboBox defaultLabel="Enter some value" >
      <a4j:support event="onchange" reRender="subCombo" ajaxSingle="true"/>
      <f:selectItems value="#{bookManager.categoryList}" />
    </rich:comboBox>
    </h:panelGrid>

    <h:panelGrid>
    <h:outputText value="Sub Category : "/>
    <rich:comboBox defaultLabel="Enter some value" id="subCombo">
       <f:selectItems value="#{bookManager.subCategoryList}" />
    </rich:comboBox>  
    </h:panelGrid> 
```

我在渲染子类别组合框的 backing bean 中打印出来，但它没有出现。请，如果你有任何想法，让我知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:13:26.727

看起来您正在使用 JSF 1.2 和 RichFaces。通过发布的代码，您似乎需要在实际代码中进行一些修复：

*   您缺少`<h:form>`包装要发送到服务器的数据的内容。你的代码应该是这样的：

    ```
    <h:form>
        <h:panelGrid>
            <h:outputText value="Category : "/>
            <rich:comboBox defaultLabel="Enter some value" >
              <a4j:support event="onchange" reRender="subCombo" ajaxSingle="true"/>
              <f:selectItems value="#{bookManager.categoryList}" />
            </rich:comboBox>
        <!-- rest of JSF/HTML code... -->
    </h:form> 
    ```

*   为了正常工作，您的`bookManager`托管 bean 需要具有会话范围或请求范围和`@KeepAlive`注释才能正常工作。对于性能问题，我建议使用请求范围。你的班级应该是这样的

    ```
    @KeepAlive
    public class BookManager {
        //class code...
    } 
    ```

看到您的代码，您似乎正在检索`bookManager.subCategoryList`bean 的 getter（从数据库或缓存资源）。确保您的托管 bean getter 和 setter 非常简单（如`public int getNumber() { return this.number; }`），并且**其中不包含任何业务逻辑代码**，因为 JSF 可以多次调用 getter 方法。有关这方面的更多信息，请参阅：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/q/2090033/1065197)。

现在，如何解决在更改 中的值时检索子类别列表的问题`<rich:combobox>`？使用调用方法的`action`组件属性来检索和准备.`<a4j:support>``bookManager.categoryList`

JSF 代码

```
<a4j:support event="onchange" reRender="subCombo" ajaxSingle="true"
    action="#{bookManager.obtainSubcategoryList}" limitToList="true" /> 
```

Java 代码

```
@KeepAlive
public class BookManager {
    public void obtainSubcategoryList() {
        //retrieve the data in this action.
        this.subCategoryList = ...;
    }
    //class code...
} 
```

# excel - 如何将用户表单带入excel工作表？

> ID：13115546
> 
> 赞同：1
> 
> 时间：2012-10-29T03:33:45.690
> 
> 标签：excel, excel, vba

我开发了一个`UserForm`VBA 模块。

但是我在打开excel表本身时想要那个用户表单？当我打开[excel](/questions/tagged/excel "显示标记为“excel”的问题")时`UserForm`应该显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:57:18.370

要隐藏 Excel 应用程序但显示 UserFrom，您可以在`ThisWorkbook`模块中使用它

```
Private Sub Workbook_Open()
Application.WindowState = xlMinimized
UserForm1.Show vbModeless
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:47:48.900

在 ThisWorkbook 模块中打开工作簿时打开：

```
Private Sub Workbook_Open()
    Userform1.Show
End Sub 
```

将 UserForm1 替换为 Userform 的名称（如果不同）。

在工作表模块中输入特定工作表时打开：

```
Private Sub Worksheet_Activate()
    UserForm1.Show
End Sub 
```

# android-edittext - 笑脸图标（表情）全选并在Android编辑文本中替换

> ID：13115547
> 
> 赞同：0
> 
> 时间：2012-10-29T03:33:50.130
> 
> 标签：android-edittext

我正在使用 ImageSpan 构建 Spannable 文本，然后将 Spannable 设置为 EditText 以在 Edittext 中显示表情符号。它工作正常。但是当我输入几个表情符号并长按edittext字段并全选时，我遇到了一个问题。然后按键盘上的一个字符，将所有表情符号替换为该字符。它无法用键盘上输入的字符替换表情符号。它在编辑文本字段中显示第一个表情符号。

只有 onTextChanged() API 被调用，因为在键盘上输入的字母正确接收了 CharSequence。但仅显示第一个表情符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:35:15.317

这是Android中的问题。EditText 需要照顾全选和替换。我也有同样的问题。输入笑脸图标后，全选，如果您尝试用另一个笑脸图标替换它，它会很好地替换。在edittext中，首先输入一个字符并输入表情符号，然后全选并替换，然后它也可以正常工作。当您尝试替换笑脸图标时会出现问题。由于我们在 android `onTextChanged()`回调上收到替换信，Android 平台需要处理这个问题。

# php - Dropbox：生成直接下载链接 [PHP 首选]

> ID：13115548
> 
> 赞同：5
> 
> 时间：2012-10-29T03:34:15.333
> 
> 标签：php, dropbox, dropbox-api

我正在使用 Dropbox REST API，并且可以成功检索文件的共享 URL。

[https://www.dropbox.com/developers/reference/api#shares](https://www.dropbox.com/developers/reference/api#shares)

但是，共享链接会将用户带到 dropbox.com 上的预览页面，而我正在寻找用户可以直接下载文件的直接链接。例如。右键，另存为...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T03:34:15.333

事实证明，返回的默认分享 url 是一个*短 url*，短 url 将始终指向 Dropbox 预览页面。

因此，您需要通过将 short_url 参数设置为 false 来让 REST API 返回完整的 url。一旦你有了完整的 url，然后在 url 的末尾添加 ?dl=1 。

例如：[https ://dl.dropbox.com/s/xxxxxxxxxxxxxxxxxx/MyFile.pdf?dl=1](https://dl.dropbox.com/s/xxxxxxxxxxxxxxxxxx/MyFile.pdf?dl=1)

**更多信息**：

[https://www.dropbox.com/help/201/en](https://www.dropbox.com/help/201/en)

[提示用户保存从 Dropbox 下载的内容](https://stackoverflow.com/questions/8992284/prompt-user-to-save-on-download-from-dropbox)

**PHP 示例**：

这个例子借用/启发了这些代码示例： [http ://www.phpriot.com/articles/download-with-curl-and-php](http://www.phpriot.com/articles/download-with-curl-and-php)

[http://www.humaan.com.au/php-and-the-dropbox-api/](http://www.humaan.com.au/php-and-the-dropbox-api/)

```
/* These variables need to be defined */
$app_key = 'xxxxxxxx';
$app_secret = 'xxxxxxxxxxxxxxxxxxxx';
$user_oauth_access_token = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$user_oauth_access_token_secret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';    

$ch = curl_init(); 

$headers = array( 'Authorization: OAuth oauth_version="1.0", oauth_signature_method="PLAINTEXT"' );

$params = array('short_url' => 'false', 'oauth_consumer_key' => $app_key, 'oauth_token' => $user_oauth_access_token, 'oauth_signature' => $app_secret.'&'.$user_oauth_access_token_secret);

curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers );
curl_setopt( $ch, CURLOPT_POSTFIELDS, $params);
curl_setopt( $ch, CURLOPT_URL, 'https://api.dropbox.com/1/shares/'.$dir );

/*
* To handle Dropbox's requirement for https requests, follow this:
* http://artur.ejsmont.org/blog/content/how-to-properly-secure-remote-api-calls-from-php-application
*/
curl_setopt( $ch, CURLOPT_CAINFO,getcwd() . "\dropboxphp\cacert.pem");
curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, TRUE);

curl_setopt( $ch, CURLOPT_RETURNTRANSFER, TRUE );
$api_response = curl_exec($ch);

if(curl_exec($ch) === false) {
    echo 'Curl error: ' . curl_error($ch);
}

$json_response = json_decode($api_response, true);

/* Finally end with the download link */
$download_url = $json_response['url'].'?dl=1';
echo '<a href="'.$download_url.'">Download me</a>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T08:28:30.050

只需`?dl=1`在链接末尾添加

来自： [https ://www.dropbox.com/s/spfi4x1z600sqpg/background.jpg?dl=0](https://www.dropbox.com/s/spfi4x1z600sqpg/background.jpg?dl=0)

至： [https ://www.dropbox.com/s/spfi4x1z600sqpg/background.jpg?dl=1](https://www.dropbox.com/s/spfi4x1z600sqpg/background.jpg?dl=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-10T16:58:37.543

寻找类似解决方案以获取直接链接以下载跳过 Dropbox 下载窗口的文件的人们可以使用 API 版本 2 中添加的“获取临时链接”端点。

[https://www.dropbox.com/developers/documentation/http/documentation#files-get_temporary_link](https://www.dropbox.com/developers/documentation/http/documentation#files-get_temporary_link)

> 获取用于流式传输文件内容的临时链接。此链接将在四个小时后过期，之后您将收到 410 Gone。链接的 Content-Type 由文件的 mime 类型自动确定。

# ruby - 在连接之前定义 Sequel 模型

> ID：13115550
> 
> 赞同：12
> 
> 时间：2012-10-29T03:34:36.527
> 
> 标签：ruby, sequel

在我的（非 Rails）应用程序中，我试图定义一个 Sequel 模型：

```
class Foo < Sequel::Model
end 
```

当我运行我的应用程序时，我收到了错误：

```
No database associated with Sequel::Model: 
have you called Sequel.connect or Sequel::Model.db= ? (Sequel::Error) 
```

事实上，我*没有*调用 connect，因为“require Foo”是在我的数据库代码运行之前发生的。

当然，我可以切换一些东西，以便在数据库连接后完成要求，但是还有其他选择吗？目前，我将所有应用程序的“要求”语句都放在一个文件中，不必为这些模型类文件破坏它会很好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T15:08:44.767

按照设计，Sequel 要求在模型类定义之前建立数据库连接，因为它在模型类创建时解析数据库模式。因此，您应该首先设置初始化代码以连接到数据库。

# ios - 如何从 UiTableViewController 访问自定义 UITableViewCell 的属性？

> ID：13115554
> 
> 赞同：0
> 
> 时间：2012-10-29T03:35:04.283
> 
> 标签：ios, uitableview

我正在尝试从 UitableViewController 类访问自定义 UiTableViewCell（子类 UITableViewCell）上的标签属性。例如，我有 heightForRowAtIndexPath 方法，我需要访问标签。

这是我的代码：

```
- (CGFloat)tableView:(UITableView *)tv heightForRowAtIndexPath:(NSIndexPath *)indexPath {

   // I need access to the custom UITableView Cell property here

} 
```

有小费吗？甚至可以在 uiviewcontroller 中声明插座并将其链接到自定义 uitableviewcell 上的标签？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T03:40:43.273

要从 访问单元格`heightForRowAtIndexPath:`，请检查以下内容：

*   [如何在 tableView:(UITableView *)tableView heightForRowAtIndexPath 函数中获取单元格对象？](https://stackoverflow.com/questions/5639366/how-to-get-the-cell-object-in-tableviewuitableview-tableview-heightforrowati)
*   [UITableView 灵活/动态高度ForRowAtIndexPath](https://stackoverflow.com/questions/2213024/uitableview-flexible-dynamic-heightforrowatindexpath)

* * *

如果您需要在初始化后访问单元格的标签，那么您需要`tag`在自定义 UITableViewCell 类中添加标签，您可以通过以下方式访问标签：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: @"cell"];
    UILabel *cellLabel = (UILabel *)[cell viewWithTag: 1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:41:51.477

高度计算应使用数据模型中的数据完成，而不是视图。请记住，单元格是使用数据模型中的数据创建的。

您不能调用`[tv cellForRowAtIndexPath:indexPath]`，因为这会导致 the`tableView:cellForRowAtIndexPath:`和 this`tableView:heightForRowAtIndexPath:`方法之间的无限递归。

您可以尝试直接调用您的`tableView:cellForRowAtIndexPath:`方法来获取单元格，但这可能会产生不良副作用。

# c# - 如何计算两个日期时间之间的百分比

> ID：13115555
> 
> 赞同：1
> 
> 时间：2012-10-29T03:35:13.077
> 
> 标签：c#, datetime

我想知道如何计算两个 DateTimes 之间的百分比，我有一个 BackgroundWorker 执行，直到达到提供的 DateTime，该部分工作正常，我只想在 UI 中显示工人的完成百分比是多少。

我尝试使用以下方法：

```
var now = DateTime.Now;
var executeUntil = DateTime.Now..AddHours(4).AddMinutes(10);

var percentage = (int)(( executeUntil.Ticks * 100 ) / now.Ticks ); 
```

但总是返回 1，我猜这是因为 Ticks 是一个很长的数字，并且以某种方式截断了除法。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T03:47:15.290

试试这个：

```
var start = DateTime.Now;
var end = DateTime.Now.AddMinutes(1);
var total = (end - start).TotalSeconds;

for( int i = 0; i < 10; i++)
{
Thread.Sleep(6000);

var percentage = (DateTime.Now - start).TotalSeconds*100/total;
Console.WriteLine(percentage);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T03:58:27.353

你对截断是正确的。现在你正在除以长整数，所以商将`Math.Floor`应用于它并且也是一个不支持小数的长整数。要修复您提供的确切代码，您需要将除数或被除数设为浮点数。这很快使分子成为双倍。

```
var percentage = (int)(( executeUntil.Ticks * 100d ) / now.Ticks ); 
```

# android - 在 phonegap 中锁定和解锁方向

> ID：13115560
> 
> 赞同：0
> 
> 时间：2012-10-29T03:35:52.437
> 
> 标签：android, ios, cordova

我想使用 phonegap 启用和禁用方向更改。

对于 android 有 java 调用，

```
activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

但我一直在寻找跨平台的东西，还有 config.xml

```
<preference name="orientation" value="portrait"/> 
```

但这是一个全局设置。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:31:57.653

对于 android 中的跨平台，为纵向模式添加此行

`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`

这个是风景的

`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);`

就在这条线之后

`super.onCreate(savedInstanceState);`在您的 onCreate 方法中，此解决方案适用于 android，因为我没有在 ios 中工作过，我无法帮助您。

# database - 打补丁后 db2 表不活动

> ID：13115562
> 
> 赞同：0
> 
> 时间：2012-10-29T03:35:56.370
> 
> 标签：database, db2

我在终端上运行了以下 db2 脚本，没有问题。但是当我尝试访问与该表相关的实际前端页面时，我收到错误（代码**57016**），表明该表处于非活动状态。我重新启动了 db2，但这个问题仍然存在。

任何人都可以在这里帮助我吗

```
alter table CUSTOMER alter column Delivery set default 0! 
alter table CUSTOMER alter column Delivery set not null! 

alter table CUSTOMER add constraint pref_ck4 check (Delivery between 0 and 1)!

commit!
quit! 
```

回滚是：

```
alter table CUSTOMER alter Delivery drop DEFAULT!
alter table CUSTOMER alter COLUMN Delivery drop NOT NULL!

alter table CUSTOMER drop constraint pref_ck4!

reorg table CUSTOMER!

commit!
quit! 
```

我收到的错误：

```
UncategorisedDatabaseException: Query=[SELECT * FROM CUSTOMER WHERE ID = ?], database       vendor error message is: DB2 SQL error: SQLCODE: -668, SQLSTATE: 57016, SQLERRMC: 7;CUSTOMER, UncategorisedDatabaseException errorCode = -668

db2 => ? 57016

SQLSTATE 57016: The table cannot be accessed, because it is inactive. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:22:22.723

最好查看 SQLCODE 和 SQLERRMC 以了解具体错误。SQLSTATE 不会唯一标识错误。

SQLCODE`-668`是 SQL0668N；SQLERRMC ( `7;CUSTOMER`) 表明这是由于 CUSTOMER 表上的原因代码 7 造成的。

要查找[此错误](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql00668n.html)，您可以使用来自 DB2 客户端的方便参考：

```
$ db2 "? sql0668n"

SQL0668N  Operation not allowed for reason code "<reason-code>" on table
      "<table-name>".

Explanation: 

Access to table "<table-name>" is restricted. The cause is based on the
following reason codes "<reason-code>": 

[...]

7        
         The table is in the reorg pending state. This can occur after
         an ALTER TABLE statement containing a REORG-recommended
         operation.

[...]

User response:

[...]

7        
         Reorganize the table using the REORG TABLE command.

         For a table in the reorg pending state, note that the following
         clauses are not allowed when reorganizing the table:

         *  The INPLACE REORG TABLE clause
         *  The ON DATA PARTITION clause for a partitioned table when
            table has nonpartitioned indexes defined on the table 
```

解决方案是`REORG`在您的桌子上运行。

# c++ - 在另一个类中定义静态类指针

> ID：13115563
> 
> 赞同：3
> 
> 时间：2012-10-29T03:36:01.750
> 
> 标签：c++, class, variables, static

我有一个类，它有一个指向另一个类的静态指针，它是一个单例。我似乎遇到的问题是我无法从所述类的构造函数中设置指针。这是我当前的代码：

```
class B;

class A
{
  public:
    A();
    ~A();
};

class B
{
  public:

    B();
    ~B();

    static A* a;
};

A::A() {
  A* B::a = this;
} 
```

现在，我似乎遇到的问题是我无法在“当前范围”中定义 B::a 。此外，“this”指针只能用在“非静态成员函数”中。

我认为问题与在另一个类函数中定义静态类变量有关，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:45:05.150

首先，必须定义和声明静态类成员。`static A* a;`在B类的主体中只是一个声明，你需要**定义**一个。请注意，每个类成员都必须有一个定义，这就是我们通常在`.cpp`类的适当文件中定义静态成员的原因。显然，这发生在类体之外。您也不能在函数范围内定义静态成员。

因此，将 a 的定义移到构造函数的范围之外，如下所示：

```
class B
{
public:

    B();
    ~B();

    static A* a;};

A* B::a = 0; // Good idea to set a default value for the pointer 
```

但是请注意，`a`在创建至少一个 A 类型的对象之前， 的值将包含 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T03:40:46.187

您应该在类声明之外定义所有静态成员：

```
class B;
class A
{
public:
    A();
    ~A();
};

class B
{
public:

    B();
    ~B();

    static A* a;
};

A* B::a; // HERE

A::A()
{
    B::a = this; // and there was an error here too
} 
```

不要忘记定义其他 ctors/dtors。

# bash - bash grep 文件未找到

> ID：13115567
> 
> 赞同：1
> 
> 时间：2012-10-29T03:36:30.277
> 
> 标签：bash, grep

我希望根据我所做的 grep 搜索应用一些命令，`grep -l "If you wish to distribute" *.pdf`并且我看到了我想要处理的文件，但是使用以下 bash 脚本，这些文件没有被处理：

```
#!/bin/bash -x
text1="If you wish to distribute"  #Science papers

# Originally: grep -l "text1" \*.pdf |

grep -l "$text1" *.pdf |
while IFS="" read -r -d "" file; do
  noext="${file%\.*}"
  pdftk "$file" cat 2-end output "$noext".tmp 
  mv -f "$noext".tmp "$file"
done 
```

输出是

```
+ IFS=
+ grep -l 'If you wish to distribute' project_latex.pdf 'Science 2003 Metapopulation Persistence with Age-Dependent Disturbance or Succession.pdf' 'Science 2006 A Keystone Mutualism Drives Pattern in a Power Function.pdf' short-math-guide.pdf Test.pdf
+ read -r -d '' file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T04:03:43.887

被告知扫描的`*`方法前面的反斜杠（带有星号作为第一个字符的单个文件名）。请记住，shell 会进行元字符扩展；命令没有。`grep``*.pdf`

删除反斜杠以提供`grep`所有 PDF 文件的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:39:23.947

```
grep -l "text1" \*.pdf | 
```

除了在 pdf 中搜索文字 text 之外，没有做任何事情`text1`。你忘了`$`把它变成一个变量：

```
grep -l "$text1" \*.pdf |
         ^--- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T22:07:41.340

正如我在评论中提到的，尝试放弃`-d ''`阅读的论点。

# excel - 将数据从 csv 文件读取到 MATLAB 时出错

> ID：13115569
> 
> 赞同：2
> 
> 时间：2012-10-29T03:36:43.817
> 
> 标签：excel, matlab, csv

我有以下示例数据

```
Date,Open,High,Low,Close,Volume,Adj Close
10/24/2011,181.51,183.39,180.62,182.25,5890600,182.25
10/21/2011,179.11,181.67,178.75,181.63,8054200,181.63
10/20/2011,178.13,179.24,176.17,177.25,7513800,177.25 
```

我正在将 CSV 文件中的数据读入 MATLAB。

```
data = csvread('filename.csv','A1:G12542'); 
```

我收到以下错误。知道如何规避这个问题吗？

```
 ??? Error using ==> dlmread at 145
Header lines must be integer-valued.

Error in ==> csvread at 50
    m=dlmread(filename, ',', r, c);

Error in ==> Q11 at 1
data1 = csvread('ibm.csv','A1:G12542'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:54:00.167

三个问题：

1) 提供的样本数据不是 csv。csv 代表逗号分隔的变量。您的示例数据似乎由制表符或空格分隔。**更新：**我看到您已经编辑了您的样本，因此数据现在是 csv。我已经相应地编辑了我的解决方案。

2）如果您希望使用行和列输入参数，`csvread`它们应该作为从零开始的整数值行和列参数输入，而不是“excel”类型的字符串。

3）从您提供的样本中，您似乎想要获取第一列中的日期。如果您想使用`csvread`或`dlmread`因为这两个函数都只能处理数字数据，这是一个问题（请注意，10/24/2011 是一个字符串）。

因此，我将假设您向我们展示的内容代表您的文件。鉴于此，将其导入matlab的方式如下：

```
fid1 = fopen('YourFilePathHere', 'r');
D = textscan(fid1, '%s%f%f%f%f%f%f', 'Delimiter', ',', 'HeaderLines', 1);
fclose(fid1)
D = [datenum(D{1}, 'mm/dd/yyyy'), D{2}, D{3}, D{4}, D{5}, D{6}, D{7}]; 
```

在第一行，我打开文件进行阅读。在第二行中，我扫描数据。请注意格式字符串`'%s%f%f%f%f%f%f'`. 这表示第一列是字符串格式`%s`，接下来的 6 列是浮点数（我们可以将其更改为其他数字类型，但浮点数目前最简单）。在第三行中，我关闭了文件。在最后一行中，我将日期字符串转换为 matlab 数字日期格式，然后将其与其余数据组合成一个数字矩阵，以供分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T18:05:01.803

在 13b 中，您可以利用 MATLAB 表来访问这些数据：

```
data = readtable('filename.csv');
data = 

    Date         Open      High      Low      Close       Volume      AdjClose
____________    ______    ______    ______    ______    __________    ________

'10/24/2011'    181.51    183.39    180.62    182.25    5.8906e+06    182.25  
'10/21/2011'    179.11    181.67    178.75    181.63    8.0542e+06    181.63  
'10/20/2011'    178.13    179.24    176.17    177.25    7.5138e+06    177.25 
```

请注意，我忽略了一条警告，即变量名称已被修改为有效的 MATLAB 标识符。这是因为“Adj Close”之间的空格。

# java - RESTful Web 服务日食

> ID：13115571
> 
> 赞同：2
> 
> 时间：2012-10-29T03:36:55.743
> 
> 标签：java, eclipse, web-services, rest, jersey

我遵循了一个非常好的教程，它适用于`GET`http 方法，但由于某种原因，当我尝试访问服务器返回的`POST`or方法时：`PUT`

> HTTP 状态 405 - 不允许的方法

这就是我在教程中所做的，

*   我创建了一个新的动态 Web 项目
*   我导入了 jersey RESTful 实现
*   我创建了一个新的 java 类并设置了一些球衣注释
*   我为它编辑了 web.xml 文件，以便在启动时创建一个 servlet，并设置一些 Jersey 并将其指向映射它的 Java 类。

就是这样，我在 tomcat 6 应用服务器上运行了该应用程序。

因此，当我遵循我的类的路径时，我因此使用了一个`@GET`方法，它工作顺利，但是当我尝试`@GET`用它替换注释时`@POST`，返回上面的错误。

web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web- app_2_5.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
         id="WebApp_ID" version="2.5">

  <display-name>RESTfulTest</display-name>

  <servlet>
      <servlet-name>NAME</servlet-name>
      <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
      <init-param>
          <param-name>com.sun.jersey.config.property.packages</param-name>
          <param-value>com.RESTful.Test</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
      <servlet-name>NAME</servlet-name>
      <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
 </web-app> 
```

我的带有球衣注释的 Java 类：

```
package com.RESTful.Test;

import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

@Path("/resttest")
public class Test {

    //this WORKS!
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String getTestString()
    {
        return "Hello this is a test post";
    }
    //this returns the error
    @POST
    @Produces(MediaType.TEXT_PLAIN)
    public String getTestString2()
    {
        return "Hello this is a test post";
    }
    //this returns the error
    @PUT
    @Path("{param1}")
    @Produces(MediaType.TEXT_PLAIN)
    public String getTstWithInput(@PathParam("/param1") 
            String param)
    {
        return "hello "+param;
    }
    //this returns the error
    @PUT
    @Path(value="/putTest")
    @Produces(MediaType.TEXT_PLAIN)
    public String getTstWithInput2(@PathParam("/param1") 
            String param)
    {
        return "hello "+param;
    }
} 
```

请注意，除了我正在测试的方法之外，我已经尝试记录所有结果，但结果相同。我知道我不能同时运行其中一些，它们都只是测试。

我从 URL 调用 REST 资源：

*   “http://localhost/RESTfulTest/rest/resttest/”

*   “http://localhost/RESTfulTest/rest/resttest/myname”

*   “http://localhost/RESTfulTest/rest/resttest/putTest”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:16:13.080

像这样试试

```
return Response.status(200).entity("Sample Response").type(MediaType.TEXT_PLAIN).build(); 
```

更多详情：http: [//jersey.java.net/nonav/documentation/latest/user-guide.html](http://jersey.java.net/nonav/documentation/latest/user-guide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:46:12.660

确保正确调用其余资源。Curl 可以成为一个很好的测试工具

```
curl -XPUT http://localhost/RESTfulTest/rest/resttest/putTest 
```

# ruby-on-rails - 如何在 rails 中指定具有 2 个外键的表？

> ID：13115572
> 
> 赞同：0
> 
> 时间：2012-10-29T03:37:07.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

如果我有一个旧数据库，其中两个实体之间的关系在不同的表中定义。如何在 Rails 中创建这种关系？

我要介绍的基本关系是：

---管理员：

```
First_name
Last_name
id 
```

---网站：

```
id
subject 
```

---Admin_Sites

```
 id
 teacher_id
 class_id 
```

我知道在rails中我只会使用belongs_to：和has_many：但是如果我有一个（不断更新的）teach_class表，我需要以某种方式指定rails需要查找谁与哪个类相关的关系。我不知道如何指定这一点。是否可以在类模型中以某种方式将 :foreign_key 指定为“teach_class.teacher_id”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:03:07.723

在教师模型中，您将拥有

```
has_many :teach_classes
has_many :classes, :through => :teach_classes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:24:14.940

看到这个博客 has_many ：通过关系 - [http://ruby-on-rails-dipak-panchal.blogspot.in/2012/10/has-many-through-relationship.html](http://ruby-on-rails-dipak-panchal.blogspot.in/2012/10/has-many-through-relationship.html)

```
class Admin < ActiveRecord::Base
  has_many :admin_sites
  has_many :sites, :through => :admin_sites
end

class Site < ActiveRecord::Base
  has_many :admin_sites
  has_many :admins, :through => :admin_sites
end

class AdminSites < ActiveRecord::Base
  belongs_to :admin
  belongs_to :site
end 
```

# excel - 如何使用苹果脚本在excel中设置常数系列值

> ID：13115576
> 
> 赞同：1
> 
> 时间：2012-10-29T03:38:10.890
> 
> 标签：excel, applescript

如何使用苹果脚本在excel中设置常数系列值。

```
 tell worksheet 1 of active workbook
      set obj to make new chart object at end with properties{ 
                                     left position:120,top:50,width: 120,height:150}  
 set ochart to chart of obj    
      tell ochart
           make new series at end with properties {series values:"={1}"}
      end tell
 end tell

 This script through error(Microsoft Excel got an error:Can't make class series)

Please replay 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:56:20.993

我不确定我的语法是否错误或者这是一个错误。

![系列](../Images/6659431ee05504b236755213a48d89d1.png)

您希望能够使用以下方法创建具有常量的新系列：

```
set newSeries to make new series at end with properties {name:"tempSeriesName", series values:{50}} 
```

但是，我只能使用一个范围来创建系列：

```
set newSeries to make new series at end with properties {name:"tempSeriesName", series values:"A2"} 
```

但是，创建系列后，您可以使用以下命令更新值：

```
set series values to {50} 
```

我的解决方法是在 A 列中找到第一个空白单元格并用一个值填充它。然后我使用此单元格创建范围，使用常量更新范围，然后将临时单元格恢复为空白。

```
tell application "Microsoft Excel"
    tell worksheet "Sheet1" of active workbook
        -- Find the first empty cell and populate it with 1
        set counter to 0
        repeat
            set counter to counter + 1
            set myRange to ("A" & counter as text)
            if value of range myRange = "" then
                set value of range myRange to "1"
                exit repeat
            end if
        end repeat

        set obj to make new chart object at end with properties {name:"chart1", left position:20, top:88, width:33, height:90}
        set ochart to chart of obj
        tell ochart
            set chart type to column clustered
            -- create the chart with the temporary value
            set newSeries to make new series at end with properties {name:"tempSeriesName", series values:myRange}
            -- update the chart with your constant value
            set series values of newSeries to {50}
        end tell
        set value of range myRange to ""
    end tell
end tell 
```

![图表](../Images/27a41754a54b1150bc48ab21cd98727f.png)

# c++ - QWebView 内存泄漏

> ID：13115577
> 
> 赞同：0
> 
> 时间：2012-10-29T03:38:15.677
> 
> 标签：c++, qt, qwebview

这是代码

```
QWebView* webView=new QWebView(this); 
 webView->page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);
webView->load(QUrl(newsUrl)); 
```

任何情况下删除后，都会有一些内存无法删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:19:28.687

如果您使用 this 在构造函数中设置对象父级

```
( QWebView* webView=new QWebView(this); ) 
```

那么你不应该直接调用 delete 当你作为父级提供的类将被销毁时，内存将被释放

如果你想使用 delete，那么只需像这样构造对象：

```
QWebView* webView=new QWebView(); 
```

# ruby - Ruby：在树表示中转换平面数组

> ID：13115580
> 
> 赞同：4
> 
> 时间：2012-10-29T03:39:18.840
> 
> 标签：ruby, tree

我正在尝试编写一个函数来将带有路径信息的平面数组转换为该数组的树表示。

目标是转换如下数组：

```
[
{ :name => "a", :path => [ 'a' ] },
{ :name => "b", :path => [ 'a', 'b' ] },
{ :name => "c", :path => [ 'a', 'b', 'c' ] },
{ :name => "d", :path => [ 'a', 'd' ] },
{ :name => "e", :path => [ 'e' ] }
] 
```

变成这样的：

```
[{:node=>{:name=>"a", :path=>["a"]},
  :children=>
   [{:node=>{:name=>"b", :path=>["a", "b"]},
     :children=>
      [{:node=>{:name=>"c", :path=>["a", "b", "c"]}, :children=>[]}]},
    {:node=>{:name=>"d", :path=>["a", "d"]}, :children=>[]}]},
 {:node=>{:name=>"e", :path=>["e"]}, :children=>[]}] 
```

我得到的最接近的结果是使用以下代码：

```
class Tree

  def initialize
    @root = { :node => nil, :children => [ ] } 
  end 

  def from_array( array )
    array.inject(self) { |tree, node| tree.add(node) }
    @root[:children]
  end 

  def add(node)
    recursive_add(@root, node[:path].dup, node)
    self
  end 

  private

  def recursive_add(parent, path, node)
    if(path.empty?)
      parent[:node] = node
      return
    end 
    current_path = path.shift
    children_nodes = parent[:children].find { |child| child[:node][:path].last == current_path } 
    unless children_nodes
      children_nodes = { :node => nil, :children => [ ] } 
      parent[:children].push children_nodes
    end 
    recursive_add(children_nodes, path, node)
  end 
end

flat = [ 
  { :name => "a", :path => [ 'a' ] },
  { :name => "b", :path => [ 'a', 'b' ] },
  { :name => "c", :path => [ 'a', 'b', 'c' ] },
  { :name => "d", :path => [ 'a', 'd' ] },
  { :name => "e", :path => [ 'e' ] } 
]

require 'pp'
pp Tree.new.from_array( flat ) 
```

但它非常冗长，我觉得它对于非常大的系列可能不是很有效。

在红宝石中实现这一目标的最干净和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:54:22.417

这是我的尝试。

```
array = [
{ :name => "a", :path => [ 'a' ] },
{ :name => "b", :path => [ 'a', 'b' ] },
{ :name => "c", :path => [ 'a', 'b', 'c' ] },
{ :name => "d", :path => [ 'a', 'd' ] },
{ :name => "e", :path => [ 'e' ] }
]

array
.sort_by{|h| -h[:path].length}
.map{|h| {node: h, children: []}}
.tap{|array| 
  while array.first[:node][:path].length > 1
    child = array.shift
    array
    .find{|h| h[:node][:name] == child[:node][:path][-2]}[:children]
    .push(child)
  end
}

# => [
  {:node=>{:name=>"e", :path=>["e"]}, :children=>[]},
  {:node=>{:name=>"a", :path=>["a"]}, :children=>[
    {:node=>{:name=>"d", :path=>["a", "d"]}, :children=>[]},
    {:node=>{:name=>"b", :path=>["a", "b"]}, :children=>[
      {:node=>{:name=>"c", :path=>["a", "b", "c"]}, :children=>[]}
    ]}
  ]}
] 
```

# ios - UIPicker 在转换到 ios6 时不显示数据

> ID：13115584
> 
> 赞同：0
> 
> 时间：2012-10-29T03:39:49.233
> 
> 标签：ios, xcode, uitableview

我刚刚将我的项目更新到 ios6 并发现我的 UIPicker 不再显示其中的数据。我真的不知道我能做些什么来确保它再次发生。有什么建议么？

添加角色TVC.h

```
#import <UIKit/UIKit.h>

@interface AddRoleTVC : UITableViewController <UIPickerViewDataSource, UIPickerViewDelegate> {

    IBOutlet UIPickerView *pickerView;
    NSMutableArray *arrayColors;
}
@end 
```

AddRoleTVC.m

```
 #import "AddRoleTVC.h"
    #import "UIAlertView+error.h"
    #import "API.h"
    #include <CommonCrypto/CommonDigest.h>

    @implementation AddRoleTVC

    // Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
    - (void)viewDidLoad {
        [super viewDidLoad];

        arrayColors = [[NSMutableArray alloc] init];
        [arrayColors addObject:@"Red"];
        [arrayColors addObject:@"Orange"];
        [arrayColors addObject:@"Yellow"];
        [arrayColors addObject:@"Green"];
        [arrayColors addObject:@"Blue"];
        [arrayColors addObject:@"Indigo"];
        [arrayColors addObject:@"Violet"];
    }
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {

    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {

    return [arrayColors count];
}

- (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

    return [arrayColors objectAtIndex:row];
}

- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    NSLog(@"Selected Color: %@. Index of selected color: %i", [arrayColors objectAtIndex:row], row);
}

    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T03:47:48.493

您使用了`IBOutlet`To Picker 视图，因此您在 .Xib 文件中设置了 Delegate 和数据源。它必须工作。

![在此处输入图像描述](../Images/2f910c74b0d5e6868295cb29e439514c.png)

# c# - 将文件上传到我的网站

> ID：13115597
> 
> 赞同：1
> 
> 时间：2012-10-29T03:41:49.233
> 
> 标签：c#, .net

我在这里看到了很多这样的问题，但由于某种原因，我无法让任何工作.. 我花了大约 3 个小时尝试我能找到的所有东西并对其进行修改，但没有成功。这是我网站上的表格：

```
<form action="http://site.com" method="post" enctype="multipart/form-data" >
<input name="upfile" type="file" size="100">
<input name="submit" type="submitfile" size="100" value="submit file">

<input type="checkbox" name="submitpublic">
"The file will be visible to anyone"
</form> 
```

我还需要选中复选框，默认情况下未选中。我会将 url 发布到我的网站，但它尚未托管，我正在寻找一个接受文件共享的好托管服务提供商（嵌入问题的家伙 ;)）

# python - 如何测试基于 appengine/drive/google api 的应用程序？

> ID：13115599
> 
> 赞同：2
> 
> 时间：2012-10-29T03:42:07.187
> 
> 标签：python, google-app-engine, google-drive-api, google-api-python-client

身份验证和基于发现的服务 api 涉及多个组件。

一个测试请求处理程序如何使用来自 oauth2client（例如 oauth_required 等）、httplib2、服务和上传的装饰器进行包装？

是否有任何常用的模拟或存根？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:20:25.887

apiclient 包使用模拟 http 和请求类进行自己的测试。它们位于 apiclient/http.py 中，您可以看到如何在整个测试套件中使用它们。

# objective-c - 如何从客户的 ipad 日志中找到崩溃位置？

> ID：13115602
> 
> 赞同：2
> 
> 时间：2012-10-29T03:42:39.207
> 
> 标签：objective-c, ios, xcode, crash

我知道我的应用程序表单客户的 iPad 日志中发生了崩溃，例外是：- `[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array`，但我无法在代码中定位此崩溃，也无法重现它，因为我对这次崩溃知之甚少。我需要帮助，非常感谢。

# c - 无法将负输入设置为零。如何设置负数组？

> ID：13115605
> 
> 赞同：0
> 
> 时间：2012-10-29T03:43:23.247
> 
> 标签：c

以下代码适用于所有正输入，但负值是虚假的。如果负值最初设置为 0，它会起作用，因为它们确实相加。最后举例。

```
#include <stdio.h>                                                             /* Necessary header */
#define MAX_RESPONDENTS 6
#define MIN_RESPONSE_VALUE -100                                                /* Abbreviated MiRV */
#define MAX_RESPONSE_VALUE 86                                                   /* Abbreviated MaRV */
#define RESPONSE_VALUE 187                                                      /* Equals |(MiRV)| + or - |(MaRV)| + 1 */
#define STOP 3
#define BREAK 1

int main(void)
{
    CountRating();

    return 0;
}

CountRating()
{
    int ratingCounters, rating[RESPONSE_VALUE] = {0}, Counter, response;

    for (ratingCounters = 0; ratingCounters < MAX_RESPONDENTS;)
    {
        int response = ratingCounters, stop = STOP;
        printf("Enter a integer rating between %d and %d for the product: ", MIN_RESPONSE_VALUE, MAX_RESPONSE_VALUE);
        scanf("%d", &response);

        if (response <= MAX_RESPONSE_VALUE && response >= MIN_RESPONSE_VALUE)
            stop = STOP;
        else
        {
            int stopElse = stop;
            if (stopElse < BREAK)
                break;
            else
            {
                do
                {
                    printf("\nNot within range. Try again.\nYou have %d more attempts before program outputs total:", stop);
                    scanf("%d", &response);
                    printf("\n");
                    --stop;
                    if (stop < BREAK)
                    break;
                } while (response > MAX_RESPONSE_VALUE || response < MIN_RESPONSE_VALUE);
            }   if (stop < BREAK)
                break;
        }
        ++rating[response];
        ++ratingCounters;

    }
    printf("\nRating            Number of Responses\n");
    printf("------            -------------------");

    for (Counter = MAX_RESPONSE_VALUE; Counter >= MIN_RESPONSE_VALUE; --Counter)
    {
        printf("\n%3d%24d", Counter, rating[Counter]);
    }
} 
```

示例输出：

```
Enter a integer rating between -100 and 86 for the product: 66
Enter a integer rating between -100 and 86 for the product: 66
Enter a integer rating between -100 and 86 for the product: 66
Enter a integer rating between -100 and 86 for the product: 66
Enter a integer rating between -100 and 86 for the product: 66
Enter a integer rating between -100 and 86 for the product: 55

Rating            Number of Responses
------            -------------------
 86                       0
 85                       0
 84                       0
 83                       0
 82                       0
 81                       0
 80                       0
 79                       0
 78                       0
 77                       0
 76                       0
 75                       0
 74                       0
 73                       0
 72                       0
 71                       0
 70                       0
 69                       0
 68                       0
 67                       0
 66                       5
 65                       0
 64                       0
 63                       0
 62                       0
 61                       0
 60                       0
 59                       0
 58                       0
 57                       0
 56                       0
 55                       1
 54                       0
 53                       0
 52                       0
 51                       0
 50                       0
 49                       0
 48                       0
 47                       0
 46                       0
 45                       0
 44                       0
 43                       0
 42                       0
 41                       0
 40                       0
 39                       0
 38                       0
 37                       0
 36                       0
 35                       0
 34                       0
 33                       0
 32                       0
 31                       0
 30                       0
 29                       0
 28                       0
 27                       0
 26                       0
 25                       0
 24                       0
 23                       0
 22                       0
 21                       0
 20                       0
 19                       0
 18                       0
 17                       0
 16                       0
 15                       0
 14                       0
 13                       0
 12                       0
 11                       0
 10                       0
  9                       0
  8                       0
  7                       0
  6                       0
  5                       0
  4                       0
  3                       0
  2                       0
  1                       0
  0                       0
 -1                      55
 -2                 2686244
 -3                 2686244
 -4                      -3
 -5                 4206858
 -6                 4199517
 -7              1965606432
 -8                      -2
 -9              -533773290
-10              1965657301
-11                 2686916
-12              1965975817
-13                 2685900
-14                      28
-15                 2685972
-16                       0
-17                 2686720
-18             -1792050746
-19              1965606432
-20              1966156064
-21                       1
-22              1965606483
-23                 2685944
-24                      17
-25              1965552124
-26                 2685880
-27              1966146752
-28              1965532226
-29                 2685868
-30              1966156064
-31                       1
-32                       0
-33              1966156064
-34                       0
-35                      28
-36                 6105760
-37                       1
-38              1965551966
-39              1965572357
-40                      -2
-41              -533740746
-42              1965657301
-43                 2685928
-44              1966156064
-45                 2685768
-46                      28
-47              1965572357
-48                       0
-49              1966156064
-50                      28
-51             -1792050874
-52              1965572357
-53                       1
-54              1965572401
-55                 2685816
-56                 6097440
-57              1965552169
-58                 2685752
-59                      36
-60              1966146816
-61                       0
-62              1966146816
-63                      36
-64                       0
-65             -1792050942
-66              1965552271
-67              1965552263
-68                 2685756
-69                 6105754
-70                    4104
-71                    4096
-72                 6097428
-73                      36
-74                      -2
-75               358724962
-76              1999401429
-77                 2685928
-78                      -1
-79                 2685472
-80                16777216
-81                 6094848
-82                       1
-83                       0
-84                 6105755
-85                 6105760
-86                 6095044
-87                       8
-88                       2
-89              1999167428
-90                       1
-91                 6095044
-92              -218103565
-93                 2685640
-94              -254549010
-95                       0
-96              1136989510
-97              -503245737
-98                 2752512
-99                 6098688
-100                       0
Process returned 0 (0x0)   execution time : 9.734 s
Press any key to continue. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:51:03.793

Rating 是一个大小为 187 的数组。您正在索引负值，这意味着 C 在数组开始之前访问内存并打印存储在那里的任何垃圾值。您只能合法地访问 0 到 186 之间的值，因此您应该在访问和存储评级时将 100 添加到索引中。这样，数字 -100 对应于索引 0，-99 对应于索引 1，依此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T03:50:57.300

数组的索引总是从零开始。您不应为数组传递负索引。如果您想要负索引，请在索引中添加一个常量。

在您的示例代码中，您可以将 -MIN_RESPONSE_VALUE 添加到索引中，因此`rating[k - MIN_RESPONSE]`如果您想访问 index ，请访问`k`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T03:54:15.777

您的代码正在分配给数组的负索引。这通常不好 - 您只保留了 0:RESPONSE_VALUE-1 的内存，写入该范围之外的任何内容都会产生不可预知的后果。您有两个通用选项。一种是将您的范围 MIN_RESPONSE_VALUE:MAX_RESPONSE_VALUE 映射到 0:(MAX_RESPONSE_VALUE-MIN_RESPONSE_VALUE)。即每当您索引评级时减去 MIN_RESPONSE_VALUE ：

```
++rating[response-MIN_RESPONSE_VALUE]; 
```

另一种是重新指向响应，给它一个新的零点。这将使您不必一直减去 MIN_RESPONSE_VALUE，但可能会让读者感到困惑：

```
rating -= MIN_RESPONSE_VALUE; 
```

在 for 循环之前执行此操作。这样做之后， rating[MIN_RESPONSE_VALUE] 是一个有效的索引，即使它是负数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T03:55:30.997

实际上负指数是完全可以接受的。问题是您的索引进入了专用于堆栈上数组的内存之外的区域。改变`rating[-1]`你改变数组外的堆栈，从而破坏它。难怪那里的值没有用 初始化为零`rating[RESPONSE_VALUE] = {0}`，它们又在数组之外并向您显示堆栈上的一些数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T04:48:09.637

花了我一段时间，但我明白了。谢谢。

```
#include <stdio.h>                                                             /* Necessary header */
#define MAX_RESPONDENTS 6
#define MIN_RESPONSE_VALUE -100                                                /* Abbreviated MiRV */
#define MAX_RESPONSE_VALUE 86                                                   /* Abbreviated MaRV */
#define RESPONSE_VALUE 187                                                      /* Equals |(MiRV)| + or - |(MaRV)| + 1 */
#define STOP 3
#define BREAK 1
#define DOUBLE_RESPONSE_VALUE 374

int main(void)
{
    CountRating();

    return 0;
}

CountRating()
{
    int ratingCounters, rating[DOUBLE_RESPONSE_VALUE] = {0}, Counter, response;

    for (ratingCounters = 0; ratingCounters < MAX_RESPONDENTS;)
    {
        int response = ratingCounters, stop = STOP;
        printf("Enter a integer rating between %d and %d for the product: ", MIN_RESPONSE_VALUE, MAX_RESPONSE_VALUE);
        scanf("%d", &response);

        if (response <= MAX_RESPONSE_VALUE && response >= MIN_RESPONSE_VALUE)
            stop = STOP;
        else
        {
            int stopElse = stop;
            if (stopElse < BREAK)
                break;
            else
            {
                do
                {
                    printf("\nNot within range. Try again.\nYou have %d more attempts before program outputs total:", stop);
                    scanf("%d", &response);
                    printf("\n");
                    --stop;
                    if (stop < BREAK)
                    break;
                } while (response > MAX_RESPONSE_VALUE || response < MIN_RESPONSE_VALUE);
            }   if (stop < BREAK)
                break;
        }
        if (response < 0)
            ++rating[response + abs(RESPONSE_VALUE)];
        else
            ++rating[response + abs(RESPONSE_VALUE)];
        ++ratingCounters;

    }
    printf("\nRating            Number of Responses\n");
    printf("------            -------------------");

    for (Counter = MAX_RESPONSE_VALUE; Counter >= MIN_RESPONSE_VALUE; --Counter)
    {
        printf("\n%3d%24d", Counter, rating[Counter + (RESPONSE_VALUE)]);
    }
} 
```

# events - 使用 Dojo 在特定的小部件方法中发布主题

> ID：13115606
> 
> 赞同：0
> 
> 时间：2012-10-29T03:43:27.030
> 
> 标签：events, templates, dojo

我希望能够在 _Templated 对象发生某些事情时发布特定主题。现在，我只是简单地创建一些小部件混合：

```
[...]
return declare('hotplate.hotDojoAuth.LoginForm', [_WidgetBase, _TemplatedHooksMixin, _TemplatedMixin, _WidgetsInTemplateMixin ], { 
```

_TemplatedHooksMixin 简单地发出：

```
define([
  'dojo/_base/declare',
  'dojo/_base/lang',
  'dojo/topic',

  ], function(
    declare
  , lang
  , topic

  ){
    return  declare(null, {

      templatedHooks: true,

      constructor: function(){
        this.templatedHooks = true;
        topic.publish('hotplate/hotHooks/constructor', this);
      },

      buildRendering: function(){
        topic.publish('hotplate/hotHooks/buildRendering/before', this);
        this.inherited(arguments);
        topic.publish('hotplate/hotHooks/buildRendering/after', this);
      },

      destroyRendering: function(){
        topic.publish('hotplate/hotHooks/destroyRendering/before', this);
        this.inherited(arguments);
        topic.publish('hotplate/hotHooks/destroyRendering/after', this);
      },

      postCreate: function(){
        topic.publish('hotplate/hotHooks/postCreate/before', this);
        this.inherited(arguments);
        topic.publish('hotplate/hotHooks/postCreate/after', this);
      },

      startup: function(){
        topic.publish('hotplate/hotHooks/startup/before', this);
        this.inherited(arguments);
        topic.publish('hotplate/hotHooks/startup/after', this);
      },

      destroy: function(){
        topic.publish('hotplate/hotHooks/destroy/before', this);
        this.inherited(arguments);
        topic.publish('hotplate/hotHooks/destroy/after', this);
      }

    });
  }
); 
```

问题：

1）代码重复，主要是因为它使用了“this”、“arguments”、“inherited”，都在尖叫“Don't duck with me！” （尤其是this.inherited）。. 关于使用简单参数制作一个函数的任何提示？

2）这是一种半理智的做法吗？这个想法是允许与我的库无关的其他小部件更改 _Templated 小部件的内容。

3）如果这是一条好的路径（评论？），你认为我所说的路径是理智的吗？

谢谢！

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:20:35.753

我认为你应该看看使用`dojo/aspect`

[http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html](http://dojotoolkit.org/reference-guide/1.8/dojo/aspect.html)

```
constructor: function(){
    this.templatedHooks = true;

    var methodsToDecorate = ["buildRendering", "destroyRendering", ...];
    array.forEach(methodsToDecorate, function(methodName) {
        aspect.before(this, methodName, function(deferred){
            topic.publish('hotplate/hotHooks/' + methodName + '/before', this);
        });
        aspect.after(this, methodName, function(deferred){
            topic.publish('hotplate/hotHooks/' + methodName + '/after', this);
        });
    });

    topic.publish('hotplate/hotHooks/constructor', this);
}, 
```

# nlp - 时间线检测

> ID：13115607
> 
> 赞同：1
> 
> 时间：2012-10-29T03:43:30.523
> 
> 标签：nlp, data-mining

我正在尝试使用文本分类来解决时间线检测问题。作为一个新手，我对如何解决这个问题感到困惑。这是分类问题吗？即，我可以使用年份（时间线）作为结果并将其作为分类问题来解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:39:03.780

您应该能够按照您的建议将此作为分类问题来解决。一个选项可以是查找或构建一个由带有设置周期标记的文本组成的语料库，并在该数据集上训练分类算法。

另一种选择是在这样的数据集上训练一个[词空间模型](http://www.sics.se/~mange/papers/RI_intro.pdf)，并为不同的时间段（例如 50 年代、60 年代等）生成向量。然后，您可以为要分类的文本创建一个文档向量，并找出这些时间向量中的哪一个产生最佳匹配。

可能行不通，但看看你得到什么结果可能会很有趣。

希望这可以帮助！

# java - 我如何为我的 jsp/java web 项目实现使用 twitter 登录

> ID：13115608
> 
> 赞同：4
> 
> 时间：2012-10-29T03:44:15.483
> 
> 标签：java, jsp, twitter, struts1

我在 Struts1(Java framework) 中创建了我的项目。我正在使用我的自定义登录表单进行登录/身份验证。但我的老板希望用户使用 Twitter 帐户登录。就像在 Stackoverflow 中一样。

我通过从 json 请求调用 Facebook Graph Api 为 Facebook 进行的登录类型相同。但我对 twitter 登录感到困惑。[即使我从这里](https://dev.twitter.com/docs/auth/implementing-sign-twitter)阅读了 twitter 文档。还是很迷茫。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T08:02:25.557

你可以查看我的代码 但是你需要从 twitter 获取 ConsumerKey ,ConsumerSectret 和 accessToken

```
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;
import twitter4j.auth.RequestToken;

public class TwitterUtils {

public static void main(String[] args) {
    try {

        final String consumerKey = "**********";
        final String consumerSecret = "**********";
        Twitter twitter = new TwitterFactory().getInstance();
        twitter.setOAuthConsumer(consumerKey, consumerSecret);
        RequestToken requestToken = twitter.getOAuthRequestToken();

        String token = requestToken.getToken();
        String tokenSecret = requestToken.getTokenSecret();
        System.out.println("My token :: " + token);
        System.out.println("My token Secret :: " + tokenSecret);

        //AccessToken a = new AccessToken(token, tokenSecret);
        //twitter.setOAuthAccessToken(a);
        twitter.updateStatus("If you're reading this on Twitter, it worked!");

    } catch (TwitterException e) {
        e.printStackTrace();
    }
}//main
}/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T19:04:24.547

它需要在 AsyncTask 上下文中

```
final String consumerKey = "**********";
    final String consumerSecret = "*********";

    new AsyncTask<Void, Void, RequestToken>(){
        @Override
        protected RequestToken doInBackground(Void... voids) {
            try {
                Twitter twitter = new TwitterFactory().getInstance();
                twitter.setOAuthConsumer(consumerKey, consumerSecret);

                RequestToken requestToken = twitter.getOAuthRequestToken();
                return requestToken;
            } catch (TwitterException e) {
                e.printStackTrace();
                return null;
            }
        }

        @Override
        protected void onPostExecute(RequestToken requestToken) {
            super.onPostExecute(requestToken);
            if(requestToken == null)
                return;
            String token = requestToken.getToken();
            String tokenSecret = requestToken.getTokenSecret();
            Log.i("INFO", "My token :: " + token);
            Log.i("INFO", "My token Secret :: " + tokenSecret);
        }
    }.execute(); 
```

# windows - 适用于 Windows Phone 7 的英语单词词典数据库

> ID：13115612
> 
> 赞同：3
> 
> 时间：2012-10-29T03:45:05.877
> 
> 标签：windows, silverlight, windows-phone-7, dictionary

我想将英语词典功能集成到我的 Windows Phone 7 应用程序中。在某个地方是否有这样的文件或数据库可用，其中包含所有有效的英语单词？

顺便说一句，我只需要包含单词列表的东西来验证用户的输入。不需要其他东西，如定义、语音、词库等……。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:58:53.327

试试[这个链接](http://wordlist.sourceforge.net/)（文本文件）。它显然没有所有有效的词，但它应该是相当有效的。

集成的拼写检查 API 不会向开发人员公开，因此您必须使用这样的文本文件。

此外，如果您只需要检查用户在某种文本输入中输入的单词的有效性，那么您需要做的就是`InputScope="Text"`在 XAML 声明中进行设置。

希望这可以帮助。

# java - 从需要附加文件的 Linux 命令行运行 Java 程序

> ID：13115613
> 
> 赞同：1
> 
> 时间：2012-10-29T03:45:07.827
> 
> 标签：java, linux, postgresql, jdbc

我正在按照[本教程](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)制作一个与数据库交互的程序。我被困在运行它的最后一步。给定的例子是 `C:\test>java -cp c:\test\postgresql-8.3-603.jdbc4.jar;c:\test JDBCExample`

我的主目录中有 .class 文件和 .jar 用于 JDBC。我试过

`java -cp /home/JohnF/postgresql-9.2-1000.jdbc4.jar;/home/JohnF/QueryDB.class` 我得到“无法执行二进制文件”
我试过 了`java -cp /home/JohnF/postgresql-9.2-1000.jdbc4.jar;/home/JohnF/QueryDB` ，我得到了“没有这样的文件或目录”
我试过 `java -cp /home/JohnF/postgresql-9.2-1000.jdbc4.jar;/home/JohnF QueryDB` 了，我得到了“JohnF 是一个目录”

我曾经`chmod`将文件权限设置为`777`. 我如何让它运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T03:52:33.640

您使用分号作为类路径分隔符 - 这在 Linux 上不起作用。尝试替换“;” 在类路径中使用“：”，它应该可以工作。

**编辑：**解释这里发生的事情。在 Linux 中，“;” 是命令分隔符。你的线

`java -cp /home/JohnF/postgresql-9.2-1000.jdbc4.jar;/home/JohnF QueryDB`

真的扩展成2个一个一个执行：

```
java -cp /home/JohnF/postgresql-9.2-1000.jdbc4.jar
/home/JohnF QueryDB 
```

第一个什么都不做，成功退出。第二次尝试`/home/JohnF`作为可执行文件调用，这实际上不是一个可执行文件，而是一个目录！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:17:29.933

修复：使用 : 而不是**;**

为什么？*nix 环境中的文件分隔符是 ' **:** ' 而不是 ' **;** '

# javascript - 如果启用了自动播放，则无法在加载时暂停 videojs

> ID：13115627
> 
> 赞同：2
> 
> 时间：2012-10-29T03:48:02.783
> 
> 标签：javascript, autoplay

这是我在stackoverflow中的第一个问题，请原谅我的错误。

我一直在尝试使用 videojs 创建一个简单的 CMS，用户可以在其中上传他们的视频并自定义他们的属性（例如：自动播放、循环和控件）。

当他们更改属性时，我将自动重新创建整个标签并重新初始化它。我这样做是为了提供正确的预览，尤其是在 firefox 上，因为用户将上传 mp4，如果我没有重新初始化，firefox 将给出“不支持”警告标志（videojs 将自动转换为 flash）。

现在的问题是当用户检查“自动播放”属性时，因为当我初始化视频时它会自动播放并且我不希望在 CMS 中出现这种行为（尽管我希望在已发布的站点中出现这种行为）。

我一直试图在播放器准备好后暂停播放器，但它仍在播放。

我的假设是暂停命令是在从自动播放属性播放命令之前触发的。

这是用于此的 html 标记

```
<video id="example_video_1" class="video-js vjs-default-skin" controls width="640" height="264" poster="http://video-js.zencoder.com/oceans-clip.jpg" autoplay preload="auto" data-setup="{}"> 
   <source type="video/mp4" src="http://video-js.zencoder.com/oceans-clip.mp4"> 
</video> 
```

这是我用来初始化和暂停视频的那个

```
 _V_(example_video_1).ready( function() {
       var myplayer = this;
       myplayer.pause(); 
   }); 
```

任何想法？非常感谢您的帮助。最坏的情况是，如果所有其他方法都失败了，我可以为预览和发布的网站使用不同的标签（预览没有自动播放）。我为此创建了一个小提琴：http: [//jsfiddle.net/F8JhL/2/](http://jsfiddle.net/F8JhL/2/)

编辑：我注意到有时暂停事件确实有效，虽然不是自动的（视频播放后大约 1 到 2 秒），但更多时候它根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-03T08:14:53.673

我在使用 4.1.0 版的 videojs 时发现了同样的问题。当我升级到 5.1.0 版时，这个冲突就消失了。

[您可以在https://github.com/videojs/video.js/releases](https://github.com/videojs/video.js/releases)下载最新版本

所以我认为这个错误已经修复（但我找不到这个修复的提交修订）。

# python - 如何在python中对对象使用三元运算符

> ID：13115629
> 
> 赞同：2
> 
> 时间：2012-10-29T03:48:15.453
> 
> 标签：python, django, operators

我想像这样访问对象属性

```
'region'     :obj.region ? obj.region.name : "None" 
```

事情是在我的课堂上，我希望如果 obj.region 不存在，那么我不希望在该区域中。但是，如果它具有关联的区域，那么我想要该区域的名称。

该区域不是真假而是对象

怎么能这样

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T03:50:53.403

正如评论中指出的：

```
'region': obj.region.name if obj.region else "None" 
```

但如果它应该是，我不会感到惊讶：

```
'region': obj["region"]["name"] if "region" in obj and obj["region"] else "None" 
```

取决于到底是什么`obj`——它是一个实际的对象还是一个字典。

# apache - .htaccess mod_rewrite - 不匹配的模式

> ID：13115635
> 
> 赞同：1
> 
> 时间：2012-10-29T03:50:52.223
> 
> 标签：apache, .htaccess, mod-rewrite

我无法让不匹配（否定）的 mod_rewrite 模式正常工作。

在下面的示例中，我希望将所有请求重定向到“/promo-page”，但是，不允许重定向循环（因此是 RewriteCond）。

```
### Request URL: http://example.com/promo-page ###
RewriteCond %{REQUEST_URI} !^/$
RewriteCond %{REQUEST_URI} !/promo-page
RewriteRule .* /promo-page [R=302,L] 
```

当发出“/promo-page”请求时，会忽略 RewriteCond 规则并发生重定向循环。

为什么感叹号（！）不起作用的任何想法？语法不正确吗？

提前致谢。

**更新**

我还在在线 mod_rewrite 测试器中尝试了这些规则，但它们也不起作用（如果您使用“home”作为 URL，使用“/home”作为 REQUEST_URI）。

[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:06:49.580

删除`RewriteCond %{REQUEST_URI} !^/$`- 正如乔恩所说，这将永远是真的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:28:17.070

感谢大家的回答和想法。我终于找到了这个问题，所以这里是细节，希望它可以帮助其他人。

令人困惑的是 .htaccess 文件中的更多规则。这些没有发布在我原来的问题中，因为我不相信它们是相关的，甚至会影响结果。

这些附加规则将 Clean URL 重新写入 GET 请求。我的（错误）印象是 %{REQUEST_URI} 还包括附加到 URL 末尾的 GET 变量。它没有。您必须使用 %{QUERY_STRING} 单独检查 GET 查询字符串的内容。

Mod-Rewrite Logging 在帮助我调试这个问题方面非常有用。我无法在我们的实时/生产 cPanel 服务器上启用它，所以我在我的 PC 上安装了 XAMPP，启用了日志记录并在本地使用重写规则，直到我让它工作为止。

# xml - 第一个最后一个元素变化

> ID：13115639
> 
> 赞同：0
> 
> 时间：2012-10-29T03:51:19.290
> 
> 标签：xml, xslt, xpath

XSLT XML 问题。

我对我之前的问题有一个变体。我必须输出每个部分的第一页和最后一页元素。如下所示。任何帮助都感激不尽。

谢谢JJ。

输入：

```
<root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="2" section="Arsenal">Arsenal</page> 
  <page number="3" section="Arsenal">Arsenal</page> 
  <page number="4" section="Arsenal">Arsenal</page> 
  <page number="5" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="8" section="Chelsea">Chelsea</page> 
  <page number="9" section="Chelsea">Chelsea</page> 
  <page number="10" section="Chelsea">Chelsea</page> 
  <page number="11" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="14" section="ManUnited">ManUnited</page> 
  <page number="15" section="ManUnited">ManUnited</page> 
  <page number="16" section="ManUnited">ManUnited</page> 
  <page number="17" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="20" section="ManCity">ManCity</page> 
  <page number="21" section="ManCity">ManCity</page> 
  <page number="22" section="ManCity">ManCity</page> 
  <page number="23" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page> 
 </root> 
```

输出：

```
 <root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page> 
 </root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:06:03.900

采用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:template match="/root">
    <xsl:copy>
      <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="page">
    <xsl:copy-of select=". | key('k', @section)[last()]"/>
  </xsl:template>
</xsl:stylesheet> 
```

# objective-c - 从 ABNewPersonViewController 的 Overridden Done Button Tap 获取 ABRecordRef

> ID：13115647
> 
> 赞同：0
> 
> 时间：2012-10-29T03:52:41.707
> 
> 标签：objective-c, ios

我有一个继承自 的类，并且我已经覆盖了点击按钮`ABNewPersonViewController`时调用的方法。`Done`我的问题是，如何`ABRecordRef`在我的自定义方法中访问？这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStylePlain target:self action:@selector(SaveMember)];
}

- (void)SaveMember
{
    NSString *firstName = (NSString *)CFBridgingRelease(ABRecordCopyValue(/*???? - This is where the ABRecordRef should go*/, kABPersonFirstNameProperty));

    [self dismissModalViewControllerAnimated:YES];
} 
```

# java - 休眠/mysql 连接问题

> ID：13115648
> 
> 赞同：5
> 
> 时间：2012-10-29T03:52:50.050
> 
> 标签：java, mysql, hibernate

我们正在使用 Hibernate 3 ORM 开发一个 java struts2 框架 web 应用程序。我们使用 mysql 作为我们的数据库。

我们在日志中发现了一些与数据库相关的异常。与数据库的连接在配置的时间之前超时。以下是我们发现的公共异常。

```
104343235 [pool-6-thread-19] ERROR org.hibernate.util.JDBCExceptionReporter  - The last packet successfully received from the server was 100,838,460 milliseconds ago.  The last packet sent successfully to the server was 100,838,461 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.

org.hibernate.exception.JDBCConnectionException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.doList(Loader.java:2536)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102)
    at com.myproject.model.dao.entities.EntitiesDAO.getByIds(EntitiesDAO.java:148)

Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: The last packet successfully received from the server was 100,838,460 milliseconds ago.  The last packet sent successfully to the server was 100,838,461 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
    at sun.reflect.GeneratedConstructorAccessor345.newInstance(Unknown Source)104343242 [pool-6-thread-16] ERROR org.hibernate.util.JDBCExceptionReporter  - The last packet successfully received from the server was 100,838,544 milliseconds ago.  The last packet sent successfully to the server was 100,838,544 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.
104343242 [pool-6-thread-16] ERROR org.hibernate.util.JDBCExceptionReporter  - The last packet successfully received from the server was 100,838,544 milliseconds ago.  The last packet sent successfully to the server was 100,838,544 milliseconds ago. is longer than the server configured value of 'wait_timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.

at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3829)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2449)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2318)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:208)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1953)
    at org.hibernate.loader.Loader.doQuery(Loader.java:802)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2533)
    ... 21 more 
```

每天我们都在重新启动我们的应用服务器，作为对这个问题的临时修复。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T04:01:21.803

发生这种情况是因为 MySQL 服务器在超时后终止没有活动的连接。您需要在 dbcp 配置中添加几行尝试添加以下参数：

```
validationQuery="SELECT 1"
testOnBorrow="true 
```

它是如何工作的：连接池在返回连接之前尝试运行validationQuery。如果validationQuesry 失败，dbcp 会丢弃连接，创建一个新连接并将其返回。

这是一个例子：

```
<Resource   name="jdbc/cooldatabase"
            description="Strandls.com license database"
            auth="Container"
            type="javax.sql.DataSource"
            factory="org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory"
            driverClassName="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost:3306/cooldatabase?autoReconnect=true"
            username="cooluser"
            password="coolpassword"
            initialSize="0"
            maxActive="20"
            maxIdle="10"
            minIdle="0"
            maxWait="-1"
            validationQuery="SELECT 1"
            testOnBorrow="true"
            poolPreparedStatements="true"
            removeAbandoned="true"
            removeAbandonedTimeout="60"
            logAbandoned="true"/> 
```

您可以在这里找到完整的详细信息：http: [//amitcodes.wordpress.com/2008/07/26/16/](http://amitcodes.wordpress.com/2008/07/26/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:54:03.493

将连接池与 Hibernate 一起使用。例如`c3p0` [https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool](https://community.jboss.org/wiki/HowToConfigureTheC3P0ConnectionPool)。

# java - 安卓 Http API

> ID：13115652
> 
> 赞同：0
> 
> 时间：2012-10-29T03:53:14.697
> 
> 标签：java, android, web-services, rest

我正在尝试在 android 中编写一个 Http API。我正在使用 AsyncTask 运行对我的 Web 服务的调用。我对更新 UI 不感兴趣，而我想要的只是在我的应用程序逻辑中使用的数据。这是我到目前为止所拥有的：

```
public class DataManager{
    public static String result;

    public DataManager ()
    {

    }

    public String get ()
    {
        User user = new User ();
        user.execute("http://someuri/service/users/id/21001");
        return user.getResult();
    }
}

public class User extends AsyncTask <String,Void,String>{

    private String result;
    @Override
    protected String doInBackground(String... arg0) 
    {
        HttpClient client = new DefaultHttpClient();
        HttpGet get = new HttpGet (arg0[0]);

        try
        {
            HttpResponse response = client.execute (get);
            if (response.getStatusLine().getStatusCode () == 200)
            {
                HttpEntity entity = response.getEntity();
                return EntityUtils.toString(entity);
            }

        } 
        catch (ClientProtocolException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        this.result = result;
    }

    public String getResult ()
    {
        return result;
    }

} 
```

我想要一个典型的电话是： `DataManager manager = new DataManager ();` `String value = manager.get ();`

但是当我运行它时，我会返回 null。是什么导致了这种情况以及如何重构此代码以获得所需的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T03:58:50.377

线程的整个想法是它同时运行。基本上，这就是你正在做的事情：

```
User user = new User (); // Create User object
user.execute("http://someuri/service/users/id/21001"); // Start thread
return user.getResult(); // Return thread result 
```

但是，线程没有时间在“开始”和“返回结果”之间运行。

我建议使用某种回调；首先， make `get()`return`void`并删除该`return`语句。然后，您传入一些实现的对象`YourCallback`，然后`onCallback(result)`从内部调用`onPostExecute()`。

您的调用代码将如下所示：

```
DataManager x = new DataManager();
x.get(new YourCallback() {
    public void onCallback(String result) {
        // ...
    }
}); 
```

[在这个奇妙的答案](https://stackoverflow.com/a/3398416/1438733)中有一个更完整的例子。

# javascript - 在标签页中打开 Chrome 应用

> ID：13115654
> 
> 赞同：5
> 
> 时间：2012-10-29T03:53:40.540
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

此问题始于 Google Chrome 版本 23。当启动事件触发时，我的 Chrome 应用程序会打开一个选项卡以显示其 UI。

```
chrome.app.runtime.onLaunched.addListener(function() 
{
   chrome.tabs.create(
   {
      url: "../../index.html"
   });
}); 
```

此方案在 Google Chrome 版本 23 之前有效。现在运行我的应用程序时收到以下异常。

```
Error in event handler for 'app.runtime.onLaunched': Cannot call method 'create' of undefined TypeError: Cannot call method 'create' of undefined 
```

在开发人员工具中检查`chrome`对象后，我注意到`chrome.tabs`未定义。

我知道我不必在 manifest.json 中明确设置“选项卡”权限，因为根据[http://developer.chrome.com/extensions/tabs.html](http://developer.chrome.com/extensions/tabs.html)创建、更新和删除方法不需要“选项卡” “ 允许。

在尝试向 manifest.json 文件显式添加“选项卡”权限后，我在 chrome://chrome/extensions/ 上收到此应用程序的消息。

```
There were warnings when trying to install this extension: 'tabs' is only allowed for extensions and legacy packaged apps, and this is a packaged app. 
```

如果我按照[https://developers.google.com/chrome/web-store/docs/choosing](https://developers.google.com/chrome/web-store/docs/choosing)给出的图表进行操作，并选择了一个打包的应用程序，因为我的应用程序的 UI 并不小而且我不打算扩展 Chrome 的 UI 和我无法使用`chrome.tabs`然后如何在新的或现有的选项卡中打开我的应用程序的 UI 而不必创建弹出窗口（这很烦人且不友好）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-16T13:26:24.197

您是否尝试过 chrome.app.runtime.onLaunched 中的 window.open()

# c# - 如何在SqlBulkCopy 中操作excel 数据？

> ID：13115655
> 
> 赞同：0
> 
> 时间：2012-10-29T03:53:48.823
> 
> 标签：c#, asp.net, sql, sql-server

我正在将 excel 表导入到 sql server db 表中，例如：id | 数据（即日期）excel中日期的格式是mm/dd/yyyy我希望它以yyyy/mm/dd的形式存储在数据库中我不知道该怎么做以下是我上传excel的代码：

```
 using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                {
                   bulkCopy.DestinationTableName = "ExcelTable";
                   bulkCopy.WriteToServer(dr);

               }
                dr.Close(); 
```

我找到了一个转换日期的代码，但我不知道如何将此代码与上述代码集成：

```
 string a = "12/20/2012";
    DateTime dt = Convert.ToDateTime(a);
    string st = dt.ToString("yyyy/MM/dd");
    Label1.Text = a;
    Label2.Text = st; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:09:37.607

几年前这样做很好，但想法如下：

看起来好像您是从`DataReader`. 如果您使用自己的`DataTable`，您可以将数据以您选择的格式放入*其中*，然后将其写入`DataTable`服务器：

[http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx](http://msdn.microsoft.com/en-us/library/ex21zs8x.aspx)

# objective-c - IOS Grand Central Dispatch 带回调方法

> ID：13115657
> 
> 赞同：8
> 
> 时间：2012-10-29T03:54:46.530
> 
> 标签：objective-c, ios, concurrency, grand-central-dispatch

我没有在我的应用程序中使用 GCD 或太多线程，但我遇到了需要从另一个线程运行一两个方法的情况。一旦这个方法完成，我需要使用回调中的主线程调用另一个方法。我一直在四处寻找如何检测线程何时完成操作，但对该主题仍然不太清楚。

我创建了一个测试应用程序，并使用 viewDidLoad 方法作为一个快速示例。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        NSLog(@"viewDidLoad called");
        sleep(5);  // simulating a thread being tied up for 5 seconds

        dispatch_async(dispatch_get_main_queue(), ^{
            [self callbackMethod];  // method called after above thread has completed running
        });

    });

} 
```

这个例子是否适用于我正在尝试做的事情？运行应用程序时，似乎会在 sleep(5) 完成后调用回调方法。这是处理这种情况的正确方法还是我偏离了方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T04:03:02.077

你很准；这是下车和上主线程的标准模式。在这里查看我的答案：[https ://stackoverflow.com/a/13080519/341994](https://stackoverflow.com/a/13080519/341994)

例如我书中的代码，以这种方式构造：

[https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/bk2ch25p868mandelbrotGCD/ch38p1106mandelbrotNoThreading/MyMandelbrotView.swift](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/bk2ch25p868mandelbrotGCD/ch38p1106mandelbrotNoThreading/MyMandelbrotView.swift)

在那个例子中，看看如何`drawThatPuppy`离开主线程来进行耗时的计算，然后回到主线程来绘制界面。

# c# - C# 中的程序集绑定错误

> ID：13115659
> 
> 赞同：2
> 
> 时间：2012-10-29T03:55:26.367
> 
> 标签：c#, app-config, assemblybinding

我正在重定向 app.config 中的依赖程序集版本，并通过以下配置从指定位置加载 dll -

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="myassembly" culture="neutral" publicKeyToken="ksjdksjdskdjkdjskdjs"/>
        <bindingRedirect oldVersion="1.11" newVersion="1.22"/>
        <codeBase version="1.22" href="file://C:/libs/myassembly.dll"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

在绑定日志中，它似乎按预期重定向了版本，但随后与旧版本进行比较并失败：

```
LOG: Redirect found in application configuration file: 1.11 redirected to 1.22.
LOG: Using codebase from policy file: file:///C:/libs/myassembly.dll.
LOG: Post-policy reference: myassembly, Version=1.22, Culture=neutral, PublicKeyToken=ksjdksjdskdjkdjskdjs
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///C:/libs/myassembly.dll.
LOG: Assembly download was successful. Attempting setup of file: C:\libs\myassembly.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: myassembly, Version=1.11, Culture=neutral, PublicKeyToken=ffbc9a05441709bc
WRN: Comparing the assembly name resulted in the mismatch: Minor Version
ERR: The assembly reference did not match the assembly definition found.
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

我已经验证 C:/libs/myassembly.dll 是新版本。有人可以告诉这里可能是什么问题吗？非常感激。

# r - 通过公共列R合并不同长度的表

> ID：13115661
> 
> 赞同：4
> 
> 时间：2012-10-29T03:55:56.197
> 
> 标签：r

我有两张不同长度的表格，我需要将它们合并为两个公共列（季节和客户），并在没有公共元素时用 NA 填充单元格。下面我展示了我需要的两个原始表和最终表的一小部分。我尝试了很多事情都没有成功。

```
season  client.ID   qtty
1998    13  30
1999    13  30
2000    13  29
1998    28  18
1999    28  18
2000    28  18
1998    35  21
1999    35  21
2000    35  21

season  client.ID   vessel.ID   overLength
1998    28  29  17.1
1998    28  1809    4.26
1998    28  2215    9.45
1998    28  4173    5.8
1998    28  8151    4.5
1999    28  29  17.1
1999    28  1809    4.26
1999    28  2215    9.45
1999    28  4173    5.8
1999    28  8151    4.5
2000    28  29  17.1
2000    28  1809    4.26
2000    28  2215    9.45
2000    28  4173    5.8
2000    28  8151    4.5
1998    35  36  9.91
1999    35  36  9.91
2000    35  36  9.91
1998    35  40  9.91
1999    35  40  9.91
2000    35  40  9.91

season  client.ID   vessel.ID   overLength  qtty
1998    13  NA  NA  30
1999    13  NA  NA  30
2000    13  NA  NA  29
1998    28  29  17.1    18
1998    28  1809    4.26    18
1998    28  2215    9.45    18
1998    28  4173    5.8 18
1998    28  8151    4.5 18
1999    28  29  17.1    18
1999    28  1809    4.26    18
1999    28  2215    9.45    18
1999    28  4173    5.8 18
1999    28  8151    4.5 18
2000    28  29  17.1    18
2000    28  1809    4.26    18
2000    28  2215    9.45    18
2000    28  4173    5.8 18
2000    28  8151    4.5 18
1998    35  36  9.91    21
1999    35  36  9.91    21
2000    35  36  9.91    21
1998    35  40  9.91    21
1999    35  40  9.91    21
2000    35  40  9.91    21 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T04:01:54.240

`merge`这是with的一个简单案例`all = TRUE`

假设您的数据在`data1`并且`data2`

然后

```
merge(data1, data2, all = TRUE) 
```

应该管用。

如果您想指定要合并的内容（以防有您不想使用的常用列）

```
 merge(data1, data2, all = TRUE, by = c('season', 'client.ID')) 
```

# ruby-on-rails - 未初始化的常量“控制器名称”

> ID：13115662
> 
> 赞同：20
> 
> 时间：2012-10-29T03:55:57.967
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我的路由/资源和控制器出现错误。

我在 routes.rb 中有以下内容：

```
# routes.rb
resources :users do  
  resource :schedule  
end 
```

我在 controllers/users/ 中有一个 schedule_controller.rb ，我认为它应该是这样设置的：

```
class Users::ScheduleController < ApplicationController

  # Controller methods here...

end 
```

运行 rake:routes 显示

```
user_schedule      POST   /users/:user_id/schedule(.:format)       schedules#create
new_user_schedule  GET    /users/:user_id/schedule/new(.:format)   schedules#new
edit_user_schedule GET    /users/:user_id/schedule/edit(.:format)  schedules#edit
                   GET    /users/:user_id/schedule(.:format)       schedules#show
                   PUT    /users/:user_id/schedule(.:format)       schedules#update 
```

但是，导航到 /users/:user_id/schedule 会返回以下错误：

```
uninitialized constant SchedulesController 
```

我对问题可能是什么的唯一想法是与嵌套资源或声明单个资源有关，我在某个地方出错了。

我正在使用助手

```
new_user_schedule_path(current_user) 
```

链接到我的“新”视图时。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T04:05:32.353

应该是`SchedulesController`，不是`Users::ScheduleController`。仅当路由使用命名空间时，控制器才应命名[空间`namespace`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Scoping.html#method-i-namespace)。控制器名称也应该总是复数。

您正在创建的是[*嵌套*资源](http://guides.rubyonrails.org/routing.html#nested-resources)，而不是命名空间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T04:05:24.383

命名空间是`SchedulesController`故意的吗？即你*真的*打算这样做吗？

```
class Users::SchedulesController < ApplicationController 
```

还是您这样做只是因为日程安排是用户的“次要事物”？

我问这个的原因是因为通常在 Rails 中，嵌套的资源控制器*没有*命名空间。如果您想在命名空间下以特殊方式修改控制器，则只能命名控制器。一个常见的例子是在 admin 命名空间下有一些控制器，从`BaseController`该命名空间内的 a 继承，这将限制只有管理员访问这些控制器。

### 选项1

如果您*没有有意*为这个控制器命名，那么您想`Users::`从控制器中删除前缀，并将其移回`app/controllers/schedules_controller.rb`，将助手移回 ，`app/helpers/schedules_helper.rb`并将视图移回`app/views/schedules`. 也许您运行了一个生成器，该生成器也生成了一个`Users::Schedule`模型，该模型还需要重命名`Schedule`并移回`app/models/schedule.rb`.

### 选项 2

如果你*有意*为这个控制器命名，那么你想在你的路由中这样做：

```
namespace :users do
  resources :schedules
end 
```

保留所有已生成的内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-11T00:19:48.410

在您的 routes.rb 中，您需要像这样指定控制器：

```
resources :users do
  resource :schedules, controller: 'users/schedules'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T18:25:22.103

将资源 :users 替换为命名空间 :users

因为您的计划控制器位于用户文件夹内。class Users::ScheduleController < ApplicationController # 这里的控制器方法... end

# html - Html 5 视频标签在 IE7 和 IE8 中不起作用

> ID：13115663
> 
> 赞同：0
> 
> 时间：2012-10-29T03:56:23.757
> 
> 标签：html, video, tags

您好，我正在研究 html5 并使用 html5 的视频标签来播放视频。它在除 IE7 和 IE8 之外的所有浏览器上都可以正常工作。在这两个版本的 IE 上它不能正常工作。然后我按照此链接 [http://html5media.info/](http://html5media.info/)上给出的步骤进行操作，但我不能。所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-25T13:30:16.247

您可以使用 html5media 库来使用 html5 的 video 标签。它是一个 JavaScript 库。在您的页面中使用以下标签。

```
<script src="http://api.html5media.info/1.1.6/html5media.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T20:57:24.800

使用 embed 标签 for video 标签在 ie8 及以下版本中工作。

`

```
<video width="320" height="240" controls>
     <source src="http://www.w3schools.com/html/movie.mp4" type="video/mp4">
     <source src="http://www.w3schools.com/html/movie.ogg" type="video/ogg">
     <param name="wmode" value="opaque" />
  ** <embed src="http://www.w3schools.com/html/movie.mp4" wmode="opaque">
         <param name="wmode" value="opaque" />
     </embed>**
  Your browser does not support the video tag.
</video> 
```

`

# post - 如何隐藏绑定表单数据播放框架

> ID：13115667
> 
> 赞同：0
> 
> 时间：2012-10-29T03:58:10.890
> 
> 标签：post, playframework-2.0

在 play framework 中，是什么导致绑定的表单数据在 POST 请求中隐藏？

例如，如果一个表单的字段名称和年龄具有值：

```
name: John
age: 20 
```

是什么导致发布请求显示

```
localhost:9000/adduser 
```

对比

```
localhost:9000/adduser?name=John&age=20 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T06:23:41.057

造成这种情况的原因是 POST 请求本身。

这

```
localhost:9000/adduser?name=John&age=20 
```

是一个 GET 请求。

保留可以修改 POST 请求中的数据并使服务器重定向到原始页面的操作是一个很好的策略，这样用户就不会看到“您要重新提交表单”警报。

在 GET 请求中保留必须跨机器重现的操作也是一种很好的风格（例如我们的搜索结果，以便能够复制'n'粘贴链接并通过电子邮件发送）。

# android - 在 Eclipse 中突出显示具有特定语法的行

> ID：13115669
> 
> 赞同：0
> 
> 时间：2012-10-29T03:58:47.060
> 
> 标签：android, eclipse

eclipse中有没有办法突出显示具有特定语法的行？例如，我希望以`Log.*`... 开头的所有行一直突出显示。注释、语法着色和其他格式设置不允许添加除预设语法之外的其他标记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:18:40.223

在您的文件中按 control-H，然后单击文件搜索选项卡。（最左边的）然后搜索日志。（

# html - SELECT 元素选项值

> ID：13115670
> 
> 赞同：0
> 
> 时间：2012-10-29T03:58:49.050
> 
> 标签：html

我正在做一个`select`html 然后我在 JS 部分有这样的东西

```
var languageEN = "en,1";
var languageFR = "fr,2";
var languageDE = "de,3"; 
```

我的 html 标记会像

```
<select style="display: none;" id="select">
  <option value=languageEN>English</option>
  <option value=languageFR>Francais</option>
  <option value=languageDE>Deutsch</option>
</select> 
```

但似乎我打的是未定义的。

我一直在尝试找到要包含在其中的正确语法，`option value`但无济于事。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:21:51.413

如果使用 PHP 是一个选项，你可以这样做。第一部分可以放在页面顶部，然后第二部分可以放在需要选择的地方。您可以添加尽可能多的选项或以任何您喜欢的方式更改它们。

```
<?php
    $options = array(
        0 => array(
            'name' => 'English',
            'value' => 'languageEN'
        ),
        1 => array(
            'name' => 'Francais',
            'value' => 'languageFR'
        ),
        2 => array(
            'name' => 'Deutsch',
            'value' => 'languageDE'
        ),
    );?>

<select style="display: none;" id="select">
<?php
    foreach ($options as $option);
    {
        echo '<option value="'.$option['value'].'">".$option['name'].'</option>'
    }
?>
</select> 
```

# cakephp - CakePHP如何在一个saveAll中不知道外键的情况下创建hasMany数据？

> ID：13115676
> 
> 赞同：1
> 
> 时间：2012-10-29T03:59:20.723
> 
> 标签：cakephp, cakephp-2.1

我希望创建和保存关联数据，就像我对 belongsTo 数据所做的一样 - 关联数据是即时创建的，并且还通过一次调用 saveAll 或 saveAsocated 生成并动态保存外部 ID，其中内置了事务-在。

但对于 hasMany 关系中的数据，情况似乎并非如此。以用户和评论为例。评论将 user_id 作为外键。

似乎我无法通过在用户上使用单个 saveAll($data) 来保存用户 $data

```
Array(
    'name' => 'Jack',
    'email' => 'jack@abc.com',
    'Comment' => array(
         array(
            'title' => 'I like this article.'
         )
    )
) 
```

我读了一些文档。看来我需要提到 user_id 作为正确创建 Comment 数据的外键。

如果是这种情况，由于在创建之前我没有用户 ID，看来我需要编写代码让 SAVE 发生两次。

我真的认为我错过了一些东西。应该有一个蛋糕的方式来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T08:39:15.413

只要您遵循约定并相应地格式化数据，Cake 就会自动完成此操作。对于`hasMany`关联，主模型数据和关联模型数据需要设置在同一级别的字符串键上，例如

```
array
(
    'User' => array(),
    'Comment' => array()
) 
```

另请注意

> saveAll 函数只是 saveMany 和 saveAssociated 方法的包装。它将检查数据并确定应执行的保存类型。如果数据被格式化为数字索引数组，将调用 saveMany，否则使用 saveAssociated。
> 
> 此函数接收与前两个相同的选项，并且通常是向后兼容的函数。建议根据具体情况使用 saveMany 或 saveAssociated。

所以两者都可以。

长话短说，模型数据需要通过字符串键分隔和索引，它与`find()`调用返回它的格式基本相同。这样，Cake 就会知道它需要保存关联的数据，并会自动为`Comment`记录插入外键。

```
array
(
    'User' => array
    (
        'name' => 'Jack',
        'email' => 'jack@abc.com'
    ),
    'Comment' => array
    (
        array
        (
            'title' => 'I like this article.'
        )
    )
) 
```

也可以看看

*   **[Cookook > 模型 > 保存数据 > 关联：将模型链接在一起 > hasMany](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany)**

*   **[Cookook > 模型 > 保存数据 > 模型::saveMany()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)**

*   **[Cookook > 模型 > 保存数据 > 模型::saveAssociated()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)**

*   **[Cookook > 模型 > 保存数据 > 模型::saveAll()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)**

# reflection - Go 中的反射类型和值

> ID：13115677
> 
> 赞同：7
> 
> 时间：2012-10-29T03:59:23.050
> 
> 标签：reflection, go

我不太清楚这个代码片段的行为。

```
func show(i interface{}) {
    switch t := i.(type) {
    case *Person:
      t := reflect.TypeOf(i)  //what t contains?   
      v := reflect.ValueOf(i)  //what v contains?
      tag := t.Elem().Field(0).Tag
      name := v.Elem().Field(0).String() 
    }
} 
```

反射中的类型和值有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T05:15:13.477

`reflect.TypeOf()` returns a [reflect.Type](http://golang.org/pkg/reflect/#Type) and `reflect.ValueOf()` returns a [reflect.Value](http://golang.org/pkg/reflect/#Value). A `reflect.Type` allows you to query information that is tied to all variables with the same type while `reflect.Value` allows you to query information and preform operations on data of an arbitrary type.

In the example above, you are using the `reflect.Type` to get the "tag" of the first field in the Person struct. You start out with the Type for `*Person`. To get the type information of `Person`, you used `t.Elem()`. Then you pulled the tag information about the first field using `.Field(0).Tag`. The actual value you passed, `i`, does not matter because the Tag of the first field is part of the type.

You used `reflect.Value` to get a string representation of the first field of the value `i`. First you used `v.Elem()` to get a Value for the struct pointed to by `i`, then accessed the first Field's data (`.Field(0)`), and finally turned that data into a string (`.String()`).

# android - 如何取消 AsyncTask 的当前实例并开始新的实例？

> ID：13115680
> 
> 赞同：2
> 
> 时间：2012-10-29T03:59:29.943
> 
> 标签：android, android-asynctask

我有一个下载 android 应用程序的文件。当用户单击 listview 项目时，会下载此文件。它工作正常。现在，我想取消当前文件下载并开始下一个文件，同时用户点击其他项目并且另一个下载已经在进行中，并在取消下载任务之前显示用户确认。

我怎样才能做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T05:02:06.477

首先，您必须检查您的`AsyncTask`

```
// in doInBackground, check if asynctask is canceled manually 
if (isCancelled()) break; 
```

在您的活动中，每当您尝试取消时，只需`AsyncTask`手动取消即可，当然，还可以重新开始下载另一个文件！

```
mDownloadingTask.cancel(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T04:09:23.123

简单地说，您将 Asynctask 存储到一个变量中：

```
mDownloadingTask = new Asynctask(){...};
mDownloadingTask.execute(); 
```

当您想停止此任务并开始新任务时：

```
//close the current task if it # null
mDownloadingTask.cancel(true);
mDownloadingTask = null;
//Start new one
mDownloadingTask = new Asynctask(){...};
mDownloadingTask.execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:30:43.123

`Cancel(false)`设置一个标志，您可以签入`doInBackGround()`并阻止您的代码执行其正在执行的操作。`cancel(true)`做同样的事情，除了它也会中断线程。[在此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)查看有关中断的更多信息。

当您的任务中有循环代码时，这一切都很好。循环的每次迭代，您都可以检查`isCancelled()`.

但是正如您的问题一样，某些任务（例如下载文件）不使用循环，也许您只是在调用外部 API 方法，所以在这里，您受制于这种阻塞方法。如果设计得好，它会在中断时抛出异常，线程将终止。

另外，看看更好的实现，[`SafeAsyncTask`](http://code.google.com/p/roboguice/source/browse/roboguice/src/main/java/roboguice/util/SafeAsyncTask.java)

# jquery - jquery画布圈

> ID：13115685
> 
> 赞同：7
> 
> 时间：2012-10-29T04:01:13.917
> 
> 标签：jquery

我用画布作了倒计时

工作代码：http: [//jsfiddle.net/ajFsx/](http://jsfiddle.net/ajFsx/)

```
window.onload = function() {
    canvas  = document.getElementById('timer'),
    seconds = document.getElementById('counter'),
    ctx     = canvas.getContext('2d'), 
    sec     = 180,
    countdown = sec;
    ctx.lineWidth = 8;
    ctx.strokeStyle = "#528f20";
    var 
    startAngle = 0, 
    time       = 0,
    intv       = setInterval(function(){
        var endAngle = (Math.PI * time * 2 / sec);
        ctx.arc(65, 35, 30, startAngle , endAngle, false);   
        startAngle = endAngle;
        ctx.stroke();

        countdown--;
        if ( countdown > 60){
            seconds.innerHTML = Math.floor(countdown/60);
            seconds.innerHTML += ":" + countdown%60;
        }
        else{
            seconds.innerHTML = countdown;
        }
        if (++time > sec,countdown == 0 ) { clearInterval(intv), $("#timer, #counter").remove(), $("#timers").prepend('<img id="theImg" src="#" />'); }
    }, 10);
}​ 
```

我的问题是我怎样才能让这幅画看起来更好看，所以没有像素？

我在 jquery canvas 上搜索了很多，但我似乎找不到我要找的地方。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T04:11:32.333

默认情况下，画布绘图是抗锯齿的。

你总是在你以前的*帧*上画。

[jsFiddle](http://jsfiddle.net/8TfjC/)（证明）。

你可以很容易地通过调用...

```
ctx.clearRect(0, 0, 200, 200); 
```

[js小提琴](http://jsfiddle.net/SQKVG/)。

这将清除左上角先前绘制的 200px 正方形。

# android - 保存冲浪描述符以供将来的图像匹配

> ID：13115689
> 
> 赞同：1
> 
> 时间：2012-10-29T04:02:13.197
> 
> 标签：android, opencv

我正在我的`Android`设备中做一些图像比较任务，就像在[这里](http://morf.lv/modules.php?name=tutorials&lasit=2#.UI35CsXMiqI)一样。

我想保存图像的特征描述符，然后我不想重新计算那些以供以后匹配，并且可以使用保存的描述符以供将来匹配。

是否有任何机构对此有经验或任何想法如何做到这一点。

# mysql - 如何设计访问不同地方的表格

> ID：13115691
> 
> 赞同：0
> 
> 时间：2012-10-29T04:02:31.823
> 
> 标签：mysql, sql, sql-server, database, database-design

这些表格供用户访问不同的地方

设计如下：

用户表：

```
<user>
userid
username
place          (the row define access rights) 
```

放置表：

```
<place>
placeid
placename
floor 
```

我的想法：

三个地方和placeid 是001,002,003 一个用户和userid 是001 来访问这三个地方

```
<user>
userid     username       place
001        john           001,002,003

<place>
placeid    placename   floor
001        A           1 
002        B           2 
003        C           3
004        D           4 
```

我的问题是，

在“user”表中，属性“place”包含很多placeids，用逗号隔开，这个设计好还是不好？它需要将位置值与“用户”表分开吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:08:18.633

这不是一个好主意。制作一个单独的表来存储关系：

```
<users-places>
userid  placeid
1       1
1       2
1       3 
```

为您的方法编制索引不会是直截了当的——尽管可能。

使用名称“users-places”，因为它暗示了它所关联的 2 个表。如果您大量存储有关此关系的更多信息，请更改名称 - 即，您开始向此新表添加列。

此外，以复数形式命名您的表格。单数保留用于类名。表被认为是集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T04:09:17.283

使用逗号分隔的列表来建立多对多关系是糟糕的设计。您应该改用中间表：

```
<user>
userid
username

<place>
placeid
placename
floor

<accessrights>
userid
placeid 
```

然后，不要在 user.place 中为 userid 001 放置“1,2,3”，而是在 accessrights 中放置三行，所有行都使用 userid 001，每个 placeid 一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:42:15.923

谢谢你们，

我修改了我的设计如下，可以吗？

```
<user>
userid     username       groupid
1          john           1

<group>
groupid      groupname
1           admin
2           general
3           special 

<group_manage>
groupno    groupid      placeid
1          1            1
2          1            2
3          1            3
4          1            4  
5          2            1
6          2            2
7          2            3

<place>
placeid    placename   floor
1          A           1 
2          B           2 
3          C           3
4          D           4 
```

# postgresql - UTF8 编码与语言环境 en_US 不匹配；选择的 LC_CTYPE 设置需要编码 LATIN1

> ID：13115692
> 
> 赞同：52
> 
> 时间：2012-10-29T04:02:39.387
> 
> 标签：postgresql, encoding, opennms

在尝试安装 opennms 时：

```
/usr/share/opennms/bin/install -l /usr/local/lib -dis 
```

我得到错误：

> 错误：编码 UTF8 与语言环境 en_US 不匹配 详细信息：选择的 LC_CTYPE 设置需要编码 LATIN1。

而且我不确定如何继续，因为我尝试了几种不同的方式创建数据库（见下文）。

完整日志：

```
==============================================================================
OpenNMS Installer
==============================================================================

Configures PostgreSQL tables, users, and other miscellaneous settings.

- searching for jicmp:
  - trying to load /usr/local/lib/libjicmp.so: NO
  - trying to load /usr/lib/jni/libjicmp.so: OK
- searching for jicmp6:
  - trying to load /usr/local/lib/libjicmp6.so: NO
  - trying to load /usr/lib/jni/libjicmp6.so: OK
- searching for jrrd:
  - trying to load /usr/local/lib/libjrrd.so: NO
  - trying to load /usr/lib/jni/libjrrd.so: NO
  - trying to load /usr/lib/jni/libjrrd.so: NO
  - trying to load /usr/lib/jvm/jdk1.6.0_34/jre/lib/amd64/server/libjrrd.so: NO
  - trying to load /usr/lib/jvm/jdk1.6.0_34/jre/lib/amd64/libjrrd.so: NO
  - trying to load /usr/lib/jvm/jdk1.6.0_34/jre/../lib/amd64/libjrrd.so: NO
  - trying to load /libjrrd.so: NO
  - trying to load /usr/share/opennms/lib/libjrrd.so: NO
  - trying to load /usr/share/opennms/lib/linux64/libjrrd.so: NO
  - trying to load /usr/java/packages/lib/amd64/libjrrd.so: NO
  - trying to load /usr/lib64/libjrrd.so: NO
  - trying to load /lib64/libjrrd.so: NO
  - trying to load /lib/libjrrd.so: NO
  - trying to load /usr/lib/libjrrd.so: NO
  - trying to load /usr/lib/jni/libjrrd.so: NO
  - trying to load /usr/lib/libjrrd.so: NO
  - trying to load /usr/local/lib/libjrrd.so: NO
  - trying to load /opt/NMSjicmp/lib/32/libjrrd.so: NO
  - trying to load /opt/NMSjicmp/lib/64/libjrrd.so: NO
  - trying to load /opt/NMSjicmp6/lib/32/libjrrd.so: NO
  - trying to load /opt/NMSjicmp6/lib/64/libjrrd.so: NO
- Failed to load the optional jrrd library.
  - This error is not fatal, since jrrd is only required for optional features.
  - For more information, see http://www.opennms.org/index.php/jrrd
- using SQL directory... /usr/share/opennms/etc
- using create.sql... /usr/share/opennms/etc/create.sql
* using 'postgres' as the PostgreSQL user for OpenNMS
* using 'opennms' as the PostgreSQL database name for OpenNMS
Exception in thread "main" org.opennms.core.schema.MigrationException: an error occurred creating the OpenNMS database
    at org.opennms.core.schema.Migrator.createDatabase(Migrator.java:428)
    at org.opennms.core.schema.Migrator.prepareDatabase(Migrator.java:444)
    at org.opennms.install.Installer.install(Installer.java:236)
    at org.opennms.install.Installer.main(Installer.java:949)
Caused by: org.postgresql.util.PSQLException: ERROR: encoding UTF8 does not match locale en_US
  Detail: The chosen LC_CTYPE setting requires encoding LATIN1.
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:366)
    at org.opennms.core.schema.Migrator.createDatabase(Migrator.java:425)
    ... 3 more 
```

数据库列表：

```
 Name    |  Owner   | Encoding | Collate | Ctype |   Access privileges   
-----------+----------+----------+---------+-------+-----------------------
 postgres  | postgres | LATIN1   | en_US   | en_US | 
 rhq       | rhqadmin | LATIN1   | en_US   | en_US | 
 template0 | postgres | LATIN1   | en_US   | en_US | =c/postgres          +
           |          |          |         |       | postgres=CTc/postgres
 template1 | postgres | LATIN1   | en_US   | en_US | =c/postgres          +
           |          |          |         |       | postgres=CTc/postgres
(4 rows) 
```

我使用了以下 3 个 initdb 选项，但它们都不起作用

```
/usr/local/pgsql/bin/initdb -E UTF-8 --pgdata=/usr/local/pgsql/data

/usr/local/pgsql/bin/initdb -E LATIN1 --pgdata=/usr/local/pgsql/data

/usr/local/pgsql/bin/initdb -E en_US.UTF8  --pgdata=/usr/local/pgsql/data 
```

另外，我需要在`/usr/local/pgsql/data`使用之前删除所有数据`initdb`吗？

附加语言环境命令标准输出：

$语言环境

```
LANG=en_US
LANGUAGE=en_US:
LC_CTYPE="en_US"
LC_NUMERIC="en_US"
LC_TIME="en_US"
LC_COLLATE="en_US"
LC_MONETARY="en_US"
LC_MESSAGES="en_US"
LC_PAPER="en_US"
LC_NAME="en_US"
LC_ADDRESS="en_US"
LC_TELEPHONE="en_US"
LC_MEASUREMENT="en_US"
LC_IDENTIFICATION="en_US"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-07-10T07:53:11.033

我正在回答这个问题，因为 StackOverFlow 没有任何东西对我有用。

我结合了其他网站的两个解决方案（这个答案适用于 Ubuntu 服务器 12.04 和 PGSQL 9.1）：

### 创建一个文件：

纳米 /etc/profile.d/lang.sh

### 添加以下内容

```
export LANGUAGE="en_US.UTF-8"
export LANG="en_US.UTF-8"
export LC_ALL="en_US.UTF-8" 
```

### 保存

### 重新启动 shell 或在当前 shell 实例中手动运行所有导出命令

### 重新配置，使编码可以是 UTF8（[从这里获取][1]）

```
sudo su postgres

psql

update pg_database set datistemplate=false where datname='template1';
drop database Template1;
create database template1 with owner=postgres encoding='UTF-8'

  lc_collate='en_US.utf8' lc_ctype='en_US.utf8' template template0;

update pg_database set datistemplate=true where datname='template1'; 
```

### 使用 template1 创建数据库。

我希望这有帮助 ;）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-29T04:45:49.523

感谢您的`locale`输出。OpenNMS 似乎正在使用您的 en_US（非 UTF-8）语言环境来创建 postgres db，这是错误的。这应该有效：

```
export LANG=en_US.UTF-8
locale   # confirm that it shows only en_US.UTF-8 for all settings
# finally, run your opennms installer
/usr/share/opennms/bin/install -l /usr/local/lib -dis 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-07T22:44:03.123

这对我有用：

```
CREATE DATABASE mydb WITH ENCODING='UTF8' LC_CTYPE='en_US.UTF-8' LC_COLLATE='en_US.UTF-8' OWNER=postgres TEMPLATE=template0 CONNECTION LIMIT=-1; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-24T15:53:38.520

发生这种情况是因为您的系统设置为使用 Latin1 编码而不是 UTF-8。您的语言正确设置为 en_US，但编码未设置为 UTF-8。尝试运行：$

```
localedef -v -c -i en_US -f UTF-8 en_US.UTF-8 
```

这将告诉您更改后安装的所有应用程序（我认为）使用带有 unicode 编码的英语。更多信息可以在这里找到：[https ://www.linux.com/learn/docs/ldp/790-Unicode-HOWTO#s3](https://www.linux.com/learn/docs/ldp/790-Unicode-HOWTO#s3)

我有一个类似的问题，所以我：

1.  aptitude 清除 postresql ...
2.  localedef -v -c -i en_US -f UTF-8 en_US.UTF-8
3.  aptitude 安装 postresql ....

然后 postregsql 知道将自己设置为使用带有 unicode 编码的英语。

当然，您可以按照此处所述在每个数据库的基础上执行此操作：[http ://www.postgresql.org/docs/9.1/static/multibyte.html](http://www.postgresql.org/docs/9.1/static/multibyte.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-14T19:28:54.183

我有同样的错误：

```
ERROR:  new collation (en_US.utf8) is incompatible with the collation of the template database (en_US.UTF-8)
HINT:  Use the same collation as in the template database, or use template0 as template. 
```

**解决方案：**

```
dpkg-reconfigure locales (choose en_US.UTF-8) 
```

然后：

```
sudo -u postgres psql  

postgres=# update pg_database set datistemplate=false where datname='template1';  
UPDATE 1  
postgres=# drop database Template1;  
DROP DATABASE  
postgres=# create database template1 with owner=postgres encoding='UTF-8'  
postgres-# lc_collate='en_US.utf8' lc_ctype='en_US.utf8' template template0;  
CREATE DATABASE  
postgres=# update pg_database set datistemplate=true where datname='template1';  
UPDATE 1 
```

**测试：**

```
postgres=# CREATE DATABASE Person  
    WITH 
    OWNER = Person  
    ENCODING = 'UTF8'  
    LC_COLLATE = 'en_US.utf8'  
    LC_CTYPE = 'en_US.utf8'  
    TABLESPACE = pg_default  
    CONNECTION LIMIT = -1;  
CREATE DATABASE 
```

有用 ：）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-04T18:17:47.813

更改 SO 的语言环境和语言以与 BD 兼容。

# dpkg-重新配置语言环境

请享用！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-23T06:51:38.140

我遇到了类似的错误。旧数据库 LC_CTYPE 是 UTF-8，但新数据库是 en_US.UTF-8，我在重新初始化数据库后解决了问题。

```
initdb --pgdata=/path/to/postgresql -E utf8 
```

您应该选择正确的 -E 参数

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-20T12:04:02.683

我在安装 odoo 时遇到了“同样的问题”。事实证明，在安装 odoo 之前，您必须配置语言环境

```
export LC_CTYPE="en_US.UTF-8"
sudo dpkg-reconfigure locales 
```

然后使用 UTF-8 配置语言环境，但您必须在安装 posgres 之前配置语言环境。

# sql - 将数组插入数据库codeigniter

> ID：13115694
> 
> 赞同：0
> 
> 时间：2012-10-29T04:02:45.533
> 
> 标签：sql, arrays, codeigniter

我试图在 CI 中制作 sql 代码，问题是`ID_LABEL`在 t_publisher 处填充了 0，它应该填充从 t_label 获取的数字。

```
$sql['query1'] = "INSERT into t_user (USER_NAME, USER_PASS, USER_STATUS, USER_TYPE) values ('$user', '$pass','1','publisher')";
$sql['query2'] = "INSERT INTO t_label (LABEL) values('$user')";
$id_label = "select id_label from t_label where label ='".$user."'";
$id = $this->db->query($id_label)->result();
$sql['query3'] = "INSERT INTO t_publisher (PUBLISHER, ARTIS, ID_LABEL) values('$user', 'Various Artist', '$id')";
$result = array();
foreach($sql as $key => $value){

$result[$key] = $this->db->query($value);
} 
```

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:25:13.750

`$id`正在返回一个对象而不是单个值。尝试插入`$id->id_label`而不是仅仅`$id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T12:41:40.637

获取 id_label 试试这个

```
$id_result = $this->db->query($id_label);
foreach($id_result->result_array() as $row){
     $id=$row['id_label'];
} 
```

# actionscript-3 - 检测客户端焦点何时离开窗口

> ID：13115695
> 
> 赞同：0
> 
> 时间：2012-10-29T04:02:54.863
> 
> 标签：actionscript-3, flash

我看到一些在线Flash游戏可以做到这一点：

当您将当前网页切换到其他窗口或其他网页标签时，应用程序会绘制一个黑色块并告诉您已离开应用程序，单击闪存区域以恢复。

我已经尝试过一些事件，比如焦点进出或鼠标离开舞台，但反应不是我所期望的。也许我以错误的方式使用它们。如果你有解决方案，请告诉我。

```
var count:int = 0;

this.stage.addEventListener(Event.MOUSE_LEAVE,function(e:Event):void
{
    //only be called if your mouse cursor leave the area,but can't detect whether you're actually switch to other program.
    trace('mouseleave',count++);
});

this.stage.addEventListener(FocusEvent.FOCUS_OUT,function(e:Event):void
{
    //no reaction
    trace('focus out',count++);
});

this.stage.addEventListener(MouseEvent.ROLL_OVER,function(e:Event):void
{
    //no reaction
    trace('mouseenter',count++);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T09:09:09.943

有两种方法：

*   使用`Event.ACTIVATE`事件。但是swf之前应该是重点。
*   使用来自 ActionScript 的 JavaScript 调用来检查焦点是窗口还是选项卡。

# ios - 在 iOS6 Facebook 分享表中设置受众？

> ID：13115696
> 
> 赞同：1
> 
> 时间：2012-10-29T04:03:01.713
> 
> 标签：ios, facebook, ios6

使用股票 iOS6 Facebook 分享表 ( `SLComposeViewController`)，观众默认为“只有我”。是否可以将其默认设置为“仅限朋友”？

我觉得大多数人甚至都不会注意到它被设置为“只有我”，并且想知道为什么他们的朋友看不到他们的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:14:13.993

如果您是第一次设置您的 iOS6 Facebook 帐户，那么默认的受众设置是“朋友”。但是，它会记住您最后一次已知的受众选择。所以说用户去 Safari，分享一个链接并将观众设置为“只有我”，当他们回到你的应用程序时，默认是“只有我”。没有办法改变这一点。

如果您想要更多控制权，您应该考虑使用 SLRequest，但您必须构建自己的共享 UI。

# backbone.js - d3 数据项作为主干视图

> ID：13115698
> 
> 赞同：1
> 
> 时间：2012-10-29T04:03:02.107
> 
> 标签：backbone.js, d3.js

我正在使用 d3 创建一个条形图，其中数据位于骨干集合中。我希望用户能够与图表中的条进行交互、选择它们、编辑数据等。

我认为最好的方法是为图表创建一个视图，并为条形图创建一个单独的视图。

在我的图表视图中，我有

```
创建栏：函数（）{

    var chart = d3.select("div#chart");

    时间线.selectAll("div")
    .data（Myapp.chart.models）
    。进入（）
    .append(function(d){console.log(d);
                        var bar = new Myapp.Views.ChartBar({model:d});
                        返回 bar.el;

        });

 }

```

但不幸的是，看起来`append`功能失败了。

我正在考虑在 bar div 中放置一些中等复杂的 html，以及一些数据点。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:42:12.543

d3 的主干视图有点奇怪，但这是它可能工作的一种方式：

```
timeline.selectAll("div")
  .data(Myapp.chart.models)
  .enter()
  .append('div')// or 'span' or even Myapp.Views.ChartBar.prototype.el
  .each(function(d, i) {
    var bar = new Myapp.Views.ChartBar({model:d});
    bar.setElement(this);// Here "this" is the dom element
  } 
```

编辑：最后两行可以合并为一行，跳过调用`setElement()`：

```
var bar = new Myapp.Views.ChartBar({model:d, el:this}); 
```

# salt-stack - 盐堆：谷物与柱子

> ID：13115700
> 
> 赞同：32
> 
> 时间：2012-10-29T04:03:08.940
> 
> 标签：salt-stack, configuration-management

在[盐系统](http://saltstack.org)中有谷物和柱子。我了解如何分配自定义颗粒，但什么时候考虑使用柱子更好？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-29T04:12:52.963

在 Salt 中，grains 用于你的 minion 的*不可变*方面，例如 cpu、内存、位置、时区等。

支柱是您需要分发给您的 minions 的 master 上的数据列表（以 SLS 格式）。Pillar 允许您设置 minions 可以访问的变量，例如数据库配置选项。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-07-19T05:47:47.227

简而言之，自定义**静态**Grains 可能比 Pillars 更糟糕。

```
| Differences                  | Grains                        | Pillars                             |
|------------------------------|-------------------------------|-------------------------------------|
| This is info which...        | ... Minion knows about itself | ... Minion asks Master about        |
|                              |                               |                                     |
| Distributed:                 | Yes (different per minion)    | No (single version per master)      |
| Centralized:                 | No                            | Yes                                 |
|                              |                               |                                     |
| Computed automatically:      | Yes (preset/computed value)   | No (only rendered from Jinja/YAML)  |
| Assigned manually:           | No (too elaborate)            | Yes (Jinja/YAML sources)            |
|                              |                               |                                     |
| Conceptually intrinsic to... | ... individual Minion node    | ... entire system managed by Master |
| Data under revision control: | No (computed values)          | Yes (Jinja/YAML sources)            |
|                              |                               |                                     |
| They define rather...        | _provided_ resources          | _required_ resources                |
|                              | (e.g. minion OS version)      | (e.g. packages to install)          |
|                              |                               |                                     | 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-06-20T23:20:04.953

这里的根本区别在于，您可以将自定义颗粒设置为小兵的先天属性，而柱子需要在某个时候分配给小兵。

例如，有两种实用的方法可以为 minion 分配角色：minion id 或使用自定义 grains。然后，您可以匹配 top.sls 文件中的 minion id 或自定义颗粒，如下所示：

```
# salt/top.sls
base:
  # match against custom grain
  'G@role:webserver':
    - match: compound
    - webserver
  'G@role:search':
    - match: compound
    - elasticsearch
  # match against minion id
  'minion_db*':
    - database 
```

你不能用柱子做到这一点。虽然您确实可以使用柱子作为目标，但您首先需要一种将柱子分配给您的奴才的方法（这必须是奴才 id，或如上所述的颗粒）。考虑如何在柱顶文件中分配柱子，您需要使用 minion 的固有属性分配此柱子数据。

```
# pillar/top.sls
base:
  'G@env:dev':
    - match: compound
    - dev_settings
  'G@env:prod':
    - match: compound
    - prod_settings 
```

这里的模式是你使用grains（或minion id）作为设置你的minion的类型/角色/环境的最小方法。之后，您使用支柱数据为其提供所有适当的详细设置。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-21T22:00:34.907

Pillar 还有助于确保只有特定的奴才获得特定的信息。

这里有一些很棒的文档：

[http://docs.saltstack.com/topics/pillar/index.html](http://docs.saltstack.com/topics/pillar/index.html)

和这里：

[http://docs.saltstack.com/topics/tutorials/pillar.html](http://docs.saltstack.com/topics/tutorials/pillar.html)

您还可以使用外部支柱来允许任意数据库或配置文件为您设置支柱数据。这允许与基础架构的其他方面进行非常强大的集成。这里列出了几个内置的外部支柱：

[http://docs.saltstack.com/ref/pillar/all/index.html](http://docs.saltstack.com/ref/pillar/all/index.html)

构建自定义外部支柱非常简单：

[http://docs.saltstack.com/topics/development/external_pillars.html](http://docs.saltstack.com/topics/development/external_pillars.html)

# java - Java从条码扫描器获取条码信息

> ID：13115704
> 
> 赞同：3
> 
> 时间：2012-10-29T04:03:57.830
> 
> 标签：java, image, barcode

我一直在寻找这个。所有相关的 Java API 都适用于图像。他们从图像中包含的条形码中获取信息，并将条形码打印到图像上。

我的问题是如何直接从 Java 中的扫描仪获取条形码？我是否缺少直接从扫描仪读取条形码的任何 API？或者，我是否需要从扫描仪获取的信息中生成内存图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:41:13.510

AFAIK，大多数条码扫描仪都有键盘仿真模式。您可以将扫描仪连接到您的 PC，扫描条形码，扫描仪将为您提供模拟普通按键的条形码信息，您可以以任何可接受的方式捕获这些信息（例如，作为 Java Swing 中的 keypresslistener 或 inputfield）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T10:13:57.707

大多数现代条形码扫描仪都可以设置为在串行仿真模式下工作。如果您以这种方式设置它们，您可以与设备进行通信，就好像您正在与普通串行端口（读/写）通信一样。然后，您可以使用 Java 库与串行设备进行通信。我使用了一个名为 RxTx ( [http://rxtx.qbang.org/wiki/index.php/Main_Page](http://rxtx.qbang.org/wiki/index.php/Main_Page) ) 的库，它在 Windows 和 Linux 上都运行良好。

# iphone - 当我从经度和纬度创建位置字符串时，为什么在 iOS 中出现此链接器错误？

> ID：13115706
> 
> 赞同：4
> 
> 时间：2012-10-29T04:04:01.467
> 
> 标签：iphone, ios, linker, core-location, geocode

我有位置管理器的经度和纬度，现在我正在尝试反转地理代码，以将该信息转换为地址字符串。我找到了下面的代码，据称可以做到这一点，但我收到了链接器错误。我认为这意味着我缺少一些框架或其他东西。我无法找到答案。任何人都可以帮忙吗？

错误：

```
Apple Mach-O Linker Error
"_KABPersonAddressZIPKey", referenced from: 
```

对于我要生成的每个字符串，依此类推。

```
 CLGeocoder *geocoder = [[CLGeocoder alloc] init];
 CLLocation *newLocation = [[CLLocation alloc]initWithLatitude:latitude
                                                        longitude:longitude];
            [geocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error)

            {  
                       if (error) {
                           NSLog(@"Geocode failed with error: %@", error);
                           return;
                       }

                       if (placemarks && placemarks.count > 0)
                       {
                           CLPlacemark *placemark = placemarks[0];

                           NSDictionary *addressDictionary = placemark.addressDictionary;

                           NSString *address = [addressDictionary objectForKey:(NSString *)kABPersonAddressStreetKey];
                           NSString *city = [addressDictionary objectForKey:(NSString *)kABPersonAddressCityKey];
                           NSString *state = [addressDictionary objectForKey:(NSString *)kABPersonAddressStateKey];
                           NSString *zip = [addressDictionary  objectForKey:(NSString *)kABPersonAddressZIPKey];

                           NSLog(@"%@ %@ %@ %@", address,city, state, zip);

                       }
            }
    ]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T04:13:11.013

在文档中查找 kABPersonAddressStreetKey：

[http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)

它在顶部说它在 AddressBook 框架中。所以你需要链接到那个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T04:13:32.070

将以下框架添加到您的项目中，然后导入它。

```
AddressBook.framework
AddressBookUI.framework 
```

![在此处输入图像描述](../Images/4aec0df676e43f293af629de48999c0e.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T04:13:07.423

您发布的代码使用了 AddressBook 框架中的一些常量。您需要将 AddressBook 框架添加到您的项目目标中。

# arrays - 如何使用 vbscript 将字符串放入数组中？

> ID：13115710
> 
> 赞同：1
> 
> 时间：2012-10-29T04:04:16.413
> 
> 标签：arrays, vbscript

我有一个随机生成的字符串，它是在运行时生成的。

我想将该字符串的值捕获到一个数组中，这样

*   字符串的第一个单词成为数组中的第一个元素，

*   第二个词第二个元素

    等等。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:06:35.217

在 VBscript 中使用[Split](http://www.w3schools.com/vbscript/func_split.asp)函数：

```
dim myArray, myString
myString = "This is an example"
myArray = Split(myString) 
```

# batch-file - 我的批处理脚本有“缺少操作员”

> ID：13115712
> 
> 赞同：3
> 
> 时间：2012-10-29T04:04:49.487
> 
> 标签：batch-file

我正在尝试获取我的安装程序脚本的系统信息。这是我的简单批处理脚本。

```
@echo off
setlocal enableextensions enabledelayedexpansion

echo System information now loading...

for /f "delims=" %%l in ('wmic os get * /format:list') do >nul 2>&1 set "OS_%%l"
for /f "delims=" %%l in ('wmic cpu get * /format:list') do >nul 2>&1 set "CPU_%%l"
set /a FreeSpace=0
for /f "skip=1 tokens=1,2" %%A in ('wmic logicaldisk get FreeSpace') do (
  if "%%B" neq "" for /f %%N in ('powershell !FreeSpace!+%%A') do (
    set FreeSpace=%%N
  )
)

echo wsh.echo cdbl(%FreeSpace%)/1024/1024/1024 > %temp%.\tmp.vbs
for /f %%a in ('cscript //nologo %temp%.\tmp.vbs') do set /a HDD_FreeSpace=%%a
del %temp%.\tmp.vbs

set /a RAM_Memory=%OS_TotalVisibleMemorySize%/1024
set /a CPU_Speed=%CPU_NumberOfLogicalProcessors%*%CPU_CurrentClockSpeed%

>>SystemInfo.log 2>&1 echo Operating System: %OS_Caption%%OS_OSArchitecture% (%OS_Version%, Build %OS_BuildNumber%)
>>SystemInfo.log 2>&1 echo Processor: %CPU_Name%
>>SystemInfo.log 2>&1 echo RAM: %RAM_Memory% MB
>>SystemInfo.log 2>&1 echo HDD Total Free Space: %HDD_FreeSpace% GB

>>SystemSource.log 2>&1 echo %OS_Version%
>>SystemSource.log 2>&1 echo %CPU_Speed%
>>SystemSource.log 2>&1 echo %OS_TotalVisibleMemorySize%
>>SystemSource.log 2>&1 echo %FreeSpace%

exit 
```

输出 SystemInfo.log

```
Operating System: Microsoft Windows 7 Professional 32-bit (6.1.7601, Build 7601)
Processor: Intel(R) Core(TM)2 CPU          6600  @ 2.40GHz
RAM: 3069 MB
HDD Total Free Space: 61 GB 
```

输出 SystemSource.log

```
6.1.7601
4784
3143284
66427858944 
```

一切似乎都很好。但是批处理脚本显示“缺少操作员”，我不知道为什么显示了一条消息，但所有输出都是正确的。

会不会崩溃？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T04:10:35.827

带走`@echo off`. 您会看到 **设置 /a HDD_FreeSpace=375.6279296875**的是行集。期间无效

```
c:\>for /F %a in ('cscript //nologo C:\Users\PREET~1.SAN\AppData\Local\Temp.\tmp.vbs') do set /a HDD_FreeSpace=%a

c:\>set /a HDD_FreeSpace=375.625617980957
Missing operator.

c:\>del C:\Users\PREET~1.SAN\AppData\Local\Temp.\tmp.vbs 
```

改用* *SET **试试

# calendar - 一切似乎都很好，但 dojox/calendar/Calendar 没有显示项目

> ID：13115715
> 
> 赞同：0
> 
> 时间：2012-10-29T04:05:24.177
> 
> 标签：calendar, dojo

我正在使用“dojo/data/ItemFileWriteStore”外观：{“identifier”：“id”、“items”：[{“id”：“3”、“date_start”：“02/11/2012”、“date_end” ":"02/11/2012","time_end":"11:00:00","time_start":"09:00:00","type":"visit","title":"一些标题一","week_day":"5","start_hour":"9","start_minute":"0","duration":"120","day_long":"false"}, {"id":"4 ","date_start":"23/10/2012","date_end":"05/11/2012","time_end":"12:15:00","time_start":"10:15:00", “类型”：”visit","title":"Some Title Two","week_day":"2","start_hour":"10","start_minute":"15","duration":"120","day_long":"真的 ”} ]}

然后我通过以下代码将 ItemFileWriteStore 解析为日历存储：

```
var cal_data = [];

var gotList = function(items, request){
    dojo.forEach(items, function(item){
      d_start = item.date_start[0].split('/');
      d_end = item.date_end[0].split('/');

      var dStart = new Date(parseInt(d_start[2]), (parseInt(d_start[1]) - 1), parseInt(d_start[0]), parseInt(item.start_hour[0]), parseInt(item.start_minute[0]), 0, 0);
      var dEnd = new Date(parseInt(d_end[2]), (parseInt(d_end[1]) - 1), parseInt(d_end[0]), 0, 0, 0, 0);

      var o = {
         id: item.id[0],
         summary: item.title[0],
         startTime:dStart,
         endTime:dEnd,
         calendar: item.type[0],
         allDay:(item.day_long[0] == "true" ? true : false)
      };

      //o.startTime=calendar.dateModule.add(o.startTime, "day", 1);
      o.startTime.setHours(parseInt(item.start_hour[0]));
      o.startTime.setMinutes(parseInt(item.start_minute[0]));
      o.endTime = calendar.dateModule.add(o.startTime, "minute", parseInt(item.duration[0]));

      console.log(o);

      cal_data.push(o);
    });
}

var gotError = function(error, request){
    console.log("The request to the store failed. ",  error);
}

TaskStore.fetch({
    onComplete: gotList,
    onError: gotError
});

calendar.set("store", new Observable(new Memory({data: cal_data}))); 
```

上述代码的控制台日志显示： Object allDay: false calendar: "visit" endTime: Fri Nov 02 11:00:00 GMT+0200 (Jerusalem Standard Time) id: "3" startTime: Fri Nov 02 2012 09: 00:00 GMT+0200（耶路撒冷标准时间）摘要：“Some Title One” **原型**：对象仪表板：124

对象 allDay: true calendar: "visit" endTime: Tue Oct 23 2012 12:15:00 GMT+0200 (Jerusalem Standard Time) id: "4" startTime: Tue Oct 23 2012 10:15:00 GMT+0200 (Jerusalem Standard Time)时间）摘要：“一些标题二” **原型**：对象仪表板：124

一切似乎都很好，但日历仍然没有显示项目，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:01:09.790

你应该打电话给

calendar.set("store", new Observable(new Memory({data: cal_data})));

在 goList 方法结束时它应该解决问题吗？

# r - 如何在R中将一个矩阵的upper.tri与另一个矩阵的lower.tri结合起来？

> ID：13115720
> 
> 赞同：4
> 
> 时间：2012-10-29T04:05:36.047
> 
> 标签：r, matrix

我有两个相同长度的对称矩阵（一个包含相关系数，另一个包含 p 值）。

我正在尝试制作一个矩阵，使得 upper.tri 包含相关系数，而 lower.tri 包含相关的 p 值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T04:12:29.697

假设你的矩阵是`correl`和`pval`

```
# create a new matrix that is the pvalues
new <- pval
# not sure what you want the diagonal to be, lets make it NA
diag(new) <- NA
# replace the upper triangle of this new matrix with the 
# upper triangle of the correlation matrix
new[upper.tri(new)] <- correl[upper.tri(correl)] 
```

# mongodb - 如何在 Meteor 应用程序之间共享 MongoDB 集合？

> ID：13115723
> 
> 赞同：20
> 
> 时间：2012-10-29T04:06:10.937
> 
> 标签：mongodb, meteor

我希望能够为我的项目提供一个管理应用程序和一个客户端应用程序。理想情况下，我希望能够拥有一个共享的 MongoDB 集合。我怎么能做到这一点？

我尝试在两个不同的应用程序中创建具有相同名称的集合，但发现 Meteor 会将数据分开。知道我能做什么吗？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T04:50:34.987

```
export MONGO_URL=mongodb://localhost:3002/meteor 
```

然后运行meteor app，它会改变meteor使用的默认数据库。所以共享数据库或集合不会成为问题！出于管理原因，我会使用由我自己管理的单个 MongoDB 服务器，而不是使用流星的内部 MongoDB。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-29T22:01:18.127

一个合理的问题，可能值得在此答案之外进行讨论：

MongoDB 连接由 Meteor 应用程序进程本身处理，据我阅读和理解，这是 Meteors 哲学的一部分，其目标是一种方法，可能被描述为：*一个数据源服务于属于它的一个应用程序，但许多客户订阅它*。

记住这一点，在一个应用程序（即您的 Meteor 应用程序）中结合“管理员”和“客户端”客户端可能是首选方式。

然而，从服务器管理的角度来看，Meteor 处理连接的方式是始终存在位于项目目录中的默认本地数据源（`.meteor/local/db`尝试`meteor mongo --url`在流星应用程序进程运行时获取 mongo 连接字符串）。但是，人们可以为*部署*目的指定一个可选的数据源字符串，如这些[部署说明](http://docs.meteor.com/#deploying)中所述。

因此，您需要为您的预期设置选择一种有点令人毛骨悚然的“本地开发部署”方式才能正常工作。或者你去破解资源然后......不，算了吧。您可能希望您的应用程序和客户端利用实时 UI 更新（发布）等优势，这就是为什么 Meteor 应用程序与“应用程序数据源”绑定的原因，反之亦然。从另一个应用程序连接时，触发模型更改的事件不会在这些应用程序之间传输。mongoDB 实例本身当然不知道这一点。

我确信核心团队不会出于考虑的原因将数据源连接暴露给配置部分，*除非他们使用某种模块概念扩展他们的架构，该模块概念提供跨 Meteor 实例的核心模型/集合抽象的公共服务层*- 在对发布/订阅事件的支持意识最少。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-12T07:02:21.957

试试我一起破解的这个 DDP 测试，以桥接两个应用程序（服务器 A 和 B）。

两台服务器都可以操作数据，但数据只存储在服务器 A 上的一个集合中。

也可以看看[这个链接](https://github.com/iamlasse/meteor-ddp-test)

# python - Python 新手，GMail SMTP 错误

> ID：13115724
> 
> 赞同：17
> 
> 时间：2012-10-29T04:06:13.883
> 
> 标签：python, smtp, gmail, smtplib

我正在给自己写一个简单的 sendmail 函数，但我不断收到这个错误：

NameError：未定义名称“SMTPException”

我的代码有什么问题？有什么建议么？

```
import smtplib

sender = "user@gmail.com"
receiver = ["user@gmail.com"]
message = "Hello!"

try:
    session = smptlib.SMTP('smtp.gmail.com',587)
    session.ehlo()
    session.starttls()
    session.ehlo()
    session.login(sender,'password')
    session.sendmail(sender,receiver,message)
    session.quit()
except SMTPException:
    print('Error') 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-29T04:08:45.150

在 Python 中，您需要通过为其模块添加前缀来完全限定名称：

```
except smtplib.SMTPException: 
```

除非您专门导入非限定名称，否则这是正确的（但我不建议您为您的程序执行此操作，只是显示可能的情况）：

```
from smtplib import SMTPException 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T18:43:45.817

我也多次出现这种拼写错误！绕过这个“问题”的一种方法是使用[yagmail](https://github.com/kootenpv/yagmail)。

撇开玩笑不谈，我最近创建了 yagmail 以更轻松地发送电子邮件。

例如：

```
import yagmail
yag = yagmail.SMTP('user@gmail.com', 'password')
yag.send(contents = "Hello!") 
```

它在这里使用了几个缩写，例如当`To`未定义时，它将向在服务器上注册的同一电子邮件发送邮件。端口和主机也是默认的，这使得它非常简洁。

事实上，既然你似乎想立即关闭连接，你甚至可以使用这个单行：

```
yagmail.SMTP('user@gmail.com', 'password').send(contents = "Hello!") 
```

为了安全起见，您可以将密码保存在`keyring`（请参阅文档）中，这样您就不必将个人密码保存在脚本中，这非常重要！它甚至可以为您节省更多宝贵的屏幕空间。

全力以赴的包（`@gmail.com`默认），你可以摆脱以下：

```
yagmail.SMTP('user').send('', 'Hello!') 
```

祝你好运。

# ios - 如何将 InAppPurchaseManager 与 PhoneGap Build 一起使用？

> ID：13115726
> 
> 赞同：0
> 
> 时间：2012-10-29T04:06:28.217
> 
> 标签：ios, cordova, phonegap-plugins

我正在查看[有关将插件包含到您的 PhoneGap Build 中的 PhoneGap 文档](https://build.phonegap.com/docs/plugins)，但 InAppPurchaseManager 不存在。我怎样才能包括它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:34:58.917

我认为您应该通过下面的特殊邮件列表直接与他们联系。邮件列表非常活跃，团队正在关注它，所以他们很快就会回复您。

回调-dev@incubator.apache.org

根据官方信息，目前是不可能的。

```
Right now, you cannot submit your own plugins to PhoneGap Build and have them included on our system. We are working on the infrastructure changes to allow this support 
```

# php - 带有界面的ejabberd登录错误

> ID：13115728
> 
> 赞同：1
> 
> 时间：2012-10-29T04:06:57.297
> 
> 标签：php, xmpp, openfire, google-ajax-libraries

我使用 jaxl 库连接到我的服务器 openfire。我通过使用的命令行成功登录和发送消息。现在我想为腰部制作一个界面并传递 JID 和密码。结果是连接的会话，但它不能直接到主页。它有问题： `$client->start(array( '--with-debug-shell' => true '--with-Unix-sock' => true ));` 线！请帮我给出一些想法。如何修复它。

# java - 为什么在第三次执行此代码时运行 JUnit 测试时出错？

> ID：13115729
> 
> 赞同：1
> 
> 时间：2012-10-29T04:07:05.860
> 
> 标签：java, hibernate, junit, h2

我在`setUp()`三个测试的方法中有几乎相同的代码。当单独运行时，测试全部工作，但是当我将它们作为完整测试集的一部分运行时，最后一个失败。

“违规”代码是：

```
@Before
public void setUp() throws Exception {
    AnnotationConfiguration configuration = new AnnotationConfiguration();

    configuration.addAnnotatedClass(User.class);
    configuration.setProperty("hibernate.dialect", "org.hibernate.dialect.H2Dialect");
    configuration.setProperty("hibernate.connection.driver_class", "org.h2.Driver");
    configuration.setProperty("hibernate.connection.url", "jdbc:h2:mem");
    configuration.setProperty("hibernate.hbm2ddl.auto", "create");
    configuration.setProperty("hibernate.current_session_context_class", "org.hibernate.context.ThreadLocalSessionContext");

    sessionFactory = configuration.buildSessionFactory();

    sessionFactory.openSession();

    // This is where it dies:
    sessionFactory.getCurrentSession().beginTransaction();

    User user = new User();
    user.setUsername("emanymton");
    user.setPassword(passwordEncoder.encodePassword("password", null));
    user.setAccess(1);

    sessionFactory.getCurrentSession().save(user);
    sessionFactory.getCurrentSession().getTransaction().commit();
} 
```

堆栈跟踪是：

```
1    [main] ERROR org.hibernate.tool.hbm2ddl.SchemaExport  - schema export unsuccessful ava.sql.SQLException: No suitable driver found for jdbc:h2:mem
    at java.sql.DriverManager.getConnection(DriverManager.java:604)
    at java.sql.DriverManager.getConnection(DriverManager.java:190)
    at org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:252)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:211)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:383)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:954)
    at [MYPROJECT].security.authentication.manager.CustomAuthenticationManagerTest.setUp(CustomAuthenticationManagerTest.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
7    [main] ERROR org.hibernate.util.JDBCExceptionReporter  - No suitable driver found for jdbc:h2:mem 
```

我将 Maven 用于依赖项，并在我的类路径中有依赖项 com.h2database.h2，版本 1.3.168。如前所述，它在前两个测试中运行良好，只是在这里失败了。

有任何想法吗？

提前喝彩

**编辑：**

这是我`tearDown`的测试：

```
@After
public void tearDown() throws Exception {
    try {
        sessionFactory.getCurrentSession().getTransaction().rollback();
    } catch (Exception e) {
        //
    }
    sessionFactory.close();
} 
```

我已经注释掉了其他两个测试，而这个仍然失败，但只有当它作为众多测试之一运行时，它才能运行 Fine wen 自己运行。

**编辑2：**

当我注释掉这条线时，我设法解决了一些驱动程序问题：

```
 configuration.setProperty("hibernate.current_session_context_class", "org.hibernate.context.ThreadLocalSessionContext"); 
```

不确定这是一个红鲱鱼，但对于测试，是否有更好的类用于上下文类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T11:46:21.030

不确定您在其他两个测试中在做什么，我只能推测以下原因

第二次测试中可能有一些方法使会话不可用，这可能是由于您在第一次测试中插入的一些数据造成的。由于它单独运行良好，第二次测试中的一些持久方法是失败（因为诸如主键之类的东西已经存在）弄乱了会话状态，并且没有正确捕获异常以显示在控制台中。

# sql - LIMIT 和 JOIN 动作顺序

> ID：13115733
> 
> 赞同：2
> 
> 时间：2012-10-29T04:08:08.170
> 
> 标签：sql

我有一个查询，其中包括`LIMIT`主表和`JOIN`.

我的问题是：之前会发生什么？查询找到的`x`行`LIMIT`然后`JOIN`对这些行执行**或**首先`JOIN`在所有行上执行然后再执行`LIMIT`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T04:15:01.310

`LIMIT`适用于应用它的查询。它将在该查询中的 s 之后应用于*查询*`JOIN`，但如果派生表被编辑到*其他*表，则 that/those (s) 紧随其后。*`JOIN`*`JOIN`**

 **例如

```
SELECT ..
  FROM (SELECT ..
          FROM TABLE1 T1
          JOIN TABLE2 T2 ON ..
         LIMIT 10) X
  JOIN OTHERTABLE Y
 LIMIT 20; 
```

*   `JOIN`T1 和 T2 之间首先出现
*   `LIMIT`10 应用于上一步的结果，因此只有来自该派生表的 10 条记录将用于外部查询
*   `LIMIT`20 应用于`JOIN`X 和 Y 之间的结果

虽然 LIMIT 是**PostgreSQL**、**MySQL**和**SQLite**的特定关键字，但 TOP 关键字和**SQL Server**中的处理方式相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:18:16.187

> 首先在所有行上执行 JOIN，然后在 LIMIT 之后**

# google-maps - Webworks 谷歌地图被冻结

> ID：13115735
> 
> 赞同：0
> 
> 时间：2012-10-29T04:08:14.723
> 
> 标签：google-maps, blackberry, blackberry-webworks

我对整个 WebWorks 的东西都很陌生（今天刚开始玩它，准备参加当地的黑莓黑客马拉松），我决定通过谷歌地图 api 的行动来学习它，以生成供我玩的内容，以及考虑我正在为 Android 开发的地图应用程序的 WebWorks 端口。

这是HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <meta id="viewport" name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width"" />
    <link href='style.css' rel='stylesheet' type='text/css'>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=SNIP&sensor=true&language=es&region=CO">
    </script>
    <script type="text/javascript" src="javascript.js">
    </script>
  </head>
  <body onload="initializeMap()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

CSS：

```
html { 
    height: 100% 
}

body { 
    height: 100%; 
    margin: 0; 
    padding: 0; 
}

#map_canvas { 
    height: 100% 
} 
```

和 JS：

```
function initializeMap() {
    var mapOptions = {
      center: new google.maps.LatLng(6.199383, -75.578980),
      zoom: 17,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
    });
}

function placeMarker(location) {
    var marker = new google.maps.Marker({
      position: location,
      map: map
  });

  map.setCenter(location);
} 
```

现在我的问题是：为什么在 Ripple 模拟器上单击或拖动地图不起作用？[WebWorks BB10] 它在 chrome 上创造了奇迹，我可以平移、缩放，当我点击它们时，标记就会被放置。

谢谢。

**编辑** 地图在 Ripple 上渲染得很好，但地图本身不起作用，如果我用鼠标单击或拖动什么也不会发生。卫星、地图和缩放按钮确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:47:58.490

在 Ripple 模拟器上单击或拖动地图可能无法正常工作，原因如下：

1.  发生运行时错误，Google 地图中的某些内容出现故障。尝试打开 Web Inspector（右键单击 Ripple 中的地图并选择“检查元素”）以查看是否有任何运行时错误。它可以解释为什么某些行为没有按预期工作。
2.  触摸事件可能无法正确处理。尝试打开 Web Inspector（右键单击 Ripple 中的地图并选择“检查元素”）。然后打开设置（右下角的齿轮）并选择“覆盖”选项卡。确保启用了“模拟触摸事件”复选框。

希望有帮助。

# java - 这行的 for 循环条件是什么意思？

> ID：13115741
> 
> 赞同：0
> 
> 时间：2012-10-29T04:08:46.890
> 
> 标签：java, for-loop, iteration

> **可能重复：**
> [java for 循环语法](https://stackoverflow.com/questions/7763131/java-for-loop-syntax)

```
for (File file : files){
    ...body...
} 
```

这行的 for 循环条件是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:09:41.697

这是java [for-each](http://jcp.org/aboutJava/communityprocess/jsr/tiger/enhanced-for.html)（或）增强的for循环

这意味着对于文件数组（或）中的每个文件都是可迭代的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:04:13.647

**-**这种形式的循环出现在 Java 中`1.5`，并被称为`For-Each Loop`.

**让我们看看它是如何工作的：**

**对于循环：**

```
int[] arr = new int[5];    // Put some values in

for(int i=0 ; i<5 ; i++){  

// Initialization, Condition and Increment needed to be handled by the programmer

// i mean the index here

   System.out.println(arr[i]);

} 
```

**For-Each 循环：**

```
int[] arr = new int[5];    // Put some values in

for(int i : arr){  

// Initialization, Condition and Increment needed to be handled by the JVM

// i mean the value at an index in Array arr

// Its assignment of values from Array arr into the variable i which is of same type, in an incremental index order

   System.out.println(i);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:12:38.927

`for (File file : files)`-- 在 Java 中的 foreach 循环与`for each file in files`. where`files`是可迭代的，并且`file`是每个元素在 for 循环范围内临时存储的变量。请参阅[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T04:15:59.463

这说对于一组 fo 文件中的每个文件都做...（正文）

阅读有关[For-Each 循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)的更多详细信息。链接中的示例很棒。

# c++ - 如何将对象实例转换为 shared_ptr 实例

> ID：13115746
> 
> 赞同：15
> 
> 时间：2012-10-29T04:09:18.037
> 
> 标签：c++, boost, shared-ptr

假设我有两个 shared_ptr 类型，例如

```
boost::shared_ptr<ObjA> sptrA;
boost::shared_ptr<ObjB> sptrB; 
```

现在假设`sptrA->SomeMethod()`返回一个简单的 ObjB 类型（不是共享 ptr）。我可以以某种方式将该类型存储在 sptrB 中吗？这样我就可以做这样的事情，以便返回的类型实例自动转换为 boost_shared ptr

```
sptrB = sptrA->SomeMethod(); 
```

我只是出于好奇而问了这个问题，这是否可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T06:28:02.537

`boost:shared_ptr`创建对象最标准的方法是使用`make_shared`Boost 提供的函数：

```
#include <boost/shared_ptr.hpp>
#include <boost/make_shared.hpp>

struct A {};

A generator() {
  return A();
}

int main()
{
  using namespace boost;
  shared_ptr<A> p = make_shared<A>(generator());
  return 0;
} 
```

由于该`generator()`函数按值返回一个`A`对象，因此上面的语法意味着`new`使用 的复制构造函数调用它`A`，并且结果指针被包装在一个共享指针对象中。换句话说，`make_shared`并没有完全执行到共享指针的*转换；*相反，它在堆上创建对象的副本并为此提供内存管理。这可能是也可能不是您需要的。

* * *

请注意，这等同于 C++11`std::make_shared`中的 for 。`std::shared_ptr`

* * *

提供您在问题中提到的便捷语法的一种方法是将转换运算符定义为`shared_ptr<A>`for `A`：

```
struct A {
  operator boost::shared_ptr<A>() {
    return boost::make_shared<A>(*this);
  }
}; 
```

然后你可以按如下方式使用它：

```
shared_ptr<A> p = generate(); 
```

这将自动“转换”函数返回的对象。同样，这里的*转换*实际上意味着堆分配、复制和包装在共享指针中。因此，我不确定是否建议定义这样一个方便的转换运算符。它使语法非常方便，但它与所有隐式转换运算符一样，也可能意味着您隐式地导致这些“转换”发生在您没有预料到的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:32:19.937

这完全取决于`ObjA::SomeMethod`返回的内容——副本、引用或指针。在前两种情况下，将其包装成 a 是不可行的`shared_ptr`（因为`shared_ptr`需要一个*指针*）。

第三种情况是可能的，但您必须谨慎行事。确保一旦将指向对象的指针包装到 a`shared_ptr`中，没有其他人会尝试管理该对象的生命周期。

例如，如果您返回一个原始指针，将其包装成一个共享指针，然后在程序稍后的某个时间点，有人`delete`使用相同的指针，您就会遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-29T07:57:06.097

从 C++ 11 开始，您可以使用`std::make_shared<T>()`函数[（链接）](https://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)

例子：

```
int a = 10;
std::shared_ptr<int> shared_a = std::make_shared<int>(a); 
```

# php - 数组中的 PHP 正则表达式字符串

> ID：13115748
> 
> 赞同：0
> 
> 时间：2012-10-29T04:09:24.643
> 
> 标签：php, regex, arrays, post

我希望能够将全局用户名设置`<anythinghere>@domain3.com`为 $usernames 数组中的用户名值（在下面的代码中）。这样我就可以根据域去重定向用户，已经“认证”了。

我将在下面的代码中放置示例。

`$usernames = array("username@domain1.com", $X)`我可以在哪里做类似的事情`$X = <anything-so-long-as-not-blank>@domain3.com`吗？

完整代码如下：

```
<?php

//VALIDATE USERS
$usernames = array("username@domain1.com", "username2@domain1.com", "username3@domain1.com", "username1@domain2.com", "username2@domain2.com", "username1@domain3.com");
$passwords = array("password1", "password2", "password3", "password4", "password5", "password6");

//REDIRECT SPECIFIC VALID USERS OR DOMAIN
function get_page($username) {
$username = strtolower($username);
switch ($username) {
    case "username@domain1.com"    : return "http://www.google.com";
    case "username2@domain1.com"    : return "http://www.yahoo.com";
    case "username3@domain1.com"    : return "http://www.stackoverflow.com";
    case "username1@domain2.com"    : return "http://www.serverfault.com";
        }
return preg_match('/@domain3\.com$/',$username) ?
"http://www.backblaze.com" : "DefaultBackupPage.php";
}
$page = get_page($_POST['username']);

for($i=0;$i<count($usernames);$i++)

{
  $logindata[$usernames[$i]]=$passwords[$i];
}

$found = 0; 

for($i=0;$i<count($usernames);$i++) 
{ 
   if ($usernames[$i] == $_POST["username"]) 
   { 
   $found = 1; 
   } 
} 
if ($found == 0) 
{ 
   header('Location: login.php?login_error=1'); 
   exit; 
} 
if($logindata[$_POST["username"]]==$_POST["password"])
{
   session_start();
   $_SESSION["username"]=$_POST["username"];
   header('Location: '.$page);
   exit;
}
else
{
   header('Location: login.php?login_error=1');
   exit;
}
?> 
```

@inhan 已经像冠军一样帮助了我。我想知道是否有人可以让我过线？干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:19:12.443

您的代码首先需要清理。如果您进行测试运行，其中会出现一堆错误。阅读 IMO 也有点困难。

我在下面附上了一个工作代码示例。

```
// Get users
$input_pwd = ( isset( $_POST["password"] ) ? $_POST["password"] : '' );
$input_user = ( isset( $_POST["username"] ) ? $_POST["username"] : '' );

// Your pseudo database here ;)
$usernames = array(
    "username@domain1.com",
    "username2@domain1.com",
    "username3@domain1.com",
    "username1@domain2.com", 
    "/[a-z][A-Z][0-9]@domain2\.com/",   // use an emtpy password string for each of these
    "/[^@]+@domain3\.com/"              // entries if they don't need to authenticate
);

$passwords = array( "password1", "password2", "password3", "password4", "", "" );

// Create an array of username literals or patterns and corresponding redirection targets
$targets = array(
    "username@domain1.com"           => "http://www.google.com",
    "username2@domain1.com"          => "http://www.yahoo.com",
    "username3@domain1.com"          => "http://www.stackoverflow.com",
    "username1@domain2.com"          => "http://www.serverfault.com",
    "/[a-z][A-Z][0-9]@domain2\.com/" => "http://target-for-aA1-usertypes.com",
    "/[^@]+@domain3\.com/"           => "http://target-for-all-domain3-users.com",
    "/.+/"                           => "http://default-target-if-all-else-fails.com",
);

$logindata = array_combine( $usernames, $passwords );

if ( get_user_data( $input_user, $logindata ) === $input_pwd ) {

   session_start();
   $_SESSION["username"] = $input_user;
   header('Location: ' . get_user_data( $input_user, $targets ) );
   exit;

} else {
    // Supplied username is invalid, or the corresponding password doesn't match
   header('Location: login.php?login_error=1'); 
   exit; 
}

function get_user_data ( $user, array $data ) {

    $retrieved = null;

    foreach ( $data as $user_pattern => $value ) {

        if (
               ( $user_pattern[0] == '/' and preg_match( $user_pattern, $user ) )
            or ( $user_pattern[0] != '/' and $user_pattern === $user)
        ) {

            $retrieved = $value;
            break;

        }

    }

    return $retrieved;

} 
```

# ruby-on-rails - Ruby on Rails 中的复合实体脚手架

> ID：13115750
> 
> 赞同：7
> 
> 时间：2012-10-29T04:09:32.910
> 
> 标签：ruby-on-rails, scaffolding

我是 Ruby on Rails 的新手。到目前为止，我只使用脚手架创建了 CRUD 操作。现在，我需要使用脚手架将两个实体集成为单一形式，而不是通过硬编码。

我们如何使用脚本将两个实体搭建在一起？

我有两个实体，Student_address 和 Student_phnumber。我想将这两个实体搭建成一个可以进行 CRUD 操作的单一形式，并且我想通过搭建来实现这一点。

Student_address 是一个由 Hse_name、Street_name 等组成的实体。 Student_phnumber 是另一个由 ph_number、type 等组成的实体。

我想把这两个实体搭在一起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T04:53:19.913

[脚手架](http://guides.rubyonrails.org/getting_started.html)只不过是为完整的基本资源建模而设置的[生成器。](http://guides.rubyonrails.org/generators.html)除了脚手架之外，Rails 还默认提供了许多其他生成器。它们都没有设置为为一组相关模型生成资源。我怀疑这在很大程度上是因为表达这种关系的方法范围很广，这使得创建通用 UI 几乎是不可能的。此外，脚手架的设置更多是为了让您快速启动和运行，并旨在根据您的需要进行修改。对于任何重要的应用程序，这些修改通常都相当重要。那里有许多第 3 方生成器，包括流行的[漂亮生成器](https://github.com/ryanb/nifty-generators)，但据我所知，没有一个可以创建您想要生成的那种代码。如果这是您需要经常建立的关系，您可以考虑创建自己的生成器来处理任务 - 这实际上非常简单。一个很好的方法是实现你的理想案例，然后从中创建一个生成器。

**编辑：**

此外，您可能希望调整变量/属性名称。它们应该是小写和下划线，所以`Street_name`会变成`street_name`. 任意缩写也使编码/维护变得非常困难，因此`Student_phnumber`最好表示为`student_phone_number`. 这样做的原因，除了一致性（例如`ph_number`vs `Student_phnumber`）之外，Rails 实际上在[这些内部方法](http://apidock.com/rails/ActiveSupport/Inflector)中使用了大小写和间距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T22:10:02.367

让我看看我是否理解你。

您描述的模型/实体关系是：

```
student
   address
    - house_name
    - street_name
    - etc
   phone_number
    - number
    - area_code
    - etc 
```

你想要：

a) 自动生成模型

b) 自动生成带有表单的控制器/视图以创建学生，包括设置地址和电话号码的字段

好的。b) 不能通过 Rails 脚手架完成。但是，您可以使用 ActiveSupport gem（[此处的文档](https://github.com/activescaffold/active_scaffold)）来实现此目的。这是你要做的：

```
gem install active_scaffold
rails g active_scaffold Student name:string
rails g active_scaffold PhoneNumber area_code:integer number:integer student_id:integer
rails g active_scaffold Address first_line:string second_line:string student_id:integer 
```

您必须在这里做的唯一手动工作是弹出模型并添加关系：

```
Address
 belongs_to :student
PhoneNumber
 belongs_to :student
Student
 has_one :address
 has_one :phone_number 
```

ActiveScaffold 会**自动**为您生成如下视图：

![在此处输入图像描述](../Images/69b0e4b51ad259a3754542fb16eae083.png)

填写该表格，您的模型将全部保存并链接在一起！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:26:06.883

这是你想要的？

`rails generate scaffold Student student_address:string student_phnumber:string`

# python - python中的硒htmlunitwithjs错误

> ID：13115767
> 
> 赞同：1
> 
> 时间：2012-10-29T04:12:51.723
> 
> 标签：python, selenium, htmlunit, selenium-webdriver

好的，所以我正在尝试使用 selenium 解析网站。我将在 python 中执行此操作，当我使用 firefox 浏览器时它可以正常工作。我可以浏览网站并很好地解析它。

```
page = webdriver.Remote(command_executor='http://127.0.0.1:4444/wd/hub',desired_capabilities=DesiredCapabilities.FIREFOX) 
```

但是，由于我必须获取所有 24something 国家/地区的信息，我希望能够使用 HTMLUNIT 来完成它，但这给了我一个错误。当我运行以下代码时它工作正常

```
page = webdriver.Remote(command_executor='http://127.0.0.1:4444/wd/hub',desired_capabilities=DesiredCapabilities.HTMLUNITWITHJS) 
```

（注意我放了'HTMLUNITWITHJS'..它仍然给我同样的错误）但是一旦我尝试这样做

```
page.get("http://www.investmentmap.org") 
```

它给了我以下错误

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/lib/python2.6/site-packages/selenium-2.25.0-py2.6.egg/selenium/webd
river/remote/webdriver.py", line 168, in get
self.execute(Command.GET, {'url': url})
File "/usr/lib/python2.6/site-packages/selenium-2.25.0-py2.6.egg/selenium/webd
river/remote/webdriver.py", line 156, in execute
self.error_handler.check_response(response)

File "/usr/lib/python2.6/site-packages/selenium-2.25.0-py2.6.egg/selenium/webd
river/remote/errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: u'TypeError: Cannot find
 function attachEvent in object [object Window]. (http://www.investmentmap.org/W
ebResource.axd?d=LhblxRSuIsXvwRXVMFTkFY2_MTprvQMTc0m2WmtZ11CqrDE7VxOZIP2JWr5nhbJ
dQc4rLL2xsB8APnsxJfp2YQ57TEMa7scxhAPpUl0DIfBcLe19toyYfpm3QnO4qTRHvpItdEAI7kl7Kci
Y-atDSENblKs1&t=634763918950917029#1)' ; Screenshot: available via screen ; Stac
ktrace: Method constructError threw an error in ScriptRuntime.java 
```

这是我的源代码

```
import time, threading
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

page = webdriver.Remote(command_executor='http://127.0.0.1:4444/wd/hub',desired_capabilities=DesiredCapabilities.HTMLUNITWITHJS)

page.get("http://www.investmentmap.org") 
```

哦还有一件事。我在 Windows 7 中的 cygwin 上运行 python，但即使我在我的 mac 中执行此操作，我也会遇到同样的错误。我也在使用 selenium-server-standalone java 服务器。这是它转储的

```
00:03:34.163 INFO - Executing: [new session: {platform=ANY, javascriptEnabled=tr
ue, browserName=htmlunit, version=firefox}] at URL: /session)
00:03:37.025 INFO - Done: /session
00:03:37.036 INFO - Executing: org.openqa.selenium.remote.server.handler.GetSess
ionCapabilities@3fd54ead at URL: /session/1351482881929)
00:03:37.038 INFO - Done: /session/1351482881929
00:04:38.844 INFO - Executing: [get: http://www.investmentmap.org] at URL: /sess
ion/1351482881929/url)
00:04:40.133 WARN - Recursive src attribute of iframe: url=[#]. Ignored.
00:04:40.526 WARN - Obsolete content type encountered: 'text/javascript'.
00:04:42.640 WARN - CSS error: [36:27] Error in style rule. Invalid token ":". W
as expecting one of: <S>, "}", <COMMA>, ";", "/", <PLUS>, "-", <HASH>, <STRING>,
 <URI>, "!", "inherit", <EMS>, <EXS>, <LENGTH_PX>, <LENGTH_CM>, <LENGTH_MM>, <LE
NGTH_IN>, <LENGTH_PT>, <LENGTH_PC>, <ANGLE_DEG>, <ANGLE_RAD>, <ANGLE_GRAD>, <TIM
E_MS>, <TIME_S>, <FREQ_HZ>, <FREQ_KHZ>, <DIMENSION>, <PERCENTAGE>, <NUMBER>, <FU
NCTION>, <IDENT>.
00:04:42.755 WARN - CSS warning: [36:27] Ignoring the following declarations in
this rule.
00:04:44.868 WARN - Exception thrown
org.openqa.selenium.WebDriverException: com.gargoylesoftware.htmlunit.ScriptExce
ption: TypeError: Cannot find function attachEvent in object [object Window]. (h
ttp://www.investmentmap.org/WebResource.axd?d=LhblxRSuIsXvwRXVMFTkFY2_MTprvQMTc0
m2WmtZ11CqrDE7VxOZIP2JWr5nhbJdQc4rLL2xsB8APnsxJfp2YQ57TEMa7scxhAPpUl0DIfBcLe19to
yYfpm3QnO4qTRHvpItdEAI7kl7KciY-atDSENblKs1&t=634763918950917029#1)
Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:08:56'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.ver
sion: '1.7.0'
Driver info: driver.version: EventFiringWebDriver
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.get(HtmlUnitDriver.java:3
52)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.get(HtmlUnitDriver.java:3
33)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(Even
tFiringWebDriver.java:101)
        at $Proxy1.get(Unknown Source)
        at org.openqa.selenium.support.events.EventFiringWebDriver.get(EventFiri
ngWebDriver.java:155)
        at org.openqa.selenium.remote.server.handler.ChangeUrl.call(ChangeUrl.ja
va:38)
        at org.openqa.selenium.remote.server.handler.ChangeUrl.call(ChangeUrl.ja
va:1)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at org.openqa.selenium.remote.server.DefaultSession$1.run(DefaultSession
.java:150)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: com.gargoylesoftware.htmlunit.ScriptException: TypeError: Cannot find
 function attachEvent in object [object Window]. (http://www.investmentmap.org/W
ebResource.axd?d=LhblxRSuIsXvwRXVMFTkFY2_MTprvQMTc0m2WmtZ11CqrDE7VxOZIP2JWr5nhbJ
dQc4rLL2xsB8APnsxJfp2YQ57TEMa7scxhAPpUl0DIfBcLe19toyYfpm3QnO4qTRHvpItdEAI7kl7Kci
Y-atDSENblKs1&t=634763918950917029#1)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitCon
textAction.run(JavaScriptEngine.java:595)
        at net.sourceforge.htmlunit.corejs.javascript.Context.call(Context.java:
537)
        at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.call(Contex
tFactory.java:538)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(Jav
aScriptEngine.java:499)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine.execute(Jav
aScriptEngine.java:474)
        at com.gargoylesoftware.htmlunit.html.HtmlPage.executeJavaScriptIfPossib
le(HtmlPage.java:870)
        at com.gargoylesoftware.htmlunit.html.HtmlScript.executeInlineScriptIfNe
eded(HtmlScript.java:302)
        at com.gargoylesoftware.htmlunit.html.HtmlScript.executeScriptIfNeeded(H
tmlScript.java:368)
        at com.gargoylesoftware.htmlunit.html.HtmlScript$1.execute(HtmlScript.ja
va:230)
        at com.gargoylesoftware.htmlunit.html.HtmlScript.onAllChildrenAddedToPag
e(HtmlScript.java:240)
        at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endE
lement(HTMLParser.java:598)
        at org.apache.xerces.parsers.AbstractSAXParser.endElement(Unknown Source
)
        at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.endE
lement(HTMLParser.java:556)
        at org.cyberneko.html.HTMLTagBalancer.callEndElement(HTMLTagBalancer.jav
a:1142)
        at org.cyberneko.html.HTMLTagBalancer.endElement(HTMLTagBalancer.java:10
44)
        at org.cyberneko.html.filters.DefaultFilter.endElement(DefaultFilter.jav
a:206)
        at org.cyberneko.html.filters.NamespaceBinder.endElement(NamespaceBinder
.java:329)
        at org.cyberneko.html.HTMLScanner$ContentScanner.scanEndElement(HTMLScan
ner.java:3018)
        at org.cyberneko.html.HTMLScanner$ContentScanner.scan(HTMLScanner.java:2
005)
        at org.cyberneko.html.HTMLScanner.scanDocument(HTMLScanner.java:908)
        at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:499
)
        at org.cyberneko.html.HTMLConfiguration.parse(HTMLConfiguration.java:452
)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.pars
e(HTMLParser.java:789)
        at com.gargoylesoftware.htmlunit.html.HTMLParser.parse(HTMLParser.java:2
25)
        at com.gargoylesoftware.htmlunit.html.HTMLParser.parseHtml(HTMLParser.ja
va:179)
        at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(Defau
ltPageCreator.java:221)
        at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPa
geCreator.java:106)
        at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient
.java:433)
        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:311)
        at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:373)
        at org.openqa.selenium.htmlunit.HtmlUnitDriver.get(HtmlUnitDriver.java:3
46)
        ... 16 more
Caused by: net.sourceforge.htmlunit.corejs.javascript.EcmaError: TypeError: Cann
ot find function attachEvent in object [object Window]. (http://www.investmentma
p.org/WebResource.axd?d=LhblxRSuIsXvwRXVMFTkFY2_MTprvQMTc0m2WmtZ11CqrDE7VxOZIP2J
Wr5nhbJdQc4rLL2xsB8APnsxJfp2YQ57TEMa7scxhAPpUl0DIfBcLe19toyYfpm3QnO4qTRHvpItdEAI
7kl7KciY-atDSENblKs1&t=634763918950917029#1)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructErr
or(ScriptRuntime.java:3790)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.constructErr
or(ScriptRuntime.java:3768)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeError(Sc
riptRuntime.java:3796)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.typeError2(S
criptRuntime.java:3815)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.notFunctionE
rror(ScriptRuntime.java:3885)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunct
ionAndThisHelper(ScriptRuntime.java:2363)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.getPropFunct
ionAndThis(ScriptRuntime.java:2330)
        at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(
Interpreter.java:1514)
        at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Inte
rpreter.java:854)
        at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.call(I
nterpretedFunction.java:164)
        at net.sourceforge.htmlunit.corejs.javascript.ContextFactory.doTopCall(C
ontextFactory.java:429)
        at com.gargoylesoftware.htmlunit.javascript.HtmlUnitContextFactory.doTop
Call(HtmlUnitContextFactory.java:267)
        at net.sourceforge.htmlunit.corejs.javascript.ScriptRuntime.doTopCall(Sc
riptRuntime.java:3183)
        at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.exec(I
nterpretedFunction.java:175)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$3.doRun(Jav
aScriptEngine.java:490)
        at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitCon
textAction.run(JavaScriptEngine.java:589)
        ... 47 more
00:04:44.918 WARN - Exception: TypeError: Cannot find function attachEvent in ob
ject [object Window]. (http://www.investmentmap.org/WebResource.axd?d=LhblxRSuIs
XvwRXVMFTkFY2_MTprvQMTc0m2WmtZ11CqrDE7VxOZIP2JWr5nhbJdQc4rLL2xsB8APnsxJfp2YQ57TE
Ma7scxhAPpUl0DIfBcLe19toyYfpm3QnO4qTRHvpItdEAI7kl7KciY-atDSENblKs1&t=63476391895
0917029#1) 
```

# python - 在 Python 中使用“from”作为脚本参数

> ID：13115770
> 
> 赞同：3
> 
> 时间：2012-10-29T04:13:09.430
> 
> 标签：python

我的任务要求将“from”用作命令行输入的参数。

```
p = optparse.OptionParser()
p.add_option("--from")
p.add_option("--to")
p.add_option("--file", default="carla_coder.ics")
options, arguments = p.parse_args()

print options.from 
```

显然，“from”是一个 Python 关键字……有什么办法可以解决这个问题吗？基本上，脚本应该使用 `file.py --from=dd/mm/yyyy --to=dd/mm/yyyy --file=file`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T04:16:23.743

使用[属性](http://docs.python.org/2/library/optparse.html#optparse.Option.dest)[指定`dest`](http://docs.python.org/2/library/optparse.html#optparse.Option.dest)名称：

```
p.add_option("--from", dest="foo")

print options.foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:20:33.667

使用 Python 的`getattr`函数：

```
getattr(options, 'from') 
```

行为类似于`options.from`，除了属性名称不必遵循 Python 通常的变量命名规则（包括关键字冲突）。

# ruby-on-rails - 如何创建 Rails 迁移以删除/更改精度和十进制缩放？

> ID：13115772
> 
> 赞同：37
> 
> 时间：2012-10-29T04:13:18.203
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, postgresql

我正在尝试从`NUMERIC`我的数据库中的十进制（PostgreSQL）字段中删除精度和比例属性？

田野：

```
t.decimal  "revenue_per_transaction", :precision => 8, :scale => 2
t.decimal  "item_quantity",           :precision => 8, :scale => 2
t.decimal  "goal_conversion",         :precision => 8, :scale => 2
t.decimal  "goal_abandon",            :precision => 8, :scale => 2
t.decimal  "revenue",                 :precision => 8, :scale => 2 
```

我需要在迁移中添加什么来将这些更改为无限规模和精度，或者增加规模？目前我正在达到规模限制并收到如下错误：

```
ERROR:   numeric field overflow 
```

这是上下文：[Heroku 上的“PG::Error - numeric field overflow”](https://stackoverflow.com/questions/13115229/pgerror-numeric-field-overflow-on-heroku/13115261)

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-10-29T04:27:20.110

格式 ：

```
change_column(table_name, column_name, type, options): Changes the column to a different type using the same parameters as add_column. 
```

首先在你的终端：

```
rails g migration change_numeric_field_in_my_table 
```

然后在您的迁移文件中：

```
class ChangeNumbericFieldInMyTable < ActiveRecord::Migration
  def self.up
   change_column :my_table, :revenue_per_transaction, :decimal, :precision => give whatever, :scale => give whatever
  end
end 
```

然后

```
run rake db:migrate 
```

来源：[http ://api.rubyonrails.org/classes/ActiveRecord/Migration.html](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-11T20:47:31.363

在您的迁移文件中，将您的字段更改为 :integer 并运行 run rake db:migrate

# python - 导入 pyIpopt 时出错

> ID：13115775
> 
> 赞同：3
> 
> 时间：2012-10-29T04:13:32.170
> 
> 标签：python, gcc, ubuntu, linker, ipopt

我正在尝试安装和配置`pyIpopt`. Ipopt 已经安装并且示例运行良好。

在 shell 中，当我导入 pyIpopt 时，出现错误：

```
ImportError: /***PATH***/libipopt.so.1: undefined symbol: MPI_Init 
```

pyIpopt git 项目的 FAQ 部分为这些类型的错误提供了这个[：](https://github.com/xuy/pyipopt#miscellaneous-problems)

> 谷歌搜索找到库文件，并在 pyipopt 的 makefile 中添加 -lWhateverLibrary。

我用谷歌搜索并找到了这个：[http](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Init.html) ://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Init.html 。我不知道如何获取库或将其添加到生成文件中......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:09:04.837

刚刚在ubuntu上遇到了类似的问题。

使用 libmumps-seq 对我有用：

*   安装了 libmumps-seq-4.9.2（仅使用 apt-get，与普通的 libmumps 一起）
*   在 setup.py 中将库列表参数“coinmumps”更改为“dmumps_seq-4.9.2”

重建和安装。

如果我理解正确，默认的 mumps 是分布式的（使用 MPI lib，这可能是一个痛苦的世界），我所需要的只是 mumps-seq 提供的顺序的。

# function - MATLAB 从一个函数更新全局变量不会反映在另一个函数中

> ID：13115776
> 
> 赞同：1
> 
> 时间：2012-10-29T04:13:47.713
> 
> 标签：function, matlab, global-variables, updates

我有一个使用全局变量的函数，我想从另一个函数更改它的值。即使我尝试了多种方式，使用该值的函数似乎也没有使用全局变量的新值进行更新。这是我正在使用的代码。

**计算.m**

```
function calculateTest()

global isStop;
global value;

value=0;
while ~isStop
    pause(1);
    value = value+1
end

end 
```

**开始.m**

```
function start()

global isStop;
isStop = 0;
calculateTest();
end 
```

**停止.m**

```
function stop()

global isStop;
isStop = 1;
end 
```

当我调用 start() 时，值开始打印。但即使我调用 stop()，它也永远不会停止。它继续打印。你知道我错过了什么吗？

（我也试过*while isStop==0*。但结果是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T09:51:42.157

我认为您需要的是一个*后台线程*，它可以`calculateTest`同时让您有可能`stop`从 matlab 脚本/命令行运行。纯粹意义上的 MATLAB 不支持此功能。您有时可以使用该[`timer`](http://www.mathworks.se/help/matlab/ref/timer.html)功能实现类似的事情。本质上，您告诉 MATLAB 在经过一段时间后重复运行一个函数。但是，MATLAB 正在前台运行计时器函数。在这样做的同时，您无法运行您的`stop`脚本。所以你不能在定时器函数中实现长循环。`timer`只好安排一些任务由 MATLAB 时不时执行，但不实现线程。

您可以使用 MEX 函数实现自己的后台线程。然后，您可以调用 MEX 函数将`'start'/'stop'`命令传递给您的线程。但是 MEX 线程必须在内部进行数据处理。例如，您不能调用一些 matlab 脚本来完成这项工作。

另一件事。`start`并且`stop`是管理定时器的 MATLAB 函数。不要将这些标识符用作您自己的函数的名称 - 这是允许的，但被认为是一种不好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:28:59.203

您实际上并未在代码中的任何位置调用 stop 函数，因此它没有机会更新全局变量。

**例如，您可以通过添加条件测试来修改**calculateTest( )

```
function calculateTest()

global isStop;
global value;

value=0;
while ~isStop
    pause(1);
    value = value+1
    if value == 5
        stop;
    end
end

end 
```

你会发现这可以很好地阻止它。如果您将停止命令添加到 start 中，在 CalculateTest 之后，那将不起作用，因为控制流永远不会到达该行 - 它一直在 CalculateTest 上，直到该函数终止。

# android-camera - Android相机消耗通话时间

> ID：13115783
> 
> 赞同：0
> 
> 时间：2012-10-29T04:15:11.030
> 
> 标签：android-camera

一段时间后，当我使用我的安卓手机时，我发现相机已经消耗了大量数据。如果我强制停止相机，它不会停止消耗。如何阻止我的相机通过`downloading`大量 MB 数据消耗这么多的通话时间，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:23:05.427

您可能会看到与 picasa 网络相册同步的图库。尝试在 Gallery 应用程序中关闭同步，也可以在 google+ 应用程序中关闭同步。

# java - 向所有客户端发送消息（客户端 - 服务器通信）

> ID：13115784
> 
> 赞同：16
> 
> 时间：2012-10-29T04:15:33.877
> 
> 标签：java, multithreading, sockets

所以现在，我正在制作一个基于客户端服务器应用程序的多线程。在服务器端，我为每个接受的连接创建一个线程。

在线程类中，我创建了一个向客户端发送命令的方法。我只是想要的是，如何向所有正在运行的客户端发送参数？对于简单的陈述，我只想让这个服务器向所有连接的客户端发送一条消息。

我已经阅读[了这篇文章并从](https://stackoverflow.com/questions/9969585/how-do-i-send-data-to-all-threaded-clients-in-java)[这个链接](http://carfield.com.hk/document/java/tutorial/socket_chat.pdf)中找到`sendToAll(String message)`了方法。但是当我在我的代码中尝试时，在.`ServerSocket`

好的，这是我的服务器和线程示例代码。

```
class ServerOne{

ServerSocket server = null;
...

ServerOne(int port){
            System.out.println("Starting server on port "+port);
    try{
      server = new ServerSocket(port);
              System.out.println("Server started successfully and now waiting for client");

    } catch (IOException e) {
      System.out.println("Could not listen on port "+port);
      System.exit(-1);
    }
}

public void listenSocket(){ 
    while(true){
        ClientWorker w;
        try{
            w = new ClientWorker(server.accept());
            Thread t = new Thread(w);
            t.start();
        } catch (IOException e) {
            System.out.println("Accept failed: 4444");
            System.exit(-1);
        }   
    }
}

protected void finalize(){
    try{
        server.close();
    } catch (IOException e) {
        System.out.println("Could not close socket");
        System.exit(-1);
    }
}
}

class ClientWorker implements Runnable{
Socket client;

ClientWorker(Socket client){
    this.client = client;
}
public void run(){
    ...
      sendCommand(parameter);
    ...
}

public void sendCommand(String command){
    PrintWriter out = null;
    try {
        out = new PrintWriter(client.getOutputStream(), true);
        out.println(command);
    } catch (IOException ex) {}
}

} 
```

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-29T05:10:05.427

> 不建议将以下答案用于完整的服务器，因为您应该将 Java EE 与 servlet、Web 服务等一起使用。
> 
> 这仅适用于少数计算机想要连接以执行特定任务的情况，并且使用简单的 Java 套接字不是一般问题。想想分布式计算或多人游戏。

**编辑：**我 - 自第一篇文章以来 - 大大更新了这个架构，现在经过测试并且是线程安全的。有需要的朋友可以[在这里](https://github.com/mordechaim/javax.server)下载。

只需使用（直接，或通过子类化）`Server`和`Client`，`start()`它们，一切就准备好了。阅读内联注释以获得更强大的选项。

* * *

虽然客户端之间的通信相当复杂，但我会尽量简化它。

以下是服务器中的要点：

*   保留已连接客户端的列表。
*   定义一个线程，用于服务器输入。
*   定义接收消息的队列。
*   一个线程从队列中轮询，并使用它。
*   一些用于发送消息的实用方法。

对于客户：

*   定义一个线程，用于客户端输入。
*   定义接收消息的队列。
*   一个线程从队列中轮询，并使用它。

这是服务器类：

```
public class Server {
    private ArrayList<ConnectionToClient> clientList;
    private LinkedBlockingQueue<Object> messages;
    private ServerSocket serverSocket;

    public Server(int port) {
        clientList = new ArrayList<ConnectionToClient>();
        messages = new LinkedBlockingQueue<Object>();
        serverSocket = new ServerSocket(port);

        Thread accept = new Thread() {
            public void run(){
                while(true){
                    try{
                        Socket s = serverSocket.accept();
                        clientList.add(new ConnectionToClient(s));
                    }
                    catch(IOException e){ e.printStackTrace(); }
                }
            }
        };

        accept.setDaemon(true);
        accept.start();

        Thread messageHandling = new Thread() {
            public void run(){
                while(true){
                    try{
                        Object message = messages.take();
                        // Do some handling here...
                        System.out.println("Message Received: " + message);
                    }
                    catch(InterruptedException e){ }
                }
            }
        };

        messageHandling.setDaemon(true);
        messageHandling.start();
    }

    private class ConnectionToClient {
        ObjectInputStream in;
        ObjectOutputStream out;
        Socket socket;

        ConnectionToClient(Socket socket) throws IOException {
            this.socket = socket;
            in = new ObjectInputStream(socket.getInputStream());
            out = new ObjectOutputStream(socket.getOutputStream());

            Thread read = new Thread(){
                public void run(){
                    while(true){
                        try{
                            Object obj = in.readObject();
                            messages.put(obj);
                        }
                        catch(IOException e){ e.printStackTrace(); }
                    }
                }
            };

            read.setDaemon(true); // terminate when main ends
            read.start();
        }

        public void write(Object obj) {
            try{
                out.writeObject(obj);
            }
            catch(IOException e){ e.printStackTrace(); }
        }
    }

    public void sendToOne(int index, Object message)throws IndexOutOfBoundsException {
        clientList.get(index).write(message);
    }

    public void sendToAll(Object message){
        for(ConnectionToClient client : clientList)
            client.write(message);
    }

} 
```

* * *

这里是客户端类：

```
public class Client {
    private ConnectionToServer server;
    private LinkedBlockingQueue<Object> messages;
    private Socket socket;

    public Client(String IPAddress, int port) throws IOException{
        socket = new Socket(IPAddress, port);
        messages = new LinkedBlokingQueue<Object>();
        server = new ConnecionToServer(socket);

        Thread messageHandling = new Thread() {
            public void run(){
                while(true){
                    try{
                        Object message = messages.take();
                        // Do some handling here...
                        System.out.println("Message Received: " + message);
                    }
                    catch(InterruptedException e){ }
                }
            }
        };

        messageHandling.setDaemon(true);
        messageHandling.start();
    }

    private class ConnectionToServer {
        ObjectInputStream in;
        ObjectOutputStream out;
        Socket socket;

        ConnectionToServer(Socket socket) throws IOException {
            this.socket = socket;
            in = new ObjectInputStream(socket.getInputStream());
            out = new ObjectOutputStream(socket.getOutputStream());

            Thread read = new Thread(){
                public void run(){
                    while(true){
                        try{
                            Object obj = in.readObject();
                            messages.put(obj);
                        }
                        catch(IOException e){ e.printStackTrace(); }
                    }
                }
            };

            read.setDaemon(true);
            read.start();
        }

        private void write(Object obj) {
            try{
                out.writeObject(obj);
            }
            catch(IOException e){ e.printStackTrace(); }
        }

    }

    public void send(Object obj) {
        server.write(obj);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T04:28:25.277

服务器套接字中没有方法可以向所有正在运行的客户端线程发送数据或消息。请通过`ServerThread.java`调用`sendToAll`usng 服务器的程序。

```
// ... and have the server send it to all clients
server.sendToAll( message ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T05:42:24.820

查看 zeroMQ。有一些称为“发布订阅”或“发布订阅”的方法可以满足您的需求。您还可以使用它在线程之间进行通信。在我看来，这是一个了不起的图书馆。它具有 java 或 jzmq 绑定以及 30 多个其他绑定，因此您应该能够在您的程序中使用它。

[http://www.zeromq.org/](http://www.zeromq.org/)

# struts2 - struts2 迭代器标记 - 迭代集合的集合

> ID：13115786
> 
> 赞同：2
> 
> 时间：2012-10-29T04:15:42.120
> 
> 标签：struts2

我是 struts 2 的新手，并且对使用迭代器标记在我的 JSP 中迭代集合的集合失去了理智。

我的动作类公开了一个列表（父级），其中又包含 4 个列表（子级）。每个子列表包含 5 个域对象 ( `e.g. User`)。

在我的 JSP 中，我需要在遍历集合后显示 User.Name。我能够遍历父集合，但无法访问子列表。它们是匿名列表，不以特定名称公开（即，getter 不可用）。

```
 <s:iterator value="usrList" var="refParent">
    <ul>
        <s:iterator value="#refParent.columns" var="usr">
        <li>
            <s:property value="#usr.Name"/>
        </li>
        </s:iterator>   
    </ul>
</s:iterator> 
```

外部迭代器产生 4 个`<ul>`标签，但每个标签都是空的，即不`<li>`显示任何标签。

我看到的所有示例都在访问特定的命名集合（例如`User.PhoneList`），但它们似乎都没有表现出这种特殊行为。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:31:32.497

我想我终于从一个 Iterator-tag 示例中弄清楚了（感谢 Umesh 和 Quaternion）。我完全错过了那个，也没有使用`top`.

```
 <s:iterator value="usrList">
     <ul>
        <s:iterator value="top">
         <li>
            <s:property value="Name"/>
         </li>
        </s:iterator>   
    </ul>
  </s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:49:13.490

Struts2 Iterator 标记足够简单并且工作方式非常简单。因此，如果您有 Collection 的 Collection 或任何结构认为您将如何在简单的 Java 应用程序中迭代它们，同样适用于 S2 迭代器标记，但同时它会给你更多的灵活性以及配置。

简而言之，您需要嵌套的迭代器标记。当 S2 迭代器标记迭代对象时，它会将当前对象放在值堆栈的顶部，您可以轻松地在 JSP 代码中访问该标记。

由于在您的代码中顶级对象将是一个集合，您需要再次迭代它

```
<s:iterator value="firstCollection">
 <s:iterator value="firstCollection>
    / do what you want here
  </iterator> 
```

由于迭代对象将位于堆栈顶部，因此您可以直接引用该标记而无需任何引用。

我建议你看看以下官方文件

1.  [迭代器](http://struts.apache.org/2.3.4/docs/iterator.html)
2.  [迭代器标签示例](http://struts.apache.org/2.3.1/docs/iterator-tag-examples.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:19:06.063

**[请从此链接](http://www.mkyong.com/struts2/struts-2-iterator-tag-example/)**尝试此示例

```
<table>
<s:iterator value="allCities" id="cities">
    <s:iterator value="#city.phoneNumbers" id="number">
    <tr>
        <td>
        <!-- Accessing the city name through the city variable -->
            <s:property value="#city.name" />
        </td>
        <td>
            <!-- Accessing the objects inside the phone number object through the number variable -->
            <s:property value="#number.prefix" />
        </td>
        <td>
            <s:property value="#number.rate" />
        </td>
    </tr>
    </s:iterator>
</s:iterator>
</table> 
```

# jquery - 如何提示用户为 mailto 属性选择电子邮件客户端

> ID：13115787
> 
> 赞同：2
> 
> 时间：2012-10-29T04:15:48.110
> 
> 标签：jquery, html, mailto, email-client

我一直在寻找此功能，是否可以在用户单击*mailto 时添加电子邮件客户端选择器：*例如，我正在为电子邮件使用以下代码

```
<a href="mailto:email@me.com">Email Us</a> 
```

如果用户想要使用 gmail/yahoo/hotmail 而不是他的默认电子邮件客户端，例如 Outlook，该怎么办。我也发现了一个[类似的问题](https://stackoverflow.com/questions/3754478/can-we-specify-a-particular-email-client-while-using-href-mailto)。但我需要知道这在任何情况下是否都可以使用任何 jQuery 插件或 HTML，无论它可能是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:04:32.233

你不能用'mailto'功能做到这一点。但是您可以借助 php 功能实现定位电子邮件客户端。这是针对特定基于 Web 的客户端的 php 函数：

```
 Targeting Specific Web-based Clients

function wcs_mailto_ex($mailto='', $subject='', $body='', $client='', $link_text='', $link_title='', $at_replace='&#64;')
{
// init
$subject = rawurlencode(strip_tags($subject));
$body = str_replace('\r\n', '%0A', $body);
$body = str_replace('\n', '%0A', $body);
if (!$link_text) {$link_text = $mailto;}
$link_text = str_replace('@', $at_replace, $link_text);
$client = strtolower($client);

// default parameters (system mail: Outlook, Thunderbird, etc.)
$email['url'] = 'mailto:' . $mailto . '?subject=' . $subject . '&amp;body=' . $body;
$email['width'] = 0;
$email['height'] = 0;
$email['scrollbars'] = 0;

// constuct client-specific parameters
switch($client)
{
    case 'gmail':
    case 'g mail':
    case 'google mail':
    case 'google':
        $email['url'] = 'https://mail.google.com/mail/?view=cm&fs=1&tf=1&source=mailto&shva=1&to=' . $mailto . '&amp;su=' . $subject . '&amp;body=' . $body;
        $email['width'] = 700;
        $email['height'] = 500;
        $email['scrollbars'] = 1;
        break;
    case 'hotmail':
    case 'hmail':
    case 'livemail':
    case 'live mail':
        $email['url'] = 'http://mail.live.com/?rru=compose&amp;to=' . $mailto . '&amp;subject=' . $subject . '&amp;body=' . $body;
        $email['width'] = 850;
        $email['height'] = 550;
        $email['scrollbars'] = 1;
        break;
    case 'yahoo mail':
    case 'ymail':
    case 'yahoo':
        $body = str_replace('%0A', '<br>', $body);
        $body = urlencode(urlencode($body));
        $email['url'] = 'http://compose.mail.yahoo.com?to=' . $mailto . '&subject=' . rawurlencode($subject) . '&amp;body=' . $body;
        $email['width'] = 750;
        $email['height'] = 625;
        $email['scrollbars'] = 1;
        break;
}

// prep for popup
$wdw_name = 'wcs_mailto_ex_wdw';
$wdw_features = "scrollbars=$scrollbars,status=0,toolbar=0,location=0,directories=0,menubar=0,resizable=1,width=";
$url = $email['url'];
$width = $email['width'];
$height = $email['height'];
$scrollbars = $email['scrollbars'];

// determine if display should be a popup window
if ($email['width'])
{
    $javascript = "window.open('$url', '$wdw_name', '$wdw_features$width,height=$height');return false;";
    $output = "<a rel='nofollow' style='cursor:pointer;' onclick=\"$javascript\" title='$title'>" . $link_text . "</a>";
}
else
{
    $output = '<a href="' . $url . '" rel="nofollow" title="' . $link_title . '">' . $link_text . '</a>';
}

// exit
echo $output;
} 
```

要定位 gmail 客户端，请按如下方式调用上述函数：

```
 wcs_mailto_ex('AnEmailAccount@gmail.com',
            'Test Subject Line',
            'This is a sample\n\nemail for testing.\n\nBest regards,\nme',
            'gmail',
            'gMail Client'
            ); 
```

来源：[http ://wpcodesnippets.info/blog/how-to-target-mailto-email-clients.html](http://wpcodesnippets.info/blog/how-to-target-mailto-email-clients.html)

# .net - 如何认证适用于 Windows 8 的应用程序？

> ID：13115789
> 
> 赞同：0
> 
> 时间：2012-10-29T04:16:09.610
> 
> 标签：.net, windows-8

我目前管理着一大套在`C# &.NET 3.51`. 现在 Windows 8 已经发布，一些客户和内部利益相关者希望这些应用程序在 Windows 8 中运行（至少是客户端应用程序）。我的 IT 团队尚未认证 Win8 供内部使用。从技术角度来看，我该如何去做？从代码的角度来看，我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:20:50.653

这些应用程序在 Windows 8 中将被视为“桌面应用程序”（与 Windows 应用商店应用程序相反）。[在http://msdn.microsoft.com/library/windows/desktop/dd535817](http://msdn.microsoft.com/library/windows/desktop/dd535817)上有测试与 Windows 8 兼容性的资源（包括[Compatibility Cookbook](http://go.microsoft.com/fwlink/?LinkId=245076)）和有关 Windows 8 桌面应用程序认证的信息。

# php - 使用 file_get_html 未读取文件

> ID：13115793
> 
> 赞同：0
> 
> 时间：2012-10-29T04:17:02.287
> 
> 标签：php, simple-html-dom

我正在使用 curl 将网页存储在 txt 文件中，然后读取该文件以解析其内容。对于某些网站，它运行良好，但对于某些网站，它 (file_get_html) 返回 null。我检查了 txt 文件是用数据生成的，但它无法读取内容。

对于这个网站，当我当时在 file_get_html 中使用直接链接时，它也返回 null。我添加了用户代理但没有工作。最后，我从文件中删除了所有内容，除了一个 div 标签，当时它读取了内容。

请提出为什么会这样？

# java - 本地数据库更改后 Heroku 上的 SQLGrammarException

> ID：13115798
> 
> 赞同：4
> 
> 时间：2012-10-29T04:18:15.380
> 
> 标签：java, sql, hibernate, heroku

我创建了一个使用 Hibernate 和 PostgreSQL 的 Java webapp。它基于 Heroku 的 Java MVC 教程（[https://devcenter.heroku.com/articles/spring-mvc-hibernate](https://devcenter.heroku.com/articles/spring-mvc-hibernate)）。我做了一些小的数据库更改并正确更新了所有休眠注释。在本地一切正常，但是在推送到 Heroku 之后，我现在收到此错误：

```
org.hibernate.exception.SQLGrammarException: could not execute query 
```

...

```
Caused by: org.postgresql.util.PSQLException: ERROR: relation "MY_TABLE" does not exist 
```

因此，似乎我本地计算机上存在的数据库更改并未反映在 heroku 云中。如何让 Heroku “重置”或“重建”我的数据库？

**更新**- 我跑了`heroku pg:reset`，它抛出了一个“内部服务器错误”，告诉我“运行'heroku status'以检查已知的平台问题”，但是运行它没有给出任何信息。然后我检查了该站点，它再次运行（当然没有数据，但这是意料之中的）。不知道到底发生了什么，但这解决了问题。当然，这有助于我丢失所有数据。

# html - 带有 Canvas 的 HTML5 游戏代码

> ID：13115799
> 
> 赞同：0
> 
> 时间：2012-10-29T04:18:19.023
> 
> 标签：html, html5-canvas

我想在 HTML 5 中创建一个基于瓷砖的“打地鼠”游戏。此外，在每次给定的瓷砖上都会出现一个新的痣，需要给出音频提示来指示痣的位置（这样视障人士也可以玩 ）。此外，将鼠标悬停在每个图块上时，需要大声说出其位置（例如（3,4））。现在的问题是我不确定如何开始在 HTML5 中进行编程。请有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-18T08:07:18.130

你可能想试试 panda.js 它是一个用于移动和桌面的 html5 游戏引擎，它有视频教程，展示柜本身已经像游戏 [http://www.pandajs.net/showcase/](http://www.pandajs.net/showcase/)

（完全披露：我自己使用过 pandajs）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:58:53.313

从 javascript 的基础开始。你需要这个在 HTML5 画布中做任何事情：

[http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)

然后继续学习 HTML5 画布：

[http://www.html5canvastutorials.com/tutorials/html5-canvas-tutorials-introduction/](http://www.html5canvastutorials.com/tutorials/html5-canvas-tutorials-introduction/)

# php - 如何在 jQuery 中引用 PHP Codeigniter 控制器函数？（根据当前选择填充下拉菜单））

> ID：13115802
> 
> 赞同：1
> 
> 时间：2012-10-29T04:18:39.277
> 
> 标签：php, jquery, ajax, codeigniter

问题是如何使用 jQuery/AJAX`POST`为我的 Codeigniter 选择第一个下拉列表的值。`controller`这是我需要做的一个例子[http://css-tricks.com/examples/DynamicDropdown/](http://css-tricks.com/examples/DynamicDropdown/)

```
$("#first-choice").change(function() {
    $("#second-choice").load("getter.php?choice=" + $("#first-choice").val());
}); 
```

在`.load()`我希望能够将值传递`#first-choice`给我的控制器。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T12:50:52.620

尝试这个

```
$("#second-choice").load("getter.php",{choice:$("#first-choice").val()},function(){
  //do something here
}); 
```

这会将附加参数发布到服务器，并在服务器完成响应时执行回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:24:56.417

```
$("#first-choice").change(function() {

var str = '';
   $.ajax({
      url: 'getter.php',
      type:'GET',
     dataType:'json',
     data:'choice='+ $("#first-choice").val(),
    success:function(data){ //you must return your data as id and value for the selectbox
      $.each(data as function(v){
       str+='<option value="'+v.yourid+'">'+v.yourvalue+'</option>';
     });
 $("#second-choice").html(str);
    }

   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:12:04.613

尝试这个：

```
$("#first-choice").change(function() {
    $("#second-choice").load("<?php echo site_url('controller-name/method-name'); ?>/" + $("#first-choice").val());
}); 
```

**注意：**我已经使用正斜杠将您的下拉值作为参数传递给您的方法，但这不是必需的，您也可以使用 get 或 post 方法传递

# java - 在 java swing 应用程序中创建设置

> ID：13115805
> 
> 赞同：0
> 
> 时间：2012-10-29T04:19:55.530
> 
> 标签：java, swing, jar, setup-project, setup-deployment

> **可能重复：**
> [如何制作 Java swing 应用程序项目的安装程序包？](https://stackoverflow.com/questions/3509562/how-to-make-installer-pack-of-java-swing-application-project)

我正在开发 java swing 应用程序，我必须将 html 文件提供给客户端以在 swing API 中浏览它们。

现在我想为项目创建设置，以便用户可以在他们的计算机上安装软件，并且我想包含 html 文件、java 类、一些 jar 文件和 ms 访问数据库，以及我如何使用安装后创建的目录路径的软件。

如果可能，请建议代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:58:12.630

使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)安装（并自动更新）应用程序。本身。JWS 还提供了[`ExtensionInstallerService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/ExtensionInstallerService.html)一个钩子来调用数据库安装程序。这是一个[演示。的安装服务](http://pscode.org/jws/api.html#eis)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T07:18:36.627

如果你打算只在 Windows 系统上安装，那么试试这个：

[http://www.jrsoftware.org/isinfo.php](http://www.jrsoftware.org/isinfo.php)

为安装程序编写脚本很简单，它可以完成典型安装程序所做的一切。

# android - 异步重复计划任务

> ID：13115809
> 
> 赞同：1
> 
> 时间：2012-10-29T04:20:24.627
> 
> 标签：android, android-asynctask

如何创建一个`AsyncTask`在固定时间间隔后继续运行的程序。

例如。每 5 分钟从服务器获取数据，并*通知*调用者线程它已收到数据。我在论坛上搜索，但找不到太多。到目前为止我收集到的是

1) UI 线程将调用`AsyncTask`

2)`onPrExecute`用于执行前的 UI 线程访问

3)`OnPostExecute`用于执行后的 UI 线程访问

我不需要向用户显示任何进度更新。此外，当应用程序关闭时，任务将被销毁。任何这方面的教程都会有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:42:01.643

正如评论中的其他建议。所以让我详细说明一下。

不要使用异步任务。只选择 IntentService。

1.  使一个类扩展 IntentService
2.  使用警报管理器通过特定操作项触发您自己的服务的意图
3.  定义一个用于通知客户端此服务的接口。
4.  维护其客户端提供的这些接口实现对象的列表。
5.  在 onHandleIntent(Intent intent) 中通过检查动作来识别调用。
6.  直接在 intentService 上发起数据获取请求，作为使用工作线程工作，并最终调用您维护的接口对象列表的更新委托。

7.  制作方法让活动注册和注销监听这些更新。

8.  这实际上是将它们提供的接口实现添加到您维护的列表中，并在调用 unregister 时从中删除。
9.  确保活动在 onResume 中注册并在 onPause 中取消注册。
10.  使用重复警报或在单个操作运行结束时再次启动警报。我希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:46:52.990

您可以使用[Timer.scheduleAtFixedRate](http://developer.android.com/reference/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20long,%20long%29)`AsyncTask`安排以固定速率重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:55:52.993

试试这个..

**-**更好地使用`Service`，使这项工作一次又一次。

**-**现在您可以使用**bound 或 unbound** `Service`。如果您希望服务绑定到活动，则使用绑定服务，否则使用未绑定服务。

**-**如果使用会更好`IntentService`，因为在这里您**不需要任务继续运行，而是在一定时间后运行。**

**请参阅此链接：**

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-intentservice-basics/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T05:08:43.647

`AsyncTask`我编写了一个定期触发 s 的应用程序，但即使在应用程序关闭时它们仍然存在。无论如何，这就是我必须做的：

1.  创建一个`PendingIntent`(via `getBroadcast()`)，其中包含一个`Intent`包含一个动作的。
2.  将 提供`PendingIntent`给系统`AlarmManager`并设置间隔。
3.  在清单中声明 a`BroadcastReceiver`以捕获提供给`Intent`in no 的操作字符串。1.
4.  用你的`onReceive()`方法`BroadcastReceiver`，开火`AsyncTask`。

# java - 为什么字节码在直接字段访问中调用 Object->getClass()

> ID：13115812
> 
> 赞同：3
> 
> 时间：2012-10-29T04:20:32.173
> 
> 标签：java, android, bytecode, dalvik

我反编译了 Java（实际上是 Dalvik）字节码。在方法的开头，我直接访问实例成员的字段（即不通过getter）。

似乎 Java 调用`Object.getClass()`了访问的实例成员 ( `mOther`)，但没有在任何地方使用结果。这是某种检查吗？为什么需要这个调用？我怀疑这是因为我直接访问了一个字段（在该类中定义），但我没有看到连接。

Java代码和反编译的字节码如下。

（请注意，最后一条指令加载`lifeTime`为常量`0x0001`，因为在 中`MyOtherClass`，我有`lifeTime`一个`public final`字段，并且当前是从代码初始化的。）

```
MyOtherClass other = mOther;
if (mAge >= other.lifeTime) { // lifeTime is initialized to 0x0001
   end();
   return;
}

.line 53
move-object/from16 v0, p0
iget-object v0, v0, Lcom/example/engine/MyClass1;->mOther:Lcom/example/engine/MyOtherClass;
move-object/from16 v16, v0

.line 54
.local v16, other:Lcom/example/engine/MyOtherClass;
move-object/from16 v0, p0

iget v0, v0, Lcom/example/engine/MyClass1;->mAge:I
move/from16 v18, v0

// Why is Object->getClass() called?
invoke-virtual/range {v16 .. v16}, Ljava/lang/Object;->getClass()Ljava/lang/Class;

const/16 v19, 0x0001 
```

## 更新：

在评论中要求我提供该方法的完整源代码。请注意，这`mOther`是一个最终字段（出于性能原因）。你在这里：

```
@Override
public void doStep() {
    MyOtherClass other = mOther;
    if (mAge >= other.lifeTime) {
        end();
        return;
    }
    mAge += TICK_TIME;      

    boolean isSurrounded = false;
    if (mAge > mLastSurroundTime + other.surroundingTime) {
        int distance = (int)other.maxSurroundDistance;          

        for (int bx = bx0; bx <= bx1; ++bx) {
            if (bx < 0 || bx >= mSize) { continue; }
            for (int by = by0; by <= by1; ++by) {
                if (by < 0 || by >= mSize) { continue; }
                ArrayList<WorldObject> candidates = getCandidatesAtPos(bx, by);
                for (int i = 0; i < candidates.size(); ++i) {
                    WorldObject obj = candidates.get(i);
                    if (mSelf!= obj && mSelf.getDistanceFrom(obj) <= other.maxSurroundDistance) {
                        obj.notifyDangerImminent(mSelf);
                        isSurrounded = true;
                    }
                }
            }
        }
        if (isSurrounded) { mLastSurroundTime = mAge; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T19:55:58.247

我假设 lifeTime 是在声明时分配的最终字段：

```
 final int lifeTime = 0x0001; 
```

如果是这样，字节码将通过以下方式进行优化（它与 VM 几乎无关，纯编译器魔法）：

*   不需要真正从内存中获取数据：只需要加载一个常量 1。
*   但是，如果该字段的所有者恰好是**null**怎么办？在这种情况下，必须抛出 NullPointerException。为了保证这样的行为，编译器发出对 getClass() 的调用，因为
    *   实际上检查null，构造一个新的NullPointerException实例并抛出它是**更多的**字节码，
    *   此类调用在 VM 中非常优化，
    *   此方法始终可用，
    *   它不需要任何参数。

一个更简单的例子：

```
class Test {
    private final int myFinalField = 1;

    int test(Test t) {
        return t.myFinalField;
    }
} 
```

如果我们看一下 test() 方法的字节码（这次是 JVM，但如果你把它翻译成 Dalvik，它本质上是一样的），这里也是对 getClass() 的调用：

```
 // access flags 0x0
  test(LTest;)I
   L0
    LINENUMBER 5 L0

    // load t
    ALOAD 1

    // if (t == null) throw new NullPointerException(); compressed in only two instructions
    INVOKEVIRTUAL java/lang/Object.getClass ()Ljava/lang/Class;
    POP

    // the actual value of myFinalField
    ICONST_1

    IRETURN
   L1
    LOCALVARIABLE this LTest; L0 L1 0
    LOCALVARIABLE t LTest; L0 L1 1
    MAXSTACK = 1
    MAXLOCALS = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-29T00:26:14.117

安德烈的回答给出了这个问题的具体答案。但这里有一些与此类问题相关的注意事项：

1.  显然，您可以在 Oracle / OpenJDK 工具链生成的字节码中看到类似的情况。这并不奇怪，因为 Davlik 字节码的一些生成路径涉及将 Java 源代码编译为 JVM 字节码，然后将它们转换为 Davlik 字节码。

2.  如果您因为查看字节码以深入了解某些代码的性能而遇到这个奇怪的工件，那么您可能找错地方了。在现代 JVM / Davlik / ART 引擎中，字节码被翻译成本机代码，而本机代码是大部分时间或所有时间¹执行的内容。

    为了更可靠地了解“微观”级别的代码性能，您需要检查 AOT 或 JIT 编译器生成的本机代码。

3.  字节码编译器发出的字节码通常没有经过高度优化的原因之一是，这样做可能会使 AOT / JIT 更难以有效优化。

4.  Davlik 已被 ART 取代。

* * *

^(1 - With Hotspot JVMs, only JIT and direct bytecode interpretation are supported. Early versions of Davlik were interpret-only, and then JIT support was added, and improved. In ART, all three modes are supported in some form: interpret, JIT and AOT.)

# android - CONTENT_PROVIDER 的 BASE_PATH 到底是什么意思？

> ID：13115814
> 
> 赞同：0
> 
> 时间：2012-10-29T04:20:37.207
> 
> 标签：android, android-contentprovider

我正在尝试构建一个 Content_Provider 但我被困在 Base_path ....

例如，我有如下表名到达：![在此处输入图像描述](../Images/6293db488e799dbb5936e4207a5b6c9e.png)

如何命名 CONTENT_URI ？谁能帮我吗 ？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:44:43.977

从文档：

> 内容`URI`是`URI`标识提供者中的数据的内容。内容 URI 包括整个提供者的符号名称（其权限）和指向表的名称（路径）。当您调用客户端方法来访问提供程序中的表时，表的内容 URI 是参数之一。
> 
> 在前面的代码行中，常量`CONTENT_URI`包含`URI`用户字典的“单词”表的内容。ContentResolver 对象解析出 URI 的权限，并使用它通过将权限与已知提供者的系统表进行比较来“解析”提供者。然后 ContentResolver 可以将查询参数分派给正确的提供者。
> 
> ContentProvider 使用内容 URI 的路径部分来选择要访问的表。提供者通常为其公开的每个表都有一个路径。
> 
> 在前面的代码行中，`URI`“words”表的完整内容是：
> 
> `content://user_dictionary/words` 其中`user_dictionary`string 是提供者的权限，而 words string 是表的路径。字符串 content:// （方案）始终存在，并将其标识为 content `URI`。

所以在 a 中`content_uri`，你有 an`authority`和 a `base_path`。将`ContentResolver`使用`authority`部件来决定选择哪个提供者，然后使用`base_path`部件来决定从哪个表提供数据。因此，简单来说，这`base_path`通常是您的提供程序中特定表的路径。

有关更多信息，请参阅[本](https://developer.android.com/guide/topics/providers/content-provider-basics.html)指南并阅读[本](http://www.vogella.com/articles/AndroidSQLite/article.html)教程。

# c - 如何修复传递给 pango_layout_set_text() 的无效 UTF-8 字符串

> ID：13115816
> 
> 赞同：3
> 
> 时间：2012-10-29T04:20:52.927
> 
> 标签：c, gtk, gtk3, pango

我从使用 gtk+ 的应用程序中收到以下警告：

```
(foo:11333): Pango-WARNING **: Invalid UTF-8 string passed to pango_layout_set_text() 
```

发出警告的函数如下：

```
static void show_error(GtkWindow *parent, const gchar *fmt, ...)
{
  GtkWidget *dialog;
  va_list args;

  va_start(args,fmt);
  dialog = gtk_message_dialog_new(parent,
                  GTK_DIALOG_DESTROY_WITH_PARENT,
                  GTK_MESSAGE_ERROR,
                  GTK_BUTTONS_OK,
                  fmt,
                  args);

  (void)gtk_dialog_run(GTK_DIALOG(dialog));

  gtk_widget_destroy(dialog);
  va_end(args);
} 
```

我打电话给`ui_show_error(window, "error canno't read file %s", filename);`

哪里`filename`是空终止字符串，它适用于`str*()`和`*printf()`函数系列。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:56:38.383

以这种方式链接 va_list 参数是不可能的。请参阅[此常见问题解答条目](http://c-faq.com/varargs/handoff.html)。正在发生的事情是`gtk_message_dialog_new`将 va_list 参数（它具有一些编译器定义的格式）解释为指向字符串的指针，所以你得到了垃圾。由于没有采用 va_list 的消息对话框函数，因此您唯一的选择是使用 vsprintf 或类似的 glib 函数之一构建一个字符串，并将其作为一个参数传递给`gtk_message_dialog_new`类似“%s”的格式。

要面对未知格式字符串构建字符串，通常该技术是使用“n”变体之一，例如使用较大的`vsnprintf`缓冲区，如果发生截断，则增加缓冲区大小并重新处理。但是，glib 有`g_vasprintf()`，它会为您分配缓冲区。它还具有`g_printf_string_upper_bound()`可用于根据格式字符串调整缓冲区大小的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T20:17:41.803

我在 Linux From Scratch (LFS) 构建中遇到了这个问题。问题是影响 java swing 界面文本输入，gdk 界面文本输入，有时会默默地忽略输入，如文本字段被禁用。原因是没有任何 UTF8 语言环境。就我而言：

```
$ locale -a
C
POSIX
pt_BR
pt_BR.iso88591 
```

所以，为了解决我确实定义了一个新的语言环境类型 utf8，比如：

```
localedef -i pt_BR -f UTF-8 pt_BR.UTF-8 
```

在此之后，一切都变得有用并且没有更多的警告。至少在我的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T05:32:31.053

OP 没有显示实际的字符串，ui_show_error 函数在哪里？什么Gtk+版本？默认情况下 gtk_message_dialog_new "use-markup" 属性为 FALSE，所以帖子中是否缺少某些内容？

你可以这样做：

```
msg = g_vasprintf(fmt, args);

if (strstr(msg, "</"))
  msg_has_markup = TRUE;

dialog = g_object_new (GTK_TYPE_MESSAGE_DIALOG,
                       "message-type",         GTK_MESSAGE_ERROR,
                       "text",                 msg,
                       "use-markup",           msg_has_markup,
                       "buttons",              GTK_BUTTONS_OK,
                        NULL);
g_free (msg); 
```

请注意，如果文件名字符串包含在“<>”中，您仍然会收到相同的错误消息，即`</home/somebody`会导致令人讨厌的 pango 消息。要么不使用“<>”，要么不使用 pango。

# linux - direct_io 失败的原因

> ID：13115819
> 
> 赞同：2
> 
> 时间：2012-10-29T04:21:37.280
> 
> 标签：linux, file-io, kernel

我想知道在什么情况下直接 I/O 传输会失败？

为此，我有以下三个子查询。根据“理解 Linux 内核”一书。

1.  Linux 提供了一种绕过页面缓存的简单方法：直接 I/O 传输。在每个 I/O 直接传输中，内核对磁盘控制器进行编程，以将数据直接从属于自缓存应用程序的用户模式地址空间的页面传输到/传输。

-- 所以要解释失败，需要检查应用程序是否具有自缓存功能？不确定如何做到这一点。

2.此外，书中说“当自缓存应用程序希望直接访问文件时，它会打开指定 O_DIRECT 标志的文件。在为 open() 系统调用提供服务时，dentry_open() 函数检查是否实现了 direct_IO 方法对于正在打开的文件的地址空间对象，并在相反的情况下返回错误代码”。

——除此之外，还有什么其他原因可以解释直接 I/O 故障？

3.这个命令“dd if=/dev/zero of=myfile bs=1M count=1 oflag=direct”会不会在linux中失败（假设有足够的磁盘空间）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:16:51.503

底层文件系统和块设备必须支持`O_DIRECT`标志。此命令将失败，因为 tmpfs 不支持`O_DIRECT`.

```
dd if=/dev/zero of=/dev/shm/test bs=1M count=1 oflag=direct 
```

写入大小必须是底层驱动程序块大小的乘积。此命令将失败，因为 123 不是 512 的乘积：

```
dd if=/dev/zero of=myfile bs=123 count=1 oflag=direct 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T06:01:23.020

直接 I/O 会继续失败的原因有很多。

> 因此，要解释失败，需要检查应用程序是否具有自缓存功能？

您不能在外部执行此操作 - 您可以从源代码中推断出这一点，或者观察程序在运行时如何使用资源（我猜是二进制反汇编）。这更多是程序如何工作的属性，而不是“在调用中打开此功能”。认为所有使用`O_DIRECT`自缓存的程序都是一个危险的假设（从概率上我会说它更有可能，但你不确定）。

1.  使用有严格[的要求，`O_DIRECT`在 open 的手册页中有提到（参见`O_DIRECT`NOTES 部分）](http://man7.org/linux/man-pages/man2/open.2.html#NOTES)。
2.  对于现代内核，被操作的区域必须与磁盘块大小对齐，并且其大小必须是磁盘块大小的倍数。未能正确执行此操作甚至可能导致静默回退到缓冲 I/O。
3.  是的，例如尝试在文件系统（例如`tmpfs`）上使用它不支持`O_DIRECT`. 我想如果到磁盘的路径由于某种原因返回故障（例如，与写回发生的情况相比，磁盘正在死并且返回错误要快得多），它也可能会失败。

# java - 如何将 JProgressBar 设置为 Nimbus Lookandfeel，同时保持 UI 的其余部分不变？

> ID：13115820
> 
> 赞同：2
> 
> 时间：2012-10-29T04:21:49.193
> 
> 标签：java, swing, look-and-feel, nimbus

我想在我的 Swing 应用程序中以 Nimbus 样式设置所有 JProgressBar，而其余的是 Windows、Metal、Quauqa 等等。

我怎样才能在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:58:19.647

调用`comp.setUI(...)`和`comp.updateUI()`更改单个组件的 UI。

# asp.net-mvc-3 - mvc3 - 如何从控制器更新 Html.BeginForm() 的动作属性

> ID：13115822
> 
> 赞同：0
> 
> 时间：2012-10-29T04:21:58.627
> 
> 标签：asp.net-mvc-3

在 .ASPX 视图（不是 Razor）中...是否可能...或...我如何修改上的操作

```
 Html.BeginForm("**ACTION**", "controllername",  FormMethod.Post, new { id = "formId" })) 
```

在调用视图之前从控制器的 ActionResult 中获取视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:02:53.183

您可以将以下代码用于动态分配操作名称。

```
@{
    String actionName = /*Assign action name based on the applying condition or using ViewBag you can also get it from controller.*/;
}
@using (Html.BeginForm(actionName, "Basic"))
{

} 
```

# android - 如何使用 android.mk 链接到 Android NDK 应用程序中的 libmedia.so 系统库？

> ID：13115827
> 
> 赞同：5
> 
> 时间：2012-10-29T04:22:52.853
> 
> 标签：android, android-ndk

我想创建一个使用 Android system/lib/libmedia.so 的播放器。

直接使用 JNI 播放视频。

在 Android.mk 中，我添加了“-lmedia”来包含库，但我不能直接链接它。

这是我的过程。

1.  编写一个 Cpp 文件，其中包含 libmedia.so 中的一些头文件

2.  在 LOCAL_LDLIBS 的 Android.mk 中添加“-lmedia”

    如..

    LOCAL_LDLIBS -lmedia -lstagefright

3.  使用 ndk-build 构建 .so

发生了错误！！

有人有答案可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T06:39:56.523

`libmedia.so`并且`libsinstructionght.so`不是公共 API 的一部分。这意味着理论上，您不应该依赖它们。但实际上，这些库存在于所有设备上，但它们是不同的。

您可以从您的设备中提取此二进制文件，甚至可以使用命令从模拟器中提取此二进制文件

```
adb pull /system/lib/libmedia.so C:/android-ndk/platforms/android-14/arch-arm/usr/lib 
```

这会将文件与公共 API 放在一起，以便更轻松地与 ndk-build 一起使用。另一方面，您应该注意的不仅是不同级别的 Android 之间的碎片，还包括芯片组、制造商甚至型号之间的碎片。

为了处理这个问题，我*将* **.so**文件从不同的设备拉到单独的目录中，并将*其中一个*添加到链接器路径中，例如

```
LOCAL_LDLIBS += -Lc:/android/galaxys.4.1.2.system.lib 
```

* * *

上述说明无法解决您在方法中面临的大问题。`libmedia.so`不打算链接到用户应用程序。它假定具有访问受保护设备（如相机、编解码器和屏幕）的特权用户的上下文。

如果您以 root 设备为目标或准备自定义 ROM，则可以充分利用此库。并且知道你在做什么，以及如何避免从系统中窃取重要资源。

否则，链接媒体库几乎没有什么收获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T06:16:13.693

PREBUILT_SHARED_LIBRARY 指向用于指定预构建共享库的构建脚本。与 BUILD_SHARED_LIBRARY 和 BUILD_STATIC_LIBRARY 不同，LOCAL_SRC_FILES 的值必须是预构建共享库（例如 foo/libfoo.so）的单个路径，而不是源文件。

您可以使用 LOCAL_PREBUILTS 变量引用另一个模块中的预构建库（有关更多信息，请参阅 docs/PREBUILTS.html）。

```
 LOCAL_PATH := $(call my-dir)

   include $(CLEAR_VARS)
   LOCAL_MODULE := foo-prebuilt
   LOCAL_SRC_FILES := libfoo.so
   include $(PREBUILT_SHARED_LIBRARY) 
```

引用自 NDK 文档。

PREBUILT_STATIC_LIBRARY 这与 PREBUILT_SHARED_LIBRARY 相同，但用于静态库文件。有关更多信息，请参阅 docs/PREBUILTS.html。

请阅读 NDK 文档了解更多详细信息。

# jquery-mobile - Android 模拟器中的 FullCalendar

> ID：13115828
> 
> 赞同：0
> 
> 时间：2012-10-29T04:22:56.213
> 
> 标签：jquery-mobile, android-emulator, fullcalendar

我的目标是将 FullCalendar 包含到 JQueryMobile 中。我已遵循本指南，但是当我使用 Android 模拟器运行它时，它会加载带有输入文本“标题”和“颜色”的事件对话框页面，如下图所示。 [点击我的图片](https://docs.google.com/open?id=0B5dnb9JhVY-8cWhGQ1NlQzJTYzQ)

如何让它首先加载完整的日历视图而不是事件对话框？ [点击我的图片](https://docs.google.com/open?id=0B5dnb9JhVY-8ZW5GS1dQeFdQcDQ)

我已经复制了所有的 js & css。这是我的 index.html 代码

```
<html>
<head>
    <link rel='stylesheet' type='text/css' href='resources/css/jquery-ui-1.8.13.custom.css'/>
    <link rel='stylesheet' type='text/css' href='resources/css/fullcalendar.css'/>
    <link rel='stylesheet' type='text/css' href='resources/css/application.css'/>

    <script type='text/javascript' src='resources/js/jquery-1.5.1.min.js'></script>
    <script type='text/javascript' src='resources/js/jquery-ui-1.8.13.custom.min.js'></script>
    <script type='text/javascript' src='resources/js/fullcalendar.min.js'></script>
    <script type='text/javascript' src='resources/js/underscore.js'></script>
    <script type='text/javascript' src='resources/js/backbone.js'></script>
    <script type='text/javascript' src='resources/js/application.js'></script>
</head>
<body>
    <div id='calendar'></div>       

    <div id='eventDialog' class='dialog ui-helper-hidden'>
        <form>
            <div>
                <label>Title:</label>
                <input id='title' class="field" type="text"></input>
            </div>
            <div>
                <label>Color:</label>
                <input id='color' class="field" type="text"></input>
            </div>
        </form>
    </div>      
</body>
</html> 
```

请告知如何加载完整的日历视图，而不是首先加载事件对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:29:55.750

[http://arshaw.com/fullcalendar/docs/views/Available_Views/](http://arshaw.com/fullcalendar/docs/views/Available_Views/) http://arshaw.com/fullcalendar/docs/views/defaultView/

它包含在文档中。您的 defaultView 是否设置为“月”？

# c# - Web API C# - 返回完整的 KVC Json

> ID：13115829
> 
> 赞同：1
> 
> 时间：2012-10-29T04:23:19.740
> 
> 标签：c#, json, restkit, asp.net-web-api

我正在使用 iOS 应用程序中的 RestKit 连接到我们在 C# .Net 4 中构建的 Web API 服务。

我在这里遇到了同样的问题：[RestKit non-kvc object mapping](https://stackoverflow.com/questions/11007784/restkit-non-kvc-object-mapping)

基本上 C# 返回如下内容：

格式化的原始 BODY

```
[
{
 "Id":6,
 "Guid":"00000000-0000-0000-0000-000000000000",
 "Owner":null,
 "Message":"Testing Wom#10",
 "HashTags":null,
 "createdtime":"2012-10-28T00:00:00",
 "PlayedCount":100,
 "DurationInSecs":150.0,
 "FileSizeInBytes":20000,
 "FileUrl":"http://www.wom.com"
}
] 
```

虽然 RestKit 期望的标准格式是

```
{"woms": [
{
 "Id":6,
 "Guid":"00000000-0000-0000-0000-000000000000",
 "Owner":null,
 "Message":"Testing Wom#10",
 "HashTags":null,
 "createdtime":"2012-10-28T00:00:00",
 "PlayedCount":100,
 "DurationInSecs":150.0,
 "FileSizeInBytes":20000,
 "FileUrl":"http://www.wom.com"
}
] 
```

我不在乎使用一种或另一种方式，但是，从 iOS 方面来看，让 C# 返回“客户”类名似乎更容易。

我怎样才能告诉 C# 返回它？

谢谢。

这是我在 C# 中的 ApiController 中的当前代码：

```
namespace WomWeb.Controllers.Apis
{
[Authorize]
public class WomsController : ApiController
{
    private WomContext db = new WomContext();

    // GET api/Woms
    public IEnumerable<Wom> GetWoms()
    {
        return db.Woms.AsEnumerable();            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:31:28.157

尝试在 C# 中序列化 JSON 时，我遇到了一些类似的问题。我认为最简单的方法是将客户包装在另一个类中。如果您只需要在一个地方进行序列化，您可以`var temp = new Object { customer customer = new customer(); }`在调用序列化之前执行类似的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T03:03:27.777

这是迄今为止我找到的最好的解决方案。基本上将 IEnumerable 替换为 HttpResponseMessage 并使用 Request.CreateResponse 进行响应（代码如下）。

虽然它有效，但并不理想：我失去了抽象，现在控制器以 Json 响应，而不管请求标头如何（该逻辑是自动解析的，但是在使用 CreateResponse 时，我直接写入输出）。

```
// GET api/Woms           
//public IEnumerable<Wom> GetWoms()
public HttpResponseMessage GetWoms()
{
  //return  db.Woms.Include("Owner").AsEnumerable(); 
  return Request.CreateResponse(HttpStatusCode.OK, new { woms = Include("Owner").AsEnumerable() });
} 
```

# algorithm - 二叉树数组列表表示

> ID：13115830
> 
> 赞同：0
> 
> 时间：2012-10-29T04:23:28.570
> 
> 标签：algorithm, time-complexity, asymptotic-complexity

我一直在对二叉树和数组列表表示进行一些研究。我很难理解最坏情况下的空间复杂度是 O(2^n)。具体来说，这本书指出，空间使用量为 O(N)（N = 数组大小），在最坏的情况下为 O(2^n)。我原以为在最坏的情况下它会是 2n，因为每个节点都有两个子节点（索引）而不是 O(2^n)，其中 n = 否。的元素。

例如，如果我有一个有 7 个节点的二叉树，那么空间将是 2n = 14 而不是 2^n = 128。 ![在此处输入图像描述](../Images/c1468694297227764960fce27fd7690c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:42:55.193

这是数组上的堆实现。在哪里

```
A[1..n]
left_child(i) = A[2*i]
right_child(i) = A[2*i+1]
parent(i) = A[floor(i/2)] 
```

现在，来到太空。凭直觉思考，

当您插入第一个元素 n=1，location=A[1] 时，类似地，

```
n=2 @A[2] left_child(1)
n=3 @A[3] right_child(1)
n=4 @A[4] left_child(2)
n=5 @A[5] right_child(2) 
```

你看，第 n^个元素将进入`A[n]`. 所以空间复杂度是`O(n)`。

当您编码时，您只需将要插入的元素插入最后说 at `A[n+1]`，并说它是`floor((n+1)/2)`.

参考：[http ://en.wikipedia.org/wiki/Binary_heap#Heap_implementation](http://en.wikipedia.org/wiki/Binary_heap#Heap_implementation)

* * *

堆是一棵*几乎完整的树*，因此树中的元素总数将是您需要的数组长度。参考：[这个](http://code.naishe.in/2012/10/heap-and-heap-sort.html)`2^(h-1) < n <= 2^(h+1)-1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:37:35.457

二叉树的最坏情况空间复杂度是 O(n) （在您的问题中不是 O(2^n)），但是如果它几乎是一棵完整的二叉树，则使用数组表示二叉树可以节省指针空间。

请参阅[http://en.wikipedia.org/wiki/Binary_tree#Arrays](http://en.wikipedia.org/wiki/Binary_tree#Arrays)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:21:10.273

我认为这是指将*任意*二叉树存储在数组表示中，这通常用于*完整*或*接近完整*的二叉树，特别是在堆的实现中。

在这种表示中，根存储在`0`数组中的索引处，对于任何具有索引的节点`n`，其左右子节点分别存储在索引`2n+1`和处`2n+2`。

如果您有一个退化树，其中没有节点有任何正确的孩子（树实际上是一个链表），那么第一个项目将存储在 indices `0, 1, 3, 7, 15, 31, ...`。通常，`n`此列表的第一项（从 开始`0`）将存储在索引处，因此在这种情况下，数组表示需要空间。`2^n-1``θ(2^n)`

# iphone - 在 iPhone 上为 ios 的钥匙串添加 wifi ssid 和密码

> ID：13115832
> 
> 赞同：1
> 
> 时间：2012-10-29T04:23:56.213
> 
> 标签：iphone, ios, wifi, keychain, ssid

是否可以以编程方式将已知 wifi 网络的 ssid 和密码保存到 iPhone？

我没有任何线索：http: [//developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)

有人可以指点我一个 github 项目，该项目可能将这个用例作为实用程序处理......或者可能引用更多代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:30:08.830

不，您不能这样做，因为 iOS 钥匙串对于每个应用程序都是隔离的。但它可能在越狱设备上是可能的。（见[http://code.google.com/p/iphone-dataprotection/wiki/KeychainViewer](http://code.google.com/p/iphone-dataprotection/wiki/KeychainViewer)）

Captive Network 与 ssid 和密码无关。

# java - 将 Hibernate 添加到 Android 项目（核心类的错误使用）

> ID：13115835
> 
> 赞同：3
> 
> 时间：2012-10-29T04:24:27.057
> 
> 标签：java, android, hibernate

我们的主要关注点是基于 Java 的桌面应用程序。我们应用程序的数据使用 Hibernate 存储在 H2 数据库中。H2 数据库以服务器模式运行，以便其他客户端可以连接到它。

是否可以构建一个 Android 应用程序来查看托管在服务器上的数据。当我在我的 android 应用程序 libs 文件夹中包含休眠 jar 时，我收到以下错误。

```
 [dx] trouble processing "javax/transaction/Transaction.class":
   [dx] 
   [dx] Ill-advised or mistaken usage of a core class (java.* or javax.*)
   [dx] when not building a core library.
   [dx] 
   [dx] This is often due to inadvertently including a core library file
   [dx] in your application's project, when using an IDE (such as
   [dx] Eclipse). If you are sure you're not intentionally defining a
   [dx] core class, then this is the most likely explanation of what's
   [dx] going on.
   [dx] 
   [dx] However, you might actually be trying to define a class in a core
   [dx] namespace, the source of which you may have taken, for example,
   [dx] from a non-Android virtual machine project. This will most
   [dx] assuredly not work. At a minimum, it jeopardizes the
   [dx] compatibility of your app with future versions of the platform.
   [dx] It is also often of questionable legality.
   [dx] 
   [dx] If you really intend to build a core library -- which is only
   [dx] appropriate as part of creating a full virtual machine
   [dx] distribution, as opposed to compiling an application -- then use
   [dx] the "--core-library" option to suppress this error message.
   [dx] 
   [dx] If you go ahead and use "--core-library" but are in fact
   [dx] building an application, then be forewarned that your application
   [dx] will still fail to build or run, at some point. Please be
   [dx] prepared for angry customers who find, for example, that your
   [dx] application ceases to function once they upgrade their operating
   [dx] system. You will be to blame for this problem.
   [dx] 
   [dx] If you are legitimately using some code that happens to be in a
   [dx] core package, then the easiest safe alternative you have is to
   [dx] repackage that code. That is, move the classes in question into
   [dx] your own package namespace. This means that they will never be in
   [dx] conflict with core system classes. JarJar is a tool that may help
   [dx] you in this endeavor. If you find that you cannot do this, then
   [dx] that is an indication that the path you are on will ultimately
   [dx] lead to pain, suffering, grief, and lamentation.
   [dx] 
   [dx] 1 error; aborting 
```

有两个必需的 Hibernate 库使用 javax 命名空间（hibernate-jpa-2.0-api.1.0.1-Final.jar 和 jboss-transaction-api_1.1_spec-1.0.0.Final.jar）。

*   它尝试将所有库组合到 .apk 中并抛出异常，因为它使用保留的命名空间找到了一个类。
*   类可能与作为 Android/Java 一部分的系统（核心）类发生冲突。

我相信这个错误/警告的最后一段适用于我正在尝试做的事情。

*   使用像 JarJar 这样的工具会有帮助吗？
*   重新打包代码如何与许可一起使用？
*   重新打包所有代码会很困难吗？
*   为什么第三方会在 javax 中创建一个包？

编辑：我正在使用 ant 通过自动生成的构建文件和命令“ant debug”来编译 Android 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:38:09.007

Hibernate 库用于桌面和服务器上的 JDK 应用程序。它们不适用于 Android。SqlLite 是 Hibernate 可能永远无法在 Android 上运行的主要原因之一。它使用起来非常简单。

如果你强行包含它，你会得到 Dalvik 错误。包含 2 个 android.jar 或 rt.jar 时会出现相同的错误。

# c# - C# UserPrincipal 对象引用未设置为对象的实例

> ID：13115836
> 
> 赞同：2
> 
> 时间：2012-10-29T04:24:31.363
> 
> 标签：c#, asp.net, account-management

`Object reference not set to an instance of an object`在查看托管网站时，我在我的项目中收到了经典。在本地构建调试版本时工作。

居住

显示错误消息的代码示例：

```
 using System.DirectoryServices.AccountManagement;
     protected void Page_Load(object sender, EventArgs e)
            {
                try
                {

                    String username = System.Security.Principal.WindowsIdentity.GetCurrent().Name;
                    username = username.Substring(3);
                    PrincipalContext pc = new PrincipalContext(ContextType.Domain, "dc");
                    UserPrincipal user = UserPrincipal.FindByIdentity(pc, username);
                    string NTDisplayName = user.DisplayName;
                    //String NTUser = user.SamAccountName;
                    lblntuser.Text = NTDisplayName;

                }
                catch (Exception Ex)
                {
                    lblntuser.Text = Ex.Message;
                    System.Diagnostics.Debug.Write(Ex.Message);
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:55:04.943

尝试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        // you need to also take into account that someone could get to your
        // page without having a Windows account.... check for NULL !
        if (System.Security.Principal.WindowsIdentity == null ||
            System.Security.Principal.WindowsIdentity.GetCurrent() == null)
        {
            return;  // possibly return a message or something....
        }

        String username = System.Security.Principal.WindowsIdentity.GetCurrent().Name;

        // if the user name returned is null or empty -> abort
        if(string.IsNullOrEmpty(username))
        {
           return;
        }

        username = username.Substring(3);

        PrincipalContext pc = new PrincipalContext(ContextType.Domain, "dc");

        UserPrincipal user = UserPrincipal.FindByIdentity(pc, username);

        // finding the user of course can also fail - check for NULL !!
        if (user != null)
        {
            string NTDisplayName = user.DisplayName;
            //String NTUser = user.SamAccountName;
            lblntuser.Text = NTDisplayName;
        }
     }
     catch (Exception Ex)
     {
        lblntuser.Text = Ex.Message;
        System.Diagnostics.Debug.Write(Ex.Message);
     }
 } 
```

# java - 使用基本设计模式模拟 Java 中的事件驱动编程模型

> ID：13115843
> 
> 赞同：3
> 
> 时间：2012-10-29T04:25:35.293
> 
> 标签：java, design-patterns, event-driven

关于事件驱动的编程模型。通常雇主会提出“在没有任何外部库的情况下用 Java 模拟事件驱动的编程模型”的问题。我认为这是一个简单的问题，可以使用设计模式来回答。

我的解决方案是有 2 个队列作为发布订阅（又名观察者）通道。发布通道将注册针对特定事件类型的事件，例如点击。

轮询元素 -> 按钮 1 单击 || 按钮 1 再次单击 || 按钮 1 单击特定时间。<- 发布者队列

另一个订阅通道将存储事件侦听器，如果出现新的发布，

轮询元素 -> 侦听器 1 || 听者 2 || -<订阅者队列。

它将首先推入发布队列并在另一时间轮询它允许订阅者消费。订阅将使用发布者元素并应用于订阅者通道中的每个元素（在本例中为每个事件侦听器）。观察者设计模式允许组件不可知论。发布者对订阅者一无所知。

此方案类似于电子邮件通讯订阅。

在 OO 实现中，会有 Publishers 对象和 Subscribers 类。实际上是详细的发布者实现和详细的订阅者实现的队列。还结合了调解器设计模式来协调发布者类和订阅者类。

我的解决方案有任何缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:33:52.117

不，不是。您的解决方案非常标准且合理。

基本事件的观察者/订阅者和中介者（如果您需要以特定顺序协调发送事件）。

# stored-procedures - 来自实体框架 SP 的急切加载

> ID：13115845
> 
> 赞同：1
> 
> 时间：2012-10-29T04:25:47.697
> 
> 标签：stored-procedures, entity-framework-5

我试图用 1 个 SQL 存储过程执行来填充我的域模型和子实体。[或许这就是这里](https://stackoverflow.com/questions/13031281/filling-child-entity-with-entity-framework-sqlquery)的答案。我很确定这是不可能的，但我虽然会抛出问题以找到可能的解决方法。

我有相当复杂的域模型，我正在寻找一种更有效的方式来加载我的数据，而不是查询客户然后延迟加载其子项。我在下面给出了一个简单的例子来说明我想要达到的目标；

```
public class Customer{
   public int Id { get; set; }
   public virtual Address Address { get; set; }
}

public class Address{
   public int Id { get; set; }
} 
```

> var customer = this.Database.SqlQuery< Customer >("exec SP_Name")

我知道在 EF5 中您可以返回[多个数据上下文](http://blogs.msdn.com/b/adonet/archive/2011/06/30/walkthrough-multiple-result-sets-from-stored-procedure.aspx)，但我希望我可以解析多个子实体。

我希望我说得通。我睡眠不足，如果没有，请道歉。在落后 10 小时的时区进行一项运动会变得很困难！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T08:43:43.573

EF 中的存储过程不提供预加载。他们只能加载单级实体。您可以使用链接文章中提到的具有多个结果集的存储过程，但这仅适用于 EDMX，并且您必须执行映射函数导入而不是`SqlQuery`. 您还可以简单地使用带有 LINQ 查询的预加载而不是存储过程来避免延迟加载：

```
var customers = context.Set<Customer>()
                       .Include(c => c.Address)
                       .FirstOrDefault(c => c.Name == someName); 
```

# c# - 有什么优雅的方法可以取消/停止长时间运行的线程吗？

> ID：13115852
> 
> 赞同：1
> 
> 时间：2012-10-29T04:27:54.027
> 
> 标签：c#, multithreading, task-parallel-library

我知道 TPL 中的 CancellationToken 支持，但是（IMO）只有在我有适当的 token.ThrowifCancellationRequested() 时才能工作，这在我的场景中是不可能的。

有没有其他优雅的方式（除了完全中止线程）来实现这一点？

我不关心线程的事务状态。我不在乎线程停止/取消的状态。

感谢您的关注！

更多细节：我需要生成一个新线程（任务/线程池/线程）来调用一个 API，该 API 调用多个存储过程来获取近 100 万条记录，然后对每条记录进行一些修饰（业务计算）。最后，此 API 返回一个数据表，该数据表是一份业务重要报告。如果需要，我想为用户提供中途取消此处理的选项。例如，如果设置了错误的过滤器集。API*只做*只读操作，所以不需要事务管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:37:28.797

要正确执行此操作，您应该通过取消令牌在 Task 类中使用内置方法，或使用取消后台工作程序。或者，您可以尝试使用`volatile`bool 来检查用户请求是否已被取消。但是，`volatile`布尔在不同架构（单/多处理器）中的行为不一致。或者，您可以使用`*ResetEvent`s 来指示调用了取消。这一切都需要在 API 本身中完成，否则它如何知道何时检查取消条件？您将无法优雅地取消它。

当然，永远不要调用`Abort`线程——这是邪恶的，可能会使整个应用程序处于未定义状态，除非您打算重新启动整个应用程序，否则不要调用它。

### 奖金建议

还要考虑在数据库端做所有的处理工作。不要将非常少量的记录带到客户端，比如说 1k 是一个很好的实用阈值。考虑这样一种情况，许多用户请求不同的报告，这些报告都加载了服务器*那么*多 - 这不能很好地扩展。此外，服务器在数据处理方面非常高效，并且它们身边有数据 - 已经完成了大量优化（CPU 线路缓存、快速内存访问等）。

# iphone - iOS - 更新 NSFetchedResultsController

> ID：13115856
> 
> 赞同：0
> 
> 时间：2012-10-29T04:28:31.047
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我正在使用三个 fetch 控制器来过滤三个任务列表；今天，明天，最后是以后的任务。对于这种情况，我有三个谓词：

```
NSPredicate *todayPredicate = [NSPredicate predicateWithFormat:@"(date <= %@) AND isDone == 0",
                                   [self getEndDateForDay:P_Section_Today]];
NSPredicate *tomorrowPredicate = [NSPredicate predicateWithFormat:@"((date >= %@) AND (date <= %@)) AND isDone == 0",
                                   [self getStartDateForDay:P_Section_Tomorrow],
                                   [self getEndDateForDay:P_Section_Tomorrow]];
NSPredicate *laterPredicate = [NSPredicate predicateWithFormat:@"date >= %@ AND isDone == 0",
                                      [self getStartDateForDay:P_Section_Later]]; 
```

我很高兴。它就像一个魅力。直到，一个晚上，我遇到了以下问题。三个控制器不会自行更新。

示例： - 周日启动应用程序。（现在，今天是星期天。）。- 该应用程序仍在运行。- 周一早上打开应用程序。- 增加了周一的新任务。应该会出现在今天的任务中吧？不！，它出现在明天的任务中。除了从后台关闭应用程序并再次启动它之外，没有解决方法。

我确实认为`performFetch`确实会更新 fetch 控制器及其谓词，但事实并非如此。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T04:32:02.680

谓词中的日期在您创建它们时是固定的，即您的`getStartDateForDay:`和`getEndDateForDay:`不会被自动再次调用。当您检测到日期已更改时，您需要更新谓词。

# java - HTTP套接字编程java

> ID：13115857
> 
> 赞同：-1
> 
> 时间：2012-10-29T04:28:34.890
> 
> 标签：java, http, sockets, tcp, network-programming

使用 java 学习 TCP Socket 编程的良好起点是什么？

我在 java 软件编程方面有相当好的经验，但对 netwrk/socket 编程很陌生。

我正在开发代理缓存服务器。但无法读取发布请求/302/405 请求。我在下面的代码中提到了这个。

[http://blog.edendekker.me/a-java-proxy-server-with-caching-and-validation/](http://blog.edendekker.me/a-java-proxy-server-with-caching-and-validation/)

但无法修改代码以读取像 www.gmail.com 这样返回 302 Moved Permanently Error 或 405 Method Not valid Error 的 URL。而且也无法读取 POST 请求。

什么是我可以阅读有关处理错误和处理 POST 请求的起点。任何参考链接、示例代码都会有所帮助。

我在类似主题中的上一个问题：

[处理 POST 请求并将响应写入客户端套接字](https://stackoverflow.com/questions/13112505/handle-a-post-request-and-write-response-to-client-socket#comment17826868_13112505)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:27:02.303

看起来您的问题与**HTTP**相关，而不是与 TCP 相关。你想实现一个代理服务器来学习 HTTP 协议吗？如果没有，有几个免费的好代理，通常包括源代码。如果您只是想学习 TCP 套接字编程，请尝试一些更简单的东西，例如 POP3。此外，如果您想在 Java 中执行 TCP，请注意有两种主要方法可以实现它们：

*   每个连接一个线程
*   每个应用程序一个线程，在连接之间共享（[Java NIO](https://en.wikipedia.org/wiki/New_I/O)和 NIO2）

假设您真的想处理 HTTP 代理。如果您想实现浏览器使用的所有功能，如缓存、身份验证等，再加上实现代理时产生的额外复杂性，那么 HTTP 并非易事。

如果你真的想咬紧牙关，[这里](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html)有一个更轻量级的 HTTP 协议版本，有关所有详细信息，请参阅[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)。但请注意，HTTP 1.1 规范 RFC 2616 引用了其他 RFC，您可能还必须针对特定领域（例如身份验证）查阅这些 RFC。

**更新**：在某些情况下可能更容易的另一件事是使用[HTTP 代理来嗅探](https://stackoverflow.com/questions/12944862/http-trace-utitlity/12967817#12967817)浏览器和现成代理之间的通信，以快速查看其他人在做什么。

# mysql - 增加Mysql自动增量值

> ID：13115859
> 
> 赞同：1
> 
> 时间：2012-10-29T04:29:09.630
> 
> 标签：mysql

我的 InnoDB 表如何在每个条目 ID 中增加 5 而不是 1？

谢谢

```
ID - TITLE
5  - Entry 1
10 - Entry 2
15 - Entra 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:40:03.623

在桌子上使用触发器怎么样？类似于此代码的内容：

```
DELIMITER $$

CREATE TRIGGER ai_increaseByFive AFTER INSERT ON tbl
  FOR EACH ROW BEGIN
    UPDATE tbl SET id = (id - 1) + 5 WHERE title = NEW.title;
  END;
$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T04:32:28.897

来源[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html) 您应该能够使用等号设置增量。

```
mysql> ALTER TABLE tbl AUTO_INCREMENT = 100; 
```

# java - 如何用模板解组？

> ID：13115863
> 
> 赞同：0
> 
> 时间：2012-10-29T04:29:44.663
> 
> 标签：java, jaxb

我猜错误在

```
T bobj = (T) jaxbUnmarshaller.unmarshal(file); 
```

它总是返回 null

使用非模板进行测试，它工作并返回一个客户类，仅在与模板一起使用时返回 null

原始代码

```
XMLObj<Customer> XMLtool = new XMLObj<Customer>(Customer.class);
Customer c = XMLtool.ConvertXMLToObject("c:\\file2.xml");

public class XMLObj<T> {
    final Class<T> typeParameterClass;
    public XMLObj(Class<T> typeParameterClass) {
        this.typeParameterClass = typeParameterClass;
    }

public T ConvertXMLToObject(String path)
    {
        //Convert XML to Object
        try {
            File file = new File(path);
            if(file.exists())
            {
                JAXBContext jaxbContext;
                jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass());
                Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
                T bobj = (T) jaxbUnmarshaller.unmarshal(file);
                System.out.println(bobj);
                return bobj;
            }
            else
                Logger.getInstance().process_message("File not exist in ConvertObjectToXML");
        } catch (JAXBException e) {
            // TODO Auto-generated catch block
            Logger.getInstance().process_message(e.getMessage());
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:32:45.987

尝试更改此行：

```
jaxbContext = JAXBContext.newInstance(typeParameterClass.getClass()); 
```

对此：

```
jaxbContext = JAXBContext.newInstance(typeParameterClass); 
```

`typeParameterClass.getClass()`返回一个类的类型`java.lang.Class`，而`typeParameterClass`它本身的类的类型`Customer`是你想要解组的类。

# php - /modules/mod_feed/helper.php 中的错误

> ID：13115864
> 
> 赞同：0
> 
> 时间：2012-10-29T04:30:02.810
> 
> 标签：php, joomla

PHP 更新后我收到警告

> 警告：从第 42 行 /modules/mod_feed/helper.php 中的空值创建默认对象

我之前遇到过这个问题，当时我使用过`$v=new stdclass();`. 但问题不在 Joomla 网站上。现在 joomla 网站也有同样的问题。我的代码[链接在这里](http://code.google.com/p/scanbilt/source/browse/trunk/modules/mod_feed/helper.php)

我应该在这个文件中改变什么？有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:33:43.960

你还需要

```
$feed->image = new stdclass; 
```

在第 42 行之前。这是一个`E_STRICT`级别警告。这些旨在提醒您代码气味（如自动创建数组/对象）。

# emacs - 如何在不重新打开 emacs 的情况下使用更新的 .erlang 文件？

> ID：13115868
> 
> 赞同：0
> 
> 时间：2012-10-29T04:31:04.943
> 
> 标签：emacs, erlang

在我的`.emacs`中，它包含以下两部分代码。

我正在一起调试两个程序，一个是服务器，另一个是客户端。

每次切换被调试的程序，都需要修改`.erlang`for切换`code:add_paths`语句，重新打开emacs。（在服务器和客户端程序中，3个模块是相同的，如果不切换，模块冲突。

因为重新打开 emacs 非常耗时（必须重新打开许多文件），是否可以`.erlang`通过重新打开 emacs 使两个文件有效。

```
 (erlang-shell)

    (add-hook 'erlang-mode-hook

          (lambda ()
             (setq inferior-erlang-machine-options '("-name" "emacs"))
            ;(setq inferior-erlang-machine-options '("-name" "emacs""-mnesia dir" 
"/Users/yuchen/Documents
/Project/mnesia_db") )
                 (set (make-local-variable 'compile-command) (format "make -f %s" 
(get-closest-pathname)))
            (imenu-add-to-menubar "imenu"))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:31:10.727

您只需要完成您的 erlang 会话（切换到`*erlang*`缓冲区，输入`q().`并按 ENTER），编辑`~/.erlang`并再次启动 erlang`erlang-shell`

# c++ - C++关于给Vector赋值 我的变量

> ID：13115869
> 
> 赞同：0
> 
> 时间：2012-10-29T04:31:12.360
> 
> 标签：c++

C++ 关于为 Vector myVariable 赋值

嗨，大家好。

我有这个结构

```
struct Point
{
int x,y;
} 
```

在我的 main.cpp 我得到了这样的东西

```
int main()
{
vector<Point> myPoints;

myPoints[0].x = 1;
myPoints[0].y = 1;

myPoints[1].x = 2;
myPoints[1].x = 2;

return 0;
} 
```

我得到分段核心转储，将值设置为向量元素有什么问题。

**谢谢指导！**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T04:34:36.100

```
vector<Point> myPoints; 
```

创建一个空的`Point`对象向量。由于它是空的，因此您无法访问`myPoint[0]`等`myPoint[1]`。尝试这样做不会自动创建元素；相反，它将调用未定义的行为——通常是分段错误。

用于`push_back`将元素附加到向量：

```
myPoints.push_back(Point(1,1)); 
```

或者，或者，调整向量的大小，使其包含默认构造的元素：

```
myPoints.resize(2); 
```

您还可以`std::vector`在初始化时使用构造函数的参数来调整它的大小：

```
vector<Point> myPoints(2);  // auto-resizes the vector to length 2 
```

* * *

*关于`push_back`.* 在 C++11 中，您也可以使用`emplace_back()`代替`push_back()`：通过就地`myPoints.emplace_back(1,1);`调用构造函数将新元素附加到向量，用作构造函数的参数。这是将新创建的元素附加到向量的最有效方式。`Point``1,1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:36:16.707

问题是您正在尝试访问尚未创建的元素。

此行之后：vector myPoints;

你有一个`myPoints`包含完全`0`元素的向量。因此，`myPoints[0]`毫无意义。

您需要执行以下操作之一：

1.  创建一个具有预定大小的向量：（`vector<Point> myPoints(2);`注意：您可以稍后扩展或缩小它），然后执行`myPoints[0].x=1`等。

2.  使用vector的`push_back`方法给vector添加新元素，即`myPoints.push_back(Point(0, 0));`

3.  声明新向量对象后，使用该`resize`方法为两个新元素分配空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T04:40:06.540

您没有初始化任何对象。您需要制作对象，然后将它们放入向量中，否则您正在对不存在的东西进行操作，这会导致段错误。

例子：

```
Point myPoint;
myPoints.push_back(myPoint);
myPoints[0].x = 1; 
```

# c# - 我在使用其他语言的 dateTimePicker 时遇到问题？

> ID：13115873
> 
> 赞同：-5
> 
> 时间：2012-10-29T04:31:33.977
> 
> 标签：c#, datetime, datetimepicker

我有一个在英语笔记本电脑上制作的应用程序。它完美地工作并正确处理所有 Convert.ToDateTime 函数。但是当它在我客户的设置的日语笔记本电脑上使用时，它显示错误字符串未被识别为有效日期时间。该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:39:28.863

您不需要将 a 的`Text`属性转换`DateTimePicker`为`DateTime`; 只需使用该`Value`属性（它已经是正确的数据类型）。

同样，如果您尝试设置控件的值，请不要从字符串中解析日期。将值存储为 a`DateTime`并相应地设置`Value`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:39:19.527

问题是 12/12/2012 对日语和英语都是正确的，但 13/12/2012 对于日语可能会出错，因为只有 12 个月并且日期采用 MM/dd/YYYY 格式！

试试这个：

```
DateTime Todate = DateTime.ParseExact("22/08/2012", "dd/MM/yyyy", null);
Todate.ToString("dd/MM/yyyy"); // output in your chosen format. 
```

关键是 Todate 是一个 DateTime 对象，因此它实际上在内部将日期和时间存储为一个大数字。如果要以某种格式显示它，则将其转换为字符串。见这里：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# java - 从纪元时间/时间戳中删除毫秒 | 爪哇

> ID：13115875
> 
> 赞同：4
> 
> 时间：2012-10-29T04:31:39.093
> 
> 标签：java, timestamp, unix-timestamp, epoch

我有一个纪元时间，我想将其转换为 sql 时间戳。我可以使用以下代码从纪元中提取实际时间：

```
String time = "1351504294";
long t = Long.parseLong(time);
Timestamp ts = new Timestamp(t*1000); 
```

我得到的输出是：`2012-10-29 09:58:50.0`。但是当我尝试将其插入表中时，由于毫秒部分“09：58：50.0”而显示错误。如何从时间戳中删除毫秒部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T04:57:37.557

如果您将`Timestamp`直接添加到 SQL 语句中，那么 Java 将调用`toString()`始终输出格式的函数`yyyy-mm-dd hh:mm:ss.fffffffff`。您无法对`Timestamp`消除纳秒部分的对象做任何事情。

如果你只想要`yyyy-MM-dd hh:mm:ss`你可以做的部分：

```
Timestamp ts = new Timestamp(t*1000);
String s = ts.toString().split('\\.')[0]; 
```

或者你可以使用`SimpleDateFormat`：

```
Timestamp ts = new Timestamp(t*1000);
String s = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").format(ts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T05:12:26.127

试试这个方法......

```
public class Time {

    public static void main(String[] args){

        String time = "1351504294";
        long t = Long.parseLong(time);
        Timestamp ts = new Timestamp(t*1000);

        String date = new SimpleDateFormat("YYYY-MM-dd hh:mm:ss").format(ts);
        System.out.println(date);
    }
} 
```

# php - 如何显示选定主类别的子类别？

> ID：13115876
> 
> 赞同：0
> 
> 时间：2012-10-29T04:31:39.343
> 
> 标签：php

我正在尝试构建一个导航，当用户选择一个类别时，导航将只显示所选类别的子类别。

我从 URL 中获取一个变量作为父 ID 传递，它看起来像这样：

```
locolhost/store.php?c=2 
```

我正在寻找的导航应该如下所示：

```
Parent
    child
    child
Parent
Parent
Parent 
```

但是，目前我的代码产生：

```
Parent
    child
    child
Parent
    child
    child
Parent
    child
    child
Parent
    child
    child 
```

这是我当前的代码：

**shop.php**

```
$parent_id = $_GET['p'];
include('navigation.php');
$navigation = new navigation;
print($navigation->main($parent_id)); 
```

**导航.php**

```
public function main($parent)
{
    /* PDO */
    $array = $categoryVIEW->fetchAll(PDO::FETCH_ASSOC);
    return $this->buildNav($array,$parent);
}
private function buildNav($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent'] === NULL)
        {
            $html .= "\n<div class=\"parent\"><a href=\"?p=".$item['category_id']."\">".$item['category_name']."</a></div>\n";
            $html .= "<div class=\"child\">\n";
            $html .= $this->getChildren($array,$parent);
            $html .= "</div>\n";
        }
    }
    return $html;
}
private function getChildren($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent']===$parent)
        {
            $html .= "\t<a href=\"?p=".$item['category_id']."\">".$item['category_name']."</a>\n";
        }
    }
    return $html;
} 
```

我只是简单地调用 call`getChildren()`从中`buildNav()`获取所选类别的所有子项。我想我需要一个条件，`getChildren()`只有当我想展示它的孩子的父母正在经历循环时才会调用......如果这有意义吗？

这是我的数据库：

![在此处输入图像描述](../Images/48065143b05cf0a12c1abf9800b29745.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:58:25.937

我认为您没有将正确的“父”变量传递给子函数。尝试以下操作：

```
private function buildNav($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent'] === NULL)
        {
            $html .= "\n<div class=\"parent\"><a href=\"?p=".$item['category_id']."\">".$item['category_name']."</a></div>\n";
            $html .= "<div class=\"child\">\n";
            // the following line needs to be changed
            $html .= $this->getChildren($array,$item['category_id']);
            $html .= "</div>\n";
        }
    }
    return $html;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T00:50:12.503

我想通了......我需要添加一个条件。这是工作代码：

```
private function buildNav($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent'] === NULL)
        {
            $html .= "\n<div class=\"parent\"><a href=\"?p=".$item['category_id']."\">".$item['category_name']."</a></div>\n";
            $html .= "<div class=\"child\">\n";

            /* had to add this condition */
            if($item['category_id'] === $parent)
            {
                $html .= $this->getChildren($array,$parent);
            }               
            $html .= "</div>\n";
        }
    }
    return $html;
}
private function getChildren($array,$parent)
{
    $html = '';
    foreach($array as $item)
    {
        if($item['parent'] === $parent)
        {
            $html .= "\t<a href=\"?p=".$item['category_id']."\">".$item['category_name']."</a>\n";
        }           
    }
    return $html;
} 
```

# inno-setup - 从 Inno Setup 进度页面隐藏文件名

> ID：13115878
> 
> 赞同：6
> 
> 时间：2012-10-29T04:31:51.767
> 
> 标签：inno-setup

如何从安装进度条上方的标签中隐藏或删除正在安装的文件的名称，只留下“ex：install”？

它显示为正在解压缩文件。

![Inno Setup 安装进度页面截图](../Images/5e40ab933ba72cfc7084d4f6cd24f007.png)

```
LabelCurrFileName.Caption :=
  ExpandConstant('{cm:ExtractedFile} ') + 
  MinimizePathName(
    CurrentFile, LabelCurrFileName.Font, LabelCurrFileName.Width - ScaleX(100));

LabelCurrFileName.Caption := ExpandConstant('{cm:ExtractedFile} '); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-29T05:03:22.590

我想你想[`FilenameLabel`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TWizardForm)用你的自定义标签替换标签。如何为不同的语言指定自定义文本以及如何将它们与自定义标签一起使用，该标签将被放置而不是[`FilenameLabel`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TWizardForm)您可以在以下脚本中找到的标签：

```
[Languages]
Name: en; MessagesFile: "compiler:Default.isl"
Name: br; MessagesFile: "compiler:Languages\BrazilianPortuguese.isl"

[CustomMessages]
en.InstallingLabel=Installing...
br.InstallingLabel=Instalando...

[Code]

procedure InitializeWizard;
begin
  with TNewStaticText.Create(WizardForm) do
  begin
    Parent := WizardForm.FilenameLabel.Parent;
    Left := WizardForm.FilenameLabel.Left;
    Top := WizardForm.FilenameLabel.Top;
    Width := WizardForm.FilenameLabel.Width;
    Height := WizardForm.FilenameLabel.Height;
    Caption := ExpandConstant('{cm:InstallingLabel}');
  end;
  WizardForm.FilenameLabel.Visible := False;
end; 
```

* * *

@MartinPrikryl 编辑：有关完整的实现，请参阅[Inno 设置 - 如何使用我想要的名称创建个性化的 FilenameLabel？](https://stackoverflow.com/q/43748508/850848)

# java - 严重：错误 filterStart ，当尝试在 Eclipse 中将 WAR 文件部署到 Tomcat 服务器时

> ID：13115880
> 
> 赞同：2
> 
> 时间：2012-10-29T04:32:07.523
> 
> 标签：java, eclipse, tomcat, web-applications, war

我在 tomcat server 7 中创建了 java 动态 web 应用程序。当我从 eclipse 运行它时它工作正常。

我通过右键单击项目部署它并通过以下导出对话框导出到tomcat安装的webapp目录并启动tomcat服务器以便我可以访问

```
http://localhost:8080 
```

但是当我尝试访问时

```
http://localhost:8080/projectName. 
```

我得到了以下错误。

```
The requested resource (/projectName/) is not available. 
```

我查看`catalina.log`文件。并找到了这些行

```
SEVERE: Error filterStart
SEVERE: Context [/projectName] startup failed due to previous errors
SEVERE: The web application [/projectName] appears to have started a thread named 
[Abandoned connection cleanup thread] but has failed to stop it. This is very
likely to create a memory leak. 
```

进一步使用我的应用程序`struts2`。我将`struts2`罐子添加到`WEB-INF/lib`目录中。为什么我不能从war文件访问我的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T04:43:30.857

我认为 Eclipse 没有将您的项目识别为 Web 应用程序，要确认这一点

打开以在 Eclipse 上打开 Java EE 透视图。如果您打开应用程序的项目文件夹，您应该会看到（部署描述符）

![在此处输入图像描述](../Images/314b3b1dbb71e6fb180cfa0873e7bcb6.png)

如果您没有看到它，那么就 Eclipse 而言，您的应用程序不是 Web 应用程序，如果您导入/创建了一个 Maven 命令行项目，我会看到这一点

要解决此问题，请选择 Project ==> Properties ==> Project Facets ==> 确保选中 Dynamic Web Module 复选框

![在此处输入图像描述](../Images/c9f5805312e6f82981d914014cd213a2.png)

如果您这样做，本地 tomcat 服务器将在添加删除项目时添加您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:34:14.657

好的，我自己弄清楚了。我搜索了谷歌

```
SEVERE: Error filterStart 
```

并找到，检查`localhost_yyyy_mm_dd.log`文件以获取有关错误的更多信息。

在该文件中有一个名为`java.lang.UnsupportedClassVersionError`. 原因是我的 jdk 和 jre 版本不同。

所以我从项目属性中将 jdk 和 jre 版本更改为同一级别。之后，我构建了项目并将项目再次导出到 webApp。我再次重新启动tomcat服务器。所有错误都消失了。

参考：[Tomcat 启动日志 - 严重：错误 filterStart 如何获取堆栈跟踪？](https://stackoverflow.com/questions/3016808/tomcat-startup-logs-severe-error-filterstart-how-to-get-a-stack-trace)

# css - 按时间更改背景图片网址

> ID：13115882
> 
> 赞同：1
> 
> 时间：2012-10-29T04:32:27.473
> 
> 标签：css, ruby-on-rails, sass

我正在尝试根据一天中的时间更改背景图片网址。就像在早上上午时间太阳升起....太阳落山。每个都有自己的 png 文件和一个 url。我正在用 ruby​​ on rails 创建网站，并将 sass-rails 用于 css。

所以我的问题是，有没有一种聪明的方法可以改变从辅助方法或其他方法读取的 css 类的 bg 图像 url？

或者使用jquery调用服务器端方法并返回图片url？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:37:28.133

试试这个方法

```
<script type="text/javascript">

var currentTime = new Date().getHours();
if ( currentTime> 6 | currentTime<9) {
if(document.body) {
document.body.background = "sunrise.jpg";
}
}
else if (currentTime>=9 &&currentTime < 20) {
if(document.body) {
document.body.background = "daytime.jpg";
}
}
else if (currentTime>20 &&currentTime < 24) {
if(document.body) {
document.body.background = "sunset.jpg";
}
}
else {
if (document.body) {
document.body.background = "nighttime.jpg";
}
}

</script> 
```

来源：[http ://www.sitepoint.com/forums/showthread.php?744436-Changing-div-background-image-based-on-time](http://www.sitepoint.com/forums/showthread.php?744436-Changing-div-background-image-based-on-time)

# javascript - 将属性动态分配给 JS 对象

> ID：13115884
> 
> 赞同：3
> 
> 时间：2012-10-29T04:32:29.917
> 
> 标签：javascript, jquery, json, coffeescript

我需要为 js 对象动态添加属性，我通过 eval() 实现了这一点：

```
$ ->

  #Methods
  window.add_address = (attributes, id=new Date().getTime())->
    $container = $('ul#addresses_list')
    $unit = $('<li>')

    $.each attributes, (key,value)->
      $input = $('<input type="hidden">')
      $input.attr 'name', "contact[addresses_attributes][#{id}][#{key}]"
      $input.val value
      $unit.append $input

    $container.append $unit

  #Events

  #Add address button
  $('a#add_address').on 'click', (ev)->
    attributes =  new Object
    $('#address_fields').find('input').each ->
      eval("attributes.#{$(this).attr 'id'}='#{$(this).val()}'");

    add_address attributes 
```

这很完美，但我觉得很尴尬`eval()`，**有没有办法做到这一点“更漂亮”？**我的意思是，我搜索了[Jquery .serializeArray()](http://api.jquery.com/serializeArray/)之类的替代方法，但它似乎只适用于查询的表单，我需要从该`#address_fields`div 获取输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T04:38:19.117

使用`object['key']`符号

```
attributes[$(this).attr('id')] = $(this).val(); 
```

使用以下方法创建对象也非常有效：

```
var attributes={}; 
```

编辑：沿着类似的路线可以用相同的符号编写 jquery 方法

```
 attributes[$(this)['attr']('id')] = $(this)['val'](); 
```

# javascript - 输入字段的Javascript设置值不持久

> ID：13115885
> 
> 赞同：0
> 
> 时间：2012-10-29T04:33:12.943
> 
> 标签：javascript, setvalue, input-field

为班级工作二十一点游戏，显示功能出现问题。它确实改变了字段的值，但在函数完成后它又恢复了。如何使更改持久？

```
<html>

<head>
<script type="text/javascript">
function stack()
{
this.cards = new Array();

this.makeDeck = buildDeck;
this.deal = dealCard;
this.add = addCard;
}

function dealCard()
{
return this.cards.shift();
}

function addCard(card)
{
    this.cards.push(card);
}

function buildDeck()
{
var ranks = new Array("Ace", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King");
    var suits = new Array("Clubs", "Diamonds", "Hearts", "Spades");

    this.cards = new Array(52);

    for (s = 0; s < suits.length; s++)
    {
      for (r = 0; r < ranks.length; r++)
      {
         this.cards[(s * ranks.length) + r] = new card(ranks[r], suits[s]);
      }
    }
}

function card(r, s)
{
this.rank = r;
this.suit = s;
}

function display()
{

document.getElementById("player_card_1").value = "anything";
alert("here");
}

function newGame()
{
var Player = new stack();
var Dealer = new stack();
var Deck = new stack();
Deck.makeDeck();
Player.add(Deck.deal());

display();
}

</script>
<style type="text/css">
input {
    background:transparent
}
</style>

</head>

<body>
<table bgcolor="#33CC33">
    <tr>
        <td style="font:14pt bold">Your cards</td>
        <td></td>
        <td style="font:14pt bold">Dealer's cards</td>
        <td></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="" id="player_card_1"></td>
        <td><input type="text" readonly="readonly" value="" id="p_card_1_val"></td>
        <td><input type="password" readonly="readonly" value="" id="dealer_card_1"></td>
        <td><input type="password" readonly="readonly" value="" id="d_card_1_val"></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="" id="player_card_2"></td>
        <td><input type="text" readonly="readonly" value="" id="p_card_2_val"></td>
        <td><input type="text" readonly="readonly" value="" id="dealer_card_2"></td>
        <td><input type="text" readonly="readonly" value="" id="d_card_2_val"></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="" id="player_card_3"></td>
        <td><input type="text" readonly="readonly" value="" id="p_card_3_val"></td>
        <td><input type="text" readonly="readonly" value="" id="dealer_card_3"></td>
        <td><input type="text" readonly="readonly" value="" id="d_card_3_val"></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="" id="player_card_4"></td>
        <td><input type="text" readonly="readonly" value="" id="p_card_4_val"></td>
        <td><input type="text" readonly="readonly" value="" id="dealer_card_4"></td>
        <td><input type="text" readonly="readonly" value="" id="d_card_4_val"></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="" id="player_card_5"></td>
        <td><input type="text" readonly="readonly" value="" id="p_card_5_val"></td>
        <td><input type="text" readonly="readonly" value="" id="dealer_card_5"></td>
        <td><input type="text" readonly="readonly" value="" id="d_card_5_val"></td>
    </tr>
    <tr>
        <td><input type="text" readonly="readonly" value="Total"></td>
        <td><input type="text" readonly="readonly" value=""></td>
        <td><input type="text" readonly="readonly" value="Total"></td>
        <td><input type="text" readonly="readonly" value=""></td>
    </tr>
</table>
<br>
<form name="buttons" action="">
<button name="deal" onclick="newGame()">Deal</button>
<button name="hit">Hit</button>
<button name="stand">Stand</button>
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:28:26.167

试试这个代码。将您的表单代码替换为

```
<form name="buttons" action="">
<input type="button" name="deal" onclick="newGame()"/>Deal
<input type="button" name="hit">Hit</button>
<input type="button" name="stand">Stand</button>
</form> 
```

# caching - java自定义一个hashmap值

> ID：13115888
> 
> 赞同：1
> 
> 时间：2012-10-29T04:33:59.057
> 
> 标签：caching, collections, types, iterator, hashmap

我正在使用 java 中的实时应用程序，我有一个看起来像这样的数据结构。

```
HashMap<Integer, Object> myMap; 
```

现在这对于存储我需要的数据非常有效，但它在获取数据时会杀死我。我遇到的根本问题是，如果我打电话

```
Collection<Object> myObjects = myMap.values();
Iterator<object> it = myObjects.iterator();
while(it.hasNext(){ object o = it.next(); } 
```

我在我的类中将迭代器和集合声明为变量，并在每次迭代时分配它们，但对集合的迭代非常慢。这是一个实时应用程序，因此需要每秒至少迭代 25 次。

查看分析器，我发现每次更新都会创建一个迭代器的新实例。

我正在考虑两种可能更改哈希图以解决我的问题的方法。1\. 以某种方式缓存迭代器，虽然我不确定这是否可能。2\. 可能更改 hashmap.values() 的返回类型以返回列表而不是集合 3\. 使用不同的数据结构，但我不知道我可以使用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:23:08.717

如果这仍然是开放的，请使用 Google Guava 收藏。对于您正在定义的结构，它们具有诸如 multiMap 之类的东西。好的，这些可能不是完全替代品，但很接近：从这里的网站： [https ://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)

每个有经验的 Java 程序员都曾在某一时刻实现过 Map> 或 Map>，并处理了该结构的笨拙问题。例如，Map> 是表示无标签有向图的典型方式。Guava 的 Multimap 框架可以轻松处理从键到多个值的映射。Multimap 是将键与任意多个值相关联的通用方法。

# sql - 如何获取不同的数据以及遇到的第一个不同数据的代码

> ID：13115889
> 
> 赞同：-1
> 
> 时间：2012-10-29T04:33:59.593
> 
> 标签：sql

```
+----------+----------+-----------------------+-----------------------------+
| Coloumn1 | Coloumn2 |       Coloumn3        |          coloumn4           |
+----------+----------+-----------------------+-----------------------------+
| NULL     | AAAA     | NOTICE                | Plaintiffs Notice of Filing |
| NULL     | AAAB     | NOTICE CANCEL HEARING | Plaintiffs Notice of Filing |
+----------+----------+-----------------------+-----------------------------+ 
```

我有这张桌子，我想从中获得不同的价值`coloumn4`。

我还需要`Coloumn2`第一个对应的第 4 列数据的数据。例如，第 1 行和第 2 行具有相同的数据`coloumn4`。因此，在应用查询时，我需要以下数据：

```
Coloumn2 | Coloumn4
---------|----------------------------
AAAA     | Plaintiffs Notice of Filing 
```

获取此数据的 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T04:40:21.513

```
SELECT column4, MIN(column2)
FROM tableName
GROUP BY column4 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d7918/1)

# c# - DCI：如何使用依赖注入实现上下文？

> ID：13115890
> 
> 赞同：0
> 
> 时间：2012-10-29T04:33:59.810
> 
> 标签：c#, dependency-injection, dci

DCI 上下文的大多数示例都是作为命令模式实现的。但是，在使用依赖注入时，将依赖注入到构造函数中并将参数发送到执行方法中很有用。比较命令模式类：

```
public class SomeContext
{
    private readonly SomeRole _someRole;
    private readonly IRepository<User> _userRepository;

    // Everything goes into the constructor for a true encapsuled command.
    public SomeContext(SomeRole someRole, IRepository<User> userRepository)
    {
        _someRole = someRole;
        _userRepository = userRepository;
    }

    public void Execute()
    {
        _someRole.DoStuff(_userRepository);
    }
} 
```

使用依赖注入类：

```
public class SomeContext
{
    private readonly IRepository<User> _userRepository;

    // Only what can be injected using the DI provider.
    public SomeContext(IRepository<User> userRepository)
    {
        _userRepository = userRepository;
    }

    // Parameters from the executing method
    public void Execute(SomeRole someRole)
    {
        someRole.DoStuff(_userRepository);
    }
} 
```

最后一个似乎更好一些，但我从未见过它像这样实现，所以我很好奇是否有任何事情需要考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:21:34.290

Command和DCI之间存在对比。在 Command 中，您分配对象之间的交互，在 DCI 中，您通过角色方法集中交互。在 MoneyTRansfer 示例中，账户将无法提取或存款，因为它们是没有行为的简单数据。但是，在诸如 Transfer 之类的上下文中，角色将存在该行为。因此，当源账户角色绑定到账户对象时，账户对象将获得提款行为，目标账户也是如此。

在命令模式中，它们具有行为，但行为的执行是在命令对象中编写的并且可以传递。整个交互不是命令对象的一部分，而是通常分布在参与对象之间。

在 Marvin 中，一种支持 DCI 的语言构建是因为大多数现代语言仅部分支持 DCI，因此您只能将角色绑定到构造函数中的对象。如何调用构造函数与上下文无关。这可确保为所有角色完成一次绑定。只有通过实例化另一个上下文才能重新绑定。这不是 DCI 的限制，而是 Marvin 的设计选择。

关于上下文方法是否可以接受参数的问题，这有点哲学，但据我记得上次我与 Trygve Reenskaug 辩论时，我们同意他们可以接受参数，我知道我已经实现了一些他们在哪里做的例子（包括在[DCI 网站上的汇款）。](http://fullOO.info)

# java - 如何调用另一个类的方法？

> ID：13115892
> 
> 赞同：0
> 
> 时间：2012-10-29T04:34:20.590
> 
> 标签：java, android, chronometer

我不知道如何调用 start(); 我制作的一个类中的方法它在同一个包中，它被称为 Chronometer 这里是我的类

```
 import java.lang.reflect.Method;
    import java.text.DecimalFormat;
    import com.example.chrono.Chronometer.OnChronometerTickListener;
    import android.app.Activity;
    import android.content.Context;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Message;
    import android.os.SystemClock;
    import android.util.AttributeSet;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;

    public class tests extends Activity{
    Button start;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Chronometer test = new Chronometer(this);
        start = (Button) findViewById(R.id.bStart);

        start.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                com.example.chrono.Chronometer.start();         } 
        }); 
    }

} 
```

我得到了错误`com.example.chrono.Chronometer.start();`

错误是**无法从 Chronometer 类型对非静态方法 start() 进行静态引用**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T04:38:21.953

您可以使用类的对象从其他类调用非静态方法`Chronometer`：

```
Chronometer test = new Chronometer(this);
    start = (Button) findViewById(R.id.bStart);

    start.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
        //    com.example.chrono.Chronometer.start();
            test.start(); 
         } 
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T04:38:57.797

你可以像这样调用这个方法`test.start();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T04:40:43.447

方法`static`（不详述）是直接从类中调用的方法，例如`MyClass.staticMethod();`. 您正在尝试调用一个`instance`方法，该方法需要从MyClass的*实例中调用。*在这种情况下，您的方法 start 不是静态的，而是一个实例方法，应该使用以下方法调用：

```
test.start();//since, test is an instance of your class. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T04:47:38.993

```
public class tests extends Activity implements OnChronometerTickListener {
} 
```

把你的课变成这样............

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T04:50:16.220

**-**用于`Composition`访问**另一个类**的**方法**。

 ****-**在测试类中创建 Chronometer 实例并访问 start() 方法。

**例如：**

```
public class tests extends Activity{
Button start;
Chronometer crono = new Chronometer();   // Instance of Chronometer

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Chronometer test = new Chronometer(this);
    start = (Button) findViewById(R.id.bStart);

    start.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            crono.start();        
        } 
    }); 
  }

} 
```

**几个重要的事情：**

**-**使用大写字母作为班级名称中的第一个字母，例如.. 测试

**-**确保`access modifiers`在类及其方法上使用正确，以使其对其他类可见**

# ruby-on-rails - Rails 应用程序访问速度很慢

> ID：13115893
> 
> 赞同：0
> 
> 时间：2012-10-29T04:34:25.803
> 
> 标签：ruby-on-rails, latency

我们正在尝试从 Windows 机器访问在 Ubuntu 机器上运行的 Rails 应用程序，并且加载应用程序所需的时间非常慢。从 Windows 机器到 Ubuntu 机器的 ping 操作在 < 1 毫秒内返回。我该如何调试这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T09:14:01.673

如果您使用命令'rails server'运行您的rails应用程序，默认情况下是webrick，其他机器加载需要时间，请尝试在您的ubuntu机器中的apache服务器中安装应用程序并使用您的系统ip和符号链接访问它.(http://0.0.0.0/symlink) 当你第一次重启你的apache服务器时，它会花费一些时间，然后它应该比在webrick中更短的时间加载。

# objective-c - UIManagedDocument 文件修改日期没有改变

> ID：13115895
> 
> 赞同：2
> 
> 时间：2012-10-29T04:34:41.027
> 
> 标签：objective-c, uimanageddocument, uidocument

使用正确的保存 API 方法打开、关闭、更改数据和保存文档`UIDocument`不会更改从`fileModificationDate`属性返回的值。

从[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDocument_Class/UIDocument/UIDocument.html)：

> 修改日期由`openWithCompletionHandler:`、`saveToURL:forSaveOperation:completionHandler:`和`revertToContentsOfURL:completionHandler:`方法更新。

但`fileModificationDate`始终报告文档文件包装器的创建日期，无论核心数据存储是否被更新。

这当然不是正常行为，对吧？

没有特定的额外代码。简单地说，这是 UIManagedDocument 的子类。UIManagedDocument 自动管理文档包装器内的核心数据存储。代码就这么简单：

```
[document openWithCompletionHandler:^(BOOL success) {
    if (success)
    {
        NSLog(@"Doc(Modified Date):  %@", document.fileModificationDate);
    }
}]; 
```

将始终返回文档的创建日期。创建日期和修改日期都是相同的，即第一次保存文档以进行创建的日期。但是，内容存储文件的修改日期发生了变化，创建日期与文档包装器相同。

# r - 在 Sweave 中制作扁平化的 pdf

> ID：13115898
> 
> 赞同：3
> 
> 时间：2012-10-29T04:35:14.023
> 
> 标签：r, pdf, latex, sweave, rstudio

所以我正在使用 Sweave 创建 pdf，其中包括一些上面有大量点的图表。我可以很好地获得 pdf，但它似乎已经创建了很多层，因此很难在 Acrobat 或 Reader 中打开文件。当我这样做时，我真的可以看到文件上加载的点。

有没有办法在 Sweave 中展平 pdf 以使其不那么笨重？

（请注意，我正在使用 RStudio。我知道我可能应该使用其他东西，但我还没有找到任何可以顺利运行的东西。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T09:39:12.373

没有必要为此切换到 Knitr，尽管这样做有很多好处。

一种解决方案是安排生成绘图文件，然后自己包含它，而不是依靠 Sweave 为您完成

```
<<gen_fig, echo=true, eval=true>>=
png("path/to/fig/location/my_fig.png")
plot(1:10)
dev.off()
@

\includegraphics[options_here]{path/to/fig/location/my_fig} 
```

另一种选择是考虑带有“大量点”的图是否是一个有用的数字——你能看到所有的点吗？是兴趣点的密度吗？替代方法包括通过**hexbin**包进行绘图或生成点的二维密度并将其绘制为较低密度的点集。ggplot2包**内置**了很多这样的功能，参见例如[`stat__bin2d()`](http://docs.ggplot2.org/current/stat_bin2d.html)或[`stat_binhex()`](http://docs.ggplot2.org/current/stat_binhex.html)示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T09:17:24.707

正如已经提到的，您可能应该切换到[knitr](http://yihui.name/knitr/)，这使得 pdf 和其他格式之间的交换变得更好。特别是，您应该查看：

*   knitr 和 sweave 之间的[过渡指南](http://yihui.name/knitr/demo/sweave/)
*   [全局选项](http://yihui.name/knitr/objects)：这样您就可以轻松地在 pdf、高分辨率 png 和低分辨率 png 之间进行切换。
*   [缓存](http://yihui.name/knitr/options)：仅在需要时生成数字。

以下是使用 PNG 设备的示例：

```
\documentclass{article}
\begin{document}

<<gen_fig, dev='png'>>=
n <- 100000
DF <- data.frame(x=rnorm(n), y=rnorm(n))
plot(DF)
@

\end{document} 
```

无需指定`fig=TRUE`for `knitr`。如果包中的 PNG 设备的图像质量`graphics`不够，您可以轻松切换到其他 PNG 设备，例如`dev='CairoPNG'`或`'Cairo_png'`. 在 Sweave 中，您只需编写更多代码来做同样的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-29T16:05:32.360

正如加文所说，没有必要为此切换`knitr`，尽管这样做还有其他优势。但是，您甚至不需要编写自己的保存和包含代码；Sweave 可以为您做到这一点。如果初始文件是：

```
\documentclass{article}
\usepackage[american]{babel}
\begin{document}

<<>>=
n <- 100000
DF <- data.frame(x=rnorm(n), y=rnorm(n))
@

<<gen_fig, fig=TRUE>>=
plot(DF)
@

\end{document} 
```

然后只需将参数更改为图形块，您就可以获得 PNG 而不是 PDF：

```
<<gen_fig, fig=TRUE, png=TRUE, pdf=FALSE>>=
plot(DF)
@ 
```

在这个简单的示例中，它将我的最终 PDF 从 685K 缩小到 70K。

# python - 在此示例中如何使用 Mongodb 聚合？

> ID：13115900
> 
> 赞同：2
> 
> 时间：2012-10-29T04:35:25.343
> 
> 标签：python, mongodb, pymongo, aggregation-framework

我目前正在使用 Python 来构建我的许多结果，而不是 MongoDB 本身。我试图了解聚合，但我有点挣扎。这是我目前正在做的一个例子，MongoDB 可能会更好地处理它。

我有一组节目和一组剧集。每个节目都有一个与之关联的剧集列表 (DBRefs)。（剧集存储在它们自己的集合中，因为程序和剧集都非常复杂和深入，因此嵌入是不切实际的）。每集都有一个持续时间（浮动）。如果我想找到一个节目的平均剧集持续时间，我这样做：

```
episodes = list(db.Episodes.find({'Program':DBRef('Programs',ObjectId(...))}))
durations = set(e['Duration'] for e in episodes if e['Duration'] > 0)
avg_mins = int(sum(durations) / len(durations) / 60 
```

当一个节目超过 1000 集时，这非常慢。有没有办法在 MongoDB 中做到这一点？

这是 Mongo shell 格式的一些示例数据。三集属于同一个节目。如何计算节目的平均剧集时长？

```
> db.Episodes.find({
    '_Program':DBRef('Programs',ObjectId('4ec634fbf4c4005664000313'))},
   {'_Program':1,'Duration':1}).limit(3)

{
    "_id" : ObjectId("506c15cbf4c4005f9c40f830"),
    "Duration" : 1643.856,
    "_Program" : DBRef("Programs", ObjectId("4ec634fbf4c4005664000313"))
}
{
    "_id" : ObjectId("506c15d3f4c4005f9c40f8cf"),
    "Duration" : 1598.088,
    "_Program" : DBRef("Programs", ObjectId("4ec634fbf4c4005664000313"))
}
{
    "_id" : ObjectId("506c15caf4c4005f9c40f80e"),
    "_Program" : DBRef("Programs", ObjectId("4ec634fbf4c4005664000313")),
    "Duration" : 1667.04
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T23:39:12.377

我想通了，与将其全部放入 Python 相比，它的速度快得离谱。

```
p = db.Programs.find_one({'Title':'...'})

pipe = [
        {'$match':{'_Program':DBRef('Programs',p['_id']),'Duration':{'$gt':0}}},
        {'$group':{'_id':'$_Program', 'AverageDuration':{'$avg':'$Duration'}}}
        ]

eps = db.Episodes.aggregate(pipeline=pipe)

print eps['result'] 
```

# java - 在Java中将节点添加到链表的末尾

> ID：13115901
> 
> 赞同：-2
> 
> 时间：2012-10-29T04:35:26.143
> 
> 标签：java, linked-list, queue

我正在做一个涉及链表的家庭作业。我们必须实现一个队列 ADT，而我遇到问题的一种方法是将一个节点添加到列表的末尾（入队方法）。这是我的代码：

公共类队列实现 QueueInterface {

```
 private Node head;
    private Node tail;
    private int sz;

    public  Queue() {
        head = null;
        tail = null;
        sz = 0;
    }

    public void enqueue(T newEntry) {
        Node newElement = new Node(newEntry);
        newElement.next = null;
        tail.next = newElement;
        tail = newElement;
    }

    public T dequeue() {
        T result = null;
        if(head != null) {
            result = head.data;
            head = head.next;
            sz--;
        }
        return result;
    }

    public T getFront() {
        return head.data;
    }

    public boolean isEmpty() {
        if (head == null) {
            return true;
        }
        return false;
    }

    public void clear() {
        while (!isEmpty()) {
            dequeue();
        }
    }

    @Override
    public String toString() {
        return "Queue [head=" + head + ", sz=" + sz + "]";
    }

    public class Node {

        private Node next;
        private T data;

        public Node (T newData) {
            data = newData;
        }

        @Override
        public String toString() {
            return "Node [next=" + next + ", data=" + data + "]";
        }

    }

} 
```

如果有人可以帮助我解决这个问题，我将非常感激。谢谢你的时间！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:41:40.950

你不需要这一行，下一个应该已经是空的。

```
newElement.next = null; 
```

您还忘记在入队后增加 sz 。

如果你尝试加入一个空链表会发生什么？你将不得不处理那个案子，这就是为什么你得到一个`NullPointerException`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:45:17.920

您没有处理列表为空的情况。您正在添加*第一*项，`tail`是`null`并且您得到了适当的例外。

您需要在尝试使用它之前检查它是否存在，如果是这种情况，请采取适当的行动`tail`。`null`不要忘记设置`head`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T04:48:09.320

```
public void enqueue(T newEntry) {
        Node newElement = new Node(newEntry);
        newElement.next = null;
        if(tail != null)
        {
        tail.next = newElement;
        tail = newElement;

        }else
        {
         head=tail=newElement;
        }
    } 
```

检查tail是否为空。如果 tail 为空，则表示这是第一个节点。将此添加为第一个节点。在尾部之后添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T04:41:55.960

您的 enqueue 方法尝试设置`tail.next`为`newElement`. 如果尾部还没有被初始化会发生什么？你会得到一个 NullPointerException。

# expression-blend-4 - System.Expression.Interactions.dll 不包括 CallMethodAction

> ID：13115902
> 
> 赞同：2
> 
> 时间：2012-10-29T04:35:49.600
> 
> 标签：expression-blend-4

我最近刚刚安装了`Expression Blend 4`Ultimate 以与我的 Visual Studio 2010 一起运行。我已经包含了 System.Expression.Interactions.dll 的参考，但它不包括参考中的 CallMethodAction。有谁知道为什么？我整晚都在搜索，但没有找到任何解释原因的好网站。我读过的所有网站都只是说使用 callMethodAction 需要引用。任何帮助，将不胜感激

# ruby - Ruby中的插入排序

> ID：13115903
> 
> 赞同：1
> 
> 时间：2012-10-29T04:36:06.497
> 
> 标签：ruby

这是 C++ 中的插入排序算法（来自教程）：

```
void insertionSort(int arr[], int length) {
      int i, j, tmp;
      for (i = 1; i < length; i++) {
            j = i;
            while (j > 0 && arr[j - 1] > arr[j]) {
                  tmp = arr[j];
                  arr[j] = arr[j - 1];
                  arr[j - 1] = tmp;
                  j--;
            }
      }
} 
```

这就是我在 Ruby 中所做的

```
a = [12, 1, 18, -3, -2, 66, 31]
puts a

def insertion_sort(source)
    source.to_enum.with_index(1).each do |item, i|
        j = i
        while((j>0) && (source[j-1] > source[j]))
            source[j], source[j-1] = source[j-1], source[j]
            j -= 1  
        end
    end
end

insertion_sort(a)
puts a 
```

它抛出一个错误`comparison of Fixnum with nil failed (ArgumentError)`。可能是因为溢出。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:46:48.713

在`C++`您拥有的版本中`(i = 1; i < length; i++)`。这意味着，它不会运行最后一轮 where `i = length`。那将超出数组范围。

在`ruby`中，因为您将索引的偏移量设置为`1`，所以最后一轮，您将拥有`i = length`。故`source[length]`出`source`，故归`nil`。

```
1 > nil  # source[j-1] > source[j] when j = length
# ArgumentError: comparison of Fixnum with nil failed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T07:54:30.820

虽然@oldergod 已经回答了你的问题，但我只想为这个问题添加一些修复。

这里是从[算法 gem中获取的代码示例](https://github.com/kanwei/algorithms/blob/master/lib/algorithms/sort.rb#L92-112)

```
def insertion_sort(container)
  return container if container.size < 2
  (1..container.size-1).each do |i|
    value = container[i]
    j = i-1
    while j >= 0 and container[j] > value do
      container[j+1] = container[j]
      j = j-1
    end
    container[j+1] = value
  end
  container
end 
```

在这里，您遍历一个数字 ，`1`容器的第二个索引，到`container.size - 1`最后一个索引。

# asp.net - 在 asp.net 中具有窗口服务的多线程

> ID：13115907
> 
> 赞同：0
> 
> 时间：2012-10-29T04:37:16.073
> 
> 标签：asp.net, multithreading

我可以在多个线程中使用相同的进程吗？

有5类：

*   1 类 - 100000 封邮件发送
*   2 类 - 10000 封邮件发送
*   3 类 - 200000 封邮件发送
*   4 类 - 1000 封邮件发送
*   5 类 - 300000 封邮件发送

使用*两个线程*。

每个类别发送邮件的线程时间：[线程 1] 类别 1 花费 40 分钟；[线程 2] 类别 2 花费了 10 分钟 [类别 3] 应由线程 2 提取，然后随机选择其他类别。我在后台进程中使用带有 Window 服务的 Asp.net。

这是获取邮件详细信息的方法：`SendNewsLatterStatus` 以便 [Category 3] 继续使用 Thread 2，然后在 Thread.. 中随机获取类别。

```
 NewsLatterThread1 = new Thread(new ThreadStart(SendNewsLatterStatus));
            NewsLatterThread1.Name = "NewsLatter1";

            NewsLatterThread2 = new Thread(new ThreadStart(SendNewsLatterStatus));
            NewsLatterThread2.Name = "NewsLatter2";

            NewsLatterThread1.Start();
            NewsLatterThread2.Start();

            NewsLatterThread1.Join();
            NewsLatterThread2.Join();

            NewsLatterThread1.Abort();
            NewsLatterThread2.Abort(); 
```

它不能正常工作这是什么错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:30:55.990

您需要首先清除线程的概念。

阅读此[http://www.albahari.com/threading/](http://www.albahari.com/threading/) 这肯定会清除空气并整理您的查询。

# r - 引用类中引用类的实例化 - lock() 和不变性的问题

> ID：13115913
> 
> 赞同：3
> 
> 时间：2012-10-29T04:38:12.807
> 
> 标签：r, reference-class

我从 R 参考类中遇到了一些我想解决的行为。在下面的代码中，引用类 B 中有两个引用类 A 的字段。

`initialize()`在调用 B 的方法之前，B 中的这些字段似乎已用引用类 A 的零参数（默认）版本实例化（可能两次） 。然后在 B 的初始化过程中将这些实例替换为实例 A 的正确版本。问题是，如果我使用`lock()`B 的实例生成器，A 的初始空实例无法在 B 中替换。另一个问题是引用类 A 在初始化 [或缺少（c）测试] 中需要一个默认值。

帮助 - 建议 - 等表示赞赏。

```
A <- setRefClass('A',
    fields = list(
        count = 'numeric'
    ),

    methods = list(
        initialize = function (c=0) {
            cat('DEBUG: A$initialize(c); where c=');  cat(c); cat('\n')
            count <<- c
        }
    )
)

instance.of.A <- A$new(10)
str(instance.of.A)

B <- setRefClass('B',
    field = list(
        a = 'A',
        b = 'A'
    ),

    methods = list(
        initialize = function(c) {
            a <<- instance.of.A
            b <<- getRefClass('A')$new(c)
        }
    )
)

instance.of.b <- B$new(100)
str(instance.of.b) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:04:38.403

以下是两种可能的解决方案：

1.  不要设置字段属性：

    ```
    B <- setRefClass('B',
        methods = list(
            initialize = function(c) {
              .self$a = instance.of.A
              .self$b =getRefClass('A')$new(c)
            }
         )
     ) 
    ```

2.  设置字段，但使用`ANY`类：

    ```
    B <- setRefClass('B',
        field = (a="ANY", b="ANY"), 
        methods = list(
            initialize = function(c) {
              a <<- instance.of.A
              b <<- getRefClass('A')$new(c)
            }
         )
     ) 
    ```

这两种解决方案的缺点是类型不是在`a`and中强制执行的`b`，即

```
 B$a = "Fred" 
```

现在是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:52:09.610

借鉴以上内容，我使用的解决方案是（由于类型检查而有点长）：

```
A <- setRefClass('A',
    fields = list(
        count = function(x) {
            if (!missing(x)) {
                if(class(x) != 'numeric')
                    stop('Class A: count set by non-number')
                .self$count.private <- x
            }
            .self$count.private
        }
    ),

    methods = list(
        initialize = function (c=0) {
            cat('DEBUG: A$initialize(c); where c=');  cat(c); cat('\n')
            count <<- c
        }
    )
)

instance.of.A <- A$new(10)
str(instance.of.A)

B <- setRefClass('B',
    field = list(
        a = function(x) {
            if (!missing(x)) {
                if(!inherits(x, 'envRefClass') || class(x)[1] != 'A')
                    stop('Class B: expecting instance of class A')
                .self$a.private <- x
            }
            .self$a.private
        },
        b = function(x) {
            if (!missing(x)) {
                if(!inherits(x, 'envRefClass') || class(x)[1] != 'A')
                    stop('Class B: expecting instance of class A')
                .self$b.private <- x
            }
            .self$b.private
        }
    ),

    methods = list(
        initialize = function(c) {
            a <<- instance.of.A
            b <<- getRefClass('A')$new(c)
        }
    )
)

instance.of.b <- B$new(100)
str(instance.of.b) 
```

# android - 如何在 android 中将 R.drawable String 转换为 R.drawable 整数格式？

> ID：13115914
> 
> 赞同：2
> 
> 时间：2012-10-29T04:38:17.487
> 
> 标签：android, string, resources, integer, type-conversion

我想将当前动态字符串格式的 R.drawable 转换为整数格式。如何完成。请用一个片段指导我解决它。谢谢。

```
Integer[] images={R.drawable.apple,R.drawable.mango,R.drawable.banana}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T04:40:05.427

你可以用这个

```
String mDrawableName = "myimg";
int resID = getResources().getIdentifier(mDrawableName , "drawable", getPackageName()); 
```

或者

```
String imageName = "picture";
int resID = getResources().getIdentifier(imageName, "drawable", "package.name");
ImageView image;
image.setImageResource(resID); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-29T04:57:35.003

你可以用这个

```
public int[] getIntIds(Integer[] images){
    int[] temp = new int[images.length];
    String name;
    for(int i=0; i<= images.length; i++){
        name = getResources().getResourceEntryName(images[i]);
        temp[i] = getResources().getIdentifier(name , "drawable", getPackageName());
    }
    return temp;
} 
```

# java - Java 错误页面配置

> ID：13115922
> 
> 赞同：1
> 
> 时间：2012-10-29T04:39:22.633
> 
> 标签：java, tomcat, error-handling

我创建了一个 404 页面，目前正在使用我知道不存在的简单页面请求对其进行测试。此代码将显示我制作的错误页面（也就是我想要的结果）。

```
<!-- CONFIGURATION FOR ERROR PAGES -->
<error-page>
    <!--<exception-type>java.lang.Throwable</exception-type>-->
    <error-code>404</error-code>
    <location>/videoNotFound</location>
</error-page> 
```

但是，此代码将显示 apache tomcat 默认错误页面

```
<!-- CONFIGURATION FOR ERROR PAGES -->
<error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <!--<error-code>404</error-code>-->
    <location>/videoNotFound</location>
</error-page> 
```

有什么想法为什么会发生这种情况，或者我可以尝试什么来解决这个问题？尽管选项 1 有效，但我更喜欢选项 2，因为我不想为每种异常类型提供特定的错误页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:18:42.270

`404`并且`java.lang.Throwable`是在不同情况下触发的两种截然不同的错误条件。`404`您自己测试过的类似是通过请求不存在/无法访问的资源触发的，`java.lang.Throwable`这是由于内部服务器/编程错误而发生的错误情况，它由 http 状态代码表示`500`。这种情况，你不能通过简单地访问不可访问的资源来模拟；状态代码的性质`4xx`通常是它们在请求到达您的 Web 应用程序之前被抛出，而`500`系列错误代码主要是 Web 应用程序生成的。对此进行测试的唯一方法是*在*您的 Web 应用程序代码`Exception`中抛出一个 throwable 实例。`Error`

 *最后，您将必须有两个单独`error-page`的定义，一个用于与容器相关的错误（本质上是`4xx`状态代码），另一个用于`500`/`throwable`类型错误条件*

# arrays - 返回类型字符串数组还是数据表？

> ID：13115924
> 
> 赞同：1
> 
> 时间：2012-10-29T04:39:54.787
> 
> 标签：arrays, performance, datatable

我有一个实用方法，我需要从中返回一组可以绑定到 UI 中的列表控件的字符串。我怀疑是否使用我认为比数据表更轻的字符串数组或者将它们添加到数据表中以便我可以直接将数据表绑定到列表控件？哪一个性能更好？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:26:43.533

说到性能，我认为使用字符串数组更快，但是您应该根据需要选择其中一个，这取决于您要如何管理这组数据，因为如果您的目标只是将它们绑定到列表我建议您使用简单*的字符串数组*，否则如果您需要更具体的内容，例如处理来自数据库的一组数据，您应该使用 DataTable，因为它允许您设置*PrimaryKey*创建与其他 DataTables的*关系*和其他东西。因此，有关 DataTable 的更多信息，请[查看此处](http://msdn.microsoft.com/en-gb/library/system.data.datatable.aspx)。

# node.js - Node promise-io - 为什么会崩溃？

> ID：13115925
> 
> 赞同：0
> 
> 时间：2012-10-29T04:39:59.750
> 
> 标签：node.js, promise

我正在学习[Node Beginner Tutorial](http://www.nodebeginner.org/)，同时根据我的开发风格定制一些东西。例如我选择使用coffeescript 和requirejs。后者涉及大量常规数量之上的回调汤。通常这些是我喜欢使用 Promise 处理的情况。经过一些最小的研究[，promise-io](https://github.com/kriszyp/promised-io)似乎是一个合理的解决方案。它可以工作，但突然间我遇到了一个使用 all 组合承诺的问题（这似乎类似于 jQuery.when - 这是我经常使用的一种技术）。

以下是我的 server.coffee 文件。因为它工作得很好，用`all`调用替换嵌套的延迟服务一个请求，然后挂起服务器。有谁知道问题是什么？

```
exports.start = ->
    requirejs ['http', 'url', './route'], (http, url, route)->
        console.log "Starting server"
        server = http.createServer (request, response) ->
            pathdata = url.parse request.url

            ###
            #this breaks
            promise.all(readingPost(request), route.promise).then (x) ->
                [postData, route] = x
                route pathdata, response, postData
            ###
            #this works
            readingPost(request).then (postData) -> route.promise.then (route) ->
                route pathdata, response, postData

        server.listen 8888

readingPost = (request) ->
    request.setEncoding 'utf-8'
    data = ''
    request.addListener 'data', (dataChunk) ->
        data += dataChunk
    d = promise.Deferred()
    request.addListener 'end', -> d.resolve data
    d 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:44:56.193

乍一看，您的第一个示例将覆盖`route`您加载的`requirejs`，因此第二次运行时，您将获得完全不同的价值。

尝试改变

```
[postData, route] = x
route pathdata, response, postData 
```

至

```
[postData, routeCb] = x
routeCb pathdata, response, postData 
```

# node.js - 为 Raspberry Pi 交叉编译的新版本 node.js 导致可执行文件大 5 倍

> ID：13115930
> 
> 赞同：2
> 
> 时间：2012-10-29T04:40:21.813
> 
> 标签：node.js, cross-compiling, raspberry-pi

我为 Raspberry Pi 交叉编译了更新版本的 node.js (v0.8.14)。将新版本与通过 apt-get 安装的节点 v0.6.19 进行比较，我很惊讶可执行文件的大小从 1.2Mb 跃升至 6.2Mb。

尺寸增加 5 倍是因为

*   较新版本的节点：v0.6.19 --> v0.6.19
*   GNU/Linux 版本：2.6.26 --> 3.5.0
*   别的东西？

```
pi@raspberrypi ~ $ /usr/bin/node -v; ll -h /usr/bin/节点；文件 /usr/bin/节点
v0.6.19
-rwxr-xr-x 1 root root 1.2M Jun 30 18:55 /usr/bin/node
/usr/bin/node：ELF 32 位 LSB 可执行文件，ARM，版本 1 (SYSV)，动态链接（使用共享库），
对于 GNU/Linux 2.6.26，uildID[sha1]=0xb29e21fbf3e8a7db733fbcd0539e593264d88c94，剥离

pi@raspberrypi ~ $ ./node -v; ll -h ./节点；文件./节点
v0.8.14
-rwxr-xr-x 1 pi pi 6.2M Oct 28 20:43 ./node
./node：ELF 32 位 LSB 可执行文件，ARM，版本 1 (SYSV)，动态链接（使用共享库），
对于 GNU/Linux 3.5.0，剥离

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:31:33.093

在仔细查看两个二进制文件后`readelf`发现，大小增加的主要原因是较大的二进制文件使用了许多静态链接代码——较小的二进制文件链接到更多共享库。

仅供参考：在较小节点中链接的共享库是 [libssl.so.1.0.0]、[libz.so.1]、[libv8.so.3.8.9.20]、[ld-linux-armhf.so.3] , [libcares.so.2], [libcrypto.so.1.0.0], [libev.so.4], & [libutil.so.1]。

# android - Android Context 对象可以序列化吗？

> ID：13115935
> 
> 赞同：1
> 
> 时间：2012-10-29T04:40:38.467
> 
> 标签：android, static, sharedpreferences, android-context

我声明了一个非最终静态对象，该对象与我的类中的其他常量一起`SharedPreferences`调用：`PREFS``Constants.java`

```
public static SharedPreferences PREFS = null; 
```

我这样做的原因是我的应用程序由大约 6 个不同的应用程序组成，`AsyncTasks`它们不断访问相同的共享首选项文件，我不想每次都得到`SharedPreferences`它。`Editor`在我的应用程序第一次运行时，我调用`getSharedPreferences()`了 my`MainActivity`并将其存储到，`PREFS`以便它在 s 被触发之前指向一个实例`AsyncTask`，因此避免了`NullPointerException`.

但是，无论如何，我一直`NullPointerException`从 s 得到 s 。`AsyncTask`所有堆栈跟踪都指向我调用`Constants.PREFS`以获取值的行。我的理论是，一段时间后，Android 会杀死我的应用程序的进程，所以下一次我的任何 s 的警报响起`AsyncTask`时，值`Constants.PREFS`已经是`null`.

我的问题是：我应该为它创建一个静态变量`Context`吗？即使 Android 终止了我的进程，它的状态是否会持续存在？`Context`当我的 s 被实例化时，我总是传递对`AsyncTask`s 的引用，这样他们就可以调用`getSystemService()`，并且永远不会抛出`NullPointerException`。但是，我没有看到从 Android 文档`Context`扩展。`Serializable`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:12:30.530

使用`Application`类在应用程序中全局共享首选项。

```
public class MyApp extends Application {
    private static Context mAppContext;

    @Override
    public void onCreate() {
        super.onCreate();
        mAppContext = getApplicationContext();
    }

    public static SharedPreferences getPreferences(){
        return mAppContext.getSharedPreferences("my_app_preferences",MODE_MULTI_PROCESS);
    }
} 
```

通过在清单中提及它来告诉 android 你想要你的自定义 Application 类：

```
<application android:name=".MyApp" android:label="@string/app_name" android:icon="@drawable/ic_launcher"> 
```

现在从任何地方，只要打电话

```
MyApp.getPreferences().edit().putBoolean("pref1",true). . . put more stuff . .commit() 
```

`MODE_MULTI_PROCESS`确保所有 AsyncTask 线程同步访问`SharedPreferences`. 此外，`commit()`它是原子的，并且会将更改持久保存到磁盘。

上述模式对于从任何地方访问资源也很方便。

**更新**

似乎对上下文的静态引用会导致新`Instant Run`功能出现问题。

因此，可以需要上下文作为实用程序方法的参数：

```
public static SharedPreferences getPreferences(context){
    return context.getSharedPreferences("my_app_preferences",MODE_MULTI_PROCESS);
} 
```

# javascript - 如何构建拖放菜单生成器？

> ID：13115937
> 
> 赞同：0
> 
> 时间：2012-10-29T04:40:56.417
> 
> 标签：javascript, jquery-ui, drag-and-drop

大家好，我现在正在使用菜单生成器，用户可以在其中使用 subemnus 来构建他喜欢的菜单，我在拖放中遇到问题，我已经完成了拖放，但在我的情况下拖放不起​​作用

我必须完成这样的事情

[http://www.prodevtips.com/demos/drag_drop_tree/](http://www.prodevtips.com/demos/drag_drop_tree/)

但不相似我应该能够通过拖放创建一个链或树，我的场景是我在底部列出了所有菜单并在顶部添加列按钮，当用户想要构建菜单时，他可以单击添加菜单按钮并在那里打开一列，他可以从列出的菜单中拖放菜单，从这里我想要上面链接的工作场景，如果我放在任何菜单项上，它应该是该父菜单项的子项用户掉到

这是我的脚本

```
$(document).ready(function() {
    var i = 0;
    $("button[id='columnadd']").click(function () {
       alert(1);
       var domElement = $('<aside id="shoppingCart' + i + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here</h2><aside class="ui-widget-content"><ol><li class="placeholder">Add your items here</li></ol></aside></aside>');
       i++;
       $(this).after(domElement);
    });

    $(".small_box li" ).draggable({
       appendTo: "body",
       helper: "clone"
    });
});          

$(".small_box li a").droppable({
   tolerance        : "pointer",
   hoverClass        : "tree_hover",
   drop            : function(event, ui){
       var dropped = ui.draggable;
       dropped.css({top: 0, left: 0});
       var me = $(this).parent();
       if(me == dropped)
           return;
       var subbranch = $(me).children("ul");
       if(subbranch.size() == 0) {
           me.find("a").after("<ul></ul>");
           subbranch = me.find("ul");
       }
       var oldParent = dropped.parent();
       subbranch.eq(0).append(dropped);
       var oldBranches = $("li", oldParent);
       if (oldBranches.size() == 0) { $(oldParent).remove(); }
   }
}); 
```

这是我的html

```
<body>    
 <button id="columnadd" >Add Column</button>
 <aside class="menu-structer" id="AddColumns" >
  </aside>
 <aside class="small_box">
    <h4>BRANDS</h4>
    <ul>
        <li id ="brand1"><a class="" href="#">Brand1</a></li>
        <li id ="brand2"><a href="#">Brand2</a></li>
        <li id ="brand3"><a href="#">Brand3</a></li>
        <li id ="brand4"><a href="#">Brand4</a></li>
    </ul>
  </aside>
 <aside class="small_box">
    <h4>CATEGORIES</h4>
    <ul>
    <li id ="category1"><a href="#">Category1</a></li>
    <li id="category2"><a href="#">Category2</a></li>
    <li id="category3"><a href="#">Category3</a></li>
    <li id="category4"><a href="#">Category4</a></li>
  </ul>
 </aside>
 <aside class="small_box">
    <h4>PRODUCTS</h4>
    <ul>
    <li id="Product1"><a href="#">Product1</a></li>
    <li id="product2"><a href="#">Product2</a></li>
    <li id="product3"><a href="#">Product3</a></li>
    <li id="product4"><a href="#">Product4</a></li>
  </ul>
 </aside>
</body> 
```

任何人都可以在这里帮我吗...这对我很有帮助..我正在为 Drop Event 苦苦挣扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:00:24.250

我犯过的错误

我在单击时创建了一个 DOM 元素（这是放置区域），并且在您单击触发器之前，该元素不在您的页面中。通过`$('#shoppingCart ol').droppable({...})`在`$(document).ready(function() {})`块中执行，您尝试添加`droppable`一个甚至不在您的页面中的元素，所以这不会做任何事情。

变化

我所做的是在创建该元素`droppable` **后** 制作该元素

```
$("button[id='columnadd']").click(function () {
  // create the element
  var domElement = $('<aside id="shoppingCart' + i++ + '" class="shoppingCart"><h2 class="ui-widget-header">Add Menu Items Here</h2><aside class="ui-widget-content" id="droppable"><ol><li class="placeholder">Add your items here</li></ol></aside></aside>');

  // put it after $(this)
  $(this).after(domElement);
  // at this point you have domElement in your page

  // make it droppable
  domElement.find("ol").droppable({
    // put options here
    greedy: true,
    drop: function (event, ui) {
      makeItDroppableToo(event, ui, this);
    }
  });
}); 
```

这是使您删除的元素具有自己的占位符的功能

```
function makeItDroppableToo(e, ui, obj) {
  $(obj).find(".placeholder").remove();

  var placeholder = $("<ol><li class='placeholder'>You can also drop it here</li></ol>");
  $("<li></li>").append(ui.draggable.text()).append(placeholder).appendTo($(obj));

  // this is the same as the previous one
  placeholder.droppable({
    // put options here
    greedy: true,
    drop: function (event, ui) {
      makeItDroppableToo(event, ui, this);
    }
  });
} 
```

# jquery - 如何检查满足我条件的元素是否是其容器内的第一个元素？

> ID：13115939
> 
> 赞同：2
> 
> 时间：2012-10-29T04:41:02.343
> 
> 标签：jquery

考虑这个标记：

```
<div class="click">click</div>
<div class="container">
<div>
<div data-attr="color">blue</div>
<div data-attr="color">red</div><!-- this is the only n-th child div to be red -->
<div data-attr="color">red</div>
<div data-attr="color">red</div>
</div>
</div>

<div class="click">click</div>
<div class="container">
<div>
<div data-attr="color">blue</div>
<div data-attr="color">red</div><!-- this is the only n-th child div to be red -->
<div data-attr="color">red</div>
<div data-attr="color">red</div>
</div>
</div> 
```

这个脚本：

```
<script>
    $(document).ready(function () {
        $('.click').click(function () {
            $('.container div').each(function (i) {
                if ($(this).attr('data-attr') == "color" && $(this).html() == "red" && $(this).prevUntil('.container').filter(function (i) {
                    return $(this).attr('data-attr') == "color" && $(this).html() == "red"
                }).length == 0) {
                    $(this).css('color', 'red');
                }
            });
        });
    });
</script> 
```

也就是说，我希望匹配元素只有在它是第一个时才为红色。我的问题是我被限制使用另一个结构的脚本，所以只有`ThisIsFirstInsideItsClosestParentContainer`其中的一部分`if()`必须重写，而这个脚本的其余部分必须保持不变。

```
<script>
    $(document).ready(function () {
        $('.click').click(function () {
            $('div').filter(function (i) {
                return $(this).attr('data-attr') == "color" && $(this).html() == "red"
            }).each(function (i) {
                if (ThisIsFirstInsideItsClosestParentContainer) {
                    $(this).css('color', 'red');
                }
            });
        });
    });
</script> 
```

此外，我非常不喜欢在我的情况下使用 prevUntil() ，但我还没有找到另一种方法。那么，`ThisIsFirstInsideItsClosestParentContainer`不使用 prevUntil() 应该是什么样子？

**编辑**
请告诉我为什么这不起作用

```
<!DOCTYPE html>
<html>
<head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function () {
    $('.click').click(function () {
        $('.container [data-attr]').filter(function (i) {
            return $(this).attr('data-attr') == "color" && $(this).html() == "red"
        }).each(function (i) {
            if ($(this).index() == 0) {
                $(this).css('color', 'red');
            }
        });
    });
});
</script>

</head>
<body>
<div class="click">click</div>
<div class="container">
<div>
<div data-attr="color">blue</div>
<div data-attr="color">red</div><!-- this is the only n-th child div to be red -->
<div data-attr="color">red</div>
<div data-attr="color">red</div>
</div>
</div>

<div class="click">click</div>
<div class="container">
<div>
<div data-attr="color">blue</div>
<div data-attr="color">red</div><!-- this is the only n-th child div to be red -->
<div data-attr="color">red</div>
<div data-attr="color">red</div>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:00:26.870

试试这个 **[演示](http://jsfiddle.net/pintu31/prY8Q/2/)**

```
$('.click').click(function () {
   $('.container div[data-attr="color"]:contains("red")').first().css('color','red');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:43:37.203

```
if($(this).is($(this).parent().find('div:first'))){ 
```

# parallel-processing - 使用 MPI 发送/接收对象数组

> ID：13115942
> 
> 赞同：1
> 
> 时间：2012-10-29T04:41:50.217
> 
> 标签：parallel-processing, mpi

是否可以使用 MPI_Bcast、MPI_Scatter 和 MPI_Gather 发送/接收 C++ 对象和对象数组。如果是，那么哪种 MPI 数据类型用于对象？例如，我有一个名为 cell 的类。

```
class cell
{
private:        
  int abc;
  double xyz;

public:
    cell(){ }                
     ...
}; 
```

在主函数中，我想创建一个类单元格的对象数组，并希望作为对象数组发送/接收。例如，

```
void main ()
{
...
    cell** cells = new cell*[someVar];
        for(int i = 0; i < someVar; ++i) 
        {
            cells[i] = new cell[someVar];
        }
MPI_Bcast(cells, someVar, ???, 0, MPI_COMM_WORLD);
...
} 
```

我们如何定义 MPI 数据类型来发送/接收对象数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T20:42:04.083

查看 MPI_Pack / MPI_Unpack 机制。在发送端，您将元素填充到包缓冲区中，然后发送；接收方将其逐个组件地解包。这提供了如此可爱的可能性，例如首先解包一个整数，告诉您有多少后续双精度要解包。这种方法的一大优点是它适用于只能通过迭代器等间接访问的对象。

# ruby-on-rails - Ruby on Rails 脚手架开发插件

> ID：13115943
> 
> 赞同：2
> 
> 时间：2012-10-29T04:41:53.180
> 
> 标签：ruby-on-rails, scaffolding

Eclipse 中是否有任何用于 Rails 开发的插件。正如我们在 .Net MVC 中看到的那样，我可以在其中设计自己的脚手架模板

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:57:19.513

我可以在您的问题中看到两个部分。

**首先**，您正在寻找一个在 Rails 上工作的 Eclipse 插件。我会为此推荐[**Aptana Studio**](http://www.aptana.com/products/studio3)。它只是 eclipse 的一个定制版本，对于 Rails 开发非常方便。您将在现场拥有控制台和其他有用的工具。

**其次**，您要自定义脚手架模板。这里有几个链接可能会有所帮助。虽然我自己没有尝试过。您可以在处理这些问题时分享任何特定的困难。

*   [http://zigzag.github.com/2010/01/18/customizing-your-scaffold-template-become-easier-in-rails3.html](http://zigzag.github.com/2010/01/18/customizing-your-scaffold-template-become-easier-in-rails3.html)
*   [http://spilth.org/notes/rails3-custom-scaffolding/](http://spilth.org/notes/rails3-custom-scaffolding/)
*   [http://edgeguides.rubyonrails.org/generators.html#customizing-your-workflow](http://edgeguides.rubyonrails.org/generators.html#customizing-your-workflow)

我错过了您问题的任何特定部分吗？

# mapping - 错误映射不相交的外键

> ID：13115946
> 
> 赞同：1
> 
> 时间：2012-10-29T04:42:13.990
> 
> 标签：mapping, entity-relationship, disjoint-sets

在映射超类、子类关系

参与约束 - 部分不相交约束 - 不相交

我们是否必须将外键从孩子映射到父母？如果我们不这样做，为什么不呢？

# c# - 注册表中 UnistallString 的用途是什么

> ID：13115948
> 
> 赞同：1
> 
> 时间：2012-10-29T04:42:26.733
> 
> 标签：c#, .net, registry, installation, installshield

有谁知道注册表中 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall{xxxx}-->UninstallString 的用途？

我的印象是添加/删除程序使用它通过 MsiExec 卸载任何应用程序。但事实并非如此，添加/删除程序不使用它。添加/删除程序是否有任何其他与此类似的注册表值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:21:10.597

Windows Installer 程序包是一种被忽略的特殊情况。对于所有其他包类型，这`UninstallString`是用于执行卸载的命令。对于 Windows 安装程序包，默认命令将卸载 MSI 包，但可能只是为了向后兼容读取卸载键的其他应用程序，因为添加/删除程序会忽略它。有关变通办法的一些背景信息，请参阅[WIX 生成的 MSI 的自定义卸载程序。](https://stackoverflow.com/a/1826857/89999)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:57:08.483

[根据 MSDN](http://msdn.microsoft.com/en-us/library/ms954376.aspx)（加上[另一篇更现代的文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372105%28v=vs.85%29.aspx)），这些注册表项完全用于添加/删除程序功能的目的。

# php - div中的文本不会进入下一行

> ID：13115949
> 
> 赞同：4
> 
> 时间：2012-10-29T04:42:39.763
> 
> 标签：php, html, css

出于某种原因，我的 div 中的文本没有转到下一行，我尝试了几种不同的 CSS 元素，这些元素似乎不起作用.... word-wrap:break word，只是混淆了字母...

我想要的是一个有一个额外的词它会像它应该的那样下降到下一行

这是它所在的 div

```
 #top7 {
        width: 150px;
        height:auto;
        margin: 5px;
        display: block;
        float: left;
        word-wrap:break-word;
     } 
```

它所在的文本

```
#p6 {
   font-family: Myriad Pro;
   margin: 1px;  
   font-size: 22px;
   background-color:#540f45;
   padding: 5px 5px 3px 4px;
   margin:4px;
}

a {
  text-decoration: none;
  color: white;
  text-align: right;
  font-family: Myriad Pro;
} 
```

这是从数据库中检索数据的 php 函数

```
<p id='p6'><?php echo "<a href='' "</a>"; ?></p> 
```

这都包含在这两个 id 中

```
body {
   background:#603e4f;
   display: block;

}

#foursquare {
    background-color:#603e4f;    width: 290px;
    display: block;
    position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T04:55:42.603

生成的代码中没有空格，在元素之间添加一些（而**不是** `&nbsp;`）

```
<p6 id="a2"><a href=http://classm8.net/retrieveclasslist.php?className=CSC130>CSC130</a></p6><p6 id="a2"><a href=http://classm8.net/retrieveclasslist.php?className=MATH100>MATH100</a></p6><p6 id="a2"><a href=http://classm8.net/retrieveclasslist.php?className=HINF130>HINF130</a></p6><p6 id="a2"><a href=http://classm8.net/retrieveclasslist.php?className=HINF200>HINF200</a></p6> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-13T13:12:17.017

您必须将“display:flex”与自动换行一起使用。

```
#top7 { 
  word-wrap: break-word;
  display:flex;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T04:57:43.843

创建一个适当的类并摆脱 p6 元素。显然你会使用你的数据库生成的 HTML。我只是用你的价值观作为小提琴的例子。此外，由于您无论如何都将元素包装在 ap 标签中，因此除非您希望数据对于单个标签而言太长，否则 break 是毫无意义的。段落自动换行。

```
<div id="top7">
<p class="six"><a href="#">CSC110</a></p>
<p class="six"><a href="#">MATH100</a></p>
<p class="six"><a href="#">HINF130</a></p>
<p class="six"><a href="#">CSC110</a></p>
<p class="six"><a href="#">HINF200</a></p>

</div>​

.six {
  font-family: Myriad Pro;
  margin: 1px;  
  font-size: 22px;
  background-color:#540f45;
  padding: 5px 5px 3px 4px;
  margin:4px;
} 
```

[http://jsfiddle.net/calder12/5crqT/](http://jsfiddle.net/calder12/5crqT/)

# java - 在 Struts2 JSP 中获取 Map 的值

> ID：13115950
> 
> 赞同：1
> 
> 时间：2012-10-29T04:42:52.183
> 
> 标签：java, jsp, servlets, map, struts2

我在应用程序/服务器启动期间将值映射加载到 ServletContext

```
HashMap<String, List<String>> cfsUfsMap = new HashMap<String, List<String>>();
//some operations
application.setAttribute("UDM_UFS_CFS_MAP", cfsUfsMap); //application = ServletContext 
```

我需要在 JSP 页面中直接使用这个地图，为此我已经这样做了

```
<s:set name="udm_cfs_ufs_map" value="#application.UDM_UFS_CFS_MAP" />
<table class="first" width="100%" border="0" cellpadding="0" id="sups_assignedservices_info_table">
<tr>
    <th width="30%">Assigned service name </th>
    <th width="15%">CFS Code </th>
    <th width="15%">Status </th>
    <th width="20%">Date </th>
    <th width="20%">UDM </th>
</tr>
<s:iterator value="#sups_services.services">
    <s:set name="ufs_list" value="#udm_cfs_ufs_map.['top.code']" /> 
    <tr>                
        <td class="light"><s:property value="top.name"/> </td>
        <td class="light"><s:property value="top.code"/> </td>
        <td class="light"><s:property value="top.status"/> </td>
        <td class="light"><s:property value="top.date"/> </td>  
        <td class="light"><s:property value="#udm_cfs_ufs_map.size()" /> - <s:property value="#ufs_list.size()" /></td>
    </tr>   
</s:iterator> 
```

如您所见，我正在尝试使用 top.code 的键从地图中获取值（列表）但是我得到的是原始地图大小，而不是基于键的列表大小。

知道缺少什么/出了什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T05:30:52.893

Done.

I solved it myself. I am posting my mistakes and the correct solution. SO down the line it might be useful to someone

to access servletContext attributes

```
<s:set name="udm_cfs_ufs_map" value="#application.UDM_UFS_CFS_MAP" /> 
```

for fetching the content from the map based on key

```
<s:iterator value="#sups_services.services">
<s:set name="ufs_list" value="#udm_cfs_ufs_map[top.code]" />
<tr>
    <td class="light"><s:property value="top.name" /></td>
    <td class="light"><s:property value="top.code" /></td>
    <td class="light"><s:property value="top.status" />
    </td>
    <td class="light"><s:property value="top.date" /></td>
    <td class="light"><s:iterator value="ufs_list">
            <s:property />
            <br />
        </s:iterator></td>
</tr> 
```

# perl - 无法打开文件 perl

> ID：13115952
> 
> 赞同：1
> 
> 时间：2012-10-29T04:42:56.400
> 
> 标签：perl, xslt, libxslt

我正在尝试将 plist 文件转换为 JUnit 样式的 XML。我有一个将 plist 转换为 JUnit/ANT XML 的 xsl 样式表。

这是我运行以将 plist 转换为 XML 的 perl 代码：

```
my $parser = XML::LibXML->new();
my $xslt = XML::LibXSLT->new();
my $stylesheet = $xslt->parse_stylesheet_file("\\\~/Hudson/build/workspace/ui-automation/automation\\\ test\\\ suite/plist2junit.xsl");

my $counter = 1;
my @plistFiles = glob('Logs/*/*.plist');
foreach (@plistFiles){
    #Escape the file path and specify abosulte path
    my $plistFile = $_;
    $plistFile =~ s/([ ()])/\\$1/g;
    $path2plist = "\\\~/Hudson/build/workspace/ui-automation/automation\\\ test\\\ suite/$plistFile";
    #transform the plist file to xml
    my $source = $parser->parse_file($path2plist);
    my $results = $stylesheet->transform($source);

    my $resultsFile = "\\\~/Hudson/build/workspace/ui-automation/automation\\\ test\\\ suite/JUnit/results$counter.xml";
    #create the output file
    unless(open FILE, '>'.$resultsFile) {
    # Die with error message
    die "\nUnable to create $file\n";
    }

    # Write results to the file.
    $stylesheet->output_file($results, FILE);
    close FILE;
    $counter++;
} 
```

在 Hudson/Jenkins 上运行 perl 脚本后，它会输出以下错误消息：

> 无法打开 ~/Hudson/build/workspace/ui-automation/automation\test\suite/Logs/Run\1/Automation\Results.plist：没有这样的文件或目录

该错误是由`my $source = $parser->parse_file($path2plist);`代码中引起的。我无法弄清楚为什么它无法找到/读取文件。

任何人都知道可能导致错误的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:06:40.623

错误消息中提到的路径存在三个明显的错误。

```
~/Hudson/build/workspace/ui-automation/automation\ test\ suite/Logs/Run\ 1/Automation\ Results.plist 
```

那些是：

1.  当前目录中没有指定`~`目录。也许你的意思是使用`$ENV{HOME}`那里的价值？
2.  磁盘上的任何地方都没有命名目录`automation\ test\ suite`，但可能有一个名为`automation test suite`.
3.  同样，`Run\ 1`磁盘上的任何地方都没有命名目录，但可能有一个名为`Run 1`.

# git - git索引损坏

> ID：13115956
> 
> 赞同：3
> 
> 时间：2012-10-29T04:43:40.947
> 
> 标签：git, indexing, corrupt

出于某种原因，我的 Git 索引文件不断损坏。

例如，如果我这样做，`git status`我会得到

> 错误：坏索引文件 sha1 签名和致命：索引文件损坏

这已经发生在我身上好几次了。我在想这可能与我的开发环境有关。我在 Mac 上工作，并且有一个 VMWare 虚拟机，它运行带有 Apache MySQL、PHP 和 Git 的 Debian。我使用 Samba 连接到 vm 以在我的 IDE 中编辑我的文件。所以我认为这与桑巴舞有关？有没有更好的连接/共享工作空间的原因？

问题是我什至不知道如何重新创建问题，我尝试了各种方法来打开和关闭编辑和关闭，重新启动，但仍然没有运气。

但是我突然意识到我突然又得到了错误。我目前的工作是删除索引文件 .git/index 并执行 git reset。

有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:11:34.743

Your workaround is a good one (recommended at "[“Index file corrupt”</a>").](https://stackoverflow.com/questions/1115854/index-file-corrupt)

 [But if samba is problematic, it would be best to get *two* repos:](https://stackoverflow.com/questions/1115854/index-file-corrupt) 

[](https://stackoverflow.com/questions/1115854/index-file-corrupt)
*   [one on the Mac, where you can:](https://stackoverflow.com/questions/1115854/index-file-corrupt)
    [*   *locally* edit your files](https://stackoverflow.com/questions/1115854/index-file-corrupt)
    *   [setup a](https://stackoverflow.com/questions/1115854/index-file-corrupt) [Git server](https://stackoverflow.com/a/10888536/6309) (got daemon, ssh, https, ...)
*   one on the VM, where you can pull from the Mac repo and update your working repo there (on the VM) in order to run your PHP site.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T01:27:12.127

不过你应该检查[一下](https://stackoverflow.com/a/1115956/3763032):) 做一点`git reset --keep`。@VonC 推荐的那个！

# eclipse - 部署struts 2应用程序的困难

> ID：13115957
> 
> 赞同：0
> 
> 时间：2012-10-29T04:43:43.023
> 
> 标签：eclipse, struts2

我是 struts2 的初学者，我从网站下载的 struts2 项目很少，但它们都是作为简单的 java 项目而不是 web 项目创建的，所以我无法通过 Eclipse 将它们部署在我的 Tomcat 或 JBoss AS 服务器上。

如何在 Java EE 服务器上部署简单的 java 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T05:42:21.933

您最好的选择是从 Struts2 官方网站下载[示例应用程序](http://struts.apache.org/download.cgi#struts2341)并将它们部署在您选择的任何服务器上。这些示例应用程序还附带所有必需的依赖项，让您了解 S2 应用程序的结构以及流程和配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T14:20:08.557

我创建了一个类似于网站上显示的结构并手动添加了所有需要的文件并且它工作。

# servlets - 使用 java servlet 向任何网站发送邮件

> ID：13115959
> 
> 赞同：1
> 
> 时间：2012-10-29T04:44:08.703
> 
> 标签：servlets, jakarta-mail

我在 java servlet 中使用 javamail api 来发送邮件。它将邮件仅发送到 gmail ID 的接缝，而我希望它能够发送到任何电子邮件 ID。我在这里需要不同的财产价值吗？我按照[http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)开发代码。属性值为：

props.setProperty("mail.smtp.host", "smtp.gmail.com");

props.setProperty("mail.smtp.port", "587");

props.setProperty("mail.smtp.auth", "true");

props.setProperty("mail.smtp.starttls.enable", "true");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:51:51.717

不，无需更改您拥有的配置，在这里它将充当服务器（Gmail），您可以从那里将邮件发送到任何邮件服务器（雅虎、hotmail 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T04:57:07.407

您可以将邮件发送到任何电子邮件 ID。**您可以在TO**地址或**CC**或**BCC**中提及它们，检查您的身份验证是否正确。

这是现有帖子中的详细示例[如何从 jsp/servlet 发送电子邮件？](https://stackoverflow.com/questions/3757442/how-to-send-an-email-from-jsp-servlet)

希望这可以帮到你

# plone - 如何获取签入文件的集合？

> ID：13115961
> 
> 赞同：0
> 
> 时间：2012-10-29T04:44:20.840
> 
> 标签：plone

如何获取在任何时间点处于“签入”状态的文件集合？使用克隆 4.1。签入不是工作流状态。它是一个用户在编辑时锁定的文件，因此其他用户在前者通过“签入”解锁文件之前无法访问最新副本。我想知道我是否可以有一个集合来显示所有已锁定文件的列表，即“签出”或在任何时间点具有“签入”状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:05:19.157

**由于签入的对象与“正常”的已发布对象**无法区分，因此可能没有简单的方法来创建这样的集合。

想到了一些解决方法：

*   **通过在私有状态**中搜索其 id 以“copy_of”开头的对象来查找已签出的对象

*   检查“已发布”对象。

*   创建一个包含附加“签入”状态的自定义工作流，并（以某种方式）将签入状态用于已签出并至少签回一次的对象。

这些都不是特别有吸引力，因此目录搜索可能是您最好的选择：

```
>>> [brain.getObject().getId() for brain in portal.portal_catalog(
    review_state="published")]
['front-page', 'news', 'aggregator', 'events', 'aggregator', 'Members'] 
```

如果您愿意，可以将其与所有对象的列表进行比较：

```
>>> [brain.getObject().getId() for brain in portal.portal_catalog()]
['front-page', 'news', 'aggregator', 'events', 'aggregator', 'Members',
    'copy_of_front-page'] 
```

您不需要以编程方式执行此操作，只是想演示搜索已发布对象与搜索所有对象之间的区别。后者返回一个额外的签出对象（处于私有状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:58:50.327

使用这种方法是可能的：

*   通过著名的架构扩展器向所有 ATCT 添加一个新字段“有工作副本”。
*   在目录中注册该字段，以使其可用于集合。
*   监听事件处理程序以在创建工作副本时将该字段设置为 true，在它被签出或取消时设置为 False。

我为此写了一个包，因为我很快就需要它来做一个项目：[adi.workingcopyflag](http://pypi.python.org/pypi/adi.workingcopyflag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:06:28.827

由于签入/签出状态未在 portal_catalog 中编制索引，因此无法使信息对集合可用。

# android - SimpleCursorAdapter LoaderManager

> ID：13115964
> 
> 赞同：2
> 
> 时间：2012-10-29T04:45:15.177
> 
> 标签：android, sqlite, simplecursoradapter

我正在使用 API 15，SimpleCursorAdapter 不再工作，我想使用 LoadManager，但是当我查看 Android 开发人员网站上的示例时，示例开头为：SimpleCursorAdapter mAdapter; 由于不推荐使用 SimpleCursorAdapter，我该如何使用 LoadManager。我一直找不到任何例子。将我的 sqllite 数据放入列表视图的唯一另一种方法是创建一个适配器并将数据逐个记录加载到列表记录中，然后使用 setAdapter。如果有人知道使用 LoadManager 的任何示例，我将不胜感激，谢谢。

# dci - DCI 上下文的责任？

> ID：13115968
> 
> 赞同：2
> 
> 时间：2012-10-29T04:46:08.110
> 
> 标签：dci

有方法的角色包含实际的算法，但是上下文执行方法除了执行其中一种方法之外应该做什么？

```
public class SomeContext
{
    // ... Constructor omitted ...

    public void Execute()
    {
        // Is this all?
        someRole.DoStuff(this.anotherRole, this.otherData);
    }
} 
```

看起来很简单，所以我认为 Context 应该负责例如数据库查找。这不会简化有条理的角色吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T05:09:34.363

上下文的主要职责是将角色绑定到对象。有时一种或多种“执行”方法会很复杂，但通常并非如此。他们在那里捕捉对象之间的交互

角色与对象的绑定是原子的。它发生在上下文中的一个位置，同时适用于所有角色。

# mysql - 在 Mysql 事件中进行选择和更新

> ID：13115970
> 
> 赞同：1
> 
> 时间：2012-10-29T04:46:19.913
> 
> 标签：mysql, sql

我正在 mysql 事件中进行选择，然后尝试使用来自该选择的数据更新另一个表。但它似乎不起作用。

我正在做：

```
BEGIN
select read_pub_id, read_artc_id, count(read_artc_id) as times_read from reads_t GROUP BY read_pub_id, read_artc_id;
update reads_totals set read_total = times_read where pub_id = read_pub_id and artc_id = read_artc_id;
update reads_totals set ts=now(); /*This is for testing*/
END 
```

只有 ts 得到更新。这意味着该事件正在运行。

这里是否要添加一个while循环，如何添加？这样做的正确方法是什么？

我之前与此相关的问题在这里：

[https://stackoverflow.com/questions/13110393/doing-a-count-along-with-distinct-to-check-number-of-times-a-post-was-read](https://stackoverflow.com/questions/13110393/doing-a-count-along-with-distinct-to-check-number-of-times-a-post-was-read "上一个问题")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T04:51:33.327

你的意思：

```
UPDATE reads_totals T
SET read_total = (SELECT count(read_artc_id) 
                  FROM reads_t R 
                  WHERE R.read_pub_id = T.pub_id 
                  AND R.read_artc_id = T.artc_id); 
```

此查询虽然会更新中的*每一行*，`reads_totals`但我不确定这是否真的是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T04:52:29.753

```
 select read_pub_id, read_artc_id, count(read_artc_id) as times_read from reads_t 
 GROUP BY read_pub_id, read_artc_id;
 update reads_totals
 set read_total = (select count(read_artc_id) from reads_t rt 
 where pub_id = rt.read_pub_id 
 and artc_id = rt.read_artc_id); 
```

# postgresql - 使用集成安全连接到 PostgreSQL 或回退到公共登录

> ID：13115977
> 
> 赞同：2
> 
> 时间：2012-10-29T04:46:54.870
> 
> 标签：postgresql, windows-authentication, npgsql, sspi, integrated-security

我正在使用 Npgsql，我想知道是否有一种方法可以使用自动回退到公共登录的集成安全性连接到 PostgreSQL 服务器？或者也许还有另一种方法可以做我想要实现的目标。

我有一个使用 Windows 身份验证的 ASP.NET 网站 (IIS7.5)，并且我已将 PostgreSQL 配置为允许通过 SSPI 访问，只要数据库中有一个名称正确的角色，它就可以正常工作。该网站可供 Intranet 上的每个人查看，但有些用户有一些其他人不应该具备的额外能力（或可以查看额外数据）。

目前，我正在使用以下内容：

```
NpgsqlConnectionStringBuilder csb = new NpgsqlConnectionStringBuilder();

csb.Pooling = false; // if true, causes intermittent DB connection issues
csb.Database = "dbname";
csb.Host = "192.168.1.100";
csb.IntegratedSecurity = true;

dbconn.ConnectionString = csb.ConnectionString;

try
{
    dbconn.Connect();
}
catch (NpgsqlException ex)
{
    if (/* check for authentication failed */)
    {
        csb.IntegratedSecurity = false;
        csb.UserName = "www-read";
        dbconn.ConnectionString = csb.ConnectionString;
        dbconn.Open();
    }
} 
```

这工作正常，除了每次回退到“www-read”角色时，它都会添加一个关键日志条目，说明存在身份验证错误。我能看到的唯一方法总是通过 www-read 连接并查询是否存在合适的集成安全角色并重新连接，但这似乎比上述更麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:35:51.207

我在您的代码中没有看到任何密码。您是否使用任何安全措施？

如果您不想将密码嵌入到您的源代码中（这是正确的），您应该`~/.pgpass`在您的主目录（`%appdata%/postgresql/pgpass.conf`在 Windows 上）中创建具有 1 行或更多行的文件，如下所示：

```
hostname:port:database:username:password 
```

这将允许任何使用 libpq（包括 npgsql）的程序在任何连接尝试时从 .pgpass 中查找密码。

如果这将在 www-data 用户下运行，则应在其主目录中创建 .pgpass（但请确保将您的 Web 服务器配置为永远不提供此文件！）

我认为这样做也应该解决您似乎拥有的连接池问题。

# c++ - 使用 Python.h 未定义符号进行 C++ 编译

> ID：13115988
> 
> 赞同：1
> 
> 时间：2012-10-29T04:48:39.040
> 
> 标签：c++, python, gcc, python-2.7

因此，我一直在尝试将 Python.h 用于我想从事的一个看起来很 /simple/ 的小项目。但在开始之前，我想尝试学习如何使用 Python.h。所以我在网上找到了这个小例子。

```
#include "Python/Python.h"  

int main(int argc, char** argv)  
{  
    Py_Initialize();  
    PyRun_SimpleString("print 'Test'");  
    PyRun_SimpleString("print str(3 + 5)"); 
    Py_Exit(0);  
} 
```

看起来很简单。当我第一次使用

```
gcc test.cpp 
```

编译，我得到了一些未定义的符号。我很快发现我应该使用

```
-lpython2.7 
```

然后我发现我也可以使用

```
-L/Library/Frameworks/Python.framework/Versions/2.7/lib/ 
```

那没有用（我确保 /Library/Frameworks/Python/Versions/2.7/lib/ 存在）我被卡住了，我该怎么办？我明白了

```
Undefined symbols:
  "_Py_Initialize", referenced from:
      _main in ccoUOSlc.o
  "_PyRun_SimpleStringFlags", referenced from:
      _main in ccoUOSlc.o
      _main in ccoUOSlc.o
  "___gxx_personality_v0", referenced from:
      _main in ccoUOSlc.o
      CIE in ccoUOSlc.o
  "_Py_Exit", referenced from:
      _main in ccoUOSlc.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

编辑：我刚刚尝试使用 -Framework 参数，并尝试在 -L 之后添加 -l python2.7 参数，现在我得到了

```
Undefined symbols:
  "___gxx_personality_v0", referenced from:
      _main in ccfvtJ4j.o
      CIE in ccfvtJ4j.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T05:49:54.973

如果您在 OS X 上使用 Python 框架安装，因为它看起来是基于路径的，您可以使用`-framework`Apple 编译器驱动程序的参数：

```
cc test.cpp -framework Python 
```

或者，您可以显式指定目录路径和库名称：

```
cc test.cpp -L /Library/Frameworks/Python.framework/Versions/2.7/lib/ -l python2.7 
```

更新：使用您在评论 ( `Xcode 3.2.6`, `gcc-4.2`) 中报告的配置，您似乎需要显式`c++`调用`gcc`. 任何一个：

```
g++ test.cpp -framework Python 
```

或者

```
c++ test.cpp -framework Python 
```

应该管用。

# c++ - 守护多线程服务器

> ID：13115989
> 
> 赞同：0
> 
> 时间：2012-10-29T04:48:47.697
> 
> 标签：c++, c, multithreading

我正在编写一个必须在守护程序模式下运行的多线程 Web 服务器。我已经编写了代码，但是在守护程序模式下运行时程序会崩溃。如果我不包含用于守护服务器的代码，则程序运行良好。谁能告诉我哪里出错了？

```
pid_t pid,cid;
pid = fork();
if(pid<0)
{
exit(EXIT_FAILURE);
 }
if(pid>0)
{
    exit(EXIT_SUCCESS);
 }
umask(0);
cid=setsid();
std::cout<<"Process id after:"<<pid<<std::endl;
std::cout<<"Session id:"<<cid<<std::endl;
close(STDIN_FILENO);
close(STDOUT_FILENO);
close(STDERR_FILENO);

pthread_t t1,t2;
pthread_t threads[threadnum];
pthread_attr_t attr;
if ((s = socket(AF_INET, soctype, 0)) < 0) {
    perror("socket");
    exit(1);
}
pthread_attr_init(&attr);
pthread_create(&t1,NULL,setup_server,NULL);  // thread for accepting the requests
pthread_create(&t2,NULL,scheduler,NULL);     // thread for scheduling the requests 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:30:11.230

以下代码行的目的是什么：

```
if(pid>0)
{
    exit(EXIT_SUCCESS);
} 
```

如果您需要子进程立即退出，那么根本不要分叉您的程序。

另外，请发布函数 setup_server() 和 scheduler() 以帮助您完成程序。

# c - 从引导加载程序调用 32 位或 64 位程序

> ID：13115992
> 
> 赞同：3
> 
> 时间：2012-10-29T04:49:50.303
> 
> 标签：c, assembly, bootloader

互联网上似乎有很多关于编写以下 3 个引导加载程序的相同信息：

1.  无限循环`jmp $`
2.  打印单个字符
3.  打印“你好世界”。

这太棒了，我已经轻松完成了这 3 个变体。

我想用 C 语言编写一些 32 位或 64 位代码并对其进行编译，然后从引导加载程序中调用该代码......基本上是一个引导加载程序，例如，将计算机设置为运行一些简单的数值模拟。例如，我将从列出素数开始，然后可能是用户的一些输入/输出，以计算傅里叶变换。我不知道。

我还没有找到*任何*关于如何做到这一点的信息，但我什至在开始之前就已经预见到了一些问题。

首先，编译 C 程序会将其编译为几个不同文件之一，具体取决于*目标*. 对于 Windows，它是一个 PE 文件。对于 Linux，它是一个 .out 文件。这些文件都完全不同。在我的例子中，目标不是 Windows 或 Linux，它只是我在引导加载程序中编写的任何内容。

其次，实际代码将驻留在哪里？引导加载程序正好是 512 字节，但我用 C 编写的程序肯定会编译成更大的东西。它需要放在我的（虚拟）硬盘上，可能在某种文件系统中（我什至还没有定义！），我需要在考虑执行之前将此文件中的信息加载到内存中它。但据我了解，这一切都比 12 行“Hello World”引导加载程序复杂很多很多数量级。

所以我的问题是：如何从我的 16 位引导加载程序调用大型 32 位或 64 位程序（用 C/C++ 编写）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T04:58:43.033

**这是一个巨大的话题。**

您可能应该从学习进入和了解[保护模式](http://en.wikipedia.org/wiki/Protected_mode)开始。

# c# - 外键导致 WCF 套接字连接中止

> ID：13115993
> 
> 赞同：1
> 
> 时间：2012-10-29T04:49:52.883
> 
> 标签：c#, wcf, sockets, linq-to-sql

我有 2 个表，单元和子单元，具有一对多的关系：一个单元可以有 0 个或多个子单元。

我在 WCF Windows 服务中使用 Linq to SQL（.dbml 文件）来访问数据库。

使用服务客户端，我调用任何方法来检索单元或子单元，它工作正常......只要数据库中没有子单元（子单元表中的 0 行）。

如果有 1 个或多个子单元，则在调用相同的方法时会出现以下错误：

*   **“套接字连接被中止......”**
*   内部异常“读取操作失败，请参阅内部异常。”
*   内部异常“套接字连接被中止......”
*   内部异常**“现有连接被远程主机强行关闭”**

我已经删除了表并重新创建了它们，我已经将 Unit/SubUnit 表重新添加到 DBML，重新安装了服务等。我以前从未遇到过这个问题。

我了解“套接字中止”错误可能是由于尝试通过 WCF 传递过多数据而导致的，但目前数据库中有 1 个单元和 1 个子单元，但我仍然收到此错误！

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T14:03:00.797

您需要添加 [DataContract(IsReference = true)] attr。到您的实体。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-14T23:36:44.110

一旦我在 wcf 服务中使用实体框架时在 db 上引入了外键，使用 wcf 客户端就会出现完全相同的错误/问题。

实体框架的服务器端调用和业务逻辑与 FK 一起工作得很好，但客户端在连接到服务时被炸毁（返回列表）。

我正在使用 .edmx 以及 EF 5.x DBContext Generator。

我不得不关闭所有导航属性的延迟加载。

即在我的模型模板中，删除模板中的“虚拟”关键字：

```
public string AccessibilityAndVirtual(string accessibility)
    {
        return accessibility + (accessibility != "private" ? " virtual" : "");
    } 
```

看到[很棒的帖子！](http://msdn.microsoft.com/en-us/data/jj574232#eagerLevels)

# powershell - 使用参数和管道执行命令

> ID：13115994
> 
> 赞同：3
> 
> 时间：2012-10-29T04:50:09.730
> 
> 标签：powershell

我正在尝试在 PowerShell 脚本中执行以下命令

```
C:\PATH TO GPG\gpg.exe --output OUTPUTFILE.csv --batch --passphrase-fd 0 --decrypt C:\PATH TO INPUT\INPUTFILE.txt < C:\PATH TO PASS\Passphrase.txt 
```

当我将命令的各个部分分配给变量然后将它们组合在命令变量中并尝试按如下方式执行它时：

```
$decryptCommand = "${gpg} --output ${dateStamp}.csv --batch --passphrase-fd 0 --decrypt ${fileName} < ${passphraseFile}"
&$decryptCommand 
```

我收到以下错误：

```
The term 'XXXX' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or if a path was included, verify that the path is correct and try again. 
```

我试图用单引号和双引号将命令的各个部分括起来，但我尝试过的任何方法似乎都不起作用。

我应该做些什么来从 PowerShell 脚本执行这个命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:04:10.557

你的脚本有几个问题。首先，您不需要用`{}`, secon 包围变量 - 您必须单独传递参数，如下所示：

```
&$gpg --output $dateStamp.csv --batch --passphrase-fd 0 --decrypt $fileName < $passphraseFile 
```

我唯一不确定的是`<`符号。可能是您需要使用它来逃避它的情况`'`

# ruby-on-rails - Rails MetaSearch 不能使用 or 语句来组合 2 个条件

> ID：13115998
> 
> 赞同：0
> 
> 时间：2012-10-29T04:50:23.563
> 
> 标签：ruby-on-rails, meta-search

目前我正在使用元搜索 gem，但我不知道如何为搜索表单中的一个元素添加 2 个条件。

这是我的代码

```
f.select :market_product_status_equals, {}.tap { |h| 
  MarketProduct.status.each { |key,value| 
    h[key]= value
  } 
}, :include_blank => true 
```

我想拥有`market_product_status_equals`或`:market_product_status_is_null`

我试着这样做

```
f.select :market_product_status_equals_or_is_null, {}.tap { |h| 
  MarketProduct.status.each{ |key,value| 
    h[key]= value
  } 
}, :include_blank => true 
```

但它不起作用

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:49:30.667

1.  多少代码来做到这一点！您可以很容易地从数组中获取哈希：

    ```
    f.select :market_product_status_equals, Hash[MarketProduct.status], :include_blank => true 
    ```

2.  如果可用的匹配器不符合您的需求，只需定义您自己的匹配器，如[http://erniemiller.org/projects/metasearch/#customizing](http://erniemiller.org/projects/metasearch/#customizing)