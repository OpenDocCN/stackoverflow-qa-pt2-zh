# StackOverflow 问答 15171000-15171999

# function - GLSL 顶点着色器导致颜色闪烁或全红

> ID：15171003
> 
> 赞同：0
> 
> 时间：2013-03-02T05:14:01.567
> 
> 标签：function, opengl, fixed, vertex-shader

我正在为（*来了*）家庭作业编写我的第一个顶点着色器，但无法使其正常运行。

我需要实现一个顶点着色器（并且只有一个顶点着色器），而不是完全模仿 openGL 中的固定功能管道顶点着色器，并使用 FFP 片段着色器（所以不为 FS 编写任何内容）。我知道内置的统一变量，我正在使用它们根据 openGL 照明方程计算顶点的最终颜色。为了便于阅读，我重命名了一些值（normal 和 lightVec 已标准化）：

```
 //given as part of the assignment, not modifable
    vec4 position = gl_ModelViewMatrix * gl_Vertex;
    gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;

    //my (partial) code below here

    lightVec = (lightPos - position).xyz;
    distance = length(lightVec);
    vec3 normal = gl_NormalMatrix * gl_Normal;

    //I've stored a lot of the values in variables I defined locally
    //to make the code easier to read.
    //eg - constAtten = gl_LightSource[].constantAttenuation

    atten = 1/max((constAtten + distance*linearAtten + distance*distance*quadAtten),1); 
    ambient = ambInt * matAmbInt * atten;
    diffuse = difCol * matDifInt * max(dot(normal, lightVec),0.0) * atten;
    specular = specInt * matSpecInt * atten * pow(max(dot(normal, (gl_LightSource[i].halfVector).xyz),0.0), gl_FrontMaterial.shininess); 
```

我正在为场景中的每个灯光求和环境光、漫反射和镜面反射，并将其存储为“总和”，然后是：

```
 gl_FrontColor = gl_FrontMaterial.emission + sum;
    gl_FrontColor.a = 1.0; 
```

结果是每次我移动场景的相机时都会疯狂闪烁颜色。这是openGL v1.2。

编辑：图片链接

[http://i305.photobucket.com/albums/nn208/wolverine1190/shadercomp_zpsc546ac31.png](http://i305.photobucket.com/albums/nn208/wolverine1190/shadercomp_zpsc546ac31.png)

每当我移动相机时，左侧的颜色都会改变。这是否可能表明计算不正确的法线，或者可能是我不应该在某处使用的相机坐标？

==================================================== ================

# **解决**

我已经解决了这个问题。不完全确定为什么它现在有效，但确实有效。我废弃了所有内容，并使用相同的方法和计算从头开始重新编写代码。我做的不同的是：

1）我用构造函数设置值，而不仅仅是赋值。例如 - 我没有 vec3 test = someOtherVec3，而是做了 vec3 test = vec3(someOtherVec3)。

2) 规范化时，我将变量的规范化结果分配给自身，而不是仅仅调用 normalize()。例如 - 而不是 normalize(normal), normal = normalize(normal);

3）我在每一步直接添加到 gl_FrontColor ，而不是在 sum 中存储中间值并在最后将 sum 添加到 gl_FrontColor 。

除此之外，一切都保持不变。我不能确定为什么会解决问题，所以如果有人知道，请发表评论并给出解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:04:41.210

根据您的描述，我想知道您的颜色是否溢出。如果您尝试：

```
 gl_FrontColor = clamp(gl_FrontMaterial.emission + sum, 0.0, 1.0); 
```

# ember.js - 如何在 ember 路由器中使用非 id 动态段？

> ID：15171004
> 
> 赞同：2
> 
> 时间：2013-03-02T05:14:02.043
> 
> 标签：ember.js, ember-router

我有一个关于 ember 路由器中基于非 id 的动态段的问题。我正在使用 Ember.VERSION ：1.0.0-rc.1

我有一个嵌套资源，我需要在路径中使用 url 参数而不是 id。但是对 json api 的 ajax 调用需要请求一个 id。

所以在我的车把模板中，我有：

```
{{#each thing in controller}}
    {{#linkTo 'thing' thing.url}}{{thing.name}}{{/linkTo}}
{{/each}} 
```

事物路线如下所示：

```
App.ThingsRoute = Ember.Route.extend({ 
    model: function() {
        return App.Thing.find(); 
    }
}); 
```

和路由器：

```
App.Router.map(function() {
    this.resource('things', function() {
        this.resource('thing', {path:':thing_url'}); 
    });
}); 
```

如何映射 url 以解析事物 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:52:52.960

弗雷德是对的。模型钩子接受一个 params 参数。这是一个更完整的例子。

```
App.ThingRoute = Ember.Route.extend({
  model: function(params) {
    return App.Thing.find(params.thing_url);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T13:55:45.540

如果您已经加载了所有`Thing`s 那么您可以使用`all`方法来检索所有现有模型和[`findProperty`](http://emberjs.com/api/classes/Ember.Enumerable.html#method_findProperty)方法来通过特定属性查找数组项：

```
App.ThingRoute = Ember.Route.extend({
    model: function(params) {
        return App.Thing.all().findProperty('url', params.thing_url);
    }
}); 
```

请注意，如果未加载所需的模型，这将不起作用 -如果模型不在数组中并且不会生成对服务器的请求，则`findProperty`返回。`undefined`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T05:22:40.220

模型方法有一个传入的参数，在这种情况下是thing.url，所以你应该能够在那里访问它。

在此处阅读动态模型部分 [http://emberjs.com/guides/routing/specifying-a-routes-model/](http://emberjs.com/guides/routing/specifying-a-routes-model/)

# ruby-on-rails - CanCan 似乎忽略了块

> ID：15171005
> 
> 赞同：0
> 
> 时间：2013-03-02T05:14:05.140
> 
> 标签：ruby-on-rails, cancan

我正在使用**cancan** gem，但遇到了一些问题。我写了一些简单的测试，但对于没有分配角色的用户来说失败了。可以看出，在Ability 类中，我试图说一个用户只有具有:admin 角色才能管理其他用户。正如评论所指出的，该块永远不会被调用。

当您将块传递给罐头时，在罐头宝石中？方法它将它添加到规则中，然后在您调用 can? 方法，**除非**传入的对象的类是Class。因此，当我执行下面的测试时，它失败了，因为我传递了一个 User 和 User.class == Class。

```
it { should_not be_able_to(:create, User) }
or
it "cannot create a User" do
  expect(ability.cannot? :create, User).to be_true
end 
```

考虑到这一点，如果我编写一个测试特定用户的测试，则测试通过：

```
it { should_not be_able_to(:edit, FactoryGirl.create(:user) ) }   # passes, but... 
```

但是，当您列出或创建：

```
it { should_not be_able_to(:create, FactoryGirl.create(:user) ) }  # yuck 
```

我想你可以使用

```
it { should_not be_able_to(:create, User.new ) }  # but that is still full of suck 
```

参考代码：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new

    can :manage, User do |u|
      # this block never gets called
      user.has_role? :admin
    end
  end
end

describe "user without roles" do
  subject { ability }
  let(:ability) { Ability.new create(:user) }

  it { should_not be_able_to(:manage, User) }  # passes
  it { should_not be_able_to(:index, User) }   # all the rest fail
  it { should_not be_able_to(:new, User) }
  it { should_not be_able_to(:edit, User) }
  it { should_not be_able_to(:create, User) }
  it { should_not be_able_to(:update, User) }

end

# CANCAN CODE
# https://github.com/ryanb/cancan/blob/c88cb8f4593148f99e15627d23fbf67116dd8be2/lib/cancan/can_definition.rb#L32
def matches_conditions?(action, subject, extra_args)
  if @match_all
    call_block_with_all(action, subject, extra_args)

  ## The condition in question, this is where I should go to
  ## subject -> User
  ## User.class -> Class
  elsif @block && !subject_class?(subject)
    @block.call(subject, *extra_args)
  elsif @conditions.kind_of?(Hash) && subject.kind_of?(Hash)
    nested_subject_matches_conditions?(subject)
  elsif @conditions.kind_of?(Hash) && !subject_class?(subject)
    matches_conditions_hash?(subject)
  else
    @base_behavior
  end
end

# User class returns true
def subject_class?(subject)
  (subject.kind_of?(Hash) ? subject.values.first : subject).class == Class
end 
```

由于康康舞很受欢迎，我把钱放在我做错事的事实上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:36:25.187

看起来下面的代码是我在能力类中应该有的：

```
can :manage, User if user.has_role? :admin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T12:55:58.717

你不使用 |u| 在你的街区：

```
can :manage, User do |u|
  u.has_role? :admin
end 
```

尝试使用[https://gist.github.com/fotinakis/3a532a0929f64b4b5352](https://gist.github.com/fotinakis/3a532a0929f64b4b5352)进行测试。它们将如下所示：

```
context "user without roles" do
  it "can view everything" do
    expect(@guest).to have_ability(:read, for: "all")
  end

  it "cannot edit or delete anything" do
    expect(@guest).to_not have_ability(:manage, for: "all")
  end
end 
```

# javascript - onclick 不使用按钮

> ID：15171008
> 
> 赞同：11
> 
> 时间：2013-03-02T05:14:24.470
> 
> 标签：javascript

我正在尝试使 javascript 函数在按下搜索按钮时工作，但该函数似乎没有运行。请指导。[小提琴](http://jsfiddle.net/X5fRC/)。

```
<form action="" method="get" id="searchform" >
    <input name="q" type="text" id="search" size="32" maxlength="128" class="txt"/>
    <input type="submit" id="hit" value="Search" onclick="myFunction()" class="btn"/>
</form> 
```

继承人的JS，

```
function myFunction() {
 alert("I am an alert box!");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-02T05:28:58.880

您已将函数包装在正文中`onLoad`，只需将其更改为 no wrap-in `<head>`。看到[这个](http://jsfiddle.net/X5fRC/3/)小提琴。

```
function myFunction() {
    alert("I am an alert box!");
}

};
^^ 
```

`};`您的代码中还有一个额外的内容，

**更新：**

发生这种情况是因为：

*   如果函数放在里面`$(document).ready`，那么它只能**在准备好的回调**中使用（以及在内部对象中）。你不能在外面引用它。

*   但是如果你把它放在 ready 函数之外，那么**它会得到全局作用域**，即你可以从任何地方调用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T05:22:21.843

以下对我有用：

```
 <form action="" method="get" id="searchform" >
          <input name="q" type="text" id="search" size="32" maxlength="128" class="txt"  >
          <input type="submit" id="hit" value="Search" onclick="myFunction()" class="btn">
        </form>
        <script>
           function myFunction() {
              alert("I am an alert box!");
           }
        </script> 
```

但我注意到您`};`的问题末尾有一个 - 也许这就是导致语法错误的原因？

**更新：**

问题是（除了`};`）与您的提琴手的设置有关。看看**[这个](http://jsfiddle.net/X5fRC/8/)**！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T05:17:53.400

在我看来，您的 JavaScript 文件中某处很可能存在语法错误。我之所以这么说是因为没有什么可以阻止使用您显示的代码出现警报。

检查浏览器的错误控制台（IE 和 Chrome 中的 F12）并查看是否有任何错误，因为这些将停止定义函数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-02T05:20:26.990

我看了看你的小提琴，它有一个额外的封闭括号。这应该有效。

```
 function myFunction() {
    alert("I am an alert box!");
    return false;
 }; 
```

你的小提琴看起来像这样：

```
 function myFunction() {
    alert("I am an alert box!");
    } 
}; 
```

**编辑 1：** 我添加了一个`return false`，因为用户不想提交表单。

**编辑2：**

由于没有人想解释 JS Fiddle 的问题，我会尝试一下。

在原始 JS Fiddle 中，“onLoad”用于侧边栏菜单的第二个下拉菜单。

此设置不起作用的原因是 JS Fiddle 在 onload 函数中执行 javascript 代码。这意味着 myFunction 超出范围。

这就是为什么您需要在下拉菜单中使用“不换行”和“不换行”选项的原因。通过使用这两个选项，您的函数`myFunction`将在全局范围内。

我希望这能澄清事情。

**编辑 3**

如果您确实想使用 onload 事件。您可以添加一个单击事件处理程序，并`onclick`在您的提交按钮标记中删除该属性。

一般来说，使用 javascript 设置事件处理程序可能会更好。

```
document.getElementById('hit').addEventListener('click', function() {
    alert("I am an alert box!");
}); 
```

如果你想使用 jQuery，你可以这样做：

```
$('#hit').click(function() {
    alert("I am an alert box!");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-26T21:25:33.060

将您的功能放在`try-catch`块中...应该可以工作

```
function myFunction() {
    try {    
        alert("I am an alert box!");
        //enter code here
        return false;
    }
    catch (err) {
        txt = "There was an error on this page.\n\n";
        txt += "Error description: " + err.message + "\n\n";
        txt += "Click OK to continue.\n\n";
        alert(txt);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-02T08:49:05.653

```
<input type="button" id="hit" value="Search" onclick="myFunction()" class="btn"/> 
```

# ajax - 用户填写表单时在后台获取内容

> ID：15171016
> 
> 赞同：0
> 
> 时间：2013-03-02T05:15:52.093
> 
> 标签：ajax, forms, node.js, embedly

当用户以我拥有的表单输入有效 URL 时，我使用嵌入来获取 URL 的缩略图（如果存在）。我现在正在考虑两种方法。

选项 1\. 在 URL 字段的模糊事件上，进行 URL 验证，如果它通过验证，则在幕后使用嵌入来 ajaxily 返回缩略图 URL。如果它返回一个，则将其粘贴到隐藏输入字段中的表单中。

选项 2。当他们发布表单时，然后处理它。

选项 3\. ??? 有没有更好的办法？

两种方法都将在服务器上使用 node.js 完成，但我想知道这里最好的方法是什么。我的意图是不让用户等待甚至可能不存在的东西（即如果没有返回缩略图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T18:07:51.540

选项#1，因为它允许用户查看他们发布的内容。

我们构建了一个库来处理这种情况：[http ://embedly.github.io/jquery-preview/demo/](http://embedly.github.io/jquery-preview/demo/)

# xcode - -Wformat=2 有什么作用？

> ID：15171017
> 
> 赞同：5
> 
> 时间：2013-03-02T05:16:14.717
> 
> 标签：xcode, warnings, clang, string-formatting, compiler-warnings

我在网上看到很多关于`-Wformat=2`Clang 选项的提及，有时与已知的选项并列`-Wformat`（Xcode 将其列为“对`printf`/的 Typecheck 调用`scanf`，尽管它现在涵盖了更多的字符串格式化 API）。

*   这有什么作用吗？
*   如果确实如此，那么它的作用与 有什么不同（如果有的话）`-Wformat`？
*   两者兼有是否有用，或者其中一个是另一个的超集？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T08:54:33.390

> 如果有，它与 -Wformat 有什么不同（如果有的话）？

它是从 GCC 借来的，因为它被设计为合适的替代品。[GCC 的描述](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#Warning-Options)：

> **-W格式=2**
> 
> *启用 -Wformat 以及 -Wformat 中未包含的格式检查。目前相当于`-Wformat -Wformat-nonliteral -Wformat-security -Wformat-y2k'。*

这回答了你的大部分问题。

> 这有什么作用吗？

是的。以下程序根据 的存​​在（或不存在）发出不同的警告`-Wformat=2`：

```
__attribute__((__format__ (__printf__, 1, 2)))
static void F(const char* const pString, ...) {
}

int main(int argc, const char* argv[]) {
    F("", 0);
    F(argv[0], 0);
    const char str[] = "aaa";
    F(str, 0);
    F("%i", 0);
    F("%i");
    return 0;
} 
```

注意：看起来 Clang`-Wformat-security`卷入`-Wformat`.

最后，我没有测试过`-Wformat-y2k`，但它被 GCC 定义为：

> **-Wformat-y2k**
> 
> *如果指定了 -Wformat，还会警告可能只产生两位数年份的 strftime 格式。*

# c# - JSON反序列化C#

> ID：15171019
> 
> 赞同：1
> 
> 时间：2013-03-02T05:16:29.087
> 
> 标签：c#, json, deserialization, javascriptserializer

我正在尝试解析从 RottenTomatoes 检索到的一些 JSON 格式的信息

```
{
    "cast": [
        {
            "id": "162655641",
            "name": "Tom Hanks",
            "characters": [
                "Woody"
            ]
        },
        {
            "id": "162655909",
            "name": "Tim Allen",
            "characters": [
                "Buzz Lightyear"
            ]
        },
        {
            "id": "162655020",
            "name": "Joan Cusack",
            "characters": [
                "Jessie the Cowgirl"
            ]
        },
        {
            "id": "162672460",
            "name": "Ned Beatty",
            "characters": [
                "Lots-o'-Huggin' Bear",
                "Lotso"
            ]
        },
        {
            "id": "162657445",
            "name": "Richard Kind",
            "characters": [
                "Bookworm"
            ]
        },
        {
            "id": "162654813",
            "name": "Erik von Detten",
            "characters": [
                "Sid"
            ]
        },
        {
            "id": "770713272",
            "name": "James Anthony Cotton",
            "characters": []
        }
    ],
    "links": {
        "rel": "http://api.rottentomatoes.com/api/public/v1.0/movies/770672122.json"
    }
} 
```

我只是想让这段代码工作，但我得到一个 InvalidOperationException 并且这个错误“类型'System.String'不支持数组的反序列化。”

这是我的主要代码

```
string json = File.ReadAllText("json.txt");

CastInfo castMember = new JavaScriptSerializer().Deserialize<CastInfo>(json); 
```

这是我的课

```
public class CastInfo
{
    public List<CustomCastInfo> cast { get; set; }
}
public class CustomCastInfo
{
    public string id { get; set; }
    public string name { get; set; }
    public List<string> characters { get; set; }

} 
```

和建议？而且我意识到我需要对底部的“链接”做一些事情，但即使我删除它仍然不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:44:56.180

我刚刚尝试使用您提供的 json 运行它，并且效果很好。

```
using System.Collections.Generic;
using System.IO;
using System.Web.Script.Serialization;

namespace JsonDeserialization
{
    class Program
    {
        static void Main(string[] args)
        {
            string json = File.ReadAllText("json.txt");

            CastInfo castMember = new JavaScriptSerializer().Deserialize<CastInfo>(json);
        }
    }

    public class CastInfo
    {
        public List<CustomCastInfo> cast { get; set; }
    }
    public class CustomCastInfo
    {
        public string id { get; set; }
        public string name { get; set; }
        public List<string> characters { get; set; }

    }

} 
```

# javascript - 如何通过授权信息选择性地允许跨域资源共享？

> ID：15171021
> 
> 赞同：1
> 
> 时间：2013-03-02T05:16:31.267
> 
> 标签：javascript, http, authentication, cross-domain, cors

我服务的一些用户希望能够通过浏览器中的 javascript 访问我们的 REST API（需要用户凭据）。由于与违反同源策略相关的所有漏洞，我通常不会允许这样做。但是，如果特定用户需要它并了解正在发生的事情......我希望将他添加到“可以进行跨源请求”白名单中。

但是，我无法弄清楚如何根据 http 授权信息有选择地返回 Access-Control-Allow-Origin 标头。

如果我在 javascript 中执行此操作：

```
$.ajax({'url':'url', 'beforeSend': function (xhr) { xhr.setRequestHeader("Authorization", "Basic " + 'base64encodedcreds' ) } }) 
```

浏览器首先发送一个没有 Authorization 标头的 ORIGIN METHOD 请求。因此，我无法知道是否应该在响应中包含 Access-Control-Allow-Origin。

xmlhttprequest 中是否有一些设置可以让它发送带有授权的 ORIGIN？还是有另一种方法可以选择性地授予跨域访问权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:44:33.953

没有办法绕过这种行为——传递授权标头是 AAAO 试图限制的行为之一。但你可以回避它：

*   为此用户创建一个单独的端点 URL。
*   让这个端点总是返回一个`Access-Control-Allow-Origin`允许访问的。（管他呢。）
*   让此端点也始终为您尝试允许的用户以外的任何用户返回 401（未授权）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T01:20:10.367

根据duskwuff的回答，这是不可能的，我采取了这条接近路线而不必创建新的网址：

*   始终接受带有 access-control-allow-origin 的选项查询
*   如果 GET/POST 进入，请检查选项标题。如果用户未列入白名单，请检查用户凭据和 401。

（使用 django 中间件很容易实现）

# svn - 在 VS 2012-SVN 的解决方案资源管理器中的每个文件上显示问号图标

> ID：15171022
> 
> 赞同：1
> 
> 时间：2013-03-02T05:16:37.260
> 
> 标签：svn, visual-studio-2012, tortoisesvn

我在 VS 2012 中使用 Tortoise SVN。共有 3 个用户使用相同的解决方案并使用 SVN。其中一位用户在项目中添加了新文件，当我采用最新版本的解决方案时，它会在每个新添加的文件前面显示问号图标。什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-04T12:55:44.787

只需右键单击文件并选择

```
Tortise Svn → Add(to subversion) → OK 
```

# service - 领域驱动设计中的服务

> ID：15171025
> 
> 赞同：1
> 
> 时间：2013-03-02T05:17:10.490
> 
> 标签：service, domain-driven-design, repository-pattern

我对 DDD 中的服务有点困惑。

首先。为什么服务总是表示为接口？这是规定吗？

为什么服务只包含一种方法？有时在单个类中实现相关方法是有意义的。

我必须为每个存储库提供服务吗？我一定是做错了什么，因为我发现自己在为 CRUD 操作提供服务。

例如，我有一个使用常用方法的存储库。如何控制对存储库中持久化对象的访问？我倾向于使用多种阅读方法来提供服务。这些服务可以检查用户角色，然后决定用户是否可以使用这些对象。我觉得我的设计有些地方不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T17:29:38.673

我假设您在谈论域服务。DDD 中还有其他类型的服务，例如应用程序服务和基础设施服务。

> 首先。为什么服务总是表示为接口？这是规定吗？

不，这不是规则。仅在需要时才创建接口抽象。

> 为什么服务只包含一种方法？有时在单个类中实现相关方法是有意义的。

可以将具有单个方法的服务视为实现单个操作 - 单个用例。如果将多个操作封装在一个对象中是有意义的，那么这也是可以接受的。但是，将多个职责合并到一个类中通常会导致违反 SRP。

> 我必须为每个存储库提供服务吗？

不，存储库已经是一种服务。更具体地说，可以将存储库实现视为基础设施服务。

它是调用存储库以实现某些用例的应用程序服务。它委托给域实体并协调给定操作可能需要的其他服务。查看[DDD](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)中的服务，了解各种服务交互的示例。

# android - 为什么，android中的资源在R.java中被转换为HEXA-DECIMAL

> ID：15171028
> 
> 赞同：8
> 
> 时间：2013-03-02T05:17:40.143
> 
> 标签：android, r.java-file

为什么，资源被转换成 HEXAdecimal，它是否会创建一些快速访问您的资源的应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-02T07:45:55.270

R.java 只不过是一个类文件，其中包含项目中每个资源的静态常量。常量是一个有效文件系统的索引号。所以 myicon.png 被赋予了 12345 的文件号。资源管理器使用这个索引在运行时加载资源。打开它。看一看。

让我们看一个示例 R.java：

```
public final class R {
    public static final class id {
        public static final int myTextView=0x7f090008;
    } 
} 
```

我可以使用以下方法引用 myTextview：

```
findViewById(R.id.myTextView) - constant
findViewById(0x7f090008) - hex
findViewById(2131296264) - decimal
findViewById(017702200010) - octal
findViewById(0b1111111000010010000000000001000) - binary 
```

它们都是等价的。

同样，我可以像这样编写我的 R.java 文件：

```
public final class R {
    public static final class id {
        public static final int myTextView=0b1111111000010010000000000001000;
    } 
} 
```

它仍然有效。

没有什么是“转换”的，您只是使用一个常量来引用索引号。编译器会处理它。您只是碰巧将其视为十六进制，但最终，就像您的应用程序中的所有内容一样，它只是一个和零。

这样做的唯一原因是您*可以*使用常量。想象一下，如果您必须使用实际的索引值来维护您的代码，特别是考虑到它们可能会在您每次重建 R.java 时发生变化。

索引号不是内存地址、偏移量或一种特殊的奶酪。它们只是由编译器生成的常量，使您能够使用人类友好的名称访问资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T05:22:02.527

R.java 文件由 Android 资源管理器**Android 资产管理器打包程序 (aapt.exe)**生成，其中包含对您应用的所有资源的引用。每个引用都是一个唯一的 id（public static final int）。这些常量以十六进制格式写入 R.java 文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-02T05:24:06.320

从 android 的角度来看，这是一种架构。当您开发 Android 应用程序并只是构建代码（未安装在设备/模拟器上）时，资源管理器会为所有资源分配唯一地址。一旦应用程序安装在设备上，实际的内存分配就会发生，这个文件将帮助 Android 映射它所需的实际内存。

希望这能回答你的问题

# sql - SQL 以 '= ALL' 样式获取行

> ID：15171029
> 
> 赞同：3
> 
> 时间：2013-03-02T05:17:45.323
> 
> 标签：sql, sql-server-2008-r2, match

我在表 Product_Category (MSSQL 2008 r2) 中有简单的多对多关系：

```
CREATE TABLE #Product_Category (ProductId int, CategoryId int);
go
INSERT INTO #Product_Category (ProductId, CategoryId)
VALUES (1, 200);
go
INSERT INTO #Product_Category (ProductId, CategoryId)
VALUES (2, 200);
go
INSERT INTO #Product_Category (ProductId, CategoryId)
VALUES (2, 400);
go
INSERT INTO #Product_Category (ProductId, CategoryId)
VALUES (3, 300);
go
INSERT INTO #Product_Category (ProductId, CategoryId)
VALUES (2, 300);
go
DROP TABLE #Product_Category 
```

如何选择具有以下条件的 ProductId：CategoryId = 200*和*CategoryId = 300*和*CategoryId = 400？

查询示例（下面的sql不起作用）：

```
SELECT ProductId FROM #Product_Category
WHERE CategoryId = ALL (select 200 union select 300 union select 400) 
```

**我期望结果：ProductId = 2**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:17:31.797

```
select PC.ProductId
from #Product_Category as PC
where PC.CategoryId in (200, 300, 400)
group by PC.ProductId
having count(distinct PC.CategoryId) = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:47:16.937

这里我使用的是 CTE，但您可以使用表变量或其他用于`category_filter`.

```
with category_filter as (
    select * from (values (200), (300), (400)) as v(id)
)
select distinct ProductId
from #Product_Category
join category_filter
    on (#Product_Category.CategoryId = category_filter.id)
group by ProductId
having COUNT(distinct CategoryId) = (select COUNT(*) from category_filter) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:24:01.903

更新：它仍然很丑，但它确实有效：

```
SELECT DISTINCT master.ProductId
FROM #Product_Category master
JOIN (
    SELECT ProductId, 
           cat200 = max(case when CategoryId=200 then 1 else 0 end),
           cat300 = max(case when CategoryId=300 then 1 else 0 end),
           cat400 = max(case when CategoryId=400 then 1 else 0 end)
   FROM #Product_Category
   GROUP BY ProductId
) sub ON sub.ProductId = master.ProductId
WHERE cat200=1
  and cat300=1
  AND cat400=1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T05:24:15.220

尝试这个

```
SELECT a.ProductId 
    FROM Product_Category as a, 
        Product_Category as b, 
        Product_Category as c 
        WHERE a.CategoryId = 200 
            And b.`CategoryId` = 300 
            And c.`CategoryId` = 400 
            And a.`ProductId` = b.`ProductId` 
            And b.`ProductId` = c.`ProductId` 
```

更多像 500 和 600

```
SELECT a.ProductId 
    FROM Product_Category as a, 
        Product_Category as b, 
        Product_Category as c,
        Product_Category as d,
        Product_Category as e,
        WHERE a.CategoryId = 200 
            And b.`CategoryId` = 300 
            And c.`CategoryId` = 400 
            And d.`CategoryId` = 500 
            And e.`CategoryId` = 600 
            And a.`ProductId` = b.`ProductId` 
            And b.`ProductId` = c.`ProductId`
            And c.`ProductId` = d.`ProductId`
            And d.`ProductId` = e.`ProductId` 
```

检查现场演示[http://sqlfiddle.com/#!2/8965e/1/0](http://sqlfiddle.com/#!2/8965e/1/0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T18:41:39.300

```
WITH L AS (
SELECT *
  FROM (VALUES (200),(300),(400)) AS T(CategoryId)
)
SELECT ProductId
  FROM Product_Category P
 INNER JOIN L
    ON L.CategoryId = P.CategoryId
 GROUP BY ProductId
HAVING COUNT(1) = (SELECT Count(1) FROM L)
; 
```

如果您打算使用 TVP，则 WITH 会消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T11:18:41.717

您可以将值用作表源并在 WHERE 子句中使用 NOT EXISTS 和[EXCEPT](http://msdn.microsoft.com/ru-ru/library/ms188055.aspx)运算符检查它们

```
SELECT *
FROM #Product_Category p
WHERE NOT EXISTS (                                                        
                  SELECT Match
                  FROM (VALUES(200), 
                              (300),
                              (400))
                  x(Match)
                  EXCEPT
                  SELECT CategoryId
                  FROM #Product_Category p2
                  WHERE p.ProductID = p2.ProductID
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/e9534/1)上的演示[](http://sqlfiddle.com/#!3/e9534/1)

 *** * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T06:43:50.550

也是丑陋的解决方案:)

```
WITH category_filter1(CategoryId) AS (
    SELECT * FROM (VALUES (200), (300), (400)) tmp1(tmp2)
)
SELECT p.ProductId
FROM (
    SELECT ProductId,
        CASE WHEN CategoryId IN (SELECT CategoryId FROM category_filter1) THEN 1 ELSE 0 END f
    FROM #Product_Category
    ) p
GROUP BY p.ProductId, p.f
HAVING COUNT(*) = (SELECT COUNT(*) FROM category_filter1); 
```**

# c - 在 C 中以样式打印

> ID：15171034
> 
> 赞同：-7
> 
> 时间：2013-03-02T05:18:14.307
> 
> 标签：c, design-patterns, printing, numbers, output

如何在 C 中获得以下输出：

```
1    2    3    2    1
4    5    6    5    4
7    8    9    8    7
10   11   12   11   10
13   14   15   14   13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:21:15.183

`printf`与格式参数一起使用`%-5d`。一个字一个字，意思是：

*   `%`: 引入格式说明符而不是文字文本。
*   `-`: 左对齐。
*   `5`：填充到 5 列。
*   `d`: 打印以 10 为底的整数（**十进制**）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:36:08.827

这取决于您的代码是什么。

也许你只想做

```
printf("1 2 3 2 1\n 4 5 6 5 4\n7 8 9 8 7\n10 11 12 11 10\n13 14 15 14 13\n") 
```

但这是另一种方式

```
#include <stdio.h>
int main(void)
{
    int x = 1;
    int a;
    for(int f = 0; f < 4; f++)
    {
        for(a = x; a < x + 2; a++)
            printf("%d ", a);
        x = a;
        for(int a = x; a > x - 3; a--)
            printf("%d ", a);
        printf("\n");
        x++;
    }
} 
```

# java - 使一切都非静态

> ID：15171035
> 
> 赞同：0
> 
> 时间：2013-03-02T05:18:18.583
> 
> 标签：java, static

作为一种习惯，我通常避免在我的 java 项目中将事物保存在静态方法中以进行测试和易于使用。然而，在过去，我不得不使用围绕我的主类旋转的静态和非静态方法的混乱组合，因为我只知道创建类的非静态实例的一种方法。通常，我将其作为全局变量执行，而不是在每个方法中加载类方法。

例如，假设我有 MainGUI 和 ProjMain 类。在 ProjMain 中，我使用全局变量：

```
private MainGUI gui = new MainGUI(); 
```

这很好用，但是如果我想从 MainGUI 类访问 ProjMain 类中的方法，我自然也会这样做。

```
private ProjMain project = new ProjMain(); 
```

在此，我创建了一个 StackOverflowError。有没有一种简单的方法可以将类的实例作为变量获取，而不必将变量放在单独的方法中而不是全局方法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:35:55.037

气垫船的解决方案非常好，这里我有另一个给你：

如果你有很多类相互引用，你应该考虑为它们提取一个更高的层，更高的层类应该是这样的：

```
class HigherLayer {
    public void dosomething(ProjMain pm, MainGUI  mg){
         pm.hello(mg);
         mg.bye(pm);
    }
} 
```

并从 ProjMain 和 MainGUI 中删除全局变量，以减少它们的耦合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:22:09.553

您的类相互引用，这是可以的，但如果每个类都创建对另一个的新引用，则不会这样做，因为这只会导致无限递归，其中一个创建另一个实例，这会创建第一个实例，它创建了另一个的实例，它创建了第一个的实例，它创建了另一个的实例，......等等......

为了解决这个问题，让一个对象创建另一个对象，但只需通过它的构造函数或 setter 方法将对自身的引用传递给另一个对象*。*

比如第一堂课：

```
public class FirstClass {
   private SecondClass secondClass;

   public FirstClass() {
     secondClass = new SecondClass(this);
} 
```

和其他班级

```
public class SecondClass {
   private FirstClass firstClass;

   public FirstClass(FirstClass firstClass) {
     this.firstClass = firstClass;
} 
```

# java - 在java中解码Mp3文件

> ID：15171036
> 
> 赞同：1
> 
> 时间：2013-03-02T05:18:42.617
> 
> 标签：java, mp3

我正在尝试在 java 中为桌面设计类似 Shazam 的应用程序。我从具有格式 **采样率 = 44100、采样大小为比特 = 16、通道 = 1、签名 = true 和 bigendian = true 的麦克风获取输入。**并执行 FFT。类似地创建 MP3 歌曲数据库我正在**以与麦克风输入相同的格式解码 MP3 文件**。这个过程给了我太多的样本，这减慢了 mp3 文件的 FFT 过程。

所以我的疑问是我该如何处理这个问题。

# php - 想升级我用 mysql* 编写的数据库类。接下来我应该使用什么？

> ID：15171037
> 
> 赞同：1
> 
> 时间：2013-03-02T05:18:42.673
> 
> 标签：php, mysql, database, pdo, mysqli

我是一名中级开发人员，直到今天，我有一个使用几年前编写的已弃用 mysql* 函数的数据库类。我想升级它，但在我选择一些东西之前，我想了解一下stackoverflow。

我之前有两个选择。MySQLi 和 PDO。最近，一位资深开发人员告诉我彻底删除我的数据库类，学习 Doctrine DBAL 并使用它。

我不太了解 Doctrine DBAL。对于我的迷你框架来说，这会不会有些过头了？

我应该选择和使用什么，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:20:59.973

PDO 完全没问题。教义臃肿而缓慢。除了可怕的经历外，我什么都没有，并且找不到任何充分的理由在 PDO 上使用它。DBAL != ORM。DBAL 是数据库抽象层。PDO 是数据访问层。无论如何，PDO 是一个很棒的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:24:27.377

谢谢你的好问题。

首先，关于 MySQLi 与 PDO 的问题。
如果您正在为自己的班级寻找新的基地

*   如果您要使用本机准备好的语句，PDO 是唯一的选择，因为 mysqli 对它们的实现是可怕的。
*   如果您在旧的基于 mysql 的类中已经有自己的占位符 - mysqli 会更容易过渡。

如果您正在寻找全新的类，PDO 又是唯一的选择，因为它具有一些抽象功能，使其使用起来更容易，并且生成的代码大大缩短。最近我[为 PDO 标签写了一个 wiki，](https://stackoverflow.com/tags/pdo/info)解释了它的一些特性（以及缺陷）——你可能会发现它很有用。
但是，它缺少许多重要功能。所以，手工制作的助手类仍然是最好的选择。

如果您还没有实现占位符，我建议您使用现成的课程，因为占位符必须是此类课程的主要原因。
我让[SafeMysql](https://github.com/colshrapnel/safemysql)牢记 3 个目标：安全、DRY 代码和易用性。
我希望你喜欢类型提示占位符的想法。

至于学说——我个人不喜欢*这种*抽象程度。我更喜欢尽可能接近 SQL。只有几个安全助手和更少的代码。

关于所有这些性能的东西的注释。
我从未见过 DBAL 会成为瓶颈的应用程序。因此，任何（想象的）性能问题都必须是您最不关心的问题。
使用实际数据在实时环境中进行的真实分析是唯一可靠的证明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:22:11.427

世界上绝对没有理由不使用 MySqli 或 PDO——无论你觉得哪个最舒服。

恕我直言...

PS：我也从未听说过“Doctrine DBAL”:)

PPS：另一个抽象层通常意味着更臃肿、性能下降和灵活性降低。更不用说学习曲线了。坚持使用 PDO 或 MySqli 的所有很好的理由。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T05:27:32.880

如果这仅适用于 MySQL，请使用 mysqli，因为它比 PDO 稍微快一些（稍微意味着最多 10%）。如果您想使用 Doctrine DBAL 的额外功能，例如事务或类型转换，您可以尝试一下。如果不是，请继续使用 PDO，因为它比 Doctrine DBAL 快得多（最多 10 倍）并且使用更少的内存。

# apache-flex - 在flex中为特定列的数据网格实现水平滚动条

> ID：15171038
> 
> 赞同：0
> 
> 时间：2013-03-02T05:18:47.663
> 
> 标签：apache-flex, datagrid, horizontal-scrolling

如何在flex中为特定列的数据网格实现水平滚动条？假设我有一列，其行显示特定的渲染图形组件。如果它超过列宽，那么如何为该特定列设置滚动条？如果我设置 Horizo​​ntalScrollPolicy="on" 然后它为整个数据网格设置水平滚动条。我想要特定的专栏。可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:24:13.113

您尚未指定使用哪个版本的数据网格组件（mx 或 spark）。以下是它们的示例。我使用了一个简单的文本作为滚动列的内容。无论内容是什么，都可以使用这种方法。

![在此处输入图像描述](../Images/152fa6c2db1ba4a0998b7e6d7b391c27.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]private var collection:ArrayCollection = new ArrayCollection([
            {field01:"field01", content:"your content your content your content your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"}
        ]);
    ]]>
</fx:Script>

<s:VGroup x="10" y="10">

    <!-- the new Spark DataGrid -->

    <s:DataGrid 
        width="300" height="180" 
        rowHeight="50" 
        dataProvider="{collection}">

        <s:columns>
            <s:ArrayList>   
                <s:GridColumn dataField="field01" headerText="Field 1"/>
                <s:GridColumn dataField="content" headerText="Content" width="100">
                    <s:itemRenderer>
                        <fx:Component>
                            <s:GridItemRenderer>
                                <s:Scroller width="100%" height="100%">
                                    <s:HGroup width="100%" height="100%" verticalAlign="middle">
                                        <s:Label text="{data.content}" width="300"/>
                                    </s:HGroup>
                                </s:Scroller>

                            </s:GridItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>
                </s:GridColumn>
                <s:GridColumn dataField="field02" headerText="Field 2" width="100"/>
            </s:ArrayList>                  
        </s:columns>                
    </s:DataGrid>

    <!-- the old MX DataGrid -->
    <mx:DataGrid
        width="300" height="180" 
        rowHeight="50" 
        dataProvider="{collection}">
        <mx:columns>
            <mx:DataGridColumn dataField="field01" headerText="Field 1" width="100"/>

            <mx:DataGridColumn dataField="content" headerText="Content" width="100">
                <mx:itemRenderer>
                    <fx:Component>
                        <mx:HBox width="100%" >
                            <mx:Label text="{data.content}"/>
                        </mx:HBox>
                    </fx:Component>
                </mx:itemRenderer> 
            </mx:DataGridColumn>

            <mx:DataGridColumn dataField="field02" headerText="Field 2" width="100"/>
        </mx:columns>

    </mx:DataGrid>
</s:VGroup>

</s:Application> 
```

**//编辑**

这就是我所说的“伪造方法”的意思：

![在此处输入图像描述](../Images/c16a411636b431ea947dd93509b6d2b3.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        [Bindable]private var collection:ArrayCollection = new ArrayCollection([
            {field01:"field01", content:"your content your content your content your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"},
            {field01:"field01", content:"your content your content your content your content", field02:"field02"}
        ]);

        [Bindable]public var currentScrollPosition:int = 0;
    ]]>
</fx:Script>

<s:VGroup x="10" y="10">
    <mx:DataGrid
        width="300" height="180" 
        rowHeight="50" 
        dataProvider="{collection}">
        <mx:columns>
            <mx:DataGridColumn dataField="field01" headerText="Field 1" width="100"/>

            <mx:DataGridColumn dataField="content" headerText="Content" width="100">
                <mx:itemRenderer>
                    <fx:Component>

                        <mx:HBox width="100%" horizontalScrollPolicy="off">
                            <mx:HBox id="hbMove" x="{-outerDocument.currentScrollPosition}" width="300">
                                <mx:Label text="{data.content}"/>   
                            </mx:HBox>
                        </mx:HBox>

                    </fx:Component>
                </mx:itemRenderer> 
            </mx:DataGridColumn>

            <mx:DataGridColumn dataField="field02" headerText="Field 2" width="100"/>
        </mx:columns>

    </mx:DataGrid>

    <mx:HBox horizontalGap="0">
        <s:Spacer width="100"/>
        <mx:HScrollBar id="sbMover" width="100" minScrollPosition="0" maxScrollPosition="300" scroll="{currentScrollPosition = sbMover.scrollPosition}"/>
    </mx:HBox>

</s:VGroup>

</s:Application> 
```

# numpy - 沿路径的样本数组

> ID：15171039
> 
> 赞同：1
> 
> 时间：2013-03-02T05:18:57.217
> 
> 标签：numpy, matplotlib, scipy

我有这个二进制图像：

![图像](../Images/3891f8cfde8c66d32c68436c041a5fa1.png)

作为 0 和 1 值的 numpy 数组。

我想在路径上每隔 10 个像素对其进行采样，例如：

![图像](../Images/25052b64f4dc8f43c3c697dcb77b9a58.png)

我知道如何通过对数组进行切片来对正交对象进行采样，但我不知道如何处理不规则形状，并获得均匀分布的“点”集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:28:45.557

您可以使用 OpenCV 通过`findContours`. 这是演示代码，`x`&`y`是路径上像素的坐标。

```
import numpy as np
import cv2
import pylab as pl
img = cv2.imread("img.png")
img = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
ret,img = cv2.threshold(img,127,255,0)
r = cv2.findContours(255-img, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_NONE)
c = r[0][0]
x, y = cc[::10, 0, 0], cc[::10, 0, 1]
pl.figure(figsize=(10, 10))
pl.imshow(img, cmap="gray", interpolation="nearest")
pl.plot(cc[::10, 0, 0], cc[::10, 0, 1], "o") 
```

这是输出：

![在此处输入图像描述](../Images/8aae329dbbdf586e83d070e645b3994b.png)

我只是从路径中每10个点选择一个点，所以附近两个点之间的距离是不一样的。但是您可以使用一些插值方法将路径转换为平滑曲线，然后找到等距点。

# c# - 如何开始使用 ASP.NET MVC 4 项目？

> ID：15171044
> 
> 赞同：0
> 
> 时间：2013-03-02T05:19:56.540
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

上次我用 MVC 做一个相当大的项目是第 2 版，那是不久前的事了，所以我已经脱离了循环。现在我开始了一个小型报告项目。

基本上，将有六份预装报告和一些由用户选择的标准。用户将从计算机和 iOS/Android 设备访问内容。

我应该在项目中包含哪些库来让我快速前进并提供高质量的产品？

到目前为止，我得到了 ELMAH 和 MiniProfiler。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:01:26.607

我的列表：

*   Webapi - 创建和使用 API 用于与 Android/iOS 的通信
*   NHibernate - ORM - 如果你认为你的项目需要一个
*   Structuremap - 依赖注入
*   Automapper - 将域对象映射到视图模型
*   Squishit - 我个人喜欢这个库进行缩小，但你也可以查看内置机制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:22:00.417

我认为 mvc 没有从第一个版本更改工作流程，但我有项目清单

1.  使用[T4MVC](http://t4mvc.codeplex.com/)输入地址

2.  对于测试我使用[NUnit](http://www.nunit.org/)

3.  用于映射视图模型的[AutoMapper](https://github.com/AutoMapper/AutoMapper)

4.  用于错误处理的[ELMAH](http://code.google.com/p/elmah/)

5.  实体框架

6.  [MiniProfiler](http://miniprofiler.com/)

7.  引导程序或 jqueryUi

8.  用于 DI 容器的[StructureMapper](http://structuremap.net/)

# kotlin - Gradle 单引号和双引号

> ID：15171049
> 
> 赞同：72
> 
> 时间：2013-03-02T05:20:25.993
> 
> 标签：kotlin, gradle, groovy, build.gradle, gradle-kotlin-dsl

我是 gradle 的新手，目前只是尝试按照教程进行操作，并且有好几次我看到单引号和双引号混合在一起。我只是想知道何时应该使用一套而不是另一套。这方面的一个例子是教程的第 6.12 节 -[默认任务](http://www.gradle.org/docs/current/userguide/tutorial_using_tasks.html)：

```
defaultTasks 'clean', 'run'

task clean << {
    println 'Default Cleaning!'
}

task run << {
    println 'Default Running!'
}

task other << {
    println "I'm not a default task!"
} 
```

所以，我只想知道我是否应该注意这些差异，或者它们是否可以互换，并且在 gradle 中打印字符串时可以使用单引号或双引号。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-02T07:53:51.413

Gradle 构建脚本是用 Groovy 编写的。Groovy 有双引号和单引号字符串字面量。主要区别在于双引号字符串文字支持字符串插值：

```
def x = 10
println "result is $x" // prints: result is 10 
```

[您可以在网络上的这篇](http://en.wikipedia.org/wiki/Groovy_%28programming_language%29#String_Interpolation)文章或其他 Groovy 文章中了解有关 Groovy 字符串插值的更多信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-02T07:52:24.923

是的，您可以使用其中一种。唯一的区别是双引号字符串可以是 GStrings，它可以包含计算表达式，如以下从[Groovy 文档](http://groovy.codehaus.org/Strings+and+GString)中获取的示例：

```
foxtype = 'quick'
foxcolor = ['b', 'r', 'o', 'w', 'n']
println "The $foxtype ${foxcolor.join()} fox"
// => The quick brown fox 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-01T02:06:49.373

根据 gradle[文档](https://guides.gradle.org/style-guide/#favor_single_quotes_for_plain_strings_in_build_script_listings)：

> **在构建脚本列表中支持纯字符串的单引号**
> 
> 这主要是为了确保指南之间的一致性，但单引号也比双引号少一点噪音。如果要在字符串中包含嵌入式表达式，请仅使用双引号。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-10T06:20:11.817

单引号字符串是由**单引号**包围的一系列字符。喜欢 ：

```
def str='a single quoted string'
println str 
```

输出：

```
a single quoted string 
```

而双引号字符串允许我们进行**字符串插值** 在这里，我们有一个带有占位符的字符串引用了一个局部变量：

```
def name = 'Guillaume' // a plain string
def greeting = "Hello ${name}" 
```

输出 ：`Hello Guillaume`

在您的代码中，如果要打印任务名称。所以在这种情况下，你需要使用双引号：

```
defaultTasks 'clean', 'run'

task clean << {
    println 'Default Cleaning!'
}

task run << {
    println "Default Running $run.name!"
    // here Double Quotes are required to interpolate task-name
}

task other << {
    println "I'm not a default task!"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T14:27:05.840

Kotlin DSL 文件（如*build.gradle.kts*或*settings.gradle.kts*）是常规的 Kotlin 代码。
因此，字符串文字总是用双引号括起来：

```
val myFirstString = "4 / 2 equals ${4 / 2}"
val mySecondString = """The property "hide" was not found""" 
```

# c++ - 如何使用库组织 QtCreator 项目

> ID：15171051
> 
> 赞同：0
> 
> 时间：2013-03-02T05:20:36.097
> 
> 标签：c++, qt, qmake

我正在尝试学习 QtCreator。我最近需要创建一个单独的可执行文件来进行单元测试，浏览后发现最好的方法是创建一个静态库（mylib.a），然后将其包含到其他项目中。我将所有项目配置为构建到单个 build/ 目录中，并且 lib 创建了两个子文件夹：debug/ 和 release/。

“添加库”对话框已损坏，不允许我选择 .a 文件，只能选择 .lib 文件。我尝试手动将 LIBS += -L"./" -l"lib.a" 添加到第二个项目中，但没有成功（找不到库）。

如果有人可以帮助我弄清楚项目配置，那就太好了。我真的不知道发生了什么事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:21:58.350

我认为您需要的是一个单独目录中的子目录项目。例如，一个看起来像这样的目录结构：

```
topLevel/
topLevel/myProject
topLevel/myLib 
```

然后 topLevel 有一个 .pro 文件，如下所示：

```
TopLevel.pro
SUBDIRS += myProject
SUBDIRS += myLib 
```

myProject 在其目录中有您当前的 .pro 文件，而 myLib 有它自己的 .pro 文件。您可能会发现[此页面](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#subdirs)很有用。

# android - Android RelativeLayout 设计问题

> ID：15171052
> 
> 赞同：0
> 
> 时间：2013-03-02T05:20:37.267
> 
> 标签：android, android-layout

我设计了一种布局，总共有 4 个 RelativeLayout 一个是外壳，3 个是它的子级。当我在外部布局中放置白色时，没有留下任何空格，但是当我将 9patch 图像作为可绘制图像时，只剩下很少的默认填充/边距。有没有正确解决填充/边距问题的方法？我尝试了负边距，但它会隐藏位布局我认为这不是正确的解决方案，这是我的布局

![在此处输入图像描述](../Images/ade1841a6ac1ef392265efda05fbfa2c.png)

当我将白色作为背景时，我的布局看起来像

这是我的布局的以下代码

![在此处输入图像描述](../Images/6567d1adb5b9f7b80ef38f2ff553f927.png)

```
 <RelativeLayout
        android:id="@+id/DetailSection1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/HeaderLayout"
        android:layout_toLeftOf="@+id/DetailSection2" 

        >

        <TextView
            android:id="@+id/lblRestaurantName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/DetailSection1"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:textColor="@color/heding_font"
            android:textSize="@dimen/headingFont"
            android:text="Restaurant Name" />

        <ImageView
            android:id="@+id/imgpin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/lblRestaurantName"
            android:layout_margin="5dp"
            android:src="@drawable/pin" />

        <TextView
            android:id="@+id/lblAddress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/lblRestaurantName"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/imgpin"
            android:text="Address"
            android:textColor="@color/restaurant_list_font"
            android:textSize="@dimen/lableNormalFont"
             />

        <ImageView
            android:id="@+id/imgphone"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/lblAddress"
            android:layout_margin="5dp"
            android:src="@drawable/phn" />

        <TextView
            android:id="@+id/lblMobile"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/lblAddress"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/imgphone"
            android:text="Mobile"
            android:textColor="@color/restaurant_list_font"
            android:textSize="@dimen/lableNormalFont"
             />

        <ImageView
            android:id="@+id/imgstar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/lblMobile"
            android:layout_margin="5dp"
            android:src="@drawable/star" />

        <TextView
            android:id="@+id/lblStar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/lblMobile"
            android:layout_marginTop="5dp"
            android:layout_toRightOf="@+id/imgstar"
            android:text="Star" 
            android:textColor="@color/restaurant_list_font"
            android:textSize="@dimen/lableNormalFont"
            />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/DetailSection2"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignBottom="@+id/DetailSection1"
        android:layout_toLeftOf="@+id/DetailSection3"
        android:layout_toRightOf="@+id/lblStar" >

        <ImageView
            android:id="@+id/imgmore"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:src="@drawable/read_more" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/DetailSection3"
        android:layout_width="95dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/HeaderLayout"
        android:layout_gravity="center"
        android:layout_centerInParent="true"
        android:background="@drawable/photo_cover" >

        <ImageView
            android:id="@+id/imgRestaurant"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/lblMobile"
            android:layout_margin="5dp"
            android:src="@drawable/rihanna" />
    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:57:29.753

从您发布的 9-patch 可绘制图像中：

表示视图上水平数据填充的**底线**不是从左侧的起点绘制的。

我不确定。而且我知道我在解释上述行时并不清楚。

只需检查一下：

考虑下面的 9-patch 用作 TextView 的背景。如果您在其中放置一些文本，它将从绘制底线的区域开始。这意味着它将从左边开始，一直到右边。

![在此处输入图像描述](../Images/a9777d71c03d1083d53747cd7d756448.png)

如果您使用以下 9-patch 作为背景并尝试与上面相同的操作。将导致文本未从左侧写入。它留下了一点填充。

![在此处输入图像描述](../Images/5c7714b506df4637a4ad45a5acc21794.png)

这就是你得到这样结果的原因。当然，我对此百分百确定。

所以，只是想看看这是否有效。尝试更改底线以填充完整图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:25:11.887

我认为你最好为你想要的布局应用背景颜色。还有一个保留代码，以便我们可以轻松理解你的问题是什么。

# php - PHP 扩展的不同 API 编号

> ID：15171059
> 
> 赞同：0
> 
> 时间：2013-03-02T05:21:31.800
> 
> 标签：php, dll, php-extension

所以就是这种情况，我正在尝试为我的客户开发一个 php 扩展。我使用 SWIG 生成包装器代码，我的主要代码是 c++。成功创建扩展后，我将其加载到 /ext 并重新启动 Web 服务器以对其进行测试。我收到错误消息，提到扩展程序是使用 API 20090626 构建的，但 PHP 服务器（在我的情况下为 XAMPP）API 是 20100525。我完全理解错误，所以我在 php 源中打开 Zend_modules.h 头文件并将 API 编号从 20090626 更改为 20100525，然后我使用更新的 zend_modules.h 头文件构建我的扩展，现在我没有问题了。

问题是，我的客户肯定在使用具有不同 API 的不同 php 服务器，我打算给他们一个 dll（我的扩展），它可以轻松加载而没有任何困难。但现在我应该给他们一个 VS2010 解决方案，动态加载我的主要代码 (dll)。我的意思是每个用户应该首先从他自己的服务器检查 PHP API 并更改 Zend_modules.h 头文件，构建解决方案，然后使用扩展。我需要一个解决方案，使我的扩展完全独立于该 API 编号。

我真的很感激任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:04:49.277

> 我完全理解错误，所以我在 php 源中打开 Zend_modules.h 头文件并将 API 编号从 20090626 更改为 20100525

你这样做的事实告诉我你实际上并不理解这个错误。

模块在 PHP 的不同主要版本之间**不**兼容—— Zend API 编号用于确保 PHP 不会无意中尝试加载为不同版本构建的模块。您对 PHP 构建树所做的修改会导致它构建在任何版本上都无法正常运行的模块。

如果您需要为多个主要版本的 PHP 构建模块，则需要使用相应版本的 PHP 运行构建。你不能混搭，也不能构建一个适用于多个版本的模块。（您也不应该建议您的用户修改他们的 PHP 构建以接受不兼容的模块。那只会让可怕的事情发生。）

下面列出了几个 PHP 版本的 API 版本：

*   PHP 5.2：20060613
*   PHP 5.3：20090626
*   PHP 5.4：20100525
*   PHP 5.5：20120211

# clojure - 有没有办法找出 clojars/maven 上所有依赖于的 clojure 库 ?

> ID：15171072
> 
> 赞同：2
> 
> 时间：2013-03-02T05:23:03.543
> 
> 标签：clojure

我想知道谁在使用什么库来回答类似的问题

*   有多少项目在使用 datomic、fs 等...
*   与活跃相比，有多少项目正在使用打嗝...
*   什么样的项目正在使用 clojure.logic

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:39:57.813

查看[http://www.clojuresphere.com/](http://www.clojuresphere.com/)，它显示了依赖项以及依赖项目，并且还具有 REST API。

# excel - Excel：将 1 行导出为字符串

> ID：15171077
> 
> 赞同：1
> 
> 时间：2013-03-02T05:24:21.163
> 
> 标签：excel, excel-formula, vba

我在 Excel 工作表中编写了这个简单的公式。

```
=CONCATENATE(A$1,"='",A49,"', ",B$1,"='",B49,"', ",
C$1,"='",C49,"',",D$1,"='",D49,"'") 
```

它将当前行的单元格值与列标题相结合。

我把它放在 E49 上，如果我将它复制粘贴到 E 列的任何位置，它会很好地调整。我想改进它并使其更通用，我宁愿不使用 VBA 来保持简单（即安装在任何电子表格上，只需简单地复制粘贴单元格公式。）

功能完成：

*   自动调整以更改列标题中的标签。

功能缺失：

1.  通过编辑几个字符来调整添加/删除列（例如，在公式中包含“A:D”或“A1:D1”参数。）
2.  自动调整以添加/删除列。

问题：

*   我可以只用一个公式吗？如果没有，是否有任何公式可以接近相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:11:32.913

这取决于您希望公式有多复杂。我认为这是一个不太优雅的解决方案，但理论上你可以构建一个巨大的 IF(..) 语句来测试列名是否存在。

如果它们不是空白，则执行 concat。

就个人而言，我会使用 VBA，然后将其放入插件中；这样它就可以在本地计算机上的任何 excel 实例中打开。

# database - 将表格标准化为 3NF

> ID：15171093
> 
> 赞同：0
> 
> 时间：2013-03-02T05:26:51.777
> 
> 标签：database, database-design, normalization

在将表规范化为 3NF 后，我无法理解如何表示外键。

让我们以这种方式考虑表格：

```
student(studentid,studentname,courseid,coursename,dateofexam,marks,grade) 
```

我可以如下计算出FD：

```
studentid -> studentname
courseid -> coursename
{student,courseid} -> dateofexam,marks
marks -> grade 
```

现在我正在尝试为具有如下非 ket 属性的 FD 创建一个新表：

```
marks grade
studentid studentname 
```

现在如何将这些表的外键与我的旧表关联起来`student`？我对这样做感到困惑。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:10:51.690

您的 FD 实际上向您展示了如何：

```
studentid -> studentname
courseid -> coursename
{student,courseid} -> dateofexam,marks
marks -> grade 
```

每行将是一个单独的表。其他表中存在的键是 fk。在这种情况下：

```
{student,courseid} -> dateofexam,marks 
```

那将是学生ID，课程ID和标记（可能也必须是ID）

会是这样的

学生（学生身份，学生姓名）

课程（课程ID，课程名称）

考试（examid、fk_studentid、fk_courseid、dateofexam、fk_markid）

分数（markid，等级）

# ruby-on-rails - 由“MultiJson::DecodeError: 795: unexpected token”引起的奇怪应用程序错误

> ID：15171094
> 
> 赞同：1
> 
> 时间：2013-03-02T05:27:00.110
> 
> 标签：ruby-on-rails, ruby, pdf, pdf-generation

我正在构建一个应用程序，它使用用户创建的旅行地图创建 PDF 文档。它有两个阶段：

*   个性化——用户选择兴趣点。
*   完成 - 用户输入他们的电子邮件地址，我们生成 PDF 地图并通过发送带有下载链接的电子邮件来完成该过程。

我对流程的第二阶段有疑问。请求生成 PDF 时出现错误。

在日志中：

```
app[worker.1]: Starting to finalize PDF no #3384
app[worker.1]: Generating pdf url:/pdfs/new.json?id=3384&token=abcdeyd
app[web.2]: Started GET "/pdfs/new.json?id=3384&token=abcdeyd" 
```

几秒钟后，我得到：

```
 heroku[router]: at=error code=H12 desc="Request timeout" method=GET path=/pdfs/new.json?id=3384&token=abcdeyd" host= fwd= dyno=web.2 queue=0ms wait=0ms connect=1ms service=30000ms status=503 bytes=0 
```

接着：

```
 [Worker(host:pid:2)] Trip#finalize_without_delay! failed with MultiJson::DecodeError: 795: unexpected token at '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
app[worker.1]:     <html>
app[worker.1]:     <head>
app[worker.1]:       <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
app[worker.1]:       <style type="text/css">
app[worker.1]:         html, body, iframe { margin: 0; padding: 0; height: 100%; }
app[worker.1]:         iframe { display: block; width: 100%; border: none; }
app[worker.1]:       </style>
app[worker.1]:     <title>Application Error</title></head>
app[worker.1]:     </head>
app[worker.1]:     <body>
app[worker.1]:       <iframe src="//s3.amazonaws.com/heroku_pages/error.html">
app[worker.1]:         <p>Application Error</p>
app[worker.1]:       </iframe>
app[worker.1]:     </body>
app[worker.1]:     </html>' - 0 failed attempts 
```

从用户的角度来看，它是这样的：

```
app[web.1]: Started GET "/pdfs/3384" 
app[web.1]: OpenURI::HTTPError (403 Forbidden):
app[web.1]:   app/controllers/pdfs_controller.rb:52:in `show' 
```

最奇怪的是，当我在大约 30 到 40 分钟后实际尝试下载 PDF 时，一切顺利，我将其下载到我的电脑上。

```
app[web.1]: cache: [GET /pdfs/3384] miss
app[web.1]: Processing by PdfsController#show as HTML
app[web.1]:   Parameters: {"id"=>"3384"}
app[web.1]: Completed 200 OK in 2101ms (Views: 0.9ms | ActiveRecord: 7.4ms | Solr: 0.0ms)
heroku[router]: at=info method=GET path=/pdfs/3384 dyno=web.1 queue=0 wait=1ms connect=1ms service=4220ms status=200 bytes=13825239 
```

我会非常感谢任何建议。请问有什么不清楚的地方。问候

# ruby-on-rails - Rails：根据注册网址中的参数在数据库中保存记录

> ID：15171096
> 
> 赞同：0
> 
> 时间：2013-03-02T05:27:27.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid

我正在使用 Rails 3、mongoid 和 devise。

根据您选择注册的“计划”，您会获得不同的 URL，例如：计划 2 将获得`http://example.com/users/sign_up?account_level=2`

`account_level`是我的用户模型中的一条记录，用于存储用户的帐户级别。

当有人使用该链接注册时，如何获得值为 2 的 account_level 以将该数字保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:29:53.723

你可以这样做：

假设你有`sign_up`方法`users_controller`：

```
def sign_up
  account_level = params[:account_level]  #or you can use `params[:account_level] directly
  #do your stuff
end 
```

# c++ - Linux 中的权限被拒绝

> ID：15171097
> 
> 赞同：0
> 
> 时间：2013-03-02T05:27:31.873
> 
> 标签：c++, linux, shell

我在 Linux 机器上以 root 身份登录。现在尝试执行`test`C++ 的二进制文件，但会产生错误“权限被拒绝”。虽然我已经使用`chmod +x test`.

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:43:56.857

如果文件 test 位于单独的挂载点，并且该挂载点使用 noexec 标志挂载，则您将无法在其上执行任何二进制文件。

从安装手册页：

```
noexec   Do not allow direct execution of any binaries on the mounted filesystem. 
```

您可以使用以下命令查看挂载点的标志：

```
mount -l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:37:37.577

试试`ls -l /path/to/your/file`后面的命令`chmod +x /path/to/your/file`。

之后，检查可执行位**x**是否存在，即查看将打印的第一个字符串，它应该类似于`-rwxrwxr-x`.

*   如果您没有这三个，则*chmod*`x`有问题。可能你不是root。

**   如果您有`x`但无法执行程序，则问题出在您对程序的调用上。您应该尝试`cd`进入程序所在的文件夹，然后像 `./program_name`.* 

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:37:47.647

在你的代码之前有一个名为“test”的命令可能在你的路径中，这就是为什么你要输入“./test”而不是“test”，这可能会在/usr/bin/test中找到. （“哪个测试”可以在您的系统上找到）

我不知道为什么 /usr/bin/test 会因该错误而失败，除非您的测试软件采用参数并且您（在我的系统上）/usr/bin/test 给出了它无法执行的命令。

如果它不称为测试，也不是路径问题，你能发布一些代码和构建细节吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T05:29:48.423

如果二进制文件`test`位于目录 /dir1/dir2 中，请执行以下任一操作（使用绝对路径）：

```
/dir1/dir2/test 
```

或导航到包含程序的目录并使用`./`前缀（又名相对路径）

```
cd /dir1/dir2
./test 
```*

# css - CSS pie 在 IE 8 中不工作，但在 IE 9 中工作

> ID：15171099
> 
> 赞同：4
> 
> 时间：2013-03-02T05:27:37.013
> 
> 标签：css, internet-explorer, internet-explorer-8, css3pie

我正在为边框半径使用以下代码：

```
.box {
     width:250px;
     height:250px;
     background:#ce0000;
     border-top-left-radius: 15px;
     border-bottom-left-radius: 5px;
     border-bottom-right-radius: 5px;
     border-top-right-radius: 15px;
     behavior:url(images/PIE.htc);
} 
```

它在 IE 9 中运行良好。但它在 IE 8 中不起作用。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:35:00.623

根据文档，PIE 仅支持速记边界半径规则：

> 对于 PIE 解析的所有 CSS 属性，只会识别这些属性的简写版本。例如，虽然支持border-radius，但不支持单独的手写border-top-left-radius 等属性。
> 
> 原因与没有相对于 CSS 文件解析 URL 的原因相同（见上文）：PIE 无法查看每个样式属性的来源。如果同时存在速记和速记属性，PIE 无法确定 CSS 作者指定这些属性的顺序，也无法确定每个属性的选择器的特异性。因此，它无法就应优先考虑哪些财产做出明智的决定。
> 
> 为了避免做出愚蠢的猜测，我们选择只支持速记属性。选择速记而不是速记以保持文件较小并避免繁琐的重复。

[http://css3pie.com/documentation/known-issues/#shorthand](http://css3pie.com/documentation/known-issues/#shorthand)

因此，尝试将您的 CSS 更改为：

```
.box {
     width:250px;
     height:250px;
     background:#ce0000;
     border-radius : 15px 15px 5px 5px;
     behavior:url(images/PIE.htc);
} 
```

# c# - 可以使用 svn 项目获取引用的 dll

> ID：15171104
> 
> 赞同：0
> 
> 时间：2013-03-02T05:28:53.743
> 
> 标签：c#, visual-studio-2010, svn, tortoisesvn, ankhsvn

我是 SVN 项目的初学者（Working SVN with ASP.NET MVC3 c#）。我在中使用 ankhsvn

我的项目。

![在此处输入图像描述](../Images/3abe76e808f419348ca6f1e31b096ee0.png)

**我使用File -> Open -> Subversion Project**在其他电脑上加载我的项目

 **但我发现解决方案资源管理器中缺少一些 dll。

**我探索项目文件夹，有些文件夹没有勾选图标，**

**一些参考 dll 是包文件夹。这个文件夹没有勾号图标**

**请看下面的这张图片。**

![在此处输入图像描述](../Images/d075353fdd8441e41f1716eb1da73355.png)

我该如何解决这个问题。请帮忙。

![在此处输入图像描述](../Images/28078cf3247256f0b0d87505bb7b64ae.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:30:23.367

可能是下载后参考路径不同。您可以定义正确的路径**

# iphone - 通过 Tumblr 和 Path 共享图像

> ID：15171113
> 
> 赞同：0
> 
> 时间：2013-03-02T05:30:21.847
> 
> 标签：iphone, ios, xcode, path, tumblr

我正在构建一个 iPhone 应用程序，我想在其中集成“Tumblr”和“Path”api 以共享图像。

通过搜索堆栈溢出，我发现 sharekit 可以通过“Tumblr”共享，并且还在[ios 上找到了这个 Tumblr 集成，](https://stackoverflow.com/questions/14017986/tumblr-integration-on-ios)但它也说这个 api 不再可用。

我想知道是否可以通过“Tumblr”和“Path”共享图像？如果是，请建议我采取一些方法来做到这一点。

谢谢

# c - sem_wait POSIX API 和 OSX

> ID：15171121
> 
> 赞同：0
> 
> 时间：2013-03-02T05:31:06.580
> 
> 标签：c, xcode, macos, posix

我正在尝试编写一个简单的信号量程序，并在 OSX 中发现了一些不同的东西。我使用 Mountain Lion 和最新的 Xcode 版本。忘记了缺少大括号的语法错误..因为我下面有更多代码，没有复制完整的片段，

基本上我除了用 sem_wait 停止而不超出的代码。

代码编译输出如下

```
Output:
-------
    Semaphore wait failed with ret code: -1, and err: 9\. 
    Semaphore init failed with ret code: -1, and err: 9. 
```

回溯到错误码9，就是EBADF

我的程序是

```
int main(int argc, char * argv[])
{
    pthread_t tid1, tid2;
    int rc;

    rc = sem_unlink(&mutex);
    rc = sem_open(&mutex, O_CREAT,O_RDWR,0);
    rc = sem_wait(&mutex);

    if(rc == 0) {
        printf("Semaphore try wait ok!. \n");
    } else {
        printf("Semaphore wait failed with ret code: %d, and err: %d. \n",
               rc, errno);
    }

    if(rc != SEM_FAILED) {
        printf("Semaphore init ok!. \n");
    } else {
        printf("Semaphore init failed with ret code: %d, and err: %d. \n",
               rc, errno);
        return 0;
    } 
```

这里的任何帮助都是非常宝贵的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:46:25.910

`sem_unlink`取一个`char *`即信号量的名称。`sem_open`采用相同的方法，并返回类型为 的信号量描述符`sem_t *`。您应该将这个信号量描述符传递给`sem_wait`. 如果你修复了一些东西，让它在没有警告的情况下实际编译，就像下面的代码一样，那么它的行为就像你期望的那样：

```
#include <semaphore.h>
#include <stdio.h>
#include <sys/errno.h>

int main(int argc, char **argv)
{
    const char *semaphore_name = "my-test-semaphore";

    int rc = sem_unlink(semaphore_name);
    if (rc)
        perror("sem_unlink");

    sem_t *semaphore = sem_open(semaphore_name, O_CREAT, O_RDWR, 0);
    if (semaphore == SEM_FAILED) {
        perror("sem_open");
        return 1;
    }

    rc = sem_wait(semaphore);
    if (rc) {
        perror("sem_wait");
        return 1;
    }

    return 0;
} 
```

您还应该注意[POSIX 信号量的问题](http://charette.no-ip.com:81/programming/2010-01-13_PosixSemaphores/#problem)，即如果您的应用程序意外退出，很容易泄漏信号量计数。您提到的示例代码的事实`pthread_t`表明您正在尝试在单个进程中使用信号量。命名的 POSIX 信号量不是你想要的那个任务。

# java - 在列表中显示当前日期 Facebook 好友生日

> ID：15171122
> 
> 赞同：1
> 
> 时间：2013-03-02T05:31:17.970
> 
> 标签：java, android, facebook, facebook-fql

我正在编写一个应用程序，我在其中获取未来 30 天内生日的朋友列表，我也能够得到它，但是我的列表中遇到了一个小问题。

喜欢：我在接下来的 30 天内有 4 个朋友的生日，所以我得到了即将到来的 facebook 朋友生日的列表，但没有得到今天生日的朋友的名字

我想我在查询中遗漏了一些东西。

代码：

```
 Calendar cal = Calendar.getInstance();
    Date today = cal.getTime();
    SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");
    String today_formatted = formatter.format(today);
    cal.add(Calendar.DATE, 30);  //set number of days
    String today_plus30_formatted = formatter.format(cal.getTime());
    String query = "select name, birthday, uid, pic_square FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date != 'null' AND birthday_date > '" + today_formatted + "'AND birthday_date < '" + today_plus30_formatted + "'ORDER BY birthday_date ASC"; 
```

如果我将使用下面的查询，所以我没有得到我的朋友列表：

```
 String query = "select name, birthday, uid, pic_square FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) AND birthday_date != 'null' AND birthday_date > = '" + today_formatted + "'AND birthday_date < = '" + today_plus30_formatted + "'ORDER BY birthday_date ASC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:51:32.007

Rakesh 你做了一切，这也是正确的：

你只需要删除：“/yyyy”

替换下面的行，你就完成了：

```
 SimpleDateFormat formatter = new SimpleDateFormat("MM/dd"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:34:50.220

你确定允许访问朋友生日日期吗

```
private static final String[] PERMISSIONS =
new String[] {"friends_birthday","read_stream", "offline_access"}; 
```

[http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

这是一个简单的例子

[如何在 Android 中获得 FB 好友的生日](https://stackoverflow.com/questions/14231509/how-to-get-fb-friends-birthday-in-android)

# html - 文本旁边的行 - HTML + CSS

> ID：15171127
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:32:19.500
> 
> 标签：html, css, lines

我想要的是：

![在此处输入图像描述](../Images/3f9fdc9dc85c2d685c2eadcea9df001d.png)

当前代码

```
<div class="grid3"><h1 class="lines">Welcome!</h1> <p class="lines2">Text</p></div>

.lines { color: #d5a72b; padding-right: 4px; float: left;}
.lines2 { text-indent: -999999px; background: url('../images/line.png') repeat-x; } 
```

我得到什么： ![在此处输入图像描述](../Images/9da055a30ff4738e1ee80c51067c5cae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:35:22.250

我会这样做：

```
<h1><span>Heading</span></h1>

h1 {
    background-image: url("lines.png") left middle repeat-x; }
h1 span {
    background: #bgcolor;
    padding: 1em; } 
```

这是一个 hack，但我不相信即使 CSS3 目前也没有解决这个问题的方法，除了可能`border-image`，但是 IE10 仍然不支持。

# jquery - jQuery Mobile 在使用多页模板时显示所有页面

> ID：15171133
> 
> 赞同：2
> 
> 时间：2013-03-02T05:33:30.787
> 
> 标签：jquery, jquery-mobile, mobile

我正在创建一个简单的 jQuery Mobile 1.3.0 单文件、多页文档。加载时，所有页面 div 都会显示在页面上。代码有什么问题？

这是 HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Daily Exercise</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" href="favicon.png"/>
    <link rel="apple-touch-icon" href="icon.jpg"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <style>
        .content    {margin-top:-20px;}
        .main       {font-weight:bold; font-size:14px; color:#444; font-family:"Trebuchet MS"; margin-left:0px;}
        .small      {font-weight:normal; font-size:11px; color:#666; font-family:"Courier New";}

        .day        {display:inline-block; width:85px;}
        .exercise   {display:inline-block; width:145px;}
        .reps       {display:inline-block; width:110px; text-align:right;}
        .part       {display:inline-block; width:40px; text-align:right;}

        .test       {border:1px red solid;}
    </style>
</head>
<body> 

<!-- START PAGE -->
<div id="main" data-role="page">
    <div data-role="header">
        <h1>Daily Exercise</h1>
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false">
            <li><a href="#hiit-legs" data-transition="slide"><span class="main day">Monday</span><span class="small">(HIIT & Legs)</span></a></li>
            <li><a href="#chest-triceps" data-transition="slide"><span class="main day">Tuesday</span><span class="small">(Chest & Triceps)</span></a></li>
            <li><a href="#back-biceps" data-transition="slide"><span class="main day">Wednesday</span><span class="small">(Back & Biceps)</span></a></li>
            <li><a href="#hiit-legs-2" data-transition="slide"><span class="main day">Thursday</span><span class="small">(HIIT & Legs)</span></a></li>
            <li><a href="#chest-back-core" data-transition="slide"><span class="main day">Friday</span><span class="small">(Chest, Back & Core)</span></a></li>
            <li><a href="#shoulders-biceps" data-transition="slide"><span class="main day">Saturday</span><span class="small">(Shoulders & Biceps)</span></a></li>
            <li><a href="#chest-back-core" data-transition="slide"><span class="main day">Sunday</span><span class="small">(Chest, Back & Core)</span></a></li>
        </ul>   
    </div><!-- /content -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false">
            <li><a href="#rules-goals" data-transition="slide"><span class="main day">Rules & Goals</span></a></li>
        </ul>   
    </div><!-- /content -->
</div><!-- /page -->

<!-- HIIT & LEGS -->
<div id="hiit-legs" date-role="page">
    <div data-role="header">
        <h1>HIIT & Legs</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->  
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider">HIIT</li>
            <li><a href="#hiit-treadmill" data-transition="slide"><span class="main exercise">Treadmill</span></a></li>
            <li><a href="#hiit-outside" data-transition="slide"><span class="main exercise">Outside</span></a></li>
            <li data-role="list-divider">Legs</li>
            <li><span class="main exercise">Split Squats</span><span class="small reps">(25x - 5 lbs)</span></li>
            <li><span class="main exercise">Switch Squats</span><span class="small reps">(25x - Body)</span></li>
            <li><span class="main exercise">Deadlift Squats</span><span class="small reps">(25x - Body)</span></li>
            <li><span class="main exercise">Wall Squats</span><span class="small reps">(60s - 5 lbs)</span></li>
        </ul>
    </div><!-- /content -->
</div><!-- /page -->

<!-- CHEST & TRICEPS -->
<div id="chest-triceps" date-role="page">
    <div data-role="header">
        <h1>Chest & Triceps</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider">Set 1</li>
            <li><span class="main exercise">Decline Push-Ups</span><span class="small reps">(20x, Body)</span></li>
            <li><span class="main exercise">Table Dips</span><span class="small reps">(20x, Body)</span></li>
            <li data-role="list-divider">Set 2</li>
            <li><span class="main exercise">Military Push-Ups</span><span class="small reps">(20x, Body)</span></li>
            <li><span class="main exercise">Tricep Extend</span><span class="small reps">(15x, Burg)</span></li>
            <li data-role="list-divider">Set 3</li>
            <li><span class="main exercise">Alt Push-Ups</span><span class="small reps">(20x, Body)</span></li>
            <li><span class="main exercise">Stool Dips</span><span class="small reps">(15x, Body)</span></li>
            <li data-role="list-divider">Set 4</li>
            <li><span class="main exercise">Wide Push-Ups</span><span class="small reps">(20x, Body)</span></li>
            <li><span class="main exercise">Kick Backs</span><span class="small reps">(15x, Burg)</span></li>
            <li data-role="list-divider">Set 5</li>
            <li><span class="main exercise">Push-Ups</span><span class="small reps">(Max, Body)</span></li>
            <li><span class="main exercise">X-Body Blows</span><span class="small reps">(25x, Burg)</span></li>
        </ul>
    </div><!-- /content -->
</div><!-- /page -->

<!-- BACK & BICEPS -->
<div id="back-biceps" date-role="page">
    <div data-role="header">
        <h1>Back & Biceps</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider">Set 1</li>
            <li><span class="main exercise">Narrow Pull-Ups</span><span class="small reps">(10x, Body)</span></li>
            <li><span class="main exercise">Normal Curls</span><span class="small reps">(15x, 25 lbs)</span></li>
            <li data-role="list-divider">Set 2</li>
            <li><span class="main exercise">Heavy Pants</span><span class="small reps">(15x, 3-Band)</span></li>
            <li><span class="main exercise">Static Curls</span><span class="small reps">(8x, 25 lbs)</span></li>
            <li data-role="list-divider">Set 3</li>
            <li><span class="main exercise">Wide Pull-Ups</span><span class="small reps">(10x, Body)</span></li>
            <li><span class="main exercise">Out Curls</span><span class="small reps">(15x, 25 lbs)</span></li>
            <li data-role="list-divider">Set 4</li>
            <li><span class="main exercise">Lawnmowers</span><span class="small reps">(15x, 3-Band)</span></li>
            <li><span class="main exercise">7-7-7 Curls</span><span class="small reps">(15x, 25 lbs)</span></li>
            <li data-role="list-divider">Set 5</li>
            <li><span class="main exercise">Chin-Ups</span><span class="small reps">(Max, Body)</span></li>
            <li><span class="main exercise">Hammer Curls</span><span class="small reps">(15x, 25 lbs)</span></li>
        </ul>
    </div><!-- /content -->
</div><!-- /page -->

<!-- HIIT & LEGS 2 -->
<div id="hiit-legs2" date-role="page">
    <div data-role="header">
        <h1>HIIT & Legs</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->  
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider">HIIT</li>
            <li><a href="#hiit-treadmill" data-transition="slide"><span class="main exercise">Treadmill</span></a></li>
            <li><a href="#hiit-outside" data-transition="slide"><span class="main exercise">Outside</span></a></li>
            <li data-role="list-divider">Legs</li>
            <li><span class="main exercise">80/20 Speed Squats</span><span class="small reps">(25x - Body)</span></li>
            <li><span class="main exercise">Step-Back Lunges</span><span class="small reps">(25x - 5 lbs)</span></li>
            <li><span class="main exercise">Deadlift Squats</span><span class="small reps">(25x - Body)</span></li>
            <li><span class="main exercise">Wall Squats</span><span class="small reps">(60s - 5 lbs)</span></li>
        </ul>
    </div><!-- /content -->
</div><!-- /page -->

<!-- CHEST, BACK & CORE -->
<div id="chest-back-core" date-role="page">
    <div data-role="header">
        <h1>Chest, Back & Core</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->  
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-divider-theme="d">
            <li data-role="list-divider">Chest</li>
            <li><span class="main exercise">100 Push-Ups</span><span class="small reps">(20 x 5)</span></li>
            <li data-role="list-divider">Back</li>
            <li><span class="main exercise">50 Pull-Ups</span><span class="small reps">(10 x 5)</span></li>
            <li data-role="list-divider">Core</li>
            <li><a href="#ab-ripper" data-transition="slide"><span class="main exercise">Ab Ripper</span><span class="small reps">(270)</span></a></li>
            <li><span class="main exercise">Superman</span><span class="small reps">(10s x 5)</span></li>
        </ul>
    </div><!-- /content -->
</div><!-- /page -->

<!-- HIIT-TREADMILL -->
<div id="hiit-treadmill" date-role="page">
    <div data-role="header">
        <h1>HIIT Treadmill</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
            <li data-role="list-divider">Warmup</li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 8%</span></li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span></li>
            <li data-role="list-divider">Intervals (x6)</li>
            <li><span class="main exercise">Sprint</span><span class="small">8 mph - 12%</span></li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span></li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span></li>
            <li data-role="list-divider">Cooldown</li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span></li>
            <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 8%</span></li>
        </ul>   
    </div><!-- /content -->
</div><!-- /page -->

<!-- HIIT-OUTSIDE -->
<div id="hiit-outside" date-role="page">
    <div data-role="header">
        <h1>HIIT - Outside</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
            <li data-role="list-divider">Warmup</li>
            <li><span class="main exercise">Light Jog</span><span class="small">5 min</span></li>
            <li><span class="main exercise">Light Run</span><span class="small">2 min</span></li>
            <li data-role="list-divider">Intervals (x6)</li>
            <li><span class="main exercise">Sprint</span><span class="small">30 sec</span></li>
            <li><span class="main exercise">Walk</span><span class="small">60 sec</span></li>
            <li data-role="list-divider">Cooldown</li>
            <li><span class="main exercise">Walk Home</span><span class="small">? min</span></li>
        </ul>   
    </div><!-- /content -->
</div><!-- /page -->

<!-- RULES & GOALS -->
<div id="rules-goals" date-role="page">
    <div data-role="header">
        <h1>HIIT - Outside</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
            <li data-role="list-divider">Rules</li>
            <li><span class="main exercise">5 x Fast 16/8</span><span class="small reps">9pm to 1pm, 1,750</span></li>
            <li><span class="main exercise">2 x Fast 20/4</span><span class="small reps">9pm to 5pm, 500</span></li>
            <li><span class="main exercise">Train Fasted</span><span class="small reps">12pm or 4pm</span></li>
            <li><span class="main exercise">During: BCAAs</span><span class="small reps">10g</span></li>
            <li><span class="main exercise">After: Creatine</span><span class="small reps">5g</span></li>
            <li><span class="main exercise">After: High Protein</span><span class="small reps">1g/Lean Weight</span></li>
            <li><span class="main exercise">Largest Meal</span><span class="small reps">1g/Lean Weight</span></li>
            <li data-role="list-divider">Goals</li>
            <li><span class="main exercise">8% Body Fat</span><span class="small"></span></li>
            <li><span class="main exercise">140 lbs Lean</span><span class="small">152 lbs total</span></li>
            <li><span class="main exercise">150 lbs Lean</span><span class="small">163 lbs total</span></li>
            <li><span class="main exercise">Food Discipline</span><span class="small"></span></li>
            <li><span class="main exercise">Weight Maintained</span><span class="small"></span></li>
        </ul>   
    </div><!-- /content -->
</div><!-- /page -->

<!-- AB RIPPER -->
<div id="ab-ripper" date-role="page">
    <div data-role="header">
        <h1>Ab Ripper</h1>
        <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>      
    </div><!-- /header -->
    <div data-role="content" class="content">   
        <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
            <li><span class="main exercise">Crunches</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">Leg Lifts</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">Bicycles</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">In & Out (V)</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">L/R Crunches</span><span class="small">(2x20)</span></li>
            <li><span class="main exercise">Hip Rock & Raise</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">V-Up Roll-Up</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">L/R Oblique V-Up</span><span class="small">(2x20)</span></li>
            <li><span class="main exercise">Crunchy Frog</span><span class="small">(x20)</span></li>
            <li><span class="main exercise">Mason Twist</span><span class="small">(x50)</span></li>
        </ul>   
    </div><!-- /content -->
</div><!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T08:33:36.367

您正在使用`date-role`而不是`data-role`哪个是正确的属性。因此，尝试将所有内容更改`date-role="page"`为`data-role="page"`，问题将得到解决。

```
<!DOCTYPE html>
<html>

    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Daily Exercise</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="shortcut icon" href="favicon.png" />
        <link rel="apple-touch-icon" href="icon.jpg" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <style>
            .content {
                margin-top:-20px;
            }
            .main {
                font-weight:bold;
                font-size:14px;
                color:#444;
                font-family:"Trebuchet MS";
                margin-left:0px;
            }
            .small {
                font-weight:normal;
                font-size:11px;
                color:#666;
                font-family:"Courier New";
            }
            .day {
                display:inline-block;
                width:85px;
            }
            .exercise {
                display:inline-block;
                width:145px;
            }
            .reps {
                display:inline-block;
                width:110px;
                text-align:right;
            }
            .part {
                display:inline-block;
                width:40px;
                text-align:right;
            }
            .test {
                border:1px red solid;
            }
        </style>
    </head>

    <body>
        <!-- START PAGE -->
        <div id="main" data-role="page">
            <div data-role="header">
                 <h1>Daily Exercise</h1>

            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false">
                    <li>
                        <a href="#hiit-legs" data-transition="slide"><span class="main day">Monday</span><span class="small">(HIIT & Legs)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#chest-triceps" data-transition="slide"><span class="main day">Tuesday</span><span class="small">(Chest & Triceps)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#back-biceps" data-transition="slide"><span class="main day">Wednesday</span><span class="small">(Back & Biceps)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#hiit-legs-2" data-transition="slide"><span class="main day">Thursday</span><span class="small">(HIIT & Legs)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#chest-back-core" data-transition="slide"><span class="main day">Friday</span><span class="small">(Chest, Back & Core)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#shoulders-biceps" data-transition="slide"><span class="main day">Saturday</span><span class="small">(Shoulders & Biceps)</span>
                        </a>
                    </li>
                    <li>
                        <a href="#chest-back-core" data-transition="slide"><span class="main day">Sunday</span><span class="small">(Chest, Back & Core)</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- /content -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false">
                    <li>
                        <a href="#rules-goals" data-transition="slide"><span class="main day">Rules & Goals</span>
                        </a>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- HIIT & LEGS -->
        <div id="hiit-legs" data-role="page">
            <div data-role="header">
                 <h1>HIIT & Legs</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-divider-theme="d">
                    <li data-role="list-divider">HIIT</li>
                    <li>
                        <a href="#hiit-treadmill" data-transition="slide"><span class="main exercise">Treadmill</span>
                        </a>
                    </li>
                    <li>
                        <a href="#hiit-outside" data-transition="slide"><span class="main exercise">Outside</span>
                        </a>
                    </li>
                    <li data-role="list-divider">Legs</li>
                    <li><span class="main exercise">Split Squats</span><span class="small reps">(25x - 5 lbs)</span>
                    </li>
                    <li><span class="main exercise">Switch Squats</span><span class="small reps">(25x - Body)</span>
                    </li>
                    <li><span class="main exercise">Deadlift Squats</span><span class="small reps">(25x - Body)</span>
                    </li>
                    <li><span class="main exercise">Wall Squats</span><span class="small reps">(60s - 5 lbs)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- CHEST & TRICEPS -->
        <div id="chest-triceps" data-role="page">
            <div data-role="header">
                 <h1>Chest & Triceps</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-divider-theme="d">
                    <li data-role="list-divider">Set 1</li>
                    <li><span class="main exercise">Decline Push-Ups</span><span class="small reps">(20x, Body)</span>
                    </li>
                    <li><span class="main exercise">Table Dips</span><span class="small reps">(20x, Body)</span>
                    </li>
                    <li data-role="list-divider">Set 2</li>
                    <li><span class="main exercise">Military Push-Ups</span><span class="small reps">(20x, Body)</span>
                    </li>
                    <li><span class="main exercise">Tricep Extend</span><span class="small reps">(15x, Burg)</span>
                    </li>
                    <li data-role="list-divider">Set 3</li>
                    <li><span class="main exercise">Alt Push-Ups</span><span class="small reps">(20x, Body)</span>
                    </li>
                    <li><span class="main exercise">Stool Dips</span><span class="small reps">(15x, Body)</span>
                    </li>
                    <li data-role="list-divider">Set 4</li>
                    <li><span class="main exercise">Wide Push-Ups</span><span class="small reps">(20x, Body)</span>
                    </li>
                    <li><span class="main exercise">Kick Backs</span><span class="small reps">(15x, Burg)</span>
                    </li>
                    <li data-role="list-divider">Set 5</li>
                    <li><span class="main exercise">Push-Ups</span><span class="small reps">(Max, Body)</span>
                    </li>
                    <li><span class="main exercise">X-Body Blows</span><span class="small reps">(25x, Burg)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- BACK & BICEPS -->
        <div id="back-biceps" data-role="page">
            <div data-role="header">
                 <h1>Back & Biceps</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-divider-theme="d">
                    <li data-role="list-divider">Set 1</li>
                    <li><span class="main exercise">Narrow Pull-Ups</span><span class="small reps">(10x, Body)</span>
                    </li>
                    <li><span class="main exercise">Normal Curls</span><span class="small reps">(15x, 25 lbs)</span>
                    </li>
                    <li data-role="list-divider">Set 2</li>
                    <li><span class="main exercise">Heavy Pants</span><span class="small reps">(15x, 3-Band)</span>
                    </li>
                    <li><span class="main exercise">Static Curls</span><span class="small reps">(8x, 25 lbs)</span>
                    </li>
                    <li data-role="list-divider">Set 3</li>
                    <li><span class="main exercise">Wide Pull-Ups</span><span class="small reps">(10x, Body)</span>
                    </li>
                    <li><span class="main exercise">Out Curls</span><span class="small reps">(15x, 25 lbs)</span>
                    </li>
                    <li data-role="list-divider">Set 4</li>
                    <li><span class="main exercise">Lawnmowers</span><span class="small reps">(15x, 3-Band)</span>
                    </li>
                    <li><span class="main exercise">7-7-7 Curls</span><span class="small reps">(15x, 25 lbs)</span>
                    </li>
                    <li data-role="list-divider">Set 5</li>
                    <li><span class="main exercise">Chin-Ups</span><span class="small reps">(Max, Body)</span>
                    </li>
                    <li><span class="main exercise">Hammer Curls</span><span class="small reps">(15x, 25 lbs)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- HIIT & LEGS 2 -->
        <div id="hiit-legs2" data-role="page">
            <div data-role="header">
                 <h1>HIIT & Legs</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-divider-theme="d">
                    <li data-role="list-divider">HIIT</li>
                    <li>
                        <a href="#hiit-treadmill" data-transition="slide"><span class="main exercise">Treadmill</span>
                        </a>
                    </li>
                    <li>
                        <a href="#hiit-outside" data-transition="slide"><span class="main exercise">Outside</span>
                        </a>
                    </li>
                    <li data-role="list-divider">Legs</li>
                    <li><span class="main exercise">80/20 Speed Squats</span><span class="small reps">(25x - Body)</span>
                    </li>
                    <li><span class="main exercise">Step-Back Lunges</span><span class="small reps">(25x - 5 lbs)</span>
                    </li>
                    <li><span class="main exercise">Deadlift Squats</span><span class="small reps">(25x - Body)</span>
                    </li>
                    <li><span class="main exercise">Wall Squats</span><span class="small reps">(60s - 5 lbs)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- CHEST, BACK & CORE -->
        <div id="chest-back-core" data-role="page">
            <div data-role="header">
                 <h1>Chest, Back & Core</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-divider-theme="d">
                    <li data-role="list-divider">Chest</li>
                    <li><span class="main exercise">100 Push-Ups</span><span class="small reps">(20 x 5)</span>
                    </li>
                    <li data-role="list-divider">Back</li>
                    <li><span class="main exercise">50 Pull-Ups</span><span class="small reps">(10 x 5)</span>
                    </li>
                    <li data-role="list-divider">Core</li>
                    <li>
                        <a href="#ab-ripper" data-transition="slide"><span class="main exercise">Ab Ripper</span><span class="small reps">(270)</span>
                        </a>
                    </li>
                    <li><span class="main exercise">Superman</span><span class="small reps">(10s x 5)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- HIIT-TREADMILL -->
        <div id="hiit-treadmill" data-role="page">
            <div data-role="header">
                 <h1>HIIT Treadmill</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
                    <li data-role="list-divider">Warmup</li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 8%</span>
                    </li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span>
                    </li>
                    <li data-role="list-divider">Intervals (x6)</li>
                    <li><span class="main exercise">Sprint</span><span class="small">8 mph - 12%</span>
                    </li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span>
                    </li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span>
                    </li>
                    <li data-role="list-divider">Cooldown</li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 12%</span>
                    </li>
                    <li><span class="main exercise">Fast Walk</span><span class="small">3 mph - 8%</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- HIIT-OUTSIDE -->
        <div id="hiit-outside" data-role="page">
            <div data-role="header">
                 <h1>HIIT - Outside</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
                    <li data-role="list-divider">Warmup</li>
                    <li><span class="main exercise">Light Jog</span><span class="small">5 min</span>
                    </li>
                    <li><span class="main exercise">Light Run</span><span class="small">2 min</span>
                    </li>
                    <li data-role="list-divider">Intervals (x6)</li>
                    <li><span class="main exercise">Sprint</span><span class="small">30 sec</span>
                    </li>
                    <li><span class="main exercise">Walk</span><span class="small">60 sec</span>
                    </li>
                    <li data-role="list-divider">Cooldown</li>
                    <li><span class="main exercise">Walk Home</span><span class="small">? min</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- RULES & GOALS -->
        <div id="rules-goals" data-role="page">
            <div data-role="header">
                 <h1>HIIT - Outside</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
                    <li data-role="list-divider">Rules</li>
                    <li><span class="main exercise">5 x Fast 16/8</span><span class="small reps">9pm to 1pm, 1,750</span>
                    </li>
                    <li><span class="main exercise">2 x Fast 20/4</span><span class="small reps">9pm to 5pm, 500</span>
                    </li>
                    <li><span class="main exercise">Train Fasted</span><span class="small reps">12pm or 4pm</span>
                    </li>
                    <li><span class="main exercise">During: BCAAs</span><span class="small reps">10g</span>
                    </li>
                    <li><span class="main exercise">After: Creatine</span><span class="small reps">5g</span>
                    </li>
                    <li><span class="main exercise">After: High Protein</span><span class="small reps">1g/Lean Weight</span>
                    </li>
                    <li><span class="main exercise">Largest Meal</span><span class="small reps">1g/Lean Weight</span>
                    </li>
                    <li data-role="list-divider">Goals</li>
                    <li><span class="main exercise">8% Body Fat</span><span class="small"></span>
                    </li>
                    <li><span class="main exercise">140 lbs Lean</span><span class="small">152 lbs total</span>
                    </li>
                    <li><span class="main exercise">150 lbs Lean</span><span class="small">163 lbs total</span>
                    </li>
                    <li><span class="main exercise">Food Discipline</span><span class="small"></span>
                    </li>
                    <li><span class="main exercise">Weight Maintained</span><span class="small"></span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
        <!-- AB RIPPER -->
        <div id="ab-ripper" data-role="page">
            <div data-role="header">
                 <h1>Ab Ripper</h1>

                <a href="#main" data-theme="a" data-icon="arrow-l" data-rel="back" data-inline="true">Back</a>
            </div>
            <!-- /header -->
            <div data-role="content" class="content">
                <ul data-role="listview" data-inset="true" data-filter="false" data-divider-theme="d">
                    <li><span class="main exercise">Crunches</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">Leg Lifts</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">Bicycles</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">In & Out (V)</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">L/R Crunches</span><span class="small">(2x20)</span>
                    </li>
                    <li><span class="main exercise">Hip Rock & Raise</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">V-Up Roll-Up</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">L/R Oblique V-Up</span><span class="small">(2x20)</span>
                    </li>
                    <li><span class="main exercise">Crunchy Frog</span><span class="small">(x20)</span>
                    </li>
                    <li><span class="main exercise">Mason Twist</span><span class="small">(x50)</span>
                    </li>
                </ul>
            </div>
            <!-- /content -->
        </div>
        <!-- /page -->
    </body>

</html> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T08:48:07.730

改变

```
date-role 
```

到

```
data-role
   ^ 
```

`div`除了所有页面`main`

# php - 无法将字符串变量传递给函数

> ID：15171134
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:33:34.617
> 
> 标签：php

当我尝试运行此代码时，变量 $column 没有通过。但相反，如果我使用一个字符串（例如“ABC”），它就会通过。怎么了？

```
(a) calling function
foreach ($columns as $column) {
    if(PMA_SQP_isKeyWord($column)) {

(b) called function
function PMA_SQP_isKeyWord($column) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:36:26.720

使用`functions`for 条件语句需要在执行任务后返回 BOOLEAN。如果它满足您的条件，则返回函数并告诉条件语句。如果使用，回显字符串和其他方法或函数将不起作用。您还应该检查是否`$columns`已相应定义并且也是一个数组，因为`foreach`只对数组进行操作。

# php - cakePHP2.3 全部保存

> ID：15171137
> 
> 赞同：0
> 
> 时间：2013-03-02T05:34:09.913
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-model

我正在使用 Cakephp2.3

我有以下表格

表 1：用户
这里我有字段 group_id 和其他字段表 2：组表 3：学生

我在其中有字段 user_id

表 4：监护人

我在其中提交了 user_id

和 student_guardians

我有字段guardian_id、student_id 和relationship_id。

在其他表中，我们还有其他字段 firstname、lastname 等。

我用蛋糕烘焙来创建协会和

我想从学生/添加页面输入所有数据。像监护人（学生可以在一个表单上输入多个监护人并提交他的详细信息）

我创建了如下视图

```
<div class="guardianStudents form">
<?php echo $this->Form->create('GuardianStudent'); ?>
    <fieldset>
        <legend><?php echo __('Add Guardian Student'); ?></legend>
    <?php
        echo $this->Form->input('Student.first_name');
        echo $this->Form->input('Guardian.0.Guardian.first_name');
        echo $this->Form->input('Guardian.0.Guardian.last_name');
        echo $this->Form->input('Guardian.0.User.username');
        echo $this->Form->input('Guardian.0.User.password');
        echo $this->Form->input('Guardian.0.User.group_id',array('type'=>'text','value'=>'1'));

        echo $this->Form->input('Guardian.1.Guardian.last_name');
        echo $this->Form->input('Guardian.1.Guardian.last_name');
        echo $this->Form->input('Guardian.1.User.username');
        echo $this->Form->input('Guardian.1.User.password');
        echo $this->Form->input('Guardian.1.User.group_id',array('type'=>'text','value'=>'1'));

        echo $this->Form->input('Student.User.group_id',array('type'=>'text','value'=>'1'));
        echo $this->Form->input('Student.User.username');
        echo $this->Form->input('Student.User.password');   
       ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit')); ?>
</div>
<div class="actions">
    <h3><?php echo __('Actions'); ?></h3>
    <ul>

        <li><?php echo $this->Html->link(__('List Guardian Students'), array('action' => 'index')); ?></li>
        <li><?php echo $this->Html->link(__('List Guardian Relationships'), array('controller' => 'guardian_relationships', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Guardian Relationship'), array('controller' => 'guardian_relationships', 'action' => 'add')); ?> </li>
        <li><?php echo $this->Html->link(__('List Students'), array('controller' => 'students', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Students'), array('controller' => 'students', 'action' => 'add')); ?> </li>
        <li><?php echo $this->Html->link(__('List Guardians'), array('controller' => 'guardians', 'action' => 'index')); ?> </li>
        <li><?php echo $this->Html->link(__('New Guardian'), array('controller' => 'guardians', 'action' => 'add')); ?> </li>
    </ul>
</div> 
```

在控制器功能中添加是

```
public function add() {
        if ($this->request->is('post')) {
            $this->GuardianStudent->create();
            $this->loadModel('User');

            if ($this->GuardianStudent->saveAll($this->request->data['Guardian'])) {    
                $this->Session->setFlash(__('The guardian student has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The guardian student could not be saved. Please, try again.'));
            }
        }

} 
```

它不保存任何数据

以上所有代码都已编写在 student_guradians 控制器中。

有没有人知道如何实现这个 var 数据转储

```
array(2) { ["Student"]=> array(2) { ["first_name"]=> string(5) "jkjkj" ["User"]=> array(3) { ["group_id"]=> string(1) "1" ["username"]=> string(10) "klklfkfkkl" ["password"]=> string(6) "lklklk" } } ["Guardian"]=> array(2) { [0]=> array(2) { ["Guardian"]=> array(2) { ["first_name"]=> string(5) "jkjkj" ["last_name"]=> string(8) "kjkjkjkj" } ["User"]=> array(4) { ["username"]=> string(7) "kjkjkjk" ["password"]=> string(7) "kjkjjkk" ["group_id"]=> string(1) "1" ["name"]=> string(1) "1" } } [1]=> array(2) { ["Guardian"]=> array(1) { ["last_name"]=> string(6) "jkkjkj" } ["User"]=> array(4) { ["username"]=> string(10) "jkljjljjkl" ["password"]=> string(6) "kjkjkj" ["group_id"]=> string(1) "1" ["name"]=> string(1) "1" } } } } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:37:22.900

**笔记**

我意识到这*不是*答案，而是太多信息无法将其放在“评论”中

IMO，您的设计/逻辑存在缺陷。您已经设计了数据库，以便一个学生可以拥有多个监护人，并且一个监护人可以是多个学生的监护人 (HABTM)。这似乎是正确的，听起来合乎逻辑。

*但是*，您设计了表单，以便在*添加*学生的同时*输入*监护人的详细信息，这（如果一切正常）将导致始终将新监护人插入数据库，即使这些监护人已经存在于数据库中。因此，基本上你已经在学生和它的监护人之间创建了一个“hasMany”关系，尽管“存储”为一个“HABTM”。

 *通过在表单中​​输入监护人的详细信息，将插入一个*新*的监护人，可能包含与现有监护人相同的详细信息（姓名、姓氏），但使用不同的`id`，导致重复记录

我认为这会给您留下一些选择；

1.  添加新学生时，请提供包含现有监护人的复选框（或多选）列表以供选择。根据数据库中存在的监护人数量，您可能需要创建一些“自定义”表单元素以便更轻松地选择正确的监护人，否则此列表可能会变得很长
2.  如果您只存储监护人的名字和姓氏，并且监护人不必由多个学生共享（即更改监护人的名字将使其对所有“附加”到该监护人的学生进行更改） ，你可能会通过将关系转换为 hasMany/belongsTo 关系更好；例如，监护人仅附于单个学生。

在所有情况下，问问自己是否只有监护人的名字/姓氏足以唯一识别正确的监护人。毕竟，监护人可能有相同的名字，而您不想最终更改多个学生监护人的详细信息，而实际上他们不是同一个人，只是名字相同吗？*

# html - 防止django中的xss漏洞

> ID：15171140
> 
> 赞同：1
> 
> 时间：2013-03-02T05:34:37.110
> 
> 标签：html, django, security, django-templates, xss

在 Django 文档中它说：

> Django 模板会转义对 HTML 特别危险的特定字符。虽然这可以保护用户免受大多数恶意输入的影响，但它并非完全万无一失。例如，它不会保护以下内容：

```
 <style class={{ var }}>...</style> 
```

> 如果 var 设置为 'class1 onmouseover=javascript:func()'，这可能导致未经授权的 JavaScript 执行，具体取决于浏览器如何呈现不完美的 HTML。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:00:31.830

您可以做的一件事是不允许变量类。你可以使用类似的东西

```
<style class={% if class_foo %}foo{% elif class_bar %}bar{% else %}baz{% endif %}>...</style> 
```

还有一些过滤器可用于防止其他地方的 xss：[https ://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatefilter-escape](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std:templatefilter-escape)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:37:44.407

我对 Django 不是特别熟悉，但在我看来，他们打算指出的错误是属性值周围没有引号，这意味着示例值中的空格会导致字符串的其余部分 ( `onmouseover=...`)被解释为一个单独的属性。相反，您应该像这样加上引号：

```
<style class="{{ var }}">...</style> 
```

如果我理解正确，这将是安全的，因为所有可能干扰引用的字符都被转义了。您可能想验证该解释；例如， write ，使用set to`<span title="{{ var }}">foo</span>`运行模板，然后确保它们在 HTML 中正确转义，并且在浏览器中显示为原始字符。`foo``<>"'&``title`

# ruby-on-rails - 在 ruby on rails 中保存关联后复杂

> ID：15171148
> 
> 赞同：0
> 
> 时间：2013-03-02T05:35:40.380
> 
> 标签：ruby-on-rails, activerecord, callback, ruby-on-rails-3.2, after-save

理论：- 在创建记录后`customer bill`，我发送两组数据和两个不同的模型。一组数据被发送到`ledger`，一组数据被发送到`ledger_line_item`。复杂性在于，在发送数据后，我希望将`ledger_id`其存储在`ledger_line_item`. 代码如下

代码 ：-

```
class CustomerBill < ActiveRecord::Base
  after_create :creating_ledger_line_items, :creating_ledger_items

  def creating_ledger_items
    CustomerLedger.create(:customer_id =>self.customer_id,/*rest of attributes*/)
  end

  def creating_ledger_line_items
    CustomerLedgerLineItem.create(:customer_id =>self.customer_id,/*rest of attributes*/)
  end
end 
```

在我写的分类帐中

```
class CustomerLedger < ActiveRecord::Base
  after_save :update_record_line_items

  def update_record_line_items
    a = CustomerLedgerLineItem.find_by_customer_id(self.customer_id)
    a.update_attributes(:customer_ledger_id => self.id)
  end
end 
```

上面的代码工作正常，没有错误，但`ledger_id`没有发布在`ledger_line_items`. 我无法确定为什么会发生此错误？有没有其他方法可以实现我在创建账单后发布`ledger_id`的目标？`ledger_line_items`需要指导。提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:22:26.240

您可以按如下方式更改模型：

我假设你有`Customer Model`.

```
class Customer < ActiveRecord::Base
  has_one :customer_ledger
  has_many :customer_ledger_line_items, :through => :customer_ledger   
  accepts_nested_attributes_for :customer_ledger

end

class CustomerLedger < ActiveRecord::Base
  has_many :customer_ledger_line_items
  accepts_nested_attributes_for :customer_ledger_line_items
end

class CustomerBill < ActiveRecord::Base
  belongs_to :customer
  after_create :creating_ledger_items, :creating_ledger_line_items

  def creating_ledger_line_items
   cl = self.customer.customer_ledger.build(your_attributes)
   cl.save!
  end

  def creating_ledger_items
    cli = self.customer.customer_ledger.customer_ledger_items.build(your_attributes)
    cli.save!     
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:43:37.150

如果您想在 *after_create* 挂钩上创建模型，我将解释问题所在。

当您在 Rails 中创建模型时，您有 *after_create*、*before_update* 等钩子。所有更新都发生在事务中，因此如果其中任何一个引发异常，则不会更新任何内容。

在这种情况下，在事务中，您试图获取尚不存在的 CustomerLedger 的 ID，因为由于所有内容都在事务中，因此在执行事务之前不会将记录保存到数据库中，这就是因为在 CustomerLedger#update_record_line_items 上，self.id 总是为零。

使用 codeit 提出的嵌套属性可能是解决问题的最佳方法，但如果您觉得嵌套属性是一个高级主题，您可以执行以下操作：

```
class CustomerBill < ActiveRecord::Base

  after_create :created_leder_data

  def create_ledger_data
    customer_ledger = CustomerLedger.build(customer_id: self.customer_id, # Rest of attributes)
    customer_ledger.customer_ledger_line_items.build(customer_id: self.customer_id, # Rest of attributes)
    customer_ledger.save!
  end
end 
```

# objective-c - 无法包含来自 CoreBluetooth 框架的 Objective C 类别

> ID：15171153
> 
> 赞同：2
> 
> 时间：2013-03-02T05:35:57.347
> 
> 标签：objective-c

目前，我正在尝试从 CoreBluetooth 框架中创建类的类别，但是每当我尝试执行以下操作时：新文件-> 目标 C 类别->“我只得到 Foundation 和 UIKit 框架的类，而不是其他类。”

1.  我也尝试添加 CoreBlueTooth 框架，但我仍然没有得到 CoreBluetooth 框架的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:14:16.633

Xcode 帮助您为 Foundation Kit Framework 和 UIKit Framework 创建类别。

用于创建其他类的类别。它的过程相同。新文件-> 目标 C 类别。现在在“Category on”中，你写下你正在创建Category 的CoreBluetooth 框架的类名。

现在，最后一步是在您的类别中导入 CoreBluetooth 框架。比如说，CBCentralManager+MyCategory.h

```
#import <CoreBluetooth/CoreBluetooth.h>
@interface MyCategory (CBCentralManager)

@end 
```

一旦你以这种方式添加它，下次你为这个框架的类创建一个类别时，你会发现“Category on”（在Category Creation）将帮助你做到这一点。它将提供应有的自动完成功能。

# php - PHP日期错误的文本日期，但日期正确

> ID：15171155
> 
> 赞同：1
> 
> 时间：2013-03-02T05:36:04.070
> 
> 标签：php, date

这很奇怪，我试图回显像 2013 年 1 月 1 日星期一这样的日期，但它回显了错误的文本日期。我不知道为什么？

我有：

```
<?php echo date('l, F n, Y', strtotime($do['dueDate'])); ?> 
```

$do['dueDate'] 是“2013-03-22”数据库中的日期。它在mysql中格式化为日期。

当上述内容回响时，它说：2013 年 3 月 3 日，星期五

但是 2013 年 3 月 3 日是一个星期天……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:39:10.763

像这样试试

```
echo date('l ,F j ,Y', strtotime($do['dueDate'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T05:42:14.833

试试这个 ：

```
n --> Numeric representation of a month, without leading zeros --> 1 through 12
j --> Day of the month without leading zeros                   --> 1 to 31

<?php
 $do['dueDate'] =  "2013-03-22";
 echo date('l, F j, Y', strtotime($do['dueDate']));
?> 
```

输出 ：

```
Friday, March 22, 2013 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:40:20.033

用这个

```
<?php  
echo date('l, F j, Y', strtotime("2013-03-22"));  // output Friday, March 22, 2013 
```

工作示例[http://codepad.viper-7.com/rF6w1U](http://codepad.viper-7.com/rF6w1U)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T05:45:01.990

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

n 是月份的数字表示。

试试这个：

```
$date = "2013-03-22";
echo date('l, F j, Y', strtotime($date)); 
```

输出：

```
Friday, March 22, 2013 
```

# python - python 不被识别为内部或外部命令

> ID：15171157
> 
> 赞同：11
> 
> 时间：2013-03-02T05:36:19.917
> 
> 标签：python, cmd

这是一个非常烦人的问题。我在网上四处寻找解决方案，但我发现的只是有关更改 PATH 变量的提示，当然，我确实这样做了。我的 Python 安装目录是 C:\Python27。这是一个 32 位版本。每当我在命令提示符下键入 python 时，它都会说它不被识别为内部或外部命令。目前，我的 PATH 变量设置为 C:\Python27;C:\Python27\Lib\site-packages\;C:\Python27\Scripts。有人有什么想法吗？顺便说一下，我运行 Windows 7（64 位）。我很绝望。哎呀，如果没有任何效果，我想我会尝试双引导 Linux 和 Windows 7 ......

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-26T11:08:30.577

只需添加 Python 路径并再次尝试对我有用（无需重新启动）。

适用于 Python 2.7 的 MS-dos 命令：

```
set PATH=%PATH%;C:\python27\ 
```

Python 3.3 的 MS-dos 命令：

```
set PATH=%PATH%;C:\python33\ 
```

（检查这是否是您安装 Python 的文件夹）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T05:53:36.900

快速修复：可能不是最优雅或长期的修复，但如果您真的很沮丧并且只想让它运行，只需将 python.exe 文件复制粘贴到您的当前目录。这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T05:51:04.200

在 windows 中更改 PATH 变量后，您需要重新启动系统才能生效。

编辑：正如@tdelaney 所述，只需要重新启动 cmd.exe 即可。至少对于 Windows 7 64 位来说是这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T06:01:18.050

将 python 文件夹添加到系统**PATH**变量后，您应该重新启动计算机。

另一个简单的解决方案是：在类似的地方（即已经在**PATH**变量中列出的地方）创建可执行文件的快捷方式`python.exe`（可能在 中`C:\Python27\python.exe`，或类似的地方）。您的快捷方式的名称应该是（也许也应该工作）。我的意思是，出于您的目的，它不能是或类似的。`C:\Windows\system32`**`python``python.exe``python - shortcut`**

 **要查看**PATH**变量的内容，请转到**cmd**并输入`set PATH`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T11:22:18.213

在您的 PATH 中，您的 Python 路径之前是否有前导空格？

**例如：**

```
"C:\somedirectory\bin; C:\Python27;C:\Python27\Lib\site-packages\;C:\Python27\Scripts" 
```

如果路径之间有一个前导空格`"ry\bin; C:\Pyt"`，它将不起作用，通常是导致此类问题的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-27T16:53:30.877

好的，正如你所说，你的 Python 安装目录是 C:\Python27，打开我的电脑，然后打开 c: 驱动器，如果你没有看到“Python27”命名文件夹，然后尝试使用搜索选项搜索它，（在我的情况下我在 old.window 文件夹中找到它，不知道它是如何移动到那里的）将它剪切并粘贴到 c 驱动器中以及诸如程序文件、用户等文件夹中，现在打开 cmd 并键入 python 并按回车键进行检查如果它现在工作，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-24T06:59:50.660

这只是部分答案，但我（反复）发现，当我使用 gui 安装程序而不进行自定义设置时，我会遇到类似的问题。

使用自定义设置选项，然后使用相同的设置，“为所有用户安装”（然后安装到 C://python.version/blah 而不是基于用户的默认结构）将允许安装程序正确设置 PATH。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-09T18:32:46.390

安装时，有一个默认未选中的复选框，但它要求将python添加到环境变量中。重新安装并选中该框。

我宁愿安装者自己做，也不愿自己在杂草中挣扎。**

# css - 使用基础图像上的热点在基础图像顶部触发透明图像层 (.png)

> ID：15171168
> 
> 赞同：0
> 
> 时间：2013-03-02T05:38:25.497
> 
> 标签：css

我不知道从哪里开始。我非常有信心有一个我想要完成的解决方案，但我在寻求帮助时可能没有使用正确的术语。

在我为航空公司建立的网站上，我想显示一张地图的图像。地图/图像将在地图上标记几个关键位置（旅行目的地）。每个航班的地图/图像上的出发点都是相同的。当用户将鼠标指针移动到标记位置时，我希望在出发点和选定标记位置之间出现代表飞机飞行路径的轨迹线（虚线）。当用户将鼠标指针移离标记位置时，轨迹线将消失。

我想我可以使用图像映射并让热点以这样的方式运行，当我用鼠标翻滚时，透明图像（包含我的轨迹线）会出现在我的基本地图/图像的顶部。除了这种效果，我还希望出现一个特定于该位置的文本框。文本框不会很大，但会有几行包含所选位置的一些航班信息。

我不知道从哪里开始这个项目。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:10:22.417

对不起，我昨晚忘记完成了。尽管有办法，但我也没有让它与纯 css 一起使用。这种方式也可以使用

```
document.getElementById(yourid).style.opacity=1; 
```

悬停时。基本上，它是一对堆叠在一起的图像。

[链接到示例](http://jsfiddle.net/CPdrq/1/)

# android - Apple ID 通过 OAuth？

> ID：15171174
> 
> 赞同：12
> 
> 时间：2013-03-02T05:39:30.173
> 
> 标签：android, ios, oauth

我在手机游戏中使用 Facebook 登录和其他 3rd Party 登录的方式是，

1.  客户端集成原生 Facebook SDK（或其他原生 sdk）
2.  客户端登录并获取 OAuth 访问令牌
3.  客户端将访问令牌传递给服务器端，服务器对 Facebook 进行服务器端身份验证
4.  如果服务器端获取 FB Uid，则基于它为用户创建一个帐户或登录到现有帐户。

我的问题是，为了让用户每次都免于登录到服务，是否可以直接在设备上使用 Apple ID 进行这种身份验证流程？Android 和 Google ID 呢？还是我应该研究的其他类型的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2019-06-12T19:18:41.373

我知道这个问题很老了，但它是在搜索“apple oauth”时首先被列出的问题之一......

Apple 在[WWDC 2019](https://developer.apple.com/wwdc19/)上宣布了一项名为**[Sign in with Apple](https://developer.apple.com/sign-in-with-apple/)**的新功能，该功能允许您使用 oauth 进行 Apple 登录，如 facebook、twitter、google 等。可以在此处找到开发人员资源，并在[此处](https://developer.okta.com/blog/2019/06/04/what-the-heck-is-sign-in-with-apple)[进行](https://developer.apple.com/sign-in-with-apple/resources/)很好的介绍。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-23T23:43:40.947

——————更新：———————————————</p>

我们现在可以通过 Apple 登录：[https ://developer.apple.com/sign-in-with-apple/](https://developer.apple.com/sign-in-with-apple/)

——————旧版————————————</p>

对于苹果用户帐户，没有 oAuth 'ID'-provider

[https://discussions.apple.com/thread/6594633?start=0&tstart=0](https://discussions.apple.com/thread/6594633?start=0&tstart=0) [https://en.m.wikipedia.org/wiki/List_of_OAuth_providers](https://en.m.wikipedia.org/wiki/List_of_OAuth_providers)

我个人对这一事实的看法如下。苹果想卖硬件。如果需要软件来支持它，他们会实施或购买它。

苹果可能错了，因为网络应用程序正在集成 Facebook、谷歌、Twitter、Windows Live，有时还集成了微博、LinkedIn 或亚马逊 oAuth。我从未听说过 Apple ID 的 oAuth 计划。

# c# - 2个redis服务器可以共享同一个快照转储文件吗？

> ID：15171179
> 
> 赞同：0
> 
> 时间：2013-03-02T05:40:01.157
> 
> 标签：c#, .net, nosql, redis

是否可以在两台机器上运行 Redis 服务器，并且每台服务器在配置文件中指定相同的快照转储文件名和目录，并且目录和文件显然在两台机器之间共享？

RavenDB 似乎可以正常工作，我可以在我的机器上的 Dropbox 文件夹上设置整个服务器文件目录，并在另一台机器上做同样的事情，同时 RavenDb 服务器从/向数据库读取和写入数据存储在投递箱文件夹中。

我理解两个数据库的概念非常不同，我只是以 RavenDB 的经验为例来解释我试图完成的事情。请注意，这仅用于开发目的，而不是在生产中运行。

我在版本 2.4.5 中将 Redis 作为 Windows 服务运行，并在 C# .Net 4.5 中使用 BookSleeve 作为客户端

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:02:31.727

绝对不是。这将是确保文件损坏的可靠方法。

[您可能希望查看 Redis 集群 ( http://redis.io/topics/cluster-spec](http://redis.io/topics/cluster-spec) ) 的进展，目前处于规范阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:26:08.543

唯一一次在没有启用持久性的系统上使用转储文件是在引导时。但是，如果禁用持久性，则不会从转储文件中读取。

即使转储文件上没有特定于服务器的数据，当两个服务都写入文件时，损坏的可能性也会随时出现。您可以将持久性设置设置为仅在 60 秒内发生 5900 万次更改时才保存。这可以让您在加载时读取文件但不能保存到它。然后你需要使用

`redis config set save ""`

要禁用两者的保存但能够在需要时保存，您将执行上述操作并发出 by save 命令。

我还必须建议不要通过共享文件系统执行此操作，这是您需要在多台机器访问同一文件时执行此操作。在您的情况下，您将 Dropbox 作为您的共享文件系统，但如果您坚持到磁盘，这可能会降低性能。

但最终，我不得不问你为什么认为你需要这个？

如果您将一个用于只读，则使用一两个从属设备并读取从属设备。这样您就不必担心多个实例会破坏持久性文件。这避免了共享存储的需要，因为您有两个节点运行，每个节点都运行一个数据副本。这提供了冗余，您可以相对轻松地进行主/从故障转移设置。

最终，如果你只是用它来开发一些东西，我认为不需要这样的设置。只需将配置存储在您可以下载的位置（Dropbox、github 等）并进行开发。将转储文件简单地复制到 Dropbox 或您需要的任何其他地方并不困难，而且肯定不那么复杂，而不是按照您的描述进行操作。

# c# - Windows Phone 在后台打开闪光灯

> ID：15171181
> 
> 赞同：0
> 
> 时间：2013-03-02T05:40:20.797
> 
> 标签：c#, windows-phone-8, windows-phone, background-process, flashlight

我正在开发一个工具应用程序，我需要一种方法来在单击磁贴时打开相机闪光灯，然后将其保持在后台并在再次单击磁贴时将其关闭。

我不需要任何有关磁贴的帮助，但我只想知道如何打开闪光灯然后继续打开。到目前为止，我看到的所有示例都只是假装自己是相机，然后打开闪光灯。

你知道什么吗？

PS。我计划为 WP 7 和 8 制作这个，但如果你知道一种适用于 WP 8 的方法，那也会对我有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:47:04.053

简单回答是不。

在应用程序运行时，您可以控制相机并打开闪光灯。但是，一旦您退出应用程序（返回按钮）或应用程序暂停（由于电话或按下开始按钮），相机的使用就会暂停。

Windows Phone 确实有[后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)，但这些代理非常有限，[根本不允许访问相机 API（以及许多其他 API）](http://msdn.microsoft.com/en-us/library/hh202962%28v=VS.92%29.aspx)。

# java - ObjectInputStream 抛出 EOFException

> ID：15171184
> 
> 赞同：2
> 
> 时间：2013-03-02T05:40:50.740
> 
> 标签：java, file, file-io, filereader, serializable

我正在编写一个类来跟踪比赛中的比赛数据。我想将这个类存储到一个文件中，所以我使用`ObjectInputStream`. 我正在编写的类实现了可序列化。我得到了一个`EOFException`，我在 SO 和其他地方找到的解决方案都没有真正解决这个问题。

我的文件编写器是：

```
public void writeToFile(String path) {
    File f = new File(path);
    if(f.exists()) f.delete();

    try {
        OutputStream fileOut = new FileOutputStream(path);
        OutputStream bufferOut = new BufferedOutputStream(fileOut);
        ObjectOutput output = new ObjectOutputStream(bufferOut);

        output.writeObject(this);
    } catch(IOException e) {}
} 
```

我的文件阅读器是：

```
public static DivisionDataFTC readFromFile(String path) {
    try {
        InputStream fileIn = new FileInputStream(path);
        InputStream bufferIn = new BufferedInputStream(fileIn);
        ObjectInput input = new ObjectInputStream(bufferIn);

        System.out.println(input.read());
    } catch(Exception e) {
        System.out.println(path);
        e.printStackTrace();
    }

    if(1==1) throw new Error("Could not read DivisionDataFTC at " + path);
    return null;
} 
```

我成功写入数据 - 我已验证文件*不*为空。（如果相关，其内容始终为 7.99kb）。

需要明确的是，ObjectOutputStream 的实例化不会发生错误。这就是使这个问题与众不同的原因 - 错误发生在 readObject() 调用上。我的输出非常长`EOFException`：

```
java.io.EOFException
    at java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2571)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1315)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at java.util.ArrayList.readObject(ArrayList.java:733)
    (...cut out most of this because nobody wants to read it...)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
    at tournamentftc.DivisionDataFTC.readFromFile(DivisionDataFTC.java:297)
    at firstscouting.FIRSTScouting.runGUI(FIRSTScouting.java:82)
    at firstscouting.FIRSTScouting.main(FIRSTScouting.java:101)
Exception in thread "main" java.lang.Error: Could not read DivisionDataFTC at C:\Users\Noah\Desktop\out.ser
    at tournamentftc.DivisionDataFTC.readFromFile(DivisionDataFTC.java:303)
    at firstscouting.FIRSTScouting.runGUI(FIRSTScouting.java:82)
    at firstscouting.FIRSTScouting.main(FIRSTScouting.java:101) 
```

I'm not sure why this is happening. How do I handle this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T05:46:31.983

You should close ObjectOutputStream, try

```
 ObjectOutput output = new ObjectOutputStream(bufferOut);
 output.writeObject(this);
 output.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T05:47:27.653

You need to close your output stream, and you also nee to call readObject() not read.

# php - 如何设置像 Craigslist 这样的电子邮件功能？

> ID：15171186
> 
> 赞同：0
> 
> 时间：2013-03-02T05:40:52.710
> 
> 标签：php, jquery

我想要一个按钮，当按下时会显示一个可能的电子邮件提供商列表（类似于可以在 Craigslist 上找到的那个）。然后用户可以选择适合他们需要的电子邮件提供商，“收件人”和“主题”会自动填充。我知道我可以设置一个使用 Outlook 自动填充的链接，但这不是我想要的。如果有人能指出我正确的方向，我将不胜感激。

[这](http://sfbay.craigslist.org/eby/app/3622750717.html)是一个可以查看功能的 Craigslist 广告。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:47:23.070

首先，您需要编写一个弹出对话框。我建议为此使用 jQuery UI 的插件`dialog`。然后，您需要查看每个电子邮件提供商的 API 文档，并准确确定需要哪些参数以`$_GET`字符串形式传递它们以在其页面上显示您想要的内容。所有自定义的 From、To、Subject 等都由 API 处理，每个电子邮件提供商都是独一无二的。

从这里开始使用 Google Dev API：[https ://developers.google.com/google-apps/email-migration/v1/auth](https://developers.google.com/google-apps/email-migration/v1/auth)

# android - 更新android对象存储的问题

> ID：15171188
> 
> 赞同：0
> 
> 时间：2013-03-02T05:41:35.923
> 
> 标签：android, object

我有一个应用程序，当`listfragment`加载 a 时，它会加载我的*自定义列表适配器*，该适配器通常可以工作，但我现在正在尝试实现*对象存储*，这样即使应用程序关闭并重新打开，对象也会一直存在，并且是仅在用户手动删除它们时才被删除。

我正在尝试在这里实现它，但是使用这种方法，当`listfragment`加载时，屏幕中央会出现一个不会消失的“加载图标”。我通过日志输出发现这是因为从未输入过try块，它之前的代码是，但是try块中的代码不是，为什么会这样？

```
public class MainListFragment extends ListFragment{ 
    OnListSelectedListener mCallback;
    public ObjectStorage mainObjectList = new ObjectStorage();  //creates the list of objects
    SharedPreferences mPrefs;
    int mCurrentPosition = -1;

    // The container Activity must implement this interface so the frag can deliver messages
    public interface OnListSelectedListener {
        /** Called by ListFragment when a list item is selected */
        public void onItemSelected(int position, String schedulename, String[] ampm, boolean[] days, int[] times, boolean vibrate);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onStart() {
        super.onStart();

        updateStorage();
        ByteArrayInputStream byteArray = new ByteArrayInputStream(mPrefs.getString("myobject", "").getBytes());
        ObjectInputStream in;
        try {
            in = new ObjectInputStream(byteArray);
            ObjectStorage updatedStorageList = (ObjectStorage) in.readObject();
            CustomListAdapter adapter = new CustomListAdapter(getActivity(), 
                    R.layout.listview_item_row, updatedStorageList);
            //setListAdapter(new ArrayAdapter<String>(getActivity(), layout, arraylist));
            setListAdapter(adapter);
        } catch (StreamCorruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    public void updateStorage()
    {
        getActivity();//used for MODE_PRIVATE

        //store object list into android system
        mPrefs = getActivity().getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor ed = mPrefs.edit();
        ByteArrayOutputStream arrayOutputStream = new ByteArrayOutputStream(); 
        ObjectOutputStream out;
        try {
            out = new ObjectOutputStream(arrayOutputStream);
            out.writeObject(mainObjectList);
            out.close();
            arrayOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        ed.putString("myobject", arrayOutputStream.toString());
        ed.commit();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:59:14.360

如果 setListAdapter 在 try catch 块中，并且引发异常，则 setListAdapter 将永远不会执行绑定到片段。您可以使用空列表在 try catch 块之外调用 setListAdapter，然后可以在 try catch 方法中手动添加对象。

```
@Override
    public void onStart() {
        super.onStart();
        ObjectStorage emptyList = new ObjectStorage(); // or some like new ArrayList<Object>();
        CustomListAdapter adapter = new CustomListAdapter(getActivity(), 
            R.layout.listview_item_row, emptyList);
setListAdapter(adapter);
    updateStorage();
    ByteArrayInputStream byteArray = new ByteArrayInputStream(mPrefs.getString("myobject", "").getBytes());
    ObjectInputStream in;
    try {
        in = new ObjectInputStream(byteArray);
        ObjectStorage updatedStorageList = (ObjectStorage) in.readObject();

        //setListAdapter(new ArrayAdapter<String>(getActivity(), layout, arraylist));
        adapter.addAll(updatedStorageList);
        adapter.notifyDataSetChanged();
    } catch (StreamCorruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

# php - 根据时区调整发布时间

> ID：15171199
> 
> 赞同：0
> 
> 时间：2013-03-02T05:43:01.490
> 
> 标签：php, javascript, jquery

我有一个脚本，它输出一些数据，并带有一个标签，如 "add 1 hour ago" 。现在，如果服务器上的时区与用户的时区相同，它会做得很好。

我知道用户的时区可以通过 JavaScript 获取，但是如何在数据显示之前将偏移量发送到 PHP 脚本？一个`body onload`函数？将参数附加到将显示内容的主页？

服务器上的时区设置为 UTC

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:50:10.310

您可以在 javascript 中获取用户的时区，然后向某个文件发出 ajax 请求，在该文件中您可以这样做

```
$tz = $_POST['tz'];
date_default_timezone_set($tz);
echo  date('Y-m-d H:i:s'); 
```

# configuration - 如何在 Jetty Server 中给出符号名称

> ID：15171201
> 
> 赞同：1
> 
> 时间：2013-03-02T05:43:25.473
> 
> 标签：configuration, jetty

我在 Jetty 中有一个带有符号链接的 webapps：myapp -> test。我在测试目录下有一个文件 index.xml。

我能够通读它`http://hostname/test/index.xml`。但我想把它读成`http://hostname/myapp/index.xml`.

我应该如何配置应用程序的名称？

# c# - 在excel中双击一个单元格会发生什么？

> ID：15171212
> 
> 赞同：0
> 
> 时间：2013-03-02T05:45:10.370
> 
> 标签：c#, winforms, excel

在excel中双击一个单元格会发生什么？

我想知道这一点，因为我必须控制在我的 excel 查看器中的单元格中输入数据，在这种情况下，除非他双击它，否则不允许用户在单元格中输入任何内容。

我使用以下代码来保护活动工作表在不双击的情况下输入数据：

```
myActiveWorksheet.Protect("password", Type.Missing, true, true, Type.Missing, true,
 Type.Missing,
 Type.Missing,
 Type.Missing,
 Type.Missing,
 Type.Missing,
 Type.Missing,
 Type.Missing,
 false, false, true); 
```

它工作正常，做我想要的。

但是问题发生在用户双击单元格时。我在 ActiveWorkbook 的 SheetBeforeDoubleClick 事件处理程序中编写了以下代码以取消保护工作表，以便用户可以在单元格中输入他的数据：

```
myActiveWorksheet.Unprotect("password");
target.Locked = false; 
```

以及 SheetChange 事件处理程序中的以下代码以再次保护它：

```
target.Locked = true;
myActiveWorksheet.Protect("password", Type.Missing, true, true, Type.Missing, true,
    Type.Missing,
    Type.Missing,
    Type.Missing,
    Type.Missing,
    Type.Missing,
    Type.Missing,
    Type.Missing,
    false, false, true); 
```

但是，第二个保护代码（我的意思是 SheetChange 事件处理程序中的那个）不能正常工作，因此用户只需单击一下就可以输入每个单元格。

我对原因有两个猜测：

1）在双击excel的过程中发生了一些事情，导致工作表不受保护。

2）SheetChange 事件处理程序的目标参数不指向更改的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:37:10.773

艾瓦...

我找到了我的解决方案。我应该使用

```
myActiveWorksheet.Cells.Locked = true; 
```

代替

```
target.Locked = true; 
```

在 SheetChange 事件处理程序中。

# r - 将 2D 矩阵转换为 3D 数组，通过 for 循环，无需 abind

> ID：15171217
> 
> 赞同：1
> 
> 时间：2013-03-02T05:46:48.643
> 
> 标签：r, matrix, 3d, 2d

所以我有 24 个文件，每个文件都有这样的二维矩阵：

```
 V1        V2        V3        V4        V5        V6         V7     
1   0.9750000 0.9750000 0.9750000 1.1577778 1.1577778 1.1577778 1.32777778 1.32777778
2   0.6875000 0.6875000 0.6875000 0.7758333 0.7758333 0.7758333 1.19666667 1.19666667
3   0.6875000 0.6875000 0.6875000 0.7758333 0.7758333 0.7758333 1.19666667 1.19666667
4   0.6875000 0.6875000 0.6875000 0.7758333 0.7758333 0.7758333 1.19666667 1.19666667
5   0.9866667 0.9866667 0.9866667 1.2088889 1.2088889 1.2088889 1.43000000 1.43000000
6   0.9866667 0.9866667 0.9866667 1.2088889 1.2088889 1.2088889 1.43000000 1.43000000
7   0.9866667 0.9866667 0.9866667 1.2088889 1.2088889 1.2088889 1.43000000 1.43000000
8   0.9475000 0.9475000 0.9475000 1.1008333 1.1008333 1.1008333 1.36833333 1.36833333
9   0.9475000 0.9475000 0.9475000 1.1008333 1.1008333 1.1008333 1.36833333 1.36833333
10  0.9475000 0.9475000 0.9475000 1.1008333 1.1008333 1.1008333 1.36833333 1.36833333
11  1.0475000 1.0475000 1.0475000 1.0362500 1.0362500 1.0362500 1.20833333 1.20833333
12  1.0475000 1.0475000 1.0475000 1.0362500 1.0362500 1.0362500 1.20833333 1.20833333
13  1.0475000 1.0475000 1.0475000 1.0362500 1.0362500 1.0362500 1.20833333 1.20833333
14  0.6133333 0.6133333 0.6133333 0.5950000 0.5950000 0.5950000 0.63222222 0.63222222
15  0.6133333 0.6133333 0.6133333 0.5950000 0.5950000 0.5950000 0.63222222 0.63222222
16  0.6175000 0.6175000 0.6175000 0.5950000 0.5950000 0.5950000 0.60000000 0.60000000
17  0.6175000 0.6175000 0.6175000 0.5950000 0.5950000 0.5950000 0.60000000 0.60000000
18  0.6175000 0.6175000 0.6175000 0.5950000 0.5950000 0.5950000 0.60000000 0.60000000
19  0.5366667 0.5366667 0.5366667 0.5150000 0.5150000 0.5150000 0.49000000 0.49000000 
```

我想把数据放在 3D 矩阵中。所以我读取一个文件，放入 3D 数组，然后读取下一个文件，然后将新数据放在第一个文件上，但不重写。

我得到了读取数据部分，我像这样设置我的 3D 数组：

```
k<-24
data<-array(0,dim=c(200,200,length(k)) 
```

200,200,24 基本上描述了每个文件中的数据元素数量（40000 个元素）和 24 个文件。

然后我这样做：

```
for (i in 1: length(k) {
    listing <- read.csv(datafiles[i]) 
```

数据维度是 200 201，所以下一步要做 200 到 200

```
data2<- listing[,-1] 
```

现在它是 2D 矩阵，所以我想把它们放在我之前制作的 3D 数组中。我这样编码：

```
data3[,,i]<-matrix(data2, ncol=200,nrow=200)
} 
```

所以在我完成读取和重塑数据框后，我应该得到 24 个数据（200 x 200）文件作为一大堆矩阵。就像一盒数据......但是我用这段代码得到了这个错误：

```
Error in data3[, , i] <- matrix(data2, ncol =200, nrow = 200) : 
  incorrect number of subscripts 
```

有没有人对这种编码有任何建议？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T06:12:33.893

我假设你的文件在同一个目录中，我这样继续

```
temp = list.files(pattern="*.csv")
named.list <- lapply(temp, read.csv) 
```

要获得 200 x 200 x 24 阵列，请继续：

```
require(abind)
arr <- abind(named.list,along=3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:48:35.803

一个笨拙的方法没有 abind 但仍会导致所需的结果是：

首先，读入你的数据不是作为一个 data.frame 而是作为一个向量

```
dat1 <- as.vector( unlist( read.csv( "dat1.csv" ) ) )   
dat2 <- as.vector( unlist( read.csv( "dat2.csv" ) ) ) 
# and so on, or whatever for loop you are using 
```

然后，将它们连接到一个包含 960000 个元素的向量

```
x <- c( dat1, dat2, ... )   # or whatever your names are 
```

最后，将该向量转换为所需的数组

```
x <- array( x, dim = c( 200, 200, 24 ) ) 
```

# dojo - 如何在dijit进度条的进度更改事件中调用函数

> ID：15171219
> 
> 赞同：2
> 
> 时间：2013-03-02T05:46:57.833
> 
> 标签：dojo

我正在使用 dojo1.3 工具包进行拖放文件上传，我无法将其升级到 Dojo 的最新版本，因为所有其他工作都是使用 dojo1.3 完成的。

我的问题是，我想在每次更改子进度条的进度时调用一个函数来更新父进度条的进度。

我在 dojo1.8 中看到，dojo1.3`dijit.watch()`中没有此功能。

dojo1.3中还有其他方法吗，我完全卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:41:11.760

在 1.4 及更高版本（不知道 1.3）中，fileUploader 有一个`onProgress`事件，您可以覆盖该事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T20:04:00.233

您可以选择从 Dojo 1.8 导入一些文件，这些文件提供了所需的功能。
这样您就不必完全迁移到 Dojo 1.8。

但这需要小心完成，以免影响您之前的代码。

我已经为 Dojo TimeStamp dijit 尝试过这个，它对我来说效果很好。

# android - android_winusb.inf 中的 SingleAdbInterface、CompositeAdbInterface 和 SingleBootLoaderInterface 是什么

> ID：15171223
> 
> 赞同：5
> 
> 时间：2013-03-02T05:47:22.077
> 
> 标签：android, mobile, usb, adt

我有一个 Android 设备，我想将其用于开发（USB 调试）。显然，`Android Composite ADB Interface`ADT 的 USB 驱动程序不支持。

然后我尝试从设备管理器中找到它的硬件 ID：

```
USB\VID_0BB4&PID_0C03&REV_0255&MI_01
USB\VID_0BB4&PID_0C03&MI_01 
```

并尝试在`android_winusb.inf`. inf 文件是这样的：

```
;Google Nexus (generic)
%SingleBootLoaderInterface% = USB_Install, USB\VID_18D1&PID_4EE0
%SingleAdbInterface%        = USB_Install, USB\VID_18D1&PID_4EE1
%CompositeAdbInterface%     = USB_Install, USB\VID_18D1&PID_4EE2
%CompositeAdbInterface%     = USB_Install, USB\VID_18D1&PID_4EE2&MI_01 
```

如何将 USB ID 定义到 .inf 文件中？是什么`SingleBootLoaderInterface`，为了`SingleAdbInterface`什么`CompositeAdbInterface`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T12:35:29.340

您可以如下定义您的设备：

```
; HTC Dream
%SingleAdbInterface%        = USB_Install, USB\VID_0BB4&PID_0C03
%CompositeAdbInterface%     = USB_Install, USB\VID_0BB4&PID_0C03&MI_01 
```

您可以在其他问题中找到更多解释：[Google Android USB Driver and ADB](https://stackoverflow.com/questions/9709263/google-android-usb-driver-and-adb)

# c# - SimpleMembership 更改用户名

> ID：15171226
> 
> 赞同：1
> 
> 时间：2013-03-02T05:47:32.303
> 
> 标签：c#, asp.net-mvc-4, simplemembership

我在 MVC4 应用程序中使用 SimpleMembership，需要用户更改自己的用户名的能力。

我的功能正常工作，所以当用户更改他们的用户名时，它就可以工作。但是，当调用 Roles.IsUserInrole() 之类的东西时，它会失败，因为 User.Identity.Name 设置为他们登录的内容，而不是新值。该值不再存在于数据库中，因为它们已更改名称。

我看不到使用用户名更新登录用户上下文的方法。在大多数情况下，我可以将用户 ID 存储在会话中并在执行查询时检索它，但我使用 Roles 方法在失败的视图中显示数据。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T00:26:02.353

这是我目前（工作）的解决方案：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Edit(AccountEditModel model)
    {
        if (ModelState.IsValid)
        {
            if (HasSensitiveInformationChanged(model)) // model.EmailAddress.ToLower() != User.Identity.Name.ToLower()
            {
                if (Membership.ValidateUser(User.Identity.Name, model.Password)) // && WebSecurity.IsCurrentUser(User.Identity.Name)) //redundant?
                {
                    using (UsersContext db = new UsersContext())
                    {
                        UserProfile user = db.UserProfiles.FirstOrDefault(u => u.EmailAddress.ToLower() == User.Identity.Name.ToLower());

                        if (user != null)
                        {
                            user.EmailAddress = model.EmailAddress;
                            db.SaveChanges();
                            WebSecurity.Logout();
                            WebSecurity.Login(model.EmailAddress, model.Password);
                            return RedirectToAction("Index", "Search");
                        }
                        else
                        {
                            ModelState.AddModelError("", "Could not find user. Please try logging in again.");
                        }
                    }
                }
                else
                {
                    ModelState.AddModelError("","Could not change email address. Please verify your password and try again.");
                }
            }
            else
            {
                //no change
                return RedirectToAction("Index", "Search");
            }
        }

        return View("Index", model);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:59:21.920

我认为您无法更改用户名字段（如果您能告诉我您是如何实现的，那就太好了）。

我看到的唯一解决方案是您在更改用户名后强制用户注销，因此当他们重新登录时，他们将拥有正确的 User.Identity.Name。

# android - 在 Android 中关闭弹出窗口

> ID：15171227
> 
> 赞同：4
> 
> 时间：2013-03-02T05:47:33.903
> 
> 标签：android, android-widget, popup

我有以下功能，它通过单击菜单按钮调用弹出窗口。它有一个确定按钮来关闭弹出窗口。但该`onclick`功能不会在按下按钮时启动。另外，当按下后退按钮时，我需要关闭弹出窗口。

```
 LayoutInflater inflater = (LayoutInflater) MainActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    final PopupWindow pw = new PopupWindow(inflater.inflate(R.layout.about_popup, null, false),400,440, true);

    pw.showAtLocation(lv, Gravity.CENTER, 0, 0);
    View popupView=inflater.inflate(R.layout.about_popup, null, false);
    Button close = (Button) popupView.findViewById(R.id.okbutton);
    close.setOnClickListener(new OnClickListener() {

      public void onClick(View popupView) {
        pw.dismiss();
      }
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T05:57:10.853

当前，您正在将不同的 View 实例传递给`PopupWindow`并尝试在不同的实例中查找 Button 使用您在 PopupWindow 中传递的相同实例来查找按钮。将您的代码更改为：

```
 LayoutInflater inflater = (LayoutInflater) MainActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View popupView = layoutInflater.inflate(R.layout.about_popup, null, false);
  final PopupWindow pw = new PopupWindow(popupView,400,440, true);

  pw.showAtLocation(lv, Gravity.CENTER, 0, 0);
    Button close = (Button) popupView.findViewById(R.id.okbutton);
    close.setOnClickListener(new OnClickListener() {

      public void onClick(View popupView) {
        pw.dismiss();
      }
    }); 
```

第二种方法是使用实`PopupWindow`​​例在膨胀布局内的当前窗口上再次找到按钮作为按钮：

```
Button close = (Button) pw.findViewById(R.id.okbutton);
close.setOnClickListener(new OnClickListener() {

          public void onClick(View popupView) {
            pw.dismiss();
          }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:01:39.697

```
CustomDialogClass cdd = new CustomDialogClass(this,
                "Internet Connection Error",
                "Sorry, no internet connection.Feeds cannot be refreshed",
                "Alert");
        cdd.show();

public class CustomDialogClass extends Dialog implements
    android.view.View.OnClickListener {
String txtTitle, txtText, txtType;
Button btn;
TextView alertText;
ImageView imgVw;

public CustomDialogClass(Context context, String title, String text,
        String type) {
    super(context);
    txtTitle = title;
    txtText = text;

}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alert_layout);
    imgVw = (ImageView) findViewById(R.id.iconImgview);

    alertText = (TextView) findViewById(R.id.AlertText);
    alertText.setText(txtText);

    btn = (Button) findViewById(R.id.dismis_dialog);
    btn.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    dismiss();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T05:57:00.513

改变这个

```
 View popupView=inflater.inflate(R.layout.about_popup, null, false);
    Button close = (Button) popupView.findViewById(R.id.okbutton); 
```

至

```
 Button close = (Button) pw.findViewById(R.id.okbutton); 
```

# ruby - 将 Nokogiri::XML::Document 转换为 Nokogiri::HTML::Document

> ID：15171231
> 
> 赞同：3
> 
> 时间：2013-03-02T05:47:56.653
> 
> 标签：ruby, casting, xml-serialization, html-parsing, nokogiri

我想使用 XSL 将 XML 文档转换为 HTML，稍微修改一下，然后将其渲染出来。这基本上就是我正在做的事情：

```
source = Nokogiri::XML(File.read 'source.xml')
xsl = Nokogiri::XSLT(File.read 'transform.xsl')
transformed = xsl.transform(source)
html = Nokogiri::HTML(transformed.to_html)
html.title = 'Something computed' 
```

`Stylesheet::transform`总是返回`XML::Document`，但我需要一个`HTML::Document`实例来使用像`title=`.

上面的代码可以工作，但是导出和重新解析为 HTML 实在是太糟糕了。由于目标是源的子类，因此必须有更有效的方法来执行转换。

我该如何收拾这个烂摊子？

作为一个附带问题，Nokogiri 在处理文档类型、不了解`<meta charset=`等方面通常让我印象深刻……有人知道具有类似功能的不那么自动魔术库吗？

非常感谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T17:53:55.007

`HTML::Document`extends `XML::Document`，但 HTML 文档中的各个节点只是普通的`XML::Nodes`，即没有任何`HTML::Nodes`. 这提出了一种将 XML 文档转换为 HTML 的方法，方法是创建一个新的空`HTML::Document`并将其设置`root`为 XML 文档的空：

```
html = Nokogiri::HTML::Document.new
html.root= transformed.root 
```

新文档具有类似`title=`和`meta_encoding=`可用的 HTML 方法，并且在序列化时创建一个 HTML 文档而不是 HTML：添加 HTML 文档类型，正确使用空标签，如`<br>`，在适当的地方显示最小化的属性（例如`<input type="checkbox" selected>`），并且不会转义类似`>`in`<script>`块。

# silverlight - RadCartesianChart BarSeries PointTemplate 的绑定路径

> ID：15171232
> 
> 赞同：0
> 
> 时间：2013-03-02T05:48:09.337
> 
> 标签：silverlight, data-binding, charts, telerik

我有以下 XAML：

```
<telerik:RadCartesianChart x:Name="lifeChart" Grid.Row="1" Palette="Windows8">
            <telerik:RadCartesianChart.HorizontalAxis >
                <telerik:LinearAxis Maximum="200" Title="Average Life Span (seconds)"/>
            </telerik:RadCartesianChart.HorizontalAxis>
            <telerik:RadCartesianChart.VerticalAxis>
                <telerik:CategoricalAxis />
            </telerik:RadCartesianChart.VerticalAxis>
            <telerik:BarSeries ValueBinding="AvgLifetime" CategoryBinding="GamerTag" IsHitTestVisible="True">
                <telerik:BarSeries.PointTemplate>
                    <DataTemplate>
                        <Rectangle Fill="{Binding ConverterParameter=GamerTag, Converter={StaticResource chartColorConv}, Mode=OneWay}" Tag="{Binding Source=DeathCount,Path=GamerTag}" MouseLeftButtonUp="Rectangle_MouseLeftButtonUp_1" Cursor="Hand" IsHitTestVisible="True" />
                    </DataTemplate>
                </telerik:BarSeries.PointTemplate>

            </telerik:BarSeries>
        </telerik:RadCartesianChart> 
```

CategoryBinding 和 ValueBinding 工作正常（所以我已连接到我的数据对吗？）并且 Fill 绑定半工作（调用转换器但将字符串 GamerTag 作为参数而不是绑定数据传递），但标签绑定不工作。当我单击矩形并处理单击时，标记始终为空。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T20:55:38.107

您在值转换器的参数中收到字符串“GamerTag”，因为这是您传递给它的内容。您不能在 ConverterParameter 属性上使用绑定表达式，如果您在 XAML 中定义该参数，它将始终被解释为字符串。

如果 Binding `Tag`with`{Binding Path=Category}`可以满足您的要求，并且您希望转换器具有相同的值，那么您可以对 Binding on Fill 进行类似的更改。

```
<Rectangle Fill="{Binding Path=Category, Converter={S... 
```

# java - 再次调用同一页面不会将数据添加到数据库

> ID：15171238
> 
> 赞同：1
> 
> 时间：2013-03-02T05:49:40.870
> 
> 标签：java, mysql, jsp, javabeans

我有一个 jsp 页面，它获取两个参数 1 用于添加另一个用于查看。这个 jsp 页面被命名为 sucessAdmin.jsp。我有另一个调用 sucessadmin.jsp 的 jsp 页面 admin1.jsp。admin1.jsp 有一个表单视图和 add.so，如果我按下视图按钮，它会调用 sucessAdmin.jsp 并显示数据。当我按下添加按钮时，它会显示一个输入数据的表单，但它不会向 mysql DB 添加值。当我再次调用同一页面时，它不会添加数据。请告诉我哪里出错了

这是豆子

```
package sucessAdmin;
import java.sql.*;
import java.io.*;
import java.util.*;
public class sucessAdmin {
private String question;
private String answer;

private String questionNo;
private String opt1;
private String opt2;
private String opt3;
private String opt4;
public sucessAdmin()
{

}

public void setQuestion(String question)
{
    this.question=question;
}
public String getQuestion()
{
    return question;
}
public void setAnswer(String answer)
{
    this.answer=answer;
}
public String getAnswer()
{
    return answer;
}
public void setQuestionNo(String questionNo)
{
    this.questionNo=questionNo;
}
public String getQuestionNo()
{
    return questionNo;
}
public void setOpt1(String opt1)
{
this.opt1=opt1;
}
public String getOpt1()
{
    return opt1;
}
public void setOpt2(String opt2)
{
this.opt2=opt2;
}
public String getOpt2()
{
    return opt2;
}
public void setOpt3(String opt3)
{
this.opt3=opt3;
}
public String getOpt3()
{
    return opt3;
}
public void setOpt4(String opt4)
{
this.opt4=opt4;
}
public String getOpt4()
{
    return opt4;
}

    public Vector getDetails()
    {
        int x=0;
        Vector v= new Vector();
        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            String url="jdbc:mysql://localhost:3306/Ontest";
            Connection con=DriverManager.getConnection(url,"root","spanwave");
            ResultSet rs=null;
            Statement st=con.createStatement();
            rs=st.executeQuery("select * from questions");
            String quer="SELECT * FROM questions";

                     rs=st.executeQuery(quer);
                    ResultSetMetaData rsmd = rs.getMetaData();
                    int NumOfCol=0;
                    NumOfCol=rsmd.getColumnCount();
                    System.out.println("Query Executed!! No of Colm="+NumOfCol);
            while(rs.next())
            {

                for(int i=1;i<NumOfCol+1;i++)
                {
                    if(i==NumOfCol)
                        {System.out.print(rs.getString(i));System.out.println();}else
                System.out.print(rs.getString(i)+" ");
                    v.addElement(rs.getString(i));
                }

            }

        }
        catch(Exception e)
        {
            System.out.println(e);
        }
        return v;
    }
    public void addDetails(String question,String opt1,String opt2,String opt3,String opt4,String questionNo,String answer)
    //public void addDetails()
    {
        int qnNo=0;

        try
        {
            Class.forName("com.mysql.jdbc.Driver");
            String url="jdbc:mysql://localhost:3306/Ontest";
            Connection con=DriverManager.getConnection(url,"root","spanwave");
            ResultSet rs=null;
            qnNo=Integer.parseInt(questionNo);
            PreparedStatement ptst=con.prepareStatement("insert into questions values(?,?,?,?,?,?,?)");
ptst.setString(1,question );
ptst.setString(2,opt1 );
ptst.setString(3,opt2 );
ptst.setString(4,opt3 );
ptst.setString(5,opt4 );
ptst.setInt(6, qnNo);
ptst.setString(7,answer);
ptst.executeUpdate();

                    int NumOfCol=0;
                    System.out.println("Query Executed!! No of Colm="+NumOfCol);

    }
        catch(Exception e)
        {
            System.out.println(e);
        }

}
} 
```

这是调用页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<jsp:useBean id="admin" scope="request" class="admin.adminBean">
<jsp:getProperty property="userId" name ="admin"/>
</jsp:useBean>
<jsp:useBean id="sucessAdmin" scope ="request" class="sucessAdmin.sucessAdmin"></jsp:useBean>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title><jsp:getProperty property="userId" name ="admin"/></title>
</head>
<body bgcolor="pink">
<form action="details.jsp" method="get">
view questions<input type="radio" name="details" value="view"><br>
edit questions
<input type="radio" name="details" value="edit"><br>
add questions

<input type="radio" name="details" value="add"><br>
<input type="submit" name="submit" value="submit">
</form>
</body>
</html> 
```

这是被调用的页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ page import="java.util.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><jsp:useBean id="sucessAdmin" scope ="request" class="sucessAdmin.sucessAdmin">

</jsp:useBean>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Details</title>
</head>
<body>

<%String input; %>
<%=input=request.getParameter("details") %>
<%if (input.equals("view")) {
    %><%Vector v; %>
    <%v=(Vector)sucessAdmin.getDetails();
out.println(sucessAdmin.getDetails()); }
%><%
if(input.equals("add"))
    {out.println("addds");
    %>
    <form method="POST" action="details.jsp">
<table>
<tr>
<td>question<input type="text" name="question" value="" /></td>
</tr>
<tr>
<td>opt1<input type="text" name="opt1" value="" /></td>
</tr>
<tr>
<td>opt2<input type="text" name="opt2" value="" /></td>
</tr>
<tr>
<td>opt3<input type="text" name="opt3" value="" /></td>
</tr>

<tr>
<td>opt4<input type="text" name="opt4" value="" /></td>
</tr>
<tr>
<td>questionNumber<input type="text" name="questionNo" value="" /></td>
</tr>
<tr>
<td>answer<input type="text" name="answer" value="" /></td>
</tr>

</table><br><input type="hidden" name="details"/>
<br><input type="submit" name="submit" value="submit"/>
<%sucessAdmin.addDetails("question","opt1","opt2","opt3","opt4","questionNo","answer");%>
</form>

    <%out.println("adding");}
%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:13:40.473

```
replace <%sucessAdmin.addDetails("question","opt1","opt2","opt3","opt4","questionNo","answer");%> 
```

和

```
<% 
      String question = request.getParameter("question");
      String opt1= request.getParameter("opt1");
      String opt2 = request.getParameter("opt2");
      String opt3 = request.getParameter("opt3");
      String opt4 = request.getParameter("opt4");
      String questionNo = request.getParameter("questionNo");
      String answer = request.getParameter("answer");
      if(question!=null && opt1!=null && opt2 != null
         opt3!=null && opt4 !=null && questionNo!=null && answer!=null) 
      {
           sucessAdmin.addDetails(question,opt1,opt2,opt3,opt4,questionNo,answer);
       }
   %> 
```

试试这个，让我们希望它有效..

# javascript - 访问 JSON 字符串时出现 TypeError

> ID：15171239
> 
> 赞同：1
> 
> 时间：2013-03-02T05:49:47.457
> 
> 标签：javascript, node.js, casting, websocket, mongoose

我正在使用[http://blockchain.info/api/api_websocket](http://blockchain.info/api/api_websocket) websocket api。

我的每笔交易的 json 对象如下所示：

```
{
    "op": "utx",
    "x": {
        "hash": "f6c51463ea867ce58588fec2a77e9056046657b984fd28b1482912cdadd16374",
        "ver": 1,
        "vin_sz": 4,
        "vout_sz": 2,
        "lock_time": "Unavailable",
        "size": 796,
        "relayed_by": "209.15.238.250",
        "tx_index": 3187820,
        "time": 1331300839,
        "inputs": [
            {
                "prev_out": {
                    "value": 10000000,
                    "type": 0,
                    "addr": "12JSirdrJnQ8QWUaGZGiBPBYD19LxSPXho"
                }
            }
        ],
        "out": [
            {
                "value": 2800000000,
                "type": 0,
                "addr": "1FzzMfNt46cBeS41r6WHDH1iqxSyzmxChw"
            }
        ]
    }
} 
```

我正在使用 json.x.out[0].addr 访问“addr”变量，该变量在控制台中打印得很好。

但是，当我通过猫鼬运行命令时：

```
Game.findOne({address:json.x.out[0].addr},function (err, game) { 
```

导致以下错误：

```
TypeError: Cannot read property 'x' of undefined
    at Promise.<anonymous> (/Users/michael/Desktop/DugleyBit/app.js:176:25)
    at Promise.addBack (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/promise.js:133:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/promise.js:66:38)
    at Promise.complete (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/promise.js:77:20)
    at Query.findOne (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/query.js:1607:15)
    at model.Document.init (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/document.js:227:11)
    at model.init (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/model.js:196:36)
    at Query.findOne (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/query.js:1605:12)
    at exports.tick (/Users/michael/Desktop/DugleyBit/node_modules/mongoose/lib/utils.js:404:16) 
```

不是字符串吗？我怎样才能转换它？

谢谢

编辑：

请注意，json 格式正确：

```
var json = JSON.parse(message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:38:17.353

看起来`json`变量在您调用的范围内不可用`Game.findOne`。

# vb.net - vb net：放大设计师

> ID：15171240
> 
> 赞同：0
> 
> 时间：2013-03-02T05:50:05.723
> 
> 标签：vb.net, zooming, scale, designer

我正在谷歌搜索一种方法来调整表单和控件的大小，并遇到了一些提到 Control.scale 的东西。如何使用 control.scale 方法将所有内容缩小到我想要的大小。

另外，有没有办法可以在设计器中缩小表单。我想创建一个 1280X800 的表格，但我的屏幕是 1024X768。我希望能够缩小以查看整个表单，但其大小仍为 1280X800。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:11:24.580

您可以使用一个名为 .similary 的属性`tablelayout panel`来适应您`form`的所有内容，也需要根据您的要求 [top,bottom,left,right] 为内部分配该属性以实现相同的效果。`resolutions``anchor``controls``tablelayout panel`

顺便说一句，您必须`percentage`用于设置`column's width`and `row's height`。

简单地说，这种设计方式称为`fluid designing`。

## [表格布局面板](http://msdn.microsoft.com/en-us/library/h21wykkx.aspx)

# java - 将新列添加到表中，列名称为当前日期

> ID：15171245
> 
> 赞同：2
> 
> 时间：2013-03-02T05:50:35.293
> 
> 标签：java, database

我是 Java 新手。我想为考勤管理系统构建简单的 Java 应用程序。为此，我想在现有表中创建一个新列，列名应该是当前日期。我使用日期选择器获取当前日期. 我为此编写了以下代码，但表中的列名设置为“+s1+”。这是我的代码：

```
 String s="";  
    s=date.getText();//selected data from date picker
    s.replace(".","_");
    try{
       Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
       con = DriverManager.getConnection("jdbc:odbc:vasu");
       st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
       //System.out.println("ALTER TABLE attendance  ADD "+s+" varchar(50);");
       rs = st.executeQuery("ALTER TABLE attendance  ADD '"+s+"' varchar(50);");
    }
    catch(Exception ex){
    } 
```

任何人都可以帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T05:56:40.773

试试这个

`executeUpdate`如果查询正常，则返回 1，否则返回 0

```
String s="";  
s=date.getText();//selected data from date picker
s.replace(".","_");
try
{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    ResultSet acrs;
    String op = "jdbc:odbc:vasu";
    Connection cnn = DriverManager.getConnection(op,"username", "password");
    Statement mystmt = cnn.createStatement();

    int successOrFailure = mystmt.executeUpdate("ALTER TABLE attendance ADD '"+s+"' VARCHAR(50)");
    //executeUpdate return 1 if the query work properly otherwise it will return 0

}catch(Exception e)
{
    System.out.println("Exception:"+e);
    e.printStackTrace();
} 
```

# python - 当我们需要Rlocking线程时无法理解python

> ID：15171247
> 
> 赞同：0
> 
> 时间：2013-03-02T05:50:48.587
> 
> 标签：python, multithreading, locking

`Rlock`当我需要使用而不是简单时，谁能给我代码示例当`lock` 我需要 Rlock 时我无法找到用例

我已阅读此内容，但无法实际使用它

> Normal Lock 对象不能被多次获取，即使是同一个线程。如果同一调用链中的多个函数访问锁，这可能会带来不良的副作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:06:56.633

对于粗粒度锁来说，这主要是一个问题（你在持有锁的同时做了很多工作）。如果线程多次尝试获取锁，它将挂起。随着系统变得复杂并且许多功能获得锁，风险也会增加。假设函数 f1, f2, ... fn 都获得了锁。如果 f1 调用 f2，它将挂起。如果 f1 调用了其他函数并且该函数调用了 f2，它将挂起。你最终实现了两组函数——获得锁的函数和实现功能的函数。“outies”和“innies”。RLocks 让您对此更加放松。

# java - How to avoid parent object methods while using reflection in Java

> ID：15171249
> 
> 赞同：2
> 
> 时间：2013-03-02T05:51:27.743
> 
> 标签：java, reflection

I am assigning a child class object to a parent class reference. Using reflection i want to access the child class setter methods. I am able to get the child class setter methods but getting the setter method of parent class object too. I am explicitly checking the parent class setter method by hard coding the method names now. How can I avoid this?

```
public abstract class A {

String val;

public String getVal() {
    return val;
}

public void setVal(String val) {
    this.val = val;
}
}

public class B  extends A{

String valB;

public String getValB() {
    return valB;
}

public void setValB(String valB) {
    this.valB = valB;
}

} 
```

* * *

```
A a  = new B();

        for (Method method : a.getClass().getMethods()){
             if (isSetter(method) && !(checkUnwantedMethods(method.getName()))) {
                 method.invoke(a, "someValue");
             }
         }

        public static boolean isSetter(Method method){
              if(!method.getName().startsWith("set")) return false;
              if(method.getParameterTypes().length != 1) return false;
              return true;
        }

        public boolean checkUnwantedMethods(String methodName){

            return (methodName.equals("setVal");

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:05:29.613

Just use `getDeclaredMethods()` and it will give you only the methods of the actual runtime object (i.e. considering dynamic binding) excluding inherited methods.

The problem that `getMethods()` retrieves inherited methods as well.

# wcf - WCF 自托管服务配置

> ID：15171250
> 
> 赞同：2
> 
> 时间：2013-03-02T05:51:29.087
> 
> 标签：wcf, get

我有一个非常简单的 WCF 服务，它托管在 Windows 应用程序中。我正在尝试使用**GET**方法访问该服务，但只是得到一个空页面。我想配置有问题，但我不知道是什么。这是代码：

**WCFService.cs**

```
namespace WCFServiceApp
{
    [ServiceContract]
    public class WCFService
    {
        [OperationContract]
        [WebGet]
        public int GetNumbers()
        {
            return 12345;
        }
    }
} 
```

**Form1.cs**

```
private static Uri baseAddress = new Uri("http://localhost:8090");
private ServiceHost host = new ServiceHost(typeof(WCFService), baseAddress);

protected override void OnLoad(EventArgs e)
{
    ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
    smb.HttpGetEnabled = true;
    smb.MetadataExporter.PolicyVersion = PolicyVersion.Policy15;
    host.Description.Behaviors.Add(smb);
    host.Open();
    base.OnLoad(e);
} 
```

**应用程序配置**

```
<?xml version="1.0"?>
<configuration>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
  <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="WCFServiceBehavior">
                    <serviceMetadata httpGetEnabled="true" />
                    <serviceDebug includeExceptionDetailInFaults="false" />
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
              <behavior name="WebBehavior">
                <webHttp />
              </behavior>
            </endpointBehaviors>
        </behaviors>
        <services>
            <service name="WCFService" behaviorConfiguration="WCFServiceBehavior">
              <endpoint address="ws" binding="wsHttpBinding" contract="WCFService">
              </endpoint>
              <endpoint address="" behaviorConfiguration="WebBehavior" binding="webHttpBinding" contract="WCFService">
              </endpoint>
              <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

当我用浏览器点击**localhost:8090**时，我看到了 WCF 欢迎页面。当我点击**localhost:8090/GetNumbers**时，只是得到一个空页面而不是数字。

# firefox - @font-face 的问题

> ID：15171251
> 
> 赞同：0
> 
> 时间：2013-03-02T05:51:37.370
> 
> 标签：firefox, font-face

我正在使用@font-face。我不得不把它分成两部分，因为 Firefox 继续使用第一种字体并且它显得很糟糕。实际上它仍然在 Firefox 中显示模糊/像素化。有什么解决方案吗？无论如何，现在一切似乎都很好，但我无法让任何大胆的功能发挥作用。无论是在 CSS 中还是直接在 html 中，我在代码中的哪个位置添加它似乎都无关紧要，它可以使字体更粗。这是正常的吗？

```
@font-face {
font-family: TektonPro-BoldExt;
src:url('../fonts/TektonPro-BoldExt.eot') format('embedded-opentype'), /* For IE */ 
    url('../fonts/TektonPro-BoldExt.eot?#iefix') format('embedded-opentype'), /* For fix-IE */
    url('../fonts/TektonPro-BoldExt.woff') format('woff'), /* For new-IE */
    url('../fonts/TektonPro-BoldExt.otf') format('opentype'), /* For non-IE */
    url('../fonts/TektonPro-BoldExt.ttf') format('truetype'), /* For non-IE */
    url('../fonts/TektonPro-BoldExt.svg') format('svg'); /* For non-IE */
font-weight: bolder;
font-style: normal;
}

@font-face {
font-family: TektonPro-BoldExt-FF;
src:url('../fonts/TektonPro-BoldExt.otf') format('opentype'); /* For Firefox */
font-weight: bolder;
font-style: normal;
} 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T05:54:16.240

并非所有字体都有可以呈现为粗体的粗体。您可以尝试`font-weight`以 100 为增量进行调整，看看是否有任何不同。

关于使用第一种字体的 Firefox，您的意思是它正在缓存您以前使用的另一种字体吗？

# java - 我正在向我的 JTable（实现 AbstractTableModel）添加一个空行。如何实时更新我的 模型？

> ID：15171253
> 
> 赞同：0
> 
> 时间：2013-03-02T05:53:01.720
> 
> 标签：java, arrays, swing, jtable, abstracttablemodel

好的，所以我认为标题就是我要在这里问的全部内容。

我的`AbstractTableModel`工作正常，当我想添加一个空行时，我使用以下代码来执行此操作：

```
public void addRow() {
    Object[][] oldData = data;
    data = new Object[oldData.length + 1][3];

    // Copy old data to new data
    for (int x = 0; x < oldData.length; x++) { 
        data[x] = oldData[x]; 
    } 

    // Append new row 
    data[oldData.length] = new Object[] {"", "", false}; 

    fireTableRowsInserted(data.length - 2, data.length - 1);
} 
```

现在，由于我显示的是一个空行，我希望用户编辑它，并且我假设用户会。现在，如何确保在用户进行更改时将数据保存在我的数组中？或者，如果这不可能，还有什么更好的选择？

好的，所以我应该解释一下我想要做什么：

![在此处输入图像描述](../Images/8e8c92784c07a6f80052762bb3f55a28.png)

我正在从文件中加载内容，并显示为表格。现在，用户可以在单击`Add Row`按钮时向表中添加新行。这将为每次点击添加 1 个空行。（在上图中是按下按钮两次的实例。

现在，我希望用户可以编辑单元格，然后可能会删除一些行（可能），但是在单击`Save Database`按钮时，表中的更新数据是存储。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:23:12.073

通过比较几种方法，您可能会更好地理解：

*   在此[示例](https://stackoverflow.com/a/7519403/230513)中，后台线程或按钮都可以将新行添加到表中。`Runnable`后台线程通过 EDT 对 的实例进行排序`invokeLater()`。它在概念上更容易理解，但也更容易出错。

*   [`SwingWorker`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)封装对共享数据的排序访问。[API](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)和[教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)`publish()`展示了使用/更新组件模型的基本方法`process()`。这种首选机制更加健壮和可扩展。

*   在这个更高级的[例子](https://stackoverflow.com/a/7054627/230513)`Timer`中，一个Swing`Executor`控制一系列`SwingWorker`实例。

在所有情况下，这些表都可以正常工作。您可以使用 any 作为[sscce](http://sscce.org/)的基础。

附录：*你能解释一下你建议的策略吗？*

我已经更新了示例列表并建议了一些要在上下文中查找的内容。

# windows - 如何通过批处理文件打开 Windows 防火墙上的端口

> ID：15171255
> 
> 赞同：14
> 
> 时间：2013-03-02T05:53:17.580
> 
> 标签：windows, batch-file, cmd, port, firewall

批处理文件中是否有任何方法可以通过批处理文件打开 Windows 上的特定端口？最好让安装程序为我们的服务器应用程序执行此操作，而不是让用户手动执行此操作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-02T06:36:22.150

使用[netsh.exe](http://technet.microsoft.com/en-us/library/cc771920%28v=ws.10%29.aspx)。一个**非常**简单的带有端口参数的批处理文件：

```
@echo off
rem -- open port (first argument passed to batch script)
netsh advfirewall firewall add rule name="Open Port %1" dir=in action=allow protocol=TCP localport=%1 remoteip=10.15.97.0/24,10.17.0.0/16 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-02-11T15:35:04.753

这是@Kevin Richardson 提供的解决方案的扩展。请注意，每次运行相同的命令时，“netsh advfirewall add rule”命令都会创建一个具有相同名称的新规则。下面的脚本有助于防止它

```
ECHO OFF
set PORT=8081
set RULE_NAME="Open Port %PORT%"

netsh advfirewall firewall show rule name=%RULE_NAME% >nul
if not ERRORLEVEL 1 (
    rem Rule %RULE_NAME% already exists.
    echo Hey, you already got a out rule by that name, you cannot put another one in!
) else (
    echo Rule %RULE_NAME% does not exist. Creating...
    netsh advfirewall firewall add rule name=%RULE_NAME% dir=in action=allow protocol=TCP localport=%PORT%
) 
```

# c# - 部分读取最终块后的填充错误

> ID：15171260
> 
> 赞同：2
> 
> 时间：2013-03-02T05:53:40.377
> 
> 标签：c#, cryptography, rijndael

我正在尝试测试我的加密代码并在处理时不断收到 CyrptographicException“填充无效且无法删除” `decrypt`。如果我尝试读取`decrypt`流的末尾，我会收到类似的错误，即使[`CryptoStream.Read`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.read.aspx)文档表明这不应该是一个问题。

一个简化的例子：

```
const int DATA_SET_SIZES = 102399;

byte[] iv,
        key,
        startingData = new byte[DATA_SET_SIZES],
        encryptedData = new byte[((DATA_SET_SIZES - 1) / 16 + 2) * 16],
        endingData = new byte[DATA_SET_SIZES];//[((DATA_SET_SIZES - 1) / 16 + 1) * 16];
Random rand = new Random();

rand.NextBytes(startingData);       //Get test data.

using (Rijndael cryptAlg = Rijndael.Create())
{
    cryptAlg.Mode = CipherMode.CBC;
    cryptAlg.Padding = PaddingMode.ISO10126;

    iv = cryptAlg.IV;               //Use random IV during test.
    key = cryptAlg.Key;             //Use random Key during test.
    using (CryptoStream encrypt = new CryptoStream(new MemoryStream(encryptedData), cryptAlg.CreateEncryptor(key, iv), CryptoStreamMode.Write))
    {
        encrypt.Write(startingData, 0, startingData.Length);
        encrypt.FlushFinalBlock();
    }
    using (CryptoStream decrypt = new CryptoStream(new MemoryStream(encryptedData), cryptAlg.CreateDecryptor(key, iv), CryptoStreamMode.Read))
    {
        int dataRecieved = decrypt.Read(endingData, 0, endingData.Length);
    }
} 
```

如果我执行以下操作之一，那么异常就会消失：

*   `cryptAlg.Padding = PaddingMode.None`在执行加密之后但在创建之前更改`decrypt`。
*   更改`const int DATA_SET_SIZES = 102400`或任何其他块大小的倍数。
*   不要从最后一个块中读取任何数据。

我做错了什么还是 .NET 实现不能正确识别流的结尾？

另外，有谁知道为什么加密数据比存储加密数据要长 1 个块？那个区块里有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:22:35.230

您的`encryptedData`缓冲区太大。输入 15 个字节，然后得到 32 个缓冲区块。由于您将完整的缓冲区提供给`MemoryStream`构造函数，因此它将一直读取到流的末尾。块解密*永远不会*失败，所以唯一会失败的是填充。最后一个块可能只包含零，因此解密的值是随机的，而不是匹配填充格式（大部分时间）。

尝试：`new byte[(DATA_SET_SIZES / 16 +`**`1`**`) * 16]`

# c# - 我可以在 Windows phone 7.1 上使用 System.Net.Sockets.TcpListener

> ID：15171261
> 
> 赞同：2
> 
> 时间：2013-03-02T05:53:53.493
> 
> 标签：c#, windows-phone-7, tcplistener

我正在开发一个 Windows Phone 应用程序，我需要使用`"System.Net.Sockets.TcpListener"`该类，但在为 Windows Phone 开发时没有这样的类。

*   有人可以建议我如何使用它吗？
*   我需要添加一些参考还是根本不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T17:19:49.487

此类在 Windows Phone 平台上不可用。有关受支持的操作套接字组件的完整列表，请查看此[MSDN 页面](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.105%29.aspx)。

# mysql - 在模板中显示多个相关的 Django 模型

> ID：15171263
> 
> 赞同：1
> 
> 时间：2013-03-02T05:54:01.590
> 
> 标签：mysql, django-models, django-views

嗨，我有这样的models.py

```
from django.db import models

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    def __unicode__(self):
        return "%d %s %s %s" % (self.book_id,self.book_name, self.author_name,self.publisher_name)

class Author(models.Model):
    author_id=models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()
    book=models.ForeignKey(Book)

    def __unicode__(self):
        return u'%d %s %s' % (self.author_id,self.first_name, self.last_name) 
```

我想在 html 模板中以单一顺序显示这两个表。我是 django 的新手..我现在正在学习..请帮助我设计 views.py 和“htmlfile.html 模板”。请给我的程序也

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:49:25.507

check your latest question for answer,

[Retrieve data from two tables with foreign key relationship in Django?](https://stackoverflow.com/questions/15173251/retrieve-data-from-two-tables-with-foreign-) key-relationship-in-django

# javascript - setTimeout() 没有等待

> ID：15171266
> 
> 赞同：33
> 
> 时间：2013-03-02T05:54:21.720
> 
> 标签：javascript, timeout, settimeout

我正在尝试使用 Javascript 进行秒倒计时。

这是我的 HTML

```
<div id="ban_container" class="error center">Please wait
        <span id="ban_countdown" style="font-weight:bold">
        45</span>
        seconds before trying again
</div> 
```

还有我的 JS：

```
<script type="text/javascript">
    var seconds = <?php echo $user->getBlockExpiryRemaining(); ?>;

    function countdown(element) {
        var el = document.getElementById(element);

        if (seconds === 0) {
            document.getElementById("ban_container").innerHTML = "done";
            return;
        }
        else {
            el.innerHTML = seconds;
            seconds--;
            setTimeout(countdown(element), 1000);
        }
    }

    countdown('ban_countdown');
</script> 
```

但是由于某种原因，它没有等待超时时间，而是`countdown`立即执行，因此当我刷新页面时，它只会立即显示“完成”。我知道它实际上被执行了多次，因为如果我这样做`innerHTML += seconds + " ";`，它会从 45 开始倒计时。为什么会绕过超时？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-02T05:56:29.390

`setTimeout(countdown(element), 1000);`使用该参数执行您的函数并将结果传递给`setTimeout`. 你不想要那个。

相反，请执行一个调用您的函数的匿名函数：

```
setTimeout(function() {
    countdown(el);  // You used `el`, not `element`?
}, 1000); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-28T09:54:52.707

如果您想通过 将参数传递给函数`setTimeout`，请尝试以下操作：

```
setTimeout(countdown, 1000, element); 
```

setTimeout 的语法如下：

```
setTimeout(function,milliseconds,param1,param2,...) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-02T05:55:51.637

这是因为 setTimeout 是异步的。试试这个：

```
setTimeout(function(){
   countdown('ban_countdown'); //or elemement
}, 1000); 
```

这将使函数倒计时在 1000 毫秒后执行。

# c# - C# - 我可以在 Main 启动之前初始化吗？

> ID：15171268
> 
> 赞同：-1
> 
> 时间：2013-03-02T05:55:04.997
> 
> 标签：c#, static, constructor, main

我有一个工作面试有以下问题：

添加/更改以下程序，以便在 Main 之前调用 M 方法。您不能更改 Main。

```
Main
{
    c C = new C()
}

Class C
{    
    Public C()
    {
    }

    Public M()
    {
    }
} 
```

所以我将 M 写为一个类，然后将 Public M 更改为静态构造函数，但这在 C# 中不起作用，仅在 C++ 中起作用。我搜索了网络，在 Main 开始之前找不到任何方法来初始化某些东西。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:03:15.393

是的你可以

编写一个类的类初始化器`Program`并将代码放在调用main之前，然后自己调用main。

```
partial class Program {
    static Program(){
        // do something
        Main();
        Environment.Exit(0);
    }
} 
```

# c++ - 在 GYP 项目中使用 c++11

> ID：15171270
> 
> 赞同：12
> 
> 时间：2013-03-02T05:55:08.517
> 
> 标签：c++, c++11, gyp

我正在尝试使用 gyp 创建一个简单的跨平台 C++ 项目。目前我只是在 Mac 上尝试这个——但希望最终能够为 Windows、Linux、ios 和 android 构建它。这是我正在使用的简单 gyp 文件。我希望能够使用这个 gyp 中的 ninja 以及 xcode/msvc 项目。我知道我需要能够将
-std=c++11 和 -libstdc++ 添加到命令行以用于 clang，但现在我只看到使用 g++ 而不是 clang 生成的构建文件。

这是我的 gyp 文件。

```
 {
        'targets': [

          {
            'target_name': 'libtest',
            'product_name': 'test',
            'type': 'static_library',
            'sources': [
              './src/lib.cpp',
            ],
            'include_dirs': [
               'include',
            ],
          },

          {
            'target_name': 'testapp',
            'type': 'executable',
            'sources': [
              './test/test.cpp',
            ],
            'include_dirs': [
               'src',
            ],
            'dependencies': [
              'libtest'
            ],
          },
        ],
      } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T06:28:20.060

我在某种程度上已经弄清楚了这一点。至少我让它在 mac 上工作以构建 makefile（不是我最初希望的 ninja）。

首先，我必须让 gyp 使用 clang 而不是 g++ ，为此我必须将 make_global_settings 添加到 gyp 文件中。对于跨平台构建来说，这似乎不是一个好的计划。我还可以使用环境变量设置这些，我猜我可能可以根据条件做一些事情来使其特定于 mac。

```
'make_global_settings': [
    ['CXX','/usr/bin/clang++'],
    ['LINK','/usr/bin/clang++'],
  ],
  'targets': 
  [
    ...... 
```

我必须做的另一件事是根据目标类型添加带有 OTHER_CPLUSPLUSFLAGS 和 OTHER_LDFLAGS 的 xcode_settings 字典。下面的完整示例。

```
{

 'make_global_settings': [
    ['CXX','/usr/bin/clang++'],
    ['LINK','/usr/bin/clang++'],
  ],
  'targets': [

    {
      'target_name': 'mylib',
      'product_name': 'mylib',
      'type': 'static_library',
      'sources': [
        'src/implementation.cc',
      ],
      'include_dirs': [
         'include',
      ],
       'conditions': [
        [ 'OS=="mac"', {

          'xcode_settings': {
            'OTHER_CPLUSPLUSFLAGS' : ['-stdlib=libc++'],
            },

        }],
        ],
    },

    {
      'target_name': 'myapp',
      'type': 'executable',
      'sources': [
        './bin/myapp.cc',
      ],
      'conditions': [
        [ 'OS=="mac"', {

          'xcode_settings': {
            'OTHER_CPLUSPLUSFLAGS' : ['-std=c++11','-stdlib=libc++'],
            'OTHER_LDFLAGS': ['-stdlib=libc++'],
            },

        }],
      ],
      'include_dirs': [
         'include',
      ],
      'dependencies': [
        'mylib'
      ],
    },
  ],
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T04:29:24.133

所以我只是在 clang++ 6 OSX 10.10 上尝试了这个，我遇到了同样的问题，这也是一个很糟糕的问题。

添加`-mmacosx-version-min=10.7`到`OTHER_CPLUSPLUSFLAGS`and`OTHER_LDFLAGS`数组解决了这个问题。

编辑

我发现解决此问题的更好方法是添加`"MACOSX_DEPLOYMENT_TARGET": "10.7"`到`xcode_settings`数组中。这将覆盖 Node 在其[common.gypi](https://github.com/joyent/node/blob/master/common.gypi)文件中设置的任何默认值。

所以它应该看起来像这样

```
{
  'targets': [
    {
      'target_name': 'myApp',
      'sources': [ 'myApp.cc' ]
      'conditions': [
        ['OS=="mac"', {
          'xcode_settings': {
            'MACOSX_DEPLOYMENT_TARGET': '10.7'
          }
        }]
      ]
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T10:02:40.257

johnhaley81 的解决方案确实是最简单的解决方案（至少在 OSX 上），但是我必须添加更多设置：

```
 "conditions": [
    [ 'OS=="mac"', {
      "xcode_settings": {
        'MACOSX_DEPLOYMENT_TARGET': '10.9',
        "CLANG_CXX_LIBRARY": "libc++",
        "GCC_ENABLE_CPP_RTTI": "YES",
        "GCC_ENABLE_CPP_EXCEPTIONS": "YES"
      },
    }],
  ], 
```

如您所见，您可以在此处直接使用 XCode 项目中的名称/值对。很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T13:15:04.027

以前的答案很有帮助，但实际上必须添加的所有内容`xcode_settings`都是`'MACOSX_DEPLOYMENT_TARGET': '10.7'`和`'CLANG_CXX_LIBRARY': 'libc++'`

```
{
  'targets': [
    {
      'target_name': 'myApp',
      'sources': [ 'myApp.cc' ]
      'conditions': [
        ['OS=="mac"', {
          'xcode_settings': {
            'MACOSX_DEPLOYMENT_TARGET': '10.7',
            'CLANG_CXX_LIBRARY': 'libc++'
          }
        }]
      ]
    }
  ]
} 
```

具体来说，选择`'CLANG_CXX_LIBRARY': 'libc++'`是什么让我们得到我们想要的。如果不添加此选项*，* `'MACOSX_DEPLOYMENT_TARGET': '10.7'`则可能会看到以下错误：

```
clang: error: invalid deployment target for -stdlib=libc++ (requires OS X 10.7 or later) 
```

如果您对兼容性感兴趣，则此错误表明该`10.7`值比`10.9`for更合适。`MACOSX_DEPLOYMENT_TARGET`

# c++ - 如何创建具有多个标识符的函数？

> ID：15171271
> 
> 赞同：0
> 
> 时间：2013-03-02T05:55:21.983
> 
> 标签：c++, function

我想做一个函数，在不同的上下文中，最好用不同的名字来调用它。

```
class box(){
    private:
    float posX;
    float size = 10;
    public:
    float speedX;
    float left(){ return posX; } //Any way to combine these?
    float posX(){ return posX; } //Any way to combine these?
    float right(){ return posX + size; }
};

box a;
box b;

bool checkCollide(){
    if(a.right() < b.left()){ return 0; } //Not colliding
    if(b.right() < a.left()){ return 0; } //Not colliding
    return 1; //Colliding
} //Comparing right and left makes more sense than anything else

void physics(){
    a.posX() += a.speedX;
    b.posX() += b.speedX;
    //Adding speed to position makes more sense than
    //adding speed to "left"
}
//Loop physics X times per second, and do something if there's a collision 
```

或者，有没有更好的方法来做到这一点？我可以让左/右成员在位置或大小发生变化时自动更新，而不是每次调用都重新计算吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T05:58:14.540

如果你**真的**有义务这样做，那么只需让一个函数调用另一个函数：

```
// the function that does the hard job
float foo(float a, float b)
{
    // some heavy and complicated code
    // ...
    // some more black magic, etc.
    // finally:
    return sqrt(a * a + b * b);
}

// the function that pretends to do the hard job
float bar(float a, float b)
{
    return foo(a, b);
} 
```

*但你最好不要这样做，*这是很糟糕的风格。不同的名称 => 不同的任务。相同的任务 => 相同的名称。不要伤害你的同伴的直觉...... ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T05:59:42.730

是的——不要写两个一开始做同样事情的函数。我只希望他们不要分道扬镳。那你就有问题了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T13:40:36.287

如果您使用 C++11，或者使用 Boost，则可以将`left()`函数绑定到`std::function`变量。使用 C++11：

```
class box {
// ...
public:
    // ...
    float left() { return posX; }
    const std::function<float()> posx = std::bind(&box::left, this); 
```

`const`是必需的，否则`posx`可以在运行时更改以指向不同的函数。

如果您没有使用 C++11 编译器而是使用 Boost，那么它的表现力就没有那么强，因为您必须`posx`在 ctor 中进行初始化：

```
class box {
// ...
public:
    box() : posx = boost::bind(&box::left, this);
    // ...
    float left() { return posX; }
    const boost::function<float()> posx; 
```

在这两种情况下，您现在都可以执行以下操作：

```
box b;
b.left();
b.posx(); 
```

`posx()`与拥有一个函数并调用它相比，这种方法并没有我能想到的任何优势`left()`。但这是可能的，因此值得一提。

但我同意 H2CO3 所说的：同一个功能不要有两个名字。这很令人困惑。

# c# - 通过其中的元素查询特定数据的最佳方法是什么？

> ID：15171278
> 
> 赞同：2
> 
> 时间：2013-03-02T05:56:10.230
> 
> 标签：c#, xml, linq, linq-to-xml

我知道这可能比我做的要容易得多。我能够将所有机器从 XElement 中拉出，但我试图弄清楚如何拉出具有特定序列号的机器。在下面的 XML 片段中，我想使用序列 = 1 的机器。

XML:

```
<Location>
  <Sequence>1</Sequence>
  <Machines>
    <Machine></Machine>
    <Machine></Machine>
  </Machines>
</Location>
<Location>
  <Sequence>2</Sequence>
  <Machines>
    <Machine></Machine>
    <Machine></Machine>
  </Machines>
</Location> 
```

代码：

```
IEnumerable<XElement> locSeqMachines = 
                      from seq in LocationRows.Descendants("Location")
                      select seq;

var eMachines = locSeqMachines.Descendants("Machine");
foreach (var machine in eMachines)
{   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:23:56.287

像这样的东西应该可以完成这项工作：

```
int soughtId = 1; // Assuming this is coming from somewhere
string soughtIdStr = soughtId.ToString();
var machines = LocationRows.Descendants("Location")
                           .Where(l => (string)l.Element("Sequence") == 
                                       soughtIdStr)
                           .Descendants("Machine"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:22:45.540

您可以使用 XPath 按特定顺序选择节点：

```
XmlNodeList nodeList = root.SelectNodes("descendant::Location[Sequence='1']"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T08:09:49.887

此代码将根据位置的序列值过滤位置标签中的所有机器数据：

```
var locSeqMachines = from seq in LocationRows.Descendants("Location")
                     where seq.Element("Sequence").Value == "1"
                     select new {
                         Sequence = seq.Element("Sequence").Value,
                         Machines = from m in seq.Descendants("Machines").Elements()
                                    select m.Value
                     }; 
```

下面是一些代码，演示了如何访问数据（并测试代码段）：

```
foreach (var location in locSeqMachines) {
    Console.WriteLine("sequence: {0}", location.Sequence);
    foreach (var machine in location.Machines) {
        Console.WriteLine(" machine: {0}", machine);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T10:43:45.297

在解析给定的 xml 时，您可以使用[此](https://stackoverflow.com/a/11644640/1129189)方法得到答案，而不会引发多个根元素的错误。

```
 var xmlText =   @"<root>
                       <Location>
                        <Sequence>1</Sequence>
                        <Machines>
                          <Machine></Machine>
                          <Machine></Machine>
                        </Machines>
                       </Location>
                       <Location>
                        <Sequence>2</Sequence>
                        <Machines>
                          <Machine></Machine>
                          <Machine></Machine>
                         </Machines>
                       </Location>
                      </root>";

    var elements     = XElement.Parse(xmlText);
    var machineWith1 = from subElem in elements.Elements("Location")
                           where subElem.Element("Sequence").Value == "1"
                           select subElem.Element("Machines").Elements("Machine"); 
```

那么您可以为此检查 machineWith1 的值，

# python - Python 2.7 Unicode/IDLE 混淆

> ID：15171280
> 
> 赞同：1
> 
> 时间：2013-03-02T05:56:16.880
> 
> 标签：python, unicode, encoding, python-idle

我已经阅读了很多关于 Unicode 和 Python 2.7 中的各种编码/解码的内容，但我仍然无法理解为什么 IDLE 似乎无法打印正确的字符串。

我有一个 unicode 字符串：

```
>>> s = u"Hey I\u2019m Bob"
>>> print s
Hey I'm Bob 
```

但是，在我编码为 UTF-8 后，我得到：

```
>>> s.encode('utf-8')
'Hey I\xe2\x80\x99m Bob'
>>> print s.encode('utf-8')
Hey Iâ€™m Bob 
```

我不知道为什么我不能正确打印它，但我可以将 s.encode('utf-8') 写入文本文件并且它可以正确输出。不确定这是否与 IDLE 有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:00:39.860

这是因为 IDLE 的输出窗口不支持 UTF-8，但打印 Unicode 字符串会自动尝试将字符串编码为 stdout 编码。以下来自 IDLE 控制台：

```
>>> s = u"Hey I\u2019m Bob"
>>> print s
Hey I’m Bob
>>> print s.encode('utf8')
Hey Iâ€™m Bob
>>> import sys
>>> sys.stdout.encoding
'cp1252'
>>> print s.encode('cp1252')
Hey I’m Bob 
```

# sphinx - sphinxQl 普通索引和 RT 索引？

> ID：15171281
> 
> 赞同：0
> 
> 时间：2013-03-02T05:56:18.503
> 
> 标签：sphinx

如何使用 sphinxQL 从多个索引中获取记录。在这里，除了今天的记录之外，我将在普通索引中保留的所有记录都面临一个问题。今天的记录将维持在 RT 指数中。

在从该索引中获取记录时，我们需要从最近更改的索引中获取记录。

使用 SphinxAPI 它从最近更改的索引 [Rt 索引] 返回记录。如何在 SphinxQL 中以相同的方式进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:27:04.457

```
SELECT * FROM index1, index2, index3 WHERE ... 
```

SphinxQL 不像 mysql，其中逗号表示连接，在 sphinx 中更接近联合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T14:13:53.210

我认为实现这一目标的最佳方法是创建分布式索引，其中包含您要使用的索引。例如：

```
index tehindex
{
    type = distributed
    local = disk_based_index_name_here
    local = rt_index_name_here
} 
```

然后使用 SphinxQL 查询 sphinx，如下所示：

```
select * from tehindex where match('test'); 
```

# javascript - 未捕获的 ReferenceError：未定义 myFunction

> ID：15171294
> 
> 赞同：6
> 
> 时间：2013-03-02T05:57:44.637
> 
> 标签：javascript

给出错误。我之前已经放置了代码`</body>`。仍然收到错误。

```
<form action="" method="get" id="searchform" >
<input name="q" type="text" id="search" size="32" maxlength="128" class="txt">
<input type="button" id="hit" value="Search" onclick="myFunction();return false" class="btn">   
</form> 
```

JS,

```
<script type="text/javascript">
    var nexturl = "";
    var lastid = "";
    var param;
    $(document).ready(function () {
        function myFunction() {
            param = $('#search').val();
            alert("I am an alert box!");
            if (param != "") {
                $("#status").show();
                var u = 'https://graph.facebook.com/search/?callback=&limit=100&q=' + param;
                getResults(u);
            }
        }
        $("#more").click(function () {
            $("#status").show();
            $("#more").hide();
            pageTracker._trackPageview('/?q=/more');
            var u = nexturl;
            getResults(u);
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T06:00:03.620

不能`myFunction`放在`onclick`. 当`onclick`看到 时，没有定义`myFunction`。

将 JavaScript 放在`<head>`标签中。另外，将函数移到`ready()`.

像这样：

```
<script type="text/javascript">
var nexturl ="";
var lastid ="";
var param;

function myFunction() {
    param = $('#search').val();
    alert("I am an alert box!");
    if (param != "") {
        $("#status").show();
        var u = 'https://graph.facebook.com/search/?callback=&limit=100&q='+param;
        getResults(u);
        }
}

$(document).ready(function() {

  $("#more").click(function () { 

    $("#status").show();
    $("#more").hide();  
    pageTracker._trackPageview('/?q=/more');
    var u = nexturl;
    getResults(u);
  });

});
</script>
</head>
<body>
... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T06:00:20.853

将 myFunction 直接保存在 script 标签中

```
 i.e
   <script>

function myFunction() {
  .....  
}
 </script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T06:02:05.563

来自[jQuery 文档](http://api.jquery.com/ready/)：

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

因此，直到您的 onclick 建立后，您的函数才会创建。因此它找不到该功能。您需要将其移到`$(document).ready(function(){})`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-21T23:55:04.703

You have to move the function outside the `$document.ready` here then you will have two options: 1st move it to `<head>` or 2nd move it right before the closing `$document.ready` bracket. Use this type of declaration for your function `myFunction(){alert("inside my function");};`

# prototypejs - 脚本效果。改为向左和向右切换

> ID：15171300
> 
> 赞同：0
> 
> 时间：2013-03-02T05:58:24.167
> 
> 标签：prototypejs, scriptaculous

谁能告诉我如何使用`Effect.toggle()`来切换左右而不是上下？或者 Scriptaculous 中是否还有其他效果可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:01:03.397

不幸的是，该`toggle()`方法仅支持 3 种效果出现、滑动和盲目 - 如果您想从左到右，我建议您使用该`morph()`方法，因为您可以在其中放置任何样式，它们将来回更改

例如

```
// close the div horizontally
$('firstdiv').morph('width:0px;');

//open the div horizontally
$('firstdiv').morph('width:auto;'); 
```

# mysql - 尝试此查询时发生 Sql 错误

> ID：15171303
> 
> 赞同：2
> 
> 时间：2013-03-02T05:58:45.273
> 
> 标签：mysql

这是查询

```
 $query_order = "select * from orders where key = '$pay_key'"; 
```

显示错误

```
SELECT 
    * 
FROM `orders` 
where `key` = 'C90320'

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'key = 'C90320'' at line 1* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:08:59.563

`key`是保留字。将您的查询更改为：

```
$query_order = "select * from orders where `key` = '$pay_key'"; 
```

另外，我建议转义`$pay_key`' 值。像这样说：

```
$pay_key = mysqli_real_escape_string($pay_key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:11:05.463

```
 $query_order = "select * from orders 
                 where `key` = '".mysqli_real_escape_string($pay_key)."'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:19:15.610

尝试这个

首先你需要使用字符串比较它所以代码应该是这样的

```
 $query_order = "select * from orders where `key` = '".$pay_key."'"; 
```

# actionscript-3 - 更改组合框时动态向上移动组合框？

> ID：15171304
> 
> 赞同：0
> 
> 时间：2013-03-02T05:58:58.110
> 
> 标签：actionscript-3, apache-flex, flex4.5

我正在使用 Flex builder 4.5。我的网络应用程序中有五个组合。组合 1 加载为员工和学生。Combo 2 加载部门，Combo 3 加载教职员工姓名，Combo 4 加载学生批次，Combo 5 加载学生姓名。

当我在第一个组合中选择学生时，组合 4 和组合 5 应该动态向上移动。请就此提出建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:43:09.810

操纵控件的坐标不是一个好习惯。取而代之的是，我将使用 ViewStack 控件并根据第一个组合的项目更改选定的索引。

因此，您可以更好地控制视图表示，并减少未来更改的问题。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<s:VGroup x="10" y="10">
    <s:ComboBox id="cbMain" selectedIndex="0">
        <s:ArrayList>
            <fx:Object label="Staff"/>
            <fx:Object label="Student"/>
        </s:ArrayList>
    </s:ComboBox>

    <mx:ViewStack id="vsMain" width="200" height="200" selectedIndex="{cbMain.selectedIndex}">
        <s:NavigatorContent id="ncStaff" width="100%" height="100%">

            <s:VGroup>
                <s:ComboBox id="cbStaffDep" selectedIndex="0">
                    <s:ArrayList>
                        <fx:Object label="Department01"/>
                        <fx:Object label="Department02"/>
                    </s:ArrayList>
                </s:ComboBox>

                <s:ComboBox id="cbStaffName" selectedIndex="0">
                    <s:ArrayList>
                        <fx:Object label="StaffName01"/>
                        <fx:Object label="StaffName02"/>
                    </s:ArrayList>
                </s:ComboBox>
            </s:VGroup>
        </s:NavigatorContent>

        <s:NavigatorContent id="ncStudent" width="100%" height="100%">

            <s:VGroup>
                <s:ComboBox id="cbStudentBatch" selectedIndex="0">
                    <s:ArrayList>
                        <fx:Object label="Batch01"/>
                        <fx:Object label="Batch02"/>
                    </s:ArrayList>
                </s:ComboBox>

                <s:ComboBox id="cbStudentName" selectedIndex="0">
                    <s:ArrayList>
                        <fx:Object label="StudentName01"/>
                        <fx:Object label="StudentName02"/>
                    </s:ArrayList>
                </s:ComboBox>
            </s:VGroup>

        </s:NavigatorContent>
    </mx:ViewStack>

</s:VGroup>

</s:Application> 
```

# performance - 将我构建的持续时间添加到 Makefile

> ID：15171305
> 
> 赞同：2
> 
> 时间：2013-03-02T05:59:02.093
> 
> 标签：performance, makefile

我想在构建完成后将我的 Makefile 构建的构建持续时间添加到打印输出中......像这样：

建造时间：1:23.45

我还没有找到任何关于这样做的东西，但它必须是可行的。现在我用 $(TIME) 打印完成的时间，但我想打印构建花了多长时间去完成。我正在使用clearmake。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T16:13:33.073

`time`二进制文件提供了这个功能。您需要专门执行它以绕过内置于您的 shell 中的任何时间命令（如在 bash 中）：

```
/usr/bin/time --format="Build Duration: %E" make 
```

# django - 如何在 Django 单元测试的请求对象中传递表单对象？

> ID：15171309
> 
> 赞同：2
> 
> 时间：2013-03-02T05:59:23.020
> 
> 标签：django

假设我有一个测试视图的单元测试。该视图需要一个表单来进行一些处理。我的单元测试如下所示：

```
class ViewTests(TestCase):
def setUp(self):
    self.factory = RequestFactory()

def test_login_view_post(self):
    # require form object to pass it in post function
    response = self.client.post(reverse('login'))
    self.assertContains(response, "Your username and password didn't match", status_code=200) 
```

有人可以告诉我如何在 post 函数中传递表单对象吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:31:24.463

您实际上并没有在帖子中传递表单对象，而是像正在提交表单一样传递表单数据（这是您正在模拟的）

```
post_data = {
    "username": "foo",
    "password": "bar"
}
response = self.client.post(reverse('login'), data=post_data) 
```

或者您可以简单地将表单包含在另一个测试中并用数据实例化它以测试其有效性。

```
def test_form(self):
    data = {
        "username": "foo",
        "password": "bar"
    }
    form = LoginForm(data)
    self.assertFalse(form.is_valid()) 
```

# php - 连接到远程 mysql 服务器

> ID：15171313
> 
> 赞同：0
> 
> 时间：2013-03-02T05:59:47.650
> 
> 标签：php, mysql, phpmyadmin, connection

我将如何连接到php中[的演示 phpmyadmin 服务器？](http://demo.phpmyadmin.net/STABLE/)我的代码看起来像这样。

```
<?php
$host = 'http://demo.phpmyadmin.net/STABLE/';
$dbname = 'shubham';
$user = 'root';
$pass = '';

// Attempt to connect to database.
try {
$DBH = new PDO("mysql:host={$host};dbname={$dbname}", $user, $pass);
} catch(PDOException $e) {
echo $e->getMessage();
}
?> 
```

但我认为这是我的错误

```
QLSTATE[HY000] [2005] Unknown MySQL server host 'http://www.demo.phpmyadmin.net/STABLE/' (1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:22:07.123

您似乎混淆了两件事：

*   由 db 服务器和 db/schema 支持的演示 phpMyAdmin 前端
*   数据库服务器和架构本身

PDO 需要后者，即数据库服务器本身。

检查演示的前端代码，我没有看到任何可以为我们提供数据库服务器的实际连接详细信息的内容。这正是我所期望的：我发现很难相信 phpMyAdmin 演示的制造商/维护者会让他们的实际数据库服务器可用于公共远程连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:02:55.987

更改您的主机名

```
$host = 'http://demo.phpmyadmin.net/STABLE/'; 
```

到您的原始远程主机名，**例如** `$host = 'ukld.db.5510597.hostedresource.com';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:16:32.963

MySQL 不适用于 HTTP

```
<?php
$host = 'demo.phpmyadmin.net';
// High chances that this is NOT your mysql hostname.
// It will not even by like /STABLE/ as you mentioned it.
$dbname = 'shubham';
$user = 'root';
$pass = '';

// Attempt to connect to database.
try {
$DBH = new PDO("mysql:host={$host};dbname={$dbname}", $user, $pass);
} catch(PDOException $e) {
echo $e->getMessage();
}
?> 
```

# jquery - 如何使用标签管理器？

> ID：15171314
> 
> 赞同：2
> 
> 时间：2013-03-02T05:59:58.423
> 
> 标签：jquery, tags

谁能告诉我这个标签管理器的简单实现，让它在一个简单的 html 文件上工作？

[http://welldonethings.com/tags/manager](http://welldonethings.com/tags/manager)

我确实尝试自己实现它，如下所示，但我无法让它工作。

```
<html>
<head>
     <title>tags example</title>
     <script type="text/javascript" src="assets/js/bootstrap-tagmanager.js"></script>
     <script type="text/javascript" src="assets/css/bootstrap-tagmanager.css"></script>
     <script src="assets/js/jquery-1.9.0.min.js" type="text/javascript"></script>
 </head>
 <body>

 <input type="text" name="tags" placeholder="Tags" class="tagsManager"/>

 <script src="assets/js/angular/angular.min.js"></script>
 <script src="assets/js/angular/angular-resource.min.js"></script>
 <script src="assets/js/app.js"></script>
 <script src="assets/js/controllers.js"></script>
 <script src="assets/js/jquery-ui-1.10.0.custom.min.js" type="text/javascript">                    </script>
 <script src="assets/js/bootstrap.min.js" type="text/javascript"></script>

 <script type="text/javascript">
     jQuery(".tagManager").tagsManager({
         prefilled: ["Pisa", "Rome"],
         CapitalizeFirstLetter: true,
         preventSubmitOnEnter: true,
         typeahead: true,
         typeaheadAjaxSource: null,
         typeaheadSource: ["Pisa", "Rome", "Milan", "Florence", "New York", "Paris",      "Berlin", "London", "Madrid"],
         delimeters: [44, 188, 13],
         backspace: [8],
         blinkBGColor_1: '#FFFF9C',
         blinkBGColor_2: '#CDE69C',
         hiddenTagListName: 'hiddenTagListA'
     });
 </script>

 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:34:16.983

检查这个[FIDDLE](http://jsfiddle.net/vt2z4/)，你还没有添加隐藏字段 hiddenTagListA

从此更改您的代码

```
 <script type="text/javascript" src="assets/js/bootstrap-tagmanager.js"></script>
 <script type="text/javascript" src="assets/css/bootstrap-tagmanager.css"></script>
 <script src="assets/js/jquery-1.9.0.min.js" type="text/javascript"></script>

 <script type="text/javascript">
 jQuery(".tagManager").tagsManager({
     prefilled: ["Pisa", "Rome"],
     CapitalizeFirstLetter: true,
     preventSubmitOnEnter: true,
     typeahead: true,
     typeaheadAjaxSource: null,
     typeaheadSource: ["Pisa", "Rome", "Milan", "Florence", "New York", "Paris",      "Berlin", "London", "Madrid"],
     delimeters: [44, 188, 13],
     backspace: [8],
     blinkBGColor_1: '#FFFF9C',
     blinkBGColor_2: '#CDE69C',
     hiddenTagListName: 'hiddenTagListA'
 });
</script> 
```

对此

```
 <link href="assets/css/bootstrap-tagmanager.css" rel="stylesheet" type="text/css" />
 <script src="assets/js/jquery-1.9.0.min.js" type="text/javascript"></script>
 <script type="text/javascript" src="assets/js/bootstrap-tagmanager.js"></script>

 <script type="text/javascript">
  $(function () {
    $(".tagsManager").tagsManager({
     prefilled: ["Pisa", "Rome"],
     CapitalizeFirstLetter: true,
     preventSubmitOnEnter: true,
     typeahead: true,
     typeaheadAjaxSource: null,
     typeaheadSource: ["Pisa", "Rome", "Milan", "Florence", "New York", "Paris",      "Berlin", "London", "Madrid"],
     delimeters: [44, 188, 13],
     backspace: [8],
     blinkBGColor_1: '#FFFF9C',
     blinkBGColor_2: '#CDE69C',
     hiddenTagListName: 'hiddenTagListA'
  });
});
 </script> 
```

# excel - 在 VBA 中删除空白单元格后重新计算 ActiveSheet 中的 lastRow

> ID：15171316
> 
> 赞同：1
> 
> 时间：2013-03-02T06:00:06.270
> 
> 标签：excel, vba

`Activesheet`从删除空白单元格后如何重新计算最后一行，`Activesheet`以便我将获得一个新的 lastRow 变量作为我的最大限制？我的数据来自网络查询。

例子：

1.  数据来源：[http ://en.wikipedia.org/wiki/Polar_bear](http://en.wikipedia.org/wiki/Polar_bear)
2.  导入后的行数：1360
3.  删除空白单元格后的行数：650

但是`ActiveSheet`没有刷新，lastRow 没有更新到 650，我希望这些更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:40:05.370

由于这是为 Excel 编写 VBA 时的常见要求，因此您可能希望编写一个可以在其他项目中重用的函数。这是一个例子：

```
Function get_end_row(ByVal column_with_data As Long) As Long
Dim last_row As Long

last_row = ThisWorkbook.ActiveSheet.Rows.Count

get_end_row = ThisWorkbook.ActiveSheet.Cells(last_row, column_with_data).End(xlUp).Row
''Note: in the line of code above you can replace xlUp with its hexidecimal value -> &HFFFFEFBE
''This will ensure the function works in other versions of Excel    

End Function 
```

下面是如何调用函数的示例：

```
Sub my_routine()
Dim endRow As Long

''The 1 being passed in the argument below is the first column number that your data is in
endRow = get_end_row(1)

Msgbox endRow

End Sub 
```

在您的情况下，请确保在删除行后调用 get_end_row() 函数。

# objective-c - 有任何消息发送到 id 编译，基础吗？

> ID：15171330
> 
> 赞同：0
> 
> 时间：2013-03-02T06:02:03.353
> 
> 标签：objective-c, methods

在 Xcode 中，如果我写 -

```
id a; 
```

当我开始向 a, [a ... 写消息时，Xcode 给出了一长串自动完成建议。这些建议是在什么基础上提出的（显然是所有可能的方法名称）？

我可以编译任何方法调用，比如

```
[a viewDidLoad]; 
```

我知道 id 可以接收任何消息。但

```
[a asdfgh]; //asdfgh random string 
```

不编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:10:02.740

> 这些建议是在什么基础上提出的（显然是所有可能的方法名称）？

这些建议有点聪明：据我所知，它们计入类和对象的采用协议。由于`id`是通用的，因此，任何现有的消息都可能被发送给它（它可能会或可能不会响应），Xcode 建议它在任何类或协议中找到的任何内容。

> 但是[a asdfgh]；不编译

因为编译器**确实提供**了某种程度的保护。如果一个选择器根本没有在任何地方声明，它假定选择器不存在，因此不可能将它发送到任何对象，因此它会抱怨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:07:35.640

在这里你可以看到是什么`id`

```
typedef struct objc_object {
    Class isa;
} *id; 
```

它根本不是`void *`，而是指向`struct`包含单个成员的指针，指向类定义。因此，它可以在运行时采用任何数据类型的形式。**动态类型**。

在编译时它检查正确的方法名称，如果它存在？

`[a asdfgh];`产生错误，因为没有带有 name 的方法/选择器`asdfgh`。

虽然`[a viewDidLoad];`编译得很好，但是在运行时它可能会崩溃！

# java - 自编码 RSA 实现

> ID：15171339
> 
> 赞同：1
> 
> 时间：2013-03-02T06:03:02.387
> 
> 标签：java, encryption, rsa

前言：这是一个家庭作业，我几乎完成了——只是这小块阻碍了我完成。有了这些信息，请不要为我编写任何代码，但请注意我可能做错了什么。

好的，这是一个简单的想法。使用 RSA 通过 ECB 模式加密/解密文件。这意味着如果块大小为 4，并且字符串为“testdata”，则“test”将使用密钥加密，写入文件，然后“数据”将使用密钥加密并写入文件。

我的实现使用 128 作为块大小，但我遇到了一个奇怪的错误。

这是我加密 128 块并附加到文件的代码：

```
ArrayList<byte[]> bytes = new ArrayList<byte[]>();
String file = read_file(input_file);
int index = 0;
while (index<file.length()) {
    byte[] block = file.substring(index, Math.min(index+128,file.length())).getBytes();
    cipher = new BigInteger(block).modPow(public_exponent, public_modulus).toByteArray();
    bytes.add(cipher);
    append_bytes(output_file, cipher);
    index+=128;
} 
```

加密工作完美。这就是为什么我认为加密不是问题的原因：

*   解密正在写入文件的数据有效
*   将所有加密数据添加到列表中包含与读取文件相同的数据
*   如果从我上面提到的列表中解密，解密工作完美无缺。

不过，这是最奇怪的问题。

这会产生正确的输出：

```
for(int i = 0; i < bytes.size(); i++) {
    decrypted = new BigInteger(bytes.get(i)).modPow(d, modulus).toByteArray();
    System.out.print(new String(decrypted));
} 
```

但这没用，因为只有在加密后才能解密有什么意义。

这并非每次都有效，但有时确实有效：

```
index = 0;
file = new String(read_bytes(output_file));
while(index < file.length()) {
    byte[] block = file.substring(index, Math.min(index+128,file.length())).getBytes();
    decrypted = new BigInteger(block).modPow(d, modulus).toByteArray();
    System.out.println(new String(decrypted));
    index+= 128;
} 
```

我正在以与写入文件相同的方式读取文件；以 128 块为单位。但它没有正确读取它，因此，解密失败！

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:59:26.943

您正在将密文（这是二进制数据）读入 a `String`，然后可能会遇到一些字符集转换，这会弄乱一切。

解密应该读取原始字节。如果您需要不同数组中的每个块，您可以使用[`Arrays.copyOfRange(original,from,to)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28byte%5B%5D,%20int,%20int%29).

另一种方法是在将密文写入文件之前对密文进行base64编码，然后在解密之前进行base-64解码。

# sharepoint - IHttpModule Rewritpath to Layouts 文件夹显示 404 错误

> ID：15171341
> 
> 赞同：0
> 
> 时间：2013-03-02T06:03:14.353
> 
> 标签：sharepoint, url-rewriting, ihttpmodule

我正在使用 iHttpModule 进行 sharepoint2010 重写。

它适用于 /pages/ 、 /sitepages/ 库中的页面。但是当我将它重写到布局文件夹时，它会引发 404 错误。

这就是我想要做的。

http:///MyEmployees/John.aspx

我想重写为 http:///Employees/AllItems.aspx?ID=4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T15:37:07.730

Server.TransferRequest(..) 方法适用于这种情况。谢谢你。

# java - 最大平均值、最小平均值和平均值

> ID：15171344
> 
> 赞同：-1
> 
> 时间：2013-03-02T06:03:26.907
> 
> 标签：java, average

我不确定如何获得所有内容的最大平均值、最小平均值和平均值。我已经在我的代码中为变量设置了值，但是我不确定如何在我的代码中输入平均值。任何帮助都会很棒！谢谢。导入 java.util.Scanner；

```
public class Averages {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        int max = 0;
        int min = 9000;
        int score = 0;
        int n;
        int c;
        int rowMaxNumber = 0;
        int rowMinNumber = 0;
        int columnMax = 0;
        int columnMin = 0;
        int averageMin = 0;
        int averageMax = 0;
        double average = 0;

        System.out.println("How many rows?");
        n = scan.nextInt();

        for (int row = 1; row <= n; row++) {
            System.out.println("How many student in row " + row + "?");
            c = scan.nextInt();

            for (int column = 1; column <= c; column++) {
                System.out.println("Score for student " + column + " in row "
                        + row + "?");
                score = scan.nextInt();

                rowMaxNumber = row;
                columnMax = column;

                rowMinNumber = row;
                columnMin = column;

            }
            if (score >= max) {
                max = score;

            }
            if (score < min) {
                min = score;

            }

        }
        System.out.println("Student " + columnMax + " of row " + rowMaxNumber
                + " was highest with " + max);
        System.out.println("Student " + columnMin + " of row " + rowMinNumber
                + " was lowest with " + min);
        System.out.println("Row " + rowMaxNumber + " had highest average with "
                + averageMax);
        System.out.println("Row " + rowMinNumber + " had lowest average with "
                + averageMax);
        System.out.println("Class average is " + average);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:24:49.080

```
public class Averages {
public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    int max = 0;
    int min = 9000;
    int score = 0;
    int n;
    int c;
    int rowsum = 0;
    int rowmaxnumber = 0;
    int rowminnumber = 0;
    int columnmax = 0;
    int columnmin = 0;
    int averagemin = 9999;
    int averagemax = 0;
    double average = 0;

    System.out.println("How many rows?");
    n = scan.nextInt();

    for (int row = 1; row <= n; row++) {
        System.out.println("How many student in row " + row + "?");
        c = scan.nextInt();
        rowsum = 0;
        for (int column = 1; column <= c; column++) {

            System.out.println("Score for student " + column + " in row "
                    + row + "?");
            score = scan.nextInt();
            rowsum += score;
            rowmaxnumber = row;
            columnmax = column;

            rowminnumber = row;
            columnmin = column;

            if (score >= max) {
                max = score;
            }
            if (score < min) {
                min = score;
            }

        }
        int avg=rowsum/c;
        if( avg >= averagemax){
            averagemax=avg;
        }
        if( avg <= averagemin){
            averagemin=avg;
        }

    }
    System.out.println("Student " + columnmax + " of row " + rowmaxnumber
            + " was highest with " + max);
    System.out.println("Student " + columnmin + " of row " + rowminnumber
            + " was lowest with " + min);
    System.out.println("Row " + rowmaxnumber + " had highest average with "
            + averagemax);
    System.out.println("Row " + rowminnumber + " had lowest average with "
            + averagemin);
    System.out.println("Class average is " + average);
} 
```

}

我已经重组了一些代码来计算我们在一行中看到的分数的总和，并计算扫描行末尾的平均值，avg 也会通过将 rowsum 除以 no 来给出平均值。排学生，然后将 avg 与之前的最高和之前的最低平均值进行比较。就像你用分数做的一样！祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T20:50:41.743

我想出了如何获得最大平均值、最小平均值和总平均值。感谢任何帮助过的人！

```
import java.util.Scanner;

public class Averages 
{
 public static void main ( String[] args )
  {
     Scanner scan = new Scanner(System.in);
        int max = -9999;
        int min = 9999;
        int score = 0;
        int n;
        int c;
        int rowsum = 0;
        int rowMaxNumber = 0;
        int rowMinNumber = 0;
        int columnMax = 0;
        int columnMin = 0;
        double averageMin = 9999;
        double averageMax = 0;
        double avg = 0.0;
        double avgTotal = 0.0;
        double totalScore = 0;
        double totalStudent = 0;            

        System.out.println("How many rows?");
        n = scan.nextInt();

        for (int row = 1; row <= n; row++) {
            System.out.println("How many student in row " + row + "?");
            rowsum=0;
            c = scan.nextInt();
            totalStudent += c;

            for (int column = 1; column <= c; column++) {

                System.out.println("Score for student " + column + " in row " + row + "?");
                score = scan.nextInt();
                rowsum += score;
                totalScore += score;     

                if (score >= max) {
                    max = score;
                    columnMax = column;

                }
                if (score < min) {
                    min = score;
                    columnMin = column;
                }
            }
            avg = rowsum/c;
            if( avg >= averageMax){
                averageMax=avg;
                rowMaxNumber = row;

            }
            if( avg < averageMin){
                averageMin=avg;
                rowMinNumber = row;
            }
        }
        avgTotal = totalScore/totalStudent;

        System.out.println("Student " + columnMax + " of row " + rowMaxNumber + " was highest with " + max);
        System.out.println("Student " + columnMin + " of row " + rowMinNumber + " was lowest with " + min);
        System.out.println("Row " + rowMaxNumber + " had highest average with " + averageMax);
        System.out.println("Row " + rowMinNumber + " had lowest average with " + averageMin);
        System.out.println("Class average is " + avgTotal);
}
} 
```

# php - PHP更新表中的行

> ID：15171346
> 
> 赞同：0
> 
> 时间：2013-03-02T06:03:36.270
> 
> 标签：php, mysql

您好我在这里遇到了一些问题我创建了一个脚本来更新用户帐户详细信息但是当填写表格并单击提交按钮时没有出现错误但同时表格中没有进行任何更改

这只是一个虚拟应用程序，所以一切都保持基本

```
 <?php

session_start();

    include('connect_mysql.php');

        if(isset($_POST['update']))
        {

            $usernameNew = stripslashes(mysql_real_escape_string($_POST["username"]));
            $passwordNew = stripslashes(mysql_real_escape_string($_POST["password"]));
            $first_nameNew = stripslashes(mysql_real_escape_string($_POST["first_name"]));
            $last_nameNew = stripslashes(mysql_real_escape_string($_POST["last_name"]));
            $emailNew = stripslashes(mysql_real_escape_string($_POST["email"]));

            $user_id = $_SESSION['user_id'];
            $editQuery = mysql_query("UPDATE users SET username='$usernameNew', password='$passwordNew', first_name='$first_nameNew', last_name='$last_nameNew' , email='$emailNew' WHERE user_id='$user_id'");

            if(!$editQuery)
            {
                echo mysql_error($editQuery);
                die($editQuery);
            }
        }

?>

<html>
<head>

<title>Edit Account</title>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
<link href="style.css" rel="stylesheet" type="text/css" />

</head>
<body>
<div id="wrapper">
<header><h1>E-Shop</h1></header>

    <article>
        <h1>Welcome</h1>
            <h1>Edit Account</h1>

<div id="login">
    <ul id="login">
    <form method="post" name="editAccount" action="userEditAccount.php"  >
        <fieldset>  
            <legend>Fill in the form</legend>
                <label>Select Username : <input type="text" name="username" /></label>
                <label>Password : <input type="password" name="password" /></label>
                <label>Enter First Name : <input type="text" name="first_name" /></label>
                <label>Enter Last Name : <input type="text" name="last_name" /></label>
                <label>Enter E-mail Address: <input type="text" name="email" /></label>
        </fieldset>
        <br />

                <input type="submit" value="Edit Account" class="button">
<input type="hidden" name="update" value="update">

    </form>

</div>
    <form action="userhome.php" method="post">
    <div id="login">
        <ul id="login">
            <li>
                <input type="submit" value="back" onclick="index.php" class="button">   
            </li>
        </ul>
    </div>      
</article>

<aside>
</aside>

<div id="footer">Text</div>
</div>

</body>
</html> 
```

抱歉由于某种原因我忘记复制这部分*faceslap*

登录.php：

```
<?php
session_start();

    require('connect_mysql.php');

     if($_SERVER['REQUEST_METHOD'] == 'POST')
     {

        $username = $_POST["username"];
        $password = $_POST["password"];
        $username = stripslashes($username);
        $password = stripslashes($password);
        $username = mysql_real_escape_string($username);
        $password = mysql_real_escape_string($password);

        $query = mysql_query("SELECT * FROM users WHERE Username='$username' AND Password='$password'");
        $numrow = mysql_num_rows($query);

    if($username && $password){

    $query = mysql_query("SELECT * FROM  users WHERE username='$username'");
    $numrow = mysql_num_rows($query);

    if($numrow !=0){

        while($row = mysql_fetch_assoc($query)){

            $dbusername = $row['username'];
            $dbpassword = $row['password'];         
        }

        if($username == $dbusername && $password == $dbpassword ){

            $_SESSION['user_id'] = $user_id;
            header("Location: userhome.php");

        }
        else{
            echo "Incorect password";
        }

    }
    else{
        die("This user dosent exists");
    }
}
else{

    $reg = die("Please enter username and password");
}
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:13:43.997

您还没有`session_start()`在文件的开头调用，所以`$username`将是一个空字符串，并且 update 命令只会更新用户名是空字符串的行。

编辑：事实上，该代码甚至不会运行，因为你还没有调用`session_start()`，`isset($_SESSION['update'])`将评估为假。

你的意思是写`$_SESSION['update']`吗？不应该这样`$_POST['update']`吗？

最后但并非最不重要的一点是，我个人会替换它：

```
<input name="update" type="submit" submit="submit" value="Edit Account" class="button"> 
```

有了这个：

```
<input type="submit" value="Edit Account" class="button">
<input type="hidden" name="update" value="update"> 
```

至少为了清楚起见。我不知道它是否仍然如此，但随着时间的推移，并非所有浏览器都提交了提交按钮的名称/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:25:45.973

先生，从上面给出的代码中，我认为您的 login.php 中有错误

```
$_SESSION['user_id'] = $user_id; 
```

您没有为 $user_id 分配值，这就是为什么将空白值设置为 $_SESSION['user_id']。

```
 <?php
session_start();

    require('connect_mysql.php');

     if($_SERVER['REQUEST_METHOD'] == 'POST')
     {

        $username = $_POST["username"];
        $password = $_POST["password"];
        $username = stripslashes($username);
        $password = stripslashes($password);
        $username = mysql_real_escape_string($username);
        $password = mysql_real_escape_string($password);

        $query = mysql_query("SELECT * FROM users WHERE Username='$username' AND Password='$password'");
        $numrow = mysql_num_rows($query);

    if($username && $password){

    $query = mysql_query("SELECT * FROM  users WHERE username='$username'");
    $numrow = mysql_num_rows($query);

    if($numrow !=0){
        $user_id = 0;  
        while($row = mysql_fetch_assoc($query)){

            $dbusername = $row['username'];
            $dbpassword = $row['password'];         
            $user_id = $row['user_id'];
        }

        if($username == $dbusername && $password == $dbpassword ){

            $_SESSION['user_id'] = $user_id;
            header("Location: userhome.php");

        }
        else{
            echo "Incorect password";
        }

    }
    else{
        die("This user dosent exists");
    }
}
else{

    $reg = die("Please enter username and password");
}
}

?> 
```

# java - 无法播放 wav 文件...在 Android 中。！

> ID：15171348
> 
> 赞同：2
> 
> 时间：2013-03-02T06:03:53.637
> 
> 标签：java, android, android-mediarecorder

我正在尝试在 Android 中附加两个 wav 文件。为此，我将这两个文件都读取到 2 字节数组（A&B）中。我将它们都合并到一个新数组（C）中。我将第三个数组 C 中的内容写入一个新的 .wav 输出文件。我还放了 wav 头文件。我得到了大小为（C=A+B）的输出文件。但是播放器无法播放该输出文件。

如果第二个输入文件（B）没有读取到字节数组（这里我初始化B。但是没有将第二个文件的内容写入字节数组，B），那么我可以播放输出文件，这里第一个文件完全播放但是播放器静音后（代替第二个文件）..

我为此使用了以下片段：请帮助解决此问题

```
File firstFile=new File("path1.wav");
        File secondFile=new File("path2.wav");

        int size1=(int)firstFile.length();
        int size2=(int)secondFile.length();

        Log.i("Size1::"+size1,"Size2::"+size2);

        dataOne=new byte[size1];
        dataTwo=new byte[size2];

        newData=new byte[dataOne.length+dataTwo.length];

        try 
        {
            in1=new DataInputStream(new BufferedInputStream(new FileInputStream(firstFile)));
            in2=new DataInputStream(new BufferedInputStream(new FileInputStream(secondFile)));

            in1.readFully(dataOne);
            in1.close();
            in2.read(dataTwo);
            in2.close();

            int j;
            for(j=0;j<dataOne.length;j++)
                newData[j]=dataOne[j];
            for(int m=0;m<dataTwo.length;m++)
                newData[j+m]=dataTwo[j];

        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try 
        {
            fWriter = new FileOutputStream("outputPath.wav");

            WAVE(fWriter);

            //fWriter.write(newData,0,newData.length);

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我使用以下两种方法创建 wav 标头

```
public void WAVE(FileOutputStream fWriter)
{

    try 
    {
        //0------------3
        fWriter.write('R');
        fWriter.write('I');
        fWriter.write('F');
        fWriter.write('F');

        //4------7

        byte[] res=new byte[4];

        int sizeOfFile=newData.length-8;
        res=toBytes(sizeOfFile);
        for(int j=0;j<4;j++)
            Log.i(""+j,""+res[j]);
        fWriter.write(res,0,4);

        //8-15
        fWriter.write('W');
        fWriter.write('A');
        fWriter.write('V');
        fWriter.write('E');
        fWriter.write('f');
        fWriter.write('m');
        fWriter.write('t');
        fWriter.write(' ');

        //16----19
         res=new byte[4];
        res=toBytes(16);
        for(int j=0;j<4;j++)
            Log.i(""+j,""+res[j]);
        fWriter.write(res,0,4);

        //20---21
        res=toBytes(1);
        for(int j=0;j<2;j++)
            Log.i("PCM"+j,""+res[j]);
        fWriter.write(res,0,2);

        //22---23
        res=toBytes(2);
        for(int j=0;j<2;j++)
            Log.i("NOC:MONO/STEREO"+j,""+res[j]);
        fWriter.write(res,0,2);

        //24--27
        int ASR=Integer.parseInt(44100);  
        res=toBytes(ASR);
        for(int j=0;j<4;j++)
            Log.i(ASR+"ASR"+j,""+res[j]);
        fWriter.write(res,0,4);

        //28--31 Bytes Per Second

        int Number_of_channels=2;
        int Samples_per_second=ASR;
        int Bits_per_Sample=32;
        int BPS=Number_of_channels*Samples_per_second*Bits_per_Sample/8;
                Integer.parseInt(audioSamplingRate);
        res=toBytes(BPS);
        for(int j=0;j<4;j++)
            Log.i(ASR+"BPS"+j,""+res[j]);
        fWriter.write(res,0,4);

        //32--33 Block Alignment

        int BA= Number_of_channels*Bits_per_Sample/8;

        res=toBytes(BA);
        for(int j=0;j<2;j++)
            Log.i("Block Alignment"+j,""+res[j]);
        fWriter.write(res,0,2);

        //34---35  Bits Per Sample

        res=toBytes(Bits_per_Sample);
        for(int j=0;j<2;j++)
            Log.i(ASR+"Bits Per Sample"+j,""+res[j]);
        fWriter.write(res,0,2);

        //36---39 "data"
        fWriter.write('d');
        fWriter.write('a');
        fWriter.write('t');
        fWriter.write('a');

        //40----43 length of data
        res=toBytes(newData.length);
        for(int j=0;j<4;j++)
            Log.i("Data Size"+j,""+res[j]);
        fWriter.write(res,0,4);

        fWriter.write(newData);

        fWriter.close();
    } 
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
 public byte[] toBytes(int i)
{
  byte[] result = new byte[4];

  result[0] = (byte) (i >> 24);
  result[1] = (byte) (i >> 16);
  result[2] = (byte) (i >> 8);
  result[3] = (byte) (i /*>> 0*/);

  return result;
} 
```

我使用 API 8 (2.2 Froyo)

# unix - 无论如何将环境变量限制为只读

> ID：15171349
> 
> 赞同：0
> 
> 时间：2013-03-02T06:04:09.763
> 
> 标签：unix, ssh, telnet

我在 openssh/telnet 代码中使用以下设置用户环境的代码。

```
setenv("TEST_ENV", "testing", 1); 
```

但这可以由用户在登录后修改，是否有使其只读环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:14:28.180

不，我不知道有任何方法可以将进程的环境设置为只读。

你知道，我相信，一个进程不能改变它的*父*环境，并且一个进程有完全的自由来设置它反过来创建的任何进程的初始环境。可能值得更详细地了解您想要做什么，或者您想要阻止程序能够做什么。

一些操作系统在内核中有相当精细的沙盒支持（例如，我知道 OS X 有，但它不会是唯一的），这些*可能*能够控制对`getenv`. 但这显然是特定于平台的。

# mysql - ASP.NET 更新命令和 SQL 逻辑

> ID：15171353
> 
> 赞同：-1
> 
> 时间：2013-03-02T06:04:44.737
> 
> 标签：mysql

我正在尝试在 ASP.NET 网站上使用更新命令，我的 SQL 逻辑如下：

```
UPDATE (SELECT `Event Name`,`Date`,`Time`,`Location`,`Goal`,`ID` FROM Calendar) 
```

但是，MySQL 返回错误：

> #1248 - 每个派生表都必须有自己的别名

任何解决此问题的想法将不胜感激。另外，我已经看到了普通 SQL 命令的替代方法：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.updatecommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datagrid.updatecommand.aspx)

所有解决方案都有助于构建此 ASP 站点 (C#)。请记住，我是这项技术的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:15:42.673

更新语句看起来有点奇怪。不应该是这样的：

```
UPDATE Calendar 
SET [Event Name] = @Event, Date = @date, Time = @time, 
Location = @location, Goal = @goal
WHERE ID = @id 
```

注意列名中的空格，你应该用方括号将它们括起来，即`[Event name]`.

# prolog - 配对团队

> ID：15171357
> 
> 赞同：0
> 
> 时间：2013-03-02T06:05:17.397
> 
> 标签：prolog

该数据库包含一个团队列表，每个团队都按位置分隔（西队、东队等）。有两种事实可以描述这一点。团队（团队编号，损失）和区域（团队编号，区域）。例如：

```
team(1, 10).
team(2, 11).
team(3, 12).
team(4, 13).

region(1, east).
region(2, west).
region(3, east).
region(4, southeast). 
```

注意：球队名单并不总是按照损失最小到最大损失的顺序排列。

我正在尝试将一组团队配对在一起，以便将损失最高的团队与损失最少的团队配对，然后将损失第二高的团队与损失第二少的团队配对，等等。规则是，在同一区域内配对团队是一个优先事项。在上面的示例中，第 3 队和第 1 队将被配对，因为他们都是东部球队。现在，剩下的队伍是 2 队和 4 队。但由于他们所在的地区没有其他球队，所以 2 队和 4 队相互匹配。

现在，我正在考虑我可以编写什么函数来配对团队。我已经编写了一个函数来将一个区域内的所有不同团队分组到一个相应的列表中。我还编写了一个函数来获取最小值和最大值（最高和最低损失）。

我如何编写一个函数来配对同一区域内的所有团队，然后制作一个新列表，将所有剩余的团队粘贴在该列表中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T04:13:13.063

> 我还编写了一个函数来获取最小值和最大值（最高和最低损失）。

Prolog 和其他声明性语言在一些令人惊讶的方面不同于过程语言，其中之一是经常做一些工作以期望从某种循环结构中重用它并不是完全正确的方法。这在 SQL 中更为明显，您应该始终根据集合进行处理，但它也适用于 Prolog，我们拥有的少数显式循环结构并未大量使用。

在程序环境中匹配低分和高分球队的问题最好通过这样的过程来解决：

```
def match(teams):
  while we have teams:
    remove the lowest scoring team from teams
    remove the highest scoring team from teams
    save this pair
  return the list of pairs 
```

使此功能更具功能性的一种天真的方法是使用递归：

```
def match(teams):
  if teams is empty: return empty list
  otherwise:
    remove the lowest scoring team
    remove the highest scoring team
    return this pair appended to match(teams without these two items) 
```

您实际上可以毫不费力地将其转换为外观合理的 Prolog：

```
match([], []).
match(Teams, [Lowest-Highest|Pairs]) :-
  lowest(Teams, Lowest),
  highest(Teams, Highest),
  select(Lowest, Teams, TeamsWithoutLowest),
  select(Highest, TeamsWithoutLowest, RemainingTeams),
  match(RemainingTeams, Pairs). 
```

这不太可能是有效的，因为在 内部有大量重复的列表扫描和大量的列表重建`select/3`，但它可能更具声明性。

另一种方法是对团队列表进行排序，然后将其折叠回自身以获得最低和最高配对。视觉上：

```
[1, 2, 3, 4, 5, 6]
[1, 2, 3],  [4, 5, 6]
[1, 2, 3],  [6, 5, 4]

[1,     2,     3]
[6,     5,     4]
-------------------
[1-6], [2-5], [3-4] 
```

我们可以直接在 Prolog 中执行此操作，但首先我们需要一种方法来配对两个列表：

```
pair_off([], _, []).
pair_off([L|Ls], [R|Rs], [L-R|Rest]) :- pair_off(Ls, Rs, Rest). 
```

然后算法像这样进入 Prolog：

```
match_lowest_highest(SortedList, Pairs) :-
  length(SortedList, N2),
  N is N2 div 2,
  length(TopHalf, N),
  append(TopHalf, BottomHalf, SortedList),
  reverse(BottomHalf, BottomHalfFlipped),
  pair_off(TopHalf, BottomHalfFlipped, Pairs). 
```

这仍然不是非常有效，但`reverse/2`内置可能正在使用差异列表，所以它不应该太贵；通过使用`append/3`已经物化的未知数列表，我们节省了一堆临时列表结构，这些结构将被丢弃。所以我不认为这会非常低效，但我相信还有其他方法可以做到这一点，效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:01:29.220

好的，我已经试了一下。我认为 all_teams_paired/2 将提供您所描述的所有配对团队的列表，以及剩余团队（如果有奇数个团队）。

```
% list of all regions
regions(Regions) :- 
    findall(Region, region(_, Region), UnsortedRegions),
    sort(UnsortedRegions, Regions).

% list of all teams in a region
teams_in_region(Region, Teams) :- findall(Team, (team(Team, _), region(Team, Region)), Teams).

% bottom team in a list
bottom_team(TeamList, BottomTeam) :-
    member(BottomTeam, TeamList),
    findall(Losses, (team(Team, Losses), member(Team, TeamList)), AllLosses),
    team(BottomTeam, Losses),
    min_member(Losses, AllLosses).

% top team in a list
top_team(TeamList, TopTeam) :-
    member(TopTeam, TeamList),
    findall(Losses, (member(Team, TeamList), team(Team, Losses)), AllLosses),
    team(TopTeam, Losses),
    max_member(Losses, AllLosses).

% teams are paired with the top loser playing the bottom loser and there can be a leftover
%  if there is an odd number of teams
paired_teams([], [], []).
paired_teams([LonelyTeam], [], [LonelyTeam]).
paired_teams(TeamList, PairedTeams, UnpairedTeam) :-
    top_team(TeamList, TopTeam),
    bottom_team(TeamList, BottomTeam),
    TopTeam \= BottomTeam,
    subtract(TeamList, [TopTeam, BottomTeam], RemainingTeams),
    paired_teams(RemainingTeams, RemainingPairedTeams, UnpairedTeam),
    append([TopTeam-BottomTeam], RemainingPairedTeams, PairedTeams).

% a list of regions has an associated list of paired teams and leftover teams
region_paired_teams([], [], []).
region_paired_teams(Regions, PairedTeams, UnpairedTeams) :-
    Regions = [Region|RemainingRegions],
    teams_in_region(Region, TeamList),
    paired_teams(TeamList, RegionPairedTeams, RegionUnpairedTeam),
    region_paired_teams(RemainingRegions, RemainingPairedTeams, RemainingUnpairedTeams),
    append(RegionPairedTeams, RemainingPairedTeams, PairedTeams),
    append(RegionUnpairedTeam, RemainingUnpairedTeams, UnpairedTeams).

% a list of all teams paired with priority given to region and a leftover team (if any)
all_teams_paired(TeamsPaired, Leftover) :-
    regions(Regions),
    region_paired_teams(Regions, RegionPairedTeams, UnpairedTeams),
    paired_teams(UnpairedTeams, NonRegionPairedTeams, Leftover),
    append(RegionPairedTeams, NonRegionPairedTeams, TeamsPaired). 
```

我是否正确理解了您的要求？

# android - gmail应用程序中使用什么样式用于不确定的进度条android

> ID：15171358
> 
> 赞同：1
> 
> 时间：2013-03-02T06:05:19.480
> 
> 标签：android, android-actionbar, android-progressbar

我试图找到一些关于 android gmail 应用程序中不确定的进度条使用什么样式的提示。位于应用程序右下角的那个。我已经设法使用 setActionView 更改了操作栏中的项目...现在我找不到他们使用的确切样式。有谁能够帮助我？

谢谢

问候， 帕尔瓦兹·巴斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:44:12.880

您正在寻找的风格是`?android:attr/progressBarStyle`.

令人惊讶的是，除了 之外`?android:attr/progressBarStyleLarge`，它还有一个白色背景，没有标明名称差异。

# c++ - cplusplus中char数组和字符串的区别

> ID：15171365
> 
> 赞同：1
> 
> 时间：2013-03-02T06:05:38.373
> 
> 标签：c++, string, char

我想知道 C++ 中字符数组和字符串的区别。

有人能回答这个吗？？请，

谢谢毗湿奴库玛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:07:40.210

[`string`](http://en.cppreference.com/w/cpp/string/basic_string)是一个类/对象，具有方法和封装的数据。

char 数组只是一个用于保存字符的连续内存块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T06:12:51.840

(1)`char`数组只是一个`char`类型数据块：
例如`char c[100];`// 100 个连续字节被分配给`c`

(2a)`string`如果你`char`的意思是字符串，那么它与数组有点相似，但它分配在内存的只读段中，应该分配给`const char*`：
例如`const char *p = "hello";`//“hello”驻留在连续字符缓冲区中

[注：`char c[] = "hello";`属于（1）类，不属于（2a）类]

(2b)`string`如果你是这样`std::string`的话，它是来自标头的标准库类，你可能想参考它的文档或在[网上搜索](http://www.cplusplus.com/reference/string/string/)

# ios - _iVar 和@property？

> ID：15171368
> 
> 赞同：0
> 
> 时间：2013-03-02T06:05:59.463
> 
> 标签：ios, properties, synthesize

我看到有人写这样的代码

```
@interface SomeClass:<NSObject>{
       NSString * _iVar; 
```

}

```
@property(nonatomic,retain)NSString *iVar; 
```

并在实施文件中

```
@synthesize iVar = _iVar; 
```

但我总是喜欢这样写代码：

```
@interface SomeClass:<NSObject>
@property(nonatomic,retain)NSString *iVar; 
```

并在实施文件中

```
@synthesize iVar = _iVar; 
```

它们都工作正常，我可以使用一个实例 someClass 来获取 iVar“someClass.ivar”。我只知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:12:15.690

您现在甚至不必再合成 iVar。最新的 Xcode 将自动为每个属性创建一个支持实例变量，属性名称带有下划线前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:19:21.917

在 Objective-C 中，当您通过“。”使用任何东西时。（点语法），它正在访问属性。您已经声明并合成了一个名为 iVar 的属性，因此您可以使用 someClass.iVar 访问它。

当您声明一个属性时，会自动使用它创建一个变量。因此，即使您不创建变量，它也会在那里。

为了避免歧义，人们正在创建具有不同名称的属性和 iVar。因此，他们可以识别是否正在使用变量或正在使用属性。在这种情况下，人们让编译器知道一个特定的变量与一个属性相关联的低方式：

```
@synthesize iVar = _iVar; 
```

如果你想直接在类之外访问变量而不是属性，你应该使用“->”（箭头语法）。

# android - 您不能将自定义标题与其他标题功能结合使用

> ID：15171373
> 
> 赞同：4
> 
> 时间：2013-03-02T06:06:30.183
> 
> 标签：android, android-actionbar, actionbarsherlock

在我的应用程序中，我使用的是 ActionBarSherlock 库。另外我正在使用自定义标题栏。这是我的onCreate：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.main_tab);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title); 
```

* * *

在我的styles.mxl

```
<style name="MyTheme" parent="Theme.Sherlock">
        <item name="android:background">#ff888888</item>
        <item name="android:windowNoTitle">false</item>
        <item name="android:windowTitleSize">50dp</item>
        <item name="android:windowTitleBackgroundStyle">@style/windowTitleBackgroundStyle</item>
    </style>
<style name="windowTitleBackgroundStyle">  
  <item name="android:background">#00688B</item>                
</style> 
```

* * *

在清单文件中，我使用 MyTheme 进行活动。

```
android:theme="@style/MyTheme" 
```

* * *

此代码适用于较低的 android 版本（我已经用 GB2.3.5 测试过）。但是当我使用 ICS 进行测试时，它因以下错误而崩溃：“您无法将自定义标题与其他标题功能结合使用”我在 StackOVerflow 讨论中进行了彻底的讨论，但无法解决问题。尝试的解决方案：1）错误 2）没有 values-v11 文件夹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T22:09:54.977

我收到了同样的例外。

**这是我发现的：** 在较新版本的 Android 中，只要选择 Holo 主题，框架就会使用 Window.FEATURE_ACTION_BAR 功能。每当应用调用 setFeatureInt(Window.FEATURE_CUSTOM_TITLE) 并且 FEATURE_ACTION_BAR 已设置时，框架都会引发异常。

在我的例子中，values-v11 文件夹中的 styles.xml 文件重新定义了我的主题以从 android:Theme.Holo 继承。当我尝试在 Android 3.0 或更高版本上运行我的应用程序时，它崩溃了，因为 Holo 默认使用 ActionBar。修复很简单。使用 Holo 时关闭 ActionBar。这是修改后的 values-v11\styles.xml 更改：

```
<style name="AppBaseTheme" parent="android:Theme.Holo.NoActionBar">
    <!-- API 11 theme customizations can go here. -->
</style> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T10:14:32.730

我有同样的问题并解决了它：

根本原因：在清单中，我错误地将这个标签从启动屏幕复制粘贴到我的活动中：@android:style/Theme.NoTitleBar 当我还在我的活动上请求 FEATURE_CUSTOM_TITLE 时发生致命异常，导致冲突。

解决方案：要修复它，我检查了以下 3 件事：1）OnCreate 方法：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.activity_login);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_titlebar);

    } 
```

2）在您的 manifest.xml 中：确保只有这样的一行才会出现在启动屏幕中（如果您有的话）： android:theme="@android:style/Theme.NoTitleBar 如果您想要自定义酒吧。

在应用程序标签中，我唯一的主题标签是这个：android:theme="@style/AppTheme"

在活动标签中，我没有主题标签。

3) Go to your activity's XML layout, and view it in GRAPHIC LAYOUT mode. Maye sure your that the Theme says AppTheme (its the the you put on the manifest) Mine said "No Title", so this was causing the problem.

# iphone - 如何在uiweb视图ios中自定义字符串值

> ID：15171374
> 
> 赞同：1
> 
> 时间：2013-03-02T06:06:49.903
> 
> 标签：iphone, ios, uiwebview

在我的应用程序中，我想在 UIWebView 中将 URL 链接值显示为“单击此处查看链接”？

```
 For ex: link: http://www.youtube.com/watch?v=pii4G8FkCA4

  I want to show it as in UIWebView as "click here to see the link" 
```

任何人都可以帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:16:54.420

试试这个，

```
 NSString *html = @"<a href=\"http://www.youtube.com/watch?v=pii4G8FkCA4/\">click here to see the link</a>";
    [webview loadHTMLString:html baseURL:nil]; 
```

这将帮助您在 webView 中加载 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:19:57.480

试试这样，你会得到，

```
UIWebView *webview=[[UIWebView alloc]init];
  webview.frame=CGRectMake(0, 0, 320, 480);
  NSString *html = @"<a href=\"www.youtube.com/watch?v=pii4G8FkCA4\">click here to see the link</a>";
  [webview loadHTMLString:html baseURL:nil];
  [self.view addSubview:webview]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:15:07.483

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ( inType == UIWebViewNavigationTypeLinkClicked ) {
        [[UIApplication sharedApplication] openURL:[inRequest URL]];
        return NO;
    }

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:29:01.080

试试这个，viewcontroller.h

```
 IBOutlet UIWebView *webView; 
```

视图控制器.m

```
 NSString *strHtml = @"<a href=\"http://www.youtube.com/watch?v=pii4G8FkCA4/\">click here to see the link</a>";
[webview loadHTMLString:strHtml baseURL:nil]; 
```

# asp.net-mvc - 使用 jquery 在 ASP.net 中使用 WCF Rest Service

> ID：15171375
> 
> 赞同：0
> 
> 时间：2013-03-02T06:06:54.440
> 
> 标签：asp.net-mvc, wcf

我正在尝试使用 jquery 在 asp.net 项目中使用 wcf rest api。为此我做了：

1.  创建 WCF Rest 服务的源代码可以从[这里](https://skydrive.live.com/#cid=CB9B95B4DD4D63A6&id=CB9B95B4DD4D63A6!1064)下载。
2.  创建了一个 ASP.Net 项目以使用 jquery 使用该 restAPI。源代码[在这里](https://skydrive.live.com/#cid=CB9B95B4DD4D63A6&id=CB9B95B4DD4D63A6!1063)。

在单击按钮的 ASP .Net 项目中，我试图调用 REST 服务。但每次我遇到两个问题：

1.  `var jsondata = JSON.stringify(request);`在 TestHTML5.js 中调用会引发错误，提示“ *Microsoft JScript 运行时错误：'JSON' 未定义*”

2.  当我按下忽略时，它会继续向 WCF Rest API 调用，但它总是返回错误（未找到）函数。Rest API 永远不会被调用。

提前感谢大家的帮助。

* * *

**回答：** 解决方案和源链接可以在这个[链接](https://skydrive.live.com/#cid=CB9B95B4DD4D63A6&id=CB9B95B4DD4D63A6!1116)上找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:03:53.377

你添加了这个参考吗？

```
script type="text/javascript" src="../../json.js"></script> 
```

我有同样的问题和搜索我得到[这个](http://forums.asp.net/t/1761194.aspx/1)和这个[结果](http://www.vbforums.com/showthread.php?653241-RESOLVED-Microsoft-JScript-runtime-error-JSON-is-undefined)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T08:54:49.393

我查看了您提供的示例代码，问题是您违反了[`same origin policy restriction`](http://en.wikipedia.org/wiki/Same_origin_policy). 您不能执行跨域 AJAX 调用。在您的示例中，服务托管在其上`http://localhost:35798`，而 Web 应用程序调用它`http://localhost:23590`是不可能的。您必须在同一个 ASP.NET 项目中托管服务和调用应用程序。您似乎已尝试使用 ( `$.support.cors = true;`) 在客户端启用 CORS，但您的服务不支持 CORS。

调用页面`TestHTML5.htm`（`TestHTML5.js`您应该修复您的脚本引用。还有一个问题是以下`<script type="text/javascript"/>`无效的行。

所以首先修复你的标记（我已经删除了你在标记中的所有 CSS 噪音，以便专注于重要部分）：

```
<!DOCTYPE html>
<html dir="ltr" lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>SignUp Form</title>
    <script type="text/javascript" src="../Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="../Scripts/TestHTML5.js"></script>
</head>
<body>
    <button id="Send" onclick="testHTML5OnClick();">
        Send Me ID!
    </button>
</body>
</html> 
```

然后在你的`TestHTML5.js`你也可以清理一下。例如，您的服务正在侦听以下 url 模式`json/{id}`并仅接受 GET 动词，而您正在尝试使用不可能的 POST。除此之外，您还尝试使用对 GET 动词没有任何意义的 JSON.stringify 方法。您应该简单地将 id 作为您在服务中定义的 url 部分的一部分发送。

```
function testHTML5OnClick() {
    var id = 5;
    var url = "../RestServiceImpl.svc/json/" + id;
    var type = 'GET';
    callLoginService(url);
}

function callLoginService(url, type) {
    $.ajax({
        type: type,
        url: url,
        success: serviceSucceeded,
        error: serviceFailed
    });
}

function serviceSucceeded(result) {
    alert(JSON.stringify(result));
}

function serviceFailed(result) {
    alert('Service call failed: ' + result.status + '' + result.statusText);
} 
```

# python - 如何在 Pygame 中获取图像位置

> ID：15171378
> 
> 赞同：0
> 
> 时间：2013-03-02T06:07:15.727
> 
> 标签：python, image, drag-and-drop, pygame

我正在为图像上的鼠标拖放效果进行编码。同时，我想在每次拖放时记录图像的左上角，有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T18:29:51.210

如果您从 派生类`pygame.sprite.Sprite`，则可以通过 获得该位置`guy.rect`。取决于你想要居中，还是toplef，或者完整的矩形：

`guy.rect.topleft`或`guy.rect.center`或`guy.rect`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:14:45.240

你用什么方法来绘制图像？没有这个就很难回答这个问题。

如果您还没有这样做，您可以使用一个类来保存有关您的图像的数据，例如位置和几何形状。

# c - 仅使用 que 和递归的级别顺序遍历算法

> ID：15171385
> 
> 赞同：1
> 
> 时间：2013-03-02T06:08:13.907
> 
> 标签：c

我的问题是如何在二叉树上执行级别顺序遍历？我知道您会使用 que，但是我将如何递归地执行此操作？简而言之，我正在尝试按级别顺序打印树的内容，如下所示：

```
 3
    / \
   2   1
  / \   \
 4   6   10 
```

将打印：3 2 1 4 6 10

我尝试了无数次失败的尝试，这些尝试都出现了段错误并感到沮丧并删除了它们。我正在尝试使用 NO 循环来做到这一点，只有递归。使用循环它还不错，但我最近开始学习递归并希望仅使用递归来完成此方法。当您无法使其正常工作时，它会非常令人沮丧。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:18:31.163

伪代码：

```
Traverse (queue, t):
  visit t
  For each child c of t:
      put c to queue
  Traverse (queue, pop queue) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:06:53.853

我建议这样的事情：

```
struct node {
    int isRoot;
    int val;
    struct node * left;
    struct node * right;
};

int printTree(node *root, int level){
    int a = 0,b = 0;
    if(level > 0){
        if(root->left != NULL){
            a = printTree(root->left, level-1);
        }else{ a = 1; }
        if(root->right !=NULL){
            b = printTree(root->right, level-1);
        }else{ b = 1: }
    }else{
        printf("%i", root->val);
        return 0;
    }
    if(isRoot && !(a && b)){
        printTree(root, level+1);
    }
    return a&&b;
}

int main(void){
    //get your tree somehow and put the root into
    //node *head with only the root node having isRoot as true;
    printTree(head, 0);
} 
```

顺便说一句，我不确定这是否会编译，所以将其视为伪代码。

编辑：更新的代码不会那么迟钝。它按级别进行，第一个级别 0 ( `root`)，然后是级别 1 ( `root->left`, `root->right`)，依此类推。和标志表示何时修剪树（`a`节点）。`b``NULL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T12:05:18.217

你不需要做递归，它会更慢！

看一下在 javascript 中使用队列的简单示例！

```
function leverOrder(root) {
    // Node struct -> { value, left, right }

    if(!root) return;

    var q = [ root ];

    while(q.length) {
       var current = q.shift();

       // do stuff with value
       console.log(current.value);

       if(current.left)  q.push(current.left);
       if(current.right) q.push(current.right);
    }

} 
```

# java - 如何让我的程序返回 -1/4 而不是 1/-4？

> ID：15171389
> 
> 赞同：0
> 
> 时间：2013-03-02T06:08:20.783
> 
> 标签：java, class

\帮助！我的作业要在今晚 12 点之前完成，我似乎无法让我的程序将负数输出为 -1/4 而不是 1/-4！这让我很沮丧，因为事实是，我不能只在我的数字前面放一个“-”（正如你在下面的程序中看到的，我已经注释掉了）。我尝试将分数设为 -1/4（仅使用这个分数作为示例）位于“public RationalNumber(int...) { 行：你看到我写 *-1 的部分了吗？我在哪里在导致我得到 1/-4 的那一步出错了？这让我很沮丧......提前谢谢。

```
private int n;
private int d;      
public RationalNumber(int numerator, int denominator) {
    if (denominator == 0) {
        throw new IllegalArgumentException();
    }               
    if (denominator < 0) {
        denominator = denominator * -1;
        numerator = numerator * -1;          
      }
    n = numerator;
    d = denominator;        
    simplified();
}   

public RationalNumber add(RationalNumber rn) {
    int comDenom = d * rn.getDenominator(); 
    int num1 = n * rn.d;
    int num2 = rn.n * d;
    d = comDenom;
    return new RationalNumber(num1 + num2, d);      
}

public RationalNumber subtract(RationalNumber rn) {
    int num1 = n * rn.d;
    int num2 = rn.n * d;
    return new RationalNumber(num1 - num2, d);
}

public RationalNumber multiply(RationalNumber rn) {
    int numer = n * rn.n;
    int denom = d * rn.d;
    return new RationalNumber(numer, denom);
}

public RationalNumber divide(RationalNumber rn) {
    int numer = n * rn.d;
    int denom = d * rn.n;
    return new RationalNumber(numer, denom);
}   

public RationalNumber() {
    n = 0;
    d = 1;
}

public boolean equals(RationalNumber o) {
    return (n == o.getNumerator() && d == o.getDenominator());
}   

public int getDenominator() {
    return d;
}

public int getNumerator() {
    return n;
}   

public String toString() { //Prints everything here.
    if (d == 1) {
        return "" + n;
    }       
    if (n == 0) {
        return "0";
    }
    /*if ((n < 0) || (d < 0)) {
        return "-" + Math.abs(n) + "/" + Math.abs(d);
    }*/
    return n + "/" + d;
}   

private void simplified() {
     if (n != 0) {
         int cDenom = gcd(n, d);
         n = n / cDenom;
         d = d / cDenom;
     }
}   

private int gcd(int gcdNum1, int gcdNum2) {
    while (gcdNum1 != 0 && gcdNum2 != 0) {
        int tempNum = gcdNum2;
        gcdNum2 = gcdNum1 % gcdNum2;
        gcdNum1 = tempNum;
    }
    return gcdNum1 + gcdNum2;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:13:13.960

因为这是家庭作业，所以自己查找和解决问题符合您的最大利益。

这里有一些提示可以帮助您入门：

*   找出构造函数调用之前和之后的`n`和的值。`d``simplified()`

*   您可以使用 Java IDE 的调试器或使用跟踪打印来执行此操作；即调用`System.out.println(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:15:31.657

您可以放回方法的注释掉部分`toString`，只需将其设为 XOR (^) 而不是 OR (||)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:15:48.427

```
return n + "/" + d; 
```

改成：

```
return ((n>=0 && d>=0) || (n<0 && d<0))?(""):("-")+Math.abs(n)+"/"+Math.abs(d); 
```

只是一个简单的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:39:13.267

问题是该`gcd()`方法可能返回否定结果。当您调用该`simplified()`方法时，您将`n`和`c`与可能的负数相除，然后更改它们的符号。要修复它，您可以更改`gcd()`方法以始终返回积极的结果。

更改此行：

```
return gcdNum1 + gcdNum2; 
```

到

```
if (gcdNum1 + gcdNum2 < 0) {
    return -(gcdNum1 + gcdNum2);
} else {
    return gcdNum1 + gcdNum2;
} 
```

然后检查你是否得到正确的结果。

# perl - 交替打印 STDERR

> ID：15171390
> 
> 赞同：1
> 
> 时间：2013-03-02T06:08:27.443
> 
> 标签：perl

我想替换`print STDERR`我的代码库中的现有语句。

显然，我发现它们不太适合眼睛，或者只是我。我是否应该`warn`知道它将被`$SIG{_WARN_}`处理程序捕获。或者有没有更好的选择。如果是，为什么要使用这些选项而不是`print STDERR`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:31:53.167

这样做的好处`print STDERR`是您可以立即看到会发生什么——您将某些内容打印到 STDERR。这可能是一条调试消息，或者其他什么。

`warn`功能略有不同：

1.  它将触发警告处理程序，并且
2.  如果您不以换行符结尾，它将附加行号。

您可能应该将其用于警告，而不是用于记录数据

您可能还对`Carp`函数族感兴趣。`carp`像 一样工作`warn`，但从调用点报告行号/文件。`cluck`将`warn`带有堆栈跟踪。

但没有什么能阻止你自己滚动。一个功能等效的 sub to`print STDERR`将是：

```
sub debug { print STDERR @_ } 
```

你现在可以从字面上看`s/print STDERR/debug/g`你的来源，除了那一次。`debug`此外，如果您希望能够省略参数周围的括号，则必须在使用该函数之前声明或导入该函数。

```
debug "this ", "is ", "DATA"; 
```

需要考虑的一点：调用 sub 很慢，而调用的`print`是内置操作码。你可以用美丽换取性能，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T11:11:24.223

创建`debug`要包装的子例程`print STDERR`将为您提供比简单`print`or`warn`语句提供的更多灵活性，例如关闭调试消息或将它们重定向到不同目的地的能力。例如，就在我的脑海中：

```
sub debug {
  my ($msg, %param) = @_;

  $param{level} //= 1; # default if no level specified
  return if $param{level} < $config{log_level};

  given ($param{dest}) {
    when ('mail') { send_email_to_admin(subject => "Application Error!", body => $msg) }
    when ('log') { write_to_logfile($msg) }
    default { print STDERR $msg }
  }
}

debug('foo');   # goes to STDERR by default
$config{log_level} = 2;
debug('bar');  # message is ignored as unimportant at current logging level
debug('bar', level => 3, dest => mail); # still important; gets emailed to admin 
```

# .net - 从数据库中逻辑删除

> ID：15171395
> 
> 赞同：1
> 
> 时间：2013-03-02T06:09:24.563
> 
> 标签：.net, sql, sql-server, entity-framework-4

我有一个包含许多实体和关系的复杂模式。我想定义一个可以撤消的逻辑删除操作。我考虑过为每个表添加“isDeleted”标志，但对我来说似乎很容易出错。我还考虑添加一个类似于原始模式的存档模式，并在每个删除操作中将数据移动到那里。这似乎需要为“删除”和“取消删除”操作编写大量代码（尤其是因为我想模拟逻辑删除的删除级联）。

最后，我不确定在哪里处理我正在使用 EF 的逻辑删除事件，因此我可以在代码中执行此操作，或者我可以在他的 DB 中使用删除触发器。

我会欣赏有关如何以优雅的方式实现逻辑删除的任何建议。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T06:25:45.247

我工作的每家公司都一直使用逻辑删除标志并通过代码进行管理。添加存档模式是一项巨大的开销，IMO 其增加的优雅（编码和性能方面）不值得付出额外的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:15:15.023

由于这是一个 OLTP 数据库，因此使用 IsDeleted 标志没有问题。如果您担心性能，我将继续使用 IsDeleted 标志并通过批处理而不是在线将其移动到存档。

我始终牢记一件事，以避免过度设计某些东西——除非它是一个问题，否则它不是问题。

# httpwebrequest - windows phone 8 应用程序中的 httpwebrequest 抛出“远程服务器返回错误：未找到。”？

> ID：15171398
> 
> 赞同：1
> 
> 时间：2013-03-02T06:09:52.093
> 
> 标签：httpwebrequest, windows-phone-8, httpwebresponse, windows-phone-8-emulator

我正在开发一个 windows phone 8 应用程序，在我的应用程序中我正在调用服务并将一些数据下载到我的应用程序中。

我在 windows phone 8 模拟器中测试我的应用程序，很多时候它会抛出这个错误：

**“远程服务器返回错误：未找到。”**

这就是我创建和使用 httpwebrequest 的方式：-

```
public async Task<string> ServiceRequest(string serviceurl, string request, string methodname)
        {
            string response = "";
            try
            {

                var httpwebrequest = WebRequest.Create(new Uri(serviceurl)) as HttpWebRequest;
                httpwebrequest.Method = "POST";
                httpwebrequest.Headers["SOAPAction"] = "http://tempuri.org/" + iTestservice + "/" + methodname + "";
                httpwebrequest.ContentType = "text/xml";

                byte[] data = Encoding.UTF8.GetBytes(request);
                using (var requestStream = await Task<Stream>.Factory.FromAsync(httpwebrequest.BeginGetRequestStream, httpwebrequest.EndGetRequestStream, null))
                {
                    await requestStream.WriteAsync(data, 0, data.Length);
                }

                var httpTask = httpRequest(httpwebrequest);
            var completeTask = await Task.WhenAny(httpTask, TaskEx.Delay(300000));
            if (completeTask == httpTask)
                return await httpTask;
            else
                httpwebrequest.Abort();
            throw new TimeoutException("Service Timed Out");

        }
        catch (TimeoutException Tex)
        {
            throw Tex;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }
        public async Task<string> httpRequest(HttpWebRequest request)
        {
            string received;

            using (var response = (HttpWebResponse)(await Task<WebResponse>.Factory.FromAsync(request.BeginGetResponse, request.EndGetResponse, null)))
            {
                using (var responseStream = response.GetResponseStream())
                {
                    using (var sr = new StreamReader(responseStream))
                    {

                        received = await sr.ReadToEndAsync();
                    }
                }
            }

            return received;
        } 
```

**我真的不知道是什么问题**

请注意 ：-

我试图在我的模拟器浏览器中打开网站（我的应用程序试图访问的服务 URL），它打开正确，我没有遇到任何问题。

1）这是我的代码的问题，如果是这样，我请求你纠正我？

2）这是任何模拟器问题或任何连接问题？

3）这是在模拟器中打开的任何认证问题吗？

即使对如何解决问题进行了长时间的研究，我也无法解决它。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:03:51.710

当 web 服务请求花费超过 60 秒时，我遇到了这个问题。我读过报告说模拟器不会抛出这个错误，而只会抛出一个实际的设备。然而，根据我的经验，我在模拟器和设备上都发生过这种情况。这是一个无法更改的默认超时设置，即使您在配置中更改它也是如此。自 WP7 以来，此问题一直存在。

我只发现这个问题在其他地方被问过/写过一次。似乎没有多少人接受过这个。

AFAIK，微软知道这一点，但不打算修复它。（事实证明它自 WP7 以来就已经存在，并且没有为 WP8 修复）。我的猜测是，他们认为网络通话在任何情况下都不应超过 60 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T19:35:51.527

我刚刚解决了它向 https 请求添加空凭据，就像这样

```
 httpwebrequest.Credentials = new NetworkCredential("", ""); 
```

在这里他解释了为什么

[http://blog.toetapz.com/2010/11/15/windows-phone-7-and-making-https-rest-api-calls-with-basic-authentication/](http://blog.toetapz.com/2010/11/15/windows-phone-7-and-making-https-rest-api-calls-with-basic-authentication/)

# c++ - 条件运算符中的返回语句

> ID：15171401
> 
> 赞同：0
> 
> 时间：2013-03-02T06:10:47.297
> 
> 标签：c++, c, return, ternary-operator, conditional-operator

我有一个代码段如下：

```
if(a < b)
{
    x = y;
    return w;
}
/* all unrelated variables above*/
x = something;
y = something;
/*both x and y from above*/ 
```

**x 和 y 是全局变量，它们在 if 部分中被修改，我需要将 y 分配给 x 然后返回 w，或者只是一个常量。**

我需要使用三元运算符来替换 if 部分：

我尝试了以下方法：

```
return (((a < b) ? (x = y, w) : 1), (x = something, y = something)); 
```

但是，我似乎没有得到想要的结果。我知道这是错误的。这是因为我使用了类似表达式的**返回**，即：

```
if(x < y)
    return (x = y);
return 1; 
```

我写的是：

```
return ((x < y) ? x = y : 1); 
```

但是，我如何返回一个值，这涉及在三元运算符中预先分配一个完全不同的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:07:04.433

Mankarse 建议的解决方案：

```
return (a < b) ? (x = y, w) : (x = something, y = something, z); 
```

实际上相当于：

```
if (a < b) {
    x = y;
    return w;
}
/* all unrelated variables above*/
x = something;
y = something;
return z; 
```

第二个返回语句很重要。

您不能有条件地从表达式的中间返回，因为 return 是一个语句，您必须返回整个表达式。所以这真的取决于你想在分配给 y 之后如何进行。或者，如果您确实需要在表达式中间更改执行顺序，您可以抛出异常，但我想，在这种情况下会太复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:20:52.787

将代码块放入函数中。

```
function f(){
x = y;//assumes x, y and w are global.
return w;
} 
```

然后在条件语句中使用该函数。

```
(a < b) ? f() : "value to return if a>=b"; 
```

您不需要放在`return`条件语句之前，因为自动返回值的 1，取决于条件的评估。

# jquery - 如何在 razor html 或 mvc3 中的 onchange fn 上传递下拉列表的 id

> ID：15171404
> 
> 赞同：1
> 
> 时间：2013-03-02T06:10:59.090
> 
> 标签：jquery, asp.net-mvc-3, asp.net-mvc-4

我正在调用一个`ChangeCurrency(ID)`在下拉更改时调用的函数。我需要函数中下拉列表的 id。`ChangeCurrency(ID)`但不幸的是，在 razor html 中它显示了这个错误：

```
PjtCostCurrencyID is undefined. 
```

那么如何将下拉列表的 id 传递给函数。请帮助。

以下是代码

```
 @Html.DropDownList("PjtCostCurrencyID", null, new { @onchange = "ChangeCurrency($PjtCostCurrencyID)" }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T06:39:51.553

试试这个

```
 @Html.DropDownList("PjtCostCurrencyID", null, new { @onchange = "ChangeCurrency(this)" })

and in function

function ChangeCurrency(_this)
{
  var PjtCostCurrencyID =_this.id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:16:50.157

应该返回选择元素的 ID。

```
 var select_id = $(this).attr('id'); 
```

# javascript - javascript onclick 变量/社交小部件滑块

> ID：15171408
> 
> 赞同：-1
> 
> 时间：2013-03-02T06:11:31.307
> 
> 标签：javascript, html

我使用在互联网上某处找到的一些旧代码构建了一个社交滑块小部件。我不太擅长 Javascript，但我想知道您是否可以就如何使其正常运行给我一些建议。

现在 - 它只是使用 css 值 margin-top 将容器#example 向上或向下移动 272 像素。我已经设置了两倍的上限，因此容器不能上升超过两次，但我不知道如何让每个按钮正确移动它。

[您可以通过单击此处查看我构建的滑块](http://geoffwatsondesign.com/test-slider.html)，但我将发布我在下面编写的大部分重要 html。

* * *

```
<script language="javascript">
function example_animate(px) {
  var newMargin = parseInt($('#example').css('margin-top')) + px;
  if(newMargin >= -544 && newMargin < 272) {
    $('#example').animate({
        'marginTop' : newMargin + 'px'
    });
  }
}
</script>

<div class="container">
    <div class="socials-menu">
        <a href="#a" class="social-facebook" onclick="example_animate(272)"></a>
        <a href="#b" class="social-twitter" onclick="example_animate(-272)"></a>
        <a href="#c" class="social-youtube" onclick="example_animate(-272)"></a>
    </div>
    <div id="example" class="socials">
        FACEBOOK / TWITTER WIDGET IFRAMES WOULD GO HERE
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:10:00.283

将链接更改为：

```
<a href="#a" class="social-facebook" onclick="example_animate(0)"></a>
<a href="#b" class="social-twitter" onclick="example_animate(-272)"></a>
<a href="#c" class="social-youtube" onclick="example_animate(-544)"></a> 
```

你的功能是：

```
function example_animate(margin) {
    $('#example').animate({
        'marginTop' : margin + 'px'
    });
} 
```

你不需要把事情复杂化。

# html - Opera 是否使用百分比值错误处理背景位置和/或背景大小？

> ID：15171411
> 
> 赞同：3
> 
> 时间：2013-03-02T06:12:00.033
> 
> 标签：html, css-sprites, background-position, css

我正在尝试在具有可变尺寸的元素上使用背景图像作为精灵。因此，我对`background-size`和使用基于百分比的值`background-position`。

我在 Opera（最新版本，12.14）中遇到了这个问题。我怀疑这是导致不当行为的基于百分比的值的`background-position`组合`background-size`。我徒劳地搜索了任何相关信息或公认的问题。

为了演示我面临的问题，我创建了一个 560 x 560 像素的图像，主要是橙色，除了右下角的蓝色正方形，尺寸为 112 x 112 像素，是图像大小的五分之一.

为了将此图像作为背景应用到元素，使蓝色方块完全准确地覆盖它，无论元素的尺寸如何，我都使用了以下样式：

```
.square
{
    background-size: 500% 500%;
    background-position: -400% -400%;
} 
```

这在除 Opera 之外的所有浏览器中都能完美运行，它在元素的右边缘和下边缘显示一些橙色。我推测这些橙色切片是重复的背景图像，就好像 Opera 已经将图像偏移得比它应该的更远。

我创建[了一个 jsfiddle 测试来演示该问题](http://jsfiddle.net/8n7TV/2/)，您可以在 Opera 中查看它以查看我所描述的不良行为。

有关 Opera 的详细信息，取自顶部`opera:about`：

```
Version information

Version: 12.14
Build: 1738
Platform: Win32
System: Windows 7

Browser identification

Opera/9.80 (Windows NT 6.1; WOW64) Presto/2.12.388 Version/12.14 
```

我已经能够收集一些可能提供一些线索的信息：

*   图像越大，偏移越远（即背景位置的值越大），Opera 越出错。

*   如果元素正好是蓝色方块的大小（在这种情况下为 112 x 112 像素 - 您可以在 jsfiddle 中看到），Opera 会正确呈现。

*   如果（支撑自己）图像尺寸是 100 的倍数（即 500 x 500 像素，而不是 560 x 560 像素），Opera 会正确渲染。

目前，我猜这是 Opera 的一个错误，因为它在所有其他浏览器中都可以正常工作。我的问题是：

*   这是一个公平的假设，还是一个已知问题？Opera 是否违反相关规范？

*   除了将图像重新渲染为 100 的倍数之外，是否有修复或解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T06:15:49.640

几个月前我将这种行为作为“错误”报告给 Opera，我刚刚在最新版本的 Opera（17.0）中重新测试了它，它按预期工作，所以我假设我的问题的答案是如下：

*   是的，这是一个公平的假设。是的，它违反了某些规范。
*   是的，您可以更新到最新版本的 Opera，它的行为如您所愿。

作为参考，关于我刚刚测试过的 Opera 的详细信息，再次从顶部获取`opera://about`：

```
Opera 17.0

Made to discover

Version information

Version:    17.0.1241.45 - Checking for updates...
Update stream:  Stable
System: Windows 7 64-bit (WoW64)
Browser identification

Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/30.0.1599.69 Safari/537.36 OPR/17.0.1241.45 
```

# c - 让 C 头文件带有结构函数指针的传统方法是什么？

> ID：15171416
> 
> 赞同：1
> 
> 时间：2013-03-02T06:12:49.053
> 
> 标签：c, struct, function-pointers

在结构中使用函数指针的 C 头文件和源代码的常规方法是什么？

例如; 我已经在头文件中声明了我的结构，并在代码文件中声明了所有函数和源代码。在源文件中声明结构并将所有函数指针分配给正确的函数是否约定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T06:24:59.380

你做得对，结构通常放在头文件中。

通常头文件用于设计代码的框架。实际代码在另一个文件中实现。

通常，头文件将包含 ,

1) 函数原型

2) 类定义

3) 结构和联合定义

4) 宏

有关组织代码的更多信息，请参阅**[此内容。](http://www.gamedev.net/page/resources/_/technical/general-programming/organizing-code-files-in-c-and-c-r1798)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T06:51:02.677

是的，将声明（结构和函数）放在头文件中是处理大型程序的好方法。我认为您可能做得对，但我仍然想给您一个建议。

因为你没有给出你的具体代码，我只好用我的一个代码作为例子：

```
#ifndef _COMMAND_H
#define _COMMAND_H

struct Book
{
char isbn[14];
char name[60];
char author[20];
char publisher[20];
char date[9];
float price;
float discount;
};
typedef struct Book BOOK;

struct Node
{
struct Book book;
struct Node *prev;
struct Node *next;
};
typedef struct Node NODE;

int loadArray(BOOK *ary, int num, char * fileName);
int saveAs(BOOK *pBook, int size, char * fileName);
void showAll(BOOK *pBook, int size);
int errCmd();
int menu();

int search(BOOK *pBook, int size, char *isbn);
int sort(BOOK * pBook, int num);
int update(BOOK *pBook, int size, char * isbn);
int delete(BOOK *pBook, int* pSize, char * isbn);
int insert(BOOK *pBook, int *pSize);
int append(BOOK *pBook, int *pSize);

#endif 
```

这是一个 MIS（处理书籍信息）的头文件。

我想告诉你，`#ifndef #define #endif`在一个头文件中是必要的，它可以确保每个头文件只会结束一次。否则，可能会出现“重新定义”错误。

真心希望我的回答能帮到你。谢谢你。

# sql - 我想使用“单个游标”比较当前行和上一行并更新 sql 中的行

> ID：15171418
> 
> 赞同：0
> 
> 时间：2013-03-02T06:13:09.717
> 
> 标签：sql, cursor, cursor-position

我有下表

```
icode    iname   icatcode      slno
10           a      11            0
20           b      31            0
30           c      11            0
40           d      21            0
50           e      31            0
60           f      11            0
70           g      21            0
80           h      41            0 
```

我需要`slno`使用游标更新列。

输出应该是下表，即，当它相`icatcode`同时，它应该增加`slno`& wen的`icatcode`变化，它应该设置`slno`为 1

```
icode    iname   icatcode      slno
10           a             11            1
30           b             11            2
60           c             11            3
70           d             21            1
40           e             21            2
50           f             31            1
20           g             31            2
80           h             41            1 
```

我已经为它写了查询

```
declare @icode int,@iccode int, @islno int,@inccode int
set @islno=1
declare cur2 cursor for select icode,iccode from im
order by iccode
open cur2
fetch next from cur2 into @icode,@iccode
while @@FETCH_STATUS=0
begin
    update im  set slno=@islno where @icode=icode
    fetch next from cur2 into @icode,@inccode
    if @iccode<>@inccode
    begin
    set @islno=1
    end
    else
    begin
    set @islno=@islno+
    end
end
close cur2
deallocate cur2 
```

上述查询产生以下输出

```
icode    iname   icatcode      slno
10           a             11            1
20           b             31            1
30           c             11            2
40           d             21            1
50           e             31            1
60           f             11            3
70           g             21            1
80           h             41            1 
```

我需要进行哪些更改才能获得所需的输出？

**注意：**我们应该只在 sql 2008 中使用“CURSORS”来解决这个问题

# variables - 在 TCL 中使用之前定义变量

> ID：15171423
> 
> 赞同：0
> 
> 时间：2013-03-02T06:14:06.283
> 
> 标签：variables, tcl

我是 TCL 的新手，我正试图围绕它使用的 ""、{} 和 [] 的所有用法展开我的大脑。我习惯用其他语言做的事情是在使用之前定义我的变量，在应用程序的开头。以下代码有效：

```
puts "Please enter an integer of choice to be added: "
flush stdout
gets stdin intAnswer

puts "Please enter a second integer of choice to be added: "
flush stdout
gets stdin intAnswerTwo

puts "Please enter a third integer of choice to be added: "
flush stdout
gets stdin intAnswerThree

puts "The total of the three integers is: [expr $intAnswer + $intAnswerTwo + $intAnswerThree]" 
```

我想要做的是在使用之前定义变量。像这样：

```
set intAnswer 0
set intAnswerTwo 0
set intAnswerThree 0
set intTotal 0 
```

此代码放在开头，不适用于其余代码。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:07:32.240

该代码对我来说看起来绝对没问题，但`[expr {$intAnswer + $intAnswerTwo + $intAnswerThree}]`会更好（因为它阻止了对变量内容的潜在重新解释，这既是安全问题又是性能问题）。

但是，如果您真的想从用户那里获得整数，则需要*验证*他们的输入。这很容易通过编写一个程序来完成这项工作，以便您可以重用它（即，您*重构*代码以获得一个值，以便您可以使用更复杂的版本并*一次*正确地完成它）：

```
proc getIntFromUser {message} {
    # Loop forever (until we [exit] or [return $response])
    while true {
        puts $message
        flush stdout
        set response [gets stdin]
        # Important to check for EOF...
        if {[eof stdin]} {
            exit
        }
        # The validator (-strict is needed for ugly historical reasons)
        if {[string is integer -strict $response]} {
            return $response
        }
        # Not an integer, so moan about it
        puts "\"$response\" is not an integer!"
    }
} 
```

现在你有了这个过程，你的其余代码可以变成：

```
set intAnswer      [getIntFromUser "Please enter an integer of choice to be added: "]
set intAnswerTwo   [getIntFromUser "Please enter a second integer of choice to be added: "]
set intAnswerThree [getIntFromUser "Please enter a third integer of choice to be added: "]

puts "The total of the three integers is: [expr {$intAnswer + $intAnswerTwo + $intAnswerThree}]" 
```

编写好的 Tcl 代码（或几乎任何其他语言的好代码）的艺术是知道重构的优点是什么。一个好的起点是“如果你做两次或多次，做一次并分享”。如果你能给程序起一个好听的名字和清晰的界面，那是双倍的好，清楚地表明你做对了。事实上，你也可以去：

```
set total [expr {
    [getIntFromUser "Please enter an integer of choice to be added: "] +
    [getIntFromUser "Please enter a second integer of choice to be added: "] +
    [getIntFromUser "Please enter a third integer of choice to be added: "]
}]

puts "The total of the three integers is: $total" 
```

用户观察到的结果将是相同的。

# javascript - 如何在悬停时动态显示div的位置

> ID：15171425
> 
> 赞同：4
> 
> 时间：2013-03-02T06:14:19.267
> 
> 标签：javascript, wordpress, css

嗨，我正在 wordpress 中创建一个网站，我使用 javascript 在悬停元素列表时显示描述 div，但我的问题是根据屏幕大小，描述 div 必须改变其位置才能完全显示内容。我是不确定我是否清楚地表达了我的疑问，任何人都可以建议我如何得到这个。

![问题参考](../Images/96fa1053082dfbf793373f432fa88a7d.png)

jQuery：

```
(function($) {
  $(document).ready( function() {

    $('#linkcat-4 .xoxo li:nth-child(1)').mouseover(function(e) {
      $('#text1').css(
                       'visibility' , 'visible'
                      );
      $('#linkcat-4 .xoxo li:nth-child(1)').mouseout(function(e) {
        $('#text1').css(
                        'visibility' , 'hidden'
                       );
      });

    });
  });
})(jQuery); 
```

HTML：

```
<ul class="xoxo blogroll">
<li><a href="">Admirality</a></li>
<li><a href="">Banking</a></li>
<li><a href="">Commercial</a></li>
<li><a href="">Contract</a></li>
<li><a href="">test</a></li>
<li><a href="">Corporate</a></li>
</ul>

<div  class="desc-text" id="text1" style="visibility: hidden;">
  <p>We represent protection and indemnity clubs that provide insurance 
     for many of the ships coming to Guyana. We deal with all the familiar 
     problems encountered by ships, both contentious and non-contentious, 
     including arrests arising from accidents and claims for wages and damaged 
     cargo. We advise masters, obtain surveys, note protests, negotiate 
     settlements and advise on or deal with stowaways and medical emergencies. 
     Our admiralty practice is the largest in Guyana.
  </p>
</div> 
```

CSS：

```
.desc-text {
  position: absolute;
  top: 12%;
  left: 50%;
}

#text1 {
  visibility:hidden;
  background:#f1f1f1;
  padding: 15px;
  width: 150px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:09:35.897

在设置弹出 div的and之前，您需要检查`window.innerHeight`and`window.innerWidth`属性。[这是一个让你开始的小提琴](http://jsfiddle.net/amullins/eyy4H/4/)。`top``left`

重要的部分在`.hover()`调用内部：

```
$( function() {
    pop = $("#popup");
    $(".item").hover( function() {
          row = $(this);
           pop.html(row.data("extra"))
            .css("top", (function(r) {
               if(r.offset().top > window.innerHeight - pop.height())
                   return window.innerHeight - pop.height();
               else
                  return r.offset().top;
              })(row))
            .css("left", (function(r) {
               if(r.offset().left + r.width() > window.innerWidth - pop.width())
                   return window.innerWidth - pop.width();
               else
                   return r.offset().left + r.width();
               })(row))
            .show();

    }, function() {
       pop.hide();
    });
}); 
```

基本上，`.hover()`需要两个函数，一个用于鼠标悬停，一个用于鼠标悬停。在鼠标移出时，我只是隐藏弹出窗口。在鼠标悬停时，我用内容填充弹出 div（这里来自项目的`data-extra`属性，但它可能来自任何地方）然后根据项目的位置和窗口边界决定将其放置在哪里。

希望有帮助。如果您需要更多，请发表评论。

## 更新

因此，简短的回答是让您的内容适合普通的浏览器窗口。我必须最大化我的浏览器才能看到该弹出窗口中的所有内容。这似乎也是重要的信息。所以也许它值得拥有自己的页面？这些是意见，而不是事实，所以我将继续[阅读最新版本的小提琴](http://jsfiddle.net/amullins/xbt2U/9/)，[您可以在此处更轻松地查看](http://jsfiddle.net/amullins/xbt2U/9/show/)它。

在 CSS、HTML 和 Javascript 中到处都需要进行更改，以使这项工作正常进行。可能最大的问题是`visibility:hidden`。可能有一种方法可以让 jQuery 使用它，但我只使用默认值`display:none`，即 what`.show()`和`.hide()`toggle。

## 新的 CSS

```
#text1
{
  display:none;
  background:#f1f1f1;
  padding: 15px;
  width: 150px;
} 
```

我需要`ul`用 id 的 div包裹你`linkcat-4`。现在为新的js。最有趣的变化是我意识到我们需要考虑 div 的填充。由于 padding 参数适用于所有边，我们实际上需要将 padding 加倍并将其添加到我们与窗口边界的偏移量：

## 新的 JavaScript

```
(function($) {
   $(document).ready( function() {
     var pop = $("#text1");
     $('#linkcat-4 .xoxo li:nth-child(1)').hover(function(e) {
          var row = $(this);
          pop.html(row.data("extra"))
          .css("top", (function(r) {
            if(r.offset().top > window.innerHeight - pop.height())
               return window.innerHeight - pop.height() - parseInt(pop.css("padding"))*2;
            else
               return r.offset().top;
          })(row))
          .css("left", (function(r) {
            if(r.offset().left + r.width() > window.innerWidth - pop.width())
               return window.innerWidth - pop.width() - parseInt(pop.css("padding"))*2;
            else
               return r.offset().left + r.width();
          })(row))
          .show();                          
       },

       function(e) {
          pop.hide();
       });
   });
})(jQuery); 
```

让我知道这是否有效。

# javascript - Phonegap/Cordova InAppBrowser 未启动

> ID：15171426
> 
> 赞同：2
> 
> 时间：2013-03-02T06:14:28.537
> 
> 标签：javascript, cordova, browser, in-app

我不知道为什么，但是当我执行以下操作时

```
<img id="buttons" src="https://qikout.com/apppics/MerchantPromo.png" style="margin:1% auto; width:99% !important;" onclick="openextlink('https://qikout.com');"/>

function openextlink(url)
{
var ref = window.open(url, '_blank', 'location=no');
//window.plugins.childBrowser.showWebPage(url, { showLocationBar: true });
} 
```

它工作正常。但是，当我想从另一个函数中运行 openextlink 时，它不会打开窗口，而是加载页面，但不会向用户显示。

例如

```
function scan(){

    window.plugins.barcodeScanner.scan( function(result) {
            if(result.format != "QR_CODE")
            {
            alert("That is not a valid google Tag");
            }
            else
            {
                n = result.text.split(".com/");
                loadpet();

                    //alert("We got a barcode\n" +
                    //     "Result: " + result.text + "\n" +
                    //     "Format: " + result.format + "\n" +
                    //     "Cancelled: " + result.cancelled);

            }
        }, function(error) {
            alert("Scanning failed: " + error);
        }
    );

}

function loadpet(){
    $("#buttons").trigger("click");
    var link = "http://www.google.com/" + n[1];
    openextlink(link);
} 
```

它通过

```
<div onclick="scan();" class="menu-right"></div> 
```

基本上它扫描得很好，它得到结果，它将结果移动到 loadpet 函数，甚至将它发送到 openextlink 函数，但不会弹出查看器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T15:41:24.017

您的 window.open 代码看起来正确（基于 InAppBrowser 从 Cordova 3.0 开始的工作方式）。

您能确认以下所有内容吗？

*   InAppBrowser 插件在您的 /#myapp#/platforms/#platform#/www/cordova_plugins.js 文件中有一个条目？
*   InAppBrowser 插件文件夹位于 /#myapp#/platforms/#platform#/plugins/
*   InAppBrowser 的相关 SRC 文件也在平台文件夹中（例如 IOS 插件 src 文件为：/#myapp#/platforms/#platform#/#appname#/Plugins/）

此外，如果上述所有内容都得到确认但仍然没有运气，您可以尝试在您的 inappbrowser.js 文件末尾附加一个 console.log('inappbrowser.js 文件已加载！') 行以确认它确实正在加载（假设你有设置调试控制台并可以查看输出）。

# c# - 在 C# 中是否有将城市名称转换为其时区名称（东京-> 东京标准时间）？

> ID：15171430
> 
> 赞同：3
> 
> 时间：2013-03-02T06:15:19.130
> 
> 标签：c#, datetime, timezone

我有一个城市列表（纽约、伦敦等），我需要进行一些时区转换，但我看到大多数 API 要求您知道时区名称（例如东部标准时间、东京标准时间、 ETC）。

无论如何将城市名称转换为其适当的时区名称？（通过纽约并返回“东部标准时间”）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:28:06.873

不知道 C# 中内置的任何类似内容，但您可以为此使用 Google Maps API：

1）获取城市的经纬度：[http ://maps.googleapis.com/maps/api/geocode/json?address=New%20York,%20CA&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=New%20York,%20CA&sensor=false)

2）现在使用那些long/lat来获取时区：[https ://maps.googleapis.com/maps/api/timezone/json?location=43.2994285,-74.21793260000001×tamp=1362209227&sensor=false](https://maps.googleapis.com/maps/api/timezone/json?location=43.2994285,-74.21793260000001&timestamp=1362209227&sensor=false)

示例代码：

```
 public TimeZoneResponse ConvertCityToTimeZoneName(string location)
   {
       TimeZoneResponse response = new TimeZoneResponse();
       var plusName = location.Replace(" ", "+");
       var address = "http://maps.google.com/maps/api/geocode/json?address=" + plusName + "&sensor=false";
       var result = new System.Net.WebClient().DownloadString(address);
       var latLongResult = JsonConvert.DeserializeObject<GoogleGeoCodeResponse>(result);

       if (latLongResult.status == "OK")
       {
           var timeZoneRespontimeZoneRequest = "https://maps.googleapis.com/maps/api/timezone/json?location=" + latLongResult.results[0].geometry.location.lat + "," + latLongResult.results[0].geometry.location.lng + "&timestamp=1362209227&sensor=false";
           var timeZoneResponseString = new System.Net.WebClient().DownloadString(timeZoneRespontimeZoneRequest);
           var timeZoneResult = JsonConvert.DeserializeObject<TimeZoneResult>(timeZoneResponseString);

           if (timeZoneResult.status == "OK")
           {

               response.TimeZoneName = timeZoneResult.timeZoneName;
               response.Success = true;
               return response;
           }
       }
       return response;
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T06:22:10.930

您可以使用根据知识共享署名 3.0 许可提供的自由时区数据库。您可以在此处找到有关它的信息：

[http://timezonedb.com/](http://timezonedb.com/)

您可以按原样使用 SQL，也可以将 sql 数据库拉入应用程序中的某些类中...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T06:22:18.320

[EarthTools.org](http://www.earthtools.org/webservices.htm#timezone)有一个免费的网络服务，您可以通过 lat/long 查询，例如：

```
http://www.earthtools.org/timezone/<latitude>/<longitude> 
```

以纽约为例：

```
http://www.earthtools.org/timezone-1.1/40.71417/-74.00639 
```

但是不，我不知道有任何烘焙类可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:36:11.527

您可以在 .net 框架中获得的最接近的东西是 TimeZonInfo.GetSystemTimeZones()。

请注意，在您的案例中没有一对一的映射，例如，悉尼，澳大利亚一个，加拿大另一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-08T17:01:45.163

使用 C#`TimeZoneInfo`你可以做到这一点

```
TimeZoneInfo.GetSystemTimeZones()
            .Where(k=>k.DisplayName.Substring(k.DisplayName.IndexOf(')')+2).ToLower().IndexOf("tokyo") >= 0)
            .ToList() 
```

解释：

我使用显示名称来确定每个时区的城市，例如以下格式`"(UTC+02:00) Beirut"`。然后取索引**`")"`+ 2**并取下一个不带前导空格的字符串，然后进行查询。

将按城市返回匹配的时区。

# installshield-2012 - 标记为密钥文件的文件在使用 installshield 时未卸载

> ID：15171436
> 
> 赞同：4
> 
> 时间：2013-03-02T06:15:50.473
> 
> 标签：installshield-2012

我正在使用 installshield2012 专业版创建 msie。我正在将我的项目主要输出之一添加到 msie，其中的组件被标记为密钥文件。如果我不将其标记为密钥文件，我的项目中的自定义安装程序文件不会被调用这对我来说很麻烦，但是将其标记为密钥文件会在卸载应用程序后保留卸载文件。有什么方法可以删除密钥文件？？（永久和共享属性设置为NO）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:22:58.200

InstallShield MSI 软件包与 Windows 一起使用，以确定在安装过程中应该删除哪些文件以及应该留下哪些文件。如果该文件是其他应用程序使用的共享 DLL，它将在安装过程中被留下。如果该文件仍在使用中（可能是服务或系统托盘应用程序），它将一直安装到下次重新启动。您可以随时检查 Windows Installer 日志文件以确定文件遗留的原因，但您可以尝试以下一些简单的方法：

首先，确定文件是哪个组件的关键路径，然后切换到 InstallShield 2012 中的“组件”视图并突出显示该组件。查看该组件的属性。

1) 确保 Permanant = No.
2) 如果您确信此文件未与其他应用程序共享，您可以设置 Shared = No.
3) 在卸载测试后重新启动，以查看文件是否在重新启动期间被删除。

# vb.net - Vb.net 连接到 MySql

> ID：15171444
> 
> 赞同：0
> 
> 时间：2013-03-02T06:17:48.173
> 
> 标签：vb.net, visual-studio-2010, connection, vb.net-2010, sqlconnection

我正在使用 vb.net windows 窗体应用程序，其中我使用了如下连接字符串：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con1 = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=G:\alu\aludb.mdf;Integrated Security=True;User Instance=True")
End Sub 
```

我正在使用 Visual Studio 2010 并在其上创建了数据库。它工作正常，但请注意我使用了 G：

如果我将项目复制到另一台计算机（可能没有 G:) D: 或 E:，我需要更改连接。

有没有办法从我的项目实际所在的位置自动采取路径？

如果是这样，请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:19:51.550

使用[Application.StartupPath](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath.aspx)属性，它将显示您的应用程序路径

```
con1 = New SqlConnection("Data Source=.\SQLEXPRESS;AttachDbFilename=" &  
Application.StartupPath & "\alu\aludb.mdf;Integrated Security=True;User 
Instance=True") 
```

# facebook-opengraph - 应用程序不会发布到用户的时间线

> ID：15171448
> 
> 赞同：0
> 
> 时间：2013-03-02T06:18:31.130
> 
> 标签：facebook-opengraph

我使用 Facebook Graph API 和 Open Graph 开发了一个应用程序。当用户在我的网站上执行操作时，我希望我的应用程序显示自定义数据。我阅读了开放图并添加了开放图标签等。我使用了以下代码

```
$post_url = "https://graph.facebook.com/me/myappnamespace:mycustomaction?method=post".
    "&mycustomobject=mywebpage".
    "&access_token=".$_SESSION['access_token']; 
```

现在，每当用户使用这个应用程序时，它都会出现在他的活动中。但是，它没有在他的时间线上分享。我需要什么权限要求用户才能发布到他自己的时间线？目前，我要求 publish_actions 和 publish_stream

我错过了什么？我按照教程中的确切步骤进行操作，但无法使用 opengraph 发布到时间线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:53:52.270

您无需添加任何权限，除了`publish_actions`和`publish_stream`。但是您应该添加一个新标签，例如`fb:explicitly_shared`. 将此设置为`BOOL`值。如果设置为 true，它将显示在用户的时间轴中，否则不会。

# java - 5亿（双）值的Java数据结构？

> ID：15171450
> 
> 赞同：2
> 
> 时间：2013-03-02T06:18:57.680
> 
> 标签：java, data-structures, graph, heap-dump

我正在为具有 32678 个顶点的完整图生成随机边。所以，5亿+的价值。

我正在使用 HashMap 将边缘用作键，将随机边缘权重用作值。我不断遇到：

> 线程“main”中的异常 java.lang.OutOfMemoryError：java.lang.StringBuilder.toString(StringBuilder.java:430) at pa1.Graph.(Graph.java:60) at pa1.Main.main(Main) 处的 Java 堆空间.java:19)

然后，该图将用于构建最小生成树。

关于更好的数据结构或方法的任何想法？

我知道有分配更多内存的覆盖，但我更喜欢按原样工作的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T08:47:06.527

A`HashMap`将非常大，因为它将包含`Doubles`（大写字母 D）显着大于 8 个字节。（更不用说`Entry`）取决于实现和CPU芯片，但我认为每个至少16个字节，可能更多？

我认为您应该考虑将主要数据保存在一个巨大的`double[]`（或者，如果您可以保留一些准确性，a `float[]`）。这将内存使用量减少了 2 倍或 4 倍。（500M 浮点数是“仅仅”2GB）然后在这个数组中使用整数索引来实现你的边和顶点。例如，一条边可以是一个 int[2]。这与 OO 相去甚远，这里有一些严肃的挥手。（而且我不明白你正在尝试做的所有细微差别）

风格非常“老式”，但需要的内存要少得多。

更正-我认为边缘可能是int [4]，顶点可能是int [2]。但你明白了。实际上，对于边和顶点，您将拥有较少数量的对象，并且您可能可以使用“真实”对象、地图等...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T06:31:41.170

由于它是一个完整的图，因此毫无疑问边是什么。如何将这些边的标签存储在一个以某种方式排序的简单列表中？因此，例如，如果您有 5 个节点，则边缘的权重将按如下顺序排列`{1,2}, {1,3} {1,4} {1,5} {2,3} {2,4} {2,5} {3,4} {3,5} {4,5}`：

但是，正如@BillyO'Neal 所指出的，这可能仍会占用 8 GB 的空间。您可能希望将此列表拆分为多个文件，并同时维护这些文件的索引，指示一组权重在一个文件中的结束位置以及下一组权重的开始位置。

此外，鉴于您正在查找图表的 MST，您可能还想查看以下论文：[http](http://cvit.iiit.ac.in/papers/Vibhav09Fast.pdf) ://cvit.iiit.ac.in/papers/Vibhav09Fast.pdf 。该论文似乎基于 Boruvka 算法 ( [http://en.wikipedia.org/wiki/Bor%C5%AFvka](http://en.wikipedia.org/wiki/Bor%C5%AFvka) 's_algorithm; [http://iss.ices.utexas.edu/?p=projects/galois/benchmarks /mst](http://iss.ices.utexas.edu/?p=projects/galois/benchmarks/mst) )。

# c - 如何通过省略逗号来读取带逗号的字符串 %[^,] 不适合我

> ID：15171451
> 
> 赞同：0
> 
> 时间：2013-03-02T06:19:01.027
> 
> 标签：c, arrays, string, scanf, calloc

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#ifdef _MSC_VER
#include <crtdbg.h>  // needed to check for memory leaks (Windows only!)
#endif

#define FLUSH while(getchar() != '\n')

// Prototype Declarations
int readFile(FILE* ifp,char** words);

int main (void)
{
//  Local Definitions
FILE *ifp;
FILE *ofp;
char fnamer[100]="";
char **words;
int *freq;
int i;
int numWords =0;

//  Statements

    words = (char**)calloc (1001, sizeof(int));
        if( words == NULL )
        {
            printf("Error with Calloc\n");
            exit(111);
        }

  if (!(ifp=fopen("/Users/r3spectak/Desktop/song_row.txt", "r")))
  {
      printf("sucks");
      exit(100);
  }

    numWords = readFile(ifp,words);

    printf("%d", numWords);

    for(i=0;i<numWords;i++)
    printf("\n%s",words[i]);

    #ifdef _MSC_VER
    printf( _CrtDumpMemoryLeaks() ? "Memory Leak\n" : "No Memory Leak\n");
    #endif
    printf("\n\t\tEnd of Program\n");
    printf("\n\t\tHave a great day!\n");
   return 0;

}

/*===============readFile=================
Pre:
Post:
This function
*/

int readFile(FILE* ifp,char** words)
{

// Local Variables
char buffer[1000] = " ";
int numWords = 0;

// Statements
while (fscanf(ifp," %s",buffer)!=EOF)
    {
    words[numWords] = (char*)calloc(strlen(buffer)+1,sizeof(char));
                if( words[numWords] == NULL)
                {
                    printf("\n");
                    exit(111);
                }
                strcpy(words[numWords],buffer);
                numWords++ ;
    }

return numWords;

} 
```

输入文件包含以下内容：划船，划船，划船，顺流而下。快活快快快快快活， 人生不过是一场梦。

在 fscanf 我的数组打印之后

```
 Row,
    row,
    row
    your
    boat, and so on 
```

我想要的是，

```
Row
row
row
your
boat 
```

我试过 %[^,.\n] 但它不适合我。它打印垃圾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:17:00.790

您可能会发现[此](http://www.cplusplus.com/reference/cstring/strtok/)功能特别有用。它会将您的字符串拆分为标记，例如 C 中的`split()`or `explode()`。

例子：

```
#include <stdio.h>
#include <string.h>

int main (){
  char str[] ="Row, row, row your boat, Gently down the stream.";
  char * pch;
  printf ("Splitting string \"%s\" into tokens:\n",str);
  pch = strtok (str," ,.");
  while (pch != NULL){
     printf ("%s\n",pch);
     pch = strtok (NULL, " ,.");
  }
  return 0;
} 
```

我基本上复制了手册页示例。使用第一个参数作为 NULL 再次调用该函数将调出下一个字符串标记。

# java - 发送复杂的 JSON 对象

> ID：15171454
> 
> 赞同：1
> 
> 时间：2013-03-02T06:19:18.587
> 
> 标签：java, android, json, web-services, gson

我想与 Web 服务器通信并交换 JSON 信息。

我的网络服务 URL 看起来像以下格式：`http://46.157.263.140/EngineTestingWCF/DPMobileBookingService.svc/SearchOnlyCus`

这是我的 JSON 请求格式。

```
{
    "f": {
        "Adults": 1,
        "CabinClass": 0,
        "ChildAge": [
            7
        ],
        "Children": 1,
        "CustomerId": 0,
        "CustomerType": 0,
        "CustomerUserId": 81,
        "DepartureDate": "/Date(1358965800000+0530)/",
        "DepartureDateGap": 0,
        "Infants": 1,
        "IsPackageUpsell": false,
        "JourneyType": 2,
        "PreferredCurrency": "INR",
        "ReturnDate": "/Date(1359138600000+0530)/",
        "ReturnDateGap": 0,
        "SearchOption": 1
    },
    "fsc": "0"
} 
```

我尝试使用以下代码发送请求：

```
public class Fdetails {
    private String Adults = "1";
    private String CabinClass = "0";
    private String[] ChildAge = { "7" };
    private String Children = "1";
    private String CustomerId = "0";
    private String CustomerType = "0";
    private String CustomerUserId = "0";
    private Date DepartureDate = new Date();
    private String DepartureDateGap = "0";
    private String Infants = "1";
    private String IsPackageUpsell = "false";
    private String JourneyType = "1";
    private String PreferredCurrency = "MYR";
    private String ReturnDate = "";
    private String ReturnDateGap = "0";
    private String SearchOption = "1";
}

public class Fpack {
    private Fdetails f = new Fdetails();
    private String fsc = "0";
} 
```

然后使用 Gson 创建**JSON 对象**，如：

```
public static String getJSONString(String url) {
String jsonResponse = null;
String jsonReq = null;
Fpack fReq = new Fpack();

try {                                                
    Gson gson = new Gson();
    jsonReq = gson.toJson(fReq);                        
    JSONObject json = new JSONObject(jsonReq);
    JSONObject jsonObjRecv = HttpClient.SendHttpPost(url, json);
    jsonResponse = jsonObjRecv.toString();
} 
catch (JSONException e) {
                           e.printStackTrace();
                }               
return jsonResponse;
    } 
```

我的`HttpClient.SendHttpPost`方法是

```
public static JSONObject SendHttpPost(String URL, JSONObject json) {

        try {
            DefaultHttpClient httpclient = new DefaultHttpClient();
            HttpPost httpPostRequest = new HttpPost(URL);

            StringEntity se;
            se = new StringEntity(json.toString());
            httpPostRequest.setEntity(se);
            se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));          
            HttpResponse response = (HttpResponse) httpclient.execute(httpPostRequest);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                // Read the content stream
                InputStream instream = entity.getContent();
                Header contentEncoding = response.getFirstHeader("Content-Encoding");
                if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                    instream = new GZIPInputStream(instream);
                }

                // convert content stream to a String
                String resultString= convertStreamToString(instream);
                instream.close();
                resultString = resultString.substring(1,resultString.length()-1); // remove wrapping "[" and "]"

                // Transform the String into a JSONObject
                JSONObject jsonObjRecv = new JSONObject(resultString);
            return jsonObjRecv;
            } 
    catch (Exception e)
        {
            e.printStackTrace();
        }
        return null;
    } 
```

现在我得到以下异常：

```
org.json.JSONException: Value !DOCTYPE of type java.lang.String cannot be converted to JSONObject
at org.json.JSON.typeMismatch(JSON.java:111)
at org.json.JSONObject.<init>(JSONObject.java:158)
at org.json.JSONObject.<init>(JSONObject.java:171) 
```

在我发出请求之前，JSON字符串的打印输出如下：

```
{
    "f": {
        "PreferredCurrency": "MYR",
        "ReturnDate": "",            
        "ChildAge": [
            7
        ],
        "DepartureDate": "Mar 2, 2013 1:17:06 PM",
        "CustomerUserId": 0,
        "CustomerType": 0,
        "CustomerId": 0,
        "Children": 1,
        "DepartureDateGap": 0,
        "Infants": 1,
        "IsPackageUpsell": false,
        "JourneyType": 1,
        "CabinClass": 0,
        "Adults": 1,
        "ReturnDateGap": 0,
        "SearchOption": 1

    },
    "fsc": "0"
} 
```

我该如何解决这个异常？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:30:16.413

我对 Json 不是很熟悉，但我知道它现在很常用，而且你的代码似乎没有问题。

**如何将此 JSON 字符串转换为 JSON 对象？**

好吧，你差不多到了，只需将 JSON 字符串发送到你的服务器，然后在你的服务器中再次使用 Gson：

```
Gson gson = new Gson();
Fpack f = gson.fromJSON(json, Fpack.class); 
```

[http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)

**关于例外：**

您应该删除此行，因为您正在发送请求，而不是响应：

```
httpPostRequest.setHeader("Accept", "application/json"); 
```

我会改变这一行：

```
httpPostRequest.setHeader("Content-type", "application/json"); 
```

到

```
se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json")); 
```

如果这没有任何区别，请在发送请求之前打印出您的 JSON 字符串，让我们看看里面有什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T06:38:36.277

要创建附加了 JSON 对象的请求，您应该执行以下操作：

```
public static String sendComment (String commentString, int taskId, String    sessionId, int displayType, String url) throws Exception
{
    Map<String, Object> jsonValues = new HashMap<String, Object>();
    jsonValues.put("sessionID", sessionId);
    jsonValues.put("NewTaskComment", commentString);
    jsonValues.put("TaskID" , taskId);
    jsonValues.put("DisplayType" , displayType);
    JSONObject json = new JSONObject(jsonValues);

    DefaultHttpClient client = new DefaultHttpClient();

    HttpPost post = new HttpPost(url + SEND_COMMENT_ACTION);

    AbstractHttpEntity entity = new ByteArrayEntity(json.toString().getBytes("UTF8"));
    entity.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    post.setEntity(entity);
    HttpResponse response = client.execute(post);

    return getContent(response);    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:51:33.977

据我了解，您想使用您创建的 JSON 向服务器发出请求，您可以执行以下操作：

```
URL url;
    HttpURLConnection connection = null;
    String urlParameters ="json="+ jsonSend;  
    try {
      url = new URL(targetURL);
      connection = (HttpURLConnection)url.openConnection();
      connection.setRequestMethod("POST");
      connection.setRequestProperty("Content-Type", 
           "application/x-www-form-urlencoded");
      connection.setRequestProperty("Content-Language", "en-US");  
      DataOutputStream wr = new DataOutputStream (
                  connection.getOutputStream ());
      wr.writeBytes (urlParameters);
      wr.flush ();
      wr.close ();

      InputStream is = connection.getInputStream();
      BufferedReader rd = new BufferedReader(new InputStreamReader(is));
      String line;
      StringBuffer response = new StringBuffer(); 
      while((line = rd.readLine()) != null) {
        response.append(line);
        response.append('\r');
      }
      rd.close();
      return response.toString();

    } catch (Exception e) {

      e.printStackTrace();
      return null;

    } finally {

      if(connection != null) {
        connection.disconnect(); 
      }
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T04:56:01.017

实际上这是一个错误的请求。这就是服务器以 XML 格式返回响应的原因。问题是将非原始数据（DATE）转换为 JSON 对象..所以这将是错误请求..我解决了自己以了解 GSON 适配器..这是我使用的代码：

```
try {                                                       
                        JsonSerializer<Date> ser = new JsonSerializer<Date>() {

                            @Override
                            public JsonElement serialize(Date src, Type typeOfSrc,
                                    JsonSerializationContext comtext) {

                                return src == null ? null : new JsonPrimitive("/Date("+src.getTime()+"+05300)/");
                            }
                        };
                        JsonDeserializer<Date> deser = new JsonDeserializer<Date>() {                           
                            @Override
                            public Date deserialize(JsonElement json, Type typeOfT,
                                    JsonDeserializationContext jsonContext) throws JsonParseException {

                                String tmpDate = json.getAsString();

                                  Pattern pattern = Pattern.compile("\\d+");
                                  Matcher matcher = pattern.matcher(tmpDate);
                                  boolean found = false;

                                  while (matcher.find() && !found) {
                                       found = true;
                                        tmpDate = matcher.group();
                                  }
                                return json == null ? null : new Date(Long.parseLong(tmpDate));                             
                            }
                        }; 
```

# python - 从字符串到二进制列表

> ID：15171457
> 
> 赞同：0
> 
> 时间：2013-03-02T06:19:25.450
> 
> 标签：python

这是我[上一个问题](https://stackoverflow.com/questions/15169663/format-string-by-binary-list)的扩展，但顺序相反：也就是说，使用 string `-t-c-over----`，是否有一种方法可以生成所有有效字母都具有`1`且连字符具有的二进制列表`0`：

```
[0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0]
 -  t  -  c  -  o  v  e  r  -  -  -  - 
```

我为来回感到抱歉，但它必须像这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:22:48.860

```
>>> s = '-t-c-over----'
>>> lst = [0 if i == '-' else 1 for i in s]
>>> print lst
[0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0] 
```

列表 comp 检查一个字母是否是`'-'`- 如果是，它将 a`0`放入列表中，否则将 a 放入列表`1`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:28:47.617

你可以用这个

```
string = "-t-c-over----"
[0 if i == "-" else 1 for i in string]

Output: [0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T06:31:27.107

另一种选择是使用 lambda 函数和 map 函数。

```
s = '-t-c-over----'
output = map(lambda x: 0 if x == '-' else 1, s) 
```

编辑：显然这在 Python 3.2 中不起作用，所以实际的解决方案是这样的。

```
s = '-t-c-over----'
output = [0 if x == '-' else 1 for x in s] 
```

# ruby-on-rails - 用于非资源操作的 ruby on rails 路由

> ID：15171458
> 
> 赞同：0
> 
> 时间：2013-03-02T06:19:31.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 ruby​​ on rails 的新手。我已经有了这些路线

```
 namespace :swimming do resources :classschedules    end 
```

现在我向这个控制器添加了一个新动作

```
class Swimming::ClassschedulesController < ApplicationController

  def date 
    @date = params[0]
  end
end 
```

如何为此新操作添加路线？

我想打电话给 Swing/classschedules/date/2013-03-07 。这将是单个元素，2013-03-07 是我想在此操作中使用的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:40:38.397

当您想要`/swimming/classcehdules/date/2012-12-03`匹配的网址时，请尝试：

```
namespace :swimming do
  resources :classschedules do
    get 'date/:date', :action => 'date', :as => :date, :on => :collection,
                      :constraints => { :date => /\d{4}-\d{2}-\d{2}/ }
  end 
end 
```

额外`:constraint`的是确保`:date`参数是预期的形式。在您的操作中，您可以将日期获取为：

```
def date
   @date = params[:date] # => "2012-12-03"
end 
```

查看[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)以获取有关路由的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:46:12.050

```
namespace :swimming do 
  resources :classschedules do
    get 'date', :on => :member # or collection
  end
end 
```

[指南](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)中的更多信息

# javascript - 点击页面外触发事件

> ID：15171462
> 
> 赞同：0
> 
> 时间：2013-03-02T06:20:40.143
> 
> 标签：javascript, events

如果用户单击页面外，是否可能触发事件？更具体地说，在浏览器标题栏或标签栏中？

试试这个我的[**jsFiddle 示例**](http://jsfiddle.net/LnFGK/)。

**HTML**

```
<div id="box">
    <div id="menu">Click here</div>
    <div id="show">Hello!</div>
</div> 
```

**JS**

```
jQuery('div#menu').on('click', function(ev) {
    jQuery('div#show').addClass('visible').css({
        top: ev.clientY,
        left: ev.clientX
    });

    return false;
});

jQuery(document).click(function() {
    jQuery('div#show').removeClass('visible');
});

jQuery(window).blur(function() {
    jQuery(document).click();
}); 
```

**测试**

首先，您单击“单击此处”按钮。所以...

1.  尝试单击某些文档部分：确定
2.  尝试单击某些页面部分或取消焦点浏览器窗口：好的
3.  尝试在浏览器中单击其他打开的选项卡：好的
4.  尝试点击浏览器标题栏或标签标题：失败

**所以...**

我有可能解决这个问题吗？

**测试结果**

*   **Chrome**：最后失败；
*   **Firefox**：最后失败；
*   **IE10**：最后失败；
*   **Opera**：最后失败；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:32:52.577

很抱歉告诉你这个，但这是不可能的。

Reason? Well essentially, clicking the title bar/tab bar of a window doesn't actually make an element lose focus.

Try this example here:

[http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onblur](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onblur)

You'll notice that clicking the title bar/tab bar doesn't make the textbox lose focus at all, which is the root of the issue.

I don't think this is a big deal for your project though. As far as the user's concerned, it'll look great as it currently is.

# android - 将数据插入数据库时 sqlite数据库中的NullPointerException

> ID：15171469
> 
> 赞同：0
> 
> 时间：2013-03-02T06:21:24.723
> 
> 标签：android, sqlite

我`NullPointerException`在将数据插入数据库时​​进入 sqlite 数据库请帮我解决这个问题。它在插入方法中显示错误。

数据库助手.java

```
 package com.example.mydbdemo;

    import com.example.mydbdemo.R.string;

    import android.content.ContentValues;
    import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;

    public class DatabaseHelper extends SQLiteOpenHelper {

        private static final String DB_NAME="reena.db";
        private static final String TBL_NAME="MY_TBL";

        private static final String User_Name="name";
        private static final String Mobile_No="mobile";

        public DatabaseHelper(Context context, String name, CursorFactory factory,
                int version) {
            super(context, name, factory, version);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

            //CREATE TABLE 
        db.execSQL("CREATE TABLE"+TBL_NAME+"("+User_Name+" TEXT, "+Mobile_No+" TEXT)");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }

        void insert_user(String name1, String num)
        {
            SQLiteDatabase mydb=this.getWritableDatabase();
            ContentValues cv=new ContentValues();

            cv.put(User_Name, name1);
            cv.put(Mobile_No, num);
            mydb.insert(TBL_NAME, null, cv);
        }
    } 
```

MyDBDemo.java

```
 package com.example.mydbdemo;

    import android.os.Bundle;
    import android.app.Activity;
    import android.database.sqlite.SQLiteDatabase;
    import android.view.Menu;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;

    public class MyDBDemo extends Activity {

        EditText txt_NAME;
        EditText txt_PH;
        Button btn_Ok;
        DatabaseHelper dbHelper;
        SQLiteDatabase db;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_my_dbdemo);

            txt_NAME=(EditText)findViewById(R.id.txt_Name);
            txt_PH=(EditText)findViewById(R.id.txt_Moblie);
            btn_Ok=(Button)findViewById(R.id.button1);
            btn_Ok.setOnClickListener(new View.OnClickListener() {

                @Override
         public void onClick(View v) {
                    // TODO Auto-generated method stub
                    insert();
                }
            });
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_my_dbdemo, menu);
            return true;
        }

        public void insert()
        {
            String name=txt_NAME.getText().toString();
            String mobile=txt_PH.getText().toString();
            dbHelper.insert_user(name, mobile);
            Toast.makeText(getApplicationContext(), "Data Saved Successfully!!",   Toast.LENGTH_LONG).show();

        }
    } 
```

日志猫

```
03-02 11:38:04.118: E/AndroidRuntime(371): FATAL EXCEPTION: main
03-02 11:38:04.118: E/AndroidRuntime(371): java.lang.NullPointerException
03-02 11:38:04.118: E/AndroidRuntime(371):  at com.example.mydbdemo.MyDBDemo.insert(MyDBDemo.java:51)
03-02 11:38:04.118: E/AndroidRuntime(371):  at com.example.mydbdemo.MyDBDemo$1.onClick(MyDBDemo.java:33)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.view.View.performClick(View.java:2408)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.view.View$PerformClick.run(View.java:8816)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.os.Handler.handleCallback(Handler.java:587)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.os.Looper.loop(Looper.java:123)
03-02 11:38:04.118: E/AndroidRuntime(371):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-02 11:38:04.118: E/AndroidRuntime(371):  at java.lang.reflect.Method.invokeNative(Native Method)
03-02 11:38:04.118: E/AndroidRuntime(371):  at java.lang.reflect.Method.invoke(Method.java:521)
03-02 11:38:04.118: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-02 11:38:04.118: E/AndroidRuntime(371):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-02 11:38:04.118: E/AndroidRuntime(371):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:25:35.953

因为，你 `DatabaseHelper dbHelper;`是**NULL**。

内`insert()`法。

所以代码行，`dbHelper.insert_user(name, mobile);`给你**NullPointerException**。

**解决方案：**

`DatabaseHelper dbHelper;`在访问它之前进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:26:56.153

你应该初始化你的`DatabaseHleper`，目前它的**Null**

这条线抛出`NullPointerException`

```
 dbHelper.insert_user(name, mobile); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:31:50.127

您需要初始化您的 Dbhelpers .. 写入 insert() dB=dbHelper.getWritableDatabase(); 并初始化 dbHelper 类。

# jquery - 来自父级的 jQuery 选择器

> ID：15171470
> 
> 赞同：1
> 
> 时间：2013-03-02T06:21:26.930
> 
> 标签：jquery, jquery-selectors

我有一个里面`ul`有项目的元素。`li`这些`li`项目没有任何可以用作直接选择器的属性集（没有类集，没有 id，也无法设置这些）。根据特定链接中的值`li`，我想隐藏该元素。因此，在下面的示例中，我想将 的 css 设置`li`为`href='link4'`隐藏。

我将如何编写选择器来获取这个元素？我尝试了许多变体，包括 `has([href='link4'])，我认为这会起作用，但没有运气。

感谢帮助。

```
<ul id="mylist">
    <li><a href="link1">link1</a></li>
    <li><a href="link2">link2</a></li>
    <li><a href="link3">link3</a></li>
    <li><a href="link4">link4</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:25:24.470

```
$(function() {
    $('#mylist li').has('a[href=link4]').hide();
    //  $('#mylist li:has("a[href=link4]")').hide();
    //  $('#mylist li).eq(3).hide();
}); 
```

[http://jsfiddle.net/LQdnG/](http://jsfiddle.net/LQdnG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:25:37.973

试试这个：

`$("#mylist li:contains('link4')").hide();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:26:22.067

使用 has 你可以做到这一点，

```
 $('#myList li').has('a[href=link4]').hide()` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:26:48.747

试试这个：

```
var anchor4=$('#mylist li a[href="link4"]') 
```

你会在上面的变量中得到一个标签的对象。隐藏它的第一个父 li，你可以这样做。

```
$(anchor4).closest('li').hide(); 
```

# ant - 使用 ant 从源代码构建 ANTLR v4 的问题：[java] 错误（7）：找不到或打开文件：*.g

> ID：15171471
> 
> 赞同：3
> 
> 时间：2013-03-02T06:21:38.353
> 
> 标签：ant, compilation, antlr4

我试图从源代码构建 ANTLR 版本 4，因为我从官方网站下载了它，但我不能使用 ant 来完成。正如build.xml所说，我将antlr-3.5-complete-no-st3.jar下载到/lib文件夹中，但是当我运行ant时它返回：

[mkdir] 创建目录：/../antlr/antlr4-master/build/generated-sources/antlr3/org/antlr/v4/parse [java] 错误（7）：找不到或打开文件：*.g

构建失败/../antlr/antlr4-master/build.xml:108：执行此行时发生以下错误：/../antlr/antlr4-master/build.xml:84：Java返回：1

我在运行 OSX 10.8.2 的 MacBook 上为了使用 ant 成功编译，我还需要做些什么吗？

提前致谢， 迪莫斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:49:57.943

您需要使用 Maven 从源代码构建 ANTLR 4。

[使用 Maven 构建 ANTLR 4](http://www.antlr.org/wiki/display/ANTLR4/Building+ANTLR+4+with+Maven)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T06:02:05.860

上面的“Building ANTLR 4 with Maven”链接似乎不可用。请按照以下链接进行 ANTLR 4 maven 构建。这些帮助我实现了 antlr 4 maven build。

[https://groups.google.com/forum/#!msg/antlr-discussion/Vw4Ia__sgPk/nDS5Y9YSDGIJ](https://groups.google.com/forum/#!msg/antlr-discussion/Vw4Ia__sgPk/nDS5Y9YSDGIJ)

[如何获得有关 antlr4-maven-plugin 的帮助](https://stackoverflow.com/questions/15324837/how-do-i-get-help-on-the-antlr4-maven-plugin)

我的 ANTLR-Maven 插件如下：-

```
<build>
    <plugins>
        <plugin>
            <groupId>org.antlr</groupId>
            <artifactId>antlr4-maven-plugin</artifactId>
            <version>4.0</version>
            <configuration>
                <sourceDirectory>${basedir}/src/main/java/com/test</sourceDirectory>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>antlr4</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.antlr</groupId>
                                    <artifactId>
                                        antlr4-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [4.0,)
                                    </versionRange>
                                    <goals>
                                        <goal>antlr4</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build>

<dependencies>
    <dependency>
        <groupId>org.antlr</groupId>
        <artifactId>antlr4-maven-plugin</artifactId>
        <version>4.2.2</version>
    </dependency>
</dependencies> 
```

# android - 如何在android中打印库项目的日志？

> ID：15171473
> 
> 赞同：6
> 
> 时间：2013-03-02T06:21:50.713
> 
> 标签：android, android-logcat

我有一个 android 项目，其中包含了 3 个其他 android 库项目，并且我正在使用 eclipse。我试图从库项目中打印日志，但它只打印主项目的日志。

那么任何人都可以告诉我如何打印包含在主项目中的库项目的日志吗？

我的主要项目是 `com.project1.app`，我在其中登录如下。

```
Log.i(TAG,"Log From Main Project1"); 
```

图书馆项目是`com.subLibrary.subLibraryapp`，我在其中记录如下。

```
Log.i(TAG,"Log From Main Library Project"); 
```

但在 LogCat 中，我只能看到如下所示的日志`com.project1.app`。

```
com.project1.app    |   Log From Main Project1 
```

我做错了什么或者我必须打开任何其他窗口，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T16:56:33.173

我猜你的应用程序和库有不同的标签。

如果您使用命令行读取日志，则需要执行类似的操作

```
adb logcat -s yourtag:V librarytag:V 
```

如果您使用 Eclipse 来读取您的 logcat 输出，请尝试创建一个特定于您的应用程序的过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T14:23:13.357

这是我几天前发布的最简单的库之一。与普通日志库相反，您只能使用单个消息参数。它还会打印出您的 LINE 编号和 METHOD 名称。

最好的事情之一是，您不必在发布构建时删除日志。遵循这些简单的步骤。

第 1 步：将 jitpack 添加到根级 gradle，

```
allprojects {
    repositories {
       maven { url 'https://jitpack.io' }
    }
} 
```

第2步：然后只需导入，

```
dependencies {
    compile 'com.github.sujay219:LogHere:1.0.10'
} 
```

第三步：初始化并使用，

```
// Initialise in your main activity
LogHere.initialize(BuildConfig.DEBUG, LogHere.ERROR, "wildox”);

// Logging line, single param
LogHere.e(“this is message”); 
```

更多细节，

[https://github.com/sujay219/LogHere](https://github.com/sujay219/LogHere)

# mysql - YII 找不到表

> ID：15171474
> 
> 赞同：1
> 
> 时间：2013-03-02T06:21:55.800
> 
> 标签：mysql, yii, wamp

我正在使用 WAMP-MYSQL 数据库在 Yii 中工作。我已经创建了表格——

```
CREATE  TABLE IF NOT EXISTS `balaee_dev`.`country` (
  `countryId` INT(11) NOT NULL AUTO_INCREMENT ,
  `country` VARCHAR(45) NULL DEFAULT NULL ,
  PRIMARY KEY (`countryId`) ,
  UNIQUE INDEX `country_UNIQUE` (`country` ASC) )
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8; 
```

当我在[这里](http://test.balaee.com/balaee/index.php/KnowledgePortal/country/getcountry)测试项目时- 它给了我这个错误：

“在数据库中找不到活动记录类“国家”的“国家”表”，尽管该表存在于数据库中。我为每个控制器都收到此错误。这是我的配置文件：

```
<?php

// This is the configuration for yiic console application.
// Any writable CConsoleApplication properties can be configured here.
return array(
    'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
    'name'=>'My Console Application',
    // application components
    'components'=>array(
        'db'=>array(
            'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
        ),
        // uncomment the following to use a MySQL database

        'db'=>array(
            'connectionString' => 'mysql:host=localhost;dbname=balaee_dev',
            'emulatePrepare' => true,
            'username' => 'root',
            'password' => '',
            'charset' => 'utf8',
        ),

    ),
); 
```

我有 main.php 作为-

```
<?php

// uncomment the following to define a path alias
// Yii::setPathOfAlias('local','path/to/local-folder');

// This is the main Web application configuration. Any writable
// CWebApplication properties can be configured here.
return array(
    'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
    'name'=>'My Balaee Application',
    // preloading 'log' component
    'preload'=>array('log'),
    // autoloading model and component classes
    'import'=>array(
        'application.models.*',
        'application.components.*',
        'application.modules.KnowledgePortal.*',
        'application.modules.QuestionBank.*',
        //'application.modules.UserAuthentication.*',
        'application.plugins.*',
            'application.extensions.noaaWeather.*',

    ),
    'modules'=>array(
        //Question Bank Module
        'QuestionBank'=>array(),
        //Social Networking Module
        'SocialNetworking'=>array(),
        //Knowledge Portal Module
        'KnowledgePortal'=>array(),
        // uncomment the following to enable the Gii tool
        'gii'=>array(
            'class'=>'system.gii.GiiModule',
            'password'=>'root',
            // If removed, Gii defaults to localhost only. Edit carefully to taste.
            'ipFilters'=>array('127.0.0.1','::1'),
            //'ipFilters'=>array('204.93.172.30'),
        ),
    ),
    // application components
    'components'=>array(
        'user'=>array(
            // enable cookie-based authentication
            'allowAutoLogin'=>true,
        ),

        'mailer' => array(
                'class' => 'application.extensions.mailer.EMailer',
                'pathViews' => 'application.views.email',
                'pathLayouts' => 'application.views.email.layouts'
        ),
        'curl'=>array(
        'class' => 'application.extensions.curl.Curl',
        ),
        'params'=>array(
        'noaaWeather.cachePath' => 'protected/extensions/noaaWeather/cache'
        ),

        // uncomment the following to enable URLs in path-format
        'urlManager'=>array(
            'urlFormat'=>'path',
            'rules'=>array(
                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
            ),
        ),
/*
        'db'=>array(
            'connectionString' => 'sqlite:'.dirname(__FILE__).'/../data/testdrive.db',
        ),
*/

    'db'=>array(
            //'connectionString' => 'mysql:host=localhost;dbname=balaee_dev',
            'connectionString' => 'mysql:host=204.93.172.30;dbname:shailani_balaee_dev',
            //'emulatePrepare' => true,
            'username' => 'shailani_bdev',
            'password' => 'nTRXpfuH8wmjx5hV',
            'charset' => 'utf8',
        ),      
        // uncomment the following to use a MySQL database

        'db'=>array(
            'connectionString' => 'mysql:host=localhost;dbname=balaee_dev',
            'emulatePrepare' => true,
            'username' => 'root',
            'password' => '',
            'charset' => 'utf8',
        ),

        'errorHandler'=>array(
            // use 'site/error' action to display errors
            'errorAction'=>'site/error',
        ),
        'log'=>array(
            'class'=>'CLogRouter',
            'routes'=>array(
                array(
                    'class'=>'CFileLogRoute',
                    'levels'=>'error, warning',
                ),
                // uncomment the following to show log messages on web pages
                /*
                array(
                    'class'=>'CWebLogRoute',
                ),
                */
            ),
        ),
    ),

    // application-level parameters that can be accessed
    // using Yii::app()->params['paramName']
    'params'=>array(
        // this is used in contact page
        'adminEmail'=>'webmaster@example.com',
    ),
); 
```

那么请有人指导我需要做哪些改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T09:38:17.507

你说你正在使用MySQL。所以你的配置中的 sqlite 行不会出现。假设这些表已经在你的 MySql 数据库中创建（我猜你可以在 MySQL Workbench 或 PHPMyAdmin 中看到它们）：

*   删除此行
*   重新运行模型/CRUD/任何一代。

如果您的连接字符串和参数没问题，它应该可以工作。

如果没有，请随意复制相关的错误日志：Yii、MySql 和 Apache 的日志可以包含有用的信息。

# ios - 在 Box2D 中，球在落地前弹起

> ID：15171479
> 
> 赞同：0
> 
> 时间：2013-03-02T06:22:33.577
> 
> 标签：ios, box2d, box2d-iphone

我在 iOS 中用一个弹跳球实现了一个基本的 box2d 项目，但球似乎在它真正到达地面之前弹跳了。在每次渐进式反弹时，它似乎都更接近底部并最终落在地面上。我拍了一段视频：http: [//f.cl.ly/items/1S06373Z1l2w1z243E0k/Bounce.m4v](http://f.cl.ly/items/1S06373Z1l2w1z243E0k/Bounce.m4v)

这是我设置所有内容的地方：

```
CGSize screenSize = self.view.bounds.size;

// Define the gravity vector.
b2Vec2 gravity;
gravity.Set(0.0f, -9.81f);

bool doSleep = true;

// Construct a world object, which will hold and simulate the rigid bodies.
world = new b2World(gravity);
world->SetAllowSleeping(doSleep);
world->SetContinuousPhysics(true);

b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0,0);

b2Body *groundBody = world->CreateBody(&groundBodyDef);
b2EdgeShape groundEdge;
b2FixtureDef boxShapeDef;
boxShapeDef.shape = &groundEdge;

//bottom
groundEdge.Set(b2Vec2(0,0), b2Vec2(screenSize.width/PTM_RATIO, 0));
groundBody->CreateFixture(&boxShapeDef);

// left wall
groundEdge.Set(b2Vec2(0,0), b2Vec2(0,screenSize.height/PTM_RATIO));
groundBody->CreateFixture(&boxShapeDef);

// top
groundEdge.Set(b2Vec2(0, screenSize.height/PTM_RATIO),
               b2Vec2(screenSize.width/PTM_RATIO, screenSize.height/PTM_RATIO));
groundBody->CreateFixture(&boxShapeDef);

// right wal
groundEdge.Set(b2Vec2(screenSize.width/PTM_RATIO, screenSize.height/PTM_RATIO),
               b2Vec2(screenSize.width/PTM_RATIO, 0));
groundBody->CreateFixture(&boxShapeDef);

//ball
b2BodyDef ballBodyDef;
ballBodyDef.type = b2_dynamicBody;
ballBodyDef.position.Set(self.ball.position.x/PTM_RATIO, self.ball.position.y/PTM_RATIO);
ballBodyDef.userData =  (__bridge void *)_ball;
body = world->CreateBody(&ballBodyDef);

b2CircleShape circle;
circle.m_radius = 60.0/PTM_RATIO;

b2FixtureDef ballShapeDef;
ballShapeDef.shape = &circle;
ballShapeDef.density = 0.8f;
ballShapeDef.friction = 0.0f;
ballShapeDef.restitution = 0.8f;
body->CreateFixture(&ballShapeDef); 
```

然后这就是我每 1/60 秒运行一次以更新位置

```
int32 velocityIterations = 8;
int32 positionIterations = 1;

world->Step(1.0f/60.0f, velocityIterations, positionIterations);

CGPoint newCenter = CGPointMake(body->GetPosition().x * PTM_RATIO,
                                self.view.bounds.size.height - body->GetPosition().y * PTM_RATIO);
self.ball.position = newCenter; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T15:19:32.677

如果您将球体声明为动态的

```
b2BodyDef ballBodyDef;
ballBodyDef.type = b2_dynamicBody;
// finish creating... 
```

并使用一些重力值（您已经完成）初始化世界，您根本不需要手动设置球体的位置。在没有看到*所有*代码的情况下，我的直觉是您已经将球声明为动态的，并且您的手动位置更新与 box2d 的重力相冲突。视频似乎显示球被重力拉下，同时人为地改变了它的位置。我建议`self.ball.position`完全删除分配给的行 - 像这样直接设置物理体的位置通常不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:31:32.240

我发现了问题所在。屏幕上的球是一个 CALayer，当它改变它的位置时，它使用了隐式动画。现在以这种方式设置位置时效果很好

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
CGPoint newCenter = CGPointMake(body->GetPosition().x * PTM_RATIO,
                                self.view.bounds.size.height - body->GetPosition().y * PTM_RATIO);
self.ball.position = newCenter;
[CATransaction commit]; 
```

# php - 验证 PHP 变量并从中获取结果

> ID：15171490
> 
> 赞同：1
> 
> 时间：2013-03-02T06:24:10.430
> 
> 标签：php, javascript, html

这是我的代码：-

```
<?php
$URL = "http://www.mylink.com/show_album/XXXXX";
/*The value of $URL will be passed from previous page via Form*/
?> 
```

首先，变量的值必须是链接/URL。如果没有，`echo "Not an URL";`应该执行。但是，我无法检查它是否是链接。请任何人帮助我弄清楚这一点。作为一个新手，我非常需要帮助。

其次，**http://**是可选的。如果提供，没关系。否则，将自动添加“http://”。我为此使用了此代码，并且可以正常工作。

```
if(strpos($URL, "http://") !== false){
    echo $URL;
    echo "<br />http:// already provided";
    return $URL;
}
else {
    echo "http://" . $URL;
    $URL = "http://" . $URL;
    echo "<br />http:// automatically added";
    return $URL;
} 
```

第三，文本“ **mylink.com/show_album/** ”（不带引号）必须在 $URL 中可用。我为此使用了此代码：-

```
if (strpos($URL, "mylink.com/show_album/") !== false){
    echo "The "mylink.com/show_album/ is available";
}
else {
    echo "The "mylink.com/show_album/ is not available";
} 
```

没关系。

接下来，在 $URL 中，该值是带有最后一个单词 XXXXXX 的链接名称。它必须是这个变量的最后一个字。XXXXX 是一个数字。它可以是任何数字，例如“12345”或任何其他数字。但是，我想从这个 $URL 中获取数字并显示它。我怎样才能做到这一点？

最后，链接只能包含 http:// 和 www.mylink.com/show_album/XXXXX 。否则，`echo "Not a valid link";`将被执行。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:42:01.947

对于验证 URL：

```
 $text = preg_replace("
  #((http|https|ftp)://(\S*?\.\S*?))(\s|\;|\)|\]|\[|\{|\}|,|\"|'|:|\<|$|\.\s)#ie",
  "'<a href=\"$1\" target=\"_blank\">$3</a>$4'",
  $text
); 
```

要在 URL 前面验证/附加 http://，请执行以下操作：

```
$protocol = substr($URL, 0, 7);
if($protocol!="http://")
{
     $URL="http://".$URL;
} 
```

**编辑** 现在获取最后一个数字：

```
$XXXXX=substr( $URL, strrpos( $url, '/' )+1 ); 
```

# c# - Windows 7剪贴板复制粘贴操作使用C#

> ID：15171492
> 
> 赞同：1
> 
> 时间：2013-03-02T06:24:43.607
> 
> 标签：c#, windows, winforms

我正在开发一个需要使用剪贴板数据的 Windows 应用程序。我正在尝试通过下面的代码从剪贴板复制文本。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace MultiValuedClipBoard
{
    class Class1
    {

        public String SwapClipboardHtmlText(String replacementHtmlText)
        {
            String returnHtmlText = "hello";
            if (Clipboard.ContainsText(TextDataFormat.Html))
            {
                returnHtmlText = Clipboard.GetText(TextDataFormat.Html);
                Clipboard.SetText(replacementHtmlText, TextDataFormat.Html);
            }
            return returnHtmlText;
        }
    }
} 
```

通过以下方式调用上述函数：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Media;

namespace MultiValuedClipBoard
{
    class Program
    {
        static void Main(string[] args)
        {
            Class1 aas = new Class1();
            string a = aas.SwapClipboardHtmlText("chetan");
            Console.WriteLine(a);
            Console.ReadLine();
        }
    }
} 
```

运行此代码时，它会输出默认值“Hello”，而不是剪贴板数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:48:18.610

由于两个原因，您的代码将无法正常工作：

[1] 当你说：

`if (Clipboard.ContainsText(TextDataFormat.Html))`

在这里，您基本上假设剪贴板已经包含一个文本并且也是 HTML 格式的，但是根据您在剪贴板中设置的值，它看起来不像您打算在您的任何地方使用预先存在的剪贴板值程序。所以，这个 if 条件不应该存在。

[2] 其次，您进一步尝试将字符串“chetan”设置为绝对不是 HTML 格式的剪贴板。所以，

```
 Clipboard.SetText(replacementHtmlText, TextDataFormat.Html); 
```

变成

```
 Clipboard.SetText(replacementHtmlText, TextDataFormat.Text); 
```

* * *

因此，实际上，您的新代码变成了这样：

```
 String returnHtmlText = "hello";
        //if (Clipboard.ContainsText(TextDataFormat.Html))
        //{
            returnHtmlText = Clipboard.GetText(TextDataFormat.Text);
            Clipboard.SetText(replacementHtmlText, TextDataFormat.Text);
        //}
        return returnHtmlText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:05:27.750

显然`Clipboard.ContainsText(TextDataFormat.Html)`评估为`false`。这意味着剪贴板实际上不包含您指定格式的文本。

我改变了你的程序来证明这一点：

```
[STAThread]
static void Main(string[] args)
{
    Clipboard.SetText("boo yah!", TextDataFormat.Html);
    Class1 aas = new Class1();
    string a = aas.SwapClipboardHtmlText("chetan");
    Console.WriteLine(a);
    Console.WriteLine(Clipboard.GetText(TextDataFormat.Html));
    Console.ReadLine();
} 
```

输出：

```
嘘！
车坦

```

# excel - VBA中的SUM函数 - 不是硬编码行和列

> ID：15171495
> 
> 赞同：1
> 
> 时间：2013-03-02T06:24:53.300
> 
> 标签：excel

如何在 vba 的 sum 函数中使用 lastRow 变量？在我计算每行中的单词数直到最后一行之后，我想将每行中的各个总数加到一个总列中，但我不想将范围硬编码到 vba 中的 sum 函数中？还有其他方法吗？

例子：

```
Column:   A   B   C   D   E   F  
NRow 1:   2   3   4   5   6   7  
NRow 2:   3   4   5   6   7   8  
Total 3:  5   7   9   11  13  15 
```

想要避免`SUM(R[-2]C:R[-1]C)`？我想要`SUM(R[lastRow]C:R[-1]C)`或以相同方式发挥作用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:48:02.713

像这样的东西

1.  将活动工作表`A1`上的使用范围设置为列中最后使用的单元格`F`
2.  转到此范围下方的第一个单元格`Cells(rng1.Cells(1).Row + rng1.Rows.Count, 1)`，调整为感兴趣范围内的列数（在本例中为 6）
3.  进入动态`"=SUM(R[-" & rng1.Rows.Count & "]C:R[-1]C)"`给出`rng1.Rows.Count`第一行的论坛

**代码**

```
Sub GetRange()
Dim rng1 As Range
Set rng1 = Range([a1], Cells(Rows.Count, "F").End(xlUp))
Cells(rng1.Cells(1).Row + rng1.Rows.Count, 1).Resize(1, rng1.Columns.Count).Value = "=SUM(R[-" & rng1.Rows.Count & "]C:R[-1]C)"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:00:43.727

如果您可以保证始终有数据`column A`然后找到最后一行，您可以执行以下操作：

```
Option Explicit

Sub addSums()

Dim lstRow As Integer
With Excel.ThisWorkbook.Sheets("Sheet1")

    lstRow = .Cells(.Rows.Count, 1).End(Excel.xlUp).Row

    Dim j As Integer
    For j = 1 To .Cells(1, .Columns.Count).End(Excel.xlToLeft).Column
        .Cells(lstRow + 1, j) = "=SUM(R[-" & lstRow - 1 & "]C:R[-1]C)"
        .Cells(lstRow + 1, j).Font.Bold = True
    Next j

End With

End Sub 
```

似乎在以下方面工作正常：

![在此处输入图像描述](../Images/115d5e90b7091a8b772e9aa010545064.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-02T06:33:54.253

如果您的源数据来自外部源，则适当的机制是：

*   在输入表周围创建一个命名数据范围；
*   将 inut 表设置为在刷新时自动调整大小；和
*   然后在您的函数中使用命名数据范围。

# java - 简单的客户端服务器程序

> ID：15171496
> 
> 赞同：1
> 
> 时间：2013-03-02T06:24:55.500
> 
> 标签：java, network-programming

我制作了一个基于 TCP/IP 的基本项目，其中服务器侦听客户端，然后提供传入数据的大写句子。

服务器.java：

```
import java.io.*;
import java.net.*;
public class Server 
{

    public static void main(String[] args) throws Exception
    {
        ServerSocket ss = new ServerSocket(7948);
        Socket s= ss.accept();
        System.out.print("Server connected\n");

        BufferedInputStream bis = new BufferedInputStream (s.getInputStream());
        BufferedOutputStream bos = new BufferedOutputStream (s.getOutputStream());

        while(true)
        {
            int a = bis.available();
            byte b[] = new byte[a];
            bis.read(b);
            String str = new String(b);
            str = str.toUpperCase();
            b = str.getBytes();
            bos.write(b,0,b.length);
            bos.flush();

            if(str.equals("BYE"))
                break;
            else
                continue;
        }
        System.out.print("\nServer Disconnecting");
        String str = "Adios Amigo";
        bos.write(str.getBytes());
        bos.flush();

        bis.close();
        bos.close();
        ss.close();
        s.close();
    }
} 
```

客户端.java：

```
import java.io.*;
import java.net.*;
public class Client 
{

    public static void main(String[] args) throws Exception
    {
        BufferedReader clientStream = new BufferedReader(new InputStreamReader(System.in));
        String str; 
        int a;
        byte[] b;

        Socket s = new Socket(InetAddress.getLocalHost(), 7948);

        BufferedOutputStream bos = new BufferedOutputStream (s.getOutputStream());
        BufferedInputStream bis = new BufferedInputStream (s.getInputStream());

        one:while(true)
        {
            str = clientStream.readLine();
            b =str.getBytes();
            bos.write(b);
            bos.flush();

            a=bis.available();
            b = new byte[a];
            bis.read(b);
            str = new String (b);
            str.trim();
            System.out.print("The server says: "+str);
            if (str.equals("BYE"))
            {
                bis.read(b);
                str = new String (b);
                System.out.print("The server says: "+str);
                break one;
            }
        }

        s.close();
        clientStream.close();
        bos.close();
        bis.close();
    }
} 
```

该程序运行正常，除了一个问题，客户端的输出来自两次输入。这意味着我必须从客户端提供两个输入才能获得第一个输出，并且继续进行。我无法跟踪错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:42:03.100

在客户端，您将数据发送到服务器，然后立即调用`a.available()`- 此函数不等待从服务器发送数据。由于服务器不太可能在`.available()`调用时响应数据，因此该函数返回零。

因此，您的字节数组`b`（请在将来使用更具描述性的变量名称）的长度为零。

一旦创建了大小为零的数组，您最终通过调用等待数据`bis.read()`- .read() 是一个*阻塞*调用。它将等待来自服务器的数据。实际上并未读取此数据，因为您正在读取的数组大小为零。这会导致打印出一个空字符串。

以下代码将解决该问题，但对于未来，我不建议使用`.available()`- 根据我的经验，它相当不可靠。您应该通过简单地尝试读取数据来检查数据是否可用。

客户端.java：

```
 one:while(true)
    {
        str = clientStream.readLine();
        b =str.getBytes();
        bos.write(b);
        bos.flush();

        while (bis.available() <= 0)
        {
            // wait for data!
        }

        a=bis.available();
        b = new byte[a];
        bis.read(b);
        str = new String (b);
        str.trim();
        System.out.print("The server says: "+str);
        if (str.equals("BYE"))
        {
            bis.read(b);
            str = new String (b);
            System.out.print("The server says: "+str);
            break one;
        }
    } 
```

# java - 从字节数组创建 ZIP

> ID：15171503
> 
> 赞同：0
> 
> 时间：2013-03-02T06:25:45.477
> 
> 标签：java, android, bytearray, unzip, zipfile

我从服务器发送的 JSON 响应中获取一个表示 ZIP 文件的字节数组，在 Android 端，我想从数组中重新创建 ZIP。

我正在使用此代码来实现此目的，但它没有在我的设备存储中创建 ZIP 文件。

从 JSON 中提取字节数组：

```
String zipBinary = mJsonObject.getString("zip"); 
```

用于存储 zip 文件的文件路径：

```
String unzipLocation = Environment.getExternalStorageDirectory() + "/sample.zip"; 
```

主要代码：

```
public CreateZipMultipleFiles(String filePath, byte[] sourceFile) {
    try {
        ByteArrayOutputStream fout = new ByteArrayOutputStream();

        ZipOutputStream zout = new ZipOutputStream(fout);
        ZipEntry ze = new ZipEntry(filePath);
        ze.setSize(sourceFile.length);
        zout.putNextEntry(ze);
        zout.write(sourceFile);
        zout.closeEntry();

        zout.close();

        System.out.println("Zip Byte file has been created!");
    } catch (IOException ioe) {
        System.out.println("IOException :" + ioe);
    }
} 
```

我怎样才能实现这个目标？

# android - 在android设备中启动任何应用程序时是否可以获得通知

> ID：15171504
> 
> 赞同：4
> 
> 时间：2013-03-02T06:25:46.350
> 
> 标签：android

我希望当我在设备中启动任何应用程序时它应该通知我（以编程方式）。运行（启动）时是否可以获得任何应用程序的通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:42:27.053

[您可以通过ActivityManager#getRunningAppProcesses](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)获取当前正在运行的进程。但是，如果您的设备没有植根，则绝对不可能在应用程序启动时收到通知。

当 Android 启动一个新应用程序时，Zygote 会 fork 一个新进程：

```
static void Dalvik_dalvik_system_Zygote_forkAndSpecialize(const u4* args,
    JValue* pResult)
{
    pid_t pid;

    pid = forkAndSpecializeCommon(args, false);

    RETURN_INT(pid);
} 
```

您可以修改和替换 libdvm.so。

[另一种方法](https://stackoverflow.com/a/6075480/1365960)：

任何动态链接的程序都会在启动时访问某些文件，例如动态链接器。这对于安全目的是没有用的，因为它不会在静态链接的程序上触发，但可能仍然很有趣：

```
#include <stdio.h>
#include <sys/inotify.h>
#include <assert.h>
int main(int argc, char **argv) {
    char buf[256];
    struct inotify_event *event;
    int fd, wd;
    fd=inotify_init();
    assert(fd > -1);
    assert((wd=inotify_add_watch(fd, "/lib/ld-linux.so.2", IN_OPEN)) > 0);
    printf("Watching for events, wd is %x\n", wd);
    while (read(fd, buf, sizeof(buf))) {
      event = (void *) buf;
      printf("watch %d mask %x name(len %d)=\"%s\"\n",
         event->wd, event->mask, event->len, event->name);
    }
    inotify_rm_watch(fd, wd);
    return 0;
} 
```

这需要 root 权限，因此使用 JNI 和 root 设备，您将能够做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T06:58:17.450

不，这实际上是不可能使用公共 SDK 的。

充其量，您可以不断地轮询[ActivityManager](http://developer.android.com/reference/android/app/ActivityManager.html)以获取位于顶部的前台进程，并记录下来。但是，它不是最准确或最有效的方法。

# android - 在android中找不到列item_name

> ID：15171505
> 
> 赞同：2
> 
> 时间：2013-03-02T06:25:50.467
> 
> 标签：android, sqlite, exception

有人有答案吗？

我的数据库助手类中的代码：

```
 public void onCreate(SQLiteDatabase db) {
    db.execSQL(DATABASE_CREATE);
    db.execSQL(CREATE_ITEM_DB);
}

public static final String ITEM_NAME = "item_name";
public static final String ITEM_STATUS = "item_status";
public static final String ITEM_DESCRIPTION = "item_description";
public static final String ITEM_CATEGORY = "item_category";
public static final String ITEM_ROW_ID = "row_id";
private static final String ITEM_TABLE = "table_of_items";

   public static final String CREATE_ITEM_DB = "CREATE TABLE "
          + ITEM_TABLE + "(" + ITEM_ROW_ID + 
         " INTEGER PRIMARY KEY AUTOINCREMENT," + ITEM_NAME
          + " TEXT NOT NULL," + ITEM_STATUS + " TEXT NOT NULL," + ITEM_DESCRIPTION + " TEXT," + ITEM_CATEGORY + " TEXT NOT NULL," +
          KEY_NAME + " TEXT);"; 
```

现在，在另一个类中，我调用：

```
 public void list(){
myModel.open();
current_user = myModel.getCurUser();
Item [] items = (myModel.getLostItems(current_user));
if(items != null){
    myView.setItem(items);
}

myModel.close(); 
```

}

myModel 是我的数据库类。它拥有我的数据库助手类和我的 sqlite 数据库的实例。此外， myModel.open() 获得一个可写数据库。

错误信息非常清楚：item_name 不是列。

但它看起来确实如此。

编辑：玩了之后，我决定这不是关于这个特定的列。似乎我放在列数组中的任何列都会导致相同的错误消息。

编辑 2：这是我的 getLostItems：

```
 public Item[] getLostItems(String current_user) {
    String [] columns = new String [] {DB_Helper.ITEM_NAME,
            DB_Helper.ITEM_STATUS,
            DB_Helper.ITEM_DESCRIPTION,
            DB_Helper.ITEM_CATEGORY,
            DB_Helper.ITEM_ROW_ID,
            DB_Helper.KEY_NAME};
    Cursor c = database.query(DB_Helper.DATABASE_TABLE_USERS, columns, DB_Helper.KEY_NAME + " = ? AND " + DB_Helper.ITEM_STATUS + " = ?",
             new String[] {current_user, "lost"},
             null,
             null,
             null); 
```

从技术上讲，代码有点多，但是在使用调试器遍历代码后，它在查询语句上失败了。

日志：

```
03-02 16:44:56.375: E/SQLiteLog(16362): (1) no such column: item_name
03-02 16:44:56.375: D/AndroidRuntime(16362): Shutting down VM

03-02 06:47:46.825: E/AndroidRuntime(6760): FATAL EXCEPTION: main
03-02 06:47:46.825: E/AndroidRuntime(6760): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.wheresmystuff/com.example.wheresmystuff.View.DisplayItems}: android.database.sqlite.SQLiteException: no such column: item_name (code 1): , while compiling: SELECT item_name, item_status, item_description, item_category, row_id, id_name FROM reg_users_table WHERE id_name = ? AND item_status = ?
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.os.Looper.loop(Looper.java:137)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at java.lang.reflect.Method.invokeNative(Native Method)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at java.lang.reflect.Method.invoke(Method.java:511)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at dalvik.system.NativeStart.main(Native Method)
03-02 06:47:46.825: E/AndroidRuntime(6760): Caused by: android.database.sqlite.SQLiteException: no such column: item_name (code 1): , while compiling: SELECT item_name, item_status, item_description, item_category, row_id, id_name FROM reg_users_table WHERE id_name = ? AND item_status = ?
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.example.wheresmystuff.Model.DB.getLostItems(DB.java:180)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.example.wheresmystuff.Presenter.ListingPresenter.list(ListingPresenter.java:33)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.example.wheresmystuff.Presenter.ListingPresenter.<init>(ListingPresenter.java:26)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at com.example.wheresmystuff.View.DisplayItems.onCreate(DisplayItems.java:26)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.Activity.performCreate(Activity.java:5104)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-02 06:47:46.825: E/AndroidRuntime(6760):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-02 06:47:46.825: E/AndroidRuntime(6760):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:48:30.713

你有一个额外的逗号而不是

```
KEY_NAME + " TEXT, 
```

它应该是

```
KEY_NAME + " TEXT);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:38:02.960

在这里，它在 myModel.getLostItems() 方法的 select 语句中显示错误消息，请检查您是否在查询中为 item_name 列传递了正确的参数。

# mysql - mysqltuner的“MySQL的最大内存使用量非常高”是什么意思？

> ID：15171506
> 
> 赞同：1
> 
> 时间：2013-03-02T06:25:51.950
> 
> 标签：mysql, memory, mysqltuner

我正在尝试优化我在 2GB mem VPS 上运行的 mysql，我使用了 mysqltuner，但我不太明白如何处理以下建议，尤其是那个说： **MySQL 的最大内存使用量非常高**，处理这个？有人可以帮忙解释一下吗？谢谢。

```
-------- Performance Metrics -------------------------------------------------
[--] Up for: 3h 17m 7s (49K q [4.190 qps], 1K conn, TX: 70M, RX: 7M)
[--] Reads / Writes: 60% / 40%
[--] Total buffers: 314.0M global + 6.4M per thread (300 max threads)
[!!] Maximum possible memory usage: 2.2G (119% of installed RAM)
[OK] Slow queries: 1% (785/49K)
[OK] Highest usage of available connections: 85% (256/300)
[!!] Cannot calculate MyISAM index size - re-run script as root user
[OK] Query cache efficiency: 92.4% (38K cached / 41K selects)
[OK] Query cache prunes per day: 0
[OK] Sorts requiring temporary tables: 0% (0 temp sorts / 633 sorts)
[!!] Temporary tables created on disk: 45% (315 on disk / 699 total)
[OK] Thread cache hit rate: 74% (359 created / 1K connections)
[OK] Table cache hit rate: 95% (141 open / 148 opened)
[OK] Open file limit used: 12% (189/1K)
[OK] Table locks acquired immediately: 99% (6K immediate / 6K locks)

-------- Recommendations -----------------------------------------------------
General recommendations:
    Add skip-innodb to MySQL configuration to disable InnoDB
    MySQL started within last 24 hours - recommendations may be inaccurate
    Reduce your overall MySQL memory footprint for system stability
    When making adjustments, make tmp_table_size/max_heap_table_size equal
    Reduce your SELECT DISTINCT queries without LIMIT clauses
Variables to adjust:
  *** MySQL's maximum memory usage is dangerously high ***
  *** Add RAM before increasing MySQL buffer variables ***
    tmp_table_size (> 32M)
    max_heap_table_size (> 32M) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T23:50:20.510

" `[!!] Maximum possible memory usage: 2.2G (119% of installed RAM)`"

这意味着您实际上对 MySQL 撒了谎，告诉它您的可用内存比实际拥有的多，2.2G > 2G。这可能会持续数周或数月，但这是一个坏主意。如果 MySQL 没有您告诉它使用的内存，MySQL 将在最坏的时间随机崩溃。

如果您将“skip-innodb”添加到您的 /etc/my.cnf 文件中，这可能会为您节省一些内存。我假设您没有使用 InnoDB。这是一个切线，但我强烈建议您将数据从 MyISAM 转换为 InnoDB。MyISAM 是旧技术。InnoDB 是更现代的引擎。

在 my.cnf 中查找可以降低以节省内存的任何内容。我通常看的第一件事是未使用的连接。15% 的连接未被使用，但请注意“24 小时内开始”警告。通常降低 my.cnf 中的（未使用的）连接将节省大量内存。我不知道您的应用程序是做什么的，但 256 连接对我来说听起来很高。因此，我会确保您的应用程序确实需要那么多连接。也许您的服务器上有 256 个 PHP 子节点，而这可能会减少 12 个子节点。更多的孩子！= 更快的反应。如果你有 12 个 PHP 孩子，也许你只需要 13 个数据库连接。

119% 显然太高了，但我认为 96% 也太高了。（这就是为什么我在这里寻找最好的 % 来使用。）显然操作系统也需要一些内存。你应该为你的操作系统留下多少未使用的内存，我想知道！如果还没有被问到，我会在这里作为一个单独的问题问这个问题。（如果您这样做，请在此处发布链接。）或者您可以只听mysqltuner的推荐。

只是在这里测试：

" `[!!] Maximum possible memory usage: 3.4G (88% of installed RAM)`"

再次降低 my.cnf 设置。

" `[!!] Maximum possible memory usage: 3.3G (86% of installed RAM)`"

还是太高了？

" `[OK] Maximum possible memory usage: 3.2G (83% of installed RAM)`"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T06:29:27.057

从 mysqltuner 那里得到一些建议。它对最大可能的内存使用量做出了错误的估计。它*无法*做出正确的估计。

有关说明，请参见[http://www.percona.com/blog/2009/02/12/how-much-memory-can-mysql-use-in-the-worst-case/](http://www.percona.com/blog/2009/02/12/how-much-memory-can-mysql-use-in-the-worst-case/)。

确实，每个连接都使用一些内存，但多少会有所不同。您不会总是使用 300 个连接，即使它们在使用，它们也不会总是同时运行查询，即使它们是，查询也不会总是使用所有可能的缓冲区到最大大小。

Mysqltuner 正在警告永远不会发生的理论上的最大内存使用量。

另一种看待它的方式：我分析了数百个 MySQL 配置，理论上*每个*配置都可以分配比服务器上的物理 RAM 更多的内存。

# javascript - 数组作为 $scope 内的对象出现

> ID：15171507
> 
> 赞同：0
> 
> 时间：2013-03-02T06:25:57.763
> 
> 标签：javascript, twitter-bootstrap, angularjs, angular-ui

我有这个代码示例：

```
$scope.testarray = {
    "a": true,
    "b": true,
    "c":false
};
$scope.test = function () {
    alert($scope.testarray.length);
} 
```

我期待看到带有“3”的警报，但我得到一个“0”（在某些情况下 - 未定义），我找不到原因。

我使用它来创建一组复选框，而需要数组以便在提交表单后检查它们的状态。

示例：http: [//jsfiddle.net/dorongol/cwZ6F/](http://jsfiddle.net/dorongol/cwZ6F/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:30:27.540

您使用的是对象而不是数组。只有真正的数组会自动跟踪“长度”属性。如果要使用对象，则需要自己处理（例如，通过在对象中创建 getLength 方法）。

对于真正的数组，这会起作用，但您别无选择，只能使用从 0 开始的索引。

```
$scope.testarray = [true, true, false];
$scope.test = function () {
    alert($scope.testarray.length);
} 
```

请注意，这看起来像全局变量，这通常是个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:54:52.580

获取哈希长度，并通过它们重复

```
 $scope.checkboxgetfilters = function () {
    alert(Object.keys($scope.filtergroup1).length);
     var str = '';
       for (var i in $scope.filtergroup1) {
         alert($scope.filtergroup1[i]);
       }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:14:06.217

如果您仍然需要名称和状态，则可以使用对象数组

```
$scope.testarray = [
    {
     "name":"a",
     "enabled": true
    },
    {
     "name":"b",
     "enabled": true
    },
    {
     "name":"c",
     "enabled": false
    }
]; 
```

两全其美！

# jquery - jquery 验证无法正常工作

> ID：15171508
> 
> 赞同：0
> 
> 时间：2013-03-02T06:25:59.553
> 
> 标签：jquery, asp.net, .net

我是 Jquery 的新手。

通过谷歌搜索，我完成了以下不起作用的代码。

我有 txtLogin 文本框和 btnLogIn 按钮。

我正在尝试简单的事情。如果此文本框为 expty，则错误消息应显示在 lblLoginError 中。

**以下是代码：**

```
 $(document).ready(function () {
         $('#btnLogIn').click(function () {
             var LoginId = $("#txtLogin").val();
             if ($("#txtLogin").val() == "") {

                 $("#lblLoginError").text("Please Enter Login Id");

                 return false;
             }
             else {
                 $("#lblLoginError").text("");
                 return true;
             }

         });
     }); 
```

我的问题是>>第一次当文本框为空并且我单击按钮时，它会在标签上显示错误消息[根据代码工作正常]。

第二次当我在文本框中输入任何内容并按下按钮时，它会删除错误消息。[根据代码这也很好]。

但是当我第三次删除输入的文本然后按下按钮时，它不会向我显示错误消息。

*注意：我在那个 AJAX 更新面板中使用 .NET。页面不会每次都刷新。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:49:51.677

这是jQuery 验证非常[有用的链接](http://docs.jquery.com/Plugins/Validation)

例子：

```
<script>
  $(document).ready(function(){
   $("#commentForm").validate();
});
</script>

<form id="commentForm">
  <input type="text" id="txtLogin" class="required"/>
  <input class="submit" type="submit" value="Submit"/>
</form> 
```

在这里，您可以根据需要申请课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:38:10.333

试试这种方式，可能第三次留下一些空格字符，所以最好的方法是在这里：

```
 <!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type='text/javascript'>
$(document).ready(function () {
         $('#btnLogIn').click(function () {
             var LoginId = $("#txtLogin").val();
             if ($("#txtLogin").val().trim() == "") {

                 alert($("#txtLogin").val());
                 $("#lblLoginError").text("Please Enter Login Id");

                 return false;
             }
             else {
                 $("#lblLoginError").text("");
                 return true;
             }

         });
     });
</script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <input type='text' id='txtLogin' />
  <input type='button' id='btnLogIn' value="Sign In"/>
  <p id='lblLoginError'></p>

</body>
</html> 
```

注意 `if ($("#txtLogin").val().trim() == "")`,`trim()`将消除空格字符。\

这是它的实时 URL：http: [//jsbin.com/igoceg/2/edit](http://jsbin.com/igoceg/2/edit)

我希望这会有所帮助，如果问题仍然存在，请告诉我。

# algorithm - 以逆时针顺序打印二维数组

> ID：15171509
> 
> 赞同：0
> 
> 时间：2013-03-02T06:26:08.887
> 
> 标签：algorithm, matrix

如何以逆时针顺序打印数组？我知道著名的“以螺旋顺序打印数组”算法，但看看如何以逆时针方式打印它会很有趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:46:37.053

假设您想到一个二维坐标数组......

基本上，您必须按 y 和 x 坐标的商的 atn 对数组进行排序，然后按顺序打印它们。适当地满足极点和符号变化，同时避免昂贵和数值不稳定的算术使实现复杂化。以下伪代码主要用于说明原理。

点集分为 0 到 8 的 9 个类别。#0 包含`(0,0)`将首先打印的点，#1,3,5,7 包含正 y 轴、负 x 轴、负 y 轴和正 x 上的点轴，分别。在这些类别中的每一个中，点将按照与原点的距离增加的顺序打印。类别 #2,4,6,8 分别包含来自第二、第三、第四和第一象限的点。在每个类别中，点将逆时针打印。位于与原点相同矢量上的任何点都将按照与原点的距离增加的顺序打印。

让`a:array of point(x:number,y:number)`成为你的阵列。将`f:array of (f1:number, f2:number, f3:number)`组件定义为

```
f[i].f1 :=
    let x := a[i].x, y := a[i].y;
    if x=0 then
        if y=0 then
            0
        else
            if y>0 then 1 else 5
        endif
    else
        if y=0 then
            if x>0 then 7 else 3
        else
            if x>0 and y>0 then
                8
            elsif x>0 and y<0 then
                6
            elsif x<0 and y<0 then
                4
            else
                2
            endif
        endif
    endif;

f[i].f2 :=
    let x := a[i].x, y := a[i].y, h := f[i].f1;
    if odd(h) then
        abs(x) + abs(y)
    else
        if h=0 then
            0
        elsif h=2 then
            -x/y
        elsif h=4 then
            y/x
        elsif h=6 then
            -x/y
        else
            y/x
        endif
    endif;

f[i].f3 :=
    a[i].x * a[i].x + a[i].y * a[i].y; 
```

应用您最喜欢的排序算法按`a`字典顺序升序排序并按顺序`f.f1, f.f2, f.f3`打印结果。

# hadoop - 如何在 Hadoop Streaming 中使用“typedbytes”或“rawbytes”？

> ID：15171514
> 
> 赞同：5
> 
> 时间：2013-03-02T06:26:30.617
> 
> 标签：hadoop, binary, streaming

我有一个问题可以通过 Hadoop Streaming 在“typedbytes”或“rawbytes”模式下解决，它允许使用 Java 以外的语言分析二进制数据。（如果没有这个，Streaming 会将一些字符（通常是 \t 和 \n）解释为分隔符并抱怨非 utf-8 字符。将我所有的二进制数据转换为 Base64 会减慢工作流程，从而达到目的。）

这些二进制模式是由[HADOOP-1722](https://issues.apache.org/jira/browse/HADOOP-1722)添加的。在调用 Hadoop Streaming 作业的命令行中，“-io rawbytes”允许您将数据定义为 32 位整数大小，后跟该大小的原始数据，“-io typedbytes”允许您将数据定义为 1 - 位零（表示原始字节），后跟 32 位整数大小，然后是该大小的原始数据。我已经创建了具有这些格式的文件（带有一条或多条记录），并通过使用/对照[typedbytes.py](https://github.com/klbostee/typedbytes)的输出检查它们来验证它们的格式是否正确。我还尝试了所有可能的变体（大端、小端、不同的字节偏移等）。我正在使用[来自 CDH4 的 Hadoop 0.20](https://ccp.cloudera.com/display/CDH4DOC/Installing+CDH4+on+a+Single+Linux+Node+in+Pseudo-distributed+Mode)，它具有实现 typedbytes 处理的类，并且在设置“-io”开关时进入这些类。

我使用“hadoop fs -copyFromLocal”将二进制文件复制到 HDFS。当我尝试将其用作 map-reduce 作业的输入时，它会在尝试创建我指定长度的字节数组（例如 3 个字节）的行上出现 OutOfMemoryError 失败。它必须错误地读取数字并尝试分配一个巨大的块。尽管如此，它确实设法将记录发送到映射器（以前的记录？不确定），它将它写入标准错误，以便我可以看到它。*记录开头*总是有太多字节：例如，如果文件是“\x00\x00\x00\x00\x03hey”，则映射器会看到“\x04\x00\x00\x00\x00\x00 \x00\x00\x00\x07\x00\x00\x00\x08\x00\x00\x00\x00\x03hey”（可重现的位，虽然我看不到任何模式）。

从[本次演讲](http://static.last.fm/johan/huguk-20090414/klaas-hadoop-1722.pdf)的第 5 页，我了解到流式传输有“loadtb”和“dumptb”子命令，它们可以在一个步骤中复制到 HDFS 或从 HDFS 复制和包装/解包序列文件中的类型化字节。当与“-inputformat org.apache.hadoop.mapred.SequenceFileAsBinaryInputFormat”一起使用时，Hadoop 会正确解压缩 SequenceFile，但随后会以完全相同的方式误解其中包含的 typedbytes。

此外，我找不到有关此功能的文档。2 月 7 日（我通过电子邮件发送给自己），它[在 Apache 上的 streaming.html 页面](http://hadoop.apache.org/docs/mapreduce/r0.21.0/streaming.html#Specifying+the+Communication+Format)中被简要提及，但这个 r0.21.0 网页已被删除[，r1.1.1 的等效页面](http://hadoop.apache.org/docs/r1.1.1/streaming.html)没有提及 rawbytes或打字字节。

**所以我的问题是：**在 Hadoop Streaming 中使用 rawbytes 或 typedbytes 的正确方法是什么？有没有人让它工作？如果是这样，有人可以发布食谱吗？对于任何想要在 Hadoop Streaming 中使用二进制数据的人来说，这似乎都是一个问题，这应该是一个相当广泛的群体。

PS 我注意到[Dumbo](https://github.com/klbostee/dumbo)、[Hadoopy](http://www.hadoopy.com/en/latest/)和[rmr](https://github.com/RevolutionAnalytics/RHadoop/wiki/rmr)都使用了这个特性，但是应该有一种方法可以直接使用它，而不需要基于 Python 或 R 的框架。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T08:37:55.613

好的，我找到了一个有效的组合，但这很奇怪。

1.  [按照文档](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/typedbytes/package-summary.html)或模仿[typedbytes.py](https://github.com/klbostee/typedbytes)在本地文件系统中准备一个有效的 typedbytes 文件。

2.  采用

    ```
    hadoop jar path/to/streaming.jar loadtb path/on/HDFS.sequencefile < local/typedbytes.tb 
    ```

    一步将 typedbytes 包装在 SequenceFile 中并将其放入 HDFS。

3.  采用

    ```
    hadoop jar path/to/streaming.jar -inputformat org.apache.hadoop.mapred.SequenceFileAsBinaryInputFormat ... 
    ```

    运行 map-reduce 作业，其中映射器从 SequenceFile 获取输入。请注意，`-io typedbytes`或*不*`-D stream.map.input=typedbytes`应该使用——明确要求 typedbytes 会导致我在问题中描述的误解。但不要害怕：Hadoop Streaming 在其二进制记录边界上拆分输入，而不是在其 '\n' 字符上。数据以“原始数据”形式到达映射器，由 '\t' 和 '\n' 分隔，如下所示：

     *1.  32位有符号整数，表示长度（注意：无类型字符）
    2.  具有该长度的原始二进制块：这是关键
    3.  '\t' （制表符...为什么？）
    4.  32位有符号整数，表示长度
    5.  具有该长度的原始二进制块：这是值
    6.  '\n' （换行符...？）* 
**   如果您想另外将原始数据从 mapper 发送到 reducer，请添加

    ```
    -D stream.map.output=typedbytes -D stream.reduce.input=typedbytes 
    ```

    到您的 Hadoop 命令行，并将映射器的输出和减速器的预期输入格式化为有效的类型字节。它们还交替用于键值对，但这次使用类型字符，没有 '\t' 和 '\n'。Hadoop Streaming 正确地在它们的二进制记录边界上拆分这些对，并按键分组。* 

 *我能找到的唯一文档是在`stream.map.output`HADOOP - [1722](https://issues.apache.org/jira/browse/HADOOP-1722)交换中，从 09 年 2 月 6 日开始。（之前的讨论考虑了一种不同的参数化格式的方法。）`stream.reduce.input`

这个秘籍没有为输入提供强类型：类型字符在创建 SequenceFile 并用`-inputformat`. 但是，它确实提供了在二进制记录边界处的拆分，而不是真正重要的 '\n'，以及映射器和化简器之间的强类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T08:41:05.377

在将数据流式传输到 Mapper 时，我们使用对拆分级别的数据进行 hexaencoding 解决了二进制数据问题。这将利用并提高操作的并行效率，而不是在节点上处理之前先转换数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T09:08:41.113

显然有一个用于流式传输的 JustBytes IO 模式的补丁，它将整个输入文件提供给 mapper 命令：

[https://issues.apache.org/jira/browse/MAPREDUCE-5018](https://issues.apache.org/jira/browse/MAPREDUCE-5018)*

# ruby-on-rails - 如何将字符串添加到符号？

> ID：15171515
> 
> 赞同：1
> 
> 时间：2013-03-02T06:26:48.057
> 
> 标签：ruby-on-rails, ruby

我仍在学习 Ruby，并在我的 RoR 应用程序上使用此代码：

```
<title><%= content_for?(:title) ? yield(:title):"" %> - Mysite</title> 
```

我想添加另一个静态词，`" - "`或者`" | "`，在`yield(:title)`。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:42:16.527

```
<title><%= content_for?(:title) ? "#{yield(:title)} -" : "" %> - Mysite</title> 
```

# c++ - 用于执行除法的 C++ 函数

> ID：15171517
> 
> 赞同：0
> 
> 时间：2013-03-02T06:26:49.680
> 
> 标签：c++

我试图制作一个没有 / 符号的除法函数

```
long  q(int nm1, int nm2)
{
  long q = 0;

   while ( num1 > num2)
    {
    some subtraction here    
    }
return q;

} 
```

这个想法是假设输入是有序的，第一个要除以第二个。这意味着从第一个数字中减去第二个数字，直到第二个数字小于第一个数字。

我尝试了许多不同的方法来做到这一点，但出于某种原因，我无法做到这一点。

现在我假设这个数字是正数并且不会返回除以零（我可以稍后通过调用我的其他函数来解决这个问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T06:30:23.833

> 这意味着从第一个数字中减去第二个数字，直到第二个数字小于第一个数字。

那有什么问题呢？

```
int div(int num, int den)
{
    int frac;
    for (frac = 0; num >= den; num -= den, frac++)
        ;

    return frac;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:23:26.647

你原来的帖子试图做的是**通过重复减法**算法进行除法。看看[维基百科](http://en.wikipedia.org/wiki/Division_algorithm)：

> 最简单的除法算法，历史上并入欧几里得元素，第 VII 卷，命题 1 中提出的最大公约数算法，仅使用减法和比较来找到给定两个正整数的余数

```
while  N ≥ D do
  N := N - D
end
return N 
```

只需在您的 while 循环中添加一个计数器来跟踪迭代次数（这是您想要返回的），并且在您的循环之后 N 将包含您的余数（如果它当然不是 0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:46:35.330

仅当 num 和 den 是整数值时，此代码才有效。

```
int main( int num, int den )
    {
        if(den==0)
        {
            return 1;
        }
        else
        {
            while(num!=0)
            {
                num = num - den;    
            }
        }
       return 0;         
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T06:57:23.397

只是稍微改进上述答案。使用模数

```
long div(int num, int den)
{
    int frac;
    int num2 = num;

    for (frac = 0; num2 >= den; num2 -= den, frac++)
        ;
// i needed the original num and den. 

  return ( (long) frac )+( num % den );

// casts frac to long then adds the modulus remainder of the values.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T11:25:56.153

只是一点优化：您不希望输入值具有线性时间复杂度

```
int div(int num, int den)
{
    int result = 0;
    int i;
    long long x;
    long long y;
    if (num < 0) return -div(-num, den);
    if (den < 0) return -div(num, den);
    if (num < den) return 0;

    x = num;
    y = den;
    i = 0;
    while((i < 32) && (x > (y << (i+1)))) i++;
    for(;i>0; i++)
    {
       if (x > (y << i))
       {
           x -= y;
           result += 1 << i; 
       }
    } 

    return result;
} 
```

# android - android - 为什么不同设备有不同的 Action_mask 值

> ID：15171521
> 
> 赞同：4
> 
> 时间：2013-03-02T06:27:32.993
> 
> 标签：android, multi-touch

我已经制作了一个应用程序，它在低于 4.0 版的设备上运行得非常好，或者我们可以说 ics，但在 ics 之上它不能正常工作。在我的应用程序中，我试图同时在两个按钮上进行多点触控，它在 4.0 版以下完美运行。action_mask 的值是 6 nd 5 on touch 和 off touch .. 而在 4.0 以上的版本中，它的值为 1、2、0。为什么会这样？

```
enter code here

@override
public boolean ontouch(Event ev , MotionEvent event)    
{
    int actionResolved = event.getAction() & MotionEvent.ACTION_MASK;
    int action = paramMotionEvent.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK;
//  int actionShift = paramMotionEvent.getAction() & MotionEvent.ACTION_POINTER_INDEX_SHIFT;
    Log.i("fil", "action resolved" +actionResolved);
    if(i==MotionEvent.ACTION_DOWN)
    {

        Log.i("fil", "action down");
        Log.i("fil", "action down value" +MotionEvent.ACTION_DOWN);
    }

    if(actionResolved == 5);
    {

        Log.i("fil", "action resolved" +actionResolved);
        scannerview1.startAnimation(anim1);
        scannerView2.startAnimation(anim1);

    }   

    if(actionResolved ==6)
            {

            scannerView2.clearAnimation();
            scannerview1.clearAnimation();      
        }

return true;         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:47:48.580

我已经通过在行动中使用指针 id 解决了上述问题。但此代码在 4.0 版以下不可用

这是我的代码

```
@override
public boolean ontouch(Event ev , MotionEvent event)    
{
    switch (event.getAction() & MotionEvent.ACTION_MASK) 
    {               
        case MotionEvent.ACTION_DOWN:
            Log.i("D3", "pid" +event.getPointerId(0));
            //Log.i("D3", "pid" +event.getPointerId(1));
            if(event.getPointerId(0)==0){

            }
            if(event.getPointerId(0)==1) 
            {
                scannerview1.startAnimation(anim1);
                scannerView2.startAnimation(anim1);
            }
            break;
        case MotionEvent.ACTION_UP:
            scannerView2.clearAnimation();
            scannerview1.clearAnimation();
            break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:52:16.530

代替

```
if(actionResolved == 5); 
```

采用

```
if(actionResolved == ACTION_POINTER_1_DOWN); 
```

常量值可能并且确实在 API 版本之间发生变化。

另请注意，`MotionEvent.ACTION_MASK`已弃用。您应该改用“MotionEvent.ACTION_POINTER_INDEX_MASK”。

[http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_POINTER_INDEX_MASK](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_POINTER_INDEX_MASK)

# web-applications - 网页如何从用户的串口读取 - 在 2017 年？

> ID：15171522
> 
> 赞同：19
> 
> 时间：2013-03-02T06:27:35.210
> 
> 标签：web-applications, com, serial-port, activex

我必须从头开始重新实现现有系统。

在某一时刻，当用户导航到某个网页时，服务器必须从用户的串行端口读取数据。

目前，网页有一个ActiveX控件；当页面加载时，ActiveX 控件调用到用户 PC 上的 COM DLL，该 COM DLL 从串行端口读取数据。

该系统已有 10 年历史。有什么“更好”的方法可以实现吗？

例如，技术在过去十年中不断发展。而且这个解决方案似乎只适用于 MS IE，它现在的市场份额约为 26%（它在 2013 年，当我上次更新这个问题时。截至 2107 年 2 月，MS IE 有 3-4%，Edge 有1-2%。由于 Edge 也是 MS 产品，它***可能***支持 Active X - 我没有尝试过。Otoh，因为它是全新的，它很有可能不支持）。

HTML 5 是否提供了任何新的可能性？那么像[Cordova](https://cordova.apache.org/)这样的产品呢？

还有其他可能吗？

我可以添加一个 Raspberry Pi 来通过串行端口进行读取并让浏览器应用程序通过 RESTful 服务与之通信吗？

* * *

[更新] @ EuroMicelli 说“我将假设您有充分的理由从网络浏览器而不是本机应用程序运行您的应用程序”。我不知道当最初的项目计划时我不在身边（设计它的公司现在已经不复存在了）。

也许他们不希望最终用户直接与数据库交互？也许“基于浏览器”是当时的一个新流行词？我个人对桌面应用程序没有任何问题（因为我发现它们更容易实现），但也许我们应该考虑保留基于浏览器的应用程序？（此外，我可以自己处理桌面应用程序；只有基于浏览器的 COM 端口读取才能让我提供奖励 ;-)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T14:24:15.583

可以肯定的一件事是，如果不在本地机器上安装一些特殊的二进制文件（并以适当的权限运行它），您将永远无法与本地机器硬件通信。但是，这并不意味着您必须使用 ActiveX 组件并坚持使用 Internet Explorer。当然，您也可以为市场上的每个浏览器开发一个组件。

我建议另一种方法：

*   编写一个 Windows 服务（我假设你的机器运行 Windows），用必要的权限配置它。无论如何，您*都必须*在机器上安装一些东西。该服务可以用任何语言实现。
*   向其添加 HTTP(S) 服务器功能。你可以在这里使用很多技术，从 WCF 到 WebAPI。
*   通过 HTTP 发明您自己的通信协议。你可以使用 JSON、Ajax、WebSockets、SignalR 等。
*   编写一个与市场上大多数浏览器兼容的 Javascript 文件 - 所以您只需编写一次 - 这将成为您的串行 COM API。您只需一个代码库即可支持所有具有 Javascript 和 Ajax 功能 ( [XmlHttpRequest](http://www.w3.org/TR/XMLHttpRequest/) ) 的浏览器。

这是它的样子： ![在此处输入图像描述](../Images/5d59c4d6f8e7c357f2cdd135bfce7027.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-06T00:57:55.840

为了最大限度地减少客户端机器上的外部库或插件需求，我会编写一个**Java Applet**。

**摘要** *（包括实现它所需的大部分文档的链接）*****：****

 **1.  确保您的客户端已安装 Java（[大多数已经](http://www.statowl.com/java.php)安装，如果没有，浏览器可以安装它）*（这是您可能需要某些客户端使用此方法的**唯一安装）***
2.  选择一个不需要任何外部安装的 Java 串口库，比如[PureJavaComm](http://www.sparetimelabs.com/purejavacomm/purejavacomm.php)
3.  编写一个非常简单的[Java 小程序](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html)，提供公共方法来读取串口
4.  [对您的小程序进行签名](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html)，使其被授予所需的[系统访问权限](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#doPrivileged(java.security.PrivilegedAction))
5.  在您的网页中包含小程序并[直接从 JavaScript 调用公共方法](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)

**更多细节：**

根据[StatOwl](http://www.statowl.com/java.php)的说法，大约三分之二的机器已经安装了所需的 Java 框架，因此您甚至可能不需要要求您的客户提供任何额外的基础设施。如果你这样做了，至少你要求的是（[在大多数情况](http://www.us-cert.gov/ncas/alerts/TA13-051A)下）维护良好的软件，人们知道并且不会太怀疑。而且，大多数浏览器应该能够提示您的用户在缺少 Java 框架时自动安装它。

您可以在 Java 中使用几个不同的库来访问串行端口。[不过， PureJavaComm](http://www.sparetimelabs.com/purejavacomm/purejavacomm.php)似乎是少数不需要外部代码即可运行的公司之一。具体来说，在 Windows 上，它们的[WinAPI](https://github.com/nyholku/purejavacomm/blob/master/src/jtermios/windows/WinAPI.java) Java 类使您可以直接访问 COM 端口，包括它们的所有设置，只需调用已安装的 Windows 库即可。由于 PureJavaComm 是一个纯 Java 库，您可以将它与您的小程序打包在一个 .jar 文件中，浏览器会自动下载该文件，因此无需安装任何内容。

然后，您可以编写一个最小的 Java Applet（总共可能只有大约 50-100 行），它定义了公共方法来执行您需要的串行端口访问，然后您可以轻松地直接从 JavaScript 调用：[Invoking Applet Methods From JavaScript Code](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)

您唯一需要确保的是您[签署了您的小程序](http://docs.oracle.com/javase/1.5.0/docs/guide/plugin/developer_guide/rsa_signing.html)并将您的串行端口代码包装在[doPrivileged(...)](http://docs.oracle.com/javase/7/docs/api/java/security/AccessController.html#doPrivileged(java.security.PrivilegedAction))调用中，以便从 JVM 沙箱中授予它所需的系统访问权限。为此，您可以获取已购买的 SSL 证书（如果您的服务使用 https，您可能已经拥有）或生成您自己的证书。如果您自己生成，则会提示用户是否要信任您的小程序，但他们可以选择“始终信任”，因此这只是一个一次性复选框-然后单击确定。但除此之外，这应该是一个完全透明的解决方案，将对您的用户体验的影响降至最低。

**备选方案 1：**

另一种选择是，简单地完全放弃 Web 界面，而是提供一个 Java 程序，用户可以使用[JNLP (Java Web Start) 直接从您的网站轻松运行（无论是否安装它）](http://en.wikipedia.org/wiki/Java_Web_Start)。

**备选方案 2（可能仅限 Windows）：**

我想您也可以使用[Microsoft Silverlight](http://www.microsoft.com/silverlight/)，它似乎也[被广泛部署](http://www.statowl.com/silverlight.php)：

[与 Silverlight 5 的串行通信（COM 端口）](https://stackoverflow.com/questions/8989538/serial-communication-with-silverlight-5-com-port)

有些人可能认为它比 Java Applets 更“现代”，但它的跨平台可能更少。

从 JavaScript 调用您的 Silverlight 代码似乎也更复杂一些，但有可能：

[通过 JavaScript 使 Silverlight 可编写脚本](http://msdn.microsoft.com/en-us/library/cc645085%28v=vs.95%29.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-11T22:46:40.957

仅举另一个（更像“物联网”）选项：外部硬件。

根据用例，您可以使用外部低成本设备，如 arduino 微控制器或 raspberry-pi 嵌入式 pc。

在这类设备上构建一个简单的串行到 Web 服务的桥并不是很困难。您可以使用这样的一些项目，例如：[https ://code.google.com/p/serwebproxy/](https://code.google.com/p/serwebproxy/)

在这种情况下，所有低级别的东西都由外部硬件处理，并由类似 Web 服务的接口（通过 get/post）提供给您。

另一个优点是运行应用程序的 pc 不需要串行端口（这在某些系统上变得非常罕见）。

从您的浏览器应用程序中，您可以通过简单的 ajax 调用查询嵌入式设备上的 Web 服务。浏览器根本不需要任何插件，该解决方案可以跨平台工作，并且是通用的，并且在不久的将来独立于浏览器技术的发展。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T05:02:04.273

可能不是。

我将假设您有充分的理由从 Web 浏览器而不是本机应用程序运行您的应用程序。我可以想到几个场景，我认为这是一个合理的商业决策。

即使在所有现代进步的今天，Web 浏览器仍然是花哨的交互式文档查看器，而不是通用的运行时环境。即使是最先进的功能（如 websockets）也被引入来实现复杂的客户端-服务器通信，而不是因为某种普遍的兴趣，有一天能够从浏览器中完成所有事情。

可能存在一些本机可能的专用环境（Chrome OS 是吗？），但这不是通用解决方案。我不知道通过浏览器标签或脚本打开串行端口的现有或建议标准。这意味着您将需要某种相当低级的插件技术，例如 ActiveX。如果您只支持 IE，那么 ActiveX 是一个非常好的解决方案，特别是如果它已经编写并且可以工作。

大多数从浏览器寻找串行端口访问的人可能正在从他们指定（构建/销售？）和控制的某些专有硬件进行数据采集，例如实验室设备、条形码扫描仪、科学仪器等。我认为在这一点上指定所需的浏览器也是完全可以接受的。专门的应用程序通常会这样做。

如果您仍想查看更广泛的浏览器支持，请尝试查看针对此问题的建议解决方案：[Communicating with Serial Port using Adob​​e Flash](https://stackoverflow.com/questions/1915424/communicating-with-serial-port-using-adobe-flash)。我没有使用过这个产品的经验，但如果它有效的话，它应该能让大多数浏览器用一个代码库做你想做的事情，这和你希望的一样好。

无论你最终做什么，它肯定会涉及某种形式的第三方插件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-10T21:47:12.720

您可以使用 Web USB - 但浏览器兼容性（目前）非常低 - Chrome 61 似乎就是这样。

这种方法的主要好处是，将 USB 设备插入浏览器机器。显然这也适用于 Android 64 的 Chrome（未经测试）。

API 位于[https://wicg.github.io/webusb/](https://wicg.github.io/webusb/)。

有关教程，请参阅[https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web](https://developers.google.com/web/updates/2016/03/access-usb-devices-on-the-web)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-10T21:43:26.163

通过 Node JS 使用 serialport 包作为服务器是一种选择。这适用于 Windows，显然也适用于 Linux 和 OSX。请参阅[https://github.com/node-serialport/node-serialport](https://github.com/node-serialport/node-serialport)。

这是我用来通过 USB 读取微比特通信到浏览器的解决方案。我确实必须使用以下命令重建 Windows (10) 的驱动程序：

*   npm install --global --production windows-build-tools
*   npm install serialport --build-from-source

我在下面粘贴了一些代码以供参考：

```
const serialport = require('serialport')

// list serial ports:
const find_microbit = (error, success) => {
  serialport.list((err, ports) => {
    if (err) {
      error(err)
    } else {
      let comName = null
      ports.forEach((port) => {
        if ((port.vendorId == '0D28') && (port.productId == '0204')) {
          comName = port.comName
        }
      })
      if (comName != null) {
        success(comName)
      } else {
        error('Could not find micro:bit.')
      }
    }
  })
}

exports.get_serial = (error, success) => {
  find_microbit(error, (comName) => {
    let serial = new serialport(comName, {baudRate: 115200, parser: serialport.parsers.readline('\n')}, (err) => {
      if (err) {
        error(err)
      } else {
        success(serial)
      }
    })
  })
}
/* e.g.
get_serial((err)=>{console.log("Error:" + err)},
    (serial)=>{
        serial.on('data', (data) => {
            let ubit = JSON.parse(data)
            if (ubit.button == 'a') {
                console.log('Button A Pressed')
            }
            if (ubit.button == 'b') {
                console.log('Button B Pressed')
            }
            if (ubit.ir) {
                console.log('Visitor detected')
            }
        })
    })
    */ 
```

这种方法有效 - 对我来说 - 但让它工作起来可能很耗时。在我看来，这不是一个明显或简单的解决方案。它需要相当多的技术知识——而且，我觉得，比它应该的要复杂和“棘手”得多。

特别是 - 重建库不是我在使用 Node JS 时期望做的事情。一种可能的影响是您需要为不同的平台重建串行端口二进制文件。**

# javascript - 覆盖特定对象内的本机方法和对象

> ID：15171529
> 
> 赞同：0
> 
> 时间：2013-03-02T06:28:39.573
> 
> 标签：javascript

我正在尝试为对象内部的函数覆盖一个名为“localStorage”的本机方法。

这是我正在尝试做的事情的要点：

```
function SomeObject(){
   this.localStorage = "aaa"; //block access to localStorage for functions INSIDE this object.
      ... (some more code here)
   _testRun(){
      window.testA = localStorage; //chose to store the instance on a window (global-like) object
   }
   this.testRun = function(){ _testRun(); };
   this.testRun2 = function(){ window.testB = localStorage;};v
}
var a = new SomeObject();
a.testRun();
a.testRun2();

(after this, when I look up window.testA and window.testB, they both point to the Native localStorage, not the custom one inside the SomeObject.) 
```

顺便说一句，我不想​​覆盖整个文档的本机函数。（即可能在对象外使用本机 localStorage）

关于如何做到这一点的任何建议/解决方案？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:57:58.507

尝试添加`window.localStorage`and`this.localStorage`而不仅仅是`localStorage`

```
function SomeObject(){
   this.localStorage = "aaa"; //block access to localStorage for functions INSIDE this object.
      ... (some more code here)
   _testRun(){
      window.testA = window.localStorage; //chose to store the instance on a window (global-like) object
   }
   this.testRun = function(){ _testRun(); };
   this.testRun2 = function(){ window.testB = this.localStorage;};
} 
```

# java - Java：实现自己的链接列表 -> 在哪里定义 hasNext()、next()、remove()？

> ID：15171530
> 
> 赞同：2
> 
> 时间：2013-03-02T06:28:41.840
> 
> 标签：java, iterator, linked-list, iterable

**家庭作业：请指导我帮助指导我而不发布完整的代码**

我的老师让我们实施一个 LinkedList 作为家庭作业。这是该类外壳的标头：

```
public class LinkedList<T> implements Iterable<T>, Iterator<T> 
```

请注意，他正在实现 Iterable 和 Iterator 接口。然后我明白我需要在我的类中实现一个 iterator()、hasNext()、next() 和 remove() 方法。但令我困惑的是，他没有将 Iterator 接口所需的方法放在单独的内部类中。以下所有方法都在 LinkedList 类中定义：

```
/*
 * (non-Javadoc)
 * 
 * @see java.lang.Iterable#iterator()
 */
@Override
public Iterator<T> iterator()
{
    return null;
}

/*
 * (non-Javadoc)
 * 
 * @see java.util.Iterator#hasNext()
 */
@Override
public boolean hasNext()
{
    return false;
}

/*
 * (non-Javadoc)
 * 
 * @see java.util.Iterator#next()
 */
@Override
public T next()
{
    return null;
}

/*
 * (non-Javadoc)
 * 
 * @see java.util.Iterator#remove()
 */
@Override
public void remove()
{

} 
```

iterator() 方法不应该返回如下内容：

```
public Iterator<T> iterator()
{
    return new MyClassIterator(front);
} 
```

Where`MyClassIterator()`用`hasNext()`、`next()`和`remove()`方法定义。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T07:54:24.030

这确实是一条评论，但必须作为答案发布，因为评论格式太长且难以阅读。

`Iterable`执行实施时要非常小心`Iterator`。可以同时运行多个迭代器`Iterable`。下面是一个演示这个的测试程序：

```
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class Test {
  public static void main(String[] args) {
    List<String> myList = Arrays.asList(new String[] { "aaa", "bbb", "ccc" });
    Iterator<String> iter1 = myList.iterator();
    System.out.println("iter1: " + iter1.next());
    System.out.println("iter1: " + iter1.next());
    Iterator<String> iter2 = myList.iterator();
    for (String s; iter2.hasNext();) {
      s = iter2.next();
      System.out.println("iter2: " + s);
    }
    System.out.println("iter1.hasNext(): " + iter1.hasNext());
    System.out.println("iter2.hasNext(): " + iter2.hasNext());
    System.out.println("iter1: " + iter1.next());
  }
} 
```

它打印：

```
iter1: aaa
iter1: bbb
iter2: aaa
iter2: bbb
iter2: ccc
iter1.hasNext(): true
iter2.hasNext(): false
iter1: ccc 
```

使用该`Iterable`工具的风险`Iterator`在于，您最终会得到两个迭代器的一个迭代器状态，并且推进`iter2`会影响`iter1`.

当然，干净的解决方案是在您的`Iterable`实现中拥有一个私有类来实现`Iterator`，并为每次`iterator()`调用创建一个新实例。`iter1`然后`iter2`引用不同的对象，并改变`iter2`不影响的状态`iter1`。

# php - 如果 page_id 为 3，则在页面上显示一些帖子，否则显示一些不同的帖子

> ID：15171536
> 
> 赞同：0
> 
> 时间：2013-03-02T06:29:03.810
> 
> 标签：php, wordpress-theming, wordpress

我只使用 page.php，它是 wordpress 中页面的默认模板，我的页眉页脚和侧边栏在所有页面上都是相同的，但主要区域内容正在改变，我希望 wordpress 为每个特定页面拉取。例如，如果页面是关于我们的......它应该显示关于我们类别的帖子等等......

* * *

我想知道我是否可以通过条件语句来实现这一点，或者我必须为每个页面制作单独的模板。

我尝试了类似...

```
<?php if (page_id ==11 ):
 // post loop to display all fetch all post of category id 4
  $page_query = new WP_Query('post_type=post&cat=4'); ?>
<?php  while ($page_query->have_posts()) :
 $page_query->the_post(); ?>
<a href="<?php the_permalink() ?>" rel="bookmark"><?php the_title(); ?></a>
<?php if ( has_post_thumbnail() ) {
    the_post_thumbnail('thumbnail');
} ?>
<?php the_content(); ?>
<?php endwhile;  endif;

wp_reset_postdata();

?> 
```

这是我在 page.php 上的循环，但它似乎不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:38:04.677

哇...不确定这是否有帮助，但比您目前拥有的要整洁得多

```
<?php
if (page_id == 11){
   $page_query = new WP_Query('post_type=post&cat=4');
    while ($page_query->have_posts()){
        $page_query->the_post();
        echo "<a href=/"". the_permalink() ."/" rel=/"bookmark/"><".the_title()."</a>";
        if ( has_post_thumbnail() ) {
            the_post_thumbnail('thumbnail');
        }
        the_content();
    }
}
wp_reset_postdata();
?> 
```

尽管如此，您仍不清楚什么不起作用，因此很难说出什么不起作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-26T07:48:45.797

我看到这从未得到解决，我也无事可做，所以我希望这将在不久的将来帮助某人。

如果您想显示与“关于我们”页面相关的帖子，您应该将该类别命名为页面名称。通过这样做，您可以将上面的代码更改为以下内容：

```
 global $post;
    $pagename = get_the_title($post->ID);

    $args = array(
        'post_type' => 'post',
        'category_name' => $pagename,
    );
    $page_query = new WP_Query($args);
         while ( $page_query->have_posts() ) : $page_query->the_post();?>
                <a href="<?php the_permalink(); ?>" rel="bookmark">
                    <?php the_title()?>
                </a>
             <?php
                if ( has_post_thumbnail() ) {
                     the_post_thumbnail('thumbnail');
                }
                the_content();

          endwhile; 
```

# google-chrome - 如何从 Chrome 检查器获取原始 XPath？

> ID：15171537
> 
> 赞同：2
> 
> 时间：2013-03-02T06:29:26.513
> 
> 标签：google-chrome, xpath, screen-scraping

当我使用 Google Chrome 超酷的元素检查器查找元素的 XPath 时，它会返回原始 HTML 中不存在的内容，例如`<tbody>`.

显然，Chrome 推断出某些事情来使页面渲染更流畅；没关系。但我需要将 XPath 用于 Chrome 之外的脚本。所以我通常会得到 Chrome 的 XPath，然后使用反复试验，直到 XPath 在其他上下文中实际工作（在我的例子中，是用 Python 或 Node.js 编写的脚本）。

在给定网页中查找 HTML 元素的“原始”XPath 有什么更好的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:25:03.363

不要使用完整的 xpath。如果这样做，只要移动单个元素，您的脚本就会中断。最好找到最简单的表达方式，为您提供您所追求的东西。例如，此页面的标题可能是：`//h1[@itemprop="name"]`甚至只是`//h1`. 如果您的 html 解析器让您使用 css 选择器，那就更好了 - 尝试使用这些选择器。

# c# - 未使用 gmail a/c 从 C# 发送电子邮件

> ID：15171538
> 
> 赞同：0
> 
> 时间：2013-03-02T06:29:40.050
> 
> 标签：c#, email, smtp

未使用 gmail smtp 设置从 C# 代码发送电子邮件。它给出了“服务器需要安全连接或客户端未通过身份验证”的错误。

电子邮件和密码与登录时使用的相同。

以下是完整的代码。

```
 MailMessage mail = new MailMessage("<from>","<to>");

            SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
            client.Credentials = new NetworkCredential("<email>", "<password>");
            client.EnableSsl = true;
            client.DeliveryMethod = SmtpDeliveryMethod.Network;
            client.Timeout = 20000;
            client.UseDefaultCredentials = false;

            mail.Body = "Test email from C# Code";
            mail.Subject = "Test Email";

            Console.WriteLine("Attempting to Send Email");

            try {
                client.Send(mail);
                Console.WriteLine("Email sent... ");
            }
            catch (System.Net.Mail.SmtpFailedRecipientException ex) {
                Console.WriteLine("Could not send email to the mentioned recipient" + ex.Message);
            }
            catch (System.Net.Mail.SmtpException ex) {
                Console.WriteLine("Could not send Email..\n" + ex.Message + "\n" + ex.StackTrace);                
            }
            Console.ReadLine(); 
```

任何帮助表示赞赏:) - 亲切的问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:42:16.830

您必须交换以下行。

```
client.Credentials = new NetworkCredential("<email>", "<password>");
client.UseDefaultCredentials = false; 
```

您必须首先设置 UseDedaultCredentials 属性。

```
client.UseDefaultCredentials = false;    
client.Credentials = new NetworkCredential("<email>", "<password>"); 
```

就是这样，它应该工作。

# python - python 装饰器参数

> ID：15171555
> 
> 赞同：0
> 
> 时间：2013-03-02T06:31:33.507
> 
> 标签：python, python-2.7, python-decorators

python装饰器函数是否支持参数a如何实现

```
def decorator(fn, decorArg):
    print "I'm decorating!"
    print decorArg
    return fn

class MyClass(object):
    def __init__(self):
        self.list = []

    @decorator
    def my_function(self, funcArg = None):
        print "Hi"
        print funcArg 
```

运行时出现此错误

```
TypeError: decorator() takes exactly 2 arguments (1 given) 
```

我试过 @decorator(arg) 或 @decorator arg 。它也不起作用。到目前为止，我想知道这是否可能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:04:25.153

我想你可能想要这样的东西：

```
class decorator:
    def __init__ (self, decorArg):
        self.arg = decorArg

    def __call__ (self, fn):
        print "I'm decoratin!"
        print self.arg
        return fn

class MyClass (object):
    def __init__ (self):
        self.list = []

    @decorator ("foo")
    def my_function (self, funcArg = None):
        print "Hi"
        print funcArg

MyClass ().my_function ("bar") 
```

或者使用 BlackNight 指出的嵌套函数：

```
def decorator (decorArg):
    def f (fn):
        print "I'm decoratin!"
        print decorArg
        return fn
    return f 
```

# c# - 在 C# 中操作关键流缓冲区的最有效和最可靠的方法是什么？

> ID：15171556
> 
> 赞同：2
> 
> 时间：2013-03-02T06:31:34.977
> 
> 标签：c#, caching, buffer

我正在用 c# 开发一个应用程序，它处理来自队列（如缓冲区）的大量传入和传出数据流。缓冲区需要是磁盘中的某种文件。数据将经常写入缓冲区（我说的是每 10 毫秒一次！）。写入的每个数据将在缓冲区中创建 1 条记录/行。

同一程序还将读取缓冲区（逐行）并处理缓冲的数据。在处理完一行/记录后，缓冲数据必须立即从缓冲文件中删除该行/记录，以防止它在系统重新启动时重新处理缓冲数据。这种读取和删除也将以非常快的速度完成（比如每 10 毫秒左右）。

所以它是一个系统，它可以写入、读取和清除已读取的内容。如果程序决定不处理缓冲的数据，这个缓冲区的大小可能会增长到 5GB (GIGABYTE)，因此变得更加困难。

**所以我的问题是：我应该使用什么样的方法来处理这种缓冲机制？我看过使用 SQlite 和简单的文本文件，但它们在处理大尺寸文件时可能效率低下，或者在处理并发插入、读取和删除时可能不太好。

无论如何，非常感谢任何建议。提前感谢您提供的任何答案！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T06:38:58.133

你听起来像是在描述消息队列

有 MSMQ、ZeroMQ、RabbitMQ 和其他几个。

这是 MSMQ 上的一堆链接：

*   [http://www.techrepublic.com/article/use-microsoft-message-queuing-in-c-for-inter-process-communication/6170794](http://www.techrepublic.com/article/use-microsoft-message-queuing-in-c-for-inter-process-communication/6170794)
*   [http://support.microsoft.com/KB/815811](http://support.microsoft.com/KB/815811)
*   [http://www.csharphelp.com/2007/06/msmq-your-reliable-asynchronous-message-processing/](http://www.csharphelp.com/2007/06/msmq-your-reliable-asynchronous-message-processing/)
*   [http://msdn.microsoft.com/en-us/library/ms973816.aspx](http://msdn.microsoft.com/en-us/library/ms973816.aspx)
*   [http://www.c-sharpcorner.com/UploadFile/rajkpt/101262007012217AM/1.aspx](http://www.c-sharpcorner.com/UploadFile/rajkpt/101262007012217AM/1.aspx)

这是[ZeroMQ（或 0MQ）](http://www.zeromq.org/)

这是[RabbitMQ](http://www.rabbitmq.com/)

# delphi - Delphi 如何与 Detours 库互操作？

> ID：15171559
> 
> 赞同：4
> 
> 时间：2013-03-02T06:31:45.383
> 
> 标签：delphi, detours

我正在寻找 Delphi 示例，但我只能找到 C++ 示例代码。

例如，如何在 Delphi 中定义下面的钩子？

```
DETOUR_TRAMPOLINE(int   WINAPI SetScrollInfoT(HWND, int, LPCSCROLLINFO, BOOL), SetScrollInfo) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T08:44:53.757

如果您只需要在自己的进程中挂钩，您可以查看 Detours 库。我最近在作者同意的情况下将它包含在我的 Cromis 库中。

你可以在[这里](http://www.cromis.net/blog/downloads/)找到它。只需下载整个库并使用 Cromis.Detours。它适用于 32 位和 64 位，并且编写得非常好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T03:01:53.947

谢谢大家，我终于得到了这个[Ring3HookLibrary](http://www.delphibasics.info/home/delphibasicscounterstrikewireleases/ring3hooklibrary)

# php - 如何使用php中的sms api从mysql数据库向手机号码发送批量短信

> ID：15171564
> 
> 赞同：0
> 
> 时间：2013-03-02T06:32:37.357
> 
> 标签：php, mysql, api, sms

嗨，我正在尝试使用 php 中的批量短信 api 发送批量短信我是新手，所以我不太了解这个 bt 我通过谷歌找到了一些脚本，但是当我尝试发送短信时，它显示错误“不DATA RECIEVED" 谁能帮我这里是 m 脚本

```
<?php

    if (isset($_POST["submit"])) {

         require("includes/config.php");
         require("includes/dbconnect.php");
         require("includes/functions.php");

        $tourdb = DBSUFFIX . $_SESSION["cono"] . "_" . $_SESSION["tourname"];
        mysql_select_db($tourdb);

        $message = substr($_POST["sms"], 0, 160);

        $cond = "";
        if (!empty($_POST["district"])) {
            $district = trim($_POST["district"]);
            $cond .= "AND `district` = '$district'";
        }

        if (!empty($_POST["state"])) {
            $state = trim($_POST["state"]);
            $cond .= "AND `state` = '$state'";
        }

        if (!empty($_POST["for"])) {
            $for = trim($_POST["for"]);
            $cond .= "AND `visitingfor` = '$for'";
        }

        $ccond = "";
        if (!empty($_POST["Airline"])) {
            $air = trim($_POST["Airline"]);
            $ccond .= "AND `airline_code` = '$air'";
        }

        if (!empty($_POST["bjdate"])) {
            $date1 = trim($_POST["bjdate"]);
            $ccond .= "AND `dept_date` = '$date1'";
        }

        if (!empty($_POST["jbdate"])) {
            $date2 = trim($_POST["jbdate"]);
            $ccond .= "AND `dept_date` = '$date2'";
        }

        if (!empty($_POST["siscono"])) {
            $siscono = trim($_POST["siscono"]);
            $cond .= "AND `company` = '$siscono'";
        }

        if (!empty($_POST["batch"])) {
            $batch = $_POST["batch"];
            $ccond .= " AND `batchno` = '$batch' ";
        }

        $hajicond = "";
        if (!empty($_POST["fromhaji"]) && !empty($_POST["tohaji"])) {
            $fromhaji = $_POST["fromhaji"];
            $tohaji = $_POST["tohaji"];
            $hajicond = " AND `hajino` BETWEEN '$fromhaji' AND '$tohaji'";
        }

        $paxcond = "";
        if (!empty($_POST["frompax"]) && !empty($_POST["topax"])) {
            $frompax = $_POST["frompax"];
            $topax = $_POST["topax"];
            $paxcond = " AND `paxid` BETWEEN '$frompax' AND '$topax'";
        }

        $msg = $_POST["sms"];

        $ctr = 0;
        $query = mysql_query("SELECT RIGHT(`mobile`,10) as `mobile`  FROM `pax` WHERE LENGTH(`mobile`) >= 10 AND `paxid` IN (SELECT `paxno` FROM `airline_detail` WHERE paxno IS NOT NULL $ccond) $cond $hajicond $paxcond ") or die(mysql_error());
            while ($pax = mysql_fetch_array($query)){
                $ctr++;
                $to.= "$pax[mobile],";
             }  

    $to.= "8652372200";

    $user = "****";
    $password = "t*****"; 
    $mobilenumbers = "$to";
    $message = "$msg";
    $senderid = "****";
    $url = "http://tran.mobilogi.com/api/httpapi.php";
    $message = urlencode($message);
    $ch = curl_init();
    echo "$user";
    if (!$ch) {
        die("Couldn't initialize a cURL handle");
    }
    $ret = curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "username=$user&password=$password&to=$mobilenumbers&sender=$senderid&message=$message");

    $ret = curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $curlresponse = curl_exec($ch);
    if (curl_errno($ch))
        echo 'curl error : ' . curl_error($ch);

    if (empty($ret)) {

        die(curl_error($ch));
        curl_close($ch); 
    } else {
        $info = curl_getinfo($ch);
        curl_close($ch);

        echo $curlresponse;
        }

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:20:05.123

PHP或javascript中没有可以直接发送短信的功能。SMS 基本上基于[短消息点对点 (SMPP) 协议](http://en.wikipedia.org/wiki/Short_Message_Peer-to-Peer)，因此您无法直接以编程方式发送短信。是的，您可以使用 smsgateway 或现有的 api，您可以在其中从 php 发出 http 请求。有很多短信服务提供商，比如增值服务提供商，还有很多免费和开源的短信网关，比如 kannel，您可以使用它们来发送/接收短信，或者您也可以配置[自己的网关](http://www.x11.net/wiki/index.php/Setting_up_an_SMS_Gateway)。

您需要一个第三方来发送您的消息，并且您还必须支付一些费用才能发送它们。我自己没有尝试过，但是这个关于通过 HTTP 发送 SMS 的教程似乎是一个不错的方法。它将使您能够

```
Use PHP and the HTTP protocol to send text-messages from your website through an SMS gateway. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T19:33:18.160

您可以使用[我们的 API](https://developer.wavecell.com)。由于您已经通过[curl 库](http://php.net/curl)使用 http 请求，因此使用我们为批量短信请求提供的两个选项之一是没有问题的（例如，请参阅[此答案](https://stackoverflow.com/a/16920588/1943849)）：

## 完整形式

当您描述要发送的每条消息时，所有遗漏的内容都将从模板中获取：

`POST /sms/v1/{subAccountId}/many`

```
{
  "clientBatchId": "Demo#1001",
  "messages": [
    {
      "destination": "6598760001"
    },
    {
      "destination": "659876002",
      "source": "SenderId2",
      "clientMessageId": "id_100001"
    },
    {
      "destination": "509750003",
      "country": "FR",
      "source": "SenderId3",
      "text": "Custom message: สวัสดี",
      "encoding": "UCS2",
      "clientMessageId": "id_100002"
    }
  ],
  "template": {
    "source": "DefaultSenderId",
    "text": "Default message for all phone numbers"
  }
} 
```

## 紧凑的形式

当您仅枚举电话号码而其他所有内容都来自模板时：

`POST /sms/v1/{subAccountId}/many/compact`

```
{
  "destinations": [
    "6598760000",
    "+659870001",
    "tel+659870002",
    "+33(509)758-000"
  ],
  "template": {
    "source": "BRAND",
    "text": "Your message for all clients"
  }
} 
```

查看本[教程](https://developer.wavecell.com/v1/tutorials/api-send-sms-single)以更顺畅地深入了解 API。

# asp.net - 为什么我的部署站点引用它创建的本地目录？

> ID：15171568
> 
> 赞同：1
> 
> 时间：2013-03-02T06:33:34.797
> 
> 标签：asp.net, sql-server-2005

我正在部署到 IIS 6.0，这不是一项简单的任务。我终于设法连接到数据库（SQLServer 2005），但仅限于登录（ASP.NET 成员资格）。一旦我尝试单击另一个安全页面，数据库连接就会自动消失。这是次要问题。

这是我的错误信息：

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5009598
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +123
   System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior) +166
   System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) +115
   DataAccess.IntranetTableAdapters.user_in_rolesTableAdapter.GetUsersInRoles() in C:\Users\me\Dropbox\Projects\MS\customer\DataAccess\CustomerIntranet.Designer.cs:2407
   BusinessClasses.RoleProvider.GetRolesForUser(String username) in C:\Users\me\Dropbox\Projects\MS\customer\BusinessClasses\RoleProvider.cs:86
   System.Web.Security.RolePrincipal.IsInRole(String role) +182
   System.Web.Configuration.AuthorizationRule.IsTheUserInAnyRole(StringCollection roles, IPrincipal principal) +132
   System.Web.Configuration.AuthorizationRule.IsUserAllowed(IPrincipal user, String verb) +256
   System.Web.Configuration.AuthorizationRuleCollection.IsUserAllowed(IPrincipal user, String verb) +201
   System.Web.Security.UrlAuthorizationModule.OnEnter(Object source, EventArgs eventArgs) +8886509
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

特别是我正在查看这两行并想知道为什么我的本地计算机目录路径会出现在这个部署在远程服务器上的错误消息中。

```
 System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) +115
   DataAccess.IntranetTableAdapters.user_in_rolesTableAdapter.GetUsersInRoles() in C:\Users\me\Dropbox\Projects\MS\customer\DataAccess\CustomerIntranet.Designer.cs:2407
   BusinessClasses.RoleProvider.GetRolesForUser(String username) in C:\Users\me\Dropbox\Projects\MS\customer\BusinessClasses\RoleProvider.cs:86 
```

有人可以告诉我这些路径从哪里显示或为什么显示？重申一下，这些路径来自我创建应用程序的开发机器。错误消息正在远程服务器上显示（通过远程桌面连接）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:51:13.907

事实证明，这些路径来自我复制到远程服务器的 pdb 文件。我刚刚从我的开发机器上复制了整个应用程序以进行快速测试，并且这些文件随身携带。

我在 notepad++ 中搜索了路径字符串，虽然它实际上并没有返回字符串，但它返回了项目中的 pdb 文件路径。

我从服务器中删除了 pdb 文件，现在我的错误消息没有显示我的本地文件路径。

```
SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5009598
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +123
   System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior) +166
   System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) +115
   DataAccess.CustomerIntranetTableAdapters.employeeTableAdapter.GetEmployeeByUserID(Nullable`1 id) +377
   BusinessClasses.GlobalOperations.getEmployeeByUserID(Guid id) +96
   Customer.EmployeeTimesheet.prepareComponents() +327
   Customer.EmployeeTimesheet.Page_Load(Object sender, EventArgs e) +179
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

现在我只需要解决错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:51:51.600

> 当 connectionString 出现拼写错误时，通常会发生此类错误。检查您的 web.config 文件中的所有内容是否正确。

# c - 高效地编写 For 循环

> ID：15171571
> 
> 赞同：2
> 
> 时间：2013-03-02T06:34:06.100
> 
> 标签：c, performance, caching, loops, optimization

我正在用C构造一个函数的偏导数。这个过程主要由大量的小循环组成。每个循环负责填充矩阵的一列。因为矩阵的大小是巨大的，所以代码应该被高效地编写。对于实施，我有许多计划，我不想详细说明。

我知道智能编译器会尝试自动利用缓存。但是我想知道更多关于使用缓存和编写高效代码和高效循环的细节。如果提供一些资源或网站，我将不胜感激，这样我就可以在减少内存访问时间和利用人方面了解更多关于编写有效代码的信息。

我知道我的要求看起来很草率，但我不是计算机人。我做了一些研究，但没有成功。因此，任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T06:36:46.497

写得好的代码往往是高效的（尽管并不总是最优的）。从编写好的干净代码开始，如果您确实有可以隔离和解决的性能问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T06:38:07.697

最好以最可读和最易理解的方式编写代码，然后对其进行分析以查看瓶颈的真正位置。很多时候，您对哪里需要效率的概念与现实不符。

现代编译器在优化的许多方面都做得不错，而且循环过程本身似乎不太可能成为问题。也许您应该考虑专注于简化每个循环所做的计算。

否则，您将查看诸如逐行访问矩阵等内容，以便利用 C 使用的行主要存储顺序（请参阅[此问题](https://stackoverflow.com/questions/997212/fastest-way-to-loop-through-a-2d-array)）。

您将希望在内部`for`没有语句的情况下构建循环，`if`因为 if 语句创建了所谓的“分支”。计算机基本上会猜测哪个选项是正确的，如果它是错误的，有时会付出高昂的代价。

要扩展该主题，您希望尽可能少地在 for 循环中做任何事情。您还需要使用静态限制来定义它，例如：

```
for(int i=1;i<100;i++) //This is better than
for(int i=1;i<N/i;i++) //this 
```

静态限制意味着只需花费很少的精力来确定 for 循环是否应该继续运行。它们还允许您使用[OpenMP](https://en.wikipedia.org/wiki/OpenMP)来划分循环中的工作，这有时可以大大加快处理速度。这很简单：

```
#pragma omp parallel for
for(int i=0;i<100;i++) 
```

而且，沃拉！代码是并行的。

# sql - 遍历临时表

> ID：15171575
> 
> 赞同：0
> 
> 时间：2013-03-02T06:34:48.127
> 
> 标签：sql, sql-server, database, sql-server-2008

我确实尝试过遍历一个临时表，但没有用，最终只会出现这么多错误。

请帮助我如何解决这个问题..

我的需要是：

* * *

*   我需要从表中获取一个 ID 列，并将其存储在一个临时表中。
*   然后遍历每个 ID，并执行一个以该 ID 作为参数的存储过程。
*   在另一个表中插入该存储过程的返回值（= 一列）。

请指导我如何做到这一点。

我确实搜索了很多......并且对光标和基于集合的连接感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:28:28.783

恕我直言，在您的情况下，您不需要临时表。

假设您有以下两个表格。第一个是源表，另一个是目标表。

```
CREATE TABLE mytable(id INT IDENTITY PRIMARY KEY, col1 nvarchar(10));
CREATE TABLE mytable2(id INT, value INT); 
```

`mytable`其中包含以下示例数据：

```
id          col1
----------------
1           row1      
2           row2      
3           row3      
4           row4 
```

你有一些 SP 可以根据 id 计算一些东西，像这样

```
CREATE PROCEDURE getValue (@id INT, @value INT OUT) 
AS
 SET NOCOUNT ON;
 SET @value = @id * 2; 
```

然后你可以创建一个 SP 来完成这样的工作

```
CREATE PROCEDURE proccessData
AS
  SET NOCOUNT ON;
  DECLARE @id INT, @value INT;
  DECLARE id_cursor CURSOR FOR 
   SELECT id FROM mytable WHERE id > 1 AND id < 4;

  OPEN id_cursor;

  FETCH NEXT FROM id_cursor INTO @id;
  WHILE @@FETCH_STATUS = 0
  BEGIN
    EXEC getValue @id, @value OUTPUT;
    INSERT INTO mytable2 VALUES(@id, @value);
    -- Or use update if you already have id's in mytable2
    -- UPDATE mytable2 SET value = @value WHERE id = @id;
    FETCH NEXT FROM id_cursor INTO @id;
  END
  CLOSE id_cursor;
  DEALLOCATE id_cursor; 
```

在你调用那个 SP 之后

```
EXEC proccessData 
```

你会进入 mytable2

```
id          value
----------- -----------
2           4
3           6 
```

**这里正在工作[sqlfiddle](http://sqlfiddle.com/#!3/747d5/1)**

# c# - 使用自定义分页优化搜索 SQL

> ID：15171577
> 
> 赞同：8
> 
> 时间：2013-03-02T06:34:52.000
> 
> 标签：c#, asp.net, sql, sql-server, sql-server-2008

使用 asp.net mvc 应用程序和 c#。我们正在开发一个搜索页面。

**更新了我的答案。请在下面查看我自己的答案并提出建议**

[不幸的是，select into 在 sql azure http://blogs.msdn.com/b/sqlazure/archive/2010/05/04/10007212.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/04/10007212.aspx)中不起作用

帮我

我有下表来显示我的项目搜索结果

项目表

*   ITEMID、SHOPID、ITEMNAME、DESCRIPTION、PRICE、CATID

商店表

*   SHOPId，标题，CITYID，活动

城市表

*   CITYID、CITYName、REGIONID、CountryISO

类别表

*   猫号、猫名

这是我的搜索查询，它给出了给定条件的分页结果

```
DECLARE @unitItems INT=20
DECLARE @sortOrder INT=0
DECLARE @catId INT
DECLARE @search NVARCHAR (100)=''
DECLARE @REGIONID INT=0
DECLARE @cityId INT=0
DECLARE @maxPrice DECIMAL (10, 2)
DECLARE @page INT
DECLARE @currentDate DATETIME2 (0)
set @unitItems=20
set @catId=0
set @sortOrder=0
set @search=''
set @cityId=1
set @maxPrice=0
set @page=1
set @currentDate='2013-02-24 13:14:58.073'

;WITH itemresult AS (
  SELECT IT.ITEMID, IT.ITEMNAME, IT.DESCRIPTION, IT.PRICE,
  IT.CATID, C.CATNAME AS CATNAME,S.HEADER AS SHOPHEADER,CI.CITYNAME AS CITY, 
  ROW_NUMBER() OVER (ORDER BY IT.SHOWDATE DESC) AS RowNumber
  FROM ITEM AS IT INNER JOIN SHOP AS S ON IT.SHOPId = S.ShopId 
  INNER JOIN CITY AS CI ON CI.CITYID = S.CITYID
  INNER JOIN COUNTRY AS CY ON CI.COUNTRYISO = CY.COUNTRYISO 
  INNER JOIN REGION AS R ON CI.REGIONID = R.REGIONID 
  INNER JOIN CITY AS CI2 ON CI2.CITYID = @cityId 
  INNER JOIN CATEGORY AS C ON IT.CATID = C.CATID    

  WHERE S.ACTIVE = 1   

  GROUP BY IT.ITEMID, IT.ITEMNAME, IT.HEADER, IT.DESCRIPTION, IT.PRICE, 
  IT.CATID, IT.SHOWDATE,S.HEADER,C.CATNAME,CI.CITYNAME) 

  SELECT IT.*, CEILING(CAST(RN AS float) / @unitItems) AS UNITPAGES, RN AS UNITROWS 
  FROM itemresult IT 
  INNER JOIN (SELECT Max(RowNumber) AS RN FROM itemresult) SUBQ ON 1=1 
  WHERE IT.RowNumber BETWEEN (@page - 1) * @unitItems + 1 
  AND @unitItems * @page 
```

**问题：**

现在的问题是我们要在 UI 中添加新的更改。搜索 UI 现在将显示如下内容

**第一个结果集** ***--> 假设总共找到 230 条记录***

您在 Fiddle 中看到的搜索结果

**第二个结果集** ***--> 来自 230 条记录的不同类别和计数***

> CatId、CatName、TotalCountInSearch

例如：1 本书 25 和 2 运动 43 和 8 其他 52。显示我可以在 UI 中显示如下

*   所有类别 (120)
*   书籍 (25)
*   运动 (43)
*   其他 (52)

**第三个结果集** ***--> 不同的城市和 230 条记录中的***计数

 **> CityId、CityName、TotalCountInSearch

用于在 UI 下方显示

*   所有城市(10)
*   钦奈 (4)
*   班加罗尔 (3)
*   其他 (3)

> **我如何检索这些计数和名称，如所有类别、书籍、所有城市等？欢迎任何帮助或建议**。

**[单击并在此处查看 SQL Fiddle](http://www.sqlfiddle.com/#!3/52bbb/1)**

我想根据搜索条件获得这些计数。希望从我的程序中检索这个作为另一个结果集

**主要更新：**

> 我在这里上传了所有架构和实际动态查询 [https://github.com/Padayappa/SQLProblem/blob/master/PaginationIssue](https://github.com/Padayappa/SQLProblem/blob/master/PaginationIssue)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:37:47.600

尝试这个。我希望这能满足你的期望

```
CREATE VIEW vSequence AS
WITH itemresult AS (
  SELECT IT.ITEMID, IT.ITEMNAME, IT.DESCRIPTION, IT.PRICE,
  IT.CATID, C.CATNAME AS CATNAME,S.HEADER AS SHOPHEADER,CI.CITYNAME AS CITY,CI.CITYID,
  ROW_NUMBER() OVER (ORDER BY IT.SHOWDATE DESC) AS RowNumber
  FROM ITEM AS IT INNER JOIN SHOP AS S ON IT.SHOPId = S.ShopId
  INNER JOIN CITY AS CI ON CI.CITYID = S.CITYID
  INNER JOIN COUNTRY AS CY ON CI.COUNTRYISO = CY.COUNTRYISO
  INNER JOIN REGION AS R ON CI.REGIONID = R.REGIONID
  INNER JOIN CITY AS CI2 ON CI2.CITYID = 1
  INNER JOIN CATEGORY AS C ON IT.CATID = C.CATID

  WHERE S.ACTIVE = 1

  GROUP BY IT.ITEMID, IT.ITEMNAME, IT.HEADER, IT.DESCRIPTION, IT.PRICE,
  IT.CATID, IT.SHOWDATE,S.HEADER,C.CATNAME,CI.CITYNAME,CI.CITYID)

SELECT * FROM itemresult IT

GO

  SELECT IT.*, CEILING(CAST(RN AS float) / 20) AS UNITPAGES, RN AS UNITROWS
  FROM vSequence IT
  INNER JOIN (SELECT Max(RowNumber) AS RN FROM vSequence) SUBQ ON 1=1
  WHERE IT.RowNumber BETWEEN (1 - 1) * 20 + 1
  AND 20 * 1
GO
SELECT  IT.CATID,RS.CATNAME , CONVERT(varchar(10), SUM(CASE WHEN IT.CATID = CAT.CATID THEN 1 ELSE 0 END)) AS 'Count'
FROM vSequence RS INNER JOIN ITEM IT ON RS.CATID = IT.CATID
INNER JOIN CATEGORY CAT
ON IT.CATID = CAT.CATID GROUP BY IT.CATID,RS.CATNAME
GO
SELECT  CIT.CITYID,CITYNAME,CONVERT(varchar(10), SUM(CASE WHEN CIT.REGIONID =  REG.REGIONID THEN 1 ELSE 0 END)) AS 'Count'
FROM COUNTRY CON INNER JOIN REGION REG
ON CON.COUNTRYISO = REG.COUNTRYISO
INNER JOIN CITY CIT ON CIT.REGIONID =  REG.REGIONID
INNER JOIN  vSequence RS ON CIT.CITYID=RS.CITYID GROUP BY REG.REGIONID,CITYNAME, CIT.CITYID 
```

[SQL Fiddle](http://www.sqlfiddle.com/#!3/52bbb/61)示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T16:40:10.697

正如我从您的评论中了解到的那样，我认为您*需要*的是获得*`3 result sets by executing a single stored procedure`*. 您还想知道查询是否已优化。

我认为你的*vSequence* `VIEW`很好（所以，我没有在这里添加我的答案）。您需要*`create a stored procedure`*获得`using your view`如下三个不同的结果集。我已将您在小提琴中声明的变量列表作为存储过程的参数。我已经在每个变量旁边发表了评论。由于您的过滤要求尚不清楚，因此我将它们保留原样。

```
CREATE PROCEDURE myStoredProcedure 
   @unitItems INT=20, --number of items per page
   @sortOrder INT=0, --not used
   @catId INT, --not in use 
   @search NVARCHAR (100)='', --not used
   @REGIONID INT=0, -- not used
   @cityId INT=0, -- not used
   @maxPrice DECIMAL (10, 2), -- not used
   @page INT, --page number
   @currentDate DATETIME2 (0) -- not used
AS 
BEGIN

    /*
      Query 1
      Note: I have assumed your @page start at 1 and also changed the where clause 
      to bring correct data based on @page & @unitItems parameters 
    */
    SELECT IT.*, CEILING(CAST(RN AS float) / 20) AS UNITPAGES, RN AS UNITROWS
    FROM vSequence IT INNER JOIN (SELECT Max(RowNumber) AS RN FROM vSequence) SUBQ ON 1=1
    WHERE IT.RowNumber BETWEEN (@unitItems * (@page - 1) + 1) AND @unitItems 

    /* Query 2 */
    SELECT  IT.CATID,RS.CATNAME , CONVERT(varchar(10), 
            SUM(CASE WHEN IT.CATID = CAT.CATID THEN    1 ELSE 0 END)) AS 'Count'
    FROM vSequence RS 
              INNER JOIN ITEM IT ON RS.CATID = IT.CATID 
              INNER JOIN CATEGORY CAT ON IT.CATID = CAT.CATID 
    GROUP BY IT.CATID,RS.CATNAME

    /* Query 3 */
    SELECT  CIT.CITYID,CITYNAME,CONVERT(varchar(10), 
            SUM(CASE WHEN CIT.REGIONID =   REG.REGIONID THEN 1 ELSE 0 END)) AS 'Count'
    FROM COUNTRY CON 
             INNER JOIN REGION REG ON CON.COUNTRYISO = REG.COUNTRYISO
             INNER JOIN CITY CIT ON CIT.REGIONID =  REG.REGIONID
             INNER JOIN  vSequence RS ON CIT.CITYID=RS.CITYID 
    GROUP BY REG.REGIONID,CITYNAME, CIT.CITYID
 END 
```

以下是如何执行存储过程`Management Studio`（请使用适当的参数值）：

```
DECLARE @unitItems INT = 20, 
        @sortOrder INT = 0, 
        @catId INT = 0,
        @search NVARCHAR (100) = '', 
        @REGIONID INT = 0, 
        @cityId INT = 1,
        @maxPrice DECIMAL (10, 2) = 0,
        @page INT = 1,
        @currentDate DATETIME2 (0) = '2013-02-24 13:14:58.073'

EXEC myStoredProcedure 
       @unitItems,
       @sortOrder,
       @catId,
       @search,
       @REGIONID,
       @cityId,
       @maxPrice,
       @page,
       @currentDate 
```

要在您的代码中执行此存储过程，请`C#`使用参数化查询，`DataAdapter`如下所示：

```
DataSet ds = new DataSet();
using (SqlConnection connection =  new SqlConnection("your-Connection-String-here"))
{

    SqlDataAdapter adapter = new SqlDataAdapter();
    adapter.SelectCommand = new SqlCommand("myStoredProcedure", connection);
    adapter.SelectCommand.CommandType = CommandType.StoredProcedure;
    adapter.SelectCommand.Parameters.AddWithValue("@unitItems",20);
    //add other parameters as above here
    adapter.SelectCommand.Parameters.AddWithValue("@page",1); //correct page number
    adapter.Fill(ds);
}

//Now you can access all query results as 
ds.Tables[0]; //results from query1
ds.Tables[1]; //results from query2
ds.Tables[2]; //results from query3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T12:26:35.717

最后我创建了下面的 SP 并解决了这个问题。

**请让我知道这是正确的方法吗？**

> **我使用了临时表、Grouping SETS、Grouping_ID**

您可以在此处查看代码[https://github.com/Padayappa/SQLProblem/blob/master/PaginationResolved](https://github.com/Padayappa/SQLProblem/blob/master/PaginationResolved)

```
 CREATE PROCEDURE [dbo].[Item_SearchItems_New]
 (
   @ShopNr INT
,@unitItems INT = 20
,@sortOrder INT = 0
,@language CHAR(2) = 'EN'
,@catId INT
,@search NVARCHAR(100) = ''
,@countryIso NCHAR(2) = ''
,@regionNr INT = 0
,@cityId INT = 0
,@maxPrice DECIMAL(10, 2)
,@page INT
,@currentDate DATETIME2(0)
,@distance NUMERIC(4, 1)
,@isFavoriteShop BIT = 0
,@currentUserNr INT = 0
,@latitude FLOAT(53) = 0
,@longitude FLOAT(53) = 0
,@itemType TINYINT = 0
,@unitRows INT OUTPUT
,@unitPages INT OUTPUT
 )
 AS
 BEGIN
SET XACT_ABORT ON
SET NOCOUNT ON

DECLARE @sql NVARCHAR(MAX)
        ,@sqlSelect NVARCHAR(MAX) = ''
        ,@sqlTempTable NVARCHAR(MAX) = '#itemSearch'
        ,@sqlCountTempTable NVARCHAR(MAX) = '#itemCount'
        ,@sqlInto NVARCHAR(MAX) = ''
        ,@sqlFrom NVARCHAR(MAX) = ''
        ,@sqlClause NVARCHAR(MAX) = ''
        ,@sqlGroup NVARCHAR(MAX) = ''
        ,@params NVARCHAR(MAX)
        ,@citySearch bit = 0
        ,@gpsSearch bit = 0
        ,@sortOrderString NVARCHAR(MAX) = 'ORDER BY IT.CREATEDATE DESC'
        ,@sortOrderString2 NVARCHAR(MAX) = ''

IF (@cityid <= 0) AND (@currentUserNr > 0) AND (@latitude = 0)
    SELECT  @cityid = CITYID
    FROM    USERINFO
    WHERE   USERNR = @currentUserNr
ELSE IF (@cityid <= 0) AND (@latitude > 0)
    SET @gpsSearch = 1
ELSE IF (@cityid > 0)
    SET @citySearch = 1

IF (@sortOrderString2 = '')
    SET @sortOrderString2 = @sortOrderString

IF (@unitItems = 0)
    SET @unitItems = 20

IF (@page <= 0)
    SET @page = 1

SET @sqlSelect =
    'SELECT     J.URLNAME
                ,IT.ITEMNR
                ,IT.USERNR
                ,IT.ShopNR
                ,IT.ITEMID
                ,IT.ITEMNAME
                ,IT.HEADER
                ,IT.DESCRIPTION
                ,IT.PRICE
                ,IT.CREATEDATE
                ,IT.ITEMSTATUS
                ,IT.CURRENCYCODE
                ,IT.CATID
                ,IT.VISIT
                ,IT.ENDDATE
                ,IT.PREAMBLE
                ,IT.SHOWDATE
                ,IT.LASTUPDATED
                ,C.CATNAME AS CATNAME

                ,J.HEADER AS ShopHEADER
                ,J.LATITUDE
                ,J.LONGITUDE
                ,R.REGIONNAME AS REGIONNAME
                ,CY.COUNTRYISO
                ,R.REGIONNR
                ,CY.COUNTRYNAME AS COUNTRYNAME
                ,CI.CITYNAME AS CITY
                ,ROW_NUMBER() OVER (' + @sortOrderString + ') AS RowNumber'

SET @sqlGroup =
    ' GROUP BY  J.URLNAME
                ,IT.ITEMNR
                ,IT.USERNR
                ,IT.ShopNR
                ,IT.ITEMID
                ,IT.ITEMNAME
                ,IT.HEADER
                ,IT.DESCRIPTION
                ,IT.PRICE
                ,IT.CREATEDATE
                ,IT.ITEMSTATUS
                ,IT.CURRENCYCODE
                ,IT.CATID
                ,IT.VISIT
                ,IT.ENDDATE
                ,IT.PREAMBLE
                ,IT.SHOWDATE
                ,IT.LASTUPDATED
                ,C.CATNAME

                ,J.HEADER
                ,J.LATITUDE
                ,J.LONGITUDE
                ,R.REGIONNAME
                ,CY.COUNTRYISO
                ,R.REGIONNR
                ,CY.COUNTRYNAME
                ,CI.CITYNAME'

SET @sqlFrom =
    ' FROM      dbo.ITEM AS IT
    INNER JOIN  dbo.Shop AS J
            ON  IT.ShopNR = J.ShopNR
    INNER JOIN  dbo.CITY AS CI
            ON  CI.CITYID = J.CITYID
    INNER JOIN  dbo.COUNTRY AS CY
            ON  CI.COUNTRYISO = CY.COUNTRYISO
    INNER JOIN  dbo.REGION AS R
            ON  CI.REGIONNR = R.REGIONNR'

    SET @sqlFrom = @sqlFrom +
        ' INNER JOIN    dbo.CATEGORY AS C
                ON  IT.CATID = C.CATID '

    SET @sqlClause =
        ' WHERE     J.ACTIVE = 1
                AND IT.ITEMSTATUS = 1
                AND IT.ENDDATE > @currentDate'      

    IF (@itemType = 1) 
        SET @sqlClause = @sqlClause +
            ' AND IT.ITEMTYPE = 1'

    IF (@catId > 0)
        SET @sqlClause = @sqlClause +
            ' AND (C.CATID = @catId OR C.PARENTCATID = @catId)'

    IF (@ShopNr > 0)
        SET @sqlClause = @sqlClause +
            ' AND IT.ShopNR = @ShopNr'

    IF (@search <> '') 
        SET @sqlClause = @sqlClause +
            ' AND ((IT.HEADER LIKE ''%' + @search + '%'') OR (IT.DESCRIPTION LIKE ''%' + @search + '%''))'

    SET @sqlInto = ' INTO ' + @sqlTempTable + ' ';

    SET @sql =  @sqlSelect +
                @sqlInto +
                @sqlFrom +
                @sqlClause +
                @sqlGroup

    SET @sql = @sql + ';

        SELECT  @unitRows = @@ROWCOUNT
                ,@unitPages = (@unitRows / @unitItems) + 1;

        SELECT  *
        FROM    ' + @sqlTempTable + ' AS IT
        WHERE   RowNumber BETWEEN (@page - 1) * @unitItems + 1 AND @unitItems * @page
        ' + @sortOrderString2 + ';

        SELECT      CATNAME
                    ,CITY
                    ,COUNT(*) AS ITEMCOUNT
                    ,GROUPING_ID(CATNAME, CITY) AS ITEMCOUNTTYPEID
        INTO        '+ @sqlCountTempTable + '
        FROM        ' + @sqlTempTable + '
        GROUP BY    GROUPING SETS
                    (
                        (CATNAME)
                        ,(CITY)
                        ,()
                    )

        SELECT      ISNULL(CATNAME, ''All Categories'') AS CATNAME
                    ,ITEMCOUNT
        FROM        '+ @sqlCountTempTable + '
        WHERE       ITEMCOUNTTYPEID IN (1, 3)
        ORDER BY    ITEMCOUNTTYPEID DESC
                    ,CATNAME

        SELECT      ISNULL(CITY, ''All Cities'') AS CITY
                    ,ITEMCOUNT
        FROM        '+ @sqlCountTempTable + '
        WHERE       ITEMCOUNTTYPEID IN (2, 3)
        ORDER BY    ITEMCOUNTTYPEID DESC
                    ,CITY';

    SELECT @params =
        N'@language nchar(2), ' +
        N'@ShopNr int, ' +
        N'@cityId int, ' +
        N'@catId int, ' +
        N'@distance numeric(4,1), ' +
        N'@currentDate datetime, ' + 
        N'@unitItems int,' + 
        N'@countryIso nchar(2),' + 
        N'@regionNr int,' + 
        N'@page int,' + 
        N'@currentUserNr int,' +
        N'@latitude float,' +
        N'@longitude float,' +
        N'@unitRows int OUTPUT,' +
        N'@unitPages int OUTPUT'

--print @sql

EXEC    sp_executesql @sql
        ,@params
        ,@language
        ,@ShopNr
        ,@cityId
        ,@catId
        ,@distance
        ,@currentDate
        ,@unitItems
        ,@countryIso
        ,@regionNr
        ,@page
        ,@currentUserNr
        ,@latitude
        ,@longitude
        ,@unitRows OUTPUT
        ,@unitPages OUTPUT
END
GO

DECLARE @unitPages INT
    ,@unitRows INT

exec Item_SearchItems_New @ShopNr=0,@unitItems=20,@catId=0,@language='',@sortOrder=0,@search=default,@countryIso='in',
@regionNr=2702259,@cityId=2702261,@maxPrice=0,@page=1,@distance=50,@currentDate='2013-02-24 19:29:50.623',@isFavoriteShop=0,
@currentUserNr=0,@latitude=0,@longitude=0,@itemType=0,@unitRows = @unitRows OUTPUT, @unitPages = @unitPages OUTPUT

SELECT  @unitPages, @unitRows 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T07:54:43.517

这是根据类别检索计数

```
select 'All categories' catname, count(*) catcount from itemtable
union all
select catname, count(catid) catcount
from itemtable inner join categorytable on categorytable.catid = itemtable.catid
group by catname 
```

这是根据城市检索计数

```
select 'All cities' cityname, count(*) catcount from itemtable
union all
select cityname, count(catid) catcount 
from itemtable inner join shoptable on itemtable.shopid = shoptable.shopid
inner join citytable on citytable.cityid = shoptable.cityid
group by cityname 
```**

# sql - 在 SQL 中使用单个游标比较两行

> ID：15171578
> 
> 赞同：1
> 
> 时间：2013-03-02T06:35:07.917
> 
> 标签：sql, cursor, cursor-position

我有下表

```
+-------+-------+----------+------+
| icode | iname | icatcode | slno |
+-------+-------+----------+------+
|    10 | a     |       11 |    0 |
|    20 | b     |       31 |    0 |
|    30 | c     |       11 |    0 |
|    40 | d     |       21 |    0 |
|    50 | e     |       31 |    0 |
|    60 | f     |       11 |    0 |
|    70 | g     |       21 |    0 |
|    80 | h     |       41 |    0 |
+-------+-------+----------+------+ 
```

我需要使用游标更新*slno列。*o/p 应如下表所示，即，当*icatcode 相*同时，应增加*slno*，当*icatcode*更改时，应将 slno 设置*为*1。

```
+-------+-------+----------+------+
| icode | iname | icatcode | slno |
+-------+-------+----------+------+
|    10 | a     |       11 |    1 |
|    30 | b     |       11 |    2 |
|    60 | c     |       11 |    3 |
|    70 | d     |       21 |    1 |
|    40 | e     |       21 |    2 |
|    50 | f     |       31 |    1 |
|    20 | g     |       31 |    2 |
|    80 | h     |       41 |    1 |
+-------+-------+----------+------+ 
```

我已经为它写了查询

```
declare @icode int,@iccode int,@islno int,@inccode int

set @islno=1

declare cur2 cursor for select icode,iccode from im order by iccode

open cur2

fetch next from cur2 into @icode,@iccode

while @@FETCH_STATUS=0

begin

    update im  set slno=@islno where @icode=icode
    fetch next from cur2 into @icode,@inccode
    if @iccode<>@inccode
    begin
    set @islno=1
    end
    else
    begin
    set @islno=@islno+
    end

end

close cur2
deallocate cur2 
```

上面的查询结果如下 o/p

```
+-------+-------+----------+------+
| icode | iname | icatcode | slno |
+-------+-------+----------+------+
|    10 | a     |       11 |    1 |
|    20 | b     |       31 |    1 |
|    30 | c     |       11 |    2 |
|    40 | d     |       21 |    1 |
|    50 | e     |       31 |    1 |
|    60 | f     |       11 |    3 |
|    70 | g     |       21 |    1 |
|    80 | h     |       41 |    1 |
+-------+-------+----------+------+ 
```

我需要做哪些更改才能获得所需的 o/p？我只需要使用游标来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:47:42.513

在 SQLServer 你可以试试这个

```
DECLARE @icode int,
        @icatcodeOld int,
        @icatcode int,
        @slno int = 1                   

DECLARE cur2 CURSOR
  FOR
    SELECT icode, icatcode
    FROM im    
    ORDER BY icatcode ASC        
  OPEN cur2
  FETCH NEXT FROM cur2 INTO @icode, @icatcode
  WHILE @@FETCH_STATUS = 0
    BEGIN      
      UPDATE im
      SET slno = @slno                  
      WHERE icode = @icode                 

      SET @icatcodeOld = @icatcode                                                             
      FETCH NEXT FROM cur2 INTO @icode, @icatcode      
      SELECT @slno = CASE WHEN @icatcodeOld = @icatcode THEN @slno + 1 ELSE 1 END
    END

  CLOSE cur2
  DEALLOCATE cur2 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/050b7/1)上的演示[](http://sqlfiddle.com/#!3/050b7/1)

# c# - 删除文件的删除和写入权限

> ID：15171580
> 
> 赞同：0
> 
> 时间：2013-03-02T06:35:40.087
> 
> 标签：c#, file-permissions

我想删除文件的删除和写入权限。我试过这个

```
string fileName = "some_file";
FileSecurity fSecurity = File.GetAccessControl(fileName);
fSecurity.AddAccessRule (new FileSystemAccessRule("Everyone", FileSystemRights.Delete,  AccessControlType.Deny ));
fSecurity.AddAccessRule (new FileSystemAccessRule("Everyone", FileSystemRights.Write,  AccessControlType.Deny ));
File.SetAccessControl(fileName, fSecurity); 
```

但它似乎不起作用，当我使用

```
fSecurity.AddAccessRule (new FileSystemAccessRule("Everyone", FileSystemRight.Fullcontrol,  AccessControlType.Deny )); 
```

它有效，但它删除了文件的所有权限。我只想删除文件的删除和写入权限。

谁能告诉我如何删除文件的写入和删除权限以及如何再次重置它们？

我很困惑如何以及何时使用`AddAccessrule`,`ResetAccesserule`和`Removeaccessrule`. 我正在使用 .net 框架 3.5。

# c++ - 在运行时查找 vtable 大小的上限

> ID：15171587
> 
> 赞同：4
> 
> 时间：2013-03-02T06:36:32.157
> 
> 标签：c++, runtime, vtable

c++ 类的虚表取决于定义的虚函数的数量。您有什么想法如何在运行时获得 v-table 大小的上限？

假设我有一个指向对象的指针，我从头文件中知道它的公共虚函数，但我不确定有多少受保护/私有的虚函数。

我的一个想法是沿着 vtable 依次向下阅读，直到：

1.  我有访问冲突，那么这可能是 vtable 大小的上限。
2.  它是 NULL（但 NULL 也可以是纯虚函数）。

**编辑：**

以前我在这里有一个问题：[C++ COM Object Hotpatching？](https://stackoverflow.com/questions/14919666/c-com-object-hotpatching)

我没有得到满意的答复。因此，我想到了一种我自己的方法，它需要破解 vtable 指针。

我想要做的是在运行时向 c++ 对象添加一个变量。虽然我对这个对象唯一了解的是它有一个 vtable 指针。为了添加该字段，我计划将 vtable 指针指向另一个存储其 vtable 副本的位置。在这个新 vtable 的上游，我存储了我添加的变量。这是我能想到的唯一解决方案。

包装解决方案是不安全的，因为对于 COM 对象，如果对象有很多接口并且调用 queryInterface 就会出现问题。

并且将新变量保留在映射中的想法将涉及每次访问变量时读取映射。

# clang - CERN 开发的 Cling C++ JIT 解释器有多大用处？

> ID：15171593
> 
> 赞同：2
> 
> 时间：2013-03-02T06:37:01.480
> 
> 标签：clang, cling

我最近观看了关于 Cling - C++ 语言解释器的精彩 google 演讲。但我想知道除了 CERN（开发它的地方）的人之外是否有人在使用 Cling，从非对撞机物理学家的角度来看它有多好，你能用它编写桌面应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T19:29:18.730

有一些与高能物理不同的用例视频：[http](http://www.youtube.com/results?search_query=cling+c%2B%2B) ://www.youtube.com/results?search_query=cling+c%2B%2B （我认为第一对是相关的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T15:37:36.127

它有可能非常有用，但它还很年轻。我找不到任何文档，没有专门的邮件列表，也没有在线教程。我能够运行小型玩具代码，但还不知道如何在大型库上有效地使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-20T15:41:04.193

Cling 项目是一个成熟的项目。[你可以在他们的官网cling](https://root.cern.ch/cling)中找到更多的信息。他们也有一个[论坛](https://root-forum.cern.ch) 谢谢

# jquery - 滚动到顶部 在 Jquery Mobile 中不工作

> ID：15171594
> 
> 赞同：0
> 
> 时间：2013-03-02T06:37:02.330
> 
> 标签：jquery, asp.net, html, jquery-mobile, mobile

用户向下滚动到页面底部后，导航回页面顶部不起作用。

页脚

```
<div data-role="footer" data-theme="b">
    <div class="ui-bar">
        <a href="" data-role="button" data-icon="arrow-u" data-theme="d" style="float:right;" class="returnTopAction">Return top</a>
    </div>
</div> 
```

jQuery 参考

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

**更新：** 我的完整 HTML 代码

```
<html>

    <head>
        <title>SQ/TR</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    </head>

    <body>
        <div data-role="page" id="arealistpage">
            <div data-role="header" data-theme="b">
                 <h1>SQ/TR</h1>

                <a href="../Default.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l'>Back</a>
            </div>
            <!-- /header -->
            <div data-role="content">
                <ul data-filter="true" data-inset="true" data-role="listview">
                    <li>
                        <a href="#">Design Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Vendor Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Business Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Management Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Design Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Vendor Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Business Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Management Transmittal</a>
                    </li>
                </ul>
            </div>
            <!-- /content -->
            <div data-role="footer" data-theme="b" id="footerNavBar">
                <div class="ui-bar">
                    <a href="" data-role="button" data-icon="arrow-u" data-theme="d" style="float:right;" class="returnTopAction">Return top</a>
                </div>
            </div>
        </div>
        <!-- /page -->
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:03:16.660

将单击事件绑定到按钮并使用 jquery animate 滚动到顶部以获得滑动效果。

HTML

```
<a data-role="button" data-icon="arrow-u" data-theme="d" style="float:right;" class="returnTopAction">Return top</a> 
```

JavaScript

```
<script type="text/javascript">
    $(document).on('click', ".returnTopAction", function()
    {   
       $("body").animate({"scrollTop": 0});
    });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:37:22.653

jQuery Mobile 中有[jQuery.mobile.silentScroll()](http://api.jquerymobile.com/jQuery.mobile.silentScroll/)方法，它滚动到特定的 Y 位置而不触发滚动事件侦听器。此方法不执行动画滚动。

使用 jQuery Mobile 的静默滚动示例：

```
<html>

    <head>
        <title>SQ/TR</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script>
            $(document).on('click', '.returnTopAction', function() {
                $.mobile.silentScroll(0);
            });
        </script>
    </head>

    <body>
        <div data-role="page" id="arealistpage">
            <div data-role="header" data-theme="b">
                 <h1>SQ/TR</h1>

                <a href="../Default.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l'>Back</a>
            </div>
            <!-- /header -->
            <div data-role="content">
                <ul data-filter="true" data-inset="true" data-role="listview">
                    <li>
                        <a href="#">Design Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Vendor Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Business Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Management Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Design Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Vendor Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Business Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Management Transmittal</a>
                    </li>
                </ul>
            </div>
            <!-- /content -->
            <div data-role="footer" data-theme="b" id="footerNavBar">
                <div class="ui-bar">
                    <a href="" data-role="button" data-icon="arrow-u" data-theme="d" style="float:right;" class="returnTopAction">Return top</a>
                </div>
            </div>
        </div>
        <!-- /page -->
    </body>

</html> 
```

此外，您可以使用以下执行**动画**滚动的脚本：

```
$(document).on('click', '.returnTopAction', function() {
    $('html, body').animate({scrollTop: $("#arealistpage").offset().top}, 1000);
}); 
```

您可以检查以下基于您的代码的示例：

```
<html>

    <head>
        <title>SQ/TR</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script>
            $(document).on('click', '.returnTopAction', function() {
                $('html, body').animate({scrollTop: $("#arealistpage").offset().top}, 1000);
            });
        </script>
    </head>

    <body>
        <div data-role="page" id="arealistpage">
            <div data-role="header" data-theme="b">
                 <h1>SQ/TR</h1>

                <a href="../Default.aspx" class='ui-btn-left ui-btn-back' data-icon='arrow-l'>Back</a>
            </div>
            <!-- /header -->
            <div data-role="content">
                <ul data-filter="true" data-inset="true" data-role="listview">
                    <li>
                        <a href="#">Design Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Vendor Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Business Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Management Squad Check</a>
                    </li>
                    <li>
                        <a href="#">Design Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Vendor Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Business Transmittal</a>
                    </li>
                    <li>
                        <a href="#">Management Transmittal</a>
                    </li>
                </ul>
            </div>
            <!-- /content -->
            <div data-role="footer" data-theme="b" id="footerNavBar">
                <div class="ui-bar">
                    <a href="" data-role="button" data-icon="arrow-u" data-theme="d" style="float:right;" class="returnTopAction">Return top</a>
                </div>
            </div>
        </div>
        <!-- /page -->
    </body>

</html> 
```

# php - 从数据库中获取随机数据

> ID：15171599
> 
> 赞同：1
> 
> 时间：2013-03-02T06:37:48.213
> 
> 标签：php, mysql

我是 php 新手。我正在创建小型在线考试应用程序。我在 MySql 中创建了一个问题表，并希望在页面上只显示一个问题。提交该问题的答案后，在页面上显示另一个问题。谁能帮助我我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:56:00.847

将会话中的问题 ID 设置为逗号分隔

```
$_SESSION['asked_question_ids'] = $asked_question_ids; 
```

使用会话中的问题 ID 获取尚未提出的随机问题

```
$asked_question_ids = '3, 4, 5, asked queston ids from session'

SELECT * FROM questions WHERE qid NOT IN ($asked_question_ids) ORDER BY RAND() LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:43:29.053

SELECT * FROM questions ORDER BY RAND() LIMIT 4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:48:24.520

**编辑 2** 这是更新伪代码以修复原始代码的一些问题。

基本上这里的变化是从数据库中获取所有问题的 id，然后改组。这避免了自增序列中缺少 id 的情况，这种情况很可能发生。

旧代码的另一个变化是从数据库中获取所有选定的问题，而不是一次一个。不知道我在想什么。

这是一些伪代码：

```
// Get all questions ids. This should be fine since there shouldn't be too many cases where you will have more than 1000 questions.
$questionIds = db.selectIdsFromQuestionsWhereTypeIsSports();

// Shuffle array so the question ids are out of order
shuffle($questionIds);

// Number of questions you want
$quizLength = 5;

// select your questions    
$selectedQuestions = array_slice($questionIds, 0, $quizLength);

// Now fetch all data for selected questions
$quiz = db.fetchByWhereIdIn($selectedQuestions);

// Now do whatever with your question 
```

**原来我不会使用 MySQL`rand`功能。如果您有很多行，它不会提供出色的性能。此外，您面临再次选择相同问题的机会。

所以我要做的是从数据库中检索你的一组问题，然后在 php.ini 中随机播放。

如果您有数千个问题，那么我建议随机生成与您的自动增量 ID 相关的数字序列。如果您不使用自动增量 ID，那么这将不起作用。

因此，如果您想问 10 个问题，并且在您的数据库中有 100 个问题，那么例如生成 10 个介于 1 和 100 之间的数字。

这种方法的一个缺点是如果您的自动增量序列中有漏洞。如果你没有太多的数字，你可以把它扔掉，然后随机选择另一个数字。

这是一些伪代码：

```
// Get a count of your questions from the database
$totalQuestions = db.count();

// Generate an array sequence/range
$questionIds = range(1, $totalQuestions);

// Shuffle array so the numbers are out of order
shuffle($questionIds);

// Store your questions    
$quiz = array();

// Number of questions you want
$quizLength = 5;

// Now you can retrieve questions like so
while (count($quiz) == $quizLength) {
   $question = db.fetchById(array_pop($questionIds);
   if ($question != null) {
      $quiz[] = $question; 
   }
}
// Now do whatever with your question 
```

# matlab - Matlab - 从矩阵中找到缺失的时间并用一个值插入缺失的时间

> ID：15171604
> 
> 赞同：2
> 
> 时间：2013-03-02T06:38:22.307
> 
> 标签：matlab

我有一系列时间并以各种矩阵返回，我们称它们为 ab c。它们都是 x x 2，第 1 列以秒为单位，第 2 列返回。虽然所有的回报都是在一系列的时间间隔内，比如 15s 30s 45s 等，但问题不是所有的矩阵都有所有的时间段，所以虽然 a 可能是 30 x 2 ，但 b 可能只是 28 x 2。因为它缺少说时间 45 秒和返回。我想遍历每个矩阵并且我缺少一个时间桶 我想插入一个零回报的桶 - 我很高兴创建一个 30 x 1 的控制矩阵，其中包含所有需要交叉引用的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:57:07.137

您可以使用`ismember`来定位这些缺失的位置，因此如果`a`是控制向量并且`b`是缺失的数据向量将为您提供在中缺失`ind=find(ismember(a,b)==0);`的索引。`a``b`

例如：

```
a=1:10;
b=[1:2 4:5 7:10];
ind=find(ismember(a,b)==0);

ind =
     3     6 
```

为了在正确的地方添加`b`零

```
for n=1:numel(ind)
    b=[b(1:ind(n)-1) , 0 , b(ind(n):end)];
end

b =
 1     2     0     4     5     0     7     8     9    10 
```

# android - Android：编译 SDL 选择的处理器不支持 Thumb 模式`swp r3,r3,[r0]'

> ID：15171615
> 
> 赞同：2
> 
> 时间：2013-03-02T06:39:24.240
> 
> 标签：android, arm, sdl

我正在尝试使用 android NDK (rev8) 编译 SDL2 库，我的目标是 ARM ，但是在启动时`ndk-build`出现以下错误消息

```
Compile thumb  : SDL2 <= SDL_spinlock.c
/tmp/ccMkkYeU.s: Assembler messages:
/tmp/ccMkkYeU.s:33: Error: selected processor does not support Thumb mode `swp r3,r3,[r0]'
make: *** [obj/local/armeabi/objs/SDL2/src/atomic/SDL_spinlock.o] Error 1 
```

我在 Ubuntu 上，我尝试过使用不同版本的 Gcc（4.4.3、4.6 和 4.7），也尝试过使用 clang3.1，但总是出现相同的错误消息，谷歌对这个问题没有太大帮助

是否有人知道问题出处或知道一个链接，我可以在其中找到有关如何构建 SDL 库的精确说明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:56:43.337

在你的 Android.mk 中设置 arm 模式

```
LOCAL_ARM_MODE := arm 
```

# c - asctime/localtime 输出错误

> ID：15171616
> 
> 赞同：0
> 
> 时间：2013-03-02T06:39:28.200
> 
> 标签：c, datetime

```
char timestamp()
{
    time_t ltime;
    struct tm * loctime;
    char thetime;
    time(&ltime);
    loctime=localtime(&ltime);
    printf("%s", asctime(loctime));
    // "Sat Mar  2 12:12:57 2013"
    thetime=*asctime(loctime);
    // why "83"?!
    return thetime;
}

void WriteLog(char* Msg, ...)
{
    FILE logfile;
    logfile=*fopen(LOG_FILE, "r+");
    fseek(&logfile, 0, SEEK_END);
    fprintf(&logfile, "%hhd, %s", timestamp(), Msg);
    fclose(&logfile);
} 
```

我觉得这里有一个非常基本的错误。当我打印时间时，它非常好，但是当我尝试将它分配给变量以在另一个函数中使用时，我得到`83`的不是实际的日期和时间，当我从 中删除星号时`asctime(loctime)`，我得到`-128`编译器的警告：`Incompatible pointer to integer conversion assigning to 'char' from 'char *'; dereference with *`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:45:21.697

`char`只是一个 ASCII 字符，而`char*`它是指向通常用于保存字符数组（即字符串）的内存位置的指针。

该值`83`对应于`S`来自时间戳字符串的第一个字符的ASCII 字符`Sat Mar 2 12:12:57 2013`

而是尝试此代码，它`char*`直接返回可用于写入日志文件的代码。

```
char* timestamp()
{
    time_t ltime;
    struct tm * loctime;
    char thetime;
    time(&ltime);
    loctime=localtime(&ltime);
    printf("%s", asctime(loctime));
    // "Sat Mar  2 12:12:57 2013"
    return asctime(loctime);
}

void WriteLog(char* Msg, ...)
{
    FILE logfile;
    logfile=*fopen(LOG_FILE, "r+");
    fseek(&logfile, 0, SEEK_END);
    fprintf(&logfile, "%hhd, %s", timestamp(), Msg);
    fclose(&logfile);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:45:45.643

`char`只是一个字符，而不是字符串。要声明指向字符串的变量，您必须使用`char *`.

所以应该是：

```
char *thetime; 
```

那么作业应该是：

```
thetime = asctime(loctime); 
```

的声明`timestamp`应该是：

```
char *timestamp() 
```

当您在 中打印时间时`WriteLog`，它应该是：

```
fprintf(&logfile, "%s, %s", timestamp(), Msg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:48:21.777

您已将时间戳函数和时间变量声明为`char`. 这是一个 1 字节的变量，只能保存 -128 到 +127 范围内的整数。您想要的是一个指针 ( `char *`)，以便它们可以保存并返回指向 asctime 返回的字符串的指针。

将两个声明从`char`to更改为`char *`并删除`*`尊重 asctime 的返回的声明。那应该解决它。

# android - 删除文本视图的背景

> ID：15171617
> 
> 赞同：5
> 
> 时间：2013-03-02T06:39:43.557
> 
> 标签：android, background, textview

我为 textview 设置了背景，我想动态删除它，但它不起作用，有什么建议吗？

```
if (mToday) {
        monthView[mRow][mColumn].setBackgroundResource(R.color.black);
    }
    else {
        monthView[mRow][mColumn].setBackgroundResource(0);
    } 
```

[我在这里](https://stackoverflow.com/questions/9213449/removing-the-background-color-of-an-edittext)找到了一个合理的解释，为什么会发生这种情况，但又没有解决问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T06:49:17.517

尝试这个。

```
txtEmail.setBackgroundResource(android.R.color.transparent); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T09:02:01.353

尝试下面的代码，只是在**.setBackgroundDrawable 中将**0 更改为 null，这就是它的所有工作检查一次：

```
 if (mToday)
 {
     monthView[mRow][mColumn].setBackgroundResource(R.color.black);
 }
else
 {
      monthView[mRow][mColumn].setBackgroundDrawable(null);
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-02T06:55:36.107

我认为这应该有效

`monthView[mRow][mColumn].setBackgroundDrawable(null);`

# json - JSON文件的mongoimport

> ID：15171622
> 
> 赞同：195
> 
> 时间：2013-03-02T06:40:10.987
> 
> 标签：json, mongodb, import, mongoimport

我有一个包含大约 2000 条记录的 JSON 文件。将对应于 mongo 数据库中的文档的每条记录的格式如下：

```
{jobID:"2597401",
account:"XXXXX",
user:"YYYYY",
pkgT:{"pgi/7.2-5":{libA:["libpgc.so"],flavor:["default"]}},     
startEpoch:"1338497979",
runTime:"1022",
execType:"user:binary",
exec:"/share/home/01482/XXXXX/appker/ranger/NPB3.3.1/NPB3.3-MPI/bin/ft.D.64",
numNodes:"4",
sha1:"5a79879235aa31b6a46e73b43879428e2a175db5",
execEpoch:1336766742,
execModify: new Date("Fri May 11 15:05:42 2012"),
startTime: new Date("Thu May 31 15:59:39 2012"),
numCores:"64",
sizeT:{bss:"1881400168",text:"239574",data:"22504"}}, 
```

每条记录在 JSON 文件中的一行上，唯一的换行符在每条记录的末尾。因此，文档中的每一行都以“{jobID:”开头...我正在尝试使用以下命令将它们导入 mongo 数据库：

```
mongoimport --db dbName --collection collectionName --file fileName.json 
```

但是，我收到以下错误：

```
Sat Mar  2 01:26:12 Assertion: 10340:Failure parsing JSON string near: ,execModif
0x10059f12b 0x100562d5c 0x100562e9c 0x10025eb98 0x10000e643 0x100010b60 0x10055c4cc 0x1000014b7    
0x100001454 
 0   mongoimport                         0x000000010059f12b _ZN5mongo15printStackTraceERSo + 43
 1   mongoimport                         0x0000000100562d5c _ZN5mongo11msgassertedEiPKc + 204
 2   mongoimport                         0x0000000100562e9c _ZN5mongo11msgassertedEiRKSs + 12
 3   mongoimport                         0x000000010025eb98 _ZN5mongo8fromjsonEPKcPi + 1576
 4   mongoimport                         0x000000010000e643          
                                         _ZN6Import8parseRowEPSiRN5mongo7BSONObjERi + 2739
 5   mongoimport                         0x0000000100010b60 _ZN6Import3runEv + 7376
 6   mongoimport                         0x000000010055c4cc _ZN5mongo4Tool4mainEiPPc + 5436
 7   mongoimport                         0x00000001000014b7 main + 55
 8   mongoimport                         0x0000000100001454 start + 52
Sat Mar  2 01:26:12 exception:BSON representation of supplied JSON is too large: Failure parsing    
    JSON string near: ,execModif
Sat Mar  2 01:26:12 
Sat Mar  2 01:26:12 imported 0 objects
Sat Mar  2 01:26:12 ERROR: encountered 1941 errors 
```

我不知道问题是什么。有人可以推荐一个解决方案吗？

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2013-04-11T05:18:23.820

我能够使用以下查询修复错误：

```
mongoimport --db dbName --collection collectionName --file fileName.json --jsonArray 
```

希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-03-02T09:32:33.367

试试这个，

```
mongoimport --db dbName --collection collectionName <fileName.json 
```

例子，

```
mongoimport --db foo --collection myCollections < /Users/file.json
connected to: *.*.*.*
Sat Mar  2 15:01:08 imported 11 objects 
```

问题是因为你的日期格式。

我使用了相同的 JSON 修改日期如下，它有效

```
{jobID:"2597401",
account:"XXXXX",
user:"YYYYY",
pkgT:{"pgi/7.2-5":{libA:["libpgc.so"],flavor:["default"]}},     
startEpoch:"1338497979",
runTime:"1022",
execType:"user:binary",
exec:"/share/home/01482/XXXXX/appker/ranger/NPB3.3.1/NPB3.3-MPI/bin/ft.D.64",
numNodes:"4",
sha1:"5a79879235aa31b6a46e73b43879428e2a175db5",
execEpoch:1336766742,
execModify:{"$date" : 1343779200000},
startTime:{"$date" : 1343779200000},
numCores:"64",
sizeT:{bss:"1881400168",text:"239574",data:"22504"}} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-12-27T07:18:40.647

使用**mongoimport**你可以达到同样的效果

```
mongoimport --db test --collection user --drop --file ~/downloads/user.json 
```

在哪里，

```
test - Database name
user - collection name
user.json - dataset file 
```

`--drop`如果已经存在，则删除该集合。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-11-16T00:49:21.303

安慰：

```
mongoimport -d dbName -c collectionName dataFile.js 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-03T22:51:33.690

您的语法在以下方面完全正确：

```
mongoimport --db dbName --collection collectionName --file fileName.json 
```

确保您位于正确的文件夹中或提供完整路径。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-09T10:50:56.867

我已使用以下命令导出数据库

```
mongodump --db database_name --collection collection_name 
```

下面的命令对我有用，可以导入数据库

```
mongorestore --db database_name path_to_bson_file 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-01-11T08:42:49.930

在另一个终端中运行导入命令。（不在 mongo shell 内。）

```
mongoimport --db test --collection user --drop --file ~/downloads/user.json 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-26T09:10:41.027

在 Windows 中，您可以使用 Command Prompcmd `cmd`，在 Ubuntu 中，您可以`terminal`通过键入以下命令来使用：

```
mongoimport  -d  your_database_name  -c  your_collection_name  /path_to_json_file/json_file_name.json 
```

然后当你打开你的 mongo shell 时，你会发现在运行这个命令时检查你的 database_name：

```
show databases 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-02-16T15:43:51.450

## 在 MongoDB 中导入 JSON/CSV 文件

*   等等
*   首先检查 bin 文件夹（C:\Program Files\MongoDB\Server\4.4\bin）中的 mongoimport.exe 文件，如果不是，则下载 mongodb 数据库工具（[https://www.mongodb.com/try/download/database -工具](https://www.mongodb.com/try/download/database-tools)）
*   将提取的（解压缩）文件（在解压缩的 bin 内）复制到 bin 文件夹（C:\Program Files\MongoDB\Server\4.4\bin）
*   将您的 json 文件复制到 bin 文件夹（C:\Program Files\MongoDB\Server\4.4\bin）
*   现在打开您的 commond 提示将其目录更改为 bin

```
cd "C:\Program Files\MongoDB\Server\4.4\bin" 
```

*   现在将其复制到您的 commnad 提示符上

```
mongoimport -d tymongo -c test --type json --file restaurants.json 
```

*   其中 d- 数据库（tymongo 数据库名称），c-collection（测试集合名称）

## 对于 CSV 文件

```
 mongoimport -d tymongo -c test --type csv --file database2.csv --headerline 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-16T17:59:52.400

此命令适用于未指定集合的​​情况。

```
mongoimport --db zips "\MongoDB 2.6 Standard\mongodb\zips.json" 
```

执行命令后的 Mongo shell

```
connected to: 127.0.0.1
no collection specified!
using filename 'zips' as collection.
2014-09-16T13:56:07.147-0400 check 9 29353
2014-09-16T13:56:07.148-0400 imported 29353 objects 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-08-26T09:16:38.703

**解决方案：-**

```
mongoimport --db databaseName --collection tableName --file filepath.json 
```

**例子：-**

将您的文件放在管理文件夹中：-

```
C:\Users\admin\tourdb\places.json 
```

在您的终端上运行此命令：-

```
mongoimport --db tourdb --collection places --file ~/tourdb/places.json 
```

**输出：-**

```
admin@admin-PC MINGW64 /
$ mongoimport --db tourdb --collection places --file ~/tourdb/places.json
2019-08-26T14:30:09.350+0530 connected to: localhost
2019-08-26T14:30:09.447+0530 imported 10 documents 
```

更多[链接](http://tutorialwala.com/how-to-import-the-table-collection-json-in-mongodb/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-02-15T11:25:21.930

我试过这样的东西，它确实有效：

```
mongoimport --db dbName --file D:\KKK\NNN\100YWeatherSmall.data.json 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-29T08:05:18.520

当 db 使用 usrname 和密码时，这对我有用

```
mongoimport --db YOUR_DB --collection MyCollection --file /your_path/my_json_file.json -u my_user -p my_pass 
```

db没有用户名密码请删除`-u my_user -p my_pass`

我的示例 json

```
{ 
    "_id" : ObjectId("5d11c815eb946a412ecd677d"), 
    "empid" : NumberInt(1), 
    "name" : "Rahul"
}
{ 
    "_id" : ObjectId("5d11c815eb946a412ecd677e"), 
    "empid" : NumberInt(2), 
    "name" : "Rahul"
} 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-02-17T15:01:40.107

1.  只需复制 json 文件的路径，例如“C:\persons.json”
2.  转到 C:\Program Files\MongoDB\Server\4.2\bin
3.  在该 mongodb bin 文件夹上打开 cmd 并运行此命令

**mongoimport --jsonArray --db dbname--collection collectionName--file FilePath**

示例**mongoimport --jsonArray --db learnmongo --collection people --file C:\persons.json**

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-04-20T12:22:26.277

尽管我想给我的命令，但已经给出了答案的数量。我以前经常。它可能对某人有帮助。

```
mongoimport original.json -d databaseName -c yourcollectionName --jsonArray --drop 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-03-02T09:37:13.347

如果您尝试导出此测试集合：

```
> db.test.find()
{ "_id" : ObjectId("5131c2bbfcb94ddb2549d501"), "field" : "Sat Mar 02 2013 13:13:31 GMT+0400"}
{"_id" : ObjectId("5131c2d8fcb94ddb2549d502"), "field" : ISODate("2012-05-31T11:59:39Z")} 
```

使用 mongoexport（第一个创建日期`Date(...)`和第二个创建日期`new Date(...)`（如果使用`ISODate(...)`与第二行相同）），因此 mongoexport 输出将如下所示：

```
{ "_id" : { "$oid" : "5131c2bbfcb94ddb2549d501" }, "field" : "Sat Mar 02 2013 13:13:31 GMT+0400" }
{ "_id" : { "$oid" : "5131c2d8fcb94ddb2549d502" }, "field" : { "$date" : 1338465579000 } } 
```

所以你应该使用相同的符号，因为严格的 JSON 没有 type `Date( <date> )`。

此外，您的 JSON 无效：所有字段名称必须用双引号括起来，但没有它们 mongoimport 也可以正常工作。

您可以在 mongodb[文档](http://docs.mongodb.org/manual/administration/import-export/#data-type-fidelity)和[此处](http://docs.mongodb.org/manual/reference/mongodb-extended-json/)找到更多信息。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-11-13T17:23:59.553

可能的答案有点晚了，可能会帮助新人。如果您有多个数据库实例：

```
mongoimport --host <host_name>:<host_port> --db <database_name> --collection <collection_name>  --file <path_to_dump_file> -u <my_user> -p <my_pass> 
```

假设需要凭据，否则删除此选项。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-01-09T06:05:08.213

这将起作用：

```
$ mongoimport --db databaseName --collection collectionName --file filePath/jsonFile.json 

2021-01-09T11:13:57.410+0530 连接到：mongodb://localhost/
2021-01-09T11:13:58.176+0530 1 个文档导入成功。0 个文档无法导入。

```

上面我分享了查询及其响应

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-17T12:46:55.800

> **mongoimport** **-d** < *dbname* > **-c** < *collectio_name* > **--file** < *c:\users\test.json* > **--jsonArray**

# android - 在android sax解析中设置图像

> ID：15171623
> 
> 赞同：1
> 
> 时间：2013-03-02T06:40:18.210
> 
> 标签：android, android-imageview, saxparser, bitmapimage

我在下面的 xml 提要中遵循：

```
<Categories>
 <Category name="Title 1"
 <Article>
  <article title="subtitle 1"  id="1" >
   <thumb_image>
   <image url="http://forfeed.jpeg"/></thumb_image>
    <images>
    <image url="http://ad_thumb.jpg"/>
      </images>
     </article>
  <article title="subtitle 2"  id="2" >
     <image url="http://forfeed.jpeg"/></thumb_image>
      <images>
    <image url="http://ad_thumb.jpg"/>
      </images>
    </article>
 </Article>
  </Category>
  <Category name="Title 2"
  <Articles>
  <article title="subtitle 4"  id="4" >
    <image url="http://forfeed.jpeg"/></thumb_image>
      <images>
    <image url="http://ad_thumb.jpg"/>
      </images>
    </article>
  <article title="subtitle 5"  id="5" >
  <image url="http://forfeed.jpeg"/></thumb_image>
  <images>
    <image url="http://ad_thumb.jpg"/>
      </images>
    </article>
 </Articles>
 </Category> 
```

这是我的处理程序类：

```
 public void startElement(String uri, String localName, String qName,Attributes attributes) throws SAXException {
   currentElement = true;
   if (localName.equals("Categories"))
     {
     sitesList = new SitesList();
    }
   ------------------------
     ---------------------
      ---------------------
      else if (localName.equals("thumb_image")) {
           ImageList ImageList = new ImageList();
       n++;
          isThumbURL = true;
               } 
          else if (localName.equals("image")) {
           if (isThumbURL)
          {

          String attr = attributes.getValue("url");
            sitesList.setImageURL(attr);
            String Sub_arry=n+attr;
             Appscontent.Sub_arraylist.add(Sub_arry);

                 }}} 
```

在我的主要活动中必须设置图像：

```
im.setImageBitmap(Appscontent.Sub_arraylistimage); 
```

在这些行中出现以下错误：

**ImageView 类型中的方法 setImageBitmap(Bitmap) 不适用于参数（ArrayList）**

我该如何解决这些错误。请帮助我...

**编辑：**

在我的 xml 提要中，我如何仅从 thumb_image 标记获取图像 url...但是在这些代码中，我从 thumb_image 和 images 标签获取图像 url..我如何为这些编写条件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:49:52.800

发生此错误是因为您尝试将 arraylist 设置为 imageview 但图像视图希望显示位图，因此您应该这样做

```
im.setImageBitmap(Appscontent.Sub_arraylistimage.get(0)); 
```

但这将收到图像的 url，因此请查看下面的链接以从 url 加载图像

[显示来自 url](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)或[此 url的图像](https://stackoverflow.com/questions/3118691/android-make-an-image-at-a-url-equal-to-imageviews-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:50:27.427

您需要将图像的 URL 转换为位图，然后在您的 imgageView 中设置该位图

有很多方法可以从 URL 加载图像。加载图像的有效方法是在后台线程中执行，就好像您尝试在 UI 线程中加载图像然后 UI 线程将挂起，并且在 4.0 以上的 Android OS 中，它会因 NetworkOnMainTHread Excpetion 而崩溃。有很多惰性加载方法您可以尝试其中任何一种：

1.Universal ImageLoader：[https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

2.Fedor的懒加载器：[https ://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

3\. [http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

# c++ - 替换exe中的位图资源

> ID：15171624
> 
> 赞同：2
> 
> 时间：2013-03-02T06:40:26.477
> 
> 标签：c++, winapi, embedded-resource

我有一个使用 WinAPI 创建的程序。在程序中，我嵌入了一个位图作为资源，程序加载该资源并通过 bitblt 将其显示为背景图像。

下面，我创建了一个控制台程序来替换 WinAPI 程序中的背景。它成功替换了位图，但现在 WinAPI 程序不再显示背景。我知道替换是有效的，因为使用 ResourceHacker，我可以单击资源并且它显示得很好。

此屏幕截图显示已成功替换： ![在此处输入图像描述](../Images/83a8ab7a48ed63541598e587edbd8cef.png)

但是，如果我使用 ResourceHacker 将图像保存回磁盘，则无法预览或使用任何编辑器打开图像：

![在此处输入图像描述](../Images/1e72582d98ca6f5ecec4be7d4d03eb57.png)

如果我使用 resourcehacker 替换 WinAPI 程序中的图像，它工作得很好，程序将它显示为背景。

说了这么多，谁能解释我在下面做错了什么？

```
//In my resource file of the WINAPI PROGRAM:
//IDI_ICON        ICON                "Resources/Icon.ico"
//IDB_BACKGROUND    BITMAP  DISCARDABLE "Resources/BackgroundImg.bmp"

#include <windows.h>
#include <iostream>
#include <fstream>
#include <vector>

using namespace std;

bool Update(int ResourceID, std::string ModulePath, string FilePath)
{
    HANDLE hResource = BeginUpdateResource(ModulePath.c_str(), false);

    if (hResource != nullptr)
    {
        std::fstream File(FilePath.c_str(), std::ios::in | std::ios::binary);
        if (File.is_open())
        {
            File.seekg(0, std::ios::end);
            std::size_t FileSize = File.tellg();
            File.seekg(0, std::ios::beg);
            std::vector<std::uint8_t> Data(FileSize);  //Also used a pointer.. makes no difference..
            File.read(reinterpret_cast<char*>(Data.data()), FileSize);
            File.close();

            if (UpdateResource(hResource, RT_BITMAP, MAKEINTRESOURCE(ResourceID), MAKELANGID(0x0409, 0x1), Data.data(), FileSize))
            {
                EndUpdateResource(hResource, false);
                return true;
            }
        }
    }
    return false;
}

int main()
{
    if (Update(1001, "Module.exe", "Resources/BackgroundImg.bmp"))
    {
        std::cout<<"Updated Successfully";
    }
    else
    {
        std::cout<<"Failed To Update";
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T19:29:18.390

啊啊啊！我解决了！对于任何阅读的人来说，这就是答案。这是一篇关于微软支持的旧 kb 文章：http: [//support.microsoft.com/default.aspx ?scid=kb%3ben-us%3b67883](http://support.microsoft.com/default.aspx?scid=kb%3ben-us%3b67883)

现在如果你不明白：

它说来自文件的位图和存储为资源的位图之间的唯一区别是一个是 DIB，另一个是打包的 DIB。这两者的区别在于一个有 BITMAPFILEHEADER 而另一个没有。资源在没有 FileHeaders 的情况下存储，因此必须将其删除。

因此，当更新位图资源时，您必须删除 BitmapFileHeader（注意下面的 SizeOf 偏移量）：

```
bool UpdateBitmap(int ResourceID, std::string ModulePath, string FilePath)
{
    HANDLE hResource = BeginUpdateResource(ModulePath.c_str(), false);

    if (hResource != nullptr)
    {
        std::fstream File(FilePath.c_str(), std::ios::in | std::ios::binary);
        if (File.is_open())
        {
            File.seekg(0, std::ios::end);
            std::size_t FileSize = File.tellg();
            File.seekg(0, std::ios::beg);
            std::vector<std::uint8_t> Data(FileSize);
            File.read(reinterpret_cast<char*>(Data.data()), FileSize);
            File.close();

            if (UpdateResource(hResource, RT_BITMAP, MAKEINTRESOURCE(ResourceID), MAKELANGID(0x0409, 0x1), Data.data() + sizeof(BITMAPFILEHEADER), FileSize - sizeof(BITMAPFILEHEADER))) //Notice the sizeof.
            {
                EndUpdateResource(hResource, false);
                return true;
            }
        }
    }
    return false;
} 
```

此代码与 OP 中的代码之间的唯一区别是 sizeof(BITMAPFILEHEADER) 的偏移量。

# ios - 如果我在做 CGImageRelease(sourceImageRef)，目标 C，应用程序崩溃

> ID：15171627
> 
> 赞同：0
> 
> 时间：2013-03-02T06:41:33.867
> 
> 标签：ios, objective-c, cgimageref

我的第一篇文章是在[这里](https://stackoverflow.com/questions/15170699/can-not-get-clue-from-zombie-about-a-crash#comment21367412_15170699)寻找我的应用程序崩溃的原因。经过将近 3 个小时的检测，现在我可以找出泄漏的位置。

首先，我正在做的是在使用 AFNetworking 下载图像后，我将根据下载图像的大小设置 uiimageview 的大小。

```
[self.headerView setImageWithURLRequest:[NSMutableURLRequest requestWithURL:[NSURL URLWithString:fundraiserInfo.imageUrl]]
                       placeholderImage:nil
                                success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

                                    // Use following to set the size of image according to retina or non retina
                                    CGImageRef sourceImageRef   =   [image CGImage];
                                    UIImage *newImage           =   [UIImage imageWithCGImage:sourceImageRef scale:[image scale]                                                                                           orientation:[image imageOrientation]];
                                    CGImageRelease(sourceImageRef); // <------ this is I am getting crash
                                    weakObj.image  = newImage;                                                                                                    
                                 }
                                 failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
                                        ;
                                 }
 ]; 
```

我收到如下警告

```
Incorrect decrement of the reference count of an object that is not owned at this point by the caller 
```

我如何检测泄漏：

放置该行并运行应用程序，该应用程序在多次尝试后崩溃。通过在 2 小时后检测，我可以重现错误。如果我删除该行并完全按照我所做的来重现错误，则该应用程序运行正常并且根本没有崩溃。

任何想法为什么那条线是我的应用程序崩溃的原因

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:16:07.357

您仅使用 sourceImageRef 引用`CGImageRef sourceImageRef = [image CGImage];`. 更何况你不是在创造、保留它，所以释放它不是你的责任。

我想让你看看[发布 CGImageRef](http://iphonedevsdk.com/forum/iphone-sdk-development/51569-releasing-cgimageref.html)的帖子。

另请查看[链接 1](https://stackoverflow.com/questions/4567465/cgimageref-memory-leak)和[链接 2](https://stackoverflow.com/questions/9574785/cgimagerelease-not-a-type-release-message-sent-to-deallocated-instance)

# php - PHP 致命错误：无法重新声明类（包括 example.php）

> ID：15171628
> 
> 赞同：1
> 
> 时间：2013-03-02T06:41:34.107
> 
> 标签：php

我需要在整个代码中多次包含对另一个 php 文件 example.php 的引用，但我得到“PHP 致命错误：无法重新声明类错误”。

```
<?php include 'example.php'; ?> 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T06:43:40.897

将其更改为：

```
<?php include_once 'example.php'; ?> 
```

如果您的 example.php 包含一个类和其他代码，请将其分成一个文件用于该类，另一个文件用于您要多次执行的代码。然后在调用上述代码的页面中，您可以编写：

```
<?php include_once 'exampleClass.php'; ?>
<?php include 'exampleCode.php'; ?>
<?php include 'exampleCode.php'; ?> 
```

# java - java - 如何使用java类中的jsp页面划分？

> ID：15171630
> 
> 赞同：-1
> 
> 时间：2013-03-02T06:41:52.717
> 
> 标签：java, api, jsp, email, html

我正在使用 Java 邮件 api 发送电子邮件，但是我想将 jsp 页面的划分传递给邮件内容。

**JAVA代码**

```
 Message message = new MimeMessage(session);
     message.setFrom(new InternetAddress("abc@gmail.com"));
        message.setRecipients(Message.RecipientType.TO,
            InternetAddress.parse("xyz@gmail.com"));
        message.setSubject("Subject");
        message.setText("div=todayactionitems");

        Transport.send(message);

        System.out.println("Done"); 
```

**JSP页面划分**

```
 <table id="todayactionitems" class="actionItems">
  <thead id="todayhead">
  <tr>
    <th width="1" class="leftside">&nbsp;</th>
    <th width="23"><div class="collapse" style="width:20px;">&#8211;</div></th>
    <th width="308"><div style="width:260px;">Today</div></th> 
```

因此，发送的电子邮件必须包含划分内容（todayactionitems）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:45:27.913

您可以在发送的文本中直接使用 html 标签

喜欢

```
 String someHtmlMessage = "<div>.............</div>";

 message.setContent(someHtmlMessage, "text/html; charset=utf-8") 
```

请注意，HTML 不应包含 , 或 . Gmail 会忽略它。

# cuda - CUDA UVA 复制失败

> ID：15171637
> 
> 赞同：1
> 
> 时间：2013-03-02T06:42:56.230
> 
> 标签：cuda

这是问题所在...我尝试在我自己的矢量容器中从主机复制到主机，如下代码

```
T* data_t = 0;
size_t msize = sizeof(T) * capacity;
checkCudaErrors( cudaHostAlloc((void**)&data_t, msize, cudaHostAllocPortable) );

msize = sizeof(T) * count;
checkCudaErrors( cudaMemcpy(data_t, data, msize, cudaMemcpyDefault) ); 
//data is also allocated using cudaHostAlloc with flag cudaHostAllocPortable 
```

我能够在我的机器中使用我的机器（使用 Ubuntu 10.04 64 位和我的 GPU GTX 590 以及使用 CUDA 5.0）成功编译该代码，并使用此标志

> -gencode arch=compute_20,code=sm_20 -gencode arch=compute_30,code=sm_30

但是，当我尝试运行它时，它导致 cuda 出现错误，错误消息**无效参数**

**注意：**内存分配`cudaHostAlloc`仅用于测试，因为我设计了自己的容器，以便能够自动从主机复制到设备或主机到主机。

有没有人可以帮助我解决这个问题？谢谢你。

**更新：**

我尝试使用`cudaMemcpyHostToHost`内存副本（分配为带有标志的固定内存`cudaHostAllocPortable`）它只能在内存大小的某个限制下工作，超过该限制后，副本将给出错误消息**分段错误**。

# sql - 如何计算一个表中的值，然后在另一个表中显示相同的值？

> ID：15171638
> 
> 赞同：1
> 
> 时间：2013-03-02T06:43:11.893
> 
> 标签：sql, ruby-on-rails, database, postgresql

我想计算`total no of Products`特定购物清单的数量，然后`total count of products`根据其在`Shopping List table`.I 中的 id 显示该购物清单的。我在产品表中创建了 shopping_list 的引用

我的购物清单如下：-

```
id serial NOT NULL,
  shopping_list_name character varying(255),
  shopping_list_status character varying(255) DEFAULT 'OPEN'::character varying,
  total_items character varying(255) DEFAULT 0,
  created_at timestamp without time zone NOT NULL,
  updated_at timestamp without time zone NOT NULL,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT shopping_lists_pkey PRIMARY KEY (id) 
```

我的产品表如下：-

```
 id serial NOT NULL,
  shopping_list_id integer NOT NULL,
  product_name character varying(255) DEFAULT 'null'::character varying,
  product_category character varying(255),
  quantity integer,
  status character varying(255) DEFAULT 'OPEN'::character varying,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT products_pkey PRIMARY KEY (id) 
```

谁能帮帮我吗：-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:12:32.397

所以你会有类似的东西

```
class ShoppingList < ActiveRecord::Base
  has_many :products
end

class Product < ActiveRecord::Base
  belongs_to :shopping_list
end 
```

然后为了得到一个购物清单的产品数量

```
@my_shopping_list.products.count 
```

并获得数量

```
@my_shopping_list.products.sum(:quantity) 
```

* * *

你可以在你的购物清单上有某种缓存，所以假设你的 ShoppingList 上有一个名为 products_quantity 的整数字段，默认为 0（确保默认为 0，而不是 nil）。

然后在您的产品模型上，您可以执行类似的操作

```
class Product < ActiveRecord::Base
  after_create :update_shopping_list

  def update_shopping_list
    shopping_list.update_attribute(:products_quantity, shopping_list.products_quantity + self.quantity)
  end
end 
```

在这种情况下，您不必执行查询 SELECT SUM(quantity) FROM PRODUCTS WHERE shopping_list_id = ?

我不确定我是否回答了您的第二个问题，但如果您有更多问题或者您想问其他问题，请告诉我。

# codeigniter-2 - 多级类别和子类别的适当表结构

> ID：15171645
> 
> 赞同：0
> 
> 时间：2013-03-02T06:43:47.603
> 
> 标签：codeigniter-2

我想创建一个满足以下要求的表结构：

我有一些主要类别（例如电子产品、服饰等）。我想在这些类别下添加最多三个级别的子类别。

**假设主要类别是电子产品。它的子类别是计算机。计算机的子类别是笔记本电脑，笔记本电脑的子类别是戴尔。（电子产品 => 电脑 => 笔记本电脑 => 戴尔）**

与上面的示例一样，有许多类别和子类别。那么，什么是合适的表结构呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:42:33.990

我会建议创建一个包含 parent_id 列的表。

例如：

表类别

category_id, category_name category_parent_id

parent_id 将包含 parent_id 的 id。

例如。

```
category_id | category_name | category_parent_id

    1       | Electronics   | 0
    2       | Dress         | 0
    3       | Computer      | 1
    4       | T-shirt       | 2
    5       | Llaptop       | 3
    6       | Dell          | 5 
```

# python - 读取 URL 后捕获数据块

> ID：15171649
> 
> 赞同：0
> 
> 时间：2013-03-02T06:44:10.387
> 
> 标签：python, regex

我在下面有预期的输出..我正在尝试读取一个 URL，能够成功读取它，但是当我尝试在“Combo”块下捕获数据时，我遇到了一个错误，关于如何解决这个问题的任何输入？

```
# Version YYYYMMDD
version = "20121112"

# File type to be output to logs
# Should be changed to exe before building the exe.
fileType = "py"

# Import sys to read command line arguments
import sys, getopt
#import pdb
#pdb.set_trace()

import argparse
import urllib
import urllib2
import getpass
import re

def update (url):
    print url

    authhost = 'https://login.company.com'
    # Siteminder test server
    user = getpass.getuser()
    password = getpass.getpass()
    realm = None

    # handle the authentication and cookies
    cookiehand = urllib2.HTTPCookieProcessor()
    password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
    password_mgr.add_password(user=user,
                              passwd=password,
                              uri=authhost,
                              realm=realm)
    auth_handler = urllib2.HTTPBasicAuthHandler(password_mgr)
    opener = urllib2.build_opener(auth_handler, cookiehand)
    urllib2.install_opener(opener)
    #make the request
    req = urllib2.Request(url=url)
    try:
        f = urllib2.urlopen(req)
        txt = f.read()
        f.close()
    except urllib2.HTTPError, e:
        txt = ''
        print 'An error occured connecting to the wiki. No wiki page will be generated.'
        return '<font color=\"red\">QWiki</font>'
    # Find the start tag of the textarea with Regular Expressions
    print txt
    p = re.compile('<Combo[^>]*>')
    m = p.search(txt)
    (tagStart, tagEnd) = m.span()
    # Find the end of the textarea
    endTag = txt.index("</textarea>")

def main ():
    #For logging
    print "test"
    parser = argparse.ArgumentParser(description='This is the update.py script created by test')
    parser.add_argument('-u','--url',action='store',dest='url',default=None,help='<Required> url link',required=True)
    results = parser.parse_args()# collect cmd line args
    url = results.url
    #print url
    update(url)
if __name__ == '__main__':
    main() 
```

当前输出：-

```
C:\Dropbox\scripts>python announce_update.py --u "http://qwiki.company.com/component/w/index.php?title=Test1&action=raw"
test
http://qwiki.company.com/component/w/index.php?title=Test1&action=raw
Password:
==== <font color="#008000">Combo</font> ====

{| border="1" cellspacing="1" cellpadding="1"
|-
! bgcolor="#67B0F9" scope="col" | test1
! bgcolor="#67B0F9" scope="col" | test2
! bgcolor="#67B0F9" scope="col" | test3
! bgcolor="#67B0F9" scope="col" | test4
|-
| [http:link.com]
|}

==== <font color="#008000">COde:</font> ====
Traceback (most recent call last):
  File "announce_update.py", line 66, in <module>
    main()
  File "announce_update.py", line 64, in main
    update(url)
  File "announce_update.py", line 52, in update
    (tagStart, tagEnd) = m.span()
AttributeError: 'NoneType' object has no attribute 'span' 
```

预期输出：-

```
{| border="1" cellspacing="1" cellpadding="1"
|-
! bgcolor="#67B0F9" scope="col" | test1
! bgcolor="#67B0F9" scope="col" | test2
! bgcolor="#67B0F9" scope="col" | test3
! bgcolor="#67B0F9" scope="col" | test4
|-
| [http:link.com]
|} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:10:40.863

`p.search(txt)`如果在文本中找不到`None`该模式，则返回。导致错误。`p``txt``None.span`

要从 html 中的第一个`<textarea>`元素中提取文本，您可以使用`BeautifulSoup`(html parser) 而不是正则表达式：

```
from bs4 import BeautifulSoup # pip install beautifulsoup4

soup = BeautifulSoup(txt)
print(soup.textarea.string) 
```

您可以尝试仅使用`HTMLParser`stdlib 执行相同操作：

```
#!/usr/bin/env python
import cgi

try:
    from html.parser import HTMLParser
except ImportError: # Python 2
    from HTMLParser import HTMLParser

try:
    from urllib.request import urlopen
except ImportError: # Python 2
    from urllib2 import urlopen

url = 'http://qwiki.company.com/component/w/index.php?title=Test1&action=raw'
tag = 'textarea'

class Parser(HTMLParser):
    """Extract tag's text content from html."""
    def __init__(self, html, tag):
        HTMLParser.__init__(self)
        self.contents = []
        self.intag = None
        self.tag = tag
        self.feed(html)

    def handle_starttag(self, tag, attrs):
        self.intag = (tag == self.tag)
    def handle_endtag(self, tag):
        self.intag = False
    def handle_data(self, data):
        if self.intag:
            self.contents.append(data)

# download and convert to Unicode
response = urlopen(url)
_, params = cgi.parse_header(response.headers.get('Content-Type', ''))
html = response.read().decode(params['charset'])

# parse html (extract text from the first `<tag>` element)
content = Parser(html, tag).contents[0]
print(content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:53:16.307

该错误表明您的字符串`m`为空/未定义。

此外，您的正则表达式似乎无论如何都找不到正确的文本，因为它会停在`</font>`.

`re`我在[http://docs.python.org/2/howto/regex.html](http://docs.python.org/2/howto/regex.html)找到了一个很好的使用参考

读完之后，我认为您需要这样的表达

```
p = re.compile(r'>Combo<.*({.*})'); 
```

注意`r`表示`raw`字符串，告诉 Python 不要解释反斜杠等；我用括号创建了一个“组”，因此您可以提取“仅匹配的这一点”。现在当你搜索

```
m = p.match(); 
```

您应该能够仅提取后面的第一组大括号中的`>Combo<`位

```
myText = m.group(1); 
```

这可能并不完美，但应该非常接近 - 我试图表明您需要找到“>Combo< 之后的第一个左大括号直到下一个右大括号”。括号表示“这是我想要的位”，索引`group`从`match`对象中提取它。

# android - 在小部件上以编程方式设置 ImageView 的宽度和高度

> ID：15171654
> 
> 赞同：13
> 
> 时间：2013-03-02T06:45:12.980
> 
> 标签：android, android-widget

我正在使用下面的代码使用 remoteview 在小部件 imageview 上设置图像现在我想将高度和宽度设置为 imageview 运行时。

```
if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(WidgetActivity1_1.this);
    RemoteViews remoteViews = new RemoteViews(WidgetActivity1_1.this.getPackageName(), R.layout.widget_layout1_1);
    Intent configIntent = new Intent(WidgetActivity1_1.this,UpdateWidgetService.class);
    configIntent.putExtra("Appid", appWidgetId);
    PendingIntent configPendingIntent = PendingIntent.getService(WidgetActivity1_1.this, appWidgetId, configIntent, 0);
    remoteViews.setImageViewResource(R.id.imgviewGrow, R.drawable.flower1);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-02T06:58:28.317

您可以这样设置布局参数：

```
myImageView.setLayoutParams(new ViewGroup.LayoutParams(
ViewGroup.LayoutParams.WRAP_CONTENT,
ViewGroup.LayoutParams.WRAP_CONTENT)); 
```

或设置一个数字。

图像大小操作有时可能很棘手，建议首先获取图像布局参数，更改它并重新设置：

```
android.view.ViewGroup.LayoutParams layoutParams = myImageView.getLayoutParams();
layoutParams.width = 30;
layoutParams.height = 30;
myImageView.setLayoutParams(layoutParams); 
```

如果您仍然无法更改它的大小，请尝试将其放入 LinearLayout 并使用布局参数操作 imageView 大小：

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(30, 30);
myImageView.setLayoutParams(layoutParams); 
```

**更新：**以下帖子应该可以帮助您满足您的需求：

[RemoteViews 设置布局参数？](https://stackoverflow.com/questions/3330847/remoteviews-setlayoutparams)

[http://pastebin.com/As3L8xWu](http://pastebin.com/As3L8xWu)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-02T07:16:07.497

嗨，试试这些线来设置 imageview 的宽度和高度

```
image_view.getLayoutParams().height = 20;

image_view.getLayoutParams().width = 100; 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-12-31T09:16:00.530

这应该工作！

`image.getLayoutParams().height = 90;`

# android - StreamCorruptedException 被捕获？

> ID：15171659
> 
> 赞同：0
> 
> 时间：2013-03-02T06:46:06.703
> 
> 标签：android, object, serialization, storage

我无法将对象存储到设备存储中。起初我得到 a[`NotSerializableException`](http://developer.android.com/reference/java/io/NotSerializableException.html)所以我使对象 Serializable 并且现在在`try {} catch {}`块中它正在抛出[`StreamCorruptedException`](http://developer.android.com/reference/java/io/StreamCorruptedException.html)我认为指向的行`in = new ObjectInputStream(byteArray);`。结果，该列表没有被填充。我可以在块之外填充列表，`try {} catch {}`但这会破坏将列表对象存储到设备上的目的。以下是相关代码：

```
public class MainListFragment extends ListFragment implements Serializable {

    OnListSelectedListener mCallback;
    public transient ObjectStorage mainObjectList = new ObjectStorage(); // creates
                                                                        // the
                                                                        // list
                                                                        // of
                                                                        // objects
    SharedPreferences mPrefs;
    int mCurrentPosition = -1;

    // The container Activity must implement this interface so the frag can
    // deliver messages
    public interface OnListSelectedListener {

        /** Called by ListFragment when a list item is selected */
        public void onItemSelected(int position, String schedulename,
                String[] ampm, boolean[] days, int[] times, boolean vibrate);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onStart() {
        super.onStart();

        updateStorage();
        ByteArrayInputStream byteArray = new ByteArrayInputStream(mPrefs
                .getString("myobject", "").getBytes());
        ObjectInputStream in;
        try {
            in = new ObjectInputStream(byteArray);
            ObjectStorage updatedStorageList = (ObjectStorage) in.readObject();
            Log.i("mydebug", "Populating list with storage");
            CustomListAdapter adapter = new CustomListAdapter(getActivity(),
                    R.layout.listview_item_row, updatedStorageList);
            // setListAdapter(new ArrayAdapter<String>(getActivity(), layout,
            // arraylist));
            setListAdapter(adapter);
            setListShown(true);
        } catch (StreamCorruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void updateStorage() {
        getActivity();// used for MODE_PRIVATE

        // store object list into android system
        mPrefs = getActivity().getPreferences(Context.MODE_PRIVATE);
        SharedPreferences.Editor ed = mPrefs.edit();
        ByteArrayOutputStream arrayOutputStream = new ByteArrayOutputStream();
        ObjectOutputStream out;
        try {
            Log.i("mydebug", "Updating object storage");
            out = new ObjectOutputStream(arrayOutputStream);
            out.writeObject(mainObjectList);
            out.close();
            arrayOutputStream.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        ed.putString("myobject", arrayOutputStream.toString());
        ed.commit();
    }
} 
```

以及 LogCat 信息：

```
03-02 00:41:07.857: I/mydebug(12435): TEMPMAINFRAG: MainListFragment{41dfe598 id=0x7f070028}
03-02 00:41:07.857: I/mydebug(12435): 1
03-02 00:41:07.857: D/AbsListView(12435): Get MotionRecognitionManager
03-02 00:41:07.877: D/AbsListView(12435): Get MotionRecognitionManager
03-02 00:41:07.877: I/mydebug(12435): Updating object storage
03-02 00:41:07.877: W/System.err(12435): java.io.StreamCorruptedException
03-02 00:41:07.877: W/System.err(12435):    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2106)
03-02 00:41:07.877: W/System.err(12435):    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:372)
03-02 00:41:07.877: W/System.err(12435):    at com.example.android.fragments.MainListFragment.onStart(MainListFragment.java:94)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.Fragment.performStart(Fragment.java:1332)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:906)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1815)
03-02 00:41:07.877: W/System.err(12435):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:518)
03-02 00:41:07.877: W/System.err(12435):    at com.example.android.fragments.MainActivity.onStart(MainActivity.java:104)
03-02 00:41:07.877: W/System.err(12435):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1178)
03-02 00:41:07.887: W/System.err(12435):    at android.app.Activity.performStart(Activity.java:5058)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3554)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread.access$800(ActivityThread.java:139)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1230)
03-02 00:41:07.887: W/System.err(12435):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 00:41:07.887: W/System.err(12435):    at android.os.Looper.loop(Looper.java:137)
03-02 00:41:07.887: W/System.err(12435):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-02 00:41:07.887: W/System.err(12435):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 00:41:07.887: W/System.err(12435):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 00:41:07.887: W/System.err(12435):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-02 00:41:07.887: W/System.err(12435):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-02 00:41:07.887: W/System.err(12435):    at dalvik.system.NativeStart.main(Native Method)
03-02 00:41:07.947: I/Adreno200-EGLSUB(12435): <ConfigWindowMatch:2087>: Format RGBA_8888.
03-02 00:41:08.908: I/mydebug(12435): TEMPMAINFRAG: MainListFragment{41e237f8 id=0x7f070028}
03-02 00:41:08.908: I/mydebug(12435): 1
03-02 00:41:08.918: D/AbsListView(12435): Get MotionRecognitionManager
03-02 00:41:08.928: D/AbsListView(12435): Get MotionRecognitionManager
03-02 00:41:08.938: I/mydebug(12435): Updating object storage
03-02 00:41:08.938: W/System.err(12435): java.io.StreamCorruptedException
03-02 00:41:08.938: W/System.err(12435):    at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2106)
03-02 00:41:08.938: W/System.err(12435):    at java.io.ObjectInputStream.<init>(ObjectInputStream.java:372)
03-02 00:41:08.938: W/System.err(12435):    at com.example.android.fragments.MainListFragment.onStart(MainListFragment.java:94)
03-02 00:41:08.938: W/System.err(12435):    at android.support.v4.app.Fragment.performStart(Fragment.java:1332)
03-02 00:41:08.938: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:906)
03-02 00:41:08.938: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
03-02 00:41:08.938: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
03-02 00:41:08.948: W/System.err(12435):    at android.support.v4.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1815)
03-02 00:41:08.948: W/System.err(12435):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:518)
03-02 00:41:08.948: W/System.err(12435):    at com.example.android.fragments.MainActivity.onStart(MainActivity.java:104)
03-02 00:41:08.948: W/System.err(12435):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1178)
03-02 00:41:08.948: W/System.err(12435):    at android.app.Activity.performStart(Activity.java:5058)
03-02 00:41:08.948: W/System.err(12435):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2061)
03-02 00:41:08.948: W/System.err(12435):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
03-02 00:41:08.948: W/System.err(12435):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3554)
03-02 00:41:08.948: W/System.err(12435):    at android.app.ActivityThread.access$800(ActivityThread.java:139)
03-02 00:41:08.948: W/System.err(12435):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1230)
03-02 00:41:08.948: W/System.err(12435):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-02 00:41:08.948: W/System.err(12435):    at android.os.Looper.loop(Looper.java:137)
03-02 00:41:08.958: W/System.err(12435):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-02 00:41:08.958: W/System.err(12435):    at java.lang.reflect.Method.invokeNative(Native Method)
03-02 00:41:08.958: W/System.err(12435):    at java.lang.reflect.Method.invoke(Method.java:511)
03-02 00:41:08.958: W/System.err(12435):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-02 00:41:08.958: W/System.err(12435):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-02 00:41:08.958: W/System.err(12435):    at dalvik.system.NativeStart.main(Native Method)
03-02 00:41:09.178: I/Adreno200-EGLSUB(12435): <ConfigWindowMatch:2087>: Format RGBA_8888.
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getExtractedText on inactive InputConnection
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getTextBeforeCursor on inactive InputConnection
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getSelectedText on inactive InputConnection
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getTextAfterCursor on inactive InputConnection
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getExtractedText on inactive InputConnection
03-02 00:41:52.326: W/IInputConnectionWrapper(12435): getTextBeforeCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getExtractedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextBeforeCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getSelectedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextAfterCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getExtractedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextBeforeCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getSelectedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextAfterCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): beginBatchEdit on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): endBatchEdit on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getExtractedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextBeforeCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getSelectedText on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): getTextAfterCursor on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): beginBatchEdit on inactive InputConnection
03-02 00:41:52.336: W/IInputConnectionWrapper(12435): endBatchEdit on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T23:01:27.860

摆脱所有 ByteArrayInput/OutputStreams，转换为 String，String.getBytes() 调用，以及所有其他不是直接调用 writeObject() 的对象，直接连接到 FileOutputStream，或者相反从直接连接到 FileInputStream 的 ObjectInputStream 中直接读取所需的对象。

您正在三个或四个不同的点损坏数据。即使它没有破坏数据，也没有实际需要任何这种恶意。

# database - 在 symfony 2.0 中创建多个数据库的步骤

> ID：15171660
> 
> 赞同：0
> 
> 时间：2013-03-02T06:46:08.307
> 
> 标签：database, symfony, entity, symfony-2.0

我正在使用单个数据库连接。现在我需要使用两个数据库连接。我需要知道创建两个数据库的步骤。我有很多疑问。生成实体命令是否与我们用于单个数据库连接的命令相同。

请逐步解释创建多个实体和多个数据库连接的过程。

在 /Symfony/app/config/config.yml 我写代码：

```
doctrine:
dbal:
    default_connection:   default
    connections:
        default:
            driver:   %database_driver%
            host:     %database_host%
            port:     %database_port%
            dbname:   %database_name%
            user:     %database_user%
            password: %database_password%
            charset:  UTF8
        customer:
            driver:   %database_driver2%
            host:     %database_host2%
            port:     %database_port2%
            dbname:   %database_name2%
            user:     %database_user2%
            password: %database_password2%
            charset:  UTF8

orm:
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                dbBundle: ~
        client:
            connection:       client
            mappings:
                dbBundle: ~ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:56:26.030

我找到了答案：在捆绑名称之前添加命名空间

```
orm:
    default_entity_manager:   default
    entity_managers:
        default:
            connection:       default
            mappings:
                <Namespace>dbBundle: ~
        client:
            connection:       client
            mappings:
                 <Namespace>dbBundle: ~ 
```

# python-3.x - 程序已编写但无法连接

> ID：15171663
> 
> 赞同：0
> 
> 时间：2013-03-02T06:46:45.210
> 
> 标签：python-3.x

该程序在图上取 4 个点并将它们放入拉格朗日多项式中。我得到了正确输出的术语，但我需要将 4 个术语连接成 1 行代码。无论我在哪里尝试连接，它都会不断地弄乱循环，从而弄乱我的条件。我确信有一种更简单的方法可以做到这一点，但我必须使用字符串和连接来完成我的作业。任何帮助，将不胜感激。谢谢。

```
import string
from math import *

def main():
    n=4
    abscissa=[-5,-2,3,7]
    ordinate=[4,-6,8,1]

    for j in range(n):
        LP=str(ordinate[j])
        denom="1"
        for k in range(n):
            if k!=j:
                denom= denom+"*("+str(abscissa[j])+"-"+str(abscissa[k])+")"
                LP=LP+"*(x-"+str(abscissa[k])+")"
        LP=LP+'/'+denom
        print(LP)

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:58:43.830

收集条款并加入他们：

```
import string
from math import *

def main():
    n=4
    abscissa=[-5,-2,3,7]
    ordinate=[4,-6,8,1]
    result = ''
    for j,y in enumerate(ordinate):
        if j!=0:
            result += '+'
        LP=str(y)
        denom="1"
        for k,x in enumerate(abscissa):
            if k!=j:
                denom += '*({}-{})'.format(abscissa[j],x)
                LP += '*(x-{})'.format(x)
        LP += '/' + denom
        result += LP
    print(result)
main() 
```

# glassfish - 将 openMRS.war 部署到 glassfish v.2 的问题

> ID：15171665
> 
> 赞同：1
> 
> 时间：2013-03-02T06:47:00.683
> 
> 标签：glassfish

我正在尝试将 openMRS v.1.9.2 部署到运行 CentOS 和 Glassfish 2 的本地 VM 以进行工作。不幸的是，我无法让它工作。通常，我只下载在源代码伪造中找到的独立版本。我只需双击罐子，就可以了。

我通常只是通过 SSH 连接到虚拟机，所以我首先尝试通过终端进行所有操作。以下是我采取的步骤：

1.  使用`wget`, 检索`.zip`

2.  创建一个`dir`（我刚刚调用它`/openmrs`），cd 进入新目录，然后展开`.zip`.

3.  `cd`进入目录。

4.  此时，开始有两种选择`openMRS`。

    *   运行`bash`脚本：`./run-on-linux.sh`

    *   运行`.JAR`：`java -jar [insert_jar_name].jar -commandline`

当我运行时`.JAR`，我得到一个堆栈跟踪。

当我尝试运行`bash`脚本时，我收到另一个错误。

无论如何，我以为我在`openMRS` `JIRA`票中找到了一个潜在的解决方案，[但它似乎针对的是 Glassfish 3，而不是 Glassfish 2（这是我需要使用的）](https://tickets.openmrs.org/browse/TRUNK-3410)。

然后我尝试`.WAR`通过 Glassfish 管理 UI 部署。我以为它会起作用，但是在经历了选择语言，是否使用演示数据等步骤后，我收到了[这个](http://i.imgur.com/wn3vela.png)。

有人有将 openMRS 部署到 Glassfish 2.1.1 的经验吗？不幸的是，Glassfish 3 似乎不是一个现实的选择。我真的很感激这里的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T18:47:18.273

虽然它不能解决我无法将 openMRS 成功部署到 Glassfish v.2 实例的问题，但我确实设法通过在 VM 上安装 MySQL 让自己更进一步。我们的工作机器都是为 postgres 设置的，所以我想早先应该猜到没有安装 MySQL 服务器是问题所在。

[这是我用来安装 MySQL 的教程](http://wpguru.co.uk/2012/04/how-to-install-mysql-on-centos-2/)

# mysql - 如何从mysql中的表中获取唯一记录

> ID：15171666
> 
> 赞同：0
> 
> 时间：2013-03-02T06:47:37.350
> 
> 标签：mysql, phpmyadmin

我有两个名为`abc`and的表`xyz`。该表`xyz`包含列 id 并`xyz`包含`abc_id`.

我想找到第一个表中存在但第二个表中不存在的记录。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-07T06:55:27.477

如果要从 abc 表中获取不在 xyz 表中的记录；

```
SELECT abc_id FROM abc 
WHERE abc_id NOT IN (SELECT id from xyz) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T06:51:28.517

```
Select id from xyz 
where id not in ( Select abc_id from abc) 
```

[在此处](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_not-in)查看有关`NOT IN()`比较功能的更多详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T06:53:47.463

您可以使用 IN 作为@m.hasan 答案或使用[EXISTS](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)

```
> Select id from xyz  where not exists ( Select abc_id from abc where
> abc_id = xyz.id) 
```

# vba - 使用 SUMIFS 添加持续时间总是给出 00:00:00

> ID：15171671
> 
> 赞同：1
> 
> 时间：2013-03-02T06:48:07.757
> 
> 标签：vba, excel, xls

```
Sub Add_sumf()
Dim i As Integer
i = 3
Dim cellDate As Integer
cellDate = 0
Dim cellDate1 As Date
cellDate1 = TimeValue("00:00:00")
Dim total    As Integer
total = 0
Dim j As Integer
j = 2
Dim k As Integer
k = 2
Set aa = Workbooks("Book3").Worksheets(1)
Set bb = Workbooks("Final_result").Worksheets(1)
Do While bb.Cells(1, k).Value <> ""

    For Each y In bb.Range("A:A")
    On Error GoTo Label

    If UCase(bb.Cells(j, "A").Value) <> "" Then

     cellDate1 = WorksheetFunction.SumIfs(aa.Range("F:F"), aa.Range("B:B"), UCase(bb.Cells(1, k).Value), aa.Range("G:G"), UCase(bb.Cells(j, "A").Value))                         
    bb.Cells(j, k).Value = TimeValue(cellDate1)

    cellDate1 = TimeValue("00:00:00")
    bb.Cells(j, k).NumberFormat = "[h]:mm:ss"

    On Error GoTo Label

    j = j + 1
    Else
    Exit For
    End If
    Next
    j = 2
    k = k + 1
 Loop
Label:
    'MsgBox Err.Description
    Exit Sub

End Sub 
```

我使用上面的代码根据其他两列的值添加持续时间，但我总是得到 00:00:00 作为结果。

如果我使用下面的代码，我会得到答案，但它太慢非常慢

```
Sub add_it_time()
Dim i As Integer
i = 3
Dim cellDate As Integer
cellDate = 0
Dim cellDate1 As Date
cellDate1 = TimeValue("00:00:00")
Dim total    As Integer
total = 0
Dim j As Integer
j = 2
Dim k As Integer
k = 2
Set aa = Workbooks("Book3").Worksheets(1)
Set bb = Workbooks("Final_result").Worksheets(1)
Do While bb.Cells(1, k).Value <> ""
 'MsgBox bb.Cells(1, k).Value
    For Each y In bb.Range("A:A")
    On Error GoTo Label
   ' MsgBox UCase(bb.Cells(j, "A").Value)
    If UCase(bb.Cells(j, "A").Value) <> "" Then

        For Each x In aa.Range("F:F")
        On Error Resume Next
        If UCase(aa.Cells(i, "B").Value) = UCase(bb.Cells(j, "A").Value) Then
       ' MsgBox aa.Cells(i, "F").Text
       ' total = total + Int(get_Second(aa.Cells(i, "F").Text))
        If UCase(aa.Cells(i, "G").Value) = UCase(bb.Cells(1, k).Value) Then
         'MsgBox aa.Cells(i, "F").Text
        cellDate1 = cellDate1 + TimeValue(aa.Cells(i, "F").Value)
        End If
        End If
        i = i + 1
        Next
        i = 3
        On Error GoTo Label
         bb.Cells(j, k).NumberFormat = "h:mm:ss"
        bb.Cells(j, k).Value = WorksheetFunction.Text(cellDate1, "[hh]:mm:ss")
        total = 0
        cellDate1 = 0
    j = j + 1
    Else
    Exit For
    End If
    Next
    j = 2
    k = k + 1
 Loop
Label:
    'MsgBox Err.Description
    Exit Sub
End Sub 
```

包含日期的源列是一般格式我是 VBA 宏的新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:32:54.113

**更新的解决方案：**

在与 OP 聊天讨论后，决定纯公式解决方案很好 - 以下是要在**单独**的工作表上执行的公式/操作`A1`：

1.  A 行将生成表头：在`A1`I added`Agent Name / Release Code`中，开始`B1`有一个所有可用`Release Code`值的列表（很容易使用`Remove Duplicates`）。
2.  为了简单和有效，我定义了以下命名范围（因为初始数据不是静态的）：`AgentNames=OFFSET('Agent State'!$B$2,0,0,COUNTA('Agent State'!$B:$B)-1,1)`- 这将返回初始工作表上**不包括**标题的名称范围；`TimeInStateData=OFFSET(AgentNames,0,4)`并`ReleaseCodes=OFFSET(AgentNames,0,5)`作为移位`AgentNames`范围。
3.  在列`A`中，我们应该获得应该是唯一的名称列表，因此在列中选择**不小于唯一名称数量的**`A`任意数量的单元格- 对于我使用的示例，然后输入该公式：然后按+ +而不是通常- 这将定义一个**Multicell ARRAY**公式并在其周围产生花括号（但不要**手动**输入它们！）。**`A2:A51``=IFERROR(INDEX(AgentNames,SMALL(IF(MATCH(AgentNames,AgentNames,0)=ROW(INDIRECT("1:"&ROWS(AgentNames))),MATCH(AgentNames,AgentNames,0),""),ROW(INDIRECT("1:"&ROWS(AgentNames))))),"")``CTRL``SHIFT``ENTER``ENTER`**`{}`****
*******   `B2`: `=IF(OR($A2="",SUMPRODUCT(--($A2=AgentNames),--(B$1=ReleaseCodes),TIMEVALUE(TimeInStateData))=0),"",SUMPRODUCT(--($A2=AgentNames),--(B$1=ReleaseCodes),TIMEVALUE(TimeInStateData)))`- 普通公式，它将为空名称或零时间返回空值。*   将公式从复制`B2`到整个表格。******

 ******评论：

*   时间值总和的结果范围应格式化为`Time`.
*   如果将来要扩展名称列表 -**对新范围重复步骤 3**，但不要向下拖动公式 - 这将导致`You cannot change part of an array`错误。

示例文件：[https ://www.dropbox.com/s/quudyx1v2fup6sh/AgentsTimeSUM.xls](https://www.dropbox.com/s/quudyx1v2fup6sh/AgentsTimeSUM.xls)

**初步答案：**

也许这太简单明了，但乍一看我不明白为什么你有那行代码：

`cellDate1 = TimeValue("00:00:00")`

在你之后`SUMIFS`：`cellDate1 = WorksheetFunction.SumIfs(aa.Range("F:F"), ...`

尝试删除您将零分配给的第一个`cellDate1`。******

# android - 使用classLoader时输入流返回null

> ID：15171675
> 
> 赞同：2
> 
> 时间：2013-03-02T06:48:29.370
> 
> 标签：android, classloader, inputstream

我在这个位置的 sdcard 中有一些文件：

```
/Android/data/com.abc.xyz/files/main.1.com.abc.xyz.obb/myfile.xml 
```

我正在尝试从上述路径读取文件并返回一个输入流，但输入的 stram 返回为空，我检查了路径也正确。

```
InputStream inputStream = null;
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    if (classLoader == null) {
        classLoader = this.getClass().getClassLoader();
    }
// here filepath is the path that i have added above.
    inputStream = classLoader.getResourceAsStream(filePath);
    return inputStream;
    } 
```

为什么我变空了？

# performance - 这个 wcf 服务效率高吗？

> ID：15171679
> 
> 赞同：0
> 
> 时间：2013-03-02T06:48:38.643
> 
> 标签：performance, wcf

界面

```
[ServiceContract]
public interface Idemo
{
    [OperationContract]
    [WebGet(UriTemplate = "check?Value1={id}&Value2={name}&Value3={city}",
ResponseFormat = WebMessageFormat.Xml, 
BodyStyle = WebMessageBodyStyle.Bare)]
    string GetData(string id,string name);
} 
```

班级

```
public class demo : Idemo
{
public string GetData(string id,string name,string city) 
    {           

       DataTable tb;
        tb = con.GetDataTable("query");
        tb.TableName = "data";                     
        System.IO.StringWriter writer = new System.IO.StringWriter();
        tb.WriteXml(writer, XmlWriteMode.IgnoreSchema, false);
        return writer.ToString();
    }
} 
```

返回表如下所示

```
sem sub1 sub2 sub3

 1   50   40   30

 2   60   20   40 
```

界面设计好不好？我没有使用任何合同。有没有其他加快速度的方法？

我听说将 DataSet 转换为自定义 DataContract 并发送它..在我的场景中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:34:17.447

如果您有性能问题，则不在您发布的代码中。

您用来获取数据的方法的名称是“getDataTable”，您还提到了 DataSets 的使用。

使用数据集有开销，您应该考虑优化如何从数据库中获取数据。

# android - Gmail 登录：Google play 服务已过期

> ID：15171684
> 
> 赞同：1
> 
> 时间：2013-03-02T06:49:35.047
> 
> 标签：android, google-plus, google-play-services

当我尝试使用时：

```
mPlusClient = new PlusClient.Builder(this, this, this)
        .setVisibleActivities("http://schemas.google.com/AddActivity",
        "http://schemas.google.com/BuyActivity").build(); 
```

它触发`onConnectionFailed`并且`ConnectionResult`是：

```
ConnectionResult{statusCode=SERVICE_VERSION_UPDATE_REQUIRED,
resolution=null} 
```

总的来说，它说：

```
03-02 12:12:50.969: W/GooglePlayServicesUtil(18431): Google Play services out of date.  Requires 3025100 but found 2012110 
```

那么，我究竟应该在我的设备上更新什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T18:38:55.273

Google Play 服务是 Play 商店的相关功能。您可以在此处直接从网上商店安装它：

[https://play.google.com/store/apps/details?id=com.google.android.gms&hl=en](https://play.google.com/store/apps/details?id=com.google.android.gms&hl=en)

如果您使用的是模拟器，则 Google Play 服务包含在 AVD 中，并将 Google API 4.2.2 和更高版本设置为平台目标。我只在ARM上测试过。

有关安装的详细信息，请参阅[此帖子](https://stackoverflow.com/questions/16000548/google-play-services-in-emulator-implementing-google-plus-login-button-etc)。

# android - Android Rotation 隐藏一些小部件

> ID：15171686
> 
> 赞同：0
> 
> 时间：2013-03-02T06:49:39.457
> 
> 标签：android, android-layout, scrollview, autorotate

这是我的活动的 xml 文件。除了在旋转的情况下，它运行良好。在我的手机中，如果启用了 AutoRotation，那么屏幕也会旋转。在旋转期间，它不显示名为“退出”的按钮。我试图滚动到底部，但我无法滚动。

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

<AbsoluteLayout 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<LinearLayout 
    android:id="@+id/ll_buttons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal"
    android:layout_below="@+id/slogon"      
    android:layout_marginTop="50dip">
    <ImageView
        android:id="@+id/image1"
        android:layout_width="match_parent"
        android:layout_height="481dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:background="@drawable/ic_launcher" />
</LinearLayout>
<Button android:layout_height="wrap_content" android:textColor="#FF0000"     android:textStyle="bold" android:id="@+id/button2" android:layout_width="wrap_content" android:text="EXISTINGFARMER" android:layout_x="161dip" android:layout_y="157dip"></Button>
<Button android:layout_height="wrap_content" android:textColor="#FF0000" android:textStyle="bold" android:id="@+id/button1" android:layout_width="wrap_content" android:text="NEW FARMER" android:layout_x="34dip" android:layout_y="157dip"></Button>
<Button android:layout_height="wrap_content" android:textColor="#FF0000" android:textStyle="bold" android:id="@+id/btn_exit" android:layout_width="100dip" android:text="EXIT" android:layout_x="105dip" android:layout_y="233dip"></Button>
<TextView android:layout_height="wrap_content" android:textStyle="bold" android:textSize="40dip" android:layout_width="wrap_content" android:textColor="#FFEA00" android:id="@+id/heading" android:text="S.V.Sugar Mills" android:layout_x="29dip" android:layout_y="14dip"></TextView>

<TextView
    android:id="@+id/subheading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="38dp"
    android:layout_y="97dp"
    android:text="The New and Old Farmer Details."
    android:textColor="#0000A0"
    android:textSize="15dip"
    android:textStyle="bold" />

</AbsoluteLayout>
</ScrollView> 
```

我不明白这个错误，我有人知道如何在旋转期间滚动，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:55:12.853

首先，如果您想支持纵向或横向模式的滚动，您必须将所有小部件放在滚动视图中。

请使用滚动视图。Scrollview 仅支持一个直接子级。因此，您需要将相对布局或线性布局作为滚动视图的子布局，将所有小部件控件放在该子布局中。

[在此处](http://www.androidaspect.com/2012/02/scrollview-tutorial-android-ui.html)查找滚动视图教程。

# php - 没有得到如何通过 php 中的特定键对多维数组进行排序

> ID：15171688
> 
> 赞同：0
> 
> 时间：2013-03-02T06:49:46.930
> 
> 标签：php, arrays, multidimensional-array, sorting

这可能是问题的重复，但在我的情况下不知道该怎么做。

我有一个数组

```
array([status]=>array([0]=>array([time][id])
                array([1]=>array([time][id]) 
```

试过了`krsort($array[status]);`

但是在 id 上进行了排序，因为我想根据时间按降序进行排序。

# python - 解释器维护的整数缓存是怎么回事？

> ID：15171695
> 
> 赞同：98
> 
> 时间：2013-03-02T06:50:35.073
> 
> 标签：python, caching, code-analysis, literals, python-internals

在深入研究 Python 的源代码后，我发现它维护了一个`PyInt_Object`s 数组，范围从`int(-5)`到`int(256)`(@src/Objects/intobject.c)

一个小实验证明了这一点：

```
>>> a = 1
>>> b = 1
>>> a is b
True
>>> a = 257
>>> b = 257
>>> a is b
False 
```

但是，如果我在 py 文件中一起运行这些代码（或用分号连接它们），结果会有所不同：

```
>>> a = 257; b = 257; a is b
True 
```

我很好奇为什么它们仍然是同一个对象，所以我更深入地研究了语法树和编译器，我想出了下面列出的调用层次结构：

```
PyRun_FileExFlags() 
    mod = PyParser_ASTFromFile() 
        node *n = PyParser_ParseFileFlagsEx() //source to cst
            parsetoke() 
                ps = PyParser_New() 
                for (;;)
                    PyTokenizer_Get() 
                    PyParser_AddToken(ps, ...)
        mod = PyAST_FromNode(n, ...)  //cst to ast
    run_mod(mod, ...)
        co = PyAST_Compile(mod, ...) //ast to CFG
            PyFuture_FromAST()
            PySymtable_Build()
            co = compiler_mod()
        PyEval_EvalCode(co, ...)
            PyEval_EvalCodeEx() 
```

`PyInt_FromLong`然后我在里面和之前/之后添加了一些调试代码`PyAST_FromNode`，并执行了一个test.py：

```
a = 257
b = 257
print "id(a) = %d, id(b) = %d" % (id(a), id(b)) 
```

输出看起来像：

```
DEBUG: before PyAST_FromNode
name = a
ival = 257, id = 176046536
name = b
ival = 257, id = 176046752
name = a
name = b
DEBUG: after PyAST_FromNode
run_mod
PyAST_Compile ok
id(a) = 176046536, id(b) = 176046536
Eval ok 
```

意思是在`cst`to`ast`变换的过程中，`PyInt_Object`创建了两个不同的s（实际上是在`ast_for_atom()`函数中执行的），但是后来又合并了。

我发现很难理解 and 中的来源`PyAST_Compile`，`PyEval_EvalCode`所以我在这里寻求帮助，如果有人提供提示，我将不胜感激？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-02T07:54:41.213

Python 缓存 range 中的[`[-5, 256]`](https://github.com/python/cpython/blob/4830f581af57dd305c02c1fd72299ecb5b090eca/Objects/longobject.c#L18-L23)整数，因此该 range 中的整数通常[*但并不总是*](https://ideone.com/C4huhz)相同。

您看到的 257 是 Python 编译器在同一代码对象中编译时优化相同的文字。

在 Python shell 中键入时，每一行都是完全不同的语句，分别进行解析和编译，因此：

```
>>> a = 257
>>> b = 257
>>> a is b
False 
```

但是，如果您将相同的代码放入文件中：

```
$ echo 'a = 257
> b = 257
> print a is b' > testing.py
$ python testing.py
True 
```

每当编译器有机会一起分析文字时，就会发生这种情况，例如在交互式解释器中定义函数时：

```
>>> def test():
...     a = 257
...     b = 257
...     print a is b
... 
>>> dis.dis(test)
  2           0 LOAD_CONST               1 (257)
              3 STORE_FAST               0 (a)

  3           6 LOAD_CONST               1 (257)
              9 STORE_FAST               1 (b)

  4          12 LOAD_FAST                0 (a)
             15 LOAD_FAST                1 (b)
             18 COMPARE_OP               8 (is)
             21 PRINT_ITEM          
             22 PRINT_NEWLINE       
             23 LOAD_CONST               0 (None)
             26 RETURN_VALUE        
>>> test()
True
>>> test.func_code.co_consts
(None, 257) 
```

请注意编译后的代码如何包含`257`.

总之，Python 字节码编译器无法执行大规模优化（如静态类型语言），但它做的比你想象的要多。其中之一是分析文字的使用并避免重复它们。

请注意，这与缓存无关，因为它也适用于没有缓存的浮点数：

```
>>> a = 5.0
>>> b = 5.0
>>> a is b
False
>>> a = 5.0; b = 5.0
>>> a is b
True 
```

对于更复杂的文字，比如元组，它“不起作用”：

```
>>> a = (1,2)
>>> b = (1,2)
>>> a is b
False
>>> a = (1,2); b = (1,2)
>>> a is b
False 
```

但是元组中的文字是共享的：

```
>>> a = (257, 258)
>>> b = (257, 258)
>>> a[0] is b[0]
False
>>> a[1] is b[1]
False
>>> a = (257, 258); b = (257, 258)
>>> a[0] is b[0]
True
>>> a[1] is b[1]
True 
```

（请注意，恒定折叠和窥视孔优化器甚至可以在错误修复版本之间改变行为，因此哪些示例返回`True`或`False`基本上是任意的，并且将来会改变）。

* * *

关于为什么你看到两个`PyInt_Object`被创建，我**猜**这是为了避免文字比较。例如，数字`257`可以用多个文字表示：

```
>>> 257
257
>>> 0x101
257
>>> 0b100000001
257
>>> 0o401
257 
```

解析器有两种选择：

*   在创建整数之前将文字转换为一些公共基础，并查看文字是否等效。然后创建一个整数对象。
*   创建整数对象并查看它们是否相等。如果是，则只保留一个值并将其分配给所有文字，否则，您已经有了要分配的整数。

Python解析器可能使用第二种方法，它避免了重写转换代码并且更容易扩展（例如它也适用于浮点数）。

* * *

读取`Python/ast.c`文件，解析所有数字的函数是`parsenumber`，它调用`PyOS_strtoul`以获取整数值（对于整数）并最终调用`PyLong_FromString`：

```
 x = (long) PyOS_strtoul((char *)s, (char **)&end, 0);
    if (x < 0 && errno == 0) {
        return PyLong_FromString((char *)s,
                                 (char **)0,
                                 0);
    } 
```

正如您在此处看到的，解析器不*检查*它是否已经找到具有给定值的整数，因此这解释了为什么您看到创建了两个 int 对象，这也意味着我的猜测是正确的：解析器首先创建常量并且只有在之后才优化字节码以将相同的对象用于相同的常量。

执行此检查的代码必须位于`Python/compile.c`or`Python/peephole.c`中，因为这些文件将 AST 转换为字节码。

特别是，该`compiler_add_o`功能似乎是做到这一点的功能。有这个评论`compiler_lambda`：

```
/* Make None the first constant, so the lambda can't have a
   docstring. */
if (compiler_add_o(c, c->u->u_consts, Py_None) < 0)
    return 0; 
```

因此，它似乎`compiler_add_o`用于插入函数/ lambdas 等的常量。该`compiler_add_o`函数将常量存储到一个`dict`对象中，然后紧接着相等的常量将落在同一个槽中，从而在最终字节码中产生一个常量。

# iphone - 本地声明隐藏实例变量 - tableView 未合成

> ID：15171697
> 
> 赞同：2
> 
> 时间：2013-03-02T06:50:43.327
> 
> 标签：iphone, ios, objective-c, xcode

我已阅读有关使用下划线修复编译器警告的信息，即“本地声明隐藏实例变量”，但我无法实现修复。我读过的解决方案说在我的 .h 文件中使用下划线，在我的 .m 文件中使用 @synthesize 部分。但是，我没有合成我的 tableView。请看下面我的头文件：

**.h 文件**

```
@interface ListViewController : GAITrackedViewController <UISearchDisplayDelegate, 
UISearchBarDelegate, UITableViewDataSource, UITableViewDelegate> {

IBOutlet UITableView *tableView;

} 
```

**.m 文件**

```
//SYNTHESIZE
@synthesize listItems, filteredListItems, savedSearchTerm, savedScopeButtonIndex, 
searchWasActive, mapView, loadingImageView, loadingActivity;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

 //FIRST WARNING for tableView HERE

if (tableView == self.searchDisplayController.searchResultsTableView){
    return [self.filteredListItems count];
    }
    else{
        return [self.listItems count];
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    //SECOND WARNING for tableView HERE

    [tableView setRowHeight: 60.00];
    return 1;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:53:45.503

您有一个名为 tableView 的插座/属性，并且您的委托方法也包含 tableView。

因此，您需要更改其中任何一个。通常，您将委托和数据源的参数名称更改为

```
- (NSInteger)tableView:(UITableView *)aTableView 
 numberOfRowsInSection:(NSInteger)section { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T06:51:34.203

改变 ：

```
IBOutlet UITableView *tableView; 
```

至 ：

```
IBOutlet UITableView *tableView1; 
```

在您的 .m 文件中也进行相同的必要更改。出现此警告是因为在下面的委托方法中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

有一个`UITableView`名字的引用，`tableView`你给了相同的名字。此变量的范围是函数级别，而在 .h 中声明的变量范围是类级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T11:24:58.063

不要使用相同的名称：IBOutlet UITableView *tableView; 使用 tableview 或 table_View

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T11:50:19.530

我也确实在这个问题上花了很多时间。最后我可以解决这个问题。问题是我们应该照顾由我们创建的网点。如果您更改插座名称，那么您必须在更改后正确连接它们。在我的情况下，经过大量的努力，我可以完成这个问题，希望它能帮助其他人......例如，如果您有一个名为 tableView 的插座/属性和您的委托方法还包含 tableView。

因此，您需要更改其中任何一个。通常，您将委托和数据源的参数名称更改为 Change ：

```
IBOutlet UITableView *tableView; 
```

至 ：

```
IBOutlet UITableView *tableView1; 
```

有关更多信息，请访问此链接->[本地声明隐藏实例变量 - 未合成的 tableView](https://stackoverflow.com/questions/15171697/local-declaration-hides-instance-variable-tableview-not-synthesized)

# java - Java中（嵌套）集合的多行漂亮打印

> ID：15171699
> 
> 赞同：9
> 
> 时间：2013-03-02T06:50:56.707
> 
> 标签：java, collections, libraries, pretty-print

我希望能够（漂亮地）打印我的地图的内容。

它们应该有换行符和缩进，而不是单行；忽略 collections/iterables/etc 的 toString 方法；并递归到嵌套集合中。

我对地图特别感兴趣。我想 JSON'ing 可能是相关的，但我不想走那么远，或者至少 - 我不希望我的代码为了漂亮地打印它而必须了解 JSON。我有什么选择（除了自己写这个）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-03T23:22:07.843

您可以使用 apache commons 集合中的[MapUtils.debugPrint](http://commons.apache.org/proper/commons-collections/javadocs/api-3.2.1/org/apache/commons/collections/MapUtils.html#debugPrint%28java.io.PrintStream,%20java.lang.Object,%20java.util.Map%29)方法来打印嵌套地图。

> 此方法打印一个格式良好的描述地图的字符串。每个映射条目都将打印键、值和值类名。当值为 Map 时，会发生递归行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-02T06:56:08.803

尝试用新行和标签替换每个条目的开头，如下所示

`myMap.toString().replace("[", "\n\t[");`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T06:55:35.637

我不是 100% 肯定，可能这就是你要找的东西，你称之为*漂亮的印刷*-

```
Map<Integer,String> map = new HashMap<Integer,String>();
...
for(Map.Entry<Integer,String> entry: map.entrySet()){
    System.out.println(entry.getKey()+" - "+ entry.getValue());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-11T07:32:14.147

我正在寻找用 Java 打印的嵌套集合，它把我带到了这里。然而，答案只适用于地图，因此我想我会为嵌套集合添加我的解决方案。如果您想要换行符添加“]\n”而不是“]”，它会产生类似 JSON 的输出。

请注意，如果 Object[] 包含嵌套元素，这将不会产生漂亮的输出。您需要编写一个单独的方法来处理嵌套数组。此外，它不会很好地打印原始数组，因为您需要为每个原始数组类型添加一个 else 语句。

```
private static <A extends Collection<B>, B> String nestedToString(A collection) {
    if (collection == null)
        return "null";

    String ret = "";

    Iterator<B> colIterator = collection.iterator();
    if (colIterator.hasNext()) {
        ret += '[';
        while (colIterator.hasNext()) {
            B object = colIterator.next();
            if (object == null) {
                ret += "null";
            } else if (object instanceof Collection) {
                ret += nestedToString((Collection) object);
            } else if (object instanceof Object[]) {
                ret += Arrays.deepToString((Object[]) object);
            } else {
                ret += object;
            }
            if (colIterator.hasNext()) {
                ret += ", ";
            }
        }
        ret += ']';
    }
    return ret;
} 
```

# flume - 使用 Flume 将日志聚合到 oracle db

> ID：15171700
> 
> 赞同：1
> 
> 时间：2013-03-02T06:51:00.493
> 
> 标签：flume

我想聚合日志文件（每天 10GB），提取 ERROR 日志，然后将它们写入 Oracle DB，我可以使用 apache-flume 来实现吗？

我阅读了[文档](http://flume.apache.org/FlumeUserGuide.html)，但没有找到类似“Oracle Sink”的内容，因此我将创建一个自定义 Sink 来将 Flume 事件写入 Oracle。这是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T11:44:55.513

是的，创建自定义接收器是正确的方法。这很容易做到。查看内置接收器的源代码，例如 Avro Sink，开始使用。

# web-applications - HTML 前端与 2 个不同团队开发的 Spring MVC 后端的持续集成

> ID：15171702
> 
> 赞同：0
> 
> 时间：2013-03-02T06:51:09.367
> 
> 标签：web-applications, spring-mvc, continuous-integration

持续集成 2 个并行进程的最佳方法是什么：

*   设计师团队开发静态 HTML 前端
*   后端团队开发 Java Spring MVC 后端

问题是：

*   设计人员如何在不运行本地 Tomcat 的情况下使用 jsp 测试他们的 UI 更新，包括 OR
*   后端团队如何从 UI 团队获取更新，而不为每次 UI 更新手动更新 JSP 页面
*   是否可以在 2 个不同的 git 存储库（一个用于前端，一个用于后端）中创建项目并使用 Jenkins 构建完整的解决方案
*   什么是从后端（Spring MVC）中分离 UI（HTML）的最佳实践，只需最少的集成工作（最好是与 Jenkins 自动集成）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:11:18.657

我有一个建议：

集成时实现并行工作和最少工作的步骤：-

1.) 定义从控制器返回的所有 UI 模型、功能和数据模型。

2.）构建单页应用程序（SPA）

3.) 使用来自 UI 的 Ajax 调用与控制器进行交互。

4.) 在控制器中使用 jsonView 将值作为 Json 对象返回。

5.) UI团队使用jetty server(Proxy)在控制器返回时返回虚拟响应，以便他们可以基于模型和dataModel创建UI。

6.)后端团队可以使用之前在任何服务器中定义的dataModel和功能从控制器开发他们的代码。由于控制器返回json响应，他们可以检查浏览器本身的返回值作为json字符串。

所以最后，每当您需要集成时，只需在 ui 服务器中将代理设置为 false。

这是我们在 X 项目上工作的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T14:13:56.967

将工作划分为两个团队（设计人员和后端）目前并未反映将软件划分为两个组件。这意味着两个团队都太受彼此工作的影响。我可以看到三种方法来解决这个问题。

**调整应用程序架构以匹配团队**

您可以尝试更改应用程序的架构，将其拆分为两个更符合两个团队的组件。从你的问题的声音来看，这就是你要去的地方。

这对于开发 MVVM 应用程序是最成功的。在 .Net 世界中，设计人员使用 XAML 标记语言和 Expression Blend 工具创建视图，开发人员创建绑定到 XAML 视图的模型视图模型。对于 knockout.js MVVM 应用程序也是如此。

JSP 不适合这个目的，但是如果你正朝着这个方向前进，使用[Thymeleaf听起来对我来说非常有吸引力。](http://www.thymeleaf.org/)它的模板是有效的 xhtml 页面。或者，也许您可​​以在 Web 服务器上放置一个 REST 接口，将对象绑定移动到 javascript 并使用 knockout.js 进行 MVVM。

**调整团队以匹配应用程序架构**

你可以改变团队的组成。将他们合并为一个团队，或者如果人数过多，则创建两个由设计师和后端开发人员组成的团队，让他们处理不同的功能集。通过这种方式，您可以实现开发人员和设计人员之间的更多交互。有更多的时间让开发人员和设计人员坐在同一个屏幕后面对 JSP 进行更改。让开发人员和设计人员讨论每个功能的更改，并找出一种方便的方法来逐个功能地划分这些更改。

**保持团队和架构不变，正式移交** 让设计人员生成 HTML + CSS，让开发人员将这些工件合并到代码中。一个漂亮而干净的截止点，几乎不需要对团队和软件进行更改。

# c# - 简单的 MySQL 查询修复

> ID：15171704
> 
> 赞同：0
> 
> 时间：2013-03-02T06:51:22.597
> 
> 标签：c#, asp.net, mysql, sql, sql-update

在 ASP.Net 中，Datagrid 将更新每个选定的行，但第一列“事件名称”除外。任何关于为什么会发生这种情况的想法都将不胜感激。另外，如果我在其他表上实现这个查询，这会覆盖原来保存的数据吗？

```
 UPDATE  Calendar SET 
    `Event Name`=@`Event Name`,
    `Date`=@Date,
    `Time`=@Date,
    `Location`=@Location,
    `Goal`=@Goal 
WHERE `ID`=@ID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T21:54:25.920

更新日历 `Event Name`集 =@Event_Name、 `Date`=@Date、 `Time`=@Date、 `Location`=@Location、 `Goal`=@Goal WHERE `ID`=@ID

没有引号。

# c# - 清除帧缓存

> ID：15171708
> 
> 赞同：0
> 
> 时间：2013-03-02T06:51:49.203
> 
> 标签：c#, caching, windows-8, microsoft-metro, windows-store-apps

如何在 Windows Metro 风格应用程序中清除帧缓存？我在初始化中启用了缓存

```
NavigationCacheMode = NavigationCacheMode.Enabled; 
```

我想在不禁用缓存的情况下初始化新 Frame，因为我将它用于另一条路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:28:46.540

By override `OnNavigatedTo`

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
      if(condition == true)
      {
        this.InitializeComponent();
      }
    } 
```

and clear all children in global static controls.

# c++ - 类分配帮助 - 将输入读入解析器

> ID：15171710
> 
> 赞同：0
> 
> 时间：2013-03-02T06:51:59.557
> 
> 标签：c++

这是我的导师为我们提供的一个起点。我很难找到一种方法来使用提供的 parcer gettoks() 从 UNIX 环境中的命令（例如“ls”或“hist”）读取输入。gettoks() 从具有解析器代码的 .l 链接。如何使用 toks（被声明为指向指针的指针）将输入行传递给 gettoks() 将解析它（然后我将根据输入返回适当的系统调用）我尝试使用 fget 但得到一个编译器错误。任何建议，将不胜感激。

```
//*********************************************************

int main( int argc, char *argv[] )
{
    // local variables
    int ii;
    char **toks;
    int retval;

    // initialize local variables
    ii = 0;
    toks = NULL;
    retval = 0;

    // main (infinite) loop
    while( true )
    {
        // get arguments
        toks = gettoks();

        if( toks[0] != NULL )
        {
            // simple loop to echo all arguments
            for( ii=0; toks[ii] != NULL; ii++ )
            {
                cout << "Argument " << ii << ": " << toks[ii] << endl;
            }

            if( !strcmp( toks[0], "exit" ))
                break;
        }
    }

    // return to calling environment
    return( retval );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:32:26.460

这是您可以用来解析的解决方案。

```
int main( int argc, char *argv[] )
{
    // local variables
    int ii;

    for(ii=0;ii<argc;ii++)
    {
    cout << "Argument " << ii << ": " << argv[ii] << endl;
    }
    // return to calling environment
    return 1;
} 
```

# javascript - sessionStorage 过期

> ID：15171711
> 
> 赞同：62
> 
> 时间：2013-03-02T06:52:05.383
> 
> 标签：javascript, html, storage

我正在构建一个表单，我必须将数据存储在`sessionStorage`我不知道何时`sessionStorage`到期的 HTML5 中。谁能告诉我这个的过期时间`sessionStorage`？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-02T06:56:48.633

它与您的浏览器会话有关，并且不会在选项卡之间共享。它不会自动过期。因此，如果您从不关闭浏览器，它就永远不会过期。

因此，当标签/窗口关闭时，数据丢失。

每个**会话**存储区域允许 5MB 的存储空间（在某些浏览器中为 10MB）。而**cookie**只允许 4kb（在某些浏览器中或更多）。然而，Cookie 有一个设定的到期日期。

正如[Christophe](https://stackoverflow.com/users/485406/christophe)在评论中所写，**localstorage**永不过期。它还可以跨选项卡共享，并且与会话存储 (5MB) 大小相同。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2017-01-03T12:16:30.990

我知道这个问题已经很老了，但如果其他人偶然发现这个问题并觉得它有帮助，我会发布我的答案。您几乎可以使用以下方式模拟`sessionStorage`或`locaStorage`过期：

```
//In your login logic or whatever
var expires = new Date(year, month, day, hours, minutes, seconds, milliseconds);
var sessionObject = {
    expiresAt: expires,
    someOtherSessionData: {
        username: ''
    }
}
sessionStorage.setItem('sessionObject', JSON.stringify(sessionObject)); 
```

如果您不希望此会话对象清晰可见，您也可以使用类似[http://bitwiseshiftleft.github.io/sjcl/的方式加密此对象。](http://bitwiseshiftleft.github.io/sjcl/)

在每次页面加载时，您都可以检查`sessionStorage`或`localStorage`就此而言是否已过期：

```
$(document).ready(function(){
    var currentDate = new Date();
    var sessionObject = JSON.parse(sessionStorage.getItem('sessionObject'));
    var expirationDate = sessionObject.expiresAt;
    if(Date.parse(currentDate) < Date.parse(expirationDate)) {
        //normal application behaviour => session is not expired
        var someAppVariable = sessionObject.someOtherSessionData.etc;
    } else {
        //redirect users to login page or whatever logic you have in your app 
        //and remove the sessionStorage because it will be set again by previous logic
        sessionStorage.removeItem('sessionObject');
        console.log('session expired');
    }
}); 
```

如果您不希望用户在选项卡或浏览器关闭后保持登录状态，请使用`sessionStorage`，否则您应该根据需要使用`localStorage`和操作它。

我希望有人会觉得这很有帮助。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-01-10T10:02:30.950

您可以添加某种过期机制，如下所示：

```
// get from session (if the value expired it is destroyed)
function sessionGet(key) {
  let stringValue = window.sessionStorage.getItem(key)
    if (stringValue !== null) {
      let value = JSON.parse(stringValue)
        let expirationDate = new Date(value.expirationDate)
        if (expirationDate > new Date()) {
          return value.value
        } else {
          window.sessionStorage.removeItem(key)
        }
    }
    return null
}

// add into session
function sessionSet(key, value, expirationInMin = 10) {
  let expirationDate = new Date(new Date().getTime() + (60000 * expirationInMin))
    let newValue = {
    value: value,
    expirationDate: expirationDate.toISOString()
  }
  window.sessionStorage.setItem(key, JSON.stringify(newValue))
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-02T10:26:06.740

您可以在 cookie 中保存过期时间。在每个页面加载读取cookie，如果它是空的（意味着过期）然后清除会话存储。

# sql - 选择一组属于自己类型的最后一个记录

> ID：15171714
> 
> 赞同：1
> 
> 时间：2013-03-02T06:52:57.400
> 
> 标签：sql, tsql, sql-server-2008-r2, group-by, greatest-n-per-group

我有下表

LogCheque (LogChequeID, ChequeID, Date, HolderID)

每行显示在哪个日期将哪个支票 (ChequeID) 转移给 Whom (HolderID)。
我想选择 LogCheques 列表，但每张支票只出现一次，显示最后一次转账

示例数据

```
LogChequeID     ChequeID    Date            HolderID  
1               1012        2013-01-10      200  
2               1526        2013-01-12      125  
3               1012        2013-01-19      413  
4               1526        2013-02-11      912  
5               1526        2013-02-17      800 
```

我想要的输出是

```
LogChequeID     ChequeID    Date            HolderID  
3               1012        2013-01-19      413
5               1526        2013-02-17      800 
```

我试过了

```
select lch.ChequeID, lch.DateFa, lch.ChequeID
from LCheque lch
group by lch.ChequeID, lch.DateFa, lch.LChequeID
having lch.LChequeID = (select MAX(LChequeID) where ChequeID = lch.ChequeID) 
```

但它返回每一行。

张开双臂，任何帮助都会非常有帮助和感激:) 在此先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T08:59:24.257

您可以使用 CTE + [ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)排名功能

```
;WITH cte AS
 (
  SELECT *, ROW_NUMBER() OVER (PARTITION BY ChequeID ORDER BY [Date] DESC) AS rn
  FROM dbo.LCheque 
  )
  SELECT *
  FROM cte
  WHERE rn = 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/5d8b2/1)上的演示[](http://sqlfiddle.com/#!3/5d8b2/1)

 ****[带有EXISTS](http://msdn.microsoft.com/en-us/library/ms188336%28v=sql.105%29.aspx)运算符的**OR**选项**

 **```
SELECT *
FROM dbo.LCheque t
WHERE EXISTS(
             SELECT 1
             FROM dbo.LCheque t2
             WHERE t.ChequeID = t2.ChequeID
             HAVING MAX(t2.[Date]) = t.[Date]
             ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/7b73c/1)上的演示[](http://sqlfiddle.com/#!3/7b73c/1)

 ****[带有APPLY()](http://msdn.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)运算符的**OR**选项**

 **```
SELECT *
FROM dbo.LCheque t CROSS APPLY (
                                SELECT 1 
                                FROM dbo.LCheque t2
                                WHERE t.ChequeID = t2.ChequeID
                                HAVING MAX(t2.[Date]) = t.[Date]
                                ) o (IsMatch) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/5d8b2/19)上的演示[](http://sqlfiddle.com/#!3/5d8b2/19)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:39:47.923

```
 select lch.ChequeID,max(lch.Date),lch.HolderID  
  from LCheque lch
  group by lch.ChequeID,lch.HolderID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T16:52:50.673

CTE 更整洁（也许更有效），但你几乎拥有它。

```
select lch.ChequeID, lch.DateFa, lch.ChequeID
from LCheque lch
where lch.LChequeID = (select MAX(LChequeID) where ChequeID = lch.ChequeID) 
```**********

# php - PHP中strlen()的效率如何？

> ID：15171715
> 
> 赞同：6
> 
> 时间：2013-03-02T06:52:59.303
> 
> 标签：php, strlen

using`strlen`实际上是通过遍历字符串来计算字符串中的字节数，还是简单地从索引中返回已经计算出的字符串长度的值？

我的问题的原因是因为我可以选择为速度敏感的脚本存储非常长的字符串的预先计算值，或者我可以使用该`strlen`函数并节省自己的编码时间。

但我实际上想知道它是如何`strlen`工作的，因为我往往非常依赖它，也许这不是一个好主意？

**更新**

请参阅下面的基准。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-02T07:04:27.247

搞砸了，我做了一个基准测试：

```
<?php
$shortstring='hello';

$longstring='long';
for($run=0;$run<100000;$run++)
    $longstring.='dsffghdgfhdsda'.rand(1000,2000);

$time=microtime(true);
for($run=0;$run<100000000;$run++)
    $temp=strlen($shortstring);
$time=microtime(true)-$time;

echo "strlen on short string took $time seconds\n";

$time=microtime(true);
for($run=0;$run<100000000;$run++)
    $temp2=strlen($longstring);
$time=microtime(true)-$time;

echo "strlen on long string took $time seconds\n"; 
```

**结果**

```
strlen on short string took 12.508891820908 seconds
strlen on long string took 11.897696971893 seconds 
```

它显然不会遍历字符串，而是返回一个预先索引的值。速度没有区别。

# python - 使用集合理解避免内存错误

> ID：15171717
> 
> 赞同：1
> 
> 时间：2013-03-02T06:53:11.893
> 
> 标签：python, memory-management, set, list-comprehension

我正在通过读取一个大数据集（约 250k 行）来构建一个大集合，为了提高效率，我决定使用集合理解来构建这个集合，但我一直遇到内存错误，这是有道理的，因为我相信垃圾收集器在评估集合理解期间不起作用。实际源代码如下：

```
def parsedData(filePath):
    with open(filePath, 'rb') as rawData:
        reader = csv.reader(rawData, delimiter=",")
        allJobs = {Job(rawJob(row)) for row in reader}
    return allJobs 
```

有没有办法强制垃圾收集器在即将发生内存错误时清除？有没有更快的方法来做到这一点？我会使用 lambda 函数而不是集合理解遇到相同的内存问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:53:32.833

这是可能发生这种情况的原因：

要创建一组独特的自定义对象，您的对象必须至少实现`__eq__`和`__hash__`.

演示：

```
class Obj(object):
    def __init__(self,val):
        self.val=val

    def __repr__(self):
        return self.val

li=['i am uniq','i am uniq','i am uniq','not really','not really','not really']        
print set(Obj(e) for e in li) 
```

印刷

```
set([i am uniq, i am uniq, not really, not really, i am uniq, not really]) 
```

现在添加所需的`__eq__`和`__hash__`方法：

```
class Obj(object):
    def __init__(self,val):
        self.val=val
        self.hash=hash(val)

    def __repr__(self):
        return self.val

    def __eq__(self,other):
        return self.hash==other.hash    

    def __hash__(self):
        return self.hash        

li=['i am uniq','i am uniq','i am uniq','really','really','really']        
print set(Obj(e) for e in li) 
```

印刷：

```
set([i am uniq, really]) 
```

如果没有适当的哈希和 eq，您会发现根本没有集合；您将拥有一个基于`Jobs`obj id 的无序列表。换句话说，对于 Python，即使您定义为“相同”的对象也会被视为不同的对象，因为每个对象都有不同的 obj id。这个“集合”实际上会比等效列表大得多。

* * *

除此之外——一种更节省内存的方法可能是在 numpy 中使用[结构化数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)和生成器来逐行读取文件。

战略：

1.  打开文件
2.  确定文件的总行数——即文件中最坏情况的总记录数
3.  倒带文件
4.  读取第一条记录并根据行数据的记录（整数、浮点数、字节等）确定 numpy 数组的最有效记录结构这比 Python 对象中的等效数据要密集得多
5.  倒带文件
6.  如果您想要一个哈希来统一您的数据，请将其添加到记录中
7.  将numpy数组预先分配给`lines X records`大小
8.  创建一个生成器以逐行读取文件并将每条记录放在 numpy 数组中
9.  不要添加重复记录（基于哈希）
10.  为未添加的总重复记录调整 numpy 数组的大小...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:43:57.343

你说：

> 原始文件中不应有任何重复，设置转换纯粹是为了使迭代更快

墨菲定律说会有重复。在我看来，“使迭代更快”似乎是过早且可疑的优化。

一些分类建议：

(0) 在您开始担心内存和 CPU 效率之前，在少量行上对其进行测试以确保其正常工作（特别是确保 Job 对象是可散列的并且散列方法真正反映了您对唯一性的定义）。

(1) 保持简单，即避免集合推导、生成器等……使用老式的方法一次完成。理解等很优雅，但仅限于不会出错的用例......您正在处理半个演出的文本文件。

(2) 插入一些调试代码，以便您可以看到它在内存不足之前已经走了多远。

（3）检查重复！

```
def parsedData(filePath):
    allJobs = set()
    with open(filePath, 'rb') as rawData:
        reader = csv.reader(rawData, delimiter=",")
        for rownum, row in enumerate(reader, start=1):
            job = Job(rawJob(row))
            if job in allJobs:
                pass # add code to display dupe
            else:
                allJobs.add(job)
            if rownum % 10000 == 0:
                print rownum, "rows; ", len(allJobs), "unique"
    return allJobs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:20:56.140

**更新：**

正如@Hyperboreus 指出的那样，这将抛出`ValueError: I/O operation on closed file`. 我把它留在这里以防万一它有用。我认为这个问题的最佳解决方案可能包括让文件保持打开状态并使用生成器仅在最后一分钟读取数据。

* * *

试试这个：

```
def parsedData(filePath):
    with open(filePath, 'rb') as rawData:
        reader = csv.reader(rawData, delimiter=",")
        allJobs = (Job(rawJob(row)) for row in reader)
    return allJobs 
```

它使用生成器表达式而不是集合推导来创建和返回生成器。

从[蟒蛇维基](http://wiki.python.org/moin/Generators)：

> 使用生成器带来的性能改进是惰性（按需）生成值的结果，这转化为更低的内存使用量。此外，我们不需要等到所有元素都生成后才开始使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T12:26:35.180

如果所有行都是唯一的，并且即使您使用列表推导而不是集合，您也会得到 MemoryError，那么您可以使该函数成为生成器以避免一次加载所有作业：

```
def get_jobs(filePath):
    with open(filePath, 'rb') as rawData:
        reader = csv.reader(rawData, delimiter=",")
        for row in reader:
            yield Job(rawJob(row)) 
```

您可以将其用作：

```
for job in get_jobs(path):
    process(job) 
```

# jquery - 如何在 pQuery 中获取元素属性

> ID：15171719
> 
> 赞同：1
> 
> 时间：2013-03-02T06:53:25.420
> 
> 标签：jquery, html, perl, dom

我正在尝试使用[pQuery](http://search.cpan.org/~ingy/pQuery-0.07/lib/pQuery.pm#HTML)抓取网站并获取所有 img 标签中的 src 属性。

这是我到目前为止所尝试的：

```
@imgs = pQuery("http://search.cpan.org/~ingy/pQuery-0.07/lib/pQuery.pm")
            ->find("img")
            ->each(sub{
                my $i = shift;
                print $i + 1, ") ", pQuery($_).attr('src'), "\n";
            }); 
```

输出表明有 12 个 img 元素并且没有打印任何内容`.attr('src')` 是否有关于如何使用 pQuery 的全面指南？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:17:23.863

我不知道 pQuery，但我建议改用[Web::Query](https://metacpan.org/pod/Web%3a%3aQuery)。Web::Query 是 pQuery 的替代模块。

```
use Web::Query;

wq("http://search.cpan.org/~ingy/pQuery-0.07/lib/pQuery.pm")->find("img")->each(
    sub {
        my $i = shift;
        print $i + 1, ") ", $_->attr('src'), "\n";
    }
); 
```

这段代码运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T09:23:13.857

根据每个[CPAN的例子~pQuery.pm#each($sub)](http://search.cpan.org/~ingy/pQuery-0.07/lib/pQuery.pm#each%28%24sub%29)

如果将元素作为针对域的第一个参数传递，我可以看到 pQuery() 已经包含一个 dom 元素查找机制。删除 find($sub)，并使用“img”取消移动 pQuery 参数。

```
my $dom = 'http://search.cpan.org/~ingy/pQuery-0.07/lib/pQuery.pm';
@imgs = pQuery("img", $dom)
        ->each(sub{
            my $i = shift;
            print $i + 1, ') ', pQuery($_).attr('src'), "\n";
        }); 
```

你有什么理由用无关的 find() 构造这个例程而不是使用集成的调用方法？

花点时间对照 CPAN 中提供的文档重新阅读您的代码，通常有大量关于模块如何工作的信息。

# jquery - 未捕获的异常：大型数据响应的 JSON 无效

> ID：15171720
> 
> 赞同：0
> 
> 时间：2013-03-02T06:53:29.367
> 
> 标签：jquery, uncaught-exception

城市列表通过更改状态下拉列表加载。每个州都是完美的，除了德克萨斯。德克萨斯州有大约 1500 个数据。这是德克萨斯州没有填充城市下拉数据的唯一原因。这是我的压缩代码。[下载](http://ge.tt/8BWgqrZ/v/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T11:00:09.957

我发现了错误。错误出现在数据库中的城市数据中。一些城市名称数据具有转义字符，即“\”.. 它正在破坏 json 结构，并且您在 jQuery 中的解析器无法解析数据。

有两种方法可以解决这个...

*   您可以从数据库中清理数据..即您必须找到那些具有转义字符的城市名称并删除转义字符并保存。示例：“达卡\”到“达卡”。

或者

*   您可以在创建选择列表选项 HTML 的 ajax PHP 文件中使用 addlashes() PHP 函数。即 `$`city_list.=" `<`option value=' `$`row[id]'>".addslashes( `$`row['city_name'])." `<`/option>";

......让我们做你喜欢的。但是，我认为使用第二个选项。

干杯。.. :)

# codeigniter - Facebook php SDK：在应用程序域中输入 IP 时，显示错误为“无效域”

> ID：15171725
> 
> 赞同：0
> 
> 时间：2013-03-02T06:54:30.040
> 
> 标签：codeigniter, facebook-php-sdk

我想在我的项目中使用 Facebook-PHP-SDK 登录和注册。在应用程序域字段中，我输入了我的 IP，`192.168.10.10`然后它显示错误为

```
App Domains: 192.168.10.10 is not a valid domain. 
```

我想要的是，当我单击使用 Facebook 图标登录时，它应该登录并从 Facebook 数据库中获取我的数据并将其插入到我的自定义数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T12:23:02.733

得到答案，我做了以下事情：

```
1) APP Domainds: 'this is left blank'

2) Site URL: http://192.168.1.10/

3) Canvas URL: http://192.168.1.10/

4) Secure Canvas URL: https://192.168.1.10/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:33:18.833

*通常第三方身份验证（ OpenAuth* /Facebook/Twitter）不适用于内部 IP 地址。您应该尝试使用您网站的 FQDN（例如 www.mywebsite.com）

编辑：试试这个： [编辑你的主机文件](http://www.howtogeek.com/howto/27350/beginner-geek-how-to-edit-your-hosts-file/)并在最后一行添加：

```
192.168.10.10 www.mysite.com 
```

在 Facebook-PHP-SDK 中使用“www.mysite.com”而不是 192.168.10.10。在 CI 的 config.php中将 base_url 更改为“ [http://www.mysite.com/ ”也可能会有所帮助](http://www.mysite.com/)

# jquery - 如何使用 jquery 验证多个文本字段中的至少一个值？

> ID：15171726
> 
> 赞同：0
> 
> 时间：2013-03-02T06:54:46.347
> 
> 标签：jquery, forms, validation, textfield

```
 <script type="text/javascript">
    var errorExist = false;
     $(document).ready(function(){
      $("#form3").submit(function(){
     var get_count = $("#form3 input[type=text]").length;
       for(i=1; i<=get_count; i++){
         if($(".qtyy"+i).val()==""){
          errorExist  = "true";
        }
    }
  if(errorExist  == "true"){
      errorExist  = false;
      alert("Please enter value");
      return false;
   }
 });
});
</script>

    <form action="" name="form3" id="form3" method="post">
    <input name="qtyy[]" type="text" class="qtyy1" size="7" />
    <input name="qtyy[]" type="text" class="qtyy2" size="7" />
    <input name="qtyy[]" type="text" class="qtyy3" size="7" />
    <input name="qtyy[]" type="text" class="qtyy4" size="7" />
    <input name="qtyy[]" type="text" class="qtyy5" size="7" />
    <input type="submit" value="Place Your Order" name="postorder" id="postorder" />
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:57:49.540

试试这个，

```
<html>
<head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script type="text/javascript">
   var errorExist = false;
 $(document).ready(function(){
  $("#form3").submit(function(){
     var get_count = $("#form3 input[type=text]").length;
         for(i=1; i<=get_count; i++){
          if($(".qtyy"+i).val()==""){

           errorExist  = "true";
          }
         }
     if(errorExist  == "true"){
      errorExist  = false;
      alert("Please enter value");
      return false;
     }
});
});
</script>

</head>

<body>

 <form action="" name="form3" id="form3" method="post">
    <input name="qtyy[]" type="text" class="qtyy1" size="7" />
    <input name="qtyy[]" type="text" class="qtyy2" size="7" />
    <input name="qtyy[]" type="text" class="qtyy3" size="7" />
    <input name="qtyy[]" type="text" class="qtyy4" size="7" />
    <input name="qtyy[]" type="text" class="qtyy5" size="7" />
    <input type="submit" value="Place Your Order" name="postorder" id="postorder" />
  </form>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:44:11.797

我觉得这是您要实现的逻辑。如果任何文本框值不为空，则表单应验证

```
<html>
<head>
 <script src="http://code.jquery.com/jquery-latest.js"></script>
 <script type="text/javascript">
   var errorExist = false;
 $(document).ready(function(){
  $("#form3").submit(function(){
     var get_count = $("#form3 input[type=text]").length;

     errorExist  = "true";
         for(i=1; i<=get_count; i++){
          if($(".qtyy"+i).val()!=""){

           errorExist  = "false";
          }

         }
     if(errorExist  == "true"){
      errorExist  = false;
      alert("Please enter value");
      return false;
     }
});
});
</script>

</head>

<body>

 <form action="" name="form3" id="form3" method="post">
    <input name="qtyy[]" type="text" class="qtyy1" size="7" />
    <input name="qtyy[]" type="text" class="qtyy2" size="7" />
    <input name="qtyy[]" type="text" class="qtyy3" size="7" />
    <input name="qtyy[]" type="text" class="qtyy4" size="7" />
    <input name="qtyy[]" type="text" class="qtyy5" size="7" />
    <input type="submit" value="Place Your Order" name="postorder" id="postorder" />
  </form>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:02:45.827

```
$(document).ready(function(){
    $("#form3").submit(function(){
        $("> input[type=text]",this).each(function(){
            if($(this).val()==""){
                alert("Please enter value");
                return false;
            }
        })
    })
}); 
```

# android - 是否可以在android中创建这种自定义视图？

> ID：15171730
> 
> 赞同：8
> 
> 时间：2013-03-02T06:55:00.143
> 
> 标签：android, android-layout, view

![在此处输入图像描述](../Images/d4a4996352635ddf9449c096791d97ad.png)

我只是想知道我是否可以在 android 中创建类似的布局。

自定义视图必须可以根据图像性质进行扩展。我试着`GridView`提出这种观点。

如果有人做过类似的事情，请告诉我。提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T17:17:15.520

你应该看看`StaggeredGridView` [这里](https://github.com/maurycyw/StaggeredGridView)，因为它做了类似的事情，虽然不完全是你想要的。如果您想快速了解它的工作原理，可以[在这里](https://github.com/maurycyw/StaggeredGridViewDemo)找到一个演示项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T17:15:06.113

这通过gridview是不可能的。您将必须创建一个 ViewGroup 并且必须在滚动时膨胀视图。当您将任何视图添加到视图组时，该视图将包含图像、标题等。主要是你必须将该视图的宽度设置为 ViewGroup 宽度的 1/4，并且该视图中图像的宽度等于 match_parent 并且视图和图像的高度都应该是包装内容。

使用 ViewGroup 和 inflater 尝试一次，您会找到自己的方式。希望有帮助。

# xml - 使用 XML::Twig 处理巨大文件 (>10 GB) 的性能问题

> ID：15171731
> 
> 赞同：2
> 
> 时间：2013-03-02T06:55:01.303
> 
> 标签：xml, performance, perl, xml-twig

我必须处理一个巨大的 XML 文件（>10 GB）才能将其转换为 CSV。我正在使用[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig).

该文件包含大约 260 万客户的数据，每个客户将有大约 100 到 150 个字段（取决于客户资料）。

我将一个订阅者的所有值存储在 hash`%customer`中，处理完成后，我将 hash 的值输出到 CSV 格式的文本文件中。

问题是性能。处理它大约需要 6 到 8 个小时。怎样才能减少？

```
my $t = XML::Twig->new(
  twig_handlers => {
    'objects/simple'   => \&simpleProcess ,
    'objects/detailed' => \&detailedProcess ,
  },
  twig_roots => { objects => 1}
);

sub simpleProcess {
  my ($t, $simple) = @_;

  %customer= (); #reset the hash
  $customer{id}  = $simple->first_child_text('id');
  $customer{Key} = $simple->first_child_text('Key');
} 
```

详细标签包括多个字段，包括嵌套字段。所以我每次都会调用一个函数来收集不同类型的字段。

```
sub detailedProcess {
  my ($t, $detailed1) = @_;

  $detailed = $detailed1;
  if ($detailed->has_children('profile11')){ &profile11();}
  if ($detailed->has_children('profile12')){ &profile12();}
  if ($detailed->has_children('profile13')){ &profile13();}
}
sub profile11 {
  foreach $comcb ($detailed->children('profile11')) {
    $customer{COMCBcontrol} = $comcb->first_child_text('ValueID');
  } 
```

其他函数 *(value2, value3) 也是如此。我没有提到其他保持简单的功能。

```
<objecProfile>
    <simple>
        <id>12345</id>
        <Key>N894FE</Key>
    </simple>
    <detailed>
        <ntype>single</ntype>
        <SubscriberType>genericSubscriber</SubscriberType>
        <odbssm>0</odbssm>
        <osb1>true</osb1>
        <natcrw>true</natcrw>
        <sr>2</sr>
        <Profile11>
            <ValueID>098765</ValueID>
        </Profile11>
        <Profile21>
        <ValueID>098765</ValueID>
        </Profile21>
        <Profile22>
        <ValueID>098765</ValueID>
        </Profile22>
        <Profile61>
            <ValueID>098765</ValueID>
        </Profile61>
    </detailed>
</objectProfile> 
```

现在的问题是：我`foreach`为每个孩子使用，即使几乎每次孩子实例在整个客户资料中只出现一次。它会导致延迟，还是有任何其他建议可以提高性能？线程等？（我用谷歌搜索，发现线程并没有多大帮助。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T18:35:49.527

我建议使用[`XML::LibXML::Reader`](https://metacpan.org/module/XML%3a%3aLibXML%3a%3aReader). 它非常高效，因为除非您要求它，否则它不会在内存中构建 XML 树，并且基于出色的 LibXML 库。

您将不得不习惯与 不同的 API `XML::Twig`，但 IMO 它仍然相当简单。

这段代码和你自己的代码完全一样，我的时间表明像你展示的那样 1000 万条记录将在 30 分钟内得到处理。

它的工作原理是重复扫描下一个`<object>`元素（我不确定这是否应该是`<objecProfile>`因为您的问题不一致），将节点及其后代复制到一个`XML::LibXML::Element`对象`$copy`以便可以访问子树，然后将所需的信息提取到`%customer`.

```
use strict;
use warnings;

use XML::LibXML::Reader;

my $filename = 'objects.xml';

my $reader = XML::LibXML::Reader->new(location => $filename)
        or die qq(cannot read "$filename": $!);

while ($reader->nextElement('object')) {

    my %customer;

    my $copy = $reader->copyCurrentNode(1);

    my ($simple) = $copy->findnodes('simple');
    $customer{id}  = $simple->findvalue('id');
    $customer{Key} = $simple->findvalue('Key');

    my ($detailed) = $copy->findnodes('detailed');
    $customer{COMCBcontrol} = $detailed->findvalue('(Profile11 | Profile12 | Profile13)/ValueID');

    # Do something with %customer
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:53:18.277

首先，使用 DProf 或 NYTProf 来确定是什么降低了您的代码速度。但是，我认为主要工作将在 XML 解析器内部，所以我认为这不能大大提高速度。

作为另一种变体，我建议您拆分（不解析），只是将此 XML 分成几部分（需要保存 xml 格式的一致性）并运行*ncpu*分叉以独立处理每个，生成一些具有聚合值的文件，然后对其进行处理。

或者，您可以将此 XML 转换为无需 XML 解析器即可解析的内容。例如：您似乎需要*id、Key、ValueID*字段，因此您可以删除输入文件中的“\n”并生成其他文件，每行一个**objectProfile 。**然后，将每一行输入解析器。这可以让您对一个文件使用多线程处理，因此您将使用所有 CPU。可能字符串`</objectProfile>`可以用作记录分隔符。需要研究您的 xml 格式才能做出决定。

PS 有人会想用“自己解析 XML 不好”或类似[这样](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)的链接来对我投反对票。但是，有时当您有大量高负载或非常大的输入数据时 - 您有一个选择：以“合法”的方式进行；或者在给定的时间内以给定的精度进行。用户/客户不在乎你是怎么做的，他们想要结果。

# android - 我需要一个具有父子概念的不同选项卡组活动

> ID：15171733
> 
> 赞同：1
> 
> 时间：2013-03-02T06:55:18.620
> 
> 标签：android, tabs

我想使用选项卡组活动，我不想使用此代码

```
 this.tabHost = getTabHost();

    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch the first Activity for the tab (to be reused)
    intent = new Intent().setClass(this, LoginTab.class);

    // Initialize a TabSpec for the first tab and add it to the TabHost
    spec = tabHost.newTabSpec("Login").setIndicator("Login",
            getResources().getDrawable(R.drawable.login)).setContent(intent);
    tabHost.addTab(spec); 
```

我实际上想在此使用父子概念，所以请帮助我....

# css - 缩放时CSS div移动

> ID：15171734
> 
> 赞同：1
> 
> 时间：2013-03-02T06:55:23.420
> 
> 标签：css, html, layout

我正在尝试安排网格布局。

缩小时最后一个 div 移动。当我放大时，右侧面板和最后一个内容 div 之间还会出现一条白线。

我的 CSS 和布局是否存在严重错误？

干杯，欧文

* * *

```
#container {
    position: relative;
    width: 827px;
    height: 580px;
    float: left;
}

.side-pannel {
    position: relative;
    width: 60px;
    height: 580px;
    background-color: #ba55d3;
    float: left;
}

.two-item-column {
    position: relative;
    float: left;
}
.column-border-middle {
    border-right: 1px solid black;
}

.item1 {
    width: 206px;
    height: 288px;
    background: #666; 
}
.item2 {
    width: 206px;
    height: 291px;
    background: #666;
    border-top: 1px solid black; 
} 
```

* * *

```
<div class="side-pannel" id="left-pannel"></div>
<div id="container">
    <div class="two-item-column" >
        <div class="item1 column-border-middle"></div>
        <div class="item2 column-border-middle"></div>
    </div>
    <div class="two-item-column" >
        <div class="item1 column-border-middle"></div>
        <div class="item2 column-border-middle"></div>
    </div>
    <div class="two-item-column" >
        <div class="item1 column-border-middle"></div>
        <div class="item2 column-border-middle"></div>
    </div>
       <div class="two-item-column" >
        <div class="item1"></div>
        <div class="item2"></div>
    </div>   
</div>
<div class="side-pannel" id="right-pannel"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:17:38.400

如果我正确理解了您的问题，[这](http://jsfiddle.net/q8uBG/4/ "小提琴")就是您的[输出](http://jsfiddle.net/q8uBG/4/embedded/result/ "输出")应该是什么。

CSS 应为

```
#container {
    position: relative;
    width: 88%;
    height: 580px;
    float: left;
}
.side-pannel {
    position: relative;
    width: 6%;
    height: 580px;
    background-color: #ba55d3;
    float: left;
}
.two-item-column {
    position: relative;
    width: 25%;
    float: left;
} 
```

此外，从和中删除`width`属性/属性。`.item1``.item2`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:13:27.797

添加宽度`two-item-column`将修复它。如果它不是用于布局的其他部分，则无需使其位置相对：

```
.two-item-column {
    float: left;
    width: 207px;
}

.two-item-column:last-child {
    width: 206px;
} 
```

# python - 显示模型及其关系

> ID：15171737
> 
> 赞同：0
> 
> 时间：2013-03-02T06:55:42.783
> 
> 标签：python, django, django-models

我的models.py如下：

```
from django.db import models

class Book(models.Model):
    book_id=models.AutoField(primary_key=True,unique=True)
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    def __unicode__(self):
        return "%d %s %s %s" % (self.book_id,self.book_name, self.author_name,self.publisher_name)

class Author(models.Model):
    author_id=models.AutoField(primary_key=True)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()
    book=models.ForeignKey(Book)

    def __unicode__(self):
        return u'%d %s %s' % (self.author_id,self.first_name, self.last_name) 
```

我的views.py是这样的：

```
def index(request):

    books = Book.objects.all()
    context={'books':books}
    return render(request,'index.html', context) 
```

上面的views.py 显示了Book 类中的内容，但是我无法显示author 表中的内容。我的要求是在一个页面中显示合并的两个内容。请帮我做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:02:35.723

好吧，看起来您首先正确地设置了模型。如果没有提供，Django 会处理 id，所以你不需要`author_id=models.AutoField(primary_key=True)`. 另外，一本书不应该有作者，而不是作者有书吗？如果你做得正确，你也不需要`author_name=models.CharField(max_length=30)`，因为你会有一个外键到你的作者模型，它有他们的名字。

一旦正确设置它们，就很容易访问模板中的数据。例如，您将`book.author.first_name`在模板中使用来获取图书作者的姓名。

* * *

```
from django.db import models

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age = models.IntegerField()

    def __unicode__(self):
        return u'%d %s %s' % (self.pk, self.first_name, self.last_name)

class Book(models.Model):
    name = models.CharField(max_length=30)
    author = models.ForeignKey(Author)
    publisher_name = models.CharField(max_length=40)

    def __unicode__(self):
        return u"%d %s %s %s" % (self.pk, self.name, self.author.name, self.publisher_name) 
```

## 模板

```
{% for book in books %}
    ...
    {% for author in book.author_set %}
        ...
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:21:27.850

**模型.py**

```
class Book(models.Model):
    book_name=models.CharField(max_length=30)
    author_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    def __unicode__(self):
        ..........

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age=models.IntegerField()

    def __unicode__(self):
        ........

    def books(self):
        return Book.objects.filter(author=self) 
```

**视图.py**

```
def index(request):
    authors = Author.objects.all()
    context={'authors':authors}
    return render(request,'index.html', context) 
```

**模板**

```
{% for author in authors %}
    Author: {{author.first_name}} {{author.last_name}}<br/>
    Email: {{author.email}}
    Age: {{author.age}}
    Books:
        {% for book in author.books %}
            .......
        {% endfor %}
{% endfor %} 
```

# javascript - 我的 jquery doc ready 函数无法识别外部 js 文件函数？

> ID：15171739
> 
> 赞同：0
> 
> 时间：2013-03-02T06:56:02.763
> 
> 标签：javascript, jquery, file, external, document-ready

当我将它们与 HTML 内容放在同一页面上时，我创建了几个可以正常工作的函数，但是因为开始有这么多的函数，我决定将它们移到一个 .js 文件中。现在无法调用初始函数。

IE8 表示该功能不存在。我已确认链接正确并确认 js 文件正在加载。我什至将初始化的触发事件链接到一个按钮（使用 loadFile 类），因此我可以手动触发它以确保它不是加载时间。我在这里做错了什么？

**这是外部脚本的链接和准备好的文档：**

```
//This is how we must reference external files in our configuration, 
//but this is correct, and I am certain this is not the problem.
<script src="<#=getManagedWebFileRelativePath('docAttachmentIE8.js') #>"></script>

<script type="text/javascript">
    $(document).ready(function(){          
        $('.loadFile').click(function() {                   
            initializeDocAttachments(); 
        });
    }); // END DOC Ready           
</script> 
```

**这是我的 js 文件的摘录：**

```
function initializeDocAttachments() {
    //for IE8 load this form
    var docFormHTML = "<form method='POST' id='frmUploadDoc' enctype='multipart/form-data' action=''>\
                       <input type='file' name='data' onchange='handleFileSelect(this);' id='filesInput'>&nbsp;&nbsp; Upload a file</form>";
    document.getElementById('docAttachmentControl').innerHTML = docFormHTML;               
    docLoadDocs();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:07:03.593

当我把代码放在这个小提琴中时，你所拥有的东西是有意义的并且有效的：http: [//jsfiddle.net/3PtuH/1](http://jsfiddle.net/3PtuH/1)

您收到的确切错误消息是什么？IE8是否说该`initializeDocAttachments()`功能不存在？有没有可能它说内部`docLoadDocs()`功能可能不存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:09:26.700

如果没有看到页面其余部分是如何构建的完整上下文，将很难完全诊断。

我要检查的是确保您在上面的任何代码之前被称为 jquery.js，否则它不会设置您之后的任何事件。您是否尝试过使用 firebug 并检查控制台以查看它是否报告了任何其他 JavaScript 错误。

您说您的配置需要您以不寻常的方式调用外部 JS 文件 - 我假设文件以某种方式被解析，然后将其转换为普通链接？如果是这样，那之后的 HTML 会是什么样子？

# c - C编程：如何检查输入字符串是否包含大小写组合

> ID：15171740
> 
> 赞同：2
> 
> 时间：2013-03-02T06:56:04.173
> 
> 标签：c

我在这里完全是新手。如上所述，我想知道如何检查输入字符串是否包含大写和小写的组合。之后打印一条语句以显示输入字符串包含大写和小写的组合。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T07:05:48.347

步骤 0：您需要的变量

```
char* str;
int   i;
char  found_lower, found_upper; 
```

第一步：遍历字符串

```
for (int i = 0; str[i] != '\0'; i++) 
```

第二步：检测大小写字符

```
found_lower = found_lower || (str[i] >= 'a' && str[i] <= 'z')
found_upper = found_upper || (str[i] >= 'A' && str[i] <= 'Z') 
```

第三步：合并结果

```
mixed_case = found_lower && found_upper 
```

`for`第 4 步（可选）提前突破以节省一些时间

```
if (found_lower && found_upper) break; 
```

完整来源（警告：未经测试）：

```
char is_mixed(char* str) {

    int   i;
    char  found_lower = false, found_upper = false;

    for (int i = 0; str[i] != '\0'; i++) {
        found_lower = found_lower || (str[i] >= 'a' && str[i] <= 'z');
        found_upper = found_upper || (str[i] >= 'A' && str[i] <= 'Z');

        if (found_lower && found_upper) break;
    }

    return (found_lower && found_upper);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T07:20:53.197

像这样的东西（可以*在*ASCII 和 EBCDIC 平台上工作）：

```
#include <ctype.h>

int hasMixedCase(const char *src)
{
    int hasUpper=0, hasLower=0;
    for (;*src && !(hasUpper && hasLower);++src)
    {
        hasUpper = hasUpper || (isalpha(*src) && *src == toupper(*src));
        hasLower = hasLower || (isalpha(*src) && *src == tolower(*src));
    }
    return hasLower && hasUpper;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T07:04:50.440

迭代输入字符串中的每个字符（我假设它是作业并且它是 ASCII）并检查字符是否是小写字母。在这种情况下，将标记是否满足小写字母的变量设置为 true。对大写执行相同的操作（或者您可以在同一个循环中执行此操作）。然后根据两个布尔变量形成您的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T07:14:25.233

```
#include <stdio.h>
#include <ctype.h>

int main ()
{

  char* str="Test String.\n";
  int Uflag=0;
  int Lflag=0;
  char c;
  for (int i=0; i<str.length(); ++i)
  {
    c=str[i];
    if (islower(c))
      Lflag=1;
    if (isupper(c))
       Uflag=1;

    if(Lflag!=0 && Uflag!=0)
     {
       printf("String contains combo of Upper and Lowercase letter");
       break;  // both upper case and lower case letter found , no need to iterate further.
     }
  }
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T07:05:04.773

```
unsigned int len = strlen(inputStr);
bool containsUpperCase = false;
bool containsLowerCase = false;

for (int i = 0; i < len && !(containsUpperCase && containsLowerCase); ++i)
{
    char c = inputStr[i];
    if (c >= 'A' && c <= 'Z')
        containsUpperCase = true;
    else  if (c >= 'a' && c <= 'z'))
        containsLowerCase = true;
}

printf("Contains Upper Case: %d Contains Lower Case: %d\n",
       containsUpperCase, containsLowerCase); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T07:09:15.327

您可以使用 ASCII 值轻松完成此操作。

以下是您可以编码的 2 种算法：

```
1\. Intialize two variable lowerCase as false and upperCase as false.
2\. Select each character from the input string.
   2.a. Get the ascii value for that character
   2.b. If greater or equal to 97 then set lowercase as true. else set upper case as true.
3\. If end result contains upperCase as well as lowerCase as true than it contains combination of upper and lowercase. 
```

另一种更简单的方法是。

```
 1\. convert the given string to lowerCase.
 2\. check if it is equal to actual string if true then it is in lowerCase and return.
 3\. Convert actual string to upperCase and compare again to actual string
 4\. If equal than string in upperCase else it is combination of upper and lowercase. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-02T07:10:14.570

您是否需要返回大小写有差异的地方，或者只是大小写有差异？

您可以将 ASCII 中的字符代码相互比较，以检查您的值是否在一个范围内。

如果您不知道字符串只是字母，则此代码有效。如果您知道它只是字母，您可以删除一些检查。

```
int checkLowerAndUpper( char * string ) /* pass a null-terminated char pointer */
{
  int i; /* loop variable */
  int length = strlen(string); /* Length */
  int foundLower = 0; /* "boolean" integers */
  int foundUpper = 0;

  for( i = 0; i < length; ++i ) /* Loop over the entire string */
  {
    if( string[i] >= 'a' && string[i] <= 'z' ) /* Check for lowercase */
      foundLower = 1;
    else if( string[i] >= 'A' && string[i] <= 'Z' ) /* Compare uppercase */
      foundUpper = 1;

    if( foundLower && foundUpper )
      return 1; /* There are multi case characters in this string */
  }

  return 0; /* All of the letters are one case */
} 
```

希望这会有所帮助！

# android - 状态不改变切换按钮

> ID：15171742
> 
> 赞同：0
> 
> 时间：2013-03-02T06:56:13.153
> 
> 标签：android

当我单击切换按钮并向下滚动时，我有带有切换按钮的列表视图，然后按钮的状态将更改为关闭状态请重播

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:00:50.367

用于`sharedpreference`保存每个切换按钮的状态并从`sharedpreference`

就像您可以在 sharedpreference 中定义切换状态（具有唯一 ID）一样

在自定义适配器中定义了共享首选项值。

```
final ToggleButton tgl=(ToggleButton)row.findViewById(R.id.tglalertstatus);

            tgl.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

                    if(isChecked)
                    {
                        SharedPreferences contact = context.getSharedPreferences(
                                "contact", 1);

                        editor = contact.edit();

                        editor.putInt("toggle"+tgl.getContentDescription().toString(), 1); // i set the content description for each toggle a unique string so it will work as a key for shared preference. 

                        editor.commit();
                    }
                    else
                    {
                        SharedPreferences contact = context.getSharedPreferences(
                                "contact", 1);

                        editor = contact.edit();

                        editor.putInt("toggle"+tgl.getContentDescription().toString(), 0);//i set the content description for each toggle a unique string so it will work as a key for shared preference.

                        editor.commit();
                    }

                }
            }); 
```

希望这会有所帮助。

# android - 手电筒应用程序不适用于摩托罗拉但在三星

> ID：15171743
> 
> 赞同：1
> 
> 时间：2013-03-02T06:56:22.213
> 
> 标签：android

我创建了一个 Torch 应用程序，授予手机硬件权限

并且它在三星安卓手机上工作，但在摩托罗拉手机上不工作（拒绝使用 2.3 安卓）

你能给我一些建议吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:13:02.427

这是我使用的代码

```
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.hardware.Camera.Parameters;
import android.content.pm.PackageManager;
import android.text.InputType;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ToggleButton;

public class MainActivity extends Activity implements View.OnClickListener{

ToggleButton tbutton;
//private boolean isLighOn = false;
//private Camera camera;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    flashtool();
    tbutton.setOnClickListener(this);
    Context context = this;
        PackageManager pm = context.getPackageManager();
        if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) {
            /*Log.e("err", "Device has no camera!");
            // prepare the alert box                   
            AlertDialog.Builder alertbox = new AlertDialog.Builder(this);

            // set the message to display
            alertbox.setMessage("This is the alertbox!");

            // add a neutral button to the alert box and assign a click listener
            alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {

                // click listener on the alert box
                public void onClick(DialogInterface arg0, int arg1) {
                    // the button was clicked
                    android.os.Process.killProcess(android.os.Process.myPid());
                    //this.finish();
                    finish();
                    Intent intent = new Intent(Intent.ACTION_MAIN);
                    intent.addCategory(Intent.CATEGORY_HOME);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                }
            });

            // show it
            alertbox.show();
            return;*/
        }
}

private void flashtool() {
    // TODO Auto-generated method stub
    tbutton = (ToggleButton)findViewById(R.id.tbutton);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId())
    {
    case R.id.tbutton:

        if(tbutton.isChecked())
        {
            //Log.i("info", "torch is turn on!");
    /*      camera = camera.open();
            p = camera.getParameters();
            //Log.i("info", "torch is turn on!");

            p.setFlashMode(Parameters.FLASH_MODE_TORCH);

            camera.setParameters(p);
            camera.startPreview(); */
        //  isLighOn = true;  
            try {
            Camera cam = Camera.open();     
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            cam.setParameters(p);
            cam.startPreview();
            }
            catch   (Exception e) {
                e.printStackTrace();

            }
        }
        else
        {

        /*  Log.i("info", "torch is turn off!");
            p = camera.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_OFF);
            camera.setParameters(p);
            camera.stopPreview(); */
        //isLighOn = false;
            try{    
                Camera cam = Camera.open();     
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_OFF);
            cam.setParameters(p);
            cam.stopPreview();
                cam.release();
                cam = null;
            }
            catch   (Exception e) {
                e.printStackTrace();

            }
        }
    break;
    }
    }
} 
```

# java - 如何在 Selenium WebDriver 中滑动{move} 滑块

> ID：15171745
> 
> 赞同：1
> 
> 时间：2013-03-02T06:56:37.770
> 
> 标签：java, selenium, selenium-webdriver, slider

如何在水平进度条上滑动滑块 URL：http: [//jqueryui.com/slider/](http://jqueryui.com/slider/) 我试图滚动滑块，但它对我不起作用。我使用Java的代码如下：

```
 public class TestClass 
 {
    public static void main(String[] args) {         
    File file = new File("D:\\Driver\\IEDriverServer.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver();
    driver.get("http://jqueryui.com/slider/");

    WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));
    Actions move = new Actions(driver);
    Action action = (Action) move.dragAndDropBy(slider, 30, 0).build();
    ((Actions) action).perform();

}

} 
```

安慰

```
 Exception in thread "main" org.openqa.selenium.NoSuchElementException: Unable to    find element with css selector == html body div#slider.ui-slider a.ui-slider-handle   (WARNING: The server did not provide any stacktrace information)
  Command duration or timeout: 286 milliseconds
  For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
 Build info: version: '2.25.0', revision: '17482', time: '2012-07-18 21:09:54'
 System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version:   '1.7.0_13'
 Driver info: driver.version: RemoteWebDriver
 Session ID: 79edc751-a9a3-4ecb-a171-d2b43c088a66
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:498)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:268)
at org.openqa.selenium.remote.RemoteWebDriver.findElementByCssSelector(RemoteWebDriver.java:345)
at org.openqa.selenium.By$ByCssSelector.findElement(By.java:406)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:260)
at testpakage.testclass.main(testclass.java:30) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T08:06:18.473

试试下面的代码。

```
public class TestClass 
   {
        public static void main(String[] args) {         
        File file = new File("D:\\Driver\\IEDriverServer.exe");
        System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
        WebDriver driver = new InternetExplorerDriver();
        driver.get("http://jqueryui.com/slider/");

        WebDriver driver = new InternetExplorerDriver();
        driver.get("http://jqueryui.com/slider/");
        driver.switchTo().frame(0); //need to switch to this frame before clicking the slider
        WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/span"));
        Actions move = new Actions(driver);
        Action action = (Action) move.dragAndDropBy(slider, 30, 0).build();
        action.perform();
   } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-16T09:49:46.937

试试发送键！

```
public class TestClass 
 {
    public static void main(String[] args) {         
    File file = new File("D:\\Driver\\IEDriverServer.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver();
    driver.get("http://jqueryui.com/slider/");

    WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));

    for (int i = 1; i <= "how many times you want" ; i++) {
            slider.sendKeys(Keys.ARROW_RIGHT);
        }

}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T04:23:16.250

我只是尝试了另一种在滑块上工作的方法。

**我的代码：**

```
 public void sliderCode(int iSliderAdjustValue){
    File file = new File("D:\\Driver\\IEDriverServer.exe");
    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver();
    driver.get("http://jqueryui.com/slider/");

    WebDriver driver = new InternetExplorerDriver();
    driver.get("http://jqueryui.com/slider/");
    driver.switchTo().frame(0); //need to switch to this frame before clicking the slider
    WebElement slider = driver.findElement(By.xpath("//div[@id='slider']/a"));
    Actions builder= new Actions(driver);
    int iCount = 0;
    if (iRange > 0) {
    for(iCount = 0; iCount < iRange; iCount++) {
    builder.moveToElement(slider).click(slider).sendKeys(Keys.ARROW_UP).perform();
              }
    } else {
    for (iCount = 0; iCount > iRange; iCount--) {
    builder.click(slider).sendKeys(Keys.ARROW_DOWN) .perform();
    }
    }
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-26T23:27:43.930

```
//Try this code
WebElement e = driver.findElement(By.className("Class name of Dragger"));
Actions move = new Actions(driver);
move.moveToElement(e).clickAndHold().moveByOffset(0,250).release().perform();
Thread.sleep(3500); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T05:32:33.920

在这里使用 CSS 会很好

```
public class testclass 

{

  public static void main(String[] args)

  {         

   File file = new File("D:\\Driver\\IEDriverServer.exe");

    System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
    WebDriver driver = new InternetExplorerDriver();
    driver.get("http://jqueryui.com/slider/");

    WebElement slider = driver.findElement(By.cssSelector("css=div#slider > a"));
    Actions move = new Actions(driver);
    Action action = (Action) move.dragAndDropBy(slider, 30, 0).build();
    ((Actions) action).perform();

}

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-22T10:34:52.570

这段代码对我来说绝对没问题它处理网站的滑块：homeshop18.com 试试这段代码：

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.homeshop18.com/fashion-jewellery/category:15143/filter_Theme:%28%22Traditional+Wear%22+%22Cuff+%26+Kada%22+%22Daily+Wear%22+%22Maang+Tikka%22+%22Openable+Round%22+%22Round%22+%22Openable+Oval%22%29/sort:Popularity/inStock:true/?it_category=HP&it_action=JW-HPSP01&it_label=HP-HPSP01-131021235900-PD-JW-ZC-VK-SC_DiwaliFestWeddingJewellery&it_value=0");

WebElement Slider = driver.findElement(By.xpath("//*[@id='slider-range']/a[1]"));
Thread.sleep(3000);

Actions moveSlider = new Actions(driver);
Action action = moveSlider.dragAndDropBy(Slider, 30, 0).build();

action.perform(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-27T06:40:03.483

使用此代码

```
Actions dragger = new Actions(driver);
WebElement draggablePartOfScrollbar = driver.findElement(By.xpath("**xpath of slider**"));
int numberOfPixelsToDragTheScrollbarDown = 5000;
dragger.moveToElement(draggablePartOfScrollbar).clickAndHold().moveByOffset(0,numberOfPixelsToDragTheScrollbarDown).release().perform(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-08T04:43:43.550

我认为幻灯片是使用 css 样式格式滚动所以我们改变元素的样式

```
JavascriptExecutor js = (JavascriptExecutor) driver;

WebElement a = driver.findElement(By.xpath("//div[@id='slider-1']/a"));

js.executeScript("arguments[0].setAttribute('style', 'left: 30%;')",a); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-19T13:38:31.610

```
 package UKRTEST;

    import java.util.concurrent.TimeUnit;

    import org.openqa.selenium.By;
    import org.openqa.selenium.Dimension;
    import org.openqa.selenium.WebDriver;

    import org.openqa.selenium.WebElement;
    import org.openqa.selenium.chrome.ChromeDriver;

    import org.openqa.selenium.interactions.Actions;

    public class Ex_DragndDrop {

    public static void main(String[] args) throws InterruptedException {

    WebDriver driver;
    System.setProperty("webdriver.chrome.driver", "E:\\Chrome Driver\\chromedriver.exe");
    driver = new ChromeDriver();

    String URL = "http://www.seleniumeasy.com/test/drag-drop-range-sliders-demo.html";

    driver.get(URL);

    driver.manage().window().maximize();

    driver.manage().timeouts().implicitlyWait(10000, TimeUnit.MILLISECONDS);

    Thread.sleep(3000);
    Actions builder = new Actions(driver);

    WebElement draggablePartOfScrollbar = driver
            .findElement(By.xpath("/html/body/div[2]/div/div[2]/section/div[1]/div[1]/div/input"));
    // To get pixel count of Slider X axis and Y axis(267,25)

    Dimension sliderWidth = draggablePartOfScrollbar.getSize();
    System.out.println(sliderWidth);

    // We need to give below value in +00 to move slider to 50 and +130 to move slider to 100,-100 to move slider to 12
    int numberOfRangeToDragTheSlider = -100;
    builder.moveToElement(draggablePartOfScrollbar).clickAndHold().moveByOffset(numberOfRangeToDragTheSlider, 0)
            .release().perform();

} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-05T10:39:14.467

```
Use the below method to forwarding and Reverse seek on player

public void dragByPixelElement(WebElement element, int x, int y) {

WebElement element = driver.findElements(By.xpath("sliderPointXpath"));
        Actions act = new Actions(driver);
        act.dragAndDropBy(element, 200, 500).perform();

    }

For forward seek use positive x value and for reverse seek use negative value as I used in this code :) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-08T21:38:01.880

试试这个（最新）

```
public class TestSliders {

    public static WebDriver driver;

    public static void main(String[] args) {
        WebDriverManager.chromedriver().setup();
        driver = new ChromeDriver();
        driver.get("https://jqueryui.com/slider/");
        driver.manage().window().maximize();
        driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
        driver.switchTo().frame(0); 
        WebElement slider = driver.findElement(By.xpath("//*[@id=\"slider\"]/span"));
        new Actions(driver).dragAndDropBy(slider, 40, 0).perform();

    }
} 
```

# javascript - 连接形状中所有点的算法

> ID：15171746
> 
> 赞同：2
> 
> 时间：2013-03-02T06:56:39.507
> 
> 标签：javascript, connection, polygon, point

我试图弄清楚如何连接形状中的所有点，点的数量是动态的。

我用一个正方形来演示，有四点：

a - 左上，b - 右上，c - 右下，d - 左下

所以...

```
var connections = [
    new Connection(a, b),
    new Connection(a, c),
    new Connection(a, d),
    new Connection(b, c),
    new Connection(b, d),
    new Connection(c, d)
]; 
```

连接正方形（或任何四边多边形）中的所有点，但我想通过循环点数组自动执行此操作（为简单起见，此处显示为 abcd），因此它适用于任何多边形。我试图制定一个模式并在几个 for 循环中实现它，但失败了。我希望它真的很简单......

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:01:29.597

伪代码：

```
for (var i=0; i<Shape.Count; i++) {
  for (var j=i+1; j<Shape.Count; j++) {
    List.Add(i,j);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:05:04.937

```
var Connection = function (a, b) {
    console.log('Connecting ' + a + ' and ' + b);
}

var points = ['a','b','c','d','e'];

(function traverse() {
    for (var i = 0; i < points.length - 1; i += 1) {
        new Connection(points[0], points[ i + 1 ]);
    }
    points = points.slice(1);
    if (points.length > 1) {
        traverse(points);
    }
}()); 
```

这将输出：

```
Connecting a and b
Connecting a and c
Connecting a and d
Connecting a and e
Connecting b and c
Connecting b and d
Connecting b and e
Connecting c and d
Connecting c and e
Connecting d and e 
```

演示：http: [//jsfiddle.net/1j5n5x55/](http://jsfiddle.net/1j5n5x55/)

# php - 将默认类别设置为用户名

> ID：15171757
> 
> 赞同：0
> 
> 时间：2013-03-02T06:57:38.123
> 
> 标签：php, wordpress, blogs

我安装了一个名为“Symbiosis”的插件，它会在用户注册时使用用户名自动创建类别。

每当任何用户在网站上创建帖子时，我都会试图弄清楚如何为该帖子分配该类别。

我想将 WP 默认类别设置为作者用户名，以便当任何人创建帖子时，它会自动以他们的名义发布。（我的用户无权访问默认 wp 面板）

我知道设置 > 书写面板中的下拉菜单，但这不是我想要的，因为我无法将 slug 自定义为用户名。

这可以通过插件或以编程方式在其他地方实现吗？

类别均已创建。我可以提取登录用户的用户名并回显它，但我不知道把它放在哪里：

```
<?php global $current_user; if ( isset($current_user) ) {echo $current_user->user_login;}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:49:33.313

你可以试试这个，粘贴到你的`functions.php`

```
function my_save_post($post_id)
{
    if ( !wp_is_post_revision( $post_id ) )
    {
        global $current_user;
        if ( isset($current_user) )
        {
            $category_id = get_cat_ID( $current_user->user_login );
            wp_set_post_categories( $post_id, array($category_id) );
        }
    }
}
add_action('save_post', 'my_save_post'); 
```

# java - java中的除法

> ID：15171762
> 
> 赞同：4
> 
> 时间：2013-03-02T06:58:00.957
> 
> 标签：java, floating-point

我在 Java 中有一个简单的划分：

```
float f = 19.7f/100;
System.out.println(f); // 0.19700001

double d = 19.7/100;
System.out.println(d); // 0.19699999999999998 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:07:41.073

这是有史以来最常见的问题之一，所以我将在这里提出几点。

1.  计算机只能表示有限数量的数字，因此在存储数字并随后将它们除法时必须进行四舍五入。这种四舍五入自然会产生错误，但如果您只想要 3 位精度，那么它们在您的情况下应该无关紧要。

2.  The behavior of rounding off is a bit unpredictable because computers store numbers in binary. So whereas 19.7 is a terminating decimal, the same number is a repeating decimal in binary -- 10011.10110011001100110011001100110011... ... so you can see that rounding off at an arbitrary point will produce behavior that is not predictable from the terminating decimal expression.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:02:42.737

Mystical 给出的链接是必读的，但它有点厚。试试[这个网站](http://floating-point-gui.de/)以获得更适合初学者的版本。

tl;dr 是浮点运算总是需要舍入，并且由于具有更高的精度，双精度数的舍入方式与浮点数不同。这有点像如何将 55 四舍五入到最接近的 10 将是 60，但四舍五入到最接近的 10 将是 100。

在这种情况下，您不能准确地以浮点数或双精度数表示十进制数 0.197（或 19.7），因此每个数都会为您提供它*可以*表示的最接近该值的数字。双精度可以更接近一点，因为它具有更高的精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:19:38.057

Java 使用 IEEE754 浮点数来处理它的浮点数和双精度数。本标准设计为无法准确表示以 10 为底的以 2 为底的数字。请参阅此处[http://en.wikipedia.org/wiki/IEEE_floating_point](http://en.wikipedia.org/wiki/IEEE_floating_point)。

以下不完全是标准，而是一个示例，只是为了让您了解为什么基数为 2 的浮点数不适合其他基数。

```
基数 2 = 基数 10
 0001 = 0001 -> 从 0*8 + 0*4 + 0*2 + 1*1
 0010 = 0002 -> 从 0*8 + 0*4 + 1*2 + 0*1
 0011 = 0003 -> 从 0*8 + 0*4 + 1*2 + 1*1
 0100 = 0004 -> 从 0*8 + 1*4 + 0*2 + 0*1
 0101 = 0005 -> 从 0*8 + 1*4 + 0*2 + 1*1
                   8 = 2^3, 4 = 2^2, 2=2^1 和 1 = 2^0

然后
基数 2 = 基数 10
 .0000 = .0000 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0001 = .0625 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0010 = .1250 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0011 = .1875 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0100 = .2500 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0101 = .3125 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0110 = .3750 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .0111 = .4375 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1000 = .5000 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1001 = .5625 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1010 = .6250 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1011 = .6875 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1100 = .7500 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1101 = .8125 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1110 = .8700 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0
 .1111 = .9325 -> 从 0*1 + 0.5*0 + 0.25*0 + 0.125*0 + 0.0625*0

                   1 = 2^0, 0.5 = 2^-1, 0.25=2^-2 和 0.125 = 2^-3

```

如你看到的。4 位浮点数只能表示从 0 到 0.9325 的以 10 为基数的数字，间隙为 0.0625。这也意味着它不能做 0.1, 0.2, 0.3 ....

由于实际标准使用更多位以及使用数字移位技术。它实际上可以表示比这个例子更多的数字，但限制仍然相同。因此，当您划分某个值并且结果不属于其中之一时……JVM会将其移至最接近的值。

希望这能解释一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T07:14:40.247

不是因为除法，问题是 1.7f != 1.7 由于精度损失。我们可以看看我们的值的位表示

```
 float f = 19.7f; 
    double d = 19.7;
    System.out.println(Double.doubleToLongBits(f)); 
    System.out.println(Double.doubleToLongBits(d)); 
```

输出

```
4626238274938077184
4626238274723328819 
```

# jquery - Greasemonkey脚本和页面之间的jQuery冲突

> ID：15171769
> 
> 赞同：2
> 
> 时间：2013-03-02T06:59:05.563
> 
> 标签：jquery, greasemonkey

我正在为 Greasemonkey 编写一个附加组件并使用 jQuery 1.9.1 (via `@require`)。

但是网站上已经有 jQuery 1.1.2：

```
<script type="text/javascript" language="JavaScript" src="jquery.js" >... 
```

当我运行脚本时，它说

> “TypeError：jQuery.browser 未定义”。

我尝试将 jQuery 迁移添加到 Greasemonkey 脚本 - 但它仍然无法正常工作。

我想我需要用网站上的最新版本动态替换旧的 jQuery 版本。这可能吗（顺便说一句。jQuery 实际上并没有在那里大量使用）？

# ios - 在 didSelectRowAtIndexPath 创建的 UILabel 在同一位置不断重复

> ID：15171771
> 
> 赞同：2
> 
> 时间：2013-03-02T06:59:15.137
> 
> 标签：ios, uitableview, ios6, uilabel, tableview

嗨，我在`UILabel`重复相同位置时遇到问题`UITableView`。

我有一个自定义单元格和三个`UILabels`. 我只在 处显示第一个标签，在 处显示`cellForRowAtIndexPath`另外两个`didSelectRowAtIndexPath`。

当我点击单元格时，我想再显示两个标签显示，但是当我滚动 TableView 时它们在同一位置重复。

请帮我

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"English";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (isSearchOn) 
    {
         static NSString *CellIdentifier = @"English";
         UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
         NSString *cellValue = _searchResult [indexPath.row];
         cell.textLabel.text = cellValue;
         [cell.textLabel setFont:[UIFont fontWithName:@"Helvetica LT Std" size:22]];
    }
    else
    {
        ConversationInEnglish *con = _conversationsInfosnew [indexPath.row];
        _englishLabel = (UILabel *) [cell viewWithTag:10];
        _englishLabel.text = con.english;
        [_englishLabel setFont:[UIFont fontWithName:@"Helvetica LT Std" size:22]];
        UIButton *starButton = [UIButton buttonWithType:UIButtonTypeCustom];
        starButton.frame = CGRectMake(0 , 0 , 60, 37);
        UIImage *btnImage = [UIImage imageNamed:@"star.png"];
        [starButton setImage:btnImage forState:UIControlStateNormal];
        starButton.tag = indexPath.row;
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.accessoryView = starButton;
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([self.expandedCellIndexPath isEqual:indexPath]){
    }
    else 
    {
        ConversationInEnglish *con = _conversationsInfosnew [indexPath.row];
        UITableViewCell *cell1 = [self.tableView cellForRowAtIndexPath:indexPath];
        _myanmarLabel = (UILabel *)[cell1 viewWithTag:222];
        _myanmarLabel.tag = indexPath.row;
        _myanmarLabel.text = con.myanmar;
        [_myanmarLabel setFont: [UIFont fontWithName:@"Masterpiece Uni Sans" size:16]];
        [cell1.contentView addSubview:_myanmarLabel];
        _tonebasedLabel = (UILabel *)[cell1 viewWithTag:333];
        _tonebasedLabel.tag = indexPath.row;
        _tonebasedLabel.text = con.tone_based;
        [_tonebasedLabel setFont:[UIFont fontWithName:@"Helvetica LT Std" size:15]];
        [cell1.contentView addSubview:_tonebasedLabel];
        _speaker = [UIButton buttonWithType:UIButtonTypeCustom];
        _speaker.frame = CGRectMake(100 , 80 , 150, 37);
        UIImage *btnImage = [UIImage imageNamed:@"speaker.png"];
        [_speaker setImage:btnImage forState:UIControlStateNormal];
        _speaker.tag = indexPath.row;
        [cell1.contentView addSubview:_speaker];
        self.expandedCellIndexPath = indexPath;
        self.expandedCellHeight = 110.0f;
    }
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:16:29.680

完成它的最简单方法如下：

首先有一个与你的数据数组大小相同的可变数组（让它像这样`@property (nonatomic,strong) NSMutableArray *searchActive;`）。

然后在`tableView: didSelectRowAtIndexPath:`方法中添加以下行：（ `[self.searchActive setObject:@"1" atIndexedSubscript:indexPath.row];`这里我在数组中使用文本数据，您可以使用任何东西，即使您可以使用字典对象将数据数组创建为可变数组，其中每个字典包含两个数据，一个用于在表中显示，第二个是以除冰哪个单元被轻敲）。

在这条线之下和之间`[self.tableView beginUpdates];<#HERE#> [self.tableView endUpdates];`

只需添加一行`[self.tableView reloadData];`

并在`tableView: cellForRowAtIndexPath:`添加条件语句如下：

`if([[self.searchActive objectAtIndex:indexPath.row] isEqualToString:@"1"]) { <# display additional controls here or do what you want to change for the cell#> }`

愿这能解决你的问题:)

**编辑** 在声明属性后，您需要`@synthesize`在 .m 文件中使用它。

之后只写一个语句`self.activeCell = [NSMutableArray alloc]initWithArray:<#YOUR TableView's Data Source Array#>];`（**这里我假设您的 tableview 数据源包含字符串数据**）

这也是使您的`activeCell`数组至少具有与您的 tableview 的数据源数组一样多的数量所必需的。

把上面的语句放在`viewDidLoad`方法里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:18:15.063

创建 UILabel 的代码似乎不在您提供的代码段中，因此我不能确定这是您的问题，但请检查您的 UILabel 框架的原点是否靠得太近。其中一个原点可能需要增加其 x 值以分隔两个视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:19:45.030

尝试将 yourtextfield.hidden = yes 放入 indexpath 处的行单元格中，这样每次滚动时文本字段都会被隐藏，并且在 didselect 中您可以显示.希望这会有所帮助

# android - Android：解析同一标签中具有不同属性的xml数据

> ID：15171772
> 
> 赞同：2
> 
> 时间：2013-03-02T06:59:25.133
> 
> 标签：android, xml-parsing

我正在开发安卓应用程序。在这里我必须解析来自网络服务的数据。在 web 服务中，数据以这种格式出现。

```
<Result>
<Details Success="True"/>
<Detail pagelimit="384"/>
<Detail albumid="38569" albumname="Aashiq Faujaan" singername="Surjit Bhullar"     albumcover="http://i.pz10.com/music/album_art/1/38569.jpg"/>
<Detail albumid="38561" albumname="Sochea Vi Naa" singername="Surinderjit Maqsudpuri" albumcover="http://i.pz10.com/music/album_art/1/38561.jpg"/>
<Detail albumid="38555" albumname="Hitmaker – The Story So Far" singername="PBN" albumcover="http://i.pz10.com/music/album_art/1/38555.jpg"/>
<Detail albumid="38545" albumname="Angrezi Desi" singername="Akhil" albumcover="http://i.pz10.com/music/album_art/1/38545.jpg"/>
<Detail albumid="38544" albumname="Dil Vich (Single)" singername="Lucky Sidhu" albumcover="http://i.pz10.com/music/album_art/1/38544.jpg"/>
</Result> 
```

这是我必须解析的 xml 数据。

但是这里的细节只有一个这样的属性

```
<Detail pagelimit="384"/> 
```

之后 Detail 标签有 4 个这样的属性

```
<Detail albumid="38569" albumname="Aashiq Faujaan" singername="Surjit Bhullar"     albumcover="http://i.pz10.com/music/album_art/1/38569.jpg"/> 
```

对此的任何解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:06:09.863

您可以尝试使用 Simple xml 框架来解析您的 xml，您必须使用它定义

```
root with @Root(name = "root_element_name", strict = false) 
```

和

`xml elements with property @Element(required = false)`

Sp 在 bean 对象中，您将获得那些在运行时不存在的元素的默认值。

请参阅[教程了解如何使用 simplexmlframework](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php)

希望有帮助。谢谢

# c# - 当页面包含视图状态变量时无法加载视图状态

> ID：15171776
> 
> 赞同：4
> 
> 时间：2013-03-02T07:00:00.803
> 
> 标签：c#, asp.net

当我在几分钟内不使用或处理包含视图状态的页面并重新加载页面时，出现此错误：

**`Failed to load viewstate. The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request. For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request.`**

我通过设置页面设**​​置 enableviewstate= false得到了解决方案**

但是在应用这个之后，viewstate 变量在这个页面上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:28:12.740

原因可能是您在 Page_Load 中动态添加了控件。即在Page_Load 中添加一些网格，并将其视图状态保存到页面中，但是当页面回发并解析ViewState 时，引擎无法找到解析后的ViewState 的相应控件。

这是因为 Load 事件（由 Page_Load 处理）在页面完全加载**后触发，即创建子项、解析和应用视图状态，但在点击触发和呈现页面等客户端事件之前。**

将动态控件添加到 Page_Init，并确保它们在每次创建时都完全相同，即在第一页初始化和回发后的页面初始化时都完全相同。

一个有用的链接[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T06:21:05.350

在我的情况下，发生此问题是因为我正在创建影响控件位置值的控件，因为它无法关闭渲染该控件的标签。通过更正控制标签，它被更正了

# ios - XMPPFramework - 无法从 Openfire 服务器检索聊天历史记录

> ID：15171777
> 
> 赞同：2
> 
> 时间：2013-03-02T07:00:01.570
> 
> 标签：ios, xmpp, openfire, xmppframework

我正在尝试从 Openfire 服务器获取聊天记录。为此，我们完成了开放式火力设置，我们也将归档插件添加到了 Openfire 中。

我进行了一些谷歌搜索，发现我需要关注 XEP-0136。我也发现了这个[SO question](https://stackoverflow.com/questions/11397172/xmpp-retrieve-archive-messages-from-openfire-server)。我正在向我的服务器发送相同的节，但我收到 501 的错误代码，即未实现功能。

当我在服务器上查找存档的历史记录时，我会正确获取该历史记录。

这是我要发送的节：

```
<iq type="get" id='pk1'>
<list xmlns="urn:xmpp:archive" with="aagh116@ind351.local">
<set xmlns="http://jabber.org/protocol/rsm">
<max>30</max>
</set>
</list>
</iq> 
```

我回应我收到：

```
<iq xmlns="jabber:client" type="error" to="a51@ind351.local/bc191338">
<error code="501" type="cancel">
<feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas">
</feature-not-implemented>
</error>
</iq> 
```

我不知道我这边是否有问题，或者我们需要更改一些服务器设置..

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:50:46.893

我不知道你是否意识到这一点，但消息归档是 XMPP 的琐碎方面之一。这是 XMPP 协议最欠发达的特性之一，通常会导致冗长的提案文件被放弃，因为它的复杂性已经失控。

此外，您会发现大多数 XMPP 服务器缺少正确定义的消息归档。

如果您真的想要此功能，请尝试`mod_archive`您可以启用的 ejabbed。

祝你好运

# java - onClickListener 事件未在 TableLayout 和动态 n 行上触发

> ID：15171782
> 
> 赞同：0
> 
> 时间：2013-03-02T07:01:09.900
> 
> 标签：java, android, onclicklistener, android-tablelayout

我一直在尝试在选择表格行时触发 onClickListener 事件。

表格行在 xml 中定义的表格布局中动态添加（从数组中获取）（在 xml 中仅定义了一个空表格布局）。

***更新：***
在循环内移动 OnClickListener （用于单选按钮）有效..但不在“tablerow”上。

谁能指出我并纠正我在这方面哪里出错了？如果有人可以为我正在尝试做的事情发布同上示例，我会更加感激。谢谢..

这是我用于填充表格布局的代码：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_store_selection);

        TableLayout tl = (TableLayout) findViewById(R.id.maintable);

        TextView TVdate = (TextView) findViewById(R.id.textView1_date2);

        Intent getStorei = getIntent();
        // UsrGPSLock = i.getStringExtra("currUsrLat") + "," +
        // i.getStringExtra("currUsrLon");
        userDate = getStorei.getStringExtra("userDate");
        TVdate.setText(userDate);

        TelephonyManager tManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        uuid = tManager.getDeviceId();

        dbengine.open();

        storeList = dbengine.FetchStoreList();

        dbengine.close();

        /*final String[] storeCode = new String[storeList.length];
        final String[] storeName = new String[storeList.length];*/

        storeCode = new String[storeList.length];
        storeName = new String[storeList.length];

        for (int splitval = 0; splitval <= (storeList.length - 1); splitval++) {
            StringTokenizer tokens = new StringTokenizer(String.valueOf(storeList[splitval]), "_");

            storeCode[splitval] = tokens.nextToken().trim();
            storeName[splitval] = tokens.nextToken().trim();

        }

        System.out.println(storeList);

        // Get the TableLayout
        /*TableLayout tl = (TableLayout) findViewById(R.id.maintable);*/

        // Go through each item in the array
        for (int current = 0; current <= (storeList.length - 1); current++) {

            // Create a TableRow and give it an ID
            tr = new TableRow(this);

            tr.setId(200 + current);
            tr.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            tr.setClickable(true);

            RadioButton rb1 = new RadioButton(this);

            rb1.setId(current);
            rb1.setText(storeName[current]);
            rb1.setTextColor(Color.BLACK);
            rb1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            tr.addView(rb1);

            CheckBox cb1 = new CheckBox(this);
            cb1.setId(500 + current);
            // cb1.setText(provinces[current]);
            cb1.setTextColor(Color.BLACK);
            cb1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
            tr.addView(cb1);

            /*
             * CheckBox cb2 = new CheckBox(this); cb2.setId(300+current);
             * //cb1.setText(provinces[current]); cb2.setTextColor(Color.BLACK);
             * cb2.setLayoutParams(new LayoutParams( LayoutParams.WRAP_CONTENT,
             * LayoutParams.WRAP_CONTENT)); tr.addView(cb2);
             */

            // Add the TableRow to the TableLayout
            tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        }

        tr.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                System.out.println("inside-onClick");

                System.out.println(arg0.getId());
                System.out.println(arg0.getTag().toString());

                /*TableRow lTableRow = ((TableRow) arg0);
                RadioButton chkRB = (RadioButton) lTableRow.getChildAt(1);

                Toast.makeText(getApplicationContext(), lTableRow.toString(), Toast.LENGTH_SHORT).show();
                System.out.println(chkRB.getId());
                System.out.println(arg0.getTag().toString());*/

            }
        });

    } 
```

布局 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:layout_gravity="top"
    android:visibility="visible"
    tools:context=".StoreSelection" >

    <RelativeLayout
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/my_main_border"
        android:padding="5dp" >

        <ImageView
            android:id="@+id/mainImg1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/astix_new3" />

        <TextView
            android:id="@+id/textView1_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="12dp"
            android:layout_marginTop="15dp"
            android:layout_toRightOf="@id/mainImg1"
            android:text="Date: "
            android:textSize="12sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/textView1_date2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@id/textView1_date"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="1dp"
            android:layout_toRightOf="@id/textView1_date"
            android:text="09-02-2013 "
            android:textSize="12sp"
            android:textStyle="bold" />

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/relativeLayout1"
            android:layout_width="match_parent"
            android:layout_height="345dp"
            android:layout_alignLeft="@+id/mainImg1"
            android:layout_below="@+id/mainImg1"
            android:background="@drawable/my_border" >

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/relativeLayout1111"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/tableheader" >

                <TextView
                    android:id="@+id/textView1_battstat2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="10dp"
                    android:text="#"
                    android:textSize="12sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/textView1_battstat3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="35dp"
                    android:layout_toRightOf="@id/textView1_battstat2"
                    android:text="Store Name"
                    android:textSize="12sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/textView1_battstat4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="77dp"
                    android:layout_toRightOf="@id/textView1_battstat3"
                    android:text="Close"
                    android:textSize="12sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/textView1_battstat5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentTop="true"
                    android:layout_marginBottom="10dp"
                    android:layout_marginLeft="6dp"
                    android:layout_toRightOf="@id/textView1_battstat4"
                    android:text="Next-Day"
                    android:textSize="12sp"
                    android:textStyle="bold" />
            </RelativeLayout>

            <ScrollView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/scrollView111"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/relativeLayout1111"
                android:layout_gravity="top"
                android:fillViewport="true" >

                <RelativeLayout
                    xmlns:tools="http://schemas.android.com/tools"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TableLayout
                        xmlns:android="http://schemas.android.com/apk/res/android"
                        android:id="@+id/maintable"
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:stretchColumns="0,1" >
                    </TableLayout>
                </RelativeLayout>
            </ScrollView>

            <View
                android:id="@+id/view2"
                android:layout_width="fill_parent"
                android:layout_height="2dp"
                android:layout_below="@id/scrollView111"
                android:layout_marginTop="2dp"
                android:background="@android:color/darker_gray" />
        </RelativeLayout>

        <Button
            android:id="@+id/startQues"
            android:layout_width="wrap_content"
            android:layout_height="15dp"
            android:layout_alignLeft="@+id/textView1_date"
            android:layout_alignParentBottom="true"
            android:layout_alignRight="@+id/textView1_date2"
            android:layout_below="@+id/relativeLayout1"
            android:layout_marginBottom="0dp"
            android:layout_marginTop="1dp"
            android:clickable="false"
            android:freezesText="false"
            android:gravity="bottom|center_vertical|center_horizontal"
            android:hint="Start"
            android:linksClickable="false"
            android:text="Start"
            android:textSize="15sp" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:09:16.447

现在，您已经设置了`OnClickListener`唯一的最后一个`TableRow`，`TableLayout`因为您设置了外部`OnClickListener` **循环**`for`。移动：

```
tr.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            System.out.println("inside-onClick");

            System.out.println(arg0.getId());
            System.out.println(arg0.getTag().toString());

            /*TableRow lTableRow = ((TableRow) arg0);
            RadioButton chkRB = (RadioButton) lTableRow.getChildAt(1);

            Toast.makeText(getApplicationContext(), lTableRow.toString(), Toast.LENGTH_SHORT).show();
            System.out.println(chkRB.getId());
            System.out.println(arg0.getTag().toString());*/

        }
    }); 
```

**循环**内**`for`。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:46:33.513

您只需要在 for 循环中添加 onClick 侦听器，它就可以正常工作！

像这样 ：

```
for (int current = 0; current <= (storeList.length - 1); current++) {

            // Create a TableRow and give it an ID
            tr = new TableRow(this);
            tr.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                System.out.println("inside-onClick");

                System.out.println(arg0.getId());
                System.out.println(arg0.getTag().toString());

                /*TableRow lTableRow = ((TableRow) arg0);
                RadioButton chkRB = (RadioButton) lTableRow.getChildAt(1);

                Toast.makeText(getApplicationContext(), lTableRow.toString(), Toast.LENGTH_SHORT).show();
                System.out.println(chkRB.getId());
                System.out.println(arg0.getTag().toString());*/

            }
        });

} 
```**

# php - 使用 php 和 Symfony2 框架从 URL 读取数据的最佳方法是什么？

> ID：15171786
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:01:41.890
> 
> 标签：php, parsing, url, symfony

我使用 symfony2 框架构建了一个项目。我必须解析用户输入的 URL 并对其进行分析。例如，如果用户输入类似“ [http://www.amazon.com/Samsung-Galaxy-GT-I9300-Factory-Unlocked/dp/B007VCRRNS/ref=sr_1_1?s=wireless&ie=UTF8&qid=1362207625&sr=1- 1&keywords=samsung+galaxy+s3](https://rads.stackoverflow.com/amzn/click/com/B007VCRRNS) " 程序应提取型号名称、价格、图像等。

我可以使用任何捆绑包或插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:33:39.947

您还可以使用 File_get_contents 来获取数据，也可以使用 Javascript 来获取数据，因为有很多选项可用：

```
<?php
    $output = file_get_contents(
        'http://www.website.com/');
    $output = str_replace('rhs','"rhs"',$output);
    $output = str_replace('lhs','"lhs"',$output);
    $output = str_replace('error','"error"',$output);
    $output = str_replace('icc','"icc"',$output);

    $json = json_decode($output);
    $rhs = $json->rhs;
?> 
```

并使用 jQuery ajax

```
jQuery.ajax( url [, settings] )
jQuery.get( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

和纯 JavaScript 脚本

```
function parseURLParams(url) {
  var queryStart = url.indexOf("?") + 1;
  var queryEnd   = url.indexOf("#") + 1 || url.length + 1;
  var query      = url.slice(queryStart, queryEnd - 1);

  if (query === url || query === "") return;

  var params  = {};
  var nvPairs = query.replace(/\+/g, " ").split("&");

  for (var i=0; i<nvPairs.length; i++) {
    var nv = nvPairs[i].split("=");
    var n  = decodeURIComponent(nv[0]);
    var v  = decodeURIComponent(nv[1]);
    if ( !(n in params) ) {
      params[n] = [];
    }
    params[n].push(nv.length === 2 ? v : null);
  }
  return params;
} 
```

使用如下：

```
var urlString = "http://www.foo.com/bar?a=a+a&b%20b=b&c=1&c=2&d#hash";
var urlParams = parseURLParams(urlString); 
```

它返回一个像这样的对象：

```
{
  "a"  : ["a a"],     /* param values are always returned as arrays */
  "b b": ["b"],       /* param names can have special chars as well */
  "c"  : ["1", "2"]   /* an URL param can occur multiple times! */
  "d"  : [null]       /* params without values are set to null */ 
} 
```

所以

```
parseURLParams("www.mints.com?name=something") 
```

给

```
{name: ["something"]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T15:16:02.130

严格来说还不知道怎么做，但是在 symfony 代码中看到当前 url 是如何被分析并绑定到一个 Request() 对象中的，并且提取了所有的 GET 和 POST 参数可能会很棒。

可能可重用于在您的服务/控制器内部分析您的 url，并且只需使用 $request->query 中的 GET 参数生成的 Request 对象。

只是一个想法=）

# iphone - 线碰撞 cocos2d

> ID：15171801
> 
> 赞同：0
> 
> 时间：2013-03-02T07:03:18.537
> 
> 标签：iphone, objective-c, cocos2d-iphone, geometry

我想做三角碰撞检测。例如，想象一个等边三角形，每当一个圆圈进入三角形内部时，我如何检测它。一旦我管理了检测，我希望在三角形的一侧有一些小盒子，稍微挡住左侧。我如何使三角形的线条停在盒子上。我在我的帖子的评论上附加了一张图片

```
- (void) draw
{
    for(int i = 0; i < [enemies count]; i++)
    {
        int angle1 = 150;
        int distance1 = 150;
        angle1 = angle1 * M_PI / 180;
        CGPoint start = ((CCSprite *)[enemies objectAtIndex:0]).position;
        CGPoint end = ccp(start.x + distance1 * sin(angle1),
                          start.y + distance1 * cos(angle1));

        ccDrawLine(start, end);
        start = ((CCSprite *)[enemies objectAtIndex:0]).position;
        end = ccp(start.x + distance1 * sin(angle1*-1),
                  start.y + distance1 * cos(angle1*-1));

        ccDrawLine(start, end);
    }
} 
```

# python - 如何使用 RDFLib 解析 .ttl 文件？

> ID：15171802
> 
> 赞同：13
> 
> 时间：2013-03-02T07:03:36.740
> 
> 标签：python, python-2.7, parsing, turtle-rdf

我有一个`.ttl`表格文件。它有 4 个属性/列，其中包含以下形式的四元组：

1.  `(id, student_name, student_address, student_phoneno)`.
2.  `(id, faculty_name, faculty_address, faculty_phoneno)`.

我知道如何`.n3`用 RDFLib 解析三元组；

```
from rdflib import Graph
g = Graph()
g.parse("demo.nt", format="nt") 
```

但我不确定如何解析这些四元组。

我的目的是解析和提取与特定 ID 有关的所有信息。学生和教师的 id 可以相同。

如何使用 RDFLib 处理这些四元组并将其用于基于 的聚合`id`？

文件中的示例片段`.ttl`：

```
#@ <id1>
<Alice> <USA> <12345>

#@ <id1>
<Jane> <France> <78900> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-02T15:09:43.353

[Turtle](http://www.w3.org/TeamSubmission/turtle/)是`Notation 3`语法的子集，因此[rdflib](https://rdflib.readthedocs.org/en/latest/)应该能够使用`format='n3'`. 检查是否`rdflib`保留注释（在示例中的注释 ( ) 中`id`指定了 s ）。`#...`如果不是，并且输入格式与示例中所示的一样简单，那么您可以手动解析它：

```
import re
from collections import namedtuple
from itertools import takewhile

Entry = namedtuple('Entry', 'id name address phone')

def get_entries(path):
    with open(path) as file:
        # an entry starts with `#@` line and ends with a blank line
        for line in file:
            if line.startswith('#@'):
                buf = [line]
                buf.extend(takewhile(str.strip, file)) # read until blank line
                yield Entry(*re.findall(r'<([^>]+)>', ''.join(buf)))

print("\n".join(map(str, get_entries('example.ttl')))) 
```

输出：

```
Entry(id='id1', name='Alice', address='USA', phone='12345')
Entry(id='id1', name='Jane', address='France', phone='78900') 
```

要将条目保存到数据库：

```
import sqlite3

with sqlite3.connect('example.db') as conn:
    conn.execute('''CREATE TABLE IF NOT EXISTS entries
             (id text, name text, address text, phone text)''')
    conn.executemany('INSERT INTO entries VALUES (?,?,?,?)',
                     get_entries('example.ttl')) 
```

如果您需要在 Python 中进行一些后处理，则按 id 分组：

```
import sqlite3
from itertools import groupby
from operator import itemgetter

with sqlite3.connect('example.db') as c:
    rows = c.execute('SELECT * FROM entries ORDER BY id LIMIT ?', (10,))
    for id, group in groupby(rows, key=itemgetter(0)):
        print("%s:\n\t%s" % (id, "\n\t".join(map(str, group)))) 
```

输出：

```
id1:
    ('id1', 'Alice', 'USA', '12345')
    ('id1', 'Jane', 'France', '78900') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-10T18:22:46.310

看起来至少从 rdflib 5.0.0 开始支持turtle。我做了

```
from rdflib import Graph
graph = Graph()
graph.parse('myfile.ttl', format='ttl') 
```

这解析得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:56:43.890

您可以按照 Snakes 和 Coffee 的建议进行操作，仅将该函数（或其代码）包装在带有 yield 语句的循环中。这将创建一个生成器，可以迭代地调用它来动态创建下一行的字典。假设您要将这些写入 csv，例如，使用 Snakes 的 parse_to_dict：

```
import re
import csv

writer = csv.DictWriter(open(outfile, "wb"), fieldnames=["id", "name", "address", "phone"])
# or whatever 
```

您可以将生成器创建为函数或内联理解：

```
def dict_generator(lines): 
    for line in lines: 
        yield parse_to_dict(line) 
```

- 或者 -

```
dict_generator = (parse_to_dict(line) for line in lines) 
```

这些几乎是等价的。在这一点上，您可以通过调用获得一个 dict-parsed 行`dict_generator.next()`，并且您会神奇地一次获得一个 - 不涉及额外的 RAM 抖动。

如果你有 16 gigs 的原始数据，你也可以考虑制作一个生成器来拉线。它们真的很有用。

来自 SO 和一些文档的生成器的更多信息： [你可以使用 Python 生成器函数做什么？](https://stackoverflow.com/questions/102535/what-can-you-use-python-generator-functions-for) [http://wiki.python.org/moin/Generators](http://wiki.python.org/moin/Generators)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-02T07:31:00.083

似乎目前没有这样的库来解析[Turtle - Terse RDF Triple Language](http://www.w3.org/TeamSubmission/turtle/)

正如您已经知道语法一样，最好的办法是使用[PyParsing](http://pyparsing.wikispaces.com/)首先创建语法，然后解析文件。

我还建议根据您的需要调整以下[EBNF 实现](http://pyparsing.wikispaces.com/file/view/ebnf.py)

# jsf-2 - 为什么是 html 无法在页面中呈现

> ID：15171806
> 
> 赞同：0
> 
> 时间：2013-03-02T07:04:04.670
> 
> 标签：jsf-2, primefaces

我正在使用 Jsf 2.x 和 Primefaces 3.5。

我像这样使用嵌套在 JSF 表单中的 html 表单。渲染时会渲染 JSF 表单。普通 Html 表单无法渲染。

```
<h:form>
  <form>
    <h:commandButton value="Submit"/>
  </form>
<h:form> 
```

我尝试为所有表单设置 id 并设置名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:01:16.240

HTML 中的嵌套表单概念无效。即使您使用`<h:form>`, 最终在您的场景中的表单内呈现类似表单，这是无效的方法。所以，你的代码应该像

```
<h:form>
      <h:commandButton value="Submit"/>
 </h:form>

<form action=".." method="post">

</form> 
```

[在这里](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)查看 BalusC 的答案

# javascript - Sound Cloud javascript API Stop() 方法不起作用

> ID：15171815
> 
> 赞同：1
> 
> 时间：2013-03-02T07:04:42.407
> 
> 标签：javascript, sdk, streaming, soundcloud

我正在尝试使用以下代码切换启动和停止 Sound Cloud 流。play() 方法就像条件逻辑一样工作。但是 stop() 方法不是。谁能解释我做错了什么？

```
SC.initialize({
  client_id: 'MY_CLIENT_ID'
});

  if (streamingBool) {
      SC.stream("/tracks/" + myTrackId, function (sound1) {
          sound1.stop();
      });
      streamingBool = false;
  } else {
      SC.stream("/tracks/" + myTrackId, function (sound) {
          sound.play();
      });
      streamingBool = true;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T06:56:59.183

这段代码有两个问题

*   SC.stream 异步执行其函数回调
*   可变范围，即您试图停止当前播放的声音以外的声音

一个可行的实现是：

```
SC.initialize({
  client_id: 'MY_CLIENT_ID'
});

var playing = false;    

// Play a track
play = function(myTrackId){
  if(playing){
    SC.sound.stop();
  }

  SC.stream("/tracks/" + myTrackId, function(sound){
    // Store the sound object inside the SC object which belongs 
    // to the global scope so that it can be accessed out of the 
    // scope of this callback
    SC.sound = sound;
    SC.sound.play();
    playing = true;
  });
}

// Stop the currently playing track
stop = function(){
  if(playing){
    SC.sound.stop();
  }
} 
```

# java - 如何使用十进制格式比较值？

> ID：15171822
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:05:13.763
> 
> 标签：java

我从用户那里得到两个百分比的值——高于百分比和低于百分比，并且必须与百分比值进行比较，它可能是 +12.05% 或 -12.05% 并存储在数据库中..我使用十进制格式并收到错误..

```
DecimalFormat newpercent= DecimalFormat.getPercentInstance(percent); 
```

我在 getPercentInstance() 中收到错误..

我使用的数据类型是否正确？必须使用十进制格式以外的任何其他数据类型？

百分比是数据库中的字符串值..EX：

```
newpercent=percent
maxpercent=abovepercent
minpercent=belowpercent 
```

此外，我将在我的代码中将 newpercent 与 maxpercent 和 minpercent 进行比较..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:23:39.983

虽然从您的代码中不清楚是什么，`percent`但似乎错误只是由它引起的
并且检查它的[API](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#getPercentInstance%28java.util.Locale%29)表明该`getPercentInstance`方法将`Locale`实例作为参数

例如：
`DecimalFormat.getPercentInstance(Locale.ENGLISH)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:52:52.973

我根本看不出 DecimalFormat 与比较值有什么关系。只需将值作为双精度数或 BigDecimals 或其他任何值，并使用为此目的提供的运算符和方法直接比较它们。

# android - 如何在列表视图中检索标题

> ID：15171828
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:06:15.007
> 
> 标签：android, listview

伙计们，我发现了这个购物车示例，尽管它是实现购物车示例的惊人示例 [http://www.androiddom.com/2011/06/android-shopping-cart-tutorial-part-2.html](http://www.androiddom.com/2011/06/android-shopping-cart-tutorial-part-2.html)

你能告诉我当我点击“PROCEED TO CHECKOUT”按钮时如何获得所有书籍的标题吗？

请帮我解决这个问题，我尝试了很多但无法获得 PS：由于代码太大，我不会将其粘贴在这里，请耐心从 Github [https://github.com/dreamdom/Shopping下载代码-Cart-Tutorial-part-2](https://github.com/dreamdom/Shopping-Cart-Tutorial-part-2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T11:29:49.620

在按钮`onClick ()`事件..

```
 mCartList = ShoppingCartHelper.getCartList();

 // Make sure to clear the selections
 for(int i=0; i<mCartList.size(); i++) {

      String str = mCartList.get(i).title;

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:34:43.853

在 ShoppingCartActivity 的按钮 onClick() 事件上，您可以使用以下代码遍历存储在列表中的所有选定项目

```
for (int i = 0; i < mCartList.size(); i++) {
        Product obj = mCartList.get(i);
        Toast.makeText(ShoppingCartActivity.this, obj.title, Toast.LENGTH_SHORT).show();
    } 
```

在这里，我在 tost 消息中显示了标题，如果你想要在任何其他地方，你也可以将所有这些标题存储在数组中。

# php - 如何在cake php中检查多个提交按钮条件

> ID：15171829
> 
> 赞同：0
> 
> 时间：2013-03-02T07:06:25.957
> 
> 标签：php, html, cakephp-2.0

// 查看代码

```
echo $form->Create('Survey'); 

echo $form->submit( 'prev.arrow.png', array( 'name' => 'task', 'value' => 'next', 'div' => false ) ); 

echo $form->submit( 'next.arrow.png', array( 'name' => 'task', 'value' => 'prev', 'div' => false ) ); 

echo $form->end(); 
```

// 控制器代码

```
if( isset( $this->params['form']['task'] ) ) {

    if( $this->params['form']['task'] == 'prev' ) {

        $this->Redirect( $prev_page ); 

        exit(); 

    } else if ( $this->params['form']['task'] == 'next' ) {

        $this->Redirect( $next_page ); exit(); 

    }

} 
```

// 这没用 ！！！而且我还有超过 7 个提交按钮。和一个处理数据库中保存逻辑记录的最终按钮。如果还有其他逻辑……还建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:25:30.643

您的表单正在提交 2 个具有相同名称的变量。（任务）如果不介意您按下哪个按钮，您总是提交`inputs`表单标签（`<form>`和`</form>`）之间包含的所有内容因此，您正在覆盖其中一个。

我建议您根据单击的按钮在控制器中调用两个不同的操作。

为此，您可以使用`postLink`Form helper 的操作创建两个按钮，而不是创建带有两个按钮的表单。

就像是：

```
//calling the `prev` action for the current controller
echo $this->Form->postLink("Prev", array('action'=> 'prev'), array( 'class' => 'button'));

//calling the `next` action for the current controller
echo $this->Form->postLink("Next", array('action'=> 'next'), array( 'class' => 'button')); 
```

然后在你的控制器中：

```
public function prev(){
   .... //whatever
}

public function next(){
   ... //whatever
} 
```

或者，您也可以创建 2 个具有两种不同提交操作的表单，每个按钮一个。但它会是一样的。

# java - Struts 2 注释问题在行动

> ID：15171830
> 
> 赞同：1
> 
> 时间：2013-03-02T07:06:41.717
> 
> 标签：java, jsp, configuration, struts2, struts2-convention-plugin

我使用了 Struts2 Annotation

**我`web.xml`的是：**

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**我的 JSP 是：**

```
 <s:form action="test" method="post">
            <s:textfield name="id" label="Id"></s:textfield>        
            <s:submit value="Submit"></s:submit>
     </s:form> 
```

**我的课是：**

```
 @Namespace("/")
      public class Test extends ActionSupport {

  private static final long serialVersionUID = 1L;

      @Action(value = "test", results = { @Result(name = "success", location =     "success.jsp") })
      public String input() {

         System.out.println("input call");
         return SUCCESS;
     }

 } 
```

**我收到错误：**

```
HTTP Status 404 - There is no Action mapped for namespace / and action name test. 
```

**文件夹结构：**

![我的文件夹结构是](../Images/b21e7289f53aa7f947d560d23bede552.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T08:02:11.547

请执行下列操作。

将您的测试操作放在一个名为“com.mydomain.action”的包中，第一部分可以是您想要的任何内容，但它必须以“.action”结尾，struts2-conventions 会选择您的操作。如果还有其他包，例如：“com.mydomain.action.here”，那么“action”后面的包将被解释为 struts2 命名空间。

请将“success.jsp”重命名为“test.jsp”并将其移动到：“/WEB-INF/content/test.jsp”，/WEB-INF/content 是默认命名空间中的操作将解析其视图的位置。对于 /here 包，视图需要放在 /WEB-INF/content/here 下

让我们重写您的测试操作以保持约定默认值：

```
public class Test extends ActionSupport {
   private static final long serialVersionUID = 1L;
   public String execute() {
         System.out.println("input call");
         return SUCCESS;
   }
 } 
```

还有一点要注意。您可以调用您的视图 test-success.jsp 而不仅仅是测试。这是因为约定将首先查找一个视图，该视图具有从操作返回的字符串附加到操作名称，在本例中为测试。

同样，虽然类是驼峰式的： MyMagicTest 对这样一个动作类的 veiw 将是 my-magic-test.jsp

**现在注释适合：**

现在你知道你可以在没有 xml 或注释的情况下做很多事情......约定在需要时使用注释来覆盖默认值。您这样做是为了走捷径，因此注释表示例外情况。不要使用它们来定义开箱即用的约定。

有关约定的更多信息，请参阅：[https](https://cwiki.apache.org/WW/convention-plugin.html) ://cwiki.apache.org/WW/convention-plugin.html ，我强烈建议您全面阅读，以便了解许多可能的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:58:58.893

> 没有为命名空间“xxx”和操作名称“yyy”映射操作

对于刚开始使用 Struts2 的初学者在配置动作流时经常出现的错误。要消除此错误，您需要将 URL 正确映射到操作方法。

在 Struts2 中，每个动作肯定都映射到某个方法。但是您应该将显式映射到操作方法的操作与默认隐式映射到方法的操作区分开来`execute()`。

URL 格式存在差异。如果您使用[DMI](https://struts.apache.org/core-developers/action-configuration.html#dynamic-method-invocation)，您可以在 URL 中使用感叹号映射方法名称，并将您发布到操作的方法分派。或者您可以使用如下方法属性

```
<s:submit value="Submit" method="input"/> 
```

如果您使用[约定插件](https://struts.apache.org/plugins/convention)和注释，请确保您没有使用 XML 配置和注释双重配置您的操作。第一个优先并覆盖配置。因此，摆脱映射中的任何操作，`struts.xml`并在操作、方法和包上应用注释。

不幸的是，并非所有 IDE 都通过插件支持 Struts2 注释配置，但**您仍然可以在单独的`struts-xxx.xml`配置中使用双重配置映射，您可以提供 IDE 但*不包含*在 main`struts.xml`** .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-04T09:33:35.190

我意识到这是一个老问题，但我最近遇到了这个问题并使用以下方法解决了它，所以我想我会在这里记录它。

我解决它的方法是将java类（在您的情况下为Test.java）放在名为“actions”的包下，而不是将其留在默认包中。

还要记得公开执行函数并删除 struts.xml。

# python - 尝试使用 pypm 加载包时不断收到相同的 SyntaxError: invalid syntax

> ID：15171834
> 
> 赞同：0
> 
> 时间：2013-03-02T07:07:34.477
> 
> 标签：python, windows, python-2.7, syntax-error, pypm

我下载了 ActivePython-2.7.2.5-win32-x86 并按照文档中的说明安装了软件。但是 pypm 根本不起作用。从文档中，我相信在成功安装 Python 后，我只需要在 IDLE (Python GUI) 中使用此代码：

```
C:\> pypm install pandas 
```

安装和加载包。但是，我不断收到如下所示的语法错误

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:21:10) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> C:\> pypm install pyramid
SyntaxError: invalid syntax 
```

当我尝试运行相同的代码时，我也会收到相同的错误消息：

```
C:\> pypm install pandas 
```

在 Python 交互式 shell 中如下：

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:21:10) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> C:\> pypm install pyramid
  File "<stadin>", line 1
    C:\> pypm install pyramid
     ^
SyntaxError: invalid syntax 
```

我确实尝试打开 Python 包管理器（PyPM）来检查那里是否有任何问题。我在 PyPM 窗口中找到了以下几行：

```
'pypm' is not recognized as an internal or external command,
operable program or hatch file.

C:\windows\system32> 
```

我真的不知道我哪里做错了，我尝试卸载 ActivePython 2.7.2.5 并重新安装几次，我仍然收到相同的错误消息。

当我只是输入

```
pypm install pandas 
```

在 Python 交互式 shell 中如下：

```
ActivePython 2.7.2.5 (ActiveState Software Inc.) based on
Python 2.7.2 (default, Jun 24 2011, 12:21:10) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> pypm install pyramid
  File "<stadin>", line 1
    pypm install pyramid
               ^
SyntaxError: invalid syntax 
```

仍然是相同的错误消息。

我尝试卸载 ActivePython 2.7.2.5 并重新安装几次，仍然收到相同的错误消息。我使用的是 Windows 7 操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T21:57:43.320

我遇到了同样的问题。不过，给出的答案并不完全准确。

在最近安装了 ActivePython 2.7.8.10 的 Windows 上，我尝试执行与 OP 相同的操作并收到相同的错误消息。当我遇到问题时，我也在使用 Python 2.7.8 shell。

“正确答案”是在 ActiveState Python 2.7 的文件夹中，有一个 Python 包管理器 (PyPM) 的图标。启动此图标会打开一个命令提示符窗口，其中包含以下内容：

> PyPM 1.4.3 (Python Package Manager) 简要帮助：输入“pypm install PACKAGE”来安装一个包。输入“pypm search KEYWORDS”来搜索包。键入“pypm upgrade”以升级已安装的软件包。
> 键入“pypm help”以显示完整的帮助。C:\Windows\system32>

在这里，我可以输入命令来运行 pypm 并安装我想要的包。

*需要注意的一点。这仅适用于 ActiveState Python 包。其他 Python 包没有安装 PyPM——所以如果你想坚持使用其他 Python 发行版，你必须先弄清楚如何安装它。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:19:39.690

你不能打电话

```
pypm install pyramid 
```

从 Python 解释器提示符。

您必须从命令行控制台/shell 键入它。

# php - 在没有默认“下一行”填充的情况下附加 img

> ID：15171838
> 
> 赞同：2
> 
> 时间：2013-03-02T07:08:11.217
> 
> 标签：php, jquery, css, image, dom

我已经查看了相关的问题（和答案），所以我试图在网站上保留一份副本。

这是问题所在；我正在做一个小图像滑块，它使用 php 首先获取目录中的所有图像，然后吐出其中的 7 个：

```
<div id="imageScroller">
<div id="wide">
<?php
    $images = scandir("folder/folder/folder");
    for($i = 2; $i < 10; $i++){
        echo "<img src='folder/folder/folder/" . $images[$i] . "' name='" . $i . "' class='imgScroll'>";
    }
?>
</div>
</div> 
```

然后它将`$images`数组和计数器传递`$i`给 Javascript：

```
var images = new Array();
images = <?php echo json_encode($images); ?>;
var i = <?php echo json_encode($i); ?>; 
```

`setInterval`对于重复函数并将图像动画到左侧，附加一个新图像并在每次传递时删除第一个图像：

```
setInterval("newImg()", 3000);
function newImg(){
    if(i == images.length){
        i = 2; //The PHP array returns the first two folders as [0] => ., [1] => ..
    }
    $("#wide").children().first().animate({'marginLeft': '-93px'}, 3000, function(){
    $("#wide").append("<img src='folder/folder/folder/" + images[i] + "' name='" + i + "' class='imgScroll'>\n").children().first().remove();
    i++;
    });
} 
```

还有一些 CSS 来总结摘录：

```
 #imageScroller{
            width: 100%;
            height: 114px;
            width: 651px;
            overflow: hidden;
            border: 1px solid gray;
            padding: 0;
        }
        #wide{
            width: 837px;
        }
        .imgScroll{
            padding-left: 5px;
            padding-right: 5px;
            height: 114px;
            width: 83px;
            margin: 0;
            border: 0;
        } 
```

所以我的问题是，由于我`img`在不同时间创建元素，**我如何摆脱不同行上的图像之间的间距？**或者，简单地，附加图像，以便根据浏览器它们都在同一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:24:12.250

尝试将 line-height 和 font-size 设置为 0：

```
#wide {
    width: 837px;
    line-height: 0;
    font-size: 0;
} 
```

这是处理内联元素时最简单的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:26:28.947

尝试去：

```
.imgScroll { display: inline-block; } 
```

# jslider - 是否可以在 jSlider 刻度上找到第一个刻度线的像素位置？

> ID：15171839
> 
> 赞同：0
> 
> 时间：2013-03-02T07:08:41.340
> 
> 标签：jslider

我正在尝试将自定义绘制的图形与 jSlider 的比例对齐（滑块提供图形的 X 轴比例）。我需要滑块旋钮来设置与图形相关的值，所以它确实需要是一个 jSlider。

麻烦的是，如果刻度标签的长度发生变化，那么刻度的第一个（和最后一个）刻度线的起始位置会不同，这需要我手动更改图形的位置以匹配。

是否可以设置滑块的比例，然后确定第一个刻度线的像素位置，以便我可以设置图表的开始以匹配？

BasicSliderUI 的 trackRect.x 将为我提供正确的 X 点位置，但我无法访问它。我不断使用以下代码在 trackRect 上获得空指针；我显然在这里遗漏了一些非常基本的东西，因为我已经看到 RangeSlider 通过扩展 BasicSliderUI 访问 trackRect.x。我根本没有像它们一样覆盖任何东西：

访问 trackRect.x 值的类：

```
import javax.swing.JSlider;
import javax.swing.plaf.basic.BasicSliderUI;

public class ExtendedBasicSliderUI  extends BasicSliderUI
{
   public ExtendedBasicSliderUI(JSlider b)
   {
       super(b);
   }

   public int getScaleStartPosition()
   {
       return trackRect.x;
   } 
```

}

在包含滑块的视图的构造函数中：

```
initComponents();
extendedUI = new ExtendedBasicSliderUI(jSlider1);
jSlider1.setUI(extendedUI);

criteriaModel.setGraphAlignmentIntervalRatio(extendedUI.getScaleStartPosition()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T02:29:30.030

我应该在很久以前就回答这个问题，因为我最终找到了解决办法。
我从这里修改了范围滑块的代码：http: [//ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/](http://ernienotes.wordpress.com/2010/12/27/creating-a-java-swing-range-slider/) 抱歉，我不得不删除 Java Doc 注释以适应它在 3000 个字符的限制内。

滑块类代码是这样的：

```
import javax.swing.JSlider;

public class RangeSlider extends JSlider
{
    RangeSliderUI rangeUI;

    public RangeSlider()
    {
        initSlider();
    }

    public RangeSlider(int min, int max)
    {
        super(min, max);
        initSlider();
    }

    private void initSlider()
    {
        setOrientation(HORIZONTAL);
    }

    @Override
    public void updateUI()
    {
        rangeUI = new RangeSliderUI(this);
        setUI(rangeUI);
        // Update UI for slider labels.  This must be called after updating the
        // UI of the slider.  Refer to JSlider.updateUI().
        updateLabelUIs();
    }

    @Override
    public int getValue()
    {
        return super.getValue();
    }

    public RangeSliderUI getRangeUI()
    {
        return rangeUI;
    }

    @Override
    public void setValue(int value)
    {
        int oldValue = getValue();
        if (oldValue == value)
        {
            return;
        }

        // Compute new value and extent to maintain upper value.
        int oldExtent = getExtent();
        int newValue = Math.min(Math.max(getMinimum(), value), oldValue + oldExtent);
        int newExtent = oldExtent + oldValue - newValue;

        // Set new value and extent, and fire a single change event.
        getModel().setRangeProperties(newValue, newExtent, getMinimum(),
            getMaximum(), getValueIsAdjusting());
    }

    public int getUpperValue()
    {
        return getValue() + getExtent();
    }

    /**
     * Sets the upper value in the range.
     */
    public void setUpperValue(int value)
    {
        // Compute new extent.
        int lowerValue = getValue();
        int newExtent = Math.min(Math.max(0, value - lowerValue), getMaximum() - lowerValue);

        // Set extent to set upper value.
        setExtent(newExtent);
    }

    public boolean isRangeSlider()
    {
        return rangeUI.isRangeSlider();
    }

    /**
     * Sets whether this is currently a range slider or not. (true is range slider, false is not range slider)
     */
    public void setRangeSlider(boolean rangeSlider)
    {
        this.rangeUI.setRangeSlider(rangeSlider);
    }
} 
```

UI类是这样的：

```
package YourPackage;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Polygon;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.Shape;
import java.awt.event.MouseEvent;

import javax.swing.JComponent;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.plaf.basic.BasicSliderUI;

/**
 * UI delegate for the RangeSlider component.  RangeSliderUI paints two thumbs,
 * one for the lower value and one for the upper value.
 * 
 * Setting rangeSlider = false; causes the slider to revert to being a normal slider
 * rather than a range slider. 
 */
class RangeSliderUI extends BasicSliderUI
{

    /** Color of selected range. */
    private Color rangeColor = Color.darkGray;
    /** Location and size of thumb for upper value. */
    private Rectangle upperThumbRect;
    /** Indicator that determines whether upper thumb is selected. */
    private boolean upperThumbSelected;
    /** Indicator that determines whether lower thumb is being dragged. */
    private transient boolean lowerDragging;
    /** Indicator that determines whether upper thumb is being dragged. */
    private transient boolean upperDragging;
    // Range/single slider (true is range slider/ false is single slider)
    private boolean rangeSlider = false;

    public RangeSliderUI(RangeSlider b)
    {
        super(b);
    }

    public int getTrackRect()
    {
        return trackRect.x;
    }

    public boolean isRangeSlider()
    {
        return rangeSlider;
    }

    public void setRangeSlider(boolean rangeSlider)
    {
        this.rangeSlider = rangeSlider;
    }

    @Override
    public void installUI(JComponent c)
    {
        upperThumbRect = new Rectangle();
        super.installUI(c);
    }

    @Override
    protected TrackListener createTrackListener(JSlider slider)
    {
        return new RangeTrackListener();
    }

    @Override
    protected ChangeListener createChangeListener(JSlider slider)
    {
        return new ChangeHandler();
    }

    @Override
    protected void calculateThumbSize()
    {
        // Call superclass method for lower thumb size.
        super.calculateThumbSize();

        // Set upper thumb size.
        upperThumbRect.setSize(thumbRect.width, thumbRect.height);
    }

    @Override
    protected void calculateThumbLocation()
    {
        // Call superclass method for lower thumb location.
        super.calculateThumbLocation();

        // Adjust upper value to snap to ticks if necessary.
        if (slider.getSnapToTicks())
        {
            int upperValue = slider.getValue() + slider.getExtent();
            int snappedValue = upperValue;
            int majorTickSpacing = slider.getMajorTickSpacing();
            int minorTickSpacing = slider.getMinorTickSpacing();
            int tickSpacing = 0;

            if (minorTickSpacing > 0)
            {
                tickSpacing = minorTickSpacing;
            }
            else if (majorTickSpacing > 0)
            {
                tickSpacing = majorTickSpacing;
            }

            if (tickSpacing != 0)
            {
                // If it's not on a tick, change the value
                if ((upperValue - slider.getMinimum()) % tickSpacing != 0)
                {
                    float temp = (float) (upperValue - slider.getMinimum()) / (float) tickSpacing;
                    int whichTick = Math.round(temp);
                    snappedValue = slider.getMinimum() + (whichTick * tickSpacing);
                }

                if (snappedValue != upperValue)
                {
                    slider.setExtent(snappedValue - slider.getValue());
                }
            }
        }

        // Calculate upper thumb location.  The thumb is centered over its value on the track.
        if (slider.getOrientation() == JSlider.HORIZONTAL)
        {
            int upperPosition = xPositionForValue(slider.getValue() + slider.getExtent());
            upperThumbRect.x = upperPosition - (upperThumbRect.width / 2);
            upperThumbRect.y = trackRect.y;
        }
        else
        {
            int upperPosition = yPositionForValue(slider.getValue() + slider.getExtent());
            upperThumbRect.x = trackRect.x;
            upperThumbRect.y = upperPosition - (upperThumbRect.height / 2);
        }
    }

    @Override
    protected Dimension getThumbSize()
    {
        return new Dimension(12, 12);
    }

    @Override
    public void paint(Graphics g, JComponent c)
    {
        super.paint(g, c);

    }

    @Override
    public void paintTrack(Graphics g)
    {
        // Draw track.
        super.paintTrack(g);

        Rectangle trackBounds = trackRect;

        if (rangeSlider)
        {
            if (slider.getOrientation() == JSlider.HORIZONTAL)
            {
                // Determine position of selected range by moving from the middle
                // of one thumb to the other.
                int lowerX = thumbRect.x + (thumbRect.width / 2);
                int upperX = upperThumbRect.x + (upperThumbRect.width / 2);

                // Determine track position.
                int cy = (trackBounds.height / 2) - 2;

                // Save color and shift position.
                Color oldColor = g.getColor();
                g.translate(trackBounds.x, trackBounds.y + cy);

                // Draw selected range.
                g.setColor(rangeColor);
                for (int y = 0; y <= 3; y++)
                {
                    g.drawLine(lowerX - trackBounds.x, y, upperX - trackBounds.x, y);
                }

                // Restore position and color.
                g.translate(-trackBounds.x, -(trackBounds.y + cy));
                g.setColor(oldColor);

            }
            else
            {
                // Determine position of selected range by moving from the middle
                // of one thumb to the other.
                int lowerY = thumbRect.x + (thumbRect.width / 2);
                int upperY = upperThumbRect.x + (upperThumbRect.width / 2);

                // Determine track position.
                int cx = (trackBounds.width / 2) - 2;

                // Save color and shift position.
                Color oldColor = g.getColor();
                g.translate(trackBounds.x + cx, trackBounds.y);

                // Draw selected range.
                g.setColor(rangeColor);
                for (int x = 0; x <= 3; x++)
                {
                    g.drawLine(x, lowerY - trackBounds.y, x, upperY - trackBounds.y);
                }

                // Restore position and color.
                g.translate(-(trackBounds.x + cx), -trackBounds.y);
                g.setColor(oldColor);
            }
        }

        // Shifted the knob painting to here so it is painted with the track or not.
        Rectangle clipRect = g.getClipBounds();
        if (upperThumbSelected)
        {
            // Paint lower thumb first, then upper thumb.
            if (clipRect.intersects(thumbRect))
            {
                paintLowerThumb(g);
            }
            if (clipRect.intersects(upperThumbRect))
            {
                paintUpperThumb(g);
            }

        }
        else
        {
            // Paint upper thumb first, then lower thumb.
            if (clipRect.intersects(upperThumbRect))
            {
                paintUpperThumb(g);
            }
            if (clipRect.intersects(thumbRect))
            {
                paintLowerThumb(g);
            }
        }
    }

    @Override
    public void paintThumb(Graphics g)
    {
    }

    private void paintLowerThumb(Graphics g)
    {
        Rectangle knobBounds = thumbRect;
        int w = knobBounds.width;
        int h = knobBounds.height;

        // Create graphics copy.
        Graphics2D g2d = (Graphics2D) g.create();

        // Create default thumb shape.
        Shape thumbShape = createThumbShape(w - 1, h - 1);

        // Draw thumb.
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.translate(knobBounds.x, knobBounds.y);

        g2d.setColor(Color.CYAN);
        g2d.fill(thumbShape);

        g2d.setColor(Color.BLUE);
        g2d.draw(thumbShape);

        // Dispose graphics.
        g2d.dispose();
    }

    private void paintUpperThumb(Graphics g)
    {
        if (rangeSlider)
        {
            Rectangle knobBounds = upperThumbRect;
            int w = knobBounds.width;
            int h = knobBounds.height;

            // Create graphics copy.
            Graphics2D g2d = (Graphics2D) g.create();

            // Create default thumb shape.
            Shape thumbShape = createThumbShape(w - 1, h - 1);

            // Draw thumb.
            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
            g2d.translate(knobBounds.x, knobBounds.y);

            g2d.setColor(Color.orange);
            g2d.fill(thumbShape);

            g2d.setColor(Color.orange.darker().darker());
            g2d.draw(thumbShape);

            // Dispose graphics.
            g2d.dispose();
        }
    }

    private Shape createThumbShape(int width, int height)
    {
        Point p1 = new Point(0, 0);
        Point p2 = new Point(width, 0);
        Point p3 = new Point(width, (height / 2) + 1);
        Point p4 = new Point((width / 2) + 1, height);
        Point p5 = new Point(0, (height / 2) + 1);

        int[] xs =
        {
            p1.x, p2.x, p3.x, p4.x, p5.x
        };
        int[] ys =
        {
            p1.y, p2.y, p3.y, p4.y, p5.y
        };

        Polygon thumb = new Polygon(xs, ys, xs.length);

        return thumb;
    }

    private void setUpperThumbLocation(int x, int y)
    {
        Rectangle upperUnionRect = new Rectangle();
        upperUnionRect.setBounds(upperThumbRect);

        upperThumbRect.setLocation(x, y);

        SwingUtilities.computeUnion(upperThumbRect.x, upperThumbRect.y, upperThumbRect.width, upperThumbRect.height, upperUnionRect);
        slider.repaint(upperUnionRect.x, upperUnionRect.y, upperUnionRect.width, upperUnionRect.height);
    }

    @Override
    public void scrollByBlock(int direction)
    {
        synchronized (slider)
        {
            int blockIncrement = (slider.getMaximum() - slider.getMinimum()) / 10;
            if (blockIncrement <= 0 && slider.getMaximum() > slider.getMinimum())
            {
                blockIncrement = 1;
            }
            int delta = blockIncrement * ((direction > 0) ? POSITIVE_SCROLL : NEGATIVE_SCROLL);

            if (upperThumbSelected)
            {
                int oldValue = ((RangeSlider) slider).getUpperValue();
                ((RangeSlider) slider).setUpperValue(oldValue + delta);
            }
            else
            {
                int oldValue = slider.getValue();
                slider.setValue(oldValue + delta);
            }
        }
    }

    @Override
    public void scrollByUnit(int direction)
    {
        synchronized (slider)
        {
            int delta = 1 * ((direction > 0) ? POSITIVE_SCROLL : NEGATIVE_SCROLL);

            if (upperThumbSelected)
            {
                int oldValue = ((RangeSlider) slider).getUpperValue();
                ((RangeSlider) slider).setUpperValue(oldValue + delta);
            }
            else
            {
                int oldValue = slider.getValue();
                slider.setValue(oldValue + delta);
            }
        }
    }

    public class ChangeHandler implements ChangeListener
    {

        public void stateChanged(ChangeEvent arg0)
        {
            if (!lowerDragging && !upperDragging)
            {
                calculateThumbLocation();
                slider.repaint();
            }
        }
    }

    public class RangeTrackListener extends TrackListener
    {

        @Override
        public void mousePressed(MouseEvent e)
        {
            if (!slider.isEnabled())
            {
                return;
            }

            currentMouseX = e.getX();
            currentMouseY = e.getY();

            if (slider.isRequestFocusEnabled())
            {
                slider.requestFocus();
            }

            // Determine which thumb is pressed.  If the upper thumb is selected (last one dragged), then check its position first;
            // otherwise check the position of the lower thumb first.
            boolean lowerPressed = false;
            boolean upperPressed = false;

            if (upperThumbSelected)
            {
                // Only enable upper slider movement if in range mode.
                if (upperThumbRect.contains(currentMouseX, currentMouseY) && rangeSlider)
                {
                    upperPressed = true;
                }
                else
                {
                    if (thumbRect.contains(currentMouseX, currentMouseY))
                    {
                        lowerPressed = true;
                    }
                }
            }
            else
            {
                if (thumbRect.contains(currentMouseX, currentMouseY))
                {
                    lowerPressed = true;
                }
                else
                {
                    // Only enable if in range mode.
                    if (upperThumbRect.contains(currentMouseX, currentMouseY) && rangeSlider)
                    {
                        upperPressed = true;
                    }
                }
            }

            // Handle lower thumb pressed.
            if (lowerPressed)
            {
                switch (slider.getOrientation())
                {
                    case JSlider.VERTICAL:
                        offset = currentMouseY - thumbRect.y;
                        break;
                    case JSlider.HORIZONTAL:
                        offset = currentMouseX - thumbRect.x;
                        break;
                }
                upperThumbSelected = false;
                lowerDragging = true;
                return;
            }
            lowerDragging = false;

            // Handle upper thumb pressed.
            if (upperPressed)
            {
                switch (slider.getOrientation())
                {
                    case JSlider.VERTICAL:
                        offset = currentMouseY - upperThumbRect.y;
                        break;
                    case JSlider.HORIZONTAL:
                        offset = currentMouseX - upperThumbRect.x;
                        break;
                }
                upperThumbSelected = true;
                upperDragging = true;
                return;
            }
            upperDragging = false;
        }

        @Override
        public void mouseReleased(MouseEvent e)
        {
            lowerDragging = false;
            upperDragging = false;
            slider.setValueIsAdjusting(false);
            super.mouseReleased(e);
        }

        @Override
        public void mouseDragged(MouseEvent e)
        {
            if (!slider.isEnabled())
            {
                return;
            }

            currentMouseX = e.getX();
            currentMouseY = e.getY();

            if (lowerDragging)
            {
                slider.setValueIsAdjusting(true);
                moveLowerThumb();

            }
            else if (upperDragging)
            {
                slider.setValueIsAdjusting(true);
                moveUpperThumb();
            }
        }

        @Override
        public boolean shouldScroll(int direction)
        {
            return false;
        }

        private void moveLowerThumb()
        {
            int thumbMiddle = 0;

            switch (slider.getOrientation())
            {
                case JSlider.VERTICAL:
                    int halfThumbHeight = thumbRect.height / 2;
                    int thumbTop = currentMouseY - offset;
                    int trackTop = trackRect.y;
                    int trackBottom = trackRect.y + (trackRect.height - 1);
                    int vMax = yPositionForValue(slider.getValue() + slider.getExtent());

                    // Apply bounds to thumb position.
                    if (drawInverted())
                    {
                        trackBottom = vMax;
                    }
                    else
                    {
                        trackTop = vMax;
                    }
                    thumbTop = Math.max(thumbTop, trackTop - halfThumbHeight);
                    thumbTop = Math.min(thumbTop, trackBottom - halfThumbHeight);

                    setThumbLocation(thumbRect.x, thumbTop);

                    // Update slider value.
                    thumbMiddle = thumbTop + halfThumbHeight;
                    slider.setValue(valueForYPosition(thumbMiddle));
                    break;

                case JSlider.HORIZONTAL:
                    int halfThumbWidth = thumbRect.width / 2;
                    int thumbLeft = currentMouseX - offset;
                    int trackLeft = trackRect.x;
                    int trackRight = trackRect.x + (trackRect.width - 1);
                    int hMax = xPositionForValue(slider.getValue() + slider.getExtent());

                    // Apply bounds to thumb position.
                    if (drawInverted())
                    {
                        trackLeft = hMax;
                    }
                    else
                    {
                        trackRight = hMax;
                    }
                    thumbLeft = Math.max(thumbLeft, trackLeft - halfThumbWidth);
                    thumbLeft = Math.min(thumbLeft, trackRight - halfThumbWidth);

                    setThumbLocation(thumbLeft, thumbRect.y);

                    // Update slider value.
                    thumbMiddle = thumbLeft + halfThumbWidth;
                    slider.setValue(valueForXPosition(thumbMiddle));
                    break;

                default:
                    return;
            }
        }

        private void moveUpperThumb()
        {
            int thumbMiddle = 0;

            switch (slider.getOrientation())
            {
                case JSlider.VERTICAL:
                    int halfThumbHeight = thumbRect.height / 2;
                    int thumbTop = currentMouseY - offset;
                    int trackTop = trackRect.y;
                    int trackBottom = trackRect.y + (trackRect.height - 1);
                    int vMin = yPositionForValue(slider.getValue());

                    // Apply bounds to thumb position.
                    if (drawInverted())
                    {
                        trackTop = vMin;
                    }
                    else
                    {
                        trackBottom = vMin;
                    }
                    thumbTop = Math.max(thumbTop, trackTop - halfThumbHeight);
                    thumbTop = Math.min(thumbTop, trackBottom - halfThumbHeight);

                    setUpperThumbLocation(thumbRect.x, thumbTop);

                    // Update slider extent.
                    thumbMiddle = thumbTop + halfThumbHeight;
                    slider.setExtent(valueForYPosition(thumbMiddle) - slider.getValue());
                    break;

                case JSlider.HORIZONTAL:
                    int halfThumbWidth = thumbRect.width / 2;
                    int thumbLeft = currentMouseX - offset;
                    int trackLeft = trackRect.x;
                    int trackRight = trackRect.x + (trackRect.width - 1);
                    int hMin = xPositionForValue(slider.getValue());

                    // Apply bounds to thumb position.
                    if (drawInverted())
                    {
                        trackRight = hMin;
                    }
                    else
                    {
                        trackLeft = hMin;
                    }
                    thumbLeft = Math.max(thumbLeft, trackLeft - halfThumbWidth);
                    thumbLeft = Math.min(thumbLeft, trackRight - halfThumbWidth);

                    setUpperThumbLocation(thumbLeft, thumbRect.y);

                    // Update slider extent.
                    thumbMiddle = thumbLeft + halfThumbWidth;
                    slider.setExtent(valueForXPosition(thumbMiddle) - slider.getValue());
                    break;

                default:
                    return;
            }
        }
    }
} 
```

The x position for the track rectangle (which is also the position of the first tick mark) , to align your graph to the slider, is gotten by calling:

```
rangeSlider1.getRangeUI().getTrackRect() 
```

I also didn't like their round knobs and changed them to the more traditional shape.

# java - 访问 HashMap 的元素

> ID：15171840
> 
> 赞同：0
> 
> 时间：2013-03-02T07:08:46.667
> 
> 标签：java, hashmap

我可以分别访问 HashMap 的第一个和第二个元素吗？我的意思是如果我有一个 HashMap

```
Map<Integer, Integer> testMap = new HashMap<Integer, Integer>();
int f = testMap.first(); 
```

我知道没有这样的功能，但我怎样才能访问那个元素呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:10:51.030

`HashMap`不维持秩序。

> 此类不保证地图的顺序；特别是，它不保证订单会随着时间的推移保持不变。

[参考](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

您可以使用`LinkedHashMap`which 维护插入顺序或`TreeMap`.

[**LinkedHashMap**](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

> 此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。请注意，如果将键重新插入到地图中，则插入顺序不会受到影响。（如果在调用 m.containsKey(k) 将在调用之前立即返回 true 时调用 m.put(k, v)，则将键 k 重新插入到映射 m 中。）

[**树状图**](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

地图根据其键的自然顺序或`Comparator`在地图创建时提供的排序，具体取决于使用的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:39:32.530

```
 Iterator it = testMap.entrySet().iterator();

                    while (it.hasNext()) {
                            Map.Entry pairs = (Map.Entry) it.next();
                           System.out.println("Key"+pairse.getKey());
                          System.out.println("Value"+pairs.getValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:12:30.163

Map 没有排序，因此没有“第一个条目”之类的东西，这也是 Map（或 HashMap）上没有 get-by-index 方法的原因。

你可以这样做：

```
Map<Integer, Integer> map = ...;  // wherever you get this from

// Get the first entry that the iterator returns
Map.Entry<Integer, Integer> entry = map.entrySet().iterator().next();
(Note: Checking for an empty map omitted). 
```

您的代码不会获取地图中的所有条目，它会立即返回（并跳出循环）并找到第一个条目。

注意：调用`iterator()`并不意味着您正在遍历整个地图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T07:13:48.530

不。你不能像 HapMap/HashTable 一样将数据存储在 Entry for ( [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.Entry.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.Entry.html) ) 中，它包含键和值一起。

您始终可以获取 entrySet() 的迭代器并访问条目。或尝试获取仅返回一组键的 keySet()。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T07:14:13.287

您可以使用`LinkedHashMap`which 具有和 之类的方法`firstKey`。`lastKey`但是对于第二个键，您必须进行迭代，并且按照在地图中输入键的顺序获取元素

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-02T07:14:15.517

```
HashMap <Integer, Integer> testMap = new HashMap <Integer, Integer> ();
testMap.put (1, 2);
testMap.put (2, 3);
Iterator <Integer> i = testMap.values ().iterator ();
System.out.println ("First element: " + i.next ());
System.out.println ("Second element: " + i.next ()); 
```

请注意，因为`HashMap`不记得添加了哪些顺序元素，“第一个元素”不一定意味着“第一个添加”。

# iphone - 在 iOS 中设置 unicode 字符宽度

> ID：15171847
> 
> 赞同：1
> 
> 时间：2013-03-02T07:09:46.483
> 
> 标签：iphone, ios, objective-c, ipad

我正在使用以下 UNICODES 在 iPad 上设计表情菜单，但我无法自定义其高度。

```
arrayEmoticons=[[NSArray alloc]initWithObjects:@"\U0001F61D",
                @"\U0001F621",@"\U0001F61C",@"\U0001F47F",@"\U0001F603",
                @"\U0001F60D",@"\U0001F612",@"\U0001F637",@"\U0001F614",
                @"\U0001F60A",@"\U0001F633",@"\U0001F631",@"\U0001F628",
                @"\U0001F609",@"\U0001F601", nil]; 
```

我需要增加 unicode 字符的高度/宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:31:35.207

您永远不会更改 unicode 值的大小，而是需要更改 textField 或 textView 的大小。

我对osx应用程序的以下代码做了同样的事情

```
NSArray *arrayEmoticons=[[NSArray alloc]initWithObjects:@"\U0001F61D",
                @"\U0001F621",@"\U0001F61C",@"\U0001F47F",@"\U0001F603",
                @"\U0001F60D",@"\U0001F612",@"\U0001F637",@"\U0001F614",
                @"\U0001F60A",@"\U0001F633",@"\U0001F631",@"\U0001F628",
                @"\U0001F609",@"\U0001F601", nil];

NSLog(@"%@",arrayEmoticons);

[self.textView setFont:[NSFont fontWithName:@"Helvetica-BoldOblique" size:30.0]];

for (id icon in arrayEmoticons) {
  [self.textView setString:[NSString stringWithFormat:@"%@%@",self.textView.string,icon]];
} 
```

并得到了很好的输出： ![在此处输入图像描述](../Images/94cd471755f5a3b85879941bec0e963a.png)

编辑：

对于 NSButton：

```
[self.button setFont:[NSFont fontWithName:@"Helvetica-BoldOblique" size:30.0]]; 
[self.button setTitle:arrayEmoticons[3]]; 
```

对于 iOS：

现在我尝试使用 ios，它成功了。您可以检查尺寸 5 和 50 的差异

```
self.button.titleLabel.font = [UIFont systemFontOfSize:5]; 
self.button.titleLabel.font = [UIFont systemFontOfSize:50];  
self.button.titleLabel.text=arrayEmoticons[3]; 
```

# ruby-on-rails - 如何在 Rails 的视图模板中创建和使用变量？

> ID：15171850
> 
> 赞同：13
> 
> 时间：2013-03-02T07:10:48.467
> 
> 标签：ruby-on-rails, ruby

我还是 ruby​​ 和 rails 的新手，并且正在寻找创建一个变量，以便我可以在视图模板中一遍又一遍地使用它。例如，我现在的代码是

```
<title>Home Page</title>
<h3>Welcome to my Home Page</h3> 
```

现在我想把这个“主页”作为变量或符号，这样我就可以使用那个变量/符号，而不是一遍又一遍地输入字符串，怎么做？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-02T07:27:39.783

当我第一次阅读您的问题时，我以为您是在问[这个](https://stackoverflow.com/questions/4700617/pass-a-variable-into-a-partial-rails-3)，但我意识到这是不同的。

Michael Hartl 令人惊叹的[Ruby-on-Rails 教程](http://ruby.railstutorial.org/)演示了我最喜欢的方法，即创建一个实例变量，该变量完全按照您想要的方式在布局中引用。

## rails_root/app/controllers/application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  attr_accessor :extra_title
  ... 
```

这使得`@extra_title`所有控制器都可以访问。现在在一个特定的控制器内：

## rails_root/app/controllers/things_controller.rb

```
class ThingsController < ApplicationController

  def index
    @extra_title = "| Things"
    ... 
```

好的，那这一切是为了什么？哦，对了，我们想在布局中使用它：

## rails_root/app/views/layouts/application.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title>Best. App. Ever. <%= @extra_title %></title>
... 
```

现在你正在使用 Rails。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-02T07:33:49.107

您可以使用实例变量`prefixed by @`，以便可以在整个视图中使用它。

例如：

**控制器：**

```
@my_home = "Home Page" 
```

**看法：**

```
<title><%= @my_home %></title> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T07:15:55.463

为此，您可以使用布局或部分布局。这里有一个很好的指南：http: [//guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)

您可以将该内容放在文件 app/views/layout/application.html.erb 中，它将用作您的默认布局。

您可以做的另一件事是创建一个部分，因此您可以使用该内容创建一个像 /app/views/shared/_header.html.erb 这样的文件，然后您可以通过写入从任何视图呈现它

```
render partial: '/shared/header.html.erb' 
```

# java - 递归方法堆栈溢出错误

> ID：15171855
> 
> 赞同：0
> 
> 时间：2013-03-02T07:11:29.717
> 
> 标签：java, recursion, stack-overflow

在我的代码中，我只是想制作一个简单的程序，告诉你一个数字是否可以均匀地分成另一个数字（在这种情况下，这个数字是 3）。现在我说的是，如果 x （数字没有均匀除以 0.01，这会给我堆栈溢出错误。如果我将值设为 0.2，它表示 9 是三的整除数，而实际上下一个数字除以成三后三是6

```
public class divisible {

   public static void divide(double x) {
      double three = 3;
      double value = x%three;

      if (value==0) {
         System.out.println(x + " is a divisible of 3 ");
         return;
      }else{ 
         //System.out.println("x does not divide evenly into 3");
         divide(x+(.01));
      }

   }

   public static void main(String args[]) {
      divide(4);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:23:37.877

递归是无限的原因有点模糊：`0.1`不能在`double`. 当你`0.1`加到`3`10 次时，你*不会*得到`4`- 你会得到一个接近`4`但比它大一点的数字。该数字不会均匀地划分您的目标，因此递归继续到`4.1`，`4.2`，等等，没有结束。

原因与此循环永不停止的原因相同（[试试看！](http://ideone.com/w2Fk6n)）：

```
for (double x = 3 ; x != 4 ; x += 0.1) {
    System.out.println(x);
} 
```

使用[`BigDecimal`](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)代替`double`将解决问题，因为`0.1`将被准确地表示。当然，它仍然会打印错误消息（`"is divisible of 3"`即使`x`在余数变为零时调用中的数字可能是完全不同的数字，也是硬编码的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T07:23:28.377

您的问题是您将两个双打与`==`. 由于浮点运算的实现方式，这将产生不可靠的结果。您的方法应如下所示：

```
public static void divide(int x) {
  int three = 3;
  int value = x%three;

  if (value==0) {
     System.out.println(x + " is a divisible of 3 ");
     return;
  }else{ 
     System.out.println("x does not divide evenly into 3");
//         divide(x+(.01));
  }

} 
```

如果您希望使用双参数访问该方法，您可以强制转换：

```
public static void divide(double x) {
    x = (int) Math.round(x); 
```

如果您希望能够处理大于 的数字`Integer.MAX_VALUE`，可以使用`BigInteger`

# mysql - 排序连接的数据

> ID：15171856
> 
> 赞同：0
> 
> 时间：2013-03-02T07:11:31.870
> 
> 标签：mysql, doctrine-orm

我目前正在跨 3 个表执行以下查询；`handset`,`deal`和`tariff`:

```
SELECT
    h.*, d.*, t.* FROM handset h
LEFT JOIN deal d ON h.id = d.handset_id
LEFT JOIN tariff t ON d.tariff_id = t.id
ORDER BY
    h.popularity
DESC LIMIT 10 
```

关税表有一个名为的列`price`，我想将价格最低的关税加入到查询的结果中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:18:25.283

```
 SELECT
   h.*, d.*, t.* FROM handset h
   LEFT JOIN deal d ON h.id = d.handset_id
   LEFT JOIN tariff t ON d.tariff_id = t.id
   where t.price=(select min(price) from tariff)
   ORDER BY
   h.popularity
   DESC LIMIT 10 
```

# c# - NHibernate.PropertyValueException ：非空属性引用空或瞬态和依赖单元测试

> ID：15171864
> 
> 赞同：0
> 
> 时间：2013-03-02T07:12:51.387
> 
> 标签：c#, unit-testing, nhibernate

当一个单元测试依赖于另一个单元测试并且由于 NHiberante 会话中的对象而失败时，我有一种奇怪的行为。

只有当我从夹具运行所有单元测试时，我才会得到“NHibernate.PropertyValueException：非空属性引用空或瞬态”（为简单起见，我只有两个测试）。如果我运行其中一个，它总是通过。

我觉得我应该做一些清理工作。我尝试了 session.Clean() 和 session.Evict(obj)，但没有帮助。有人可以解释这里发生了什么吗？

实体：

```
public class Order
{
    public virtual Guid Id { get; protected set; }
    public virtual string Name { get; set; }
} 
```

映射（使用 Loquacious API）：

```
public class OrderMapping : ClassMapping<Order>
{
    public OrderMapping()
    {
        Id(e => e.Id, m =>
            {
                m.Generator(Generators.Guid);
                m.Column("OrderId");
            });
        Property(e => e.Name, m => m.NotNullable(true));
    }
} 
```

Fixture ctor（使用内存数据库）：

```
var config = new Configuration();
config.CurrentSessionContext<ThreadStaticSessionContext>();
config.DataBaseIntegration(db =>
    {
        db.ConnectionString = "uri=file://:memory:,Version=3";
        db.Dialect<SQLiteDialect>();
        db.Driver<CsharpSqliteDriver>();
        db.ConnectionReleaseMode = ConnectionReleaseMode.OnClose;
        db.KeywordsAutoImport = Hbm2DDLKeyWords.AutoQuote;
        db.LogSqlInConsole = true;
    })
    .SessionFactory()
    .GenerateStatistics();

var mapper = new ModelMapper();
mapper.AddMappings(Assembly.GetExecutingAssembly().GetExportedTypes());
config.AddMapping(mapper.CompileMappingForAllExplicitlyAddedEntities());

ISessionFactory sessionFactory = config.BuildSessionFactory();
this.session = sessionFactory.OpenSession();

// This will leave the connection open
new SchemaExport(config).Execute(
    true, true, false, this.session.Connection, null);
CurrentSessionContext.Bind(this.session); 
```

单元测试：

```
[Test]
[ExpectedException(typeof(PropertyValueException))]
public void Order_name_is_required()
{
    var order = new Order();
    this.session.Save(order);
}

[Test]
public void Order_was_updated()
{
    var order = new Order { Name = "Name 1" };
    this.session.Save(order);

    this.session.Flush();

    order.Name = "Name 2";
    this.session.Update(order);

    Assert.AreEqual(this.session.Get<Order>(order.Id).Name, "Name 2");
} 
```

订单更新失败，出现“NHibernate.PropertyValueException：非空属性引用空或瞬态”异常。实际上，如果在之后编写，任何其他单元测试都会失败。

**编辑 1** 找到了解决方案。上次我试图清理我使用的会话时

```
[TestFixtureTearDown] 
```

代替

```
[TearDown]
public void TearDown()
{
    this.session.Clear();
} 
```

**在每次**测试运行之前都进行了正确的清理，并允许使用相同的会话并且不重新创建内存数据库结构。对不起，我犯了明显的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:06:59.597

不要为多个测试重复使用同一个会话。

此外，根据 NHibernate 文档，如果从会话/事务内部生成了异常，则不能保证会话处于一致状态，并且必须在不进一步使用的情况下进行处理。

# uml - 如何为 < > 另一个用例？

> ID：15171873
> 
> 赞同：3
> 
> 时间：2013-03-02T07:13:49.640
> 
> 标签：uml, sequence-diagram

谁能提供任何链接来显示如何绘制这种类型的条件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T09:43:24.693

除了观察者所说的，在里面使用一个 opt 片段和一个 ref 片段。

*   将序列图的一部分设置为可选的 opt 片段
*   将 opt 的内容委托给另一个序列图的 ref 片段。

这样，您的用例和序列图之间就有了 1-1 的关系，这通常更清晰。

参见例如这张图片：[http ://www.ibm.com/developerworks/rational/library/content/RationalEdge/feb04/3101_figure11.jpg](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/feb04/3101_figure11.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T16:17:03.123

当您参考*序列*图时，您可能正在寻找`opt`片段：参见[示例](http://www.tracemodeler.com/articles/a_quick_introduction_to_uml_sequence_diagrams/images/opt%20combined%20fragment.png)。（[来源](http://www.tracemodeler.com/articles/a_quick_introduction_to_uml_sequence_diagrams/)）

这样，您可以有条件地包含`extend`用例所需的某些调用。

[您将在网络上找到更详细的 opt 片段解释。](http://www.ibm.com/developerworks/rational/library/3101.html#N101A8)

# oracle - 如何在另一个数据库中进行更改

> ID：15171883
> 
> 赞同：0
> 
> 时间：2013-03-02T07:14:59.667
> 
> 标签：oracle, data-migration

我们有数百个表，其中包含 Oracle 数据库中的数千条记录。现在我们将为 Oracle 安装一个云数据库，其中将包含 Oracle 中的所有表。现在，如果我们对该 Oracle 数据库进行任何更改，云数据库中也应有所反映。例如，如果我在 Oracle DB 中的表 x 中插入或删除记录，云表中也应该这样做。

我知道触发器是其中一种选择，但它对我们没有帮助，因为我们必须为每个表创建一个触发器。帮助我以更短且更好的方式完成这项工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T11:35:02.767

如果您想获取所有表的列表并自动生成触发器，那么有许多 dba 表在其中 - 请查看 dba_tables（或 all_tables，具体取决于您拥有的访问权限）。您可以轻松地制作一个脚本，以便为触发器自动创建一个脚本，如果这是您所追求的。

如果您的数据库具有任何类型的高事务率，尽管我可能会避免这种情况并查看另一种解决方案，例如 shareplex 等。如果您在使用从数据库（只是从源数据库复制），那么如果您的云数据库也是 oracle，oracle 复制可能会执行您想要的操作。

# hsqldb - 在 Linux 服务器中设置 HSQLDB

> ID：15171884
> 
> 赞同：0
> 
> 时间：2013-03-02T07:15:09.770
> 
> 标签：hsqldb

我正在尝试使用以下命令为我的 jsp 设置 HSQLDB 的别名

```
java -cp /usr/share/java/hsqldb.jar org.hsqldb.Server -database.0 db/db1 -dbname.0 db1 
```

之后我得到的输出为

```
dbserver:
 [java] [Server@16c9ba38]: [Thread[main,5,main]]: checkRunning(false) entered
 [java] [Server@16c9ba38]: [Thread[main,5,main]]: checkRunning(false) exited
 [java] [Server@16c9ba38]: Startup sequence initiated from main() method
 [java] [Server@16c9ba38]: Loaded properties from [/var/lib/tomcat6/webapps/Bookstore/server.properties]
 [java] [Server@16c9ba38]: Initiating startup sequence...
 [java] [Server@16c9ba38]: Server socket opened successfully in 5 ms.
 [java] [Server@16c9ba38]: Database [index=0, id=0, db=file:db/bookdb, alias=bookdb] opened sucessfully in 268 ms.
 [java] [Server@16c9ba38]: Startup sequence completed in 275 ms.
 [java] [Server@16c9ba38]: 2013-03-02 07:00:07.884 HSQLDB server 1.8.0 is online
 [java] [Server@16c9ba38]: To close normally, connect and execute SHUTDOWN SQL
 [java] [Server@16c9ba38]: From command line, use [Ctrl]+[C] to abort abruptly 
```

在这个阶段我可以在另一个 ssh 连接中执行 sql 脚本，但是如果我按 Ctrl+C，看起来监听器将被关闭，我无法执行其他 sql 脚本。

我在这里做错了吗？还是在我看到上面的输出之后我应该这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T13:10:34.877

首先，-dbname.0 在命令行中定义为 db1，但在服务器输出中报告为 bookdb。检查您没有包含冲突值的 server.properties 文件。

否则，没有任何问题。您启动服务器，它报告它已启动并准备好连接。当然，如果您按 Ctrl+C，则该过程将终止。

或者，您可以执行 shell 脚本来运行服务器。指南中对此进行了全面介绍，并且 HSQLDB 分发包中有一个工作脚本。

# html - 创建一个盒子，里面有一系列盒子，里面有文字

> ID：15171886
> 
> 赞同：-2
> 
> 时间：2013-03-02T07:15:39.117
> 
> 标签：html, css

我正在寻找一个盒子，里面有一系列盒子，它们都有自己的文本居中。我已经在油漆中创建了一个原型并拍摄了一个屏幕截图。有谁知道我怎么能用代码做到这一点？[http://screencast.com/t/hFCxwKxxJi5](http://screencast.com/t/hFCxwKxxJi5)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:36:11.550

使用 的`colspan`属性`td`将文本扩展到多个单元格。

```
<table>
    <tr><td colspan="2">Some text here</td></tr>
    <tr><td>Next</td><td>Last</td></tr>
</table> 
```

在样式中添加以下内容以使文本居中并绘制边框

```
<style type="text/css">
    table, td
    {
        padding: 3px 8px;
        border-collapse: collapse;
        border: 1px solid #000000;
        text-align: center;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:21:13.757

您可以使用`<table>`标签轻松完成。像这样 -

```
<table border="2">
  <tr><td colspan="2">Hello</td></tr>
  <tr><td>Hello 2</td><td>Hello 3</td></tr>
</table> 
```

完毕。如果需要，您可以使用 CSS 对其进行样式设置。

# extjs - 我可以在一个文件中加载整个命名空间吗？

> ID：15171887
> 
> 赞同：3
> 
> 时间：2013-03-02T07:15:42.593
> 
> 标签：extjs, extjs4

我想将一个命名空间中的所有类合并到一个文件中，而不是分别加载它们。是的，我知道加载器不应该在生产环境中使用，但是这些命名空间很少使用。

假设我有命名空间

```
App.Employee.* 
```

我现在想`App.Employee`在一个文件/请求中加载整个命名空间。对我来说，这听起来应该是可能的，但我没有设法让它工作，因为加载器正在寻找一个名为`App.Employee`.

那么这可能是开箱即用的，还是理论上可能的，还是根本不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:06:56.247

最好的方法是构建您的应用程序，包括使用较少的部分。如果您的应用程序会预先加载 20 或 30 秒，这并不重要，但稍后延迟可能会更加明显和明显。Sencha Cmd 可以帮助你。

If you still think your app can benefit from dynamic loading, use `Ext.Loader.loadScript`. It has `callback` parameter that kicks in when the script in question is loaded, which gives you an action point. The script shouldn't necessarily be an Ext class, any JavaScript will do - including a part of application in compressed form.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T18:45:59.990

您可以将所有命名空间 App.Employee.* 收集到一个文件 /App/employee.js 中，然后在需要时使用文件完整路径加载它。

```
Ext.require("/App/employee") 
```

**升级版**。我也发现了一些问题。Ext.loader 不要等待employee.js。当employee.js 中的类具有依赖关系时，它会抛出异常。试试`Ext.syncRequire("/App/employee")`吧。它在我的测试中运行良好。

并且不要忘记声明文件的完整路径（来自您的 webroot）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T12:47:11.240

您必须将所有类放在一个 js 文件中并加载该文件（只需将所有单个文件中的代码复制并粘贴到一个新文件中，然后将其命名为`App.employee.js`）。在一个 Ajax 请求中加载多个文件是不可能的，因此加载器无法帮助您。

有关 loader 的详细信息，请参阅[Ext 文档](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Loader)。

供参考：

Ext 使用`CamelCase`类和命名空间的命名。它们的命名空间都以小写字符开头，它们的类都以大写字符开头。这使得区分这两种类型变得更加容易。建议遵循该约定。更多信息可以在[这里](http://docs.sencha.com/ext-js/4-0/#!/guide/class_system-section-2)找到。

# java - EJBCA API 示例

> ID：15171888
> 
> 赞同：1
> 
> 时间：2013-03-02T07:15:45.737
> 
> 标签：java, api, pki

我完全迷路了。我已经安装[`EJBCA`](http://ejbca.org/)了`CentOS`，下一个任务是使用`C#`gui 客户端（将安装在普通 PC 上）从服务器检索证书。

不幸的是，`EJBCA`仅支持[`Java`API](http://ejbca.sourceforge.net/ws/overview-tree.html)（如果我错了，请纠正我）。所以对我来说唯一的选择是编写一个包装器（库），其中将通过 JSON 或其他任何方式（例如）`Java`将数据发送到我的客户端。`Apache Thrift`

但是我还没有在`Java`. 另外，我不熟悉使用 Java API 的过程。

一个小例子会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-17T13:35:58.517

EJBCA 有很多接口。有一个 Web 服务接口，您可以从任何远程客户端使用（客户端证书经过身份验证）。您还可以从简单的 http 调用中获取简单的东西，例如证书和 CRL。您可以访问公共网络并从您的应用程序中进行相同的简单 HTTP GET 调用。您还可以启用 RFC4387 服务并使用 RFC4387 URL 获取 CA 证书和 CRL，[http ://ejbca.org/services-va.html](http://ejbca.org/services-va.html)

# android - 对 onitem 点击的意图不起作用

> ID：15171889
> 
> 赞同：0
> 
> 时间：2013-03-02T07:15:48.013
> 
> 标签：android, android-intent, onitemclicklistener

```
 lv.setAdapter(adp);
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub
            Cursor c = (Cursor)arg0.getItemAtPosition(arg2);
            call = c.getString(0);
            Intent i = new Intent(null, Ldetail.class);
            i.putExtra("id",call);
            startActivity(i); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:18:43.957

更改此行。

```
Intent i = new Intent(null, Ldetail.class); 
```

而不是 null 使用 context 或 activityname.this 。您必须传递上下文或活动名称。

```
Intent i = new Intent(YourCurrentActivityName.this, Ldetail.class); 
```

**或者**

```
Intent i = new Intent(getBaseContext(), Ldetail.class); 
```

并在 android 清单文件中声明**Ldetail活动。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T07:39:39.577

试试这个，而不是使用 getapplicationcontext() ..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:18:28.293

```
 usersList.setOnItemClickListener(new AdapterView.OnItemClickListener() { 
```

在这里，您使用了适配器视图的视图，它是您的自定义适配器的父类。这就是为什么它不起作用。相反，您应该使用自定义适配器的视图。

这里的 getView() 函数帮助您将 Parent Adpater View 的 View 转换为 Custom Adapter View。

所以你使用这两个选项中的任何一个，

```
usersList.setOnItemClickListener(new CustomAdapterView.OnItemClickListener() { 
```

或者

```
usersList.setOnItemClickListener(new OnItemClickListener() { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T07:19:55.123

为什么你传递 null 而不是上下文？
在意图中添加您的上下文

```
Intent i = new Intent(yourclassname.this, Ldetail.class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T07:20:00.387

```
 Intent i = new Intent(null, Ldetail.class);
        i.putExtra("id",call);
        startActivity(i); 
```

您必须传递上下文或活动。

```
 Intent i = new Intent(this, Ldetail.class); 
```

或者

```
Intent i = new Intent(getBaseContext(), Ldetail.class); 
```

# coldfusion - 使用静态变量

> ID：15171890
> 
> 赞同：3
> 
> 时间：2013-03-02T07:15:50.990
> 
> 标签：coldfusion, static, cfml, coldbox

我在 ColdFusion 中使用 ColdBox 框架。我想知道如何在函数中使用静态变量。任何人都可以解释如何或建议“静态”概念的替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T11:35:41.813

使用组件的元数据，我们可以模仿静态变量的行为：

*   [使用元数据向 ColdFusion 组件添加静态变量](http://blog.bittersweetryan.com/2011/02/using-metadata-to-add-static-variables.html)
*   [ColdFusion 领域对象、静态方法和通用 API](http://therealdanvega.com/blog/2010/01/06/coldfusion-domain-objects-static-methods-a-common-api)

# perl - 如何为这些嵌套的 if 条件编写更好的代码

> ID：15171895
> 
> 赞同：1
> 
> 时间：2013-03-02T07:17:17.850
> 
> 标签：perl, coding-style, nested-if

我有一个这样的嵌套if代码

```
 if (condition1 or condition2 or condition3 ) {
           if  (condition1) {
           }
           elsif (condition2) {
           }
           elsif (condition3) {
           }
 } 
```

现在显然，已经在 external 上检查了条件（1,2 和 3）`if`，所以我不希望在内部`if-elsif`语句中再次检查它们。所以我的解决方案是，完全移除外部`if`。但这又将使它通过`if-elsif`。

那么如果有 10-15 个条件呢？哪一个更好？或者还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:25:57.150

外部`if`是不必要的。

除此之外，只有三种可能的优化似乎是合理的：

1.  在优化之前分析代码，并对 if/else 条件进行排序，以便首先测试最常见的条件等。
2.  使用数据结构来表示条件。如果您正在测试某种相等性 ( `if ($foo eq $bar){...}elsif($foo eq $baz){...}`)，那么哈希可以将查找从线性时间转换为恒定时间：

    ```
    %hash = ($bar => sub{...}, $baz => sub{...});
    my $code = $hash{$foo} or do{"this is the trailing else"};
    $code->(); # execute the coderef 
    ```

    这是非常灵活的，但包括闭包的间接性。

3.  如果您必须重新检查某个条件，请缓存结果。在条件中声明的变量的范围会延伸到 if/else 链的所有后续条件和块：

    ```
    if ( my $cond1 = ... and ...) {
      ...
    } elsif ($cond1 and my $cond2 = ...) {
      ...
    } elsif ($cond2) {
      ...
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:25:03.420

这取决于您的代码执行的频率。对于复杂的 if 语句集，最好优化可读性，因为与大多数其他操作相比，它们很便宜。但是，在您上面的示例中，我将完全删除外部语句，这根本没有必要。Perl 在解析代码的同时优化代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T10:50:48.857

如果您的条件都是对同一变量的值的测试，您可以在 Perl 5.10.1 及更高版本中使用`given`/ ：`when`

```
use 5.010;

given ($foo) {
  when ('bar') { ... }                  # string literal
  when (4) { ... }                      # numeric literal
  when (qw[ xyzzy plugh ]) { ... }      # any of multiple literals
  when (/^whee+$/) { ... }              # regex match
  default { ... }                       # fallthrough if nothing matched
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T07:31:24.743

也许 Switch 控制语句在您的代码中可能有意义（取决于您正在检查的条件）。查看[Switch 的文档](http://perldoc.perl.org/Switch.html)。

**更新** 从 5.10 perl 版本开始，有一个[给定的/when 控制流](http://perldoc.perl.org/perlsyn.html#Switch-Statements)。

```
 use feature "switch"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T08:09:26.840

1.  删除外部`if`语句，因为内部语句无论如何都会检查所有条件`if`。

2.  如果你`if`按照条件1比条件2更重要的优先级来安排哪些条件，那么当然，你不能改变检查的顺序。

3.  如果您`if`根据发生频率安排哪些条件，那么您可以在测试或分析程序时根据频率重新安排。

4.  如果条件 1 为真，则运行语句 1。如果你的语句太长，那就把它们放到子程序中调用，这样看起来会更整洁。

    ```
    if    (condition1) {&run_statement1();}
    elsif (condition2) {&run_statement2();}
    elsif (condition3) {&run_statement3();}
    elsif (condition4) {&run_statement4();}
    elsif (condition5) {&run_statement5();}
    elsif (condition6) {&run_statement6();}
    elsif (condition7) {&run_statement7();}
    else               {&run_elsestatement();} 
    ```

5.  不要不必要地复杂化或混淆代码。保持简单、易读并实现您的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T06:44:25.667

或这个：

```
(condition1) ? run_statement1() :
(condition2) ? run_statement2() :
(condition3) ? run_statement3() : run_elsestatement() ; 
```

我喜欢少打字。如果您的评估条件产生“唯一”结果，另一种选择是将结果用作函数哈希中的键。这完全消除了上面的条件检查。

例如，如果条件基于名为“$var”的标量中保存的值，那么您可以简单地使用这些不同的值作为散列的键。

```
$conditionalFunctionHash{$var}->(); 
```

# php - 在jPlayer中获取当前时间

> ID：15171901
> 
> 赞同：1
> 
> 时间：2013-03-02T07:18:11.333
> 
> 标签：php, jplayer

我想获取我正在使用的歌曲的当前时间

```
var currentTime = $('#jquery_jplayer_1').data("jPlayer").status.currentTime; 
```

但我收到错误**Uncaught TypeError: Cannot read property 'status' of undefined** in the console。

我想做的是假设正在播放一首歌曲，当用户点击另一首歌曲的播放按钮时，我想获得前一首歌曲的播放时间，然后开始播放点击的歌曲。

这是我的代码：

```
var currentTime = $('#jquery_jplayer_1').data("jPlayer").status.currentTime;
alert(currentTime);

$("#jquery_jplayer_1").jPlayer("stop");

var id = "#jquery_jplayer_1";
var media = {
    mp3: audio_element
};
var options = {
    swfPath: "/appystream/assets/jplayer",
    supplied: "mp3",
    wmode: "window"
};
var currentTime = $('#jquery_jplayer_1').data("jPlayer").status.currentTime;
alert(currentTime);

// jPlayer android versions 2.3 fix.
var myFix = new jPlayerAndroidFix(id, media, options);
myFix.setMedia(media).play();
setTimeout(function () {
    myFix.setMedia(media).play();
}, 2000); 
```

无论我把代码放在哪里来获取当前时间，它都会响应上面给出的错误。

我究竟做错了什么 ？我还能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:25:24.353

我认为您以错误的方式做事。我做这些事情的方式是：

```
$(document).ready(function(){

    $("#jp").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
                m4v: "http://www.jplayer.org/video/m4v/Big_Buck_Bunny_Trailer_480x270_h264aac.m4v",
                ogv: "http://www.jplayer.org/video/ogv/Big_Buck_Bunny_Trailer_480x270.ogv",
                poster: "http://www.jplayer.org/video/poster/Big_Buck_Bunny_Trailer_480x270.png"
            });
        },
        ended: function (event) {
            $(this).jPlayer("play");
        },
        swfPath: "js",
        supplied: "m4v, ogv"
    });

    $("#jp").bind($.jPlayer.event.timeupdate, function(event) { 
        var currentTime = Math.floor(event.jPlayer.status.currentTime)

        if (currentTime < 3){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/slide1.png'/>");  
        }

        if (currentTime >= 3 && currentTime < 12){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/slide2.png'/>");  
        }

        if (currentTime >= 12 && currentTime < 16){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/slide3.png'/>");  
        }

        if (currentTime >= 16 && currentTime < 22){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/slide4.png'/>");  
        }

        if (currentTime >= 22 && currentTime < 30){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/slide5.png'/>");  
        }

        if (currentTime >= 30){
            $("#slideshow").html("<img src='http://yoursite.com.com/wm/jplayer/slides/fin.png'/>"); 
        }

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-28T12:52:52.533

我知道确实是一个老问题，但我只需要与您希望的相同答案并找到解决方案。

这大概就是你想要的吧？

```
$("#jquery_jplayer_1").jPlayer()[0].childNodes[1].currentTime 
```

如果没有，请在 $("#jquery_jplayer_1").jPlayer()[0].childNodes 中播放以查找音频元素。但据我所知，那里应该只有两个元素——img 和 audio。音频是第二个，这就是你做 childNodes[1] 的原因。

希望这可以帮助

# c - 无法理解此片段的某些部分？

> ID：15171908
> 
> 赞同：-4
> 
> 时间：2013-03-02T07:18:43.543
> 
> 标签：c

我有一本书中的这个示例程序，在这段代码中有一行 `++frequency[responses[RESPOSE_SIZE]];`. 我无法理解我们如何增加数组基地址？我可能是个傻瓜吗？但我仍然没有看到任何逻辑......请有人帮助我......谢谢！

```
 int main()
    {
          int answer, rating;

           int frequency[FREQUENCY_SIZE] = {5};

           int responses[RESPOSE_SIZE] ={1,2,3,4,5,6,7,8,9,10,

                1,6,3,8,6,10,3,8,2,7,6,5,7,6,8,6,7,5,6,6, 

                5,6,7,5,6,4,8,6,8,10};

       for(answer = 0; answer<RESPOSE_SIZE; answer++)
       {

          ++frequency[responses[RESPOSE_SIZE]];
       }

       printf( "%s%17s\n", "Rating", "Frequency" );

       for(rating=1; rating<FREQUENCY_SIZE; rating++)
       {
          printf( "%6d%17d\n", rating, frequency[ rating ] );

       }

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:22:37.823

`++frequency[responses[RESPOSE_SIZE]]`并不意味着数组的基地址递增。

这意味着数组中的项目`frequency`从位置开始`responses[RESPONSE_SIZE]`递增。构造是来自 position`responses[RESPONSE_SIZE]`的数组中的项目。`responses``RESPONSE_SIZE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:30:29.093

索引运算符的`[]`优先级高于`++`前缀增量运算符。所以前缀递增操作是应用于索引后找到的数组元素，而不是数组基地址。

# php - HEREDOC 还在使用吗？

> ID：15171912
> 
> 赞同：1
> 
> 时间：2013-03-02T07:18:57.790
> 
> 标签：php, xhtml

我正在阅读一本旧的“傻瓜”书，并遇到了有关 heredocs 输出的部分。这仍然是（或者曾经是）常见的编码实践吗？

```
print <<<HERE
<table>
    <tr>
        <td>
            This is an example!
        </td>
    </tr>
</table>
HERE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:29:41.903

是的，它已被使用，尽管我倾向于更频繁地使用 NOWDOC。当您想保留一些带有缩进格式的字符串时，它真的很出色，就像您的示例一样。不一定只是 HTML，而是任何格式化的语法，而不必担心连接丑陋。

# android - 在列表视图中，向下滚动状态切换按钮将进入先前的关闭状态

> ID：15171918
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:19:44.060
> 
> 标签：android, listview, togglebutton

这是我的 myadapterclass 的 getview 方法

public View getView(int position, View convertView, ViewGroup parent) { pos = position;

```
 ApplicationInfo entry = ai.get(position);
    String str = insatllApps.get(position);
    System.out.println("Position============"+(insatllApps.get(position)));
    //Log.d("Check>>:","size>>"+insatllApps.size());
    convertView = mInflater.inflate(R.layout.list__button, null);
    t1=(TextView)convertView.findViewById(R.id.textView1);
    iv=(ImageView)convertView.findViewById(R.id.imageView1);
    tb1=(ToggleButton)convertView.findViewById(R.id.togal);
    tb1.setOnClickListener(this);
    tb1.setTag(pos);
    tb1.setTag(R.id.togal, str);

    iv.setImageDrawable(entry.loadIcon(mPackManager));

    t1.setText(str);

            return convertView;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-02T07:22:12.607

好吧，这是可行的解决方案

```
 View row=null
    ApplicationInfo entry = ai.get(position);
        String str = insatllApps.get(position);
        System.out.println("Position============"+(insatllApps.get(position)));
        //Log.d("Check>>:","size>>"+insatllApps.size());
        row= mInflater.inflate(R.layout.list__button, null);
        t1=(TextView)row.findViewById(R.id.textView1);
        iv=(ImageView)row.findViewById(R.id.imageView1);
        tb1=(ToggleButton)row.findViewById(R.id.togal);
        tb1.setOnClickListener(this);
        tb1.setTag(pos);
        tb1.setTag(R.id.togal, str);

        iv.setImageDrawable(entry.loadIcon(mPackManager));

        t1.setText(str);

return row 
```

在 getView 方法中创建一个新视图

# java - java 1.6 我想动态创建java POJO类

> ID：15171920
> 
> 赞同：-1
> 
> 时间：2013-03-02T07:19:47.737
> 
> 标签：java, dynamic, pojo

我想动态创建 java POJO 类

以下是要求：

我有一个方法，它接受参数 classname 和 map 。映射键将是原始类型，映射值将是变量

```
create Class(String ClassName, HashMap map) 
{
} 
```

调用此方法时，它应该创建一个具有指定名称的 .java 文件，并使用传递的 hashmap 创建 POJO 并将其存储在某个位置。

你们能帮我解决这个问题吗？

我希望我能清楚地提出我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:33:01.750

假设您要生成 Java 源代码并将其保存到`.java`文件中，您只需要遍历映射并在需要时输出字段定义和 setter/getter。

```
public String generateJava(String className, Map<String, Object> map) {
    StringBuffer b = new StringBuffer("public class ").append(className).append(" {\n");
    // first fields
    for (Entry<String, Object> field: map.entrySet()) {
       String name = field.getKey();
       String type = field.getValue().getClass().getName();
       b.append("\tprivate ").append(type).append(" ").append(name).append(";\n");
    }
    // then getters and setters
    for (Entry<String, Object> field: map.entrySet()) {
       String name = field.getKey();
       String type = field.getValue().getClass().getName();
       b.append("\n\n");
       // getter.   
       b.append("\tpublic ").append(type).append(" get").append(name.substring(0, 1).toUpperCase()).append(name.substring(1)).append("() {\n\t\t");
       b.append("return this.").append(name).append(";\n\t}"); 
       // setter.   
       b.append("\tpublic void").append(" set").append(name.substring(0, 1).toUpperCase()).append(name.substring(1)).append("(").append(type).append(" ").append(name).append(") {\n\t\t");
       b.append("this.").append(name).append(" = ").append(name).append(";\n\t}"); 
    }
    return b.append("\n}").toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:39:15.777

```
public class MapFirst
{
    public static void createClass (
        String className, Map <Class<?>, String> fields) throws IOException
    {
        StringBuilder builder = new StringBuilder ();

        String packageName;
        int idx = className.lastIndexOf ('.');
        if (idx >= 0)
        {
            packageName = className.substring (0, idx);
            className = className.substring (idx + 1);
        }
        else packageName = null;

        if (packageName != null)
            builder.append ("package ").append (packageName).append (";\n");

        builder.append ("\n");

        builder.append ("public class ").append (className).append ("\n");

        builder.append ("{\n");

        boolean flag = false;
        for (Map.Entry <Class <?>, String> field: fields.entrySet ())
        {
            Class <?> type = field.getKey ();
            String name = field.getValue ();
            String nameCapitalized = Character.toUpperCase (name.charAt (0)) + name.substring (1);

            if (flag) builder.append ("\n");
            flag = true;
            builder.append ("    private ").append (type).append (" ").append (name).append (";\n");
            builder.append ("\n");
            builder.append ("    public ").append (type).append (" get").append (nameCapitalized).append (" ()\n");
            builder.append ("    {\n");
            builder.append ("        return ").append (name).append (";\n");
            builder.append ("    }\n");
            builder.append ("\n");
            builder.append ("    public void set").append (nameCapitalized).append (" (").append (type).append (" ").append (name).append (")\n");
            builder.append ("    {\n");
            builder.append ("        this.").append (name).append (" = ").append (name).append (";\n");
            builder.append ("    }\n");
        }

        builder.append ("}\n");

        File dir = new File (
            packageName.replaceAll (
                "\\.",
                Matcher.quoteReplacement (System.getProperty ("file.separator"))));

        dir.mkdirs ();

        BufferedWriter writer = new BufferedWriter (
            new OutputStreamWriter (
                new FileOutputStream (
                    new File (dir, className + ".java"))));

        writer.write (builder.toString ());
        writer.close ();
    }

    public static void main (String [] args) throws Exception
    {
        Map <Class <?>, String> fields = new HashMap <Class<?>, String> ();
        fields.put (int.class, "foo");
        fields.put (double.class, "bar");
        createClass ("my.pkg.MyClass", fields);
    }
} 
```

# git - 如何防止不需要的钩子请求？

> ID：15171922
> 
> 赞同：2
> 
> 时间：2013-03-02T07:19:57.930
> 
> 标签：git, node.js, github

我开发了一个与 Github 和 Github Hooks 一起使用的应用程序，当收到新的钩子请求时，我只是`update`/`clone`存储库（然后我在存储库上做了一个小过程）

因为我盲目接受所有的钩子请求，所以每个人都可以生成一个钩子请求并发送给我。

我想知道如何保护我的应用程序免受不需要的钩子请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:39:39.113

Github 的有效载荷中不包含任何秘密信息（基于[https://help.github.com/articles/post-receive-hooks](https://help.github.com/articles/post-receive-hooks)）。

所以你最好的防御是通过在你的 web hook 的 url 中使用随机字符串来使你的 webhook 的 url 难以猜测。

您也可以考虑，尽管这可能会随着时间的推移而中断，但检查`request.connection.remoteAddress`是否在已知属于 Github 主机的地址范围内（目前是 Rackspace？）。这个答案包括知道 ip 地址：[How to verify a post-receive hook request 实际上来自 github？](https://stackoverflow.com/questions/9007030/how-to-verify-a-post-receive-hook-request-actually-came-from-github)

# java - Java ServiceExecutor 终止条件

> ID：15171927
> 
> 赞同：2
> 
> 时间：2013-03-02T07:20:44.990
> 
> 标签：java, multithreading, executorservice, java.util.concurrent

我是 java executor 的新手。

我正在使用 Java 的 ExecutorService 来启动多个线程来处理数据。

```
Executor executor = Executors.newFixedThreadPool(poolSize);

for(int i=0; i< 5;i++) executor.execute(new MyRunnable(i)); 
```

一旦线程找不到数据，它们就会优雅地终止。

我的问题是当所有线程终止时执行器会发生什么，它是否仍在运行它的主线程？或者它会自行终止，整个应用程序会优雅地完成？

如果执行程序线程仍在运行，我如何让它在其所有子线程完成后终止（poolSize 线程数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:37:41.037

1) 固定线程池执行器中的线程一旦启动就永远不会终止

2）线程池执行器中没有主线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:29:12.520

`Executor`将继续在躺着的线程池下运行。您仍然可以执行或提交新任务。建议关闭 Executor 服务调用`ExecutorService.html#shutdown()` ，该调用会尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。

您还可以使用`ExecutorService.html#shutdownNow()`which 停止所有主动执行的任务，停止等待任务的处理，并返回等待执行的任务列表。当您需要立即关闭时，它很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-02T07:33:46.617

你可以这样想：

`shutdown()`只会告诉执行器服务它不能接受新任务，但是已经提交的任务会继续运行

`shutdownNow()`会做同样的事情并且会尝试通过中断相关线程来取消已经提交的任务。请注意，如果您的任务忽略中断，`shutdownNow`则其行为方式与关闭完全相同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T07:33:03.453

使用 shutdown 方法从接口 ExecuterService 正常关闭，正如 Quoi 建议的那样，即使线程完成，它仍然会运行。之后，您可以随时使用提交进行新工作。其他实用方法在[这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29)

# url - 没有 GET 的 JavaScript 位置

> ID：15171933
> 
> 赞同：0
> 
> 时间：2013-03-02T07:21:01.463
> 
> 标签：url, tracking

我正在使用这个 javascripts 来跟踪某些 url。

```
$(document).ready(function(){
if(document.location.toString()=="http://www.mysite.com/DisplayCart.aspx")
....
.... 
```

但我的问题是，如果我想跟踪页面组，例如 [http://www.mysite.com/PaymentDetails.aspx?Id=817328&PaymentMode=COD&delvoption=ship&ChildStoreID=](http://www.mysite.com/PaymentDetails.aspx?Id=817328&PaymentMode=COD&delvoption=ship&ChildStoreID=)

[http://www.mysite.com/PaymentDetails.aspx?Id=817329&PaymentMode=COD&delvoption=ship&ChildStoreID=](http://www.mysite.com/PaymentDetails.aspx?Id=817329&PaymentMode=COD&delvoption=ship&ChildStoreID=)

等等..

这里所有的 url 在 aspx 之后都不同？它就像客户特定页面/客户订单特定页面请注意，我只想使用 javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:23:31.317

你可以用 ? 分割字符串：

```
if(document.location.toString().Split("?")[0]=="http://www.mysite.com/DisplayCart.aspx") 
```

基本上，你得到用 ? 分隔的两个部分，然后只比较第一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:14:30.403

不幸的是，克里斯蒂安·斯图尔特（Christian Stewart）没有用，但下面的代码对我有用。希望在每种情况下都是错误费用，我只是在针对每种可能的 url 情况进行测试....如果您发现它在某些情况下可能不起作用，请告诉我...

```
$(document).ready(function(){

var align1 = document.location.toString(),

    delimiter = '?',
    start = 0,
    tokens1 = align1.split(delimiter).slice(start);

//alert(tokens1[0]);

//if(document.location.toString().Split("?")[0]=="http://www.mysite.com/DisplayCart.aspx")
if(tokens1[0]=="http://www.mysite.com/DisplayCart.aspx")
{
    alert("hi");
}
else{}
}); 
```

雅感谢您的帮助。

# string - 联系人系统管理的搜索功能问题

> ID：15171941
> 
> 赞同：0
> 
> 时间：2013-03-02T07:22:33.460
> 
> 标签：string, function, search, compare

```
int main (void){
    do
    {
        mainmenu:
        mainmenu();
        switch(option)
        {
                //add new contact
                case 1:addcontact(storage);savecontact(storage);
                    break;
                case 2:searchcontact();
            break;
        }
    }while(true);
}
void searchcontact()
{
    char searchname[20];
    system("cls");
    do
    {
        int find = 0;
        printf("Contact Search\n Name of the Contact:\n");
        fflush(stdin);
        scanf("%[^\n]",&searchname);
        length=strlen(searchname);
        f=fopen("contact.txt","rb");

        system("cls");
        printf("Search the result for %s\n",searchname);
        while(fread(&storage,sizeof(storage),space,f)==true)
        {
            for(i=0;i<=length;i++)
            storage[space].name[i]=storage[space].name[i];
            storage[space].name[length]='\0';
            if(stricmp(storage[space].name,searchname)==false)
                printf("Name\t:%s\nPhone\t:%d\nE-mail\t:%s\n",storage[space].name,storage[space].hpnum,storage[space].email);
                find++;
        }
        if(find==false)
            printf("\nNo match found!");
            else
            printf("\n %d match(s) found",find);
            fclose(f);
            printf("\nTry again?\t[1] Yes\t[2] No\n");
            scanf("%d",&choice);
    }while(choice==true);
} 
```

我在搜索时遇到问题...添加联系人后，我无法再次搜索...我使用 stricmp 搜索联系人...同时我输入了我为保存联系人而输入的正确名称，它仍然无法搜索...继续打电话给我再试一次。因此，该错误主要存在于那里的搜索功能上。我的真值是==1，我的假值是==0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:53:18.227

**fread 返回许多已读项目（不是 true 或 false ...）。**

*   然后在您的情况下，仅当数据库中只有一项时它才返回 1。
*   searchname 是一个 char 数组，所以 searchname 是 char * (&searchname is char * *)

对不起代码，目前我无法正确地将它传递给 SO，它不想粘贴 c 缩进代码。我可以邮寄给你。

```
void searchcontact()
{
  char searchname[20],name[20];
  clearscreen();
  do {
      int i=0;
      int find = 0;
      int found = -1;
      int local_index=i%space;
      printf("Contact Search\n Name of the Contact:\n");
      fflush(stdin);
      //        scanf("%[^\n]",searchname);
      scanf("%s",searchname);
      length=strlen(searchname);
      f=fopen("contact.txt","rb");
      clearscreen();
      printf("Search the result for %s\n",searchname);
      while ( fread(&storage[local_index],sizeof(struct contact),1,f)==1 )
    {
      if(stricmp(storage[i%space].name,searchname)==false)
        {    
          printf("Name\t:%s\nPhone\t:%d\nE-mail\t:%s\n",storage[local_index].name,storage[local_index].hpnum,storage[local_index].email);
          find++;
          found=i;
        }
      i++;
      local_index=i%space;
    }
      if(find==false) printf("\nNo match found!");
      else printf("\n %d match(s) found",find);
      fclose(f);
      printf("\nTry again?\t[1] Yes\t[2] No\n");
      scanf("%d",&choice);
    } while(choice==true);
} 
```

# ruby - Redis：如何在 ruby 客户端中以编程方式加载 dump.rdb

> ID：15171944
> 
> 赞同：1
> 
> 时间：2013-03-02T07:22:58.870
> 
> 标签：ruby, redis

我正在学习 Redis。我可以使用 Ruby Client for Redis 设置和获取键值对。

我现在正在尝试从自定义路径存储和加载 dump.rdb。我执行了以下步骤：

*   我在我的 ruby​​ 脚本中以编程方式设置了 dump.rdb 的目录。
*   然后我可以选择创建新数据或加载现有数据。
*   我在第一次执行我的 ruby​​ 脚本时创建了新数据。
*   这次我再次运行了我的 ruby​​ 脚本并加载了现有数据。输出符合预期。

但是，当我重新启动 redis 服务器并运行相同的 ruby​​ 脚本（再次以编程方式设置 dump.rdb 的目录）并尝试加载数据时，它不会这样做。

在我在配置中设置'dir'参数后，有没有办法以**编程方式让redis服务器加载dump.rdb ？**

我查看[了 redis.conf 中的 Redis Ignoring 目录](https://stackoverflow.com/questions/15014584/redis-ignoring-directory-in-redis-conf/15029075#15029075)并尝试在 google 上搜索此内容。始终可以选择在 redis.conf 中设置 dump.rdb 的路径，但我希望以编程方式进行。

我的 Ruby 代码如下：

```
require 'redis'

client = Redis.new
client.config('set', 'dir', '/tmp')

puts 'Enter load(to load existing data) or new(to create new data)'
print 'prompt>'
command = gets.chomp

if command == 'new'
  client.flushdb

  client.set('key1', 'value1')
  client.set('key2', 'value2')

  client.save
else
  puts client.get('key1')
  puts client.get('key2')
end 
```

这是执行 ruby​​ 脚本的输出：

```
laptop:~/ruby/workspace$ ruby test.rb
Enter load(to load existing data) or new(to create new data)
prompt>new

laptop:~/ruby/workspace$ ruby test.rb
Enter load(to load existing data) or new(to create new data)
prompt>load
value1
value2

# Now i restart redis-server

laptop:~/ruby/workspace$ ruby test.rb
Enter load(to load existing data) or new(to create new data)
prompt>load

# No output is printed 
```

软件详情：

*   操作系统：Ubuntu Linux 12.04 64 位
*   Redis 2.6.9 版在本地主机上以默认配置运行
*   Ruby：版本 1.9.3p327（2012-11-10 修订版 37606）[x86_64-linux]

如果您需要我提供的任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T19:30:41.293

我相信您在加载“自定义 rdb”方面所追求的是使用“ [config set](http://redis.io/commands/config-set) ”命令设置转储文件的路径。请注意，它需要*与 redis 守护进程位于同一主机上*才能正常工作。一旦你使用上面的命令指定了它，你的工作就没有完成。Redis 不会从文件系统中读取，除非在启动时。

因此，为了做到这一点，您需要有一个重新启动 Redis 的主管进程。然后，你需要

1.  转存到磁盘
2.  设置要使用的转储文件名
3.  告诉服务器关闭
4.  等待主管守护进程重新启动服务

即使那样，它也不起作用，因为在启动时服务器将从磁盘读取配置。我不知道 Redis 将其运行时配置保存到磁盘的命令，并且不相信它存在。

我不确定你为什么要尝试这个，但我相信如果没有 Redis 之外的编码来管理它是行不通的。也许如果你澄清了为什么你认为你需要这样做，我们可以提供更好的帮助。

无需编写非 Redis 代码，您就可以运行多个实例，每个实例都配置为您需要使用的转储文件；然后在客户端选择哪一个并使用适当的。

# iphone - 服务器信任问题

> ID：15171945
> 
> 赞同：0
> 
> 时间：2013-03-02T07:23:17.877
> 
> 标签：iphone, objective-c, cocoa-touch, nsurlconnection, nsurlcredential

我们的应用程序正在生产中，今天我们遇到了一个问题“此服务器的证书无效。您可能正在连接到伪装成“server.name”的服务器，这可能会使您的机密信息面临风险。

我们正在使用通过 https 的连接。

之前没有这样的问题。为什么现在同样给出这个错误。它甚至没有连接到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T07:24:46.660

听起来您的 SSL 证书刚刚过期。

# android - 是否可以阻止android中的任何应用程序

> ID：15171951
> 
> 赞同：0
> 
> 时间：2013-03-02T07:23:40.373
> 
> 标签：android

我必须实现可以通过填写密码来阻止设备中安装的任何应用程序的功能。当我单击启动应用程序的图标时，它应该要求输入密码。是否可以。请对此提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:46:30.377

在 Android 中，这种行为在应用程序级别是不可能的。

虽然我有一个 hack 方法，但您可以尝试如下：

步骤：创建一个服务，该服务将不断检查顶部堆栈上正在运行的应用程序：

您可以使用以下代码检查在顶部运行的当前应用程序（任何应用程序）包名称：

`String packageName= getSystemService(Context.ACTIVITY_SERVICE).getRunningTasks(1).get(0)).topActivity.getPackageName();`

现在您需要比较运行最多的应用程序的包名称，这是否是您要阻止的应用程序..

**假设您想阻止 Android 中的浏览器应用程序，那么当用户点击浏览器图标时，该应用程序将移动到堆栈顶部，并且您正在运行的服务会识别它。**

然后，您需要在该应用程序上打开自己的虚拟锁定屏幕。这样，用户将无法访问该应用程序，并且如果用户尝试在您的虚拟锁定屏幕上按下后退按钮，那么您需要覆盖后退按钮并在其上启动主屏幕意图。

这是一种创建可以锁定特定应用程序的应用程序的技巧：我从 Play 商店对几个应用程序进行了逆向工程，他们也使用这种技术来执行此操作。

希望这能给你一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-02T07:48:02.157

> 阻止设备中安装的任何应用程序

您可以通过修改固件来实现此目的。

> 当我单击启动应用程序的图标时，它应该要求输入密码

如果您有 INSTALL_SHORTCUT 和 UNINSTALL_SHORTCUT 权限，也是可能的。然后，您将能够执行 Launcher 可以执行的操作。以[这个链接](http://maketecheasier.com/create-shortcuts-to-any-applications-in-android/2010/10/14)为例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T07:29:22.730

由于 Android 是开源的，一切皆有可能，但这意味着您必须重写 Android 操作系统的自然行为。

并在您的设备上安装这个“被黑”的操作系统。我看不出您如何将这种服务作为应用程序提供。

# android - 画廊视图移动到父背景之外

> ID：15171956
> 
> 赞同：0
> 
> 时间：2013-03-02T07:24:39.800
> 
> 标签：android, android-gallery

我正在与画廊合作。我的布局是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/mySelection"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ff0000ff"
    android:textSize="20px"
    android:textStyle="bold" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp"
    android:background="#fff785" >

    <Gallery
        android:id="@+id/myGallery"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        android:spacing="10dp" />
</LinearLayout>

</LinearLayout> 
```

在这种情况下发生的是 ![获得画廊](../Images/106492121dea384d3742eb6ddf328800.png)

但我希望它像画廊视图应该超越像 facebook 这样的背景。这是我想要的图像 ![预期的](../Images/92713f7b39073f5cb7ef1a9ade9ac93a.png)

请建议我可以做哪些修改来实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:07:59.693

我找到了我上面提出的问题的答案。我将父布局设置为相对，并添加了带有我想要的背景的线性布局。有了这个，我将画廊放在线性布局之上。我能够得到我想要达到的目标。

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 >

<TextView
    android:id="@+id/mySelection"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ff0000ff"
    android:textSize="20sp"
    android:textStyle="bold" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="10dp"
    android:background="#fff785"
    android:layout_below="@+id/mySelection" >

</LinearLayout>

<Gallery
        android:id="@+id/myGallery"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:overScrollMode="always"
        android:spacing="10dp" />
</RelativeLayout> 
```

# android - 将位图保存到相册

> ID：15171962
> 
> 赞同：1
> 
> 时间：2013-03-02T07:25:26.893
> 
> 标签：android

当我使用以下代码时，位图被保存并插入到图库中“相机”相册的末尾。

```
MediaStore.Images.Media.insertImage(getContentResolver(), bmp, null , null); 
```

如何将位图保存到应用程序自己的相册中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:38:29.140

```
private boolean createFolder(String folderName) {
    // TODO Auto-generated method stub
    boolean success = true;
    if(checkforMedia())
    {
        String newFolder = "/OnTheG/"+folderName;
        String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
        File myNewFolder = new File(extStorageDirectory + newFolder);
        success= myNewFolder.mkdirs();
    }

    else
    {
        success=false;
    }
    return success;

}

use this function to create your folder in sdcard.

Open the camera using this function to store your clicked image at your folder

public void takePhoto1() {
        if (!android.os.Environment.getExternalStorageState().equals(
                android.os.Environment.MEDIA_MOUNTED)) {
            Toast.makeText(Add_View_Images_Activity.this,
                    "Please insert SDcard for capturing photo.",
                    Toast.LENGTH_SHORT).show();
        } else {

            try {

                photo1=new File(path+"/"+System.currentTimeMillis()+".jpg");
                Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);              
                cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo1));
                cameraIntent.putExtra("return-data", true);

                startActivityForResult(cameraIntent, 4);
            } catch (Exception e) {
                Toast.makeText(Add_View_Images_Activity.this, ""+e, Toast.LENGTH_LONG).show();
            }
        }

    }

and If you pick a image from the gallery obtain it's path and then move it to your folder using this function

    private void moveTheImage(String path) {
            // TODO Auto-generated method stub
            //  File sd = Environment.getExternalStorageDirectory();
            //     File data = Environment.getDataDirectory();

            String sourceImagePath= path;
            System.out.println("Source path>>>>>>>>>"+path);

            String destinationImagePath= fWrapper.path+getTheName(path);

            File source= new File(sourceImagePath);
            File destination= new File(destinationImagePath);
            Log.d("before copying", "");
            if (source.exists()) {
                try
                {
                    FileChannel src = new FileInputStream(source).getChannel();
                    FileChannel dst = new FileOutputStream(destination).getChannel();
                    dst.transferFrom(src, 0, src.size());
                    src.close();
                    dst.close();
                }

                catch (Exception e) {
                    // TODO: handle exception
                }
            }
        } 
```

# c# - 可以在客户端查看从一个 MVC 控制器传递到另一个 MVC 控制器的参数吗？

> ID：15171963
> 
> 赞同：0
> 
> 时间：2013-03-02T07:25:37.947
> 
> 标签：c#, asp.net-mvc

基本安全。

控制器调用另一个控制器，传递一个参数

```
return RedirectToAction("VerifyEmail", "Account", new { userId = newUser.Id }); 
```

另一个控制器接收它

```
public ActionResult VerifyEmail(int userId)
        {
            int test = userId;
            return View();
        } 
```

客户端是否可以查看参数？也就是说，它是否随时出现在客户端的机器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:51:17.203

从技术上讲，它将出现在客户的机器上。发送一个指示临时重定向的`RedirectToAction`302 响应，客户端（浏览器）通常会将其解释为发出新 GET 请求的命令。

如果您在运行 fiddler 时会看到类似这样的内容通过电线返回

```
HTTP/1.1 302 Found
Cache-Control: private
Content-Type: text/html; charset=utf-8
Location: /Account/VerifyEmail?userId=12354
Server: Microsoft-IIS/8.0
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-SourceFiles: =?UTF-8?B?    
X-Powered-By: ASP.NET
Date: Mon, 04 Mar 2013 17:45:32 GMT
Content-Length: 150
<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="/Account/VerifyEmail?userId=12354">here</a>.</h2>
</body></html> 
```

其次是（在我的情况下）作为 GET 请求

```
GET /Account/VerifyEmail?userId=12354 HTTP/1.1 
```

# java - 如何从对话框启动 xml 活动？

> ID：15171966
> 
> 赞同：0
> 
> 时间：2013-03-02T07:26:05.677
> 
> 标签：java, android, eclipse, android-activity, adt

当用户单击下面的链接按钮时，我正在尝试加载我拥有的 XML 活动。

有人可以帮忙吗？我不知道该怎么做（这让我发疯了！）

我想做的就是当用户单击“链接”时将它们发送到 AppActivity2.java/main2.xml

```
package com.mkyong.android;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AppActivity extends Activity {

final Context context = this;
private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.button1);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg0) {

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);

        // set title
        alertDialogBuilder.setTitle("Settings Menu");

        // set dialog message
        alertDialogBuilder
            .setMessage("Link or Delete?")
            .setCancelable(false)
            .setPositiveButton("Link",new     DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    AppActivity.this.finish();
                }
              })
            .setNegativeButton("Delete",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:34:21.530

您必须使用意图来打开所需的活动。代码将如下所示：

```
//create the intent (must be final in order to be able to acces it from the inner class)
final Intent nextActivityIntent = new Intent(this, AppActivity2.class);
alertDialogBuilder
        .setMessage("Link or Delete?")
        .setCancelable(false)
        .setPositiveButton("Link",new     DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, close
                // current activity
                AppActivity.this.finish();
                //start the activity using the intent
                startActivity(intent);
            }
          }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T07:29:17.143

```
final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.custom);
        dialog.setTitle("Title...");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.text);
        text.setText("Android custom dialog example!");
        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                   Intent it = new Intent(AppActivity.this, urActivity.class);
                    startActivity(it);
                     dialog.dismiss();
            }
        });

        dialog.show(); 
```

另请查看以下链接以获取更多详细信息。

[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T07:43:44.580

在您的 setPositiveButton 方法块中，编写代码以启动活动

```
 .setPositiveButton("Link",new     DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                //start new activity

                Intent intentAppActivity2 = new Intent(AppActivity.this, AppActivity2.class);
                startActivity(intentAppActivity2);

                // if this button is clicked, close
                // current activity
                AppActivity.this.finish();
            }
          }) 
```

# sitemap - Freebase 视频 ID

> ID：15171968
> 
> 赞同：1
> 
> 时间：2013-03-02T07:26:19.153
> 
> 标签：sitemap, google-tv, freebase

与视频站点地图值的 video:id 标签相关 我在哪里可以找到需要作为值放入的 freebase id？例如，CNBC。我正在查看 freebase 网站上的 CNBC 页面，但找不到它... [http://www.freebase.com/view/en/cnbc](http://www.freebase.com/view/en/cnbc)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T08:00:33.750

我猜，但可能是**/en/cnbc**

当您向 Freebase API 发出请求时，它会返回**/en/cnbc**作为 id。 [https://www.googleapis.com/freebase/v1/search?query=cnbc](https://www.googleapis.com/freebase/v1/search?query=cnbc)

所以我怀疑你的标签看起来像这样

```
<video:id type="freebase">/en/cnbc</video:id> 
```

# haskell - 将几个 C 目标文件加载到 GHCi

> ID：15171973
> 
> 赞同：3
> 
> 时间：2013-03-02T07:27:03.470
> 
> 标签：haskell, ghci

我有一个 Haskell 项目，其中包含我通过 FFI 访问的十几个 C 文件。我发现的所有文档都表明，为了在开发时使用 GHCi，我必须在命令行上使用 C 对象文件调用它。对于单个对象：

```
ghci dist/build/csrc/foo.o 
```

或对他们所有人（因为他们都住在同一个文件夹中）：

```
ghci dist/build/csrc/*.o 
```

有没有更方便的方法可以做到这一点，例如使用`.ghci`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T09:32:43.353

我不知道执行此操作的特定于 ghc 的方式。写一个简短的shell脚本？

将其保存在`repl`与 .cabal 文件位于同一目录中的文件中：

```
#!/bin/sh
ghci dist/build/csrc/*.o "$@" 
```

通过运行使其可执行

```
chmod a+x repl 
```

然后，您可以通过运行加载所有 C 目标文件来启动 ghci

```
./repl 
```

（这些特定说明假设您使用的是 Linux/BSD/Mac/Unix，但如果您使用的是 Windows，则同样的原理也适用。）

# python - 在同一图上绘制多个直方图的问题

> ID：15171974
> 
> 赞同：2
> 
> 时间：2013-03-02T07:27:17.577
> 
> 标签：python, matplotlib, histogram

我需要在同一个图上绘制几个直方图。我喜欢以下代码生成的显示：

```
import random
import numpy
from matplotlib import pyplot

x = [random.gauss(3,1) for _ in range(400)]
y = [random.gauss(4,2) for _ in range(400)]

bins = numpy.linspace(-10, 10, 100)

pyplot.hist(x, bins, alpha=0.5)
pyplot.hist(y, bins, alpha=0.5)
pyplot.show() 
```

此页面上提到了此代码：[使用 matplotlib 同时绘制两个直方图](https://stackoverflow.com/questions/6871201/plot-two-histograms-at-the-same-time-with-matplotlib) 基本上我无法绘制相同类型的直方图，但数据看起来像：

```
y1=[20,33,54,34,22]
x1=[0,2,4,6,8]
y2=[28,31,59,14,12]
x2=[0,2,4,6,8] 
```

使用上述代码，我无法让 y 轴超过 2.0，这很奇怪，但我一定是犯了一个愚蠢的错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:06:26.437

可能你正在寻找这个：

```
 pyplot.bar(x2,y2, color='b', width=2, alpha=0.5)
 pyplot.bar(x1,y1, color='r', width=2, alpha=0.5)
 pyplot.show() 
```

![在此处输入图像描述](../Images/d65f814337de9b0fd94775039783a53d.png)

# c# - 添加 AjaxControlToolkit 的 HTMLEditorExtender 后出错

> ID：15171985
> 
> 赞同：1
> 
> 时间：2013-03-02T07:28:20.533
> 
> 标签：c#, asp.net, ajax, ajaxcontroltoolkit

每当我尝试添加 AjaxControlToolkit 的 HTMLEditorExtender 时，我都会收到以下异常：![在此处输入图像描述](../Images/60607e42908b31f6140ffaa2ff03c088.png)

我在我的页面上没有找到任何代码块。除了一些我认为不会影响这一点的东西。就像库导入代码和 sql 数据源标签一样。有人建议我删除并重新添加包含 ajax 工具包控件的库和选项卡。我这样做了，但后来又出现了另一个错误，我昨天在这里问过[使用 AjaxControlToolkit 运行网站时出错，](https://stackoverflow.com/questions/15133631/error-while-running-the-website-using-ajaxcontroltoolkit)但其他人建议的解决方案没有奏效。所以我重新回到原来的状态。请告诉如何解决这个问题？另请说明为什么在stacktrace的第3、4、5行中将用户显示为“斯蒂芬”？我没有该名称的任何用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T09:30:55.357

请做你以前做过的事情。添加 Ajax 控件工具包最新[版本](http://www.asp.net/ajaxlibrary/Download.ashx)。然后只需将控件拖放到表单中。它将自动将工具包引用添加到 aspx 页面以及 web.config 文件中。此设置应该可以正常工作。如果它不起作用，您必须手动添加它。<%@ 注册程序集="AjaxControlToolkit" 命名空间="AjaxControlToolkit.HTMLEditor" TagPrefix="cc1" %>

您还必须将程序集引用添加到 web.config 文件。

```
 <assemblies>
    <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
    <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
  </assemblies> 
```

如果版本不同，此程序集可能无法在您的 web.config 上运行。请试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:24:25.820

尝试使用`<%# %>`而不是`<%= %>`

可能会解决你的问题。

# mysql - PostgreSQL 如何用一个 Insert 语句插入多条记录

> ID：15171988
> 
> 赞同：1
> 
> 时间：2013-03-02T07:28:33.370
> 
> 标签：mysql, sql, postgresql

我有一个表，所有其他列都具有相同的值，只有一个区别，该列是另一个 select 语句的结果。

我需要类似的东西

```
INSERT INTO my_table (orgid, status, userid )
    VALUES(12393, true, SELECT u.userid FROM user u) 
```

我可以使用带有许多插入语句的循环语句，但我想要更简单的东西，1个sqlQuery并且不使用函数：-？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T07:33:26.837

试试这个 ：

```
INSERT INTO my_table (orgid, status, userid )
SELECT 12393, true, u.userid FROM user u 
```

# c++ - 访问类 c++ 的所有私有成员

> ID：15171989
> 
> 赞同：0
> 
> 时间：2013-03-02T07:28:38.347
> 
> 标签：c++, class, access-specifier

我创建了几个类如下（因为我不能把我的真实类在这里我写了几个作为例子）

```
 class One {
      private :
         char *link;
         int count 

        }

 class Two {
      private :
         char *link;
         int count 

        }

 class  Three :: public TWO  {
      private :
         char *link;
         int count ;
          One One_object;

        }

 int main() {

     Three test;
     cout << test.One_object.link ; // error becoz of accessing private member 

       } 
```

在这里，访问私有成员的最佳方式是什么，如果它只是访问的价值，那么我可以编写一个 get 方法函数来获取数据。

但是在我真正的课堂上有很多数据成员受到保护..你能不能通过这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T07:34:21.253

和`private`成员`protected`变量旨在使用成员函数 aka 访问`methods`。

只能在同一类的`methods`另一个内部使用但不能从外部使用的应该再次是私有的或受保护的。`method`

选择`private vs protected`取决于您是否将从该类继承。建议对所有成员使用受保护的，以便从此类继承（可能在将来）的任何类也可以通过访问这些成员而受益。

还有一些`friend`功能可以让您直接从外部访问`private`或访问成员。`protected`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T08:28:09.527

在`main`中，当您这样做时`test.One_object`（您需要标记`One_object`为`public`好像），您将`One`直接获取对象实例，但即使如此，您也无法访问私有成员，`One`因为它们在此上下文中不可见。所以，你有两个选择：

1) 如果 Class`One`是可编辑的，则需要将必须从 main 访问的变量标记为`public`

或者

2)为in的每个成员变量创建`Three`一个`friend class`of`One`并编写一个函数。`getter``One_object``Three`

因此，遵循选项 2-

```
class One {
      private :
         char *link;
         int count;

      friend class Three;
};
class  Three : public Two  {
      private :
         char *link;
         int count ;
      public:
         One One_object;
         int get_One_object_count(){
            return One_object.count;
         }

}; 
```

我认为您可能会重新考虑类的设计，因为从全局上下文中访问成员并不是一个很好的设计实践。

阅读更多关于`friend class`和`friend functions` [这里](http://www.learncpp.com/cpp-tutorial/813-friend-functions-and-classes/)。

# mysql - 切换分支时如何恢复相同的数据库？

> ID：15171996
> 
> 赞同：3
> 
> 时间：2013-03-02T07:29:32.477
> 
> 标签：mysql, git, version-control

我有一个关于版本控制和数据库的问题。我的问题是我有一个稳定的分支**“b1”**，现在我创建了另一个分支**“b2”**并工作了几天。现在几天后我要切换到我以前**的'b1'**分支。

**但我的问题是 Mysql 数据库仍然具有与“b2”**分支相同的数据库。**但是当我离开分支'b1'**时，我想拥有相同的数据库，只有那些表和那些数据。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:28:58.007

要自动执行此操作，您需要将所有数据库文件置于版本控制之下。此外，由于数据库服务器不希望这些文件在其不知情的情况下发生更改，因此您需要在切换分支时重新启动服务器。当然，如果正在写入数据库，您还需要在每次修改后提交更改（在 git 中）。

如果您需要此类功能，请考虑切换到更适合此类操作的无服务器数据库。例如，[SQLite](http://www.sqlite.org/)没有单独的服务器进程，并将所有数据库内容保存在一个文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:59:56.710

假设您使用的是开发快照数据，您可能只有两个不同的数据库，一个与 b1 一起使用的数据，另一个与分支 b2 一起使用。

在您的分支代码中修改数据库引用，以便在那里引用新数据库。

# php - Zend 框架中的强制 HTTP 到 HTTPS 重定向

> ID：15171999
> 
> 赞同：4
> 
> 时间：2013-03-02T07:29:57.413
> 
> 标签：php, zend-framework, ssl, https

嗨，目前我从 Godaddy 购买了 SSL 证书并安装在 LoadBalancer 上。我有一个 zend 框架应用程序，但我遇到了将站点重定向到 Https 的问题。以下是我发现将网站重定向到 https 的最简单方法的 Bootstrap 代码：

```
 protected function _initForceSSL() {
     if($_SERVER['SERVER_PORT'] != '443') {
      header('Location: https://' . $_SERVER['HTTP_HOST'] . 
                $_SERVER['REQUEST_URI']);
      exit();
    } 
```

不幸的是，服务器错误返回。我在这里想念什么？谢谢

更新：

.htaccess 在文件的根目录

```
RewriteEngine On
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ public/index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T12:56:04.643

由于您使用的是 Zend Framework，因此您可以尝试在 .htaccess 文件中使用以下代码：

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.yoursite.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ public/index.php [NC,L] 
```

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-21T03:58:10.427

只需将此函数添加到您的引导文件中：

```
protected function _initForceSSL() {
    if($_SERVER['SERVER_PORT'] != '443') {
        header('Location: https://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
        exit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-14T05:28:52.050

以下代码对我有用。

```
 RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteRule .* index.php 
```