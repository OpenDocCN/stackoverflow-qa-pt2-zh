# StackOverflow 问答 13350000-13350999

# ios - 苹果因崩溃而被拒绝。不能复现，用sha256

> ID：13350000
> 
> 赞同：1
> 
> 时间：2012-11-12T19:15:23.393
> 
> 标签：ios, xcode

我已经在所有能够使用的 iOS 设备以及连接到 XCode 的模拟器上测试了我的应用程序，没有任何问题。现在我从 Apple 那里得到消息，该应用程序由于运行 iOS 6.0.1 的第三代 iPad 崩溃而被拒绝。

从崩溃日志中我可以看到：

```
0   libsystem_c.dylib               0x39421d74 strlen + 28
1   Appname                         0x0000da16 +[Utilities sha256:] (Utilities.m:28)
2   Appname                         0x0000dc1c +[Utilities complete256Hash:]             (Utilities.m:46)
3   Appname                         0x0000ea66 -[SettingController TestSettingsTapped] (SettingController.m:83) 
```

问题似乎源于以下功能，有人可以指出可能出了什么问题，因为我无法重现 Apple 遇到的崩溃，所以这可能与所有经过测试的设备都设置为丹麦语有关.

```
+(NSString*) sha256:(NSString *)clear{
    const char *s=[clear cStringUsingEncoding:NSUTF8StringEncoding];
    NSData *keyData=[NSData dataWithBytes:s length:strlen(s)];
    uint8_t digest[CC_SHA256_DIGEST_LENGTH]={0};
    CC_SHA256(keyData.bytes, keyData.length, digest);
    NSData *out=[NSData dataWithBytes:digest length:CC_SHA256_DIGEST_LENGTH];
    NSString *hash=[out description];
    hash = [hash stringByReplacingOccurrencesOfString:@" " withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@"<" withString:@""];
    hash = [hash stringByReplacingOccurrencesOfString:@">" withString:@""];
    return hash; 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:35:55.790

`strlen()`您在代码段第三行进行的调用传递了一个错误的指针。我能想到的最可能的原因是因为`s`是零，因为`clear`也是零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:49:15.507

也许您正在寻找的 nil clear 来自一个内存警告（苹果评论者积极生产以观察您的应用程序的行为）。

# c# - 如何确定 ParameterInfo 是否为返回参数

> ID：13350002
> 
> 赞同：2
> 
> 时间：2012-11-12T19:15:27.343
> 
> 标签：c#, .net, reflection, system.reflection, parameterinfo

如何确定 a`ParameterInfo`是否是返回参数？

我写了下面的函数，但我担心我可能会遗漏一些东西：

```
public bool IsReturnParameter(ParameterInfo parameter){
    var method = parameter.Member as MethodInfo;
    return method != null && parameter.Equals(method.ReturnParameter);
} 
```

我基于几个假设，这些假设可能存在缺陷：（1）参数是在成员上声明的`MethodInfo`，`ConstructorInfo`或`PropertyInfo`（索引器）。(2)`ConstructorInfo`并且`PropertyInfo`永远不会有返回参数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T19:32:19.530

您可以检查`ParameterInfo.Position == -1`...但您的相等性检查是否同样好...尽管在某些情况下它不会正确处理覆盖或接口或泛型类型。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T19:21:28.823

假设你指的是`out int foo`，你想要[`parameter.IsOut`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.isout.aspx)。

如果您想要返回值，请尝试[`IsRetval`](http://msdn.microsoft.com/en-us/library/system.reflection.parameterinfo.isretval.aspx)，尽管我以前从未听说过。

# sql - 使用 SQL 查找给定时间范围内的事件

> ID：13350003
> 
> 赞同：0
> 
> 时间：2012-11-12T19:15:34.763
> 
> 标签：sql, sql-server, tsql

我的大脑此刻一定是完全糊状的，因为我被困在这上面。我有一张表格，上面列出了某人服用药物的日期，以及他们服用药物的天数。可以为一个人开出`n`多种药物，因此以下查询的 CTE 是找到最大的时间范围（药物的填充日期 + 供应天数。）然后我想找到至少服用七种不同药物的人同时。我很难找到人们在给定时间范围内服用的药物。这需要限制在一个人至少`seven`一次吸毒的时间段内。直到最后一部分，一切正常。

来自 CTE 的样本数据（fillDate + longscript =endingDate）

![在此处输入图像描述](../Images/1dd2a9e07d94c22a03c888888b45e151.png)

并发脚本由`count(distinct rx.drugname)`查询决定

![在此处输入图像描述](../Images/ca648fd9a756d0f1052d1f2c3a4609a4.png)

```
 ;with cte 
as
(
      select rx.patid
        ,rx.fillDate
        ,MAX(rx.dayssup) as longestScript
        ,DATEADD(day,cast(rx.dayssup as int),rx.filldate) as endingDate
        from rx
        group by rx.patid, rx.fillDate,rx.daysSup
 ),
 startends as (
         select patid, FillDate as thedate, 1 as isstart 0 as isend
         from CTE union all
         select patid, EndingDate as thedate, 0 as isstart, 1 as isend
         from CTE
     ),
     cums as (
         select se.*,
                (select min(thedate) from startends se2 where se2.filledate > se.filldate) as nextdate,
                (select SUM(isstart) from startends se2 where se2.filldate <= se.filldate) as cumstarts,
                (select SUM(isend) from startends se2 where se2.filldate <= se.filldate) as cumends
         from startends se
     )
select *
from cums
where sumstarts - cumends >= 7 
```

您可以在第二个查询中看到每个患者出现多次，且在 fillDate 和endingDate 之间的时间跨度不同。如何编写查询以使第二个屏幕帽的第一行重复九种药物？SQL Server 08 r2 是我的 dbms。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:55:45.990

碰巧，您使用的是 SQL Server 2012 吗？该数据库中的解决方案*要*简单得多，因为 Microsoft 扩展了窗口函数以包括部分和。

这个想法是计算每个可能日期的累积填充和结束次数 - 无论是填充日期还是结束日期。那么不同的是累积脚本的数量。以下给出了每个日期的信息：

```
with cte as (<your query>),
     startends as (
         select patid, FillDate as thedate, 1 as isstart 0 as isend
         from CTE union all
         select patid, EndingDate as thedate, 0 as isstart, 1 as isend
         from CTE
     ),
     cums as (
         select se.*,
                (select min(thedate) from startends se2 where se2.filledate > se.filldate) as nextdate,
                (select SUM(isstart) from startends se2 where se2.filldate <= se.filldate) as cumstarts,
                (select SUM(isend) from startends se2 where se2.filldate <= se.filldate) as cumends
         from startends se
     )
select *
from cums
where cumstarts - cumends >= 7 
```

结果集中的每一行都有一个“nextdate”，它定义了条件成立的时间段。当患者从 7 到 8 到 9 到 8 到 9 到 7 个并发处方时，您可能最终会得到多个记录。

如果你有很多数据，这将是一个相当低效的查询，因为它正在执行相当昂贵的连接操作。不过，正如我所说，这在 SQL Server 2012 中会非常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:19:11.190

我不太确定您的架构，所以我稍微猜测一下，但是我注意到的第一件事是，在您的 CTE`x`中，您正在选择`MAX(DaysSup)`但也分组 by `dayssup`，从而使 max 冗余。

但是，我真的不认为这与您的问题有关。我个人会采取不同的方法来解决这个问题。我假设您有一个表格，如下所示：

```
CREATE TABLE rx
(       PatID           INT,
        FillDate        DATE,
        Dayssup         INT,
        DrugName        VARCHAR(50)
) 
```

因此，您可以执行以下操作：

```
SELECT  rx.PatID,
        rx.FillDate,
        rx.DrugName,
        [DateTaken] = DATEADD(DAY, v.Number, FillDate)
FROM    RX
        INNER JOIN master..spt_values v
            ON v.Number BETWEEN 0 AND rx.DaysSup
            AND v.Type = 'P' 
```

这将列出每位患者服用药物的所有日期，而不是一个范围，因此您可以使用以下内容：

```
WITH x AS
(   SELECT  rx.PatID,
            rx.FillDate,
            rx.DrugName,
            [DateTaken] = DATEADD(DAY, v.Number, FillDate) 
    FROM    rx
            INNER JOIN master..spt_values v
                ON v.Number BETWEEN 0 AND rx.DaysSup
                AND v.Type = 'P'
), y AS
(   SELECT  x.PatID,
            x.DateTaken,
            DrugsTaken = COUNT(DISTINCT x.DrugName)
    FROM    x
    GROUP BY x.PatID, x.DateTaken
    HAVING COUNT(DISTINCT x.DrugName) >= 7
), z AS
(   SELECT  *,
            GroupID = DATEDIFF(DAY, - ROW_NUMBER() OVER(PARTITION BY PatID ORDER BY DateTaken DESC), DateTaken)
    FROM    y
)
SELECT  z.PatID, 
        [MostConccurent] = MAX(z.DrugsTaken),
        [DateStarted] = MIN(z.DateTaken),
        [DateEnded] = MAX(z.DateTaken)
FROM    z
GROUP BY z.PatID, z.GroupID; 
```

我已经介绍的第一部分，第二部分只是将结果限制在包含 7 种或更多药物的所有日期。第三个 CTE 按连续日期对每位患者进行分组，最后一个 CTE 获取每个日期的最小值和最大值。

如果您需要在每个日期服用的药物清单，您可以重新加入 cte `x`：

```
SELECT  z.PatID, 
        x.DrugName,
        [MostConccurent] = MAX(z.DrugsTaken),
        [DateStarted] = MIN(z.DateTaken),
        [DateEnded] = MAX(z.DateTaken)
FROM    z
        INNER JOIN x
            ON x.PatID = z.PatID
            AND x.DateTaken = z.DateTaken
GROUP BY z.PatID, z.GroupID, x.DrugName; 
```

# jquery - 我的语法遍历字符串数组有什么问题？

> ID：13350007
> 
> 赞同：2
> 
> 时间：2012-11-12T19:15:54.770
> 
> 标签：jquery, arrays

```
array_of_strings = ["this", "is", "my", "array", "of", "strings"]

array_of_strings.each(function(val, i) {  console.log(i)  }) 
```

哪个返回：

```
TypeError: Object has no method 'each' 
```

我以为我可以以这种方式遍历数组..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:16:54.150

What you have is for iterating jQuery objects. You should use `$.each` like below,

```
//                       index----v   v-----value
$.each(array_of_strings, function(i, val) {  console.log(val)  }); 
```

Also the params inside `$.each` function is `(index,value)`

# javascript - 找出在 Chrome 中滚动 HTML 内容的罪魁祸首

> ID：13350009
> 
> 赞同：1
> 
> 时间：2012-11-12T19:16:06.743
> 
> 标签：javascript, html, google-chrome, scroll, yui

这是 jsFiddle - [http://jsfiddle.net/75Rqe/8/](http://jsfiddle.net/75Rqe/8/)

不幸的是，我无法将其简化为一个最小的示例，因此它包含相当多的代码。

它是我为 YUI3 数据表编写的用于实现就地编辑的 mixin 的精简版本。

首先是问题：

1.  加载 jsFiddle
2.  向下滚动表格，直到 dnum 为 26 的行是表格中的最后一个可见行： ![在此处输入图像描述](../Images/9740473541822b6cdfcd5c4e33adfceb.png)（26 没有什么特别之处，只是为了示例）
3.  现在单击该行的 dnum 字段并将 26 更改为其他内容： ![在此处输入图像描述](../Images/a33fae8621746fd7c46e40400c074e58.png)
4.  最后按tab键： ![在此处输入图像描述](../Images/89b9526d8ff21ebb13ce2121c352f5ae.png)

如果您使用的是 Chrome，则表格会在选项卡上自动滚动，以在表格中间显示修改后的行。

在 Firefox 或 IE9 上不会发生这样的事情： ![在此处输入图像描述](../Images/8b64765f493c4820eaca40b0ddfa2acb.png)

我知道期望任何人分析 jsFiddle 的代码是不公平的，所以我的问题是如何解决这个问题？我试图使用 Chrome 开发工具在各种“明显”的地方放置断点 - 没有骰子。内容滚动并且没有断点被击中。

滚动事件发生时我可以中断吗？

简而言之，我非常绝望（用 windbg 调试 Chrome 已经让我恶心了）。

欢迎任何反馈。

**编辑**

好的，SO坚持一些代码，所以这里是：

```
YUI.add('dt-inplace-edit',
  function (Y) {
    "use strict";
    ...

    function DataTableInplaceEdit() {
    }

    DataTableInplaceEdit.prototype = {
    ...
    };

    Y.DataTable.InplaceEdit = DataTableInplaceEdit;
  }, '0.1', {requires: ['node']});

YUI({filter: 'raw', debug: true, combine: false}).use("datatable", "node", 'datatable-scroll',
  'dt-inplace-edit',
    function(Y) {
    var i, table, data =[
       {dnum:100, dint:1, dtxt:"Test 1 string", dname:"George"},
       {dnum:101, dint:2, dtxt:"Test 2 string", dname:"Paul"},
       {dnum:102, dint:3, dtxt:"Test 3 string", dname:"Chase"},
       {dnum:103, dint:4, dtxt:"Test 4 string", dname:"Marge"},
       {dnum:104, dint:5, dtxt:"Test 5 string", dname:"Ben"},
       {dnum:105, dint:6, dtxt:"Test 6 string", dname:"Skyler"},
       {dnum:106, dint:7, dtxt:"Test 7 string", dname:"Lara"},
       {dnum:107, dint:1, dtxt:"Test 1 string", dname:"George"},
       {dnum:108, dint:2, dtxt:"Test 2 string", dname:"Paul"},
       {dnum:109, dint:3, dtxt:"Test 3 string", dname:"Chase"},
       {dnum:110, dint:4, dtxt:"Test 4 string", dname:"Marge"},
       {dnum:111, dint:5, dtxt:"Test 5 string", dname:"Ben"},
       {dnum:112, dint:6, dtxt:"Test 6 string", dname:"Skyler"},
       {dnum:113, dint:7, dtxt:"Test 7 string", dname:"Lara"}
    ];

    Y.Base.mix(Y.DataTable, [Y.DataTable.InplaceEdit]);

    data = data.concat(data.concat(data));
    for (i = 0; i < data.length; i += 1) {
        data[i] = Y.merge(data[i]);
        data[i].dnum = i;
    }

    Y.one('body').addClass("yui3-skin-sam");               
    table = new Y.DataTable({
        columns:[ 'dnum', 'dint', 'dtxt', 'dname' ],
        data: data,
        height: '15em',
        width: '100%',
        scrollable: 'y',
    }).render('#dt');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:25:57.230

当您选择一个元素时，似乎 chrome 会将元素滚动到容器的中间，就像在 FF 和 IE 中一样，它似乎执行默认行为`scrollIntoView()`，即将其与底部对齐

请参阅[此示例](http://jsfiddle.net/R8Hfz/5/)（在 Chrome 和 FF/IE 中）。它应该可以帮助您理解问题。在单击滚动容器中的第一个锚点后尝试 Tabbing，并尝试单击`scrollIntoView`直接调用的按钮

我特别喜欢 Chrome 的行为，但我认为你无能为力，除了`scrollIntoView`在使用命中选项卡后调用自己（并取消选项卡的默认行为`e.preventDefault`）

这是一个[实现](http://jsfiddle.net/R8Hfz/7/)，其中通过链接的选项卡在选项卡时不会将项目移动到中间

# c# - NHibernate 标准月份比较

> ID：13350011
> 
> 赞同：0
> 
> 时间：2012-11-12T19:16:14.340
> 
> 标签：c#, nhibernate, fluent-nhibernate, nhibernate-criteria

我正在尝试根据特定日期字段检索记录。我的标准是只显示值不属于当前月份或大于今天日期的记录。

我已经编写了一个标准，用于获取具有未来日期的记录。有人可以帮助我解决显示不在本月的记录的问题。

非常感谢你！

```
var criteria = Session.CreateCriteria<GLEntry>();
criteria.Add(Expression.Gt("EffectiveDate", DateTime.Today)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:27:35.473

只需要与当月的第一天相比。

```
var firstOfMonth = new DateTime(DateTime.Today.Year, DateTime.Today.Month, 1);
criteria.Add(Expression.Lt("EffectiveDate", firstOfMonth)); 
```

# header - 如何在 Xcode 的单独文件中添加通用头文件并从其他类访问？

> ID：13350012
> 
> 赞同：1
> 
> 时间：2012-11-12T19:16:16.453
> 
> 标签：header

我想创建一个单独的文件，我将在其中保留其他类的头文件以供使用，这样我就不必在每个文件中声明通用的头文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T11:56:13.163

在 prefix.pch 文件中包含所有标题

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-12T11:30:18.650

目标构建文件位于magento中的位置

我想它可以在目标构建设置->苹果llvm编译器-语言->前缀标头下设置。添加路径到 prefix.pch 文件并添加该文件中的所有标题。应该管用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T20:56:12.577

我想它可以在目标构建设置->苹果llvm编译器-语言->前缀标头下设置。添加路径到 prefix.pch 文件并添加该文件中的所有标题。应该管用。

# c# - Microsoft 翻译 - 找不到类型或命名空间名称“DataContract”

> ID：13350015
> 
> 赞同：0
> 
> 时间：2012-11-12T19:16:25.307
> 
> 标签：c#, .net, sharepoint, web-parts, translate

我正在尝试使用 Microsoft Translate API 为 Sharepoint Web 部件实现 C# 代码，在此处找到示例代码。 [http://msdn.microsoft.com/en-us/library/ff512421.aspx](http://msdn.microsoft.com/en-us/library/ff512421.aspx)

我已经设法解决了其他问题，但是当我尝试部署时，我收到了 10 个关于 DataMember 和 DataContract 相关行的错误。我是 .NET 和 C# 的新手，我希望我能在这里得到一些帮助。我已经尝试了几次，虽然我有其他参考问题的股票，但我之前没有收到这个错误。现在我重新创建了，我得到了这个错误。

```
The type or namespace name 'DataContract' could not be found (are you missing a using directive or an assembly reference?) 
```

这是我的代码。

```
using System;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Text;
using System.Net;
using System.IO;
using System.Runtime.Serialization.Json;
using System.Runtime.Serialization;
using System.Web;
using System.Media;
using Microsoft.SharePoint;
using System.Data.SqlClient;

namespace MyTranslatorTool.MyTranslator
{
    public partial class MyTranslatorUserControl : UserControl
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            AdmAccessToken admToken;
            string headerValue;
            //Get Client Id and Client Secret from https://datamarket.azure.com/developer/applications/
            //Refer obtaining AccessToken (http://msdn.microsoft.com/en-us/library/hh454950.aspx) 
            AdmAuthentication admAuth = new AdmAuthentication("clientid", "gpOGezhz/1dX6hgR6QZhG2j0Z45vw4HlnMWOwr2gNeA+");
            try
            {
                admToken = admAuth.GetAccessToken();
                // Create a header with the access_token property of the returned token
                headerValue = "Bearer " + admToken.access_token;
                TranslateMethod(headerValue);
            }
            catch (WebException er)
            {
                ProcessWebException(er);
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);
            }
            catch (Exception ex)
            {

                Console.WriteLine(ex.Message);
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);
            }

        }
        private static void TranslateMethod(string authToken)
        {
            //original text = text
            //translated text = translation
            //original language = from
            //destinating language = to
            string text = "Use pixels to express measurements for padding and margins.";
            string from = "en";
            string to = "de";

            string uri = "http://api.microsofttranslator.com/v2/Http.svc/Translate?text=" + System.Web.HttpUtility.UrlEncode(text) + "&from=" + from + "&to=" + to;

            HttpWebRequest httpWebRequest = (HttpWebRequest)WebRequest.Create(uri);
            httpWebRequest.Headers.Add("Authorization", authToken);
            WebResponse response = null;
            try
            {
                response = httpWebRequest.GetResponse();
                using (Stream stream = response.GetResponseStream())
                {
                    //translated text
                    System.Runtime.Serialization.DataContractSerializer dcs = new System.Runtime.Serialization.DataContractSerializer(Type.GetType("System.String"));
                    string translation = (string)dcs.ReadObject(stream);
                    Console.WriteLine("Translation for source text '{0}' from {1} to {2} is", text, "en", "de");
                    Console.WriteLine(translation);
                    //push to view
                    //alpha.Text = translation;
                }
                Console.WriteLine("Press any key to continue...");
                Console.ReadKey(true);
            }
            catch
            {
                throw;
            }
            finally
            {
                if (response != null)
                {
                    response.Close();
                    response = null;
                }
            }
        }
        private static void ProcessWebException(WebException e)
        {
            Console.WriteLine("{0}", e.ToString());
            // Obtain detailed error information
            string strResponse = string.Empty;
            using (HttpWebResponse response = (HttpWebResponse)e.Response)
            {
                using (Stream responseStream = response.GetResponseStream())
                {
                    using (StreamReader sr = new StreamReader(responseStream, System.Text.Encoding.ASCII))
                    {
                        strResponse = sr.ReadToEnd();
                    }
                }
            }
            Console.WriteLine("Http status code={0}, error message={1}", e.Status, strResponse);
        }
    }
    [DataContract]
    public class AdmAccessToken
    {
        [DataMember]
        public string access_token { get; set; }
        [DataMember]
        public string token_type { get; set; }
        [DataMember]
        public string expires_in { get; set; }
        [DataMember]
        public string scope { get; set; }
    }

    public class AdmAuthentication
    {
        public static readonly string DatamarketAccessUri = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13";
        private string clientId;
        private string cientSecret;
        private string request;

        public AdmAuthentication(string clientId, string clientSecret)
        {
            this.clientId = clientId;
            this.cientSecret = clientSecret;
            //If clientid or client secret has special characters, encode before sending request
            this.request = string.Format("grant_type=client_credentials&client_id={0}&client_secret={1}&scope=http://api.microsofttranslator.com", HttpUtility.UrlEncode(clientId), HttpUtility.UrlEncode(clientSecret));
        }

        public AdmAccessToken GetAccessToken()
        {
            return HttpPost(DatamarketAccessUri, this.request);
        }

        private AdmAccessToken HttpPost(string DatamarketAccessUri, string requestDetails)
        {
            //Prepare OAuth request 
            WebRequest webRequest = WebRequest.Create(DatamarketAccessUri);
            webRequest.ContentType = "application/x-www-form-urlencoded";
            webRequest.Method = "POST";
            byte[] bytes = Encoding.ASCII.GetBytes(requestDetails);
            webRequest.ContentLength = bytes.Length;
            using (Stream outputStream = webRequest.GetRequestStream())
            {
                outputStream.Write(bytes, 0, bytes.Length);
            }
            using (WebResponse webResponse = webRequest.GetResponse())
            {
                DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(AdmAccessToken));
                //Get deserialized object from JSON stream
                AdmAccessToken token = (AdmAccessToken)serializer.ReadObject(webResponse.GetResponseStream());
                return token;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:18:18.697

尝试添加对：[System.Runtime.Serialization的引用](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.aspx)

# codeigniter - 如何通过 Phil Sturgeon CodeIgniter 模板中的 set() 方法访问数据集？

> ID：13350017
> 
> 赞同：1
> 
> 时间：2012-11-12T19:16:34.447
> 
> 标签：codeigniter, templates

我有 CI 2.1.3 和模板 1.9

模板 1.9 文档指出

> ## 放（）
> 
> 使用可链接的方法设置数据。提供两个字符串或一个数据数组。
> 
> ### 用法
> 
> ```
> $this->template->set('foo', $bar); 
> ```
> 
> ### 用法
> 
> ```
> $this->template->build('welcome_message', array('message' => 'Hi there!'); 
> ```

如何在视图文件中使用上述示例的`foo`/`message`变量？

我在模板文件中尝试过`$template['foo']`，`$foo`但无法获得值。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T19:39:53.940

我正在编辑错误的模板文件。我可以使用访问变量

```
 $foo 
```

格式。

# c++ - How to make a function that returns a 2-dimensional array in c++

> ID：13350021
> 
> 赞同：0
> 
> 时间：2012-11-12T19:16:59.493
> 
> 标签：c++, arrays, multidimensional-array

I need to make this function. The parameter suppose to be a random `N*N` array. And it should returns a `(N-1)*(N-1)` array. How can I do this?

```
int** SubMatrix(int** matrix){
    int** submatrix=new int*[size-1];
        ................................
        ................................
        return submatrix;
} 
```

Is this code correct?

Besides, say in the main function, I already have this array

```
x={{1,2,3},{1,2,3},{1,2,3}}; 
```

How do I call the function?

Calling:

```
int y[2][2]=SubMatrix[x] 
```

is wrong and

```
int** y=SubMatrix[x] 
```

is also wrong...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:49:50.653

首先，没有办法在 C++ 中跟踪数组的大小（只有分配的内存量）。因此，有必要`size`将数组作为参数传递或全局传递。我在以下声明中做出了这个假设：

```
int* SubMatrix(int** matrix, int size){
    int* submatrix = new int[(size - 1) * (size - 1)];
    // Do stuff
    return submatrix;
} 
```

其次，如果您的矩阵是方形的，最好使用上述声明，其中分配的数组的大小是`(N-1)*(N-1)`（参见 Kevin Loney 的回答[How do I declare a 2d array in C++ using new?](https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-using-new)关于堆上的矩阵声明）；因此，该数组可作为矩阵访问。但是，访问单元格需要一些算术：

```
for (int i = 0; i < size - 1; ++i)
    for (int j = 0; j < size - 1; ++j)
        submatrix[i * (size -1) + j] // Element at [i][j] 
```

最后，函数返回的数组现在是一个矩阵指针：

```
int* matrix = SubMatrix(matrix, size); 
```

返回的矩阵的维度是`(size-1)*(size-1)`

关于你现在的例子：

```
x = {{1,2,3},{1,2,3},{1,2,3}};
int* y = SubMatrix(matrix, 3);
// y is now a matrix of size (size-1)*(size-1) 
```

* * *

如果你真的（真的）想要一个二维数组：

```
int** SubMatrix(int** matrix, int size){
    int** submatrix = new int*[size - 1];
    for (int i = 0; i < size - 1; ++i)
        submatrix[i] = new int[size - 1]
    // Do stuff
    return submatrix;
} 
```

# html - best way to declare and collect data

> ID：13350022
> 
> 赞同：0
> 
> 时间：2012-11-12T19:17:01.740
> 
> 标签：html

I'm using the data attribute to pass data with links but it happens very often that this kind of declaration becomes redundant e.g I have an array for images that I iterate through and display on the screen. Each of them have an image id and a set of options presented as links. Im passing the image_id in a data attribute right now in each link. But there has to be a way to only declare the image_id once and then collect this data when clicking one of the links associated with the image.

```
 for($i = 0; $i <= ($image_array_length - 1); $i++){ ?>

<img src="somesrc" />

<a href="#" data-image_id="<?php echo $image['image_id']; ?>">Image option 1</a>
<a href="#" data-image_id="<?php echo $image['image_id']; ?>">Image option 2</a>
<a href="#" data-image_id="<?php echo $image['image_id']; ?>">Image option 3</a>

<?php }?> 
```

so instead of having to declare the image id for each link I would like to have something like this:

```
 for($i = 0; $i <= ($image_array_length - 1); $i++){ ?>

<img src="somesrc" id="data-placeholder" data-image_id="<?php echo $image['image_id']; ?>" />

<a href="#" class="js-selector">Image option 1</a>
<a href="#" class="js-selector">Image option 2</a>
<a href="#" class="js-selector">Image option 3</a>

<?php }?> 
```

But the problem I'm facing is that there are several images and each of them will have the same id on the img element that means that I cant identify the specific image_id. So in javascript:

```
$(".js-selector").click(function(){
    var image_id = $("#placeholder").data("image_id");
    some statements...
}); 
```

How should javascript know which image_id to collect if i want to declare the image_id as in the second HTML example?

# django - 启动 django 开发服务器

> ID：13350026
> 
> 赞同：2
> 
> 时间：2012-11-12T19:17:26.700
> 
> 标签：django

当我尝试使用 manage.py runserver 启动我的 django 开发服务器时遇到问题。这是我第一次尝试运行服务器，因为我是 django 的新手。我收到以下错误：正在验证模型...

```
Unhandled exception in thread started by <bound method Command.inner_run of <dja
ngo.contrib.staticfiles.management.commands.runserver.Command object at 0x000000
00033E8278>>
Traceback (most recent call last):
  File "C:\Python33\lib\site-packages\django\core\management\commands\runserver.
py", line 92, in inner_run
    self.validate(display_num_errors=True)
  File "C:\Python33\lib\site-packages\django\core\management\base.py", line 277,
 in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python33\lib\site-packages\django\core\management\validation.py", lin
e 32, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python33\lib\site-packages\django\db\models\loading.py", line 164, in
 get_app_errors
    self._populate()
  File "C:\Python33\lib\site-packages\django\db\models\loading.py", line 70, in
_populate
    self.load_app(app_name, True)
  File "C:\Python33\lib\site-packages\django\db\models\loading.py", line 94, in
load_app
    models = import_module('.models', app_name)
  File "C:\Python33\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "C:\Python33\lib\site-packages\django\contrib\auth\models.py", line 15, i
n <module>
    from django.contrib.auth.hashers import (
  File "C:\Python33\lib\site-packages\django\contrib\auth\hashers.py", line 8, i
n <module>
    from django.test.signals import setting_changed
  File "C:\Python33\lib\site-packages\django\test\__init__.py", line 6, in <modu
le>
    from django.test.testcases import (TestCase, TransactionTestCase,
  File "C:\Python33\lib\site-packages\django\test\testcases.py", line 923, in <m
odule>
    _ImprovedEvent = threading._Event
AttributeError: 'module' object has no attribute '_Event' 
```

请帮忙....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:39:07.687

您收到此错误消息是因为您使用的是 Python 3。

Django 1.5 将对 Python 3.x 提供实验性支持。如果您使用的是早期版本的 Django，则必须改用 Python 2.x。

# java - 如何对字符串数组进行排序

> ID：13350031
> 
> 赞同：0
> 
> 时间：2012-11-12T19:17:51.920
> 
> 标签：java, sorting

我有一个`String`名为的数组`myArray`（为了论证，我们只说它包含故事中的单词）。我想将此数组传递给一个方法，该方法将按字母顺序对它们进行排序并分析单词。我在 SO 上查看了这个，很多人建议在这个场景中使用`java.util.Arrays.sort(myArray)`. 所以我在我的方法中使用了这一行，传入`myArray`，并对其进行了计算，等等。

不过最近引起了我的注意，这个会永久排序`myArray.`，也就是我出方法后数组还是会排序的。有没有办法让我只在方法范围内对数组进行排序？

示例代码：

```
public static double uniqueWords(String[] doc1) {

    java.util.Arrays.sort(doc1)

    ... // count up the number of unique words in this array

    return COUNT_OF_UNIQUE_WORDS;
}

public static void main(String[] args) {
    String[] document;
    ... // put values in the array
    System.out.println(uniqueWords(document));
    System.out.println(java.util.Arrays.toString(document));   // here the array will still be sorted, which I DON'T want
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T19:19:35.500

```
String temp[] = java.util.Arrays.copyOf(doc1,doc1.length);
java.util.Arrays.sort(temp); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T19:19:51.667

**制作数组的副本，对该副本进行排序并使用相同的副本。**

```
 String [] sortedDocuments = new Sting[document.length];
  Systems.arraycopy(document, 0, sortedDocuments , 0, document.length);
  Arrays.sort(sortedDocuments ); 
```

或者

```
 String [] sortedDocuments = Arrays.copyOf(document, document.length);
  Arrays.sort(sortedDocuments ); 
```

在您的方法中使用`sortedDocuments`数组。您的原始数组`document`保持不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:22:56.103

如果您只想计算唯一单词，最好使用以下代码。无需对数组进行排序即可计算唯一元素。

```
public int countUniqueElements(Object[] array) {
    return new HashSet(Arrays.asList(array)).size();
} 
```

# ruby-on-rails - rails 和 solr 如何限制或设置可搜索属性 ID 的范围

> ID：13350032
> 
> 赞同：0
> 
> 时间：2012-11-12T19:18:00.553
> 
> 标签：ruby-on-rails, ruby, solr, range, limit

我有一个公司模型，它有很多行业和一个级别。

我有一个辅助函数，可以根据级别获取行业数量。

假设具有“基本”级别的公司模型实例只能搜索前 2 个行业，虽然它可能包含更多，但我只希望它显示在前 2 个行业的结果中。

在我的模型中

```
searchable do
  integer :industry_ids, multiple: true 
```

如何限制对模型实例的搜索，以便根据 num_of_industries 辅助函数确定的级别只能搜索特定数量的行业。

就像是

```
searchable do
  integer :industry_ids[num_of_industries], multiple: true 
```

编辑：我想通了

```
LIMITED_INDUSTRIES_BASED_ON_LEVEL = {
  'Free' => 1,
  'Silver' => 3,
  'Gold' => 5,
  'Platinum' => 5
}
def industries_limited
  self.industries.limit(LIMITED_INDUSTRIES_BASED_ON_LEVEL[self.level])
end
searchable do
  integer :industry_ids, multiple: true do
    self.industries_limited.map(&:id)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:34:00.223

想通了公司的级别是说“免费”，因此仅限于1个行业，但它可以增加更多，所以将来如果决定升级，所有信息都在那里。所以我将搜索本身限制为基本上只计算基于级别的行业（在这种情况下只计算前1个，因为对于级别=“免费”，限制是1）

```
LIMITED_INDUSTRIES_BASED_ON_LEVEL = {
  'Free' => 1,
  'Silver' => 3,
  'Gold' => 5,
  'Platinum' => 5
}
def industries_limited
  self.industries.limit(LIMITED_INDUSTRIES_BASED_ON_LEVEL[self.level])
end
searchable do
  integer :industry_ids, multiple: true do
    self.industries_limited.map(&:id)
  end
end 
```

# c# - C# Charts 从数据表中添加多个系列

> ID：13350036
> 
> 赞同：3
> 
> 时间：2012-11-12T19:18:15.287
> 
> 标签：c#, charts

我从我的数据库中检索了几个大小不同的数据表。这2个只是一个例子。

看这里的结构！
![在此处输入图像描述](../Images/4fb552193d1001aae1c5f8db961112d5.png)
我设法创建了 2 个不同的系列并让它们出现在图例中。

我的问题是如何将这些数据绑定到相应的系列。系列名称是从列 doman_namn 创建的，系列的数量是从包含唯一 URL 数量的“antal”列创建的。

**问题** 如何将 ADDY 和 ADDX 绑定到现在失败的图表。

到目前为止，这是我的代码...

```
Chart1.DataSource = dt;

int amountofrows = Convert.ToInt32(dt.Rows[0]["antal"].ToString());

for (int i = 0; i < amountofrows; i++)
{
    string serieName = dt.Rows[i]["doman_namn"].ToString();

    Chart1.Series.Add(serieName);
    Chart1.Series[i].ChartType = SeriesChartType.Line;

    foreach(DataRow dr in dt.Rows)
    {
        try
        {
            if (String.Equals(serieName,dr["doman_namn"].ToString(), StringComparison.Ordinal))     
            {
            Chart1.Series[serieName].Points.AddY(Convert.ToDouble(dr["ranking_position"]));
            Chart1.Series[serieName].Points.AddY(Convert.ToDouble(dr["ranking_date"]));
            }
        }
        catch (Exception)
        {
            throw new InvalidOperationException("Failed when adding points");
        }
    }
}

Chart1.DataBind();
Chart1.Visible = true; 
```

在 GREGOR 的帮助下编写代码

```
for (int i = 0; i < amountofrows; i++)
{
    string serieName = dt.Rows[i]["doman_namn"].ToString();

    Chart1.Series.Add(serieName);
    Chart1.Series[i].ChartType = SeriesChartType.Line;

    Chart1.Series[serieName].XValueMember = "ranking_date";
    Chart1.Series[serieName].YValueMembers = "ranking_position";

}
Chart1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T21:11:52.157

看看我的一个示例如何使用代码将 DataTable 绑定到 MS Chart：

[如何从控制台应用程序中基于 DataTable 绘制图表？](https://stackoverflow.com/questions/12553435/how-to-draw-chart-based-on-datatable-from-console-application/12553474#12553474)

希望你会发现它有用。

以下是关键点：

```
//setting the source from datatable....
chart.DataSource = dt;

//setting XValueMember for first serie (Name is column inside datasource)...
serie1.XValueMember = "ranking_position";

//setting YValueMembers...
serie1.YValueMembers = "ranking_date"; 
```

这是绑定多个系列的另一个链接：

[http://dotnetslackers.com/articles/net/Binding-a-Microsoft-Chart-with-a-Dataset.aspx](http://dotnetslackers.com/articles/net/Binding-a-Microsoft-Chart-with-a-Dataset.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T22:02:25.730

我自己设法做到了，但你 Gregor Primar 把我推向了正确的方向！

重要的是您设置了 X 轴和 Y 轴的值类型。由于十进制类型不是我使用 auto 作为类型的选项。

```
Chart1.DataSource = dt;

int amountofrows = Convert.ToInt32(dt.Rows[0]["antal"].ToString());

for (int i = 0; i < amountofrows; i++)
{
    List<string> xvals = new List<string>();
    List<decimal> yvals = new List<decimal>();
    string serieName = dt.Rows[i]["doman_namn"].ToString();
    Chart1.Series.Add(serieName);
    Chart1.Series[i].ChartType = SeriesChartType.Line;

    foreach(DataRow dr in dt.Rows)
    {
        try
        {

        if (String.Equals(serieName,dr["doman_namn"].ToString(), StringComparison.Ordinal))     
        {                    
            xvals.Add(dr["ranking_date"].ToString());
            yvals.Add(Convert.ToDecimal(dr["ranking_position"].ToString()));              
        }

        }
        catch (Exception)
        {

            throw new InvalidOperationException("Diagrammet kunde inte ritas upp");
        }
    }
    try
    {
        Chart1.Series[serieName].XValueType = ChartValueType.String;
        Chart1.Series[serieName].YValueType = ChartValueType.Auto;
        Chart1.Series[serieName].Points.DataBindXY(xvals.ToArray(), yvals.ToArray());
    }
    catch (Exception)
    {

        throw new InvalidOperationException("Kunde inte bind punkterna till Diagrammet");
    }    
}

Chart1.DataBind();
Chart1.Visible = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-25T14:07:32.850

这可能有效：

```
 if (dr.Rows.Count > 0)
                {
                    string[] seriesSessionArray = dr.AsEnumerable().Select(row => row.Field<string>("Username")).ToArray();
                    decimal[] pointsSessionArray = dr.AsEnumerable().Select(row => row.Field<decimal>("Percent")).ToArray();
                    chartGrowth.SuppressExceptions = true;
                    for (int i = 0; i < seriesSessionArray.Length; i++)
                    {
                        if (pointsSessionArray[i] == 0)
                        {
                            chartGrowth.ChartAreas[0].RecalculateAxesScale();
                        }
                        if (chartGrowth.Series.IndexOf(seriesSessionArray[i]) == -1)  //series does not exists
                        {
                            chartGrowth.Series.Add(seriesSessionArray[i]);
                        }
                        chartGrowth.Series[seriesSessionArray[i]].ChartType = SeriesChartType.SplineArea;
                        chartGrowth.Series[seriesSessionArray[i]].Points.AddY(pointsSessionArray[i]);
                        chartGrowth.Series[seriesSessionArray[i]].ToolTip = seriesSessionArray[i] + ":" + "#VAL{0.0}";
                        chartGrowth.Series[seriesSessionArray[i]].SetCustomProperty("LineTension", "0.45");
                    }

                } 
```

# outlook - 来自 eHow 的 AppleScript 故障以提高 iCal 和 Outlook 兼容性

> ID：13350043
> 
> 赞同：0
> 
> 时间：2012-11-12T19:18:33.850
> 
> 标签：outlook, applescript, icalendar

eHow 有一篇关于一些 Applescript 的文章，该文章假设可以在 Outlook 中正确设置 iCal 邀请格式，而不是发送 ICS 文件。

[http://www.ehow.com/how_5887667_send-ical-invites-outlook.html](http://www.ehow.com/how_5887667_send-ical-invites-outlook.html)

但是，当我按照说明操作时（减去 HTML 标记），在单击编译后，它会给我关于告诉邮件命令的以下错误：

“语法错误：应为“，”或“}”但找到标识符”

整个脚本都使用了相同的命令，但由于某种原因，它只是在这个地方有问题。如果我删除它，我会收到错误“预期的”“通过找到脚本结尾”

我对 AppleScript 一无所知 - 只是试图让 iCal 可用于专业用途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:44:03.163

取自您的文章引用的链接： [Mac OS X Hints](http://hints.macworld.com/article.php?story=20031128231213827)

```
on send_mail_sbrp(subjectLine, messageText, myrecipient, invitationPath)
    set pfile to POSIX file invitationPath
    set myfile to pfile as alias

    try
        -- define a carriage return
        set cr to (ASCII character 13) & (ASCII character 10)

        -- retrieve the user's name and e-mail
        set listOfAccounts to {}

        tell application "Mail"
            repeat with oneAccount in every account
                set listOfAccounts to listOfAccounts & ¬
                    {"\"" & (get full name in oneAccount) & "\" <" & ¬
                        (get email addresses in oneAccount) & ">"}
            end repeat
        end tell

        if ((get length of listOfAccounts) is 1) then
            set theAccountTouse to get first item of listOfAccounts
        else
            set theAccountTouse to ¬
                choose from list listOfAccounts ¬
                    default items (get first item of listOfAccounts) ¬
                    with prompt ¬
                    ¬
                        "Please select which mail account to send the invitation from:" without multiple selections allowed and empty selection allowed
        end if

        -- open and read the iCal event file to insert into an e-mail
        set myEventFileHandle to ¬
            open for access myfile without write permission
        set myEventFileContent to read myEventFileHandle
        close myEventFileHandle

        -- pre-pend mail headers to the event contents
        set myNewEmailText to ¬
            "Subject: " & subjectLine & cr & ¬
            "From: " & theAccountTouse & cr & ¬
            "To: " & myrecipient & cr & ¬
            "content-class: urn:content-classes:calendarmessage" & cr & ¬
            "Content-Type: text/calendar;" & cr & ¬
            "  method=REQUEST;" & cr & ¬
            "  name=\"meeting.ics\"" & cr & ¬
            "Content-Transfer-Encoding: 8bit" & cr & cr & ¬
            myEventFileContent

        -- create a random event file name
        set tempMailName to (random number from 1 to 1000000) & ".ics"
        set aliasTempMail to "/tmp/" & tempMailName

        -- write the new e-mail to a temp file
        set myEventFileHandle to ¬
            open for access (POSIX file aliasTempMail as string) with write permission
        write myNewEmailText starting at 1 to myEventFileHandle
        close myEventFileHandle

        -- use SENDMAIL to send the file with proper headers
        do shell script "sendmail < " & aliasTempMail

        -- delete the temp file
        do shell script "rm " & aliasTempMail
    on error errMsg
        display dialog errMsg
    end try
end send_mail_sbrp 
```

# c# - StreamReader 用 + 符号替换不间断空格

> ID：13350046
> 
> 赞同：0
> 
> 时间：2012-11-12T19:18:54.490
> 
> 标签：c#, asp.net, streamreader

我正在从网络表单中获取字段并尝试将输入保存到数据库中。它目前正在用“+”符号替换不间断空格（即“Test 2”=“Test+2”）正如您将在下面看到的，我有一个 hack 替换字符串中的 + 并将其替换为“ ”。

我知道这是一个短边的解决方案。我原以为 'Encoding.GetEncoding("UTF-8") 会解决这个问题。我想找到某种可以解释任何类型字符的编码。请看下面的代码：

```
private List<Alias> GetAliasesFromPost()
{
    List<Alias> aliases = new List<Alias>();
    using (StreamReader sr = new StreamReader(Request.InputStream, Encoding.GetEncoding("UTF-8")))
    {
        string[] postedValues = sr.ReadLine().Split('&');
        for (int i = 0; i < postedValues.Length; i++)
        {
            if (postedValues[i].StartsWith("urlAlias="))
            {
                Alias alias = new Alias();
                string active = postedValues[i - 1].Replace("active=", string.Empty);
                alias.Active = string.Compare(active, "on", true) == 0;
                alias.UrlAlias = postedValues[i].Replace("urlAlias=", string.Empty);
                alias.Notes = postedValues[i + 1].Replace("notes=", string.Empty).Replace("+", " ");
                int Id = 0;
                Int32.TryParse(postedValues[i + 2].Replace("id=", string.Empty), out Id);
                alias.Id = Id;
                aliases.Add(alias);
            }
        }
    }
    return aliases;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:25:17.010

[要解决您提出的具体问题，请在http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)中使用 UrlDecode`postedValues`

但是你真的不应该解析`Request`. 只需使用`Request.Params`，这些值就已经在那里被解析和解码了。

# php - Apache 是否缓存请求 URL？

> ID：13350047
> 
> 赞同：1
> 
> 时间：2012-11-12T19:18:56.070
> 
> 标签：php, regex, apache, mod-rewrite

我坐在这里试图为我的新网站找到一种解决 URL 重写的方法。这将是一个完全基于 AJAX 的站点，其中 URL 在 90% 的 URL 中不重要。

在 Chrome 中按 F12 并进入网络后，我开始监控响应性，因为我更改了 .htaccess 中的参数。

我发现当输入一个服务器重启后没有看到的地址时，它花费了 80-100ms 来处理请求（等待时间）。这是在本地主机上运行的。这发生在更改 GET 请求的动态部分 ?id=changeThis 和输入新 URL（如 /id/changeThis..）时。然而，下一次处理需要 8-12 毫秒...

如果我使用`^(.*)`将所有请求重定向到 index.php 没有影响。

问题：如果我使用`^([a-zA-Z\-/]*)`（注意没有句号）使 main.css 之类的静态文件不被重写，或者最好将所有文件放在静态文件夹中（因此灵活性松散）并仍然使用，这是否会影响更大的规模？`^(.*)`重定向不在静态异常文件夹中的所有请求。（我在这里考虑速度。）

问题：任何人都可以批准我的发现吗？Apache 是否真的“缓存”请求，以便对特定 URL 的第一个请求需要时间来处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:17:03.293

要回答您的问题：

使用更少的子句和更简单的正则表达式，处理速度会更快 - 但我们正在谈论几毫秒的数量级。

Apache 不会按照您的想法缓存请求 - 但是，您的 linux 系统可能正在缓存文件，因此后续加载速度更快。我认为这就是您所看到/想到的 - apache 和网站文件都缓存在页面中的操作系统中，以便更快地访问。重新启动应该会使这些页面变脏并需要重新加载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:25:04.957

从 Apache 配置中禁用 mod_cache。在我的配置中，它默认启用。

# asp.net-mvc - 什么是中型、高流量网站的最佳架构？

> ID：13350056
> 
> 赞同：1
> 
> 时间：2012-11-12T19:19:20.977
> 
> 标签：asp.net-mvc, performance, architecture

我正在开始一个新项目（非公司），我想知道现在如何成为一个伟大的架构。

我现在计划使用：

*   ASP.NET MVC 4.0
*   SQL Server 2008 或 2012
*   .NET 4.5 下的 EF 5.0，带有 Dapper
*   存储库模式的实现（这个[http://code.google.com/p/ef4prs/](http://code.google.com/p/ef4prs/)）
*   DI 与[Autofac](http://code.google.com/p/autofac/)
*   自动映射器
*   WCF 服务层（用于未来的移动实施）

检查流程（如果有问题请纠正我）：**控制器**调用**ApplicationService**，调用**BusinessLayer**，使用 UnitWork/Repository 调用**DAL ，通过****EF**或**Dapper**执行查询（从 Repository 的特定方法查询 Dapper 是否正确？ )，然后结果会自动映射到**DTO**并返回到**Controller**，将所需的内容复制到**ViewModel**并返回 View。

这里的问题是性能，正如我所说，该网站计划有高流量。在这种情况下，上面列出的任何项目都会降低性能吗？还是这种组合泄漏了更多东西？我应该丢弃 EF，只使用 Dapper 吗？恐怕服务层会因为流量而降低性能。

最后，我不知道这种架构是不必要的，还是很差。

这是很多问题，但重点是了解适合中型网站的出色而不是“过度架构”的解决方案。

对不起英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:24:41.017

您的问题相当主观，因为有许多可能的配置都可以正常工作。不过我可以给你一些建议。

将 EF 与 Dapper 混合和匹配可能有点雷区。理论上，您应该能够使用 Dapper 获取对象，然后将`Attach`它们发送到`DbContext`并更新它们。但是，根据我的经验，这通常不起作用。我们从 EF 开始，然后慢慢转向 Dapper 进行快速查询，我认为我们可以继续使用 EF 进行更新/插入，但我最终推出了自己的插入/更新跟踪（非常简单），因此我们正在慢慢淘汰EF的使用。

事后看来，我建议选择一个并坚持下去。EF 在 .NET 4.5 下应该相当快。虽然不如 Dapper 快，所以纯粹的 Dapper 路线也不错。

您可以考虑的其他技术：

*   ServiceStack (webservice) [http://www.servicestack.net/](http://www.servicestack.net/)。强烈推荐，低配置，快速且易于使用。
*   ASP.NET MVC Web-API (webservice) [http://www.asp.net/web-api](http://www.asp.net/web-api)。我没有这方面的经验。
*   ThisMember（映射器，*免责声明：我自己的库*）[https://github.com/JulianR/ThisMember/wiki](https://github.com/JulianR/ThisMember/wiki)。在我看来，它比 AutoMapper 快得多（10-100 倍）并且更易于使用。

# c# - Linq 为 .All() 转换为 SQL

> ID：13350061
> 
> 赞同：0
> 
> 时间：2012-11-12T19:19:36.943
> 
> 标签：c#, linq

我有以下 linq：

```
 var result2 = Psl_Pt
                .Where(w => w.PaslNum == 33979)
                .GroupBy(a => new { a.GroupId })            
                .Select(a =>
     new  
     {
            Publish = a.All(g => g.Publish)

     }); 
```

什么相当于：

```
Publish = a.All(g => g.Publish) 
```

从我看到的

```
.All(g => g.Publish) 
```

方法：

```
publish = 1 
```

这是选择语句：

```
select groupid from Psl_Pt
where publish = 1 and paslnum = 33979
group by groupid 
```

请让我知道转换为 sql 是否正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:30:14.323

`All()`如果所有成员都满足条件，则返回 true，在您的情况下`Publish == true`。所以一个 SQL 等价物是：

```
SELECT groupid, SUM(NOT publish) as AnyNotPublish
WHERE paslnum = 33979
GROUP BY groupid
HAVING AnyNotPublish = 0; 
```

如果不是，您必须将发布转换为整数。

# python - 在 python 中有没有一种方法，如果我创建一个 .py 文件，然后将导入一个不同的 .py 文件，该文件具有所有异常的 catch 子句，

> ID：13350062
> 
> 赞同：0
> 
> 时间：2012-11-12T19:19:43.323
> 
> 标签：python

在 python 中有没有一种方法，如果我创建一个 .py 文件，然后将导入一个不同的 .py 文件，该文件具有所有可能的异常的 catch 子句，以这种方式

假设我们有一个 .py 文件让我们说 test1

测试1.py：

```
import xyz          
x=5;
print x;
func1() 
```

现在我们有了 test2.py ，它有一个 try 块，除了所有可能的异常。所以我需要的是我希望 test1.py 的内容进入`try`test2.py 。有没有办法或者调用或导入我可以实现这一点？

测试2.py

```
import traceback
import sys
import linecache
# import your file here

try:
    import first

    # invoke your files main method here and run the module
    # it is normal behavior to expect an indentation error if your file and method have not been invoked correctly

except SyntaxError as e:
        exc_type, exc_value, exc_traceback = sys.exc_info()
        #print(sys.exc_info())
        formatted_lines = traceback.format_exc().splitlines()
        #print(formatted_lines)
        temp=formatted_lines[len(formatted_lines) - 3].split(',')
        line_no = str(formatted_lines[len(formatted_lines) - 3]).strip('[]')
        line=line_no.strip(',')
        #print(line[1])

        print " The error method thrown by the stacktrace is  " "'" ,e , "'"
        print " ********************************************* Normal Stacktrace*******************************************************************"
        print(traceback.format_exc()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:46:55.387

怎么样：

测试2.py：

```
try:
    import test1
except ...:
    ... 
```

如果在 import 时引发异常`test1`，则`try...except`块`test2`中将有机会处理它。

* * *

或者，您可以将代码放在函数`test1.py`内部：`main`

```
def main():    
    import xyz          
    x=5;
    print x;
    func1() 
```

`test2.py`看起来像这样：

```
import test1

try:
    import first
    # invoke your files main method here and run the module
    test1.main()
except SyntaxError as e: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:37:01.760

你可能想看看装饰器。[了解 Python 装饰器](https://stackoverflow.com/questions/739654/understanding-python-decorators)这里对它们进行了非常深入的描述。

```
#TEST1.py
from exception_catcher import exception_catcher
@exception_catcher
def testfun1(a,b,c):
    d = a+b+c
    return d

print testfun1('c','a','t')
print testfun1('c',5,'t') 
```

装饰器类

```
#exception_catcher.py
class exception_catcher(object):
def __init__(self,f):
    self.fun = f

def __call__(self,*args,**kwargs):
    try:
        return self.fun(*args,**kwargs)
    except:
        return "THERE WAS AN EXCEPTION" 
```

命令行

```
>> python TEST1.py
cat
THERE WAS AN EXCEPTION 
```

希望有帮助。

# javascript - 谷歌地图地址而不是 LatLng 地理编码

> ID：13350070
> 
> 赞同：2
> 
> 时间：2012-11-12T19:20:02.333
> 
> 标签：javascript, google-maps-api-3, asp-classic, latitude-longitude

我花了几个小时看这个，找不到我想要的解决方案。我知道我错过了一些东西，但可以通过一点帮助来做。

本质上，我有一个带有记录集保存地址的经典 ASP 页面。我想将这些地址拉到页面中（带有重复区域）。完成那一点，并获得谷歌期望的字符串和正确的信息。

```
<script>var map_locations = [{"lat":52.954145,"lng":-4.101083,"title":"Nice House in Wales","street":"Prenteg, Porthmadog, LL49 9SR","price":"55,500"}]</script> 
```

但是，我想用以下内容替换“lat”等：

```
<script>var map_locations = [{"address":"<%=(rsLocations.Fields.Item("locPostCode").Value)%>","title":"Nice house in Wales","street":"Prenteg, Porthmadog, LL49 9SR","price":"55,500"}]</script> 
```

*   我不持有地址的纬度/经度
*   我已经浏览了 Google 关于 GeoCoding 的 API 文档。找到了一些有用的东西，但无法弄清楚如何将我的“邮政编码”“绑定”到我的 JS 文件内的地址函数中。（链接：[https](https://developers.google.com/maps/documentation/javascript/geocoding) ://developers.google.com/maps/documentation/javascript/geocoding ）。

这是谷歌根据上面的链接建议我做的事情。 **谷歌地理编码**

```
var geocoder;
var map;
function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(-34.397, 150.644);
var mapOptions = {
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
}

function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
});
}

<body onload="initialize()">
<div id="map_canvas" style="width: 320px; height: 480px;"></div>
<div>
<input id="address" type="textbox" value="Sydney, NSW">
<input type="button" value="Encode" onclick="codeAddress()">
</div>
</body> 
```

现在，Google 的文档使用“地址”的输入变量，因此您可以将其与以下内容一起使用：

```
var address = document.getElementById("address").value; 
```

我的问题是，如何让记录集绑定成为地址？ASP 和 JS 文件不能很好地混合，并且不确定如何将其放入地址中以使地理编码正常工作。

如果我通过 Lat/Lngs 发送，我的 JS 文件 (global.js) 包含以下内容，它为用户提供了样式精美的标记和信息框以与之交互。

**处理编写 Google 地图内容的 JS 文件**

```
var map;
function initializePropertiesMap() {
if($('#map_canvas').length == 0)
    return;
var myLatlng = new google.maps.LatLng(52.954145,-4.101083);
var myOptions = {
    zoom: 8,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}
var infowindow = new google.maps.InfoWindow();
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
$.each(map_locations, function(key, value) { 
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(value['lat'], value['lng']),
        map: map,
        icon: 'css/images/marker.png',
        scrollwheel: false,
        streetViewControl:true,
        title: value['title']
    });

    var link = "link";
    google.maps.event.addListener( marker, 'click', function() {
        // Setting the content of the InfoWindow
        var content = '<div id="info" class="span5"><div class="row">' + '<div     class="span2"><img src="css/images/houses/house_'+(key+1)+'.jpg" class="thumbnail" style="width:135px"/></div>' + '<div class="span3"><h3>' + value['title'] + '</h3><h6>' + value['street'] + '</h6>' + '<strong>&pound;' + value['price'] + '</strong>' + '<p><a href="listing-detail.asp">Read More >></a></p>' + '</div></div></div>';
        infowindow.setContent(content );
        infowindow.open(map, marker);
    });

});

} 
```

对此进行了调整后，我无法使其正常工作，并想知道是否有人对我有任何建议？

谢谢尼克

**更新**

只是想我会提到我已经尝试过这个：

```
var address = <%=rsLocations.Fields.Item("locPostcode").value%>; 
```

这显然不会作为 JS 文件错误起作用。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-12T20:09:03.450

This [answer](https://stackoverflow.com/questions/13278368/google-map-info-window-multiple-addresses-via-xml/13279095#13279095) to a similar question about geocoding addresses from XML可能会有所帮助。

> 您对地理编码器的异步性质有疑问，如果您添加许多地址，您将遇到地理编码器配额/速率限制的问题（特别是因为您的代码不查看地理编码器的返回状态）。
> 
> 最简单的解决方案是使用函数闭包将地理编码器的调用与返回的结果相关联

如果您有这些点的纬度和经度，请将其存储在您的数据库中并使用它来显示您的点。虽然您可以在页面加载时使用（异步）地理编码器对地址进行地理编码，但如果您有超过 10 个地址，您将遇到地理编码器配额/速率限制。 [这篇关于地理编码策略的文章](https://developers.google.com/maps/articles/geocodestrat)可能有助于做到这一点。

# java - jsoup 在输入新数据但在编辑时无法清理 HTML 工作正常

> ID：13350073
> 
> 赞同：0
> 
> 时间：2012-11-12T19:20:16.750
> 
> 标签：java, jsoup

我正在使用 jsoup 清理用户输入的 html 代码（通常：用户忘记关闭标签）。它对新条目工作得很好，但在编辑以前的条目时没有做任何事情（已经被 jsoup 清理）。这是代码：

```
public void on_newMyData(Dictionary d, Attributes a, Transaction t) throws LogicException {
  sanitizeHTMLInput(d,a,t);
}
public void on_editMyData(Dictionary d, Attributes a, Transaction t) throws LogicException {
  sanitizeHTMLInput(d,a,t);
}
private void sanitizeHTMLInput(Dictionary d, Attributes a, Transaction t) throws LogicException {
  try {
    Object unsafe = a.getAttribute("answer");
    String safe = Jsoup.clean(String.valueOf(unsafe), Whitelist.relaxed());
    d.put("answer",safe);       
  } catch (AttributeNotFoundException e) {
    //if the answer is empty, no sanitizing is needed
  }
} 
```

我做错了什么还是有我没有发现的限制？

# html - 链接未显示在标签内

> ID：13350075
> 
> 赞同：2
> 
> 时间：2012-11-12T19:20:26.083
> 
> 标签：html, css, html-table

我试图在 中包含一个链接`<td></td>`，但它根本没有显示。

```
<tr align=left>
    <td><span style="font-weight:bold;">Website</span></td>                       
    <td><a href="http://www.zionsb.org"></a></td>
</tr> 
```

**CSS**

```
td {  
    text-transform: none;
    line-height: 115%;
    vertical-align: middle; 
    padding: 5px 0 5px 5px;        
} 
```

请问我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:21:11.667

您的链接中必须包含一些内容才能使其可见。例如 ：

```
<a href="http://www.zionsb.org">some text</a> 
```

* * *

如果您没有要显示的内容，您也可以将 click 事件绑定到单元格：

```
<td id=A style="cursor:pointer"></td>

<script>
window.onload = function(){
  document.getElementById('A').onclick=function(){window.location="http://www.zionsb.org"};
};
</script> 
```

但这并不能单独使链接可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T19:25:06.260

您已成功创建链接，但现在需要说明链接的目的！您之间：

```
<a> and </a> 
```

标签，你必须把你想被看到的话。例如：

```
<a href="http://www.zionsb.org">Text you want to be seen</a> 
```

# mongodb - 按两个属性的平均值排序

> ID：13350076
> 
> 赞同：2
> 
> 时间：2012-11-12T19:20:28.057
> 
> 标签：mongodb, mongoid

我需要按两个属性的平均值对查询进行排序，例如`Story.scoped.order_by('(importance + points)/2')`.

正如我在[MongoDB](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bsort%28%29%7D%7D)和[Origin 文档](http://mongoid.org/en/origin/docs/options.html)中看到的，这似乎是不可能的。我是否需要使用平均结果创建第三个属性并按其排序？

```
| Story           | points | importance
| first expected  | 1      | 1
| third expected  | 5      | 1
| second expected | 1      | 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:45:25.660

您可以使用[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来执行此操作。我不知道 Ruby/mongoid，但这是你在 JavaScript 中的做法：

```
db.coll.aggregate([
    { $project: { 
        Story: 1, 
        points: 1, 
        importance: 1, 
        avg: { $divide: [{ $add: ['$points', '$importance']}, 2]}}},
    { $sort: { avg: 1}}
    ], function(err, result){
        console.log(result);
    }
); 
```

输出：

```
[ { _id: 50a14fcb9f0d79f4de752828,
    Story: 'first expected',
    points: 1,
    importance: 1,
    avg: 1 },
  { _id: 50a14fe59f0d79f4de75282a,
    Story: 'second expected',
    points: 1,
    importance: 3,
    avg: 2 },
  { _id: 50a14fd99f0d79f4de752829,
    Story: 'third expected',
    points: 5,
    importance: 1,
    avg: 3 } ] 
```

# objective-c - IOS设置属性语法问题

> ID：13350078
> 
> 赞同：0
> 
> 时间：2012-11-12T19:20:54.610
> 
> 标签：objective-c, ios, syntax, properties

有人可以向我解释为什么这有效：

```
SpecialView *view = [[SpecialView alloc]initWithFrame:CGRectMake(0, 0, 320, 164)];
self.specialView = view;
self.tableView.tableHeaderView = self.specialView; 
```

这不会：

```
self.specialView = [[SpecialView alloc]initWithFrame:CGRectMake(0, 0, 320, 164)];
self.tableView.tableHeaderView = self.specialView; 
```

非常感谢 ！

编辑 1： .h 中的属性类似于：

```
@property (weak, nonatomic) SpecialView *specialView; 
```

当我的意思是它不起作用时，我的意思是最后 self.specialView 为零。（是的，我正在使用 ARC）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:31:09.763

您的属性定义为`weak`。这意味着不保留引用。这也意味着当对象被释放时，该属性将被设置为`nil`.

在第一段代码中，您将`SpecialView`实例分配给本地（强）变量。这会使对象保持一段时间。然后将实例分配给（弱）属性。这没有任何帮助。但是随后您将 weak 属性分配给表视图的标题。`view`在局部变量超出范围后，正是这个额外的引用使实例保持活动状态。但是，如果您要为表分配另一个标题或者如果表视图消失了，则特殊视图将被释放并解除分配，并且该属性将被重置为零。

在第二段代码中，您没有局部变量。所以对象立即被释放和释放，属性被重置为`nil`.

很可能您的属性需要定义为`strong`而不是`weak`.

# expressionengine - 如何使用 JS 更新 store_product_price

> ID：13350079
> 
> 赞同：0
> 
> 时间：2012-11-12T19:20:59.513
> 
> 标签：expressionengine, expresso-store

好的，我有一张照片缩略图网格，这些照片缩略图通过商店中设置的单个产品进行销售。该产品有两种尺寸，小号和大号。大号有一个修饰符，可以在选择时提高价格。

我正在使用 JS 删除修饰符组，然后将其克隆到用户选择的其中一个缩略图中，从而有效地将其转换为页面上的单个产品。

我的问题是，当我删除并克隆修饰符时，价格与最后一个产品添加到购物车时选择的价格保持不变。

所以和例子：

用户选择带有大修饰符 (+$20) 的 thummb#1 并将其添加到购物车 (AJAX)。然后，当她选择拇指 #5 时，修改器设置回小，但价格仍然反映大的。

由于这一切都是通过 JS 完成的，无需重新加载页面，我该如何重置 store_product_price？

```
ajax : function(){
if( !$( '#product_form' ).size() ) return;

$( '#product_form' ).submit( function(){
    $( '.card .add_to_cart' ).val( 'Processing...' );
    var url = $( this ).attr( 'action' );
    var data = $( this ).serialize();
    $.post( url, data, function(){
        $( '#sidebar-cart' ).load( '/store/cart/' );
        $( '.card .add_to_cart' ).val( 'Add to Cart' );
        $( '.selected' ).removeClass( 'selected' );
        $( '.not-selected' ).removeClass( 'not-selected' );
   } );
        return false;
} );
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:55:45.513

我不完全确定“删除并克隆修饰符”是什么意思-您是否为每个缩略图创建了一个新的小/大下拉列表？在那种情况下，它如何知道与表单一起提交哪一个？

为每个缩略图创建一个新的产品表单可能更容易，然后根据需要使用 JS 隐藏/显示修饰符。

无论如何，如果你想坚持现状，你可以看看`themes/third_party/store/store.js`这个`store_product_price`类是如何实现的（我假设你已经将这个`store_product_price`类添加到你的价格中，尽管你没有提到它）。如果您`$debug = 1`在`index.php`then 中设置，它将默认加载未缩小版本的 javascript，使您更容易单步执行并查看卡在哪里。

# jquery - 手风琴 jquery struts2 可折叠

> ID：13350080
> 
> 赞同：0
> 
> 时间：2012-11-12T19:21:04.240
> 
> 标签：jquery, struts2, struts2-jquery

选择手风琴项目时，使用 sj:accordion 是否可能不允许其他手风琴项目折叠？

# javascript - 无法让 three.js EffectComposer 工作

> ID：13350084
> 
> 赞同：3
> 
> 时间：2012-11-12T19:21:41.680
> 
> 标签：javascript, three.js

我想开始使用 EffectComposer 对我的渲染进行一些后处理，但我无法获得最基本的设置来渲染到屏幕上。它只是保持空白。我一定在看什么。有人有想法吗？

```
<!doctype html>
<html>
  <head>
    <title>game</title>
    <style type="text/css">
      html, body {        
        margin: 0px;
        width: 100%;
        height: 100%;
      }

      canvas {
        display: block;
      }
    </style>    
  </head>
  <body>
    <canvas id="viewport"></canvas>
    <script type="text/javascript" src="three.js"></script>
    <script type="text/javascript" src="CopyShader.js"></script>
    <script type="text/javascript" src="ShaderPass.js"></script>
    <script type="text/javascript" src="EffectComposer.js"></script>
    <script type="text/javascript" src="RenderPass.js"></script>
    <script type="text/javascript" src="MaskPass.js"></script>
    <script type="text/javascript">
      var width = document.body.clientWidth;
      var height = document.body.clientHeight;      
      var canvas = document.querySelector('#viewport');
      var renderer = new THREE.WebGLRenderer({canvas: canvas});
      renderer.setSize(width, height);

      var scene = new THREE.Scene();

      var cube = new THREE.Mesh(
        new THREE.CubeGeometry(30, 30, 30), 
        new THREE.MeshPhongMaterial({color: 0xFF0000}));
      scene.add(cube);

      var camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
      camera.position = new THREE.Vector3(60, 60, 60);
      camera.lookAt(cube.position);
      camera.updateMatrix();
      scene.add(camera);      

      var pointLight = new THREE.PointLight(0xFFFFFF);
      pointLight.position = new THREE.Vector3(100, 80, 20);
      scene.add(pointLight);

      var renderPass = new THREE.RenderPass(scene, camera);
      renderPass.renderToScreen = true;      
      var composer = new THREE.EffectComposer(renderer);
      composer.addPass(renderPass);
      renderer.clear();
      composer.render();

      //renderer.render(scene, camera);
    </script>
  </body>
</html> 
```

如果我取消注释最后一行，我会在屏幕上看到一些东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T14:30:41.263

首先，`EffectComposer`它不是库的一部分——它是示例的一部分。所以官方不支持。

所以是的，你必须“知道它是如何在幕后工作的”。

您可以通过添加额外的这样来解决您的问题`CopyPass`：

```
var renderPass = new THREE.RenderPass( scene, camera );

var copyPass = new THREE.ShaderPass( THREE.CopyShader );
copyPass.renderToScreen = true;

var composer = new THREE.EffectComposer( renderer );
composer.addPass( renderPass );
composer.addPass( copyPass );

composer.render( 0.05 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T13:09:17.007

我也遇到了 EffectComposer 的一些问题。

但我认为这纯粹归结为不知道它是如何在幕后工作的。

你可以解决你的问题（作为一个黑客）

如果你添加

```
var effectFilm = new THREE.FilmPass( 0, 0, 0, false );
effectFilm.renderToScreen = true;
composer.addPass( effectFilm ); 
```

# matlab - 检查线性规划是否存在问题。合法的

> ID：13350085
> 
> 赞同：0
> 
> 时间：2012-11-12T19:21:42.010
> 
> 标签：matlab

我有 [http://www.mathworks.de/de/help/optim/ug/linprog.html](http://www.mathworks.de/de/help/optim/ug/linprog.html)意义上的线性规划问题 ，也想使用 linprog 来解决它们。我只是想知道是否可以预先检查 lp 是否合法。

例如，如果我们有一个像 12x_1 + 3x_2 <= 40 这样的不等式并且限制 x_1 >= 3, x_2 >= 2 那么等式就不能被满足并且 lp 是不合法的。

有没有一种快速的预编码方式来做到这一点，还是我需要自己编码？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:46:06.367

如果您想预先检查 LP 是否可解，您可能可以运行 linprog 并稍微调整一下选项，例如让它只进行 1 次迭代。这会让您更快地了解哪些可以解决，但当然如果您的目标是减少总计算时间，这将产生不利影响。

# c# - 从 VARBINARY(MAX) 列打印 Word 文档

> ID：13350086
> 
> 赞同：0
> 
> 时间：2012-11-12T19:21:46.933
> 
> 标签：c#, sql-server, database, printing, binaryfiles

我创建了一个动态表单站点，例如 Google Form，其中一个要求是在每次调查中我可以附加一个 Word 文件，该文件应在打印调查表后打印。

那么，从数据库下载文件后，我需要做什么才能打印它？

示例代码：

```
private void downloadFile()
{
    string item = Request.Form["__EVENTARGUMENT"].ToString();
    SQL sql_files = new SQL(ConnectionStringName.FilesSqlServer);

    sql_files.ExecuteStoreProcedure(SqlStoreProcedureNames.spFileStorage, SqlOutputType.DataReader, new SQLParameter[]{
        new SQLParameter(ParameterDirection.Input, SqlDbType.VarChar, "@IdRespuesta", Session["id_respuesta"].ToString()),
        new SQLParameter(ParameterDirection.Input, SqlDbType.VarChar, "@ItemID", item),
        new SQLParameter(ParameterDirection.Output, SqlDbType.VarChar, "@SpError")
    });

    if (sql_files.Reader.HasRows)
    {
        sql_files.Reader.Read();

        Response.ClearContent();
        Response.AddHeader("Content-Disposition", "attachment; filename=" + sql_files.Reader["name"].ToString());

        Response.ContentType = sql_files.Reader["contenttype"].ToString();
        byte[] fileBytes = (byte[])sql_files.Reader["bytes"];

        Response.AddHeader("Content-Length", fileBytes.Length.ToString());
        Response.BinaryWrite(fileBytes);
        Response.Flush();
        Response.End();
    }
    sql_files.Reader.Close();
} 
```

我使用此代码下载文件，因此我需要更改它以便打印 Word 文档。

问候，克拉克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:44:36.410

您当前的代码将文件下载到客户端计算机。您无法控制打印。这一切都取决于客户。你真的想在打印机上打印它还是你的意思不同？
**编辑：**
无法向用户显示打印对话框，因为它是特定于浏览器的。
您可以尝试的一件事是为 Chrome 18+ 使用`--kiosk`和`--kiosk-printing`前缀。

**请注意**，您不能在 Response.End() 之后运行任何代码而不引起用户的请求。如果要在 Response.End() 之后运行任何代码，则必须使用 IFrame 或 WebHandler。

# python - 在 Jinja2 模板中循环列表

> ID：13350091
> 
> 赞同：1
> 
> 时间：2012-11-12T19:22:12.503
> 
> 标签：python, html, jinja2

我正在尝试使用 Flask 框架制作一个简单的博客网站。我博客中的每个条目都有标题、文本和评论。标题和文本存储在名为 entries 的表中，而注释存储在名为 comments 的表中，该表使用外键将注释链接到相应的条目。

我现在遇到的问题是我想在我的 html 文件中显示评论。要做的是，当我处于 for 循环中时，我想在我的 html 文件中调用一个名为 show_comments 的 python 函数。python 函数如下所示：

```
@app.route('/comments/<entryid>')
def show_comments(entryid):
    db = get_db()
    curId = db.execute('select id, comment from comments where entry_id=entryid order by     id desc')
    comments = [dict(id=row[0], comment=row[1]) for row in curId.fetchall()]
    return render_template('show_entries.html', comments=comments) 
```

我的模板如下所示：

```
% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <form action="{{ url_for('add_entry') }}" method=post class=add-entry>
      <dl>
    <dt>Title:
    <dd><input type=text size=30 name=title>
    <dt>Text:
    <dd><textarea name=text rows=5 cols=40></textarea>  
    <dd><input type=submit value=Share>
  </dl>
</form>
  {% endif %}
  <ul class=entries>
  {% for entry in entries %}
    <li><h2>{{ entry.title }}</h2>{{ entry.text }}
{{ url_for('show_comments', entryid=entry.id) }}
<ul class=comments>
{% for acomment in comments %}
<li>{{ acomment.comment }}
</li>
</br>
</ul>
{% endfor %}
{% if session.logged_in %}
<form action="{{ url_for('add_comment', key=entry.id) }}" method=post class=add-entry>
<dl>
    <dt>Comment:
    <dd><textarea name=comment rows=2 cols=40></textarea>
    <dd><input type=submit value=Comment>
  </dl>
</form>
{% endif %}
  {% else %}
    <li><em>Unbelievable.  No entries here so far</em>
  {% endfor %}
  </ul>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:50:59.850

您还没有真正告诉我们您的问题是什么，所以我不知道这是否会有所帮助。但我会在这里指出三个具体错误：

第一个是您将评论放在无序列表（`<ul>`标签）中，但您将结束标签 ( `</ul>`) 放在循环内部而不是循环外部。

`</br>`应该写`<br />`，但实际上那个标签一开始就不属于那里。

其次，您的 HTML 已损坏。HTML 属性（标签中的部分，如`type=submit`）应该在值周围加上引号。例如，它应该看起来像`type="submit"`. 大多数浏览器在涉及到这样的事情时都很宽容，但最好不要指望它并编写正确的 HTML。

# ruby-on-rails-3 - capistrano rails 3 git 错误 - 致命：不是 git 存储库（或任何父目录）：.git

> ID：13350092
> 
> 赞同：7
> 
> 时间：2012-11-12T19:22:17.553
> 
> 标签：ruby-on-rails-3, git, capistrano

我不使用 git，但是在升级到 ruby​​ 1.9.3 和 rails 3.017 并使用 cap 进行部署后，我到处都遇到了这些错误：

```
fatal: Not a git repository (or any of the parent directories): .git 
```

他们似乎没有破坏任何东西，但他们很烦人。我不使用 git，如何让这些消失？

更多信息（这是我看到的）

```
$ cap pirmtlddemo deploy:long  
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
* executing `pirmtlddemo'
* executing `deploy:long'
** transaction: start
* executing `deploy:update_code' 
```

请注意，我在尝试运行 localy (rails s) 时遇到了类似的警告，我通过执行“git init”摆脱了这些警告

谢谢乔尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:52:32.587

好的，我想通了，看起来包括 clear、gvis、jquery-rails、vestal_versions 在内的几个 gem 已经包含在他们的 gemspec 对 git 的依赖中，请参阅[https://github.com/thoughtbot/clearance/blob/master/clearance .gemspec#L17](https://github.com/thoughtbot/clearance/blob/master/clearance.gemspec#L17)。我不确定他们为什么这样做，似乎是不必要的依赖......

# mp3 - mp3 编码器上的 pcm 输入

> ID：13350095
> 
> 赞同：0
> 
> 时间：2012-11-12T19:22:22.873
> 
> 标签：mp3, codec, pcm, wave, encoder

有谁知道如何在 mp3 编码器中对 PCM 输入进行分区？我已经知道每个输入都是原始波形的一小部分，在编码器内部它被分成 32 个更小的部分等等，但是这个初始输入的大小是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:25:44.067

与其他感知音频编解码器一样，mp3 以块的形式处理声音。mp3 块大小为 1152 个样本。如果采样频率为 44100 Hz，则接近 20 毫秒，这是人类听觉系统的分辨率。

这类问题的好地方是[Hydrogen Audio](http://www.hydrogenaudio.org/forums/index.php?showforum=55)。

# c++ - C 指针在递归中恢复到旧地址

> ID：13350096
> 
> 赞同：2
> 
> 时间：2012-11-12T19:22:32.063
> 
> 标签：c++, recursion, tail-recursion

有 3 个链表，其中 2 个（headX 和 headY）按降序给出，函数的工作是将它们排序为一个列表（headZ）。

出于某种原因，该算法工作正常，但是当它完成并通过递归返回时，3 个指针在它们通过递归“返回”时恢复到它们的旧值。

```
void SortedMergeRecur(Node* headX, Node* headY, Node* headZ)
{
    if (headX == NULL && headY == NULL)
        return;

else if (headX == NULL && headY != NULL)
{
    if (headZ == 0)
    {
        headZ = headY;
        headY = headY->link;
        headZ->link = NULL;
    }
    else
    {
        headZ->link = headY;
        headY = headY->link;
        headZ = headZ->link;
        headZ->link = NULL;
    }

    SortedMergeRecur(headX, headY, headZ);
}

else if (headX != NULL && headY == NULL)
{
    if (headZ == 0)
    {
        headZ = headX;
        headX = headX->link;
        headZ->link = NULL;
    }
    else
    {
        headZ->link = headX;
        headX = headX->link;
        headZ = headZ->link;
        headZ->link = NULL;
    }

    SortedMergeRecur(headX, headY, headZ);
}

if (headX != NULL && headY != NULL)
{
    if (headX->data > headY->data)
    {
        if (headZ == NULL)
        {
            headZ = headY;
            headY = headY->link;
            headZ->link = NULL;
        }
        else
        {
            headZ->link = headY;
            headY = headY->link;
            headZ = headZ->link;
            headZ->link = NULL;
        }
    }
    else
    {
        if (headZ == NULL)
        {
            headZ = headX;
            headX = headX->link;
            headZ->link = NULL;
        }
        else
        {
            headZ->link = headX;
            headX = headX->link;
            headZ = headZ->link;
            headZ->link = NULL;
        }
    }
    SortedMergeRecur(headX, headY, headZ);
}
} 
```

我知道这部分内容可以简化（例如，如果 headX 或 headY 为空，则附加整个列表）但我这样写是因为我认为它可能会解决问题，但它没有......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:26:47.310

指针按值复制的方式与变量相同：

```
void test(int x)
{
    x = 5;
}
int y = 3;
test(y);
//y is 3 
```

相同的想法：

```
void test(int* x, int* y)
{
    x = y;
}
int a = 5; int b = 6;
int* x = &a;
int* y = &b;
test(x, y);
//x is still &a and y is still &b 
```

如果要更改指针，则必须将指针传递给指针：

```
void test(int** x, int *y)
{
    *x = y;
}
int a = 5; int b = 6;
int* x = &a;
int* y = &b;
test(&x, y);
//x is now &b and y is still &b
//(note that a and b are still 5 and 6, respectively) 
```

由于您使用的是 C++，另一种选择是通过引用传递：

```
void test(int*& x, int *y)
{
    x = y;
}
int a = 5; int b = 6;
int* x = &a;
int* y = &b;
test(x, y);
//x is now &b and y is still &b
//(note that a and b are still 5 and 6, respectively) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:27:11.773

如果要修改参数并将这些更改保留在函数之外，则需要通过引用传递它们 - 例如

```
void SortedMergeRecur(Node*& headX, Node* headY, Node* headZ)
//                         |      
//                 pass by reference 
```

如果您`headX`在函数内部进行修改，则更改将在函数返回后持续存在。更改`headY`和`headZ`不会更改，因为它们是按值传递的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:27:55.637

请记住，在 C 中，**参数总是按值传递**，而不是按引用传递。

当您将指针传递给类似的函数时

```
 void SortedMergeRecur(Node* headX, Node* headY, Node* headZ) 
```

如果您更改（即设置）在调用中使用的实际指针参数`headX`的主体内的正式指针参数`SortedMergeRecur`不受影响。

如果您想在函数体中影响它们以便将它们的设置传播给调用者，请声明指向指针的形式指针，例如

```
 void SortedMergeRecur(Node** pheadX, Node** pheadY, Node** pheadZ) 
```

然后设置在体内：

```
 *pheadY = (*pheadY)->link; 
```

在 C++ 中，您可以通过引用传递形式参数`&`

# java - Spring Integration：使用 JMX 时自动装配队列失败

> ID：13350099
> 
> 赞同：0
> 
> 时间：2012-11-12T19:22:41.363
> 
> 标签：java, spring, jmx, spring-integration, spring-jmx

在我添加 JMX 导出命名空间处理程序*之前*，我可以在测试类中使用和自动装配两个`QueueChannel`实例。`@Autowired``@Qualifier`

 *我手头没有确切的配置（这是工作中的一个问题，现在让我忙得不亦乐乎！），但我正在使用这些元素：

```
<int-jmx:mbean-export default-domain="com.business" server="mbeanServer" />
<context:mbean-export />
<context:mbean-server /> 
```

当我定义了这三件事时，自动装配过程失败并抛出`NoSuchBeanException`. 但是，我可以看到有带有我的队列 ID 的 bean，因为我有一个在上下文中迭代所有 bean 的后处理器。

这是否与代理混淆`QueueChannel`s 的声明类型，防止按类型自动装配工作有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:51:07.740

您需要使用接口而不是具体类来自动装配，因为 JMX 导出将通道包装在代理中。使用`PollableChannel`for`QueueChannel`或`SubscribableChannel`for `DirectChannel`。

正是出于这个原因，使用接口而不是具体类进行编码总是一种好习惯。*

# javascript - 谷歌地图，多个物理地址，多个指针图标，同一个图标一直显示

> ID：13350103
> 
> 赞同：1
> 
> 时间：2012-11-12T19:23:02.663
> 
> 标签：javascript, google-maps, asynchronous

我需要 Google 地图方面的帮助。我想创建一个可以使用多个指针显示多个地址的地图。问题是所有地址都显示最后一个地址的指针图标。它可能与异步 geocoder.geocode 有关，但我是 JS 初学者，我无法解决这个问题。

有人可以帮忙吗？谢谢。

```
<html> 
<head> 
    <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
</head> 
<body>
<div id="map" style="width: 500px; height: 500px;"></div>

<script type="text/javascript">

var locations = [
    ['Place A', '2430 N 1060 E, North Logan, UT', 'A'],
    ['Place B', '495 W Jackson Street, Knoxville, IA', 'B'],
    ['Place C', '1900 N Flagler Drive, West Palm Beach, FL', 'C']
]; 

var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 0,
    center: new google.maps.LatLng(-33.92, 151.25),
    mapTypeId: google.maps.MapTypeId.ROADMAP
});

var infowindow = new google.maps.InfoWindow();

var marker, i;

for (i = 0; i < locations.length; i++) {  

    var image = new google.maps.MarkerImage('http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + locations[i][2] + '|FF0000|000000',
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34)
    );

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 
        'address': locations[i][1]
    }, function(results, status){

        if (status == google.maps.GeocoderStatus.OK) {

             marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map, 
                icon: image
            });
        } 
    });

}
</script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:36:19.817

试试这个代码：

```
var marker, i;

for (i = 0; i < locations.length; i++) {  
  marker = createMarker(locations[i]);
}
function createMarker(location) {
  var image = new google.maps.MarkerImage('http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=' + location[2] + '|FF0000|000000',
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34)
    );

    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 
        'address': location[1]
    }, function(results, status){

        if (status == google.maps.GeocoderStatus.OK) {

             marker = new google.maps.Marker({
                position: results[0].geometry.location,
                map: map, 
                icon: image
            });
        } 
    });
} 
```

# java - java从jar文件中读取文件以进行ftp上传

> ID：13350104
> 
> 赞同：0
> 
> 时间：2012-11-12T19:23:02.380
> 
> 标签：java, ftp, fileinputstream

我正在尝试使用 apache 公共库通过 ftp 上传文件。我想将这些文件保留在 jar 中，因为这些文件将保持不变并且需要多次上传到不同的主机上。

我正在尝试以下操作：

```
 public void doCGIRecovery() throws IOException{
    System.out.println(getClass().getResource("/cgi/example").getPath());
    FileInputStream file = new FileInputStream(getClass().getResource("/cgi/example").getPath());
    f.storeFile("./", file);
} 
```

使用 eclipse 这可以工作，并且 sysout 给了我：

```
/Users/user/Documents/workspace/example-Project/bin/com/example/java/example/business/cgi/example 
```

但是在编译成 jar 之后，它会返回以下内容：

```
file:/Users/user/Desktop/example.jar!/com/example/java/example/business/cgi/example 
```

我得到（没有这样的文件或目录）。

那是怎么来的？“！”在哪里？example.jar 之后是从哪里来的？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:12:19.020

不要担心弄乱路径，使用 getClass().getResourceAsStream() 代替。

# vbscript - VBScript 可以仅基于分隔符的第一个实例来分隔字符串吗？

> ID：13350106
> 
> 赞同：0
> 
> 时间：2012-11-12T19:23:17.263
> 
> 标签：vbscript

我知道我可以通过给出分隔符将一个字符串拆分为多个子字符串。我知道我也可以根据字符位置选择一个子字符串，如下所示：

```
sAddressOverflow = Right(sAddressLine1,5) 
```

我想做的是拆分这样的输入字符串：

> “南大街 123 号公寓 24B”

但我只想得到两个子字符串，它们根据第 25 个字符左侧的第一个空格进行拆分。因此，使用上述输入的我想要的输出将是：

> Substring1 = "123 South Main Street" Substring2 = "Apt. 24B"

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T12:02:06.117

正则表达式的优点是您可以独立于使用它的位置配置模式，并且它们具有很强的适应性，因此我更喜欢使用正则表达式进行字符串操作。不幸的是，Ansgar Wiechers 的模式并不完全符合您的要求。这是一个：

```
myString = "1234 6789A 234567 9B12 4567 890"
Set re = new RegExp
re.Pattern = "^(.{1,25}) (.*)$"
Set matches = re.Execute(myString)

wscript.echo "leftpart: " & matches(0).submatches(0)
wscript.echo "rightpart: " & matches(0).submatches(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T22:34:00.297

没有这样的内置功能，但你可能想试试这个，

```
add = "123 South Main Street Apt. 24B"
valid = Left(add,25)
arr = Split(valid)
char= InStrRev(add,arr(UBound(arr)))-1
address1 = Left(add,char)
address2= Right(add,Len(add)-char)
Wscript.echo address1
Wscript.echo address2 
```

这可能不是完美的方法，但它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:37:51.467

您可以使用正则表达式执行此操作，但您需要一个明确定义的格式：

```
addr = "123 South Main Street Apt. 24B"

Set re = New RegExp
re.Pattern    = "^(\d+ .*) +(apt\. +\d+(.*?))$"
re.IgnoreCase = True

Set m = re.Execute(addr)
If m.Count > 0 Then
  WScript.Echo m(0).SubMatches(0)
  WScript.Echo m(0).SubMatches(1)
End If 
```

“定义明确的格式”是指您需要在表达式中使用一些“锚点”（或固定点）来识别字符串中的部分。在示例中，锚点是子字符串“apt”。后跟一位或多位数字。

# ios - 块执行后变量返回 null

> ID：13350108
> 
> 赞同：0
> 
> 时间：2012-11-12T19:23:19.820
> 
> 标签：ios, xcode, multithreading, null, objective-c-blocks

我正在调度一个队列以在单独的线程上下载一些 flickr 照片（在 viewWillAppear 中）。当我记录块内数组的内容时，它完美地显示了一切：

```
 dispatch_queue_t photoDowonload=dispatch_queue_create("photoDownload", NULL);
dispatch_async(photoDowonload, ^{

    NSArray *photoList=[FlickrFetcher topPlaces]; //downloads flickr data
    self.listOfCities=photoList;
    NSLog(@"inside block: %@", self.listOfCities); //shows contents

}); 
```

但是当我尝试记录在块外的块内设置的数组时，它返回null。

```
 dispatch_queue_t photoDowonload=dispatch_queue_create("photoDownload", NULL);
dispatch_async(photoDowonload, ^{

    NSArray *photoList=[FlickrFetcher topPlaces];
    self.listOfCities=photoList;

});

    NSLog(@"after block: %@", self.listOfCities); //returns null 
```

这里有什么问题？self.listOfCities 设置为 NSArray 属性，因此一旦在块中设置它，它应该可以在其外部访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:25:26.783

块中的代码是异步运行的。因此，块之后的代码在块中的代码有机会运行（或者至少肯定完成）之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:34:33.483

我刚刚开始学习 Objective-c，我可能会对某些问题视而不见，但我想知道 _dispatch_asynch_ 对执行上面显示的代码块有什么影响。文档说

> dispatch_async() 和 dispatch_sync() 函数调度块以在调度框架内并发执行。

可能在执行代码块之前调用了 NSLog 并且变量尚未初始化。

@rmaddy 你更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:38:48.250

好的，我想通了。我的目标是使用块返回的信息更新 tableView。

块执行正在更改数组变量，但未显示该更改。

诀窍是检测数组的 getter 中的这种变化，如下所示：

```
-(void) setListOfCities:(NSArray *)listOfCities
{
    if (_listOfCities!=listOfCities)
    {
        _listOfCities=listOfCities;
        [self.tableView reloadData]; //<-- reloads table after change
    }
} 
```

# javascript - 将 HTML 选择标签发送到服务器

> ID：13350110
> 
> 赞同：0
> 
> 时间：2012-11-12T19:23:26.017
> 
> 标签：javascript, jquery, python, forms, websocket

在用户选择值后我有一个 html 选择标记我想将该值发送到服务器：

```
 <form id ="eventForm" action="/" method="post">

         <select name="aaaa"> 

            <option value="abc"> ABC</option>
            <option value="def"> def</option>
            <option value="hij"> hij</option>   
            </select>

        <input type="submit" id="open" value="Submit Query" />
    </form> 
```

发送它的 javascript 是这样的：

```
$.post("/", $("#eventForm").serialize()); 
```

但是服务器根本没有收到它。当我将表单中的数据作为输入类型文本发送时，这确实有效。因此，它为什么不在选择标签中发送选定的数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:47:15.140

由于属性命名错误，Web 服务器模块没有选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T16:00:24.833

好吧，我认为当禁用选定的选项（HTML）时，它根本没有发送，并且被忽略为参数...我建议`try-catch`在服务器端构建一种机制...

PS：祝你的项目好运！

# c++ - 函数模板只接受双向迭代器或指针

> ID：13350112
> 
> 赞同：4
> 
> 时间：2012-11-12T19:23:44.320
> 
> 标签：c++, templates, stl, iterator

我需要一个函数模板，它接受两个可能是指针的迭代器。如果这两个参数是 random_access 迭代器，我希望返回类型是

`std::iterator<random_access_iterator_tag, ...>`类型

否则一个

`std::iterator<bidirectional_iterator_tag, ...>`类型。

如果参数既不是双向迭代器也不是指针，我还希望代码拒绝编译。我不能依赖第三方库，例如 Boost

你能帮我处理这个函数的签名，让它接受双向迭代器和指针，但不说 input_iterator、output_iterator、forward_iterators。

我能想到的一个部分解决方案如下

```
template<class T>
T foo( T iter1, T iter2) {
  const T tmp1 = reverse_iterator<T>(iter1);
  const T tmp2 = reverse_iterator<T>(iter2);
  // do something
} 
```

这个想法是，如果它不是双向的，编译器不会让我从中构造一个 reverse_iterator。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:09:51.707

这是一个`enable_if`基于迭代器标签的示例。如果给定的 T 没有`iterator_category`typedef 并且在重载决议期间不考虑重载，则替换失败。

由于您不能使用 C++11，请参阅参考页面[`enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)并[`is_same`](http://en.cppreference.com/w/cpp/types/is_same)了解如何自己实现它。

```
#include <iterator>
#include <type_traits>
#include <iostream>
#include <vector>
#include <list>

template<typename T>
typename
std::enable_if<
    std::is_same<
        typename T::iterator_category,
        std::bidirectional_iterator_tag
    >::value,
    T
>::type
foo(T it)
{
    std::cout << "bidirectional\n";
    return it;
}

template<typename T>
typename
std::enable_if<
    std::is_same<
        typename T::iterator_category,
        std::random_access_iterator_tag
    >::value,
    T
>::type
foo(T it)
{
    std::cout << "random access\n";
    return it;
}

// specialization for pointers

template<typename T>
T* foo(T* it)
{
    std::cout << "pointer\n";
    return it;
}

int main()
{
    std::list<int>::iterator it1;
    std::vector<int>::iterator it2;
    int* it3;
    std::istream_iterator<int> it4;
    foo(it1);
    foo(it2);
    foo(it3);
    //foo(it4); // this one doesn't compile, it4 is an input iterator
} 
```

[活生生的例子](http://ideone.com/ffTBQR)。

根据@JonathanWakely 的评论，如果我们使用[std::iterator_traits](http://en.cppreference.com/w/cpp/iterator/iterator_traits) ，我们可以摆脱指针的专门化。然后该`typename T::iterator_category`部分变为

```
typename std::iterator_traits<T>::iterator_category 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:42:37.987

比以前的答案简单一点，不依赖于 std::enable_if：

```
namespace detail
{
    template<class T>
    T do_foo(T iter1, T iter2, std::random_access_iterator_tag t)
    {
        cout << "do_foo random_access" << endl;
        return iter1;
    }
    template<class T>
    T do_foo(T iter1, T iter2, std::bidirectional_iterator_tag t)
    {
        cout << "do_foo bidirectional" << endl;
        return iter1;
    }

}
template<class T>
void foo(T iter1, T iter2)
{
    typename std::iterator_traits<T>::iterator_category t;
    detail::do_foo(iter1, iter2, t);
}

int main (int argc, const char * argv[])
{
    std::vector<int> v;
    foo(v.begin(), v.end());
    std::list<int> l;
    foo(l.begin(), l.end());
    return 0;
} 
```

该解决方案还支持从 std::random_access_iterator_tag 或 std::bidirectional_iterator_tag 派生的其他 iterator_categories（应该有），而 std::same<> 检查严格的类别相等性。

# java - 从谷歌获取个人资料信息加上java错误

> ID：13350116
> 
> 赞同：3
> 
> 时间：2012-11-12T19:23:58.503
> 
> 标签：java, oauth, google-plus

我正在尝试验证并获取用户的个人资料数据，但出现以下错误，请提出建议。

```
// Generate the URL to which we will direct users
    String authorizeUrl = new GoogleAuthorizationRequestUrl(CLIENT_ID,
            CALLBACK_URL, SCOPE).build();
    System.out.println("Paste this url in your browser: " + authorizeUrl);

    // Wait for the authorization code
    System.out.println("Type the code you received here: ");
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    String authorizationCode = in.readLine();

    // Exchange for an access and refresh token
    GoogleAuthorizationCodeGrant authRequest = new GoogleAuthorizationCodeGrant(
            TRANSPORT, JSON_FACTORY, CLIENT_ID, CLIENT_SECRET,
            authorizationCode, CALLBACK_URL);
    authRequest.useBasicAuthorization = false;

    AccessTokenResponse authResponse = authRequest.execute();
    String accessToken = authResponse.accessToken;

    GoogleAccessProtectedResource requestInitializer = new GoogleAccessProtectedResource(
            accessToken, TRANSPORT, JSON_FACTORY, CLIENT_ID, CLIENT_SECRET,
            authResponse.refreshToken);

        // Set up the main Google+ class
    Plus plus = new Plus(TRANSPORT, requestInitializer,JSON_FACTORY);

    // Make a request to access your profile and display it to console
    Person profile = plus.people.get("me").execute();
    System.out.println("ID: " + profile.getId());
    System.out.println("Name: " + profile.getDisplayName());
    System.out.println("Image URL: " + profile.getImage().getUrl());
    System.out.println("Profile URL: " + profile.getUrl()); 
```

错误是：-

线程“主”java.lang.IllegalAccessError 中的异常：试图从 com.google.api.client 类 com.google.api.client.googleapis.MethodOverride 访问字段 com.google.api.client.http.HttpRequest.method .googleapis.MethodOverride.overrideThisMethod(MethodOverride.java:99) 在 com.google.api.client.googleapis.MethodOverride.intercept(MethodOverride.java:87) 在 com.google.api.services.plus.ApiClient.buildHttpRequest(ApiClient .java:251) 在 com.google.api.services.plus.Plus$RemoteRequest.execute(Plus.java:1055) 在 com.google.api.services.plus.Plus$People$Get.executeUnparsed(Plus.java :991) 在 com.google.api.services.plus.Plus$People$Get.execute(Plus.java:976) 在 com.googleplus.test.TestAuth2.main(TestAuth2.java:64)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:00:51.067

您是否尝试过使用[此入门项目](https://code.google.com/p/google-plus-java-starter/)中的代码？

# jquery - 倒计时自动刷新；当没有互动时

> ID：13350118
> 
> 赞同：0
> 
> 时间：2012-11-12T19:24:14.557
> 
> 标签：jquery, actionscript-3, flash, browser, refresh

我使用 AS3/Flash 构建了一个 Web 应用程序。该应用程序作为信息亭在触摸屏显示器上显示，因此没有键盘或鼠标。目前我只是使用简单的元刷新每 10 分钟刷新一次页面。

问题：当用户与应用程序交互时，10 分钟倒计时一直在后台运行，并且当他们仍在与内容交互时页面会自动刷新。

我需要应用程序、浏览器扩展或 jquery 片段来监视是否有任何交互，并在用户停止交互后刷新。因此，如果用户停止，则开始 10 分钟的倒计时。如果下一个用户开始使用它，倒计时将重新开始。

这是我遇到的类似讨论，但它是关于文件更改的。 [如何让 Firefox 在文件更改时自动刷新？](https://stackoverflow.com/questions/1346716/firefox-auto-refresh-on-file-change)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:56:36.340

希望这会有所帮助...使用计时器检查舞台上的交互，并将 URLLoader 指向您的 Web 服务域上的测试文件，以检查一切是否正常运行。`location.reload`如果是这样，请刷新在 javascript 上调用 a 。

```
package  {
    import flash.display.Stage;
    import flash.events.Event;
    import flash.events.IOErrorEvent;
    import flash.events.MouseEvent;
    import flash.events.ProgressEvent;
    import flash.events.TimerEvent;
    import flash.events.TouchEvent;
    import flash.external.ExternalInterface;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.utils.Timer;

    public class TimeoutRefresh {

        private var tt:Timer;
        private var online:Boolean;
        private var ldr:URLLoader;

        public function TimeoutRefresh(stageRef:Stage, minutes:int) {
            //set up timer
            tt = new Timer(minutes * 60 * 1000);
            tt.addEventListener(TimerEvent.TIMER, checkConnection);
            tt.start();
            //listen for interaction
            stageRef.addEventListener(TouchEvent.TOUCH_BEGIN, refreshTimer);
            stageRef.addEventListener(MouseEvent.CLICK, refreshTimer);
        }

        private function refreshTimer(e:MouseEvent):void {
            //some interaction on stage, restart timer
            tt.reset();
            tt.start();
        }

        private function checkConnection(e:TimerEvent):void {
            //no interaction, stop the timer
            tt.stop();
            //check for internet connection
            var req:URLRequest = new URLRequest("www.yourWebserviceDomain.com/aTestFile.txt");
            ldr = new URLLoader(req);
            ldr.addEventListener(IOErrorEvent.IO_ERROR, onIoErrorEvent);
            ldr.addEventListener(ProgressEvent.PROGRESS, onLoaderActivity);
            ldr.addEventListener(Event.COMPLETE, onLoaderActivity);
        }

        private function onIoErrorEvent(e:IOErrorEvent):void {
            //The remote server is not working, maybe it fixes itself in a while...
            tt.reset();
            tt.start();
            //remove listeners
            checkConnectionDone();
        }

        private function onLoaderActivity(e:ProgressEvent):void {
            //The webservice is up and running, lets refresh...
            if (ExternalInterface.available) ExternalInterface.call("document.location.reload");
            //and reset timer
            tt.reset();
            tt.start();
            //remove listeners
            checkConnectionDone();
        }

        private function checkConnectionDone():void {
            if (ldr.bytesLoaded < ldr.bytesTotal) ldr.close();
            ldr.removeEventListener(IOErrorEvent.IO_ERROR, onIoErrorEvent);
            ldr.removeEventListener(ProgressEvent.PROGRESS, onLoaderActivity);
            ldr.removeEventListener(Event.COMPLETE, onLoaderActivity);
            ldr = null;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:43:43.960

您应该改用某种信息亭模式扩展。使用脚本刷新页面的问题是，如果连接断开，浏览器最终会出现 404 页面。由于没有键盘，所以没有人可以按 F5 来刷新它。

# javascript - Javascript 翻转

> ID：13350120
> 
> 赞同：0
> 
> 时间：2012-11-12T19:24:24.397
> 
> 标签：javascript, rollovers

我对 JavaScript 还很陌生，我正在努力做到这一点，以便当您`mouseover`链接时，页面右侧的图像会发生变化，然后又会变回`mouseout`.

这是我的 JavaScript：

```
function SwapOut(titleid){
if (titleid == video)
    document.getElementById("titleimg").src="images/videotitle.png"
else if (titleid == gamedesign)
   document.getElementById("titleimg").src="images/gametitle.png"       
else if (titleid == webdesign)
   document.getElementById("titleimg").src="images/webtitle.png"    
return true;
}

function SwapBack('titleid'){
if (titleid == home)
    document.getElementById("titleimg").src="images/hometitle.png"
else if (titleid == gamedesign)
   document.getElementById("titleimg").src="images/gametitle.png"   
else if (titleid == video)
   document.getElementById("titleimg").src="images/videotitle.png"  
else if (titleid == webdesign)
   document.getElementById("titleimg").src="images/webtitle.png" 
return true;
} 
```

还有我的 HTML：

```
<a id="eileenSmall1" href="video.html" onmouseover="SwapOut('video')" onmouseout="SwapBack('home')"></a>

<div id="title">
    <img src="images/hometitle.png" name="titleimg"/>
</div> 
```

我通常会使用 CSS 来解决这个问题，但在更改不同元素的属性时遇到了问题。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:32:10.597

您通过 id 引用 titleimg 但尚未为其分配 id，只是一个名称

```
 <img src="images/hometitle.png" name="titleimg" id="titleimg"/> 
```

此外，您传递给函数的参数是一个字符串变量。你的函数应该看起来像

```
function SwapOut(titleid){
if (titleid == 'video')
    document.getElementById("titleimg").src="images/videotitle.png"
else if (titleid == 'gamedesign')
   document.getElementById("titleimg").src="images/gametitle.png"       
else if (titleid == 'webdesign')
   document.getElementById("titleimg").src="images/webtitle.png"    
return true;
}

function SwapBack(titleid){
if (titleid == 'home')
    document.getElementById("titleimg").src="images/hometitle.png"
else if (titleid == 'gamedesign')
   document.getElementById("titleimg").src="images/gametitle.png"   
else if (titleid == 'video')
   document.getElementById("titleimg").src="images/videotitle.png"  
else if (titleid == 'webdesign')
   document.getElementById("titleimg").src="images/webtitle.png" 
return true;
} 
```

注意引号，您正在比较字符串，例如

titleid == 'home' vs titleid == home

也会丢失函数 SwapBack('titleid') 中的引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:40:04.990

1）你试图用`id`“titleimg”来引用一个元素，但你根本没有给这个元素一个`id`。

2）您的`if`条件不`titleid`与字符串进行比较，而是将其与它认为是变量的字符串进行比较。例如，它应该`'video'`不是`video`。

3）在你的第二个函数中，你的参数应该是一个变量而不是一个字符串。例如它应该`SwapBack(titleid)`不是`SwapBack('titleid')`。

你应该试试这个...

JAVASCRIPT：

```
function SwapOut(titleid){
if (titleid == 'video')
    document.getElementById("titleimg").src="images/videotitle.png"
else if (titleid == 'gamedesign')
   document.getElementById("titleimg").src="images/gametitle.png"       
else if (titleid == 'webdesign')
   document.getElementById("titleimg").src="images/webtitle.png"    
return true;
}

function SwapBack(titleid){
if (titleid == 'home')
    document.getElementById("titleimg").src="images/hometitle.png"
else if (titleid == 'gamedesign')
   document.getElementById("titleimg").src="images/gametitle.png"   
else if (titleid == 'video')
   document.getElementById("titleimg").src="images/videotitle.png"  
else if (titleid == 'webdesign')
   document.getElementById("titleimg").src="images/webtitle.png" 
return true;
} 
```

HTML：

```
<a id="eileenSmall1" href="video.html" onmouseover="SwapOut('video')" onmouseout="SwapBack('home')"></a>

<div id="title">
    <img src="images/hometitle.png" name="titleimg" id="titleimg" />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:47:08.510

对于初学者，`if (titleid == video)`无效 - 您试图将视频引用为不存在的变量。应该是`if (titleid == 'video')`表示它是一串文本。

其次，如果逻辑在那里，你不需要那个。你在哪里你`onmouseover="SwapOut('video')"`可以把图像传递给它。

例如，

```
function swapOut(img)
{
    document.getElementById('titleimg').src = img;
} 
```

HTML

```
<a id="eileenSmall1" href="video.html" onmouseover="SwapOut('images/videotitle.png')"></a> 
```

Swapback 不需要任何条件逻辑（假设您总是想将图像切换回原处）。

# javascript - 将与一个元素的 ID 关联的 CSS 应用于另一个元素

> ID：13350125
> 
> 赞同：1
> 
> 时间：2012-11-12T19:24:48.680
> 
> 标签：javascript, jquery, css

我希望将与#originalTable 关联的css 应用于#newTable。

大多数样式将与类 .general 相关联，但是，正是这种特定于 ID 的样式让我感到困惑。#originalTable 将保留在 DOM 中，所以我不能只移动 ID。我宁愿不手动迭代每个元素来关联样式，因为大多数样式通常由类 .general 应用。我也不希望在我的样式表中为#newTable 或应用于#newTable 的一些新类复制规则。

如何实现？谢谢

CSS

```
.general {//some CSS}
.general thead {//some CSS}
.general thead th {//some CSS}

#originalTable {//some CSS}
#originalTable thead {//some CSS}
#originalTable thead th  {//some CSS} 
```

HTML

```
<table id="originalTable" class="general">
    <thead>
        <tr>
            <th>H1</th>
            <th>H2</th>
            <th>H3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>B1</th>
            <th>B2</th>
            <th>B3</th>
        </tr>
    </tbody>
</table>

<table id="newTable" class="general">
    <thead>
        <tr>
            <th>H1</th>
            <th>H2</th>
            <th>H3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>B1</th>
            <th>B2</th>
            <th>B3</th>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:30:30.490

```
#originalTable, #newTable {//some CSS}
#originalTable thead, #newTable thead {//some CSS}
#originalTable thead th, #newTable thead th  {//some CSS} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:28:48.647

您应该将代码更改为：

CSS：

```
.general {//some CSS}
.general thead {//some CSS}
.general thead th {//some CSS}

.originalTable {//some CSS}
.originalTable thead {//some CSS}
.originalTable thead th  {//some CSS} 
```

HTML：

```
<table class="general">
    <thead>
        <tr>
            <th>H1</th>
            <th>H2</th>
            <th>H3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>B1</th>
            <th>B2</th>
            <th>B3</th>
        </tr>
    </tbody>
</table>

<table class="general originalTable">
    <thead>
        <tr>
            <th>H1</th>
            <th>H2</th>
            <th>H3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th>B1</th>
            <th>B2</th>
            <th>B3</th>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:33:01.093

如果您想让所有表都有 CSS 属性，请使用：

```
table {
    //some CSS code
} 
```

如果您希望所有“通用”表都具有某些属性，请使用：

```
.general { 
    //some CSS code
} 
```

如果您希望某些“特殊”表具有附加属性，请使用：

```
.special { 
    //some CSS code 
} 
```

如果您只希望 1 个特定表具有属性，请使用：

```
#newTable { 
    //some CSS code
} 
```

如果您希望 2 个表具有属性，请使用：

```
#newTable, #oldTable {
    //some CSS code
} 
```

请注意，可以进一步指定最后一个。例如`#newTable head, #oldTable head`.

那么你可以有

```
<table id="newTable" class="general special">
    //some HTML code
</table> 
```

# css - 防止 div 与 CSS 重叠

> ID：13350128
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:24:53.843
> 
> 标签：css, html, overlap, overlapping

我在[http://web.corporativocipres.com.mx/中遇到了 div 重叠的问题](http://web.corporativocipres.com.mx/)

问题在于页脚（Corporativo - Historias Memorables Area de Prensa）中的链接，它们在带有 classmidbg trans 的 div 之后具有类似背景但它重叠并且链接不可点击。

我尝试了不同的 z-index 但没有奏效（或者我做得不好）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:30:01.673

如果您添加`z-index: 1`to`midbg`和添加`position: relative; z-index: 2`to `.mid li`，您将解决问题。

该`z-index`属性绝对是一个奇怪的属性，并且在`position`未定义该属性时可能会出现奇怪的行为。有时这很有用，有时则没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:30:44.407

删除 div：

```
<div class="midbg trans"></div> 
```

并将`class="midbg trans"`课程设置为 li：

```
<li class="midbg trans"><a href="/memoriables">Historias Memorables</a></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:30:36.153

只需删除

```
<div class="midbg trans"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T19:33:49.370

只需将您用于将较暗背景添加到列表元素标签的 midbg 类即可。

z 索引需要设置 position 属性，如果需要，您可以在页脚内绝对设置元素的位置，然后使用 z-index。

# java - JAXB 不编组我的列表

> ID：13350129
> 
> 赞同：0
> 
> 时间：2012-11-12T19:24:54.763
> 
> 标签：java, jakarta-ee, jaxb

我有以下两个课程。JAXB 不将答案列表编组为 XML 有什么原因吗？我遗漏了其他正确编组的属性。是的，答案列表已填充，但未显示答案元素。

```
public class Question {

    private List<Answer> answers;

    public List<Answer> getAnswers() {
        return answers;
    }

    public void setAnswers(final List<Answer> answers) {
        this.answers = answers;
    }
} 
```

和测验对象

```
@XmlRootElement
public class Quiz {

    private List<Question> questions;

    public Quiz() {
        questions = new ArrayList<Question>();
    }

    public List<Question> getQuestions() {
        return questions;
    }

    public void setQuestions(List<Question> questions) {
        this.questions = questions;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:40:56.017

你的模特照原样为我工作。请参见下面的示例：

**演示**

```
package forum13350129;

import java.util.*;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Quiz.class);

        Question question1 = new Question();
        List<Answer> answers1 = new ArrayList();
        answers1.add(new Answer());
        answers1.add(new Answer());
        question1.setAnswers(answers1);

        Question question2 = new Question();
        List<Answer> answers2 = new ArrayList();
        answers2.add(new Answer());
        answers2.add(new Answer());
        question2.setAnswers(answers2);

        Quiz quiz = new Quiz();
        quiz.getQuestions().add(question1);
        quiz.getQuestions().add(question2);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(quiz, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<quiz>
    <questions>
        <answers/>
        <answers/>
    </questions>
    <questions>
        <answers/>
        <answers/>
    </questions>
</quiz> 
```

* * *

**更新#1**

> 如果您像我一样尝试将它作为 JSON 格式获取呢？

这取决于。JSON 绑定不是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)规范的一部分。这意味着您的环境正在执行以下操作之一：

1.  将 JAXB impl 与 Jettison 之类的库一起使用来生成 JSON（请参阅： [http](http://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html) ://blog.bdoughan.com/2011/04/jaxb-and-json-via-jettison.html ）
2.  使用 JSON 绑定库（例如有一些 JAXB 注释支持的 Jackson）
3.  使用提供 JSON 绑定的 JAXB impl，例如 EclipseLink MOXy（请参阅： [http](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html) ://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html ）。

使用[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)如下：

```
 Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.setProperty(MarshallerProperties.MEDIA_TYPE, "application/json");
    marshaller.marshal(quiz, System.out); 
```

将产生以下 JSON：

```
{
   "quiz" : {
      "questions" : [ {
         "answers" : [ {
         }, {
         } ]
      }, {
         "answers" : [ {
         }, {
         } ]
      } ]
   }
} 
```

* * *

**更新#2**

> 我已经解决了延迟加载关系的问题。我在存储库中使用 Hibernate.initialize。我正在尝试从我拥有的资源中返回这个测验对象。我正在使用 JAX-RS。

我看到人们在将 Hibernate 模型编组为 XML 时遇到问题。我相信这个问题是由于 Hibernate 使用的代理对象造成的。在下面的链接中，我建议使用 an`XmlAdapter`在代理对象和真实对象之间进行转换，这很有帮助。

*   [(moxy) jaxb 编组和休眠代理对象](https://stackoverflow.com/questions/6838323/moxy-jaxb-marshaling-and-hibernate-proxy-objects/6847497#6847497)

# asp.net-mvc-3 - 学习 MVC 3，创建自定义应用程序并与 Orchard 集成而不是构建模块似乎更好？

> ID：13350136
> 
> 赞同：0
> 
> 时间：2012-11-12T19:25:39.287
> 
> 标签：asp.net-mvc-3, orchardcms

我一直在考虑和考虑。Orchard 显然功能强大且灵活，包含一些非常复杂的代码。我需要创建一些特定的向导/工作流功能。我也在使用实体框架而不是 NHibernate。在我看来，使用更简单的代码单独编写这个应用程序会更好，我可以重构这些代码，并通过包装模块集成到 Orchard 中，而不是为完整的向导/工作流重新编写模块。正如我所说，我正在学习 MVC3，不想让我的生活过于复杂，只需提供一个解决方案。我肯定会将 Orchard 用于典型的 CMS 网站功能。

我还有一个未解决的问题，即在用户之上代表组织，我已经在 Orchard 之外解决了这个问题。这只需要应用程序而不是内容管理。所以在短期内，我可能会将身份验证分开。

这听起来是不是最务实的做法。如果有一个好的现有模块，那么决定会更容易。我认为他们正在考虑 1.7 的工作流程，但我们还没有。

非常感谢，

埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:10:36.333

听起来确实是一条安全的道路，是的。

# javascript - 如何在 Nodejs 中以随机时间间隔创建随机对象？

> ID：13350137
> 
> 赞同：0
> 
> 时间：2012-11-12T19:25:47.797
> 
> 标签：javascript, node.js, random, callback

我想在 NodeJS 中创建 X 个随机对象（本例中为 100 个）。这些对象具有随机值，而且我希望它们在 randomIntervals 中创建。为了实现这一点，我编写了与此类似的代码：

```
i=0;

while (i < 100){
 randomNum1 = Math.floor(Math.random()*100);
 randomNum2 = Math.floor(Math.random()*100);
 randomIntervalTime = Math.floor(Math.random()*100);

 timeOutInterval = setTimeout(function(){
   return new SomeObject(randomNum1, randomNum2)}, randomIntervalTime);
 i++;
} 
```

问题是回调没有保留该值，它只会生成 100 个具有所有相同值的新对象（循环中创建的最后一个值）

我意识到这是因为回调工作方式的一些问题我没有完全掌握，但我的问题是有人将如何在 Nodejs 中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:58:15.880

原始代码将 100 个回调放入事件队列。然后，在每一个执行时，它都会使用存储在`randomNum1`和中的值`randomNum2`。请注意，当第一个回调开始运行时，while 循环已经完成并且 和 的值`randomNum1`不再`randomNum2`变化。这解释了为什么您的代码每次都使用相同的值。解决这个问题很简单 - 只需将定义移动到创建新对象的函数范围内，如下所示`randomNum1`：`randomNum2`

```
var createNewObject = function() {
  var randomNum1 = Math.floor(Math.random()*100);
  var randomNum2 = Math.floor(Math.random()*100);
  return new SomeObject(randomNum1, randomNum2);
};

var i = 0;

while (i < 100) {
  var randomIntervalTime = Math.floor(Math.random()*100);
  setTimeout(createNewObject, randomIntervalTime);
  i++;
} 
```

# c++ - 如何终止以 ShellExecute 启动的程序

> ID：13350140
> 
> 赞同：1
> 
> 时间：2012-11-12T19:26:00.807
> 
> 标签：c++, windows, process, mfc, shellexecute

在 MFC 中，我正在使用此代码

```
ShellExecute(NULL, _T("open"), _T(EXTERNAL_APP), params, 
             _T(EXTERNAL_PATH), SW_HIDE); 
```

启动在后台运行的外部程序。

但是，当我的应用程序终止时，该程序仍在运行，这可以通过检查 Windows 任务管理器窗格来验证。

所以我的问题是，**当我的应用停止时，如何让外部程序停止**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:31:20.007

试试`ShellExecuteEx`吧，它可以返回一个`HANDLE hProcess`新启动的进程。

当/如果你有`HANDLE hProcess`那么我希望你可以将它作为参数传递给`TerminateProcess`函数：在你的应用程序停止之前你会调用它（终止子进程）。

# c++ - 如何选择二维数组中的另一列？

> ID：13350148
> 
> 赞同：0
> 
> 时间：2012-11-12T19:26:27.217
> 
> 标签：c++, c, arrays

如何选择二维数组的第二列。我有这个包含大约 30 个值（LKT）的数组，从那里我有一个二维数组（ScaledValues）。这个二维数组的第 2 列将填充原始 LKT 数组的缩放版本。

最初，ActiveArray 变量指向 LKT 数组。但是，当我在 ScaledValues 中使用第一个 LKT 数组的缩放值填充数组的第二列时，如何将 ActiveArray 移动到现在指向第二列作为我将使用的活动数组？即在我用所需的比例值填充第二列之后，我想使用这些值并且我想使用 ActiveArray 变量来表示这个新列是活动数组。

我知道还有其他方法可以做到这一点，即我可以创建 2 个单独的单独数组，但我必须使用您在下面看到的格式。请协助。谢谢。

如果我需要让我的问题更清楚，请告诉我。

非常感谢。

```
static const unsigned int LKT[30] = {
    30, 29, 28, 27, 26, 25, 24, 23, 22, 
    21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 
    11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0};

static unsigned int ScaledValues[30][2];

static volatile unsigned char ActiveArray = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:32:44.733

反转 ScaledValues 数组声明：

```
unsigned int ScaledValues[2][30];

for (int i = 0; i < 30; i++) {
    ScaledValues[0][i] = LKT[i];
    ScaledValues[1][i] = scale(LKT[i]);
}

// Also need to make this a pointer
unsigned int * ActiveArray = ScaledValues[0];    // Original values
ActiveArray = ScaledValues[1];                  // Scaled values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:34:03.977

操作此数组的更简单方法可以如下完成

首先定义应该是这样的

```
static unsigned int ScaledValues[2][30]; 
```

然后复制`LKT`到第一个`line`（而不是`column`）

```
memcpy(ScaledValues[0], LKT, 30*sizeof(unsigned int)); 
```

访问`ScaledValues`数组的第二行是

```
ScaledValues[1] 
```

# excel - 将 Excel 数据呈现到 Webmatrix

> ID：13350150
> 
> 赞同：2
> 
> 时间：2012-11-12T19:26:32.990
> 
> 标签：excel, webmatrix

我正在尝试读取 Excel 并将其绑定到网页中，这是我的初始代码。当我在浏览器中运行它时，它所做的只是显示代码而不是执行它。这是保存为chtml的代码：

```
@{

}

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Excel Read Test</title>
</head>
<body>    
        string ExcelFile = Server.MapPath("App_Data/Pending_Requests.xls");
       string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + ExcelFile + ";Extended Properties=Excel 8.0;";

        using (OleDbConnection conn = new OleDbConnection(connString)) 
            { 
            using (OleDbCommand cmd = new OleDbCommand()) 
            { 
            cmd.Connection = conn; 
            cmd.CommandText = "SELECT * FROM [EAST]"; 
            conn.Open(); 
            OleDbDataReader dr = cmd.ExecuteReader(); 
            GridView1.DataSource = dr; 
            GridView1.DataBind(); 
            conn.Close(); 
            } 
            }
   </body> 
```

如何执行此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:16:29.050

您的代码尝试将数据绑定到 GridView，但它们仅在[Web Forms](http://www.asp.net/web-forms)中可用。cshtml 文件是一种不同的开发模型，称为[网页](http://www.asp.net/web-pages)。WebMatrix 是为开发网页而设计的。当您在网页中编写代码时，您必须使用[Razor 语法](http://www.asp.net/web-pages/tutorials/introducing-aspnet-web-pages-2/intro-to-web-pages-programming)。与 GridView 等效的网页是 WebGrid。这是让您的代码在 cshtml 文件中工作的方法：

```
@{
     var connString = "Provider=Microsoft.JET.OLEDB.4.0;Data Source=|DataDirectory|Pending_Requests.xls;Extended Properties=Excel 8.0;";
     var provider = "System.Data.OleDb";
     var sql =  "SELECT * FROM [EAST$]";
     var db = Database.OpenConnectionString(connString, provider);
     var data = db.Query(sql);
     var grid = new WebGrid(data);
}

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Excel Read Test</title>
</head>
    <body>    
       @grid.GetHtml()
    </body>
</html> 
```

# regex - 仅检索字段的一部分

> ID：13350152
> 
> 赞同：1
> 
> 时间：2012-11-12T19:26:35.213
> 
> 标签：regex, mongodb

是否可以在 Mongodb 中使用 RegEx 或任何其他方式检索文件的一部分，例如考虑以下集合。

```
values of field x 
------------
XXaaaaa(dd)
YYaa(bb)aa
ZZxsf(ss)a 
```

我们怎样才能得到 dd,bb,cc 或者我们怎样才能得到 XX,YY,ZZ？

我的意思是使用 Mongodb 工具，而不是执行不那么快的**js 。**在 SQL 中，这可以很容易地完成，但是 mongodb 呢？

```
desired result 1
----------------
XX
YY
ZZ

desired result 2
----------------
dd
bb
ss 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:44:37.067

我认为您可以为此使用聚合框架和[**$substr**](http://docs.mongodb.org/manual/reference/aggregation/substr/)。假设数据位于“abc”属性中的示例（未验证）。

```
db.collection1.aggregate({ 
  $project: { 
    : { $substr: ["$abc", 0, 2] } 
  }
}); 
```

# svn - SVN 递归删除和忽略

> ID：13350158
> 
> 赞同：1
> 
> 时间：2012-11-12T19:26:48.840
> 
> 标签：svn, tortoisesvn, ignore

我有一个存储库，其中一些文件以**.scc结尾**

在 repo 的几乎每个子文件夹中都有一个这些文件，并且它们都已提交。

我正在使用：
TortoiseSVN 1.6.15，Build 21042 - 64 Bit
Subversion 1.6.16

使用 TortoiseSVN，我可以进入每个文件夹并右键单击文件并选择“**删除并添加到忽略列表**”，但在每个文件夹中都这样做很痛苦。所以我基本上是在寻找一种简单的方法来递归地执行与 TortoiseSVN 的“删除并添加到忽略列表”完全相同的操作。通过 TortoiseSVN 或命令行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:04:11.900

要将文件添加到*忽略列表*，您可以更新`%USERPROFILE%\local data\.subversion\config`文件。（我不能 100% 确定它的位置，但它应该位于`.subversion`%USERPROFILE% 目录下的某个目录下。Unix 和 Mac，它会在`$HOME/.subversion/config`.

在那个文件中，有一个`global-ignores=`参数。您可以删除`#`它前面的 （如果尚未删除），然后添加`.ssc`到它。在我的这个文件的版本中，它大约是#90。

现在，您必须想办法删除所有这些`.scc`文件。您所要做的就是：

```
 $ find . -name `*.scc -exec svn del {} \;` 
```

等等，你使用的是 Windows。那更难。我面前没有 Windows 机器，但我知道您可以`*.scc`通过执行以下操作找到所有这些文件：

```
 C:> dir *.scc /s/b 
```

您也许可以将其通过管道传输到某种`for`循环中，并将其传递给`svn del`语句。即使我有一台 Windows 机器，我也可能需要一些时间来弄清楚语法。由于我面前没有 Windows 机器，所以更加困难。

最简单的方法是将输出重定向到一个文件，然后使用一个好的程序编辑器编辑文件（我的意思是不是`notepad.exe`）：

```
 C:> dir *.scc /s/b > delete_me.bat
 C:> notpadplusplus delete_me.bat 
```

现在，您可以使用[Notepad++](http://notepad-plus-plus.org)编辑您的文件并快速为每一行添加一个`svn del`. 运行此`delete_me.bat`文件，它将删除您的所有 `*.scc`文件。（我个人更喜欢[Vim](http://www.vim.org)，但我是一个受虐狂）。

The big question is how to prevent adding these files back. Ignores set up as I showed you are client specific. You could setup a `svn:ignore` property in each directory. This is a more global version that affects everyone, but it still won't prevent someone from adding them because the files will still show up in Windows Explorer.

I have a [pre-commit hook](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook) that can be setup, so no one will ever be able to add in these `.scc` files again. You could also set it up not to include the [other types of files](https://stackoverflow.com/a/1732938/368630) that VisualStudio puts in too.

# c++ - 什么时候在地图/排序中使用标准 < 比较双打是安全的？

> ID：13350159
> 
> 赞同：2
> 
> 时间：2012-11-12T19:26:51.633
> 
> 标签：c++, floating-point

> **可能重复：**
> [std:map 中的浮点键](https://stackoverflow.com/questions/6684573/floating-point-keys-in-stdmap)

好吧，我知道在某些情况下，您想提供一个特殊功能来进行双打比较。这种情况可能包括您进行算术运算的时间，因为您在浮点算术中进行了舍入。

但是，有时使用 < 或 > 比较双打是安全的吗？

假设我有一次计算的双精度列表，我需要对其进行排序或用作映射中的键（即 std::map），并且我保证之后没有任何额外的算术运算。

如果我使用迭代器遍历集合，我可以保证我的排序顺序是正确的吗？

我想我可以通过这种方式获得更多的性能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:52:32.527

只要您从不添加任何 NaN 值，使用`<`比较`double`a 中的值总是安全的。`std::map`用于映射的比较必须是*严格的弱排序*，它具有以下要求（C++03 §23.1.2/2 和 §25.3/3-4）：

*   定义`equiv(a, b)`为`!(a < b) && !(b < a)`。那么，两者`<`和都`equiv`必须是传递关系：
    1.  如果`a < b`和`b < c`，则`a < c`必须为真
    2.  如果`equiv(a, b)`和`equiv(b, c)`，则`equiv(a, c)`必须为真

`double`值比较当然满足这些公理，*除非*将 NaN 值混入其中。NaN 有一个奇怪的属性，即它们不等于所有值（包括它们自己！）但不小于或大于任何值：

```
NaN < 0    // false
NaN <= 0   // false
NaN == 0   // false
NaN > 0    // false
NaN >= 0   // false
NaN != 0   // true
NaN < NaN  // false
NaN <= NaN // false
NaN == NaN // false (!!!)
NaN > NaN  // false
NaN >= NaN // false
NaN != NaN // true (!!!) 
```

这会导致问题，因为根据上述规则，`NaN`具有`equiv(x, NaN)`对 all 为真的属性`x`，通过传递性意味着所有值都是等价的，除了非 NaN 值显然不等价。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T19:31:13.843

是的，`operator<`在集合或地图中使用标准。大多数模糊`double`比较器不够严格，无法在 a`map`或中使用`set`。（并希望您在访问所述地图时不会弄乱浮点模式......）

我建议使用`multimap`or `multiset`，因为您认为相等的两个值可能略有不同。如果您已经期待多个条目，您应该更好地处理几乎相等的条目。

接下来，在搜索热门内容时`lower_bound(x - epsilon)`，`upper_bound(x + epsilon)`为了在地图中捕获不在您认为的位置的条目。

即，这里是“这是`double`在这个`multiset<double>`”代码：

```
typedef std::multiset<double> double_set;
std::pair< double_set::iterator, double_set::iterator >
get_equal_range( double_set& s, double d, double epsilon = 0.00001 )
{
  auto lower = s.lower_bound( d-epsilon );
  auto upper = s.upper_bound( d+epsilon );
  return std::make_pair( lower, upper );
}
std::pair< double_set::const_iterator, double_set::const_iterator >
get_equal_range( double_set const& s, double d, double epsilon = 0.00001 )
{
  auto lower = s.lower_bound( d-epsilon );
  auto upper = s.upper_bound( d+epsilon );
  return std::make_pair( lower, upper );
}
bool TestMembership( double_set const& s, double d, double epsilon = 0.00001 )
{
  auto range = get_equal_range( s, d, epsilon );
  return range.first != range.second;
} 
```

因此，给定的`double`可以映射到一系列条目，或者在`set`.

从下面的一个很好的答案中被盗：如果你通过，默认的双倍`operator<`会搞砸你`map`或搞砸。`set``NaN`

将东西放入`map`和`set`（和多个版本）时，您*必须*保持严格的弱排序规则。如果你失败了，你会出现看似随机的崩溃，并且偶尔会出现无限循环：和中的代码`map`对于`set`排序失败并不健壮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T19:32:13.163

在地图或集合中使用标准“<”至关重要，因为您尝试引入的任何软糖因素都会破坏他们用于组织容器的严格排序。不幸的是，这意味着你可能很难找到一个元素，除非你有确切的值。

您可以将`lower_bound`and`upper_bound`与低于和高于所需搜索值的值一起使用，以生成该值必须位于的范围。

# r - R中距离矩阵中的列/行按字母顺序排列

> ID：13350162
> 
> 赞同：0
> 
> 时间：2012-11-12T19:27:00.243
> 
> 标签：r, distance

这应该相对简单，但由于某种原因，我被难住了。

我想重新排序系统发育距离矩阵，以便列按字母顺序排列。

这是一个简单的例子：

```
require("ape")
set.seed(5)
dist(cophenetic(rtree(5))) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:39:30.043

像这样？

```
require("ape")
set.seed(5)
res <- dist(cophenetic(rtree(5)))
res <- as.matrix(res)
res <- as.dist(res[order(rownames(res)),order(colnames(res))]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:50:26.310

如果`T <- dist(cophenetic(rtree(5)))`

T 属于类`dist`，因此它没有名称，只有标签。
您可以订购它的标签

```
ordering <- sort(attr(T, "Labels")) 
```

您可以将其强制转换为矩阵，然后对其进行排序

```
T.mat <- as.matrix(T)[ordering, ordering] 
```

然后正如@Roland 建议的那样，将其转换回`dist`

```
T  <- as.dist(T.mat) 
```

如果您想控制矩阵的格式，可以使用以下

```
T.fm <- format(T.mat, digits=3, nsmall=3)
T.fm[row(T.fm) < col(T.fm)] <- ""
print(T.fm, quote=F)

#      t1    t2    t3    t4    t5   
# t1 0.000                        
# t2 3.436 0.000                  
# t3 1.309 3.632 0.000            
# t4 2.145 2.338 2.530 0.000      
# t5 1.756 2.783 2.173 1.136 0.000

T  <- as.dist(T.fm)
T
#       t1    t2    t3    t4
# t2 3.436                  
# t3 1.309 3.632            
# t4 2.145 2.338 2.530      
# t5 1.756 2.783 2.173 1.136 
```

# unit-testing - 如何测试 Haskell 中的错误？

> ID：13350164
> 
> 赞同：9
> 
> 时间：2012-11-12T19:27:01.413
> 
> 标签：unit-testing, testing, haskell, error-handling, hunit

我希望能够确保函数在接收到无效值时会引发错误。例如，假设我有一个函数 pos 只返回一个正数：

```
pos :: Int -> Int
pos x
   | x >= 0 = x
   | otherwise = error "Invalid Input" 
```

这是一个简单的例子，但我希望你能明白。

我希望能够编写一个预期会出错的测试用例，并将其视为通过测试。例如：

```
tests = [pos 1 == 1, assertError pos (-1), pos 2 == 2, assertError pos (-2)]
runTests = all (== True) tests 
```

**[我的解决方案]**

这就是我根据@hammar 的评论最终得出的结论。

```
instance Eq ErrorCall where
    x == y = (show x) == (show y)

assertException :: (Exception e, Eq e) => e -> IO a -> IO ()
assertException ex action =
    handleJust isWanted (const $ return ()) $ do
        action
        assertFailure $ "Expected exception: " ++ show ex
  where isWanted = guard . (== ex) 

assertError ex f = 
    TestCase $ assertException (ErrorCall ex) $ evaluate f

tests = TestList [ (pos 0) ~?= 0
                 , (pos 1) ~?= 1
                 , assertError "Invalid Input" (pos (-1))
                 ]   

main = runTestTT tests 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T19:49:41.137

OP 的解决方案定义了，但从[testpack](http://hackage.haskell.org/packages/archive/testpack/latest/doc/html/Test-HUnit-Tools.html)`assertException`看起来也可以在这里使用。`Test.HUnit.Tools.assertRaises`

我添加了`msg`参数来`assertError`匹配`assertRaises`工作方式，并包括选择性导入，这样像我这样的菜鸟就可以了解常用的东西是从哪里导入的。

```
import Control.Exception (ErrorCall(ErrorCall), evaluate)
import Test.HUnit.Base  ((~?=), Test(TestCase, TestList))
import Test.HUnit.Text (runTestTT)
import Test.HUnit.Tools (assertRaises)

pos :: Int -> Int
pos x
   | x >= 0 = x
   | otherwise = error "Invalid Input"

instance Eq ErrorCall where
    x == y = (show x) == (show y)

assertError msg ex f = 
    TestCase $ assertRaises msg (ErrorCall ex) $ evaluate f

tests = TestList [
  (pos 0) ~?= 0
  , (pos 1) ~?= 1
  , assertError "Negative argument raises an error" "Invalid Input" (pos (-1))
  ]   

main = runTestTT tests 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:37:43.807

在 Haskell 中有几种处理错误的方法。这是一个概述：[http ://www.randomhacks.net/articles/2007/03/10/haskell-8-ways-to-report-errors](http://www.randomhacks.net/articles/2007/03/10/haskell-8-ways-to-report-errors)

**[编辑]**

第一个例子展示了如何捕捉错误，例如

```
half :: Int -> Int 
half x = if even x then x `div` 2 else error "odd"

main = do catch (print $ half 23) (\err -> print err) 
```

也就是说，这种错误处理更适合`IO`一些东西，在像你这样的纯代码中，Maybe，Either 或类似的东西通常是更好的选择。它可以简单到...

```
pos :: Int -> Maybe Int
pos x
   | x >= 0 = Just x
   | otherwise = Nothing

tests = [pos 1 == Just 1
        ,pos (-1) == Nothing
        ,pos 2 == Just 2
        ,pos (-2) == Nothing
        ]

main = print $ and tests 
```

...如果您不需要错误类型。

# c# - 单击项目后如何使 ToolStripMenu 保持打开状态

> ID：13350171
> 
> 赞同：4
> 
> 时间：2012-11-12T19:27:24.220
> 
> 标签：c#, winforms, user-interface, menu, menuitem

我正在创建一个`ToolStripMenu`如下所示的内容，它应该允许用户与“XML”和“非 XML”项进行交互，就好像它们是表单上的常规复选框一样。但是，当检查一个项目/未选中菜单关闭时。如何在不关闭菜单的情况下允许选中/取消选中项目？或者是否有不同的标准方法来实现相同的行为？

![在此处输入图像描述](../Images/12a8e292b0a3ad1d3b59c56f9c8a8c97.png)

所以我想要的是能够点击“非 XML”，显示一个复选框并保持菜单打开。这个想法是最后一个菜单项将是“完成”，当它被单击时，“G2S”子项将保持打开状态，但“显示”子项（XML、非 XML）将关闭。

有任何想法吗？

**注意：我知道这可能不是最好的用户界面设计。然而，我想知道如何才能获得一些有关处理菜单的技术知识。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:18:31.363

[Stackoverflow 上的这个线程](https://stackoverflow.com/questions/6826183/prevent-toolstripmenuitem-context-menu-from-unloading-on-click)描述了一个有趣的概念：

这是公认答案的本质：

```
ParentMenu.DropDown.AutoClose = false; 
```

它完全符合您的要求 - 单击子项时防止菜单关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-17T10:33:13.020

这是一个有用的扩展，需要用户在菜单项之外单击 + 下拉菜单以关闭。

```
 public static void KeepOpenOnDropdownCheck (this ToolStripMenuItem ctl)
    {
        foreach (var item in ctl.DropDownItems.OfType<ToolStripMenuItem>())
        {
            item.MouseEnter += (o, e) => ctl.DropDown.AutoClose = false;
            item.MouseLeave += (o, e) => ctl.DropDown.AutoClose = true;
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:31:59.657

**发布以防有人发现它有帮助。**

我没有尝试完全按照我最初的意图去做，而是提出了以下建议：

1-使用a `ContextMenuStrip`
2-当用户点击`ToolStripMenu`项目时，我`ContextMenuStrip`在菜单项附近的位置显示如下图：（注意定位仍然需要调整）

![在此处输入图像描述](../Images/2f71f2268b19046578451518a770499f.png)

为了让它工作，我`ContextMenuStrip`在运行时构建了代码，以便`ContextMenuStrip`可以根据情况动态构建其中的项目。

代码片段：

`ContextMenuStrip`单击菜单项时显示：

```
private void filterToolStripMenuItem_Click(object sender, EventArgs e)
{
    contextMenuStrip1.Show(this, 180, 20);
} 
```

构建`ContextMenuStrip`：

```
 if (protInfo.Name == "QCOM" )
    {
        BroadCast = new CheckBox();
        BroadCast.Text = "Date/Time Broadcast";
        BroadCast.Checked = FlagSet(CurrentFilter, (Byte)Filter.DateTimeBC);
        ToolStripControlHost Ch1 = new ToolStripControlHost(BroadCast);

        GenPoll = new CheckBox();
        GenPoll.Text = "Status Poll";
        GenPoll.Checked = FlagSet(CurrentFilter, (Byte)Filter.GenStatusPoll);
        ToolStripControlHost Ch2 = new ToolStripControlHost(GenPoll);

        GenPollResp = new CheckBox();
        GenPollResp.Text = "Status Poll Response";
        GenPollResp.Checked = FlagSet(CurrentFilter, (Byte)Filter.GenStatusResponse);
        ToolStripControlHost Ch3 = new ToolStripControlHost(GenPollResp);

        Button btnDone = new Button();
        btnDone.Text = "Done";
        ToolStripControlHost Ch4 = new ToolStripControlHost(btnDone);
        btnDone.Click += new EventHandler(btnDone_Click);

        contextMenuStrip1.Items.Clear();
        contextMenuStrip1.Items.Add(Ch1);
        contextMenuStrip1.Items.Add(Ch2);
        contextMenuStrip1.Items.Add(Ch3);
        contextMenuStrip1.Items.Add(Ch4);
        contextMenuStrip1.Enabled = true;
        filterToolStripMenuItem.Enabled = true;
    }
    else
    {
        filterToolStripMenuItem.Enabled = false;
    } 
```

这可能不是最好的用户界面设计，但它似乎有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T10:01:36.857

原始解决方案将使用鼠标事件。

鼠标输入事件：

parent.dropdown.autoclose = false;

鼠标离开事件：

parent.dropdown.autoclose = true;

唯一的问题是用户是否通过鼠标以外的其他方式访问菜单项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-17T01:32:31.667

我结合使用 Neolisk 和 Chimera 的答案来允许从树视图中删除多个叶项。我的解决方案如下

注意：使用了以下在设计时创建的 Item： TreePromotions (TreeView) menuVendorSection (Context Menu Strip) removeMultipleItemsToolStripMenuItem (DropDown of menuVendorSection)

```
 private void removeMultipleItemsToolStripMenuItem_MouseHover(object sender, EventArgs e)
    {
        removeMultipleItemsToolStripMenuItem.DropDownItems.Clear();  
        ToolStripMenuItem detailMenuItem;
        TreeNode vendorSectionNode = treePromotions.SelectedNode;
        for (int vsn = 0; vsn < vendorSectionNode.Nodes.Count; vsn++)
        {
            //add checkbox item
            detailMenuItem = new ToolStripMenuItem(vendorSectionNode.Nodes[vsn].Text);
            detailMenuItem.Tag = vendorSectionNode.Nodes[vsn].Tag;
            detailMenuItem.CheckOnClick = true;
            removeMultipleItemsToolStripMenuItem.DropDownItems.Add(detailMenuItem);

        }
        //add action buttons
        Button buttonDeleteMultiple = new Button();
        buttonDeleteMultiple.Text = "Remove Checked Items";
        ToolStripControlHost buttonHost = new ToolStripControlHost(buttonDeleteMultiple);
        buttonDeleteMultiple.Click += new EventHandler(buttonDeleteMultiple_Click);
        removeMultipleItemsToolStripMenuItem.DropDownItems.Add(buttonHost);

        Button buttonCancelMultipleDelete = new Button();
        buttonCancelMultipleDelete.Text = "CANCEL";
        buttonHost = new ToolStripControlHost(buttonCancelMultipleDelete);
        buttonCancelMultipleDelete.Click += new EventHandler(buttonCancelMultipleDelete_Click);
        removeMultipleItemsToolStripMenuItem.DropDownItems.Add(buttonHost);

        removeMultipleItemsToolStripMenuItem.DropDown.AutoClose = false;
        menuVendorSection.AutoClose = false;

    }

    private void buttonDeleteMultiple_Click(object sender, EventArgs e)
    {

        //delete items
        for (int dmi = 0; dmi < removeAllItemsToolStripMenuItem.DropDownItems.Count - 2; dmi++) //do not include buttons
        {
            ((Detail)removeAllItemsToolStripMenuItem.DropDownItems[dmi].Tag).Delete(); //deletes item from database
        }
        //rebuild leaf
        treePromotions.SelectedNode.Nodes.Clear();
        addItemNodes(treePromotions.SelectedNode);  //builds leaf nodes from database

        //close menus
        removeMultipleItemsToolStripMenuItem.DropDown.Close();
        menuVendorSection.AutoClose = true;
        menuVendorSection.Close();
    }

    private void buttonCancelMultipleDelete_Click(object sender, EventArgs e)
    {
        //just close menus
        removeMultipleItemsToolStripMenuItem.DropDown.Close();
        menuVendorSection.AutoClose = true;
        menuVendorSection.Close();
    } 
```

[![这就是它的样子](../Images/d1ac120156f64f4320843c72b6b9ced4.png)](https://i.stack.imgur.com/o1CJk.jpg)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-14T22:31:00.897

如果有人仍然感兴趣，这里有一个 vb 解决方案：

1) 对于父工具条菜单项，在表单的构造函数中添加以下处理程序：

```
AddHandler ParentTSMI.DropDown.Closing, AddressOf onDropDownClosing 
```

2）处理程序：

```
Private Sub onDropDownClosing(sender As Object, e As ToolStripDropDownClosingEventArgs)
    If e.CloseReason = ToolStripDropDownCloseReason.ItemClicked Then
        e.Cancel = True
    End If
End Sub 
```

就是这样。

关闭表单时不要忘记删除处理程序（RemoveHandler）。

# android - 从视图拖放到视图

> ID：13350172
> 
> 赞同：0
> 
> 时间：2012-11-12T19:27:25.143
> 
> 标签：android, drag-and-drop, tableview, appcelerator

我正在开发 android 应用程序，我的窗口上有 2 个 TableView。每个表视图行都有一个标签，其宽度 = '100%'。我需要实现将这些标签从一个表视图拖放到另一个表视图。请带我去。我正在 Appcelerator Titanium 上开发我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:08:40.030

一切都很简单，答案就在这里

[http://developer.appcelerator.com/question/144674/drag-and-drop-from-view-to-view](http://developer.appcelerator.com/question/144674/drag-and-drop-from-view-to-view)

# facebook - 如果用户登录 Facebook，Facebook Like Buttons 会显示不同的计数

> ID：13350173
> 
> 赞同：1
> 
> 时间：2012-11-12T19:27:26.957
> 
> 标签：facebook, facebook-like, facebook-opengraph

我们在页面上使用 Like 按钮，计数很重要。但是，最近，在查看给定页面时未登录 Facebook 的用户的数量有所减少。

我认为这是因为 Open Graph。当用户登录 Facebook 时，Facebook 似乎计算了按钮上包含开放图形数据的一般喜欢和喜欢。但是当用户没有登录 Facebook 时——这些计数只显示喜欢而不是打开的图表喜欢——从而使数字更低......

这给我们带来了问题——因为我们希望“赞”按钮显示相同数量的赞，无论用户是否登录 Facebook……

任何建议或解决方案表示赞赏....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:18:33.830

这篇文章似乎准确地解释了您正在谈论的场景。从本质上讲，报告的夸大数字是此页面的总参与计数（喜欢和分享）您在哪里寻找粉丝数（有多少人明确点击了喜欢按钮）。

[http://faso.com/fineartviews/21028/facebook-like-button-count-inaccuracy](http://faso.com/fineartviews/21028/facebook-like-button-count-inaccuracies)

# css - wordpress 帖子内容不会扩展其父 div 高度

> ID：13350174
> 
> 赞同：1
> 
> 时间：2012-11-12T19:27:29.647
> 
> 标签：css, height, parent, children, expand

我的班级有 3 个父 div。它们将页面的三个部分分开：页眉、正文和页脚部分。标题没问题。在正文中，我有一个 div，它应该像标尺一样画一条线。

我将循环代码放入这条线以绘制它，但它失败了，所以我设置了一个绝对位置，以便内容增加标尺/线的高度也增加。然后由于某种原因在页脚中我应该设置`position:relative;`但是当我这样做时，页脚 div 出现在 body div 上方。

我该如何解决？

请注意，主体和标尺/线的高度是自动的，当我为主体设置背景颜色时，它没有任何区别。

代码示例：

html

```
<body>
<div class="header">it's own code and classes</div>
<div class="body">
  <div class="line">
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="post">
      <div class="title"><a href="<?php the_permalink(); ?>" rel="bookmark"><h3><?php the_title(); ?></h3></a></div>
      <div class="cont"><?php get_the_excerpt();?></div>
     <?php the_post_thumbnail('45*45'); ?>
  </div>
</div>
<?php endwhile; ?>
<?php endif; ?>
</div>
</div>
<div class="footer"><div class="ftr"></div></div>
</body> 
```

在css部分我有这些：

```
.body {
height:auto;
width:950px;
margin:0 auto 0 auto;
background:#098;
 }

 .line {
width:4px;
height:auto;
background:#000;
position:absolute;
right:640px;
padding-top:100px;
padding-bottom:30px;
 }
 .post{
width: 460px;
height:170px;
background: #fff;
position: relative;
border-radius:10px;
-webkit-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-moz-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-ms-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-o-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
direction:ltr;
float:right;
margin-right:21px;
border-top-right-radius:0px 0px;
 }
     .post:after {
    content: "";
    position: absolute;
    top: 6%;
    margin: -10px 0 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    right: -10px;
    border-left: 10px solid #999;
     }
 .title {
width:90px;
height:15px;
margin-top:-13px;
margin-right:10px;
margin-left:10px;
 }

 .cont{
width:300px;
margin-top:15px;
float:right;
margin-right:13px;
 }
 .footer {
width:999px;
height:200px;
margin:auto;
 }
.ftr {
    width:999px;
    height:200px;
    background:#000;
    position:relative;
    clear:both;
}
    .ftr:after{
        content:"";
        position:absolute;
        top:-9px;
        right:500px;
        border-left:10px solid transparent;
        border-right:10px solid transparent;
        border-bottom:10px solid #06c;
    } 
```

**编辑**：这就是我想要的

```
.body {
height:auto;
width:950px;
margin:0 auto 0 auto;
background:#098;
 }

 .line {
width:4px;
**height:100%;** //this fixed the problem
background:#000;
padding-top:100px;
padding-bottom:30px;
 }
 .post{
width: 460px;
height:170px;
background: #fff;
position: relative;
border-radius:10px;
-webkit-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-moz-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-ms-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
-o-filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
filter: drop-shadow(0 1px 5px rgba(0,0,0,.5));
direction:ltr;
float:right;
margin-right:21px;
border-top-right-radius:0px 0px;
 }
     .post:after {
    content: "";
    position: absolute;
    top: 6%;
    margin: -10px 0 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    right: -10px;
    border-left: 10px solid #999;
     }
 .title {
width:90px;
height:15px;
margin-top:-13px;
margin-right:10px;
margin-left:10px;
 }

 .cont{
width:300px;
margin-top:15px;
float:right;
margin-right:13px;
 }
 .footer {
width:999px;
height:200px;
margin:auto;
 }
.ftr {
    width:999px;
    height:200px;
    background:#000;
    position:relative;
    clear:both;
}
    .ftr:after{
        content:"";
        position:absolute;
        top:-9px;
        right:500px;
        border-left:10px solid transparent;
        border-right:10px solid transparent;
        border-bottom:10px solid #06c;
    } 
```

**编辑2**：我仍然有画线的问题。因为内容是动态的，如果我`height:100%`在像素比例或什`min-height`至内容增加或减少时设置或某事它不会改变行高

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:22:40.843

当您将某些内容放入 时`position:absolute;`，它们会从其容器上下文中取出并且不会展开它们。因此，当您将页脚放入时`position:relative;`，它会落在`div class="body"`结束处，但由于它只包含`line`（这是绝对的），所以正文是空的，因此，页脚出现在页脚“下方”。

如果我明白你想要什么，你可能应该 close `line`，这样“帖子”就不会出现`position:absolute;`。

```
<div class="body">
  <div class="line"></div><!--here-->
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <div class="post"> 
```

# rdf - 使用 SPARQL 获取个人的班级

> ID：13350175
> 
> 赞同：2
> 
> 时间：2012-11-12T19:27:33.613
> 
> 标签：rdf, sparql, owl, rdflib

我想得到一个人所属的班级。更详细地说，我想将参数传递给使用 python（使用 rdflib）的个人方法，方法应该返回它所属的个人的类。

例如：我有一个 AlcoholicBeverage 类，它有 Beer 子类，Beer 类有一个 Brands 子类。在品牌类中有许多代表啤酒品牌的人。我想将参数传递给方法，运行 SPARQL 查询以查找，xyz 是 Brands 类的一个个体。

理想情况下，我还想得到，xyz 是啤酒（因为 Brands 类是 Beer 的子类），而 Beer 是 AlcoholicBeverage。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:44:45.443

怎么样：

```
SELECT ?class WHERE { xyz a ?class . } 
```

请注意，这`a`是简写`rdf:type`- 请参阅[SPARQL 规范](http://www.w3.org/TR/rdf-sparql-query/)第 4.2.4 节

如果超类（AlcoholicBeverage、Beer）已显式添加到您的 RDF 模型中，或者您[启用了推理](https://web.archive.org/web/20131102081900/http://answers.semanticweb.com/questions/1363/whats-the-easiest-way-to-get-rdfsowl-reasoning-for-rdflib)（并且模式已加载到模型中），那么您只会从该查询中获取超类（AlcoholicBeverage、Beer），以便隐式添加它们。

你的模式有点奇怪——啤酒显然是酒精饮料的一个子类，但什么是品牌？为什么不让每个品牌成为 Beer 的子类（暗示个体是实际的实体饮料：“这种饮料是[Old Peculier](http://www.theakstons.co.uk/Ales/Old-Peculier/)，它是一种啤酒”），或者让每个品牌成为 Beer 的个体：“ [Old Peculier](http://www.theakstons.co.uk/Ales/Old-Peculier/)是啤酒”，例如。品牌似乎是一种在正式模式中没有意义的非正式占位符？当您的其他类名是单数时，为什么 Brands 是复数？

# algorithm - 使用标准集优化资源分配

> ID：13350182
> 
> 赞同：2
> 
> 时间：2012-11-12T19:27:55.983
> 
> 标签：algorithm, sorting, greedy

一位垂死的父亲对剥离他的财产很感兴趣。他有一个这样的投资组合：

```
AAPL : 5,000
MSFT : 10,000
AMZN : 6,000 and etc 
```

我们知道不同类型股票的数量是有限的，持有的股票总数是有限的

他有许多遗产受益人，我们不知道这个数字，但我们知道它是有限的。我们知道，每个受益人都有不同的要求，要求的数量是有限的。

例如：

```
Case 1:
    Charity X can only take 3,000 shares of AAPL and 6,000 share of MSFT
    Leftover  : 2,000 shares of AAPL, 4,000 shares of MSFT, 6,000 shares of AMZN

Case 2:
    Charity X can only take 3,000 shares of AAPL and 6,000 share of MSFT
    Charity Y can ony take 1,000 shares of AAPL
    Leftover  : 1,000 shares of AAPL, 4,000 shares of MSFT, 6,000 shares of AMZN 
```

**是否有一种算法能够：**

*   返回 1 个受益人、或 2 个受益人或 3 个受益人等的最佳股票分配

*   原始垂死父亲的投资组合中的剩余最少 - 如果知道股票要求的类型以及每个受益人对该类型股票数量的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:06:38.317

这可以通过某种形式的[线性规划](http://en.wikipedia.org/wiki/Linear_programming)来解决。

它完全符合线性规划问题的定义：您有一组非负变量：每个人的每只股票的数量，包括“剩余”部分。您对它们有一组限制：一个分数可以持有的最大份额数。你有一个最大化的目标函数！剩余股票的数量应最小化，即其负数应最大化。

我不是财务人员，但我想你不能拥有零碎股份。在这种情况下，问题变得更加困难，因为您的所有数字都必须是整数。这被称为“整数线性规划”（ILP）。在许多实际解决方案中，这可能是[NP-hard](http://en.wikipedia.org/wiki/NP-hard)。但是，如果您的数字不太奇怪，您的实例可能会得到有效解决。ILP 求解器也得到了很好的研究，因为很多问题都可以映射到它们。还要检查[这个答案](https://stackoverflow.com/questions/2791559/how-to-choose-an-integer-linear-programming-solver)。

# mongodb - Mongoose 返回的数据是不可变的吗？

> ID：13350185
> 
> 赞同：15
> 
> 时间：2012-11-12T19:28:13.550
> 
> 标签：mongodb, mongoose

我想添加到来自猫鼬查询的返回数据：

```
User.findById(userId, function(err, data) {
  if (!err) {
    data.newvar = 'Hello, world';
  }
}); 
```

但是，当我控制台记录输出时，newvar 不存在。我也尝试过使用下划线的扩展：

```
_.extend(data, {'newvar': 'Hello, world'}); 
```

也没有运气。因为我有嵌套文档，所以使用浅拷贝是行不通的。有没有办法在这里附加数据？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-12T19:49:58.570

处理此问题的一种方法是将您的 mongoose 模型实例转换为一个普通对象，您可以通过调用它来完全控制[`toObject()`](http://mongoosejs.com/docs/api.html#document_Document-toObject)它：

```
User.findById(userId, function(err, data) {
  if (!err) {
    data = data.toObject();
    data.newvar = 'Hello, world';
  }
}); 
```

如果您想要一个更结构化的解决方案，您可以将虚拟属性添加到您的架构中，如此[处](https://stackoverflow.com/a/13328312/1259510)所述。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T19:49:43.627

事实证明，Mongoose 文档是它们自己的特殊类，而不是标准的 Javascript 对象。为了获得可扩展的 javascript 选项，您必须使用 toObject() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-27T07:57:52.170

现在您可以使用lea() 方法返回一个普通的 js 对象：

```
User.findById(userId)
  .lean()
  .exec( function(err, data) {
    if (!err) {
      data.newvar = 'Hello, world';
    }
  }); 
```

[为什么不能修改 Mongoose 查询返回的数据（例如：findById）](https://stackoverflow.com/questions/14504385/why-cant-you-modify-the-data-returned-by-a-mongoose-query-ex-findbyid)

# java - 如何在运行时动态加载来自不同项目的类和库

> ID：13350187
> 
> 赞同：1
> 
> 时间：2012-11-12T19:28:41.003
> 
> 标签：java, xml, dynamic, classloader, dynamic-loading

我将解决方案分为 2 个项目：

*   *独立*项目包含接口`ExampleInf`并声明应用程序所需的一些服务。这些服务由第三方 API（[Hadoop](http://hadoop.apache.org/)客户端 API）提供。该项目包含 GUI 组件和其他应用程序逻辑，但不链接提供由`ExampleInf`. 该项目中没有实现类`ExampleInf`。
*   包含第三方库链接的*依赖项目。*该项目包含`ExampleImpl`封装第三方 API 并实现`ExampleInf`.

在*独立*`A`项目中，有一个使用（使用）由 .声明的服务的类（我们称之为类） `ExampleInf`。因为*独立*不链接*依赖*项目，为了使用`ExampleInf`它需要`ExampleImpl`在运行时动态加载它的实现。它还需要动态加载`ExampleImpl`.

目前，这是由一堆常量（属性）完成的，这些常量（`public static final String`属性）包含指向动态加载资源所在的*依赖*`ClassLoader`项目的路径以及大量杂乱的代码。我不认为这是一个好的解决方案。是否有任何模式、最佳实践或通用方法可以做到这一点？你会根据你的经验推荐什么？

这种模式让我想起了 Java EE 中的一些依赖注入。至少我认为最好将需要动态加载到 XML 的类和库 (.jar-s) 的位置外部化，然后循环加载它们，而不是`ClassLoader.loadClass`为每个常量单独调用。有没有什么干净的方法可以在同一个包中加载 XML 并加载该 XML 指定的类和 jar？代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:40:09.920

您可以使用[ServiceLoader](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)实用程序来执行此操作（这是加载了多少 jdk 服务，例如 xml 库和现代 jdbc 驱动程序库）。如果依赖项目在启动时是类路径的一部分，那么你就可以开始了（假设它设置正确）。否则，您需要在嵌套类加载器中加载依赖项目并将其传递给`load(Class,ClassLoader)`方法（或在调用之前将类加载器设置为当前上下文类加载器`load(Class)`）。

# heroku - 用于 SFTP 的 Heroku 静态 IP

> ID：13350188
> 
> 赞同：1
> 
> 时间：2012-11-12T19:28:45.393
> 
> 标签：heroku, amazon-ec2

我有一个应用程序部署到 Heroku。我正在使用一项服务，该服务要求我使用静态 IP 地址访问他们的 SFTP 服务器。我知道 Heroku dynos 在这方面是不可靠的。我已经使用 Proximo 插件成功地实现了这一点，但是，对于我将要发送的流量（大约 500 MB/月）来说，它太贵了。有替代方案吗？我倾向于使用 EC2 实例，但不太确定创建代理需要什么或其他什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:58:21.053

我会选择 EC2 微型实例；推动位并不会真正消耗太多 CPU，因此不太可能受到限制。然后，我会为该实例提供一个弹性 IP 地址，并将该地址传达给其他服务。（无论我以后选择做什么，我总是可以启动另一个实例并将其与该 IP 相关联。）然后我会部署一个 SOCKS 代理（[Dante](http://www.inet.no/dante/doc/1.3.x/config/server.html)？）；SOCKS 有相当广泛的应用程序支持，它可以很好地处理 SFTP。

从这里，有一些特定于 Heroku 的详细信息——其中之一，您需要配置代理服务器的 EC2 安全组，以便 Heroku 可以访问它（请参阅[Dynos 和 Dyno Manifold](https://devcenter.heroku.com/articles/dynos#connecting-to-external-services)）。您还需要在 SOCKS 服务器上启用身份验证，因为授予 Heroku 访问您的代理的权限会授予 Heroku 中的*每个人*访问您的代理的权限。然后，`heroku config:set SOME_SERVICE_SOCKS_PROXY=socks://user:pass@ip-10-1-2-3.ec2.internal`让您的应用程序查找该环境变量并执行正确的操作。

您可能会为您的代理和 Heroku 之间的区域内数据传输支付 0.01 美元/GB，因为从统计上讲，您的应用程序大部分时间都处于不同的可用区。Heroku dynos 在生产中持续大约 24 小时，因此虽然确切的位置会在不可预测的情况下跳舞，但它的总价可能会落在 0.008 美元/GB 的范围内。您还将为微型实例本身（尽管[保留实例](http://aws.amazon.com/ec2/reserved-instances/#heavyUtilizationRI)使它们变得愚蠢便宜）以及通常的 AWS Internet 数据传输速率付费。

# html - 使用 div-css 复制表

> ID：13350192
> 
> 赞同：0
> 
> 时间：2012-11-12T19:29:00.323
> 
> 标签：html, css, html-table

我有一个网站 wallz.moon.pk，它是一个壁纸集合，在我显示缩略图的画廊上，我创建了一个鼠标悬停效果，对于鼠标，缩略图上显示一个半透明条，以便用户可以选择适当的答案。 .

我对 DIV 不太擅长，所以我放了一个表格来创建我想要的效果，在[这里查看](http://wallz.moon.pk/)，我使用了以下代码：

```
<div id="i551" class="actions">
<table width="100%" cellpadding="0" cellspacing="0">
<tr>
    <td align="center" colspan="2"><h2>Water Bubbles</h2></td>
</tr>
<tr>
    <td width="50%">
        <a href="Water+Bubbles.html" class="acthuns">Open Here</a>
    </td>
    <td width="50%">
        <a href="Water+Bubbles.html" class="acthuns" target="_blank">
            + New Tab </a>          
    </td>                                   
</tr>                           
</table>                    
</div> 
```

我的问题是如何转换上面的表格并使用 DIV 和 CSS 样式来获得相同的效果......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:34:12.327

这是一个简单的方法：

[http://jsfiddle.net/tNms9/3/](http://jsfiddle.net/tNms9/3/)

HTML

```
<div id="i551" class="actions">
    <div class="row">
        <h2>Water Bubbles</h2>
    </div>
    <div class="row">
        <div class="cell">
            <a href="Water+Bubbles.html" class="acthuns">Open Here</a>
        </div>
        <div class="cell">
            <a href="Water+Bubbles.html" class="acthuns" target="_blank">
            + New Tab </a>            
        </div>          
    </div>                   
</div>​ 
```

CSS

```
.actions{ width:400px; }
.row { width:100%; overflow:hidden; background:lime; }
.cell {width:45%; padding:10px; float:left; background:orange; }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:31:31.987

在 CSS 2.1 中，该`display`属性具有*Table 模型值*，允许您将元素的显示设置为每个`<table>`已知元素：[https ://developer.mozilla.org/en-US/docs/CSS/display#Values](https://developer.mozilla.org/en-US/docs/CSS/display#Values)

PS：它不适用于IE7-。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:36:43.950

提供的代码将生成第一行图像。你可以弄乱百分比来获得你想要的空白，但这里是基本的想法：

CSS：

```
.tile-container {
    width:100%;
    margin-left:-2%; /* offsets the first column of tiles */
}
.tile {
   float:left;
   width:23%;
   margin-left:2%;
   margin-bottom:2%;
} 
```

HTML：

```
<div class="tile-container">
    <div class="tile>
       <!-- Image + other markup goes here -->
    <div>
    <div class="tile>
       <!-- Image + other markup goes here -->
    <div>
    <div class="tile>
       <!-- Image + other markup goes here -->
    <div>
    <div class="tile>
       <!-- Image + other markup goes here -->
    <div>
</div> 
```

# c# - NHIbernate 刷新集合

> ID：13350199
> 
> 赞同：6
> 
> 时间：2012-11-12T19:29:34.993
> 
> 标签：c#, nhibernate, collections

我知道有人问过这个问题，但我无法解决这个问题。

假设您有一个具有集合的休眠对象。

问题是，如果集合中的某些对象由不同的用户在数据库中更新（我手动修改数据库以进行测试），我似乎无法找到让 nhibernate 刷新集合值的方法。

我已经尝试过刷新、驱逐、再次加载......只有关闭会话并创建一个新的工作。但我发现这个解决方案有问题，告诉 nhibernate “老兄，刷新集合中的项目”有多难？

但无论如何我无法让它工作。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:54:46.417

这实际上不应该起作用，这就是为什么它不起作用。

NHibernate 默认使用会话级缓存来优化读取和跟踪修改。

听起来您没有围绕数据访问使用正确的工作单元，因为您的会话应缩小范围并仅在需要时使用。

如果这是 Web 应用程序的一部分，建议您遵循“每个请求的会话”方法。

如果你真的想让这个工作，你可能会从会话中驱逐实体和它的孩子，强制重新获取，但这很讨厌，我真的不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T10:54:26.853

费尽心思试图驱逐，甚至考虑过开会和闭会。听起来您的代码中似乎有足够的空间来考虑进行过滤获取，即获取集合类型的所有项目，其中父 id 是父对象的。您可能需要扩展您的存储库或 dao，具体取决于您使用 NH 的方式，但正如其他人所说，没有示例很难更具体。要点是您在该类型的查询中获取子对象，并按父 ID 过滤。

这将是一个全新的获取，因此您将获得由其他进程创建的任何新的或更改的对象，然后您可以将该集合设置为父对象中的集合。当您尝试保存时，NH 应该克服这个问题，因为它可以对您的对象做出假设并根据需要保存或更新。如果在获取父对象和再次保存它之间可能存在一些时间延迟，这可能对您有用。

这种方法的问题是需要一种合并类型的操作。您可能希望添加在进程中创建的任何新对象，以便在更新集合时不会丢失您的更改。希望这会有所帮助，如果您仍然卡住，请给我们更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T18:27:52.657

您应该在 SessionFactory 类中实现 IDispose 接口。

像这样：

```
public class YouSessionFactory : INHibernateSessionFactory, IDisposable
{
    private ISessionFactory _sessionFactory;

    //codes for initial _sessionFactory, for configuration,mapping or something else.
    //balalalalalala
    //....

    public ISessionFactory BuildSessionFactory()
    {
        return _sessionFactory;
    }

    public void Dispose()
    {
        if (!_sessionFactory.IsClosed || _sessionFactory != null)
        {
            _sessionFactory.Close();
            _sessionFactory.Dispose();
        }
    }
} 
```

# open-source - 在 Linux Mint 13 上编译 CMU PocketSphynx

> ID：13350202
> 
> 赞同：0
> 
> 时间：2012-11-12T19:29:57.663
> 
> 标签：open-source, voice-recognition, cmusphinx, linux-mint

我已经在 Linux Mint 13（基于 Ubuntu 12.04 LTS）上安装了 CMU Sphynx，但我根本找不到任何示例：

1.  如何以最简单的方式测试它是如何工作的？我想从命令行启动它并识别任何 .wav 文件。我读过文档，但只有 c++ 或 python 示例，没有 pocketsphynx_continious 示例

2.  我在哪里可以在 Mint 获得 /dev/dsp 设计？我已经为 alsa 和 pulseaudio 安装了所有开发库 - 根本没有 /dev/dsp。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:40:48.817

从麦克风识别

```
pocketsphinx_continuous 
```

识别文件（16khz mono 16bit）

```
pocketsphinx_continuous -infile file.wav 
```

要创建 /dev/dsp 需要为 oss 加载内核驱动程序

```
modprobe snd_pcm_oss 
```

开发库用于开发，而不是用于 /dev/dsp。安装开发库后，需要重新编译并重新安装 sphinxbase。它将检测开发库并使用 alsa 代替 oss。

# c# - 编译语言的 REPL 解释器如何工作？

> ID：13350204
> 
> 赞同：2
> 
> 时间：2012-11-12T19:30:01.577
> 
> 标签：c#

我什至无法开始理解它们是如何工作的，我猜这是一个非常广泛的问题。怎么可能将 C# 之类的语言编译为 CLR 的 IL，然后在运行时进一步将 JIT 编译为机器代码，并为它编写一个解释器或 REPL，就像在[mono](http://www.mono-project.com/CsharpRepl)项目中实现的那样。他们是如何做到这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:36:08.393

问题是什么？机器代码只是一些数据（位于可执行的虚拟内存页面中）。您可以生成该数据，然后，因为它也是代码，所以运行它。

您可以通过各种方式在内存中生成机器代码。例如，您可以使用[LLVM](http://llvm.org/)或[libjit](http://freecode.com/projects/libjit)或许多其他库（甚至自己制作）。

某些语言的一些实现（我在想 Common Lisp 的[SBCL](http://www.sbcl.org/)实现）甚至能够将您交互输入的每一行转换为机器代码。这并不新鲜，一些 1957 年的计算机做到了（例如，法国的[CAB500](http://en.wikipedia.org/wiki/CAB500)用于 PAF）。

您甚至可以生成一些源代码（例如在 C 中），派生编译过程，然后动态加载该代码，例如使用[dlopen(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/dlopen.3.html)。当前的编译器和处理器足够快，可以与延迟兼容，以实现用户友好的交互。我的[MELT](http://gcc-melt.org/)领域特定语言（用于扩展 GCC）成功地做到了这一点。

正如millimoose 评论的那样，[Mono](http://mono-project.com/)是免费软件，所以你可以研究它的代码。

代码和数据的**等价性是计算机的基本属性**。[同样，在哥德尔](http://en.wikipedia.org/wiki/G%C3%B6del)和[图灵](http://en.wikipedia.org/wiki/Turing)的基本见解中数字和演示的等价性（当你听到你最喜欢的 MP3 音乐时，你也会使用它）。

# ruby - Ruby 中的枚举器

> ID：13350207
> 
> 赞同：3
> 
> 时间：2012-11-12T19:30:06.997
> 
> 标签：ruby, enumerable

我在理解 Ruby 中的枚举器时遇到了麻烦。

请纠正我如果我错了，`o.enum_for(:arg)`方法应该将对象转换为枚举器，并且对对象的每次迭代`o`都应该调用`arg`方法？让我困惑的是这行代码是如何工作的

```
[4, 1, 2, 0].enum_for(:count).each_with_index do |elem, index|
  elem == index
end 
```

它应该计算有多少元素等于它们在数组中的位置，并且它有效。但是，我不明白实际发生了什么。`each_with_index`每次迭代都调用count方法吗？如果有人可以解释，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:14:04.053

来自编程 Ruby：

> **计数** *枚举.count {| 对象 | 块 } → int*
> 
> 返回枚举中等于 obj 或块返回真值的对象的计数。

因此，枚举器访问每个元素并在块返回 true 时将计数加 1，这在这种情况下意味着元素是否等于数组索引。

我还没有看到这种模式被大量使用（如果有的话）——我更倾向于：

```
[4, 1, 2, 0].each_with_index.select { |elem, index| elem == index }.count 
```

***编辑***

让我们看一下您评论中的示例：

```
[4, 1, 2, 0].enum_for(:each_slice, 2).map do |a, b|
  a + b
end 
```

`each_slice(2)`一次获取数组 2 个元素并为每个切片返回一个数组：

```
[4, 1, 2, 0].each_slice(2).map # => [[4,1], [2,0]] 
```

调用`map`结果让我们对每个子数组进行操作，将其传递到一个块中：

```
[4, 1, 2, 0].enum_for(:each_slice, 2).map do |a,b|
  puts "#{a.inspect} #{b.inspect}"
end 
```

结果是

```
4 1
2 0 
```

`a`并`b`通过“喷溅”的块参数来获取它们的值：

```
a, b = *[4, 1]
a # => 4
b # => 1 
```

您也可以将数组切片作为参数：

```
[4, 1, 2, 0].enum_for(:each_slice, 2).map {|a| puts "#{a.inspect}"}

[4, 1]
[2, 0] 
```

这可以让你这样做：

```
[4, 1, 2, 0].enum_for(:each_slice, 2).map {|a| a.inject(:+) } #=> [5,2] 
```

或者，如果您有 ActiveSupport（即 Rails 应用程序），

```
[4, 1, 2, 0].enum_for(:each_slice, 2).map {|a| a.sum } 
```

这对我来说似乎比原来的例子更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:58:03.363

`array.count`通常可以采用一个块，但它本身返回一个固定编号，因此它不能`.with_index`像其他一些迭代器（try`array.map.with_index {|x,i ... }`等）那样链接到。

`.enum_for(:count)`将其转换为枚举器，从而允许进行链接。它遍历数组的成员一次，并记录其中有多少等于它们的索引。所以 count 实际上只被调用一次，但只有在将数组转换为更灵活的东西之后。

# macos - mac上的qt创建者，缺少项目模板

> ID：13350216
> 
> 赞同：2
> 
> 时间：2012-11-12T19:30:55.367
> 
> 标签：macos, qt

相信一定有一个简单的解释，我已经下载了最新的sdk，并在10.7.5中使用默认设置安装了它。我以前在 Windows 上使用过 QT，所以我知道如何制作一个项目，但是当我尝试制作一个期望出现这样的东西的项目时：

[http://doc.qt.digia.com/qtcreator/images/qtcreator-new-qt-quick-project-wizard.png](http://doc.qt.digia.com/qtcreator/images/qtcreator-new-qt-quick-project-wizard.png)

但这是我实际看到的：

[http://trollfx.com/qt_whatisee.jpg](http://trollfx.com/qt_whatisee.jpg)

没有可用的 gui 项目，欢迎页面上也没有任何示例。搜索它们什么都不做。我完全被难住了，有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:52:40.017

确保您已正确配置安装 Qt 的目录。它需要知道在哪里可以找到`qmake`实用程序。（具体来说，转到 Preferences|Build & Run|Qt Versions，单击 Add 并找到 qmake 可执行文件）。

顺便说一句，假设您已经安装了 XCode（至少是它的 Unix 命令行开发工具）。与 Windows 相比，Mac 版本不附带编译器。为此，您需要 XCode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:08:53.207

我有同样的问题。

我认为您所做的是您已将 QtCreator 作为独立应用程序下载，并且您缺少实际的 Qt 基本文件。

卸载 QtCreator，然后去[http://qt-project.org/downloads](http://qt-project.org/downloads)下载 Qt 本身，它与 QtCreator 捆绑在一起。

# c++ - 类层次结构和继承（不清楚的任务）

> ID：13350219
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:31:11.483
> 
> 标签：c++, class, inheritance, hierarchy

我在理解任务时遇到了问题：

> “考虑自行车类。鉴于您对自行车的一些常见组件的了解，展示一个类层次结构，其中自行车类从其他类继承，而这些类又从其他类继承。讨论自行车类的各种对象的实例化.讨论从类自行车继承其他密切相关的派生类。编写一个程序来演示你提出的层次结构。

它是如此不精确，以至于我完全不知道我必须展示什么，尤其是我已经完成了一项使用显示继承和使用虚拟类的任务。

你能给我一些例子，你是如何理解这项任务的？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:46:12.450

这*是*一个不好的问题：因为尽管它询问的是继承（例如，“自行车**是**公路车辆”），但它也说“您对自行车的一些常见组件的了解”（例如，“自行车**有**两个轮子”） ，在我看来，这与问题无关。

# vim - 如何限制 vim 的 % 功能？

> ID：13350222
> 
> 赞同：5
> 
> 时间：2012-11-12T19:31:21.947
> 
> 标签：vim, vim-plugin

我有大量 C 代码，并且大部分代码被注释掉和/或#if 0。当我使用 % 键匹配 if-else 的左括号和右括号时，它也匹配注释掉的代码。
有没有一种方法或vim插件在匹配括号时不会考虑注释掉或#if 0代码。

目前我正在使用 snipMate 和 omniComplete vim 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T07:54:31.623

正如 david 所提到的，matchit 插件能够跳过评论。`#if 0`但是，插件中没有配置C 语法脚本定义的语法组。创建一个文件`~/.vim/after/ftplugin/c.vim`并将以下内容放入其中：

```
" Make the matchit plugin also skip over sections commented out via #if 0.
let b:match_skip .= '\|cCppOut2' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T22:41:16.290

matchit 插件（包含在 vim 中但未启用）默认情况下应该为注释掉的代码执行此操作。很确定它不适用于`#if 0`代码。签出`:h matchit`并`:h match_skip`

# c# - System.Net.GlobalLog - 我如何查看这个的输出？

> ID：13350227
> 
> 赞同：8
> 
> 时间：2012-11-12T19:31:36.050
> 
> 标签：c#, .net, sockets, logging

.NET 框架中的许多类（尤其是在套接字/网络类中，这是我正在查看的）使用 System.Net.GlobalLog（一个内部类）在某处记录跟踪消息。您可以在 SslState 类中查看 GlobalLog.Assert 和 GlobalLog.Print 之类的示例用法：

[SslStream 源代码](http://www.wikiencyclopedia.net/FX-1434/1.0/untmp/whidbey/REDBITS/ndp/fx/src/Net/System/Net/SecureProtocols/_SslStream.cs/2/_SslStream.cs "SslStream 源代码")

这与 System.Net.Logging（也是内部）类不同，它的使用也可以在整个套接字/网络类中找到。

对于 System.Net.Logging，我知道我可以在 App.Config 中使用 <system.diagnostics> 配置块，如果配置正确，这将导致 System.Net.Logging 消息被记录。但是，这似乎不会影响 System.Net.GlobalLog。

搜索了大约一个小时后，我似乎找不到任何有关定位 System.Net.GlobalLog 输出的信息。有谁知道如何定位/查看/控制这个的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:02:56.957

正如您所说，GlobalLog 是 System.Net 程序集的内部类。如果无法修改 System.Net 程序集，您将无法访问该类。

也就是说，您可能需要查看以下内容：[http ://www.123aspx.com/rotor/RotorSrc.aspx?rot=42941](http://www.123aspx.com/rotor/RotorSrc.aspx?rot=42941)

看起来你必须有编译器标志`TRAVE`并`DEBUG`设置它才能让它工作..但我没有看到它实际上在哪里对记录的信息做了任何事情。评论表明它应该寻找环境变量设置并将日志转储到系统某处的文本文件中；但是该页面上的代码似乎不完整或根本没有完成。

我的猜测是您需要找到其他方法来访问所需的日志记录信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T21:25:01.310

我没有足够的代表将其作为对现有答案的评论，但我想弄清楚 TcpClient 和 Socket 类中发生了什么，但也发现它们无法进入。我得到的最接近的方法是监视正在进行的 Windows API 调用。我使用了一个名为 API Monitor 的免费软件工具，在这里可以找到：[http](http://www.rohitab.com/apimonitor) ://www.rohitab.com/apimonitor 。

# ios - UIScrollView 不会作为子视图在里面滚动

> ID：13350229
> 
> 赞同：0
> 
> 时间：2012-11-12T19:31:47.403
> 
> 标签：ios, uiview, uiscrollview

我有一个 UIViewController 和一个 UIScrollView。由于我必须向视图控制器添加多个视图，而滚动视图只是其中之一，因此我尝试将控制器的视图设置为虚拟 UIView 并将滚动设置为子视图，如下所示：

```
 [self setView:[[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]];
    [[self view] setUserInteractionEnabled:NO];

    // TDHexMapScrollView inherits from UIViewController
    [self setHexMapScrollView:[[TDHexMapScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]];
    [[self view] addSubview:[self hexMapScrollView]]; 
```

这样滚动不起作用。将其添加为主视图可以使滚动和平移正常工作：

```
 [self setHexMapScrollView:[[TDHexMapScrollView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)]];
    [self setView:[self hexMapScrollView]]; 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:53:03.933

我的评论没有得到回复，但我想我会向你展示我如何去做这件事的一个例子。

宣布

```
CGSize scrollSize; 
```

在您的实施中。然后创建你的滚动视图、视图、标签等。

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, screenFrame.size.width, screenFrame.size.height - self.tabBarController.tabBar.frame.size.height - self.navigationController.navigationBar.frame.size.height)];
self.scrollView.scrollEnabled = YES;
scrollSize.height = self.View1.frame.size.height + self.Label1.frame.size.height + self.Label2.frame.size.height + self.Label3.frame.size.height + self.Label4.frame.size.height + self.Label5.frame.size.height + self.Label6.frame.size.height;
scrollSize.width = screenFrame.size.width;
[self.scrollView setContentSize:scrollSize]; 
```

添加到滚动视图

```
[self.scrollView addSubview:self.View1];
//Repeat for all views / labels / etc 
```

将滚动视图添加到 ViewController

```
[self.view addSubview:self.scrollView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:39:05.740

不要这样做：

```
[[self view] setUserInteractionEnabled:NO]; 
```

这会禁用视图和所有子视图的交互。这意味着它会忽略触摸事件并且不会将它们传播到其子视图，这意味着您的滚动视图不会收到任何事件。

# c - 我在哪里可以找到源代码来“真正”了解标准函数在 stdio.h 中的作用？

> ID：13350231
> 
> 赞同：2
> 
> 时间：2012-11-12T19:31:49.520
> 
> 标签：c, header-files, stdio

作为一个新手，像我一样，很难在头文件（例如 stdio.h）中搜索 getchar() 之类的函数。不知何故，我在某个地方找到了一些信息，在查看头文件以“了解事情是如何工作的”时，我不应该害怕这些信息。（C++ Primer Plus，斯蒂芬·普拉塔）

至少可以说，我对头文件非常缺乏经验，一般来说，programmig 也是如此。

在我试图找到 getchar() 的过程中，我发现 stdio.h 只是分支到越来越多的标头，并且定位 getchar() 变得越来越复杂和耗时，而我从未找到它。很明显，我做错了，我的意图只是为我正在使用的函数找到一些源代码。

因此，我的问题是：我在哪里可以找到源代码来真正“理解”标准函数“真正”在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:38:59.623

如果您正在寻找变量顺序的声明或其他使用说明，只需使用[在线参考](http://en.cppreference.com/w/c)或`man`.

* * *

如果您正在寻找实际代码，请查看 C 标准库的实现，例如 GNU 的[libc](http://www.gnu.org/software/libc/)。

不过值得注意的是，实现并不简单，它们的依赖关系图非常广泛。他们也倾向于在比我们大多数人习惯的更低的水平上与机器进行交互。

考虑 libc 的[getchar](http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=libio/getchar.c;hb=HEAD)实现：

```
int
getchar ()
{
  int result;
  _IO_acquire_lock (_IO_stdin);
  result = _IO_getc_unlocked (_IO_stdin);
  _IO_release_lock (_IO_stdin);
  return result;
} 
```

可能不是你所期望的:)。

（注意：不知道这对 C 有多大的参考价值——它只是我通常用于 C++ 的那个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:34:20.617

你不应该搜索头文件，你应该使用[手册页](http://www.linuxmanpages.com/)或[MSDN](http://msdn.microsoft.com/en-us/library/ms123401.aspx)帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:34:39.553

C 标准不要求标准头文件（如`stdio.h`）物理存在。它们可以只是内置的。

如果您不知道函数的参数或返回值，请阅读 C 标准或手册页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T19:37:59.133

在 C 中，头文件用于（包含）预声明函数。预先声明的函数可能是您自己的，实现在另一个（或相同的）.c 文件中，也可能是已编译的库。stdio.h 是最后一个示例。

您不必在头文件中查找函数声明。尝试使用谷歌输入“男人”

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T19:38:34.083

这有点像修改可执行文件 explorer.exe 以在 Windows 中执行一个简单的操作。这些是基本文件，保留它们并直接在文件中编写您的功能。此外，如果搜索和更改文件是个问题，请确保您使用的是 IDE，而不是尝试通过记事本或其他类似程序手动执行操作。

# jquery - 如何修复此代码中的 XSS 漏洞？

> ID：13350234
> 
> 赞同：0
> 
> 时间：2012-11-12T19:32:06.103
> 
> 标签：jquery, xss

这是我的搜索功能

```
$('#productSearch').live('focus',function(){
    $(this).stop().animate({'width':'200px'}, 600);
    var searchterm = encodeURIComponent($('#productSearch').val());
    if (searchterm != '') {
        $('.ajax-search-results').show();
        $('.ajax-search-results').load('<?php echo get_template_directory_uri(); ?>/ajax/search.php?type=product&s=' + searchterm);
    }
}); 
```

我刚刚收到警报说它包含 XSS 漏洞，但我不知道如何修复它，也不知道它在哪里。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:35:17.667

**您可以使用变量searcterm**遵循以下规则：

[https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#XSS_Prevention_Rules](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#XSS_Prevention_Rules)

# asp.net-mvc - MVC4 发布 HTML 和验证错误

> ID：13350246
> 
> 赞同：0
> 
> 时间：2012-11-12T19:32:55.010
> 
> 标签：asp.net-mvc, asp.net-mvc-4

因此表单可能只显示验证错误（例如不允许使用 HTML）而不是抛出异常

> 从客户端检测到潜在危险的 Request.Form 值

当我在输入中包含 HTML 时。我不想接受 HTML，但我也不喜欢例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:49:55.350

在 ASP .NET 4.0 中，默认情况下为所有请求启用请求验证。

[http://www.asp.net/whitepapers/aspnet4/break-changes](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

您仍然可以强制您的应用忽略此检查。

详情见链接：-

[ValidateRequest="false" 在 Asp.Net 4 中不起作用](https://stackoverflow.com/questions/2673850/validaterequest-false-doesnt-work-in-asp-net-4)

但是，我不会提倡这种策略。最好在**发送到服务器*****之前*****尝试使用 Javascript 验证文本，***以确保它不包含任何会触发 ValidateRequest 行为的字符。*

 *这个问题涵盖了所有这些角色：-

[ValidateRequest 设置为 true 时，哪些字符或字符组合无效？](https://stackoverflow.com/questions/3118876/what-characters-or-character-combinations-are-invalid-when-validaterequest-is-se)

如果您的用户没有启用 Javascript，您仍然会遇到错误。在那种（罕见的）情况下，您可以回退，`customErrors`以便至少显示比黄色错误页面更漂亮的东西。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T19:40:24.967

您可以在 web.config 文件中处理错误的应用程序行为：

```
</system.web>
…
   <customErrors defaultRedirect="/ErrorPage" mode="RemoteOnly"></customErrors>
…
</system.web> 
```

此外，除了指定是否显示详细错误之外，您还可以将用户重定向到特定页面以向他显示您设计的自定义错误页面。

有关此检查[msdn 对 customErrors 元素的解释的更多信息](http://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.71%29.aspx)*

# socket.io - 当 socket.io 房间清空时，你能触发一个事件吗？

> ID：13350253
> 
> 赞同：2
> 
> 时间：2012-11-12T19:33:44.820
> 
> 标签：socket.io

背景：我正在制作一个非常基本的多人在线游戏服务器，其中每个游戏都包含在它自己的房间中，并且它的游戏数据（包括它的房间名称）在 GAMES 数组中，我想在房间时从数组中删除游戏数据不复存在。

我希望有这样的东西

```
socket.io.rooms.on('disconnect', function(roomID){
 //PSEUDO CODE// 
 //delete GAMES.getby(gameID:roomID)//
}); 
```

否则，我计划循环遍历游戏数组，并在套接字断开连接并删除任何不一致时将房间名称与 io.sockets.manager.rooms 数据进行比较。但我确信必须有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T07:31:19.283

`io.sockets.clients('room')`将为您提供当前房间中的套接字列表，因此您可以执行以下操作：

```
if(io.sockets.clients('room').length > 1){
     //delete room logic here
 } 
```

希望有帮助！

# c# - 按相同值和连续日期分组

> ID：13350262
> 
> 赞同：1
> 
> 时间：2012-11-12T19:34:21.957
> 
> 标签：c#, linq, linq-group

```
var myDic = new SortedDictionary<DateTime,int> () 
                { { new DateTime(0), 0 },
                  { new DateTime(1), 1 },
                  { new DateTime(2), 1 },
                  { new DateTime(3), 0 },
                  { new DateTime(4), 0 },
                  { new DateTime(5), 2 }
                }; 
```

如何像这样对这些项目（使用 LINQ 请求）进行分组：

```
group 1 : 
  startDate: 0, endDate:0, value:0
group 2 : 
  startDate: 1, endDate:2, value:1
group 3 : 
  startDate: 3, endDate:4, value:0
group 4 : 
  startDate: 5, endDate:5, value:2 
```

组由连续的日期和相同的值定义。

可以使用 groupby 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:08:44.750

只需使用 keyGenerating 函数。此示例假定您的日期已经在源中排序，没有间隙。

```
int currentValue = 0;
int groupCounter = 0;

Func<KeyValuePair<DateTime, int>, int> keyGenerator = kvp =>
{
  if (kvp.Value != currentValue)
  {
    groupCounter += 1;
    currentValue = kvp.Value;
  }
  return groupCounter;
}

List<IGrouping<int, KeyValuePair<DateTime, int>> groups =
  myDictionary.GroupBy(keyGenerator).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:58:34.053

看起来您正在尝试根据值的变化对连续日期进行分组。我认为您不应该使用 linq 进行分组。相反，您应该使用 linq 对日期进行排序并遍历该排序列表以创建您的组。

**附加 1** 虽然您可以使用`.Aggregate()`. 我仍然认为这是错误的做法。

您的数据是否必须作为`SortedDictionary`? 我只是猜测，但这些可能是按时间顺序排列的记录。

如果是这样，请执行以下操作：

```
 public class Record
    {
        public DateTime Date { get; set; }
        public int Value { get; set; }
    }

    public class Grouper
    {
        public IEnumerable<IEnumerable<Record>> GroupRecords(IEnumerable<Record> sortedRecords)
        {
            var groupedRecords = new List<List<Record>>();
            var recordGroup = new List<Record>();
            groupedRecords.Add(recordGroup);

            foreach (var record in sortedRecords)
            {
                if (recordGroup.Count > 0 && recordGroup.First().Value != record.Value)
                {
                    recordGroup = new List<Record>();
                    groupedRecords.Add(recordGroup);
                }

                recordGroup.Add(record);
            }

            return groupedRecords;
        }
    } 
```

# android - 通知消息未显示在已启动的活动中

> ID：13350265
> 
> 赞同：0
> 
> 时间：2012-11-12T19:34:38.820
> 
> 标签：android, android-intent, google-cloud-messaging

当我收到通知并单击下拉栏中的选项卡时，消息活动正在启动但不显示收到的消息。

在消息活动处于活动状态时，下一条消息显示良好。

我怎样才能显示第一条/打开消息？

谢谢。

GCMIntentService.java（部分）

```
private static void generateNotification(Context context, String message) {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, MessageActivity.class);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);      

    } 
```

MessageActivity.class

```
public class MessageActivity extends Activity {
    // label to display gcm messages
    TextView lblMessage;

    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();

    // Connection detector
    ConnectionDetector cd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_message);

        cd = new ConnectionDetector(getApplicationContext());

        // Check if Internet present
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(MessageActivity.this,
                    "Internet Connection Error",
                    "U heeft geen verbinding met internet!", false);
            // stop executing code by return
            return;
        }

        lblMessage = (TextView) findViewById(R.id.lblMessage);

        registerReceiver(mHandleMessageReceiver, new IntentFilter(
                DISPLAY_MESSAGE_ACTION));
    }       

    /**
     * Receiving push messages
     * */
    private final BroadcastReceiver mHandleMessageReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
            // Waking up mobile if it is sleeping
            WakeLocker.acquire(getApplicationContext());
            // Showing received message
            lblMessage.append(newMessage + "\n");           
            Toast.makeText(getApplicationContext(), "Nieuw bericht: " + newMessage, Toast.LENGTH_LONG).show();

            // Releasing wake lock
            WakeLocker.release();
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:42:12.960

好吧，我是这样解决的：

在 GCMIntentService.java 中添加

```
notificationIntent.putExtra("message", message);
PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT ); 
```

并在 MessageActivity.class

```
TextView message= (TextView) findViewById(R.id.lblMessage);
message.setText(getIntent().getExtras().getString("message")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:49:26.087

您`BroadcastReceiver`仅在`MessageActivity`运行时注册。您需要在清单中注册它，以便它在`MessageActivity`不运行时工作。

您需要扩展 IIRC`BroadcastReceiver`才能执行此操作。

# html - 在 Retina 中显示良好的 HTML 中的图像图标

> ID：13350267
> 
> 赞同：0
> 
> 时间：2012-11-12T19:34:42.900
> 
> 标签：html, css, retina-display

我希望在我的 HTML 中拥有漂亮的图像，这些图像可以在具有 Retina 显示器的计算机的浏览器上很好地显示。`img`我猜我只需要在我的标签中有一个高分辨率图像。但是，较低分辨率的浏览器都必须下载这个更大的文件，然后缩小它，这可能会导致图像质量低于我在 Photoshop 之类的工具中缩小它。

我希望有这样的事情我可以做：

```
<img src="/example.png" src-retina="/example-high-res.png"/> 
```

显示 2 个不同图像的正确方法是什么，1 个用于正常显示，1 个用于视网膜显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:41:34.483

使用[CSS 很容易](http://css-tricks.com/snippets/css/retina-display-media-query/)

使用图像源属性，执行此操作的标准方法较少。我自己检查了一种基于 JS 的方法`window.devicePixelRatio`：

```
<img id="example-img" width="100" height="100"/>
<script>
  if (window.devicePixelRatio > 1) {
    $('#example-img').src = "/example-high-res.png";
  } else {
    $('#example-img').src = "/example.png";
  }
</script> 
```

但如果可以，请使用 CSS 和媒体查询。它干净得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:41:22.910

您需要制作两个（或可能更多）CSS 文件，并在 JS 的帮助下根据用户的浏览器设置使用它们。移动站点的 css 文件应该创建一个在手机中完全可见的新布局。

查看[此 SO Question](https://stackoverflow.com/questions/7479849/screen-and-mobile-stylesheets)以更好地理解该主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:43:09.423

使用响应式设计原则根据设备屏幕分辨率放大或缩小图像大小。

在 CSS 中，您可以定义目标设备的`max-width`和`max-height`。这是您在 CSS 中声明它的方式：

`@media only and (max-device-width:1024px) and (orientation:portrait)`

之后，您必须以百分比指定元素的宽度和高度，相对于父元素。这是可行的方法，但在移动设备上的带宽消耗方面不是最好的方法，因为即使我们将百分比设置得较低，图像也会以其原始大小上传，并且在浏览器解析 CSS 文档后完成缩小。

W3C 提出了一些关于不同设备应如何处理图像的条款，但没有一个被普遍接受和标准化。

最受好评的提议之一是新的`<image>`和`<source>`标签，它接受不同的图像源并根据屏幕分辨率使用最合适的图像尺寸。

```
<picture alt="">

  <!-- low-res, default -->
  <source src="small.jpg">

  <!-- med-res -->
  <source src="medium.jpg" media="(min-width: 400px)">

  <!-- high-res -->
  <source src="large.jpg" media="(min-width: 800px)">

  <!-- Fallback content -->
  <img src="small.jpg" alt="description of image">

</picture> 
```

有一个模仿提议的图片元素的 polyfill：[https ://github.com/scottjehl/picturefill](https://github.com/scottjehl/picturefill)

这里有两篇关于这个概念的彻底解释的文章：

[http://nicolasgallagher.com/responsive-images-using-css3/](http://nicolasgallagher.com/responsive-images-using-css3/)

[http://css-tricks.com/on-responsive-images/](http://css-tricks.com/on-responsive-images/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T19:44:40.107

有几种不同的方法，它们都有优点和缺点。苹果自己实际上为视网膜设备提供了视网膜和标准图像，这很有效，但显然会导致下载量很大。

如果你想要半自动化的东西，试试[Retina.js](http://retinajs.com/)。从描述：

> 当您的用户加载页面时，retina.js 会检查页面上的每个图像，以查看您的服务器上是否有该图像的高分辨率版本。如果存在高分辨率变体，脚本将就地交换该图像。
> 
> 该脚本假定您使用 Apple 规定的高分辨率修饰符 (@2x) 来表示服务器上的高分辨率图像变体。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T19:42:03.187

您可以使用带有 css 背景定义的 div 来指定图像。当客户端是具有“视网膜显示器”的 Apple 设备时，使用 css 媒体查询可以选择正确的 css 定义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T20:08:35.277

你可以用 jQuery 做到这一点：

HTML：

```
<img src="/example.png" src-retina="/example-high-res.png"/> 
```

Javascript：

```
 if (window.devicePixelRatio > 1) {
    $('img').each(function() {
      var src_retina = $(this).attr("src-retina");
      $(this).attr("src", src_retina);
    });
  } 
```

这个演示展示了它的工作方式：http: [//jsfiddle.net/TLz7S/](http://jsfiddle.net/TLz7S/)。

注意：我可能检测到视网膜显示错误；我其实没有。如果有人发现不正确，请告诉我。

# java - 通过 php 启动和停止 minecraft（java 进程）

> ID：13350268
> 
> 赞同：3
> 
> 时间：2012-11-12T19:34:49.990
> 
> 标签：java, php, linux, process, minecraft

好的，让我再试一次。:-)

如果我尝试：

```
<?php
exec("java -Xms1024M -Xmx1024M -jar craftbukkit-1.4.2-R0.2.jar -o true");
?> 
```

网页永远不会返回。我相信这是因为 CGI 正在等待该过程完成，当然它永远不会这样做，因为它是一个服务器。

我在本地尝试这个，如果我在终端中输入相同的命令，它会按预期运行，所以我知道命令行没有问题。

所以……问题是：

1) exec 会阻塞直到进程完成？2）如果不是，这里发生了什么，如果是，我该如何改变这种行为？

==================================================== ===========

所以这确实是一个通用问题，但我已经包含在特定环境中，这可能有助于解释我为什么要这样做。这一切都在 LINUX 上。

我想从 PHP 页面远程启动 Java 进程。诀窍当然是该进程将继续运行，并且我希望在该进程成功启动后完成 PHP 页面。

那么，首先我该怎么做？我已经尝试了很多我读过的东西，但无法让它们工作。

第二部分有点棘手。停止 minecraft 服务器的方式是在终端中键入“停止”。当然，您可以在那里输入其他命令来执行其他操作……它只是从标准输入读取。

如果我想停止它，或者向它发送其他命令，我需要从 PHP 脚本连接到标准输入并发送文本或其他内容。

当我启动 java 进程时，我是否将标准输入连接到一个文件，然后从未来的 PHP 脚本写入该文件？我不知道。

只要给我一些关于正确方法的指示，我就会尝试它们。我会让你知道他们是否有效，或者我是否有更详细的问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:41:35.017

在 php 中，您可以使用函数 exec(); IE：

```
<?php
    if($method == "start"){
        exec("java -jar minecraft_server.jar");
    }else if($method == "stop"){
        exec("pkill java");
    }
?> 
```

我不熟悉 Minecraft 的确切命令，但这是它背后的理论。

**编辑**

你用过“[屏幕](http://www.oreillynet.com/linux/cmd/cmd.csp?path=s/screen)”这个程序吗？

使用以下命令创建一个运行 Minecraft 服务器的新分离屏幕：

```
screen -dmS Minecraft /home/username/minecraft/launch.sh 
```

这将创建一个名为 Minecraft 的新屏幕，并执行 launch.sh，这是我的世界服务器附带的脚本。这一切现在都将在后台运行，并且不会占用 shell。

要将命令发送到此运行屏幕，您可以使用：

```
screen -S Minecraft -X stuff $'stop\n' 
```

发送停止命令。

# javascript - How does one use Javascript to select a value from a drop down list and pass that value as a var to another function?

> ID：13350270
> 
> 赞同：0
> 
> 时间：2012-11-12T19:34:53.593
> 
> 标签：javascript

I know this is simple, but I can't get it working. I'm hoping someone here can help.

First off, this is part of a web app for iOS.

Okay, I have a list of items:

```
Room Type: <select id="isoList" name="isoList">
<option></option>
<option value="20">ISO 8 Life Sciences Low Use</option>
<option value="25">ISO 8 Life Sciences Med Use</option>
<option value="30">ISO 8 Life Sciences High Use</option>
</select> 
```

I need to have the user select the room type, then pass the option value - as a var - to another function that uses the var in a calculation.

Here's the script I have to far. My form is named airflow...

```
function isoChange()
{
var isoChange = document.airflow("isoList");
var airChanges = isoChange.options[isoList.selectedIndex].value;
} 
```

Now I want to pass airChanges to this function...

```
function calcAF(airChanges)
{
var length = document.airflow.length.value; //length
var width = document.airflow.width.value; //width
var height = document.airflow.height.value; //height
var changes = airChanges; // hourly air changes
} 
```

From there the calcAF function will use the var in various math formulae.

I've got it to work if I get the user to tell me airChanges, but it breaks when I try to get the airChanges from a drop down list.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:37:14.507

Maybe I don't understand the problem, but from what I understand, the `isoChange` function should look like this:

```
function isoChange()
{
   var isoChange = document.airflow("isoList");
   var airChanges = isoChange.options[isoList.selectedIndex].value;
   calcAF(airChanges);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:42:29.240

The *onchange* event of a <select> element will be triggered every time the selection changes

```
document.getElementById('isoList').onchange = function() { 
    calcAF(this.value);
}​ 
```

Working example here: [http://jsfiddle.net/hba9a/5/](http://jsfiddle.net/hba9a/5/)

# c# - 数组索引越界错误C#

> ID：13350273
> 
> 赞同：1
> 
> 时间：2012-11-12T19:35:16.097
> 
> 标签：c#, .net, arrays

我有这段代码，我得到错误，并且无法理解为什么我得到错误。代码如下：我使用两个数组一个字符串和一个双精度（数据值及其对应的tinestamp）。但由于某种原因，我收到错误：这一行的索引超出范围错误：

```
 getSelectedItemsObj.arrayOfTimeStamp        = GetItemData(parameterName[counter], fromTime, toTime).arrayOfTimeStamp; 
```

如果我删除这一行并且只使用 arrayOfValue 代码工作正常，但我需要两者

.......... 感谢您的快速回复，这是 GetItemData 的设置方式

```
 public CustomDataType GetItemData(string parameterName, string fromTime, string toTime)
    {

        getWeatherItemObj = new CustomDataType();
        // get the parameter ID
        prameterID = GetParameterInfo(parameterName).ParameterID; 
        //get the nr of items to size value arrays
        tableSize = GetTableSize(parameterName, fromTime, toTime, prameterID);
        getWeatherItemObj.arrayOfValue      = new double[tableSize];            
        getWeatherItemObj.arrayOfTimeStamp  = new string[tableSize];
        counter = 0;
        try
        {
            using (conn = new SqlConnection(connectionString))// create and open a connection object
            {
                // 1\. create a command object identifying the stored procedure
                 cmd = new SqlCommand("GetItemData", conn);
                // 2.Let the command object know we will execute a stored procedure
                cmd.CommandType = CommandType.StoredProcedure;
                // 3\. add the 3 parameters to command, so the can be passed to the stored procedure                  
                cmd.Parameters.Add("@ParameterName", SqlDbType.VarChar).Value    = parameterName;
                cmd.Parameters.Add("@FromTime", SqlDbType.VarChar).Value                = fromTime;
                cmd.Parameters.Add("@ToTime", SqlDbType.VarChar).Value                  = toTime;
                //open connection
                conn.Open();
                // execute the command
                reader = cmd.ExecuteReader();
                if (reader.HasRows)
                {
                    while (reader.Read())
                    {
                        getWeatherItemObj.arrayOfValue[counter]         = (double)reader["MeasurementValue"];
                        getWeatherItemObj.arrayOfTimeStamp[counter]     = reader["MeasurementDateTime"].ToString();                          
                        counter++;
                    }
                } 
                //close connection
                reader.Close();            
            }
        }
        catch (SqlException e)
        {
            Console.WriteLine("Connection failed");
            Console.WriteLine(e.Message);
            Thread.Sleep(5000);
        }           
        return getWeatherItemObj;
    }

 class CustomDataType
{
    public double[] arrayOfValue;
    public string[] arrayOfTimeStamp;

}

public CustomDataType GetSelectedtemsData(string[] parameterName, string fromTime, string toTime)
    {
        numberOfParameters = parameterName.Length;//Get the number of given parameters
        tableSize = 0;
        for (counter = 0; counter < numberOfParameters; counter++)
        {
            tableSize = tableSize + GetItemData(parameterName[counter], fromTime, toTime).arrayOfTimeStamp.Length;               
        }

        getSelectedItemsObj = new CustomDataType();

        getSelectedItemsObj.arrayOfValue        = new double[tableSize];
        getSelectedItemsObj.arrayOfTimeStamp    = new string[tableSize];
        for (counter = 0; counter < tableSize; counter++)
        { 
            getSelectedItemsObj.arrayOfValue            = GetItemData(parameterName[counter], fromTime, toTime).arrayOfValue;
            getSelectedItemsObj.arrayOfTimeStamp        = GetItemData(parameterName[counter], fromTime, toTime).arrayOfTimeStamp;

        }
        return getSelectedItemsObj;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:42:26.570

问题在于你如何对待你的柜台。如果你删除时间戳的东西，计数器永远不会真正被修改，所以一切似乎都可以工作，但如果你有时间戳的东西，那么你的 for 循环初始化程序如下所示：

```
for (counter = 0; counter < tableSize; counter++) 
```

其中`tableSize`最终大于`parameterName[].Length`。由于稍后您调用`parameterName[counter]`， counter 将超出范围。您需要确保您永远不会尝试`parameterName[]`通过该数组中不合法的索引来访问其中的某些内容。

*编辑：*
另一种可能性，如果**仅**删除该行会删除错误，则返回

```
GetItemData(parameterName[counter], fromTime, toTime).arrayOfTimeStamp; 
```

大于分配的指定数组

```
getSelectedItemsObj.arrayOfTimeStamp    = new string[tableSize]; 
```

为了做出这样的决定，您还需要将代码发布到该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:42:43.903

问题就在这里：

```
for (counter = 0; counter < tableSize; counter++)
{ 
     getSelectedItemsObj.arrayOfValue            = GetItemData(parameterName[counter], fromTime, toTime).arrayOfValue;
     getSelectedItemsObj.arrayOfTimeStamp        = GetItemData(parameterName[counter], fromTime, toTime).arrayOfTimeStamp;    
} 
```

您的`counter`大小正在根据 增加`tableSize`，但它的使用好像基于 的大小`parameterName`。您的代码中没有任何内容强制执行此假设，因此一旦`tableSize`大于`parameterName`，您将收到您所看到的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T21:49:48.437

请尝试以下方法：

```
public CustomDataType GetSelectedtemsData(string[] parameterName, string fromTime, string toTime)
{
    CustomDataType tempObj;     // *Rename this variable*
    List<double> valueList = new List<double>();
    List<string> timeStampList = new List<string>();

    for (counter = 0; counter < parameterName.Length; counter++)
    {
        tempObj = GetItemData(parameterName[counter], fromTime, toTime);
        valueList.AddRange(tempObj.arrayOfValue);
        timeStampList.AddRange(tempObj.arrayOfTimeStamp);
    }

    getSelectedItemsObj = new CustomDataType();
    getSelectedItemsObj.arrayOfValue = valueList.ToArray();
    getSelectedItemsObj.arrayOfTimeStamp = timeStampList.ToArray();

    return getSelectedItemsObj;
} 
```

我打算按照你的方式尝试，但是一旦我意识到你将每个 parameterName 拉 3 次，第二个循环将需要一个内部循环（因为你需要遍历每个 GetItemData 中的每个索引），我的修复将无论如何都会导致相同数据的多个副本；我决定使用两个`List`.

如果这不能解决您的问题，那么我将需要完整的错误消息、错误消息中的堆栈跟踪以及错误堆栈上最顶层方法的代码。

注意：有许多额外的优化可能会帮助您喜欢：

*   您可能还想更新`GetItemData`为也使用`List`而不是数组，这样您就可以跳过该`tableSize = GetTableSize(parameterName, fromTime, toTime, prameterID);`行。
*   你可能想改变`CustomDataType`所以`arrayOfValue`而`arrayOfTimeStamp`不是数组。然后，`CustomDataType`您可以通过 a`CustomDataType[]`甚至`List<CustomDataType>`.

# ruby - 在 Ruby 中定义类方法

> ID：13350274
> 
> 赞同：1
> 
> 时间：2012-11-12T19:35:16.790
> 
> 标签：ruby, ruby-on-rails-3

通常在 Rails 中编写模型时，您使用 DSL 来设置派生对象的各个方面，例如：

```
class Question < ActiveRecord::Base
  has_one :category
  validates_presence_of :category
end 
```

在这种情况下，“has_one”和“validates_presence_of”在从 Question 实例化的模型上创建关联和验证回调。

我想在定义一个类时添加一个名为“parent”的新方法：

```
class Question
  attr_accessor :category

  parent :category
end

q = Question.new
q.category = 'a category'
puts q.parent
-> 'a category' 
```

因此，当从类实例化对象时，它们应该定义方法“父”。

我该怎么做呢？我的第一个想法是使用模块，但这不是实例方法，也不是类方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:49:57.253

我相信这就是您正在寻找的：

```
module QuestionParent
  module ClassMethods
    def inherited(descendant)
      descendant.instance_variable_set(:@parent, parent.dup)
      super
    end

    def parent(args=nil)
      @parent ||= args
    end
  end

  module InstanceMethods
    def parent
      self.send self.class.parent.to_sym
    end
  end

  def self.included(receiver)
    receiver.extend         ClassMethods
    receiver.send :include, InstanceMethods
  end
end

class Question
  include QuestionParent

  attr_accessor :category

  parent :category
end 
```

产生：

```
q = Question.new
q.category = 'a category'
puts q.parent

a category 
```

这样做是添加一个`parent`将定义类变量的类方法`@parent`，当实例调用符号（这里是）时调用。`parent``InstanceMethod``@parent``category`

# jquery - jquery菜单列表项点击功能

> ID：13350277
> 
> 赞同：2
> 
> 时间：2012-11-12T19:35:31.450
> 
> 标签：jquery, jquery-ui

我正在使用本教程

[http://www.1stwebdesigner.com/css/create-sliding-navigation-menu-jquery/](http://www.1stwebdesigner.com/css/create-sliding-navigation-menu-jquery/)

这是 index.html 文件：

```
!DOCTYPE html> Jquery Sliding Navigation Menu

    <ul id='header_nav'>
        <li><img src="images/home-icon.png" /></li>
        <li>About Us</li>
        <li>Categories
            <ul>
                <li><a>Coding</a></li>
                <li><a>Freebies<span class="arrow-right"></span></a>
                    <ul>
                        <li><a>Icons<span class="items_num">5</span></a></li>
                        <li><a>Templates<span class="items_num">10</span></a></li>
                        <li><a>Fonts<span class="items_num">3</span></a></li>
                    </ul>
                </li>
                <li><a>Tutorial<span class="arrow-right"></span></a>
                    <ul>
                        <li><a>Icons<span class="items_num">5</span></a></li>
                        <li><a>Templates<span class="items_num">10</span></a></li>
                        <li><a>Fonts<span class="items_num">3</span></a></li>
                    </ul></li>
                <li><a>Web Design</a></li>
            </ul>
        </li>
        <li>Archive
            <ul>
                <li><a>Coding</a></li>
                <li><a>Freebies<span class="arrow-right"></span></a>
                    <ul>
                        <li><a>Icons<span class="items_num">5</span></a></li>
                        <li><a>Templates<span class="items_num">10</span></a></li>
                        <li><a>Fonts<span class="items_num">3</span></a></li>
                    </ul>
                </li>
                <li><a>Web Design</a></li>
            </ul>
        </li>
        <li>Contact</li>
        <li>Write For Us ?</li>
    </ul>

    <script>

        $(document).ready(function(){

            $("#header_nav > li ").addClass("level1");
            $("#header_nav  > li > ul > li ").addClass("level2");
            $("#header_nav  > li > ul > li > ul > li ").addClass("level3");

            $(".level1").live("hover",function(){

                $(".level1").removeClass("main_menu_hover");
                $(this).addClass("main_menu_hover");

                var numberofChildren = $(this).find("> ul").children().length;

                if(numberofChildren != 0){
                    // Section 1
                    $(".level1").removeClass("active_main_menu");
                    $(this).addClass("active_main_menu");

                    // Section 2
                    $(".level1").find("ul").css("display","none");
                    $(this).find(" > ul").css("display","block");

                    // Section 3
                    $(".level2").removeClass("active_first_element");
                    $(".level2").removeClass("active_last_element");
                    $(".level2").removeClass("active_only_element");

                    // Section 4
                    if(numberofChildren == 1){
                        $(this).find("ul li:first").addClass("active_only_element");
                    }else{
                        $(this).find("ul li:first").addClass("active_first_element");
                        $(this).find("ul li:last-child").addClass("active_last_element");
                    }

                    // Section 5
                    $(".level2 a").removeClass("sub_active");
                    $(".level2").removeClass("menu_hover");

                }else{
                    // Section 6
                    $(".level1").find("ul").css("display","none");
                    $(".level1").removeClass("active_main_menu");

                }

            });

            $(".level2").find(".arrow-right").attr("href","javascript:void(0);");

            $(".level2 > a").live("hover",function(e){
                $("li").removeClass("menu_hover");
                $(this).parent().addClass("menu_hover");
                e.preventDefault();
            });

            $(".level2 a").live("click",function(){
                $("li").removeClass("menu_hover");

                if($(this).hasClass("sub_active")){
                    $(this).removeClass("sub_active");
                    $(".level2 > ul").slideUp();
                }else{
                    $(".level2 ul").slideUp();
                    $(".level2 a").removeClass("sub_active");
                    $(this).addClass("sub_active");
                    $(this).parent().find("ul").slideDown();
                }
            });

            $(".level3 a").live("hover",function(){
                if(!($(this).parent().hasClass("accordian_element_hover"))){
                    $(this).parent().removeClass("level3").addClass("accordian_element_hover");
                }
            });
            $(".accordian_element_hover a").live("hover",function(){
                $(this).parent().addClass("level3").removeClass("accordian_element_hover");
            });

        });
    </script>

</body> </html> 
```

我一直在试图弄清楚如何为每个 drop dpwn 元素添加不同的点击功能。

我用过这个：

```
$(".level2 a").live("click",function(){  
  return false;
}); 
```

它通过向下拉菜单中的每个项目添加相同的功能来工作。我想知道如何解决每个特定的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:41:16.047

如果内容是静态的，您可以使用类似`$('.level2 a:eq(0)'`

# ios - 带有核心数据的 RestKit：将 NSPersistentStore 与 RestKit RKObjectManager 一起使用

> ID：13350280
> 
> 赞同：1
> 
> 时间：2012-11-12T19:35:50.243
> 
> 标签：ios, core-data, restkit, nspersistentstore

我正在使用带有核心数据的 RestKit。到目前为止，我将 RestKit 初始化如下：

```
[...]
RKObjectManager *objectManager = [RKObjectManager managerWithBaseURLString:@"http://URL"];
objectManager.objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"database.sql"];
[...] 
```

没有这个 xcode 自动生成的核心数据属性：

```
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator; 
```

通过在 NSManagedObject 中调用 objectsWithFetchRequest: 来获取数据。现在我想使用 NSFetchingResultsController，因此我至少需要这样一个 managedObjectContext。但是我从哪里得到这个 managedObjectContext？我的第一个想法是：来自 AppDelegate.m 中自动生成的 managedObjectContext，但这 3 个属性 managedObjectContext、managedObjectModel 和 persistentStoreCoordinator 都是相互依赖的。

如何正确地将 RestKit“链接”到 Core Data？如何将persistentStoreCoordinator“链接”到RestKit 和RKObjectManager？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:01:11.183

您已经将 RestKit 和 Core Data 与该代码相关联。现在，如果我理解了这个问题，您只需要能够访问托管对象上下文。尝试创建一个“核心数据管理器”对象，其中包含具有这些属性的上下文、模型和存储协调器所需的所有代码。然后，任何需要该代码的类都可以从核心数据管理器继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T08:32:07.573

[在http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/advanced-restkit-development_iphone-sdk/)找到答案

RKManagedObjectStore – 对象存储包装了内部核心数据类的初始化和配置，包括 NSManagedObjectModel、NSPersistentStoreCoordinator 和 NSManagedObjectContext。

RestKit 处理“链接”到 Core Data 安静自主。没有链接要做。

可以通过调用 fetchAllSortedBy 的 NSManagedObject 或 NSManagedObject+ActiveRecord.heg 中的类似方法来获取 NSFetchingResultsController

```
fetchedResultsController = [Customer fetchAllSortedBy:@"surname" ascending:YES withPredicate:nil groupBy:@"surname"]; 
```

# ios - 可达性 + UIAlertView + 误报

> ID：13350283
> 
> 赞同：0
> 
> 时间：2012-11-12T19:35:55.743
> 
> 标签：ios, xcode, uialertview, reachability, false-positive

嘿伙计们，我在使用 Apple 的可达性代码时遇到了一些问题。我发现，即使设备正确连接到互联网，最初可达性代码也会发出 1 个错误通知（Networkstatus = NotReachable），然后是几个正确通知（Networkstatus = ReachableViaWiFi）。因此，当我收到“NotReachable”通知时显示 UIAlertView 时，即使设备已连接到互联网，应用程序仍会输出 uialertview 通知用户设备未连接。

有没有办法避免这种不便？

任何帮助将非常感激。

这是我的代码：

在我的 .h 文件中：

```
@property (nonatomic, retain) Reachability *hostReach; 
```

在我的 .m 文件中：

```
- (void)viewDidLoad
{
    self.hostReach = [Reachability reachabilityWithHostname:@"www.google.com"];

    [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(reachabilityChanged:) name:kReachabilityChangedNotification object:nil];

    [_hostReach startNotifier];

    NetworkStatus netStatus = [self.hostReach currentReachabilityStatus];

    if(netStatus == NotReachable && _alertShowing==NO){

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:@"No internet connection found"

                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];

        _alertShowing = YES;

        [alert show];

    }

    ...

}

-(void)reachabilityChanged:(NSNotification *)note {

    Reachability* curReach = [note object];

NSParameterAssert([curReach isKindOfClass: [Reachability class]]);    

    NetworkStatus netStatus = [curReach currentReachabilityStatus];

    if(netStatus == NotReachable && _alertShowing==NO){

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                    message:@"No internet connection found"

                                                   delegate:self
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles: nil];

        _alertShowing = YES;

        [alert show];

    }

-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    _alertShowing = NO;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:22:55.370

你为什么用`reachabilityWithHostname:@"www.google.com"`？此方法检查特定主机的可达性（在您的情况下`google.com`）。如果 Google 可用或不可用，您会收到通知。Google 可能会阻止您，您将收到`NotReachable`状态。

尝试使用：

```
//reachabilityForInternetConnection- checks whether the default route is available.  
//  Should be used by applications that do not connect to a particular host
+ (Reachability*) reachabilityForInternetConnection; 
```

[还可以在这里](http://developer.apple.com/library/ios/#samplecode/Reachability/Listings/Classes_Reachability_h.html#//apple_ref/doc/uid/DTS40007324-Classes_Reachability_h-DontLinkElementID_5)查看方法描述。

# azure - 超出使用量后无法重新创建虚拟机（现已付费）

> ID：13350284
> 
> 赞同：1
> 
> 时间：2012-11-12T19:36:01.320
> 
> 标签：azure, azure-virtual-machine, azure-vm-role

我正在使用 Windows Azure 虚拟机的免费评估来查看我的公司是否可以从我们的本地云服务提供商切换到 Windows Azure。今天我已经超出了使用限制（忘记停止/删除一个仅为测试而创建的虚假虚拟机）。主虚拟机已断开连接，其磁盘存储在存储帐户中（没有超过限制，因为这毕竟是一个测试和使用率非常低）。因为我需要磁盘，最重要的是，它里面的数据有性能信息，甚至是一些不应该出现在测试虚拟机上的生产数据，但是......无论如何，我无法：

1）重用旧的DNS。即使虚拟机被删除，当我尝试创建一个新的并选择旧的 DNS 时，它也会告诉我旧的 DNS 已在使用中（xpihomo.cloudapp.net）

2）我无法创建虚拟机，它一直给我这样的错误：“服务器遇到内部错误。请重试请求。长时间运行的操作跟踪 ID 是：9439ecfa765c4d6d94bd9238a6e579a1。”

* * *

更新 2：我已经删除了云服务，现在我可以重用 DNS，但我仍然无法重新创建 VM。它现在给出了这个错误： Blob [https://portalvhds4bqgghbw63gp9.blob.core.windows.net/vhds/lucasoft-eval-eval-vm-2012-10-25.vhd](https://portalvhds4bqgghbw63gp9.blob.core.windows.net/vhds/lucasoft-eval-eval-vm-2012-10-25.vhd)发生租约冲突。长期运行的操作跟踪 ID 为：97c64baeebce4c2d8e4a3c9661ef0130。

* * *

我也很失望，我只有一个论坛来寻求指导和支持。并且无法想象如果这个问题涉及敏感信息，我将如何处理？发个论坛给大家看看？

更糟糕的是：论坛软件坚持使用 pt-br 作为其语言环境（我来自巴西），并且在 pt-br 论坛中没有虚拟机预览专用论坛！我已经在那里发布了同样的消息，但我不希望得到任何答案。

有谁知道可能发生了什么阻止创建虚拟机？

而且，作为一个额外的问题，是否有人知道亚马逊服务是否存在同样的（缺乏）支持问题？

**更新**：我找到了（1）的答案：

[http://social.msdn.microsoft.com/Forums/pl-PL/WAVirtualMachinesforWindows/thread/ba1c873d-d86f-48aa-8ab2-98a058b7fdcd](http://social.msdn.microsoft.com/Forums/pl-PL/WAVirtualMachinesforWindows/thread/ba1c873d-d86f-48aa-8ab2-98a058b7fdcd)

当 VM 实例被删除时，用于运行它的云服务不会自动删除，它会保留 DNS。如果您想重用相同的 DNS，您将不得不删除云服务条目......但是它会从我的 VM 中删除数据吗？我不这么认为，因为它存储在单独的 VHD 中，但我现在不能冒险删除它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:12:38.077

我能够通过一条非常肮脏，肮脏的路线解决这个问题。由于似乎租约冲突阻止了 VM 的挂载（当然是 Azure 的 VM 实现中的一个错误），所以我求助于下载一个工具来管理存储帐户，然后我将相关磁盘复制到另一个映像，然后它工作。以下是采取的步骤：

1.  下载 CloudXplorer 评估（我肯定会购买许可证，因为他们拯救了我的皮肤）[http://clumsyleaf.com/products/cloudxplorer](http://clumsyleaf.com/products/cloudxplorer)
2.  连接到我的存储帐户（使用门户网站管理器中通知的密钥）
3.  浏览到我的存储和 vhds 容器（有两个 VM 磁盘，一个有效，一个无效）
4.  在其中创建了一个新文件夹，将其命名为“Teste”
5.  复制了相关磁盘
6.  将复制的磁盘粘贴到 Teste 文件夹
7.  将“Teste”文件夹中的磁盘重命名为我想要的名称
8.  从“Teste”文件夹中剪切重命名的磁盘
9.  将重命名的磁盘粘贴回 vhds 'root'
10.  登录云管理并转到虚拟机>磁盘
11.  使用 (+) CREATE DISK 并在弹出对话框中选择上面重命名的磁盘
12.  确保选中“OS Disk”选项和 Windows。
13.  从库中创建了一个新 VM，选择我的磁盘并使用上面的磁盘
14.  虚拟机创建成功

不用说这是 Microsoft Azure 中的一个错误：他们保留了一个不再使用的磁盘的租约。

该变通办法有效，但它肯定是 Windows Azure 及其可靠性和支持团队的污点。

# rest - 无法使用 /* 以外的 url 模式进行 REST 调用

> ID：13350285
> 
> 赞同：5
> 
> 时间：2012-11-12T19:36:01.763
> 
> 标签：rest, url-pattern

我正在尝试使用 Tomcat 7、Apache Wink 和 Jackson JSON 处理器做一个简单的 REST Web 应用程序，但似乎碰壁了。如果我查看我的 web.xml 文件，我会看到：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" >

<web-app>
    <display-name>Example Web Application</display-name>
    <servlet>
        <servlet-name>ExampleServlet</servlet-name>
        <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
            <param-value>com.dummy.example.server.ExampleApplication</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ExampleServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

现在，如果我用 /* 代替 URL 模式，则 REST 调用可以工作，但是当我使用 /services/* 时，它会失败。

在我的 ExampleApplication 中，我看到：

```
package com.dummy.example.server;

import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.core.Application;

import org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider;
import org.codehaus.jackson.map.AnnotationIntrospector;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.introspect.JacksonAnnotationIntrospector;
import org.codehaus.jackson.xc.JaxbAnnotationIntrospector;

public class ExampleApplication extends Application {

    /**
     * Get the list of service classes provided by this JAX-RS application
     */
    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> serviceClasses = new HashSet<Class<?>>();
        serviceClasses.add(com.dummy.example.server.services.Employee.class);
        return serviceClasses;
    }

    @SuppressWarnings("deprecation")
    @Override
    public Set<Object> getSingletons() {
        Set<Object> s = new HashSet<Object>();

        // Register the Jackson provider for JSON

        // Make (de)serializer use a subset of JAXB and (afterwards) Jackson annotations
        // See http://wiki.fasterxml.com/JacksonJAXBAnnotations for more information
        ObjectMapper mapper = new ObjectMapper();
        AnnotationIntrospector primary = new JaxbAnnotationIntrospector();
        AnnotationIntrospector secondary = new JacksonAnnotationIntrospector();
        AnnotationIntrospector pair = new AnnotationIntrospector.Pair(primary, secondary);
        mapper.getDeserializationConfig().setAnnotationIntrospector(pair);
        mapper.getSerializationConfig().setAnnotationIntrospector(pair);

        // Set up the provider
        JacksonJaxbJsonProvider jaxbProvider = new JacksonJaxbJsonProvider();
        jaxbProvider.setMapper(mapper);

        s.add(jaxbProvider);
        return s;
    }

} 
```

在我的 Employee 类中，我有：

```
package com.dummy.example.server.services;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.json.simple.JSONObject;

@Path("/services/employee")
@Produces(MediaType.APPLICATION_JSON)
@SuppressWarnings("unchecked")
public class Employee {
    @GET
    public JSONObject get() {
        JSONObject json = new JSONObject();
        json.put("Name", "Example");
        return json;
    }
} 
```

有任何想法吗？一段时间以来，我一直在反对这个

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T20:00:16.540

servlet（在 web.xml 中）的 url-pattern 参数独立于您在 Employee 类中指定的路径。

```
<servlet-mapping>
    <servlet-name>ExampleServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping> 
```

表示您的 servlet 侦听 /services/ 子路径。

```
@Path("/services/employee") 
```

意味着您的 REST 应用程序侦听 /services/employee “子子路径”。

所以你的 web 服务暴露在 localhost:8080/example/services/services/employee （url-pattern 和 @Path 注释的连接）。

如果您想在 localhost:8080/example/services/employee 使用提到的 url-pattern 公开它，您需要更改 Employee 类需要：

```
@Path("employee") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:43:38.750

你希望`/services/*`去哪里？Web 应用程序说明 Web 应用程序愿意服务的 URL 模式。这使得应用程序服务器（例如，JBoss、GlassFish）路由`/services/foo/bar/whatever`到您的 Web 应用程序。将`Employee`调用该类以响应请求，`/services/employee`以便您可以发出该请求。没有其他任何注册，因此`/services/*`应该导致 404 或 400 响应。由于`/services/*`已注册到您的 Web 应用程序，因此我期望 400。

# hadoop - cassandra 和 hadoop - 实时 vs 批处理

> ID：13350293
> 
> 赞同：4
> 
> 时间：2012-11-12T19:36:30.650
> 
> 标签：hadoop, nosql, cassandra

根据[http://www.dbta.com/Articles/Columns/Notes-on-NoSQL/Cassandra-and-Hadoop---Strange-Bedfellows-or-a-Match-Made-in-Heaven-75890.aspx](http://www.dbta.com/Articles/Columns/Notes-on-NoSQL/Cassandra-and-Hadoop---Strange-Bedfellows-or-a-Match-Made-in-Heaven-75890.aspx)

**Cassandra 所追求的解决方案与 Hadoop 有所不同。Cassandra 擅长大容量实时事务处理，而 Hadoop 擅长更多面向批处理的分析解决方案。**

Cassandra 和 Hadoop 的架构/实现有什么不同，这导致了这种使用上的差异。（在外行软件专业术语中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T00:28:13.750

我想补充一下，因为我认为这里可能有一个误导性的说法，即 Cassandra 可能在读取方面表现良好。Cassandra 也不太擅长随机读取，与其他解决方案相比，它在如何随机读取大量数据方面做得很好，但在某些时候，如果读取真的是随机的，你就无法避免每次都敲击磁盘单次是昂贵的，并且它可能会归结为无用的东西，例如几千次点击/秒，具体取决于您的集群，因此计划进行大量随机查询可能不是最好的，如果您开始就会碰壁那样想。我想说当您进行顺序读取或找到顺序存储它们的方法时，大数据中的所有内容都会更好地工作。大多数情况下，即使您进行实时处理，您仍然希望找到一种批处理查询的方法。这就是为什么您需要事先考虑您在密钥下存储的内容并尝试从读取中获取尽可能多的信息。语句在同一个句子中说 transaction 和 Cassandra 也很有趣，因为这真的不会发生。另一方面，hadoop 几乎按照定义是批处理的，但 hadoop 是一个分布式 map reduce 框架，而不是 db，事实上，我已经看到并使用了很多 hadoop 而不是 cassandra，它们不是对抗性技术。实时处理大数据是可行的，但需要好好思考并关心何时以及如何访问数据库。因为那真的不会发生。另一方面，hadoop 几乎按照定义是批处理的，但 hadoop 是一个分布式 map reduce 框架，而不是 db，事实上，我已经看到并使用了很多 hadoop 而不是 cassandra，它们不是对抗性技术。实时处理大数据是可行的，但需要好好思考并关心何时以及如何访问数据库。因为那真的不会发生。另一方面，hadoop 几乎按照定义是批处理的，但 hadoop 是一个分布式 map reduce 框架，而不是 db，事实上，我已经看到并使用了很多 hadoop 而不是 cassandra，它们不是对抗性技术。实时处理大数据是可行的，但需要好好思考并关心何时以及如何访问数据库。

编辑：删除二级索引示例，上次我检查使用随机读取（尽管我已经离开 Cassandra 一年多了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T06:26:06.627

Vanilla hadoop 由一个以分布式文件系统 (DFS) 为核心的分布式文件系统 (DFS) 和支持 Map Reduce 模型的库组成，以编写程序进行分析。DFS 使 Hadoop 具有可扩展性。它负责将数据分块到多节点集群中的多个节点中，以便 Map Reduce 可以处理单个可用节点的数据块，从而实现并行性。

可以在[此处找到作为 Hadoop 分布式文件系统 (HDFS) 基础的 Google 文件系统的论文](http://research.google.com/archive/gfs.html)

Map Reduce 模型的论文可以在[这里找到](http://research.google.com/archive/mapreduce.html)

有关 Map Reduce 的详细说明，请阅读这篇[文章](http://developer.yahoo.com/hadoop/tutorial/module4.html)

Cassandra 是一个高度可扩展、最终一致、分布式、结构化的键值对存储。它不是传统的数据库，但更像是存储键/值对的 Hashtable 或 HashMap。Cassandra 在 HDFS 之上工作并利用它来扩展。Cassandra 和 HBase 都是 Google BigTable 的实现。可以在[此处](http://research.google.com/archive/bigtable.html)找到 Google BigTable 的论文。

BigTable 使用字符串排序表 (SSTable) 来存储键/值对。SSTable 只是 HDFS 中的一个文件，它存储键后跟值。此外，BigTable 维护一个索引，该索引在文件中具有该键的键和偏移量，这使得仅使用对偏移位置的查找就可以读取该键的值。SSTable 实际上是不可变的，这意味着在创建文件后，无法对现有的键/值对进行任何修改。新的键/值对被附加到文件中。记录的更新和删除附加到文件中，使用更新的键/值进行更新，并使用键和墓碑值进行删除。此文件中允许 SSTable 的重复键。每当发生更新或删除时，也会修改索引，以便该键的偏移量指向最新值或墓碑值。

因此，您可以看到 Cassandra 的内部允许快速读/写，这对于实时数据处理至关重要。而带有 Map Reduce 的 Vanilla Hadoop 可用于处理面向批处理的被动数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T06:31:46.073

Hadoop 由两个基本组件组成：分布式数据存储 (HDFS) 和分布式计算框架 (MapReduce)。它读取一堆输入数据，然后从/向数据存储写入输出。它需要分布式数据存储，因为它对机器集群上的本地数据执行并行计算，以最大限度地减少数据加载时间。

而 Cassandra 是具有线性可扩展性和容错能力的数据存储。它缺乏 MapReduce 在 Hadoop 中提供的并行计算能力。

Hadoop 的默认数据存储（HDFS）可以替换为其他存储后端，例如 Cassandra、Glusterfs、Ceph、Amazon S3、Microsoft Azure 的文件系统、MapR 的 FS 等。但是，每种替代方案都有其优点和缺点，它们应该根据需求进行评估。

有一些资源可以帮助您将 Hadoop 与 Cassandra 集成： http: [//docs.datastax.com/en/cassandra/3.0/cassandra/configuration/configHadoop.html](http://docs.datastax.com/en/cassandra/3.0/cassandra/configuration/configHadoop.html)

# asp.net-mvc - mvc4 new { vs 新对象{

> ID：13350294
> 
> 赞同：4
> 
> 时间：2012-11-12T19:36:32.173
> 
> 标签：asp.net-mvc

我是第一次学习 MVC (MVC4) 并从[http://www.asp.net/mvc完成 MvcMusicStore 教程](http://www.asp.net/mvc)

本教程是为 MVC 3 编写的，我正在编写以下代码（在我的 MVC4 项目中）

`@Html.ActionLink(album.Title, "Details", new { id = album.AlbumId })`

`new {`在我输入给我之后，visual studio 会自动插入“对象” ：

`@Html.ActionLink(album.Title, "Details", new object{ id = album.AlbumId })`

一种方式比另一种方式更正确，还是 MVC 版本有更多定义的代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:39:07.303

语法

```
new object{ id = album.AlbumId } 
```

应该产生编译器错误，因为“id”不是*object*的属性。

语法

```
new { id = album.AlbumId } 
```

是正确的。它创建一个具有名为*id的属性的*[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)

 *请注意，在视图中，您*不会在**编译时*收到编译器错误（这可能看起来违反直觉）。*视图在运行时*编译。您可能会在视图源代码中的错误下方看到一个红色波浪线，表明存在问题，但我发现它仅在某些时候有效。

我已经看到 Visual Studio在*new*之后注入不正确的*对象*的相同问题。*

# php - api cakephp 休息认证

> ID：13350296
> 
> 赞同：3
> 
> 时间：2012-11-12T19:36:37.270
> 
> 标签：php, cakephp, authentication, oauth

我不确定我目前正在使用 CakePHP 开发的 REST API 采用哪种方式，我还没有实现身份验证，直到现在我几乎完成了它，我正在阅读它，

但我不确定我应该做什么，这个 API 将被公开，以便网页和移动应用程序可以使用它，但我不认为 Basic auth 或 Digest auth（作为 CakePHP 中的默认选项）是选项,

我只知道我需要它来检查数据库中的用户名和密码，并根据已经设置的 ACL 授予权限，我正在阅读有关 HMAC 的内容但不完全理解，我是否应该自己制定身份验证方法做类似检查令牌之类的事情？这篇文章正确吗？：[http ://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

如果是这样，我如何将这些原则实现到 CakePHP auth 方法？是否有使用 HMAC 的这种身份验证方法的插件？

我应该使用 OAuth 2.0 吗？使用 OAuth 2.0 进行用户名和密码登录是否有意义？我也迷路了吗？如果我没有那么迷路，你能描述一下如何在 cakephp 中使用用户名和密码实现 OAuth 吗？

有人，拜托，任何浏览这个互联网论坛的人，帮助我。如果您能提供示例或工作流程等任何内容，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:56:04.990

您需要多少安全性？由于通常从具有密钥的客户端应用程序访问 API，因此通常可以将凭据与每个 (https) 请求一起发送（作为 POST 参数，因此它们将被加密）。至少，这是迄今为止最简单的解决方案：您只需检查每个请求的凭据，无需任何会话、令牌等。如果凭据有效，则检查现在经过身份验证的“用户”是否有权访问请求的资源。

请记住，更高级的身份验证/授权方法在开发和管理中很快变得复杂。如果您在实施此类系统方面没有任何经验，那么您很可能会因实施错误/问题而放弃可能的安全收益。

# ios - 访问笔记应用数据

> ID：13350297
> 
> 赞同：3
> 
> 时间：2012-11-12T19:36:37.057
> 
> 标签：ios, xcode, ios6

我正在开发一个笔记应用程序，我想将存储在默认 ios 应用程序中的所有笔记导入我的。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:39:50.687

没有 API 可以做到这一点。第三方应用程序无法访问此类数据。

# ios - ios Keychain 是否适合我的 IAP 问题？

> ID：13350301
> 
> 赞同：0
> 
> 时间：2012-11-12T19:36:44.033
> 
> 标签：ios, keychain, in-app-purchase, reinstall

我有一个具有消耗性 IAP 的应用程序。这是一个用户在一段时间内消费的 IAP，比如 IAP 有 100 个积分，而用户今天可能使用 10 个，明天使用 50 个，因此用户将剩下 100-10-50=40 个积分供以后使用。该应用程序会给出 100 的初始点数，让用户尝试一下。我使用 UserDefaults 来记录它，它工作正常，除了用户删除应用程序时 --- 当我测试两种方法时：1，删除并重新安装，我再次获得了最初的 100 分；2、我重新设置了iPhone语言，又得到了最初的100分。这意味着用户不会为了获得最初的 100 分而费尽心思，这基本上会阻止我的 IAP 销售。

我目前没有外部服务器来记录/验证 IAP。我不想要一个防弹机制来防止黑客攻击。我想要的只是可以在删除/重新安装后幸存下来的东西。在阅读stackoverflow页面后，我了解到1，钥匙串在删除/重新安装后仍然存在，2，它通常用于密码，3，一些开发人员使用它来存储IAP标志（是否购买了IAP），但是4，我不知道如果可以存储 NSNumber（上例中剩下的 40 个点）。我想知道钥匙串是否适合我的情况。

如果钥匙串可以存储 NSNumber，那么有人可以分享一些代码吗？谢谢。

密码箱更新：为什么我在 ViewController.o 中得到 Apple Mach-O-Linker 错误：Objc-class-ref？与ARC有关的东西？我看到 Granoff（Lockbox 开发人员）说 ARC 已被自动处理。我所做的是将 Lockbox.h 和 .m 文件添加到我的项目中并导入到我的应用程序中。然后应用程序由于错误而无法运行。但是，当我尝试 Lockbox 提供的示例项目时，它可以工作。有什么见解吗？谢谢。

我得到的密码箱错误：

```
 Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_Lockbox", referenced from:
    objc-class-ref in ViewController.o
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我添加了“安全”框架。添加安全框架后，我将 Lockbox.h 和 .m 文件复制到我的应用程序中。在我计划使用密码箱方法的 ViewController.m 文件中，我添加了“#import "Lockbox.h"”。我可以在这一步运行，没有错误。然后我添加了以下行： if ([Lockbox stringForKey:mylockboxstring] != nil) {} 我得到了上面显示的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:41:12.240

是的。

看看[http://github.com/granoff/Lockbox](http://github.com/granoff/Lockbox)。它正是为此而设的一个类，尽管您可能必须将其扩展为存储`NSNumber`s 或使用当前支持的数据类型之一，例如`NSString`.

# c# - 使用自托管服务的 HTTP POST

> ID：13350310
> 
> 赞同：2
> 
> 时间：2012-11-12T19:37:27.143
> 
> 标签：c#, .net, wcf, wcf-binding, self-hosting

我有一个自托管服务，需要监听[来自 BITS 服务器的上传通知](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363134%28v=vs.85%29.aspx)（它们是带有自定义标头的简单 HTTP POST 请求）。如果我不是自托管我的服务并且使用 IIS，我只会制作一个 ASPX 页面，我可以处理传入的请求，但我使用的是自托管 WCF，我无法切换到 IIS。

我考虑使用[WebInvokeAttribute](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.aspx)，但这似乎仅用于发送 JSON 或 XML 作为回复，我需要遵循协议规范。我也没有看到拉出自定义标题的方法。

我查看的下一件事是[HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)，它似乎可以满足我的需要，但是我没有看到是否有办法通过我的 app.config 文件来配置它，就像普通的 WCF 端点一样。

我只是将地址添加到我的`applicationSettings`部分还是有更好的方法来实现我想要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:58:12.573

我最终只使用了 Properties 类并将 url 存储在那里。

```
//This is run on it's own thread
HttpListener listener = new HttpListener();
listener.Prefixes.Add(Properties.Settings.Default.BitsReplierAddress);
listener.Start();

while (_running)
{
    // Note: The GetContext method blocks while waiting for a request. 
    // Could be done with BeginGetContext but I was having trouble 
    // cleanly shutting down
    HttpListenerContext context = listener.GetContext();
    HttpListenerRequest request = context.Request;

    var requestUrl = request.Headers["BITS-Original-Request-URL"];
    var requestDatafileName = request.Headers["BITS-Request-DataFile-Name"];

    //(Snip...) Deal with the file that was uploaded
}

listener.Stop(); 
```

# android - 建议创建用户名/密码对以创建自定义注册页面？

> ID：13350312
> 
> 赞同：0
> 
> 时间：2012-11-12T19:37:28.703
> 
> 标签：android, hashmap, registration

目前我有一个文本文件，我将用户名/密码存储到一个文本文件中！

我想存储用户名-> {密码，其他用户信息}的哈希图。

这只是最初的原型，最后我将使用 SQL 数据库来存储这些值。

我做了一些谷歌搜索，人们大多在谈论连接到 sql 数据库，这比尝试暂时存储更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:49:08.483

您可以尝试使用像[GSON](http://code.google.com/p/google-gson/)这样的库将数据编组/解组为 JSON 。数据将存储在磁盘上。对于您的原型，这种方法将比 SQLite 更轻，并且不需要太多一次性代码。

# .net - 使用转换器选择 DataTemplate 并保持绑定？

> ID：13350320
> 
> 赞同：0
> 
> 时间：2012-11-12T19:38:17.847
> 
> 标签：.net, silverlight, xaml, binding, converter

在使用 Converter 选择要用于我的控件的 DataTemplate 后，我无法维护绑定。

我的控件绑定到 IAppointment 的集合，其中一些是 WorkOrderAppointment 类型，一些是 DowntimeAppointment。我想根据类型定义一个工具提示。转换器正在根据类型选择正确的 DataTemplate，但 WorkOrderToolTipTemplate 和 DowntimeToolTipTemplate 中的绑定不起作用，就好像它们没有数据上下文一样。

有人可以帮助我了解发生了什么，甚至可能是解决方案吗？

缩写 XAML：

```
<UserControl.Resources>
    <DataTemplate x:Key="WorkOrderToolTipTemplate">
        <Grid
            Name="WorkOrderToolTips"
            Width="400"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="130*" />
                <ColumnDefinition Width="270*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Tooltip Labels -->
            <TextBlock
                Grid.Row="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="Site Name:"
                />
            <TextBlock
                Grid.Row="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="Description:"
                />

            <!-- Tooltip Values -->
            <TextBlock
                Grid.Row="0"
                Grid.Column="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="{Binding Appointment.CalendarItem.SiteName}"
                TextWrapping="Wrap"
                />

            <TextBlock
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="{Binding Appointment.CalendarItem.Description}"
                TextWrapping="Wrap"
                />

        </Grid>
    </DataTemplate>

    <DataTemplate x:Key="DowntimeToolTipTemplate">
        <Grid
            Name="DowntimeToolTips"
            Width="400"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="130*" />
                <ColumnDefinition Width="270*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Tooltip Labels -->
            <TextBlock
                Grid.Row="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="Site Name:"
                />
            <TextBlock
                Grid.Row="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="Event Classification:"
                />

            <!-- Tooltip Values -->
            <TextBlock
                Grid.Row="0"
                Grid.Column="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="{Binding Appointment.Downtime.PlantName}"
                TextWrapping="Wrap"
                />
            <TextBlock
                Grid.Row="1"
                Grid.Column="1"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Text="{Binding Appointment.Downtime.EventClassification}"
                TextWrapping="Wrap"
                />
        </Grid>
    </DataTemplate>

    <converters:ToolTipSelectorConverter x:Key="local_ToolTipSelectorConverter"
        DowntimeDataTemplate="{StaticResource DowntimeToolTipTemplate}" 
        WorkOrderDataTemplate="{StaticResource WorkOrderToolTipTemplate}" />

    <DataTemplate x:Key="AppointmentItemTemplate">
        <TextBlock
        Style="{Binding Appointment, Converter={StaticResource local_AppointmentTextStyleConverter}}"
        Text="{Binding Appointment.Subject}"
        TextTrimming="WordEllipsis"
        TextWrapping="Wrap"
        >
        <ToolTipService.ToolTip>
            <ToolTip ContentTemplate="{Binding Appointment, Converter={StaticResource local_ToolTipSelectorConverter}}" />
        </ToolTipService.ToolTip>
        </TextBlock>
    </DataTemplate>

<UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:33:52.663

这是 . 的标准问题`ToolTip`，它不是可视化或逻辑树的一部分，因此不继承`DataContext`.

标准解决方案是将 的绑定到`DataContext`的：`ToolTip``DataContext``PlacementTarget`

```
<ToolTip 
   ContentTemplate="{Binding Appointment, Converter={StaticResource local_ToolTipSelectorConverter}}"
   DataContext="{Binding Path=PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}"
/> 
```

# c# - 静态数组 C# 中的空指针异常

> ID：13350321
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:38:19.427
> 
> 标签：c#, static, nullpointerexception

我正在通过一个方法初始化静态数组，然后想在非静态方法中使用它，它会抛出 nullpointerException。当我创建了小例子时，一切正常。我不知道那有什么问题。附加解决方案。

[http://www.speedyshare.com/QRjW5/Funkcjonalnosc-Kopia-2.zip](http://www.speedyshare.com/QRjW5/Funkcjonalnosc-Kopia-2.zip)

主要方法在类中

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Funkcjonalnosc
{
    class Dzwiek
    {
        static Dzwiek[] tabRefDzwiekow;// = zaladujDzwieki();//przy uruchomeniu dzwieki referencyjne wczytaja sie raz
        double hz;
        String dzwiek;
        bool first = true;

        Dzwiek(double hz) {
            this.hz = hz;
            dzwiek = dopasujDzwiek(hz);
        }
        Dzwiek(String dzwiek, double hz) {
            this.dzwiek = dzwiek;
            this.hz = hz;
        }

        public static void zaladujDzwieki() {
            System.IO.StreamReader sr = System.IO.File.OpenText("dzwieki.txt");
            tabRefDzwiekow = new Dzwiek[100];
            string s = "";
            int i = 0;
            string[] splitted;
            while ((s = sr.ReadLine()) != null) {
                splitted = s.Split('\t');
                tabRefDzwiekow[i] = new Dzwiek(splitted[0], Double.Parse(splitted[1]));
                Console.WriteLine(tabRefDzwiekow[i].hz);
            }
            sr.Close();
        }
        //Znajduje odpowiedni dzwiek w tablicy dzwiekow
        String dopasujDzwiek(double hz) {
            double obecnaRoznica, poprzedniaRoznica = int.MaxValue;
            string dopasowanyDzwiek = "";
            for (int i = 0; i < tabRefDzwiekow.Length; i++) {
                obecnaRoznica = Math.Abs(hz - tabRefDzwiekow[i].hz);//THROWS EXCEPTION!
                if (obecnaRoznica > poprzedniaRoznica)
                    return tabRefDzwiekow[i - 1].dzwiek;
                poprzedniaRoznica = obecnaRoznica;
            }
            return dopasowanyDzwiek;
        }
        static void Main(string[] args) {
           zaladujDzwieki(); //initilize the static ARRAY tabRefDzwieki
           Dzwiek dzwiek = new Dzwiek(440); //uses that array by calling function in //constructor doPasujDzwieki()
           Console.Read();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:43:49.113

除非我错过了什么，每当你打电话

```
tabRefDzwiekow[i] = new Dzwiek(splitted[0], Double.Parse(splitted[1])); 
```

`i`将始终为零，然后当您稍后访问它时，在您的 for 循环中，

```
obecnaRoznica = Math.Abs(hz - tabRefDzwiekow[i].hz);//THROWS EXCEPTION 
```

您试图在第一次迭代后访问未初始化`Dzwiek`对象的属性`hz`

# asp.net - ASP.NET：模型的自动生成的 .Designer.cs 文件中的错误

> ID：13350322
> 
> 赞同：0
> 
> 时间：2012-11-12T19:38:20.293
> 
> 标签：asp.net

我是 ASP.NET 新手，对教程有疑问。

我在 VS2012 Express for Web 中创建了一个新的 MVC4 项目。我添加了一个带有 1 个表“Persons”的 SQL 数据库，并用一些随机测试数据填充它：

```
Id        int (primary key, is identity=true)
name      varchar(50)
birthdate date 

adam  01.01.2001
berta 02.02.2002 
```

作为一个模型，我使用了 ADO.NET 实体数据模型，将其命名为“PersonsModel.edmx”并使用 Personsdatabase。

要查看 PersonsModel.Designer.cs 文件，我将“代码生成状态”激活为“标准”。刷新并单击 PersonsModel.Designer.cs 文件。但是在这个文件中我有错误......所以我想在我的控制器中使用这样的东西：

HomeController.cs：

```
PersonsEntities1 db = new PersonsEntities();

db.person... 
```

但它不起作用，我认为（？）这是因为 .Designer.cs 文件中的错误。

PersonsModel.Designer.cs：例如：

```
public PersonsEntities1() : base("name=PersonsEntities1", "PersonsEntities1")
{
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
} 
```

基础错误：...行和 ContextOptions。不幸的是，我没有英语 VS，但它说的是：

> 重载 System.Data.Entity.DbContext(string, System.Data.Entity.Infrastructure.DbCompiledModel)-Method 的最佳方法有一些无效参数
> 
> 并且没有找到“ContextOptions”的定义，没有方法“ContextOptions”接受“MvcApplication7.Models.PersonsEntities1”作为第一个参数。

我有点困惑，因为我按照教程中的解释做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:51:18.823

我认为这段代码有误：

```
base("name=PersonsEntities1", "PersonsEntities1") 
```

没有构造函数需要两个字符串。您的第二个参数应该是 type `DbCompiledModel`。（见[这里](http://msdn.microsoft.com/en-us/library/gg679522%28v=vs.103%29.aspx)。）

现在，我不知道为什么您的设计器会生成无法编译的代码，所以我想知道您是否安装了错误版本的实体框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:00:31.000

显然问题是VS2012。这一切都适用于VS2010。

我再次从 asp.net/mvc 下载了安装程序并添加了 Visual Web Developer 2010 Express。安装 VS2010 和所有依赖项后，我再次尝试了本教程，现在一切正常。.Designer.cs 文件中没有错误代码 :)。

非常感谢 Ann L. 的支持。您的提示（安装了错误版本的实体框架）提示我尝试另一个 VS 版本。

另外我要说：我也试过VS2012 Ultimate（完整的DVD版），但没有帮助。

# distributed - 任何有助于构建集群、分布式事件总线库的库？

> ID：13350326
> 
> 赞同：0
> 
> 时间：2012-11-12T19:38:40.180
> 
> 标签：distributed, java, event-bus

是否有任何 Java 库允许构建集群（因此，分布式）事件总线？

我不是在谈论依赖于诸如 ZeroMQ/RabbitMQ/Redis 之类的外部发布/订阅服务，而是在内部完成所有这些工作的 Java 库（即保持与其他机器的连接、同步数据和管理停机时间等）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:43:40.987

我建议查看[Akka](http://akka.io/)中间件项目——它使用 Actor 模型来设计并发/分布式系统。它是为 Scala 设计的，但提供了一个不错的 Java API。

# vb.net - VB.Net 自定义列表框输出问题

> ID：13350329
> 
> 赞同：0
> 
> 时间：2012-11-12T19:38:49.463
> 
> 标签：vb.net, listbox, custom-controls

[由于我需要禁用（灰显）ListBox 中的某些项目，因此我使用了可以在此处](http://www.codeproject.com/Articles/85079/Custom-List-Box-Control-with-Enable-Disable-Items)找到的自定义控件：

这是我当前的代码：

```
Private Sub MainForm_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        dtp.Columns.Add("key")
        dtp.Columns.Add("value")
        PopulateDataTable(dtp, "myTxt")

        _dataView = New DataView(dtp)

        'Custom ListBox
        List1.ValueMember = "key"
        List1.DisplayMember = "value"
        List1.DataSource = _dataView

        'Legacy ListBox
        List2.ValueMember = "key"
        List2.DisplayMember = "value"
        List2.DataSource = _dataView

        UpdateLanguageMenu()
    End Sub

    Private Function PopulateDataTable(dt As DataTable, resTxt As String)
        Using sw As New StringReader(My.Resources.ResourceManager.GetObject(resTxt))
            Do
                Dim line As String = sw.ReadLine
                If line Is Nothing OrElse line.Trim = String.Empty Then Exit Do
                Dim strArr() As String
                strArr = line.Split(",")

                Dim row As DataRow = dt.NewRow()
                row("key") = strArr(0)
                row("value") = strArr(1)
                dt.Rows.Add(row)
            Loop
            sw.Close()
        End Using
    End Function 
```

`List1`是Custom ListBox，`List2`是VS2012E自带的ListBox。

我不需要`List2`，它只是用来测试，在运行时，我`List2`正确加载了所有值，而不是在所有行中。`List1``System.Data.DataRowView`

奇怪的是，我正在加载的 txt 是这样的：

```
00A1,MyValue1
00A2,Myvalue2
00A3,MyValue3 
```

我还有一个标签，当在 ListBox 上选择项目时，我有代码将其更改`Label.Text`为`List.SelectedValue`逗号之前的第一部分。

它会显示在标签中。只有自定义列表框内的项目不被显示。

手动填充`List1`，而不是使用 DataTable，正在工作。

而且由于我是初学者，我无法找到问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:17:01.097

我认为您的问题与这一行有关： string displayValue = GetItemText(item); 在控制中。这理所当然地认为所有项目都是字符串。在您的情况下，它是一个 datarowview，因此是结果（drv.toString 会返回类似的东西）。您需要将 "item" 转换为 drv 并将显示值设置为 drvItem("value" or "key") 。所以基本上问题不是你的代码，而是控制。

其实...在阅读控件中的代码而不是代码项目站点上的代码后，我意识到这一行：

```
displayValue = GetItemText(item); 
```

甚至不存在。它与

```
item.ToString() 
```

这几乎证明了我的理论。

对了，怎么修。

在：

```
protected override void OnDrawItem(System.Windows.Forms.DrawItemEventArgs e) 
```

你有这个：

```
object item = this.Items[e.Index]; 
```

您要做的是将 item 转换为 DataViewRow 并将值分配给变量，如下所示：

```
DataViewRow dvrItem = (DataViewRow)item;
String displayText = dvrItem("key"); or String displayText = dvrItem("value"); 
```

然后更改所有这些：

```
e.Graphics.DrawString(item.ToString(), e.Font, SystemBrushes.GrayText, e.Bounds); 
```

进入：

```
e.Graphics.DrawString(displayText, e.Font, SystemBrushes.GrayText, e.Bounds); 
```

# javascript - 有没有办法创建一个可以是点击事件或 onload 事件的函数，具体取决于主体的类？

> ID：13350333
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:03.157
> 
> 标签：javascript, jquery

基本上标题说明了问题，但情况是这样（很难用 jsbin 或其他任何东西复制，所以我将尝试不这样做来解决）。

我有一个在单击按钮时调用的函数。点击事件将告诉输出将使用什么字体。但是，在某些页面上，我希望字体由 body 元素的类声明，而不是单击按钮。

我遇到了两个问题。

1.  当我尝试传递参数并接收参数时，参数是一个事件，而不是我想要传递的任何内容。
2.  如果我将事件作为第一个参数传递，而我想要的字体作为第二个参数传递，我会得到未定义的字体变量，并且该函数不起作用。

以这种方式使函数变得灵活的任何帮助都会帮助我很多。

编辑：这是我所拥有的简化版本

```
function fontSelection(font) {

var self = $(this),
  inputOne = $('li:eq(0) input').val(),
  inputTwo = $('li:eq(1) input').val(),
  inputThree = $('li:eq(2) input').val(),
  resultOne = $('div:eq(0)'),
  resultTwo = $('div:eq(1)'),
  resultThree = $('div:eq(2)');
  font = font || $('div.font').attr('title').toLowerCase();

resultOne.removeClass().addClass(inputOne + ' someclass ' + font);
resultTwo.removeClass().addClass(inputTwo + ' someclass ' + font);
resultThree.removeClass().addClass(inputThree + ' someclass ' + font);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:42:46.147

不是将您的函数直接传递给事件注册，而是传递一个匿名函数，然后使用所需的参数调用您的函数。

所以，而不是这样：

```
$("#myButton").click(callMyFunction); 
```

您可以使用它来指定所需的确切参数：

```
$("#myButton").click(function(e) {
    callMyFunction(myParam1, myParam2);
}); 
```

如果要保留函数中的值`this`，则需要`.call()`像这样在函数中显式设置它：

```
$("#myButton").click(function(e) {
    fontSelection.call(this, myParam1, myParam2);
}); 
```

或者，只需将其作为参数传递并在函数中使用该参数，而不是`this`：

```
$("#myButton").click(function(e) {
    fontSelection(this, myParam1, myParam2);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:42:35.820

试试这个大小：一个函数，如果给定一个参数，设置要使用的字体。如果未设置参数，则读取字体的正文标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:50:46.780

```
$(function () {
    if ($('body').hasClass('your class for onload change')) {
        // change font
    } else {
        $('button').click(your_function);
    }
}); 
```

编辑：

如果您想`this`在您的函数中使用并希望它在第一种情况下引用 body 并在第二种情况下引用另一个 dom 元素，您可以使用`call`或`apply`

```
$(function () {
    if ($('body').hasClass('your class for onload change')) {
        fontSelection.apply($('body').get(0), [font]);
    } else {
        $('button').click(function () {
            fontSelection.apply(this, [font]);
        });
    }
}); 
```

# c++ - 在函数 Qt C++ 中使用 UI 数组

> ID：13350338
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:07.337
> 
> 标签：c++, qt, graphics, qt-creator, signals-slots

在我的 Windows 窗体代码中，默认情况下使用 ui 来定义图形元素。但我想在一个函数中修改它们，如下所示：

问题是调试工具告诉我 ui 没有在这个范围内声明。

```
#include <QMessageBox>
#include <QFile>
#include <QTextStream>
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include "datawindow.h"

void getData(ui){
    QFile inputFile("C:\\pepoles.txt");
        if (inputFile.open(QIODevice::ReadOnly)){
           QTextStream in(&inputFile);

           while ( !in.atEnd() ){
              QString line = in.readLine();
              ui->listWidgetData->addItem(line);
           }
        }
        else{
            QMessageBox::critical(this, "Erreur", "Une erreur s'est produite :(");
        }
    inputFile.close();
}

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    getData(ui);

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_actionNouvellesDonnees_triggered() {
    w.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:43:40.093

成为`getData()`MainWindow 的成员：

```
void MainWindow::getData()
{
    QFile inputFile("C:\\pepoles.txt");
    if (inputFile.open(QIODevice::ReadOnly)) {
        QTextStream in(&inputFile);
        while ( !in.atEnd() ) {
            QString line = in.readLine();
            ui->listWidgetData->addItem(line);
        }
    } else {
        QMessageBox::critical(this, "Erreur", "Une erreur s'est produite :(");
    }
    inputFile.close();
} 
```

然后，在您的构造函数中：

```
ui->setupUi(this);
getData(); 
```

我推荐这种方法，因为`ui`它包含私有成员，所以最好有一个成员函数来修改它。

不要忘记`getData()`在 MainWindow 类的头文件中声明。您可能应该将其设为私有。

顺便说一句，`ui`它不是一个数组。它是一个对象指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:45:15.880

> `void getData(ui){`

该行开始定义`getData`函数，它接受一个变量，有*类型* `ui`但没有名称（因此无法在函数代码中访问它）。

添加类型...

```
void getData(MainWindow::Ui *ui){ 
```

# android - Android 应用程序立即崩溃

> ID：13350341
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:17.227
> 
> 标签：android

```
 11-12 13:31:44.988: D/AndroidRuntime(13055): Shutting down VM
11-12 13:31:44.988: W/dalvikvm(13055): threadid=1: thread exiting with uncaught exception (group=0x4001d570)
11-12 13:31:45.008: E/AndroidRuntime(13055): FATAL EXCEPTION: main
11-12 13:31:45.008: E/AndroidRuntime(13055): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.StickmanRevolution/com.example.StickmanRevolution.activity.MainActivity}: java.lang.ClassNotFoundException: com.example.StickmanRevolution.activity.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.StickmanRevolution-2.apk]
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.os.Looper.loop(Looper.java:130)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread.main(ActivityThread.java:3683)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at java.lang.reflect.Method.invokeNative(Native Method)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at java.lang.reflect.Method.invoke(Method.java:507)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at dalvik.system.NativeStart.main(Native Method)
11-12 13:31:45.008: E/AndroidRuntime(13055): Caused by: java.lang.ClassNotFoundException: com.example.StickmanRevolution.activity.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.StickmanRevolution-2.apk]
11-12 13:31:45.008: E/AndroidRuntime(13055):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-12 13:31:45.008: E/AndroidRuntime(13055):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
11-12 13:31:45.008: E/AndroidRuntime(13055):    ... 11 more 
```

我一直试图让这个工作近一个星期。我已经准备好很多线程，并且已经尝试了我能找到的一切。我无法弄清楚为什么我的应用程序根本无法运行。我试过模拟器和我的安卓手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:41:36.730

这是你的错误：

> 11-12 13:31:45.008: E/AndroidRuntime(13055): 由: java.lang.ClassNotFoundException: com.example.StickmanRevolution.activity.MainActivity 在加载器dalvik.system.PathClassLoader [/data/app/com.example .StickmanRevolution-2.apk]

Android 找不到类`com.example.StickmanRevolution.activity.MainActivity`。确保您的类位于正确的包中，并且名称完全匹配（包括大小写）。

# c# - 我应该同步对破坏者 Next/Publish 方法的访问吗？

> ID：13350342
> 
> 赞同：2
> 
> 时间：2012-11-12T19:39:25.593
> 
> 标签：c#, disruptor-pattern

我没有提供完整的列表，因为下面的代码对于那些熟悉破坏者的人来说已经足够了。问题是调用`Next`和`Publish`方法是否是线程安全的。在下面的示例之间，正确的示例是什么？注意`Attach`可以同时从不同的线程调用。我有多个消费者。

示例 1。锁定一切：

```
 private object attachLock = new object();

    // can be called from parallel threads
    public void Attach(OrdersExecutor oe)
    {
        lock (attachLock)
        {
            long sequenceNo = ringBuffer.Next();
            ringBuffer[sequenceNo].Value = oe;
            ringBuffer.Publish(sequenceNo);
        }
    } 
```

例 2。锁定下一个：

```
 private object attachLock = new object();

    // can be called from parallel threads
    public void Attach(OrdersExecutor oe)
    {
        long sequenceNo;
        lock (attachLock)
        {
            sequenceNo = ringBuffer.Next();
        }
        ringBuffer[sequenceNo].Value = oe;
        ringBuffer.Publish(sequenceNo);
    } 
```

例 3。无锁

```
 private object attachLock = new object();

    // can be called from parallel threads
    public void Attach(OrdersExecutor oe)
    {
        long sequenceNo = ringBuffer.Next();
        ringBuffer[sequenceNo].Value = oe;
        ringBuffer.Publish(sequenceNo);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T06:28:45.357

我是disruptor-net的作者。

中断器是一个并发集合，因此一旦配置正确，您就不必应用任何锁定。在您的情况下，您应该使用 MultiThreadedClaimStrategy 初始化 RingBuffer，因为您有多个生产者并使用示例 3 发布到环形缓冲区。

也就是说，我不鼓励在生产代码中使用disruptor-net，我前一段时间在业余时间移植了它，并且没有在生产代码中使用它，它需要进一步测试。

也就是说，.NET 并发队列比 Java 队列快得多，所以我建议使用 ConcurrentQueue 作为 disrutpor 或 BlockingCollection 的替代方案，它提供了非常接近 Disruptor 的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T21:41:18.760

在底层，`Next()`and的实现`Publish()`是基于`Interlocked`静态类的。所以确保代码被**设计**为线程安全的。它看起来是线程安全的，并且是一个整体。但它是线程安全的吗？我不知道。

这个项目似乎不是很活跃，并且落后于 Java API。有些测试失败（在 Mono 上），有些功能根本没有测试（WorkerPool）。小心使用。

我已经给作者发邮件邀请他发表评论，让我们等待他的澄清。

# vb.net - 结尾的 CSV 格式不正确

> ID：13350348
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:39.817
> 
> 标签：vb.net, parsing, csv, streamreader, datareader

嘿，我正试图找出一种方法来纠正我的 CSV 文件中的错误，然后再出现**MalformedLineException 错误**。

我的代码是这样的：

```
Using myreader As New Microsoft.VisualBasic.FileIO.TextFieldParser("c:\temp.csv")
        myreader.TextFieldType = Microsoft.VisualBasic.FileIO.FieldType.Delimited
        myreader.Delimiters = New String() {",", "\n"}
        myreader.HasFieldsEnclosedInQuotes = True 'Added

        While Not myreader.EndOfData
            Try
                currentrow = myreader.ReadFields() 
```

错误出现在**currentrow = myreader.ReadFields()**上。这是由于 CSV 的最后一行中没有结束引号引起的：

```
"xx.xxx.xxx.xx","2012-05-15 13:15:54","Bob Barker","bbarker@priceisright.com"," 
```

它应该是：

```
"xx.xxx.xxx.xx","2012-05-15 13:15:54","Bob Barker","bbarker@priceisright.com","" 
```

在它到达**currentrow = myreader.ReadFields()行****之前**，我该如何纠正它？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:52:42.257

您可以使用[File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)添加报价：

```
File.AppendAllText(filePath, """") 
```**

# ms-access - 在 acDialog 表单变得不可见之后 ms Access 最终在退出时抛出错误

> ID：13350350
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:44.293
> 
> 标签：ms-access

我的 Access 客户端中有一个搜索结果表单，它使用了在 acDialog 模式下打开表单的技巧。如果用户取消搜索，表单会自行关闭，如果用户选择其中一个搜索项，则表单会将结果写入未绑定字段，然后使其自身不可见。

调用代码将暂停（由于`acDialog`模式），直到上一段中描述的两个事件中的任何一个发生。调用代码检查表单是否仍在加载 - 当它知道已请求搜索项时，它会从表单中检索该项目，然后将其关闭。如果表单尚未加载，我们假设选择了取消路由。

搜索结果数据源是一个选择语句`"SELECT * FROM details ORDER BY ..."`

这个技巧在“详细信息”是指向另一个 Access 数据库的链接表的代码中已经奏效了一段时间

我正在移植到 SQL Server，详细信息表现在在启动时动态链接到正确的 SQL Server 实例。使用以下连接字符串

```
ODBC;driver=SQL Server;SERVER=ROO\SQLEXPRESS;DATABASE=Test_DB;UID=my_app;PWD=xxxx; 
```

（密码等更改以保护无辜者）

当 Access 退出应用程序时（并且仅在那时） - 如果通过代码的路径导致使用了 visible = false 技巧，那么它会退出并显示错误消息。如果存在路径已通过搜索表单但表单在返回之前自行关闭的应用程序退出，则不会出现错误消息。

错误信息是：

```
Cannot access database because of Error [Microsoft][ODBC Driver Manager] Data source 
name not found and no default driver specified 
```

现在将退出。

我需要准确找出发生这种情况的原因并阻止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:07:24.143

我通过变通解决了这个问题。我为表单结果创建了一个全局变量，然后总是关闭搜索结果表单本身。试图获取结果的底层例程只使用全局变量。

这证明了使对话框不可见以检索结果是不可靠的-我一更改问题就消失了。

# android - (Android) 水平进度条 - XML 返回 null（设备黑屏）

> ID：13350351
> 
> 赞同：1
> 
> 时间：2012-11-12T19:39:45.813
> 
> 标签：android, progress-bar, android-progressbar

当我在 xml 中设置值时，我的进度条不起作用。

首先，当我以编程方式创建实例时：

```
LinearLayout progressBarLayout = new LinearLayout(activity);
progressBarLayout.setOrientation(LinearLayout.HORIZONTAL);
ProgressBar progressBar = new ProgressBar(activity, null, android.R.attr.progressBarStyleHorizontal);

progressBar.setBackgroundDrawable(activity.getResources().getDrawable(android.R.drawable.progress_horizontal));
final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
ShapeDrawable pgDrawable = new ShapeDrawable(new RectShape());
pgDrawable.getPaint().setColor(Color.parseColor("yellow"));
ClipDrawable progress = new ClipDrawable(pgDrawable, Gravity.LEFT, ClipDrawable.HORIZONTAL);
progressBar.setProgressDrawable(progress);
progressBar.setProgress(activity.getModel().getProgress());
LayoutParams params = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
progressBar.setLayoutParams(params);
progressBarLayout.addView(progressBar);
bodyLayout.addView(progressBarLayout); 
```

但是当我使用 xml 时：

**布局：**

> ```
> <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
>   android:layout_width="fill_parent"
>   android:layout_height="fill_parent"
>   android:background="@android:color/white"
>   android:orientation="vertical"
>   android:padding="10dp" >
> 
>   <ProgressBar xmlns:android="http://schemas.android.com/apk/res/android"
>        android:id="@+id/progressBar"
>        style="@android:style/Widget.ProgressBar.Horizontal"
>        android:layout_width="match_parent"
>        android:layout_height="wrap_content"
>        android:maxHeight="30dp"
>        android:minHeight="30dp"
>        android:progressDrawable="@drawable/progressbar_drawable">
>   </ProgressBar>
> </LinearLayout> 
> ```

**可绘制：**

```
<?xml version="1.0" encoding="UTF-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#ff9d9e9d"
                    android:centerColor="#ff5a5d5a"
                    android:centerY="0.75"
                    android:endColor="#ff747674"
                    android:angle="270"
            />
        </shape>
    </item>

    <item android:id="@android:id/secondaryProgress">
        <clip>
            <shape>
                <corners android:radius="5dip" />
                <gradient
                        android:startColor="#80ffd300"
                        android:centerColor="#80ffb600"
                        android:centerY="0.75"
                        android:endColor="#a0ffcb00"
                        android:angle="270"
                />
            </shape>
        </clip>
    </item>
    <item
        android:id="@android:id/progress"
    >
        <clip>
            <shape>
                <corners
                    android:radius="5dip" />
                <gradient
                    android:startColor="#33FF33"
                    android:endColor="#008000"
                    android:angle="270" />
            </shape>
        </clip>
    </item>

</layer-list> 
```

**JAVA代码：**

```
progressBar = (ProgressBar) findViewById(R.id.progressBar);
progressBar.setProgress(activity.getModel().getProgress());
bodyLayout.addView(progressBarLayout); 
```

这给了我一个例外（黑屏），我不知道为什么。java中的代码在Viewer类中。我有一个活动控制器实例查看器：

```
public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        Log.i("innnnnnnnnnnnnnnnnnnnnfo", "menu");
        try {
            setContentView(R.layout.progress_layout);
            detector = new SimpleGestureFilter(this, this);
            this.mUser = (MaritacaUser) getIntent().getSerializableExtra(Constants.USER_DATA);
            if (mUser != null) {
                InputStream file = getResources().getAssets().open(Constants.FORM_FILENAME);    
                setModel(new Model(file));
                if (!getModel().isQuestionsEmpty()) {
                    viewer = new Viewer(ControllerActivity.this, getModel()
                            .getCurrentQuestion());
                }
                setContentView(viewer.getView());
            }       
        } catch (Exception e) {
                throw new MaritacaException(e.getMessage());
        }
    } 
```

我认为**(ProgressBar) findViewById(R.id.progressBar);** 正在返回 null，但在 R 类中显示 ProgressBar。我在此代码上找不到错误，也许我必须在活动中而不是在查看器中实例化 ProgressBar？

# visual-studio-2010 - 如何禁用 Windows Azure 项目中的角色？

> ID：13350353
> 
> 赞同：5
> 
> 时间：2012-11-12T19:39:49.627
> 
> 标签：visual-studio-2010, azure

我有一个包含 5 个 Azure 角色的解决方案，并将 Azure 解决方案设置为启动项目。当我运行解决方案 5 Internet Explorer 窗口弹出窗口时，每个角色 1 个。我只想运行我正在工作的角色。

如果我注释掉 servicedefinition.csdef 文件中的角色，VS2010 在从各种 .cscfg 文件中引用角色时会抱怨。

如果我在当前执行的 .cscfg 文件中注释掉角色，VS2010 会抱怨来自 .csdef 文件中的引用。

右键单击 Azure 项目并选择管理角色不允许我选择实际执行的角色。

禁用我不感兴趣的角色的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:46:02.943

我能想到的最简单的方法就是禁用在浏览器中启动的端点。

右键单击 Azure 项目下的角色 - 属性并向下滚动到：

![启动动作](../Images/a20b01c9dbaa218c724a99de5509bb50.png)

并取消选中您当前不忙的角色的端点。

# excel - 查找和格式化excel宏

> ID：13350354
> 
> 赞同：0
> 
> 时间：2012-11-12T19:39:53.423
> 
> 标签：excel, excel-2007, vba

我需要在 excel 中找到一种方法来浏览我的整个工作簿并找到所有具有匹配大小写的单词并将它们添加到斜体中。

我有这样的数据单元格：

```
Percentage of CTE concentrators who have met the proficient or advanced level on the 
statewide high school mathematics assessment administered by the state under ESEA and 
who, in the reporting year, left secondary education. 
```

我需要将所有“ESEA”更改为斜体。

有没有办法在excel中做到这一点还是我需要一个宏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:22:54.213

这是将为您执行此操作的代码：

```
Sub Macro1()
Dim sFirstAddress As String, rgFound As Range
Const sSearch As String = "ESEA"

Set rgFound = Cells(1, 1)

Do While Not rgFound Is Nothing

    Set rgFound = Cells.Find(What:=sSearch, After:=rgFound, LookIn:=xlFormulas, LookAt:= _
            xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=True, _
            SearchFormat:=False)

    If rgFound.Address = sFirstAddress Then Exit Do

    If InStr(rgFound.Value, sSearch) > 0 Then
        If Len(sFirstAddress) = 0 Then sFirstAddress = rgFound.Address
        rgFound.Characters(InStr(rgFound.Value, sSearch), Len(sSearch)).Font.FontStyle = "Italic"
    End If

Loop

End Sub 
```

# c# - 父线程到子线程的通信

> ID：13350356
> 
> 赞同：2
> 
> 时间：2012-11-12T19:39:53.770
> 
> 标签：c#, multithreading

我有一个线程列表，通常有 3 个线程，每个线程引用一个与父控件通信以填充数据网格视图的 webbrowser 控件。我需要做的是，当用户单击 datagridviewButtonCell 中的按钮时，相应的数据将被发送回最初与主线程通信的子线程内的 webbrowser 控件。但是当我尝试这样做时，我收到以下错误消息

'不能使用已与其基础 RCW 分离的 COM 对象。

我的问题是我无法弄清楚如何引用相关的网络浏览器控件。我将不胜感激任何人可以给我的任何帮助。

使用的语言是 c# winforms .Net 4.0 目标

代码示例：

当用户单击主线程中的开始按钮时，将执行以下代码

私人无效开始提交（对象idx）{

/*

新线程用于初始化从 webbrowser 控件继承的“myBrowser”的方法每个提交者对象都是一个名为“myBrowser”的自定义控件，其中包含有关对象功能的详细信息，例如：

*/

//index: 是一个整数值，代表线程id

整数索引 = (int)idx;

//submitters[index] 是 'myBrowser' 控件的一个实例

```
submitters[index] = new myBrowser(); 
```

//线程整数id

```
submitters[index]._ThreadNum = index; 
```

// 命名约定使用“浏览器”+线程索引

```
submitters[index].Name = "browser" + index; 
```

//在“myBrowser”类中设置列表以保存在主线程中找到的列表的副本

```
submitters[index]._dirs = dirLists[index]; 
```

// 抑制“myBrowser”控件中可能出现的 javascript 错误

```
submitters[index].ScriptErrorsSuppressed = true; 
```

//执行事件处理程序

```
submitters[index].DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(DocumentCompleted); 
```

//前进到datagridview中下一个未打开的地址导航该地址

//在“我的浏览器”控件中。

```
SetNextDir(submitters[index]); 
```

}

私人无效btnStart_Click（对象发送者，EventArgs e）{

```
 // used to fill list<string> for use in each thread.

  fillDirs();

  //connections is the list<Thread> holding the thread that have been opened
  //1 to 10 maximum

  for (int n = 0; n < (connections.Length); n++)

  {

     //initialise new thread to the StartSubmit method passing parameters

     connections[n] = new Thread(new ParameterizedThreadStart(StartSubmit));

     // naming convention used conn + the threadIndex ie: 'conn1' to 'conn10' 

     connections[n].Name = "conn" + n.ToString();

     // due to the webbrowser control needing to be ran in the single
     //apartment state

     connections[n].SetApartmentState(ApartmentState.STA);

     //start thread passing the threadIndex

     connections[n].Start(n);

  } 
```

}

一旦“myBrowser”控件完全加载，我将表单数据插入到网页中的网页表单中，这些网页通过数据加载到 datagridview 中的行中。一旦用户将相关详细信息输入到行中的不同区域，然后可以单击 DataGridViewButtonCell 收集输入的数据，然后必须将其发送回在子线程上找到的相应“myBrowser”对象。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:48:16.627

该错误表明包装 COM 对象的托管对象（可能是 WebBrowser 控件，但如果没有更多信息我无法确定）已被释放。这意味着托管对象仍然存在（它还没有被垃圾回收），但是已经调用了 IDisposable.Dispose() （它释放了 WebBrowser 控件，它是一个 COM 对象）。

顺便说一下，R​​CW 代表 Runtime Callable Wrapper。

确保您尝试通过其托管包装器引用的 COM 对象没有调用 IDisposable.Dispose（直接调用，或例如通过离开*using*块的范围）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:56:37.730

COM 对象是引用计数的（请参阅[IUnknown](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680509%28v=vs.85%29.aspx)）。`obj->AddRef`增加引用计数并`obj->Release()`减少它。当引用计数器达到零时，对象释放其内存并消失，这就是发生此错误时发生的情况。

`Dispose`不一定要调用`Release`- 对 COM 对象执行此操作的方法是调用[Marshal.ReleaseComObject](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject%28v=vs.90%29.aspx)。然而，完成一个对象会释放它。确保您的 Web 浏览器控件保持在范围内，并确保它实际上没有在主 UI 线程以外的任何线程上被访问。

# c# - POST 操作 - 无参数

> ID：13350357
> 
> 赞同：1
> 
> 时间：2012-11-12T19:39:55.127
> 
> 标签：c#, asp.net, http-post

我有个问题。我想做一个发布操作，我这样做是这样的：

```
string post_data = string.Format("taskId={0}&inputId={1}&value={2}", taskId, inputId, "101");

string uri = "http://localhost:60837/Default.aspx";
// Create a request using a URL that can receive a post. 
        WebRequest request = WebRequest.Create(uri);
        // Set the Method property of the request to POST.
        request.Method = "POST";
        // Create POST data and convert it to a byte array
        var byteArray = Encoding.UTF8.GetBytes(post_data);
        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";
        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;
        // Get the request stream.
        Stream dataStream = request.GetRequestStream();
        // Write the data to the request stream.
        dataStream.Write(byteArray, 0, byteArray.Length);
        // Close the Stream object.
        dataStream.Close();
        // Get the response.
        WebResponse response = request.GetResponse();
        // Display the status.
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader(dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd ();
        // Display the content.
        Console.WriteLine(responseFromServer);
        // Clean up the streams.
        reader.Close();
        dataStream.Close();
        response.Close(); 
```

这是我的 default.aspx 的代码行为：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Response.Write(Caller.Process(Request.RawUrl, Request.QueryString, Request.UserHostAddress));
    }
} 
```

我的 Process 方法如下所示： static readonly string //paramDefinition = "definition", paramTaskId = "taskId", paramInputId = "inputId", paramValue = "value";

```
 static public string Process(string query, NameValueCollection collection, string ip)
    {
        StringBuilder result = new StringBuilder();

        Func<string, bool> check = str =>
        {
            if (!collection.AllKeys.Contains(str))
            {
                result.AppendLine(string.Format("No {0} parameter. ", str));
                return false;
            }
            return true;
        };
        if (check(paramTaskId) && check(paramInputId) && check(paramValue))
        {
            result.Append("OK");
            Execute(query, collection, ip);
        }
        else
        {
            WriteLog(result.ToString(), query, ip);
        }

        return result.ToString();
    } 
```

问题是我的Deafault.aspx 上没有任何参数。当我在浏览器中执行此操作时，一切正常。你知道可能是什么问题吗？提前致谢;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:48:54.673

使用浏览器方法，您正在传递变量`GET`（即，使用作为 url 的一部分传递的参数）。使用代码，您正在路过`POST`. 这是两个不同的东西，在服务器端处理时它们的处理方式不同。

当您在 Default.aspx 的代码中引用变量时，您使用的`Request.QueryString`是专门查找通过`GET`或在 url 中传递的参数。要检索通过 传递的变量`POST`，您需要使用`Request.Form["varName"]`.

# ruby-on-rails - 代码中的管理员凭据？

> ID：13350360
> 
> 赞同：3
> 
> 时间：2012-11-12T19:40:06.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以我正在构建一个博客应用程序，现在我需要构建 Admin 后端。由于我将成为唯一的用户，因此在我的控制器中仅包含一个代码片段是否是一个坏主意：

```
if params[:username] == myusername && params[:password] == mypassword 
```

对于管理员登录？

有人可能会进入我的 controller.rb 文件并获取该信息吗？

该站点上没有其他用户或管理员，因此在我的数据库中放置一个表似乎是多余的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:56:56.567

我不建议将凭据放入控制器中。这简直是​​错误的地方。您至少应该将它们放入配置文件中。如果您只想让随机访问者远离管理区域，则应该考虑使用[基本身份验证。](http://en.wikipedia.org/wiki/Basic_access_authentication)

如果您想了解更多有关使用 Rails 方式集成身份验证的简单信息，请查看此[RailsCast](http://railscasts.com/episodes/250-authentication-from-scratch)

# eclipse - 我可以更改 Eclipse 中用于缩进代码的快捷方式吗？

> ID：13350363
> 
> 赞同：1
> 
> 时间：2012-11-12T19:40:26.410
> 
> 标签：eclipse

我知道它分别是左右的 tab 和 shift-tab，但我更喜欢 Sublime Text 2（坦率地说，大多数 IDE/文本编辑器），它是 ctrl-] 和 ctrl-[。

有什么办法可以改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:28:09.973

我有一个英文键盘，但我输入的是法文，所以缺少一些键。[我在AutoIt3](http://www.autoitscript.com/site/)`<`中制作了一个Windows 脚本，`>`通过按`CTRL+SHIFT+,`和发送字符`CTRL+SHIFT.`。我在下面为您的问题举了一个例子：

文档：[WinTitleMatchMode](http://www.autoitscript.com/autoit3/docs/intro/windowsadvanced.htm)，[WinActive](http://www.autoitscript.com/autoit3/docs/functions/WinActive.htm)

```
; File CustomShortcutEclipse.au3

HotKeySet("^[","leftTabEclipse")
HotKeySet("^]","rightTabEclipse")
HotKeySet("{ESC}","escape")

AutoItSetOption("WinTitleMatchMode", 2)

While(True)
  Sleep(1000)
WEnd

Func escape()
  Exit
EndFunc

Func leftTabEclipse()
  If WinActive("Eclise SDK") Then
    Send("{TAB}")
  EndIf
EndFunc

Func rightTabEclipse()
  If WinActive("Eclise SDK") Then
    Send("+{TAB}")
  EndIf
EndFunc 
```

创建文件后，只需双击它，它的图标就会出现在托盘栏中，因此您可以随时使用它。

# jquery - 更改幻灯片滚动器中的导航

> ID：13350366
> 
> 赞同：0
> 
> 时间：2012-11-12T19:40:38.653
> 
> 标签：jquery, paging

我有这个滑动滚动条，它工作正常。但是，我想更改导航的外观。这是我现在拥有的原始示例 -[请参阅 jsfiddle](http://jsfiddle.net/meek/8S8cR/)。

我想将导航更改为“<< x out of y >>”，其中“x”是当前幻灯片，“y”是幻灯片总数。

我认为脚本中包含所有必要的变量——我只是不能让它看起来和按我想要的方式工作。

我试图改变这行代码：

```
scrollMenu.append('<div class="' + ((i == 0) ? activeClass : '') + ' slide-button slide-index">' + i + '</div>'); 
```

...但我无法让它工作。此外，幻灯片的数量从零开始。我想我需要在某处添加+1。我只是看不出在哪里。

有人想伸出援手吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:57:24.177

在您提到的行中查看您的代码，您可以`scrollMenuSlideItemsNum`使用它，它看起来像当前页面，而您拥有`numSlides`的是幻灯片的数量。所以不要循环遍历，只需删除`for`并放置类似的东西

```
"<< " + scrollMenuSlideItemsNum + " of " + numSlides + " >>" 
```

但是你也必须改变一些其他的事情。您必须更改单击处理程序，以便在单击不同部分时它的工作方式不同。您必须为要附加的 div 编写一个新类。您必须编写一个函数来更新新布局。

# django-templates - 在Django中返回一定数量的单词之后的字符串

> ID：13350368
> 
> 赞同：3
> 
> 时间：2012-11-12T19:40:42.117
> 
> 标签：django-templates

我不知道如何解释我想要做什么。这个例子可以提供帮助。

我有一条短信：
“我叫 Stefano，来自乌拉圭。”

我想表明：
“我的名字是斯特凡诺……
我来自乌拉圭”

我在第一行使用 truncatewords。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:24:40.187

我找到了解决方案： {{ my_text.split|slice:'4:'|join:' ' }}

# image - 如何访问实例中的类资源

> ID：13350369
> 
> 赞同：1
> 
> 时间：2012-11-12T19:40:43.553
> 
> 标签：image, class, smalltalk

我正在尝试制作一个简单的游戏，到目前为止我可以捕获用户输入，但我无法让视图正常工作以打印图像。如果我有一个名为图像的资源，我如何分配单个精灵以在 displayOn 上显示此图像？我尝试了很多方法，例如在我尝试的初始化方法中：

```
self image := Classname image 
```

但这导致了溢出，我被迫关闭视觉而不保存工作。这样做的好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:01:43.217

您通常可以直接访问类端方法，而无需将其存储到实例变量中。例如：

```
myMethodsWhoNeedsAnImage
    | image |
    image := self class imageStoredInClassSide.
    "now do something with image" 
```

如果您需要存储它，当然您不能执行您在示例中尝试的操作，但您可以执行以下操作：

```
initialize
    super initialize.
    image := ClassWithImage image. 
```

或者

```
initialize
    super initialize.
    self image: ClassWithImage image. "This is a setter method" 
```

这些方法中的任何一种都应该有效。如果没有，很可能您在其他地方遇到问题，而不是在访问类方面。

# matlab - 〜= Matlab中的运算符

> ID：13350370
> 
> 赞同：-4
> 
> 时间：2012-11-12T19:40:46.703
> 
> 标签：matlab, operators

有谁知道 Matlab 中的运算符 ~= 是什么？我在 if 语句中看到过

```
if currsign ~= 0
[

] 
```

不等于？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:44:19.670

它只是意味着“不相等”

例如：

```
1 ~= 1 % Returns false

1 ~= 2 % Returns true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:44:21.777

在 Matlab 中 ~= 不等于。if 后面的括号不是有效的 Matlab 语法。'if' 需要与 'end' 配对

# jquery - 卫报风格的动画图画小说

> ID：13350376
> 
> 赞同：-4
> 
> 时间：2012-11-12T19:41:24.780
> 
> 标签：jquery, html, css, animation

你知道这是怎么做的吗？ [http://www.guardian.co.uk/world/interactive/2012/nov/06/america-elect-graphic-novel](http://www.guardian.co.uk/world/interactive/2012/nov/06/america-elect-graphic-novel)

更新：

很抱歉没有说得这么清楚。

当然，我确实查看了该站点的源代码。我知道动画是关于 CSS 或 jQuery 或 HTML5 的......

但是我不确定这个站点上使用了哪个插件或技术。

这就是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:46:02.613

看看源代码，他们正在使用 skrollr - [http://prinzhorn.github.com/skrollr/](http://prinzhorn.github.com/skrollr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:53:10.513

这就是著名的[视差滚动](http://en.wikipedia.org/wiki/Parallax_scrolling)效果。本质上，它是通过在滚动时从背景上的图像操纵 z-index 来实现的。

有一些 jQuery 插件旨在以一种花哨且简单的方式实现这种效果。当[jQuery 插件](http://plugins.jquery.com)站点恢复运行时，您可以[搜索](http://archive.plugins.jquery.com/project/jquery-parallax-style)此类插件。

然而，正如@devdigital 所说，他们在他们的网站上使用[了 skrollr](http://prinzhorn.github.com/skrollr/)。

在 github 页面中，skrollr 被描述为：

> 适用于移动设备（Android + iPhone）和桌面的独立视差滚动库

或者从更夸张的角度来看：

> 实际上，skrollr 不仅仅是“只是”视差滚动。这是一个成熟的滚动动画库。事实上，你可以使用它并且仍然完全没有视差滚动。但我想听起来很时髦并使用一些流行语。顺便说一句，skrollr 利用 HTML5 和 CSS3

我希望它有所帮助。干杯

# java - 用于与 Java EE Web 应用程序集成的 Java 磁卡读卡器 API

> ID：13350384
> 
> 赞同：2
> 
> 时间：2012-11-12T19:41:54.093
> 
> 标签：java, jakarta-ee, web-applications, magnetic-cards

我正在用 Java 开发一个需要与磁卡读卡器交互的 Web 应用程序。

我一直在寻找很长一段时间，但我没有看到解决方案。我已经看到可用于这些的 .NET API。我正在寻找可用于与我的 Web 应用程序集成的开源解决方案。

# c++ - 了解 OPT 算法

> ID：13350386
> 
> 赞同：1
> 
> 时间：2012-11-12T19:42:02.270
> 
> 标签：c++, c, algorithm

好的，我正在尝试理解 OPT 算法，然后它将使我更容易对其进行编码。我无法跟随幻灯片，它没有任何意义。有人可以逐步指导我如何操作吗？

这看起来与 LRU 算法相同。我们是否使用计数器保留第二个数组？

![在此处输入图像描述](../Images/ccc99942c69797fbf607e4e9c01c711b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:47:29.990

您显然必须事先知道将要使用哪些页面以及以什么顺序使用；这是`1, 2, 3, ..., 4, 5`您示例中的列表。当您必须替换页面时，您选择包含将在所有页面中最后使用的页面的框架。

在此示例中，您访问页面 1、2、3、4、1 和 2 时不会出现任何页面错误（因为当前所有页面都已换入）。

您的下一页访问，第 5 页，不在任何框架中，因此您必须选择一个框架将其放入。根据即将到来的页面命中（1、2、3、4），页面 4（在第 4 帧中）将最后被访问，因此您将第 5 页交换到第 4 帧（如图所示）。

接下来的页面 1、2 和 3 可以正常访问。

现在第 4 页已被访问，但它先前已被换出，因此出现页面错误。您即将访问的列表显示仅需要第 5 页，因此可以换出 1、2 和 3 中的任何一个。选择了1，大概是因为它是第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:54:59.840

最佳算法只是理论上导致缓存未命中最少的算法。

换句话说，*在*您了解缓存的使用方式之前，不可能知道最佳值。这意味着您无法提前*编写最佳算法；*因为，您不知道缓存将如何实际使用。

*最优算法作为实际*算法的基准非常有用。每个重要的缓存问题最终都会缓存未命中。了解特定运行的“绝对最小”未命中数可以为比较两种缓存算法提供基准。

例如，如果你*必须*错过缓存四次，那么与错过缓存七次的算法相比，错过缓存六次的算法看起来相当不错。如果您必须错过缓存 1000 次，那么错过缓存 1006 次的算法和错过缓存 1007 次的算法几乎是等价的。

根据缓存的使用模式，一些算法比其他算法更频繁地访问缓存。一个例子是 LRU，它会从缓存中删除很少使用的项目：如果你倾向于在一小段时间内对相同的项目进行多次访问，这是很好的。另一方面，如果您需要多次访问每个项目，但按顺序访问一次（如在循环中），那么 LRU 的性能可能会很糟糕（~100% 缓存未命中），因为每次访问只会将一个项目踢出缓存. 巧合的是，在这些条件下，MRU（新项目替换最近使用的项目）缓存将比 LRU 执行得更好，因为至少前几个项目的缓存命中一次。

# css - 修复了引导程序中的非全尺寸标头

> ID：13350388
> 
> 赞同：1
> 
> 时间：2012-11-12T19:42:03.687
> 
> 标签：css, twitter-bootstrap

我正在尝试将我的标题设置为固定。但它只适用于全尺寸......我找不到我的错。我的小提琴：http: [//jsfiddle.net/D2RLR/3234/](http://jsfiddle.net/D2RLR/3234/)

如果我使用`<div class="navbar navbar-static-top" >`它不是固定的但具有我想要的宽度，如果我使用 `<div class="navbar navbar-fixed-top" >` 它从浏览器的左边框到右边框，比如 facebook。我怎样才能用侧边栏+内容的大小来解决这个问题？感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:49:52.713

像这样？

```
.footer-fixed {
    position:fixed;
    bottom: 0px;
    width: 925px;
    margin: auto 0px;
    border: 1px solid #000000;
} 
```

也许您也可以将`margin`and`width`用于标题。你知道你的代码，所以你可能会为这些找到合适的类。

# ruby-on-rails - 从 ruby on rails 的命令行中删除缓存

> ID：13350390
> 
> 赞同：1
> 
> 时间：2012-11-12T19:42:10.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

我想从我的代码中删除缓存。我的代码在 Ruby on rails 中。问题是我已经更新了我的设计，但它显示的是旧的。我试过这个`Rails.cache.clear`命令，但它不起作用。它给了我这个错误`'Rails.cache.clear' command not found.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T23:56:35.843

`Rails.cache.clear`需要从 Rails 控制台运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:46:29.240

您需要转到 ./config/environments/production.rb 或 development.rb ，具体取决于您在哪里启动代码，并更改设置以反映这一点：

```
 # Code is not reloaded between requests
  config.cache_classes = false 
```

如有必要，请注释掉您的缓存存储行：

```
# Use a different cache store in production
  config.cache_store = :dalli_store 
```

理想情况下，第一个片段应该足够了。

# jquery - 从另一个页面单击链接时，如何执行 jquery 操作？

> ID：13350391
> 
> 赞同：0
> 
> 时间：2012-11-12T19:42:09.727
> 
> 标签：jquery, hyperlink, expander

我正在为每篇文章创建一个带有 jquery 扩展框的电子通讯。默认情况下，每个扩展框都是关闭的。我们会在每期之前发送一封电子邮件预告片，其中包含每篇文章的链接。我想知道是否有任何方法可以扩展我在预告片代码中链接到的文章（或者可能在命名链接的类中）。作为参考，可以在此处找到 jquery 文件：http: [//jjnursingnotes.com/NOV12/jquery.expander.js](http://jjnursingnotes.com/NOV12/jquery.expander.js)

时事通讯的 HTML 如下所示。[将指向http://jjnursingnotes.com/NOV12#01](http://jjnursingnotes.com/NOV12#01)的链接插入电子邮件预告片时，我希望显示 div 层“扩展器”中的内容。

```
<div class="expander">
    <a name="01"></a>
    <h1>Title</h1>
    <h2>Subtitle</h2>
    <h3>content</h3>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:46:33.440

在不查看扩展器插件的细节的情况下，这是我最近在我自己的一个站点中使用的解决方案。希望您可以自定义以使用您正在使用的扩展器插件。我不能把变量解析归功于它，这起源于其他地方。

您的链接需要这样设置：

```
http://jjnursingnotes.com/NOV12?section=01 
```

然后你的JavaScript：

```
<script type="text/javascript">
// Redirect to Appropriate Section
var urlParams = {};
(function () {
    var match,
        pl     = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query  = window.location.search.substring(1);

    while (match = search.exec(query))
       urlParams[decode(match[1])] = decode(match[2]);
})();

$(document).ready( function(){
    if ( urlParams['section'] != '' ) {
        // urlParams['section'] variable = the ?section=XXX part of URL
        // Here is where you would need integration with expanding box

        // Assuming you use something like <div class="expander" id="sect01">
        // as your expander, something to this effect ought to work:

        $("#sect" + urlParams['section'] ).find(".read-more a").click();

        // Position document at start of anchor 
        $('body,html').animate({ scrollTop: $("#sect" + urlParams['section'] ).offset().top }, 500 );
    }
});
</script> 
```

# jenkins - 在 Jenkins 中显示 SONAR 结果？

> ID：13350395
> 
> 赞同：3
> 
> 时间：2012-11-12T19:42:31.810
> 
> 标签：jenkins, sonarqube, jenkins-plugins

Jenkins的[SONAR 插件](http://docs.codehaus.org/display/SONAR/Hudson+and+Jenkins+Plugin)希望在 repo 上运行 SONAR 分析。我们如何在 Jenkins 中显示一些结果摘要？例如，每个构建的关键和阻塞违规图表。

[Analysis Collector](https://wiki.jenkins-ci.org/display/JENKINS/Analysis+Collector+Plugin)看起来有一个趋势图。但是，[这家伙](https://stackoverflow.com/a/13329565/34935)提倡SONAR。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:51:41.487

Sonar 为分析指标和违规行为提供了自己的仪表板，独立于 Jenkins。Sonar 中的时间机器功能允许您查看项目指标的历史趋势。

# java - 自定义 Swing 外观

> ID：13350400
> 
> 赞同：0
> 
> 时间：2012-11-12T19:42:48.597
> 
> 标签：java, swing

好像很多人都喜欢用swing，我一直在看它在我的项目中使用，但我面临的问题是我不喜欢它的外观。不过，我确实喜欢 Photoshop 的外观，并且想知道：是否可以让摇摆看起来有点像下图？如果你有这方面的教程，请发布链接！

![PhotoShop 摆动菜单](../Images/75c21679d24a02e2b4f60a56b286931e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:45:26.770

是的，如果你真的想花时间让它看起来像那样，那么你可以使用 Synth 在它上面创建我们自己的皮肤。

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/synth.html) http://www.javadesktop.org/articles/synth/index.html

# node.js - 如何通过node js执行存储过程

> ID：13350401
> 
> 赞同：2
> 
> 时间：2012-11-12T19:43:04.057
> 
> 标签：node.js, procedure

我正在使用 db-oracle 模块（node.js）来查询表（SEARCH 命令）。我能够成功获取记录。

我需要执行存储过程。知道如何从节点 js 代码执行 oracle 存储过程吗？我可以通过 db-oracle 模块执行吗？或者任何其他模块可用？

注意：存储过程返回多个值，我也需要捕获它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:19:17.123

您应该能够从该`.query`方法调用该过程，例如：

```
var oracle = require('db-oracle');
new oracle.Database({
    hostname: 'localhost', user: 'root',
    password: 'password', database: 'node'
}).connect(function(error) {
    if (error) { return console.log("CONNECTION ERROR: " + error); }
    this.query("BEGIN SOME_PROC(); END;").execute(function(error, rows) {
        if (error) {
            return console.log('ERROR: ' + error);
        }
        /* Do something with rows here */
    });
}); 
```

# javascript - 检查 PhoneGap 中是否已加载音频流

> ID：13350407
> 
> 赞同：0
> 
> 时间：2012-11-12T19:43:35.070
> 
> 标签：javascript, audio, cordova, timer, loading

有什么方法可以检查您的音频流是否已在 PhoneGap 中完成加载？或者至少它的初始缓冲区与它永远不会完成的流一样:)

我想为用户显示一个微调器，以便他们知道他们的流正在加载，但目前我必须用 JS 计时器来伪造它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:53:27.613

如果您像这样加载媒体：

```
my_media = new Media(src, onSuccess, onError); 
```

您可以在 onSuccess 函数中隐藏微调器

参考：[http ://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#media.play](http://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#media.play)

# sql - SQL - 缺少右括号

> ID：13350419
> 
> 赞同：5
> 
> 时间：2012-11-12T19:44:21.387
> 
> 标签：sql, oracle, oracle10g, oracle11g

我正在尝试在 Oracle 11g 中执行此脚本并收到以下错误，我不知道我在哪里遗漏了括号或者是什么错误请帮助我解决这个问题。

脚本：

```
CREATE TABLE User_Role ( 
  user_role_id INT  NOT NULL  , 
  Users_user_id INT  FOREIGN KEY REFERENCES Users(user_id), 
  User_Types_user_type VARCHAR(20) FOREIGN KEY REFERENCES User_Types(user_type),  
  PRIMARY KEY(user_role_id) 
) 
```

错误：

> ORA-00907: 缺少右括号

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T19:47:02.077

删除`FOREIGN KEY`子句。重写你的`CREATE TABLE`陈述如下：

```
CREATE TABLE User_Role ( 
      user_role_id         INT  NOT NULL  , 
      Users_user_id        INT  REFERENCES Users(user_id), 
      User_Types_user_type VARCHAR(20) REFERENCES User_Types(user_type),  
      PRIMARY KEY(user_role_id) 
    ) 
```

在这种情况下，约束名称将由 Oracle 生成。如果你想给他们更有意义的名字，你可以写你的`create table`声明如下：

```
 CREATE TABLE User_Role1 ( 
      user_role_id         INT  NOT NULL  , 
      Users_user_id        INT  , 
      User_Types_user_type VARCHAR(20) ,  
      constraint PK_YourTable PRIMARY KEY(user_role_id), 
      constraint FK_Table_1 foreign key(Users_user_id) REFERENCES Users(user_id),
      constraint FK_Table_2 foreign key(User_Types_user_type) REFERENCES User_Types(user_type)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:50:44.097

我认为您需要先定义列，然后以与添加`FOREIGN KEY`约束相同的方式添加`PRIMARY KEY`约束，如下所示：

```
 CREATE TABLE User_Role ( 
       user_role_id INT  NOT NULL  , 
       Users_user_id INT, 
       User_Types_user_type VARCHAR(20),
       FOREIGN KEY (Users_user_id) REFERENCES Users(user_id),
       FOREIGN KEY (User_Types_user_type) REFERENCES User_Types(user_type), 
       PRIMARY KEY(user_role_id) 
     ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T08:30:16.253

删除 int 的大小并重新编译

例子 ：-

```
integer (20) not null
integer not null
User_Types_user_type VARCHAR(20),
User_Types_user_type VARCHAR, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T08:58:54.173

您*可以*指定内联外键，您只需要删除`foreign key`关键字：

```
CREATE TABLE User_Role 
(
  user_role_id           INT NOT NULL  , 
  Users_user_id          INT         REFERENCES Users, 
  User_Types_user_type   VARCHAR(20) REFERENCES User_Types,  
  PRIMARY KEY(user_role_id) 
); 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!4/4ca9f/1](http://sqlfiddle.com/#!4/4ca9f/1)

在“引用”部分列出主键列是可选的。如果你愿意，你也可以写`REFERENCES Users(user_id)`

这种格式还有一个缺点是约束名称将由 Oracle 生成（具有无意义的名称）。为了能够正确地为外键指定约束名称，您需要使用已接受答案中的语法。

# ruby - 使 ruby 程序在所有处理器上运行

> ID：13350421
> 
> 赞同：5
> 
> 时间：2012-11-12T19:44:31.330
> 
> 标签：ruby, jruby

我一直在考虑优化一个 ruby​​ 程序，该程序对大量数据的计算非常密集。我不懂 C 并且选择了 Ruby（我也不是很了解它），而且我对结果非常满意，除了执行所需的时间。这是很多数据，而且不花任何钱，我想知道我能做些什么来确保我最大限度地利用我自己的系统资源。

当我运行一个基本的 Ruby 程序时，它是否使用单个处理器？如果我没有专门为处理器分配任务，Ruby 不会读取我的程序并神奇地加载每个处理器以尽可能快地完成程序，对吗？我假设没有...

我一直在阅读一些关于加速 Ruby 的文章，并且在另一个线程中读到 Ruby 不支持真正的多线程（尽管它说 JRuby 支持）。但是，如果我将我的程序“分解”成两个可以在单独实例中运行的块并以并行方式运行它们......这两个块会自动在两个单独的处理器上运行吗？如果我有四个处理器并打开四个外壳并运行程序的四个独立部分（1/4） - 它会在 1/4 的时间内完成吗？

# 更新

阅读评论后，我决定试一试 JRuby。移植应用程序并不是那么困难。我还没有使用过“peach”，但只要在 JRuby 中运行它，应用程序就可以运行 1/4 的时间！！！疯狂的。我没想到会有这么大的变化。现在要给 .peach 一个机会，看看它是如何改进的。仍然无法相信这种提升。

# 更新#2

刚刚试了一下桃子。最终节省了 15% 的时间。所以切换到 JRuby 并使用 Peach 绝对值得。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T22:50:23.800

使用 JRuby 和[peach](http://peach.rubyforge.org/) gem，再简单不过了。只需替换一个`.each`with`.peach`和瞧，您正在并行执行。还有其他选项可以准确控制产生了多少线程等。我已经使用了它，效果很好。

您将获得接近*n*倍的加速，其中*n*是可用的 CPU/内核数。我发现最佳线程数略多于 CPU/内核数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:14:42.687

就像其他人所说的 ruby​​（大多数人使用的）的 MRI 实现不支持本机线程。因此，您不能通过使用 MRI 实现启动更多线程来在 CPU 内核之间分配工作。

但是，如果您的进程是 IO 绑定的（例如受磁盘或网络活动限制），那么您仍然可以从多个 MRI 线程中受益。

另一方面，JRuby 确实支持本机线程，这意味着您可以使用线程在 CPU 内核之间拆分工作。

但一切都没有丢失。使用 MRI（以及所有其他 ruby​​ 实现），您仍然可以使用**进程**来拆分工作。

这可以使用[`Process.fork`](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-fork)例如这样的方式来完成：

```
Process.fork {
  10.times {
    # Do some work in process 1
    sleep 1
    puts "Hello 1"
  }
}

Process.fork {
  10.times {
    # Do some work in process 2
    sleep 1
    puts "Hello 2"
  }
}

# Wait for the child processes to finish
Process.wait 
```

使用`fork`将在 CPU 内核之间拆分处理，因此如果您可以在没有线程的情况下生活，那么单独的进程是一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:03:37.297

线程通常被认为是 Ruby 的弱点之一，但它更多地取决于您使用的 Ruby 实现。

关于不同线程模型的一篇非常好的文章是“ [Ruby 有真正的多线程吗？](https://stackoverflow.com/a/57802/638216) ”。

根据我的经验以及从更了解这些东西的人那里收集到的信息，如果您要选择 Ruby 实现，JRuby 似乎是您的最佳选择。但是，如果您正在学习 Ruby，您可能想选择另一种语言，例如 Erlang，或者 Clojure，如果您想使用 JVM，这些都是流行的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:09:55.180

与 ruby​​ 一样好，它的执行速度并不为人所知。话虽如此，如果如您的评论中所述，您可以将输入分成大小相等的块，您应该能够启动程序的 n 个实例，其中 n 是您拥有的内核数，并且操作系统将照顾你使用所有的核心。

在最好的情况下，它会以 1/n 的时间运行，但是这种事情可能很难完全正确，因为系统的某些部分，比如内存，需要在进程之间共享，并且进程之间的争用可能会导致问题不要线性缩放。如果拆分很容易，我会尝试一下。您也可以尝试运行相同的程序两次，看看运行需要多长时间，如果运行一个程序所需的时间与运行两个程序所需的时间相同，那么您可能已经准备好了，只需拆分数据并继续它。

尝试 jruby 和一些线程可能会有所帮助，但这会增加相当多的复杂性。（这可能是学习线程的一个很好的借口。）

# javascript - 将ajax响应传递给django模板

> ID：13350427
> 
> 赞同：0
> 
> 时间：2012-11-12T19:44:47.003
> 
> 标签：javascript, python, ajax, django

我正在学习一起使用 javascript、ajax、python 和 django。

在我的项目中，用户从下拉列表中选择一种语言。然后将所选内容发送回服务器。然后服务器将响应发送回 django 模板。这是由 javascript 完成的。在 django 模板中，我需要响应（例如德语）来更新 html 代码。如何将响应传递给 html 代码。响应可以在......的范围内看到。

如何在不重新加载html页面的情况下做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:27:05.623

您可以使用 jquery 发送 ajax 请求，服务器可以发送带有 html 内容的响应。例如，

服务器：当服务器收到 ajax 请求时。这将返回 html 内容，即可以通过 ajax 呈现给客户端的模板

```
def update_html_on_client(request):
    language = request.GET.get('language', None)
    #for selected language do something
    cal_1 = ...
    return render_to_response('my_template.html', {'cal':cal_1}, content_instance = template.RequestContent(request)) 
```

模板：这是用于生成 ajax 请求的 ajax 函数示例。您可以选择可以填充服务器返回的 html 响应的 div。

```
function getServerResponse(){
$.ajax({
  url: 'your_url_here',
  data: {language:'German'},
  dataType:'html'
  success : function(data, status, xhr){
               $('#server_response').html(data);
             }
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:50:08.880

因为您的模板是在服务器上呈现的，所以最好的办法是简单地重新加载页面（这会使用您新选择的语言重新呈现页面）。

使用 ajax 的替代方法是将语言存储在 cookie 中，这样您就不必在客户端上维护状态。无论哪种方式，重新加载仍然是必要的。

您可以调查客户端模板。[车把](http://handlebarsjs.com/)是个不错的选择。

# pycharm - 在 Pycharm 中设置变量路径或导出解释器

> ID：13350428
> 
> 赞同：2
> 
> 时间：2012-11-12T19:44:50.970
> 
> 标签：pycharm

有没有办法像 Idea 一样在 pycharm 中设置变量路径？

我的目标是能够在 python 解释器的 Paths 选项卡中使用这个变量。就像现在一样，每当我想在新机器上设置这个解释器时，我都必须输入特定于我的机器的自定义路径。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:48:45.413

`.idea/misc.xml`Python 解释器在项目文件 ( )中由其名称引用。的实际元素`Paths`不存储在项目中，而是在用户特定的 PyCharm[配置目录](http://devnet.jetbrains.net/docs/DOC-181)( `~/.PyCharm20/config/options/jdk.table.xml`) 中。

路径变量功能仅影响项目文件，因此在这里没有帮助。您仍然需要在每台机器上再次定义解释器路径，因为它是系统 IDE 配置，而不是项目。

# ruby-on-rails - 在一篇文章中实现多个附件

> ID：13350433
> 
> 赞同：0
> 
> 时间：2012-11-12T19:45:01.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave, attachment

在 Rails 项目中处理多个附件的最佳方法是什么？

我有一个帖子。我想附加不同类型的内容（音频/文档/照片/视频）并显示它们。我希望能够在不同的帖子中使用相同的附件。我应该如何实现这个（例如，如果我使用 gemcarrierwave）？

这可行，但我想将每种内容分成不同的模型和表格（会有很多内容）：

```
class Attachment < ActiveRecord::Base
  attr_accessible :post_id, :image, :remote_image_url, :document, :remote_document_url, :video, :remote_video_url
  belongs_to :post
  belongs_to :user

  mount_uploader :image, ImageUploader
  mount_uploader :document, DocumentUploader
  mount_uploader :video, VideoUploader
end 
```

*更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:17:48.163

您可以创建一个模型内容（您可以稍后将其关联到您喜欢的任何模型），然后使用嵌套的内容模型执行 has_many 以添加多个内容项。不要忘记将您的扩展和 MIME 类型列入白名单

# c# - 使用 C# 控制台应用程序将行从 sqlite 复制到 excel

> ID：13350435
> 
> 赞同：-2
> 
> 时间：2012-11-12T19:45:06.443
> 
> 标签：c#, excel, sqlite

在控制台应用程序中，我想将 sqlite 中的一行复制到一个 excel 表中。我可以使用下面的代码连接到 sqlite

```
 SQLiteConnection connection = new SQLiteConnection(@"Data Source = C:\foo;Version=3;");
        connection.Open(); 
```

现在我应该通过哪个 sql 命令获取该行并复制到应该以 unicode 保存的 excel 工作表。

以及如何复制到excel表？请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:52:20.880

首先，我会查找一些关于`SQLiteConnection`. 谷歌可以帮助你。

您可能能够编写查询并迭代结果。

接下来，查找有关 Excel 电子表格格式或 .net excel 库的信息。谷歌可以帮助你。

当您遍历查询结果时，您可以将其加载到 Excel 电子表格中。

如果您只需要可以加载到 Excell 应用程序中的东西，您可以查看`.csv`格式。只需在 Excel 中制作一个简单的示例 Excel 电子表格并将其另存为`.csv`，然后在记事本中打开它。格式应该很容易解释。

# javascript - 寻找带有回调的 JS Map 控件

> ID：13350444
> 
> 赞同：0
> 
> 时间：2012-11-12T19:45:41.743
> 
> 标签：javascript, jquery

我想知道是否有人知道一个好的 Javascript/Query 地图控件，它允许用户点击一个位置。完成此操作后，控件将使用用户刚刚选择的 GPS 坐标进行回调。

有谁知道这样的控制。

我一直在寻找，但还没有找到任何东西。

这是在 MVC3 应用程序中使用的。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:56:06.150

来自谷歌地图 API (https://developers.google.com/maps/documentation/javascript/events#EventListeners)

```
var map;
function initialize() 
{
    var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var mapOptions = 
    {
        zoom: 4,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    google.maps.event.addListener(map, 'click', function(event) 
    {
        placeMarker(event.latLng);
    });
}

function placeMarker(location) 
{
    var marker = new google.maps.Marker(
    {
        position: location,
        map: map
    });

    map.setCenter(location);
} 
```

演示[https://google-developers.appspot.com/maps/documentation/javascript/examples/event-arguments](https://google-developers.appspot.com/maps/documentation/javascript/examples/event-arguments)

# asp.net - ASP.NET：使用数据列表外部的验证器验证数据列表文本框

> ID：13350450
> 
> 赞同：0
> 
> 时间：2012-11-12T19:45:57.000
> 
> 标签：asp.net, requiredfieldvalidator

我有一个需要验证的文本框数据列表。然而，我的问题是我的 requiredfieldvalidators 位于我的数据列表之外，靠近页面顶部。当我尝试在我的 RFV 中设置 ControlToValidate 时，我收到一条错误消息，指出它找不到该控件。

如果我将我的 RFV 移动到我的数据列表中，它可以正常工作。知道如何让它识别数据列表中的控件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:21:11.287

你不能这样做。这是因为控件名称和 ID 是在运行时根据它们的父级、datalist 和 datalist 中的每一行生成的。我能想到的唯一解决方法是将所需的验证器移回数据列表并使用验证摘要来显示错误消息。

```
<asp:ValidationSummary runat="server" ID="ValidationSummary1" /> 
```

# python - 找到两个字符串之间的最佳匹配字符数（类似于字符串对齐，但在某些方面不是）

> ID：13350451
> 
> 赞同：1
> 
> 时间：2012-11-12T19:45:59.373
> 
> 标签：python, string, match

我正在尝试在 Python 中执行此操作。我有两个序列：

seq1: 'ABCD E'

seq2：'ARCB E'

假设我想“计算” seq1 和 seq2 中的字符数，但按照以下方式，假设我从 seq1 中的 A 到 seq2 中的 A 画一条线，同样连接 C--C 和 E--E 但如果我连接 B--B 这条连接线将越过连接 C--C 的线，所以......我想计算 B---B 或 C--C 而不是两者，因为它们的线交叉并找到这样的总数我可以在两个字符串之间建立连接。

有没有办法做到这一点？我确信我正在尝试做的事情有一个名字，但我不知道它，这使得在线搜索可能的方法也很困难。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:49:26.047

听起来像是[最长的公共子序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)问题。Levenshtein 距离的动态规划算法的简化版本解决了这个问题。

互联网上有大量 LCS的[Python 实现](https://www.google.com/search?q=longest%20common%20subsequence%20python)。维基百科给出的伪代码翻译成 Python 也很简单。

# c - math.h 和角度函数的未定义参考

> ID：13350454
> 
> 赞同：1
> 
> 时间：2012-11-12T19:46:07.417
> 
> 标签：c, header, trigonometry

当我包含 math.h 和角度依赖项时，我得到一个未定义的参考消息。（因为，罪……）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:46:57.123

您需要链接到数学库。

通过在行尾`gcc`添加来完成。`-lm`

# javascript - 可以在 IIFE 中用全局替换 window 吗？

> ID：13350457
> 
> 赞同：0
> 
> 时间：2012-11-12T19:46:16.217
> 
> 标签：javascript, iife

不知何故，这样做会让人感觉有些不对或很脏，但它似乎比使用导出或窗口更具语义性。这个可以吗？

```
(function(global){
  var foo,bar;
  foo = 'Private Var';
  global.bar = 'Hello World';
})(window); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:51:25.753

您只是通过这样做为 window 创建别名，而不是替换它。我喜欢这种风格。“全球”使您的意图更加清晰。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:54:41.727

你的模式很好。不过考虑一下：

```
// global code

(function () {

    var root = this;

    // use root variable to refer to the global object

}).call( this ); 
```

这种模式不依赖于`"window"`名称，这使得它具有可移植性。（当然，这个名字`"root"`是任意的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T11:23:56.517

正如其他人所说，您并没有*替换*，`window`您只是为它创建了一个别名。
你的模式很好，但我想提一点建议：如果你在全局上下文中运行 IIFE，你应该`this`作为`global`参数而不是 window 传递：

```
(function(global){

})(this); 
```

This helps your code to be more cross-platform, say if you would make a module that runs in the browser but runs on another platform too (say like nodejs or rhino) where the `window` object doesn't exist, or it isn't the global object that youwant it to be.

# ocaml - 如何在 Ocaml 中将非内置类型转换为字符串？

> ID：13350459
> 
> 赞同：2
> 
> 时间：2012-11-12T19:46:21.337
> 
> 标签：ocaml

我正在尝试编写一个模块，将 x:int = if true then 3 else 5 转换为字符串

这是我到目前为止的代码

```
module Ast =
struct

type typ = Bool | Int
type var = A | B | C | D | E | F
type exp = Const of int * typ
           | App of string * exp list
           | If of exp * exp * exp
           | And of exp * exp
           | Or of exp * exp
       | Id of var * typ * exp

let rec toString (t) =
    let formatDec1(va,ty,e) = ???
    match t with
    Const(n, _) -> print_int n
      | App(id, [e1; e2]) -> formatter(" " ^ id ^ " ", e1, e2)
      | App(id, [e1]) -> formatter(" " ^ id ^ " ", e1, Const(0, Int))
      | App(id, _) -> formatter(" " ^ id ^ " ", Const(0, Int), Const(0, Int))
      | If(e1, e2, e3) -> formatIf(e1, e2, e3)
      | And(e1, e2) -> formatter(" && ", e1, e2)
      | Or(e1, e2) -> formatter(" || ", e1, e2)
      | Id(va,ty,e) -> formatDecl(va,ty,e)
end 
```

我仍然是 OCaml 的初学者，找不到任何关于在线转换为字符串的信息。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T10:06:45.050

您想使用 ml 语法漂亮地打印符号表达式。有一些库可以处理所谓的 sexp，但我从未使用过它们，我无法评论它们的用途，而且它可能不是你想要的，因为它会回避练习的目的。

我认为您与已有的内容有些接近，但是您的代码中存在一些语法错误。我会给你一堆建议来帮助你缩小差距。

**首先，关于 OCaml 语法：**

回想一下，您不需要为函数参数使用括号。函数定义的一般语法是：

```
let fun_name arg1 arg2 arg3 = function_body 
```

如果你写

```
let fun_name (arg1,arg2,arg3) = ... 
```

您实际上是在定义一个带有 1 个参数的函数，它本身就是 3 个值的元组。

在表达式中，您可以使用`let ... in`构造定义局部值，就像定义顶级值时一样（就像我在上面所做的那样）。如果这些值定义不是相互依赖的，您可以`and`在多个值定义之间使用关键字。

例如，

```
let x = 1 
and y = "a" in
... 
```

将定义 2 个值`x`，`y`可以在后续代码中使用。

**在您的代码中**

您拥有的类型提供了一些符号表达式语言，您可以使用它定义表达式，例如您在示例中给出的表达式：

"x:int = if true then 3 else 5" 将是：

```
Id("x", 
   Int, 
   (If (Const (1, Bool), 
        Const (3, Int), 
        Const (5, Int)))) 
```

实际上，您需要递归地遍历该值，并将返回的字符串组合成一个更大的字符串。或者，您可以使用字符串列表，并在最后进行字符串连接。查看该示例，您可能会看到它是如何工作的：

```
"x" ^ (":" ^ "int") ^ "=" ^ ("if" ^ ("true") ^ "then" ^ ("3") ^ ("5")) 
```

您可以在上面看到不同的子表达式模式。我用括号来表示它们。

在您的 toString 函数中，有 3 个未定义的值：

*   `formatter`（采用 3 元组类型的函数`string * exp * exp`）
*   `formatDec1`（另一个函数采用 3 元组类型`exp * exp * exp`）
*   `formatIf`（同`formatDec1`）

`rec`您在函数定义中使用了关键字`toString`，表明该函数是递归的。在我看来，您不需要上面的 3 个函数（它们是您最初分配的一部分，还是您自己定义了它们？），只需要`toString`那里的函数和字符串连接。

您的类型的`App`手臂`exp`非常通用：您可以定义任意数量的参数的应用程序，因此您的字符串转换代码应该考虑到这种可能性。您可以使用一些列表功能（`fold_left`想到）来处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T20:05:23.840

还有一个名为[deriving](http://code.google.com/p/deriving/)的项目，可以帮助自动生成打印函数。我没用过，但看起来不错。

看到像这样的东西被添加到基本的 OCaml 编译器中会非常酷。它在 Haskell 中运行良好（这是“派生”名称的来源）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T19:49:07.523

您必须为您的类型（或聚合类型，由可打印类型的记录或产品组成）实现自己的打印例程。

您可能希望使用`%a`模块[Printf](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Printf.html)的转换规范，它除了要打印的参数外还接受打印功能。

如果使用交互式`ocaml`顶级解释器，您可能需要使用`#install_printer` [toplevel 指令](http://aml.inria.fr/pub/docs/manual-ocaml/manual023.html)。

在您的代码中，您希望递归调用`format`（例如，对于`And(e1, e2)`模式案例）。

要打印到字符串，请使用`Printf.sprintf`或[格式化](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Format.html)`.sprintf`和朋友。`Printf`和模块都`Format`为您提供其他功能（打印到通道、缓冲区、字符串等）

# jquery - jQuery 动态调整元素大小及其内容 onClick

> ID：13350472
> 
> 赞同：1
> 
> 时间：2012-11-12T19:47:14.220
> 
> 标签：jquery, css, html

您好，我想在我的页面上创建一个像动画一样的缩放，它正在工作，但您不要调整窗口大小，因为调整大小后一切都会变得凌乱:)。

概念是：当您单击分配给 .click() 函数的链接时，页面的左侧和右侧滑出，中间部分变为“全屏”，如果单击退出，则左右滑动早在。

我当前代码的问题是在调整浏览器大小并单击其中一个按钮后，它会产生额外的效果，或者只是在容器动画完成后图像大小动画正在运行。

而且我被卡住了，我不知道如何让它像调整窗口大小之前一样平滑。

在代码中，布局如下所示：

```
<!doctype html>
<html>
<head>
<style>
html, body {height:100%; padding:0; margin:0; overflow:hidden;}
#left{width:400px; height:100%; position:absolute; left:0; top:0; overflow:hidden;}
#right{width:200px; height:100%; position:absolute; right:0; top:0; overflow:hidden;}
#center{height:100%; position:absolute; left:400px; right:200px; top:0; overflow:hidden;}
</style>
</head>
<body>
<div id="left"></div>
<div id="center">
  <a href="#" onClick="return false;" class="zoom">Fullscreen</a>
  <a href="#" onClick="return false;" class="downsize">Exit</a>
  <img src="img.jpg" />
</div>
<div id="right"></div>
</body>
</html> 
```

jQuery 代码现在看起来像这样：

```
function resizeE(){
        var wWidth = $(window).width();
        var wHeight = $(window).height();
        var cWidth = $('#center').width();
        var cHeight = $('#center').height();
        var iWidth = $('#center img').width();
        var iHeight = $('#center img').height();
        var calcWidth = wHeight*1.7777;
        var iMargin = (cWidth-calcWidth)/2;
        var c2Width = wWidth-600;
        var i2Margin = (c2Width-calcWidth)/2;
        var posLeft = $('#center').position().left;
        if(posLeft == '400'){
            $('#center img').css({'height': wHeight+'px', 'width': calcWidth+'px', 'margin-left': iMargin+'px'});
        }else{
            $('#center img').css({'width': wWidth+'px', 'height': (wWidth/1.7777)+'px', 'margin-left': '0'});
        }
        $('.zoom').click(function(){
            $('.downsize').fadeIn('fast');
            $('#center img').animate({width: wWidth+'px', height: (wWidth/1.7777)+'px', marginLeft:'0'}, 1200);
            $('#center').animate({left: '0', right: '0'}, 1200);
                    $('#left').animate({marginLeft:'-400px'}, 1200);
                    $('#right').animate({marginRight:'-200px'}, 1200);
        });
        $('.downsize').click(function(){
            $('.downsize').fadeOut('fast');
            $('#center img').animate({width: calcWidth+'px', height: wHeight+'px', marginLeft: i2Margin+'px'}, 1200);
            $('#center').animate({left: '400px', right: '200px'}, 1200);
                    $('#left').animate({marginLeft:'0'}, 1200);
                    $('#right').animate({marginRight:'0'}, 1200);
        });

    }
jQuery(document).ready(function($) {
    $('.downsize').hide();
    resizeE();  
    $(window).resize(resizeE);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:18:35.407

看起来问题是每次调整浏览器大小时都会添加一个新的点击事件。如果您取消绑定顶部的旧点击事件，`resizeE`它会起作用。这是一个[更新的小提琴链接](http://jsfiddle.net/emosaurusrex/shrmv/7/)。

两行添加到顶部`resizeE`

```
$('.downsize').off('click');
$('.zoom').off('click'); 
```

请记住，当您通过 jQuery 绑定事件时，例如`.click`，它不会覆盖任何以前的事件。

# android - 实现各种onclick事件

> ID：13350474
> 
> 赞同：1
> 
> 时间：2012-11-12T19:47:16.427
> 
> 标签：android, button, onclick, android-edittext

你好，我有一个点击按钮和两个编辑文本的大问题，我用十二个按钮和两个编辑文本创建了自己的键盘，第一个编辑文本只允许输入数字，第二个允许输入数字并进行计算。我真正的问题是我不能只在第一个中输入第二个编辑文本。这是平局

```
 *********** *********
        *    1    * *   2   *   // These are EditTexts 
        *********** *********

        **************************
        *   7   *   8    *   9   *   
        **************************
        *   4   *   5    *   6   *  // These are Buttons
        **************************
        *   1   *   2    *   3   *
        **************************
        *   0   *   c    *   +   *
        ************************** 
```

(+) 此按钮进行计算并更改编辑文本的焦点

这也是代码：在此先感谢我将不胜感激任何帮助

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_cornuta);

         setupListView(); //set the list view
         inJugada = (EditText) findViewById(R.id.edit_x);
         inJugada.requestFocus();

         inValor = (EditText) findViewById(R.id.edit_y);

         inTotal = (EditText) findViewById(R.id.edit_z);
         inTotal.setText("");
         tv = (TextView) this.findViewById(R.id.textView2);  
         btnMensage = (ImageButton)findViewById(R.id.imageButton1);
         btnCombina = (Button)findViewById(R.id.button6);

         //Implementation for button 0123456789+delclr
         final Button bt0 = (Button) findViewById(R.id.btnNum0Id);
    bt0.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "0";
            }else if(inJugada.requestFocus() == false){
                numberDisplayed += "0";
            }

            updateTextField();

        }
    });

    final Button bt1 = (Button) findViewById(R.id.btnNum1Id);   
    bt1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "1";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "1";
            }
            updateTextField();

        }
    });

    final Button bt2 = (Button) findViewById(R.id.btnNum2Id);
    bt2.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "2";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "2";
            }
            updateTextField();
        }
    });

    final Button bt3 = (Button) findViewById(R.id.btnNum3Id);
    bt3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "3";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "3";
            }
            updateTextField();
        }
    });

    final Button bt4 = (Button) findViewById(R.id.btnNum4Id);
    bt4.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "4";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "4";
            }
            updateTextField();
        }
    });

    final Button bt5 = (Button) findViewById(R.id.btnNum5Id);
    bt5.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "5";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "5";
            }
            updateTextField();
        }
    });

    final Button bt6 = (Button) findViewById(R.id.btnNum6Id);
    bt6.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "6";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "6";
            }
            updateTextField();
        }
    });

    final Button bt7 = (Button) findViewById(R.id.btnNum7Id);
    bt7.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "7";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "7";
            }
            updateTextField();
        }
    });

    final Button bt8 = (Button) findViewById(R.id.btnNum8Id);
    bt8.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "8";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "8";
            }
            updateTextField();
        }
    });

    final Button bt9 = (Button) findViewById(R.id.btnNum9Id);
    bt9.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(inJugada.requestFocus() == true){
                playDisplayed += "9";
            }else if(inValor.requestFocus() == true){
                numberDisplayed += "9";
            }
            updateTextField();
        }
    });

    final Button btPlus = (Button) findViewById(R.id.btnAddId);
    btPlus.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            if(inJugada.length() == 4){
                processPale();

            }else if(inJugada.length() == 2){
                processNum();

            }else if(inJugada.length() == 6){
                processTripleta();

            }

            //processNumbers();
            //showListViewData();
            updateTextField();
            plus = true;

        }

    });

    final Button btBs = (Button) findViewById(R.id.btnAtras);
    btBs.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if (numberDisplayed.length() >= 1) {
                numberDisplayed = numberDisplayed.substring(0,
                        numberDisplayed.length() - 1);
            }

            if (playDisplayed.length() >= 1) {
                playDisplayed = playDisplayed.substring(0,
                        playDisplayed.length() - 1);
            }
            updateTextField();
        }
    });

    final Button btClear = (Button) findViewById(R.id.btnClearId);
    btClear.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            numberDisplayed = "";
            playDisplayed = "";
            storedNumber = "";
            plus = false;
            resultNumber = 0d;
            inValor.clearFocus();
            updateTextField();
            mData.clear();
            mAdapter.notifyDataSetChanged();
        }
    });

private void processNumbers() {

    if (plus) {
        resultNumber = calc.sum(Double.parseDouble(numberDisplayed),
                resultNumber); //create a sum
    }else{
        resultNumber = new Double(numberDisplayed);
    }
    numberDisplayed = "";
    updateTextField();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:55:21.767

您不想使用，因为`hasFocus()`将焦点从 View 当前拥有的任何视图中移开并将其提供给调用者。此外，您应该使用通用侦听器来减少重复代码，如下所示。`requestFocus()``requestFocus()`

创建一个新的类变量：

```
OnClickListener addClickListener = new OnClickListener() {
    public void onClick(View v) {
        int number = Integer.parseInt(((Button) v).getText().toString());
        if(inJugada.hasFocus()) { // " == true" is implied
            playDisplayed += number;
        }else if(inValor.hasFocus()) {
            numberDisplayed += number;
        }
        updateTextField();
    }
}; 
```

并将此侦听器添加到您的 Buttons 0-9：

```
final Button bt0 = (Button) findViewById(R.id.btnNum0Id);
bt0.setOnClickListener(addClickListener);

// etc. 
```

# python - 将值列表添加到 sqlite 表中的列

> ID：13350476
> 
> 赞同：0
> 
> 时间：2012-11-12T19:47:30.880
> 
> 标签：python, list, sqlite

所以我能够在我的数据库中创建一个新表并从文件中收集所有信息，以使用游标填充表中除了最后一列之外的所有信息，并像往常一样执行。

最后一列信息来自不同的来源，在我的代码中作为整数列表。我将如何将这个整数列表添加到我的最后一列？

我已经尝试了各种循环和迭代，但我只是在如何正确表达它方面遗漏了一些东西（可能很明显）。

```
connection = sqlite3.connect('database.db')
cursor = connection.cursor()
for j in list:
    cursor.execute('insert into Table (column) values (?)', j)
connection.commit() 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "Homework/Homework7/bam_counting.py", line 157, in <module>
    cursor.execute('insert into Genes (counts) values (?)', j)
ValueError: parameters are of unsupported type 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:57:19.183

如果你使用`INSERT INTO...`，那么 sqlite 将创建一个新行。您必须使用`UPDATE table ...`来更新已经存在的行。

您需要告诉 sqlite 将新列值添加到哪一行。通常，您会使用类似的 SQL 语句来执行此操作

```
UPDATE Table SET column = ? WHERE column2 = ? 
```

`column2`表中的其他列在哪里。

所以这样的事情很慢但可能：

```
cursor.execute('SELECT column2 FROM Table ORDER BY column2')
column2 = [row[0] for row in cursor]
for j, c in zip(lst, column2):
    cursor.execute('UPDATE Table SET column = ? WHERE column2 = ?', [j, c]) 
```

一个更好的解决方案（如果可能的话）是推迟`INSERT`进入表格，直到你收集了所有需要的信息，然后做一个`INSERT`.

* * *

PS。如果您重新安排程序以收集所有要插入到行列表中的数据`args`，那么您可以调用

```
cursor.executemany('INSERT INTO ...', args) 
```

这将比许多调用更快`cursor.execute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T00:49:38.073

使用[Python Central](http://pythoncentral.io/advanced-sqlite-usage-in-python/)`INSERT INTO`提供的完整示例：

> ```
> # Import the SQLite3 module
> import sqlite3
> db = sqlite3.connect(':memory:')
> c = db.cursor()
> c.execute('''CREATE TABLE users(id INTEGER PRIMARY KEY, name TEXT, phone TEXT)''')
> users = [
>     ('John', '5557241'), 
>     ('Adam', '5547874'), 
>     ('Jack', '5484522'), 
>     ('Monthy',' 6656565')
> ]
> 
> c.executemany('''INSERT INTO users(name, phone) VALUES(?,?)''', users)
> db.commit()
> 
> # Print the users
> c.execute('''SELECT * FROM users''')
> for row in c:
>     print(row)
> 
> db.close() 
> ```

另请参阅[是否可以在 SQLite 数据库中一次插入多行？](https://stackoverflow.com/questions/1609637/is-it-possible-to-insert-multiple-rows-at-a-time-in-an-sqlite-database)

# knockout.js - Knockout.js 在字符串列表的 `foreach` 中使用 `value:` 绑定 - 不更新

> ID：13350485
> 
> 赞同：12
> 
> 时间：2012-11-12T19:48:27.353
> 
> 标签：knockout.js, knockout-2.0

这是[一个 jsFiddle](http://jsfiddle.net/bmh_ca/SksQ3/1/)演示以下问题：

给定（可观察的）字符串列表上的 foreach 绑定，可观察对象似乎不会从绑定在 foreach 内的输入标签的更改中更新。人们会期望他们这样做。这是来自 jsFiddle 的示例：

### HTML

```
<ul data-bind='foreach: list'>
    <li><input data-bind='value: $data'/></li>
</ul>

<ul data-bind='foreach: list'>
    <li><span data-bind='text: $data'></span></li>
</ul> 
```

### Javascript

```
​var vm = { list: [ko.observable('123'), ko.observable('456')] };
ko.applyBindings(vm);​ 
```

在上面的例子中，人们会期望更新第一个列表中的输入标签会导致 observables 更新。不幸的是，它们没有按预期更新，从第二个列表未能反映对第一个列表所做的任何更改可以看出。

我验证了当输入元素发生变化时，列表实际上并没有被更新。有趣的是，对可观察对象所做的更改都反映在两个列表中（正如人们所期望的那样）。即，`vm.list[1]("444")`将更新两个列表的第二个元素。

我的回忆是 Knockout 2.0.0 没有这个问题，尽管我有待纠正。我没有在 Knockout 代码中找到任何文档、Google 或注释来说明为什么这不起作用或如何实现预期的结果。

为什么这不能按预期工作，是否有任何不需要更改数据结构的解决方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-12T20:37:50.187

`value: $parent.list[$index()]`正如在[这个 jsFiddle](http://jsfiddle.net/bmh_ca/SksQ3/3/)中看到的那样，我通过使用来解决这个问题。新绑定如下所示：

```
<ul data-bind='foreach: list'>
    <li>
        <input data-bind='value: $parent.list[$index()]' />
    </li>
</ul> 
```

也许可以通过自定义绑定来改进这一点。

另请参阅 Knockout.js 的相关[GitHub 问题 #708](https://github.com/SteveSanderson/knockout/issues/708)。

**淘汰赛 3.0 更新：**

淘汰赛现在提供`$rawData`：

```
<ul data-bind='foreach: list'>
    <li><input data-bind='value: $rawData'/></li>
</ul> 
```

按预期创建双向绑定。

从*[绑定上下文](http://knockoutjs.com/documentation/binding-context.html)*文档：

> $原始数据
> 
> 这是当前上下文中的原始视图模型值。通常这将与 $data 相同，但如果提供给 Knockout 的视图模型包装在可观察对象中，则 $data 将是未包装的视图模型，而 $rawData 将是可观察对象本身。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T19:59:31.867

默认敲除绑定中使用的每个数据对象都将始终被解包。因此，您本质上是绑定到列表中项目的值，而不是您期望的可观察值。

Observables 应该是对象的属性，而不是对象本身的替换。将 observables 设置为某个对象的属性，这样就不会发生这种情况。

```
​var vm = {
    list: [
        { value: ko.observable('123') },
        { value: ko.observable('456') }
    ]
}; 
```

```
<ul data-bind='foreach: list'>
    <li><input data-bind='value: value'/></li>
</ul>

<ul data-bind='foreach: list'>
    <li><span data-bind='text: value'></span></li>
</ul> 
```

# unix - 如何计算文件内容差异？

> ID：13350488
> 
> 赞同：1
> 
> 时间：2012-11-12T19:48:49.070
> 
> 标签：unix, sed, grep

我有两个文件`large_input`和`subset_input`文件，它们的内容可能是

`large_input`

```
1
34
65
7643
hello
we 
```

`subset_input`

```
65
we
hello
34 
```

在这种情况下`sort`，命令不是很有帮助，否则`sort | uniq`在后面的两个文件上都`diff`非常有用

**问题** 在这种数据无法排序的场景中（因为它的内容），找出最好的方法是什么

`large_input`-`subset_input`这将是

```
1
7643 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:56:26.090

```
diff <(sort file1) <(sort file2) | sed '/^[0-9][0-9]*[acd][0-9]*/d;s/^[<>] //' 
```

为我工作，

输出：

```
1
7643 
```

某些 shell 不支持`<(sort fileX)`，因此您可能必须就地对文件文件进行预排序，例如`sort -o file1 file1; sort file -o file2 file2; ....`

sed 表达式从 中删除输出`diff`。要查看它在做什么，首先完全删除 sed，一次添加 1 个部分（由分号分隔）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:50:35.903

这正是[`comm`](http://man.cx/comm)为：

```
comm -23 <(sort large_input) <(sort subset_input) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:43:27.973

您可以使用 sed 来生成完成这项工作的 sed 脚本：

```
sed -e 's#^#/^#' -e 's#$#$/d#' subset_input > sed_script 
```

然后将此 sed 脚本应用于您的 large_input 很容易：

```
sed -f sed_script large_input 
```

如果你有 bash，它可以在没有临时文件的情况下完成：

```
sed -f <(sed -e 's#^#/^#' -e 's#$#$/d#' subset_input) large_input 
```

但是，此解决方案仅适用于“合理”大小的子集输入。

# android - 三星 Galaxy S3 上的 Android 相机预览不正确

> ID：13350490
> 
> 赞同：1
> 
> 时间：2012-11-12T19:48:58.403
> 
> 标签：android, android-camera, rhomobile

当我使用 Android 4.0.4 上的三星 Galaxy S3 在我的应用程序中加载相机时，预览图像只是绿色且模糊不清，带有水平噪点。相机按钮看起来不错。当我拍照时，保存的文件看起来不错。我测试了内置相机应用程序，它工作得很好。

此问题不会在运行 Android 2.3 的三星 Galaxy S 和摩托罗拉 Electrify 上发生。

我使用 Rhomobile 进行开发。这里是安卓摄像头源代码的链接：[https ://github.com/rhomobile/rhodes/tree/master/platform/android/Rhodes/src/com/rhomobile/rhodes/camera](https://github.com/rhomobile/rhodes/tree/master/platform/android/Rhodes/src/com/rhomobile/rhodes/camera)

当我提起相机时，这是我得到的： ![在此处输入图像描述](../Images/68c54491b0f87bb1fbfd15847d803332.png)

我的设置： - Android 4.0.4 上的三星 Galaxy S3 - Rhodes 3.4.2 - minSDK：8 - Android SDK：4.1

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T23:15:20.687

我通过更改我的相机设置来解决这个问题：

settings = {:desired_width => 800, :desired_height => 800, :flash_mode => 'auto'} Camera::take_picture(url_for(:action => :camera_callback_new), settings)

到

settings = {:desired_width => 1024, :desired_height => 1024, :flash_mode => 'auto'} Camera::take_picture(url_for(:action => :camera_callback_new), settings)

# php - php ss2_connect() - 使用 RADIUS 服务器连接到交换机

> ID：13350491
> 
> 赞同：0
> 
> 时间：2012-11-12T19:49:06.133
> 
> 标签：php, ssh

我试图弄清楚如何连接到对 RADIUS 服务器进行身份验证的 CISCO 交换机。这不是工业级开关，而是用于小型企业的。

我一直在为我的其他开关使用 phpseclib，但由于这个特定开关的工作方式存在一些差异，我正在考虑推出我自己的解决方案。

我有以下基本代码：

```
 <?php
  echo "attempt connect....<br>";

  Try{

        $connection = ssh2_connect('10.14.3.45', 22);
        var_dump($connection);
        echo "attemp ssh2 authorization....<br>";

       echo ssh2_auth_password($connection, 'CANNetworkInfra', 'fe8CC+ad4aA9');
       exit;
       $stream = ssh2_exec($connection, 'show bonjour');
       $errorStream = ssh2_fetch_stream($stream, SSH2_STREAM_STDERR);

       // Enable blocking for both streams
       stream_set_blocking($errorStream, true);
       stream_set_blocking($stream, true);

      // Whichever of the two below commands is listed first will receive its appropriate output.  The second command receives nothing
      echo "Output: " . stream_get_contents($stream);
      echo "Error: " . stream_get_contents($errorStream);

      // Close the streams       
      fclose($errorStream);
      fclose($stream);  
     }
     catch (Exception $ex)
     {
       echo 'doing a var dump:';
        var_dump($connection);
      } 
```

此代码因以下错误消息而死：

> 警告：ssh2_auth_password() [function.ssh2-auth-password]：在第 10 行的 /var/www/test/customssh.php 中使用密码对用户名进行身份验证失败

我认为问题与交换机总是在寻找一个公钥这一事实有关——我们没有使用它，因为我们想对一个半径服务器进行身份验证。手动连接时似乎发生的事情是这样的：

1.  我们在终端窗口中运行以下命令：“ssh username@ipaddress”
2.  开关检查 /home/username/.ssh/id_rsa 的默认文件夹中的公钥
3.  它没有找到该文件，因此交换机会提示我们输入用户名。我们再次输入。
4.  然后它会提示输入密码。
5.  在我们提供正确的密码后，它会连接。

我们还没有找到方法来禁用交换机上的公钥检查。所以我的问题是，有没有办法通过 ssh2_auth_password() 发送用户名两次，这样我们就可以模拟我们手动连接的操作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:55:48.827

经过一番研究，这是我们问题的解决方案。其他人可能以不同的方式解决了问题，但这似乎对我们有用。

我们注意到以下关于这个特定系列的 CISCO 交换机 (SF300)

1.  由于 ssh 实现有限，流行的 ssh 库（如 phpseclib）在此开关上失败。

2.  php 的 ssh2_auth_none 函数在此开关上返回 TRUE。

这是什么意思？

似乎 ssh 协议有一种身份验证方法，称为“无”。这是不安全的，并且通常在大多数交换机上被禁用。ssh2_auth_none() 函数尝试在没有任何身份验证的情况下进行连接，如果失败，它会返回服务器接受的身份验证方法列表。在 SF300.. 的情况下，它通过并且不返回任何身份验证方法。

1.  已知的 CLI 和 SSH 限制

尽管他们无法为我们提供解决方案，但 CISCO 技术支持确实明确指出，小型企业级交换机具有有限的 CLI 和精简版的 SSH，因此您不能将其视为具有一个完整的 ssh 实现。

如果有帮助，这里有一小段代码展示了如何连接到这些类型的设备：

'; fwrite($stdio_stream, "show bonjour".PHP_EOL); //您可以使用 \n 代替 PHP_EOL，但建议使用 PHP_EOL。睡眠（1）；回显“
结果：”。stream_get_contents($stdio_stream); ?>

希望这可以帮助任何试图以编程方式连接到这些类型设备的人。

# c - malloc 和 realloc 的区别？

> ID：13350495
> 
> 赞同：15
> 
> 时间：2012-11-12T19:49:23.320
> 
> 标签：c, pointers

假设我有两个代码示例用于创建一个包含 10 个元素的整数数组：

```
int *pi = (int*)0; 
realloc(pi,10); 
```

另一个是正常写的，即：

```
int *pi;
pi= malloc(10*sizeof(int)); 
```

现在，我的问题是：第一种类型的赋值是合法的，但没有使用。为什么，虽然我可能会得到我选择的起始位置？
用常量初始化指针是合法的，但不被使用。为什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-12T19:50:36.373

当`NULL`被传递时，`realloc`相当于`malloc`。`NULL`如果您在某种循环中重新分配并且不想在第一次分配时出现特殊情况，则该调用可能很有用。

* * *

当我们这样做时，使用 malloc 和 realloc 的相当标准的方法是：

```
int* p;
p = malloc(10 * sizeof(int)); //Note that there's no cast
//(also, it could just be int* p = malloc(...);)

int* np = realloc(p, 15 * sizeof(int));
//Note that you keep the old pointer -- this is in case the realloc fails 
```

* * *

顺便说一句：历史是您在不同行上看到声明和赋值的主要原因。在旧版本的 C 中，声明必须放在函数的首位。这意味着即使您的函数直到 20 行才使用变量，您也必须在顶部声明。

由于您通常不知道未用于另外 20 行的变量的值应该是什么，因此您不能始终将其初始化为任何有意义的值，因此您在顶部留下了一个声明并且没有赋值功能。

在 C99/C11 中，您不必在作用域的顶部声明变量。事实上，通常建议定义尽可能接近其用途的变量。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-12T19:50:26.147

C 要求传递给的指针`realloc`必须是从 获得的指针`malloc`，`calloc`或`realloc`函数调用（或空指针）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-12T19:51:47.033

第一个赋值是*不*合法的，因为你传入的指针`realloc()`必须是之前通过某种分配给你的。（此外，你忽略了它的返回值，这是你绝对不能对分配做的事情！）

`malloc()`是为某些固定大小的东西创建一个缓冲区。`realloc()`是返回一个缓冲区并获得另一个（可能）不同大小的缓冲区 - 它可能会返回您正在使用的相同缓冲区。

# ios - 在 tableView 中检查一行

> ID：13350499
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:49:35.603
> 
> 标签：ios, uitableview

我试图在不依赖 indexPaths 的情况下检查 tableView 中的一行。这类似于我之前问过的一个问题，但这似乎应该比它更容易。

我有一个静态值数组，它是我的 tableView 的数据源，称之为 fullArray。选择行时，它的值放在另一个数组中 - 允许呼叫它PartialArray。在我使用 indexPaths 执行此操作之前，我会使用以下方法迭代 partialArray：

```
for(NSIndexPath * elem in [[SharedAppData sharedStore] selectedItemRows]) { 
    if ([indexPath compare:elem] == NSOrderedSame) { 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

奇迹般有效。但是，现在我正在尝试使用部分数组中的值来执行此操作，但遇到了麻烦。

以下是我认为它应该在我的 sudo 代码中的 cellForRowAtIndexPath 方法中工作的方式：

对于 fullArray 中的每个字符串，如果它在 partialArray 中，则获取它的 indexPath 并检查它。

我开始拼凑的代码：

```
for(NSString *string in fullArray) {
    if (partialArray containsObject:string) {
//Need help here. Get the index of the string from full array
    fullArray indexOfObject:string];
//And check it.

        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
} 
```

看起来它不应该那么难，但我无法绕过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:03:20.897

我不知道您为什么要放弃存储索引路径，但这是您的决定。此外，您可能希望使用 an`NSMutableSet`来存储检查的项目而不是数组。例如，更好的变量名将是，`checkedItems`而不是`partialArray`.

无论如何，如果您只需要遍历元素`fullArray`并获取每个元素的索引，则可以使用两种方法之一。一种方法是只使用一个普通的旧 C 循环，如`for`语句：

```
for (int i = 0, l = fullArray.count; i < l; ++i) {
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (!cell)
        continue;
    NSString *item = [fullArray objectAtIndex:i];
    cell.accessoryType = [partialArray containsObject:item]
        ? UITableViewCellAccessoryCheckmark
        : UITableViewCellAccessoryNone;
    }
} 
```

另一种方法是使用`enumerateObjectsWithBlock:`方法：

```
[fullArray enumerateObjectsUsingBlock:^(id item, NSUInteger index, BOOL *stop) {
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:index inSection:0];
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    if (!cell)
        return;
    cell.accessoryType = [partialArray containsObject:item]
        ? UITableViewCellAccessoryCheckmark
        : UITableViewCellAccessoryNone;
}]; 
```

# wpf - WPF XAML 动画（新手）

> ID：13350512
> 
> 赞同：4
> 
> 时间：2012-11-12T19:50:21.663
> 
> 标签：wpf, xaml, animation

我正在尝试在 XAML 中测试动画。我的意图是制作一个字体大小的脉冲（永远增加和减少）。但是当我输入下面的代码时，Visual Studio 无法识别该类`DoubleAnimation`。我究竟做错了什么？

```
<Window x:Class="testingAnimation.MainWindow"
        xmlns="http://schemas.microsoft.com/netfx/2007/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"        
        Title="MainWindow" Height="350" Width="525">
 <StackPanel>
    <TextBlock Text="HELLO">
       <TextBlock.FontSize>
            <DoubleAnimation />
       </TextBlock.FontSize>
    </TextBlock>
 </StackPanel>
</Window> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:59:59.177

您需要声明 a`Storyboard`并在加载时启动它：

```
 <TextBlock x:Name="Text" Text="Hello!!">
            <TextBlock.Triggers>
                <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard Duration="00:00:01" RepeatBehavior="Forever" AutoReverse="True">
                                <DoubleAnimation From="10" To="20" Storyboard.TargetName="Text" Storyboard.TargetProperty="FontSize"/>   
                            </Storyboard>                            
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </TextBlock.Triggers>
    </TextBlock> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:02:12.960

您需要`Storyboard`用于运行动画 -

```
<TextBlock x:Name="textBlock" Text="HELLO">
     <TextBlock.Triggers>
         <EventTrigger RoutedEvent="FrameworkElement.Loaded">
             <BeginStoryboard>
                 <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                     <DoubleAnimation Storyboard.TargetName="textBlock" 
                               Storyboard.TargetProperty="FontSize"
                               From="10" To="30" 
                               Duration="0:0:1"/>
                  </Storyboard>
             </BeginStoryboard>
          </EventTrigger>
      </TextBlock.Triggers>
</TextBlock> 
```

要了解有关动画的更多信息，请点击[此处](http://www.codeproject.com/Articles/364529/Animation-using-Storyboards-in-WPF)的链接。

# iphone - 键值观察 NSCache

> ID：13350519
> 
> 赞同：4
> 
> 时间：2012-11-12T19:50:50.520
> 
> 标签：iphone, objective-c, ios, key-value-observing, nscache

我想在与 NSCache 实例中的某个键对应的对象发生更改时得到通知。我试过使用 Key-Value Observing 没有运气（控制台不记录任何内容）。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.cache addObserver:self forKeyPath:@"myKey" options:NSKeyValueObservingOptionNew context:NULL];
    [self.cache setObject:@"myObject" forKey:@"myKey"];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog(@"KEYPATH CHANGED: %@", keyPath);
} 
```

如何观察 NSCache 的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T20:27:45.230

我`NSCache`不希望这种键符合键值观察 (KVO)。KVO 是在`NSObject`级别内部实现的，方法是将普通设置器替换为提醒相关观察者并调用原始设置器的设置器。对于您设置的东西，`setObject:forKey:`没有特定的设置器，因此运行时没有任何东西可以挂起。

由于`NSCache`没有发布任何相关通知，我认为您最好的希望是[委托协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSCacheDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCacheDelegate)。究竟什么算作驱逐并不明确，但如果`cache:willEvictObject:`在与键关联的对象被故意更改时调用，那么您可以直接取消它。

否则`NSCache`，我建议您`DWCache`为. 它将在第一次调用 setObject:forKey:; 时发布适当的消息 (i) (ii) 每次后续调用提供的对象与缓存中已有的对象不同；(iii) 每当它收到一个.`NSCache``setObject:forKey:``cache:willEvictObject:`

唯一潜在的复杂性是`NSCache`不复制原始密钥，并且部分结果是无法从对象获取密钥。您可能希望单独存储这些连接，例如通过`NSDictionary`. 如果您在缓存驱逐对象时清除字典，您仍将提供缓存行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:22:14.823

你必须实现这个方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context; 
```

keyPath 是改变的键，object 是新的值。

# java - 如何进行快速的 http 请求？（爪哇）

> ID：13350521
> 
> 赞同：0
> 
> 时间：2012-11-12T19:51:06.193
> 
> 标签：java, json, performance, http, request

我做了一个作为自动购买者的应用程序。使其尽可能快对于比其他任何人更快地到达该项目至关重要。我正在使用无限循环（即 for(;;)）来发出连续的 http 请求，然后解析 JSON 结果。

有谁知道如何同时提出多个请求？我目前每秒处理大约 3 个请求。java也不适合这种应用程序吗？我应该考虑使用另一种语言吗？

非常感谢你！

编辑：我使用类似的搜索功能

```
for(;;){
search(323213, 67);
search(376753, 89);
}

public void search(int itemID, int maxPrice) {

// sets the http request with the need cookies and headers
// processes the json. If (itemId==x&&maxPrice>y) ==> call buy method

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:54:05.393

在无限循环中发出请求将使您的 IP 被任何主动监控滥用的服务阻止。

如果您希望在短时间内并行发送一堆请求，请启动多个线程并让每个线程提交一个请求。

Java 是一个非常强大的多线程平台。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:58:29.080

使用[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)，您可以安排一个 runnable 以固定速率运行，例如每 10 秒一次，而无需担心自己产生线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-13T09:34:31.170

1.  获取请求字符串 url = " [http://www.google.com/search?q=developer](http://www.google.com/search?q=developer) ";

    ```
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(url);

    // add request header
    request.addHeader("User-Agent", USER_AGENT);

    HttpResponse response = client.execute(request); 
    ```

2.  字符串 url = " [https://selfsolve.apple.com/wcResults.do](https://selfsolve.apple.com/wcResults.do) ";

    ```
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(url);

    // add header
    post.setHeader("User-Agent", USER_AGENT);

    List<NameValuePair> urlParameters = new ArrayList<NameValuePair>();
    urlParameters.add(new BasicNameValuePair("sn", "C02G8416DRJM"));
    urlParameters.add(new BasicNameValuePair("cn", ""));
    urlParameters.add(new BasicNameValuePair("locale", ""));
    urlParameters.add(new BasicNameValuePair("caller", ""));
    urlParameters.add(new BasicNameValuePair("num", "12345"));

    post.setEntity(new UrlEncodedFormEntity(urlParameters));

    HttpResponse response = client.execute(post); 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T19:57:59.503

这是另一篇文章，它提供了一个很好的例子来说明如何使用线程来做到这一点： [How do you create an asynchronous HTTP request in JAVA?](https://stackoverflow.com/questions/3142915/how-do-you-create-an-asynchronous-http-request-in-java)

如果您熟悉 JavaScript，Node.JS 是另一个不错的选择。使用 Node.JS 无需担心线程，因为请求是异步完成的。

# java - 如何知道运行时是哪种 EJB？

> ID：13350524
> 
> 赞同：0
> 
> 时间：2012-11-12T19:51:15.143
> 
> 标签：java, ejb

如何通过运行时查找知道返回的对象是什么类型的 EJB？

只知道是否是有状态的对我有好处。

```
bound = new InitialContext().lookup(lookup);
if(isStateful(bound)){...} 
```

我当前的应用程序服务器是 JBoss AS 6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:55:11.010

这取决于...您是否使用注释[`Stateful`](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateful.html)和[`Stateless`](http://docs.oracle.com/javaee/6/api/javax/ejb/Stateless.html)？

```
final Class<?> clazz = bound.getClass();
if (clazz.isAnnotationPresent(Stateful.class)) {
  /* stateful */
} else if (clazz.isAnnotationPresent(Stateless.class)) {
  /* stateless */
} else {
  /* woops? */
} 
```

# ember.js - 动画视图转换。如何推迟删除或插入元素？

> ID：13350532
> 
> 赞同：6
> 
> 时间：2012-11-12T19:51:45.693
> 
> 标签：ember.js

我尝试在连接不同的插座之间进行一些动画转换。我知道有类似`willInsertElement`,`didInsertElement`或`willDestroyElement`on View 类的方法可以覆盖，但你不能推迟附加或特别是删除元素。我试图覆盖其他方法，但视图类很难理解它是如何工作的。我想出了一个主意：

[jsfiddle 示例](http://jsfiddle.net/robak86/mu9XV/)

```
 AnimationHelper = Ember.Object.extend({
        isPreviousViewFadedOut:false,
        nextViewToFadeIn:null,
        triggerManually: true,
        setNextViewToFadeIn:function (view) {
            if (this.nextViewToFadeIn) {
                if (this.hasObserverFor('isPreviousViewFadedOut')) {
                    this.removeObserver('isPreviousViewFadedOut', this.nextViewToFadeIn, 'fadeInCallback');
                }
            }
            this.nextViewToFadeIn = view;
            this.addObserver('isPreviousViewFadedOut', this.nextViewToFadeIn, 'fadeInCallback');
        }
    });

    AnimatedView = Ember.View.extend({
        didInsertElement:function () {
            this.$().hide();

            if (AnimatedView.aHelper.get('triggerManually')) {
                AnimatedView.aHelper.set('isPreviousViewFadedOut', true);
                this.fadeInCallback();

                //next time we don't want call fadeInCallback manually
                AnimatedView.aHelper.set('triggerManually', false);
            } else {
                AnimatedView.aHelper.setNextViewToFadeIn(this);
            }
        },

        fadeInCallback:function () {
            if (AnimatedView.aHelper.get('isPreviousViewFadedOut')) {
                this.$().fadeIn(1000);
            }
        },

        willDestroyElement:function () {
            AnimatedView.aHelper.set('isPreviousViewFadedOut', false);
            var clone = this.$().clone();
            this.$().replaceWith(clone);

            var that = this;
            clone.fadeOut(1000, function () {
                $(this).remove();
                if (AnimatedView.aHelper.nextViewToFadeIn == that) {
                    AnimatedView.aHelper.removeObserver('isPreviousViewFadedOut',
                        AnimatedView.aHelper.nextViewToFadeIn, 'fadeInCallback');
                } else {
                    AnimatedView.aHelper.set('isPreviousViewFadedOut', true);
                }
            });
        }
    })

    AnimatedView.reopenClass({
        aHelper:new AnimationHelper()
    }) 
```

它似乎工作正常，但这可能是非常糟糕的设计。有没有更好的方法来达到类似的效果？或者我完全错了，应该从非常不同的角度看待问题？例如，在 View 内制作动画，其中包含另一个 View 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T05:41:49.443

这些也可能有很大帮助：

[http://discuss.emberjs.com/t/animation-support-in-ember-1-1/1977](http://discuss.emberjs.com/t/animation-support-in-ember-1-1/1977)

[https://github.com/billysbilling/ember-animated-outlet](https://github.com/billysbilling/ember-animated-outlet)

如果您可以选择一个对减少 Ember 上未回答的 Stack Overflow 问题数量非常有帮助的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:31:14.647

不久前有一个拉取请求被合并到 master 中，它添加了一些额外的钩子，`Em.ContainerView`这将允许插座中两个视图之间的异步过渡期，但是由于它导致错误而不是真正的，该更改很快就被恢复了是一种经过充分讨论的方法，允许在两个出口视图之间进行转换。

Ember 核心团队最近一直专注于通过一次一个视图的出口将应用程序的视图绑定到路由器变得非常容易，而这样的系统并不能真正让你轻松地做你想做的事重新尝试做。几乎可以肯定的是，如果这些转换对您很有价值，您将根本不想使用插座，而是在进入和退出状态时自己手动创建/附加/动画视图。也许 Ember 核心会在某个时候重新审视这个问题，但我不希望在即将发布的 v 1.0 版本之前看到它。

我确实相信最近发布的用 Ember 构建的 Yapp 应用程序采用了为每个“着陆”状态之间的每个转换都设置一个状态的方法，并且根本没有使用`outlet`s。该应用程序是由一些聪明人开发的，并且运行良好，所以它绝对是一个建议。

# sql-server - 消息 102，级别 15，状态 1，第 1 行 ')' 附近的语法不正确

> ID：13350534
> 
> 赞同：0
> 
> 时间：2012-11-12T19:51:50.700
> 
> 标签：sql-server, stored-procedures

我正在尝试创建一个包含动态查询的存储过程。我使用动态查询的原因是我需要将 0 到 3 个参数传递给同一个查询。

现在，当我运行该过程时，我收到以下错误：

> *消息 102，级别 15，状态 1，第 1 行
> ')' 附近的语法不正确。*

我的错误在哪里？

```
CREATE PROCEDURE [harris].[ebill](@cycle_ char(15),@route_ char(15),@account_ char(64))
As
SET NOCOUNT on
Begin
--variable declarations
declare @SQLQuery NVarchar(4000)

declare @errcount int
declare @count_2 int
declare @jour_no int
declare @cnt int
declare @loop_counter int
declare @loop_count int
declare @trans_date_count int
declare @batch_number_count int

declare @account_no char (10)
declare @occupant_code char(2)
declare @name char(30)
declare @email_address char(70)
declare @serv_street_no char(5)
declare @serv_street_mod char(3)
declare @serv_street char(20)
declare @batchnumber char(10)

declare @net numeric(18,2)
declare @owing numeric(18,2)

declare @trans_date datetime
declare @ebill_date_sent datetime
declare @duedate datetime
declare @billdate datetime

--cursors being used for recordsets 
declare @ebill_list_cur CURSOR
declare @trans_date_cur CURSOR
declare @rs_cur CURSOR

--temp table to store recordset being returned
create table #ebill_list
(
   account_no char(10), 
   occupant_code char(2), 
   name char(30), 
   email_address char(70),
   serv_street_no char(5), 
   serv_street_mod char(3), 
   serv_street char(20), 
   net numeric(18,2), 
   owing numeric(18,2), 
   duedate datetime, 
   billdate datetime
)

create table #ebill_templist
(
   account_no char(10), 
   occupant_code char(2), 
   name char(30), 
   email_address char(70),
   serv_street_no char(5), 
   serv_street_mod char(3), 
   serv_street char(20)
)

-- Create cursor of ebill customers  

Set @SQLQuery = 'select account_no, occupant_code, [name], email_address, serv_street_no, serv_street_mod, serv_street '
Set @SQLQuery = @SQLQuery + 'from pu_account, wbaccesm '
Set @SQLQuery = @SQLQuery + 'where pu_account.debtor_no = wbaccesm.debtor_no '
Set @SQLQuery = @SQLQuery + 'and wbaccesm.email_notice in (''B'',''Y'')' 

if @cycle_ <> ''
  begin
    Set @SQLQuery = @SQLQuery + ' and pu_account.cycle_ in ('
    Set @SQLQuery = @SQLQuery + @cycle_ +')'
  end

if @route_ <> ''
  begin
    Set @SQLQuery = @SQLQuery + ' and pu_account.route_ in ('
    Set @SQLQuery = @SQLQuery + @route_ +')'
  end

if @account_ <> ''
  begin
    Set @SQLQuery = @SQLQuery + ' and pu_account.account_no in ('
    Set @SQLQuery = @SQLQuery + @account_ +')'
  end

SET @SQLQuery = 'SELECT account_no, occupant_code, [name], email_address, serv_street_no, serv_street_mod, serv_street INTO #ebill_templist FROM (' + @SQLQuery + ')'

EXECUTE sp_executesql @SQLQuery

set @errcount = 0
set @ebill_list_cur = cursor fast_forward
    for
       select account_no, occupant_code, name, email_address, serv_street_no, serv_street_mod, serv_street from #ebill_templist
    open @ebill_list_cur
    fetch next from @ebill_list_cur
        into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street

-- Loop through the cursor to see who gets ebill

while @@fetch_status=0
begin

    --Check to see if the account is active
    set @cnt = (select count(*) 
    from pu_account_pay
    where account_no=@account_no
    and occupant_code=@occupant_code
    and end_date is null)

    --if account active proceed
    if @cnt>0 
    begin
        --gets a count of records in the pu_balance_host table for the account
        set @trans_date_count=(select count(*)
            from pu_balance_hist
            where account_no =@account_no
            and occupant_code =@occupant_code
            and trans_date in(select max(last_bill_date) 
                from pu_account_pay
                where account_no =@account_no
                and occupant_code =@occupant_code))

        --if more then 0 then proceed
        if @trans_date_count>0
        begin
            --cursor for transaction date
            set @trans_date_cur = cursor fast_forward

            for select trans_date, jour_no
                from pu_balance_hist
                where account_no =@account_no
                and occupant_code =@occupant_code
                and jour_code='BJ'
                and trans_date in(select max(last_bill_date) 
                    from pu_account_pay
                    where account_no =@account_no
                    and occupant_code =@occupant_code)
            open @trans_date_cur

            fetch next from @trans_date_cur into @trans_date, @jour_no

            begin
                    --get batch number count in pujhhdrh table
                    set @batch_number_count=(select count(*) from pujhhdrh
                        where journalnumber = @jour_no
                    and batchtype = 'BJ')

                    -- if count of batch number is greater then 0 proceed
                    if @batch_number_count>0 
                    begin
                        --get batch number
                        set @batchnumber=(select batchnumber
                        from pujhhdrh
                        where journalnumber = @jour_no
                    and batchtype = 'BJ')

                        set @count_2=(select count(*)
                            from pu_ebill_sent
                            where account_no = @account_no
                            and occupant_code = @occupant_code)

                    --get date from pu_ebill_sent
                    if @count_2 > 0
                    begin
                        set @ebill_date_sent=(select max(ebilldate_sent) 
                        from pu_ebill_sent
                        where account_no = @account_no
                        and occupant_code = @occupant_code)

                    end
                    --if no date then set it to last billing date less 1 day
                    else
                    begin
                        set @ebill_date_sent=@trans_date-1
                    end 

                    --if transdate is greater then last ebill date and last trans date is less then todays then send ebill
                    if @trans_date > @ebill_date_sent
                    begin
                        set @rs_cur = cursor fast_forward
                        for select sum(net) net, sum(owing) owing, max(duedate) duedate, max(billdate) billdate
                        from pujhaccd
                            where batchnumber = @batchnumber
                            and account_no = @account_no
                            and occupant_code = @occupant_code
                            and (billtype > 0 and billtype != 3)
                        open @rs_cur
                        fetch next from @rs_cur into @net, @owing, @duedate, @billdate
                        insert into #ebill_list values(
                        @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street,@net, @owing, @duedate, @billdate)

                            fetch next from @ebill_list_cur
                                into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street
                    end
                    else
                    begin
                        fetch next from @ebill_list_cur
                                into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street
                        end     
                end

                --if count of batch number is 0 then proceed to the next record in the original cursor
                else
                begin
                    fetch next from @ebill_list_cur
                        into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street
                    end

            end
        end

        --If no records in pu_balance_his then go to the next record
        else
        begin
            fetch next from @ebill_list_cur
                into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street
            end

    end 
    -- if not active then go to next record in the cursor
    else
    begin
        fetch next from @ebill_list_cur
                into @account_no,@occupant_code,@name,@email_address,@serv_street_no,@serv_street_mod, @serv_street
        end
    --end for the while loop
    end

set @loop_count=(select count(*) from #ebill_list)
set @loop_counter=0
while @loop_counter<=@loop_count
begin
    select * from #ebill_list
    return
    set @loop_counter=@loop_counter+1
end

close @rs_cur
deallocate @rs_cur

close @trans_date_cur               
deallocate @trans_date_cur

close @ebill_list_cur
deallocate @ebill_list_cur
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:45:17.567

问题可能出在您的动态 SQL 中。要调试它，最好的办法是使用 PRINT（或查看分析器）将其输出 - 我怀疑您在作为裸字符串传递和连接的参数中存在问题。

您可以通过使用表值参数来完全避免动态 SQL，这些参数可以像常规表一样在查询中连接和使用。由于您使用的是动态 SQL，因为您只需要检查列表成员资格（而不是动态选择条件或其他内容），我强烈建议您这样做：

[http://msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

# wpf - 在 WPF 中，我有一个 TreeView，其 ItemsSource 绑定到静态资源。如何更改此设置以便在项目更改时树更新？

> ID：13350536
> 
> 赞同：0
> 
> 时间：2012-11-12T19:51:56.177
> 
> 标签：wpf, binding, treeview, inotifypropertychanged, itemssource

我有一个 TreeView，它的 ItemsSource 绑定到 StaticResource，它是一个类。这对我来说效果很好，但现在我有一个函数可以用可能的不同值更新 TreeView 的最低级别，并且需要立即显示此更新。我已经完成了类似的任务，例如将树中的复选框 IsChecked 绑定到模型中的值，以及将文本块文本绑定到模型中的值。

下面是 XAML 中 TreeView 的参考代码：

```
<!-- TREE VIEW ON LEFT HAND SIDE. LOADS TREEVIEWPARENTS, WHICH HAVE ORDER ATTRIBUTE CHILDREN -->
<DockPanel Name="test1" Margin="10,10,0,10" VerticalAlignment="Stretch" Grid.Row="3" Grid.RowSpan="6" Grid.Column="0">
    <DockPanel.Resources>
        <local:CheckBoxCommand x:Key="cbc"></local:CheckBoxCommand>
        <src:TreeViewFilter x:Key="MyList" />

        <!-- PARENTS OF THE TREEVIEW -->
        <HierarchicalDataTemplate DataType="{x:Type src:TreeViewParent}" ItemsSource="{Binding Path=OrderAttributes}">
            <TextBlock Text="{Binding Path=NameAndCount}" FontSize="24"/>
        </HierarchicalDataTemplate>

        <!-- CHILDREN OF THE PARENTS. THESE ORDER ATTRIBUTES HAVE CHILDREN OF THEIR OWN -->
        <HierarchicalDataTemplate DataType="{x:Type src:OrderAttribute}" ItemsSource="{Binding Path=OrderAttributes}">
            <StackPanel Name="test" Orientation="Horizontal" VerticalAlignment="Center">
                <CheckBox Command="{StaticResource cbc}"
                            CommandParameter="{Binding Path=NameAndParent}" Visibility="{Binding Path=CheckBoxVisible}" IsChecked="{Binding Path=isChecked}" VerticalAlignment="Center">
                </CheckBox>
                <TextBlock Text="{Binding Path=NameAndCount}" FontSize="16"/>
             </StackPanel>
        </HierarchicalDataTemplate>
    </DockPanel.Resources>

    <TreeView Name="treeView1" BorderThickness="2" ItemsSource="{Binding Source={StaticResource MyList}, NotifyOnSourceUpdated=True}" TreeViewItem.Selected="filterByBatchStatus"/>
</DockPanel> 
```

如您所见，ItemsSource 被绑定到一个 StaticResource MyList，这实际上只是 TreeViewFilter 类的 Name 的一个键。这对我有用的原因是因为树包含的“TreeViewParents”和“OrderAttributes”都是在 TreeViewFilter 类的构造函数中创建的。但现在我希望能够更新树的最低层次结构中的值并让它们可见。

我的猜测是，我可以使用 INotifyPropertyChanged 和触发 propertyChanged 事件或类似的方式来执行此操作，类似于我使用视觉更新进行其他绑定的方式？有任何想法吗？

（另外，绑定中的 NotifyOnSourceUpdated=True 是我刚刚为这个问题搞砸的东西，不知道它是如何工作的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:03:19.660

myList 是[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)吗？此类具有内置通知。

取自这篇格式不佳的 MSDN 文章的实施示例：http: [//msdn.microsoft.com/en-us/library/ms748365.aspx](http://msdn.microsoft.com/en-us/library/ms748365.aspx)

```
public class NameList : ObservableCollection<PersonName>
{
    public NameList() : base()
    {
        Add(new PersonName("Willa", "Cather"));
        Add(new PersonName("Isak", "Dinesen"));
        Add(new PersonName("Victor", "Hugo"));
        Add(new PersonName("Jules", "Verne"));
    }
  }

  public class PersonName
  {
      private string firstName;
      private string lastName;

      public PersonName(string first, string last)
      {
          this.firstName = first;
          this.lastName = last;
      }

      public string FirstName
      {
          get { return firstName; }
          set { firstName = value; }
      }

      public string LastName
      {
          get { return lastName; }
          set { lastName = value; }
      }
  } 
```

这里有几个链接可以帮助您了解使用带有 observableCollection 的 TreeView 的概念：http: [//msdn.microsoft.com/en-us/library/dd759035 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd759035(v=vs.95).aspx)

[迈克·希尔伯格的博客](http://blogs.msdn.com/b/mikehillberg/archive/2006/10/11/a-treeview-a-hierarchicaldatatemplate-and-a-2d-collection-walk-into-a-bar.aspx)

# spring - 在 ConstraintValidator 中注入服务 [Bean Validator - JSR 303] Spring

> ID：13350537
> 
> 赞同：24
> 
> 时间：2012-11-12T19:52:00.703
> 
> 标签：spring, validation, bean-validation

下午好，

我在 Bean Validator (JSR 303) 中注入服务时遇到问题。我将执行验证，但我需要在我的数据库中验证此记录；

当我使用我的服务时，它会抛出 NullPointerException；

例外：

```
Exception in thread "main" javax.validation.ValidationException: HV000028: Unexpected exception during isValid call.
at org.hibernate.validator.internal.engine.ConstraintTree.validateSingleConstraint(ConstraintTree.java:294)
at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:164)
at org.hibernate.validator.internal.engine.ConstraintTree.validateConstraints(ConstraintTree.java:125)
at org.hibernate.validator.internal.metadata.core.MetaConstraint.validateConstraint(MetaConstraint.java:86)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:442)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:387)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:351)
at org.hibernate.validator.internal.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:303)
at org.hibernate.validator.internal.engine.ValidatorImpl.validate(ValidatorImpl.java:133)
at net.pontoall.hemisphere.core.validation.impl.TesteValidator.main(TesteValidator.java:25)

Caused by: java.lang.NullPointerException
at net.pontoall.hemisphere.core.validation.impl.UsuarioValidatorImpl.doCheckLogin(UsuarioValidatorImpl.java:48)
at net.pontoall.hemisphere.core.validation.impl.UsuarioValidatorImpl.isValid(UsuarioValidatorImpl.java:26)
at net.pontoall.hemisphere.core.validation.impl.UsuarioValidatorImpl.isValid(UsuarioValidatorImpl.java:1)
at org.hibernate.validator.internal.engine.ConstraintTree.validateSingleConstraint(ConstraintTree.java:291)
... 9 more 
```

注解：

```
@Target(value = ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = UsuarioValidatorImpl.class)
public @interface UsuarioValidator {

String message() default "{net.pontoall.hemisphere.validation.UsuarioValidator.message}";

Class<?>[] groups() default {};

Class<? extends Payload>[] payload() default {};

} 
```

验证器Impl：

```
public class UsuarioValidatorImpl implements ConstraintValidator<UsuarioValidator, Usuario> {

@Autowired
private IUsuarioService service;

@Override
public void initialize(UsuarioValidator arg0) {

}

@Override
public boolean isValid(Usuario entidade, ConstraintValidatorContext ctx) {
    try {
        return (this.doCheckLogin(entidade, ctx) && this.doCheckEmail(entidade, ctx));
    } catch (HemisphereException e) {
        e.printStackTrace();
        return false;
    }
}

private boolean doCheckLogin(Usuario entidade, ConstraintValidatorContext ctx) throws HemisphereException {
    ctx.buildConstraintViolationWithTemplate("{net.pontoall.hemisphere.validation.UsuarioValidator.login.message}").addConstraintViolation();

    if (entidade.getId() == null) {
        // Novo Usuário
        Usuario original = service.buscarPorLogin(entidade.getLogin());

        if (original == null) {
            return true;
        }

        return false;

    } else {

        Usuario original = service.obter(entidade.getId());
        if (original == null) {
            return true;
        } else {
            if (original.getLogin().equals(entidade.getLogin()) && original.getId().equals(entidade.getId())) {
                return true;
            }
        }

        return false;
    }
}

private boolean doCheckEmail(Usuario entidade, ConstraintValidatorContext ctx) {
    ctx.buildConstraintViolationWithTemplate("{net.pontoall.hemisphere.validation.UsuarioValidator.email.message}").addConstraintViolation();

    if (entidade.getId() == null) {
        // Novo Usuário
        Usuario original = service.buscarPorEmail(entidade.getEmail());

        if (original == null) {
            return true;
        }

        return false;

    } else {

        Usuario original = service.obter(entidade.getId());
        if (original == null) {
            return true;
        } else {
            if (original.getEmail().equals(entidade.getEmail()) && original.getId().equals(entidade.getId())) {
                return true;
            }
        }

        return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T13:41:40.097

您应该在 Spring 应用程序上下文中设置[LocalValidatorFactoryBean](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/LocalValidatorFactoryBean.html)，以便您可以通过依赖注入检索`Validator`（和）实例。`ValidatorFactory`

默认情况下，像这样获得的验证器利用`SpringConstraintValidatorFactory`它为约束验证器实现提供依赖注入服务，正如 Pangea 所指出的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:24:57.250

如果要连接依赖项，请构建 [ConstraintValidatorFactory](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2697)或使用[SpringConstraintValidatorFactory 。](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/validation/beanvalidation/SpringConstraintValidatorFactory.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:23:48.800

您将不得不编写一个自定义*ConstraintValidatorFactory*。不过，仅供参考，Bean Validation 1.1 将允许注入*ConstraintValidatorFactory*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T16:25:00.853

我通过“just”“让它工作”（spring-boot：2.5.7）：

```
@Component // mandatory!!! (or one of its descendants) to enable `@Autowired` 
@Scope("request") // not mandatory, but probably "good" for "validation"
public class UsuarioValidatorImpl implements ConstraintValidator<..., ...> ... 
```

*   [github 上的示例 repo](https://github.com/xerx593/autowire-validator)
*   [无法将依赖项自动装配到自定义验证器中](https://stackoverflow.com/q/70065756/592355)

或者，您可以`@Bean public UsuarioValidator ...` 在类中定义一个方法`@Configuration`......

但是**自动连接（任何）两个对象的关键：两者都必须由[弹簧管理](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans)**！

# windows-phone - 是否可以成为 Windows Phone 8 照片选择器的提供商？如果是这样，怎么做？

> ID：13350540
> 
> 赞同：0
> 
> 时间：2012-11-12T19:52:09.157
> 
> 标签：windows-phone, windows-phone-8

我工作的公司有一个在线存储备份和同步解决方案。我们希望为我们的应用程序与 Windows Phone 8 集成，并允许用户在他们想要从照片选择器中获取照片以在其他应用程序中使用、编辑或共享时从他们现有的在线照​​片中进行选择。我看到我可以从 Facebook 相册（安装他们的应用程序后）和 SkyDrive 照片以及我在相机胶卷上或保存在手机上的照片中进行选择。

有没有办法成为照片选择器的提供者？请参阅这张照片 (https://skydrive.live.com/redir?resid=151B84C1DD698071!553&authkey=!ABD9ljtF6553ZS4) 作为我的意思的一个例子。

我似乎在 MSDN 或其他地方的文档中找不到任何内容。还希望像 Facebook 和 SkyDrive 一样作为相册显示在照片中心下。这些是否已锁定并仅对选定的合作伙伴应用程序可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:43:15.363

简短的回答：没有办法在 WP8 中实现你的模型。WP8 没有 Win8 应用程序所具有的选择器可扩展性。

长答案：

WP8 确实引入了一个名为“自动上传照片应用程序”的新概念。可以从用户的设置菜单中启用这种新型应用程序，以自动在线上传相机照片。由于显示的实际设置屏幕将成为您的应用程序的一部分，我不明白您为什么不请求许可并利用这段时间将照片从在线云存储下载到手机。

你可以阅读更多关于这些类型的应用程序@http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/jj571205 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj571205(v=vs.105).aspx)

您可以使用 MediaLibrary 方法将图片添加到[本地相机胶卷](http://msdn.microsoft.com/en-us/library/ff769549%28VS.92%29.aspx)或[相册](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx)中。

这种类型的应用程序的工作方式是它获得一个 ResourceIntensive BackgroundAgent，一旦从“设置”菜单中选择，就不需要用户交互。这很重要，因为通常所有类型的计划任务都会在用户不使用应用程序的 14 天后被删除。这不适用于自动上传照片应用程序。

[ResourceIntensiveBackgroundAgents 有一些限制](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx#BKMK_ConstraintsforResourceintensiveAgents)，包括：它们仅在手机连接到电池、WiFi 可用且最多 10 分钟才能完成执行时运行。自动上传照片应用程序需要在这些限制下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:58:11.853

我自己没有做过，但从文档中我会说 Photos_Extra_Hub 是您正在寻找的扩展。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202966(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202966(v=vs.105).aspx)

这里有一个方法

[http://www.developer.nokia.com/Community/Wiki/Extending_the_Windows_Phone_Pictures_Hub](http://www.developer.nokia.com/Community/Wiki/Extending_the_Windows_Phone_Pictures_Hub)

## 我希望这有帮助。

# typescript - 有效 javascript 上的打字稿错误

> ID：13350541
> 
> 赞同：2
> 
> 时间：2012-11-12T19:52:12.163
> 
> 标签：typescript

我正在尝试在打字稿中执行以下操作：

```
var testHier = [
    { content:"1", opened:true, children: [
        { content:"1.1" }
    ]},
    { content: "2", opened:true, children: [
        { content:"2.1", opened:false, children: [
            { content:"2.1.1", value:"2.1.1" }
        ]},
        { content: "2.2", value: "2.2" }
    ]}
] 
```

但是当我编译时出现错误：

“数组文字表达式中的不兼容类型：类型'{内容：字符串；打开：布尔；子项：{内容：字符串；值：字符串；}[]；}'缺少来自类型'{内容：字符串的属性'值'；值：字符串；}'"

如果我改变

```
{ content:"2.1", opened:false, children: [ 
```

到

```
{ content:"2.1", opened:false, value:"foo", children: [ 
```

错误消失了。

我在 chrome 控制台中测试了声明，它似乎工作得很好。由于这只是 javascript，我希望它可以直接通过，但似乎并非如此。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T20:03:34.230

您只需要使用一些类型信息来帮助它：

```
interface IExample {
    content: string;
    opened?: bool;
    value?: string;
    children?: IExample[];
}

var testHier: IExample[] = [
{ 
    content:"1", 
    opened:true, 
    children: [
        { 
            content:"1.1" 
        }
    ]
},
{
    content: "2", 
    opened:true, 
    children: [
        { 
            content:"2.1", 
            opened:false, 
            children: [
                { 
                    content:"2.1.1", 
                    value:"2.1.1"
                }
            ]
        },
        { 
            content: "2.2", 
            value: "2.2" 
        }
    ]
}]; 
```

它试图弄清楚数组的每个部分中的类型是什么，并且无法提出猜测所需的共性 - 在数组中它需要所有内容都是相同的类型（即所有字符串或所有数字，但是不是混合物！）。IExample 接口通过指定`any`类型来提供帮助。

**为什么 TypeScript 会这样做？**

TypeScript 想帮助你。如果它可以为您推断出一个类型，那么您就不必显式声明它，它会的。总的来说，这是有益的 - 它会检测以下脚本中的错误：

```
var x = [
    10,
    20,
    "30",
    50
]; 
```

在这种情况下，它推断您有一个数字数组，因为警告您那里有一个字符串。如果它使用`any`而不是巧妙地计算类型，您将不会获得这种帮助。

`x`你仍然可以通过告诉 TypeScript是类型来决定你想要一个混合数组，`any[]`在这种情况下错误就会消失。

TypeScript 最好首先警告您有关不兼容的类型，以防您犯了错误 - 例如，在您的情况下，您可能忘记向每个对象添加`opened`和`value`- 这样 TypeScript 可以使您免于错误。

# jquery - jQuery parseJSON 语法错误 ASP.NET

> ID：13350544
> 
> 赞同：0
> 
> 时间：2012-11-12T19:52:14.243
> 
> 标签：jquery, asp.net, json

我正在使用 jquery 1.8.2 在一个简单的 ASP.NET 应用程序中进行 ajax 调用。使用内置的 VS Web 开发服务器在 localhost 上一切正常。当我将网站放在 IIS 上时，出现一般错误：

```
Message: Syntax error
Line: 514
Char: 4
Code: 0
URI: http://123.123.123.123/Scripts/jquery-1.8.2.js 
```

这是来自我的电话：

```
var obj = jQuery.parseJSON(val); 
```

这是 jquery 源中该位置的内容：

```
parseJSON: function( data ) {
if ( !data || typeof data !== "string") {
    return null;
}

// Make sure leading/trailing whitespace is removed (IE can't handle it)
data = jQuery.trim( data );

// Attempt to parse using the native JSON parser first
if ( window.JSON && window.JSON.parse ) {
    return window.JSON.parse( data );  <<< LINE 514
}

...(rest of jquery source) 
```

有任何想法吗？就像我说的，在本地工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:01:53.783

哦，愚蠢的程序员错误。C 是我自己的代码生成的错误消息的第一个字母。“未找到组件”。在这种情况下，由于服务器映射路径问题，未加载文件。我正在学习的结果是 jQuery、JSON、jTemplates 等都相对简单。开发环境，即 ASP.NET 和 Visual Studio 2010 比语言本身更容易阻碍。感谢大家的大力投入。

# ios - Xcode Organizer - 无法刷新 Provisioning Profiles 列表

> ID：13350545
> 
> 赞同：19
> 
> 时间：2012-11-12T19:52:17.237
> 
> 标签：ios, xcode, code-signing, provisioning-profile

我正在使用 Xcode 4.3.3

以前一切正常，但从几个月前开始，我无法再通过 Organizer 刷新配置文件。

**问题：** 

*   我打开组织者
*   单击顶部的配置文件
*   然后点击右下角的“刷新”按钮”
    1.  它显示“正在下载开发证书...”并提示登录。
    2.  成功登录后，显示“Fetching team list...”，然后显示错误：

        *“You are not allowed to perform this operation. Please check with your Team Admins, or, if you need further help, please contact Apple Developer节目支持”*

**更多信息：**

*   我**是**团队管理员
*   我有有效的开发者证书，显示在 Apple Developer Portal、我的钥匙串和 Organizer 中（就像我说的，这一切都过去了）
*   我在 Organizer 中显示了几个有效的配置文件。
*   我在组织者中显示了 2 个团队：
    1.  一个有开发者证书（我的）
    2.  一个带有分发证书（用于应用商店）
*   这不是密码问题（输入错误密码时出现不同的错误）
*   除了我的和分发证书之外，我已经删除了所有其他开发者证书
*   如果我手动下载证书，我可以成功添加证书
*   如果我手动下载它们，我可以成功添加配置文件
*   在 Apple Developer Portal 中，没有标记为“无效”的配置文件（但有些已过期）
*   我已经强制退出 Xcode，甚至重新启动了 Mac

这在 iOS6 发布后的某个时候开始发生（绝对不是同时）。我已经阅读了有关该主题的类似问题，但其中大多数都处理“损坏的数据”错误消息。这不是我的情况。

**更新 1（11 月 13 日）**

我现在做了以下事情：

*   我已经从 Keychain 中删除了所有证书，包括公钥和私钥。
*   我在 Apple Dev Portal 中吊销了我的证书。
*   我已经重启了机器。
*   我再次打开 Xcode 并点击刷新：
    1.  它要求我登录，并提示提交新证书请求。
    2.  新证书已成功批准和颁发，并下载到我的钥匙串中（我看到了新的公钥和私钥，以及证书）。

但是，我在配置配置文件的“刷新”时仍然遇到相同的错误：“*您不允许执行此操作*”并且我在管理器中没有配置文件。

**更新 2（11 月 13 日）**

*   我现在已经更新到 XCode 4.5
*   在第一次刷新时，它确实有效。
*   在所有后续刷新中，它都会失败并显示相同的错误消息*“您不允许执行此操作。请与您的团队管理员联系，或者，如果您需要进一步的帮助，请联系 Apple 开发人员计划支持”*，但是现在在“生成 Mac 团队配置文件”之后执行此操作
    1.  请注意我没有使用 Mac 开发。我没有启用开发者模式，也没有 Mac 开发者程序。
    2.  我尝试过启用和不启用 Mac 开发人员模式。
    3.  尽管有同样模糊的错误消息，但它实际上似乎是在更新 iOS 配置文件。

经过这么多时间，我仍然决心删除此错误消息。也许有人可以帮助并告诉我 XCode 将其应用程序日志保存在哪里？是否有类似 Mac 的 Windows“事件查看器”之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-03T06:08:12.767

试试 Xcode 5.1。看起来苹果终于解决了这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T04:45:04.487

我也收到此错误“您无权执行此操作。请与您的团队管理员联系，或者，如果您需要进一步的帮助，请联系 Apple 开发人员计划支持”。我的开发人员配置不起作用，所以我什至无法在设备上测试我的应用程序。

这对我有用：

*   转到 iOS 配置门户 > 证书 > 开发。那里可能有一个证书，您不再拥有钥匙串中的密钥对。撤销它。
*   从 Xcode 管理器中删除相关配置文件。退出 Xcode。
*   转到 ~Library/Developer/Xcode 并删除 connect1.apple.com **.db （可能没有必要，但不会受到伤害）。
*   转到 ~Library/Caches/com.apple.dt.Xcode 并删除 Cache* 文件。

现在，Xcode 应该会自动创建一个新的开发人员证书，但现在这似乎被打破了。所以，不要尝试使用它。反而：

*   返回 iOS 配置门户。
*   确保您的开发证书已被吊销（因此您没有证书）。
*   现在创建一个新的，并使用涉及使用钥匙串的手动过程（我们回到 2009 年）。下载证书。
*   返回 Xcode > Organizer。插入您的设备。单击设备名称下的“Provisioning Profiles”。删除设备上当前的所有证书。
*   单击设备名称。点击底部的“添加到门户”。经历那个过程。
*   返回到 Library > Provisioning Profiles（在左上角）。如果您有一个无效的额外团队供应配置文件，请将其删除。

现在你应该有一个工作系统。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T11:39:44.017

有同样的问题。原因是错误的 Apple ID 请在开发中心检查您的 Apple ID [https://developer.apple.com/devcenter/ios/urlRedirect.action?mode=update_profile&userAction=updateAccount&cancelPath=/devcenter/ios/index.action&successPath=/ devcenter/ios/index.action](https://developer.apple.com/devcenter/ios/urlRedirect.action?mode=update_profile&userAction=updateAccount&cancelPath=/devcenter/ios/index.action&successPath=/devcenter/ios/index.action)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T13:58:12.337

有同样的问题。我刚刚从 Xcode 中删除了所有配置文件，然后重新启动它。之后，它提示输入 Apple Id 凭据，一切就绪（使用修改后的配置文件）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-25T04:31:37.973

实际上解决方案很奇怪。

看来您必须是 Mac 开发人员计划的成员。它帮助了我。

**通过将我的帐户添加到 Mac 开发人员计划问题已得到解决！**

[苹果讨论](https://discussions.apple.com/thread/5839152?tstart=0)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-30T03:00:13.490

删除

> **~/Macintosh HD/User/home/Library/MobileDevice/Provisioning Profiles**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T16:10:43.390

我正在尝试在黑暗中拍摄。我从来没有遇到过这个问题，尽管我一直在处理一堆开发帐户。

一旦你的钥匙链和组织者干净，

尝试让您的 mac 聚光灯重新索引（在聚光灯下搜索某些内容，选择最后一行），在隐私选项卡中，将 MacintoshHD（和任何其他索引的驱动器）包含在防止聚光灯索引的位置列表中

重复上述步骤并从同一列表中删除 Macitosh HD，以便创建新索引。

让我知道这是否有任何区别。（我有一个类似的问题，这个解决方案有效）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-01T12:24:56.367

我有同样的问题。我终于找到了解决方案。
1.在“Safari”上访问开发者中心。
2.使用您的 AppleID/PW 登录。我认为您无法登录。
3.删除在 Safari 中保存的密码，以及偏好/隐私/启用 cookie。
4.如果您可以登录，您可以在“组织者”上登录。

我希望我糟糕的英语能帮助斯拉夫，有人也有同样的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-13T08:05:57.507

您必须使用 xcode 5.1.1 或更高版本来上传您的构建。

# android - 如何判断 android AudioRecord read() 方法何时遇到溢出？

> ID：13350556
> 
> 赞同：1
> 
> 时间：2012-11-12T19:52:58.973
> 
> 标签：android, buffer-overflow, audiorecord

我正在使用 android.media.AudioRecord 获取原始音频输入，然后我正在实时处理它以显示即时反馈。我可以调整各种加工参数来改变反馈的质量，相应地改变加工时间。

随着我增加处理时间，在某些时候 AudioRecord 开始溢出并且 read() 开始丢失数据块。除了显示的显着变化外，我在 LogCat 中收到以下消息（我正在使用 eclipse 进行调试）：“E/AudioHardwareYamaha(2579): snd_pcm_readi read error -32”

我的应用程序如何发现此错误？调试时发现还不够好，我希望应用知道何时发生这种情况，以便它可以自动调整参数，找到质量尽可能高但溢出消失或不经常出现的最佳位置。我认为这个甜蜜点在不同的硬件上会有所不同。

我已经检查过这里和其他地方，但我发现的建议不足：

*   将缓冲区大小增加到某个小的倍数以上并不是解决方案，因为它只会推迟不可避免的故障（并增加反馈的延迟）。

*   我看到了将读取和处理放在单独的线程中的建议。基本上这相当于 AudioRecord 的包装器，增加了大量的复杂性和更多的处理，只是为了进行我自己的错误检测。我的应用程序基本上完成了，如果可以避免的话，我真的不想重构所有内容。

*   根据预期检查经过的时间似乎是目前最可行的解决方案，但我不得不采用这种间接策略来猜测 AudioRecord 做了什么（并记录了），这似乎很奇怪。

应用程序是否有一种简单的方法来捕获正在记录的错误信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T15:47:24.790

只是为了回答我自己的问题，以防有人偶然发现这个......

我无法找到一个好的解决方案，但我一直在使用解决方法。我最终使用了时钟，而不是音频输入硬件。因为我知道我的输入缓冲区有多大，我知道每秒有多少输入样本，并且我可以从系统时钟找到我的代码运行速度有多快，所以我可以计算何时应该发生溢出，并编写我的代码周围。

不完全是我所希望的，但它完成了我所需要的。

# sql - 基于 null 的条件内连接

> ID：13350559
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:53:12.683
> 
> 标签：sql

所以，我试过浏览现有的搜索结果，但我仍然感到难过。希望有人可以提供帮助。

我有 3 个表，A（3 列）、B（2 列）和 C（2 列），我需要根据 A1 中的列获取 C1 列中的值。

因此，如果 A1 中的值为 NULL，则为“NONE”，只需加入 C2 中的行并获取 C1 的值。

但是，如果 A1 中的值不为 NULL，则将值与 B2 中的行匹配，然后将 B1 的值与 C2 匹配，从而得到 C1 的值。

我该如何实现这一目标，我知道有内连接和左连接，但它不会正确出现。

下面是一个示例数据。

```
Table - A

+--------+----+----+
| A1     | A2 | A3 |
+--------+----+----+
| Cake   | 22 | X  |
| (null) | 20 | Y  |
| Butter | 30 | Z  |
+--------+----+----+

Table - B

+-----+--------+
| B1  | B2     |
+-----+--------+
| EAT | Cake   |
| USE | Oil    |
| PRO | Butter |
+-----+--------+

Table - C

+-----+--------+
| C1  | C2     |
+-----+--------+
| 100 | EAT    |
| 200 | USE    |
| 999 | NONE   |
| 300 | PRO    |
+-----+--------+ 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:05:04.880

询问 ：

```
SELECT * FROM 
(    SELECT a1,c1 FROM a,b,c 
            WHERE a.a1=b.b2 AND b.b1=c.c2 
     UNION
     SELECT b2,c1 FROM b JOIN c on b1=c2
) X 
UNION 
SELECT a1,c1 FROM a,c WHERE a1 IS NULL AND c2='NONE'; 
```

我同时获得**了**a1 和 c1，因为 c1 值可能是混乱的，这可以区分它。如果您希望 c1 值按给定顺序排列，请务必告知，尽管该查询可能有点困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:46:07.307

找到适合我的解决方案，妮可的回答也是正确的。

```
select c1 from (select A1 from A)x 
inner join C on case when x.A1 is null then 'NONE' 
                 else (Select B1 from B where B2 = A1) 
                 end = C.C2 
```

# php - 新发布的ajax内容不能直接删除刷新页面后可以吗？

> ID：13350564
> 
> 赞同：-2
> 
> 时间：2012-11-12T19:53:26.083
> 
> 标签：php, jquery, ajax

我有一个评论系统，用户可以在其中发表评论。这条评论的发布是一个 ajax 调用：

```
$(function() {
    $(".submit-comment").click(function() {

        var text = $(".txtinput").val();
        var itemid = "<?=$id?>";
        var userid = "<?=$_SESSION['user_id']?>";
        var dataString = 'text=' + text + '&userid=' + userid + '&itemid=' + itemid;

        if (text == '') {
            $('#content_error1').fadeIn(250);
            $('#content_error1').delay(1500).fadeOut(500);
        } else {    
            $.ajax({
                type: "POST",
                url: "/ajax/comments.php",
                data: dataString,
                success: function(html) {
                    $('#messages').prepend($(html).hide().fadeIn(1000));
                    $('.txtinput').val('');    
                }
            });
        }
        return false;
    });
});​ 
```

给出这个 html 输出：

```
<div class="com_loaded" id="id<?=$comment_id?>">
   <div id="com_loaded_height"></div>
   <div id="com_loaded_userpic"><a onClick="parent.$.fn.colorbox.close();" target="_parent" href="profile.php?id=<?=$row['user_id']?>"
      class="tooltip"><img src="<?=$row['user_pic']?>" class="img_poster" /><span><?=$row['user_name']?></span></a>
   </div>
   <div id="com_loaded_content">
      <div id="com_loaded_poster"><a onClick="parent.$.fn.colorbox.close();" target="_parent" href="profile.php?id=<?=$row['user_id']?>"><?=$row['user_name']?></a>
      </div>
      <div id="com_loaded_text">
         <?=$row[ 'comment_text']?>
      </div>
   </div>
   <div id="com_loaded_divide"></div>
   <div class="del_com"><span class="imgswap_del" att="<?=$comment_id?>"><img src="img/popup/close-small.png" alt="Delete comment"></span>
   </div>
</div> 
```

现在您可以使用此 ajax 调用删除评论：

```
$(function() {
    $(".imgswap_del").click(function() {

        var comment_id = $(this).attr('att');
        var dataString = 'comment_id=' + comment_id;

        $.ajax({
            type: "POST",
            url: "/ajax/delete_comment.php",
            data: dataString,
        }).done(function(result) {
            myresult7(result);
        });

        return false;
    });
});​ 
```

我想让用户选择在发布后直接删除评论。这是行不通的。但奇怪的是，当我刷新页面时，该功能正在工作。在使用 ajax 调用发表评论后，如何直接完成这项工作？我不想先刷新页面！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:58:49.330

您需要使用事件委托绑定删除单击事件，或者使用每个新评论重新绑定它。我建议事件委托。

```
$(document).on("click",".imgswap_del",function() {... 
```

以上方法可行，但最好使用更接近的元素，例如

```
$("#messages").on("click",".imgswap_del",function() {... 
```

# java - 如何将 Hibernate 中的 BigInteger 映射到 DB2

> ID：13350566
> 
> 赞同：1
> 
> 时间：2012-11-12T19:53:36.390
> 
> 标签：java, hibernate, db2, biginteger

我有一个通过 JAXB 生成的类，我试图将其用作 Hibernate 中的实体。有一些数字字段被定义为 Java BigIntegers。无论我在 DB2 中如何定义该列，Hibernate 都会抱怨以下一些变化：

错误的列类型....对于列 MY_COLUMN 找到：十进制，预期：数字（19,2）。

我尝试过 DB2 bigint，我尝试过数字 (19,2) 等。

我让 Hibernate 选择方言。它正在选择 DB2 方言。如何在 DB2 中定义列，以便 Hibernate 允许我使用它来存储 Java BigInteger？

如果我在 Hibernate 中将其定义为 big_integer，在 DB2 中将其定义为 bigint，我会得到：

错误的列类型....对于列 MY_COLUMN 找到：bigint，预期：数字（19,2）

**更新**

所以我将 hibernate.hbm2ddl.auto 从 validate 更改为 create 并让 Hibernate 自己创建模式。从日志中我可以看到正在使用数字（19,2）的定义生成创建表语句。在 DB2 中，一旦创建了表，定义就是十进制 (19,2)。该应用程序启动正常。

然后我关闭了应用程序，重新编译设置 hibernate.hbm2ddl.auto 进行验证，然后重新启动。

休眠错误：发现：十进制，预期：数字（19,2）

所以 Hibernate 不能验证它自己创建的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:31:31.637

Hibernate 模式创建、更新和验证是不应该存在的异常。所有这三个功能都有很多错误，并且知道在几种情况下会失败，所以尽量避免它（这就是为什么有些人专门作为数据库开发人员）。

关于如何存储大整数，如果列是DB2 bigint，可以将其映射为long（都是64位）。

如果您需要超过 64 位，则该列需要是 Numeric，它允许最大为 2^81-1 的整数。Hibernate 会自动将其映射到 BigDecimal 或 BigInteger。

如果您需要存储更大的数字（BigInteger 支持），您需要编写自己的[自定义类型](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html)以将数字写入 varchar。

附带说明一下，将用于与其他系统通信的对象（您的 xml 对象）与用于持久化的对象（两者都是不同的域）混合在一起是一种**非常、非常、非常糟糕的做法。**而且我有一种感觉，可能还会使用相同的对象作为您域的一部分，这很糟糕，邪恶，在某些国家/地区是犯罪行为:)。

# ios - 如何在导航栏控制器的标题旁边放置图像？

> ID：13350568
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:53:43.893
> 
> 标签：ios, uinavigationbar

我认为第一步是添加图像视图。如果我必须添加任何代码，请告诉我它属于哪里。我不是要你特意告诉我如何添加代码。我知道该怎么做。我只想知道代码属于“UIViewController.h”的哪个位置。哦，如果图像必须是 PNG，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:59:48.460

将此代码添加到您的`viewDidLoad`：

```
UIImage *image = [UIImage imageNamed: @"logo_icon.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
imageView.frame = CGRectMake(yourXposition, yourYposition, yourWidth, yourHeight);
[self.navigationController.navigationBar addSubview:imageView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:00:50.417

以下代码会将图像放在标题所在的位置。如果两者都需要，则需要一个同时添加图像和标题标签的 UIView，然后将该 UIView 设置为下面第二行代码中的视图（注意：如果使用 ARC，请删除自动释放部分):

```
UIImage *image = [UIImage imageNamed:@"image.png"];
self.navigationItem.titleView = [[[UIImageView alloc] initWithImage:image] autorelease]; 
```

# haskell - 派生实例 Eq (Sink p)

> ID：13350569
> 
> 赞同：0
> 
> 时间：2012-11-12T19:54:02.073
> 
> 标签：haskell

```
class  Eq a  where
    (==), (/=)           :: a -> a -> Bool
    x /= y               = not (x == y)
    x == y               = not (x /= y)

deriving instance Eq Bool 
```

我假设它生成

```
instance Eq Bool where
    True == True = True
    False == False = True 
```

但是我如何从类似的东西创建一个实例

```
newtype Sink p = Sink {unSink :: MVar (E.Iteratee (Message p) IO ())}

instance Eq (Sink p) where
 ?==? = True 
```

我只是使用派生，ghc 会自己解决吗？

```
deriving instance Eq (Sink p) 
```

[http://hackage.haskell.org/packages/archive/websockets/0.7.0.0/doc/html/src/Network-WebSockets-Monad.html#Sink](http://hackage.haskell.org/packages/archive/websockets/0.7.0.0/doc/html/src/Network-WebSockets-Monad.html#Sink)

PS我已经阅读了这篇文章，但它超出了我的理解能力 [http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/deriving.html](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/deriving.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T20:13:18.400

是的，这会起作用，因为有一个实例`Eq (MVar a)`可以测试`MVar`s 是否相同 [ [1](http://www.haskell.org/ghc/docs/latest/html/libraries/base/src/GHC-MVar.html#MVar) ]。的派生实例`Sink`将使用它。但是，这可能不是您想要的，因为`Eq`实例不比较 s 的内容，只比较它们在内存中`MVar`是否相同。`MVar`

你的问题的答案

> 但是我如何从类似的东西创建一个实例......我只是使用派生并且 ghc 会自己解决吗？

可能是“不，您必须编写一个具有您想要的属性的实例。”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T20:22:02.263

对于`Bool`实例实际读取

```
True  == True  = True
False == False = True
_     == _     = False 
```

当然。

有关在一般情况下派生实例如何工作的描述，请参阅[Haskell 报告的第 10 章](http://www.haskell.org/onlinereport/derived.html)。

对于您的示例类型，与派生内容等效的实例声明是——直截了当——</p>

```
instance Eq (Sink p) where
  Sink var == Sink var' = var == var' 
```

因此，由于 websocket 接收器的类型与可变变量类型的某个实例化是同构的，因此比较两个接收器减少了两个比较两个可变变量。

# c++ - 如何获取成员函数的引用类型？

> ID：13350571
> 
> 赞同：3
> 
> 时间：2012-11-12T19:54:04.690
> 
> 标签：c++, visual-c++, c++11

> **可能重复：**
> [是否可以模拟模板<auto X>？](https://stackoverflow.com/questions/5628121/is-it-possible-to-emulate-templateauto-x)

以下 C++ 代码在 vc2010 中工作

```
template<class T, DWORD (T::*memFnPtr)() >
static DWORD WINAPI ThreadProcAdapter( __in LPVOID lpParameter )
{
    T* pThis = reinterpret_cast<T*>(lpParameter);
    return (pThis->*memFnPtr)();
}

class FooClass
{
public:

    DWORD ThreadProcFoo()
    {
        return 0;
    }
};

void fooUse()
{
    FooClass foo;
    CreateThread(NULL, 0, ThreadProcAdapter<FooClass, &FooClass::ThreadProcFoo>, &foo, 0, NULL);
} 
```

问题：我们可以让 ThreadProcAdapter<> 模板只使用一个参数吗？如果是这样，客户端使用我们的适配器将相对容易。

```
template<class T>
static DWORD WINAPI ThreadProcAdapter2( __in LPVOID lpParameter )
{
    //typedef 
    //theClass* pThis = reinterpret_cast<theClass*>(lpParameter);
    //return (pThis->*memFnPtr)();
    return NULL;
}

void fooUse2()
{
    FooClass foo;
    CreateThread(NULL, 0, ThreadProcAdapter2<&FooClass::ThreadProcFoo>, &foo, 0, NULL);
} 
```

具体来说：如果我们有一个成员函数指针

```
&FooClass::ThreadProcFoo 
```

我们可以计算出它的类的类型吗

```
FooClass 
```

# javascript - MongooseJS 没有正确保存数组

> ID：13350573
> 
> 赞同：3
> 
> 时间：2012-11-12T19:54:20.230
> 
> 标签：javascript, node.js, mongoose

我想我在使用 mongoosejs 时遇到了麻烦。我试图将对象数组保持在特定大小为 2。当调用此函数时，它会向数组中添加一个项目，并在必要时将其缩小。但是，当我保存数组时，大小不会减少到 2。请按照代码和注释进行操作。感谢您的任何帮助，您可以提供。

```
 user.location.push(req.body);  //Add a new object to the array.

    if(user.location.length > 2)  //If the array is larger than 2
      user.location.splice(0,1);   //Remove the first item

    console.log(user.location);  //This outputs exactly what I would expect.

    user.save(function(err, updatedUser){
      if(err)
        next(new Error('Could not save the updated user.'));
      else { 
        res.send(updatedUser);  //This outputs the array as if it was never spliced with a size greater than 2.
      }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T20:22:05.407

因为您是`location: []`在模式中定义的，所以 Mongoose 将该字段视为`Mixed`您必须在更改它时通知 Mongoose。[请参阅此处](http://mongoosejs.com/docs/schematypes.html)的文档。

将更新的代码更改`user.location`为：

```
if(user.location.length > 2) {
  user.location.splice(0,1);
  user.markModified('location');
} 
```

# ruby-on-rails-3 - Ruby类方法不起作用

> ID：13350574
> 
> 赞同：0
> 
> 时间：2012-11-12T19:54:23.587
> 
> 标签：ruby-on-rails-3

```
class Post < ActiveRecord::Base
 belongs_to :users

 def self.find_latest_closed
   Post.where("status=?",'Closed').order("updated_at DESC").limit(2)
 end

 def self.find_latest_open
   Post.where("status=?",'Open').order("updated_at DESC").limit(2)
 end
end 
```

在 PostController 中

```
class UsersController < ApplicationController
 def dashboard
  @totalclose = Post.find_latest_closed
   @totalopen = Post.find_latest_open
 end
end 
```

我收到以下错误

```
NoMethodError in UsersController#dashboard
undefined method `find_latest_closed' for #<Class:0x000001074eb760> 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:25:56.743

我会尝试删除方法调用的 Post 前缀。

```
 def self.find_latest_closed
   where("status=?",'Closed').order("updated_at DESC").limit(2)
 end

 def self.find_latest_open
   where("status=?",'Open').order("updated_at DESC").limit(2)
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:37:55.067

您可能与 ActiveRecord 的魔术`find_*`方法有某种冲突。也许尝试将方法名称更改为`get_*`.

# android - 以编程方式使用 optionsMenu

> ID：13350575
> 
> 赞同：0
> 
> 时间：2012-11-12T19:54:28.997
> 
> 标签：android

我知道您可以使用 openOptionsMenu() 方法显示选项菜单，但这仅适用于先前创建选项菜单（通过在菜单硬键之前单击），所以我的问题是：有什么方法可以创建optionsMenu 无需按菜单硬键即可打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:04:31.077

覆盖方法`Activity.onPrepareOptionsMenu(Menu menu)`。

# powershell - Powershell Get-ChildProperty 可以在没有额外噪音的情况下获取真实注册表项列表，如 REG QUERY 可以吗？

> ID：13350577
> 
> 赞同：5
> 
> 时间：2012-11-12T19:54:36.003
> 
> 标签：powershell, registry

在 Win2008R2 上的 PowerShell 2.0 中，如果我想从注册表项中获得与“REG QUERY”相同的输出，以可读的格式，使用来自特定注册表项的值，如下所示：

```
reg query hkcu\Software\Microsoft\CharMap

HKEY_CURRENT_USER\Software\Microsoft\CharMap
    Advanced    REG_DWORD    0x0
    CodePage    REG_SZ       Unicode
    Font        REG_SZ       Arial 
```

我将如何使用 PowerShell 做到这一点？PowerShell 的行为再次让我感到困惑。

获取项目属性示例：

```
Get-ItemProperty HKCU:\Software\Microsoft\CharMap

PSPath       : Microsoft.PowerShell.Core\Registry::HKEY_CURRENT_USER\Software\Microsoft\CharMap
PSParentPath : Microsoft.PowerShell.Core\Registry::HKEY_CURRENT_USER\Software\Microsoft
PSChildName  : CharMap
PSDrive      : HKCU
PSProvider   : Microsoft.PowerShell.Core\Registry
Advanced     : 0
CodePage     : Unicode
Font         : Arial 
```

在我上面的人为示例中，我想查看“高级”、“代码页”和“字体”，而不是任何 PowerShell 元数据（以 PS 开头的名称）。遗憾的是，过滤名称“PS”对我不起作用，因为我并没有真正尝试阅读 MS Windows 字符映射设置，我只是选择它们作为可能每个使用 Windows 的人都有的注册表项，所以每个人都可以看到多么彻底不同的使用PowerShell的体验是看注册表，比方说`REG.EXE`程序。任何人可能只想从注册表项中获取注册表值而不获取任何元数据是有原因的，并且任何在 PowerShell 中编写工具的人都可能希望完成这个简单的任务。

我希望输出类似于`REG QUERY`但仍采用本机 PowerShell 格式，而不仅仅是扁平化为文本。我已经用谷歌搜索并搜索了所有内容，似乎无法弄清楚这一点。

例如，我希望能够这样做：

```
 $all = GetRealRegistryKeysFrom(  HKCU:\Software\Microsoft\CharMap )
  for ($item in $all) { ... } 
```

**更新**使用下面的功能，效果很好......

例子`Get-RegistryKeyPropertiesAndValues -path HKCU:\Software\.....`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T20:08:13.990

这是一个技巧：

```
Get-ItemProperty HKCU:\Software\Microsoft\CharMap  | out-string -stream | ? { $_ -NOTMATCH '^ps.+' } 
```

问题是当一个属性以`PS`. 处理此代码，您可以详细说明以排除这些：

```
PSPath
PSParentPath
PSChildName
PSDrive
PSProvider 
```

...在where子句中一一对应。或者只是尝试使用

```
get-item hkcu\Software\Microsoft\CharMap 
```

[有一个脚本可以满足您的需要。](http://blogs.technet.com/b/heyscriptingguy/archive/2012/05/11/use-powershell-to-enumerate-registry-property-values.aspx)

**在此处更新**复制的脚本：

```
Function Get-RegistryKeyPropertiesAndValues
{
  <#
    Get-RegistryKeyPropertiesAndValues -path 'HKCU:\Volatile Environment'
    Http://www.ScriptingGuys.com/blog
  #>

 Param(

  [Parameter(Mandatory=$true)]
  [string]$path)

 Push-Location
 Set-Location -Path $path
 Get-Item . |
 Select-Object -ExpandProperty property |
 ForEach-Object {
 New-Object psobject -Property @{"property"=$_;
    "Value" = (Get-ItemProperty -Path . -Name $_).$_}}
 Pop-Location
} #end function Get-RegistryKeyPropertiesAndValues 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-14T06:04:07.720

以下代码将枚举某个注册表项的所有值，对它们进行排序并返回值名称：由冒号 (:) 分隔的值对：

```
$path = 'HKLM:\SOFTWARE\Wow6432Node\Microsoft\.NETFramework';

Get-Item -Path $path | Select-Object -ExpandProperty Property | Sort | % {
    $command = [String]::Format('(Get-ItemProperty -Path "{0}" -Name "{1}")."{1}"', $path, $_);
    $value = Invoke-Expression -Command $command;
    $_ + ' : ' + $value; }; 
```

像这样：

DbgJITDebugLaunchSetting : 16

DbgManagedDebugger : "C:\Windows\system32\vsjitdebugger.exe" PID %d APPDOM %d EXTEXT "%s" EVTHDL %d

安装根目录：C:\Windows\Microsoft.NET\Framework\

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-15T14:16:08.140

这是我调用 get-itemproperty2.ps1 的 get-itemproperty 替代脚本：

```
# get-childitem skips top level key, use get-item
param([parameter(ValueFromPipeline)]$key)

process { 
  $valuenames = $key.getvaluenames() 

  if ($valuenames) { 
    $valuenames | foreach {
      $value = $_
      [pscustomobject] @{
        Path = $key -replace 'HKEY_CURRENT_USER',
          'HKCU:' -replace 'HKEY_LOCAL_MACHINE','HKLM:'
        Name = $Value
        Value = $Key.GetValue($Value)
        Type = $Key.GetValueKind($Value)
      }
    }
  } else {
    [pscustomobject] @{
      Path = $key -replace 'HKEY_CURRENT_USER',
        'HKCU:' -replace 'HKEY_LOCAL_MACHINE','HKLM:'
        Name = ''
        Value = ''
        Type = ''
    }
  }
} 
```

例子：

```
get-item hkcu:\key1 | get-itemproperty2

Path       Name  Value  Type
----       ----  -----  ----
HKCU:\key1 name1     1 DWord 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-31T14:19:34.670

不好了 ...

```
powershell gp 'HKCU:Software\Microsoft\CharMap'|more +7 
```

# html - 如何使 SPARQL 查询以 HTML 表格格式返回数据？

> ID：13350582
> 
> 赞同：0
> 
> 时间：2012-11-12T19:55:03.313
> 
> 标签：html, jsp, sparql, jena

我在这里遇到了一个问题，看起来很简单，但是因为我对 Sparal 查询不太熟悉，所以我找不到解决方案。

让我解释一下我的问题。我想在 HTML 表中显示 SPARQL 查询的结果。我已经创建了我的查询并且它已成功执行，但我不知道如何在网页上将结果显示为 HTML 表格。

例如，我希望一个单元格包含一个名称，另一个单元格显示有关具有该名称的人的所有信息或描述……这个名称取自我的本体。我想知道这是否可能。如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:17:24.717

Jena 默认不提供将查询结果输出为 HTML 的方法。但是，可以让它生成 XML。你需要一个[`ResultSetFormatter`](http://jena.apache.org/documentation/javadoc/arq/com/hp/hpl/jena/query/ResultSetFormatter.html). 这是一个例子：

```
Dataset ds = TDBFactory.createDataset(dbDirectory.getAbsolutePath());
Model model = ds.getDefaultModel();
String query = "SELECT * WHERE {?subject ?predicate ?object .}";
execution = QueryExecutionFactory.create(query, model.getUnionGraph());
ResultSet results = execution.execSelect();
resultString = ResultSetFormatter.asXMLString(results); 
```

（为清楚起见省略了异常捕获）

您将以这种方式获得的 XML 将具有非常简单的形式。这是我上面使用的查询的示例：

```
<sparql xmlns="http://www.w3.org/2005/sparql-results#">
  <head>
    <variable name="subject"/>
    <variable name="predicate"/>
    <variable name="object"/>
  </head>
  <results>
    <result>
      <binding name="subject">
        <uri>http://blahblahblah</uri>
      </binding>
      <binding name="predicate">
        <uri>http://foobar</uri>
      </binding>
      <binding name="object">
        <uri>http://fizzbuzz</uri>
      </binding>
    </result>
    <result>
      <binding name="subject">
        <uri>http://yadayada</uri>
      </binding>
      <binding name="predicate">
        <uri>http://example</uri>
      </binding>
      <binding name="object">
        <literal>This is a literal, expect them to pop up here and there too</literal>
      </binding>
    </result>
    <!-- and the results continue like this -->
  </results>
</sparql> 
```

从这里到 HTML 表是应用 XSL 转换的问题。使用 XPath 或 XML 解析器读取数据并将其传递给 JSP 也很容易。

另一种选择是使用`ResultSetFormatter`来返回 a`Model`并使用[Jena 提供的迭代器](http://jena.apache.org/tutorials/rdf_api.html#ch-Navigating a Model)来构造一个表。

# python - 如何：PIG 中的 Python UDF 字典返回模式

> ID：13350583
> 
> 赞同：8
> 
> 时间：2012-11-12T19:55:05.700
> 
> 标签：python, dictionary, schema, user-defined-functions, apache-pig

使用 Apache PIG 时从 Python UDF 返回字典的输出模式是什么。

我有一本字典，是这样的：

```
dict = {x:{a:1,b:2,c:3}, y:{d:1,e:3,f:9}} 
```

我的输出模式看起来像

```
@outputSchema("m:map[im:map[X:float,Y:float]]") 
```

** 方括号，因为在 Pig 中，我们使用 [] 表示此字典转换为的映射。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-03T14:45:05.483

如果您使用的是标准 jython UDF 而不是任何其他发行版，例如迫击炮数据提供的 streaming_python，您需要做的就是：

```
@outputSchema('m:map[]') 
```

键将与您在 python 中设置的键相同。如果您的 dict 中有其他字典，则不必担心，pig 会理解它并使用以下语法：

```
([first#{third=inner_dict},first#outter_dict]) 
```

将 dict 从 jython UDF 传回 pig 有一个很大的缺点，您只能为 dict 中的所有值设置一种数据类型，这意味着如果您不设置任何数据类型 pig 将使用 bytearray 作为数据类型在处理日期或复杂结构时，这可能是一个问题。例如：

```
@outputSchema('m:map[chararray]') 
```

元组和包：

当您想从 jython UDF 将元组或包返回给 pig 时，记住 python 的列表转换为包，元组转换为元组是很有用的。例如：

列表：

```
@outputSchema('m:bag{chararray}') 
```

请记住，Pig 包中充满了元组，因此如果您想为您的包设置一个好的结构，您可以在包中声明一个元组，在那里您将能够设置您将传递的所有数据类型。例子：

```
@outputSchema('map_reduce:bag{t:(key:chararray,value:int,start_date:datetime,end_date:datetime)}') 
```

最后，元组应该以某种方式直观，它们是使用 jython 时最容易使用的结构。只要您遵循上面的示例，您就可以在一个元组中设置任意数量的字段和任意多的级别。您可以在一个元组中声明一个元组，一个具有包和其他值的元组等。

我强烈建议在尝试执行复杂操作或处理复杂数据类型（如 JSON 结构、数组和列表）时使用 Java UDF。学习曲线可能会稍微陡峭一些，但是一旦你通过了，你的开发会更快，程序的吞吐量也会更快。

# c# - 哪些类型在分配非默认值之前不会消耗内存？

> ID：13350587
> 
> 赞同：1
> 
> 时间：2012-11-12T19:55:42.123
> 
> 标签：c#, .net, memory, memory-management, types

VS 内存分析器告诉我，当我`byte`向我的类添加一个字段时，它不会在应用程序开始时占用任何额外的内存，但如果它是`int`or `object`，则每个实例需要额外的 4 个字节。

是否有任何其他类型，或者我可以创建自己的在分配值之前不占用内存的类型？当值再次变为空（零）时，内存也会释放吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:59:59.863

32 位平台上的内存通常以 4 字节的分配单元进行分配。我认为 .NET 运行时就是这样做的。

C# 编译器使用的布局会导致类/结构的分配大小最小（除非您使用注释来指示其他情况，例如，当使用互操作与以不同方式布置内存的非托管代码进行通信时会这样做）。这意味着

*   4*字节*变量只需要一个分配单元
*   2 *short*或*ushort*只占用一个分配单元
*   如果您有一个*int*和一个*byte*，则该*字节*仍将触发使用另一个分配单元。然后，您最多可以添加 3 个*字节*变量，而无需另一个分配单元。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:59:24.030

没有。对象可能必须具有一些最小大小，并且字节足够小以适合最小值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:39:02.867

每个声明的变量都占用一些内存，无论是在堆栈上还是在堆上。

一个可能的例外是局部变量，它可以放入正在使用的硬件上的合适寄存器中。在这种情况下，在某些情况下，优化器和 JIT 编译器*可能*（强调“可能”）选择将其分配给寄存器，而不是在堆栈帧上为其分配空间。

# zend-framework - 信封中缺少 SOAP 标头（Zend_Soap_Client，wsdl 模式）

> ID：13350591
> 
> 赞同：2
> 
> 时间：2012-11-12T19:55:54.347
> 
> 标签：zend-framework, soap, wsdl, zend-soap

我正在努力在 Zend Soap Client 实例中创建正确的 SOAP 信封。

以下是从 WSDL 文件生成的预期信封示例：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
                      xmlns:v1="http://coc.gov/xsd/ESB/SupplementalData/V1" 
                      xmlns:ns="http://schemas.calgary.ca/xsd/familycommunitysurvey/2012/08" 
                      xmlns:ns1="http://schemas.calgary.ca/xsd/familycommunitysurveycdm/2012/08">
   <soapenv:Header>
      <v1:SupplementalData>
         <v1:SourceName>CFS</v1:SourceName>
         <v1:ServiceProvider>
            <v1:Name>FamilyCommunitySurvey</v1:Name>
            <v1:OperationName>GetCodeLookupByName</v1:OperationName>
         </v1:ServiceProvider>
         <v1:CorrelationID>23451235634</v1:CorrelationID>
      </v1:SupplementalData>
   </soapenv:Header>

   <soapenv:Body>
      <ns:GetCodeLookupByNameRequest>
         <ns1:Name>Country</ns1:Name>
      </ns:GetCodeLookupByNameRequest>
   </soapenv:Body>
</soapenv:Envelope> 
```

我需要设置的属性是标题中的“SourceName”、“CorrelationID”和正文中的“Name”。这是我的做法：

```
 $fsiiConnect = new Zend_Soap_Client($wsdl, array('soap_version' => SOAP_1_1));

    $fsiiConnect->setLocation($endPoint);
    $fsiiConnect->setHttpLogin($userName);
    $fsiiConnect->setHttpPassword($password);

    $data=array(
       'SourceName' => 'CFS',
       'CorrelationID' => '1234251435632',
       'Name' => 'Country'
   );

   try {
     $results = $fsiiConnect->GetCodeLookupsByName($data);
   }
   catch (Exception $e) {
     print $fsiiConnect->getLastRequest();
   } 
```

getLastRequest() 的内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
                   xmlns:ns1="http://schemas.calgary.ca/xsd/familycommunitysurveycdm/2012/08" 
                   xmlns:ns2="http://schemas.calgary.ca/xsd/familycommunitysurvey/2012/08">
   <SOAP-ENV:Body>
      <ns2:GetCodeLookupByNameRequest>
         <ns1:Name>Country</ns1:Name>
      </ns2:GetCodeLookupByNameRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

所以它只为正文中的对象设置属性，而不是标题。任何想法为什么将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T22:09:02.357

我需要用来`addSoapInputHeader`设置标题属性。其他一切都进入身体。这是一个多步骤的过程，所以我想我会在这里记录它，以防其他人发现它有用：

**1.使用StdClass创建多级结构**

```
$headerObj = new StdClass();
$headerObj->ServiceProvider = array(
        'Name'          => 'FamilyCommunitySurvey',
        'OperationName' => 'GetCodeLookupByName'
        );
$headerObj->SourceName = 'foo';
$headerObj->CorrelationID = 'bar'; 
```

**2\. 使用 SoapHeader 创建合适的 XML 结构**

```
 $header = new SoapHeader('http://coc.gov/xsd/ESB/SupplementalData/V1','SupplementalData',$headerObj); 
```

第一个参数是 WSDL 文档中定义的名称空间。第二个参数是顶级元素。最后一个元素是我们格式化的 SOAP 标头。

**3\. 使用 addSoapInputHeader 将 header 添加到 Zend_Soap_Client 实例**

```
$connect->addSoapInputHeader($header); 
```

这与上面的代码相结合会产生一个看起来如预期的请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
                   xmlns:ns1="http://schemas.calgary.ca/xsd/familycommunitysurveycdm/2012/08" 
                   xmlns:ns2="http://schemas.calgary.ca/xsd/familycommunitysurvey/2012/08" 
                   xmlns:ns3="http://coc.gov/xsd/ESB/SupplementalData/V1">
   <SOAP-ENV:Header>
      <ns3:SupplementalData>
         <ns3:SourceName>CFS</ns3:SourceName>
         <ns3:ServiceProvider>
            <ns3:Name>FamilyCommunitySurvey</ns3:Name>
            <ns3:OperationName>GetCodeLookupByName</ns3:OperationName>
         </ns3:ServiceProvider>
         <ns3:CorrelationID>1352758058</ns3:CorrelationID>
      </ns3:SupplementalData>
   </SOAP-ENV:Header>
   <SOAP-ENV:Body>
      <ns2:GetCodeLookupByNameRequest>
         <ns1:Name>Country</ns1:Name>
      </ns2:GetCodeLookupByNameRequest>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# javascript - Firefox 扩展代码注入如何组织双向通信？

> ID：13350595
> 
> 赞同：1
> 
> 时间：2012-11-12T19:56:11.483
> 
> 标签：javascript, firefox-addon, code-injection, dom-events

Firefox 有一个扩展，它使注入的 JS 代码进入页面。

XUL 代码：

```
window.addEventListener("load", function load(event){
document.addEventListener("TestEvnt", function (e) {
    var info = e.detail;
    if(info.cmd=='account_list') {
        consoleLog('... event account_list');
    }
}, false, true);
document.addEventListener("DOMContentLoaded", function (e) {
  var window = e.originalTarget.defaultView.wrappedJSObject;
  var inject = window.document.createElement('script');
  inject.type = 'text/javascript';
  inject.setAttribute('src','resource://apptab-notify/injscr.js');
  window.document.getElementsByTagName('head')[0].appendChild(inject);
}, false);
},false); 
```

代码 injscr.js：

```
var additionalInfo = {
        "cmd": 'account_list',
        "url": document.location.href
    };
var evt = document.createEvent('CustomEvent');
evt.initCustomEvent('TestEvnt', true, false, additionalInfo);
document.dispatchEvent(evt); 
```

如何提供双向通信，从扩展监听代码注入事件？不使用 Addon-SDK！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:54:02.477

在 injsrc.js 中：

```
var additionalInfo = {
    "cmd": 'account_list',
    "url": document.location.href
};

var request = document.createTextNode(JSON.stringify(additionalInfo));
request.addEventListener("something-response", function(event) {
    console.log('... something-response');
    var info=JSON.parse(event.target.nodeValue);
    $('body').css('background-color', info.color);
}, false);
document.head.appendChild(request);
var event = document.createEvent("HTMLEvents");
event.initEvent("something-query", true, false);
request.dispatchEvent(event); 
```

在 XUL 中：

```
window.addEventListener('load', function(event) {
   document.addEventListener("something-query", function(event) {
        consoleLog('... something-query');
        var node = event.target;
        if (!node || node.nodeType != Node.TEXT_NODE) return;
        var info = JSON.parse(node.nodeValue);
        var doc = node.ownerDocument;

        if (info.cmd == 'account_list') {
            consoleLog('... event account_list');
            var event = doc.createEvent("HTMLEvents");
            event.initEvent("something-response", true, false);
            node.nodeValue = JSON.stringify({
                'color': '#999'
            });
            node.dispatchEvent(event);
        } else if (info.cmd == 'page_options') {
            consoleLog('page_options');
        }
    }, false, true);
}, false); 
```

文章帮助[MDN](https://developer.mozilla.org/en-US/docs/Code_snippets/Interaction_between_privileged_and_non-privileged_pages#Chromium-like_messaging.3A_json_request_with_json_callback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:07:50.980

您似乎已经从内容到 chrome 的通信正常工作了，为什么不在相反的方向使用相同的方法呢？这意味着`injscr.js`您将注册一个事件处理程序：

```
window.addEventListener("TestEvnt2", function(event)
{
  var info = event.detail;
  ...
}, false); 
```

在您的 chrome 代码中，您将生成一个事件：

```
var event = document.createEvent("CustomEvent");
event.initCustomEvent("TextEvnt2", false, false, additionalInfo);
gBrowser.contentWindow.dispatchEvent(event); 
```

这会将事件分派给`window`当前选项卡的对象，但您也可以浏览所有选项卡并将事件分派给所有选项卡（取决于您要执行的操作）。

# javascript - 使用 nodeJS 为 RESTful Web 服务定义 GET 函数

> ID：13350600
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:56:29.857
> 
> 标签：javascript, node.js, rest

给定一个允许不同用户发布不同文章的 RESTful Web 服务

为了`GET`在服务器端定义函数，我想在服务器端应该有异步函数，比如，`list`等函数`getTopViewed``getTopFavorite`

**那么以下是正确的吗？**

```
exports.get = function(req, res) {

    db.articles.list(function etc)
    db.articles.getTopViewed(function etc)
    db.articles.getTopFavorite(function etc)
} 
```

注意：其中`list`,`getTopViewed`和`getTopFavorite`在另一个 JavaScript 文件中定义

在另一个 JS 文件中：

```
exports.list = function(callback){
  // acts as async callback 
  var result = ArticleModel.find({}, function(err, articles){
    callback(null, articles)                                                    
  });
  return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:17:14.123

我建议使用[Connect](http://www.senchalabs.org/connect/)或[Express](http://expressjs.com/)之类的东西。它有一个路由器，使这更容易一些。设置和使用如下所示：

```
var express = require("express"),
    db = require('./yourdb.js');

var app = express.createServer();

app.configure(function(){
    app.use(app.router);
});

app.get("/articles/", function(req, res){
    db.list(function(err, articles){
       res.writeHead(200);
       // you probably want to do something more complex here
       res.end(JSON.stringify(articles));
    });
});

app.get("/articles/top", function(req, res){
    // res.end(<top articles go here>);
}); 
```

这是 Express 路由器文档的链接：[应用程序路由](http://expressjs.com/api.html#app.VERB)

# ios - iOS：当已经显示邮件撰写视图时，如何在后台创建/准备自定义电子邮件附件？

> ID：13350603
> 
> 赞同：2
> 
> 时间：2012-11-12T19:56:41.607
> 
> 标签：ios, email, ios6, attachment, uiactivityviewcontroller

我很想通过电子邮件分享我的 iOS 6.0 应用程序的自定义内容。

但由于我的内容需要一些时间才能分享，所以当用户按下“分享”按钮时，我无法立即显示邮件撰写视图。不幸的是，MFMailComposeViewController 从一开始就需要所有附件，所以我必须等待附件才能初始化并显示 MFMailComposeViewController（就像这里建议的那样：[UIActivityView attach file to Email](https://stackoverflow.com/questions/13250463/uiactivityview-attach-file-to-email)）

-- 阅读 Sapan 的回答后进行编辑：我正在寻找的是像 UIActivityViewController 共享时的行为，例如一个尚未创建的视频文件：用户按下共享按钮，UIActivityController 立即出现。附件是在后台创建的，创建不会中断用户的体验。--

我尝试了 UIActivityViewController ，它具有很好的异步 UIActivityItemProvider 功能，但不幸的是，这似乎只适用于具有公共 mime 类型（如图像和视频）的附件。我的自定义 NSData '项目' 被忽略了，不仅因为在 facebook 上分享（这很有意义），而且因为电子邮件分享。或者我在这里做错了什么：

```
MyUIActivityItemProvider *myCustomDocProvider = [[MyUIActivityItemProvider alloc] initWithPlaceholderItem:[[NSData alloc]init] andCustomInfoToCreateNSDataFrom:customAppInfo];
UIActivityViewController *activityVC = [[UIActivityViewController alloc]initWithActivityItems:@[myTextString, myCustomDocProvider] applicationActivities:nil];
[self presentViewController:activityVC animated:YES completion:nil]; 
```

我已经在考虑创建自己的自定义电子邮件编写器视图，以便在用户键入时/之后在后台创建附件。但我不想。我喜欢我在 HIG 中读到的“UI 元素的一致性”的想法。

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:22:18.707

您可以按如下方式创建一个方法，然后使用`[self performSelectorInBackground:@selector(sendMail)];`

```
-(void) sendMail
{
    // Prepare the data

    // Attach the data
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    [picker addAttachmentData:myData mimeType:@"<YOUR-MIME-TYPE>" fileName:@"Filename"];

    // Show compose view controller on the main thread
    dispatch_async(dispatch_get_main_queue(), ^(void) {
        // Fill out the email body text
        NSString *emailBody = @"Body";
        [picker setMessageBody:emailBody isHTML:NO];
        [self presentModalViewController:picker animated:YES];
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T22:42:52.867

您可以做的是将您的邮件正文设置为 HTML，其中包含从远程服务器引用的图像或媒体。然后用户将在邮件撰写视图中看到损坏的图像（也许您可以使用一些巧妙的 HTML 隐藏它）但是在收到邮件时应该完成上传。

不是最佳选择，因为它在发送电子邮件后可能会失败，但可能是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T03:05:32.683

这可以通过在 myCustomDocProvider 中使用布尔值来保存项目的返回，直到文件的构建完成。如果您想在主视图上显示进度或显示活动指示器，您可以通过从主线程调用它来实现。这是一个实际的代码片段：

使用此功能在您的提供程序中设置活动视图控制器以加载进度视图。

```
self.parentViewController = parentVc; 
```

这是具有阻塞和反馈视图加载的项目功能。

```
self.wait = true;

[self prepareFile:^(){
    [self performSelectorOnMainThread:@selector(dismissProgressView) 
                              withObject:nil waitUntilDone:NO];
}];

[self performSelectorOnMainThread:@selector(loadProgressView) 
                              withObject:nil waitUntilDone:NO];

while (self.wait) {
    [self performSelectorOnMainThread:@selector(updateProgressView) 
                                     withObject:nil waitUntilDone:NO];
}

return self.completedUrl; 
```

然后，您可以创建在主线程上调用的三个函数以显示进度视图，在等待文件完成时更新进度视图。在dismissProgressView 函数的实现中，请确保dismissViewController 完成时将wait boolean 设置为false。

# wcf - 检测 WCF 服务是否正在节流

> ID：13350604
> 
> 赞同：1
> 
> 时间：2012-11-12T19:56:42.760
> 
> 标签：wcf, throttling

有没有办法在服务器端检测我的 maxConcurrentSessions 或 maxConcurrentCalls 是否已用尽，即对我的服务的调用已排队？如果可以的话，我想记录一下。或者，IIS 是否提供任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:58:40.390

要检测当前并发会话，您可以尝试向 ServiceClass 添加静态 int 字段：

```
public class MyService : IMyService, IDisposable
{
    // Service Instance Count
    private static int _NumberOfInstances;

    public MyService () 
    {
        MyService._NumberOfInstances++;
    }

    public void Method1()
    {
        // ...
    }

    public void Dispose()
    {
        MyService._NumberOfInstances--;
    }
} 
```

根据定义： ConcurrentInstances 是在给定时间分配的服务实例数。当它是 PerCall 服务时，这个值与并发调用的数量相匹配。对于 PerSession 服务，此值等于活动会话实例的数量。

所以你可以检查你是否要超过你的最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-24T04:49:17.660

当您提出问题时，[WCF 性能计数器可用。](http://blogs.msdn.com/b/appfabriccat/archive/2010/10/29/less-tweaking-of-your-wcf-4-0-apps-for-high-throughput-workloads.aspx)

# button - 画架上的按钮

> ID：13350605
> 
> 赞同：4
> 
> 时间：2012-11-12T19:56:45.153
> 
> 标签：button, easeljs

我只是在学习 javascript（尝试为 windows 8 ui 创建游戏）。

这是我在画架上的按钮，但我认为这段代码也（太）丑陋了。按钮必须使用所有按钮状态的一个 3x 纹理更改 mouseEvents 上的纹理。

也许为此目的的其他解决方案？

使用：

```
btn_newgame = new my_controls.Button("button.png", "New Game", "30px sans-serif");
btn_newgame.set_position("center", 300);
btn_newgame.click = function (event) { console.log('newgame click'); }; 
```

按钮代码：

```
(function () {

Button.prototype = new createjs.Container();
Button.prototype.constructor = Button;

function Button(source_img, text, font, font_color) {
    this.initialize();
    this.mouseEventsEnabled = true;

    this.set_scale = set_scale;
    this.set_position = set_position;

    text = text || "";
    font = font || "12px sans-serif";
    font_color = font_color || "black";

    this.img_bitmap = new createjs.Bitmap(source_img)
    this.btn_text = new createjs.Text(text, font, font_color);
    this.btn_text.x = source_img.naturalWidth / 2 - this.btn_text.getMeasuredWidth() / 2;
    this.btn_text.y = this.btn_text.getMeasuredHeight() / 8;

    this.addChild(this.img_bitmap);
    this.addChild(this.btn_text);

    this.width = source_img.naturalWidth,
    this.height = source_img.naturalHeight / 4;

    // for different states = different pieces of one texture.
    this.states = {
        out: new createjs.Rectangle(0, 0, this.width, this.height),
        over: new createjs.Rectangle(0, this.height, this.width, this.height),
        down: new createjs.Rectangle(0, this.height * 2, this.width, this.height)
    };

    this.img_bitmap.sourceRect = this.states['out'];

    this.press;
    this.over;
    this.out;
    this.click;

    this.onPress = onPress;
    this.onMouseOver = onMouseOver;
    this.onMouseOut = onMouseOut;
    this.onClick = onClick;

}

function set_scale (scale_x, scale_y) {
    this.scaleX = scale_x || 1;
    this.scaleY = scale_y || 1;
}

function set_position (posX, posY) {

    posX = posX || 0;
    posY = posY || 0;

    if (typeof posX == "number") {
        this.x = posX;
    }
    else {
        switch (posX) {
            case "center":
                this.x = canvas.width / 2 - Math.floor(this.width / 2 * this.scaleX);
                break;
            case "left":
                this.x = 0;
                break;
            case "right":
                this.x = canvas.width - Math.floor(this.width * this.scaleX);
                break;
            default:
                this.x = 0;
        }
    }

    if (typeof posY == "number") {
        this.y = posY;
    }
    else {
        switch (posY) {
            case "center":
                this.y = canvas.height / 2 - Math.floor(this.height / 2 * this.scaleY);
                break;
            case "top":
                this.y = 0;
                break;
            case "bottom":
                this.y = canvas.height - Math.floor(this.height * this.scaleY);
                break;
            default:
                this.y = 0;
        }
    }
}

function onPress (event) {
    this.img_bitmap.sourceRect = this.states['down'];
    this.btn_text.x += 1;
    this.btn_text.y += 1;
    if (this.press)
        this.press(event);
}

function onMouseOver (event) {
    this.img_bitmap.sourceRect = this.states['over'];
    this.last_state = 'over';
    if (this.over)
        this.over(event);
}

function onMouseOut (event) {
    this.img_bitmap.sourceRect = this.states['out'];
    this.last_state = 'out';
    if (this.out)
        this.out(event);
}

function onClick (event) {
    this.img_bitmap.sourceRect = this.states['over'];
    this.btn_text.x -= 1;
    this.btn_text.y -= 1;
    if (this.click)
        this.click(event);
}

my_controls.Button = Button;
})(my_controls); // Button 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T18:24:26.547

Prototyping the object is a pretty good way to do it, but if you want to avoid this completely you could just add DOM buttons and position them to be part of your UI or create the UI entirely in using DOM.

Related Question: [Can I put an HTML button inside the canvas?](https://stackoverflow.com/questions/4797748/can-i-put-a-html-button-inside-the-canvas)

All the best, Shalom

# perl - 从 perl open() 调试文件句柄

> ID：13350606
> 
> 赞同：0
> 
> 时间：2012-11-12T19:56:46.613
> 
> 标签：perl, debugging, typeglob

假设我有这样的东西（原谅糟糕的 perl 风格 - 这是别人的 Perl。）

```
#!/usr/bin/perl

my $config_dir = '/var/config';
my $status_file = 'last_update.status';

my $host = shift;
chomp($host);

unless ( $host ) { die "Usage: $0 <hostname>\n"; }

open(STATUS,">$config_dir/$host/$status_file") or die "Could not open $config_dir/$host/$status_file for writing.  Aborting...\n";
print STATUS time() . "\n";
close(STATUS); 
```

它像这样通过命令行调用`update_status.pl foo`。

我期望发生的事情：/var/config/foo/last_update.status 包含当前时间戳。

实际发生的情况：/var/config/foo/last_update.status 包含旧时间戳。

现在，脚本**不会**死；它成功完成并将退出代码0返回给bash。这是一个运行 perl 5.10.1 的 Debian Linux 机器。

所以我的问题是：我该如何检查`STATUS`？Data::Dumper 根本没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:04:59.270

你有点已经检查过它，因为它没有死。

可能是您的文件系统禁用了时间戳修改跟踪。查看 mount 命令的输出，并查看文件系统上的选项。

如果您的意思是文件的**内容**是错误的（而不是 inode mtime），那么我建议您的系统时间可能已关闭，或者您的时区环境可能与您的预期不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:09:29.120

这将是最可靠的。

```
use Data::Dumper qw( Dumper );

{
   local $Data::Dumper::Useqq = 1;
   local $Data::Dumper::Terse = 1;
   local $Data::Dumper::Indent = 0;
   print(Dumper(readlink("/proc/$$/fd/".fileno(STATUS))), "\n");
} 
```

不过，我怀疑错误出在文件名上。你确定你不只是误解了时间戳吗？

```
 perl -nlE'say "".localtime($_)' /var/config/foo/last_update.status 
```

另一种可能性是您正在遭受缓冲，但我认为您发布的代码不会出现这种情况，除非您使用 NFS 或其他一些分布式文件系统。

# html - 查看为 Window 8 应用程序编译的 HTML

> ID：13350608
> 
> 赞同：0
> 
> 时间：2012-11-12T19:56:48.367
> 
> 标签：html, windows-8

我正在使用 HTML、CSS、JavaScript 构建 Windows 8 应用程序，我对 UI 样式越来越恼火，特别是试图覆盖它们。如果无法查看已编译的 HTML，几乎不可能知道如何定位特定的类。

有没有办法查看编译后的 HTML？请说是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:58:27.570

在调试应用程序时从 Visual Studio 中，转到调试 -> Windows -> DOM Explorer。

它会显示您在 IE10 中获得的相同检查器，这将允许您检查生成的 HTML 以查找内置控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:07:06.860

Blend 的 DOM 检查器确实是最好的解决方案，同时查看 UI 基础 CSS 文件以了解样式是如何应用于元素的。

# ruby - 如何查看对象类中的所有方法/属性

> ID：13350609
> 
> 赞同：3
> 
> 时间：2012-11-12T19:56:52.373
> 
> 标签：ruby, ruby-1.9, irb

我已经开始学习 Rails 3.0 并决定花一些时间学习 Pure Ruby 1.9 并想知道是否有办法查看对象类，因为它总是可用的。比如有没有可以在 IRB 中输入的命令，例如，它将显示对象类中的所有方法，如 to_a、to_s 等。感谢您的帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T19:59:12.020

`#methods`是你想要的方法。它只是返回一个符号数组，这些符号是对象响应的所有方法的名称。

```
Object.new.methods 
```

或者在 irb 中更具可读性：

```
puts Object.new.methods.sort.to_yaml 
```

或者对于类方法：

```
Object.methods 
```

* * *

不过需要注意的是，某些对象允许此处未列出的方法。任何用钩子实现的东西`#method_missing`都不会出现。这包括很多`ActiveRecord`方法以及其他 rails 对象。

但只要没有什么棘手的事情发生，这就是你想要的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T20:05:35.460

要查看对象的方法，您可以执行`your_object.methods`. 对于一个类，这将是它的类方法。要查看类的实例方法，您可以执行`your_class.instance_methods`. 所以要列出 Object 的所有类方法，你会这样做`Object.methods`，而要查看 Object 的所有实例方法，你会这样做`Object.instance_methods`。

进一步提示：如果您只想查看给定类实现的方法（而不是从其祖先继承的方法），您可以将`false`其作为参数传递给我之前提到的任一方法。因此，例如，`String.instance_methods(false)`将返回 String 实现的实例方法列表，但不会返回像`dup`and这样的通用 Object 方法`is_a?`。

但是，如果您正在尝试学习，查看给定类或类扩展的文档（例如 Rails 对 String 或 Date 的添加）可能会更好。

# macos - 终端 MacOS - 终端和“按 [c] 进行配置”

> ID：13350615
> 
> 赞同：3
> 
> 时间：2012-11-12T19:57:35.877
> 
> 标签：macos, terminal, cmake

我的 Mac 和终端有问题。我需要编译一个程序。安装了 Xcode 和命令行工具。之后`cmake`需要按`c`配置然后`g`生成makefile。好吧，我的问题是 - 我如何在终端中输入命令“c”？如果这非常简单，请原谅我，但我是 Mac 新手，对源代码相当陌生，而且组合起来很困难......

最好的，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T05:16:32.687

问题解决方案：$ccmake. 然后 $ ccmake c (目录) 和 $ ccmake g (目录)

# android - 文本视图中的富文本

> ID：13350616
> 
> 赞同：21
> 
> 时间：2012-11-12T19:57:45.393
> 
> 标签：android, textview

我需要为我的程序创建一个“信息”。我想用几种颜色、样式、字体等填充信息文本。

我发现[这个链接](http://web.archive.org/web/20180623060234/http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)有一种方法来实现它。

有没有其他方法（更好或更容易）来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T20:05:52.510

阅读您的问题标题后，我准备为您提供指向该文章的链接。我发现使用跨度并且`SpannableString`非常强大。另一种方法是对文本使用 HTML 格式，这可以通过[Html.fromHtml()](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)来完成。

但是，尚不清楚支持哪些 HTML 标记，因为文档仅显示：

> 此类将 HTML 字符串处理为可显示的样式文本。并非所有 HTML 标记都受支持。

因此，对于一个好的解决方案，我肯定会采用`SpannableString`本文中的方法。这种方法在实践中非常方便，因为您还可以创建自己的跨度类来扩展现有的类（例如，如果您想让一段文本使用未内置的自定义字体）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-04-04T14:08:34.603

我在周末写了一个库来处理这个问题，我称之为[RichTextView](https://github.com/androidessence/richtextview)。

该库允许您格式化一段文本（使其变为粗体、下划线、斜体、组合等）以及为其着色（文本颜色和突出显示）。在下一个版本中，我计划允许自定义字体跨度等。

使用它很简单，只需将以下依赖项添加到您的 gradle 文件中：

```
compile 'com.androidessence.lib:richtextview:1.0.1' 
```

现在，假设您要将前四个字符加粗，您可以简单地进行以下调用：

```
myRichTextView.formatSpan(0, 4, RichTextView.FormatType.BOLD); 
```

请注意，结束索引参数不包含在内，因此通过说 (0 -> 4) 我们实际上是粗体索引 (0 -> 3)。

如果您想同时使用粗体和下划线，请使用 EnumSet：

```
myRichTextView.formatSpan(0, 4, EnumSet.of(RichTextView.FormatType.BOLD, RichTextView.FormatType.UNDERLINE)); 
```

有关最新信息，请参阅上面链接的 Github 存储库，但我会在此答案过时时尝试更新此答案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T20:04:38.820

过去当我需要格式化文本时，我创建了一个带有格式化的 html 文件，将其粘贴在 res/raw 目录中并将其加载到 WebView 中。我以前从未尝试过使用不同的字体，所以不确定这是否可行，但粗体和斜体等会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-07T17:59:57.253

**科特林**

如果*不需要很复杂的样式*，可以使用这种原生方式：

```
val newText = buildSpannedString {
        bold { append("Hello ") }
        underline { append("World. ") }
        italic { append("2021 ") }
        append("Author: Caner")
    } 
```

# python - 如何忽略非浮点值

> ID：13350619
> 
> 赞同：2
> 
> 时间：2012-11-12T19:58:01.743
> 
> 标签：python

我有一个 USB 温度记录器，它每 30 秒上传一次到 Cosm。我遇到的问题是，每 5 分钟，当我运行命令时，它会报告一个文本错误而不是一个数字。

所以我试图找出一种方法让它循环直到它收到一个数字，或者只是忽略文本并恢复脚本（否则它会退出并出现错误）。

我非常不优雅的解决方案是这样做：

```
 # convert regular error message to number
    if temp_C == "temporarily": # "temporarily" is used as it happens to be the 4th word in the error message
            temp_C = 0.0 
```

当前的代码主体是：

```
while True:
    # read data from temper usb sensor
    sensor_reading=commands.getoutput('pcsensor')

    #extract single temperature reading from the sensor

    data=sensor_reading.split(' ') #Split the string and define temperature
    temp_only=str(data[4]) #knocks out celcius reading from line
    temp=temp_only.rstrip('C') #Removes the character "C" from the string to allow for plotting

    # calibrate temperature reading
    temp_C = temp

    # convert regular error message to number
    if temp_C == "temporarily":
            temp_C = 0.0

    # convert value to float
    temp_C = float(temp_C)

    # check to see if non-float
    check = isinstance(temp_C, float)

    #write out 0.0 as a null value if non-float
    if check == True:
            temp_C = temp_C
    else:
            temp_C = 0.0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T20:01:10.007

在 Python 中，请求宽恕通常比请求许可 ( [EAFP](http://docs.python.org/2/glossary.html#term-eafp) ) 更容易。当你遇到 a`ValueError`时，`continue`到下一次迭代：

```
try:
    temp_C = float(temp_C)
except ValueError:
    continue # skips to next iteration 
```

或者更紧凑（整合你的大部分功能）：

```
try:
    temp_C = float(sensor_reading.split(' ')[4].rstrip('C'))
except (ValueError, IndexError):
    continue 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T20:01:29.687

只需捕获`ValueError`转换失败时发生的异常：

```
try:
    temp_C = float(temp)
except ValueError:
    temp_C = 0.0 
```

# inversion-of-control - 在 ServiceStack 中获取容器的正确方法是什么

> ID：13350621
> 
> 赞同：16
> 
> 时间：2012-11-12T19:58:05.347
> 
> 标签：inversion-of-control, servicestack

我目前正在尝试在我正在编写的 SignalR 应用程序中使用 ServiceStack，该应用程序是大型 MVC 4.5 应用程序的一部分。

我目前在 App_Start 文件夹中有一个类正在启动我的集线器。我的问题是如何获得对容器的引用，如 ServiceStack 的 wiki 中所示。

```
container.Register<IRedisClientsManager>(c => new PooledRedisClientManager("localhost:6379"));
container.Register<ICacheClient>(c => (ICacheClient)c.Resolve<IRedisClientsManager>().GetCacheClient()); 
```

我正在做的是使用 Redis 作为开发缓存层，并计划使用我们现有的 membase 作为生产缓存层。

我如何获得容器？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-12T20:31:11.097

要在 servicestack 之外解决来自 ServiceStack 的 IOC 的依赖关系，您可以使用：

```
var foo = HostContext.TryResolve<IFoo>(); //null if doesn't exist
var foo = HostContext.Resolve<IFoo>();    //throws if IFoo doesn't exist 
```

有一些从ServiceStack外部访问Container的方法，最快的方法是：

```
var container = HostContext.Container; 
```

## 通过 AppHost 单例

这是通过`IAppHost`单例访问它的简写方式：

```
HostContext.AppHost.Container 
```

# android - 从陀螺仪android传感器获取旋转度数

> ID：13350622
> 
> 赞同：4
> 
> 时间：2012-11-12T19:58:08.020
> 
> 标签：android, android-sensors, gyroscope

到目前为止，我已经在互联网上搜索过。我正在尝试开发一个问题，我需要从手机起点旋转角度。要知道用户是否向上或向下移动手机，我正在使用加速度计，它在开始时有点不稳定，但我设法让它稳定。我现在需要围绕它自己的旋转度数。就像不推荐使用的方向传感器一样。然后我尝试使用 Magnometer，但我很不稳定。然后我确定我想尝试使用陀螺仪，当我使用示例代码时：

```
 // This timestep's delta rotation to be multiplied by the current rotation
 // after computing it from the gyro sample data.
 if (timestamp != 0) {
     final float dT = (event.timestamp - timestamp) * NS2S;
     // Axis of the rotation sample, not normalized yet.
     float axisX = event.values[0];
     float axisY = event.values[1];
     float axisZ = event.values[2];

     // Calculate the angular speed of the sample
     float omegaMagnitude = (float) Math.sqrt(axisX*axisX + axisY*axisY + axisZ*axisZ);

     // Normalize the rotation vector if it's big enough to get the axis
     if (omegaMagnitude > EPSILON) {
         axisX /= omegaMagnitude;
         axisY /= omegaMagnitude;
         axisZ /= omegaMagnitude;
     }

     // Integrate around this axis with the angular speed by the timestep
     // in order to get a delta rotation from this sample over the timestep
     // We will convert this axis-angle representation of the delta rotation
     // into a quaternion before turning it into the rotation matrix.
     float thetaOverTwo = omegaMagnitude * dT / 2.0f;
     float sinThetaOverTwo = (float) Math.sin(thetaOverTwo);
     float cosThetaOverTwo = (float) Math.cos(thetaOverTwo);
     deltaRotationVector[0] = sinThetaOverTwo * axisX;
     deltaRotationVector[1] = sinThetaOverTwo * axisY;
     deltaRotationVector[2] = sinThetaOverTwo * axisZ;
     deltaRotationVector[3] = cosThetaOverTwo;
 }
 timestamp = event.timestamp;
 float[] deltaRotationMatrix = new float[9];
 SensorManager.getRotationMatrixFromVector(deltaRotationMatrix, deltaRotationVector);
 // User code should concatenate the delta rotation we computed with the current rotation
 // in order to get the updated rotation.
 // rotationCurrent = rotationCurrent * deltaRotationMatrix; 
```

此代码取自他们的文档，无论如何我可以将其转换为 360 度吗？或者我可以获得诸如手机从起点转动多少度的值？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:22:56.087

使用[getRotationMatrix()](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29)在两个感兴趣的时间点`R1`获取3x3 旋转矩阵。您想知道与对齐所带来的旋转。`R2``angle``R``R1``R2`

首先计算`R`：

```
R = R1 * transpose(R2) 
```

然后计算这个旋转的角度：

```
angle = acos((trace(R)-1)/2) 
```

就这些。

# objective-c - 寻找有关如何构建应用程序的建议

> ID：13350624
> 
> 赞同：0
> 
> 时间：2012-11-12T19:58:14.167
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uinavigationcontroller

我需要制作一个具有以下内容的应用程序：

*   UINavigationController 作为基础。我需要向下钻取并推送和弹出其他屏幕。
*   我需要能够交换堆栈上的底部屏幕。用户应该能够（使用某种菜单）选择不同的选项，这些选项将交替堆栈上的第一个屏幕。从那里他们可以向下钻取并推动更多的屏幕并相应地弹出它们。

关于如何实现这一目标的任何想法？

我尝试使用单个视图控制器作为 rootViewController，它管理其他视图控制器的交换，但在此过程中遇到了一些问题。我不禁认为有一种更“正确”的方式来实现这一目标。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:10:09.413

这应该可以满足您的需要，注意索引 0 是您的 rootViewController 并替换您想要在第二行中更改的任何 viewController：

```
NSArray * viewControllers = [self.navigationController viewControllers];
NSArray * newViewControllers = [NSArray arrayWithObjects:[viewControllers     objectAtIndex:0], [viewControllers objectAtIndex:1], thirdController,nil];
[self.navigationController setViewControllers:newViewControllers]; 
```

# java - 如何从groovy中的日期中提取一年中的日期

> ID：13350625
> 
> 赞同：3
> 
> 时间：2012-11-12T19:58:16.023
> 
> 标签：java, groovy

在 Groovy 中，有一些快捷方式可用于查找 Date 对象的各种公共变量，如下所示。

```
Date now = new Date()
Integer year = now.year + 1900
Integer month = now.month + 1
Integer day = now.date
Integer hour = now.hours
Integer minute = now.minutes 
```

获取年份的捷径是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:58:16.023

这个问题的简短答案是“没有捷径”，但长答案添加了“......但你可以做一个！”

无需任何修改，您可以使用以下代码从日期对象访问一年中的某一天：

```
Date now = new Date()
Integer dayOfYear = now[Calendar.DAY_OF_YEAR] 
```

但是，如果您的代码将频繁访问该变量，您可以修改`Date`类以直接使用`ExpandoMetaClass`以下方法添加该属性：

```
Date.metaClass.getDayOfYear << { -> delegate[Calendar.DAY_OF_YEAR]}
Date now = new Date()
assert now[Calendar.DAY_OF_YEAR] == now.dayOfYear 
```

有关如何添加属性的更多信息，[请参见 http://www.groovy-lang.org/metaprogramming.html#metaprogramming_emc](http://www.groovy-lang.org/metaprogramming.html#metaprogramming_emc)`ExpandoMetaClass`的 Groovy 文档

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T21:26:56.420

这个答案暂时不相关，但 Java 8 设置为包含 JSR-310，这是一个更好的日期和时间实现/表示。

您可以在 java 8 功能[列表中看到该功能](http://openjdk.java.net/projects/jdk8/features#150)

在 Java 8 中，您将拥有表示日期的新对象。最相似的一个日期是[LocalDateTime](http://threeten.sourceforge.net/apidocs-2012-10-25/javax/time/LocalDateTime.html)

以下是如何在 Java 中完成此操作的示例（当然，Groovy 更容易）：

```
LocalDateTime now = LocalDateTime.now();
int year = now.getYear();
int month = now.getMonthValue();
int day = now.getDayOfMonth();
int hour = now.getHour();
int minute = now.getMinute();
// your answer
int dayOfYear = now.getDayOfYear(); 
```

[这应该可以从 Java 8 的里程碑6](http://openjdk.java.net/projects/jdk8/milestones#M6)开始摆弄和玩耍。里程碑 6 设置为 2013 年 1 月 31 日

# c++ - Qt中的简单颜色填充QIcons

> ID：13350631
> 
> 赞同：13
> 
> 时间：2012-11-12T19:58:29.207
> 
> 标签：c++, qt, qmenu, qicon

我需要创建一个更改 QWidget 背景的菜单。我想将代表所选颜色的 QIcon 放入填充 QMenu 的 QActions 中。我不想弹出 Photoshop 并手动绘制图标。是否可以编写一个充满某种颜色的简单图标？这样，如果需要，我可以拥有任意数量的 QAction，而且我不必在 Photoshop 中制作一大堆图标。\

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T20:15:49.690

您可以从 QPixmap 构造一个 QIcon。QPixmap 可以用给定的大小构建，然后使用“填充”填充颜色。

例如，要创建一个 100x100 的红色图标：

```
QPixmap pixmap(100,100);
pixmap.fill(QColor("red"));
QIcon redIcon(pixmap); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-14T08:43:42.130

刚刚弄清楚如何将颜色从图标更改为任何其他颜色。因此，图标的图像必须由一种纯色（此处为“黑色”）组成，可以使用像素图及其掩蔽能力将其转换为另一种颜色（如“红色”）：

```
pixmap = QPixmap(filename)
mask = pixmap.createMaskFromColor(QColor('black'), Qt.MaskOutColor)
pixmap.fill((QColor('red')))
pixmap.setMask(mask)

btNew = QToolButton()
btNew.setIcon(QIcon(pixmap)) 
```

# javascript - 节点 JS：Ping 服务器和客户端 UDP

> ID：13350640
> 
> 赞同：6
> 
> 时间：2012-11-12T19:59:29.600
> 
> 标签：javascript, node.js

我想创建一个小的 ping 脚本。我是 node js 的初学者。我最终的小目标是让客户端 ping 服务器。我希望服务器通过在控制台中记录消息来确认数据包，并且我希望它将相同的数据包/消息发送回客户端。

这是我到目前为止所拥有的：

**服务器：**

```
var PORT = 33333;
var HOST = '127.0.0.1';

var dgram = require('dgram');
var server = dgram.createSocket('udp4');

server.on('listening', function () {
    var address = server.address();
    console.log('UDP Server listening on ' + address.address + ":" + address.port);
});

server.on('message', function (message, remote) {

    console.log(remote.address + ':' + remote.port +' - ' + message);
    // I added a server.send but it gave me an infinite loop in the server console

});

server.bind(PORT, HOST); 
```

**客户：**

```
var PORT = 33333;
var HOST = '127.0.0.1';

var dgram = require('dgram');
var message = new Buffer('My KungFu is Good!');

var client = dgram.createSocket('udp4');

client.on('message', function (message, remote) {

    console.log("The packet came back");

});

client.send(message, 0, message.length, PORT, HOST, function(err, bytes) {
    if (err) throw err;
    console.log('UDP message sent to ' + HOST +':'+ PORT);
    count++;
}); 
```

更新：

谢谢！这真的很有帮助。但我还有一个问题。假设我想以特定字节数发送数据包。我会用 1000 替换 'message.length' 以获得 1kb 对吗？但我得到一个错误'throw new Error('Offset + length beyond buffer length');'

我不太明白为什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T20:19:22.933

一件事是发送数据，另一件事是接收数据。由于 UDP 协议是双向的，那么实际上客户端和服务器之间并没有严格的区别。因此，您的服务器和客户端代码将几乎相同，不同之处在于实际上一个会发送数据包而另一个只会响应。另请注意，您有一个无限循环，因为您可能使用`.send`with`PORT`和`HOST`变量，并且您必须发送到不同的主机/端口对。

这是一个例子：

**服务器**

```
var host = "127.0.0.1", port = 33333;

var dgram = require( "dgram" );

var server = dgram.createSocket( "udp4" );

server.on( "message", function( msg, rinfo ) {
    console.log( rinfo.address + ':' + rinfo.port + ' - ' + msg );
    server.send( msg, 0, msg.length, rinfo.port, rinfo.address ); // added missing bracket
});
server.bind( port, host ); 
```

**客户**

```
// NOTE: the port is different
var host = "127.0.0.1", port = 33334;

var dgram = require( "dgram" );

var client = dgram.createSocket( "udp4" );

client.on( "message", function( msg, rinfo ) {
    console.log( "The packet came back" );
});

// client listens on a port as well in order to receive ping
client.bind( port, host );

// proper message sending
// NOTE: the host/port pair points at server
var message = new Buffer( "My KungFu is Good!" );
client.send(message, 0, message.length, 33333, "127.0.0.1" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T10:00:55.003

这是一个老问题，但是**您实际上并不需要将客户端绑定到端口**，您可以使用未关闭的底层套接字立即回复

服务器.js

```
const dgram = require('dgram');
const server = dgram.createSocket('udp4');

const reply = new Buffer('pong');

server.on('message', function (message, remote) {
    console.log('Got', message.toString());
    server.send(reply, 0, reply.length, remote.port, remote.address);
});

server.bind(6790, '0.0.0.0'); 
```

客户端.js

```
const dgram = require('dgram');
const client = dgram.createSocket('udp4');

const reply = new Buffer('ping');

client.on('message', function (message, remote) {
    console.log('Got', message.toString());
    client.send(reply, 0, reply.length, 6790, '0.0.0.0');
});

client.send(reply, 0, reply.length, 6790, '0.0.0.0'); 
```

启动服务器，然后启动客户端，进行无休止的乒乓球比赛。

# mongodb - 如何从猫鼬中的对象 ID 获取创建日期？

> ID：13350642
> 
> 赞同：21
> 
> 时间：2012-11-12T19:59:31.830
> 
> 标签：mongodb, mongoose

我从[ObjectId — MongoDB Manual](http://www.mongodb.org/display/DOCS/Object+IDs)中了解到，任何 mongodb 对象 id 的前 4 个字节都是创建时间戳。

从猫鼬中提取该信息的任何受支持的方法？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-12T21:30:10.937

我相信 ObjectId 有一个 getTimestamp() 方法；例如

```
_id.getTimestamp() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-11T15:56:35.057

您可以在使用 _id 获取创建时间戳的 mongoose 模式上创建一个[虚拟的“created”属性。](http://mongoosejs.com/docs/api.html#virtualtype_VirtualType-get)只需添加：

```
YourMongooseSchema.virtual('created').get( function () {
  if (this["_created"]) return this["_created"];
  return this["_created"] = this._id.getTimestamp();
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-16T17:20:52.163

如果你运行这个，你会得到时间戳

```
console.log(new mongoose.Types.ObjectId().getTimestamp() ); 
```

例如。

```
Fri Nov 16 2012 17:20:14 GMT+0000 (GMT) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-15T10:23:31.827

```
var timestamp = document._id.toString().substring(0,8);

var date = new Date( parseInt( timestamp, 16 ) * 1000 ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-07T08:26:00.670

对于时间戳

```
 _id.getTimestamp() 
```

对于 ISO 格式的日期

```
_id.getTimestamp().toISOString() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-06-09T18:11:17.880

**如果有人想将时间戳转换为日期字符串，**这可能很有用。通过使用 moment.js 库，您可以轻松地从时间戳中获取日期。

例子

```
const timestamp = (new mongoose.Types.ObjectId).getTimestamp();

const formatted = moment(timestamp).format('DD MM YYYY, h:mm:ss a');

console.log(formatted);   // output => 09 06 2020, 11:26:27 pm 
```

> 在 moment.js 中格式化日期的更多方法 [https://momentjs.com/docs/#/parsing/string-format/](https://momentjs.com/docs/#/parsing/string-format/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-05T08:39:33.097

```
_id.getTimestamp() 
```

对我不起作用，但

```
_id.Time() 
```

完美运行

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-07T12:55:43.560

如果要在聚合或更新查询中进行转换，可以使用[$convert](https://docs.mongodb.com/manual/reference/operator/aggregation/convert/)运算符并转换`_id`为`date`.

例子：

```
db.users.updateMany({
    created: {$exists: false},
}, [
    {$set: {created: {$convert: {
        input: '$_id',
        to: 'date',
    }}}}
]
) 
```

# objective-c - 我所有控制器的“唯一/继承”RKObjectLoaderDelegate

> ID：13350643
> 
> 赞同：1
> 
> 时间：2012-11-12T19:59:34.717
> 
> 标签：objective-c, ios6, restkit

所以我对 RestKit 有点陌生，我对控制器中的代表有疑问。我看到如果一个ViewController继承了RKObjectLoaderDelegate，它需要实现方法：

```
 - (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
    {
        NSLog(@"Error: %@", [error localizedDescription]);
    } 
```

现在，如果我在任何地方都想要相同的功能（即：在我的所有作为 ObjectLoader 委托的 ViewControllers 中），我该怎么做？我不一定希望在 20 个不同的视图中拥有该代码......我想创建一个 RKObjectLoaderDelegate 类并一直创建该类，但是我必须每次都更改 ViewController 的委托，它是痛苦……有什么想法吗？！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:52:56.690

创建一个继承自 UIViewController 并采用 RKObjectLoaderDelegate 协议的自定义对象。将所需的`objectLoader:didFailWithError:`函数实现添加到这个新对象。现在，只需让您的视图控制器继承自新对象而不是 UIViewController。这应该允许所有视图控制器使用相同的功能。

# java - 我需要打印一个等于单词中字符数的单词

> ID：13350645
> 
> 赞同：0
> 
> 时间：2012-11-12T19:59:42.293
> 
> 标签：java, loops, printing, for-loop

... 在 Java 中使用 for 循环。例如，hello 将被打印五次。

到目前为止，这是我的代码：

```
import java.util.Scanner;

class Words {
public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    System.out.println("Please enter one word of your choice");
    String word = scan.nextLine();
    System.out.println(word);
    int length = word.length();
    System.out.println(length);

    for (length < word; length++) {
        System.out.println(word);
    }

}
} 
```

我们必须使用扫描仪包。抱歉，如果这真的很基本，但我才刚刚开始，在任何地方都找不到答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:02:28.470

您只需要编写一个循环，该循环运行 0 到单词的长度，例如下面：

```
 int length = word.length();
   for (int i = 0; i < length; i++) {
     System.out.println(word);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:03:47.043

我做 C# 编程，但这是相似的。只是用户是这样的：

```
string word = "hello";
int times = word.Length;
for(int i = 0; i < times; i++)
{
    System.out.println(word); // Java statment from your code
} 
```

希望能帮助到你 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:03:33.733

```
for(int x = 0; x < word.length; x++){
    System.out.println(word);
} 
```

# ajax - Internet Explorer 9 AJAX 请求上没有会话 Cookie

> ID：13350652
> 
> 赞同：14
> 
> 时间：2012-11-12T20:00:14.763
> 
> 标签：ajax, internet-explorer-9, session-cookies

Internet Explorer 9 没有通过我的 AJAX 请求发送会话 cookie。

当我通过 AJAX 向我的 API 发出身份验证请求时，它会返回一个设置会话 cookie 的响应。通过 AJAX 对 API 的后续调用不会将 cookie 发送回服务器。

API 位于同一主机上。同样，常规的非 AJAX 页面请求也不会显示会话 cookie。我关闭了 Internet 选项中的所有隐私和安全设置。Chrome 会正确发送 cookie。

如何让 IE 返回 cookie？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T17:05:12.753

我尝试访问的 URL 使用了下划线字符 ('_')。这是一个无效的 URL，因此 Internet Explorer 不能正确接受 cookie。解决这个问题解决了我的问题实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T06:42:29.307

只需将 Math.random() 放在 url 中，例如，

```
$.ajax({
    type: "GET",
    url: "getRequestData.do?parameter=GetModelService&t="+Math.random(),
    data: "sub=ADD",
    cache: false,
    ................
    ............... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T23:27:58.420

尽量避免使用 localhost 或 127.0.0.1 作为 URL 的一部分，看看它是否有任何区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T20:17:07.550

我在获取请求时遇到了 IE9 的这个问题。我从 $.getJSON（使用带有查询字符串参数的 url）转换为 $.ajax（使用帖子）。我的理论是，类似于 MS 的 MVC 服务器库，IE 不喜欢返回 JSON 的获取请求。（你必须在 MVC 中明确允许这样做，否则它会给你一个错误，表明返回 JSON 的获取请求有一些安全风险错误) 无论如何，由于这是我的谷歌热门之一，我想我会发布对我有用的内容。

# objective-c - Obj-C & Cocoa：applicationDidFinishLaunching 后变量为零：

> ID：13350654
> 
> 赞同：1
> 
> 时间：2012-11-12T20:00:25.603
> 
> 标签：objective-c, cocoa

在我的 AppDelegate 的界面中，我有以下属性声明：

```
@property (strong) NSArray *fileNamesInCurrentDirectory; 
```

然后，在实现中：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [self setFileNamesInCurrentDirectory:[NSArray arrayWithObject:@"hello"]];

}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return [self.fileNamesInCurrentDirectory count];
} 
```

当`numberOfRowsInTableView`被调用时，`fileNamesInCurrentDirectory`是`nil`。为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:12:59.540

因为如[文档中所述](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html)

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification 
```

> 应用程序启动和初始化后由默认通知中心发送

我猜这意味着应用程序完全加载，构建所有视图，然后调用该方法。

是否有任何理由需要在加载应用程序后进行方法调用？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:19:47.403

没有说`applicationDidFinishLaunching`之前调用过`numberOfRowsInTableView`。

第一个被调用的方法是`init`方法，then `applicationDidFinishLaunching`。

使用该`init`方法初始化所有变量，期望那些在 xib 文件中的变量，因此它们尚未加载。从 xib 加载的 outlet 可以在`applicationDidFinishLaunching`(或`awakeFromNib`) 中初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T22:26:56.273

正如 Ramy Al Zuhouri 所说，这是时间问题。以下是一些可以在启动时使用的方法，因此您可以看到它们的执行顺序：

```
@implementation AppDelegate

- (id)init {
    if (self = [super init])
        NSLog(@"In init");
    return self;
}

+(void)initialize {
    NSLog(@"Initialize");
}

-(void)awakeFromNib {
    NSLog(@"awakeFromNib");
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSLog(@"applicationDidFinishLaunching");
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    NSLog(@"numberOfRowsInTableView");
    return [self.fileNamesInCurrentDirectory count];
} 
```

日志显示：

```
2012-11-12 14:23:56.880 TableViewTimingProblem[1399:303] Initialize
2012-11-12 14:23:56.881 TableViewTimingProblem[1399:303] In init
2012-11-12 14:23:56.885 TableViewTimingProblem[1399:303] awakeFromNib
2012-11-12 14:23:56.893 TableViewTimingProblem[1399:303] numberOfRowsInTableView
2012-11-12 14:23:56.937 TableViewTimingProblem[1399:303] applicationDidFinishLaunching 
```

# c# - 如何获取数据表中某列数据的绝对值之和

> ID：13350655
> 
> 赞同：1
> 
> 时间：2012-11-12T20:00:43.950
> 
> 标签：c#, datatable

如何选择 a 中列的绝对值之和`DataTable`。我可以使用 select 语句，例如：

```
SELECT sum(abs('Position')) FROM 'MyDb'.'MyTable'; 
```

在数据库表上。我怎样才能`DataTable`在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:06:47.787

转换为`IEnumerable<DataRow>`并使用 linq

```
IEnumerable<DataRow> rows = table.Rows.Cast<DataRow>();
var amounts = rows.Select(r => Maths.Abs( (int) r["Position"] ));
var sum = amounts.Sum(); 
```

并链接：

```
return 
 table.Rows.Cast<DataRow>()
 .Sum(r => Math.Abs( (int) r["Position"] )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T13:36:22.887

这晚了一年，但它可能对其他人有用。

```
Dim i As Integer
Dim t As Type = i.GetType
tbl.Columns.Add("abs", t, "(iif(col<0,-col,col))")
Dim sumAbs As Integer = tbl.Compute("sum(abs)", "") 
```

不支持ABS功能，但可以用IIF DIY。

此外，您必须分两个阶段进行计算。首先使用 IIF 逻辑作为表达式创建一列，然后对新列求和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:06:15.550

```
Double sum = 0;
foreach(DataRow row in thisTable.Rows)
{
    sum += Math.Abs(row["Position"]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:13:46.570

不需要linq。可以使用[Compute](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)方法。

```
dt.Compute("SUM(Column1)", "Column1>0") 
```

完整的工作示例：

```
 DataTable dt = new DataTable();
            dt.Columns.Add("Column1");
            dt.Columns["Column1"].DataType = typeof(Int32);
            dt.Rows.Add(1);
            dt.Rows.Add(2);
            dt.Rows.Add(-1);
            int a = Convert.ToInt32(dt.Compute("SUM(Column1)", "Column1>0"));
            Console.WriteLine(a);  //Will print 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-12T10:17:48.890

```
 Int64 total = datatableName.AsEnumerable().Sum(row => row.Field<Int64>("yourcolumn")); 
```

请检查您想要的数据类型，如果某些问题让我们在这里分享上面给您负数和正数的总和。

# ruby-on-rails - 路由中的“If”语句

> ID：13350660
> 
> 赞同：1
> 
> 时间：2012-11-12T20:01:13.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes, categories

我有一个名为“类别”的行的帖子模型，它存储带有类别的字符串。我想更改我的路线，如果我进入`"blog"`类别，那么它将显示如下地址：`mysite.com/blog/1`或者如果我的帖子类别将`"portfolio"`显示我的帖子地址等`mysite.com/portfolio/2`。是否可以不制作另一个表格并在那里存储类别？我正在考虑一些路线`if`声明，但目前无法弄清楚它的任何内容。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:18:08.147

你为什么不把它们全部抓住

```
match ':category/:id' => 'posts#show' 
```

然后您可以按控制器中的哈希`:category`值进行过滤。`params`

```
@post = Post.where category: params[:category], id: params[:id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:17:18.733

我认为你可以这样做！

```
CATEGORIES = %w[portfolio blog sites]
      CATEGORIES.each do |cat|
    get cat + '/:id', controller: 'post', action: 'show'
  end 
```

或者有一个范围：

```
 CATEGORIES = %w[portfolio blog sites]
      CATEGORIES.each do |cat|
         scope cat do
    get '/:id', controller: 'post', action: 'show'
     end
   end 
```

# expressionengine - 批量编辑自定义字段

> ID：13350661
> 
> 赞同：1
> 
> 时间：2012-11-12T20:01:20.297
> 
> 标签：expressionengine

我需要批量编辑一个新的自定义字段，该字段已添加到该频道中的大约 200 个条目的频道中。有没有办法做到这一点？到目前为止找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:32:54.820

如果我对您的理解正确，请尝试以下操作：

```
UPDATE exp_channel_data SET field_id_X = 'some value' WHERE channel_id = 1; 
```

此代码将更新通道上所有行中 ID 为“1”的 1 个字段。显然将 field_id_X 替换为正确的字段。请务必在进行任何更改之前进行完整的 SQL 备份。如果出现任何问题，请恢复到上次已知的工作安装。（只是要小心，你不应该有任何问题。）

# ruby-on-rails - Rails 控制器长时间睡眠行为

> ID：13350662
> 
> 赞同：1
> 
> 时间：2012-11-12T20:01:19.747
> 
> 标签：ruby-on-rails

当 Rails 控制器的其中一条线需要很长时间时，它会做什么？例如，其中一条线路想要休眠很长时间，比如 10000 秒：`sleep(10000)`. 如果很多人使用网站并调用此控制器方法，是否会占用大量资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:09:06.980

它会休眠`10000`几秒钟，从而一直阻塞一个 ruby​​ 进程。

如果您的 Web 服务器在此延迟之前设置为超时，浏览器将呈现错误消息，但这不会停止 Rails 进程。

所以这里没有魔法。

它在睡眠时不会使用资源，但不会释放 ruby​​ 进程所需的 RAM。而且由于对于此操作的每个请求，一个进程都会卡住，从`max_nb_ruby_processes_on_your_server`并行请求此操作开始，您的网站将对每个请求都没有响应，没有更多的 Ruby 进程可用于处理请求。

如果您有复杂的数据要处理，通常最好通过`rake task`您将通过 crontab 或延迟作业异步调用的方法来处理它

# javascript - Javascript中的灰色“等待”页面？

> ID：13350663
> 
> 赞同：7
> 
> 时间：2012-11-12T20:01:25.617
> 
> 标签：javascript, html, user-interface, user-input, wait

> **可能重复：**
> [Div 作为模态 - javascript](https://stackoverflow.com/questions/4502435/div-as-modal-javascript)

有没有办法以某种方式锁定 Javascript 中的页面，直到函数调用完成？我想到的就像一个半透明的灰色封面，它可以防止任何其他用户操作，例如鼠标悬停或按钮点击，直到当前请求完成处理。不过，外观并不像功能那么重要。

我找不到任何可以做到这一点的东西。这个问题的大多数“解决方案”只是说等待加载其他 HTML 元素，直到你完成你正在执行的任何处理，但在这种特殊情况下，所有选项都*已经出现*在屏幕上。我希望能够阻止用户从页面执行另一个操作，直到当前请求完成。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T20:18:40.833

我倾向于使用简单的`div`一些`javascript`来做这种事情。

因此，例如，在您的页面中创建一个`div`，它将用作您的灰色。

```
 <div id="blackout" style='background-image:url(someSemiTransparent.png); display:none;"></div> 
```

然后像这样设计它：

```
 #blackout {
      width:100%;
      height:100%; /* make sure you have set parents to a height of 100% too*/
      position: absolute;
      left:0; top:0;
      z-index:10 /*just to make sure its on top*/} 
```

然后，当您的流程即将开始时，您可以调用（显示）：

```
 document.getElementById('blackout').style.display = 'block'; 
```

一旦完成，您可以通过以下方式再次隐藏它：

```
 document.getElementById('blackout').style.display = 'none'; 
```

当您确实显示它时，您可能希望将`overflow`您的 设置`body`为`hidden`，然后再设置回`auto`，这将防止用户滚动并且只看到部分停电。

现在我通常使用`jquery`and`show`虽然`hide`我很确定`javascript`上面是正确的..

更新：

正如 Chad 所提到的，为了让一切都更加整洁，最好将所有样式都放入 CSS 中。IE

```
 #blackout {
     width:100%;
     height:100%; /* make sure you have set parents to a height of 100% too*/
     position: absolute;
     left:0; top:0;
     z-index:10 /*just to make sure its on top*/
     background-image:url(someSemiTransparent.png); 
     display:none;} 
```

并从`DIV`. IE

```
 <div id="blackout"></div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T20:06:57.360

用一个

```
<div style="position:fixed;
            z-index: 2; /* above everything else */
            top:0; left:0; bottom:0; right:0;
            background:rgba(0,0,0,.5);
"> <!-- possibly some loading-animation and/or explanation --> </div> 
```

并在处理时添加/删除它或显示/隐藏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:05:35.207

交互元素有一个“禁用”属性，您可以将其设置为“禁用”以防止它们发出事件。

您可以在处理之前将其定位为“禁用”，并将它们定位回“”以在流程结束时重新启用它们。

我建议使用 jQuery 轻松选择感兴趣的元素，在处理过程中将选择器结果保存在内存中，以便在处理后使用它重新启用元素。

完成后，您可以添加漂亮的 UI 元素，例如玻璃窗格，以强调您的屏幕被禁用的面孔。

# php - PHP 包含 JS 库

> ID：13350667
> 
> 赞同：1
> 
> 时间：2012-11-12T20:01:32.897
> 
> 标签：php, javascript, html

这是我对所有这些魔法如何运作的理解（如果我错了，请纠正我）：

在 PHP/JS/HTML/CSS 网站中，当请求页面时，服务器会读取文件（用于引用此问题的 index.php），执行任何`<?php ?>`标记/结构并完成工作。然后它将完成的工作作为一个完整的页面发送给请求者。然后请求者读取文件（通过浏览器）并以*“正常”*顺序执行文件（index.php）。如果我想要几个页面包含相同的 JS 脚本和库，我可以包含（安全且符合约定）JS：

```
<script type="text/javascript" src="LIBRARY/1.js"></script>
<script type="text/javascript" src="LIBRARY/2.js"></script>
// etc... for libraries, then also include inline scripts like:
<script type="text/javascript"> 
    $(document).onLoad(function(){
    });
</script>
<script type="text/javascript"> 
    $(document).ready(function(){
    });
</script> 
```

通过 PHP 包括：

```
<!-- JS -->
<?php include ("component/js.php"); ?> 
```

如果可能，是否最好将这些包含在页面底部，或者库是否应该位于底部、`onLoad`顶部、`ready`底部或任何其他特定位置以优化加载时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:38:50.107

> 如果可能，是否最好将这些包含在页面底部，或者库应该在底部，onLoad 在顶部，在底部准备好，或者加载时间优化的任何其他特定位置？

要么将所有 JS 包装在文档就绪回调函数中，要么简单地将标签放在底部。否则，您将依赖 defer 或 async 标记属性来阻止页面加载，并且这两个 attr 尚不全面支持。

**关于 JS 包括优化：**

虽然您正在考虑如何重用 JS 包含的代码是一件好事，但正如您在上面所做的那样，这是在资产文件中管理它们的良好第一步。

但是，在 php 性能方面存在一个缺点，因为您需要处理更多的代码才能呈现页面。

这就是为什么一些开发人员选择使用像 require.js 等客户端资产管理器的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:27:03.367

我个人不建议将 javascript 放在最底层，即使您经常听到这个建议。它主要与加载性能和脚本阻塞有关，这对于当今的现代浏览器来说已经不是什么大问题了。

为了组织起见，我喜欢将我的脚本放在脑海中，但最后，这取决于您的个人喜好。甚至雅虎也[建议](http://developer.yahoo.com/performance/rules.html)将脚本放在底部，所以它不会是错误的。

使用jQuery`$(document.ready`时（立即触发，因为 DOM 树被完全解析并且在图像完全加载之前）并在加载 jQuery 本身之后放置 init 代码 - 无论您决定放置它。

除此之外，您对网页的请求-响应结构的基本理解是正确的；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:06:10.840

onLoad 和 ready 几乎是相同的功能，您应该在页面底部包含所有 javascript，因为它会在页面加载后加载 javascript。

# jquery - Jquery 在特定高度上使 div 停止滚动

> ID：13350671
> 
> 赞同：0
> 
> 时间：2012-11-12T20:02:03.817
> 
> 标签：jquery, wordpress, html

我试图让 servicewrapper div 只滚动到某个高度并停在那里。而且你不能在页面上滚动更多。

我从这段代码开始：

```
$(window).scroll(function() {   
 if ($(window).scrollTop() >=380) 
{ 
    $(window).scrollTop(380); 
}
}); 
```

它成功了，直到我注意到它停止了所有页面上的所有滚动。所以我尝试了这段代码，以便该规则仅适用于 servicewrapper div，但没有运气。如您所见，我不是 jquery 专家，呵呵。

```
$(window).scroll(function() {
 if $('#servicewrapper').scrollTop() >=380) 
{ 
    $('#servicewrapper').scrollTop(380); 
}
}); 
```

有没有办法做到这一点？一直在谷歌和堆栈上搜索对此的答案，但我没有找到任何答案，至少不是我想要的那样，而且我太菜鸟了，无法更改别人的代码。

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:11:23.493

如果要控制容器内的滚动，则需要调用`scrollTop`该容器。在这种情况下，您似乎正试图影响向下滚动整个页面，因此您的容器将是`window`. 这部分是正确的。

如果我理解正确，这个脚本被插入到您网站的多个页面中，您只想影响某些页面。如果是这种情况，您需要以某种方式识别该页面。如果只有目标页面有一个名为 的元素`servicewrapper`，那么您可以使用它：

```
if($('#servicewrapper').length) {
    $(window).scroll(function() {   
        if ($(window).scrollTop() >=380) { 
            $(window).scrollTop(380); 
        }
    });
} 
```

工作示例：http: [//jsfiddle.net/MafPQ/](http://jsfiddle.net/MafPQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T23:36:26.583

我让它工作了！它最初只能在 Firefox 中运行，但经过一些调整后，它可以在 IE、Safari、Firefox 和 Chrome 上运行。这是代码：

JS：

```
$(window).scroll(function(){
    if  ($(window).scrollTop() > 200){
         $('#servicediv').css({position:'relative',top:200});
    } else {
         $('#servicediv').css({'top':30% });
        }
}); 
```

和CSS：

```
#servicediv {
margin-top: 100px;
top:80%;
width: 100%;
background:url(images/content_bg.png);
height: auto;
position: relative;
z-index: 800;
bottom: 0;
min-height: 450px;

}
#servicewrapper {
width: 100%;
margin-left: auto;
margin-right: auto;
text-align: center;
height: auto;

} 
```

我回答我自己的问题，以防其他人有同样的问题并用谷歌搜索。您必须调整规则以匹配您的 ofc。我猜你们中的很多人在看到代码时都会脸红。但它的工作。

# ruby-on-rails - 如何在 Rails 中进行 POST 调用而不自动转到默认的创建方法？

> ID：13350673
> 
> 赞同：1
> 
> 时间：2012-11-12T20:02:21.887
> 
> 标签：ruby-on-rails, rest, post, http-post

我最近遇到了 Rails 的问题，到目前为止我看到的所有通过 POST 发送数据的示例代码总是路由到这个默认的根 URL，它会自动调用控制器中的 #create 方法。我想知道如何制作一个通过 POST 发送数据但使用我定义的不同方法的表单？

在这个特定的示例中，我有一个需要允许文件上传的小部件。但是，此上传可能会导致创建或替换，但在任何一种情况下，它都仅特定于页面上的此小部件。还有其他小部件也能够创建东西，我需要将它们的逻辑分开，而不是仅仅通过一些创建方法将它们全部路由。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:21:14.317

这就是您制作自定义 POST 路由的方式。

在路线中，

```
resources :whatevers do
  member do
    post 'customizedpost'
  end
end 
```

在您的任何控制器中

```
def customizedpost
  # all the post stuff
end 
```

例如，以您的形式

```
= form_for @whatever, url: customizedpost_whatever_path, html: { method: :post } do |f| 
```

# java - 如何在 utf-8 中读写这个？

> ID：13350676
> 
> 赞同：14
> 
> 时间：2012-11-12T20:02:31.833
> 
> 标签：java, utf-8, inputstream

我收到一个错误`io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence`

解决方案是以 UTF-8 读写文件。

我的代码是：

```
InputStream input = null;
OutputStream output = null;
OutputStreamWriter bufferedWriter = new OutputStreamWriter( output, "UTF8");
input = new URL(url).openStream();
output = new FileOutputStream("DirectionResponse.xml");
byte[] buffer = new byte[1024];
for (int length = 0; (length = input.read(buffer)) > 0;) {
   output.write(buffer, 0, length);
}
BufferedReader br = new BufferedReader(new FileReader("DirectionResponse.xml" ));
FileWriter fstream = new FileWriter("ppre_DirectionResponse.xml");
BufferedWriter out = new BufferedWriter(fstream); 
```

我正在读取一个 url 并将其写入文件*DirectionResponse.xml*。然后读取*DirectionResponse.xml*并写入与 *ppre_DirecionResponse.xml* 相同的内容进行处理。

**如何更改它以便以 UTF-8 进行读写？**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-12T20:09:32.100

首先，您需要调用`output.close()`（或至少`output.flush()`在重新打开文件进行输入之前调用。这可能是您的问题的主要原因。

然后，您不应该使用`FileReader`or `FileWriter`，因为它始终使用平台默认编码（通常不是 UTF-8）。从[文档中`FileReader`](http://docs.oracle.com/javase/6/docs/api/java/io/FileReader.html)：

> 此类的构造函数假定默认字符编码和默认字节缓冲区大小是适当的。

使用`FileWriter`. 替换这个：

```
BufferedReader br = new BufferedReader(new FileReader("DirectionResponse.xml" )); 
```

像这样：

```
BufferedReader br = new BufferedReader(new InputStreamReader(
    new FileInputStream("DirectionResponse.xml"), "UTF-8")); 
```

同样对于`fstream`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:06:31.107

[用 Java 读写 UTF-8 文件](http://www.xyzws.com/javafaq/how-to-read-and-write-utf8-file-in-java/164)

我看到你正在用 utf-8 写作，但没有专门用 utf-8 阅读。按照我在链接中提供的示例进行操作。

```
try {
   Reader reader =
      new InputStreamReader(
         new FileInputStream(args[0]),"UTF-8");
   BufferedReader fin = new BufferedReader(reader);
   Writer writer =
      new OutputStreamWriter(
         new FileOutputStream(args[1]), "UTF-8");
   BufferedWriter fout = new BufferedWriter(writer);
   String s;
   while ((s=fin.readLine())!=null) {
      fout.write(s);
      fout.newLine();
   }

            //Remember to call close. 
            //calling close on a BufferedReader/BufferedWriter 
            // will automatically call close on its underlying stream 
   fin.close();
   fout.close();
} catch (IOException e) {
   e.printStackTrace();
} 
```

# windows-phone-7 - 远程服务器返回错误：NotFound

> ID：13350679
> 
> 赞同：0
> 
> 时间：2012-11-12T20:02:46.717
> 
> 标签：windows-phone-7

我尝试下载文件

```
 ...
        request = (HttpWebRequest)WebRequest.Create(new Uri(link));
        request.AllowReadStreamBuffering = false;
        request.BeginGetResponse(new AsyncCallback(GetData), request);
    }

    private void GetData(IAsyncResult result)
    {
      HttpWebRequest request = (HttpWebRequest)result.AsyncState;
      HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
    ... 
```

, 但“远程服务器返回错误：未找到。” 我使用此代码从其他服务器下载其他文件。我可以在 PC 和 WP7 上打开此链接。

为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:08:46.700

任何阅读它的人都清楚你的问题。点击链接，禁止访问。如果您无法访问它，我们的代码应该如何访问它？您需要在服务器上授予它权限，或者如果需要 cookie，请在您的 HTTPRequest 中使用它。

# c# - 我是否正确执行异步/等待？

> ID：13350682
> 
> 赞同：1
> 
> 时间：2012-11-12T20:02:58.640
> 
> 标签：c#, task, .net-4.5, async-await

我第一次尝试使用`async`和`await`关键字，我怀疑我是否正确地这样做了。

在我的 WPF 表单`Loaded`事件中，我使用了一种方法：

```
private void MessagesWindowLoaded(object sender, RoutedEventArgs e)
{
    DataGridMessagesLoadAsync();
} 
```

看起来像这样：

```
private async void DataGridMessagesLoadAsync()
{
    _messages = await _messageService.GetAllMessagesAsync();
    dataGridMessages.ItemsSource = _messages;
    if (_messages.Count() == 0) return;
    dataGridMessages.Columns[6].Visibility = System.Windows.Visibility.Collapsed;
    dataGridMessages.Columns[8].Visibility = System.Windows.Visibility.Collapsed;
    dataGridMessages.Columns[10].Visibility = System.Windows.Visibility.Collapsed;
    dataGridMessages.Columns[11].Visibility = System.Windows.Visibility.Collapsed;
    dataGridMessages.Columns[12].Visibility = System.Windows.Visibility.Collapsed;
} 
```

`GetAllMessagesAsync()`看起来像这样：

```
public async Task<List<Message>> GetAllMessagesAsync()
{
    return (from m in _context.Messages select m).ToList();
} 
```

`DataGrid`我不确定我是否得到任何异步 - 似乎整个窗口都在等待`DataGrid`. 更重要的是，Visual Studio 会发出警告：

> 此异步方法缺少“等待”运算符，将同步运行。考虑使用 'await' 运算符来等待非阻塞 API 调用，或使用 'await Task.Run(...)' 在后台线程上执行 CPU 密集型工作。

所以我知道我必须等待什么`GetAllMessagesAsync()`？但是什么？新功能还必须等待其他`async`功能吗？我想不通，我陷入了一个无限循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:13:18.110

你可以直接返回一个`Task`：

```
public Task<List<Message>> GetAllMessagesAsync()
{
    return Task.Factory.StartNew(() => _context.Messages.ToList());
} 
```

# php - (PHP-Yii-UserGroups) Cron Job 不间断执行

> ID：13350685
> 
> 赞同：0
> 
> 时间：2012-11-12T20:03:08.090
> 
> 标签：php, yii, yii-extensions

所以，我有一个 cron 工作，代码如下：

```
class UGCJReminder extends UGCronJob {
/**
 * return the cron description
 */
protected function getDescription()
{
    return Yii::t('userGroupsModule.cron', 'manda email para os usuarios cadastrados para cadastrar suas atividades');
}

/**
 * return the cron table model name
 */
protected function getCronTable()
{
    return 'UserGroupsCron';
}

/**
 * return the cron name
 */
protected function getName()
{
    return 'reminder';
}

/**
 * returns the number of days that have to pass before performing this cron job
 */
protected function getLapse()
{
    return 1;
}

/**
 * return the model
 */
protected function getModel()
{
    return new UserGroupsUser;
}

/**
 * return the action method
 */
protected function getAction()
{
        Yii::import('ext.yii-mail.YiiMailMessage');
        $message = new YiiMailMessage;
        $message->setBody('Message', 'text/html');
        $message->subject = 'Lembrete';
        $message->addTo('my-email');
        $message->from = Yii::app()->params['adminEmail'];
        return Yii::app()->mail->send($message);
}

/**
 * return the action criteria
 */
protected function getCriteria()
{
            return new CDbCriteria;
}

/**
 * return the interested database fields
 */
protected function getColumns()
 {
        return array('email' => UserGroupsUser::ACTIVE);
        #return NULL;
 }
} 
```

我对用户组（Yii 模块）要求的文档进行了所有其他更改，并且 cron 列表显示我的 cron 已安装并正在运行。但是，它每天运行多次，每天只运行一次。那么我做错了什么？

我也会接受这个问题的另一种解决方案（在每天确定的时间发送电子邮件）。请考虑我正在使用 Yii，因此希望有一种在框架内执行此操作的方法（例如，使用扩展）

PS：如果你知道关于这一切的好的文档来源（因为用户组、Cron-tab 和 Yii 本身在记录这一切是如何工作的方面并不那么强大）我仍然会对此感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:39:40.460

我以前从未使用过这个扩展。但我正在查看源代码并注意这个片段：

[https://github.com/nickcv/userGroups/blob/master/components/UGCron.php#L206](https://github.com/nickcv/userGroups/blob/master/components/UGCron.php#L206)

```
if ($cItem->last_occurrence <= date('Y-m-d', time() - (3600 * 24 * $cItem->lapse)).' 00:00:00') {
    ...
    $cItem->last_occurrence = date('Y-m-d').' 00:00:00';                    
    $cItem->save();
} 
```

我想问你下一个问题：

1.  `if`运算符在您的情况下是否正常工作？
2.  `$cItem->last_occurrence`cron 运行后会更新吗？
3.  你用的是什么版本的PHP？

# iphone - 如何使用节标题在 UITableViewController 中调整 UITableView 的大小

> ID：13350686
> 
> 赞同：9
> 
> 时间：2012-11-12T20:03:17.967
> 
> 标签：iphone, objective-c, ipad, cocoa-touch

我在 UITableViewController 中有一个分组的 UITableView，我想水平调整它的大小。

我尝试了许多不同的方法，但没有一个是完美的。

我试过的：

1.）覆盖`- [UITableView setFrame:]`，但它没有移动部分的标题，并且两侧都有黑色区域（因为表格视图后面没有任何东西）。

2.）覆盖`- [UITableViewCell setFrame:]`，但它仍然不移动标题（这很重要）。

3.) 从 UITableViewController 调用`- [self.view setFrame:]`，但它什么也没做。

如果您有任何解决方法的想法，请与我分享！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-12T21:32:55.157

如果你`- [UITableView setFrame:]`从调用`- [UITableViewController viewDidAppear:]`，它的工作原理：

```
- (void)viewDidAppear:(BOOL)animated
{
    [self.tableView setFrame:CGRectMake(x, y, w, h)];
} 
```

为了避免表格视图的每一侧出现黑条，请将应用程序主窗口的背景颜色设置为白色：

```
[[[UIApplication sharedApplication] keyWindow] setBackgroundColor:[UIColor whiteColor]]; 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-12T20:19:23.667

主要问题是 a 的表视图`UITableViewController`是主视图，因此它不应该调整大小。

最好的选择是不使用`UITableViewController`. 相反，使用`UIViewController`并添加您自己的`UITableView`作为视图控制器主视图的子视图。这样您就可以根据需要调整大小。

当然，连接所有管道需要额外的工作，因此您的视图控制器可以像表格视图控制器一样工作，但没有太多工作要做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-12T18:09:03.390

我知道这是个老问题，但我认为在这种情况下，最好使用嵌入在容器视图中的 UITableViewController，而不是调整 UITableViewController 的 tableView 的大小。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T21:23:00.470

要修复正在调整大小的标题，我会尝试：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    CGFloat headerHeight = 40;
    UIView *headerView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, self.view.frame.size.width, headerHeight)];
    UILabel *cellLabel = [[UILabel alloc] initWithFrame: headerView.frame];
    [cellLabel setText: @"My Text"];
    [cellLabel setBackgroundColor: [UIColor clearColor]];
    [headerView addSubview: cellLabel];
    return headerView;
}

    - (CGFloat) tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 40;
} 
```

此代码应替换此方法：

```
- (NSString *) tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-12T15:21:33.350

派对迟到了，但对于其他搜索该主题的人来说，它总是很方便......

我不认为在 viewDid 出现时这样做是正确的方法，因为它肯定对用户可见并在他们眼前调整大小。不会带来出色的用户体验 imo。

在 swift 4 中，我使用类似的东西

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    var rect = tableView.frame
    if rect.size.height != h && rect.size.width != w { 
        // set x and y to any value you need. you can also have a 
        // condition about the origin (x,y) 
        // if you have a gap on the left or top...
        rect.size.height = h;
        rect.size.width = w;
        tableView.frame = rect
    }
} 
```

这将在 tableView 可见之前进行更改并使用户体验更好，并且正如接受的答案中提到的那样，您需要将窗口颜色设置为表格视图的颜色以更好地混合（白色是默认值）

```
 UIApplication.shared.keyWindow?.backgroundColor = .white 
```

# c# - 从 ftp 服务器（本地）获取图片以显示在网站上

> ID：13350690
> 
> 赞同：0
> 
> 时间：2012-11-12T20:03:24.510
> 
> 标签：c#, asp.net, ftp, webforms

我在我的网络上的 ftp 服务器上获取了我的照片，我想在我的网站上显示这些照片。

怎么可能呢？

之前我用过`("/Boats/{BoatId}/{ImageId} + "." + {ImageExtension")`，但现在我有我的照片了`\\ftplocation\files\boatcompany\boats\`

我尝试了以下方法：（适用于上面的网址）。

```
ImageUrl='<%# String.Format(@"\\ftp\files\boatcompany\boats\{0}\thumbnails\{1}.{2}", Eval("BoatId"), Eval("Image.ImageId"), Eval("Image.Extension")) %>' /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:35:57.763

除了 Max 的回答之外，我还想添加第三个解决方案，它适用于私有和公共 ftp 服务器（以及其他任何东西）。

您需要做的是使用您的应用程序作为 ftp 的代理。

*   添加一个页面，f.ex。“getimage.aspx”接受参数，f.ex。图片的id
*   从页面调用时，响应带有标题设置（mime-type 等）（保持）
*   连接到 ftp 服务器，根据需要登录并流式传输请求的文件。
*   将该流的内容转发到您页面的流（响应流）并关闭。

然后你可以这样做（换行使其更具可读性）：

```
ImageUrl = '<%# 
    String.Format(@"/getimage.aspx?boatid={0}&imageid={1}&extension={2}", 
                  Eval("BoatId"), 
                  Eval("Image.ImageId"), 
                  Eval("Image.Extension")) %>' 
```

对于 FTP，您可以使用 .net 中的内置功能或使用第三方扩展程序，例如[Rebex-FTP](http://www.rebex.net/ftp-ssl.net/)，它可以让来自 ftp 的流式文件在公园散步。

以这种方式使用页面检索图片使其能够从各种来源获取图像，而不仅仅是 ftp，同时保持对用户透明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T22:23:54.103

由于安全问题，浏览器永远不会从本地存储加载任何资源（包括图像）。因此，URL 喜欢`\\server\myfile.jpg`或`file:///server/myfile.jpg`永远不会从 Internet 网站加载。这就是你的代码不起作用的原因。

你有两个选择：

1\. 如果您的 ftplocation 是一个真正的 FTP 服务器，并且可以使用真正的 FTP URL 从外部世界访问它，您可以使用以下代码：

```
ImageUrl='<%# String.Format(@"ftp://ftp.server.com/files/boatcompany/boats/{0}/thumbnails/{1}.{2}", Eval("BoatId"), Eval("Image.ImageId"), Eval("Image.Extension")) %> 
```

2\. 您可以在 Web 项目中的 IIS 中创建一个虚拟子文件夹，调用它`Boats`并将该虚拟文件夹指向`\\ftplocation\files\boatcompany\`文件夹。然后在您的代码中使用这个（与您在获得 FTP 之前使用的代码几乎相同）：

```
ImageUrl='<%# String.Format(@"/Boats/{0}/thumbnails/{1}.{2}", Eval("BoatId"), Eval("Image.ImageId"), Eval("Image.Extension")) %> 
```

# c++ - 如何使用 C++ 在 Windows 上通过 HTTPS 从 Internet 检索文件？

> ID：13350698
> 
> 赞同：0
> 
> 时间：2012-11-12T20:03:47.010
> 
> 标签：c++, windows, http, https

> **可能重复：**
> [如何在 C/C++ 中使用 WinHTTP 下载文件？](https://stackoverflow.com/questions/822714/how-to-download-a-file-with-winhttp-in-c-c)

我有一个网址，例如：

[https://dl.dropbox.com/u/5465642/myfile.xml](https://dl.dropbox.com/u/5465642/myfile.xml)

以及 Windows 上的 C++ 应用程序。当我的应用程序启动时，我想花 2 秒钟尝试将文件下载到应用程序内存中。如果文件被下载，我会用它来做我的事情。如果没有，我将跳过它。我不想为此使用 C# 和 .Net。没有繁重的外部库或 DLL。可能是 WinApi 或一些小型外部库。在 Windows XP 及更高版本上工作。不依赖于 IE 浏览器版本或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:44:45.520

获取主机的 IP，打开套接字，连接到 IP，进行 SSL/TLS 握手，进行获取，关闭套接字。对于握手，您使用 AcquireCredentialsHandle、InitializeSecurityContext、QueryContextAttributes、CertVerifyTimeValidity 等。对于发送，您将使用 EncryptMessage。对于接收，您将使用 DecryptMessage。使用这些 API 搜索 Microsoft 示例就可以了。在握手期间管理您自己的接收超时并接收以处理您的超时。

# perl - 如何使用 Perl 的 Mason 输出 PDF 文件？

> ID：13350702
> 
> 赞同：1
> 
> 时间：2012-11-12T20:04:12.487
> 
> 标签：perl, file-io, mason

我必须从 .pdf 文件中编写代码，然后将其复制到任何其他 pdf 文件中。我为打开文件而编写的代码如下所示：

```
<%args>
$fullname
$filename

</%args>
<%init>
use IO::File;

$r->content_type('application/pdf');
$r->header_out( 'Content-disposition' => "attachment; filename=$filename" );

my $tmpfile = $filename;
my $forread = new IO::File "< $fullname";

my @lines = <$forread>;

foreach my $key (@lines){ 
      print $key;
       }

return $fullname;

</%init> 
```

其中 filename 是将 pdf 内容保存到的文件的名称，“fullname”是从中获取内容的 pdf

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:15:10.943

您当前正在阅读文本文件。您应该`binmode`首先使用非文本（如 PDF）。而且，永远不要使用*间接对象语法*。

```
my $fh = IO::File->new($fullname, 'r');

$fh->binmode(1); 
```

所以试试这样的东西，改编自[梅森书](http://www.masonbook.com/book/chapter-7.mhtml#TOC-ANCHOR-9)。

```
use Apache::Constants qw(OK);

my $fh = IO::File->new($fullname, 'r');

$fh->binmode(1);

$m->clear_buffer; # avoid extra output (but it only works when autoflush is off)

$r->content_type('application/pdf');
$r->send_http_header;

while ( my $data = $fh->getline ) {
    $m->print($data);
}
$fh->close;

$m->abort; 
```

# entity-framework - Entity SQL 中的空间支持

> ID：13350703
> 
> 赞同：1
> 
> 时间：2012-11-12T20:04:13.943
> 
> 标签：entity-framework, entity-framework-5, spatial, entity-sql

我正在生成实体 SQL 以在我的应用程序中提供动态查询支持。然而，我一直无法找到如何使用 Entity Framework 5 在 Entity SQL 中指定空间条件。

使用 Linq to Entities 对具有包含空间字段的实体的模型进行查询，例如：

```
var a = new Model1Container();
var b = from c in a.Entity1
        where c.Loc.Intersects(System.Data.Spatial.DbGeography.FromText("POINT (43 -73)"))
        select c; 
```

生成 SQL Server 2012 所期望的 SQL，例如：

```
SELECT 
[Extent1].[Id] AS [Id], 
[Extent1].[Loc] AS [Loc]
FROM [dbo].[Entity1] AS [Extent1]
WHERE ([Extent1].[Loc].STIntersects(geography::Parse(N'POINT (43 -73)'))) = 1 
```

如何使用 ESQL 重写上述 Linq to Entities 查询？或者这是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:02:11.773

我们有一组可以在 EntitySQL 中用于操作空间类型的规范函数，其中包括来自众所周知的文本的实例构造。例如，这是用于构造点的有效 EntitySQL：

```
GeometryFromText('POINT (43 -73)') 
```

完整的空间规范函数集在 SpatialEdmFunctions 类中声明，但此类用于以编程方式创建 DbExpression 树，因此可用于此类的参考文档不是最适合 EntitySQL 使用的形式。我将跟进我们的文档团队，看看是否有更好的资源可用，或者我们是否需要将这些资源添加到 EntitySQL 文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:56:47.740

```
var a = new YourDbContext();
var b = a.Entity1.Where(c=>c.Loc.Intersects(System.Data.Spatial.DbGeography.FromText("POINT (43 -73)")); 
```

# drupal - 从块内编辑配置文件字段？

> ID：13350704
> 
> 赞同：0
> 
> 时间：2012-11-12T20:04:16.810
> 
> 标签：drupal, drupal-7

**大家好...**希望我能很好地描述我的问题。

我在用户配置文件中有一个名为“手机号码”的字段和一个名为“发送通知”的复选框。我想创建一个用于编辑这些字段的块，以便用户能够快速访问它们而不必一直到个人资料页面，并且还可以关注它们并鼓励用户填写他们出去。

谁能告诉我如何实现这一目标？我搜索了 SO 并进行了搜索，但找不到答案。非常感谢一些阅读指南

**非常感谢大家！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:05:19.817

如果您知道如何编写一些 php，您可以使用 drupal API 来构建自定义表单。这应该让你开始： [https ://drupal.stackexchange.com/questions/3010/embed-some-user-profile-fields-in-a-block-form](https://drupal.stackexchange.com/questions/3010/embed-some-user-profile-fields-in-a-block-form)

# php - 带有javascript的php while循环滑块

> ID：13350705
> 
> 赞同：0
> 
> 时间：2012-11-12T20:04:26.657
> 
> 标签：php, javascript, slider, while-loop

我的网站上有一个滑块，看起来应该类似于：![样品滑块](../Images/73fade5257dab0c48d41a5a48cdd85b8.png)

但我能做的就是：![破碎的滑块](../Images/3d92b9fc44f9833c5f35adeb856663ca.png)

有人可以帮我弄清楚php代码有什么问题吗？我试过把它全部放在一个while循环中，但是它只在左边显示一个气泡，在右边显示一个气泡。我认为它会将其他所有内容都从滑块中抛出，但我没有得到我应该做的事情。

我尝试过围绕标签的开头和结尾移动，并不是说它做了任何事情，但这就是我尝试过的所有事情。我在第二个之前放了一个回声`while ($record->MoveNext()){`，它打印到屏幕上，然后把它放在同样的后面，`while`它没有出现。

一定是添加了 MoveNext 功能，但我想获得第二个意见，因为我对功能一无所知，不知道在这个网站上哪里可以找到它们，也不知道如何修复它。：/

我将继续搜索文件以查看 MoveNext 功能的位置，以便我可以尝试自己修复它，但如果那里有人比我有更多此类东西的经验，我将非常感谢朝着正确方向迈出的一步如果你有建议提供！

```
$record = Database::Execute($sql);
if ($record->Count() > 0) {
    print '<div class="flexslider cf">'; 

    print '<ul class="controls">';
    while ($record->MoveNext()) {
        print '<li class="cf"><a href="#"><div class="thumb"><img src=' . $uploadFolder . $record->mk_left_image . ' alt=' . $record->mk_tagline . ' class="left" /></div>';
        print '<div class="text"><h3>' . $record->mk_name . '</h3><p>' . $record->mk_description . '</p></div></a></li>';
    }// end while
    print '</ul>';
    while ($record->MoveNext()){
        print '<ul class="slides">';
            print '<li><div class="img"><img src=' . $uploadFolder . $record->mk_left_image . ' alt=' . $record->mk_tagline . ' class="left" /></div>';
            print '<div class="text"><h2>'. $record->mk_name .'</h2><p>'. $record->mk_description .'</p><a href="#" class="mklink">Continue &raquo;</a></li></ul>'; 
    }// end while

    print '</ul></div>'; 
}
?>

<script type="text/javascript">
$(window).load(function() {
    $('.flexslider').flexslider({
        animation: "fade",
        manualControls: "ul.controls li"
    });
});
</script>

//------------------------------
public function MoveNext() {
//------------------------------
    if ($this->index < $this->count - 1) {
        $this->index++;
            return true;
} else {
    $this->index = $this->count;
        return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:33:03.553

找到函数`MoveNext()`后，我还找到了`Move()`、`MovePrevious()`和的函数`MoveFirst()`。我和他们一起玩，发现`MoveNext()`我的代码中的第二个应该是函数`MovePrevious()`并且让它工作得很好。我想我只是在stackoverflow上发了一个帖子，让我的大脑完成了这些步骤。有时，写下来找出答案比盯着显示器看 20 分钟更容易。嗯……

```
//------------------------------
public function MovePrevious() {
//------------------------------
    if ($this->index > 0) {
        $this->index--;
        return true;
    } else {
        $this->index = -1;
        return false;
    }
} 
```

# linux - .text 被分页的概率是多少？

> ID：13350706
> 
> 赞同：0
> 
> 时间：2012-11-12T20:04:28.053
> 
> 标签：linux, memory-management, operating-system

我正在尝试计算`.Text`从内存中分页的次数百分比。

AFAIK，假设我们有大量内存，这并不常见。

如果你能分享一些关于它的数据？

系统调用可能`mlockall`会有所帮助（尽管我的经验表明并非如此）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:08:45.370

分页算法基于许多参数，并且是特定于操作系统的。例如，在 Linux 中，有一个名为 swapiness 的参数会影响这一点。

通常，页面会在最近最少使用的基础上从 RAM 中删除。如果您没有配置交换空间，则 .text 页面更有可能从 RAM 中删除，因为数据页面很可能是脏的并且不可能（因为没有地方可以写入它们）。

如果您想尝试对此进行分析，可以尝试如下实验：

将您的程序放在一个磁盘上，将您的数据放在另一个磁盘上。在任何情况下都不要在第一张磁盘上放除代码以外的任何东西。现在，在有问题的负载下运行您的系统。

继续使用类似 sar 的实用程序来收集磁盘上的 IO 数据。如果您只加载一次程序，那么随着时间的推移，第一个磁盘上的 IO 应该非常接近针对文本页面完成的分页量。

将其与另一个磁盘上的数据 IO 进行比较，您就有了一个大概的答案。当然，您的数字会根据您的负载和内核参数而有很大差异。

# xml - Flash 播放器在 chrome 中加载 xml 的错误

> ID：13350708
> 
> 赞同：0
> 
> 时间：2012-11-12T20:04:31.553
> 
> 标签：xml, flash, google-chrome

我有一个使用 xml 加载团队页面的 Flash 播放器。它适用于所有浏览器，但不适用于 Chrome？

加载栏出现但在开始时停止。xml 文件的 url 是正确的。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:46:48.510

你在本地测试吗？除非您以特殊权限启动 chrome，否则 Chrome 会拒绝通过 flash 界面访问本地文件。我知道如何使用终端在 OSX 中执行此操作：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files 
```

我敢肯定Windows中也有等效的方法。

# javascript - 单轴静态（无滑块）图表（谷歌图表或其他）？

> ID：13350711
> 
> 赞同：0
> 
> 时间：2012-11-12T20:04:57.603
> 
> 标签：javascript, graph, charts, google-visualization, data-visualization

我需要将一系列值显示为类似于下图的图表：

![单轴图表](../Images/f7e47c6870d34ba7df39520a51c37cb5.png)

这个想法是有一个最小值和一个最大值。我试图显示的值可能介于两者之间。

我打算使用谷歌图表，他们的[条形图（图像）](https://developers.google.com/chart/interactive/docs/gallery/imagebarchart)几乎是我想要的，但在轴上**它同时显示`x`和`y`，**我似乎只想要`x`，或者也许`y`。（用已故马克朝圣者的话来说，“我没有很好地解释这一点。”）

谁能告诉我如何使用这个 Google 条形图（或另一个 Google 图表）或其他东西来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:00:00.330

这是我想出的（这使用了来自 Google Charts API 的条形图图像 - 如上所述 - 但不使用图表中的标签）：

```
<script type="text/javascript">
    google.load("visualization", "1", {packages:["imagebarchart"]});
    google.setOnLoadCallback(drawChart);
    function drawChart() {

        //Here we display a range from 10 million (10000000)
        //to 20 million (20000000), using a dummy value set
        //to 1 less than the low point of our range (in this
        //case, 9999999) and with the same color as the
        //chart's background. The dummy value will be stacked
        //on top of the value we want to show and blank out
        //the chart from 0 to where our range begins.

        var data = google.visualization.arrayToDataTable([
            ['', ''],
            [9999999, 20000000]
        ]);

        var chart = new google.visualization.ImageBarChart(document.getElementById("chart_div"));
        chart.draw(data, {showValueLabels: false, backgroundColor: '#f5f5f5',  width: 1000, height: 70, min: 100000, max: 50000000, colors: ['#f5f5f5', '#008000']});
    }
</script> 
```

（`chart_div`是页面加载时要被图表替换的 div；此代码基于[图表文档](https://google-developers.appspot.com/chart/interactive/docs/gallery/imagebarchart?hl=en)中的示例。）

显然，这个特定的条形图并不打算以这种方式使用，但它是我能找到的最接近我想要的东西。我希望这可以帮助遇到同样问题的人。

# matlab - 如何分段缩放 nurb 曲面

> ID：13350716
> 
> 赞同：1
> 
> 时间：2012-11-12T20:05:06.900
> 
> 标签：matlab, nurbs

我正在尝试找到一种在机翼各部分之间进行插值的方法。我有 n 个安装角度的机翼部分。但是，我还有一些代码可以为机翼几何形状提供 m 个比例因子，其中 m>n。我已经用机翼截面和扭曲构造了一个表面 nurb，现在需要一种方法在展向截面位置对其进行缩放。我知道我可以转换回笛卡尔点并对其进行缩放，但现在我有一个曲面，我不愿意这样做。有没有人知道我该怎么做。我正在使用[nurbstoolbox](http://www.mathworks.co.uk/matlabcentral/fileexchange/26390-nurbs-toolbox-by-d-m-spink)和[nrbloft](http://www.mathworks.co.uk/matlabcentral/fileexchange/14479-nrbloft) 任何建议将不胜感激。谢谢

# c++ - 将多个 .txt 文件读入向量

> ID：13350718
> 
> 赞同：0
> 
> 时间：2012-11-12T20:05:12.770
> 
> 标签：c++

再会，

我编写了以下函数，它是一些计算的一部分：

```
vector<double> read(){
    cout << "Add file to calculate, example: name.txt" << endl;
    char file;
    double numz;
    vector<double> myvector;
    char str[256];
    ifstream fin;
    cin.get (str,256);
    fin.open (str);
    while(fin.good()){

            fin>>numz;
            myvector.push_back(numz);

    }
    return myvector;

} 
```

此函数读取带有数字的单个 .txt 文件并将它们保存到返回的向量中，以便在其他函数中进行进一步计算。

该功能工作正常，但我想编辑它以使用保存的多个 .txt 文件，例如：

```
Write the names of the .txt files:
data10.txt data20.txt data30.txt
Size of the array is...: 60 
```

我整天都在寻找解决方案，但似乎没有任何效果。提前感谢您提供如何解决此功能的任何提示和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:10:36.053

`istringstream`您可以从输入行创建一个并使用它来提取文件名：

```
//...
cin.get(str, 256);
string str2(str);
istringstream input(str2);
string filename;
while (input >> filename) {
  istream fin(filename.c_str());
  //... process as before
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:14:13.570

我认为问题出在返回部分。如果是这样，您可以考虑返回指向vector.ie的指针的向量

```
vector<vector<double>*> read() 
```

# r - 从嵌入数据框中的列表中获取虚拟 (T/F) 变量

> ID：13350727
> 
> 赞同：3
> 
> 时间：2012-11-12T20:05:53.707
> 
> 标签：r, dataframe, reduction

我有一个 data.frame，其中的单元格包含一个术语列表。

我希望为该列表中找到的每个术语生成一个新变量，指示该术语是否存在于该给定单元格中。

我在 data.frame 中有多个不同的此类实例，并且不知道列表的组成。

一个示例数据框

```
require(plyr)

example<-data.frame(groups=letters)

example<-adply(example,
               1,
               function(x) data.frame(value=t(list(sample(LETTERS, 4)))))

    groups      value
1      a F, Y, N, X
2      b N, D, B, Y
3      c W, J, S, U
4      d I, S, N, A
5      e S, Z, Y, A
6      f O, R, J, A 
```

由此，我希望获得

```
group     F     N     ...
1     A  TRUE  TRUE  ...
2     B FALSE  TRUE  ...
3     C FALSE FALSE  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:18:33.120

根据您的要求，这里是函数形式

**例子**

```
myMatrix <- checkValues(example, makeMatrix=TRUE)
myMatrix

#        A     B     C     D     E     F  ...
#   a FALSE FALSE FALSE FALSE FALSE FALSE ...
#   b FALSE FALSE FALSE FALSE FALSE  TRUE ...
#   c FALSE FALSE FALSE  TRUE FALSE FALSE ...
#   d FALSE  TRUE FALSE  TRUE FALSE FALSE ...
#   e  TRUE FALSE FALSE FALSE FALSE FALSE ...
#   .
#   .
#   . 
```

**功能**：

```
checkValues <- function(myDF, makeMatrix=FALSE, makeUnique=TRUE, sort=TRUE)  {
  # myDF should be a data frame containing columns `group` and `value`
  # if `makeMatrix` is T, will convert the list into a long matrix
  # `makeUnique`  and  `sort` only apply if `makeMatrix` is TRUE
  #   (otherwise, they are ignored)

  res<- 
  lapply(myDF$value, function(L1) 
      t(sapply(myDF$value, function(L2) L1 %in% L2 ))
  )

  # Make the names purtty 
  names(res) <- myDF$group

  for (i in 1:length(res))
      dimnames(res[[i]]) <- list(myDF$group, myDF$value[[i]])

  # convert the list to matrix
  if (makeMatrix)  {  
    res <- do.call(cbind, res)

    # remove duplicates, if required
    if (makeUnique) 
      res <- res[, !duplicated(res, MARGIN=2)]

    # order columns, if required
    if (sort)
      res <- res[, order(colnames(res))]
  }

  return(res)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T23:19:24.320

这是一个`data.table`解决`reshape2`方案

```
library(data.table)
EX <- data.table(example)

data.table(dcast(EX[,list(value = unlist(value)),by=groups], groups~value))[,lapply(.SD, is.na),by = groups] 
```

解释步骤

*   `EX[,list(value = unlist(value)),by=groups]`以长格式创建 data.table（列表值成为单个列

*   `dcast(....)`转换为具有`columns`A `,...,`Z `but is an ugly mess of`NA` 值的宽格式

*   `data.table()[,lapply(.SD), by = groups]`按组遍历所有列并转换为逻辑值。不是必需的`by`（并且会使它稍微慢一些），但是您必须以不同的方式处理组列，我不会被打扰。

* * *

# 如果您事先知道可用元素

如果您事先知道列名是什么，那么这是使用的简单替代方法`dcast`

显然，您将替换`LETTERS`为可能值的向量。

```
EX[, setNames(as.list(LETTERS%in% unlist(value)), LETTERS),by = groups] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T15:10:28.767

感谢这里的输入，我还创建了一个 require(plyr) 解决方案。

不如这两种解决方案优雅，但出于某种原因，我仍然发现通读 plyr 解决方案更容易。

创建一个可以产生单个虚拟变量的函数

```
single.value.to.dummy<-function(value.name, list.of.lists){
  ldply(.data=list.of.lists,
        function(list.element){ dummy<-value.name %in% list.element
                              names(dummy)<-value.name
                              return(dummy)
        })} 
```

将此函数应用于列表列表中的所有唯一值

```
list.of.lists.to.dummy<-function(list.of.lists){

#Extract unique values
  value.names<-unique(unlist(list.of.lists))

  dummy.frame<-llply(.data=value.names,
                      function(value.name){
                        dummy<-single.value.to.dummy(value.name, list.of.lists)
                        return(dummy)})

  return(data.frame(dummy.frame))
}

example<-cbind(example, list.of.lists.to.dummy(example$value))

groups      value     T     S     P     O     U     A     C     B     N     V     D     H     Y     F
1      a T, S, P, O  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
2      b U, A, C, B FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE
3      c S, N, V, D FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE
4      d H, Y, F, X FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE
5      e M, Y, O, X FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
6      f Y, A, K, S FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE 
```

# python - 按类别列表搜索 - django

> ID：13350730
> 
> 赞同：-3
> 
> 时间：2012-11-12T20:06:09.407
> 
> 标签：python, django

我有简单的搜索应用程序我如何按类别搜索使用`<select><option></select>`

结果 ：

```
results = Adv.objects.filter(title__icontains=query).filter(cate__name__icontains=query) 
```

这是代码：

楷模

```
class Category(models.Model):
    slug = models.SlugField(unique=True)
    name = models.CharField(max_length=60)

class Adv(models.Model):
    title = models.CharField(max_length=60)
    pub_date = models.DateTimeField(auto_now_add=True)
    namecar = models.CharField(max_length=60)
    cate = models.ForeignKey(Category) 
```

看法

```
def search(request):
    if 'q' in request.GET:
      query = request.GET['q']
      results = Adv.objects.filter(title__icontains=query).filter(cate__name__icontains=query)
   #   print results.query 
    else:
      query = ""
      results = None
    template = loader.get_template('search/search1.html')
    context = Context({ 'query': query, 'results': results, 'city_list': ChoiceCity.objects.all() })
    response = template.render(context)
    return HttpResponse(response) 
```

网址

```
(r'^search1/$', 'car.search.views.search'), 
```

模板

```
<form method="get" action="/search1/">
<p><label for="id_q">Search:</label>
<input type="text" name="q" id="id_q" value="{{ query }}" />
<input type="submit" value="Submit" /></p>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:28:34.620

我想您希望能够根据类别过滤结果。我建议在您的模板中添加一个类别选择下拉菜单。这将要求您将类别对象发送到模板中，以便可以呈现

```
<form method="get" action="/search1/">
<p><label for="id_q">Search:</label>
<input type="text" name="q" id="id_q" value="{{ query }}" />
<select name="category">
  {% for category in categories %}
    <option value="{{category.id}}">{{category.name}}</option>
  {% endfor %}  
</select>
<input type="submit" value="Submit" /></p>
</form>

 def search(request):
        if 'q' in request.GET:
          #Get the selected category id 
          sel_category = request.GET.get('category', None)
          #If it exists, get the category object
          if sel_category: 
                category = get_object_or_404(Category, pk = sel_category)
          query = request.GET['q']
          results = Adv.objects.filter(title__icontains=query)
          #If category objects exists filter the result set based on that
          if category:
                    results =results.filter(cate__name__icontains=category.name)
       #   print results.query 
        else:
          query = ""
          results = None
          categories = Category.objects.all()
        template = loader.get_template('search/search1.html')
        context = Context({ 'query': query, 'results': results, 'city_list': ChoiceCity.objects.all(), 'categories':categories })
        response = template.render(context)
        return HttpResponse(response) 
```

# hadoop - hadoop slaves文件中的机架号？

> ID：13350738
> 
> 赞同：0
> 
> 时间：2012-11-12T20:07:00.073
> 
> 标签：hadoop

在 Hadoop 配置目录下的 slaves 文件中，我记得机架号也可以分配，但我很难确认或找到示例。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T08:15:57.283

**从属**文件不包含机架号，它有一个机器列表（每行一个），每个机器运行一个数据节点和一个任务跟踪器。可以使用脚本或命令使 Hadoop 具有机架感知能力，[这里](http://hadoop.apache.org/docs/stable/cluster_setup.html#Hadoop+Rack+Awareness)有更多信息。

# spring - 集群环境中的 Toplink 异常

> ID：13350743
> 
> 赞同：1
> 
> 时间：2012-11-12T20:07:32.210
> 
> 标签：spring, cluster-computing, toplink

***我的应用程序使用带有 Spring 的 Toplink 并且工作正常......但是当在集群环境中测试应用程序时它抛出异常......当我关闭服务节点时，我有 2 个服务器节点（n1 和 n2）（假设 n1）它开始在下面抛出异常...而 n2 正在处理请求 ***

调试 [controller.administrator.ManageCustomFieldsController] 试图在 oracle.toplink.internal.indirection.QueryBasedValueHolder.instantiate(QueryBasedValueHolder.java:62) 在 oracle.toplink 处查找异常超类 [java.lang.Exception] java.lang.NullPointerException 的处理程序.internal.indirection.QueryBasedValueHolder.instantiate(QueryBasedValueHolder.java:55) 在 oracle.toplink.internal.indirection.DatabaseValueHolder.getValue(DatabaseValueHolder.java:61) 在 oracle.toplink.indirection.IndirectList.buildDelegate(IndirectList.java:202 ) 在 oracle.toplink.indirection.IndirectList.getDelegate(IndirectList.java:359) 在 oracle.toplink.indirection.IndirectList.isEmpty(IndirectList.java:444) 在 com.soft.web.controller.administrator.ManageCustomFieldsController。转换（ManageCustomFieldsController.java:540）

有什么想法吗...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:47:01.270

看起来您将持久对象从一台服务器序列化到另一台服务器。当你这样做时，任何 LAZY 关系都会变得分离。

您需要确保已实例化所需的任何关系。或者从数据库中重新获取对象。

# regex - 西尔斯信用卡以 50 开头——正则表达式失败

> ID：13350745
> 
> 赞同：0
> 
> 时间：2012-11-12T20:07:36.530
> 
> 标签：regex, credit-card

大多数信用卡正则表达式将万事达卡列为以 5 开头，然后将 1-5 作为第二个数字，尽管这个来自 sears，前四个数字是 5049。我真的不想在不知道是否使用任何其他非约定的情况下更改正则表达式。有谁知道更改它是否非常安全，或者是否还需要进行其他更改？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:11:20.997

你的正则表达式有问题:-) **[编辑：如果你想支持西尔斯卡，这是你问题的前提]**

维基百科上有一个准确的发行人编号列表：

[http://en.wikipedia.org/wiki/List_of_Issuer_Identification_Numbers](http://en.wikipedia.org/wiki/List_of_Issuer_Identification_Numbers)

它包括西尔斯的 5049。

我建议为每个列出的发行人编号创建一个或多个单元测试，并使用这些单元测试验证您的 RegEx。

**更新**

有很多被广泛接受的信用卡以“50”开头，所以如果你的 RegEx 断言第二个数字在 1-5 范围内，它仍然是错误的。

示例（来自 Wiki 链接）：

```
500235 National Bank of Canada
500766 Bank of Montreal 
```

如果您出售的商品允许出售给公共福利接受者（例如福利接受者），则还包括 EBT 卡，例如：

```
507683 Missouri EBT Card 
```

# vim - Vim 括号和分号高亮

> ID：13350747
> 
> 赞同：5
> 
> 时间：2012-11-12T20:07:43.543
> 
> 标签：vim, syntax-highlighting

有时 vim 会用红色突出显示括号或分号。什么插件突出了它？这是否意味着这个地方有错误？请看图片。

![在此处输入图像描述](../Images/b796238e721f7a2df545bc732c0ab40b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:45:39.413

是的，对于默认的语法高亮显示，这意味着 vim 已经标记了该位置的错误。查看`:help syntax`更多选项。正如@romainl 所说，其他插件可能会影响您看到的内容。

我有一个普通的 Cygwin 版本正在运行，它会将你的 css 片段中的一些括号标记为无效，因为缺少左/右括号或 vim 定义的语法错误。

# perl - Perl cgi 脚本使用 http put 接收二进制文件

> ID：13350749
> 
> 赞同：-4
> 
> 时间：2012-11-12T20:07:55.680
> 
> 标签：perl

我想编写一个 perl cgi 脚本来接收使用 http put 方法发送的二进制文件。该脚本将读取文件的二进制内容并将其存储在文件夹中。

有人可以分享代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:24:34.110

[CGI](http://search.cpan.org/perldoc?CGI)模块可以处理这个问题。

```
my $data = $cgi->param('PUTDATA'); 
```

# google-chrome - Bootstrap + Chrome 问题，突出显示元素改变 bg 颜色

> ID：13350750
> 
> 赞同：1
> 
> 时间：2012-11-12T20:08:05.890
> 
> 标签：google-chrome, twitter-bootstrap

当我将鼠标悬停或突出显示对象时，我在 Chrome 中得到了奇怪的背景伪影。我在 Safari 或 Firefox 中不会发生这种情况。

[http://charleslawportfolio.com/new/](http://charleslawportfolio.com/new/)

不知道发生了什么，但只有当我在页脚中包含我的按钮时才会发生。如果我删除这些按钮，这个问题就不再存在了。

我正在使用 Bootstrap，但我已经无数次地查看了代码，但无法弄清楚。

这是问题的图片 [http://i.stack.imgur.com/W3MOk.png](http://i.stack.imgur.com/W3MOk.png)

任何线索将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:11:08.567

您的页面缺少正确显示所需的 DOCTYPE；

> 需要 HTML5 文档类型
> 
> Bootstrap 使用需要使用 HTML5 文档类型的某些 HTML 元素和 CSS 属性。将它包含在所有项目的开头。

从[文档](http://twitter.github.com/bootstrap/scaffolding.html)。

另外，请确保验证您的页面充满了重复的 ID。

# c# - 如何使用 SqlCommand SELECT INTO？（带有强制转换、舍入和 isnull）

> ID：13350751
> 
> 赞同：-1
> 
> 时间：2012-11-12T20:08:06.817
> 
> 标签：c#, sql, sql-server-2008

我编写了这个 SQL 语句并使用 SQL Server Management Studio 对其进行了测试。但是我不确定如何用 C# 来做到这一点。我试过了`SqlCommand.ExecuteNonQuery();`，但没有用。我错过了什么？

C＃：

```
string query = "SELECT ISNULL(CAST(CustId AS INT), 0) AS AccountNumber, 
                       ISNULL(CAST(CompanyName AS NVARCHAR),'') AS Company,
                       ISNULL(CAST(CustName AS NVARCHAR),'') AS FirstName, 
                       ISNULL(CAST(LastName AS NVARCHAR),'') AS LastName, 
                       ISNULL(CAST(Email AS NVARCHAR),'') AS EmailAddress,  
                       ISNULL(CAST(ROUND(CustLoyaltyPoints,0),0) AS NVARCHAR) AS CustomText1 
                INTO db2.dbo.CustomerTemp 
                FROM db1.dbo.Customer;";

connection = new SqlConnection(strConnect); //connection already defined above
SqlCommand command = new SqlCommand(query, connection); 

command.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:46:48.857

您需要在您之前添加此行`ExecuteNonQuery`：

```
connection.Open(); 
```

所以代码应该是这样的：

```
connection = new SqlConnection(strConnect); //connection already defined above
connection.Open();

SqlCommand command = new SqlCommand(query, connection); 
command.ExecuteNonQuery(); 
```

如果您仍然遇到错误，请发布引发的特定异常和消息。HTH...

# objective-c - StackScrollView 子视图没有被删除

> ID：13350754
> 
> 赞同：0
> 
> 时间：2012-11-12T20:08:17.727
> 
> 标签：objective-c, ios, uiviewcontroller

我在我的 iPad 应用程序中使用[StackScrollView iOS 库。](https://github.com/raweng/StackScrollView)我的主视图最初由一个表格组成。当用户选择一个单元格时，会创建一个视图控制器并将其添加到堆栈中，如下所示：

```
DualChartViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"DualChartPageVC"];
[vc setObj:newObj];
[((MasteriPadViewController *)[AppDelegate sharedDelegate].mainVC).stackScrollViewController addViewInSlider:vc invokeByController:self isStackStartView:FALSE]; 
```

这在用户第一次选择单元格时按预期工作；但是，DualChart 视图永远不会被删除，因此在随后的选择中，它们只是堆叠在一起（迫使用户多次滑动它们）。

我应该如何正确地取消分配这些视图，以便添加到我的 StackScrollViewController（表和 DualChartViewController）的子视图永远不会超过两个？

任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T20:22:08.017

弄清楚了。

尽管我的 StackViewController 对象正在从它的 viewControllersStack 数组中删除我的视图控制器，但由于某种原因它没有从 slideViews 的子视图中删除它。我修改了我的 didSelectCell 方法，以便如果它不是第一个选择，我会在添加新视图之前从 slideViews 的子视图中删除最后一个对象。现在它完美地工作了！

# jquery - 是否可以通过 jquery 获取 struts 标签

> ID：13350755
> 
> 赞同：0
> 
> 时间：2012-11-12T20:08:18.013
> 
> 标签：jquery, struts2

对于 html 元素，要在 jquery 中获取标签，我们使用`$('tagname')`. strurs2 标签可以这样做吗？例如：如果我们正在使用`<sj:accordion >`我们如何获得所有`<sj:accordionItem >`的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:09:37.150

不，您不能通过服务器端标签进行选择。但是，您可以在`class/id/traversing`这些元素在浏览器上呈现后通过这些元素进行选择。

您的服务器端代码将在返回到浏览器之前编译和生成为 HTML。但是您的 jQuery 在客户端浏览器上并已初始化，仅在浏览器上呈现后使用。所以它无法知道你的服务器代码是怎样的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:57:27.867

您可以通过设置标签的`id`属性（例如）然后在脚本中选择所有手风琴项。`<sj:accordion>``<sj:accordion id="accord">``$("#accord li")`

# ruby - 在 Ruby 中构建异步队列

> ID：13350757
> 
> 赞同：0
> 
> 时间：2012-11-12T20:08:30.410
> 
> 标签：ruby, asynchronous, concurrency, threadpool, eventmachine

我需要在进程中处理队列中的作业，并异步执行 IO。这很简单。问题是*这些作业可以将其他项目添加到队列*中。

我想我一直在摆弄这个问题太久了，所以我的大脑一片混乱——这应该不会太难。我不断想出一个非此即彼的情况：

1.  队列可以异步执行作业，然后可以加入结果。
2.  队列可以同步执行作业，直到最后一个完成并且队列为空。

我一直在摆弄从 EventMachine 和 Goliath（两者都可以使用`EM::HttpRequest`）到赛璐珞（实际上从来没有用它来构建东西），以及使用 Fibers 编写枚举器的所有东西。不过，我的大脑已经炸了。

简单地说，我想要的是能够做到这一点：

```
items = [1,2,3]
items.each do |item|
  if item.has_particular_condition? 
    items << item.process_one_way
  elsif item.other_condition?
    items << item.process_another_way
  # ...
  end
end

#=> [1,2,3,4,5,6] 
```

...其中4、5和6都是处理集合中原始项目的结果，而7、8和9是处理4、5和6的结果。我不需要担心无限期处理队列，因为我正在处理的数据将在几次迭代后结束。

欢迎高层次的指导、评论、其他库的链接等，以及低层次的实现代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:36:35.977

我过去也有类似的要求，而您需要的是一个可靠的、高性能的工作队列。我建议您查看一年多前我发现的[beanstalkd](http://kr.github.com/beanstalkd/)，它一直在用 ruby​​ 可靠地处理成千上万个工作。

特别是，我已经开始围绕 beanstalkd 开发可靠的 ruby​​ 库。特别是，一定要检查[backburner](http://nesquena.github.com/backburner/)，它是使用 beanstalkd 的 ruby​​ 中的生产就绪工作队列。语法和设置很简单，定义作业如何快速处理，处理作业失败和重试都是内置的，作业调度等等。

如果您有任何问题，请告诉我，但我认为 beanstalkd 和 backburner 非常适合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:34:07.477

我最终实现了一些不太理想的东西——基本上只是将一个 EM Fiber Iterator 包装在一个循环中，一旦没有新的结果排队就会终止。

```
require 'set'

class SetRunner
  def initialize(seed_queue)
    @results = seed_queue.to_set
  end

  def run
    begin
      yield last_loop_results, result_bucket
    end until new_loop_results.empty?

    return @results
  end

  def last_loop_results
    result_bucket.shift(result_bucket.count)
  end

  def result_bucket
    @result_bucket ||= @results.to_a
  end

  def new_loop_results
    # .add? returns nil if already in the set
    result_bucket.each { |item| @results.add? item }.compact
  end
end 
```

然后，将它与 EventMachine 一起使用：

```
queue = [1,2,3]
results = SetRunner.new(queue).run do |set, output|
  EM::Synchrony::FiberIterator.new(set, 3).each do |item|
    output.push(item + 3) if item <= 6
  end
end
# => [1,2,3,4,5,6,7,8,9] 
```

然后每个集合将使用传递给 FiberIterator 的并发级别运行，但每个集合的结果将在外部 SetRunner 循环的下一次迭代中运行。

# android - 将数据从 Android 保存到 SQL Server 的解决方案有哪些？

> ID：13350763
> 
> 赞同：0
> 
> 时间：2012-11-12T20:08:46.890
> 
> 标签：android, sql, sql-server, web-services

我会知道将数据从 android 应用程序保存到远程 sql 服务器的可能系统有多少和哪些。我只知道一种方式：Web 服务。还有其他系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:11:03.640

我自己使用 PHP 脚本和 HTTP 请求。您不希望应用程序与服务器建立直接连接，因为这需要应用程序中存储的数据库用户名和密码。使用 POST 或 GET 方法发布数据，然后在 PHP 中，回显脚本的结果，然后在您的应用程序中对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:16:16.460

REST + JSON。查看它们： [http](http://en.wikipedia.org/wiki/Representational_state_transfer) ://en.wikipedia.org/wiki/Representational_state_transfer 和 [http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)

# c - 字符串代码显示错误？

> ID：13350768
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:20.173
> 
> 标签：c, string

```
#include <stdio.h>    

int main()  
{  
  char s[] = "churchgate: no church no gate";  
  char t[25];  
  char *ss, *tt;  
  ss = s;  
  while (*ss != '\0')  
    *tt++ = *ss++;  
  printf("%s\n", t);  
  return 0;  
} 
```

这段代码有什么问题？当我尝试运行它时。它显示了一些垃圾值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:11:00.573

你从不指向`tt`任何东西。您需要将其指向`t`：

```
tt=t; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T20:12:04.787

1.  你忘了`tt`初始化`t`
2.  你的数组太小了。
3.  你忘了空终止你的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T20:15:41.173

但是，在内存中试验任意位置可能会很有趣，如果您想要定义的行为，则必须定义访问目标。

在对它进行操作之前，必须将 tt 指向内存空间中的某个已定义区域。

```
*tt++ = *ss++; 
```

`s`是 30 个字节。`t`，如果那是您要使用的那个`tt`是 25。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:33:44.507

几种可能性，例如：

```
#include <stdio.h>    

int main()  
{  
  char s[] = "churchgate: no church no gate";  
  char t[25];  
  char *ss, *tt;  
  for (ss=s, tt=t; *ss != '\0' && tt-t < sizeof(t)-1; ss++, tt++)
    *tt = *ss;
  }
  *tt = '\0';

  // or just use strncpy.
  // strncpy doesn't copy the \0 if the size is reached,
  // so account for that.
  strncpy(t, s, sizeof(t)-1);
  t[sizeof(t)-1] = '\0';

  printf("%s\n", t);
  return 0;  
} 
```

您从其他答案中知道您的主要问题：

1.  `tt`未初始化
2.  无边界检查`t`
3.  复制后没有0终止

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T20:14:03.567

几个问题：

1) "tt" 从未被初始化，并且

2) "s[]" 可能是*只读*的（取决于编译器/平台）！！！！！！

建议：

```
#include <stdio.h>

#define MAX_STRING 80

int 
main()  
{  
  char s[MAX_STRING] = "churchgate: no church no gate";
  char t[MAX_STRING];  
  char *ss = s, *tt = t;
  while (*ss)  
    *tt++ = *ss++;
  *tt = '\0'; 
  printf("%s\n", t);  
  return 0;  
} 
```

# java - 添加孩子时，Hibernate会自动添加父母吗？

> ID：13350769
> 
> 赞同：1
> 
> 时间：2012-11-12T20:09:23.037
> 
> 标签：java, hibernate, hibernate-mapping

我有以下类结构：

```
public class User{
    Set<UserAttribute> userAttributes;
}

public class Role implements/extends UserAttribute {
    Set<PermissionAssignment> permissionAssignments;
}

public class PermissionAssignment {
    Permission permission;
}

public class Permission implements/extends UserAttribute {
} 
```

因此，用户具有集合或属性。属性可以是角色或权限。属性存储在同一个表中，我使用鉴别器。然后该角色具有一组权限分配并且权限分配具有权限。假设我在 Hibernate 会话中有 User 类的实例。如果我想将新的权限分配添加到权限分配集中，我必须做什么？创建权限分配是否足够，然后创建权限并调用 permissionAssignments.add(permission) 然后将创建所有必要的行 - 权限分配和权限，还是我必须将创建的权限添加到 userAttributes 然后创建权限分配并添加它到权限分配设置？那么当我不将它添加到 userAttributes 集时，基本上 Hibernate 会在数据库中创建权限行吗？

如果没有，当我添加权限分配并更新用户时会发生什么？Hibernate 会抛出任何显示为什么不添加它的异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:44:59.447

在您`Role`添加一种方法中添加`PermissionAssignment`如下：

```
public void addPermissionAssignment(PermissionAssignment permissionAssignment){
   if(this.permissionAssigments == null){
       this.permissionAssigments = new HashSet<PermissionAssigment>();
   }
   permissionAssignment.setRole(this);//this will set the parent
   this.permissionAssigmentsadd(permissionAssignment);
} 
```

使用上述方法添加`PermissionAssignment`到`Role`.

Hibernate 将负责其余的工作。即创建`Role`和设置生成的主键作为外键`PermissionAssignment`。

# wordpress - Wordpress 自定义帖子缩略图未显示在主页上

> ID：13350773
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:34.783
> 
> 标签：wordpress, thumbnails, custom-post-type

这不是关于特色图像元字段的问题。我试图找到答案，但我尝试的每次搜索都显示人们试图将“特色图片”元添加到他们的自定义帖子类型中。我为我的主题和自定义帖子类型启用了该功能。它似乎工作得很好。我设置了一个“特色图片”，我在编辑帖子时看到了它。我的主题是一个 21 岁的自定义孩子。

在我的主页上，我正在显示最近的条目（“帖子”类型和“自定义帖子”类型），标题、摘录和左侧的缩略图。缩略图对于我的所有“帖子”类型都正确显示，但不适用于我的“自定义帖子”类型。我不确定我需要在哪里查看或需要添加什么来获取自定义帖子以显示缩略图。

添加代码：这是在我的自定义主题的“content.php”中。它主要是从 211 中挪用的，但我想我做了一些小的改动。据我所知，“如果”对于自定义帖子类型来说是不正确的。

```
      $thumbnails = get_posts('numberposts=5');
      foreach ($thumbnails 作为 $thumbnail) {
        if ( has_post_thumbnail($thumbnail->ID) && $thumbnail->ID == $id) {
          回声'ID）。'" 标题="' 。esc_attr($thumbnail->post_title)。'">'; echo get_the_post_thumbnail($id, 'thumbnail', array('class' => 'alignleft') );
          回声'';
        }
      }

```

更新：问题看起来与

```
    $thumbnails = get_posts('numberposts=5');

```

它只是从“帖子”类型中提取，因此无法检查我的“自定义帖子”类型。当我按如下更改代码时，我得到了正确的缩略图，但是没有任何“发布”缩略图起作用。

```
    $args = 数组（
        'numberposts' => 5,
        'post_type' => 'pnw_picture-post');

      $thumbnails = get_posts($args);

```

所以我想解决方案是在一个查询中提取这两种类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:14:20.007

您可以发布您认为应该返回帖子缩略图的代码吗？

您可能只是在寻找WP Codex中的[the_post_thumbnail](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:48:41.787

我仔细查看了第 211 个 content.php - 看起来我在我的孩子 content.php 中放入的任何内容都完全不同。我没有意识到我已经改变了这么多的代码。

这是用于拉入两种帖子类型的修改后的工作代码：

```
    $args = 数组（
        'numberposts' => 5,
        'post_type' => 数组 ('post', 'custom-post'));

      $thumbnails = get_posts($args);

      foreach ($thumbnails 作为 $thumbnail) {
        if ( has_post_thumbnail($thumbnail->ID) && $thumbnail->ID == $id) {
          回声'ID）。'" 标题="' 。esc_attr($thumbnail->post_title)。'">'; echo get_the_post_thumbnail($id, 'thumbnail', array('class' => 'alignleft') );
          回声'';
        }
      }

```

# c - OpenGL 4\. X Error of failed request: BadAlloc (insufficient resources for operation)

> ID：13350776
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:42.193
> 
> 标签：c, opengl-4

当我尝试在 OpenGL 4 中编译程序时遇到一个问题。问题是下一个：

```
X Error of failed request:  BadAlloc (insufficient resources for operation)
   Major opcode of failed request:  136 (GLX)
   Minor opcode of failed request:  34 ()
   Serial number of failed request:  40
   Current serial number in output stream:  41 
```

我正在使用 Debian Wheezy。

代码是 OpenGL 书 http: [//openglbook-sa​​mples.googlecode.com/svn/trunk/Chapter%201/](http://openglbook-samples.googlecode.com/svn/trunk/Chapter%201/)

为什么是这样？。

可能的解决方案是什么？

您需要的信息，请索取。

非常感谢您的回答。

# image - 如何允许用户为其个人资料添加图像

> ID：13350781
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:54.360
> 
> 标签：image, upload

我想知道允许用户在我的网站上将个人资料图片添加到他们的个人资料中的常用方法是什么。我正在创建一个社交网络类型的网站，用户可以在其中注册和维护他们的个人资料。就像我们知道用户可以为他们的个人资料上传个人资料图片一样，这应该与他们的个人资料信息一起成为数据库的一部分。但这通常是如何在前端使用 html5/jquery+ajax+php 完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:12:53.527

你的问题很模糊。假设：

您在谈论基于 Web 的系统；您有一个包含用户的数据库系统；

创建一个表单以允许用户上传文件，将该文件保存在特定位置，并将其命名为独特的名称。将唯一名称保存到用户配置文件中的字段。每次加载该配置文件时，请使用文件的唯一名称将其设置为配置文件图片。

请细化您的问题以包括语言和更多细节。

**编辑**

如前所述，创建一个允许用户上传图片的表单：

```
<form action="upload.php" method="post">
    <input type="file" name="file" id="file"/>
</form> 
```

在 php 脚本中，获取您上传的文件并将其移动到具有唯一名称的永久存储位置：

```
<?php
    $pathToImage = "/new/file/path/unique/345908.png";
    move_uploaded_files($_FILES['file']['tmp_name'], $pathToImage);
?> 
```

使用 SQL 更改用户配置文件中的唯一名称

```
<?php
    mysql_query('UPDATE users SET profile_image = ".$pathToImage." WHERE username="matt"');
?> 
```

# ruby-on-rails-3 - Trying to implement an Ajax function rails 3 .load()

> ID：13350782
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:57.047
> 
> 标签：ruby-on-rails-3, jquery

This is my first time trying to implement an Ajax call in rails 3, though I am using the .load function ( I still hope this is Ajax otherwise im understanding this incorrectly)

So i have a search form that returns results via a get request which renders on a different page, i would like the results to appear on the same page as the search form

```
<%= form_tag({:controller => 'search', :action => 'search'}, {:method => 'get'})  do |select| %>
<%= label_tag :search, "Enter Keywords Here" %>
<%= text_field_tag :search, params[:search] %>
 (I have shortened the form)
<%= submit_tag "Search", :class => "searchbutton" %>
<% end %> 
```

Jquery/Ajax call

```
$(document).ready(function() {
$('.searchbutton').click(function() {
$('#searchres').load('shared/searchresults');

});

}); 
```

View

```
<h3>Search Recipes here</h3>
  <%= render 'shared/searchrecipes' %>
    <div id ="searchres">
</div> 
```

What am i doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:36:08.393

Due to this being an AJAX call, you need to add `remote: true` besides `method: :get`, getting an html parameter hash like this:

```
{:method => 'get', :remote => true} 
```

When Rails finda remote call, it prevents the default automagically. Otherwise, you would need to modify you javascript like this:

```
$(document).ready(function() {
  $('.searchbutton').click(function(evt) {
    $('#searchres').load('shared/searchresults');
    evt.preventDefault();
  });
}); 
```

# powershell - Exchange Powershell：公用文件夹中的联系人

> ID：13350783
> 
> 赞同：0
> 
> 时间：2012-11-12T20:09:58.800
> 
> 标签：powershell, contacts, powershell-2.0, exchange-server, exchange-server-2010

Exchange 命令行管理程序：

```
[PS] C:\Windows\system32>$AddressBook = Get-PublicFolderItemStatistics -Identity "\Shared Company Address Book"

[PS] C:\Windows\system32>$AddressBook [0] | format-list

RunspaceId           : d8e95055-1f3e-4e7f-a1fc-d5b97ecbcb96
ServerName           : MAILMAN
DatabaseName         : Public Folder Database 0524088380
Subject              : John Q User
PublicFolderName     : \Company Address Book
LastModificationTime : 11/12/2012 2:57:49 PM
CreationTime         : 11/12/2012 2:56:28 PM
HasAttachments       : False
ItemType             : IPM.Contact
MessageSize          : 6.598 KB (6,756 bytes)
Identity             : 000000001A447390AA6611CD9BC800AA002FC45A0900580787449ABF5E4891DD89178938242C0000000250AE00001BE1
                       A5309D57D5439914FD70BDC745C100000B8942FD0000
MapiIdentity         : 000000001A447390AA6611CD9BC800AA002FC45A0900580787449ABF5E4891DD89178938242C0000000250AE00001BE1
                       A5309D57D5439914FD70BDC745C100000B8942FD0000
OriginatingServer    : mailman.company.com
IsValid              : True

[PS] C:\Windows\system32> 
```

好的... 我正在尝试导出 Exchange Server 2010 联系人列表中的联系人。对于我这个世界，我无法弄清楚如何从这个愚蠢的事情中获取“数据”。

如果我这样做 $AddressBook | Format-List，它列出了所有的联系人，所以我知道我在正确的范围内。

如何从该列表中获取所有信息？姓氏、名字、电子邮件地址、商务电话等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-09T07:11:13.820

这是一个旧帖子，但我有几天同样的问题，无法弄清楚。因此，我选择使用 @WernerCD 使用的道路，并希望添加我的 PowerShell 脚本，以在您决定走这条道路的情况下为您提供帮助。

在开始之前，请允许我解释一下我的问题。我们有多个包含联系人的文件夹。这些联系人包含由于迁移问题而未添加到其包含文件夹的用户定义字段。当我们使用 Outlook 时，我们需要能够在当前视图中看到这些字段。但是，当我们尝试添加 UDF 列时，它只允许我们使用“文件夹中的用户定义字段”，它是空的。

下面是 PowerShell 脚本，它将检查 Outlook 中的公用文件夹（及其子文件夹），检查每个联系人 UserProperties（相当于 UDF），将它们放入一个数组中，然后它将检查每个联系人的 UDF 是否存在于其包含的文件夹中（UserDefinedProperties )，如果它不存在，它会将其添加为没有值的文本字段。

请记住，我们所有的联系人文件夹都在一个名为“共享联系人文件夹”的文件夹下。

# 代码

```
# Connection to Outlook
$Outlook       = New-Object -com Outlook.Application 
$Namespace     = $outlook.GetNamespace("MAPI") 

# "Location" of public folders (Change me@example.com)
$PublicFolder  = $Namespace.Folders.Item("Public Folders - me@example.com")
$PublicFolders = $PublicFolder.Folders.Item("All Public Folders")

# Folder that you would like to check. We will check Shared Contacts under Shared Contacts Folder
$SharedContactsFolder   = $PublicFolders.Folders.Item("Shared Contacts Folder")
$SharedContacts   = $SharedContactsFolder.Folders.Item("Shared Contacts")

Write-Host ("<----------------------------------------------------------->") -foreground Yellow

function CheckContacts($MyFolder){

    # Check if this folder has subfolder
    If ( $MyFolder.Folders.Count -gt 0) {

        Write-Host ("Folder '" + $MyFolder.Name + "' contains subfolders ("  + $MyFolder.Folders.Count + ")")  -BackgroundColor Yellow -foreground DarkBlue

        Foreach ( $Subfolder in $MyFolder.Folders ) {

            CheckContacts($Subfolder)

        }

    }

    Write-Host ("Working on folder: " + $MyFolder.Name)  -BackgroundColor White -foreground DarkBlue

    $All_UDF = @()

    # Check User Defined Fields (UDF) for each contact and add them to array
    foreach ( $Contacts in $MyFolder.Items ) {

        foreach ( $UDF in $Contacts.UserProperties ) {

            # Check if field was previously added to array
            If ($All_UDF -notcontains $UDF.Name) {
                $All_UDF += $UDF.Name
            }

        }

    }

    # Add all UDF to Folder's UDF
    Write-Host ("We will add the following UDF into '" + $MyFolder.Name + "': ") -foreground Green
    Write-Host ($All_UDF -join "`n") -foreground Green

    Foreach ( $UDF in $All_UDF ){

        # Only add if UDF does not exist on folder's UDF
        if( (CheckFolderUDF $MyFolder $UDF) -eq $false) {
            # Add - Always add UDF as Text field (1)
            Write-Host ("Adding '" + $UDF + "' to '" + $MyFolder.Name + "'")
            $MyFolder.UserDefinedProperties.Add($UDF, 1)
        }else{
            Write-Host ("Already present: " + $UDF)
        }

    }

    Write-Host ("<----------------------------------------------------------->") -foreground Yellow
}

Function CheckFolderUDF ( $MyFolder, $MyUDFName ) {
    $Result = $false

    Foreach ( $Folder_UDF in $MyFolder.UserDefinedProperties ){

        If ( $Folder_UDF.Name -eq $MyUDFName ) {
            $Result = $true
            break
        }

    }

    return $Result

}

# Start - Check Shared Contacts
CheckContacts($SharedContacts) 
```

# 如何运行/测试此代码？

1) 打开 Windows PowerShell ISE（在 Windows 中）。

2) 复制上面的代码并将其粘贴到 PowerShell ISE 窗口中。

3）阅读并理解代码。

4) 根据需要进行修改。

PS：我试图添加这个“评论”，但我没有足够的积分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:23:25.330

在经历了许多痛苦和折磨之后……偶然发现了[[这篇文章]](http://social.technet.microsoft.com/Forums/en/winserverpowershell/thread/cc2187e4-7e3f-40be-831f-83c3820451b3)。这是在 Powershell（不是 Exchange Powershell 控制台）和我的计算机（不是服务器 MailMan）中：

```
$Outlook       = New-Object -com Outlook.Application 
$Namespace     = $outlook.GetNamespace("MAPI") 
$PublicFolder  = $Namespace.Folders.Item("Public Folders - me@example.com")
$PublicFolders = $PublicFolder.Folders.Item("All Public Folders")
$AddressBook   = $PublicFolders.Folders.Item("Company Address Book")
$Contacts      = $AddressBook.Items
$Contacts | Select FullName 
```

这实际上提取了联系信息。我仍在研究如何在服务器端（Exchange Powershell 控制台）执行此操作，但这应该是选择所需字段并根据需要将它们推送到数据库中的良好基础。

我想如果我能弄清楚如何获得“公共文件夹 - dummy_user@example.com”，我应该能够在服务器上做同样的事情。

我还假设有一种更简单的方法可以做到这一点（可能是通过拉路径，而不是一次一个部分），但这确实有效。

现在来了解如何获取 UserDefinedFields....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T21:09:50.570

你为什么不使用`Get-Contact`而不是`Get-PublicFolderItemStatistics`？

# c - 使用mpi的并行二叉树

> ID：13350787
> 
> 赞同：1
> 
> 时间：2012-11-12T20:10:17.463
> 
> 标签：c, parallel-processing, mpi, hpc

在 C/MPI 中如何实现二叉树？特别是，我如何在处理器上收集树的缺失部分？

假设我想在 N 个子矩形中划分一个矩形，N 是进程的总数。

我从两个子矩形的划分开始（沿着一个方向和一个由某个规则给出的位置，在这里没关系）。左侧矩形分配给进程 [0,mid_process]，右侧子矩形分配给其他进程。

然后我在这两个子矩形内递归地执行此操作，直到我最终在当前子矩形中只剩下一个进程。

通过这样做，每个进程都将拥有树的“本地”部分，该部分由从自身到根节点的路径组成。

然而，稍后，一旦树被构建，我希望每个进程（即每个最终的子矩形）识别哪些是它的相邻进程。

假设我在本地拥有整棵树，这可以通过遍历树来完成，对于每片叶子，查看其空间范围并将其边界与我们正在寻找邻居的子矩形的边界进行比较。

这件事是我不确定我如何发送和接收树的缺失部分。

![分解和关联树的示例](../Images/0c5723c81a5d7e7b12b6367cdc5d3a31.png)

此处的图显示了 11 个进程及其关联的二叉树之间的分解示例。

假设我是进程 2。在本地，我在内存中的树包含以下节点：[root]、[0-4]、[2-4]、[2]，其中 [] 中的数字是进程的等级。进程 [2] 的邻居是 [0]、[1](https://i.stack.imgur.com/QbiIT.png)、[3]、[4]、[5]、[8]。

# linux - 使用 vi/vim 进行十六进制编辑的光标

> ID：13350790
> 
> 赞同：0
> 
> 时间：2012-11-12T20:10:22.933
> 
> 标签：linux, vi, hex-editors

我知道我们可以用 vi/vim 十六进制编辑文件，使用命令`%!xxd`(call *nix hex dump) 和`%!xxd -r`(exit *nix hex dump)。

问题是，如果我在十六进制代码区域进行一些十六进制编辑，则在 ascii 代码区域中没有显示相应的光标，反之亦然。

相比之下，使用ghex编辑文件时，有两个光标，一个是当前编辑操作，另一个显示在另一个面板中的对应位置。

例如，如果一个文本文件包含一个字母“f”，而我正在使用 ghex 对其进行编辑，当我将光标移动到 hex 时，右侧面板中的光标将显示当前要编辑的字符为“f”左侧面板中的值 0x66。

vi/vim/xxd中是否已经存在这个功能，但我没有发现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:39:01.647

我们很清楚，`xxd`不是 vim 命令；它是一个与十六进制转储进行转换的外部程序。该命令的`%!xxd`意思是“运行外部程序`xxd`，通过 将这个文件的内容传递给它`stdin`，并用结果替换文件的内容。”

由此，我希望你明白你没有使用 vim 的一些特殊模式来编辑这些十六进制转储。十六进制转储只是您看到的文本，您正在将其作为普通文本文件进行编辑。

vim 可能有一些扩展，它提供了您正在寻找的功能（我看起来不是很努力），但在回答您的问题时，没有内置功能可以做到这一点。

# eclipse - 更改 Visual Studio 2010 键绑定以匹配 Eclipse？

> ID：13350797
> 
> 赞同：4
> 
> 时间：2012-11-12T20:11:12.393
> 
> 标签：eclipse, visual-studio-2010

有很多人在询问从 vs 到 eclipse 的解决方案，但不幸的是，我选择了另一种方式。我是日食迷，但我现在必须使用 vs 2010。是否存在我可以导入的键绑定文件，它会给我最喜欢的 Eclipse 键盘快捷键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T10:06:13.063

另一种选择是使用 AutoHotKey。我完全熟悉从 Eclipse 迁移到 VS 的痛苦。无论如何，这是我的 AHK 脚本。只需安装 AHK，根据您的 Visual Studio 版本编辑/此脚本并运行它。您无需更改 Visual Studio 键绑定中的任何内容。

有两种方法可以控制 Windows 上的任何应用程序，或者使用 CTRL/SHIFT/ALT 直接使用键盘快捷键，或者使用 ALT 激活菜单栏并进一步键入 F 代表 FILE，E 代表 EDIT 等等。以下脚本使用这两种类型的快捷方式，由您决定要使用哪种快捷方式。

我将以下脚本用于 Visual Studio Express 2012 版。

```
; ^ stands for Ctrl
; ! stands for Alt
; + stands for Shift

SetTitleMatchMode, 2
#IfWinActive, Microsoft Visual Studio Express      ;any part of the name of the window
    ^PgDn::Send ^!{PgDn}            ; next opened doc (tab navigation shortcut like in firefox/chrome)
    ^PgUp::Send ^!{PgUp}            ; previous opened doc (tab navigation shortcut like in firefox/chrome)
    ^b::Send ^{F7}                  ; compile the current file
    ^/::Send ^{e}{c}                ; comment Ctrl+e+c
    ^+/::Send ^{e}{u}               ; uncomment Ctrl+e+u
    ^k::Send ^{F3}                  ; find next Ctrl+F3
    ^w::Send ^{F4}                  ; close tab Ctrl+f4
    ^Enter::Send {F12}              ; go to defi/decl 
    ^!Enter::Send ^+{g}             ; open file under cursor (for headers) Ctrl+g
    ^+Enter::Send !{e}{i}{q}        ; show quick info Alt+e+i+q (Using menu bar)
    !Right::Send ^+{-}              ; navigate last position
    !Left::Send ^{-}                ; navigate next position    
    ^e::Send !{v}{i}                ; error window
    ^+TAB::Send !{v}{p}             ; solution explorer
                                    ; add here

    return
#IfWinActive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:24:42.597

您只能在我相信的选项中手动更改它们，但是一旦您这样做，您就可以随时导出它们以再次使用它们（或为想要相同键绑定的人释放它们）。当然，除非有人想导出他们的设置并将其提供给您。

# c++ - boost：如何监控互斥锁的状态并在死锁时强制释放 [2]

> ID：13350805
> 
> 赞同：3
> 
> 时间：2012-11-12T20:11:21.043
> 
> 标签：c++, multithreading, boost, mutex

我正在尝试使用 boost 中的 shared_lock 和 unique_lock 库来实现对资源的基本读写锁。但是，一些访问资源的线程可能会简单地崩溃。我想创建另一个进程，给定一个互斥锁，监视互斥锁并跟踪哪些进程锁定了资源以及每个进程锁定了多长时间。如果进程拥有锁的时间超过给定时间段，该进程还将强制进程释放其锁。

尽管 boost 锁都是作用域锁，一旦超出作用域就会自动解锁，但如果服务器崩溃，它仍然不能解决我的问题，从而将 SIGSEGV 发送到进程并杀死它。被杀死的进程不会调用它的任何析构函数，因此不会释放它持有的任何资源。

一种可能的解决方案是以某种方式在锁上设置一个计时器，以便进程在给定的锁期后被迫释放锁。尽管这违背了锁定的概念，但它在我们的案例中是有效的，因为我们可以保证如果任何进程持有锁超过，比如说 5 分钟，那么可以说该进程要么被杀死，要么存在陷入僵局的情况。

非常感谢任何有关如何解决此问题的建议！

* * *

由于“可能重复”，我之前的帖子已关闭，但所述重复问题没有回答我的问题。

[boost：如何监控互斥锁的状态并在死锁时强制释放](https://stackoverflow.com/questions/13313964/boost-how-to-monitor-status-of-mutex-and-force-release-on-deadlock)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:02:39.823

撇开这是否是一个好主意不谈，您可以推出自己的互斥锁实现，该实现利用共享内存来存储时间戳、进程标识符和线程标识符。

当一个线程想要锁定时，它需要在共享内存中找到一个空槽，并使用原子测试和设置操作，例如 Windows 上的 InterlockedCompareExchange，如果当前值为空值，则设置进程 ID。如果设置没有发生，则需要重新开始。在设置了进程id之后，线程需要为线程标识符重复该进程，然后对时间戳做同样的事情（它不能只是设置它，它仍然需要原子地完成）。

然后线程将需要检查所有其他已填充的插槽以确定它是否具有最低时间戳。如果不是，它需要记下具有最低时间戳的插槽，并对其进行轮询，直到它被清空、具有更高的时间戳或已超时。然后重复冲洗，直到线程拥有具有最旧时间戳的插槽，此时线程已获得锁。

如果另一个槽已经超时，线程应该触发超时处理程序（这可能会杀死另一个进程或只是在带有锁的线程中引发异常），然后使用原子测试和设置操作来清除槽。

当带有锁的线程解锁时，它会使用原子测试和设置操作来清除其插槽。

**更新**：还需要处理最低时间戳之间的联系以避免可能的死锁，并且处理该问题需要避免产生竞争条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:05:43.953

@Arno：我不同意软件需要如此强大以至于它不应该首先崩溃。容错系统（想想可用性的 5 个九），需要在关键流程突然终止时进行恢复。有点意思[`pthread_mutexattr_*robust`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutexattr_setrobust.html)

保存所有者 pid，互斥锁的最后使用时间戳应该有助于恢复。

# ajax - TYPO3 如何清除 .getJSON(ajaxUrl) 请求？

> ID：13350808
> 
> 赞同：-2
> 
> 时间：2012-11-12T20:11:36.890
> 
> 标签：ajax, typo3, getjson

即使我使用不同的 ajaxUrl。像`ajax01Url`, `ajax02Url`,*等等*. 它们中的每一个都有自己的 typeNum。我不断在`function(data)`.

有什么建议如何清理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:47:55.317

这是我自己的错，我在动作名称上有错字:)

我用相同的名称调用了两个不同的 uri.action。即使他们有不同的 pageType。

# jquery - jQuery：单击其子项时停止下拉菜单折叠

> ID：13350809
> 
> 赞同：4
> 
> 时间：2012-11-12T20:11:37.913
> 
> 标签：jquery

我有一个顶部导航栏，它的一些项目触发下拉/下滑。

我的问题是，每当我单击一个项目，或者实际上是下拉列表中的任何区域时，下拉列表都会崩溃。

我需要帮助的是弄清楚如何避免在单击子元素时折叠下拉列表（或者，下拉区域内的任何位置，因为我想考虑下拉列表内的意外点击，但实际上并不是点击子元素）。

这是我拥有的基本**HTML**结构：

```
<ul class="dropdown">
 <li><a href="#" class="noclick nojs">Select your Topic</a>
  <ul class="nojs" >
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
  </ul>
 </li>
</ul> 
```

我的 JavaScript：

```
$('.dropdown li').click(function() {
  //Hide all other drop downs that are visible, and remove the class 'selected'
  $(this).siblings('.selected').removeClass('selected').find('ul:visible').slideUp('fast');

  //Show/Hide dropdowns
  $(this).toggleClass('selected');
  $('ul:first', this).stop(true, true).slideToggle('fast');
}); 
```

这是一个**[演示](http://jsfiddle.net/rzea/zEQVK/1/)**

任何帮助是极大的赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T20:18:19.727

在这些子元素上停止[event.stopPropagation()](http://api.jquery.com/event.stopPropagation/)，这样事件就不会冒泡到 li

```
$('ul.nojs *').click(function(e){
   e.stopPropagation(); 
});​ 
```

[http://jsfiddle.net/DEfK9/](http://jsfiddle.net/DEfK9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:20:52.430

**[演示](http://jsfiddle.net/zEQVK/3/)**- 将`.click()`事件附加到`<a>`标签而不是`<li>`标签。

```
$('.dropdown .noclick').click(function(e) {
    // Do stuff.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:24:51.260

您可以使用以下代码段简单地将 slideToggle() 更改为 slideDown()：

[http://jsfiddle.net/yrzRu/](http://jsfiddle.net/yrzRu/)

```
if ($(this).not('.selected')) {
        $('ul:first', this).stop(true, true).slideDown('fast');
        $(this).addClass('selected');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:40:04.333

干得好！

[**小提琴**](http://jsfiddle.net/videsignz/zEQVK/10/)

```
$('.dropdown').children('li').click(function() {

    //Show clicked dropdown and add 'selected' class
    $(this).addClass('selected').find('ul').slideToggle('fast');

    //Hide all other dropdowns and remove 'selected' class
    $('.dropdown').children('li').not(this).removeClass('selected').find('ul').slideUp('fast');

}); 
```

# matlab - 调用一些知道它们的名字的 Matlab 函数

> ID：13350810
> 
> 赞同：3
> 
> 时间：2012-11-12T20:11:40.683
> 
> 标签：matlab

假设我有`func1`和。有没有办法用定义了它们的名字的已知参数来调用它们？（或者他们的指针？处理程序？）`func2``func3`

就像是：

```
toBeRunned = [ 'func1'; 'func2'; 'func3' ];
// .. foreach entry of toBeRunned call the function with VAR params .. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T20:15:47.880

这就是函数句柄的用途。

```
toBeRun = {@func1, @func2, @func3};
for ix = 1:length(toBeRun)
    fnArguments = {1, 2, 3, 'four'};
    fnTmp = toBeRun{ix};
    fnTmp(fnArguments{:});
end 
```

关于我们在这里所做的事情的更多解释：

1.  toBeRun 是一个函数句柄元胞数组，只是一个任意列表。对于编写为 M 文件的函数，添加了`@`创建函数句柄所需的全部内容。

2.  为了评估函数，需要将其从元胞数组中删除（`fnTmp`在本例中为删除）。这是 Matlab 的语法限制。您也可以使用`fneval`，但我通常这样做。

3.  可以根据需要以通常的方式（例如`fnTmp(1,2,3,'four')`）添加任何参数。但是如果你需要这么多的抽象，你可能还需要使用任意数量的输入参数。单元格`fnArguments`是完成此任务的一种非常灵活的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T20:16:20.287

功能[`feval`](http://www.mathworks.com/help/matlab/ref/feval.html)：

```
for i = 1 : size(toBeRunned, 1)
    feval(toBeRunned(i, :), argument);
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:02:19.677

实现它的另一种方法...

```
toBeRunned = { 'func1', 'func2', 'func3' };

% arguments to be provided to functions
VAR = { arg1, arg2, arg3, arg4 };

% preallocate space for results 
results = cell(1, 3);

for i = 1 : length(toBeRunned)
    % KEY part ...
    toRun = eval( [ '@' boBeRunned{i} ] );
    results{i} = toRun( VAR{:} );
end 
```

*代码关键*部分说明：

*   `[]`连接字符串，
*   `eval`将字符串计算为 Matlab 代码。在循环的第一次迭代中，`eval`等于：

    ```
    toRun = @func1; 
    ```

# c# - 使用 Socket.BeginAccept/EndAccept 进行多个连接

> ID：13350812
> 
> 赞同：4
> 
> 时间：2012-11-12T20:11:45.937
> 
> 标签：c#, .net, sockets, asynchronous, .net-4.0

与 synchronous 不同`Accept`，`BeginAccept`不为新创建的连接提供套接字。`EndAccept`然而确实如此，但它也会阻止未来的连接被接受；所以我编写了以下代码以允许多个“客户端”连接到我的服务器：

```
serverSocket.BeginAccept(AcceptCallback, serverSocket); 
```

`AcceptCallback`代码：

```
void AcceptCallback(IAsyncResult result)
{
    Socket server = (Socket)result.AsyncState;
    Socket client = server.EndAccept(result);

    // client socket logic...

    server.BeginAccept(AcceptCallback, server); // <- continue accepting connections
} 
```

有一个更好的方法吗？它似乎有点“hacky”，因为它本质上是递归地循环异步调用。
也许对异步方法进行多次调用会产生开销，例如创建多个线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:01:59.557

这样做的方式对于使用异步套接字是正确的。就个人而言，在您从 AsyncState 获取套接字后，我会将您的 BeginAccept 移至右侧。这将允许您立即接受其他连接。就像现在一样，处理代码将在您准备好接受另一个连接之前运行。

正如 Usr 所提到的，我相信您可以重新编写代码以将 await 用于任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:22:22.133

当您处理基于回调的异步 IO 时，这是正常的。这就是它使用起来如此糟糕的原因！

你可以使用 C# 等待吗？这会将其简化为一个简单的`while (true) { await accept(); }`循环。

# asp.net-mvc-4 - MVC4 中默认传递 RouteValueDictionary

> ID：13350815
> 
> 赞同：1
> 
> 时间：2012-11-12T20:12:05.440
> 
> 标签：asp.net-mvc-4, mvcroutehandler

我在升级到 MVC4 时遇到了一个问题，我想知道是否有其他人看到过这个问题以及如何解决它。每当我将 IDictionary、Dictionary 或 RouteValueDictionary 放入操作的参数列表时，都会传递该 MVC 调用的路由值。

要重现此问题，请使用默认 Internet 应用程序设置创建一个 MVC4 Web 项目并添加

```
IDictionary<string, object> myDictionary = null 
```

到 Index 控制器的参数列表，并在方法中放置一个断点。您将看到 IDictionary 参数由模型绑定器使用路由值填充。

我该如何关闭它，或者解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:32:33.393

在查看 MVC4 的错误报告后，似乎正在使用 Dictionary<> 模型绑定器跟踪以下问题。

[http://aspnetwebstack.codeplex.com/workitem/373](http://aspnetwebstack.codeplex.com/workitem/373)

解决方法似乎是从参数列表中删除 Dictionary 并执行以下操作：

```
[HttpPost]
public void Index(FormCollection form)
{
     var values = new Dictionary<string, object>();
     this.UpdateModel(values, "values");
} 
```

希望这对其他人有帮助。现在，如果他们只是修复它。有没有人有更好的解决方法？

# c# - 从 LightSwitch 应用程序发送电子邮件

> ID：13350818
> 
> 赞同：1
> 
> 时间：2012-11-12T20:12:28.090
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, visual-studio-lightswitch

更新赏金。我所追求的是一种简单的发送电子邮件的方法，当我单击我的一个 LightSwitch 屏幕上的按钮时。我需要能够从任何屏幕访问数据（以收集和处理它），以便可以将其作为电子邮件发送。如何在不破坏我的支持或使用任何第三方组件或服务的情况下做到这一点？在这种情况下，第三方的东西不是一种选择。

* * *

我已经按照我能找到的所有教程进行操作，但它不起作用。无论我怎么做，我都无法通过 LightSwitch 应用程序向某人发送电子邮件。我可以从 WinForms、WPF、网站发送电子邮件——所以我知道问题不是我的代码。

我已经按照本教程进行了“T”，并且（[http://blogs.msdn.com/b/bethmassi/archive/2011/01/27/how-to-send-html-email-from-a-lightswitch -application.aspx](http://blogs.msdn.com/b/bethmassi/archive/2011/01/27/how-to-send-html-email-from-a-lightswitch-application.aspx)）它仍然无法工作。首先，这是我目前的问题：

1.  在本教程中，它会告诉您将 Class.cs 文件添加到 Server 文件夹中的 UserCode 文件夹中——我就是这样做的。
2.  它还告诉您添加对 System.Net.Mail 的引用（显然） - 我试过了。System.Net.Mail 不可添加。我到处都找不到！
3.  其他所有教程都是相同的 - 所以我知道没有其他可以尝试的方法。

正如您在下面看到的，我尝试添加 System.Net.Mail 作为参考，但它不在列表中。我也尝试过将文件添加`using System.Net.Mail`到文件的顶部，但就像我说的那样；它不可用/不存在/无论如何。

![在此处输入图像描述](../Images/1f027e828982b3e46559e9e58e4fcb91.png)

有人知道如何从 LightSwitch 应用程序发送电子邮件吗？

请注意，这不是服务或网站类型的项目，只是一个简单的桌面 Lightswitch 应用程序。

我有一个正在制作的发票管理应用程序，剩下的唯一部分是根据表中的 DateDue 值在付款逾期时自动发送付款到期提醒电子邮件。

我在 MSDN 论坛上看到有人说 System.Net.Mail 在 Silverlight 中不可用，这就是为什么它在 LightSwitch 中不存在的其他评论。我不知道这是不是真的，但它肯定是这样看的。为什么他们不能让 System.Net.Mail 可用于 LightSwitch 应用程序，而不让我们为了让它工作而费尽心思？

即使我说我知道我的代码很好，我还是会发布它。

C#：（**请注意，在我的 CLASS 文件 System.Net.Mail 中可用**但是，我无法从其他任何地方或整个项目中的任何其他文件访问此文件中此代码的任何部分！）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Mail;
using System.Web;

namespace LightSwitchApplication
{
    public class JTS
    {
        public class Mail
        {
            public string recipient { get; set; }
            public string subject { get; set; }
            public string message { get; set; }

            public void Send()
            {
                using (MailMessage mailmessage = new MailMessage())
                {
                    mailmessage.From = new MailAddress("@.com");
                    mailmessage.To.Add(recipient);
                    mailmessage.Subject = subject;
                    mailmessage.Body = message;
                    mailmessage.Priority = MailPriority.High;

                    using (SmtpClient client = new SmtpClient())
                    {
                        client.Credentials = new System.Net.NetworkCredential("@.com", "_SVN");
                        client.EnableSsl = false;
                        client.Host = "m..com";
                        client.Port = 25;
                        client.Send(mailmessage);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:31:34.620

`System.Net.Mail`是命名空间，而不是程序集。尝试添加参考以`System.Net`查看是否有帮助。

你提到的那个教程引用 [了这个](http://www.paulspatterson.com/technology/lightswitch/microsoft-lightswitch-send-an-email-from-lightswitch/)，`System.Net`他们正在添加引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:27:02.657

您应该能够将*System.Net*的引用添加到**Server**项目中，因为该项目是一个 .NET 项目，与 Silverlight 项目不同，它对您可以使用的代码没有任何限制。因此，您将右键单击服务器项目，并选择“添加引用”，然后找到 System.Net 程序集。

文章中的方法确实有效，但可能不太明显的是，虽然您可以在*Server项目中使用 .NET 代码，但您不能从**Client*项目直接访问该代码（或您自己的代码）。

看看这篇关于我们称之为“[命令表模式](http://blog.pragmaswitch.com/?p=332)”的文章，它用于绕过客户端项目代码不能直接调用服务器项目代码的事实。

另一种选择是使用免费提供的[Office 集成包扩展](http://visualstudiogallery.msdn.microsoft.com/35c4cf2a-5148-4716-afcf-0ccf8899cabf)，“*它可以轻松地以桌面业务应用程序中常见的各种方式操作 2010 版 Excel、Word 和**Outlook 。创建文档、PDF、电子表格、****电子邮件**和使用来自您的 LightSwitch 应用程序的数据的约会*”。

还有一个[示例应用程序](http://officeintegration.codeplex.com/downloads/get/420541)可供下载。

我希望这有帮助。

# performance - 通过交错向量加速组装矩阵？

> ID：13350820
> 
> 赞同：4
> 
> 时间：2012-11-12T20:12:44.270
> 
> 标签：performance, r, matrix

我有两个任意且相等长度的向量

```
a <- c(0.8,0.8,0.8) 
b <- c(0.4,0.4,0.4)
n <- length(a) 
```

从这些我需要组装一个形式`2n`的`2n`矩阵：

```
x = [1-a1  b1    1-a2  b2    1-a3  b3
     a1    1-b1  a2    1-b2  a3    1-b3
     1-a1  b1    1-a2  b2    1-a3  b3
     a1    1-b1  a2    1-b2  a3    1-b3
     1-a1  b1    1-a2  b2    1-a3  b3
     a1    1-b1  a2    1-b2  a3    1-b3] 
```

我目前使用

```
x <- matrix(rep(as.vector(rbind(
                          c(1-a,a), 
                          c(b, 1-b))),
                n),
            ncol=n*2, byrow=TRUE) 
```

如何加快此操作？分析表明这`matrix`是花费最多的时间：

```
Rprof("out.prof")
for (i in 1:100000) {

x <- matrix(rep(as.vector(rbind(
  c(1-a,a), 
  c(b, 1-b))),
                n),
            ncol=n*2, byrow=TRUE)

}
Rprof(NULL)
summaryRprof("out.prof")

##$by.self
##            self.time self.pct total.time total.pct
##"matrix"         1.02    63.75       1.60    100.00
##"rbind"          0.24    15.00       0.36     22.50
##"as.vector"      0.18    11.25       0.54     33.75
##"c"              0.10     6.25       0.10      6.25
##"*"              0.04     2.50       0.04      2.50
##"-"              0.02     1.25       0.02      1.25
##
##$by.total
##            total.time total.pct self.time self.pct
##"matrix"          1.60    100.00      1.02    63.75
##"as.vector"       0.54     33.75      0.18    11.25
##"rbind"           0.36     22.50      0.24    15.00
##"c"               0.10      6.25      0.10     6.25
##"*"               0.04      2.50      0.04     2.50
##"-"               0.02      1.25      0.02     1.25
##
##$sample.interval
##[1] 0.02
##
##$sampling.time
##[1] 1.6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:53:45.717

我认为除了`matrix`成为您个人资料中最慢的部分之外没有其他选择，但您绝对可以通过优化其余部分来节省一点时间。例如：

```
x <- matrix(rbind(c(1-a,a), c(b, 1-b)), 2*n, 2*n, byrow=TRUE) 
```

此外，虽然我不推荐它，但您可以通过使用内部矩阵函数节省一点额外时间：

```
x <- .Internal(matrix(rbind(c(1-a,a), c(b, 1-b)),
                      n*2, n*2, TRUE, NULL, FALSE, FALSE)) 
```

以下是一些基准：

```
benchmark(
   method0 = matrix(rep(as.vector(rbind(c(1-a,a), c(b, 1-b))), n),
                    ncol=n*2, byrow=TRUE),
   method1 = matrix(rbind(c(1-a,a), c(b, 1-b)), 2*n, 2*n, byrow=TRUE),
   method2 = .Internal(matrix(rbind(c(1-a,a), c(b, 1-b)),
                              n*2, n*2, TRUE, NULL, FALSE, FALSE)),
   replications = 100000,
   order = "relative")

#      test replications elapsed relative user.self sys.self user.child sys.child
# 3 method2       100000    1.00     1.00      0.99        0         NA        NA
# 2 method1       100000    1.13     1.13      1.12        0         NA        NA
# 1 method0       100000    1.46     1.46      1.46        0         NA        NA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:55:16.950

我通过以下方式获得了一个小的加速：

```
f = function(a, b, n){
  z = rbind(
    c(rbind(1 - a, b)),
    c(rbind(a, 1 - b))
  )

  do.call(rbind, lapply(1:n, function(i) z))
} 
```

我会继续寻找。

**编辑**我很难过。如果这还不够好，我建议内联一些 rcpp。

# android - 在选项卡内显示设置

> ID：13350825
> 
> 赞同：2
> 
> 时间：2012-11-12T20:13:01.380
> 
> 标签：android, settings

如何在选项卡或布局中显示设置对话框而不是全屏显示？

# javascript - 文本没有内联显示？

> ID：13350827
> 
> 赞同：0
> 
> 时间：2012-11-12T20:13:14.313
> 
> 标签：javascript, html, css

[http://spencedesign.netau.net/singaporehomemenu.html](http://spencedesign.netau.net/singaporehomemenu.html)这是我的网站。您会看到，当您单击该方块，然后将鼠标悬停在菜单上的其中一个链接上时，描述它的文本没有被内联显示，而我必须是 Display: Inline; 在 CSS 中。我已经仔细检查了代码，但找不到问题。我知道代码真的很乱，我要清理它，因为它可能只在我的浏览器中看起来是格式化的，带有我的屏幕像素。如果有人有任何技巧可以使网站在所有浏览器和屏幕尺寸下看起来都一样，我们将不胜感激。但我的主要问题是关于内联显示。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:22:15.513

跨度设置为绝对定位。您需要指定宽度和高度才能继续使用该样式。

# objective-c - IBOutlet 变量名称的问题

> ID：13350831
> 
> 赞同：-3
> 
> 时间：2012-11-12T20:13:19.313
> 
> 标签：objective-c, ios, variables, uilabel, iboutlet

我无法转换字符串以`IBOutlet`在我的代码中交换变量名。

我试图`IBOutlet UILabel`通过稍后以编程方式创建相同的变量名来引用在头文件中声明的实例。

但是，当我转换一个字符串来尝试替换`IBOutlet UILabel`变量名时，程序崩溃了。

希望下面的示例解释了正在发生的事情以及为什么需要。抱歉，如果描述有点不稳定 - 我是初学者。

当我创建`UILabel *tempLabelName`尝试和替换头文件中声明的`IBOutlet UILabel *property`（在下面的示例中引用）相同时，程序崩溃！`propertyUseForNaming`

```
for (int i = 0; int < 5; i++)
{    

    NSString *tempText = [[NSString alloc] initWithFormat:@"%d", [aReferenceObject[i] integerToDisplayAsText]];

    UILabel *tempLabelName = [NSString stringWithFormat:@"%@", [aReferenceObject[i] propertyUseForNaming]];

    [tempLabelName setText: tempText];

} 
```

有人可以帮助我并解释我该怎么做/提供进一步的建议吗？

非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:29:25.327

UILabel 不是字符串，反之亦然。

```
UILabel *tempLabelName = [NSString stringWithFormat:@"%@", [aReferenceObject[i] propertyUseForNaming]]; 
```

表示您正在创建一个字符串，然后尝试将其视为 UILabel。这是不可能的。您需要让 XIB（或您的程序）创建一个 UILabel，然后您可以使用 text 属性设置文本：

在你的头文件中：

```
@property (nonatomic, retain) UILabel *label; 
```

在您的代码中：

```
label.text = [NSString string...];
// OR
[label setText:str]; 
```

它还有很多内容（例如，您还需要 .m 文件中的代码来实现该属性，还需要将 xib 实例连接到插座），但这是您误解的本质。

# android - 如何在 Android 设备上获取用户配置文件

> ID：13350844
> 
> 赞同：2
> 
> 时间：2012-11-12T20:14:17.687
> 
> 标签：android, android-contacts, contactscontract, accountmanager, google-account

我希望能够自动在创建帐户表单中输入信息，并根据用户已经输入设备的信息（例如他们的姓名、电子邮件地址、电话号码）提出可能性。我需要一种与 API 级别 8 兼容的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T20:14:17.687

我发现[Roman Nurik](https://stackoverflow.com/a/2175688/910718 "罗曼努里克的回答")对一个非常相似的答案的回答，因此我的答案是基于他的回答。这[是我的回答的要点](https://gist.github.com/4061516 "完整答案实施")。您需要向 中添加权限和功能才能`AndroidManifest.xml`访问用户的个人资料：

```
<!-- Allows application to view phone state like using readLine1Number() -->
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<!-- Required to access the Contacts Provider and user profile -->
<uses-permission android:name="android.permission.READ_PROFILE"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>

<!-- Allows the application to use telephony to get the devices phone number when telephony is available without requiring telephony -->
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

该方法使用 Roman 根据设备支持的 API 级别描述的两种方法之一。它显示了如何利用用户设置的主要字段以及何时设置多个值。它使用`TelephonyManager`检索设备的电话号码。

# php - 通过 htaccess 缩小动态 PHP 页面

> ID：13350847
> 
> 赞同：1
> 
> 时间：2012-11-12T20:14:36.400
> 
> 标签：php, html, .htaccess, minify

我有一个网站，所有文件都是 php 文件，在服务器上我们也有 htaccess 为友好的 url 进行重写，即 /about

我们已经通过 PHP 对 JS 和 CSS 进行了缩小，但是由于 HTML 位于实际页面上，因此有一种方法可以在 php 添加到页面的动态位之后但在服务器将其发送回之前缩小 html给客户？

我已经尝试实现 minify，但是回调函数会在没有错误的情况下破坏页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-04T23:13:16.757

**`<doctype html>`在标签或配置文件之前使用它**

```
function sanitize_output($buffer)
{
    $search = array(
        '/\>[^\S ]+/s',  // strip whitespaces after tags, except space
        '/[^\S ]+\</s',  // strip whitespaces before tags, except space
        '/(\s)+/s'       // shorten multiple whitespace sequences
        );
    $replace = array(
        '>',
        '<',
        '\\1'
        );
    $buffer = preg_replace($search, $replace, $buffer);
    return $buffer;
}
ob_start("sanitize_output"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T21:18:49.920

如果我们正在谈论动态地缩小所有内容，我会建议您谨慎对待将其视为优化。

是的，可能会节省大量带宽。是的，您的用户可能会从较小的下载中获得性能提升。

但是，如果您正在使用 PHP 动态缩小文件（这听起来像是您正在做的事情），那么您实际上也可能会减慢最终用户的速度。

最好在静态文件上进行缩小。缩小它们一次，保存它们，然后在请求文件时将缩小的文件提供给浏览器，无需任何进一步的处理。每次请求文件时都在 PHP 中执行此操作可能会导致显着的性能开销，这很容易抵消较小下载大小带来的收益。

缩小 HTML 通常不如 Javascript 有效。“缩小” PHP 生成的 HTML 的最佳方法是从 HTML 模板文件中删除不必要的空白。这通常是一项非常简单的任务，并且不需要专用的压缩工具——最简单的方法就是从文件中删除所有缩进。空白在 HTML 中是相关的，所以你不能把它全部去掉，但是失去缩进应该可以处理大部分问题，同时仍然方便地使文件保持合理的可读性。

所以我的建议是尽可能静态地缩小你的文件。但是，如果您*必须*即时执行此操作，请不要使用 PHP 来完成这项工作。使用专用服务器插件，例如 Google 的[mod_pagespeed](https://developers.google.com/speed/pagespeed/mod)。该插件会在您请求文件时为您缩小文件（以比 PHP 更高的速度），并且还负责缓存缩小的版本，以尽量减少对性能的影响。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:18:40.080

您可以查看 PHP 中的输出缓冲，这将允许您进行最后的缩小步骤。如果您的目标是最小化下载，那么还有 gZip 编码可供研究。

这可能会有所帮助：[如何缩小 php 页面 html 输出](https://stackoverflow.com/questions/6225351/how-to-minify-php-page-html-output)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T07:11:09.217

我最近遇到了一个脚本，用于即时压缩您的 HTML 源代码，称为 [动态网站压缩器的脚本](http://codecanyon.net/item/dynamic-website-compressor/2838376)

这是一个基于 PHP 的脚本，但可以与 .htaccess 一起使用

# ios - 在设备上分析 ui 自动化的正确构建选项/代码签名/方案设置是什么？

> ID：13350849
> 
> 赞同：1
> 
> 时间：2012-11-12T20:14:55.813
> 
> 标签：ios, xcode, ui-automation

我正在尝试在我的设备/iPhone 4 上使用 ui 自动化脚本运行。

我尝试了几种设置都没有成功，我不确定我是谁了:(

**构建选项**

```
Validate Built Product: Ad Hoc - Yes, Debug - No, Release - Yes. 
```

**代码签名**

```
Ad Hoc - Entitlements.plist - can be debugged - no
Debug - Entitlement-Debug.plist - get-task-allow - yes
Release - Entitlements.plist - can be debugged - no 
```

**代码签名身份**

```
Ad Hoc - iPhone Developer
Debug - Don't have set
Release - iPhone Distribution 
```

**简介方案**

```
Build Configuration - Release
Pre - Actions - None
Post - action - None 
```

显然所有这些设置都可能没有错，但我想要一些验证。

我实际上遇到了一个错误

```
The executable was signed with invalid entitlements 
```

但是，我不认为这是我唯一的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:30:18.597

为了进行 UI 自动化测试，bundle 必须是开发人员签名的。因此，您需要`iPhone Developer:`为“调试”配置设置代码签名标识，并将该配置用于 UI 自动化测试。Instruments 也需要附加到您正在运行的进程（即它需要`get-task-allow`），这就是您应该在您的情况下使用 Debug 配置的原因。请注意，您还可以使用发布设置创建新的构建配置，但包括`get-task-allow`.

我强烈建议`accessibilityIdentifier`在所有 UI 元素上使用该属性来识别它们，并使用它来查找 UIA 测试脚本中的元素。这样，您`accessibilityLabel`仍然可以用于（和本地化）实际可访问性。

# xpath - 如何从内部条件内的外部节点访问属性？

> ID：13350850
> 
> 赞同：0
> 
> 时间：2012-11-12T20:14:55.407
> 
> 标签：xpath

我想执行以下 XPath：/Configs/Category/InputMenu/Config[@Value = 'DualPack' 和 (/Configs/Category/MasterSlave/Config[@No = ./@No]/@Value = 'Master') ]

其中“[@No = ./@No]”部分中的“./@No”来自/Configs/Category/InputMenu/Config@No，而不是来自/Configs/Category/MasterSlave/Config@No

如何指定 ./@No 来自该外部节点？

谢谢 - 戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:47:07.517

在 XPath 2 中，您可以使用 for 来模拟 XQuery 的 let：

```
/Configs/Category/InputMenu/Config[@Value = 'DualPack' and (for $no in ./@No return /Configs/Category/MasterSlave/Config[@No = $no]/@Value = 'Master')] 
```

否则，您可以将其反转，并检查 No 属性是否等于具有 Master 值的一个元素的 No 属性（而不是检查具有相同 No 属性的一个元素的值是否为 Master）。

```
/Configs/Category/InputMenu/Config[@Value = 'DualPack' and @No = /Configs/Category/MasterSlave/Config[@Value = 'Master']/@No] 
```

# mysql - 如何从相同的两个表运行两个左连接，但到这些表中的不同字段

> ID：13350851
> 
> 赞同：1
> 
> 时间：2012-11-12T20:15:01.267
> 
> 标签：mysql, sql

我有一个信息表，其中包含以下字段；

```
id, staffMember, lineManager, description 
```

staffMember 和 lineManager 字段返回整数值，这些值对应于用户表中的行 ID，该表具有以下列

```
id, firstname, surname 
```

我可以使用以下查询返回我的信息表中的信息，将 staffMember 值替换为名和姓的 CONCAT：

```
SELECT information.id, 
    CONCAT( users.firstname,  ' ', users.surname ) AS staffMember, 
    information.lineManager, 
    LEFT(information.description,200) As description 
FROM information 
LEFT JOIN users 
    ON ( information.staffMember = users.id ) 
LIMIT 0 , 30" 
```

但是我想要做的是重复在 lineManager 上处理 staffMember 值的过程以及在同一个查询中（然后我将其作为 json 字符串传递） - 但是，我知道我不能有两个LEFT 连接到同一个表，但等同于不同的字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:18:25.463

听起来你想要这个：

```
SELECT i.id, 
    CONCAT(u1.firstname,  ' ', u1.surname) AS staffMember, 
    CONCAT(u2.firstname,  ' ', u2.surname  AS lineManager, 
    LEFT(i.description,200) As description 
FROM information i
LEFT JOIN users u1
    ON i.staffMember = u1.id 
LEFT JOIN users u2
    on i.lineManager = u2.id
LIMIT 0 , 30 
```

您只需`LEFT JOIN`在`users`桌子上执行两次。一次您将加入，`staffMember`另一次您将加入`lineManager`。通过为表提供不同的表别名，您可以区分表和值。

如果你想更清楚：

```
SELECT i.id, 
    CONCAT(staff.firstname,  ' ', staff.surname) AS staffMember, 
    CONCAT(manager.firstname,  ' ', manager.surname  AS lineManager, 
    LEFT(i.description,200) As description 
FROM information i
LEFT JOIN users staff
    ON i.staffMember = staff.id 
LEFT JOIN users manager
    on i.lineManager = manager.id
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:19:15.367

像这样的东西：

```
SELECT information.id FROM information 
LEFT JOIN users u ON u.id = information.staffMember
LEFT JOIN users ul ON ul.id = information.lineManager 
```

表格后面的字母/单词完全是你自己编的。它们是您即时编造的表名的别名。

# bash - 在 sed 中按模式排除行

> ID：13350855
> 
> 赞同：5
> 
> 时间：2012-11-12T20:15:16.307
> 
> 标签：bash, sed

我正在尝试在 bash 中编写一个 sed 命令，该命令使用 $(name).min.js 更新 HTML 文件中对 javascript 和 css 文件的所有引用，但是我想忽略路径中带有单词 MANAGER_WIDGET 的文件，例如

代替：

`&lt;script type="text/javascript" src="javascript/scripts.js"/&gt;`

但不是：

```
`&lt;script type="text/javascript" src="$MANAGER_WIDGET/Common/API/Plugin.js"/&gt;` 
```

到目前为止，我有以下 sed 命令，它将 .min 添加到所有文件 js 和 css 文件中：

```
sed "s/\.\([jscss]\+\)\"/\.min\.\1\"/g" index.html 
```

如果有人能告诉我如何排除包含 MANAGER_WIDGET 的行，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T20:18:36.397

```
sed '/MANAGER_WIDGET/!s/\.\([jscss]\+\)\"/\.min\.\1\"/g' index.html 
```

# android - 如何将我的应用添加到 Android 的“共享照片”选项？

> ID：13350857
> 
> 赞同：3
> 
> 时间：2012-11-12T20:15:19.597
> 
> 标签：android, dialog, share, photos

> **可能重复：**
> [Android Share Via Dialog](https://stackoverflow.com/questions/3553017/android-share-via-dialog)

例如，当您点击分享照片时，它会为您提供一个分享选项列表（Instagram、Messaging、Gmail 等）。我希望我的应用在安装到设备后出现在这些“共享”选项下。

我尝试在 Google 上搜索它，但我不熟悉任何术语，因此我的搜索结果术语措辞太奇怪而无法具体说明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T20:19:40.243

将此意图过滤器添加到清单中的活动：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:20:32.923

在 StackOverflow 上查看这个[问题。](https://stackoverflow.com/questions/4182299/how-to-get-the-data-from-share-picture-via-dialog-on-android)在问题中，您将看到必须添加到清单中的内容，在第一个答案中，您将找到如何检索活动中的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:17:59.127

阅读[添加轻松共享操作](http://developer.android.com/training/sharing/shareaction.html)

# spring - 在 Hibernate 中计算多对多关系中的行数

> ID：13350858
> 
> 赞同：1
> 
> 时间：2012-11-12T20:15:23.910
> 
> 标签：spring, hibernate, jsp, count, oracle10g

我在 Oracle (10g) 数据库中有许多表中的三个，如下所示。我正在使用带有 Spring 3.0.2 版的 Hibernate Tools 3.2.1.GA。

1.  **产品**- 父表
2.  **颜色**- 父表
3.  **ProductColour** - 连接表 - 分别引用`colourId`和`prodId`of`Colour`和`Product`表

其中`ProductColour`是和之间的*连接表*。正如表名所暗示的，和之间存在多对多的关系。我认为，数据库中的关系很容易想象，只有这么多信息就很清楚了。因此，我不打算详细探讨这种关系。`Product``Colour``Product``ProductColour`

in 中的一个实体（行）与 in`Product`中的任意数量的实体相关联，`Colour`并且 in 中的一个实体（行）`Colour`也可以与 in 中的任意数量的实体相关联`Product`。

* * *

举个例子，我需要计算`Product`表中可用的行数（关于 Hibernate），可以这样做如下所示。

```
Object rowCount = session.createCriteria(Product.class)
                  .setProjection(Projections.rowCount()).uniqueResult(); 
```

* * *

如果我需要计算`ProductColour`表中可用的行数怎么办？由于它是多对多关系，因此它被映射`Product`到`Colour`实体类 (POJO) 中，并且相应的表中没有可用`java.util.Set`的直接 POJO 类。`ProductColour`所以前面的行计数语句在这种情况下似乎不起作用。

有没有一种精确的方法来计算Hibernate中这种**连接实体的行数？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:34:50.210

我认为您应该能够沿线进行 JPQL 或 HQL。

```
SELECT count(p.colors) FROM Product AS p WHERE p.name = :name ... other search criteria etc 
```

或者

```
SELECT count(c.products) FROM Color AS c WHERE c.name = :name .... other search criteria 
```

**从下面的评论中，这应该有效：**

```
Long colours=(Long) session.createQuery("select count(*) as cnt from Colour colour where colour.colourId in(select colours.colourId from Product product inner join product.colours colours where product.prodId=:prodId)").setParameter("prodId", prodId).uniqueResult(); 
```

# javascript - 关于 }) 的一些 JS/jquery 代码的语法错误；

> ID：13350859
> 
> 赞同：0
> 
> 时间：2012-11-12T20:15:30.210
> 
> 标签：javascript, jquery, html, css

我正在尝试创建的内容窗口的某些 JS 代码出现错误。有人告诉我 }); 不应该在哪里，但我不明白问题出在哪里。我是否使用过时的 jquery 中的术语？

```
jQuery(document).ready(function($) {
    $('.contentwindow_trigger').click(function(e) {

        e.preventDefault();

        var image_href = $(this).attr("href");

        if ($('#contentwindow').length > 0) { 
            $('#content').html('<img src="' + image_href + '" />');

            $('#contentwindow').show();
        }
        else { 
            var contentwindow =

            '<div id="contentwindow">' +

                '<p>Click to close</p>' +

                '<section id="content">' +
                    '<img src="#" />' +
                '</section>' +

            '</div>';
            $('body').append(contentwindow);
        }
    }); //HERE

    $('#contentwindow').on('click', function() {
        $('#contentwindow').hide();
    });
}); 
```

错误就在这里，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:18:38.107

使用此脚本：

```
 jQuery(document).ready(function() {
    $('.contentwindow_trigger').click(function(e) {

        e.preventDefault();

        var image_href = $(this).attr("href");

        if ($('#contentwindow').length > 0) { 
            $('#content').html('<img src="' + image_href + '" />');

            $('#contentwindow').show();
        }
        else { 
            var contentwindow =

            '<div id="contentwindow">' +

                '<p>Click to close</p>' +

                '<section id="content">' +
                    '<img src="#" />' +
                '</section>' +

            '</div>';
            $('body').append(contentwindow);
        }
    }); //HERE

    $('#contentwindow').on('click', function() {
        $('#contentwindow').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:38:08.963

不确定您看到的语法错误是什么，但在这个 jsfiddle 中似乎可以正常工作：

[http://jsfiddle.net/xV58c/](http://jsfiddle.net/xV58c/)

我在那里所做的一项更改可能会对您有所帮助。代替：

```
$('#contentwindow').on('click', function() {
    $('#contentwindow').hide();
}); 
```

我做了：

```
$('body').on('click', '#contentwindow', function() {
    $('#contentwindow').hide();
}); 
```

它使用“on”方法的方式允许包含元素（在本例中为“body”）处理下面元素上的事件，甚至以#contentwindow 的方式生成的元素。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:16:31.293

从此行中删除 $ 您的代码

```
function($) { 
```

至

```
function() { 
```

/

```
 jQuery(document).ready(function() {
        $('.contentwindow_trigger').click(function(e) {
            // Click event code
        });

        $('#contentwindow').on('click', function() {
            $('#contentwindow').hide();
        });
    }); 
```

另一个不影响页面中的语法错误的更改是我看到您正在动态添加一个元素并将一个单击事件关联到它。

您需要为这种情况**委派**事件，并且该事件可能不起作用

```
$('body').on('click','#contentwindow' , function() {
        $('#contentwindow').hide();
    }); 
```

# sql - Oracle sql subselect 查找聚合值

> ID：13350862
> 
> 赞同：2
> 
> 时间：2012-11-12T20:15:47.653
> 
> 标签：sql, oracle

我有一张包含产品、日期/时间和价格的表格。我将日期/时间拆分到另一列，我刚刚拆分了小时部分。我需要按小时查找价格值的高点/低点/开盘价/收盘价。我可以通过在我 max()/min() 的选择部分中进行子选择并按产品和小时加入数据来轻松获得高/低。我现在需要打开/关闭，这将是每小时的第一条记录和每小时的最后一条记录。每小时的每条记录的高/低/开/关都应该相同。

示例结果。注意所有 7 小时记录的最高价是 55，这就是所有 7 小时记录中的最高价，最低价是 30，因为它是所有 7 小时记录中最低的，50 是开盘价，因为第一个价格（按日期/时间排序在 7:15）是 50。收盘价是按日期/时间排序的一小时内的最后一个价格，即 30。

```
Product, Date,            Hour, Price, High, Low, Open, Close
A,       11/12/2012 7:15, 7,    50,    55,   30,  50,   30
A,       11/12/2012 7:28, 7,    55,    55,   30,  50,   30
A,       11/12/2012 7:30, 7,    40,    55,   30,  50,   30
A,       11/12/2012 7:35, 7,    45,    55,   30,  50,   30
A,       11/12/2012 7:55, 7,    30,    55,   30,  50,   30 
```

所以再次回顾一下，高/低很容易，因为我在选择部分中对同一个表进行最大/最小查询的子选择，但不确定如何为打开/关闭做同样的事情以获取第一条和最后一条记录在日期/时间字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:27:42.883

将此添加为子查询以获取打开，适当地替换产品密钥和小时：

```
SELECT * FROM (
  Select Open
  FROM <table name>
  WHERE product = '<product key>' 
    AND hour='<the hour>'
  ORDER BY Date
) WHERE rownum = 1 
```

将此添加为子查询以获取关闭，适当地替换产品密钥和小时：

```
SELECT * FROM (
  Select Close
  FROM <table name>
  WHERE product = '<product key>' 
    AND hour='<the hour>' 
  ORDER BY Date desc
) WHERE rownum = 1 
```

这里的技巧是正确设置结果排序并使用`rownum = 1`.

* * *

另外的选择：

```
SELECT Open
FROM <table name>
WHERE product = '<product key>' 
  AND hour='<the hour>' 
  AND Date = (
    SELECT min(Date) 
    FROM <table name> 
    WHERE product = '<product key>' 
    AND hour='<the hour>'
    ) 

SELECT Close
FROM <table name>
WHERE product = '<product key>' 
  AND hour='<the hour>' 
  AND Date = (
    SELECT max(Date) 
    FROM <table name> 
    WHERE product = '<product key>' 
    AND hour='<the hour>'
    ) 
```

这条路线的一个缺点是这些语句不能保证返回单行。这意味着如果对于给定的产品，在同一小时有两个条目，具有相同的日期值是最小值/最大值，它将返回 2 行，当用作子查询时会导致异常。

尽管这可能是一件好事，但与其随意选择一行，您会知道存在特定问题，并且可能会更新查询以做出更明智的决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:01:51.143

我会为此使用排名函数：

```
select product, datestr, hour,
       max(case when seqnum_open = 1 then price end) as Open,
       max(case when seqnum_close = 1 then price end) as Close,
       max(price) as High,
       min(price) as Low
from (select t.*,
             row_number() over (partition by product, datestr, hour order by date) as seqnum_open,
             row_number() over (partition by product, datestr, hour order by date desc) as seqnum_close
      from (select t.*,
                   to_char(date, 'YYYY-MM-DD') as datestr
            from t
           ) t
     ) t
group by product, datestr, hour 
```

# symfony - Symfony2 数据库翻译加载器未执行

> ID：13350866
> 
> 赞同：3
> 
> 时间：2012-11-12T20:16:05.437
> 
> 标签：symfony, translation, loader

我必须实现自己的翻译加载器。我使用了以下教程： [http](http://blog.elendev.com/development/php/symfony/use-a-database-as-translation-provider-in-symfony-2/) ://blog.elendev.com/development/php/symfony/use-a-database-as-translation-provider-in-symfony-2/ 来实现我自己的翻译加载器。

我的代码没有收到任何错误，但是我的 Loader 的加载函数永远不会被执行。

有没有办法告诉 symfony 应该执行哪个翻译？

**配置.yml**

```
 translation.loader.db:
    class: Mysk\TranslationBundle\Services\DBLoader
    arguments: ["@doctrine.orm.entity_manager"]
    tags:
        - { name: translation.loader, alias: db} 
```

**DBLoader.php**

```
class DBLoader implements LoaderInterface {

private $transaltionRepository;
private $languageRepository;

/**
 * @param EntityManager $entityManager
 */
public function __construct(EntityManager $entityManager){
    $this->transaltionRepository = $entityManager->getRepository("MyskTranslationBundle:LanguageTranslation");
    $this->languageRepository = $entityManager->getRepository("MyskTranslationBundle:Language");
    echo "yeah";
}

function load($resource, $locale, $domain = 'messages'){
    die();
    //Load on the db for the specified local
    $language = $this->languageRepository->getLanguage($locale);
    $translations = $this->transaltionRepository->getTranslations($language, $domain);
    $catalogue = new MessageCatalogue($locale);

    foreach($translations as $translation){
        $catalogue->set($translation->getLanguageToken()->getToken(), $translation->getTranslation(), $domain);
    }

    return $catalogue;
}} 
```

有任何想法吗？

干杯蒂莫

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-23T10:52:39.627

奥尔多已经回答了这个问题，但只是为了使其成为官方答案并帮助他人：

## 你需要创建一个“假”翻译文件来触发你的加载器

来自[Symfony 依赖注入 标签：“translation.loader”](http://symfony.com/doc/current/reference/dic_tags.html#translation-loader)

> [...] 如果您从数据库加载翻译，您仍然需要一个资源文件，但它可能是空白的，或者包含一些关于从数据库加载这些资源的信息。该文件是触发自定义加载程序上的加载方法的关键。

所以你需要`<domain>.<locale>.<loader-alias>`在你的翻译文件夹中创建表格文件`app/Resources/translations/`。

在你的情况下，一个文件是`app/Resources/translations/messages.en.db`英文的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T14:55:49.120

[http://blog.elendev.com/page/3/#post-26](http://blog.elendev.com/page/3/#post-26)或[http://blog.elendev.com/development/php/symfony/use-a-database-as-translation-provider-in-symfony -2/](http://blog.elendev.com/development/php/symfony/use-a-database-as-translation-provider-in-symfony-2/) 这里的另一个问题是示例中没有 LanguageRepository 类。你可以使用这个例子。

```
<?php
namespace TranslationBundle\Repository;
use Doctrine\ORM\EntityRepository;
class LanguageRepository extends EntityRepository
{
    public function getLanguage($locale)
    {
        return $this->findOneBy(array('locale' => $locale));
    }
} 
```

# c++ - 错误：无法在赋值中将 'int*' 转换为 'Pt*'

> ID：13350874
> 
> 赞同：-1
> 
> 时间：2012-11-12T20:16:31.740
> 
> 标签：c++

我是指针用法的新手，遇到编译错误 gcc

这是我的代码：

```
class Pt
{

public:

    int Ph;

};

Pt *Pa;

Pa = new T[N];
for(int i=0;i < N; i++) 
    Pa[i].Ph=0;` 
```

和错误信息：

```
error: expected type-specifier before ‘T’
error: cannot convert ‘int*’ to ‘Pt*’ in assignment 
```

我要做的是声明一个包含一个`int`最初为 0 的类，并为该类的 N 提供一个内存空间。

感谢您花时间阅读我的问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:18:16.273

如果没有用户定义的构造函数，您可以像这样对对象进行值初始化：

```
Pt a = Pt(); 
```

`a`是一个类型的对象，`Pt`其`int`成员设置为`0`.

要声明一个数组，请使用：

```
Pt* Pa = new Pt[N](); 
```

数组中的对象是值初始化的，因此不再需要`N`以下循环。`for`

要编写 C++ 代码，只需执行

```
std::vector<Pt> Pa(N); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:20:28.560

您没有声明任何名为`T`; 在抱怨之前，您可能还有其他错误/警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:25:25.907

你有多个错误

* * *

1)`Pa[i]`将持有指向 pt 的指针。所以考虑写`Pa[i]->Ph`

* * *

2）你想在这里做什么不清楚：

```
Pa = new T[N]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T20:30:38.470

尝试这样的事情：

```
class Pt
{
  public:
    Pt() : Ph(0)
    { ; }

    int Ph;
};

#define CAPCITY 15U

int main(void)
{
  Pt Pa[CAPACITY];
  for (unsigned i = 0; i < CAPACITY; ++i)
  {
      std::cout << "Pa[" << i << "].Ph = " << Pa[i].Ph << endl;
  }
  return EXIT_SUCCESS;
} 
```

当类由数组构造时，`class Pt`句柄的初始化列表将字段设置为零。`Ph`

顺便说一句，与其他语言不同，您不需要`new`为每个变量实例使用。

*我强烈建议为你的类和变量名使用更多的字母，并尝试使用一些有意义的东西。两个字母打字速度更快，但如果这是你的理由，请参加键盘课程。*

# javascript - Three.js - 视图宽度

> ID：13350875
> 
> 赞同：22
> 
> 时间：2012-11-12T20:16:38.320
> 
> 标签：javascript, three.js

有没有办法找出场景渲染部分的宽度？

例如，如果我们有一个宽度为 100 的网格，但以一定程度的缩放进行渲染……我如何计算屏幕中正在渲染的网格部分的宽度？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-12T21:03:40.323

你必须在这里准确。

您可以在给定相机的视野`camera.fov`和给定距离的情况下计算可见矩形区域`dist`。

由于对象可能具有深度，因此您必须通过网格选择一个平面，并在该距离处进行计算。

以下是如何计算可见距离`height`和`width`给定距离`dist`相机的方法。

```
var vFOV = THREE.MathUtils.degToRad( camera.fov ); // convert vertical fov to radians

var height = 2 * Math.tan( vFOV / 2 ) * dist; // visible height

var width = height * camera.aspect;           // visible width 
```

三.js r.117

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-26T06:44:05.190

对于（完美的）球形物体，它将覆盖更多的近距离视图，因为您需要考虑切线，即您看不到“极点”。

对球形对象使用以下内容：

```
// we're using the following triangle: camera - tangent point on sphere - centre of sphere
var targetAngle = 2 * Math.asin(objectRadius / distanceToCamera);

var vFOV = THREE.Math.degToRad(this.fov);

var normalizedHeight = targetAngle / vFOV; 
```

将此与您的视口宽度相乘以获得屏幕高度。对于宽度，您需要应用 hFOV - 请参阅：[在 THREE.PerspectiveCamera 中无失真的 90 度视野](https://stackoverflow.com/questions/26655930/90-degree-field-of-view-without-distortion-in-three-perspectivecamera)

# xcode - 从另一个 ViewController 更改 int 值

> ID：13350876
> 
> 赞同：-2
> 
> 时间：2012-11-12T20:16:40.100
> 
> 标签：xcode

我的 file1ViewController.m 中有一个 int 值，我想从我的 file2ViewController.m 更改这个值。我试图导入文件 NSUserDefaults 但我无法让它工作。

任何人都可以帮助我的代码？做这个简单的事情最简单的方法是什么？

感谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:26:46.110

最简单的方法是在对象被推送或呈现时传递对`file1ViewController`对象的引用。`file2ViewController`执行此操作的确切方式取决于这些对象之间的关系以及它们是如何创建和控制显示的。

了解类、对象和代码文件之间的区别是朝着正确方向迈出的一大步。

# objective-c - 如何仅在代码中创建简单的表格视图控制器

> ID：13350877
> 
> 赞同：-2
> 
> 时间：2012-11-12T20:16:41.857
> 
> 标签：objective-c, ios, xcode, uitableview, interface-builder

我在我的应用程序中多次需要相同类型的表视图控制器，并且想创建一个更通用的表视图控制器，我可以一遍又一遍地使用它。

这些表格视图控制器非常简单，只显示数组的内容，选中选定的表格视图单元格，并`Done`在工具栏中的按钮被点击后将选定的表格视图单元格的索引返回给调用视图控制器.

目前，我直接在 Storyboard 中创建这些表视图控制器中的每一个，并使用 segue 实例化它们。

是否可以仅在代码中执行此操作（不使用 Storyboard 或 xibs）？

将它们实例化并推送到导航控制器堆栈的最佳方法是什么（每个都将显示在视图控制器中）。

![在此处输入图像描述](../Images/99bab0a21e674029994cdf148c9b84d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:21:54.890

> 是否可以仅在代码中执行此操作（不使用 Storyboard 或 xibs）？

是的。您可以在故事板或 .xib 文件中执行的任何操作，都可以在代码中执行：

```
MyViewController *vc = [[MyViewController alloc] initWithNibName:nil bundle:nil]; 
```

注意：视图控制器的默认行为是从与视图控制器的类同名的 .xib 加载其视图，当您传递`nil`.xib 名称时，`MyViewController.xib`例如上面的示例。因此，上面的行在代码中创建了视图控制器，但仍会从 .xib 加载视图。如果您还希望以编程方式创建视图，请覆盖`-loadView`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:25:50.527

在代码中执行此操作很简单。您可以像平常一样创建视图控制器类（扩展`UITableViewController`）。实现所有相同的表视图数据源和委托方法。所有这些都是一样的。

当您想使用表格视图控制器时，您只需执行以下操作：

```
MyTableViewController *vc = [[MyTableViewController alloc] init];
[self.navigationController pushViewController:vc animated:YES]; 
```

我会这样定义你的`MyTableViewController` `init`方法：

```
- (id)init {
    if ((self = [super initWithStyle:UITableViewStyleGrouped])) {
        // any other initialization
    }

    return self;
} 
```

顺便说一句 - 我有一个包含 100 多个视图控制器的应用程序，我从未使用过界面构建​​器或故事板。都是代码。

# gmail-contextual-gadgets - 我可以将上下文 gmail 小工具添加到 gmail 用户帐户吗

> ID：13350880
> 
> 赞同：1
> 
> 时间：2012-11-12T20:16:50.677
> 
> 标签：gmail-contextual-gadgets

我在 Google App 市场中开发和发布了一个上下文小工具。我可以将此上下文小工具添加到任何 gmail 用户帐户吗？

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:43:33.370

不，只有通过 Google Apps 市场安装的 Google Apps 帐户。

# python - setCmd 的托管对象上的 pySNMP 序列

> ID：13350888
> 
> 赞同：0
> 
> 时间：2012-11-12T20:17:47.087
> 
> 标签：python, snmp, pysnmp

根据文档，`setCmd`varBinds 引用是一系列托管对象。但是，我尝试传递一个列表`[(oid0, value0), (oid1, value1)]`、一个元组`((oid0, value0), (oid1, value1))`或一个集合`set([(oid0, value0), (oid1, value1)])`，但它们都失败了，并出现错误“太多的值无法解包”。我需要能够发送带有多个 varbind 的单个集合请求。我可以成功发送每个托管对象，例如 (oid0, value0) 作为单独的`setCmd`. 任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:51:29.220

试试星号

```
abc = ((oid0, value0), (oid1, value1), (oid2, value2))
errorIndication, errorStatus, errorIndex, varBinds = cmdgen.CommandGenerator().setCmd(
    self.authData, cmdgen.UdpTransportTarget((host_addr, 161)), *abc) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T07:14:46.127

如[示例页面](http://pysnmp.sourceforge.net/examples/current/v3arch/oneliner/manager/setgen.html)所示，将可变数量的 (oid, value) 元组传递给 setCmd() 是一种向请求消息添加多个 var-bind 的方法。

以下代码将使用三个 var-bind 构建和发送 SNMP SET 消息：

```
cmdGen.setCmd(
    cmdgen.CommunityData('public'),
    cmdgen.UdpTransportTarget(('localhost', 161)),
    ('1.3.6.1.2.1.1.2.0', rfc1902.ObjectName('1.3.6.1.4.1.20408.1.1')),
    ('1.3.6.1.2.1.1.2.0', '1.3.6.1.4.1.20408.1.1'),
    ('1.3.6.1.2.1.1.5.0', rfc1902.OctetString('new system name'))
) 
```

# sql - 访问查询分区数据并对每个分区求和？

> ID：13350905
> 
> 赞同：3
> 
> 时间：2012-11-12T20:18:36.803
> 
> 标签：sql, ms-access, vba

我有一个关于字段 `date` `hour`和的查询`value`。
它看起来像这样

```
 date       hour   value 
    xx/xx/xx     15     100
    xx/xx/xx     30     122
    xx/xx/xx     45      50
    ...         100     100
    ...         115      23
    ...         ...     ...
    ...         ...     ...
    ...        2400     400
    ...          15      23 
```

基本上，`date`是日期，`hour`是小时，`value`是特定 15 分钟间隔的值。我一直试图弄清楚的是一种每小时（所以 15、30、45 和 100）或（1015、1030、1045、1100）[正如你所看到的时间是军事式的 1:00 pm 是1300 和午夜 2400]，并将它们的值相加。所以我希望返回这样的东西：

```
 xx/xx/xx    100     372
    xx/xx/xx    200     23 + (130 data) + (145 data) + (200 data) 
```

依此类推...该表平均大约有 100 天，它们都从 15 到 2400 开始，以 15 递增，值列的数字不同。

我曾考虑过使用分区、分组依据等，但没有真正的想法如何解决它。本质上，我必须取 4 行（一个小时），将它们的值相加，吐出日期、小时和求和值，然后每天重复。我不是要代码，只是对我应该使用的东西提供一些帮助，因为这似乎是一个简单的问题减去解决它的关键。

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:21:18.023

我可能记错了您如何在 Access 中转换为 int，但这可能有效：

```
Select
  [date],
  100 * (1 + Cint(([Hour] - 1) / 100)),
  Sum(Value)
From
  Query
Group By
  [date],
  100 * (1 + Cint(([Hour] - 1) / 100))
Order By
  1, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:26:15.843

```
SELECT
   DateCol,
   Int(HourCol \ -100) * -100 AS Hr,
   Sum(Value) AS Value
FROM
   YourTable
GROUP BY
   DateCol,
   Int(HourCol \ -100) * -100 
```

或者你可以使用`((Hr + 99) \ 100) * 100`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:28:07.010

按小时/100 分组几乎可以让您到达那里 - 从小时中减去 1 将使上午 1 点下降到 99，并被包含在分组中。这将给出一个如下所示的查询：

```
SELECT Table1.Dte, Int(([tme]-1)/100) AS Hr, Sum(Table1.Val) AS TotVal
FROM Table1
GROUP BY Table1.Dte, Int(([tme]-1)/100); 
```

# python - 在 Python 中将其他时间值转换为日期时间格式

> ID：13350909
> 
> 赞同：2
> 
> 时间：2012-11-12T20:18:40.590
> 
> 标签：python, date, time, module, compare

我有一次显示为：

```
2012-11-12 15:16:08.648521 
```

另一个时间显示为：

```
14:44:02 Mon Nov 12 2012 
```

有没有办法将第二时间格式转换为第一次格式的格式（例如 2012 年 11 月 12 日星期一 14:44:02 变为 2012-11-12 14:44:02.?????）？我需要将第二个日期（从日志中提取）与另一个日期进行比较，以确认我得到了正确的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T20:21:44.760

查看[datetime.datetime.strptime](http://docs.python.org/2/library/datetime.html#datetime.datetime.strptime)。

您只需要为每种格式编写格式规范，将两个值都转换为`datetime`对象，然后进行比较。（您可以将一种字符串格式转换为另一种格式并比较字符串，但这不如想法好，我将在下面解释。）

例如：

```
>>> import datetime
>>> fmt1 = '%Y-%m-%d %H:%M:%S.%f'
>>> fmt2 = '%H:%M:%S %a %b %d %Y'
>>> s1 = '2012-11-12 15:16:08.648521'
>>> s2 = '14:44:02 Mon Nov 12 2012'
>>> dt1 = datetime.datetime.strptime(s1, fmt1)
>>> dt2 = datetime.datetime.strptime(s2, fmt2)
>>> cmp(dt1, dt2)
1
>>> dt1
datetime.datetime(2012, 11, 12, 15, 16, 8, 648521)
>>> dt2
datetime.datetime(2012, 11, 12, 14, 44, 2) 
```

请注意，您的一种时间格式包括微秒，而另一种则不包括，这意味着只有当第一个恰好位于第二个标记处（以 结尾`.000000`）时，它们实际上才会相等。如何处理它取决于你想要做什么。

例如，如果你想四舍五入到最接近的秒，你可以这样做：

```
dt1 = datetime.datetime(dt1.year, dt1.month, dt1.day, 
                        dt1.hour, dt1.minute, 
                        dt1.second + (1 if dt1.microsecond >= 500000 else 0), 0) 
```

或者，如果您想检查某个 delta 范围内的相等性：

```
abs(dt2 - dt1) < datetime.timedelta(0, 1) 
```

您可能会遇到的另一个问题是时区。如果其中一个日期是本地日期，另一个是 GMT，则您必须在解析后转换其中一个日期。

您最初的问题是询问如何将一种格式转换为另一种格式。您*可以*这样做，然后将它们作为字符串进行比较，但最好将它们作为实际`datetime`值进行比较。一方面，如果您将它们都转换为第二种格式，它们甚至不能正确地作为字符串进行比较（即使是 23 小时后`14:44:02 Mon Nov 12 2012`也小于）。`15:44:02 Sun Nov 11 2012`它还使处理微秒、时区等变得更加复杂。但是，如果您真的想这样做，`strftime`则与以下功能相反`strptime`：

```
>>> datetime.datetime.strftime(dt2, fmt1)
'2012-11-12 14:44:02.00000' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:25:22.880

尝试

```
datetime.strptime("14:44:02 Mon Nov 12 2012", "%H:%M:%S %a %m %d %Y").strftime("%Y-%m-%d %H:%M:%S.%f") 
```

# informatica - Informatica：序列生成

> ID：13350911
> 
> 赞同：0
> 
> 时间：2012-11-12T20:18:43.647
> 
> 标签：informatica

在不使用序列生成器***的情况下，我们如何在 informatica 映射中生成序列***？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T04:26:17.907

好吧，就像其他人说的那样，我更愿意就您为什么要避免使用序列生成器提出具体问题。话虽如此，如果我向序列生成器的“替代的想法”敞开心扉，有些事情会浮现在脑海中

1.  如果您有一个相对简单的映射，您可以嵌入一个隐藏在源限定符中的 oracle/db sequence.nextval 调用。

2.  您也可以在 sql 转换中嵌入 db/sequence 调用。但要知道，这将是反性能的。

3.  您也可以使用持久变量来实现序列生成器的行为，但存在限制和缺点。

所以，再一次，根据你想要做什么以及你卡在哪里，你可能想要重新发布/编辑你的问题..也许会得到一个更直接的答案。

# sublimetext2 - 在 Sublime Text 2 中查找：当我将 find 与引号一起使用时如何使 sublime 文本搜索双引号，反之亦然

> ID：13350917
> 
> 赞同：3
> 
> 时间：2012-11-12T20:19:14.673
> 
> 标签：sublimetext2, sublimetext

我有一个很长的 JavaScrip 文档。我需要查找特定模式之前或之后的字符串，但我不知道文档的作者是使用单引号 ( `'`) 还是双引号 ( `"`) 作为字符串。所以我必须每次都重复我的搜索。

我可以让 Sublime Text 忽略双引号或单引号并搜索所有匹配的模式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T10:24:42.550

使用 启用正则表达式`Alt+R`，然后在搜索字段中键入以下内容：

```
["'](String To Find)["'] 
```

您的括号`String To Find`将允许您引用匹配的字符串`\1`

# android - Android /data/data/(packageName)/databases 未创建

> ID：13350920
> 
> 赞同：1
> 
> 时间：2012-11-12T20:19:32.480
> 
> 标签：android, sqlite

我正在使用现有的 SQLite 数据库，我已经查看了大多数教程，并且我让它工作了很短的时间。现在我在复制数据库时收到错误消息。长话短说， /data/data/(packageName)/databases 不存在。我在我的模拟器上使用 DDMS 文件资源管理器添加了该文件夹，它工作正常。什么会导致 /databases 文件夹无法创建？

```
private void copyDataBase() throws IOException{
    InputStream myInput = dbContext.getAssets().open(DATABASE_NAME);
    String outFileName = DATABASE_PATH + DATABASE_NAME;
    OutputStream myOutput = new FileOutputStream(outFileName);
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:53:09.313

试试这个，它可能对你有帮助

[链接 1](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

[示例 2 这绝对会帮助你](https://gist.github.com/1271795)

# google-drive-api - “真实用户”和 API 之间的行为不一致

> ID：13350922
> 
> 赞同：2
> 
> 时间：2012-11-12T20:19:34.383
> 
> 标签：google-drive-api

首先，很抱歉使用该频道，但是对于 Drive SDK 问题，没有其他“开放”的沟通渠道。

看，问题是，如果您尝试访问您无法从浏览器访问的 Google Drive 文档，您会收到一个很好的警告，允许您请求访问该文件（因此，您会得到 CONFIRMATION 该文档存在，并且您无权访问它）。

如果您尝试从 API 访问您无权访问的文件，则会收到 404，这并不能确认该文档存在。

这太糟糕了，特别是在您的 Google Apps 域上工作时，即：我今天可能可以从用户 U 访问文件 X，而明天用户 U 将无法从 API 访问该文件（即：所有权变更）我将得到 404绝对没有指向我应该在哪里查找该文件或者它是否存在的指针！

在浏览器中，您只需“请求访问”并等待，但在 API 中，您有两个选择：a）假设文件已消失或 b）从您知道的每个用户帐户中查询该文件。

所以，这符合我的建议/要求：当有更好的代码时，请不要响应 404，403 会很好。另外，请在响应代码上添加一个关于“去哪里”的指针。您也可以保留 404，但添加“所有者”的指针。

最后，为服务帐户找到某种方法来搜索域内的**所有内容:)**

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:08:54.380

感谢您提出这个问题。API 和用户案例之间存在细微差别：使用 API，发送大量随机 ID 以查找文件要容易得多。如果我们在文件存在但尚未共享的情况下返回 403，这会将一些信息泄漏给运行它的脚本。如果您无权访问该文件，则您无权知道它是否存在。

在用户案例中，要尝试多个文件 ID 直到找到所需的 ID 会困难得多。它只是在浏览器中花费的时间太长，因此这是一个更可接受的风险。例如，如果您单击链接，则您已经知道该文件存在，因此不会泄露任何额外信息。

搜索域中所有文件的服务帐户是一个很好的功能请求，谢谢。不过现在不可用，抱歉。

# c++ - 具有多重继承的纯虚函数重载和协变返回类型

> ID：13350923
> 
> 赞同：1
> 
> 时间：2012-11-12T20:19:37.860
> 
> 标签：c++, inheritance, virtual, covariant

我必须修改我之前的问题。使用多重继承创建协变返回类型是否有任何限制？

下面的代码提出了问题。如果我们取消注释从 IDFPin 继承的类 IDFOutputPin，当我们尝试通过 IDFSourceNode 接口从 Source 类型的对象获取 IDFOutputPin 时，整个代码都会中断。质疑为什么会这样？我刚刚开始使用模板和这样的mixin，所以也许有一些限制，或者可能是编译器错误 - VS2010？

```
class PinBase {};
class Pin : public PinBase {};
class OutputPin : public Pin {};
class ExtOutputPin : public OutputPin {};
class IDFPin {};
class IDFOutputPin : /*public IDFPin,*/ public ExtOutputPin {}; // <---- when we uncomment this line part our covariant return type is created through multiple inharitance and the code breaks - question WHY?
class CustomDFPin : public IDFOutputPin {};

class Node {};
class IDFNode : public virtual Node {};

class ISourceNode : public virtual Node
{
public:
    virtual OutputPin * get(int idx)  = 0;
};

class IDFSourceNode : public virtual IDFNode, public virtual ISourceNode
{
public:
    virtual IDFOutputPin * get(int idx) = 0;
};

template<class Pin, class Node>
class NodeImpl
{
public:
    typedef std::vector<Pin*> Pins;

public:

    void addPin(Pin * pin)
    {
        pins_.push_back(pin);
    }

    void removePin(Pin * pin)
    {
        std::remove(pins_.begin(), pins_.end(), pin);
    }

    Pin * pin(int idx) { return pins_[idx]; }
    const Pin * pin(int idx) const { return pins_[idx]; }

private:
    Pins pins_;
};

template<class OPin = Pin, class Interface = ISourceNode>
class SourceNode : public virtual Interface
{
protected:

    void addPin(OPin * pin)
    {
        pins_.addPin(pin);
    }

public:
    virtual OPin * get(int idx)
    {
        return pins_.pin(idx);
    }

private:
    NodeImpl<OPin, SourceNode<OPin, Interface>> pins_;
};

template<class OPin = DFPin, class Interface = IDFSourceNode>
class DFSourceNode : public SourceNode<OPin, Interface>
{

};

class Source : public DFSourceNode<CustomDFPin>
{
public:
    Source()
    {
        addPin(new CustomDFPin());
    }
};

int main( int argc, char **argv)
{
    Source * tmp = new Source();
    IDFSourceNode * tmpB = tmp;
    CustomDFPin * pin = tmp->get(0);
    IDFOutputPin * pinB = tmpB->get(0); //this call here calls pure virtual function if I am not wrong, exception is thrown when IDFOutputPin is created through multiple inheritance

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:25:42.730

我无法重现您的问题。以下代码对我来说很好，并且似乎可以满足您的要求：

```
struct A { };
struct B : A { };

struct Foo
{
    virtual A * get() = 0;
};

struct Bar : Foo
{
    virtual B * get() = 0;
};

struct Zip : Bar
{
    //virtual A * get() { return nullptr; }  // Error, as expected
    virtual B * get() { return nullptr; }
};

int main()
{
    Zip x;
} 
```

如果你有 C++11，你甚至可以`get`用virt-specifier装饰除第一个以外的所有东西。`override`

# javascript - 在 html 页面上设计弹出窗口

> ID：13350925
> 
> 赞同：1
> 
> 时间：2012-11-12T20:19:42.440
> 
> 标签：javascript, html, popup

由于我对`HTML`and很`JavaScript`陌生，我想知道弹出窗口是否有可能出现弹出窗口`alert()`？正如我想我发现的那样，在、`JavaScript`和中有三个预定义的弹出窗口。但我想制作一个自定义弹出窗口，其中包含代码，但我不知道如何解决这个问题。`alert()``confirm()``prompt()``HTML`

本身是否有方法`JavaScript`可以覆盖弹出窗口的外观，或者我是否需要导入某些包来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:21:46.917

进口。

一个非常好的例子是 Twitter Bootstrap 的模态控件——http://twitter.github.com/bootstrap/javascript.html#modals。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:21:57.460

您不能将自定义 HTML 放入警报中。

我会推荐使用[jQuery UI Dialogs](http://jqueryui.com/dialog/)来创建自定义对话框。它们将通过玻璃窗格显示在您的页面顶部，而不是在弹出窗口中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T20:22:43.683

听起来你需要一个灯箱，而不一定是一个弹出窗口。周围有很多，如果您使用 jquery，那么有许多免费的 jquery 灯箱插件可用。

你可以[在这里](http://www.designyourway.net/blog/resources/30-efficient-jquery-lightbox-plugins/)看到很多例子，我个人喜欢 jQuery 灯箱插件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T20:23:44.220

您无法更改浏览器提供的对话框的外观和感觉，这些对话框可以通过您在问题中提到的功能进行访问。

您需要在 Javascript 中构建一些模仿对话框行为的东西。我建议不要从头开始，而是使用允许您轻松创建对话框的库。一个很好的例子是[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T20:24:04.530

是的。您可以使用许多不同的“弹出窗口”，它们通常被称为模态窗口或对话框窗口。

您可以使用 jQuery UI 或 Twitter Bootstrap 等库创建带有 HTML 的自定义警报。还有其他可用的，但我建议这些更常见。

**jQuery 用户界面**

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

**推特引导**

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

jQuery UI 页面中的模态示例可帮助您入门：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Dialog - Modal confirmation</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    });
    </script>
</head>
<body>

<div id="dialog-confirm" title="Empty the recycle bin?">
    <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>These items will be permanently deleted and cannot be recovered. Are you sure?</p>
</div>

<p>Sed vel diam id libero <a href="http://example.com">rutrum convallis</a>. Donec aliquet leo vel magna. Phasellus rhoncus faucibus ante. Etiam bibendum, enim faucibus aliquet rhoncus, arcu felis ultricies neque, sit amet auctor elit eros a lectus.</p>

</body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-12T20:25:02.437

我个人会为此使用 Colorbox。Colorbox 非常通用，可用于显示警报以及其他内容。

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-12T20:26:18.783

有许多包含 Popups 的 JS 库，从 AjaxControlToolkit 到 jQuery 等。

如果你想保持简单，你可以使用 DIV 自己创建它。您可以创建一个绝对定位的 DIV，它将代表您的弹出窗口并使用 JavaScript 显示和隐藏它，例如通过设置 DISPLAY 或 VISIBLE 属性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-01T22:42:46.927

是的

```
details > p {
  padding: 0.5rem;
  background: lightcoral;
  margin: 0;
  display: flex;
  flex-direction: column
}

details[open] {
  position: fixed;
  width: 33%;
  left: 33%;
  top: 10vh;
  outline: 10000px #000000d4 solid
}
```

```
<details>
  <summary>Popup</summary>
  <p>Powered by html<input></p> 
</details>

<details>
  <summary>Popup</summary>
  <p>Powered by html<input></p> 
</details>
```

# email - Sendgrid 替代方案？

> ID：13350929
> 
> 赞同：4
> 
> 时间：2012-11-12T20:19:56.053
> 
> 标签：email, smtp, sendgrid, mailjet

我已经使用 sendgrid 一年了。最近，他们增加了使用他们的时事通讯应用程序的费用，该应用程序曾经是免费的。购买自托管的自动回复器来发送时事通讯对于我的需求来说太过分了，因为我不需要复杂的细分和功能。我正在寻找像 sendgrid 这样的 SMTP 中继服务，它也有一个时事通讯应用程序，可以让我在界面内执行以下操作而无需额外费用：

1.  将电子邮件（包括额外的字段名称等）存储在列表中。
2.  创建和安排活动。
3.  通过基于域（hotmail、gmail 等）的 API 查看或提取打开/点击报告
4.  查看或提取自特定日期以来未打开或单击电子邮件的联系人。

要使用 sendgrid 完成 #4，我必须购买专用服务器来处理传入的事件通知，因为我的 VPS 服务器无法承担负载。这是另一项额外费用。

Mailjet 让我做 2、3 和 4，但我只能用电子邮件存储联系人。他们的应用程序并非旨在保存名称、ips 等额外字段。而且，他们的支持真的很慢。需要几天才能得到答复。

您可以为我正在寻找的功能建议任何替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:46:38.943

其他提供时事通讯功能的 SMTP 中继服务包括 Mandrill 和 Elastic Email。- Elastic Email 的营销平台包含在所有计划中。- Mandrill 的 WordPress 插件通过 Mandrill 发送 WordPress 生成的电子邮件。

免责声明：我在第三方社交平台 Ombud 工作，研究 B2B 技术，例如事务性电子邮件传递和电子邮件营销。

如果您点击 Ombud 的此链接，您可以根据您想要的那些功能创建交易电子邮件传递解决方案的自定义比较：http: [//ombud.com/r/xo](http://ombud.com/r/xo)。希望这可以帮助！

# sql - 从 t1 中选择类别列表，然后从 t2 中选择总和，其中为每个数据提供了类别列表

> ID：13350932
> 
> 赞同：1
> 
> 时间：2012-11-12T20:20:23.010
> 
> 标签：sql, oracle

我有 2 张桌子正在使用。

表1有10个类别，条目不变。除非我改变。

```
Cat_NO | Cause
1      = Animal
2      = Bird
3      = Bear
4      = Dog
5      = Snake
6      = Human
7      = Cow
8      = Car
9      = Fire
10     = Rain 
```

表 2 有事件发生时随机出现的数据。未知数量的记录/数据。

有以下字段

```
ID     Cat_Code   DateTime    Location    OtherField1   OtherField2

786      7           ...        ...           ...          ...
787      6           ...        ...           ...          ...
789      7           ...        ...           ...          ...
791      1           ...        ...           ...          ...
793      3           ...        ...           ...          ...
794      1           ...        ...           ...          ...
796      4           ...        ...           ...          ...
806      9           ...        ...           ...          ... 
```

我正在尝试编写可以为表 1 中的所有类别提供总计的查询

结果应该是

```
CAUSE       Total        Hours(I can do this) Field2(this too) Field3(This also)
Animal        2
Bird          0     
Bear          1
Dog           1
Snake         0
Human         1
Cow           2
Car           0
Fire          1
Rain          0 
```

到目前为止我已经写了

```
SELECT
       Cause
from Table1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:25:53.113

```
select t1.cause, count(t2.cat_code) as total
from table1 t1 left outer join table2 t2 on t1.cat_no = t2.cat_code
group by t1.cause 
```

# c - 程序集中的线程本地存储

> ID：13350936
> 
> 赞同：9
> 
> 时间：2012-11-12T20:20:34.210
> 
> 标签：c, gcc, assembly

我想在汇编中增加一个 TLS 变量，但在汇编代码中给出了分段错误。我不想让编译器更改任何其他寄存器或内存。有没有办法在不使用 gcc 输入和输出语法的情况下做到这一点？

```
__thread unsigned val;
int main() {
  val = 0;
  asm("incl %gs:val");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T22:24:23.760

如果出于某种原因你真的需要这样做，你应该通过在 C 中预加载它的地址来从汇编语言中访问一个线程局部变量，如下所示：

```
__thread unsigned val;
void incval(void)
{
  unsigned *vp = &val;
  asm ("incl\t%0" : "+m" (*vp));
} 
```

这是因为访问线程局部变量所需的代码序列对于 GCC 支持的几乎每个 OS 和 CPU 组合都是不同的，并且如果您正在编译共享库而不是可执行文件（即使用`-fPIC`），也会有所不同。上述构造允许编译器为您发出正确的代码序列。在无需任何额外指令即可访问线程局部变量的情况下，地址生成将被折叠到汇编操作中。作为说明，这里是 x86/Linux 的 gcc 4.7 如何以几种不同的可能模式编译上述内容（为了清楚起见，我在所有情况下都删除了一堆汇编程序指令）......

```
# -S -O2 -m32 -fomit-frame-pointer
incval:
        incl    %gs:val@ntpoff
        ret

# -S -O2 -m64
incval:
        incl    %fs:val@tpoff
        ret

# -S -O2 -m32 -fomit-frame-pointer -fpic
incval:
        pushl   %ebx
        call    __x86.get_pc_thunk.bx
        addl    $_GLOBAL_OFFSET_TABLE_, %ebx
        leal    val@tlsgd(,%ebx,1), %eax
        call    ___tls_get_addr@PLT
        incl    (%eax)
        popl    %ebx
        ret

# -S -O2 -m64 -fpic
incval:
        .byte   0x66
        leaq    val@tlsgd(%rip), %rdi
        .value  0x6666
        rex64
        call    __tls_get_addr@PLT
        incl    (%rax)
        ret 
```

Do realize that *all four examples* would be different if I'd compiled for x86/OSX, and different yet again for x86/Windows.

# android - OnItemCLickLIsener 在 ListView 上不起作用

> ID：13350937
> 
> 赞同：0
> 
> 时间：2012-11-12T20:20:38.757
> 
> 标签：android, android-layout, listview

我有一个 ListView 的活动。具有自定义视图的 ListView。我将 OnItemClickLIsener 添加到 ListView。当我点击项目时，结果我什么也看不到。ListView 的活动：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/silver_conv">
<FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="40dp" android:layout_alignParentTop="true" android:id="@+id/topcontainer"
        android:background="@color/black">
</FrameLayout>
<ListView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:id="@+id/chat_list" android:layout_below="@+id/topcontainer"
        android:layout_above="@+id/last_action"
        android:cacheColorHint="#00000000"
        android:layout_marginRight="2dp" android:clickable="true"/>
<TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
          android:text="last action was at time" android:id="@+id/last_action"
          android:longClickable="false"
          android:layout_centerHorizontal="true"
          android:layout_alignParentBottom="false" android:layout_above="@+id/action_container"
          android:layout_marginBottom="5dp" android:layout_alignParentLeft="false" android:layout_marginLeft="5dp"/>
<RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="43dp" android:layout_alignParentBottom="true" android:id="@+id/action_container"
        android:background="@drawable/conv_botom_action_gradient">
    <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/send"
            android:id="@+id/send_message_btn" android:layout_alignParentRight="true"
            android:layout_alignParentBottom="true"
            android:background="@drawable/blue_button_selector" android:textColor="@color/white"
            android:layout_marginLeft="3dp" android:layout_marginTop="3dp"/>
    <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/add_attach_btn"
            android:layout_alignParentLeft="true" android:layout_alignParentBottom="true"
            android:background="@drawable/add_attach_button_selector"
            android:layout_marginRight="2dp" android:layout_marginBottom="3dp" android:layout_marginTop="3dp"/>
    <EditText android:layout_width="40dp" android:layout_height="wrap_content" android:id="@+id/message_et"
              android:layout_toRightOf="@+id/add_attach_btn" android:layout_toLeftOf="@+id/send_message_btn"
              android:singleLine="true" android:layout_alignParentBottom="true" android:hint="Type message here"
              android:background="@drawable/message_input" android:layout_marginBottom="3dp"
              android:gravity="center_vertical" android:layout_marginTop="3dp"/>
</RelativeLayout> 
```

查看项目：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="horizontal"
          android:layout_width="match_parent"
          android:layout_height="wrap_content" android:gravity="center_vertical|left" android:focusable="false">

<LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:background="@drawable/incoming_message"
        android:id="@+id/container" android:layout_marginTop="5dp" android:layout_marginBottom="5dp"
        android:focusable="false">
    <FrameLayout android:layout_width="wrap_content" android:layout_height="wrap_content"
                 android:focusableInTouchMode="true" android:id="@+id/attach_container" android:focusable="false"/>
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="saa"
            android:id="@+id/message_text" android:textSize="17sp" android:textColor="@color/black"
            android:focusable="false"/>
</LinearLayout>
<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="New Text"
        android:id="@+id/date" android:textColor="@color/black" android:singleLine="true" android:lines="1"
        android:maxLines="1" android:ellipsize="none" android:layout_marginLeft="5dp" android:focusable="false"/> 
```

最后点击Listener：

```
private AdapterView.OnItemClickListener clickLister = new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> adapterView, View view, int pos, long l) {
        try {
            LinearLayout container = (LinearLayout)view.findViewById(R.id.container);
            TextView message = (TextView)container.findViewById(R.id.message_text);
            message.setTextColor(mContext.getResources().getColor(R.color.white));
            Log.e("My item is", "" + pos);
        }catch (Exception e){
            e.printStackTrace();
        }
    }
}; 
```

这是ListView的初始化：

```
mConvListView = (ListView)findViewById(R.id.chat_list);
    mConvListView.setDivider(null);
    mConvListView.setDividerHeight(0);
mConvListView.setItemsCanFocus(false);
    mConvListView.setOnItemClickListener(clickLister);
    mConvListView.setTranscriptMode(ListView.TRANSCRIPT_MODE_ALWAYS_SCROLL);
    mConvListView.setStackFromBottom(true); 
```

Ps对不起很多代码。但是第二天我找不到任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:48:13.513

通过在行布局中设置可聚焦对象，可以防止 ListView 获取触摸事件。

此 FrameLayout 正在使用触摸事件：

```
<FrameLayout 
    android:id="@+id/attach_container" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:focusableInTouchMode="true" 
    android:focusable="false"/> 
```

删除可聚焦设置，使其看起来像这样：

```
<FrameLayout 
    android:id="@+id/attach_container" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" /> 
```

（你真的应该组织你的 XML 以便可读，在 Eclipse 中使用`Ctrl`++ 。`Shift`）`F`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T23:49:02.353

为所有组件设置焦点，如下所示：

```
 android:focusable="false"

   android:focusableInTouchMode="false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:24:58.723

我猜你没有以正确的方式获得该项目。试试这个：

```
int position = (int) adapterView.getSelectedItemId();
Log.i("Position:", Integer.toString(position)); 
```

**编辑**

试试这段代码。

```
ListView lv = (ListView)findViewById(R.id.chat_list);
lv.setOnItemClickListener(new OnItemClickListener(){
       @Override
       public void onItemClick(AdapterView<?> parent, View v, int position, long id) { 

             int position = (int) parent.getSelectedItemId();
             Log.i("Position:", Integer.toString(position));
       }
}); 
```

# objective-c - 尝试在其视图不在窗口层次结构中的 * 上呈现 *

> ID：13350938
> 
> 赞同：36
> 
> 时间：2012-11-12T20:20:41.957
> 
> 标签：objective-c, ios, cocoa-touch, ios6

我正在尝试在我的应用程序委托中创建一个模式视图控制器（我创建了一个名为 showLoginView 的函数）。但是每当我尝试调用它时，我都会在 XCode 中收到警告：

```
Warning: Attempt to present <PSLoginViewController: 0x1fda2b40> on <PSViewController: 0x1fda0720> whose view is not in the window hierarchy! 
```

下面是方法代码：

```
- (void)showLoginView
{
    PSLoginViewController *loginViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"PSLoginViewController"];
    [self.window.rootViewController presentViewController:loginViewController animated:NO completion:nil];
} 
```

如何将视图添加到窗口层次结构？或者也许我做错了什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-12T20:24:32.967

您无法从 appDelegate 显示模态视图控制器。您需要从当前全屏显示的任何 viewController 中显示模态 ViewController。换句话说，您需要将该代码放入您的根视图控制器，或者您想要显示模态vc的任何一个......

此外，您还需要使用“presentModalViewController”方法来呈现模态。您可以在模态 vc 上设置属性，例如：

```
vC.modalPresentationStyle = UIModalPresentationFormSheet;
vC.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentModalViewController:vC animated:YES]; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-04T09:29:22.200

只要您检测到当前可见的视图控制器并处理当前控制器是导航控制器的情况，您实际上就可以从 AppDelegate 呈现模式视图控制器。

这是我所做的：

```
UIViewController *activeController = [UIApplication sharedApplication].keyWindow.rootViewController;
if ([activeController isKindOfClass:[UINavigationController class]]) {
   activeController = [(UINavigationController*) activeController visibleViewController];
}
[activeController presentModalViewController:loginViewController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-18T18:20:52.480

```
UIViewController *activeController = [UIApplication sharedApplication].keyWindow.rootViewController;
if ([activeController isKindOfClass:[UINavigationController class]])
{
   activeController = [(UINavigationController*) activeController visibleViewController];
}
else if (activeController.modalViewController)
{
    activeController = activeController.modalViewController;
}
[activeController presentModalViewController:vc animated:YES]; 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-19T09:29:27.990

我在 iOS 7 上遇到了这个问题 - 使任何建议的解决方案起作用的关键是调用

```
[self.window makeKeyAndVisible]; 
```

在你的`AppDelegate`. 在那次通话之后，从窗口中呈现一个模态视图`rootViewController`就可以了。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-01-21T18:25:23.627

该警告的另一个原因可能是您希望从不是最顶层视图控制器的实例中呈现视图控制器。

所以首先你必须得到最顶层的 UIViewController 并使用这个实例来调用 presentViewController：

```
UIViewController *root = [UIApplication sharedApplication].keyWindow.rootViewController;
while (root.presentedViewController) {
    root = root.presentedViewController;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-24T02:34:19.460

你可以 NSLog(@"%@", self.window.rootViewController)，看看 rootViewController 到底是什么。

当 rootViewController 是普通的 UIViewController 时，我遇到了这个问题。用 UINavigationController 替换它，希望它会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-08T13:06:51.213

尝试从其他控制器的委托调用中呈现控制器时遇到此问题。即：显示带有委托的搜索过滤器，一旦完成回到我的控制器并通过委托接收数据然后呈现控制器，我所要做的就是在委托中调度当前代码，因为你在另一个线程中，这就是为什么你'正在从主线程在您的视图上呈现来自该另一个线程的另一个控制器，因此必须返回主线程，只需将呈现代码如下：

```
 dispatch_async(dispatch_get_main_queue(), ^{
[self presentViewController:searchVC animated:true completion:nil];
 }); 
```

希望这可以帮助 ！

# android - 在 IntentService 中获取地理位置的上下文

> ID：13350943
> 
> 赞同：4
> 
> 时间：2012-11-12T20:21:21.677
> 
> 标签：android, android-intent

我正在创建一个调用内部 REST API 的 Android 类库，并且还利用需要 Context 的 Android 的 Geocoder 类（特别是 getFromLocation()）。我正计划将库设为 IntentService 以允许它异步运行，但我不知道如何处理 Context（GeoLoc 调用位于一个单独的类中，该类是 IntentService 调用的库的一部分）。

我的问题是，如何从 IntentService 中获取实例化 android.location.Geocoder 所需的上下文？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T20:24:35.580

每一个`Service` **都是**一个`Context`。您可以使用`this`或`getApplicationContext()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T13:09:33.357

[IntentService](http://developer.android.com/reference/android/app/IntentService.html)继承[服务](http://developer.android.com/reference/android/app/Service.html)，服务继承上下文。

每当您在 IntentService 中需要它时，您都可以随意使用“this”作为上下文。

# php - 从具有相同路由的 URL 中隐藏 Codeigniter 控制器名称

> ID：13350947
> 
> 赞同：2
> 
> 时间：2012-11-12T20:21:49.480
> 
> 标签：php, codeigniter, controller, routes

我刚刚开始使用 codeigniter，我想使用相同的路由设置从 URL 中隐藏控制器名称。

我有 3 个控制器，分别是学生、员工、教师，它们具有相同的功能，称为 home，这显然不起作用

```
$route['home'] = 'students/home';
$route['home'] = 'staff/home'; 
```

有没有办法做到这一点？我有使用包含用户类型的codeigniter会话类的会话数据所以我尝试了这样的事情

```
session_start()    
$route['home'] = $_SESSION['user_type'].'/home'; 
```

但我无法获取会话数据，也许它使用 codeigniter 会话类？那么，我怎样才能得到数据？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:28:27.030

也许您应该编写一个通用控制器并通过您的第二个 URI 参数进行分散：

家庭/学生或家庭/员工

```
$route['home/:any'] = "home"; 
```

和家庭控制器的索引方法：

```
public function index()
{
    $type = $this->uri->segment(2);
    switch($type){
        case "student":
            $this->student();
        break;
        case "staff":
            $this->staff();
        break;
        default:
            $this->some_other_method();
        break;
    }
} 
```

显然，如果需要，您将创建一个学生和教职员工的方法并以不同的方式处理事情。

附注 - 为什么要隐藏控制器的名称？这不像是一个安全漏洞或任何东西。

# jquery - 多个图像相互加载

> ID：13350948
> 
> 赞同：0
> 
> 时间：2012-11-12T20:21:51.007
> 
> 标签：jquery, css

我面临一个非常奇怪的问题。我在一个 div 中使用多个图像来加载相同的位置。问题是每个图像在加载时都在彼此之上加载。css 位置设置为`absolute`，我只希望第一个图像加载第一个图像下方的其余图像加载而不是它。并休息滑块将处理。谁能帮我这个 ？

我的图像结构如下

```
<div class="container">
    <div class="item item-1 active" style="display: block;">
        <div class="image">
            <img src="./eg/eg-101.jpg" alt="Breakers">
        </div>
    </div>
    <div class="item item-1 active" style="display: block;">
        <div class="image">
             <img src="./eg/eg-102.jpg" alt="Breakers">
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:26:25.910

默认情况下，DOM 中较低的事物具有较高的 z-index 并会出现在顶部。为您想要在顶部的元素设置 z-index 会将其置于其余元素之上。在所有元素上设置 z-index 将允许您以您想要的任何顺序“堆叠”它们。

# jquery - 选项卡中的 Twitter 引导程序、传单、地图大小问题

> ID：13350950
> 
> 赞同：2
> 
> 时间：2012-11-12T20:21:55.093
> 
> 标签：jquery, twitter-bootstrap, leaflet

我在玩 Twitter Bootstrap、Leaflet 和 jquery。我有下面的网站。 [https://dl.dropbox.com/u/3988632/Site/test.html](https://dl.dropbox.com/u/3988632/Site/test.html)

我已经四处寻找，找不到让传单地图在 div 容器中具有 100% 高度的方法。地图高度超出视口，似乎导致窗口向下滚动并隐藏标题。下面是我如何实现引导选项卡。

```
<div class="bs-docs-example">
        <ul id="myTab" class="nav nav-tabs">
          <li class="active"><a href="#home" data-toggle="tab" id="map1">Map</a></li>
          <li><a href="#profile" data-toggle="tab">Help</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
            <ul class="dropdown-menu">
              <li><a href="#dropdown1" data-toggle="tab">User Preferences</a></li>
              <li><a href="#dropdown2" data-toggle="tab">Setup</a></li>
            </ul>
          </li>
        </ul>
        <div id="myTabContent" class="tab-content">
          <div class="tab-pane fade in active" id="home">
          </div>
          <div class="tab-pane fade" id="profile">
            <p>Test Help</p>
          </div>
          <div class="tab-pane fade" id="dropdown1">
            <p>Test Dropdown1</p>
          </div>
          <div class="tab-pane fade" id="dropdown2">
            <p>Test Dropdown2</p>
          </div>
        </div>
</div> 
```

然后我将地图加载到第一个选项卡中。

```
<script>
    $('#home').load('https://dl.dropbox.com/u/3988632/Site/maptest.html');        
</script> 
```

如果我尝试将 css 文件中的高度设置为 height:100%; 但是保存地图的容器的高度为 0px。

我试过这个 jquery 脚本来调整地图 div 到包含的 div，但没有成功。

```
//Initial load of page 
```

$(document).ready(sizeContent);

//每次调整窗口大小 $(window).resize(sizeContent);

//动态分配高度 function sizeContent() { var newHeight = $("#container").height()/* - $("#header").height() - $("#footer").height() +“像素”*/；$("#map").css("height", newHeight); }

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:24:24.337

据我记得，由于安全原因，我们无法通过 ajax 加载其他网站内容.. 这个其他 stackoverflow 问题可能对您有所帮助..[无法使用 jQuery.load 将外部页面加载到我页面中的 div 中](https://stackoverflow.com/questions/5059302/cannot-load-an-external-page-with-jquery-load-into-a-div-in-my-page)

# c# - 在没有记录器的情况下手动创建编码的 UI 地图

> ID：13350953
> 
> 赞同：1
> 
> 时间：2012-11-12T20:22:01.390
> 
> 标签：c#, wpf, coded-ui-tests

我正在尝试找到一种不使用记录功能来创建对象存储库的方法。我想做的是为我的 WPF 应用程序的每个窗口（熟悉 WebDriver 的人的页面对象模式）创建单独的“页面”。

我想避免所有额外的东西编码 UI 记录并添加到项目中。我想要的只是一个简单的类，它映射到我想要的所有控件，然后在我的测试中使用该类。

Coded UI 是否有可能，如果可以，如何？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:04:00.977

codeplex 中有一个框架（一组帮助程序类）可以完全满足您的需求，但适用于网站。由于它是开源的，我想将它改编为 WPF 应用程序不会太难。您可以在以下位置找到所有详细信息：

[http://codeduicodefirst.codeplex.com/](http://codeduicodefirst.codeplex.com/)

# java - Android NDK OpenGL ES 将图形渲染到 Java 位图

> ID：13350961
> 
> 赞同：1
> 
> 时间：2012-11-12T20:22:21.897
> 
> 标签：java, android, c, opengl-es, android-ndk

我对从 OpenGL ES 1.0 渲染中检索位图感到困扰。图形渲染在 Android NDK 中完成，我想在 Android Java 中显示位图。我知道我必须使用 glReadPixels 函数。

我尝试将 Bitmap 对象传递给 NDK 并对其进行修改，如 NDK 的 bitmap-plasma 示例中所示，但发生错误：“GL_INVLID_EXCEPTION”并且位图未受影响。我曾尝试与 ABGR 位图组合，但没有成功。有我的代码：

```
void Java_com_example_polygonmap_PolygonMapyActivity_ndkOpenGLInit( JNIEnv*  env, jobject  obj, jobject bitmap ) {
AndroidBitmapInfo info;
int ret;
GLvoid* pixs;

if ((ret = AndroidBitmap_getInfo(env, bitmap, &info)) < 0) {
    LOGI("AndroidBitmap_getInfo() failed ! error=%d", ret);
    return;
}
if ((ret = AndroidBitmap_lockPixels(env, bitmap, &pixs)) < 0) {
    LOGI("AndroidBitmap_lockPixels() failed ! error=%d", ret);
}
glClearColor( 1.0f, 1.0f, 1.0f, 1.0f );
glShadeModel( GL_FLAT );
glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST );
///
glMatrixMode( GL_PROJECTION );
glLoadIdentity();
glViewport( 0, 0, 400, 400 );
glOrthof( 0.0f, (float)400, 0.0f, (float)400, -1.0f, 1.0f );
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glEnableClientState( GL_VERTEX_ARRAY );
glDisable( GL_TEXTURE_2D );
///
glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
glDisable( GL_TEXTURE_2D );
glVertexPointer(2, GL_FLOAT, 0, polygon[0]);
glColor4f(0.0f,0.0f,1.0f,1.0f);
glDrawArrays( GL_LINE_LOOP, 0, 3 );
glDisableClientState(GL_VERTEX_ARRAY);
glReadPixels(0, 0, 400, 400, GL_RGB, GL_UNSIGNED_BYTE, &pixs);
////
AndroidBitmap_unlockPixels(env, bitmap); 
```

我尝试了另一种方法，通过使用 glReadPixels 读取我自己的 unsigned char 数组，将其传递给 Java 并在此处从数组创建位图。现在像素读取不会返回任何异常，但是在尝试将字节数组解析为位图时遇到了麻烦，所以这种方式也失败了。代码几乎相同，但没有位图初始化和像素读取部分略有不同：

```
jbyteArray Java_com_example_polygonmap_PolygonMapyActivity_ndkOpenGLInit( JNIEnv*  env, jobject  obj)
{
void* pixs;
unsigned char ch[256*256*4];

glClearColor( 1.0f, 1.0f, 1.0f, 1.0f );
glShadeModel( GL_FLAT );
glHint( GL_PERSPECTIVE_CORRECTION_HINT, GL_FASTEST );
///
glMatrixMode( GL_PROJECTION );
glLoadIdentity();
glViewport( 0, 0, 256, 256 );
glOrthof( 0.0f, (float)256, 0.0f, (float)256, -1.0f, 1.0f );
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glEnableClientState( GL_VERTEX_ARRAY );
glDisable( GL_TEXTURE_2D );
///
glClear( GL_COLOR_BUFFER_BIT);
glDisable( GL_TEXTURE_2D );
glVertexPointer(2, GL_FLOAT, 0, polygon[0]);
glColor4f(1.0f,0.0f,0.0f,1.0f);
glDrawArrays( GL_LINE_LOOP, 0, 3 );
glDisableClientState(GL_VERTEX_ARRAY);
glReadPixels(0, 0, 256, 256, GL_RGBA, GL_UNSIGNED_BYTE, &pixs);
jcharArray jch = (*env)->NewCharArray(env, 256*256*4);
(*env)->SetCharArrayRegion(env, jch, 0 , 256*256*4, &ch); 
```

这是字节数组到位图 Java 代码：

```
Bitmap b = BitmapFactory.decodeByteArray(ch.toString().getBytes(), 0 , ch.toString().getBytes().length); 
```

我的渲染是在 GLSurfaceView 上完成的，并在本机 c 中实现，它工作正常，除了位图导入。

我将非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T03:30:07.550

```
glReadPixels(0, 0, 400, 400, GL_RGB, GL_UNSIGNED_BYTE, &pixs); 
```

应该是***pix***而不是***&pix*** : (没有 "&" - 否则它是局部变量的地址而不是指向像素数据的指针)

```
glReadPixels(0, 0, 400, 400, GL_RGB, GL_UNSIGNED_BYTE, pixs); 
```

# lua - wxLua 拆分器窗口调整大小

> ID：13350962
> 
> 赞同：1
> 
> 时间：2012-11-12T20:22:33.423
> 
> 标签：lua, wxwidgets, xrc, wxlua

在下面的图像片段中，棕褐色的输出窗口和蓝色的命令行参数窗口之间有一个分隔框。如果需要，用户可以更改蓝色窗口的宽度（通过拖动分隔框），但我希望蓝色窗口在调整应用程序大小时保持其宽度，也就是说，棕褐色窗口会完成所有水平收缩和增长。

![图片](../Images/1d557f62433092e678eca44ccda4e671.png)

在我的应用程序的 XRC 文件中，我有一个 BoxSizerH 包含一个垂直拆分器。分离器有两个面板。每个面板都包含一个包含多行文本控件的 StaticBoxSizerV。

我必须怎么做才能让用户固定最右边窗口的宽度？

我是否需要调整大小并设置窗扇位置以保持最后一个被捕获的分离器拖动，或者是否有更简单的方法只使用初始设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:23:18.630

在文档中查看 wxSplitterWindow::SetSashGravity：

[http://docs.wxwidgets.org/trunk/classwx_splitter_window.html#a3c52925dffd02509d110086d4bb29373](http://docs.wxwidgets.org/trunk/classwx_splitter_window.html#a3c52925dffd02509d110086d4bb29373)

# python - 在大量关键字列表中检查单词的最快方法 - Python 性能

> ID：13350966
> 
> 赞同：5
> 
> 时间：2012-11-12T20:22:43.893
> 
> 标签：python, performance, search

*感谢您惊人的快速响应。Stackoverflow 太棒了！*

我需要检查一个单词（或者说是数千个）是否与包含关键字的 dict 匹配。

例如，假设我有一个字符串：`"The fluffy fox jumped the friggin fence."` 我需要根据关键字字典检查字符串的每个单词，如果匹配，则返回所有值。

我创建了一个 dict `filters`：（`uniqueid`意思是“lk2m3lk4m2”，其余的是“静态”。）

```
filters:
        { "fox" : [
                    { 'subscription' : 'uniqueid', 'link' : 'uniqueid' },
                    { 'subscription' : 'uniqueid', 'link' : 'uniqueid' }
                  ]},

        { "fence" : [
                      { 'subscription' : 'uniqueid', 'link' : 'uniqueid' }
                    ]} 
```

...并计划为字符串中的每个单词迭代过滤器（我必须以每秒 5000 个单词的速度执行此操作。换句话说，性能是最重要的问题。

过滤关键字的数量可能会增长到数千，而字符串的长度永远不会超过一个正常的句子（即 5-20 个单词）。因此，我将遍历字符串中的每个单词并检查它是否包含在过滤器列表中。但是，以 500 句/秒的速度，我仍在查看大量计算。

例如，是否可以对列表进行排序（即列表中 dict 的键），从而显着提高性能？是否有我应该使用的 C 实现（比如我正在使用 cjson 并获得很大的性能提升）？

抱歉，这个问题有点不稳定——但我应该如何完成这项任务？

编辑：

预期输入：
`"The fluffy fox jumped the friggin fence."`
预期输出：（
`{ 'subscription' : 'flskdmfslk32232', 'link' : 'sfdksmfls22323' }, { 'subscription' : '3023940fsdf', 'link' : 'sdflsfm223' }`
即每个匹配关键字下列出的订阅。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:46:40.567

您可以通过执行 filters.has_key(word) 或执行以下操作来确定一个单词是否是过滤器中的键：

```
subscriptions = filters.get(word)
if subscriptions is not None:
    pass # TODO do something with subscriptions 
```

或者：

```
try:
    subscriptions = filters[word]
    # TODO do something with subscriptions
except:
    pass # probably don't need to do anything if not present 
```

没有必要遍历过滤器中的每个条目。相反，您将希望拆分输入字符串，将每个单词添加到 Set（以消除重复项），然后遍历您的集合以查找过滤器字典中的每个单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:44:00.090

在 Python 中最快的方法是使用字典查找句子中的每个单词，并累积和关联值。主要的数据结构可能看起来像这样：

```
filters = {
    "fox" : (
              ('uniqueid1', 'uniqueid2'),
              ('uniqueid3', 'uniqueid4'),
            ),
    "fence" : (
                ('uniqueid5', 'uniqueid6'),
              ),
          } 
```

使用这种方式（在 8 位字符上）：

```
from string import punctuation

sentence = 'The fluffy fox jumped the friggin fence.'
sentence = sentence.translate(None, punctuation)  # remove punctuation chars

print [filters.get(word) for word in sentence.split() if word in filters] 
```

或者它可能会更快（找出时间），这样可以避免双重字典查找：

```
from string import punctuation

def map_words(sentence):
    for word in sentence.translate(None, punctuation).split():
        try:
            yield filters[word]
        except KeyError:
            pass

sentence = 'The fluffy fox jumped the friggin fence.'
print [v for v in map_words(sentence)] 
```

无论哪种方式，这都是输出：

```
[(('uniqueid1', 'uniqueid2'), ('uniqueid3', 'uniqueid4')), (('uniqueid5', 'uniqueid6'),)] 
```

# javascript - 一个区域标签显示两个 href 文件

> ID：13350967
> 
> 赞同：0
> 
> 时间：2012-11-12T20:22:51.177
> 
> 标签：javascript, html

我有两个 php 页面，一个正在创建表格，另一个正在创建图表。当有人单击图像时，我的 index.html 文件应该同时调用它们并在主页上显示表格和图形。我用过这段代码

```
<div id="upload_target"   ></div>
<div id="upload_target2"   ></div>

<img src="image.png" alt="hello"  usemap="#use" >
<map name="use">
    <area shape="poly" coords="..." href="table.html" target="upload_target">
    <area shape="poly" coords="..." href="graph.html" target="upload_target2">
</map> 
```

所以当用户点击 area_1 表时显示在“upload_target”中，当他点击 area_2 时，它显示在部分“upload_target2”中。

但我只想为他们两个都设置一个区域标签，所以当他点击图片时，两者都可以显示如下内容：

```
<img src="image.png" alt="hello"  usemap="#use" >
    <map name="use">
        <area shape="poly" coords="..." href="table.html" target="upload_target" href="graph.html" target="upload_target2">

    </map> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:03:48.223

不幸的是，属性在 HTML 元素上必须是唯一的。您可以通过 area 元素上的 onclick 事件来完成此操作。

例如，您可以尝试以下 HTML：

```
<div id="upload_target1"></div>
<div id="upload_target2"></div>
<img src="image.png" alt="hello"  usemap="#use" />
    <map name="use">
        <area shape="poly" coords="..." target1="table.html"  target2="graph.html" onclick="return loadContent(this);" />
    </map> 
```

使用 javascript 函数：

```
function loadContent(ele) {
    var target1 = ele.getAttribute('target1'), 
        target2 = ele.getAttribute('target2');
    //Make 2 AJAX requests to load the information
    //If you are using jQuery, it is as simple as
    $('#upload_target1').load(target1);
    $('#upload_target2').load(target2);
    return false; //Prevent the default action from happening
} 
```

希望这可以帮助。

# c# - linq 条件查询

> ID：13350968
> 
> 赞同：1
> 
> 时间：2012-11-12T20:22:53.620
> 
> 标签：c#, asp.net-mvc, linq

根据在 linq 查询中检索到的其他几个“列”设置状态的最佳实践是什么。

```
 var result = (from q in query
                select new Item
                         {
                           ApprovedDate = q.ApprovedDate,
                           CreatedDate = q.CreatedDate,
                           DeclinedDate = q.DeclinedDate,
                           Status = 0
                         }); 
```

我想将状态设置为 0、1、2。

```
(ApprovedDate == null and DeclinedDate == null) --> 0
(ApprovedDate != null and DeclinedDate == null) --> 1
(DeclinedDate != null) --> 3 
```

所以也许是这样的：

```
 var result = (from q in query
                select new Item
                         {
                           ApprovedDate = q.ApprovedDate,
                           CreatedDate = q.CreatedDate,
                           DeclinedDate = q.DeclinedDate,
                           Status = (q.CreatedDate == null && q.DeclinedDate == null) ? 0 : (q.ApprovedDate != null && q.DeclinedDate == null) ? 1 : 2
                         }); 
```

我可能会添加更多的状态组合，所以我应该尝试在 linq 选择查询中执行此操作，在我的存储库对象中。或者稍后在控制器中执行 .ToList() 然后 foreach 列表来设置正确的状态码？

甚至超过 3 个状态码，linq 查询变得“难以”阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:33:31.320

将状态计算转移到`Item`课堂怎么样？如果 status 属性依赖于其他属性值，那么它肯定是计算属性：

```
var result = from q in query
             select new Item
                         {
                           ApprovedDate = q.ApprovedDate,
                           CreatedDate = q.CreatedDate,
                           DeclinedDate = q.DeclinedDate
                         }); 
```

和

```
public class Item
{
  // other properties

  public int Status
  {
      get
      {
          if (ApprovedDate == null and DeclinedDate == null)
              return 0;
          if (ApprovedDate != null and DeclinedDate == null)
              return 1;
          if (DeclinedDate != null)
              return 3;
          // etc
      }
  }
} 
```

实际上我认为这是最好的选择，因为在这种情况下，状态计算逻辑将接近所需的数据。如果（由于某种原因）您不能使用这种方法，则将设置状态移动到本地项目集合：

```
var items = result.ToList().ForEach(i => i.Status = CalculateStatus(i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:33:45.473

也许把所有东西都包装在一个函数中 像这样做一个 linq

```
var result = (from q in query sele q).AsEnumerable()
                                       .Select( x => new Item()
                                       {
                                           ApprovedDate = x.ApprovedDate,
                                           CreatedDate = x.CreatedDate,
                                           DeclinedDate = x.DeclinedDate,
                                           Status = MyStatusFunction(x.CreatedDate,q.DeclinedDate)
                                       });

public int MyStatusFunction(DateTime ApprovedDate , Datetime DeclinedDate)
{
    if (ApprovedDate == null and DeclinedDate == null) return 0;
    else if(ApprovedDate != null and DeclinedDate == null) return 1;
    else if (DeclinedDate != null) return 3;
} 
```

# c++ - 从 subversion 下载 Visual Studio 解决方案时，过滤器信息会丢失

> ID：13350970
> 
> 赞同：2
> 
> 时间：2012-11-12T20:22:53.667
> 
> 标签：c++, visual-studio-2010, svn

我正在将我的视觉工作室解决方案上传到颠覆。在我的视觉工作室解决方案中，我有过滤器，我在这些过滤器下保存了项目的不同文件，以便我更容易管理。上传到颠覆后，我将文件下载到另一台机器。当我在不同的机器上打开解决方案时，我观察到过滤信息消失了，而且有点难以管理。

我的问题是我可以不上传哪些文件/文件到包含过滤信息的颠覆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:29:07.193

您通常会`suo`在解决方案旁边获得一个文件。此文件包含您的个人偏好，例如您展开和折叠的内容等。

您通常不会将其签入，因为不同的用户可能有不同的偏好 - 但您期望的行为可能在此文件中。

您可以测试复制该文件以查看我是否正确 - 但我不建议您签入它，因为每个用户都会不断覆盖所有其他用户的首选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:33:14.050

VS2012 我只签入到 SVN`.sln`文件、`.vcxproj`文件和`.filters`文件（假设解决方案中有一个项目）。我可以在任何机器上检查它并且加载正常。

# ios - iOS 6 UITextView 链接检测问题

> ID：13350971
> 
> 赞同：0
> 
> 时间：2012-11-12T20:22:54.703
> 
> 标签：ios, xcode, hyperlink, ios6, uitextview

我在我的应用程序中遇到了一个奇怪的错误，我认为这是一个 iOS 6 错误。

我有一个 UITextView ，其中包含一些带有一些链接和电话号码的文本。在我的故事板中，我在 UITextView 的“检测”下检查了链接和电话号码。在代码中我也这样做：

```
_txtvFooter.editable = NO;
_txtvFooter.dataDetectorTypes = UIDataDetectorTypeAll; 
```

我遇到的问题很奇怪，但是当我从 Xcode 将我的应用程序运行到我的设备（或 sim）上时，UITextView 检测到所有链接都很好，我可以点击它们。如果我随后运行不在调试中的应用程序（不通过 Xcode 运行），链接将显示为黑色标准文本并且无法触摸。请注意，这只发生在 iOS 6 上。

在 iOS 5 模拟器上，无论应用程序是在调试中运行还是只是从模拟器中运行，链接都显示为蓝色并且可以点击。

我浏览了整个互联网，找不到解决方案或任何其他报告此问题的人。有谁知道 iOS 6 中是否有一些特别的变化？我的事情是，就像我说的它在直接从 Xcode 运行时检测到链接，所以对我来说这似乎是一个 iOS 6 错误。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T13:36:09.927

我找到了导致我的问题的原因。我正在做的是在包含 UITextView 的 Storyboard 中的 UITableView 的页脚中放置一个 UIView。

修复是愚蠢的......我从 UIView 中删除了 UITextView 并将其用作页脚（我曾经在页脚中有多个文本视图）并且链接开始检测。

不过，我仍然相信这是一个错误——因为如果您确实需要使用 UIView，则不会从其中的文本视图中检测到链接。

# html - 如何在gridview c#中显示HTML页面？

> ID：13350974
> 
> 赞同：0
> 
> 时间：2012-11-12T20:23:01.037
> 
> 标签：html, gridview, tags

嗨，我正在开发一个基于 html 标记的用户输入，例如富文本框，它将所有数据保存到数据库中；包括所有的html标签。

然后我在 asp.net c# 中使用 gridview 提取这些数据。

但是当gridview显示我的数据时，它显示不正确。

例如：用户在富文本框中输入他的粗体名称 `< b > Superman < /b >`，使其变为粗体。可悲的是，gridview 准确地显示了输入的标签，而所有这些都没有加粗。

另一个例子：要输入斜体名称：`< i > Superman < /i >`，显示的是*超人*，而不是斜体。

我想要的是让 gridview 像 HTML PAGE 一样显示，就像富文本框一样。

我用来写问题。<--不知道

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:31:09.387

当您将 html（因为这是您要求他们输入的内容）带回视图时，您要么需要自己转换它，要么像 @MikeB 提到的那样评估 html

或者，如果您不使用 Razor，请尝试这个问题以获得一些想法：

[有没有办法将 Html 插入到 gridview 行中？](https://stackoverflow.com/questions/1522003/is-there-a-way-to-insert-html-into-a-gridview-row)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:25:55.563

您需要显示原始 html。否则，它是 html 编码的，以防止人们能够对您的站点运行脚本。

您需要非常小心地显示用户输入的原始 html。

如果您使用剃须刀，它将是这样的：

```
@Html.Raw(ViewBag.HtmlOutput) 
```

# iphone - Titanium iOS - agcalendar 月视图不会更新视图

> ID：13350977
> 
> 赞同：1
> 
> 时间：2012-11-12T20:23:29.907
> 
> 标签：iphone, ios, titanium, titanium-modules

添加新事件后......或删除事件后，我必须点击下个月按钮，然后返回当月才能正确更新日历。我通过使用`calendarView.selectTodaysDate();`. 这似乎在大多数情况下对添加的事件有效，但是在删除事件时它不起作用

这是我用于monthView的模块： [模块链接](https://github.com/Appgutta/AGCalendar)

我现在在想也许我可以让视图刷新，但我不能 100% 确定 Titanium 是如何做到的。

任何帮助将不胜感激！

# javascript - Backbone.js 工厂设计模式实现

> ID：13350981
> 
> 赞同：4
> 
> 时间：2012-11-12T20:24:03.570
> 
> 标签：javascript, backbone.js, singleton

我正在寻找关于将工厂设计模式实现到 Backbone.js 集合是否是一个糟糕的实现的建议。

```
Collections.MyObjects = Backbone.Collection.extend({

    model: Models.MyObject

});

Collections.MyObjects.getInstance = (function(){

    var instances = {},
        defaultName = 'default';

    return function(name)
    {
        name = name || defaultName;

        if (!instances[name])
        {
            instances[name] = new Collections.MyObjects();
        }

        return instances[name];
    };

})(); 
```

我正在寻找替代实现和性能优化/理论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:32:43.910

这是受@numbers1311407 对该问题的评论启发的替代实现。

```
Collections.MyObjects = Backbone.Collection.extend({

    model: Models.MyObject

});

Collections.MyObjects.instance = (function(){

    var instances = {},
        defaultName = 'default';

    return {
        "get": function(name) {
            name = name || defaultName;

            if (!instances[name])
            {
                instances[name] = new Collections.MyObjects();
            }

            return instances[name];
        },
        "delete": function(name) {
            name = name || defaultName;

            if (!instances[name]) return false;

            delete instances[name];
            return true;
        }
    };

})(); 
```

*未测试。*

# pentaho - PDI 中的“等待文件”操作无法识别 Windows 网络驱动器

> ID：13350984
> 
> 赞同：1
> 
> 时间：2012-11-12T20:24:15.167
> 
> 标签：pentaho

在 PDI 4.5 中，作业中的“等待文件”操作似乎无法识别 Windows 网络驱动器，即使用 Z:\stuff\watch\test.txt 之类的路径，其中 Z: 是网络驱动器，而不是在本地计算机上。

有人遇到过这个问题吗？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:56:38.317

尝试使用完整的 windows 路径而不是映射的驱动器，即：

\servername\sharename\stuff\watch\test.txt

# hibernate - 单向与双向一对多级联不同

> ID：13350986
> 
> 赞同：0
> 
> 时间：2012-11-12T20:24:25.107
> 
> 标签：hibernate, session, grails, grails-orm

但是，如果要审查的租赁单元具有一对多的双向关系，我有以下测试通过。如果要查看的租赁单元具有单向的一对多关系，则会失败。怎么来的？以及如何使它也通过单向？

测试（斯波克）：

```
def "one-to-many relationship between RentalUnit and Review"() {
        when:"adding shared review will result referenced by last rental unit"
        def review3 = Review.build().save(flush: true)
        def rentalUnit1 = RentalUnit.build().addToReviews(review3).save(flush: true)
        def rentalUnit2 = RentalUnit.build().addToReviews(review3).save(flush: true)
        rentalUnit1.refresh()

        then:
        !rentalUnit1.reviews.contains(review3)
    } 
```

代码：出租单元类是相同的 - 单向和双向

```
class RentalUnit {
 ...
    static hasMany = [reviews:Review]

    static mapping = {
        reviews cascade: "all-delete-orphan"
    }
...
} 
```

在单向情况下，Review 类不包含与租赁单元相关的任何内容。在双向情况下，Review 有额外的一行：

```
static belongsTo = [rentalUnit: RentalUnit] 
```

（完整代码，在我的[博客](http://margotskapacs.com/2012/11/domain-object-one-to-many-relationship-in-grails-gorm-and-sql-relational-db/)中）