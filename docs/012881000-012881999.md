# StackOverflow 问答 12881000-12881999

# javascript - 函数内的jquery变量范围

> ID：12881004
> 
> 赞同：2
> 
> 时间：2012-10-14T09:41:18.147
> 
> 标签：javascript, jquery, variables, scope

```
meclass.prototype.switch = function() {
var items = [];
$.getJSON('http://localhost/jsoner.php', function(data) {
    $.each(data, function(key, val) { 
        items.push(val);
        alert(items[0]); //this works

    });
});
alert(items[0]); //this does not
} 
```

我一直在修补这个，但并没有真正理解它。我在我的所有 jquery 函数中都遇到了这个问题，所以这是我还没有学过的基本知识——也没有运气找到答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T09:43:22.017

该`getJSON`方法是*异步*的。执行将立即继续执行以下语句。回调函数将在一段时间后执行，只要服务器响应了请求。

出于这个原因，任何依赖于异步请求结果的代码都需要在回调函数中移动。

这实际上是发生了什么：

```
var items = []; //Declare `items`, empty array
//Make AJAX request
alert(items[0]); //It's still an empty array
//Wait some arbitrary amount of time...

//AJAX request complete, run the callback function
alert(items[0]); //Inside callback, items now contains elements 
```

# windows-runtime - 为 WinRT (ARM) 应用程序使用 Windows Store App 类库

> ID：12881005
> 
> 赞同：0
> 
> 时间：2012-10-14T09:41:25.683
> 
> 标签：windows-runtime, winrt-xaml

我创建了一个 Windows 应用商店类库。这包含一些用户控件和自定义控件。这个库的输出类型是 .dll

我可以在我的 Windows 应用商店应用程序中使用这个 .dll，并且该应用程序在模拟器和本地机器上运行良好。我正在将 Visual 2012 RC 与 Windows 8 RTM 一起使用

我还计划在 WinRT (ARM) 设备上运行这个应用程序。

我的问题是：为了在 WinRT (ARM) 设备上运行应用程序，我需要创建一个 .winmd 文件还是可以使用 .dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:13:51.023

由于您将无法在 ARM 设备上进行开发，因此您唯一的部署选择是构建、发布和下载它。可能有一些方法可以在公司网络中推送应用程序，但我不知道那里的细节。

关于如何处理 ARM 部署的有趣博客：http: [//tech.xster.net/tips/how-to-debugdeploy-winrtwindows-8-app-to-arm-tablet/](http://tech.xster.net/tips/how-to-debugdeploy-winrtwindows-8-app-to-arm-tablet/)

但是，如果您只考虑在将应用程序提交到 Windows 应用商店时需要做什么，那就另当别论了。在上传到 Windows 应用商店之前，您可以通过在 VIsual Studio 2012 中选择菜单选项项目/存储/创建应用程序包来创建应用程序包。

如果您的应用程序是纯 WinRT，那么您可以选择 Architecture Neutral，它将创建一个适用于所有设备的应用程序包；x86、x64 和 ARM。Visual Studio 将负责需要完成的工作......

# svn - How do I undo a tortoisesvn update

> ID：12881010
> 
> 赞同：4
> 
> 时间：2012-10-14T09:41:47.540
> 
> 标签：svn, tortoisesvn

I am trying to retrieve my working copy of a file before updating to a new revision. The problem is somehow tortoise messed things up and now a days work worth of code is uncompilable.

I tried updating to the previous revision, yet I got so many conflicts that I cannot fix since SVn literally merged all the text together.

Does Tortoise SVN versions a file locally before doing an update, and where can I find the file. I tried looking under .svn\prestine but I could only find an old version of my code.

Can someone please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:02:06.187

There is unfortunately no way to do it. You are out of luck.

The way I solved it is using [git](http://git-scm.com) as subversion client. Git is significantly different from subversion and the subversion interaction adds some restrictions of it's own, but it gives you better protection from loosing work to merge conflicts.

Plus it has support for committing individual changes separately and keeping a local stack of changes, which I often use if I find a bug during some larger task and want to push it out to trunk while the main work is still in progress or if I want to separate the work to logical pieces that are easier to check.

# macos - OS X [NSTimer scheduledTimerWithTimeInterval...] windowDidLoad 中的函数不起作用

> ID：12881013
> 
> 赞同：0
> 
> 时间：2012-10-14T09:42:18.210
> 
> 标签：macos, cocoa, splash-screen, nswindowcontroller

我是一名 iOS 开发人员，打算开发一个 OS X 应用程序。然而，它们彼此之间是如此不同。

我想在应用程序启动时添加启动画面。

```
- (void) applicationDidFinishLaunching:(NSNotification *)aNotification {

 // Hide main window
 [self.window orderOut:nil];

 SplashWindowController *splashWindowController = [[SplashWindowController alloc] initWithWindowNibName:@"SplashWindowController"];

 [NSApp runModalForWindow:splashWindowController.window];
 [splashWindowController release];

 // Show main window
 ... 
```

这是“SplashWindowController.m”

```
- (void)windowDidLoad {
  [super windowDidLoad];

  [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(hideSplash) userInfo:nil repeats:NO];
}

- (void)hideSplash {
  [NSApp endSheet:self.window];
  [self.window orderOut:nil];
} 
```

我可以看到出现的飞溅，但从不调用 hideSplash 函数。什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:51:33.963

我想知道您没有收到错误，但是这一行有一个错字：

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target self selector:@selector(hideSplash) userInfo:nil repeats:NO]; 
```

它应该是

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(hideSplash) userInfo:nil repeats:NO]; 
```

另一方面，你可以试试这个：

```
NSTimer *theTimer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(hideSplash) userInfo:nil repeats:NO];
[[NSRunLoop mainRunLoop] addTimer:theTimer forMode:NSRunLoopCommonModes]; 
```

我不确定 [NSTimer...] 是否过早销毁...将其分配给实例应该没问题。同样，运行循环被中断，因此您可以尝试将计时器添加到主运行循环。

# json - 执行自定义过滤器 UsernamePasswordAuthenticationFilter 后如何以编程方式返回 json 响应？

> ID：12881015
> 
> 赞同：8
> 
> 时间：2012-10-14T09:42:59.673
> 
> 标签：json, spring, security, filter, spring-security

我正在创建一个自定义过滤器 UsernamePasswordAuthenticationFilter 来处理身份验证过程。基本上，当用户通过 REST /login 执行登录 http post 时，自定义过滤器将执行并应响应包含用户详细信息和生成的令牌的 json 格式。

我的问题是我在哪里设置响应客户端的 json 响应？我正在考虑创建 SavedRequestAwareAuthenticationSuccessHandler 的子类并在那里设置 json 响应。这是一个好主意吗？

任何帮助将不胜感激 =)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T20:06:51.283

You need to implement your own SuccessHandler and inject it into UsernamePasswordAuthenticationFilter:

```
public class MyAuthenticationSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {

   public MyAuthenticationSuccessHandler() {
       super();
       setRedirectStrategy(new NoRedirectStrategy());
   }

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
            Authentication authentication) throws IOException, ServletException {

           super.onAuthenticationSuccess(request, response, authentication);
           response.write("my JSON response");
    }

    protected class NoRedirectStrategy implements RedirectStrategy {

        @Override
        public void sendRedirect(HttpServletRequest request,
                HttpServletResponse response, String url) throws IOException {
            // no redirect

        }

    }

} 
```

Note the NoRedirectStrategy: by default UsernamePassword filter will redirect after a successful logon which you probably dont want in this case. Also note that in the above implementation filter chain is terminated on authentication success - you have to make sure your filter renders the proper response, dont rely on underlying servlet to do it for you.

Alternatively you can leave the redirect in place and send client to another URL which in turn renders the JSON response you are looking for.

Sample security context:

```
 <!--  Security -->
    <bean id="springSecurityFilterChain" class="org.springframework.security.web.FilterChainProxy">
        <sec:filter-chain-map path-type="ant">
            <sec:filter-chain pattern="/rest/login" filters="wsFilter"/>
        </sec>
    </bean>

    <bean id="wsFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
      <property name="authenticationManager" ref="myAuthenticationManager"/>
      <property name="authenticationSuccessHandler" ref="myAuthSuccessHandler"/>
      <property name="passwordParameter" value="pass"></property>
      <property name="usernameParameter" value="user"></property>
      <property name="postOnly" value="false"></property>
   </bean>

       <bean id="myAuthSuccessHandler" class="com.my.MyAuthenticationSuccessHandler"/>

    <sec:authentication-manager id="myAuthenticationManager" >
        <sec:authentication-provider user-service-ref="UserDetailsImpl">
            <sec:password-encoder hash="md5">
            </sec:password-encoder>
        </sec:authentication-provider>
    </sec:authentication-manager> 
```

# php - Wordpress/Php 嵌套循环

> ID：12881018
> 
> 赞同：-2
> 
> 时间：2012-10-14T09:43:12.037
> 
> 标签：php, wordpress

我试图嵌套一个循环，基本上如果帖子有一个缩略图，那么它应该显示一个 div，如果没有，那么它应该什么都不做。

这是我一直在尝试的代码：

```
 <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

            <?php if ( has_post_thumbnail() );?>

                <div class="featured-image-row">

                    <?php the_post_thumbnail(); ?>

                </div>

            <?php endif; ?>

        <?php endwhile; endif; ?> 
```

但是，这给了我一个令人讨厌的意外 T_ENDIF。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T09:45:19.707

你错过了：在第二个 if 语句之后

改变

```
<?php if ( has_post_thumbnail() );?> 
```

至

```
<?php if ( has_post_thumbnail() ): ?> 
```

# wpf - {0} 对 Setter.Value 无效。唯一支持的 MarkupExtension 类型是 DynamicResourceExtension 和 BindingBase 或派生类型

> ID：12881020
> 
> 赞同：9
> 
> 时间：2012-10-14T09:43:29.237
> 
> 标签：wpf, xaml, resources

我遇到了一个 XAML 问题，在一个使用 vs2010 的项目中，我们在我的 XAML 中使用我们自己的项目`CustomBinding` 时`DynamicResource`，Designer 向我抛出了以下异常：

> CustomBinding 对 Setter.Value 无效。唯一受支持的 MarkupExtension 类型是 DynamicResourceExtension 和 BindingBase 或派生类型。

即使它没有在该特定扩展中使用。

```
<SomeControl Value="{CustomBinding SomeValue} Style="{DynamicResource SomeStyle}"/> 
```

`Style="{DynamicResource SomeStyle}"`是引发设计时异常的部分，因此永远不会设置样式。

如果有人遇到过类似的问题，请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-23T12:23:40.283

`Setter.Value`在您的样式中使用的仅支持一些硬编码类（StaticResource、DynamicResource 和 BindingBase），因为必须将值的提供推迟到应用样式时，而且似乎他们没有足够的时间来正确实现它，因此他们检查支持的课程并在以后应用它们。

# delphi - 将多个 TEdit 控制为数组

> ID：12881023
> 
> 赞同：2
> 
> 时间：2012-10-14T09:43:51.543
> 
> 标签：delphi, delphi-7, delphi-2010

我正在尝试编写数独求解器，并且我想将 81 个`TEdit`控件控制为数组，但它们的名称是`Edit1`, `Edit2`,`Edit3`而不是`Edit[1]`,`Edit[2]`等。

我不想`OnChange`分别为所有 81 个控件键入事件处理程序。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T09:52:53.760

你不需要一一做。您可以使用 shft-click 或 ctrl-drag 选择表单上的多个控件，以通过矩形选择它们。

所以总的来说：

*   使用对象检查器为一个编辑设置 OnChange 处理程序
*   可以选择使用对象检查器将其重命名为更通用的名称
*   选择表单上的所有其他编辑
*   使用 Object Inspector 选择您刚刚创建的处理程序。它将分配给您选择的所有编辑。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T09:51:13.777

您可以动态创建编辑。

请务必设置编辑框的所有者和父级。

```
procedure TForm1.OnCreate(Sender: TObject);
var
  x, y : Integer;
begin
  for y := 1 to 9 do begin
    for x := 1 to 9 do begin
      FEdit[x,y] := TEdit.Create(self);
      FEdit[x,y].Parent := self;
      FEdit[x,y].Left :=   // function based on x
      FEdit[x,y].Top  :=   // function based on y
      FEdit[x,y].Name :=   // function based on x and y
      FEdit[x,y].Width     //  any value you like
      FEdit[x,y].Height    // any value you like
      FEdit[x,y].Tag = 10*y + x;
      FEdit[x,y].OnChange = OnHandleChange;
    end;
  end;
end;

procedure TForm1.OnHandleChange(Sender: TObject);
var
  x,y : Integer;
begin
  if not Sender is TEdit then Exit;
  y := TEdit(Sender).Tag div 10;
  x := TEdit(Sender).Tag mod 10;
  // Add check if x and y are valid  

 // You now know that FEdit[x,y] is changed and you can handle accordingly.
end; 
```

FEdit 是表单的二维数组字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T23:30:25.587

除了使用公共`OnChange`事件处理程序和创建编辑运行时之外，您还可以使用设计时制作的控件填充数组。

正如我最近在[这个答案](https://stackoverflow.com/a/12846445/757830)中解释的那样，您可以将设计时制作的控件添加到一维或二维数组中：通过在名称上`FindComponent`搜索它们，使用循环在`Tag`属性上搜索它们，或者通过键入它们手动将它们添加到数组中81 个变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T09:51:59.983

你可以这样做：

```
var
  myedit: array[1..81] of TEdit;
  i: integer;
...
begin
...
for i := 1 to 81 do begin
  myedit[i] := TEdit.Create(form1);
  with myedit[i] do begin
    width := 50;
    top := 50 + (i * 55);
    left := 50;
    text := 'mytext '+inttostr(i);
    parent := form1;
    // more properties...
    end;
  end;
... 
```

您可以使用类似的代码动态创建您想要的任何内容。

# android - 内容提供者的“_id”列的首选类型是什么：int 还是 long？

> ID：12881024
> 
> 赞同：2
> 
> 时间：2012-10-14T09:43:57.537
> 
> 标签：android, sqlite

我在 android 源代码中遇到过代码，它隐式检查内容提供者的某些数字 Id 是否为 long 类型。然而，Sqlite 似乎只有“INTEGER”类型。

那么，为了安全起见，是否应该始终使用长数据类型来处理 sqlite 中“INTEGER”列中的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:51:14.097

在 SQLite 中，[所有整数值都有 64 位](http://www.sqlite.org/datatype3.html#storageclasses)。较小的值更有效地存储在数据库文件中，但这是完全透明的。

因此，如果您的`_id`列可能有超过 20 亿个值，那么您应该使用`long`.

# c# - 许多不同文件夹的asp.net授权

> ID：12881029
> 
> 赞同：0
> 
> 时间：2012-10-14T09:44:52.120
> 
> 标签：c#, asp.net, logging

我正在使用 asp.net (c#)。

**问题：**

我需要允许用户从不同的页面登录：

```
www.mypage.com/login.aspx
www.mypage.com/orgs/org-1/login.aspx
www.mypage.com/orgs/org-2/login.aspx
www.mypage.com/orgs/org-3/login.aspx 
```

...其中 1、2、3 等。组织 ID。

目前，当我打开 www.mypage.com/orgs/org-1/login.aspx 时，用户被重定向到 www.mypage.com/login.aspx

**整个故事：** 我有一个不是我编写的应用程序。它有一个主登录页面 (www.mypage.com/login.aspx)。但它也有许多不同的登录页面 - 每个组织都有自己的登录页面，位于文件夹 Orgs/Org-ID/login.aspx 中。这是必要的，因为组织希望在其登录页面上有不同的配色方案、徽标、一些额外信息、自定义欢迎声明和其他自定义内容。

我以前没有做过，但现在的方案如下： 1) www.mypage.com/login.aspx 是基本登录页面；每个人都可以从这个页面登录。有用。2) 有一个文件 OrgLogin.aspx（注意**CodeBehind="Login.aspx.cs" !!!!**），其中包含一些组织的自定义登录页面。它与 Login.aspx 略有不同，但使用相同的 CodeBehind。

3) 当应用程序管理员从应用程序界面创建新组织时，OrgLogin.aspx 文件被复制到 www.mypage.com/orgs/org-1/login.aspx 的位置**（**其中 1 是组织 ID，它会更改）并重命名将此文件添加到 Login.aspx。然后，组织管理员可以根据需要自定义每个 login.aspx 文件。如果他们不想要，则使用默认页面。

到目前为止很清楚，但以下内容不起作用：4）有必要允许用户从不同的页面登录：www.mypage.com/orgs/org-1/login.aspx -> 从适当的位置显示 login.aspx文件夹（根文件夹中的 Login.aspx.cs 是 CodeBehind）www.mypage.com/orgs/org-2/login.aspx ...目前，当我导航到 www.mypage.com/orgs/org-2/login .aspx 系统将用户重定向到 www.mypage.com/login.aspx?returnurl....

**编辑** 文件夹的完整结构如下： orgs/org- */login.aspx -> 应该可以访问而无需重定向到 root 登录 orgs/org-* /forgotpassword.aspx -> 应该可以访问而无需重定向到 root forgotpassword orgs/org - */document（文件夹）-> 未经身份验证不得访问 orgs/org-* /images（文件夹）-> 未经身份验证不得访问

当只有两个不同的文件夹并且通常它们具有不同的角色（管理员和非管理员）时，我已经阅读了一些解决方案，例如，[不同文件夹的不同身份验证表单](https://stackoverflow.com/questions/4012655/different-authentication-forms-for-different-folders)。

但这不是我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:50:33.357

如果您的`orgs/org-*`文件夹仅包含该`OrgLogin.aspx`页面，您可以放置​​一个`web.config`文件以允许访问该页面/避免重定向。这个`web.config`文件的内容是

```
<?xml version="1.0"?>
<configuration>    
    <system.web>
        <authorization>             
            <allow users="*"/>
        </authorization>
    </system.web>    
</configuration 
```

## 更新

要允许特定页面，您可以像这样使用位置标签

```
<configuration>
   <location path="Login.aspx">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location>       
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:09:26.277

您可以为此使用 URL 重写（只要您在 .NET 3.5 SP1 + 上）。您的流程将遵循以下原则：

1.  `www.mypage.com/orgs/org-2/login.aspx``www.mypage.com/login.aspx`用存储在路由值中的 org-2重写
2.  login.aspx 使用该组织的所有自定义配色方案、徽标等信息查询数据库并适当地配置页面（或者如果路由值为空，则显示默认值）
3.  所有实际的登录代码都在*一个页面上*，即`www.mypage.com/login.aspx`。这避免了所有重定向类型问题。

# ruby - 无法重载运算符 +=

> ID：12881031
> 
> 赞同：1
> 
> 时间：2012-10-14T09:45:02.697
> 
> 标签：ruby, operator-overloading

我已经定义了一个 Person 类（姓名、年龄）。我试图在 @age 实例变量上重载 += 运算符，但我没有管理。这是我的脚本尝试：

```
class Person

    def initialize(name, age)
        @name = name
        @age = age
    end

    def age+= (value)
        @age += value
    end

    def to_s
        return "I'm #{@name} and I'm #{@age} years old."
    end
end

laurent = Person.new "Laurent", 32
puts laurent
laurent.age += 2
puts laurent 
```

这是我在终端中遇到的错误：

```
person.rb:8: syntax error, unexpected tOP_ASGN, expecting ';' or '\n'
    def age+= (value)
             ^
person.rb:15: syntax error, unexpected keyword_end, expecting $end 
```

那么，怎么了？

提前致谢。对不起，如果这可能是一个太明显的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:49:26.303

您必须改为定义`+`运算符，然后您会`+=`自动获得。

但在这种情况下，您不需要覆盖`+`运算符。该`age`成员只是一个数字，因此它已经定义了所有内容。你缺少的是一个`attr_accessor`.

```
class Person
    attr_accessor :age

    def initialize(name, age)
        @name = name
        @age = age
    end

    def to_s
        return "I'm #{@name} and I'm #{@age} years old."
    end
end

laurent = Person.new "Laurent", 32
puts laurent
laurent.age += 2
puts laurent 
```

您只需要覆盖`+`运算符，以防您希望您的类表现得像一个数字并能够像这样直接添加到它：

```
laurent = Person.new "Laurent", 32
laurent += 2 
```

但在这种情况下，我认为它不是很可读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:52:22.900

正如@detunized 所提到的，您需要重载 + 运算符才能自动获取 += 运算符。

此外，您的运算符定义不应包含类的名称，它应该是

```
def +(value)
    @age + value
end 
```

# windows-phone-7 - Windows Phone：使用 HTTPWebRequest 加载 HTML 源

> ID：12881035
> 
> 赞同：0
> 
> 时间：2012-10-14T09:45:26.507
> 
> 标签：windows-phone-7

我需要用我的 WP7 应用程序下载整个桌面站点的 HTML 代码。我在正常的 Win32 应用程序中使用了以下代码，但在 WP 中不起作用。特别是，我`GetReponse`在`HtttpWebReqest`. 而且我不能使用`WebBrowser`，因为它不加载桌面站点，只加载移动站点。有什么帮助吗？

```
 request = HttpWebRequest.Create(URL)
        response = request.GetResponse
        sr = New IO.StreamReader(response.GetResponseStream)

        Source = sr.ReadToEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:34:54.500

在 wp7 中只允许异步请求。也许 WebClient 对您来说是最简单的。

这是一个例子：

```
private void loadFeedButton_Click(object sender, System.Windows.RoutedEventArgs e)
{
    WebClient webClient = new WebClient();

    webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);

    webClient.DownloadStringAsync(new System.Uri("http://windowsteamblog.com/windows_phone/b/windowsphone/rss.aspx"));
}

// Event handler which runs after the feed is fully downloaded.
private void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    if (e.Error != null)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {
            // Showing the exact error message is useful for debugging. In a finalized application, 
            // output a friendly and applicable string to the user instead. 
            MessageBox.Show(e.Error.Message);
        });
    }
    else
    {
       this.State["feed"] = e.Result;          
    }
} 
```

# uiview - 使用 UITapGestureRecognizer 和两个按钮查看

> ID：12881043
> 
> 赞同：0
> 
> 时间：2012-10-14T09:47:22.687
> 
> 标签：uiview, uibutton, uitapgesturerecognizer

我有一个 UIView 自定义类（m、h、xib），上面有两个按钮。如果我点击它，这个视图应该会收到触摸，所以我实现了一个 UITapGestureRecognizer：

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:customElementView action:@selector(customElementPressed:)];
[customElementView addGestureRecognizer:tapGesture];
[tapGesture release]; 
```

这个视图上什至有两个按钮，每个按钮都有一个在 touchUpInside 动作中实现的 IBAction。

我的问题是这两个按钮没有收到动作，每次我点击它们时，都会调用 UIView 的 TapGesture 方法。我怎样才能以某种方式“强制”这些按钮来捕捉水龙头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:52:23.713

请在发布新问题之前使用搜索功能。搜索 UITapGestureRecognizer 和 UIButton，会给你答案：

[https://stackoverflow.com/a/3348532/312312](https://stackoverflow.com/a/3348532/312312)

或者您可能想先尝试这种方法：

[https://stackoverflow.com/a/8891030/312312](https://stackoverflow.com/a/8891030/312312)

# opengl - Recreate Window without destroying the Context

> ID：12881049
> 
> 赞同：2
> 
> 时间：2012-10-14T09:48:10.283
> 
> 标签：opengl, graphics, window, cross-platform, fullscreen

This question is about a graphics application using OpenGL. (At the time I am using the framework GLFW but I consider changing it.)

My aim is to let the user (as much as possible) continuously switch between fullscreen mode and windowed mode. This procedure should take less than a second and can occur during runtime. For example see the game Minecraft where the user can toggle fullscreen with virtually no delay.

The window recreation process doesn't take so much time. But the problem is, that closing the window destroys my OpenGL context and I have to reload all my shaders and buffers.

**How to recreate the window of a graphics application without destroying the OpenGL context?** (I would like to use GLFW but I am open minded about alternative frameworks or a own implementation.)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:08:58.633

Technically the OpenGL context is not tied to any window. What's important is, that the visual format of the window matches that of the visual format the context has been created for. It is perfectly possible to use a single OpenGL context with multiple windows.

The problem you're facing is, that frameworks like GLFW, SDL or GLUT don't expose this kind of functionality. It's a feature that definitely should be added to them some time.

You can however do it, when you create and manage your windows and OpenGL context yourself. The principal process of what you intend is the following:

1.  select the visual format for the windows (PIXELFORMATDESCRIPTOR, Visual, FBConfig, depending on OS and graphics system)

2.  create your first window and set the visual format

3.  create the OpenGL context with respect to the first window as drawable

4.  create further windows and set them to the very same visual format you've already selected.

You can now detach the OpenGL context from its current drawable (=window) and attach it to any other drawable (i.e. window) having a compatible visual format

# c# - 尝试从 ASP.NET 应用程序运行命令行工具时出现意外结果

> ID：12881051
> 
> 赞同：0
> 
> 时间：2012-10-14T09:48:28.177
> 
> 标签：c#, asp.net, windows, iis

> **可能重复：**
> [Server.MapPath 并从 ASP.NET 应用程序运行命令行实用程序](https://stackoverflow.com/questions/12876364/server-mappath-and-running-a-command-line-utility-from-an-asp-net-application)

背景：

我正在尝试使用[这个](https://github.com/ariya/phantomjs/wiki/Screen-Capture)phantomjs 工具将 SVG 光栅化为 PNG。当我自己手动运行 EXE 时它可以工作，但我无法通过 C# 中的方法使其工作。我什至设置了断点以确保我的路径和参数是正确的。

该方法首先将 SVG 保存到`file:///C:/SVG/`- 它成功地做到了这一点。然后我尝试运行位于我的 ASP.NET 项目中的 EXE（该工具使用的 .js 文件也在那里）。如果您检查上面的链接，EXE 会像这样运行：`phantomjs.exe rasterize.js [source] [destination]`. 所以我的源是新创建的 SVG 文件，我的目标是 ASP.NET 项目中的一个文件夹 - 与 EXE 所在的文件夹相同。我猜这与 Server.MapPath 或 IIS 权限有关，但我难住了。

这是代码：

```
// the EXE and the .js file are both located in 'ProjectRoot/Utilities/'
// filename is the newly created SVG file - 'whatever.svg'
string filepath = "C:/SVG/";
string serverPath = Server.MapPath("/Utilities/");
string args = " rasterize.js " + Path.Combine("file:///", filepath, filename) + " " + filename.Replace(".svg", ".png");
Process p = Process.Start(new ProcessStartInfo(serverPath + "phantomjs.exe", args));
p.WaitForExit(3000); 
```

运行它不会引发异常，只是无法创建 PNG 文件。当我调试并获取值并自己运行该工具时，它工作正常。我能做些什么来缩小问题的范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:58:19.537

相同代码的调试/发布运行之间的差异通常是由[竞争条件](http://blogs.msdn.com/b/davidklinems/archive/2005/10/24/484275.aspx)引起的。在这种情况下，创建 SVG 的代码可能在您调用 Process.Start 之前尚未完成执行，因此没有任何反应。

# c# - C# 从多个自定义复选框组中获取值到我的控制器

> ID：12881052
> 
> 赞同：0
> 
> 时间：2012-10-14T09:48:33.747
> 
> 标签：c#, asp.net-mvc

在我的网站上有一些属于 2 组的复选框。

我想获得选中的复选框。

这是我的控制器。

```
[HttpGet]
        public ActionResult HireItem()
        {
            var HireItemListModel = new HireItemModel();

            HireItemListModel = new HireItemModel()
            {
                first_name = Session["first_name"].ToString(),
                middle_name = Session["middle_name"].ToString(),
                last_name = Session["last_name"].ToString(),
                ceremony_date = Session["ceremony_date"].ToString(),
            };       

            var product = _productService.GetAllHireProducts();

            if (product.Count != 0)
            {
                foreach (var proValue in product)
                {
                    var productVarSeparateList = _productService.GetHireProductVariantsByProductIds(proValue.Id, false);

                    foreach (var HireProSep in productVarSeparateList)
                    {
                        var productVarSeparateModel = new HireItemModel.HireItemSeparatetModel()
                        {
                            pname = HireProSep.Name,
                            price =HireProSep.Price,
                            pId=HireProSep.Id,
                        };
                        HireItemListModel.HireItemSeparatetlist.Add(productVarSeparateModel);
                    }
                    var productVarSetList = _productService.GetHireProductVariantsByProductIds(proValue.Id, true);

                    foreach (var HireProset in productVarSetList)
                    {
                        var productVarListset = new HireItemModel.HireItemSetModel()
                        {
                            pname = HireProset.Name,
                            price = HireProset.Price,
                            pId = HireProset.Id,
                        };
                        HireItemListModel.HireItemSetList.Add(productVarListset);
                    }
                }
            }

            return View(HireItemListModel);

        }

        [HttpPost,ActionName("HireItem")]
        public ActionResult HireItem(string submitB)
        {

            var checkbox=Request.Form["HItemType"];
            if (checkbox != "false")
            {
                var HireItemArray = Request.Form["chk_group"];
//This is the problem...

                return RedirectToRoute("ShoppingCart");
            }
            else
            {
                return RedirectToRoute("hire");

            }
} 
```

这是我的第一个局部视图。

```
<table  >

 @foreach (var item in Model)
{
    var val = item.pId;
     <tr>
     <td>
<input type="checkbox" name="chk_groupSet" value="@val" />
</td>
        <td>
  @Html.DisplayFor(modelItem => item.pname)
   </td>
       <td>
  @Html.DisplayFor(modelItem => item.price)
   </td>
        <td>
  @Html.DisplayFor(modelItem => item.pId)
   </td>
   </tr>
}
</table> 
```

这是我的另一个部分视图

```
<table  >

 @foreach (var item in Model)
{
    var val = item.pId;

     <tr>
     <td> 
     <input type="checkbox" name="chk_group" value="@val" />

    @* @Html.CheckBox("separateHireItem",""+item.pId )*@
     @*<input type="checkbox" name="sItem" value="sItem"  />*@</td>
        <td>
  @Html.DisplayFor(modelItem => item.pname)
   </td>
        <td>
  @Html.DisplayFor(modelItem => item.price)
   </td>
        <td>
  @Html.DisplayFor(modelItem => item.pId)
   </td>
   </tr>
}

</table> 
```

我的问题是我得到流动的输出。

![我不明白这是什么意思](../Images/97111a2bc2c1e246ffd5e940732788b9.png)

我想获取选中的复选框的值..

# python - 如何使用 PyQt 或 PySide 在系统托盘中显示一些文本而不是图标？

> ID：12881058
> 
> 赞同：1
> 
> 时间：2012-10-14T09:48:56.927
> 
> 标签：python, pyqt, pyside, system-tray, trayicon

我只是想创建一个在系统托盘中显示当前时间的数字时钟。

我可以使用 QPainter 绘制图标并将其设置为 QSystemTrayIcon 对象，但图标的大小始终为 22x22 像素。

我怎样才能做到这一点，我知道 PyGTK 可以简单地为托盘图标对象添加标签，PyQT/PySide 的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:17:51.363

“图标已调整为 22x22 像素”，我假设您在基于 X11 的系统（Ubuntu 或其他 linux 发行版）上运行您的应用程序。

在[QSystemTrayIcon doc](http://qt-project.org/doc/qt-4.8/qsystemtrayicon.html#icon-prop "QSystemTrayIcon 文档")中，它说您的图标将根据您使用的操作系统调整大小：

> 在 Windows 上，系统托盘图标大小为 16x16；在 X11 上，首选尺寸是 22x22。图标将根据需要缩放到适当的大小

您仍然可以通过以下方式解决此问题：

1.  使用 QPainter 创建两个 22x22 系统托盘图标：一个小时，另一个分钟
2.  显示两个系统托盘图标（左侧为小时，右侧为分钟）

此解决方法容易出错，因为图标可能以错误的顺序显示。如果 X11 是您唯一的目标平台，我强烈建议您使用 pygtk。

# android - Admob 测试广告不起作用，只有真实的广告在显示 - Android

> ID：12881062
> 
> 赞同：2
> 
> 时间：2012-10-14T09:49:33.957
> 
> 标签：android, admob

我在我的新游戏中实现了 admob。一切都很好，但由于某种原因，测试广告意外停止显示（真实设备上的真实广告工作正常）并显示以下消息：

> `10-14 09:28:10.133: I/Ads(578): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":8,"session_id":"760111204008742348","u_sd":1,"seq_num":"9","slotname":"a15079ad976bb3e","u_w":1280,"msid":"com.jgrzesik.sokobangarden.android","simulator":1,"cap":"m,a","adtest":"on","js":"afma-sdk-a-v6.1.0","toar":0,"isu":"B3EEABB8EE11C2BE770B684D95219ECB","cipa":0,"format":"320x50_mb","net":"ed","app_name":"1.android.com.jgrzesik.sokobangarden.android","hl":"en","u_h":752,"carrier":"310260","ptime":788505,"u_audio":4});</script></head><body></body></html>`
> 
> `10-14 09:28:11.875: I/Ads(578): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/gma?preqs=8&session_id=760111204008742348&u_sd=1&u_w=1280&msid=com.jgrzesik.sokobangarden.android&cap=m%2Ca&adtest=on&js=afma-sdk-a-v6.1.0&toar=0&isu=B3EEABB8EE11C2BE770B684D95219ECB&cipa=0&format=320x50_mb&net=ed&app_name=1.android.com.jgrzesik.sokobangarden.android&hl=en&u_h=752&carrier=310260&ptime=788505&u_audio=4&u_so=l&output=html&region=mobile_app&u_tz=0&client_sdk=1&ex=1&slotname=a14e8f77524dde8&askip=3&caps=inlineVideo_interactiveVideo_mraid1_th_autoplay_mediation_sdkAdmobApiForAds_di&jsv=38" type: "admob" afmaNotifyDt: "null">`
> 
> 10-14 09:28:12.162: I/Ads(578): onFailedToReceiveAd（广告请求成功，但由于广告库存不足，没有返回广告。）

这似乎很不寻常，因为我使用

> addTestDevice(AdRequest.TEST_EMULATOR);

我的广告请求中的方法。可以肯定的是，我昨天决定检查我的 apk 文件（当测试广告 100% 有效时），我得到了相同的消息。我什至决定将我一年前的游戏中的 apk 文件安装到模拟器上来检查这一点，我得到了相同的结果。我在 admob 面板中仔细检查了我的应用程序设置，并在我的应用程序中使用了正确的发布者 ID，并且“使用客户端代码中设置的测试模式设置”选项已启用。如果有人分享他处理此类问题的经验（或者也许有人可以确认这是服务器端的问题），我将非常高兴。
我在我的旧项目中使用 admob 6.1.0 和 4.1.1。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:39:51.813

我遇到了同样的问题，正如 Mads 所说的 admob 方面存在问题，但他们已经解决了。他们刚刚在[支持论坛](https://groups.google.com/d/msg/google-admob-ads-sdk/bZMvQUrqIS4/Yv1HrigwASsJ)中回答，我确认它对我有用。

# html - div元素高度问题

> ID：12881066
> 
> 赞同：0
> 
> 时间：2012-10-14T09:50:09.267
> 
> 标签：html, css

我一直在为我的一个朋友的网站做一个 CSS 布局，可能遇到了一些问题。希望你能帮助我。

我有一个带有正文和内容博客 div 的 html。除了内容博客 div 之外，一切似乎都运行良好。使用下面给定的设置，html 输出只返回高度为 0 的内容博客 div。但是，只有当我固定高度时，它才能在页面上正常显示。

我的问题是为什么在这种情况下它总是需要我为 div 设置一个固定的高度。对 CSS 规范有任何参考吗？这也是在这里创建的小提琴：http: [//jsfiddle.net/benmore/yZL4U/1/](http://jsfiddle.net/benmore/yZL4U/1/) 虽然我的预期输出在这里：http: [//jsfiddle.net/benmore/yZL4U/2/](http://jsfiddle.net/benmore/yZL4U/2/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />

        <style type="text/css">

            body{
                width: 960px;
                margin-left:auto;
                margin-right:auto ;
                margin-top: 0px;
                background:#5d9ab2 url(https://lh5.googleusercontent.com/-ZBLYo1oD6bM/UHox3oBICxI/AAAAAAAAAgo/yCg6TcxLeC4/s358/img_tree.png) no-repeat top left;
                background-position: 200px 0px;
                height: 100%;
            }

            .content_blog{
                background: url(https://lh4.googleusercontent.com/-6vbAw73oSYI/UHqHD-7GLlI/AAAAAAAAAg8/3eDurdBo2wE/s191/blog_topic.jpg) top left no-repeat;
                width: 920px;
                margin: 0px 20px 0px 20px;
                /*-- height: 200px; --*/
            }

        </style>
        <title></title>
    </head>
    <body class="homepage">
        <div class="content_blog"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:55:57.440

设置 .content-blog div 的最小高度，如下所示[http://jsfiddle.net/calder12/yZL4U/4/](http://jsfiddle.net/calder12/yZL4U/4/)原因是 div 实际上没有内容。浏览器不会将背景图像视为内容，因此它假定 div 为空并将其呈现为 0 高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:54:53.413

您使用 yhis 代码而不是高度

```
.content_blog{
            background: url(https://lh4.googleusercontent.com/-6vbAw73oSYI/UHqHD-7GLlI/AAAAAAAAAg8/3eDurdBo2wE/s191/blog_topic.jpg) top left no-repeat;
            width: 920px;
            margin: 0px 20px 0px 20px;
            min-height:500px;
        } 
```

min-height 用于动态高度最好的问候

# html - HTML 'td' 宽度和高度

> ID：12881067
> 
> 赞同：57
> 
> 时间：2012-10-14T09:50:17.723
> 
> 标签：html, object, html-table

HTML5 不支持“高度”和“宽度”。如何在符合 HTML5 标准的同时设置 td 的宽度和高度？

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>219 班網</title>
  </head>

  <body bgcolor="silver">
    <div align="center">
      <table>
        <tr>
          <td width="1000" height="250">
            <object width="100%" height="100%" data="frameTop.html"></object>
          </td>
        </tr>
      </table>
      <table>
        <tr>
          <td width="300" height="700" >
            <object width="100%" height="100%" data="frameLeft.html"></object>
          </td>
          <td width="700" height="700">
            <object width="100%" height="100%" data="frameRight.html"></object>
          </td>
        </tr>
      </table>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-10-14T09:54:48.660

的 width 属性`<td>`在 HTML 5 中已弃用。

使用 CSS。例如

```
 <td style="width:100px"> 
```

详细地说，像这样：

```
<table >
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td style="width:70%">January</td>
    <td style="width:30%">$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-10-16T18:44:09.713

以下[宽度](https://www.w3schools.com/cssref/pr_dim_min-width.asp)在 HTML5 中运行良好：-

```
<table >
  <tr>
    <th style="min-width:120px">Month</th>
    <th style="min-width:60px">Savings</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

请注意

*   TD 标签没有 CSS 样式。

# google-app-engine - 使用 ORDER BY 不返回结果

> ID：12881068
> 
> 赞同：0
> 
> 时间：2012-10-14T09:50:19.533
> 
> 标签：google-app-engine

我有一个实体定义为：

```
a    Integer
b    Float
type     String 
type     STRING  <--- Indexed property 
```

我运行一个没有排序的查询，它返回结果。

```
SELECT * FROM com_MyDomain WHERE type = 'GENERAL' 
```

如果我添加排序，查询不会返回任何结果。

```
SELECT * FROM com_MyDomain WHERE type = 'GENERAL' ORDER BY b, a 
```

我还有一个索引（应用引擎控制台中的服务状态）定义为：

```
<datastore-index kind="com_MyDomain"
    ancestor="false" source="manual">
    <property name="type" direction="asc" />
    <property name="b" direction="asc" />
    <property name="a" direction="asc" />
</datastore-index> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T14:39:48.730

我能想到的唯一一件事是您的实体没有 b 或 a 的值。

如此处所写：

> > 缺少查询中指定的属性的实体将被忽略
> > 
> > 相同种类的实体不需要具有相同的属性。要成为查询结果，实体必须为查询的过滤器和排序顺序中指定的每个属性都拥有一个值（可能为 null）。如果不是，则该实体会从用于执行查询的索引中省略，因此不会包含在查询结果中。

（来自 “查询限制”下的[https://developers.google.com/appengine/docs/python/datastore/queries ）](https://developers.google.com/appengine/docs/python/datastore/queries)

所以唯一合乎逻辑的事情似乎是您的数据没有填充 a 或 b 。

# sql-server - 将 SQL Server 2005 Express Edition Service Pack 4 与 Visual Studio 2012 一起使用

> ID：12881069
> 
> 赞同：0
> 
> 时间：2012-10-14T09:50:31.810
> 
> 标签：sql-server, asp.net-mvc-3

我有 SQL Server 2005 Express，我想用它来设置要与 Visual Studio 2012 一起使用的数据库。它们会相互兼容吗？我在哪里可以找到如何设置它们的好教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:03:02.760

我没有要测试的 SQL Server 2005，但我不明白为什么它们不应该兼容。SQL Server 的本机驱动程序在 2005 版本中做了一些重大更改，但我认为即使您使用 VS 2012 也可以很好地连接。

我的假设是，如果您使用的是 SQL 2012 或 SQL 2005 Express，则确实不需要更改代码，基本的 T-SQL 是相同的。但是，如果您正在考虑使用例如实体框架 (EF)，那么您可能会遇到问题并检查兼容性。

至于安装，我认为它们都是直截了当的。下一个下一个完成...

当您测试连接性时，请查看[http://www.connectionstrings.com/sql-server-2005](http://www.connectionstrings.com/sql-server-2005)以获取连接字符串的示例。

# javascript - Correct usage of $.ajaxComplete and $.ajaxError?

> ID：12881072
> 
> 赞同：3
> 
> 时间：2012-10-14T09:50:50.623
> 
> 标签：javascript, ajax, jquery

I've been using the following snippet on my ajax form submits:

```
$.ajax({
url: "",
data: ilmoittautumisdata,
type: "POST",
success:function(){

});
error:function(){

});
}); 
```

However, I remember that I was told to stop using success and error within it, as they're deprecated (?) and instead use `$.ajaxComplete();` and `$.ajaxError();`.

However, reading the docs isn't helping me as I want to use both of them, and this isn't working for me.

```
$('#ilmoittuminen').submit(function(){
            var ilmoittautumisdata = $('#ilmoittuminen').serialize();
            $.ajax({
                //url: "",
                data: ilmoittautumisdata,
                type: "POST"
                });
            $.ajaxComplete(
            function(){
            $('#ilmoittuminen').slideUp();
            });
            $.ajaxError(
            function(){

            });
    return false;
    });​ 
```

How I should do it?

[http://jsfiddle.net/D7qgd/](http://jsfiddle.net/D7qgd/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:58:00.527

Firstly, the word you're looking for is "deprecated". As far as I'm aware, the `success` and `error` properties are definitely *not* deprecated. You can (and should, in your case) continue to use them.

The problem with your attempt to use `ajaxError` and `ajaxComplete` is that they are implemented as *instance* methods, rather than static methods on the jQuery object itself. For that reason, you need to select some element and call the methods on that collection. The element itself doesn't matter at all:

```
$("#someElement").ajaxComplete(function () {
    // Do stuff
}); 
```

The next problem, which you haven't come across yet, is that the `ajaxError` and related methods register *global* AJAX event handlers. Each time you call one of those methods, you add a new event handler to the global set, and every time an AJAX event is fired, *all* of your registered handlers will be executed.

* * *

**Update** (Thanks @DCoder)

Looks like the `success` and `error` properties *are deprecated* as of jQuery 1.8\. Instead, you can use the `fail`, `done` and `always` methods of the jQuery modified XHR object. Any objects that inherit from the [deferred object](http://api.jquery.com/category/deferred-object/) can use these methods (the jqXHR object is one of these):

```
$.ajax(ajaxSetupObject).done(function () {
    // Handle success
}).error(function () {
    // Handle error
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:01:44.897

This code handles a success and error inside the ajax method.if there is a success it prints out success, with the object you receive, and vica versa.

```
$.ajax({
   type: 'json',
   url: 'foobar.com',
   success: function(s) { 
     console.log('success' + s);
   },
   error: function(e) {
     console.log('error' + e);
   }
}); 
```

# elasticsearch - 已分析字段上的未分析查询

> ID：12881075
> 
> 赞同：4
> 
> 时间：2012-10-14T09:51:24.243
> 
> 标签：elasticsearch

我有某些文件以分析的形式存储品牌名称，例如：{“name”：“Samsung”} {“name”：“Motion Systems”}。在某些情况下，我想要一个以“s”开头的术语搜索，这应该会导致两个文档。在另一种情况下，我只想要以“s”查询开头的完整字段，结果只返回“samsung”。我已经分析了名称字段并存储了它。有什么方法可以让我在弹性搜索中从查询开始完成完整的字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T11:08:02.910

您应该使用[multi_field](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)以两种不同的方式索引您的字段。如果您像以前一样对其进行标记，则您将根据标记器生成的标记进行匹配。对于您想要的第二种匹配，您需要禁用分析字段并按原样索引它，或者使用产生相同结果的[Keywork 标记器。](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-tokenizer.html)您的映射将如下所示：

```
{
    "your_type" : {
        "properties" : {
            "brand" : {
                "type" : "multi_field",
                "fields" : {
                    "brand" : {"type" : "string", "index" : "analyzed"},
                    "untouched" : {"type" : "string", "index" : "not_analyzed"}
                }
            }
        }
    }
} 
```

然后您可以在这两个字段上进行搜索。当你搜索时，`brand`你会得到你已经拥有的匹配项，而搜索时`brand.untouched`你会得到第二个匹配项。有多种方法可以将多个查询组合在一起，例如，您可以查看[bool query](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)。

# spss - 从谷歌文档表单分析多响应字段

> ID：12881079
> 
> 赞同：2
> 
> 时间：2012-10-14T09:51:46.570
> 
> 标签：spss

我用 Google Doc 制作的一个问题有一个多响应集。

假设三个可能的问题是：

*   富
*   酒吧
*   富吧

允许勾选一个或多个答案的人。

在我的谷歌电子表格结果中，我有：

```
answer1 : foo
answer2 : foo, bar
answer3 : bar, foobar
answer4 : foo, foobar
anwser5 : foobar
etc. 
```

我如何在 SPSS 中分析这种类型的结果？

我的直觉是，由于我不知道该怎么做，所以这些值可以分成多个问题的多个答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:10:07.790

在 SPSS 中创建新变量时，您也可以尝试使用索引函数。

例如，如果要处理的答案在 ANSWER 变量中，您可以选择 Transform / Compute variable...，并使用此函数创建一个名为 FOO 的新数值变量：

`CHAR.INDEX(UPCASE(ANSWER),'FOO') > 0`

如果在 ANSWER 变量中找到 foo，则结果为 1，否则为 0。然后对其他可能的答案做同样的事情。

或者您可以简单地运行以下语法：

```
COMPUTE FOO=CHAR.INDEX(UPCASE(ANSWER),'FOO') > 0.
EXECUTE. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:19:50.233

我没有 SPSS 来测试它，但这个解决方案可以帮助你[http://www.spsstools.net/Syntax/MultipleResp/ParseCommaSeparatedLetters.txt](http://www.spsstools.net/Syntax/MultipleResp/ParseCommaSeparatedLetters.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:57:01.503

将此字符串拆分为三个变量：

创建三个变量，复制字符串，粘贴到 Excel 中并使用特殊文本选项，选择分隔符 = 逗号。这会将字符串的文本拆分为三个 Excel 单元格。然后将所有三个变量一次复制并粘贴到 SPSS 中。

处理文本/数据时，SPSS 在遇到制表时按变量拆分（粘贴到 Excel 中会在有逗号的地方添加制表字符）。或者，可以使用纯文本编辑器（免费：TextPad、Notepad++）来更改文本。

# javascript - 广告重定向是如何工作的？

> ID：12881085
> 
> 赞同：6
> 
> 时间：2012-10-14T09:52:22.933
> 
> 标签：javascript, facebook, iframe, ads

最近，我读到 Facebook 广告正朝着重新定位方向发展，并对主题产生了更深入的兴趣。从本质上讲，重定向是广告商使用的一种技术，它通过将 cookie 放入您的浏览器来跟踪购买意图，当您访问广告网络中的另一个网站时，您将看到您“想购买”的商品的广告。

为了使其发挥作用，发布商和广告商需要共同努力。发布者需要添加几行 JavaScript，并且发布者需要能够跨站点读取此信息。在大多数情况下，JavaScript 会从 adnetwork 域插入 iframe。iframe 脚本为主机域和远程广告网络域设置 cookie。

但是，同源策略不允许`iframes`从父域读取/设置内容。

我在这里缺少什么吗？有人可以解释这种技术是如何工作的吗？

# objective-c - 如何消除在 Cocoa 中打开 xml 文件的错误

> ID：12881086
> 
> 赞同：0
> 
> 时间：2012-10-14T09:52:45.863
> 
> 标签：objective-c, cocoa, nsxml, nsxmldocument

从 Cocoa xml 读写编码开始，我创建了一个示例应用程序，我可以在其中写入 XML 文件，但在读取时会出现一些错误。下面是代码。

```
NSXMLElement * root = [[NSXMLElement alloc ] initWithName:@"Book"]
NSXMLDocument * xmlDoc = [[NSXMLDocument alloc ] initWithRootElement: root ];
[root addChild:[NSXMLElement elementWithName: @"Name" stringValue:@"book name"]];
[root addChild:[NSXMLElement elementWithName:@"Author" stringValue:@"bool author"]];
 NSData * xmlData = [xmlDoc XMLDataWithOptions:NSXMLNodePrettyPrint];
[xmlData writeToFile:[@"~/Desktop/book.xml" stringByExpandingTildeInPath ]
 atomically:YES];
[xmlDoc release ]; 
```

这工作正常，并且 book.xml 被创建。但是当试图读取这个文件时，我在打开这个文件时遇到了问题。这是代码。

```
NSString *strValue = [@"~/Desktop/book.xml" stringByExpandingTildeInPath];
NSURL * strUrl = [NSURL URLWithString:strValue];
NSError * err = nil;
NSXMLDocument  * xmlDoc = [[NSXMLDocument alloc] initWithContentsOfURL:strUrl    
options:NSXMLDocumentTidyXML error:&err];
NSXMLNode * rootNode = [xmlDoc rootElement ];
[xmlDoc release ]; 
```

xmlDoc 的值为 nil。

您的回答将不胜感激。

谢谢，陶西夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:51:30.227

你`file://`在`strValue`. 请参阅`NSURL`类文档...如果您不想`file://`手动添加前缀，则应使用`fileURLWithPath:isDirectory:`.

为什么这一切？

对您的情况的简化解释 - 每个 URL 都包含方案/协议（http、文件、https、...）、分隔符（://）和路径（~/Desktop/...）。它是强制性的，而不是可选的。当您使用`URLWithString:`它时，它期望您的字符串是完整的 URL，而不仅仅是它的一部分（在您的情况下缺少方案/协议）。

因此，如果您确实想使用 URL 而不是文件路径，则必须注意`file://`（何时`URLWithString:`使用）或使用`fileURLWithPath:isDirectory:`可以仅传递文件路径的地方。

您这样做，但只是警告其他人，如果您的路径确实包含波浪号 (~)，您必须先扩展它。

# logic - ^= 操作在逻辑上到底发生了什么？

> ID：12881087
> 
> 赞同：0
> 
> 时间：2012-10-14T09:52:47.333
> 
> 标签：logic, xor

在阅读了“当天的面试问题”之后，我偶然发现了一种关于 xor 操作的不熟悉的编程语法。有人可以并且会解释执行时发生的情况：

```
result = 2;
out.println(result ^= 10);    // This gives a result of 8.

result = 3;
out.println(result ^= 10);    // This gives a result of 9.

result = 4;                   
out.println(result ^= 10);    // This gives a result of 14. 
```

我很难弄清楚这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:00:08.427

这称为按位异或运算符。如果比较的位中的任何一个为 1，则为 1。如果 BOTH 为 1，或 BOTH 均为 0，则结​​果将为 0。它实际上是在您正在比较的数字的 BIT 级别上工作。

例子：

```
0010 ^= (XOR) 1010 = 1000
(2)  ^=       (10) = (8)

0011 ^= (XOR) 1010 = 1001
(3)  ^=       (10) = (9)

0100 ^= (XOR) 1010 = 1110
(4)  ^=       (10) = (14) 
```

# datagridview - 如何使位图中打印的文本具有与 datagridview 单元格中打印的文本相同的外观

> ID：12881090
> 
> 赞同：1
> 
> 时间：2012-10-14T09:53:33.057
> 
> 标签：datagridview, bitmap

我有一个位图，在这个位图中我使用拉绳打印了一个文本。drawstring中使用的字体和前景色（画笔）与datagridview单元格相同（使用DataGridViewCellStyle引用字体和前景色），但是位图中的文本比datagridview单元格中出现的文本更粗，并且字体没有相同的外观和感觉。也许是因为位图是图形文本而 datagridview 单元格不是？如何获取位图中的文本与 datagridview 单元格中的文本具有相同的外观？可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:12:18.113

DataGridViewTextBoxCell 在内部使用 TextRenderer 来绘制自身，而不是 DrawString。尝试这个：

```
TextRenderer.DrawText(graphics, text, dataGridView1.DefaultCellStyle.Font, location, dataGridView1.DefaultCellStyle.ForeColor); 
```

# java - PCA面部识别，实施技术

> ID：12881093
> 
> 赞同：1
> 
> 时间：2012-10-14T09:53:53.107
> 
> 标签：java, face-recognition, pca

我正在使用 PCA 算法进行 faiale 识别项目。我必须用 JAVA 开发这个项目，我有一些与该算法的实现相关的问题：

第一：在计算平均人脸（meanface）时，我是否应该考虑到我正在处理图像，这意味着所有图像向量的平均值不能以与代数相同的方式计算，但我们应该`sum`为每个人使用相同的组件像素（例如：红色与红色，绿色与绿色等），然后将结果除以图像向量的数量。这是正确的还是不正确的？

如果前面的方法是正确的，那么向量的乘法呢？当我处理图像向量时，我应该如何计算它？

第二：假设前面的主题是不正确的，当我计算图像的特征向量时（通过使用算法中解释的代数方法），结果向量包含具有非常大数字的像素，在尝试时无法表示任何图像通过使用特征向量和变换矩阵来检索源图像，那么我的问题是什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:12:15.843

所有图像应首先转换为灰度。然后以与所有图像中每个像素的代数平均值相同的方式计算平均人脸，因此所有图像中所有像素（0,0）的平均值是平均人脸的像素（0,0），依此类推.

所有其他计算都是以像素为单位进行的。

如果你没有这个，将 rgb 转换为灰度使用 P = 0.587*red + 0.299*green + 0.114*blue

# iphone - 如何保存对象（保存/加载游戏）

> ID：12881102
> 
> 赞同：1
> 
> 时间：2012-10-14T09:54:59.883
> 
> 标签：iphone, objective-c, save

我目前正在寻找一种在我正在开发的 Iphone 应用程序中保存对象的方法。由于该游戏涉及清除“关卡”，因此我希望能够在某处存储一个数组以指示已完成哪些关卡。但是，这必须与游戏无关，因为退出游戏一定不会导致数据丢失。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:01:35.493

保存还原对象的最简单方法是 NsUserdefaults。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// saving an NSString
[prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];

// saving an NSInteger
[prefs setInteger:42 forKey:@"integerKey"];

// saving a Double
[prefs setDouble:3.1415 forKey:@"doubleKey"];

// saving a Float
[prefs setFloat:1.2345678 forKey:@"floatKey"];

[prefs synchronize]; 
```

用于检索

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSString
NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// getting an NSInteger
NSInteger myInt = [prefs integerForKey:@"integerKey"];

// getting an Float
float myFloat = [prefs floatForKey:@"floatKey"]; 
```

对于其他类型的对象

```
[prefs objectForKey:@"anyObjectKey"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:58:30.077

**小块数据**

一起去`NSUserDefaults`。例如，您还可以使用[https://github.com/MugunthKumar/MKiCloudSync](https://github.com/MugunthKumar/MKiCloudSync)`NSUserDefaults`同步到 iCloud 。因此，即使用户再次删除并安装您的应用程序，进度也会被保存，...

**大块数据**

`CoreData`与`sqlite`例如一起使用。

# java - compareTo() 如何使用三个词而不是两个词

> ID：12881105
> 
> 赞同：1
> 
> 时间：2012-10-14T09:55:25.080
> 
> 标签：java

有没有办法使用 compareTo() 来使用三个词而不是两个

比如 a1.compareTo(a2); 其中使用两个，你如何使用三个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T09:57:19.597

不，没有这样的方法，无论如何，树形比较的结果不能用单个整数有意义地表示。

如果你认为你需要这样的方法，那么你真正需要的是一种对三个项目进行**排序的方法。**将它们放入数组或 a`List`中，并分别调用`Arrays.sort`or `Collections.sort`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:03:53.863

像这样使用集合：

```
 String n = "word";      
    Collection<String> f = new ArrayList<String>();
    f.add("one");
    f.add("one");
    f.add("one");
    System.out.println(Collections.frequency(f, "one") == f.size());
    f.add("tow");
    System.out.println(Collections.frequency(f, "one") == f.size()); 
```

# symfony - 使用教义2加入symfony2中的两个实体

> ID：12881107
> 
> 赞同：0
> 
> 时间：2012-10-14T09:55:49.887
> 
> 标签：symfony, doctrine-orm, dql

有两个实体。**票**和**设备**。

在**设备**形式中有

```
<one-to-many target-entity="Ticket" mapped-by="Device" field="ticket"/>
<many-to-one field="category" target-entity="Category"/> 
```

以**票证形式**

```
<many-to-one field="device"  target-entity="Device"/> 
```

我想实现一个过滤器，用户可以在其中按设备类别过滤工单。我怎样才能做到这一点？我试过了

```
$qb->select(array('t', 'd'))
        ->from('MyBundle:Ticket', 't')
        ->innerJoin('t.device', 'd')
        ->where("t.category.name = 'Cashbox'");; 
```

但这给了我一个错误

```
[Syntax Error] line 0, col 88: Error: Expected =, <, <=, <>, >, >=, !=, got '.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:50:09.247

```
->where("t.category.name = 'Cashbox'");; 
```

是不正确的。您必须加入类别表：

```
$qb
    ->select(array('t', 'd'))
    ->from('MyBundle:Ticket', 't')
    ->innerJoin('t.device', 'd')
    ->innerJoin('d.category', 'c')
    ->where("c.name = 'Cashbox'"); 
```

# php - MYSQL 关系和查询问题

> ID：12881108
> 
> 赞同：0
> 
> 时间：2012-10-14T09:55:51.513
> 
> 标签：php, mysql, relationship

用户有很多项目，但项目有很多类别。

我希望在用户帐户中显示一个表格，以查找每个项目的项目数：

```
-------------------------------
| Item Name | Number of Items |
-------------------------------
|  Item 1   |        24       |
|  Item 2   |        18       |
|  Item 3   |        6        |
------------------------------- 
```

我无法解决...用户有多个项目，但用户表中只有一个标识符

User 表是否有一个与 user_items 表相关的 item_id？user_items 表有三个字段：item_id、item name 和item 个数？

有人帮忙解压吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:00:01.297

*   如果一个项目最多可以“属于”一个用户，只需在`item`表中直接存储一个 FK 到`user`表中：

    ```
    CREATE TABLE item (
      item_id   SERIAL PRIMARY KEY,
      item_name VARCHAR(20),
      user_id   BIGINT UNSIGNED, -- NOT NULL if every item must belong to a user
      FOREIGN KEY (user_id) REFERENCES user (user_id)
    ); 
    ```

    然后，获取每个用户的项目数：

    ```
    SELECT user_id, COUNT(*) AS num_items FROM item GROUP BY user_id; 
    ```

    如果您还希望从`user`表中获取关联的用户信息，您只需要执行[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

    ```
    SELECT   user.*, COUNT(*) AS num_items
    FROM     user JOIN item USING (user_id)
    GROUP BY user_id; 
    ```

*   如果一个项目可以同时“属于”多个用户，请将`user_items`表 FK 存储到 the`user`和`item`表中。

    ```
    CREATE TABLE user_items (
      item_id BIGINT UNSIGNED NOT NULL,
      user_id BIGINT UNSIGNED NOT NULL,
      FOREIGN KEY (item_id) REFERENCES item (item_id),
      FOREIGN KEY (user_id) REFERENCES user (user_id)
    ); 
    ```

    然后获取每个用户的项目数：

    ```
    SELECT user_id, COUNT(*) AS num_items FROM user_items GROUP BY user_id; 
    ```

    或者，相反，每个项目的用户数：

    ```
    SELECT item_id, COUNT(*) AS num_users FROM user_items GROUP BY item_id; 
    ```

    同样，您可以根据需要执行 a`JOIN`从其他表中获取相关信息。

*   除非用户最多可以拥有一项，否则不要在`user`表中将 FK 存储到表中。`item`

    ```
    CREATE TABLE user (
      user_id SERIAL PRIMARY KEY,
      item_id BIGINT UNSIGNED      -- don't do this
    ); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:11:48.210

Users - 仅存储用户信息，Items - 仅存储项目信息，User_items - 存储 userId 和 itemId

基本查询如下所示，然后您可以按项目显示结果。SELECT * 返回所有表中的所有行。因此，您将获得所有用户、项目和 user_items 信息。

```
SELECT * FROM user_items
JOIN items on user_items.itemId = items.itemId
WHERE userId = $yourUserID
GROUP BY itemId 
```

# c# - 无法识别的数组错误

> ID：12881110
> 
> 赞同：2
> 
> 时间：2012-10-14T09:56:02.433
> 
> 标签：c#, arrays

以下是创建一些错误，即“B”无法识别（以及其他 20 个字母和“文件”无法识别。

我看不到这里的问题？

```
string[] correctAnswers = {B,D,A,A,C,A,B,A,C,D,B,C,D,A,D,C,C,B,D,A}; 
string[] studentResults = File.ReadAllLines("studentResults.txt"); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T09:57:33.340

您应该将它们用双引号括起来：

```
string[] correctAnswers = {"B","D","A","A","C","A","B","A","C","D","B","C","D","A","D","C","C","B","D","A"}; 
```

**编辑 ：**

（感谢@goldenparrot）你需要添加这个命名空间：

```
using System.IO; 
```

能够使用 File.ReadAllLines()。要么：

```
string[] studentResults = System.IO.File.ReadAllLines("studentResults.txt"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T09:58:42.467

```
const string A = "A";
const string B = "B";
const string C = "C";
const string D = "D";

string[] correctAnswers = { B, D, A, A, C, A, B, A, C, D, B, C, D, A, D, C, C, B, D, A }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T10:00:30.390

正如其他人所说，您必须用双引号将字符串文字括起来。

现在，如果你想维护一个*字符*数组，最好使用一个简单的字符串而不是字符串数组，因为字符串也是可迭代的：

```
string correctAnswers = "BDAACABACDBCDADCCBDA"; 
```

然后是这样的：

```
foreach (char answer in correctAnswers) {
    // ...
} 
```

关于您问题的第二部分，[File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)类位于`System.IO`命名空间中，因此您需要一个`using System.IO;`指令，或者必须通过其完全限定名称来引用该类，`System.IO.File`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T09:58:40.373

将字母写在双引号内，并`@`用于文件的路径。

```
string[] correctAnswers = {"B","D","A","A","C","A","B","A","C","D","B","C","D","A","D","C","C","B","D","A"};
 string[] studentResults = File.ReadAllLines(@"studentResults.txt"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T09:59:10.703

你有一个数组`string`。如您所知（或不知道），字符串用双引号 - “”。因此，在您的问题中， string[] 应该如下所示：

```
string[] correctAnswers = {"B","D","A","A","C","A","B","A","C","D","B","C","D","A","D","C","C","B","D","A"}; 
```

# fork - fork() 调用的输出

> ID：12881111
> 
> 赞同：1
> 
> 时间：2012-10-14T09:56:20.530
> 
> 标签：fork

以下 fork() 调用的输出是什么？

```
func(){
fork();
fork();
fork() && fork() || fork();
fork();
print("Saikacollection\n");
} 
```

任何人都可以帮助我获得此代码的答案以及一些解释，因为我是 OS 新手？我在 SO 上发现了几个关于 fork() 的问题，但想不通。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-03T01:47:41.733

Saikacollection 将打印`40`时间作为代码的输出。这可以解释如下：-

要了解输出，我们需要了解以下内容：-

*   成功执行 fork() 调用后，将创建新的孩子。创建孩子的过程称为`parent process.`
*   Fork() 调用将`pid`子进程的（进程标识符）返回给父进程
*   fork() 返回`0`子进程。

![在此处输入图像描述](../Images/f9cb2b6b1466d6ae17388ba2bb2a567e.png)

考虑显示的图像：-

约定：该过程的所有父母（调用者）都被写入`left`并标有`star`.

```
fork() 
```

*   一开始，我们只有 1 个进程，因此 fork() 调用会创建一个子进程。将树的根视为第 1 级，我们可以看到在第 2 级，我们有两个进程，父进程（左）和子进程（右）。

    `fork()`

*   fork() 再次进一步创建`4`这样的进程，标记为 1、2、3、4。由于所有四个进程都将进一步经历相似的代码结构，我们可以说进程总数将是`4`单个进程产生的次数

    `fork()&&fork()||fork()`

*   理解这个陈述涉及，意识到在 C 中，`&& operator has more precedence than ||`

*   此外，如果`first`由`&&`go连接的两个操作数`wrong`，我们`don't check the second`。同样，如果`first`是的两个操作数`||`，`true`操作`we don't check the second`数。
*   考虑，在 1（标记）节点的 fork() 调用，创建了两个进程。当父母得到一个正数（pid）作为返回时，孩子得到一个0。所以，父母执行第二个运算符，而孩子在||之后跳转到fork（）如图所示。
*   第 4 级父级的执行`&&fork()`返回一个进程的 pid，该进程终止，而该步骤的子级得到 0。因此，它执行`||fork()`
*   对第 5 级子级的最终`||fork()`调用，结果进一步产生了一个过程
*   因此，在步骤结束时，我们有 5 个叶子（进程），如图中的下划线所示。
*   如果我们对所有三个节点都做同样的事情，我们就可以得到`5*4 = 20`进程。

    `fork()`

*   最后的 fork() 只是`doubles`该步骤可用的进程数。

*   因此，进程总数 = `2*20 = 40`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T12:15:15.997

Saikacollection 每次在新行中打印 32 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T06:37:57.403

如果您希望新进程更加独立，您可以查看 exec-* 系列函数（POSIX） - 这样您就可以分叉，然后立即替换分叉进程（您可以这样做，因为新分叉的进程受到控制由你）; 或者也可以看看 popen() 。

# php - 需要算法和实现帮助 - 比较 2 个文件

> ID：12881114
> 
> 赞同：3
> 
> 时间：2012-10-14T09:56:37.203
> 
> 标签：php, algorithm, implementation

我的项目目的：有 4 个文件。他们每个人都有不同的行数。每行由一个或几个单词组成。现在，对于这些文件中的每一个，我想计算哪个文件具有最多的常用词。

*   例如。(',' 是一个新行\n)
*   **输入：**
*   文件 1 行：A、B、C、D
*   文件 2 行：C、D、E、F
*   文件 3 行：A、E、C、G
*   文件 4 行：C、E、F、A

*   **输出 ：**

*   文件 1：最多常用词为 2，它们在文件中：文件 2 (C,D)、文件 3 (A,C) 和文件 4 (C,A)。
*   文件 2：最多常用词为 3，它们在文件中：文件 4 (C,E,F)。
*   文件 3：最多常用词为 3，它们在文件中：文件 4 (C,E,A)。
*   文件 4：最多常用词为 3，它们在文件中：文件 2 (C,E,F)。

我的逻辑：

1.  开始
2.  从文件中读取每一行并将其作为一维数组存储在内存中（例如，array1[0] = "A"、array1[1] = "B" 等等。
3.  由于有 4 个文件，我创建了 4 个数组 = array1 到 array4。它们中的每一个都将具有其相应文件的内容。
4.  现在我将比较第一个数组中的第一个单词和第二个数组中的第一个单词。
5.  现在我将比较第一个数组中的第一个单词和第二个数组中的第二个单词，依此类推，直到第二个数组的末尾。
6.  我将继续这个直到最后一个数组中的最后一个单词。
7.  当我发现匹配的东西时，我会通过递增 1 在变量中记下。

想知道这是否是解决这个问题的权利。

或者有没有更好的方法来思考这个问题？

编辑：1.忘记添加，将使用php。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:11:54.190

我从这样的有趣情况中学习了 PHP。继续学习。

```
// put all files in same directory as this script
// put file names in this array
$files = array('1.txt','2.txt','3.txt','4.txt');
$words = array();
$data = '';

$delimiter = "\n";  // change this to \r if running windows OS
// itterate through the files and create a word list  
foreach($files as $file){
    $fh = fopen($file,'r');
    $data .= $delimiter.fread($fh,filesize($file));
    fclose($fh);
}
// assuming 1 match per line like your question example 
$lines = explode($delimiter,$data);

foreach($lines as $line){
    $line = trim($line);
    if(empty($line)) continue;
    @$words[$line] += 1;  // @ suppreses notices
}

var_dump($words);
/* *
 * according to your example:
 *
array(7) {
  ["A"]=>
  int(3)
  ["B"]=>
  int(1)
  ["C"]=>
  int(4)
  ["D"]=>
  int(2)
  ["E"]=>
  int(3)
  ["F"]=>
  int(2)
  ["G"]=>
  int(1)
} 
*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:20:21.980

应该很容易用[array_intersect](http://php.net/manual/en/function.array-intersect.php)完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T10:29:24.607

您应该首先对数组进行排序。`array1`然后，要计算和之间的公共线数`array2`，有两个计数器`i1`和`i2`。

伪代码：

```
while(i1 < array.length && i2 < array2.length)
  if array1[i1] == array2[i2]
    ++i1; ++i2
    ++result
  else if array1[i1] < array2[i2]
    ++i1
  else
    ++i2 
```

# ruby-on-rails-3 - Phonegap 在 rails3 上进行 Post Call 以休息服务

> ID：12881115
> 
> 赞同：0
> 
> 时间：2012-10-14T09:56:40.313
> 
> 标签：ruby-on-rails-3, jquery, cordova, cross-domain

我有一个 rails3 休息服务，我正在开发一个只能使用 HTML5 和 Jquery javascript 的 phonegap 应用程序。

由于跨域安全性，我无法使用 ajax jquery 对我的 rail3 休息服务进行 POST 休息调用。

我该如何解决。如果您可以将我指向客户端和服务器端的代码，我将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:58:45.947

如果您的应用程序从 file:// 协议运行，那么您可以执行跨域请求。来自[jQuery Mobile 文档](http://jquerymobile.com/test/docs/pages/phonegap.html)：

> 您从 PhoneGap jQuery Mobile 应用程序中访问跨域页面的能力受两个关键因素控制：$.support.cors 和 $.mobile.allowCrossDomainPages，并且还可能受到 PhoneGap 后续版本中的白名单功能的影响.

还要确保将尝试进行 AJAX 调用[的服务器列入白名单。](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

# c# - Windows 窗体应用程序 - 必须关闭窗体并再次打开？

> ID：12881119
> 
> 赞同：-5
> 
> 时间：2012-10-14T09:57:25.727
> 
> 标签：c#, visual-studio-2010

简而言之，我正在用 C# 编写一个代码，该代码在按下按钮后初始化大量数组。如果我按下按钮。它应该根据我给程序的密码给我一个特定的值。如果我再次点击相同的按钮，如果密码相同，它应该给我相同的确切值（如果你很好奇，它是加密/解密程序）。

问题是除非我关闭表单并重新打开它，否则它不会给出相同的值。这让我想到了一个没有被破坏并给出上次运行值的数组。如何在不关闭界面的情况下销毁所有内容（就像关闭表单一样）？提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:08:24.603

`setting the array values to null`在按钮单击处理程序结束时怎么样。这是我能想到的最好的方法，除非掌握了你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:08:55.083

由于您不提供任何代码，因此回答有点问题：

*   您初始化的数组是全局声明的还是本地声明的？如果全局尝试将其移动到函数内部（如果每次调用函数时都希望其中的数据完全相同）。
*   如果要清除数组，请根据数组的类型调用 .Clear() 。但只要您不修改内容，就没有必要。如果数组没有公开 Clear() 方法，请使用`myArray = null;`

# jquery - 如何用fancybox实现jquery Power Zoom？

> ID：12881120
> 
> 赞同：0
> 
> 时间：2012-10-14T09:57:26.007
> 
> 标签：jquery, fancybox

如何用fancybox（[http://fancyapps.com/fancybox/demo/ ）实现jquery Power Zoom（](http://fancyapps.com/fancybox/demo/) [http://www.dynamicdrive.com/dynamicindex4/powerzoomer.htm](http://www.dynamicdrive.com/dynamicindex4/powerzoomer.htm)）？我已经尝试过这种方式，但仍然无法工作

```
jQuery("#" + prefixId + "gallery a").fancybox({
    transitionIn: 'none',
    transitionOut: 'none',
    width: contentHeight,
    height: contentHeight,
    cyclic: true,
    onStart: function() {
        jQuery("#" + prefixId + "gallery").trigger("pause");
        jQuery("img.fancybox-image").addpowerzoom();
        console.log('start');
    },
    onClosed: function() {
        jQuery("#" + prefixId + "gallery").trigger("play");
        console.log('closed');
    },
    callbackOnShow: function() {
        jQuery("img.fancybox-image").addpowerzoom();
        console.log('show');
    },
    onComplete: function() {
        jQuery("img.fancybox-image").addpowerzoom();
        console.log('complete');
    }
});​ 
```

# c - 堆排序将结果保存到文件

> ID：12881121
> 
> 赞同：0
> 
> 时间：2012-10-14T09:57:27.537
> 
> 标签：c, file, heapsort

我在将结果保存到文件时遇到问题。这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#define DUZO 100000000
int heap_size;
int tab[DUZO];
FILE* wejscie;
FILE* wyjscie;

void rand1(int tmp){
    int i, y;

    for(i = 0; i < tmp; i++){
        y = rand();
        fprintf(wejscie, "%i ", y);
    }
}

void heapify(int start){
    int l, r, largest, pom;

    l = 2*start + 1;
    r = 2*start + 2;

    if((l < heap_size) && (tab[l] > tab[start]))
        largest = l;
    else
        largest = start;

    if((r <  heap_size) && (tab[r] > tab[largest]))
        largest = r;
    if(largest != start){
        pom = tab[start];
        tab[start] = tab[largest];
        tab[largest] = pom;

        heapify(largest);
    }
}

void build_max(){
    int lenght, i;
    lenght = heap_size;

    for(i = ((lenght - 1)/2); i >= 0; --i){
        heapify(i);
    }
}

void heap_sort(){
    int i;
    build_max();

    for(i = heap_size-1; i > 0; --i) {
        int tmp = tab[0];
        tab[0] = tab[i];
        tab[i] = tmp;
        --heap_size;
        heapify(0);
    }
}

int main(void){

    wejscie=fopen("wejscie.dat","rw");
    wyjscie=fopen("wyjscie.dat","w");

    int i, tmp;

    printf("Podaj ilosc liczb do sortowania: ");
    scanf("%i", &heap_size);
    tmp = heap_size;

    rand1(tmp);

    printf("Pseudolosowe liczby do posortowania: \n");
    for(i = 0; i < tmp; i++){
        fscanf(wejscie,"%i", &tab[i]);
        printf("%i\n", tab[i]);
    }

    heap_sort();

    fclose(wejscie);

    printf("\nPosortowany ciag: \n");
    for(i = 0; i < tmp; i++){
        printf("%i\n", tab[i]);
        fprintf(wyjscie, "%i\n", tab[i]);
    }

    fclose(wyjscie);
return 0;   
} 
```

当我创建文件 wejscie.dat 时程序运行良好，但是当我不使用 rand 函数创建它时它不起作用并且不会将结果保存到文件 wejscie.dat。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:22:28.080

**wejscie.dat**是您的输入文件。显然你正在向其中写入随机值并再次读取它以加载`tab[]`. `rand1()`您可以通过初始化数组本身来跳过创建文件。

**wyjscie.dat**是您的输出文件，而不是**wejscie.dat**

PS：在`"w+"`模式下打开输入文件，`rewind`然后再次读取它。

```
 wejscie = fopen("wejscie.dat", "w+");
    if (NULL == wejscie) {
        fprintf( stderr, "ERROR: Opening Input file Err[%d] Error[%s]", errno, strerror(errno));
        //Formal error handling
        return (-1);
    }
    //...
    //...
    rand1(tmp);
    rewind (wejscie); 
    fprintf( stderr, "Pseudolosowe liczby do posortowania: \n"); 
```

# java - 如何在 Eclipse 上导出带有图像的 jar？

> ID：12881123
> 
> 赞同：3
> 
> 时间：2012-10-14T09:57:31.947
> 
> 标签：java, eclipse, image, jar, embedded-resource

我创建了一种国际象棋游戏（它不完全是国际象棋，但我不知道它是如何用英语调用的）并且我想将它导出为可运行的 jar。

问题是图像（在这个程序中 - 播放器）由于某种奇怪的原因没有被导出。

如何在带有图像的 Eclipse 上导出可运行的 jar？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:08:38.657

推荐的方法是`resource`在项目根目录下有一个目录，并将其包含在源代码目录列表中。这将导致那里的所有图像都被复制到 JAR 中。如果你在那里创建一个子目录`resource/image`，那么你最终会得到一个有`image`目录的 JAR。您可以通过类加载器访问这些图像：

```
classloader.getResourceAsStream("/image/name.jpg"); 
```

或者，每当您将图像传递给接受资源 URL 的 API 时：

```
classloader.getResource("/image/name.jpg"); 
```

当然，这完全取决于您构建 JAR 的方式，但如果您通过 Eclipse 的 Export JAR 进行构建，您将能够实现我所描述的。如果您使用 Maven，则有一种与我描述的方法非常相似的方法。

另请注意，我故意避免演示获取类加载器的代码，因为这是 Java 中的一个重要主题，应该以特定于上下文的方式完成。但是，如果您从与图像在同一个 JAR 中的类中执行此操作，则可以肯定的是，这将通过实例方法起作用：

```
this.getClass().getClassLoader(); 
```

`this`在这里是可选的，实际上从代码样式的角度来看并不推荐，但为了清楚起见，我将其包括在内，因为调用`getClass`除您自己的类之外的任何类的实例都是错误和危险的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:11:57.650

让我举几个例子，以防你觉得它们很有趣：

要将 jar 文件中的资源（图像）写入 DataOutPutStream：

```
public static void readResourceFromJarToDataOutputStream(String file,
        DataOutputStream outW) {
    try {
        InputStream fIs = new BufferedInputStream(new Object() {
        }.getClass().getResourceAsStream(file));
        byte[] array = new byte[4096];
        for (int bytesRead = fIs.read(array); bytesRead != -1; bytesRead = fIs
                .read(array)) {
            outW.write(array, 0, bytesRead);
        }
        fIs.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

将资源加载到内存中（字节数组）：

```
public static byte[] readResourceFromJarToByteArray(String resource) {
    InputStream is = null;
    byte[] finalArray = new byte[0];
    try {
        is = new Object() {
        }.getClass().getResourceAsStream(resource);
        if (is != null) {
            byte[] array = new byte[4096];//your buffer size
            int totalBytes = 0;
            if (is != null) {
                for (int readBytes = is.read(array); readBytes != -1; readBytes = is
                        .read(array)) {
                    totalBytes += readBytes;
                    finalArray = Arrays.copyOf(finalArray, totalBytes);
                    System.arraycopy(array, 0, finalArray, totalBytes- readBytes, 
                            readBytes);
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (is != null)
                is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return finalArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T19:04:03.400

只需将所有资源（例如图像、文本文件、所有内容）放入可运行 Jar 所在的目录中。它为我解决了这个问题。

# asp.net - 以 HTML 格式保存数据

> ID：12881126
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:58:02.260
> 
> 标签：asp.net

在网站的管理部分，我看到一个类似 MS-Word 的控件，用户编写带有文字效果的文本，然后她将该文本保存在数据库中，然后将这些数据格式化显示在数据库的另一部分中。我猜这个控件以 html 格式保存格式化文本，然后使用文字控件来显示这些数据。我的问题是控制可以做到这一点，我如何使用这个控制？我正在使用 ASP.Net 4.0 和 C# 作为编程语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:03:58.317

我敢肯定，这就是您要搜索的内容-> [http://freetextbox.com/](http://freetextbox.com/)

[![](../Images/a74287693095e6c9df2258b20ceec5a2.png)](https://i.stack.imgur.com/Pe5vU.jpg)
[（来源：[freetextbox.com](http://freetextbox.com/images/example1.jpg)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:01:09.720

AFAIK，Microsoft 在标准 .NET 中没有可用的富文本框。查看[CKEditor](http://ckeditor.com/blog/CKEditor.NET_released)。

# java - 数组到哈希表

> ID：12881129
> 
> 赞同：1
> 
> 时间：2012-10-14T09:58:31.047
> 
> 标签：java, arrays, hashtable

我想创建哈希表，它将从我的数组中获取每个字符串并将其分配给唯一的整数值。我的数组是从文件中读取并分配给这样的数组：

```
public void readFile() throws Exception{

    FileInputStream in = new FileInputStream("words.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    String strLine;
    wordsList = new String[getNumberOfLines()];   

    for (int j = 0; j < wordsList.length; j++){
    wordsList[j] = br.readLine();

    }
    in.close();
} 
```

使用这个数组，我编写了创建哈希表的方法，如下所示：

```
String currentWord;
private Hashtable <String,Integer> wordsHashTable;
LinesReader lr = new LinesReader();
int i;
String[] listOfWords;

public boolean insertValues() throws Exception{
    for (i=0; i<lr.getNumberOfLines();i++){
        lr.readFile();
        listOfWords = lr.returnsWordList();
        currentWord = listOfWords[i];
        wordsHashTable.put(currentWord, i+1);
    }
    return wordsHashTable.isEmpty(); //testing purposes only
} 
```

它在以下行引发 NullPointer 异常： wordsHashTable.put(currentWord, i+1); 我搞砸的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:00:25.227

您必须`wordsHashTable`使用该类的实例初始化您的：

```
private Hashtable <String,Integer> wordsHashTable = new Hashtable<>(); 
```

**但是**，请注意`Hashtable`该类已过时；你应该`java.util.HashMap`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:02:32.490

初始化你的哈希表。你忘了初始化它。

```
 private Hashtable <String,Integer> wordsHashTable = new Hashtable<>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:01:25.163

您没有初始化“哈希表”。

```
private Hashtable <String,Integer> wordsHashTable = new Hashtable <String,Integer>(); 
```

会修复它。

但是，我建议您转向更现代的东西，例如[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

# android - ACTION_CALL 在 android 4.1 果冻豆上打开拨号器

> ID：12881133
> 
> 赞同：-1
> 
> 时间：2012-10-14T09:58:44.950
> 
> 标签：android, android-intent

我的应用程序中有一个功能可以直接拨打电话号码而无需通过 android dallier，在 android 2.2 和 2.3 上一切正常，但现在自从我将手机升级到 4.1 后，呼叫意图是“ACTION_CALL”而**不是**“ACTION_DIAL” " 仍然进入拨号器屏幕并等待用户点击通话按钮

以下是负责直接拨打电话号码的代码块：

```
void makeCall(Context context,String number){
 Intent callIntent = new Intent(Intent.ACTION_CALL);  
 // Add the additional flags required for staring new Activity.
 callIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
 callIntent.setData(Uri.parse("tel:"+number));
 context.startActivity(callIntent);
} 
```

我还在清单中设置了通话权限

```
<uses-permission android:name="android.permission.CALL_PRIVILEGED" />
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

有没有其他人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:36:28.420

自 android 4.1 以来，android 似乎将“9999999991”、“9999999992”、“9999999993”视为我测试的虚拟电话号码，而普通号码直接拨号，上述号码显示在拨号器中。

# actionscript-3 - SWF 在返回到第 1 帧时崩溃

> ID：12881141
> 
> 赞同：1
> 
> 时间：2012-10-14T09:59:29.593
> 
> 标签：actionscript-3, crash, flash, flash-cs6

每当我尝试返回到第 1 帧时，SWF 就会崩溃（从 Flash 导出时，而不是在其中测试时！）。在第 1 帧中，我放置了一些变量声明，一个 enter.frame 事件侦听器、4 个 mouse.click 事件侦听器和一个 stop。我后来使用了一个简单的 gotoAndStop(1); 返回。当我单击该按钮时，它会停止一秒钟，然后 SWF 就会关闭。

SWF 仅在发布和运行时在 Adob​​e Flash 之外崩溃。

动作层：第 1 帧

```
var req1:URLRequest = new URLRequest("1.mp3"); 
var req2:URLRequest = new URLRequest("2.mp3"); 
var req3:URLRequest = new URLRequest("3.mp3"); 
//var req4:URLRequest = new URLRequest("4.mp3"); 
var autSnd:Sound = new Sound(req1);
var spriSnd:Sound = new Sound(req2);
var sumSnd:Sound = new Sound(req3);
//var wintSnd:Sound = new Sound(req4);
var soundChannel:SoundChannel = new SoundChannel();
var sound:Sound;
var sng=1;

stop();

addEventListener(Event.ENTER_FRAME, fl_EnterFrameHandler);

function fl_EnterFrameHandler(event:Event):void
{
    L.width = stage.stageWidth;
    L.height = stage.stageHeight;
    L.alpha = (soundChannel.leftPeak + soundChannel.rightPeak)/2;
}

aut.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler);
function fl_MouseClickHandler(event:MouseEvent):void
{
    sound = autSnd;
    sng=1;
    gotoAndStop(2);
}

spr.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler1);
function fl_MouseClickHandler1(event:MouseEvent):void
{
    sound = spriSnd;
    sng=2;
    gotoAndStop(2);
}

sum.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler2);
function fl_MouseClickHandler2(event:MouseEvent):void
{
    sound = sumSnd;
    sng=3;
    gotoAndStop(2);
}

wint.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler3);
function fl_MouseClickHandler3(event:MouseEvent):void
{
    //sound = wintSnd;
    //gotoAndStop(5);
} 
```

动作层：第 2 帧

```
var pausePoint:Number = 0.00;
var isSPlaying:Boolean;

xstop.addEventListener(MouseEvent.CLICK, clickStop);
xplay.addEventListener(MouseEvent.CLICK, clickPlayPause);

nm.gotoAndStop(sng);
soundChannel = sound.play();
isSPlaying = true;

function clickPlayPause(evt:MouseEvent) {
    if (isSPlaying) {
        pausePoint = soundChannel.position;

        soundChannel.stop();
        isSPlaying = false;
    } else {
        soundChannel = sound.play(pausePoint);

        isSPlaying = true;
    }
}

function clickStop(evt:MouseEvent) {
    if (isSPlaying) {
        soundChannel.stop();
        isSPlaying = false;

    }
    pausePoint = 0.00;
}

function StopS() {
    soundChannel.stop();
    isSPlaying = false;
    pausePoint = 0.00;
} 
```

按钮层：第 2 帧

```
nm.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler_aur);
function fl_MouseClickHandler_aur(event:MouseEvent):void
{
    StopS();
    gotoAndStop("menu");
} 
```

# android - Android：如果网络可用，则检查互联网

> ID：12881142
> 
> 赞同：2
> 
> 时间：2012-10-14T09:59:38.783
> 
> 标签：android

我正在使用此代码检查网络连接：

```
public boolean isOnline() {
    ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

它工作正常。但我想要的是互联网是否也可用，因为有时网络可用但没有互联网。

# php - PHP while循环中的while循环工作一次

> ID：12881149
> 
> 赞同：2
> 
> 时间：2012-10-14T10:00:12.693
> 
> 标签：php, mysql

我有两个查询发送到数据库带回帖子（op_ideas 16 cols），然后是另一个持有每个帖子的投票（op_idea_vote cols 4）与匹配的idea_id

数据示例：

查询：op_ideas：

> [{"idea_id":"2211","author_id":"100000", "date":"2012-09-06 10:02:28","idea_title":"另一个测试","4" 等等

查询：op_idea_votes：

> idea_id = 2211，同意=3，不同意=1，弃权=0

下面的代码应该查看 op_ideas，然后循环遍历 op_ideas_vote，直到在“idea_id”下找到匹配项。然后它转到 op_ideas 下的下一条记录，并再次使用该 idea_id 在 op_idea_vote 列表中搜索它，找到匹配项，并将其添加到数组中。

这仅适用于第一条记录，不适用于其他三个。我正在测试，所以我在每行中有 3 行匹配 idea_id 与 op_idea_vote 中的不同结果。

```
$votes = mysql_query($commentVotes);

$result = mysql_query($gl_query);

while ($gce_result = mysql_fetch_array($result)) {
    $voteid = $gce_result['idea_id'];

    while($allvotes= mysql_fetch_array($votes)) {
        if($voteid = $allvotes['idea_id']) 
        {
        //echo $voteid . " main idea and the votes: " . $allvotes;
            $gce_result["agree"] = $allvotes['agree'];
            $gce_result["disagree"] = $allvotes['disagree'];
            $gce_result["abstain"] = $allvotes['obstain'];
        } 
        else 
        {
            $gce_result["agree"] = 0;
            $gce_result["disagree"] = 0;
            $gce_result["abstain"] = 0;
        }
        //print_r($gce_result);
    }
    $data_result[] = $gce_result;
}

echo json_encode($data_result); 
```

如果我使用`print_f(&gce_result)`它在 phpfiddle 中工作正常。但是当我使用上面的代码时，它适用于第一条记录，但它完全缺少第二条记录。它似乎错过了第二个，因为它甚至没有给我 0 0 0 结果。

**查询 op_ideas：**

```
$gl_query = "SELECT DISTINCT * FROM heroku_056eb661631f253.op_ideas INNER JOIN op_organs ORDER BY date ASC;";
if (!mysql_query($gl_query)) {
    die('Error: ' . $gl_query . " " . mysql_error());
}
$result = mysql_query($gl_query); 
```

**查询 op_idea_vote ：**

```
$commentVotes = "SELECT v.idea_id, COUNT(v.agree = 1 or null) as agree, COUNT(v.disagree =   1 or null) as disagree, COUNT(v.obstain = 1 or null) as obstain FROM op_idea_vote v GROUP BY  v.idea_id";
if (!mysql_query($commentVotes)) {
    die('Error: ' . $commentVotes . " " . mysql_error());
}
$votes = mysql_query($commentVotes); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:29:51.370

您只能扫描一次资源。所以内部 while 将只运行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:20:26.380

您的问题是尝试多次扫描 $votes 结果。

您应该首先存储该查询的结果。

例如。

```
while ($vote = mysql_fetch_array($votes)) {
    $allvotes['idea_id'] = $vote;
}

while ($gce_result = mysql_fetch_array($result)) {
    $voteid = $gce_result['idea_id'];
    if (array_key_exists[$voteid, $allvotes]) {
       //assign results
    } else {
       //default
    }
} 
```

另一种选择是使用连接进行查询，因此您可以在一个查询中完成所有操作。然后只需循环该结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:03:57.660

在 while 循环中使用`==`而不是`=`检查`if`&的条件`while` ，您必须分配 $allvotes 的值，但您从未分配过，

```
while ($gce_result == mysql_fetch_array($result)) {
    $voteid = $gce_result['idea_id'];

    while($allvotes== mysql_fetch_array($votes)) {
        if($voteid == $allvotes['idea_id']) 
        {
        //echo $voteid . " main idea and the votes: " . $allvotes;
            $gce_result["agree"] = $allvotes['agree'];
            $gce_result["disagree"] = $allvotes['disagree'];
            $gce_result["abstain"] = $allvotes['obstain'];
        } 
        else 
        {
            $gce_result["agree"] = 0;
            $gce_result["disagree"] = 0;
            $gce_result["abstain"] = 0;
        }
        $data_result[] = $gce_result;
    }

} 
```

# ios - UIImageView 中的 UIImage 动画向上和向下（就像悬停一样）循环

> ID：12881150
> 
> 赞同：10
> 
> 时间：2012-10-14T10:00:19.660
> 
> 标签：ios, animation, uiimageview, core-animation, ios6

您好，我有一个图像，我想上下移动（上移 10 像素和下移 10 像素），以便我的图像看起来是悬停的。我怎么能用简单的动画做到这一点非常感谢！！！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-14T14:08:30.233

您可以使用 Core Animation 为视图层的位置设置动画。如果您将动画配置为，`additive`您将不必费心计算新的绝对位置，只需更改（相对位置）。

```
CABasicAnimation *hover = [CABasicAnimation animationWithKeyPath:@"position"];
hover.additive = YES; // fromValue and toValue will be relative instead of absolute values
hover.fromValue = [NSValue valueWithCGPoint:CGPointZero];
hover.toValue = [NSValue valueWithCGPoint:CGPointMake(0.0, -10.0)]; // y increases downwards on iOS
hover.autoreverses = YES; // Animate back to normal afterwards
hover.duration = 0.2; // The duration for one part of the animation (0.2 up and 0.2 down)
hover.repeatCount = INFINITY; // The number of times the animation should repeat
[myView.layer addAnimation:hover forKey:@"myHoverAnimation"]; 
```

由于这是使用 Core Animation，您需要将 QuartzCore.framework 添加`#import <QuartzCore/QuartzCore.h>`到您的代码中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-07-29T16:53:53.807

对于 Swift 3、Swift 4 和 Swift 5：

```
let hover = CABasicAnimation(keyPath: "position")

hover.isAdditive = true
hover.fromValue = NSValue(cgPoint: CGPoint.zero)
hover.toValue = NSValue(cgPoint: CGPoint(x: 0.0, y: 100.0))
hover.autoreverses = true
hover.duration = 2
hover.repeatCount = Float.infinity

myView.layer.add(hover, forKey: "myHoverAnimation") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T10:10:22.260

试试这个：

```
CGRect frm_up = imageView.frame;
frm_up.origin.y -= 10;

[UIView animateWithDuration:0.5
    delay:0.0
    options:UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeats
    animations:^{
        imageView.frame = frm_up;
    }
    completion:NULL
]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T10:06:11.460

对于这样的任务，最好将图像放置在 的子层中`UIView`，然后为该子层帧设置动画。本教程可以给你一些想法：[http ://www.raywenderlich.com/2502/introduction-to-calayers-tutorial](http://www.raywenderlich.com/2502/introduction-to-calayers-tutorial)

# javascript - 使用nodejs从facebook获取所有专辑并表达

> ID：12881152
> 
> 赞同：2
> 
> 时间：2012-10-14T10:00:22.153
> 
> 标签：javascript, facebook, node.js, facebook-graph-api, express

我需要使用 nodejs 和 express 从 facebook 获取所有专辑。我正在使用护照对用户进行身份验证。

```
passport.use(new FacebookStrategy( {
clientID : FACEBOOK_APP_ID,
clientSecret : FACEBOOK_APP_SECRET,
callbackURL : FACEBOOK_CALL_BACK_URL,
profile : true
}, function(accessToken, refreshToken, profile, done) {
FB_ACCESS_TOKEN = accessToken;
process.nextTick(function() {
    console.log("FB_ACCESS_TOKEN : " + FB_ACCESS_TOKEN);
    return done(null, profile);
});
})); 
```

在回调中，我请求范围 user_status、user_photos 和 offline_access

```
app.get('/auth/facebook', passport.authenticate('facebook'), {
scope : [ 'user_status', 'user_photos','offline_access']
}, function(req, res) {
}); 
```

获取我正在使用的所有专辑

```
app.get('/albums', function(req, res) {
FB.setAccessToken(FB_ACCESS_TOKEN);
console.log("FB_ACCESS_TOKEN @@ : " + FB.getAccessToken());
FB.api('/me/albums', function(resp) {
    console.log("Albums " + JSON.stringify(resp));
});
}); 
```

但在控制台我得到

> 相册 {"data":[]}

有什么帮助吗？？

# c++ - 我在这里违反了 OOP 设计指南吗？几个有趣的设计泡菜

> ID：12881156
> 
> 赞同：2
> 
> 时间：2012-10-14T10:00:44.853
> 
> 标签：c++, oop

我正在为我正在创建的游戏设计一个新的加电系统。这是一个横向卷轴，电源提升显示为圆形物体，玩家必须触摸/移动它们才能获得它们的力量。然后启动电源，并在几秒钟后自行关闭。每次上电都有自己定义的持续时间。为简单起见，每 X 秒会产生一次（放置在屏幕上）电源。

我创建了一个 PowerUpManager，它的工作是决定何时创建新的电源，然后将它们放置在哪里。

然后，我创建了 Powerup 基类，并为每个新的 Powerup 创建了一个从该基类继承的类。每个 Power-up 都可以处于以下三种状态之一：禁用、放置在屏幕上和被玩家拾取。如果玩家没有拿起电源而是继续移动，电源会退出屏幕，应该从放置状态返回到禁用状态，这样才能再次放置。

（我）提出的要求之一是，当我编写一个新的 Power up 类时，应该有最少的代码更改。我能做的最好的就是一段代码：PowerUpManager 的构造函数，您必须在其中将新的电源添加到包含所有电源的容器中：

```
PowerupManager::PowerupManager()
{
    available = {
        new PowerupSpeed(),
        new PowerupAltWeapon(),
        ...
    };
} 
```

PowerUpManager，更详细地说（问题来了！）：保存一个指向 PowerUp（基类）的指针向量，称为可用。这是初始容器，其中包含游戏中每个电源的一个副本。为了处理不同的状态，它有几个列表：一个包含指向当前放置的电源 ups 的指针，另一个包含指向当前活动电源 ups 的指针。它还有一个方法，可以在每个游戏时间点调用该方法，该方法决定是否以及在何处放置新的电源并清理未拾取的电源。最后，它有一个方法，当玩家遇到加电时会调用该方法，该方法会激活加电（将其从放置的列表移动到活动列表，并调用加电的激活方法）。

最后，一旦你了解了全部情况，问题是：我需要一种方法让客户端代码询问特定的加电当前是否处于活动状态。例如：玩家有一把武器，但有一个可以暂时替换该武器的道具。在我轮询输入并识别出玩家想要开火的地方，我需要调用正确的开火方法 - 替代武器加电开火方法，而不是常规武器开火方法。

我想了一会儿这个特殊的需求，然后想出了这个：

```
template <typename T>
T* isActivated() // Returns a pointer to the derived Powerup if it exists in the activated list, or nullptr if it doesn't
{
    for(Powerup *i : active) // Active is a list of currently active power ups
    {
        T *result = dynamic_cast<T*>(i);

        if(result)
            return result;
    }

    return nullptr;
} 
```

所以客户端代码如下所示：

```
PowerUpAltWeapon *weapon = powerUpManager->isActivated<PowerUpAltWeapon>();
if(weapon)
    ... 
```

我认为这个解决方案很优雅而且有点整洁，但本质上它是试图将基本类型转换为派生类型。如果这不起作用，则尝试下一个派生类型... if / else if 的长链，它只是伪装在一个循环中。这是否违反了我刚才描述的准则？在 if / else if 的长链中没有将基类型转换为所有派生类型，直到你受到打击？还有其他解决方案吗？

第二个问题是：有没有办法摆脱在 PowerupManager 构造函数中构建所有不同电源的需要？如果您想引入新的电源，这是目前唯一需要进行更改的地方。如果我能摆脱它，那会很有趣......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:44:45.660

这是基于您的设计，但如果是我，我会为每个 PowerUp 选择一个 ID，并在客户端中选择一组 ID，并且每次用户拥有 PowerUp 时，该 ID 都会添加到它的集合中......你知道其余的部分。使用这种技术，我可以快速查找每个 PowerUp 并避免`dynamic_cast`：

```
std::set<PowerUp::ID> my_powerUps;
template< class T > bool isActivated() {
    return my_powerUps.find( T::id() ) != my_powerUps.end();
} 
```

关于你的第二个问题，我有一个类似的程序加载一些插件而不是`PowerUp`，我有一个纯虚拟基类，其中包含该插件所需的所有方法并在共享模块中实现它，然后在启动时我从特定的加载它们文件夹。例如，每个共享模块都包含一个`create_object`返回一个`plugin*`（当然是在你的情况下`PowerUp*`）然后我迭代文件夹，加载模块并调用`create_object`从它们创建我的插件并将它们注册到我的`plugin_manager`

# php - 使用 PHP5 读取 XML 文件

> ID：12881158
> 
> 赞同：1
> 
> 时间：2012-10-14T10:00:51.793
> 
> 标签：php, xml, simplexml

所以我一直在尝试从 PlaystationNetwork API 获取一些数据，

[http://www.psnapi.com.ar/ps3/api/psn.asmx/getPSNID?sPSNID=jameslfc19](http://www.psnapi.com.ar/ps3/api/psn.asmx/getPSNID?sPSNID=jameslfc19)

所以我一直在使用这段代码

```
<?php
//Get Username
$username = $_GET["u"];

// Passing the XML
$psnxml = @simplexml_load_file('http://psnapi.com.ar/ps3/api/psn.asmx/getPSNID?sPSNID=' .$username);

$psnname = $psnxml->PSNId->Avatar;
echo $psnname;
?> 
```

这绝对没有输出..

我正在使用@，否则我会得到一个（是的，我知道，但我认为即使 XML 文档有 500 内部服务器错误，它仍然会获取数据）

```
Warning: simplexml_load_file(http://psnapi.com.ar/ps3/api/psn.asmx/getPSNID?sPSNID=jameslfc19) [function.simplexml-load-file]: failed to open stream: HTTP request failed! HTTP/1.1 500 Internal Server Error in /Applications/XAMPP/xamppfiles/htdocs/Sigs/PSN2.php on line 6 
```

做这个的最好方式是什么？我假设我用@ 忽略的错误导致了问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:25:32.263

`simlexml_load_file` [在php.net](http://de3.php.net/manual/en/function.simplexml-load-file.php)上的评论中，我发现了以下内容。未经测试，但值得一试。

> sean at aliencreations dot com 17-Mar-2011 10:59 如果您发现使用 simplexml_load_file() 收到 500 个错误，但您可以通过浏览器手动访问 xml/rss 提要，则您的脚本可能被用户代理阻止嗅探器。
> 
> 在您的 xml 调用之前添加此代码以解决此问题
> 
> ```
> <?php
> 
> ini_set("user_agent","Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)");
> ini_set("max_execution_time", 0);
> ini_set("memory_limit", "10000M");
> 
> $rss = simplexml_load_file($feed_url);
> 
> ?> 
> ```

# sql - 将sql中两个不同表的相同列名数据组合成一个包含null的结果集

> ID：12881165
> 
> 赞同：3
> 
> 时间：2012-10-14T10:01:57.270
> 
> 标签：sql, plsql

我有以下两个表格，我需要将它们合并到我的每日报告中。

**表 1：Resource_Created**

**FirstName LastName ObjDate 资源登录**

```
TestDemo1        TestDemo1       5-Oct-12         AD         TESTDEMO1 
```

**表 2：Resource_Deleted**

**FirstName LastName ObjDate 资源登录**

```
TestDemo4        TestDemo4       5-Oct-12         AD         TESTDEMO4

TestDemo5        TestDemo5       5-Oct-12         AD         TESTDEMO5

TestDemo6        TestDemo6       5-Oct-12         AD         TESTDEMO6

TestDemo4        TestDemo4       5-Oct-12         Bio        TESTDEMO4

TestDemo4        TestDemo4       5-Oct-12         VPN        TESTDEMO4

TestDemo5        TestDemo5       5-Oct-12         VPN        TESTDEMO5

TestDemo6        TestDemo6       5-Oct-12         VPN          TESTDEMO6 
```

我分别写了两个查询，例如

查询一：

```
select distinct Resource as Resource, 
       count (distinct Login) as CountRes 
from Resource_Created 
where ObjDate between '4-Oct-12' and '6-Oct-12' 
group by Resource ; 
```

结果：

**资源计数资源**

```
 AD        1 
```

查询 2：

```
select distinct Resource as Resource, 
       count (distinct Login) as CountRes 
from Resource_Deleted 
where ObjDate between '4-Oct-12' and '6-Oct-12' 
group by Resource ; 
```

结果

**资源计数资源**

```
AD          3

VPN         3

Bio         1 
```

我希望将这两个查询结合起来，这样我就可以让一张表显示这些值。

```
select COALESCE (Resource_Created.Resource, Resource_Deleted.Resource) as Resource , 
 count (distinct Resource_Created.usrlogin) as aobj, 
 count (distinct Resource_Deleted.usrlogin) as bobj
FROM target_failed  FULL OUTER JOIN target_resource  
 on Resource_Created.Resource = Resource_Deleted.Resource 
where
 Resource_Created.ObjDate between '04-OCT-2012' and '06-OCT-2012' and 
 Resource_Deleted.ObjDate between '04-OCT-2012' and '06-OCT-2012'
group by COALESCE(Resource_Created.Resource, Resource_Deleted.Resource); 
```

**我的结果是**

```
**Resource       aobj         bobj**

   AD         1                3 
```

**预期结果**

**资源 aobj bobj**

```
 AD             1          3

VPN           Null         3

Bio           Null         1 
```

请问谁能帮我解决这个问题。我只是一个编写基本 sql 查询的 OO 开发人员。这将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:09:59.093

只需在 from 语句上使用 sub sql

```
select 
  ResourceI as rs, sum (CreatedLogin) as CountCreated,
 sum (DeletedLogin) as CountDeleted
from 
(select 
 ObjDate,
 Resource ,
 1 as DeletedLogin,
 0 as CreatedLogin 
 from  Resource_Deleted
 union all
 select ObjDate,
 Resource ,
 0 as DeletedLogin,
 1 as CreatedLogin  
 from  Resource_Created
)  TABLE_ALL
where ObjDate between TO_DATE('4-Oct-12') and TO_DATE('6-Oct-12')
group by Resource 
```

# java - 调用具有冲突参数的命令行应用程序

> ID：12881170
> 
> 赞同：1
> 
> 时间：2012-10-14T10:02:19.780
> 
> 标签：java, linux, command-line

具体来说，这个问题是关于 Java 和 blktrace 的，但可以概括如下：

有一个命令行应用程序 (blktrace) 可以使用参数（特别是格式）或不使用参数调用。在默认模式下调用时，此应用程序返回一个我需要的参数（起始块）：

```
blktrace -d /dev/sda -o - | blkparse -i -

  8,0    0      144     0.011134344   524  I   W 819422 + 8 [kjournald] 
```

但不是另一个（IO 大小）。我可以添加参数（-f）来指定后一个参数：

```
blktrace -d /dev/sda -o - | blkparse -f "%D %2c %8s %5T.%9t %5p %2a %3d %N\n" -i -

  8,0    0      237     2.013031115   524  I   W 4096 
```

但这样做意味着我失去了前者。该应用程序是从 Java 程序中调用的。

我无法同时从应用程序中获取这两个参数。我不能同时运行应用程序的两个实例。我可以一个接一个地运行一个实例，但这意味着我的数据并非全部针对相同的 IO 集进行编译。

知道如何为相同的读/写操作获取两个参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:35:43.337

在 %S 报告起始扇区的情况下使用以下命令怎么样：

```
blktrace -d /dev/sda -o - | blkparse -f "%D %2c %8s %5T.%9t %5p %2a %3d %N %S\n" -i - 
```

# java - 如何在Java中执行分组（sql）

> ID：12881173
> 
> 赞同：1
> 
> 时间：2012-10-14T10:02:43.590
> 
> 标签：java, algorithm, collections

我有一个如下所示的文本文件：

```
code    appearance
----------------
j4t8    1
fj89    3
pf6n    1
j4t8    5 
```

我想按出现最多的代码进行排序。正如您所看到的（并且因为我想执行分组）有重复的代码，所以使用**HashMap**将是一个问题（重复的键）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:06:37.643

您可以使用

```
HashMap map = new HashMap<String, List<Integer>>(); 
```

外观将存储在与每个代码关联的列表中。然后给定一个代码，您只需检索整数列表并对其进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:08:10.547

您需要一个 Pair 对象的集合。每对都包含代码和外观。然后使用 Comparator 对集合进行排序，它只比较每个 Pair 对象中的外观，而忽略代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:12:10.170

不知道这是否是最好的解决方案，但您可以创建这样的列表地图：

```
Map<String, List<Integer>> map = new HahsMap<String, List<Integer>>();
if(map.contains.(key))
{
  map.get(key).add(new_appearance_value);
}
else
{
  List<Integer> app = new ArrayList<Integer>();
  app.add(new_appearance_value);
  map.put(key, app);
} 
```

地图键将是代码，外观的值将进入列表。

注意：要确定哪些代码出现更多，只需检查每个代码列表的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T10:16:16.253

Commons Collections [MultiValueMap](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html)可用于装饰另一个地图，允许它具有多个键值。

# r - R通过包limma的read.ilmn读取注释列

> ID：12881174
> 
> 赞同：0
> 
> 时间：2012-10-14T10:02:47.230
> 
> 标签：r, bioconductor

[limma](http://bioconductor.org/packages/release/bioc/html/limma.html)包是用于读取微阵列以及最近的 RNA-seq 实验结果和进行其他过程（如归一化、拟合线性模型、查找最高差异表达基因、绘制图等）的最佳 - 甚至是最佳 - 包之一。

我在`read.ilmn()`读取 illumina 结果的函数中有一个小问题：假设有一些注释列 - 即 ENTREZ_GENE_ID、REFSEQ_ID 等。除了表达式列之外，还需要读取这些列 - 即 PROBE_ID、SYMBOL、AVG_Signal 和 Detection.Pval - 以供以后分析。

我试图将这些列的名称作为通知该命令也读取这些列的`annotation`参数`other.columns`传递`read.ilmn()`，导致`read.ilmn()`. 最后，我不得不通过`read.table()`命令分别读取这些列，并手动将它们与`read.ilmn()`结果合并。

有没有更好的方法来执行任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:25:46.290

我终于通过手动读取注释列并将其加入到`read.ilmn()`.

# go - 在 Go 中直接在堆上构造原始类型？

> ID：12881175
> 
> 赞同：3
> 
> 时间：2012-10-14T10:03:01.257
> 
> 标签：go, memory-management, initialization, heap-memory, literals

如何在 Go 中直接在堆上构造原始整数类型？

对于复合文字，支持[以下语法](http://golang.org/doc/effective_go.html#composite_literals)：

```
return &File{fd, name, nil, 0} 
```

`int`但是对于和朋友来说似乎不存在这样的等价物：

```
Size: &uint64(entry.FileInfo.Size()), 
```

> d:\gopath\src\bitbucket.org\anacrolix\dms\dlna\dms\dms.go:271: 不能取uint64的地址(entry.FileInfo.Size())

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:23:36.883

> [地址运算符](http://golang.org/ref/spec#Address_operators)
> 
> 对于 T 类型的操作数 x，地址操作 &x 生成 *T 类型的指向 x 的指针。操作数必须是可寻址的，即变量、指针间接或切片索引操作；或可寻址结构操作数的字段选择器；或可寻址数组的数组索引操作。作为可寻址性要求的一个例外，x 也可以是复合文字。

原始整数类型不可寻址。如果整数是寄存器变量，则没有内存地址。如果整数是常量，则提供其内存地址将允许对其进行修改。

因此，创建一个整数类型变量并获取其地址或使用整数指针类型。例如，

```
package main

import "fmt"

func main() {
    var i int = 42
    var pi = &i
    j := int(7)
    pj := &j
    var pk = new(int)
    k := *pk
    fmt.Println(i, pi)
    fmt.Println(j, pj)
    fmt.Println(k, pk)
} 
```

输出：

```
42 0xf840043100
7 0xf840043108
0 0xf840043110 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:28:42.807

使用 初始化指向类型的指针`new`，总是在堆上分配它。

```
n := new(int64)
*n = entry.FileInfo.Size()
return &n 
```

您也可以只获取堆栈分配的整数的地址。当返回一个指向堆栈分配对象的指针时，Go 的逃逸分析将确保该对象被提升到堆中。虽然这不会立即在堆上分配它，但它最终会在那里。

```
n := entry.FileInfo.Size()
return &n 
```

至于您关于为什么该`&T{}`方法不适用于原语的问题，我似乎已经忘记了。我确实知道这是有充分理由的，但也许更有知识的人可以在这件事上启发我们。

# html - 通过将选择框隐藏在文本框下来设置它的样式

> ID：12881178
> 
> 赞同：0
> 
> 时间：2012-10-14T10:03:30.677
> 
> 标签：html, css, z-index, css-position, html-select

显然，不可能完全设置选择框的样式，因此我记得以前读过一种方法，例如，您可以设置文本框的样式，然后将选择框隐藏在其下方。

我刚刚尝试了这个`absolute positioning`并使用`z-index`; 但是，正如您可能期望的那样，当您单击文本框时，您看不到下拉选择选项。

这种方法真的可行吗？如果是这样，怎么做？

如果不是，是否有任何非javascript方法适用于所有浏览器？

**编辑：**

这是一些示例代码..

```
<div class="cats">
    <input type="text" name="cat_show" value="All Categories" readonly="readonly" />
    <select name="cat">
        <option value="all">All Categories</option>
        <option value="cat1">Cat 1</option>
        <option value="cat2">Cat 2</option>
        <option value="cat3">Cat 3</option>
        <option value="cat4" class="last">Cat 4</option>
    </select>
</div> 
```

CSS：

```
#header .nav .misc .search .search_holder .cats {
    float: left;
    position: relative;
}

#header .nav .misc .search .search_holder .cats input {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 111px;
    height: 25px;
    padding-left: 8px;
    background: url('../images/search-cats-bg.png') 0 0 no-repeat;
    font-family: Roboto, Arial;
    font-size: 14px;
    color: #b2b2b2;
    cursor: default;
    z-index: 3;
}

#header .nav .misc .search .search_holder .cats select {
    position: absolute;
    top: 0px;
    left: 0px;    
    width: 119px;
    height: 29px;
    padding-left: 8px;
    font-family: Roboto, Arial;
    font-size: 14px;
    background: url('../images/form-text-bg.png') 0 0 repeat-x;
    color: #b2b2b2;
    z-index: 2;
}

#header .nav .misc .search .search_holder .cats select option {
    padding-top: 5px;
}

#header .nav .misc .search .search_holder .cats select option.last {
    padding-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:07:35.373

你使用这个 jquery 代码

```
$(function(){
   $("#YourTextBoxId").focus(function(){
      $("#YourDropDownName").hide();
   })
}) 
```

# c++ - 为什么需要内存对齐？

> ID：12881179
> 
> 赞同：7
> 
> 时间：2012-10-14T10:03:31.113
> 
> 标签：c++, c, memory, pointers, memory-alignment

> **可能重复：**
> [内存对齐的目的](https://stackoverflow.com/questions/381244/purpose-of-memory-alignment)

我在网上阅读了一些关于内存对齐的文章，并且可以理解从正确对齐的内存（采用 2 字节对齐）我们可以一次快速地获取数据。

但是，如果我们有像单个硬件一样的内存，那么给定一个地址，为什么我们不能直接从那个位置读取 2 个字节。喜欢：![在此处输入图像描述](../Images/624bdd2ced9a6c8933c274d20894d9b8.png)

我想了想。我认为如果内存在奇偶组中，那么该理论将适用。

![在此处输入图像描述](../Images/b7d98ae4e1929e2841b87b3b8c2fc533.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T11:14:58.747

来自内存的数据通常通过一组与总线宽度匹配的线路传送到处理器。例如，如果总线为 32 位宽，则有 32 条数据线从总线进入处理器（以及用于控制信号的其他线）。

在处理器内部，各种电线和开关将这些数据传送到需要的地方。如果您将 32 位对齐的位读入寄存器，则线路可以非常直接地将数据传送到寄存器（或其他保存位置）。

如果您将 8 或 16 个对齐的位读入寄存器，则线路可以以相同的方式传递数据，并且寄存器中的其他位设置为零。

如果将 8 或 16 个未对齐的位读入寄存器，则线路无法直接传递数据。相反，这些位必须被移动：它们必须通过一组不同的线，以便它们可以“移动”以与进入寄存器的线对齐。

在某些处理器中，设计人员已经放置了额外的电线和开关来实现这一移动。就所需的硅量而言，这可能非常昂贵。您需要大量额外的电线和开关才能将任何可能的未对齐字节移动到所需位置。因为这非常昂贵，所以在某些处理器中，没有一个完整的移位器可以立即完成所有移位。相反，移位器可能只能在每个 CPU 周期移动一个字节左右，并且需要几个周期才能移动几个字节。在某些处理器中，根本就没有连接线，因此所有的加载和存储都必须对齐。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-14T10:22:40.607

您的图片描述了*我们*（人类）如何可视化计算机内存。

实际上，将内存视为巨大的位矩阵。每个矩阵列都有一个附加的“读取器”，可以从该列读取/写入任何位。每个矩阵行都有一个“选择器”，可以选择阅读器将读取/写入的特定位。

因此，该阅读器可以一次读取整个选定的矩阵行。该行的长度（矩阵列数）定义了一次可以读取多少数据。例如，如果您有 64 列，那么您的内存控制器可以一次读取 8 个字节（尽管它通常可以做更多的事情）。

只要您保持数据对齐，您将需要更少的这些内存访问。即使您只需要读取两位，但它们位于不同的行上，您也需要两次访问内存而不是一次。

此外，还有一个整体的*写作*方面，这是一个不同的问题。

就像你可以读整行一样，你也可以写整行。如果你的数据没有对齐，当你写的东西不是整行时，你需要做读-修改-写（读取行的旧内容，修改相关部分并写入新内容）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-14T10:14:20.550

在第一种情况下（单个硬件），如果您需要读取 2 个字节，那么处理器将不得不发出两个读取周期，这是因为内存是字节可寻址的，即每个字节都提供一个唯一的地址。

将内存组织为存储体有助于 CPU 在单个读取周期内将更多数据提取到寄存器中。这种技术有助于减少读取周期——与 CPU 的处理能力相比，这是一个非常缓慢的过程。因此，对于单个读取周期，您可以读取更多数据。

# perl - 设置 AutoCommit 和 begin_work/rollback 是一样的吗？

> ID：12881182
> 
> 赞同：2
> 
> 时间：2012-10-14T10:03:53.553
> 
> 标签：perl, dbi

这个问题是关于 Perl DBI（我将它与 MySQL 一起使用）。

我想要以下代码：

```
{
  本地 $dbh->{AutoCommit} = 0;
  ...
  如果（...） {
    $dbh->回滚；
  }
  ...
}
```

它会按预期工作吗？（我的意思是回滚后没有多余的提交） $dbh->{AutoCommit} 是否与 $dbh->begin_work 和 $dbh->rollback 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:47:36.103

是的，你可以这样做，但你为什么要这样做。为什么不直接调用 begin_work 然后提交或回滚。即使 AutoCommit 开启，它们也能正常工作。

```
use strict;
use warnings;
use DBI;
use Data::Dumper;

my $h = DBI->connect();
eval {
    $h->do(q/drop table mje/);
};
$h->do(q/create table mje (a int)/);
my $s = $h->prepare(q/insert into mje values(?)/);

foreach my $it(1..2) {
    {
        local $h->{AutoCommit} = 0;

        $s->execute($it);

        if ($it == 2) {
            $h->rollback;
        } else {
            $h->commit;
        }
    }
}

my $r = $h->selectall_arrayref(q/select * from mje/);
print Dumper($r);

outputs:

$VAR1 = [
          [
            1
          ]
        ]; 
```

但以下对我来说看起来更好：

```
foreach my $it(1..2) {
    $h->begin_work;

    $s->execute($it);

    if ($it == 2) {
        $h->rollback;
    } else {
        $h->commit;
    }
} 
```

# c++ - 我无法创建窗口

> ID：12881190
> 
> 赞同：0
> 
> 时间：2012-10-14T10:04:19.773
> 
> 标签：c++, windows

我已经尝试创建窗口好几天了，但它总是告诉我“无法创建窗口”当它随机创建窗口时，CPU 会占用 50%。你能帮我看看是什么导致了这个错误吗？这是源代码：

```
#include<Windows.h> 
int AppRunning=1;
void TellError(LPCWSTR error,HWND hWnd=NULL);
LRESULT CALLBACK WindowProcedure(HWND hWnd,UINT msg,WPARAM wparam,LPARAM lparam)
{
    switch(msg){
        case WM_KEYDOWN:
            AppRunning=0;
            break;
        case WM_CLOSE:
            DestroyWindow(hWnd);
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
    }
    return DefWindowProc(hWnd,msg,wparam,lparam);
}

HWND NewWindow(LPCTSTR title,int xpos, int ypos, int width, int height)
{
    WNDCLASSEX wcex;
    wcex.cbSize = sizeof(WNDCLASSEX);
    wcex.style = CS_HREDRAW | CS_VREDRAW;
    wcex.lpfnWndProc = WindowProcedure;
    wcex.cbClsExtra = 0;
    wcex.cbWndExtra = 0;
    wcex.hInstance = GetModuleHandle(NULL);
    wcex.hIcon = NULL;
    wcex.hCursor = NULL;
    wcex.hbrBackground = GetSysColorBrush(COLOR_BTNFACE);
    wcex.lpszMenuName = NULL;
    wcex.lpszClassName = L"Svet-ver1.0";
    wcex.hIconSm = LoadIcon(NULL,IDI_APPLICATION); 
    if(!RegisterClassEx(&wcex)){
        TellError(L"Cannot register window!");
        return NULL;
    }
    return CreateWindowEx(WS_EX_CONTROLPARENT, L"Svet3D-ver1.0", title, WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX | WS_VISIBLE, xpos, ypos, width, height, NULL, NULL, GetModuleHandle(NULL), NULL);
 }

 int WINAPI WinMain(HINSTANCE hInst,HINSTANCE hPrevInst,LPSTR lpCmdLine,int nCmdShow)
 {
    MSG msg;
    HWND hWnd = NewWindow(L"Svet",100,100,500,500); 
    if(!hWnd){
        TellError(L"Cannot create window!");
        return 0;
    }
    while(AppRunning){
        if(PeekMessage(&msg,hWnd,0,0,PM_REMOVE)){
            if(!IsDialogMessage(hWnd,&msg)){
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }
    }
    DestroyWindow(hWnd);
    return 0;
 }
 void TellError(LPCWSTR error,HWND hWnd){
     MessageBox(hWnd,error,NULL,MB_OK);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:09:06.543

传递给的类名`RegisterClassEx`是`"Svet-ver1.0"`，但在创建窗口时您使用的是不同的类名`"Svet3D-ver1.0"`。

您也在`PeekMessage`主循环中使用，当队列中没有消息时，这将快速循环。这个空循环正在消耗你所有的 CPU（50% 可能是因为你有一个双核系统）。

您应该`GetMessage`改用，它将等待下一条消息而不会浪费 CPU 时间。

# matlab - 八度：将给定的映射应用于元胞数组

> ID：12881192
> 
> 赞同：3
> 
> 时间：2012-10-14T10:04:52.433
> 
> 标签：matlab, octave, cell-array

想象一下，我在 Octave 中有一个单元格数组“列表列表”：

```
octave:6> a = {[1], [3,4], [5,6,7], [8,9,10,11]}
a =
{
  [1,1] =  1
  [1,2] =

     3   4

  [1,3] =

     5   6   7

  [1,4] =

      8    9   10   11

} 
```

现在我想从每个嵌套行中提取给定元素，并且每个嵌套行的索引都在列表中给出。例如 [1, 2, 2, 3] 将意味着返回 [1, 4, 6, 10]。

执行此操作的最佳 Octave 方式是什么？我知道如何用循环来做到这一点，但这看起来很难看......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:51:28.407

看来我找到了对我有益的解决方案。我意识到这`cellfun()`需要一些参数，所以我可以轻松地执行元素映射。

```
octave:31> cellfun(@(x,y) x(y), a, {1,2,2,3})
ans =

    1    4    6   10 
```

# android - 检查服务的状态失败，因为类加载器

> ID：12881194
> 
> 赞同：0
> 
> 时间：2012-10-14T10:04:56.983
> 
> 标签：android, android-activity, android-service, aidl

我有一个启动非本地服务的活动。有时我会检查是否还活着以执行操作。

我目前的尝试是使用静态布尔变量。阅读 SO 上的一些帖子后，我发现这不起作用，因为[每个进程都有自己的 classloader](https://stackoverflow.com/questions/12424776/static-variables-not-returning-correctly?rq=1)。

[迭代所有正在运行的服务](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)来做这样一个简单的任务是很昂贵的。

其他解决方案指出使用 AIDL。在不久的将来，在我的服务中，我将为当前正在运行的活动存储一个 WeakReference，以便在发生崩溃时再次执行它。假设现在我只想检查服务的状态，这也是一个昂贵的解决方案吗？

PS：我知道不正确处理异常是一个丑陋的解决方案。这只是一个尝试。

**编辑：**为了澄清我在做什么，我发布了一些代码。这是服务类：

```
public class CrashRecover extends Service {

private volatile boolean stop = false;
private Thread backgroundThread;
private Messenger serviceMessenger = null;
private static boolean running = false;

...

@Override
public int onStartCommand(Intent intent, int flags, int startID){
    serviceMessenger = new Messenger(new ServiceHandler(serviceLooper));
    return START_STICKY;
}

@Override
public void onCreate(){
    super.onCreate();
    HandlerThread handlerThread = new HandlerThread("CrashRecoverThread", Process.THREAD_PRIORITY_BACKGROUND);
    handlerThread.start();

    serviceLooper = handlerThread.getLooper();
    backgroundThread = new Thread(){
        @Override
        public void run(){
            synchronized(this){
                try {
                    while(!stop){
                        sleep(500);
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }                   
            }
        }
    };
    running = true;
}

@Override
public void onDestroy(){
    super.onDestroy();
    try {
        Message destroyMessage = Message.obtain();
        destroyMessage.arg1 = CrashRecover.DESTROY_SERVICE;
        serviceMessenger.send(destroyMessage);
    } catch (RemoteException e) {
        e.printStackTrace();
    }
    running = false;
}

@Override
public IBinder onBind(Intent arg0) {
    return serviceMessenger.getBinder();
}

public static boolean isRunning(){
    return CrashRecover.running;
}

...

private class ServiceHandler extends Handler{
    public ServiceHandler(Looper looper){
        super(looper);
    }

    @Override
    public void handleMessage(Message message){
        switch(message.what){
            case REGISTER_CLIENT:
                //addActivityToRespawn(null);
                //respawnActivity();
                Log.i("INFO", "Service is registered");
                break;
            case UNREGISTER_CLIENT:
                activityParams = message.getData();
                //respawnActivity();
                if(backgroundThread.isAlive()){
                    stop = true;
                }
                Log.i("INFO", "Service is unregistered");
                break;
            case DESTROY_SERVICE:
                Log.i("INFO", "Service is destroyed");
                break;
            default:
                super.handleMessage(message);
        }
    }
} 
```

}

当我验证服务是否正在运行时，这是我的课程：

```
public class Main extends Activity {
private Button serviceButton, crashButton;
private Intent serviceIntent;
private ClientMessageHandler clientHandler;

@Override
public void onCreate(Bundle savedInstanceState) {
    ...
    clientHandler = new ClientMessageHandler();
    serviceIntent = new Intent(Main.this, CrashRecover.class);
    startService(serviceIntent);
}

...

@Override
public void onBackPressed(){
    if(CrashRecover.isRunning()){
        Log.i("INFO", "Service is running");
            //Execute some actions
    }
}
... 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:33:58.600

如果您不经常这样做，那么我建议您使用“迭代运行服务”方法。不应该有那么多服务在您的手机上运行并对其进行迭代只是访问 Android 保留的一些内部数据结构。应该工作得很好。

# python - 将十六进制流转换为阿拉伯语字符串

> ID：12881196
> 
> 赞同：3
> 
> 时间：2012-10-14T10:05:18.793
> 
> 标签：python, hex

我有一个从未遇到过的问题......我必须转换接收到的十六进制流，例如：

20d8a7d986d98a20d985d8a720d8a7d8b9d8b1d98120d8b4d986d98820d98ad8b9d986d98a20d8a7d984d8acd986d8a7d8ad20d8a7d984d8b9d8b3d983d8b1d98a20d984d98a20d8add8b2d8a820d8a7d984d8afd8b9d988d8a920 (binascii.hexlify output...)

转为阿拉伯语字符串。

任何线索或链接开始？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:14:47.783

```
>>> import binascii
>>> hexstring = "20d8a7d986d98a20d985d8a720d8a7d8b9d8b1d98120d8b4d986d98820d98ad8b9d986d98a20d8a7d984d8acd986d8a7d8ad20d8a7d984d8b9d8b3d983d8b1d98a20d984d98a20d8add8b2d8a820d8a7d984d8afd8b9d988d8a920"
>>> print binascii.unhexlify(hexstring.encode("utf-8")).decode("utf-8")
 اني ما اعرف شنو يعني الجناح العسكري لي حزب الدعوة 
```

# mysql - MySQL：如果列 = x，则唯一

> ID：12881197
> 
> 赞同：2
> 
> 时间：2012-10-14T10:05:36.130
> 
> 标签：mysql, unique

假设一个表有 3 列，那么我可以制作它，以便当（且仅当）第 3 列等于 x 时，第 1 列和第 2 列之间的混合是唯一的？

这将使这项工作：

```
-------------------------------------------------- ---
| 一个 | 乙| C |
-------------------------------------------------- ---
| 1 | 2 | x |
-------------------------------------------------- ---
| 2 | 1 | x |
-------------------------------------------------- ---
| 0 | 0 | 是 |
-------------------------------------------------- ---
| 0 | 0 | 是 |
-------------------------------------------------- ---

```

这不会：

```
| 一个 | 乙| C |
-------------------------------------------------- ---
| 2 | 2 | x |
-------------------------------------------------- ---
| 2 | 2 | x |
-------------------------------------------------- ---
| 0 | 0 | 是 |
-------------------------------------------------- ---
| 0 | 0 | 是 |
-------------------------------------------------- ---

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:21:53.813

您可以创建触发器：

```
DELIMITER ;;

CREATE TRIGGER special_unique_test BEFORE INSERT ON my_table FOR EACH ROW
IF NEW.C = 'x' AND EXISTS (
  SELECT * FROM my_table WHERE A = NEW.A AND B = NEW.B AND C = 'x'
) THEN
  CALL raise_error;
END IF;;

DELIMITER ; 
```

我建议维护一个索引`(A, B, C)`以保持合理的性能。

`INSERT ... ON DUPLICATE KEY UPDATE`但是，这不会产生与`REPLACE`真正`UNIQUE`密钥相同的好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:15:52.417

尝试：

```
select distinct a, b, c
from mytable
where c = 'x'
union all
select a, b, c
from mytable
where c <> 'x' 
```

# jquery - 为什么jquery ui滑块返回一个对象？

> ID：12881198
> 
> 赞同：3
> 
> 时间：2012-10-14T10:05:36.943
> 
> 标签：jquery, user-interface, slider

当我做

```
console.log($('#my_slider').slider('value')) 
```

它返回`[object Object]` 有谁知道为什么它没有像文档中所说的那样返回滑块的实际值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:09:55.793

你应该使用（[这里是文档](http://docs.jquery.com/UI/API/1.8/Slider#option-value)）

```
console.log($('#my_slider').slider( "option", "value" )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:16:44.663

这适用于 .draggable 并且也适用于 .slider

```
$(function() {
    $( "#slider" ).slider(
       stop: function (s) {
          console.log(s);
       }
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:25:59.877

此代码在滑块的演示页面上适用于我：

```
$('#slider').slider('value'); 
```

这里：http: [//jqueryui.com/resources/demos/slider/hotelrooms.html](http://jqueryui.com/resources/demos/slider/hotelrooms.html)

可能想看看你的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T10:10:31.543

这是为了允许方法链接。

[http://www.jquery-tutorial.net/introduction/method-chaining/#.UHqPHMXLSKg](http://www.jquery-tutorial.net/introduction/method-chaining/#.UHqPHMXLSKg)

您看到的返回对象是原始匹配集 (#my_slider)。因此，如果您有其他 jQuery 方法可以调用它，您可以将它们添加到语句的末尾。

```
$('#my_slider').slider('value').othermethod(); 
```

# java - 位图、可绘制对象和文本的 Android 绘制顺序？

> ID：12881200
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:05:52.340
> 
> 标签：java, android

我正在用 android 创建一个小游戏。任何需要在屏幕上绘制的东西都扩展了我的`VisibleObject`类，然后我有一个`Manager`类，我可以将所有可见的游戏对象添加到其中，并且每一帧我都告诉管理器调用其中所有内容的绘制函数。

以下是对象被初始化并添加到管理器：

```
@Override
    public void surfaceCreated(SurfaceHolder holder) {

        fps = new TextDrawable(Color.BLACK, 14, 100, 40, 40);
        player = new Player();
        map = new Map();
        leftTouch = new TouchCircle(Color.GRAY);

        manager.add("fpsText", fps);
        manager.add("leftTouch", leftTouch);
        manager.add("player", player);
        manager.add("map", map);

        gameloop = new GameLoop(getHolder(), this, fps);            
        gameloop.setRunning(true);
        gameloop.start();

    } 
```

现在我遇到的问题是绘制顺序，如果您查看将对象添加到管理器以供参考的顺序..

*   我可以肯定地告诉你，玩家被绘制在地图上！这些都是通过在此处绘制相应的位图来绘制的`drawBitmap(..)`。
*   然而 fpsText 和 leftTouch 正在地图下方绘制！这些是分别使用`drawText(..)`和绘制的`drawOval(..)`。

尽管它们实现了不同的`Canvas.draw..`功能，但我希望它们都按顺序绘制，因为我只是将我拥有的画布对象传递给我的管理器类，然后让管理器循环遍历每个对象，将它传递给该画布以进行绘制。

任何人都可以为我澄清为什么位图似乎被绘制在顶部以及将我的 fps 和触摸区域绘制在播放器上方并映射位图的解决方案应该是什么？我会很感激的。

**编辑：**我`private ConcurrentSkipListMap<String, VisibleObject> objectMap;`在我的经理中使用来存储对象和绘图，就像这样..

```
public void draw(Canvas c){
        for (Map.Entry<String, VisibleObject> object : objectMap.entrySet()){
            synchronized(object){
                object.getValue().draw(c);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:15:26.760

除非您在绘制文本（并且位置重叠）之后绘制位图，否则不会在文本顶部绘制位图。

你没有透露 onDraw 方法所以我不能确定，但​​我怀疑你没有按正确的顺序调用绘图方法。您的经理如何存储添加到其中的值？也许您使用的 Map 实现不保持添加元素的顺序（大多数实现不会，[LinkedHashmap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)会）。

# parsing - CmdArgs 可以在子模式之外有标志吗？

> ID：12881204
> 
> 赞同：4
> 
> 时间：2012-10-14T10:06:15.527
> 
> 标签：parsing, haskell, command-line

我知道如果所有子模式中都有一个公共标志，它将列在“公共标志”下，但该标志仍然需要出现在模式构造函数之后。有时，存在与程序相关的标志而不是与单个模式相关的标志，因此它们应该能够在模式内容之前（甚至之后）指定。例如，我的程序可以并行处理任务，而不管它在哪种模式下运行。并行进程的数量由“-n”标志给出，所以命令行应该是这样的：

```
myprogram -n 4 MODE1 [flags/args-for-MODE1] 
```

这可以在 CmdArgs 中完成吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:36:29.373

目前这是不可能的，但有一张票可以将其添加到 CmdArgs：[http ://code.google.com/p/ndmitchell/issues/detail?id=457](http://code.google.com/p/ndmitchell/issues/detail?id=457)

它可能会稍微复杂一些，因为如果你有`MODE1`which 需要`-n`一个必需的参数，而`MODE2`which`-n`没有参数，那么以下是什么意思：

```
 myprogram -n MODE2 MODE1 
```

它可以是带有值的模式`MODE1`，也可以是带有标志和参数的模式。我相信我会在实施票证时弄清楚这一点。`-n``MODE2``MODE2``-n``MODE1`

# c++ - 将左值绑定到右值引用——g++ 错误？

> ID：12881209
> 
> 赞同：10
> 
> 时间：2012-10-14T10:06:58.113
> 
> 标签：c++, compiler-errors

作为[另一个问题](https://stackoverflow.com/questions/12877546/how-do-i-avoid-implicit-casting-on-non-constructing-functions-c/12877827#12877827)的答案，我想发布以下代码（也就是说，我想根据这个想法发布代码）：

```
#include <iostream>
#include <utility>      // std::is_same, std::enable_if
using namespace std;

template< class Type >
struct Boxed
{
    Type value;

    template< class Arg >
    Boxed(
        Arg const& v,
        typename enable_if< is_same< Type, Arg >::value, Arg >::type* = 0
        )
        : value( v )
    {
        wcout << "Generic!" << endl;
    }

    Boxed( Type&& v ): value( move( v ) )
    {
        wcout << "Rvalue!" << endl;
    }
};

void function( Boxed< int > v ) {}

int main()
{
    int i = 5;
    function( i );  //<- this is acceptable

    char c = 'a';
    function( c );  //<- I would NOT like this to compile
} 
```

然而，虽然 MSVC 11.0 在最后一次调用中阻塞，正如 IHMO 应该的那样，MinGW g++ 4.7.1 只是接受它，并使用右值引用形式参数调用构造函数。

在我*看来*，左值好像绑定到右值引用。一个灵活的答案可能是将左值转换为右值。但问题是，这是否是编译器错误，如果不是，神圣标准如何允许这样做？

* * *

**编辑**：我设法将其简化为以下非常简短的示例：

```
void foo( double&& ) {}

int main()
{
    char ch = '!';
    foo( ch );
} 
```

使用 MSVC 11.0 编译失败，使用 MinGW 4.7.1 编译，这是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:16:40.123

我没有检查规范，但我想`char`可以自动转换为`int`. 由于您不能分配任何东西（它是 r 值），因此将传递类型为临时变量`int`（更明确地表示值）的 R 值。`(int)c`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:54:43.583

我发现 N3290（与 C++11 标准相同）包含绑定`double&&`到从左值生成的右值的非规范示例，以及第**8.5.3 节**`int`中的更新措辞

 **> “如果 T1 与 T2 引用相关并且引用是右值引用，则初始化表达式不应是左值。”

据报道，这些规则旨在避免低效的额外复制。虽然我看不出这种复制是如何被优化掉的。无论如何，不​​管这个理由是否合理——而且它*看起来*肯定不是一个合理的效果！– 允许使用以下代码，并使用 MSVC 11 和 MinGW g++ 4.7 进行编译：

```
struct Foo {};
struct Bar { Bar( Foo ) {} };

void ugh( Bar&& ) {}

int main()
{
    Foo o;
    ugh( o );
} 
```

所以显然 MSVC 11 不允许 lvalue -> rvalue 转换是错误的。

* * *

**编辑**：我了解到有关于这个问题的缺陷报告，[DR 1414](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1414)。2012 年 2 月的结论是，当前的行为规范是“正确的”，大概就其反映意图的程度而言。然而据报道，委员会仍在讨论它，大概是关于意图的实用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:45:17.433

大概你同意这是有效的？

```
void foo( double ) {}  // pass-by-value

int main()
{
    char ch = '!';
    foo( ch );
} 
```

`char`有一个从to的隐式转换`double`，所以这个函数是可行的。

在您编辑的问题中的示例中也是如此，有一个隐式转换会产生一个临时（即右值）并且右值引用参数绑定到该临时。如果您愿意，可以使该转换显式：

```
void foo( double&& ) {}  // pass-by-reference

int main()
{
    char ch = '!';
    foo( double(ch) );
} 
```

但在这种情况下，这并没有真正改变任何东西。如果`double`->`char`只能显式转换（例如，对于具有显式构造函数或显式转换运算符的类类型）但`double`to`char`是有效的隐式转换，那将是必要的。

您正在考虑的“右值引用不能绑定到左值”规则是指将 a 绑定`T&&`到`T`左值，并且该规则没有被破坏，因为`double&&`没有绑定到`char`，它绑定到由创建的临时隐式转换。

该规则的存在不仅是为了防止不必要的额外复制，而且是为了解决以前规则中存在的真正安全问题，请参阅[http://www.open-std.org/JTC1/SC22/WG21/docs/papers/ 2008/n2812.html](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2008/n2812.html)

**编辑：**有人询问委员会反射器是否需要这种行为（参见[DR 1414](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1414)），并决定是的，这种行为是有意的并且是正确的。用于达到该位置的论据之一是该代码在当前规则下更有效：

```
std::vector<std::string> v;
v.push_back("text"); 
```

使用当前规则`std::string`，通过隐式转换创建一个临时对象，然后 `std::vector<T>::push_back(T&&)`调用该临时对象，并将该临时对象*移入*向量中。如果该`push_back`重载对于转换结果不可行，那么上面的代码将调用`std::vector<T>::push_back(const T&)`这将导致一个*copy*。当前的规则使这个现实世界的用例更加高效。如果规则说 rvalue-refs 不能绑定到隐式转换的结果，您将不得不更改上面的代码以获得移动的效率：

```
v.push_back( std::string{"text"} ); 
```

恕我直言，当构造函数不显式时，必须显式构造 a 是没有意义的`std::string`。我希望显式/隐式构造函数的行为一致，并且我希望第一个`push_back`示例更有效。**

# c++ - 为什么用户编写的构造函数会影响生成的程序集？

> ID：12881210
> 
> 赞同：7
> 
> 时间：2012-10-14T10:07:10.657
> 
> 标签：c++, compiler-construction, compilation

测试环境：vs 2008，调试模式

测试代码是：

```
// a demo for return value

class C
{
public:
    int value;
    int value2;
    int value3;

    //C(int v=0): value(v) {};
};

C getC(int v)
{
    C c1;

    return c1;
}

int main()
{
    C c1 = getC(10);

    return 0;
} 
```

asm 输出为：

```
; 39   :    C c1 = getC(10);

push    10                  ; 0000000aH
lea eax, DWORD PTR $T2595[ebp]
push    eax
call    ?getC@@YA?AVC@@H@Z          ; getC
add esp, 8
mov ecx, DWORD PTR [eax]
mov DWORD PTR $T2594[ebp], ecx
mov edx, DWORD PTR [eax+4]
mov DWORD PTR $T2594[ebp+4], edx
mov eax, DWORD PTR [eax+8]
mov DWORD PTR $T2594[ebp+8], eax
mov ecx, DWORD PTR $T2594[ebp]
mov DWORD PTR _c1$[ebp], ecx
mov edx, DWORD PTR $T2594[ebp+4]
mov DWORD PTR _c1$[ebp+4], edx
mov eax, DWORD PTR $T2594[ebp+8]
mov DWORD PTR _c1$[ebp+8], eax 
```

从 asm 输出中，我们可以看到编译创建了 2 个临时对象。

但是，当我如下定义构造函数时：

```
C(int v=0): value(v) {}; 
```

并重新编译程序，asm 输出变为：

```
; 39   :    C c1 = getC(10);

push    10                  ; 0000000aH
lea eax, DWORD PTR _c1$[ebp]
push    eax
call    ?getC@@YA?AVC@@H@Z          ; getC
add esp, 8 
```

显然，编译器优化了代码，我的问题是：

为什么添加用户编写的构造函数会对生成的程序集产生如此大的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-15T03:58:03.767

这个问题是关于 C++ 中的复制省略和返回值优化。

我建议你不要花太多时间在它上面，因为生成的汇编代码取决于编译器。

复制省略在标准中定义：

> 当满足某些条件时，允许实现省略类对象的复制/移动构造，即使对象的复制/移动构造函数和/或析构函数具有副作用。在这种情况下，实现将省略的复制/移动操作的源和目标简单地视为引用同一对象的两种不同方式，并且该对象的销毁发生在两个对象本应被删除的较晚时间。没有优化就被破坏了。这种复制/移动操作的省略，称为*复制省略*，在以下情况下是允许的（可以组合起来消除多个副本）：
> 
> [...]
> 
> §12.8 [class.copy]

您可以在 stackoverflow 上参考一个问题，[请参见此处](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)。

# typescript - TypeScript 是否支持类事件？

> ID：12881212
> 
> 赞同：74
> 
> 时间：2012-10-14T10:07:24.757
> 
> 标签：typescript

我只是想知道在 TypeScript 中是否可以在类或接口上定义自定义事件？

这会是什么样子？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-02-02T02:14:21.303

将这个简化的事件用作属性怎么样？拥有类的更强类型并且没有继承要求：

```
interface ILiteEvent<T> {
    on(handler: { (data?: T): void }) : void;
    off(handler: { (data?: T): void }) : void;
}

class LiteEvent<T> implements ILiteEvent<T> {
    private handlers: { (data?: T): void; }[] = [];

    public on(handler: { (data?: T): void }) : void {
        this.handlers.push(handler);
    }

    public off(handler: { (data?: T): void }) : void {
        this.handlers = this.handlers.filter(h => h !== handler);
    }

    public trigger(data?: T) {
        this.handlers.slice(0).forEach(h => h(data));
    }

    public expose() : ILiteEvent<T> {
        return this;
    }
} 
```

像这样使用：

```
class Security{
    private readonly onLogin = new LiteEvent<string>();
    private readonly onLogout = new LiteEvent<void>();

    public get LoggedIn() { return this.onLogin.expose(); } 
    public get LoggedOut() { return this.onLogout.expose(); }

    // ... onLogin.trigger('bob');
}

function Init() {
    var security = new Security();

    var loggedOut = () => { /* ... */ }

    security.LoggedIn.on((username?) => { /* ... */ });
    security.LoggedOut.on(loggedOut);

    // ...

    security.LoggedOut.off(loggedOut);
} 
```

改进？

[一个要点](https://gist.github.com/JasonKleban/50cee44960c225ac1993c922563aa540)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-03-27T18:04:30.420

NPM 包[Strongly Typed Events for TypeScript](https://www.npmjs.com/package/strongly-typed-events) ( [GitHub](https://github.com/KeesCBakker/Strongly-Typed-Events-for-TypeScript/blob/master/README.md#history) ) 实现了 3 种类型的事件`IEvent<TSender, TArgs>`：`ISimpleEvent<TArgs>`和`ISignal`. 这使得为​​您的项目使用正确类型的事件变得更加容易。它还从您的事件中隐藏了调度方法，就像良好的信息隐藏应该做的那样。

**事件类型/接口**- 事件的定义：

```
interface IEventHandler<TSender, TArgs> {
    (sender: TSender, args: TArgs): void
}

interface ISimpleEventHandler<TArgs> {
    (args: TArgs): void
}

interface ISignalHandler {
    (): void;
} 
```

**示例**- 此示例显示如何使用滴答时钟实现 3 种类型的事件：

```
class Clock {

    //implement events as private dispatchers:
    private _onTick = new SignalDispatcher();
    private _onSequenceTick = new SimpleEventDispatcher<number>();
    private _onClockTick = new EventDispatcher<Clock, number>();

    private _ticks: number = 0;

    constructor(public name: string, timeout: number) {
        window.setInterval( () => { 
            this.Tick(); 
        }, timeout);
    }

    private Tick(): void {
        this._ticks += 1;

        //trigger event by calling the dispatch method and provide data
        this._onTick.dispatch();
        this._onSequenceTick.dispatch(this._ticks);
        this._onClockTick.dispatch(this, this._ticks);
    }

    //expose the events through the interfaces - use the asEvent
    //method to prevent exposure of the dispatch method:
    public get onTick(): ISignal {
        return this._onTick.asEvent();
    }

    public get onSequenceTick() : ISimpleEvent<number>{
        return this._onSequenceTick.asEvent();
    }

    public get onClockTick(): IEvent<Clock, number> {
        return this._onClockTick.asEvent();
    }
} 
```

**用法**- 它可以像这样使用：

```
let clock = new Clock('Smu', 1000);

//log the ticks to the console
clock.onTick.subscribe(()=> console.log('Tick!'));

//log the sequence parameter to the console
clock.onSequenceTick.subscribe((s) => console.log(`Sequence: ${s}`));

//log the name of the clock and the tick argument to the console
clock.onClockTick.subscribe((c, n) => console.log(`${c.name} ticked ${n} times.`)) 
```

在此处阅读更多内容：[关于事件、调度程序和列表（系统的一般说明）](https://github.com/KeesCBakker/Strongly-Typed-Events-for-TypeScript/blob/master/documentation/OnEventsDispatchersAndLists.md)

**教程**
我写了一些关于这个主题的教程：

*   [TypeScript 中的强类型事件处理程序（第 1 部分）](http://keestalkstech.com/2016/03/strongly-typed-event-handlers-in-typescript-part-1/)
*   [在带有接口的 TypeScript 中使用强类型事件（第 2 部分）](http://keestalkstech.com/2016/03/using-strongly-typed-events-in-typescript-with-interfaces-part2/)
*   [TypeScript 中使用事件列表的强类型事件（第 3 部分）](http://keestalkstech.com/2016/03/strongly-typed-events-in-typescript-using-an-event-list-part-3/)
*   [将命名事件添加到您的类（第 4 部分）](http://keestalkstech.com/2016/03/adding-named-events-to-your-class-part-4/)
*   [0.2.0 简单事件支持](https://keestalkstech.com/2016/05/strongly-typed-events-0-2-0-now-with-simpleevents/)
*   [0.3.0 信号支持](https://keestalkstech.com/2016/07/strongly-typed-events-0-3-0-now-signals/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-15T23:54:06.200

我想你是在问一个类实例是否可以像 DOM 元素一样实现 addEventListener() 和 dispatchEvent() 。如果该类不是 DOM 节点，那么您将不得不编写自己的事件总线。您将为可以发布事件的类定义一个接口，然后在您的类中实现该接口。这是一个天真的例子；

```
interface IEventDispatcher{
  // maintain a list of listeners
  addEventListener(theEvent:string, theHandler:any);

  // remove a listener
  removeEventListener(theEvent:string, theHandler:any);

  // remove all listeners
  removeAllListeners(theEvent:string);

  // dispatch event to all listeners
  dispatchAll(theEvent:string);

  // send event to a handler
  dispatchEvent(theEvent:string, theHandler:any);
}

class EventDispatcher implement IEventDispatcher {
  private _eventHandlers = {};

  // maintain a list of listeners
  public addEventListener(theEvent:string, theHandler:any) {
    this._eventHandlers[theEvent] = this._eventHandlers[theEvent] || [];
    this._eventHandlers[theEvent].push(theHandler);
  }

  // remove a listener
  removeEventListener(theEvent:string, theHandler:any) {
    // TODO
  }

  // remove all listeners
  removeAllListeners(theEvent:string) {
    // TODO
  }

  // dispatch event to all listeners
  dispatchAll(theEvent:string) {
    var theHandlers = this._eventHandlers[theEvent];
    if(theHandlers) {
      for(var i = 0; i < theHandlers.length; i += 1) {
        dispatchEvent(theEvent, theHandlers[i]);
      }
    }
  }

  // send event to a handler
  dispatchEvent(theEvent:string, theHandler:any) {
    theHandler(theEvent);
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T16:38:54.710

您可以在 TypeScript 中使用自定义事件。我不确定你到底想做什么，但这里有一个例子：

```
module Example {
    export class ClassWithEvents {
        public div: HTMLElement;

        constructor (id: string) {
            this.div = document.getElementById(id);

            // Create the event
            var evt = document.createEvent('Event');
            evt.initEvent('customevent', true, true);

            // Create a listener for the event
            var listener = function (e: Event) {
                var element = <HTMLElement> e.target;
                element.innerHTML = 'hello';
            }

            // Attach the listener to the event
            this.div.addEventListener('customevent', listener);

            // Trigger the event
            this.div.dispatchEvent(evt);
        }
    }
} 
```

如果您想做更具体的事情，请告诉我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-17T14:42:45.687

如果您希望使用标准发射器模式进行智能感知类型检查，您现在可以执行以下操作：

```
type DataEventType = "data";
type ErrorEventType = "error";
declare interface IDataStore<TResponse> extends Emitter {
    on(name: DataEventType, handler : (data: TResponse) => void);   
    on(name: ErrorEventType, handler: (error: any) => void);    
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-31T17:54:54.050

[这是一个使用子](https://github.com/vitaly-t/sub-events)事件向您的类添加自定义类型事件的简单示例：

```
class MyClass {

    readonly onMessage: SubEvent<string> = new SubEvent();
    readonly onData: SubEvent<MyCustomType> = new SubEvent();

    sendMessage(msg: string) {
        this.onMessage.emit(msg);
    }

    sendData(data: MyCustomType) {
        this.onData.emit(data);
    }
} 
```

然后任何客户端都可以订阅接收这些事件：

```
const a = new MyClass();

const sub1 = a.onMessage.subscribe(msg => {
    // msg here is strongly-typed
});

const sub2 = a.onData.subscribe(data => {
    // data here is strongly-typed
}); 
```

当您不再需要这些事件时，您可以取消订阅：

```
sub1.cancel();

sub2.cancel(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-17T15:15:31.687

此解决方案允许您直接在函数调用中编写参数，而不需要将所有参数包装在一个对象中。

```
interface ISubscription {
   (...args: any[]): void;
}

class PubSub<T extends ISubscription> {
    protected _subscribed : ISubscriptionItem[] = [];

    protected findSubscription(event : T) : ISubscriptionItem {
        this._subscribed.forEach( (item : ISubscriptionItem) =>{
            if (item.func==event)
              return item;
        } );
        return null;
    }

    public sub(applyObject : any,event : T) {
        var newItem = this.findSubscription(event);
        if (!newItem) {
            newItem = {object : applyObject, func : event };
            this._subscribed.push(newItem);
            this.doChangedEvent();
        }
    }
    public unsub(event : T) {
        for ( var i=this._subscribed.length-1 ; i>=0; i--) {
            if (this._subscribed[i].func==event)
                this._subscribed.splice(i,1);
        }
        this.doChangedEvent();
    }
    protected doPub(...args: any[]) {
        this._subscribed.forEach((item : ISubscriptionItem)=> {
            item.func.apply(item.object, args);
        })
    }

    public get pub() : T {
        var pubsub=this;
        var func=  (...args: any[]) => {
            pubsub.doPub(args);
        }
        return <T>func;
    }

    public get pubAsync() : T {
        var pubsub=this;
        var func =  (...args: any[]) => {
            setTimeout( () => {
                pubsub.doPub(args);
            });
        }
        return <T>func;
    }

    public get count() : number {
        return this._subscribed.length
    }

} 
```

用法：

```
interface ITestEvent {
    (test : string): void;
}

var onTestEvent = new PubSub<ITestEvent>();
//subscribe to the event
onTestEvent.sub(monitor,(test : string) => {alert("called:"+test)});
//call the event
onTestEvent.pub("test1"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-18T12:22:40.430

您可以使用 rxjs 来实现这一点。

在您的班级中声明以下内容：

```
export class MyClass {
    private _eventSubject = new Subject();

    public events = this._eventSubject.asObservable();

    public dispatchEvent(data: any) {
        this._eventSubject.next(data);
    }
} 
```

然后你可以通过这种方式触发事件：

```
let myClassInstance = new MyClass();
myClassInstance.dispatchEvent(data); 
```

并通过以下方式收听此事件：

```
myClassInstance.events.subscribe((data: any) => { yourCallback(); }); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-03-12T01:21:41.903

[您可以在YouTube 上](https://www.youtube.com/watch?v=Y73ClbiX2eE)找到事件调度程序声明。观看视频后，您将能够拥有事件调度程序的完全类型化版本

# excel - 如何按单元格中的第一个字符过滤范围？

> ID：12881214
> 
> 赞同：2
> 
> 时间：2012-10-14T10:07:38.417
> 
> 标签：excel, vba

如果cell.Text以“A”开头，我想按column1过滤multipleColumnRange

```
rng01.Columns(1).AutoFilter Field:=1, Criteria1:="firstCharacter = 'A'", VisibleDropDown:=False 
```

请问我怎么能这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:52:05.893

像这样的东西。

前三行用于我的测试代码。

```
Dim rng01 As Range
Set rng01 = [a1:c10]
rng01.Parent.AutoFilterMode = False
rng01.Columns(1).AutoFilter Field:=1, Criteria1:="=A*", VisibleDropDown:=False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:22:52.773

最简单的方法是使用第 1 列中单词的第一个字符创建一个附加列：

```
=LEFT(A1,1) 
```

并过滤该新列。

# python - Django：选择列总和等于某个常数的位置

> ID：12881215
> 
> 赞同：2
> 
> 时间：2012-10-14T10:07:47.373
> 
> 标签：python, sql, django, django-orm

我搜索了文档，但找不到像这样运行查询的简单方法：

```
SELECT columns FROM table WHERE col_a + col_b = @param 
```

我知道我可以使用`.extra(where=['col_a + col_b = %s' % whatever])`，但这不是参数化的。

有没有办法在 ORM 中做到这一点（即没有`extra`）？否则，运行该查询的最简洁方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:45:38.427

您可以尝试使用 F() 表达式进行过滤。见这里：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model](https://docs.djangoproject.com/en/dev/topics/db/queries/#filters-can-reference-fields-on-the-model)

尝试这个：

```
from django.db.models import F
Something.objects.filter(col_a=CONST-F('col_b')) 
```

还没有尝试过，但它可能会像这样工作：如果 CONST = 10 并且如果 B 列是例如 8，那么仅当 A 列是 2 时才获取。

# windows-8 - Windows 8 模拟器不工作

> ID：12881217
> 
> 赞同：9
> 
> 时间：2012-10-14T10:07:51.223
> 
> 标签：windows-8, visual-studio-2012

Visual Studio 2012 附带的 Windows 8 模拟器无法通过在 Visual Studio 中调试或直接运行来启动。

由于模拟器使用了远程桌面 (RDP)，并且如果我直接启动它，Visual Studio 中就会出现问题。我已经确定如果我的 VPN 未启用，那么模拟器可以正常工作。因此，我认为问题在于 VPN 和 RDP 之间。

在 RDP ( `Application and service logs`- `Microsoft`- `Window`s - `TerminalServices-RDPClient`) 的事件日志中，我看到以下消息：

> RDP ClientActiveX 已断开连接（原因 = 5639）

原因 5639 是`The policy does not support delegation of credentials to the target server.`

我可以更改组策略中的任何策略以启用凭据委派吗？

我还尝试关闭防火墙，为所有用户设置 RDP 并以管理员身份运行模拟器，但这些选项都没有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T14:11:01.133

解决方案是在 VPN 安全属性中设置复选框`Automatically use my Windows logon name and password (and domain, if any)`，如下所示。

![VPN 属性对话框的屏幕截图，其中突出显示了答案中描述的复选框](../Images/22fa319543da4c5e2aa6a6e3dfe4b3e3.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T23:13:14.760

我遇到了同样的问题，这也是由于 VPN 连接造成的。由于我的计算机不在办公室域中，我无法选中“自动使用...”选项。

如果您有同样的问题，您只需在第一次启动模拟器时断开与 VPN 的连接，然后重新连接并继续工作！

# perl - 使用 DBI 检测死锁

> ID：12881224
> 
> 赞同：4
> 
> 时间：2012-10-14T10:08:28.183
> 
> 标签：perl, dbi

用 Perl DBI 检测死锁的正确方法是什么？

我应该使用`eval { }`吗？要捕获哪个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:25:12.320

答案将取决于 DBMS。

一些 DBMS 可能根本没有发现死锁；您必须在 DB 操作上设置某种超时，如果超时触发，则不清楚 DBI 和相关 DBD 将处于什么状态。

一些 DBMS 会检测到死锁并报告错误，在这种情况下，您或多或少地处理错误，就像处理任何其他错误一样——但“死锁错误”的特殊错误代码处理取决于所使用的特定 DBMS。

我不确定是否还有其他重要的选择。

# jquery - Jquery使用本地存储缓存Ajax XMLHttpResponse

> ID：12881225
> 
> 赞同：1
> 
> 时间：2012-10-14T10:08:29.577
> 
> 标签：jquery, ajax, caching, xmlhttprequest, local-storage

我有一个需要升级以提供本地存储缓存功能的 Jquery 网站，Target 会首先检查每个 Ajax 请求是否有缓存的响应 HTML，然后它不会调用服务器端，而是从缓存中获取数据。缓存和显示缓存中的数据等一切正常。

将缓存核心应用于严重依赖 XML HTTP 响应标头的站点时出现了我的问题；看来，当我尝试缓存从 ajax 调用返回的 XMLHttpResponse 对象时，当然使用 JSON.Stringify() 对其进行序列化，从 JSON.Parse() 返回的反序列化对象不包含响应头！

我必须从包含所有先前添加的标头的缓存中返回一个 XMLHttpResponse 对象，因为所有站点都将它作为 XMLHttpResponse 的对象来处理。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:01:23.533

我找到了解决这个问题的方法......

由于所有站点都需要一个 XMLHttpResponse 对象来处理，因此我构建了一个类似自定义 XMLHttpResponse 类的东西，这个类包含这些站点中使用的所有变量/函数，如下例所示：

```
var CustomXMLHTTPResponse =
{
    ResponseHeadersArr: new Array(),

    getResponseHeader: function (Key) {
        return this.ResponseHeadersArr[Key];
    }
.
.
} 
```

而不是缓存整个对象，我只缓存原始 XMLHttpResponse 对象中我需要的内容，实际上在这种情况下我缓存了所有响应标头；当我从缓存中获取这些数据时，我构建了一个新的 CustomXMLHTTPResponse 对象，然后用从缓存中获取的数据填充它，最后我传递了 CustomXMLHTTPResponse 对象。

因此，当调用 CustomXMLHTTPResponse 类中的函数 getResponseHeader() 时，它的行为与原始 XMLHTTPResponse 类中的 getResponseHeader() 相同。

# jquery-mobile - 带有滑动动作的fancybox会导致ipad上出现烦人的屏幕闪烁

> ID：12881226
> 
> 赞同：0
> 
> 时间：2012-10-14T10:08:37.027
> 
> 标签：jquery-mobile, fancybox, fancybox-2

我正在使用 fancybox 2.1.1 和 jQuery-mobile 1.2。将滑动事件绑定到下一个和上一个效果很好。

这是初始化代码（咖啡脚本）：

```
 afterShow: ->
    $(".fancybox-wrap").swiperight  $.fancybox.prev
    $(".fancybox-wrap").swipeleft  $.fancybox.next 
```

它可以工作，但背景闪烁，有时图像似乎浏览器完全混淆了。

当我使用按钮助手时，使用按钮更改当前图像不会导致屏幕闪烁。只有左右滑动才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:20:50.147

似乎打开了 GPU 加速器。尝试添加你的CSS

```
.fancybox-wrap { /* or its container */
    transform: translate3d(0, 0, 0);
    -webkit-transform: translate3d(0, 0, 0);
} 
```

这将在用户事件之前激活 GPU 加速器

# javascript - 如何从 JavaScript 设置按钮类型以避免 ipad safari 中的异常？

> ID：12881229
> 
> 赞同：1
> 
> 时间：2012-10-14T10:08:51.753
> 
> 标签：javascript, ios, ipad, html, button

我这样做：

```
var b = document.createElement('button');
try{
    b.type = 'button';
}catch(e){
    alert(e);
} 
```

在 ipad 的 safari (ios 6.0) 上，警报显示“TypeError: Attempted to assign to readonly property”。

在 Firefox 中运行良好（也不例外）。从 JavaScript 执行此操作的跨浏览器方式是什么？我想我必须根据 W3C 和 MDN 设置按钮类型，因为默认类型通常是“提交”，而我想要输入“按钮”。

- 编辑 -

b.setAttribute('type','button') 有效，但 b.setAttribute('typo','button') 也有效。我已经提交了一个[后续问题](https://stackoverflow.com/questions/12882541/check-whether-an-attribute-is-valid-for-an-element-with-pure-javascript)。

# xcode - 对齐 NSImageView 使其填充 NSWindow 的底部

> ID：12881236
> 
> 赞同：0
> 
> 时间：2012-10-14T10:09:37.090
> 
> 标签：xcode, macos, cocoa, interface-builder, nsimageview

我是 Mac 应用程序中的绝对菜鸟，所以要温柔；）。阅读一些文档，然后直接进入。仍然继续阅读，但我不知道如何将 NSImageView 对齐/调整到它所在的 NSWindow （在用户调整窗口大小之后）。

例如，这是默认运行状态（NSImageView 是底部有边框的大矩形）： ![在此处输入图像描述](../Images/005bda83b52efaa0f472cace96e6495f.png)

然后，如果我调整窗口大小，NSImageView 的高度和以前一样，但宽度有点跟随窗口（但我不知道我是如何做到的）。看这里： ![在此处输入图像描述](../Images/26ecc35dfe708ab3d8ff811c15284edd.png)

谢谢阅读。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:38:33.363

我找到了解决方案 - 这是一个简单的 AutoResizing 蒙版。

# .net - ServiceHost 和 WebServiceHost 有什么区别？

> ID：12881238
> 
> 赞同：5
> 
> 时间：2012-10-14T10:09:45.833
> 
> 标签：.net, asp.net-mvc, wcf, c#-4.0

对于.Net4，以下有什么区别

```
Uri baseAddress = new Uri("http://localhost:8080/test");
ServiceHost host = new ServiceHost(typeof(TestService), baseAddress);
host.Open(); 
```

和

```
Uri baseAddress = new Uri("http://localhost:8080/test");
WebServiceHost host = new WebServiceHost(typeof(TestService), baseAddress);
host.Open(); 
```

所有的书都推荐使用 webServiceHost，但为什么我看不到区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-23T00:34:42.503

类以`WebServiceHost`类为基础`ServiceHost`。

它带有`WebHttpBinding`并且`WebHttpBehavior`默认情况下。（好处是你不需要配置文件，简单使用。）

来自[MSDN](https://msdn.microsoft.com/en-us/library/dd203052.aspx)：

> 当您使用 WebServiceHost 而不是 ServiceHost 时，它将使用基本 HTTP 地址为您自动创建一个 Web 端点，并使用 WebHttpBehavior 配置注入的端点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:18:57.413

当你有服务类型时使用`WebServiceHost(Object, Uri[])`构造函数，你可以在需要时创建它的新实例，即使你需要一个单例实例。`ServiceHost(Object, Uri[])`仅当您希望服务主机使用服务的特定单例实例时才使用构造函数。

# java - Web 应用程序中的 OpenCV

> ID：12881249
> 
> 赞同：2
> 
> 时间：2012-10-14T10:10:47.620
> 
> 标签：java, web-applications, opencv

我想知道，如何在 Web 应用程序中使用 OpenCV 库。我正在创建一个需要进行一些图像处理的 Web 应用程序。我正在考虑使用 OpenCV 进行图像处理，但是在谷歌搜索时我只得到，如何安装 OpenCV在 windows/linux 等上。我想在 Web 服务器上使用它，这样最终用户就不必进行任何设置来使用这些网站。

我正在使用 java 创建我的网络应用程序并将其部署在谷歌应用程序引擎上。我可以使用谷歌应用程序引擎的替代品，以防使用 OpenCV 不可用。

请告诉我如何在 Java Web 应用程序中使用 OpenCV。一些资源的链接将非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:50:26.913

处理将在服务器端，您只需将结果发送到客户端，您基本上只需要一个到 OpenCV 的接口，比如[javacv](http://code.google.com/p/javacv/)

# java - 无法使用休眠插入数据库

> ID：12881250
> 
> 赞同：0
> 
> 时间：2012-10-14T10:10:48.640
> 
> 标签：java, hibernate

我正在使用hibernate来实现一个注册功能，我遇到了以下问题......

```
Hibernate: insert into Customer (address, isMember, mobile, name, password, rank, reward, title, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
org.hibernate.exception.ConstraintViolationException: could not insert: [com.POJO.Customer]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2285)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2678)
    at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1028)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:366)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    at com.dao.impl.CustomerDAOImpl.addCustomer(CustomerDAOImpl.java:34)
    at com.service.CustomerService.doRegister(CustomerService.java:12)
    at com.action.RegisterAction.execute(RegisterAction.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLIntegrityConstraintViolationException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL121014203335200' defined on 'CUSTOMER'.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.executeUpdate(Unknown Source)
    at org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:46)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2265)
    ... 81 more
Caused by: org.apache.derby.client.am.SqlException: The statement was aborted because it would have caused a duplicate key value in a unique or primary key constraint or unique index identified by 'SQL121014203335200' defined on 'CUSTOMER'.
    at org.apache.derby.client.am.Statement.completeExecute(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parseEXCSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readExecute(Unknown Source)
    at org.apache.derby.client.net.NetPreparedStatement.readExecute_(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.readExecute(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.flowExecute(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.executeUpdateX(Unknown Source)
    ... 84 more 
```

这是我配置 hibernate.cfg.xml 的方式

```
 <session-factory>
    <property name="hibernate.connection.driver_class">org.apache.derby.jdbc.ClientDriver</property>
    <property name="hibernate.connection.url">jdbc:derby://localhost:1527/orderonline;create=true</property>
    <property name="hibernate.connection.username">user</property>
    <property name="hibernate.connection.password">user</property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">2</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.DerbyDialect</property>

    <!-- Enable Hibernate’s current session context -->
    <property name="current_session_context_class">thread</property>

    <!-- Disable the second-level cache -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

  </session-factory> 
```

我还创建了一个 HibernateUtil.java

```
 public static final SessionFactory sessionFactory;
    public static final AnnotationConfiguration config;

    static {
        try {
            config = new AnnotationConfiguration();
            config.addAnnotatedClass(Customer.class);
            config.configure("hibernate.cfg.xml");

            // Create the SessionFactory from hibernate.cfg.xml
            sessionFactory = config.buildSessionFactory();
        } catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    } 
```

实体类来了

```
package com.POJO;

import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="Customer")
public class Customer {

    private int id;
    private String title;
    private String name;
    private String password;
    private String mobile;
    private String address;
    private int isMember;
    private int rank;
    private double reward;

    @Id
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getMobile() {
        return mobile;
    }

    public void setMobile(String mobile) {
        this.mobile = mobile;
    }

    public int getIsMember() {
        return isMember;
    }

    public void setIsMember(int isMember) {
        this.isMember = isMember;
    }

    public int getRank() {
        return rank;
    }

    public void setRank(int rank) {
        this.rank = rank;
    }

    public double getReward() {
        return reward;
    }

    public void setReward(double reward) {
        this.reward = reward;
    }

} 
```

这是我创建表格的方式

```
create table app.customer
(
  ID INTEGER NOT NULL GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1) primary key, 
  title varchar(10),
  name varchar(20),
  password varchar(10),
  mobile varchar(10),
  address varchar(50),
  isMember int,
  rank int,
  reward double
) 
```

我已将`@GeneratedValue(strategy=GenerationType.AUTO)`下一个添加到`@Id`

但还有另一个问题

```
org.hibernate.exception.SQLGrammarException: could not get or update next value
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:90)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.engine.TransactionHelper$1Work.doWork(TransactionHelper.java:64)
    at org.hibernate.engine.transaction.Isolater$JdbcDelegate.delegateWork(Isolater.java:211)
    at org.hibernate.engine.transaction.Isolater.doIsolatedWork(Isolater.java:67)
    at org.hibernate.engine.TransactionHelper.doWorkInNewTransaction(TransactionHelper.java:74)
    at org.hibernate.id.TableGenerator.generate(TableGenerator.java:118)
    at org.hibernate.id.TableHiLoGenerator.generate(TableHiLoGenerator.java:84)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:563)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:551)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:547)
    at com.dao.impl.CustomerDAOImpl.addCustomer(CustomerDAOImpl.java:33)
    at com.service.CustomerService.doRegister(CustomerService.java:12)
    at com.action.RegisterAction.execute(RegisterAction.java:23)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:441)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:280)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:243)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:165)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:252)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.sql.SQLSyntaxErrorException: Table/View 'HIBERNATE_UNIQUE_KEY' does not exist.
    at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)
    at org.apache.derby.client.am.Connection.prepareStatement(Unknown Source)
    at org.hibernate.id.TableGenerator.doWorkInCurrentTransaction(TableGenerator.java:156)
    at org.hibernate.engine.TransactionHelper$1Work.doWork(TransactionHelper.java:61)
    ... 85 more
Caused by: org.apache.derby.client.am.SqlException: Table/View 'HIBERNATE_UNIQUE_KEY' does not exist.
    at org.apache.derby.client.am.Statement.completeSqlca(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parsePrepareError(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply(Unknown Source)
    at org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(Unknown Source)
    at org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput(Unknown Source)
    at org.apache.derby.client.am.PreparedStatement.prepare(Unknown Source)
    at org.apache.derby.client.am.Connection.prepareStatementX(Unknown Source)
    ... 88 more 
```

我怎么解决这个问题...？我已经尝试了很多方法...有人可以对此给出提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:38:13.340

Customer pojo 没有定义如何设置类的 ID。您需要查看添加 @GeneratedValue 注释并定义适当的策略。

结帐：[http](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec) ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec并查找生成标识符部分。目前我假设您输入了重复的键。

尝试类似：

```
@Id 
@GeneratedValue(strategy=GenerationType.AUTO)
public int getId() { 
    return id; 
} 
```

该策略有四个基本选项，具体取决于 derby 如何填充您的 id：

AUTO - 标识列、序列或表，具体取决于底层数据库

TABLE - 保存 id 的表

IDENTITY - 身份列

序列 - 序列

如果您使用的是序列，您也可以尝试，其中 ENTITY_SEQ 是 derby 中序列对象的名称：

```
@Id 
@GeneratedValue(strategy=GenerationType.AUTO, generator="my_seq_gen") 
@SequenceGenerator(name="my_seq_gen", sequenceName="ENTITY_SEQ") 
public int getId() { 
    return id; 
} 
```

参考：[@GeneratedValue with strategy=GenerationType.AUTO 重启后生成重复值](https://stackoverflow.com/questions/11653497/generatedvalue-with-strategy-generationtype-auto-generates-repeated-value-after)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:38:29.433

我冒昧地猜测您没有`id`在 POJO 上明确设置，可能错误地取决于数据库自动编号方案？看看 Hibernate`@GeneratedValue`注释。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:51:12.240

我猜您正在使用自写语句插入实体？

您可能会考虑使用 org.hibernate.Session::persist 和 org.hibernate.Session::saveOrUpdate 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T11:03:50.837

您缺少生成方法。为id设置生成值最简单的方法是让db引擎自己设置id列的生成值，就像这样。

```
 @Id
        @GeneratedValue(strategy = GenerationType.IDENTITY)
        @Column(name = "id", unique = true, nullable = false)
        public Integer getId() {
            return Id;
        } 
```

# excel - 如何在 Excel 中计算某人是否比 19 岁大

> ID：12881252
> 
> 赞同：0
> 
> 时间：2012-10-14T10:10:58.693
> 
> 标签：excel, date

我对 Excel 有一点小问题。我需要做一个函数来检查一个人是否比 19 岁大。

我在线检查了一个功能，但它没有按应有的方式工作。

首先，我有一个不寻常格式的日期 14 10 2012 ，我曾经`=SUBSTITUTE(J2, " ", ".")` 得到 14.10.2012

之后我使用一个公式

```
=IF(P2<DATE(DAY(NOW()),MONTH(NOW()),YEAR(NOW())),"Older than 
19","Too young") 
```

但无论我做什么，它都无法正常工作。如果数字更大或更小，它显示相同的决心

为什么`=DATE(DAY(TODAY()),MONTH(TODAY()),YEAR(TODAY()))`给我看 3.4.1920 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:21:55.910

我认为您可能以错误的方式使用参数。如果我放：

=DATE(DAY(TODAY()),MONTH(TODAY()),YEAR(TODAY()))

进入Excel，我也得到3.4.1920。

但是，如果我输入：

=日期（年（今天（）），月（今天（）），日（今天（）））

我得到 14.10.2012 - 今天的日期！

======

作为后续，我怀疑您正在尝试将今天的日期与出生日期进行比较，以确定某人的年龄以及他们是否超过 19 岁？

试试这个：

1.  将上面的公式输入到一个单元格中（如果你愿意，可以隐藏） - 我们称之为 A1
2.  将人的出生日期输入另一个单元格 - 比如说 A2
3.  在第三个单元格 (A3) 中输入公式 =A1-A2。这会给你他们的年龄（以天为单位）。
4.  另一个公式 - 这次 =A3/365.25（即他们的年龄（以天为单位）除以一年中的天数）。假设这是A4
5.  然后是一个简单的 IF 语句 =IF(A4>19,"Over 19","Too young")

希望有帮助:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:57:40.720

```
=IF(YEAR(NOW())-RIGHT(J2,4)>55,"starejsi",IF(YEAR(NOW())-RIGHT(J2,4)=55,
IF(MONTH(NOW())-LEFT(RIGHT(J2,7),2)>0,"older",
IF(MONTH(NOW())-LEFT(RIGHT(J2,7),2)=0,
IF(DAY(NOW())-LEFT(J2,FIND(" ",J2,1))>=0,"older","younger"),"younger")),"younger")) 
```

最后我做到了。这是代码

# c++ - 如何消除空气阻力？

> ID：12881253
> 
> 赞同：10
> 
> 时间：2012-10-14T10:11:00.687
> 
> 标签：c++, bulletphysics

我有一个空间模拟，所以显然我不想要重力或空气阻力。重力直接关闭，但我找不到空气阻力的等价物。我认为这将是在逐个身体的基础上进行，而不是像重力这样的世界范围内的设置。

事实上，我看到`btSoftBody`有中等密度的值，`air_density`但我正在使用`btRigidBody`.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-23T22:17:37.727

子弹物理中没有空气阻力，但有阻尼

对于您创建的每个主体，您都应该设置阻尼调用

```
body->setDamping(linear, angular); 
```

设置`linear`为 0

# c# - 文件锁定时避免崩溃？

> ID：12881254
> 
> 赞同：4
> 
> 时间：2012-10-14T10:11:06.177
> 
> 标签：c#, .net-4.0, concurrency, filelock

**评论解决：
应用程序崩溃是由另一个问题引起的**

我正在从 2 个不同的应用程序读取/写入文件，当文件被读取或写入时，它将始终被应用程序 A 或 B 锁定，并且它们都使用`FileShare.None`.

我的问题是，即使将阅读器包装在 try/catch 周围，它仍然会在 using 行使用 IOException 使应用程序崩溃（写入器不会发生）。

我也做了`catch (IOException ...`一些我认为除了让它更具可读性之外没有什么区别的问题。

当文件被锁定并继续尝试直到文件可用时，忽略的正确方法是什么？

```
while (true)
{
    try
    {
        using (FileStream stream = new FileStream("test_file.dat", FileMode.Open, FileAccess.Read, FileShare.None))
        {
            using (TextReader reader = new StreamReader(stream))
            {
                // bla bla bla does not matter
            }
        }
    }
    catch
    {
        // bla bla bla does not matter again
    }
    Thread.Sleep(500);
} 
```

写

```
private bool WriteData(string data)
{
    try
    {
        using (FileStream stream = new FileStream("test_file.dat", FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None))
        {
            stream.SetLength(0);
            using (TextWriter writer = new StreamWriter(stream))
            {
                writer.Write(data);
            }
        }
        return true;
    }
    catch
    {
        return false;
    }
} 
```

`FileShare.None`请注意，当文件被用于读取或写入的任何进程时，我不会向任何人授予共享权限（作者和读者使用），所以基本上我正在处理异常，直到文件可用但无法正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:50:35.673

这是我们用于此目的的代码。

```
/// <summary>
/// Executes the specified action. If the action results in a file sharing violation exception, the action will be
/// repeatedly retried after a short delay (which increases after every failed attempt).
/// </summary>
/// <param name="action">The action to be attempted and possibly retried.</param>
/// <param name="maximum">Maximum amount of time to keep retrying for. When expired, any sharing violation
/// exception will propagate to the caller of this method. Use null to retry indefinitely.</param>
/// <param name="onSharingVio">Action to execute when a sharing violation does occur (is called before the waiting).</param>
public static void WaitSharingVio(Action action, TimeSpan? maximum = null, Action onSharingVio = null)
{
    WaitSharingVio<bool>(() => { action(); return true; }, maximum, onSharingVio);
}

/// <summary>
/// Executes the specified function. If the function results in a file sharing violation exception, the function will be
/// repeatedly retried after a short delay (which increases after every failed attempt).
/// </summary>
/// <param name="func">The function to be attempted and possibly retried.</param>
/// <param name="maximum">Maximum amount of time to keep retrying for. When expired, any sharing violation
/// exception will propagate to the caller of this method. Use null to retry indefinitely.</param>
/// <param name="onSharingVio">Action to execute when a sharing violation does occur (is called before the waiting).</param>
public static T WaitSharingVio<T>(Func<T> func, TimeSpan? maximum = null, Action onSharingVio = null)
{
    var started = DateTime.UtcNow;
    int sleep = 279;
    while (true)
    {
        try
        {
            return func();
        }
        catch (IOException ex)
        {
            int hResult = 0;
            try { hResult = (int) ex.GetType().GetProperty("HResult", BindingFlags.NonPublic | BindingFlags.Instance).GetValue(ex, null); }
            catch { }
            if (hResult != -2147024864) // 0x80070020 ERROR_SHARING_VIOLATION
                throw;
            if (onSharingVio != null)
                onSharingVio();
        }

        if (maximum != null)
        {
            int leftMs = (int) (maximum.Value - (DateTime.UtcNow - started)).TotalMilliseconds;
            if (sleep > leftMs)
            {
                Thread.Sleep(leftMs);
                return func(); // or throw the sharing vio exception
            }
        }

        Thread.Sleep(sleep);
        sleep = Math.Min((sleep * 3) >> 1, 10000);
    }
} 
```

使用示例：

```
Utilities.WaitSharingVio(
    action: () =>
    {
        using (var f = File.Open(file, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.None))
        {
            // ... blah, process the file
        }
    },
    onSharingVio: () =>
    {
        Console.WriteLine("Sharing violation. Trying again soon...");
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T10:21:58.800

我曾经使用[Is there a global named reader/writer lock?](https://stackoverflow.com/questions/640122/is-there-a-global-named-reader-writer-lock) .

我想结果有点像`ReaderWriterLockSlim`在多个进程而不是线程访问资源的情况下有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T10:19:57.053

您可以使用互斥对象来保护共享资源不被多个线程或进程同时访问。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T10:24:24.527

您可以通过编写如下函数来检查文件锁定：

```
protected bool IsFileLocked(FileInfo file)
{
    FileStream stream = null;

    try
    {
        stream = file.Open(FileMode.Open, FileAccess.ReadWrite, FileShare.None);
    }
    catch (IOException)
    {
        //the file is unavailable because it is:
        //still being written to
        //or being processed by another thread
        //or does not exist (has already been processed)
        return true;
    }
    finally
    {
        if (stream != null)
            stream.Close();
    }

    //file is not locked
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T09:06:41.027

Timwi 的回答对我们帮助很大（尽管在另一个上下文中），但我发现如果你想从所有 IOExceptions 中获取 HResult，还需要添加标志“BindingFlags.Public”：

```
public static int GetHresult(this IOException ex)
{
   return (int)ex.GetType().GetProperty("HResult", BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance).GetValue(ex, null);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-14T10:13:05.367

使用读取器和写入器锁定
正确的 catch 语法

```
catch(Exception e) 
```

```
while (true)
{
    try
    {
        using (FileStream stream = new FileStream("test_file.dat", FileMode.Open, FileAccess.Read, FileShare.None))
        {
            using (TextReader reader = new StreamReader(stream))
            {
                // bla bla bla does not matter
            }
        }
    }
    catch(Exception e)
    {
        // bla bla bla does not matter again
    }
    Thread.Sleep(500);
} 
```

# django - django 登录 userprofile 和相关的附加表格

> ID：12881255
> 
> 赞同：0
> 
> 时间：2012-10-14T10:11:26.350
> 
> 标签：django, django-models, django-forms, django-views

我对如何在 Django 中为登录用户附加额外的表单有疑问。我希望附加表单属于登录用户，并且我在表单中输入的数据应该在登录用户表下。我是 Django 和 python 的新手，请耐心等待我希望我能正确解释我想用这个做什么

我将为此视图输入的数据应仅在登录用户下进行，基本上我只想将此视图附加到登录用户我得到的错误是异常值：

registration_todos.user_id 不能为 NULL

```
#models

class userProfile(models.Model):
    user = models.OneToOneField(User)
    birth =models.DateField()
    name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name

class todos(models.Model):
    user     = models.ForeignKey(User)
    title    = models.CharField(max_length=100)
    created  = models.DateField()
    time     = models.TimeField()
    def __unicode__(self):
            return unicode(self.user)

#forms   additional form for todos  
    class formtodos(ModelForm):
        title       = forms.CharField(label=(u'Todo'))
        created     = forms.DateField(label=(u'Date'))
        time        = forms.TimeField(label=(u'Time'))
        #user        = forms.CharField(label=(u'username'))
            class Meta:
               model = todos
               exclude=('user',) 
#view  
 def modeltodo(request):
if request.user.is_authenticated(): 
    todos.objects.filter(user=request.user)
if request.method == 'POST':
    form =formtodos(request.POST)
    if form.is_valid():# All validation rules pass
        todoss = form.save(commit=False)
        todoss.created_by = request.user
        form.save()
        return HttpResponseRedirect('/profile/')
else:
    form = formtodos() # An unbound form

context = {'form':form}
return render_to_response('todo.html', context,    context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:28:58.293

您已`exclude = ('user',)`在表单中指定。这意味着当您尝试保存表单时，没有`user_id`导致错误的存在。你可能想在通话之前把这个`save()`：`todoss.user = request.user`

# android - OnTouchEvent 离开父母时停止触发，如何改变这种行为？

> ID：12881263
> 
> 赞同：0
> 
> 时间：2012-10-14T10:12:52.247
> 
> 标签：android, drag-and-drop, ontouchlistener

我想在 android 应用程序中实现拖放，以将子视图从一个自定义视图切换到另一个自定义视图（相同类型）。

我的问题是，在拖动时离开直接父级时 OnTouchEvent 停止触发（在我的情况下，自定义视图是这样构建的：RelativeLayout ->（TextView，Button，LinearLayout ->（*LinearLayouts 包含 *ImageViews））。我想如果图像不适合一行，则显示包含在更多行中的图像列表...）实际上我想拖动其中一个图像视图（父级是线性布局行，父级是线性布局，父级是相对布局）到相同类型的另一个自定义视图。（它只需要放在另一个视图上并添加到另一个列表中......）但它总是在离开其父线性布局时停止接收事件。

你能帮我理解嵌套在不同视图中时如何处理 OnTouchEvent 吗？（已经尝试将 OnTouchListener 添加到每个视图甚至活动的根视图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T16:10:38.577

要继续在您的视图之外接收触摸事件，请`getParent().requestDisallowInterceptTouchEvent(true)`从 onTouchEvent() 调用。

# php - IE9 中的 jQuery 表单插件中没有 JSON 响应

> ID：12881267
> 
> 赞同：2
> 
> 时间：2012-10-14T10:13:52.257
> 
> 标签：php, jquery, ajax, json

我在表单中使用[http://www.malsup.com/jquery/form/#ajaxForm 。](http://www.malsup.com/jquery/form/#ajaxForm)我设置了一个表单来通过 Ajax 将图像上传到服务器。没有 IE9 一切正常 :)。我无法从服务器获得 JSON 响应，尽管在其他浏览器上它可以正常工作。我试图在成功函数中放置一些 alert()，但看起来成功函数没有加载事件。

我的 JS 代码：

```
$(function() {

    $('#upload-image').ajaxForm({
        dataType:  'json',
        success: processJson
    });

    function processJson(data) {
        var i = 0;
        $.each(data, function(key, val) {
            $('<li id="image_' + key + '"><input type="checkbox" name="delete_image[' + key + ']" /><img src="' + val + '" alt=""/></li>').hide().appendTo('#images').delay(i).fadeIn('slow');
            i += 1000;
        });
    }

}); 
```

以及在 PHP 中生成 JSON 响应的代码：

```
 $output = array();

    foreach ($files['Filedata'] as $file)
    {
        $file_arr = $this->_save_image($file);

        $image = ORM::factory('image');

        $image->filename = $file_arr['filename'];
        $image->gallery_id = $gallery_id;
        $image->save();

        $output[$image->id] = Route::get('uploads')->uri(array('dir' => 'images/120x120', 'file' => $image->filename));

    }
    $this->request->headers('Content-type','application/json; charset='.Kohana::$charset);
    $this->response->body(json_encode($output)); 
```

我发现了一些关于类似问题的帖子（从响应中删除 html 标签），但这对我没有帮助。怎么了？

编辑： IE 调试模式告诉我，访问已在“form.submit();”行被拒绝 在 jQuery 表单插件库中。这似乎是某种与在 localhost 上运行 javascript 相关的安全拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:24:28.080

这可能是 IE9 无法识别字符集导致的错误。我不得不面对类似的问题。

我这应该有帮助

```
$.ajaxSetup({ scriptCharset: "utf-8" , contentType: "application/json; charset=utf-8"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:43:27.093

json 甚至服务器响应都不是问题。我可以看到你的更新，问题和我的一样，IE 根本不允许提交，所以没有请求 = 没有响应。

我试图找出问题所在，作者页面上的示例有效 - 我的不是。

# iphone - 具有不同页面宽度的 UIScrollview

> ID：12881276
> 
> 赞同：3
> 
> 时间：2012-10-14T10:15:55.957
> 
> 标签：iphone, objective-c, ios, ios5, uiscrollview

我需要像 UIScrollview 这样具有**灵活**pageWidth 的东西。

举个例子; 我的 scollview 有 5 个按钮。中间的按钮是最宽的。第 2 和第 4 个按钮的宽度较小。第 1 和第 5 个按钮的宽度最小。

```
| button 1 |    button 2    |        button 3        |    button 4    | button 5 | 
```

如何在启用分页的 UIScrollView 中构建类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:29:23.447

如果我的要求正确，请阅读以下关于这个主题的[博客文章（Alexander Repty）！](http://blog.proculo.de/archives/180-Paging-enabled-UIScrollView-With-Previews.html)这是一个较旧的条目，但它很好地描述了这种方法。简而言之，它不是仅仅改变“页面”的宽度那么简单，而是可以管理的！

或者也可以查看[这篇文章](https://stackoverflow.com/questions/5089510/paging-uiscrollview-with-different-page-widths)。

# c++ - 为什么“volatileQualifiedExpr + volatileQualifiedExpr”不一定是 C 中的 UB，而是 C++ 中的 UB？

> ID：12881285
> 
> 赞同：11
> 
> 时间：2012-10-14T10:17:29.643
> 
> 标签：c++, c, volatile, side-effects

当我今天阅读 C 标准时，它说的是副作用

> 访问 volatile 对象、修改对象、修改文件或调用执行任何这些操作的函数都是副作用

和 C++ 标准说

> 访问由 volatile glvalue (3.10) 指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用

因此，因为两者都禁止在同一个标​​量对象上发生未排序的副作用，所以 C 允许以下情况，但 C++ 使其成为未定义的行为

```
int a = 0;
volatile int *pa = &a;

int b = *pa + *pa; 
```

我是否正确阅读规范？如果是这样，差异的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:03:12.650

我不相信在这方面 C 和 C++ 之间存在有效的变化。尽管关于排序的措辞不同，但最终结果是相同的：两者都导致未定义的行为（尽管 C 似乎表明评估将成功但结果未定义）。

在 C99 中（对不起，手边没有 C11）第 5.1.2.3.5 段指定：

> — 在序列点，易失性对象是稳定的，因为先前的访问已完成，而后续的访问尚未发生。

结合您从 5.1.2.3.2 中引用的内容，将表明 的值`pa`对于至少其中一次访问`pa`. 这是合乎逻辑的，因为编译器将被允许以任何顺序评估它们，一次或同时（如果可能的话）。然而，它实际上并没有定义*稳定*的含义。

在 C++11 中，1.9.13 明确引用了未排序的操作。那么第 15 点表示对同一操作数的这种未排序的操作是未定义的。由于*未定义的行为*可能意味着任何事情都会发生，它可能比 C 的*不稳定*行为强。但是，在这两种情况下，都不能保证您的表达结果。

# ios - iOS - 在没有 armv7s 的情况下集成 MGTwitter

> ID：12881287
> 
> 赞同：0
> 
> 时间：2012-10-14T10:17:40.637
> 
> 标签：ios, ios6

我在我的应用程序中使用 MGTwitterEngine，直到 iOS5，该应用程序运行良好。我正在使用 twitter 引擎作为“.a”文件。
但是使用最新的 XCode 编译时，显示 armv7s slice 不可用的错误。
我尝试从有效架构中删除 armv7s 并解决了问题。我能够构建应用程序，在 iPhone4、iPhone4S 和 iPhone5 上成功运行应用程序。
我的问题是我是否遵循正确的方式。苹果会批准那些不是用 armv7s 架构构建的应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T07:41:36.300

没有其他选择
库是预编译的代码。因此它们是根据编译期间选择的架构构建的。
在最新的 iOS 中，最好使用 Twitter/Social 框架（根据 iOS 版本）

# python - Django - 创建多个文件的 Zip 并使其可下载

> ID：12881294
> 
> 赞同：28
> 
> 时间：2012-10-14T10:18:49.937
> 
> 标签：python, django, file

> **可能重复：**
> [在 Django 中提供动态生成的 ZIP 档案](https://stackoverflow.com/questions/67454/serving-dynamically-generated-zip-archives-in-django)

（如果我错过了任何可能的重复项，请随时指出我）

我看过这个片段： [http ://djangosnippets.org/snippets/365/](http://djangosnippets.org/snippets/365/)

这个[答案：](https://stackoverflow.com/a/1158750/1737290)

但我想知道如何调整它们以满足我的需要：我希望压缩多个文件并通过链接下载存档（或通过视图动态生成）。我是 Python 和 Django 的新手，所以我不知道该怎么做。

预先感谢！

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-10-18T09:36:37.007

我已经在 Willy 链接到的[重复问题](https://stackoverflow.com/questions/67454/serving-dynamically-generated-zip-archives-in-django)上发布了这个，但由于赏金问题不能作为重复项关闭，不妨也将其复制到此处：

```
import os
import zipfile
import StringIO

from django.http import HttpResponse

def getfiles(request):
    # Files (local path) to put in the .zip
    # FIXME: Change this (get paths from DB etc)
    filenames = ["/tmp/file1.txt", "/tmp/file2.txt"]

    # Folder name in ZIP archive which contains the above files
    # E.g [thearchive.zip]/somefiles/file2.txt
    # FIXME: Set this to something better
    zip_subdir = "somefiles"
    zip_filename = "%s.zip" % zip_subdir

    # Open StringIO to grab in-memory ZIP contents
    s = StringIO.StringIO()

    # The zip compressor
    zf = zipfile.ZipFile(s, "w")

    for fpath in filenames:
        # Calculate path for file in zip
        fdir, fname = os.path.split(fpath)
        zip_path = os.path.join(zip_subdir, fname)

        # Add file, at correct path
        zf.write(fpath, zip_path)

    # Must close zip for all contents to be written
    zf.close()

    # Grab ZIP file from in-memory, make response with correct MIME-type
    resp = HttpResponse(s.getvalue(), mimetype = "application/x-zip-compressed")
    # ..and correct content-disposition
    resp['Content-Disposition'] = 'attachment; filename=%s' % zip_filename

    return resp 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T07:40:21.913

因此，据我了解，您的问题不是如何动态生成此文件，而是创建一个链接供人们下载...

我的建议如下：

0）为您的文件创建一个模型，如果您想动态生成它，请不要使用 FileField，而只是生成此文件所需的信息：

```
class ZipStored(models.Model):
    zip = FileField(upload_to="/choose/a/path/") 
```

1) 创建并存储您的 Zip。这一步很重要，您在内存中创建 zip，然后将其转换为将其分配给 FileField：

```
function create_my_zip(request, [...]):
    [...]
    # This is a in-memory file
    file_like = StringIO.StringIO()
    # Create your zip, do all your stuff
    zf = zipfile.ZipFile(file_like, mode='w')
    [...]
    # Your zip is saved in this "file"
    zf.close()
    file_like.seek(0)
    # To store it we can use a InMemoryUploadedFile
    inMemory = InMemoryUploadedFile(file_like, None, "my_zip_%s" % filename, 'application/zip', file_like.len, None)
    zip = ZipStored(zip=inMemory)
    # Your zip will be stored!
    zip.save()
    # Notify the user the zip was created or whatever
    [...] 
```

2）创建一个url，例如获取一个与id匹配的数字，也可以使用slugfield（[this](https://docs.djangoproject.com/en/dev/ref/models/fields/#slugfield)）

```
url(r'^get_my_zip/(\d+)$', "zippyApp.views.get_zip") 
```

3）现在是视图，这个视图会返回与url中传递的id匹配的文件，你也可以使用slug发送文本而不是id，并通过你的slugfield进行get过滤。

```
function get_zip(request, id):
    myzip = ZipStored.object.get(pk = id)
    filename = myzip.zip.name.split('/')[-1]
    # You got the zip! Now, return it!
    response = HttpResponse(myzip.file, content_type='application/zip')
    response['Content-Disposition'] = 'attachment; filename=%s' % filename 
```

# javascript - 在 Angular JS 中，如何将数据从指令属性注入到模板？

> ID：12881304
> 
> 赞同：5
> 
> 时间：2012-10-14T10:20:35.223
> 
> 标签：javascript, templates, angularjs

这是我的指令：

```
app.directive("helloWorld", function() {
  return {
    restrict: "E",
    scope: {
      name: "bind"
    },
    template: "<div>a {{name}} a</div>"
  };
}); 
```

这是我如何使用它：

```
<hello-world name="John Smith"></hello-world> 
```

当我运行它时，我希望这个页面是这样的：

```
<hello-world>
  <div>a John Smith a</div>
</hello-world> 
```

但由于某种原因，`name`没有注入，实际结果是这样的：

```
<hello-world>
  <div>a {{name}} a</div>
</hello-world> 
```

有什么我想念的吗？我正在使用 Angular JS 1.0.2

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T10:37:01.823

范围声明很奇怪。我不确定该`"bind"`声明 - 也许它来自以前的版本。

绑定到指令属性的当前语法如下：

```
return {
    restrict: "E",
    scope: {
      name: "@name"
    },
    template: "<div>a {{name}} a</div>"
}; 
```

一般来说，`@attributeName`. [有关指令](http://docs.angularjs.org/guide/directive)的更多信息，请参见此处。

# linux - linux cpuset 不工作

> ID：12881307
> 
> 赞同：0
> 
> 时间：2012-10-14T10:20:59.783
> 
> 标签：linux, linux-kernel, real-time, cgroups

我在使用 cpuset 时遇到了麻烦，如果你能帮助我，那就太好了。我已经定义了两个 cpuset 组：“cpuset_0”只有一个任务，“cpuset_1”用于我系统中的所有其他任务。“cpuset_0”具有 cpus="0"、cpu_exclusive="1" 并且只有一个任务分配给它。并且“cpuset_1”具有 cpus="1-3"、cpu_exclusive="0" 以及我可以从根 cpuset 作为根移动的所有任务。两个 cpuset 都有 mems="0"。问题是由于某种原因，我看到分配给“cpuset_1”的任务在独占 cpu“cpuset_0”上运行

例如运行`ps H -eo tid,psr,cgroup,cmd` 给了我：

`2199 0 6:cpuset:/cpuset_1?5:freeze /usr/lib/chromium-browser/chromium-browser`

在不应在 cpu 0 上运行的其他进程中。

**顺便说一句**：我正在运行内核版本 3.2.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:47:26.237

您是否能够在不使用 cpuset.mems 的情况下真正使其工作？这是强制性的。你的配置是什么样的。或者你使用了 mount 命令。

[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/sec-cpuset.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/sec-cpuset.html)

尝试遵循以下

[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/ch-Using_Control_Groups.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Resource_Management_Guide/ch-Using_Control_Groups.html)

# android - Android 9补丁批处理

> ID：12881308
> 
> 赞同：4
> 
> 时间：2012-10-14T10:21:22.153
> 
> 标签：android

我正在使用 Android 9-patch 工具生成我的 9-patch 图像。我必须支持许多不同的分辨率和按钮状态。这意味着对于单个 9 补丁按钮，我需要生成 16 个单独的资产。目前，我正在使用 Android 9-patch 工具界面分别生成其中的每一个，这占用了我很多时间。如果我能够为一系列具有相同属性的按钮指定 9 个补丁点，这将节省我很多时间。是否有等效的命令行工具或其他方法可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T15:06:38.083

[这](https://github.com/SpatialInteractive/9-patchedit)是我刚刚发现的一个漂亮的工具。我无法验证它的准确性或稳定性，但它声称可以做你想做的事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T10:30:10.760

您可以尝试在[http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/nine-patches.html)使用 Android Asset Studio 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:35:40.840

好吧，没有您喜欢的工具，但是您可以轻松编写将两个图像（主图像 + 9 个补丁点）组合在一起的小脚本（PHP、Perl 等）。或者您可以单独保存点，然后将其作为图层加载到 GIMP 或 Photoshop 中，然后导出为单个最终的 9patch PNG。

# sugarcrm - 在视图类中访问 bean

> ID：12881313
> 
> 赞同：0
> 
> 时间：2012-10-14T10:21:57.550
> 
> 标签：sugarcrm

嗨，我对 SugarCRM 还是很陌生，并试图让我的头脑了解糖 MVC。

我正在制作一个没有自己的 SugarBean 的模块，而是需要与 Contacts Bean 和 Quotes Bean 交互。

我的示例代码如下。

我的问题是如何从 view.searchengineer.php 文件中的 controller.php 访问 $contact_bean 和 $quote_bean，以便在加载记录后从它们中调用信息。

控制器.php

```
Class PCP_TasksController extends SugarController
{
    function action_search_engineers()
    {
       // Get Contacts ID
       $contact_id = $_GET['Contact_id'];
       //Load Contacts Bean and pull Record
       $contact_bean = New Contact();
       $contact_bean->retrieve($contact_id );

       //Get Quote ID
       $quote_id = $_GET['Quote_id'];
       //Load Quotes Module and pull record
       $quote_bean = New AOS_Quotes();
       $quote_bean->retrieve($quote_id );

       $this->view = 'SearchEngineer';
    }

} 
```

意见/view.searchengineer.php

```
class PCP_tasksViewSearchengineer extends SugarView
{

   function display() { 

       Echo "The Contact Name is ";

       Echo "The Quote Ref is ";
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:37:32.420

我只是将相同的代码直接放在视图中。

# java - NetBeans 7.2 的插件和我面临的一些问题

> ID：12881315
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:22:10.937
> 
> 标签：java, netbeans, netbeans-plugins, netbeans-7.2

我昨天从 NetBeans 7.0 升级到了 NetBeans 7.2，与 NetBeans 7.0 不同，我在 NetBeans 7.2 中没有看到“Java 桌面应用程序”选项。我搜索了一下，发现它（Java 桌面应用程序的框架）被删除了，而且我还发现它有一个“插件”。

但是，当我进一步搜索插件时，我没有找到。有没有这样的插件，它运行良好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:38:34.473

它在*[Swing 应用程序框架支持 - 插件详细信息](http://plugins.netbeans.org/plugin/43836/swing-application-framework-support)*中。

有关完整的（和激烈的讨论），请参阅*[NetBeans 7.1 Swing 应用程序支持已停止](http://forums.netbeans.org/viewtopic.php?t=43775)*。

# javascript - 调用 onclick="function(this);" 负载？

> ID：12881316
> 
> 赞同：0
> 
> 时间：2012-10-14T10:22:13.260
> 
> 标签：javascript, html, checkbox

我有一个带有以下代码的复选框：

```
<input type="checkbox" id="check" onclick="function(this);" checked="checked" /> 
```

但在同样的情况下，我希望在页面加载时进行调用。如何手动复制“this”？

我尝试添加 onload="function(this);" 输入，但这不起作用。如果我只是调用“function();” 在页面加载时，该功能自然不起作用。

因此，如果我可以手动调用如下函数，那就太好了：function(htmlElement[check]); 或任何“这个”构成。

希望我已经说清楚了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:25:16.380

在您的情况下，`this`将引用`input`元素。由于该元素具有 ID，因此您可以使用该`getElementById`方法轻松获取对它的引用）：

```
yourFunction(document.getElementById("check")); 
```

您可以将其放在元素的`onload`属性中`body`，但理想情况下，停止使用内联事件处理程序并改用该`addEventListener`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:25:29.187

尝试：

```
onload="function(document.getElementById('check'));" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:25:47.850

您可以通过 id 获取元素，并在`window.onload`回调函数中执行此操作。

```
window.onload = function () {
  yourFunction(document.getElementById('check'));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T10:25:48.047

据我了解，onload 仅适用于`<body>`标签

您可能想尝试的是：

```
$(document).ready(function() {
  // Handler for .ready() called.
}); 
```

来源：[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T10:26:52.333

你可以使用这样的东西：

```
document.addEventListener( "DOMContentLoaded", function(){
        document.removeEventListener( "DOMContentLoaded", arguments.callee, false );
        yourFunction(document.getElementById("check"));     
}, false ); 
```

您必须避免使用：

```
window.onload = function() {
} 
```

因为通过这种方式，您将覆盖附加到 onload 函数（如果已经通过这种方式附加到 onload）。当您想将 JavaScript 放在单独的文件中时，此方法非常好（最佳解决方案）。

# html - CSS 高度/最小高度 100% 窗口

> ID：12881318
> 
> 赞同：0
> 
> 时间：2012-10-14T10:22:14.027
> 
> 标签：html, css

代码：

```
<html>
    <body>
        <div id="header">
        </div>
        <div id"content">
            Some random content
        </div>
        <div id="footer>
        </div>
    </body>
</html> 
```

CSS：

```
html {
    height: 100%;
}
body {
    width:960px;
    height: 100%;
    margin: 0 auto;
}
#header {
    height: 100px;
}
#content {
    min-height: 100%;
}
#footer {
    height: 100px;
    position: relative;
    bottom: 0;
} 
```

问题：对于我一直在阅读的内容，即使内容更小，这段代码也应该让内容 div 的高度占据窗口的所有高度。问题是它需要超过窗口高度，即使内容非常小。

我不明白内容如何占用超过 100% 的高度以及如何修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:29:23.633

它工作正常，您误解了它应该如何工作。您将页眉和页脚设置为 100 像素，因此该网站实际上是向整个页面添加了 200 像素。

如果那是复制和粘贴，您也有 html 错误，您的内容 div 缺少一个 = 符号，而页脚 div 缺少关闭“

你想要的是一个固定在页脚上的包装器和位置，而不是相对的。

[http://jsfiddle.net/calder12/ghDUd/1/](http://jsfiddle.net/calder12/ghDUd/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:30:35.037

它需要超过 100%，因为标题也有 100px，所以页面的总高度为 100%+100px，将标题放在内容包装内，这将是一个快速修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:31:29.250

假设正确的代码：

```
 <html>
    <head>
        <style type="text/css">
        html {
height: 100%;
}
body{
width:960px;
height: 100%;
margin: 0 auto;
}
#header{
height: 100px;
}
#content{
min-height: 100%;
}
#footer{
height: 100px;
position: relative;
bottom: 0;
}
</style>
</head>
        <body>
           <div id="header">
           </div>
           <div id="content">
               Some random content
           </div>
           <div id="footer">
           </div>
        </body>
    </html> 
```

`content`div 确实有 100% 的窗口高度。这意味着它`header`在窗口高度以下 100 像素（高度）处结束。如果您希望页脚始终位于底部，则应使用`position: fixed; bottom: 0`页脚。

# php - 用 %0A 替换 \n

> ID：12881321
> 
> 赞同：-6
> 
> 时间：2012-10-14T10:22:37.970
> 
> 标签：php, url

```
<?php
    if (isset($_POST['submit'])) 
    {  
        $send_to  = $_POST['number'];
        $message = $_POST['message'];
        echo $message;
        $url ="http://assssdewweas.com/Send.aspx?userid=xxxxxx&password=xxxxxx&clientid=3589&senderid=asdodas&asdr=91send_to&smsmessage=$message";
        $url = str_replace("\n","%0A",$url);
        $url = str_replace(' ','+',$url);
        echo $url;
        $ch = curl_init($url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        $curl_scraped_page = curl_exec($ch);
        curl_close($ch);
        echo $curl_scraped_page;
    }
?> 
```

它工作正常，但问题是每当我在`$message`变量中传递值时它都会回显： [http](http://assssdewweas.com/Send.aspx?userid=xxxxxx&password=xxxxxx&clientid=3589&senderid=asdodas&asdr=91send_to&smsmessage=) ://assssdewweas.com/Send.aspx?userid=xxxxxx&password=xxxxxx&clientid=3589&senderid=asdodas&asdr=91send_to&smsmessage= $message

代替：

```
hhttp://assssdewweas.com/Send.aspx?userid=xxxxxx&password=xxxxxx&clientid=3589&senderid=asdodas&asdr=91send_to&smsmessage=$message 
```

我不希望`hello`和之间有任何空格`%0A`。请帮助如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:25:08.060

使用`url_encode()`而不是替换哪个不是正确的方法

[url_encode() 参考](http://php.net/manual/en/function.urlencode.php)

而不是在你的url中传递这么多信息，`method=post`而不是使用`get`，因为`get`方法有限制在地址栏中传递数据而`post`不是，而且如果你使用`post`方法，你的数据将被隐藏

# android - 将属性添加到android中的自定义控件

> ID：12881327
> 
> 赞同：0
> 
> 时间：2012-10-14T10:23:32.370
> 
> 标签：android, eclipse, custom-controls, custom-attributes

我创建了一个简单的自定义视图，它是一个矩形。我可以将它添加到我的布局中，但不能更改它在类中定义的颜色。

我的课：

```
package com.example.customview;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.view.Display;
import android.view.View;
import android.view.WindowManager;

public class CustomRect extends View {

    Rect rect;
    Paint blue;

    public void init() {

        rect = new Rect(0, 0, 200, 200);
        blue = new Paint();
        blue.setColor(Color.BLUE);
        blue.setStyle(Paint.Style.FILL);
    }

    public CustomRect(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        init();
    }

    public CustomRect(Context context, AttributeSet attrs) {
        super(context, attrs);

        init();
    }

    public CustomRect(Context context) {
        super(context);

        init();
    }

    @Override
    protected void onDraw(Canvas canvas) {

        super.onDraw(canvas);

        canvas.drawRect(rect, blue);

        invalidate();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        setMeasuredDimension(200, 200);
    }   
} 
```

我的活动：

```
package com.example.customview;
import android.app.Activity;
import android.os.Bundle;

public class RectActivity extends Activity{

    CustomRect rect;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        rect = new CustomRect(this);
        setContentView(rect);
    }
} 
```

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <view
        android:id="@+id/thisId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        class="com.example.customview.CustomRect" />

</LinearLayout> 
```

如果有人有任何想法这样做。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:19:40.760

从您的 onDraw() 中删除 invalidate()。其他类应使用 invalidate() 向 Android 指示应重绘您的自定义视图。

[编辑]

要从 XML 更改您使用的颜色，请添加自定义属性。请参阅此问题中的答案：

[使用 XML 声明一个自定义的 android UI 元素](https://stackoverflow.com/questions/2695646/declaring-a-custom-android-ui-element-using-xml)

# eclipse - Bash-->Batch + 冒号和反/正斜杠使用

> ID：12881333
> 
> 赞同：1
> 
> 时间：2012-10-14T10:24:35.403
> 
> 标签：eclipse, bash, shell, batch-file, pydev

我正在尝试使用在 Eclipse 启动之前运行的批处理脚本来使便携式 pyDev 自动设置 python 解释器。为此，我遇到了以下 bash 脚本，但我无法将其翻译成批处理（我很熟悉）：

```
PYTHONPATH=/my/extra/python/modules python /my/eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2>/dev/null | sed 's/INS_PATH$//g;s/OUT_PATH$//g;s/^EXECUTABLE:/Executable\\:/g' | tr -d '\n' | cat <(echo -en 'eclipse.preferences.version=1\nINTERPRETER_PATH_NEW=Name\:python\:EndName\:') - <(echo '&&&&&') >/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs 
```

**我尝试将其分解以查看替换/管道的位置，但这没有意义：**

```
PYTHONPATH= App/Eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2> /dev/null 
|sed '  s/ INS_PATH$/ / g; REM Delete all instances of INS_PATH that are at the end of a line
        s/ OUT_PATH$/ / g; REM Delete all instances of OUT_PATH that are at the end of a line
        s/ ^EXECUTABLE:/ Executable\\:/ g REM Replace all instances of "\nEXECUTABLE:" that are at the beginning of a line with "Executable\:"
' 
|tr -d '\n' 
|cat <(echo -en 'eclipse.preferences.version= 1 \n INTERPRETER_PATH_NEW= Name\:python\:EndName\:') - <(echo '&&&&&') 
>/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs 
```

* * *

最令人困惑的部分之一是冒号的奇怪使用和**'/'** vs **'\' 的**使用。查看配置文件我看到`osgi.framework=file\:plugins/org.eclipse.osgi_3.8.0.v20120529-1548.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:52:59.380

我试图格式化“原始”以使其更具可读性。我将尝试解释从那里发生的事情：

```
PYTHONPATH=/my/extra/python/modules \
    python /my/eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2>/dev/null |
    sed '
        s/INS_PATH$//g;
        s/OUT_PATH$//g;
        s/^EXECUTABLE:/Executable\\:/g
    ' |
    tr -d '\n' |
    cat \
        <(
            echo -en 'eclipse.preferences.version=1\nINTERPRETER_PATH_NEW=Name\:python\:EndName\:'
        ) \
        - \
        <(echo '&&&&&') \
     >/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs 
```

现在，让我们逐节看一下以了解它。为了完整起见，我将介绍所有内容，包括我希望您已经知道的那些部分。

```
PYTHONPATH=/my/extra/python/modules \ 
```

这是设置变量`PYTHONPATH`，我希望从上下文中告诉 python 在哪里寻找模块。因为我们在与命令相同的“行”中指定它，所以会发生两件事：

1.  变量自动导出到环境
2.  该变量仅为正在运行的单个命令设置（即：只是“第一个”命令，而不是整个管道，并且它不会在 shell 的环境中供以后的命令使用）

接下来是主命令：

```
 python /my/eclipse/plugins/org.python.pydev_*/PySrc/interpreterInfo.py 2>/dev/null | 
```

这里运行“python”解释器，并传递`interpreterInfo.py`脚本来执行。

这`_*`意味着我们没有指定`org.python.pydev`我们想要的特定版本（假设只会找到一个版本，并且所有版本的行为都相似）。

这`2>/dev/null`意味着标准错误和调试信息通常通过管道传输的任何输出都将被忽略（管道传输到无处）。

现在它的肉：

```
sed '
    s/INS_PATH$//g;
    s/OUT_PATH$//g;
    s/^EXECUTABLE:/Executable\\:/g
' | 
```

这做了三件事。前两个是相似的：`INS_PATH`并且`OUT_PATH`从行的末端移除。接下来，也是您询问的第一部分，`:`字符被替换为`\:`. 为什么双重`\\`如果`\:`是目标？这主要是由于迂腐。虽然`\:`不是有效的转义序列，因此大多数`sed`s 会将其解释为文字`\`标记[Escape Sequence](http://en.wikipedia.org/wiki/Escape_sequence)的开头，因此指定要`sed`输出文字的规范方法`\`是将其指定为`\\`. 因此，对于序列`\:`，它被指定为`\\:`。

每个`/g`替换命令末尾的 表示“全局替换”，即：每次找到匹配项，而不仅仅是第一次。

下一行很简单：

```
tr -d '\n' | 
```

这将删除输出中的所有换行符。如果我理解正确，这会在`\:`一行上生成一个单独的路径列表。

回到可能需要解释的部分：

```
cat \
    <(
        echo -en 'eclipse.preferences.version=1\nINTERPRETER_PATH_NEW=Name\:python\:EndName\:'
    ) \
    - \
    <(echo '&&&&&') \
 >/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs 
```

一次要经历很多事情。让我们总结一下：

```
cat input-one input-two input-n > output 
```

`cat`将多个输入组合（“连接”）为单个输出。这实际上是该`cat`命令的预期用途，尽管您可能会看到它更常用于输出*单个*输入，例如：`cat input-one`.

```
<( some-command ) 
```

运行`some-command`并将其输出重定向到[File Descriptor](http://en.wikipedia.org/wiki/File_descriptor)，其路径 ( `/dev/fd/N`) 被用作`<( ... )`最初所在的上下文中的参数。例如：`cat <( echo foo )`将运行类似于`cat /dev/fd/64`, 和的命令`echo foo`，将输出重定向`echo foo`到文件描述符`64`，用于读取由`cat`. 输出是`foo`，就像`echo`直接运行一样。

现在，将这两件事结合起来：

```
cat <( some-command ) some-input <( some-other-command ) 
```

这会将 的输出`some-command`、 的内容`some-input`和 的输出`some-other-command`组合成一个流。在您正在使用的脚本中，这些都被组合成一个输出文件。

那么实际为此输出构建的内容呢？让我们逐行看一下：

```
<(
    echo -en 'eclipse.preferences.version=1\nINTERPRETER_PATH_NEW=Name\:python\:EndName\:'
) 
```

这将输出文字：

```
eclipse.preferences.version=1
INTERPRETER_PATH_NEW=Name\:python\:EndName\: 
```

`echo -e`表示“解释反斜杠转义序列”，因此`\n`扩展为换行符。`echo -n`意思是“不要用换行符结束输出”，所以接下来发生的都是同一行的一部分。在这种情况下，这意味着接下来连接的任何内容都将成为该`INTERPRETER_PATH_NEW=`行的一部分。

```
- 
```

A`-`是“从标准输入读取”的简写，如果您自己运行，这是默认设置`cat`。许多命令使用这个简写，但对于那些不使用的，另一种指定它的方式是`/dev/stdin`. 它的意思是“读入通过管道传输到该命令的内容”，即：来自 的输出`tr`，其本身默认为从 读取输出`sed`，默认为从 读取输出`python`。

```
<(echo '&&&&&') 
```

这以五个`&`字符和一个换行符结束流。我实际上不知道这是什么原因，所以也许有人可以发表评论以填补我的空白。

```
>/my/workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs 
```

作为最后一步，所有输出都被重定向（通过`>`符号）到一个文件`org.python.pydev.prefs`.

有了对正在发生的事情的全面概述，现在是时候回答您所询问的讨厌的细节了：

**为什么所有的`\`角色？**

好吧，就像我们`\`在 sed 中转义一样，我们也在`:`文件中转义`.prefs`。`\:`在`.prefs`文件中似乎意味着“文字`:`”，就像`\\`在 sed 中指定文字一样`\`。

**`/`人物呢？**

`/`是 UNIX 系统（包括现代 Mac OS，即 OSX）中的目录分隔符。在 Windows 系统上，`\`使用。如上所述，在许多语言中，`\`也用作转义字符，因此要指定文字`\`，您可能需要将其写为`\\`. 这没有硬性规定。一些跨平台语言，意识到这个问题，也允许`/`在 Windows 上用作目录分隔符。

我希望这能解决问题。让我知道是否还有其他需要解释的内容，我将尝试编辑我的答案以添加更多信息。

# r - 在 R 中创建类似 SAS 的库

> ID：12881338
> 
> 赞同：3
> 
> 时间：2012-10-14T10:25:29.923
> 
> 标签：r, sas

在 SAS 中有一种创建库的方法（使用 LIBNAME）。这很有帮助，因为当我们必须进行长时间的数据处理时，我们不会总是更改数据集名称。因此，如果我们想再次使用数据集，而不更改名称，我们可以放入库中。因此，即使数据集名称相同，但由于它们位于不同的库中，我们也可以一起处理它们。

我的问题是 R 中是否有任何此类选项可以创建库（或 R 中的单独文件夹）以便我们可以将数据保存在那里？

这是示例：

假设我有一个数据集“dat1”。我为 var3 总结了 dat1 var1 和 var2 中的变量。

```
proc summary data=dat1 nway missing;
  var var1 var2;
  class var3;
  output out=tmp.dat1 (drop = _freq_ _type_) sum = ;
  run; 
```

然后我将 dat1 与 dat2 合并，这是另一个数据集。dat1 和 dat2 都有公共变量 var3，我将其合并。我再次创建了新的数据集 dat1。

```
proc sql;
   create table dat1 as
   select a.*,b.*
   from dat1 a left join tmp.dat2 b
   on a.var3=b.var3;
  quit; 
```

现在，我在合并后再次汇总数据集 dat1，以检查 var1 和 var 2 的值在合并前后是否保持不变。

```
proc summary data=dat1 nway missing;
  var var1 var2;
  class var3;
  output out=tmp1.dat1 (drop = _freq_ _type_) sum = ;
  run; 
```

R中的等效代码将是

```
dat3<-ddply(dat1,.(var3),summarise,var1=sum(var1,na.rm=TRUE),var2=sum(var2,na.rm=TRUE))

dat1<-sqldf("select a.*,b.* from dat1 a left join dat2 b on a.var3=b.var3")

dat4<-ddply(dat1,.(var3),summarise,var1=sum(var1,na.rm=TRUE),var2=sum(var2,na.rm=TRUE)) 
```

在 SAS 的情况下，我只使用了 2 个数据集名称。但在 R 的情况下，我使用 4 个数据集名称。因此，如果我正在编写 4000 行数据处理代码，有时数据集名称过多会让人不知所措。在 sas 中，与我使用 2 个库 tmp、tmp1 而非默认工作库相同的数据集名称变得很容易。

在 SAS 中，库定义为：

```
LIBNAME tmp "directory_path\folder_name"; 
```

在此文件夹中，将存储 dat1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T11:17:08.383

根据我从 SAS 在线帮助中收集到的信息，SAS 库是一组存储在文件夹中的数据集，可以作为一个单元引用。R 中的等价物是使用以下命令存储您要保存的 R 对象`save`：

```
save(obj1, obj2, etc, file = "stored_objects.rda") 
```

加载对象可以使用`load`.

编辑：我真的不明白为什么有一两个额外的对象是一个很大的问题。但是，如果您想减少对象的 tge 数量，只需将结果放入`list`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T22:52:28.590

SAS 的库有两个不同的方面（似乎）您感兴趣。

*   指定存储数据文件的目录
*   只需指定不同的位置，即可轻松地将分析指向一组不同的同名数据集

按照这些顺序。

回答第一个问题是 R 和 SAS 有不同的数据存储模型。R 将数据存储在内存中，按特定搜索顺序组织在环境中。SAS 将数据存储在磁盘上，数据集的名称对应于指定目录中的文件名（可能在内存中缓存以进行优化，但从概念上讲，这是存储数据的方式）。R 可以使用 将（组）对象存储在磁盘上的文件中，`save()`并使用`load()`. 文件名和目录可以在这些函数调用中指定（因此[Paul's answer](https://stackoverflow.com/a/12881705/892313)）。您可以有多个`.RData`文件，每个文件都包含名为`dat1`、`dat2`等的对象，可以在运行分析之前加载这些文件，并且可以将结果写入（其他）`.RData`文件。

另一种方法是使用一个扩展，它提供由磁盘存储而不是内存支持的数据类型。我没有与他们中的任何人谈论他们在这种情况下工作得如何，但这是一个选择。[编辑：[mnel's answer](https://stackoverflow.com/a/12924639/892313)有一个关于这个想法的详细例子。]

您的第二部分可以通过不同的方式进行。由于 R 使用内存中的数据，答案将集中在安排不同的环境（每个环境可以包含不同但名称相同的数据集）并控制通过搜索路径中的环境访问哪个环境（`attach()`Glen_b[的答案](https://stackoverflow.com/a/12924006/892313)是什么）朝向）。您仍然没有数据的磁盘支持，但这是之前的问题。`detach()`

最后，@joran 的警告是相关的。在 R 中对可能不同（但相关）的数据集执行一组任务的问题的解决方案是编写一个函数来完成这项工作。该函数有参数。在函数中，参数由参数列表中给出的名称引用。当函数被调用时，由函数调用指定的特定数据集被发送给它；函数内部和外部的名称不需要相互关联。关于将多组数据存储在列表中的建议隐含地以这种方式解决问题；依次为列表中的每组数据调用该函数。那么名字就无所谓了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T22:49:20.577

这是使用`SOAR`包和命名环境的示例

引用小插图

> 对象不必总是保存在内存中。函数 save 可用于将光盘上的对象保存在一个文件中，通常带有 .RData 扩展名。然后可以从内存中删除对象，然后使用 load 函数显式调用这些对象。
> 
> SOAR 包提供了将对象存储在磁盘上的简单方法，但以这样一种方式，它们在搜索路径上仍然作为 promise 可见，也就是说，如果再次需要一个对象，它会自动加载到内存中。它使用与包相同的延迟加载机制，但这里提供的功能更加动态和灵活

[阅读整个小插图](http://cran.r-project.org/web/packages/SOAR/vignettes/SOAR.pdf)会很有用

```
library(SOAR)
library(plyr)
library(sqldf)
set.seed(1)
# create some dummy data create a named envirment
tmp <- new.env(parent = .GlobalEnv)
dat1 <- data.frame(var1 = rnorm(50), var2 = sample(50, replace = TRUE), var3 = sample(letters[1:5], 
    50, replace = TRUE))
tmp$dat1 <- ddply(dat1, .(var3), summarise, var1 = sum(var1, na.rm = TRUE), 
    var2 = sum(var2, na.rm = TRUE))
tmp$dat2 <- data.frame(Var3 = sample(letters[1:5], 20, replace = TRUE), Var4 = 1:20)
# store as a SOAR cached object (on disc)
Store(tmp, lib = "tmp")

# replace dat1 within the global enviroment using sqldf create a new
# environment to work in with the correct version of dat1 and dat2
sqlenv <- tmp
sqlenv$dat1 <- dat1

dat1 <- sqldf("select a.*,b.* from dat1 a left join dat2 b on a.var3=b.var3", 
    envir = sqlenv)

# create a new named enviroment tmp1
tmp1 <- new.env(parent = .GlobalEnv)

tmp1$dat1 <- ddply(dat1, .(var3), summarise, var1 = sum(var1, na.rm = TRUE), 
    var2 = sum(var2, na.rm = TRUE))

# store using a SOAR cache
Store(tmp1, lib = "tmp")

tmp1$dat1

##   var3   var1 var2
## 1    a  1.336  378
## 2    b  8.514 1974
## 3    c  5.795  624
## 4    d -8.828  936
## 5    e 20.846 1490

tmp$dat1

##   var3    var1 var2
## 1    a  0.4454  126
## 2    b  1.4190  329
## 3    c  1.9316  208
## 4    d -2.9427  312
## 5    e  4.1691  298 
```

我不确定您是否应该期望`tmp1$dat1`和`tmp$dat1`相同（无论如何，以我为例）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T21:51:24.953

命名环境是实现您想要的效果的多种方式之一。

就个人而言，如果没有很多不同的数据框或列表，我会倾向于以其他方式组织它，例如在数据框或列表中，这取决于您的数据的结构方式。但是，如果每件事都包含许多不同类型的数据和功能，那么环境可能会好得多。[帮助](http://stat.ethz.ch/R-manual/R-devel/library/base/html/environment.html)中对它们进行了描述，并且[r-blogs](http://obeautifulcode.com/R/How-R-Searches-And-Finds-Stuff/)的许多帖子都讨论了它们。

但仔细想想，R-Studio*[项目](http://rstudio.org/docs/using/projects)*可能更接近您思考问题的方式（如果您还没有使用 R-Studio，我强烈推荐它）。看看项目是如何运作的。

# plugins - 将 PHP 记录器脚本绑定到 在 Vim 中

> ID：12881340
> 
> 赞同：1
> 
> 时间：2012-10-14T10:25:33.863
> 
> 标签：plugins, vim, phpdoc

正如这里的答案所建议的：

[VIM 自动插入 PHPdoc](https://stackoverflow.com/questions/7603446/vim-insert-phpdoc-automatically)

我试图绑定`Ctl``p`到 PHP 文档脚本以生成评论。

我在 .vimrc 文件的末尾使用了这些行：

```
" PHP documenter script bound to Control-P
autocmd FileType php inoremap <C-P> <ESC>:call PhpDocSingle()<CR>i
autocmd FileType php nnoremap <C-P> :call PhpDocSingle()<CR>
autocmd FileType php vnoremap <C-P> :call PhpDocRange()<CR> 
```

但是当我按 时`Ctl``p`，光标会转到前一行，并且不会生成注释。

但是，如果我手动执行命令：

```
:call PhpDocSingle() 
```

它工作正常，所以我知道 php-doc.vim 插件已正确安装，问题出在键盘快捷键上。

我已经在我的 .vimrc 文件中搜索是否有任何其他绑定到`Ctl``p`，但我没有找到。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:43:15.910

`<C-P>`并且`<C-p>`不同：您正在将某些内容映射到++`Ctrl`但您正在点击`Shift`+ 。`p``Ctrl``p`

当你点击`Ctrl`++时会发生`Shift`什么`p`？

# ruby-on-rails - Ruby on Rails：在每个模型中使用 id 进行应用范围过滤

> ID：12881349
> 
> 赞同：1
> 
> 时间：2012-10-14T10:26:23.933
> 
> 标签：ruby-on-rails

我正在为俱乐部做这个软件，人们可以在其中登录并添加分数、球员、球队等。现在我当然有很多俱乐部，每个模型都有一个 club_id 列来识别那个俱乐部。有没有比写这样的东西更容易检查当前俱乐部的方法：

`News.where("club_id = ?", @club_id)`

我发现将这个问题抽象得太难以至于我找不到任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:02:36.280

一种方法是为您的模型制作一些基本类：

```
class ClubStuff < ActiveRecord::Base
  self.abstract_class = true # <--- don't forget
  default_scope { where(club_id: Thread.current[:club_id]) }
end 
```

并从中制作模型：

```
class News < ClubStuff 
```

然后：

```
# in ApplicationController
before_filter { Thread.current[:club_id] = params[:club_id] } 
```

我希望你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:58:28.700

好吧，您可以在控制器中编写一些前置过滤器。使用您的`Team`示例：

```
class TeamController < AC
  before_filter :get_club, :only => [ :index ]    # you can limit the filter to methods

  def index
    # because of the before filter you can access club here
    @teams = @club.teams
  end

  # ...

  private
  def get_club
    @club = Club.find(params[:club_id])
  end
end 
```

这种行为也可以移动到模块中。有关过滤器的更多信息，请参见[此处](http://guides.rubyonrails.org/action_controller_overview.html#filters)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:46:08.430

当 RoR 中的每个模型都有默认的 id 属性时，为什么要创建一个额外的 id（club_id）？您可以使用此代码

> 新闻.find(id)。

如果您仍然坚持，那么替代代码是：

> News.find_by_club_id(@club_id)

# winapi - WinAPI如何检测复制发生在哪个控件中

> ID：12881350
> 
> 赞同：3
> 
> 时间：2012-10-14T10:26:30.657
> 
> 标签：winapi, copy

我想知道如何在我的 win32 应用程序中识别复制发生在哪个控件中。例如在 EditBox、RichEdit 等中。

为了弄清楚复制是发生在我的应用程序中还是在它之外，我使用了以下方法：

```
//global variables

HWND hWnd; 
DWORD ProcId; 
HWND nextHandle; 
DWORD currentID;

//then I call two functions on form create

currentID=GetCurrentProcessId();
nextHandle = SetClipboardViewer(Handle); 

//then on  WM_DRAWCLIPBOARD message I call 

hWnd = GetClipboardOwner();
GetWindowThreadProcessId(hWnd,&ProcId);

// functions and checking by IDs whether
// the copying took place in or outside my application 

if(lpdwProcessId==currentID) {...} 
```

它工作正常，但这不是如何在 whitch 控制（在我的应用程序中）中检测复制发生的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:28:35.577

好吧，我认为您可以使用[`GetClipboardOwner`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649041.aspx). 这不是 100% 可靠的。剪贴板可能包含数据，并且此函数可能返回`NULL`. 首先，剪贴板可能被控件以外的东西填充，但我希望剪贴板有很多方法可以充满数据，并且没有所有者窗口。但只要您的应用程序没有对剪贴板做任何不标准的事情，我认为它会为您完成这项工作。

如果您想 100% 确定应用程序中的哪个控件用数据填充了剪贴板，请自行跟踪最后一个填充剪贴板的控件。

# apache - 如何调试 htaccess 进程

> ID：12881356
> 
> 赞同：0
> 
> 时间：2012-10-14T10:26:55.647
> 
> 标签：apache, .htaccess, magento, logging, trace

我的 magento 商店在 htaccess 中有这个：

```
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks
RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
RewriteRule .* - [L,R=405] 
```

我想记录我的 htaccess 进程中发生的事情。我尝试添加此代码：

```
RewriteLog "/var/log/apache2/rewrite.log"
RewriteLogLevel 2 
```

但是当我使用 RewriteLog 行运行它时，我得到一个“内部服务器错误”或一个 Not Found 错误。

任何提示/帮助？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:40:16.827

如前所述，您无法从 htaccess 文件中打开重写日志，并且由于您在 GoDaddy 的围墙花园中，因此您无能为力。

> 任何提示/帮助？

创建离线测试服务器：

1.  找一台 linux 机器或在你的 windows 机器上的 virtualbox 中安装一台。
2.  安装阿帕奇
3.  安装 php 或任何其他模块 magento 需要
4.  将您的整个网站移动到您的`/var/www/localhost/htdocs`目录（或文档根目录的任何位置）
5.  在apache的配置中，开启rewrite log
6.  去`http://localhost/your-site`看看日志说什么。

# android - Android 2.1 中标准搜索的问题。在另一个进程中运行？

> ID：12881358
> 
> 赞同：0
> 
> 时间：2012-10-14T10:27:19.717
> 
> 标签：android, android-2.1-eclair, android-searchmanager

我的应用程序使用[标准搜索机制](http://developer.android.com/guide/topics/search/search-dialog.html)（使用可搜索界面）并且在所有版本>2.1 中都能正常工作

在 <3 我使用搜索对话框，在 >=3 我使用 SearchWidget 并且一切正常。问题出在 2.1 中，我`CrossProcessCursorException`从我那里得到`ContentProvider`：

`java.lang.UnsupportedOperationException: Only CrossProcessCursor cursors are supported across process for now`

似乎搜索对话框在 2.1 中的另一个进程中运行？有没有办法解决这个问题？或者我被迫在我的自定义扩展中实现 CrossProcessCursor `CusorWrapper`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:54:32.680

最后，我没有找到任何关于为什么在 Android 2.1 中需要使用 CrossProcessCursor 的信息。

但是查看 2.1 的 SearchDictionary 示例，它使用 MatrixCursor，而对于较新的 android 版本，它使用来自 DB 的直接光标。然后我假设您只是需要它，因为它以这种方式工作。

我尝试了两种都有效的替代方案：

1.  使用 MatrixCursor 映射结果
2.  实现一个 CrossProcessCursorWrapperCompat 从较新版本的 CrossProcessCursorWrapper 获取代码并使其适应 2.1

# android - 如何同时检索用户信息和大图像

> ID：12881359
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:27:21.557
> 
> 标签：android, facebook, facebook-fql, inner-join

对于 Android 应用程序，我正在尝试使用 FQL 在 Facebook 上获取特定用户（使用其用户 ID）的一些信息，并获得用户的高质量图像。

这意味着我必须同时使用“用户”表和“照片”表。

目前，查询是：

```
SELECT first_name, last_name, status, current_location, uid, pic_square, pic_big, website, work, email, contact_email, current_location, sex, birthday_date 
FROM user 
WHERE uid in (%s) order by name

SELECT src_big,owner 
FROM photo 
WHERE aid IN (SELECT aid FROM album WHERE owner=%s AND type=\"profile\") LIMIT 1 
```

第一个返回指定用户的所有信息，第二个返回`src_big`单个用户的信息。是否可以进行内部联接并在单个查询中同时执行它们？

编辑：

FQL 似乎仍然不可能进行内部连接。但是，我仍然想问一些关于此的问题：如何更改第二个 FQL 语句以显示多个结果，如第一个 FQL 语句中使用的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:04:45.470

是的，FQL 多查询不能让您在结果中为每个用户选择一项。您的第二个查询只会给您一个项目。您需要在 FQL 中从所有用户那里获取所有照片，然后在您的应用程序中过滤它们，或者对每个用户进行单独的 API 调用。

您可以使用 Graph API 使用[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)来执行此操作。您的查询端点将是：

```
 /?ids=UID_1,UID_2,...,UID_n&fields=name,id,...,photo.limit(1) 
```

由于您使用的是`fields`参数，因此您需要在结果中单独声明所需的每个字段。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-14T10:51:04.853

当然可以，加入两个表，使用 user.uid = photo.owner(if correct) 作为绑定条件。

# objective-c - 当我们将 UITableView 插入到 scrollView 时，如何禁用 UITableView 中的“滚动”行为？

> ID：12881361
> 
> 赞同：1
> 
> 时间：2012-10-14T10:27:29.627
> 
> 标签：objective-c, xcode4.5

我想将 UITableView 放在滚动视图中。

我想要完整的 UITableView 那里。

因此，我不希望 UITableView 独立地“滚动”。我希望 UITableView 完全显示在滚动视图中。

对于我的情况，你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:47:29.333

您可以在表格视图上禁用滚动：`tableView.scrollEnabled = NO;`

从技术上讲，您的表格视图是一个滚动视图，因此它的所有属性都可用。

# objective-c - 在 C 或 Objective-C 中获取目标文件所属的静态库名称的最佳方法是什么？

> ID：12881363
> 
> 赞同：1
> 
> 时间：2012-10-14T10:28:00.903
> 
> 标签：objective-c, c, static-libraries

我正在创建一些包含 C 或 Objective-C 代码的静态库（MyLib、OtherLib），并且我希望每个模块都能够访问静态库的名称。

我可以做一个

```
const char* mylibname = "MyLib"; 
```

并在任何地方使用它。但是，我想要一个更方便的方法，每个库中的每个文件都可以通过 constant 访问其库`currentlibname`。所以当一个文件在 MyLib 中时，`currentlibname`它的值为“MyLib”，当它在 OtherLib 中时，它的值为“OtherLib”。

关于最方便的解决方案的任何想法？理想情况下，所有的魔法都应该在一个地方，除了包含声明的内容之外，不需要调整每个文件`mylibname`。

问候， 约臣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:34:09.710

这显然取决于操作系统、编译器和构建器。

如果你在 Linux 上有动态库，你可以在运行时检索一些信息，也许是通过`/proc/self/maps`，也许`dladdr`是（甚至可能是[返回地址 builtins](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)）。

我的建议是在每个库的构建过程中定义一个预处理器符号，也许`CFLAGS += -DTHIS_LIBRARY_NAME=MyLib`在你的`Makefile`和`mylib.h`使用它的东西中。对于 CI 可能会建议放入类似的`mylib.h`东西

```
#define QUOTE_NAME(N) #N
static inline const char *this_library_name () 
{ return QUOTE_NAME(THIS_LIBRARY_NAME); } 
```

顺便说一句，您甚至可以将上述代码放在您的库主头文件包含的一个通用单个头文件中。

但我有点惊讶你这么问。更好的方法可能是为你的库版本提供一个 API，看看[gtk 对特性测试做了](http://developer.gnome.org/gtk3/stable/gtk3-Feature-Test-Macros.html)什么。

# ruby-on-rails - Windows 7中的Ruby on rails安装错误

> ID：12881367
> 
> 赞同：1
> 
> 时间：2012-10-14T10:28:27.347
> 
> 标签：ruby-on-rails

rails new my_app 抛出以下错误

`An error occurred while installing rake 0.9.2.2 and bundle can not continue. Make sure that gem install rake -v '0.9.2.2' succeeds before bundling.`

我在窗口 7 中安装了最新版本的 Ruby on Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:33:31.287

用于`rails new my_project`生成您的项目。还运行`rails -v`以确保安装了导轨

# php - 身份验证不起作用

> ID：12881374
> 
> 赞同：2
> 
> 时间：2012-10-14T10:29:11.870
> 
> 标签：php, security, symfony

我已经使用 http_basic 设置了一个安全区域。我可以看到带有用户名和密码字段的框，但即使我输入了正确的信息，我也会一次又一次地得到这个框，就好像我使用了错误的一样。我的security.yml：

```
security:
    firewalls:
        secured_area:
            pattern:    ^/
            anonymous: ~
            http_basic:
                realm: "Secured Demo Area"

access_control:
    - { path: ^/fournisseur, roles: ROLE_ADMIN, requires_channel: https }

providers:
    in_memory:
        memory:
            users:
                ryan:  { password: ryanpass, roles: 'ROLE_USER' }
                admin: { password: kitten, roles: 'ROLE_ADMIN' } 
```

PS：我在整个网站上都使用 SSL 证书。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:13:10.743

配置安全选项可能是一项艰巨的任务。为了让您开始，请务必检查在 Symfony2 中配置安全性时最常见的陷阱：http: [//symfony.com/doc/current/book/security.html#book-security-common-pitfalls](http://symfony.com/doc/current/book/security.html#book-security-common-pitfalls)

希望这能让你朝着正确的方向前进。

# iphone - 选择另一个单元格后如何设置自定义单元格的图像？

> ID：12881376
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:29:21.790
> 
> 标签：iphone, uitableview

我正在开发一个应用程序，在该应用程序中，我根据某些标准为单元格设置了一些图像。

选择自定义单元格后，我正在更改它的图像，但是当我尝试选择另一个自定义单元格时。

前一个自定义单元格的图像保持选中状态，新选择的单元格也保持选中状态。

我想要的是以前选择的自定义单元格的图像应该设置为我最初给出的默认图像。

请帮助我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:51:52.430

将您的标准放入`cellForRowAtIndexPath:`方法中，并且每次更新您选择的单元格时，可能会在`didSelectRowAtIndexPath:`make 中使`[self.tableView reloadData]`tableView 重新加载数据并再次调用它的委托方法。希望有帮助。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if(requirementMet){ // if your criteria where met
      cell.imageView.image = [UIImage imageNamed:@"specialImage.png"];
    } else{
      cell.imageView.image = [UIImage imageNamed:@"defaultCellImage.png"];
    }

 return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    //do your select things here
  [self.tableView reloadData];

} 
```

# android - Android EditText 文件格式

> ID：12881381
> 
> 赞同：0
> 
> 时间：2012-10-14T10:29:39.637
> 
> 标签：android, input, android-edittext

我在我的应用程序中编辑了文本，它只捕获十进制数字。我已将输入类型设置为 DECIMAL_NUMBERS。

问题是，如果用户输入例如 0009 我想防止这种情况发生，并在开始时删除零。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:38:42.070

覆盖`onTextChanged (CharSequence text, int start, int lengthBefore, int lengthAfter)`方法以更正用户输入并使用添加它`addTextChangedListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:49:09.647

这就是解决方案。肿瘤坏死因子。:)

```
@Override
public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            if (start == 0 && s.toString().equals("0"))
                editText.setText("");
        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:57:38.433

您可以通过字符串的`regex`and函数摆脱零`replaceFirst``replaceFirst("^0+(?!$)", "")`

您可以在这里尝试正则表达式：[http ://regexr.com?32f1o](http://regexr.com?32f1o)

# objective-c - 在 SingleTouch-View 中，第二根手指触发 touchesMoved

> ID：12881383
> 
> 赞同：2
> 
> 时间：2012-10-14T10:30:00.373
> 
> 标签：objective-c, ios, ipad, touch

我想为儿童创建一个小型绘图应用程序。我不想实现多点触控绘图应用程序，所以我将绘图视图的 multipleTouchEnabled 设置为 false。

到目前为止，绘图工作正常，但是当孩子用第二根手指触摸视图时，视图的 touchesMoved-eventhandler 被调用：

```
- (void) touchesMoved: (NSSet *) touches withEvent: (UIEvent *)event{
        UITouch *touch = [[event allTouches] anyObject];
        CGPoint touchPoint = [touch locationInView:self];

    //Draw a line from the last touchPoint to here…

} 
```

通过这种方式，当孩子用第二根手指触摸屏幕时，会从第一根手指到第二根手指画一条线，这是无意的。

有什么办法可以防止这种情况发生吗？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:18:00.057

我也有这个问题。你要么必须

A) 进行检查，只允许触摸移动一定距离。

B）当检测到第二次触摸时取消所有触摸（重新启用multipleTouch）

否则，单点触摸模式下的第二根手指看起来与系统的移动触摸相同。

# python - 返回要输入到 format() 的参数元组

> ID：12881384
> 
> 赞同：0
> 
> 时间：2012-10-14T10:30:06.363
> 
> 标签：python

我该如何解决？

```
return 'loader:\n {}' % ''.join('{}:{}\n'.format(*(key, value) for key, value in slownik.iteritems())) 
```

SyntaxError：无效的语法

这应该在一行中；-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:34:35.867

去掉'%'，它是旧式的字符串格式化程序；放弃生成器理解，因为`iteritems`返回您需要进行格式化的内容；最后，放弃 double `format`：

```
'loader:\n {0}:{1}\n'.format(*slownik.iteritems()) 
```

**编辑**：好的，现在我知道你想做什么了。

```
'loader:\n' + ''.join(' {0}:{1}\n'.format(k, v)
                      for k, v in slownik.iteritems()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:43:04.550

```
'loader: \n '+''.join('{0}:{1}\n'.format(k,v) for k,v in slownik.iteritems()) 
```

# mobiscroll - 最大日期在 v2.1 beta 中默认为 2013

> ID：12881387
> 
> 赞同：0
> 
> 时间：2012-10-14T10:30:25.007
> 
> 标签：mobiscroll

使用以下方法创建一个 mobiscroll 实例，当我滚动年轮时，它会从 2013 年包装到 1912 年。这是一个错误还是我做错了什么？谢谢

```
dateInput.scroller({
    preset: 'date',
    dateFormat: 'dd/mm/yy',
    dateOrder: 'ddmmyy',
    theme: 'default',
    display: screenWidth < 400 ? 'modal' : 'bubble',
    mode: 'mixed',
    headerText: label + ' date  {value}'
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:07:50.817

默认情况下，开始年等于当年减去 100 年，结束年是当年加 1。文档显示错误的数字！它已被纠正！

# c# - 在 LoadControlState 之后，RaisePostBackEvent 没有第二次触发

> ID：12881393
> 
> 赞同：0
> 
> 时间：2012-10-14T10:31:44.033
> 
> 标签：c#, asp.net

我正在尝试使用输入字段和提交按钮创建一些控件。当我将此控件放在页面上并设置`Click`事件处理程序时，它只会触发一次，即第一次单击提交按钮时。但是当我第二次单击该按钮时，`RaisePostBackEvent`不会触发。我做错了什么？

```
public class AuthControl : Control, IPostBackEventHandler
{
    public int FailCount { get; set; }

    public AuthControl()
    {
    }

    public string LoginKey { get { return "login"; }}

    public string PasswordKey { get { return "password"; } }

    protected override void Render(HtmlTextWriter writer)
    {
        // <div>
        writer.AddAttribute(HtmlTextWriterAttribute.Class, "field");
        writer.RenderBeginTag(HtmlTextWriterTag.Div);

        // <input type="text" name="login" placeholder="login" />
        writer.AddAttribute(HtmlTextWriterAttribute.Type, "text");
        writer.AddAttribute(HtmlTextWriterAttribute.Name, LoginKey);
        writer.AddAttribute(HtmlTextWriterAttribute.Value, Page.Request.Form[LoginKey]);
        writer.AddAttribute("placeholder", LoginKey);
        writer.RenderBeginTag(HtmlTextWriterTag.Input);
        writer.RenderEndTag();

        // </div>
        writer.RenderEndTag();

        // <div>
        writer.AddAttribute(HtmlTextWriterAttribute.Class, "field");
        writer.RenderBeginTag(HtmlTextWriterTag.Div);

        // <input type="password" name="password" placeholder="password" />
        writer.AddAttribute(HtmlTextWriterAttribute.Type, "password");
        writer.AddAttribute(HtmlTextWriterAttribute.Name, PasswordKey);
        writer.AddAttribute(HtmlTextWriterAttribute.Value, Page.Request.Form[PasswordKey]);
        writer.AddAttribute("placeholder", PasswordKey);
        writer.RenderBeginTag(HtmlTextWriterTag.Input);
        writer.RenderEndTag();

        // </div>
        writer.RenderEndTag();

        // <div>
        writer.RenderBeginTag(HtmlTextWriterTag.Div);

        // <input type="submit" />
        writer.AddAttribute(HtmlTextWriterAttribute.Name, UniqueID);
        writer.AddAttribute(HtmlTextWriterAttribute.Type, "submit");
        writer.AddAttribute(HtmlTextWriterAttribute.Value, "Authorize");

        // </div>
        writer.RenderEndTag();

        if (FailCount > 0)
        {
            // <div>
            writer.RenderBeginTag(HtmlTextWriterTag.Div);

            // <span>
            writer.RenderBeginTag(HtmlTextWriterTag.Span);
            writer.Write("Осталось попыток: {0}", 3 - FailCount);

            // </span>
            writer.RenderEndTag();

            // </div>
            writer.RenderEndTag();
        }

        base.Render(writer);
    }

    protected override void OnInit(EventArgs e)
    {
        Page.RegisterRequiresControlState(this);
        base.OnInit(e);
    }

    protected override object SaveControlState()
    {
        object baseState = base.SaveControlState();

        object currentState = new Pair(baseState, FailCount);

        return currentState;
    }

    protected override void LoadControlState(object savedState)
    {
        var stateLastRequest = (Pair)savedState;

        base.LoadControlState(stateLastRequest.First);

        FailCount = (int)stateLastRequest.Second + 1;
    }

    public event OnClickEventHandler Click;

    public void RaisePostBackEvent(string eventArgument)
    {
        if (Click != null)
        {
            Click(this, EventArgs.Empty);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:58:21.397

对不起，是我的错。在添加控件的页面上有另一个按钮，并且未添加 Render 方法中的提交按钮（我没有添加`writer.RenderBeginTag(HtmlTextWriterTag.Input); writer.RenderEndTag();`。这就是为什么我单击另一个按钮并且控制事件不会触发。

# c++ - 初始化结构值

> ID：12881400
> 
> 赞同：0
> 
> 时间：2012-10-14T10:32:45.370
> 
> 标签：c++, struct, initialization

> **可能重复：**
> [寻找一种重新初始化结构的简单方法](https://stackoverflow.com/questions/6684968/looking-for-an-easy-way-to-reinitialize-a-struct)

我实际上不知道我的问题叫什么，所以我没有太多运气来寻找解决方案。

我想将结构初始化为现有变量。

```
struct s { int i; };
s inst = { 7 }; // valid
inst = { 9 }; // invalid 
```

我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:34:16.607

根据定义，您只能初始化一次实例。一旦一个对象被初始化，你所能做的就是改变它的状态。在您的示例中，假设您要更改对象的状态以`inst`使其数据成员保存 value `9`，您可以分配给`s`对象的“i”数据成员：

```
inst.i = 9; 
```

另一种选择是为您分配一个临时`s`实例。临时是用它的数据成员保存值构造的`9`：

```
inst = s{9}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:37:52.343

首先，您可以默认初始化您的对象，然后将其分配给成员：

```
s inst;
inst.i = 7; 
```

虽然这不是技术上的初始化。如果你的结构有一个用户定义的构造函数，你可以用它来初始化你的成员。像这样

```
struct s
{
    s(int i) :i(i) {}
    int i;
};

s inst(7); 
```

但是，如果您的结构是一个聚合（即没有用户定义的构造函数、虚函数、基或非公共非静态数据成员），您可以用大括号初始化它的成员。在你的情况下`s`是一个聚合结构。

```
s inst = {7}; 
```

要阅读聚合的完整定义及其用法，[请参阅我的这个常见问题解答](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)

# cmake - 使用 CMake 链接到尚未构建的库

> ID：12881406
> 
> 赞同：6
> 
> 时间：2012-10-14T10:33:51.067
> 
> 标签：cmake

我正在构建一个项目，其最终输出是一个静态库，我的基于 CMake 的构建系统包含两个子目录 - Src 和 Tests - 测试构建在其中生成可执行文件并将其链接到构建的库来自 src。

我的问题是，如果要继续没有任何错误，测试构建需要该库已经存在。有没有办法让 CMake 了解在构建测试时该库将存在，还是我必须在单独的步骤中执行这些操作？

我的 CMakeLists.txt 文件如下：

根文件：

```
cmake_minimum_required( VERSION 2.8 )
project( mylib )
add_subdirectory( Src )
add_subdirectory( Tests ) 
```

源文件：

```
file( GLOB MYLIB_SOURCES *.cpp )
add_library( mylib ${MYLIB_SOURCES} ) 
```

测试文件：

```
file( GLOB MYLIB_TESTS *.cpp )
add_executable( tests ${MYLIB_TESTS} )

find_package( GTest REQUIRED )
find_library( LIB_MYLIB NAMES mylib PATHS "${CMAKE_SOURCE_DIR}/Build/Src" )

include_directories( ../Src )
include_directories( ${GTEST_INCLUDE_DIRECTORIES} )

target_link_libraries( tests ${LIB_MYLIB} ${GTEST_LIBRARIES} pthread ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:50:02.597

CMake 应该能够自动找出 Src 和 Tests 之间的依赖关系，当然前提是您只在根 CMakeLists.txt 上调用 CMake。你真的不需要 find_library。

所以，我会保持你的 Src CMakeLists.txt 如下：为了增加“封装”，你可以在那里设置“MyLib_INCLUDE_DIRS”并强制它进入缓存：

```
project( MyLib )
file( GLOB MYLIB_SOURCES *.cpp )
add_library( mylib ${MYLIB_SOURCES} )
# I do not know
set( mylib_INCLUDE_DIRS ${MyLib_SOURCE_DIR} CACHE STRING "Include-directories for MyLib" FORCE ) 
```

并重写您的测试 CMakeLists.txt：

```
project( MyTests )
file( GLOB MYLIB_TESTS *.cpp )
add_executable( tests ${MYLIB_TESTS} )

find_package( GTest REQUIRED )
include_directories( ${mylib_INCLUDE_DIRS} )
include_directories( ${GTEST_INCLUDE_DIRECTORIES} )

target_link_libraries( tests mylib ${GTEST_LIBRARIES} pthread ) 
```

如果您只想构建“测试”，我建议您在根 CMakeLists.txt 上调用 CMake，然后进入测试目录并调用“make”或“msbuild”。

# java - 未调用paintComponent

> ID：12881415
> 
> 赞同：1
> 
> 时间：2012-10-14T10:34:54.483
> 
> 标签：java, swing, user-interface, awt

此处的代码应创建一个窗口，然后在其上绘制一个多边形。

```
import java.awt.*;
import javax.swing.*;

public class gui extends JComponent {
  gui(String title){
    JPanel pane = new JPanel();
    JFrame frame = new JFrame(title);
    Container con = frame.getContentPane();
    con.add(pane);
    frame.setBounds(100,100,500,500);
    frame.setVisible(true);
  }
  public static void main(String[] args){
    gui myGUI = new gui("test");
    new Drawer();
    repaint();
  }
}
class Drawer extends JComponent {
  public Drawer() {
    System.out.println("drawer");
    repaint();
  }
  public void paintComponent(Graphics g) {
    super.paintComponent(g);     
    System.out.println("drawerpC");  

    Point p1 = new Point(400, 100);
    Point p2 = new Point(100, 300);
    Point p3 = new Point(200, 400);

    int[] xs = { p1.x, p2.x, p3.x };
    int[] ys = { p1.y, p2.y, p3.y };
    Polygon triangle = new Polygon(xs, ys, xs.length);

    g.setColor(new Color(255,255,255));
    g.fillPolygon(triangle);
  }  
} 
```

窗口已创建，但`paintComponent()`未被调用。

`repaint()`在`public Drawer()`似乎什么都不做。

我怎么打电话`paintComponent()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:38:49.057

您需要将`Drawer`组件添加到您的`JFrame`：

```
Drawer drawer = new Drawer();
con.add(drawer); 
```

无需显式调用`paintComponent`. `repaint()`此外，不需要调用`Drawer`组件。

以上内容取代了您`pane` `JPanel`，因此您可能需要重新考虑框架的布局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T10:39:26.637

您创建了一个新的`JComponent`名为`Drawer`，它**自己**绘制。因此，您必须将它的一个实例添加到您的框架中。

```
Drawer drawer = new Drawer();
con.add(drawer); 
```

`repaint()`如果您不更改组件上绘制的内容，则不需要手动调用。Swing 框架会为您调用它，例如当窗口大小发生变化时。

此外，类名应以大写开头。

# android - 如何在 Android 上使用 TextWatcher 处理 Enter 键

> ID：12881418
> 
> 赞同：11
> 
> 时间：2012-10-14T10:35:23.540
> 
> 标签：android, android-edittext, keylistener, textwatcher

我正在使用安卓系统。以前我用来`onKeyListener`处理关键事件的特定操作。

但是，这种方式似乎并不能解决我的问题，因为一旦我为我的`EditText`. 在阅读了 SO 中的一些主题之后，我知道我应该改用 TextWatcher，但我仍然想知道如何处理`ENTER`内部的关键事件，因为提供的参数只有`CharSequence`,`Editable`等。我没有找到任何`keyCode`参数。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-04T04:28:39.930

试试这个

```
@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    if (s.length()>0 && s.subSequence(s.length()-1, s.length()).toString().equalsIgnoreCase("\n")) {
        //enter pressed
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T10:42:11.643

试试这个

```
protected View.OnKeyListener onEnter = new View.OnKeyListener() {

    @Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if ((event.getAction() == KeyEvent.ACTION_DOWN)
                && (keyCode == KeyEvent.KEYCODE_ENTER)) {
            //here do what you want
        }
        return false; // very important
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-15T08:53:57.250

我认为这是更好的解决方案，因为您可以在 EditText 字段的任何位置按“Enter”，而不仅仅是在行尾。

```
 edittext.addTextChangedListener(new TextWatcher() {
        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int st, int ct,
                                      int af) {
        }

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (s.length() < 1 || start >= s.length() || start < 0)
                return;

            // If it was Enter
            if (s.subSequence(start, start + 1).toString().equalsIgnoreCase("\n")) {

                // Change text to show without '\n'
                String s_text = start > 0 ? s.subSequence(0, start).toString() : "";
                s_text += start < s.length() ? s.subSequence(start + 1, s.length()).toString() : "";
                edittext.setText(s_text);

                // Move cursor to the end of the line
                edittext.setSelection(s_text.length());
            }
        }
    }); 
```

# javascript - 我的 Javascript 删除代码不起作用。错误“TypeError：checkBox 未定义@javascripts/js/delete.js:5”

> ID：12881421
> 
> 赞同：0
> 
> 时间：2012-10-14T10:35:38.627
> 
> 标签：javascript, html, forms

我不知道为什么这不起作用，它上周工作正常，但现在不行了。我想我一定是错误地改变了一些东西，但是在检查了整个事情之后，我什么也找不到。所以，我现在想知道我的代码是否一开始就不是很好。这是`delete.js`文件：

```
function deleterecord(form)
    {

    var checkBox = document.edit.checkbox;
    var lenBox = checkBox.length;
    var foundBox = false;

    while( lenBox--> 0 )
        {
            if( checkBox[lenBox].checked === true )
                {
                    foundBox = true;
                    break;
                }
        }

    if( !foundBox )
        {
        alert("Please select a record to delete");
        return;
        }

    var r=confirm("Once deleted, these records are gone forever.\n\n Are you SURE you want to proceed? ");
    if (r==true)
        {
        form.submit();
        }
    else
        {
        alert("Phew! That was close!\n\n No records were deleted.");
        window.location.reload(true);
        }
    return;
    } 
```

...这是 html 表单：

```
<form action="process_delete.php" method="post" id="edit" name="edit">
<table cellpadding="4px" cellspacing="2px" border="1">

    <tr align="center">
    <td>Aircraft Reg</td>
    <td>Date Installed</td>
    <td>Prefix</td>
    <td>Part Number</td>
    <td>Flight Control</td>
    <td>Lat Position</td>
    <td>Long Position</td>
    <td>Vert Position</td>
    <td>Location</td>
    <td>Material</td>
    <td>OEM/PMA</td>
    <td>Select</td> 
    </tr>

    $result = mysql_query("SELECT * FROM installed $filter ORDER BY aircraft_reg , part_number, date_installed ASC");
    $pagerow = mysql_num_rows($result);
        if ($pagerow > 0 ) 
            {
            while($row = mysql_fetch_array($result))
                {
                echo "<tr>";
                echo "<td>" . $row['aircraft_reg'] . "</td>";
                echo "<td>" . $row['date_installed'] . "</td>";
                echo "<td>" . $row['prefix'] . "</td>";
                echo "<td>" . $row['part_number'] . "</td>";
                echo "<td>" . $row['flight_control'] . "</td>";
                echo "<td>" . $row['lat_position'] . "</td>";
                echo "<td>" . $row['long_position'] . "</td>";
                echo "<td>" . $row['vert_position'] . "</td>";
                echo "<td>" . $row['location'] . "</td>";
                echo "<td>" . $row['material'] . "</td>";
                echo "<td>" . $row['oempma'] . "</td>";
                echo "<td align=\"center\"><input type=\"checkbox\" selected=\"\" id=\"checkbox\" name=\"check_list[]\" value=\"" . $row['id'] . "\"></td>";
                echo "</tr>";
                }
            echo "<tr align=\"center\">";
            echo "<td colspan=\"12\"><input type=\"button\" value=\"Delete Selected\"  style=\"width:150px; height:30px;\" onClick=\"deleterecord(form)\"></td>";
            echo "</tr>";
            }
        else
            {
            echo "<tr><td align=\"center\" colspan=\"12\"><h2>No Records To Display</h2></td></tr>";
            }   
    </table>

</form> 
```

我尝试了不同的变体，`document.edit.checkbox;`例如`document.getElementById["edit"].checkbox;`or`document.getElementById["checkbox"];`但我无法让它工作。如果有帮助，这是一个[jsfiddle](http://jsfiddle.net/FoxRocks/hvjZH/)，我删除了 php 位并输入了一些示例值。您可能会说我对 Javascript 很陌生，但我正在尽力而为，非常感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:40:59.960

您想循环遍历所有复选框元素，因此您需要按名称获取它们：

```
var checkBox = document.getElementsByName('check_list[]'); 
```

这是更新的[小提琴](http://jsfiddle.net/hvjZH/1/)

# javascript - Mechanize + Python：如何在简单的 javascript 中跟踪链接？

> ID：12881423
> 
> 赞同：1
> 
> 时间：2012-10-14T10:36:01.783
> 
> 标签：javascript, python, mechanize, referer

简短：如何使用 python Mechanize 执行/模拟 javascript 重定向？

```
location.href="http://www.site2.com/"; 
```

我制作了一个带有 mechanize 模块的 python 脚本，它在页面中查找链接并遵循它。

问题出在一个特定的网站上，当我这样做时

```
br.follow_link("http://www.address1.com") 
```

他将我重定向到这个简单的页面：

```
<script language="JavaScript">{                                                                                         
    location.href="http://www.site2.com/";                                                                                           
    self.focus();                                                                                                                   
    }</script> 
```

现在，如果我这样做：

```
br = mechanize.Browser(factory=mechanize.RobustFactory())

... #other code

br.follow_link("http://www.address1.com") 
for link in br.links():   
br.follow_link(link)
print link 
```

它不打印任何东西，这意味着该页面中没有链接。但是如果我手动解析页面并执行：

```
br.open("http://www.site2.com") 
```

Site2 无法识别我来自“www.address1.com”，并且该脚本无法正常工作！

抱歉，如果这只是一个新手问题，请提前感谢您！

ps 我有 br.set_handle_referer(True)

编辑：更多信息：检查与 Fiddler2 的链接，它看起来像：

> GET [http://www.site2.com/](http://www.site2.com/) HTTP/1.1 主机：www.site2.com 连接：keep-alive 用户代理：Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome /22.0.1229.94 Safari/537.4 Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Referer: [http://www.address1.com](http://www.address1.com) Accept-Encoding: gzip,deflate ,sdch Accept-Language: it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4
> Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q =0.3 Cookie：PHPSESSID=6e161axxxxxxxxxxx；用户=我的用户名；
> 通过=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx；ip=79.xx.xx.xx；
> 代理=a220243a8b8f83de64c6204a5ef7b6eb; __utma=154746788.943755841.1348303404.1350232016.1350241320.43；__utmb=154746788.12.10.1350241320; __utmc=154999999; __utmz=154746788.134999998.99.6.utmcsr=google|utmccn=(有机)|utmcmd=有机|utmctr=%something%something%

所以这似乎是一个cookie问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:37:38.530

Mechanize 无法处理 JavaScript，因为它无法解释它，请尝试手动解析您的站点并将此链接传递给`br.follow_link`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T22:31:12.150

我解决了！这样：

```
 cj = cookielib.LWPCookieJar()
    br.set_cookiejar(cj)

    ...

    br.follow_link("www.address1.com")
    refe= br.geturl()
    req = urllib2.Request(url='www.site2.com')
    req.add_header('Referer', refe)
    opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj) )
    f = opener.open(req) 
    htm = f.read()
    print "\n\n", htm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T10:48:23.223

您可以在发出请求之前明确设置 HTTP 引荐来源网址

```
br.addheaders = [('Referer', 'http://alpha.com')]
br.open("http://beta.com") 
```

在令人惊讶的难以找到官方文档中的更多详细信息 [http://wwwsearch.sourceforge.net/mechanize/doc.html](http://wwwsearch.sourceforge.net/mechanize/doc.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T19:02:48.460

怎么样

```
br.open("http://alpha.com") 

br.follow_link("http://beta.com") 
```

如果您`br_follow_link`希望使用上一页设置 HTTP 引荐来源网址。而如果你这样做`br.open`就像打开一个新窗口一样，它不会设置 HTTP 引荐来源网址头。

* * *

**编辑**. 好的，它看起来`.follow_link`不接受字符串，而是接受一个`mechanize.Link`带有属性的特殊对象`.absolute_url`。你可以假装那个。

```
>>> class Fake:
...     pass
...
>>> x = Fake()
>>> x.absolute_url="http://stackoverflow.com"
>>> br.follow_link(x)
<response_seek_wrapper at 0x2937af8 whose wrapped object = <closeable_response at 0x2937f08 whose fp = <socket._fileobject object at 0x02934970>>>
>>> br.title()
'Stack Overflow' 
```

`mechanize.Link`或者制作一个不那么老套但更乏味的真实作品。

# apache - apache中的简单重写不起作用

> ID：12881429
> 
> 赞同：0
> 
> 时间：2012-10-14T10:36:37.997
> 
> 标签：apache, mod-rewrite

这让我发疯......我正在尝试在 apache 中设置一个简单的重定向（到移动站点），但它不起作用。该模块已启用，我将代码添加到 /etc/apache2/sites-available 中的虚拟主机主配置。

这是代码，它只是没有做任何事情......（我注释掉了条件以查看它是否有帮助 - 它没有）：

```
<IfModule mod_rewrite.c>
RewriteEngine On
#RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^$ http://m.example.org/ [L,R=302]
</IfModule> 
```

更新：

如果我将重定向更改为此，它可以工作（但当然，我不能使用条件）：

```
Redirect / http://m.example.org/ 
```

这是为什么？这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:49:41.453

试试这个，在 RewriteCond 中不带括号。我对此进行了测试，它对我有用。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos" [NC]
    RewriteRule ^$ http://m.example.org/ [L,R=302]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:39:36.843

您已经评论了 RewriteCond ，删除“RewriteCond”之前的#

从这里生成您自己的 .htaccess

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)

# android - 在 Android 中创建带有布局的魔法卡片；对于 GridView

> ID：12881434
> 
> 赞同：1
> 
> 时间：2012-10-14T10:37:31.407
> 
> 标签：android, layout, gridview, background

我正在尝试使用 Android 中的布局来执行类似[http://i.stack.imgur.com/vcPcu.jpg的操作。](http://i.stack.imgur.com/vcPcu.jpg)我得到的只是扭曲的背景（[http://i.stack.imgur.com/43l3Y.png](http://i.stack.imgur.com/43l3Y.png)）。

如果我尝试显示一张简单的卡片，没有网格视图；一切都很好。而在这个时候，我心不在焉。请帮忙。

这是我的代码。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
    android:padding="5dp"
    android:verticalSpacing="5dp"
    android:horizontalSpacing="20dp"
    android:numColumns="auto_fit"
    android:columnWidth="60dp"
    android:stretchMode="columnWidth"
    android:gravity="center_horizontal"
    android:background="#ffffff">
</GridView> 
```

项目.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/card"
android:orientation="vertical" >
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
<ImageView
    android:id="@+id/bug_item_set_img"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"/>
<TextView
    android:id="@+id/bug_item_set_txt_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
<TextView
    android:id="@+id/bug_item_set_txt_desc"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
 </LinearLayout> 
```

# algorithm - 在 6 个流程图“气球”中调整斐波那契？

> ID：12881435
> 
> 赞同：2
> 
> 时间：2012-10-14T10:37:34.050
> 
> 标签：algorithm, flowchart

所以我有一个作业来制作一个打印斐波那契数列前 N 项的算法流程图。当然，这并不难，但是老师告诉我们这可以在短短六个流程图“气球”中完成。这就是问题所在 - 我想这样做，但我似乎无法......也就是说，我认为最短的方法是检查 N>2 - 如果不是，我们必须检查是否它是 1 或 2 并分别打印 0 或 1。只有在那之后，我们才能使用“常规” F(n)=F(n-1)+F(n-2) 公式——否则，它会崩溃。写得更正式：

1.  输入 N
2.  N>2?
    *   否：检查是否为 1。如果是，则打印 0 并停止。
    *   否：检查是否为 2。如果是，则打印 0 和 1 并停止。
    *   是：继续 3
3.  令 i = 3。当 i < N 时：fib(i)=fib(i-1)+fib(i-2) 并打印 fib(i)。
4.  停止。

问题是，我想这需要大约 10 个盒子才能完成，如果不是更多的话。那么，更短的方法是什么？我在网上找到的所有算法都倾向于假设我们只会得到大于 2 的 N，但情况可能并非如此。能否请你帮忙？

编辑：好的，我将它调整为 8 个盒子，并认为它是一个可以去的最小的盒子。像这样的东西：

1.  输入 N
2.  令older=0，younger=1（分别为：序列的第（n-2）项和第（n-1）项），current=1，i=2。
3.  N<=1？
    *   是：输出较旧，结束。
    *   否：继续 4
4.  输出更老，更年轻。
5.  我 < N?
    *   是：当前 = 年长 + 年幼，年长 = 更年轻，更年轻 = 当前，i+=1。打印当前，执行5。
    *   没有结束。

这里可以进一步调整吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:36:43.893

1.  输入*N*
2.  令 ( *x1* , *x2* ) = (0, 1)
3.  *N* ≤ 0 吗 ？
    *   是：停止
    *   否：继续执行步骤 4
4.  打印*x1*
5.  令 ( *x1* , *x2* , *N* ) = ( *x2* , *x1* + *x2* , *N* - 1)，继续执行步骤 3。

如果“停止”需要成为它自己的步骤，那就是第 6 步。

# mysql - 这个 MySQL 查询有什么问题？返回随机结果

> ID：12881439
> 
> 赞同：0
> 
> 时间：2012-10-14T10:37:53.410
> 
> 标签：mysql, sql

我有 3 张桌子

**学校**

```
# id
* max_students
... 
```

**日期**

```
# id
* school 
```

**学生**

```
# id
* date_id
...
* over_limit
* canceled - DEFAULT NULL
* logged_out - DEFAULT NULL 
```

当用户注册学生时，我使用查询来计算注册学生，如果学生人数不高于或等于他/她学校的 max_students。此结果（0 或 1）稍后保存到**over_limit**单元格

我用这个查询来计算

```
SELECT IF(COUNT(S.id) >= 
  (SELECT SC.max_students
  FROM schools SC 
  JOIN dates D ON D.school = SC.id
  WHERE D.id = S.date_id)
,1,0)
FROM students S
WHERE S.date_id = "number from PHP" AND S.logged_out IS NULL AND S.canceled IS NULL 
```

但是有一些不好的地方，因为有时学生甚至被标记为over_limit，当日期未满时，有时当日期已满时，学生没有被标记为over_limit。

所以我决定记录这些结果。我保存了上面查询的结果，在新查询中选择了 COUNT 和 max_students。在 177 次出现中，9 次查询返回错误结果。

你能解释一下我的查询有什么问题吗？

谢谢

# python - 使用 eval(strClass) 时 Python 语法无效

> ID：12881446
> 
> 赞同：0
> 
> 时间：2012-10-14T10:38:37.343
> 
> 标签：python, class, python-3.x, eval, classname

我有一个作为字符串的类名列表，如果我说 fe. `print(cNames[0])`它会导致进入`Foo`since `cNames[0] = "Foo"`。现在，如果我想将类字符串与类进行比较，我会这样做：

```
if eval(cNames[0]) in classes:
    foo = eval(cNames[0])() 
```

但是，它给了我无效的语法错误：

```
 File ".\testing.py", line 54, in convert
    print("Class: %s" %eval(cNames[0]))
  File "<string>", line 1
    <class 'testing.Foo'>
    ^

SyntaxError: invalid syntax 
```

而且我知道我只是在打印类名，但它也不适用于 if 语句，所以我尝试用打印来完成。没有效果

**编辑：** 所以问题似乎是我打电话`eval("<class 'testing.Foo'>")`而不是`eval("Foo")`. 现在这会导致一些问题，我正在使用 sqlite3 数据库，我正在尝试保存一个字符串，如下所示：`<class>:i`例如`Foo:53`，但我正在做`<class 'testing.Foo'>:53`，这就是为什么调用 eval 不起作用。我怎么能把`<class 'testing.Foo'>`（不是字符串，类本身）变成字符串“Foo”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:44:33.893

我很确定这里发生的事情是你正在做`eval()`两次 - 这`cNames[0]`就是你在打印它时得到的类的表示。也就是说，你正在做：

```
eval("<class 'testing.Foo'>") 
```

但是，我会说，这是一种不好的做法。存储一个从名称到类的字典并使用它 - 这是更清晰、更可靠、更安全、更快的方法（如果你真的觉得需要它，你可以生成这个字典）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:04:12.217

假设你有一个包含你的类的列表，你可以很整齐地做到这一点，而无需使用`eval`

```
class Foo(object):
    pass

class Thing(object):
    pass

# List of interesting classes
classes = [Foo, Thing]

# Construct a dictionary where the key is the Classes __name__ attribute
classByNames = {cls.__name__:cls for cls in classes}

# Example usage
cName = 'Foo'
if cName in classByNames:
    inst = classByNames[cName]()
    print(inst) # <__main__.Foo object at ...>
else:
    print("Unknown class %s" % cName) 
```

（仅在 Python v2.7 中测试了上述内容，但在 v3 中也应该可以正常工作）

# html - 如何根据 OuterHtml 命名页面上的 html 元素？

> ID：12881448
> 
> 赞同：0
> 
> 时间：2012-10-14T10:38:42.553
> 
> 标签：html, xhtml

我正在尝试将页面上的重要 html 元素提取到 C# 类。标签如：

1.  `<input>`
2.  `<a>`
3.  `<select>`
4.  ...

我需要为代表这些 HTML 元素的 C# 类字段提供正确的名称。但是这些标签可能缺少一些重要的属性，例如：

1.  ID
2.  姓名

有没有什么聪明的方法来命名这些 HTML 元素，同时保持最大的可读性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:41:31.800

你能修改HTML吗？在这种情况下，给他们 ID/类；只要您的 C# DOM 引擎允许您通过任意属性选择元素，您也可以使用`data-`属性。

你不能这样做吗？那么你运气不好，必须使用选择器/xpath 来访问它们，即通过它们的祖先和在直接父元素的子集中的位置。

# scala - Scala 中的子类型和类型参数

> ID：12881454
> 
> 赞同：5
> 
> 时间：2012-10-14T10:39:22.037
> 
> 标签：scala, generics, variance

我是 Scala 的新手，目前正在学习 Scala 中的类型参数，我遇到了以下场景。

假设我有 2 个类`A`，`B`其中`B`是 的子类型`A`。

```
class A {
...
}

class B extends A {
...
} 
```

所以我可以说`B <: A`。

这是否也意味着`List[B] <: List[A]`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-14T10:43:21.707

在 List 的情况下，它`B <: A`确实暗示`List[B] <: List[A]`，因为 List 的类型参数是协变的。使类型参数协变意味着它只能出现在List定义中的协变位置，即只能作为方法的返回类型出现，不能作为参数的类型出现。“Scala 之旅”包含一个关于[变量](http://www.scala-lang.org/node/129)的部分。维基百科也有[一篇关于方差的好文章](http://en.wikipedia.org/wiki/Variance_%28computer_science%29)。类型参数方差的三个选项是：

*   不变性：`C[A]`不是 的子类型，无论和是`C[B]`什么关系。例如数组等可变数据结构。`A``B`
*   协方差：`B <: A`暗示`C[B] <: C[A]`。示例是不可变的数据结构或函数的返回类型。
*   逆变：`A <: B`暗示`C[B] <: C[A]`。例如，函数的参数类型是逆变的。

# sql-server - SQL Server：网络共享数据库

> ID：12881455
> 
> 赞同：1
> 
> 时间：2012-10-14T10:39:22.553
> 
> 标签：sql-server, database-connection

我的 PC（终端）上安装了 SQL Server。我想创建一个新数据库，其文件（mdf 和 ldf）将位于网络共享上。

从文件资源管理器我可以很容易地看到共享，但从 SSMS 的用户界面 - 我没有。

技术上可行吗？是否可以将实例配置为“查看”远程驱动器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-07T09:51:47.310

正在寻找完全相同的问题 - 现在在较新的版本中，这些已得到官方支持。

从 SQL Server 2012 开始，“正式”支持网络共享来创建数据库文件

[资源](https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-with-smb-fileshare-as-a-storage-option)

> 从 SQL Server 2012 开始，系统数据库（Master、Model、MSDB 和 TempDB）和数据库引擎用户数据库可以与服务器消息块 (SMB) 文件服务器一起安装作为存储选项。

所以本质上，数据文件可以在网络共享中。

此外，关于在 SSMS 中可见的驱动器，以下[博客](https://blogs.msdn.microsoft.com/sql_scratchpad/2014/03/11/restore-database-from-a-unc-path-why-ssms-doesnt-show-network-drivespaths-in-the-restore-wizard/)提供了详细信息

本质上，我们需要执行以下操作：

```
xp_cmdshell 'net use X: \\server name\share name' 
```

瞧，驱动器现在可见： [![在此处输入图像描述](../Images/5f372d7106c0c53e09aedebf1fbe51a1.png)](https://i.stack.imgur.com/TVixm.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:50:50.193

无法在 SSMS 中看到网络共享的原因可能是因为将数据库文件放在网络共享上时的性能和可靠性问题。SSMS 试图帮助您避免做出错误的选择。

您可能知道数据库中的远程存储通常作为磁盘附加/安装到操作系统，例如 SAN 磁盘。这是在本地机器上不受本地磁盘限制的数据存储的典型方式。

使用网络共享当然可能是有原因的，我发现这篇文章提供了如何实现这一点的指导：http: [//blogs.msdn.com/b/varund/archive/2010/09/02/create-a -sql-server-database-on-a-network-shared-drive.aspx](http://blogs.msdn.com/b/varund/archive/2010/09/02/create-a-sql-server-database-on-a-network-shared-drive.aspx)。修复方法是设置禁用检查的跟踪标志...它适用于 SQL Server 2008 R2，如果您使用的是 SQL Server 2012，那么我们希望它仍然适用！

# java - CalDAV 实施

> ID：12881459
> 
> 赞同：1
> 
> 时间：2012-10-14T10:39:41.573
> 
> 标签：java, android, caldav

目前，我在 Android Java 上研究 calDAV 协议，我卡在 CalDAV 身份验证中。我清楚地知道它是如何工作的。大家可以给我简单的示例项目来演示一下吗？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:49:57.290

[检查](http://www.androidadb.com/class/au/Authenticator.html)CalDav 身份验证器的使用情况：

```
@Override
public IBinder onBind(Intent arg0) {
    IBinder ret = null;
    if (ourAuthenticator == null) {
        ourAuthenticator = new Authenticator(this);
    }
    if (arg0.getAction().equals(AccountManager.ACTION_AUTHENTICATOR_INTENT)) {
        ret = ourAuthenticator.getIBinder();
    }
    return ret; 
```

# c++ - 检测按键按下和按键释放事件

> ID：12881462
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:40:12.800
> 
> 标签：c++, c, windows, winapi

每当 keypress 事件发生时，都会调用以下函数：

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {

   printf("Key is pressed !\n");
   // If key pressed down,call function A
   // If key released , call function B
} 
```

如何检测这些事件？

按下的键可以是*窗口键盘*中的任何键。我只想知道一个键是被按下还是在按下后被释放。我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:44:32.110

```
static LRESULT CALLBACK LowLevelKeyboardProc(int nCode, WPARAM wParam, LPARAM lParam) 
{
     if ( nCode >= 0 )
     {
         if ( wParam == WM_KEYDOWN  || wParam == WM_SYSKEYDOWN )
         {
             functionA();
         }
         else
         {
             functionB();
         }
     }
     return CallNextHookEx(hHook, nCode, wParam, lParam);
} 
```

# c# - WinRT 中的集合导航

> ID：12881465
> 
> 赞同：3
> 
> 时间：2012-10-14T10:41:06.870
> 
> 标签：c#, collections, windows-runtime, winrt-xaml

这似乎是一件微不足道的事情，但我一生都无法弄清楚如何去做。我有一个绑定到 ListView 控件的 ObservableCollection 集合。这一切都很好，我可以点击选择项目等。

我想做的是有导航按钮（下一个、上一个、开始等），用户可以单击它们并按预期查看 ListView 更新。

我知道 CollectionViewSource 的 WPF 版本具有使这变得非常简单的东西，但据我所知，这在 WinRT 中是缺失的。

任何人都可以提出一种实现我想要做的事情的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:49:14.080

根据我在 XAML WinRT 中发现的有关 CollectionViewSource 的信息，我只看到对 ICollectionView 的引用在 WinRT 应用程序中缺乏排序和过滤。所以 WPF 方法将像[这里](https://stackoverflow.com/a/12872045/1416220)建议的那样工作。

# assembly - 仅使用 inc dec 和 jnz 命令实现 c=a*b

> ID：12881474
> 
> 赞同：7
> 
> 时间：2012-10-14T10:42:25.597
> 
> 标签：assembly

在我的一次采访中，我在“新”原始程序集中遇到了一个非常复杂的问题（当他们告诉我他们基于 Python 的 QA 测试时，为什么 QA 需要汇编知识......？），它是这样的：

假设您的汇编语言仅包含以下说明：

*   *`'inc REG'`*: 将给定的寄存器加一。
*   *`'dec REG'`*：将给定寄存器减一。
*   *`'jnz LABEL'`*: 如果前一条指令的结果不为零，则跳转到给定的 LABEL。
*   *`'HELT'`*: 停止运行。

任务：A 和 B 寄存器保存非负值。程序应该计算 A*B 的值并将结果定位在 C 中。此外，该语言保存寄存器 C、D、...、Z，您可以假设它们在程序开始时被初始化为零。

这里有几点需要更多注意，例如您必须提前考虑 A 和\或 B 值可能为零..和零的倍数是...零..这太难了..

PS由于那个问题，我没有实现'my_atoi（）'的问题.. :-(

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T11:06:57.260

我不会给出完整的答案，但这里的关键是你必须自己定义一个`mov`例程。假设`dec X`where`X`保持 0 产生一个负数（或非常大），可以这样完成：

```
MOV_AD:     ; copy value in A to D, using E as scratch space
    inc A   ; must be non-zero for jnz to work below
COPYLOOP:
    inc D
    inc E
    dec A
    jnz COPYLOOP
    dec D   ; undo the first inc A in D

            ; E now contains the initial value of A + 1
MOVBACK:    ; move value in E back to A
    inc A
    dec E
    jnz MOVBACK
    dec A   ; undo the first inc A

WIPE_E:     ; wipe the scratch space
    dec E
    jnz WIPE_E 
```

一旦有了适当的`mov`例程，就可以将加法实现为重复递增，将乘法实现为重复加法。在这两种情况下，您都需要`inc`技巧才能开始`jnz`工作，而在乘法例程中，您需要以减法结束。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T11:09:15.753

逐步分解：

原来的：

```
C = A * B 
```

相当于：

```
C = 0
while A != 0:
   dec A
   C += B 
```

相当于：

```
C = 0
while A != 0:
   dec A
   # Note: Following block of code changes B but sets it back to
   #       original value when done
   Z = 0
   while B != 0:
       dec B
       inc Z
       inc C
   B = Z 
```

相当于：

```
C = 0
Z = 0
while A != 0:
   dec A
   # Note: Following block of code changes B but sets it back to
   #       original value when done
   while B != 0:
       dec B
       inc Z
       inc C
   while Z != 0:
       dec Z
       inc B 
```

现在我们只需要弄清楚如何翻译这个结构：

```
while LOOP_VAR != 0:
    dec LOOP_VAR
    ... some code here which does not use LOOP_VAR ... 
```

这可以翻译成：

```
 # Next 4 lines do "if LOOP_VAR == 0: goto loop_end"
    inc LOOP_VAR
    dec LOOP_VAR  # To set flags
    jnz loop_again
    goto loop_end
loop_again:
    ... some code here which does not use LOOP_VAR ...
    dec LOOP_VAR
    jnz loop_again
loop_end: 
```

当然，我们需要将无条件的 goto 转换为有条件的 goto。幸运的是，我们有很多已知为零的变量，因此我们可以测试其中一个是否为零：

```
 # Unconditional jump to "loop_end".  Note that Q is always zero.
    inc Q
    dec Q
    jnz loop_end 
```

所以，把所有这些放在一起：

```
 # Next 3 lines do "if A != 0: goto outer_loop_again"
    inc A
    dec A  # To set flags
    jnz outer_loop_again

    # Unconditional jump to "outer_loop_end".  Note that Q is always zero.
    inc Q
    dec Q
    jnz outer_loop_end

outer_loop_again:

    # Next 3 lines do "if B != 0: goto addition_loop_again"
    inc B
    dec B  # To set flags
    jnz addition_loop_again

    # Unconditional jump to "addition_loop_end".  Note that Q is always zero.
    inc Q
    dec Q
    jnz addition_loop_end

addition_loop_again:
    inc Z
    inc C
    dec B
    jnz addition_loop_again
addition_loop_end:

    # Next 3 lines do "if Z != 0: goto move_loop_again"
    inc Z
    dec Z  # To set flags
    jnz move_loop_again

    # Unconditional jump to "move_loop_end".  Note that Q is always zero.
    inc Q
    dec Q
    jnz move_loop_end

move_loop_again:
    inc B
    dec Z
    jnz move_loop_again
move_loop_end:

    dec A
    jnz outer_loop_again
outer_loop_end:

    # Finished!
    helt 
```

编辑添加：实际上，有一个稍微简单的方法。我们可以在开始时检查 A 或 B 是否为零，这将其简化为：

```
 # Check if A is zero, and halt if so
    # (So that multiplying by zero gives zero)
    inc A
    dec A  # To set flags
    jnz a_non_zero
    helt  # Multiplying by zero gives zero
a_non_zero:

    # Check if B is zero, and halt if so
    # (So that multiplying by zero gives zero)
    inc B
    dec B  # To set flags
    jnz b_non_zero
    helt  # Multiplying by zero gives zero
b_non_zero:

outer_loop_again:

addition_loop_again:
    inc Z
    inc C
    dec B
    jnz addition_loop_again

move_loop_again:
    inc B
    dec Z
    jnz move_loop_again

    dec A
    jnz outer_loop_again

    # Finished!
    helt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-05T02:56:06.623

***JNZ***指令可以看作***do .. while***结构，[@user9876](https://stackoverflow.com/a/12881663/3908703)代码示例：

```
@_loop1:        ;   do {
                ;       do {
    INC Z       ;           z++;
    INC C       ;           c++;
    DEC B       ;           b--;
    JNZ _loop1  ;       } while (b != 0);
                ;       
@_loop2:        ;       do {
    INC B       ;           b++;
    DEC Z       ;           z--;
    JNZ _loop2  ;       while (z != 0);
                ;       
    DEC A       ;       a--;
    JNZ _loop1  ;   } while (a != 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-30T17:52:43.847

我刚刚在JJ面试时有这个任务。这似乎是一个正确的解决方案。如我错了请纠正我

```
INC A
DEC A
JNZ L0
HELT

L0:
INC B
DEC B
JNZ L1
HELT

L1:
INC C
INC D
DEC A
JNZ L1
DEC B
JNZ L2
HELT

L2:
INC C
INC A
DEC D
JNZ L2
DEC B
JNZ L1
HELT 
```

# javascript - 在输入类型数字中添加千位和小数分隔符

> ID：12881475
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:42:36.470
> 
> 标签：javascript, jquery, jeditable, separator

我做了很长时间的研究，但我没有找到类似的案例。

我正在为一个项目使用[jeditable](http://www.appelsiini.net/projects/jeditable)插件，我需要创建一个输入类型号

首先，我在 jquery.jeditable.js 中创建了输入类型编号

```
 number: {
        element : function(settings, original) {
            var input = $('<input type="number" step="0.00">');
            if (settings.width  != 'none') { input.attr('width', settings.width);  }
            if (settings.height != 'none') { input.attr('height', settings.height); }
            /* https://bugzilla.mozilla.org/show_bug.cgi?id=236791 */
            //input[0].setAttribute('autocomplete','off');
            input.attr('number','off');
            $(this).append(input);
            return(input);
        }
    }, 
```

然后我把脚本放在我的html文件中

```
 $('.number').editable(function(value, settings) { 
     console.log(this);
     console.log(value);
     console.log(settings);
     return(value);
  }, { 
     type    : 'number', 
     style  : "inherit"
 }); 
```

我的html

```
<p class="number" style="text-align: right;">000,00</p> 
```

问题是我不知道如何在所有浏览器中使用十进制和千位分隔符。正如您在上面看到的，我刚刚放了*step="0.00*但这仅适用于 FF

您能帮我了解如何正确添加小数和千位分隔符吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:32:37.240

像这样？

```
 number: {
        element : function format(comma, period) {
            comma = comma || ',';
            period = period || '.';
            var split = this.toString().split('.');
            var numeric = split[0];
            var decimal = split.length > 1 ? period + split[1] : '';
            var reg = /(\d+)(\d{3})/;
                while (reg.test(numeric)) {
                    numeric = numeric.replace(reg, '$1' + comma + '$2');
                    }
                return numeric + decimal;}
            var input = $('<input type="number"');
            if (settings.width  != 'none') { input.attr('width', settings.width);  }
            if (settings.height != 'none') { input.attr('height', settings.height); }
            /* https://bugzilla.mozilla.org/show_bug.cgi?id=236791 */
            //input[0].setAttribute('autocomplete','off');
            input.attr('number','off');
            $(this).append(input);
            return(input);
        }
    },

$('.number').live('keyup', function(){
$(this).val(format.call($(this).val().split(' ').join(''),' ','.'));
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:47:43.983

你可以试试这个：

```
function format(comma, period) {
comma = comma || ',';
period = period || '.';
var split = this.toString().split('.');
var numeric = split[0];
var decimal = split.length > 1 ? period + split[1] : '';
var reg = /(\d+)(\d{3})/;
    while (reg.test(numeric)) {
    numeric = numeric.replace(reg, '$1' + comma + '$2');
    }
return numeric + decimal;}

$('#mydiv').live('keyup', function(){
$(this).val(format.call($(this).val().split(' ').join(''),' ','.'));
});​ 
```

# ruby-on-rails - 设计，不能使用自定义控制器动作

> ID：12881485
> 
> 赞同：0
> 
> 时间：2012-10-14T10:43:06.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3

[我按照设计页面](https://github.com/plataformatec/devise)上的说明进行操作。唯一不同的是我正在自定义注册，他们的例子是关于会话的。

当我点击`/users/sign_up`页面时，设计正在使用`Devise::RegistrationsController#new`动作而不是`new`动作`users_controller.rb`

正如您从下面的服务器日志中`XXXXXXXXXX\nxxxxxxxxxxx`看到的那样，即使用户控制器具有以下`new`操作，也看不到`puts "XXXXXXXXXX\nxxxxxxxxxxx"`

```
Started GET "/users/sign_up" for 127.0.0.1 at 2012-10-14 03:29:52 -0700
Processing by Devise::RegistrationsController#new as HTML
  Rendered /Users/jasonkim/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.1.2/app/views/devise/shared/_links.erb (0.4ms)
  Rendered users/registrations/new.html.haml within layouts/application (4.8ms)
Completed 200 OK in 88ms (Views: 12.3ms | ActiveRecord: 0.7ms) 
```

## users_controller.rb

```
class Users::RegistrationsController < Devise::RegistrationsController
  def new
    @user = User.new
    address = @user.address.build
    puts "XXXXXXXXXX\nxxxxxxxxxxx"
  end
end 
```

## 路线.rb

```
devise_for :users, :controllers => { :registration => "users/registration" }
devise_for :employers 
```

## 我在 devise.rb 中添加的唯一内容

```
config.scoped_views = true 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T10:51:54.910

它应该是

```
devise_for :users, :controllers => { :registrationS => "users/registrationS" } 
```

尾随's'（但当然是小写）

# javascript - 如何获取每个组中的所有单选按钮并检查每个组中是否选中一个？

> ID：12881487
> 
> 赞同：0
> 
> 时间：2012-10-14T10:43:16.857
> 
> 标签：javascript, jquery, radio-button, radio-group

表单中单选按钮的范围。jQuery 检查是否为每个组选择了一个单选，如果没有，则将一个类添加到关联的标签中。

我已检查并且组的名称已正确添加到变量“radio”中。有任何想法吗？

```
$('.checkbox', this).each(function()
{
    var radio = $(this).attr("name");
    if ($('input[name='+ radio +']:checked').length) 
    {
        $('label[for=' + radio + ']').addClass('error_label');
        required = false;
    }
    else 
    {
        $('label[for=' + radio + ']').removeClass('error_label');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:00:29.490

我认为您在添加课程时应该这样检查：

```
if ($('input[name=' + radio + ']:radio:checked').length == 0) {
    // Add class...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:33:07.660

这是一种更有效的方法。此外，您可能不想将“错误”类添加到组内的所有单选按钮标签。

[请检查这个](http://jsfiddle.net/kjxuA/1/)

=== 更新为在答案中包含代码 ===

**HTML**

```
<div class="radio-group">
    <h3>Group 1</h3>
    <input type="radio" name="group_1" id="opt1" value="1" />
    <label for="opt1">Option 1</label>
    <br />
    <input type="radio" name="group_1" id="opt2" value="2" />
    <label for="opt2">Option 2</label>
    <br />
    <input type="radio" name="group_1" id="opt3" value="3" />
    <label for="opt3">Option 3</label>
    <br />
</div>
<div class="radio-group">
    <h3>Group 2</h3>
    <input type="radio" name="group_2" id="opt4" value="1" />
    <label for="opt4">Option 1</label>
    <br />
    <input type="radio" name="group_2" id="opt5" value="2" />
    <label for="opt5">Option 2</label>
    <br />
    <input type="radio" name="group_2" id="opt6" value="3" />
    <label for="opt6">Option 3</label>
</div>
<div class="radio-group">
    <h3>Group 3</h3>
    <input type="radio" name="group_3" id="opt8" value="1" />
    <label for="opt8">Option 1</label>
    <br />
    <input type="radio" name="group_3" id="opt9" value="2" />
    <label for="opt9">Option 2</label>
    <br />
    <input type="radio" name="group_3" id="opt10" value="3" />
    <label for="opt10">Option 3</label>
</div>
<div>
    <input type="button" id="submit" value="Submit" />
</div> 
```

**JavaScript**

```
$(function(){
    $("#submit").click(function(){
        $(".radio-group").each(function(){
            if($(this).find("input:radio:checked").length) {
                $(this).removeClass("error");
            }
            else {
                $(this).addClass("error");
            }
        });
    });
});​ 
```

# c# - 异步添加到 ObservableCollection（或替代方法）

> ID：12881489
> 
> 赞同：10
> 
> 时间：2012-10-14T10:43:39.343
> 
> 标签：c#, .net, wpf, data-binding, observablecollection

这就是我所拥有的 - 一个 ListBox，其 ItemsSource 设置为 a `ObservableCollection<T>` - 其中 T 是我的自定义类，代表一个文件，仅包含 2 个 DependencyProperties：文件名和缩略图路径。- 列表框还定义了一个自定义 DataTemplate，以便在其下很好地显示图像和文件名。

列表框的目的是显示当前文件夹中的视频文件（在 TreeView 中选择），带有缩略图（异步生成；不是这个问题的一部分）。

因此，当我更改 TreeView 中的文件夹时，ObservableCollection 会被清除并再次填充，这会自动反映在 ListBox 项中。

问题出在：用户界面变得无响应，并且需要几秒钟才能更新。同样，缩略图在这里没有意义（我尝试禁用它们）。 **我认为**花费最多时间的是构建我的自定义类的 50-100 个实例，以及它们的视觉表示 - 它必须为每个实例初始化一个 Image 对象。但这只是我的猜测——您能否确认或排除这种可能性？

我开始认为**ObservableCollection 可能不是**这里的方法，因为从我阅读的内容和我尝试的内容来看，没有办法异步添加项目，至少如果这些项目是 DependencyObjects。我尝试使用 BackgroundWorker 创建我的类实例并将它们添加到 ProgressChanged 事件处理程序中的集合中，但它会引发异常（一些线程与依赖对象问题）。

有什么我想念的吗？或者我会通过简单地放弃 ObservableCollection 并编写一个好的旧 async for 循环来添加项目会更好吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-14T10:53:33.423

由于您`ObservableCollection`绑定到 UI，因此它是在 UI 线程上生成的，因此任何进一步的更新（删除/添加/清除）都必须在同一个 UI 线程上。它不允许来自另一个线程的更新。

但是，您可以做的是创建类的实例（或在后台线程上进行所有耗时的操作），一旦完成，使用`Dispatcher`您的 UI 线程在 ObservableCollection 中添加对象，如下所示 -

```
App.Current.Dispatcher.BeginInvoke((Action)delegate()
                          {
                              observableCollection.Add(instanceOfYourClass);
                          }); 
```

[Dispatcher](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx "调度员")所做的是将操作放在其关联的线程上。因此，该项目将始终添加到 UI 线程，但可以在后台线程中创建。

这里有几个链接可能会让你继续前进 -[从 BW 更新，](https://stackoverflow.com/questions/2293246/observablecollection-and-threading "从 BW 更新")另一个在[这里](https://stackoverflow.com/questions/3628477/update-a-observablecollection-with-a-background-worker-in-mvvm "这里")

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-01T14:38:51.153

使用 .net 4.5，您可以使用 EnableCollectionSynchronization

```
 object lockObj = new object();
        BindingOperations.EnableCollectionSynchronization(yourObservableCollection, lockObj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-11T19:14:23.997

是的，这是一个老问题，我知道，但是像这样的问题已经结束了。我发现这在 IAsyncEnumerable 存在之前是可能的，但现在 IAsyncEnumerable 存在就更容易了。

ViewModel 类中的属性

```
public ObservableCollection<Card> Cards { get; set; } 
```

ViewModel 构造函数

```
public CardViewModel(IDbContextFactory<CardContext> ccf)
{
    this.ctxFactory = ccf; //DB Context, using DI
    this.Cards = new ObservableCollection<Card>();

    Task.Run(async () =>
    {
        await foreach (Card card in GetAllCards())
        {
            this.Cards.Add(card);
        }
    });
}

private IAsyncEnumerable<Card> GetAllCards()
{
    CardContext cc = this.ctxFactory.CreateDbContext();

    return cc.Cards
        .Include(cc => cc.Edition)
        .Include(cc => cc.Site)
        .Include(cc => cc.Condition)
        .Include(cc => cc.Purchases)
        .Include(cc => cc.Trades)
        .AsNoTracking()
        .AsAsyncEnumerable();
} 
```

卡片在视图中绑定到数据网格

```
ItemsSource="{Binding Cards}" 
```

“卡片”一次添加到一个网格中，我可以在网格加载时与网格交互，并且应用程序不会冻结。

数据来自使用 EF Core 5 的数据库，这就是 CardContext，在这个例子中

# mysql - 使用在线 cron 作业运行预定的存储过程执行

> ID：12881490
> 
> 赞同：-1
> 
> 时间：2012-10-14T10:44:15.063
> 
> 标签：mysql, stored-procedures, cron, scheduler, job-scheduling

我刚刚编写了一个 mysql 存储过程，它将根据某些条件从两个表中获取数据，然后将它们插入到第三个表中。我计划安排此过程在以下两种情况之一中运行：a）当在前两个表中的任何一个中创建新条目并更新第三个表时，或者 b）仅安排 proc 每隔 5 分钟运行一次并更新第三个表。

我不知道如何执行选项 a)。我正在考虑使用 cron 在我的基于 linux 的网络主机中进行调度，但在最后一刻意识到他们不允许我正在使用的基本版本的 cron 作业。

这让我接触到了 onlinecronjobs.com 和其他类似的服务，但我不明白他们将如何帮助我运行这个存储过程。

我的问题是，如果我给这些网站提供存储过程的链接 - 例如：www.mysite.com/cron/mySP.sql 那么这些网站可以自动调用这个存储过程并让存储过程将数据插入第三个表吗？我的假设是否正确 - 只需要给他们存储过程的路径，是吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:58:07.323

a) 使用[触发器](http://dev.mysql.com/doc/en/triggers.html)：

```
CREATE TRIGGER foo AFTER INSERT ON tableA FOR EACH ROW CALL my_proc();
CREATE TRIGGER bar AFTER INSERT ON tableB FOR EACH ROW CALL my_proc(); 
```

b) 使用 MySQL 的[事件调度器](http://dev.mysql.com/doc/en/events.html)：

```
CREATE EVENT baz ON SCHEDULE EVERY 5 MINUTE DO CALL my_proc(); 
```

# php - FILTER_VALIDATE_INT 返回值 0 的错误

> ID：12881496
> 
> 赞同：0
> 
> 时间：2012-10-14T10:45:19.430
> 
> 标签：php, filter

帖子的预期值为 0 或 1，但当值为 0 时返回错误

```
if(!($data['status'] = filter_input(INPUT_POST,'status',FILTER_VALIDATE_INT)))
{
  echo'Error';
}
else 
return true; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T10:51:43.417

您的`if`语句隐式地将调用结果转换为`filter_input()`布尔值，然后测试该结果。在您的情况下，结果`0`是隐式转换为`FALSE`，因此测试失败。

您需要通过针对以下的身份比较进行显式测试`FALSE`：

```
$data['status'] = filter_input(INPUT_POST,'status',FILTER_VALIDATE_INT);
if ($data['status'] === FALSE) ... 
```

有关更多信息，请参阅[PHP 类型比较表](http://www.php.net/manual/en/types.comparisons.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T10:52:08.983

我认为它正在正确验证并根据返回值`filter_input it is returning 0`

所以你会得到`$data['status'] = 0`

然后

`!($data['status'] = 0)`这`1`就是它打印错误消息的原因

# c - 为什么我不能读出函数 switch 语句

> ID：12881500
> 
> 赞同：0
> 
> 时间：2012-10-14T10:46:01.487
> 
> 标签：c

程序将字符串存储为字符串数组。字符串可以是名称、地址等。 • 程序显示一个选择屏幕，允许用户输入字符串（最多 16 个，字符串最多 128 个字符）、从数据库中删除字符串、查看数据库中的字符串、搜索一个字符串，然后退出程序。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
void clearscreen()
{
    system("cls");
}

int main()
{
    int b1,b,c;
    char data[20]; 
    int number,a;

    do{
        clearscreen();
        printf("How many data do you want to store  ");
        scanf("%d",&number);

        for(a=1;a<=number;a++)
        {
            printf("Input your data %d_No:       ",a);
            scanf("%s",&data[a]);
        }

        printf("What action do you want to do\n [1]Remove data\n [2]View data\n [3]Search data\n[4] Quit");
        scanf("%d",&b1);

        switch(b1)
        {
            case 1:

                clearscreen();
                break;
            case 2:
                for(c=1;c=number;c++)
                {
                    printf("%d:%s",a,data[a]);
                }
                break;
            case 3:
                break;
            case 4:
                return 0;
                break;
        }

        printf("\nDO you want to continue\n[1] YES\n [2] No   ");
        scanf("%d",&b);
        if (b==2)
        {
            return 0;
        }
    } while(b !=2);
} 
```

程序正在运行，但是当我切换到 2 时，它无法读取 int 数和 char 数据，这是为什么？我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T10:51:53.863

```
for(c=1;c=number;c++)
    printf("%d:%s",a,data[a]); 
```

我在这里看到三个问题。第一个是您可能的意思是`c <= number`，基于您的数据输入循环。

第二个是您将`a`其用作数组索引，而不是`c`您应该使用的索引。

最后一点是数组是从零开始的，因此可以`int a[20]`为您提供`a[0]`包容`a[19]`性。换句话说，你的循环应该从`0`to`number - 1`而不是`1`to `number`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:51:05.753

情况 2 使用`c`变量 & 使用`c<=number`而不是`c=number`

```
for(c=1;c<=number;c++)
                {
                    printf("%d:%s",c,data[c]);
                } 
```

# css - 试图居中顶部 DIV 栏

> ID：12881503
> 
> 赞同：3
> 
> 时间：2012-10-14T10:46:09.803
> 
> 标签：css

我有设置为不滚动的 div 栏，因此它将始终显示在网站顶部。在这个栏里面我有另一个 div 框，里面还有两个按钮，它们是向右浮动的，所以它们总是在右上角。

问题是我希望按钮居中右上角而不是页面右上角。相反，如果 body 元素居中，则按钮将位于居中元素的右上角。

这是代码：

```
<DIV class="fixedtop">
        <div class="language2">
            <div class="english"> <font id="buttontxt">ENGLISH</font></div>

            <div class="spanish"> <font id="buttontxt">SPANISH</font></div>

        </div>
    </DIV> 
```

这是顶部栏的 CSS：

```
 .fixedtop
{
    position: fixed;
    margin-left: 0 auto;
    margin-right: 0 auto;
    top: 0px;
    width:600px;
    height: 30px;
}

.language2
{
    margin-left: auto;
    margin-right: auto;
    top: 0px;
    width: 600px;
    height: 30px;
    margin-right: 0px;
}

.spanish
{
    background-color:00ADEF;
    float: right;
    margin-right: 4px;
    padding-top: 10px;
    display: inline-block;
    width: 100px;
    height:30px;
    color:black;
    text-align: center;
    vertical-align: middle;
    -webkit-border-bottom-right-radius: 10px;
    -webkit-border-bottom-left-radius: 10px;
    -moz-border-radius-bottomright: 10px;
    -moz-border-radius-bottomleft: 10px;
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 10px;
    -webkit-box-shadow: 2px 3px 2px rgba(50, 50, 50, 0.75);
    -moz-box-shadow:    2px 3px 2px rgba(50, 50, 50, 0.75);
    box-shadow:         2px 3px 2px rgba(50, 50, 50, 0.75);
}

.english
{
    background-color:00ADEF;
    float: right;
    margin-right: 15px;
    display: inline-block;
    padding-top: 10px;
    width: 100px;
    height:30px;
    color:black;
    text-align: center;
    vertical-align: middle;
    -webkit-border-bottom-right-radius: 10px;
    -webkit-border-bottom-left-radius: 10px;
    -moz-border-radius-bottomright: 10px;
    -moz-border-radius-bottomleft: 10px;
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 10px;
    -webkit-box-shadow: 2px 3px 2px rgba(50, 50, 50, 0.75);
    -moz-box-shadow:    2px 3px 2px rgba(50, 50, 50, 0.75);
    box-shadow:         2px 3px 2px rgba(50, 50, 50, 0.75);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T10:57:34.237

`margin-left`并且`margin-right`只接受 1 个参数，而不是您尝试传入的两个参数。不幸的是，您不能使用`margin: 0 auto`CSS 中的固定元素居中。

因此，您必须将`left`位置设置为 50%，然后将左边距设置为元素宽度的负一半：

```
.fixedtop
{
    position: fixed;
    top: 0;
    left: 50%
    width: 600px;
    height: 30px;
    margin-left: -300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:57:39.353

您需要的是以下内容：

```
 .fixedtop
        {
            position: fixed;
            top: 0px;
            left: 50%;
            margin: 0 0 0 -300px;
            width:600px;
            height: 30px;
            background: #060;
        }

        .language2
        {
            margin: 0 auto;
            background: #0F9;
        } 
```

基本上 margin: auto 在 position: fixed 或 absolute 上不起作用。所以我们所做的就是将其定位在距左侧 50% 的位置。因为我们知道 .fixedtop 是 600px 宽，所以我们给它一个左边距 -300px 以使其再次在页面上居中。由于 .language2 是块元素 (div)，因此您无需为其指定宽度和高度。从技术上讲，利润：汽车也变得过时了。我只是暂时给出了两种背景颜色，以便您可以更好地看到它们的行为。你可以稍后删除它们。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:02:56.610

您为父固定顶设置此样式

```
parentfixedtop{
 position:relative;
} 
```

# jquery - jQuery 框幻灯片

> ID：12881504
> 
> 赞同：2
> 
> 时间：2012-10-14T10:46:46.887
> 
> 标签：jquery, slideshow, fade

我正在寻找开发或使用现有的 jQuery 幻灯片。

幻灯片的特征如下

将有 5 个框将使用相同的图像池并单独旋转框上的图像，而不会同时在 2 个或更多框上显示相同的图像。

它看起来像这样：

![在此处输入图像描述](../Images/827b2bb26d666a3bfc5d7b882dc4269d.png)

每个框将显示旋转（淡出）图像。

怎么可能达到这个效果？你知道任何现有的创建它的插件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:16:23.590

## *[jsBin 演示](http://jsbin.com/ituwid/1/edit)*

使用**[fademe](http://roxon.in/scripts/fademe_jquery_plugin/)** jQuery 插件：

HTML：

```
<div class="boxes"></div> 
```

CSS：

```
.box{
  width:100px;
  height:100px;
  border:4px solid #000;
  margin:5px;
  float:left;
}
.box img{
  position:absolute;
} 
```

jQuery：

```
// IMAGES ARRAY:
images = [
  'http://placehold.it/100x100/cf5&text=1',
  'http://placehold.it/100x100/adf&text=2',
  'http://placehold.it/100x100/468&text=3',
  'http://placehold.it/100x100/953&text=4',
  'http://placehold.it/100x100/583&text=5',
  'http://placehold.it/100x100/f27&text=6',
  'http://placehold.it/100x100/48f&text=7'
];

// GENERATE BOXES
for(i=0;i<5;i++){
 $('.boxes').append('<div class="box"/>');
}

// APPEND ALL IMAGES TO EACH BOX
for(i=0;i<images.length;i++){
 $('.box').append('<img src="'+ images[i] +'" />');
}

// APPLY fademe plugin TO EACH BOX
for(i=0;i<5;i++){
 $('.box').eq(i).fademe(0,0,i+1);  // the 3rd value is the 'S' ooption (starting slide number)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T10:55:50.687

如果您还没有看过它，我建议您看一下 jQuery [SlideJS插件。](http://www.slidesjs.com/)

检查[此](http://www.slidesjs.com/#examples)以获取不同的示例

```
<script>
        $(function(){
            $("#slides").slides();
        });
    </script>

<body>
    <div id="slides">
        <div class="slides_container">
            <div>
                <img src="img1">
            </div>
            <div>
                <img src="img2">
            </div>
        </div>
    </div>
</body> 
```

您还可以组合自定义选项：

```
$(function(){
      $("#slides").slides({
        preload: true,
        preloadImage: '/img/loading.gif',
        play: 5000,
        pause: 2500,
        hoverPause: true
      });
    }); 
```

# algorithm - 在光子追踪中计算像素值

> ID：12881506
> 
> 赞同：0
> 
> 时间：2012-10-14T10:47:15.147
> 
> 标签：algorithm, 3d, raytracing

我过去写过两个传统的光线追踪器，但现在我想编写一个反向光线追踪器，它可以追踪从光源到眼点的光子。在过去几天阅读有关此主题的文章后，我知道我不应该尝试，但无论如何我还是想这样做。我现在面临的问题是如何计算我试图生成的图像中每个像素的值。

在普通光线追踪中，我将来自视点的光线通过图像平面中的一个像素发射到场景中，在追踪光线树的这个分支之后，我最终得到一个分配给该像素的颜色值。我想不出办法来扭转这个过程。如果我测试每条光线是否只与图像平面相交，那么我会得到一个 180 度的视野和一个焦点就在图像平面上（一团模糊）。所以我必须测试每条光线是否与图像平面和眼点相交。但由于眼点只是一个无限小的小点，光线击中它的机会应该（几乎）为零，这将导致根本没有图像。

所以我的问题是：如何通过追踪来自光源的光子来计算要渲染的图像的像素值？

在此先感谢，
扬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:39:10.287

您需要进行“最终收集”才能生成图像。如果您的光线树从光源分支出来，这将有效地“装饰”光线树的*叶子*，并为眼睛添加额外的光线。

当然，并不是每条这样的光线都是有效的：如果表面背对眼睛，或者它被遮挡，那么它应该被拒绝。请注意，这种生成光线的方法类似于在常规光线追踪中确定照明所需的“阴影”光线。

另一个问题是您接收到的光线将采用随机模式，而不是传统光线追踪提供的规则或分布良好的模式。这意味着您需要对相机接收到的光线进行平均和/或插值，以获得像素值。

我相信您的像素颜色将由样本密度*和*样本颜色值的组合决定；如果是这样，您将需要确保您的平均/插值方法提供该行为。对此的初始近似可能只是将输入样本添加到最近的像素；更好的方法可能是为每个传入的样本“喷溅”一个简单的添加剂贴花。一种更复杂的方法可以根据样本的局部密度按比例缩放贴花的大小 - 同时保持总积分亮度与样本亮度成比例。

* * *

编辑：给定一个传入的“眼睛”光线，您仍然需要确定您的传入光线对应的屏幕位置。为此，您需要计算用于光栅化的相机的“ViewProjection”矩阵。这实际上是用于传统光线追踪的过程的*逆过程：*

```
conventional ray tracing:
    // find direction vector for given screen coordinates (x,y)
    homog4vector homog_clip_coords( (x - x_offset) / x_resolution,
                                    (y - y_offset) / y_resolution,
                                    1.0,  // z-coordinate
                                    1.0); // w-coordinate
    homog4vector homog_world_coords = InverseViewProjectionMatrix * homog_clip_coords
    ray_vector_x = homog_world_coords.x / homog_world_coords.w - eye_x;
    ray_vector_y = homog_world_coords.y / homog_world_coords.w - eye_y;
    ray_vector_z = homog_world_coords.z / homog_world_coords.w - eye_z;

rasterization or "reverse" ray tracing:
    // find screen coordinates for given source point "p"
    homog4vector eye_ray_source(p.x, p.y, p.z, 1.0);
    homog4vector homog_clip_coords = ViewProjectionMatrix * homog4vector(x,y,z,1);
    screen_coords.x = x_offset + x_resolution * homog_clip_coords.x / homog_clip_coords.w
    screen_coords.y = y_offset + y_resolution * homog_clip_coords.y / homog_c.ip_coords.w 
```

当然，并不是每条入射光线都会出现在屏幕上。*确保丢弃从后面*进入相机的光线：

```
 if (homog_clip_coords.z < 0 || homog_clip_coords.w < 0)
      { /* reject ray */ } 
```

# android - 创建 Google 音乐专辑组自定义列表视图

> ID：12881510
> 
> 赞同：2
> 
> 时间：2012-10-14T10:47:30.620
> 
> 标签：android, android-layout, android-view

我正在引导一个应用程序，就我而言，谷歌音乐专辑甲板的以下布局在我的平板电脑应用程序中确实很有意义。我喜欢小部件的体验。

![来自 Google 音乐应用的专辑组](../Images/963f8694fa255fdbb4cad36980aa3912.png)

开源世界中是否有可用的 Android 视图库（首选，因为我可以更快地实现它）或教程让我朝着实现自己的正确方向前进？

如果需要，我有什么想法可以开发吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:02:23.823

[这在RenderScript](http://developer.android.com/guide/topics/renderscript/index.html)中呈现，称为轮播视图

您可以在此处下载 sample+source 的工作副本：[http ://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=2&q=](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=2&q=)

# ios - UIImageView 动画无法正常工作

> ID：12881513
> 
> 赞同：0
> 
> 时间：2012-10-14T10:48:31.370
> 
> 标签：ios, animation, uiimageview, scaling

我想通过动画使 UIImageView 的宽度变大。我在故事板中有一个 UIView 和 UIImageView 。我想要实现的是看起来视图从左到右缩放，并保持其原始位置。我已经尝试了以下代码，但它所做的是从其父视图的左上角为图像视图设置动画，并移动和缩放它，直到它到达从一开始就具有的位置和缩放。

```
[UIView animateWithDuration:4.0f delay:1.0f options:UIViewAnimationCurveEaseOut animations:^{
    CGRect currentFrame = self.imageview1.frame;
    currentFrame.size.width = 150;
    self.imageview1.frame = currentFrame;
}completion:nil]; 
```

有什么想法为什么会出现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T12:14:09.210

答案有点晚，但我解决了问题。如果启用了自动布局，您似乎无法更改代码中的视图框架。相反，您需要为视图的约束设置动画，您可以在情节提要中设置它，然后像这样设置动画：

```
[self.view layoutIfNeeded];
[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{

    self.bottomViewY.constant = -196;

    [self.view layoutIfNeeded];

} completion:nil]; 
```

self.bottomViewY 是一个被分配为 IBoulet 的约束。您需要调用 layoutIfNeeded 因为它会更新约束。

# playframework - Playframework 独立作业两次连接到数据库

> ID：12881514
> 
> 赞同：0
> 
> 时间：2012-10-14T10:49:05.870
> 
> 标签：playframework, playframework-2.0

我在 Play 2.0.4 中有一个独立的工作，我想在 Heroku 上运行，如[https://github.com/jamesward/play2-scheduled-job-demo](https://github.com/jamesward/play2-scheduled-job-demo)中所述 我启动应用程序就像在示例中一样：

```
public class QueueWorker {
    public static void main(String[] args) {
        Application application = new Application(new File(args[0]), QueueWorker.class.getClassLoader(), null, Mode.Dev());
        Play.start(application);
    }
} 
```

但是现在，从日志来看，Play 出于某种原因连接了*两次*数据库，而 EhCache 第二次失败了，因为它的名称已经注册：

```
[[37minfo[0m] play - database [default] connected at jdbc:mysql://localhost/myproject?characterEncoding=UTF-8
[[37minfo[0m] play - database [default] connected at jdbc:mysql://localhost/myproject?characterEncoding=UTF-8
Exception in thread "main" net.sf.ehcache.ObjectExistsException: Cache play already exists
    at net.sf.ehcache.CacheManager.addCache(CacheManager.java:990)
    at play.api.cache.EhCachePlugin.x$3(Cache.scala:111)
    at play.api.cache.EhCachePlugin.cache(Cache.scala:109)
    at play.api.cache.EhCachePlugin.onStart(Cache.scala:127)
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:45)
    at play.api.Play$.start(Play.scala:60)
    at play.api.Play.start(Play.scala)
    at jobs.QueueWorker.main(QueueWorker.java:32)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

有趣的是，当我使用“play run”命令启动项目时，这不会发生。有没有人向我暗示这可能是什么，或者我如何调试它的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:11:06.147

As it turns out the problem lies with the play-authenticate module. Even if you remove all entries from play.plugins and just let it sit in your dependencies, it will generate this kind of error. I created an error report at [https://github.com/joscha/play-authenticate/issues/23](https://github.com/joscha/play-authenticate/issues/23) and hope it will be fixed soon.

# java - javax.crypto.Cipher 的输出灵活性，re: 固定大小的 ByteBuffers

> ID：12881517
> 
> 赞同：1
> 
> 时间：2012-10-14T10:49:21.703
> 
> 标签：java, pool, bytebuffer, encryption

有谁知道是否可以使用**javax.crypto.Cipher**类用任意数量的加密数据逐步填充***固定大小的 ByteBuffers（池化缓冲区）的顺序链？***也就是说，无需分配和填充任何其他中间缓冲区数组。我的特殊情况的加密是 CBC 模式下的 AES。

我希望有类似于 CharsetEncoder 的 encode(CharBuffer input, ByteBuffer output, boolean endOfInput) 方法的东西，它可以很好地控制写入输出，包括写入到给定限制和根据需要在输出缓冲区之间切换的能力。

从表面上看，这似乎可以使用 Cipher 的**update(ByteBuffer input, ByteBuffer output)**方法来实现，其中输入的限制已在调用之前设置，即。以避免超出输出缓冲区的容量。如果我正确理解 API 文档，Cipher 实现可能会在调用此方法之间缓冲任何数量的加密数据，因此可以想象，对 update() 或 doFinal() 的单个调用可能需要输出 ByteBuffer 的容量大于可从池中的固定大小缓冲区中获得。在这种情况下，根据这两种方法的文档：

> 如果 output.remaining() 字节不足以容纳结果，则会抛出 ShortBufferException。在这种情况下，使用更大的输出缓冲区重复此调用。使用 getOutputSize 确定输出缓冲区的大小。

有谁知道是否有办法解决这个问题？也许某种方式在 update() 调用之间刷新加密数据以防止过多的缓冲区积累......？我还没有走上尝试 CipherOutputStream 的道路。同样，关键目标是使用加密数据直接填充一系列固定大小的 ByteBuffer，而无需分配/填充中间字节数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:57:12.320

为了最终调查类似需求的任何人的利益：

我最终确实使用 Cipher 的`update(ByteBuffer input, ByteBuffer output)`方法来填充 ByteBuffer，但是它只使用一个输出缓冲区，而不是在一系列固定长度的缓冲区之间切换。正如文档所建议的那样（尽管我尽量避免使用此方法），调用 getOutputSize() 用于获取下一次 update() 调用的输出大小上限，并根据需要分配新缓冲区。

无论是否使用 CipherOutputStream 及其 flush() 方法，您可以对密码输出进行多少控制都是有限制的。这是有道理的：例如，如果将输入的前 15 个字节提交给 128 位（16 字节）分组密码（例如 AES），则输出将始终被保留，直到收到进一步的输入。刷新可能会阻止密码缓冲超过数据块大小，但如果你想使用它`update(ByteBuffer input, ByteBuffer output)`来巧妙地填充尽可能多的输出，然后为下一次调用保留剩余的输出，那么你就不走运了 -您需要提供自己的中间“溢出”缓冲区来帮助分配字节。这是可行的，但有点混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:01:38.547

如果数据是任意的，那为什么需要加密呢？只需生成一些随机数据并将其输入您的字节数组即可。为了加密安全，只需使用加密质量的 RNG，例如`SecureRandom`. 这可用于生成任意数量的字节，请参阅`SecureRandom.nextBytes()`.

否则，我认为您已经提到了解决问题的方法：`CipherOutputStream`.

# performance - Oracle 数据分页优化

> ID：12881519
> 
> 赞同：0
> 
> 时间：2012-10-14T10:49:35.247
> 
> 标签：performance, oracle, pagination

```
select * from (
 select t_tmp_a.*, rownum t_tmp_id from (
 select  t.*, i.counts  
 from table1 t, (select id, count(id) counts from table2 group by id) i
 where t.id=i.id and t.kindid in (0,1,3) order by t.id desc
) t_tmp_a where rownum <= 20) t_tmp_b where t_tmp_id >= 11; 
```

table1 和 table2 每张表有超过 200 万条数据，执行这个查询需要 18 秒，在这个查询执行之前我们应该计算总计数大约需要 7 秒，所以它花费了 25 秒以上，有什么优化的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:35:33.593

分页通常是一种向人类显示结果的机制。没有人愿意读取 200 万行数据。

因此，如果此查询确实将行呈现给真实的人，那么您需要解决的是将整个结果的大小减小到人类大小的大小。所以你需要在数据库中应用额外的过滤器并返回一个聚焦的结果集。不仅您的用户会感谢您，您的网络管理员也会感谢您。

另一方面，如果这种数据洪流的预期接收者是计算机或其他机械设备，那么就给它整个东西。机器大多不关心页面，或者如果他们关心页面（电子表格、打印机等），它们有内置的子例程来为我们处理分页。

* * *

所以这给我们留下了一个问题，即您的原始查询需要很长时间才能执行。如果没有任何解释计划或统计信息（有多少行`table1`符合搜索条件？这些值的限制程度如何`kindid`？）很难解决这个问题。

> “kindid 是一种只有三个选择（0,1,3）的类型”

福特。如果 KINDID 只能有*三个*选择，那么在 WHERE 子句中使用它有什么意义？

事实上，从 WHERE 子句中删除它可能会显着提高查询的性能。除非您为该列收集了直方图，否则 Oracle 会假设这`in (0,1,3)`会以某种方式限制结果集；而只有当大多数行在该列中有 NULL 时，这才是正确的。如果是这种情况，最好使用`kindid is not null`.

# visual-studio-2012 - Windows Store 风格的桌面应用程序

> ID：12881521
> 
> 赞同：8
> 
> 时间：2012-10-14T10:49:46.347
> 
> 标签：visual-studio-2012, windows-store-apps

是否支持在 Visual Studio 2012 中以**Metro**风格（类似于 Microsoft Zune）开发**桌面**应用程序？

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T10:54:31.417

不，你不能（开箱即用）。您可以做的是将 WPF 与为桌面应用程序实现 Metro 风格的库一起使用，例如：

*   [MahApps.Metro](http://mahapps.com/MahApps.Metro/)

    ![在此处输入图像描述](../Images/81f89f1b871ddf5bb48557b6312392b4.png)

*   [极乐世界](http://elysium.codeplex.com/)

    ![在此处输入图像描述](../Images/d0a48d953d8995520f2148a431902ffb.png)

*   [APEX](http://apex.codeplex.com/)（来自[此处](http://www.codeproject.com/Articles/408211/A-Zune-Style-Application-Template-for-WPF-and-Silv)的屏幕截图）

    ![在此处输入图像描述](../Images/dfdd52f67d165e83e34309edf3650a03.png)

*   [地铁工具包](http://metrotoolkit.codeplex.com/)

或者通过自定义 WPF 控件（模板）来滚动您自己的控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T22:11:23.310

又找到了一个

[http://mui.codeplex.com](http://mui.codeplex.com)

![地铁用户界面](../Images/86643d5b3a62ba576304bc2c6f7ad646.png)

它带有控件，并且看起来正在积极开发:)**

# hibernate - 尝试使用 GROUP BY 时出现 Hibernate/PostgreSQL JPAQueryException

> ID：12881528
> 
> 赞同：0
> 
> 时间：2012-10-14T10:50:32.367
> 
> 标签：hibernate, postgresql, heroku, playframework, hql

我使用 Hibernate 得到以下异常：

> > JPAQueryException 发生：执行查询时出错 select f from Flyer as f join f.events as e where e.start > ? 和 e.start < ? 并且 f.popularityTag > 1 组按 f 顺序按 sqrt((-118.39419-f.venue.lng) * (-118.39419-f.venue.lng)+(34.024353-f.venue.lat)*(34.024353-f.场地.lat)) asc：错误：列“venue2_.lng”必须出现在 GROUP BY 子句中或用于聚合函数

上面显示了查询的 HQL。HQL 生成的 SQL 如下：

> > 选择 flyer0_.id 作为 id345_，flyer0_.venue_id 作为venue77_345_ from flyer0_inner join event events1_ on flyer0_.id=events1_.flyer_id 交叉加入场地venue2_ where flyer0_.venue_id=venue2_.id 和 events1_.start>？和 events1_.start1 按 flyer0_.id 按 sqrt((-118.39419-venue2_.lng)*(-118.39419-venue2_.lng)+(34.024353-venue2_.lat)*(34.024353-venue2_.lat)) 顺序分组

表格是传单、活动和场地。

事件表跟踪传单的开始和停止时间......一个传单可以在多天重复......因此有多个事件。

每个传单都有一个场地，传单上的广告将在那里进行。

就我的数据库而言，我使用的是 Heroku PostgreSQL Crane，如以下 URL 中所述。我相信它使用 PostgreSQL 9.1：

*   [https://postgres.heroku.com/blog/past/2012/5/3/crane_the_new_50_per_month_production_database_/](https://postgres.heroku.com/blog/past/2012/5/3/crane_the_new_50_per_month_production_database_/)
*   [https://addons.heroku.com/heroku-postgresql](https://addons.heroku.com/heroku-postgresql)
*   [https://devcenter.heroku.com/articles/heroku-postgresql](https://devcenter.heroku.com/articles/heroku-postgresql)

在休眠方面，我正在使用的 Play Framework 1.2.5 似乎使用：

```
- org.hibernate -> hibernate-core 3.6.10.Final
- org.hibernate -> hibernate-commons-annotations 3.2.0.Final
- org.hibernate -> hibernate-entitymanager 3.6.10.Final
- org.hibernate -> hibernate-validator 4.1.0.Final 
```

我的问题是导致 JPAQueryException 的原因，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:43:15.483

我认为问题在于，在 Pg 9.1 及以下版本中，您必须列出 ORDER BY 中出现在 SELECT 中的所有列，除非它们在聚合中使用。9.2 及更高版本可以计算出，如果 PRIMARY KEY 列在 GROUP BY 中，那么其他所有内容也都被隐式分组。

看起来您可以通过合并子查询来重新表述查询以解决该问题：

```
select f
from Flyer as f
where exists (
  SELECT 1 FROM f.events as e
  where e.start > ? and e.start < ? and f.popularityTag > 1
)
order by sqrt((-118.39419-f.venue.lng) * (-118.39419-f.venue.lng)+(34.024353-f.venue.lat)*(34.024353-f.venue.lat)) asc 
```

我还没有测试过，我写的 HQL 也不多，所以你可能需要调整它，但这个想法应该得到贯彻。

# c# - DI，为一个接口定义注册多个实例

> ID：12881532
> 
> 赞同：3
> 
> 时间：2012-10-14T10:50:58.653
> 
> 标签：c#, dependency-injection

我有一个界面`INavigationService`和一个简单的容器，允许使用和不使用密钥进行注册。

这对我很有用，因为框架会将注册的实例注入到我的视图模型的构造函数中。

现在我有多个导航服务（由于我的 UI 中的框架）。它们都实现了相同的基本接口 ( `INavigationService`)。

我希望能够让容器将这些实例注入正确的导航树（框架 + 后续视图/视图模型），而无需传递参数（DI 注册密钥）。

这通常是怎么做的？

我可以想象一些基于属性的东西（因此将注册密钥放在所有依赖类定义中）。但容器不支持这一点。似乎也很麻烦。

我还可以创建一个专门用于标记的界面。因此`INavigationService<T>`，并使用不同的类型参数注册每个导航服务。例如帧的第一个视图的类型。这会给我我需要的解决方案，尽管我会传递没有任何意义的接口。

另一方面，我获得了 IDE 对查找依赖视图的支持（例如，通过创建类似`FileTreeNavigation : INavigationService<FileTreeView>`

还有其他模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:48:10.177

我不确定这如何适用于 Caliburn Micro，但由于问题是关于模式的，我将在这里描述我设法用[StrucureMap](http://docs.structuremap.net/)解决这个问题的方法：使用`Ctor<>`允许为构造函数参数解析指定具体类型的方法。

另外，我认为使用专用接口（您的`FileTreeNavigation`示例）很棒，但是如果由于某种原因您认为这不合适，请继续阅读。

假设我们有`INavigationService`接口和两个不同的实现：

```
public interface INavigationService { }
public class NavigationServiceA : INavigationService { }
public class NavigationServiceB : INavigationService { } 
```

接下来，我们有两个不同的 Service 类，都依赖于`INavigationService`接口：

```
public class ServiceA
{
    private readonly INavigationService _navigationService;

    public ServiceA(INavigationService navigationService)
    {
        _navigationService = navigationService;
    }
}

public class ServiceB
{
    private readonly INavigationService _navigationService;

    public ServiceB(INavigationService navigationService)
    {
        _navigationService = navigationService;
    }
} 
```

最后，我们有一个将使用 IoC 容器解析的类。该类同时依赖于`ServiceA`和`ServiceB`，定义如下：

```
public class SomeClassToResolve
{
    private readonly ServiceA _serviceA;
    private readonly ServiceB _serviceB;

    public SomeClassToResolve(ServiceA serviceA, ServiceB serviceB)
    {
        _serviceA = serviceA;
        _serviceB = serviceB;
    }
} 
```

StructureMap 提供了指定使用什么类型来解析构造函数参数的可能性。这是注册的样子：

```
ForConcreteType<ServiceA>().Configure.Ctor<INavigationService>().Is<NavigationServiceA>();
ForConcreteType<ServiceB>().Configure.Ctor<INavigationService>().Is<NavigationServiceB>(); 
```

现在，当我调用`container.GetInstance<SomeClassToResolve>();`它时，它将构造一个 的实例`SomeClassToResolve`，该实例具有 的实例`ServiceA`并`ServiceB`正确构造（分别具有`NavigationServiceA`和`NavigationServiceB`）。

这是一种方法，我发现它更直接。也有可能进行[Conditional Construction](http://codebetter.com/jeremymiller/2009/01/19/conditional-object-construction-in-structuremap-i-e-fun-with-lambdas/)，但我认为这会变得非常复杂。

**PS：**搜索*“caliburn 微构造函数”*时，我偶然发现了[这种方法](https://stackoverflow.com/a/6570374/390819)，它看起来与我使用 StructureMap 所做的类似（只是这里称为`InjectionConstructor`）。

# clojure - 调用invokeStaticMethod 无法解决？

> ID：12881538
> 
> 赞同：5
> 
> 时间：2012-10-14T10:51:16.017
> 
> 标签：clojure

我编写了一个相当原始的测试程序（我正在为 LWJGL 的 OpenGL 类编写一个包装器，主要是出于美观的原因，我决定将多线程带入其中，因为我之前实际上从未编写过并发程序）。~~程序完成后，我总是收到警告~~

我实际上在程序进入主函数之前得到了警告。很抱歉造成混淆（我认为这可能根本不是我的程序，而是 clojure 本身的东西）：

```
Reflection warning, NO_SOURCE_PATH:1 - call to invokeStaticMethod can't be resolved. 
```

我在编译期间没有收到任何警告，我觉得这很奇怪。无论如何，这是程序：

```
(ns opengltuts.core
  (:import (org.lwjgl.opengl GL11 Display))
  (:use opengltuts.opengl)) ;my wrapper

(def world-state (ref {:running true :color [1.0 0.0 0.0 1.0]}))

(defn render-world [state]
  (apply glClearColor (:color state))
  (glClear GL11/GL_COLOR_BUFFER_BIT)
  (Display/update))

(defn render []
  (Display/create)
  (loop []
    (let [world @world-state]
      (when (:running world)
        (do (render-world world)
          (recur)))))
  (Display/destroy))

(defn -main []
  ; without the annotation, I get a warning here too.
  (let [render-thread (doto (Thread. ^Runnable render) (.start))]
    (Thread/sleep 3000)
    (dosync (commute world-state assoc :color [0.0 1.0 0.0 1.0]))
    (Thread/sleep 3000)
    (dosync (commute world-state assoc :running false))
    (.join render-thread))) 
```

这可能不是太惯用（我听说在 Clojure 中你通常不使用 启动线程`new Thread`，而是使用 Agents 或其他东西，但我还没有完全掌握它是如何工作的），但我猜对于这么短的程序没关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:49:52.673

您的 Clojure 源代码正在运行时加载和编译（请参阅[http://clojure.org/compilation](http://clojure.org/compilation)），这就是为什么您在程序执行之前看不到反射警告的原因。

很难确定您在哪里对静态方法进行反射调用，因此我推荐以下步骤：

1.  添加`(:gen-class)`到您的`(ns)`声明中
2.  添加`(set! *warn-on-reflection* true)`或`(binding [*warn-on-reflection* true] body)`您怀疑正在发生反射调用的位置。

# android - 如何使用 textwatcher 从列表视图中搜索数据？

> ID：12881546
> 
> 赞同：1
> 
> 时间：2012-10-14T10:51:54.337
> 
> 标签：android, listview

我创建了一个列表视图，其中数据来自存储在`string.xml`.

我有一个 edittext，我想从我的 listview 中搜索特定数据。我的 listview 数据包含这样的 011 Delhi delhi... 我该怎么做？

这是我的代码..

```
adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, arrayList);

Resources res = getResources();
String[] a = res.getStringArray(R.array.states);
arrayList.add("" + a);
adapter.notifyDataSetChanged();

editText.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before,
                              int count) {
        // TODO Auto-generated method stub
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
                                  int after) {
        // TODO Auto-generated method stub
    }

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T10:57:26.127

我希望下面的代码对你有用。

```
public class MainActivity extends Activity {
    private ListView lv;
    private EditText et;
    String listview_array[]={"123","TWO","Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "1234", "iPhone 4S", "Samsung Galaxy Note 800", "Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};
    private ArrayList<String> array_sort = new ArrayList<String>();
    int textlength = 0;

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lv = (ListView) findViewById(R.id.ListView01);
        et = (EditText) findViewById(R.id.EditText01);
        lv.setAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, listview_array));
        int x= lv.getHeaderViewsCount ();
        et.addTextChangedListener(new TextWatcher()
        {
            public void afterTextChanged(Editable s)
            {
                // Abstract Method of TextWatcher Interface.
            }
            public void beforeTextChanged(CharSequence s,
            int start, int count, int after)
            {
                // Abstract Method of TextWatcher Interface.
            }
            public void onTextChanged(CharSequence s,
            int start, int before, int count)
            {
                textlength = et.getText().length();
                array_sort.clear();
                for (int i = 0; i < listview_array.length; i++)
                {
                    if (textlength <= listview_array[i].length())
                    {
                        if (et.getText().toString().equalsIgnoreCase(
                        (String)
                        listview_array[i].subSequence(0,
                        textlength)))
                        {
                            array_sort.add(listview_array[i]);
                        }
                    }
                }
                lv.setAdapter(new ArrayAdapter<String>
                (MainActivity.this,
                android.R.layout.simple_list_item_1, array_sort));
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:27:38.943

在您的适配器中使用此代码。

```
public void filter(String charText) {
        charText = charText.toLowerCase();
        picList.clear();
        if (charText.length() == 0) {
            picList.addAll(listpicOrigin);
        } else {
            for (Picture pic : listpicOrigin) {
                if (pic.getPicName().toLowerCase().contains(charText)) {
                    picList.add(pic);
                }
            }
        }
        notifyDataSetChanged();
    } 
```

更多细节可以参考[本教程](http://www.9android.net/adding-search-functionality-to-custom-listview/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T11:02:55.393

你可以这样搜索：

```
String text_to_search = editText.getText().toString();
for(String str : your_list) {
    if(str.equals(text_to_search) {
        //Do your operation
    }
} 
```

如果你想要一个索引，那么你可以使用我们的传统`for`循环。

# google-apps-script - 将电子表格导出为 pdf，然后将文件保存在谷歌驱动器中

> ID：12881547
> 
> 赞同：3
> 
> 时间：2012-10-14T10:51:59.123
> 
> 标签：google-apps-script

将谷歌电子表格打印为 pdf 后，我在保存到谷歌驱动器时遇到问题。如果我只是将“printurl”字符串放入浏览器，它会自动给我文件。但我希望它自动保存到谷歌驱动器。我通过从其他将电子表格作为 PDF 发送电子邮件的帖子中借用代码来尝试此代码。但这会产生一个无法打开的pdf。我究竟做错了什么？

```
function printpdf() {
var spreadsheet_id="0Aiy1DTQRndx6dDRidXoxNzlXZFhxd2FITTlBbnUybnc";
var settings = '&fitw=true&portrait=false&exportFormat=pdf&gid=0&gridlines=false';
var printurl = 'https://spreadsheets.google.com/feeds/download/spreadsheets/Export?   key=' + spreadsheet_id + settings;
var result=UrlFetchApp.fetch(printurl);
var content=result.getContent();
var file=DocsList.createFile("temp",content,"application/pdf");
} 
```

这是在新的 oauth2 格式下对此问题的更新。

[将电子表格打印为 PDF，然后使用 OAuth2 将文件保存在云端硬盘中](https://stackoverflow.com/questions/30586559/printing-spreadsheet-to-pdf-then-saving-file-in-drive-using-oauth2)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T13:18:00.443

你可以用更简单的方式来做

```
function printpdf(){

  var spreadsheet_id="0Aiy1DTQRndx6dDRidXoxNzlXZFhxd2FITTlBbnUybnc";
  var spreadsheetFile = DocsList.getFileById(spreadsheet_id); 
  var blob = spreadsheetFile.getAs('application/pdf'); 
  DocsList.createFile(blob);
} 
```

请注意，DocsList.createFile(blob) 仅适用于 Google Apps 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:03:00.930

你是那个意思吗？

```
 var id = SpreadsheetApp.getActiveSpreadsheet().getId();
  var sheetName = getConfig(SHEET_NAME_CELL);
  var dataSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(sheetName);

  if (!dataSheet) {
    Browser.msgBox("Can't find sheet named:" + sheetName);
    return;
  }

  var dataSheetIndex = dataSheet.getSheetId();

 //this is three level authorization 
  var oauthConfig = UrlFetchApp.addOAuthService("google");
  oauthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oauthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope=https://spreadsheets.google.com/feeds/");
  oauthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oauthConfig.setConsumerKey("anonymous");
  oauthConfig.setConsumerSecret("anonymous");

  //even better code
  //oauthConfig.setConsumerKey(ScriptProperties.getProperty("consumerKey"));
  //oauthConfig.setConsumerSecret(ScriptProperties.getProperty("consumerSecret"));

  var requestData = {
    "method": "GET",
    "oAuthServiceName": "google",
    "oAuthUseToken": "always"
  };

  var url = "https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key=" + id +  "&gid=" + dataSheetIndex + "&fitw=true&size=A4&portrait=true&sheetnames=false&printtitle=false&exportFormat=pdf&format=pdf&gridlines=false";

  //Save File to Google Drive 
  var seplogoBlob = UrlFetchApp.fetch(url, requestData).getBlob().setName("Filename.pdf");
  DocsList.createFile(seplogoBlob); 
```

# javascript - 函数和对象 Javascript

> ID：12881552
> 
> 赞同：4
> 
> 时间：2012-10-14T10:52:47.173
> 
> 标签：javascript, function, object, constructor

我一直在阅读 Stoyan Stefanov 的《面向对象的 Javascript》一书。我看到这句话：

> function 实际上是一个使用“Function”构造函数（大写 F）构建的对象。

作者用一些很好的例子证明了这一点。但是，基于该陈述，我得到了这个自己无法回答的问题。由于 'Function' 构造函数是一个**函数**，所以 'Function'**函数**是一个**Object**，那么 'Function'**对象**需要另一个构造函数来构建它，而另一个构造函数又是一个 Object （因为它是一个**函数**）。

好吧，我最终得到了这个无穷无尽的逻辑。有人可以帮我指出我思考的错误点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:23:53.920

> 'Function' 函数是一个对象，那么 'Function' 对象需要另一个构造函数来构建它

No.`Function`是一个原生的内置对象，其属性和行为在[EcmaScript 规范的第 15.3 节](http://ecma-international.org/ecma-262/5.1/#sec-15.3)中定义。它不是由 js 函数构建的。

可以这样想：在您的 EcmaScript 环境的代码中某处构建函数对象的函数 - 每当您的脚本遇到函数表达式或声明时都会调用它。全局`Function`函数是该函数的包装器，以使其可供脚本访问。该函数返回的所有函数对象都继承自该`Function.prototype`对象 - 看起来它们是由`Function`. `Function.prototype.constructor`所有函数继承的属性也[被定义](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.1)为指向`Function`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:28:40.377

JS 中的函数嵌入了 2 个概念：

1.  实体
2.  一个功能

功能实体是某种包含功能的“胶囊”，即将多个输入转换为输出的能力。这个胶囊就是我们所说的“物体”。在此递归结束时，您会找到 identity `Function.constructor === Function`，它设置了语言内省特征的限制。其余的 JS 功能无法由语言本身访问，因为不存在任何嵌入它们的封装或对象。

在 JS 中，您不能定义独立的“功能”，但您可以创建实现此类功能的对象，这些功能可以被视为任何其他对象。`Function`对象是实现功能的核心对象。如果您定义命名或匿名函数（通过`function`关键字），您正在创建一个绑定到名称（对于命名函数）或直接绑定到变量（未命名函数）的 Function 对象。

```
function foo(a, b) { return a+b; } //This function is a Function object bound to the name `foo`

var a = function(a, b) { return a+b; } //the Function object is bound to `a` 
```

与 Array 对象具有`[]`用于访问数组元素的运算符相同的方式，您可以将其解释`()`为用于调用其嵌入功能的 Function 对象的运算符。

# r - 向散点图添加对数回归线（与 Excel 比较）

> ID：12881553
> 
> 赞同：7
> 
> 时间：2012-10-14T03:09:30.073
> 
> 标签：r, regression

在 Excel 中，很容易拟合给定趋势线集的对数趋势线。只需单击添加趋势线，然后选择“对数”。切换到`R`更大的功率，我有点迷失应该使用哪个函数来生成它。

为了生成图表，我使用`ggplot2`了以下代码。

```
ggplot(data, aes(horizon, success)) + geom_line() + geom_area(alpha=0.3)+
  stat_smooth(method='loess') 
```

但是代码会进行局部多项式回归拟合，该拟合基于对许多小的线性回归进行平均。`R`我的问题是在 Excel中是否有类似的日志趋势线。

编辑：我正在寻找的另一种方法是以 y = (c*ln(x))+b; 形式获得对数方程。是否有一个 coef() 函数来获取“c”和“b”？

Edit2：因为我有更多的声誉，我现在可以发布更多关于我正在努力做的事情。让我的数据是：

```
0.599885189,0.588404133,0.577784156,0.567164179,0.556257176,0.545350172,0.535112897,
0.52449292,0.51540375,0.507271336,0.499904325,0.498851894,0.498851894,0.497321087,
0.4964600,0.495885955,0.494068121,0.492154612,0.490145427,0.486892461,0.482395714,
0.477229238,0.471010333 
```

上面的数据是 y 点，而 x 点只是从 1:length(y) 开始的整数，以 1 为增量。在 Excel 中：我可以简单地绘制它并添加对数趋势线，结果如下所示：

![在此处输入图像描述](../Images/a4cc99235299defdd8d9966b27376483.png)

黑色是原木。在 R 中，如何使用上述数据集执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T11:32:31.057

我更喜欢使用基本图形而不是`ggplot2`：

```
#some data with a linear model
x <- 1:20
set.seed(1)
y <- 3*log(x)+5+rnorm(20)

#plot data
plot(y~x)

#fit log model
fit <- lm(y~log(x))
#look at result and statistics
summary(fit)
#extract coefficients only
coef(fit)

#plot fit with confidence band
matlines(x=seq(from=1,to=20,length.out=1000),
         y=predict(fit,newdata=list(x=seq(from=1,to=20,length.out=1000)),
                   interval="confidence")) 
```

![在此处输入图像描述](../Images/0d7b79cc6d32fa455a5921dced415050.png)

```
#some data with a non-linear model
set.seed(1)
y <- log(0.1*x)+rnorm(20,sd=0.1)

#plot data
plot(y~x)

#fit log model
fit <- nls(y~log(a*x),start=list(a=0.2))
#look at result and statistics
summary(fit)

#plot fit
lines(seq(from=1,to=20,length.out=1000),
      predict(fit,newdata=list(x=seq(from=1,to=20,length.out=1000)))) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-14T23:12:40.757

您可以轻松指定替代平滑方法（例如`lm()`，线性最小二乘拟合）和替代公式

```
library(ggplot2)
g0 <- ggplot(dat, aes(horizon, success)) + geom_line() + geom_area(alpha=0.3)
g0 + stat_smooth(method="lm",formula=y~log(x),fill="red") 
```

置信带会自动包含在内：我更改了颜色以使它们可见，因为它们非常窄。您可以使用`se=FALSE`in`stat_smooth`关闭它们。

![在此处输入图像描述](../Images/52519165ba553e3f379821d255dddde1.png)

另一个答案向您展示了如何获得系数：

```
coef(lm(success~log(horizon),data=dat)) 
```

我可以想象您接下来可能想要将方程添加到图表中：请参阅在图表[上添加回归线方程和 R2](https://stackoverflow.com/questions/7549694/ggplot2-adding-regression-line-equation-and-r2-on-graph)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T03:47:51.997

我很确定一个简单的 +scale_y_log10() 会得到你想要的。GGPlot 统计数据是在转换后计算的，因此 loess() 将在对数转换后的数据上进行计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-15T14:18:16.587

我刚刚[在这里写了一篇博](http://blog.richpollock.com/2014/07/replicating-excels-logarithmic-curve-fitting-in-r/)文，描述了如何精确匹配 Excel 的对数曲线拟合。方法的核心围绕[`lm()`](http://cran.r-project.org/doc/manuals/r-release/R-intro.html#Linear-models)功能：

```
# Set x and data.to.fit to the independent and dependent variables
data.to.fit <- c(0.5998,0.5884,0.5777,0.5671,0.5562,0.5453,0.5351,0.524,0.515,0.5072,0.4999,0.4988,0.4988,0.4973,0.49,0.4958,0.4940,0.4921,0.4901,0.4868,0.4823,0.4772,0.4710)
x <- c(seq(1, length(data.to.fit)))
data.set <- data.frame(x, data.to.fit)

# Perform a logarithmic fit to the data set
log.fit <- lm(data.to.fit~log(x), data=data.set)

# Print out the intercept, log(x) parameters, R-squared values, etc.
summary(log.fit)

# Plot the original data set
plot(data.set)

# Add the log.fit line with confidence intervals
matlines(predict(log.fit, data.frame(x=x), interval="confidence")) 
```

希望有帮助。

# java - 导入包时出错

> ID：12881555
> 
> 赞同：0
> 
> 时间：2012-10-14T10:52:55.863
> 
> 标签：java, swing, identifier

```
package textar;
import java.awt.*;
import javax.swing.*;
public class textarea extends JInternalFrame
{
     public static JTextArea txtaMessage;
     textarea() {
         super("Private Cloud Environment",true,false,true,true);       
         txtaMessage=new JTextArea();
         JScrollPane  scrollPane=newJScrollPane(txtaMessage,
                                    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                    JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
         txtaMessage.setFont(new Font("Serif", Font.BOLD, 16));
         txtaMessage.setEditable(false);
         getContentPane().setLayout(new GridLayout(1,1));
         getContentPane().add(scrollPane);
         setSize(650,650);
         setVisible(true);
     }
} 
```

所以上面是我的代码块，它必须在下面的程序中调用

```
import package textar.*;
public Main()
{                   
    //creating object for textarea InternalFrame
    textarea objtxta=new textarea();
    addFrame(objtxta);
} 
```

但是在编译的时候

```
 import package textar.*;
  ^
  1 error

  "error: identifier expected" pops out !! 
```

我跳过了 d 程序的其他部分，因为它们与包无关。

请帮帮我！！并提前感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T10:58:27.423

此处声明中关键字的使用`package`无效。`import`您可以使用：

```
import textar.*; 
```

您的调用类似乎没有声明该类：

```
import textar.*;

public class Main {

   public Main() {                   
    //creating object for textarea InternalFrame
    textarea objtxta=new textarea();
    addFrame(objtxta);
   }
   ... 
```

`JScrollPane`类中声明的关键字之间也应该有空格`textarea`：

```
JScrollPane scrollPane = new JScrollPane(txtaMessage,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS); 
```

# node.js - 在 Express 3.0 中捕获和跟踪中间件异常（less-middleware）

> ID：12881556
> 
> 赞同：3
> 
> 时间：2012-10-14T10:53:07.857
> 
> 标签：node.js, exception, express, less

首先，我尝试遵循这个问题（但适应了 Express 3.0）：

[Nodejs：如何从中间件中捕获异常？](https://stackoverflow.com/questions/4063764/nodejs-how-to-catch-an-exception-from-middleware)

```
app.use(function(err, req, res, next) {
    console.error('Middleware exception:' + err.stack);
    next(err);
}); 
```

但是，无论我将它放在中间件链的哪个位置，在`app.use(lessMiddleware);`（从`require('less-middleware')`）之前或之后，我仍然会得到：

```
GET /? 304 44ms
  source : <my path>/style.less
  dest : <my path>/style.css
  read : <my path>/style.less
DEBUG: 

DEBUG: <my path>/node_modules/less-middleware/node_modules/less/lib/less/parser.js:385
                        throw new(LessError)(e, env);
                              ^

DEBUG: [object Object]

DEBUG: Program node app.js exited with code 1 
```

亲爱的读者，如何解决这个问题？我想要：

*   显示错误堆栈跟踪
*   显示服务器错误页面而不是崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:07:56.763

令我惊讶的是，问题出在较少的中间件中。我有点期待它是一个更成熟的解决方案。我修复了它并[在 Github 上提出了拉取请求](https://github.com/emberfeather/less.js-middleware/pull/16)。希望这可以帮助遇到同样问题的任何人。干杯。

# real-time - 为什么 Google Docs 操作转换会在删除方面出错？

> ID：12881557
> 
> 赞同：7
> 
> 时间：2012-10-14T10:53:10.060
> 
> 标签：real-time, google-docs, google-drive-api, google-wave, operational-transform

今天尝试了这个实验：为一个谷歌文档打开了两个离线编辑器。在一个，我加粗了第一个词。第二次，我删了。不管我先打开哪个客户端，这个词总是会被删除。

首先，为什么会这样——我对运营转型的理解是排序很重要？在两个人分别输入“a”和“b”的简单示例中，如果服务器首先收到“a”，它将通过将第二个人的“b”事件转换为“传递一个空格”来强制输出“ab” ，然后添加 b" 事件，反之亦然。

其次，如果订购无关紧要，那么 Google Docs 选择在删除方面犯错是否有技术原因？或者原因很大程度上对用户来说很简单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-02-07T08:29:28.053

这是（5年后我知道）正在发生的事情的图形解释（实际上是@osma描述的，但图形解释了）：

当您在 GDocs 中加粗一个字符串时，您实际上是将字符串包装到一个容器中，可能是`<strong></strong>`它们可能使用任何其他语法。为简单起见，我们只说加粗字符串只需要在单词开头有一个“+”。这样文本“lorem ipsum”就会变成`lorem +ipsum`而不是`lorem <something>ipsum<something>`

# 1

Alice 和 Bob 都有起始文本“Lorem ipsum” [![在此处输入图像描述](../Images/953d55219afd17ef3dd9c0936ca7c43c.png)](https://i.stack.imgur.com/EWfze.jpg)

# 2

然后鲍勃删除“ipsum”。请注意，他发送给服务器的是变更集`retain(6), delete(5)`。变更集本质上是一个补丁，它的结构很可能基于[这个库](https://github.com/GerHobbelt/google-diff-match-patch)。 [![在此处输入图像描述](../Images/95fc9db56f4c2b9554d4792a794274e4.png)](https://i.stack.imgur.com/8VKz5.jpg)

# 3

Alice 将“ipsum”加粗（添加“+”）。请注意，她发送的是变更集`retain(6), insert(+), retain(5)` [![在此处输入图像描述](../Images/c78e9c64f13e5fbafe53538e755b7724.png)](https://i.stack.imgur.com/MuuFR.jpg)

# 4

两个变更集现在都正在传送到对这些变更集一无所知的服务器。 [![在此处输入图像描述](../Images/7336bfda7deff829917853664047a95e.png)](https://i.stack.imgur.com/5SmIc.jpg)

# 5

假设最坏的情况：Bob 的包裹先到，然后这个词会被删除。（另一种情况很明显）。 [![在此处输入图像描述](../Images/64e92a914941d8c8852a8c11d6d00ab3.png)](https://i.stack.imgur.com/X9Ulu.jpg)

# 6

当 Alice 的包裹到达时，它只会在文本中添加一个“+”，因为**她发送的只是一个 changeset**。 [![在此处输入图像描述](../Images/68c1f02f4705194e2493630039221176.png)](https://i.stack.imgur.com/KXxcu.jpg)

# 7

两个文本都是向客户端广播的变更集。这是第一个。 [![在此处输入图像描述](../Images/dc203c3c9f05e3644d07b560a5d1df19.png)](https://i.stack.imgur.com/xa4go.jpg)

# 8

这是第二个。 [![在此处输入图像描述](../Images/4c9a0c38e66c0ff7248f1b3b2422b17d.png)](https://i.stack.imgur.com/Eb7io.jpg)

# 9

在将这些变更集修补到原始文本中之后，您最终会得到“Lorem +”。这个符号稍后会被一个常见的 HTML 清理过程删除，该过程会消除任何带有格式的标签`<tag></tag>`，

[![在此处输入图像描述](../Images/46f63357805928785313af254f82ced8.png)](https://i.stack.imgur.com/4RzBZ.jpg)

要测试此演示，请访问：http: [//operational-transformation.github.io/visualization.html](http://operational-transformation.github.io/visualization.html)。在那里，您可以在发送/接收文本和包裹时玩它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T01:26:19.310

这不是在删除方面犯错的问题。

如果两个客户端都具有平等有效但不同版本的真相，Google Docs 必须选择支持一个版本，或者强制用户解决冲突，这本质上是复杂且难以解释的。

因此，Google Docs 的“真相”是文档的一致性，而不是意图的辨别。最好通过破坏信息更容易地实现一致性——一种熵倾向。

所有这一切基本上都是我的半哲学BS虽然......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-14T12:25:36.960

OT 不会尝试辨别意图，它会按产生一致结果的顺序应用转换。当您将这两项更改应用到文档时，应用它们的顺序无关紧要。

“第一秒”->“第一**秒**”->“第一”

“第一秒”->“第一”->“第一”

在第二个流中，对长度为零的字符串执行粗体操作。

如果在其中一个文档中将第二个单词斜体，这与您得到的结果完全相同：无论转换顺序如何，最终结果都是“第一***秒”。***删除转换也不例外。

# google-app-engine - 在 Google Application Engine 中不调用数据存储回调

> ID：12881560
> 
> 赞同：1
> 
> 时间：2012-10-14T10:53:50.560
> 
> 标签：google-app-engine, jpa, callback, google-cloud-datastore

我有一个简单的 GAE 应用程序，使用 JPA 和 GAE 的 eclipse 插件（sdk 版本 1.7.2）。

我只有一个简单的实体映射了 2 个属性： 1 Key key；和一个字符串名称。我只创建了一个类（取自 gae 的“Datastore Callbacks”文档）

```
public class PostPutCallbacks {
static Logger logger = Logger.getLogger(PostPutCallbacks.class.getName());

 @PostPut
 public void collectSample(PutContext context) {

     logger.fine("Finished putting " + context.getCurrentElement().getKey());
 }
} 
```

未调用数据库回调。我尝试了其他几个注释（@PrePut @PreGet），但它们仍然不起作用。 **我也尝试过使用 Datastore 低级别 API，但仍未调用回调。**

我在网上搜索以查看除了为 Eclipse 手动添加的注释处理 jar 之外是否还有配置，但我没有找到任何东西.. 谁能给我提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:33:33.077

我想在这个线程中提供更多信息。如果您看不到正在触发的数据存储回调。按照文档说明尝试此[过程。](https://developers.google.com/appengine/docs/java/datastore/callbacks#Using_Callbacks_With_Eclipse)您需要在 Eclipse 中设置一些简单的项目才能使其工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:15:10.423

我跳得有点快到stackoverflow..我不得不重新启动eclipse并且它起作用了

# javascript - 获取行匹配

> ID：12881561
> 
> 赞同：0
> 
> 时间：2012-10-14T10:53:52.883
> 
> 标签：javascript, regex

下面是我拥有的示例字符串。

`143s: WHAT IS <span>THAT</span>? 144s: HEAR THAT? 152s: EVERYBODY, SHH. SHH. 156s: <span>STAY</span> UP THERE. 163s: [BOAT CREAKING] 165s: WHAT IS THAT? 167s: [SCREAMING] 191s: COME ON! 192s: OH, GOD! 193s: AAH! 249s: OK. WE'VE HAD SOME PROBLEMS 253s: AT THE FACILITY. 253s: WHAT WE'RE ATTEMPTING TO <span>ACHIEVE</span> 256s: HERE HAS <span>NEVER</span> BEEN DONE. 256s: WE'RE THIS CLOSE 259s: TO THE REACTIVATION 259s: OF A HUMAN BRAIN CELL. 260s: DOCTOR, THE 200 MILLION 264s: I'VE SUNK INTO THIS COMPANY 264s: IS DUE IN GREAT PART 266s: TO YOUR RESEARCH.`

考虑 , string with`ns:`和 text, after is 作为单行。

例如`259s: OF A HUMAN BRAIN CELL.`

我需要正则表达式，它返回给我的行有，

```
Previous Line of Line having span tag if any + Line having span tag  + Next Line of having span tag if any 
```

所以上面的字符串应该返回我 3 个匹配项。

```
1st : 143s: WHAT IS <span>THAT</span>? 144s: HEAR THAT?
2nd : 152s: EVERYBODY, SHH. SHH. 156s: <span>STAY</span> UP THERE. 163s: [BOAT CREAKING]
3rd : 253s: WHAT WE'RE ATTEMPTING TO <span>ACHIEVE</span> 256s: HERE HAS <span>NEVER</span> BEEN DONE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:38:27.240

# jquery - 如何使用 nuget 包管理器附带的 jquery-1.8.2.intellisense 文件

> ID：12881563
> 
> 赞同：1
> 
> 时间：2012-10-14T10:54:46.127
> 
> 标签：jquery, visual-studio-2012

我正在使用 Visual Studio 2012，我想启用 jquery 智能感知。目前我没有得到 jquery 的智能感知。我不知道如何使用 nuget 附带的 jquery-1.8.2.intellisense 文件。任何形式的帮助都是值得的

# php - ADODB Firebird 2.5 如何将字符集设置为 ISO8859_1？

> ID：12881564
> 
> 赞同：1
> 
> 时间：2012-10-14T10:54:56.737
> 
> 标签：php, firebird, adodb, interbase

我有一个 php 脚本，它使用 sql select 来获取数据并将其放入文本表单域中进行编辑，然后在外部 php 文件中将其写回 firebird 数据库。

在主文件中，我将 HTML 图表集设置为 ISO8859_1，一切正常。

在外部保存文件中我无法设置它。所以当我保存到它时，我的火鸟数据库中有奇怪的字符。

```
$conn = ADONewConnection('ibase'); 
      $conn->Connect('localhost:C:\DATA.FDB','sysdba','masterkey'); 
```

我已经阅读了 ADODB 手册和其他几页，并在 8 小时内尝试了我能想象的一切，但没有运气。

编辑：我很抱歉，我完全混淆了 2 个文件，所以我在非 ADODB 版本之前发布了，上面是流线 ADODB 版本。那么我如何扩展它来改变图表集=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:07:28.047

字符集是[`ibase_connect`函数](http://php.net/manual/en/function.ibase-connect.php)的第四个参数，所以

```
$dbh = ibase_connect($host, $username, $password, 'ISO8859_1') 
```

应该做的伎俩。

# php - 如何在 PHP 和 MySQL 中返回特定行？

> ID：12881566
> 
> 赞同：0
> 
> 时间：2012-10-14T10:55:17.703
> 
> 标签：php, html, mysql, loops

我正在尝试添加一个鼠标悬停，它基本上适用于第一个 MySQL 返回的查询。但是它不会起作用。它不识别我的`IF ELSE`语句，它只是返回`ELSE`命令。

我的数据就像

```
gallery
----------------------
id      sku         img                     types
1       454_red     front.jpg                   F
2       454_red     back.jpg                    F
3       452_red     front.jpg                   F
4       452_red     back.jpg                    F
5       452_red     a1.jpg                      S   
6       452_red     a2.jpg                      S 
```

我的 PHP

```
<?
$imgsql=mysql_query("SELECT * FROM `gallery` WHERE `gallery`.`sku` = '".$r['sku']."' ORDER BY `gallery`.`type` ASC");
while($rimg=mysql_fetch_array($imgsql)){ 
?>
<? if($rimg == $rimg['0']){ ?>
        <div>
            <a href="product.php?prodref=<?=$r['sku']?>"><img src="//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg" onmouseover="this.src='//super.cdn.com/<?=$r['sku']?>/back.jpg'" onmouseout="this.src='//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg'"/></a>
        </div>
    <? } else { ?>
        <div>
            <a href="product.php?prodref=<?=$r['sku']?>"><img src="//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg"/></a>
        </div>
    <? } ?>
<? } ?> 
```

在`$r["sku"]`代码顶部调用，它位于产品列表循环中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:03:31.820

为简单起见，然后取另一个变量，例如计数器或标志，如下所示

```
<?
$count = 1;

$imgsql=mysql_query("SELECT * FROM `gallery` WHERE `gallery`.`sku` = '".$r['sku']."' ORDER BY `gallery`.`type` ASC");

while($rimg=mysql_fetch_array($imgsql)){ 
?>
<? if($count==1){ ?>
        <div>
            <a href="product.php?prodref=<?=$r['sku']?>"><img src="//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg" onmouseover="this.src='//super.cdn.com/<?=$r['sku']?>/back.jpg'" onmouseout="this.src='//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg'"/></a>
        </div>
    <? } else { ?>
        <div>
            <a href="product.php?prodref=<?=$r['sku']?>"><img src="//super.cdn.com/<?=$r['sku']?>/<?=$rimg['img']?>.jpg"/></a>
        </div>
    <? } ?>
<? 
$count = 0;
} 

?> 
```

# c# - 桌面和 Metro 应用程序之间的通信

> ID：12881567
> 
> 赞同：0
> 
> 时间：2012-10-14T10:55:25.667
> 
> 标签：c#, windows-8, microsoft-metro

> **可能重复：**
> [Windows 8 中的 Metro 应用程序如何与同一台计算机上的后端桌面应用程序通信？](https://stackoverflow.com/questions/7465517/how-can-a-metro-app-in-windows-8-communicate-with-a-backend-desktop-app-on-the-s)

我们公司长期开发桌面应用程序并尝试更新，我们想为其添加 Windows-8 支持。

我们很难用 Metro 风格重写整个应用程序，但我们可以简单地使用一些 Windows-8 的新功能，例如**Live Tile**。

尝试这样做，似乎我们应该开发一个与桌面应用程序通信的简单 Metro 应用程序。有没有标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:18:15.113

Metro（或现代）应用程序不应该对任何安装的软件有任何依赖关系（即它们应该是自包含的）。也就是说，可以绕过应用程序的环回预防，并通过 WCF 服务或套接字与另一个应用程序通信。有关更多信息，请参阅此[线程](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/f980fedb-eb7e-4ff9-a3fc-a5ed8e1419ec)。

作为对您问题的直接回答，我认为没有任何标准的方法可以做到这一点，因为它不应该这样做。

# c# - 如何从 yahoo 和 hotmail 获取未读电子邮件的计数

> ID：12881574
> 
> 赞同：2
> 
> 时间：2012-10-14T10:57:16.287
> 
> 标签：c#, email, outlook, yahoo, hotmail

我想计算 yahoo 和 hotmail 收件箱中未读电子邮件的数量，对于 gmail，有一种简单的方法可以做到这一点，即通过 Gmail 收件箱提要。我的问题是如何在 hotmail 和 yahoo 中获取未读消息计数？请告诉我所有的替代方案。

现在我只想得到未读的计数，不需要得到整个消息。我需要一个 C# 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:04:01.133

对于带有 POP 服务器的邮件帐户，您可以使用类似[http://hpop.sourceforge.net/的 pop 实现](http://hpop.sourceforge.net/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-14T11:03:33.287

使用 Gmail API：
[https ://developers.google.com/google-apps/gmail/](https://developers.google.com/google-apps/gmail/)

这是 C# 的包装器：http:
[//sourceforge.net/projects/gmail-api/](http://sourceforge.net/projects/gmail-api/)

我记得，在 Gmail API 中，您有一个方法可以返回一组未读邮件。

# playframework-2.0 - Ebean 2.7.3 / Play Framework 2.0.4 - OptimisticLockException / NullPointerException 使用 @Embedded

> ID：12881576
> 
> 赞同：3
> 
> 时间：2012-10-14T10:57:24.720
> 
> 标签：playframework-2.0, ebean

我遇到了集成在 Play Framework 2.0.4 中的 Ebean 2.7.3 的问题。

让我先解释一下它在框架中是如何工作的。当我想创建一个新对象时，我调用一个函数，该函数创建模型对象的新实例并将其发送到 Web 表单。提交表单后，将调用 save() 函数。此函数绑定表单中的值并将它们分配给模型对象的另一个新实例。然后它在对象上调用 update() 函数，并且所有内容都正确写入数据库。当我想更新一个对象时，方式几乎相同，只是有一些小区别。一开始，对象从数据库中加载，发送到表单，然后解析回来。不同之处在于，我也在解析更新对象的原始主键。然后，当我调用 update() 函数时，所有内容都正确写入，因为 ebean 知道主 ID，因此可以更新正确的对象。

问题开始了，当我添加一个`@Embedded`模型的属性。我能够创建新对象，保存它，读取它，但我无法更新它。当我尝试使用与我描述的相同的原理更新对象时，我遇到了 OptimisticLockException。当我调查 SQL 日志时，我发现 Ebean 正在使用 SQL 的 SET 部分中的所有模型属性以及 WHERE 子句中的所有属性进行更新。我知道这与 Ebean 文档中描述的乐观锁定机制有关。问题是 Ebean 在两个部分（SET 和 WHERE）中使用相同的值。似乎 Ebean 无法查找原始实体，因此无法使用 WHERE 部分中的旧值。因此，数据库中的对应实体永远不会被发现，也永远不会更新，返回一个 OptimistickLockException。`@Version`注解。所以我创建了一个名为 updatedStamp 的新属性，并用`@Version`. 使用这个原理，我在调用 update() 时遇到了 NullPointerException。

```
Caused by: java.lang.NullPointerException: null
com.avaje.ebeaninternal.server.core.PersistRequestBean.hasChanged(PersistRequestBean.java:728) 
```

所以我的问题是.. 有没有`@Embedded`在模型中使用属性的正确方法？我知道这在以前的 Ebean 版本中已经讨论过，但似乎没有可用的解决方案。

嗯..实际上我找到了一种方法来做到这一点。当我从 db 加载一个对象并保留这个类实例时，我可以更改它的属性并毫无问题地调用 update()。但实际上这对我来说不是一个解决方案，因为播放框架是无状态的，所以我无法在会话期间保留原始对象。我必须创建一个新的，用值填充它并保存它。没有@Embedded，这可以正常工作。

关于如何解决的任何线索？

# xml - XML格式中是否还有其他字符（例如＆符号）需要转换

> ID：12881578
> 
> 赞同：0
> 
> 时间：2012-10-14T10:57:32.197
> 
> 标签：xml, validation, rss, xml-serialization, feed

在为我的 PHP 程序编写自定义 RSS 提要时，我遇到了一个问题，即必须将 & 字符转换为`&amp;`. 我想知道是否还有其他类似的角色。感谢你的信息。

这是无效的：

```
<?xml version="1.0" encoding="UTF-8" ?>         
<rss version="2.0">
<channel>
    <title>custom user feed</title>                 
        <item>
            <description>
                <div>a & b</div>
            </description>
        </item>
</channel>      
</rss> 
```

参考：[为什么 RSS 不能处理 & 符号？](https://stackoverflow.com/questions/1030102/why-cant-rss-handle-the-ampersand)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:00:09.203

是的，至少，很明显这`<`会导致您出现问题，因为它将被视为标签的开始。它通常被编码为`&lt;`.

有关详细信息，请参阅[http://en.wikipedia.org/wiki/XML#Escaping 。](http://en.wikipedia.org/wiki/XML#Escaping)

# python - 如何验证发送电子邮件的结果？

> ID：12881589
> 
> 赞同：0
> 
> 时间：2012-10-14T10:58:33.287
> 
> 标签：python, google-app-engine, email

[我使用The Mail Python API](https://developers.google.com/appengine/docs/python/mail/)发送消息。有什么方法可以验证：

1.  消息已传递；
2.  消息被阅读？

（我指的是 MS Outlook 中的函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:42:47.250

GAE Python Mail API 不会提供有关邮件传递的任何信息。这个问题：[http](http://code.google.com/p/googleappengine/issues/detail?id=1800) ://code.google.com/p/googleappengine/issues/detail?id=1800已经存在了好几年了，还没有解决。

作为替代方案，您可以在 GAE 中使用 Amazon SES Web 服务。这很好用！

# haskell - 来自Just Haskell

> ID：12881590
> 
> 赞同：3
> 
> 时间：2012-10-14T10:58:33.910
> 
> 标签：haskell

我在将 Maybes 列表转换为字符串列表时遇到问题。

我的列表看起来像这样：[Nothing，Just 3，Just 9，Nothing，Nothing]。

我想用点 ('.') 替换所有 Nothing's，用“Int”替换所有 Just Int's。

到目前为止，我的解决方案不起作用。

```
 [if c == Nothing then c = '.' else show (fromJust c) | c <- [Nothing, Just 3.... etc] ] 
```

我收到此错误消息：输入“=”时解析错误

我猜我不能只给 c '.' 的值。像Java或其他语言一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T11:09:23.613

您可以执行以下操作：

```
[if c == Nothing then '.' else show (fromJust c) | c <- [Nothing, Just 3.... etc] ] 
```

你不需要写这`c =`部分；只说返回什么。

但是，您可能想要的是`maybe`函数。它需要一个替换为的值`Nothing`，以及一个在它为`Just`. 在你的情况下，

```
[maybe "." show c | c <- [...whatever...] ] 
```

应该这样做。或者你可以做

```
map (maybe "." show) [...whatever...] 
```

任你挑逗。（恕我直言，后者更清楚。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T11:03:05.300

`maybe`从 Data.Maybe使用

```
import Data.Maybe

test = [Nothing, Just 3, Just 9, Nothing, Nothing]

f :: Show a => [Maybe a] -> [String]
f = map (maybe "." show) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-14T11:08:10.557

您的问题是您正在尝试使用列表推导来*修改*列表中的元素`c='.'`。这是 Haskell，所以你永远不会修改任何东西！（好吧，除了`STRef`or `IORef`，但让我们把它排除在外）。

```
[if c == Nothing then "." else show (fromJust c) | c <- [Nothing, Just 3.... etc] ] 
```

诀窍：您不必指定要替换`c`为`"."`，列表推导本身的使用已经暗示了这一点。您只需要将其作为`if`语句的输出值。

（注意，我用 替换`'.'`了`"."`，这当然是必要的，因为输出列表的所有元素都必须具有相同的类型。`show (fromJust c)`必须具有 type `String`，所以我们不能将`Char`s like`'.'`放入同一个列表中。）

但是 Satvik 和 MathematicalOrchid 提到的替代方案更好。`if`在 Haskell 中，如果有标准库中的高阶函数（如函数）的替代方案，您通常会尝试避免显式语句等`maybe`。如果你自己写明确的决定，你应该更喜欢模式匹配`if`，比如

```
[ case c of
     Nothing -> "."
     Just number -> show number
 | c <- [Nothing, Just 3.... etc] ] 
```

# mysql - 从 Blob 转换为文本后，“文本”列仍将数据显示为“[BLOB - 225B]”？

> ID：12881591
> 
> 赞同：2
> 
> 时间：2012-10-14T10:58:36.533
> 
> 标签：mysql, database, type-conversion

在我的一个网站上，我有一张最初类型为`Blob`. 通过**phpMyAdmin**，我转到该特定列的“结构”，并将其更改为`Text`.

现在，在表的“结构”下，该列正确显示为`Text`而不是`Blob`，但是当我实际单击“浏览”该表的行时，该列中的每个新旧行仍然显示为`[BLOB - 225B]`而不是显示其中包含的文本。

这让我认为转换没有正确完成，因为如果我没记错的话，带有 type 的列`Text`应该显示其内容而不是 standard `[BLOB - 225B]`。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:15:09.553

我怀疑由于 TEXT 和 BLOB 仅在排序和排序方面有所不同，因此它们在内部是相同的。检查排序规则。

# internet-explorer - 用于填充 IE 字段的 VBS 脚本：难以使用 iframe

> ID：12881592
> 
> 赞同：1
> 
> 时间：2012-10-14T10:58:55.267
> 
> 标签：internet-explorer, iframe, vbscript, field, populate

我定期将数据输入第三方数据库。我正在尝试制作一个简单的 VBscript，它将从我自己的 Excel 电子表格中提取数据并将其放置在 Internet Explorer 的第三方输入表单中。该过程正在运行，除非我在输入表单上找到 iframe。非常感谢您对此的任何帮助。我是新手。

在启动 VBS（长篇故事）之前，我需要该表单已经打开，因此我的脚本需要查找打开的页面。我找到了一个已经这样做的脚本。我创建了一个演示入口系统，它是这样的：

**索引.htm**

```
<html>
<body>

<p>First input box is on the_index.htm (main document).</p>
<input id="title" name="title-1" style="width: 220px;" title="enter title" type="text" value="">

<br /><br /><br /><br />
<iframe frameborder="0" id="input_frame" marginheight="0" marginwidth="0" name="input_frame" src="the_iframe.htm">

</body>
</html> 
```

**the_iframe.htm**

```
<html>
<body>
<p>Second input box is on the_iframe.htm (iframe called from the main document).</p>
<input id="title" name="title-1" style="width: 220px;" title="enter title" type="text" value="">
</body>
</html> 
```

那么我的 VBS 目前看起来像这样（遗憾的是必须托管演示 htms，以便脚本可以找到页面（见第一行）：

**输入脚本.vbs**

```
surl ="http://www.website.com/index.htm"
set ie = nothing
set shapp=createobject("shell.application")
on error resume next
For Each owin In shapp.Windows
     if left(owin.document.location.href,len(surl))=surl then
        if err.number = 0 then
        set ie = owin
          end if     
    end if
err.clear
Next
on error goto 0
if ie is nothing then
    wscript.echo "Window Not Open"

else
IE.Document.All.Item("title").Value = "wheee1"
IE.Document.frames("input_frame").All.Item("title").Value = "wheee2"
end if 
```

“wheee1”部署工作正常，但 wheee2 生成“对象不支持此属性或方法：'ie.document.frames(...).All'。如果我摆脱了“.All”，那么错误就是“找不到成员”。

谁能告诉这里是否有一个简单的修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T02:40:26.877

您可以通过`IE.Document.frames("input_frame")`. 由于它不是文档，因此您也需要包含`Document`此地址。

```
IE.Document.Frames("input_frame").Document.All("title").Value = "wheee2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T19:32:42.097

我很欣赏这是一篇 od;d 帖子，但对于任何在这里挣扎的人来说，我使用的都是“小”解决方案。

要获得一个打开的窗口——这仅在您使用 IE、firefox 等未使用此代码注册时才有效：

```
 For Each AW in CreateObject("Shell.Application").Windows 
```

> 'AW = 活动窗口

```
 If Typename(AW.Document) = "HTMLDocument" Then 
```

> '这将选择打开的窗口文件夹，如果没有这个检查就会崩溃

```
 If InStr(1,AW.Document.Title,<String HTML Title>) > 0 Then Exit For
   End If
 Next 
```

> 'AW 将成为您之后的 HTML 窗口，可以像创建 IE 对象一样使用，

例如。

```
Set oIe = CreateObject("InternetExplorer.Application") 
```

顺便说一句，与 Excel 交互的对象是：

```
Set xl = CreateObject("Excel.Application") 
```

然后你可以打电话给 xl。和你正常的 vba 命令

```
xl.workbook().worksheets().cells().value etc 
```

IFrame 部分 - 这个部分的难点在于它是一个 Window 对象而不是一个文档对象

所以你有你的活动窗口，你想导航到 iframe：

```
Set iFra = AW.Document.GetElementById(<String - iframe id>) 
```

或集合：

```
For each iFra in AW.Document.GetElementsByTagName("iframe")
  iFra...
Next 
```

拥有 iframe 后，您需要使用 .ContentWindow 属性

所以从上面 iFra.ContentWindow

可以像 AW 1 一样使用它们来获取所有嵌套属性

例如

```
iFra.ContentWindow.Document.GetElementById(<String - ID>).Value = "Sorted" 
```

请注意，使用此功能时，如果内容刷新，则您需要重新抓取 iframe 对象（上面的设置 IFra 命令）

使用 IE 开发人员（IE 中默认为 f12）查看 html 时的一个有用提示，在 iframe 中激活您想要的字段，然后在开发人员中刷新 HTML，然后您应该能够将 get 元素与 iframe 内容一起使用。

# c# - gtk#文本编辑应用程序将光标放在缓冲区的开头？

> ID：12881596
> 
> 赞同：1
> 
> 时间：2012-10-14T10:59:19.293
> 
> 标签：c#, gtk#

在我的 gtk# 文本编辑应用程序中，当文件打开时，即 textview.Buffer.Text，设置为文件内容，光标放在缓冲区的末尾，而`textview` 视图仍然滚动在顶部，我可以以某种方式将光标设置到缓冲区的开头吗？我试过了：

```
 Gtk.TextIter iter;
        iter = textview1.Buffer.GetIterAtLine(0);

        textview1.Buffer.Insert(iter, ""); 
```

但它什么也没做:(

# java - 在 Mac OS X 上使用 JTable 进行拖放

> ID：12881600
> 
> 赞同：1
> 
> 时间：2012-10-14T10:59:54.710
> 
> 标签：java, macos, swing, jtable, drag-and-drop

我对 Mac 上的 DnD 和 JTable 有疑问。如果您启动以下程序并在表格中单击（快速），有时会选择某些内容，有时会在一段时间后执行 DnD，应用程序崩溃或至少 DnD 将不再可能。我在 2 台 Mac 上对其进行了测试。

Java 版本：1.6.0_35 Mac OS X：10.6.8

有谁可以证实这一点？任何解决方法？

```
package tablednd;

import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.SwingUtilities;

public class TableDnD {
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            Object[][] data = {
                {"Mary", "Campione", "Snowboarding", new Integer(5), new Boolean(false)},
                {"Alison", "Huml", "Rowing", new Integer(3), new Boolean(true)},
                {"Kathy", "Walrath", "Chasing toddlers", new Integer(2), new Boolean(false)},
                {"Mark", "Andrews", "Speed reading", new Integer(20), new Boolean(true)},
                {"Angela", "Lih", "Teaching high school", new Integer(4), new Boolean(false)}
            };

            String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};

            final JTable table = new JTable(data, columnNames);
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            table.setDragEnabled(true);
            frame.add(table);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T18:33:16.653

将拖动的行放在桌子上的其他任何地方时，我（有时）会得到下面显示的错误，直到 Mac OS X 10.5.8。目标选择矩形保留在屏幕上，无法进行进一步的拖动操作。我不知道为什么，但我想一个单元格不被识别为一行的合适目的地。

```
2012-10-14 14:14:23.912 java[44061:10b] ***-[NSWindowViewAWT draggingEnded:]:
    无法识别的选择器发送到实例 0x1001e7140
2012-10-14 14:14:23.913 java[44061:10b] ***-[NSWindowViewAWT draggingEnded:]:
    无法识别的选择器发送到实例 0x1001e7140

```

将拖动的行放到另一个应用程序上可以按预期工作。

顺便说一句，[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)可以简化初始化代码：

```
Object[][] data = {
    {"Mary", "Campione", "Snowboarding", 5, false},
    {"Alison", "Huml", "Rowing", 3, true},
    {"Kathy", "Walrath", "Chasing toddlers", 2, false},
    {"Mark", "Andrews", "Speed reading", 20, true},
    {"Angela", "Lih", "Teaching high school", 4, false}
}; 
```

附录：此图显示了正在进行的拖动；触发异常后，拖动框架时灰色矩形保持不动。

![图片](../Images/3bc32039b8f95cb3982c32fde0a72ca8.png)

作为一种解决方法，有一个解决方案可以[完全禁用灰色矩形](https://stackoverflow.com/a/23180733/3151902)。

# android - 模拟透明按钮的点击效果

> ID：12881606
> 
> 赞同：7
> 
> 时间：2012-10-14T11:00:47.703
> 
> 标签：android, android-layout

> **可能重复：**
> [ImageButton 在点击透明背景时不突出显示](https://stackoverflow.com/questions/12825613/imagebutton-doesnt-highlight-on-click-with-transparent-background)

我制作了一个自定义栏，其中有带有属性的按钮

```
 android:background="@android:color/transparent" 
```

我的问题是，当我点击按钮时，点击效果不会触发（在这种情况下，按钮应该变成蓝色并淡出原来的颜色 - 这里是透明的 - ）。

如何启用它或只是模拟效果？有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T12:01:21.357

似乎透明是一个糟糕的选择。最好有

```
style="?android:attr/borderlessButtonStyle" 
```

效果相同，无需创建另一个自定义 xml

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:33:19.853

您需要在“自定义背景”下使用`selector`检查： http: [//developer.android.com/guide/topics/ui/controls/button.html](http://developer.android.com/guide/topics/ui/controls/button.html)

# jquery - 单击外部元素时，jquery 类列表切换为关闭

> ID：12881608
> 
> 赞同：0
> 
> 时间：2012-10-14T11:00:54.083
> 
> 标签：jquery, toggleclass

对 jquery/javascript 很陌生，但精通 html/css...

我有一个 .item 类的兄弟姐妹列表。每个都是地图上的一个大头针。我想实现三件事：

*   单击时打开/关闭切换，使用我使用 CSS 操作的“活动”类
*   当一个 .item 打开时，单击另一个并关闭它并打开新的
*   在 .item 外部单击时，它将关闭

我见过一些使用 ID 的示例，但希望我可以只使用 .item 类，或者可能是父 id - #map。

我已经使用 toggleClass() 实现了第一点

```
$('#map .item').click(function() {
    $(this).toggleClass('active');
}); 
```

简化的html：

```
<div id="map">
    <div class="item"></div>
    <div class="item"></div>
    <div class="item"></div>
</div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:19:55.777

如果我正确理解，这应该有效：

```
$(function () {
    $('#map .item').click(function(evt) {
        evt.stopPropagation(); //stops the document click action
        $(this).siblings().removeClass('active');
        $(this).toggleClass('active');
    });

    $(document).click(function() {
        $('#map .item').removeClass('active'); //make all inactive
    });
}); 
```

您可以在此处阅读有关事件冒泡的更多信息[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:29:00.930

像这样的东西也将起作用：

```
$("#map .item").click(function(e) {
    var self = $(this)[0];
    $(".item").each(function(index) {
        if (self == $(this)[0])
            $(self).addClass("active");
        else
            $(this).removeClass("active");
    });
});
$("body").click(function(e) {
    if (!e.target.id == "map" || !$(e.target).parents("#map").size()) { 
        $(".item").removeClass("active");
    }
}); 
```

[这是它工作的小提琴](http://jsfiddle.net/UT4AG/)示例。

# ruby - Sinatra：列出目录的所有 .txt 文件

> ID：12881615
> 
> 赞同：0
> 
> 时间：2012-10-14T11:02:39.183
> 
> 标签：ruby, sinatra

我是 Sinatra 的新手，在我的一个项目中遇到了问题。

我尝试列出目录中的所有 .txt 文件（注释），所以我编写了以下代码：

```
get '/' do
files = Dir['notes/*.txt']
p files
end 
```

它工作得很好，我得到一个这样的字符串：

> example1.txtnotes/example2.txtnotes/example3.txtnotes

比，我试图将字符串分成几部分，所以我使用了：

```
files.split('/') 
```

但这行不通。Sinatra 向我显示了一个错误页面。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:09:13.990

Dir 返回一个没有#split 方法的数组。要拆分数组中的每个文件名，您需要这样：

```
files.map { |f| f.split('/') } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:22:08.880

请报告您遇到的错误类型。你可以试试这个

> `files.split(/\//)`

# ffmpeg - 如何立即开始 Quicktime 流式传输

> ID：12881623
> 
> 赞同：0
> 
> 时间：2012-10-14T11:03:10.867
> 
> 标签：ffmpeg, video-streaming, html5-video, quicktime

我正在尝试使用`<video>`标签从 HTML 文档中流式传输 Quicktime 文件。

视频格式为：

```
Video: h264 (Main), yuv420p, 640x360, 2175 kb/s, 24 fps, 24 tbr, 24 tbn, 48 tbc
Audio: aac, 48000 Hz, stereo, s16, 104 kb/s 
```

但是，浏览器在下载整个文件（这需要几分钟）**之后**才会开始播放视频。当然，我希望视频尽快开始流式传输。

给我视频文件的人记得他的视频编辑软件中有一些“流媒体友好”输出选项，该选项之前解决了类似的问题。但是，许多视频文件不再具有原始项目文件，因此无法重新生成。

所以我的问题是：如何使现有的视频文件立即流式传输？（我的机器上有 FFMPEG）？或者解决方案是否在其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T02:46:57.877

另一种将 moov atom 移动到开头以使其立即播放的方法是 qt-faststart。

`qt-faststart input_file output_file`会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T02:06:43.080

您需要提示文件，以便 mov 原子位于文件的开头。一个很好的工具是 MP4Box。

```
MP4Box -hint input_file.mp4 
```

然后它应该可以立即播放。

# time - 分布式环境理念

> ID：12881629
> 
> 赞同：0
> 
> 时间：2012-10-14T11:03:36.330
> 
> 标签：time, process, communication, global, distributed

我需要找到一些具有以下假设的实际应用程序：

1.  我们有几个可以相互通信的进程（在同一台机器上或分布式）
2.  一个时间单位有 T 秒。我们在每个进程中都可以访问这个全局时间。
3.  在每 T 秒，全局时间增加一个单位。只有当前时间单位有一个全局数据区，进程可以在其中读/写。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:10:21.243

听起来您需要一个[实时操作系统](http://en.wikipedia.org/wiki/Real-time_operating_system)(RTOS)。您可能会发现[RTLinux](http://en.wikipedia.org/wiki/RTLinux)是一个有用的操作系统。您可能还想检查这两个超链接。

# opencv - OpenCV 2.4.2 imshow 导致崩溃

> ID：12881632
> 
> 赞同：5
> 
> 时间：2012-10-14T11:04:00.697
> 
> 标签：opencv

我对 opencv 2.4.2 有这个讨厌的问题。我使用 VS 2012 来编译这个简短的测试程序。

```
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>

using namespace cv;

int main()
{
    Mat sudoku = imread("sudoku.jpg",0);
    namedWindow("Lines", CV_WINDOW_AUTOSIZE);

    imshow("Lines", sudoku);

} 
```

Imshow是问题所在。当我删除它时，它运行没有任何问题。我在这里找到了一个提示，它说要使用调试库，但它没有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T11:21:26.040

首先，您必须检查图像是否正确加载。为此，只需检查是否`image.data`存在`NULL`。

其次，调用后`imshow`你必须调用`waitKey`显示图像： http: [//opencv.willowgarage.com/documentation/cpp/user_interface.html#cv-waitkey](http://opencv.willowgarage.com/documentation/cpp/user_interface.html#cv-waitkey)

这是整个代码：

```
#include <opencv2/opencv.hpp>
#include <iostream>

using namespace std;
using namespace cv;

int main()
{
    Mat sudoku = imread("sudoku.jpg",0);

    if (sudoku.data == NULL)
    {
        cout << "No image found! Check path." << endl;
        return 1;//ERROR
    }
    else
    {
        namedWindow("Lines", CV_WINDOW_AUTOSIZE);
        imshow("Lines", sudoku);
        waitKey();//without this image won't be shown
        return 0;//OK
    }

} 
```

# ios - 在不使用 aws 的情况下为 RestKit 生成 S3 存储桶 url

> ID：12881633
> 
> 赞同：0
> 
> 时间：2012-10-14T11:04:04.853
> 
> 标签：ios, xcode, amazon-s3, restkit

我有一个成功使用 RestKit 的应用程序。我正在应用程序中构建 IAP，对于 iOS5，我需要一个地方来托管 IAP 的应用程序文件。我决定为此使用 Amazon S3。

现在我可以集成 amazon API，但我希望保持我的应用程序简单，因为我使用的是 RestKit，所以我只想用它来下载文件。

是否有关于如何生成具有过期和秘密的存储桶 url 的指南或解释？

谢谢

沙尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:01:24.330

当然：您需要的所有信息都在[Authenticating REST Requests](http://s3.amazonaws.com/doc/s3-developer-guide/RESTAuthentication.html)文档页面中。

此外，您的问题并不完全清楚，但我希望您将 URL 生成放在您控制的某个网络应用程序中，而不是直接将其嵌入到 IOS 应用程序中。我也希望您使用 IAM 将该密钥限制为适当的权限级别。

# c# - 如何使用按钮验证 c# 中文本框的内容？

> ID：12881635
> 
> 赞同：0
> 
> 时间：2012-10-14T11:04:05.600
> 
> 标签：c#, winforms, validation

嗨，一个允许用户输入几种不同类型数据的 GUI。如何验证用户输入以使其不为空白并检查某些值是否在数字范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:11:44.923

对于非空值，您只需要检查是否`string.IsNullOrWhiteSpace(value)`返回 true 或 false。

对于整数范围检查是否`value<=100 && value>=0`

对于日期，检查`DateTime.TryParseExact(value, "MM/dd/yyyy", CultureInfo.InvariantCulture, DateTimeStyles.None, out parsed)`是真还是假

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:12:32.270

您可以在您的类中创建`IsValid`（或类似的）方法`Student`（我假设这`student1`是类的对象`Student`）：

```
class Student
{
    // your code
    // ...
    public bool IsValid()
    {
        bool isValid = true;

        if(string.IsNullOrWhiteSpace(FirstName))
        {
           isValid = false;
        }
        else if(string.IsNullOrWhiteSpace(LastName))
        {
           isValid = false;
        }
        // ... rest of your validation here

        return isValid;
    }
} 
```

然后：

```
private void button1_Click(object sender, EventArgs e)
{
    student1.FirstName = firstnamebox.Text;
    student1.SecondName = secondnamebox.Text;
    student1.DateofBirth = DateTime.Parse(dobtextbox.Text).Date;
    student1.Course = coursetextbox.Text;
    student1.MatriculationNumber = int.Parse(matriculationtextbox.Text);
    student1.YearMark = double.Parse(yearmarktextbox.Text);

    if(student1.IsValid())
    {
        // good
    }
    else
    {
        // bad
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:12:40.273

windows控件中的验证，请阅读以下文章

[Windows 窗体的验证器 - ValidationProvider 控件](http://www.codeproject.com/Articles/10093/Validators-for-Windows-Forms-ValidationProvider-Co)

[Windows 窗体中的用户输入验证](http://msdn.microsoft.com/en-us/library/ms229603.aspx)

[在 Windows 窗体和 C# 中使用错误提供程序控件](http://www.c-sharpcorner.com/UploadFile/DipalChoksi/UsingErrorProviderContolinWindowsFormsandCSharp11242005010829AM/UsingErrorProviderContolinWindowsFormsandCSharp.aspx)

对于 Web 表单。

[Web 表单中的验证控件](http://www.c-sharpcorner.com/UploadFile/DipalChoksi/ValidControlsWebFDPLCHK211232005034800AM/ValidControlsWebFDPLCHK2.aspx)

# gwt - gwt 中子控件和父控件之间的交互设计

> ID：12881637
> 
> 赞同：1
> 
> 时间：2012-10-14T11:04:26.967
> 
> 标签：gwt, mvp

我正在使用 gwt 开发一个 UI，并且要求在子小部件上执行某些操作的情况下，父小部件需要采取一些与此相对应的操作。

例如，我有一个主面板（父面板），其中有一个子小部件列表。根据对任何子小部件的更改，需要更新其他小部件内容。

在这种情况下要遵循的正确设计是什么，即 1 选项是： - 孩子捕获更改事件并更新自己。向父小部件引发事件，然后更新子小部件。- 其他替代方法是在父组件本身中拥有子组件的更改处理程序，然后父组件可以将更改传播到其他组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:00:43.063

您只需要一个事件处理程序。例如：

```
ClickHandler h = new ClickHandler() {
    public void onClick(ClickEvent event) {
        Widget sender = (Widget) event.getSource();

             if (sender == child1) {
                // update child1
                // update child 2
             } else if (sender == child2) {
                // update child2
                // update child1
             }
        }
    }
}
parent.addDomHandler(h, ClickEvent.getType()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:05:47.600

我认为最好的选择是使用 EventBus。简单解释如何使用它：[http](http://tv.jetbrains.net/videocontent/gwt-event-bus-basics) ://tv.jetbrains.net/videocontent/gwt-event-bus-basics 。首先 - 定义子小部件的事件。并通过 EventBus 使用它们。看看这个答案：[https ://stackoverflow.com/a/6030379/904820](https://stackoverflow.com/a/6030379/904820)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:31:34.087

您可以使用 Child 的 UiHandlers 以及 Parent Widgets。请通过链接。 [https://developers.google.com/web-toolkit/doc/latest/DevGuideUiHandlers](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiHandlers)

# php - SimpleXML 特殊字符？

> ID：12881642
> 
> 赞同：0
> 
> 时间：2012-10-14T11:05:04.630
> 
> 标签：php, xml, encoding, character-encoding, simplexml

我有一个像这样的简单 XML 脚本：

```
$file='example.xml';
if (file_exists($file)) {
    $xml = simplexml_load_file($file);
    $f = fopen('newfile.csv', 'w');

    // array to hold the field names
    $headers = array(); 
    // loop through the first set of fields to get names
    foreach ($xml->Information->children() as $field) { 
        // put the field name into array
        $headers[] = $field->getName(); 
    }
    // print headers to CSV
    fputcsv($f, $headers, ',', '"');

    foreach ($xml->Information as $information) {
        fputcsv($f, get_object_vars($information), ',', '"');
    }
    fclose($f);
} 
```

但是如果里面`example.xml`有一个`£`标志，那么`newfile.csv`里面会显示为`Â£`。

有什么办法可以克服这个吗？我不知道的编码，`example.xml`因为它是 wget'd 的远程文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:10:03.173

一种方法是检测文件中的编码，您可以通过在 curl 会话中处理标头来做到这一点。应该有一个`Content-Type`。否则，xml 规范将 utf-8 定义为基本字符集，因此您可以尝试使用它。

`mb_detect_encoding`如果你不想使用 curl也可以使用，但我会先尝试使用它。

然后，如果需要，您可以使用`iconv`或`mb_convert_encoding`将类型从任何类型更改为 utf-8 或您喜欢的字符集，然后保存文件。

再见

# sql - SQL Server 行号

> ID：12881648
> 
> 赞同：0
> 
> 时间：2012-10-14T11:05:59.620
> 
> 标签：sql, sql-server, sql-server-2008, row-number

我在`rownumber`使用别名列创建自定义时遇到问题。以下是一些示例数据：

表`question`：

```
id   title   
--   --------    
1     xx
2     xxx 
```

..

表`customerLikeQuestion`：

```
Id   QuestionId CustomerId
---------------------------
1       20          xx
2       100         xx 
xx 
```

询问：

```
SELECT  q.Id,
        (SELECT     COUNT(*) 
         FROM          dbo.CustomerLikeQuestion
         WHERE      (QuestionId = q.Id)) AS LikeCount
FROM dbo.Question AS q
ORDER BY likecount DESC 
```

上一个查询显示：

```
 id    LikeCount
2136    6
2138    5
2150    5 
```

现在我想放一个`rownumber`来计算一行的增量顺序。我尝试了以下查询：

```
SELECT     TOP (100) PERCENT Id,
           (SELECT     COUNT(*) AS Expr1
            FROM          dbo.CustomerLikeQuestion
            WHERE      (QuestionId = q.Id)) AS LikeCount, 
            row_number() over (order by likecount) as RowNum
FROM         dbo.Question AS q
ORDER BY likecount DESC 
```

但它给了我以下错误：

> *无效列 Likecount。*

我确实知道`Over()`不能使用别名，但是我怎样才能解决这个问题，无论是使用 CTE 还是子查询，我还没有想出任何想法。请帮忙。

正确的结果应该是这样的：

```
id  likecount, rownum
----------------------    
xx     6        1
xx     5        2 
xx     4        3
..     0        xx 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:08:24.487

试试这个

```
;WITH LiksCounts
AS
(
    SELECT Id,
           (SELECT     COUNT(*) AS Expr1
            FROM          dbo.CustomerLikeQuestion
            WHERE      (QuestionId = q.Id)) AS LikeCount
    FROM         dbo.Question AS q
     GROUP BY Id
)
SELECT TOP(100) *, row_number() over (order by likecount) as RowNum
fROM LiksCounts
ORDER BY RowNum ASC 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/82456/sql-server-row-number)

# javascript - 这是使用内部带有函数的对象的正确方法吗？

> ID：12881652
> 
> 赞同：0
> 
> 时间：2012-10-14T11:07:18.467
> 
> 标签：javascript, function, object, instance

这是创建对象并在其中放置函数的正确方法吗？我遇到的每个示例都使用易于理解和在实际情况中有效使用的代码。所以我试图通过这样做来解决这个问题。

```
function calc() //creating an empty object named calc
{
}

var calc = new calc(); //creating a new instance of the calc object

calc.arithmetic = function maths (input) 
{
    var str = input;
    var a=str.substr(1,1); 
    var b=str.substr(2,1);
    var c=str.substr(3,1);

    if(b == "+")
    {
        answerNumber = a + c;
    }
    else if(b == "-")
    {
        answerNumber = a + c;
    }
    else if(b == "*")
    {
        answerNumber = a * c;
    }
    else if(b == "/")
    {
        answerNumber = a / c;
    }
}
document.getElementById("input").value=answerNumber;

document.write(calc.arithmetic(input))  //calling the method in the context of the object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:10:14.563

您正在用一个仅包含 myArithmetic 的新对象覆盖 calc 。

相反，您应该这样做`calc.myArithmetic=function(){};`- 这会添加一个以您的函数为值的新属性，这可能是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:14:53.490

我会看看 Douglas Crockford 网站 (http://www.crockford.com/javascript/private.html)。

# c# - 当用户在 c# 代码隐藏的 jquery 对话框上单击“是”时执行操作

> ID：12881656
> 
> 赞同：0
> 
> 时间：2012-10-14T11:07:39.933
> 
> 标签：c#, jquery, asp.net, jquery-ui-dialog

现在我在asp.net中使用一个消息框但是我想用jquery来做同样的事情

```
 var DialogResult = MessageBox.Show("Do you want to create the File ?", "Start Invoicing", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
        if (DialogResult == DialogResult.Yes)
        {
           //perform some action
        }
        else
        {
         //this
        } 
```

这可以通过jquery实现吗？可以根据我要执行的内容更改 jquery 框的文本吗

请帮忙

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#cmdShowDialog').click(function (event) {
            event.preventDefault();
            var $dialog = $('<div>Dynamic Dialog with Buttons.</div>')
            .dialog
            ({
                title: 'Cancel',
                width: 300,
                height: 200,
                buttons:
                [{
                    text: "Yes",
                    click: function () {
                        $dialog.dialog('close');
                    }
                },
                {
                    text: "Cancel",
                    click: function () {
                        $dialog.dialog('close');
                    }
                }]
            });
        });
    });
</script>

   <asp:Button ID="cmdShowDialog" runat="server" Text="Show Dialog" /> 
```

已经尝试使用它，但我应该如何继续......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:50:42.177

你可以做这样的事情......
javascript：

```
<script type="text/javascript">
    function dialogYesNoCancel(btn1func, btn2func) {
        $("#dialogMessage").dialog({
            resizable: false,
            height: 140,
            modal: true,
            buttons: {
                Cancel: function () {

                    $(this).dialog("close");
                },
                No: function () {

                    $(this).dialog(btn2func());
                    $(this).dialog("close");

                },
                Yes: function () {
                    $(this).dialog(btn1func());
                    $(this).dialog("close");
                }
            }
        });
    };

    function func1() {
        $("#Button1").click();
    }

    function func2() {
        $("#Button2").click();
    }
</script> 
```

ASPX：

```
<asp:Button ID="Button1" clientidmode="Static" runat="server" Text="Button" onclick="Button1_Click" />
<asp:Button ID="Button2" clientidmode="Static" runat="server" Text="Button" onclick="Button2_Click" /> 
```

CS：

```
protected void Page_Load(object sender, EventArgs e)
    {       
        ScriptManager.RegisterStartupScript(this, this.Page.GetType(), Guid.NewGuid().ToString(), "dialogYesNoCancel(func1, func2)", true);
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        //do something
    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        //do something
    } 
```

# java - 异步多线程

> ID：12881660
> 
> 赞同：0
> 
> 时间：2012-10-14T11:08:15.673
> 
> 标签：java

我有一个集中的套接字类，负责发送和检索数据。我有 2 节课：

*   一个监听输入流和
*   另一个负责写入它。

监听在无限循环上运行，然后处理消息。对于同步，一旦我收到来自服务器的响应，我就会阻止读取并重置这些值。

现在我被异步困住了。我的服务中有 3 种方法。

1.  取得一些东西
2.  读东西
3.  说些什么。

在我的`getSomething`我想实现基于提供的布尔标志的异步功能。当我的应用程序启动时，我也会启动我的两个线程，如果我发送并发请求。

例如`readSomething`，首先然后我得到不是我想要`getSomething`的返回值，`readSomething`我可以在日志中看到输出在一段时间后出现。`getSomething``getSomething`

看起来 Future 对象需要提交一个新任务，该任务将在它自己的线程中运行，但是我设计这个应用程序的方式，我无法创建一个新线程。谁能给我一些关于我应该如何处理这种异步（如流程图等）的见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:33:34.443

如果您正在异步工作，这意味着应用程序的其他部分不关心异步工作*何时*完成。

您通常想要做的是在异步工作完成时通知另一部分。为此，您需要使用[“观察者模式”](http://en.wikipedia.org/wiki/Observer_pattern)（文章包括流程图）。

基本思想是，您的应用程序启动异步工作并在工作完成时收到通知。这样，您可以松散地耦合应用程序的两个部分。一个简单的例子：

```
/**
 * The observer
 */
public interface AsyncWorkDoneListener{

    /**
     * This method will be called when the async-thread is
     *  done.
     */
    public void done(Object unit);

}

/**
 * The worker (which does the asyc-work on another thread).
 */
public class AsyncWorker{

    private AsyncWorkDoneListener listener;

    /**
     * Set (you might want to maintain a list here) the current
     *  listener for this "AsyncWorker".
     */
    public void setListener(AsyncWorkDoneListener listener){
        this.listener = listener;
    }

    /**
     * Will do the async-work
     */
    public void doWork(){
        // Do the work in another thread...
        // When done, notify the registered listener with the
        //  result of the async work:
        this.listener.done(the_object_containing_the_result);
    }
}

/**
 * The application
 */
public class App implements AsyncWorkDoneListener{

    public void someMethod(){
        // Work on something asynchronously:
        mAsyncWorker.setListener(this);
        mAsyncWorker.doWork();
    }

    @Override
    public void done(Object unit){
        // The asyc work has finished, do something with
        //  the result in "unit".
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:58:02.097

一些见解：

*   你需要[数据流](http://en.wikipedia.org/wiki/Dataflow_programming)，而不是流程图

*   如果您无法为每个任务创建新线程，则可以使用由`java.util.concurrent.Executors.newFixedThreadPool()`

*   您不能在线程池中运行的任务中使用 Future.get()，否则可能会发生线程饥饿死锁。

*   您对问题的描述不清楚：未声明的概念太多。“重置这些值” - 什么值？“我的服务中的 3 种方法” - 是服务器端还是客户端？“提供的布尔标志” - 我们是否需要了解谁提供了该标志以及它是什么意思？请提供您需要实施的程序的数据流表示，以便我们为您提供帮助。

# javascript - 基于 Eval Figure 的启动脚本

> ID：12881665
> 
> 赞同：0
> 
> 时间：2012-10-14T11:09:43.707
> 
> 标签：javascript, jquery, eval

```
 $(".app-launch").on("click", function () {
    var appId = this.id;

    // Check if Function is running.
    if (typeof eval('$' + appId).start == 'undefined') {
         eval('$' + appId).start();
     }
 } 
```

eval 只是导致它返回并说 $XXXXXX 未定义并终止 java-script 执行。有没有办法阻止它杀死执行并继续？这个函数要么启动应用程序，要么先加载 javascript，然后再启动应用程序，所以这个检查是为了确定 javascript 是否已经加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:13:01.790

首先，停止使用`eval`. 如果您想要动态命名变量，请使用对象。

`start`然后，您可以在尝试访问其属性之前测试对象的类型。

```
var objects = {};
var appId = "thing";

objects[appId] = { start: foo; }

if (
    typeof objects[appId] !== 'undefined' &&
    typeof objects[appId].start === 'function'
   ) {
    objects[appId]();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:28:07.343

尝试这个

```
eval('$("' + appId + '"') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:15:27.467

如果您尝试检索全局变量，只需使用关联数组语法`window['$'+appId]`

此外，您的代码中断的原因是因为您正在检查是否定义了 start 方法，而 $XXXXXX 不存在。在引用该方法之前检查 $XXXXXX 是否存在。此外，如果未定义该方法，您将调用该方法，这是没有意义的。

也评价。

这是一个[jsfiddle](http://jsfiddle.net/R2sys/)，显示出了什么问题。这是一个固定[版本](http://jsfiddle.net/R2sys/2/)。

# c# - 使用 Application.DoEvents()

> ID：12881666
> 
> 赞同：0
> 
> 时间：2012-10-14T11:09:47.180
> 
> 标签：c#, events, asynchronous, doevents

我面临一个**Application.DoEvents()**可以解决的问题。问题是 WebBrowser 假设异步导航到一个 url 但它没有，当我使用 Application.DoEvents() 它解决了这个问题，我认为这是因为应用程序处理一些其他事件并且不传递事件导航正确。

我阅读了一些有关此方法的信息，并且了解该方法将导致应用程序处理所有当前事件。现在我有点担心，因为我用大炮杀死了一只蚂蚁，有人能告诉我我所做的是否值得吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:07:39.997

是的，Application.DoEvents() 解决了这个问题。核心问题是 WebBrowser 的核心是一个重度线程组件。您可以调用它的 Navigate() 方法，它会在不阻塞您的代码的情况下完成它的工作，该方法几乎立即返回。

然而，问题是在某些时候它必须运行您的 DocumentCompleted 事件。保证在您创建浏览器对象的线程上运行。这很难做到，您的线程很可能正忙于做其他事情。就像坐在一个循环中一样，测试 ReadyState 属性。没有机制可以中断此循环并运行事件处理程序。

所以你看到的是 ReadyState 属性永远不会改变， DocumentCompleted 事件永远不会触发。这称为死锁，是线程代码的一个非常常见的诅咒。使用 DoEvents 是后门，即“泵送消息循环”。它允许浏览器闯入您的线程并触发事件。这反过来会更新 ReadyState 属性并让您跳出循环。

然而，DoEvents 有一个大问题。它不是选择性的，它不仅限于处理允许事件触发的消息。它还会发送其他通知，这些通知会使您的程序崩溃。就像您的用户对缓慢的网站感到不耐烦并关闭您的表单一样。这会破坏浏览器对象，但不会停止您的循环。您现在正在测试已处置浏览器的 ReadyState 属性。轰隆隆！

您需要以不同的方式执行此操作。循环阻塞或挂起 UI 线程是不合法的，很容易造成死锁。实际上，Microsoft 指南*禁止STA 线程。*解决方法很简单，将等待循环之后的任何代码移动到 DocumentCompleted 事件处理程序。您可能需要向您的类添加一些状态变量，以便您知道该事件表示特定网页的完成或用户不再对结果感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:35:20.063

该`Application.Dovents()`方法处理所有待处理的消息。这可能导致：

1.  在当前代码块完成之前输入代码块两次。（假设您通过单击按钮浏览浏览器。用户单击按钮，而您的代码正在等待浏览器完成用户再次单击。在这种情况下，`Application.Doevents()`将导致在执行下一行之前处理该方法。）

2.  中断关键代码。（假设您有一个耗时的方法并且用户单击了关闭按钮。您的表单将消失但您的代码将继续运行。一个真正的问题。

3.  更多意想不到的结果。

但是我觉得有时使用这种方法是必要的，并且像 webbrowser 这样的简单解决方案很难在多线程中使用（尤其是当它可见时）。如果您必须使用此方法，您应该确保用户和其他事物（计时器、按钮、事件与）不会中断任何事情。详细讨论：[Application.DoEvents() 的使用](https://stackoverflow.com/questions/5181777/use-of-application-doevents/5183623#5183623)

# c - 如何将二维数组的高度和宽度作为参数传递给方法？

> ID：12881667
> 
> 赞同：-2
> 
> 时间：2012-10-14T11:09:52.880
> 
> 标签：c, arrays, function, multidimensional-array

假设我有一个数组：`array[2][4]`，在 main 方法中，我调用了一个函数`blackandwhite`。如何将此方法作为参数传递数组的长度和宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:25:45.163

这是一个可能的解决方案：

```
void blackandwhite(int* array, int height, int width)
{
    // Array-processing done here.
    // array is pointer to int,
    // initially points to element myarray[0][0].
    // variable height = 2;
    // variable width = 4;

}

int main()
{
    int myarray[2][4];
    blackandwhite(&myarray[0][0], 2, 4);
} 
```

可以通过以下构造找到数组的大小，即其中的元素数：

```
int array[8];
int size = sizeof(array)/sizeof(array[0]); 
```

不幸的是，C 数组是原生数组，不包含任何嵌入其中的元数据。行和列只是表示/访问内存中本质上是线性存储空间的一种方式。AFAIK，没有办法自动确定二维数组的行/列数，给定一个指向它的指针（在 C 中）。

因此，需要将列/行的数量与指向二维数组的指针一起作为单独的参数传递，如上例所示。

**[有关此处](https://stackoverflow.com/questions/2411585/finding-dimensions-of-a-2d-array-in-c-using-pointers)**相关问题的更多信息。

* * *

**更新：**

**常见陷阱 1：`int** array`在 param-list 中**
使用 请注意，指向二维整数数组的指针仍然是指向 int 的指针。
**`int**`**意味着 param 指的是指向 int 的指针的指针，这里不是这种情况。

**常见陷阱 2：`int[][]`在参数列表中**
使用 无法传递数组的维度。不需要传递数组第一维的大小（但你可以但编译器会忽略它）。尾随尺寸是强制性的。所以，

```
// is INVALID!
void blackandwhite(int array[][], int height, int width)

// is VALID, 2 is ignored.
void blackandwhite(int array[2][4], int height, int width)

// is VALID.
void blackandwhite(int array[][4], int height, int width) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:59:51.410

如果您使用的是 C99 编译器或支持可变长度数组的 C2011 编译器，则可以执行以下操作：

```
/**
 * the cols parameter must be declared before it is used in
 * the array parameter.
 */
void blackandwhite(size_t rows, size_t cols, int (*array)[cols])
{
  size_t i, j;

  for (i = 0; i < rows; i++)
    for (j = 0; j < cols; j++)
      array[i][j] = ...;
} 
```

你会称它为

```
int array[N][M];
...
blackandwhite(N, M, array); 
```

在大多数情况下¹，“N-element array of `T`”类型的表达式将被转换（“decay”）为“pointer to `T`”类型的表达式，表达式的值将是第一个元素的地址大批。表达式`array`的类型为“ `N`-element array of `M`-element array of `int`”；当我们将它作为参数传递给 时`blackandwhite`，它被转换为类型为“指向-`M`元素数组的指针`int`”或的表达式`int (*)[M]`，其值与`&array[0]`.

如果您使用的 C2011 编译器*不*支持可变长度数组（VLA 支持现在是可选的），或者 C89 或更早版本的编译器（从不支持 VLA），那么您有两种选择：您可以硬编码列：

```
void blackandwhite(size_t rows, int (*array)[M])
{
   size_t i,j;
   for (i = 0; i < rows; i++)
     for (j = 0; j < M; j++)
       array[i][j] = ...;
}

...
blackandwhite(N, array); 
```

在这种情况下，此函数仅适用于具有特定列数的数组，或者您可以使用 CodeArtist 显示的方法，在该方法中，您显式传递指向数组第一个元素的指针以及行和列作为参数。但是，这意味着您将被`array`视为一维数组，而不是二维数组，这意味着您必须将二维索引映射到一维结构：

```
void blackandwhite(int *array, size_t rows, size_t cols)
{
  size_t i, j;

  for (i = 0; i < rows; i++)
    for (j = 0; j < cols; j++)
      array[i * rows + j] = ...; // use a 1D index
}
...
blackandwhite(&array[0][0], N, M); 
```

请注意，这种方法依赖`array`于内存中连续的所有行和列；如果你已经动态分配`array`这样

```
int **array = malloc(N * sizeof *array);
if (array)
{
  size_t i;
  for (i = 0; i < N; i++)
    array[i] = malloc(M * sizeof *array[i]);
} 
```

那么就不能保证行在内存中是连续布局的。但是，在*这种特定情况下*，您可以编写以下内容：

```
void blackandwhite(int **array, size_t rows, size_t cols)
{
  size_t i, j;

  for (i = 0; i < rows; i++)
    for (j = 0; j < cols; j++)
      array[i][j] = ...;
}

...
blackandwhite(array, N, M); 
```

迷茫了吗？

请记住，表达式`a[i]`被视为`*(a + i)`; 也就是说，我们找到之后的`i`第 th 个*元素*`a`的地址并取消引用结果指针值。 `a[i][j]`被解释为`*(*(a+i)+j)`； `*(a + i)`为我们提供了`i`'之后的*数组*`a`；通过上面提到的规则，这个表达式从数组类型转换为指针类型，值是第一个元素的地址。然后我们添加`j`到新的指针值并再次取消引用结果。

我们可以使用`array[i][j]`where`array`作为指向数组的指针 ( `int (*array)[cols]`or `int (*array)[M]`) 或作为指向指针 ( `int **array`) 的指针，因为结果`array[i]`要么是指针类型，要么是衰减为指针类型的数组类型，它可以具有下标运算符应用于它。我们不能使用`array[i][j]`where`array`作为一个简单的指针传递给`int`，因为在这种情况下结果`array[i]`不是指针类型。

那为什么不做

```
void blackandwhite(int **array, size_t rows, size_t cols)  {...}
...
int array[N][M];
blackandwhite((int **) array, N, M); 
```

指针和数组是不同的东西，所以指向指针的指针和指向数组的指针是不同的东西。那可能*会*起作用，但是您在对编译器撒谎。最重要的是，这是一种糟糕的形式。

**编辑**

在函数参数声明的上下文中，形式为`T a[]`or的参数声明`T a[N]`将被解释为`T *a`; IOW，`a`将被声明为指针，而不是数组。`T a[N][M]`类似地，或形式的参数声明`T a[][M]`被视为`T (*a)[M]`; 再次`a`声明为指针，而不是数组。

在我们的第一个示例中，我们可以声明`blackandwhite`为

```
void blackandwhite(size_t rows, size_t cols, int array[rows][cols]) 
```

或者

```
void blackandwhite(size_t rows, size_t cols, int array[][cols]) 
```

但我更喜欢明确地使用指针声明，因为它正确地反映了正在发生的事情。

* * *

^(1\. 此规则的例外情况是数组表达式是 、 或一元运算符的操作数`sizeof`，`_Alignof`或者`&`是用于在声明中初始化另一个数组的字符串文字，例如

```
 char str[]="This is a test";
```

.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:13:29.587

在 C 中，已知有一种计算字符串长度的方法，而在数组的情况下，您必须显式指定数组的维度以将长度和宽度传递给函数`blackandwhite`。

# jquery - jQuery菜单：动画背景到项目悬停

> ID：12881674
> 
> 赞同：0
> 
> 时间：2012-10-14T11:11:15.203
> 
> 标签：jquery, menu

当鼠标悬停在其他项目上时，我想在其他项目之间设置活动菜单项的背景动画，例如此链接中的 Flash 文件：

[http://www.w-enter.com/forum/f63/t35513/#.UHqbam_MiRo](http://www.w-enter.com/forum/f63/t35513/#.UHqbam_MiRo)

# c - 链表中的 C 指针

> ID：12881675
> 
> 赞同：1
> 
> 时间：2012-10-14T11:11:16.313
> 
> 标签：c, pointers

做作业，我遇到了问题，我相信，指针。

任务包括以下内容：

我有一个 txt 文件，其中每一行作为名称和密码。

```
thisismyname:thisismypassword 
```

我必须读取这些数据，将其处理为结构链表，运行所有列表并将密码发送到蛮力算法。该算法在找到通行证后，应将通行证写入结构。最后，我应该运行列表并将数据写入 txt 文件

我的问题是当我找到密码时。它没有将其值存储在结构中。最后我可以读取数据，我可以看到蛮力正在工作，但最后，我只能设法写入名称并传递给文件。未加密的通行证被写为 NULL 所以我相信是一个指针问题。

这是代码（删除了我认为不相关的所有内容）：

```
typedef struct p {
    char *name;
    char *pass;
    char *pass_desenc;
    struct p *next_person;
} person;

typedef struct n {
    int a;
    int b;
} numbers;

int readFile(person **people) {
    FILE * fp;
    char line[100];

    if ((fp = fopen(STUDENTS_FILE, "r")) != NULL) {
        while (fgets(line, sizeof (line), fp) != NULL) {
            person *p;
            char email[27] = "";
            char password[14] = "";
            char *change = strchr(line, '\n');
            if (change != NULL)
                *change = '\0';

            /* Gets email*/
            strncpy(email, line, 26);
            email[27] = '\0';

            /* Gets pass*/
            strncpy(password, line + 27, 14);
            password[14] = '\0';

            p = (person*) malloc(sizeof (person));
            if (p == NULL) {
                return -1;
            }

            p->name = (char*) malloc(strlen(email));
            if (p->name == NULL) {
                return -1;
            }
            sprintf(p->name, "%s", email);
            p->name[strlen(email)] = '\0';

            p->pass = (char*) malloc(strlen(password));
            if (p->pass == NULL) {
                return -1;
            }
            sprintf(p->pass, "%s", password);
            p->pass[strlen(password)] = '\0';

            p->next_person = (*people);
            (*people) = p;

            countPeople++;
        }
        fclose(fp);

        return 0;
    }
    return -1;
}

void fmaps(int id, numbers pass_range, person *people) {
        /*This function will run all my list and try to uncrypt pass by pass.
            On the brute-force pass in unencrypted and when it return to this function, I can print the data.
        */
        while (people != NULL && j > 0) {
            for (i = 1; i <= PASS_SIZE && notFound == 1; i++) {
                notFound = bruteForce(i, people, &total_pass);
            }
            notFound = 1;
            count = count + total_pass;

            printf("#####Email: %s Pass: %s PassDesenq: %s \n", people->name, people->pass, people->pass_desenc);

            people = people->next_person;
            j--;
        }
}

void fcontrol(int n, person *people) {
    /*This function should write the data to a file
    I can see that all data is written as expected but people->pass_desenc is writing/printing NULL
    */

    if ((fp = fopen(STUDENTS_LOG_FILE, "a+")) != NULL) {
        while (people != NULL) {
            printf("#####1111Email: %s Pass: %s PassDesenq: %s \n", people->name, people->pass, people->pass_desenc);
            fprintf(fp, "%d%d%d%d%d%d:grupo%d:%s:%s\n", tm.tm_year + 1900, tm.tm_mon + 1, tm.tm_mday, tm.tm_hour, tm.tm_min, tm.tm_sec, 1, people->name, people->pass_desenc);
            people = people->next_person;
        }
    }
    fclose(fp);
}

int main() {

    /*Struct*/
    person *people = NULL;

    if (readFile(&people)) {
        printf("Error reading file!\n");
        return 0;
    }
    /*Function to send data to brute-force*/
    fmaps(i, pass_range, people);
    /*After all data is processed, this function writes the data to a file*/
    fcontrol(NR_PROC, people);

    destroyList(&people);

    return 0;
}

int bruteForce(int size, person *people, int *total_pass) {
    int i;
    char *pass_enc;
    int *entry = (int*) malloc(sizeof (size));
    char pass[50];
    char temp;
    pass[0] = '\0';

    for (i = 0; i < size; i++) {
        entry[i] = 0;
    }
    do {
        for (i = 0; i < size; i++) {
            temp = (char) (letters[entry[i]]);
            append(pass, temp);
        }

        (*total_pass)++;

        /*Compare pass with test*/
        pass_enc = crypt(pass, salt);

        if (strcmp(pass_enc, people->pass) == 0) {

            people->pass_desenc = (char*) malloc(strlen(pass));
            if (people->pass_desenc == NULL) {
                return -1;
            }

            sprintf(people->pass_desenc, "%s", pass);
            people->pass_desenc[strlen(pass)] = '\0';
            return 0;
        }

        pass[0] = '\0';
        for (i = 0; i < size && ++entry[i] == nbletters; i++) {
            entry[i] = 0;
        }

    } while (i < size);

    free(entry);

    return 1;
}

void append(char *s, char c) {
    int len = strlen(s);
    s[len] = c;
    s[len + 1] = '\0';
}

void destroyList(person **people) {
    person *aux;
    printf("\nList is being destroyed.");
    while (*people != NULL) {
        aux = *people;
        *people = (*people)->next_person;
        free(aux);
        printf(".");
    }
    printf("\nList destroyed.\n");
} 
```

我相信所做的更改`fmaps`是本地的，不会传递给`main`.

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:20:04.320

这就是您*可以*编写文件阅读器/解析器的方式。它避免了 str[n]cpy()，并使用 memcpy() + 偏移量 + 大小来执行所有字符串操作。（显然，在这两种情况下都需要正确）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

typedef struct p {
    char *name;
    char *pass;
    // char *pass_desenc;
    struct p *next;
} person;

#define STUDENTS_FILE "students.dat"
unsigned countPeople = 0;

int readFile(person **people) {
    FILE * fp;
    char line[100];
    size_t len, pos;

    fp = fopen(STUDENTS_FILE, "r");
    if (!fp)  {
        fprintf(stderr, "Could not open %s:%s\n"
                , STUDENTS_FILE, strerror(errno));
        return -1;
        }

    while ( fgets(line, sizeof line, fp) ) {
        person *p;

        len = strlen(line);

        /* remove trailng '\n', adjusting the length */
        while (len && line[len-1] == '\n') line[--len] = 0;

        /* Ignore empty lines */
        if ( !len ) continue;

        /* Library function to count the number of characters in the first argument
        ** *not* present in the second argument.
        ** This is more or less equivalent to strtok(), but
        ** 1) it doen not modify the string,
        ** 2) it returns a size_t instead of a pointer.
        */
        pos = strcspn(line, ":" );

        /* Ignore lines that don't have a colon */
        if (line[pos] != ':') continue;

        p = malloc(sizeof *p);
        if ( !p ) { fclose(fp); return -2; }
        p->next = NULL;

        p->name = malloc(1+pos);
        if ( !p->name ) { fclose(fp); return -3; } /* this could leak p ... */
        memcpy(p->name, line, pos-1);
        p->name[pos] = 0;

        p->pass = malloc(len-pos);
        if ( !p->pass ) {fclose(fp); return -4; } /* this could leak p and p->name */
        memcpy(p->pass, line+pos+1, len-pos);

        /* Instead of pushing (which would reverse the order of the LL)
        ** , we append at the tail of the LL, keeping the original order.
        */
        *people = p;
        people = &p->next ;

        countPeople++;
    }

    fclose(fp);
    return 0;
} 
```

# eclipse - PyDev 代码分析无法正常工作

> ID：12881687
> 
> 赞同：3
> 
> 时间：2012-10-14T11:12:58.923
> 
> 标签：eclipse, python-2.7, pydev

我在使用 PyDev 和 Eclipse 时遇到问题。这首先发生在我拥有的一些旧的 EasyEclipse 版本上。我认为这只是因为 EasyEclipse 安装太旧了，但现在 Eclipse 4.2.1 和 PyDev 2.7.1 也出现了这种情况。我正在运行 Python 2.7.3。

问题是类型时代码分析似乎有问题或运行了错误的 Python 版本。它认为这一行有语法错误：

```
x = 1 if some_boolean else 2 
```

它期待换行符而不是 if 关键字。运行该模块时，它按预期工作。

这很烦人，因为这个错误似乎会扰乱实际上有用的进一步代码分析。我不确定它是否与问题有关，但[该](http://pydev.org/manual_101_interpreter.html)站点指示我尝试运行interpreterInfo.py，所以[这](http://pastie.org/5056532)是它生成的 XML 转储。

有什么想法吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-03-31T04:13:23.940

转到 Project -> Properties，点击 PyDev - Interpreter/Grammar，然后在“Grammar Version”下拉菜单中选择 2.7。

# c# - 带有 ListView 问题的奇怪 C# DataPager

> ID：12881692
> 
> 赞同：0
> 
> 时间：2012-10-14T11:14:40.013
> 
> 标签：c#, listview, datapager

我有一个包含 2 个数据分页器和 1 个列表视图的页面。我正在尝试以编程方式设置页面大小，它适用于第一页，但之后就不行了。如果我将页面大小硬编码为 12，它可以正常工作。

数据分页器使用“页面”的查询字符串参数。我还将会话“PerPage”设置为 int 值，例如 12、24、48 等，以控制每页显示的数量，但这也不起作用。不执行回发，因为这一切都是通过 ?page=3 查询字符串参数完成的。

提前致谢！

这是我的代码：

```
<asp:DataPager ID="DPTop" runat="server" QueryStringField="page" PagedControlID="resultsLV"
        OnPreRender="DPTopPreRender">
        <Fields>
            <asp:NextPreviousPagerField FirstPageText="&lt;&lt;" ShowFirstPageButton="True" ShowNextPageButton="False" />
            <asp:NumericPagerField />
            <asp:NextPreviousPagerField LastPageText="&gt;&gt;" ShowLastPageButton="True" ShowPreviousPageButton="False" />
        </Fields>
    </asp:DataPager> 
```

列表视图

```
<asp:ListView runat="server" ID="resultsLV" OnItemDataBound="resultsLV_ItemDataBound" OnPagePropertiesChanging="PagePropertiesChanging">
        <ItemTemplate>
            <div class="result" runat="server" id="resultItem">
            </div>
        </ItemTemplate>
</asp:ListView> 
```

后面的代码：

```
protected void Page_Init(object sender, EventArgs e)
    {
        // Assign page size
        if (Session["PerPage"] != null && !IsPostBack)
        {
            DPTop.PageSize = Convert.ToInt32(Session["PerPage"]);
            DPBottom.PageSize = Convert.ToInt32(Session["PerPage"]);
        }
        else
        {
            DPTop.PageSize = 12;
            DPBottom.PageSize = 12;
        }
    }

 protected void Page_Load(object sender, EventArgs e)
    {
       if(!ispostback)
       {
          //bind the data
       }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T16:17:56.683

您必须在 DataPager Init 事件中设置 datapager 页面大小：

aspx：

```
<asp:DataPager ID="DataPager1" runat="server" QueryStringField="pageNumber" 
                PagedControlID="lvItemList" OnPreRender="DataPager1_PreRender" OnInit="DataPager1_Init"> 
```

C＃

```
protected void DataPager1_Init(object sender, EventArgs e)
{
    DataPager1.PageSize = 8;
} 
```

# java - BufferedInputSteam 如何帮助处理大文件？

> ID：12881695
> 
> 赞同：0
> 
> 时间：2012-10-14T11:15:02.913
> 
> 标签：java, io, out-of-memory

我有一个应用程序，它适用于大文件（千兆字节）。有时我会遇到`outofmemoryerror`异常。如果我包裹起来有帮助`InputStream`吗`BufferedInputStream`？什么目的`BufferedInputStream`？这个怎么运作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:16:27.547

不，它不会帮助您减少内存消耗。如果您碰巧以非常小的块读取文件，它将帮助您加快读取文件的速度。

对您*有*帮助的不是一次将整个文件保存在内存中。只需保留您当前正在处理的零件即可。

# java - 春季Junit课

> ID：12881699
> 
> 赞同：-1
> 
> 时间：2012-10-14T11:15:32.787
> 
> 标签：java, spring, junit

我收到此代码错误：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:applicationContext.xml" }) 
```

错误：

```
file not found exception 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:41:57.677

您应该搜索 applicationContext.xml 的位置。**它必须在类路径中。**我建议您检查它是否在类目录中。如果不是，您应该或将 applicationContext.xml 文件移动到将被过滤到类目录的源文件夹或更改单元测试中的位置。

# php - 在控制器层中进行内容协商可以吗？

> ID：12881717
> 
> 赞同：3
> 
> 时间：2012-10-14T11:18:43.787
> 
> 标签：php, model-view-controller, rest, zend-framework2, content-negotiation

在 Zend Framework 2 中，内容协商发生在视图层，我对此非常满意。我的控制器中的一个示例：

```
public function viewAction()
{
    $id   = $this->params('id');
    $user = $this->getRepository()->findUser();

    return new ViewModel(array(
        'user' => $user,
    ));
} 
```

这要么呈现 view.phtml 模板以返回 html，要么将用户对象转换为 JSON 响应。所谓的视图策略决定了如何根据请求来渲染响应。

**我的 webapp 中的“REST”应用程序流程**

这种类型的内容协商适用于许多用例：

1.  `/user`或`indexAction()`返回用户数组 => 可能的 JSON html；
2.  `/user/1`或`viewAction()`返回用户对象 => 可能的 html 或 JSON（上面的示例）；
3.  `/user/1/update`或`updateAction()`返回一个 html 表单。出现错误时，此 url 的 POST 将返回 html 或 JSON。或者在成功时它重定向到`viewAction()`并因此返回用户的新版本 => html 和 JSON 再次可能；
4.  `/user/create`或`createAction()`返回一个 html 表单。出现错误时，此 url 的 POST 将返回 html 或 JSON。或者在成功时，它`viewAction()`可能再次重定向到刚刚创建的用户 => html 和 JSON

**我的问题**

在一些用例中，内容协商在控制器层中是“必需的”。我不确定我是否忽略了一些可能性：是否有我可以在以下情况下使用的选项？

1.  删除用户：POST 到`/user/1/delete`. 如果是 html 视图，您将被重定向到用户列表（现在已删除的用户已丢失）。如果你想要一个 JSON 响应，你想要返回 200 OK 和一个带有删除成功消息的 JSON 对象。
2.  对博客文章发表评论。如果是 html 视图，您将被重定向到您看到附加评论的帖子。如果您要求 JSON 响应，您希望返回 200 OK 和一个带有您刚刚放置的评论的 JSON 对象。

我的目标是不复制视图层中已经存在的内容协商。这也会使我的控制器更胖，因为我现在有两种可能的响应（JSON 与 html），但这可能不是唯一的情况。如果我以后想要支持 XML 或其他格式，我会为这些响应类型的每个操作切换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:52:48.310

有趣的是，我们目前正在考虑将内容协商方面从视图策略侦听器中移出，而是移到控制器插件中。正如您所指出的那样，基本原理很大程度上是-控制器的工作是将传入请求与适当的模型**和**视图相匹配。因此，是的，我认为你走在正确的轨道上——而且现在正在为 2.1 开发的工具很可能会非常适合你所拥有的方法。（详见[https://github.com/zendframework/zf2/pull/2615](https://github.com/zendframework/zf2/pull/2615)。）

# open-source - 创建开源在线游戏

> ID：12881718
> 
> 赞同：0
> 
> 时间：2012-10-14T11:18:46.297
> 
> 标签：open-source, online-game

我在学校开始创建在线开源游戏作为一个项目。它将是具有 n 个连接客户端的服务器。但现在我遇到了“安全”问题。如果一位客户使用修改后的源代码来更改某些限制，该怎么办？我该如何预防？我的第一个想法是只为连接到服务器而创建客户端，服务器会发送所有必要的文件，但我不太喜欢这个想法。你能给我一些更好的建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:20:39.557

您需要将验证保存在服务器中。服务器应该检查每个客户端的移动，如果根据服务器的规则不允许 - 拒绝它。

您还应该在客户端中保留验证，以便不弄乱客户端代码的用户可以获得更快的响应。

# mongodb - 防止在 Lithium/mongoDB 中进行表单操作

> ID：12881719
> 
> 赞同：2
> 
> 时间：2012-10-14T11:19:05.967
> 
> 标签：mongodb, lithium

我正在用 Lithium 和 mongoDB 编写我的第一个社区页面。我真的很喜欢 mongo 的无模式方式，但是有一个问题使得没有模式就无法工作：

例如，我们有一个像这样的简单表格：

```
<?=$this->form->create();?>
<?=$this->form->field('name',array('label' => 'Topic title'));?>
<?=$this->form->field('text',array('label' => 'Content'));?>
<?=$this->form->submit('create');?> 
```

这将更简单地保存：

```
if($this->request->is('post')) {
    $board_post = BoardPosts::create($this->request->data);
    $board_post->save();
} 
```

现在大家可以通过Firebug、开发者工具等DOM操作添加一些表单输入了。当然可能是数据库中一些无意义的字段，但也许有人添加了一个真正有用的字段。防止这种情况的唯一方法是在模型中创建模式。但对我来说，这使得无模式数据库的整个想法毫无用处，不是吗？当某些字段不能出现时，如何为不同的情况/动作制作模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:02:55.777

该`Model::save()`方法在其选项中接受一个`'whitelist'`参数。见[http://li3.me/docs/lithium/data/Model::save()](http://li3.me/docs/lithium/data/Model::save())

```
$whitelist = array(
    'title',
    'text'
);
$post = BoardPosts::create();
$post->save($this->request->data, compact('whitelist')); 
```

您还可以`protected $_schema`在模型中定义并设置`protected $_meta = array('locked' => true);`哪个会自动将白名单设置为架构中定义的字段。但是，最好在控制器中定义白名单以避免像您描述的那样的攻击。

这个问题被称为[批量分配漏洞](http://blog.mhartl.com/2008/09/21/mass-assignment-in-rails-applications/)，如果开发人员不小心，它会存在于许多框架中。

# java - 使用独立于文件位置的资源

> ID：12881721
> 
> 赞同：1
> 
> 时间：2012-10-14T11:19:26.813
> 
> 标签：java, url, jar, classloader, embedded-resource

这是我的目录结构
XYZProject

*   建造
*   距离
*   NB项目
*   源代码

我正在研究netbeans。
现在我有一个名为 ABC.txt 的文件，
我想将它打包到 jar 文件中。
现在我做了以下事情：在源包下创建了一个名为 Resources 的新文件夹，并将文件 ABC.txt 放入其中。

XYZ项目

```
-- src  
  |
  -- Resources  
     |
     -- ABC.txt 
```

现在我想独立于文件位置访问这个文件。所以我按照一些教程做了这个，

```
URL url = XYZProject.class.getClassLoader().getResource("Resources/ABC.txt");
String urlStr = urlStr.getFile().replaceAll("%20", " ");
System.out.println(urlStr);
BufferedReader reader;
try {
    reader = new BufferedReader(new FileReader(urlStr)); .....
} catch (FileNotFoundException e) {...} 
```

现在，当我通过 netbeans 即 F6 和 tada WORKS 运行代码时，这可以工作！！！
但是当尝试运行 jar 时，它找不到该文件。它抛出 FileNotFoundException
我如何访问通过 netbeans 和 java -jar 运行它的 jar 中的文本文件？
我也不知道为什么在我得到的 url 中有一个 %20 而不是空格。

输出运行 VIA NB

```
/D:/.../.../.../.../XYZProject/build/classes/Resources/ABC.txt 
```

输出运行 VIA java -jar

```
file:/D:/.../.../.../.../XYZProject/dist/XYZProject.jar!/Resources/ABC.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:29:49.573

Jar 中的资源**不是`File`**. 它必须由`URL`or访问`InputStream`。

我可能会使用`URL`-> `InputStream`-> `InputStreamReader`-> `BufferedReader`（来自内存，未经测试）。

# jquery - jQuery选择具有特定开头的每个id

> ID：12881724
> 
> 赞同：1
> 
> 时间：2012-10-14T11:19:47.687
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [jquery 或 css 选择器？选择所有以](https://stackoverflow.com/questions/5002966/jquery-or-css-selector-select-all-ids-that-start-with)

我需要选择以 id 开头的所有元素`"Monday_"`，例如`id="Monday_16"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:21:00.737

您可以使用`attribute starts with`选择器：

```
$("[id^='Monday_']"); 
```

或更好：

```
$("tagname[id^='Monday_']"); 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:21:46.360

您可以使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)来完成此操作：

```
$('[id^="Monday_"]') 
```

# android - GCM 是保持数据库同步的可靠方法吗？

> ID：12881727
> 
> 赞同：0
> 
> 时间：2012-10-14T11:19:57.017
> 
> 标签：android, google-cloud-messaging

我正在为 Web 服务 API 开发客户端，其中一些数据持久存储在 SQLite 数据库中。

GCM 是保持数据同步的可靠方法吗？

我的意思是，GCM 推送通知是否足以保持数据同步或消息可能“丢失”或服务可能不可用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T11:38:47.017

GCM 的主要设计目的是作为一种“tickle”机制，帮助您主动意识到有信息可供您通过其他方式检索。虽然可以打包比 4K 有效载荷更多的数据，但 GCM 没有任何类型的可靠性保证、及时性保证等。

因此，使用 GCM 作为轮询的辅助来保持数据库同步似乎是完全合理的。使用 GCM 作为数据库更改的唯一传递机制似乎很危险。

# c# - 下载文件时显示自定义对话框

> ID：12881729
> 
> 赞同：2
> 
> 时间：2012-10-14T11:20:00.323
> 
> 标签：c#, browser, webbrowser-control

寻找我的问题的解决方案。我们正在为客户构建一个 Web 浏览器控件到产品中，他们需要能够检测网站上何时有文件上传框，然后它不需要启动 Windows 7 文件浏览器窗口，而是需要打开自己的定制设计的

是否有浏览器事件允许我们捕获它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T21:13:01.007

您可以通过在控制站点中实现 IServiceProvider来[连接您自己的下载管理器，该下载管理器仅在您的 webbrowser 控件主机进程中有效，并在 webbrowser 控件询问时实现 QueryService 以返回一个 IDownloadManager 对象](http://support.microsoft.com/kb/327865)

在 Windows 窗体的 Webbrowser 类中，默认会为您创建一个控制站点，但您可以通过创建自己的[WebBrowserSiteBase](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowsersitebase.aspx)类并覆盖 WebBrowser.CreateWebBrowserSiteBase 方法来[覆盖控制站点。](http://www.codeproject.com/Articles/13598/Extended-NET-2-0-WebBrowser-Control)如果您使用 WPF、Silverlight 或 Windows Phone 中的 webbrowser 控件，则没有这样的可扩展性。

我建议你用 C++ 编写下载管理器，因为如果你用 C# 编码，则需要大量的互操作。[这里](http://www.codeproject.com/Articles/18935/The-most-complete-C-Webbrowser-wrapper-control)有一个使用本机下载管理器的 C# webbrowser 控件的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:38:12.963

因此，您想修改`<input type=file ....`You cannot do that with webbrowser control 的值，因为它访问 DOM 之类的 javascript、vbscript 与如果 DOM 允许访问和更改上传的文件，当您访问时，坏人很容易窃取您的本地文件（使用 javascript）他们的页面。
此外，由于该安全问题，您甚至看不到 FileUpload 的价值。
如果您想以编程方式选择一个文件，可以通过以下方式组合`SendKeys`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:29:10.180

您可以捕获`FileDownload`事件并自己处理。

请参阅[http://msdn.microsoft.com/en-us/library/bb268220(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb268220(v=vs.85).aspx)

显示自定义文件对话框后，将数据发送回 webbrowser 控件，然后提交表单。

* * *

另一种选择是将javascript注入控件。注入一个替换上传按钮调用的代码，并显示您自己的表单。

# sql - SQL Server 2008 中的数据库最大大小

> ID：12881735
> 
> 赞同：2
> 
> 时间：2012-10-14T11:20:49.103
> 
> 标签：sql, sql-server, sql-server-2008

`.mdf`SQL Server 2008 Enterprise 中的最大数据库大小限制是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T11:22:17.653

每个数据文件 16 TB - [http://msdn.microsoft.com/en-us/library/ms143432.aspx](http://msdn.microsoft.com/en-us/library/ms143432.aspx)

# objective-c - 有没有办法知道整个 UItableView 的大小？

> ID：12881737
> 
> 赞同：1
> 
> 时间：2012-10-14T11:21:05.517
> 
> 标签：objective-c, xcode, uitableview

基本上是我想的所有 tableViewCell 和标题的总和。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:24:25.547

实际上，您正在寻找 contentSize：

```
 tableView.contentSize.height 
```

应该给你你正在寻找的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:30:20.297

试试这个：-

```
 tableView.contentSize.height 
```

# android - 更新微调器数组取决于其他人的选择

> ID：12881749
> 
> 赞同：0
> 
> 时间：2012-10-14T11:22:36.437
> 
> 标签：android, android-spinner

```
Spinner spinner, spinner2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_check_box_tuts);

        spinner = (Spinner)findViewById(R.id.spinner1);
        spinner2 = (Spinner)findViewById(R.id.spinner2);
        spinner.setOnItemSelectedListener(this);

    }
    @Override
    public void onItemSelected(AdapterView<?> v, View arg1, int arg2,
            long arg3) {
        switch(v.getId()){
        case R.id.spinner1:
            if(spinner.getSelectedItemPosition() == 1){
                //what goes here??
            break;
        }
        }
    } 
```

就像我的第一个微调器列表是国家：美国，日本等。因此，例如，在选择美国之后，我的第二个微调器将能够获得美国状态数组的列表..

我使用我的新手逻辑尝试这样思考：将第二个微调器设置为 View.GONE，然后如果选择美国，则显示它单独携带各州的微调器2。但如果我有 60 个国家/地区，那么我必须有 60 个微调器，这很有趣，所以请帮助我 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:33:24.750

不要`Spinner`为每个国家/地区实例创建一个，而是保持相同，并在从您的第一个值中选择一个值时替换 `Spinner`存储在其中的数据[ArrayAdapter.createFromResource()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#createFromResource%28android.content.Context,%20int,%20int%29)和[Spinner.setAdapter()](http://developer.android.com/reference/android/widget/AdapterView.html#setAdapter%28T%29)。[这](http://developer.android.com/guide/topics/ui/controls/spinner.html)是使用这两个调用的示例。`Spinner`

与其在第一个中选择一个选项之前隐藏您的第二个，不如`Spinner`考虑在第一个中使用默认选择`Spinner`，并使用匹配数据填充第二个。在您的示例中，美国将是一个很好的默认选择。

# c# - 使用单个 linq 查询从两个表中聚合数据

> ID：12881750
> 
> 赞同：1
> 
> 时间：2012-10-14T11:22:56.827
> 
> 标签：c#, linq

我对 LINQ 很陌生，还不知道它的全部功能。

我有两个如下表

```
Links
----------------------
LinkId 
LinkTitle 
DateAdded

Articles
----------------------
ArticleId
ArticleTitle
DateAdded 
```

我正在尝试使用单个 linq 查询创建结果集，该查询将输出如下所示的数据

```
Year
Month
NoOfLinksAdded
NoOfArticleAdded 
```

任何帮助将不胜感激。

更新：这就是我到目前为止所做的

```
var grouped = from p in Links 
              group p by new { month = p.DateAdded.Month,year= p.DateAdded.Year } into d 
              select new { Month = d.Key.month, Year= d.Key.year, NoOfLinksAdded = d.Count() }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:47:30.823

这是在单个查询中执行此操作的方法，但它不是很漂亮...

```
var query = from n in Enumerable.Range(0, 1) //we need something to start our query from
            //shape the articles so we can append them to the links 
            let articlesShaped = from a in articles
                                 select new
                                 {
                                     IsLink = false,
                                     IsArticle = true,
                                     a.DateAdded,
                                 }
            //shape the links so we can append them to the articles
            let linksShaped = from l in links
                              select new
                              {
                                  IsLink = true,
                                  IsArticle = false,
                                  l.DateAdded,
                              }
            //append the links and articles together
            let articlesAndLinks = articlesShaped.Concat(linksShaped)
            from a in articlesAndLinks
            group a by new { a.DateAdded.Month, a.DateAdded.Year } into grouping
            select new
            {
                grouping.Key.Year,
                grouping.Key.Month,
                NoOfLinksAdded = grouping.Where(a1 => a1.IsLink).Count(),
                NoOfArticleAdded = grouping.Where(a1 => a1.IsArticle).Count(),
            }; 
```

结果如下：

![这是输出](../Images/48b655c80984e7fa059a0c7f9a375164.png)

如果您将其拆分为单独的步骤，它会更易于维护。它也不会花费您任何性能，因为由于延迟执行，只有在您遍历结果集时才会执行执行。

如果我们将代码分成几个步骤，它会变成以下（我认为这更好）

```
//shape the articles so we can append them to the links                   
var articlesShaped = from a in articles
                     select new
                     {
                         IsLink = false,
                         IsArticle = true,
                         a.DateAdded,
                     };

//shape the links so we can append them to the articles
var linksShaped = from l in links
                  select new
                  {
                      IsLink = true,
                      IsArticle = false,
                      l.DateAdded,
                  };

//append the links and articles together
var articlesAndLinks = articlesShaped.Concat(linksShaped);

var query = from a in articlesAndLinks
            //group by the month and year
            group a by new { a.DateAdded.Month, a.DateAdded.Year } into grouping
            select new
            {
                grouping.Key.Year,
                grouping.Key.Month,
                //get the number of links
                NoOfLinksAdded = grouping.Where(a1 => a1.IsLink).Count(),
                //get the number of articles
                NoOfArticleAdded = grouping.Where(a1 => a1.IsArticle).Count(),
            }; 
```

最后，这是您可以运行的完整版本，因此您可以查看实际代码：

```
//make some test data
var links = new []
{
    new    
    {
        LinkId = 1,
        LinkTitle = "A link",
        DateAdded = new DateTime(2012, 5, 1),
    },
    new
    {
        LinkId = 2,
        LinkTitle = "Another link",
        DateAdded = new DateTime(2012, 5, 1),
    },
    new
    {
        LinkId = 3,
        LinkTitle = "A link bro!",
        DateAdded = new DateTime(2012, 6, 1),
    },
    new
    {
        LinkId = 4,
        LinkTitle = "A link dude",
        DateAdded = new DateTime(2012, 6, 1),
    },
    new
    {
        LinkId = 5,
        LinkTitle = "A link man!",
        DateAdded = new DateTime(2012, 7, 1),
    },
};
//make some test data
var articles = new []
{
    new
    {
        ArticleId = 1,
        ArticleTitle = "An article",
        DateAdded = new DateTime(2012, 6, 1),
    },
    new
    {
        ArticleId = 2,
        ArticleTitle = "An article",
        DateAdded = new DateTime(2012, 6, 1),
    },
    new
    {
        ArticleId = 3,
        ArticleTitle = "An article",
        DateAdded = new DateTime(2012, 7, 1),
    },
    new
    {
        ArticleId = 4,
        ArticleTitle = "An article",
        DateAdded = new DateTime(2012, 8, 1),
    },
};

//shape the articles so we can append them to the links                   
var articlesShaped = from a in articles
                     select new
                     {
                         IsLink = false,
                         IsArticle = true,
                         a.DateAdded,
                     };
//shape the links so we can append them to the articles
var linksShaped = from l in links
                  select new
                  {
                      IsLink = true,
                      IsArticle = false,
                      l.DateAdded,
                  };
//append the links and articles together
var articlesAndLinks = articlesShaped.Concat(linksShaped);

var query = from a in articlesAndLinks
            //group by the month and year
            group a by new { a.DateAdded.Month, a.DateAdded.Year } into grouping
            select new
            {
                grouping.Key.Year,
                grouping.Key.Month,
                //get the number of links
                NoOfLinksAdded = grouping.Where(a1 => a1.IsLink).Count(),
                //get the number of articles
                NoOfArticleAdded = grouping.Where(a1 => a1.IsArticle).Count(),
            }; 
```

# django - 按 django 中的帖子对类别进行分页

> ID：12881751
> 
> 赞同：0
> 
> 时间：2012-10-14T11:23:01.227
> 
> 标签：django, pagination, django-class-based-views

我有一个博客系统，包含类别和帖子，如下所示。

我想要一个类别的详细信息页面，我在其中对属于该类别的帖子进行分页。

```
class Category(models.Model):
    name = models.CharField(max_length=150)
    slug = models.SlugField()

class Post(models.Model):   
    title = models.CharField(max_length=90)
    category = models.ForeignKey(Category, related_name="posts") 
```

我使用 django 1.4 和基于类的视图。这样做的正确方法是什么？我想我需要使用`paginate_queryset(queryset, page_size)`，但我不知道如何。这是我观点的基础：

```
class CategoryDetailView(DetailView):
    model = Category
    queryset = object.posts.all()

    def paginate_queryset(self, queryset, page_size):
        pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:59:41.080

您可能会查看[文档](https://docs.djangoproject.com/en/1.4/topics/pagination/)。它应该有助于您入门。

# java - 无法使用 EWS Java API 发送电子邮件

> ID：12881753
> 
> 赞同：1
> 
> 时间：2012-10-14T11:23:17.477
> 
> 标签：java, exchangewebservices, exchange-server-2010, ewsjavaapi

我正在使用 EWS 在 Exchange 2010 上发送电子邮件，如下所示：

```
ExchangeService service = new ExchangeService();
ExchangeCredentials credentials = new WebCredentials(email, password);
service.setCredentials(credentials);
service.setUrl(new java.net.URI("https://" + host
    + "/EWS/Exchange.asmx"));
service.setTraceEnabled(true);

EmailMessage msg = new EmailMessage(service);
msg.setSubject("Hello world!");
msg.setBody(MessageBody.getMessageBodyFromText("Sent using the EWS Managed API."));
msg.getToRecipients().add("email");
msg.send(); 
```

邮件没有发送到收件箱，我不知道是什么问题。启用跟踪后，我得到以下信息：

```
<Trace Tag="EwsRequestHttpHeaders" Tid="1" Time="2012-10-14 11:13:46Z">
    POST /EWS/Exchange.asmx HTTP/1.1
    Content-type : text/xml; charset=utf-8
    Accept-Encoding : gzip,deflate
    Keep-Alive : 300
    User-Agent : ExchangeServicesClient/0.0.0.0
    Connection : Keep-Alive
    Accept : text/xml
</Trace>

<Trace Tag="EwsRequest" Tid="1" Time="2012-10-14 11:13:47Z">
    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
    <soap:Header><t:RequestServerVersion Version="Exchange2010_SP1"></t:RequestServerVersion></soap:Header>
    <soap:Body><m:CreateItem MessageDisposition="SendOnly"><m:Items><t:Message><t:Subject>Hello world!</t:Subject><t:Body BodyType="HTML">Sent using the EWS Managed API.</t:Body><t:ToRecipients><t:Mailbox><t:EmailAddress>adamb@fabrikam.com</t:EmailAddress></t:Mailbox></t:ToRecipients></t:Message></m:Items></m:CreateItem></soap:Body>
    </soap:Envelope>
</Trace>

14/10/2012 01:13:48 م org.apache.commons.httpclient.auth.AuthChallengeProcessor selectAuthScheme
    INFO: NTLM authentication scheme selected
    <Trace Tag="EwsResponseHttpHeaders" Tid="1" Time="2012-10-14 11:13:48Z">
    200 text/xml; charset=utf-8
    X-AspNet-Version : 2.0.50727
    X-EwsPerformanceData : RpcC=3;RpcL=15;LdapC=0;LdapL=0;
    Persistent-Auth : true
    Date : Sun, 14 Oct 2012 11:13:48 GMT
    Vary : Accept-Encoding
    Transfer-Encoding : chunked
    Content-Encoding : gzip
    Content-Type : text/xml; charset=utf-8
    X-Powered-By : ASP.NET
    Server : Microsoft-IIS/7.5
    Cache-Control : private
</Trace>

<Trace Tag="EwsResponse" Tid="1" Time="2012-10-14 11:13:48Z">
    <?xml version="1.0" encoding="utf-8"?>
    <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Header><h:ServerVersionInfo MajorVersion="14" MinorVersion="1" MajorBuildNumber="218" MinorBuildNumber="14" Version="Exchange2010_SP1" xmlns:h="http://schemas.microsoft.com/exchange/services/2006/types" xmlns="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/></s:Header>
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><m:CreateItemResponse xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types"><m:ResponseMessages><m:CreateItemResponseMessage ResponseClass="Success"><m:ResponseCode>NoError</m:ResponseCode><m:Items/></m:CreateItemResponseMessage></m:ResponseMessages></m:CreateItemResponse></s:Body>
    </s:Envelope>
</Trace> 
```

请告知如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:20:15.193

交换服务器响应一切正常：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <h:ServerVersionInfo MajorVersion="14" MinorVersion="1" MajorBuildNumber="218" MinorBuildNumber="14" Version="Exchange2010_SP1" xmlns:h="http://schemas.microsoft.com/exchange/services/2006/types" xmlns="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
  </s:Header>
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <m:CreateItemResponse xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">
      <m:ResponseMessages>
        <m:CreateItemResponseMessage ResponseClass="Success">
          <m:ResponseCode>NoError</m:ResponseCode>
          <m:Items/>
        </m:CreateItemResponseMessage>
      </m:ResponseMessages>
    </m:CreateItemResponse>
  </s:Body>
</s:Envelope> 
```

您应该检查 Exchange 端，或者询问您的 Exchange 服务器管理员发生了什么（例如一些垃圾邮件过滤或其他），因为从代码角度和 SOAP 请求/响应的角度来看，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:09:09.703

```
 <t:Message>
            <t:Subject>Hello world!</t:Subject>
            <t:Body BodyType="HTML">Sent using the EWS Managed API.</t:Body>
            <t:ToRecipients>
              <t:Mailbox>
                <t:EmailAddress>adamb@fabrikam.com</t:EmailAddress>
              </t:Mailbox>
            </t:ToRecipients>
          </t:Message> 
```

请检查 adamb@fabrikam.com 的收件箱或与 Exchange 管理员联系以查看邮件队列、过滤器和许多其他可能阻止电子邮件发送的东西等。您发布的代码没有任何问题。

# winforms - 从页面复制图像会导致黑色图像

> ID：12881758
> 
> 赞同：1
> 
> 时间：2012-10-14T11:24:26.280
> 
> 标签：winforms, image, copy, save, webbrowser-control

我有一个程序可以从网页复制图像并将它们保存在本地。在某些网页上，保存的图像是一个完全黑屏。首先，我认为这是代码中的一个问题，没有拍出好照片。于是我开始调查。我手动转到这些页面并尝试复制图像（右键单击，复制图像），但它仍然返回黑色图像。有人可以告诉我如何从代码中绕过它吗？这是当前代码，适用于大多数图片

```
IHTMLDocument2 doc = (IHTMLDocument2)webBrowser1.Document.DomDocument;
        IHTMLControlRange imgRange = (IHTMLControlRange)((HTMLBody)doc.body).createControlRange();

        foreach (IHTMLImgElement img in doc.images)
        {
            if (img.alt != "my image alt")
                continue;
            imgRange.add((IHTMLControlElement)img);

            imgRange.execCommand("Copy", false, null);

            using (Bitmap bmp = (Bitmap)Clipboard.GetDataObject().GetData(DataFormats.Bitmap))
            {
                if (bmp != null)
                {
                    bmp.Save("testimg.jpg");
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:59:31.417

该图像具有透明背景。
因此，图像中的每个像素都是黑色的，除了大部分是完全透明的。

由于`.jpg`文件不支持透明度，因此将其保存为`.jpg`黑色图像。

如果将其保存为`.png`文件（确实支持透明度），它应该可以工作。

# backbone.js - Backbone.js 获取 Google 地图的问题

> ID：12881760
> 
> 赞同：0
> 
> 时间：2012-10-14T11:25:32.623
> 
> 标签：backbone.js, backbone-events

通过骨干网，我从谷歌地图中获取结果以返回用户所在位置的标记。结果填充了一个集合，每次用户移动地图时我都会清除该集合，因为基于新的位置边界会发生新的提取（我使用谷歌地图空闲事件来获取此信息并更改集合的 URL）。

为了管理标记，我用每个标记填充了一个数组。

我遇到的问题是我得到了第一组标记，但是当地图移动时它没有写入任何新标记，当您检查标记数组时，它的结果与上次相同。如果我进行 AJAX 调用，我会得到想要的结果，但我想将这一切都保存在骨干集合中，就像我对模型进行其他处理一样。

```
/* Tracking Page Items */
var allPlace = Backbone.Model.extend({

    createMarker:function(){      

        var marker = new google.maps.Marker({
            position: this.getLatLng(),
            title: this.get("name"),        
            location_type: this.get("type")
        });

        return marker;       

    }

});

var MarkersCollection = Backbone.Collection.extend({

    model: allPlace,

    url:function(){                   
        return '/'
    }

})

var markersArray = [];
var mapAll = Backbone.View.extend({

    initialize: function() {
        _.bindAll(this, 'render', 'createMarkers'); // get access to this in other methods
        this.collection.bind('reset', this.render, this);
    },

    render: function() {

    // Load map scripts and initialise
        if(typeof google === "undefined"){
            nzp.loadGoogleMap();
        } else {
            nzp.initializeMap();
        };

    // Current location                 
        myLocations = {
            lat: this.collection.lat,
            lng: this.collection.lng
        };

    // Listen for map movement
        var self = this;
        google.maps.event.addListener(map, 'idle', function() {
            var bounds = map.getBounds();   
            var lat1 = bounds.ca.b;             
            var lng1 = bounds.ea.b;
            var lat2 = bounds.ca.f;
            var lng2 = bounds.ea.f;         
            self.showMarkers(lat1, lng1, lat2, lng2);
            });
        },

    // update URL based on new bround   
        showMarkers: function(lat1, lng1, lat2, lng2) {

            var markerCollection = new MarkersCollection;
            nzp.infoWindow = new google.maps.InfoWindow();

            lat = myLatlng.Xa;
            lng = myLatlng.Ya;
            lat1 = lat1;
            lng1 = lng1;
            lat2 = lat2;
            lng2 = lng2;

            // Collection URL build from parameter adn current location
                markerCollection.url = "http://blah.com/locator/api/locations?api_key=XXX&nearby_latitude="+lat+"&nearby_longitude="+lng+"&lat1="+lat1+"&lng1="+lng1+"&lat2="+lat2+"&lng2="+lng2+"&max=10&format=jsonp&callback=?";     

            // Fetch collection
            markerCollection.fetch({

                success: function(results) {

                    // Clear the markers array
                    for (i in markersArray) {
                        markersArray[i].setMap(null);
                    }
                    markersArray.length = 0;

                    // Loop over items in collection

                    results.map(function(item){

                        var marker = item.createMarker();
                        marker.setMap(map);

                        // Create a marker based on each item
                        (function(marker, item) {

                            google.maps.event.addListener(marker, "click", function(e) {
                            nzp.infoWindow.setContent(infowindowContent(item)); // Info window content is processed in a method within the model 
                            nzp.infoWindow.open(map, marker);
                            });             

                            // Place each marker in the markers arrya
                                markersArray.push(marker); // Push markers into an array so they can be removed

                        })(marker, item);

                    }, this);
                }
            });

            // Set markers to vidsible
                $.each(markersArray, function(index, item){         
                    markersArray[index].setVisible(true);
                });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:38:55.080

修复了这个。该问题与传递给 API 的值有关，而不是与我想的那样更新集合 URL 的方式有关。

我传递了一个边界和一个当前位置和边界，这导致 API 总是返回相同的结果。我拥有的代码的工作 AJAX 版本在 URL 中有错字，实际上允许 API 返回正确的结果。

# python - 在 Python 中通过键值对字典进行排序

> ID：12881764
> 
> 赞同：0
> 
> 时间：2012-10-14T11:26:21.983
> 
> 标签：python

我需要根据键对字典进行排序，然后返回与这些键关联的值。

```
ages = {40 : 'mother', 38 : 'father', 17 : 'me'}
['me', 'father', 'mother']  # Should return this 
```

最快的方法是什么（性能对我来说确实是一个问题，因为排序在我的代码中被调用了数千次）。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T11:29:41.913

由于您的键是数字的，并且默认情况下字典上的迭代器返回键 - 您可以直接对键进行排序：

```
>>> ages = {40:'mother', 38:'father', 17:'me'}
>>> [ages[k] for k in sorted(ages)]
['me', 'father', 'mother'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T11:30:09.557

使用[`sorted()`](http://docs.python.org/library/functions.html#sorted)和[`zip()`](http://docs.python.org/library/functions.html?highlight=zip#zip)函数：

```
zip(*sorted(ages.items(), key=lambda item: item[0]))[1] 
```

首先，它对字典进行排序，创建一个元组列表（项目）：

```
>>> sorted(ages.items())
[(17, 'me'), (38, 'father'), (40, 'mother')] 
```

然后它只需要值：

```
>>> zip(*sorted(ages.items())[1]
('me', 'father', 'mother') 
```

PS 如果字典非常大，您可能需要考虑[`dict.iteritems()`](http://docs.python.org/library/stdtypes.html?highlight=dict.iteritems#dict.iteritems)在 Python 2 上使用 which 返回迭代器。在 Python 3 上，这是默认行为，它由[`dict.items()`](http://docs.python.org/library/stdtypes.html?highlight=dict.items#dict.items).

* * *

替代解决方案 - 使用[`operator.itemgetter()`](http://docs.python.org/library/operator.html#operator.itemgetter)：

```
>>> import operator
>>> operator.itemgetter(*sorted(ages))(ages)
('me', 'father', 'mother') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T11:30:13.667

由于此类集合的性质，您无法对字典进行排序。尽管 Python 为您提供了几个选项：要么使用`OrderedDict`（以保持插入的键/值对的顺序），要么只对键进行排序，例如::

```
ages = {40 : 'mother', 38 : 'father', 17 : 'me'}
ages_sorted = sorted(ages) 
# or ages.iterkeys() / .keys() (in Py3) which is a bit self-explanatory. 
```

# ios - 从 NSMutableArray 中检索对象

> ID：12881765
> 
> 赞同：0
> 
> 时间：2012-10-14T11:26:41.173
> 
> 标签：ios, nsmutablearray

我有一个 NSMutableArray，我想在另一个视图中使用它的数据。查了一下发现我们可以使用indexOfObject来读取数据，但是我的NSMutableArray有多个值，我不知道如何从NSMutableArray中获取特定的字段。

任何帮助将不胜感激。

我目前被困在我的 IBAction onStartPressed 上。在线

```
 self.clueHint.text = ds[0].initialClue;
//or
    self.clueHint.text = ds objectAtIndex:0 initialClue; 
```

我展示了我的其他文件和涉及的代码。

线索数据.h #import

```
@interface ClueData : NSObject
@property(nonatomic, strong) NSString * clueName;
@property(nonatomic, strong) NSString * initialClue;
@property(nonatomic, strong) NSString * clueHint1;
@property(nonatomic, strong) NSString * clueHint2;

@property(nonatomic, strong) NSString * clueAnswer;
@property(nonatomic, strong) UIImage * clueImage;
@end 
```

线索数据DAO.h

```
#import <Foundation/Foundation.h>
#import "ClueData.h"
@interface ClueDataDAO : NSObject
@property(strong, nonatomic) NSMutableArray * clueDataArray;

-(NSMutableArray *) PopulateDataSource;
@end 
```

线索数据DAO.m

```
#import "ClueDataDAO.h"

@implementation ClueDataDAO
@synthesize clueDataArray;
-(NSMutableArray *) PopulateDataSource
{
    clueDataArray = [[NSMutableArray alloc]init];
     ClueData * sampleData = [[ClueData alloc]init];

    sampleData.clueName = @"Tropical Fruit Tree";
    sampleData.initialClue = @"Where all the Tropical trees are planted.";
    sampleData.clueHint1 = @"It is located at Area 10";
    sampleData.clueHint2 = @"It could be found near Eco Lake";
    sampleData.clueAnswer = @"Fruit tree collection";
    NSString * file=[[NSBundle mainBundle]pathForResource:@"FruitTreeCollection" ofType:@"jpg"];
    sampleData.clueImage = [UIImage imageWithContentsOfFile:file];
    [clueDataArray addObject:sampleData];
    sampleData=nil;

    return clueDataArray;
}
@end 
```

游戏页面视图控制器.M

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    daoDS = [[ClueDataDAO alloc]init];
    self.ds = daoDS.PopulateDataSource; //load pre-build NSMutableArray
    self.answer.delegate = self;
    // Do any additional setup after loading the view.
}

- (IBAction)onStartPressed:(id)sender {

    //initiate load object
// stuck at here :(

    ClueData * currentClue = [ds objectAtIndex:0]; // app got terminate at this line of code
self.clueHint.text = [currentClue initialClue];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:30:57.947

在 IBAction 中，首先将其转换/保存到正确的 var，例如

ClueData * sampleData = [ds objectAtIndex:0];

然后 self.clueHint.text= [sampleData initialClue];

例如

# jboss - JBoss 7.1 中的 InitialContext.lookup() 参数

> ID：12881769
> 
> 赞同：0
> 
> 时间：2012-10-14T11:27:05.807
> 
> 标签：jboss, jboss7.x, ejb-3.1, initial-context

我是 EJB 3.1 领域的新手，并试图了解 JBoss Application Server 7.1 的一些基础知识。

目前我被困在一个 - 非常基本的 - 问题上。当服务器上的一个 bean 想要使用另一个 bean 时，我需要使用 InitialContext.lookup() 方法。如果我查看文献，我会发现这样的电话：

```
TheBean = (<Interface>) new InitialContext().lookup("<NameOfTheBean>/local"); 
```

但是这个电话对我不起作用。每次我收到这样的错误：

```
javax.ejb.EJBException: javax.naming.NameNotFoundException 
```

经过数小时寻找解决方案后，我找到了使用另一个调用的代码示例，如下所示：

```
TheBean = (<Interface>) new InitialContext().lookup("ejb:/<Package>//<NameOfTheBean>!<Package>.<Interface>"); 
```

那么这个解决方案对我有用，但问题是为什么？有人知道为什么第一个调用会产生异常而第二个调用正常吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:01:45.793

为什么？不同版本的 JBoss 在 JNDI 命名空间中部署具有不同默认名称的 bean。

```
 ctx.lookup("BeanName/local") 
```

适用于 JBoss 4.xx 及更高版本，但不适用于 JBoss v7。例如，您可以在 JB7 的 server.log 中看到 bean 如何映射到 JNDI 名称（参见 java:/jboss/exported/... 以及它如何对应于您的第二次连续调用）：

```
13:57:05,550 INFO [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor]（MSC 服务线程 1-4）部署单元部署“navi-ejb3.jar”中名为 ProductionHistoryBean 的会话 bean 的 JNDI 绑定如下：

        java:global/navi-ejb3/ProductionHistoryBean!navi.ejb3.production.history

.ProductionHistoryRemote

        java:app/navi-ejb3/ProductionHistoryBean!navi.ejb3.production.history.Pr

演出历史远程

        java:module/ProductionHistoryBean!navi.ejb3.production.history.Productio

nHistoryRemote

        java:jboss/exported/navi-ejb3/ProductionHistoryBean!navi.ejb3.production

.history.ProductionHistoryRemote

        java:global/navi-ejb3/ProductionHistoryBean

        java:app/navi-ejb3/ProductionHistoryBean

        java:模块/ProductionHistoryBean

```

# layout - 在 Yii 中为多个模块使用通用布局

> ID：12881770
> 
> 赞同：2
> 
> 时间：2012-10-14T11:27:12.537
> 
> 标签：layout, module, yii

我在我的 web 项目中使用 Yii 框架。现在，我有几个模块，我只想对所有模块使用一种布局。我使用以下代码来确定每个模块中每个控制器/动作的布局：

```
$this->layoutPath = Yii::getPathOfAlias('application.views.layouts');
$this->layout = '//layouts/myLayout'; 
```

是否有任何其他解决方案可以通过在每个模块的 init() 函数中使用相同的代码来做到这一点？换句话说，我必须在每个动作中编写上述两行代码，我认为这不好，我想减少我的代码行数。例如如下：

```
class StaffModule extends CWebModule
{
    public $layout;
    public $layoutPath;
    public function init()
    {
        $this->layoutPath = Yii::getPathOfAlias('application.views.layouts');
                $this->layout = '//layouts/myLayout';
        $this->setImport(array(
            'staff.models.*',
            'staff.components.*',
        ));
    }
} 
```

但它不起作用。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T02:22:14.217

Just use

> $this->layout='//layouts/myLayout';

without

> $this->layoutPath = Yii::getPathOfAlias('application.views.layouts');

because // mean you specific absolute path from root

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T15:11:19.563

我已经回答了类似的问题

[对多个模块使用通用布局](https://stackoverflow.com/questions/17877387/yii-module-layout?answertab=active#tab-top)

解决方案是在模块中的 beforeControllerAction 上设置布局。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:39:54.707

您在 init 函数中使用的方法是正确的方向..我认为问题可能是..正如您定义的那样，`layoutPath`您不应该有`//layouts..`

```
$this->layoutPath = Yii::getPathOfAlias('application.views.layouts');
$this->layout = 'myLayout'; 
```

你不需要这些：

```
public $layout;
public $layoutPath; 
```

# dependency-injection - 具有开放通用接口的温莎类型工厂

> ID：12881772
> 
> 赞同：2
> 
> 时间：2012-10-14T11:28:06.727
> 
> 标签：dependency-injection, castle-windsor, factory-pattern

在我的应用程序中，我想依赖于一个类中的多个存储库，并不是每次都需要它们。我没有在不必要的地方为每个实例构建一个实例，而是使用 Windsor 中的[Typed Factory 工具](http://docs.castleproject.org/%28S%28kwaa14uzdj55gv55dzgf0vui%29%29/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)。

但是，为每个存储库注册一个工厂有点烦人，我想用一个开放的通用注册来代替它。我想做的是如下所示：

```
container.Register(
    Component.For<IFactory<IRepository<>>>().AsFactory()
); 
```

但是，这是一个语法错误，因为 IRepository 缺少类型参数。有没有我可以使用的语法来完成这项工作？

注意：我知道我可以注册一个无类型的工厂接口并使用它来创建多个组件。我对此不感兴趣，因为这本质上是对服务定位器的依赖——如果我没有注册依赖，那么在代码尝试使用它之前我不会知道它——用我知道的方法this 在构造函数中，即使我还没有创建实例。

完整（简化）示例如下：

```
public class TestA { }
public class TestB { }
public interface IRepository<T> { T Create();    }
public class Repository<T> : IRepository<T>
{
    public T Create() { return Activator.CreateInstance<T>(); }
}

public interface IFactory<T>
{
    T Create();
    void Release(T instance);
}

class Program
{
    static void Main(string[] args)
    {
        IWindsorContainer container = new WindsorContainer();
        container.AddFacility<TypedFactoryFacility>();

        container.Register(
            // Individual registrations of repositories here are fine
            Component.For<IRepository<TestA>>().ImplementedBy<Repository<TestA>>(),
            Component.For<IRepository<TestB>>().ImplementedBy<Repository<TestB>>()
        );

        container.Register(
            // Individual registrations of factories - works, but trying to avoid!
            Component.For<IFactory<IRepository<TestA>>>().AsFactory(),
            Component.For<IFactory<IRepository<TestB>>>().AsFactory()
        );

        container.Register(
            // Generic Registration of Factories - syntax errors
            // Component.For<IFactory<IRepository<>>>().AsFactory()
            // Component.For(typeof(IFactory<IRepository<>>)).AsFactory()
        );

        var factoryA = container.Resolve<IFactory<IRepository<TestA>>>();
        var factoryB = container.Resolve<IFactory<IRepository<TestB>>>();

        var repoA = factoryA.Create();
        var repoB = factoryB.Create();

        Console.WriteLine("Everything worked");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T01:33:02.027

您的工厂接口定义有点过于“开放”。更改您的工厂界面如下：

```
public interface IRepositoryFactory<T>
{
    IRepository<T> Create();
    void Release(IRepository<T> instance);
} 
```

然后您可以注册：

```
container.Register(Component.For(typeof(IRepositoryFactory<>)).AsFactory()); 
```

并解决：

```
var factoryA = container.Resolve<IRepositoryFactory<TestA>>();
var factoryB = container.Resolve<IRepositoryFactory<TestB>>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:43:21.370

有一种将存储库组合在一起的模式。它被称为[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)。因此，与其创建用于创建存储库的工厂，不如创建一个引用这些存储库的工作单元类。例如：

```
public abstract class UnitOfWork : IDisposable
{
    // here is your factory
    protected abstract IRepository<T> GetRepository<T>();

    public IRepository<User> Users
    {
        get { return this.GetRepository<User>();
    }

    public IRepository<Customer> Customers
    {
        get { return this.GetRepository<Customer>();
    }

    // etc..
} 
```

在您的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中，您可以定义一个`UnitOfWork`包含对 Windsor 的引用并使您能够获取实现的`IRepository<T>`实现：

```
internal sealed class WindsorUnitOfWork : UnitOfWork
{
    private WindsorContainer container;

    public WindsorUnitOfWork(WindsorContainer container)
    {
        this.container = container;
    }

    protected override IRepository<T> GetRepository<T>()
    {
        return this.container.Resolve<IRepository<T>>();
    }
} 
```

并注册如下：

```
container.Register(Component.For<UnitOfWork>()
    .ImplementedBy<WindsorUnitOfWork>()
        .LifeStyle.Transient); 
```

消费者现在可以非常方便地使用存储库：

```
private readonly UnitOfWork db;

public KarmaService(UnitOfWork db)
{
    this.db = db;
}

public int CalculateKarmaForActiveUsersByName(string name)
{
    var users =
        from user in this.db.Users
        where user.Name == name
        where user.Active
        select user;

    return users.Sum(user => user.Karma);
} 
```

# php - fopen 替代方案

> ID：12881774
> 
> 赞同：4
> 
> 时间：2012-10-14T11:28:16.680
> 
> 标签：php, fopen

我有一个简单的 php 脚本，它创建一个文件，添加一些内容并再次关闭它。但是我的主机禁用了 fopen 功能。我想知道我该如何解决这个问题。我的主人不会帮助我。这是我的代码：

```
$f = fopen($id."/adres.xml", "w");
fwrite($f, 'some content');
fclose($f); 
```

我想知道有什么替代方案。我已经阅读了很多关于使用 cUrl 的内容，但对我来说，这似乎更像是从其他站点获取文档并使用它，而不是创建文档（请告诉我这样做是否可行）。

所以，我的问题是，什么是 fopen 的替代品（函数等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T11:32:23.407

```
//to write    
file_put_contents('path_and_filename','content');
//to read:
file_get_contents('path_and_filename'); 
```

如果要附加到文件：

```
file_put_contents('path_and_filename' , 'content' , FILE_APPEND ); 
```

您还可以锁定文件：

```
file_put_contents('path_and_filename' , 'content' , LOCK_EX ); 
```

看看下面的链接：

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

# map - JSTL 通过值而不是键访问 MAP

> ID：12881776
> 
> 赞同：0
> 
> 时间：2012-10-14T11:28:21.973
> 
> 标签：map, hashmap, jstl

这可能是一个奇怪的问题，但我有一个映射长字符串对：

10 动物 11 细菌 12 蘑菇

我将这个 HashMap 从 Spring Controller 发送到 View：

```
Map<Long, String> catMap = filterService.generateCatMap();
...
mv.addObject("catMap", catMap); 
```

在视图中，我可以通过迭代或直接通过 catMap['KEY'] 轻松打印键值对

问题是我有一个 JS 函数，我必须传递 KEY 并且我知道 VALUE。所以这与映射相反：按键获取值。

实际上是否有可能通过知道值而不迭代来获得密钥？（不得不提的是，键和值是唯一的，没有重复）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:47:46.223

```
//JSP
<c:forEach var="country" items="${capitalList}">
    Country: ${country.key}  - Capital: ${country.value}
</c:forEach> 
```

看看上面的代码逻辑是否有帮助。它可以帮助您检索循环中的键和值。您可以在 forEach 循环中使用脚本函数并根据需要执行所需的操作。

# php - SQLite - 如何制作更小的数据库以获得更好的性能？

> ID：12881778
> 
> 赞同：0
> 
> 时间：2012-10-14T11:28:41.773
> 
> 标签：php, performance, sqlite

是否有一些类或方法来限制 SQLite 数据库中记录的大小或数量，并在第一个数据库满时自动创建一个新数据库（达到限制）？

我的 SQLite DB 的大小可以达到 500mb，并且在共享主机上它不起作用。所以，我想把它分成 10 个 50 MB 左右的数据库。

如果创建了几个，这是否也允许从正确的数据库中轻松读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:26:18.830

[`ATTACH`可以使用以下命令](http://www.sqlite.org/lang_attach.html)在一个会话中打开其他数据库：

```
ATTACH '/data/db1.sqlite' AS db1; -- opens or creates that file
ATTACH '/data/db2.sqlite' AS db2;

CREATE TABLE db1.customers(...);
CREATE TABLE db2.product(...);
CREATE TABLE main.orders(...);    -- "main" is the connection's default database

SELECT * FROM customers, orders WHERE orders.custid = customers.id ...
                                  -- table names are searched for in all DBs 
```

但是，不能自动拆分数据库；每个表（及其索引）必须完全存储在一个文件中。如果您的大部分数据都在一个表中，那么这对您毫无帮助。

# java - Java 数据库连接

> ID：12881782
> 
> 赞同：2
> 
> 时间：2012-10-14T11:29:12.850
> 
> 标签：java, mysql

我有一个 java 项目，其中包含许多连接到数据库的文件。谁能告诉我是否可以使用 java 类文件连接到数据库，这样我就不会为每个文件创建数据库连接，请教我如何.. 感谢您的帮助：D 这是我使用的代码但它没有用

dbConnect.java - 类文件

```
 public class dbConnect {

        public static void connect(){
        Connection conn;
        Statement stmt;
        ResultSet rs;

        String sql;
            conn = null;
            String url = "jdbc:mysql://localhost:3306/db_oopproject";
            String driver = "com.mysql.jdbc.Driver";
            try{
                Class.forName(driver).newInstance();
                conn = DriverManager.getConnection(url,"user","12345");

                stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
                sql = "Select * from user_account";
                rs = stmt.executeQuery(sql);

            }
            catch (Exception e){
                System.out.print(e.getMessage());
            }
        }

    } 
```

我使用这个 dbConnect.connect() 在主文件中调用了这个类；代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T11:48:09.693

将数据库连接代码放在一个类中，并在任何你喜欢的地方使用它。

这样的事情可能是一个好的开始：

```
package persistence;

import java.sql.*;
import java.util.*;

/**
 * util.DatabaseUtils
 * User: Michael
 * Date: Aug 17, 2010
 * Time: 7:58:02 PM
 */
public class DatabaseUtils {
    private static final String DEFAULT_DRIVER = "oracle.jdbc.driver.OracleDriver";
    private static final String DEFAULT_URL = "jdbc:oracle:thin:@host:1521:database";
    private static final String DEFAULT_USERNAME = "username";
    private static final String DEFAULT_PASSWORD = "password";
/*
    private static final String DEFAULT_DRIVER = "org.postgresql.Driver";
    private static final String DEFAULT_URL = "jdbc:postgresql://localhost:5432/party";
    private static final String DEFAULT_USERNAME = "pgsuper";
    private static final String DEFAULT_PASSWORD = "pgsuper";
*/
/*
    private static final String DEFAULT_DRIVER = "com.mysql.jdbc.Driver";
    private static final String DEFAULT_URL = "jdbc:mysql://localhost:3306/party";
    private static final String DEFAULT_USERNAME = "party";
    private static final String DEFAULT_PASSWORD = "party";
*/

    public static void main(String[] args) {
        long begTime = System.currentTimeMillis();

        String driver = ((args.length > 0) ? args[0] : DEFAULT_DRIVER);
        String url = ((args.length > 1) ? args[1] : DEFAULT_URL);
        String username = ((args.length > 2) ? args[2] : DEFAULT_USERNAME);
        String password = ((args.length > 3) ? args[3] : DEFAULT_PASSWORD);

        Connection connection = null;
        // No, I loaded the driver as I intended.  It's correct.  The edit is not.
        try {
            connection = createConnection(driver, url, username, password);
            DatabaseMetaData meta = connection.getMetaData();
            System.out.println(meta.getDatabaseProductName());
            System.out.println(meta.getDatabaseProductVersion());

            String sqlQuery = "SELECT PERSON_ID, FIRST_NAME, LAST_NAME FROM PERSON ORDER BY LAST_NAME";
            System.out.println("before insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));

            connection.setAutoCommit(false);
            String sqlUpdate = "INSERT INTO PERSON(FIRST_NAME, LAST_NAME) VALUES(?,?)";
            List parameters = Arrays.asList("Foo", "Bar");
            int numRowsUpdated = update(connection, sqlUpdate, parameters);
            connection.commit();

            System.out.println("# rows inserted: " + numRowsUpdated);
            System.out.println("after insert: " + query(connection, sqlQuery, Collections.EMPTY_LIST));
        } catch (Exception e) {
            rollback(connection);
            e.printStackTrace();
        } finally {
            close(connection);
            long endTime = System.currentTimeMillis();
            System.out.println("wall time: " + (endTime - begTime) + " ms");
        }
    }

    public static Connection createConnection(String driver, String url, String username, String password) throws ClassNotFoundException, SQLException {
        Class.forName(driver);
        if ((username == null) || (password == null) || (username.trim().length() == 0) || (password.trim().length() == 0)) {
            return DriverManager.getConnection(url);
        } else {
            return DriverManager.getConnection(url, username, password);
        }
    }

    public static void close(Connection connection) {
        try {
            if (connection != null) {
                connection.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void rollback(Connection connection) {
        try {
            if (connection != null) {
                connection.rollback();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static List<Map<String, Object>> map(ResultSet rs) throws SQLException {
        List<Map<String, Object>> results = new ArrayList<Map<String, Object>>();
        try {
            if (rs != null) {
                ResultSetMetaData meta = rs.getMetaData();
                int numColumns = meta.getColumnCount();
                while (rs.next()) {
                    Map<String, Object> row = new HashMap<String, Object>();
                    for (int i = 1; i <= numColumns; ++i) {
                        String name = meta.getColumnName(i);
                        Object value = rs.getObject(i);
                        row.put(name, value);
                    }
                    results.add(row);
                }
            }
        } finally {
            close(rs);
        }
        return results;
    }

    public static List<Map<String, Object>> query(Connection connection, String sql, List<Object> parameters) throws SQLException {
        List<Map<String, Object>> results = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            rs = ps.executeQuery();
            results = map(rs);
        } finally {
            close(rs);
            close(ps);
        }
        return results;
    }

    public static int update(Connection connection, String sql, List<Object> parameters) throws SQLException {
        int numRowsUpdated = 0;
        PreparedStatement ps = null;
        try {
            ps = connection.prepareStatement(sql);

            int i = 0;
            for (Object parameter : parameters) {
                ps.setObject(++i, parameter);
            }
            numRowsUpdated = ps.executeUpdate();
        } finally {
            close(ps);
        }
        return numRowsUpdated;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:36:42.270

您必须制作简单的 java 类文件以连接到数据库，并在需要时调用该类的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T11:30:26.730

您必须使用数据库连接池。

查看此链接：[http ://www.snaq.net/java/DBPool/](http://www.snaq.net/java/DBPool/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T11:53:37.150

你可以这样做：

```
class DBConnector{
static Connection c;
public static Connection getConnection(){

    try{ 
    Class.forName("your fully qualified driver class name");
    c = DriverManager.getConnection("connection url");
    return c;
    }catch(Exception e){
    return null;
    }

}
} 
```

每当您需要新的数据库连接时调用此方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-03T01:24:30.953

当创建对象的成本高于使用对象时，数据库连接池很有用。这通常是数据库连接的情况，因为数据库和您的服务器需要协商连接并处理身份验证等。服务器端和数据库端还需要做一些工作来分配必要的发送结构数据。如果您使用的是 SSL，那么这又是一个使创建连接变慢的因素。

如果您需要打开然后关闭许多连接，那么您可能需要使用池。当然，如果不了解您的应用程序的细节，就很难说。

我写了一篇关于这个主题的文章，其中更详细。阅读后，您应该有足够的理解，知道这对您是否有意义。

你可以在这里阅读它：

[http://innolitics.com/10x/database-pools/](http://innolitics.com/10x/database-pools/)

# jquery - 将值通过 Jquery 传递到 IE 8 中的 IFRAME 第一次失败

> ID：12881784
> 
> 赞同：0
> 
> 时间：2012-10-14T11:29:32.310
> 
> 标签：jquery, iframe

我的代码中遇到了一件奇怪的事情。

我必须传递两个变量并通过单击链接通过 iframe 在另一个页面上显示查询结果。Jquery 代码在这里

```
 function showFloorsPlans(flid, aptid){
        $('#floorPlansPop').dialog({
        modal:true,
        title:"Floor Plan Details",
        width:800,
        height:600,
        show: "blind"
        })
    params = "aptid=" + aptid + "&flid=" + flid;
    $('#flpId').attr("src", "showImages.html?" + params); 
```

}

这在 IE 9、Chrome 和 Firefox 中运行良好。当我在 IE8 中测试时，第一次加载 iframe 时，它​​没有传递“参数”中的值。一旦我关闭 iframe 并再次单击链接，它就可以工作了..！

任何人都可以帮助我解决这个问题吗？

非常感谢！萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:03:40.377

这是 IE 没有在 iFrame 中传递变量的问题，因为它似乎有自己的安全设置。我从这个链接获得了最多的信息： [Cookie 被阻止/未保存在 Internet Explorer 的 IFRAME 中](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

希望这能让你朝着正确的方向前进。它对我有用。

# java - 使用 Java 将嵌套的 Markdown 转换为 HTML

> ID：12881785
> 
> 赞同：0
> 
> 时间：2012-10-14T11:29:37.683
> 
> 标签：java, html, string, transform

我需要将字符串转换成另一个字符串。一个例子是：

```
#Fashion #Helmet #Woman #Scifi [ ![t](http://24.media.tumblr.com/tumblr_mbv08xkdzy1qfzis2o1_1280.gif) ](http://bit.ly/P1omax) Rob Goodwin 
```

必须将其转换为 HTML 代码：

```
#Fashion #Helmet #Woman #Scifi<a href="http://bit.ly/P1omax"><img src="http://24.media.tumblr.com/tumblr_mbv08xkdzy1qfzis2o1_1280.gif" /></a> 
```

有没有一个Java库可以做到这一点？

* * *

**更新**

它看起来与 Markdown 非常相似。但是用 markdownj 处理它会产生一个混乱的 HTML：

```
<h1>Fashion #Helmet #Woman #Scifi</h1>

<p><a href="a href="http://24.media.tumblr.com/tumblr_mbv08xkdzy1qfzis2o1_1280.gif">http://24.media.tumblr.com/tumblr_mbv08xkdzy1qfzis2o1_1280.gif</a"> <img src="<a href="http://bit.ly/P1omax">http://bit.ly/P1omax</a>" alt="t</a> " />
Rob Goodwin</p> 
```

* * *

**更新 2**

允许将 Markdown 转换为 HTML 的所有三个 Java 库在识别链接内的图像时都存在问题。

我决定使用的方法是两步法：

*   运行你的图书馆；
*   使用 Java 代码更正错误。

这不是一个理想的解决方案，但它确实有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:28:13.717

输入字符串是否降价？是的，它在[http://daringfireball.net/projects/markdown/dingus](http://daringfireball.net/projects/markdown/dingus)中有效，它生成

```
<h1>Fashion #Helmet #Woman #Scifi <a href="http://bit.ly/P1omax"> <img src="http://24.media.tumblr.com/tumblr_mbv08xkdzy1qfzis2o1_1280.gif" alt="t" title="" /> </a> Rob Goodwin</h1> 
```

因此：[http](http://code.google.com/p/markdownj/) ://code.google.com/p/markdownj/ 或：[http ://en.wikipedia.org/wiki/List_of_Markdown_implementations](http://en.wikipedia.org/wiki/List_of_Markdown_implementations)

[https://github.com/sirthias/pegdown](https://github.com/sirthias/pegdown)看起来不错。他们声称：

> [pegdown] 完全通过原始 Markdown 测试套件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:21:29.273

您可以使用正则表达式从文本中提取 URL，然后连接成模板输出字符串。

提取 URLS 所需的正则表达式有很多示例，[例如](http://blog.houen.net/java-get-url-from-string/).

使用上述方法，您可以编写如下内容：

```
String[] split = yourInput.split("[ ![t](");
String[] urls = pullLinks(yourInput)
String output = split[0] + "<a href=\"" + urls[1] + "\"><img src=\"" + urls[0] + "\" /></a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:00:57.490

最好的办法是使用 XSLT。Java 包含 XSLT 作为 JAXP 库的一部分，这将允许您使用 XSL 定义模式匹配和转换规则，并将它们应用于输入文本。Eclipse 有一个出色的工具可以让您构建和测试 XSL。

# bison - 尝试使用野牛为 DirectX x 格式的子集制作语法的移位/减少冲突

> ID：12881787
> 
> 赞同：3
> 
> 时间：2012-10-14T11:29:47.653
> 
> 标签：bison, yacc, context-free-grammar, flex-lexer

我正在尝试为bison中的x格式提出一个语法（实际上是blender python脚本导出的子集的一个子集）。但是我正在减少冲突，Bison不会告诉我在哪里，或者“有点”告诉我在哪里，这取决于我尝试什么。

首先，这是来自搅拌机的示例 .x 文件，这是我正在测试的：

```
xof 0303txt 0032

Frame Root {
  FrameTransformMatrix {
     1.000000, 0.000000, 0.000000, 0.000000,
     0.000000, 0.000000, 1.000000, 0.000000,
     0.000000, 1.000000,-0.000000, 0.000000,
     0.000000, 0.000000, 0.000000, 1.000000;;
  }
  Frame Cube {
    FrameTransformMatrix {
       1.000000, 0.000000, 0.000000, 0.000000,
       0.000000, 1.000000, 0.000000, 0.000000,
       0.000000, 0.000000, 1.000000, 0.000000,
       0.000000, 0.000000, 0.000000, 1.000000;;
    }
    Mesh { //Cube_002 Mesh
      36;
      -1.000000;-1.000000;-1.000000;,
       1.000000;-1.000000;-1.000000;,
       1.000000; 1.000000;-1.000000;,
       0.999999;-1.000001; 1.000000;,
      -1.000000; 1.000000; 1.000000;,
       1.000000; 0.999999; 1.000000;,
       1.000000;-1.000000;-1.000000;,
       1.000000; 0.999999; 1.000000;,
       1.000000; 1.000000;-1.000000;,
      -1.000000;-1.000000;-1.000000;,
       0.999999;-1.000001; 1.000000;,
       1.000000;-1.000000;-1.000000;,
      -1.000000; 1.000000; 1.000000;,
      -1.000000;-1.000000; 1.000000;,
      -1.000000;-1.000000;-1.000000;,
      -1.000000; 1.000000;-1.000000;,
       1.000000; 1.000000;-1.000000;,
       1.000000; 0.999999; 1.000000;,
      -1.000000;-1.000000;-1.000000;,
       1.000000; 1.000000;-1.000000;,
      -1.000000; 1.000000;-1.000000;,
       0.999999;-1.000001; 1.000000;,
      -1.000000;-1.000000; 1.000000;,
      -1.000000; 1.000000; 1.000000;,
       1.000000;-1.000000;-1.000000;,
       0.999999;-1.000001; 1.000000;,
       1.000000; 0.999999; 1.000000;,
      -1.000000;-1.000000;-1.000000;,
      -1.000000;-1.000000; 1.000000;,
       0.999999;-1.000001; 1.000000;,
      -1.000000; 1.000000; 1.000000;,
      -1.000000;-1.000000;-1.000000;,
      -1.000000; 1.000000;-1.000000;,
      -1.000000; 1.000000;-1.000000;,
       1.000000; 0.999999; 1.000000;,
      -1.000000; 1.000000; 1.000000;;
      12;
      3;0;1;2;,
      3;3;4;5;,
      3;6;7;8;,
      3;9;10;11;,
      3;12;13;14;,
      3;15;16;17;,
      3;18;19;20;,
      3;21;22;23;,
      3;24;25;26;,
      3;27;28;29;,
      3;30;31;32;,
      3;33;34;35;;
      MeshNormals { //Cube_002 Normals
        36;
         0.000000; 0.000000;-1.000000;,
         0.000000; 0.000000;-1.000000;,
         0.000000; 0.000000;-1.000000;,
        -0.000000;-0.000000; 1.000000;,
        -0.000000;-0.000000; 1.000000;,
        -0.000000;-0.000000; 1.000000;,
         1.000000; 0.000000;-0.000000;,
         1.000000; 0.000000;-0.000000;,
         1.000000; 0.000000;-0.000000;,
        -0.000000;-1.000000;-0.000000;,
        -0.000000;-1.000000;-0.000000;,
        -0.000000;-1.000000;-0.000000;,
        -1.000000; 0.000000;-0.000000;,
        -1.000000; 0.000000;-0.000000;,
        -1.000000; 0.000000;-0.000000;,
         0.000000; 1.000000; 0.000000;,
         0.000000; 1.000000; 0.000000;,
         0.000000; 1.000000; 0.000000;,
         0.000000; 0.000000;-1.000000;,
         0.000000; 0.000000;-1.000000;,
         0.000000; 0.000000;-1.000000;,
         0.000000;-0.000000; 1.000000;,
         0.000000;-0.000000; 1.000000;,
         0.000000;-0.000000; 1.000000;,
         1.000000;-0.000001; 0.000000;,
         1.000000;-0.000001; 0.000000;,
         1.000000;-0.000001; 0.000000;,
        -0.000000;-1.000000; 0.000000;,
        -0.000000;-1.000000; 0.000000;,
        -0.000000;-1.000000; 0.000000;,
        -1.000000; 0.000000;-0.000000;,
        -1.000000; 0.000000;-0.000000;,
        -1.000000; 0.000000;-0.000000;,
         0.000000; 1.000000; 0.000000;,
         0.000000; 1.000000; 0.000000;,
         0.000000; 1.000000; 0.000000;;
        12;
        3;0;1;2;,
        3;3;4;5;,
        3;6;7;8;,
        3;9;10;11;,
        3;12;13;14;,
        3;15;16;17;,
        3;18;19;20;,
        3;21;22;23;,
        3;24;25;26;,
        3;27;28;29;,
        3;30;31;32;,
        3;33;34;35;;
      } //End of Cube_002 Normals
      MeshMaterialList { //Cube_002 Material List
        1;
        12;
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0;;
        Material Material {
           0.640000; 0.640000; 0.640000; 1.000000;;
           96.078431;
           0.500000; 0.500000; 0.500000;;
           0.000000; 0.000000; 0.000000;;
        }
      } //End of Cube_002 Material List
    } //End of Cube_002 Mesh
  } //End of Cube
} //End of Root Frame 
```

以下是捕获语法的 2 次尝试：

**有了这个，我得到：`../XGrammar.y: conflicts: 1 shift/reduce`**

```
//----------------------------------------------------
Start
: KEYWORD ID '{' EntityDeclaration '}' END
;
//----------------------------------------------------
EntityDeclaration
: KEYWORD ID '{'AttributeDeclaration'}' EntityDeclaration
| KEYWORD ID '{'AttributeDeclaration'}'

;
//----------------------------------------------------
AttributeDeclaration
: KEYWORD  '{' Statement AttributeDeclaration '}' AttributeDeclaration
| KEYWORD  '{' Statement '}' AttributeDeclaration
| KEYWORD  '{' Statement AttributeDeclaration '}'
| KEYWORD  '{' Statement '}'
;
//----------------------------------------------------
Statement
: ExpressionList ';'
| ExpressionList ';' Statement
;
//----------------------------------------------------
ExpressionList
: Expression
| Expression ',' ExpressionList
;
//----------------------------------------------------
Expression
: INTEGER
| REAL
| VecFType
;
//----------------------------------------------------
VecFType
: Vec3FType
| Vec4FType
;
//----------------------------------------------------
Vec3FType
: REAL ';' REAL ';' REAL ';'
;
//----------------------------------------------------
Vec4FType
: REAL ';' REAL ';' REAL ';' REAL ';'
; 
```

**接下来，我得到：**

```
../XGrammar.y: conflicts: 1 shift/reduce, 2 reduce/reduce
../XGrammar.y:56.3-9: warning: rule never reduced because of conflicts: Expression: Element

//----------------------------------------------------
Start
: KEYWORD ID '{' EntityDeclaration '}' END
;
//----------------------------------------------------
EntityDeclaration
: KEYWORD ID '{'AttributeDeclaration'}' EntityDeclaration
| KEYWORD ID '{'AttributeDeclaration'}'

;
//----------------------------------------------------
AttributeDeclaration
: KEYWORD  '{' Statement AttributeDeclaration '}' AttributeDeclaration
| KEYWORD  '{' Statement '}' AttributeDeclaration
| KEYWORD  '{' Statement AttributeDeclaration '}'
| KEYWORD  '{' Statement '}'
;
//----------------------------------------------------
Statement
: Expression ';'
| Expression ';' Statement
;
//----------------------------------------------------
Expression
: Container
| Element
;
//----------------------------------------------------
Container
: VecFType
| ArrayType
;
//----------------------------------------------------
ArrayType
: ';'
| Element ArrayElement
;
//----------------------------------------------------
ArrayElement
: ArrayType
| ','Element ArrayElement
;
//----------------------------------------------------
Element
: INTEGER
| REAL
;
//----------------------------------------------------
VecFType
: ';'
| Element VecElement
;

VecElement
: VecFType
| ';'Element VecElement
; 
```

我对语法非常生疏（自大学以来已经有一段时间了），但我怀疑这与微软决定推出“容器”概念并将其与逗号和分号混合在一起的美妙方式有关：[http ://msdn.microsoft.com/en-us/library/windows/desktop/bb206298(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb206298(v=vs.85).aspx)

他们说，基本上，一个容器是一种“隐式”，它的结尾用分号标记。这也恰好是它们标记数组结尾的方式，并且也恰好是在数组上下文中标记（显然）隐含容器的各个元素的方式......：S所以整个事情是狗屎秀。

首先，这种 x 格式不是 LR(1)。

不过，在重新阅读微软文档之后，我认为整个向量与数组的东西是 bs ......（我通过我的语法解释了这些类型之间的差异）。所以我想，我只需要为“Container”创建一个产品。大致如下：大括号部分中有两种类型的声明，独立的/范围内的/本地的/whathaveyou 和包含的。包含的类型与其他类型相同，只是在末尾带有一个额外的分号以“关闭”容器。但是，如果您查看 Microsoft 文档，您会发现它不一定是那样的。

第三种方法，我得到：

```
../XGrammar.y: conflicts: 4 shift/reduce, 1 reduce/reduce
../XGrammar.y:61.3-29: warning: rule never reduced because of conflicts: ContainerType: ',' Statement ContainerType

//----------------------------------------------------
Start
: KEYWORD ID '{' Entity '}' END
;
//----------------------------------------------------
Entity
: KEYWORD ID '{'Attribute'}' Entity
| KEYWORD ID '{'Attribute'}'

;
//----------------------------------------------------
Attribute
: KEYWORD  '{' Statement Attribute '}' Attribute
| KEYWORD  '{' Statement '}' Attribute
| KEYWORD  '{' Statement Attribute '}'
| KEYWORD  '{' Statement '}'
;
//----------------------------------------------------
Statement
: Declaration ';'
| Declaration ';' Statement
;

Declaration
: ElementType
| ContainerType
;

ContainerType
: Statement ',' Statement
| ',' Statement ContainerType
;
//----------------------------------------------------
ElementType
: INTEGER
| REAL
;
//---------------------------------------------------- 
```

所以我迷路了。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:43:19.913

根据 Chris Dodd 的隐含回答，我得出的结论是，关键问题是，如前所述，X 格式无法以上下文无关语言捕获。这是因为分号（以非互斥方式）的怪异（抱歉，任意）使用

*   陈述
*   当数组在本地范围内声明时数组结束
*   如果元素属于隐含模板，则元素在数组中
*   隐含模板中的任何单个元素

只是让它无法提出无上下文的生产规则。

**底线：从声明的角度解析所有内容，并在完成派生时根据当前令牌值分配语义。**

我的新“语法”是：

```
//----------------------------------------------------
Start
: DeclarationList END
;
//----------------------------------------------------
DeclarationList
: Declaration DeclarationList
| Declaration
;
//----------------------------------------------------
Declaration
: Object
| Element
| ElementList
;
//----------------------------------------------------
Object
: KEYWORD ID '{' DeclarationList '}'
| KEYWORD '{' DeclarationList '}'
;
//----------------------------------------------------
ElementList
: Element ',' Element Ep
;
//----------------------------------------------------
Ep
: ',' Element Ep
|
;
//----------------------------------------------------
Element
: STRING
| INTEGER
| REAL
; 
```

请注意，我仍然找到了一种将逗号与一个 lambda 产生式保持在一起的方法，以便提出“列表”的半截概念（这对于我赋予正在解析的数据的最终语义很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:42:53.467

`;`在这些文件中使用和使用的完全随机方式`,`将导致我尝试通过完全忽略`;`/来解析它们`,`——例如：

```
input: input item | item ;
item: NUMBER | idlist '{' input '}' ;
idlist: idlist ID | ID ; 
```

`{}`然后根据之前的关键字拆分每个 - 封闭块的内容。如果它是一个 WhatMatrix，那么它应该是 16 个数字。A`Mesh`看起来是一个计数，后跟 3*count 坐标，然后是...

理解事物将完全取决于理解所有关键字的含义。

# firefox - 在客户端禁用 X-Frame-Option

> ID：12881789
> 
> 赞同：16
> 
> 时间：2012-10-14T11:29:53.270
> 
> 标签：firefox, google-chrome, client-side, x-frame-options

我想在 Firefox（和 Chrome）的客户端禁用 X-Frame-Option 标头。我的发现： [克服“X-Frame-Options 禁止显示”](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options) 非客户端解决方案不适合我的目的

[https://bugzilla.mozilla.org/show_bug.cgi?id=707893](https://bugzilla.mozilla.org/show_bug.cgi?id=707893) 这似乎非常接近。我尝试使用代码 user_pref("b2g.ignoreXFrameOptions", true); 在配置文件目录中创建 user.js；但它没有用。倒数第二个条目似乎暗示用修改后的代码编译 ff？如果是这种情况，这对我来说也不是一个可能的解决方案。

我刚刚用一些 JS 编写了一个小 HTML 页面，它通过将 YouTube 视频列表依次加载到 iframe 中来循环播放它们。我知道 youtube 支持播放列表，但它们很烂，我不想下载视频。此外，如果浏览器只忽略本地文件的 X-Frame-Option 就好了。这将在某种程度上减少我通过禁用它打开的安全漏洞。至于 Chrome，一个解决方案会很好，但不是那么重要。

我猜另一种方法是拦截包含 HTTP 响应的传入 TCP/IP 数据包并删除此标头行，但这有点过头了。

[编辑] 使用 youtube.com/embed 是一个糟糕的解决方法，因为很多视频不允许嵌入......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-16T20:46:47.327

这可以通过 Firefox 扩展使用 HTTP Observer 轻松实现。该观察者将如下所示：

```
let myListener =
{
    observe : function (aSubject, aTopic, aData)
    {
        if (aTopic == "http-on-examine-response")
        {
            let channel = aSubject.QueryInterface(Ci.nsIHttpChannel);

            try
            { // getResponseHeader will throw if the header isn't set

                let hasXFO = channel.getResponseHeader('X-Frame-Options');

                if (hasXFO)
                {
                    // Header found, disable it
                    channel.setResponseHeader('X-Frame-Options', '', false);
                }
            }
            catch (e) {}
        }
    }
} 
```

您可以找到更多信息，例如如何在 MDN[1][2] 上安装观察者

[1] : [https://developer.mozilla.org/en/docs/Observer_Notifications#HTTP_requests](https://developer.mozilla.org/en/docs/Observer_Notifications#HTTP_requests)

[2] : [https://developer.mozilla.org/en-US/docs/Setting_HTTP_request_headers#Registering](https://developer.mozilla.org/en-US/docs/Setting_HTTP_request_headers#Registering)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-13T19:21:33.183

使用 diegocr 代码，我创建了一个 Firefox 插件以允许显示在其标题中具有 X-Frame-Options 的网页，因此它们将在通过 iframe 访问时显示。它可以在这里下载/安装：[https ://addons.mozilla.org/en-US/firefox/addon/ignore-x-frame-options/](https://addons.mozilla.org/en-US/firefox/addon/ignore-x-frame-options/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-17T07:59:55.880

[René Houkema](https://stackoverflow.com/users/4900399/ren%C3%A9-houkema)在[另一个答案](https://stackoverflow.com/a/31391703)中提到的 Firefox 扩展不再有效，所以我创建了一个新扩展。

[https://addons.mozilla.org/fr/firefox/addon/ignore-x-frame-options-header/](https://addons.mozilla.org/fr/firefox/addon/ignore-x-frame-options-header/)

此扩展也与 Quantum 兼容。

来源和更新： [https ://github.com/ThomazPom/Moz-Ext-Ignore-X-Frame-Options](https://github.com/ThomazPom/Moz-Ext-Ignore-X-Frame-Options)

# javascript - d3js 强制布局为每个节点动态添加图像或圆圈

> ID：12881794
> 
> 赞同：3
> 
> 时间：2012-10-14T11:30:25.797
> 
> 标签：javascript, svg, d3.js, force-layout

我是 D3JS 的新手，我需要为每个节点创建包含图像或圆圈的强制布局。这意味着，动态添加 Image 节点或 Circle 节点。这可能吗？，如果有任何例子，请回答

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T13:10:43.070

好吧，如果您只想在圆圈中间放置一个图像，请尝试以下操作：

```
/* Create nodes */
var node = vis.selectAll("g.node")
    .data(json.nodes) // get the data how you want
    .enter().append("svg:g")
    .call(node_drag);

/* append circle to node */
node.append("svg:circle")
    .attr("cursor","pointer")
    .style("fill","#c6dbef")
    .attr("r", "10px"})

/* append image to node */
node.append("image")
    .attr("xlink:href", "https://github.com/favicon.ico")
    .attr("x", -8)
    .attr("y", -8)
    .attr("width", 16)
    .attr("height", 16); 
```

您还可以附加标题，一些文本...有关更多信息，请参阅[文档。](https://github.com/mbostock/d3/wiki/Selections#wiki-append)`selection.append(name)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T07:54:49.587

对于动态图像，您可以将图像保存在本地，使用图像名称可以使用本地的动态图像。

要制作圆圈，您可以使用：

```
 var groups = node.enter().append("g")
        .attr("class", "node")
        .attr("id", function (d) {
            return d.entityType;
        })
        .on('click', click)

    groups.append("circle")
       .attr("cursor", "pointer")
       .style("fill", function(d) { return color(d.entityType); })
       .style("fill", "#fff")
       .style("stroke-width", "0")
       .style("stroke", "#ddd")
     .attr("r", 20); 
```

在这里，**d.entityType**将是图像示例的名称：**favicon.png**

```
groups.append("image")
       .attr("xlink:href",function (d) {
            return "../assets/images/"+d.entityType+".png";
            })
        .attr("x", -14)
        .attr("y", -15)
        .attr("width", 30)
        .attr("height", 30) 
```

如果要在圆圈内添加文本，可以使用：

```
groups.append("text")
        .attr("dy", 18)
        .style("font-size", "2.5px")
        .style("text-anchor", "middle")
        .style('fill','#000')
        .attr("refX", 15)
        .attr("refY", -1.5)
        .text(function (d) {
            return d.entityName;
        }); 
```

# ruby-on-rails - 使用 Pusher 在 Heroku 上刷新页面

> ID：12881796
> 
> 赞同：0
> 
> 时间：2012-10-14T11:30:30.693
> 
> 标签：ruby-on-rails, heroku, websocket, refresh, pusher

我在 Heroku 上有一个有多个用户的应用程序，他们可以互相下注。当用户发布新的投注时，投注应出现在所有其他用户的主页上，因此他们可以根据需要对其采取行动。

问题是我需要主页在创建新投注时自动刷新。我不想使用简单的 HTTP 刷新，我正在考虑使用 Pusher，因为该应用程序托管在 Heroku 上。

但我不确定如何实现这一点。任何人都可以指导我正确的方向 - 最好有一些代码示例。

看来我能找到的所有例子都是指聊天应用程序:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:11:39.747

Checkout Pusher 的入门[页面](http://pusher.com/docs/javascript_quick_start)。这应该是非常直接的。我假设你有一个`Bet`模型。在这种情况下

```
class Bet < ActiveRecord::Base
  after_commit :push_notification, :on => :create, :if => :persisted?

  def push_notification
   Pusher["bets"].trigger("created", {:id => id, :message => "New bet created"}.to_json)
  end
end 
```

根据你的观点你应该做的，

```
var pusher = new Pusher('abc243231a132b21c321'); // Replace with your app key
var channel = pusher.subscribe('bets');

channel.bind('created', function(data) {
  alert('A new bet was created: ' + data.message);
}); 
```

希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:57:30.267

观看此 railscasts，它可以适应您的应用程序。

[http://railscasts.com/episodes/316-private-pub](http://railscasts.com/episodes/316-private-pub)

# java - LinkedList 在 add() 上产生巨大的延迟

> ID：12881798
> 
> 赞同：1
> 
> 时间：2012-10-14T11:31:03.883
> 
> 标签：java, linked-list, delay, lag

我一直在开发一个在背景中具有滚动环境（2D）的概念验证游戏。我有一个名为 roadTile 的自定义类对象，它基本上是一个 200 像素高的块，上面有一张要绘制的图片和一些物理特性。我一次将图块存储在 LinkedList 5 中。我有一个主循环，负责移动所有内容并检查碰撞。该循环应该每 50 毫秒执行一次（由计时器控制），它通过测量最后一次运行的长度然后从睡眠时间中减去它来保持速率固定。

这通常运行良好，循环运行时间不到一毫秒，但是当我启动程序时，它在前 2-7 次后“窒息”。我删除了旧瓷砖并在列表底部放置了一个新瓷砖。在调用 add (new roadTile()) 时，程序会暂停 20-400 毫秒，这是计算机时间的一千年，最重要的是，行为并不一致。有时它可以正常工作，有时则不行。

我很不知道如何消除这个，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:33:20.630

确保在开始使用图形之前缓存所有内容。这可能是您延迟的原因。

# php - PHP PDO 获取对象

> ID：12881802
> 
> 赞同：8
> 
> 时间：2012-10-14T11:31:13.487
> 
> 标签：php, pdo

我试图弄清楚如何从 PDO 获取到我的自定义类，以及通常的 PDO-to-object API，并且发现缺乏体面的文档令人沮丧。大多数选项仅记录为选项，而示例都使用提取到数组中。
那么，有人可以解释如何使用这些：

*   PDO::FETCH_OBJ
*   PDO::FETCH_CLASS
*   PDO::FETCH_CLASSTYPE
*   PDO::FETCH_INTO
*   PDO::FETCH_LAZY
*   PDOStatement::fetch
*   PDOStatement::fetchObject
*   PDOStatement::setFetchMode

如果可能的话，我想大致解释一下每个函数/常量如何用于获取对象，或者有什么区别，以及如何获取我的类的具体答案，例如：

```
class MyRow {
  public $col1, $col2;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T13:34:31.517

这是我设法弄清楚的：

## 常数

*   PDO::FETCH_OBJ
    用于获取未命名（“匿名”）对象的新实例

*   PDO::FETCH_CLASS
    用于获取现有类的新实例（列名应与现有属性匹配，或`__set`应用于接受所有属性）。设置属性后将调用类的构造函数。

*   PDO::FETCH_CLASSTYPE
    与`FETCH_CLASS`（按位或）一起使用，要创建其实例的类的名称在第一列中，而不是提供给函数。

*   PDO::FETCH_INTO
    与相同类型的类一起使用`FETCH_CLASS`（必须将所有列作为属性名称处理），但更新现有对象而不是创建新对象。

*   PDO::FETCH_LAZY
    我不知道这是做什么的。

## 功能

*   PDOStatement::fetch
    常规的 get-a-row 命令。我不知道如何使用它，`FETCH_CLASS`或者`FETCH_INTO`因为没有任何方法可以传递类名/实例。

*   PDOStatement::fetchObject
    一种做`FETCH_CLASS`or的方法`FETCH_INTO`，包括传递构造函数参数。没有 args 是`FETCH_OBJ`.

*   PDOStatement::setFetchMode
    一种设置默认获取模式的方法，因此`PDOStatment::fetch`可以在没有 args 的情况下调用。

* * *

这是我设法弄清楚的最好的。我希望它可以帮助别人（我需要的`fetchObject`方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:01:36.983

准备好语句后，将 PDOStatement::setFetchMode 与 PDO::FETCH_CLASS 一起使用：

```
$stmt = $pdo->query('SELECT col1, col2 FROM table');
$stmt->setFetchMode(\PDO::FETCH_CLASS, 'MyRow');
$obj = $stmt->fetch(); 
```

# c# - 如何从超大数据表中填充下拉列表？

> ID：12881803
> 
> 赞同：0
> 
> 时间：2012-10-14T11:31:22.540
> 
> 标签：c#, asp.net, ajax, performance, drop-down-menu

我有来自数据库的表这个表在我的 asp 页面中有 400000 行我的下拉列表（ddlPlaintiffName）从这个方法填充

```
 私人无效FillPlaintiff（）
    {

        //通过来自web.config的连接字符串声明连接
        SqlConnection sqlcon = 新的 SqlConnection
            (ConfigurationManager.ConnectionStrings["SystemConn"].ConnectionString);
        //将sql语句声明为字符串变量

        SqlCommand sqlcom = new SqlCommand();
        sqlcom.Connection = sqlcon;
        sqlcom.CommandType = CommandType.StoredProcedure;
        sqlcom.CommandText = "proc_SelectPlaintiff";

        数据表 ds = 新数据表（）；
        //用包含数据库数据的数据适配器填充数据集
     // 悲伤。填充（ds）；
        sqlcon.Open();
         SqlDataAdapter 悲伤 = 新的 SqlDataAdapter(sqlcom);

         悲伤。填充（ds）；

        ddlPlaintiffName.DataSource = ds;
        ddlPlaintiffName.DataBind();
        ddlPlaintiffName.Items.Insert(0, "--select --");
        sqlcon.Close();

    }

```

但是每次回发我的负载都非常非常慢我该如何避免这种情况

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T11:37:42.180

首先，您不应该将这么大的表格用于下拉列表。由于用户不容易找到价值，所以对他没有用处。您应该提供某种搜索并基于搜索条件，尽管 ajax，数据应该显示在下拉列表中。只有当用户输入三个或更多字符时才应该开始搜索，否则基于 ajax 的查询也会变慢。

请参阅以下页面以获取想法

[jQuery Searchable DropDown 插件演示](http://jsearchdropdown.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:05:31.747

首先，说“不要这样做”的评论和答案是正确的——包含几十个项目的下拉菜单对用户几乎总是无用的。

其次，你的问题的答案——如果你不能改变用户界面——是引入缓存。有几种方法可以做到这一点；你选择哪一种取决于具体的瓶颈，但我会先阅读[这个](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.71%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T11:48:05.417

@Oded 的答案是最好的选择。我认为这样的 DropDownList 没有任何意义。

另一方面，时间问题难以避免。您可以使用`ViewState`，但是 400,000 行就像...太多了！也许，如果你解释你在这个表中存储什么样的数据，我们可以考虑另一种方法来做到这一点

# java - 在 java 中转换 RijndaelManaged 时缺少参数

> ID：12881804
> 
> 赞同：1
> 
> 时间：2012-10-14T11:31:30.740
> 
> 标签：java, aes, rijndaelmanaged

在将.net 解密代码转换为 java 时出现异常

```
Exception in thread "main" java.lang.IllegalArgumentException: Missing argument
    at javax.crypto.spec.SecretKeySpec.<init>(DashoA13*..)
    at com.motorola.gst.DecryptTest3.Decrypt(DecryptTest3.java:90)
    at com.motorola.gst.DecryptTest3.main(DecryptTest3.java:36) 
```

好吧，我第一次尝试解密并将.net代码转换为java

这是我要转换的 .net 代码

```
 private static string Decrypt(string encryptedText, string completeEncodedKey, int keySize)
        {
            RijndaelManaged aesEncryption = new RijndaelManaged();
            aesEncryption.KeySize = keySize;
            aesEncryption.BlockSize = 128;
            aesEncryption.Mode = CipherMode.CBC;
            aesEncryption.Padding = PaddingMode.PKCS7;
            aesEncryption.IV = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[0]);
            aesEncryption.Key = Convert.FromBase64String(ASCIIEncoding.UTF8.GetString(Convert.FromBase64String(completeEncodedKey)).Split(',')[1]);
            ICryptoTransform decrypto = aesEncryption.CreateDecryptor();
            byte[] encryptedBytes = Convert.FromBase64CharArray(encryptedText.ToCharArray(), 0, encryptedText.Length);
            return ASCIIEncoding.UTF8.GetString(decrypto.TransformFinalBlock(encryptedBytes, 0, encryptedBytes.Length));
        } 
```

我浏览了许多帖子，发现[使用 Java 由 .NET 的 RijndaelManaged 加密的解密字节](https://stackoverflow.com/questions/6084923/decrypting-bytes-encrypted-by-nets-rijndaelmanaged-using-java)与我的情况更相关。

我遵循了这些并将我的解密函数写为::

```
private static String Decrypt(String encryptedText, String completeEncodedKey,int keySize) {
        //get completeEncodedKey in bytes and then to string
        String decodedcompleteEncodedKey = StringUtils.newStringUtf8(Base64.decodeBase64(completeEncodedKey));
        System.out.println("Decoded completeEncodedKey Key ::  "+decodedcompleteEncodedKey);
        int indexComma = decodedcompleteEncodedKey.indexOf(',');
        System.out.println("COmma Index :: "+indexComma);
        String IV = decodedcompleteEncodedKey.substring(0, indexComma);
        String Key = decodedcompleteEncodedKey.substring(indexComma+1,decodedcompleteEncodedKey.length());
        System.out.println("IV::: "+IV);
        System.out.println("Key::: "+Key);

    byte[] sessionKey = null; 
    byte[] iv = null ; 
    byte[] plaintext = encryptedText.getBytes(); 
    Cipher cipher = null;
    try {
        cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(sessionKey, "AES"), new IvParameterSpec(iv));
        byte[] ciphertext = cipher.doFinal(plaintext);
    } catch (IllegalBlockSizeException e) {
        System.out.println("IllegalBlockSizeException");
        e.printStackTrace();
    } catch (BadPaddingException e) {
        System.out.println("BadPaddingException");
        e.printStackTrace();
    } catch (InvalidKeyException e) {
        System.out.println("InvalidKeyException");
        e.printStackTrace();
    } catch (InvalidAlgorithmParameterException e) {
        System.out.println("InvalidAlgorithmParameterException");
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        System.out.println("NoSuchAlgorithmException");
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        System.out.println("NoSuchPaddingException");
        e.printStackTrace();
    }
    return null;
} 
```

但现在我在线程“main”java.lang.IllegalArgumentException 中遇到异常：缺少参数。

谁能帮我修复这些错误。任何帮助，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-05T14:53:23.400

对我来说，问题是`new SecretKeySpec(sessionKey, "AES")`用`sessionKey = null`.

# c# - 将用户重定向到自己的 Marketplace 页面

> ID：12881805
> 
> 赞同：0
> 
> 时间：2012-10-14T11:31:33.523
> 
> 标签：c#, windows-phone-7

我想让我的用户直接进入我在 WP7-Marketplace 上的开发页面。有没有办法这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:37:14.227

我假设你想展示你所有的应用程序，而不仅仅是一个特定的应用程序。在这种情况下，您可以使用[MarketplaceSearchTask](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.marketplacesearchtask%28VS.92%29.aspx)并使用您的发布者名称作为搜索词。我没有测试过这段代码，但应该可以。

```
MarketplaceSearchTask mst = new MarketplaceSearchTask();
mst.ContentType = MarketplaceContentType.Applications;
mst.SearchTerms = "your publisher name"
mst.Show(); 
```

# objective-c - 从自我内部摧毁自我

> ID：12881806
> 
> 赞同：0
> 
> 时间：2012-10-14T11:31:34.860
> 
> 标签：objective-c, objective-c-runtime, oneway

我有一个 Objective-C 类，它的实例可以检测何时不再需要它们并自行销毁，但我正在寻找一种安全的方法来从对象本身内部触发对象的自毁，而不会以某种方式“破坏现有的方法”调用破坏”...我的代码大致如下（为简洁起见，删除了一些）：

```
+ (oneway void)destroyInstance:(id)obj {

    printf("Destroying.\n");
    if (obj != nil) {
        free(obj);
        obj = nil;
    }

}

- (oneway void)release {

    _noLongerRequired = [self determineIfNeeded]; // BOOL retVal

    if (_noLongerRequired) {
        [self deallocateMemory]; // Free ivars etc (NOT oneway)
        [MyClass destroyInstance:self]; // Oneway
    }
} 
```

如果我调用`-release`，它应该立即返回到主线程（由于`oneway`）。

同时，如果实例发现不再需要它，它应该调用`oneway`类方法`destroyInstance:`并将自己从运行时中删除。我的问题是，这安全吗？我用对了`oneway`吗？在我看来，有可能在实例`-release`函数返回之前破坏它，这可能是......相当糟糕......？

（PS：显然不是在寻找与 NSObject 等有关的任何东西`:)`）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:56:17.937

如果您想要工作和可维护的软件并且在任何情况下都不安全，那么这无疑是一个糟糕的主意。但有时可怕的、不安全的想法在周末会很有趣，所以我会回答我能辨别的问题的组成部分。

一个方法不会被“销毁”，因为一个实例被释放了。可能发生的情况是，`self`在方法执行期间最终会指向已释放的内存，这意味着`self`在此期间访问或任何实例变量都可能崩溃。

至于你的代码的其余部分，根本没有理由设置`obj`equal to `nil`in `+destroyInstance`，所以如果你正在尝试完成一些特别的事情（`nil`也许是指向对象的指针），那么这种方式不是正确的方法.

考虑使用`oneway`，语言所说的是发送此消息不会阻塞调用线程。在释放对象的上下文中，我认为这是有道理的，因为消息的目标可能永远不会被该线程再次引用。按照这种逻辑，我认为您的声明`+destroyInstance`可能还可以。我确实想知道您是否需要提供某种同步，以便没有`retain`/`release`竞争条件，但考虑到它，获取对象的所有权可能永远不应该是异步的。

我个人的看法是，任何将这段代码投入生产的人都应该被解雇或起诉 =P。但是，如果仅用于教育目的，请玩得开心，并希望这会有所帮助。

# c# - 如何使用 Xpath 插入 xml 文件

> ID：12881811
> 
> 赞同：1
> 
> 时间：2012-10-14T11:32:47.230
> 
> 标签：c#, .net, xslt, xpath, .net-2.0

```
<feed>
    <entry>
        <data>1234</data>
        <content>Stackoverflow</content>
    </entry>
</feed>
Next data.. 
```

我必须在 c# 中使用 xpath 创建上面的 xml 是否可以这样做..

我已经使用下面的代码完成了 xml 文件

```
 XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.Load(@"C:\Log_Data.xml");

        XmlElement newelement = xmlDoc.CreateElement("entry");
        XmlElement xmldata = xmlDoc.CreateElement("data");
                    XmlElement xmlcontent = xmlDoc.CreateElement("content");

                    xmldata.InnerText ="1234" ;
        xmlcontent.InnerText ="Stackoverflow";

                    newelement.AppendChild(xmldata);
        newelement.AppendChild(xmlcontent);

                    xmlDoc.DocumentElement.AppendChild(newelement);
        xmlDoc.Save(@"C:\Log_Data.xml"); 
```

但是我必须像在 sql 中那样使用 Xpath 来编写像“**插入表......”** 这样的查询，如果在 .Net 2.0 中可能的话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:57:55.513

**XPath 是一种用于 XML 文档的*查询语言。*因此，它不提供更改（删除或插入节点）XML 文档的能力**。

创建或更改 XML 文档（称为 XML 转换）的最合适的方法之一是使用 XSLT——一种专为 XML 转换而设计的语言。

从 C# 可以使用 .NET **[XslCompiledTransform](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xslcompiledtransform.aspx)**类来执行任何 XSLT 1.0 转换。

XSLT 2.0 存在第三方 .NET 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:37:53.260

您必须创建自己的`XPath parser`才能实现这一目标。可以在[这里](https://stackoverflow.com/questions/508390/create-xml-nodes-based-on-xpath "这里")找到它的简单实现。

# c# - 线程创建

> ID：12881812
> 
> 赞同：-2
> 
> 时间：2012-10-14T11:32:49.273
> 
> 标签：c#, .net, multithreading

我已经对 GOF 工厂方法模式进行了实验，并为此使用了线程。我使用 GOF 工厂方法模式在 C# .Net 中动态创建线程。代码结构与工厂方法模式示例中描述的完全相同。我知道创建新线程不被认为是好的做法。但有时您必须考虑一些不够好的实践来满足您的要求。我需要知道通过这种模式动态创建线程是否安全，或者是否有更好的模式或技术来在运行时创建和管理线程？？？我将在我的项目中实现这一点，我需要在运行时创建多个线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:39:48.067

创建新线程不被认为是好的做法。考虑使用线程池。线程池内置了许多优化。如果您使用的是 .Net 4.0，那么您也可以使用 Task Parallel Library。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:30:16.293

As stated by [Hans Passant](https://stackoverflow.com/users/17034/hans-passant) .NET 4.0 TaskFactory Class is a useful tool for creating simultaneous Threads.

A task factory is represented by the System.Threading.Tasks.TaskFactory class, which creates Task objects, or the System.Threading.Tasks.TaskFactory class, which creates Task objects. Both classes contain methods that you can use to:

```
Create tasks and start them immediately. 

Create task continuations that start when any or all of an array of tasks complete. 

Create tasks that represent pairs of begin/end methods that follow the Asynchronous Programming Model. 
```

References:

*   [http://msdn.microsoft.com/en-us/library/ee782519.aspx](http://msdn.microsoft.com/en-us/library/ee782519.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd460693.aspx](http://msdn.microsoft.com/en-us/library/dd460693.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)
*   [http://msdn.microsoft.com/en-us/library/ee372288.aspx](http://msdn.microsoft.com/en-us/library/ee372288.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd997423.aspx](http://msdn.microsoft.com/en-us/library/dd997423.aspx)

# javascript - 使用哪种解决方案来加载 HTML 页面？

> ID：12881813
> 
> 赞同：3
> 
> 时间：2012-10-14T11:32:55.140
> 
> 标签：javascript, html

我正在为我的站点用户提供进行实时聊天的能力。目前，要开始聊天，用户单击站点中的可单击图标，一旦单击，它应该会弹出一个滑动或其他内容，但不是一个新的弹出窗口，以加载一个纯 HTML 页面，该页面使用pusher.com 的实时聊天代码。

我尝试使用 Fancybox，但无法加载外部 HTML 代码。

我真的想要一些简单的东西，不想过度设计任何东西。

你会推荐什么解决方案？

谢谢！

# facebook - 关于提要帖子删除的实时更新通知

> ID：12881814
> 
> 赞同：0
> 
> 时间：2012-10-14T11:32:58.363
> 
> 标签：facebook, real-time, updates, feed

这里的场景。我有一个应用程序请求每个新用户 read_stream 和 publish_actions 权限。该应用程序订阅了用户->提要实时更新。

每次用户执行特定操作时，应用都会在 user_fuid/feed 上发布帖子。

每当用户删除（或者，最好是删除或隐藏）我的应用发布的帖子之一时，我需要实时更新系统发布到我的回调。

那可能吗？如果是这样，那是最佳解决方案还是我可以做得更好（例如权限更少、性能更高等）？

到目前为止，我在发布和喜欢时收到了通知。但我有一种感觉，实时更新系统对图表的增加范式做出反应，但不通知删除。我对吗？

# java - 如何初始化 ArrayList

> ID：12881818
> 
> 赞同：0
> 
> 时间：2012-10-14T11:33:18.620
> 
> 标签：java, bluej

我有一个非常基本的问题。我如何需要为 ArrayList 键入参数才能使用 BlueJ 中的代码？我有一个方法如下。

`public void requiresVaccination(int year, ArrayList<Cat>list)`

我创建了一些猫对象 cat1、cat2 和 cat3。

我想，我需要为 ArrayList 输入`2012`和`year`，`[cat1, cat2, cat3]`但显然我错了。谁能告诉我我需要做什么，好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:36:21.427

要调用该方法，请将年份与新的 ArrayList 对象一起传递。

使用*双括号初始化*，第二个参数的代码变为：

```
new ArrayList<Cat>() {{ add(cat1); add(cat2); add(cat3); }}; 
```

要调用该方法，请使用：

```
requiresVaccination(2012, new ArrayList<Cat>() {{ add(cat1); add(cat2); add(cat3); }}); 
```

我认为这是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:34:44.033

你必须给方法一个 Cat 对象的列表，你不能按照你的建议去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:44:57.670

我认为可以使用这样的签名

```
public void requiresVaccination(int year, Cat... list) 
```

因此你可以这样称呼你的方法

```
 requiresVaccination(2010, cat1, cat2, cat3); 
```

并且在函数内部，列表的行为可能类似于 Cat (Cat[]) 的数组

# php - Ext js MVC 403（禁止）

> ID：12881823
> 
> 赞同：0
> 
> 时间：2012-10-14T11:33:45.597
> 
> 标签：php, extjs, yii

我正在 yii 框架中开发一个网站，我正在使用 ext js 4 mvc 结构。
我正在尝试将 ext js 4 与 yii 框架一起使用。
我在 ext js 4 中使用 MVC，我收到禁止消息。

在执行此应用程序期间，我收到以下消息 `GET http://localhost/helloext/protected/controller/Users.js?_dc=1350173045981 403`（禁止）

以下是我的应用程序结构：-

```
helloext-
--extjs // contins ext js 4 sdk
--protected
  --controllers
    --Users.js
--app.js
--index.html 
```

**代码：-**
1）index.html

```
<html>
<head>
    <title>Account Manager</title>

    <link rel="stylesheet" type="text/css" href="extjs/resources/css/ext-all.css">

    <script type="text/javascript" src="extjs/ext-debug.js"></script>

    <script type="text/javascript" src="app.js"></script>
</head>
<body></body>
</html> 
```

2)app.js

```
Ext.application({
    name: 'helloext',
    appFolder : 'protected',

    controllers:['Users'],

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: '',
            items: [
                {
                    xtype: 'panel',
                    title: '<b>Balaee<b>',
                    html : 'List of users will go here'
                }
           ]
        });
    }
}); 
```

3)
受保护
的--Users.js

```
Ext.define('helloext.protected.controllers.Users',
        {
            //extend: 'Ext.app.Controller',
        extend: 'Ext.protected.Controllers',

        init: function() {
            this.control({
                'viewport > panel': {
                    render: this.onPanelRendered
                }
            });
        },

        onPanelRendered: function() {
            console.log('The panel was rendered');
        }
        }
); 
```

我如何将 yii 框架与 ext js 4 mvc 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:52:49.647

你说，“***下面是我的应用程序结构***”，你的应用程序结构似乎有些不同。反正...

`protected`文件夹严格限制在浏览器中。检查文件夹内的**.htaccess**（*它隐藏在 Windows 中*）文件`protected`，它包含.htaccess 文件`deny from all`。这就是你得到的原因`403 Forbidden`

1) 移出`Users.js`文件`protected`夹。

2）删除 .htaccess 文件（但这是一个**安全风险**）

2) 或者，使用 Yii 的assetManager。

[http://www.yiiframework.com/forum/index.php?/topic/2032-assets/](http://www.yiiframework.com/forum/index.php?/topic/2032-assets/) http://www.yiiframework.com/wiki/148/understanding-assets/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T15:10:03.043

我相信你需要重新设计你的 Extjs 应用程序以兼容 Yii 框架的设计。为此，我推荐以下结构：

```
/yiiApp

      /protected

          /assets

              /yourExtjsApp 
```

你还需要使用 Yii CAssetManager 来发布你的资产（也就是你的 ExtjsApp），这样它们就可以在全球范围内访问：

`$assetUrl = Yii::app()->getAssetManager()->publish('application.assets', false, -1, false );`

（您可以在任何地方执行此操作，我建议您使用 views/layout/main.php 甚至 protected/config/main.php 以便您以后可以访问assetUrl）

最后，在您的 protected/views/layout/main.php 或 protected/views/index.php （无论您喜欢哪个）中，您可以创建您的 Extjs 应用程序，如下所示：

```
Ext.application({
    name: 'yourExtjsApp',
    appFolder: '<?php echo assetUrl; ?>',
    .... 
```

# actionscript-3 - AS3 charset 字符集检测库

> ID：12881825
> 
> 赞同：1
> 
> 时间：2012-10-14T11:34:14.733
> 
> 标签：actionscript-3, character-encoding, string-decoding

是否有任何库来检测字符串的字符集？

这是我转换字符串的方式

```
var b:ByteArray = new ByteArray();
b.writeMultiByte(str,to_charset);
return b.toString(); 
```

当 str 已经是 windows-1251 并且 to_charset 也是 windows-1251 时，问题就开始了。在第二次转换后，它正在做一些奇怪的事情：

Русский -> Русский

[http://www.artlebedev.ru/tools/decoder/](http://www.artlebedev.ru/tools/decoder/)

此处的解码器显示 Ðóññêèé 它是 CP1252 → CP1251

# types - 静态解析的类型参数

> ID：12881828
> 
> 赞同：5
> 
> 时间：2012-10-14T11:34:44.750
> 
> 标签：types, parameters, f#

以下（简化）片段取自我正在实现的应用程序，该应用程序始终使用静态解析的类型参数。

```
type A< ^B when ^B : (static member MyMember : Unit -> Unit)> = {
  Field : unit
}
type TestA = {
  AField : A< BTy >
}
and BTy = {
  BField : Unit
} with
  static member MyMember () = () 
```

`AField : A< BTy >`当我定义字段 AField ( )的类型时，IntelliSense 给了我以下错误：***类型 'BTy' 不支持任何名为 'MyMember' 的运算符***。

已编辑。分别声明它们是有效的，但是如果我有一个相互引用并且我**不能**声明第三种类型放在包含这两种类型的公共信息的顶部。我应该怎么做才能避免这个问题？无论如何，如果我在它的工作定义下面定义`let pluto = ("" :> obj) :?> A< BTy >`，我想是因为这两种类型都可以从 let 绑定中看到。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T00:07:17.023

老实说，我有点惊讶您甚至可以在类型声明中使用静态成员约束，但正如@pad 所提到的，当您将声明按正确的顺序并删除递归时，它可以工作（尽管当您转向更复杂的示例时，我不确定是否会有其他限制）：

```
type A< ^B when ^B : (static member MyMember : Unit -> Unit)> = 
  { Field : unit } 

type BTy = 
  { BField : Unit } 
  static member MyMember () = () 

type TestA = { AField : A<BTy> } 
```

无论如何，我认为在类型声明中使用静态成员约束有点复杂。一种更简洁的方法是定义一个清楚地描述（和记录）您需要的成员的接口：

```
type IMyMember =
  abstract MyMember : unit -> unit 
```

现在，静态成员约束仍可用于从具有所需成员但不*实现*接口的类型创建接口的实现。使用这种技术，您应该能够实现与对类型的静态成员约束完全相同的功能（但以更清晰的方式）：

```
/// Captures 'IMyMember' implementation from another type using static constraints
let inline captureMyMember< ^B when ^B : (static member MyMember : Unit -> Unit)> =
  { new IMyMember with
      member x.MyMember () = 
        (^B : (static member MyMember : Unit -> Unit) ()) } 
```

例如，该函数`IMyMember`将从您的`BTy`类型创建：

```
/// A type that contains field and a captured implementation of 'IMyMember'
type A = 
  { Field : unit 
    Operations : IMyMember } 

let it = { Field = ()
           Operations = captureMyMember<BTy> } 
```

另外，我在一篇展示如何[编写通用数字代码](http://tomasp.net/blog/fsharp-generic-numeric.aspx)的文章中使用了相同的技术，我认为它在那里工作得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:53:20.830

您的实现@Tomas 满足了这个问题，但对您的解决方案的风格有些犹豫，因为它不尊重函数式编程范式。我想到了一个由 Haskell 的 Type Classes 实现产生的解决方案。已经实现了接口、抽象类等，以允许 F# 环境与 .Net 环境“交互”，出于统一风格的原因，在以下上下文中使用实现接口、抽象类等的代码无需与 .Net 库进行交互，在我看来这是一个“开销”（尽管 F# 是一种多范式语言）。这就是为什么我发现 Haskell 的 Type Classes 的实现非常优雅的原因。下面我通过F#实现了“Haskell Type Class”代码来解决我的问题。

```
type Operations< ^a> = 
  {  
    MyMember : unit -> unit
  }

type A< ^a> = {
  Operations : Operations< ^a>
}

and TestA = { 
  AField : A< BTy > 
}

and BTy = { 
  BField : Unit 
}

let it = 
  let BTy_operations : Operations< BTy > = { MyMember = fun () -> () }
  let A_of_BTy = { Operations = BTy_operations }
  { AField = A_of_BTy } 
```

# memory-leaks - 图灵机中的内存泄漏，由 Free Pascal 编译

> ID：12881830
> 
> 赞同：2
> 
> 时间：2012-10-14T11:35:20.420
> 
> 标签：memory-leaks, pascal, freepascal, turing-machines

我在 Windows Vista 笔记本电脑上使用[Free Pascal编译器 2.6.0 版在 Pascal 中编写了](http://en.wikipedia.org/wiki/Free_Pascal)[图灵机。](http://en.wikipedia.org/wiki/Turing_machine)在编译和测试结果后，我使用了“heaptrc”单元来检测一些内存泄漏。不幸的是，该程序找到了几个我无法修复的问题。

我已经通过 Google 和 Stack Overflow 寻找解决方案。在那里，我发现了我在程序中使用的“try finally”之类的结构。我将所有动态数组的大小重置为零以确保它们已被清理。这些措施解决了一些内存泄漏问题，但仍有八个未释放的内存块。

然后我在一个德国德尔福论坛上寻求帮助，在那里我得到了一些帮助，遗憾的是没有帮助。对于那些懂德语的人来说，它在*[Free Pascal 2.6.0 中。图灵机内存泄漏](http://www.entwickler-ecke.de/topic_Free+Pascal+260Memory+Leak+in+Turingmaschine_110108.html)*。

该程序的基本工作方式是通过读取 .txt 文件来创建和填充指令表。然后要求用户提供磁带的初始数据。在以下循环中，根据指令表更改数据，直到机器停止。

然后应该清理所有内容，但这似乎无法正常工作。如果我在调试器中运行程序，程序以退出代码“01”结束，根据文档，这意味着“无效的函数号尝试了无效的操作系统调用。”。但这也没有多大帮助。

如果我正确理解了“try finally”结构，则无论发生什么都应该调用并执行“Machine.Free”，因此应该正确清理所有内容。我通过反复试验学习了很多编程，所以我真的很想知道，为什么事情不能正常工作，而不仅仅是一个解决方案。

当然，如果有一些严重的设计缺陷，我愿意更改我的代码。这些是源代码文件。'heaptrc' 的输出在 'memory.txt' 中：

### 图灵帕斯

```
{turing.pas}
{Program to imitate a Turing machine, based on the principles by Alan Turing.}

program Turing;

{$mode objfpc}{$H+}

uses
  sysutils,  {Used for the conversion from Integer to String.}
  TuringHead, {Unit for the head instructions.}
  TuringTable; {Unit for the instruction table.}

type
{Declarations of self made types}
  TField = Array of Char;

{Class declarations}
  TMachine = class(TObject)
    private
      Tape: TField; {The tape, from which data is read or on which data is written.}
      TapeSize: Integer; {The length of the tape at the start of the machine.}
      Head: THead; {The head, which reads, writes and moves. Look in "turinghead.pas" to see, how it works.}
      InstructionTable: TInstructionTable; {The table, which contains the instructions for the machine. Look in "turingtable.pas" to see, how it works.}
      ConstantOutput: Boolean; {If its value is "True", there will be constant output.
                                It is adjustable for performance, because the machine is much slower when it has to output data all the time.}
      procedure GetSettings(); {Ask the user for different settings.}
      procedure GetInput(); {Read the input from the user.}
      procedure TapeResize(OldSize: Integer; Direction: Char); {Expand the tape and initialize a new element.}
      procedure TapeCopy(); {Copies the elements of the array to the right.}
      procedure Display(State: Char; ReadData: Char; WriteData: Char; MoveInstruction: Char; HeadPosition: Integer); {Display the machines current status.}
    public
      constructor Create(); {Prepare the machine.}
      procedure Run(); {Run the machine.}
      destructor Destroy(); Override;{Free all objects, the machine uses.}
    protected
    published
  end;

var
  Machine: TMachine;

procedure TMachine.GetSettings();
var
  OutputType: Char;
begin
  WriteLn('If you want constant output, please type "y", if not, please type "n"!');
  ReadLn(OutputType);
  case OutputType of
    'n': ConstantOutput := False;
    'y': ConstantOutput := True
  end;
  WriteLn('Please input the start tape length! It will expand automatically, if it overflows.');
  ReadLn(TapeSize);
  if TapeSize > 0 then {Test, if the input makes sense, to prevent errors.}
    SetLength(Tape, TapeSize)
  else
    begin
      WriteLn('Please input a length greater than zero!');
      GetSettings()
    end
end;

procedure TMachine.GetInput();
var
  UserInput: String;
  Data: Char;
  HeadPosition: Integer;
begin
  WriteLn('Please input the data for the tape!');
  SetLength(UserInput, TapeSize);
  ReadLn(UserInput);
  if UserInput[TapeSize] <> '' then
    begin
      HeadPosition := 0;
      while HeadPosition < TapeSize do
        begin
          Data := UserInput[HeadPosition + 1]; {The data is stored one place ahead of the current head position.}
          Head.WriteData(Tape, HeadPosition, Data);
          HeadPosition := Head.Move(HeadPosition, 'R')
        end;
      WriteLn('Thank you, these are the steps of the machine:')
    end
  else
    begin
      WriteLn('Please fill the whole tape with data!');
      GetInput()
    end
end;  

procedure TMachine.TapeResize(OldSize: Integer; Direction: Char);
var
  NewSize: Integer;
begin
  case Direction of
    'L': begin
      NewSize := OldSize + 1;
      SetLength(Tape, NewSize);
      TapeCopy(); {Copy the elements of the array, to make space for the new element.}
      Head.WriteData(Tape, Low(Tape), '0') {Initialize the new tape element with the empty data.}
    end;
    'R': begin
      NewSize := OldSize + 1;
      SetLength(Tape, NewSize);
      Head.WriteData(Tape, High(Tape), '0') {Initialize the new tape element with the empty data.}
    end
  end
end;

procedure TMachine.TapeCopy();
var
  Counter: Integer;
begin
  Counter := High(Tape);
  while Counter > 0 do
    begin
      Tape[Counter] := Tape[Counter - 1];
      Dec(Counter, 1)
    end
end;

procedure TMachine.Display(State: Char; ReadData: Char; WriteData: Char; MoveInstruction: Char; HeadPosition: Integer);
var
  DispHead: Integer;
begin
  DispHead := 0;
  while DispHead < Length(Tape) do {Write the data on the tape to the output.}
    begin
      Write(Tape[DispHead]);
      DispHead := Head.Move(DispHead, 'R');
    end;
  Write(' State: ' + State + ' Read: ' + ReadData + ' Write: ' + WriteData +
        ' Move: ' + MoveInstruction  + ' Head: ' + IntToStr(HeadPosition + 1)); {Constructed string to write information about the machine.}
  WriteLn('')
end;  

constructor TMachine.Create();
begin
  inherited;
  Head := THead.Create();
  InstructionTable := TInstructionTable.Create();
  GetSettings();
  GetInput()
end; {TMachine.Initialize}

procedure TMachine.Run();
var
  TapeData: Char; 
  WriteData: Char;
  StateRegister: Char; 
  MoveInstruction: Char; 
  HeadPosition: Integer; 
  Running: Boolean; 
begin
  if TapeSize > 1 then
    HeadPosition := (Length(Tape) div 2) - 1 {The head starts in the middle of the tape.}
  else
    HeadPosition := 0;
  StateRegister := 'A'; {This is the start register.}
  Running := True;

  while Running do
    begin
      {Get instructions for the machine.}
      TapeData := Head.ReadData(Tape, HeadPosition);
      WriteData := InstructionTable.GetData(StateRegister, TapeData, 'W');
      MoveInstruction := InstructionTable.GetData(StateRegister, TapeData, 'M');

      if ConstantOutput then
        Display(StateRegister, TapeData, WriteData, MoveInstruction, HeadPosition);

      Head.WriteData(Tape, HeadPosition, WriteData);

      case MoveInstruction of {Depending on the instructions, move the head.}
        'S': HeadPosition := Head.Move(HeadPosition, 'S');
        'L': HeadPosition := Head.Move(HeadPosition, 'L');
        'R': HeadPosition := Head.Move(HeadPosition, 'R')
      end;

      if HeadPosition > High(Tape) then
        TapeResize(Length(Tape), 'R');

      if HeadPosition < Low(Tape) then {If the head is farther to the left, than the tape is long, create a new field on the tape.}
        begin
          TapeResize(Length(Tape), 'L'); 
          HeadPosition := 0
        end;

      {Get the next state of the machine.}
      StateRegister := InstructionTable.GetData(StateRegister, TapeData, 'N');

      if StateRegister = 'H' then {This is the halting register.}
        begin
          Display(StateRegister, TapeData, WriteData, MoveInstruction, HeadPosition);
          Running := Head.Halt()
        end
    end
end; {TMachine.Run}

destructor TMachine.Destroy();
begin
  Head.Free;
  InstructionTable.Free;
  SetLength(Tape, 0);
  WriteLn('The turing machine stopped. You can end the program by pressing enter.');
  inherited
end; {TMachine.Stop}

{Implementation of the main program.}
begin
  Machine := TMachine.Create();
  try
    Machine.Run()
  finally
    Machine.Free
  end;
  ReadLn()
end. {Turing} 
```

### 图灵头.pas

```
{turinghead.pas}
{Unit for the head of the turing machine.}

unit TuringHead;

{$mode objfpc}{$H+}

interface

type
  THead = class(TObject)
    private
      function Stay(HeadPos: Integer): Integer; {Head does not move.}
      function MoveLeft(HeadPos: Integer): Integer; {Head moves leftwards.}
      function MoveRight(HeadPos: Integer): Integer; {Head moves rightwards.}
    public
      function Move(HeadPos: Integer; Direction: Char): Integer; {Public function, which calls 'Stay' or 'MoveLeft/Right'.}
      function ReadData(Tape: Array of Char; HeadPos: Integer): Char; {Reads data from the tape.}
      procedure WriteData(var Tape: Array of Char; HeadPos: Integer; Data: Char); {Writes data onto the tape.}
      function Halt(): Boolean; {Commands the head to stop moving.}
    protected
    published
  end;

implementation

function THead.Move(HeadPos: Integer; Direction: Char): Integer;
var
  NextPos: Integer;
begin
  case Direction of {Used this way, so only one function has to be public, not three.}
    'S': NextPos := Stay(HeadPos);
    'L': NextPos := MoveLeft(HeadPos);
    'R': NextPos := MoveRight(HeadPos)
  end;
  Move := NextPos
end; {THead.Move}

function THead.ReadData(Tape: Array of Char; HeadPos: Integer): Char;
var
  Data: Char;
begin
  Data := Tape[HeadPos];
  ReadData := Data
end; {THead.ReadData}

procedure THead.WriteData(var Tape: Array of Char; HeadPos: Integer; Data: Char);
begin
  Tape[HeadPos] := Data
end; {THead.WriteData}

function THead.Stay(HeadPos: Integer): Integer;
var
  NextPosition: Integer;
begin
  NextPosition := HeadPos;
  Stay := NextPosition
end; {THead.Stay}

function THead.MoveLeft(HeadPos: Integer): Integer;
var
  NextPosition: Integer;
begin
  NextPosition := HeadPos - 1;
  MoveLeft := NextPosition
end; {THead.MovetLeft}

function THead.MoveRight(HeadPos: Integer): Integer;
var
  NextPosition: Integer;
begin
  NextPosition := HeadPos + 1;
  MoveRight := NextPosition
end; {THead.MoveRight}

function THead.Halt(): Boolean;
begin
  Halt := False
end; {THead.Halt}

begin
end. 
```

### 图灵表.pas

```
{turingtable.pas}
{Unit for creating and accessing the instruction table.}

unit TuringTable;

{$mode objfpc}{$H+}

interface

const
  TupelLength = 5; {The amount of characters, each tupel has.}

type
{Declarations of self made types}
  TTextFile = TextFile;
  TDataString = Array of String[TupelLength]; {Every tupel has its own data string.}
  TDataTable = record {The type of the record, which is used to look up the instructions for the machine.}
      State: Array of Char; {The current state of the machine.}
      Read:  Array of Char; {The read data.}
      Write: Array of Char; {The data, which has to be written onto the tape.}
      Move:  Array of Char; {The movement instruction for the head.}
      Next:  Array of Char  {The next state of the machine.}
    end;

{Class declarations}
  TInstructionTable = class(TObject)
    private
      TupelNumber: Word; {The number of seperate tupels, which are defined in the text file.}
      DataString: TDataString; {The strings, that have all the tupels.}
      DataTable: TDataTable;
      procedure FileRead();
      procedure ArrayResize(Size: Word); {Resizes all arrays, so they are only as big, as they have to be.}
      procedure TableFill(); {Fills the data table with data from the data string.}
      function GetWrite(CurrentState: Char; ReadData: Char): Char; {Functions, which return the wanted instruction from the table.}
      function GetMove(CurrentState: Char; ReadData: Char): Char;
      function GetNext(CurrentState: Char; ReadData: Char): Char;
    public
      constructor Create(); {Creates the data table, so it can be used.}
      function GetData(CurrentState: Char; ReadData: Char; DataType: Char): Char; {Public function to get instructions.}
      destructor Destroy(); Override;
    protected
    published
  end;

implementation

procedure TInstructionTable.FileRead();
const
  FileName = 'turingtable.txt'; {The text file, that contains the instructions.}
var
  Text: String[TupelLength]; {The read text, which is just one unorganised string.}
  CurrentTupel: Word; {Keeps track of the tupels.}
  DataFile: TTextFile;
begin
  SetLength(DataString, 256); {Make the array pretty big, so it gives enough space.}
  CurrentTupel := 0;
  Assign(DataFile, FileName); {Open the file.}
  Reset(DataFile);
  while not eof(DataFile) do {As long, as the procedure did not reach the end of the text file, it shall proceed.}
    begin
      ReadLn(DataFile, Text);
      if Text[1] <> '/' then {If the line starts with an '/', it is a comment and thus not necessary for the program.}
        begin
          DataString[CurrentTupel] := Text; {Fill the data string.}
          inc(CurrentTupel, 1)
        end
    end;
  ArrayResize(CurrentTupel);
  TupelNumber := CurrentTupel; {This is the maximum amount of tupels.}
  Close(DataFile)
end; {TinstructionTable.FileRead}

procedure TInstructionTable.ArrayResize(Size: Word);
begin
  SetLength(DataString, Size);
  SetLength(DataTable.State, Size);
  SetLength(DataTable.Read, Size);
  SetLength(DataTable.Write, Size);
  SetLength(DataTable.Move, Size);
  SetLength(DataTable.Next, Size)
end; {TInstructionTable.ArrayResize}

procedure TInstructionTable.TableFill();
var
  Position: Word;
  CurrentTupel: Word;
begin
  Position := 1;
  CurrentTupel := 0;
  while CurrentTupel <= TupelNumber do {Fill the record for each tupel.}
    begin
      while Position <= TupelLength do {Each tupel has a certain instruction at the same place, so the record is filled in a certain way.}
        begin
          case Position of
            1: DataTable.State[CurrentTupel] := DataString[CurrentTupel][Position];
            2: DataTable.Read[CurrentTupel]  := DataString[CurrentTupel][Position];
            3: DataTable.Write[CurrentTupel] := DataString[CurrentTupel][Position];
            4: DataTable.Move[CurrentTupel]  := DataString[CurrentTupel][Position];
            5: DataTable.Next[CurrentTupel]  := DataString[CurrentTupel][Position]
          end;
          inc(Position, 1)
        end;
        Position := 1;
        inc(CurrentTupel, 1)
    end
end; {TInstructionTable.TableFill}

function TInstructionTable.GetWrite(CurrentState: Char; ReadData: Char): Char;
var
  Write: Char;
  EntryFound: Boolean;
  CurrentTupel: Integer;
begin
  EntryFound := false;
  CurrentTupel := 0;
  while not EntryFound do
    if (DataTable.State[CurrentTupel] = CurrentState) and (DataTable.Read[CurrentTupel] = ReadData) then {Tests, if the data pair exists in the record.}
      EntryFound := True
    else
      inc(CurrentTupel, 1);
  Write := DataTable.Write[CurrentTupel];
  GetWrite := Write
end; {TInstructionTable.GetWrite}

function TInstructionTable.GetMove(CurrentState: Char; ReadData: Char): Char;
var
  Move: Char;
  EntryFound: Boolean;
  CurrentTupel: Integer;
begin
  EntryFound := false;
  CurrentTupel := 0;
  while not EntryFound do
    if (DataTable.State[CurrentTupel] = CurrentState) and (DataTable.Read[CurrentTupel] = ReadData) then {Tests, if the data pair exists in the record.}
      EntryFound := True
    else
      inc(CurrentTupel, 1);
  Move := DataTable.Move[CurrentTupel];
  GetMove := Move
end; {TInstructionTable.GetMove}

function TInstructionTable.GetNext(CurrentState: Char; ReadData: Char): Char;
var
  Next: Char;
  EntryFound: Boolean;
  CurrentTupel: Integer;
begin
  EntryFound := false;
  CurrentTupel := 0;
  while not EntryFound do
    if (DataTable.State[CurrentTupel] = CurrentState) and (DataTable.Read[CurrentTupel] = ReadData) then {Tests, if the data pair exists in the record.}
      EntryFound := True
    else
      inc(CurrentTupel, 1);
  Next := DataTable.Next[CurrentTupel];
  GetNext := Next
end; {TInstructionTable.GetNext}

constructor TInstructionTable.Create();
begin
  inherited;
  FileRead();
  TableFill()
end; {TInstructionTable.Initialize}

function TInstructionTable.GetData(CurrentState: Char; ReadData: Char; DataType: Char): Char;
var
  Data: Char;
begin
  case DataType of {Used this way, so only one public function exists, instead of three.}
    'W': Data := GetWrite(CurrentState, ReadData);
    'M': Data := GetMove(CurrentState, ReadData);
    'N': Data := GetNext(CurrentState, ReadData)
  end;
  GetData := Data
end; {TInstructionTable.GetData}

destructor TInstructionTable.Destroy();
begin
  ArrayResize(0);
  inherited
end;

begin
end. {TuringTable} 
```

### 图灵表.txt

```
/This is the table for the turing machine.
/Here you can define the instructions for the machine.
/Please use the given format.
/The start state is 'A'. 
/Use 'S' for staying, 'L' for moving the head leftwards and 'R' for moving the head rightwards.
/'H' is used to stop the machine.
/The head starts in the middle of the tape.
/If the array is expanded, it is filled with '0'.
/Lines are commented out when they begin with '/'.
/State Read Write Move Next

/Busy beavers taken from en.wikipedia.org

/2-state, 2-symbol busy beaver
/A01LB
/A11RB
/B01RA
/B11LH

/3-state, 2-symbol busy beaver
/A01LB
/A11RC
/B01RA
/B11LB
/C01RB
/C11SH

/4-state, 2-symbol busy beaver
A01LB
A11RB
B01RA
B10RC
C01LH
C11RD
D01LD
D10LA

/5-state, 2-symbol best contender busy beaver
/A01LB
/A11RC
/B01LC
/B11LB
/C01LD
/C10RE
/D01RA
/D11RD
/E01LH
/E10RA

/6-state, 2-symbol best contender busy beaver
/A01LB
/A11RE
/B01LC
/B11LF
/C01RD
/C10LB
/D01LE
/D10RC
/E01RA
/E10LD
/F01RH
/F11LC 
```

### 内存.txt

```
C:\Programming_Software\FreePascal\2.6.0\projects\Turing_Machine\memory\turing.exe 
Marked memory at $000A5200 invalid
Wrong signature $D4DF2FA1 instead of A76E4766
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Heap dump by heaptrc unit
714 memory blocks allocated : 14207/18256
706 memory blocks freed     : 14061/18080
8 unfreed memory blocks : 146
True heap size : 458752 (144 used in System startup)
True free heap : 457824
Should be : 457920
Call trace for block $000A53E0 size 22
  $004018CF  TMACHINE__TAPERESIZE,  line 104 of turing.pas
  $00401E81  TMACHINE__RUN,  line 181 of turing.pas
  $0040201D  main,  line 216 of turing.pas
  $0040C7B1
Marked memory at $000A5380 invalid
Wrong signature $B3102445 instead of 3D0C752B
  $004106C7
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Marked memory at $000A5320 invalid
Wrong signature $FECB68AA instead of D626F67E
  $004106C7
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Marked memory at $000A52C0 invalid
Wrong signature $E738AA53 instead of AFAF3597
  $004106C7
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Marked memory at $000A5260 invalid
Wrong signature $CD2CED58 instead of FC317DEE
  $004106C7
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Marked memory at $000A5200 invalid
Wrong signature $D4DF2FA1 instead of A76E4766
  $004106C7
  $0040F85B
  $0040F917
  $0041550D  TINSTRUCTIONTABLE__ARRAYRESIZE,  line 76 of turingtable.pas
  $004159FD  TINSTRUCTIONTABLE__DESTROY,  line 180 of turingtable.pas
  $00407162
  $00407162
  $0040C7B1
Call trace for block $000AC3C8 size 32
  $00401C59  TMACHINE__CREATE,  line 141 of turing.pas
  $00401FF4  main,  line 214 of turing.pas
  $0040C7B1
  $00610068
  $00650072
  $005C0064
  $00690057
  $0064006E
Call trace for block $000A51A0 size 24
  $00401FF4
  $0040C7B1
  $0040C7B1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:54:08.793

正如评论中所说，您的第一个问题是“无效内存”。只有当程序正常工作时，内存安全才会出现。查看各种检查（范围/溢出）。

我使用范围检查 (-Cr) 快速编译并得到以下输出：

```
An unhandled exception occurred at $00418609:
ERangeError: Range check error
   $00418609  TINSTRUCTIONTABLE__TABLEFILL,  line 95 of turingtable.pas
   $00418B56  TINSTRUCTIONTABLE__CREATE,  line 163 of turingtable.pas
   $00401CFA  TMACHINE__CREATE,  line 140 of turing.pas
   $004020AD  main,  line 211 of turing.pas 
```

我的猜测是，当 fileread 初始化数据字符串时，您不会初始化数据表，它还包含几个动态数组。

如果一切都失败了，您可以使用[Valgrind](http://en.wikipedia.org/wiki/Valgrind)，但对于这种规模和复杂性的程序，这可能是矫枉过正。

**从这个问题中吸取的教训：**如果发生错误/异常，正常的代码流将被中断，代码（包括释放内存）可能无法完成并出现在内存调试工具中。Pascal 的优点之一是（可选的）运行时检查。使用它们。

# php - PHP，切割字符串

> ID：12881833
> 
> 赞同：0
> 
> 时间：2012-10-14T11:35:56.827
> 
> 标签：php

我有这个字符串（245）“- 当前地图 = VILLA - 当前任务 = VEGAS JUNKYARD、VILLA、PRESIDIO、KILL HOUSE、街道、三个王国赌场； - 可用任务 = TRAINYARD、IMPORT/EXPORT、MURDERTOWN、CQB 培训、炼油厂, 会议中心, 剧院;"

当前地图始终是一个值，当前任务和可用任务具有可变数量的值。

* * *

我想解析字符串，以便我有一个如下所示的数组：

```
Array ([Current Map] => VILLA [Current Missions] => Array ([0] => VEGAS JUNKYARD [1] => VILLA [2] => PRESIDIO [3] => KILL HOUSE [4] => STREETS [5] => THREE KINGDOMS CASINO)  [Availible Missions] => Array ([0] => TRAINYARD [1] => IMPORT/EXPORT [2] => MURDERTOWN [3]  => CQB TRAINING [4] => OIL REFINERY [5] => CONVENTION CENTER [6] => THEATER)) 
```

* * *

工作原理：它将 3 个主要部分（当前地图、当前任务、可用任务）分开

什么不起作用：将“当前任务”和“可用任务”的多个值分隔到一个数组中。

错误（或者我只是愚蠢）：注意“可用任务”之前的分号

```
$search_strs_maps = array('Current Map = ', '- Current Missions = ', '; - Available  Missions = ', ';'); 
```

如果我把分号放在那里，即使我很确定分号在字符串中，它也找不到任何东西。

* * *

我提出这个的原因是，当我将分号放在“可用任务”之前时，我无法弄清楚为什么它没有找到任何东西，这让我发疯。此外，我还可以对代码进行第二次观察，并就如何使它变得更好提供一些建议。谢谢你的帮助！

这是我到目前为止所写的。

```
<?php
$str_map = '- Current Map = VILLA - Current Missions = VEGAS JUNKYARD, VILLA, PRESIDIO,  KILL HOUSE, STREETS, THREE KINGDOMS CASINO; - Available Missions = TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER;';
$search_strs_maps = array('Current Map = ', '- Current Missions = ', '- Available  Missions = ', ';');
for ($i=0; $i<3; $i++){

                $str_map = trim ($str_map);
                output($str_map, 'Complete String');
                //Cut of the beginning : "- Current Map = "
                $start_pos = str_pos_last ($str_map,  $search_strs_maps[$i]);
                output($start_pos, 'Starting position');
                $str_map = substr($str_map, $start_pos);
                output($str_map, 'String after first cut:');
                //Cut the remaining part to "Current Missions ="
                $end_pos = strpos ($str_map, $search_strs_maps[$i+1]);
                output($end_pos, 'End position');
                //Save the new string without for example "VILLA"
                $ergebnis = substr($str_map, 0, $end_pos);
                $ergebnis = trim ($ergebnis);
                output($ergebnis, 'Finished result');
                $str_map = substr($str_map, $end_pos);
                echo '<hr>';
                if ($i==0){
                    $arr_return_strs['current_map'] = $ergebnis;
                }else{  //arrays
                    //stupid semicolon that doesnt get cut of
                    $ergebnis = str_replace ($str_map, ';', '');
                    $arr_maps_temp = array();
                    //count the number of commas, if there is one comma that means there are 2 words, there is no comma at the end
                    $map_count = substr_count ($ergebnis, ',')+1;
                    for ($ii=0;$ii<$map_count;$ii++){
                        echo '<hr';
                        //cut at first comma
                        $result_pos = strpos($str_map, ',');
                        //save
                        $result_map = substr($str_map, 0, $result_pos);
                        //cut of the result+comma
                        $ergebnis = substr ($ergebnis, $result_pos);
                        output($result_map, 'Result is:');
                    }
                }

            }
    echo '<hr><hr><hr>';
    print_r ($arr_return_strs);

function str_pos_last ($input_str, $search_str, $offset=0){
    //this function returns the endposition of a string we search for, strpos returns the beginning...
    $str_begin = strpos ($input_str, $search_str);
    $str_end = $str_begin + strlen($search_str);
    return $str_end;
}

function output ($var, $desc){
echo $desc.'<br>';
var_dump ($var);
echo '<hr>';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:49:50.023

```
$initialString = "- Current Map = VILLA - Current Missions = VEGAS JUNKYARD, VILLA, PRESIDIO, KILL HOUSE, STREETS, THREE KINGDOMS CASINO; - Available Missions = TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER;";

$resultArray = array();
$blockArray = explode('-',$initialString);
foreach($blockArray as $setArray) {
    if (!empty($setArray)) {
        list($dataArrayKey, $dataArrayValues) = explode('=',$setArray);
        $dataArrayKey = trim($dataArrayKey);
        $dataArrayValues = trim($dataArrayValues,' ;');
        if ($dataArrayKey == 'Current Map') {
            $resultArray[$dataArrayKey] = trim($dataArrayValues);
        } else {
            $dataArrayValues = explode('=', $dataArrayValues);
            foreach($dataArrayValues as $dataArrayValue) {
                $dataArrayEntries = explode(',',$dataArrayValue);
                $resultArray[$dataArrayKey] = $dataArrayEntries;
            }
        }
    }
}

var_dump($resultArray); 
```

给

```
array
  'Current Map' => string 'VILLA' (length=5)
  'Current Missions' => 
    array
      0 => string 'VEGAS JUNKYARD' (length=14)
      1 => string ' VILLA' (length=6)
      2 => string ' PRESIDIO' (length=9)
      3 => string ' KILL HOUSE' (length=11)
      4 => string ' STREETS' (length=8)
      5 => string ' THREE KINGDOMS CASINO' (length=22)
  'Available Missions' => 
    array
      0 => string 'TRAINYARD' (length=9)
      1 => string ' IMPORT/EXPORT' (length=14)
      2 => string ' MURDERTOWN' (length=11)
      3 => string ' CQB TRAINING' (length=13)
      4 => string ' OIL REFINERY' (length=13)
      5 => string ' CONVENTION CENTER' (length=18)
      6 => string ' THEATER' (length=8) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:56:31.983

为什么不使用[http://php.net/preg_match](http://php.net/preg_match)

```
$str = "- Current Map = VILLA - Current Missions = VEGAS JUNKYARD, VILLA, PRESIDIO, KILL HOUSE, STREETS, THREE KINGDOMS CASINO; - Available Missions = TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER;"

preg_match('~Current Map = (.*?) - Current Missions = (.*?); - Available Missions = (.*?);~ism',$str,$matches);
echo '<pre>';
print_r($matches);

Array
(
 [0] => Current Map = VILLA - Current Missions = VEGAS JUNKYARD, VILLA, PRESIDIO, KILL HOUSE, STREETS, THREE KINGDOMS CASINO; - Available Missions = TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER;
 [1] => VILLA
 [2] => VEGAS JUNKYARD, VILLA, PRESIDIO, KILL HOUSE, STREETS, THREE KINGDOMS CASINO
 [3] => TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER
) 
```

然后你可以爆炸结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:01:00.743

与其他示例类似，但更简单（`$str`输入字符串在哪里）：

```
$types = array_map('trim', explode('-', substr($str, 1, strlen($str))));
$output = array();

foreach ($types as $value) {
  $type = array_map('trim', explode('=', str_replace(';', '', $value)));
  $opts = array_map('trim', explode(',', $type[1]));
  $output[$type[0]] = (count($opts) == 1) ? $opts[0] : $opts;      
}

var_dump($output); 
```

**输出**

```
array
  'Current Map' => string 'VILLA' (length=5)
  'Current Missions' => 
    array
      0 => string 'VEGAS JUNKYARD' (length=14)
      1 => string 'VILLA' (length=5)
      2 => string 'PRESIDIO' (length=8)
      3 => string 'KILL HOUSE' (length=10)
      4 => string 'STREETS' (length=7)
      5 => string 'THREE KINGDOMS CASINO' (length=21)
  'Available Missions' => 
    array
      0 => string 'TRAINYARD' (length=9)
      1 => string 'IMPORT/EXPORT' (length=13)
      2 => string 'MURDERTOWN' (length=10)
      3 => string 'CQB TRAINING' (length=12)
      4 => string 'OIL REFINERY' (length=12)
      5 => string 'CONVENTION CENTER' (length=17)
      6 => string 'THEATER' (length=7) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T11:49:19.273

这是你想要的：

```
<?php

$str = '- Current Map = VILLA - Current Missions = VEGAS JUNKYARD, VILLA, PRESIDIO, KILL HOUSE, STREETS, THREE KINGDOMS CASINO; - Available Missions = TRAINYARD, IMPORT/EXPORT, MURDERTOWN, CQB TRAINING, OIL REFINERY, CONVENTION CENTER, THEATER;';

$parts = str_replace(array('- ', ';'), '', explode(' - ', $str));

foreach($parts AS $key => $part){
    $parts[$key] = explode(' = ', $part);
    if($key != 0){
        $parts[$key][1] = explode(', ', $parts[$key][1]);
    }
}

$final_array = array();
foreach($parts AS $part){
    $final_array[$part[0]] = $part[1];
}

print_r($final_array);

?> 
```

输出：

```
Array
(
    [Current Map] => VILLA
    [Current Missions] => Array
        (
            [0] => VEGAS JUNKYARD
            [1] => VILLA
            [2] => PRESIDIO
            [3] => KILL HOUSE
            [4] => STREETS
            [5] => THREE KINGDOMS CASINO
        )

    [Available Missions] => Array
        (
            [0] => TRAINYARD
            [1] => IMPORT/EXPORT
            [2] => MURDERTOWN
            [3] => CQB TRAINING
            [4] => OIL REFINERY
            [5] => CONVENTION CENTER
            [6] => THEATER
        )

) 
```

# python - 在 Google App Engine 中的 Google Apps 脚本上访问 Google Groups Services？

> ID：12881834
> 
> 赞同：1
> 
> 时间：2012-10-14T11:35:59.223
> 
> 标签：python, google-app-engine, google-apps-script

我正在尝试确定是否可以在 Google App Engine 中使用 Google Apps 脚本？

如果那里有这样做的教程？

通过阅读 Google 的 App Script 站点，我感觉您只能在 Google Apps 中使用应用脚本，例如 Drive、Docs 等？

我想做的是能够使用 GAE 内部 GAS 中的组服务来创建、删除和仅显示一个人所在的组，所有这些都在我的 GAE 应用程序中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:51:24.967

不，你不能。AS 和 GAE 是完全不同的东西，不能一起工作。你真正能做的是（抽象）：

1.  写一个满足你需要的 AS
2.  从 GAE 重定向到 AS url 以确保用户登录/授予权限。
3.  执行您需要使用 AS 执行的操作
4.  如果需要，将用户发送回 GAE 并提供一堆参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:59:07.523

如果您需要在 Google Apps 脚本中使用 GAE，您可以在 GAE 中使用 Apps 脚本中的 UrlFetch 编写网络服务：[https ://developers.google.com/apps-script/service_urlfetch](https://developers.google.com/apps-script/service_urlfetch)

举个例子：我创建了一个 Apps 脚本来从 appengine 网络服务获取报告数据 (json)。该数据被添加到谷歌应用电子表格中。

# linux - linux访问命令怎么用和test命令有什么区别

> ID：12881845
> 
> 赞同：1
> 
> 时间：2012-10-14T11:37:08.497
> 
> 标签：linux, shell, unix, scripting

我浏览了 Linux 手册页以获取`access`命令，但不确定该命令的应用。

有人可以解释一下吗。

可以这样使用吗：

```
access -f filename; 
```

如果我想检查文件是否存在？但我收到一个错误：

```
The transaction failed: no-cache, 
```

同样的事情发生在：

```
 access -w filename; 
```

如果我想检查文件是否可由当前用户写入。

这也可以通过`test`命令轻松完成。那么这两个命令之间的确切区别是什么。请详细说明。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:49:14.670

这不是 Linux 命令。它`C`是可以通过`unistd.h`库加载的函数。

您可以在程序中使用它，`C`如下所示：

```
#include <unistd.h>
#include <stdio.h>

int main () {
   int writeable;
   writeable = access("/path/to/file", W_OK);
   if (writeable == -1)
       printf("Not writeable!");
   else
       printf("Writeable!";

   return 0;
} 
```

请注意，它会`0`在成功时返回。And`0`对于许多其他语言都是错误的`C`，但在这种情况下它意味着`true`.

您可以看到的事实`man access`并不意味着它是一个 Linux 命令，因为任何标准 Linux 发行版都有每个 C 库和函数的手册页。你也可以看到`man malloc`。您可以通过查看标题来确定它是 Linux 命令还是 C 库手册页。例如`man access`：

```
ACCESS(2)                  Linux Programmer's Manual                 ACCESS(2)

NAME
       access - check real user's permissions for a file

SYNOPSIS
       #include <unistd.h>

       int access(const char *pathname, int mode); 
```

如您所见，第一行声明`Linux Programmer's Manual`.

# javascript - 从 JavaScript 方法调用控制器

> ID：12881847
> 
> 赞同：0
> 
> 时间：2012-10-14T11:37:36.583
> 
> 标签：javascript, asp.net-mvc-3, razor

我正在使用 MVC 3 razor 开发一个网站，其中我有以下情况：

1.  控制器方法：

```
public ActionResult MyControllerMethod(int parameter){
    ''go to bd a do some staff
    IList<My_Custom> datafromDB = MyService.GetData(parameter);           

    'returns to my string tuped view
    return View(datafromDB );
} 
```

2.  我使用 JavaScript 的强类型视图：

```
 @model IList<My_Custom>

        <script type="text/javascript">

         function getData()
         { 
           var parameter = document.getElementById('myParamater').value;  

           $.get('/MyController/MyControllerMethod/' + parameter, function (data) {

              loadData();

           }
           );
       }

        function loadData() 
        { 
          clearData();

          datos = @Html.Raw(Json.Encode(Model));  

          //do some stuff with datos

        }

        </script> 
```

对控制器的 JavaScript 调用工作正常，但我的问题是字符串类型的视图似乎没有为 @model 获取新值，因此继续加载相同的信息。

虽然我已经调试过动作控制器并且每次都返回不同的数据。那么有什么办法可以刷新字符串类型视图的 Model 值呢？

我还尝试处理该行的数据值

```
$.get('/MyController/MyControllerMethod/' + parameter, function (data) { 
```

但我没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:02:58.207

您的操作返回视图，这就是为什么没有任何效果。您的代码如何工作：

*   加载数据，然后在页面上生成带有 json 的视图
*   向服务器发送请求并接收`html`（`json`所有这些数据都在内存中），然后您`json`从第一步开始访问

它必须如何工作：

*   创建视图
*   向服务器发送请求（另一种方法，即返回`Json`）
*   使用权`data`

```
    公共 ActionResult YourJsonAction(int 参数)
    {
        IList datafromDB = MyService.GetData(parameter);
        返回 Json(datafromDB, JsonRequestBehavior.AllowGet);
    }

    函数获取数据（）
    {  
       var 参数 = $('#myParamater').val();   
       $.get('/MyController/YourJsonAction/' + 参数，函数（数据）{
          //来自YourJsonAction的数据
       });
    }

```

# python - 使用 matplotlib 更有效地绘制多边形

> ID：12881848
> 
> 赞同：26
> 
> 时间：2012-10-14T11:37:37.980
> 
> 标签：python, numpy, matplotlib, scipy, matplotlib-basemap

我有一个大约 60000 个形状的日期集（每个角的纬度/经度坐标），我想使用 matplotlib 和底图在地图上绘制。

这是我目前的做法：

```
for ii in range(len(data)):
    lons = np.array([data['lon1'][ii],data['lon3'][ii],data['lon4'][ii],data['lon2'][ii]],'f2')
    lats = np.array([data['lat1'][ii],data['lat3'][ii],data['lat4'][ii],data['lat2'][ii]],'f2')
    x,y = m(lons,lats)
    poly = Polygon(zip(x,y),facecolor=colorval[ii],edgecolor='none')
    plt.gca().add_patch(poly) 
```

然而，这在我的机器上大约需要 1.5 分钟，我在想是否有可能加快速度。有没有更有效的方法来绘制多边形并将它们添加到地图中？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-14T15:32:29.253

您可以考虑创建多边形集合而不是单个多边形。

相关文档可以在这里找到：[http](http://matplotlib.org/api/collections_api.html) ://matplotlib.org/api/collections_api.html 这里有一个值得选择的例子：http: [//matplotlib.org/examples/api/collections_demo.html](http://matplotlib.org/examples/api/collections_demo.html)

举个例子：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib.collections import PolyCollection
import matplotlib as mpl

# Generate data. In this case, we'll make a bunch of center-points and generate
# verticies by subtracting random offsets from those center-points
numpoly, numverts = 100, 4
centers = 100 * (np.random.random((numpoly,2)) - 0.5)
offsets = 10 * (np.random.random((numverts,numpoly,2)) - 0.5)
verts = centers + offsets
verts = np.swapaxes(verts, 0, 1)

# In your case, "verts" might be something like:
# verts = zip(zip(lon1, lat1), zip(lon2, lat2), ...)
# If "data" in your case is a numpy array, there are cleaner ways to reorder
# things to suit.

# Color scalar...
# If you have rgb values in your "colorval" array, you could just pass them
# in as "facecolors=colorval" when you create the PolyCollection
z = np.random.random(numpoly) * 500

fig, ax = plt.subplots()

# Make the collection and add it to the plot.
coll = PolyCollection(verts, array=z, cmap=mpl.cm.jet, edgecolors='none')
ax.add_collection(coll)
ax.autoscale_view()

# Add a colorbar for the PolyCollection
fig.colorbar(coll, ax=ax)
plt.show() 
```

![在此处输入图像描述](../Images/e7e4a91ca2231dfa02331ddbc6949e62.png)

高温下，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T12:59:28.000

我调整了我的代码，现在它可以完美地工作了:)

这是工作示例：

```
lons = np.array([data['lon1'],data['lon3'],data['lon4'],data['lon2']])
lats = np.array([data['lat1'],data['lat3'],data['lat4'],data['lat2']])
x,y = m(lons,lats)
pols = zip(x,y)
pols = np.swapaxes(pols,0,2)
pols = np.swapaxes(pols,1,2)
coll = PolyCollection(pols,facecolor=colorval,cmap=jet,edgecolor='none',zorder=2)
plt.gca().add_collection(coll) 
```

# arrays - 编译时初始化数组错误

> ID：12881850
> 
> 赞同：0
> 
> 时间：2012-10-14T11:37:51.783
> 
> 标签：arrays, assembly, mips, pcspim

我正在尝试创建一个数组，我在 MIPS 的编译时向其提供了数据。但我收到错误，因此代码没有被编译。这是导致错误的代码块。

```
.data

array: .space 'A','B','C','D','E','F','G','H','I' 
```

错误的原因是什么？如果您知道任何解释`.space`,`.byte`和数组的教程`.word`，请在回答中提及它们。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:46:24.263

您不能`.space`对已初始化的数组使用指令。`.space`用于保留 N 个未初始化的字节。您可以使用`.byte`或`.word`用于此类目的，具体取决于您的数据大小。在您的示例中，您使用的是 ASCII 字符，所以`.byte`应该没问题。

```
.data

array: 
.byte 'A','B','C','D','E','F','G','H','I' 
```

任何 MIPS 程序集参考都应该没问题。这是[一个](http://gicl.cs.drexel.edu/people/sevy/architecture/MIPSRef%28SPIM%29.html)。

# ios - facebook的帖子总数？

> ID：12881852
> 
> 赞同：1
> 
> 时间：2012-10-14T11:37:53.947
> 
> 标签：ios, facebook

有什么方法可以获取在我的 facebook 墙上更新的帖子总数？我需要显示在我的 facebook 墙上更新的帖子总数。

# windows - 如何在 Windows 上使用 GNU Make？

> ID：12881854
> 
> 赞同：95
> 
> 时间：2012-10-14T11:38:18.533
> 
> 标签：windows, makefile, gnu-make, cmd

我安装了 MinGW 和 MSYS，添加`C:\MinGW\bin`到`PATH`但我仍然无法在 Windows 上运行 Makefile `cmd`。例如，我想运行 cmd.exe 并输入，`make all`但我的 cmd 说没有这样的命令。

我该怎么办？我不想使用 MSYS shell，这不是重点。任何想法如何在 Windows cmd 中使用 GNU Make，就像在 Ubuntu 中一样？我不感兴趣`Cygwin`。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-14T19:26:08.600

这是我如何让它工作的：

```
 copy c:\MinGW\bin\mingw32-make.exe c:\MinGW\bin\make.exe 
```

然后我可以打开命令提示符并输入 make：

```
 C:\Users\Dell>make
  make: *** No targets specified and no makefile found.  Stop. 
```

这意味着它现在正在工作！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-15T13:14:57.827

我正在使用 GnuWin32 项目中的 GNU Make，请参阅[http://gnuwin32.sourceforge.net/](http://gnuwin32.sourceforge.net/)但现在有一段时间没有任何更新，所以我不确定这个项目的状态。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-18T07:23:39.210

[尽管这个问题很老，但许多使用MSYS2](http://www.msys2.org/)的人仍然会问这个问题。

我今年开始用它来代替 CygWin，我很满意。

要安装`make`，请打开 MSYS2 shell 并键入以下命令：

```
# Update the package database and core system packages
pacman -Syu
# Close shell and open again if needed

# Update again
pacman -Su

# Install make
pacman -S make

# Test it (show version)
make -v 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-10T15:42:40.717

您可以使用以下命令从命令提示符将应用程序文件夹添加到您的路径：

setx PATH "%PATH%;c:\MinGW\bin"

请注意，您可能需要打开一个新的命令窗口才能使修改后的路径设置生效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-04-23T13:23:24.223

作为替代方案，如果您只想安装 make，您可以使用Chocolatey[包管理器](https://chocolatey.org/)来安装[gnu make](https://chocolatey.org/packages/make)

`choco install make -y`

这处理您可能遇到的任何路径问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-23T02:17:11.567

user1594322 给出了正确的答案，但是当我尝试它时，我遇到了管理员/权限问题。我能够复制“mingw32-make.exe”并将其粘贴，否决/绕过管理问题，然后将副本编辑为“make.exe”。在 Win7 来宾中的 VirtualBox 上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-21T16:03:27.537

虽然 make 本身可以作为独立的可执行文件（[`gnuwin32.sourceforge.net`package`make`](http://gnuwin32.sourceforge.net/packages/make.htm)）使用，但在适当的开发环境中使用它意味着使用**[msys2](https://github.com/msys2/msys2/wiki/MSYS2-introduction)**。

Git 2.24（2019 年第四季度）说明：

请参阅[提交4668931](https://github.com/git/git/commit/46689317ac009ef4ae91235354b6df7bf6d11d17)，[提交B35304B](https://github.com/git/git/commit/b35304bf958812a99dcbda366670ddc7bf9e086d)，[Commit Be5D88E](https://github.com/git/git/commit/ab7d854abaada90febf5b2e0839dd662cb0c8d10)，[Commit 5D65AD1](https://github.com/git/git/commit/be5d88e11280eeeeae5c35711f4a8053b9f862ba)，[Commit 030A628](https://github.com/git/git/commit/5d65ad17a979420fb02328540ec02a3b304aeeec)，[Commit](https://github.com/git/git/commit/030a628b815f87d29def74bdf9d3635f7e4c0dac) [61D1D92](https://github.com/git/git/commit/61d1d92aa4785090213e89566e01e342f60d9b92)，[提交E434C9](https://github.com/git/git/commit/e4347c943416da5aef56ee70c4488bc0725dfd2a)，[提交ED712EF](https://github.com/git/git/commit/ed712ef8d5f7c11c0b23d06f37d9c3275dff8387)，[提交5B8F9E2](https://github.com/git/git/commit/5b8f9e2417d23a688004eaa402351a8c270845d0)，[提交41616EF](https://github.com/git/git/commit/41616ef6182271178c63e1caf0d21f12bea2d41e)，[提交C097B95](https://github.com/git/git/commit/c097b95a260b5a870c26a61d032169b70769e31a) （2019年10月44日），并[提交DBCD970](https://github.com/git/git/commit/dbcd970c27ba42ab09073211f858b1a89c7f8300)（2019年9月30日）[约翰内斯辛德林`dscho`](https://github.com/dscho)( [)](https://github.com/dscho) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 6d5291b](https://github.com/git/git/commit/6d5291be450594d453759650f466174f39953c4f)中，2019 年 10 月 15 日）)

> ## [`test-tool run-command`](https://github.com/git/git/commit/be5d88e11280eeeeae5c35711f4a8053b9f862ba)：学习运行（部分）测试套件
> 
> ^(签字人：约翰内斯·辛德林)
> 
> 用于 Windows 的 Git 跳过了障碍，提供了一个允许构建 Git 并运行其测试套件的开发环境。
> 
> **为此，包括 GNU make 和 GCC 在内的整个 MSYS2 系统作为“Windows SDK 的 Git”提供。**
> 它确实是有代价的：该 SDK 的初始下载量为数百兆字节，解压后的 SDK 占用约 2GB 的磁盘空间。
> 
> Windows 上一个更加原生的开发环境是 Visual Studio。为了帮助贡献者使用该环境，我们已经有一个 Makefile 目标`vcxproj`，它使用项目文件（和其他生成的文件）生成提交，并且`vs/master`使用该目标不断重新生成 Git for Windows 的分支。
> 
> 这个想法是允许在 Visual Studio 中构建 Git，并使用便携式 Git 运行单独的测试。

# java - Hibernate 通过 id 更改属性实例

> ID：12881855
> 
> 赞同：2
> 
> 时间：2012-10-14T11:38:29.560
> 
> 标签：java, hibernate

假设我们有一个定义了 UserType 属性的 User 类：

```
private UserType userType; 
```

是否可以仅使用所需 UserType 的 ID 设置此属性？就像是

```
public void setUserTypeById(Long id){
   this.userType.setId(id); 
} 
```

但是这个只会更改`id`分配的 UserType 实例的属性，而我需要将其更改为另一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:46:15.303

从理论上讲，如果您可以访问课程中的[会话](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)或[DAO](http://en.wikipedia.org/wiki/Data_access_object) ，这是可能的`User`。然后你可以检索然后`UserType`对应于给定的 ID 并设置它。

但我不推荐这个。我认为最好将域类（`User`, `UserType`）与持久性类（DAO 或会话）明确分开。更好地创建一个服务类（`UserService`例如），它有一个处理`setUserType(User user, int typeId)`这个问题的方法。

# django - django 不显示表单

> ID：12881856
> 
> 赞同：1
> 
> 时间：2012-10-14T11:38:32.373
> 
> 标签：django, django-forms

我想用一些选择制作一个表格并显示它。但是在输出 html 中我没有看到表单本身。这是我的文件：

视图.py：

```
from django.http import HttpResponse, Http404
from django.shortcuts import render_to_response
from tasks.todoes.models import Note, Resource,/
     File, Worker, Client, Task, ProblemByWorker, ProblemByUser, Categories
from tasks.forms import NewTicketForm

def new_ticket2(request):
    method = request.method
    if request.method == 'POST':
        form = NewTicketForm(request.POST)
        if form.is_valid():
            pass
    else:
        form = NewTicketForm()
    return render_to_response('new_ticket2.html', {'form':form, 'method':method}) 
```

表格.py

```
from django import forms
from tasks.todoes.models import Note, Resource, File, Worker, Client, Task,/
   ProblemByWorker, ProblemByUser, Categories

class NewTicketForm(forms.Form):
    name = forms.CharField(max_length=140)
    pbus = forms.ChoiceField(choices = ProblemByUser.objects.all())
    description = forms.CharField(widget=forms.Textarea)
    clients = forms.ChoiceField(choices = Client.objects.all())
    priority = forms.ChoiceField(choices = ('1','2','3','4','5'))
    category = forms.ChoiceField(choices = Categories.objects.all())
    start_date = forms.DateTimeField()
    due_date = forms.DateTimeField()
    workers = forms.ChoiceField(choices = Worker.objects.all())
    percentage = forms.DecimalField(min_value=0, max_value=100) 
```

new_ticket2.html

```
<html>
<head>
    <title>New Ticket</title>
</head>
<body>
    {% if form.errors %}
        {{form.errors}}
    {% endif %}
    <p>{{ method }}</p>
    <form action="" method="post">
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit">
    </form>
</body> 
```

在我的输出中，我只看到“GET”和提交按钮：

```
<html><head>
    <title>New Ticket</title>
...</head>
<body>

    <p>GET</p>
    <form action="" method="post">
        <table>

        </table>
        <input type="submit">
    </form>
...</body></html> 
```

为什么这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:55:44.147

您错误地指定了选项。阅读有关[ChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#choicefield)`choices`属性和[ModelChoiceField](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelchoicefield)的文档。

```
class NewTicketForm(forms.Form):
    PRIORITY_CHOICES = (
        ('1','1'),
        ('2','2')
    )

    name = forms.CharField(max_length=140)
    pbus = forms.ModelChoiceField(queryset = ProblemByUser.objects.all())
    description = forms.CharField(widget=forms.Textarea)
    clients = forms.ModelChoiceField(queryset = Client.objects.all())
    priority = forms.ChoiceField(choices = PRIORITY_CHOICES)
    category = forms.ModelChoiceField(queryset = Categories.objects.all())
    start_date = forms.DateTimeField()
    due_date = forms.DateTimeField()
    workers = forms.ModelChoiceField(queryset = Worker.objects.all())
    percentage = forms.DecimalField(min_value=0, max_value=100) 
```

似乎配置不正确`ChoiceFields`会默默地失败。希望stackoverflow上的人会向我们解释原因。

# javascript - 为什么我不能通过 str.indexOf 映射到 javascript

> ID：12881859
> 
> 赞同：0
> 
> 时间：2012-10-14T11:38:57.770
> 
> 标签：javascript

为什么我不能执行以下操作？

```
var str = "A string with * and ^ and even $";
var indeces = ["*", "^", "$"].map(str.indexOf); // doesnt work 
```

我宁愿不传递另一个函数来做与方法本身完全相同的事情......

```
[...].map(function(token) { return str.indexOf(token); }); // works 
```

有没有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:40:50.790

和...之间的不同

```
function(token) { return str.indexOf(token); } 
```

和

```
str.indexOf 
```

是在第一种情况下你不会有上下文问题。

在第二种情况下，这不会是`str`but `window`。是字符串`str.indexOf`命名的属性的值。`indexOf`这是一个函数，但无法从值中知道您从哪个对象中获取它。所以如果你通过`str.indexOf`了，你只是在传递函数，而不是在传递`str`。

```
["*", "^", "$"].map(str.indexOf); 
```

相当于

```
["*", "^", "$"].map(function(token) { return window.indexOf(token); }); 
```

如果窗口上有 indexOf 函数。

只是为了更清楚，但不要使用它：一个函数*可以*绑定到一个对象。如果你这样做

```
var f = str.indexOf.bind(str); // makes a copy of indexOf, bound to str
["*", "^", "$"].map(f); 
```

然后`this`是`str`被`f`调用的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:53:07.967

由于[@dystroy](https://stackoverflow.com/users/263525/dystroy)已经解释的原因，您不能这样做。但是，您可以使用`map`上下文，这将给出所需的结果：

```
var str = "A string with * and ^ and even $"
var indeces = ["*", "^", "$"].map( str.indexOf, str);
//                                              ^str is context
//=> indeces = [14, 20, 31] 
```

# ssh - Team City 或 Octopus 在防火墙后构建代理

> ID：12881861
> 
> 赞同：0
> 
> 时间：2012-10-14T11:39:22.287
> 
> 标签：ssh, teamcity, octopus-deploy

TeamCity 和 Octopus 的新手，但它们看起来像是可以帮助我们进行持续交付工作的两种产品。我们正在从我们的云服务器部署到隐藏在公司防火墙后面的客户端服务器。没有机会与他们建立 http 连接，但他们可以看到我们的服务器。我看过的构建代理似乎都需要双向连接。是否有代理或其他解决方案只需要一种方式连接到我们的服务器？

提前致谢。

蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T13:06:47.790

Octopus Deploy 仅使用单向连接：

```
 Deployment server (Octopus) ----> Deployment agent (Tentacle) 
```

Tentacle 代理侦听 Octopus 服务器连接的 TCP 端口。通信是使用具有双向信任关系的 wsHttpBindings 完成的，但实际通信是正常的单向客户端-服务器模型。[此页面](http://octopusdeploy.com/documentation/security/octopus-tentacle)提供了更多详细信息。

如果我正确阅读了您的问题，听起来您需要以相反的方向进行通信 - 您的部署代理应该连接到您的部署服务器，以绕过防火墙规则。

不使用这个模型实际上是 Octopus 背后的一个明确选择，我已经[在一篇博文中写过这个决定](http://octopusdeploy.com/blog/why-octopus-doesnt-use-the-servicebus)。我希望这会有所帮助。

# .net - 一个不可能的 WPF 数据绑定方案？

> ID：12881863
> 
> 赞同：0
> 
> 时间：2012-10-14T11:39:42.220
> 
> 标签：.net, wpf, data-binding, user-interface, listbox

我首先使用 WPF 的主要原因是对数据绑定的所有令人敬畏的可能性的承诺。经过几天的头痛之后，我开始认为最常见的情况之一是不可能的，我很想被证明是错误的！:)

*   我有一个 ListBox，它将我的自定义类的实例作为它的 ListItems。
*   我的课程通过实现一些 DependencyProperties 准备好 DataBinding。
*   我的 ListBox 有一个自定义的 DataTemplate 来以漂亮的布局显示这些属性。
*   ListBox 将 ItemsSource 设置为`ObservableCollection<MyClass>`
*   列表框可能需要显示数百甚至数千个项目，因此为了保持响应式 UI，**它们需要在后台实例化**。

事实证明，只要它们是 DependencyObjects，就不可能在后台线程中创建我的类的实例并将它们添加到 UI 线程中的 ObservableCollection（或直接添加到列表框，当我们省略 ItemsSource 时）。它抛出一个异常说

> 必须在与 DependencyObject 相同的线程上创建 DependencySource

我应该如何在 WPF 中处理这样的场景？根本不使用 DP 并使用 INotifyPropertyChanged？人们实际上在做什么，什么时候需要这样做？我认为这是一个相当常见的场景，我很不高兴大多数与 DataBinding 相关的文章都在谈论如果您输入“洋红色”则可能更改 TextBox 背景颜色... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:08:37.463

我只会在实现或扩展控件时实现依赖属性。我将简单地使用 INotifyPropertychanged 绑定的所有数据。看看[Josh Smith 的 MVVM 模式文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，这为我澄清了很多。

此外，在朝着更加异步的模式发展的过程中，这些天我使用[ReactiveUI](http://www.reactiveui.net/)，因为它也包含了许多模式中的异步命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:44:20.743

您可以`INotifyPropertyChanged`改用（正如我[推荐](http://kentb.blogspot.co.uk/2009/03/view-models-pocos-versus.html)的那样），或者您可以制作对象`Freezable`并在创建后冻结它们，或者您可以将对象的创建分解为不同的步骤或组，并在单独的调度程序消息中执行每个步骤。例如，以 10 个为一组创建您的对象，并在其自己的较低优先级调度程序消息中执行每个对象。

# c# - 使用 linq 和反射设置不为空的属性

> ID：12881866
> 
> 赞同：0
> 
> 时间：2012-10-14T11:39:59.587
> 
> 标签：c#, linq, entity-framework, c#-4.0, reflection

我有这样的`Update`方法：

```
public void Update(MyClass item, System.Linq.Expressions.Expression<Func<MyClass, bool>> exp) 
```

我像这样更新状态字段：

```
MyClass  u = ent.MyClass.Where(exp).FirstOrDefault();
if (u == null)
{
    throw new Exception("No Record Found");
}
else
{
    u.Status=item.Status;              <-------
    ent.SaveChanges();
} 
```

好的，问题是我想将此更新方法用于各种更新，例如用户可能想要更新`status,Name`或`Tel,fax,Address,name`...

我想检查我的属性是否为空，它分配给选定对象的类似属性（在用箭头显示的行中）。我怎么能自动做到这一点？我不想要这样的：

```
if(item.Status != null)
{
     u.Status = item.Status;
}
if(item.Name != null)
{
     u.Name = item.Name;
}
,.... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:53:02.457

```
MyClass item = new MyClass() { Name = "aaa" };
MyClass u = new MyClass() { Name = "uuu", Status = "ssss" };

MyCopy(item, u); 
```

* * *

```
void MyCopy<T>(T src, T dest)
{
    var notNullProps = typeof(T).GetProperties()
                                .Where(x=>x.GetValue(src,null)!=null);

    foreach (var p in notNullProps)
    {
        p.SetValue(dest, p.GetValue(src, null));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:54:40.757

您可以`use reflection`检查是否为空。唯一的开销是将`propertyName`显式传递给您的方法 -

```
public void Update(MyClass item, Expression<Func<MyClass, bool>> exp,
                                            string propertyName)
{
   object propertyValue = item.GetType().GetProperty(propertyName)
                               .GetValue(item, null);
   if(propertyValue != null)
   {
      // do your stuff here
   }
} 
```

# c# - Windows 7 上的 SSL 客户端 SSPI 错误

> ID：12881868
> 
> 赞同：0
> 
> 时间：2012-10-14T11:40:08.103
> 
> 标签：c#, .net, ssl, sspi

我用 C#.NET Win-Forms 编写了一个 SSL 客户端。我将我的证书（公钥）添加到系统根存储（通过 .NET 代码或通过 Internet Explorer 手动，两者都有效）并且它在 Windows XP 上运行良好，但在 Windows 7 上尝试*AuthenticateAsClient()时出现以下**AuthenticationException*： “**客户端和服务器无法通信，因为它们没有共同的算法**”

 ***Microsoft 支持列出一些注册表项的文档，并说明在 Windows 7 中默认启用（新的强项）或禁用（旧的过时的）的协议/密码/算法，因此我们可以通过编辑注册表来启用/禁用它们。这是这些链接：

[如何限制在 Schannel.dll 中使用某些加密算法和协议](http://support.microsoft.com/kb/245030) [TLS/SSL 加密增强](http://technet.microsoft.com/en-us/library/cc766285%28WS.10%29.aspx)

就我不擅长密码学而言，我无法理解哪个注册表项与我的案例匹配。这是我用作客户端的 X509Certificate 对象的属性：

SignatureAlgorithm.FriendlyName：“ **sha1RSA** ”
版本：**3**

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T16:06:48.110

服务器可能尝试使用 AES 密码协商 SSLv3.0 连接。这种组合在技术上是非法的。请参阅[http://blogs.msdn.com/b/ieinternals/archive/2009/12/08/aes-is-not-a-valid-cipher-for-sslv3.aspx?Redirected=true](http://blogs.msdn.com/b/ieinternals/archive/2009/12/08/aes-is-not-a-valid-cipher-for-sslv3.aspx?Redirected=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T06:03:53.140

在与 Windows 注册表项和值（有效，但不合逻辑，例如禁用其他一些项目！）苦苦挣扎之后，我通过启用和编辑**Windows Cipher Suite Order**解决了这个问题，而不更改注册表中的任何内容。

指示：

1 -在**开始 > 运行...中输入****gpedit.msc**。**本地组策略编辑器**打开。2 - 转到**计算机配置 > 管理模板 > 网络 > SSL 配置设置**。 3 - 双击右侧的**SSL Cipher Suite Order项目。** 4 -在打开的窗口中选择**启用单选按钮。**在左中部有一个文本框，其中包含一些逗号分隔的文本。在空白的记事本窗口中复制/粘贴文本。 5 - 首先移动您想要的项目（在我的情况下：**TLS_RSA_WITH_RC4_128_SHA**和**SSL_CK_RC4_128_WITH_MD5**） 6 - 用新文本替换旧文本。 **************7 - 与注册表不同，您必须立即重新启动计算机才能使更改生效。**************

 ******希望能帮助到你。*********

# java - Java动态返回类型？

> ID：12881869
> 
> 赞同：7
> 
> 时间：2012-10-14T11:40:36.533
> 
> 标签：java, generics, types

我有一个包含 T 类型的一些元素的容器（列表）并且想要过滤它。所以它只包含特定子类型 U 的元素。是否可以设置“动态”返回类型？

例子：

```
class SomeContainer<T> extends ArrayList<T>{

    public SomeContainer<T> subset(Class c){
        SomeContainer<...here the type of c > output = new SomeContainer<.. also ..>();

        //filter own elements and only add c-objects in the new list

        return output;
    }
} 
```

目前它返回一个泛型类型 T 而不是 c-Class 类型（T 的子类型）的列表。因此我有时会收到以下编译器通知：

```
Note: SomeContainer.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

因为我想在子类型的对象之后过滤列表并触发特定于子类型的方法，所以我需要一个特定的子类型列表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T11:44:18.790

[`java.lang.Class`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)是一个自身参数化的泛型类型，因此您可以使用它的类型参数，如下所示：

```
public <U extends T> SomeContainer<U> subset(Class<U> c){
    SomeContainer<U> output = new SomeContainer<U>();
    for (T val : this) {
        if (c.isInstance(val)) {
            output.add(c.cast(val));
        }
    }
    return output;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:46:59.967

泛型只是编译时的产物，因此您的方案无法工作。编译器无法预测在每次执行调用此函数的代码行时您需要什么类。**除非**您有一个非常受限制且非常无用的情况，即您只使用类文字来调用您的函数，否则您无法使此解决方案类型安全。但是，正如您所说，这几乎肯定会破坏其成为动态的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T05:32:30.130

第一点：您可以通过将`Class c`参数替换为`Class<T> c`. 这可能就是你所需要的......在这种情况下...... =:-)

第二点：通常调用 SomeContainer.subset() 的代码会在编译类型时知道类型 U （来自逻辑上下文）。这一定是你的情况，否则你将无法传递`Class c`参数。

尝试：

```
class SomeContainer<T> extends ArrayList<T>{

    public <U extends T> SomeContainer subset(Class<U> c){
        SomeContainer<U> output = new SomeContainer<U>();  
        // put filtered elements into output

        return output;    
    }
} 
```

看看我在那里做了什么？
在方法调用中引入了第二种类型的参数：`U extends T`. 在与 的论点中也使用了这个`Class<U> c`。
调用者会像这样调用（其中 X 被选择为 T 的子类）：

```
SomeContainer<X> mySubset = mySomeContainer.subset(X.class);     // type inference
SomeContainer<X> mySubset = mySomeContainer.<X>subset(X.class);  // type arg specified 
```

* * *

* * *

如果您需要比这更动态的东西，通配符可以提供帮助 - 允许传入和传出参数化类型的“家族”：

```
public SomeContainer<? extends X> subset(Class<? extends X> c){ 
```

这是一个“塑料”函数接口：您可以返回`SomeContainer<T>`或`SomeContainer<X>`为任何作为 T 子类的 X。以下也适用：

```
public SomeContainer<? super Z> subset(Class<? extends X> c){ 
```

然而，正如另一位发帖人所说，泛型是一种编译时构造，它们在编译期间被生成的非泛型代码替换。这意味着您不能用一行代码动态决定用于实例化泛型类型的类型。但是你可以作弊：如果 T 的子类数量有限，比如 X、Y 和 Z，其中 Z 扩展 Y，Y 扩展 Z，那么你可以使用一个古老的 hacky “if 语句”。尝试：

类 SomeContainer 扩展 ArrayList{

```
public SomeContainer<? extends X> subset(Class<? extends X> c){
    SomeContainer<? extends X> output = null;

    // would like to use:  "if (c instance of Class<Z>)"
    // but instanceof does not allow generic type arguments
    if (c.getName().equals(Z.class.getName())) {
        SomeContainer<Z> outputZ = new SomeContainer<Z>();
        // put filtered elements into outputZ
        output = outputZ;
    } else if (c.getName().equals(Y.class.getName())) {
        SomeContainer<Y> outputY = new SomeContainer<Y>();
        // put filtered elements into outputZ
        output = outputY;
    } else if (c.getName().equals(X.class.getName())) {
        SomeContainer<X> outputX = new SomeContainer<X>();
        // put filtered elements into outputZ
        output = outputX;
    }
    return output;    
} 
```

}

简单的！（或不）=:-)

# javascript - 经典 ASP javascript 检查父级

> ID：12881875
> 
> 赞同：2
> 
> 时间：2012-10-14T11:42:13.830
> 
> 标签：javascript, asp-classic, frame, jscript

我正在使用经典 ASP 文件（语言 = JavaScript）来显示一些 HTML 信息。我想要做的是检查页面是否在框架中，如果没有，则重定向到另一个页面。有没有一种方法可以检查页面是否在 Classic ASP 中具有父级？我试过使用`window`，但它不被识别。代码应该是这样的：

```
<%@ language = "JavaScript"%>
<!DOCTYPE html>

<html>

    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <title>Secure Area</title>

        <link href="css/basic.css" rel="stylesheet" type="text/css" media="all" />

        <%
            if (!window.parent)
                window.location.replace("index.html");
        %>

        <link href="Images/FavIcon.ico" rel="shortcut icon" type="image/x-icon" />
    </head>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:43:48.217

并不真地。

浏览器在请求资源时不会向服务器发送有关帧结构的信息。

您可以检查 HTTP Referer 标头（它是可选的，因此可能未定义），向该 URI 发出 HTTP 请求（使用您的服务器端代码），然后解析它以查看它是否包含任何帧，以及是否有任何帧它们默认为`src="your uri"`或者如果任何以框架为目标的链接具有`href="your uri"`……但这将非常低效且不可靠。

这种事情最好用客户端 JS 处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T11:44:43.693

您无法检查窗口是否在服务器端的框架中 - 请求中没有任何内容可以为您提供此信息。

您需要在客户端执行此操作 - 您可以让*客户端*脚本将值传递给服务器（URL 上的参数、隐藏字段、cookie 等等……）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:30:17.750

在 javascript 中，您可以检查页面是否在 iframe 中：

```
if (window.top === window.self) {
    // not in a frame
} else {
    // in a frame
} 
```

在 ASP 中没有办法做到这一点。没有服务器端语言会知道它是否在框架中呈现 - 这不是它的业务知道。

# php - 否定特殊字符

> ID：12881876
> 
> 赞同：0
> 
> 时间：2012-10-14T11:42:55.937
> 
> 标签：php, preg-match

我曾经`preg_match()`将一些特殊字符列入黑名单，我的要求是每当字符串包含这些特殊字符时，我都会返回一个无效的。

```
$str = "adasdasasd*";
if(preg_match('/^[^~`!@#$%\^&\*\(\)]+$/',$str)) {
  echo "valid";
}
else {
  echo "invalid";
} 
```

这将返回**invalid**，这是正确的。但是，到目前为止，我对这个否定感到很困惑`preg_match`。有人可以至少简要解释一下 negate on`preg_match()`吗？而且，我提供的正则表达式`preg_match()`有什么缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:45:21.300

好的，所以你的正则表达式包含一个范围说明符，在这种情况下，`[^~!@#$%\^&\*\(\)]+`. 这有点复杂，所以现在让我们简化为`[abc]`.

`[abc]`将匹配您可能知道的 a、b 或 c 的任何字母。添加`^`第一个否定这个集合，因此`[^abc]`匹配任何*不是*a、b 或 c 的字母，因此将匹配 d、e、f、g、H、4、£ 等等。

在您的情况下，您正在匹配不在特殊字符列表中的任何内容。你说的是“匹配字符串的开头，然后匹配一个或多个'非特殊'字符，然后匹配字符串的结尾”。如果您有任何特殊字符，则它们不能被“非特殊”字符匹配或其他任何字符匹配，因此正则表达式失败。

# asp.net - 成员资格 CreateUser 错误

> ID：12881877
> 
> 赞同：1
> 
> 时间：2012-10-14T11:43:11.913
> 
> 标签：asp.net, web-config, roles, membership

我正在以编程方式创建一个新用户（稍后将添加自定义配置文件）并且正在使用 Win2K8 VM：

```
MembershipUser newUser = 
    Membership.CreateUser(userNameTxt.Text, passwordTxt.Text, emailTxt.Text);
Roles.AddUserToRole(userNameTxt.Text.Trim(), "Member"); 
```

**更新：**

连接字符串：

```
<remove name="LocalSqlServer" />
<add name="LocalSqlServer" 
    connectionString="Initial Catalog=MYS;Data Source=WIN2K8;uid=MYS;password=xxxxxx;"   
    providerName="System.Data.SqlClient" /> 
```

收到以下错误：

System.Data.SqlClient.SqlException：用户 'IIS APPPOOL\MYAPP' 登录失败。

```
<membership>
      <providers>
        <remove name="DefaultMembershipProvider"/>
        <add 
            name="DefaultMembershipProvider" 
            type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
            connectionStringName="LocalSqlServer" 
            enablePasswordRetrieval="false" 
            enablePasswordReset="false" 
            requiresQuestionAndAnswer="false" 
            requiresUniqueEmail="false" 
            minRequiredPasswordLength="6" 
            minRequiredNonalphanumericCharacters="1" 
            passwordAttemptWindow="10" 
            applicationName="/" />
            </providers>
    </membership>
    <roleManager enabled="true"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:56:54.280

> System.Data.SqlClient.SqlException：用户 'IIS APPPOOL\MYAPP' 登录失败。

这表明您的应用程序池标识是虚拟帐户“IIS APPPOOL\MYAPP”。

您需要为此身份创建一个 SQL Server 登录名，并将其作为具有适当权限的用户添加到 Membership 数据库。

> 不确定为“此身份”创建 SQL Server 登录名是什么意思...

一种方法是使用 SQL Server Management Studio。将“对象资源管理器”连接到您的 SQL Server 实例，右键单击“安全/登录”，选择“新登录”并添加登录名 IIS APPPOOL\MYAPP with Windows Authentication。

然后将此登录名映射到 Membership 数据库中的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:35:33.390

您当前的连接字符串是这样的：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="LocalSqlServer" 
    connectionString="Initial Catalog=MYS;Data Source=WIN2K8;Integrated Security=SSPI;"
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

这里的错误是你说：*连接到我的 sql server 数据库并使用 App Pool 身份作为“帐户”来验证我的 sql server db。*

IIS 上的所有网站都在“帐户”下运行。在这种情况下，看起来这个帐户被调用`MyApp`。

所以修复你需要有一个连接字符串，上面写着：不要使用在这台 IIS 机器上设置的任何“身份”，等等。但是！请改用此硬编码的用户名/密码。

看看这个，现在：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="LocalSqlServer" 
    connectionString="Initial Catalog=MYS;Data Source=WIN2K8;uid=username;password=pass;"
    providerName="System.Data.SqlClient" />
</connectionStrings> 
```

记笔记：

1.  我已经删除了这个论点：`Integrated Security=SSPI;`
2.  我添加了论点：`uid=username;`
3.  我添加了论点：`password=pass;`

只需将值替换为您用于登录 sql server 数据库的用户名/密码即可`username`。`pass`

需要帮助了解您可以在单个连接字符串中定义哪些选项/关键字？[检查此 ConnectionStrings 站点作为参考](http://www.connectionstrings.com/)。

专业提示：而不是`<remove name="whatever/>`.. 尝试使用`<clear/>`

例如。

```
<connectionStrings>
    <clear/>
    <add name="LocalSqlServer" connectionString="Initial Catalog=MYS;Data Source=WIN2K8;uid=username;password=pass;" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

GL！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:25:25.850

检查您的连接字符串，它应该如下所示：

```
Server=.\SQLEXPRESS;Database=MyDatabase;Integrated Security=SSPI; 
```

关于您修改的错误：

将**enableEventValidation**设置为 false 并将**viewStateEncryptionMode**设置为 Never，如下所示：

```
<pages enableeventvalidation="false" viewstateencryptionmode="Never"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T22:01:18.710

根据此链接，我能够通过填充 aspnet_SchemaVersions 表来解决连接问题：

[ASP.NET 成员资格错误](https://stackoverflow.com/questions/916787/asp-net-membership-error)

然后我能够在本地连接：

```
<remove name="LocalSqlServer" />
    <add name="LocalSqlServer" 
    connectionString="Initial Catalog=MYS;Data Source=WIN2K8;Integrated Security=SSPI;"
    providerName="System.Data.SqlClient" /> 
```

# drupal - 如何更改 drupal6 评论表单的重定向路径

> ID：12881880
> 
> 赞同：0
> 
> 时间：2012-10-14T11:43:23.737
> 
> 标签：drupal

我尝试使用以下代码更改评论表单重定向路径。

```
function Mymodule_form_alter(&$form, &$form_state, $form_id){
 if($form_id=='comment_form' && arg(0)=='writing'){
   $form['#redirect'] = 'writing/'.arg(1); 
 }
} 
```

但它不起作用。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:12:23.777

请检查 arg(0) 是否正在“写入”...？确保`if condition`是真的。我试过下面的代码并且工作正常。

```
function mymod_form_alter(&$form, &$form_state, $form_id){
  if($form_id=='comment_form' ){
    $form['#redirect'] = 'node'; 
  }
} 
```

# java - 生成对 java bean 的 javascript 访问器

> ID：12881883
> 
> 赞同：0
> 
> 时间：2012-10-14T11:44:10.163
> 
> 标签：java, javascript, code-generation

我正在寻找可以生成 javascript 代码来访问后端 bean 的 java 框架。例如，我有弹簧服务`TestService`：

```
public interface TestService {
    public static class UserDTO {
        public String username;
        public Date birthday;                
    }

    public List<UserDTO> findAllUsersByUsername(String username);
} 
```

我想从 javascript 中调用它，例如：`console.print(testService.('test')[0].username);`无需编写任何控制器或 ajax/xhr 的东西。只需运行 ant/maven/etc 任务并将 js 文件包含到 html 页面中。

该框架是否已经存在？

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:35:54.257

我正在寻找 Dwr (http://directwebremoting.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:57:12.093

您应该添加一个 jar 名称是 Rhino，您应该在服务器端注册 js，ScriptEngineManager 会帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:57:19.383

据我从您的问题中了解到的，您希望使用您的服务自动生成控制器。你可以利用[`Spring ROO`](http://static.springsource.org/spring-roo/reference/html/base-web.html)这个。

[在此处](http://static.springsource.org/spring-roo/reference/html-single/index.html)查看 Spring ROO 的参考文档

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T11:47:33.033

我正在这样做，但只使用[flexjson](http://flexjson.sourceforge.net/) lib将响应转换为 json

# macos - OSX/Mac：使用辅助功能 api 修改系统弹出菜单

> ID：12881888
> 
> 赞同：1
> 
> 时间：2012-10-14T11:44:30.460
> 
> 标签：macos, accessibility

我正在编写一个应用程序，它使用一些可访问性 api 来使某些人更容易使用 Mac。

我知道如何将项目添加到系统级应用程序弹出菜单。我想弄清楚是否有办法修改该菜单中的其他项目。例如，当有人在他们的桌面上单击命令（右键单击）然后突出显示粘贴菜单项时，我想自动显示其他 ui，以显示粘贴板上任何内容的预览。

我知道这种类型的功能并不适合所有人，但它对我的用户非常有帮助。

谢谢， LT

# exe - hta 从文本运行 exe

> ID：12881891
> 
> 赞同：0
> 
> 时间：2012-10-14T11:44:47.027
> 
> 标签：exe, hta

我正在寻找一个代码来启动存储在 hta 的子文件夹中的 exe。它必须适用于 97 exe。我已经尝试了多个代码但没有运气。我希望链接是文本，但我可以使用按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:00:15.163

使用“Wscript.shell”

我用javascript写我的hta；代码如下：

```
var shell = new ActiveXObject("Wscript.shell");  
shell.Run(strCommand, [intWindowStyle], [bWaitOnReturn]); 
```

如记录在： [http ://ss64.com/vb/run.html](http://ss64.com/vb/run.html)

# android - 应用程序最小化后如何恢复位图？

> ID：12881895
> 
> 赞同：0
> 
> 时间：2012-10-14T11:45:30.177
> 
> 标签：android, bitmap, recover, minimization

我有一个绘图应用程序。我需要应用程序从最小化中恢复（单击返回直到应用程序最小化）。正如我从几个论坛中了解到的那样，最好的方法和最简单的方法是将位图保存到本地临时文件夹，然后从中打开位图。我没有找到任何教程或示例如何完成。

你能否就这个问题提出一些好的教程，或者如果你在发布你的解决方案之前做过这样的事情。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:02:19.503

最好使用 Android SharePreference 来存储图像位图。

保存图像位图。

```
public boolean saveImage(Context context, Bitmap realImage) 
{
    Editor editor = context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    realImage.compress(Bitmap.CompressFormat.JPEG, 100, baos);   
    byte[] b = baos.toByteArray(); 

    String encodedImage = Base64.encodeToString(b, Base64.DEFAULT);

    editor.putString("FacebookImage", encodedImage);
    return editor.commit();
} 
```

获取图像位图

```
 public Bitmap getImageBitmap(Context context)
    {
         Bitmap bitmap = null;
         SharedPreferences savedSession = context.getSharedPreferences(KEY, Context.MODE_PRIVATE);
         String saveimage=savedSession.getString("FacebookImage", "");
         if( !saveimage.equalsIgnoreCase("") ){
                byte[] b = Base64.decode(saveimage, Base64.DEFAULT);
                 bitmap = BitmapFactory.decodeByteArray(b, 0, b.length);
            }
        return bitmap;
    } 
```

获取图像位图后显示图像视图或其他视图。

谢谢

# javascript - 在移动设备上支持 Touch.radiusX

> ID：12881896
> 
> 赞同：0
> 
> 时间：2012-10-14T11:46:00.467
> 
> 标签：javascript, iphone, html, canvas, touch

有谁知道该物业的支持程度如何？具体来说，我在 iPhone 4 上使用 PR0C0D1N6 应用程序，根据规范，如果不支持，radiusX 将始终为 1，但在我的情况下，radiusX 未定义。

我认为它与应用程序本身没有任何关系，因为我很确定它只是插入 javascript 并在本机浏览器中打开它。

[https://developer.mozilla.org/en-US/docs/DOM/Touch.radiusX](https://developer.mozilla.org/en-US/docs/DOM/Touch.radiusX)

这是有问题的财产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:17:18.127

当前支持（2012 年 10 月 14 日）仅限于 Android 上的 Firefox 和 Chrome。

它们都支持这些带有供应商前缀的新[触摸事件 v.2](http://www.w3.org/TR/2011/WD-touch-events-20110505/)属性。

我读过 Chrome 桌面也会支持它，但你必须在 about:flags 区域打开它。当然，您也需要触摸屏硬件。

不幸的是，我们可能不得不等待一个全新的 iOS 版本才能在 Mobile Safari 中看到它。

# sql - sql server，获取输出值 sp_executesql

> ID：12881899
> 
> 赞同：0
> 
> 时间：2012-10-14T11:46:20.077
> 
> 标签：sql, sql-server, sql-server-2008

```
SET ROWCOUNT @startRowIndex
     SELECT @first_id = id FROM Question q ORDER BY q.id 
```

这足以直接从表中获取第一个 id，但是如果 sql 语句是字符串，我怎样才能得到与上面相同的结果

我的意思是如何获得`q.id`输出`EXEC sp_executesql @sql`？

```
IF  @sortCommand like 'sortAsAnswerCount' OR 
    @sortCommand like 'sortAsNonAnswer'
BEGIN

    set @sql=N'WITH LikeCounts
        AS
        (
        SELECT     TOP (100) PERCENT q.Id, q.Title, c.CustomerId, c.CreatedOnUtc,
                                  (SELECT     COUNT(*)
                                    FROM          dbo.CustomerLikeQuestion
                                    WHERE      (QuestionId = q.Id)) AS LikeCount
        FROM         dbo.CustomerContent AS c INNER JOIN
                              dbo.Question AS q ON c.Id = q.Id
        ORDER BY likecount DESC
        )
        SELECT *, row_number() over (order by likecount desc) as RowNum
        fROM LikeCounts'

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:44:04.963

```
declare @params nvarchar(max), @sql nvarchar(max), @first_id int

select @params = "@first_id int output"

IF  @sortCommand like 'sortAsAnswerCount' OR 
    @sortCommand like 'sortAsNonAnswer'
BEGIN

    set @sql=N'WITH LikeCounts
    AS
    (
    SELECT     TOP (100) PERCENT q.Id, q.Title, c.CustomerId, c.CreatedOnUtc,
                              (SELECT     COUNT(*)
                                FROM          dbo.CustomerLikeQuestion
                                WHERE      (QuestionId = q.Id)) AS LikeCount
    FROM         dbo.CustomerContent AS c INNER JOIN
                          dbo.Question AS q ON c.Id = q.Id
    ORDER BY likecount DESC
    )
    SELECT @first_id = id
    fROM LikeCounts'

END

exec dbo.sp_executesql
    @stmt = @sql,
    @params = @params,
    @first_id = @first_id output 
```

# java - Hibernate 更新对象中的所有列

> ID：12881902
> 
> 赞同：1
> 
> 时间：2012-10-14T11:46:49.650
> 
> 标签：java, hibernate

我有以下方法可以使用休眠更新数据库中的一行。我想使用新对象更新表中的所有列。因此，我获取现有对象并将其所有属性设置为新对象的属性。

```
public void updatePlace(Place newPlace) {
    Session session = factory.openSession();
    Transaction tx = null;
    try {
        tx = session.beginTransaction();
        Place place = (Place)session.createQuery("FROM Place AS plc WHERE plc.Id = " + newPlace.getId()).list().get(0);
        place.setPhone(newPlace.getPhone());
        place.setPKey(newPlace.getPKey());
        place.setName(newPlace.getName());
        place.setDetails(newPlace.getDetails());
        session.update(place);
        tx.commit();
    } catch (HibernateException e) {
        if (tx != null) {
            tx.rollback();
        }
        e.printStackTrace();
    } finally {
        session.close();
    }
} 
```

在这种方法中，我一一更新所有列，如果有一天我添加一个新列，我必须记住更改此方法。

```
place.setPhone(newPlace.getPhone());
place.setPKey(newPlace.getPKey()); 
place.setName(newPlace.getName());
place.setDetails(newPlace.getDetails()); 
```

是否有更短的方法来使用 newPlace 对象更新列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:53:05.323

您最好在会话界面中使用[get](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#get%28java.lang.Class,%20java.io.Serializable%29)方法获取对象，然后更新对象的属性，然后使用[更新](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#update%28java.lang.Object%29)方法。IE

```
Place place = (Place)session.get(newPlace.getId());
place.setPhone(newPlace.getPhone());
....

session.update(place); 
```

# android - TableLayout 周围的矩形

> ID：12881911
> 
> 赞同：0
> 
> 时间：2012-10-14T11:48:06.340
> 
> 标签：android, android-layout, android-tablelayout

我有一个由一些按钮组成的 TableLayout。我想在 TableLayout 周围画一个矩形。我不确定如何做到这一点。根据我的研究，我发现我需要扩展一个视图并使用该视图的 onDraw 事件。但是，我感到困惑的是“如何将 TableLayout 包含在视图中”？

提前感谢您的回答。

我的示例代码是

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/numkeypad"
         android:orientation="vertical"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:stretchColumns="*"
         android:layout_gravity="bottom"
         android:visibility="visible"
         android:background="@color/contents_text"
    >
<TableRow>
    <LinearLayout android:layout_height="wrap_content"
                  android:layout_width="0dp"
                  android:background="#404040"
                  android:layout_span="2">
        <Button android:id="@+id/Test1"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_weight="1"
                android:textColor="#000000"
                android:text="Test1"
                android:textSize="20dp"
                android:textStyle="bold"
                >
        </Button>
        <Button android:id="@+id/Test2"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_weight="1"
                android:textColor="#000000"
                android:text="Test2"
                android:textSize="20dp"
                android:textStyle="bold"
                >
        </Button>
    </LinearLayout>
</TableRow>
<TableRow>
    <LinearLayout android:layout_height="wrap_content"
                  android:layout_width="0dp"
                  android:background="#404040"
                  android:layout_span="2">
        <Button android:id="@+id/Test11"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_weight="1"
                android:textColor="#000000"
                android:text="Test11"
                android:textSize="20dp"
                android:textStyle="bold"
                >
        </Button>
        <Button android:id="@+id/Test22"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_weight="1"
                android:textColor="#000000"
                android:text="Test22"
                android:textSize="20dp"
                android:textStyle="bold"
                >
        </Button>
    </LinearLayout>
</TableRow>

</TableLayout> 
```

我的输出是

![在此处输入图像描述](../Images/f62377c649af33c5ee575ca05c1366f7.png)

我想要的是

![在此处输入图像描述](../Images/55a62752afa26b58a338ecab8710caed.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:09:43.443

*您可以在onDraw()*方法中扩展 FrameLayout 以根据其尺寸绘制矩形（当然在调用***super*** *.onDraw()*之后）假设您扩展的类是 com.example.MyFrameLayout。

然后您可以声明以下布局：

```
<?xml version="1.0" encoding="utf-8"?>
<com.example.MyFrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/numkeypad"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:stretchColumns="*"
        android:layout_gravity="bottom"
        android:visibility="visible"
        android:background="@color/contents_text">

        ...
    </TableLayout>
</com.example.MyFrameLayout> 
```

# jquery - 我如何在 google chrome 扩展中使用 livequery

> ID：12881914
> 
> 赞同：0
> 
> 时间：2012-10-14T11:48:15.603
> 
> 标签：jquery, google-chrome, google-chrome-extension, manifest, livequery

所以我对这件事很陌生。我想在我的扩展中以某种方式使用 jquery 插件 livequery。我怎么能做到这一点？我试图在清单中像这样加载它。

`"js": [ "scripts/jq.js", "scripts/lq.js", "scripts/some.js" ]` 但这不起作用，它引发了`$`has no object的错误`livequery`。问题是如何加载插件以使其工作？编辑： some.js 包含这部分代码：

```
 $("object").livequery(function() {
    var url = $(this).children("embed").attr("src");
    var newurl = url.replace("http", "https");
    $(this).children("param[name=\"movie\"]").val(newurl);
    $(this).children("embed").attr("src",newurl);
    var ht = $(this).html();
    $(this).html(ht);
     });

    $("a.fancy_groups").livequery(function() {
    $("td.kepmeret_txt").css("padding-top","50px");
    $("td.kepmeret_txt").each(function() {
    $(this).children("em").css("padding-left", "95px")
    });
    $(".kepmeret_ico").css("margin-right","4px").css("margin-left","4px").css("width","140px").css("height","80px");//css("width","140px").css("height","80px")
    $("a.fancy_groups").each(function() {
    $(this).children("img.attached_link").attr("src",(this)).css("width","140px").css("height","80px");
            }); 
```

});

显现：

```
"js": [ "scripts/jq.js", "scripts/lq.js", "scripts/some.js" ], 
```

jq.js 在哪里：

```
/*! jQuery v1.8.2 jquery.com | jquery.org/license */ 
```

而 lq.js 是：`/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net) * Dual licensed under the MIT (MIT_LICENSE.txt) * and GPL Version 2 (GPL_LICENSE.txt) licenses. * * Version: 1.1.1 * Requires jQuery 1.3+ * Docs: http://docs.jquery.com/Plugins/livequery */` 我不知道是什么问题

# java - Java正则表达式，简单

> ID：12881917
> 
> 赞同：1
> 
> 时间：2012-10-14T11:48:41.937
> 
> 标签：java

我正在努力实施以下内容，

假设我有字符串：

```
 ( z )  ( A ( z )  ( A ( z )  ( A ( z )  ( A ( z )  ( A )  )  )  )  ) 
```

我想写一个正则表达式来取出所有左右刹车的字符。即我希望这个返回：

```
 ( z ) ( z ) ( z ) ( z ) ( z ) ( A ) 
```

我尝试了正则表达式的组合，例如：`(\\s\\S( \\W \\)\\s\\S)`

谢谢丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T11:51:39.313

这个表达式应该有效：

```
Pattern.compile("\\(\\s*\\w+\\s*\\)").matcher(input); 
```

文字括号需要在正则表达式中转义，我认为你在那里有一些额外的成分。我展示的正则表达式允许括号中包含的单词字符前后的空格。

# java - 无法创建 PermGen 错误

> ID：12881919
> 
> 赞同：4
> 
> 时间：2012-10-14T11:49:04.697
> 
> 标签：java, memory, memory-management, permgen

这是功课，不会撒谎。我需要编写一个程序来生成“java.lang.OutOfMemoryError: PermGen space”错误。

由于我无法参加讲座，所以我昨天做了几个小时的研究，这就是我到目前为止所做的。

起初我创建了一个程序，但我经常遇到这个错误：

```
java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

好的，所以我做了更多的研究并了解到我没有收到 PermGen 错误，因为虽然我创建了对象（字符串对象）我没有再次使用它们，所以它们被认为是垃圾。所以我改变了我的代码并不断得到这个：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

所以这是我当时的代码：

```
import java.util.ArrayList;
import java.util.List;

public class Test {

public static void main(String[] args) {
    List<String> test = new ArrayList<String>();
    test.add(new String(""));

    for (;;) {
        for (int i = 0; i<test.size(); i++){
            test.add(test.get(i));
        }
    }
}
} 
```

同样在 VM 参数下，我有“-XX:PermSize=2m”（我尝试了不同的值）。有人告诉我我的代码是错误的，因为它一遍又一遍地使用相同的字符串。所以我试图改变这一点，但我仍然没有成功。然后我找到了这段代码：（[导致 java.lang.OutOfMemoryError: PermGen space error 的算法](https://stackoverflow.com/questions/3855895/algorithms-that-lead-to-java-lang-outofmemoryerror-permgen-space-error)）

```
Random rnd = new Random();
List<String> interned = new ArrayList<String>();
for (;;) {
    int length = rnd.nextInt(100);
    StringBuilder builder = new StringBuilder();
    String chars = "abcdefghijklmnopqrstuvwxyz";
    for ( int i = 0; i < length; i++ ) {
        builder.append(chars.charAt(rnd.nextInt(chars.length())));
    }
    interned.add(builder.toString().intern());
} 
```

所以如果我理解正确，这应该给我 PermGen 错误？但我仍然得到java堆错误。

我也发现了这个：http: [//javaeesupportpatterns.blogspot.com/2011/10/java-7-features-permgen-removal.html](http://javaeesupportpatterns.blogspot.com/2011/10/java-7-features-permgen-removal.html) 如果我理解正确，那么在使用 java7 时可能 java 堆空间错误是我的错误应该得到？不再可能出现 PermGen 错误？好的，所以我尝试将编译器和项目版本更改为 java 6。但仍然出现 Java 堆空间错误。

我知道我没有参加讲座是我的错，但我可以使用一些帮助来了解我在这里做错了什么或者我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T12:20:53.313

**首先**，简单的一条线如何重现 perm gen 错误（只需递归调用 main）：

```
public class PermGenError {
    public static void main(String[] args) {
        main(new String[] { (args[0] + args[0]).intern() });
    }
} 
```

应该使用参数启动：

```
whatever -XX:PermSize=8M -XX:MaxPermSize=8M 
```

**其次**，为什么你的例子没有产生 perm gen 错误？您对字符串实习生的使用是正确的。然而，在最新的 JMV 规范中，java 虚拟机可以将内部化的字符串从永久代移出到另一个。现实生活中的场景（发生在生产环境中:-)）是你可以看到 perm gen 99% 满了，应用程序非常慢，jvm 没有抛出任何错误，因为它在几代之间不断地重新洗牌。

**第三**，对于任何 GC/内存问题，我读过并经常参考的最好的论文是[使用 5.0 Java[tm] 虚拟机调整垃圾收集](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)

**编辑**：

问题的更新是：

> 示例工作正常，但当我指定大烫发大小时仍然不起作用 - 获取“Java堆空间”

更新答案是：

在指定较大的 perm gen 大小时，您需要注意两个方面：

1.  所有对象都首先进入年轻一代。因此，如果您的 perm gen 大小大于第一代 Java 堆空间的大小，将首先被抛出。在这个特定示例中，我使用一个超过 perm gen 大小的大字符串来重现错误。如果要重现“PermGen 空间”，则还需要指定堆大小。例如：

    *   -Xms2048m -Xmx2048m -XX:PermSize=512M -XX:MaxPermSize=512M - 将导致'PermGen space'（大堆，小perm gen）
    *   -Xms512m -Xmx512m -XX:PermSize=2048M -XX:MaxPermSize=2048M - 将导致“Java 堆空间”（小堆，大 perm 生成）
2.  第二个方面是堆被分成几代，堆本身的内存是碎片化的。因此，当您指定 512M 的堆大小时，您无法将半 GB 长的字符串放入内存中（因为字符串在内部实现为数组并且需要作为一个连续的块存储在内存中）。您可以容纳的最大可能大约是该大小的一半（这取决于内存碎片的严重程度）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T12:01:44.727

这`PermGen Space`是内存区域，Java 存储类定义和内部数据（不是您的应用程序创建和使用的数据）。所以基本上你并不需要一个大的和/或聪明的应用程序。[该博客页面](http://java-espresso.blogspot.de/2011/05/heap-structure-in-jvm.html)简要介绍了 Java 内存的结构以及不同区域的职责。

从理论上讲，通过定义一个低 perm gen 空间（就像您已经对`-XX:PermSize=2m`. 然后，您将几个库添加到您的应用程序类路径（Apache commons，可能是 HTMLUnit 或类似的东西）。下载几个 jars，一旦应用程序启动并且类加载器尝试将 jars 的类定义存储在 PermGen 空间中，您就会收到此错误。

如果这不起作用，请尝试使用 Tomcat，部署一些库并通过 web 应用程序管理器一遍又一遍地重新加载应用程序。

如果您需要导致此问题的算法，您可以使用 JVM 参数调试正在运行的应用程序`-XX:+PrintGCDetails`。这将显示每次使用 GC 时使用的 PermGen 空间的大小。这可以帮助您了解您是否进入了正确的方向以及您填充了哪个内存区域。PermGen 空间也存储具有对方法的引用的数组，因此这也可以解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:07:57.390

> 所以如果我理解正确，这应该给我 PermGen 错误？但我仍然得到java堆错误。
> 
> java.lang.OutOfMemoryError：超出 GC 开销限制

是的。正在发生的事情是您正在使用一种 JVM 机制，该机制旨在阻止可能耗尽内存的程序在该过程中花费过多时间。

请参阅[超出 GC 开销限制](https://stackoverflow.com/questions/4371505/gc-overhead-limit-exceeded)

您可以使用 -XX:-UseGCOverheadLimit 开关禁用此功能。我希望您随后会收到 OOME 说您的永久内存不足。

* * *

如果你现在得到这个：

> 线程“主”java.lang.OutOfMemoryError 中的异常：Java 堆空间

那么问题是你的常规堆空间在你用完 permgen 空间之前就用完了：

*   增加常规堆大小。
*   确保您的应用程序保留对所有这些实习字符串的引用。（如果它们变得无法访问。它们将被垃圾收集，并且您不会用完 permgen 空间。）

# c# - c# webclient空白页

> ID：12881920
> 
> 赞同：1
> 
> 时间：2012-10-14T11:49:06.493
> 
> 标签：c#, download, web-scraping, webclient

我有以下代码，我得到了一些奇怪的行为。

我正在尝试下载以下网页，大多数情况下它只是返回一个空白页面，但有时它会工作一次，但相同的搜索第二次将无法工作。不太清楚为什么，我有相同的代码在其他网站上工作，而且工作得很好。

[http://tpb.pirateparty.org.uk/search/test/0/99/0](http://tpb.pirateparty.org.uk/search/test/0/99/0)
'test' 是搜索文本，会根据搜索而改变。

```
private static string DownloadHtml()
{
    var client = new WebClient();
    var data = client.OpenRead("http://tpb.pirateparty.org.uk/search/test/0/99/0");
    var reader = new StreamReader(data);
    var html = reader.ReadToEnd();
    data.Close();
    reader.Close();
    return html;
} 
```

有谁知道我可能会丢失的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:59:05.760

除了Sheena的回答：另一种可能是你没有正确`Dispose`的Http连接。

你可以简单地做：

```
return new WebClient().DownloadString(
    "http://tpb.pirateparty.org.uk/search/test/0/99/0"); 
```

它会处理所有这些细节，或者如果您更喜欢访问底层流，请执行以下操作：

```
var client = new WebClient();

using (var data = client.OpenRead(
    "http://tpb.pirateparty.org.uk/search/test/0/99/0"))
{
    var reader = new StreamReader(data);
    return reader.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T11:53:40.000

这可能与您对网站的请求说“我是脚本”而不是“我是浏览器背后的人”这一事实有关。如果在您的浏览器中反复进行搜索工作正常，那么解决方案就是在您的请求中设置标题。

因此，使用wireshark 或其他工具查看使用浏览器时发送了哪些标头（您应该查看User-Agent 字段），然后只需使用如下命令来设置标头。

```
myWebClient.Headers.Add("some_header_name","the_value"); 
```

# python - 使用 Python 创建一个新的 RGB OpenCV 图像？

> ID：12881926
> 
> 赞同：64
> 
> 时间：2012-10-14T11:49:45.350
> 
> 标签：python, opencv

> **可能重复：**
> [OpenCv CreateImage 函数不工作](https://stackoverflow.com/questions/9710520/opencv-createimage-function-isnt-working)

我希望使用 Python 在 OpenCV 中创建一个新的 RGB 图像。我不想从文件中加载图像，只需创建一个空图像即可进行操作。

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2012-10-15T06:48:42.550

`cv2`Python的新接口将[numpy](http://numpy.scipy.org/)数组集成到 OpenCV 框架中，这使得操作更加简单，因为它们用简单的多维数组表示。例如，您的问题将被回答为：

```
import cv2  # Not actually necessary if you just want to create an image.
import numpy as np
blank_image = np.zeros((height,width,3), np.uint8) 
```

这会初始化一个只有黑色的 RGB 图像。现在，例如，如果您想将图像的左半部分设置为 blue ，将右半部分设置为 green ，您可以轻松地做到这一点：

```
blank_image[:,0:width//2] = (255,0,0)      # (B, G, R)
blank_image[:,width//2:width] = (0,255,0) 
```

如果您想在将来为自己省去很多麻烦，并且不得不问这样的问题，我强烈建议您使用`cv2`界面而不是旧界面`cv`。我最近做出了改变，从未回头。您可以`cv2`在[OpenCV 更改日志](http://opencv.willowgarage.com/wiki/OpenCV%20Change%20Logs)中了解更多信息。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-10-14T12:29:51.023

CreateImage（大小，深度，通道）

[https://opencv.willowgarage.com/documentation/python/core_operations_on_arrays.html#CreateImage](https://web.archive.org/web/20130529064058/http://opencv.willowgarage.com:80/documentation/python/core_operations_on_arrays.html#createimage)

# javascript - 使用 registerClientScriptBlock 阻止弹出 Javascript

> ID：12881928
> 
> 赞同：1
> 
> 时间：2012-10-14T11:50:00.317
> 
> 标签：javascript, asp.net, popup, window.open, registerclientscriptblock

我正在尝试在服务器端打开一个弹出窗口，但它似乎只适用于 IE，其他浏览器阻止了它的打开。
如果我直接在客户端调用 javascript 函数，它适用于所有浏览器，但我需要在服务器端使用 RegisterClientScriptBlock 调用它。有什么建议么？

这是代码：

```
protected void LinkButton1_Click(object sender, EventArgs e)
{
    ScriptManager.RegisterClientScriptBlock(this, GetType(), "newpage", "wopen('" + url + "');", true);
}

<script type="text/javascript">
    function wopen(url) {
        var w = window.open(url, '', 'width=1000,height=600,toolbar=0,status=0,location=0,menubar=0,directories=0,resizable=1,scrollbars=1');
        w.focus();
    }
</script> 
```

# mysql - 使用 from 中的子查询优化 SQL

> ID：12881929
> 
> 赞同：4
> 
> 时间：2012-10-14T11:50:13.967
> 
> 标签：mysql, sql, sql-optimization

我想优化一条SQL语句，下面是原始的。

```
SELECT DISTINCT
    p.productID,
    p.filename,
    p.model,
    p.code,
    p.manufacturerID,
    f2.manufacturerName,
    m.manufacturerName,
    CONCAT('INSERT INTO distribItems(productID, manufacturer, code, distributorText) VALUES (',
            CAST(p.productID AS CHAR),
            ', \'',
            f2.manufacturerName,
            '\', \'',
            f2.code,
            '\', \'',
            f2.denumire,
            '\') ;') INS
FROM
    (SELECT 
        f.manufacturerName, f.categoryName, f.code, f.denumire, f.code_2
    FROM
        furnizorlist f
    LEFT JOIN distribitems d ON 
        (d.manufacturer = f.manufacturerName
        AND (d.code = f.code OR d.manufacturer LIKE 'DELL')
        AND d.distributorText = LEFT(f.denumire, 450))
    WHERE
        productID IS NULL) f2,
    products p,
    manufacturers m
WHERE
    f2.code_2 <> ''
        AND (f2.code_2 = p.code_2 OR f2.code_2 = p.model_2)
        AND p.manufacturerID = m.manufacturerID
        AND m.manufacturerName = f2.manufacturerName
        AND m.manufacturerName != 'Compatibil'
        AND p.code != '1'
ORDER by p.filename ASC; 
```

在我的电脑上大约需要 34 秒。

![截屏](../Images/2dc25a6c941bec3f12889c6153b521c5.png)

我的想法是将子查询编写为 Join 并在 Where 子句中设置条件。

这是我难以置信的快速 SQL：

```
SELECT DISTINCT
    p.productID,
    p.filename,
    p.model,
    p.code,
    p.manufacturerID,
    f.manufacturerName,
    m.manufacturerName,
    CONCAT('INSERT INTO distribItems(productID, manufacturer, code, distributorText) VALUES (',
            CAST(p.productID AS CHAR),
            ', \'',
            f.manufacturerName,
            '\', \'',
            f.code,
            '\', \'',
            f.denumire,
            '\') ;') INS
FROM
    furnizorlist f,
    distribitems d,
#subquery end
    products p,
    manufacturers m
WHERE
    d.manufacturer = f.manufacturerName
        AND (d.code = f.code OR d.manufacturer LIKE 'DELL')
        AND d.distributorText = LEFT(f.denumire, 450)
        AND d.productID IS NULL
#subquery condions end (f and d tables)
# the next is a subquery result:
        AND f.code_2 <> ''
        AND (f.code_2 = p.code_2 OR f.code_2 = p.model_2)
        AND p.manufacturerID = m.manufacturerID
        AND m.manufacturerName = f.manufacturerName
        AND m.manufacturerName != 'Compatibil'
        AND p.code != '1'
ORDER by p.filename ASC; 
```

如果我写信给我，`explain improved_sql` 我会看到一个**Impossible WHERE**列。我试过但找不到为什么这是不可能的。我检查了字段的兼容性：不需要将 int 与 varchar 进行比较等情况。我找不到任何重大错误，这就是我在这里的原因。

WHERE 子句中是否存在逻辑错误？就像要求一个领域成为`1`，后来成为`2`？

以 ID 结尾的字段是 INT 以 NAME 结尾的字段，代码是 varchar (255) 带有文本的字段是 450 和 8192 varchar（仅在一个地方使用）

翻译：“denumire”的意思是“描述”——或者类似的东西:)

不确定服务器端运行的是哪个版本的mysql，可能是5。

如果我有充分的理由，我可以建议更改表结构，可能会调整代码。

编辑：

它来自这里的不可能：

```
EXPLAIN 

SELECT 
    f.manufacturerName,
    f.categoryName,
    f.code,
    f.denumire,
    f.code_2
FROM
    furnizorlist f
        INNER JOIN
    distribitems d ON (d.manufacturer = f.manufacturerName
        AND (d.code = f.code
        OR d.manufacturer LIKE 'DELL')
        AND d.distributorText = LEFT(f.denumire, 450))
WHERE
    productID IS NULL 
```

备注：INNER JOIN ，而不是 LEFT JOIN。

Edit2：表：furnizorlist 42,751 条记录表：distribitems 72,290 条记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T06:44:30.443

不完全确定，但这里有几点很有帮助，如果你要使用内部表（你是第一个例子） - 你真的必须尝试缩小它的拉回范围。这可能意味着要编写一些多余的 where 子句。例如，“where order_dt is between 2001 and 2002”可能会出现在较小的内部表和主查询中。为什么？因为在某些情况下无法优化内部表 - 导致服务器临时检索数百万行，仅用于您需要的少数行。

另外，我注意到您的一个连接中的字符串函数“LEFT(f.denumire, 450))”

在连接期间应避免使用任何类型的功能，这会迫使服务器（一个接一个）评估每条记录。它无法优化。这有点类似于为什么您应该始终使用主键进行连接，但更耗时.. 最好坚持使用“like” = AND、NOT、OR、IN.. 等。

# grails - Grails Bootstrap 中的 Shiro 权限

> ID：12881932
> 
> 赞同：2
> 
> 时间：2012-10-14T11:50:38.903
> 
> 标签：grails, shiro, bootstrapping

我在 grails 引导文件中为注册用户创建了一些控制器和操作的一些权限，但是每次创建新控制器或新操作时，我都必须删除表以进行更改。但是当我在 prod 中部署应用程序并在一段时间后在应用程序中为该操作添加一些操作和权限时，我能做什么？如何在不删除任何表或数据库的情况下为注册用户授予新操作权限？手动添加它们还是什么？在 mysql 中无法手动编辑权限表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:02:19.183

两步解决方案：

*   为您的用户分配角色，而不是权限。
*   每次重新启动应用程序时重建角色。在引导程序中创建一些代码很容易，它首先删除所有角色，然后在每次重新启动时使用正确的 permissio.s 创建正确的角色。

至少，这就是我处理这个问题的方式......

# c - 你如何查看存储的字符串

> ID：12881933
> 
> 赞同：-1
> 
> 时间：2012-10-14T11:50:38.350
> 
> 标签：c

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>

void clearscreen()
{
    system("cls");
}

int main()
{
    int b1,b,c;
    char data[20]; 
    int number,a;

    printf("How many data do you want to store  ");
    scanf("%d",&number);

    for(a=1;a<=number;a++)
    {
        printf("Input your data No_%d:       ",a);
        scanf("%s",&data[a]);
    }     
    return 0;
} 
```

我的问题是这样的：存储数据后，你如何看待它？例如我存储2个数据。nxt 是我想查看这两个数据。有人可以给我一个示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:57:09.923

您当前的代码可以编译，但它从根本上是错误的：`char`是一种可以存储单个字符而不是整个字符串的类型。因此，`&data[a]`将指向先前使用的字符串的子字符串，随后的每一个都覆盖先前输入的部分。

不幸的是，C 中的字符串操作远比这复杂得多——您需要一个 2D 数组或一个指针数组才能正确完成任务：

```
char *data[20];
...
for(a=1;a<=number;a++)
{
    char buf[101];
    printf("Input your data No_%d:       ",a);
    scanf("%100s", buf); // 100-char limit, no ampersand!
    data[a] = malloc(sizeof(char)*(strlen(buf)+1));
    strcpy(data[a], buf);
} 
```

现在您可以打印了：

```
for(a=1;a<=number;a++)
{
    printf("Your data No_%d: is %s\n",a, data[a]);
} 
```

最后，您必须释放已分配的数据：

```
for(a=1;a<=number;a++)
{
    free(data[a]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:07:32.767

您需要使用一个字符串数组，以便每次读取都进入一个单独的字符串。这段代码中还有其他多项清理工作——删除未使用的变量、检查输入是否成功、验证输入、在输入数据时回显数据（一种调试技术）、在输入数据后回显数据（另一种调试技术——但您通常使用只有一个），修复调用，`scanf()`因为它不期望指向数组的指针等。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    char data[20][20]; 
    int number = -1,a;

    printf("How many data do you want to store (1-20) ");
    if (scanf("%d", &number) != 1 || number > 20 || number <= 0)
    {
        fprintf(stderr, "Invalid number: %d\n", number);
        return(EXIT_FAILURE);
    }
    for (a=0; a < number; a++)
    {
        printf("Input your data No_%d:       ",a+1);
        if (scanf("%19s", data[a]) != 1)
        {
            fprintf(stderr, "Oops: failed to read anything\n");
            return(EXIT_FAILURE);
        }
        printf("%2d: %s\n", a+1, data[a]);
    }

    for (a = 0; a < number; a++)
        printf("Check %2d: %s\n", a+1, data[a]);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T11:56:13.237

您的代码不太正确。您正在声明一个长度为 20 的字符数组，即一个长度为 20 的字符串。在您的 scanf 中，您然后从*offset* `a`写入该数组。您需要做的是删除一个 char 类型的二维数组，然后读入正确的 char 数组，例如：

```
char[20][20] data;

for(int i = 0;i < 20;i++)
    scanf("%s", &data[i][0]); 
```

此外，在您的循环中，更改`a=1`为`a=0`. 如果没有，您将循环`number-1`多次。这是因为，假设`number=2`在第一个循环中，测试 ( `a<number`) 将成功。在第二个，`a`将递增到 2，然后测试将失败，因为`a`不小于`number`。

# jquery - 摆弄 .animate()

> ID：12881935
> 
> 赞同：0
> 
> 时间：2012-10-14T11:50:50.263
> 
> 标签：jquery, html

我正在使用 jQuery 中的 .animate 函数，我对该函数相当陌生，但是由于某种原因，我无法让它工作。不知道我哪里可能出错了。

首先，我在正文标签中定义脚本......

```
<script>
$('.rgt_btn').click(function() {
  $('.ovlBox').animate({
    opacity: 0.0 // I hope this will work? I'm trying to fade this box out, and fade in another... Or something along lines of a carousel.
  }, {
    duration: 2000,
    specialEasing: {
      width: 'linear',
      height: 'easeOutBounce'
    },
    complete: function() {
      $(this).after('// I'm trying to display here another box, but not sure how I can achieve this? The entire <div> box code is quite long to paste here.');
    }
  });
});
</script> 
```

就在它下面，我有我的盒子...

```
<div id="lmovlb" class="ovlBox"> <!-- Content, lots of it... -->
<div style="display: block;" class="lft_btn"></div>
<div style="display: block;" class="rgt_btn"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:06:07.910

这是一个演示的[jsfiddle](http://jsfiddle.net/PJq9X/1/)（请原谅可怕的css）。请注意，正如我之前所说，您应该将代码包装在一个函数中并在页面加载时调用它。此外，如果可能，请使用外部 js 文件。

以下是如何实现此目的的示例：

```
var yourFunc = function() {
    $('.rgt_btn').click(function() {
        $('.ovlBox').animate({
            opacity: 0.0
        }, {
            duration: 2000,
            specialEasing: {
                width: 'linear',
                height: 'easeOutBounce'
            },
            complete: function() {
                alert("hello");
            }
        });
    });
}
$(document).ready(yourFunc); 
```

# keyboard-shortcuts - PyCharm 中“替换下一个”的键盘快捷键是什么？

> ID：12881936
> 
> 赞同：3
> 
> 时间：2012-10-14T11:51:12.063
> 
> 标签：keyboard-shortcuts, pycharm

在 PyCharm 中，替换下一个单词的键盘快捷键是什么？我知道`Ctrl+R`打开对话框替换单词，但是有没有一个快捷方式可以实际替换单词，所以我不必每次都使用鼠标按下替换按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:39:43.220

**替换**对话框的按钮/选项可以使用助记符访问，按下`Alt`键查看它们，按下`Alt``P`将与单击**替换**按钮具有相同的效果。

# c# - 服务器上的输出缓存

> ID：12881939
> 
> 赞同：1
> 
> 时间：2012-10-14T11:51:35.747
> 
> 标签：c#, asp.net-mvc-3, caching, outputcache

我在控制器操作之上定义了 OutputCache 属性，以便服务器可以快速向不同用户提供相同的响应。但它缓存了**整个**页面。我的意思是，如果我缓存了一个返回`View()`. 因此，母版页顶部的用户帐户信息被每个用户共享。我只想缓存内容页，而不是母版页_Layout.cshtml。我怎样才能排除它？

编辑：我遇到问题的部分是：

```
@if(Request.IsAuthenticated) {
    <text>Hello <strong>@User.Identity.Name</strong>!</text>
    @: | 
    @Html.ActionLink("Index", "Index", "Account")
    @: |
    @Html.ActionLink("Logout", "Logout", "Account")
}
else
{
    @:|
   @Html.ActionLink("Login", "Login", "Account")
} 
```

当我缓存一个控制器动作时，返回的视图也从缓存中携带了这个用户登录部分，所以它给几乎每个用户都错误的致敬。即使页面被缓存，我如何动态生成这部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:18:43.357

VaryByCustom 是您想要的。

把它放在你的 Global.asax 中：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    return "User".Equals(custom, StringComparison.OrdinalIgnoreCase)
        ? User.Identity.Name
        : base.GetVaryByCustomString(context, custom);
} 
```

...然后使用`[OutputCache(VaryByCustom = "User")]`属性。

这仍然会导致整个页面被单独缓存，但是会为每个用户创建一个单独的缓存。

如果您正在寻找其他选项，请搜索 MVC 甜甜圈缓存或 MVC 甜甜圈孔缓存。

**回复评论**

听起来你想要甜甜圈洞缓存。看看[这个答案](https://stackoverflow.com/questions/4685906/is-donut-caching-available-in-asp-net-mvc-3)是否对你有帮助。

# html - 不包含 IE8\IE9 中 Input 中的值

> ID：12881942
> 
> 赞同：0
> 
> 时间：2012-10-14T11:51:48.597
> 
> 标签：html, input, internet-explorer-8, internet-explorer-9

有输入：

```
<input type="submit" id="SomeId" value="Search" class="mc-button mc-button-orange" /> 
```

款式：

```
.mc-button-orange {
border: solid #A26F19;
border-image: initial;
background: -webkit-linear-gradient(top, #F2BD65, #CB891E);
}

.mc-button {
min-width: 10px;
line-height: 24px;
height: 24px;
padding: 0 28px;
padding-top: 2px;
text-align: center;
-moz-transition: all 0.218s ease 0s;
-moz-user-select: none;
background: #1B7BCB;
background: -webkit-gradient(linear, 0 0, 0 bottom, from(#6AC3EB), to(#1B7BCB));
background: -webkit-linear-gradient(#6AC3EB, #1B7BCB);
background: -moz-linear-gradient(#6AC3EB, #1B7BCB);
background: -ms-linear-gradient(#6AC3EB, #1B7BCB);
background: -o-linear-gradient(#6AC3EB, #1B7BCB);
background: linear-gradient(#6AC3EB, #1B7BCB);
color: white;
display: table;
font-size: 12px;
text-decoration: none;
text-transform: uppercase;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px;
-moz-outline-radius: 10px;
border-radius: 10px;
border: 0px solid #0076A3;
border-bottom: 1px solid #1564A5;
overflow: visible;
cursor: pointer;
clear: none;
float: left;
} 
```

圆角由图书馆 PIE 制作。

在 IE8\IE9 内不会出现输入词“搜索”。

请告诉我，如何解决这个问题？

展望未来，禁用这些类的 PIE 并且标记没有帮助。

由谷歌翻译翻译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:48:58.017

删除`display: table;`将解决这个问题

# azure - Imageresizer 天蓝色问题

> ID：12881943
> 
> 赞同：1
> 
> 时间：2012-10-14T11:51:59.977
> 
> 标签：azure, azure-blob-storage, azure-web-app-service, imageresizer

我正在使用[ImageResizer.net](http://imageresizing.net/)库在我一直在工作的网站上调整图像大小。

我只是将所有代码推送到一个 azure 网站，图像（存储在 blob 中）与我的所有生产配置设置一起显示在本地，但我只是在实时站点上收到 404 错误。

任何想法为什么？如果有帮助，我可以提供一个链接。

**调试页面输出：**

贴的不好，链接[在这里](http://www.midwestcointrader.com/resizer.debug.ashx)

**想出了如何在 azure 中打开错误日志记录。这看起来像是重要的信息：**

![在此处输入图像描述](../Images/515bda756fd1363656ce20a609dda2ff.png)

![在此处输入图像描述](../Images/c821b1f9312ac45e3d33ca0c1660b1f1.png)

**编辑 1** 刚刚再次查看调试页面后，它似乎无法识别我可能拥有云捆绑的许可。有谁知道如何在调整大小库中应用许可？在本地，它发现我有一个 lisence 但不是天蓝色的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:53:29.037

我注意到，每次我离开该站点一段时间后回到该站点时，都会出现错误，但是该错误并未写入日志。

我认为这可能是由于 global.asax 中有问题。

我的原始代码：

```
protected void Application_Start(object sender, EventArgs e)
    {
        CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
        {
            string connectionString;

            if (RoleEnvironment.IsAvailable)
            {
                connectionString = RoleEnvironment.GetConfigurationSettingValue(configName);
            }
            else
            {
                connectionString = ConfigurationManager.AppSettings[configName];
            }

            configSetter(connectionString);
        });   
    } 
```

经过一些试验和错误后，我最终将其作为最终工作版本：

```
protected void Application_Start(object sender, EventArgs e)
    {
        CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
        {
            string connectionString;

            connectionString = ConfigurationManager.AppSettings[configName];
            configSetter(connectionString);
        });   
    } 
```

现在 azure 插件按预期工作，我的所有照片都显示得很好。我不确定为什么将连接字符串从 azure 设置中拉出不起作用。

我对通过 web.config 拉动 blob 存储连接的解决方案感到满意

# css - 为什么字体样式在外部样式表中不起作用？

> ID：12881952
> 
> 赞同：3
> 
> 时间：2012-10-14T11:53:11.203
> 
> 标签：css

我正在定义并使用我的自定义字体。在内部样式表中这工作正常，但是当我在外部样式表中使用它时它不起作用。
这是我的代码：

```
@font-face
 {
    font-family: A1Tahoma;
    src: url('Fonts/a1tahoma.eot') format('eot')
         , url('Fonts/a1tahoma.ttf') format('truetype')
         , url('Fonts/a1tahoma.woff') format('woff')
         , url('Fonts/a1tahoma.svg') format('svg'); 

   /* font-weight: normal;
    font-style: normal;*/
} 
  body,.test1 
{

 font-family:A1Tahoma; font-weight: bold;font-style: normal;

}  
<div class="test1">این خط را باید با نوع فونت تاهما ببینید<br />همچنین عدد 125420 به صورت فارسی تایپ شده است.</div> 
```

你能帮助我吗？ ![在此处输入图像描述](../Images/ec876447be70f3ba6d018e051b98c332.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:06:43.587

salam,baraye in kar ghable font ye / bezar yani injori va url ham bedon cot bezar

```
url(/Fonts/a1tahoma.eot) format('eot') 
```

您可以使用此样式加载字体

```
url(/Fonts/a1tahoma.eot) format('eot') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T11:56:00.157

我怀疑这与样式表中的相对 URL 有关。外部样式表是否与您的 html 页面位于同一位置？url('Fonts/...') 中的路径必须从 CSS 的位置开始工作。例如，如果您具有以下结构：

```
index.html
Fonts/a1tahoma.eot
css/styles.css 
```

然后你需要将 URL 更改为`src: url('../Fonts/a1tahoma.eot')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:33:17.560

尝试这个 ：

```
font-family: 'A1Tahoma'; 
```

可能是因为对于''

# facebook - 如何使用 Graph API 获取用户的 Facebook 应用程序列表

> ID：12881964
> 
> 赞同：-1
> 
> 时间：2012-10-14T11:54:48.510
> 
> 标签：facebook, facebook-graph-api

如何获取用户创建的应用程序列表。我想使用 Facebook Graph API 获取此列表。您能否建议使用 Facebook Graph API 上的哪个 API 以及如何使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:58:48.923

看看`/me/accounts`。我相信你正在寻找或在那个端点。

端点描述 -

> 当前用户拥有的 Facebook 应用程序和页面。

需要的权限 -

> `manage_pages`产生可用于代表应用程序/页面查询 Graph API 的 access_tokens

看看[用户端点文档](https://developers.facebook.com/docs/reference/api/user/)，那里会有更多信息。

请记住，应用程序的所有权并不一定意味着它是创建它的用户，它只是意味着用户是应用程序的管理员。

# ios - NSFetchedResultsController - TableView 中的 UI 更新不完整

> ID：12881967
> 
> 赞同：6
> 
> 时间：2012-10-14T11:55:22.360
> 
> 标签：ios, uitableview, uikit, nsfetchedresultscontroller

我正在使用`NSFetchedResultsController`刷新表格视图的数据。数据本身是通过在后台运行的 XML 解析器提供的。解析器完成后，将数据保存到自己的上下文中。立即获取这些`NSFetchedResultsController`更改并开始为每个更新的元素调用`-(void)controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`委托方法。这也很快，在日志文件中看起来完全正常。

但是，在`-(void)controllerDidChangeContent:`我调用`UITableView`的`-(void)endUpdates`. 然后我在屏幕上看到了更新动画，但在所有单元格中，除了最后一个只有一半可见的单元格之外，唯一可见的是单元格左侧的图像。所有文本标签均不可见。大约需要 5 到 10 秒，然后所有标签都弹出可见。

但是，如果我忽略所有的委托调用`NSFetchedResultsController`并简单地调用`[self.tableView reloadData]`一切`-(void)controllerDidChangeContent:`正常工作。内容立即出现。

有人知道我在这里做错了什么吗？profiler 显示主线程基本上什么都不做。除了分派到表格视图的事件之外，触摸事件也得到了正确处理。这些都不处理。看起来表格视图正忙着做一些严肃的工作，但我真的不知道那会是什么，因为动画已经完成了。

这是我的实现`NSFetchedResultsControllerDelegate`：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationAutomatic];
            break;
        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationAutomatic];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath*)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath*)newIndexPath {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    UITableView* tableView = self.tableView;
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            break;

        case NSFetchedResultsChangeDelete:
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            break;

        case NSFetchedResultsChangeUpdate:
    [(NewsItemCell*)[tableView cellForRowAtIndexPath:indexPath] updateWithNews:[self.fetchedResultsController objectAtIndexPath:indexPath]];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    NSLog(@"%s", __PRETTY_FUNCTION__);
    [self.tableView endUpdates];
} 
```

这是我的单元格布局的代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return self.fetchedResultsController.sections.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    id<NSFetchedResultsSectionInfo> sectionInfo = [self.fetchedResultsController.sections objectAtIndex:section];
    return sectionInfo.numberOfObjects;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    News* model = [self.fetchedResultsController objectAtIndexPath:indexPath];

    NewsItemCell* cell = (NewsItemCell*)[tableView dequeueReusableCellWithIdentifier:NewsCellReuseIdentifier];
    [cell updateWithNews:model];
    cell.accessoryType = (model.content ? UITableViewCellAccessoryDisclosureIndicator : UITableViewCellAccessoryNone);
    return cell;
} 
```

以及单元格的基本更新：

```
- (void)updateWithNews:(News*)news {
    NSString* dateString = [[NSDateFormatter outputDateFormatter] stringFromDate:news.date];
    self.headlineLabel.text = (news.headline ? news.headline : NSLocalizedString(@"<NewsNoHeadlineReplacement>", nil));
    self.metaInfoLabel.text = [NSString stringWithFormat:NSLocalizedString(@"<NewsMetaInfoFormatDate>", nil), (dateString ? dateString : (NSLocalizedString(@"<NewsNoDateReplacement>", nil)))];

    self.readIndicatorView.hidden = (news.read != nil && [news.read compare:news.parsingDate] == NSOrderedDescending);
} 
```

占位符字符串也不显示。标签完全是空的。只有图像是可见的！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T19:19:18.557

让我们专注于这段代码：

```
 case NSFetchedResultsChangeUpdate:
        [(NewsItemCell*)[tableView cellForRowAtIndexPath:indexPath] updateWithNews:[self.fetchedResultsController objectAtIndexPath:indexPath]];
        break; 
```

引导您了解正在发生的事情：

1.  你在 tableView 上打开更新事务
2.  然后你通过向 tableView 发出命令来响应委托调用
3.  *但是对于更新，您可以通过发出与 tableView 无关的命令来执行不同的操作*
4.  然后你关闭 tableView 上的事务

我的意思是：tableView 命令可能会将更改捆绑到一个事务中。似乎您对重新渲染单元格的调用将在下一个事务中结束。所以将上面的代码替换为：

```
case NSFetchedResultsChangeUpdate:
        [tableView reloadRowsAtIndexPaths: [NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic ];
        break; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T09:36:41.950

我首先要检查的事情：

1.  确保您的 fetch 没有在不同的线程中执行
2.  确保您的获取速度很快，如果速度太慢也可能是原因

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T22:20:22.123

您是否在后台线程中调用 NSFetchedResultsControllerDelegate？这可能是问题所在。为了测试，您可以将 bg moc 的更改合并到主 moc 中，并观察主 moc 而不是 bg moc。NSManagedObjectContext 的一个实例应该只被一个线程使用。

# objective-c - 如何推送视图控制器以登录 Google？

> ID：12881969
> 
> 赞同：1
> 
> 时间：2012-10-14T11:55:30.300
> 
> 标签：objective-c, oauth

我只是编程的初学者。我正在尝试通过 OAuth2.0 和 GTM-OAuth2.0 登录谷歌帐户。构建可以成功，但我无法显示登录视图。我应该如何使用 pushViewControlle 方法？请给我一个建议。

我参考以下网站：[http ://docs.kinvey.com/ios-oauth-guide.html](http://docs.kinvey.com/ios-oauth-guide.html)

[http://code.google.com/p/gtm-oauth2/wiki/Introduction](http://code.google.com/p/gtm-oauth2/wiki/Introduction)

```
#import "GreaderMasterViewController.h"

#import "GreaderDetailViewController.h"

#import "GTMOAuth2ViewControllerTouch.h"

NSString *kKeychainItemName = @"Greader";

@interface GreaderMasterViewController () {
NSMutableArray *_objects;
}
@end

@implementation GreaderMasterViewController

- (GTMOAuth2Authentication * ) authForGoogle

{

NSString * url_string = @"http://www.google.com/reader/api";
NSURL * tokenURL = [NSURL URLWithString:url_string];

NSString * redirectURI = @"http://goes-nowhere-does-nothing";
GTMOAuth2Authentication * auth;
auth = [GTMOAuth2Authentication authenticationWithServiceProvider:@"reader"
                                                         tokenURL:tokenURL
                                                      redirectURI:redirectURI
                                                clientID:@"xxxxxxxx.apps.googleusercontent.com"
                                                     clientSecret:@"xxxxxxxxx"];

auth.scope = @"basic";

return auth;

}

- (void) signInToGoogle

{
GTMOAuth2Authentication * auth = [self authForGoogle];
NSString* auth_string = @"https://accounts.google.com/o/oauth2/auth";
NSURL * authURL = [NSURL URLWithString:auth_string];

GTMOAuth2ViewControllerTouch * viewController;
viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithAuthentication:auth
                                                             authorizationURL:authURL
                                                             keychainItemName:kKeychainItemName
                                                                     delegate:self
                                                             finishedSelector:@selector(viewController:finishedWithAuth:error:)];
[[self navigationController] pushViewController:viewController animated:YES];
} 
```

# git - Git 预提交钩子在 GitHub for mac 中失败（在命令行上工作）

> ID：12881975
> 
> 赞同：22
> 
> 时间：2012-10-14T11:56:01.193
> 
> 标签：git, github, atlassian-sourcetree, github-for-mac

我创建了一个非常简单的预提交脚本：-

```
#!/usr/bin/env sh

# Run tests
npm test
if [ $? -ne 0 ]; then
  echo "Tests failed. Aborting.."
  exit 1
fi

exit 0 
```

* * *

当我`git commit`在命令行运行时（测试失败），我得到了预期的 exit 1 和 message `Tests failed. Aborting..`。

但是，如果我使用 GitHub for Mac 但是我会得到：

```
.git/hooks/pre-commit: line 5: npm: command not found
Tests failed. Aborting..
 (256) 
```

我猜这归结为`npm`GitHub for Mac 正在使用的执行环境不可用，但我一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-14T14:31:03.370

解决。由于全局安装的节点模块最终`/usr/local/bin`位于我的预提交开头，我只需要添加以下内容：

```
PATH=$PATH:/usr/local/bin:/usr/local/sbin 
```

即在执行时同时附加`/usr/local/bin`和。`/usr/local/sbin``PATH`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-12T13:45:21.333

在 Github Desktop 和 Sourcetree 等 GUI 环境中可用的 $PATH 变量与终端中可用的变量不同。默认情况下，GUI 环境中可用的 $PATH 找不到您的节点模块。如上一个答案所述，您可以通过添加来确保 /usr/local/bin 在路径中

```
PATH=$PATH:/usr/local/bin:/usr/local/sbin 
```

就我而言，这不起作用，因为我使用的是[Node Version Manager](https://github.com/creationix/nvm)，它存储不同版本的 Node 并可以轻松升级和切换 Node 版本。它将每个版本的 Node 的 node_modules 存储在一个单独的文件中。这是我用来解决此问题的代码：

```
#!/usr/bin/env bash

PATH="/usr/local/bin:$PATH"

if [ -f $HOME/.nvm/nvm.sh ]
then
  . $HOME/.nvm/nvm.sh
  PATH="$HOME/.nvm/versions/node/$(nvm current)/bin:$PATH"
fi 
```

这将检查 NVM，如果存在，则加载它并使用它来查找当前使用的 Node 版本的节点模块的路径。如果您只是尝试访问节点模块并且不需要获取任何特殊内容，则可以跳过添加[sbin 文件夹](https://askubuntu.com/questions/308045/differences-between-bin-sbin-usr-bin-usr-sbin-usr-local-bin-usr-local)，例如`/usr/local/sbin`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-11T13:45:55.633

对我来说，我没有安装从预提交调用的依赖项。就我而言，这是`composer`，所以`brew install composer`帮助了我。

`your-project-directory/.git/hooks/pre-commit`对于未来的窥视，通过在您最喜欢的文本编辑器中打开并根据需要安装缺少的依赖项，检查您是否缺少在预提交文件中调用的任何依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-27T22:03:49.587

我通过运行解决了它：

```
sudo launchctl config user path "$(brew --prefix)/bin:${PATH}" 
```

`.huskyrc`并在主文件夹`~`（而不是项目文件夹）中创建一个包含以下内容的文件：

```
# This loads nvm.sh and sets the correct PATH before running hook
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh" 
```

[我按照赫斯基常见问题解答](https://typicode.github.io/husky/#/?id=command-not-found)中的这些说明进行操作。

# javascript - 在另一个文件中包含一个文件

> ID：12881979
> 
> 赞同：1
> 
> 时间：2012-10-14T11:56:46.370
> 
> 标签：javascript, node.js, mocha.js

我正在尝试将 mocha 用于一些测试驱动开发。仍然在开始涉足软件工程时，我遇到了一个问题，包括 test.js 中的 Graph.js：

项目/图表/Graph.js：

```
function Graph(){
    this.nodes = {};
    this.id = 0;
}
Graph.prototype.newId = function(){
    return this.id++;
};
Graph.prototype.addNode = function(data){
    var node = new Node(graph, this.newId());
    node.data = data || {};
    this.nodes[node.id] = node;
    return edge.id;
};
Graph.prototype.removeNode = function(node){
    for(var key in this.nodes){
        for(var key2 in this.nodes[key].to){
            if(this.nodes[key].edges.to[key2] == this){
                delete this.nodes[key].edges.to[key2];
            }
        }
        for(var key2 in this.nodes[key].from){
            if(this.nodes[key].edges.from[key2] == this){
                delete this.nodes[key].edges.from[key2];
            }
        }
    }
    delete this.nodes[node.id];
    return 0;
};
Graph.prototype.addEdge = function(source, target){
    id = this.newId();
    source.edges.to[id] = target;
    target.edges.from[id] = source;
    return id;
};
Graph.prototype.removeEdge = function(edgeId){
    delete this.edges[edgeId];
};

function Node(graph, id){
    this.id = id;
    this.graph = graph;
    this.edges = {};
    this.edges.from = {};
    this.edges.to = {};
};

exports.Graph = Graph;
exports.Node = Node; 
```

项目/测试/test.js：

```
require('../Graph/Graph.js');

suite('Graph.js', function(){
        setup(function(){
                var graph = new Graph();

                var n0 = graph.addNode({text: "Hello"}),
                    n1 = graph.addNode({text: "Sweet"}),
                    n2 = graph.addNode({text: "Worlds!"});
                var e0 = graph.addEdge(n0, n1),
                    e1 = graph.addEdge(n1, n2);

            });

        test('traverse graph', function(){
                var currentNode = n0;
                var str = ''
                while(Object.keys(currentNode.edges.to).length > 0){
                    str += currentNode.data.text + ' ';
                    currentNode = currentNode.edges.to[Object.keys(currentNode.edges.to)[0]];
                }
                assert.equals(str, 'Hello Sweet Worlds! ');
            });
    }); 
```

用命令

```
localhost:testing lowerkey$ mocha -u tdd -R nyan 
```

我得到以下结果：

```
 0   -__,------,
 1   -__|  /\_/\ 
 0   -_~|_( o .o) 
     -_ ""  "" 

  ✖ 1 of 1 test failed:

  1) Graph.js "before each" hook:
     ReferenceError: Graph is not defined
      at Context.<anonymous> (/Users/lowerkey/Desktop/TryThree/testing/test.js:5:19)
      at Hook.Runnable.run (/usr/local/lib/node_modules/mocha/lib/runnable.js:200:32)
      at next (/usr/local/lib/node_modules/mocha/lib/runner.js:201:10)
      at Runner.hook (/usr/local/lib/node_modules/mocha/lib/runner.js:212:5)
      at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

**更新**，我得到未定义的图形（小写）`var graphjs = require(...);`。`var graph = new graphjs.Graph();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:11:34.193

您必须`Graph`从`exports`

```
var Graph = require('../Graph/Graph.js').Graph;
...
var graph = new Graph(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:35:19.800

我重新组织了两个文件，修复了几个错误：

这是两个完整的文件：

图.js：

```
function Graph(){
    this.nodes = {};
    this.id = 0;
    this.edges = {};
}
Graph.prototype.newId = function(){
    return this.id++;
};
Graph.prototype.addNode = function(data){
    var node = new Node(this, this.newId());
    node.data = data || {};
    this.nodes[node.id] = node;
    return node.id;
};
Graph.prototype.removeNode = function(id){
    for(var key in this.edges){
        if(this.edges[key].source.id == id || this.edges[key].target.id == id){
            delete this.edges[key];
        }
    }
    delete this.nodes[id];
    return 0;
};
Graph.prototype.nodeIds = function(){
    var ids = [];
    for(var key in this.nodes){
        if(this.nodes[key] !== undefined){
            ids.push(key);
        }
    }
    return ids;
};
Graph.prototype.addEdge = function(sourceId, targetId){
    var id = this.newId();
    this.edges[id] = {target: sourceId, source: targetId};
    return id;
};
Graph.prototype.removeEdge = function(edgeId){
    delete this.edges[edgeId];
};
Graph.prototype.edgeIds = function(){
    var ids = [];
    for(var key in this.edges){
        if(this.edges[key] != undefined){
            ids.push(key);
        }
    }
    return ids;
};
function Node(graph, id){
    this.id = id;
    this.graph = graph;
    this.edges = {};
}
Node.prototype.nodesFrom = function(){
    var ids = [];
    for(var key in this.graph.edges){
        if(this.graph.edges[key].source == this.id){
            ids.push(this.graph.edges[key].target);
        }
    }
    return ids;
};
Node.prototype.nodesTo = function(){
    var ids = [];
    for(var key in this.graph.edges){
        if(this.graph.edges[key].target == this.id){
            ids.push(this.graph.edges[key].source);
        }
    }
    return ids;
};

exports.tests = function(){
    suite('Graph.js', function(){
        function createGraph(){
            var graph = new Graph();
            var n0Id = graph.addNode({text: "Hello"}),
                n1Id = graph.addNode({text: "Sweet"}),
                n2Id = graph.addNode({text: "Worlds!"});
            var e0Id = graph.addEdge(n0Id, n1Id),
                e1Id = graph.addEdge(n1Id, n2Id);

            return graph;
        }

        test('create graph', function(){
            var graph = new Graph();
            assert.isDefined(graph);
        });
        test('removeNode', function(){
            var graph = createGraph();
            graph.removeNode(0);
            assert.deepEqual(graph.nodeIds(), ['1', '2']);
        });
        test('removeEdge', function(){
            var graph = createGraph();
            graph.removeEdge(3);
            assert.deepEqual(graph.edgeIds(), ['4']);
        });
        test('nodesFrom', function(){
            var graph = createGraph();
            assert.deepEqual(graph.nodes[1].nodesFrom(), [0]);
        });
        test('nodesTo', function(){
            var graph = createGraph();
            assert.deepEqual(graph.nodes[1].nodesTo(), [2]);
        })
    });
}; 
```

测试.js：

```
assert = require('chai').assert;
require('../Graph/Graph.js').tests(); 
```

这样，测试将包含在每个源文件中，由项目测试套件运行。

# sequences - 查找系列的第 n 项

> ID：12881980
> 
> 赞同：0
> 
> 时间：2012-10-14T11:57:05.437
> 
> 标签：sequences

找到 DJ(i) 的第 n 项。

给定 DJ(i) 是 i 在 DJ(i) 中出现的次数

数组 DJ(i) 如下所示：

```
 i       1 2 3 4 5 6 7 8 9 10 ..... 
DJ(i)      1 2 2 3 3 4 4 4 5  5 ..... 
```

我想要 DJ(i) 系列的第 n 个术语。我必须对这个术语进行一些进一步的计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:12:30.213

查找此[表](http://oeis.org/A001462/b001462.txt)中的值或使用您选择的编程语言自己计算该表（作为一个简单的练习）。还要检查这个 SO[答案](https://stackoverflow.com/questions/12786087/golombs-sequence)和[OEIS](http://oeis.org/A001462)。

# php - PHP Facebook SDK - 如何将好友头像贴到墙上？

> ID：12881986
> 
> 赞同：1
> 
> 时间：2012-10-14T11:57:37.270
> 
> 标签：php, facebook, facebook-graph-api, image

我在尝试

```
$attachment = array('message' => "message",
            'name' => 'name',
            'caption' => "caption",
            'link' => 'some URL address',
            'picture' => "https://graph.facebook.com/PROFILE_ID_NUMBER/picture"); 
```

但是墙上的帖子没有贴出来。当我选择其他图像并设置 URL 时，它运行良好。这`https://graph.facebook.com/PROFILE_ID_NUMBER/picture`会在应用程序中返回我用户的个人资料图片而没有任何问题，但是当我尝试将其发布到墙上时，它就不起作用了。

那么 - 我如何获取用户个人资料图片的 URL 并将其发布到墙上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:36:41.313

```
https://graph.facebook.com/PROFILE_ID_NUMBER/picture 
```

重定向到原始图像 url，您可以使用`get_headers`PHP 的功能获得。你可以这样做：

```
$headers = get_headers("https://graph.facebook.com/$fbid/picture?type=large");
$image_loc = $headers[5]; //if not work, check at what index actual url is coming though it works for me 
```

然后使用此 $image_loc 网址在 facebook 上发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:01:47.973

奇怪，但是

'图片' => "https://graph.facebook.com/PROFILE_ID_NUMBER/picture");

应该在帖子中显示 PROFILE_ID 的图片...我试过了，实际上它显示了任何用户的图片，不一定是我的朋友 :)

尝试使用带有图片链接的用户访问令牌，可能会工作..

# c# - 使用 NRefactory 解析 .csproj 文件中的引用

> ID：12881989
> 
> 赞同：1
> 
> 时间：2012-10-14T11:58:09.177
> 
> 标签：c#, types, assemblies, csproj, nrefactory

我正在使用 NRefactory 尝试解析 .csproj 文件中列出的所有编译文件，并希望能够解析项目中的所有类型。

尽管不添加 .csproj 还包含的程序集引用，但我无法解析所有类型，这就是我正在努力解决的问题。

.csproj 的摘录：

```
<ItemGroup>
    <Reference Include="Microsoft.Xna.Framework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=842cf8be1de50553, processorArchitecture=x86" />
    <Reference Include="Microsoft.Xna.Framework.Game, Version=4.0.0.0, Culture=neutral, PublicKeyToken=842cf8be1de50553, processorArchitecture=x86" />
    <Reference Include="mscorlib" />
    <Reference Include="System" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Core" />
</ItemGroup> 
```

可以看出 XNA 引用给出了一个全名，所以我可以很容易地使用`Type.GetType("fullname").Assembly`. 但是传入`System`或`mscorlib`不传入 publickey 只会返回 null。

我如何才能从.csproj 文件中`System`的单词和其他信息中获取完整的类型名称？`System`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T23:55:57.420

您实际要加载哪个 System.dll 副本？一种在运行时可用？还是 C# 编译器使用的那个？

如果项目面向 .NET 4.0，则 C# 编译器使用与面向 .NET 4.5 的项目不同的参考程序集。但是，在运行时，两者都使用相同的程序集（因为 .NET 4.5 安装会覆盖 .NET 4.0）。

要获得与 C# 编译器相同的版本，最好的解决方案是让 MSBuild（通过`Microsoft.Build.dll`）解析程序集引用。[NRefactory CodeProject 文章中](http://www.codeproject.com/Articles/408663/Using-NRefactory-for-analyzing-Csharp-code)的示例应用程序使用了这种方法，您可以随意从那里复制代码。

一般来说，获得正确的运行时程序集是不可能的，因为应用程序可以重新配置程序集的加载方式（app.config 或`AppDomain.AssemblyResolve`事件处理程序）。然而，一个很好的近似可能是使用 MSBuild 来确定完整的程序集名称，然后将其传递`Assembly.Load()`给 .NET 来处理运行时加载逻辑。

# javascript - 当使用 Jquery 打开键盘时，如何强制任何输入保留在键盘上？

> ID：12881990
> 
> 赞同：2
> 
> 时间：2012-10-14T11:58:27.633
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在使用 Jquery Mobile 和 html 从事“用于移动设备”的 .NET 项目。这个问题只发生在三星 Galaxy 设备上，当我点击输入时，键盘出现在输入上，输入隐藏在键盘后面，直到我开始输入任何东西，那么我该如何解决这个问题？我想让键盘将输入推到上面而不是隐藏输入。

# windows - 无法连接到 dl-ssl.google.com

> ID：12881994
> 
> 赞同：1
> 
> 时间：2012-10-14T11:58:43.507
> 
> 标签：windows, ubuntu, ping, icmp

我想在我的 Ubuntu 中更新 Android SDK 和 Android 平台工具。Ubuntu 是 VirtualBox 中的来宾系统，主机系统是 Windows-64 位。奇怪的是，当我在 Android SDK Manager 中更新 Android SDK 时，它无法连接到[http://dl-ssl.google.com](http://dl-ssl.google.com)。我尝试在我的 Ubuntu 中 ping dl-ssl.google.com，它什么也没发生并且超时。在 Ubuntu 中，我可以正常 ping 其他网站，例如 Yahoo。但是，当我 ping 主机系统中的地址时，它可以正常工作并获得 ICMP_REPLY 包。为什么我不能在我的 Ubuntu 和 Windows 中 ping 同一个地址？

# java - 这是一个复杂度为 O(4^n) 的算法吗？

> ID：12881996
> 
> 赞同：2
> 
> 时间：2012-10-14T11:58:51.360
> 
> 标签：java, big-o, time-complexity

我被要求编写一个时间复杂度为 O(4^n) 的方法。

我提出了这个算法：

```
public void test(int n){
   for(int i = 0; i<n;i++){
      test(4*i);
   }
} 
```

这是否被认为在 O(4^n) 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:01:51.400

不，不是。

调用 test(0) 将立即返回。用负数调用测试也是如此。

用正数调用 test 将永远不会返回（它会溢出，但在计算复杂度时通常不会考虑这一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T12:35:10.260

你非常接近你的程序。正确的功能应该是这样的：

```
public void test(int n) {
  if (n == 0) return;
  for (int i = 0; i < 4; i++) test(n-1);
} 
```

运行这段代码来检查：

```
static int runs;
static void test(int n) {
  runs++;
  if (n == 0) return;
  for (int i = 0; i < 4; i++) test(n-1);
}
public static void main(String[] args) {
  for (int n = 1; n <= 5; n++) {
    runs = 0;
    test(n);
    System.out.format("%d: %d %d\n", n, 1<<(2*n), runs);
  }
} 
```

它会打印

```
1: 4 5
2: 16 21
3: 64 85
4: 256 341
5: 1024 1365 
```

运行计数减一，但满足大 O 复杂性。

一旦你看到它，为什么它是 O(4 ^n ) 的原因可能很明显，但一点解释也不会伤害到它。最好把这个功能想象成通过分而治之的方式解决一个复杂的问题。它将一个 n 大小的问题减少*为一个 (* *n-1* ) 大小的问题的四个实例，递归直到子问题是微不足道的（大小为 0）。因此，大小为 1 的问题在 1+4 步中得到解决（入口点调用 + 4 个普通子问题）；1 + 4*(1 + 4) = 21 步中大小为 2 的问题，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:05:07.113

不它不是。对于大于 1 的数字，该程序将无限运行。因此它不是 O(4^n)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T12:16:05.990

正如已经说过的，对于大于 1 的给定输入，这将永远运行。要编写一个 4^n 复杂度的程序，请尝试考虑一个运算，它对于 n 比对于 n-1 复杂 4 倍。例如，将一个正方形分成 4 个较小的正方形以获得 n = 1，然后再将这些正方形划分为 n = 2 ...

您将意识到正方形的数量将是 4^n，算法的时间复杂度也是如此。

然而，请理解大 o 符号表示一个上限，因此任何 O(n) 的操作也将是 O(4^n) 但我想这不是预期的......

# android - 在 Eclipse 中使用 EGit

> ID：12881997
> 
> 赞同：0
> 
> 时间：2012-10-14T11:58:59.347
> 
> 标签：android, eclipse, egit

将 EGit 与 Eclipse 结合使用时，我几乎没有什么困惑。由于我熟悉 TFS，我想了解在 EGit 中完成的以下操作。

1.  从远程服务器获取最新信息

    一种。在获取最新版本时，我如何保留本地副本和远程副本。

2.  提交对远程服务器的更改

我正在使用 EGit 作为存储库在 Eclipse 中开发 Android 应用程序。在 Eclipse UI 中使用 EGit。不是命令行 git 命令的用户。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:52:27.670

您可以完美地将 EGit 与 Eclipse 一起使用，而不是控制台。

我假设您的 EGit 已经正确配置并且可以正常工作。

1.  右键单击项目>团队>获取
2.  为此，您必须正确配置远程服务器。首先，您必须提交到本地副本（右键单击项目>团队>提交）然后推送到远程（右键单击项目>团队>推送）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:06:00.840

我使用相当控制台那个egit。我发现它更可靠。通常，您有分支，您可以创建自己的分支（带有更改的本地分支），并且不时将其与远程（服务器）分支合并。这样，您可以轻松地在分支和主服务器分支之间切换。要提交更改，首先您必须将它们提交到您自己的本地分支，然后将它们推送到服务器。（使用控制台就像 git push origin master - 其中 master 是您要推送到的远程分支的名称）。