# StackOverflow 问答 12505000-12505999

# ruby-on-rails-3 - Sidekiq 客户端中间件缺少“之后”代码？

> ID：12505008
> 
> 赞同：0
> 
> 时间：2012-09-20T01:29:18.613
> 
> 标签：ruby-on-rails-3, sidekiq

`yield`我的sidekiq客户端中间件中的代码似乎没有执行。没有引发异常（我正在捕获它），所以我无法想象代码是如何被跳过的（在 lambda 中也没有返回）。谁能解释为什么？这是中间件代码：

```
class SidekiqClientWorkless
  def initialize(options = nil)
  end
  def call(worker, msg, queue)
    Log.create!(task: "testing", message: "This message gets logged")
    begin
      yield
    rescue Exception => e
      require 'ruby-debug'
      debugger
    end
    Log.create!(task: "testing", message: "This message does not get logged")
  end
end

Sidekiq.configure_client do |config|
  config.redis = { :url => 'redis://user:pwd@barb.redistogo.com:9725/', 
                :namespace => 'mynamespace' }
  config.client_middleware do |chain|
    chain.add SidekiqClientWorkless, :foo => 1, :bar => 2
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:46:08.727

您是否尝试过`ensure`按照[文档](https://github.com/mperham/sidekiq/wiki/Middleware)中的示例使用？

老实说，我不确定为什么需要它，但它似乎是......

# r - R ts.plot()：系列顺序

> ID：12505009
> 
> 赞同：2
> 
> 时间：2012-09-20T01:29:22.217
> 
> 标签：r, plot

我有一个像

```
 A   B   C   D   E   F
2003-07 445 48  1126    512 277 677
2003-08 429 77  1179    583 320 675
2003-09 421 80  1077    488 288 627 
```

我想在同一张图上绘制这些时间序列。我还希望 ABC 具有相同的颜色（蓝色），而其他颜色为黑色。所以我用

```
ts.plot(df,col=c(rep("blue",3),rep("black",3))) 
```

这将创建正确的时间序列图，但颜色应用于错误的序列：ABC 是蓝色和黑色的混合，DE F 也是如此。（请注意，如果这是问题。）

ts.plot() 使用什么顺序？

# 编辑

```
df <- structure(list(X = structure(1:3, 
.Label = c("2003-07", "2003-08", "2003-09"), class = "factor"), 
 A = c(445L, 429L, 421L), B = c(48L, 77L, 80L),
 C = c(1126L, 1179L, 1077L), D = c(512L, 583L, 488L ), 
 E = c(277L, 320L, 288L), FF = c(677L, 675L, 627L)), 
.Names = c("X", "A", "B", "C", "D", "E", "FF"), 
class = "data.frame", row.names = c(NA, -3L)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:06:59.480

```
ts.plot(df,col=c(rep("blue",3),rep("black",3))) 
```

我认为它绝对按照 order 中的指定进行绘制`A-B-C-D-E-F`。所以...

```
A     B     C     D     E     F
Blue  Blue  Blue  Black Black Black 
```

![在此处输入图像描述](../Images/6dcb1275efd3b866138303fbc3b9401f.png)

如果您匹配 A/B/C 的值...

```
 A  B    C
2003-07 445 48 1126
2003-08 429 77 1179
2003-09 421 80 1077 
```

...您会看到三条蓝线是来自`445->429->421`& `48->77->80`&的那些`1126->1179->1077`，它实际上与您指定的内容相匹配。

顺便说一句，您可以将绘图调用简化为：

```
ts.plot(df,col=rep(c("black","blue"),each=3)) 
```

...通过使用`each=`函数调用的一部分。

编辑：：

查看您的`dput`，看起来您的图表也将您的标签绘制`df$X`为值`1,2,3`，因为它是 a`factor`并且在绘图时被解释为这样。

尝试使用这段代码从原始图中删除标签并重新添加它们：

```
ts.plot(df[-1],col=c(rep("blue",3),rep("black",3)),gpars=list(xaxt="n"))
axis(1,labels=as.character(df$X),at=1:3) 
```

# git - 需要帮助克隆协作 git 存储库 - 获取主机已关闭错误

> ID：12505011
> 
> 赞同：2
> 
> 时间：2012-09-20T01:29:38.913
> 
> 标签：git, heroku, git-clone

试图克隆一个 git repo 我被要求合作并不断收到这个错误

ssh: connect to host heroku.com port 22: Host is down fatal: 远端意外挂断

有任何想法吗？真的需要让这个工作！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:55:50.747

这可能是代理问题，也可能是因为您没有将 ssh 公钥添加到 repo（如“ [ssh: connect to host heroku.com port 22](https://stackoverflow.com/questions/10968591/ssh-connect-to-host-heroku-com-port-22-connection-timed-out) ”中所述）。
根据您的 ssh 地址，[为 heroku 使用正确的 ssh 配置](https://stackoverflow.com/questions/10555546/error-in-git-push-heroku-master-through-ssh-behind-proxy)。

确保您的 heroku 存储库地址是正确的（请参阅“ [Rails / Heroku：致命：远程端意外挂断](https://stackoverflow.com/questions/8742937/rails-heroku-fatal-the-remote-end-hung-up-unexpectedly)”）。

# ruby-on-rails - collection_select 不显示下拉菜单，是否有任何错误

> ID：12505014
> 
> 赞同：0
> 
> 时间：2012-09-20T01:30:16.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

考虑这些简单的提醒和事件模型：

```
class Event < ActiveRecord::Base
  has_many :reminders
end

class Reminder < ActiveRecord::Base
  belongs_to :event
  accepts_nested_attributes_for :event
end 
```

现在，我通过`reminders/new.html.haml`以下方式构建视图：

```
%h2 Reminders
= form_for(@reminder, html: {class: "form-horizontal"}) do |f|
  = f.fields_for :event do |event|
    = event.collection_select :id, Event.all, :id, :name
  = f.text_field(:issue_date, class: "datepicker", data: {"date-format" =>"dd/mm/yyyy"}, 'date' => "#{Time.new.strftime("%d/%m/%Y")}")
  = f.text_field(:renewal_date, label:"Due Date", class: "datepicker", data: {'date-format' => 'dd/mm/yyyy', 'date' => "#{Time.new.strftime("%d/%m/%Y")}"})
  = f.submit 
```

此视图不会抛出任何错误和提醒减去`<options>`标签。 [查看 http://screencloud.net/img/screenshots/f990e124f356330a10839b00cd92f75a.png](http://screencloud.net/img/screenshots/f990e124f356330a10839b00cd92f75a.png "看法")

我想要做的是显示`Event.name`在`<options>`. 那么我在这里错过了什么？

[更新] 更改为`form_for`& 它生成以下 html 标记

```
<form method="post" id="new_reminder" class="form-horizontal" action="/reminders" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="Yu7Qj4SW+GAMXx9dEL/ohjsqryEkxUXXGy+SHpN97hc=" name="authenticity_token"></div>

                <input type="text" size="30" name="reminder[issue_date]" id="reminder_issue_date" date="20/09/2012" data-date-format="dd/mm/yyyy" class="datepicker">
                <input type="text" size="30" name="reminder[renewal_date]" label="Due Date" id="reminder_renewal_date" data-date="20/09/2012" data-date-format="dd/mm/yyyy" class="datepicker">
                <input type="submit" value="Create Reminder" name="commit">
              </form> 
```

您可能会注意到`<option>`由于某种原因缺少标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:20:15.350

我做错了，这个解决方案不需要 `accepts_nested_attributes_for`. 删除它并解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:14:22.603

试试这个：collection_select(:event, :id, Event.all, :id, :name)

# c# - 方法重载静态+动态失败

> ID：12505022
> 
> 赞同：5
> 
> 时间：2012-09-20T01:31:38.233
> 
> 标签：c#, overloading

上周我遇到过几次，很想知道原因——我有一个谷歌，但找不到任何直接相关的东西。

我有一个带有动态方法的类，我可以添加一个具有相同接口的静态方法：

```
public class MyClass
{
    public int MyMethod()
    {
        //do something #1;
    }

    public static int MyMethod()
    {
        //do something
    }
} 
```

这很好，但如果我尝试从动态方法调用静态方法，将 #1 替换为`return MyClass.MyMethod()`，我会收到错误消息“以下方法或属性之间的调用不明确：MyClass.MyMethod() 和 MyClass.MyMethod() .
如果删除静态方法，错误变为“需要对象引用..”，这是有道理的。

那么为什么这是模棱两可的呢？它以类名开头以指定静态方法，该方法适用于代码中的任何其他位置。
为什么不在这里？

**编辑：**我实际上并没有尝试在没有调用静态方法的动态方法的情况下编译它，我刚刚通过 VS 没有下划线。
但我想仍然是一个类似的问题，但添加了“为什么不能两者都有，因为一个是静态的，一个不是”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T01:45:30.257

除此之外，还有一个[关于 SO 的类似问题](https://stackoverflow.com/questions/160118/static-and-instance-methods-with-the-same-name)，给出了一些解释，为什么你不能有两个具有相同签名的方法。

```
public class MyClass
{
    public int MyMethod()
    {
        return 0;
    }

    public static int MyMethod() //Here compiler says, that you've already got method MyMethod with same parameter list
    {
        return 0;
    }
} 
```

所以，你根本不能拥有这些方法

看看[这个](http://msdn.microsoft.com/en-us/library/aa691131%28v=vs.71%29.aspx)

首先：

> 方法的签名由方法的名称和每个形式参数的类型和种类（值、引用或输出）组成，按从左到右的顺序考虑。方法的签名特别不包括返回类型，也不包括可以为最右边的参数指定的 params 修饰符。

第二：

> 方法的重载允许类、结构或接口声明多个具有相同名称的方法，前提是它们的签名在该类、结构或接口中是唯一的。

**编辑**

至于你得到这个错误的原因：你可能还没有编译并看到一个带有红色下划线的错误。如果您进行编译，您将看到带有蓝色下划线的错误不是在您调用静态方法的行中，而是在定义静态方法的行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:44:06.567

> 那么为什么这是模棱两可的呢？它以类名开头以指定静态方法，该方法适用于代码中的任何其他位置。为什么不在这里？

它不明确的原因是因为您可以在 MyClass 上拥有一个名为 MyClass 的实例属性。我相信 Eric Lippert 更详细地描述了这个推理。我找不到那个具体的帖子，但这[是他的一个类似系列](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)。

# c++ - 将一组内存从 void* 转换为一个类

> ID：12505025
> 
> 赞同：1
> 
> 时间：2012-09-20T01:32:05.720
> 
> 标签：c++, memory, pointers, casting, matrix

好的，所以这个问题有点难以解释，我会尽力而为。

```
void SetData(void* anElement)
{
  myData = anElement;
}
void* GetData()
{
  return myData;
} 
```

基本上我有一个我自己制作的一维矩阵类，我想将其作为值内（anElement）发送，`SetData()` 然后我希望通过调用来获得它`GetData()`

这保存了我的矩阵中第一个元素的地址：

```
SetData(reinterpret_cast<void*>(&myMatrix[0])); 
```

我的矩阵中的元素都是浮点数，所以我想我会尝试像这样丑陋地编码它：

```
for(int i = 0; i < 16; i++)
{
  myMatrix[i] = reinterpret_cast<float*>(aMessage->GetData())+sizeof(float)*i;
} 
```

结果是一些值似乎是正确的，而另一些则只是假的。

屏住呼吸等待您的回应 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:39:50.837

```
myMatrix[i] = reinterpret_cast<float*>(aMessage->GetData())+i; 
```

可能是你想要的。如果将整数添加`i`到 a `float*`，则生成的指针`i * sizeof(float)`与原始指针相距字节。

# javascript - 我无法更改功能范围

> ID：12505030
> 
> 赞同：0
> 
> 时间：2012-09-20T01:34:04.353
> 
> 标签：javascript, jquery, scope

我有一个大型机和一个 iframe：

1.  我将一个函数 beforeIframe 传递给 mainFrame。
2.  mainFrame 将 beforeIframe 的 URL 更改为 changedIFrame。
3.  加载 changedIFrame 后，执行匿名函数。

下面的代码是我想要做的：

## 主框架.jsp

```
function randerLeftMenu(callBack) {
    $("#ifrm").attr("src", "<ui:context />/changedIframe")
    if(callBack) {
        $("#ifrm").load(function() { callBack(); });
    }
} 
```

## beforeIframe.jsp

（我必须操作 DOM 对象。）

`parent.randerLeftMenu(function() {$("#docType").val("aaa"); });`

## 改变Iframe.jsp

```
<input type="text" value="testVal" id="docType" class="input width2"> 
```

我已经尝试了很多事情，但我无法做到这一点。

## 主框架

```
function randerLeftMenu(callBack) {
    if(callBack) {
        $("#ifrm").load(function() {
            with(this.contentWindow) { callBack(); }
            callBack.apply(this);
            eval(callBack());
            callBack.call(this);
            $.proxy(callBack(),this.contentWindow);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:59:46.267

在您的示例中，`$`您在`randerLeftMenu`“beforeIframe.jsp”的调用中包含的内容将始终限于调用它的上下文。只有`this`变量可以动态绑定到不同的范围。您应该能够通过将函数作为字符串传递（或依赖`Function`'s`toString()`方法）并动态评估字符串来解决此问题。

更新以包含工作示例（经过测试的 Firefox 和 IE）：

```
function randerLeftMenu(callBack) {
    $("#ifrm").attr("src", "<ui:context />/changedIframe");
    if(callBack) {
        $("#ifrm").load(function(e) {
            try {
                // This script injection and setTimeout is only necessary
                //  if you don't want to change the iframe source to add jQuery;
                //  otherwise, you only need the eval().
                var script = document.createElement('script');
                script.src = "http://code.jquery.com/jquery-latest.js";
                e.target.contentWindow.document.body.appendChild(script);
                setTimeout(function () {
                    // var evalStr = 'e.target.contentWindow.eval(\'('+callBack.toString().replace(/\n/g, ' ')+')()\')'; // You can pass the function and convert to a string for Firefox, but IE of course doesn't support it, so you will need to pass the function as a string
                    var evalStr = 'e.target.contentWindow.eval(\'('+callBack.replace(/[\r\n]/g, ' ')+')()\')';
                    eval(evalStr);
                }, 500);
            }
            catch(e) {
                alert(e);
            }
        });
    }
} 
```

# c# - c# Textbox KeyEventArgs - 每个字母被检查多次

> ID：12505032
> 
> 赞同：0
> 
> 时间：2012-09-20T01:34:13.100
> 
> 标签：c#, textbox, event-handling, keyevent

我正在检查文本框的键码，并且我希望在用户按下时执行某个任务`Enter`。

它一直运行良好，但我现在尝试执行的任务通常是使用鼠标单击完成的。因此，在该任务（a `FolderBrowserDialog`）的 OK 上，它一直调用对话框控件。

奇怪的是，即使调试器显示我进入 if 分支，因为它显示 e `{KeyData = LButton|MButton|Back}`，但`KeyValue`仍然是 13...

我认为可能是文本框记住了它的最后一个条目......真的吗？

在我的故障排除中，我添加了一个布尔变量，所以我只在它为真时才进入 FolderBrowser，我试图在浏览之后从文本框中添加和删除一个空格，甚至清除文本框......每次尝试似乎都情况更糟。

似乎我处于一个准无限循环中 - 但它会在很多“ok”之后消失，并且逐步通过，我发现对于我在文本框中输入的每个字母，我都会花费 4 到 5 轮校验键。我不明白为什么......或者如何解决它。

我添加了一个“e.Handled”，这对我没有好处。

这是代码：

```
private void txtDir_TextChanged(object sender, EventArgs e)
{
  this.txtDir.KeyUp += new System.Windows.Forms.KeyEventHandler(CheckKeys);
}

private void CheckKeys(object sender, System.Windows.Forms.KeyEventArgs e)
{
    if (e.KeyCode == Keys.Enter)
    {
      if (sender == txtDir && txtDir.Text != "" && System.IO.Directory.Exists(txtDir.Text))
      {
          btnBrowse_Click(this, e);
      }
    }           
} 
```

为什么我要检查这么多次？我可以添加不同的测试吗？难道我做错了什么 ？（对于表单或文本框，没有设置为默认操作...）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:07:01.360

在您的代码中，您在 TextChanged 事件中为 KeyUp 添加了处理程序。因此，当 TextChanged 时，将为 KeyUp 事件添加新的处理程序。这就是为什么要多次检查每个字母的原因。将处理程序放在表单加载事件中。

例如，如果我在 TextBox 中输入了五个字母，那么将为 KeyUp 添加 5 个处理程序。表示 KeyUp 事件处理程序的数量等于调用 TextChanged 事件的次数。

```
this.txtDir.KeyUp += new System.Windows.Forms.KeyEventHandler(CheckKeys); 
```

这为 KeyUp 事件添加了新的处理程序。因此，当这一行执行时，将添加新的处理程序。

通过将 Handler 放在 Form Load 事件中，您可以解决多字母检查问题。

尝试，

```
private void FormLoad(object sender, EventArgs e)
{
         this.txtDir.KeyUp += new System.Windows.Forms.KeyEventHandler(CheckKeys);
}

private void CheckKeys(object sender, System.Windows.Forms.KeyEventArgs e)
{
  if (e.KeyCode == Keys.Enter)
  {
  if (sender == txtDir && txtDir.Text != "" && System.IO.Directory.Exists(txtDir.Text))
  {
      btnBrowse_Click(this, e);
  }
  }           
} 
```

`btnBrowse_Click`还有一件事我理解你的代码，如果在 TextBox 控件中按下 Enter ，你想要执行。但是 Enter 键未使用 KeyUp 事件处理，您需要 KeyDown 事件处理程序来处理`Enter`键。

**代码：**

```
private void FormLoad(object sender, EventArgs e)
{
         this.txtDir.KeyDown += new System.Windows.Forms.KeyEventHandler(CheckKeys);
}

private void CheckKeys(object sender, System.Windows.Forms.KeyEventArgs e)
{
  if (e.KeyCode == Keys.Enter)
  {
  if (sender == txtDir && txtDir.Text != "" && System.IO.Directory.Exists(txtDir.Text))
  {
      btnBrowse_Click(this, e);
  }
  }           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:51:27.990

使用 KeyDown 事件而不是 TextChanged 并在其中写下 e.Handle = True 。在 textBox.KeyDown 事件中写下以下代码：

```
if (e.KeyCode == Keys.Enter)
{
   if (sender == txtDir && txtDir.Text != "" && System.IO.Directory.Exists(txtDir.Text))
   {
       e.Hanlde = true; //it will be close enter keydown handling at this time
       btnBrowse_Click(this, e);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:01:44.450

直接替换`TextChanged`为`KeyDown`，它再次工作！

（顺便说一句，我仍然不明白为什么每个字母都要经过多次测试......）

编辑：现在阅读接受的答案后，我明白了......

# c# - 如何将字符串或任何其他值从另一个 WPF 窗口发送到另一个？

> ID：12505045
> 
> 赞同：-1
> 
> 时间：2012-09-20T01:36:01.293
> 
> 标签：c#, wpf, window

这在 Windows 窗体中更容易。所以我有一个选项卡式程序。我添加了一个重命名选项卡的功能。当他们重命名选项卡时，它会将您定向到新的 WPF 窗口并在那里设置名称，如果他们单击“Enter”，则对话框结果将为真，并且在主窗口中代码为

```
TabRename ren = new TabRename();
ren.txtNewN.SetValue(TextBox.TextProperty, tabI[tabM.SelectedIndex - 1].Header);
if (ren.ShowDialog() == true)
  {
     tabI[tabM.SelectedIndex - 1].Header = ren.txtNewN.Text;
  } 
```

问题在于它返回由该行设置的第一个值

```
ren.txtNewN.SetValue(TextBox.TextProperty, tabI[tabM.SelectedIndex - 1].Header); 
```

如果你通过

```
tabI[tabM.SelectedIndex - 1].Header = ren.txtNewN.Text; 
```

它将返回默认值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:49:40.617

我对您发布的代码有点困惑，但是假设您的`TabRename`代码看起来像这样，我会说它应该可以正常工作。

```
public class TabRename()
{
    public string NewName 
    { 
        get 
        { 
            return txtNewN.Text; 
        } 
        set
        {
            txtNewN.Text = value;
        }
    }
} 
```

那么就这么说吧

```
TabRename ren = new TabRename();
ren.NewName = tabI[tabM.SelectedIndex - 1].Header;
if (ren.ShowDialog())
{
    tabI[tabM.SelectedIndex - 1].Header = ren.NewName;
} 
```

# python - 为什么函数中的 exec 中的导入不起作用？

> ID：12505047
> 
> 赞同：30
> 
> 时间：2012-09-20T01:36:18.093
> 
> 标签：python, function, import, exec

我可以将导入语句放在一个字符串中，执行它，它可以工作（打印一个随机数字）：

```
code = """
import random
def f():
    print random.randint(0,9)
"""

def f():
    pass

exec code
f() 
```

现在，如果我将`exec code`and`f()`放入他们自己的函数中并调用它，它就不起作用了。

```
def test():
    exec code
    f()

test() 
```

它说`NameError: global name 'random' is not defined`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T01:48:51.787

这个怎么样：

```
def test():
    exec (code, globals())
    f() 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-20T01:54:10.733

这里发生的事情是模块 random 被导入为测试中的局部变量。试试这个

```
def test():
    exec code
    print globals()
    print locals()
    f() 
```

将打印

```
{'code': '\nimport random\ndef f():\n    print random.randint(0,9)\n', '__builtins__': <module '__builtin__' (built-in)>, '__package__': None, 'test': <function test at 0x02958BF0>, '__name__': '__main__', '__doc__': None}
{'random': <module 'random' from 'C:\Python27\lib\random.pyc'>, 'f': <function f at 0x0295A070>} 
```

`f`看不到的原因`random`是它`f`不是 --if 内部的嵌套函数`test`：

```
def test():
    import random
    def f():
        print random.randint(0,9)
    f() 
```

它会起作用的。但是，嵌套函数要求在编译外部函数时，外部函数包含内部函数的定义——这是因为您需要设置单元变量来保存两个（外部和内部）函数之间共享的变量。

要随机进入全局命名空间，您只需执行以下操作

```
exec code in globals(),globals() 
```

关键字后面的 exec 参数`in`是执行代码的全局和局部命名空间（因此，在 exec'd 代码中定义的名称被存储在其中）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-20T01:39:37.223

指定你想要全局`random`模块

```
code = """
import random
def f():
  global random
  print random.randint(0,9)
""" 
```

这里的问题是将`random`模块导入函数范围，而不是全局范围。

# oracle - DUAL 的魔力

> ID：12505049
> 
> 赞同：6
> 
> 时间：2012-09-20T01:36:29.977
> 
> 标签：oracle, dual-table

在正常情况下（不使用`SYS`或可能使用它）-

```
SQL> select * from dual;

D
-
X 
```

在不那么正常的条件下（连接为`SYS`）-

```
SQL> alter database close;
Statement processed.

SQL> select * from dual;
ADDR     INDX       INST_ID    D
-------- ---------- ---------- -
00FA6E50          0          1 X 
```

我知道`DUAL`是一张特殊的魔术桌（等等），但是

`DUAL`DB处于待机状态时有什么不同？如果`ADDR`, `INDX`,`INST_ID`处于待机状态，相关性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:44:58.860

几年前，Tom Kyte 很好地回答了这个问题，在这里：

[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:1562813956388](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:1562813956388)

希望有帮助。

# vb.net - Nullables 的隐式接口转换

> ID：12505053
> 
> 赞同：1
> 
> 时间：2012-09-20T01:37:59.433
> 
> 标签：vb.net, interface, nullable, implicit-conversion

使用 VB `Option Strict On`，为什么 a`Nullable(Of T)`不需要显式转换为 T 的接口，而它确实需要一个 to `T`？

IE

```
Dim x As Integer? = 5
Dim y As Integer
Dim z As IComparable

y = x ' Fails to compile with error
      ' "Option Strict On disallows implicit conversions from 'Integer?' to 'Integer'."
z = x ' Succeeds 
```

编辑：正如@SSS 所显示的（有点），部分答案是`Nullable`值是可以为空的，并且可以是`Nothing`，这对于像接口这样的引用来说很好。所以这个转换总是成功的，不像转换成`T`case （当`Nullable`没有值时失败），所以它可以被看作是一个隐式转换。

我的问题现在变成了“如何？”。如何从`Nullable(Of T)`（没有自己的接口）转换为`T`理论上协商的接口？

我知道实现是`box Nullable<T>`，它有效地剥离了`Nullable`包装器，但我在这里确认了这个概念......

（所以我会查看文档，看看他们是否解释了这一点。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:45:42.757

我没看出问题？

```
y = x 
```

可能会失败，因为 x 可以持有 Nothing 的值，但不允许 y 持有 Nothing 的值。IComparable 接口允许将 Integers 与 Nothing 进行比较，因此分配很好。

请注意，如果您交换它：

```
x = y 
```

那么这会成功，因为 y 的每个值都可以分配给 x。

您可以确认 Integers 可以与 Nothing 进行比较，如下所示：

```
MsgBox(5.CompareTo(Nothing)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:42:16.747

从我在 vb.net 中可以看出，该语句`interfaceVariable = nullableVariable`本质上等同于`interfaceVariable = if(nullableVariable.HasValue, CType(nullableVariable.Value, interfaceType), Nothing)`. C# 编译器似乎以同样的方式处理事情：`interfaceVariable = nullableVariable;`变成`interfaceVariable = nullableVariable.HasValue ? (interfaceType)nullableVariable.Value : null;`.

如果类型`nullableValue.Value`实现了接口，那么`nullableVariable.Value`要么执行返回值类型结果，要么抛出异常。由于存在从返回值到接口的保证装箱转换，因此强制转换是合法的。上述代码可能失败的唯一方法是，如果在对`HasValue`and的调用之间写入了可空变量`Value`，`HasValue`则将变量视为非空，但`Value`将其视为空并引发异常。我相信编写`interfaceVariable = nullableVariable`只是测试一次无效性，因此不会发生异常；相反，一个不确定的值会被装箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T03:38:19.253

在没有实际阅读文档的情况下，我将尝试回答：

首先，更高级别的答案是，将 a`Nullable`转换为接口是“安全的”并且不会抛出，因此它在逻辑上是一个`Widening`运算符并且不需要显式（与转换为相比，它`T`何时抛出，所以它应该不是隐含的）。`.HasValue``False``Option Strict On`

然而，从技术上讲，“如何”有点模糊：尽管 的某些行为`Nullable`被编码在可通过反射获得的元数据中，但它的大部分“魔力”隐藏在：

*   `box`on a的运行时行为`Nullable`（因此编译器知道何时将“提升”留给那个），并且
*   Eric Lippert 在他[对 C#](https://stackoverflow.com/a/9013171/256431)及其在 VB.NET 中的等价物的回答中提出的其他观点。

看起来[S. Somasegar 的博客文章](http://blogs.msdn.com/b/somasegar/archive/2005/08/11/450640.aspx "空值不再丢失")宣布更改以`Nullable`支持 VS2k5 的后期 beta 版本也与此处相关。

# c# - 在未绑定的 DataGridView 中看不到行

> ID：12505054
> 
> 赞同：2
> 
> 时间：2012-09-20T01:38:09.470
> 
> 标签：c#, .net, datagridview

我正在尝试将未绑定的 DataGridView 传递给表单，并且无法显示行，即使 Rows.Count 值是正确的。我觉得我错过了一些明显的东西。

```
// method code
// Create an DataGridView
DataGridView dgv = new DataGridView();
dgv.Columns.Add("Name","Name");
dgv.Columns.Add("Comments", "Comments");

// Add rows to datagridview
int n = dgv.Rows.Add();
dgv.Rows[n].Cells["Name"].Value = "a test name";
dgv.Rows[n].Cells["Comments"].Value = "some comment";

// Pass DataGridView to form
test_PassingDataGridView f = new test_PassingDataGridView();
f.DataGridTest = dgv;
f.ShowDialog();

// test_PassingDataGridView form code
DataGridView _datagridtest;
public DataGridView DataGridTest
{
    get { return _datagridtest; }
    set { _datagridtest = value; }
}

public test_PassingDataGridView()
{
    InitializeComponent();
}

private void test_PassingDataGridView_Load(object sender, EventArgs e)
{
    this.dataGridView1 = _datagridtest; // _datagridtest.Rows.Count is correct at this point
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:57:12.570

不要将 传递`DataGridView`给表单。将 a`DataGridView`放在设计器中的表单上，然后将 a 传递`DataTable`给表单并将表单绑定`DataTable`到`DataGridView`.

通过按原样创建，`DataGridView`您会丢失许多通常在设计器中设置的属性。您可以通过设置属性来使其工作，特别是位置和大小，但即便如此，像这样传递控件也是一种非常糟糕的形式。而是传递数据。

# mysql - LEFT OUTER JOIN 在 MySql 语法中仅表示为 LEFT JOIN？

> ID：12505056
> 
> 赞同：5
> 
> 时间：2012-09-20T01:38:24.613
> 
> 标签：mysql, sql, syntax, left-join

是否`LEFT OUTER JOIN`仅以`LEFT JOIN`MySQL 语法表示？或者在 MySQL 中有不同的东西`LEFT OUTER JOIN`？`LEFT JOIN`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T01:39:45.370

基本上它们是相同的。

`LEFT`并且`RIGHT`是`outer`类型加入。关键字`OUTER`是可选的，在这种情况下，这意味着无论您是否指定它都没有区别。

附加信息，

在顶层，主要有 3 种连接类型：

*   内
*   外（*左*，*右*）
*   叉

# php - 使用 PHP 将 HTML 转换为 PDF

> ID：12505062
> 
> 赞同：0
> 
> 时间：2012-09-20T01:39:08.123
> 
> 标签：php, cakephp

假设我有如下 PHP 代码：

```
<html>
<head>
<title>Convert HTML to PDF</title>
</head>
<body>
<form name="frm" method=post>
 <div class="HoldPage">
 <div class="page">
 <h1 style="text-align:center; font-size:18px;">COMPORTEMENT/COMPETENCES</h1>
 <p style="text-align:center;">Déterminer et évaluer les seuls critères nécessaires à la tenue du poste</p>
 <p class="text_P">COMPETENCES OPERATIONNELLES</p>
 <hr class='dashes'>
 <ul type="disc">
    <li><strong>CONNAISSANCE ET EXPERIENCE (O/E/AM/Cadres)</strong></li>
 </ul>
<input type="submit" name="convert2PDF" value="GeneratePDF">
<?php
    if(isset($_POST['convert2PDF'])){
        header("Content-type: application/vnd.ms-word");
        header("Content-Disposition: attachment;Filename=html2pdf.pdf");
    }
?>
</form>
</body>
</html> 
```

**我需要：**

当我单击按钮提交时，它将生成 HTML 到 PDF 文件。

**问题：**

实际上，它不起作用。我该如何解决。有没有比这更容易的方法？请帮助我。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:18:58.103

将 tcPDF 或 dompdf 类型的插件/扩展与 cakePHP 一起使用

查看以下链接 [http://bakery.cakephp.org/articles/kaileo/2010/06/08/creating-pdf-files-with-cakephp-and-tcpdf](http://bakery.cakephp.org/articles/kalileo/2010/06/08/creating-pdf-files-with-cakephp-and-tcpdf) http://www.juliaholland.org/2009/01 /23/cakephp-and-tcpdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:15:33.917

您并没有真正转换任何东西，您所做的只是更改文件扩展名和 mime 类型。结帐 dompdf，它是 php 的一个类，它可以满足您的需求。

# asp.net - 无法在 vb.net 中使用 sql 显示当前用户详细信息

> ID：12505064
> 
> 赞同：0
> 
> 时间：2012-09-20T01:39:27.250
> 
> 标签：asp.net, sql, sql-server, vb.net

我使用了一个 sql 语句，我想在其中显示当前登录用户的详细信息。但是当我运行这个命令时

```
ConnectionString = "<%$ ConnectionStrings:Details %>" 

SelectCommand = "SELECT *  FROM member WHERE username = 'User.Identity.Name'" 
```

它没有显示任何细节，但是当我运行时

```
SelectCommand = "SELECT *  FROM member WHERE username = 'david'" 
```

用户名 david 存在于数据库中，并在 Web 表单中仅显示 david 的详细信息。我什至`Response.Write`在`User.Identity.Name`and 该语句上显示了登录页面的当前用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:47:07.233

问题是您将实际`User.Identity.Name`作为字符串而不是其值传递。

```
SelectCommand = String.Format("SELECT *  FROM member WHERE username = '{0}'", User.Identity.Name) 
```

但更好（和更安全）的做法是

```
SelectCommand = "SELECT *  FROM member WHERE username = @UserName"
SelectCommand.Parameters.AddWithValue("@UserName", User.Identity.Name) 
```

这将防止 SQL 注入。

**编辑：** 由于您在页面中定义它，您可以使用以下模板：

```
<asp:SqlDataSource runat="server" ID="SqlDataSource1" ConnectionString="<%$ ConnectionStrings:Details %>" SelectCommand="SELECT * FROM members WHERE ([username] = @UserName)">
    <SelectParameters>
        <asp:Parameter Name="UserName" Type="String" DefaultValue="" />
    </SelectParameters>
</asp:SqlDataSource> 
```

`User.Identity.Name`然后在服务器端设置默认值：

```
SqlDataSource1.SelectParameters.Item(0).DefaultValue = User.Identity.Name 
```

更简单的方法是使用`Configure Data Source`向导，在设计视图中单击 SqlDataSource 对象旁边的右箭头即可使用该向导。

# php - PHP按位&运算符的问题

> ID：12505070
> 
> 赞同：0
> 
> 时间：2012-09-20T01:39:50.620
> 
> 标签：php, bit-manipulation

好的，所以我有这个代码：

```
<?php
$p = 65536;
$p2 = 33554432;
if($p & $p2){
echo "True";
}else{
echo "False";
}
?> 
```

好吧，如果我将数字放在脚本中，则输出为“False”，但是当我使用 $_GET、$_POST 等时，即使我将数字放在引号中，它也会返回“True”。

有什么问题？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T01:45:11.650

`$_GET`和的元素`$_POST`是字符串。如果您阅读[文档](http://php.net/manual/en/language.operators.bitwise.php)，它将每个字符转换为其序号位置，使用按位运算符命中它们，然后转换回字符。

您应该首先调用[`intval()`](http://php.net/intval)这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:44:51.110

您需要将它们转换为 int，或者您正在`&`使用两个字符串。

```
$p = (int)$_GET['p'];
$p2 = (int)$_GET['p2'];
if ($p & $p2) {
  // ... 
```

# ruby-on-rails - 在 Rails 中渲染动作时没有显示警报

> ID：12505073
> 
> 赞同：2
> 
> 时间：2012-09-20T01:40:33.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, ruby-on-rails-3.2, alert

我编写了以下代码来显示`show.html.erb`带有警报闪烁消息的视图：

```
render action: 'show', alert: 'Please fix mistakes outlined in red' 
```

但是，警报不会出现。通知出现了。我认为我`render action: 'show'`上面的调用是错误的，因为我只是凭直觉写的。这是我的 html.erb 代码：

```
<%if notice%><p id="notice"><%= notice %></p><%end%>
<%if alert%><p id="alert"><%= alert %></p><%end%> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T01:54:18.633

处理闪烁的更标准方法是在视图布局中编写以下内容

```
<% flash.each do |key, value| %>
    <p class="alert alert-<%= key %>"><%= value %></p>
<% end %> 
```

并在您的控制器中写入以下内容

```
flash[:alert] = 'Please fix mistakes outlined in red'
render 'show' 
```

# php - 如何在具有相同命名空间的另一个类中使用一个类？

> ID：12505075
> 
> 赞同：0
> 
> 时间：2012-09-20T01:41:27.507
> 
> 标签：php, class, namespaces, autoload, spl

我在我的项目中使用 spl_autoload，但是当我尝试以下代码时，它给了我这个错误：

> 致命错误：找不到类“Router\Route”

//路由器文件

```
<?php
namespace Router;
class Router{
function foo(){
new Route();
}
?> 
```

//路由文件

```
<?php
namespace Router;
class Route{}
?> 
```

有什么帮助吗？我对命名空间有点陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:30:00.727

您可以使用来自另一个命名空间的类，但不能有两个同名的命名空间（这不符合这一点）。

```
// In one file.
namespace Router;
class Router{
  function foo(){
    use Route as r;
    new r\Route();
  }
}

// In another file.
namespace Route;
class Route{} 
```

# c++ - Take two hex characters from file and store as a char with associated hex value

> ID：12505077
> 
> 赞同：0
> 
> 时间：2012-09-20T01:41:59.853
> 
> 标签：c++, stream, hex

I'd like to take the next two hex characters from a stream and store them as the associated associated hex->decimal numeric value in a char.

So if an input file contains `2a3123`, I'd like to grab `2a`, and store the numeric value (decimal 42) in a char.

I've tried

```
char c;
instream >> std::setw(2) >> std::hex >> c; 
```

but this gives me garbage (if I replace `c` with an `int`, I get the maximum value for `signed int`).

Any help would be greatly appreciated! Thanks!

edit: I should note that the characters are guaranteed to be within the proper range for chars and that the file is valid hexadecimal.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:23:45.517

OK I think dealing with ASCII decoding is a bad idea at all and does not really answer the question.

I think your code does not work because `setw()` or `istream::width()` works only when you read to `std::string` or `char*`. I guess it from [here](http://www.cplusplus.com/reference/iostream/istream/operator%3E%3E/)

How ever you can use the goodness of standard c++ iostream converters. I came up with idea that uses `stringstream` class and `string` as buffer. The thing is to read `n` chars into buffer and then use `stringstream` as a converter facility.

I am not sure if this is the most optimal version. Probably not.

Code:

```
#include <iostream>
#include <sstream>

int main(void){
    int c;
    std::string buff;
    std::stringstream ss_buff;
    std::cin.width(2);
    std::cin >> buff;
    ss_buff << buff;
    ss_buff >> std::hex >> c;
    std::cout << "read val: " << c << '\n';
} 
```

Result:

```
luk32@genaker:~/projects/tmp$ ./a.out 
0a10
read val: 10
luk32@genaker:~/projects/tmp$ ./a.out 
10a2
read val: 16
luk32@genaker:~/projects/tmp$ ./a.out 
bv00   
read val: 11
luk32@genaker:~/projects/tmp$ ./a.out 
bc01
read val: 188
luk32@genaker:~/projects/tmp$ ./a.out
01bc
read val: 1 
```

And as you can see not very error resistant. Nonetheless, works for the given conditions, can be expanded into a loop and most importantly uses the `iostream` converting facilities so no ASCII magic from your side. C/ASCII would probably be way faster though.

PS. Improved version. Uses simple `char[2]` buffer and uses non-formatted write/read to move data thorough the buffer (`get`/`write` as opposed to `operator<<`/`operator>>`). The rationale is pretty simple. We do not need any fanciness to move 2 bytes of data. We ,however, use formatted extractor to make the conversion. I made it a loop version for the convenience. It was not super simple though. It took me good 40 minutes of fooling around to figure out *very important lines*. With out them the extraction works for 1st 2 characters.

```
#include <iostream>
#include <sstream>

int main(void){
    int c;
    char* buff = new char[3];
    std::stringstream ss_buff;
    std::cout << "read vals: ";
    std::string tmp;
    while( std::cin.get(buff, 3).gcount() == 2 ){
       std::cout << '(' << buff << ") ";
       ss_buff.seekp(0); //VERY important lines
       ss_buff.seekg(0); //VERY important lines
       ss_buff.write(buff, 2);
       if( ss_buff.fail() ){ std::cout << "error\n"; break;}
       std::cout << ss_buff.str() << ' ';
       ss_buff >> std::hex >> c;
       std::cout << c << '\n';
    }
    std::cout << '\n';
    delete [] buff;
} 
```

Sample output:

```
luk32@genaker:~/projects/tmp$ ./a.out
read vals: 0aabffc
(0a) 0a 10
(ab) ab 171
(ff) ff 255 
```

Please note, the `c` was not read as intended.

I found everything needed here [http://www.cplusplus.com/reference/iostream/](http://www.cplusplus.com/reference/iostream/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T01:56:08.030

You can cast a Char to an int and the int will hold the ascii value of the char. For example, '0' will be 48, '5' will be 53\. The letters occur higher up so 'a' will be cast to 97, 'b' to 98 etc. So knowing this you can take the int value and subtract 48, if the result is greater than 9, subtract another 39\. Then char 0 will have been turned to int 0, char 1 to int 1 all the way up to char a being set to int 10, char b to int 11 etc.

Next you will need to multiply the value of the first by 16 and add it to the second to account for the bit shift. Using your example of 2a.

char 2 casts to int 50\. Subtract 48 and get 2\. Multiply by 16 and get 32. char a casts to int 97\. Subtract 48 and get 49, this is higher than 9 so subtract another 39 and get 10\. Add this to the end result of the last one (32) and you get 42.

Here is the code:

```
int HexToInt(char hi, char low)
{
    int retVal = 0;
    int hiBits = (int)hi;
    int loBits = (int)low;
    retVal = Convert(hiBits) * 16 + Convert(loBits);
    return retVal;
}

int Convert(int in)
{
    int retVal = in - 48;
    //If it was not a digit
    if(retVal > 10)
        retVal = retVal - 7;
    //if it was not an upper case hex didgit
    if(retVal > 15)
        retVal = retVal - 32;
    return retVal;  
} 
```

The first function can actually be written as one line thus:

```
 int HexToInt(char hi, char low)
 {
    return Convert((int)hi) * 16 + Convert((int)low);       
 } 
```

NOTE: This only accounts for lower case letters and only works on systems that uses ASCII, i.e. Not IBM ebcdic based systems.

# sql - 编写高级 SQL Select

> ID：12505079
> 
> 赞同：2
> 
> 时间：2012-09-20T01:42:18.607
> 
> 标签：sql, sql-server, tsql, pivot

物品表：

```
|   Item    |   Qnty    |   ProdSched   |
|    a      |    1      |       1       |
|    b      |    2      |       1       |
|    c      |    3      |       1       |
|    a      |    4      |       2       |
|    b      |    5      |       2       |
|    c      |    6      |       2       | 
```

有没有办法可以使用 SQL 像这样输出它`SELECT`？

```
|   Item    |   ProdSched(1)(Qnty)  |   ProdSched(2)(Qnty)  |
|    a      |           1           |       4               |
|    b      |           2           |       5               |
|    c      |           3           |       6               | 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T01:49:23.107

你可以用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)这个。如果您有已知数量的值要转换，那么您可以通过静态枢轴对这些值进行硬编码：

```
select item, [1] as ProdSched_1, [2] as ProdSched_2
from 
(
  select item, qty, prodsched
  from yourtable
) x
pivot
(
  max(qty)
  for prodsched in ([1], [2])
) p 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3a71d/2)

如果列数未知，则可以使用动态数据透视：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(prodsched) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT item,' + @cols + ' from 
             (
              select item, qty, prodsched
              from yourtable
            ) x
            pivot 
            (
                max(qty)
                for prodsched in (' + @cols + ')
            ) p '

execute(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/3a71d/3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-20T01:45:53.660

```
SELECT Item, 
  [ProdSched(1)(Qnty)] = MAX(CASE WHEN ProdSched = 1 THEN Qnty END),
  [ProdSched(2)(Qnty)] = MAX(CASE WHEN ProdSched = 2 THEN Qnty END)
FROM dbo.tablename
GROUP BY Item
ORDER BY Item; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T01:52:21.097

让我们分两个阶段来解决这个问题。首先，虽然这不是您想要的确切格式，但您可以获得您要求的数据，如下所示：

```
Select item, ProdSched, max(qty)
  from Item1
 group by item,ProdSched 
```

现在，要获得所需格式的数据，实现它的一种方法是使用 PIVOT 表。您可以在 SQL Server 中制作数据透视表，如下所示：

```
Select item, [1] as ProdSched1, [2] as ProdSched2
from ( Select Item, Qty, ProdSched
         from item1 ) x
Pivot ( Max(qty) for ProdSched in ([1],[2]))  y 
```

# iphone - 如何创建一个类以将与运动相关的效果应用于视图？

> ID：12505082
> 
> 赞同：2
> 
> 时间：2012-09-20T01:42:30.203
> 
> 标签：iphone, xcode, subclassing, motion, cmmotionmanager

相对新手，抱歉有点新手问题。我已经尝试寻找答案。

我编写了一种方法，根据用户拿着 iPhone 的角度，将视觉动画效果应用于视图控制器上的 UIImageView。基本上我使用 CMMotionManager 来提供一个角度，然后使用该角度通过更改其 bounds.center 来移动 UIImageView。当一切都卡在视图控制器中时效果很好，但我希望它更清洁和可重用。

所以我对 UIImageView 进行了子类化，向它添加了一个运动管理器、一个运动管理器块处理程序和操作队列，以及一些将设备角度映射到与 UIImageView 中的偏移相对应的数字的方法。我创建了一个自定义的 init 方法，它接受各种参数来控制视觉效果。然后就像将此类的实例作为子视图 (addSubview:) 添加到我的控制器的视图中一样简单。它甚至使用后台线程和自动释放池。滑溜溜的，我想。

虽然它看起来在视觉上可以工作，但出于多种原因（包括 Instruments 显示出不断增加的内存消耗），我认为这不是我应该插入 UIImageView 子类的内容。有没有更好的方法来构建这个？例如，与 UIViewController 不同，UIImageView 的子类没有 viewDidLoad/viewDidUnload/...appear/etc。这将让我开始和停止运动管理器更新；我应该能够为整个应用程序创建一个单一的运动管理器，而不是在我的图像效果类中实例化它。

我确实意识到每个应用程序必须只有一个 CMMotionManager 实例，并且已经实现了[Jonathan 的](http://jonathanhui.com/ios-motion)方法，但是后来我发现自己需要从我漂亮的类中访问 appDelegate ，而从视图控制器中更容易做到这一点，而且它只是从那里螺旋向下。

我是要求太多，还是只是不理解一个非常简单的概念？

# javascript - 简单的 JavaScript 不起作用？

> ID：12505086
> 
> 赞同：0
> 
> 时间：2012-09-20T01:43:02.120
> 
> 标签：javascript, html

为什么这个简单的 JavaScript 验证不起作用？第一个条件通过但第二个条件没有通过？？

```
 <!DOCTYPE html>
    <html>
    <head>
    <script type="text/javascript">     
        function process(){
            var val = document.getElementById('usrIN').value;
            var uppVer = val.toUpperCase();
            if(val == "" || val == NULL){
                alert ("Must fill in input");
            }else if (val !== uppVer){
                alert("Must be upper case");
            }
        }
    </script>
</head>
<body>
<form type="post" id="frmMain" />
    <p>Insert name in upper case <input type="text" maxlength="25" id="usrIN"/></p>
    <a href="#" onClick="process();"> <img src="button.jpeg"  ></a>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:45:18.093

在 JavaScript 中，`null`是小写的。此外，您的使用`== ""`还将涵盖 a `null`or`undefined`变量。此外，您可能并不是要执行，如果不依赖前者失败而后者执行`else if()`，您可能只想执行第二次。`if`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T01:45:44.313

`NULL`未在 javascript 中定义 - 使用`null`或`undefined`.

看这里：

[http://jsfiddle.net/EZqhN/](http://jsfiddle.net/EZqhN/)

# jquery-mobile - jQuery Mobile：初次访问时页面未完全加载

> ID：12505088
> 
> 赞同：1
> 
> 时间：2012-09-20T01:43:41.100
> 
> 标签：jquery-mobile

在键入此内容之前，我查看了所有出现的类似问题，但我找不到我的问题的答案。

我正在使用 jQuery Mobile (1.1) 和 jQuery (1.7.1) 开发一个小型门户。因此，我将所有内容都放在一页上，并使用 data-role="page" 来处理流程转换。

目前的流程是这样的：

1.  用户访问主 URL
2.  用户点击一个动作（“做这个”或“做那个”）
3.  当用户单击该操作时（两者都只是带有指向另一个具有 data-role="button" 的文件的 href 的标签），它会将他们带到该页面就好了。

但是，当第一次访问页面时（通过手动输入 URL 或单击操作按钮/链接），表单是空的，单击提交按钮什么也不做。刷新页面后，尽管一切正常。

因此，例如有人点击操作链接 #1（“付款”）：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> 
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<title>Credit Card Payments</title>
<style>
    .ui-dialog .ui-header a[data-icon=delete] { display: none; }
</style>
<script>
$(document).bind("mobileinit", function(){
});
</script>
</head>
<body>
    <div data-role="dialog" id="popup">
        <div data-role="header" data-theme="b" data-content-theme="b">
            <h1>Destination</h1>
        </div>
        <div data-role="content" data-theme="b" data-content-theme="b">
            Please choose what you would like to do:
            <a href="payment.php" data-role="button">Make A Payment</a>
            <a href="create.php" data-role="button">Add Credit Card To Account</a>
        </div>
    </div>
</body>
</html> 
```

它将他们带到“payment.php”并显示页面ID“step1”，这是一个简单的登录表单：

```
<div data-role="page" id="step1">
    <div data-role="header">
        <h2>Log In</h2>
    </div>
    <form id="step1frm">
        <div data-role="fieldcontain">
            <label for="mail">Blesta e-mail: </label>
            <input type="text" name="mail" id="mail" />
        </div>
        <div data-role="fieldcontain">
            <label for="pw">Blesta password: </label>
            <input type="password" name="pw" id="pw" />
        </div>
            <input type="button" id="step1frmsub" value="Log In" />
    </form>
</div> 
```

登录表单页面也有很多 jQM 的东西，但是在我注释掉所有代码之后，它并没有改变任何东西，所以这不是原因。我还通过 W3.org 验证了 HTML，它返回有效。

在我为 Chrome 的 Inspector 拍摄的屏幕截图中可以找到对正在发生的事情的更好表示：

**首次访问**-[点击“付款”后](http://i.imgur.com/Hx90N.jpg)

**刷新页面**后-[刷新“付款”登录后](http://i.imgur.com/9AC44.jpg)

**编辑**- 作为一个小的跟进，我注意到加载时在 div 页面上设置了“data-external-page="true"”，然后在刷新时它不再存在。根据我对所读内容的理解，这是因为它基本上来自一个对话框，但我不确定是否有办法禁用它。

**答案**- 好吧，在最初认为这不是我要找的东西之后，解决方案实际上是将其添加到我的链接中：

```
rel="external" 
```

所以它们看起来像这样：

```
<a href="payment.php" data-role="button" rel="external">Make A Payment</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:16:19.617

好吧，在最初认为这不是我想要的东西之后，解决方案实际上是将其添加到我的链接中：

```
rel="external" 
```

所以它们看起来像这样：

```
<a href="payment.php" data-role="button" rel="external">Make A Payment</a> 
```

# c# - Usercontrol如何使用Jquery和Json访问Webmethod

> ID：12505091
> 
> 赞同：0
> 
> 时间：2012-09-20T01:43:42.537
> 
> 标签：c#, jquery, asp.net, json, web-services

```
$(document).ready(function () {
    //hide the branch
    var noteServiceUrl = "../../../AJAX/Common/BankingServiceAjax.svc/";
    var proxyNotes = new serviceProxy(noteServiceUrl);
    OnGetNotes();
    function OnGetNotes() {

        proxyNotes.invoke("SearchBranchesByBankID",
                            { "request":
                                    {
                                        "BankID": 1

                                    }
                            }, OnGetNotesComplete, OnError);

    }

    function OnGetNotesComplete(result) {
        var obj = jQuery.parseJSON(result);
        var notes = obj.Notes;
    } 
```

我无法通过用户控件访问 BankingServiceAjax.svc，但如果在页面中执行此操作，我可以访问该服务。URL 是正确的我认为我只缺少一个可以访问我的用户控件中的 BankingService 的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:08:33.017

它将在类似于此的 AJAX 调用中完成

```
 $.ajax(
                {
                    type: "GET",
                    url: 'http://fastmotorcycleservice.cloudapp.net/FastMotorcycleListService.svc/list/Bruno',
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) { 
```

Google 也不错 -[如何使用 jQuery 使用 svc Webservice](http://blogs.msdn.com/b/brunoterkaly/archive/2011/11/17/how-to-consume-restful-services-using-jquery-and-or-javascript.aspx)

# regex - 我的 RewriteRule 中的正则表达式可以，但是 .htaccess 不起作用

> ID：12505096
> 
> 赞同：0
> 
> 时间：2012-09-20T01:44:30.320
> 
> 标签：regex, apache, .htaccess

我在让我的 .htaccess ReWrite 在我的 apache Web 服务器上工作时遇到了很多麻烦。我已经阅读了几个教程并测试了我与 Grep 匹配的正则表达式。

这是代码：

```
 RewriteRule \?action=viewArticle&articleId=([0-9]*)&categoryId=([0-9])$ essays/$1 [R=301,L] 
```

这是我要匹配的网址：

```
http://mysite.com/?action=viewArticle&articleId=15&categoryId=1 
```

并更改为

```
http://mysite.com/essays/15 
```

更新：解决方案！Jon提供了非常[出色的教程](https://stackoverflow.com/questions/11709634/convert-original-url-to-friendly-url/11711948#11711948)。我放入`<base href="/">`头文件以使 css 正常工作非常重要。

最终重写看起来像这样：

```
RewriteCond %{THE_REQUEST} /?action=viewArticle&articleId=([0-9]*)&categoryId=([0-9])
RewriteRule ^$ /essays/%1? [R=301,L,NE]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^essays/([0-9]+) /?action=viewArticle&articleId=$1&categoryId=([0-9]) [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:07:54.357

您无法匹配 a 中的主机或查询字符串`RewriteRule`，您需要匹配指令中的`%{HTTP_HOST}`and`%{QUERY_STRING}`变量：`RewriteCond`

```
RewriteCond %{HTTP_HOST} mysite\.com$ [NC]
RewriteCond %{QUERY_STRING} ^action=viewArticle&articleId=([0-9]*)&categoryId=([0-9])$
RewriteRule ^$ /essays/%1? [L,R=301] 
```

当有人去到时，这会重定向浏览器（更改地址栏中的 URL `http://mysite.com/?action=viewArticle&articleId=15&categoryId=1`）`http://mysite.com/essays/15`

`%{HTTP_HOST}`如果您的 htaccess 文件仅服务于单个主机，则不需要该条件。

# c# - Raven DB：这个 multimap/reduce 索引有什么问题？

> ID：12505097
> 
> 赞同：2
> 
> 时间：2012-09-20T01:44:40.413
> 
> 标签：c#, mapreduce, ravendb

我上次使用的 Sum 和 Max 调用和使用计数是错误的。它们始终是存储在当前设置为 0 的第二个映射值中的值。我可以将其设为 -100，这就是 reduce 结果。我注意到有人说你应该把它做成一个数组，但我不明白这有什么帮助。我有一个使用 map/reduce 的对象的 linq 表达式，假设这两个映射联合在一起，它可以正常工作。

这是数据=> [https://gist.github.com/940ccca1b0f8917e9eaf](https://gist.github.com/940ccca1b0f8917e9eaf)

我想支持这样的查询

```
 var stats = Session.Query<MultiMapApiKeyStats.ApiKeyStats, MultiMapApiKeyStats>()
            .Customize(x => x.WaitForNonStaleResultsAsOfNow())
            .Where(x => x.AccountId == Account.Id)
            .OrderBy(x => x.Key).ToList(); 
```

并建立一个像 ![桌子](../Images/386797017486304b340bfabd11f3f97c.png)

```
 public MultiMapApiKeyStats()
        {
            AddMap<KeyUsageBase>(uses => from use in uses
                                         select new
                                         {
                                             AccountId = use.AccountId,
                                             ApiKeyId = use.ApiKeyId,
                                             Key = (string)null,
                                             UsageCount = 1,
                                             LastUsed = use.LastUsedTicks,
                                             Pattern = (string)null,
                                             Status = ApiKey.KeyStatus.None,
                                             Type = ApiKey.ApplicationType.None
                                         });
            AddMap<ApiKey>(keys => from key in keys
                                   select new
                                          {
                                              AccountId = key.AccountId,
                                              ApiKeyId = key.Id,
                                              Key = key.Key,
                                              UsageCount = 0,
                                              LastUsed = 0,
                                              Pattern = key.Pattern,
                                              Status = key.ApiKeyStatus,
                                              Type = key.Type
                                          });

            Reduce = results => from result in results
                                group result by result.ApiKeyId
                                    into g
                                    select new
                                           {
                                           AccountId = g.Select(x => x.AccountId).FirstOrDefault(),
                                           ApiKeyId = g.Key,
                                           Key = g.Select(x => x.Key).FirstOrDefault(x => x != null),
                                           UsageCount = g.Sum(x => x.UsageCount),
                                           LastUsed = g.Max(x => x.LastUsed),
                                           Pattern = g.Select(x => x.Pattern).FirstOrDefault(),
                                           Status = g.Select(x => x.Status).FirstOrDefault(),
                                           Type = g.Select(x => x.Type).FirstOrDefault()
                                           }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:26:39.310

索引错误`sequence contains no matching elements`是调用`First`空集合的结果，这就是您应该使用`FirstOrDefault`. 此外，在 map 和 reduce 声明中引用您自己的类会导致错误，因为 RavenDB 无法在索引时解析这些类型。

# javascript - javascript中数组的嵌套层次结构

> ID：12505101
> 
> 赞同：0
> 
> 时间：2012-09-20T01:45:00.433
> 
> 标签：javascript, arrays, multidimensional-array, hierarchical-data

如何在 javascript 中创建一组动态数组，以形成数组的层次结构？我希望它能够动态工作。如何创建一个根数组，它将一直存在，并且每个动态创建的新数组都将嵌套在前一个数组中以形成层次结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T01:57:06.133

...您知道这些阵列中发生了什么，或者知道它们有多大或多深吗？

您是在谈论仅索引数组还是具有命名属性的对象？

如果你想要的只是数组：

```
var rootArr = [],
    rootArr[0] = [[],[]],
    rootArr[1] = [[ [],[],[ [] ], ]]; 
```

所以现在你有嵌套的数组，如：

```
[
    [
        [],
        []
    ],
    [
        [
            [],
            [],
            [
                []
            ]
        ]
    ]
]; 
```

正如您可能看到的，您可以愉快地继续构建越来越深的数组。如果您想动态执行此操作，则可以在`for`循环中创建它们，如果您知道您的值，或者递归函数，如果您有检查...

但请记住，访问其中的数据会很糟糕。

要获得最深的阵列，您必须这样做：

```
rootArr[1][0][2][0]; //just to access the array
                     //then you'd need the index of whatever was inside... 
```

# grails - Grails 将不同级别的日志写入文件

> ID：12505104
> 
> 赞同：1
> 
> 时间：2012-09-20T01:45:10.307
> 
> 标签：grails, logging

我在登录 Grails 时遇到问题。如何将日志写入文件？另外我希望不同级别的日志进入不同的文件？

还有生产和开发日志的设置吗？例如，如果我在开发中运行项目，没有 catalina.out，那么日志文件会去哪里？

**例子：**

```
log.info "I am working fine look: ..." 
```

我想进入的信息让我们说 info.log

```
log.error "Bad coding results in: ..." 
```

错误我想进入标准 Tomcat 日志：catalina.out

```
log.debug "Debugging is a pain: ..."
log.fatal "Just died because..." 
```

其余的日志级别我想进入fine.log

非常感谢你。

PS：示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T09:40:57.933

它（相对）简单。您需要首先设置日志级别，然后激活它，然后写入它。所以标准是日志级别错误是打开的，所以使用 log.error "" 编写的任何内容都会向标准输出发送消息（如果您没有更改附加程序的行为）

如果您希望应用程序显示错误、警告和信息但不调试，以下是更改。

在 log4j 下的 Config.groovy 中，让我们更改附加程序以告诉我们谁在说话（有点像其他人的设置

```
appenders {
    console name:'stdout', layout:pattern(conversionPattern: '%d{[dd.MM.yy HH:mm:ss.SSS]} %-5p %c %x - %m%n')
} 
```

然后我们将应用程序的日志级别更改为“信息”（因此将为我们的应用程序编写错误、警告和信息），在错误之前的附加程序之后添加该行

```
info 'grails.app' 
```

最后，让我们尝试一些代码，所以在任何控制器或类似的控制器中，添加以下三行

```
 log.debug "First piggy wrote to Debug"
 log.info "Second piggy wrote to Info"
 log.error "And the third piggy wrote to Error" 
```

我的控制台说：

```
[22.10.13 10:37:43.446] INFO  grails.app.controllers.crmapper.CrMapperController  - Second piggy wrote to Info
[22.10.13 10:37:43.446] ERROR grails.app.controllers.crmapper.CrMapperController  - And the third piggy wrote to Error 
```

# ios - 在 iOS 中触摸时更改按钮的字体颜色

> ID：12505114
> 
> 赞同：2
> 
> 时间：2012-09-20T01:45:48.400
> 
> 标签：ios, xcode, ios5

我是 iOS 的新手，只有 Action Script 3.0 作为编程背景。到目前为止，Objective C 对我来说看起来非常陌生。我正在使用最新版本的 Xcode 并试图通过小步学习，对于像我这样的新手来说，太多的教程开始的水平太高了。

我试图让标签或按钮在触摸时更改字体颜色，并在再次触摸时恢复其原始颜色。我知道这可能很简单，但我需要从某个地方开始。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T09:02:48.660

`UIButton`触摸时更改颜色属性非常容易。

```
-(IBAction)changeColor:(id)sender
{
UIButton *btn = (UIButton *)sender; 

if(btn.enabled)
{
    btn.enabled=NO;
    btn.backgroundColor=[UIColor blueColor];    

}
else
{
    btn.enabled=YES;
    btn.backgroundColor=[UIColor greenColor];  
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T12:44:04.750

```
 @interface ViewController ()
{
BOOL muteIsSelected;
} 
```

@结尾

```
- (IBAction)yourButton:(id)sender {
if(muteIsSelected == false)
{
   yourButton.backgroundColor = [UIColor redColor];
    muteIsSelected = true;
}
else if (muteIsSelected == true)
{
     yourButton.backgroundColor = [UIColor blackColor];
    muteIsSelected = false;
}
} 
```

# java - 为什么会跳秒？？倒计时器

> ID：12505117
> 
> 赞同：2
> 
> 时间：2012-09-20T01:45:59.933
> 
> 标签：java, android, countdown, seconds

如果我的计数器超过 30 秒，它通常会在这里和那里跳过一秒钟。我让它倒计时，显示显示。但它选择跳过随机数。它每次跳过的数字都是相同的数字。如果我更改计时器的长度（用户这样做），它会更改跳过的数字。我发布了我的代码；

免责声明：这是我的第一个（有用的）应用程序，所以它可能真的很糟糕或者结构不好。没关系，让我知道。我可以接受批评。但是看一看，如果有人知道为什么会丢失某些秒，请竖起大拇指。谢谢！

```
package com.ApphHose.runnersTimer;

//import a bunch of stuff

public class MainActivity extends Activity {
TextView text, lapNumber;
Button start;
boolean workrest, vibe;
int letsRun, lapCounter;
long length;
CountDownTimer timer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    text = (TextView) findViewById(R.id.tv);
    lapNumber = (TextView) findViewById(R.id.tvLap);
    start = (Button) findViewById(R.id.bStart);
    letsRun = 2;
    lapCounter = 1;
    workrest = true;
    vibe = true;

    start.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);

    start.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            start.setText("Stop");
            start.getBackground().setColorFilter(0xFFFF0000, PorterDuff.Mode.MULTIPLY);
            lapNumber.setText("Lap Number: 1");
            lapCounter = 0;
            run();
        }

    });

}

private void run() {

    SharedPreferences getSetup = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    String setRun = getSetup.getString("run", "1");
    long setRunset = Long.parseLong(setRun);
    setRunset = setRunset * 1000;

    String setWalk = getSetup.getString("walk", "1");
    long setWalkset = Long.parseLong(setWalk);
    setWalkset = setWalkset * 1000;

    if (letsRun >= lapCounter) {

        if (workrest == true) {
            workrest = false;
            length = setRunset;

        } else {
            workrest = true;
            length = setWalkset;
        }

        final CountDownTimer timer = new CountDownTimer(length, 1000) {

            @Override
            public void onFinish() {

                if (workrest){
                    if (vibe){
                        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                        v.vibrate(2000);
                        run();
                    } else {
                        run();
                    }

                }else{
                lapCounter ++;
                lapNumber.setText("Lap Number: " + lapCounter);
                run();
                }
            }

            @Override
            public void onTick(long millisUntilFinished) {
                long min, sec;
                // TODO Auto-generated method stub
                min = millisUntilFinished / (60 * 1000);
                sec = (millisUntilFinished / 1000) % 60;
                String tmr = String.format("%d:%02d", min, sec);
                text.setText("" + tmr);

            }

        };
        timer.start();
        start.setOnClickListener(new View.OnClickListener() {
            //this is my button. start and stop. 
            public void onClick(View v) {
                if (start.getText() == "Stop") {
                    start.setText("Start");
                    lapCounter = 1;
                    start.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);
                    timer.cancel();
                    lapNumber.setText("Lap Number: 1");
                    text.setText("Stopped");
                } else {
                    start.setText("Stop");
                    start.getBackground().setColorFilter(0xFFFF0000, PorterDuff.Mode.MULTIPLY);
                    run();
                }
            }
        });

    } else {
        text.setText("Done!");
        lapCounter = 1;

    }

}

// pop up menu
@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuInflater blowUp = getMenuInflater();
    blowUp.inflate(R.menu.setup, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.setup:
        Intent i = new Intent("com.ApphHose.runnersTimer.SETUP");
        startActivity(i);
        break;
    case R.id.out:
        finish();
        break;
    }
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T01:56:09.713

`sec = (millisUntilFinished / 1000) % 60;`

整数除以整数产生整数，可能是舍入误差。

`sec = (millisUntilFinished / (double) 1000) % 60;`

# mongodb - 在 MongoDB 的 ObjectId 数组中查找元素

> ID：12505121
> 
> 赞同：2
> 
> 时间：2012-09-20T01:46:29.077
> 
> 标签：mongodb, morphia

我有一个使用 Morphia 映射的 ObjectId 列表。在 java 中，映射如下所示：

```
public class Log {
    @Indexed
    public List<ObjectId> companyIds;
    ....
} 
```

但是，在 Mongo shell 中，当我使用 $elemMatch 进行搜索时，它会抱怨类型无效。

```
> db.Log.find({ "companyIds" : { "$elemMatch" : ObjectId("5059e90d0364d02be740417a")}})
error: {
    "$err" : "invalid parameter: expected an object ($elemMatch)",
    "code" : 10065
} 
```

我还需要做什么才能将 $elemMatch 与 ObjectId 一起使用吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T02:01:59.990

您不需要使用`$elemMatch`来执行此操作。您可以只运行查询

```
{ "companyIds" : ObjectId("...") } 
```

它将查找其 companyIds 字段包含给定 objectId 的所有对象。

根据[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$elemMatch)，`$elemMatch`仅当您尝试匹配数组元素上的多个字段时才需要。它说“期望一个对象”的原因是它`$elemMatch`需要一个完整的 mongo 查询（例如，你可以传递给的东西`find`）作为它的论点。

# ruby - Ruby 中运行时代码生成的最佳实践

> ID：12505122
> 
> 赞同：2
> 
> 时间：2012-09-20T01:46:35.223
> 
> 标签：ruby, compilation, code-generation, runtime-compilation

我最近开始研究解析器和解析器生成器以及它们在 DSL 设计中的用途。为了让事情开始，并用一块石头杀死两只鸟，我通过从 peg.js 中窃取一些想法编写了一个纯 Ruby PEG 解析器 DSL。不同之处在于 peg.js 会将语法编译为 JavaScript，而我的库使用解释器模式与 Ruby 提供的一些语法糖相结合，以在纯 Ruby 中执行所有操作。这增加了一些我想避免的重要开销。

为了减少一些开销，我开始考虑将生成的一些解析表达式编译为较低级别的表示。我的一个想法是用来`eval`评估某个对象的单例类中代码的字符串表示。这里有一些伪代码来演示这个过程：

```
# will be used to pass CompiledExpression instance to `eval`
def get_binding(instance)
  instance.instance_eval { binding }
end

# an instance of this class will be used with `eval` 
# to define an `execute` method
class CompiledExpression
  attr_reader :code_repr
  # need to instantiate with a string representation of 
  # the code we are going to use to define the `execute` method
  def initialize(code)
    @code_repr = code
  end
end

# create the instance and define `execute` for that instance
# by evaluating the code representation
compiled_expr = CompiledExpression.new

# first way
eval "class << self; def execute; " +
    "#{compiled_expr.code_repr}; end; end", get_binding(compiled_expr)

# second way
compiled_expr.instance_eval "class << self; " +
    "def execute; #{compiled_expr.code_repr}: end; end"

# third way
compiled_expr.singleton_class.class_eval "def execute; " + 
    "#{compiled_expr.code_repr}; end"

# fourth way
compiled_expr.instance_eval "def execute; " + 
    "#{compiled_expr.code_repr}; end" 
```

我想知道是否有其他/更好的方法来完成这样的代码生成？我对这些东西很陌生，所以我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:37:57.510

我仍在尝试了解您要完成的工作，但是您可能有兴趣探索一些 Ruby 解析器/解析器生成器。

**Treetop**：我最熟悉的解析器，它是一个 peg 解析器，可以动态运行或*将语法编译成纯 Ruby 解析器*。[树梢](http://treetop.rubyforge.org/)。

**Parslet**：这是另一个 peg 解析器，它的设计比 Treetop 更简单，并且“更好”的错误报告。[欧芹](http://kschiess.github.com/parslet/)。

**Citrus**：另一个解析器，我不太熟悉；我不认为这是一个*纯粹*的peg 解析器。[柑橘](https://github.com/mjijackson/citrus)。

# ios - XCode 性能测量

> ID：12505126
> 
> 赞同：0
> 
> 时间：2012-09-20T01:47:27.420
> 
> 标签：ios, objective-c, xcode, performance, cocoa-touch

当我在我的设备上测试它时，我的应用程序的动画有点迟缓（它在模拟器中运行良好）。我对原因有些怀疑，但在开始调整之前，我希望能够对我的起点进行基准测试，并在每次更改后重复类似的测试。

我应该测量什么，如何测量？感觉每秒帧数将是我所经历的最有用的衡量标准，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T01:51:54.400

使用仪器。您可以使用 Product -> Profile (Command-I) 直接从 Xcode 启动它。

# python - 使用 PyOpenGL 在 wxGLCanvas 内显示一个简单的 2D 纹理矩形

> ID：12505129
> 
> 赞同：3
> 
> 时间：2012-09-20T01:47:40.513
> 
> 标签：python, opengl, wxpython, textures, pyopengl

我正在尝试编写一些代码，将单个图像显示为`wxGLCanvas`容器内的简单 2D 纹理矩形。

这是到目前为止我所拥有的一个可运行的示例：

```
import wx
from wxPython.glcanvas import wxGLCanvas
from OpenGL.GLU import *
from OpenGL.GL import *
import numpy as np
from scipy.misc import ascent

def run():
    imarray = np.float32(ascent())
    imarray = np.repeat(imarray[..., np.newaxis], 3, axis=2)
    app = wx.PySimpleApp()
    frame = wx.Frame(None, title='Simple 2D texture')
    canvas = myGLCanvas(frame, imarray)
    frame.Show(True)
    app.MainLoop()

class myGLCanvas(wxGLCanvas):

    def __init__(self, parent, image):
        attribList = [wx.glcanvas.WX_GL_DOUBLEBUFFER]
        wxGLCanvas.__init__(self, parent, -1, attribList=attribList)
        wx.EVT_PAINT(self, self.OnPaint)
        self.image = np.float32(image)
        self.InitProjection()
        self.InitTexture()
        pass

    def OnPaint(self, event):
        """Called whenever the window gets resized, uncovered etc."""
        self.SetCurrent()
        dc = wx.PaintDC(self)
        self.OnDraw()
        self.SwapBuffers()
        pass

    def InitProjection(self):
        """Enable the depth buffer and initialize the viewport and
        projection matrix"""
        glEnable(GL_DEPTH_TEST)
        glDepthFunc(GL_LEQUAL)
        width = self.image.shape[1]
        height = self.image.shape[0]
        glViewport(0, 0, width, height)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()
        glOrtho(0, width, height, 0, -1, 1)
        pass

    def InitTexture(self):
        """Initializes the texture from a numpy array"""
        self.texture = glGenTextures(1)
        glEnable(GL_TEXTURE_2D)
        glPixelStorei(GL_UNPACK_ALIGNMENT, 1)
        glBindTexture(GL_TEXTURE_2D, self.texture)
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR)
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP)
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP)
        glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE)
        glTexImage2D(GL_TEXTURE_2D, 0,
                     GL_RGB,
                     self.image.shape[1], self.image.shape[0], 0,
                     GL_RGB,
                     GL_FLOAT,
                     self.image)
        glDisable(GL_TEXTURE_2D)
        pass

    def OnDraw(self):
        """Draw a textured rectangle slightly smaller than the viewport"""
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)
        glClearColor(0., 0., 0., 0.)
        glClearDepth(1)
        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()
        glBindTexture(GL_TEXTURE_2D, self.texture)
        glEnable(GL_TEXTURE_2D)
        # draw a textured quad, shrink it a bit so the edge is clear
        glBegin(GL_QUADS)
        glTexCoord2f(0., 0.)
        glVertex3f(-0.9, -0.9, 0.)
        glTexCoord2f(1., 0.)
        glVertex3f(0.9, -0.9, 0.)
        glTexCoord2f(1., 1.)
        glVertex3f(0.9, 0.9, 0.)
        glTexCoord2f(0., 1.)
        glVertex3f(-0.9, 0.9, 0.)
        glEnd()
        glDisable(GL_TEXTURE_2D)
        pass

if __name__ == '__main__':
    run() 
```

这成功地绘制了一个矩形，但无法对其进行纹理化 - 我看到的只是一个白色矩形。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T04:33:13.633

好吧，我犯的一个严重错误是没有将输入数据的浮点值缩放到 0 到 1 之间——我所有的像素都 > 1，所以四边形呈现为白色！我在找到如何使用`wxGLCanvas`es 的好例子时遇到了一些麻烦，所以这里有一个简单的纹理渲染在 a`wxGLCanvas`中，供任何可能觉得它有用的人使用。

```
import numpy as np
from scipy.misc import ascent
import OpenGL.GL as gl
import wx
from wx.glcanvas import GLCanvas

class Canvas(GLCanvas):

    def __init__(self, parent):
        """create the canvas """
        super(Canvas, self).__init__(parent)
        self.texture = None

        # execute self.onPaint whenever the parent frame is repainted
        wx.EVT_PAINT(self, self.onPaint)

    def initTexture(self):
        """init the texture - this has to happen after an OpenGL context
        has been created
        """

        # make the OpenGL context associated with this canvas the current one
        self.SetCurrent()

        data = np.uint8(np.flipud(ascent()))
        w, h = data.shape

        # generate a texture id, make it current
        self.texture = gl.glGenTextures(1)
        gl.glBindTexture(gl.GL_TEXTURE_2D, self.texture)

        # texture mode and parameters controlling wrapping and scaling
        gl.glTexEnvf(gl.GL_TEXTURE_ENV, gl.GL_TEXTURE_ENV_MODE, gl.GL_MODULATE)
        gl.glTexParameterf(
            gl.GL_TEXTURE_2D, gl.GL_TEXTURE_WRAP_S, gl.GL_REPEAT)
        gl.glTexParameterf(
            gl.GL_TEXTURE_2D, gl.GL_TEXTURE_WRAP_T, gl.GL_REPEAT)
        gl.glTexParameterf(
            gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MAG_FILTER, gl.GL_LINEAR)
        gl.glTexParameterf(
            gl.GL_TEXTURE_2D, gl.GL_TEXTURE_MIN_FILTER, gl.GL_LINEAR)

        # map the image data to the texture. note that if the input
        # type is GL_FLOAT, the values must be in the range [0..1]
        gl.glTexImage2D(gl.GL_TEXTURE_2D, 0, gl.GL_RGB, w, h, 0,
                        gl.GL_LUMINANCE, gl.GL_UNSIGNED_BYTE, data)

    def onPaint(self, event):
        """called when window is repainted """
        # make sure we have a texture to draw
        if not self.texture:
            self.initTexture()
        self.onDraw()

    def onDraw(self):
        """draw function """

        # make the OpenGL context associated with this canvas the current one
        self.SetCurrent()

        # set the viewport and projection
        w, h = self.GetSize()
        gl.glViewport(0, 0, w, h)

        gl.glMatrixMode(gl.GL_PROJECTION)
        gl.glLoadIdentity()
        gl.glOrtho(0, 1, 0, 1, 0, 1)

        gl.glMatrixMode(gl.GL_MODELVIEW)
        gl.glLoadIdentity()
        gl.glClear(gl.GL_COLOR_BUFFER_BIT)

        # enable textures, bind to our texture
        gl.glEnable(gl.GL_TEXTURE_2D)
        gl.glBindTexture(gl.GL_TEXTURE_2D, self.texture)
        gl.glColor3f(1, 1, 1)

        # draw a quad
        gl.glBegin(gl.GL_QUADS)
        gl.glTexCoord2f(0, 1)
        gl.glVertex2f(0, 1)
        gl.glTexCoord2f(0, 0)
        gl.glVertex2f(0, 0)
        gl.glTexCoord2f(1, 0)
        gl.glVertex2f(1, 0)
        gl.glTexCoord2f(1, 1)
        gl.glVertex2f(1, 1)
        gl.glEnd()

        gl.glDisable(gl.GL_TEXTURE_2D)

        # swap the front and back buffers so that the texture is visible
        self.SwapBuffers()

def run():
    app = wx.App()
    fr = wx.Frame(None, size=(512, 512), title='wxPython texture demo')
    canv = Canvas(fr)
    fr.Show()
    app.MainLoop()

if __name__ == "__main__":
    run() 
```

# javascript - 在 Ruby on Rails 中将按钮转换为 Javascript

> ID：12505130
> 
> 赞同：0
> 
> 时间：2012-09-20T01:47:43.087
> 
> 标签：javascript, ruby-on-rails, ruby

我有以下路线：

```
resources :foods do
collection do
   post :f01a
 end
end 
```

和控制器：

```
def f01a
@user = User.find(params[:id])
@eat = Eat.find_by_user_id(@user)
@eat.toggle!(:f01)
redirect_to @user
end 
```

并查看：

```
<%= button_to "add f01a", send(:"f01a_foods_path", id: @user.id),  class: "btn btn-large btn-primary" %> 
```

我的目标是从 JavaScript 调用此控制器操作，`onclick`而不是使用 HTML 按钮。

问题是，目前，我可以在页面呈现时双击按钮并执行两次代码。我的理解是 JavaScript 或 AJAX 解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:51:55.567

首先用特定于它的类名装饰按钮：

```
<%= button_to "add f01a", send(:"f01a_foods_path", id: @user.id), class: "f01a btn btn-large btn-primary" %> 
```

然后，将以下 javascript 放入您的 application.js 文件中，并在 DOM 准备好后调用它：

```
$('form .f01a').submit(function() {  
    $(":submit", this).attr("disabled", "disabled");   
    $(":submit", this).addClass("disabled");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:44:30.200

Angelo Chrysoulakis 提出了解决问题的好方法。

此外，如果您愿意，您可以在整个页面上使用掩码，向您的用户显示一些正在处理或等待的消息，以便您的用户不会做任何更改或单击页面的其他部分，直到您的过程完成。

这是实现这一目标的好文章或库。

[http://code.google.com/p/jquery-loadmask/](http://code.google.com/p/jquery-loadmask/)

# java - 仅在序列化期间使用@JsonIgnore，而不是反序列化

> ID：12505141
> 
> 赞同：400
> 
> 时间：2012-09-20T01:49:34.840
> 
> 标签：java, json, spring, annotations, jackson

我有一个发送到服务器和从服务器发送的用户对象。当我发送用户对象时，我不想将散列密码发送给客户端。所以，我添加`@JsonIgnore`了密码属性，但这也阻止了它被反序列化为密码，这使得当用户没有密码时很难注册用户。

我怎样才能只`@JsonIgnore`申请序列化而不是反序列化？我正在使用 Spring JSONView，所以我对`ObjectMapper`.

我尝试过的事情：

1.  添加`@JsonIgnore`到属性
2.  仅添加`@JsonIgnore`getter 方法

* * *

## 回答 #1

> 赞同：603
> 
> 时间：2012-09-20T01:53:47.410

具体如何执行此操作取决于您使用的 Jackson 版本。这在*1.9*版本左右发生了变化，在此之前，您可以通过添加`@JsonIgnore`到 getter 来做到这一点。

您尝试过的：

> 仅在 getter 方法上添加 @JsonIgnore

执行此操作，*并将*JSON“密码”字段名称的特定`@JsonProperty`注释添加到对象密码的 setter 方法。

`READ_ONLY`Jackson的最新版本`WRITE_ONLY`为`JsonProperty`. 因此，您还可以执行以下操作：

```
@JsonProperty(access = JsonProperty.Access.WRITE_ONLY)
private String password; 
```

文档可以在[这里](http://fasterxml.github.io/jackson-annotations/javadoc/2.6/com/fasterxml/jackson/annotation/JsonProperty.Access.html)找到。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2014-12-09T18:37:02.323

为了做到这一点，我们只需要两个注解：

1.  `@JsonIgnore`
2.  `@JsonProperty`

`@JsonIgnore`在类成员及其 getter`@JsonProperty`及其 setter 上使用。示例插图将有助于做到这一点：

```
class User {

    // More fields here
    @JsonIgnore
    private String password;

    @JsonIgnore
    public String getPassword() {
        return password;
    }

    @JsonProperty
    public void setPassword(final String password) {
        this.password = password;
    }
} 
```

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2015-12-08T14:22:34.190

从 2.6 版本开始：更直观的方式是`com.fasterxml.jackson.annotation.JsonProperty`在字段上使用注解：

```
@JsonProperty(access = Access.WRITE_ONLY)
private String myField; 
```

即使存在 getter，字段值也会从序列化中排除。

JavaDoc 说：

```
/**
 * Access setting that means that the property may only be written (set)
 * for deserialization,
 * but will not be read (get) on serialization, that is, the value of the property
 * is not included in serialization.
 */
WRITE_ONLY 
```

如果您反过来需要它，只需使用`Access.READ_ONLY`.

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-06-22T15:45:53.693

In my case, I have Jackson automatically (de)serializing objects that I return from a Spring MVC controller (I am using @RestController with Spring 4.1.6). I had to use `com.fasterxml.jackson.annotation.JsonIgnore` instead of `org.codehaus.jackson.annotate.JsonIgnore`, as otherwise, it simply did nothing.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-12-10T23:11:33.050

另一种处理此问题的简单方法是使用`allowSetters=true`注释中的参数。这将允许将密码反序列化到您的 dto 中，但不会将其序列化为使用包含对象的响应正文。

例子：

```
@JsonIgnoreProperties(allowSetters = true, value = {"bar"})
class Pojo{
    String foo;
    String bar;
} 
```

`foo`和都`bar`填充在对象中，但只有 foo 被写入响应正文。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-01T11:13:20.033

```
"user": {
        "firstName": "Musa",
        "lastName": "Aliyev",
        "email": "klaudi2012@gmail.com",
        "passwordIn": "98989898", (or encoded version in front if we not using https)
        "country": "Azeribaijan",
        "phone": "+994707702747"
    } 
```

> * * *

```
@CrossOrigin(methods=RequestMethod.POST)
@RequestMapping("/public/register")
public @ResponseBody MsgKit registerNewUsert(@RequestBody User u){

        root.registerUser(u);

    return new MsgKit("registered");
} 
```

> * * *

```
@Service
@Transactional
public class RootBsn {

    @Autowired UserRepository userRepo;

    public void registerUser(User u) throws Exception{

        u.setPassword(u.getPasswordIn());
        //Generate some salt and  setPassword (encoded -  salt+password)
        User u=userRepo.save(u);

        System.out.println("Registration information saved");
    }

} 
```

> * * *

```
 @Entity        
@JsonIgnoreProperties({"recordDate","modificationDate","status","createdBy","modifiedBy","salt","password"})
                    public class User implements Serializable {
                        private static final long serialVersionUID = 1L;

                        @Id
                        @GeneratedValue(strategy=GenerationType.AUTO)
                        private Long id;

                        private String country;

                        @Column(name="CREATED_BY")
                        private String createdBy;

                        private String email;

                        @Column(name="FIRST_NAME")
                        private String firstName;

                        @Column(name="LAST_LOGIN_DATE")
                        private Timestamp lastLoginDate;

                        @Column(name="LAST_NAME")
                        private String lastName;

                        @Column(name="MODIFICATION_DATE")
                        private Timestamp modificationDate;

                        @Column(name="MODIFIED_BY")
                        private String modifiedBy;

                        private String password;

                        @Transient
                        private String passwordIn;

                        private String phone;

                        @Column(name="RECORD_DATE")
                        private Timestamp recordDate;

                        private String salt;

                        private String status;

                        @Column(name="USER_STATUS")
                        private String userStatus;

                        public User() {
                        }
                // getters and setters
                } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-06T08:54:37.117

您可以在类级别使用 @JsonIgnoreProperties 并将您想要在 json 中的变量放入“值”参数中。对我来说很好。

```
@JsonIgnoreProperties(value = { "myVariable1","myVariable2" })
public class MyClass {
      private int myVariable1;,
      private int myVariable2;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-22T16:28:58.983

你也可以这样做：

```
@JsonIgnore
@JsonProperty(access = Access.WRITE_ONLY)
private String password; 
```

它对我有用

# css - Mac 浏览器不会像 windows 一样显示我的菜单

> ID：12505146
> 
> 赞同：0
> 
> 时间：2012-09-20T01:50:42.673
> 
> 标签：css, macos, wordpress, navigation, styles

我在这里有这个导航菜单，在**Windows 浏览器**上看起来像这样：

![在此处输入图像描述](../Images/a71ccea0da75e00165ed58f2fe35e4c2.png)

但它在 Mac 浏览器中的显示方式不同

**Chrome** - 如您所见，主页未显示

![在此处输入图像描述](../Images/02bd59f47d4fc18146b7fb65f0e075f5.png)

**Firefox** - 它没有完美对齐

![在此处输入图像描述](../Images/d286024089ba8b46216e693275b8a4c4.png)

我正在使用 wordpress，这是锚的样式

```
#header #access a{ -webkit-transform: translateZ(0); width:100%; z-index: 999; padding: 0 8px 0 14px; min-height:14px; display:block; position:relative; display:block; vertical-align:middle; }
#header .menu-header {min-height: 100%;}
#header .menu-header > ul{margin-top: 19px; font-size: 14px; max-height: 16px;}
#header .menu-header > ul > li{ float:left; text-align:left; display: block; border-left: 1px solid #ab917a;  max-height: 16px; z-index:1;}
#header .menu-header > ul > li:first-child{ border-left: none; }
#header .menu-header > ul > li > ul{padding-top: 20px;} 
```

菜单是定制的，由 wordpress 动态生成，我从浏览器中复制了这个

```
 <div id="access" role="navigation">
        <div class="menu-header">
           <ul id="menu-main" class="menu"><li id="menu-item-228" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-82 current_page_item menu-item-228"><a href="/">Home</a></li>
         <li id="menu-item-761" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-761"><a href="/about-chevy-chase-facial-plastic-surgery/">About Us</a>
    </li>
         <li id="menu-item-313" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-313"><a href="/washington-dc-plastic-surgery-photos/">Photo Gallery</a></li>
       <li id="menu-item-287" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-287"><a href="/plastic-surgery-specials-chevy-chase/">Specials</a>

    </li>
       <li id="menu-item-238" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-238"><a href="/contact-facial-plastic-surgeon-chevy-chase/">Contact Us</a></li>
         </ul>
      </div> 
   </div> <!-- end access --> 
```

我目前正在使用 jquery 插入 span 元素以强制它显示为一种解决方法。

我正在使用 browserstack.com 进行测试，但无法在 jsfiddle T_T 中重新创建问题我希望有人已经体验过这个问题并就如何解决它给我一个意见。

请帮助Y_Y

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:10:47.263

你应该尝试`-webkit-transform: translateZ(0);`从你的风格中删除。我相信它会覆盖`z-index: 999`. 为什么这只会使第一个按钮不可见，我不知道。但它是一个特定于 webkit 的功能，所以它可以解释为什么 Firefox 和 IE 可以正常工作。

# iphone - iOS 应用被拒绝 - 数据存储指南

> ID：12505148
> 
> 赞同：3
> 
> 时间：2012-09-20T01:51:25.593
> 
> 标签：iphone, objective-c, ios, xcode

由于我没有遵循 iOS 数据存储指南，我的 iPhone 应用上周被拒绝。我的应用程序基本上会搜索某些数据并将它们显示给可以与他人共享它们的用户（Twitter、电子邮件等）或将它们保存到“收藏夹”以便以后查看。

**早些时候：**

早些时候，我没有遵循任何特定的数据策略。我的应用程序基本上是将所有搜索数据（图像）下载到**/Documents/**目录中。一旦用户将特定项目标记为“收藏夹”，它们就会保存到**/Documents/**路径中我自定义的“收藏夹”目录中。我的应用程序不使用 iCloud。此外，一旦用户看到它们并且不再在同一个视图中，我也忘记清除下载的搜索数据（图像）。从那以后，我发现整个策略很糟糕，也是我的应用被拒绝的原因。

**现在：**

现在，由于我的应用程序被拒绝，我加倍努力修复我的应用程序并使其尽可能完美。我现在遵循的数据策略非常简单：

**a)**所有下载的搜索数据（搜索结果的图像和 pList 文件）现在都在**/Library/Caches**目录中创建。

**b)**当用户将一个项目添加到“收藏夹”时，与该项目相关的数据（图像和文本）然后保存到**/Documents/**目录中。

**c)** **/Library/Caches 和 /Documents/**目录中的所有文件都标有属性“不备份”，因为我不想在 iCloud 上占用任何空间。

**d)**一旦用户移动到不同的视图并且不再访问搜索结果， **/Library/Caches**目录中的所有搜索相关数据都会立即清除。

**e)在应用程序启动时，我会检查****/Library/Caches**目录中是否有任何来自先前会话的残留文件，以防应用程序过早终止。如果找到之前搜索会话的任何残留文件，我会删除它们。

**我的问题是：**

**A)**我现在遵循的数据存储策略是否可以接受？

**B）**我是否需要在**/Library/caches/**中使用“不备份”属性标记任何与搜索相关的文件，还是没有必要？

**C）我应该在****/Documents/**目录中使用“不备份”属性标记与用户最喜欢的项目相关的数据，还是如果用户最喜欢的项目备份到 iCloud 可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:11:39.170

**A)**这个数据策略听起来好多了，也许下面列出了一个小的调整。

**B)**您不需要使用“不备份”属性标记这些文件。此外，您甚至不需要手动清除这些文件。这些文件不会通过 iTunes 或 iCloud 进行备份，只会在磁盘空间不足的某些极端情况下被清除。

**C)**用户最喜欢的项目当然应该备份到 iCloud。这将是对 iCloud 的正确使用，因为它是有意为用户生成的内容而设计的。

# ruby-on-rails-3 - 带有 IIS 的子目录中的 Rails 3.1 应用程序

> ID：12505153
> 
> 赞同：0
> 
> 时间：2012-09-20T01:52:20.597
> 
> 标签：ruby-on-rails-3, iis

有谁知道如何设置它？我完全被困住了。如果有一个配置选项我找不到它，我假设答案不在路线中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:23:28.803

对于其他人问这个：甚至不考虑它。

# eclipse - eclipse c++ 无法运行

> ID：12505156
> 
> 赞同：1
> 
> 时间：2012-09-20T01:52:50.873
> 
> 标签：eclipse, build

自安装以来，Eclipse 一直表现得很奇怪。我已经安装了mingw和cygwin，但它只是

适用于可执行项目。当我尝试创建默认的 gnu autotools 或 makefile

项目，即使选择了mingw gcc，它们也无法运行。我的意思是，当击球时

构建，构建窗口弹出并说构建所有并调用命令，但是当我运行时，

“启动失败。找不到二进制文件”对话框会出现

如果你们能帮助我，我将不胜感激。

# postgresql - 在 Postgres 中为插入语句生成 UUID？

> ID：12505158
> 
> 赞同：504
> 
> 时间：2012-09-20T01:53:03.027
> 
> 标签：postgresql, uuid, postgresql-8.4

我的问题很简单。我知道 UUID 的概念，我想生成一个来引用我数据库中“商店”中的每个“项目”。看起来很合理吧？

问题是以下行返回错误：

```
honeydb=# insert into items values(
uuid_generate_v4(), 54.321, 31, 'desc 1', 31.94);
ERROR:  function uuid_generate_v4() does not exist
LINE 2: uuid_generate_v4(), 54.321, 31, 'desc 1', 31.94);
        ^
HINT:  No function matches the given name and argument types. You might need to add explicit type casts. 
```

我已经阅读了以下页面：[http ://www.postgresql.org/docs/current/static/uuid-ossp.html](http://www.postgresql.org/docs/current/static/uuid-ossp.html)

![在此处输入图像描述](../Images/842c437420fd726280200a16f2ef656c.png)

我在 Ubuntu 10.04 x64 上运行 Postgres 8.4。

* * *

## 回答 #1

> 赞同：576
> 
> 时间：2012-09-20T02:03:29.550

`uuid-ossp`是一个贡献模块，因此默认情况下它不会加载到服务器中。您必须将其加载到数据库中才能使用它。

对于现代 PostgreSQL 版本（9.1 和更高版本），这很容易：

```
CREATE EXTENSION IF NOT EXISTS "uuid-ossp"; 
```

但对于 9.0 及以下版本，您必须改为运行 SQL 脚本来加载扩展。请参阅[8.4 中有关 contrib 模块的文档](http://www.postgresql.org/docs/8.4/static/contrib.html)。

对于 Pg 9.1 和更新版本，请阅读[当前的 contrib 文档](http://www.postgresql.org/docs/current/static/contrib.html)和[`CREATE EXTENSION`](http://www.postgresql.org/docs/current/static/sql-createextension.html). 这些功能在 9.0 或更早版本中不存在，例如您的 8.4。

如果您使用的是 PostgreSQL 的打包版本，您可能需要安装一个包含 contrib 模块和扩展的单独包。在您的包管理器数据库中搜索“postgres”和“contrib”。

* * *

## 回答 #2

> 赞同：422
> 
> 时间：2014-01-24T07:57:36.780

# 没有扩展名（作弊）

```
SELECT uuid_in(md5(random()::text || clock_timestamp()::text)::cstring);

output>> c2d29867-3d0b-d497-9191-18a9d8ee7830 
```

*（至少在 8.4 中有效）*

*   感谢@Erwin Brandstetter 的`clock_timestamp()`解释。

* * *

**如果您需要有效的 v4 UUID**

```
SELECT uuid_in(overlay(overlay(md5(random()::text || ':' || clock_timestamp()::text) placing '4' from 13) placing to_hex(floor(random()*(11-8+1) + 8)::int)::text from 17)::cstring); 
```

[![在此处输入图像描述](../Images/5a558c6f62900846c62953da20c4359c.png)](https://i.stack.imgur.com/OA6Qk.png) * 感谢**@Denis Stafichuk ** **@Karsten**和**@autronix**

* * *

*此外，在现代 Postgres 中，您可以简单地转换：*

`SELECT md5(random()::text || clock_timestamp()::text)::uuid`

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2013-02-12T04:03:34.120

[Craig Ringer](https://stackoverflow.com/a/12505220/642706)的回答是正确的。这是 Postgres 9.1 及更高版本的更多信息……</p>

# 扩展可用吗？

如果已经为您的 Postgres 安装（您的*集群*在 Postgres 术语中）构建了扩展，您只能安装它。例如，我发现[uuid-ossp](http://www.postgresql.org/docs/current/static/uuid-ossp.html)扩展包含在EnterpriseDB.com[提供的 Mac OS X 安装程序中。](http://www.enterprisedb.com/products-services-training/pgdownload)[几十个扩展](http://www.postgresql.org/docs/current/static/contrib.html)中的任何一个都可能可用。

要查看*uuid-ossp*扩展在您的 Postgres 集群中是否可用，请运行以下 SQL 来查询[`pg_available_extensions`](http://www.postgresql.org/docs/9.3/static/view-pg-available-extensions.html)系统目录：

```
SELECT * FROM pg_available_extensions; 
```

# 安装扩展

要安装与[UUID](http://www.postgresql.org/docs/current/static/datatype-uuid.html)相关的扩展，请使用以下 SQL 中所示的[CREATE EXTENSION](http://www.postgresql.org/docs/current/static/sql-createextension.html)命令：

```
CREATE EXTENSION IF NOT EXISTS "uuid-ossp"; 
```

**注意：**我发现扩展名周围的引号字符是必需的，尽管文档相反。

SQL 标准委员会或 Postgres 团队为该命令选择了一个奇怪的名称。在我看来，他们应该选择“安装扩展”或“使用扩展”之类的东西。

# 验证安装

[`pg_extension`](http://www.postgresql.org/docs/current/static/catalog-pg-extension.html)您可以通过运行以下 SQL 查询系统目录来验证扩展是否已成功安装在所需的数据库中：

```
SELECT * FROM pg_extension; 
```

# UUID 作为默认值

有关详细信息，请参阅问题：[Postgres 中 UUID 列的默认值](https://dba.stackexchange.com/questions/122623/default-value-for-uuid-column-in-postgres)

# 老路

以上信息使用了Postgres 9.1中[新增的](http://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.1#Extensions)*扩展*功能。在以前的版本中，我们必须在*.sql*文件中查找并运行脚本。[添加了扩展功能以使安装更容易，为扩展的创建者](http://www.postgresql.org/docs/current/static/extend-extensions.html)付出更多的工作，以减少扩展的用户/消费者的工作。有关更多讨论，请参阅我的[博客文章](http://crafted-software.blogspot.com/2011/10/extensions-in-postgres.html)。

 *# UUID 的类型

顺便说一句，问题中的代码调用了函数`uuid_generate_v4()`。这会生成一种称为[版本 4](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random))的类型，其中几乎所有 128 位都是随机生成的。虽然这适用于较小的行集的有限使用，但如果您想几乎消除任何冲突的可能性，请使用 UUID 的另一个“版本”。

例如，原始[版本 1](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address))将主机的[MAC 地址与当前日期时间和任意数字组合在一起，冲突的可能性几乎为零。](https://en.wikipedia.org/wiki/MAC_address)

有关更多讨论，请参阅[我](https://dba.stackexchange.com/a/122624/19079)对相关问题的回答。

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2015-02-08T16:40:04.520

# `pgcrypto`扩大

从 Postgres 9.4 开始，该`pgcrypto`模块包含该[`gen_random_uuid()`](http://www.postgresql.org/docs/current/static/pgcrypto.html#AEN160804)函数。此函数生成基于随机数的[版本 4 类型的 UUID 之一](https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_.28random.29)。

获取 contrib 模块（如果尚不可用）。

```
sudo apt-get install postgresql-contrib-9.4 
```

使用`pgcrypto`模块。

```
CREATE EXTENSION "pgcrypto"; 
```

该`gen_random_uuid()`功能现在应该可用；

示例用法。

```
INSERT INTO items VALUES( gen_random_uuid(), 54.321, 31, 'desc 1', 31.94 ) ; 
```

引用[Postgres doc on`uuid-ossp`](http://www.postgresql.org/docs/current/static/uuid-ossp.html) module。

> 注意：如果您只需要随机生成的（版本 4）UUID，请考虑使用 pgcrypto 模块中的 gen_random_uuid() 函数。

* * *

## 回答 #5

> 赞同：72
> 
> 时间：2020-05-23T10:49:30.403

PostgreSQL 13 原生支持*gen_random_uuid* [()](https://www.postgresql.org/docs/13/functions-uuid.html)：

> PostgreSQL 包含一个生成 UUID 的函数：
> 
> ```
> gen_random_uuid () → uuid 
> ```
> 
> 此函数返回版本 4（随机）UUID。这是最常用的 UUID 类型，适用于大多数应用程序。

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=postgres_13&fiddle=0b6d75598881ad5988fa4b7a12a8f6e0)**

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2021-06-12T03:43:19.783

从 2021 年开始更新，无需花哨的技巧即可自动生成`uuid`on`insert`语句。

只做一件事：

1.  `DEFAULT gen_random_uuid ()`为您的`uuid`列设置默认值。就这些。

说，你有一张这样的桌子：

```
CREATE TABLE table_name (
    unique_id UUID DEFAULT gen_random_uuid (),
    first_name VARCHAR NOT NULL,
    last_name VARCHAR NOT NULL,
    email VARCHAR NOT NULL,
    phone VARCHAR,
    PRIMARY KEY (unique_id)
); 
```

现在您无需执行任何操作即可将 uuid 值自动插入`unique_id`列。因为您已经为它定义了一个默认值。您可以简单地专注于插入其他列，并`postgresql`照顾您的`unique_id`. 这是一个示例插入语句：

```
INSERT INTO table_name (first_name, last_name, email, phone) 
VALUES (
    'Beki',
    'Otaev',
    'beki@bekhruz.com',
    '123-456-123'
) 
```

请注意，没有插入`unique_id`，因为它已经被处理了。

*关于其他的扩展，如对 postgres 的标准功能`uuid-ossp`不满意，可以开启。`gen_random_uuid ()`大多数时候，没有它们你应该没问题*

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-19T14:57:52.580

```
ALTER TABLE table_name ALTER COLUMN id SET DEFAULT uuid_in((md5((random())::text))::cstring); 
```

阅读@ZuzEL 的答案后，我使用上面的代码作为列 id 的默认值，它工作正常。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-09-02T12:05:32.400

uuid-ossp 模块提供生成通用唯一标识符 (UUID) 的功能

uuid_generate_v1() 此函数生成版本 1 UUID。

1.  添加扩展

> 如果不存在“uuid-ossp”，则创建扩展；

2.  验证扩展

> 选择 * 从 pg_extension;

3.  运行查询

> INSERT INTO table_name(id, column1, column2 , column3, ...) 值 (uuid_generate_v1(), value1, value2, value3...);

验证表数据*

# xcode - 将 NSString 字体缩放为 UIImage 大小

> ID：12505159
> 
> 赞同：0
> 
> 时间：2012-09-20T01:53:08.393
> 
> 标签：xcode, nsstring, uiimage, font-size, autoresize

我正在将文本写入从 iDevice 的相机拍摄或从照片库中选择的图像上，但我需要根据图像的宽度/高度缩放字体大小。这是我当前的代码： UIGraphicsBeginImageContext(img.size);

```
CGRect aRectangle = CGRectMake(0,0, img.size.width, img.size.height);
[img drawInRect:aRectangle];

[[UIColor whiteColor] set];           // set text color
NSInteger fontSize = 45;
UIFont *font = [UIFont systemFontOfSize:fontSize];// set text font

[ text drawInRect : aRectangle                      // render the text
         withFont : font
    lineBreakMode : UILineBreakModeTailTruncation  // clip overflow from end of last line
        alignment : UITextAlignmentCenter ];

UIImage *theImage=UIGraphicsGetImageFromCurrentImageContext();   // extract the image
UIGraphicsEndImageContext();     // clean  up the context.
return theImage;</i> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:54:31.567

你想要这样的东西。它会创建一个图像大小一半的矩形，然后使用二进制搜索放大您想要的字体大小。

```
//---- initial data
CGSize szMax = CGSizeMake(<imgWidth> / 2, <imgHeight> / 2);
CGFloat fMin = 2;      //-- the smallest size font we want
CGFloat fMax = 100;    //-- the largest size font we want
CGFloat fMid;          //-- the middle of min and max

while ((fMax - fMin) >= 1.0)    //-- repeat until the sizes converge
{
    fMid = (fMin + fMax) / 2.0;    //-- compute mid-point

    UIFont *pfnt = [UIFont systemFontOfSize: fMid];    //-- create middle-sized font

    //---- compute the size of the text using the mid-sized font
    CGSize szStr = [pStr sizeWithFont: pfnt constrainedToSize: szMax lineBreakMode: UILineBreakModeWordWrap];

    if (szStr.height > szMax.height)
        fMax = fMid;                //-- text too tall, set max to mid-point
    else               
        fMin = fMid;                //-- text too short, set min to mid-point
}
//---- 'fMid' is the size you want. 
```

# c++ - 启用可覆盖初始化函数的优雅方式

> ID：12505161
> 
> 赞同：2
> 
> 时间：2012-09-20T01:53:30.053
> 
> 标签：c++, c++11

由于曾经无法在*基类构造*函数中调用*派生类的**覆盖函数*，因此我想模拟这种行为（类似于 C#、Java 等在幕后所做的）。

 **我能想到的最优雅的（从签名的角度来看）如下：

```
class Base {
protected:
    virtual void init() {
    }

    template <typename T, typename ...U>
    T internal_create(U&& u) {
        T instance(std::forward<U>(u)...);
        instance.init();
        return instance;
    }
};

class Derived : public Base {
protected:
    Derived() = default;
    virtual void init() override {
    }
public:
    static Derived create() {
        return internal_create<Derived>();
    }

}; 
```

Where`create`可以替代构造函数（从*公共*的角度来看），并且是实例化对象的唯一方法。问题是这是否可以更简单地实现，因为现在每个派生类都必须实现`create`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T02:35:59.130

我看不到您的代码会编译。而且我看不到虚拟`init`方法的意义，尽管它确实建议了两阶段构建。这只是邪恶的，您可以通过阅读 Bjarne Stroustrup 的[“C++ 编程语言”附录 E](http://www.stroustrup.com/3rd_safe.pdf)，尤其是 E3.5 部分了解更多信息。

[FAQ](http://www.parashift.com/c++-faq-lite/calling-virtuals-from-ctor-idiom.html)中概述了在基类构造函数中进行派生类初始化的常用方法。由于我曾经说服 Marshall 添加该常见问题解答项目，因此我也可以随意将您引导到我自己的[博客](http://alfps.wordpress.com/2010/05/12/how-to-avoid-post-construction-by-using-parts-factories/)。

以后请记住，首先查看常见问题解答通常是个好主意。

* * *

哦，我忘了。关于构造期间动态类型的 C++ 规则的要点是提供*类型安全*的构造。在 Java 和 C# 中，您可以很容易地引入一个错误，即您正在访问派生类的一些未初始化的成员，但在 C++ 中则不然。

两阶段构造抛弃了类型安全，并使得编写异常安全使用代码变得困难，以换取为 1990 年代早期的编译器编写干净代码的能力（但实际上，谁需要这种能力）。

其他常见的解决方案旨在保持类型安全。**

# java - AndroidManifest 中的多个权限？

> ID：12505162
> 
> 赞同：3
> 
> 时间：2012-09-20T01:53:31.990
> 
> 标签：java, android, eclipse, permissions, manifest

所以我想知道是否有一条规则禁止在我的应用程序中设置多个**“使用权限”**块。前任：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET"/> 
```

当我在我的应用程序中使用它时，它会在我单击按钮时立即崩溃。

**注意：**我的按钮将文件保存到 SD 卡并将其上传到 FTP（这就是我卡住的地方 - 添加互联网部分）

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T02:17:03.300

它可以是应用程序所需的清单文件中的尽可能多的使用权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:15:40.443

您可以根据您的要求在清单文件中使用权限，它在下载或安装您的应用程序时向用户显示，然后要求用户在应用程序使用之前要求授予权限的权限。

# ruby-on-rails - 范围例外规则

> ID：12505164
> 
> 赞同：0
> 
> 时间：2012-09-20T01:53:45.843
> 
> 标签：ruby-on-rails, ruby

我正在尝试为我的所有文章定义库存，但我想排除使用参数发送给我的文章。

这是关系的样子：

```
 Article
    has_many :tags, through: :articletags
  ArticleTags
    belongs_to :article
    belongs_to :tags
  Tags
    has_many :article, through: articletags 
```

这是一种在我的模型中定义没有标签的方法：

```
def self.by_not_tags(tag)
  joins(:tags).where('tags.title != ?', tag)
end 
```

在我看来，我是这样称呼它的：

```
<%= link_to (tag.title), articles_path(:scope => tag.title) %> 
```

这是我的控制器：

```
 def custom
    if params[:scope].nil?
      @articles = Article.all(:order => 'created_at DESC')
    else
      @articles = Article.by_tags(params[:scope])
      @articles2 = Article.by_not_tags(params[:scope])
    end
  end 
```

目标是首先查看所有带有标签的文章，然后显示没有该标签的其他文章，因此我没有重复。

我的问题在于连接，但我不确定如何找到没有标签的文章。也许一个 except 会起作用，但我不确定什么样的查询会适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:28:07.203

假设 ArticleTag 模型需要验证 article_id 和 tag_id 的存在，

```
Article.where('article_tag_id is null') 
```

如果我不假设上述验证说明，

```
Article.where('not exists (select 1 from article_tags where article_id = articles.id)') 
```

# php - 如何正确配置magento以在订单通知期间包含文件上传链接？与 joomla magebridge 组件集成

> ID：12505174
> 
> 赞同：3
> 
> 时间：2012-09-20T01:55:39.650
> 
> 标签：php, magento, joomla, e-commerce, magento-1.5

我们的网站是印刷类服务，它可以通过以下程序接受客户的订单：

他们选择要订购的产品类型 选择纸张尺寸和商品数量 客户需要上传 pdf 格式的文件（这是他们包含订单所需设计的文件） 系统将向客户和所有者发送一封电子邮件（电子邮件应包含下载上传文件的直接链接）

电子邮件已成功发送，其中包含他们想要订购的物品的详细信息。电子邮件中包含一个链接，但它显示的是以下示例代码：

项目 SKU 数量 小计 信笺 100gsm 哑光 A5 500

文件上传 - 单击“立即购买”后将上传文件

```
<a href="https://www.mydomain.com/" target="_blank"></a> 
```

“ `<a href="https://www.mydomain.com/" target="_blank"></a>`”应该是客户上传到服务器的pdf文件的下载链接。我目前正在使用 Magento 1.5.1.0 需要帮助，我一直想知道这个错误是否在于如何包含客户上传的 pdf 文件的正确链接。

我们还有一个使用 magebridge 组件的网站的 joomla 版本，该组件的主要目的是将 joomla 与 magento 网站连接起来，以使 joomla 能够集成 magento 的一些重要功能。所以基本上用户会访问 joomla 网站并进行他们需要做的交易。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:29:14.837

在 magento v1.7 中显示在客户的电子邮件确认中上传的文件的链接。

将此模板文件复制到本地模板文件夹 /app/design/frontend/base/default/template/email/order/items/order/default.phtml

然后更改此行 (#37)

```
 <?php echo (isset($option['print_value'] ) ? $option['print_value'] : nl2br($this->escapeHtml($option['value']))) ?> 
```

至

```
 <?php echo (isset($option['print_value'] )  && $option['option_type'] != 'file' ? $option['print_value'] : $option['value']) ?> 
```

这在 1.5.1 版中可能有效，也可能无效

# knockout.js - 处理数据绑定中的新键

> ID：12505176
> 
> 赞同：0
> 
> 时间：2012-09-20T01:56:07.063
> 
> 标签：knockout.js

**设置：**

我有一个 knockout.js 应用程序，它使用带有“foreach: $data.items”的模板显示一个表。

$data 使用数据绑定设置，如下所示：

```
<div data-bind="template: {name: 'table-custom', data: {table: 'item-list-custom', config: $root.items, default: {foo: '', bar: ''}}}"></div> 
```

$root.items 是一个字典数组，如下所示：

```
[{foo: 'val2', bar: 'val2'}, ...] 
```

我从 JSON 中获取 $root.items 中的值，并根据模板创建表。

**问题：**

我想在表中添加一个新列，所以我在“默认”字典中添加了一个默认值（例如 baz:''）。新列呈现为选择（下拉列表）。

一切都很好。我的问题是：

1）如果可用，我如何设置所选选项的值？我试过了

```
<select data-bind="value: baz, ... 
```

但它抱怨是因为现有的行（来自 JSON）还没有包含 baz 键，所以它找不到它。

2）当我在选择中选择某个值时，对于现有行，它不会与模型的其余部分一起保存。即它们仍然只包含“foo”和“bar”键。

如果我在表中添加一个新行，然后选择一个值，它可以正常工作，并将 baz 值与其他值一起保存。我猜这是因为“默认” baz 值适用于新行，但不适用于现有行。

那么，我如何让这个设置与我现有的数据（加载时没有“baz”属性，因为我稍后将其添加到表中）一起使用新行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:15:16.147

您可能应该做的是将您的视图模型逻辑与模板分离，将其封装在一个类中，然后将其传递给模板。这使您可以处理各种事情，例如将默认值设置为您需要的任何值（随着新列的添加或服务器端 JSON 结构的更改），并且还使视图模型更具可测试性。它还使您能够非常轻松地实现诸如客户端编辑/添加/删除行数据之类的事情。至于第 2 点，我相信在视图模型中将其设为 ko.observable 将解决此问题。

这是一个可能的实现的片段：

```
function TableDefinition(tableName, tableConfig, options) {
    var self = this;
    tableConfig = tableConfig || {};

    // Create an instance of TableRow from each item in tableConfig
    var initialItems = ko.utils.arrayMap(tableConfig || [], 
                                       function(item) { return new TableRow(item); });
    self.config = ko.observableArray(initialItems);
    self.tableName = ko.observable(tableName);

    self.addRow = function() {
        // Allows you to instantly add a new row right from your page without relying on
        // the server-side structure
        self.config.push(new TableRow());
    };
    self.deleteRow = function(row) {
        self.config.remove(row);
    }
}

function TableRow(data) {
    var self = this;
    data = data || {};
    self.foo = ko.observable(data.foo || ''); // These are observables so that
    self.bar = ko.observable(data.bar || ''); // you can bind the values from
    self.baz = ko.observable(data.baz || ''); // control to view model
    self.selections = ['val1', 'val2', 'val3', 'val4']
} 
```

现在您可以将其添加到您的根视图模型中，并将来自服务器的数据直接传递到`TableDefinition`视图模型中。

```
function RootViewModel(data) {
    var self = this;    
    self.table = new TableDefinition('item-list-custom', data);
} 
```

在您的页面上：

```
var dataFromServer = [
    {foo: 'val1', bar: 'val1'},
    {foo: 'val2', bar: 'val2'},
    {foo: 'val3', bar: 'val3'},
    {foo: 'val4', bar: 'val4'}]; // Dummy data, assumed to be retrieved from the server

var viewModel = new RootViewModel(dataFromServer);
ko.applyBindings(viewModel, document.getElementById('root')); 
```

这是相关的 JsFiddle：http: [//jsfiddle.net/dflor003/BM3HU/](http://jsfiddle.net/dflor003/BM3HU/)

底部有一个实时调试视图，其中包含您将以 JSON 形式发送回服务器的数据输出，当您更改值时会更新这些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:15:57.320

您应该能够通过在您的属性前面添加以下内容来做到这一点`$data`：

```
<select data-bind="value: $data.baz, ... 
```

我创建了一个小的 JsFiddle 来演示：http: [//jsfiddle.net/amtiskaw/HD2jt/](http://jsfiddle.net/amtiskaw/HD2jt/)

# android - 使用 OnTouchEvent 移动视图

> ID：12505180
> 
> 赞同：1
> 
> 时间：2012-09-20T01:56:13.743
> 
> 标签：android, touch-event

我有这段代码可以在屏幕中放置我触摸的视图。但是视图并不完全遵循我手指触摸的点。

我可以改善这种行为吗？

像拖放 API 一样工作，但使用 onTouchEvent？

谢谢大家！

```
 @Override
 public boolean onTouchEvent(final MotionEvent event) {

            final float x =   event.getX(); 
            final float y =   event.getY();
            moveView(x, y);
            return super.onTouchEvent(event);

        }

        private void moveView(float x, float y) {
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); 
            params.leftMargin = Math.round(x);
            params.topMargin = Math.round(y);   
            selectedView.setLayoutParams(params); 

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:45:51.480

```
 // These matrices will be used to scale points of the image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// The 3 states (events) which the user is trying to perform   
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
//private static final float MAX_ZOOM = 5f;
int mode = NONE;

// these PointF objects are used to record the point(s) the user is touching
PointF start = new PointF();
PointF mid = new PointF();
float oldDist = 1f;
float[] lastEvent = null; 
float degrees = 0f;
float newRot = 0f;

OnTouchListener touchAction = new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        //perfrom zoom & drag & rotate operations on touch of imageview
        dragZoomRotate((ImageView)v, event);
        return true; 

    }
};

private void dragZoomRotate(ImageView view, MotionEvent event){ 

    view.setScaleType(ImageView.ScaleType.MATRIX);  

    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK)   
    {
    case MotionEvent.ACTION_DOWN:
        savedMatrix.set(matrix);
        start.set(event.getX() , event.getY() );
        mode = DRAG;
        lastEvent = null;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:   // first and second finger down
        oldDist = spacing(event);         
        savedMatrix.set(matrix);
        midPoint(mid, event);
        mode = ZOOM;

        lastEvent = new float[4];
        lastEvent[0] = event.getX(0);
        lastEvent[1] = event.getX(1);
        lastEvent[2] = event.getY(0);
        lastEvent[3] = event.getY(1);
        degrees = rotation(event);
        break;
    case MotionEvent.ACTION_UP: // first finger lifted
    case MotionEvent.ACTION_POINTER_UP:   // second finger lifted
        mode = NONE;
        lastEvent = null;

        break;
    case MotionEvent.ACTION_MOVE:    
        if (mode == DRAG) { 
            // ...
            matrix.set(savedMatrix);

            matrix.postTranslate(event.getX() - start.x , event.getY() - start.y );

        }
        else if (mode == ZOOM && event.getPointerCount()==2) {
            float newDist = spacing(event);
            matrix.set(savedMatrix);
            if (newDist > 10f) {              
                float scale = newDist / oldDist;
                matrix.postScale(scale, scale, mid.x, mid.y);
            } 
            if (lastEvent!=null){
                newRot = rotation(event); 
                float r = newRot-degrees;
                matrix.postRotate(r, view.getMeasuredWidth()/2, view.getMeasuredHeight()/2);  
            }
        }
        // 
        break;
    }   

    view.setImageMatrix(matrix);
}

private float rotation(MotionEvent event) 
{
    double delta_x = (event.getX(0) - event.getX(1));
    double delta_y = (event.getY(0) - event.getY(1)); 
    double radians = Math.atan2(delta_y, delta_x);
    return (float) Math.toDegrees(radians);         
} 

/*     
 * --------------------------------------------------------------------------
 * Method: spacing Parameters: MotionEvent Returns: float Description:
 * 
 * checks the spacing between the two fingers on touch
 * ----------------------------------------------------
 */

private float spacing(MotionEvent event) 
{
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */   

private void midPoint(PointF point, MotionEvent event) 
{
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
} 
```

现在将 touchAction 侦听器添加到您要移动的视图中...

```
 myImageView.setOnTouchListener(touchAction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:24:22.763

尝试对您的 x 和 y 坐标进行一些偏移。

```
//should be on the order of magnitude of the size of the view
float x_offset= 10;  //Play with this.
float y_offset= 10;  //Play with this.

final float x =   event.getX() + x_offset; 
final float y =   event.getY() + y_offset;

moveView(x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T02:09:56.300

尝试将您的布局从 RelativeLayout 更改为 AbsoluteLayout

# php - PHP env 中的基本 travis.yml 失败

> ID：12505184
> 
> 赞同：0
> 
> 时间：2012-09-20T01:57:29.870
> 
> 标签：php, travis-ci

我是新手并试图在我的**PHP**开发环境中学习**travis 。**

 **这是非常“基本的”，我只是从官方指南中尝试了一个示例**.travis.yml 。**但它总是失败。

我的仓库在这里[https://github.com/rahmatawaludin/learn_travis](https://github.com/rahmatawaludin/learn_travis)我的 travis 版本在这里[http://travis-ci.org/rahmatawaludin/learn-travis](http://travis-ci.org/rahmatawaludin/learn-travis)。

谁能给我一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:14:36.907

我猜你遵循了[PHPUnit 手册](http://www.phpunit.de/manual/3.5/en/writing-tests-for-phpunit.html)。

如果要为类`MyClass`（文件 MyClass.php）编写测试，则相应的测试将在类中`MyClassTest`（文件 MyClassTest.php）。

现在，如果您想运行测试，您可以这样调用`phpunit`：

```
 phpunit MyClassTest 
```

但是您`phpunit`使用文件名调用，只需删除`.php`扩展名，它应该可以工作。**

# passwords - sudo 图形提示

> ID：12505186
> 
> 赞同：0
> 
> 时间：2012-09-20T01:57:43.120
> 
> 标签：passwords, sudo, prompt

我有一个必须以 root 权限执行命令的脚本，但是我希望脚本在图形窗口中提示输入 sudo 密码，而不是在终端中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:01:29.410

如果您在任何 Linux 风格中使用 gnome，请尝试 gksu。

# javascript - 循环数组数据javascript

> ID：12505189
> 
> 赞同：1
> 
> 时间：2012-09-20T01:58:11.900
> 
> 标签：javascript, arrays, object

我是 javascript 新手，我无法弄清楚如何循环遍历一些代码，以便它基本上创建一个数组，然后我可以将其传递给我的 plot 变量。

我不确定从哪里开始。现在我有一段代码，它获取我的第一个数据集（dataOne）并对其进行格式化，以便它可以进入我的绘图变量。我基本上需要为其他数据集再做三遍 - 希望包括 example.getDataSets 函数以某种方式循环。

有没有好的方法来做到这一点？

这是我的代码：

脚本.js

```
var example = {};

example.data = {
    dataOne: {data: [{"date":1333238400000,"data":23},{"date":1333324800000,"data":37},{"date":1333411200000,"data":49},{"date":1333497600000,"data":54},{"date":1333584000000,"data":30},{"date":1333670400000,"data":19},{"date":1333756800000,"data":15},{"date":1333843200000,"data":19},{"date":1333929600000,"data":145}]},
    dataTwo: {data: [{"date":1335830400000,"data":63},{"date":1335916800000,"data":77},{"date":1336003200000,"data":66}]},
    dataThree: {data: [{"date":1341100800000,"data":24},{"date":1341187200000,"data":50},{"date":1341273600000,"data":43},{"date":1341360000000,"data":39},{"date":1341446400000,"data":56},{"date":1341532800000,"data":66}]},
    dataFour: {data: [{"date":1333238400000,"data":71},{"date":1333324800000,"data":46},{"date":1333411200000,"data":66},{"date":1333497600000,"data":73},{"date":1333584000000,"data":105},{"date":1333670400000,"data":84}]}
}

example.getDataSets = function(){
    return ['dataOne', 'dataTwo', 'dataThree', 'dataFour']
}

example.getSeries = function(month){
    return example.data[month]
}

example.processData = function(data){
    var newData = []
    for(var i = 0; i < data.length; i++){
        newData.push([data[i].date, data[i].data])
    };
    return newData;
} 
```

我在 HTML 页面中的脚本：

```
$.getScript("script.js")
    .done(function() {

    var b = example.getSeries('dataOne');
    var d = example.processData(b.data);
    // first correct the timestamps - they are recorded as the daily
    // midnights in UTC+0100, but Flot always displays dates in UTC
    // so we have to add one hour to hit the midnights in the plot
    for (var i = 0; i < d.length; ++i)
      d[i][0] += 60 * 60 * 1000;

    var plot = $.plot($("#placeholder"), [d] , options); 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:12:43.837

也循环从返回的`.getDataSets`值

```
var sets = example.getDataSets(), set_i = 0, // get list of sets
    b = {}, d = [], i = 0, plot; // set-up vars
for(; set_i < sets.length; set_i++){ // loop over each set
    b = example.getSeries( sets[ set_i ] ); // get your set
    d = example.processData(b.data);
    for (i = 0; i < d.length; ++i)
      d[i][0] += 60 * 60 * 1000;

    plot = $.plot($("#placeholder"), [d] , options);
    // ... etc with plot
} 
```

如果您希望在绘制之前将它们全部放在一个数组中，请在另一个*数组上使用*[**concat**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)（调用它或其他东西），然后在 set 循环中 ，然后在循环外绘制*`d_total``d_total = d_total.concat( d );`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:17:04.863

我假设你想处理每个

```
var b = example.getSeries(X); 
```

其中 X 依次是“dataOne”、“dataTwo”、“dataThree”、“dataFour”？

如果是这样，你会寻找这样的东西：

```
// see below for where example.ordering is suggested
for (var i in example.ordered) {
  var month = example.ordered[i];
  var b = example.getSeries(month);
  var d = example.processData(b.data);
  ... further processing with month, b, d.
} 
```

getDataSets() 可以按照您必须正确的顺序生成您的“月份”。我唯一担心的是你有两个地方的月份列表。您拥有的数组对于对月份进行排序是必需的，因为您无法从 example.data 中提取“月份名称”并期望它们的顺序相同（由于散列，密钥基本上是随机存储的）。

限定条件是您的密钥是否可排序，但您在此处拥有的密钥不是。当然，如果您从同一个源构建这对结构，那么将数据存储在关联数组（example.data 对象）以及一个单独的数组中以指示排序既常见又可以接受。理想情况下，您可以将这两个组合成另一个对象，以便将它们作为一个团队进行处理。

由于您的有序月份数组实际上在函数中“丢失”，我建议您添加类似

```
example.ordering = [ ..... ] 
```

甚至更好的是，将月份按放入哈希中的相同顺序推到该列表的末尾。我将使用辅助函数来存储数据：

```
example.ordering = [];  // initially empty
example.storeSet = function (month, dataList) {
    example.ordering.push(month);
    example.data[month] = { data : dataList };
}

....
// now store the data
example.storeSet('dataOne',   [{"date":1333238400000,"data":23}, ....]);
example.storeSet('dataTwo',   [{"date":1335830400000,"data":63}, ....]);
example.storeSet('dataThree', [{"date":1341100800000,"data":24}, ....]);
example.storeSet('dataFour',  [{"date":1333238400000,"data":71}, ....]); 
```

当然，我的代码未经测试（当然！），但它看起来是正确的，我相信您可以修复我可能犯的任何愚蠢错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-20T02:09:26.787

我是新来的，当你坐下来看了，仍然找不到答案时，我理解你的沮丧。但是，我认为您正在寻找的是这样的：

```
for (example.data=dataOne;example.data<dataFour;example.data=example.data+increment)
{
    code to be executed
} 
```

甚至可能是递归的，但我不是最擅长的，但下面是一个标准示例

```
function recurs(p1) {
    p1--;
    if (p1 < 0) return // exit condition
        setTimeout("recurs("+p1+")",1);
} 
```*

# java - IClassFile 注释

> ID：12505194
> 
> 赞同：0
> 
> 时间：2012-09-20T01:59:09.490
> 
> 标签：java, eclipse, eclipse-jdt

在 Eclipse 中使用 IClassFile 时如何检查注解？

这似乎不起作用 classFile.getClass().isAnnotationPresent？任何帮助表示赞赏。

使用问题

```
for (final IClassFile classFile : classFiles) {
    IAnnotation[] annotations = classFile.getType().getAnnotations(); 
```

是我必须获取所有包，然后获取该包中的类文件，然后获取注释。它将需要 3 个循环。有没有办法减少这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:02:48.153

`instead. Take a look at the source code for the`我会说您找到注释的最简单方法是通过三重循环，但使用“SearchEngine org.eclipse.jdt.internal.junit.launcher ”可能会稍微快一些（假设您正在寻找特定的注释）.JUnit4TestFinder` 类。它查找使用@Test 或@RunWith 注释的（源）类，这与您想要执行的操作类似，但针对的是二进制类。

你会做这样的事情：

```
IJavaElement[] allPackagesToSearch = ...
SearchRequestor requestor = <implement the SearchRequestor abstract class and store all matches>

IJavaSearchScope scope= SearchEngine.createJavaSearchScope(binaryPackages, IJavaSearchScope.APPLICATION_LIBRARIES);
int matchRule= SearchPattern.R_EXACT_MATCH | SearchPattern.R_CASE_SENSITIVE;
SearchPattern runWithPattern= SearchPattern.createPattern("com.foo.MyAnnotation", IJavaSearchConstants.ANNOTATION_TYPE, IJavaSearchConstants.ANNOTATION_TYPE_REFERENCE, matchRule);
SearchParticipant[] searchParticipants= new SearchParticipant[] { SearchEngine.getDefaultSearchParticipant() };
new SearchEngine().search(annotationsPattern, searchParticipants, scope, requestor, new SubProgressMonitor(pm, 2)); 
```

这有点拗口，要弄清楚它是如何工作的，我建议阅读 SearchEngine、SearchPattern 和 SearchRequestor 的 JavaDoc。

如果要查找*所有*注释，则更改匹配规则，而不是“com.foo.MyAnnotation”，使用“*”。

# android - 如何确保 edittext 字段不为空？

> ID：12505196
> 
> 赞同：0
> 
> 时间：2012-09-20T01:59:16.877
> 
> 标签：android, android-edittext, toast

我有 2 个 edittext 字段，它需要项目名称（字符串）和数量（整数）。如果用户在两个字段中均未输入任何内容，或者即使只有一个字段为空，我想显示一个祝酒词“请输入项目”或“请输入数量”。它创造和错误。这是下面的片段：

```
 public void onClick(DialogInterface dialog, int id) {

                        String item = itemET.getText().toString();
                        int quantity = Integer.parseInt(quantityET.getText().toString());
                        if(itemET.equals("")){
                            Toast t =Toast.makeText(GroceryList.this, "Please enter item", 5000);
                            t.show();   
                            }
                            if(quantityET.equals("")){
                            Toast t =Toast.makeText(GroceryList.this, "Please enter quantity or enter 0 if none", 5000);
                            t.show();
                            } 
```

这是logcat中的错误：

```
09-19 10:01:51.766: E/AndroidRuntime(527): FATAL EXCEPTION: main
09-19 10:01:51.766: E/AndroidRuntime(527): java.lang.NumberFormatException: unable to parse '' as integer
09-19 10:01:51.766: E/AndroidRuntime(527):  at java.lang.Integer.parseInt(Integer.java:362)
09-19 10:01:51.766: E/AndroidRuntime(527):  at java.lang.Integer.parseInt(Integer.java:332)
09-19 10:01:51.766: E/AndroidRuntime(527):  at com.mexican.recipes.GroceryList$1$1.onClick(GroceryList.java:60)
09-19 10:01:51.766: E/AndroidRuntime(527):  at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
09-19 10:01:51.766: E/AndroidRuntime(527):  at android.os.Handler.dispatchMessage(Handler.java:99)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at android.os.Looper.loop(Looper.java:123)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at java.lang.reflect.Method.invokeNative(Native Method)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at java.lang.reflect.Method.invoke(Method.java:507)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 09-19 10:01:51.766: E/AndroidRuntime(527):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T14:45:31.247

请注意，您可以使用 setError("error");

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:42:47.793

此代码中有两个单独的问题：在空字符串上调用 parseInt 会引发异常（您看到的错误），并且您正在对 EditText 对象本身进行 .equals 比较，而不是对包含在里面的字符串. 请执行下列操作：

```
public void onClick(DialogInterface dialog, int id) {

   String itemString = itemET.getText().toString();
   String quantityString = quantityET.getText().toString();
   int quantity;

   if(itemString.equals(""))
   {
      Toast t =Toast.makeText(GroceryList.this, "Please enter item", 5000);
      t.show();   
   }

   if(quantityString.equals("")){
      Toast t =Toast.makeText(GroceryList.this, "Please enter quantity or enter 0 if none", 5000);
      t.show();
   }
   else {
      quantity = Integer.parseInt(quantityString);
   }
} 
```

如果您提供的不是数字（例如，如果您在框中键入“a”），这仍然会崩溃，但它应该能够处理任何输入的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T02:03:52.267

在创建 EditText 时声明`android:inputType="number"`属性 init 只接受数值。

```
 public void onClick(DialogInterface dialog, int id) 
    {
                String item;
                int quantity;
                if ( itemET != null )
                {
                     item = itemET.getText().toString();
                }

                if ( quantityET != null && quantityET.getText().toString().trim().length() > 0 )
                {
                     quantity = Integer.parseInt(quantityET.getText().toString().trim());  // trim() method added when converting String to Integer
                }
        if(itemET.getText().trim().equals(""))  // Modification done here
        {
            Toast t =Toast.makeText(GroceryList.this, "Please enter item", 5000);
            t.show();   
        }
        if(quantityET.getText().trim().equals(""))  // Modification done here
        {
            Toast t =Toast.makeText(GroceryList.this, "Please enter quantity or enter 0 if none", 5000);
            t.show();
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T02:12:32.583

以上2个答案都不好，因为：

```
String item = itemET.getText().toString(); 
```

在这里你应该检查一下`item`，如果你愿意，但不是在这条线上是崩溃。

```
int quantity = Integer.parseInt(quantityET.getText().toString()); 
```

这是问题所在，因为`quantityET`有一个空字符串并且没有被检查。

有两种解决方案：一种是检查`quantityET.getText()`不为空且长度> 0，第二种是将 Try-catch 用于`Integer.parseInt(value)`

我会结合2：

```
String quantity = quantityET.getText().toString();
if(quantity != null && quantity.length() > 0){
   try{
     int iQuantity = Integer.parseInt(quantityET.getText().toString());
   }catch(NumberFormatException nfe){
      Log.e("your tag", e);
   }
} 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T02:48:22.210

尝试这样的事情：

```
public void onClick(DialogInterface dialog, int id) {
    int quantity;
    String item;
    if(itemET.getTExt.toString().trim()!="") {
        item = itemET.getText().toString();   
    } else {
        Toast t =Toast.makeText(GroceryList.this, "Please enter item", 5000);
        t.show();   
    }

    if(quantityET.getText().toString().trim()!="") {
        quantity = Integer.parseInt(quantityET.getText().toString().trim());
    } else {
        Toast t =Toast.makeText(GroceryList.this, "Please enter quantity or enter 0 if none", 5000);
        t.show();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-27T10:28:31.623

```
 if(editText.getText().toString().length()==0)
        Toast.makeText(Registration.this, "Plz Enter Your name", Toast.LENGTH_LONG).show();

    else if (editText1.getText().toString().length() == 0)
        Toast.makeText(Registration.this, "plz enter mobile no.", Toast.LENGTH_LONG).show();
    else {
        Intent i = new Intent(getApplicationContext(), MainActivity.class);
        startActivity(i);
        finish();
    } 
```

# install4j - install4j 可以在欢迎页面自定义语言选择吗？

> ID：12505207
> 
> 赞同：0
> 
> 时间：2012-09-20T02:01:29.053
> 
> 标签：install4j

我使用 install4j 进行多语言安装，

我们可以在 jre initial 之后选择语言，但我想自定义带有欢迎页面的语言选择包。

有什么可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:40:25.640

您不能在常规屏幕上更改语言，因为必须在初始化屏幕/动作系统之前设置语言。

但是，安装程序具有“语言代码替换脚本”属性。您可以使用它来显示您自己的语言选择 GUI 或添加您自己的逻辑来选择安装程序语言。

# c++ - 将正则表达式转换/编译为 C 代码

> ID：12505210
> 
> 赞同：2
> 
> 时间：2012-09-20T02:02:02.327
> 
> 标签：c++, regex, compiler-construction

我在内存有限的系统上，`boost::regex`太大了。有哪些选项可以将我的正则表达式直接编译为 C/C++ 以及我应该排除多少 KB 的代码大小？以尽可能减少内存和代码大小为目标。

我正在寻找小于 100kb 的代码大小和相同的内存使用量。Boost 正则表达式似乎是大约 470kb，这太大了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T03:32:15.147

`lex`（并且`flex`）生成通常很小的表驱动的词法分析器；他们回到了 100kB 被认为是超级计算机的时代 :) 基本`flex`代码骨架很小（几 kB），表格取决于您拥有多少令牌类型以及正则表达式的复杂程度，但是一个简单的`flex`扫描仪表通常也只有几 kB。

但是，如果您不使用它们来构建解释器/编译器，它们确实有一些令人讨厌的特性：首先，它们坚持为您进行输入和缓冲，如果您总是从文件中读取，这很好但是如果您的输入来自套接字或终端（或者，更糟糕的是，被某种翻译器预处理），则可能不那么酷，其次它们是为您有一些简单令牌类型的环境而设计的，并且您有一个负责解释排序的解析器。（因此`yacc`或`bison`。）当然，您可以使用这些工具来解析 HTTP，并且您甚至可能会发现您已经学到了一些有用的新技能。

有一个名为`re2c`（即 C 的正则表达式）的工具，您可能会觉得它更舒服一些。与 不同`lex`的是，它会生成定制的 C 代码，这有点笨重，但可以说运行速度稍快一些。我不认为它得到了积极的维护，但几年前我已经取得了相当大的成功。您应该可以[在 SourceForge 上](http://sourceforge.net/projects/re2c/)找到它。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:15:55.470

人们似乎忘记了这个问题早已被[**`lex`**and**`yacc`**](http://dinosaur.compilertools.net/)解决了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T00:28:45.383

re2c 是一个旨在做到这一点的应用程序

[http://sourceforge.net/projects/re2c/](http://sourceforge.net/projects/re2c/)

（也可作为 debian 包等提供）

许可：公共领域

或者，可以将正则表达式编译为字节码并仅链接 pcre2 的解释器部分（或您想要的任何正则表达式样式），例如：

[https://www.pcre.org/current/doc/html/pcre2api.html#SEC25](https://www.pcre.org/current/doc/html/pcre2api.html#SEC25)

> 可以将编译后的模式保存在磁盘或其他地方，并在以后重新加载它们，但会受到许多限制。重新加载模式的主机必须运行相同版本的 PCRE2，具有相同的代码单元宽度，并且还必须具有相同的字节序、指针宽度和 PCRE2_SIZE 类型。在保存已编译的模式之前，必须将它们转换为“序列化”形式，**在 PCRE2 的情况下，这实际上只是一个字节码转储**。名称以 pcre2_serialize_ 开头的函数用于在序列化形式之间进行转换。它们在 pcre2serialize 文档中进行了描述。请注意，PCRE2 序列化不会将编译模式转换为抽象格式，如 Java 或 .NET 序列化。

因此，要包含 RCRE2 的预编译正则表达式，您可能需要在目标系统上或在仿真下运行编译。

# ruby-on-rails - 在 Rails 中使用 hstore 让用户动态输入属性和值

> ID：12505216
> 
> 赞同：1
> 
> 时间：2012-09-20T02:02:32.563
> 
> 标签：ruby-on-rails, postgresql, hstore

我正在尝试在 Rails 中使用 hstore gem，我想创建一个表单，用户可以在其中输入属性和值。假设我的`properties`表中有一个 hstore 列，示例哈希将`properties => {"x": "y"}`是输入 x 和 y 的位置，并且属性是动态创建的。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:05:58.040

查看 railscasts.com 并观看 HStore 插曲。它将向您展示如何设置所有内容......它还有一个很好的元编程示例。

# perl - CGI Perl - 改变动作和模式变量

> ID：12505219
> 
> 赞同：2
> 
> 时间：2012-09-20T02:03:03.953
> 
> 标签：perl, variables, cgi, action, mode

我有点 CGI Perl 的新手，并且正在开发一个使用“模式”和“动作”变量来确定加载哪些页面的 Web 应用程序。

```
$mode   = param('mode');
$action = param('action');

  if ($mode eq 'page1') {

      if ($action 'eq') {

          &performAction;
      }
      displayPage1;
  }
  elsif ($mode eq 'page2') {

      &displayPage2
  } 
```

在开发过程中，在表单提交后尝试导航到不同的模式/操作时，我一直无法找出设置这些变量的最佳方法。

在某些情况下，在表单中添加隐藏值会起作用

```
hidden(-name=>'action',-value=>'save') 
```

但有时它不会。在后者的情况下，将 param('action',"save") 放在表单之前将在提交表单时更改操作。 **我无法弄清楚为什么会发生这种情况，是否有影响我不知道的这两个变量的因素？**

我现在需要做的是在同一个表单上有两个按钮，一个将设置保存表单数据的操作，另一个将保存表单数据但导航到具有该表单数据的另一个模式/页面。

**如果有人至少能指出我应该研究的正确方向，我将不胜感激。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:24:30.553

默认情况下，CGI 模块实现了一种称为“粘性”字段的状态保持行为。它的工作方式是，如果您正在重新生成表单，生成表单字段值的方法将询问 param() 以查看查询字符串中是否存在类似名称的参数。如果他们找到同名参数，他们将使用它来设置默认值。

你要

```
hidden(-name=>'action', -value=>$new_value, -override=>1) 
```

或者

```
hidden(-name=>'action', -value=>'default_value')

param('hidden_name', $new_value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:22:25.653

这是一个尝试，不确定它是否有效。

尝试在按钮之前设置隐藏变量并在每个按钮之前更改它，因此应该采用新值。

例如：

```
<input type='hidden' name='op' value='save'/>
<input type='submit' name='Save Form' value='SaveForm'/>
<input type='hidden' name='op' value='submit'/>
<input type='submit' name='Submit Form' value='SubmitForm'/>
<input type='hidden' name='op' value='cancel'/>
<input type='submit' name='Cancel Form' value='CancelForm'/> 
```

您可以在 perl 脚本中检查隐藏变量“op”。

# iphone - Dropbox ios 不会从非主线程调用委托

> ID：12505223
> 
> 赞同：1
> 
> 时间：2012-09-20T02:03:52.400
> 
> 标签：iphone, ios, dropbox, dropbox-api

我已经为每个上传到 Dropbox 的文件实现了一个 NSOperationQueue。我正在为该操作的线程的每个操作设置委托。我没有得到任何委托方法的回调。

如果使用主线程，同样的过程可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:25:08.490

问题是保管箱委托在另一个线程中注册。我正在使用带有 NSQueue 的 NSOperation 我只是继续轮询操作未完成。

```
while (_state != DropboxOperationStateFinished)
{
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
} 
```

# objective-c - 认证后无法获取用户信息，facebookSDK，ios

> ID：12505227
> 
> 赞同：1
> 
> 时间：2012-09-20T02:04:06.997
> 
> 标签：objective-c, ios, facebook

我正在尝试通过以下方式使用 facebook 帐户进行身份验证

```
- (IBAction)logInByFaceBook:(id)sender {
    NSLog(@"appDelegate.session.isOpen = %@",appDelegate.session.isOpen == 0 ? @"NO" : @"YES");

    FBSessionLoginBehavior behavior =   FBSessionLoginBehaviorForcingWebView;
    appDelegate.session             =   [[FBSession alloc] init];

    [appDelegate.session  openWithBehavior:behavior 
                         completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                             NSMutableDictionary     *dict  =   [[NSMutableDictionary alloc] init];

                             [dict setObject:[NSNumber numberWithBool:YES]   forKey:@"didLogIn"];

                             data                           =   [[SavedData alloc] initLogInInfo:dict];
                             [data saveLogInInfoToDisk];

                             if (session.isOpen) {
                                 FBRequest *me              =   [FBRequest requestForMe];
                                 NSLog(@"me is %@",[me description]);

                                 [me startWithCompletionHandler: ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *my, NSError *error) {
                                     NSLog(@"my is %@",[my description]);
                                  }
                                  ];
                             }
                             [self dismissViewControllerAnimated:YES completion:nil];

                         }
     ];
} 
```

但是，我无法`username`退缩，控制台正在显示

```
Error: HTTP status code: 400
my is (null) 
```

通过查找此[文档](http://fbdevwiki.com/wiki/Error_codes)，400 意味着`Invalid email address`.....并且`my`为空，因此我根本无法提取`username`.....

我不知道为什么会发生这种情况...我尝试使用与 facebookSDK 示例代码相同的电子邮件地址，它可以正常工作...

现在迷路了....有人可以指出我做错了什么或遗漏了什么。

# javascript - 从计算的总数中减去一个整数

> ID：12505229
> 
> 赞同：2
> 
> 时间：2012-09-20T02:04:33.093
> 
> 标签：javascript, math

我已经构建了一个脚本来添加数量/单位并生成显示销售税的总计。

在计算和添加 GST（10% 销售税）之前，如何让这个计算器识别 #discount 并将其从总数中减去？

另外，页面加载时是否可以生成总数？而不是用户必须按下“生成总计”按钮？

HTML

```
<ul>
<li> Item 1 (<input type="text" name="others" size="4" value="5" readonly="readonly" class="readonly_field"/> units)</li>
<li> Item 2 (<input type="text" name="others" size="4" value="1" readonly="readonly" class="readonly_field"/> units)</li>
<li> Item 3 (<input type="text" name="others" size="4" value="3" readonly="readonly" class="readonly_field"/> units)</li>
</ul>

<input type="button" value="Generate Total" onclick="total()"  /><br><br>

Discount <input type="text" id="discount" name="discount" value="500"/><br><br>

Total Units: <input type="text" id="units_total" name="units_total" readonly="readonly" /><br>
Sub Total: <input type="text" id="sub_total" name="sub_total" readonly="readonly" /><br>
Includes GST: <input type="text" id="gst_total" name="gst_total" readonly="readonly" /><br>
Total: <input type="text" id="g_total" name="g_total" readonly="readonly" /> 
```

JS

```
function total(){
var total_value = 0;
var all_others = document.getElementsByTagName("input");

for(var i=0; i<all_others.length; i++){
if(all_others[i].type!="text" || all_others[i].name!="others"){
    continue;
}
total_value += parseFloat(all_others[i].value);
}

document.getElementById("units_total").value = (total_value).toFixed(1);

document.getElementById("sub_total").value = ((total_value) *100).toFixed(2);

document.getElementById("g_total").value = (((total_value * 10/100) + total_value) * 100).toFixed(2);

document.getElementById("gst_total").value = ((total_value * 10/100) * 100).toFixed(2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:32:45.293

首先，要让您的函数在窗口加载时执行，请将其包装在加载事件中：

```
window.onload = function() {
    total();
} 
```

其次，为了得到折扣，你只需要修改你的变量几次，但是当把它们加在一起时，确保你用以下方式解析它们`.parseFloat()`：

```
if (document.getElementById('discount').value != '') {
    var discount = document.getElementById('discount').value;
}
else {
    var discount = 0;
}
var sub_total = (((total_value) * 100).toFixed(2) - discount).toFixed(2);
var gst = ((total_value * 10 / 100) * 100).toFixed(2);

document.getElementById("sub_total").value = sub_total;

document.getElementById("gst_total").value = gst;

document.getElementById("g_total").value = (parseFloat(sub_total) + parseFloat(gst)).toFixed(2); 
```

[**演示**](http://jsfiddle.net/ugH94/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:15:32.757

首先，我建议您在服务器端和客户端都执行验证和计算。第一个可确保安全性，而第二个可提高 UI 的响应能力。

也就是说，你最好引入几个支持变量并对其进行计算。您应该从您有兴趣使用的元素中获取值`getElementById`并将其存储在变量中。然后你应该对这些变量执行计算，最后将结果放在你想要用来向用户显示它们的元素中。

要在页面加载时执行操作，请查看[this](http://www.w3schools.com/jsref/event_body_onload.asp)。

# c# - ContextMenu 取消选择树视图项

> ID：12505232
> 
> 赞同：0
> 
> 时间：2012-09-20T02:05:14.323
> 
> 标签：c#, .net, wpf, treeview

当通过右键单击树视图上的项目弹出我的上下文菜单时，选定的行会被取消选择，但我希望选择持续存在。我该怎么做呢？

```
 <TreeView Name="ProgramTree" ItemsSource="{Binding ProgramItemCollection}">
      <TreeView.ContextMenu>
           <ContextMenu StaysOpen="True"> 
                <MenuItem Header="Open"/>
                <MenuItem Header="Check Syntax"/>
           </ContextMenu>
      </TreeView.ContextMenu>
      ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:30:28.553

实际上它不会取消选择您的项目。可能您会看到带有灰色背景的项目。那是焦点树视图项处于非活动状态时的颜色。您需要使用样式来摆脱这种情况。有一个类似的[问题](https://stackoverflow.com/questions/4217735/wpf-selected-unfocused-color-of-listviewitem-with-a-gridview)

# matlab - 从上面的行中减去元素以创建新行（Matlab）

> ID：12505244
> 
> 赞同：3
> 
> 时间：2012-09-20T02:07:28.080
> 
> 标签：matlab, matrix

我有一个如下矩阵：

一个=

```
 5     2    10    14    11 
```

我希望使用这些数据创建一个额外的行。第五列第二行中的元素是常数且已知：100

通过从上面的行中减去，我希望插入这些值

乙 =

```
63    65    75    89   100 
```

例如 100-11 = 89。89-14=75

最终给出以下内容：

[A;B]

答案=

```
 5     2    10    14    11
63    65    75    89   100 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T02:24:00.923

`A`您可以通过 MATLAB 函数使用 的元素的累积和`cumsum`来执行此计算：

```
knownvalue = 100; 
firstrow = [5     2    10    14    11]
secondrow = fliplr(knownvalue  - cumsum([0 firstrow(end:-1:2)])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T02:27:47.437

我相信你所追求的是：

```
A = [5, 2, 10, 14, 11];
Soln = [A; 100 * ones(1, length(A))];
Soln(2, 1:end - 1) = 100 - fliplr(cumsum(fliplr(A(2:end)))); 
```

**编辑：**可能会选择 cjh 的解决方案（+1）。它需要少调用一次 Fliplr，因此可能更快。

# dependency-injection - ValidationAttribute 的 Autofac 和 DI

> ID：12505245
> 
> 赞同：-1
> 
> 时间：2012-09-20T02:07:33.887
> 
> 标签：dependency-injection, autofac, validationattribute, test-project

我有以下验证属性类：

```
public class ZipCodeValidationAttribute : ValidationAttribute
{
    private readonly IValidationRepository _repository;

    public override bool IsValid(object value)
    {
        var repository = _repository;

        return repository.IsPostalCodeValid((string) value);

    }
} 
```

为了测试，我尝试使用 Autofac 作为我的 IOC 并使用属性注入。我已经按如下方式设置了测试：

```
 [TestMethod]
 public void When_PostalCodeAttribute_Given_ValidPostalCode_Then_SystemReturnsTrue()
 {
        // arrange
        var value = "53051";
        var containerBuilder = new ContainerBuilder();
        containerBuilder.RegisterType<ValidationRepository>().As<IValidationRepository>().InstancePerDependency();
        containerBuilder.RegisterType<ZipCodeValidationAttribute>().PropertiesAutowired();
        var container = containerBuilder.Build();

        var attrib = container.Resolve<ZipCodeValidationAttribute>();

        // act
        var result = attrib.IsValid(value);

        // assert
        Assert.IsTrue(result);
 } 
```

在测试期间，我的存储库没有被解析。Autofac 新手，希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-05T09:53:02.567

[我在这个答案](https://stackoverflow.com/a/35214460/11635)中解决了整个问题（在`Validator.TryValidate`etc / ASP.NET MVC 等的控制下触发 DI），使人们能够编写：

```
class MyModel 
{
    ...
    [Required, StringLength(42)]
    [ValidatorService(typeof(MyDiDependentValidator), ErrorMessage = "It's simply unacceptable")]
    public string MyProperty { get; set; }
    ....
}

public class MyDiDependentValidator : Validator<MyModel>
{
    readonly IUnitOfWork _iLoveWrappingStuff;

    public MyDiDependentValidator(IUnitOfWork iLoveWrappingStuff)
    {
        _iLoveWrappingStuff = iLoveWrappingStuff;
    }

    protected override bool IsValid(MyModel instance, object value)
    {
        var attempted = (string)value;
        return _iLoveWrappingStuff.SaysCanHazCheez(instance, attempted);
    }
} 
```

使用一些帮助类（看那里），您可以在 ASP.NET MVC 中将其连接起来，如下所示`Global.asax`：-

```
DataAnnotationsModelValidatorProvider.RegisterAdapterFactory(
    typeof(ValidatorServiceAttribute),
    (metadata, context, attribute) =>
        new DataAnnotationsModelValidatorEx(metadata, context, attribute, true)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T04:21:13.053

您需要将 声明`repository`为由 Autofac 自动连接的属性。

```
public class ZipCodeValidationAttribute : ValidationAttribute
{
    public IValidationRepository Repository { get; set; }

    public override bool IsValid(object value)
    {
        return Repository .IsPostalCodeValid((string) value);
    }
} 
```

# xcode - 将部分屏幕截图复制到粘贴板

> ID：12505247
> 
> 赞同：1
> 
> 时间：2012-09-20T02:07:55.133
> 
> 标签：xcode, uipasteboard

因此，将我的部分屏幕复制到粘贴板的代码可以正常工作，因为它成功地将其复制到我的相册中。但是，我希望能够将部分屏幕截图粘贴到新的 SMS 消息中。我知道它必须手动完成（长时间按住消息和粘贴），但它要么什么都不粘贴，要么没有粘贴选项（因为它将它保存为字符串）。代码的中间部分是我正在努力的部分。任何帮助都会很棒。我已将 forPasteboardType 更改为“图像”，但这也不起作用。

```
 //Capture part of Screen Shot
        UIGraphicsBeginImageContext(self.view.bounds.size);
        CGContextRef c = UIGraphicsGetCurrentContext();
        CGContextTranslateCTM(c, 0, 98);    //
        [self.view.layer renderInContext:c];
        UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

    //Send Screenshot to Pasteboard    
    UIPasteboard *pasteBoard = [UIPasteboard pasteboardWithName:UIPasteboardNameGeneral create:YES];
    pasteBoard.persistent = YES;
    NSData *data = UIImagePNGRepresentation(viewImage);
    [pasteBoard setData:data forPasteboardType:(NSString *)kUTTypePNG];     

    /////// Open SMS
    MFMessageComposeViewController *controller = [[[MFMessageComposeViewController alloc] init] autorelease];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hello from me, paste image here -->";
        controller.recipients = [NSArray arrayWithObjects:@"123456789", nil];
        controller.messageComposeDelegate = self;
        [self presentModalViewController:controller animated:YES];
    }
    ////// End SMS
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:55:19.453

```
//Capture part of Screen Shot
UIGraphicsBeginImageContext(self.view.bounds.size);
CGContextRef c = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(c, 0, 98);    //
[self.view.layer renderInContext:c];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//Send Screenshot to Pasteboard    
UIPasteboard *pasteBoard = [UIPasteboard pasteboardWithName:UIPasteboardNameGeneral create:YES];
pasteBoard.persistent = YES;
NSData *data = UIImagePNGRepresentation(viewImage);
[pasteBoard setData:data forPasteboardType:(NSString *)kUTTypePNG];     

NSString *stringURL = @"sms:";
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

# twitter-bootstrap - Bootstrap 2.1.1 和工具提示

> ID：12505248
> 
> 赞同：2
> 
> 时间：2012-09-20T02:08:17.583
> 
> 标签：twitter-bootstrap, tooltip

jsfiddle：http: [//jsfiddle.net/eMh4r/](http://jsfiddle.net/eMh4r/)

对不起，我是一个新手，但我正在尝试使用引导程序的前端来获得一个工具提示。我不太确定发生了什么，如果能帮助工具提示以与 Bootstrap 网站上相同的方式工作，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:23:46.310

以下怎么样：http: [//jsfiddle.net/eMh4r/31/](http://jsfiddle.net/eMh4r/31/)

我认为它在您的小提琴中不起作用的一个原因是您没有引用引导程序 .js 或 .css。此外，您的选项应该以 .tooltip({"optionName" : "optionValue"}); 形式作为对象传递。

# django - 没有返回 HttpResponse 对象

> ID：12505250
> 
> 赞同：0
> 
> 时间：2012-09-20T02:08:18.313
> 
> 标签：django, requestcontext

我不知道为什么这不起作用，请帮助

```
views.py

def addaNonProfit(request):
    """we need NonProfits.""" 
    if request.method == 'POST':
        form = NonProfitForm(request.POST)
        if form.is_valid():
            new_nonProfit = form.save(request.user)
            return HttpResponseRedirect(reverse(new_nonProfit, args=(new_nonProfit.slug,)))
    else:
        form = NonProfitForm()
        return render_to_response('addaNonProfit.html',{'form': form},context_instance=RequestContext(request))

def nonProfit(request,slug):
    """ we need a page to serve info about non profit pages"""
    np = get_object_or_404(NonProfit,slug=slug)
    return render_to_response('nonProfit.html',{'nonProfit':np},context_instance=RequestContext(request)) 
```

还是行不通

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/addaNonProfit/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'registration',
 'DandT',
 'paypal.standard.ipn',
 'django.contrib.comments')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  129\.                     raise ValueError("The view %s.%s didn't return an HttpResponse object." % (callback.__module__, view_name))

Exception Type: ValueError at /addaNonProfit/
Exception Value: The view RaffleMe.views.addaNonProfit didn't return an HttpResponse object. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:52:19.450

如果表单无效，您不会返回响应：

您可以`return render_to_response`向左移动一个缩进块

```
def addaNonProfit(request):
    """we need NonProfits.""" 
    if request.method == 'POST':
        form = NonProfitForm(request.POST)
        if form.is_valid():
            new_nonProfit = form.save(request.user)
            return HttpResponseRedirect(reverse(new_nonProfit, args=(new_nonProfit.slug,)))
    else:
        form = NonProfitForm()
    return render_to_response('addaNonProfit.html',{'form': form},context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:48:57.930

如果方法是 POST 并且表单无效，则不会返回任何内容。您必须从视图中的每条路径返回一个`HttpResponse`。

# delphi - 如何缩小堆栈溢出异常？

> ID：12505251
> 
> 赞同：1
> 
> 时间：2012-09-20T02:08:25.113
> 
> 标签：delphi

我有最后期限。我在谷歌搜索，我在阅读代码，我需要帮助......

我的应用程序正在抛出 EStackOverFlow。需要通宵测试才能发现错误，所以我需要一些好的想法，否则需要*很长时间*才能找到。

我昨晚用 MAD except 尝试过，但没有抓住它，大概是因为没有堆栈可以这样做。我是从 IDE 运行的，所以我中断了执行并查看了调用堆栈，但除了细节之外，它充满了 MAD（我已经联系了作者，但我们之间存在很大的时间差异）。

没有（故意）递归递归例程。没有 OnChange 处理程序（这可能会意外更改它们监视的组件，从而递归调用它们自己）。没有大型数据结构（可能作为参数在堆栈上传递）。

我的第一个想法是关闭 MAD except，但我不能再等 12 或 16 个小时才能崩溃。

在无人看管的情况下，当计时器每 30 秒或每小时到期时，程序正在执行一些数据库访问，所以我将它们设置为 1 秒，希望能加速崩溃。嗯，我可以减少堆栈大小以加速崩溃吗？如果是这样，怎么做？

我还可以做些什么？我已经将我的应用程序主文件包装在 Try ... 中，其中创建了表单并运行了应用程序。

是否有一些点，例如消息处理循环，我可以在其中检查堆栈大小并查看它是否增长“太大”？（如果有，能否提供详细信息？）

还有什么建议吗？提前致谢

（ps代码太大，无法发布）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T09:44:48.693

最常见的stackoverflow问题是函数调用本身，尽量避免它，或者至少限制它。

您说您使用计时器，您是在计时器事件中调用 Application.ProcessMessages 吗？如果队列中有很多消息，如果它是另一个 WM_TIMER，这可能会导致堆栈溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T06:02:08.847

作为。我上面提到的 Profiler 方法可能会给你带来纯粹的运气（如果有一些杂散的分支会导致你发生罕见但即时快速的泄漏。比如说，在 100 个案例变体中，只有一个会导致无限递归）。但是，如果有稳定的累积泄漏，需要整晚才能累积，那么探查器的结果将无法与正常工作区分开来。

我想了一下。当前的假设是堆栈跟踪器失败，因为没有剩余堆栈。让我们抓住它。然后我们将在堆栈结束之前抛出异常，是吗？所以我会尝试这个序列：

1）我将堆栈跟踪器设置为记录完整的堆栈跟踪，包括行号。它可以在 Delphi IDE 使用的 JCL 跟踪器中完成，我认为 madExcept 也可以。

2）我想知道当前的堆栈大小。例如[使用 Visual Studio 确定堆栈空间](https://stackoverflow.com/questions/1740888/determining-stack-space-with-visual-studio)

3）我会定期检查使用的堆栈空间。例如[，什么是安全的最大堆栈大小或如何衡量堆栈的使用？](https://stackoverflow.com/questions/6150018/what-is-a-safe-maximum-stack-size-or-how-to-measure-use-of-stack)

*注意：因为我们几乎不知道是哪个线程导致了这个 - 如果我有几个线程，我会尝试使用所有这些。我只是不知道如果某些辅助线程因 SO 而失败，应用程序将如何反应，它是否会被拦截和记录，或者整个应用程序会因为一个线程而被炸毁*

4) ~ 每 5 分钟记录一次当前的堆栈使用情况 - 只是为了查看模式，如果它正在稳步缓慢地运行，或者它是一些罕见但严重的代码路径。 *如果有多个线程 - 然后每个线程有多个日志文件* 它还允许估计“正常”堆栈使用情况。

5）如果堆栈使用率提高到 80% 以上（我认为你上面的“正常”使用 todl 不会超过它，不是吗？）我会提出手动异常，一些特殊类直到线程/应用程序顶部才会被捕获级别，在顶层甚至可能做一些复杂的事情，比如将应用程序暂停到调试器并唤醒你，这样你就可以远程连接并检查生病但尚未死亡的应用程序的内部状态。

# c# - ASP.net 应用程序无法连接到 SQL Server 命名实例

> ID：12505252
> 
> 赞同：-1
> 
> 时间：2012-09-20T02:08:29.380
> 
> 标签：c#, asp.net, sql, connection, connection-string

我们有一个位于防火墙外的应用程序，为了连接到数据库，我们打开了一个端口。我可以从我的 Visual Studio 连接到数据库，但我无法从防火墙外的产品站点连接

```
<add name="PRODConnectionString" connectionString="Data Source=IPAddress\SQL2008,58124;Initial Catalog=DBName;User ID=user_id;Password=password"
   providerName="System.Data.SqlClient" /> 
```

以上是我目前使用的连接字符串

任何人都可以帮我解决这个问题。

谢谢， 阿维纳什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:32:52.790

如果用户帐户（ID）是 Windows 帐户，请确保您这样做：

```
ID=ServerName\user_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:43:01.837

如果您通过防火墙连接，并通过其 IP 地址解析服务器，您确定 TCP 已启用为 SQL Server 上的传输之一，并且已在防火墙上打开了正确的端口？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:20:59.343

您在应用程序端也有防火墙吗？也许你已经在应用程序端阻止了传入的 sql 连接？

或者，也许您有内部 IP 地址而不是公共 IP？

我只是想想想连接可能失败的原因。

或者试试这个连接字符串：添加了“Network Library=DBMSSOCN”

```
<add name="PRODConnectionString" connectionString="Data Source=IPAddress\SQL2008,58124;Network Library=DBMSSOCN;Initial Catalog=DBName;User ID=user_id;Password=password" providerName="System.Data.SqlClient" /> 
```

添加的字符串将协议指定为[TCP/IP](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring%28VS.71%29.aspx)。

# .net - 在 IIS 上存储文本文件

> ID：12505257
> 
> 赞同：0
> 
> 时间：2012-09-20T02:09:42.227
> 
> 标签：.net, c#-4.0

我有一个托管在 IIS 上的网站。登录到我的页面的用户使用订单 ID 搜索有关订单的信息。我想在同一页面上显示特定用户过去搜索过的订单 ID 作为历史记录。因此，我决定将用户搜索到的那些订单 IDS 写入用户名下的文本文件中，并将其存储在 IIS 中的某个位置（如果可能，我不知道是否可能）并检索相同的内容以显示为订单历史记录。有人可以告诉我如何去做这个吗？任何帮助表示赞赏。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:24:06.543

就个人而言，我不会以您描述的方式接近您的目标。

因为您的应用程序显然已经有一个存储订单的数据库，所以我认为没有理由不将先前的搜索历史信息也放在那里。如果您有理由不这样做，我至少会将信息保存在一个 cookie 中，您的服务器代码可以相当简单地更新该信息。然而，使用 cookie 的缺点是用户的信息不会持久保存到其他机器或同一机器上的不同浏览器中。

您可以构建一个名为“last_searches”的相当简单的表，其中包含 user_id 和搜索字符串的字段。然后，您只需通过每次尝试的搜索以编程方式更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:22:56.040

是的，有可能。但是在 txt 文件中保存一个表格是一件困难的事情。您可以使用数据表并写入和读取 xml。

您将拥有一个结构化文件，我认为这是一个更好的选择。

数据表读取和写入的链接，我过去使用过这个并且更容易。

[http://msdn.microsoft.com/en-us/library/system.data.datatable.writexml.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.writexml.aspx)

[http://msdn.microsoft.com/en-us/library/system.data.datatable.readxml.aspx](http://msdn.microsoft.com/en-us/library/system.data.datatable.readxml.aspx)

# php - 循环遍历子对象名称未知的对象

> ID：12505260
> 
> 赞同：0
> 
> 时间：2012-09-20T02:10:11.830
> 
> 标签：php, object, loops, foreach

我有一个看起来像这样的 PHP 对象：

```
ObjectName:
  W1:
    D1
    D2
    D3
  W2:
    D1
    D2
    D3
    D4
    D5
  W4:
    D1
    D2
    D3
    D4 
```

我想遍历`W#`s，并在其中遍历`D#`s。使用：

```
foreach ($theObject as $key => $value) {
  echo "$key, $value";
} 
```

给我：

`ObjectName,`.

使用： foreach ($theObject->ObjectName as $key => $value) { echo "$key, $value"; } 什么也不输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:57:08.030

假设您正在循环的值是[可见](http://www.php.net/manual/en/language.oop5.visibility.php)的，那么以下内容应该可以工作：

```
foreach ($theObject as $key => $value) {
 foreach ($value as $k => $v) {
  echo "$k, $v";
 }
} 
```

根据您正在执行的操作，您可能希望查看[Iterator 接口](http://www.php.net/manual/en/class.iterator.php)以更好地控制循环遍历对象时发生的情况。

# iphone - 为什么这个简单的 SVG 在 iPhone 上不起作用？

> ID：12505266
> 
> 赞同：0
> 
> 时间：2012-09-20T02:11:50.987
> 
> 标签：iphone, ios, svg

我无法在运行 iOS 4.2.1 的 iPhone 上渲染简单的 SVG 矩形。代码直接取自[此处](http://www.w3schools.com/svg/tryit.asp?filename=trysvg_rect)的 w3schools 教程，或者您可以[在此处](http://archfirst.org/apps/svg-rect/)从我的服务器尝试。我了解 iOS 从 2.1 版开始支持 SVG，所以这应该可以！我错过了什么？

不用说，完全相同的文档可以在我的桌面浏览器和 iPad 上正确呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:27:56.457

恐怕您需要在旧版本的 Safari 和 Firefox 中将内容类型设置为 xml 以提供内联 SVG（但是，您可以在`img`标签中使用它，因为您不需要访问其 DOM）。如果您不想更改`doctype`或 扩展名，您可以让 Web 服务器处理它。在 Apache 中，您将在文档根目录中放置一个 .htaccess 文件并放入...

```
AddType application/xhtml+xml .html 
```

我不确定这是否会在其他地方引起任何副作用。您只能通过一些重写条件将其提供给旧版本的 Safari，但我对语法不太熟悉，无法给您一个直接的答案。

您可以在此处看到您的文件以 xhtml 形式提供：

[http://duopixel.com/stack/svg.html](http://duopixel.com/stack/svg.html)

# c - 实现 HTTP 1.0 服务器时的问题

> ID：12505269
> 
> 赞同：0
> 
> 时间：2012-09-20T02:12:20.130
> 
> 标签：c, string, http, unix, tokenize

我正在尝试用**C**实现一个简单的**HTTP**服务器

 **1.  读取请求
2.  检查它是否是 GET 请求
3.  从请求中读取 URL
4.  检查文件是否在服务器上并尝试打开它

我正在使用`strtok`字符串标记，我认为它弄乱了文件路径。`open`并且`fopen`总是返回错误代码并且无法打开任何文件。

这是我的代码：

```
/*
** parser.c
*/

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

#define MYPORT 3499    // the port users will be connecting to
#define BACKLOG 10     // how many pending connections queue will hold
#define MAXLEN 1024    //upper limit of the length of the string

int main(void)
{
    char input[MAXLEN]; //the line that is read from the client
    char * token1; //GET request
    char * token2; //filepath
    char tmpstring[MAXLEN]; //filesize
    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd, file open on file_fd
    struct sockaddr_in my_addr;    // my address information
    struct sockaddr_in their_addr; // connector's address information
    int sin_size;
    int yes=1;
    int n; //the amount of read characters from the client

    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }

    if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &yes, sizeof(int)) == -1) {
        perror("setsockopt");
        exit(1);
    }

    my_addr.sin_family = AF_INET;         // host byte order
    my_addr.sin_port = htons(MYPORT);     // short, network byte order
    my_addr.sin_addr.s_addr = INADDR_ANY; // automatically fill with my IP
    memset(&(my_addr.sin_zero), '\0', 8); // zero the rest of the struct

    if (bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) == -1) {
        perror("bind");
        exit(1);
    }

    if (listen(sockfd, BACKLOG) == -1) {
        perror("listen");
        exit(1);
    }

    while(1) {  // main accept() loop
        sin_size = sizeof(struct sockaddr_in);
        if ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr, &sin_size)) == -1) {
            perror("accept");
            continue;
        }

        printf("server: got connection from %s\n",inet_ntoa(their_addr.sin_addr));
    n = readline(new_fd, input, MAXLEN); //n is the amount of read characters
    if (n == -1) {
        perror("Unable to read line");
    }

    //Check if it is a GET message
    token1 = strtok(input," ");
    if(strcmp(token1, "GET") != 0)
    {
        send(new_fd, "Bad request\n", 30, 0);
    }
    else
    {
        //Retrieve the file path
        token2 = strtok(NULL, " ");
        if(token2 == NULL)
        {
            send(new_fd, "File path not specified\n", 23, 0); //Check if filename is empty

        }
        send(new_fd, token2, strlen(token2), 0); //test
        printf("%s", token2);
        if(token2[0] == '/') //remove the initial slash    
            memmove(token2, token2 + 1, strlen(token2));
        //char * path = "test.html"; //test line
        //char * buff;
        //int len = sprintf(buff, "1: %d 2: %d\n", strlen(token1), strlen(token2));
        //send(new_fd, buff, len, 0);
        //Check if file is on the server
        if(open(token2, O_RDONLY) < 0) //Error opening file
        {
            if(errno == EACCES)            
                send(new_fd, "Access error\n", 30, 0);
            else
                send(new_fd, "Not existed\n", 30, 0);

        }
        else
        {

            FILE * requested_file = fopen(token2, "r");
            if(requested_file == NULL) //
            {
                send(new_fd, "Error in fopen\n", 30, 0);
            }
            else
            {
                send(new_fd, "File found\n", 30, 0); //successful
            }
            fseek(requested_file, 0, SEEK_END); // move to the end of the file
            int end=  ftell(requested_file);    // get the position of the end of file
            int stringlen = sprintf(tmpstring, "file size: %d\n", end);
            send(new_fd, tmpstring, stringlen, 0);
        }

    }

        close(new_fd); //close connection
    }

    return 0;
}

//helper function for recieving text
int readline(int fd, char *buf, int maxlen)
{
    int n, rc;
    char c;

    for (n = 1; n < maxlen; n++) {
    if ((rc = read(fd, &c, 1)) == 1) {
        *buf++ = c;
        if (c == '\n')
    break;
    } else if (rc == 0) {
        if (n == 1)
        return 0; // EOF, no data read
    else
        break; // EOF, read some data
        } else
    return -1; // error
    }

    *buf = '\0'; // null-terminate
    return n;
} 
```

所以我将**test.html**放在与服务器相同的文件夹中。然后我远程登录到**localhost**和**端口 3499**。这是输入时的输出`GET /test.html`：

```
/test.html
Not existed
rError in fopen
Connection closed by foreign host. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T05:16:06.820

尝试打开“test.html”而不是“\test.html”**

# java - 氛围力关闭。颤动

> ID：12505271
> 
> 赞同：-1
> 
> 时间：2012-09-20T02:12:39.120
> 
> 标签：java, android, forceclose, vibration

我有一行代码调用**Vibrator 服务**。

```
 if (vibe){
                        Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
                        v.vibrate(2000);
                        run();
                    } else {
                        run();
                    } 
```

我的应用程序正在强制关闭。是不是因为模拟器没有振动器？还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:29:19.363

是的，请记住，振动器警报不适用于 Android 模拟器。

# jquery - 样式验证错误与无法正常工作的输入一起显示

> ID：12505277
> 
> 赞同：0
> 
> 时间：2012-09-20T02:14:09.280
> 
> 标签：jquery, validation, css

我在表单上使用客户端验证。关注然后关闭输入会将验证错误呈现为`label`标签。标签正在显示`label`，但正在流向下一行。我尝试更改`display`为`inline-block`and `inline`，尝试调整`overflow`等。但我无法让它看起来正确。这是一个jsFiddle：

[http://jsfiddle.net/pp8Uw/](http://jsfiddle.net/pp8Uw/)

扩大包含表单的 div 似乎会将验证错误拉到一行，但我不想这样做。

**注意：**我将引导程序用于一些基本的 css，以便提供容器等。为了 jsfiddle，我稍微改变了开箱即用的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:38:02.670

[**检查这个 jsfiddle 演示**](http://jsfiddle.net/libinvbabu/pp8Uw/1/)

我只是改变`margin`了`.field_with_errors .message`.

```
.field_with_errors .message { 
    margin:-36px 135px 0;
} 
```

调整您的价值，使其处于您想要的位置。

干杯！！！

# mysql - 建立图书网站，使用什么 API 以及在数据库中存储什么？

> ID：12505283
> 
> 赞同：2
> 
> 时间：2012-09-20T02:15:14.427
> 
> 标签：mysql, ruby-on-rails, database, api, database-design

我正在创建一个书籍网站，人们可以在其中将书籍添加到他们的书架上。我目前正计划使用 Amazon API 或 Google 图书 API。我不确定如何在数据库中对其进行建模。

我应该查找一本书然后将所有书籍的信息存储在我的数据库中（ISBN、描述、标题、作者等）还是应该每次都查找所有这些信息？性能问题可能倾向于查找一次，而更新数据则倾向于每次查找......

如果我确实将它存储在数据库中，我如何使用亚马逊更新数据库（描述或价格等）？

如果我每次都查，如何让用户使用同一本书搜索其他用途？也许只存储 ISBN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:25:55.843

You can model the database with these tables to start with:

*   Books
*   Authors
*   User/Customer
*   BooksUserReading

When the user search for a book add them to your database. To keep the database updated with Amazon you can use a web service to run every 24 hours to check for updates.

Not sure how much this helps you.

# ruby-on-rails - 如何使用 instance_variable_set 正确设置实例变量？

> ID：12505289
> 
> 赞同：6
> 
> 时间：2012-09-20T02:16:33.443
> 
> 标签：ruby-on-rails, ruby

我正在查看[instance_variable_set](http://apidock.com/ruby/Object/instance_variable_set)的文档，并看到给出的示例代码是这样做的：

```
obj.instance_variable_set(:@instnc_var, "value for the instance variable") 
```

然后允许您在任何类的实例方法中以 @instnc_var 的形式访问变量。

我想知道为什么`:`在`@instnc_var`. 结肠有什么作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T02:28:23.387

我的第一直觉是告诉你不要使用`instance_variable_set`，除非你真的知道你在用它做什么。它本质上是一种用于元编程或绕过实例变量可见性的黑客工具。

也就是说，如果该变量没有设置器，则可以使用*无论如何*`instance_variable_set`设置它。如果您控制代码只创建一个设置器，那就更好了。

 *尝试查看绝大多数实例变量设置需求的[访问器。](https://stackoverflow.com/questions/5046831/why-use-rubys-attr-accessor-attr-reader-and-attr-writer)它们是一种惯用的方式，可以“免费”为您的实例变量获取 getter 和 setter，而无需编写这些函数。

如果您确实需要 instance_variable_set，它允许第一个参数是一个[符号](http://www.ruby-doc.org/core-1.9.3/Symbol.html)，它是要设置的实例变量的名称。冒号是 Ruby 语言的一部分，类似于“符号文字”：当您输入 时`:foo`，您创建了一个值为 foo 的符号，就像您`"bar"`直接在代码中输入时，您创建了一个值为“bar”的字符串文字”。*

# grails - how to use fckeditor in grails?

> ID：12505293
> 
> 赞同：0
> 
> 时间：2012-09-20T02:17:40.133
> 
> 标签：grails, grails-plugin, fckeditor, rich-text-editor, grails-2.0

I did the install:

> grails install-plugin fck-editor

i added to config:

```
fckeditor {
    upload {
        basedir = "/tmp/storagearea/"
        baseurl = "/uploads/"
        overwrite = false
        link {
            browser = true
            upload = false
            allowed = []
            denied = ['html', 'htm', 'php', 'php2', 'php3', 'php4', 'php5',
                      'phtml', 'pwml', 'inc', 'asp', 'aspx', 'ascx', 'jsp',
                      'cfm', 'cfc', 'pl', 'bat', 'exe', 'com', 'dll', 'vbs', 'js', 'reg',
                      'cgi', 'htaccess', 'asis', 'sh', 'shtml', 'shtm', 'phtm']
        }
        image {
            browser = true
            upload = true
            allowed = ['jpg', 'gif', 'jpeg', 'png']
            denied = []
        }
        flash {
            browser = false
            upload = false
            allowed = ['swf']
            denied = []
        }
        media {
            browser = false
            upload = false
            allowed = ['mpg','mpeg','avi','wmv','asf','mov']
            denied = []
        }
    }
} 
```

Paste

```
 <fck:editor width="600" height="400">HELLO</fck:editor> 
```

in my edit.gsp

The edit does not show in the browser.

full doc: [http://grails.org/plugin/fckeditor](http://grails.org/plugin/fckeditor) running ubuntu 10.04 LTS and grails 2.0.3

Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:41:29.400

FCKEditor 插件是一个很老的插件，两年没更新了。您应该使用跟踪最新版本 FCKEditor 的[CKEditor 插件](http://grails.org/plugin/ckeditor)，现在称为[CKEditor](http://ckeditor.com/)。

您需要嵌入编辑器的正确标签是`<ckeditor:editor>`. 您需要在 中包含`<ckeditor:resources />`以`<head>`包含实例化编辑器所需的 Javascript 和其他静态文件。

# ios - Login to Facebook comments using embedded UIWebView through Facebook SSO

> ID：12505296
> 
> 赞同：0
> 
> 时间：2012-09-20T02:18:08.313
> 
> 标签：ios, facebook, authentication, uiwebview, single-sign-on

Is there any method to login facebook comments embbedded in UIWebView using SSO?

In my case ,I am developing website and native ios app.

so I should embbed page like below link in my native app.

[http://techcrunch.com/2012/09/19/facebook-contact-sync/](http://techcrunch.com/2012/09/19/facebook-contact-sync/)

this page is using facebook comments.

If I ask users one more login, this problem can be solved.

But I want to login through facebook SSO.(Don't want to ask one more user's id and password)

[Facebook-ios-sdk with embedded UIWebView](https://stackoverflow.com/questions/4535479/facebook-ios-sdk-with-embedded-uiwebview)

this link showing me how to login my comments box in UIWebView using ios SDK...

is Answer at this link possible?

Get Access token using iOS facebook SDK,

and passing this token to java script at page to authentication user at comments box.

If it is possible, How to pass access token that acquired from ios SDK to java script SDK ?

or Does there exist another method?

I think easiest way to implement this is make session cookies for webview using access token.

but people saying this is impossible.

[Loading iPhone webviews as an Facebook SSO authenticated user?](https://stackoverflow.com/questions/6736869/loading-iphone-webviews-as-an-facebook-sso-authenticated-user)

is it still impossible at new version of SDK?

Thanks in advance!

# c - 从存储在一维和二维数组中的文件中读取逗号分隔值

> ID：12505297
> 
> 赞同：0
> 
> 时间：2012-09-20T02:18:34.017
> 
> 标签：c, arrays, string, multidimensional-array, fopen

我有如下代码，它基本上会读取一个文件，其内容类似于奥克兰、汉密尔顿、罗托鲁瓦、惠灵顿 0、125、235、660
125、0、110、535 235、110、0、460 660、535、460 , 0

现在我想要做的是我想分离出第一行并将其存储在一个字符数组中，然后从第二行到最后（基本上是矩阵）存储到一个二维整数数组中，当然用逗号分隔。到目前为止，我已经用逗号分割文件并存储到字符数组中，但无法从数组中获取元素数（即城市数）。此外，我刚刚使用 fgets 阅读了第一行。有没有其他有效的方法来做到这一点？谢谢你。

```
 #include <stdio.h>
 #include <stdlib.h> 
 #include <string.h>
 #define MAXFLDS 200 
 #define MAXFLDSIZE 32
 void parse( char *record, char *delim, char arr[MAXFLDS][MAXFLDSIZE],int *fldcnt)
 {
char*p=strtok(record,delim);
int fld=0,fld1=0;
while(p)
{
    strcpy(arr[fld],p);
    fld++;
    p=strtok('\0',delim);
}   
*fldcnt=fld;
  }
  int main(int argc, char *argv[])
  {
char tmp[1024];
int fldcnt=0;
int j=0,k=0;
char arr[MAXFLDS][MAXFLDSIZE],arr1[MAXFLDS][MAXFLDSIZE];
int recordcnt=0;    
FILE *in=fopen("C:\\Users\\Sharan\\Desktop\\cities.txt","r"); 
if(in==NULL)
{
    perror("File open error");
    exit(EXIT_FAILURE);
}
fgets(tmp,sizeof(tmp),in);
parse(tmp,",",arr1,&fldcnt);
k=sizeof(arr1)/sizeof(arr1[0]);
printf("arr size:%d",k);
for(j=0;j<fldcnt;j++)
{
    printf("cities:%d\n",sizeof (arr1[j]));
}

while(fgets(tmp,sizeof(tmp),in)!=0)
{
    int i=0,j=0;
    recordcnt++;
    parse(tmp,", ",arr,&fldcnt);
    for(i=0;i<fldcnt;i++)
    {
        printf("%s\n",arr[i]);
    }
}
fclose(in);
return 0;   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:38:25.280

表达方式

```
sizeof (arr1[j]) 
```

返回实际数组的大小，即`MAXFLDSIZE`，而不是您放入其中的条目数。您必须自己使用变量来跟踪它。

# javascript - get value and reference object property by index

> ID：12505298
> 
> 赞同：1
> 
> 时间：2012-09-20T02:18:36.967
> 
> 标签：javascript, arrays

Object:

```
obj = {
    "expired":93,
    "old3":93,
    "old2":87,
    "old1":100,
    "fresh":150
} 
```

How would I find the index of "old1" (so, 3) in an object?

How would I go about referencing "old1" by its index if I wanted to set its value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:26:27.250

您不应该这样做，不能保证对象属性的顺序。

如果要使用数字索引，请改用数组。

如果您使用所有字符串键（不是数字格式），那么大多数浏览器都会尊重对象表达式的顺序，但这并不能保证。

如果您包含数字或数字格式字符串作为键，那么顺序将不是对象表达式的顺序。看：

```
var obj = {
    "expired":93,
    "old3":93,
    "old2":87,
    "old1":100,
    "1": 111,
    "fresh":150
};

for (var key in obj) {
    console.log(key + ' : ' + obj[key]);
} 
```

输出：

```
1 : 111
expired : 93
old3 : 93
old2 : 87
old1 : 100
fresh : 150 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-03T02:47:06.527

对于仍在寻找它的人......我得到了这个解决方案：

```
<div id="id"></div>
<div id="name"></div>
<div id="age"></div>

var data = {'rows':[
{'id':'1','name':'Andrey','age':'18'},
{'id':'2','name':'Cristine','age':'21'},
{'id':'3','name':'Loren','age':'25'}
]};

$('#id').html(data.rows[0][Object.keys(data.rows[0])[0]]);
$('#name').html(data.rows[0][Object.keys(data.rows[0])[1]]);
$('#age').html(data.rows[0][Object.keys(data.rows[0])[2]]); 
```

[jsfiddle](https://jsfiddle.net/robsonvasconcelos/rr2133h4/)

# javascript - jQuery.map(....).concat is not a function

> ID：12505299
> 
> 赞同：4
> 
> 时间：2012-09-20T02:18:39.823
> 
> 标签：javascript

Why would the following jquery code sometimes throw the error "concat is not a function":

```
var myArray = $('div.foo')
    .filter(function() { return $(this).is('.something'); })
    .map(function() { 
        return [['a', 'b', $(this).val()]];
    });

return myArray.concat(anotherArray); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T02:19:45.187

`$().map()` returns a jQuery object, not an array.
jQuery objects do not have a `concat()` method.

You need to call `.get()` to get a real array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T17:04:00.753

联系人是针对**ARRAYS**的，而不是针对**OBJECTS**的。使用：
1）[在提交之前过滤表单参数](https://stackoverflow.com/questions/20390861/filter-form-parameters-before-submitting/29374307#29374307)
或
2）[如何动态合并两个JavaScript对象的属性？](https://stackoverflow.com/questions/171251/how-can-i-merge-properties-of-two-javascript-objects-dynamically)

# c++ - server applicaton always crashes when a destructor function is executed

> ID：12505300
> 
> 赞同：0
> 
> 时间：2012-09-20T02:19:15.577
> 
> 标签：c++, valgrind

The server application always crashes at the same line in code. I used gdb and valgrind to find the problem, but it seems the crash point is in a compiler created destructor, and this is what valgrind says:

```
==27785== Invalid read of size 8
==27785==    at 0x5CDCE25: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() (in /usr/lib64/libstdc++.so.6.0.8)
==27785==    by 0x5812F4: Pet::BookConfiguration::~BookConfiguration() (BookConfiguration.h:8)
==27785==    by 0x5EDEC4: void std::_Destroy<Pet::BookConfiguration>(Pet::BookConfiguration*) (stl_construct.h:107)
==27785==    by 0x5EDEE2: void std::__destroy_aux<Pet::BookConfiguration*>(Pet::BookConfiguration*, Pet::BookConfiguration*, __false_type) (stl_construct.h:12
2)
==27785==    by 0x5EDF17: void std::_Destroy<Pet::BookConfiguration*>(Pet::BookConfiguration*, Pet::BookConfiguration*) (stl_construct.h:155)
==27785==    by 0x5EDF3A: void std::_Destroy<Pet::BookConfiguration*, Pet::BookConfiguration>(Pet::BookConfiguration*, Pet::BookConfiguration*, std::allocator
<Pet::BookConfiguration>) (stl_construct.h:182)
==27785==    by 0x5F5C09: std::vector<Pet::BookConfiguration, std::allocator<Pet::BookConfiguration> >::~vector() (stl_vector.h:272)
==27785==    by 0x5F6A22: Pet::ShopModel::~ShopModel() (ShopModel.h:15)
==27785==    by 0x5C59E3: Pet::PetProcessor::climbFight(Pet::SourceList&, Pet::TBuffer&) (PetProcessor.cpp:1796)
==27785==    by 0x589263: Pet::Processor::execute(Pet::SourceList&, unsigned short, Pet::TBuffer&) (Processor.cpp:22)
==27785==    by 0x578627: Pet::JobThread<Pet::PetProcessor>::run() (JobThread.h:66)
==27785==    by 0x4F81AB2: Poco::PooledThread::run() (in /data/home/app100619699/pet_srv/lib/libPocoFoundation.so.11)
==27785==  Address 0x900df30 is 7 bytes after a block of size 57 free'd
==27785==    at 0x4A201B6: operator delete(void*) (vg_replace_malloc.c:457)
==27785==    by 0x5CDCE59: std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string() (in /usr/lib64/libstdc++.so.6.0.8)
==27785==    by 0x5CFFE6: Pet::PetProcessor::getUserBag(Pet::SourceList&, Pet::TBuffer&) (PetProcessor.cpp:446)
==27785==    by 0x589263: Pet::Processor::execute(Pet::SourceList&, unsigned short, Pet::TBuffer&) (Processor.cpp:22)
==27785==    by 0x578627: Pet::JobThread<Pet::PetProcessor>::run() (JobThread.h:66)
==27785==    by 0x4F81AB2: Poco::PooledThread::run() (in /data/home/app100619699/pet_srv/lib/libPocoFoundation.so.11)
==27785==    by 0x4F7D1D5: Poco::ThreadImpl::runnableEntry(void*) (in /data/home/app100619699/pet_srv/lib/libPocoFoundation.so.11)
==27785==    by 0x54DE192: start_thread (in /lib64/libpthread-2.4.so)
==27785==    by 0x6161F0C: clone (in /lib64/libc-2.4.so) 
```

The two string mentioned here have no relationship, and they are all local variables. Who can tell me why it happens or how can I find the real crash problem?

`Pet::BookConfiguration::~BookConfiguration()` is a compiler created destructor. It need not do anything because this class have no resource to release.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:38:27.013

从错误消息中，您显然正在使用线程以及线程之间的某种类型的共享存储池。当您关闭服务器时，您可能会遇到两个不同的线程试图破坏共享资源的问题，并且无论哪个线程第二个都会创建崩溃条件，因为两次破坏共享对象是未定义的行为。

请记住，两个单独的线程实际上不需要使用相同的共享对象，但是如果一个线程销毁另一个线程正在使用其中的对象的池，那么第二个线程无法销毁池中的该对象，因为第一个线程已经破坏了该资源。因此，您可能会遇到排序问题、线程资源之间的所有权问题，或者两者兼而有之。

# java - how to debug a stub class deployed in a jar file?

> ID：12505304
> 
> 赞同：3
> 
> 时间：2012-09-20T02:20:00.320
> 
> 标签：java, debugging, session, stub

I ask for some help here for debugging a class in a deployed jar file, As the codes below, I have a stateless session bean and its interface packaged into a iiop.jar file which deployed to server, and I try to debug to see execution of testException method, but that class that read from a deployed jar file,

```
 StatelessSessionHome home = 
     (StatelessSessionHome)PortableRemoteObject.narrow(
                getInitialContext().lookup(StatelessSessionHome.JNDI_NAME),
                StatelessSessionHome.class);
  StatelessSession session = home.create(); 
```

(break point here) session.testException(-2);

the debug process will jump to the next step and ignore things happened in testException() with a follow message: _StatelessSession_Stub.testException(int) line: not available and asking to edit source path

Any suggestion should be helpful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:07:43.177

在逐行调试时，您经常会遇到一个不属于您的源代码的类（它可能在一个 jar 中）。在这种情况下，它将显示源不可用的消息。如果您使用的是 eclipse，请一直按 F6，直到您跳出库类回到您的代码中，以便您可以从该点继续调试。

# android - How to copy the sample images from the drawable folder to the sdcard folder, programmaticaly?

> ID：12505307
> 
> 赞同：0
> 
> 时间：2012-09-20T02:20:54.317
> 
> 标签：android, drawable, sd-card

I have pictures/images in my drawable folder and I want to copy all of it in my sdcard folder with that same quality and details? If I have for example this.

```
Integer[] mThumbIds = {
        R.drawable.pic_1, R.drawable.pic_2,
        R.drawable.pic_3, R.drawable.pic_4,
        R.drawable.pic_5, R.drawable.pic_6,
        R.drawable.pic_7
}; 
```

And then my app creates an own directory in sdcard, like this:

```
String newFolder = "/myFolder2";
String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
File myNewFolder = new File(extStorageDirectory + newFolder);
myNewFolder.mkdir(); 
```

How can I achieve to transfer all those pictures in drawable to the created folder in sdcard with the same quality and details?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:05:28.163

这些drawable文件夹中的图片可以通过BitmapFactory访问，你可以将位图保存为PNG或JPG。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
    File sd = Environment.getExternalStorageDirectory();
    String fileName = "test.png";
    File dest = new File(sd, fileName);
    try {
        FileOutputStream out;
        out = new FileOutputStream(dest);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

对于其他类型的图像，我认为将它们放入 assets 文件夹是一种更好的方法。

最好的问候， 王正宏

# mysql - SQL difference in item from one week to another

> ID：12505310
> 
> 赞同：1
> 
> 时间：2012-09-20T02:21:54.827
> 
> 标签：mysql, sql

Teams table

```
+------+------------+
|team_id |    week    |
+------+------------+
|    1 | 2012-09-10 |
|    2 | 2012-09-10 |
|    3 | 2012-09-17 |
|    4 | 2012-09-17 |
+------+------------+ 
```

TeamPlayers Join Table

```
+---------+-----------+
| team_id | player_id |
+---------+-----------+
|       1 |         1 |
|       2 |         2 |
|       3 |         1 |
|       4 |         1 |
+---------+-----------+ 
```

Based on the schema above I need to put a query together that will show me which player was added and which player was dropped between this week and last week.

For example

Between week 2012-09-10 and 2012-1=09-17 Player 8 was moved on successfully (he appeared on one team last week and 2 teams this week).
Player 9 appeared on a team last week 2012-09-10 but did not make it to this week 2012-09-17.

I am currently doing this in the application code (because I am not a sql expert), but have a nagging feeling that there is likely a way to perform this directly in the database (mysql).

Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:36:18.080

这是一个开始，可能需要一些调整。希望能帮助到你。

```
SELECT * FROM teams t
INTO #TMP
INNER JOIN teamsplayers tp ON tp.team_id = t.team_id
;

SELECT count(*), week, player_id
FROM #TMP
GROUP BY week, player_id
ORDER BY week, player_id
; 
```

> ```
> Edit: 
> ```
> 
> 删除表#TMP；

# php - Images delete function with ID

> ID：12505314
> 
> 赞同：0
> 
> 时间：2012-09-20T02:22:27.167
> 
> 标签：php

I try to delete image in my images directory but still not happen with my image file. I try to use with this code:

```
<a href=\"../admin/core/de_products.php?id=$row[id]\">Delete</a> 
```

with this function:

```
<?php
require_once("../inc/con_db.php");

if(isset($_GET["id"]) && $_GET["id"]!="")
{

$image=mysql_query("SELECT * FROM products WHERE id='".$_GET["id"]."'") or die(mysql_error());`

    if(mysql_num_rows($image)>0)
    {
        $row=mysql_fetch_array($image);
        $image_name=$row["img_thumb"];`

        $check=mysql_query("DELETE FROM products WHERE id='".$_GET["id"]."'") or die(mysql_error());

        if($check)
        {
            @unlink("images/products/thumbs/".$image_name);
            echo "Database has been deleted!";
        }
        else
        {
            echo "Oops, there is some problem";
        }
    }   
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:39:57.190

您是否在页面或服务器日志中收到任何警告或错误？我建议您从 unlink 前面删除 @ 直到您完成调试此问题，以便您可以实际看到它可能抛出的警告。

您可以尝试检查 .../thumbs/ 目录是否可由您的服务器运行的任何用户写入。或者，如果您像我一样懒惰，可以将其权限设置为 777。要删除文件，您需要对其所在目录的写入权限。

# php - 根据输入的电子邮件返回特定值

> ID：12505315
> 
> 赞同：0
> 
> 时间：2012-09-20T02:22:34.440
> 
> 标签：php, function

我有一个函数可以告诉我电子邮件是否在数据库中。我想知道如果找到它，我怎么能将变量`id,name etc`与它一起传递给在数据库中找到的特定电子邮件。

```
function candidateInsert()
{

  if($this->checkEmail($email))
  {
    echo 'found in db';
    echo $email['id'];

  }else{
    echo 'error';
  }
}

function checkEmail($email)
{
     $email = $POST('Email');

    if($email)
    {
        $candemail ="SELECT * FROM {table} WHERE email=?",$email"";

        if(isset($candemail['email']))
        {
                return TRUE;
        } else {
                return FALSE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:10:33.033

我假设除了布尔值之外，您还想返回 id 和 name。在这种情况下，通过引用传递参数：

```
function candidateInsert()
{  
      $id = "";
      $name;

  if($this->checkEmail($email, $id, $name))
  {
    echo 'found in db';
    echo $id;
    echo $name;

  }else{
    echo 'error';
  }
}

function checkEmail($email, &$id, &$name)
{
     $email = $POST('Email');

    if($email)
    {
        $candemail ="SELECT * FROM {table} WHERE email=?",$email"";

        if(isset($candemail['email']))
        {
                      $id = $candemail['id'];
                      $name = $candemail['name'];
                return TRUE;
        } else {
                return FALSE;
        }
    }
} 
```

通过在参数的开头添加 &，您可以编辑作为参数传递的变量的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:27:51.813

如果要回显邮件的某些内容，则需要从 CheckMail() 函数返回值，如下所示：

```
function candidateInsert() {
    $newmail = $this->checkEmail($email);

    if($newmail != FALSE ) {
        echo 'found in db';
        echo $newmail['id'];

     }else{
        echo 'error';
     }
}

function checkEmail($email)
{
    $email = $POST('Email');

    if($email)
    {
        $candemail ="SELECT * FROM {table} WHERE email=?",$email"";
        $result = result($candemail ) // Don't know which sql functions u use

        if(isset($result['email'])) {
            return $result;
        } else {
            return FALSE;
        }
    }
} 
```

# json - Should I use NoSQL or Relational DB on an API

> ID：12505320
> 
> 赞同：1
> 
> 时间：2012-09-20T02:23:35.723
> 
> 标签：json, nosql, relational-database

I'm building an API and I need to store some data, I'm using JSON as my response format instead of XML but I really dont know how to store my data, for example I have this

```
 {users: [
  user: "name",
  products: [Array with more than 100 products],
  etc: "other items"], etc...
 } 
```

the problem is that inside the user i have many arrays so maybe it may affect my db performance so I dont know if to choose NoSQL or Relational DB. So my question really is, does having too many nested arrays with many items inside an object affect my db performance? or should i choose another method for saving my data

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:48:45.557

如果您使用的是 NoSQL 数据库，那么将数据存储在多行（或规范化）中实际上会忽略 NoSQL 的最佳用途之一。将它们全部存储在一起将使您的软件更快，因为 IO 会更少。

在我的项目中，我将整个用户数据和属性（第 3 方应用程序可以通过 OAuth 设置）存储在单个文档中。MongoDB 的文档大小限制为 16MB，这只是一个软限制。

在这种情况下，您可以确定哪些字段对所有人都是通用的（id、name 等），然后为这些通用字段设置最大大小（例如 name 将为 128 个字符）。MongoDB 字符串是 UTF-8。您现在可以确定这些静态字段将占用每个文档的 X 个字节。剩余的 16MB - X 字节存在于每个文档中，用于分配给数组和自定义属性等。

将最大大小 M 设置为这些值，因此您可以设置上限值 N=(16MB - X 字节)/M，这将有效地防止您的文档数据溢出限制。

# objective-c - 核心数据重载数据库

> ID：12505323
> 
> 赞同：1
> 
> 时间：2012-09-20T02:23:46.333
> 
> 标签：objective-c, ios, ios5, core-data

在使用从 Web 服务器生成和下载的数据库覆盖它后，我需要 Core Data 重新加载存储。我在重新加载数据库时遇到了一些麻烦。我尝试在所有上下文和父上下文上调用重置，同时将持久存储协调器、托管对象上下文和托管对象模型设置为零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T20:02:28.790

我解决了这个问题。我将应用程序委托的属性设置为 nil，但没有将根视图控制器的托管对象上下文设置为 nil 并重新初始化它。

# jquery - How do I wrap these jquery functions for WordPress?

> ID：12505327
> 
> 赞同：1
> 
> 时间：2012-09-20T02:24:08.557
> 
> 标签：jquery, wordpress

I am a jquery newbie, long time working with WordPress. I cannot manage to get these two scripts to work; regardless of where I am including them.

After having read about this issue on the [Codex](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers) , I am aware that I need to change these scripts in order to work with WordPress' no-conflict mode, but I am not sure what exactly do I have to do.

Could anyone help me and explain me how to do this for any further time, as well? Thank you.

```
 function adjustIframes()
{
  $('iframe').each(function(){
    var
    $this       = $(this),
    proportion  = $this.data( 'proportion' ),
    w           = $this.attr('width'),
    actual_w    = $this.width();

    if ( ! proportion )
    {
        proportion = $this.attr('height') / w;
        $this.data( 'proportion', proportion );
    }

    if ( actual_w != w )
    {
        $this.css( 'height', Math.round( actual_w * proportion ) + 'px' );
    }
  });
}
$(window).on('resize load',adjustIframes);

// DOM ready
     $(function() {

      // Create the dropdown base
      $("<select />").appendTo("nav");

      // Create default option "Go to..."
      $("<option />", {
         "selected": "selected",
         "value"   : "",
         "text"    : "Go to..."
      }).appendTo("nav select");

      // Populate dropdown with menu items
      $("nav a").each(function() {
       var el = $(this);
       $("<option />", {
           "value"   : el.attr("href"),
           "text"    : el.text()
       }).appendTo("nav select");
      });

       // To make dropdown actually work
       // To make more unobtrusive: http://css-tricks.com/4064-unobtrusive-page-changer/
      $("nav select").change(function() {
        window.location = $(this).find("option:selected").val();
      });

     });

if( document.createTouch ) {
    this.addEvent(c[j],'tap',this.tipOver,false);
} else {
    this.addEvent(c[j],'mouseover',this.tipOver,false);
    this.addEvent(c[j],'mouseout',this.tipOut,false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:12:59.963

将您的 jquery 代码包含在 .ready 函数中。下面是针对 jQuery noConflict 模式修改的代码。

```
jQuery(document).ready(function($) {
    function adjustIframes()
    {
      $('iframe').each(function(){
        var
        $this       = $(this),
        proportion  = $this.data( 'proportion' ),
        w           = $this.attr('width'),
        actual_w    = $this.width();

        if ( ! proportion )
        {
            proportion = $this.attr('height') / w;
            $this.data( 'proportion', proportion );
        }

        if ( actual_w != w )
        {
            $this.css( 'height', Math.round( actual_w * proportion ) + 'px' );
        }
      });
    }
    $(window).on('resize load',adjustIframes);

    // DOM ready
         $(function() {

          // Create the dropdown base
          $("<select />").appendTo("nav");

          // Create default option "Go to..."
          $("<option />", {
             "selected": "selected",
             "value"   : "",
             "text"    : "Go to..."
          }).appendTo("nav select");

          // Populate dropdown with menu items
          $("nav a").each(function() {
           var el = $(this);
           $("<option />", {
               "value"   : el.attr("href"),
               "text"    : el.text()
           }).appendTo("nav select");
          });

           // To make dropdown actually work
           // To make more unobtrusive: http://css-tricks.com/4064-unobtrusive-page-changer/
          $("nav select").change(function() {
            window.location = $(this).find("option:selected").val();
          });

         });

    if( document.createTouch ) {
        this.addEvent(c[j],'tap',this.tipOver,false);
    } else {
        this.addEvent(c[j],'mouseover',this.tipOver,false);
        this.addEvent(c[j],'mouseout',this.tipOut,false);
    }
}); 
```

另外请确保您已将 jQuery 文件包含在您的 wordpress 主题的标题中。

# javascript - how to efficiently deal with multitude of iframes in dynamic html

> ID：12505329
> 
> 赞同：0
> 
> 时间：2012-09-20T02:24:14.000
> 
> 标签：javascript, html, iframe, extjs

So I have a large amount of html that is served up by a web service that i need to display. The problem is the this html very often contains many iframe links to youtube videos. I've counted one that contained around 20\.

These are not small amounts of html and I'm trying to weigh efficiency here. Right now those 20 iframes are slowing the app down to a crawl.

What would be more efficient? Stopping the iframes from loading ( which I'm unsure of how to do)

-or-

Parse through the html and remove the iframes and replacing them with the link to the video within them, thus allowing the user to open up the video, but not having to worry about the iframe. This can be done before they are displayed and may increase load time a bit, but would reduce http calls (i think)

-or-

Any suggestions?

Thanks

(Also I am not using JQuery nor is it available)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:43:12.760

所以这是我发现的方法有点工作。唯一的问题是我注意到嵌套在表中的 iframe 并不总是能找到它们，如果有人有替代方法，请告诉我。

```
parseMessage: function(json) {
      var container = document.createElement('div');
      container.id = 'tempContainer';
      document.body.appendChild(container);
      container.innerHTML = json[4];
      var iframes = container.getElementsByTagName("iframe");
      if (iframes.length != 0)
      {
        for (var a = 0; a < iframes.length; a += 1) {
            var sourcetemp = iframes[a].src;
            var parent = iframes[a].parentNode;
            var newNode = document.createElement('a');
            newNode.href = sourcetemp;
            newNode.innerHTML = sourcetemp;
            parent.removeChild(iframes[a]);
            parent.appendChild(newNode);
        }
      }
      document.body.removeChild(container);
      return container.innerHTML;
      //mydiv = json[4].getElementById('FirstDiv');
      //while ( mydiv.firstChild ) mydiv.removeChild( mydiv.firstChild );
  }, 
```

# php - Magento 的代码在哪里处理购物车规则

> ID：12505332
> 
> 赞同：0
> 
> 时间：2012-09-20T02:24:37.187
> 
> 标签：php, magento, shopping-cart, magento-rules

我想查看magento中的代码，在结账前检查购物车规则并将其应用于购物车中的项目，我可以在显示信息的模板中找到，但我找不到检查它的位置应该应用购物车规则

编辑 1：通过“检查购物车规则”我的意思是“检查购物车价格规则”（可能有 2 种不同类型的购物车规则），我正在寻找代码

“购物车中的这 3 件商品符合 id 为 15 的购物车规则的条件，我知道如果商品符合操作中的条件，则需要按照操作所述更新商品信息”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T09:30:19.957

在版本。1.4.2.0 应用销售规则的主要逻辑`Mage_SalesRule_Model_Validator`位于`/app/code/core/Mage/SalesRule/Model/Validator.php`

此外，如果您在目录中查找`Mage::getModel('salesrule/validator')`or`Mage::getSingleton('salesrule/validator')`语句，`/app/code/`您可以看到使用规则处理的位置：
`/app/code/core/Mage/SalesRule/Model/Observer.php`
`/app/code/core/Mage/SalesRule/Model/Quote/Discount.php`
`/app/code/core/Mage/SalesRule/Model/Quote/Freeshipping.php`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:44:32.917

在以下模块中：Mage_Salesrule，特别是在`app/code/core/Mage/SalesRule/Model/Rule.php`

# database - 如何将 CSV / MySQL 数据初始批量导入 Neo4j 数据库

> ID：12505335
> 
> 赞同：5
> 
> 时间：2012-09-20T02:25:25.417
> 
> 标签：database, import, converter, neo4j, graph-databases

我正在考虑用 neo4j 数据库替换 MySQL 数据库。我是 neo4j 的初学者，想知道如何将我当前的 MySQL 数据批量插入到 neo4j 数据库中，这样我就可以进行实验并开始学​​习 neo4j。

关系数据库由 4 个表组成：`Person`、`Organism`、`Story`、`Links`。链接描述了其他 3 个表中的行之间的关系。

`Links`: ID, FromTable, FromID, ToTable, ToID, LinkType

`Person`：ID、property_2、property_1 等...

`Organism`：ID、property_A、property_B 等....

`Story`：ID，property_x，property_y

每个 ID 字段是每个表从 1 开始的自动递增整数

如果不明显，ID 为 3 的人与 ID 为 42 的故事之间的链接将在链接表 ID=autoincrement、FromTable=Person、FromID=3、ToTable=Story、ToID=42 中有一行。即使我使用“来自”和“到”这两个术语，实际链接在实践中并不是真正“定向”的。

我查看了 Michael Hunger 的[批量导入](https://github.com/jexp/batch-import)，但这似乎只适用于单个节点表和一个关系表，而我希望导入三种不同类型的节点和它们之间的关系列表。

我已经启动并运行了 neo4j，任何让我入门的建议将不胜感激。

我不熟悉 Java，但我确实使用 Python 和 bash shell 脚本。初始导入后，我将使用带有 Javascript 的 RESTful 接口。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T13:09:08.690

基于[git repo 中的](https://github.com/jexp/batch-import/issues/4)建议。使用 Michael Hunger 的[批量导入](https://github.com/jexp/batch-import)，可以从一个 .csv 文件中导入多种节点类型。引用迈克尔的话：

> 只需将它们全部放入一个节点文件中，您可以在某一行中拥有任何没有值的属性，然后它将被跳过。

所以我使用的一般方法是：

将所有节点表合并到一个名为的新表中`nodes`：

1.  创建一个`nodes`具有自动递增`newID`字段和`type`字段的新表。type 字段将记录节点数据来自哪个表
2.  从允许空值的 3 个节点表中添加所有可能的列名称。
3.  `INSERT INTO nodes`除了将字段设置为 person、organization 或 story之外，还有来自`Person`、then `Organism`、then的值。将任何不相关的字段留空。`Story``type`

在另一个新表中`rels`，将新创建的`newID`索引添加到`Links`基于 sql 的表中`JOIN`：

```
INSERT INTO rels
SELECT  
    n1.newID AS fromNodeID, 
    n2.newID AS toNodeID,
    L.LinkType,
    L.ID
FROM 
    Links L
LEFT JOIN 
    nodes n1 
    ON 
    L.fromID = n1.ID 
    AND 
    L.fromType = n1.type
LEFT JOIN 
    nodes n2 
    ON 
    L.toID = n2.ID 
    AND 
    L.toType = n2.type; 
```

`nodes`然后将这两个新表导出`rels`为制表符分隔的 .csv 文件，并将它们与批量导入一起使用：

```
$java -server -Xmx4G -jar target/batch-import-jar-with-dependencies.jar target/graph.db nodes.csv rels.csv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:28:36.030

正如您所说，您很高兴使用 python 和 shell 脚本，您可能还想看看[py2neo 附带](http://py2neo.org/)的命令行工具，特别是`geoff`. 这使用我放在一起的平面文件格式来保存图形数据，因此在您的实例中，您需要从源数据构建一个平面文件并将其插入到您的图形数据库中。

文件格式和服务器插件在[此处](http://nigelsmall.com/geoff)记录，客户端应用程序的 py2neo 模块在[此处](http://book.py2neo.org/en/latest/geoff/)。

如果文档中缺少任何内容，或者您​​想了解更多信息，请随时给我发电子邮件

奈杰尔

# jquery - Jquery UI droppable - 动态创建的内容不响应事件

> ID：12505338
> 
> 赞同：1
> 
> 时间：2012-09-20T02:26:01.580
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, nested, jquery-ui-droppable

这是我描述我的挑战的最佳尝试。我正在尝试使内容包装器和可放置内容（可从单独范围的无序列表中拖动）可嵌套在几乎无限的级别上。目前，内容包装器可以适当地嵌套和浮动，但是当我尝试拖入“内容”时，它会忽略包装器，因为它是新创建的可放置对象。

这是我项目的[当前小提琴](http://jsfiddle.net/rbtstudio/XWJ7g/3/)。

可能有人有什么建议吗？我已经看到了导致 liveQuery 插件并利用 .on() 事件的解决方案，但是由于我的代码很复杂，我什至不确定在哪里合并这些。有人觉得有帮助吗？

# android - 获取蓝牙设备离开连接

> ID：12505339
> 
> 赞同：1
> 
> 时间：2012-09-20T02:26:08.340
> 
> 标签：android, bluetooth, range

我有一个蓝牙设备，我想知道当连接的蓝牙设备超出范围时如何获取方法，如代码

//如果蓝牙不在连接范围内{

}

请给我一些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:33:58.753

要检查蓝牙设备是否已连接，您可以使用意图过滤器来监听 ACTION_ACL_CONNECTED、ACTION_ACL_DISCONNECT_REQUESTED 和 ACTION_ACL_DISCONNECTED 广播。有关更多详细信息，请查看这篇文章[如何以编程方式判断蓝牙设备是否已连接？(安卓 2.2)](https://stackoverflow.com/questions/4715865/how-to-programmatically-tell-if-a-bluetooth-device-is-connected-android-2-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:04:48.757

没有像这样的内部方法，`DeviceNotInRange() {}`因此您需要通过创建自定义方法来解决它。您需要创建一种定期搜索的方法，当设备不在范围内时，您可以发出警报或提示声音。

# php - 如何更改按钮的名称

> ID：12505341
> 
> 赞同：0
> 
> 时间：2012-09-20T02:26:27.763
> 
> 标签：php, javascript, jquery, html, joomla

这段代码在[这里](http://4healthmagazine.com/)....（查看页脚订阅部分）

```
<?php if(!empty($this->items))foreach($this->items as $level): ?>
<?php
    $formatedPrice = sprintf('%1.02f',$level->price);
    $dotpos = strpos($formatedPrice, '.');
    $price_integer = substr($formatedPrice,0,$dotpos);
    $price_fractional = substr($formatedPrice,$dotpos+1);
?>
    <div class="level akeebasubs-level-<?php echo $level->akeebasubs_level_id ?>">
        <p class="level-title">
            <span class="level-price">
                <?php if(AkeebasubsHelperCparams::getParam('currencypos','before') == 'before'): ?>
                <span class="level-price-currency"><?php echo AkeebasubsHelperCparams::getParam('currencysymbol','€')?></span>
                <?php endif; ?>
                <span class="level-price-integer"><?php echo $price_integer ?></span><?php if((int)$price_fractional > 0): ?><span class="level-price-separator">.</span><span class="level-price-decimal"><?php echo $price_fractional ?></span><?php endif; ?>
                <?php if(AkeebasubsHelperCparams::getParam('currencypos','before') == 'after'): ?>
                <span class="level-price-currency"><?php echo AkeebasubsHelperCparams::getParam('currencysymbol','€')?></span>
                <?php endif; ?>
            </span>
            <span class="level-title-text">
                <a href="<?php echo JRoute::_('index.php?option=com_akeebasubs&view=level&slug='.$level->slug.'&format=html&layout=default')?>">
                    <?php echo $this->escape($level->title)?>
                </a>
            </span>
        </p>
        <div class="level-inner">
            <div class="level-description">
                <div class="level-description-inner">
                    <?php if(!empty($level->image)):?>
                    <img class="level-image" src="<?php echo JURI::base()?><?php echo trim(AkeebasubsHelperCparams::getParam('imagedir','images/'),'/') ?>/<?php echo $level->image?>" />
                    <?php endif;?>
                    <?php echo JHTML::_('content.prepare', AkeebasubsHelperMessage::processLanguage($level->description));?>
                </div>
            </div>
            <div class="level-clear"></div>
            <div >
                <button  onclick="window.location='<?php echo JRoute::_('index.php?option=com_akeebasubs&view=level&slug='.$level->slug.'&format=html&layout=default')?>'">
                    <?php echo JText::_('COM_AKEEBASUBS_LEVELS_SUBSCRIBE')?>
                </button>
            </div>
        </div>
    </div>
<?php endforeach; ?> 
```

这是包含该名称的语言文件

```
COM_AKEEBASUBS_LEVELS_SUBSCRIBE="Subscribe Now" 
```

我想将这三个部分按钮命名为 6month,12month,24month

将如何更改代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T07:26:07.610

如果您无法使用 PHP 获取值，请尝试在页面加载时更改按钮名称的值 这是**JQUERY**

```
 $(document).ready(function){
   $('div.akeebasubs-awesome-description').each(function(
     substription =  $(this).children('H4').html()
     button = $(this).parent().next().children('button')
     $(button).attr(name,substription.split(' ')[0]+'month')
    })
 }) 
```

和**JAVASCRIPT**

```
 divs = document.getElementsByClassName('akeebasubs-awesome-description');
 for (var i in divs){
    divs[i].parentElement.nextElementSibling.children[0].name = divs[i].children[0].innerHTML.split(' ')[0] + 'month'
 } 
```

这将获取的文本`H4`并使其对应`button`的名称

# backbone.js - Backbone：在模板中混合 html 和 javascript

> ID：12505342
> 
> 赞同：0
> 
> 时间：2012-09-20T02:26:28.147
> 
> 标签：backbone.js

在这个 Backbone 应用程序[http://arturadib.com/hello-backbonejs/docs/5.html](http://arturadib.com/hello-backbonejs/docs/5.html)的“hello world”示例中，作者像这样内联呈现模板

```
render: function(){
      $(this.el).html('<span style="color:black;">'+this.model.get('part1')+' '+this.model.get('part2')+'</span> &nbsp; &nbsp; <span class="swap" style="font-family:sans-serif; color:blue; cursor:pointer;">[swap]</span> <span class="delete" style="cursor:pointer; color:red; font-family:sans-serif;">[delete]</span>');
      return this; // for chainable calls, like .render().el
    }, 
```

这虽然是功能性的，但有点难以管理的 html 连接。

我见过其他 Backbone 应用程序的作者使用下划线的模板功能在视图中设置模板

```
template: _.template($('#my-template').html()), 
```

然后渲染它而不是html

```
$(this.el).html(this.template(this.model.toJSON())); 
```

我想在 hello world 应用程序中尝试这种技术，但是当我创建模板文件时，我遇到了它不是严格意义上的 html 的问题。你会注意到它调用函数

```
 this.model.get('part2') 
```

我用作模型的模板（来自另一位作者的应用程序，见下文）仅包含 html。

问题，我需要做什么才能在同一个模板文件中包含 javascript 和 html，以便调用模型？

```
<script type="text/template" id="item-template">
      <div class="company">
        <div class="display">
          <span class="company-text"></span>
          <span class="company-mood">
            <span class="mood"></span>
          </span>
          <span class="company-destroy"></span>
        </div>
        <div class="edit">
          <input class="company-input" type="text" value="" />
        </div>
      </div>
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:32:46.460

有关您想要完成的内容的详细信息，请参阅此链接[下划线模板。](http://documentcloud.github.com/underscore/#template)

但总的来说，如果您只想插入您`this.model.get('someAttr');`需要做的所有事情，只需将其包含在您的模板中即可。

```
// Since you call it like this:
$(this.el).html(this.template(this.model.toJSON()));

// Just include this
<div>
    <%= someAttr %>
</div> 
```

您基本上是传入模型属性对象，而下划线模板只是插入该对象的属性。你可以传入任何你想要的东西，尽管你对渲染调用所做的可能是最常见的。

# tomcat - tomcat 7中的虚拟主机只需要默认主机

> ID：12505346
> 
> 赞同：2
> 
> 时间：2012-09-20T02:26:59.180
> 
> 标签：tomcat, cpanel, virtualhost, server.xml

我有两个域，只需要**defaultHost**。

我介绍了**domain2.com**，并向我展示了`domain1.mx`

我将 ngasi 应用程序与**tomcat 7**和**Cpanel**一起使用。使用**filezilla**，我可以访问`server.xml`tomcat conf 文件夹中的文件。

在每个文件夹（**vdtDoc_app**和**vdt_app**）中，我有一个`ROOT.war`文件（每个**.war**文件包含不同的项目）

`server.xml`我在**tomcat 7**的文件中有这个配置：

```
<Connector port="12205" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="12206" address="0.0.0.0" 
               useBodyEncodingForURI="true"
               />

    <Connector port="12206" protocol="HTTP/1.1" address="0.0.0.0" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" 
               keystoreFile="./conf/keystore" keystorePass="coolgeek" />

 <Connector port="12207" address="0.0.0.0" protocol="AJP/1.3" redirectPort="12206" />

    <Engine name="Catalina" defaultHost="domain1.mx">

      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

       <Host name="domain1.mx"  appBase="/home/user/public_html/vdtDoc_app"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">
            <Alias>www.domain1.mx</Alias> 
       </Host>

        <Host name="domain2.com"  appBase="/home/user/public_html/vdt_app"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">
            <Alias>www.domain2.com</Alias> 
        </Host>

    </Engine> 
```

我必须在**Cpanel**和/或**Ngasi**中进行一些配置吗？或者我需要在`server.xml`文件中配置更多的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:13:50.753

我已经学会了安装默认httpd，tomcat的服务器更好的方法。

我已经用cPanel（多次）尝试过，但它就是不喜欢cPanel。

# excel - 在一列中查找文本并在另一列中显示

> ID：12505349
> 
> 赞同：0
> 
> 时间：2012-09-20T02:28:09.690
> 
> 标签：excel, excel-formula, vba

我有一列包含文本（Screeshot 中的 A 列），其中有一些标签（由 < > 包围的文本），我想在一个单元格中找到所有这些标签并将其复制到相邻的单元格（截图中的 B 列），基本上我想在 A 列中列出标签。

谢谢，基兰

![在此处输入图像描述](../Images/151f12935e8debaa5081a1889ba7a2af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:15:14.077

我创建了一个宏，它可以满足您的需求。

```
Sub ExtractTags()
Dim ColA As Integer
Dim ColB As Integer
Dim Row As Integer
Dim Content As String
Dim Tags As String
Dim CurrentTag As String
Dim OpenTag As Integer
Dim CloseTag As Integer
Dim NumOfTags As Integer

ColA = 1 'this marks column A
ColB = 2 'this marks column B
Row = 2 'this marks the Row, which we'll increment 1 by 1 to make the code go thru each row

Do
    Content = Sheets("Sheet1").Cells(Row, ColA).Value 'extracts the content for manipulation

    If InStr(1, Content, "<", vbBinaryCompare) Then 'This checks to see if there are any tags at all. If there are, we go in
        Position = 0 'this is the starting position of the search
        NumOfTags = 0 'this helps keep track of multiple tags in a single cell

        Do
            'each time this part loops, it cuts out the first tag and all the content before it so that the code can hit the
            'first instance of "<" of the remaining content of the cell
            Position = InStr(Position + 1, Content, "<", vbBinaryCompare) 'finds the first instance of "<"
            NumOfTags = NumOfTags + 1 'since we have a tag, increment the counter by 1

            OpenTag = InStr(Position, Content, "<", vbTextCompare) 'marks the begining of the tag
            CloseTag = InStr(Position, Content, ">", vbTextCompare) - 1 'marks the end of the tag

            CurrentTag = Left(Content, CloseTag) 'cuts out the content after the tag
            CurrentTag = Right(CurrentTag, Len(CurrentTag) - OpenTag) 'cuts out the content before the tag

            If NumOfTags = 1 Then 'this part checks to see if we've already got tags
                Tags = CurrentTag 'if this is the first tag, just put it in
            Else
                Tags = Tags & ", " & CurrentTag 'if this is the second tag onwards, we add a comma to seprate the tags
            End If
        Loop Until InStr(Position + 1, Content, "<", vbBinaryCompare) = False 'this is the checker to see if there are anymore tags in the content

        Sheets("Sheet1").Cells(Row, ColB).Value = Tags 'input all the tags into column B
    End If

    Row = Row + 1 'move on to the next row
Loop Until Content = "" 'if the next row is empty, we stop
End Sub 
```

我希望这有帮助。

# javascript - Safari 中的日期解析错误

> ID：12505350
> 
> 赞同：2
> 
> 时间：2012-09-20T02:28:11.103
> 
> 标签：javascript, parsing, date, safari

我有一个格式如下的日期字符串：

```
2012-09-20T01:36:51.556Z 
```

它是从 mongodb 原样返回的日期字段。Chrome、FF 和 IE 能够解析此字符串，但是 Safari 失败并出现错误`Invalid Date`。我试过 DateJS，但它也无法解析这个日期。任何想法如何轻松解析此日期？或者，是什么导致 Safari 失败？

我正在为 mongodb 使用本机节点驱动程序。它以上述格式将日期作为字符串返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:41:22.713

我的 DateExtensions 应该解析：

[http://depressedpress.com/javascript-extensions/dp_dateextensions/](http://depressedpress.com/javascript-extensions/dp_dateextensions/)

将库添加到页面后，您将使用静态 Date.parseIso8601( *date* ) 方法解析日期。

为此，扩展有点繁重（尽管如果您愿意，您可以只提取数据解析的东西）。

我很惊讶 Safari 遇到了这样的问题，因为在我看来，日期是一个完全有效的 ISO 8601 日期（定义如下：http: [//www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)）。这与约会时的普通香草差不多。完全猜测，但是您是否尝试过用空格替换“T”分隔符？这不是标准的，但我已经看到很多以这种方式使用它的实现（并且我的组件允许它）。

对于它的价值，这是我从 DP_DateExtensions 中提取的方法 - 我认为它会为你解决问题：

```
 // parseIso8601
    // Attempts to convert ISO8601 input to a date
Date.parseIso8601 = function(CurDate) {

        // Check the input parameters
    if ( typeof CurDate != "string" || CurDate == "" ) {
        return null;
    };
        // Set the fragment expressions
    var S = "[\\-/:.]";
    var Yr = "((?:1[6-9]|[2-9][0-9])[0-9]{2})";
    var Mo = S + "((?:1[012])|(?:0[1-9])|[1-9])";
    var Dy = S + "((?:3[01])|(?:[12][0-9])|(?:0[1-9])|[1-9])";
    var Hr = "(2[0-4]|[01]?[0-9])";
    var Mn = S + "([0-5]?[0-9])";
    var Sd = "(?:" + S + "([0-5]?[0-9])(?:[.,]([0-9]+))?)?";
    var TZ = "(?:(Z)|(?:([\+\-])(1[012]|[0]?[0-9])(?::?([0-5]?[0-9]))?))?";
        // RegEx the input
        // First check: Just date parts (month and day are optional)
        // Second check: Full date plus time (seconds, milliseconds and TimeZone info are optional)
    var TF;
    if ( TF = new RegExp("^" + Yr + "(?:" + Mo + "(?:" + Dy + ")?)?" + "$").exec(CurDate) ) {} else if ( TF = new RegExp("^" + Yr + Mo + Dy + "[Tt ]" + Hr + Mn + Sd + TZ + "$").exec(CurDate) ) {};
        // If the date couldn't be parsed, return null
    if ( !TF ) { return null };
        // Default the Time Fragments if they're not present
    if ( !TF[2] ) { TF[2] = 1 } else { TF[2] = TF[2] - 1 };
    if ( !TF[3] ) { TF[3] = 1 };
    if ( !TF[4] ) { TF[4] = 0 };
    if ( !TF[5] ) { TF[5] = 0 };
    if ( !TF[6] ) { TF[6] = 0 };
    if ( !TF[7] ) { TF[7] = 0 };
    if ( !TF[8] ) { TF[8] = null };
    if ( TF[9] != "-" && TF[9] != "+" ) { TF[9] = null };
    if ( !TF[10] ) { TF[10] = 0 } else { TF[10] = TF[9] + TF[10] };
    if ( !TF[11] ) { TF[11] = 0 } else { TF[11] = TF[9] + TF[11] };
        // If there's no timezone info the data is local time
    if ( !TF[8] && !TF[9] ) {
        return new Date(TF[1], TF[2], TF[3], TF[4], TF[5], TF[6], TF[7]);
    };
        // If the UTC indicator is set the date is UTC
    if ( TF[8] == "Z" ) {
        return new Date(Date.UTC(TF[1], TF[2], TF[3], TF[4], TF[5], TF[6], TF[7]));
    };
        // If the date has a timezone offset
    if ( TF[9] == "-" || TF[9] == "+" ) {
            // Get current Timezone information
        var CurTZ = new Date().getTimezoneOffset();
        var CurTZh = TF[10] - ((CurTZ >= 0 ? "-" : "+") + Math.floor(Math.abs(CurTZ) / 60))
        var CurTZm = TF[11] - ((CurTZ >= 0 ? "-" : "+") + (Math.abs(CurTZ) % 60))
            // Return the date
        return new Date(TF[1], TF[2], TF[3], TF[4] - CurTZh, TF[5] - CurTZm, TF[6], TF[7]);
    };
        // If we've reached here we couldn't deal with the input, return null
    return null;

}; 
```

我相信您可以创建一个更小、更精简的版本（我的代码是为了可维护性而不是紧凑性而编写的）——但这将管理 ISO8601 日期时间的大多数变化，并且从未让我失望。;^)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T01:28:32.240

我最终将日期转换为服务器端的时间戳，然后将其发送给客户端。NodeJS（当然是基于 Chrome 的 JavaScript 引擎）可以很好地解析这种格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T16:09:57.483

我有同样的问题，这对我有用：[https ://github.com/csnover/js-iso8601](https://github.com/csnover/js-iso8601)

它覆盖了 Date.parse 函数。

# regex - 如何使用正则表达式提取带有可选 street2 的地址

> ID：12505359
> 
> 赞同：0
> 
> 时间：2012-09-20T02:29:46.593
> 
> 标签：regex

我需要提取名称、街道 1、街道 2、城市、州、邮编

我有这种形式的数据

```
JOHN m SMITH [1111 WEST OAK ROAD, SUITE 101, CITY, ST 55555]
GEORGE m JONES [222 MAIN STREET, CITY, ST 55555] 
```

我对 JOHN 的结果应该是

```
name="JOHN m SMITH"
street1="1111 WEST OAK ROAD"
street2="SUITE 101"
city = "CITY"
state = "ST"
zip = "55555" 
```

这适用于乔治的数据

```
 Regex r = new Regex(@"^(?<name>.*)\[(?<street>.*)[,]\s(?<city>.*)[,]\s(?<state>.*)\s(?<zip>\d{5})\]$");
            var match = r.Match(fullNameAndAddress);
            name = match.Groups["name"].Value;
            street = match.Groups["street"].Value;
            city = match.Groups["city"].Value;
            state = match.Groups["state"].Value;
            zip = match.Groups["zip"].Value; 
```

如何添加可选的 street2？

我想要 1 个且只有 1 个“街头”组。我认为它应该有这个：(....){1}？

street2 是可选的 0 或 1 次。我认为它应该有这个（...）？

但它不适用于 JOHN 的数据，street1 和 street2 都进入了街道组：

```
^(?<name>.*)\[((?<street>.*)[,]\s){1}?((?<street2>.*)[,]\s)?(?<city>.*)[,]\s(?<state>.*)\s(?<zip>\d{5})\]$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:38:26.180

你能澄清一下你想在街上存储什么吗？

你想让 John's 看起来像“1111 WEST OAK ROAD, SUITE 101”吗？

或者你想把它塞进一些你不会使用的变量中，让这条街看起来像“1111 WEST OAK ROAD”？

编辑：澄清后，请查看此链接

[http://rubular.com/r/S4HaTMVFZl](http://rubular.com/r/S4HaTMVFZl)

我相信这里发生的事情是 * 是贪婪的，在找到 [,]\s 的最终出现之前尽可能多地抓住它

添加一个？在 .* 之后让它变得懒惰，尽可能少地获取信息。

修改后的正则表达式看起来像这样

```
^(?<name>.*)\[((?<street>.*?)[,]\s)((?<street2>.*)[,]\s)?(?<city>.*)[,]\s(?<state>.{2})\s(?<zip>\d{5})\]$ 
```

您会注意到我将状态的正则表达式从 .* 更改为 .{2}，强制使用 2 个字符的状态。如果您不想要它，请随时恢复它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:59:56.777

我在 rubular.com 中对您的正则表达式进行了一些更改，它似乎适用于两个示例字符串：

```
^(?<name>.+)\s\[(?<street>[^,]+),\s((?<street2>[^,]+),\s+)?(?<city>[^,]+),\s(?<state>.+)\s(?<zip>\d{5})\]$

street2 = match.Groups["street2"].Value; 
```

我从正则表达式中学到的一个技巧是使用分隔符的否定（例如，[^,]* 表示除逗号之外的任何内容）而不是 .*，因此不可能用一个表达式捕获多个字段。此外，至少需要一次匹配的 + 运算符在大多数组中都很有用。

此外，仅当地址中有 street2 组件时，附加逗号才存在，这表明逗号应与 street2 部分位于同一捕获组中。我在 street2 捕获组周围添加了一个额外的捕获组来解决这个问题。您可以在大多数语言中使组不捕获，但这似乎没有必要。

# ruby - Marshal.loading 一个类数组，其中一个不再存在

> ID：12505361
> 
> 赞同：0
> 
> 时间：2012-09-20T02:29:52.380
> 
> 标签：ruby, ruby-on-rails-3

在我的一个 Rails 模型中，我保存了一个 Marshal 序列化的类数组。如果我更改其中一个类的名称，Marshal 将不再能够反序列化数组。有没有办法获得数组中未更改的部分？

以下是如何在 IRB 中模拟我的问题

```
$ irb
> require 'set'
> tmp = Marshal.dump [Hash, Fixnum, Set]
> => "\x04\b[\bc\tHashc\vFixnumc\bSet"
> Marshal.load "\x04\b[\bc\tHashc\vFixnumc\bSet"
> => [Hash, Fixnum, Set] - like I want
> exit

$ irb
> Marshal.load "\x04\b[\bc\tHashc\vFixnumc\bSet"
> # throws error, but what I want is [Hash, Fixnum], or even [Hash, Fixnum, nil] 
```

有什么办法可以让我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:22:19.103

在您的示例中，`require 'set'`当您跳回`irb`. 我对此进行了测试，如果您这样做，marshal 将正确反序列化数组。

附带说明一下，比 Marshal 更好的选择是使用像 Ox 这样的东西，它将 Ruby 对象序列化为 XML。使用它可能会容易得多。

[牛宝石主页](http://www.ohler.com/ox/)

下面是 gem 主页上使用 Ox 编组的示例：

```
require 'ox'

class Sample
  attr_accessor :a, :b, :c

  def initialize(a, b, c)
    @a = a
    @b = b
    @c = c
  end
end

# Create Object
obj = Sample.new(1, "bee", ['x', :y, 7.0])
# Now dump the Object to an XML String.
xml = Ox.dump(obj)
# Convert the object back into a Sample Object.
obj2 = Ox.parse_obj(xml) 
```

# android - 在 ActionBar 中有两个单选组不起作用，但附加一个弹出菜单也不起作用

> ID：12505362
> 
> 赞同：5
> 
> 时间：2012-09-20T02:30:01.127
> 
> 标签：android, android-layout, drop-down-menu, android-actionbar, android-menu

我正在编写一个 Android 应用程序，用户必须在其中选择在图表上显示的方式和内容。这些选项在**两个单选菜单组（单选按钮）中表示，这两个菜单组都应该可以从操作栏访问。**

第一组工作正常。它添加在我的 ActionBar XML 的末尾，如下所示：

```
<group android:checkableBehavior="single" android:showAsAction="never" >
    <item android:id="@+id/menu_choice_1" android:title="Choice 1" />
    <item android:id="@+id/menu_choice_2" android:title="Choice 2" android:checked="true"/>
</group> 
```

**但是，当我`<group>`在第一个下方添加第二个时，两者合并**为一个单选列表。换句话说，两个列表中的选项一起呈现，如果我选择与第一个列表相关的选项，我无法从第二个列表中选择任何内容。

相反，我想要**两个单独**的单选按钮列表。我的下一个想法是添加另一个按钮 ActionBar，单击该按钮会**启动一个[弹出菜单](http://developer.android.com/guide/topics/ui/menus.html#PopupMenu)**。但是当我单击按钮时，我得到一个`IllegalStateException`，说我的“MenuPopupHelper 不能在没有锚点的情况下使用”。

这是我尝试的弹出菜单代码：

在我的 ActionBar XML 中：

```
<item android:id="@+id/menu_openothermenu"
  android:title="@string/openothermenustr"
  android:showAsAction="always" /> 
```

我的新菜单 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <group android:checkableBehavior="single">
        <item android:id="@+id/menu_2_choice_1" android:title="@string/2_choice_1" />
        <item android:id="@+id/menu_2_choice_2" android:title="@string/2_choice_2" android:checked="true"/>
    </group>
</menu> 
```

我的活动中的代码：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor;

    switch (item.getItemId()) {
    case R.id.openothermenu:
        Menu m = (Menu) findViewById(R.menu.other_menu);
        PopupMenu popup = new PopupMenu(this, findViewById(R.menu.main_menu));
        popup.setOnMenuItemClickListener(this);
        MenuInflater inflater = popup.getMenuInflater();
        inflater.inflate(R.menu.other_menu, popup.getMenu());
        /* This commented block doesn't work either, and prevents execution
        // Restore saved chosen value
        int chosen = settings.getInt(MENU_2_PREFS, -1);
        switch(chosen)
        {
            case 1:
                m.findItem(R.id.menu_1_choice_1).setChecked(true);
                updateVisibleThings();
                break;
            default:
            case 2:
                m.findItem(R.id.menu_2_choice_2).setChecked(true);
                updateOtherVisibleThings();
                break;
        }
        */
        popup.show();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
}

@Override
public boolean onMenuItemClick(MenuItem item) {
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor;

    switch(item.getItemId()) {
    case R.id.menu_2_choice_1:
        if (item.isChecked()) item.setChecked(false);
        else item.setChecked(true);
        updateVisibleThings();

        // save chosen setting
        editor = settings.edit();
        editor.putInt(MENU_2_PREFS, 1);
        editor.commit(); // Commit the edits!

        return true;
    case R.id.menu_2_choice_2:
        if (item.isChecked()) item.setChecked(false);
        else item.setChecked(true);
        updateOtherVisibleThings();

        // save chosen setting
        editor = settings.edit();
        editor.putInt(MENU_2_PREFS, 2);
        editor.commit(); // Commit the edits!

        return true;
    default:
        return true;
    }
} 
```

**如何创建两组可检查的菜单项，以便它们都附加到 ActionBar？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T02:44:50.747

我找到了一种优雅的方法来解决这个问题，不幸的是文档中没有。将以下代码添加到您的 ActionBar 菜单 XML：

```
<item android:id="@+id/menu_openothermenu"
      android:title="@string/openothermenustr"
      android:showAsAction="always">
    <menu>
        <group android:checkableBehavior="single">
            <item android:id="@+id/menu_2_choice_1" android:title="@string/2_choice_1"  android:showAsAction="never" />
            <item android:id="@+id/menu_2_choice_2" android:title="@string/2_choice_2"  android:showAsAction="never" android:checked="true" />
        </group>
     </menu>
</item> 
```

出现这样的菜单不需要额外的处理程序代码或弹出菜单实现。

# ajax - Firebug 如何获取具有 ajax 调用的页面的源代码，并且该文件是否保存在某处？

> ID：12505364
> 
> 赞同：1
> 
> 时间：2012-09-20T02:30:22.047
> 
> 标签：ajax, firebug, web-scraping

我一直在尝试从使用 Ajax 调用不断更新相关信息的站点中抓取信息。尽管反复尝试，我仍然无法确定 ajax 调用从中接收数据的链接。因此，我决定更改跟踪并使用 firebug 来获取数据，因为它向我显示了从 Ajax 调用中获得的数据。那么，Firebug 是否将页面源保存在任何地方，我们可以随时访问它吗？

[这](http://www.gaana.com/#!/radiostations/meethi-mirchi)是链接，我正在尝试从使用 Ajax 调用更新的页面底部获取歌曲 + 电影名称。我已经尝试通过萤火虫源代码来确定保存，但这也没有产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:14:37.697

实际上我确实找到了解决问题的方法。在 firebug 的 Net 选项卡下查看，我能够找到正在编辑特定站点的 ajax 调用。使用响应，我终于设法使用 urllib 和 urllib2 来获取所需的数据:)。

至于 firebug 如何获取源代码，我阅读了一些链接，其中说 Firebug 在那一刻获取了确切的源代码，因为它是一个浏览器扩展，因此可以更多地访问浏览器变量和服务器响应。但不确定信息的正确性。

干杯

# php - 为 PHP 5.3 开发会破坏与共享主机的兼容性吗？

> ID：12505365
> 
> 赞同：0
> 
> 时间：2012-09-20T02:30:41.113
> 
> 标签：php, shared-hosting

我正在考虑使用 PHP 5.3 功能（如匿名函数和命名空间）开发我的项目，但我担心那里的一些共享主机不支持它，下载我的软件的人将无法使用它。

我应该担心还是继续做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:46:35.800

是的，它会破坏 BC 与一些主机。无论如何都要这样做。这些主机没有理由升级，直到他们的用户抱怨，因为事情不再有效。

这是我的看法，仅此而已。

# java - 将两个表视图绑定在一起，使它们同步滚动

> ID：12505366
> 
> 赞同：5
> 
> 时间：2012-09-20T02:30:50.757
> 
> 标签：java, scrollbar, tableview, javafx, javafx-2

我想将两个表视图绑定在一起，使它们同步滚动。我怎么做？我无法找出如何访问 tableview 的滚动条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T15:23:56.870

我做了一个 CSS hack，将 Tableview 与外部滚动条绑定。一个滚动条控制两个表视图。

我的想法概述：

*   创建两个表视图
*   制作一个垂直滚动条。在这个例子中我们称之为 myScrollbar
*   将 myScrollbar 的 min 和 max 设置为 min=0, max=TableView.Items.size() 的大小
*   当 myScrollbar 的值发生变化时，调用两个 tableview 的 scrollTo(int) 函数
*   禁用使用 CSS 实现的 tableview 的原生垂直滚动条。

这将为您提供两个表，均由一个外部滚动条 (myScrollbar) 控制。

这是使用 css 隐藏 tableview 的滚动条的代码：

```
/* The main scrollbar **track** CSS class  */

.mytableview .scroll-bar:vertical .track{
        -fx-padding:0px;
    -fx-background-color:transparent;
    -fx-border-color:transparent;
    -fx-background-radius: 0em;
    -fx-border-radius:2em;

}

/* The increment and decrement button CSS class of scrollbar */

.mytableview .scroll-bar:vertical .increment-button ,
.mytableview .scroll-bar:vertical .decrement-button {

    -fx-background-color:transparent;
    -fx-background-radius: 0em;
    -fx-padding:0 0 0 0;
}

.mytableview  .scroll-bar:vertical .increment-arrow,
.mytableview  .scroll-bar:vertical  .decrement-arrow
{
    -fx-shape: " "; 
    -fx-padding:0;        
}

/* The main scrollbar **thumb** CSS class which we drag every time (movable) */
.mytableview .scroll-bar:vertical .thumb {
    -fx-background-color:transparent;
    -fx-background-insets: 0, 0, 0;
    -fx-background-radius: 2em;
    -fx-padding:0px;

} 
```

然后我们需要设置如何使用滚动条来滚动tableview。

```
scroll.setMax(100); //make sure the max is equal to the size of the table row data.
scroll.setMin(0); 
scroll.valueProperty().addListener(new ChangeListener(){

    @Override
    public void changed(ObservableValue ov, Number t, Number t1) {
        //Scroll your tableview according to the table row index
        table1.scrollTo(t1.intValue()); 
        table2.scrollTo(t1.intValue());
    }

}); 
```

[http://blog.ngopal.com.np/2012/09/25/how-to-bind-vertical-scroll-in-multi-tableview/](http://blog.ngopal.com.np/2012/09/25/how-to-bind-vertical-scroll-in-multi-tableview/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:31:25.910

我认为目前这是不可能的。TableViewSkin 继承自具有 VirtualFlow 字段的 VirtualContainerBase。VirtualFlow 对象有两个 VirtualScrollBar 字段，即您所追求的 hbar 和 vbar。不过，我看不到任何方法。

有趣的是，TableView 中还有一个私有的 contentWidth 字段，虽然这是私有的。我确信 JFX 团队对于开放太多可以理解的 API 非常谨慎。您可以要求将 contentWidth 字段作为 int 属性打开，作为 JFX JIRA 或 openjfx-dev 邮件列表上的功能请求。

权宜之计是绑定表视图选择模型的选定项或索引属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T22:41:34.967

我发现解决问题的最简单方法是将可见滚动条的 valueProperty 绑定到隐藏滚动条。

```
// Controller 
@FXML private TableView<MyBean> tableLeft;
@FXML private TableView<MyBean> tableRight;
@FXML private ScrollBar scrollBar;

@SuppressWarnings("rawtypes")
private void bindScrollBars(TableView<?> tableView1, TableView<?> tableView2, 
                 ScrollBar scrollBar, Orientation orientation) {

    // Get the scrollbar of first table
    VirtualFlow vf = (VirtualFlow)tableView1.getChildrenUnmodifiable().get(1);
    ScrollBar scrollBar1 = null;
    for (final Node subNode: vf.getChildrenUnmodifiable()) {
        if (subNode instanceof ScrollBar && 
                ((ScrollBar)subNode).getOrientation() == orientation) {
            scrollBar1 = (ScrollBar)subNode;
        }
     }

    // Get the scrollbar of second table
    vf = (VirtualFlow)tableView2.getChildrenUnmodifiable().get(1);
    ScrollBar scrollBar2 = null;
    for (final Node subNode: vf.getChildrenUnmodifiable()) {
        if (subNode instanceof ScrollBar && 
                ((ScrollBar)subNode).getOrientation() == orientation) {
            scrollBar2 = (ScrollBar)subNode;
        }
     }

    // Set min/max of visible scrollbar to min/max of a table scrollbar
    scrollBar.setMin(scrollBar1.getMin());
    scrollBar.setMax(scrollBar1.getMax());

    // bind the hidden scrollbar valueProterty the visible scrollbar
    scrollBar.valueProperty().bindBidirectional(scrollBar1.valueProperty());
    scrollBar.valueProperty().bindBidirectional(scrollBar2.valueProperty());
}

/*
 * This method must be called in Application.start() after the stage is shown,
 * because the hidden scrollbars exist only when the tables are rendered
 */
public void setScrollBarBinding() {
    bindScrollBars(this.tableLeft, this.tableRight, this.scrollBar, Orientation.VERTICAL);
} 
```

现在您必须在显示阶段并呈现表格后从 Application 调用绑定：

```
// Application
    private MyController controller;

    @Override
    public void start(Stage primaryStage) {
        try {
            FXMLLoader fxmlLoader = new FXMLLoader(SalesApp.class.getResource("scene.fxml"));
            BorderPane root = (BorderPane) fxmlLoader.load();;
            Scene scene = new Scene(root);
            scene.getStylesheets().add(getClass().getResource("app.css").toExternalForm());
            primaryStage.setScene(scene);
            primaryStage.show();            
controller = (MyController) fxmlLoader.getController();
            controller.setScrollBarBinding();
        } catch(Exception e) {
            e.printStackTrace();
        }
    } 
```

现在表格应该通过鼠标、键或滚动条同步滚动。

玩得开心，奥拉夫

# javascript - 我可以阻止特定的 Javascript 块运行吗？

> ID：12505368
> 
> 赞同：0
> 
> 时间：2012-09-20T02:31:19.230
> 
> 标签：javascript, facebook-javascript-sdk

我设计了一个包含许多 JavaScript 块的网站：

```
<script type='text/javascript'></script> 
```

用户可以发布到我的页面，恶意用户可以将脚本块发布为帖子。我想要的是将用户帖子中的脚本块视为*text*而不是*code*。

我知道我可以验证输入并过滤掉`<script>`块，但是为了满足我的好奇心，有没有办法阻止特定`<script>`标签在页面加载后运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T02:38:53.837

没有万无一失的方法来控制客户端上的 JS。即使您的逻辑阻止了某些代码块的执行，也没有什么可以阻止用户修改代码并在 Javascript 控制台中运行它。

作为一般规则，浏览器端发生的一切都在用户的控制之下，不应该被信任；您可能应该重新考虑您的验证。

# mysql - 将列命名为“计数”会导致 MySQL 出现问题吗？

> ID：12505377
> 
> 赞同：1
> 
> 时间：2012-09-20T02:32:24.153
> 
> 标签：mysql

我想将一列命名为“计数”，但我担心它可能会导致问题，因为我已经编写了很多使用的查询`count(*) as `count`

这会导致问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:34:47.093

我不推荐它，因为它是一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，但如果你必须，你可以用反引号转义它：

```
SELECT `count` FROM `table` WHERE 1 
```

就您已有的内容而言，您仍然可以使用这两个查询。将`COUNT(*) AS 'count'`返回单行和单列“count”。该`SELECT 'count'`方式会将其作为普通列返回。

另外，请注意我在最后一句中使用了 ' 而不是 `，只是因为 SO 使用 ` 来表示代码。

总而言之，这是个坏主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:44:11.843

同意乔希的回答。你可以在反引号内使用几乎任何东西，包括我相信的空格——但*不要那样*做！

从语义上讲，我会问拥有一个名为“count”的字段有什么好处。它到底在计算什么？我建议您养成更具体的字段名称的习惯。例如：`limb_count`, `error_count`, `num_attempts`, `num_failures`...

当您在大型查询中连接多个表时，如果您的字段名称不模棱两可，SQL 将读取得更清晰。

# sass - 有没有办法在 SASS 中“取消扩展”一个类？

> ID：12505378
> 
> 赞同：10
> 
> 时间：2012-09-20T02:32:33.647
> 
> 标签：sass, compass-sass

现在我有一个类，我正在`@extend`学习所有`button`元素。但是，我不想将它扩展到一个按钮，并且不想诉诸于更改 HTML 以使其成为链接。

**有什么方法可以删除`@extend`SASS 中的特定规则？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T11:39:43.807

不，您的选择是：

1.  不要为所有按钮设置样式（使用类或更具体的选择器来避免您的独特元素）
2.  覆盖唯一元素的样式（根据所使用的样式，将按钮返回到每个浏览器的默认外观可能非常困难）

对您来说最不痛苦的解决方案是使用 :not 选择器：

```
// style all buttons, except for ones with the "default" class on them
button:not(.default) { %extend theStyles } 
```

# php - PHP + XML - 如何使用 SimpleXML 或 DOMDocument 重命名和删除 XML 元素？

> ID：12505381
> 
> 赞同：2
> 
> 时间：2012-09-20T02:32:48.647
> 
> 标签：php, xml, simplexml, domdocument

由于 StackOverflow 社区的帮助，我已经取得了一些成功，以修改复杂的 XML 源以与 jsTree 一起使用。但是，既然我有可用的数据，只有在我手动编辑 XML 以执行以下操作时才如此：

1.  将所有`<user>`标签重命名为`<item>`
2.  删除第一个`<user>`标签之前的一些元素
3.  `'encoding=UTF-8'`在 XML 开启器中插入一个
4.  最后将`<response>`（打开 XML 标记）修改为`<root>`

XML 文件示例：[SampleXML](http://www.fluffyduck.com.au/sampleXML.xml)

我在这里和谷歌上阅读了很多页面，但找不到实现上述项目的方法。

**第 (2) 点**我发现通过[SimpleXML](http://php.net/manual/en/book.simplexml.php)加载它并使用`UNSET`i 可以删除我不需要的部分，但是我仍然遇到其他问题。

我想我也许可以使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)（我更熟悉）修改源代码，然后通过我之前提供的帮助继续修改代码。

```
<?php
$s = file_get_contents('http://www.fluffyduck.com.au/sampleXML.xml');
$doc1 = simplexml_load_string($s);

unset($doc1->row);
unset($doc1->display);

#$moo = $doc1->user;
echo '<textarea>';
echo $doc1->asXML();
echo '</textarea>';

$doc = new DOMDocument();
$doc->loadXML($doc1);

$users = $doc->getElementsByTagName("user");
foreach ($users as $user)
{
    if ($user->hasAttributes())
    {
        // create content node
        $content = $user->appendChild($doc->createElement("content"));
        // transform attributes into content elements
        for ($i = 0; $i < $user->attributes->length; $i++)
        {
            $attr = $user->attributes->item($i);
            if (strtolower($attr->name) != "id")
            {
                if ($user->removeAttribute($attr->name))
                {
                        if($attr->name == "username") {
                                $content->appendChild($doc->createElement('name', $attr->value));
                        } else {
                            $content->appendChild($doc->createElement($attr->name, $attr->value));
                        }
                    $i--;
                }
            }
        }
    }
}
$doc->saveXML();

header("Content-Type: text/xml");
echo $doc->saveXML();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:18:19.493

使用递归，您可以根据输入创建一个全新的文档，一次解决所有问题：

**代码**

```
<?php

$input = file_get_contents('http://www.fluffyduck.com.au/sampleXML.xml');
$inputDoc = new DOMDocument();
$inputDoc->loadXML($input);

$outputDoc = new DOMDocument("1.0", "utf-8");
$outputDoc->appendChild($outputDoc->createElement("root"));

function ConvertUserToItem($outputDoc, $inputNode, $outputNode)
{
    if ($inputNode->hasChildNodes())
    {
        foreach ($inputNode->childNodes as $inputChild)
        {
            if (strtolower($inputChild->nodeName) == "user")
            {
                $outputChild = $outputDoc->createElement("item");
                $outputNode->appendChild($outputChild);
                // read input attributes and convert them to nodes
                if ($inputChild->hasAttributes())
                {
                    $outputContent = $outputDoc->createElement("content");
                    foreach ($inputChild->attributes as $attribute)
                    {
                        if (strtolower($attribute->name) != "id")
                        {
                            $outputContent->appendChild($outputDoc->createElement($attribute->name, $attribute->value));
                        }
                        else
                        {
                            $outputChild->setAttribute($attribute->name, $attribute->value);
                        }
                    }               
                    $outputChild->appendChild($outputContent);
                }
                // recursive call
                ConvertUserToItem($outputDoc, $inputChild, $outputChild);
            }
        }
    }
}

ConvertUserToItem($outputDoc, $inputDoc->documentElement, $outputDoc->documentElement);

header("Content-Type: text/xml; charset=" . $outputDoc->encoding);
echo $outputDoc->saveXML();
?> 
```

**输出**

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <item id="41">
        <content>
            <username>bsmain</username>
            <firstname>Boss</firstname>
            <lastname>MyTest</lastname>
            <fullname>Test Name</fullname>
            <email>lalal@test.com</email>
            <logins>1964</logins>
            <lastseen>11/09/2012</lastseen>
        </content>
        <item id="61">
            <content>
                <username>underling</username>
                <firstname>Under</firstname>
                <lastname>MyTest</lastname>
                <fullname>Test Name</fullname>
                <email>lalal@test.com</email>
                <logins>4</logins>
                <lastseen>08/09/2009</lastseen>
            </content>
        </item>
... 
```

# python - 使用 py2exe 编译时打印不起作用

> ID：12505383
> 
> 赞同：8
> 
> 时间：2012-09-20T02:33:36.280
> 
> 标签：python, printing, py2exe

这是我非常简单的代码，打印 argvs：

```
import sys

argv=sys.argv
for each in sys.argv:
    print each 
```

这是运行时的输出：

```
e:\python>python test1.py 1 2 3 4 5
test1.py
1
2
3
4
5 
```

我希望它被编译，所以我用 py2exe 做了一个：

```
e:\python>python setup.py py2exe 
```

和我的 setup.py：

```
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    options = {'py2exe': {'bundle_files': 3}},
    windows = [{'script': "test1.py"}],
    zipfile = None,
) 
```

当我通过 test1.exe 1 2 3 4 5 或任何其他 argv 运行我的程序时，我没有得到任何输出。sys.argvs 应该是一个包含至少一个对象（test1.exe）的列表，因此我认为我对 python 的打印功能有误解。我在这里做错了什么吗？我只想将所有内容都打印到命令行。我从 linux 编程，但 windows 用户应该使用我的程序。

非常感谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T03:16:13.553

```
# ...
windows = [{'script': "test1.py"}],
#... 
```

`windows`选项用于创建 GUI 可执行文件，它禁止控制台输出。改用`console`：

```
from distutils.core import setup
import py2exe, sys, os

sys.argv.append('py2exe')

setup(
    options = {'py2exe': {'bundle_files': 3}},
    console = [{'script': "test1.py"}],
    zipfile = None,
) 
```

# javascript - 带索引的文字数组？

> ID：12505385
> 
> 赞同：0
> 
> 时间：2012-09-20T02:33:45.743
> 
> 标签：javascript, arrays, object

使用 Bash，您可以[**分配一个数组**](http://tldp.org/LDP/abs/html/arrays.html)并为每个元素指定索引，如下所示

```
$ area3=([17]=seventeen [24]=twenty-four)

$ echo ${area3[17]}
seventeen 
```

问题是，JavaScript 是否有这样的符号，可能是 JSON？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:35:50.133

在 javascript 中，您可以执行以下操作：

```
var area3 = {17: 'seventeen', 24: 'twenty-four'};

console.log(area3[17]); 
```

这不是 JSON，不是**Array**，它是 javascript 对象。

# ruby - 红宝石是什么！！操作员？

> ID：12505389
> 
> 赞同：1
> 
> 时间：2012-09-20T02:34:28.623
> 
> 标签：ruby

> **可能重复：**
> [什么！在红宝石中是什么意思？](https://stackoverflow.com/questions/524658/what-does-mean-in-ruby)

我正在学习 ruby​​/rails 并找到了一个包含以下代码示例的教程：

```
def role?(role)
    return !!self.roles.find_by_name(role.to_s.camelize)
end 
```

我不知道做什么`!!`，也不知道做`!!self`什么。

我真的用谷歌搜索过，但没有找到任何东西。

谁能给一个简短的解释？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T02:36:33.840

它是“非”运算符 ( `!`) 重复了两次，因此它的参数将被强制为其取反的布尔值，然后是其对应的布尔值。基本上，这是一种将任何对象强制转换为布尔值的方法。

```
!!false # => false
!!nil # => false
!!true # => true
!!{} # => true
!![] # => true
!!1 # => true
!!0 # => true (Surprised? Only 'false' and 'nil' are false in Ruby!) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:39:22.650

它通常用于将任意值强制转换为`true`or之一`false`。`nil`这对于在任意数字、字符串或潜在值之间进行转换通常很有用。

在您的示例中，这是非常低效的，因为加载整个模型只是为了丢弃。最好写成：

```
def role?(role)
  self.roles.count_by_name(role.to_s.camelize) > 0
end 
```

该查询将返回一个用于比较目的的奇异值，其结果自动为布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T02:38:35.170

这确认了该操作将始终返回布尔值

```
!!1 #gives you true
!!nil #gives you false 
```

在 ruby​​ nil 中，false 被认为是 false，0、0.0 和其他对象被认为是 true

# javascript - 整个整数的汇总

> ID：12505391
> 
> 赞同：-5
> 
> 时间：2012-09-20T02:34:58.117
> 
> 标签：javascript, integer

DHTML 页面，它接受用户在文本字段中作为整数输入。当用户按下“显示”按钮时，您在 javascript 中创建的函数应该能够在警报消息中显示整个整数的总和。

**例子**

输入 ：

```
"21547524" 
```

输出：

```
"2+1+5+4+7+5+2+4 = 30" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:59:13.373

```
var input="21547524";
var additions=input.split('').join('+');
alert(additions+' = '+eval(additions)); 
```

# ruby-on-rails - Twitter Bootstrap 2：如何向 Rails 资产管道添加响应性（ness）

> ID：12505392
> 
> 赞同：3
> 
> 时间：2012-09-20T02:34:58.817
> 
> 标签：ruby-on-rails, twitter-bootstrap, asset-pipeline, responsive-design

用 Twitter Bootstrap 美化了我的 Rails 应用程序，但我想我错过了如何将[Bootstrap 的响应行为](http://twitter.github.com/bootstrap/scaffolding.html#responsive)添加到**资产管道**中。

目前，当我拉伸窗口时，它不会增长（或缩小，就此而言）。

我在以下位置添加了视口元数据`<head>`：

```
<meta content='width=device-width, initial-scale=1.0' name='viewport'> 
```

但是，不太确定如何或在何处添加样式表：

```
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T13:53:03.327

找到它们，它们已经包含在**bootstrap-sass** gem 中：

“根据 Bootstrap 项目，我们默认不包含响应式样式。`@import "bootstrap-responsive";`获取它们。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:05:11.313

您可以将文件添加到 sprockets 可以找到它的地方，例如`vendors/assets/stylesheets`自然的地方。取决于你有什么`app/assets/stylesheets/application.css`可能会这样做，但如果你`require_tree .`在那里没有声明，那么你需要明确地包含它：

```
/*
 ...
 *= require bootstrap-responsive.css
 */ 
```

在你的布局中，如果你有一个`stylesheet_include_tag :application`应该这样做的，你不应该明确地添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:00:35.207

我建议使用像[https://github.com/seyhunak/twitter-bootstrap-rails这样的 gem](https://github.com/seyhunak/twitter-bootstrap-rails)

# excel-2007 - Excel 2007 条件格式中的间接函数

> ID：12505394
> 
> 赞同：0
> 
> 时间：2012-09-20T02:35:48.170
> 
> 标签：excel-2007, conditional-formatting

为什么以下都不适用于条件格式公式？

```
=OFFSET(INDIRECT("R"&ROW()),0,1)<>""
=OFFSET(INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE),0,1)<>"" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:35:45.293

编辑：我们刚刚停电了 1.5 小时。刚开始我就意识到我说错了。

第二种对我有用，但它只适用于数字。如果我将其更改为以下内容，则适用于所有情况：

```
=OFFSET(INDIRECT("R"&ROW()&"C"&COLUMN(),FALSE),0,1)<>"" 
```

你只有一个大于号 - ">"，它不会像预期的那样对数字起作用。

第一个不起作用，那是因为您要指定整行。

对困惑感到抱歉。

# cocos2d-iphone - 在没有 CCSpriteBatchNode 的情况下使用 CCSpriteFrameCache

> ID：12505396
> 
> 赞同：1
> 
> 时间：2012-09-20T02:35:49.397
> 
> 标签：cocos2d-iphone

我想知道是否有任何好处缓存精灵表并在不使用 CCSpriteBatchNode 的情况下逐帧访问精灵？

在我的游戏的某些部分，精灵批处理节点很有用，因为屏幕上有很多东西，但在另一部分它不是，因为只有一些东西，而且对图层有要求，所以 CCSpriteBatchNode 不会有用。然而，为了保持一致性，我想对我所有的精灵使用 Sprite Sheets，所以我开始怀疑我是否还能从中获得任何好处？（或者更糟糕的是它可能会慢一些......）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:35:59.007

将所有精灵放入您所称的纹理图集或精灵表中无疑是有好处的。纹理以二维的幂存储在内存中。因此，如果您有一个 129 像素 x 132 像素的精灵，它将以 256 像素 x 256 像素的形式存储在内存中，这是最接近 2 大小的幂。如果你有很多精灵，那么就会用掉很多额外的内存。

通过使用纹理图集，您在内存中只有一个纹理，然后它会从中提取出精灵所需的碎片。这些精灵可以是您想要的任何大小，而不必担心 2 个大小的力量。

您可以在本教程 [http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-中阅读有关它的更多详细信息格式](http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats)

# c++ - 增强不可复制的怪异

> ID：12505397
> 
> 赞同：5
> 
> 时间：2012-09-20T02:35:52.357
> 
> 标签：c++, visual-studio-2008, boost, noncopyable

我有一个继承自的类`boost::noncopyable`；说，标题摘录如下：

```
class A : boost::noncopyable {
   ...
   blah
   ...
private:
   struct impl;
   boost::scoped_ptr<impl> m_impl;
}; 
```

然后在我的解决方案的一个项目中，我有一个类（也恰好继承自`boost::noncopyable`），其实现细节中的私有成员是对 A 类型对象的引用，例如，在标题摘录中：

```
class B : boost::noncopyable {
   ...
   blah
   ...
private:
   struct impl;
   boost::scoped_ptr<impl> m_impl;
}; 
```

并在实施摘录（cpp）中：

```
struct B::impl {
    impl(A& a) : m_a(a) {}
    set_A(A& a) {m_a = a;}
    A& m_a;
    ...
}

B(A& a) : m_impl(new impl(a)) {}
... 
```

然后在我的解决方案的另一个项目中，我有一个从 B 继承的 C 类，例如，带有标题摘录：

```
class C : public B {
   ...
   blah;
   ...
private: 
   struct impl;
   boost::scoped_ptr<impl> m_impl;
}; 
```

并在实施摘录（cpp）中：

```
struct C::impl {
    impl(A& a) : m_a(a) {}
    void set_A(A& a) {m_a = a;}
    A& m_a;
};

C(A &a) : B(a), m_impl(new impl(a)) {}
... 
```

但是当我尝试在 MSVC++ 2008 中构建时，出现以下错误：

```
error C2248: 'boost::noncopyable_::noncopyable::operator =' : cannot access private member declared in class 'boost::noncopyable_::noncopyable'
see declaration of 'boost::noncopyable_::noncopyable::operator ='
error C2248: 'boost::scoped_ptr<T>::operator =' : cannot access private member declared in class 'boost::scoped_ptr<T>' with T = A::impl
This diagnostic occurred in the compiler generated function 'A& A::operator =(const A&)' 
```

编译器只对 C 的`set_A`函数有问题，对 B 没有问题`set_A`。欣赏是否有人对此有任何想法并可以阐明？一如既往地感谢您的关注。

## 编辑：

总而言之，我在这里不明白的是为什么编译器对何时应用有关`boost::noncopyable`. 当我注释掉`set_A(..)`C 类中的函数时，一切编译正常。但是当我保留它时，它会给出错误，而在 B 类中它没有任何问题。我还稍微编辑了上面的错误消息以提供更多细节。我在这里注意到它说明了一些关于编译器生成函数的内容。会不会因为某种原因只发生在 C 类？为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T11:58:30.677

[编辑]

首先，现在我更好地理解了你的问题，但我仍然不明白你为什么不想将你的实现更改为：

```
struct C::impl {
    impl(A& a) : m_a(&a) {}
    void set_A(A& a) {m_a = &a;}
    A* m_a;
}; 
```

对于`A`不可复制，这将简单地不起作用：

```
void set_A(A& a) {m_a = a;} 
```

* * *

反正：

这个错误：

> 错误 C2248：“boost::scoped_ptr::operator =”：无法访问在类“boost::scoped_ptr”中声明的私有成员，其中 T = A::impl

是因为`boost::scoped_ptr<T>`是不可复制的，这一事实与您的`A`课程不可复制这一事实无关。

这个错误：

> 此诊断发生在编译器生成的函数 'A& A::operator =(const A&)'

肯定是因为其中一项`XXX::set_A(A& a) { m_A = a; }`功能。在这样的功能`A::operator =(const A&)`是必需的 - 因为它没有定义编译器尝试定义默认的。默认一个将一个一个地复制成员 - 一个`A`成员是 non-copyable `boost::scoped_ptr<A::impl>`。

那么对您来说最重要的问题 - 为什么只有一个错误 - 而不是两种`XXX::set_A(A& a) { m_A = a; }`方法？

我在我的 g++ 4.5.x 环境中测试了你的案例的简化版本。诊断与您的非常相似 - 效果也非常相似 - 只有一个`set_A`功能被抱怨 - 第一个。**这是因为`A& operator = (const A&)`两者都需要 - 但只为第一个生成。**g++ 给出了很好的诊断：

> ```
> ../src/AnExample.cpp:24:32: note: synthesized method 'A& A::operator=(const A&)' first required here 
> ```

我的例子和诊断：

```
class noncopyable {
private:
   noncopyable(const noncopyable&);
   noncopyable& operator = (const noncopyable&);
};

class A {
  noncopyable m;
};

class B {
  B(A& a) : a(a) {}
  void set_A(A& a) { this->a = a; } // line 24
  A& a;
};

class C {
  C(A& a) : a(a) {}
  void set_A(A& a) { this->a = a; }
  A& a;
}; 
```

* * *

```
make all 
Building file: ../src/AnExample.cpp
Invoking: Cygwin C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"src/AnExample.d" -MT"src/AnExample.d" -o "src/AnExample.o" "../src/AnExample.cpp"
../src/AnExample.cpp: In member function 'A& A::operator=(const A&)':
../src/AnExample.cpp:15:17: error: 'noncopyable& noncopyable::operator=(const noncopyable&)' is private
../src/AnExample.cpp:18:9: error: within this context
../src/AnExample.cpp: In member function 'void B::set_A(A&)':
../src/AnExample.cpp:24:32: note: synthesized method 'A& A::operator=(const A&)' first required here 
make: *** [src/AnExample.o] Error 1
src/subdir.mk:18: recipe for target `src/AnExample.o' failed 
```

# python - 在输入中查找连续的空白字符

> ID：12505399
> 
> 赞同：2
> 
> 时间：2012-09-20T02:36:11.273
> 
> 标签：python, python-3.x, spaces, counting

我要找出输入中连续空格的数量。假设输入是：

```
'          hi there' 
```

我想得到数字“10”，因为它是该字符串中最长的“连续”空格，而不是“11”，它是所有空格的数量。

非常感谢任何形式的帮助。

谢谢！我现在知道如何为一个字符串执行此操作，但是输入应该是多行，我似乎无法使用它。输入是这样的：

```
'hkhkh

 hk           hk` 
```

在一个输入中大约有 5 条不同的线路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T02:46:06.720

你会想看看[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
from itertools import groupby

my_string = '          hi there'
current_max = 0

# First, break the string up into individual strings for each space
split_string = my_string.split(" ")

# Then, iterate over the list returning each string
# along with an iterator containing all the matches
# that follow it in a connected run
# e. g. "aaabbaa" would produce a data structure akin to this:
# [("a", ["a", "a", "a"]), ("b", ["b", "b"]), ("a", ["a", "a"])]
for c, sub_group in groupby(split_string):
    # If the string is not an empty string (e. g. it was not a space)
    # we are not interested in it - so skip this group.
    if c != '':
        continue

    # Get the length of the run of spaces
    i = len(list(sub_group))
    if i > current_max:
        current_max = i

print("The longest run of spaces is", current_max) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:03:48.147

您将什么定义为空白。仅空格或也：tab ( `\t`) 回车 ( `\r`) 换行 ( `\n`)

```
some_string = """hkhkh

 hk           hk

           and here"""

ls = longest_streak = 0
cs = current_streak = 0

for character in some_string:

    # or some other test will depend on your use case (numbers? '"/%$!@#$ etc.).
    # if not character in (' ', '\n', '\r', '\t'): 
    if character.isalpha():
        if cs > ls:
            ls = cs
        cs = 0
        continue

    elif character in ('\r', '\n'):
        continue

    else:
        cs += 1

print(ls) 
```

如果遇到隐藏字符，`elif`它将继续当前的连胜，如果你想考虑制表`\r \n`符，你也可以添加。`\t`

# html - 使用 CSS 在 IE 8 中创建列表

> ID：12505400
> 
> 赞同：1
> 
> 时间：2012-09-20T02:36:14.870
> 
> 标签：html, css, list

我是 CSS 新手，我在 IE8 中遇到了列表问题。我正在创建一个包含多个 li 元素的无序列表，其中包含两个名为 left 和 right 的 div。

HTML 代码 -

```
 <ul>
        <li>
             <div class="left">
                 <p>ONE</p>
             </div>
             <div class="right">
                 <p>TWO</p>
             </div>
        </li>
        <li>
             <div class="left">
                 <p>THREE</p>
             </div>
             <div class="right">
                 <p>FOUR</p>
             </div>
        </li> 
   </ul> 
```

我本质上想创建一个包含两列的列表。我的 CSS -

```
 ul {
       list-style-type: none;
       padding: 0px;
       margin: 0px;
   }

    ul li {
      height: 40px;
      width: 800px;
      border: 1px solid;
   }

ul li div.left, div.right {
      display: inline-block;
      *display: inline;
      zoom: 1;
   } 
```

使用上面的 CSS 和 html，我得到一个包含两列高度为 40px 的列表。在 Firefox 和 chrome 中，它显示的正是我想要的，但在 IE 中却是另一回事。

在 IE 中，我看到了相同的列表，但唯一的问题是间距。在 IE 中，左右 div 位于其父 li 的顶部，而在 Chrome 和 Firefox 中，它们的元素位于中间，这就是我想要的。

如何在 IE 中发生这种情况？在 IE 中，我的 div 紧贴在 li 元素的顶部，中间没有填充。我需要在我的 CSS 中添加其他内容吗？如果有人可以提供帮助，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:37:20.677

你也可以浮动你的盒子，并给它们一个与 li 匹配的高度。内联块在所有浏览器/版本中都不能按预期工作。

```
ul li div.left,
ul li div.right {
    float: left;
    height: 40px;
    width: 400px;
} 
```

# c++ - 迭代器和向量的 Seg 错误

> ID：12505401
> 
> 赞同：1
> 
> 时间：2012-09-20T02:36:24.643
> 
> 标签：c++, vector

我似乎在使用迭代器在向量中显示项目时遇到问题。可能，我只需要另一双眼睛看它。

```
vector<string> tempVector;
vector<string>::iterator it;

it = tempVector.begin();
tempVector.push_back("1");
cout << *it; 
```

我知道这不是完整的代码，但它是唯一运行的部分。输出是段错误。迭代器不是指向向量的开头吗？我期待得到“1”来计算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:38:21.280

`vector::reserve()`如果碰巧需要重新分配，则调用会使所有现有迭代器无效。

引用 C++ 标准，23.3.6.3[vector.capacity]

> 当且仅当当前容量小于reserve() 的参数时，此时才会发生重新分配。[...] 重新分配使所有引用序列中元素的引用、指针和迭代器无效。

编辑：编辑后，您可以调用`vector::push_back()`，如果需要重新分配，它也会使所有迭代器无效。[迭代器失效规则](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)可能会有所帮助。

# c++ - 为什么通过 string.h 访问 C++ 字符串类有效？

> ID：12505403
> 
> 赞同：2
> 
> 时间：2012-09-20T02:37:32.890
> 
> 标签：c++

在下面的 C++ 程序中，我包含了 string.h 文件，并成功地在其中实例化了 C++ 字符串类，并调用了它的成员函数之一：size()。

```
#include <iostream>
#include <string.h>
using namespace std;

int main( )
{
    string s = "Hello";
    cout << "String: " << s << endl;
    cout << "Size of string: " << s.size() << endl;
    cin.get();
    return 0;    
} 
```

输出是：

```
String: Hello
Size of string: 5 
```

我正在使用 Dev-C++ 4.9.9.2

我的问题：string.h 文件不只是提供操作 C 字符串的函数吗？它不包括 C++ 字符串类的定义，对吧？那么，我如何能够在不使用的情况下访问 C++ 字符串类`#include <string>`？我的理解是string.h文件是C字符串库文件，`<string>`包含C++字符串库文件。这不对吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T02:40:22.420

这是因为`std::string`是通过`<iostream>`标题中包含的文件之一定义的。流提供了对字符串的输入和输出的支持，因此它们需要包含一个字符串头来定义相应的`>>`和`<<`操作。

# aviarc - 关闭窗口小部件时，aviarc 文本编辑小部件不保存

> ID：12505406
> 
> 赞同：0
> 
> 时间：2012-09-20T02:37:58.347
> 
> 标签：aviarc

我在一个窗口中有一个文本编辑，文本编辑填满了整个窗口。问题是在文本编辑中填写文本后，如果您立即关闭窗口，文本编辑将不会将其更改保存回绑定到的字段。

当您取消焦点文本编辑然后单击关闭时，它将保存更改，但如果您在输入文本编辑后直接单击关闭，则不会。

当单击窗口的关闭按钮时，有没有办法强制文本编辑存储它的值？

这是一个示例设置：

```
<button left="0" top="0" width="100" height="26" label="string">
    <action:when event="onClick">
        <action:call-widget-method method="win-test.show"/>
    </action:when>
</button>
<window left="0" top="0" width="250" height="350" name="win-test" visible="n">
    <text-edit left="0" top="0" right="0" bottom="0" field="var.test" multi-line="y" name="te-test"/>
</window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:32:49.510

使用 Tristan 建议的解决方法。

这是更新的示例 xml：

在窗口内添加了一个关闭它的按钮，并禁用了窗口小部件的内置关闭按钮。

```
<button left="0" top="0" width="100" height="26" label="string">
    <action:when event="onClick">
        <action:call-widget-method method="win-test.show"/>
    </action:when>
</button>
<window left="0" top="0" width="250" height="350" name="win-test" visible="n" closable="n">
    <text-edit left="0" top="0" right="0" bottom="45" field="var.test" multi-line="y" name="te-test"/>
    <button right="10" bottom="7" width="80" height="32" label="Close" validate="n">
        <when event="onClick" xmlns="urn:aviarc:widget:com.aviarc.toronto.widget.core.action">
            <call-widget-method method="win-test.hide"/>
        </when>
    </button>
</window> 
```

# iphone - iPhone 5 / 5c / 5s / iPod touch 5 的设备代码（平台字符串）是什么？

> ID：12505414
> 
> 赞同：22
> 
> 时间：2012-09-20T02:38:47.987
> 
> 标签：iphone, ios, iphone-5

例如，iPhone 5 是“iPhone5,1”还是“iPhone5,2”？又有什么区别呢？</p>

如果有人拥有 iPhone 5，请通过运行以下代码并显示结果来提供帮助。谢谢你。

相关链接：[https ://stackoverflow.com/a/3950748/482899](https://stackoverflow.com/a/3950748/482899)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-05T13:50:43.460

您可以在此处找到所有 iOS 设备标识符的列表（包括 iPhone 5 型号和 iPad mini）： [http ://theiphonewiki.com/wiki/index.php?title=Models](http://theiphonewiki.com/wiki/index.php?title=Models)

最新型号的标识符为：

iPhone 5：iPhone5,1 和 iPhone5,2

iPhone 5C：iPhone5,3 和 iPhone5,4

iPhone 5S：iPhone6,1 和 iPhone6,2

iPhone 6：iPhone7,2

iPhone 6 Plus：iPhone7,1

iPhone 6S：iPhone8,1

iPhone 6S Plus：iPhone8,2

iPhone SE：iPhone8,4

iPhone 7：iPhone9,1 和 iPhone9,3

iPhone 7 Plus：iPhone9,2 和 iPhone9,4

iPhone 8：iPhone10,1 和 iPhone10,4

iPhone 8 Plus：iPhone10,2 和 iPhone10,5

iPhone X：iPhone10,3 和 iPhone10,6

**编辑**：我还制作了[流行的 iOS 支持矩阵的更新版本，](http://dorianroy.com/blog/2017/11/iphone-x-added-to-ios-support-matrix/)包括 iPhone X 之前的所有型号。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-11-14T20:45:59.003

```
if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 2G";
if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
if ([platform isEqualToString:@"iPhone3,2"])    return @"iPhone 4";
if ([platform isEqualToString:@"iPhone3,3"])    return @"iPhone 4 (CDMA)";
if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone 5";
if ([platform isEqualToString:@"iPhone5,2"])    return @"iPhone 5 (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone5,3"])    return @"iPhone 5c (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone5,4"])    return @"iPhone 5c (UK+Europe+Asia+China)";
if ([platform isEqualToString:@"iPhone6,1"])    return @"iPhone 5s (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone6,2"])    return @"iPhone 5s (UK+Europe+Asia+China)";
if ([platform isEqualToString:@"iPhone7,1"])    return @"iPhone 6 Plus";
if ([platform isEqualToString:@"iPhone7,2"])    return @"iPhone 6";

if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch (1 Gen)";
if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch (2 Gen)";
if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch (3 Gen)";
if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch (4 Gen)";
if ([platform isEqualToString:@"iPod5,1"])      return @"iPod Touch (5 Gen)";
if ([platform isEqualToString:@"iPod7,1"])      return @"iPod Touch (6 Gen)";

if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
if ([platform isEqualToString:@"iPad1,2"])      return @"iPad 3G";
if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2";
if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2";
if ([platform isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";
if ([platform isEqualToString:@"iPad2,6"])      return @"iPad Mini";
if ([platform isEqualToString:@"iPad2,7"])      return @"iPad Mini (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,1"])      return @"iPad 3 (WiFi)";
if ([platform isEqualToString:@"iPad3,2"])      return @"iPad 3 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,3"])      return @"iPad 3";
if ([platform isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";
if ([platform isEqualToString:@"iPad3,5"])      return @"iPad 4";
if ([platform isEqualToString:@"iPad3,6"])      return @"iPad 4 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,1"])      return @"iPad Air (WiFi)";
if ([platform isEqualToString:@"iPad4,2"])      return @"iPad Air (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,4"])      return @"iPad Mini 2 (WiFi)";
if ([platform isEqualToString:@"iPad4,5"])      return @"iPad Mini 2 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,6"])      return @"iPad Mini 2 (China)";
if ([platform isEqualToString:@"iPad4,7"])      return @"iPad Mini 3 (WiFi)";
if ([platform isEqualToString:@"iPad4,8"])      return @"iPad Mini 3 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,9"])      return @"iPad Mini 3 (China)";
if ([platform isEqualToString:@"iPad5,3"])      return @"iPad Air 2 (WiFi)";
if ([platform isEqualToString:@"iPad5,4"])      return @"iPad Air 2";

if ([platform isEqualToString:@"i386"])         return @"Simulator";
if ([platform isEqualToString:@"x86_64"])       return @"Simulator";

return platform; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-06-23T13:11:13.790

此方法涵盖市场上的所有设备：

```
- (NSString *) platform{
int mib[2];
size_t len;
char *machine;

mib[0] = CTL_HW;
mib[1] = HW_MACHINE;
sysctl(mib, 2, NULL, &len, NULL, 0);
machine = malloc(len);
sysctl(mib, 2, machine, &len, NULL, 0);

NSString *platform = [NSString stringWithCString:machine encoding:NSASCIIStringEncoding];
free(machine);
return platform; }

- (NSString *) platformString{
NSString *platform = [self platform];
if ([platform isEqualToString:@"iPhone1,1"])    return @"iPhone 1G";
if ([platform isEqualToString:@"iPhone1,2"])    return @"iPhone 3G";
if ([platform isEqualToString:@"iPhone2,1"])    return @"iPhone 3GS";
if ([platform isEqualToString:@"iPhone3,1"])    return @"iPhone 4";
if ([platform isEqualToString:@"iPhone3,3"])    return @"Verizon iPhone 4";
if ([platform isEqualToString:@"iPhone4,1"])    return @"iPhone 4S";
if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone 5 (GSM)";
if ([platform isEqualToString:@"iPhone5,2"])    return @"iPhone 5 (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone5,3"])    return @"iPhone 5c (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone5,4"])    return @"iPhone 5c (UK+Europe+Asia+China)";
if ([platform isEqualToString:@"iPhone6,1"])    return @"iPhone 5s (GSM+CDMA)";
if ([platform isEqualToString:@"iPhone6,2"])    return @"iPhone 5s (UK+Europe+Asia+China)";
if ([platform isEqualToString:@"iPhone7,1"])    return @"iPhone 6 Plus";
if ([platform isEqualToString:@"iPhone7,2"])    return @"iPhone 6";
if ([platform isEqualToString:@"iPhone8,1"])    return @"iPhone 6s";
if ([platform isEqualToString:@"iPhone8,2"])    return @"iPhone 6s Plus";
if ([platform isEqualToString:@"iPhone8,4"])    return @"iPhone SE";
if ([platform isEqualToString:@"iPhone9,1"])    return @"iPhone 7";
if ([platform isEqualToString:@"iPhone9,2"])    return @"iPhone 7 Plus";
if ([platform isEqualToString:@"iPhone9,3"])    return @"iPhone 7";
if ([platform isEqualToString:@"iPhone9,4"])    return @"iPhone 7 Plus";

if ([platform isEqualToString:@"iPod1,1"])      return @"iPod Touch 1G";
if ([platform isEqualToString:@"iPod2,1"])      return @"iPod Touch 2G";
if ([platform isEqualToString:@"iPod3,1"])      return @"iPod Touch 3G";
if ([platform isEqualToString:@"iPod4,1"])      return @"iPod Touch 4G";
if ([platform isEqualToString:@"iPod5,1"])      return @"iPod Touch 5G";

if ([platform isEqualToString:@"iPad1,1"])      return @"iPad";
if ([platform isEqualToString:@"iPad1,2"])      return @"iPad 3G";
if ([platform isEqualToString:@"iPad2,1"])      return @"iPad 2 (WiFi)";
if ([platform isEqualToString:@"iPad2,2"])      return @"iPad 2";
if ([platform isEqualToString:@"iPad2,3"])      return @"iPad 2 (CDMA)";
if ([platform isEqualToString:@"iPad2,4"])      return @"iPad 2";
if ([platform isEqualToString:@"iPad2,5"])      return @"iPad Mini (WiFi)";
if ([platform isEqualToString:@"iPad2,6"])      return @"iPad Mini";
if ([platform isEqualToString:@"iPad2,7"])      return @"iPad Mini (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,1"])      return @"iPad 3 (WiFi)";
if ([platform isEqualToString:@"iPad3,2"])      return @"iPad 3 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad3,3"])      return @"iPad 3";
if ([platform isEqualToString:@"iPad3,4"])      return @"iPad 4 (WiFi)";
if ([platform isEqualToString:@"iPad3,5"])      return @"iPad 4";
if ([platform isEqualToString:@"iPad3,6"])      return @"iPad 4 (GSM+CDMA)";
if ([platform isEqualToString:@"iPad4,1"])      return @"iPad Air (WiFi)";
if ([platform isEqualToString:@"iPad4,2"])      return @"iPad Air (Cellular)";
if ([platform isEqualToString:@"iPad4,4"])      return @"iPad Mini 2 (WiFi)";
if ([platform isEqualToString:@"iPad4,5"])      return @"iPad Mini 2 (Cellular)";
if ([platform isEqualToString:@"iPad4,6"])      return @"iPad Mini 2";
if ([platform isEqualToString:@"iPad4,7"])      return @"iPad Mini 3";
if ([platform isEqualToString:@"iPad4,8"])      return @"iPad Mini 3";
if ([platform isEqualToString:@"iPad4,9"])      return @"iPad Mini 3";
if ([platform isEqualToString:@"iPad5,3"])      return @"iPad Air 2";
if ([platform isEqualToString:@"iPad5,4"])      return @"iPad Air 2";

if ([platform isEqualToString:@"i386"])         return @"Simulator";
if ([platform isEqualToString:@"x86_64"])       return @"Simulator";
return platform; } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-23T18:11:29.407

是的，“iPhone5,1”是GSM iPhone 5，“iPhone5,2”是CDMA iPhone 5，“iPhone5,3”是GSM iPhone 5C，“iPhone5,4”是CDMA iPhone 5C，“iPhone6,1 " 是 GSM iPhone 5S， "iPhone6,2" 是 CDMA iPhone 5S。这是否回答你的问题？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-21T17:43:54.163

Verizon iPhone 5 返回“iPhone5,2”。GSM 手机返回“iPhone5,1”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-21T22:25:33.090

它看起来像 iPhone5,1 或 iPhone5,2，具体取决于 iPhone 5 的型号。

来自知名 iOS 开发者 @marcoarment：

> iPhone5,1：型号 A1428，AT&T/加拿大
> 
> iPhone5,2：型号 A1429，所有其他
> 
> A1429可能有两种模式，但我没有看到任何iPhone5,3的记录。

来源：[https ://twitter.com/marcoarment/status/249249183029161984](https://twitter.com/marcoarment/status/249249183029161984)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-26T22:50:37.540

我创建了一个用于在运行时检测设备的库。

它被称为[SDVersion](http://github.com/sebyddd/sdversion)。

认为有些人可能会发现它很有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-03T05:06:48.857

[更新]
iPhone10,1 : iPhone 8
iPhone10,2 : iPhone 8 Plus
iPhone10,3 : iPhone X 全球
iPhone10,4 : iPhone 8
iPhone10,5 : iPhone 8 Plus
iPhone10,6 : iPhone X GSM
iPhone11,2 : iPhone XS
iPhone11 ,4 : iPhone XS Max
iPhone11,6 : iPhone XS Max Global
iPhone11,8 : iPhone XR
iPhone12,1 : iPhone 11
iPhone12,3 : iPhone 11 Pro
iPhone12,5 : iPhone 11 Pro Max
iPhone12,8 : iPhone SE 2nd Gen

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-20T05:27:49.517

在这里查看您的答案[如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5). 直到现在我还没有找到任何答案，直到某个开发者购买了 iPhone 5 并发布了一些有用的信息

# java - 如何使用 XSL 和 Java 创建 PDF？

> ID：12505416
> 
> 赞同：0
> 
> 时间：2012-09-20T02:39:05.847
> 
> 标签：java, xml, xslt, xsl-fo

我相信我将不得不为用于转换为 PDF 的 XML 使用 XSLFO 样式表文档。然后我需要使用 Java 的 Transform API 将 XML 转换为 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:58:48.473

XML 数据可以使用解析器读取，并使用 iText 之类的库直接转换为 PDF（XML -> PDF），而不是使用复杂的转换（XML -> XSLT -> XSLFO -> PDF）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:17:45.420

查看 Apache FOP。我们在工作中使用它，它对我们来说效果很好。 [http://xmlgraphics.apache.org/fop/quickstartguide.html](http://xmlgraphics.apache.org/fop/quickstartguide.html)

# python - 在 Python 3 中使用开放的任意标签解析 SGML

> ID：12505419
> 
> 赞同：18
> 
> 时间：2012-09-20T02:39:42.970
> 
> 标签：python, xml, python-3.x, lxml, sgml

我正在尝试解析一个文件，例如： [http ://www.sec.gov/Archives/edgar/data/1409896/000118143112051484/0001181431-12-051484.hdr.sgml](http://www.sec.gov/Archives/edgar/data/1409896/000118143112051484/0001181431-12-051484.hdr.sgml)

我正在使用 Python 3，并且无法使用现有库找到解决方案来解析带有开放标签的 SGML 文件。SGML 允许隐式封闭标签。当尝试使用 LXML、XML 或漂亮的汤解析示例文件时，我最终会在文件末尾而不是在行尾关闭隐式关闭标签。

例如：

```
<COMPANY>Awesome Corp
<FORM> 24-7
<ADDRESS>
<STREET>101 PARSNIP LN
<ZIP>31337
</ADDRESS> 
```

这最终被解释为：

```
<COMPANY>Awesome Corp
<FORM> 24-7
<ADDRESS>
<STREET>101 PARSNIP LN
<ZIP>31337
</ADDRESS>
</ZIP>
</STREET>
</FORM>
</COMPANY> 
```

但是，我需要将其解释为：

```
<COMPANY>Awesome Corp</COMPANY>  
<FORM> 24-7</FORM>
<ADDRESS>
<STREET>101 PARSNIP LN</STREET>
<ZIP>31337</ZIP>
</ADDRESS> 
```

如果有一个非默认解析器可以传递给可以处理这个问题的 LXML/BS4，我会错过它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:27:22.007

If you can find an SGML DTD for the documents that you work with, a solution could be to use the **osx** SGML to XML converter from the [OpenSP SGML toolkit](http://openjade.sourceforge.net/doc/index.htm) to turn the documents into XML.

Here is a simple example. Let's say that we have the following SGML document (company.sgml; with a root element):

```
<!DOCTYPE ROOT SYSTEM "company.dtd">
<ROOT>
<COMPANY>Awesome Corp
<FORM> 24-7
<ADDRESS>
<STREET>101 PARSNIP LN
<ZIP>31337
</ADDRESS> 
```

The DTD (company.dtd) looks like this:

```
<!ELEMENT ROOT       -  o (COMPANY, FORM, ADDRESS) >
<!ELEMENT COMPANY    -  o (#PCDATA) >
<!ELEMENT FORM       -  o (#PCDATA) >
<!ELEMENT ADDRESS    -  - (STREET, ZIP) >
<!ELEMENT STREET     -  o (#PCDATA) >
<!ELEMENT ZIP        -  o (#PCDATA) > 
```

The `- o` bit means that the end tag can be omitted.

The SGML document can be parsed with **osx**, and the output can be formatted with **xmllint**, as follows:

```
osx company.sgml | xmllint --format - 
```

Output from the above command:

```
<?xml version="1.0"?>
<ROOT>
  <COMPANY>Awesome Corp</COMPANY>
  <FORM> 24-7</FORM>
  <ADDRESS>
    <STREET>101 PARSNIP LN</STREET>
    <ZIP>31337</ZIP>
  </ADDRESS>
</ROOT> 
```

Now we have well-formed XML that can be processed with lxml or other XML tools.

I don't know if there is a complete DTD for the document that you link to. The following PDF file contains related information about EDGAR, including a DTD that might be useful: [http://www.sec.gov/info/edgar/pdsdissemspec910.pdf](http://www.sec.gov/info/edgar/pdsdissemspec910.pdf) (I found it via [this answer](https://stackoverflow.com/a/12431072/407651)). But the linked SGML document contains elements (`SEC-HEADER`, for example) that are not mentioned in the PDF file.

# rabbitmq - RabbitMQ Topic Exchange Message for 1、部分或全部主题——如何构造它？

> ID：12505423
> 
> 赞同：0
> 
> 时间：2012-09-20T02:40:17.070
> 
> 标签：rabbitmq, webhooks

我有一条消息，需要由可变数量的队列处理。队列处理不同的目的——电子邮件、审计、webhook 处理、s3 存储。每条消息都可以将任何、部分或所有这些主题作为目标。例如，我可能会收到以下消息：

*   消息 1：audit.webhook
*   消息 2：网络钩子
*   消息 3：email.audit.webhook.s3

请注意，虽然我演示了 4 个主题，但可能有 100 个。这可以通过主题交换来处理吗？例如，将主题*.webhook。*错过消息 2？我可以将三个主题添加到队列 webhook.* 、.webhook *。*和 *.webhook 来处理所有潜在的消息，或者我是否必须知道 webhook 结束的确切位置 - 即：*.* .webhook。*.* .* 或*.webhook。*足以捕获消息 1 和消息 3？这完全可以通过主题交换来处理，还是我看错了？

**额外测试后编辑**

看来路由不像我希望的那样灵活。看来，为了实现我想要实现的目标，例如，我必须拥有一个用于 .webhook 队列的绑定*。*.*.webhook，并且消息必须始终将 webhook 保持在第 4 位，因此仅发送到 webhook 的消息的路由键必须是，例如“null，null，null，webhook，null , 空等

我的测试正确吗？我问是因为这似乎不正确。我认为有更多的灵活性，即：一种更好的方式来完成我想要完成的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:05:50.867

我认为 # 可能会有所帮助，因为它允许您拥有多个键。例如：

```
webhook.# 
```

可能相当于：

```
webhook.* 
```

或者

```
webhook.*.*.*.*.* 
```

或介于两者之间或更长的任何东西。我之前从未尝试过关键，即：

```
#.webhook.# 
```

但这应该是你调查的事情。

此外，我认为您的问题可以通过更好地设计路由/绑定键来解决。这些消息都将发送到同一个交换器，因此它们应该具有相同的路由键模式。

# c++ - 从 C 编译器更改为 C++ 编译器会导致 MSP430 固件的编译器错误

> ID：12505425
> 
> 赞同：0
> 
> 时间：2012-09-20T02:40:24.003
> 
> 标签：c++, c, embedded, msp430

我正在尝试使用新编译器（C++ 编译器，在 Visual Studio 下使用 VisualGDB）为德州仪器 MSP430 微控制器编译一个经过验证的真实固件。

此固件的所有先前版本均使用 C 编译器编译，零错误和零警告。从 C 编译器到 C++ 编译器的更改一定是我的问题的原因。（用 C 编译器编译的代码已经运行了五年没有问题。）

鉴于此代码段：

```
#include <msp430x14x.h>
WDTCTL = WDTPW+WDTHOLD; 
```

我收到此错误：

错误：“WDTCTL”未命名类型 c:\msptest\LedBlink\LedBlink.cpp

WDTCLT 在 msp430x14x.h 中声明。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T06:28:30.417

有两种可能：

*   每个编译器提供的 msp430x14x.h 是不同的 - 这种头文件没有标准形式，每个供应商可能对它们进行不同的定义。
*   您正在将一个编译器的头文件与另一个编译器一起使用，并且它使用不兼容的编译器扩展或语法。

毫无疑问，这里有大量特定于编译器的或“宏魔法”——您需要查看的是这些宏是如何被预处理器扩展的。编译器抱怨的是扩展代码，而不是您发布的源代码。

预处理器在这里被用来创建在其他情况下不是有效的 C 或 C++ 的语法，因此如果不考虑扩展，就无法确定太多。而且由于每个编译器都可能提供不同的 msp430x14x.h，而在不确切知道使用什么 C 和什么 C++ 编译器的情况下，也不能说太多。请记住，必须考虑*完全扩展 - 所以如果一个宏是根据其他宏定义的，它们也必须被扩展。*GCC有一个选项top output the pre-processor output，或者你可以直接单独运行预处理器（可执行文件是“cpp”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:15:45.843

感谢所有回复的人。除了我提出的问题之外，这些回答很有帮助。

我发现并纠正了这个问题。我必须承认，问题是我的一个粗心错误。我将完成的 C 程序中的代码剪切并粘贴到测试程序中，省略

主函数（）

因此，编译器抱怨的赋值语句在源代码的错误范围内。

我过早地发布了我的问题。

也就是说，您的回答最有助于决定继续使用 GCC 编译器（使用 Visual Studio 作为 IDE），或者使用我用于此固件所有先前版本的相同编译器。我从您提供的一系列答案中学到了很多东西。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:06:57.070

问题是`WDTCTL`使用 定义的`sfrw`，虽然未在您的代码中显示，但在[iomacros.h](http://mspgcc.bzr.sourceforge.net/bzr/mspgcc/mspgcc-core/annotate/397/msp430-libc/include/iomacros.h)`sfrw`中定义为内联 asm 语句。显然，内联 asm 将取决于处理器，而适用于 msp430 的方法在 Visual Studio 中不起作用。

# c++ - 数组中的最小差异

> ID：12505426
> 
> 赞同：1
> 
> 时间：2012-09-20T02:40:51.827
> 
> 标签：c++, algorithm

我想找到数组的所有元素之间的最小差异。我通读了其他各种问题，但在以下代码中找不到错误的确切来源。

```
#include<iostream>
#include<stdio.h>
#include<cstdlib>

using namespace std;

void quicksort(long int *lp, long int *rp);

int main()
{
    int t,n;
    long int s[5000];

    cin>>t;
    while(t--){
    cin>>n;
    for(int i=0;i<n;i++) cin>>s[i];
    quicksort(&s[0],&s[n-1]);
    //cout<<"passes:"<<passes<<endl;
    //for(int i=0;i<n;i++) cout<<s[i]<<" ";
    long int min = abs(s[1]-s[0]);
    //cout<<endl<<min;
    for(int i=1;i<(n-1);i++){
        long int temp = abs(s[i]-s[i+1]);
        if (temp <= min) min = temp;
    }
    cout<<min;
    }
}

void quicksort(long int *lp,long int *rp){
    int arraysize= (rp-lp)+1;
    if(arraysize > 1){
       long int *pivot = (lp+(arraysize/2));
       long int swap=0;
      long int *orgl = lp;
      long int *orgr = rp;
      while(lp!=rp){
        while (*lp < *pivot) lp++;
        while (*rp > *pivot) rp--;
        if (lp == pivot) pivot=rp;
        else if (rp == pivot) pivot=lp;
        swap = *lp;
        *lp = *rp;
        *rp = swap;
        if((*lp == *pivot) || ( *rp == *pivot)) break;
    }
    quicksort(orgl,pivot-1);
    quicksort(pivot+1,orgr);
} 
```

}

问题陈述在这个链接中给出：http: [//www.codechef.com/problems/HORSES](http://www.codechef.com/problems/HORSES) 你能找出我程序中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:05:15.087

您正在使用 C++，所以不要使用不能真正保证 O(n*logn) 的自定义快速排序，您最好使用 sort from `<algorithm>`。这个逻辑看起来不错：

```
 long int min = abs(s[1]-s[0]);
    //cout<<endl<<min;
    for(int i=1;i<(n-1);i++){
        long int temp = abs(s[i]-s[i+1]);
        if (temp <= min) min = temp;
    }

By the way: 
cout<<min; 
Add cout<<min << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:09:03.340

线

```
if((*lp == *pivot) || ( *rp == *pivot)) break; 
```

是错的。考虑

```
5 4 7 5 2 5
      ^
    pivot 
```

哎呀。

这条线

```
long int temp = abs(s[i]-s[i+1]); 
```

是不必要的复杂。由于数组（据说）是排序的，

```
long int temp = s[i+1] - s[i]; 
```

不调用`abs`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:12:44.493

```
sort(s, s + n); // #include <algorithm> O(n*log n) 
```

否则排序/查找最小算法是正确的。有基于随机化、桶排序的 O(n) 算法。

```
#include <algorithm> // sort()
#include <iostream>

int main() {
  using namespace std;
  int ntests, n;
  const int maxn = 5000; // http://www.codechef.com/problems/HORSES
  int s[maxn];
  cin >> ntests; // read number of tests
  while (ntests--) {
    cin >> n; // read number of integers
    for (int i = 0; i < n; ++i) cin >> s[i]; // read input array

    sort(s, s + n); // sort O(n*log n)
    // find minimal difference O(n)
    int mindiff = s[1] - s[0]; // minn = 2
    for (int i = 2; i < n; ++i) {
      int diff = s[i] - s[i-1];
      if (diff < mindiff) mindiff = diff;
    }
    cout << mindiff << endl;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-24T15:55:20.320

```
#include <iostream> using namespace std;

int main() {
    int a[] = {1,5,2,3,6,9};
    int c=0;
    int n = sizeof(a)/sizeof(a[0]);
    for(int i=0;i<n-1;i++){
        for(int j=i+1;j<n;j++){
            cout<<a[i]<<" - "<<a[j]<<" = "<<a[i]-a[j]<<endl;
            if(abs(a[i]-a[j]) == 2)
                c++;
        }
    }
    cout<<c<<endl;
    return 0; } 
```

# javascript - for 循环不会在每个索引处停止

> ID：12505434
> 
> 赞同：0
> 
> 时间：2012-09-20T02:42:29.943
> 
> 标签：javascript, jquery, dojo, autoscroll

```
var switchTabs = function(index, el) {
            //alert("Call SwitchTabs");

            ribbon.slideTo(index);
            ribbon.currentSlideIndex = parseInt(index, 10);

            //console.log(ribbon.currentSlideIndex);

            dojo.query('.ibm-slider-wrapper #ibm-thumb-slider-tabs li.ibm-active').removeClass('ibm-active');
            dojo.query(el).addClass('ibm-active');      //applies class to current active li
            //fixTabHeight(index == 4);
        } 
```

自动滚动的以下部分运行并且一次不会停止 1 个索引。它直接跳到 6，所以我的滑块从 0 移动到第 6 位。我希望它在 8 秒后一次移动 1。

如何让它停止每个索引并运行 swapTabs(a, b); 然后在 autoScroll 内触发索引变量的增量？

我尝试使用 setInterval() 但它仍然按我想要的方式运行。理想情况下，我想对每个索引使用 Switch 语句并在 setInterval 内触发 swapTabs，这样我就可以管理单个索引键的计时器。非常感谢任何帮助。

```
var autoScroll = function(){            
            //alert("Inside AutoScroll");
            //var tabCount = $('.ibm-slider-wrapper #ibm-thumb-slider-tabs li');
                for(var i = 0; i < 6; i++) {
                    var tabsIndex = $('.ibm-slider-wrapper #ibm-thumb-slider-tabs li a');
                        switchTabs(parseInt(tabsIndex[i].getAttribute('rel'), 10), tabsIndex[i].parentNode);
                        console.log(tabsIndex[i]);
                    }
        }   

        autoScroll(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:51:04.167

使用`setTimeout`并让函数调用本身：

```
var i = 0, interval = 8000, iterations = 6;

var autoScroll = function(){

    // function body here

    i++;
    console.log("Iteration #" + i);
    if (i < iterations) {
        setTimeout(autoScroll, interval);
    }  
}   

// start first run
autoScroll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:51:09.730

您的代码只是快速连续地从索引 0 变为 5（彼此相距毫秒），并且浏览器可能不会显示任何内容，直到您的脚本在索引 6 上完成。

`setTimeout()`如果您希望它停止并显示每个选项卡，那么您需要在每次计时器触发时使用类似的东西并推进一个选项卡。

```
 (function() {
     var indexCntr = 0;
     var tabsIndex = $('.ibm-slider-wrapper #ibm-thumb-slider-tabs li a');
     function autoScroll() {
         if (indexCntr < 6) {
             switchTabs(parseInt(tabsIndex[index].getAttribute('rel'), 10), tabsIndex[i].parentNode);
             ++indexCntr;
             setTimeout(autoScroll, 5000);   // set the proper delay time here
         }
      }   

      autoScroll();
 })(); 
```

# c# - 当 HtmlAgilityPack.Document 尝试加载以 exe 结尾的链接时，我该怎么办？

> ID：12505441
> 
> 赞同：0
> 
> 时间：2012-09-20T02:44:03.913
> 
> 标签：c#

这是功能：

```
private static HtmlAgilityPack.HtmlDocument getHtmlDocumentWebClient(string url, bool useProxy, string proxyIp, int proxyPort, string usename, string password)
        {
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            WebClient client = new WebClient();
            //client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
            client.Credentials = CredentialCache.DefaultCredentials;
            client.Proxy = WebRequest.DefaultWebProxy;
            if (useProxy)
            {
                //Proxy                
                if (!string.IsNullOrEmpty(proxyIp))
                {
                    WebProxy p = new WebProxy(proxyIp, proxyPort);
                    if (!string.IsNullOrEmpty(usename))
                    {
                        if (password == null)
                            password = string.Empty;
                        NetworkCredential nc = new NetworkCredential(usename, password);
                        p.Credentials = nc;
                    }
                }
            }
            Stream data = client.OpenRead(url);
            doc.Load(data);
            data.Close();
            return doc;
        } 
```

我在我的程序中获取每个迭代的链接，几次后变量 url 是：

```
http://appldnld.apple.com/iTunes10/041-7196.20120912.Ber43/iTunesSetup.exe 
```

如果我在 InternetExplorer 中尝试此链接，它将尝试下载文件。但是在我的程序中，它试图将其加载到行中：

doc.Load（数据）；

一段时间后，程序会冻结卡住，最后当我强制在任务管理器中结束应用程序时，程序会抛出异常：

```
StackOverFlowException was unhandled 

An unhandled exception of type 'System.StackOverflowException' occurred in HtmlAgilityPack.dll

System.StackOverflowException was unhandled
Message: An unhandled exception of type 'System.StackOverflowException' occurred in HtmlAgilityPack.dll 
```

现在我使用了一个断点，问题发生在一行：

```
doc.Load(data); 
```

问题是我应该如何处理这个链接？我应该通过 try and catch 忽略它们还是应该将其视为链接？如果将来某个时候我想使用此链接下载 exe 文件，那么尝试 ctach 不是一个好主意怎么办？

* * *

编辑：

这就是 getHtmlDocumentWebClient 现在的样子：

```
private  static HtmlAgilityPack.HtmlDocument getHtmlDocumentWebClient(string url, bool useProxy, string proxyIp, int proxyPort, string usename, string password)
        {

            HttpWebRequest myHttpWebRequest = null;     //Declare an HTTP-specific implementation of the WebRequest class.
            HttpWebResponse myHttpWebResponse = null;   //Declare an HTTP-specific implementation of the WebResponse class
            //Create Request
            myHttpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
            myHttpWebRequest.Method = "GET";
            myHttpWebRequest.ContentType = "text/html; encoding='utf-8'";
            //Get Response
            myHttpWebResponse = (HttpWebResponse)myHttpWebRequest.GetResponse();

            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();

            Stream data = myHttpWebResponse.GetResponseStream();//client.OpenRead(url);
            doc.Load(data);
            data.Close();
            return doc;
        } 
```

同样的问题。现在该功能有什么问题，我如何对文本/html内容进行实际检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:47:14.353

`Content-Type`在尝试将响应解析为 HTML 之前，您应该检查一下。
如果它不是`text/html`或其变体之一，请不要解析它。

要获取 Content-Type，您需要使用`HttpWebRequest`而不是`WebClient`.
然后您可以检查`response.Headers`.

# php - 将字符串转换为 MySQL 查询

> ID：12505446
> 
> 赞同：1
> 
> 时间：2012-09-20T02:45:33.740
> 
> 标签：php, mysql, string

我在 PHP 中有这个字符串：

```
$str = 1,3,6,5 
```

这些数字可以更改，并且集合的长度可以更改为多于或少于四个。我想在 PHP 中转换成这样的 MySQL 查询：

```
$qry = mysql_query("SELECT * FROM tbl WHERE id = 1 or id = 3 or id = 6 or id = 5") 
```

这应该很容易，但我不知道该怎么做。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T02:47:13.160

你可以使用`IN`.

```
$query = mysql_query("SELECT * FROM table WHERE id IN ($str)"); 
```

确保`$str`首先验证以防止 sql 注入。

# iphone - 如何从移动网站打开 iOS 6 地图？

> ID：12505451
> 
> 赞同：5
> 
> 时间：2012-09-20T02:46:12.887
> 
> 标签：iphone, html, ios, mobile

我有一个移动网站，我有一个链接可以从我的网站中打开 Google 地图应用程序。然而，现在有了新版本的 ios6，谷歌地图的原生版本不再存在，现在链接打开到基于 safari 的谷歌地图。我宁愿在本地 Apple 地图应用程序中打开它。我怎样才能做到这一点？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T02:56:10.863

`maps.google.com`而不是使用您以前使用的 Google 域`maps.apple.com`。这将与运行 5.x 及更低版本的旧设备保持兼容。

它看起来像这样：

```
http://maps.apple.com/maps?q=cupertino 
```

大多数参数是相同的，但请参阅 Apple 文档了解更多详细信息：

[Apple URL Scheme 参考：地图链接](https://developer.apple.com/library/safari/featuredarticles/iPhoneURLScheme_Reference/MapLinks/MapLinks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:52:48.907

你想要什么 ？

打开地图网络野生动物园或打开地图应用程序？

试试这个

```
CLLocation * currentLocation;
NSURL *requestUrl;
CLLocationCoordinate2D storedLocation;

CLLocationCoordinate2D start = { (storedLocation.latitude), (storedLocation.longitude) };

//Bitiş Yeri
CLLocationCoordinate2D end = { ([koordinatX floatValue]), ([koordinatY floatValue]) };

NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f", start.latitude, start.longitude, end.latitude, end.longitude];

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:googleMapsURLString]]; 
```

# xcode - 如何使用 ACAccountStore 类在 Objective-C 中的 iOS 6 上发布到 Facebook

> ID：12505458
> 
> 赞同：24
> 
> 时间：2012-09-20T02:47:40.633
> 
> 标签：xcode, facebook, ios6, frameworks, posting

我想知道如何使用 Xcode 4.5 上的新框架在 iOS 6 上向 Facebook 发布状态消息。谢谢！:)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-20T09:12:47.977

发布消息相当简单。这几乎就像 Twitter 框架一样。

首先，您必须导入框架：社交和帐户

```
#import <Social/Social.h>
#import <Accounts/Accounts.h> 
```

在您的 .h 文件中：

```
SLComposeViewController *mySLComposerSheet; 
```

此代码必须包含在您的 .m 文件中的操作中：

```
 if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) //check if Facebook Account is linked
    {
      mySLComposerSheet = [[SLComposeViewController alloc] init]; //initiate the Social Controller
        mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook]; //Tell him with what social platform to use it, e.g. facebook or twitter
                [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"Test",mySLComposerSheet.serviceType]]; //the message you want to post
       [mySLComposerSheet addImage:yourimage]; //an image you could post
        //for more instance methods, go here: https://developer.apple.com/documentation/social/slcomposeviewcontroller#//apple_ref/doc/uid/TP40012205
        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }
    [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                output = @"Action Cancelled";
                break;
            case SLComposeViewControllerResultDone:
                output = @"Post Successful";
                break;
            default:
                break;
        } //check if everything worked properly. Give out a message on the state.
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T18:46:29.217

当我只想在帖子成功的情况下收到警报，而当用户取消帖子时什么都没有，我该怎么办？

不幸的是，这不适用于 Twitter ......它不再关闭 TweetSheet。这是我的代码：

```
 if(NSClassFromString(@"SLComposeViewController") != nil)
 {

        mySLComposerSheet = [[SLComposeViewController alloc] init]; //initiate the Social Controller
        mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter]; //Tell him with what social plattform to use it, e.g. facebook or twitter
        [mySLComposerSheet setInitialText:[NSString stringWithFormat:story.title,mySLComposerSheet.serviceType]]; //the message you want to post
        [mySLComposerSheet addURL:[NSURL URLWithString:story.link]];
        //for more instance methodes, go here:https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012205
        [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
            NSString *output;
            switch (result) {
                case SLComposeViewControllerResultCancelled:
                    output = NSLocalizedStringFromTable(@"As it seems you didn't want to post to Twitter", @"ATLocalizable", @"");
                    break;
                case SLComposeViewControllerResultDone:
                    output = NSLocalizedStringFromTable(@"You successfully posted to Twitter", @"ATLocalizable", @"");
                    break;
                default:
                    break;
            } //check if everything worked properly. Give out a message on the state.
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Twitter" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alert show];
        }];
        [self presentViewController:mySLComposerSheet animated:YES completion:nil]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-10T04:28:50.580

```
- (IBAction)btn_facebook:(id)sender {

    SLComposeViewController *facebookcomposer =
        [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [facebookcomposer setInitialText:@"This is just a test"];
    [facebookcomposer addURL:[NSURL URLWithString:@"http://www.google.com"]];
    [facebookcomposer addImage:[UIImage imageNamed:@"images.jpg"]];

    [self presentViewController:facebookcomposer animated:YES completion:nil];

    [facebookcomposer setCompletionHandler:^(SLComposeViewControllerResult result)
    {
        switch (result)
        {
            case SLComposeViewControllerResultDone:
                NSLog(@"done");
                break;
            case SLComposeViewControllerResultCancelled:
                NSLog(@"cancelled");
                break;

            default:
            break;
        }

    }];

}

- (IBAction)btn_twitter:(id)sender {

    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
        SLComposeViewController *twitter =
            [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

        [twitter setInitialText:@"this is just a test"];
        [twitter addURL:[NSURL URLWithString:@"http://www.google.com"]];
        [twitter addImage:[UIImage imageNamed:@"images.jpg"]];
        [self presentViewController:twitter animated:YES completion:nil];
    } else {
        NSLog(@"it is not configured");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-21T06:17:20.427

好的，所以我调整了原始帖子，适用于 iOS 6/7。更改 Facebook 的 ServiceType、警报标题和消息。享受！

```
- (IBAction)tweetMessage:(id)sender {

  if(![SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) //check if Facebook Account is linked
  {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Unable to Tweet!" message:@"Please login to Twitter in your device settings." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
        return;
  }
  //self.mySLComposerSheet = [[SLComposeViewController alloc] init]; //initiate the Social Controller
  self.mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
  [self.mySLComposerSheet setInitialText:[NSString stringWithFormat:@"I found this Thing, check it out at this Place:\n %@ \n", [self someplace]]];
  [self.mySLComposerSheet addImage:self.photos.firstObject];

  [self presentViewController:self.mySLComposerSheet animated:YES completion:nil];
  //}

  [self.mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
              case SLComposeViewControllerResultCancelled:
                    output = @"Action Cancelled";
                    break;
              case SLComposeViewControllerResultDone:
                    output = @"Post Successfull";
                    break;
              default:
                    break;
        } //check if everything worked properly. Give out a message on the state.
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Twitter" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
  }];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-21T06:45:43.900

这就是我在我的应用程序中实际使用它的方式。更流畅，让控制器完成艰苦的工作。

```
- (IBAction)postToFacebook:(id)sender {
  if(![SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])  {
        NSLog(@"log output of your choice here");
  }
  // Facebook may not be available but the SLComposeViewController will handle the error for us.
  self.mySLComposerSheet = [[SLComposeViewController alloc] init];
  self.mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
  [self.mySLComposerSheet setInitialText:[NSString stringWithFormat:@"I found this Thing, check it out at SomeWhere:\n %@ \n", [self someURLString]]];
  [self.mySLComposerSheet addImage:self.photos.firstObject]; //an image you could post

  [self presentViewController:self.mySLComposerSheet animated:YES completion:nil];

  [self.mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
              case SLComposeViewControllerResultCancelled:
                    output = @"Action Cancelled";
                    break;
              case SLComposeViewControllerResultDone:
                    output = @"Post Successfull";
                    break;
              default:
                    break;
        }
        if (![output isEqualToString:@"Action Cancelled"]) {
              // Only alert if the post was a success. Or not! Up to you. 
              UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
              [alert show];
        }
  }];
} 
```

# c# - 保存对话框消息和空路径名

> ID：12505460
> 
> 赞同：3
> 
> 时间：2012-09-20T02:47:52.740
> 
> 标签：c#

我目前在 C# 中工作`Open file`和工作。`write file`我遇到了两个问题：当用户正在保存文件时，如果他/她退出保存对话框并且没有保存任何内容，我会收到错误消息（请看下图的描述）。我的程序如何避免这种情况而不崩溃？文件保存后是否显示消息？

![在此处输入图像描述](../Images/daf4f5424069adac8985c08ec5914b18.png)

```
 private void button2_Click(object sender, EventArgs e)
            {
                SaveFileDialog saveReport = new SaveFileDialog();
                saveReport.Filter = "Text Files | *.txt";
                saveReport.ShowDialog();

                StreamWriter writeFile = new StreamWriter(saveReport.FileName);
                writeFile.Write(textBox1.Text);
                writeFile.Close();

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:49:34.930

如果用户点击取消，`ShowDialog()`将返回`DialogResult.Cancel`.

`if`您可以在声明中检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:51:53.153

使用[`ShowDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog.aspx)调用的返回值来确定用户选择了什么。

只有当用户在对话框中选择了 OK 时，下面的代码才会保存：

```
SaveFileDialog saveReport = new SaveFileDialog();
saveReport.Filter = "Text Files | *.txt";
if (saveReport.ShowDialog() == DialogResult.OK) {
    StreamWriter writeFile = new StreamWriter(saveReport.FileName);
    writeFile.Write(textBox1.Text);
    writeFile.Close();
} 
```

原始代码的问题在于，即使用户没有通过对话框指定文件名，您也试图保存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T02:55:05.283

你可以这样做：

```
var saveReport = new SaveFileDialog();
saveReport.Filter = "Text Files | *.txt";
var result = saveReport.ShowDialog();

if(result == DialogResult.Cancel || string.IsNullOrWhiteSpace(saveReport.FileName))
    return;

using(var writer = new StreamWriter(saveReport.FileName))
{
    writer.Write(textBox1.Text);
    writer.Close();
}

MessageBox.ShowDialog("File Saved!"); 
```

原则上 FileName 永远不会是`null`或空格——除非您取消，否则对话框会阻止它，但为了清楚起见，我将其包括在内。

# jquery - .on('click' ... vs. jQuery 中的 .click

> ID：12505464
> 
> 赞同：2
> 
> 时间：2012-09-20T02:48:24.570
> 
> 标签：jquery, click, handler

> **可能重复：**
> [jquery on vs click 方法](https://stackoverflow.com/questions/8601482/jquery-on-vs-click-methods)

我知道这`$(parent).on('click', 'element', function(){ ...`用于将点击处理程序附加到动态创建的元素 - 而`$('element').click(...`仅当元素在初始页面加载时存在时才有效。最近我总是使用`.on()`所有东西，因为它涵盖了两者 - 我的问题是 - 是否有任何时候首选 .click，或者我可能不知道不使用的任何其他优势`.on()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T02:57:12.113

实际上`.click()`是由 处理的`.on()`，见：[https ://github.com/jquery/jquery/blob/master/src/event.js#L1014](https://github.com/jquery/jquery/blob/master/src/event.js#L1014)

所以喜欢的唯一原因是`.click()`- 有更短的代码

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T06:06:43.407

根据[http://api.jquery.com/click/](http://api.jquery.com/click/)，.Click 是 .bind()、.on() 和 .trigger() 在各种**场景**中的快捷方式。

对于动态创建的元素，.live() 是将处理程序附加到它们的确切方法。

为了回答您的问题，.Click() 因其简短的使用形式而被广泛使用，因为我们使用 $(function(){}) 而不是 $(document).ready()。

# objective-c - _OBJC_IVAR__$_Answer.answer"

> ID：12505465
> 
> 赞同：0
> 
> 时间：2012-09-20T02:48:25.580
> 
> 标签：objective-c, linker-errors

我有一个包含数字 ivars 的类：

```
//  Answer.h

#import <Foundation/Foundation.h>

@interface Answer : NSObject{
    @public
    int firstNumber;
    int secondNumber;
    char myOperator;
}

@end 
```

我尝试在此处访问代码

```
 numberGroup->firstNumber = arc4random() % 1;
    numberGroup->secondNumber = arc4random() % 10;
    numberGroup->myOperator = arc4random() % 4; 
```

我得到这个错误：

> ld /Users/jack/Library/Developer/Xcode/DerivedData/PowerBuilders-emehzkfcgntrhofxhvurovjmnugn/Build/Products/Debug-iphonesimulator/PowerBuilders.app/PowerBuilders normal i386 cd "/Users/jack/Desktop/Xcode/Assorted Apps/PowerBuilders" setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin :/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator .platform/Developer/SDKs/iPhoneSimulator5.1。sdk -L/Users/jack/Library/Developer/Xcode/DerivedData/PowerBuilders-emehzkfcgntrhofxhvurovjmnugn/Build/Products/Debug-iphonesimulator -F/Users/jack/Library/Developer/Xcode/DerivedData/PowerBuilders-emehzkfcgntrhofxhvurovjmnugn/Build/Products/ Debug-iphonesimulator -filelist /Users/jack/Library/Developer/Xcode/DerivedData/PowerBuilders-emehzkfcgntrhofxhvurovjmnugn/Build/Intermediates/PowerBuilders.build/Debug-iphonesimulator/PowerBuilders.build/Objects-normal/i386/PowerBuilders.LinkFileList -mmacosx- version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/jack/Library/Developer/Xcode/DerivedData/PowerBuilders- emehzkfcgntrhofxhvurovjmnugn/Build/Products/Debug-iphonesimulator/PowerBuilders。应用程序/PowerBuilders
> 
> 体系结构 i386 的未定义符号：
> “_OBJC_IVAR_$_Answer.firstNumber”，引用自：ViewController.o 中的-[ViewController 第 1 课]“_OBJC_IVAR_$_Answer.myOperator”，引用自：ViewController.o 中的-[ViewController 第 1 课]“_OBJC_IVAR_$_Answer .secondNumber”，引用自：ViewController.old 中的 -[ViewController 课程 1]：未找到架构 i386 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:32:30.000

编译器在处理类的部分时，会`_OBJC_IVAR_$_Answer.firstNumber`在数据段中生成符号作为`Answer`类元数据的一部分。该符号处的数据是对象内实例变量的偏移量。`@implementation``Answer``firstNumber``Answer`

要么您没有将应用程序与包含`@implementation Answer`节的文件链接，要么编译器`firstNumber`在看到节之前没有看到实例变量的声明`@implementation Answer`。检查这些是否都是真的：

*   `Answer.m`包含在目标的编译源阶段。
*   `Answer.m`包含一个`@implementation Answer`部分。
*   `Answer.m``Answer.h`顶部的导入`Answer.m`。

# android - 如何从动态创建的 EditText 视图中获取数据并将其插入到数组中？

> ID：12505466
> 
> 赞同：0
> 
> 时间：2012-09-20T02:48:29.843
> 
> 标签：android, loops, android-widget, android-arrayadapter

所以基本上我现在需要我的程序做的是，当我单击提交按钮时，我需要循环遍历 ListView 的每个动态行并获取 EditText 视图中的值，然后将其插入到我将之后做进一步的计算。这是我现在的代码。

```
package com.hello_world;

import java.util.ArrayList;

import com.hello_world.ByteInputActivity.MyAdapter.ViewHolder;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.view.View.OnKeyListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;

public class ByteInputActivity extends Activity {

private ListView myList;
private MyAdapter myAdapter;
private Integer resQuestions;
private Integer indexVal = 0;
private View caption;
ViewHolder holder;
ArrayList<Integer> intArrayList = new ArrayList<Integer>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.fieldlist);

    //Gets number of questions from MainActivity
    Bundle extras = getIntent().getExtras();
    if(extras !=null) {
        resQuestions = extras.getInt("index");
    }

    myList = (ListView) findViewById(R.id.FieldList);
    myList.setItemsCanFocus(true);
    myAdapter = new MyAdapter();
    myList.setAdapter(myAdapter);

    Button submit = (Button) findViewById(R.id.btn_New);
    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            for (int i = 0; i < myList.getCount() ; i++) {
                View vListSortOrder;
                vListSortOrder = myList.getChildAt(i);     
                String temp = holder.caption.getText().toString();
                    Log.e("VALUES", "" +temp);
            }
        }
    });
}

public class MyAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    public ArrayList myItems = new ArrayList();

    public MyAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        for (int i = 0; i < resQuestions; i++) {
            ListItem listItem = new ListItem();
            listItem.caption = "Index " + i;
            listItem.indexText = "Index " + i;
            myItems.add(listItem);
            indexVal += 1;
        }       
        notifyDataSetChanged();
    }

    public int getCount() {
        return myItems.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.item, null);
            holder.indexText = (TextView) convertView .findViewById(R.id.textView1);
            holder.caption = (EditText) convertView .findViewById(R.id.ItemCaption);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        //Fill EditText with the value you have in data source
        holder.caption.setText("");
        holder.caption.setId(position);

        holder.indexText.setText("Index " + position);
        holder.indexText.setId(position);

        //we need to update adapter once we finish with editing
        holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
            public void onFocusChange(View v, boolean hasFocus) {
                if (!hasFocus){
                    final int position = v.getId();
                    final EditText Caption = (EditText) v;
                    myItems.set(position, Caption.getText().toString());                    
                }
            }
        });

        return convertView;
    }

class ViewHolder {
    EditText caption;
    TextView indexText;
}

class ListItem {
    String caption;
    String indexText;
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:55:49.493

首先，我不确定这是如何工作的：

```
//we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus){
                final int position = v.getId();
                final EditText Caption = (EditText) v;
                myItems.set(position, Caption.getText().toString());                    
            }
        }
    }); 
```

如果您尝试创建 ListItem 对象的 ArrayList，那么您应该这样做：

```
//we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus){

                //final int position = v.getId();
                //final EditText Caption = (EditText) v;

                ListItem litem = new ListItem();
                litem.caption = holder.caption.getText().toString();
                myItems.set(position, litem);                    
            }
        }
    }); 
```

然后从提交按钮的 OnClickListener 中，您可以执行以下操作：

```
 submit.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            ViewHolder holder;

            for(int i = 0; i < myList.getAdapter().getCount(); i++)
            {
                holder = (ViewHolder) myList.getAdapter().getItem(i);

                String temp = holder.caption.getText().toString();

                Log.e("VALUES", "" + temp);
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:35:40.273

这就是我要做的：

从改变这个开始：

```
public ArrayList myItems = new ArrayList(); 
```

进入这个：

```
public HashMap<Integer, String> myItems = new HashMap<Integer, String>(); 
```

然后修改getView()：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        holder = new ViewHolder();
        convertView = mInflater.inflate(R.layout.item, null);
        holder.indexText = (TextView) convertView .findViewById(R.id.textView1);
        holder.caption = (EditText) convertView .findViewById(R.id.ItemCaption);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    //Fill EditText with the value you have in data source
    holder.caption.setText(myItems.get(postition));

    holder.indexText.setText("Index " + position);

    //we need to update adapter once we finish with editing
    holder.caption.setOnFocusChangeListener(new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (!hasFocus){
                final EditText Caption = (EditText) v;
                myItems.put(position, Caption.getText().toString());                    
            }
        }
    });

    return convertView;
} 
```

并修改 getItem(int position)：

```
public Object getItem(int position) {
    return myItems.get(position);
} 
```

对于测试解析，您可以使用以下内容：

```
 @Override
    public void onClick(View v) {
        for (int i = 0; i < myList.getCount() ; i++) {
            String item = (Strng) myAdapter.getItem(position); 
                Log.e("VALUES", "" +item);
        }
    } 
```

还没有测试代码，所以让我知道它是如何工作的，所以如果需要我可以更正它。

# php - 内连接选择语句

> ID：12505467
> 
> 赞同：4
> 
> 时间：2012-09-20T02:48:48.280
> 
> 标签：php, mysql, select

SQL 语句

```
$CustInfo = Select * from wp_wpsc_submited_form_data where log_id = '6'; 
```

结果如下：

```
ID    CUST_ID    FORM_ID    VALUE

81       6          2       John
82       6          3       Smith
83       6          4       123 Main Street
84       6          5       Houston
96       6          6       NULL
85       6          7       US
86       6          8       77459 
```

几个小时以来，我一直在为 Stack Overflow 上的所有示例挠头，但看不到任何足够接近的可以理解的东西。我希望有人可以简单明了地解释，并可能提供一个示例，说明如何使用这些值生成 HTML 表格。

例子：

```
Firstname :   <%php echo $CustInfo[2]; ?>
Lastname :    <%php echo $CustInfo[3]; ?>
Address :    <%php echo $CustInfo[4]; ?> 
```

ETC...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:07:43.953

像这样的东西怎么样：（未经测试）

```
if(is_array($CustInfo) && count($CustInfo) > 0)
{
  echo "<table>";
  for($i=0;$i<count($CustInfo);$i++)
  {
     echo "<tr>";
     switch($i)
     {
       case 1: echo "<td>FirstName:</td><td>".$CustInfo[i]."</td>";
       ...
     }
     echo "</tr>";
  }
  echo "</table>";
} 
```

我检查查询是否返回了 is_array 和 count() 的结果，然后使用 switch/case 遍历数组以确定要使用的标签。只需将案例 2 添加到 8，这应该可以解决问题。

编辑：另一种方法是使用变量来存储 HTML 并在过程完成后回显它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:33:07.370

问题是数据库设计，而不是 PHP 或 SQL。

您的表格应如下所示：

```
| CUST_ID (PK) |  FIRSTNAME | LASTNAME | STREETADDRESS   | CITY    | STATE | ZIPCODE |
 ------------------------------------------------------------------------------------
| 6            | John       | Smith    | 123 Main Street | Houston | NULL  | 77459   |
| 7            | Jane       | Doe      | 456 Fake St.    | Richmond| VA    | 23860   | 
```

从这里，您可以通过简单地使用 SQL 语句来调用它们：

```
SELECT *
FROM UserTable
WHERE CUST_ID = 6 
```

这将为您返回一个简单的答案，您可以像这样使用它：

```
FirstName: <%php echo $CustInfo['FIRSTNAME']; ?> 
```

（免责声明：我的 PHP 知识有限，但我认为这会奏效。如果没有，我知道它并不复杂）

简单得多，代码少得多......最重要的是恕我直言，效率更高。

我确实建议您阅读[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)，以便更好地了解应该如何设计数据库。但这不是必需的，只是一些很好的了解和理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:17:54.997

这个讨厌的代码应该可以解决问题，它使用 group_concat 将非空行分组到单个字段中，因为联合意味着每行只有一列为空，它应该可以工作：

```
select 
    group_concat(Firstname) as FirstName,
    group_concat(Surname) as Surname,
    group_concat(Add1) as Add1,
    group_concat(Add2) as Add2,
    group_concat(Add3) as Add3,
    group_concat(Country) as Country,
    group_concat(ZipCode) as ZipCode
from
(
    select
        value as FirstName,
        null as Surname,
        null as Add1,
        null as Add2,
        null as Add3,
        null as Country,
        null as ZipCode
    from 
        wp_wpsc_submited_form_data 
    where 
        log_id = '6' // I can't actually see this field in your columns??
        and form_id=2
    union
    select
        null as FirstName,
        Value as Surname,
        null as Add1,
        null as Add2,
        null as Add3,
        null as Country,
        null as ZipCode
    from 
        wp_wpsc_submited_form_data 
    where 
        log_id = '6'
        and form_id=3
    union
    ...
    ...
    ...
    union
    select
        null as FirstName,
        null as Surname,
        null as Add1,
        null as Add2,
        null as Add3,
        null as Country,
        Value as ZipCode
    from 
        wp_wpsc_submited_form_data 
    where 
        log_id = '6'
        and form_id=8
) 
```

然后您应该能够很好地遍历行并执行以下操作：

```
Firstname :   <%php echo $CustInfo['FirstName']; ?> 
```

等等。

我还在这里写了一篇您可能感兴趣的长度问答：[SQL 查询如何从多个表中返回数据](https://stackoverflow.com/questions/12475850/how-can-an-sql-query-return-data-from-multiple-tables)

编辑：我看到另外两个回答的人告诉你重新设计你的桌子——我有点这样做，但有点不同意。

**该表格经过严格规范化**，这意味着您可以添加一百个额外的表单字段而不必触摸表格本身 - 这是一件（令人惊讶的）好事。我会说这种设计让您更难获取这些特定数据，但它非常强大 - 如果不是非常快速或易于访问的话。

# javascript - 将字符串与 javascript 数组属性中的变量连接起来

> ID：12505468
> 
> 赞同：0
> 
> 时间：2012-09-20T02:48:55.070
> 
> 标签：javascript, arrays, multidimensional-array

我知道这可能不是我应该养成的习惯。但我试图将一个变量连接到一个作为 Javascript 数组属性存储的字符串。

例如我有：

```
var form = {
    'var1' : 'has a value here',
    'array' : [
        [ 'some text', 'some more text' ],
        [ 'second line of text', 'second entry ' + form.var1]
    ]
};
alert( form.array[1][1] ); 
```

这会导致显示“未定义”的警报。

如果我改为这样做：

```
var var1 = 'has a value here';
var form = {
    'array' : [
        [ 'some text', 'some more text' ],
        [ 'second line of text', 'second entry ' + var1 ]
    ]
};
alert( form.array[1][1] ); 
```

字符串已定义并正确显示。

有没有办法可以将该值存储在“表单”对象下并仍然获得我想要的结果？我假设“不”。但我想我会问。（这对谷歌来说是一个难题。：P）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:56:40.597

您可以分两部分声明它：

```
var form = {
    'var1' : 'has a value here'
};

form['array'] = [
    [ 'some text', 'some more text' ],
    [ 'second line of text', 'second entry ' + form.var1]
];

alert( form.array[1][1] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T02:56:00.193

您不能在对象文字内部执行此操作（在完成对象表达式之前，`form`未定义。），但您可以在外部执行此操作。

```
var form = {
    'var1' : 'has a value here',
    'array' : [
        [ 'some text', 'some more text' ],
        [ 'second line of text', 'second entry ']
    ]
};

form.array[1][1] += form.var1;
alert( form.array[1][1] );​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:03:15.010

我很惊讶你甚至达到了警报声明。`form.var1`由于未定义表单，您的代码一旦命中就会失败。实现这一目标的一种方法是分别定义它们。像这样

```
var form = {};
   form.var1 = 'has a value here';
   form.array =   [
      [ 'some text', 'some more text' ],
      [ 'second line of text', 'second entry ' + form.var1]
   ]; 
```

# mysql - 如何设计我的数据库？关于编辑历史

> ID：12505470
> 
> 赞同：0
> 
> 时间：2012-09-20T02:49:20.903
> 
> 标签：mysql, ruby-on-rails, database-design

我想创建一个非常简单的数据库。但我想知道编辑历史！

显然，我们有：

```
Product

title | price | created_at | updated_at 
```

在我看来，我将“版本”列添加到表中。版本的默认值为 1。

当我使用 Rails 并编辑该`price`列时，它将创建一个新记录并且“版本”会增加。

例子：

```
Product

TITLE | PRICE | CREATED_AT | UPDATED_AT | EDITION
Plane | 12    | 9-19       | NULL       | 1 
```

当我编辑时，应该像这样创建一条记录：

```
Product

TITLE | PRICE | CREATED_AT | UPDATED_AT | EDITION
Plane | 8     | 9-20       | NULL       | 2 
```

但是想了解新版“飞机”产品时，不知道如何选择数据。当我搜索编辑历史时可以使用代码，比如

```
scope :history, lambda { |tit| where(:title => tit) } //same title 
```

我不认为这是最好的设计。

你有什么其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T11:39:41.443

你已经得到了关于数据库设计的好答案，我只想加我的 5 美分，并建议你不要重新发明轮子并自己实现常见要求，看看可以为你做这件事的宝石之一，我个人推荐PaperTrail： [https ://github.com/airblade/paper_trail](https://github.com/airblade/paper_trail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T02:59:21.173

最简单的编辑图实际上只是将旧数据存储在另一个表中：

```
Product_History
-- Note: We have added a surrogate primary key
-- This makes it possible to have duplicate product titles
-- which we may wish to support later.
-- It's just an auto-incrementing integer column. 
Product_ID | Title | Price | Created_At | Updated_At | Updated_By 
```

然后，您只需在每次对 Product 表进行更新时转储 Product_History 表中的旧值。

稍微灵活一点的方法是将数据存储在更加非规范化的状态：

```
Edit_History

Table_Name | Entity_ID | Previous_Value | Current_Value | Edit_Date | Edited_By 
```

第二个变体可用于记录对多个表的更改。（请注意，这假设您没有复合主键）。

在这两种情况下，只要您想知道最新值，您只需查询 Product 表，并在需要时使用 Product 表的主键（与`Edit_History`变体中的“Product”表名称相结合）查询 History 表知道这个实体所经历的变化的历史。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:06:48.267

我个人的意见是，我会用列创建另一个表（我会调用`changes`）

**id (PK)、prod_id (FK)、标题、价格、updated_at**

每次更新主表时，我都会将主表中的当前值复制到`changes`表中。您不需要`created_at`and`edition`列，因为前者不会更改，并且通过在此更改表中的简单查询很容易找到后者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T02:58:40.397

一个简单的修改：

您可以维护一个名为 ProductChanges 的表，其中包含“field”、“from”、“to”列，而不是在 product 表中创建新记录。当价格从 12 更新到 8 时，您可以使用值 (product_id="" field="price", from=12, to=8) 创建一条记录。

# c# - 如何将变量传递给重写的 toString() 方法？

> ID：12505472
> 
> 赞同：3
> 
> 时间：2012-09-20T02:49:43.550
> 
> 标签：c#, overriding, tostring

是否可以将`bool`变量传递给重写的`toString()`方法，以便它可以有条件地以不同格式打印对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T02:51:58.890

您可以定义的*重载*方法`ToString()`。

```
public string ToString(bool status){
  //
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:55:34.407

参数化 ToString() 的典型模式是使用字符串参数声明重载。

例子：

```
class Foo
{
    public string ToString(string format)
    {
        //change behavior based on format
    }
} 
```

有关框架示例，请参见 Guid.ToString

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T03:13:30.333

如果您正在谈论自己的课程，则可以执行以下操作：

```
public class MyClass
{
    public bool Flag { get; set; }

    public MyClass()
    {
        Flag = false;
    }

    public override string ToString()
    {
        if (Flag)
        {
            return "Ok";
        }
        else
        {
            return "Bad";
        }
    }
} 
```

并使用它

```
MyClass c = new MyClass();
Console.WriteLine(c); //Bad
c.Flag = true;
Console.WriteLine(c); //Ok
Console.ReadLine(); 
```

您`Flag`可能是一些私有字段并根据某些内部条件更改其值。全取决于你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T02:52:10.503

否。覆盖方法必须具有与其覆盖的方法相同的签名。这意味着它不能有更多的参数，因为这会改变签名。我只想为您想要的其他格式制作一种新方法。

# android - 静默卸载apk异常---（java.lang.AbstractMethodError：未实现抽象方法）

> ID：12505475
> 
> 赞同：2
> 
> 时间：2012-09-20T02:50:14.993
> 
> 标签：android, packages, uninstallation

我正在开发一个支持静默卸载其他 apk 的应用程序。我的设备已植根，应用程序位于 /system/app 下，通过反射我可以使用 deletePackage 方法来实现这一点。但是在deletePackage方法的实现中，出现了异常。异常信息如下：

```
09-20 10:16:02.242: E/JavaBinder(1943): *** Uncaught remote exception!  (Exceptions are not yet supported across processes.)
09-20 10:16:02.242: E/JavaBinder(1943): java.lang.AbstractMethodError: abstract method not implemented
09-20 10:16:02.242: E/JavaBinder(1943):     at android.content.pm.IPackageDeleteObserver$Stub.packageDeleted(IPackageDeleteObserver.java)
09-20 10:16:02.242: E/JavaBinder(1943):     at android.content.pm.IPackageDeleteObserver$Stub.onTransact(IPackageDeleteObserver.java:57)
09-20 10:16:02.242: E/JavaBinder(1943):     at android.os.Binder.execTransact(Binder.java:338)
09-20 10:16:02.242: E/JavaBinder(1943):     at dalvik.system.NativeStart.run(Native Method)
09-20 10:16:02.242: W/dalvikvm(1943): threadid=9: thread exiting with uncaught exception (group=0x40a461f8)
09-20 10:16:02.242: E/AndroidRuntime(1943): FATAL EXCEPTION: Binder Thread #1
09-20 10:16:02.242: E/AndroidRuntime(1943): java.lang.AbstractMethodError: abstract method not implemented
09-20 10:16:02.242: E/AndroidRuntime(1943):     at android.content.pm.IPackageDeleteObserver$Stub.packageDeleted(IPackageDeleteObserver.java)
09-20 10:16:02.242: E/AndroidRuntime(1943):     at android.content.pm.IPackageDeleteObserver$Stub.onTransact(IPackageDeleteObserver.java:57)
09-20 10:16:02.242: E/AndroidRuntime(1943):     at android.os.Binder.execTransact(Binder.java:338)
09-20 10:16:02.242: E/AndroidRuntime(1943):     at dalvik.system.NativeStart.run(Native Method) 
```

相关代码：

```
public void onBackgroundUninstallClick(View v) {
    PackageDeleteObserver observer = new PackageDeleteObserver();
    if (mPackageManager != null/* && mUninstallPackage != null*/) {
        try {
            mPackageManager.deletePackage("com.example.android.imagedownloader", observer, 0);
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    } 
}

class PackageDeleteObserver extends IPackageDeleteObserver.Stub {
    public void packageDeleted(boolean succeeded) throws RemoteException {
        Log.i(TAG, "packageDeleted");
        Message msg = mHandler.obtainMessage(UNINSTALL_COMPLETE);
        msg.arg1 = succeeded ? SUCCEEDED : FAILED;
        mHandler.sendMessage(msg);
    }
}

IPackageDeleteObserver.aidl code : 

package android.content.pm;

interface IPackageDeleteObserver {
    void packageDeleted(boolean flag);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:16:56.157

我发现该应用程序在 sdk 2.3.5 但 4.0 上运行良好。也许在 sdk 4.0 之后方法 packageDeleted 发生了变化。任何人都可以在 sdk 4.0 中提供 IPackageDeleteObserver.aidl 的源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T02:54:23.950

```
java.lang.AbstractMethodError: abstract method not implemented 
```

某处缺少方法实现。

```
void packageDeleted(boolean flag); 
```

与签名不符

```
public void packageDeleted(boolean succeeded) throws RemoteException 
```

因为`throws RemoteException`

改成

```
interface IPackageDeleteObserver {
    void packageDeleted(boolean flag) throws RemoteException;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T19:57:14.460

我在 android 2.3.3 和 android 4.0.3 模拟器上都试过了，而且效果很好。请注意，我已经删除了 @Override 注释。

我看到一些答案指示接口或抽象类来决定使用哪一个，具体取决于 SDK 版本，但这似乎也有效。

```
class PackageDeleteObserver extends IPackageDeleteObserver.Stub {

    PackageDeleteObserver( ) {
        // nothing to do here
    }

    // android > 4
    public void packageDeleted( String name, int status ) throws RemoteException {
        synchronized (this) {
            this.notifyAll();
            // do your thing
        }
    }

    // android < 4
    public void packageDeleted( boolean status ) throws RemoteException {
        synchronized (this) {
            this.notifyAll();
            // do your thing
        }
    }

} 
```

# ubuntu-12.04 - 在 Ubuntu 上使用 MPICH 和 Boost.MPI

> ID：12505476
> 
> 赞同：2
> 
> 时间：2012-09-20T02:50:51.433
> 
> 标签：ubuntu-12.04, boost-mpi, mpich

我试图在 Ubuntu 12.04 下使用 boost.mpi。apt-get 将安装 openmpi，但我运行的其他一些软件（涉及扭矩）期望 mpich2/mpich，并抱怨

“mpdstartup：找不到命令”

我当然不想把软件改成使用 openmpi 并且担心软件升级时的迁移问题。

我的问题是，是否有一种用户友好的方式可以在 Ubuntu（12.04 LTS）中安装 boost.mpi + mpich2？（例如一个非官方的存储库）。在最坏的情况下，如果我必须从源代码构建 boost，当我升级到新的 boost 版本时，是否有一种用户友好的方式来卸载 boost 安装？我喜欢 apt-get 将安装文件和链接到知名位置并在被要求时进行干净删除的事实。

顺便说一句，我尝试过 apt-get 先安装 mpich2，然后再安装 libboost-mpi-dev，但是即使有一个有效的 mpi 实现，apt-get 仍然安装 openmpi。这似乎有些约束。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T21:22:33.453

由于软件包的依赖关系，无法避免安装 openmpi。但是，如果您同时安装了 openmpi 和 mpich2，则可以使用 Debian 替代系统使 mpich2 成为您系统上的首选 mpi。为此，请运行：

```
 sudo update-alternatives --set mpi /usr/include/mpich2 
```

# ruby-on-rails - Rails 反馈表：如何获取当前页面的 url？

> ID：12505479
> 
> 赞同：5
> 
> 时间：2012-09-20T02:51:08.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, feedback, user-feedback

我正在使用 David Francisco 的[rails 反馈插件](https://github.com/dmfrancisco/feedback/tree/master/lib/generators/feedback_form)。该插件工作正常，除了一件事 - 我需要反馈表向数据库提交使用反馈表的页面的 url。有谁知道如何做到这一点？

除了当前发送的信息之外，还需要发送当前 url 的视图：

```
<h4>Feedback</h4>
<p>Please leave us feedback, it's really appreciated.</p>

<%= form_for @feedback, :as => :feedback, :url => feedback_index_path, :html => { :id => "feedback_form" } do |f| -%>
  <%= f.hidden_field 'user_id', :value => current_user.id %>
  <% unless @error_message.blank? %>
  <p class="error">
    <%=h @error_message %>
  </p>
  <% end %>
  <p>
    <%= f.label 'subject' %>
    <%= f.select 'subject', ['Problem', 'Suggestion', 'Question', 'Other'] %>
  </p>
  <p>
    <%= f.label 'comment' %><br />
    <%= f.text_area 'comment', :rows => 10, :cols => 30 %>
  </p>
  <p><%= f.submit 'Send' %></p>
<% end -%> 
```

目前，feedback_index_path 始终是“/feedback”，即表单的 url。

谢谢你，亚历山德拉

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T19:04:38.953

您可以`request.referer`在控制器中使用来获取调用您的操作的页面的路径。request.referer 返回一个完整的 url，但您可以使用模块解析它`URI`：

```
URI(request.referer).path 
```

我看到有人建议`request.fullpath`，但这实际上是处理请求的操作路径（在您的情况下`/feedbacks/new`），而不是提交表单的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:03:07.243

`feedback_index_path`是一个总是返回相同内容的路由辅助方法。在你的情况下`/feedback`。

[在此处查看有关在 Rails 2 和 3 中访问当前 URL 的信息。](https://stackoverflow.com/questions/2165665/how-do-i-get-the-current-url-in-ruby-on-rails)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T18:58:25.893

如果 request.fullpath 没有正常工作，您可以快速破解，将页面 url 存储在页面的数据属性中，并在提交时通过 jQuery 从该属性中获取当前 url。但这是一个 hack，只是为了让它工作。

顺便说一句，您如何呈现反馈表？

# php - 除非在 HTML 标记中找到，否则如何使用 PHP 搜索和替换匹配的文本？

> ID：12505481
> 
> 赞同：2
> 
> 时间：2012-09-20T02:51:13.923
> 
> 标签：php, html, wordpress, replace, str-replace

如何搜索和替换字符串中所有出现的单词或短语，除非它位于 HTML 标记中？

目前有这个：

```
<?php
        public function add_acronyms($content){
            if(strpos($content, get_bloginfo('description')) !== false){
                $content = str_replace(get_bloginfo('description'), '<acronym title="'.get_bloginfo('name').'">'.get_bloginfo('description').'</acronym>', $content);
                if(strpos($content, '="<acronym title="'.get_bloginfo('name').'">'.get_bloginfo('description').'</acronym>') !== false){
                    $content = str_replace('="<acronym title="'.get_bloginfo('name').'">'.get_bloginfo('description').'</acronym>', get_bloginfo('description'), $content);
                }
            }
            return $content;
        }
?> 
```

但这只有在 HTML 属性的开头找到单词或短语时才有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-07T11:22:45.153

在寻找类似的东西时发现了这个。我的回答不是完成它的最优雅的方式，但它可能会帮助你 - 我的问题和答案在这里 - 但是如上所述，**几乎可以肯定有更好的方法来实现这一点** 在我的例子中，尝试替换一个单词会破坏一些href 标签，所以我使用了以下代码（顺便说一下，这是在 Wordpress 中）

```
function replace_text_wps($text){
    $replace = array(
        // used mid-line
        ' YOUR_TEXT ' => ' <span class="YOUR_CLASS">YOUR_TEXT</span> ',
        ' YOUR_TEXT ' => ' <span class="YOUR_CLASS">YOUR_TEXT</span> ',
        ' YOUR_TEXT ' => ' <span class="YOUR_CLASS">YOUR_TEXT</span> ',
        // used at end of lines
        ' YOUR_TEXT' => ' <span class="YOUR_CLASS">YOUR_TEXT</span>',
        ' YOUR_TEXT' => ' <span class="YOUR_CLASS">YOUR_TEXT</span>',
        ' YOUR_TEXT' => ' <span class="YOUR_CLASS">YOUR_TEXT</span>',
        // used inside html tags like headers
        '>YOUR_TEXT' => '><span class="YOUR_CLASS">YOUR_TEXT</span>',
        '>YOUR_TEXT' => '><span class="YOUR_CLASS">YOUR_TEXT</span>',
        '>YOUR_TEXT' => '><span class="YOUR_CLASS">YOUR_TEXT</span>',
        //used directly after html tags
        '> YOUR_TEXT' => '> <span class="YOUR_CLASS">YOUR_TEXT</span>',
        '> YOUR_TEXT' => '> <span class="YOUR_CLASS">YOUR_TEXT</span>',
        '> YOUR_TEXT' => '> <span class="YOUR_CLASS">YOUR_TEXT</span>',
        //exclude alt tags on images, title attributes etc
        '"YOUR_TEXT' => '"YOUR_TEXT',
        'YOUR_TEXT"' => 'YOUR_TEXT"',
        '"YOUR_TEXT' => '"YOUR_TEXT',
        'YOUR_TEXT"' => 'YOUR_TEXT"'
    );
    $text = str_replace(array_keys($replace), $replace, $text);
    return $text;
}
add_filter('the_content', 'replace_text_wps');
add_filter('the_excerpt', 'replace_text_wps');
add_filter('the_title', 'replace_text_wps'); 
```

[排除 str_replace 中的 html 属性](https://stackoverflow.com/questions/44409808/exclude-html-attributes-in-str-replace)

# ios - UIScrollview - 模糊效果 iOS

> ID：12505482
> 
> 赞同：0
> 
> 时间：2012-09-20T02:51:29.540
> 
> 标签：ios, xcode, uiview, calayer

我有分页 UIScrollview。UIScrollview 是用户选择的选项。我应该模糊那些不在滚动视图框架内的页面。对此有何建议？这是实现的 UIScrollview的[屏幕截图。](http://i.imgur.com/YsDdz.png)具有低 alpha 分量的黑框将被其他页面上的模糊效果替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:14:16.807

我通过`UIImage`...的类别实现了这一目标

**.h 文件：**

```
#import <Foundation/Foundation.h>

@interface UIImage (StackBlur) 
    - (UIImage*) stackBlur:(NSUInteger)radius;
    - (UIImage *) normalize ;

@end 
```

**.m 文件：**

```
#import "UIImage+StackBlur.h"

@implementation  UIImage (StackBlur)    

// Stackblur algorithm
// from
// http://incubator.quasimondo.com/processing/fast_blur_deluxe.php
// by  Mario Klingemann

- (UIImage*) stackBlur:(NSUInteger)inradius
{
    int radius=inradius; // Transform unsigned into signed for further operations

    if (radius<1){
        return self;
    }
    // Suggestion xidew to prevent crash if size is null
    if (CGSizeEqualToSize(self.size, CGSizeZero)) {
        return self;
    }

    //  return [other applyBlendFilter:filterOverlay  other:self context:nil];
    // First get the image into your data buffer
    CGImageRef inImage = self.CGImage;
    int nbPerCompt=CGImageGetBitsPerPixel(inImage);
    if(nbPerCompt!=32){
        UIImage *tmpImage=[self normalize];
        inImage=tmpImage.CGImage;
    }
    CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));  
    UInt8 * m_PixelBuf=malloc(CFDataGetLength(m_DataRef));
    CFDataGetBytes(m_DataRef,
                   CFRangeMake(0,CFDataGetLength(m_DataRef)) ,
                   m_PixelBuf);

    CGContextRef ctx = CGBitmapContextCreate(m_PixelBuf,  
                                             CGImageGetWidth(inImage),  
                                             CGImageGetHeight(inImage),  
                                             CGImageGetBitsPerComponent(inImage),
                                             CGImageGetBytesPerRow(inImage),  
                                             CGImageGetColorSpace(inImage),  
                                             CGImageGetBitmapInfo(inImage) 
                                             ); 

    int w=CGImageGetWidth(inImage);
    int h=CGImageGetHeight(inImage);
    int wm=w-1;
    int hm=h-1;
    int wh=w*h;
    int div=radius+radius+1;

    int *r=malloc(wh*sizeof(int));
    int *g=malloc(wh*sizeof(int));
    int *b=malloc(wh*sizeof(int));
    memset(r,0,wh*sizeof(int));
    memset(g,0,wh*sizeof(int));
    memset(b,0,wh*sizeof(int));
    int rsum,gsum,bsum,x,y,i,p,yp,yi,yw;
    int *vmin = malloc(sizeof(int)*MAX(w,h));
    memset(vmin,0,sizeof(int)*MAX(w,h));
    int divsum=(div+1)>>1;
    divsum*=divsum;
    int *dv=malloc(sizeof(int)*(256*divsum));
    for (i=0;i<256*divsum;i++){
        dv[i]=(i/divsum);
    }

    yw=yi=0;

    int *stack=malloc(sizeof(int)*(div*3));
    int stackpointer;
    int stackstart;
    int *sir;
    int rbs;
    int r1=radius+1;
    int routsum,goutsum,boutsum;
    int rinsum,ginsum,binsum;
    memset(stack,0,sizeof(int)*div*3);

    for (y=0;y<h;y++){
        rinsum=ginsum=binsum=routsum=goutsum=boutsum=rsum=gsum=bsum=0;

        for(int i=-radius;i<=radius;i++){
            sir=&stack[(i+radius)*3];
            /*          p=m_PixelBuf[yi+MIN(wm,MAX(i,0))];
             sir[0]=(p & 0xff0000)>>16;
             sir[1]=(p & 0x00ff00)>>8;
             sir[2]=(p & 0x0000ff);
             */
            int offset=(yi+MIN(wm,MAX(i,0)))*4;
            sir[0]=m_PixelBuf[offset];
            sir[1]=m_PixelBuf[offset+1];
            sir[2]=m_PixelBuf[offset+2];

            rbs=r1-abs(i);
            rsum+=sir[0]*rbs;
            gsum+=sir[1]*rbs;
            bsum+=sir[2]*rbs;
            if (i>0){
                rinsum+=sir[0];
                ginsum+=sir[1];
                binsum+=sir[2];
            } else {
                routsum+=sir[0];
                goutsum+=sir[1];
                boutsum+=sir[2];
            }
        }
        stackpointer=radius;

        for (x=0;x<w;x++){
            r[yi]=dv[rsum];
            g[yi]=dv[gsum];
            b[yi]=dv[bsum];

            rsum-=routsum;
            gsum-=goutsum;
            bsum-=boutsum;

            stackstart=stackpointer-radius+div;
            sir=&stack[(stackstart%div)*3];

            routsum-=sir[0];
            goutsum-=sir[1];
            boutsum-=sir[2];

            if(y==0){
                vmin[x]=MIN(x+radius+1,wm);
            }

            /*          p=m_PixelBuf[yw+vmin[x]];

             sir[0]=(p & 0xff0000)>>16;
             sir[1]=(p & 0x00ff00)>>8;
             sir[2]=(p & 0x0000ff);
             */
            int offset=(yw+vmin[x])*4;
            sir[0]=m_PixelBuf[offset];
            sir[1]=m_PixelBuf[offset+1];
            sir[2]=m_PixelBuf[offset+2];
            rinsum+=sir[0];
            ginsum+=sir[1];
            binsum+=sir[2];

            rsum+=rinsum;
            gsum+=ginsum;
            bsum+=binsum;

            stackpointer=(stackpointer+1)%div;
            sir=&stack[((stackpointer)%div)*3];

            routsum+=sir[0];
            goutsum+=sir[1];
            boutsum+=sir[2];

            rinsum-=sir[0];
            ginsum-=sir[1];
            binsum-=sir[2];

            yi++;
        }
        yw+=w;
    }
    for (x=0;x<w;x++){
        rinsum=ginsum=binsum=routsum=goutsum=boutsum=rsum=gsum=bsum=0;
        yp=-radius*w;
        for(i=-radius;i<=radius;i++){
            yi=MAX(0,yp)+x;

            sir=&stack[(i+radius)*3];

            sir[0]=r[yi];
            sir[1]=g[yi];
            sir[2]=b[yi];

            rbs=r1-abs(i);

            rsum+=r[yi]*rbs;
            gsum+=g[yi]*rbs;
            bsum+=b[yi]*rbs;

            if (i>0){
                rinsum+=sir[0];
                ginsum+=sir[1];
                binsum+=sir[2];
            } else {
                routsum+=sir[0];
                goutsum+=sir[1];
                boutsum+=sir[2];
            }

            if(i<hm){
                yp+=w;
            }
        }
        yi=x;
        stackpointer=radius;
        for (y=0;y<h;y++){
            //          m_PixelBuf[yi]=0xff000000 | (dv[rsum]<<16) | (dv[gsum]<<8) | dv[bsum];
            int offset=yi*4;
            m_PixelBuf[offset]=dv[rsum];
            m_PixelBuf[offset+1]=dv[gsum];
            m_PixelBuf[offset+2]=dv[bsum];
            rsum-=routsum;
            gsum-=goutsum;
            bsum-=boutsum;

            stackstart=stackpointer-radius+div;
            sir=&stack[(stackstart%div)*3];

            routsum-=sir[0];
            goutsum-=sir[1];
            boutsum-=sir[2];

            if(x==0){
                vmin[y]=MIN(y+r1,hm)*w;
            }
            p=x+vmin[y];

            sir[0]=r[p];
            sir[1]=g[p];
            sir[2]=b[p];

            rinsum+=sir[0];
            ginsum+=sir[1];
            binsum+=sir[2];

            rsum+=rinsum;
            gsum+=ginsum;
            bsum+=binsum;

            stackpointer=(stackpointer+1)%div;
            sir=&stack[(stackpointer)*3];

            routsum+=sir[0];
            goutsum+=sir[1];
            boutsum+=sir[2];

            rinsum-=sir[0];
            ginsum-=sir[1];
            binsum-=sir[2];

            yi+=w;
        }
    }
    free(r);
    free(g);
    free(b);
    free(vmin);
    free(dv);
    free(stack);
    CGImageRef imageRef = CGBitmapContextCreateImage(ctx);  
    CGContextRelease(ctx);  

    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);   
    CFRelease(m_DataRef);
    free(m_PixelBuf);
    return finalImage;
}

- (UIImage *) normalize {

    CGColorSpaceRef genericColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef thumbBitmapCtxt = CGBitmapContextCreate(NULL,

                                                         self.size.width,
                                                         self.size.height,
                                                         8, (4 * self.size.width),
                                                         genericColorSpace,
                                                         kCGImageAlphaPremultipliedLast);
    CGColorSpaceRelease(genericColorSpace);
    CGContextSetInterpolationQuality(thumbBitmapCtxt, kCGInterpolationDefault);
    CGRect destRect = CGRectMake(0, 0, self.size.width, self.size.height);
    CGContextDrawImage(thumbBitmapCtxt, destRect, self.CGImage);
    CGImageRef tmpThumbImage = CGBitmapContextCreateImage(thumbBitmapCtxt);
    CGContextRelease(thumbBitmapCtxt);   
    UIImage *result = [UIImage imageWithCGImage:tmpThumbImage];
    CGImageRelease(tmpThumbImage);

    return result;   
}

@end 
```

**使用此代码模糊图像...**

```
self.rawImage.image=[self.rawImage.image stackBlur:10.0f]; 
```

# android - 用于 HTML5 视频的 Android webkit 代理

> ID：12505489
> 
> 赞同：2
> 
> 时间：2012-09-20T02:52:20.150
> 
> 标签：android, html, video, proxy, webkit

我通过使用类`android.webkit.WebViewCore`和`android.net.ProxyProperties`反射为 Android webkit 设置了一个代理，当我浏览网页时它工作正常。但是我的浏览器不能像 YouTube 那样播放 HTML5 视频，因为 HTML5 视频的网络流量没有经过代理。我的问题是如何在 Android webkit 上为 HTML5 视频设置代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-02T14:07:54.100

不幸的是，HTML5 媒体目前不支持代理：[https ://code.google.com/p/android/issues/detail?id=54132](https://code.google.com/p/android/issues/detail?id=54132)

# java - 列出java中目录和子目录中的文件，仅包括部分文件路径

> ID：12505491
> 
> 赞同：2
> 
> 时间：2012-09-20T02:53:14.143
> 
> 标签：java

我需要从给定目录中获取文件及其父目录的路径，但不包括它。

例如，如果我的方法被赋予 path:`/home/user/test`作为路径，它将返回该目录中及其下所有文件的路径。

因此，如果`/home/user/test`有子文件夹：`/subdir1`并且`/subdir2`每个包含`file1.txt`，`file2.txt`然后该方法的结果将是 2 个包含`/subdir1/file1.txt`和的字符串`/subdir2/file2.txt`

如果在`subdir1`其中有一个名为的目录，那么为该文件创建的字符串将是，并且如果还有更多的子目录将继续。`subsubdir``file3.txt``/subdir1/subsubdir/file3.txt`

这个想法是我只想要文件上方的目录路径而不是绝对路径，所以只有初始给定路径之后的目录。

我知道这有点令人困惑，但我相信有人能理解它。现在我只有一个递归函数，它打印出文件名和它们的绝对路径。

对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:06:26.153

如果您尝试过某事并提出相关问题，那该多好……

然而...

```
public class TestFileSearch {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new TestFileSearch();
    }

    public TestFileSearch() {
        File parentPath = new File("C:/Users/shane/Documents");
        List<String> files = list(parentPath);

        for (String file : files) {
            System.out.println(file);
        }
    }

    protected List<String> list(File parent) {
        return listFiles(parent, parent);
    }

    protected List<String> listFiles(File parent, File folder) {
        List<String> lstFiles = new ArrayList<String>(25);
        if (folder.isDirectory()) {

            File[] files = folder.listFiles();
            if (files != null) {
                for (File file : files) {
                    if (file.isDirectory()) {
                        lstFiles.addAll(listFiles(parent, file));
                    } else {
                        String path = file.getPath();
                        String offset = parent.getPath();

                        path = path.substring(offset.length());
                        lstFiles.add(path);
                    }
                }
            }
        }

        return lstFiles;
    }
} 
```

你可以简单地做一个普通的文件夹递归，返回一个文件列表，然后去掉前缀，但这取决于你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:11:29.680

如何使用您当前拥有的绝对路径但使用[String.replace从中删除前缀](http://download.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

你说你有完整的绝对路径，*完整*
地说 然后就做

```
String relative = full.replace(prefix, ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:04:20.283

如果您输入“/home/user/text”，则所有文件的绝对路径都将以 /home/user/text/ 开头。如果您已经能够在 text/ 下打印所有文件的列表，那么您需要做的就是获取合适的子字符串。

以下函数应该访问 pathToDir 下的所有文件。在 printFileName 函数中，您可以删除 /home/user/text 部分并打印文件名

```
public static void gotoAllFiles(File pathToDir) {
    if (pathToDir.isDirectory()) {
        String[] subdirs = pathToDir.list();
        for (int i=0; i<subdirs.length; i++) {
            gotoAllFiles(new File(pathToDir, subdirs[i]));
        }
    } else {
        printFileName(pathToDir);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T03:07:19.040

对于找到的每个文件，打印`file.getAbsolutePath().substring(rootPath.length());`

# javascript - 为什么我的 Flot y 轴标签出现在轴上？JQM

> ID：12505493
> 
> 赞同：5
> 
> 时间：2012-09-20T02:53:22.880
> 
> 标签：javascript, jquery-mobile, flot

我一直致力于建立一个使用 JQuery Mobile 和 Flot 的网站。这个想法是它可以显示您可以在其之间滑动的图表。

到目前为止，我有这个： http: [//lasmit.co.uk/tmm-graphs/graph2.php](http://lasmit.co.uk/tmm-graphs/graph2.php)

第一个图表工作正常，但如果您向一侧滑动，标签会出现在轴线上方并移开视线。

我确定我在这里遗漏了一些明显的东西，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T15:19:04.457

`$.plot`当你调用当前不可见的东西时， Flot 不能很好地工作。您最好的选择是将您的第 2 页和第 3 页图表移动到`pageshow`事件中：

```
$('#device2').bind('pageshow',function(){    
  $.plot($("#total-inches-graph"), 
    [{  color: "rgb(14, 91, 173)", label: 'Total Measurements', data: totalInchesArray }] , 
    { xaxis: { mode: "time", timeformat: "%a" ,minTickSize: [1, "day"] } });
});

$('#device3').bind('pageshow',function(){    
  $.plot($("#weight-graph"), 
    [{  color: "rgb(32, 140, 47)", label: 'Weight', data: weightArray }] , 
    { xaxis: { mode: "time", timeformat: "%a" ,minTickSize: [1, "day"] } });
}); 
```

我在这里做了一个工作示例：http: [//jsfiddle.net/ryleyb/yZuZb/](http://jsfiddle.net/ryleyb/yZuZb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:36:24.137

滑动似乎有问题，因为直接访问页面时绘图正确呈现，例如打开以下 URL： http: [//lasmit.co.uk/tmm-graphs/graph2.php#device2](http://lasmit.co.uk/tmm-graphs/graph2.php#device2)，但是然后其他页面呈现不正确。

您设置了 DIV 元素的大小，您可以尝试设置绘图的确切大小吗？

# python - 如何应用最大缓存大小来记忆？

> ID：12505503
> 
> 赞同：2
> 
> 时间：2012-09-20T02:55:53.293
> 
> 标签：python, memory-management, memoization

我在课堂上使用这个 memoize 装饰器，它非常有效。现在我准备用一些速度来控制内存消耗。理想情况下，我可以设置一个最大值；（例如：2GB）但我想我可以反复试验并解决缓存中的最大对象数。

任何人都知道一些现成的代码来做到这一点？我想我会扔掉缓存中最旧的以添加最新的。

还是有更明智的方法来做到这一点？

这是我目前正在使用的例程：

```
def memoize(obj):
    """A decorator to cache advice objects using the advice key"""
    cache = obj.cache = {}

    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        key = args[0]
        if key not in cache:
            cache[key] = obj(*args, **kwargs)
        return cache[key]

    return memoizer 
```

将 max 作为 arg 给装饰器似乎是明智的，例如：

```
@memoize(max=2000)
class Foo(object):
   ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T04:25:24.877

如果您使用的是 Python 3.2，标准库中已经有一个很好的缓存装饰器：

```
import functools

@functools.lru_cache(maxsize=1000)
def fun(...): 
```

否则，我只会看看[`lru_cache`](http://hg.python.org/cpython/file/1cd147d9c645/Lib/functools.py#l169). 这是一个很好的纯 Python 通用记忆器，具有 LRU 语义（如您正在使用的 FIFO 语义，但更复杂一些）以获得更好的缓存性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:20:14.763

如果是我，我可能会做这样的事情：

```
from collections import deque

def memoize(obj, maxlen = None):
    """A decorator to cache advice objects using the advice key"""
    cache = obj.cache = {}
    deck = obj.deck = deque([], maxlen = maxlen)

    @functools.wraps(obj)
    def memoizer(*args, **kwargs):
        key = args[0]
        if key not in cache:
            if len(deck) == deck.maxlen:
              del cache[deck.popleft()[0]]
            temp = obj(*args, **kwargs)
            cache[key] = temp
            deck.append((key, temp))
        return cache[key]

    return memoizer 
```

这应该很接近，但我在这里的编辑器中写了它，而不是在提示中。它可能需要一些改进。

# php - PHP GDChart 安装失败

> ID：12505506
> 
> 赞同：2
> 
> 时间：2012-09-20T02:56:15.557
> 
> 标签：php, pecl

我想在我的本地系统 (localhost) 上安装 GD Chart。我试图在本地主机上安装 GD Chart。

当我尝试通过以下步骤安装时：

1.  进入控制台模式

2.  类型：pecl 安装 gdchart-0.2.0

它说：

```
pecl/gdchart requireds PHP extension "gd"
No valid packages found
install failed 
```

# file - 使用假按钮和文本字段的 html 浏览按钮的国际化

> ID：12505511
> 
> 赞同：0
> 
> 时间：2012-09-20T02:56:49.943
> 
> 标签：file, button, internationalization

为了国际化，我使用了假按钮技术。当我尝试使用假按钮时，一切都很好，只是表单没有提交。

它仅在我单击实际浏览按钮并选择文件时提交。

有人可以对这种行为有所了解。

```
<html>
   <script>
     function triggerFileUpload() 
     { 
        try{
          document.getElementById("theFile").click();
        }catch(e){
         alert(e);
        }
     } 

      function setHiddenValue() 
      { 
        document.getElementById("dummyField").value = document.getElementById   ("theFile").value; 
       } 
   </script>
<body>
<div id="dummyDiv">
<form action="http://www.google.com">
<input type="Text" disabled="disabled" class="inputField" id="dummyField"/>
<input type="button" class="inputField" value="Buscar Archivo" onclick="triggerFileUpload()"/>
</div>
<div id="uploadDiv" style="display: block;">
<input type="file" id="theFile" name="theFile" onchange="setHiddenValue()"/>
</div>
<input type="submit" value="submit"/>
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:54:22.963

虽然上述行为仍未得到解答，但我能够实现文件上传控制的本地化 -

```
 <html>
<head>
<link rel="stylesheet" href="browse.css" type="Text/css"/>
 <script>
  function openBrowse(){
   document.getElementById("realBrowse").click();
  }
  function populateFakeField(){
   document.getElementById("fakeBrowseField").value=document.getElementsByName("q")[0].value;
  }
 </script>
</head>
<body>
 <form action="https://www.google.co.in/search">
    <input type="Text" id="fakeBrowseField"/>
    <!-- The fileinput-button span is used to style the file input field as button -->
    <span class="btn btn-success fileinput-button">
        <span>Buscar Archivo</span>
        <input type="file" name="q" multiple="" onchange="populateFakeField()">
    </span>

  <input type="submit" value="submit"/>
 </form>
</body>
</html> 
```

**浏览器.css**

```
 .fileinput-button {
    position: relative;
    overflow: hidden;
    float: left;
    margin-right: 4px;
}
.fileinput-button input {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    border: solid transparent;
    border-width: 0 0 100px 200px;
    opacity: 0;
    filter: alpha(opacity=0);
    -moz-transform: translate(-300px, 0) scale(4);
    direction: ltr;
    cursor: pointer;
}
.btn-success {
    background-color: #5bb75b;
    border-color: #51a351 #51a351 #387038;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
}

.btn {
    display: inline-block;
    padding: 4px 10px 4px;
    margin-bottom: 0;
    font-size: 13px;
    line-height: 18px;
    color: #333333;
    text-align: center;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
    vertical-align: middle;
    cursor: pointer;
    background-color: #d4d0c8;
    border: 1px solid #cccccc;
    /*border: 0;*/
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    border-color: #d4d0c8 #d4d0c8 #bfbfbf;
    border-bottom-color: #b3b3b3;

} 
```

# xml - 在 XML 中放置文本代码而不是符号

> ID：12505516
> 
> 赞同：0
> 
> 时间：2012-09-20T02:57:31.083
> 
> 标签：xml, text

有没有办法放置文本代码而不是符号？例如，“『”的文本代码是 300E。我想将文本代码“300E”与下面的 XML 中的其他符号一起放置。 `<?xml version="1.0" encoding="utf-8"?> <charlist> <list> <title name="symbol">1</title>` `<chr><![CDATA[㎣㎎㎏㎍ℓ㎖㎗㎘㏊㎾㏄㎸㏏㎈㎉￦￡￥＋－‥㉿Ω]]></chr> </list>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:12:58.250

`&#x300E;`但需要在 CDATA 部分之外。

# php - 计算数组中非空项目的数量？

> ID：12505529
> 
> 赞同：0
> 
> 时间：2012-09-20T03:00:23.263
> 
> 标签：php

> **可能重复：**
> [如何计算 php 数组中的非空条目？](https://stackoverflow.com/questions/4422889/how-to-count-non-empty-entries-in-php-array)

我想计算数组中不为空/空的键的数量。

```
EG:
array(1>'asdf',2>'fdas',3>'');

count($array) would return 3, I want a function that returns 2 as 3 is empty 
```

是否有任何 php 内置函数来执行此操作？如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:03:30.617

采用：

```
count(array_filter($array)); 
```

> 数组 array_filter ( 数组 $input [, 可调用 $callback = "" ] )
> 
> 如果没有提供回调，则所有等于 FALSE 的输入条目（请参阅转换为布尔值）都将被删除。

# python - 需要这样的字典

> ID：12505531
> 
> 赞同：0
> 
> 时间：2012-09-20T03:01:02.690
> 
> 标签：python, python-3.x

我想使用一个有序的字典，它的迭代动作看起来像列表

```
seq.append(2)
seq.append(3)
seq.append(1)

print(seq)# the list should be 2,3,1

dic[2] = '22222'
dic[3] = '333333'
dic[1] = '111111'
print(dic)# should be {2:'22222',3,'333333',1:'111111'} not {1...2...3} 
```

我不知道python标准库中是否已经有一个类。或者我需要一个列表来保持顺序，那太复杂了，告诉我你知道怎么做的最简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:05:22.297

Python[`OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict)集合将在这里为您提供帮助：

> “添加了记住订单条目的 dict 子类”

# scala - 递归方法不起作用。需要 ; ?

> ID：12505532
> 
> 赞同：-1
> 
> 时间：2012-09-20T03:01:12.397
> 
> 标签：scala

试图创建一个递归函数来打印数组的最高元素。

它是说它需要一个`;`之前`else maxi=xs.head`和一个`}`之后`max(xs.tail)`

我不认为 scala 使用分号，什么时候应该使用它们以及其他一些基本的句法规则。

```
var maxi = 0 
def max(xs: List[Int]): Int = {if (xs.isEmpty) throw new java.util.NoSuchElementException() 
      else if (xs.tail.isEmpty) maxi
      else if (xs.tail.head > xs.head) maxi = xs.tail.head
      max(xs.tail)
      else maxi=xs.head
      max(xs.tail)
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T03:03:55.717

这看起来像家庭作业，我只是基于这是 Odersky 在线 Coursera 课程中第一个家庭作业的一部分。

如果不是，请告诉我，但我会假设它是，所以我只是给出一个提示.. 看看你的 if/else 分支是如何组织的。

课程的第一周视频涵盖了 Scala 的分号推断。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T03:04:28.647

一些正确的格式会告诉你问题：

```
var maxi = 0 
def max(xs: List[Int]): Int = {
  if (xs.isEmpty) 
    throw new java.util.NoSuchElementException() 
  else if(xs.tail.isEmpty) 
    maxi
  else if(xs.tail.head > xs.head) { // <-- need this opening brace
    maxi = xs.tail.head             // because there are two lines 
    max(xs.tail)                    // in the body of the if-statement
  }                                 // <-- and this closing brace
  else {
    maxi=xs.head
    max(xs.tail)
  }
} 
```

分号在 Scala 代码中是有效的，但在 Java 中不需要它们。换句话说，您可以编写不需要它们的代码，或者您可以根据需要将它们用于某些事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-20T03:07:01.417

Scala 使用分号，但它们在行尾是可选的。也就是说，如果分号在行尾是合法的（即该行不在表达式的中间结束（如`a +`）），则会自动插入分号。

也就是说，尽管出现错误消息，但您的问题实际上与分号无关。您的问题是，如果您想在 if 或 else 块中包含多个表达式，则需要大括号。

PS：请注意，使用可变的非局部变量来跟踪您的状态在设计上是一个坏主意，并且如果您多次调用您的方法（不重置其间的变量）会给您带来麻烦。

PPS：你应该仔细看看你在`xs.tail`空的时候做什么。你确定逻辑正确吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T11:29:21.023

这是 Coursera“使用 Scala 进行函数式编程”的示例作业。您有此类问题的课程论坛。

您应该更深入地研究递归并在没有任何额外 var 的情况下解决此任务。Lists 源中有关于辅助函数的提示。用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-18T08:36:07.243

```
def max(xs: List[Int]): Int = {
  def loop(a: Int, b: List[Int]): Int = {
    if (b.tail.isEmpty)
      if (a >= b.head) a
      else b.head
    else 
      if (a >= b.head) loop(a, b.tail)
      else loop(b.head, b.tail)
  }
  if (xs.isEmpty) throw new java.util.NoSuchElementException()
  else loop(xs.head, xs.tail)  
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-28T10:33:12.663

```
def max(xs: List[Int]): Int = {
  def maxNew(xs: List[Int], maxx: Int): Int ={
   if(xs.isEmpty) maxx else { 
     if (maxx<=xs.head) 
      maxNew(xs.tail, xs.head)
    else 
      maxNew(xs.tail, maxx)
   }
 }

  if(xs.isEmpty) throw new java.util.NoSuchElementException()
  else maxNew(xs,0)        
} 
```

# facebook-graph-api - C# SDK 发布到我自己的页面提要

> ID：12505533
> 
> 赞同：1
> 
> 时间：2012-09-20T03:01:15.843
> 
> 标签：facebook-graph-api, facebook-c#-sdk, oauth-2.0

情况：我有一个网站并创建“帖子”。创建新帖子后，我想将新帖子发送到我的 Facebook 页面提要。我已经编写了所有代码来执行此操作，只要我从图形 API 资源管理器工具中获得访问令牌，它就可以正常工作。这不起作用，因为它会在大约一个小时后到期。当我从代码生成访问令牌时，它似乎是一个应用程序访问令牌，它不允许我访问我的页面。所以最大的问题是我如何从有权发布到我的页面的代码中获取用户访问令牌。

这是我获取访问令牌的方式。

```
 private static string GetApiAccessToken()
    {
        var client = new FacebookClient();
        dynamic result = client.Get("oauth/access_token", new
        {
            client_id = SessionGetter.Instance.FacebookApiKey,
            client_secret = SessionGetter.Instance.FacebookSecretKey,
            grant_type = "client_credentials",
            scope = "manage_pages"
        });

        return result.access_token;
    } 
```

然后我使用访问令牌尝试获取页面访问令牌，这就是它告诉我我没有授权的地方，我在字典中得到的只是一个“id”。

```
private static string GetPageAccessToken(string accessToken, string pageId)
    {
        try
        {
            var fb = new FacebookClient(accessToken);

            var parameters = new Dictionary<string, object>();

            parameters["fields"] = "access_token";
            var result = (IDictionary<string, object>)fb.Get(pageId, parameters);

            var pageAccessToken = (string)result["access_token"];

            return pageAccessToken;
        }
        catch (FacebookApiException ex)
        {
        }
        return null;
    } 
```

现在就像我说的，如果我使用图形资源管理器中的访问令牌，代码可以正常工作。然后将帖子发送到图形 API

```
 var facebookClient = new FacebookClient(pageAccessToken);
            var result = (IDictionary<string, object>)facebookClient.Post("me/feed", new Dictionary<string, object>
{{"message",postMessage},                                                                              {"picture", csLogo},
{"link", LinkHelper.AssignmentUrl(wrapper.Assignment)}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T21:21:23.013

确保用户访问令牌具有`manage_pages`扩展权限。

然后请求`me/accounts`获取页面访问令牌。

然后发布到`{pageid}/feed`使用**页面**访问令牌。

# cordova - 将 Blackberry web works 应用程序转换为 blackberry java 应用程序

> ID：12505537
> 
> 赞同：1
> 
> 时间：2012-09-20T03:02:02.147
> 
> 标签：cordova, blackberry, java-me, blackberry-webworks

我使用 phone-gap web 工作框架创建了一个 BlackBerry 应用程序，但该框架仅支持 BlackBerry OS 5 或更高版本。我想将我的应用程序转换为使用 BlackBerry java，以便它可以在早期的 BlackBerry OS 版本上运行。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T06:02:07.057

这不是一项微不足道的任务。您将需要在 java 上重写应用程序以支持较旧的 RIM OS 版本。

WebWorks/PhoneGap 应用程序在[BrowserField](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html)类实例中隐式运行，该实例仅在 RIM OS 5 和更新的 OS-es 中可用。

旧 RIM API 有旧的 BrowserField 实现。但它无法运行 WebWorks/PhoneGap 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T00:04:32.887

除非您*绝对*需要支持早于 5.0 的 BlackBerry OS 版本，否则我强烈建议您不要。将精力集中在对 Web 标准和开发人员 API 提供更强大支持的新平台上。

这是按操作系统划分的 App World 使用情况细分。OS 4.x 仅占所有付费下载的 2% 和所有免费下载的 6%：

[https://developer.blackberry.com/appworld](https://developer.blackberry.com/appworld)

# iphone - 自定义 UINavigationBar 的最惯用的 iOS5 方式？

> ID：12505542
> 
> 赞同：3
> 
> 时间：2012-09-20T03:03:13.937
> 
> 标签：iphone, ios, cocoa-touch, ios5

我正在定制我的应用程序中导航控制器的外观，如下所示：

![在此处输入图像描述](../Images/be57e6b0e5f8f15389404a6ce02b5bda.png)

正如我在几个小时的 SO 研究后发现的那样，有很多不同的方法可以做到这一点，有些非常hackish，有些则更少。我有兴趣找出 Apple 祝福/最优雅的方式来实现这一点，随着应用程序的增长，这将导致最少的痛苦。到目前为止我研究过的一些方法：

**1）**我通过[UINavigationBar外观]应用图像更改了导航栏的背景/高度，似乎工作正常。

```
UIImage *navBarImage = [UIImage imageNamed:@"navigation-bar.png"];

[[UINavigationBar appearance] setBackgroundImage:navBarImage
                                   forBarMetrics:UIBarMetricsDefault]; 
```

似乎是实现背景/高度变化的最“现代”方式，尽管它很可能无法在方向变化中幸存下来。这里有什么可以改进的吗？

**2）**我在推送视图的viewDidLoad中将默认的后退按钮替换为以下内容

```
// Set the custom back button
UIImage *buttonImage = [UIImage imageNamed:@"back.png"];

//create the button and assign the image
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:buttonImage forState:UIControlStateNormal];

//set the frame of the button to the size of the image (see note below)
button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

[button addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

// offset the back button
button.contentEdgeInsets = UIEdgeInsetsMake(10, 5, -10, -5);

//create a UIBarButtonItem with the button as a custom view
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.leftBarButtonItem = customBarItem; 
```

我对这个解决方案不太满意，因为它将栏的自定义留给了导航堆栈顶部的控制器。[从 Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)看来，他们似乎更希望您完全继承 UINavigationBar 并在导航控制器中一劳永逸地替换它：

> 您还可以通过使用 initWithNavigationBarClass:toolbarClass: 方法来指定自定义 UINavigationBar 子类来初始化导航控制器。

那会是建议的路线吗？我无法通过 [UIBarButtonItem 外观] 替换 UINavigationBar 的默认后退按钮，因为它仍然尝试在按钮中显示文本，并且当您删除文本时，按钮根本不会显示。建议？

**3）**页面标题应该可以通过navigationItem.titleView替换为另一个视图。外面有什么更好的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:56:48.137

1）您应该为两个 UIBarMetrics 设置两个图像（UIBarMetricsDefault 和一个单独的图像用于 UIBarMetricsLandscapePhone）。因此

```
UIImage *navBarImage = [UIImage imageNamed:@"navigation-bar.png"];
UIImage *navBarImage_Landscape = [UIImage imageNamed:@"navigation-bar-landscape.png"];

[[UINavigationBar appearance] setBackgroundImage:navBarImage
                                   forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundImage:navBarImage_Landscape
                               forBarMetrics:UIBarMetricsLandscapePhone]; 
```

2）您可以继承 UINavigationBar （正如您也提到的，这将是默认的 Apple 方式）。或者如果它只是按钮，也许你可以通过传入“”（空文本）来破解它的行为

3）不确定你的意思。您可以设置导航栏的标题，它会显示您想要的任何标题。或者您应该能够为 titleView 插入另一个视图

请注意，setBackgroundImage 是 iOS 5.0 及更高版本。

# php - 大写和小写 Č 不会在 dompdf 中正确显示

> ID：12505549
> 
> 赞同：0
> 
> 时间：2012-09-20T03:04:19.003
> 
> 标签：php, unicode, utf-8, character-encoding, dompdf

我已经为此苦苦挣扎了一段时间。

所以我有一个名为 index.php 的简单文件，用 UTF-8 编码。这个文件的内容是：

```
require_once("dompdf/dompdf_config.inc.php");

$html =
  '<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><style> body { font-family: verdana; } </style></head><body>'.
  '<p>Put your html here, or generate it with your favourite '.
  'templating system.</p><p>Č Š Ž č š ž €&lt;/p>'.
  '</body></html>';

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf"); 
```

基本上我试图在PDF中正确显示字母ČŠŽ。Š 和 Ž 工作正常，但我似乎无法让 Č 正确显示，而是我明白了？在我的 PDF 文件中。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:33:44.950

[在 DOMPDF 中启用 Unicode](http://code.google.com/p/dompdf/wiki/CPDFUnicode)的指南可能会对您有所帮助。`dompdf/www/fonts.php`如果您使用的是最新版本（0.6beta 或trunk），通过您的网络浏览器在底部还有一个新的字体安装程序。另外，一定要检查`dompdf/www/setup.php`。

# echo - 在 DOS 中使用没有尾随空格的 echo

> ID：12505552
> 
> 赞同：11
> 
> 时间：2012-09-20T03:04:22.003
> 
> 标签：echo, dos, space

我注意到，当我在 DOS 中使用 echo 将某些内容打印到文件时，字符串会附加一个空格。我需要打印没有尾随空格的字符串。有没有办法做到这一点，或者作为一种解决方法，从文件中删除尾随空格？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-20T03:06:42.393

如果我正确理解了这个问题，你*写*了尾随空格。

代替

```
echo string > file 
```

采用

```
echo string>file 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T03:13:04.247

假设您正在谈论`cmd.exe`而不是*实际*（相当过时的）MSDOS，有很多方法可以做到这一点，第一种是：

```
echo Here is some text>output.txt 
```

但我发现这有点不可读，因为我习惯于在命令行上清楚地描述“参数”。

或者，没有什么可以阻止您交换命令行的顺序：

```
>output.txt echo Here is some text 
```

这将允许您仍然分隔参数，同时不会在输出文件中放置多余的空格。

事实上，我也经常将这种方法用于代码块：

```
>output.txt (
    echo hello
    echo goodbye
) 
```

这会将*两*行都写入文件。在这种情况下，我发现它更可取，因为您一开始就知道输出的去向，而不必去查看代码块的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:11:32.967

一些快速搜索给我带来了[这个链接](http://www.netikka.net/tsneti/info/tscmd079.htm)

看来您有多种选择。如果您想使用脚本解析文件 post-echo，您可以考虑这个 VBScript

```
 Do While Not WScript.StdIn.AtEndOfStream
    WScript.Echo RTrim(WScript.StdIn.ReadLine)
  Loop 
```

它逐行循环文件（通常是 .txt），并执行[RTrim](http://www.w3schools.com/vbscript/func_rtrim.asp)，去除尾随空格。

干杯

# android - 当我从一列的记录中获取信息时如何访问 android sqlite 数据库的其他列

> ID：12505557
> 
> 赞同：1
> 
> 时间：2012-09-20T03:04:59.410
> 
> 标签：android, database, image, sqlite, path

我有一个活动，它显示来自手机 sd 卡的图像，并且我有从另一个活动传递到当前活动的图像路径作为额外的意图，例如：//mnt/sdcard/DCIM/ pic05.png

路径存储在名为 _data 的列下的数据库中，并且每条记录还有其他列，例如描述和 _display_name，我如何访问这些？

例如，我有如上图所示的 pic05.png 路径，我想在该图片的文本视图中显示 _display_name，这就是我想要了解的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:24:10.057

简单的 SQL 会做，基于一个表：

```
CREATE TABLE pictures
( fileName TEXT NOT NULL,
  displayName TEXT,
  PRIMARY KEY pictures_pk( fileName ) ); 
```

你可以简单地：

```
SELECT displayName
  FROM pictures
 WHERE fileName = ? 
```

或者在 Java 中：

```
SQLiteDatabase db...
String displayName;
Cursor c = db.query( "pictures", null, "fileName=pic01.png", null, null, null, null );
c.moveToFirst();
if( !c.isAfterLast() )
    displayName = c.getString(1); 
```

这是非常简化的。当您访问游标时，您需要传递所需的列并使用正确的列索引。

# iphone - WebCore 在 NSOperationQueue 操作中崩溃

> ID：12505558
> 
> 赞同：0
> 
> 时间：2012-09-20T03:05:03.963
> 
> 标签：iphone, objective-c, ios, ipad

我收到以下错误：

![在此处输入图像描述](../Images/2b0ec350c44811e43834266b06e53aba.png)

我看不出我的代码有什么问题。这是我的 AHInstagramImageData 中的一些代码

```
-(id)initWithData:(NSDictionary *)data
{
    self = [super init];
    if (!self) {
        return nil;
    }

for (NSDictionary * comment in imgCmt){
        AHInstagramImageComment * instagramImgComment  = [[AHInstagramImageComment alloc] initWithData:comment];
        [comments insertObject:instagramImgComment atIndex:0];
        [instagramImgComment release];
    }
}

and then on the AHInstagramImageComment I have:

-(id)initWithData:(NSDictionary *)data
{
    self = [super init];
    if (!self) {
        return nil;
    }

    [self calculateCommentsHeight];

    return self;
}

- (void) calculateCommentsHeight
{
    NSString *combinedComment = [NSString stringWithFormat:@"%@ %@", self.username, self.text];
    CGFloat desiredHeight = [combinedComment sizeWithFont:[UIFont fontWithName:@"HelveticaNeue" size:14] constrainedToSize:CGSizeMake(kCommentsMaxWidth, CGFLOAT_MAX) lineBreakMode:UILineBreakModeClip].height;

    if (desiredHeight >= 50){
        commentHeight_ = desiredHeight;
    } else {
        commentHeight_ = 50;
    }

    commentHeight_ += kTimestampMaxHeight;
    commentHeight_ += 5;
} 
```

因此，我必须在后台队列中初始化 AHInstagramImageData：

```
 [weakSelf.backgroundQueue_ addOperationWithBlock:^{
                             NSArray *arr = [response valueForKey:@"data"];
                             int startingIndex = [[AHImageDataSource sharedDataSource] count];
                             for (NSDictionary * data in arr){
                                 AHInstagramImageData * imgData = [[AHInstagramImageData alloc] initWithData:data]; 
```

} }];

这些有错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T19:18:37.973

Core Text 在某种程度上是线程安全的，如下所述：[Alternative for sizeWithFont: method](https://stackoverflow.com/questions/2371402/alternative-for-sizewithfont-method)

使用 CoreText，我编写了一个 NSString 类别，它包装[了 CTFramesetterSuggestFrameSizeWithConstraints](https://developer.apple.com/library/ios/documentation/Carbon/Reference/CTFramesetterRef/Reference/reference.html#//apple_ref/c/func/CTFramesetterSuggestFrameSizeWithConstraints)并且是线程安全的。可能对找到这篇文章并想要不同解决方案的人有用。这与 iOS 5 和 iOS 6 兼容，但出于某种原因在 iOS 6 上提供了更好的结果。

它会为您返回一个建议的 CGSize，但还会告诉您它能够以何种字体大小容纳多少个字符，并接受一个约束。

NSString+SizeCalculation.h

```
@interface NSString (SizeCalculation)

// Uses CoreText instead of UIStringDrawing, since UIStringDrawing is not thread safe
- (CGSize) sizeWithFontName:(NSString*)fontName constraints:(CGSize)constraint targetSize:(CGFloat)target minimumSize:(CGFloat)minimum optimalFontSize:(CGFloat*)optimal fitRange:(NSRange*)range;

@end 
```

NSString+SizeCalculation.m

```
#import <CoreText/CoreText.h>
@implementation NSString (SizeCalculation)

- (CGSize) sizeWithFontName:(NSString*)fontName constraints:(CGSize)constraint targetSize:(CGFloat)target minimumSize:(CGFloat)minimum optimalFontSize:(CGFloat*)optimal fitRange:(NSRange*)range
{
    CFRange fitRange;
    CGSize suggestion;
    do {
        id font = (__bridge_transfer id) CTFontCreateWithName((__bridge CFStringRef) fontName, target, NULL);
        NSAttributedString *string = [[NSAttributedString alloc] initWithString:self attributes:@{(id)kCTFontAttributeName:font}];
        id framesetter = (__bridge_transfer id) CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef) string);
        suggestion = CTFramesetterSuggestFrameSizeWithConstraints((__bridge CTFramesetterRef)(framesetter), CFRangeMake(0, self.length), nil, constraint, &fitRange);
    } while (fitRange.length < self.length && target > minimum && (target -= 2.0f));

    if (optimal != NULL) *optimal = target;
    if (range != NULL) *range = NSMakeRange(fitRange.location,fitRange.length);
    return suggestion;
}

@end 
```

你像这样使用它。

```
 CGFloat fontSize = 24.0f;
 NSRange range;
 NSString *title = @"Hello World";
 CGSize suggestedSize = [title sizeWithFontName:@"HelveticaNeue-Bold" constraints:CGSizeMake(200.0f,35.0f) targetSize:fontSize minimumSize:16.0f optimalFontSize:&fontSize fitRange:&range]; 
```

*SuggestedSize 然后包含一个CGSize*，它将适合字体*fontSize*的标题。*范围*还告诉您在达到最小尺寸之前它能够容纳多少个字符。如果您不在乎，可以将 NULL 传递给最佳尺寸和适合范围。

Ps 我尝试重新使用 CoreText 部分，但它没有工作，因此需要重新初始化，但它仍然非常快，并且由于您在后台线程上运行它会很好。

Pps 如果你只需要获取单行文本的高度，我写了一个性能更好的类似方法。[https://gist.github.com/duedal/4742069](https://gist.github.com/duedal/4742069)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T04:00:24.133

我之前遇到过类似的问题。当前有一个错误阻止`[NSString sizeWithFont:]`并`[NSString drawInRect:]`在后台线程上运行，或者通过`NSOperations`.

请参阅此链接： [UIKit 字符串绘制方法中的错误？](https://stackoverflow.com/questions/11589768/bug-in-uikit-string-drawing-method)

你有几个选择：

1.  不要`sizeWithFont:`与`NSOperations`.
2.  将您的最大操作计数设置`NSOperationQueue`为 1：

    `[queue setMaxConcurrentOperations:1];`

3.  使用 Core Text 和`NSAttributedStrings`，它们有自己的 " `sizeWithFont`" 方法：`CTFramesetterSuggestFrameSizeWithConstraints`

4.  用于`[NSOperationQueue mainQueue];`在主线程上运行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:04:50.710

WebCore/WebKit 不是完全线程安全的，必须在主线程上运行。问题是，字体和字符串操作在幕后使用了 WebKit。

在主线程上调用您的字符串绘图（包括调整大小）代码，崩溃应该停止。

# ios - 通过双击从 mapView 中删除选定的注释

> ID：12505559
> 
> 赞同：0
> 
> 时间：2012-09-20T03:05:07.867
> 
> 标签：ios, mkannotation

我需要有关通过双击删除注释的帮助。

单击地图上的任何现有注释后，如何区分选择的注释/图钉（双击）？

或任何其他建议/常用的方法从 mapView 中删除图钉？

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:18:23.600

默认情况下，地图工具包框架保留双击手势识别器以放大地图视图，但您可以通过在自定义“MKPinAnnotationView”类中使用“hittest”来抑制它。

我准备了一个示例来展示如何使用“hittest”在地图视图中使标注可触摸。您可以使用与我对标注相同的方式来解决此问题。 [检测对标注标题的点击](https://stackoverflow.com/questions/8469539/detect-tap-on-title-of-callout/13495795#13495795)

# c++ - 在 C++ 中返回类的最佳方法

> ID：12505563
> 
> 赞同：1
> 
> 时间：2012-09-20T03:05:24.373
> 
> 标签：c++

我正在为一个项目编写一个 C++ 矢量类，我很难决定如何最好地编写一些方法。在我开始之前，我会说这个类有一个很好的复制构造函数和赋值运算符（这将在几秒钟内相关）。该类有一组静态方法，当我想确保两个参数都没有被更改时，它们返回向量，它们具有如下签名：

```
Vector* Vector::subtract(const Vector* v, const Vector* u)
{
    double outX = v->myX - u->myX;
    double outY = v->myY - u->myY;
    double outZ = v->myZ - u->myZ;

    return new Vector(outX, outY, outZ);
} 
```

我遇到的问题是，如果我能提供帮助，我不想返回指针。所以相反我做了一些测试并意识到如果我只是说

```
return Vector(outX, outY, outZ) 
```

然后分配结果

```
Vector foo = Vector::subtract(bar, temp) 
```

它将创建一个副本并正常工作。这就是我的问题所在：我刚刚调用了构造函数两次（基本上）有没有办法解决这个问题？其次，如果我将此方法用作另一种方法的参数，例如

```
foo.multiply(&Vector::subtract(foo, bar), 5) 
```

它还会创建一个副本，还是我只是传递了 Vector::subtract 方法中超出范围的指针？

更一般地说，最好的（或至少有更好的）方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:12:06.700

将指针/引用返回到动态分配的对象绝不是要走的路。一个明显的例子是，如果您的函数被递归调用，那么谁负责取消分配该内存？

我从一本书中读到（Scott Meyers，它是 Effective C++ Item #21），唯一安全的方法是返回对象本身。您可以做的是，IIRC，促进编译器消除这些本质上是临时的对象的工作（从一个函数返回以提供给另一个函数，而不会将每个函数都分配给另一个函数），其中一种方法是使其匿名（又名返回值优化，感谢 In silico 提醒我）。像这样

```
return Vector(outX, outY, outZ); 
```

相对于：

```
Vector v(outX, outY, outZ);
return v; 
```

因此，我为您的减法方法提出的签名归结为：

```
Vector Vector::subtract(const Vector& v, const Vector& u) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T03:15:05.460

> 我刚刚调用了构造函数两次（基本上）有没有办法解决这个问题？

你听说过[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)吗？您无需做任何事情。编译器很可能会为您消除副本。现在，如果您使用 C++11 并且`Vector`该类管理资源，您还可以声明一个移动构造函数，以便移动返回的值，以防编译器确定它无法执行 RVO。但是，看起来该类仅包含 3 个值，如果是这样，复制将与移动一样有效。

> &Vector::subtract(foo, bar)

是`&`为了什么？那是一个错误吗？此外，成员函数未声明`static`，因此语法错误。无论如何，假设`subtract`返回一个副本，它将返回一个副本并将其`multiply`作为参数传递给函数。

另外，另一方面，`Vector* Vector::subtract(const Vector* v, const Vector* u)` 会更好，因为`Vector* Vector::subtract(const Vector& v, const Vector& u)`当您将参数传递给减法等时，这会使语法更清晰。

所以改变你的代码，它看起来像下面这样：

```
Vector Vector::subtract(const Vector& v, const Vector& u)
{
    return Vector(v.myX - u.myX, v.myY - u.myY, v.myZ - u.myZ);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T03:30:41.570

您应该尽可能避免使用指针，不仅在返回类型中，而且在函数的参数中。尽可能首选引用，必要时使用指针。

如果您更改函数以通过引用获取参数并按值返回。当在域中有意义时考虑重载运算符（我相信这里就是这种情况）：

```
class Vector { ... };
Vector operator+( Vector const& lhs, Vector const& rhs ) {
   return Vector( lhs.x+rhs.x, lhs.y+rhs.y, lhs.z+rhs.y );
}
Vector operator*( Vector const& lhs, Vector const& rhs ) { ... } 
```

然后就可以随意连锁操作了：

```
Vector a(...), b(...);
Vector c = (a + b) * c; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T03:14:58.850

如今，大多数编译器都将实现所谓的返回值优化 (RVO) 来解决这个问题。你是对的，除非真的有必要，否则你不应该返回指针。话虽如此，您可能应该使用引用。总而言之，如果我要编写这个方法，我会这样写：

```
Vector Vector::subtract(const Vector& v, const Vector& u)
{
    return Vector(v.myX - u.myX, v.myY - u.myY, v.myZ - u.myZ);
} 
```

# python - Python“可调用”属性（伪属性）

> ID：12505565
> 
> 赞同：2
> 
> 时间：2012-09-20T03:05:33.703
> 
> 标签：python, properties

在 python 中，我可以通过直接分配给属性或通过调用改变属性状态的方法来改变实例的状态：

```
foo.thing = 'baz' 
```

或者：

```
foo.thing('baz') 
```

有没有一种很好的方法来创建一个可以接受上述两种形式的类，这些形式可以扩展到大量以这种方式运行的属性？（简而言之，我将展示一个我不太喜欢的实现示例。）如果您认为这是一个愚蠢的 API，请告诉我，但也许需要一个更具体的示例。说我有`Document`课。 `Document`可以有一个属性`title`。但是，`title`可能也希望有一些状态（字体，字体大小，对齐，...），但普通用户可能会很高兴只需将标题设置为字符串并完成它......

实现此目的的一种方法是：

```
class Title(object):
     def __init__(self,text,font='times',size=12):
         self.text = text
         self.font = font
         self.size = size
     def __call__(self,*text,**kwargs):
         if(text):
             self.text = text[0]
         for k,v in kwargs.items():
             setattr(self,k,v)
     def __str__(self):
         return '<title font={font}, size={size}>{text}</title>'.format(text=self.text,size=self.size,font=self.font)

class Document(object):
     _special_attr = set(['title'])
     def __setattr__(self,k,v):
         if k in self._special_attr and hasattr(self,k):
             getattr(self,k)(v)
         else:
             object.__setattr__(self,k,v)

     def __init__(self,text="",title=""):
         self.title = Title(title)
         self.text = text

     def __str__(self):
         return str(self.title)+'<body>'+self.text+'</body>' 
```

现在我可以按如下方式使用它：

```
doc = Document()
doc.title = "Hello World"
print (str(doc))
doc.title("Goodbye World",font="Helvetica")
print (str(doc)) 
```

这个实现看起来有点混乱（使用`__special_attr`）。也许那是因为这是一个混乱的 API。我不确定。 **有一个更好的方法吗？** 还是我在这条路上走得太远了？

*我意识到我也可以使用`@property`它，但是如果我有多个属性以这种方式运行，那根本无法很好地扩展——我需要为每个属性编写一个 getter 和 setter，哎呀*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T06:49:29.683

这比以前的答案假设的要难一些。

描述符中存储的任何值都将在所有实例之间共享，因此它不是存储每个实例数据的正确位置。此外，`obj.attrib(...)`分两步执行：

```
tmp = obj.attrib
tmp(...) 
```

Python 事先并不*知道*第二步会紧随其后，因此您总是必须返回可调用且具有对*其父*对象的引用的内容。

在以下示例中，`set`参数中隐含了引用：

```
class CallableString(str):
    def __new__(class_, set, value):
        inst = str.__new__(class_, value)
        inst._set = set
        return inst
    def __call__(self, value):
        self._set(value)

class A(object):
    def __init__(self):
        self._attrib = "foo"
    def get_attrib(self):
        return CallableString(self.set_attrib, self._attrib)
    def set_attrib(self, value):
        try:
            value = value._value
        except AttributeError:
            pass
        self._attrib = value
    attrib = property(get_attrib, set_attrib)

a = A()
print a.attrib
a.attrib = "bar"
print a.attrib
a.attrib("baz")
print a.attrib 
```

简而言之：你想要的不能透明地完成。如果你不坚持破解这个限制，你会写出更好的 Python 代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T03:18:06.797

您可以通过简单地创建一个遵循适当规则的[描述符类](http://docs.python.org/howto/descriptor.html)来避免使用[`@property`](http://docs.python.org/library/functions.html#property)潜在的*数百个属性：*

```
# Warning: Untested code ahead
class DocAttribute(object):
    tag_str = "<{tag}{attrs}>{text}</{tag}>"

    def __init__(self, tag_name, default_attrs=None):
        self._tag_name = tag_name
        self._attrs = default_attrs if default_attrs is not None else {}

    def __call__(self, *text, **attrs):
        self._text = "".join(text)
        self._attrs.update(attrs)
        return self

    def __get__(self, instance, cls):
        return self

    def __set__(self, instance, value):
        self._text = value

    def __str__(self):
        # Attrs left as an exercise for the reader
        return self.tag_str.format(tag=self._tag_name, text=self._text) 
```

然后，您可以使用`Document`'s`__setattr__`方法添加基于此类的描述符，如果它在批准名称的白名单中（或者不在禁止名称的黑名单中，具体取决于您的域）：

```
class Document(object):
    # prelude
    def __setattr__(self, name, value):
        if self.is_allowed(name):  # Again, left as an exercise for the reader
            object.__setattr__(self, name, DocAttribute(name)(value)) 
```

# delphi - Delphi - 两种模态形式

> ID：12505572
> 
> 赞同：-2
> 
> 时间：2012-09-20T03:06:45.163
> 
> 标签：delphi

我有一个称为模态表单（B）的主表单（A）。(B) 调用另一种模态形式 (C) 并且它们工作正常

当我添加新的模态表单（D）并从（B）调用它然后当我关闭表单（D）时，表单（B）也关闭了！虽然我确保关闭按钮模式结果 = mrnone

请指教

代码：

```
Form A calling B

B := TB.Create(self);
B.ShowModal;

Form B Calling C
C := TC.Create(self);
C.ShowModal;

Form B Calling D
D := TD.Create(self);
D.ShowModal; 
```

我使用德尔福 2010

添加了更多代码，这是我释放导致问题的表单并使调用者关闭的方式！

```
procedure TForm2.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  action := cafree;
end;

procedure TForm2.FormDestroy(Sender: TObject);
begin
  Form2 := nil;
end; 
```

这就是我显示模态表单的方式

```
procedure Tmymodalfrm.Button1Click(Sender: TObject);
begin
  form2 := Tform2.Create(self);
  form2.ShowModal;
end; 
```

在使用调用堆栈进行跟踪后，我得到了最初创建表单 B 的代码，这很正常：

```
 B := TB.Create(self);
   B.ShowModal; 
```

我很快就要疯了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:30:40.163

发现了问题。调用表单的按钮有一个模态结果 = mrclose !!

# javascript - 如何将 FileReader 对象中的数据转换为表单数据以供上传？

> ID：12505574
> 
> 赞同：9
> 
> 时间：2012-09-20T03:06:48.377
> 
> 标签：javascript, forms, html, xmlhttprequest

我更大的问题是我想使用 HTML5 拖放来允许通过 CORS 将图像上传到我的 S3 存储桶。我能够将一些东西放入 S3，但它总是以看起来是 base64 编码的内容而告终。

```
myFileReader.readAsArrayBuffer(f);
//[...]

function on_onload(file_name, file_type, file_data) {
    // file_name and file_type are bound to the function via a closure,
    // file_data is passed in during the actual callback invocation.
    var xhr = new XMLHttpRequest();
    var fd = new FormData();
    // code that sets AWS credentials for fd omitted

    // _arrayBufferToBase64() just does a binary to base64 conversion 
    // as described in https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string
    fd.append('file', _arrayBufferToBase64(file_data));

    xhr.open('POST', my_aws_bucket_endpoint, true);
    xhr.send(fd);
} 
```

`_arrayBufferToBase64()`只是[这个答案](https://stackoverflow.com/a/9458996/979401)的循环代码。

尝试上传后`foo.jpg`：

```
$ wget [my_uri]/foo.jpg
[...]
HTTP request sent, awaiting response... 200 OK
Length: 295872 (289K) [image/jpeg]
Saving to: 'foo.jpg'

$ file foo.jpg
foo.jpg: ASCII text, with very long lines, with no line terminators

$ head -c 20 foo.jpg
/9j/4AAQSkZJRgABAQEA 
```

如果我尝试按照[此答案](https://stackoverflow.com/a/6142797/979401)`readAsBinaryString()`中的描述使用，然后将返回的数据分配给密钥，则不会发送任何数据，并且最终在我的 S3 存储桶中得到一个零长度文件。`'file'`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T23:31:51.077

回答我自己的问题：

事实证明，您*根本*不需要使用 a [`FileReader`](https://developer.mozilla.org/en-US/docs/DOM/FileReader)。[`File`](https://developer.mozilla.org/en-US/docs/DOM/File)来自事件的对象[`DataTransfer`](https://developer.mozilla.org/en-US/docs/DragDrop/DataTransfer)已经与[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData).

此处提供了一个[示例](http://html5doctor.com/drag-and-drop-to-server/)。

将文件上传到 S3 所需要做的就是在启动到 S3`FormData`之前通过在您的凭据和签名中设置您的凭据和签名来修改该示例[`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)。

# java - java中的双重观察者？

> ID：12505578
> 
> 赞同：0
> 
> 时间：2012-09-20T03:07:16.677
> 
> 标签：java, observer-pattern

我对观察者模式有疑问。
首先，我有一个 HttpHelper 类来从服务器获取数据，我将它用作 Observerable。

```
 public class HttpHelper extends Observable,Runnable{
    public void run(){
      //do long task to get data
      String result = getData();
      setChanged();
      notifyObservers(result);
   }
 } 
```

DataManager 类在完成后从 HttpHerlper 获取数据，然后执行一些业务任务。

```
public class DataManager implements Observer {
    public void doTask(){
    HttpHelper helper = new HttpHelper();
    helper.addObserver(this); 
    Thread thread = new Thread(helper);
    thread.start();
    }
    public void update(Observable obj, Object data) {
       if (data instanceof String) {
         // do some stuff with this data
         // Then I want to notify the result to the view
         Model model = doSomething(data);
         notify(model)
       }
    }
} 
```

最后，View 类将在 DataManager 完成任务时更新数据。

```
 public class View{
       private void getData(){
           DataManager manager = new DataManager()
           manager.doTask();
       }
       public void update(Observable obj, Object data) {

       }
 } 
```

我应该再次使用观察者吗？我该怎么做？
P/s：由于某种原因，HttpHelper 和 DataManager 必须分开。
**更新**：这是类结构 [https://www.dropbox.com/s/givn6vzvqr4cgye/bkd.png](https://www.dropbox.com/s/givn6vzvqr4cgye/bkd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:36:59.107

我认为您可以制作`View`一个，`Observable`但观察链可能会使您的代码复杂。

我的直接解决方案是：

制作一个观察者控制器

```
class Controller implements Observer{
  DataManager dm;
  View v;

  void update(...){
      Data d = dm.getData();
      v.loadData(d);
  }
} 
```

并让你的`Controller`观察`HttpHelper`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:33:31.847

IMO，HttpHelper 和 DataManager 之间的关系不需要观察者模式。似乎只是一个回调，通知经理处理完成。观察者更适合通过公共接口将事件分派给多个不同的侦听器，而不是单个侦听器。话虽如此，你所拥有的将起作用。如果你想听从我的建议，请查看[这篇关于实现回调的文章](http://www.javaworld.com/javatips/jw-javatip10.html)

现在，对于经理和视图之间的关系，我同意您应该使用观察者模式，这将允许您创建对相同事件做出不同反应的不同视图。这意味着它`DataManager`应该扩展`Observable`，并且每个监听它的视图都应该实现`Observer`

最后，我不得不说，如果你打算有不同类型的事件，JDK 的 observable 和 observer (java.util) 机制不是很干净。我最大的批评是 update 的第二个参数是 an `Object`，所以你最终会得到一个巨大的 if else 列表，你需要`instanceof`在你的例子中检查，这通常[不是好的做法](http://www.javapractices.com/topic/TopicAction.do?Id=31)。另一种方法是使用 UI 类（如`EventObject`和`EventListener`）中的事件通知机制，它们是 UI 类的一部分，但实际上比 UI 更通用。看到[另一个问题](https://stackoverflow.com/questions/10897928/how-to-use-java-observers-updateobservable-object-function)

哦，如果可以的话，尽量避免级联事件。它使代码难以阅读和调试。也许视图可以直接观察 HttpHelper？

# iphone - 为什么 drawRect 中的 CGContextDrawImage 最初很慢？

> ID：12505579
> 
> 赞同：3
> 
> 时间：2012-09-20T03:07:17.973
> 
> 标签：iphone, objective-c, ios, core-graphics, drawrect

考虑一个启用 ARC 的 iOS 应用程序中的这个简单的 UIView 子类，它在触摸屏幕时在视图上绘制：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    CGPoint location = [[touches anyObject] locationInView:self];

    int padding = brushSize / 2;

    CGRect brushRect = CGRectMake(
        location.x - padding, location.y - padding,
        brushSize, brushSize
    );

    [self setNeedsDisplayInRect:brushRect];

}

- (void)drawRect:(CGRect)rect {

    NSDate *start = [NSDate date];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextDrawImage(context, rect, brushImage);

    NSLog(@"%f", [start timeIntervalSinceNow]);

} 
```

在本例中，`brushImage`是一个方形位图，`brushSize`是一个描述位图宽度和高度的 int。

我一直得到这样的日志输出：

```
-0.131658
-0.133998
-0.143314
-0.007132
-0.006968
-0.007444
-0.006733
-0.008574
-0.007163
-0.006560
-0.006958 
```

对 drawRect 的第一次调用比随后的调用花费更长的时间来完成，并且 drawRect 此后继续保持快速。只有在视图初始化后的第一次调用中，drawRect 很慢。

我在模拟器和我尝试过的所有物理设备中都看到了类似的结果。最初的调用总是需要更长的时间才能完成。

为什么在初始调用时 drawRect / CGContextDrawImage 这么慢？更重要的是，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:20:27.460

检查矩形。我敢打赌前三个是全屏更新。我之前遇到过这个问题。不管你做什么，IOS都会强制更新前几次全屏（可能是因为它的GL缓冲系统）。如果您将其放置大约 5 秒钟，然后再次绘制某些东西，您将获得相同的行为。我从来没有弄清楚真正的原因是什么，我怀疑我永远不会:(。

请参阅我最初提出的问题： [UIGraphicsGetCurrentContext() short life](https://stackoverflow.com/questions/11186708/uigraphicsgetcurrentcontext-short-lifetime)

# c# - Web 用户控件中的访问类变量

> ID：12505583
> 
> 赞同：2
> 
> 时间：2012-09-20T03:07:55.107
> 
> 标签：c#, asp.net, vb.net

我有一个具有一个属性和大约 6 个公共方法的类（没有什么是静态/共享的）。

我的 aspx 页面将 Class 属性设置为某个值，一旦设置了值，我就可以访问 aspxPage 中的类方法，现在这很好。我的 aspx 页面中有 3 个 web 用户控件，我需要访问这些 web 用户控件中的一些类方法，我真的不想在每个用户控件中创建类的新实例。

例如 url 的类别代码为 25，当 25 传递给 Class 时，Class 有不同的方法来创建面包屑、SEO 友好的 URL 等......并且不同的用户控件与页面正在执行不同的任务，例如 Example Class.CreateMenu、Class。页面标题等

那么，我可以在我的 aspx 页面中建立课程并让我的网络用户控件访问其成员的最佳方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:14:13.153

您必须在`Page_Init`或`Page_Load`方法中实例化类并将其保存到`Session`或`ViewState`以便 *此*引用可用于`user controls`.

```
Session["myObj"]=new MyClass(); 
```

并读取`bounded`对象，

```
if(Session["myObj"]!=null){
 MyClass obj=Session["myObj"] as MyClass;
 if(obj!=null){

 }
} 
```

或者将公共属性/方法添加到每个用户控件。

```
public MyClass Data {get;set;}
protected void Page_Load(object sender, EventArgs e)
{
 if(Data!=null)
  Label1.Text = Data.Foo;
} 
```

并从页面事件处理程序 (Page_Load) 中分配对象引用

```
MyClass obj=new MyClass();
UserControl1.Data=obj;
UserControl2.Data=obj; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T07:38:42.273

**In webusercontroll globally declare below**

```
public int varriable1{ get; set; }

public int varriable2{ get; set; } 
```

**In webusercontroll accessing variable1 and variable2 into variable 1 and 2 respectively**

```
int a=variable1;
int b=variable2; 
```

**In yourpage.aspx passing variable into your webusercontroll**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        PostComments_global1.varriable1= 6; //PostComments_global1 is your webuseruser controll id
        PostComments_global1.varriable2= 6;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:15:40.960

我会处理 - 如果可能的话 - 在你的 .ascx 用户控件中编写处理类的方法，然后调用该方法，将类从 aspx 页面传递给方法。

控件首先呈现，然后在 aspx page 中实际设置类之前，因此您唯一的其他选择是将类变量另存为会话或 cookie 或隐藏字段，正如其他答案所建议的那样。

在 aspx 中，创建用户控件的新实例

```
 <asp:PaymentInformation ID="PaymentInformation1" runat="server" /> 
```

在 aspx 代码后面 - 在 ascx 中调用 TypeofEvent

```
 PaymentInformation1.TypeofEvent(PassClass) 
```

# ruby - Rails 中的类助手

> ID：12505584
> 
> 赞同：0
> 
> 时间：2012-09-20T03:07:56.877
> 
> 标签：ruby, ruby-on-rails-3, helper

我想知道我们是否可以在 Rails 中使用 Helpers 作为类。解释器需要帮助器成为模块，但我希望它作为一个类。

我有两个解决方案：

```
module ModHelper
    class C
    #stuff
    end
end 
```

这迫使我写 ModHelper::C.my_method 而不是 ModHelper.my_method ...

或者 ：

```
module ModHelper
#nothing
end

class C
#stuff
end 
```

这有点脏。

有人有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:18:21.990

我刚刚意识到你可以做到`ShortName = MyModule::UselessName`。

# java - 如何使用 Heroku eclipse 插件？遇到错误

> ID：12505587
> 
> 赞同：0
> 
> 时间：2012-09-20T03:08:15.323
> 
> 标签：java, eclipse, maven, heroku

我正在使用 Heroku eclipse 插件来创建 Heroku 模板。抱歉，我是 Heroku 和 Maven 构建的初学者。我完全不知道如何使用 Heroku 腰带工具来构建应用并将应用推送到服务器，所以我选择了 eclipse 插件。现在我在创建 Heroku 模板后立即遇到错误：

![在此处输入图像描述](../Images/ca5e47f7221b6f30f4646bae56b1cf4a.png)

```
maven-dependency-plugin (goals "copy-dependencies", "unpack") is not supported by m2e.  pom.xml /herokutesting123123    line 48 Maven Project Build Lifecycle Mapping Problem 
```

可能是什么问题呢？

另一个问题是我将如何运行程序？我应该在下面选择哪一个来构建？我认为它应该像我如何使用 Tomcat 一样工作，但我在下面的列表中找不到“在服务器上运行”功能。如何？

![在此处输入图像描述](../Images/23d5a850342a9e3380055b1e84e3eb88.png)

最后一个问题是我如何将应用程序推送到服务器？输入帐户和密码后，我已经获得了 API 密钥，但是在 eclipse 中找不到将应用程序推送到服务器的任何功能。我认为它像 Google App Engine 一样简单，只需单击一下即可。那么，我该如何推送应用程序呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:21:38.633

您可以忽略该错误。这是 Maven Eclipse 插件中的一个错误。要从 Eclipse 运行应用程序，请参阅 webapp-runner 说明：
[https ://github.com/jsimone/webapp-runner#running-your-application-in-eclipse](https://github.com/jsimone/webapp-runner#running-your-application-in-eclipse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T07:52:34.553

正如 James 所提到的，这是 Maven Eclipse 插件的一个错误，但如果您想摆脱该错误，您可以在您`pom.xml`的`pluginManagement`部分添加与此类似的排除项：

[https://github.com/heroku/template-java-jaxrs/commit/1e68c44a4356216d7077738f87ee9b97545d4bb5](https://github.com/heroku/template-java-jaxrs/commit/1e68c44a4356216d7077738f87ee9b97545d4bb5)

至于您的第二个问题，您通过`git push`. 有关如何从 Eclipse 执行此操作的详细信息，请参阅此文档：

[https://devcenter.heroku.com/articles/getting-started-with-heroku-eclipse#deploying-changes-to-heroku](https://devcenter.heroku.com/articles/getting-started-with-heroku-eclipse#deploying-changes-to-heroku)

# java - 在java中设置Web服务器的最简单方法是什么？

> ID：12505589
> 
> 赞同：1
> 
> 时间：2012-09-20T03:08:32.317
> 
> 标签：java, web-services, rest

我在几台机器上运行了服务器守护进程。我决定使用 HTTP 协议公开服务器守护进程的内部统计信息以进行监视和统计。

那么，最简​​单的方法是什么？

*   3rd-party jar 依赖项越少越好。
*   框架越轻越好。
*   复杂性越低越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T15:05:06.047

如果统计数据是少数相当基本的统计数据，并且您不喜欢 HTTP 服务器概念，请使用 JMX。我用它来检测一个守护进程，它非常简单。您可以通过丑陋但可维护的 UI 远程监控（在另一台计算机上）。

[这是一个检测 Web 服务器应用程序的教程](http://www.ibm.com/developerworks/java/library/j-jtp09196/index.html?ca=drs) 可能非常接近您想要的。

[这是远程监控的 StackOverflow 链接](https://stackoverflow.com/questions/834581/remote-jmx-connection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:07:28.743

我所知道的最轻量级的 Java 网络服务器是[Jetty](http://jetty.codehaus.org/jetty/)。如果你使用 maven，你不必为你的项目添加任何依赖，只需将 jetty 作为插件添加：

```
 <plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.26</version>
 </plugin> 
```

然后你可以打电话

```
 mvn jetty:run 
```

在命令行。许多开源项目都嵌入了 jetty 服务器，包括 hadoop。

# opencv - BackgroundSubtractorMOG2 的蒙版

> ID：12505592
> 
> 赞同：9
> 
> 时间：2012-09-20T03:08:51.593
> 
> 标签：opencv, background-subtraction, mog

如何告诉 BackgroundSubtractorMOG2 哪些像素要更新到背景模型，哪些像素不应该。

当有一个物体进入场景并停止十秒钟时，我面临一个问题，该物体将被吸收到背景模型中。

我想降低学习率或停止围绕特定停止对象的学习，但我该怎么做？BackgroundSubtractorMOG2 是否支持在其更新功能中使用遮罩？

我正在使用 OpenCV 2.4.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T10:20:11.050

`BackgroundSubtractorMOG2`不支持屏蔽输入。但是，如果您知道要屏蔽哪些像素，则可以屏蔽输出：假设您已经调用`subtractor(input, fg, learningRate);`并且您以某种方式知道对象现在在哪里（可能是您一直在使用均值偏移或模式识别来跟踪它）只是在`fg |= mask;`哪里`mask`正如您从一些不同的来源所知道的那样，是对象所在的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T23:03:42.080

您可以通过将学习率设置得非常低来实现这一点

IE：

```
mog(input, output, 0.00000001); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-31T14:47:56.407

您可以用背景图像替换蒙面部分：

```
BackgroundSubtractorMOG2 mog_bgs;
.
.
void my_apply(const cv::Mat& img, cv::Mat& fg, const cv::Mat& mask){
  cv::Mat last_bg;
  cv::Mat masked_img = img.clone();
  mog_bgs.getBackgroundImage(last_bg);
  last_bg.copyTo(masked_img, mask);
  mog_bgs.apply(masked_img, fg);
} 
```

或重量蒙面部分：

```
BackgroundSubtractorMOG2 mog_bgs;
.
.
void my_apply(const cv::Mat& img, cv::Mat& fg, const cv::Mat& mask){
  cv::Mat last_bg;
  cv::Mat masked_img = img.clone();
  mog_bgs.getBackgroundImage(last_bg);
  masked_img.forEach<Vec3b>([&](Vec3b& p, const int* position) -> void
    {
        if (mask.at<uchar>(position[0], position[1]) > 0) {
            auto b = last_bg.at<Vec3b>(position[0], position[1]);
            p[0] = p[0]*0.2 + b[0]*0.8;
            p[1] = p[1]*0.2 + b[1]*0.8;
            p[2] = p[2]*0.2 + b[2]*0.8;
        }
    });
  mog_bgs.apply(masked_img, fg);
} 
```

# mysql - 如何限制 MySQL 中的自引用表，使行不能引用自身？

> ID：12505593
> 
> 赞同：3
> 
> 时间：2012-09-20T03:09:13.143
> 
> 标签：mysql, self-referencing-table

这是一个非常基本的表格来说明我的问题。

```
CREATE TABLE Customer (
CustID         INT,
CustLastName   VARCHAR (20),
ReferralID     INT,
ADD CONSTRAINT PRIMARY KEY (CustID),
ADD CONSTRAINT FOREIGN KEY (ReferralID) REFERENCES Customer(CustID)
); 
```

我当前的代码确保只有拥有 CustID 的任何以前的客户都可以在 ReferralID 列中（即他们告诉客户有关商店的信息。）但是，问题是没有什么能阻止 CustID 在同一行中与 ReferralID 相等，这显然是不可能的. 客户不能告诉自己有关商店的信息。

基本上，如何阻止 CustID 和 ReferralID 在同一行中具有相同的值？

谢谢你，安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:15:00.287

为此，您需要一个 CHECK 约束。但是 MySQL 还没有实现 CHECK 约束，所以你可以使用触发器来代替。

**有关的**

*   [MySQL 中的 CHECK 约束不起作用](https://stackoverflow.com/questions/2115497/check-constraint-in-mysql-not-working)

# javascript - 获取对象中的下一个键值对

> ID：12505598
> 
> 赞同：25
> 
> 时间：2012-09-20T03:10:36.800
> 
> 标签：javascript, json, coffeescript, underscore.js

给定一个键，我想在一个对象中找到下一个属性。我不能依赖要排序或顺序的键（它们是 uuid）。请参阅下面的我想要的简单示例：

```
var db = {
  a: 1,
  b: 2,
  c: 3
}

var next = function(db, key) {
  // ???
}

next(db, 'a');  // I want 2
next(db, 'b');  // I want 3 
```

我也想要一个 prev() 函数，但我相信它会是相同的解决方案。

这似乎是一个微不足道的问题，但我一生都无法弄清楚如何去做。

很高兴使用 underscore.js 或用咖啡脚本编写的解决方案 :)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2017-10-25T22:26:22.927

ts/es6 版本。我只是从 storeObject 中获取键，查找下一个索引。

```
 let keys = Object.keys(storeObject);
 let nextIndex = keys.indexOf(theCurrentItem) +1;
 let nextItem = keys[nextIndex]; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-20T04:10:00.210

正确的答案是：你不能这样做，因为[对象按照 ECMAScript 的规范是无序的](https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order)。

我建议您使用有序结构（如数组）来解决问题：

```
var db = [
  {key: 'a', value: 1},
  {key: 'b', value: 2},
  {key: 'c', value: 3}
]; 
```

那么`next`函数可以是这样的：

```
var next = function(db, key) {
  for (var i = 0; i < db.length; i++) {
    if (db[i].key === key) {
      return db[i + 1] && db[i + 1].value;
    }
  }
}; 
```

如果`key`不存在`db`或它是最后一个，则`next`返回`undefined`。如果您永远不会要求最后一项的下一项，您可以通过删除三元`&&`运算符并`db[i + 1].value`直接返回来简化该功能。

您还可以使用一些 Underscore.js 实用方法来`next`简化：

```
var next = function(db, key) {
  var i = _.pluck(db, 'key').indexOf(key);
  return i !== -1 && db[i + 1] && db[i + 1].value;
}; 
```

（在这种情况下有时`next`可能会返回`false`......但它仍然是一个虚假值:)）

* * *

现在，一个更务实的答案可能是，因为大多数浏览器在迭代对象时都会尊重对象的初始化顺序，因此您可以`for in`按照其他答案的建议使用循环对其进行迭代。我建议使用[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)来简化遍历数组的工作：

```
// Assuming that db is an object as defined in the question.
var next = function(db, key) {
  var keys = Object.keys(db)
    , i = keys.indexOf(key);
  return i !== -1 && keys[i + 1] && db[keys[i + 1]];
}; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T03:24:24.770

```
function next(db, key){   
  var found = 0; 
  for(var k in db){
    if(found){ return db[k]; }
    if(k == key){ found = 1; }
  }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-20T03:19:17.857

对此的直接解决方案是将数据存储在一个数组中，并使用该对象简单地将索引存储在对象所在的数组中。

```
var db = {
    data: [1, 2, 3],
    index: {
        a: 0,
        b: 1,
        c: 2
    }
};
function next(db, key) {
    var next = db.index[key] + 1;
    if (next >= db.data.length) {
        return null;
    }
    return db.data[next];
}
function prev(db, key) {
    var next = db.index[key] - 1;
    if (next < 0) {
        return null;
    }
    return db.data[next];
}
function add(db, key, value) {
    db.index[key] = db.data.push(value) - 1;
}
function remove(db, key) {
    var index = db.index[key], x, temp;
    if (index !== undefined) {
        delete db.index[key];
        db.data.splice(index, 1);
        // Update indices of any elements after the removed element
        for (x in db.index) {
            temp = db.index[x];
            if (temp > index) {
                db.index[x] = temp - 1;
            }
        }
    }
} 
```

基本思想是使用有序结构（在本例中为数组）以顺序方式保存数据。在这种情况下，next 和 prev 都是常数时间，add 是摊销常数时间，delete 是 O(N)。

ECMA 标准不保证键的顺序，因此`for/in`不需要按照添加键的顺序（尽管在实践中，这往往是常见的实现）。在这个解决方案中，我使用一个数组来显式地跟踪插入顺序。

编辑：我之前忽略了拼接的删除问题。删除拼接值后，所有值的索引都会变得不正确。该修复不会影响操作的运行时间复杂度。具有较少删除的更快版本可以让数组变得稀疏，而不是拼接，只需将索引设置为 null 以释放存储在那里的任何引用。这会将删除操作降低到 O(1)。

```
function remove(db, key) {
    var index = db.index[key];
    if (index !== undefined) {
        delete db.index[key];
        db.data[index] = null;
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T03:18:20.160

使用 undercore.js，您可以获取对象的键并完成任务。但我不确定键值对是否以任何方式排序：

```
var next = function(db, key) {
    var keys = _.keys(db);
    var index = _.indexOf(keys, key);
    if(index+1<keys.length){
         return db[keys[index+1]];
    }else{
        return null;
    }
} 
```

jsFiddle：http: [//jsfiddle.net/QWhN2/](http://jsfiddle.net/QWhN2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-14T17:22:42.560

我在 2021 年来到这里，所以我将发布一个 Es6 解决方案。

一个简单的解决方案，可让您在给定起始键的情况下导航对象：

```
const navObj = (obj, currentKey, direction) => {
    return Object.values(obj)[Object.keys(obj).indexOf(currentKey) + direction];
};

const db = {
  a: 1,
  b: 2,
  c: 3
};

console.log(navObj(db, 'a', 1));
console.log(navObj(db, 'a', 2));
console.log(navObj(db, 'b', -1)); 
```

# c# - 初学者头痛：来自 ASP.NET webfrom 上的数组的 NullReferenceException

> ID：12505601
> 
> 赞同：0
> 
> 时间：2012-09-20T03:11:11.397
> 
> 标签：c#, asp.net, arrays, nullreferenceexception

我为我的 ASP.NET 班级创建了一个程序来创建班级名称和编号，然后输入十个学生姓名和学生 ID。所以我的网页会提示用户输入这 4 条信息，将它们分为**MyClass（课程名称和编号）**和**Student 班级（其中包含学生姓名和 ID）**。我非常卡在 NullReferenceException 错误上，不知道该怎么做。如果这里有人可以给我一些指示和方向，那么我可以从这项任务中振作起来。有一件事是肯定的，我**不允许**输入任何新的方法和变量。我只能使用我已经初始化的当前那些。

*   Student[] 数组是保存我的 Student 类的数组，其中包含学生的姓名和 id。
*   用户首先将创建班级编号和姓名，然后在其中添加学生（带有 ID 和姓名）。
*   只允许 1 个班级名称和编号（他们一起去），最多只能有 10 名学生。

***我在 MyClass 中的 ToString() 方法中遇到空异常，其中 classNumberAndName += ((Student)students[i]).ToString();***

这是我的代码，没有语法错误。

```
public class MyClass
{
    private string courseNumber;
    private string courseName;
    private int numberOfStudents;
    private Student[] students;       
    public MyClass(string CourseNumber , string CourseName, Student[] Student)
    {
        students = new Student[Student.Length];
        courseNumber = CourseNumber;
        courseName = CourseName;
        for (int i = 0; i < Student.Length; i++)
        {
            Student tmpArrayStudent = new Student(((Student)students[i]).ToString(),((Student)students[i]).ToString());
            tmpArrayStudent = students[i];
        }
    }   
    public MyClass(string CourseNumber, string CourseName)
    {
        courseNumber = CourseNumber;
        courseName = CourseName;
        students = new Student[10];
    }
    public void addAStudent(Student student)
    {//possible to create temp array?
        Student[] students = new Student[10];
        if(numberOfStudents < students.Length)
        {
            students[numberOfStudents] = student;
            numberOfStudents++;
        }
        else
        {
            throw new Exception("Amount of Students Exceeded, no more than 10");
        }
    }
    public string getClassNumberAndName()
    {
        return "Course Number: " + courseNumber + "   " + " Course Name: " + courseName;
    }
    public override string ToString()
    {
        string classNumberAndName = getClassNumberAndName();
        for(int i = 0; i < students.Length; i++)
        {
            classNumberAndName += ((Student)students[i]).ToString();
        }
        classNumberAndName += "Students Registered: " + numberOfStudents.ToString();
        return classNumberAndName;
    }
}

public class Student
{
    private string idNumber;
    private string name;
    public Student(string ID, string Name)
    {
        idNumber = ID;
        name = Name;
    }
    public override string ToString()
    {
        return "Student ID: " + idNumber + " " + " Student Name " + name;
    }       
} 
```

这是 Web 代码的 .aspx.cs 文件。

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if(!IsPostBack)
        {
            pnlStudent.Visible = false;//use panels to disable the ability to enter new course information
        }
    }
    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        MyClass course = new MyClass(txtCnum.Text, txtCname.Text);
        Session.Add("Course", course);
        ((MyClass)Session["Course"]).addAStudent(new Student(txtCnum.Text, txtCname.Text));//since we entered to Student, course information or student information?

        txtAnswers.Text += course.ToString();

        pnlStudent.Visible = true;
    }
    protected void btnAdd_Click(object sender, EventArgs e)
    {
        Student student = new Student(txtID.Text, txtName.Text);
        pnlCourse.Visible = false;
        try
        {
            ((MyClass)Session["Course"]).addAStudent(new Student(txtID.Text, txtName.Text));
            txtAnswers.Text += Session["Course"].ToString();
        }
        catch(Exception ex)
        {
            txtAnswers.Text += "Amount of students are at maximum." + ex.Message;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:41:10.907

问题出在这个循环中：

```
for(int i = 0; i < students.Length; i++)
{
    classNumberAndName += ((Student)students[i]).ToString();
} 
```

即使您插入的学生数量少于学生`students = new Student[10]`，您`students.Length`也正在初始化学生。你没有填写的值是，所以你最终做了，因此.`10``10``null``null.ToString``NullReferenceException`

我相信你应该`numberOfStudents`改用：

```
for(int i = 0; i < numberOfStudents; i++)
{
    classNumberAndName += ((Student)students[i]).ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:39:19.893

您可能需要一个空的构造函数用于将 ID 和 Name 初始化为默认（空）值的 Student 类。像 public Student(){ID=-1;Name=String.Empty}
或者你没有初始化数组 - 取自微软的网站......

初始化数组

……

注意 如果在声明时未初始化数组，则数组成员会自动初始化为数组类型的默认初始值。此外，如果将数组声明为类型的字段，则在实例化该类型时会将其设置为默认值 null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:40:09.893

您有恒定长度的学生列表。你枚举它，但是我看不到你填充了数组中的所有项目，所以有你的 NullReferanceException。这将有助于：

```
public override string ToString()
{
    string classNumberAndName = getClassNumberAndName();
    for(int i = 0; i < students.Length; i++)
    {
        if (students[i] != null)
            classNumberAndName += ((Student)students[i]).ToString();
    }
    classNumberAndName += "Students Registered: " + numberOfStudents.ToString();
    return classNumberAndName;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T03:31:59.507

MyClass.ToString() 方法你应该检查数组是否为空，如果是则打破循环

这里的代码

```
public override string ToString() 
```

{ string classNumberAndName = getClassNumberAndName();

```
for (int i = 0; i < students.Length; i++)
{
    if (students[i] == null) break;
    classNumberAndName += ((Student)students[i]).ToString();
}
classNumberAndName += "Students Registered: " + numberOfStudents.ToString();
return classNumberAndName; 
```

}

注意：您必须在 addAStudent 方法中删除 Student[] students = new Student[10]

谢谢

# javascript - 在 Firefox 中缓慢突出显示

> ID：12505602
> 
> 赞同：2
> 
> 时间：2012-09-20T03:11:17.817
> 
> 标签：javascript, html, firefox, range, highlighting

我们需要为 html 页面中的一些关键字/句子添加锚点和高亮。事实证明，在 Firefox 中突出显示真的很慢。

在以下代码中，所有需要突出显示的范围都存储在数组中`hiliteRanges`：

```
for (var i = 0; i < hiliteRanges.length; i++){
    document.designMode = "on";

    var selHilites = window.getSelection();

    if (selHilites.rangeCount > 0)
        selHilites.removeAllRanges();

    selHilites.addRange(hiliteRanges[i]);

    var anchorId = 'index'+i;
    var insertedHTML = '<span id="' + anchorId + '" style="background-color: #FF8C00;" >'+hiliteRanges[i].toString()+'</span>';

    document.execCommand('inserthtml', false, insertedHTML);                                                                                    
    document.designMode = "off";
} 
```

有什么方法可以加快处理速度吗？我们可以在数组中有数百个范围`hiliteRanges`。我们曾经尝试将`designMode`设置移到循环之外，但是当循环运行时，我们可以看到 html 页面中的某些部分是可编辑的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:19:21.523

这是我的默认突出显示片段，在每个浏览器中都可以正常工作。试试看。

**演示：http:** [//jsbin.com/adeneh/1/edit](http://jsbin.com/adeneh/1/edit)

```
function highlight(text, words, tag) {

  // Default tag if no tag is provided
  tag = tag || 'span';

  var i, len = words.length, re;
  for (i = 0; i < len; i++) {
    // Global regex to highlight all matches
    re = new RegExp(words[i], 'g');
    if (re.test(text)) {
      text = text.replace(re, '<'+ tag +' class="highlight">$&</'+ tag +'>');
    }
  }

  return text;
}

// Usage:
var el = document.getElementById('element');
el.innerHTML = highlight(
  el.innerHTML, 
  ['word1', 'word2', 'phrase one', 'phrase two', ...]
); 
```

并取消突出显示：

```
function unhighlight(text, tag) {
  // Default tag if no tag is provided
  tag = tag || 'span';
  var re = new RegExp('(<'+ tag +'.+?>|<\/'+ tag +'>)', 'g');
  return text.replace(re, '');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:50:56.840

没有必要为此使用`document.execCommand()`。只需使用 range 方法，然后就不需要`designMode`.

```
var anchorId, hiliteTextNode, hiliteSpan;
for (var i = 0; i < hiliteRanges.length; i++){
    // Create the highlight element
    hiliteSpan = document.createElement("span");
    hiliteSpan.id = anchorId;
    hiliteSpan.style.backgroundColor = "#FF8C00";

    hiliteTextNode = document.createTextNode(hiliteRanges[i].toString());
    hiliteSpan.appendChild(hiliteTextNode);

    // Replace the range content
    hiliteRanges[i].deleteContents();
    hiliteRanges[i].insertNode(hiliteSpan);
} 
```

此外，由于范围受 DOM 突变的影响，我建议您在收集范围的同时执行此部分`window.find()`。这是一个例子：

[http://jsfiddle.net/YgFjT/](http://jsfiddle.net/YgFjT/)

# clojure - 如何将地图解构为键和值

> ID：12505603
> 
> 赞同：7
> 
> 时间：2012-09-20T03:11:18.823
> 
> 标签：clojure

有没有办法解构键值对？我有一个将地图作为参数的函数，我想提取参数本身的键值和值。我怎么做 ？

我可以使用矢量执行以下操作 -

> ((fn [[ab]] (str ab)) [ab])

我如何对地图做同样/相似的事情 -

> ((fn[{kv}] (str kv)) {kv})

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-20T03:38:55.883

函数 arg 列表中的映射解构旨在从映射中提取某些键并为其命名，如下所示：

```
core> (defn foo [{my-a :a my-b :b}] {my-a my-b})
core/foo                                                                                     
core> (foo {:a 1 :b 2})
{1 2} 
```

我推荐[这个教程](http://blog.jayfields.com/2010/07/clojure-destructuring.html)。给出一个直接的等价物有点困难，`((fn[{k v}] (str k v)) {k v})`因为映射可能有许多键和许多值，因此解构代码将无法判断您在哪里寻找哪个键和值。按键解构更容易推理。

如果您想任意选择映射中的第一个条目，您可以提取它并在单个映射条目上使用列表解构形式：

```
core> (defn foo [[k v]] {v k})
#'core/foo                                                                                     
core> (foo (first {1 2}))
{2 1} 
```

在此示例中，使用列表解构形式`[k v]`，因为首先将第一个映射条目作为向量返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T04:24:53.660

有可用于解构地图的快捷方式。例如，如果您正在寻找特定的键，那么您不必输入 name1 :key1 name1 :key2...

例如

```
main=> (defn fbb [{:keys [foo bar baz]}] (+ foo bar baz))
#'main/fbb
main=> (fbb {:foo 2 :bar 3 :baz 4}) 
9 
```

代替...

```
(defn fbb [{foo :foo bar :bar baz :baz}] (+ foo bar baz)) 
```

如果您的地图键是字符串，您可以说`:strs`代替，`:keys`如果它们是符号，您可以使用`:syms`.

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-20T04:01:23.680

```
user=> (for [x (hash-map :a 1 :b 2 :c 3)] (str (first x) " " (second x)))
(":a 1" ":c 3" ":b 2") 
```

# c - 需要帮助找到数组中的唯一值

> ID：12505607
> 
> 赞同：0
> 
> 时间：2012-09-20T03:11:54.873
> 
> 标签：c, arrays, search

我的代码是完整的减去一个小缺陷。它搜索数组并打印出哪些值是唯一的，但是它总是将第一个条目视为唯一的，即使它后面跟着相同的值。任何人都可以查看我的代码并告诉我哪个部分搞砸了，因为它让我发疯。

```
 #include <stdio.h>
    #define size 7
    int main(void)
    {
        int array1[size], target, answer, found, x, k, prev, count =1, i;

        printf("Please input %d integers: ", size);
        scanf("%d", &target);

        for(x = 0; x < size; x++)
        {
             scanf("%d", &array1[x]);

        }

        prev = array1[0];

        for (i = 1; i < size; i++) 
        {
             if (array1[i] == prev) 
             {
                 count++;
             } 
             else 
             {
                 if (count < 2)
                     printf("%d=%d\n", prev, count);
                 prev = array1[i];
                 count = 1;
             }

        }

        if (count < 2)
        {
             printf("%d=%d\n", prev, count);
        }

        return 0;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:35:11.517

好的，无法抗拒只发布此存根以保持不同频率计数的诱惑。

```
int countFreq(int data[])
{
   int freq[size];

   for(int x=0; x<size; x++)
   { 
      freq[data[x]]++;
   }

   for(int y=0; y<size; y++)
   {
      if (freq[y]==1)
        printf("Unique value: %i",y);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:31:02.423

我对您的代码感到困惑，但错误很明显。例如，如果输入数组是`9 8 7 9 8 7 9`，那么`prev`在第一次迭代时应该是 9，而当`i == 1`,`prev == array1[i]`是假的。我们来到 else 子句，当然`count`是`1`现在。我建议你重写整个事情......要么构建一个数组来存储每个条目的频率，要么对数组进行排序。

# bash - 变量内的 Shell 脚本变量

> ID：12505609
> 
> 赞同：0
> 
> 时间：2012-09-20T03:12:30.517
> 
> 标签：bash, shell, variables

我正在编写一个shell脚本，如下所示。

```
#/bin/bash

ip1="1.1.1.1"
ip2="2.2.2.2"

for ((i=1; i<=2; i++))
do
echo "$[ip$i]"

done 
```

运行后我得到错误。
./1.sh：第 8 行：1.1.1.1：语法错误：算术运算符无效（错误标记为“.1.1.1”）

太感谢了 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:40:31.513

使用间接变量扩展。

```
#/bin/bash

ip1="1.1.1.1"
ip2="2.2.2.2"

for ((i=1; i<=2; i++))
do
  var="ip$i"
  echo "${!var}"
done 
```

但是，更好的主意是使用数组。

```
ips=( "1.1.1.1" "2.2.2.2" )
for ip in "${ips[@]}"; do
   echo "$ip"
done

for ((i=1; i<=${#ip[@]}; i++)); do
   echo "${ips[i]}"
done 
```

# objective-c - 在 CoreData 中保存来自 WCF 服务的记录

> ID：12505611
> 
> 赞同：0
> 
> 时间：2012-09-20T03:12:38.220
> 
> 标签：objective-c, core-data, sqlite, sudzc

我也是 iOS 开发和 CoreData 的新手。我正在调用 .Net WCF 服务以在我的应用程序的 UITableViewcontroller 中显示数据。我将这些数据保存在 CoreData 中。当我在服务器上添加新记录时，我希望它显示在 UITableViewController 中并保存在 CoreData 中。但这不会发生。我必须在模拟器上执行“重置内容和设置”，然后运行应用程序再次。当我这样做时，应用程序显示来自服务的最新记录。它还将新记录保存在 CoreData 中。我使用 SUDZC 与 wcf 服务交互。调用服务的代码，在 UITableViewController 中显示数据并将其保存到CoreData 看起来像这样：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
     self.detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];

    [my_table setDataSource:self];
    [my_table setDelegate:self];

     EDViPadDocSyncService *service = [[EDViPadDocSyncService alloc]init];
     [service getAllCategories:self action:@selector(handleGetAllCategories:)];

}

-(void)handleGetAllCategories:(id)value
{
    if([value isKindOfClass:[NSError class]])
    {
        NSLog(@"This is an error %@",value);
        return;
    }

    if([value isKindOfClass:[SoapFault class]])
    {
        NSLog(@"this is a soap fault %@",value);
        return;
    }
    NSMutableArray *result = (NSMutableArray*)value;

    self.myData = [[NSMutableArray array] init];//array for storing 'category name'
    self.catId = [[NSMutableArray array]init];//array for storing 'category ID'    

    self.myData=[self getCategories];

    /*store data in Core Data - START*/
    NSMutableArray *coreDataCategoryarray = [[NSMutableArray alloc]init];
    NSManagedObjectContext *context = [self managedObjectContext];
    Categories *newCategory;//this is the CoreData 'Category' object
    for(int j=0;j<[result count];j++)
    {
        EDVCategory *edvCat = [[EDVCategory alloc]init];//this is the SUDZC 'Category' object
        edvCat = [result objectAtIndex:j];

        if ([self.catId count]>0) {
                for (int i=0; i<[self.catId count]; i++) {

                    if ([edvCat categoryId] == [[self.catId objectAtIndex:i] integerValue]) {
                        checkFlag=TRUE;
                    }
                }
        }
        if (checkFlag == FALSE) {
            newCategory = [NSEntityDescription insertNewObjectForEntityForName:@"Categories" inManagedObjectContext:context];
            [newCategory setCategoryId:[NSNumber numberWithInt:[edvCat categoryId]]];
            [newCategory setCategoryName:edvCat.categoryName];
            [newCategory setDocCount:[NSNumber numberWithInt:[edvCat docCount]]];
            [newCategory setCategoryType:[NSNumber numberWithShort:[edvCat categoryType]]];
            [newCategory setSubCategoryId:[NSNumber numberWithInt:[edvCat subCategoryId]]];
            [coreDataCategoryarray addObject:newCategory];
        }
    }
    /*store data in Core Data - END*/

    NSError *error = nil;
    if (![context save:&error])
    {
        [coreDataCategoryarray release];
    }
    else
    {
        //return [coreDataCategoryarray autorelease];
        [coreDataCategoryarray autorelease];
    }
    self.myData=[self getCategories];
    [my_table reloadData]; 
}

-(NSMutableArray *)getCategories
{
    NSFetchRequest  *request = [[[NSFetchRequest alloc] init]autorelease];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Categories" inManagedObjectContext:__managedObjectContext];

    NSSortDescriptor *sortByName = [[[NSSortDescriptor alloc] initWithKey:@"categoryId" ascending:YES] autorelease];
    [request setSortDescriptors:[NSArray arrayWithObject:sortByName]];

    [request setEntity:entity];
    entity = nil;

    NSError *error = nil;
    NSMutableArray *fetchResults = [[__managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    [request setReturnsObjectsAsFaults:NO];

    NSManagedObject *aTabrss;
    NSMutableArray *arForGetCategory=[[NSMutableArray alloc]init];

    for (aTabrss in fetchResults){
        [arForGetCategory addObject:[aTabrss valueForKey:@"categoryName"]];
        [self.catId addObject:[aTabrss valueForKey:@"categoryId"]];
    }
    return (arForGetCategory);
} 
```

我应该在我的代码中进行哪些更改，以便它反映来自服务的最新数据并同时将其保存到 CoreData(sqlite)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:15:17.433

看起来您真正需要的类是 NSUserDefaults：http:
[//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

# jquery - 想要从 jquery ajax 返回中识别 javascript 中的服务器端异常

> ID：12505613
> 
> 赞同：1
> 
> 时间：2012-09-20T03:12:47.173
> 
> 标签：jquery, .net, asp.net-mvc

我需要确定存在异常并以某种方式显示在页面中，通过 JQuery 使用 ajax 它不显示任何内容（当然，因为我没有开发它）

关键是，更快的方法是什么？我不想在我的实体上提高一个级别以创建一个“IsError”字段......不是机会，我也不想设置状态代码错误来在 ui 端处理它，只想将其标识为javascript ajax 返回端的异常并按我想要的任何方向管理它。

```
 function PostSomething() {
            var someData = "name=joe";
            $.ajax({
                type: 'POST',
                url: '/SomeController/SomeAction/',
                data: someData,
                success: function (msg) {
                    for (i = 0; i < msg.length; i++) {
                        $('#someCombo').append(new Option(msg[i].TheName, msg[i].ID, false, true));
                    }
                    $("#someCombo").focus();
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:16:45.717

你可以设置`error`属性。

```
 function PostSomething() {
        var someData = "name=joe";
        $.ajax({
            type: 'POST',
            url: '/SomeController/SomeAction/',
            data: someData,
            success: function (msg) {
                for (i = 0; i < msg.length; i++) {
                    $('#someCombo').append(new Option(msg[i].TheName, msg[i].ID, false, true));
                }
                $("#someCombo").focus();
            },
            error: function () {
                console.log('something is wrong'); 
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:22:40.890

如果您正在寻找某个状态码...比如说 404 或 500，您可以以不同的方式处理它们...

```
$.ajax({
  success: function(){
    alert("it worked");
  },
  statusCode: {
    404: function() {
      alert("page not found");
    },
    500: function() {
      alert("server error");
    }
  }
}); 
```

# javascript - 检测 iPhone 5 及其下方的任何 iOS 设备

> ID：12505618
> 
> 赞同：5
> 
> 时间：2012-09-20T03:14:51.507
> 
> 标签：javascript, iphone, ios5, ios4, user-agent

在 SO 上提出了一个[关于iPhone 4 用户代理和](https://stackoverflow.com/questions/3105555/what-is-the-iphone-4-user-agent)[iOS 5.0](https://stackoverflow.com/questions/7825873/what-is-the-ios-5-0-user-agent-string)用户代理的问题。

我使用以下内容来检测不同的移动设备、视口和屏幕。

我希望能够区分 iPhone 5 和所有其他 iOS 设备。据我所知，我用来检测 iOS 5.0 用户代理的行`var iPhone5`也适用于任何运行 iOS 5.0 的 iOS 设备，所以从技术上讲它是不正确的。

```
var pixelRatio = window.devicePixelRatio || 1;

var viewport = {
    width: window.innerWidth,
    height: window.innerHeight
};

var screen = {
    width: window.screen.availWidth * pixelRatio,
    height: window.screen.availHeight * pixelRatio
};

var iPhone = /iPhone/i.test(navigator.userAgent);
var iPhone4 = (iPhone && pixelRatio == 2);
var iPhone5 = /iPhone OS 5_0/i.test(navigator.userAgent); // ?
var iPad = /iPad/i.test(navigator.userAgent);
var android = /android/i.test(navigator.userAgent);
var webos = /hpwos/i.test(navigator.userAgent);
var iOS = iPhone || iPad;
var mobile = iOS || android || webos; 
```

`window.devicePixelRatio`是设备上的物理像素和与设备无关的像素 (dip) 之间的比率。`window.devicePixelRatio`=物理像素/下降。

更多信息[在这里](http://www.quirksmode.org/blog/archives/2012/06/devicepixelrati.html)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T22:06:22.597

为什么不根据屏幕对象检测-

```
screen.availWidth
screen.availHeight 
```

在我的 iPhone 5 上，它报告 320 宽度和 548 高度，这是它在非视网膜形式的分辨率。

您不应该使用 window.innerWidth 和 window.innerHeight 因为它报告视口大小。如果页面被放大，它将报告放大区域的大小，而不是可用屏幕的正确大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-13T07:42:54.673

2行就足够了：

```
var iphone4 = (window.screen.height == (960 / 2));
var iphone5 = (window.screen.height == (1136 / 2)); 
```

# android - 如何在 Android 中使用拉解析器解析 XML

> ID：12505619
> 
> 赞同：-1
> 
> 时间：2012-09-20T03:14:55.903
> 
> 标签：android, parsexml

我有 XML：

```
 <?xml version="1.0" encoding="UTF-8"?>
          <categories type="array">
               <category>
                    <category_id>8</category_id>
                    <category_name>Công Nghệ  & Xe</category_name>
                    <category_code>cong-nghe-xe</category_code>
                    <subcategory>
                         <category_id>59</category_id>
                         <category_name>Kiến trúc - thủ thuật</category_name>
                         <category_code>cong-nghe-xe_kien-thuc-thu-thuat</category_code>
                    </subcategory>
                    .................................................
               </category>
               ................................................. 
          </categories> 
```

我如何阅读它并在 Android 中填充 ListView，我应该怎么做：DOM、XML Parser 或 SAX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:34:39.357

对于像这样的小片段，我更喜欢 DOM。

```
String xml;
Document doc;
Element root = null;
try {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    doc = builder.parse( new InputSource( new StringReader( xml ) ) );
    root = doc.getDocumentElement();
} catch ( Exception e ) {
    // do something
}

if( root != null ) {
    NodeList cats = root.getElementsByTagName( "category" );
    for( int i=0; i < cats.getLength(); i++ ) {
    Element category = (Element)cats.item( i );
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:37:45.917

你试过Android的例子吗？

[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

# iphone - MKMapItem 在 iOS 5 中被识别？

> ID：12505624
> 
> 赞同：2
> 
> 时间：2012-09-20T03:15:10.600
> 
> 标签：iphone, mkmapitem

所以我使用 NSClassFromString 来检查用户是否安装了 iOS 5 或 iOS 6 以使用 Apple 的新 iOS 6 MKMapItem。这是代码：

```
- (void)openDirections:(id)sender {
    Class mapClass = NSClassFromString(@"MKMapItem"); 

    if (mapClass == nil) {
    // iOS 5, do something here
    }
    else {
    // iOS 6, open up maps with MKMapItem.
    }
} 
```

通过上面的代码，当我在 iOS 5.1 模拟器或 iOS 5.1 设备上运行它时，iOS 6 分支就会运行。但是，如果我使用

```
Class mapClass = NSClassFromString(@"PKPass"); 
```

这也是在 iOS 6 中引入的，我的代码遵循相应的 iOS 5 或 iOS 6 分支。我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T03:23:05.470

`MKMapItem`存在于 iOS 的早期版本中，因为它当时正在开发中，因此该类存在。相反，Apple 建议您应该使用以下代码同时检查他们在 iOS 6.0 中专门添加的方法：

```
Class itemClass = [MKMapItem class];
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
   // Use class
} 
```

来自[MKMapItem 类参考的信息](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html)

# hbase - 在 Flume NG 中使用 HBaseSink 时可以自定义行键模式吗？

> ID：12505626
> 
> 赞同：0
> 
> 时间：2012-09-20T03:15:37.377
> 
> 标签：hbase, flume

我正在尝试使用 Flume NG 将文本文件中的日志收集到 HBase。日志文件中的每一行都是 JSON 文本，我将它们作为值插入到 HBase 表中。问题是我不知道如何自定义行键模式。例如，当我计算表中的行数时：

```
hbase(main):001:0> count 'flume-ng-test', 100000
Current count: 100000, row: default32e473e0-4f54-48b5-8081-c3f845b38456         
Current count: 200000, row: default65b0cc3d-5421-4bb1-87e2-b21c2841fcd6         
Current count: 300000, row: default98be85e3-bb9f-402e-8f36-0db74cb8ab44         
Current count: 400000, row: defaultcbf888dc-e2bb-492f-ab17-63f5e0327344         
Current count: 500000, row: defaultfedc40e5-04b4-49a4-8734-655f43956d6e         
502224 row(s) in 8.1540 seconds 
```

行键是`default + UUID_like_string`. 如果我想使用当前时间戳（升序或降序）更改行键模式，我应该怎么做？

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T12:14:49.600

在 flume-ng 的 HBase sink 中，`HbaseEventSerializer`实现负责生成行键。默认实现`org.apache.flume.sink.hbase.SimpleHbaseEventSerializer`已经支持以 format 生成时间戳行键`prefix + current timestamp`，使用它只需相应地修改您的水槽配置。

```
hbase-agent.sinks.sink1.type = org.apache.flume.sink.hbase.HBaseSink
hbase-agent.sinks.sink1.channel = ch1
hbase-agent.sinks.sink1.table = demo
hbase-agent.sinks.sink1.columnFamily = cf
hbase-agent.sinks.sink1.serializer = org.apache.flume.sink.hbase.SimpleHbaseEventSerializer
hbase-agent.sinks.sink1.serializer.payloadColumn = col1
hbase-agent.sinks.sink1.serializer.keyType = timestamp 
```

如果提供的基于时间戳的密钥生成方法不是您所追求的，那么您需要为`HbaseEventSerializer`Flume 提供自定义实现，这将要求您：

1.  创建自己的行键生成器类（默认是`org.apache.flume.sink.hbase.SimpleRowKeyGenerator`）
2.  创建您自己的`HbaseEventSerializer`接口实现（默认实现是`org.apache.flume.sink.hbase.SimpleHbaseEventSerializer`），它将使用您在第一步中创建的自定义行键生成器
3.  修改您的水槽 hbase 接收器配置以使用自定义`HbaseEventSerializer`实现。

# java - 使用 pom.xml 设置 Spring MVC，带有 slfj 日志记录和泄漏

> ID：12505629
> 
> 赞同：1
> 
> 时间：2012-09-20T03:15:59.117
> 
> 标签：java, spring, spring-mvc, slf4j

以下是我的 pom.xml 中的内容，有什么意见或改进吗？（这是一个spring mvc应用程序）

我是否还需要排除公共日志才能使用 slf4j？

```
<!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>${org.springframework-version}</version>
    </dependency> 
```

我已经在这样的项目中使用了大约 1 年，并且不确定事情是否发生了变化或需要更新（尤其是在设置日志记录方面）。

我讨厌的一件事是在使用 IntelliJ 和 jetty（每 x 秒重新加载项目）时，我得到 java 内存不足（perm gen）错误，我相信这是因为 spring 框架中的日志记录泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:52:12.400

`commons-logging`仅当已包含时才应排除`jcl-over-slf4j`。有关更多信息，请参阅：http: [//static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html#d0e787](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html#d0e787) 关于泄漏：据我所知，没有适当的修复-您可以增加内存，但稍后会崩溃。这是[JRebel](http://zeroturnaround.com/software/jrebel/)可能有助于减少的问题之一。

# objective-c - UIViewController Objective-C 中的自定义表格

> ID：12505633
> 
> 赞同：0
> 
> 时间：2012-09-20T03:16:40.567
> 
> 标签：objective-c, xcode, uitableview

我想在 UIViewController 中创建表格视图，如下图所示（我的意思是第二个屏幕）

![在此处输入图像描述](../Images/24ada45c30c6db9a1b007e5116006c36.png)

什么是最好的解决方案？“创建 UIViewController 然后 tableView 和 tableView 内部有自定义单元格”？

你能给我一些提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:29:09.120

所以基本上你希望 tableview 不填满整个空间。是的，你当然可以`UIViewController`，让它实现`UITableViewDelegate`和`UITableViewDataSource`协议，放入一个表格视图并连接协议，并使用自定义单元格。

如果您只希望 tableview 不水平填充空间（但它仍然可以一直滚动直到到达您的导航栏），那么您可以创建一个`UITableViewController`，并以您想要的方式设置您的单元格背景。更具体地说，您仍然创建 640 像素（或 320 像素）宽的背景图像，但只有中央 600 像素被填充。左右 20 像素是透明的。（当然，您需要 png 来执行此操作）如果您将此背景应用于您的单元格并为您的 应用另一个背景`self.view`，那么您实际上可以在两侧 20px 下看到您的视图背景。

请注意，如果您选择第二种方法，单元格仍然是全宽的；只是您在视觉上使它们看起来更窄。没关系，但是您也需要自定义突出显示的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:43:40.600

查看您的图片，您似乎需要创建 UINavigation Controller 作为父视图控制器并将 UITabBarViewController 添加为其根视图。然后在您的第二个选项卡中，当您单击表格内的单元格时，您将视图推送到显示您的图片的另一个视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T05:35:55.910

创建一个标签栏控制器项目。每个标签栏项目都将是一个导航控制器。

Tat 方式你可以管理导航和标签。

# wordpress - 将域映射到 WordPress 页面

> ID：12505635
> 
> 赞同：2
> 
> 时间：2012-09-20T03:16:57.483
> 
> 标签：wordpress, plesk, domain-mapping

有没有办法将域名映射到 WordPress**页面**？

例如，如果我有 mydomain.com/about/bio 和 mydomain.com/about/resume，是否可以将 anotherdomain.com 映射到 about 页面，以便使用 anotherdomain.com/bio 和 anotherdomain.com/resume？

另外，我也可以用子域来做吗？

使用上面相同的示例，我可以将 about.anotherdomain.com 映射到 mydomain.com/about 吗？

使用 WordPress，这些不是物理文件夹。它们是非常固定的链接，所以我很难弄清楚如何使这项工作。

我们有一个 Plesk 控制面板。

感谢您提供的任何见解！

## 编辑：

我想映射到 URL 不同部分的域可能是从不同的提供商那里注册的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T13:46:44.753

您可以使用该`.htaccess`文件来实现这一点....

只需将您的域名的 A 记录指向您的域。现在执行以下操作...

```
RewriteCond %{HTTP_HOST} ^(www.)?mydomain.com
Rewriterule ^(.*)$ http://mydomain.com/about/bio [L]

RewriteCond %{HTTP_HOST} ^(www.)?myresumedomain.com
Rewriterule ^(.*)$ http://myresumedomain.com/about/resume [L]

RewriteCond %{HTTP_HOST} ^(www.)?anotherdomain.com
Rewriterule ^(.*)$ http://anotherdomain.com/bio [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:59:00.660

您可以探索两种可能性：

**A/**使用 plesk（或其他注册商），您可以尝试**通配符**重定向，例如：

```
anotherdomain.com -> mydomain.com/about  // with "wildcard" set to "yes". 
```

**B/**如果失败，您可以创建一个简单的重定向（anotherdomain.com -> mydomain.com），然后在 WordPress（假设它位于 mydomain.com）中，使用[重定向插件](http://wordpress.org/extend/plugins/redirection/)手动重定向单个 URL 。

您将创建单独的规则，例如：

```
anotherdomain.com/bio -> mydomain.com/about/bio 
```

**C/**最后，WordPress 已经非常擅长重定向损坏的链接，您可能只需将 anotherdomain.com 重定向到 mydomain.com 并在输入近似 URL 时查看 wordpress 是否提供正确的页面即可。

```
anotherdomain.com -> mydomain.com   // this is the redirect you create
when people type anotherdomain.com/bio, WP might serve mydomain.com/about/bio auto-magically 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T08:46:22.283

如果是我，我会做两种方式：

1.  域转发 domain1 -> domain2/about-page
2.  创建一个 index.html 并在 domain1 上创建一个子文件夹（例如：domain1.com/about），然后链接到它。- Index.html 将使用 iframe 调用 domain2/about。

# mercurial - ISO diff -b 仅忽略不影响缩进的空格（...在 mercurial 中）

> ID：12505639
> 
> 赞同：1
> 
> 时间：2012-09-20T03:17:28.970
> 
> 标签：mercurial, diff, indentation

与朋友一起工作，通常的空白战争。可能是一个新的尝试，导致我搜索 diff -b 的变体。

例如，我们都不想在一行中有尾随空格，但有些人会悄悄进入他的代码。我通常将 emacs 配置为删除尾随空格（add-hook 'write-file-hooks 'delete-trailing-whitespace），因此不会侵入我的代码，但它也会删除他代码中的尾随空格。

他希望哪个尾随空格（1）没有放在文件中，但（2）他想保留，以最小化差异。

他不想使用“diff -b”，因为它忽略了缩进中有意义的变化，比如缩进级别的变化。（或者至少这就是我不喜欢 diff -b 的原因，尽管 diff -b 是我的习惯。）

所以，我的问题是：是否有任何 diff 具有 diff -b 的变体，可以忽略不影响缩进的空白变化，

*   例如尾随空格，

*   并且（较低优先级）也可能会发生变化，例如与制表符相关的更改-例如在行首 --> ，即省略不影响缩进的空格，因为随后的制表符（对于某些制表符宽度设置-我知道，我知道，不好混合。但至少我们同意这些，并且 emacs 也可以自动（取消）tabify）。

* * *

而且，是的，我想在 hg diff 中使用它。

# android - Corner radius Android 出现问题

> ID：12505649
> 
> 赞同：14
> 
> 时间：2012-09-20T03:18:29.677
> 
> 标签：android, android-layout, android-4.0-ice-cream-sandwich, android-2.3-gingerbread, cornerradius

我正在为 Android 2.3 创建自己的搜索视图。

我有。

*   `LinearLayout`（水平的）
*   `AutoCompleteTextView`
*   `ImageButton`

我添加了按钮`AutoCompleteTextView`和`LinearLayout`。

我想在我自己的控件中放置一个角半径，如下图所示。

![在此处输入图像描述](../Images/169a1ab630997d319fc9762e6d7652ad.png)

我将此可绘制对象设置为 ImageButton

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
 <item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#27AFE0" />
        <stroke
            android:width="0.5dp"
            android:color="#000000" />
        <corners
            android:topRightRadius="10dp" android:bottomRightRadius="10dp"
android:topLeftRadius="0.1dp"
            android:bottomLeftRadius="0.1dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <solid android:color="#D3DBDE"/>
        <stroke
            android:width="0.5dp"
            android:color="#000000" />
        <corners
            android:topRightRadius="10dp" android:bottomRightRadius="10dp"
android:topLeftRadius="0.1dp"
            android:bottomLeftRadius="0.1dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

可绘制到 AutoCompleteText

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item>
    <shape android:shape="rectangle">
        <solid android:color="#D3DBDE"/>
        <stroke android:width="0.5dp" android:color="#000000"/>
        <corners android:topLeftRadius="10dp"
            android:bottomLeftRadius="10dp"
            android:topRightRadius="0.1dp"
            android:bottomRightRadius="0.1dp"/>
    </shape>
</item> 
```

但是当我在 android 2.3 中运行它时，这是输出（模拟器和真实设备）

![在此处输入图像描述](../Images/85b41ab8b0e6025eac802a0d7a9a34d2.png)

如果我也在 Android 4.0 中运行。它工作正常。

![在此处输入图像描述](../Images/d0fb032965ba436d21ef461c52a4f42c.png)

问题是，我的代码有什么问题？还是Android 2.3 有bug？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T04:07:58.473

好的，这也是让我失望的交易。这有两件事。

在您的 ImageButton Selector 中，您似乎在每个角标记中复制了两次右角的属性。

第二个是直到 3.0 版的 android 中的一个错误。单独指定角时，左下角和右下角会翻转。

[http://code.google.com/p/android/issues/detail?id=9161](http://code.google.com/p/android/issues/detail?id=9161)

我已将值提取到维度并将它们放入两个不同的文件中，

res/values/corners.xml - 用相反的东西

res/values-v12/corners.xml - 其中包含合理的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:30:17.353

android 的早期版本（早于 ICS 即 4.0）存在一个错误，它们错误地实现了“Shape”类的“corners”属性。因此，要在所有版本上获得正确类型的角，您必须编写一个检查目标版本的条件，因此您可以设置正确的背景。像这样的方法将解决您的问题-

/** * 使用 Shape 类的角元素处理 Pre ICS 版本中的错误 * */

```
private void getPreICSButtonBackground() {
    if(Build.VERSION.SDK_INT >= 4.0){
        leftButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.btn_rounded_left));
        rightButton.setBackgroundDrawable(getResources().getDrawable(R.drawable.btn_rounded_right));
    }
} 
```

在 'R.drawable.btn_rounded_left' 中，角的实现方式如下

```
 <corners android:topLeftRadius="5dp" android:topRightRadius="0dp"
    android:bottomLeftRadius="5dp" android:bottomRightRadius="0dp" /> 
```

如果它在早期版本上运行，则将具有角落的背景设置为

```
<corners android:topLeftRadius="5dp" android:topRightRadius="0dp"
    android:bottomLeftRadius="0dp" android:bottomRightRadius="5dp" /> 
```

同样对右侧按钮执行此操作。希望这能解决你的问题

# android - 模拟器中的套接字保持打开状态。专注于 onResume() 方法？

> ID：12505650
> 
> 赞同：1
> 
> 时间：2012-09-20T03:18:31.307
> 
> 标签：android, sockets, android-emulator

我在扩展 AsyncTask 类的对象的 doInBackground() 方法中打开了一个套接字。我确实在使用后立即关闭了这个套接字。但是当我使用模拟器上的后退按钮然后从菜单启动我的应用程序时，或者当我从 eclipse 启动它而不对代码进行任何更改时，我得到 BindException（即使我在 5 分钟后这样做，给 TIME_WAIT 足够的时间状态或 2MSL 等待状态）。

但是如果我在 Eclipse 中编辑我的代码（比如添加 2 个随机字符并删除 em 并保存）并运行我的应用程序，我不会得到这个异常。为了在同一个端口上接受多个连接，必须做什么？我试过 setReuseAddress(true) 但这似乎也不起作用。

我实现了我的活动的 onResume() 方法，并在其中简单地调用 super.onResume() 。研究这种方法能否带来解决方案，或者究竟需要做什么？我对任何想法都持开放态度。

有什么建议么？
@编辑：

```
class LongOperation extends AsyncTask<String, Void, String> {
 private String fname;
String aa=""; 
@Override
protected void onPostExecute(String result) {
            ed.setText(result);

}

@Override
protected void onPreExecute() {
}

@Override
protected void onProgressUpdate(Void... values) {
}

@Override
protected String doInBackground(String... arg0) {
    ServerSocket ss;

    try
        {

        ss = new ServerSocket(8000);
        s=ss.accept();
        s.setReuseAddress(true);
        BufferedReader get = new BufferedReader(new InputStreamReader(s.getInputStream()));
        aa=get.readLine();
        s.close();

        }
    catch(IOException e)
        {
        //System.out.println(e.toString());
        aa=""+e;

        }
    return aa;
} 
```

}

当我再次运行我的应用程序时，我可以在 TextView 中看到异常说“BindException：地址已在使用中”。但显然我已经关闭了我的套接字。

活动代码：

```
public class ContactReceiver extends Activity {
 TextView ed;Socket s;
public void onCreate(Bundle b){
super.onCreate(b);
setContentView(R.layout.receiver);
  ed=(TextView)findViewById(R.id.textView1);
   new LongOperation().execute("");

}
public void onPause(){
super.onPause();

}
public void onResume(){
super.onResume();
//  new LongOperation().execute("");
} 
```

活动课没有关闭。我在这里有我的 AsyncTask 类作为子类客栈

# reporting-services - SSRS Report Builder 3.0 行分组记录计数

> ID：12505651
> 
> 赞同：0
> 
> 时间：2012-09-20T03:18:38.933
> 
> 标签：reporting-services, report, reportbuilder, reportbuilder3.0

需要帮助才能在报表生成器中显示分组的行数。

我想获取分组记录的行数。RowCounts("DatasetName") 给出了数据集的总行数，但如果数据集在报告中分组，它仍然给出总行数。我想显示分组记录数。提前致谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T17:16:27.513

我使用`=CountRows()`or`=CountRows("Group_Description")`代替，其中“Group_Description”是您为该组命名的任何内容。

# c++ - 是否可以从 http 标头中找到文件名

> ID：12505661
> 
> 赞同：2
> 
> 时间：2012-09-20T03:20:21.160
> 
> 标签：c++, qt, network-programming, httpwebrequest, http-headers

通常在下载文件时，假设使用 QNetworkAccessManager，文件名不会出现在链接的末尾。在这种情况下如何获得正确的文件名。即使链接不包含名称提示，firefox 也会始终使用正确的名称和扩展名下载文件。我们可以使用 mime 类型获得扩展提示，但文件名呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T08:54:22.097

是的。这是`Content-Disposition: attachment; filename=<file name.ext>`标题。强烈建议将内容类型设置为，`application/octet-stream`这样浏览器及其插件就不会试图打开它。

# javascript - 使用正则表达式仅在 JavaScript 中查找和替换完整的单词

> ID：12505662
> 
> 赞同：0
> 
> 时间：2012-09-20T03:20:21.810
> 
> 标签：javascript, regex

假设我有以下字符串：

```
var str = '(1 + foo + 3) / bar'; 
```

我想用字母替换所有字符串`'x'`。我试过：

```
str = str.replace(/\w/g, 'x'); 
```

这导致：

```
(x + xxx + x) / xxx 
```

相反，我希望结果是：

```
(1 + x + 3) / x 
```

我该怎么做？我如何才能找到没有数字的单词并将单词替换为单个字母？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:22:09.950

为什么不直接使用`[a-z]+`而不是`\w`？（确保添加不区分大小写的标志，或`[a-zA-Z]`改用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:23:49.953

```
str = str.replace(/\b[a-z]+\b/ig, 'x'); 
```

`\b`匹配单词边界。这样'foo2'就不会变成'x'。正如其他人提到的那样`\w`，包括数字，但也包括下划线，所以你不想使用它。`i`修饰符进行不区分大小写的匹配（以便您可以更轻松地阅读）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T03:23:08.570

采用：

```
str = str.replace(/[a-z]+/ig, 'x'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T03:23:08.893

尝试`[a-zA-Z]`改用。`\w`相当于`[a-zA-Z0-9_]`。

```
str = str.replace(/[a-zA-Z]+/g, 'x'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-20T03:24:24.130

你可以试试这个正则表达式：

```
str = str.replace(/[a-z]+/ig, 'x'); 
```

**[az]** - 表示您正在寻找任何字母。

**+** 表示您正在寻找一个组合 (xxx)。

**i** 表示文本匹配可以不区分大小写。

**g** - 表示您正在查找字符串中的所有匹配项。

或者

您可以使用

```
 [a-zA-Z] 
```

它将查找小写字母 az 和大写字母 AZ。这是在没有 case 修饰符的情况下使用的。

# c# - 删除强类型数据集中的列时出错？

> ID：12505664
> 
> 赞同：0
> 
> 时间：2012-09-20T03:20:44.597
> 
> 标签：c#, .net-2.0, strongly-typed-dataset

当我将数据检索到我`DataSet`的 中时，该`year`列是我的第 3 列`DataSet`。使用此列后我不需要此列进行一些计算，因此我使用将`Remove`列名称传递给方法的方法将其删除`Remove`。问题是我在`foreach`循环中检索数据，所以当我再次检索数据时，该`year`列现在是最后一列，`DataSet`当我尝试访问它时，它会抛出一个错误，提示`year`找不到列。我解决这个问题的方法是将 by 克隆`DataSet`到 a`DataTable`中，然后将数据集中的每一行导入到 my`DataTable`中，但是有没有更有效的方法或方法可以将`year`列保持在原始位置。

```
private int GetData()
{
    dataSet.GetExportData();

    DataTable dt = dataSet.ExportData;

    for(int i = 0; i <dataSet.ExportData; i++)
    {
        //Do Stuff
    }

    dataSet.Columns.Remove(dataSet.ExportData.YearColumn.ColumnName);   
} 
```

在上面的代码中，当我打开一个对话框并选择要导出的数据时，它第一次可以工作，但是如果我保持对话框打开并再次单击按钮以导出，则会引发错误。如果我关闭对话框并重新打开，它工作正常。正如我之前所说，我注意到当它在单击按钮上再次检索数据时`dataSet.GetExportData()`，它将`Year`列作为最后一列而不是强类型中的定义位置`DataSet`，我认为这是问题，但无法弄清楚如何除了进行克隆和导入之外，还要修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:54:04.023

最好发表评论，但我想利用代码样式，而且如果没有看到代码也很难说出你想要实现的目标，

```
 foreach (DataRow row in myTable.Rows)
    {
        //do something with year column 
        myTable.Columns.Remove("year");
    } 
```

上面的代码在第一次迭代中工作正常，但之后会失败，因为`myTable.Columns.Remove("year")`从表中删除整个列，而不仅仅是从当前行中，并给你：`You'll get Column 'year' does not belong to table Table.`异常。

为什么不`myTable.Columns.Remove("year");`从 foreach 中取出呢？

```
 foreach (DataRow row in myTable.Rows)
    {
        //do something with year column 
    }

    myTable.Columns.Remove("year"); 
```

# dynamics-crm-2011 - 使用 LINQ 提供程序的 CRM 2011 服务器端分页/数据并行

> ID：12505666
> 
> 赞同：1
> 
> 时间：2012-09-20T03:21:18.613
> 
> 标签：dynamics-crm-2011

鉴于 CRM 2011 linq 提供程序在幕后自动执行分页。有没有办法设置执行 linq 查询时获取的记录数的上限（类似于在 QueryExpression 上设置 PagingInfo.Count 以进行分页）

我有一个场景，我需要提取大约 20K+ 记录进行更新（不，我不能也不需要进一步过滤记录集）。理想情况下，我更喜欢使用 Skip & Take 运算符，但由于不支持 Count，您如何知道要跳过多少记录以及何时停止获取更多记录。

理想情况下，我想使用 TPL 并并行处理一批 3K 或 5K 记录，这样我就可以获得更多的吞吐量并且不必阻塞。据我所知，OrganizationserviceContext 不是线程安全的。是否有任何好的示例可以说明如何在这种情况下使用 Parallel.For 或 Parallel.ForEach 对数据集进行分区。您将如何分区，是否需要为每个分区使用不同的上下文对象？

谢谢。

更新：这是我想出的：这个想法是获取要处理的记录总数，并使用 PLINQ 使用每个任务使用新的 OrganizationServiceContext 对象跨任务处理每个数据子集。

```
static void Main(string[] args)
    {  
       int pagesize = 2000;
        // use FetchXML aggregate functions to get total count
        // Reference: http://msdn.microsoft.com/en-us/library/gg309565.aspx
        int totalcount = GetTotalCount();

       int totalPages = (int)Math.Ceiling((double)totalcount / (double)pagesize);            
       try
        {
            Parallel.For(0, totalPages, () => new MyOrgserviceContext(),
                (pageIndex, state, ctx) =>
                {

                    var items = ctx.myEntitySet.Skip((pageIndex - 1) * pagesize).Take(pagesize);
                    var itemsArray = items.ToArray();
                    Console.WriteLine("Page:{0} - Fetched:{1}", pageIndex, itemsArray.Length);
                    return ctx;
                },
                ctx => ctx.Dispose()
                );
        }
        catch (AggregateException ex)
        {
           //handle as needed
        }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T19:56:56.170

所以我这样做的方法是继续使用skip and take查询记录，直到我用完记录。

看看我下面的例子，为了简单起见，它使用 int，但该方法仍应适用于 Linq-to-Crm。

因此，只需继续执行您的查询，跳过以前的记录，获取该页面所需的记录，然后在最后计数以查看您是否收到一整页 - 如果您没有收到，那么您的记录已经用完。

**代码**

```
List<int> ints = new List<int>()
{
    1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12
};

int pageNumber = 0;
int recordsPerPage = 3;

while(true)
{
    IEnumerable<int> page = ints.Where(i => i < 11).Skip(recordsPerPage * pageNumber).Take(recordsPerPage);

    foreach(int i in page)
    {
        Console.WriteLine(i);
    }

    Console.WriteLine("end of page");
    pageNumber++;

    if (page.Count() < recordsPerPage)
    {
        break;
    }
} 
```

**输出：**

```
1
2
3
end of page
4
5
6
end of page
7
8
9
end of page
10
end of page 
```

# excel - Applescript 不会在 excel 文件上打开或运行

> ID：12505667
> 
> 赞同：0
> 
> 时间：2012-09-20T03:21:46.067
> 
> 标签：excel, applescript, osx-mountain-lion

我有一个 AppleScript，它拒绝在我提供的任何 excel 文件上运行。它也拒绝打开：当我尝试在 AppleScript 编辑器中打开脚本时，系统提示我：

```
Open Dictionary: Unable to read the dictionary of the application or extension because it is not scriptable. 
```

Mountain Lion 中是否有与 AppleScript 冲突的更新？还有哪些其他错误阻止我运行脚本？

```
on open excelFiles

set numRows to 0
set numCols to 0
set usedRange to 0

repeat with eachFile in excelFiles
tell application "Microsoft Excel"
set tbook to open workbook workbook file name (eachFile as string)
set tName to name of tbook
set numCols to (count of columns of used range of active sheet)
set numRows to (count of rows of used range of active sheet)

insert into range column 1 of active sheet -- insert column
set lastCell to last cell of used range of active sheet -- get last cell from the used range
set value of range ("A1:A" & first row index of lastCell) of active sheet to tName --set first column's values to the file name

--set lastCell to last cell of used range of active sheet -- get last cell from the used range
--set value of range ("A1:A" & numRows) of active sheet to tName --set first column's values to the file name
--set usedRange to (used range of active sheet)

replace (used range of active sheet) what "," replacement ("^")
replace (used range of active sheet) what "$" replacement (" ")
replace (used range of active sheet) what "°" replacement ("-degrees ")
replace (used range of active sheet) what "©" replacement (" ")
replace (used range of active sheet) what "à" replacement ("a")
replace (used range of active sheet) what "á" replacement ("a")
replace (used range of active sheet) what "â" replacement ("a")
replace (used range of active sheet) what "ã" replacement ("a")
replace (used range of active sheet) what "ä" replacement ("a")
replace (used range of active sheet) what "ç" replacement ("c")
replace (used range of active sheet) what "ć" replacement ("c")
replace (used range of active sheet) what "è" replacement ("e")
replace (used range of active sheet) what "é" replacement ("e")
replace (used range of active sheet) what "ê" replacement ("e")
replace (used range of active sheet) what "ë" replacement ("e")
replace (used range of active sheet) what "ì" replacement ("i")
replace (used range of active sheet) what "í" replacement ("i")
replace (used range of active sheet) what "î" replacement ("i")
replace (used range of active sheet) what "ï" replacement ("i")
replace (used range of active sheet) what "ò" replacement ("o")
replace (used range of active sheet) what "ô" replacement ("o")
replace (used range of active sheet) what "ó" replacement ("o")
replace (used range of active sheet) what "õ" replacement ("o")
replace (used range of active sheet) what "ö" replacement ("o")
replace (used range of active sheet) what "ü" replacement ("u")
replace (used range of active sheet) what "½" replacement (".5")
replace (used range of active sheet) what "¼" replacement (".25")
replace (used range of active sheet) what "¾" replacement (".75")

--display dialog "The used range of this sheet is" & range
--display dialog "The number of rows of this file is " & numRows
--display dialog "The number of collumns of this file is " & numCols

close tbook saving yes

end tell
end repeat
end open 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:12:29.990

尝试告诉捆绑标识符。

```
tell application id "com.microsoft.Excel"
-- insert your code
end tell 
```

# node.js - 如何在 Tower.js 中获取远程 IP 地址？

> ID：12505668
> 
> 赞同：1
> 
> 时间：2012-09-20T03:21:56.683
> 
> 标签：node.js, towerjs

我正在使用 Tower.js 创建 Web 服务。我能够获取 HTTP 标头和用户代理，但无法获取远程 IP 地址。如何获取请求者的远程IP地址？

我试过了

1.  寻找 Tower.Controller 类成员变量和方法（this.request 和 this.request.app 和 this.request.headers 等...）
2.  检查 HTTP 标头
3.  阅读 tower-docs (https://github.com/viatropos/tower-docs)
4.  阅读超级代理文档（https://github.com/visionmedia/superagent）

如果信息不足，请补充。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T02:28:32.560

感谢您的回复！

我检查了请求对象。但无法获取IP地址。

安装了 Tower 0.4.2-3 和 Express 3.0.0rc5 但发生运行时错误。是否支持 Express3.0 到 Tower.js？或者 Express 2.x 可以获取远程 IP 地址？

你能告诉我吗。

错误信息：/var/www/html/melissa/server2/node_modules/tower/bin/test/node_modules/mongodb/lib/mongodb/connection/server.js:432 throw err; ^ TypeError：无法在 Tower.Application.Application.reopen.use 调用未定义的方法“应用”（/var/www/html/melissa/server2/node_modules/tower/bin/test/node_modules/tower/lib/tower-application /server/application.js:115:52) 为空。(/var/www/html/melissa/server2/node_modules/tower/bin/test/app/config/server/bootstrap.coffee:9:12) 在 Tower.Application.Application.reopen.stack (/var/www/ html/melissa/server2/node_modules/tower/bin/test/node_modules/tower/lib/tower-application/server/application.js:177:16）在 Tower.Application.Application.reopen.initialize。

# html - 用 Markdown 写 html 标签？

> ID：12505669
> 
> 赞同：4
> 
> 时间：2012-09-20T03:22:02.890
> 
> 标签：html, syntax-highlighting, markdown, tumblr

在 tumblr 中，支持降价。我尝试在我的 tumblr中添加语法高亮（ [highlight.js ），但遇到了一些问题。](http://softwaremaniacs.org/soft/highlight/en/description/)

highlight.js 需要在 HTML 代码标签中添加一个*类属性。*

我试着在我的 tumblr 上写一篇这样的文章：

```
<pre class="test">
    <code class="html">
        function A(){ return "hello world"; }
    </code>
</pre> 
```

实际页面中的结果：

```
<pre>
    <code>
        function A(){ return "hello world"; }
    </code>
</pre> 
```

类*属性*没了…… 有没有可能在 Markdown 中添加 HTML 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:32:55.727

如果你使用[google-code-prettify](http://code.google.com/p/google-code-prettify/)，你可以这样做（我目前正在这样做）：

```
$(document).ready(function() {
    $('pre').addClass('prettyprint');
    prettyPrint();
}); 
```

基本上，您加载所有文件：

```
prettify.css
sunburst.css // optional styles
prettify.js 
```

添加上面的代码片段，然后调用`prettyPrint` `onLoad`: `onload="prettyPrint()"`。

上面的代码片段应该放在所有文件之前。它找到所有`pre`元素，并将`prettyprint`类附加到它，以便脚本知道对其进行样式设置。

* * *

然而，如果你想使用你当前的语法高亮，你可以做这样的事情（使用 jQuery）：

```
$(document).ready(function() {
    $('pre').addClass('test');
    $('code').addClass('html');
    // code to intialize highlight.js
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:01:44.533

我刚试过，不难。

[http://softwaremaniacs.org/soft/highlight/en/description/](http://softwaremaniacs.org/soft/highlight/en/description/)在第一个代码片段中描述了您需要插入 tumblr 页面的 html 以使其工作的内容。**代码片段在预览模式下不会以高亮显示加载。**

为了能够使用荧光笔，您需要能够链接样式表和 javascript。如果您没有托管，那么 highlight.js 的人会免费提供托管解决方案。

`<head>...</head>`在标签中添加这 3 行

```
<link rel="stylesheet" href="http://yandex.st/highlightjs/7.2/styles/default.min.css">
<script src="http://yandex.st/highlightjs/7.2/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script> 
```

我在 tumblr 上的代码帖子中添加的所有内容是

```
<pre><code class="language-python">
...your code here...
</code></pre> 
```

# jquery - jQuery ajax加载图像不隐藏

> ID：12505672
> 
> 赞同：0
> 
> 时间：2012-09-20T03:22:15.750
> 
> 标签：jquery, ajax, image, loading

单击链接时，我正在使用 jquery ajax 将单独的页面加载到模式窗口中。在加载模式内容时，我会显示一个加载图像。加载图像位于页面上的一个 div 中，并针对页面上的任何 ajax 加载显示。这一切正常，但我似乎无法在 ajax 调用成功后隐藏图像。

这是我正在使用的 jquery：

```
$('#loadingImage').ajaxStart(function(){
    $(this).show();
});
$('#loadingImage').ajaxSuccess(function(){ //also tried ajaxStop
    $(this).hide();
});

function loadMap(){         
$('#whereweare-map').click(function(){
    $('#lightBox').removeClass().addClass('reveal-modal expand');
    $.ajax({
        url: '/Map#mapLoad',
        success: function(data){
            $('#lightBox').reveal();
            $('#lightBoxContent').html(data);         
        }
    });
       return false;
        });
    }
loadMap(); 
```

HTML：

```
<div id="imageLoading"></div>
<a href="#" id="whereweare-map">Where We Are</a>
<div class="reveal-modal" id="lightBox">
    <div id="lightBoxContent"><!-- Load Content Here --></div>
    <a class="close-reveal-modal">&#215;</a>
</div> 
```

和CSS：

```
#loadingImage {
display:none; 
height:84px; 
width:84px; 
position:fixed; 
top:50%; 
left:50%; 
z-index: 1;
background: url('preloader.gif') no-repeat center center;
background-color: #000; 
background-color: rgba(0, 0, 0, 0.7);
-moz-border-radius:45px;
-webkit-border-radius:45px;
border-radius:45px;
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:49:38.520

ajaxStart 和 ajaxStop 是全局函数。所以他们响应页面上的任何 ajax 请求。而不是在这些函数中显示/隐藏，为什么不在 beforeSend 和 complete 函数中做同样的事情。这确保图像在正确的时间显示/隐藏

```
function loadMap() {
    $('#whereweare-map').click(function () {
        var $loader = $('#loadingImage');
        $('#lightBox').removeClass().addClass('reveal-modal expand');
        $.ajax({
            url: '/Map#mapLoad',
            success: function (data) {
                $('#lightBox').reveal();
                $('#lightBoxContent').html(data);
            },
            beforeSend : function(){
               $loader.show();
            },
            complete : function(){
               $loader.hide();
            }
        });
        return false;
    });
}
loadMap(); 
```

另外，您为什么不尝试使用 ajaxComplete 函数来隐藏您的 div，而不是 ajaxSuccess。

```
$('#loadingImage').ajaxComplete(function(){ //also tried ajaxStop
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:38:06.407

```
$('#LoadingImage').bind('ajaxStart', function(){
    $(this).show();
}).bind('ajaxStop', function(){ 
    $(this).hide();
}); 
```

尝试将其绑定到启动和停止功能...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T03:28:56.703

像这样改变你的ajax

```
$.ajax({
        url: '/Map#mapLoad',
        success: function(data){
            $('#lightBox').reveal();
            $('#lightBoxContent').html(data);        
            $('#loadingImage').hide(); //hide it here

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T04:52:33.527

试试下面的代码

```
 $(document).ready(function () {            
        $('#loadingImage').hide()  // hide it initially
             .ajaxStart(function () {
                 $(this).show();
             })
             .ajaxStop(function () {
                 $(this).hide();
             });
      }); 
```

# c# - 数字与 varchar 数据的文本框复制粘贴处理

> ID：12505673
> 
> 赞同：0
> 
> 时间：2012-09-20T03:22:27.857
> 
> 标签：c#, .net, vb.net, winforms, textbox

我的 winforms 应用程序中有数千个文本框。

我想为文本框禁用数字值的文本框的复制粘贴，该文本框应该只允许数字（整数）。

例如：

```
Employee number: 1234567 
```

1.  我尝试将文本框的 ShortcutsEnabled 属性设置为 false ，它完全停止禁用整个复制和粘贴，这是我不想要的，我想允许复制粘贴数字。
2.  我可以从剪贴板获取数据

> Clipboard.GetText();

并检查是否

> Int32.TryParse

检查数字/字符串。

我可以使用任何通用方法来代替每个代码的固定代码或使用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:14:34.773

使用 MaskedTextBox 或 NumericUpDown 而不是 TextBox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:24:42.743

曾经根本不禁用的简单方法是仅使用数字[屏蔽文本框](http://msdn.microsoft.com/es-es/library/system.windows.forms.maskedtextbox%28v=vs.80%29.aspx)，这样错误的输入（非数字）将被拒绝。不仅适用于复制粘贴，也适用于直接输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T05:43:12.443

使用 TextChanged 事件并检查其中当前文本的验证，如果您要在许多 win 表单中使用该文本框，所以我建议您创建 TextBox 的高级用户控件并覆盖其 TextChanged 方法。

# recursion - LISP 中的 let 语法错误

> ID：12505674
> 
> 赞同：1
> 
> 时间：2012-09-20T03:22:33.913
> 
> 标签：recursion, lisp, let

尝试运行代码时，我不断收到此错误：

```
(let ((exp lambda (x y) (if (= y 1) x (* (exp x (- y 1)) x))))) 
```

错误：

```
let: bad syntax in: (let ((exp lambda (x y) (if (= y 1) x (* (exp x (- y 1)) x))))) 
```

我的函数应该定义递归求幂，但我遇到了 let 的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T03:27:09.327

您在 之前缺少左括号`lambda`，并且`let`表单缺少正文。此外，您不能`let`用于定义递归函数；您需要使用`letrec`(for Scheme) 或`labels`(for Common Lisp)。也许你的意思是这个（方案）：

```
(letrec ((exp (lambda (x y)
                (if (= y 1) x
                    (* (exp x (- y 1)) x)))))
  exp) 
```

# bash - 实时监控 IPMI SEL 的脚本

> ID：12505676
> 
> 赞同：1
> 
> 时间：2012-09-20T03:22:59.250
> 
> 标签：bash

我想实时监控 IPMI 系统事件日志 (SEL)。我想要的是，每当在 SEL 中生成事件时，应自动生成邮件警报。

我实现这一目标的一种方法是我可以编写一个脚本并将其安排在 cron 中。该脚本每天将运行 3 或 4 次，因此每当生成新事件时，都会向我发送邮件警报。

我希望监控处于活动状态。就像每当生成事件时一样，应该向我发送邮件，而不是定期检查。

SEL 日志格式如下：

server-001% sudo ipmitool 选择列表

b4 | 2009 年 5 月 27 日 | 13:38:32 | 风扇 #0x37 | 上临界走高

c8 | 2009 年 5 月 27 日 | 13:38:35 | 风扇 #0x37 | 上临界走高

直流| 2009 年 8 月 15 日 | 07:07:50 | 风扇 #0x37 | 上临界走高

因此，对于上述情况，每当生成新事件时，都会自动将邮件警报与事件一起发送给我。如何使用 bash 脚本来实现这一点。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T17:08:05.150

我相信一些供应商在他们的固件中针对您所描述的内容进行了特殊扩展（即您只需在服务处理器中配置一个电子邮件地址），但我无法与每个供应商的支持人员交谈。您必须为此查找主板的文档。

就标准机制而言，您可能正在寻找 IPMI PET（平台事件陷阱）支持。使用 PET，当生成某些 SEL 事件时，它会生成一个 SNMP 陷阱。SNMP 陷阱一旦被 SNMP 守护程序接收到，就可以做任何您想做的事情，例如发送电子邮件。

FreeIPMI 的用户在文档中记录了他的经验并发布了他的脚本，您可以在此处找到：

[http://www.gnu.org/software/freeipmi/download.html](http://www.gnu.org/software/freeipmi/download.html)

（免责声明：我维护 FreeIPMI，所以我更了解 FreeIPMI，不确定是否支持其他 IPMI 软件。）

作为一个仅供参考，几个 IPMI SEL 日志记录守护程序（我知道，FreeIPMI 的 ipmiseld 和 ipmitool 的 ipmievtd 是两个）根据可配置的秒数轮询 SEL，并将 SEL 信息记录到 syslog。还可以在 syslog 中配置邮件警报，以便在事件发生时发送电子邮件。这些守护进程仍然是基于轮询而不是实时的，但是这些守护进程可能会处理许多您的 cron 脚本可能不知道的 IPMI 极端情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T10:26:19.420

可以使用`ipmievd`工具来监控 IPMI SEL 事件。它是`ipmitool`包装的一部分。

```
 # rpm -qf /usr/sbin/ipmievd
   ipmitool-1.8.11-12.el6.x86_64 
```

要将 SEL 事件发送到`syslog`，请执行以下命令。

```
 ipmievd sel daemon 
```

现在，为了模拟`SEL`事件的产生，我们将执行以下命令。

```
 ipmitool event 2 
```

这将生成以下事件

```
 ` Voltage Threshold - Lower Critical - Going Low` 
```

要获取可以生成的 SEL 事件列表，请尝试

```
 # ipmitool event

 usage: event <num>
 Send generic test events
 1 : Temperature - Upper Critical - Going High
 2 : Voltage Threshold - Lower Critical - Going Low
 3 : Memory - Correctable ECC 
```

该事件将被通知到 /var/log/messages。在日志文件中生成了以下消息。

```
Oct 21 15:12:32 mgthost ipmievd: Voltage sensor - Lower Critical going low 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T18:38:34.127

以防万一它帮助其他人......

我创建了一个 shell 脚本来记录这种格式的数据，我用 php 解析它并使用谷歌的图表 api 来制作一个漂亮的折线图。2016-05-25 13:33:15, 20 摄氏度, 23 摄氏度 2016-05-25 13:53:06, 21.50 摄氏度, 24 摄氏度 2016-05-25 14:34:39, 19 摄氏度, 22.50 摄氏度

```
#!/bin/sh

DATE=`date '+%Y-%m-%d %H:%M:%S'`
temp0=$(ipmitool sdr type Temperature | grep "CPU0 Diode" | cut -f5 -d"|")
temp1=$(ipmitool sdr type Temperature | grep "CPU1 Diode" | cut -f5 -d"|")
echo "$DATE,$temp0,$temp1" >> /events/temps.dat 
```

我现在遇到的问题是让 cron 作业正确访问数据，即使它是在根 crontab 中设置的。

# jsp - jsp 和 java bean

> ID：12505691
> 
> 赞同：1
> 
> 时间：2012-09-20T03:25:39.180
> 
> 标签：jsp, javabeans, race-condition, stateless

我正在构建托管在 tomcat 上的 jsp 页面，并且想知道每个 jsp 中引用的 bean 实例是否是无状态/有状态的？这些 bean 实例是如何产生的？每次访问页面时是否（重新）创建它们？我是否需要担心两个不同的用户同时访问同一个页面并获得同一个 bean 实例？

一般来说，我发现jsp和bean之间的交互非常混乱，所以如果有人可以参考这些概念的教程/解释，我将不胜感激。谢谢！

PS bean 类中的静态字段怎么样？这些值是否默认具有应用范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T03:35:20.490

*bean*是Plain Object Java Object，bean开发的目的是*存储*/持久化数据。

> 如果每个jsp中引用的bean实例是无状态/有状态的？

*默认无状态。*

> 这些 bean 实例是如何产生的？每次访问页面时是否（重新）创建它们？

这取决于您使用的*代码。*

> 我是否需要担心两个不同的用户同时访问同一个页面并获得同一个 bean 实例？

除非您创建了一个具有*应用程序*范围的*bean 。*

 ** * *

关于[JavaBeans](https://stackoverflow.com/tags/javabeans/info)和[JSP](https://stackoverflow.com/tags/jsp/info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:40:00.703

bean 的生命周期取决于开发人员或开发人员选择使用的框架。如果您考虑跨多个页面（甚至是同一页面）的请求，除非您创建一个类的实例并将其存储在某处，否则它将是无状态的。这就是 Java EE 会话管理发挥作用的地方，因此如果您想要有状态的行为，您将创建 bean 的一个实例并将其“持久化”到会话中。

如果您确实坚持会话，则不必担心多个用户访问应用程序，因为会话对于每个用户都是唯一的，并且 Java EE 会尝试确保这一点。*

# html - 如何解析 tag using HtmlAgilityPack I am able to parse radio , checkbox etc. but while parsing select nodes : <select name="customeDropDown1" style="height :27px;width :121px;margin-top :75px;margin-left :401px;color:#000000;background-colo</h1>
<blockquote>
        <p>ID：12505692</p>
        <p>赞同：2</p>
        <p>时间：2012-09-20T03:25:39.747</p>
        <p>标签：html</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：3</p>
            <p>时间：2012-12-20T17:21:37.527</p>
            </blockquote>

<p>由于一些奇怪的原因，HtmlAgilityPack 没有正确处理这些标签，所以这设法解决了我的问题。</p>

<pre>我没有直接到达节点，而是通过使用NextSimbling前一个 simbling 中的引用来获取每个节点的值。 回答 #2 赞同：0 时间：2015-04-23T01:51:16.917 你也可以试试这个。对于其他需要尝试不同方法的人（答案对我不起作用），我最终只是引用了父节点的子节点： HtmlNode.ElementsFlags.Remove("option"); // need this before you do anything with HAP var options = htmlDoc.DocumentNode.SelectNodes("//select[@id='myselect']/option") for (var i = 0; i < options.Count; i++) { var val = options[i].InnerHtml; } 我试图做一个 foreach，遍历节点，这给了我空值。这对我来说很好。<code>        // Iterating over nodes to build the dictionary
        foreach (HtmlNode city in citiesNodes)
        {
            if (city.NextSibling != null)
            {
                string key   = city.NextSibling.InnerText;
                string value = city.Attributes[" value"].value;="" citieshash.addcity="" (key,value);="" }="" <="" code=""></select>

# delphi - 如何在 Delphi 中访问基（超）类？

> ID：12505695
> 
> 赞同：11
> 
> 时间：2012-09-20T03:26:30.493
> 
> 标签：delphi, inheritance

在 C# 中我可以通过`base`关键字访问基类，而在 java 中我可以通过`super`关键字访问它。如何在德尔福中做到这一点？假设我有以下代码：

```
 type
    TForm3 = class(TForm)
  private
    procedure _setCaption(Value:String);
  public
    property Caption:string write _setCaption; //adding override here gives error
  end;

  implementation

procedure TForm3._setCaption(Value: String);
begin
  Self.Caption := Value; //it gives stack overflow      
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T03:36:42.000

您收到 stackoveflow 异常，因为该行

```
Self.Caption := Value; 
```

是递归的。

您可以访问将属性[`Caption`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls.TControl.Caption)转换`Self`为基类的父属性，如下所示：

```
procedure TForm3._setCaption(const Value: string);
begin
   TForm(Self).Caption := Value;
end; 
```

或使用`inherited`关键字

```
procedure TForm3._setCaption(const Value: string);
begin
   inherited Caption := Value;
end; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-20T03:43:48.863

你应该使用`inherited`关键字：

```
procedure TForm3._setCaption(Value: String); 
begin 
  inherited Caption := Value;
end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-04T12:52:04.503

基础 (C#) = 超级 (java) = 继承 (Object Pascal) (*)

3 个关键字的工作方式相同。

1) 调用基类构造函数
2) 调用基类方法
3) 为基类属性赋值（假设它们不是私有的，只允许受保护的和公共的）
4) 调用基类析构函数（仅限 Object Pascal。C# 和 Java 没有t有析构函数）

(*) Object Pascal 比 Delphi 或 Free Pascal 更可取，因为 Object Pascal 是程序语言的名称，而 Delphi 和 Free Pascal 是 Object Pascal 的编译器。

# aviarc - Aviarc 工作流程未执行

> ID：12505696
> 
> 赞同：2
> 
> 时间：2012-09-20T03:26:43.193
> 
> 标签：aviarc

我有一个带有 MySQL 数据库的 Aviarc 应用程序。

系统的主要功能可通过带有调用不同工作流程的按钮的主屏幕访问。我添加了一个登录表单，它根据权限检查凭据。这行得通。经过几次不相关的小改动后，我遇到了以下问题：

*   应用程序中的所有按钮都不起作用（浏览器告诉我它们都链接到 javascript:void(0)
*   当我直接进入工作流程（输入 url）时，被调用的表单打开，但其中没有数据

我尝试了以下方法：

*   删除了身份验证
*   启动应用程序的新实例
*   测试数据库连接（测试查询工作）

看起来好像没有一个工作流正确执行。我只是在初学者水平，所以任何建议都会受到欢迎。

# c++ - 创建“快捷方式”类似宏的定义

> ID：12505698
> 
> 赞同：0
> 
> 时间：2012-09-20T03:26:51.673
> 
> 标签：c++, macros, c-preprocessor

在我的代码中，我已经重写`static_cast<int *>`了大约一百万次，有没有办法重新定义关键字，以便每当我调用它时它都会做同样的事情？

例子

`cast`会做同样的事情`static_cast<int *>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:39:43.500

寻求更简单的方法来做一些危险的事情……

是的，有很多方法可以完成您的要求，包括

*   C++ 模板，

*   宏定义，

*   编辑器快捷方式，

*   自定义预处理，

*   训练有素的猴子修复了代码。

但是你所做的只是让你的代码更难理解。

相反，试着弄清楚你为什么经常*丢失类型信息*，所以你不得不用手把它放回去，可以这么说。

一般的解决方案很简单，首先*不要*丢弃类型信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:41:22.800

你的意思是这样吗？

```
#define SCAST(T,X) static_cast<T>(X); 
```

我应该警告您，通常过度使用这样的定义会使您的代码晦涩难懂且难以理解。

更重要的是，您必须注意宏，因为它们可能会导致难以找到错误，例如：

```
#define SQUARE(X) = X*X; 
```

好吧，如果你用 调用它`x++`，预处理器将进行文字替换，你最终会得到`(x++)*(x++);`这意味着它完全不会是你正在寻找的答案，并且使事情变得更糟，因为替换发生在幕后你很难找到原因。

我建议您尽可能查看模板函数或仅使用内联辅助函数，它是安全的，并且可以避免我指出的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T05:42:12.503

`static_cast`其好处是 C++ 程序员无需查找您的`#define`语句或其他语句即可准确识别它是什么。我强烈建议您继续使用`static_cast`.

但是，我的假设是您的问题是所需的击键次数，因此最好的解决方案是使用支持宏的文本编辑器。这样，最终保存的代码确实使用标准`static_cast<T>(x)`语法，但您可能只需要键入诸如`[``s``c``]``tab``T``tab``x``tab`.

有关如何执行此操作的信息将在此类编辑器的文档中找到。我不是高度可定制的编辑器的忠实粉丝，所以细节超出了我的知识范围。

# mysql - 如何在表格中随机选择 msql 中的一行并在网页上显示结果并将结果发送到 2 个电子邮件地址？

> ID：12505701
> 
> 赞同：0
> 
> 时间：2012-09-20T03:27:09.867
> 
> 标签：mysql, database, email, select, random

基本上，我正在我目前正在构建的网站上设置名称和电子邮件的订阅应用程序。我已经测试了订阅表单并且一切正常，因为它将数据发送到 msql 数据库并发送到适当的表（订阅），然后发送到 2 个字段（订阅名称、订阅电子邮件）。有了这个，我希望每月从字段中随机画一条线（其中有他们的姓名和电子邮件）并显示这个（只有他们的名字以及其他一些文本，例如“名字是本月随机抽奖的获胜者”等）在网站的主页上。（可能会在每个月的同一时间抽出两次。还不确定）。

我希望这也可以使用它拥有的电子邮件地址向获胜者发送电子邮件，并发送到预定义的电子邮件地址给我。（这样我就可以确切地知道谁赢得了它，因为当然可能有 2 个或更多同名的人，所以我不知道哪一个赢得了它。所以在这封电子邮件中，它只会向我提供姓名和电子邮件，所以我可以提供奖品。）

我真的希望有人能够提供帮助，因为我完全不知道该怎么做，因为我对代码世界知之甚少，尤其是这样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:18:15.227

我不确定您使用的是什么语言，所以我将用 python 编写。

用 PHP 重写

```
<?php
// your MySql specific parameters
$my_host = "localhost";
$my_user = "user";
$my_pass = "password";
$my_db = "test";

// Connecting, selecting database
$link = mysql_connect($my_host, $my_user, $my_pass);
mysql_select_db($my_db);

// Mysql fast random from http://wanderr.com/jay/order-by-slow/2008/01/30/
// Assuming MySql table called users
$query = "SELECT * FROM subscriptions T JOIN (SELECT FLOOR(MAX(ID)*RAND()) AS ID FROM USERS) AS x ON T.ID >= x.ID LIMIT 1;";

$result = mysql_query($query);

// get the user
$user = mysql_fetch_array($result, MYSQL_ASSOC);

$user_email = user['Subscriptionemail'];
$user_name = user['subscriptionname'];

// Free resultset
mysql_free_result($result);

// Closing connection
mysql_close($link);

//
// Email part
//

// specific to you
$HOST = 'My smtp server';
$my_email = 'me@my_domain.com';
$server = smtplib.SMTP(HOST);

$text = "Hello " + $user_name + " you have won the prize!";
mail($user_email, "You won!", $text, "From: " + $my_email);

$text = $user_name + " has won the prize! Their email is " + $user_email + ".";
mail($my_email, "New winner!", $text, "From: " + $my_email); 
```

# time-complexity - 国际象棋将死算法复杂度

> ID：12505704
> 
> 赞同：-2
> 
> 时间：2012-09-20T03:27:51.757
> 
> 标签：time-complexity, graph-algorithm

我想知道在大 O 表示法中确定国际象棋中将死的图形搜索算法的复杂性是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:33:06.510

每边 8 片。第一步只有棋子有 16 种可能性，骑士有 4 种可能性，第二部电影有相同的数量。在此之后，可能性列表增长到无法计算的水平。

世界上最好的国际象棋引擎使用“最可能”的图形搜索。

这篇维基百科文章非常有用：[http ://en.wikipedia.org/wiki/Game_complexity](http://en.wikipedia.org/wiki/Game_complexity)

“Allis 还估计博弈树的复杂度至少为 10123，“基于 35 的平均分支因子和 80 的平均博弈长度”。作为比较，可观测宇宙中的原子数，它是经常比较，估计在 4×1079 和 1081 之间。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:33:42.487

答案是该算法将通过剩余的棋子（N）解决所有可能的移动。因为它只有在复杂度为 O(N)（线性）时才会遍历每个部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T09:24:52.620

如果您只想检查给定的棋盘是否包含将死，那么您可以执行以下操作：

1.  确定您的国王可以移动到的（国王）方格组（所有方向8个-您自己的棋子占据的领域-领域的边界）
2.  遍历所有敌方棋子并确定他们攻击的方格。如果这些方块中的任何一个在您的国王组中，请将它们移除。保持一个布尔值以指示您的国王是否受到攻击。
3.  如果您的国王组空了并且国王受到攻击，则将死

棋子的数量确实很重要，所以如果你有一个任意大小的棋盘，有 n 棋子，这很重要。在这种情况下，瓶颈将是检查所有棋子是否攻击某个位置，因为另一个棋子可能会阻止攻击。一个简单的实现可以在二次时间内完成。通过保持集合中棋子的位置并针对 add() 和 contains() 对其进行优化，您可以将其降低到 n 中的线性（尽管棋盘的大小也会影响这一点），所以我猜线性复杂度是可行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T03:33:42.687

国王最多有八步。并且需要不断的时间来验证国王是否在每次移动后受到威胁。加上国王留在原地（另一块移动）的情况。所以它是恒定的时间。

# c# - 面向对象层

> ID：12505707
> 
> 赞同：1
> 
> 时间：2012-09-20T03:28:36.247
> 
> 标签：c#, c++, oop, object-oriented-database, c++-concepts

嘿伙计们，我已经用 C++ 编写了一个学期的 OOP，而我刚刚开始使用 C#。我仍然不完全了解如何将图层彼此分开以及在哪里做什么。据我了解，有以下几层：

存储 -> 数据访问 -> 业务逻辑 -> 命令处理器 -> 用户界面

现在我似乎无法完全理解每一层的责任是什么..

我了解数据访问仅包含诸如添加、更新、删除、查询之类的方法，并且数据访问并不关心它插入了什么，它只是接收对象作为参数并对其进行任何处理。业务逻辑是否从命令处理器发送的数据创建对象，命令处理器从用户界面获取它并对其进行输入验证？

另外，我将如何发送和接收不同的命令，例如查询命令与插入命令有何不同，因为它需要发回数据。

正如您可能会说的那样，我很迷茫，而且我一直很难找到关于这个主题的好的教程。

谢谢！

编辑。

我试图从数据访问层查询方法开始。我将三个子对象存储在父类型的通用列表中。

我有不同的查询选项，其中之一是类型。所以我需要搜索父列表并返回每个对象的数据，如果它是指定的类型。我的父对象有一个被覆盖的 ToString() 以及我的子对象，它们调用父对象 ToString() 以将对象的所有数据放入一个字符串中。我在这里做业务逻辑职责吗？此外，当我获得与我的类型匹配的对象列表并尝试使用 foreach 调用 ToString() 进行迭代时，它只会调用父 ToString() 我猜？

```
public string Lookup(Types type)
{
List<Parents> search = new List<Parent>();

switch (type)
{
case Types.TypeOne:
{
search = ParentDataBase.FindAll( delegate(Child1 findChild) { 
return findChild is ChildOne; } );

}
break;
case Types.TypeTwo:
{
search = ParentDataBase.FindAll( delegate(Parents findChild) { 
return findChild is ChildTwo; } );
}
break;
case Types.TypeThree:
{
search = ParentDataBase.FindAll( delegate(Parent findChild) { 
return findChild is ChildThree; } );
}
break;
}
string results = "";

foreach (Parent x in search)
{
results += t.ToString();
}
return results;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T03:57:30.013

问题中出现的箭头令人困惑，因此在讨论期间我将更改它们。

所以只让我放两个链接，所以在提到它们时尝试搜索**CRUD**和**MVC架构。**

让我们一步一步来：

**存储 -> 数据访问**

这通常由[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)处理。ORM 将处理数据库访问。

您创建的 ORM 加上自定义（模型）对象允许[抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29)数据访问。这看起来像：

ORM 将数据传入和传出数据库以使其可用。ORM 可以为您处理**CRUD**操作，因此查询、更新和插入不会出现在代码的其他部分。

**商业逻辑**

业务逻辑通过访问、修改和保存数据来处理数据。

业务逻辑可以访问您的模型以完成数据的访问和保存。

修改部分在业务逻辑中实现。

业务逻辑可以是小型的、大型的，也可以是其他业务运行器的组合。

我们的图表现在看起来像：

> 数据库 <- ORM -> 模型 <- 业务逻辑

**命令处理器**

命令处理器运行业务逻辑片段并将整个系统的片段修补在一起，有时在**MVC中称为控制器**

> 数据库 <- ORM -> 模型 <- 业务逻辑 <- 命令处理器

**用户界面**

用户界面（UI）可以分为两部分，数据表示和用户输入。

数据表示在 MCV 中称为视图，负责获取数据并使其可供用户阅读。

用户输入触发命令处理器的各个部分。

总体：

```
 ,-> View
Database <- ORM -> Models <- Business Logic <- Command Processor
                                                                `<- User Input 
```

# iphone - 具有自动滚动功能的 ScrollView

> ID：12505711
> 
> 赞同：3
> 
> 时间：2012-09-20T03:29:08.653
> 
> 标签：iphone, ios, xcode, uiscrollview

我希望滚动视图（或 textView）自动滚动，就像显示电影的演职员表时一样。我尝试了一些方法，但没有一个成功，我似乎找不到足够的答案，任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T13:52:04.850

此代码将`UIScrollView`在 10 秒内滚动您的 100pt：

```
self.scrollView.scrollEnabled = NO;

CGFloat scrollHeight = 100;
[UIView animateWithDuration:10
                      delay:0
                    options:UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     self.scrollView.contentOffset = CGPointMake(0, scrollHeight);
                 }
                 completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T03:57:39.700

试试这个。

```
[your table-name scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:pageval inSection:0] atScrollPosition:0 animated:YES]; 
```

在`indexPathForRow`您可以传递您的行号并将其递增到行尾。

我认为这会奏效。

希望这会有所帮助

**

## 当你使用 textview 时，你可以试试这个

**

```
count=txtvw.frame.size.height; //integer counter initialized as textview's height

//call "scrolltextview" method at regular time interval. (here it is calling method in 0.3 second timespan)
self.timer = [NSTimer scheduledTimerWithTimeInterval:.3f
                                                  target:self
                                                selector:@selector(scrolltextview)
                                                userInfo:nil
                                                 repeats:YES]; 
```

```
 -(void)scrolltextview
{

     //iterate "count" every time the method is called by the lineheight of textview's font.
        count=count+ txtvw.font.lineHeight;

    if(count<=txtvw.text.length)
    {
    NSRange range = NSMakeRange(count - 1, 1);

        [txtvw scrollRangeToVisible:range]; // scroll with range
    }
    else {
        [timer invalidate]; // if count match with the condition than invalidate the timer so method not called now.
    }

} 
```

我将它与`NSTimer`对象一起使用。希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-11T18:38:14.907

```
class AutoScrollView: UIScrollView {
    var timer: Timer?
    override func didMoveToSuperview() {
        super.didMoveToSuperview()
        timer?.invalidate()
        timer = Timer.scheduledTimer(timeInterval: 1.0 / 30.0, target: self, selector: #selector(timerAction), userInfo: nil, repeats: true)
    }
    @objc func timerAction() {
        contentOffset.y = contentOffset.y + 1
        if contentOffset.y >= contentSize.height - bounds.height {
            contentOffset.y = 0
        }
    }
} 
```

上面将自动滚动滚动视图并在它到达结束时循环它。

# r - 在R程序中排序后重新编号行

> ID：12505712
> 
> 赞同：21
> 
> 时间：2012-09-20T03:29:24.340
> 
> 标签：r

我已经订购了一组行来获得这个：

```
2   1983  TRI-COUNTY  TRAUTH         0.1495 0.1395     NA      452 0.0764      4      0  06/02/83
4   1983  TRI-COUNTY  TRAUTH         0.1193 0.1113     NA       32 0.0764      4      2  07/20/83
14  1983  TRI-COUNTY  TRAUTH         0.1064 0.1064     NA       26 0.0763      6      2  08/03/83
17  1983  TRI-COUNTY  TRAUTH         0.1110 0.1010 0.1010      176 0.0763      7      4  08/08/83
24  1983  TRI-COUNTY  TRAUTH         0.1293 0.1215     NA      452 0.0763      4      0  09/12/83
41  1984  TRI-COUNTY  TRAUTH         0.1325 0.1225     NA      452 0.0740      4      0  06/20/84
45  1984  TRI-COUNTY  TRAUTH         0.1425 0.1325     NA       32 0.0741      4      2  07/17/84
47  1984  TRI-COUNTY  TRAUTH         0.1395 0.1395 0.1250       91 0.0741     14     11  07/16/84 
```

但我想重新编号，这样它的 1、2、3、4 等等......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-20T03:44:20.173

你只是在寻找这样的东西吗？：

```
row.names(datasetname) <- 1:nrow(datasetname) 
```

或者，如果您的示例数据中的第一列是数据框中的变量（比如`V1`）而不是`row.names`，这将起作用：

```
datasetname$V1 <- 1:nrow(datasetname) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-12-17T19:15:14.213

这是最简单的方法：

```
rownames(dataset) = NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-08T18:16:36.557

另一种解决方案，通常在绑定行时使用：

```
dataset <- rbind( dataset , make.rows.names=FALSE ) 
```

# http - 谷歌地图方向 API - 可以通过 POST 参数化 URL？

> ID：12505715
> 
> 赞同：2
> 
> 时间：2012-09-20T03:30:01.287
> 
> 标签：http, google-maps, post, get

我想**确认**一下 Google 地图网址是否：

> [http://maps.googleapis.com/maps/api/directions/json](http://maps.googleapis.com/maps/api/directions/json)

可以通过 POST 参数化。我尝试**在 explorer**中通过 GET 使用它，如下所示：

> [http://maps.googleapis.com/maps/api/directions/json?origin=41.90119000000001,-87.62979000000001&destination=34.052360,-118.243560&sensor=false&units=metric&language=en-US](http://maps.googleapis.com/maps/api/directions/json?origin=41.90119000000001,-87.62979000000001&destination=34.052360,-118.243560&sensor=false&units=metric&language=en-US)

并且工作正常，但是如果我尝试**在我的 Android 应用程序中**通过 POST 使用它，请通过 OutputStream 发送此查询：

> 起源=19.369707,-99.266696&destination=19.022489,-98.615814&sensor=false&units=metric&language=es

我收到此错误：

> {“路线”：[]，“状态”：“REQUEST_DENIED”}

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T05:37:57.397

在做了一些测试后试图从以下位置检索 JSON 对象：

```
http://maps.googleapis.com/maps/api/directions/json 
```

我可以假设只能通过 GET 对其进行参数化。

您不能通过 POST 参数化 Google 地图路线 URL。

我希望它可以帮助某人。

# c# - 图表式树形控件

> ID：12505716
> 
> 赞同：-1
> 
> 时间：2012-09-20T03:30:16.890
> 
> 标签：c#, diagram

我想创建如下图所示的 ui。我想我可以很容易地在图片框上创建那种图像。但是每个节点都应该是可选择的并且可以右击或左击。我想我可以为每个节点创建一个按钮，但我担心我可能必须创建新的 UI 控件。是否已经为此做了任何事情？

更新：嗯...实际上太多了。我对开源项目更感兴趣并发现了以下内容。

*   [http://www.dalssoft.com/diagram/screenshots.aspx](http://www.dalssoft.com/diagram/screenshots.aspx)
*   [http://code.google.com/p/nshape/](http://code.google.com/p/nshape/)
*   [http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4](http://www.codeproject.com/Articles/24681/WPF-Diagram-Designer-Part-4)

![在此处输入图像描述](../Images/4ecf78c4770c0f03f43acdea490abba0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:34:55.840

> 是否已经为此做了任何事情？

应该有很多选择，但根据自己的经验，我们将[yFiles Web](http://www.yworks.com/en/products_yfiles_web_about.html)用于内部项目，并且对结果非常满意。

# java - maven 似乎没有按顺序编译 - 找不到符号

> ID：12505721
> 
> 赞同：2
> 
> 时间：2012-09-20T03:31:17.087
> 
> 标签：java, maven, compiler-errors

我刚刚将一个项目从 ant 转换为 maven，并且在构建一个 jar 时出现错误，该 jar 的行为就像源文件没有按正确的顺序编译一样。我有一个看起来像这样的枚举类型：

```
public enum LmsError implements ILmsError {
    UC0001() {
        @Override
        public String msg() {
            return this.getClass().getName() + "-" + this + ": constructor failed: ";
        }
    }, 
```

界面如下所示：

```
public interface ILmsError {
    public abstract String msg();
} 
```

...这是使用它的代码示例。'throws' 行是下面的错误消息所抱怨的行，但如果我注释掉该语句，它只会在下次引用 msg() 方法时得到类似的错误。使用枚举的哪个元素并不重要。

```
} catch (Exception e) {
      throw new RuntimeException(LmsError.UC0001.msg() + "Unable to construct status based on " + codeEnumeration + ":" + e.getMessage(), e);
} 
```

mvn 清理编译

```
[compiler:compile]
Compiling 129 source files to C:\bsaastad\workspaces\theportaltree\redirect\redirect-ejb\target\classes
-------------------------------------------------------------
COMPILATION ERROR : 
-------------------------------------------------------------
com/theportaltree/redirect/status/RedirectStatus.java:[156,58] cannot find symbol
symbol  : method msg()
location: class com.theportaltree.lms.LmsError
1 error 
```

如果我在没有清理的情况下再次编译，我会得到类似的东西（有时需要两次额外的编译才能通过所有文件）：

```
[compiler:compile]
Compiling 89 source files to C:\bsaastad\workspaces\theportaltree\redirect\redirect-ejb\target\classes

[resources:testResources] 
```

一个干净的编译。

如果我在失败后查看输出目录，我发现生成的枚举类都不存在，这就解释了错误。一旦我成功编译，枚举类就如预期的那样存在。

这都在同一个项目中，所以我不认为这是一个依赖问题。我刚刚将它从 ant 构建转换为 maven（maven newbie），它已经编译了几年没有问题。这是 pom.xml 中的插件部分。有什么遗漏吗？错误的版本？我很难过：

```
<build>
    <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>2.5.1</version>
      <configuration>
        <!-- put your configurations here -->
        <source>1.6</source>
        <target>1.6</target>
      </configuration>
    </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <ejbVersion>3.1</ejbVersion>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.8.1</version>
            <configuration>
                <!-- javadoc configuration options here -->
            </configuration>
        </plugin>
    </plugins>
</build> 
```

任何帮助/想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T05:09:44.643

您是否在执行命令行 Maven 构建的同时运行 IDE？

我发现有时如果您的 IDE 支持 Maven（例如带有 m2Eclipse 插件的 Eclipse），您可能会在两个“竞赛”Maven 引擎之间产生不希望的交互。

如果关闭 IDE 会导致可靠的干净构建，请检查其配置选项 - 它可能会轮询文件系统的更改，这反过来会启动（干​​净？）构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:32:17.060

尝试从命令行运行 maven（与您现在运行的 mvn clean compile 相同）。

顺便说一句，接口 ILmsError、枚举 LmsError 和引发运行时异常并使用消息的代码是否驻留在同一模块中？也许它只是缺乏“依赖”？

# c++ - 类和线性回归

> ID：12505723
> 
> 赞同：0
> 
> 时间：2012-09-20T03:31:25.673
> 
> 标签：c++, linked-list

很抱歉打扰你，但我需要帮助。

我有一个任务来制作一个带有类的程序并计算线性回归，但是我的链表类只接收一个值，我不知道为什么。代码编译但它不计算线性回归。

这是我的代码：

```
#include<iostream>
#include<cmath>
#include<fstream>
#include<iomanip>
#include<istream>
#include<string>

float a,b,r;
float X[20],Y[20],n = 10, z;
int intAux = 0, intI;
//double dblSumX,dblSumY,dblSumX2,dblSumY2,dblSumXY;
float dblSumX,dblSumY,dblSumX2,dblSumY2,dblSumXY;
//double dblSXX,dblSYY,dblSXY;
float dblSXX,dblSYY,dblSXY;

using namespace std;

// Clase Nodo
//p.base=
class Nodo {
float fltEstProxySize;
float fltDevelHours;
float fltEst;
Nodo* next;

 public:
  Nodo() {};
  void SetVariables(float data)
  {
      fltEstProxySize = data;
      fltDevelHours = data;
      fltEst = data;
  }

  void SetData(float EPS, float DH, float ES)
  {  
      fltEstProxySize = EPS;
      fltDevelHours = DH;
      fltEst = ES;
  };

  void SetNext(Nodo* aNext) 
  { 
      next = aNext;
  };

  float Data() 
  {  
      return(fltEstProxySize, fltDevelHours, fltEst);
  };

  Nodo* Next() 
  { 
      return next; 
  };
  };

 //p.
 //... Clase de la Lista ...
 class Lista {
Nodo *head;

 public:
  Lista() { head = NULL; };
  void Print();
  void Append(float fltEstProxySize, float fltDevelHours, float fltEst);
  void Delete(float fltEstProxySize, float fltDevelHours, float fltEst);
 };

/**
 * ... Imprime el contenido de la lista
 */
 //i.
void Lista::Print() {

// ... Apuntador temporal ...
Nodo *tmp = head;

// ... No hay Nodos ...
if ( tmp == NULL ) {
    cout << "EMPTY" << endl;
    return;
}

// ... Existe un Nodo in the Lista ...
if ( tmp->Next() == NULL ) {
    cout << tmp->Data();
    cout << " --> ";
    cout << "NULL" << endl;
}
else {
    // ... Recorre la lista y la imprime ...
    do {
        cout << tmp->Data();
        cout << " --> ";
        tmp = tmp->Next();
    }
    while ( tmp != NULL );

    cout << "NULL" << endl;
}
  }

  //i.
  // ... Agrega un nodo a la lista ...
  void Lista::Append(float fltEstProxySize, float fltDevelHours, float fltEst){

// ... Aqui crea a Nodo nuevo ...
Nodo* newNodo = new Nodo();

newNodo->SetData(fltEstProxySize, fltDevelHours, fltEst);
newNodo->SetNext(NULL);

// ... Crea un apuntador temporal ...
Nodo *tmp = head;

if ( tmp != NULL ) {
    // ... El Nodo esta en la Lista ...
    // ... Recorre la Lista ...
    while ( tmp->Next() != NULL ) {
        tmp = tmp->Next();
    }
    // ... El ultimo Nodo de la lista ...
    tmp->SetNext(newNodo);
}
else {
    // ... Nuevo Nodo de la lista ...
    head = newNodo;
}
   }

   /**
    * ... Borra un Nodo de la Lista ...
    */
  //i.
  void Lista::Delete(float fltEstProxySize, float fltDevelHours, float fltEst){

// ... Crea un Nodo temporal ...
Nodo *tmp = head;

// ... No hay Nodos ...
if ( tmp == NULL )
    return;

// ... ultimo Nodo de la Lista ...
if ( tmp->Next() == NULL ) {
    delete tmp;
    head = NULL;
}
else {
    // ... Recorre los nodos ...
    Nodo *prev;
    do {
        //if ( tmp->Data() == data ) break;
        if(tmp->Data() == fltEstProxySize && tmp->Data() == fltDevelHours) break;
        prev = tmp;
        tmp = tmp->Next();
    } while ( tmp != NULL );

    // ... Ajusta los Nodos ...
    prev->SetNext(tmp->Next());

    // ... Borra el Nodo actual ...
    delete tmp;
}
   }

   //i.
   class RegresionLineal
   {
Nodo *head;
int i;
//double dblSumX=0,dblSumY=0,dblSumX2=0,dblSumY2=0,dblSumXY=0;
//double dblSumX,dblSumY,dblSumX2,dblSumY2,dblSumXY;
//double dblSXX,dblSYY,dblSXY;

   public:
RegresionLineal(){head = NULL;};
void Calculo();

  };

  void RegresionLineal::Calculo()
  {
for (intI=0;intI < 20; intI++)
{   
    //if (X[intI] != 0)
    //{
        dblSumX += X[intI];
        dblSumX2 += (X[intI] * X[intI]);
    //}

    //if(Y[intI] !=0)
    //{
        dblSumY += Y[intI];
        dblSumY2 += (Y[intI] * Y[intI]);
        dblSumXY += (X[intI] * Y[intI]);
    //}
}

dblSXX = dblSumX2 - dblSumX * dblSumX / n;
dblSYY = dblSumY2 - dblSumY * dblSumY / n;
dblSXY = dblSumXY - dblSumX * dblSumY / n;

// ... pendiente infinita ...
if (abs(dblSXX) == 0)
    //return 0;
    z=0;

// ... calcula la pendiente ...
b = dblSXY / dblSXX;
a = dblSumY / n - (b) * dblSumX / n;

// ... calcula el coeficiente de regresion ...
if (abs(dblSYY) == 0)
    r = 1;
else
    r = dblSXY / sqrt(dblSXX * dblSYY);

     }

     // ... ... ... ... ... ... ... ... ... ... ... ... ...
    int main()
    {
   // ... Variables auxiliares ...
       float fltMedia2 = 0;
       float fltDevStd1 = 0;
   float fltDevStd2 = 0;
   float fltSuma1 = 0;
   float fltSuma2 = 0;
   float fltCuenta = 0;
   int intF = 0;
   float fltAux1 = 0, fltAux4 = 0, fltMedia1, fltAux3;
float fltAux2 = 0;

Lista lista;
RegresionLineal RL;

// ... inicializa arreglo ...
for (intI = 0; intI < 20; intI++)
{
    X[intI] = 0;
    Y[intI] = 0;
}

// ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... 

cout << "\nPlease introduce the values of table 1: (Note: to finish just type -1 and hit enter)\n";

while(!cin.eof())
{   //d.
    cout << "\nPlease introduce X: ";
    cin >> fltAux1;
    cout << "\nPlease introduce Y: ";
    cin >> fltAux2;
    cout << "\nPlease introduce the estimate: ";
    cin >> fltAux3;
    //d.
    //d.

    if ((fltAux1 == -1) || (fltAux2 == -1))
    {
        break;
    }
    else
    {
        lista.Append(fltAux1, fltAux2, fltAux3);
        X[intI] = fltAux1;
        Y[intI] = fltAux2;
        fltCuenta = fltCuenta + 1;
        intI++;
        cout << "fltAux1: " << fltAux1 << endl;
        cout << "fltAux2: " << fltAux2 << endl;
    }
}

lista.Print();
// ... Calcula la regresión lineal ...
RL.Calculo();
cout << "\na: " << a << "\n" << endl;

cout << "Suma X: " << dblSumX << endl;
cout << "Suma Y: " << dblSumY << endl;
cout << "Suma X2: " << dblSumX2 << endl;
cout << "Suma Y2: " << dblSumY2 << endl;
cout << "Suma X*Y:" << dblSumXY << endl;

return 0;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:55:03.860

尽管代码中还有其他几个问题/可能的改进，但您现在面临的问题是因为您在函数循环`intI`之前没有重置为 0 。`while``main`

以下是更正后的代码摘录：

```
// ... inicializa arreglo ...
for (intI = 0; intI < 20; intI++)
{
    X[intI] = 0;
    Y[intI] = 0;
}

// ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... 

cout << "\nPlease introduce the values of table 1: (Note: to finish just type -1 and hit enter)\n";

intI = 0;          //Corrected here

while(!cin.eof()) 
```

# android - 为 PagerAdapter / ViewPager 问题添加/删除视图 Android

> ID：12505725
> 
> 赞同：2
> 
> 时间：2012-09-20T03:31:31.193
> 
> 标签：android

我想始终保留 3 个视图的列表。应用程序从位置 1 开始（位置 0、1、2 之外）。当有人滚动到位置 0 时，我想删除视图 2，并在位置 0 之前创建一个视图。这样，在用户看来，有无限的视图。同样，当有人滚动到位置 2 时，我想删除位置 0 的视图并在最后添加一个。

但是，我在添加和删除视图时都遇到了问题。当我到达位置 0 时，除非我尝试滚动超过位置 0（到位置 -1，即边界被击中），否则没有任何变化。那时，我可以看到它是我的视图的边界，但随后`setCurrentItem(1,false)`被触发，我被带回视图的中间。当我滚动到位置 2 时，我看到位置 2 已更新。但是位置 0 和 1 保持不变。

当我滚动到位置 2 时，什么也没有发生。但是，如果我尝试滚动到边界，由于某种原因，位置 0 会被更新并被`setCurrentItem(1,false)`触发。

我不知道为什么会这样。任何人都可以对此有所了解吗？

这是我的代码：

```
public class MainActivity extends Activity {

ArrayList<Integer> showThree = new ArrayList<Integer>();
    int focusedPage = 0;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        showThree.add(0,5); //adding integers 5,6,7 for positions 0,1,2
        showThree.add(1,6);
        showThree.add(2,7);

        final MyPagerAdapter adapter = new MyPagerAdapter(getApplicationContext(),showThree);
        final ViewPager myPager = (ViewPager) findViewById(R.id.mypanelpager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(1);

myPager.setOnPageChangeListener(new OnPageChangeListener(){

        @Override
        public void onPageScrollStateChanged(int state) {
            if (state == ViewPager.SCROLL_STATE_IDLE) {

//when position= 0, change the 3 views from 5,6,7 to 4,5,6\. 
                 if (focusedPage == 0) {
                     showThreeMonths.set(0,4);
                     showThreeMonths.set(1,5);
                     showThreeMonths.set(2,6);
                     adapter.notifyDataSetChanged();
                     adapter.startUpdate(myPager);

                     }
                 else if (focusedPage ==2){
                        //ignore, just testing focusPage=0 for now }

                 }

//set current page to the middle of the 3 new views, which would be 
//the same view at position 0 of the old 3 views. 
//Thus user doesn't experience the views changing despite being 3 new views.

             myPager.setCurrentItem(1,false); 

        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onPageSelected(int position) {
            focusedPage = position; 

        }

    });
} 
```

寻呼机适配器

```
public class MyPagerAdapter extends PagerAdapter {

private ArrayList<Integer> showThreeMonths;
private Context ctx;

public MyPagerAdapter (Context ctx, ArrayList<Integer> showThree){
    this.ctx = ctx ;
    this.showThree = showThree;
}

@Override
public int getCount() {
    return showThree.size();
}

public Object instantiateItem(ViewGroup collection, int position ){
    //NewCustomView is a class I made that takes parameters context and an integer and creates a view based on the integer
    NewCustomView MyOwnView = new NewCustomView(ctx, showThree.get(position)); 

    View customViewLayout = MyOwnView.newLayout; //part of the class object
    collection.addView(customViewLayout);
    return customViewLayout;
 }

@Override
 public void destroyItem(ViewGroup collection, int position, Object arg2) {
     ((ViewPager) collection).removeView((ViewGroup) arg2);}

 @Override
 public Parcelable saveState() {
     return null;}

@Override
public boolean isViewFromObject(View view, Object arg1) {
    return view==arg1;}
@Override
public void startUpdate(ViewGroup collection) {}

@Override
public void finishUpdate(ViewGroup collection) {}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:39:04.167

instanceiteItem() 方法默认在内存中创建 2 个视图页面。因此，当您滑动到第二页时，会重新创建 0 页，因为它超出了内存中保存的 2 页的范围。请尝试使用

```
myViewPager.setOffscreenPageLimit(numberOfPages) 
```

方法接收一个整数作为参数，并声明在回收之前应该保留多少页。

# java - J2EE - 动态 Web 项目 - 无法运行我的 helloworld 应用程序

> ID：12505727
> 
> 赞同：0
> 
> 时间：2012-09-20T03:31:38.370
> 
> 标签：java, eclipse, servlets

我目前正在尝试运行一个检查 GET 值并写入该值的 servlet。

这是我的课：

```
 import java.io.IOException;

    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class Servlet extends HttpServlet {

        /**
         * 
         */
        public Servlet() {
            // TODO Auto-generated constructor stub
        }

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            final String myValue = request.getParameter("MyValue");
            if (myValue != null && !myValue.isEmpty()) {
                response.getWriter().write(myValue);
            }
        }

    } 
```

这很简单，对吧？

我已经尝试了很多 url 来查看我的结果，如下所示：

```
 - http://localhost:8080/Servlet/servlet/Servlet
 - http://localhost:8080/Servlet/servlet/Servlet?MyValue=Test
 - http://127.0.0.1:8080/Servlet/servlet/Servlet
 - http://127.0.0.1:8080/Servlet/servlet/Servlet?MyValue=Test 
```

我的代码有问题还是我的 Eclipse 有问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:38:36.430

您没有告诉任何有关问题症状的信息，但我假设您在所有尝试中都会收到 HTTP 404 错误页面，对吧？

您需要将 servlet 映射到 URL 模式。首先，您需要确保将 servlet 类放在一个包中（我们将`com.example`在此答案中假设）。

如果您仍在使用 Java EE 5（甚至 J2EE..），请在 webapp 中注册它`/WEB-INF/web.xml`（Eclipse 应该自动生成一个）：

```
<servlet>
    <servlet-name>servlet</servlet-name>
    <servlet-class>com.example.Servlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>servlet</servlet-name>
    <url-pattern>/servlet</url-pattern>
</servlet-mapping> 
```

*（servlet 名称基本上是实例变量名称，[应用程序范围内只有一个](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading/3106909#3106909)；servlet 类显然是 FQN；URL 模式是 servlet 的 webcontent-relative URL）*

或者，当您已经在最新的 Java EE 6 上时，请在[`@WebServlet`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebServlet.html)其中将 URL 模式指定为值进行注释：

```
package com.example;

// ...

@WebServlet("/servlet")
public class Servlet extends HttpServlet { 
    // ...
} 
```

无论哪种方式，它基本上都在告诉 servlet 应该监听 webcontent-relative URLs matching `/servlet`。因此，假设您的网络上下文根路径是`/Servlet`，那么应该这样做：

```
http://localhost:8080/Servlet/servlet 
```

将来，如果您通过*New > Servlet*而不是*New > Class*创建 servlet 类会更容易，那么向导中将自动考虑到这一切。

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含一些 Hello World 示例 - 您可以通过将鼠标悬停在[servlet](/questions/tagged/servlets "显示标记为“servlet”的问题")上方一段时间，直到出现黑色信息框，然后单击其中的*信息*链接来访问此页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:45:45.447

您可以通过在 eclipse -> Properties -> Web Project Settings 中右键单击您的项目来找到您的 Context Root。

# qt - 重叠网格和某些功能不起作用

> ID：12505729
> 
> 赞同：1
> 
> 时间：2012-09-20T03:31:51.577
> 
> 标签：qt

![重叠网格的问题](../Images/630820f8969a4d3138ecd978aa1920e3.png)

我有一个问题如下：

在图中，我有不同的导体层。通过选择不同的导体，电缆视图会相应改变。但是随着不同层的图像大小的增长，电缆视图网格与电缆层网格重叠。所以当我到达护套、绝缘体等时，我无法选择复选框中的项目。我试图减小图像的像素大小，但它不起作用，并且当我单击它时，每个图层都会弹出不同的属性。图像中的那个窗口是最大化的窗口。

有人可以为此提出解决方案吗？

# c# - 如何删除此网格中的多余图块？

> ID：12505739
> 
> 赞同：1
> 
> 时间：2012-09-20T03:33:16.730
> 
> 标签：c#, algorithm, game-engine, procedural-generation

我正在开发基于图块的 2D 游戏，并且地图生成存在小问题。

一般概念是它默认创建一个房间，然后在任何现有房间的基础上构建，直到构建了 X 个房间或 Y 次尝试失败。

我遇到的问题可能很简单，我只是想不通，但是我将如何去除带圆圈的瓷砖？生成的每张地图都是程序性的，所以我不知道什么时候会出现像圆圈那样的点，我可以很容易地用我的眼睛发现它们……我只是想不出一种在地图之后处理它们的包罗万象的方法已经生成。

目标是永远不要在不需要的地方加倍墙壁。我不想改变地图的生成方式，而是在事后修改它。我也不想失去房间或类似的角落。

我真的觉得我正在尝试做的事情会在图像编辑或类似领域有一个名字，但这肯定不是我的强项。

![描述的图像](../Images/0605b1dc3e9d745ae371669e0096493d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:42:01.170

您圈出的物品是模棱两可的，因为在某些情况下，您可以在不违反规则的情况下移除您或另一边圈出的物品（没有混合室，也不向外部黑色瓷砖开放）。

无论如何，我应该多考虑一下，但它们似乎只是被移除后没有加入两个房间的瓷砖，也没有任何相邻的（包括对角线）黑色瓷砖。

我想您可以为每个房间分配一个编号，然后删除任何瓷砖：

*   不连接两个不同编号的地砖
*   没有相邻的黑色块

也许你也可以在不给房间编号的情况下做到这一点，但你必须通过利用边邻接来了解所有邻居是否来自同一个房间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T15:05:13.620

如果可以的话，我会发表评论而不是回答，因为我不能，我会给出答案。

你如何存储关卡的细节？您似乎想知道两个水平或两个垂直墙壁在哪里接触并删除它们，只要它们不是角落。

看来您需要一两条规则，例如...

如果它是水平墙并且两边都有瓷砖，请删除上面或下面的任何内容。

如果是竖墙并且上下有瓷砖，则删除左边或右边的任何一个

# ruby-on-rails - 创建嵌套资源

> ID：12505742
> 
> 赞同：0
> 
> 时间：2012-09-20T03:33:46.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, nested-resources

每次面对同样的情况时，我都有一个困扰我的问题。

如何创建嵌套资源..

我有以下回购

```
 https://github.com/abhishekdagarit/app-e-commerce.git 
```

您可以克隆存储库并创建数据库以查看项目。

我需要为产品添加类别..

```
 product
    belongs_to_and_has_many :categories

 category
    has_many :products 
```

谁能告诉我如何实现这一点才能正常工作......我为个别产品添加了评论，但这花了我四个小时才实现......

这是我平时做的...

```
 1). add the category model using 
       rails g model category category_type:string

  2). then add the has_to and the belongs_to_and_has_many in the models

  3). add the controller 
       rails g controller categories

  4). add the following lines in the categories controller
       class CategoriesController < ApplicationController
       def new
         @product = Product.find(params[:product_id])
         @category = @product.categories.build
         respond_with(@category)
       end
      def create
         @product = Product.find(params[:product_id])
         @category = @product.categories.create(params[:category])
         redirect_to product_path(@product)
      end
     end 
```

现在的问题是这些步骤似乎不起作用......

我需要有人帮助我编写几行代码以创建嵌套资源......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T06:46:28.327

您可以从 rails 指南中找到[嵌套资源。](http://guides.rubyonrails.org/routing.html#nested-resources)

您是否尝试过以下嵌套资源？

```
resources :categories do
    resources :products
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T07:58:20.743

您可能还想结帐：

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

# android - 需要从移动 Web 应用程序链接到本机映射的新方法

> ID：12505745
> 
> 赞同：1
> 
> 时间：2012-09-20T03:34:41.377
> 
> 标签：android, iphone, mobile, mobile-website, ios6

我的移动网络应用程序使用地图链接，只需链接到“maps.google.com/maps?q=[something]”即可自动启动 Android 或 iPhone 的地图功能。iOs 6 出来了，链接停止工作，因为苹果希望我们使用“ **maps.APPLE.com** ”。所以现在我必须专门检测 iOs 6 并换掉链接。

**有没有一种干净的方法可以从适用于 Android、iOs 6 和 iOs pre-6 的移动 Web 应用程序打开设备/本机地图应用程序，因为 iOs 6 削弱了它？**

原来你发送到“maps.apple.com”的任何东西都会被转发到“maps.google.com”！

这两个链接都指向同一个地方

[http://maps.google.com/maps?q=New+York](http://maps.google.com/maps?q=New+York)

[http://maps.apple.com/maps?q=New+York](http://maps.apple.com/maps?q=New+York)

最近更新了 Apple 开发网站上的文档... [http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html#//apple_ref/doc/uid/TP40007894-SW1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:58:44.333

我在我的 iPhone 上试过这个，maps.apple.com 确实启动了新的 Apple Maps 应用程序（但我只在地址栏中输入了它）。当我在 iMac 上使用 Chrome 访问相同的链接时，我被重定向到 maps.google.com。我相信这是苹果故意的。如果您的目标是装有 iOS 6 的 iPhone，那么您需要从 google.com 切换到 apple.com。它应该是无缝的。

[CONFIRMED - this works on my iPhone with iOS 6.0 - I no longer have a iOS 5.x device to confirm that this redirects on a previous version of iOS. It does do the redirect in Safari, but it is broken in the iPhone Simulator]

```
// javascript snippet to detect ipad/iphone OS version - these are notoriously fragile, use at your own risk :)
function getOsVersion() {
var osVersion = window.navigator.userAgent.match(/(ipad|iphone);\s+cpu\s.*os\s+([_0-9]+)/i);
if (osVersion && osVersion.length === 3) {
    return Number(osVersion[2].replace('_', '.'));
}

return 0; 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T04:44:58.353

在 Android 中，您可以使用以下 Intent URI：

```
geo:latitude,longitude
geo:latitude,longitude?z=zoom
geo:0,0?q=my+street+address
geo:0,0?q=business+near+city 
```

例如：

```
String uri = "geo:37.167629,-121.222478";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri) );
startActivity(intent); 
```

# cuda - __global__ 函数如何像 C/C++ 一样返回值或中断

> ID：12505750
> 
> 赞同：11
> 
> 时间：2012-09-20T03:35:08.867
> 
> 标签：cuda

最近我一直在 CUDA 上进行字符串比较工作，我想知道 __global__ 函数如何在找到我正在寻找的确切字符串时返回一个值。

我的意思是，我需要包含大量线程的 __global__ 函数来同时在一个大字符串池中找到某个字符串，我希望一旦捕获到确切的字符串，__global__ 函数可以停止所有线程并返回回到主要功能，并告诉我“他做到了”！

我正在使用 CUDA C。我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-20T04:22:56.240

在 CUDA（或 NVIDIA GPU）中，一个线程无法中断所有正在运行的线程的执行。一旦找到结果，您就不能立即退出内核，这在今天是不可能的。

但是你可以让所有线程在一个线程找到结果后*尽快退出。*这是您将如何做到这一点的模型。

```
__global___ void kernel(volatile bool *found, ...) 
{
    while (!(*found) && workLeftToDo()) {

       bool iFoundIt = do_some_work(...); // see notes below

       if (iFoundIt) *found = true;
    }
} 
```

对此的一些说明。

1.  注意使用`volatile`. 这个很重要。
2.  确保在启动内核之前初始化`found`（必须是设备指针） ！`false`
3.  当另一个线程更新时，线程不会立即退出`found`。它们只会在下次返回到 while 循环的顶部时退出。
4.  你如何实施`do_some_work`很重要。如果工作量太大（或变量太大），则找到结果后退出的延迟会很长（或变量）。如果工作太少，那么您的线程将花费大部分时间检查`found`而不是做有用的工作。
5.  `do_some_work`还负责分配任务（即计算/递增索引），以及如何做到这一点是特定于问题的。
6.  如果您启动的块数远大于当前 GPU 上内核的最大占用率，并且在第一次运行的线程块“波”中未找到匹配项，则此内核（以及下面的内核）可能会死锁. 如果在第一波中找到匹配项，则后面的块将仅在 之后运行`found == true`，这意味着它们将启动，然后立即退出。解决方案是同时启动尽可能多的块（也称为“最大启动”），并相应地更新您的任务分配。
7.  如果任务数量比较少，可以`while`用 an代替`if`，运行刚好够覆盖任务数量的线程。那么就没有死锁的机会（但前一点的第一部分适用）。
8.  `workLeftToDo()`是特定于问题的，但是当没有工作要做时它会返回 false ，这样我们就不会在*找不到匹配项*的情况下陷入僵局。

现在，上述情况可能会导致过度的分区驻留（所有线程都在同一内存上），尤其是在没有 L1 缓存的旧架构上。因此，您可能想要编写一个稍微复杂一点的版本，使用每个块的共享状态。

```
__global___ void kernel(volatile bool *found, ...) 
{
    volatile __shared__ bool someoneFoundIt;

    // initialize shared status
    if (threadIdx.x == 0) someoneFoundIt = *found;
    __syncthreads();

    while(!someoneFoundIt && workLeftToDo()) {

       bool iFoundIt = do_some_work(...); 

       // if I found it, tell everyone they can exit
       if (iFoundIt) { someoneFoundIt = true; *found = true; }

       // if someone in another block found it, tell 
       // everyone in my block they can exit
       if (threadIdx.x == 0 && *found) someoneFoundIt = true;

       __syncthreads();
    }
} 
```

这样，每个块有一个线程轮询全局变量，并且只有找到匹配项的线程才会写入它，因此全局内存流量被最小化。

另外：__global__ 函数是无效的，因为很难定义如何将值从 1000 个线程返回到单个 CPU 线程。用户在设备或零拷贝内存中设计适合其目的的返回数组是微不足道的，但很难制作通用机制。

**免责声明**：在浏览器中编写的代码，未经测试，未经验证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-20T11:09:10.883

如果您喜欢冒险，停止内核执行的另一种方法是只执行

```
// (write result to memory here)
__threadfence();
asm("trap;"); 
```

如果找到答案。

这不需要轮询内存，但不如 Mark Harris 建议的解决方案，因为它使内核退出并出现错误情况。这可能会掩盖实际错误（因此请务必以清楚地允许从错误中区分成功执行的方式写出您的结果），并且可能会导致其他问题或降低整体性能，因为驱动程序将此视为异常。

如果您正在寻找一个安全且简单的解决方案，请改用 Mark Harris 的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:02:37.920

全局函数并不像您想象的那样真正包含大量线程。它只是一个内核，在设备上运行的函数，通过传递指定线程模型的参数来调用。CUDA 采用的模型是 2D 网格模型，然后是网格上每个块内部的 3D 线程模型。

对于您遇到的问题类型，除了在每个块中使用 1D 线程的 1D 网格之外，实际上没有必要使用任何东西，因为字符串池像其他问题（例如矩阵乘法）那样拆分成 2D 并没有真正意义

我将通过一个简单的示例，例如字符串池中的 100 个字符串，并且您希望以并行方式而不是按顺序检查它们。

```
//main
//Should cudamalloc and cudacopy to device up before this code
dim3 dimGrid(10, 1); // 1D grid with 10 blocks
dim3 dimBlocks(10, 1); //1D Blocks with 10 threads 
fun<<<dimGrid, dimBlocks>>>(, Height)
//cudaMemCpy answerIdx back to integer on host

//kernel (Not positive on these types as my CUDA is very rusty
__global__ void fun(char *strings[], char *stringToMatch, int *answerIdx)
{
    int idx = blockIdx.x * 10 + threadIdx.x;

    //Obviously use whatever function you've been using for string comparison
    //I'm just using == for example's sake
    if(strings[idx] == stringToMatch)
    { 
       *answerIdx = idx
    }
} 
```

这显然不是最有效的，并且很可能不是传递参数和使用 CUDA 使用内存的确切方法，但我希望它能够理解拆分工作负载的意义，并且“全局”函数可以在许多不同的地方执行核心，所以你不能真正告诉他们停止。可能有一种我不熟悉的方法，但是通过将工作负载分配到设备上（当然是以合理的方式）所获得的加速已经给你带来了巨大的性能改进。为了了解线程模型，我强烈建议您阅读 Nvidia 网站上的 CUDA 文档。它们将极大地帮助您，并教您设置网格和块以获得最佳性能的最佳方法。

# windows - @echo 在 cmd 中关闭

> ID：12505754
> 
> 赞同：11
> 
> 时间：2012-09-20T03:35:34.567
> 
> 标签：windows, cmd, echo

我正在尝试编写一个 BAT 脚本，我有以下内容：

```
@echo off
REM Comments here
SETLOCAL ENABLEDELAYEDEXPANSION
set PROG_ROOT=C:\Prog
set ONE=1

echo 1>> %PROG_ROOT\test.txt
echo %ONE%>> %PROG_ROOT\test.txt

for /f "tokens=*" %%f in (folders.txt) do (
    echo %%f>> %PROG_ROOT\test.txt
)

ENDLOCAL 
```

我的folders.txt 包含数字“5”。

我的 test.txt 输出是

```
ECHO is off
ECHO is off
5 
```

我不明白为什么前两行输出有“ECHO 关闭”，而第三行打印正确。如何打印正确的输出？

ETA：我试过了

```
echo 1>> %PROG_ROOT\test.txt
echo %ONE% >> %PROG_ROOT\test.txt 
```

我能够打印

```
ECHO is off
1 
```

但是，我不需要在数字后面打印尾随空格。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T03:54:10.537

`1>`（更一般地`n>`，对于任何 digit `n`）被解释为重定向，因此`echo 1>>`看起来`cmd`像一个`echo`没有参数的。`echo`不带参数将打印当前`echo`状态（此处为`ECHO is off`）。

`^`要修复，请使用字符转义整数：

```
echo ^1>> %PROG_ROOT\test.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-28T14:53:24.950

```
echo 1>> %PROG_ROOT\test.txt
echo %ONE%>> %PROG_ROOT\test.txt

for /f "tokens=*" %%f in (folders.txt) do (
    echo %%f>> %PROG_ROOT\test.txt
)

ENDLOCAL 
```

# linux - WordPress 无法安装主题

> ID：12505758
> 
> 赞同：0
> 
> 时间：2012-09-20T03:35:54.497
> 
> 标签：linux, wordpress, apache, permissions, selinux

我无法锻炼如何解决这个问题，所以 wordpress 会让我上传主题。

我的开发机器上安装了 Fedora 17 的新副本。

然后我使用安装 mysql: `yum install mysql mysql-server`。接下来我安装了 WordPress，它还安装了 apache 和 php：`yum install wordpress`

我可以去`http://localhost/wordpress`看看 WordPress 工作。但是当我尝试安装我的主题时，它要求提供 ftp 凭据。然后我更新了 wp-config.php 文件并将`FS_METHOD`常量设置为`direct`. 现在它不要求提供 ftp 凭据，但它给了我这个错误：

```
Could not create directory. /usr/share/wordpress/wp-content/themes/my-theme-name/ 
```

httpd 服务在 'apache' 用户和 'apache' 组下运行。该`/usr/share/wordpress/`目录也由“apache”用户和“apache”组递归拥有。我什至将权限设置为 777（也是递归的），即便如此，我仍然收到与上述相同的错误。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:21:04.447

Fedoras SELinux 配置很可能会阻止网络服务器写入磁盘的尝试。要更改 wordpress 文件夹的设置，您可以运行以下命令（以 root 身份）：

```
chcon -R -t httpd_sys_content_rw_t /usr/share/wordpress/wp-content 
```

不需要`chmod 777`对整个文件夹做，这是一个巨大的安全风险。当然这是直接访问文件系统，你必须禁用 ftp 访问。对于 ftp 访问，您必须查找正确的 SELinux 上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T07:34:35.887

您在 Wp-config.php 中检查了这些行（大约第 105 行）：

```
define('FTP_USER', 'usr');
define('FTP_PASS', 'P@ssw0rd');
define('FTP_HOST', 'url'); 
```

您的 Web 服务器进程在 apache 上运行，但 Wordpress 将使用 wp-config.php 中定义的帐户。所以你必须设置你的用户组来访问这些文件。

设置权限 777 不是解决方案，您必须关心它。

# javascript - 在服务中处理 $http 响应

> ID：12505760
> 
> 赞同：233
> 
> 时间：2012-09-20T03:36:10.003
> 
> 标签：javascript, angularjs, angular-http

我最近发布了关于我在 SO面临[的问题的详细描述。](https://stackoverflow.com/questions/12504747/angularjs-processing-asynchronous-data-in-service)由于无法发送实际`$http`请求，我使用超时来模拟异步行为。在@Gloopy 的帮助下，从我的模型到视图的数据绑定工作正常

现在，当我使用`$http`而不是`$timeout`（在本地测试）时，我可以看到异步请求成功并且`data`在我的服务中填充了 json 响应。但是，我的观点没有更新。

[在这里](http://plnkr.co/edit/RbzODj?p=preview)更新了 Plunkr

* * *

## 回答 #1

> 赞同：418
> 
> 时间：2012-09-20T13:19:10.247

这是一个 Plunk，可以满足您的需求：[http ://plnkr.co/edit/TTlbSv?p=preview](http://plnkr.co/edit/TTlbSv?p=preview)

这个想法是您直接使用 Promise 及其“then”函数来操作和访问异步返回的响应。

```
app.factory('myService', function($http) {
  var myService = {
    async: function() {
      // $http returns a promise, which has a then function, which also returns a promise
      var promise = $http.get('test.json').then(function (response) {
        // The then function here is an opportunity to modify the response
        console.log(response);
        // The return value gets picked up by the then in the controller.
        return response.data;
      });
      // Return the promise to the controller
      return promise;
    }
  };
  return myService;
});

app.controller('MainCtrl', function( myService,$scope) {
  // Call the async method and then do stuff with what is returned inside our own then function
  myService.async().then(function(d) {
    $scope.data = d;
  });
}); 
```

这是一个稍微复杂一点的版本，它缓存了请求，所以你只能第一次做（[http://plnkr.co/edit/2yH1F4IMZlMS8QsV9rHv?p=preview](http://plnkr.co/edit/2yH1F4IMZlMS8QsV9rHv?p=preview)）：

```
app.factory('myService', function($http) {
  var promise;
  var myService = {
    async: function() {
      if ( !promise ) {
        // $http returns a promise, which has a then function, which also returns a promise
        promise = $http.get('test.json').then(function (response) {
          // The then function here is an opportunity to modify the response
          console.log(response);
          // The return value gets picked up by the then in the controller.
          return response.data;
        });
      }
      // Return the promise to the controller
      return promise;
    }
  };
  return myService;
});

app.controller('MainCtrl', function( myService,$scope) {
  $scope.clearData = function() {
    $scope.data = {};
  };
  $scope.getData = function() {
    // Call the async method and then do stuff with what is returned inside our own then function
    myService.async().then(function(d) {
      $scope.data = d;
    });
  };
}); 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-12-20T21:34:25.223

让它变得简单。这很简单

1.  在您的服务中返回`promise`（无需`then`在服务中使用）
2.  `then`在您的控制器中使用

演示。[http://plnkr.co/edit/cbdG5p?p=preview](http://plnkr.co/edit/cbdG5p?p=preview)

```
var app = angular.module('plunker', []);

app.factory('myService', function($http) {
  return {
    async: function() {
      return $http.get('test.json');  //1\. this returns promise
    }
  };
});

app.controller('MainCtrl', function( myService,$scope) {
  myService.async().then(function(d) { //2\. so you can use .then()
    $scope.data = d;
  });
}); 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2012-09-20T05:35:40.227

因为它是异步的，所以`$scope`在 ajax 调用完成之前获取数据。

您可以`$q`在您的服务中使用来创建`promise`并将其返回给控制器，并且控制器在`then()`对`promise`.

在您的服务中，

```
app.factory('myService', function($http, $q) {
  var deffered = $q.defer();
  var data = [];  
  var myService = {};

  myService.async = function() {
    $http.get('test.json')
    .success(function (d) {
      data = d;
      console.log(d);
      deffered.resolve();
    });
    return deffered.promise;
  };
  myService.data = function() { return data; };

  return myService;
}); 
```

然后，在您的控制器中：

```
app.controller('MainCtrl', function( myService,$scope) {
  myService.async().then(function() {
    $scope.data = myService.data();
  });
}); 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-09-20T08:43:54.233

tosh shimayama 有一个解决方案，但如果你使用 $http 返回承诺并且承诺可以返回一个值的事实，你可以简化很多：

```
app.factory('myService', function($http, $q) {
  myService.async = function() {
    return $http.get('test.json')
    .then(function (response) {
      var data = reponse.data;
      console.log(data);
      return data;
    });
  };

  return myService;
});

app.controller('MainCtrl', function( myService,$scope) {
  $scope.asyncData = myService.async();
  $scope.$watch('asyncData', function(asyncData) {
    if(angular.isDefined(asyncData)) {
      // Do something with the returned data, angular handle promises fine, you don't have to reassign the value to the scope if you just want to use it with angular directives
    }
  });

}); 
```

[咖啡脚本中的一个小演示： http](http://plunker.no.de/edit/ksnErx?live=preview) ://plunker.no.de/edit/ksnErx?live=preview

你的 plunker 用我的方法更新：[http ://plnkr.co/edit/mwSZGK?p=preview](http://plnkr.co/edit/mwSZGK?p=preview)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-11-03T15:11:51.553

我认为更好的方法是这样的：

服务：

```
app.service('FruitsManager',function($q){

    function getAllFruits(){
        var deferred = $q.defer();

        ...

        // somewhere here use: deferred.resolve(awesomeFruits);

        ...

        return deferred.promise;
    }

    return{
        getAllFruits:getAllFruits
    }

}); 
```

在控制器中，您可以简单地使用：

```
$scope.fruits = FruitsManager.getAllFruits(); 
```

Angular 会自动将解析`awesomeFruits`的内容放入`$scope.fruits`.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-01-19T23:20:54.913

我遇到了同样的问题，但是当我在网上冲浪时，我了解到 $http 默认返回一个承诺，然后我可以在返回“数据”后将它与“then”一起使用。看代码：

```
 app.service('myService', function($http) {
       this.getData = function(){
         var myResponseData = $http.get('test.json').then(function (response) {
            console.log(response);.
            return response.data;
          });
         return myResponseData;

       }
});    
 app.controller('MainCtrl', function( myService, $scope) {
      // Call the getData and set the response "data" in your scope.  
      myService.getData.then(function(myReponseData) {
        $scope.data = myReponseData;
      });
 }); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-09-20T04:47:55.007

将 UI 绑定到数组时，您需要确保通过将长度设置为 0 并将数据推送到数组中来直接更新同一个数组。

`data`而不是这个（它设置了一个你的 UI 不会知道的不同的数组引用）：

```
 myService.async = function() {
    $http.get('test.json')
    .success(function (d) {
      data = d;
    });
  }; 
```

尝试这个：

```
 myService.async = function() {
    $http.get('test.json')
    .success(function (d) {
      data.length = 0;
      for(var i = 0; i < d.length; i++){
        data.push(d[i]);
      }
    });
  }; 
```

[这是一个小提琴](http://jsfiddle.net/Gloopy/76fVm/)，它显示了设置新数组与清空和添加到现有数组之间的区别。我无法让你的 plnkr 工作，但希望这对你有用！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-09-13T16:22:20.140

我已经阅读了[http://markdalgleish.com/2013/06/using-promises-in-angularjs-views/](http://markdalgleish.com/2013/06/using-promises-in-angularjs-views/) [AngularJS 允许我们通过直接在作用域上放置一个承诺来简化我们的控制器逻辑，而不是手动处理已解决的成功回调中的值。]

如此简单方便:)

```
var app = angular.module('myApp', []);
            app.factory('Data', function($http,$q) {
                return {
                    getData : function(){
                        var deferred = $q.defer();
                        var promise = $http.get('./largeLoad').success(function (response) {
                            deferred.resolve(response);
                        });
                        // Return the promise to the controller
                        return deferred.promise; 
                    }
                }
            });
            app.controller('FetchCtrl',function($scope,Data){
                $scope.items = Data.getData();
            }); 
```

希望这有帮助

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-06-23T11:52:46.583

与此相关，我遇到了类似的问题，但不是使用 Angular 制作的 get 或 post，而是使用第 3 方制作的扩展（在我的情况下为 Chrome 扩展）。
我面临的问题是 Chrome 扩展程序不会返回`then()`，所以我无法按照上述解决方案的方式进行操作，但结果仍然是异步的。
所以我的解决方案是创建一个服务并进行回调

```
app.service('cookieInfoService', function() {
    this.getInfo = function(callback) {
        var model = {};
        chrome.cookies.get({url:serverUrl, name:'userId'}, function (response) {
            model.response= response;
            callback(model);
        });
    };
}); 
```

然后在我的控制器中

```
app.controller("MyCtrl", function ($scope, cookieInfoService) {
    cookieInfoService.getInfo(function (info) {
        console.log(info);
    });
}); 
```

希望这可以帮助其他人遇到同样的问题。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-09-24T17:43:16.213

我真的不喜欢这样一个事实，因为“承诺”的做事方式，使用 $http 的服务的消费者必须“知道”如何解包响应。

我只是想调用一些东西并取出数据，类似于[现在已弃用](https://docs.angularjs.org/guide/migration#templates-no-longer-automatically-unwrap-promises)`$scope.items = Data.getData();`的旧方式。

我尝试了一段时间并没有想出一个完美的解决方案，但这是我最好的选择（[Plunker](http://plnkr.co/edit/xHVHPmRhbcnrJFom9R0L?p=preview)）。它可能对某人有用。

```
app.factory('myService', function($http) {
  var _data;  // cache data rather than promise
  var myService = {};

  myService.getData = function(obj) { 
    if(!_data) {
      $http.get('test.json').then(function(result){
        _data = result.data;
        console.log(_data);  // prove that it executes once
        angular.extend(obj, _data);
      }); 
    } else {  
      angular.extend(obj, _data);
    }
  };

  return myService;
}); 
```

然后控制器：

```
app.controller('MainCtrl', function( myService,$scope) {
  $scope.clearData = function() {
    $scope.data = Object.create(null);
  };
  $scope.getData = function() {
    $scope.clearData();  // also important: need to prepare input to getData as an object
    myService.getData($scope.data); // **important bit** pass in object you want to augment
  };
}); 
```

我已经可以发现的缺陷是

*   您必须传入要**添加**数据的对象，这在 Angular 中不是直观或常见的模式
*   `getData`只能接受`obj`对象形式的参数（虽然它也可以接受数组），这对很多应用程序来说都不是问题，但它是一个痛苦的限制
*   您必须准备输入对象`$scope.data`以`= {}`使其成为对象（基本上是`$scope.clearData()`上面所做的），或者`= []`用于数组，否则它将不起作用（我们已经不得不假设即将到来的数据）。我试着做这个准备步骤 IN `getData`，但没有运气。

尽管如此，它提供了一种模式，可以删除控制器“promise unwrap”样板，并且在您希望在多个地方使用从 $http 获得的某些数据同时保持其 DRY 的情况下可能很有用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-28T17:23:10.307

就在服务中缓存响应而言，这是另一个版本，它似乎比我目前看到的更直接：

```
App.factory('dataStorage', function($http) {
     var dataStorage;//storage for cache

     return (function() {
         // if dataStorage exists returned cached version
        return dataStorage = dataStorage || $http({
      url: 'your.json',
      method: 'GET',
      cache: true
    }).then(function (response) {

              console.log('if storage don\'t exist : ' + response);

              return response;
            });

    })();

}); 
```

此服务将返回缓存的数据或`$http.get`；

```
 dataStorage.then(function(data) {
     $scope.data = data;
 },function(e){
    console.log('err: ' + e);
 }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-11-23T01:37:41.550

**请尝试以下代码**

> 可以拆分控制器（PageCtrl）和服务（dataService）

```
'use strict';
(function () {
    angular.module('myApp')
        .controller('pageContl', ['$scope', 'dataService', PageContl])
        .service('dataService', ['$q', '$http', DataService]);
    function DataService($q, $http){
        this.$q = $q;
        this.$http = $http;
        //... blob blob 
    }
    DataService.prototype = {
        getSearchData: function () {
            var deferred = this.$q.defer(); //initiating promise
            this.$http({
                method: 'POST',//GET
                url: 'test.json',
                headers: { 'Content-Type': 'application/json' }
            }).then(function(result) {
                deferred.resolve(result.data);
            },function (error) {
                deferred.reject(error);
            });
            return deferred.promise;
        },
        getABCDATA: function () {

        }
    };
    function PageContl($scope, dataService) {
        this.$scope = $scope;
        this.dataService = dataService; //injecting service Dependency in ctrl
        this.pageData = {}; //or [];
    }
    PageContl.prototype = {
         searchData: function () {
             var self = this; //we can't access 'this' of parent fn from callback or inner function, that's why assigning in temp variable
             this.dataService.getSearchData().then(function (data) {
                 self.searchData = data;
             });
         }
    }
}());
```

# objective-c - NSPopupButton 与 Value Transformer 的绑定

> ID：12505764
> 
> 赞同：4
> 
> 时间：2012-09-20T03:36:46.023
> 
> 标签：objective-c, macos, cocoa-bindings, nspopupbutton, nsvaluetransformer

我不知道我看到的由带有值转换器的绑定填充的弹出按钮是否是它应该是的方式 - 我看到的不寻常的事情（至少就我所看到的而言）值转换器和表格视图）是transformedValue：方法中的“值”参数是绑定到数组控制器的整个数组，而不是数组中的单个字符串。当我使用表格视图完成此操作时，为表格中的每个显示行调用一次转换器，并且“值”参数是绑定到该行和列的任何对象，而不是用作内容数组的整个数组用于阵列控制器。

我有一个非常简单的应用程序来测试它。在应用程序委托中有这样的：

```
+(void)initialize {
    RDTransformer *transformer = [[RDTransformer alloc] init];
    [NSValueTransformer setValueTransformer:transformer forName:@"testTransformer"];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    self.theData = @[@{@"name":@"William", @"age":@"24"},@{@"name":@"Thomas", @"age":@"23"},@{@"name":@"Alexander", @"age":@"64"},@{@"name":@"James", @"age":@"47"}];
} 
```

在 RDTransformer 类中是这样的：

```
+ (Class)transformedValueClass {
    return [NSString class];
}

+(BOOL)allowsReverseTransformation {
    return NO;
}

-(id)transformedValue:(id)value {
    NSLog(@"%@",value);
    return value;
} 
```

在 IB 中，我在窗口中添加了一个 NSPopupButton，在对象列表中添加了一个数组控制器。控制器的内容数组绑定到 App Delegate.theData，弹出按钮的内容值绑定到数组 Controller.arrangedObjects.name 和值转换器 testTransformer。

当我运行程序时，transformValue: 方法的日志是这样的：

```
2012-09-19 20:31:39.975 PopupBindingWithTransformer[793:303] (
)
2012-09-19 20:31:40.019 PopupBindingWithTransformer[793:303] (
    William,
    Thomas,
    Alexander,
    James
) 
```

从我在 SO 上看到的情况来看，这似乎不是其他人的经历。绑定或值转换器有什么我做错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T19:47:53.197

不幸的是，这就是 NSPopUpButton 的工作方式。问题不仅限于该控件。如果你尝试将一个 NSArrayController.contentArray 绑定到另一个 NSArrayControllers.arrangedObject.someProperty 你会遇到同样的问题。这是我在所有值转换器中使用的一个简单的解决方法，这使它们可以与表格和弹出窗口一起使用：

您可以通过以下方式修改您的价值转换器：

```
-(id)transformedArrayValue:(NSArray*)array
{
    NSMutableArray *result = [NSMutableArray array];
    for (id value in array)
        [result addObject:[self transformedValue:value]];

    return result;
}

-(id)transformedValue:(id)value
{
    if ([value isKindOfClass:[NSArray class]])
        return [self transformedArrayValue:value];

    // Do your normal-case transform...
    return [value lowercaseString];
} 
```

它并不完美，但很容易复制。我实际上把它`transformedArrayValue:`放在一个类类别中，这样我就不需要到处复制它了。

# jquery - JQuery 设置插件的选项

> ID：12505766
> 
> 赞同：0
> 
> 时间：2012-09-20T03:37:17.993
> 
> 标签：jquery, jquery-plugins, scroll

[谁能告诉我如何为此](http://www.class.pm/files/jquery/uscrollbar/demo/#)插件设置选项，例如滚动。我尝试了这样的事情，但没有奏效：

```
$('.sample').uscrollbar({
    scroll: horizontal,
}); 
```

有人有想法么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T03:38:20.627

```
$('.sample').uscrollbar({
    scroll: 'horizontal'
}); 
```

1.  这是一个字符串 - 所以用引号引起来
2.  不要`,`在最后一个对象的属性之后添加

# google-app-engine - GAE 备份、Blob 字段与 Blobstore

> ID：12505767
> 
> 赞同：1
> 
> 时间：2012-09-20T03:37:23.000
> 
> 标签：google-app-engine, backup, blob, blobstore

Google 的文档在其备份/恢复、复制和删除数据的帮助页面上说明了以下内容：

> 注意：此备份功能不备份 Blob 数据！

[https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore)

我在我的应用程序中使用包含 Blob 字段的实体类型进行了简单的备份/恢复。备份实体后，我删除了存储在 Blob 字段中的数据。当我恢复实体时，它再次拥有该数据。

是否可以安全地推断文档中的警告是指 Blobstore 中的数据，而不是存储在普通数据存储中的实体的 Blob 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:16:42.137

我会说可以安全地假设两者没有关系。根据谷歌[Blobstore Java API 概述](https://developers.google.com/appengine/docs/java/blobstore/overview)：

注意：Blobstore 服务定义的 Blob 与数据存储使用的 Blob 属性值无关。

# c# - 显示“请稍候”消息框

> ID：12505768
> 
> 赞同：2
> 
> 时间：2012-09-20T03:37:32.793
> 
> 标签：c#, winforms

我想在我的主窗体执行冗长的任务时显示一个“请稍候”消息框。至于我的情况，冗长的任务是传输串行协议。下面是我的代码：

```
public void transmitprotocol()
{    
    try
    {
         MessageBox.Show("Please wait. Uploading logo.", "Status");

         // Transmitting protocol coding here. Takes around 2 minutes to finish.

    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.ToString());
    }
} 
```

我已经尝试过使用 MessageBox 的上述方法，就像上面的编码一样，但我总是必须关闭 MessageBox 只有它才会开始传输协议。有什么方法可以在传输协议时仍然显示“请稍候”消息框吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T03:39:47.910

您将需要在后台线程上执行昂贵的操作。为此，请使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)或新的并行化库（.NET 4 等）。

实际上，您需要关闭对话框，因为它会阻止执行，直到您关闭它。您所做的是开始操作，然后显示对话框，然后在操作完成后关闭对话框。

现在，如果您使用的是 WPF，我强烈建议您不要使用 Dialog Box 而是使用[Busy Indicator](http://wpftoolkit.codeplex.com/wikipage?title=BusyIndicator&referringTitle=Home)，它是免费的、非常易于使用且不像 Message Box 那样难看。

编辑：既然您指定您正在使用 WinForms，那么继续，实现背景工作，为什么不实现一个没有 chrome 的透明窗口，其目的是显示一个忙碌的标签。后台工作人员结束后，您关闭该窗口。

![在此处输入图像描述](../Images/46376355ab8b7dd5f42e3261a50eba7f.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T05:36:11.913

您必须准备一个后台工作人员并使用 Windows 窗体而不是 MessageBox。像这样简单的复制/粘贴：

```
 Form1 msgForm;
    public void transmitprotocol()
    {
        BackgroundWorker bw = new BackgroundWorker();
        bw.DoWork += new DoWorkEventHandler(bw_DoWork);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
        //you can use progresschange in order change waiting message while background working
        msgForm = new Form1();//set lable and your waiting text in this form
        try
        {
            bw.RunWorkerAsync();//this will run all Transmitting protocol coding at background thread

            //MessageBox.Show("Please wait. Uploading logo.", "Status");
            msgForm.ShowDialog();//use controlable form instead of poor MessageBox
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.ToString());
        }
    }

    void bw_DoWork(object sender, DoWorkEventArgs e)
    {
        // Transmitting protocol coding here. Takes around 2 minutes to finish. 
        //you have to write down your Transmitting codes here
        ...

        //The following code is just for loading time simulation and you can remove it later. 
        System.Threading.Thread.Sleep(5*1000); //this code take 5 seconds to be passed
    }
    void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //all background work has complete and we are going to close the waiting message
        msgForm.Close();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T18:06:04.353

最简单的方法是使用 show() 打开启动画面 打开所需的表单并在构造函数中传递一个启动画面的实例：

```
 Wait myWaitDialog = new Wait(); //Wait is your splash
        myWaitDialog.Show();
        myWaitDialog.Refresh(); //Otherwise screen fails to refresh splash
        ScheduleClassForm myForm = new ScheduleClassForm(myWaitDialog);
        myForm.TopLevel = true;
        myForm.ShowDialog(); 
```

将此代码添加到生成的表单构造函数中：

```
 public ScheduleClassForm(Form WaitWindow)
    {            
       InitializeComponent();
       WaitWindow.Close();
    } 
```

对我来说，它在 form_load 中失败，但在构造函数中工作。在关闭WaitWindow 之前确保您的工作已经完成（例如数据库加载）。

# java - 使用反射的静态方法

> ID：12505770
> 
> 赞同：1
> 
> 时间：2012-09-20T03:37:52.420
> 
> 标签：java, reflection, static

我目前正在尝试反射，最近遇到了一个问题。我有这个方法，它计算一个只包含原始类型字段（不包括布尔值）的类的大小（单位：字节），如下所示：

```
import java.lang.reflect.Field;

public class Foo {

    // [...]   

    // Works only for classes with primitive typed fields (excluding booleans)
    public int getSize() {
        int size = 0;

        for (Field f : getClass().getDeclaredFields()) {
            try {
                f.setAccessible(true);
                Object obj = f.get(this);
                Field objField = obj.getClass().getDeclaredField("SIZE");
                int fieldSize = (int) objField.get(obj);
                size += fieldSize / Byte.SIZE;
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        return size;
    }

} 
```

如您所见，该方法不能是静态的，因为它包含非静态的东西，例如`getClass()`and `this`。但是，对于此类的每个实例，返回值都是`getSize()`相同的，这也适用于扩展的每个类`Foo`（当然，具有不同的值）。因此，概念上`getSize()`具有静态性质。

有没有办法使这个方法静态？我想过使用静态类引用`Foo.class`来绕过`getClass()`，但这基本上会破坏`getSize()`扩展类的语义`Foo`。我目前认为这是不可能的，因为静态方法不是继承的，但我不能 100% 确定是否有一些调整来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:14:49.317

那么做类似的事情有什么问题

```
public static int getSize(Object parent) {
    int size = 0;

    for (Field f : parent.getClass().getDeclaredFields()) {
        try {
            f.setAccessible(true);
            Object obj = f.get(parent);
            Field objField = obj.getClass().getDeclaredField("SIZE");
            int fieldSize = (Integer) objField.get(obj);
            size += fieldSize / Byte.SIZE;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    return size;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:45:10.310

您可以使用 Foo.class 来获取对 Class 对象的引用，而不是 getClass()。

但是，如果您需要类 Foo 的实例，您仍然必须在某个地方创建它。如果类有默认构造函数，你可以使用 Foo.class.newInstance()。否则，使用反射获取构造函数列表并调用正确的构造函数。

# ruby-on-rails - 在控制器的创建方法内的对象上设置 ActiveRecord 错误

> ID：12505773
> 
> 赞同：0
> 
> 时间：2012-09-20T03:38:40.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, feedzirra

我想检查我根据用户指定的 url 检索到的提要是否为零，但我似乎找不到处理此问题的好方法。

我觉得处理它的最佳方法是在通过 if 语句检查时设置自定义 ActiveRecord 错误，就像我在下面的代码中添加的那样。但是，我如何强制保存失败？该代码需要访问 feed_url 以便我可以验证它是 nil 还是返回 404 等...

```
# POST /feeds
  # POST /feeds.json
  def create
    @feed = Feed.new(params[:feed])
    feed = Feedzirra::Feed.fetch_and_parse(@feed.feed_url)

    if(feed) #what to do here?? the below doesn't work if feed returns as nil or fixnum

      @feed.title = feed.title
      @feed.author = feed.entries.first.author
      @feed.feed_url = feed.feed_url
      @feed.feed_data = feed
    end

    respond_to do |format|
      if @feed.save
        format.html { redirect_to reader_path, notice: 'Feed was successfully created.' }
        format.json { render json: @feed, status: :created, location: @feed }
      else
        format.html { render action: "new" }
        format.json { render json: @feed.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:51:30.230

您可以在模型中使用[before_save](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)回调。

```
class Feed < ActiveRecord::Base
 before_save :check_model

def check_model
  if condition == True
    #Execute true statement
  else
    # raise error
end 
```

谢谢

# javascript - 如何在 jquery 中将新元素附加到 iframe

> ID：12505777
> 
> 赞同：0
> 
> 时间：2012-09-20T03:39:38.167
> 
> 标签：javascript, facebook

我正在尝试克隆 facebook iframe 中的元素并将其附加回其父级。

我做的第一件事是选择要克隆的元素（我正在使用 chrome 开发工具）：

```
var clone = $($0).clone(); 
```

然后选择它的父：

```
var parent =  $($0).parent(); 
```

然后将克隆附加回父级：

```
clone.appendTo(parent); 
```

但我得到了这个：

![在此处输入图像描述](../Images/d69441f4e6cf907843757795ae5583f0.png)

如您所见，它实际上并没有附加到 iframe 中，而是附加到父变量中。我的方法有问题吗？脸书不允许吗？我只需要为一个虚拟帐户进行一些克隆，因为我不想麻烦我的朋友。我需要做的就是发送一些使用 Facebook 应用程序的邀请，所以我正在考虑在朋友选择中克隆一个虚拟帐户。

我说的是请求对话框： [https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:26:26.060

由于浏览器中[的同源安全限制](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)，您无法从框架外部访问 facebook iframe 。如果 iframe 来自与主机页面不同的域，则您将无法复制或修改 iframe 中的 DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:44:11.917

> 我需要做的就是发送一些使用 Facebook 应用程序的邀请，所以我正在考虑在朋友选择中克隆一个虚拟帐户。

不管这实际上意味着什么——这绝对是错误的方法。

如果你想测试你的应用程序的功能——使用测试用户帐户。[https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)

# haskell - 在 RHEL 中安装 Timeplot 时遇到问题

> ID：12505784
> 
> 赞同：1
> 
> 时间：2012-09-20T03:40:14.187
> 
> 标签：haskell, rhel6

使用以下命令在 RHEL 6 中安装[Timeplot时](http://www.haskell.org/haskellwiki/Timeplot)

```
cabal install timeplot 
```

我收到以下错误：

```
Data/Array/IArray.hs:1:14: Unsupported extension: Trustworthy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:40:14.187

要安装 timeplot 我需要安装 haskell-platform 和 cairo-devel 包（来自[EPEL](http://fedoraproject.org/wiki/EPEL)）

```
sudo yum install haskell-platform cairo-devel 
```

然后安装 gtk2hs-buildtools

```
cabal install gtk2hs-buildtools 
```

此时打开一个新终端以获取包含 $HOME/.cabal/bin 的新 $PATH

您需要手动安装 strptime-1.0.6，因为 strptime-1.0.7 给了我以下错误

```
building strptime-1.0.7...

Data/Time/Parse.hsc:22:18:
    Could not find module `Foreign.ForeignPtr.Unsafe':
      Use -v to see a list of the files searched for. 
```

安装 strptime-1.0.6 与

```
cabal install strptime-1.0.6 
```

然后安装时间图

```
cabal install timeplot 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T18:08:43.660

Timeplot 可能依赖于比已安装的 GHC 或平台附带的更新的阵列，因此它试图将其从 hackage 中拉出来。并且新阵列（默认选择）不向后兼容旧 GHC。

# jquery - Tablesorter_filer 工作正常，但需要使用搜索按钮

> ID：12505789
> 
> 赞同：0
> 
> 时间：2012-09-20T03:40:42.190
> 
> 标签：jquery, jquery-plugins

对 jquery 和编程来说是全新的。我的模块有一个带有搜索选项的表（调用 jquery 插件 tablesorter_filter.js），但它仅适用于文本框。我输入一个文本并通过按键搜索表格..我想在文本框旁边包含一个搜索按钮，并且 tablesorter_filter 应该只能在单击搜索按钮时进行搜索。有没有带有搜索按钮选项的插件？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T03:46:33.997

您可以尝试使用[DataTables](http://www.datatables.net/)。哪个有你喜欢的，你也可以改变这张桌子的主题。您必须自定义此代码
1\. 调用 keypress 事件中的函数来搜索按钮单击

# nservicebus - 使用 NServiceBus 创建 MVC 端点时出错

> ID：12505800
> 
> 赞同：0
> 
> 时间：2012-09-20T03:43:26.957
> 
> 标签：nservicebus

我刚刚安装了 NServiceBus，开始浏览入门示例，但是当我尝试按照此处[http://docs.particular.net/samples/web/](http://docs.particular.net/samples/web/)的建议创建 MVC 端点时，我遇到了一个意外的异常，指出此产品类型此安装不支持，所有其他端点类型工作。

关于如何解决这个问题的任何想法？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T12:44:11.370

您的环境中似乎没有安装 ASP NET MVC 3 项目类型。请尝试从[http://www.asp.net/mvc/mvc3](http://www.asp.net/mvc/mvc3)安装它。如果您尝试使用 Web Platform Installer Tool 安装它，请确保您安装了正确的版本和产品（我经常在使用这么多类似命名的产品时出错）。

# mysql - 同时页面加载：一一查询？

> ID：12505804
> 
> 赞同：0
> 
> 时间：2012-09-20T03:44:07.207
> 
> 标签：mysql, pdo

我使用一个 PHP 脚本来修改一个带有多个 PDO 查询的 mysql 数据库。我想知道，如果两个用户同时加载一个页面，mysql会首先一次性处理来自用户一的所有查询，还是存在处理来自用户一的一些查询的风险，之后来自用户二的一些查询然后来自用户一的更多信息？

我希望我的问题很清楚。提前谢谢了 ;-）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:16:49.910

除非您使用锁或事务，否则您无法保证查询的执行顺序。如果您有多个同时执行的 PHP 脚本，它们将在不知情的情况下与数据库交互。

例如，如果一个脚本同时执行两次并且有两个查询，它们之间有几秒钟的间隔，那么脚本一的查询 1 可以在脚本二的查询一之前由数据库执行，但脚本二的查询 2 可以在脚本一的查询之前执行查询2。

从更高级别的角度来看，所有查询都是同时执行的，但是如果代码中的某些内容依赖于以特定顺序执行的查询，则需要使用锁或事务来确保一切顺利。

# jquery - 来自外部服务器的 jQuery 自动完成失败

> ID：12505810
> 
> 赞同：0
> 
> 时间：2012-09-20T03:45:11.387
> 
> 标签：jquery, autocomplete

嗨，我正在使用[jQuery 自动完成库](http://jqueryui.com/demos/autocomplete/)（因为没有更好的词）来尝试在我一直在处理的页面上实现基本的自动完成功能。通过基本上使用该页面上示例代码的修改版本，我已经设法通过从同一文件夹中的静态 html 页面获取 json 数据来使自动完成工作。那工作得很好。现在我正在尝试从 python 脚本中获取数据，该脚本在谷歌应用程序引擎上本地实现，它会吐出 json 数据。

以下是页面上原始输入的一些示例数据：

```
["foo", "bar"] 
```

我已经以多种方式打印数据以验证数据格式是否正确（对不起，我不知道有什么可靠的方法来测试它是否是有效的 json 数据）。

现在看代码！这是处理自动完成功能的实际功能：

```
function suggest(textbox_data){
    $(textbox_data).autocomplete({
        source : function (request, response) 
        {
            var source_url = "http://localhost:8081/developers/add/jqueryResponse";
            //var data = "hello world"

            $.ajax({
                url: source_url,
                dataType: 'json',
                success: function (data) { 
                    response(data);
                }
            });
        }
    });
} 
```

我将所有内容都放入函数的原因是因为我正在动态生成文本框。只是为了让一切清楚，这是添加文本框的行。如果有人真的想要，我可以添加文本框生成的所有代码，但我很确定这不是问题。

```
$('#buttondiv').append('<div><label>Textbox #'+$counter+'</label><input type="text" name="textbox[]" class="textbox" value="" id="country" onkeyup="suggest(this);"/><div id="testdiv"></div></div>'); 
```

现在查看错误消息！当我在 Firefox 中运行脚本时（当谈到在本地使用 $.ajax 功能时，Chrome 是一只母狗）我在尝试访问包含 JSON 数据的网页时收到来自 firebug 的错误：

```
GET http://localhost:8081/developers/add/jqueryResponse 200 136ms   jquery.min.js (line 16) 
```

在文件的第 16 行，基本上包含脚本中的所有内容，因此它并没有真正缩小范围。无论如何，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:02:14.213

您的成功处理程序不完整。查看[演示页面的源代码。](http://jqueryui.com/demos/autocomplete/remote-jsonp.html)

成功处理程序应如下所示：

```
success: function( data ) {

        response( $.map( data.geonames, function( item ) 
{

return {label: item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName,Value: item.name}
                        }));
                    }
                }); 
```

# asp.net-mvc - 无法对空引用执行运行时绑定

> ID：12505811
> 
> 赞同：0
> 
> 时间：2012-09-20T03:45:13.227
> 
> 标签：asp.net-mvc

我有一个包含 id 的详细信息页面，但是如果我没有在[http://mysite.com/Detail?id=131](http://mysite.com/Detail?id=131)中传递 id或者我只是输入[http://mysite.com/Detail](http://mysite.com/Detail)我得到错误

```
Cannot perform runtime binding on a null reference 
```

我想在此显示自定义错误消息，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:46:41.020

您可以使`id`参数为空并像这样检查它：

```
public ActionResult Detail(int? id)
{
  if (id.HasValue() == false)
  { return custom error message }
} 
```

或者，您也可以注释您的可空 id`[Required(ErrorMessage = "error message")]`以获取客户端验证。并执行服务器验证，如：

```
public ActionResult Detail(int? id)
{
  if (ModelState.IsValid == false)
  { return custom error message }
} 
```

# amplifyjs - AmplifyJS ，删除存储的对象

> ID：12505812
> 
> 赞同：4
> 
> 时间：2012-09-20T03:45:38.317
> 
> 标签：amplifyjs

我开始使用amplifijs，并且成功地在存储中存储和检索了我的对象，但我不知道如何按名称删除它们。

我使用了这个语法：

```
amplify.store("name",{valName1:"val1", ...});
var storage = amplify.store("name");
var val1 = storage.valName1; 
```

如何按名称删除它们？

```
amplify.remove("name"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T03:48:22.843

我找到了答案：

```
amplify.store("name",null); 
```

# java - 使用 JSMPP 接收短信有时会停止

> ID：12505818
> 
> 赞同：1
> 
> 时间：2012-09-20T03:46:10.497
> 
> 标签：java, sms, smpp, jsmpp

我正在使用 Google 的 JSMPP 从 SMS 服务中心接收 SMS 消息。有时，我的程序停止从 SMSC 接收短信，我必须关闭程序并重新打开程序。然后来自 SMSC 的排队 SMSes 开始接收。这会在一段时间后发生，比如 7 或 8 小时后。这是我用过的代码

> **SMPP 初始化代码**

```
l.info("SMPP Initialization");

SMPPSession s = new SMPPSession();

s.setMessageReceiverListener(new Receive(s));

s.connectAndBind(Settings.smsc_host,Settings.smsc_port, BindType.BIND_TRX,
Settings.smsc_user, Settings.smsc_password,Settings.smsc_msg_setting, TypeOfNumber.UNKNOWN,
NumberingPlanIndicator.UNKNOWN, null, Settings.smsc_timeout);

ProcessSMS.s = s;

l.info("SMPP Initialization Success"); 
```

> **短信接收代码**

```
package sms;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import org.apache.log4j.Logger;
import org.jsmpp.bean.AlertNotification;
import org.jsmpp.bean.DataSm;
import org.jsmpp.bean.DeliverSm;
import org.jsmpp.bean.MessageType;
import org.jsmpp.extra.ProcessRequestException;
import org.jsmpp.session.DataSmResult;
import org.jsmpp.session.MessageReceiverListener;
import org.jsmpp.session.Session;

import processor.ProcessSMS;

public class Receive implements MessageReceiverListener {

private static final ExecutorService pool = Executors.newFixedThreadPool(10);

private static final Logger l = Logger.getLogger(Receive.class);

private Thread thread;

public Receive(){
super();
}

public Receive(Session s){
this();
}

@Override
public DataSmResult onAcceptDataSm(DataSm arg0, Session arg1)
throws ProcessRequestException {

return null;
}

@Override
public void onAcceptAlertNotification(AlertNotification arg0) {

}

@Override
public void onAcceptDeliverSm(DeliverSm arg0)
throws ProcessRequestException {

l.info("Received SMS " + arg0);

if(MessageType.SMSC_DEL_RECEIPT.containedIn(arg0.getEsmClass())){

}else{
pool.submit(new ProcessSMS(arg0));
//thread = new Thread(new ProcessSMS(arg0));
//thread.start();
}

}

} 
```

> **这是状态更改类**

```
package sms;

import java.io.IOException;

import global.Shared;
import log.SMSCStateLogger;

import org.jsmpp.bean.BindType;
import org.jsmpp.bean.NumberingPlanIndicator;
import org.jsmpp.bean.TypeOfNumber;
import org.jsmpp.extra.SessionState;
import org.jsmpp.session.SMPPSession;
import org.jsmpp.session.Session;
import org.jsmpp.session.SessionStateListener;

import processor.ProcessSMS;
import settings.Settings;

public class StateChange implements SessionStateListener{

private static SMSCStateLogger l  = new SMSCStateLogger(StateChange.class);

private Session s;

@Override
public void onStateChange(SessionState arg0, SessionState arg1, Object arg2) {
//arg0 = new State
//arg1 = old State

if(!arg0.isBound() && arg1.isBound()){
int con = Shared.getNextReConnectInterval();
l.info("State changed from " + arg1 + " to " + arg0 + " on " + arg2);

while(true){
l.info("Re Connection in " + con + " ms");

try{
Thread.sleep(con);
}catch(InterruptedException iex){
l.fatal("Re Connection failed due to exception " + iex);
break;
}

s = new SMPPSession();

((SMPPSession) s).setMessageReceiverListener(new Receive(s));
s.addSessionStateListener(new StateChange());

try{

((SMPPSession) s).connectAndBind(Settings.smsc_host,Settings.smsc_port,  BindType.BIND_TRX,
Settings.smsc_user, Settings.smsc_password,Settings.smsc_msg_setting, TypeOfNumber.UNKNOWN,
NumberingPlanIndicator.UNKNOWN, null, Settings.smsc_timeout);

}catch(IOException ioex){
l.fatal("Connection failed due to " + ioex.getMessage());
}

ProcessSMS.s = (SMPPSession) s;

l.info("Re Connection success");

break;

}
}
}

} 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:15:49.340

[从https://github.com/uudashr/jsmpp](https://github.com/uudashr/jsmpp)更新了 JSMPP API 。

使用 git run mvn install 下载源代码以创建 jar 存档。

# sublimetext2 - sublime text2中的制表符缩进

> ID：12505820
> 
> 赞同：1
> 
> 时间：2012-09-20T03:46:28.047
> 
> 标签：sublimetext2, indentation

我的设置：

```
"tab_size": 4,
"translate_tabs_to_spaces": true, 
```

但它不起作用。当我按 Tab 键时，它仍然缩进两个字符。

为什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:50:01.230

尝试设置“detect_indentation”：false

# android - android：如果子活动中的方向发生变化，应用程序崩溃

> ID：12505821
> 
> 赞同：0
> 
> 时间：2012-09-20T03:46:33.217
> 
> 标签：android, android-activity, orientation

我的主要活动可以很好地处理更改为纵向模式。但是，如果我通过启动一个非常简单的活动`startActivityForResult()`并在完成之前切换到纵向模式，我的主要活动会崩溃，因为它的一些变量设置为空。

看起来我与服务的连接没有被重新创建。`doUnbindService(); doBindService();`我尝试在内部手动调用，`onActivityResult()`但`onServiceConnected()`仍然没有被调用。

在这里处理 Activity 生命周期的正确方法是什么？

*编辑*： 我在日志文件中看到`onServiceConnected()`确实被调用了——但它是在*之后* `onActivityResult()`被调用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:49:27.140

为你的第二个活动添加这个

```
 if your android:targetSdkVersion="12" or less
     android:configChanges="orientation|keyboardHidden">

      if your  android:targetSdkVersion="13" or more
  android:configChanges="orientation|keyboardHidden|screenSize"> 
```

在 manifest.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:31:50.843

问题是我指的是在再次调用 onCreate() 之前不存在的对象。我需要在本地排队我的答案并等待重新创建这些对象以避免崩溃。

# backbone.js - Backbone：在 html 文件中初始化应用程序路由器

> ID：12505823
> 
> 赞同：0
> 
> 时间：2012-09-20T03:47:13.723
> 
> 标签：backbone.js

努力学习骨干。在我看过的几个应用程序中（这里有一个[http://blog.viison.com/post/11097185009/how-to-switch-views-using-backbonejs](http://blog.viison.com/post/11097185009/how-to-switch-views-using-backbonejs)），应用程序或演示应用程序的作者初始化ApplicationRouter 在 index.html 文件中，而所有其他 javascript 都在 JavaScript 文件夹中。是什么让应用程序路由器需要在 html 文件中进行初始化？

```
<script type="text/javascript">
    var router = new ApplicationRouter($('#content'));
    Backbone.history.start();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:08:20.677

不需要在 html 中执行此操作。为了便于说明，作者可能会在那里做。你可以问...作者在博客文章上启用了评论。

我没有经常看到它在 html 中启动。像 Backbone Boilerplate 这样的东西是不在 html 中初始化路由器的一个很好的例子。

[https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)

# ruby-on-rails-3 - 不兼容的字符编码：UTF-8 和 ASCII-8BIT rails 3 和 firebird

> ID：12505824
> 
> 赞同：1
> 
> 时间：2012-09-20T03:47:15.720
> 
> 标签：ruby-on-rails-3, encoding, ruby-1.9, firebird2.5

我正在使用在 firebird 中创建的现有数据库开发应用程序。当我尝试从数据库中获取一些数据并将其显示在视图中时，rails 会向我显示该错误。我意识到数据库没有字符集，charset = none！所以，我试图弄清楚问题是什么以及如何解决它。不得不提的是，不能修改数据库，因为它是另一个应用程序的生产数据库。Rails 仅在查询使用波浪号 (´) 获取数据时显示错误，否则不会出现问题。这是我得到的错误：

```
Encoding::CompatibilityError in People#index

Showing /home/guillermo/Proyecto/dcerp/app/views/people/index.html.erb where line #57 raised:

incompatible character encodings: UTF-8 and ASCII-8BIT
Extracted source (around line #57):

54:     <% @abanits.each do |abanit| %>
55:       <tr>
56:         <td><%= abanit.init %></td>
57:         <td><%= abanit.ntercero %></td>
58:       </tr>
59:     <% end %>
60:   </tbody>
Rails.root: /home/guillermo/Proyecto/dcerp 
```

intercero 是有问题的领域

我希望你能帮助我解决这个问题。如果缺少信息，请告诉我。我要疯了！从现在开始感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:40:17.053

我已经解决了这个问题。我刚刚将 encode 函数添加到 line: 中`<td><%= abanit.ntercero %></td>`，现在它看起来像这样：`<td><%= abanit.ntercero.encode('UTF-8', 'iso-8859-1') %></td>`。出现问题是因为编码无法识别拉丁字母，包括：ñ，ó，í，á等。我希望这可以帮助其他人。谢谢！

# xcode - 表格视图单元格传递的值超过 2 个

> ID：12505826
> 
> 赞同：0
> 
> 时间：2012-09-20T03:47:34.557
> 
> 标签：xcode, uitableview

我的表格视图单元格如何保存超过 2 个值？我想要发生的是当我单击表格视图中的一个单元格时，它会将 3 个值传递给下一个视图。但是我只能得到两个值（姓名，地址），因为它们包含在 textlabel 和 detailtextlabel 中，但是（电话）没有显示在我的单元格中，只有姓名和地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:33:44.067

为表格视图单元格创建一个自定义单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:35:40.680

如果您想在单元格中显示更多值，请创建自定义单元格。

选项是使用 NSMutableArray，如下所示，并在自定义单元格中显示所有值：

```
 NSMutableArray *arrValues = [[NSMutableArray alloc] initWithObjects:[NSArray arrayWithObjects:"Value1","Value2","Value3"],nil]; 
```

将尽可能多的数组添加到 arrValues 中。

现在当 tableViewDidSelectAtRow 的方法：将此数组传递给下一个控制器

```
NSArray *arrPassing = [arrValues objectAtIndex:indexPath.row]; 
```

# time-complexity - 为什么冒泡排序的最佳情况的时间复杂度是 O(n)

> ID：12505832
> 
> 赞同：13
> 
> 时间：2012-09-20T03:49:04.870
> 
> 标签：time-complexity, bubble-sort

我根据**ALGORITHMS** 2.2书中使用的方法推导出了冒泡排序在最佳情况下的时间复杂度。但结果却是 O(n^2)。

这是我的推导，希望任何人都可以帮助我找出错误的地方：

```
public void bubbleSort(int arr[]) {
for(int i = 0, len = arr.length; i < len - 1; i++) {
    for(int j = 0; j < len - i - 1; j++) {
        if(arr[j + 1] < arr[j])
            swap(arr, j, j + 1);
    }
} 
```

}

```
Statements                      cost    times
i = 0,len = arr.length          c1          1
i < len - 1                     c2          n
i++                             c3          n - 1
j = 0                           c4          n - 1
j < len - i - 1                 c5          t1(i=0) + t1(i=1) + ... + t1(i = n-2)
j++                             c6          t2(i=0) + t2(i=1) + ... + t2(i = n-2)
arr[j + 1] < arr[j]             c7          t3(i=0) + t3(i=1) + ... + t3(i = n-2)
swap(arr, j, j + 1)             c8          t4(i=0) + t4(i=1) + ... + t4(i = n-2) 
```

T(n) = c1 + c2n + c3(n - 1) + c4(n - 1) + c5t5 + c6t6 + c7t7 + c8t8 = c1 + c2n + c3(n - 1) + c4(n - 1) + c5 [t1(i=0) + t1(i=1) + ... + t1(i = n-2)] + c6[t2(i=0) + t2(i=1) + ... + t2 (i = n-2)] + c7[t3(i=0) + t3(i=1) + ... + t3(i = n-2)] + c8[t4(i=0) + t4( i=1) + ... + t4(i = n-2)];

在最佳阵容中，序列在排序之前已经是正数。那么 t8 应该是 0。

T(n) = c1 + c2n + c3(n - 1) + c4(n - 1) + c5[t1(i=0) + t1(i=1) + ... + t1(i = n-2 )] + c6[t2(i=0) + t2(i=1) + ... + t2(i = n-2)] + c7[t3(i=0) + t3(i=1) + . .. + t3(i = n-2)]

时间复杂度为 O(n^2)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-20T04:00:11.267

您的实施

```
public void bubbleSort(int arr[]) {
    for(int i = 0, len = arr.length; i < len - 1; i++) {
        for(int j = 0; j < len - i - 1; j++) {
            if(arr[j + 1] < arr[j])
                swap(arr, j, j + 1);
        }
    }
} 
```

无法控制内部循环中是否有任何交换，如果没有则退出外部循环。

这种控制使得最好的情况（一个已经排序的数组）可能是 O(n)，因为当它第一次运行时，内部循环中没有交换。

```
public void bubbleSort(int arr[]) {
    boolean swapped = true;
    for(int i = 0, len = arr.length; swapped && i < len - 1; i++) {
        swapped = false;
        for(int j = 0; j < len - i - 1; j++) {
            if(arr[j + 1] < arr[j]) {
                swap(arr, j, j + 1);
                swapped = true;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-09T19:03:06.257

冒泡排序的最佳情况是元素已经排序。

通常的实现给出了最佳、平均、最坏情况的 O(n^2) 时间复杂度。

我们可以通过在每次迭代时检查数组是否已排序（交换将指示未排序的数组）来修改冒泡排序。

一旦发现数组已排序（如果没有发生交换），控制就退出循环或循环继续执行直到长度为 1。

插入排序也是如此！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:02:29.400

我不确定你在数什么。通常，当您谈论*比较排序算法*时，您应该计算进行的比较次数。冒泡排序就是这样认为的。在这种情况下，您提出的算法是 O(n^2)。

如果您计算交换次数，它的 O(1) 甚至可能会说 O(0)。然而，像这样分析冒泡排序是很少见的。

但是，您可以很容易地改进 Bubble 以在最佳情况下获得 O(N)。例如通过引入一个标志`swap_was_made`。如果它在内部结束时为假，`for`您可以完成。在最好的情况下，它将复杂性降低到 O(N)（一个内部 for 循环）。在公平均匀分布的情况下，它将预期或平均复杂度降低到 O(N^2/2) ......但请仔细检查我可能是错的。没有在这里做数学。

# ios - 这是一个什么样的讽刺错误？

> ID：12505833
> 
> 赞同：83
> 
> 时间：2012-09-20T03:49:18.167
> 
> 标签：ios, objective-c, debugging, nsdateformatter

我有一些代码用于对日历日期进行排序，如下所示：

```
#if !(TARGET_IPHONE_SIMULATOR)
    NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"HH:mm dd MMM yyyy" options:0
                                                              locale:[NSLocale currentLocale]];
    [fmt setDateFormat:formatString];
#else
    [fmt setDateFormat:@"HH:mm dd MMM yyyy"];
#endif 
```

如果我在模拟器中运行它一切正常。如果我在设备上运行它，我会收到这条讽刺的调试消息。

> **2012-09-19 22:40:13.972 APPNAME [4923:907] *** -[__NSCFCalendar 组件：fromDate:]：日期不能为零
> 
> 我的意思是真的，你认为这个操作对于一个 nil 日期应该意味着什么？
> 
> 目前已经避免了一个例外。
> 
> 此投诉将报告其中一些错误，然后进一步的违规行为将简单地默默地执行 nil 导致的任何随机事情。这是这次发生这种情况的回溯（由于编译器优化，某些帧可能会丢失）：

你不得不笑，但我不确定我的`dateFormatFromTemplate:`代码有什么问题。任何帮助，将不胜感激。

*运行 Xcode V 4.5 顺便说一句*

* * *

更新：

> 回溯：
> 
> 0 CoreFoundation 0x39ff0e55 + 84
> 1 APPNAME 0x00040be1-[MeetingsViewController dateAtBeginningOfDayForDate:] + 140

所以我想我的`dateAtBeginningOfDayForDate`方法会变坏。看起来像这样：

```
/*
 Break down a given NSDate to its bare components for sorting
 */
- (NSDate *)dateAtBeginningOfDayForDate:(NSDate *)inputDate
{
    // Use the user's current calendar and time zone
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSTimeZone *timeZone = [NSTimeZone systemTimeZone];
    [calendar setTimeZone:timeZone];

    // Selectively convert the date components (year, month, day) of the input date
    NSDateComponents *dateComps = [calendar components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit fromDate:inputDate];

    // Set the time components manually
    [dateComps setHour:0];
    [dateComps setMinute:0];
    [dateComps setSecond:0];

    // Convert back
    NSDate *beginningOfDay = [calendar dateFromComponents:dateComps];
    return beginningOfDay;
} 
```

我使用这种方法将给定的 NSDate 分解为它的核心组件，以便我可以更有效地对它们进行排序。但是，我的应用程序必须是国际化的，这就是使用`NSLocale`格式化日期输出的原因。从看起来我也需要改变我`dateAtBeginningOfDayForDate`的国际工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-20T04:05:07.567

您发布的代码中不会发生该错误。这意味着在某个地方你有一些东西应该是 an`NSDate`而不是`nil`.

至于错误消息中的幽默，我从未见过该消息，但对 Apple +1。Cocoa 部门的一些工程师和 Apple 很久以前的优秀老工程师一样有趣。

查看 Apple 的 MPW C 编译器用于吐出[http://www.netfunny.com/rhf/jokes/91q3/cerrors.html的诊断类型](http://www.netfunny.com/rhf/jokes/91q3/cerrors.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T05:11:16.397

非常感谢[nneonneo](https://stackoverflow.com/users/1204143/nneonneo)帮助我解决这个问题。

我的问题是我的应用程序必须在国际上工作，所以我需要显示与用户位置相关的日期。我以为我会`NSDateFormatter`为用户区域设置创建一个，然后像这样传递一个字符串日期：

```
 NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"HH:mm dd MMM yyyy" options:0
                                                              locale:[NSLocale currentLocale]];
date = [fmt dateFromString:[NSString stringWithFormat:@"%@ %@", obj.meetingTime, obj.meetingDate]]; 
```

但是，问题是我在传入字符串日期*之前对日期格式进行了本地化。*就我而言`NSDateFormatter`，本地化后看起来像这样。

```
MMM dd, yyyy, HH:mm 
```

本地化后的格式在本地化后可能看起来有很多不同的方式。

因此，传入格式为的字符串`HH:mm dd MMM yyyy`会导致它返回`nil`。

*现在很明显* -.-

因此，我没有在创建日期时进行本地化，而是使用标准格式创建日期`HH:mm dd MMM yyyy`。然后在显示时，我将其格式化`NSDate`为用户各自的语言环境。

# asp.net - Intelligencia URLRewriter 用于不存在或非 aspx 页面

> ID：12505834
> 
> 赞同：2
> 
> 时间：2012-09-20T03:49:23.930
> 
> 标签：asp.net, url-rewriting, web-config

我正在尝试将所有不存在的页面重定向到不同的域，因为我的博客已移至不同的域。

所以**www.mydomain.com/blog/asdf**应该重定向到**blog.mydomain.com/blog/asdf**

使用 Intelligencia URLRewriter 模块，我可以重定向博客/，但如果我做博客/某事，我会得到 404。

即使有一个没有像这样的正则表达式的简单规则，它也不适用于博客文件夹下的任何内容

```
<rewrite url="~/blog/^" to="http://blog.softwaresynergy.com/blog/" /> 
```

我也试过这个强制所有请求去处理程序

```
<modules runAllManagedModulesForAllRequests="true"> 
```

关于如何获取 blog/ 下的所有内容并重定向到另一个域的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:29:10.487

URL 重写不允许重写其他域或子域上的路径。您可以在 global.asax 中使用以下代码重定向 url：

```
void Application_BeginRequest(object sender, EventArgs e)
{
    string path = Request.Path;
    if (path.Contains("blog/"))
    {
        HttpContext.Current.Response.Redirect("http://blog.softwaresynergy.com/blog/");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:26:44.790

尝试使用以下重定向规则：

```
<redirect url="^/blog/(.+)$" to="http://blog.softwaresynergy.com/blog/$1" /> 
```

把它放在你其他重写规则的顶部，所以它首先被执行，我认为它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T21:50:51.103

我以不同的方式进行了更改。将原始站点保留为 php，并使用 php rewrite 进行重定向，效果很好。

在域 new.mydomain 我做了 aspx 站点

不理想，但现在工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T18:16:26.380

使用自定义 404 页面。

```
<system.webServer>
    <httpErrors existingResponse="Replace" errorMode="Custom">
      <remove statusCode="404"/>
      <error statusCode="404" path="/Custom404.aspx" responseMode="Redirect"  />

<customErrors mode="On">
            <error statusCode="404" redirect="/custom404.aspx" /> 
```

在 custom404 页面中，我会放置代码来进行重定向。获取导致错误的路径可能是......

```
Request.QueryString("aspxerrorpath");
Request.UrlReferrer; 
```

一旦我有了他们试图访问的路径，就做一个重定向。

```
Response.Redirect(NEW_SITE + PATH, true); 
```

# visual-studio-2010 - 如何在 Visual Basic 中向 System.Console 类添加方法

> ID：12505838
> 
> 赞同：0
> 
> 时间：2012-09-20T03:50:54.253
> 
> 标签：visual-studio-2010, class, methods

我对 Visual Basic 几乎没有经验。

我想为我正在制作的简单控制台应用程序向 System.Console 类添加一些方法。我知道向类添加[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)的方法。我试过这段代码，但它给出了错误：对非共享成员的引用需要对象引用。

```
Imports System.Runtime.CompilerServices
Module Module1

    <Extension()>
    Public Sub WriteStuff(ByRef Console As System.Console, ByVal Output As String)

        Console.Write(Output & "?")

    End Sub

    Sub Main()

        Console.WriteStuff("Hello")
        Console.ReadKey()

    End Sub

End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:53:05.540

扩展方法是实例方法；它们不能静态应用。 `System.Console`是一个类，而不是一个对象，像这样的方法`ReadKey()`是静态的。不允许使用静态扩展方法。

看你的签名：

```
Public Sub WriteStuff(ByRef Console As System.Console, ... 
```

通过引用获取类标识符是没有意义的，对吧（或者根本就没有）？

# css - CSS 标头问题

> ID：12505841
> 
> 赞同：0
> 
> 时间：2012-09-20T03:51:23.850
> 
> 标签：css, html, web

当浏览器从其宽度拉伸时，标题不会移动，但页面的内容会移动。它快把我逼疯了。如果您将其拉伸得足够远，则横幅最终会结束。IE：它不会进一步重复横幅。

有什么建议吗？我不确定源代码的哪一部分会控制它。我会放上 CSS，如果需要，我可以放出部分 HTML。

[图像示例](http://imgur.com/a/INqs4)

[网络](http://lssclan.urldownload.com/anth/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:38:53.767

答案是差异变化的大量组合。基本上它归结为一些宽度变化。

如果我在一个地方设置宽度 100%，它必须进入多个，因为整个桅杆 div 是嵌套的 div。此外，要让横幅进一步向右扩展，宽度必须为 200%。

正确的代码反映在网站上，至少对于我的解决方案而言。谢谢大家，特别是 TMan。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:10:45.917

没有看到您的标记（这将有助于分享），看起来第 9 行是您的问题：

```
header#mast{margin:0 0 0 0px;width:1200px;position:fixed;top:0px;left:0%;z-index:100;} 
```

将其更新为：

```
header#mast{margin:0 0 0 -600px;width:1200px;position:fixed;top:0px;left:50%;z-index:100;} 
```

（注意左边`left:50%`距`-600px`（元素宽度的一半）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:13:39.563

如果您包装您的`#mast`和`#primary-nav' elements in a`div`that has a style of`边距：0px auto`，这应该会导致所有内容在您展开窗口时继续与页面的其余部分居中。

就横幅结尾而言，将样式添加`width: 100%`到负责它的元素中，以便在您扩大窗口时产生无限扩展。

**编辑**

由于您已经添加了网站，请将标头的内容放在以下标记中：

`<div class="container container-twelve">...</div>`

这将使您的图像、文本和链接居中。

# android - 登录失败。动作取消。脸书沙盒

> ID：12505843
> 
> 赞同：0
> 
> 时间：2012-09-20T03:51:30.420
> 
> 标签：android, facebook

我将我的 Facebook 应用程序设置为沙盒。我登录 Hackbook 演示。认证后，它会显示一个加载对话框，然后立即关闭。没有任何日志。我的有什么问题吗？怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:41:02.017

请更新您的登录按钮单击侦听器的以下代码，它将解决您的问题。

```
facebook.authorize(mActivity, mPermissions, Facebook.FORCE_DIALOG_AUTH,
            new LoginDialogListener()); 
```

有关更多信息，请参见下面的链接。

[Facebook 登录问题](https://stackoverflow.com/questions/10815813/android-facebook-authorization-can-not-login-when-official-facebook-app-instal/10816381#10816381)

# ruby - Ruby 错误：参数数量错误（0 代表 1）？

> ID：12505845
> 
> 赞同：1
> 
> 时间：2012-09-20T03:52:27.627
> 
> 标签：ruby, ruby-on-rails-3

我有一组名为@microposts 的微博

所以这是

```
@microposts=Micropost.all
@purchases=@microposts.select(:kind => "purchase") 
```

然后它给了我错误

```
ArgumentError: wrong number of arguments(1 for 0)
    from (irb):23:in `select'
    from (irb):23 
```

我不确定 select 是否是我需要的。我正在尝试在哪里，但这也不起作用。我还尝试了 @purchases=@microposts.select(kind:"sale") 以防万一，但这也没有用。

如果不清楚，kind 是 microposts 表中的一列，表示“sale”或“purchase”。我希望@purchases 成为“购买”类型的微博数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T03:56:37.080

嗨，您以错误的方式使用选择。你应该在所有尝试之前使用 select 像这样

```
@purchases = Micropost.where(:kind => "purchase") 
```

这将对数据库进行另一个查询。如果你不想要这个并尝试使用@microposts 列表对象，你可以这样做

```
@microposts=Micropost.all
@purchases=@microposts.collect{ |m| m if m.kind == "purchase"}.compact 
```

我想 kind 是 micropost 对象的属性。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T03:57:23.800

`.where` returns a criteria, not an array. This is what probably confused you. Try this.

```
arr = Micropost.where(:kind => 'purchase').to_a 
```

# java - 在另一个连接池中获得另一个连接之前，如何确保我已经关闭了一个连接池中的连接？

> ID：12505846
> 
> 赞同：0
> 
> 时间：2012-09-20T03:52:37.380
> 
> 标签：java, connection

在另一个连接池中获得另一个连接之前，如何确保我已经关闭了一个连接池中的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:12:46.370

调用 close() 方法将确保您的连接已释放。您还可以在使用连接的对象的 finalize() 方法中添加对 close() 方法的调用，以便在某个时间点确定释放连接，尽管建议不要依赖 finalize() 方法..

# c - 当应用程序被操作系统崩溃或杀死时，内存中会发生什么

> ID：12505847
> 
> 赞同：3
> 
> 时间：2012-09-20T03:52:42.090
> 
> 标签：c, debugging, memory

出于我的研究目的，我想看看当程序由于某些错误（例如缓冲区溢出攻击）而被杀死/崩溃时，操作系统会做出哪些更改。

让我在这里解释整个场景。

假设一个应用程序正在运行并且它的数据和代码在内存中。攻击者试图通过利用一些缓冲区溢出漏洞来劫持应用程序以访问机器，但系统检测到它并杀死正在被利用的应用程序。现在我想看看操作系统在终止进程时是否在内存中留下了任何痕迹，以及操作系统在终止该进程之前采取了哪些必要步骤。

此外，是否有任何工具可以在 ac 程序执行时实时跟踪内存变化？我们可以将内存快照数据反编译为某种人类可读的语言（可能是汇编代码）吗？

编辑：：

对于以下示例

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

int main()
{

int x;
char arr[4];
char * src = "haha";

printf("Before copying\n");

scanf("%d", &x);
if(x> 1)
    strcpy(arr, src);
printf("%s \n", arr);
return 0;
} 
```

它正在产生缓冲区溢出错误。在检查之前，它工作正常。在输入大于 1 的 x 后，它会使程序崩溃。即使这个程序崩溃/杀死，我也想看看内存中是否有任何痕迹。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T04:02:23.430

操作系统通常不会检测缓冲区溢出或其他正在进行的恶意攻击，除非攻击导致程序中出现致命错误（例如，导致程序访问坏内存或跳转到无效地址）。在这种情况下，操作系统将像处理任何其他进程错误一样处理这种情况：在 Windows 上，调用结构化异常处理 (SEH) 机制来展开进程堆栈（这可能会导致“未处理的异常”对话框）；在类 UNIX 系统上，操作系统向进程发送一个进程可以捕获的（通常是致命的）信号。

一些应用程序使用堆栈粉碎保护器或其他保护功能进行编译，`abort()`如果堆栈损坏（表示编程错误或被利用的缓冲区溢出），它们会自动应用程序（或以其他方式退出）。在这种情况下，尝试终止的是应用程序本身。通常，这些机制使用尽快退出应用程序的终止方法，以最大限度地减少它们被禁用的机会。

在任何一种情况下，如果我们假设进程死亡，那么操作系统会将进程标记为死亡并停止为其提供任何 CPU 周期。该进程可能会保留为“僵尸”，以便其父进程可以确定其退出代码（在 UNIX 上），但它以前使用的内存将被释放回操作系统。然后操作系统可以将释放的内存提供给其他进程。如果进程异常退出，一些系统和配置会在清理之前对进程进行*核心转储；*核心转储包含进程内存在被终止之前的内容，并允许开发人员确定触发退出的错误原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:05:45.627

我怀疑是否有任何系统可以检测到攻击并决定杀死受害的应用程序。发生的情况是，由于攻击，程序会损坏自身并变得无法运行。此时，操作系统将终止它。

“攻击”的比喻具有误导性，因为没有涉及武力。这就像你因为吃太多而呕吐，但没有人让你继续吃。

有时当程序意外终止时，程序的最后状态被保存并且可以分析，但不是常规的。

# node.js - Q.js - 使用延迟

> ID：12505850
> 
> 赞同：15
> 
> 时间：2012-09-20T03:53:13.267
> 
> 标签：node.js, deferred

如何从下面的示例中获取文本的值？

Q.js 有一个使用 Deferred 的示例：

```
var deferred = Q.defer();
FS.readFile("foo.txt", "utf-8", function (error, text) {
    if (error) {
        deferred.reject(new Error(error));
    } else {
        deferred.resolve(text);
    }
});
return deferred.promise; 
```

在这种情况下，使用了一个节点异步函数。我想要做的是从返回的 deferred.promise 中获取文本的值。当我 console.log(deferred.promise) 我得到这个：

```
{ promiseSend: [Function], valueOf: [Function] } 
```

我做错了什么（因为我只是从这里复制/粘贴了示例：[https](https://github.com/kriskowal/q#using-deferreds) ://github.com/kriskowal/q#using-deferreds ）或者我还需要做什么才能真正从文件中获取该文本？

我知道 node.js 有上述调用的同步版本——我的目标是了解 deferred 如何与这个库一起工作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T00:52:15.767

见[https://github.com/kriskowal/q#adapting-node](https://github.com/kriskowal/q#adapting-node)

可以用类似nodejs的方式重写：

```
var read = Q.nfcall(FS.readFile, FS, "foo.txt", "utf-8");
read().then( function (text) { console.log(text) } ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T06:25:31.393

您可以通过Promise的[`.then()`方法获取值：](https://github.com/kriskowal/q#tutorial)

```
function read() {
    // your snippet here...
}

read().then(function (text) {
    console.log(text);
}); 
```

此外，错误处理程序可以作为第二个参数传递给方法`.then()`或与`.fail()`方法一起传递：

```
read().fail(function (err) {
    console.log(err);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T06:07:00.760

```
Q = require('q');
FS = require('fs');

function qread() {
  var deferred = Q.defer();
  FS.readFile("foo.txt", "utf-8", function (error, text) {
    if (error) {
  deferred.reject(new Error(error));
    } else {
  deferred.resolve(text);
    }
  });
  return deferred.promise;
};   

var foo = qread();

setTimeout(function() {
  console.log(""+foo);
},1000); 
```

很奇怪你看不到`console.log(foo)`. 不知道为什么。

在此处查看更多示例[https://github.com/kriskowal/q/wiki/Examples-Gallery](https://github.com/kriskowal/q/wiki/Examples-Gallery)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T07:18:56.283

```
deferred.promise.then(function (text) {
  console.log(text); // Bingo!
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-06T17:05:28.203

```
Q = require('q');
FS = require('fs');

var deferred = Q.defer();
FS.readFile("client-02.html", "utf-8", function (error, text) {
  if (error) {
    deferred.reject(new Error(error));
    } else {
    deferred.resolve(text);
    }
return deferred.promise.done( setTimeout(console.log(text),1000 ));
}); 
```

# c# - 可以集成到 C# 应用程序中的 Diff 工具

> ID：12505851
> 
> 赞同：9
> 
> 时间：2012-09-20T03:53:17.267
> 
> 标签：c#, diff

我有一个小型 C# 应用程序，我想提供预览差异和接受更改的能力。我的输入只是文本文件。我遇到了一些工具，如 kdiff3 和 winmerge，我想知道是否有人将它们集成到 C# 应用程序中，如果是，它是如何完成的？我还从早期的 stackoverflow 问题中遇到了一些关于 CodeProject 的好项目，但是由于这些项目是在 2004 年编写的，我想知道您是否对我可以集成的开源 diff 和合并工具有任何建议？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T03:58:29.487

你检查过 csdiff 吗？

[http://code.google.com/p/csdiff/](http://code.google.com/p/csdiff/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-20T04:06:30.407

您可能想检查[DiffPlex](https://github.com/mmanela/diffplex)。它（除其他外）是一个可用于生成文本差异的库。它还提供了一些更高级别的类，这些类提供了更完整的“差异模型”，应该更容易用于在文本框中呈现差异。

就个人而言，我只将它用于次要任务，但它看起来足够强大，也可以处理更复杂的场景。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-20T04:05:51.117

正如您所提到的，Winmerge 可以[通过命令行](http://manual.winmerge.org/Command_line.html)与其他应用程序集成。这是一个使用这些命令行参数替换内置差异客户端[的 Visual Studio 示例。](http://blog.paulbouwer.com/2010/01/31/replace-diffmerge-tool-in-visual-studio-team-system-with-winmerge/)关于启动 winmerge 本身，我发现了如何从 C# 调用外部程序的[简单示例。](http://omegacoder.com/?p=119)

# jdbc - 支持 IPv6 格式的数据库服务器地址的数据库管理工具

> ID：12505852
> 
> 赞同：0
> 
> 时间：2012-09-20T03:53:35.623
> 
> 标签：jdbc, ipv6, sap-ase, database-management, dbvisualizer

我在 Windows server 2008 上使用 Sybase ASE 15.5 并使用 Sybase Central（JDBC 驱动程序）进行管理。在将我的机器配置为仅 IPv6 模式（纯 IPv6）并更正 DSEDIT 连接属性后，我可以 ping Datase 服务器并通过 ISQL 实用程序（在 C++ 中打开客户端程序）访问数据库。

但是，Sybase Central 不允许在主机名字段中使用 IPv6 地址

IE：

IPv4：

```
[Server1]
master=TCP,192.168.1.1,5000
query=TCP,192.168.1.1,5000 
```

IPv6：

```
[Server1]
master=TCP,2001:ab1::12:1,5000
query=TCP,2001:ab1::12:1,5000 
```

我尝试了其他一些 JDBC 工具，例如 DbVisualizer，但它只允许 IPv4，而不是 IPv6

IE：

```
jdbc:jtds:sybase://192.168.1.1:5000;DatabaseName=MyDB

jdbc:jtds:sybase://2001:ab1::12:1:5000;DatabaseName=MyDB 
```

是否有支持 IPv6 格式的数据库服务器地址的数据库管理工具（JDBC 驱动程序）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:43:40.293

尝试在 IPv6 地址周围放置方括号 []。它在 URL 中是强制性的，也可以在这里使用。

另一种方法可能是使用解析为 IPv6 地址的主机名进行连接。通过使用 DNS 或本地主机文件。

# python - python-oauth2 - 发出请求对象

> ID：12505854
> 
> 赞同：1
> 
> 时间：2012-09-20T03:54:09.130
> 
> 标签：python, oauth, oauth-2.0

通过[https://github.com/simplegeo/python-oauth2](https://github.com/simplegeo/python-oauth2)上的教程，我可以创建一个签名的请求对象。但我不明白如何发送请求并收到任何回复。

当我检查从 request.to_url() 获得的 URL 时，我得到了响应。我只是不知道如何以编程方式获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:33:16.387

要发出 GET 请求，您可以这样做

```
import urllib2
response = urllib2.urlopen(request.to_url())
response_body = response.read()    # in case you need it 
```

对于 POST，你应该能够做到

```
import urllib2
urllib2_req = urllib2.Request(request.url, request.to_postdata())
response = urllib2.urlopen(urllib2_req)
response_body = response.read()    # in case you need it 
```

# ruby-on-rails - 在注册期间将帐户 ID 传递给新用户

> ID：12505856
> 
> 赞同：0
> 
> 时间：2012-09-20T03:54:23.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

目前，我的应用程序是使用 Devise 进行身份验证设计的。我有它，所以当第一个用户注册时，会在 Accounts 表中创建一个帐户，并将 account_id 传递给 User 表。我还设置了它，以便每次创建新帐户时，该用户都被标记为管理员。最后，我让它在管理员可以创建新用户的地方工作。

我的问题是，在创建新用户时，我需要为这些用户分配与管理员相同的 account_id 以将用户联系在一起。如果我在表单上添加一个 account_id 字段并让管理员手动输入它，我可以做到这一点。我想要的是，这是在后台自动化的。

我尝试了很多品种都没有成功。这是我将以下内容放入 user.rb 的不成功尝试之一

```
before_save :add_account_id_from_parent     

   def add_account_id_from_parent       
    return true unless self.users.present?       
    self.users.update_attribute(:account_id, 1)    
   end 
```

我使用数字“1”只是为了看看是否可以将任何东西自动化并放置在该字段中。

就像我说的手动一切正常，但我想要它，以便在注册期间根据管理员 account_id 自动添加 acocunt_id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:02:36.000

我有点困惑你为什么打电话`self.users`。如果我理解正确，您希望在创建新用户后分配（作为测试）`account_id`。`1`你可以这样做：

```
before_save :add_account_id_from_parent

def add_account_id_from_parent
  self.account_id = 1
end 
```

您不需要实际更新记录，因为这是在保存*之前*分配的，并且保存会将新值写入数据库。

再次，我可能会遗漏一些东西，如果是这样，请澄清。

**更新**：

如果您正在验证它`account`是否存在，则需要将回调更改为 a`before_validation`而不是`before_save`，如下所示：

```
before_validation :add_account_id_from_parent 
```

# c# - 允许 ProgessBar 在单独的线程中运行但偶尔介入来控制它？

> ID：12505859
> 
> 赞同：0
> 
> 时间：2012-09-20T03:54:51.080
> 
> 标签：c#, wpf, multithreading, progress-bar

我在 WPF 中有一个进度条，我在 x 时间段内为它设置了一个故事板动画，从 0-90 填充，这可能会根据正在执行的任务而改变。

是否可以允许其故事板动画在不同的线程中播放，然后在需要时插入其中以更改进度条的各种属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:49:05.527

尽管 Laurent 可能会回答您的实际问题，但正确答案是否定的。

Progressbar 只能在 UI 线程上运行。

向 ProgressBar 报告进度的进程可以在不同的线程上运行，但 ProgressBar 的更新需要在 UI 线程上运行。

您建议的设置可能会导致 ProgressBar 无法提供正确的作业状态。最好让进程报告其状态，而不是尝试同步进程和动画。

动画可能还需要在 UI 线程上运行，因为您可能将 ProgressBar 的属性绑定到动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:39:48.357

根据劳伦特的评论...

```
void startProgress()
{
    ThreadStart ts = new ThreadStart(Go);
    Thread t = new Thread(ts);
    t.Start();
}

void Go()
{
    double val = 0;
    while (val < 100)
    {
        Thread.Sleep(50);
        Dispatcher.Invoke(new action(() =>
        {
            MyProgressBar.Value += 0.5;
            val = MyProgressBar.Value;
        }));
    }
}

delegate void action(); 
```

# php - 更改 URL 参数的最大长度

> ID：12505860
> 
> 赞同：0
> 
> 时间：2012-09-20T03:55:21.890
> 
> 标签：php, .htaccess, opencart

我需要`GET`一个长度为 1727 个字符的参数，现在，我只能得到 512 个字符。我该怎么做`.htaccess`？

当前`htaccess`：

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T03:59:36.367

它与网络服务器无关。代理服务器和浏览器有自己的 url 长度限制，这可能是导致问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:26:21.227

要解决此问题，请将以下行添加到`.htaccess`：

```
php_value suhosin.get.max_value_length 2000 
```

# jquery - 使用 jscrollpane 调整元素大小

> ID：12505861
> 
> 赞同：0
> 
> 时间：2012-09-20T03:55:24.420
> 
> 标签：jquery, jscrollpane, responsive-design

我有一个站点，其区域需要在窗口调整大小时调整大小（以及该站点的使用方式，我认为人们会经常调整窗口大小）。这本身不是问题。我有这个 HTML 和 CSS：

```
<body>
<header>
  stuff
</header>
<article class="scroll">
  lots of stuff
</article>
<footer>
  stuff
</footer>
</body>

article {
position: fixed;
top: 180px;
left: 30px;
bottom: 60px;
right: 30px;
overflow: auto;
} 
```

这工作得很好，并且文章会随着窗口大小的调整而调整。

但后来我在文章中添加了 jscrollpane，以便它有一个漂亮的滚动条。现在，当您调整窗口大小时，文章不会随之调整大小 - 文章保持原来窗口中的大小。如果你点击刷新，它会适当地调整大小，但这很蹩脚。

这是一个 jsfiddle：http: [//jsfiddle.net/7cMvy/](http://jsfiddle.net/7cMvy/)

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T06:33:03.140

您解决了重复激活指令检测窗口调整大小事件功能的问题，如本例所示。

```
$(window).resize(function() {
    $(function(){
        $('.scroll-pane').jScrollPane({
                showArrows: true,
                horizontalGutter: 30,
                verticalGutter: 30,
                arrowScrollOnHover: true
            }
        );
    });
}); 
```

米歇尔

# openlayers - 使用 openlayer 在标记中单击处理程序

> ID：12505862
> 
> 赞同：3
> 
> 时间：2012-09-20T03:55:40.650
> 
> 标签：openlayers

我正在使用 openlayers，当我从服务器查询 pois 列表时，我想为每个地图添加一个。

因此，我为它们中的每一个创建了标记，并且我希望在单击标记时打开 FrameCloud。

我用这个：

```
marker.events.resgister("click",marker,function(){
  this.pop.show();
}); 
```

但是，当我拖动标记时，地图会移动，并触发事件。

虽然我不希望在使用拖动标记时发生任何事情，但当鼠标悬停在标记上时光标应该是指针。就像谷歌的标记一样。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:39:39.670

Try this:

```
marker.events.register('mousedown', marker, function(evt){
 this.pop.show();
 OpenLayers.Event.stop(evt); 
}); 
```

# firefox - 3px 边框半径在 IE 和其他浏览器中有不同的外观

> ID：12505872
> 
> 赞同：1
> 
> 时间：2012-09-20T03:57:25.587
> 
> 标签：firefox, internet-explorer-9, css

这个 CSS 在最新的浏览器中产生不同的结果：

```
input {
    border:1px solid #ccc;

    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
} 
```

IE 中的半径尺寸更小：

![在此处输入图像描述](../Images/9788fc062f1403b42781fa92e2e6de63.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:13:39.600

`Border-radius`据我所知，8.0 之前的 IE 版本不支持。所以我使用`PNG`了我创建的透明图像而不是`Div`需要的透明图像，`border-radius`它还解决了浏览器兼容性问题。

编辑对于 IE9：您可能正在使用[怪癖模式](https://stackoverflow.com/questions/6529728/html5-doctype-putting-ie9-into-quirks-mode)，这就是它不兼容的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:26:15.207

将 IE 特定值更改 1px，

边框半径：4px；（而不是 3px）

# php - 在 PHP 中使用日期时间格式

> ID：12505875
> 
> 赞同：2
> 
> 时间：2012-09-20T03:57:55.663
> 
> 标签：php, mysql

好的，所以我知道如何使用 PHP 格式化数据库中的“日期时间”值。现在，我想以不同的方式显示帖子的时间，发布不同的时间。

例如，如果现在和发布日期之间的时间差是：

少于一小时 - 显示多于一小时但少于 24 小时前的分钟数 - 显示 24 小时或以上但少于 48 小时前的小时数 - 显示“昨天”和 48 小时或以上的时间 - 显示当天，月份和时间

这是我到目前为止所拥有的：

```
$date = date_create($row['date']); 
$HeaderDate = date_format(date_create($row['date']), 'F j, g:i a'); 
echo $HeaderDate; 
```

这不会测试任何条件，它只是回显月份、日期和时间，无论经过了多长时间。

现在，我只是不知道如何计算在我的 if 语句中使用的日期差异。我怎么做？但是在 PHP 中，我根本不想使用 SQL，除了查询原始日期。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:10:13.777

我用这个函数以很好的格式显示时间。希望这会帮助你。

我认为您必须进行一些修改才能以您的方式获得它。因为您希望它在两天后显示实际时间。

```
<?php
function nicetime($date)
{
    if(empty($date)) {
        return "No date provided";
    }

    $periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
    $lengths         = array("60","60","24","7","4.35","12","10");

    $now             = time();
    $unix_date         = strtotime($date);

       // check validity of date
    if(empty($unix_date)) {    
        return "Bad date";
    }

    // is it future date or past date
    if($now > $unix_date) {    
        $difference     = $now - $unix_date;
        $tense         = "ago";

    } else {
        $difference     = $unix_date - $now;
        $tense         = "from now";
    }

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
    }

    $difference = round($difference);

    if($difference != 1) {
        $periods[$j].= "s";
    }

    return "$difference $periods[$j] {$tense}";
}

$date = "2012-09-18 17:45";
$result = nicetime($date); // 2 days ago

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:10:59.693

我将向您展示我使用的功能。您必须对其进行修改以获取所需的所有案例。[你可以在这里](http://www.lampcoder.com/how-to-transform-time-into-nice-readable-string-using-multiple-languages-and-sprintf/)看到一个最小的例子

```
function timeToString($ptime) { // $ptime should be timestamp
    $etime = time() - $ptime;

    if ($etime <= 30)
        return 'few seconds ago';

    $a = array(
        10 * 12 * 30 * 24 * 60 * 60  =>  'decade',
        12 * 30 * 24 * 60 * 60       =>  'year',
        30 * 24 * 60 * 60            =>  'month',
        7 * 24 * 60 * 60             =>  'week',
        24 * 60 * 60                 =>  'day',
        60 * 60                      =>  'hour',
        60                           =>  'minute',
        1                            =>  'second'
         );

        foreach ($a as $secs => $str) {
            $d = $etime / $secs;
            if ($d >= 1) {
                $r = floor($d);
                if($etime > 7 * 24 * 60 * 60) {
                    $ret = 'on %1$s, %2$s%3$s';
                    return sprintf($ret,date('F', $ptime), date('d', $ptime),(date('Y') != date('Y', $ptime) ? ' ' . date('Y', $ptime) : ''));
                }
                $ret = '%d ' . $str . ($r > 1 ? 's' : '') . ' ago';

                return sprintf($ret,$r);
        }
    }
} 
```

# java - 如何让这个变量成为全局变量？

> ID：12505876
> 
> 赞同：-1
> 
> 时间：2012-09-20T03:58:14.103
> 
> 标签：java

这里的问题是我不知道在哪里定义变量`wage`，在 if-else 块中使用它之前使它成为一个字段变量，所以它可以被 Eclipse 识别和使用。

下面的代码会给我最后一行代码的错误：`wage`无法解析为变量。但是当我将它放在扫描仪控制台行下方的另一行代码中（从顶部向下 4 行）时，它在所有代码行中出现错误，其`wage`下方的变量并显示“重复局部变量”所以我做了不知道将其放置在何处以使其成为字段变量。有什么想法吗？

```
import java.util.Scanner;

public class Java3 {
    public static void main(String[] args) {
        Scanner console = new Scanner(System.in);
        System.out.println("*** Basic Wage Calculator ***");
        System.out.printf("%n");
        System.out.println("Enter start time in 24:00 format");
        String startTime = console.nextLine();
        String[] tokens = startTime.split(":");
        double starttimeHours = Double.parseDouble(tokens[0]);
        double startMinutes = Double.parseDouble(tokens[1]);
        if (starttimeHours >= 6 && starttimeHours <= 8
                || starttimeHours >= 9 && starttimeHours <= 19) {
            double wage = 1.6;
        } else if (starttimeHours >= 9 && starttimeHours >= 10 && startMinutes >= 01) {
            double wage = 43;
        } else {
            double wage = 987;
        }
        System.out.println(wage);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:02:08.293

当您编写 double 时，您正在为语句`wage = 1.6;`的范围定义一个变量。`if`这意味着在 if 语句的结尾**}**之后，我们无法访问该变量。在 if else 语句之外定义工资变量。您在哪里定义**了 startMinutes**。而不是分配

```
 `double wage=1.6;` 
```

改成

```
 `wage=1.6;` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:16:39.410

问题是范围之一。范围分为三种不同类型： **循环**、**方法/块**和**类**。这些是从最不可见到最可见列出的。

你可以把它想象成一个俄罗斯套娃——最小的娃娃是循环可见性，而包含它们的则是类可见性。更好的说明，它看起来像这样：

```
(Class Level
    (Method/Block Level
        (Loop Level)
     )
) 
```

您可以在一定程度上混合这些范围，但适用相同的一般范围规则。

**这与您的问题有什么关系？** 正如我所说，您的变量声明的问题是范围之一。将变量移动`wage`到适当的范围级别，并且只实例化*一次*。

* * *

**循环范围内的变量：在循环** 头或循环体中声明的任何变量*都只*对循环独占；试图访问它们将导致编译错误。

```
for(int i = 0; i < 100; i++) {
    Double aValue = new Double(10.0);
    System.out.println(i);
}
aValue = 6; // What's this variable and why is it out here?
i = 0;  // Same as above 
```

**方法（或块）范围内的变量：** 在方法体或代码块（包括 if 语句）中声明的任何变量*仅对*块独占。该块内部的循环和 if 语句可以操作变量，但不能声明和实例化它们自己的变量以供上层作用域查看。

```
public static void main(String[] args) {
    // args is a parameter that is also available in this scope!
    // the next two variables can be used anywhere in main
    // including the if-else and loops

    String name = "Makoto";
    Integer numPhones = new Integer(1);

    if(name.length() == 6) {
        String newWord = "Wow!"; //can't be used anywhere but here
        System.out.println(name + " " + newWord);
    } else {
        String oldWord = "bummer."; //can't be used anywhere but here
        System.out.println(name + " " + oldWord);
    }

    for(int i = 0; i < args.length; i++) {
        String word = "hello"; // can't be used in main()
        System.out.println(word + args[i]);
    }
} 
```

**整个类范围内的变量（通常称为字段变量）：** 这些是类可以使用的变量，无论它在什么方法中。唯一的例外是*静态*方法；如果您要引用静态字段，则**必须**通过**静态方法**来完成。

```
public class Dummy {
    private int weight;
    private int height;
    private int age;
    private int shape;
    private String name;
    private static boolean isSmart;

    public String getName() {
        return name;
    }

    public int getHeight() {
        return height;
    }

    public int getAge() {
        return age;
    }

    public int getShape() {
        return shape;
    }

    public static boolean getIsSmart() {
        return isSmart;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:03:20.483

您需要移出`wage`并且`if`因为`else`您正在通过`System.out.println(wage)`.

```
import java.util.Scanner;

public class Java3 {
    public static void main(String[] args) {
        Scanner console = new Scanner(System.in);
        System.out.println("*** Basic Wage Calculator ***");
        System.out.printf("%n");
        System.out.println("Enter start time in 24:00 format");
        String startTime = console.nextLine();
        String[] tokens = startTime.split(":");
        double starttimeHours = Double.parseDouble(tokens[0]);
        double startMinutes = Double.parseDouble(tokens[1]);
        double wage = 0;
        if (starttimeHours >= 6 && starttimeHours <= 8
                || starttimeHours >= 9 && starttimeHours <= 19) {
            wage = 1.6;
        } else if (starttimeHours >= 9 && starttimeHours >= 10 && startMinutes >= 01) {
            wage = 43;
        } else {
            wage = 987;
        }
        System.out.println(wage);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T04:06:18.947

`{}`变量在定义它的范围（一对）中可用/可以使用。如果您需要增加变量的范围，您应该将其移到外部，`{}`以便您可以通过以下方式进行操作：

```
double wage = 0.00;   // Moved wage outside the if-scope
if (starttimeHours >= 6 && starttimeHours <= 8
            || starttimeHours >= 9 && starttimeHours <= 19) {
    wage = 1.6;
} else if (starttimeHours >= 9 && starttimeHours >= 10 && startMinutes >= 01) {
    wage = 43;
} else {
    wage = 987;
} 
```

# objective-c - 指导如何实现自定义艺术 Xcode

> ID：12505886
> 
> 赞同：0
> 
> 时间：2012-09-20T03:59:54.330
> 
> 标签：objective-c, ios, xcode

我需要一些关于如何在我的应用程序中插入自定义艺术的指导。

例如，我想在进度条上实现一个自定义层，所以我只需要在进度条上创建艺术和实现，还是应该做其他事情？

当我开始时，我面临着这种疑问。

为了澄清，我想知道定制艺术的实施是如何工作的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:05:52.210

此信息与 iOS 开发相关（不确定是否适用于 OSX）

如果您查看文档[UIProgressView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIProgressView_Class/Reference/Reference.html)，您可以看到您能够更新轨道和进度图像。这意味着您可以完全改变进度条的外观。

例如

```
[progressView setProgressImage:[UIImage imageNamed:@"progress_image.png"]];
[progressView setTrack:[UIImage imageNamed:@"track_image.png"]]; 
```

如果您想向 progressView 添加其他图像或标签（例如标记和百分比标签），那么由于 UIProgressView 是 UIView 的子类，您可以将图像添加到视图中（但首先调整新的图像\标签框架，使其成为位置正确）。

例如

```
UIImageView* marker = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"marker_line.png"]];
[marker setFrame:CGRectMake(10.5, marker.frame.origin.y + 13, marker.frame.size.width,  marker.frame.size.height)];
[progressView addSubview:marker]; 
```

# assembly - 从哪里开始并获取有关 X86 和 ARM CPU 寄存器的可靠信息以进行组装

> ID：12505890
> 
> 赞同：0
> 
> 时间：2012-09-20T04:00:54.047
> 
> 标签：assembly, x86, arm

我在哪里可以获得有关 X86 CPU 的特定寄存器的可靠描述和信息并为 ARM 做同样的事情？

我想开始在汇编中编程，但我不知道从哪里获取有关寄存器的信息或 SSE 等流行技术可以做什么。

# c - 在 Linux 下，recv 可以在 UDP 上返回 0 吗？

> ID：12505892
> 
> 赞同：15
> 
> 时间：2012-09-20T04:01:15.273
> 
> 标签：c, linux, udp

我只是在清理我们不久前编写的一些代码，并注意到对于 udp 套接字，0 被视为连接关闭。

我很确定这是从等效的 tcp 版本移植相同的 recv 循环的结果。但这让我想知道。recv 可以为 udp 返回 0 吗？在 tcp 上，它表示另一端已关闭连接。udp没有连接的概念所以能返回0吗？如果可以，它的含义是什么？

注意：linux 中的手册页没有区分 udp 和 tcp 的返回码为零，这可能是我们在代码中保留检查的原因。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-20T04:08:46.303

> udp没有连接的概念所以能返回0吗？如果可以的话，这是什么意思

这意味着收到了一个长度为 0 的数据报。来自伟大的[UNP](https://rads.stackoverflow.com/amzn/click/com/0131411551)：

> 写入长度为 0 的数据报是可以接受的。在 UDP 的情况下，这会导致一个 IP 数据报包含一个 IP 报头（通常 IPv4 为 20 个字节，IPv6 为 40 个字节）、一个 8 字节的 UDP 报头，并且没有数据。 **这也意味着 recvfrom 的返回值 0 对于数据报协议是可以接受的**：这并不意味着对等方已关闭连接，就像 TCP 套接字上读取的返回值 0 一样。由于 UDP 是无连接的，因此没有关闭 UDP 连接之类的事情。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-01-04T01:08:02.993

在 Linux 中，UDP 套接字上的 recvfrom 可能返回零有两个原因：

1) 接收到零长度数据报，或 2) 在套接字上调用了shutdown

第二种行为很有用，因为它允许您解除阻塞正在套接字上等待的线程。但是，recvfrom 的调用者无法知道套接字是否已关闭或是否接收到零长度数据报。为此，您需要一些其他方式向线程发出套接字已关闭的信号，例如使用共享变量。

第二种行为似乎也与 recv(2) 手册页相矛盾，该手册页是这样说的：

```
When  a  stream socket peer has performed an orderly shutdown, the return 
value will be 0 (the traditional "end-of-file" return). 
```

显然，它也发生在不是流套接字的 UDP 套接字上。

# c# - NBuilder - 如何创建包含多个派生类的集合

> ID：12505897
> 
> 赞同：1
> 
> 时间：2012-09-20T04:02:10.630
> 
> 标签：c#, mocking, nbuilder

我有实体：

```
BaseEntity (Base Class & Abstract)
DerivedOne (based on BaseEntity)
DerivedTwo (based on BaseEntity)
... 
```

是否可以构建一个列表（集合）`BaseEntity`但仅包含派生类的实例？

谢谢

**编辑**

我的意思是可以使用 NBuilder 创建列表`Build<BaseEntity>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:10:03.277

是的，这可能是样本

```
class Program
{
    static void Main(string[] args)
    {
        List<BaseEntity> list = new List<BaseEntity>();
        DerivedOne d1 = new DerivedOne() { bp1 = 1, Name = "DerivedOne" };
        DerivedTwo d2 = new DerivedTwo() { bp1 = 2, Name = "DerivedTwo" }; 

        list.Add(d1);
        list.Add(d2);

    }
}

public class BaseEntity
{
    public int bp1 { get; set; }
}

public class DerivedOne : BaseEntity
{
    public string Name { get; set; }
}

public class DerivedTwo : BaseEntity
{
    public string Name { get; set; }
} 
```

# javascript - mousemove 会自动触发 IE 9

> ID：12505907
> 
> 赞同：1
> 
> 时间：2012-09-20T04:02:42.217
> 
> 标签：javascript, jquery, internet-explorer

我在 IE 9 中遇到问题（尚未测试 8），代码应该做的是检测单击某个元素后鼠标是否被拖动。问题是即使我不移动鼠标，IE 9 也会自动进入 $(window).mousemove 事件处理程序。在 Chrome 和 FF 中运行良好。

```
 $(Element).mousedown(function() {
            $(window).mousemove(function() {
                isDragging = true;
                $(window).unbind("mousemove");
            });
        }).mouseup(function() {
            $(window).unbind("mousemove");
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:09:59.990

您应该只在鼠标移动一定的最小距离后才开始拖动。为此，请在 mousedown 处理程序中记录鼠标位置，然后在 mousemove 中，仅在鼠标移动最小距离时才开始拖动。

```
 $(Element).mousedown(function(e) {
        var x = e.clientX;
        var y = e.clientY;
        var minMovement = 3;
        $(window).mousemove(function(e) {
            if (Math.abs(e.clientX - x) > minMovement || Math.abs(e.clientY - y) > minMovement) {
                isDragging = true;
                $(window).unbind("mousemove");
            }
        });
    }).mouseup(function() {
        $(window).unbind("mousemove");
    }); 
```

仅供参考，有些鼠标可以记录非常非常微小的移动（屏幕上小于一个像素），因此在您按下鼠标后鼠标可能确实移动了，而 IE 可能只是报告了该移动。其他浏览器可能会等到鼠标移动一个完整像素。无论如何，如果您需要最少数量的移动像素，那么您将不会遇到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:17:58.957

因为使用激光鼠标时鼠标的移动是如此微小，所以我稍微改变了你的方法，以更好地满足我监控天气事实或鼠标是否移动的需要：

```
$(window).mousemove(function (e) {
    var smallNo = 0;
    var x = e.clientX;
    var y = e.clientY;
    var minMovement = 1;
    if ((x - smallNo) > minMovement || (y - smallNo) > minMovement) {
        countDownTime = logoutTime;
    }
}); 
```

即使 mousemove 事件不断触发，除非您实际移动鼠标，否则坐标不会改变。我用它来判断天气是否鼠标移动了。

# php - 如何使用oops php5概念将数据插入mysql数据库？

> ID：12505909
> 
> 赞同：0
> 
> 时间：2012-09-20T04:03:00.317
> 
> 标签：php, mysql

我是 PHP5 OOP 概念的新手。请为“如何使用 oops 概念插入数据？”提供一些示例源代码。即使在 connection.php 页面中，我也想为此使用纯 php5 概念。我想提高我的知识。请任何人帮助我....

我知道下面的基本概念

**insert_db.php**

```
 $sql="INSERT INTO Persons (FirstName, LastName, Age)
            VALUES
            ('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

            if (!mysql_query($sql,$con))
              {
              die('Error: ' . mysql_error());
              }
            echo "1 record added";

            mysql_close($con) 
```

## 连接.php

```
 <?php
            // connect database  code
             $dbhost ='localhost';
            $dbuser = 'tomking';
            $dbpass = 'dsfds';
            $dbname = 'mydb';
            //connectivity of database
            $conn = mysql_connect($dbhost,$dbuser,$dbpass) or die ('Error Connecting to mysql');
            mysql_select_db($dbname);
          ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:18:16.990

使用`Mysqli`or`PDO`用于使用 sql 查询，而不是直接将变量传递给查询。

当您直接将变量传递给查询时，这将导致sql注入

如果要将变量传递给 sql 查询，则必须为此使用过滤器

[从注入攻击中过滤转义后数据](http://corpocrat.com/2009/07/28/filtering-escaping-post-data-from-injection-attacks/)

[PDO 文档](http://php.net/manual/en/book.pdo.php)

[MySQLi 文档](http://php.net/manual/en/book.mysqli.php)

而这都是纯粹的`PHP5`概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:21:06.723

```
$mysqli = new mysqli($hostname, $username, $password, $database_name);

if($mysqli->error)
    die($mysqli->error);

$mysqli->query("SET NAMES 'UTF8'");

$query = "INSERT INTO my_table VALUES ('value_1', 'value_2')";
$mysqli->query($query);
if(!$mysql->error)
   echo 'do something';

$query = "SELECT * FROM my_table";
$sql = $mysqli->query($query);
if($sql->num_rows > 0) {
    while($row = $sql->fetch_assoc()) {
        echo $row['field_1'];
    }
}
$sql->close(); 
```

# height - 为什么我的 UIScreen mainScreen 边界大小在 ios6 中返回 480

> ID：12505910
> 
> 赞同：15
> 
> 时间：2012-09-20T04:03:02.067
> 
> 标签：height, screen, ios6

这是我获取主屏幕尺寸的代码

```
[[UIScreen mainScreen] bounds].size; 
```

在 ios5 和 ios6 中它返回 480 的高度，但是当我在视网膜 4 英寸模拟器中运行它时

，它仍然返回 480 的高度。

有谁知道如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-20T05:20:38.333

只需添加一个 1136 高度的新的默认 png 照片。

[[UIScreen mainScreen] bounds].size 将返回 4 英寸屏幕的新高度。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-01T09:21:33.230

您必须将 iPhone 5 Launch 图像 (Default-568h@2x.png) 添加到您的项目中。

568 点高的启动图像告诉 iOS 以 4" 模式启动您的应用程序。如果您没有此图像，您的应用程序将被视为 3.5" 应用程序。即使它是 4" 兼容的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-28T13:32:57.480

转到目标 -> 常规 -> 启动图像 -> （选择）LaunchImages

清除您的应用程序并运行它。

如果您有启动画面，请选择启动图像上的那些。

# php - 转义撇号的意外字符

> ID：12505911
> 
> 赞同：0
> 
> 时间：2012-09-20T04:03:09.777
> 
> 标签：php, mysql, forms, apostrophe, addslashes

我创建了一个表单，它接受一个文本块并将其插入 SQL 数据库。当用户使用单引号时，我不断收到 SQL 错误。我添加了addslashes() 函数，一切正常。但是根据 w3，php 应该已经这样做了。此外，当我从数据库中检索文本时，所有撇号都被替换为 � 字符。

有谁知道发生了什么？我什至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:25:33.283

使用这些函数在db中插入数据或从db中插入数据，
这些将解决单引号或双引号以及所有特殊包的问题。

```
function DBin($string) 
{
    return  trim(htmlspecialchars($string,ENT_QUOTES));
}

function DBout($string) 
{
    $string = trim($string);
    return htmlspecialchars_decode($string,ENT_QUOTES);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T13:34:16.063

谢谢大家。

mysql_escape_string() 工作。作为记录，addslashes() 将撇号变成了反引号。问题

# php - PHP致命错误未登录错误日志

> ID：12505912
> 
> 赞同：1
> 
> 时间：2012-09-20T04:03:15.627
> 
> 标签：php, apache, shutdown, error-log

我们正在使用 LAMP 架构。PHP Shutdown 函数正在捕获一些致命错误。但是这些致命错误没有记录在 apache error_log 文件中。我们使用了两个版本的 PHP。两个版本的功能相似。版本：php-5.2.17 和 php-5.3.14

# iphone - 渲染视图，缩放@2x，renderInContext，iPhone

> ID：12505915
> 
> 赞同：2
> 
> 时间：2012-09-20T04:03:51.627
> 
> 标签：iphone, xcode, uiview, render

我有一个包含图形的视图（称为 outPutView），例如 uIImageViews 和标签。我需要渲染 outPutView 的图像及其子视图。我正在使用 renderInContext:UIGraphicsGetCurrentContext() 这样做。工作正常，除了我需要缩放视图。我在 outPutView 上使用了转换。这成功地缩放了视图和它的子视图，但转换不渲染。当视图在屏幕上缩放时。最终渲染以原始大小显示视图，而渲染上下文为目标大小（此处为@2x iPhone 视图大小）。

谢谢阅读！！

```
[outPutView setTransform:CGAffineTransformMake(2, 0, 0, 2, 0, 0)];
CGSize renderSize = CGSizeMake(self.view.bounds.size.width*2, self.view.bounds.size.height*2);
UIGraphicsBeginImageContext(renderSize);
[[outPutView layer] renderInContext:UIGraphicsGetCurrentContext()];
renderedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-20T11:16:43.030

我刚刚完成了这项工作，尽管方向相反（按比例缩小）。以下是相关代码的摘要：

```
// destination size is half of self (self is a UIView)
float rescale = 0.5;
CGSize resize = CGSizeMake(self.width * rescale, self.height * rescale);

// make the destination context
UIGraphicsBeginImageContextWithOptions(resize, YES, 0);

// apply the scale to dest context
CGContextScaleCTM(UIGraphicsGetCurrentContext(), rescale, rescale);

// render self into dest context
[self.layer renderInContext:UIGraphicsGetCurrentContext()];

// grab the resulting UIImage
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

要扩大规模而不是缩小规模，拥有`rescale = 2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:30:22.233

我通过重新排序我的观点解决了这个问题。实际上在输出视图之间添加了另一个视图：渲染上下文的视图，以及通过变换缩放的视图。它起作用了，但我现在不知道为什么。对此的任何想法将不胜感激。谢谢阅读。

# .net - 如何将多线程表单创建为 MDIChild

> ID：12505916
> 
> 赞同：2
> 
> 时间：2012-09-20T04:04:05.347
> 
> 标签：.net, vb.net

是否可以有多个线程形式作为 MDIChild？我有一个 MdiChild 形式的 ActiveX 控件，它可能会占用大量处理 CPU，并且希望通过使用下面的示例代码使一个控件不会影响另一个控件。但是行 frmDoc.MdiParent = Me 会引发跨线程异常。

```
Dim frmDoc As MDIChild
Dim newThread As New Thread(
    Sub()
        frmDoc = New MDIChild
        frmDoc.MdiParent = Me '<- this line throws cross threading exception.
        Application.Run(frmDoc)
    End Sub
)
newThread.IsBackground = True
newThread.SetApartmentState(ApartmentState.STA)
newThread.Start() 
```

引发 System.InvalidOperationException 未处理：

```
Message=Cross-thread operation not valid: 
  Control 'FormMdiApp' accessed from a thread other than the thread it was created on.
Source=System.Windows.Forms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T04:11:50.410

GUI 元素只能在主事件循环中初始化和访问。您可以异步或在后台线程中处理繁重的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:14:46.647

尝试 BackgroundWorker [http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker(v=vs.95).aspx)

执行 DoWork 事件中的所有繁重操作，并使用 ProgressChanged/RunWorkerCompleted 事件更新 UI 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T00:50:54.583

关于如何实现这一点的可用选项

*   切换到 VC++ MFC 框架并遵循[MTMDI 示例：演示 MFC 用户界面线程](http://msdn.microsoft.com/en-us/library/s3wsyb55%28VS.80%29.aspx)
*   正如@Blorgbeard 所建议的那样，将[MdiChild](https://stackoverflow.com/users/369/blorgbeard)替换为 Forms

*   查看[在另一个线程中运行 WPF 控件](https://stackoverflow.com/questions/10029109/running-a-wpf-control-in-another-thread)

刚刚找到一篇很好的 msdn 支持文章[How To Create Windows in a Multithreaded Application](http://support.microsoft.com/kb/90975/en-us)

> 当在一个线程中创建父窗口并且在另一个线程中创建子窗口时，创建窗口可以强制执行隐式[AttachThreadInput ()。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681956%28v=vs.85%29.aspx)在具有父子关系的单独线程中创建（或设置）窗口时，将附加输入队列。

可以在 [演练中找到更多信息：通过在其自己的线程上显示每个 Windows 窗体来支持 COM 互操作](http://msdn.microsoft.com/en-us/library/ms233639%28v=vs.100%29.aspx)

有人问了类似的问题[Spawn a new thread to open a new window and close it from another thread](https://stackoverflow.com/questions/4698080/spawn-a-new-thread-to-open-a-new-window-and-close-it-from-a-different-thread)

但是，幸运的是，这些都没有关于子窗体的任何内容。

更新：刚刚在演练代码中发现了错误；但总的来说，这个样本有一些好主意。

# android - 选项卡在姜饼中不显示选项卡名称

> ID：12505941
> 
> 赞同：2
> 
> 时间：2012-09-20T04:08:50.803
> 
> 标签：android

我正在开发一个使用选项卡的应用程序。

问题是：在 API 级别 15 或更高级别的设备中，它工作正常，但在低于 API 15（例如 GingerBread）的设备中，它无法正常工作。

问题：在标签中，它不显示我在标签上写的文本，它只显示空白标签。你可以看到图片

**正确的图像：我们可以看到选项卡名称“Tracker”、“Call Logs”、“STD 代码”和“ISD 代码”** ![在此处输入图像描述](../Images/bbf1dc1fcbd81cfe2fe23dd8cae0214d.png)

**此图像中未显示问题图像选项卡名称（在姜饼中）** ![在此处输入图像描述](../Images/9efde5e3b473f07c20cdd8a9bf01409a.png)

正如您在此图像中看到的那样，选项卡名称未显示名称。

我的代码如下

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>

<TabHost android:layout_width="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:id="@android:id/tabhost"

>
<TabWidget
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"

/>
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"

        >
 <FrameLayout
 android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent"
 >

 </FrameLayout>

   </LinearLayout>

</TabHost> 
```

我的活动文件是

```
 public class MobileNumberTrackerTabbedHomeActivity extends TabActivity {
        /** Called when the activity is first created. */
        TabHost tabHost;

        @Override
        public void onCreate(Bundle savedInstanceState) 
        {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main);

                tabHost=getTabHost();
                //First Tab
                TabSpec tab1=tabHost.newTabSpec("Tracker");
                tab1=tab1.setIndicator("Tracker");
                Intent intentNumberTracker =new Intent(this, NumberTrackerActivity.class);
                tab1=tab1.setContent(intentNumberTracker);

                TabSpec tab2=tabHost.newTabSpec("STD Codes");
                tab2=tab2.setIndicator("STD Codes");
                Intent intentSTDCode=new Intent(this,STDCodeFinderActivity.class);
                tab2=tab2.setContent(intentSTDCode);

                TabSpec tab3=tabHost.newTabSpec("ISD Codes");
                tab3=tab3.setIndicator("ISD Codes");
                Intent intentISDCode=new Intent(this,ISDCodeFinderActivity.class);
                tab3=tab3.setContent(intentISDCode);

                TabSpec tab4=tabHost.newTabSpec("Call Logs");
                tab4=tab4.setIndicator("Call Logs");
                Intent intenCallLogs=new Intent(this,ShowCallLogsActivity.class);
                tab4=tab4.setContent(intenCallLogs);

                tabHost.addTab(tab1);
                tabHost.addTab(tab4);
                tabHost.addTab(tab2);
                tabHost.addTab(tab3);

        } 
```

}

我应该怎么做才能使所有 API 的标签都很好 请提出解决方案

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:16:03.650

应该是这样的，

```
//First Tab
      TabSpec tab1=tabHost.newTabSpec("Tracker");
      tab1.setIndicator("Tracker");
      Intent intentNumberTracker =new Intent(this, NumberTrackerActivity.class);
      tab1.setContent(intentNumberTracker); 
```

对于每个选项卡，而不是

```
//First Tab
      TabSpec tab1=tabHost.newTabSpec("Tracker");
      tab1=tab1.setIndicator("Tracker");
      Intent intentNumberTracker =new Intent(this, NumberTrackerActivity.class);
      tab1=tab1.setContent(intentNumberTracker); 
```

通过分配每次`tab1 = new content/setting`覆盖之前的设置字段。

# ruby-on-rails - 在保持控制器上下文功能的助手子类中包含助手

> ID：12505943
> 
> 赞同：0
> 
> 时间：2012-09-20T04:09:14.047
> 
> 标签：ruby-on-rails, ruby, dependency-injection, helper

其实这是我的问题。我有一个带有 MainController、HttpHelper 和 ServiceHelper 的 rails 应用程序。

**主控制器.rb**

```
class MainController < ApplicationController
    include ServiceHelper
    def my_method
        Service.make_stuff
    end
end 
```

**service_helper.rb**

```
module ServiceHelper
    class Service
        include HttpHelper
        def self.make_stuff
            http__foo
        end
    end
end
Service = ServiceHelper::Service 
```

**http_helper.rb**

```
module HttpHelper
    def http__foo
        #stuff
        params[:bar].nil?
    end
end 
```

如果一切正常，这段代码应该告诉我`:bar`参数是否存在，但我有问题。首先，这段代码不起作用，它告诉我`http__foo`没有定义，当然是因为`include HttpHelper`in Service 不起作用。

`params`我的第二个问题是，如果包含工作，变量可能会有问题。如果我`http__foo`在控制器中调用这个方法（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:26:05.163

`make_stuff`是一个类方法。`http_foo`是一个实例方法。因此，当您`http__foo`从您的调用时`make_stuff`，就像调用`Service.http_foo()`未定义一样。定义的是`Service.new.http_foo()`.

我不知道您想做什么，但以我的拙见，通过查看您的代码，您似乎并不真正熟悉`Rails MVC concept`并创建一个`MainController`（为什么不使用`ApplicationController`？），以及您使用助手的方式是对我来说很奇怪。从头开始可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:57:02.317

oldgod 关于类与实例方法的问题是正确的。此外，params 是在 ActionControllor 中定义的方法，它位于所有控制器的继承树之上。params 方法在 Service 中将不可用（当您在 Service 中包含 HttpHelper 时它会结束），除非您将其设为 ActionController 或 ApplicationController 的子类，这会有点奇怪，因为它不是控制器。

# cookies - 我怎么知道 GS cookie 在哪里？

> ID：12505949
> 
> 赞同：1
> 
> 时间：2012-09-20T04:10:07.430
> 
> 标签：cookies, stack

在现代 linux 上，我们可以将 a`stack smashing protection`应用于 gcc 编译的二进制文件，该保护的堆栈 cookie 保存在 GS:[0x14] 中。
在这种情况下，我想知道如何获得 GS 的确切基地址。

# ruby-on-rails-3 - Resque worker 可以在没有 redis 副本运行的情况下运行吗？

> ID：12505955
> 
> 赞同：1
> 
> 时间：2012-09-20T04:11:38.910
> 
> 标签：ruby-on-rails-3, resque

我开始一个工人：

```
rake environment resque:work RAILS_ENV=development VVERBOSE=1 QUEUE=* LOGFILE=/Users/matteo/workspace/APP/log/resque.log --trace 
```

我得到输出：

```
** Invoke environment (first_time)
** Execute environment
** Invoke resque:work (first_time)
** Invoke resque:preload (first_time)
** Invoke resque:setup (first_time)
** Execute resque:setup
** Execute resque:preload
** Invoke resque:setup 
** Execute resque:work 
```

一个快速的 ps 告诉我该过程已启动并正在运行。

现在我没有运行 Redis 的实例。快速`ps auxwwww | grep redis-server`证实了这一点。

工人不应该失败吗？

我下载了 resque 代码并在 worker.rb 中的 resque 代码中放置了一个断点：

```
(rdb:1) eval redis
#<Redis::Namespace:0x007f868cb57880 @namespace=:resque, @redis=#<Redis client v2.2.2 connected to redis://127.0.0.1:6379/1 (Redis v0.07)>> 
```

这怎么可能没有在那个端口上运行？谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T22:07:44.157

The answers is: "No, workers cannot run without a copy of Redis running".

The problem was caused by the fakeredis gem. Even though the gem was not included in the development environment the developer was requiring "redis/connction/memory" therefore using a fakeredis instance.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T21:07:39.133

Resque 确实需要 redis 才能工作，虽然看起来您的队列已启动，但如果没有 redis，它将无法处理。

启动服务器后，您可以通过转到此 url 查看队列的状态...

```
http://localhost:3000/resque/overview 
```

也就是说，如果您的 gemfile 中有以下内容

```
gem 'resque', :require => "resque/server" 
```

或者，如果您没有该设置，请在控制台中运行此设置`resque-web`以获取可访问的管理界面`localhost:3000/overview`

If you don't get an error and can access that page without a redis error, redis must be running somewhere, perhaps as a service on bootup?

For basic redis/resque setup see here - [http://railscasts.com/episodes/271-resque?view=asciicast](http://railscasts.com/episodes/271-resque?view=asciicast)

# android - android：如何在 Instagram 中获取用户照片？

> ID：12505956
> 
> 赞同：4
> 
> 时间：2012-09-20T04:11:38.493
> 
> 标签：android, instagram

在我的应用程序中，我的要求是获取用户照片并在我的应用程序中显示。

为此，我进行了身份验证，获得了访问令牌并输入了用户名密码，但这表明您无权打开此页面。接下来如何获取用户资料和照片。

这里我的代码是：

```
 String url ="https://instagram.com/oauth/authorize?" +"response_type=token" + 
 "&redirect_uri=" + CALLBACK_URL+"&scope=basic"+"&client_id=" + CLIENT_ID ;

  WebView webview = (WebView)findViewById(R.id.webview);

  webview.setWebViewClient(new WebViewClient() {

        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            String fragment = "#access_token=";
            int start = url.indexOf(fragment);
            if (start > -1) {

                // You can use the accessToken for api calls now.
                String accessToken = url.substring(start + fragment.length(), url.length());

                Log.v(TAG, "OAuth complete, token: [" + accessToken + "].");
                Log.i(TAG, "" +accessToken);
Toast.makeText(ActivityWebView.this, "Token: " + accessToken, Toast.LENGTH_SHORT).show();
            }
        }
    });

    webview.loadUrl(url);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T11:06:35.850

试试这个代码我得到了解决方案：

```
 URL example = new URL("https://api.instagram.com/v1/users/self/media/recent?access_token="
                            + accessToken);

            URLConnection tc = example.openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    tc.getInputStream()));

            String line;
            while ((line = in.readLine()) != null) {
                JSONObject ob = new JSONObject(line);

                JSONArray object = ob.getJSONArray("data");

                for (int i = 0; i < object.length(); i++) {

                    JSONObject jo = (JSONObject) object.get(i);
                    JSONObject nja = (JSONObject) jo.getJSONObject(photos);

                    JSONObject purl3 = (JSONObject) nja
                            .getJSONObject("thumbnail");
                    Log.i(TAG, "" + purl3.getString("url"));
                }

            }
        } catch (MalformedURLException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        } catch (JSONException e) {

            e.printStackTrace();
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T04:20:45.023

得到`/users/[USER_ID]/media/recent/?access_token=[ACCESS_TOKEN]`

您可以点击此 URL 以获取用户的供稿（最后 20 张照片）。这将为您提供一个 JSON 数组，然后您需要在应用程序中根据需要对其进行解析和显示。

# visual-studio-2010 - Visual Studio 2010 设置中的自定义对话框

> ID：12505957
> 
> 赞同：2
> 
> 时间：2012-09-20T04:11:46.740
> 
> 标签：visual-studio-2010

我需要与 Visual Studio 安装程序一起以两种形式添加一些输入数据。如何做到这一点。

# linux - 在Linux SD/MMC驱动中，开机时多次打印“Timeout waiting for hardware interrupt”

> ID：12505958
> 
> 赞同：3
> 
> 时间：2012-09-20T04:11:46.493
> 
> 标签：linux, driver

我正在使用 linux 内核 SD/MMC 驱动程序进行编程，但我对此知之甚少。内核打印下面的记录器日志。从转储寄存器日志中，我无法检测到 MMC 驱动程序或 MMC 硬件的问题。如果有谁熟悉它并帮助我？（对不起我的英语不好）另外：我使用这个MMC在CortexA9中启动一个android，在启动之前会很长时间并且很多“Timeout waiting for hardware interrupt”，看来是我的MMC驱动程序或硬件造成的？

日志如下：

```
[   11.356884] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   11.366256] 
[   11.366259] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   11.377104] : =========== REGISTER DUMP (mmc0)===========
[   11.382487] : Sys addr: 0x00000000 | Version:  0x00000200
[   11.387868] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   11.393250] : Argument: 0x00000c00 | Trn mode: 0x00000000
[   11.398631] : Present:  0x01f70001 | Host ctl: 0x00000000
[   11.404012] : Power:    0x00000001 | Blk gap:  0x00000000
[   11.409394] : Wake-up:  0x00000000 | Clock:    0x00004007
[   11.414777] : Timeout:  0x00000000 | Int stat: 0x00000000
[   11.420157] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   11.425540] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   11.430920] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   11.436302] : Cmd:      0x0000341a | Max curr: 0x00000001
[   11.441684] : ===========================================
[   11.447066] 
[   11.447069] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   21.474339] mmc0: Timeout waiting for hardware interrupt.
[   21.476884] 
[   21.476888] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   21.486258] 
[   21.486260] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   21.497108] : =========== REGISTER DUMP (mmc0)===========
[   21.502491] : Sys addr: 0x00000000 | Version:  0x00000200
[   21.507871] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   21.513253] : Argument: 0x80000c08 | Trn mode: 0x00000000
[   21.518634] : Present:  0x01f70001 | Host ctl: 0x00000000
[   21.524015] : Power:    0x00000001 | Blk gap:  0x00000000
[   21.529399] : Wake-up:  0x00000000 | Clock:    0x00004007
[   21.534779] : Timeout:  0x00000000 | Int stat: 0x00000000
[   21.540160] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   21.545542] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   21.550924] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   21.556305] : Cmd:      0x0000341a | Max curr: 0x00000001
[   21.561687] : ===========================================
[   21.567068] 
[   21.567071] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   31.594338] mmc0: Timeout waiting for hardware interrupt.
[   31.596879] 
[   31.596882] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   31.606253] 
[   31.606256] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   31.617102] : =========== REGISTER DUMP (mmc0)===========
[   31.622484] : Sys addr: 0x00000000 | Version:  0x00000200
[   31.627865] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   31.633248] : Argument: 0x00000000 | Trn mode: 0x00000000
[   31.638629] : Present:  0x01f70000 | Host ctl: 0x00000000
[   31.644010] : Power:    0x00000001 | Blk gap:  0x00000000
[   31.649392] : Wake-up:  0x00000000 | Clock:    0x00004007
[   31.654773] : Timeout:  0x00000000 | Int stat: 0x00000000
[   31.660155] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   31.665536] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   31.670920] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   31.676301] : Cmd:      0x00000000 | Max curr: 0x00000001
[   31.681682] : ===========================================
[   31.687063] 
[   31.687065] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   41.714339] mmc0: Timeout waiting for hardware interrupt.
[   41.716881] 
[   41.716885] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   41.726256] 
[   41.726259] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   41.737106] : =========== REGISTER DUMP (mmc0)===========
[   41.742489] : Sys addr: 0x00000000 | Version:  0x00000200
[   41.747869] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   41.753251] : Argument: 0x000001aa | Trn mode: 0x00000000
[   41.758632] : Present:  0x01f70000 | Host ctl: 0x00000000
[   41.764014] : Power:    0x00000001 | Blk gap:  0x00000000
[   41.769395] : Wake-up:  0x00000000 | Clock:    0x00004007
[   41.774777] : Timeout:  0x00000000 | Int stat: 0x00000000
[   41.780158] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   41.785540] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   41.790923] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   41.796303] : Cmd:      0x0000081a | Max curr: 0x00000001
[   41.801684] : ===========================================
[   41.807066] 
[   41.807069] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   51.834338] mmc0: Timeout waiting for hardware interrupt.
[   51.836885] 
[   51.836888] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   51.846259] 
[   51.846261] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   51.857108] : =========== REGISTER DUMP (mmc0)===========
[   51.862491] : Sys addr: 0x00000000 | Version:  0x00000200
[   51.867874] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   51.873255] : Argument: 0x00000000 | Trn mode: 0x00000000
[   51.878635] : Present:  0x01f70001 | Host ctl: 0x00000000
[   51.884017] : Power:    0x00000001 | Blk gap:  0x00000000
[   51.889399] : Wake-up:  0x00000000 | Clock:    0x00004007
[   51.894780] : Timeout:  0x00000000 | Int stat: 0x00000000
[   51.900162] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   51.905543] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   51.910926] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   51.916307] : Cmd:      0x00000502 | Max curr: 0x00000001
[   51.921688] : ===========================================
[   51.927069] 
[   51.927072] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   61.954338] mmc0: Timeout waiting for hardware interrupt.
[   61.956879] 
[   61.956883] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   61.966255] 
[   61.966257] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   61.977103] : =========== REGISTER DUMP (mmc0)===========
[   61.982486] : Sys addr: 0x00000000 | Version:  0x00000200
[   61.987868] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   61.993248] : Argument: 0x00000000 | Trn mode: 0x00000000
[   61.998630] : Present:  0x01f70001 | Host ctl: 0x00000000
[   62.004013] : Power:    0x00000001 | Blk gap:  0x00000000
[   62.009394] : Wake-up:  0x00000000 | Clock:    0x00004007
[   62.014775] : Timeout:  0x00000000 | Int stat: 0x00000000
[   62.020156] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   62.025538] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   62.030921] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   62.036301] : Cmd:      0x00000502 | Max curr: 0x00000001
[   62.041682] : ===========================================
[   62.047065] 
[   62.047067] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   72.074338] mmc0: Timeout waiting for hardware interrupt.
[   72.076883] 
[   72.076886] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   72.086257] 
[   72.086260] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   72.097106] : =========== REGISTER DUMP (mmc0)===========
[   72.102489] : Sys addr: 0x00000000 | Version:  0x00000200
[   72.107872] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   72.113252] : Argument: 0x00000000 | Trn mode: 0x00000000
[   72.118634] : Present:  0x01f70001 | Host ctl: 0x00000000
[   72.124015] : Power:    0x00000001 | Blk gap:  0x00000000
[   72.129397] : Wake-up:  0x00000000 | Clock:    0x00004007
[   72.134778] : Timeout:  0x00000000 | Int stat: 0x00000000
[   72.140161] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   72.145541] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   72.150924] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   72.156305] : Cmd:      0x00000502 | Max curr: 0x00000001
[   72.161686] : ===========================================
[   72.167068] 
[   72.167071] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   82.194338] mmc0: Timeout waiting for hardware interrupt.
[   82.196878] 
[   82.196881] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   82.206251] 
[   82.206254] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   82.217101] : =========== REGISTER DUMP (mmc0)===========
[   82.222485] : Sys addr: 0x00000000 | Version:  0x00000200
[   82.227865] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   82.233246] : Argument: 0x00000000 | Trn mode: 0x00000000
[   82.238628] : Present:  0x01f70001 | Host ctl: 0x00000000
[   82.244009] : Power:    0x00000001 | Blk gap:  0x00000000
[   82.249391] : Wake-up:  0x00000000 | Clock:    0x00004007
[   82.254773] : Timeout:  0x00000000 | Int stat: 0x00000000
[   82.260154] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   82.265536] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   82.270918] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   82.276299] : Cmd:      0x00000502 | Max curr: 0x00000001
[   82.281681] : ===========================================
[   82.287063] 
[   82.287066] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[   92.314341] mmc0: Timeout waiting for hardware interrupt.
[   92.316881] 
[   92.316885] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[   92.326256] 
[   92.326259] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[   92.337106] : =========== REGISTER DUMP (mmc0)===========
[   92.342488] : Sys addr: 0x00000000 | Version:  0x00000200
[   92.347870] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[   92.353250] : Argument: 0x00000000 | Trn mode: 0x00000000
[   92.358632] : Present:  0x01f70000 | Host ctl: 0x00000000
[   92.364013] : Power:    0x00000001 | Blk gap:  0x00000000
[   92.369395] : Wake-up:  0x00000000 | Clock:    0x00004007
[   92.374776] : Timeout:  0x00000000 | Int stat: 0x00000000
[   92.380157] : Int enab: 0x00000000 | Sig enab: 0x00000000
[   92.385539] : AC12 err: 0x00000000 | Slot int: 0x00000000
[   92.390922] : Caps:     0x07e00080 | Caps_1:   0x00000000
[   92.396303] : Cmd:      0x0000371a | Max curr: 0x00000001
[   92.401685] : ===========================================
[   92.407066] 
[   92.407069] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[  102.434339] mmc0: Timeout waiting for hardware interrupt.
[  102.436884] 
[  102.436887] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[  102.446259] 
[  102.446262] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[  102.457109] : =========== REGISTER DUMP (mmc0)===========
[  102.462490] : Sys addr: 0x00000000 | Version:  0x00000200
[  102.467872] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[  102.473253] : Argument: 0x00000000 | Trn mode: 0x00000000
[  102.478635] : Present:  0x01f70000 | Host ctl: 0x00000000
[  102.484018] : Power:    0x00000001 | Blk gap:  0x00000000
[  102.489399] : Wake-up:  0x00000000 | Clock:    0x00004007
[  102.494779] : Timeout:  0x00000000 | Int stat: 0x00000000
[  102.500161] : Int enab: 0x00000000 | Sig enab: 0x00000000
[  102.505542] : AC12 err: 0x00000000 | Slot int: 0x00000000
[  102.510924] : Caps:     0x07e00080 | Caps_1:   0x00000000
[  102.516306] : Cmd:      0x0000371a | Max curr: 0x00000001
[  102.521688] : ===========================================
[  102.527070] 
[  102.527073] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[  112.554340] mmc0: Timeout waiting for hardware interrupt.
[  112.556888] 
[  112.556891] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[  112.566262] 
[  112.566265] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[  112.577112] : =========== REGISTER DUMP (mmc0)===========
[  112.582495] : Sys addr: 0x00000000 | Version:  0x00000200
[  112.587875] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[  112.593258] : Argument: 0x00000000 | Trn mode: 0x00000000
[  112.598638] : Present:  0x01f70000 | Host ctl: 0x00000000
[  112.604019] : Power:    0x00000001 | Blk gap:  0x00000000
[  112.609401] : Wake-up:  0x00000000 | Clock:    0x00004007
[  112.614782] : Timeout:  0x00000000 | Int stat: 0x00000000
[  112.620164] : Int enab: 0x00000000 | Sig enab: 0x00000000
[  112.625546] : AC12 err: 0x00000000 | Slot int: 0x00000000
[  112.630928] : Caps:     0x07e00080 | Caps_1:   0x00000000
[  112.636309] : Cmd:      0x0000371a | Max curr: 0x00000001
[  112.641691] : ===========================================
[  112.647072] 
[  112.647075] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[  122.674338] mmc0: Timeout waiting for hardware interrupt.
[  122.676882] 
[  122.676885] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[  122.686257] 
[  122.686260] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[  122.697107] : =========== REGISTER DUMP (mmc0)===========
[  122.702488] : Sys addr: 0x00000000 | Version:  0x00000200
[  122.707870] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[  122.713251] : Argument: 0x00000000 | Trn mode: 0x00000000
[  122.718633] : Present:  0x01f70000 | Host ctl: 0x00000000
[  122.724014] : Power:    0x00000001 | Blk gap:  0x00000000
[  122.729397] : Wake-up:  0x00000000 | Clock:    0x00004007
[  122.734777] : Timeout:  0x00000000 | Int stat: 0x00000000
[  122.740159] : Int enab: 0x00000000 | Sig enab: 0x00000000
[  122.745540] : AC12 err: 0x00000000 | Slot int: 0x00000000
[  122.750922] : Caps:     0x07e00080 | Caps_1:   0x00000000
[  122.756304] : Cmd:      0x0000371a | Max curr: 0x00000001
[  122.761686] : ===========================================
[  122.767068] 
[  122.767071] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[  132.794340] mmc0: Timeout waiting for hardware interrupt.
[  132.796887] 
[  132.796890] ^^^^^^^Sirfsoc-dsmmc.c >> sdhci_timeout_timer() error -- 

[  132.806259] 
[  132.806262] ^^^^^^^Enter sdhci_dumpregs function after sdhci_timeout_timer() 
error -- add by ^^^^^^^
[  132.817110] : =========== REGISTER DUMP (mmc0)===========
[  132.822493] : Sys addr: 0x00000000 | Version:  0x00000200
[  132.827874] : Blk size: 0x00000000 | Blk cnt:  0x00000000
[  132.833255] : Argument: 0x00000000 | Trn mode: 0x00000000
[  132.838636] : Present:  0x01f70001 | Host ctl: 0x00000000
[  132.844017] : Power:    0x00000001 | Blk gap:  0x00000000
[  132.849399] : Wake-up:  0x00000000 | Clock:    0x00004007
[  132.854781] : Timeout:  0x00000000 | Int stat: 0x00000000
[  132.860162] : Int enab: 0x00000000 | Sig enab: 0x00000000
[  132.865544] : AC12 err: 0x00000000 | Slot int: 0x00000000
[  132.870927] : Caps:     0x07e00080 | Caps_1:   0x00000000
[  132.876307] : Cmd:      0x00000102 | Max curr: 0x00000001
[  132.881688] : ===========================================
[  132.887070] 
[  132.887073] ^^^^^^^sdchci_dumpregs after sdhci_timeout_timer() error -- add b
y ^^^^^^^
[  133.091254] mmc0: new high speed SDHC card at address b368
[  133.094266] mmcblk0: mmc0:b368 00000 7.51 GiB 
[  133.106779]  mmcblk0: p1 p2 p3 p4 < p5 p6 p7 p8 >
[  133.111292] sirfsoc_rtc sirfsoc_rtc.0: setting system clock to 1970-01-01 02:
23:46 UTC (8626)
[  133.127864] Freeing init memory: 2868K
[  133.442704] mmc1: new SD card at address aaaa
[  133.445366] mmcblk1: mmc1:aaaa SU02G 1.84 GiB 
[  133.457479]  mmcblk1: p1
[  133.657088] EXT4-fs (mmcblk0p2): mounted filesystem with ordered data mode. O
pts: (null) 
```

# matlab - 我应该像这样在 Matlab 中使用 arrayfun 吗？

> ID：12505964
> 
> 赞同：1
> 
> 时间：2012-09-20T04:12:53.933
> 
> 标签：matlab

几天前我开始学习一点Matlab。

我想绘制一个类似狄拉克梳子的近似值，所以鉴于我知道一些函数式编程，并且有人告诉我“你不应该`for`在 Matlab 中需要循环”，我最终得到了这个：

```
M = 50
dx = 0.1
r = 20
x = -r/dx:r/dx
y = arrayfun(@(k) dx .* sum(exp(-2j * pi * dx * k * (-M:dx:M))), x) 
```

但我觉得`arrayfun`这不是一个好方法——它只是在 Matlab 中感觉尴尬/矫枉过正。

或者也许只是我，我不知道。
有没有更好的方法来绘制这个图而不诉诸`arrayfun`，或者这是最好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:47:21.157

首先，在命令后面使用分号来抑制输出，这确实会影响性能：

```
M  = 50;
dx = 0.1;
r  = 20;
x  = -r/dx : r/dx; 
```

然后，点运算符（`.*`,`./`等）用于元素操作。你在 arrayfun ( `dx .* sum(exp(...))`) 中做的乘法是一个标量乘以一个向量。在这种情况下，元素乘法和正常乘法是相同的。保持标量*向量的正常乘法是一个好习惯；它有助于防止错误。

然后，这`arrayfun`是不必要的。你可以像这样完成同样的事情：

```
y = dx * sum( exp(-2j*pi*dx * (-M:dx:M).'*x) ); 
```

乘积`-2j*pi*dx`是所有标量之间的乘积。然而，该产品`(-M:dx:M).'*x`是矩阵之间的产品。由于`sum`默认情况下对列（维度 1）求和，因此结果是相同的。此解决方案具有较大的内存开销，但*比*`arrayfun`.

请注意，我已用于`.'`转置。在 Matlab 中，符号`A'`表示共轭转置，`A.'`表示正常转置。尤其是在像你这样复杂的数学背景下，这非常重要。了解其中的差异，并记住它。

# jquery - WordPress 上的 fancyBox 调整大小 onWindow 调整大小

> ID：12505967
> 
> 赞同：1
> 
> 时间：2012-09-20T04:13:03.577
> 
> 标签：jquery, fancybox

我正在为 WordPress 使用 fancyBox 插件，但我遇到了问题。当我调整窗口大小时，弹出窗口不会调整大小，但是如果我在调整窗口大小的图像中导航，它会正确调整弹出窗口的大小。我正在尝试像这样进行额外的回调：

```
window.onresize = function(event) {
   $.fancybox.resize();
} 
```

但它显示一个错误：`$ is not defined`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:29:04.207

尝试使用`jQuery`而不是`$`

```
window.onresize = function(event) {
   jQuery.fancybox.resize();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:51:57.657

您应该使用[`$(window).resize()`](http://api.jquery.com/resize/)and not `window.onresize`，因为使用本机事件处理程序可能会干扰或被 jQuery 干扰。因此，如果您有 jQuery，请使用 jQuery 方法。

我不知道你有什么版本的 FancyBox ^(**$**)，但如果你是最新的（2.1.0），你可以传递[**`autoDimensions: true`**](http://fancybox.net/api)给构造函数，它会为你做：

> **autoDimensions:** *true*
> 对于内联和 ajax 视图，将视图大小调整为元素接收。确保它有尺寸，否则会产生意想不到的结果

```
$(document).ready(function() {
    $("a").fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        width: 400,
        height: 300,
        autoDimensions: true
    });
}); 
```

[演示](http://jsfiddle.net/yw4y5/)，[源码](http://jsfiddle.net/yw4y5/embedded/result/)

您还可以使用以下一项或多项：

```
 Method                 Description
----------------------------------------------------------------------------
 $.fancybox.resize  // Auto-resizes FancyBox height to match content height
 $.fancybox.center  // Centers FancyBox in viewport 
```

* * *

[^(**$**)根据[this answer from 2010](https://stackoverflow.com/a/2505274/451969)，`$.fancybox.resize()`适用于v1.3及以下版本。但是，它实际上在最新的（2012 年 9 月 19 日）文档中被引用，位于Public *Methods*[的最底部](http://fancybox.net/api)。]

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T05:11:42.970

也许试试这个...

```
JQuery(document).ready(function() {

  window.onresize = function(event) {
    JQuery('.fancybox').resize();
  }

)}; 
```

类`.fancy`是正确的吗？*

# ios - 如何从另一个视图的背面为滚动视图设置动画

> ID：12505972
> 
> 赞同：0
> 
> 时间：2012-09-20T04:13:42.903
> 
> 标签：ios, uiscrollview, uiviewanimation

在我的 iPhone 应用程序中，我在主视图控制器上有两个视图，一个是带有一些按钮的普通视图“a”，另一个是滚动视图“b”。当我点击视图“a”中的按钮时，我想显示带有动画的滚动视图，例如滚动视图必须从视图“a”的后面出现，但它从视图“a”的前面出现。

我使用以下代码为滚动视图设置动画。

```
CGRect Frame = scrollView.frame;
if(Frame.origin.y == 420){
    Frame.origin.y = 298;
            [UIView animateWithDuration:0.5 animations:^{
        scrollView.frame = Frame;
    }];
}else{
    Frame.origin.y = 420;
    [UIView animateWithDuration:0.5 animations:^{
        scrollView.frame = Frame;
    }]; 
```

如何实现动画以滚动视图以从视图“a”的顶部显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:12:23.413

我找到了解决我的问题的方法。

解决方案 ：

```
CGRect Frame = scrollView.frame;
    if(Frame.origin.y == 420){
        Frame.origin.y = 298;
        [UIView animateWithDuration:0.5 animations:^{
            scrollView.frame = Frame;
            [self.view insertSubview:scrollView belowSubview:view_a];
        }];

    }else{
        Frame.origin.y = 420;
        [UIView animateWithDuration:0.5 animations:^{
            scrollView.frame = Frame;
            [self.view insertSubview:scrollView belowSubview:view_a];
        }];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T05:09:20.630

尝试先将“b”移到后面：

```
[self.view sendSubviewToBack:scrollview_b]; 
```

# mysql - MySQL - 使两个或多个列一起唯一

> ID：12505975
> 
> 赞同：1
> 
> 时间：2012-09-20T04:13:56.023
> 
> 标签：mysql

我正在创建一个数据库（MySQL），它将存储有关 Magic: The Gathering 卡的信息。

目前，我的卡`names`为`unique`，但是我刚刚意识到这是一个问题，因为许多卡可以跨多个版本使用，例如：

![在此处输入图像描述](../Images/18f8b9eefa0ddd09821ebe8e388d906c.png)

我还存储了卡所属的版本（作为链接到`editions`表格的 ID）。

是否可以定义两列的*组合*`name`和`edition`unique 而不是 just `name`，以便在尝试插入上述两张卡时没有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:22:19.007

你可以这样做：

```
UNIQUE KEY column_Name (column1,column2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T04:18:23.997

是的，您可以创建复合唯一索引：

```
UNIQUE KEY `names_editions` (`name`,`edition`) 
```

# asp.net-mvc - 部分视图的客户端验证在 IE 中不起作用

> ID：12505982
> 
> 赞同：0
> 
> 时间：2012-09-20T04:15:00.817
> 
> 标签：asp.net-mvc

我正在添加部分视图，成功完成后，我调用了验证插件。但是客户端验证在 IE 中不起作用，但在 Chrome 和 Firefox 中起作用。请有任何建议。

```
$('form').removeData("validator");
$.validator.unobtrusive.parse(document); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T04:30:07.390

尝试在 DIV 中渲染部分视图，并使用以下行添加视图的客户端验证。

```
 $.validator.unobtrusive.parse($("#YOURDIVID")); 
```

无需致电您上面提到的第一行

```
 $('form').removeData("validator"); // NOT REQUIRED 
```

# c# - ASP.NET MVC 中全局使用的对象

> ID：12505984
> 
> 赞同：2
> 
> 时间：2012-09-20T04:15:25.570
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我想在启动应用程序时实例化一个类，然后在每个类（自定义`ValidationAttribute`、控制器等）中使用该对象。

我应该在哪里实例化该类以在任何地方访问它？

我正在使用带有 C# 的 ASP.NET MVC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T04:50:01.937

除了已经给出的选择之外，您还可以使用依赖注入器来控制昂贵对象的管理和生命周期。[Castle Windsor](http://docs.castleproject.org/Default.aspx?Page=MainPage&NS=Windsor&AspxAutoDetectCookieSupport=1)、[Ninject](http://www.ninject.org/)和[StructureMap](http://docs.structuremap.net/)与 asp.net mvc 配合得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T04:17:57.813

您可以将其设为 MvcApplication 类 (global.asax) 的静态属性，并在 Application_Start 中对其进行实例化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-20T04:19:32.947

我将此类对象实例放在 HttpRuntime 缓存中。

```
public static MyCacheHelper
{
    public static MyType GetMyInstance
    {
        get
        {
            if (HttpRuntime.Cache[MY_CACHE_KEY] == null)
            {
                HttpRuntime.Cache[MY_CACHE_KEY] = new MyType();
            }
            return (MyType)HttpRuntime.Cache[MY_CACHE_KEY];
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-20T04:22:09.407

听起来您想创建一个 Singleton 类。 [这篇文章](http://csharpindepth.com/Articles/General/Singleton.aspx)有很多例子来说明如何实现这一点，以及它们的注意事项。从文章来看，这可能是创建单例的最简单方法：

```
public sealed class Singleton
{
    private static readonly Singleton instance = new Singleton();

    // Explicit static constructor to tell C# compiler
    // not to mark type as beforefieldinit
    static Singleton()
    {
    }

    private Singleton()
    {
    }

    public static Singleton Instance
    {
        get
        {
            return instance;
        }
    }
} 
```

在您需要访问您的类的代码中的任何地方，您都可以编写`Singleton.Instance.MyMethod()`（按照上面的示例），就像您访问`string.IsNullOrEmpty()`. 除了上面包含的样板代码之外，您可以像编写任何其他类一样编写属性和方法。

# ios - 导出 Viewarray 对象 textView 文本

> ID：12505988
> 
> 赞同：1
> 
> 时间：2012-09-20T04:16:34.290
> 
> 标签：ios, xcode, nsdata

我正在开发一个应用程序来创建任意数量的笔记，比如便利贴。我正在添加视图并将其放入 viewArray

```
- (IBAction)add:(id)sender {
NoteViewController *noteController = [[NoteViewController alloc]initWithNibName:@"NoteViewController" bundle:nil];

[self.view addSubview:noteController.view];
UIView *myAddedView = (UIView *)[noteController view];

[viewArray insertObject:myAddedView atIndex:0];
noteController.myTextView.tag = viewArray.count;} 
```

如您所见，即使在转换为 addviews 之后，我仍在 noteController 中的 textviews 中添加标签，以便在我想从创建的所有 textviews 导出内容时获取 textview 文本。

```
- (IBAction)export:(id)sender{
NSData *myData;
NSInteger *cont = (NSInteger *)viewArray.count;
for (UIView *subviewa in [self.view subviews])
{
    if(cont>0)
        if (subviewa.tag == 0)
        myData = (NSData *)[subviewa viewWithTag:1];

        NSLog(@"%@", myData);
    }
    cont--;
 } 
```

当我单击导出时，我得到

```
<UITextView: 0x684a130; frame = (6 0; 84 92); text = 'my text'; clipsToBounds = YES;
 autoresize = RM+BM; tag = 1; layer = <CALayer: 0x684a310>; contentOffset: {0, 0}> 
```

据我所知，这是一个 nsdata。我尝试过 JSON、强制转换......当我尝试访问 text 属性时，应用程序崩溃了。我需要帮助才能从 viewarray 中的所有对象访问 textviews 文本。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:44:16.720

任何视图都有它的子视图数组。因此，当您将 textview 添加到视图时，并且此视图中没有其他对象时，您可以像这样引用 textview：

```
[subviewa.subviews objectAtIndex:0]; 
```

并得到这样的文本属性：

```
[(UITextView *)[subviewa.subviews objectAtIndex:0] text]; 
```

`export:`从数组返回所有视图并显示其文本视图文本的方法代码：

```
- (IBAction)export:(id)sender{
    for (UIView *subviewa in [self.view subviews])
    {
        NSLog(@"SUBVIEW %@", (NSData *)subviewa);
        NSLog(@"TEXTVIEW TEXT IN SUBVIEW %@", [(UITextView *)[subviewa.subviews objectAtIndex:0] text]);
    }
} 
```

# iphone - iOS 单元测试

> ID：12505991
> 
> 赞同：1
> 
> 时间：2012-09-20T04:17:10.103
> 
> 标签：iphone, ios, xcode, unit-testing

我是单元测试的新手，正在尝试。

我创建了一个带有 1 个按钮（获取总和）和 3 个文本字段（输入 2 个数字并输出总和）的视图控制器。

```
int aNum = [self.firstNumber.text intValue];
int bNum = [self.secondNumber.text intValue];

sum = aNum + bNum;
self.total.text = [NSString stringWithFormat:@"%i", sum];
[self dismissKeyboard]; 
```

还有我的测试代码：

```
vc = [[TestingViewController alloc] init];
vc.firstNumber.text = @"1";
vc.secondNumber.text = @"2";

[vc getSum:nil];

STAssertTrue([vc.total.text isEqualToString:@"3"], @"total should be 3"); 
```

测试失败是因为我尝试使用 UI 元素。

我的问题是：是否可以使用这样的 UI 元素进行测试？我将如何编写测试来实现这一目标？

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T04:29:25.737

是的，在单元测试中测试 UI 元素绝对是可能的。

Graham Lee 的 Test-Driven iOS Development (Developer's Library) 涵盖了这方面的技术以及更多（包括依赖网络的测试代码），这是一个很好的资源： [http ://www.amazon.com/Test-Driven-iOS-开发-开发者-库/dp/0321774183](https://rads.stackoverflow.com/amzn/click/com/0321774183)

可能是视图没有被加载。当我开始在 iOS 上进行单元测试时，我遇到了同样的问题。尝试调用 [vc loadView]; 初始化视图控制器后。

```
vc = [[TestingViewController alloc] init];
[vc loadView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T04:30:32.740

您正在尝试在应用程序运行时测试其功能。您了解单元测试和应用程序测试之间的区别吗？您是否阅读并遵守了[有关应用程序测试的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html#//apple_ref/doc/uid/TP40002143-CH3-SW6)？你在设备上运行吗？

这是一个有用的教程：[http ://cocoawithlove.com/2009/12/sample-iphone-application-with-complete.html](http://cocoawithlove.com/2009/12/sample-iphone-application-with-complete.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T04:25:08.953

您需要加载通过访问视图完成的 NIB（请参阅[iOS 的视图生命周期](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)）：

```
vc = [[TestingViewController alloc] init];
// vc.firstNumber is nil right now, because the view isn't loaded
[vc view];
// vc.firstNumber now exists
vc.firstNumber.text = @"1";
vc.secondNumber.text = @"2";

[vc getSum:nil];

STAssertTrue([vc.total.text isEqualToString:@"3"], @"total should be 3"); 
```

或者，如果视图是 UIWindow 层次结构的一部分，则不需要这样做（即 - 端到端测试）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-20T05:30:04.050

要测试 UI，您可以使用在 Instruments 中运行的 javascript。

# c# - Fill() 方法在 .net (ADO) 中变慢

> ID：12505994
> 
> 赞同：0
> 
> 时间：2012-09-20T04:17:49.447
> 
> 标签：c#, .net, performance, ado.net, fill

在我的 .net 应用程序中，我面临着一个`performance problem`. 我的存储过程之一处理超过`two tables having 30,000 records`. 但是`SP itself returns fastly`. 但在我`DataAccesss`的情况下，填写它需要更多时间`DataTable`

我的数据访问是

```
cmd.CommandType = CommandType.StoredProcedure;//cmd-sqlcommand object
conn.Open();//conn-sqlconnection object
adpt = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
adpt.Fill(dt);
conn.Close();

return dt; 
```

如果有人知道更好性能的解决方案，请分享。