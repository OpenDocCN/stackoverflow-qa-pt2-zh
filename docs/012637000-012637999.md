# StackOverflow 问答 12637000-12637999

# ruby-on-rails - 带有继承的 MongoID + Rails

> ID：12637002
> 
> 赞同：0
> 
> 时间：2012-09-28T09:11:50.083
> 
> 标签：ruby-on-rails, inheritance, model, mongoid

**你好**

正如我在手动继承中读到的，基于 mongo 的模型是可用的。但是如果我继承一个模型，当保存时，他会转到以继承根名称命名的文档。

IE

```
class Base
  include Mongoid::Document
  field :enabled, type: Boolean, default: true
end

class Message < Base
  attr_accessible :name , :description
end

class Event < Base
  field :description, type: String
end 
```

当我对 Message 和 Event 执行创建时，都转到名为 base 的文档

我要做的就是存储消息模型、消息文档和类似的事件但保持继承

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:14:43.777

您可以为每个模型指定一个集合

```
class Message < Base
  store_in collection: :messages

  attr_accessible :name , :description
end

class Event < Base
  store_in collection: :events

  field :description, type: String
end 
```

# wpf - 可以将 WPF UserControl 标记为过时吗？

> ID：12637005
> 
> 赞同：2
> 
> 时间：2012-09-28T09:12:04.060
> 
> 标签：wpf, c#-4.0, .net-4.0, user-controls

我正在一组控件中编写一个新版本的中央用户控件。我想将旧版本设置为过时，以便开发人员不再使用它（并希望也更改旧引用）。

我尝试将代码隐藏类设置为过时，但这似乎没有任何效果。是否有任何其他方式（在 XAML 或代码中）告诉编译器警告过时的 UserControl？

编辑：为了澄清，我希望在 XAML 中引用 UserControl 时显示警告。如果它在代码隐藏中实例化，并且代码隐藏类被标记为过时，则会显示警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:20:26.613

当您将旧版本标记为过时时，您期待什么？Resharper（至少）将突出显示对具有过时属性的类的任何引用以及注释。乍一看，这似乎符合要求。如果您使用将警告视为错误选项（推荐）进行编译，那么除非已明确排除该警告，否则它将破坏构建。不确定这是否是您想要的。

所以，如果你使用 ObsoleteAttribute 属性，编译器肯定会警告过时的类。但是，在我看来，警告并没有多大用处，除非它们无法构建。

抢

# c - 微控制器的 sprintf 和 printf 有什么区别

> ID：12637008
> 
> 赞同：2
> 
> 时间：2012-09-28T09:12:11.750
> 
> 标签：c, embedded, microcontroller, rtos

我知道 printf 和 sprintf 之间的基本功能差异。但是，我想知道它们之间的一些与时间/延迟相关的差异。显然，我想在我的任务中使用它来定制构建的 RTOS。你怎么看 ？我想知道更多它将如何影响系统的性能。（如果有的话）。通常，由于大量延迟，我不使用打印功能，但是我必须在这里强制使用它。

仅供参考，输出使用 RS232 显示在终端窗口上。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:49:56.990

这里的主要问题是`printf()`写入`stdout`可以（并且几乎肯定会）阻塞调用线程。在嵌入式系统中`stdout`，速度非常慢的 RS232 端口并不少见。

出于这个原因，您永远不会在实时线程中执行此操作，因为它会迅速变得非实时。

写入缓冲区`sprintf()`相当便宜（假设缓冲区已被分配）。它当然不会阻塞。

您可能会发现您的 RTOS 提供了一种异步日志记录机制，该机制可以从实时线程中调用而没有阻塞的风险。这只不过是一个环形缓冲区，您可以将终端输出写入其中，并使用较低优先级的线程将其打印到终端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:23:24.230

嗯......所有其他事情（未指定）都是平等的，我想`sprintf()`应该比 '快' `printf()`，因为前者只是写入内存缓冲区，而后者写入一些 I/O“设备”。大多数设备会产生比写入 RAM 更多的延迟，这就是为什么`printf()`可能会更慢。

尽管这些差异可能很小，但主要问题是大多数实现都进行动态内存分配，这可能非常昂贵。

我建议您减少您的需求，以便您可以在*不* 使用现成`sprintf()`实现的情况下实现它们，或者通过您必须查看它们是否/何时进行堆分配的实现代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T20:29:51.607

sprintf() 没有硬件依赖， printf() 受制于您对标准输出的底层低级支持。正如您所说，将数据推送到 UART 并忙于等待发送寄存器或 FIFO 可用的幼稚实现确实会产生“*巨大延迟*”——但这在实时系统中将是一种愚蠢的实现。

您通常会将数据推送到由中断例程提供服务的环形缓冲区、管道或字符队列。如果当您将数据推送到缓冲区时缓冲区为空，您将强制发送器通过缓冲除第一个字符之外的所有字符开始，然后将其直接写入 UART。然后，UART 中断将使发送器保持馈送，直到缓冲区为空。从您的应用程序级别来看，您只是将数据写入内存，因此延迟将是最小且确定性的。

stdin 可以类似地实现，ISR 写入和应用程序异步读取。

通过使用诸如管道或队列之类的 RTOS IPC 机制，或使用诸如信号量之类的同步原语，您可以在数据输出上实现阻塞、阻止和超时语义。

If your UART supports DMA, you can potentially further reduce the interrupt rate and CPU overhead.

# java - 如何从图像中提取元数据

> ID：12637011
> 
> 赞同：1
> 
> 时间：2012-09-28T09:12:22.733
> 
> 标签：java, android, eclipse, metadata

朋友帮我....

如何从包含 url 作为元数据的图像中提取元数据如果我单击图像，它必须通过访问图像的元数据来打开相应的链接

提前致谢 .....

# linux - CURL：bash脚本中的空文件

> ID：12637012
> 
> 赞同：0
> 
> 时间：2012-09-28T09:12:23.573
> 
> 标签：linux, bash, curl

如果我在 linux 命令行中手动运行此命令，它可以工作，并且 EDIT.3126026369 不为空

```
curl "http://somesite.com/admin.php?mod=editnews&action=editnews&id=14058" -s -L -b cookie.ck -c cookie.ck > EDIT.3126026369 
```

在 bash 中：

```
curl \"$EDIT\" -s -L -b $COOKIE -c $COOKIE > EDIT.$TEMP 
```

但在 bash 脚本中，它会生成一个空文件。这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:31:47.273

定义 $EDIT 变量时使用引号：

```
EDIT="http://somesite.com/admin.php?mod=editnews&action=editnews&id=14058" 
```

然后丢失 curl 命令上的转义引号：

```
curl $EDIT -s -L -b $COOKIE -c $COOKIE > EDIT.$TEMP 
```

这种方式对我来说似乎工作得很好，你呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:15:44.707

你的`$EDIT`变量中有什么，你需要这样引用它吗？如果是你的 URL，我只希望你写

```
curl $EDIT .... 
```

如果您使用一个`-x`选项运行 bash 脚本，它会显示它执行的每一行。这是一种非常有用的调试技术。

# android - Android：没有收到任何广播的意图

> ID：12637019
> 
> 赞同：1
> 
> 时间：2012-09-28T09:13:10.593
> 
> 标签：android, android-intent, widget, broadcastreceiver

我在更改对此自定义意图的所有引用时遇到问题。又名我更改了名称，它不再注册。然而，更令人担忧的是，我似乎无法获得任何广播意图！（除外`APPWIDGET_UPDATE`）。

```
<receiver android:name=".ExampleAppWidgetProvider" 
            android:label="@string/widget1name">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
         <!-- <action android:name="com.eightbitcloud.example.widget.8BITCLOCK_WIDGET_UPDATE" />  -->
        <action android:name="android.intent.action.MEDIA_REMOVED" />
        <action android:name="android.intent.action.MEDIA_UNMOUNTED" />
        <action android:name="android.intent.action.MEDIA_MOUNTED" />
        <action android:name="android.intent.action.SCREEN_ON" />

     </intent-filter>
    <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget1_info" />
</receiver> 
```

带代码：

```
@Override
public void onReceive(Context context, Intent intent) {
      Log.d(LOG_TAG, "Received intent " + intent.getAction()); 
```

唯一触发的是 Appwidget_update。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:42:19.597

某些广播事件仅在您在代码中注册接收器时才会触发。尝试将此添加到您的 onCreate 中：

```
registerReceiver(new BroadcastReceiver() {

        @Override
        public void onReceive(Context context, Intent intent) {
           Log.e("test","screen changed!!!");
        }
}, new IntentFilter(Intent.ACTION_SCREEN_ON)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T08:51:20.760

这与我的`onEnabled()`事件有关，创建了一个一次又一次发送给定意图的警报管理器。

通过更改我收到的内容，我显然过滤掉了旧的。

但是我没有看到的是，当我运行新代码时，Eclipse 正在替换我的小部件，但它再也不会重新触发 onEnabled。

所以旧意图仍在触发并被过滤，而不是我的新命名意图。

重新启动手机，和/或删除小部件并更换它们应该可以解决问题（所以`OnEnabled()`再次被解雇）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:19:37.920

您忘记了意图过滤器中的默认类别：

```
<category android:name="android.intent.category.DEFAULT" /> 
```

# eclipse - 没有码头：在参数中运行变量以在 Eclipse 中使用 Maven Jetty 插件进行调试

> ID：12637022
> 
> 赞同：0
> 
> 时间：2012-09-28T09:13:25.083
> 
> 标签：eclipse, debugging, maven, jetty

我正在按照[这个](http://docs.codehaus.org/display/JETTY/Debugging+with+the+Maven+Jetty+Plugin+inside+Eclipse)使用 Maven Jetty 调试我的 webapp，

我已经能够`mvn jetty:run`并且它成功地在 Maven Jetty 上运行了我的应用程序。

但是当我尝试将 Eclipse 配置为使用 Jetty 进行调试时，“Arguments”上没有 jetty:run 变量。

为什么会这样？

我将 maven 的位置设置为我的 apache-maven-3.0.4 目录。mave应该是指向eclipse插件的吧？我什至不知道它在哪里...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:42:40.643

很明显，这是可耻的。

不知道它是否应该在 Arguments 上以及为什么不是，但我只是按原样输入它并且它有效。

# ruby-on-rails - Rails I18n 以可维护的方式翻译多行文本块？

> ID：12637028
> 
> 赞同：1
> 
> 时间：2012-09-28T09:13:47.503
> 
> 标签：ruby-on-rails, string, ruby-on-rails-3, internationalization

我的 Rails 应用程序中有许多复杂的结构化 html + 文本，但不知道如何以可维护的方式翻译这些内容。解决此问题的最佳方法是什么。

考虑这个haml html块：

```
%h3.grey
  You can set your profile so that:

%h4
  %ol
    %li
      Some line blabla
    %li
      Other users cannot find you
    %li
      Your profile appears as if it's deleted
.clear
Or
.clear
%br 
```

*   我不想使用语言部分，它会弄乱并且在部分更改时很糟糕
*   而不是使用 1 字符串翻译来翻译上面的块

**什么是翻译上述内容的简单、可维护的方式？**欢迎任何想法建议，很想听听其他人是如何解决这个问题的，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:25:13.460

您可以使用包含 html 标记的整个块的翻译 - 在这种情况下，您必须将“_html”后缀添加到翻译变量。不确定它是否适用于haml。但对我来说，最好的方法是对每个字符串使用翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T08:35:13.497

您应该能够执行以下操作

```
=t(:p3_html).each_line do |line|
  %li= |line| 
```

这应该给你这个：

```
%li Line1
%li Line2
%li Line3 
```

# javascript - jqgrid动态改变添加表单的z-index

> ID：12637031
> 
> 赞同：0
> 
> 时间：2012-09-28T09:13:59.637
> 
> 标签：javascript, jquery, jqgrid, z-index

我有一些带有复杂警报对话框系统的 jqgrid 的工作区。我有一个关于 addForm z-index 的问题，我不能像其他对话框那样动态地改变它。我有一个变量

```
increaseZIndex = 2000; 
```

我在每个对话框创建时都会增加：

```
increaseZIndex++; 
```

但仅在 addForm zIndex 属性中，此值不会更改。我想网格的添加表单对话框创建一次，然后它只是隐藏起来，而不是在每次新插入时创建为新的。这是代码：

```
jQuery("#mygrid").jqGrid('navGrid','#pmygrid', {edit:false,add:true,del:false,search:false,refresh:false}, //options
                        {zIndex:1500,recreateForm:true}, // edit options
                        {zIndex:(increaseZIndex++),height:280,recreateForm:true, reloadAfterSubmit:true,url:"/myUrl.do", 
```

等等...我怎样才能强制这个值像其他值一样动态变化？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:07:49.160

首先，您应该包括`recreateForm: true`添加和编辑选项。在这种情况下，添加和编辑对话框将是新创建的，而不是隐藏/显示。

在我所有的项目中，我`recreateForm: true`通过设置的属性将其更改为默认设置`$.jgrid.edit`（请参阅[答案](https://stackoverflow.com/a/5032879/315935)或相应代码示例的[另一个）。](https://stackoverflow.com/a/10258377/315935)

# protobuf-net - protobuf-net build v2.0.0.580 无法序列化 System.Xml.Linq.XElement

> ID：12637035
> 
> 赞同：1
> 
> 时间：2012-09-28T09:14:25.697
> 
> 标签：protobuf-net

我刚刚用最新版本（版本 2.0.0.580）替换了我在代码库（版本 2.0.0.480）中使用的以前的 protobuf-net 版本 - 因为没有针对 .Net 4.0 或 .Net 4.5 的特定版本最新的 protobuf 版本，我在我的项目中引用了 net30 full dll。

当尝试序列化包含 System.Xml.Linq.XElement 的复杂类型时，我从 protobuf 序列化程序中得到一个 InvalidOperationException - 异常消息指出：“没有为类型定义序列化程序：System.Xml.Linq.XElement”

我假设 XElement 缺少序列化程序与没有 .Net 4.0 构建的事实有关（因为我在我的项目中引用了 System.Xml.Linq.dll 的 v4.0.30319）。

我的项目针对 .NET 4.5 平台 - 在引用 protobuf-net V2.0.0.480 net40 构建时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:32:03.730

这*看起来*与“可解析类型”有关 - 没有内置处理的东西，但符合某些模式，允许它们被视为`string`. 这在过去引起了一些问题，因此可以通过以下方式*选择*支持`.AllowParseableTypes`：

```
static void Main()
{
    XElement el = XElement.Parse("<xml />");
    var model = TypeModel.Create(); // store and re-use this; don't use
    model.AllowParseableTypes = true; // a new one each time! (very bad)

    var foo = new Foo { Bar = el };
    var clone = (Foo) model.DeepClone(foo);
    var cloneEl = clone.Bar;
}
[ProtoContract]
class Foo
{
    [ProtoMember(1)]
    public XElement Bar { get; set; }
} 
```

请注意，我必须在`Foo`这里声明 a 的原因是它看起来像“根对象”处理（这与处理成员/子对象完全不同）没有检查可解析类型；我将不得不调查为什么不并修复它。我*希望*以下内容会起作用（目前没有，但可能应该）：

```
static void Main()
{
    XElement el = XElement.Parse("<xml />");
    var model = TypeModel.Create(); // store and re-use this; don't use
    model.AllowParseableTypes = true; // a new one each time! (very bad)

    var cloneEl = (XElement)model.DeepClone(el);
} 
```

# iphone - 未找到 Restkit.h 文件

> ID：12637036
> 
> 赞同：0
> 
> 时间：2012-09-28T09:14:32.667
> 
> 标签：iphone, objective-c, ios, xcode, restkit

升级到 Xcode 4.5 后，我在下图中显示以下错误

![在此处输入图像描述](../Images/41fa1cac518ba2d78cbb8adc4dce0e56.png)

错误可能是什么？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T08:29:44.593

添加标题搜索路径

```
$(BUILT_PRODUCTS_DIR)/../../Headers 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:37:11.427

在你的应用程序中包含 RestKit

```
1\. add libRestKit.a in your targets>build phases> linked binary with library (Ensure the Framework and all it's headers are imported into your project properly.)
2\. project > build setting > Other Linker Flags should be -ObjC -all_load 
```

如果你想在[这里](https://github.com/RestKit/RestKit)包含 RestKit 类是 RestKit 上的 gitHub repo

即使在添加 RestKit 框架和/或类之后，如果您遇到相同的错误，那么

在您的**构建设置**中将 YES 设置为`Always search user paths`，并确保您`Header Search Path`指向框架。

最后，`Build->Clean and Restart Xcode`.

# css - 防止绝对右定位的 DIV 在窗口调整大小时重叠内容

> ID：12637037
> 
> 赞同：1
> 
> 时间：2012-09-28T09:14:32.883
> 
> 标签：css, html, positioning

我希望你能在这方面帮助我。我在谷歌等网站上搜索了 1 个小时，但没有任何效果。我在浏览器的顶部右侧有一个绝对 DIV。

我如何防止，当浏览器水平调整大小时，它比例如更多地位于中心。距离页面水平中心 400 像素？

不能太难，但我已经不知道了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T19:24:33.603

2个可能的解决方案：

1.  尝试使用`float: right;`而不是绝对定位 div。
2.  随着浏览器大小的变化，使用媒体查询来调整 'right' 的值，例如：

> ```
> .rightDiv {
>     right: 5px;
> }
> @media (min-width: 720px) { 
>     .rightDiv {
>         right: 50px;
> }
> @media (min-width: 960px) { 
>     .rightDiv {
>         right: 100px;
>     }
> } 
> ```

# google-apps-script - 是否可以使用 Google Apps 脚本公开（并获取 iframe 代码）Google 电子表格？

> ID：12637038
> 
> 赞同：0
> 
> 时间：2012-09-28T09:14:32.713
> 
> 标签：google-apps-script, google-sheets

我正在 Google Apps Scripts 中搜索一种公开一张 Google 电子表格的方法。

我需要将代码插入 Google 站点。我找到了修改 html 代码的方法（在站点服务 - Google Apps 脚本下），但我需要找到公开电子表格的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:45:53.277

现在无法在 GAS Web 应用程序中插入电子表格视图作为 UI 控件。有以下解决方法

1.  [使用标准选项卡](https://developers.google.com/apps-script/class_decoratedtabpanel)和网格控件（[弹性表](https://developers.google.com/apps-script/class_flextable)或[图表表](https://developers.google.com/apps-script/class_tablechartbuilder)）模拟视图；
2.  使用 HTM 的标准方法模拟视图；
3.  将[电子表格小部件](http://support.google.com/sites/bin/answer.py?hl=en&answer=90569&ctx=cb&src=cb&cbid=l2uoml0dceht)插入网站页面。

# iphone - 脸书开发者

> ID：12637040
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:14:42.197
> 
> 标签：iphone, ios, facebook

facebook开发者界面会不会少加入人员或不加入人员的区别？

不同性质的员工加入了哪些功能？

请给我一些建议，谢谢...

![在此处输入图像描述](../Images/56c01216c22b8d6ac6a80bff9cb4f983.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:53:47.240

我认为您想阅读有关安全角色的文档。

[https://developers.facebook.com/docs/ApplicationSecurity/](https://developers.facebook.com/docs/ApplicationSecurity/)

# android - 在 Eclipse 中管理每个项目的单独调试密钥库？

> ID：12637045
> 
> 赞同：2
> 
> 时间：2012-09-28T09:14:54.663
> 
> 标签：android, eclipse, google-drive-api, android-keystore

我开始开发几个连接到 Google Drive 并使用 Google Drive SDK 的新 Android 应用程序。所有应用程序都在 API-Console 中注册到标准和全局调试密钥库。此外，所有应用程序都在 API 控制台中使用其各自的发布密钥库进行注册。为所有应用启用服务“Drive API”。

我可以针对 Google Drive 安装和运行所有发布版本。

如果我使用应用程序的调试版本，则只有第一个应用程序通过 - 所有其他应用程序都会收到 401（无有效凭据错误）。

所以我的问题是：是否有可能为多个 Android 应用程序连接到 Google Drive 的全局调试密钥库是不可能的？

如果是，我如何在 Eclipse 中管理项目库中的单个调试密钥库？

提前谢谢了。

# iphone - 编辑 TableView 并更新 plist

> ID：12637049
> 
> 赞同：0
> 
> 时间：2012-09-28T09:15:10.840
> 
> 标签：iphone, ios, uitableview, plist, objective-c-blocks

我有一个表视图，其中包含从 plist 加载的类别名称列表。我想动态删除、添加和重新排序列表并将其保存到 plist。我使用了下面的代码，它在模拟器上运行良好，但在设备上崩溃。

```
In ViewDid Load:
 self.categoryFile = [[NSBundle mainBundle]pathForResource:@"Categories" ofType:@"plist"];
 self.categoryList = [[NSMutableArray alloc]initWithContentsOfFile:self.categoryFile];

- (void)tableView:(UITableView *)tableView commitEditingStyle(UITableViewCellEditingStyle)editingStyle
forRowAtIndexPath:(NSIndexPath *)indexPath{
if (editingStyle == UITableViewCellEditingStyleDelete){
    [[self categoryList] removeObjectAtIndex:[indexPath row]];
    NSArray *indexPathsToRemove = [NSArray arrayWithObject:indexPath];
    [tableView deleteRowsAtIndexPaths:indexPathsToRemove withRowAnimation:UITableViewRowAnimationRight];
    [tableView reloadData];
    NSArray *newArr = [[NSArray alloc]initWithArray:self.categoryList];
    [newArr writeToFile:self.categoryFile atomically:YES];
    [newArr release];
} 
```

}

```
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath{

NSString *contentsToMove = [[[self categoryList] objectAtIndex:[fromIndexPath row]] retain];
[[self categoryList] removeObjectAtIndex:[fromIndexPath row]];
[[self categoryList] insertObject:contentsToMove atIndex:[toIndexPath row]];
NSArray *newArr = [[NSArray alloc]initWithArray:self.categoryList];
[newArr writeToFile:self.categoryFile atomically:YES];
[newArr release];
[contentsToMove release];
} 
```

错误出现在 writeToFile: atomically。如果我删除该行，它也在设备上工作但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:18:26.160

您无法写入设备上的捆绑资源。当您第一次需要它时，将 plist 复制到应用程序的文档目录中，然后读取/更新它。

改编自[这个问题的答案的代码：](https://stackoverflow.com/questions/6545180/ios-copy-a-file-in-documents-folder)

```
- (NSString *)pathToPlist
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"Categories.plist"];
    BOOL copyProblem;
    if ([fileManager fileExistsAtPath:plistPath] == NO) {
        NSString *resourcePath = [[NSBundle mainBundle] pathForResource:@"Categories" ofType:@"plist"];
        copyProblem = [fileManager copyItemAtPath:resourcePath toPath:plistPath error:&error];
    }

    if (copyProblem)
        return nil;

    return plistPath
} 
```

将此分配给 self.categoryFile 而不是调用 NSBundle。代码未编译或测试，因此应视为详细的伪代码，请准备更正小的错别字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:18:36.670

如果您想稍后编辑和保存文件，您必须先复制 NSDocumentsDirectory 中的文件（如果它不存在）。请参阅此[链接以供参考](http://ioscoderef.blogspot.com/2012/09/how-to-loadsaverename-file-fromto.html)

用于加载您的 plist

```
BOOL success;
NSError *error;
NSString *filePath= [[NSBundle mainBundle] pathForResource:@"your_file" ofType:@"plist"];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString * path =[[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:@"your_file.plist"]];

success = [fileManager fileExistsAtPath:path];
if (success) {
    self.selectedObjectsDict=[[NSMutableDictionary alloc] initWithContentsOfFile:path];       

}
else
{    

    success = [fileManager copyItemAtPath:filePath  toPath:path error:&error];
    self.selectedObjectsDict=[[NSMutableDictionary alloc]initWithContentsOfFile:filePath];

} 
```

用于保存 plist

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString * path =[[NSString alloc] initWithString:[documentsDirectory stringByAppendingPathComponent:@"your_file.plist"]];
[your_dict writeToFile:path atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:19:41.997

您要做的是从 [NSBundle mainBundle] 中删除一个文件，这永远不会发生，因为这些文件是只读的..

如果您想删除和创建文件，请在 DocumentsDirectory 中尝试

试试这个[链接](https://stackoverflow.com/questions/11450054/deleting-in-nsdocumentdirectory)以供参考

# php - 如何运行longlife后台进程，linux服务器

> ID：12637050
> 
> 赞同：0
> 
> 时间：2012-09-28T09:15:13.743
> 
> 标签：php, linux, process, background, amazon

我正在运行一个需要处理一些“繁重工作”任务（从 30 秒到 3 分钟）的 webapp (php)。我知道它不是很重，但是我不能让我的用户等待他们，所以我设置了一个内部 API，例如：`http://localhost/process-picture/745884/`并将此操作存储在 MySQL 表中。

现在我想创建一个“进程”来获取那个 MySQL 表并执行最旧的排队操作，一旦完成，它就会得到下一个，依此类推。

首先，我想制作一个通过 cURL 调用系统的 PHP 脚本，如下所示：

`fetchOperation.php`连接到 DB 并获取操作的 URL 以通过 cURL 调用它。每个操作：执行自己，然后从队列中删除自己并`fetchOperation.php`再次调用 (cURL)。

我觉得这个系统有点棘手，所以我想知道是否有（以及用哪种语言编写）任何方式来设置每 15 秒检查一次数据库的后台进程，并执行以下操作：

*   删除所有标记为 的行`DONE`。
*   检查是否有任何标记为 的行`PROCESSING`，如果是，则退出并等待接下来的 15 秒。
*   如果没有`PROCESSING`行，则触发最旧的行`PENDING`（FIFO 队列）。

这样我可以随时管理正在处理的内容，甚至控制服务器负载（例如，晚上最多允许拥有三个`PROCESSING`项目）。

抱歉这么长的解释，提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:19:33.563

听起来您需要使用[cron](http://en.wikipedia.org/wiki/Cron)安排作业。cron 只会运行一个脚本/程序，因此它的实现将与调度本身不同。

Cron 只会触发/忘记，因此您可以从中调用任何持续时间的进程（我正在查看您在下面的执行时间评论 - 如果我误解了请修改）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:45:18.173

最后我这样解决了：

第一个。以可通过 URL 调用的方式设计操作。例如：`http://localhost/render-image/14523665`

第二。将挂起的操作存储在如下表中：操作（操作 ID、操作 URL、操作状态）。

准备就绪后，我设计了一个简短的 PHP 脚本，它执行以下操作：

```
<?php
if( WORKER_IS_ONLINE !== true ) exit();
OperationsQueue::CleanQueue();
while( OperationsQueue::RunningOperations() < WORKER_MAX_OPERATIONS ) {
    launch_operation( OperationsQueue::DequeOperation() );
}
sleep( WORKER_SLEEP_TIME );
launch_operation( '/operations_queue/deque' ); 
```

这个辅助函数（`launch_operation`和`OperationsQueue`类）执行如下（注意它尚未实现）：

```
<?php 
define('WORKER_SLEEP_TIME', 15);     // Time to sleep between sweeps.
define('WORKER_HOST', 'localhost');  // Hostname where the operations will be performed.
define('WORKER_PORT', 80);       // Port where the operations will be performed.
define('WORKER_SOCKET_TIMEOUT', 80); // Port where the operations will be performed.
define('WORKER_MAX_OPERATIONS', 2);  // Max simultaneous operations.
define('WORKER_MAX_LAUNCHES', 2);    // Max operations launched within a sweep.
define('WORKER_IS_ONLINE', false);   // Bool value that marks whether the worker must be working or not.

function launch_operation($operation) {
    $fp = fsockopen(WORKER_HOST, WORKER_PORT, $errno, $errstr, WORKER_SOCKET_TIMEOUT);
    if ($fp) {
        $out  = 'GET ' . $operation . " HTTP/1.1\r\n";
        $out .= 'Host: ' . WORKER_HOST . "\r\n\r\n";
        fwrite($fp, $out);
        fclose($fp);
    }
}

class OperationsQueue {

    public static function RunningOperations(){
        // connect to DB an perform: SELECT COUNT(*) FROM operations WHERE status = 'PROCESSING';
        return 1;
    }
    public static function CleanQueue(){
        // connect to DB an perform: DELETE FROM operations WHERE status IN ('DONE', 'CANCELED');
    }
    public static function DequeOperation(){
        // connect to DB an perform: SELECT * FROM operations WHERE status = 'PENDING' ORDER BY id ASC LIMIT 0, 1;
        // UPDATE operations SET status = 'PROCESSING', tries = tries+1 WHERE id = $id;
        return 'operation_url';
    }

} 
```

**我认为它可能对其他人有用**。如您所见，它链接了操作。

# testflight - Rubymotion 从编译设置中删除 armv7

> ID：12637051
> 
> 赞同：1
> 
> 时间：2012-09-28T09:15:26.860
> 
> 标签：testflight, rubymotion

在一个项目中，我正在使用 testflight。在模拟器中使用该项目时，它工作正常。但是当我将项目部署到 iPhone 时，我得到了错误：

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice:  
Path/TestFlightSDK/libTestFlight.a for architecture armv7s 
```

在这个线程（http://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st）我可以找到使用 Xcode 时的解决方案。基本上消除了对 armv7 的兼容性，因为没有为它编译 Testflight。

如何将此设置添加到 Rubymotion？我需要在 rakefile 中添加一些东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:56:36.263

我遇到过同样的问题。从 TestFlight（1.1 版）下载新的 SDK，将对此版本的 libTestFlight.a 和 TestFlight.h 的引用添加到您的项目中，或者将这两个文件复制到您的项目中。然后将 libTestFlight.a 添加到链接的框架和库中。执行干净的构建。之后它对我有用！

# visual-studio - VS2012下的Windows Forms项目无法在Win XP上安装

> ID：12637052
> 
> 赞同：2
> 
> 时间：2012-09-28T09:15:32.463
> 
> 标签：visual-studio, visual-studio-2012

> **可能重复：**
> [如何使用 Visual Studio 2012 在 XP 上定位 .NET 4.0.3？应用程序无法运行“不是有效的 Win32 应用程序”](https://stackoverflow.com/questions/12319952/how-do-i-target-net-4-0-3-on-xp-using-visual-studio-2012-application-fails-to)

我使用 Visual Studio 2012 开发我的 windows 窗体项目。我能够生成 ClickOnce 安装文件以安装在 Win 7/8 操作系统上，但我无法在 Win XP 上安装它。

错误消息是**setup.exe 不是有效的 win32 应用程序**。

我知道这个操作系统（官方）不再受 VS2012 支持。我知道这将在 2012 年进行修复以纠正它。但也许有一个解决方案可以让我在 Win XP 上安装我的 Windows 窗体项目？

谢谢。

PS：我读过这篇[VS2012 ClickOnce Applications not working on Windows XP](https://stackoverflow.com/questions/12508697/vs2012-clickonce-applications-not-working-on-windows-xp)，但没有提出解决方案（除了使用 VS2010）。

我还阅读了此[http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/dd3eec8c-93b0-4243-9419-233f20b257d4](http://social.msdn.microsoft.com/Forums/en/vcgeneral/thread/dd3eec8c-93b0-4243-9419-233f20b257d4)但我无法按照建议更改平台工具集（在哪里做？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:41:40.000

我们遇到了同样的问题，但找到了一个简单的解决方法：不要运行 setup.exe，而是在同一位置运行“xxxxxx.application”文件。这将以完全相同的方式执行和安装，并且不会抱怨不是 32 位应用程序。

# objective-c - 当我在 CGContext 上绘制时 CGImage 旋转

> ID：12637053
> 
> 赞同：0
> 
> 时间：2012-09-28T09:15:43.217
> 
> 标签：objective-c, ios, cgcontext, cgimage

我有下一个代码，每次用户触摸屏幕并修改 UIBezierPath 时都会调用它

```
 CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextDrawImage(context, self.bounds, image);

  [lineColor setStroke];
  [currentPath stroke];
  if(panEnded)
  {
    if(image!=nil)
    {
      CFRelease(image);
    }
    image=nil;
    image=CGBitmapContextCreateImage(context);
    panEnded=false;
  } 
```

所以每次我创建新图像（来自“if”分支）时，它都会旋转 180 度。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:10:07.700

I solved the problem by rotating image in separate context each time it is taken:

```
- (void)drawRect:(CGRect)rect
{
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image),CGImageGetHeight(image)), image);
  [lineColor setStroke];
  [currentPath stroke];
  if(panEnded)
  {
    if(image!=nil)
    {
      CFRelease(image);
    }
    image=nil;
    image=CGBitmapContextCreateImage(context);
    [self rotateCGImage];
    panEnded=false;
    currentPath=nil;
  }
}

-(void)rotateCGImage
{
  UIGraphicsBeginImageContext(CGSizeMake(CGImageGetWidth(image), CGImageGetHeight(image)));
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextDrawImage(context, CGRectMake(0 , 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);

  CGContextRotateCTM (context, radians(90));
  if(image!=nil)
  {
    CFRelease(image);
  }
  image=nil;
  image=CGBitmapContextCreateImage(context);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:35:50.490

它的坐标和方向的差异，绘制图像的最佳方法是使用 UIImage 上的方法来处理所有这些东西

```
UIImage *imageUI=[UIImage imageWithCGImage:image];   
[imageUI drawInRect:rect]; 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-21T12:19:41.060

这是我的解释，当您尝试将 CGImage 绘制到上下文中时，上下文假定 CGImage 位于像素坐标中并对其进行旋转，以便生成的图像位于世界坐标中。例如，如果您在 draw 之前尝试将图像旋转 -90，然后进行 draw ，它将正常工作，因为在世界坐标中，原点位于左下角，而在像素坐标中，原点位于左上角。

# delphi - 在我的 delphi 7 应用程序中，一部分代码冻结或禁用了表单上的其余部分

> ID：12637058
> 
> 赞同：0
> 
> 时间：2012-09-28T09:16:07.117
> 
> 标签：delphi, loops, delphi-7

我的应用程序应该生成一个随机和计算答案，然后将其放在面板上的编辑框中，然后面板应该向下移动并重复（我已经完成了所有这些）。好的，问题是当面板向下移动时，没有其他工作，就好像一切都被禁用了。

```
unit Unit5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, jpeg, ExtCtrls, StdCtrls, math, Buttons;

type
  TForm1 = class(TForm)
    Image1: TImage;
    Panel1: TPanel;
    Edit1: TEdit;
    Panel6: TPanel;
    Shape1: TShape;
    Panel7: TPanel;
    Label1: TLabel;
    Edit6: TEdit;
    Label2: TLabel;
    Button1: TButton;
    Image5: TImage;
    Edit7: TEdit;
    Image2: TImage;
    Label3: TLabel;
    Timer1: TTimer;
    procedure FormActivate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Image2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation
 var hori : integer;
     vert : integer;
     back : integer;
     value1 : integer;
     value2 : integer;
     answer : integer;
     star: integer;
     stranswer: string;
     k : integer;
{$R *.dfm}

procedure TForm1.FormActivate(Sender: TObject);
begin
 panel1.hide;
 panel7.Hide;
 back:=0;
 star:=0;
 end;

procedure TForm1.Button1Click(Sender: TObject);
begin
 stranswer:= inttostr(answer);
 if edit6.Text=stranswer then
 begin
  star:=star+1;
  edit7.text:=inttostr(star);

 end;
 button1.Caption:='Next';
 panel7.Show;
 edit6.SetFocus;
 panel1.show;
 randomize;
 hori:=random(840);
 value1:=random(10);
 value2:=random(10);
 panel1.Top:=0;
 panel1.Left:=hori;
 update;
 answer:=value1+value2;
 edit1.text:=('                '+inttostr(value1)+' + '+inttostr(value2));
 for k:= 1 to 512 do
  begin
   vert:= vert+1;
   panel1.Top:= vert;
   update;
   sleep(50)
  end;
end;

procedure TForm1.Image2Click(Sender: TObject);
begin
  back:=1;
  form5.Close;
  button1.show;
end;

end. 
```

如果你愿意，我可以给你发一张表格的照片。如果可以请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:50:39.440

您以 512 个单像素步长向下移动面板，每步之间有 50 毫秒的睡眠时间。由于您在那段时间没有处理任何消息，因此您的应用程序将在 25 秒内无响应为面板设置动画。程序挂起，因为您未能为消息队列提供服务。

解决方案是使用计时器而不是循环。在`Button1Click`你需要启动计时器滴答作响。

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  .....
  StartPanelAnimation;
end;

procedure TForm1.StartPanelAnimation;
begin
  Panel1.Top := 0;
  Timer1.Interval := 50;
  Timer1.Enabled := True;
end; 
```

定时器过程是这样的：

```
procedure TForm1.PanelAnimationTimerTimer(Sender: TObject);
begin
  DoPanelAnimationStep;
  if PanelAnimationComplete then
    PanelAnimationTimer.Enabled := False;
end; 
```

这些函数看起来像这样：

```
procedure TForm1.DoPanelAnimationStep;
begin
  Panel1.Top := Panel1.Top+1;
end;

function TForm1.PanelAnimationComplete: Boolean;
begin
  Result := Panel1.Top=512;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T06:17:16.550

如果您希望您的应用程序在执行工作时执行其他操作，则上述示例很好。但是，如果您只是希望表单未锁定，则可以使用

```
for i := 1 to 100 do   // trying to simulate Sleep(n) in a much more primitive way. 
  Application.ProcessMessages ; 
```

代替

```
Update ;
Sleep(50) ; 
```

# objective-c - UIViewController 编程启动/替换

> ID：12637059
> 
> 赞同：0
> 
> 时间：2012-09-28T09:16:11.153
> 
> 标签：objective-c, ios, view, uiviewcontroller

我有一些委托代码，我想用另一个替换当前的视图控制器。两个视图控制器都是通过 Interface Builder 初始化并在那里声明的。

如何替换当前视图，或者更好地使用 interfaceBuilder 初始化的视图控制器切换到另一个视图控制器？

我需要在 interfaceBuilding 中建立哪些连接？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:22:56.227

如果您正在使用情节提要，您可能希望从以下内容开始：

```
UIViewController *newViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"MyVC"]; 
```

# javascript - 非法调用 document.querySelector

> ID：12637061
> 
> 赞同：25
> 
> 时间：2012-09-28T09:16:13.607
> 
> 标签：javascript, dom

> **可能重复：**
> [JavaScript 函数别名似乎不起作用](https://stackoverflow.com/questions/1007340/javascript-function-aliasing-doesnt-seem-to-work)

相关jsfiddle：http: [//jsfiddle.net/cWCZs/1/](http://jsfiddle.net/cWCZs/1/)

以下代码完美运行：

```
var qs = function( s ) {
    return document.querySelector( s );
};
qs( 'some selector' ); 
```

但以下没有：

```
var qs = document.querySelector;
qs( 'some selector' ); // Uncaught TypeError: Illegal invocation 
```

我不明白为什么。

我的困惑来自于这样一个事实：

```
function t() {
    console.log( 'hi' );
}
var s = t;
s(); // "hi" 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-28T09:22:32.197

问题在于`this`价值。

```
//in the following simile, obj is the document, and test is querySelector
var obj = {
    test : function () {
        console.log( this );
    }
};

obj.test(); //logs obj

var t = obj.test;
t(); //logs the global object 
```

`querySelector`不是通用方法，它不会接受另一个`this`值。所以，如果你想要一个快捷方式，你必须确保你`querySelector`的绑定到文档：

```
var qs = document.querySelector.bind( document ); 
```

# java - 将正则表达式添加到列表中进行排序

> ID：12637070
> 
> 赞同：2
> 
> 时间：2012-09-28T09:16:39.203
> 
> 标签：java, regex, arrays, list

我在这里要做的是对正则表达式的发现进行排序（例如，如果它们是数字）。我不知道该怎么做，有什么想法吗？

```
NodeList abcList = firstElement.getElementsByTagName("target");
Element abcElement =(Element)abcList.item(0);
NodeList textAbcList = abcElement.getChildNodes();
String abc = (textAbcList.item(0).getNodeValue().trim());
Pattern pattern = Pattern.compile("Some Regex");
Matcher matcher = pattern.matcher(abc);
while (matcher.find()){
out.write(" abc: " + matcher.group());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:35:18.770

**发现**

要对结果进行排序，您需要先找到所有结果。如果您事先不知道所有结果，则可以生成任何部分排序列表。所以你会有类似的东西：

```
List<Integer> results = new ArrayList<Integer>();
while (there are more results) { // here you ask the regex if it found some more item
   // add integer to results
   String found = ... // here you grab the string you've just found
   results.add(Integer.parseInt(found)); // convert the string to integer and add to list
} 
```

请注意，我将找到的字符串直接转换为 Integer，因为它作为 Integer 具有更多意义。如果出于任何原因你想要一个字符串，好的，有一个`List<String>`并且不要转换。

**排序**

在你有一个未排序的列表后，你需要对其进行排序。有几种方法，Java 实现了一种非常简单的方法。它可以进行任何类型的排序，因为它不进行两个项目之间的比较。这是唯一需要实现以定义如何排序的部分。你会做：

```
Collections.sort(results, comparator); 
```

此方法将实现合并排序（如果我没记错的话）并在每次需要比较两个元素时询问您提供的比较器。这个比较器应该实现接口`Comparator<T>`where`T`是结果中元素的类型。

如果它们是整数，则不需要比较器，因为它已经具有“自然”顺序：

```
Collections.sort(results); 
```

但是如果你想要一些特殊的排序（比如根据它的整数表示的值排序字符串），那么你可以使用你自己的比较器：

```
Collections.sort(results, new Comparator<String>() {
   public int compare(String a, String b) {
      int valueA = Integer.parseInt(a);
      int valueB = Integer.parseInt(b);
      return valueA - valueB;
   }
}); 
```

比较必须返回：

*   如果 a < b 则为负
*   0 如果 a == b
*   如果 a > b 则为正。

由于我们想像比较数字一样比较字符串，这就是我所做的：将它们转换为数字并比较它们的数值。

**对字符串进行排序：xxx-nnnn-nnnn**

在您的情况下，您正在收集具有该格式（abc-1234-5678）的字符串，您需要根据第一个数字对它们进行排序。所以让我们假设你已经收集了你的字符串：

```
List<String> results 
```

然后，您需要根据一些任意标准对这些字符串进行排序。像往常一样，您需要调用`Collections.sort`提供一个特殊的比较器。

该比较器需要比较的不是整个字符串，而是每个字符串的第一个数字。例如：`abc-1234-5678`和`def-3456-1988`。你必须与`1234`比较`3456`。

然后代码将如下所示：

```
Collections.sort(results, new Comparator<String>() {
  public int compare(String str1, String str2) {
     // obtain the number you'll use to compare
     int value1 = getImportantNumber(str1);
     int value2 = getImportantNumber(str2);
     // return comparator (remember, the sign of the results says if it's <, =, >)
     return value1 - value2;
  }

  // this method will extract the number, maybe you'll need a regex or substring, dunno
  private int getImportantNumber(String str) {
     // by example
     Matcher m = PATTERN.matcher(str);
     if (!m.find())
        return -1; // or throw an exception, depends on you're requirements
     String numberPart = m.group(...); // the number of the group catching the part you need
     return Integer.parseInt(numberPart);
  }

  private static Pattern PATTERN = Pattern.compile("...."); 
}); 
```

**哪个正则表达式**

我应该使用：

```
(\w+)-(\d+)(-(\d+))* 
```

这发现：

```
letters-numbers[-numbers[-numbers...]] 
```

但是，如果您不确定是否能找到第二名的数字，我应该选择：

```
String[] parts = str.split("-");
for (String part: parts)
   if (this part has only numbers)
      return Integer.parseInt(part);
// if there are no only number parts
throw new RuntimeException("Not valid number part found!"); 
```

# merge - 如何从 Perforce P4V 使用 TortoiseMerge？

> ID：12637072
> 
> 赞同：1
> 
> 时间：2012-09-28T09:16:44.857
> 
> 标签：merge, perforce, p4v, tortoisemerge

如何配置 Perforce 以使用工具 TortoiseMerge 进行差异和合并？

* * *

我试过争论

```
/base:%1 /mine:%2 
```

![在此处输入图像描述](../Images/0ec6996614717271dcb36620afb84e79.png)

遵循[http://tortoisesvn.net/docs/release/TortoiseMerge_en/tme-automation.html](http://tortoisesvn.net/docs/release/TortoiseMerge_en/tme-automation.html)和[http://www.perforce.com/perforce/doc.current/manuals/p4v/Configuring_display_preferences.html#Diff](http://www.perforce.com/perforce/doc.current/manuals/p4v/Configuring_display_preferences.html#Diff)。Perforce 文档说

> 在参数字段中指定第三方差异应用程序的参数：输入 %1 作为第一个文件的名称，输入 %2 作为第二个文件的名称。P4V 在调用 diff 应用程序时将这些占位符替换为实际的文件名。

然而，当我尝试它时，TortoiseMerge 错误“无法打开文件 %1”，表明 P4V 没有替换参数并保持`%1`原样

![在此处输入图像描述](../Images/92880534c414b08864b71c6b39407f6a.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T14:29:16.473

您可以通过创建一个 bat 文件来做到这一点。在 bat 文件中，您可以使用正确的参数调用合并程序。这是我的 bat 文件的内容：

```
TortoiseMerge.exe /base:%1 /theirs:%2 /mine:%3 /merged:%4 
```

p4 中的设置`%b %1 %2 %r`： ![P4 中的设置](../Images/99b391546c19845f6e2ac26559a74047.png)

如您所见，我将我的 bat 文件称为“p4Helper.bat”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:51:49.967

可悲的是，P4V 的论点替换被打破了。您可以使用 TortoiseMerge 进行差异化，但不能合并。

要设置 TortoiseMerge 进行比较，请使用参数字符串`%1 %2`

![在此处输入图像描述](../Images/df17f6df33f8daf74b483bef57822b45.png)

合并的正确论点是

```
/base:%b /theirs:%1 /mine:%2 /merged:%r 
```

但是它给出了这个错误

![在此处输入图像描述](../Images/86c01afd95d30843fdee71a201888368.png)

据推测，发生的事情是 P4V 无法`/base:%b`用适当的文件路径替换“%b”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-28T21:30:55.520

存在一个现有的增强请求，因为如果这些参数不是单独的，P4V 不会替换 %b、%1、%2 和 %r 的值。例如，P4V 不能替代：

```
 /base:%b /theirs:%1 /mine:%2 /merged:%r 
```

TortoiseMerge 需要这些。

但是，一位用户报告说，由于路径名中存在空格，该命令在他在路径名周围添加引号后起作用。例如：

开始 /WAIT "C:/Program Files/Beyond Compare 3/BComp.exe" %1 %2 %3 /mergeoutput=%4

因此，作为一种解决方法，您可以在调用 TortoiseMerge 的脚本中增加 %b %1 %2 %r 参数。在 TortoiseMerge 的例子中，你会有这样的一行：

```
 c:"\the_path_to_TortoiseMerge" /base:%1 /theirs:%2 /mine:%3 /merged:%4 
```

# php - 尝试使用 api 从 Fitbit 获取个人资料详细信息时出现错误。是什么原因？

> ID：12637073
> 
> 赞同：1
> 
> 时间：2012-09-28T09:16:47.280
> 
> 标签：php, oauth, http-headers, fitbit

错误是，

```
stdClass Object
(
    [errors] => Array
        (
            [0] => stdClass Object
                (
                    [errorType] => oauth
                    [fieldName] => n/a
                    [message] => No Authorization header provided in the request. Each call to Fitbit API should be OAuth signed
                )

        )

) 
```

我正在使用 Oauth 库。我已经获得了用户令牌。

```
http://api.fitbit.com/1/user/23Q/profile.json?oauth_consumer_key=425e1234b8823e26485aa6&oauth_nonce=31f991c9b3e068c14adceddd9b862c0a&oauth_signature=R5oi4dHA6ztIIpdKheahYOy%2FeMQ%3D&oauth_signature_method=HMAC-SHA1&oauth_timestamp=1348821623&oauth_token=3405b4918d5d96a7b78885a98&oauth_version=1.0 
```

我试过这个...

$url = [http://api.fitbit.com/1/user/23Q2SP/profile.json](http://api.fitbit.com/1/user/23Q2SP/profile.json)；

$标头=数组（）；
$header[] = "授权：OAuth 3405b496578885a98";

```
$header[] = "Accept: ";

$header[] = "Cache-Control: no-cache";
$header[] = "Connection: keep-alive";
$header[] = "Keep-Alive: 300";
$header[] = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
$header[] = "Accept-Language: en_US";
$header[] = "Pragma: no-cache";   
$this->http_info = array();
$ci = curl_init();
/* Curl settings */
curl_setopt($ci, CURLOPT_USERAGENT, $this->useragent);
curl_setopt($ci, CURLOPT_CONNECTTIMEOUT, $this->connecttimeout);
curl_setopt($ci, CURLOPT_TIMEOUT, $this->timeout);
curl_setopt($ci, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($ci, CURLOPT_HTTPHEADER, $header);
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ci, CURLOPT_HEADERFUNCTION, array($this, 'getHeader'));
curl_setopt($ci, CURLOPT_HEADER, FALSE);

curl_setopt($ci, CURLOPT_URL, $url);
$response = curl_exec($ci); 
```

但是相同的错误 {"errors":[{"errorType":"oauth","fieldName":"n/a","message":"请求中没有提供授权标头。对 Fitbit API 的每次调用都应该是 OAuth签”}]}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:57:44.570

我没有使用 Fitbit API，但我[在这里](https://groups.google.com/forum/?fromgroups=#!topic/fitbit-api/Fk7yOWqHhB8)读到的是，Fitbit 只允许通过授权标头进行 GET 请求，因此您可能必须设置标头类似

```
"Authorization: OAuth <ACCESS_TOKEN>" http://www.fitbit.com 
```

查看这篇关于如何通过 CURL 设置标题[的帖子](https://stackoverflow.com/questions/2607040/how-to-send-http-get-method-with-headers-using-curl)，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T22:36:15.073

试试这个：

```
req_url = 'http://api.fitbit.com/oauth/request_token';
$authurl = 'http://api.fitbit.com/oauth/access_token';
$acc_url = 'http://api.fitbit.com/oauth/authorize';

$conskey = 'Dev key';
$conssec = 'Dev secret';

$token = 'User token';
$secret = 'User secret';

try {

    $oauth = new OAuth($conskey,$conssec,OAUTH_SIG_METHOD_HMACSHA1,OAUTH_AUTH_TYPE_AUTHORIZATION);
    $oauth->enableDebug();

     $oauth->setToken($token,$secret);

      $oauth->fetch("http://api.fitbit.com/1/user/-/activities/date/2013-12-06.json");
    $response_info = $oauth->getLastResponseInfo();

  print_r($oauth->getLastResponse());

  } catch(OAuthException $E) {
  print_r($E);
} 
```

# java - 是否有在一棵树中处理不同类的做法？（Java 或通用）

> ID：12637077
> 
> 赞同：0
> 
> 时间：2012-09-28T09:17:07.990
> 
> 标签：java, algorithm, design-patterns, data-structures, tree

是否有使用包含不同类的树的最佳实践（或某种模式）？我是从 GUI 的角度说的。显示树后，如何提前知道正在选择什么对象？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:19:28.750

如果他们有一个共同的超类或接口，这不是问题。无论如何，您应该处理通用的超类或接口。当您发现自己检查类型和转换时，您应该开始重新考虑您的设计。您应该利用多态性。

# c# - 构建一个项目会重新启动整个网站

> ID：12637078
> 
> 赞同：0
> 
> 时间：2012-09-28T09:17:10.567
> 
> 标签：c#, asp.net, iis-7

背景：

*   对比 2010
*   C# 3.5
*   视窗 7 SP1

ASP.NET Web 应用由开发环境中的 IIS 7 提供支持。

当我构建单个项目而不是“网络”项目时，看起来网络应用程序已重新启动。由于新的 DLL 未部署到 web 项目的 bin，因此不考虑对 DLL 所做的更改。那么，为什么重新启动了wep应用程序（页面需要很长时间才能加载）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:21:37.063

如果您`Project`依赖于其他项目，它将再次重新启动。所以要解决这个问题，请从解决方案中删除项目依赖项并尝试重新构建。

但是现在您必须手动将 dll 放置到另一个项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:21:42.533

有些事情总是会导致回收应用程序池（由于编译时间导致第一页加载缓慢 - 实际上您可以解决）。其中一件事是更改 bin 目录（包括子文件夹）。也许，不知何故，当你建立你改变里面的任何文件？

回收应用程序的另一个常见原因是更改配置文件 (web.config)、machine.config 和 global.asax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:47:37.640

也可能是您的 Web.Config 中有一些东西正在调用更改。也许尝试从发布选择中排除您的 Web.Config 以使站点保持并发。

同样，其他事情也可能是其他站点之间的依赖关系。但以我个人的经验，它通常是一个 Web 配置文件，会导致应用程序池按需重新启动。

# iphone - 有没有办法在单击注释时显示操作表（mapkit ios）

> ID：12637079
> 
> 赞同：0
> 
> 时间：2012-09-28T09:17:24.800
> 
> 标签：iphone, mapkit, uiactionsheet

**我们可以在MapKit**中单击注释时显示**UIActionSheet**吗？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:39:39.783

我正在这样做并在单击注释时显示 popOver，因此在这种情况下，您可以创建一个视图，然后在视图内执行您想要的任何操作。

```
- (void)mapView:(MKMapView *)aMapView didSelectAnnotationView:(MKAnnotationView *)view 
{
if([view conformsToProtocol:@protocol(CustomAnnotationViewProtocol)]) 
{
    [((NSObject<CustomAnnotationViewProtocol>*)view)      didSelectAnnotationViewInMap:mapView];
}
} 
```**

# javascript - 在函数执行之前更新全局变量

> ID：12637080
> 
> 赞同：0
> 
> 时间：2012-09-28T09:17:31.060
> 
> 标签：javascript, global-variables

我有一个具有这种结构的代码

```
var no_data=false;

function checkdata(){
   //reset of the global var
   no_data=false
   //some code that return an array, called data
   if(data.length==0) no_data=true;

} 
```

然后我执行函数 checkdata() 并检查 var no_data 如果它是真的发出警报，但它更新较晚，在我第二次调用它时：S

我试图在函数中返回错误，比如没有数据等，但它不起作用：S

也许是全局范围与 livequery jquery 插件的兼容性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:21:48.443

如果要`no_data`在执行功能之前更新`checkdata`。然后在调用函数之前更新它`checkdata`。

```
no_data=false;
checkdata(); 
```

# php - 如何在javascript函数中编写php函数

> ID：12637083
> 
> 赞同：0
> 
> 时间：2012-09-28T09:17:47.310
> 
> 标签：php, javascript

我想在 javascript 函数中调用 php 函数**头（'Location:http://xx.yy.zz/somthing'） ，如下所示。**

```
<?php
<script>
function mUp(obj)
 {
 //here i want call the header function
 }
</scipt>
//some code
?> 
```

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:19:29.410

那不是它的工作原理。

利用：

```
window.location = "http://xx.yy.zz/somthing"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:23:13.433

您好，以下链接可能对您有所帮助

[http://forums.devarticles.com/javascript-development-22/calling-php-functions-with-javascript-3471.html](http://forums.devarticles.com/javascript-development-22/calling-php-functions-with-javascript-3471.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-31T09:52:37.573

尝试这个

```
header('Location:yourpage.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:21:35.613

为什么 PHP 函数用于重定向？如果你想简单地重定向

```
document.location.href='http://xx.yy.zz/somthing'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:22:52.023

无需放置php代码。.试试这个...

```
<script>
function mUp(obj)
{
 window.location="http://xx.yy.zz/somthing";
}
</scipt> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T09:19:38.657

您不能在 Javascript 中执行 PHP 标头函数。

Javascript 在浏览器中运行，而 PHP 在您的服务器上运行。

做类似的事情

`window.location.href = "http://xx.yy.zz/somthing";`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T09:20:20.110

这适用于 JavaScript，而不适用于 PHP：

```
<script>
function mUp(obj)
{
    document.location.href = 'http://www.example.com/';
}
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-28T09:21:03.513

我猜你想做一个重定向，最好通过javascript本身重定向，如果你想在里面编写PHP代码，只需在中间使用PHP标签并编写代码..或回显javascript代码并编写PHP代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-28T09:21:12.620

代码类似于PHP的`header()` `location`函数：

```
header('Location:http://xx.yy.zz/somthing'); 
```

在 javascript 中，

```
location.href = "http://xx.yy.zz/somthing"; 
```

两者都为用户执行相同的重定向，但前者返回的 HTTP 状态为 301。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-28T09:21:21.437

为什么不直接使用javascript版本？

看看[window.location](http://www.w3schools.com/jsref/obj_location.asp)对象。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-28T09:23:01.233

到目前为止，您可能已经注意到，如果您在已经将 html/any 文本发送到客户端浏览器之后放入 php 标头重定向，则会出现错误；这是因为 header() 函数告诉服务器取消当前页面的输出并重定向到服务器端的另一个页面。因此，要么您应该在将任何 html/js 打印到浏览器之前找到一种方法来执行该标头函数，或者您可以执行 javascript 重定向：

```
<script type="text/JavaScript">
   window.location.href="http://xx.yy.zz/somthing";
</script> 
```

如果这还不够清楚，请发表评论

# java - 一个 servlet 怎么能总是执行相同的任务呢？

> ID：12637084
> 
> 赞同：1
> 
> 时间：2012-09-28T09:17:55.037
> 
> 标签：java, servlets

我希望 Servlet 始终执行相同的任务。不管它是 GET 还是 POST。目前我只是调用`doGet()`from `doPost()`，它工作正常。

然后我尝试覆盖该`service()`方法，我认为它会以相同的方式工作。但事实并非如此！

代码以某种方式被执行，但响应不会生成网页：

```
response.getWriter();
response.println(string); 
```

此代码适用于 doGet/doPost 方法，但不适用于服务。为什么？

小服务程序：

```
class MyWebServlet extends HttpServlet {
    @Override
    public void service(ServletRequest request, ServletResponse response) {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        String string = "teststring";
        out.println(string);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:31:37.543

更改`public void service(ServletRequest request, ServletResponse response)`为`public void service(HttpServletRequest request,HttpServletResponse response)`，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:24:36.380

您覆盖了错误的方法。

**那么为什么你的编译器在你写了@Override注解之后就没有抱怨呢？**

实际上，您的 servlet 继承了两个服务方法，但没有相同的参数 => 方法重载。

*   `public void service(ServletRequest request, ServletResponse response)`由`GenericServlet`类实现，这意味着您的 servlet 的第一个父类。

*   `public void service(HttpServletRequest request, HttpServletResponse response`) 由`HttpServlet`类实现。
    这是您需要覆盖的。

您可以有效地覆盖第一个，但是您会丢失 http 进程，并且不会将任何内容写入您的浏览器。它解释了你的问题。

`GenericServlet`定义了一个通用的、独立于协议的 servlet，因此与 http 协议没有直接关系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T09:36:43.280

> 看下面的例子。当用户执行 GET 时，doGet 将被调用，如果他们执行 Post，它将调用 doPost，实习生调用 doGet。

```
 //Sample Code:
    @Override
   protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
      PrintWriter writer = resp.getWriter();
      writer.println("Hello World");
      writer.close();
   }

   @Override
   protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    doGet(req, resp);
   } 
```

# javascript - 从 JavaScript 访问本地共享库

> ID：12637094
> 
> 赞同：0
> 
> 时间：2012-09-28T09:18:52.707
> 
> 标签：javascript, shared-libraries

我在 Linux 系统上有一个本地共享库（用 C 编写）——我可以从带有字符串的 C 程序调用它，它进行计算并返回字符串结果。我也可以使用 JNI/JNA 从 Java 调用它。

有没有办法从本地浏览器（Firefox 或 Chrome）的网页中的 JavaScript 调用它？

感谢您的建议。

干杯，
森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:19:37.500

你当然不能。

那将是一个非常严重的安全问题。

您必须使用中间服务器（本地或非本地）来执行此调用。或者您可以开发一个插件，但这不是一个跨浏览器的解决方案。

由于您尚未使用 JNI/JNA 调用此库，因此最简单的方法是制作一个[servlet](http://en.wikipedia.org/wiki/Java_Servlet) 来回答[ajax 请求](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

# ruby-on-rails - 用 ror 搜索

> ID：12637095
> 
> 赞同：0
> 
> 时间：2012-09-28T09:18:53.767
> 
> 标签：ruby-on-rails, search, pagination

好的，这是我的问题。我用标题做了一个简单的搜索。它工作，但分页不！

```
contollers>store_controller

class StoreController < ApplicationController
  def index

  @buildings = Building.search(params[:search])

  @buildings = Building.paginate :page=>params[:page], :order =>'created_at DESC', :per_page=>10

 end

end 
```

模型>建筑

```
 def self.search(search)
  if search

    find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
   else
    find(:all)
  end
end 
```

视图>商店

```
 <% if notice%>
<p id="notice"> <%= notice%></p>
<%end%>

<h1>All Priorities</h1>

 <%= form_tag  store_path, :method => 'get'  do %>
<p>
  <%=text_field_tag :search , params[:search]%>
  <%= submit_tag "Search", :name=> nil%>
  </p>
  <%end%>

<% @buildings.each do |building| %>
<div class="entry">
    <div class="img">
    <%= image_tag (building.photo.url)%></div>
    <div class=" disc">
    <h3>Name of the Bulding:  <%= building.title %></h3>
     <h4>Status: <%= building.status %></h4>
    Info: <%=sanitize(building.description)%>
    <div class="price_line">
        <span class="price">Price: <%= sprintf("€ %0.02f",building.price)%></span><br/>
        <div class="button">
        <%= button_to("I want to see it", {:controller => "seeits", :action => "new", :building_id => building.id})%></div>

    </div>

    <div class="pages">
<%= will_paginate @buildings %></p>
</div>

    </div>

</div>

<%end%> 
```

控制器>建筑

```
class BuildingsController < ApplicationController
  # GET /buildings
  # GET /buildings.json
  def index 

    @buildings = Building.all

      respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @buildings }
    end

  end 
```

如果我有这种方式，搜索将不起作用并显示所有建筑物。但是如果我从视图>存储中删除：

```
<div class="pages">
    <%= will_paginate @buildings %></p>
    </div> 
```

并从 contollers>store_controller ： `@buildings = Building.paginate :page=>params[:page], :order =>'created_at DESC', :per_page=>10`

它工作正常！但是我想在用户位于第一侧并且不进行搜索时进行分页

更新 1

控制器>存储

```
class StoreController < ApplicationController
   def index

    # load @buildings following authorizations, whatever...
    # for instance, if you use cancan and load_and_authorize_resource, you'll have
    # already a @buildings you'd want to use, otherwise load them
    @buildings = Building.all
    # or @buildings = current_user.buildings or whatever makes sense

    @buildings = @buildings.search(params[:search]) if params[:search].present?

    @buildings = @buildings.paginate(:page=>params[:page],
                                     :order =>'created_at DESC',
                                     :per_page=>10)
    # do things, render etc...
  end

end 
```

模型>建筑

```
class Building < ActiveRecord::Base
 scope :search, lambda { |text| where('buildings.title LIKE ?', "%#{text}%") }

end 
```

问题依然存在！错误：未定义的方法“分页”#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:28:35.087

您要对搜索结果进行分页，不要再对整个`Building`表格进行分页！

```
class StoreController < ApplicationController
  def index

    # load @buildings following authorizations, whatever...
    # for instance, if you use cancan and load_and_authorize_resource, you'll have
    # already a @buildings you'd want to use, otherwise load them
    # or @buildings = current_user.buildings or whatever makes sense

    @buildings ||= Building.scoped

    @buildings = @buildings.search(params[:search]) if params[:search].present?

    @buildings = @buildings.paginate(:page=>params[:page],
                                     :order =>'created_at DESC',
                                     :per_page=>10)
    # do things, render etc...
  end

end 
```

而且，`search`该类方法实际上是一个范围：

```
class Building < ActiveRecord::Base
  scope :search, lambda { |text| where('buildings.title LIKE ?', "%#{text}%") }
end 
```

# php - 使用 curl 概念从某个 url 中获取值

> ID：12637102
> 
> 赞同：0
> 
> 时间：2012-09-28T09:19:18.673
> 
> 标签：php

> **可能重复：**
> [在 php 中使用 curl 概念获取内部文本](https://stackoverflow.com/questions/12615733/get-the-inner-text-using-curl-concept-in-php)

代码是这样的......

```
 <ul class="listings">
        <li>
        <a href="../episode/a_bit_of_fry_and_laurie_s1_e1-106555.html">
        <span class="">Episode 1</span>
        <span class="epnum">13/01/1989</span>
        </a>
        </li>
        </ul> 
```

通过 curl 概念，我正在获取**跨度** 第 1 集 1989 年 13 月 1 日的链接，我已经这样使用了

```
foreach($html->find('ul.listings li a span') as $e)
$e->innertext; 
```

但我的价值观越来越像

**第 1 集东京的味道 08/01/2002** ,我只想要 **第 1 集的东京味道**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:51:41.813

看来您正在使用 simpleHtmlDom

有手册：

[http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

作为选择器，如果你想获取第一个元素

```
// Find all <li> in <ul> 
foreach($html->find('ul') as $ul) 
{
       foreach($ul->find('li') as $li) 
       {
             // do something...
       }
}
// Find first <li> in first <ul> 
$e = $html->find('ul', 0)->find('li', 0); 
```

# javascript - 如何使用 Chrome 浏览器开发工具调试网页上的脚本？

> ID：12637103
> 
> 赞同：2
> 
> 时间：2012-09-28T09:19:18.563
> 
> 标签：javascript, jquery, google-chrome

我去 Sources 没有问题，选择一个文件，然后为一个一个加载的文件添加断点。但是我的网页上有一些 javascript 标签。我怎样才能查看，调试这个？我想我已经尝试了一切，但我仍然无法让那几行代码出现在调试器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:21:36.503

转到源，然后在它下方的窗格中，您有一个图标（左上角）单击该图标并选择您需要调试的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:21:38.897

在 Chrome 中，在源下，有一个选项可以查看实际网页本身。您选择它，然后在该页面上找到内联脚本并在那里设置断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:21:48.923

在您的源代码中添加此代码：`debugger;` 这将在您的 Chrome 开发人员工具中调试期间自动停止。

# javascript - Javascript更新导致悲伤

> ID：12637114
> 
> 赞同：1
> 
> 时间：2012-09-28T09:20:00.700
> 
> 标签：javascript, jquery

无论如何，我都不是一个 javascript 开发人员，但是我被困在一个 JS 问题后面。

如果有人可以帮助我弄清楚问题可能是什么，那就太棒了。

失败的脚本是：

```
 $('button').each(function()
            {
            var curr_title = $(this).attr('title');

            if(curr_title.length > 0)   $(this).button({ icons: { primary: curr_title } });
            else                        $(this).button();
            }); 
```

错误是

> TypeError：无法读取未定义的属性“长度”。

这在以前的代码版本中完全没有问题。但是唯一的变化是更新了 Jquery。

有谁知道这是否可能是问题？

再次。抱歉，如果我很愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:24:16.923

此行返回的值是`undefined`（可能是因为它引用的按钮没有指定这样的属性。）

```
var curr_title = $(this).attr('title'); 
```

[`attr()`](http://api.jquery.com/attr/)jQuery在 1.6 版本中改变了行为

> 从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。

所以`if`语句中的调用失败。要“修复”这个，你可以像这样添加一个检查`undefined`：

```
if( (typeof curr_title != 'undefined') && (curr_title.length > 0)) {
   $(this).button({ icons: { primary: curr_title } });
} else {
   $(this).button();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:23:05.043

看起来您可能在标记中有一个没有“标题”属性的按钮。对于此按钮（或按钮）`curr_title`未定义，因此调用 .length 会引发异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:24:05.227

`$(this).attr('title');`是未定义的，所以没有长度。您的按钮是否包含标题，如果您测试该属性是否存在，请尝试：

```
$('button').each(function()
            {
            var curr_title = $(this).attr('title');

            if(curr_title != undefined)  
                $(this).button({ icons: { primary: curr_title } });
            else                        
                $(this).button();
            }); 
```

# java - 如何在函数体中使用 if 和 switch 语句返回

> ID：12637116
> 
> 赞同：0
> 
> 时间：2012-09-28T09:20:15.527
> 
> 标签：java, switch-statement

我有一个具有以下模式的 Java 代码：

```
enum Foo
{
    ORANGE, APPLE, BANANA
}

Foo bar()
{
    switch(calcValue())
    {
        case "orange": return ORANGE;
        case "apple": return APPLE;
        case "banana": return BANANA;
    }
} 
```

方法的设计`calcValue`确保它只返回*switch 语句检查的三个字符串。*如果它不能返回三个字符串中的任何一个，它就会抛出异常。这意味着缺少的`default`关键字可能是不必要的，并且永远不会触发默认开关行为，因此`default`被省略。然而，Java 自然地（并且通常如此）抱怨`bar`必须（总是）返回一个值。我正在考虑将异常作为默认值抛出，但如前所述，`calcValue`已经抛出异常。我主要是在一个简单高效（涉及最少运行时检查和代码）的设计之后解决这个小问题——我不想抛出两个异常，并且`calcValue`不在我的控制之下，所以我无能为力。

我希望我在这里已经很好地解释了自己，如果没有，我会尽力澄清。本质上，这是关于设计具有已知开关默认值不适用的值的方法。这也可能适用于`if-then-else-if-then-else-...-then-else`语句模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:29:59.497

你写了

> calcValue 方法的设计确保它只返回 switch 语句检查的三个字符串。

但是，本合同并未以 的签名表示`calcValue`；它只是返回一个字符串，Java 的类型检查器无法知道只有*一些*字符串是可能的。我认为这是`calcValue`函数 API 中的一个缺陷。

底线是 Java 是正确的 - 您*确实*缺少`default`案例，因为您对内部工作原理的假设`calcValue`不是由类型系统强制执行的，因此它可能随时更改而编译器不会注意到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:22:10.683

在我看来，长 if/then/else 和 switch 语句是一个不好的迹象。我更喜欢尽可能以面向对象的风格写作。

就像使用 Map 一样，传入键并返回值。

您的简单示例可以而且应该是一个枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:23:06.830

即使`calcValue()`在默认情况下抛出错误，这是一个合乎逻辑的结论，Java 编译器不会理解这一点，因此抱怨没有返回的代码路径。对于默认情况，您也必须从此方法中引发异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T09:24:04.147

这是有充分理由的；因为你不控制 calcValue()，你应该有代码来处理未来的变化。

但是，如果您想按上述方式继续，请将最后一种情况更改为默认值，以便在没有 ORANGE 或 APPLE 的情况下始终返回“BANANA”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T09:24:49.940

你说

> calcValue 不在我的控制之下

然后，你不应该依赖它，它总是`throw`一个例外。

您应该添加`default`到您的`switch`构造中，并且如果控制到达那里应该抛出异常。

另一点是您的`bar()`方法本身应该是完整的。

您正试图使其与`calcValue()`. 的签名合同`Bar()`说它总是会返回 a`Foo`但不是这样做你依赖于`calcValue()`执行合同；这是错误的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T09:28:36.907

没有直接回答这个问题，但也许它会简化使用`Enum.valueOf()`. 如果`calcValue()`保证返回这三个值之一，您可以这样做：

```
enum Foo { ORANGE, APPLE, BANANA }

Foo bar() { return Foo.valueOf(calcValue().toUpperCase()); } 
```

并将决定委托给`Enum.valueOf`，顺便说一下，`IllegalArgumentException`如果没有这样的元素，它会抛出一个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-28T10:23:57.763

一个常见的模式是让枚举知道如何正确翻译自己

```
public enum Foo {
    BANANA("banana"),
    ORANGE("orange"),
    APPLE("apple");

private String calculationCode;

private Foo(String calculationCode) {
    this.calculationCode=calculationCode;
}

public static Foo byCalculationCode(String code) {
    for (Foo foo : values()) {
        if (foo.calculationCode.equals(code)) {
            return foo;
        }
    }
    throw new NoSuchElementException("Unknown code:" + code);
} 
```

# sql-server-2008 - SQL Server：存储过程和 CLR Proc 返回数据的方式不同

> ID：12637118
> 
> 赞同：0
> 
> 时间：2012-09-28T09:20:17.943
> 
> 标签：sql-server-2008, delphi, delphi-xe2, sqlclr

我正在使用 Delphi XE2 调用返回数据的存储过程。存储过程基本上是：

```
set nocount on -- ensures that Delphi will see that dataset
...
exec StoredProcThatReturnsData
...
update [table]
update [another table] 
```

当主过程是 T-SQL 过程时，它会在将数据返回给 Delphi**之前**`update`完成包括最后语句的主过程的执行。

 **`update`当主过程是 CLR 过程时，它会在子过程完成执行时返回数据，并且在我关闭`TSQLQuery`Delphi 中的对象之前不会运行语句。

Delphi 代码如下所示：

```
rpt := TSQLQuery.Create(nil);
try
  rpt.MaxBlobSize := -1;
  rpt.SQLConnection := ASqlConnection;
  rpt.SQL.Text := 'exec RunMainProc';
  rpt.Open;
  // do some things that depend on the update statements
  // process the 'rpt' data
finally
  FreeAndNil(rpt);
end; 
```

CLR 过程如下所示：

```
[Microsoft.SqlServer.Server.SqlProcedure]
public static void RunReport(SqlGuid ReportID, SqlGuid UserID, SqlBoolean ForDownload)
{
  using (SqlConnection con = new SqlConnection("context connection=true"))
  {
    con.Open();
    using (SqlCommand cmd = new SqlCommand())
    {
      cmd.Connection = con;
      cmd.CommandText = "[identical SQL as T-SQL proc]";
      SqlContext.Pipe.ExecuteAndSend(cmd);
    }
  }
} 
```

为什么 T-SQL 过程在返回数据之前完成执行，而 CLR 过程等待运行`update`语句，直到 Delphi 关闭/销毁`rpt`查询之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:59:28.467

感谢 Jeroen，我尝试从 Delphi 之外的某个地方运行东西并发现了问题。

当我将 T-SQL 过程转换为 CLR 时，我在子过程中添加了一些调试代码，这使它返回**两个**数据集而不是**一个**. 这是导致 CLR 版本的过程在主过程完成执行之前交回数据的第二个*待处理数据集。*

一旦我删除了调试代码（因此只生成了**一个**数据集），程序的 T-SQL 和 CLR 版本运行完全相同——主程序在数据返回给 Delphi 之前完成运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:25:29.073

您的 SP 是否返回记录？看来ti没有。那么你不应该调用 Open on Query。Open 准备 DataSet 以获取数据行，并且由于请求可以持续很长时间 - 它按需获取它们。当您调用*TDataSet.Next*和*TDataSet.Last*等时。所以我认为，如果你想在 .Open 之后与 SP 同步，你可以调用*rpt.Last*。

但正确的方法是根本不使用*Open*而是使用*ExecSQL*。

[http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SqlExpr_TSQLQuery_ExecSQL.html](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/SqlExpr_TSQLQuery_ExecSQL.html)

PS：在 C# 中，您调用*SqlContext.Pipe.Execute*，而不是*Open*。同样的预期也适用于 Delphi，在某种意义上它是 .Net 和 OLE DB 的模型**

# android - 如何快速获取准确的 GPS 坐标？

> ID：12637123
> 
> 赞同：0
> 
> 时间：2012-09-28T09:20:27.900
> 
> 标签：android, gps

我定义了 GPS 坐标。我创建了一个应用程序 onLocationChanged - 接收位置。这样可行。现在我想提高获取 kordinaty 和精度坐标的速度。

如何快速获取准确的 GPS 坐标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:22:46.303

阅读 Reto Meiers “深入了解位置”：

[http://android-developers.blogspot.de/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.de/2011/06/deep-dive-into-location.html)

简短版：您得到的操作系统不会或多或少地为您提供

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:30:18.043

我希望这可以帮助你，试试这个：

```
 LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
 mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
            mlocListener);

  public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        loc.getLatitude();
        loc.getLongitude();

        Geocoder gcd = new Geocoder(getApplicationContext(),
                Locale.getDefault());
        try {
            mAddresses = gcd.getFromLocation(loc.getLatitude(),
                    loc.getLongitude(), 1);

        } catch (IOException e) {

        }

        String cityName = (mAddresses != null) ? mAddresses.get(0)
                .getLocality() : TimeZone.getDefault().getID();
        String countryName = (mAddresses != null) ? mAddresses.get(0)
                .getCountryName() : Locale.getDefault().getDisplayCountry()
                .toString();

        mCurrentSpeed.setText(loc.getSpeed());
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Disabled",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

# scala - Scala - 将传递的参数与递归函数中传递的类型参数匹配

> ID：12637126
> 
> 赞同：1
> 
> 时间：2012-09-28T09:20:42.123
> 
> 标签：scala, pattern-matching, type-systems

我有一个节点类，它可以指向另一个节点（通过`next`）。该节点可以在不同的层次结构中进行子类化。然后，我可以在单链表的图像中拥有这些不同节点的链。然后，从该列表中的任意节点开始，我想搜索特定类型的第一个节点。因此，我为此创建了一个类型参数化的函数`check`。但它未能找到正确的匹配。下面是完整的输出代码示例，取自 Scala Worksheet：

```
class A (i: Int) {
    var next: Option[A] = None
    def + (a: A) = {
      next = Some(a)
      a
    }
    override def toString = super.toString + "[" + i + "]"
}
class B (i: Int) extends A (i)
class C (i: Int) extends B (i)
class D (i: Int) extends B (i)

object test {

    val start = (new A(0))                    //> start  : A = A@e80a59[0]
    val test = start + (new A(1)) + (new B(2)) + (new C(3)) + (new D(4)) + (new A(5)) + (new C(6))
                                                  //> test  : A = C@5d173[6]

    def check[T <: B](a: A): Option[B] = {
        println("starting search for " + a)
        a match {
          case t: T =>
            println("SUCCESS, found=" + t)
            Some(t)
          case wrong =>
            println("did not find! wrong=" + wrong)
            a.next match {
            case Some(nxt) =>
                println("checking next=" + nxt)
                check[T](nxt)
            case _ =>
                println("SEARCH FAILED")
                None
          }
        }
    }                                         //> check: [T <: B](a: A)Option[B]

    /* correct - i expect this */
    println(check[C](new A(1)))               //> starting search for A@1f9dc36[1]
                                                  //| did not find! wrong=A@1f9dc36[1]
                                                  //| SEARCH FAILED
                                                  //| None
    /* correct - i expect this */
    println(check[D](new A(2)))               //> starting search for A@e86da0[2]
                                                  //| did not find! wrong=A@e86da0[2]
                                                  //| SEARCH FAILED
                                                  //| None
    /* incorrect - it must fail looking for C */
    println(check[C](new B(4)))               //> starting search for B@1754ad2[4]
                                                  //| SUCCESS, found=B@1754ad2[4]
                                                  //| Some(B@1754ad2[4])
    println(check[B](start))                  //> starting search for A@e80a59[0]
                                                  //| did not find! wrong=A@e80a59[0]
                                                  //| checking next=A@fe64b9[1]
                                                  //| starting search for A@fe64b9[1]
                                                  //| did not find! wrong=A@fe64b9[1]
                                                  //| checking next=B@186db54[2]
                                                  //| starting search for B@186db54[2]
                                                  //| SUCCESS, found=B@186db54[2]
                                                  //| Some(B@186db54[2])
    /* incorrect - it must find C(3) instead */
    println(check[C](start))                  //> starting search for A@e80a59[0]
                                                  //| did not find! wrong=A@e80a59[0]
                                                  //| checking next=A@fe64b9[1]
                                                  //| starting search for A@fe64b9[1]
                                                  //| did not find! wrong=A@fe64b9[1]
                                                  //| checking next=B@186db54[2]
                                                  //| starting search for B@186db54[2]
                                                  //| SUCCESS, found=B@186db54[2]
                                                  //| Some(B@186db54[2])
    /* incorrect - it must find D(4) instead */
    println(check[D](start))                  //> starting search for A@e80a59[0]
                                                  //| did not find! wrong=A@e80a59[0]
                                                  //| checking next=A@fe64b9[1]
                                                  //| starting search for A@fe64b9[1]
                                                  //| did not find! wrong=A@fe64b9[1]
                                                  //| checking next=B@186db54[2]
                                                  //| starting search for B@186db54[2]
                                                  //| SUCCESS, found=B@186db54[2]
                                                  //| Some(B@186db54[2]) 
```

问题是：

1.  为什么会这样失败？它忽略传递的类型。

2.  我怎样才能达到我想要的？

**更新：**根据建议，我尝试使用 Scala“清单”来与这里所谓的“类型擦除”作斗争，方法是执行此手动显式具体化。但是，我无法在清单的帮助下进行模式匹配 - 它根本无法以我能想到的任何方式使用它，我也无法在网上找到任何工作示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:36:21.983

以下似乎有效。不知道还能说什么，因为我不知道还有什么其他（可能更好）的方式来实现你想做的事情。我研究了`Manifest`一段时间的API来想出这个。另外我不知道这是否也适用于“ClassManifest”。

并注意子类型，因为我认为这段代码会失败。

```
scala> trait A
defined trait A        
scala> case class A1() extends A
defined class A1    
scala> case class A2() extends A
defined class A2

scala> def check[T <: A](a: A)(implicit m: Manifest[T]) = a.getClass == m.erasure
check: [T <: A](a: A)(implicit m: Manifest[T])Boolean

scala> check[A1](A2())
res7: Boolean = false
scala> check[A2](A2())
res8: Boolean = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T13:02:16.150

首先，我建议您将任务拆分为：

1.  搜索具有特定属性的节点，以及
2.  将属性指定为某个类的子类。

例如，Scala 集合有方法

```
def collectFirst[B](pf: PartialFunction[A, B]): Option[B] 
```

找到为其定义函数的第一个元素并将函数应用于它。在您的情况下，您将在节点上而不是在其元素上使用部分函数。

然后，您可以创建一个函数，在给定（隐式）清单的情况下创建这样的部分函数：

```
def subclass[A <: AnyRef](implicit m: Manifest[A]): PartialFunction[Any,A] = {
  // Works properly only for arguments that have non-polymorphic types!
  case x if m.erasure.isInstance(x)  => x.asInstanceOf[A]
} 
```

（请注意，这不是万无一失的：只有当赋予部分函数的参数不是多态的时，它才能正常工作。原因是通常我们没有可用于传递给它的参数的清单，只有他们的类型擦除类。但是由于您的所有节点类都不是多态的，所以这应该不是问题。）

通过结合这两个功能，你应该得到想要的结果。

* * *

我将给出一个完整的 Scala 集合示例，您可以根据自己的情况进行调整：

```
import scala.reflect._

object Test extends App {
  // Scala collections have this method:
  // def collectFirst[B](pf: PartialFunction[A, B]): Option[B]

  def subclass[A <: AnyRef](implicit m: Manifest[A]): PartialFunction[Any,A] = {
    // Works properly only for arguments that have non-polymorphic types!
    case x if m.erasure.isInstance(x)  => x.asInstanceOf[A]
  }

  def collectFirst[T <: AnyRef](xs: Seq[AnyRef])(implicit m: Manifest[T]) =
    xs.collectFirst(subclass[T]);

  val s: Seq[AnyRef] = Seq(
    new java.lang.Object(),
    "a",
    3 : java.lang.Integer,
    '@' : java.lang.Character
  );

  println(collectFirst[String](s));
  println(collectFirst[AnyRef](s));
  println(collectFirst[java.lang.Character](s));
  println(collectFirst[java.lang.Integer](s));
} 
```

# php - PHP：获取特定标签内容的数组

> ID：12637128
> 
> 赞同：1
> 
> 时间：2012-09-28T09:20:49.000
> 
> 标签：php, html

我有一个像这样的 html 字符串（这不是完整的 html）：

```
<h2>Title A</h2>
  <p>aaaaaa</p>
  <p>bbbbbb</p>
<h2>Title B</h2>
  <p>aaaaaa</p>
  <p>bbbbbb</p>
<h2>Title C</h2>
  <p>aaaaaa</p>
  <p>bbbbbb</p> 
```

我想得到一个只有标题的数组（来自 h2 标签）：

```
array(Title A, title B, Title C); 
```

我正在使用 php。

我努力了

```
strip_tags(string,'<h2>') 
```

但我得到的是标题，然后是`<p>`标签后的内容。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T09:23:44.177

您可以尝试使用`DOMDocument`

```
 $html = '<h2>Title A</h2>
      <p>aaaaaa</p>
      <p>bbbbbb</p>
    <h2>Title B</h2>
      <p>aaaaaa</p>
      <p>bbbbbb</p>
    <h2>Title C</h2>
      <p>aaaaaa</p>
      <p>bbbbbb</p>';

$dom = new \DOMDocument();
$dom->loadHTML($html);

$items = $dom->getElementsByTagName('h2');

for($i = 0; $i < $items->length; $i ++) {
    echo $items->item($i)->nodeValue . PHP_EOL;
} 
```

输出

```
Title A
Title B
Title C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T09:32:08.833

PHP 已经内置了很好的 HTML 解析库，这里有一个带有 xpath 的解析器：

```
$h2 = array_map(
    'strval', simplexml_import_dom(\DomDocument::loadHTML($html))->xpath('//h2')
); 
```

输出：

```
array(3) {
  [0]=>
  string(7) "Title A"
  [1]=>
  string(7) "Title B"
  [2]=>
  string(7) "Title C"
} 
```

另请参阅其他与 DOMDocument 相关的答案，如果您听到 HTML 和 PHP，只需想到 DomDocument。

* * *

```
$doc = new DomDocument;
$doc->loadHTML($html);
$h2  = array_map(
    'strval', simplexml_import_dom($doc)->xpath('//h2')
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:28:19.753

您可以使用 SimpleXML 而不是 DOMDocument

[http://codepad.viper-7.com/Esairr](http://codepad.viper-7.com/Esairr)

```
$html = '
    <html>
        <h2>Title A</h2>
        <p>aaaaaa</p>
        <p>bbbbbb</p>
        <h2>Title B</h2>
        <p>aaaaaa</p>
        <p>bbbbbb</p>
        <h2>Title C</h2>
        <p>aaaaaa</p>
        <p>bbbbbb</p>
    </html>';
$xml = new SimpleXMLElement($html);

echo "<pre>";
print_r($xml->h2);
echo "</pre>"; 
```

输出

```
SimpleXMLElement Object
(
    [0] => Title A
    [1] => Title B
    [2] => Title C
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T09:22:21.327

您应该使用诸如[DomDocument](http://php.net/manual/en/intro.dom.php)之类的解析器来解析 HTML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:25:27.770

你可以使用`preg_match_all`：

```
preg_match_all("/<h2>(.*?)</h2>/si", $sResource, $aTitles);
print_r($aTitles[1]); 
```

不鼓励像这样使用 PHP 解析 HTML，因为特定的字符、换行符等可能会干扰您的脚本。DOM Parser 将是一个很好且简单的替代方案。

# iphone - 视图 b 中的视图 a 中的设置器：发送到实例的无法识别的选择器

> ID：12637133
> 
> 赞同：1
> 
> 时间：2012-09-28T09:21:09.810
> 
> 标签：iphone, ios, ipad

这是一些代码：

ViewControllerA.h

```
@interface ViewControllerA: UIViewController {
   NSString *myString;
}

@property (nonatomic,retain)NSString *myString; 
```

视图控制器A.m

```
@implementation ViewControllerA
@synthesize myString; 
```

然后我在导航控制器中推送 ViewControllerB。当我想返回 ViewControllerA ViewControllerB.m

```
-(IBAction)randomAction(id)sender {
   ViewControllerA *myViewController = (ViewControllerA*)[self parentViewController]:
   [myViewController setMyString:@"test"]: // HERE IS THE ERROR : "[DMINavigationController setMyString:]:unrecognized selector sent to instance"
   [self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:0] animated:YES]
} 
```

为什么？错误指的是“[DMNavigationController setMyString:]”而不是我的视图控制器是否正常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:37:37.767

您的`myView`变量已被分配为您的视图控制器的父视图控制器，这显然不是一个`ViewA`实例，因为崩溃试图向它发送由`ViewA`. 你为什么这样做——你想和父母一起完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:42:34.963

我认为您对 ViewController 以及如何在 NavigationController 中正确处理它们有点困惑。

您可能从 an 开始`DMINavigationController`并使用`ViewControllerA`. 如果你推送一个新的 ViewController `ViewControllerB`，父级将不是`ViewControllerA`NavigationController 。

如果你想访问之前的 ViewController，你需要查询`viewControllers`NavigationController 的属性来找到它。

您要查找的 VC 位于 (当前对象的索引)-1

```
int index = [self.navigationController.viewControllers indexOfObject:self] - 1;
ViewControllerA *vcA = [self.navigationController.viewControllers objectAtIndex:index]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T15:27:57.380

而不是`parentViewController`我认为你的意图[`presentingViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instp/UIViewController/presentingViewController)。这仅适用于 iOS5 或更高版本。

我看到您已经接受了另一个答案，这很好，但是另一种方法是让视图控制器 B 拥有一个对视图控制器 A 的弱引用的属性，A 将在创建 B 之后但在它转换到 B 之前设置该属性（例如，`prepareForSegue`如果您使用的是segues）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T09:25:56.820

您不能将字符串设置为视图。您必须创建一个标签，然后将文本设置为标签，还有一件事您没有为 myString 创建属性，那么您是如何设置的

@synthesize myString;

如果您正在编写变量的属性，那么只有您可以添加@synthesize。

# regex - 如何（捕获）处理正则表达式中访问的相同元素

> ID：12637147
> 
> 赞同：0
> 
> 时间：2012-09-28T09:21:35.257
> 
> 标签：regex, notepad++

我想`"A", "B", ...`在记事本++中使用正则表达式替换将这些字符插入引号内

> A，B，C，D，E，F，G，H，I，J，K，L，M，N，O，P，Q，R，S，T，U，V，W，X，Y， Z

我可以使用一些其他技巧来解决这个问题，但特别是我正在寻找一种方法来访问被替换的元素，以便在每种情况下都被替换，而不仅仅是字符、数字或这个特定的模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:25:24.737

正在寻找

```
(\w+) 
```

并将所有替换为

```
"\1" 
```

适用于所有字母数字“单词”。

对于您的第二个示例，将搜索词更改为

```
([\w-]+) 
```

和替换术语

```
$\1$ 
```

# sql - sql server 查询 order by 与 union 并替换多个列的空值

> ID：12637152
> 
> 赞同：1
> 
> 时间：2012-09-28T09:21:41.813
> 
> 标签：sql, sql-server, sql-server-2008, plsql

我有一个查询要从 4 个不同的表中获取记录。我`union`用来获取最终记录。我的问题是我在所有 4 个表中没有相同数量和类型的列，所以我正在制作具有`null`价值的虚拟列。我面临的问题是排序。我正在使用 datetime desc 对记录进行排序，但有时当日期相同时，我希望警报上的二级排序列可以是 High、Medium 或 Null 类型。我想要 Null 列在底部，但我在顶部。所以我尝试使用`ISNULL(column_name, 'aaaa')`in`ORDER BY`子句，但没有得到实际结果。任何人都可以帮忙吗？

```
SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblA
union  
SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblB
union  
SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblC
union
SELECT CreatedDt as 'Date/Time' , Alert_Type FROM TblD
ORDER BY CreatedDt, ISNULL (Alert_Type,'aa') DESC 
```

错误是

```
ORDER BY items must appear in the select list if the statement contains a UNION, INTERSECT or EXCEPT operator. 
```

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:41:56.813

试试这个：

```
select * from (

SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblA
union  
SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblB
union  
SELECT CreatedDt as 'Date/Time' , null AS [Alert_Type] FROM TblC
union
SELECT CreatedDt as 'Date/Time' , Alert_Type FROM TblD)a
order by CreatedDt desc, 
         case when Alert_Type is null then 0 else 1 end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:13:48.143

如果`Alert_Type`不能为 NULL in `TblD`，你可以这样做：

```
SELECT CreatedDt as 'Date/Time' , **'aa'** AS [Alert_Type] FROM TblA
union  
SELECT CreatedDt as 'Date/Time' , **'aa'** AS [Alert_Type] FROM TblB
union  
SELECT CreatedDt as 'Date/Time' , **'aa'** AS [Alert_Type] FROM TblC
union
SELECT CreatedDt as 'Date/Time' , Alert_Type FROM TblD
ORDER BY CreatedDt **DESC**, **Alert_Type** DESC 
```

注意`DESC`后面`CreatedDt`（因为你说你想按日期时间列按降序排序）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:25:18.753

你仍然可以`CASE`在你的`ORDER BY`条款中使用

```
ORDER BY  CASE WHEN column_name IS NULL
               THEN 1
               ELSE 0
          END ASC --, other sorts
                  -- in these case NULL columns should be on the bottom part 
```

# java - 从表中随机选择行的计数字段具有最低值的属性

> ID：12637158
> 
> 赞同：0
> 
> 时间：2012-09-28T09:21:48.087
> 
> 标签：java, sql, ms-access-2007

一个表 loadcount 有两个属性 did 和 count。我需要在计数最低的地方选择 did。例如，如果：

```
 did        count
 657        0
 698        1 
```

然后必须返回 657。类似地，如果两行具有相同的计数值并且都是最低的，则需要随机选择其中之一。请帮助我。我的学术项目提交截止日期非常接近，我自己无法弄清楚。请提供代码， sql 查询。我在项目中使用 microsoft access 和 java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:28:50.977

您可以使用 MIN 功能找到最低的

```
SELECT MIN(expression)
FROM tables
WHERE predicates 
```

所以在这种情况下

```
SELECT MIN(count) as "Lowest Count"
FROM tableName 
```

要从返回的 MIN 信息中选择一个随机单元格，这取决于您使用的 MySQl、PostgreSQL 等...

使用 MySQL 选择一个随机行：

```
SELECT MIN(count) as "Lowest Count"
FROM tableName
ORDER BY RAND()
LIMIT 1 
```

使用 PostgreSQL 选择一个随机行：

```
SELECT MIN(count) as "Lowest Count"
FROM tableName
ORDER BY RANDOM()
LIMIT 1 
```

使用 Microsoft SQL Server 选择随机行：

```
SELECT TOP 1 MIN(count) as "Lowest Count"
FROM tableName
ORDER BY NEWID() 
```

使用 IBM DB2 随机选择一行

```
SELECT MIN(count), RAND() as "Lowest Count"
FROM tableName 
ORDER BY IDX FETCH FIRST 1 ROWS ONLY 
```

使用 Oracle 选择一条随机记录：

```
SELECT MIN(count)
( SELECT MIN(count)
FROM tableName
ORDER BY dbms_random.value )
WHERE rownum = 1 
```

# android - Android : 应用内购买

> ID：12637161
> 
> 赞同：3
> 
> 时间：2012-09-28T09:22:00.113
> 
> 标签：android, in-app-purchase, in-app-billing

我知道在 Android 中购买应用程序并为此关注地下城应用程序，但我有一些疑问要澄清。

1.  我们是否需要为用户创建自己的自定义购物车，或者我们是否需要仅显示应用内产品的列表及其详细信息，并为用户提供选择，然后谷歌结帐将做休息并完成结帐？

    在[这个链接](http://developer.android.com/guide/google/play/billing/index.html)上，我发现：

    > 当您使用应用内结算服务销售商品时，无论是应用内商品还是订阅，Google Play 都会处理所有结帐细节，因此您的应用程序无需直接处理任何金融交易。Google Play 使用与应用程序购买相同的结帐后端服务，因此您的用户可以体验到一致且熟悉的购买流程。

    这是否意味着我们不能为我们的应用程序添加购物车？

2.  应用程序只能拥有特定数量的应用内产品 ID 是否存在限制？产品 ID 有最大限制吗？

3.  如果某个产品从我的应用程序中终止，是否有规定删除该产品或至少阻止它向用户展示？

4.  在我的应用程序中，将有单独的产品以及产品包。例如：一个产品可以是一首歌，一个包可以是4首歌曲。在这种情况下，包裹是否会仅在 Google Play 或其他地方被视为产品？我的意思是，产品包装是否仅被视为单个产品？

我需要专家指导和澄清上述几点。任何教程/指南的链接以及解释都会受到赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T23:20:34.893

我使用托管项目在我的游戏中实施了 IAB（应用内结算）。

**1.** 您一次只能通过IAB购买一个产品。无法一次购买多件商品，因此没有“购物车”。工作流程是：用户单击“购买”一个项目，然后您将请求发送到 Google Play，它会为您提供一个`PendingIntent`用于显示用户完成购买该单个项目的结帐（然后您必须执行更多的东西以及随后的各种响应，所有这些都记录在官方文档中）。您不能提出在一次结帐中显示多个项目的购买请求。

您可以使用基于购物车的系统的一种方法（假设它不违反任何类型的 Google 服务条款，尽管我不明白为什么会这样）可能只是出售固定金额的信用额度，以便在您的商店购物。20 美元的商店信用，5 美元的商店信用等（或者 200 黄金换 20 美元，如果你想使用自己的古怪货币）。然后，您可以制作自己的购物车系统，以通过您自己的服务器花费该积分。

**2.** 我不知道每个应用程序的 IAB 项目数量有任何限制。

**3.** 在您的应用中显示哪些项目完全取决于您。无法在运行时从 Google Play 检索您的产品列表。您必须在应用程序中对产品进行硬编码，或者拥有自己的服务器，应用程序可以通过该服务器查询要显示的产品列表。

如果您通过开发者控制台从您的应用程序中删除一个 IAB 项目并且您的应用程序尝试购买它，您将在应用程序中收到一个错误，以便您可以告诉用户该项目不可用。

**4.** 您可能有以下可供购买的项目设置：

*   my_app.song1
*   my_app.song2
*   my_app.song3
*   my_app.song4
*   my_app.songpacksongs1to4

my_app.songpacksongs1to4 仅代表 IAB 中的可购买项目，与其他 4 个项目完全相同。IAB 中的商品基本上只是带有描述和友好名称的命名价格，它们会在结账时显示。

如果它们不受管理，则可以多次购买它们，并且无法通过 IAB 的恢复事务来恢复它们，因为它们的状态未被跟踪。如果它们是受管理的，它们只能购买一次，您可以通过恢复事务来恢复它们，因为 IAB 服务器会跟踪它们的购买状态。

没有 Google Play 服务器端方法可以说一个项目代表其他项目的集合。“包”只是另一个命名的价格。

如果您有逻辑，则需要应用该逻辑来控制用户是否可以根据不同商品的状态购买包裹或单个商品，您需要在您的应用程序和/或您自己的服务器上自己完成所有操作。

# macos - 在 MAC OSX 10.7.4 中安装 Tmux

> ID：12637164
> 
> 赞同：0
> 
> 时间：2012-09-28T09:22:17.873
> 
> 标签：macos, tmux, iterm

我有 iTerm2。我知道 tmux 是一个实用程序，可让您在多个终端中划分屏幕。iTerm 让你做到这一点。那么为什么我需要 tmux？还有一些奇怪的事情正在发生。在 Shell 菜单下，我得到了“tmux”选项，但我只能选择“Detach”。什么都不做。我想要一种在我的机器上安装 tmux 的简单方法，请有人解释一下 tmux 和 iTerm 划分终端的选项之间的区别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:04:21.990

tmux 可以远程使用，它可以作为守护进程运行。这意味着您可以登录到远程服务器启动 tmux 然后断开连接。再次登录后，您可以重新连接到上一个 tmux 会话并从您开始的地方继续。因此，如果您愿意，您可以在远程机器上完全开发，晚上关闭您的计算机，然后通过重新连接从前一天晚上离开的地方重新开始。所以在某种程度上你是对的，tmux 和 iTerm2 有一些共同的想法和特性，但 iTerm2 只是为了你的本地方便，而 tmux 有一些额外的特性。除了所有这些好处之外，您甚至可以让某人加入您的 tmux 会话并与来自世界各地的人共享一个 shell。

# javascript - 如何通过选择的另一个下拉值动态更改下拉到文本框？

> ID：12637168
> 
> 赞同：0
> 
> 时间：2012-09-28T09:22:30.173
> 
> 标签：javascript, ruby-on-rails, ruby, model

我有两个下拉菜单，例如`sub_element`和`material`。我添加了一些 javascript 来更改`material`取决于`sub_element`选择的值。现在，该`sub_element`表有另一列称为`Answer_Type`。此列的值为“M”和“T”。因此，`material`如果表中的“Answer_Type”为“T”，则下拉菜单应更改`sub_element`。请提出任何想法来做到这一点。请参考以下页面。

```
<% content_for :javascript do %>

var master_surveys = <%= 
 Condition::MasterSurvey.all.map {|ms| {id: ms.Master_Survey_Code, to_s: ms[:Master_Survey_Name]}}.to_json.html_safe
%>

var elements = <%=
elements = Hash.new { |hash, code| hash[code] = [] }
Condition::Element.all.each {|e| elements[e.Master_Survey_Code] << {id: e.Element_Code, to_s: e.Element} } 
elements.to_json.html_safe
%>

var sub_elements = <%= sub_elements = Hash.new { |hash, code| hash[code] = [] }
Condition::SubElement.all.each {|s| sub_elements[s.Element_Code] << {id: s.Sub_Element_Code, to_s: s.Sub_Element} }
sub_elements.to_json.html_safe
%>

var materials = <%=
materials = Hash.new { |hash, code| hash[code] = [] }
Condition::RenewSchedule.all.each {|rs| materials[rs.Sub_Element_Code] << {id: rs.Material_Code, to_s: rs.Material} }
materials.to_json.html_safe
%>

<% end %>
<div class="styled-select">
<%= form_for(@enr_rds_surv_rdsap_xref) do |f| %>
  <% if @enr_rds_surv_rdsap_xref.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@enr_rds_surv_rdsap_xref.errors.count, "error") %>:</h2>

      <ul>
      <% @enr_rds_surv_rdsap_xref.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
    <div class="field">
      <%= f.label :Master_Survey %><br/>
      <%= f.select :master_survey, [], { :prompt => 'Please Select' }  %>
    </div>

    <div class="field">
      <%= f.label :Element_Code %><br/>
      <%= f.select :Element_Code, [], { :prompt => 'Please Select' } %>
    </div>

    <div class="field">
      <%= f.label :Sub_Element_Code %><br/>
      <%= f.select :Sub_Element_Code, [], { :prompt => 'Please Select' } %>

    </div>  

    <div class="field">
      <%= f.label :Material_Code %><br/>
      <%= f.select :Material_Code, [], { :prompt => 'Please Select' } %>
      // Here i want to add a text box by if condition //    
      <% end %>
    </div>

  <div class="actions">
    <%= f.submit 'Save'%>
  </div>
<% end %>
</div> 
```

* * *

## 这是Javascript页面

```
$(function() {
  if ($('html.enr_rds_surv_rdsap_xrefs.new, html.enr_rds_surv_rdsap_xrefs.createElement, '+
    'html.enr_rds_surv_rdsap_xrefs.edit, html.enr_rds_surv_rdsap_xrefs.update').length == 0) return;

  var master_survey_dropdown = document.getElementById('enr_rds_surv_rdsap_xref_master_survey');
  var element_dropdown = document.getElementById('enr_rds_surv_rdsap_xref_Element_Code');
  var sub_element_dropdown = document.getElementById('enr_rds_surv_rdsap_xref_Sub_Element_Code');
  var material_dropdown = document.getElementById('enr_rds_surv_rdsap_xref_Material_Code');

  var dropdowns = [master_survey_dropdown, element_dropdown, sub_element_dropdown, material_dropdown];

  var populate_dropdown = function(dropdown_number, values) {
    var dropdown;
    // remove all but the first option
    for (var i=dropdown_number; i<dropdowns.length; i++) {
      dropdown = dropdowns[i];
      $(' > option + option', dropdown).each(function() {
        this.parentNode.removeChild(this);
      });
    };
    dropdown = dropdowns[dropdown_number];
    for (var i=0; i<values.length; i++) {
      var value = values[i];

      var option = document.createElement('option');
      option.value = value.id;
      $(option).text(value.to_s);

      dropdown.appendChild(option);
    };
  };

  populate_dropdown(0, master_surveys);

  $(master_survey_dropdown).change(function() {
    var master_survey_id = master_survey_dropdown.value;
    populate_dropdown(1, elements[master_survey_id]);
  });

  $(element_dropdown).change(function() {
    var element_id = element_dropdown.value;
    populate_dropdown(2, sub_elements[element_id]);
  });

  $(sub_element_dropdown).change(function() {
    var sub_element_id = sub_element_dropdown.value;
    populate_dropdown(3, materials[sub_element_id]);
  });

}); 
```

所以，在最后一个字段中，我想通过表中的值将下拉列表更改为文本`Answer_Type`框`Sub_Element`。

# openssl - 生成私钥和公钥 OpenSSL

> ID：12637171
> 
> 赞同：12
> 
> 时间：2012-09-28T09:22:36.580
> 
> 标签：openssl, rsa, private-key, public-key

我有以下命令供 OpenSSL 生成私钥和公钥：

```
openssl genrsa –aes-128-cbc –out priv.pem –passout pass:[privateKeyPass] 2048 
```

和

```
openssl req –x509 –new –key priv.pem –passin pass:[privateKeyPass] -days 3650 –out cert.cer 
```

...但他们没有工作。对于第一个命令，我收到以下错误：

```
usage: genrsa [args] [numbits]
 -des            encrypt the generated key with DES in cbc mode
 -des3           encrypt the generated key with DES in ede cbc mode (168 bit key)
 -seed
                 encrypt PEM output with cbc seed
 -aes128, -aes192, -aes256
                 encrypt PEM output with cbc aes
 -camellia128, -camellia192, -camellia256
                 encrypt PEM output with cbc camellia
 -out file       output the key to 'file
 -passout arg    output file pass phrase source
 -f4             use F4 (0x10001) for the E value
 -3              use 3 for the E value
 -engine e       use engine e, possibly a hardware device.
 -rand file:file:...
                 load the file (or the files in the directory) into
                 the random number generator 
```

我究竟做错了什么？

编辑：我解决了第一个命令：

```
openssl genrsa -aes128 -out privkey.pem 2048 
```

但是现在我遇到了第二个错误：

```
unknown option –x509 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T10:37:08.737

'genrsa' 只生成一个 RSA 密钥。

'req' 然后使用该键发出 x509 样式请求。

如果您只需要一个 rsa 密钥对 - 使用 genrsa。

如果您需要密钥对和签名的 x509 请求，请使用“genrsa”，然后使用“req”。

可选地，'req' 也可以为您生成该密钥（即它封装了'genrsa' 命令（和 gendh）。

所以：

```
 openssl genrsa -aes128 -out privkey.pem 2048
 openssl req -new -x509 -key privkey.pem 
```

几乎等同于

```
 openssl req -new -x509 -keyout privkey.pem  -newkey rsa:2048 
```

除了与“genrsa”不同的是，“req”不允许您将 aes128 指定为加密。

因此，在许多企业设置中，为了获得对所应用的密钥加密的充分控制，需要分两步进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:30:25.713

正如我从输出中看到的，您选择了错误的算法。你不应该通过`-aes128`而不是`-aes-128-cbc`？

从手册中我认为这`-aes-128-cbc`是一个合适的参数`openssl enc`，但我不知道它是否应该适用于`genrsa`.

# html - CSS - 使用选项卡实现边框图像

> ID：12637173
> 
> 赞同：0
> 
> 时间：2012-09-28T09:22:37.297
> 
> 标签：html, border, css

更多的是后端程序员，但我正在实现一个设计，我只是想看看实现边框框的最有效方法是什么。

这是一个盒子的例子 -

![边框](../Images/72d2331f087a5e7214ffa53d866baf95.png)

这个想法是蓝色选项卡将包含该部分的标题文本。

理想情况下，我只想使用 HTML 和 CSS，但我意识到我可能需要将选项卡用作图像，因为它的形状。这些盒子可以有多种尺寸，具体取决于内容。

我可以使用蓝色边框没问题

```
 -webkit-border-radius: 10px; -moz-border-radius: 10px; 
```

或类似的，它主要是对我提出问题的选项卡。有没有人做过类似的事情可以提供建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:27:39.270

```
.tab-header {
  background: blue;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
  padding-bottom: 10px; /* we extend the header by 10px to the bottom */
}

.tab-body {
  border: 1px solid blue;
  background: white; /* set a solid background */
  margin-top: -10px; /* move the body 10px up, so it covers the
                        10px padding from above */
} 
```

您必须相应地为边框半径添加前缀，但除此之外，这应该可以在任何最近的浏览器中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:34:15.073

**[从这里开始](http://jsfiddle.net/pwTVz/)**并根据需要进行修改，应该可以满足您的需求。

# jquery - 如何使用 JQuery 在 JSF2 中上传多个文件？

> ID：12637175
> 
> 赞同：1
> 
> 时间：2012-09-28T09:22:41.667
> 
> 标签：jquery, jquery-plugins, jsf-2

我需要一个示例来使用 jquery 插件上传多个文件并使用支持所有浏览器的 JSF 2 来实现它。我看到了很多插件，但它是用 php 实现的，但我需要用 jsf。

我需要使用 jquery 插件而不是 primefaces，因为它在 safari 和 IE 中存在问题。

# javascript - phonegap javascript 文件可访问性

> ID：12637180
> 
> 赞同：0
> 
> 时间：2012-09-28T09:22:54.037
> 
> 标签：javascript, cordova, browser

移动设备上 phonegap 应用程序中的 javascript 文件是否像浏览器中一样可供用户访问/可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:21:28.893

PhoneGap 通过扩展和包装 iOS / Android SDK 的通用类来工作。由于 html 文件由 phonegap 代码包装，我认为您不能像普通桌面浏览器那样查看/访问其 html 或 javacript 文件。

签出此[链接](http://hiediutley.com/2011/03/14/phonegap-tutorial-series-1-project-structure-and-internals/)

并查看此[链接](http://developer.appcelerator.com/blog/2012/05/comparing-titanium-and-phonegap.html)（PhoneGap 的工作原理）

# ruby - 在 Sequel (Ruby ORM) 中为 SELECT 语句指定索引

> ID：12637186
> 
> 赞同：2
> 
> 时间：2012-09-28T09:23:02.017
> 
> 标签：ruby, sequel

Sequel API 中是否有任何内容允许我指定要使用的索引？

生成的 SQL 应如下所示：

```
SELECT * FROM Users WITH (INDEX(idx_name)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:51:41.000

Sequel 没有明确支持该语法，但您可以伪造它：

```
DB.from('Users WITH (INDEX(idx_name))'.lit) 
```

不过，它不会是完美的（连接可能会破坏它）。修改适配器以在 DSL、FWIW 中添加对该语法的直接支持并不难。

# java - 使用java创建一个json对象并将其存储在mysql中

> ID：12637187
> 
> 赞同：0
> 
> 时间：2012-09-28T09:23:01.627
> 
> 标签：java, mysql, json

我必须创建一个 json 对象并使用 java 将其存储在 mysql 中

我很困惑，我该怎么办。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:01:21.697

MySql 有一个称为`'MEDIUMTEXT'`存储文本内容或 CLOB 的数据类型。您可以创建一个表，其中一个列定义为`'MEDIUMTEXT'`，并使用任一 JDBC 语句类 setString 方法来设置 JSON`jsonObject.toString()`值。

如果需要，您还可以使用`'LONGTEXT'`数据类型。

# mysql - 多表删除限制

> ID：12637193
> 
> 赞同：1
> 
> 时间：2012-09-28T09:23:13.797
> 
> 标签：mysql, sql, sql-delete

我正在尝试运行以下查询，但它会引发错误。

```
DELETE b 
FROM parim_lang a 
JOIN parim_lang b 
    ON b.lang_hash = a.lang_hash 
    AND b.lang_language = SUBSTRING(a.lang_google_translation, LOCATE('-', a.lang_google_translation) + 1)
WHERE a.lang_google_translation REGEXP '^[a-z]+-[a-z]+'
LIMIT 20 
```

没有限制这个查询有效..

错误如下所示：

> SQL 错误 (1064)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的“LIMIT 20”附近使用正确的语法

发现这个：

> 对于多表语法，DELETE 从每个 tbl_name 中删除满足条件的行。在这种情况下，不能使用 ORDER BY 和 LIMIT。

我有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:27:42.250

尝试 ：

```
DELETE
FROM parim_lang a
WHERE a.lang_hash IN (
SELECT a.lang_hash 
FROM parim_lang a
JOIN parim_lang b 
    ON b.lang_hash = a.lang_hash 
    AND b.lang_language = SUBSTRING(a.lang_google_translation, LOCATE('-', a.lang_google_translation) + 1)
WHERE a.lang_google_translation REGEXP '^[a-z]+-[a-z]+' ) LIMIT 20 
```

# jquery - Uncaught SyntaxError：每条指令的意外标识符

> ID：12637194
> 
> 赞同：0
> 
> 时间：2012-09-28T09:23:15.743
> 
> 标签：jquery, syntax, foreach, identifier

我尝试使用 jquery 函数更改 div 值。我对 json 的所有值求和。但我收到以下错误：

*   未捕获的 SyntaxError：谷歌浏览器上的意外标识符
*   SCRIPT1005：在 IE 上应为 '('
*   在 Firefox 上运行良好

所有指令均已关闭。没有无用的空格。我尝试了所有找到的解决方案，但没有任何效果。错误出现在“for each”指令上。这是我的代码：

```
 var tab_prix = <?php echo json_encode($tab_prix) ?>;
function majTotal() {
            var sum=0;
            for each(produit in tab_prix){sum=eval(Number(sum)+Number(produit));}
            jQuery(\'#boutiqueExpress-total\').text(sum.toFixed(2));                    
        } 
```

感谢您的帮助！（对不起我的英语不好:()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:25:32.820

请参阅[文档`for each ... in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)：

> 已弃用

和

> 非 Mozilla 浏览器不广泛支持，不是 ECMAScript 标准的一部分

请改用`for ... in`循环。

# android - 创建自定义画廊

> ID：12637199
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:23:31.873
> 
> 标签：android, android-gallery

我想创建一个自定义画廊，其中画廊中最中心的视图显示缩小动画。所以当我滚动我的画廊时，来到中心的项目会被放大。所以我需要知道的是：

1.  如何在画廊中找到中心项目。（如果显示 5 个项目，我需要第 3 个项目作为中心项目）。
2.  当滚动发生时，如何对其进行动画处理以获得平滑的凸出效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:48:59.553

在使用队列的管道结构的帮助下，结合 Gallery 的 addViewToLayout 方法，我得到了它。

代码 ：

自定义图库类

```
public class NGallery extends Gallery {

private Pipe<View> childViews;
private int pipeSize;
private View previousAnimatedView;
private boolean isScrollLeft;

public NGallery(Context context, AttributeSet attrs) {
    super(context, attrs);
    final Timer tmr = new Timer();
    TimerTask task = new TimerTask() {

        @Override
        public void run() {
            initialize();
            if (pipeSize > 0) {
                tmr.cancel();
            }
        }
    };
    tmr.scheduleAtFixedRate(task, 100, 100);
}

private void initialize() {
    View childView = getChildAt(0);
    if (childView != null && childView.getWidth() > 0) {
        pipeSize = getWidth() / childView.getWidth();
        childViews = new Pipe<View>(pipeSize);
    }
}

@Override
protected boolean addViewInLayout(View child, int index,
        android.view.ViewGroup.LayoutParams params,
        boolean preventRequestLayout) {
    View viewToAnimate = getViewToAnimate(child);
    if (viewToAnimate != null) {
        if (previousAnimatedView != null) {
            previousAnimatedView.clearAnimation();
        }
        viewToAnimate.requestFocus();
        AnimationSet animationSet = getAnimationSet(viewToAnimate);
        viewToAnimate.startAnimation(animationSet);
        previousAnimatedView = viewToAnimate;
    }
    return super
            .addViewInLayout(child, index, params, preventRequestLayout);
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    isScrollLeft = distanceX > 0;
    return super.onScroll(e1, e2, distanceX, distanceY);
}

private AnimationSet getAnimationSet(View viewToAnimate) {
    AnimationSet animationSet = new AnimationSet(false);

    Animation scaleAnimation = new ScaleAnimation(1, 1.5f, 1, 1.5f);
    scaleAnimation.setDuration(100);
    animationSet.addAnimation(scaleAnimation);

    Animation transAnimation = new TranslateAnimation(0, 0, 0, 25);
    transAnimation.setDuration(100);
    animationSet.addAnimation(transAnimation);

    animationSet.setFillAfter(true);

    return animationSet;
}

private View getViewToAnimate(View child) {
    if (childViews != null) {
        if (isScrollLeft) {
            childViews.addFirst(child);
        } else {
            childViews.addLast(child);
        }
        return childViews.getCenterItem();
    } else {
        return null;
    }
}

} 
```

管道类：

```
public class Pipe<E> {

private LinkedList<E> list;
private int pipeSize;

public Pipe(int size) {
    list = new LinkedList<E>();
    pipeSize = size;
}

public E getItemAt(int position) {
    return list.get(position);
}

public E getCenterItem() {
    int pos = pipeSize / 2;
    if (pos < list.size()) {
        return list.get(pos);
    } else {
        return null;
    }
}

public void addFirst(E item) {
    if (list.size() >= pipeSize) {
        list.removeLast();
    }
    list.addFirst(item);
}

public void addLast(E item) {
    if (list.size() >= pipeSize) {
        list.removeFirst();
    }
    list.addLast(item);
}

} 
```

# iphone - 如何减少 CFData(Store)？

> ID：12637201
> 
> 赞同：6
> 
> 时间：2012-09-28T09:23:32.737
> 
> 标签：iphone, memory, memory-leaks, uiimage, cfdata

我一直在寻找解决以下问题的解决方案，但找不到。我做了过滤方法来修改`HSV`. `UIImage`此方法工作正常，但是当我使用此方法时，使用的内存会增长并且无法释放。在 Instruments 的“Live Bytes”框中，我发现`CFData`（存储）的值每次过滤都会增加几 MB。我怎样才能释放它们？我发现了类似的问题，但对于这个问题并不好。谢谢你。

```
//Objective-C
- (UIImage*)addFilter:(UIImage*)img{
    CGImageRef imgRef = img.CGImage;

    //getting size
    size_t width = CGImageGetWidth(imgRef);
    size_t height = CGImageGetHeight(imgRef);
    size_t bitsPerComponent = CGImageGetBitsPerComponent(imgRef);
    size_t bitsPerPixel = CGImageGetBitsPerPixel(imgRef);
    size_t bytesPerRow = CGImageGetBytesPerRow(imgRef);

    CGColorSpaceRef colorSpace = CGImageGetColorSpace(imgRef);
    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imgRef);
    bool shouldInterpolate = CGImageGetShouldInterpolate(imgRef);
    CGColorRenderingIntent renderingIntent = CGImageGetRenderingIntent(imgRef);
    CGDataProviderRef dataProvider = CGImageGetDataProvider(imgRef);
    CFMutableDataRef *data = CGDataProviderCopyData(dataProvider);
    UInt8 *buf = (UInt8 *)CFDataGetMutableBytePtr(data);

    double h,s,v;
    double c;
    double cmax,cmin;
    for (int j = 0; j < height; j++) {
        for (int i = 0; i < width; i++) {

        /////////////////////
        ///change HSV value//
        /////////////////////

        }
    }

    CFDataRef  filterData = CFDataCreate(NULL, buf, CFDataGetLength(data));
    CGDataProviderRef filterDataProvider = CGDataProviderCreateWithCFData(filterData);
    CGImageRef filterCgImage = CGImageCreate(
                                             width,
                                             height,
                                             bitsPerComponent,
                                             bitsPerPixel,
                                             bytesPerRow,
                                             colorSpace,
                                             bitmapInfo,
                                             filterDataProvider,
                                             NULL,
                                             shouldInterpolate,
                                             renderingIntent
                                             );

    UIImage *imgFinal =  [UIImage imageWithCGImage:filterCgImage];

    CFRelease(filterData);
    CGImageRelease(filterCgImage);
    CGDataProviderRelease(filterDataProvider);
    CFRelease(data);

    return imgFinal;

} 
```

# windows - 为什么 CreateProcess 给出错误 193（%1 不是有效的 Win32 应用程序）

> ID：12637203
> 
> 赞同：32
> 
> 时间：2012-09-28T09:23:40.860
> 
> 标签：windows, delphi, winapi, delphi-xe2, delphi-2007

下面的代码无法启动文档。我收到错误 193（%1 不是有效的 Win32 应用程序）。启动可执行文件工作正常。文件已正确关联，双击时它们会启动相应的应用程序。我已经在 SO 和其他地方搜索了错误消息、createprocess 内容等。（例如，[为什么 CreateProcess 在 Windows Server 2003 64 位中失败？](https://stackoverflow.com/questions/331829/why-is-createprocess-failing-in-windows-server-2003-64-bit) 我知道引用命令行。

*   这是 Win7 64 位 VMWare VM 中的 Delphi XE2（更新 4）Win32 应用程序。

*   该代码在主机（Win7 64 位）和具有 32 位 XP 的 Virtual PC VM 上也会失败。

*   应该在 Win7 VM（Excel 2003 和 Crimson Editor）中启动的应用程序是 32 位的。

*   从 IDE 启动或独立运行测试应用程序时都会发生故障

*   它曾经是 Delphi2007 代码，该代码来自的已编译 D2007 应用程序在任何地方都可以正常工作。

代码有什么问题？就好像我忽略了一些非常明显的东西......

提前致谢，

简

```
procedure StartProcess(WorkDir, Filename: string; Arguments : string = '');
var
  StartupInfo  : TStartupInfo;
  ProcessInfo  : TProcessInformation;
  lCmd         : string;
  lOK          : Boolean;
  LastErrorCode: Integer;
begin
  FillChar( StartupInfo, SizeOf( TStartupInfo ), 0 );
  StartupInfo.cb := SizeOf( TStartupInfo );
  StartupInfo.dwFlags := STARTF_USESHOWWINDOW;
  StartupInfo.wShowWindow := sw_Normal;

  FillChar( ProcessInfo, SizeOf( TProcessInformation ), 0 );

  lCmd := '"' +  WorkDir + FileName + '"';     // Quotes are needed https://stackoverflow.com/questions/265650/paths-and-createprocess
  if Arguments <> '' then lCmd := lCmd + ' ' + Arguments;

  lOk := CreateProcess(nil,
                       PChar(lCmd),
                       nil,
                       nil,
                       FALSE,  // TRUE makes no difference
                       0,      // e.g. CREATE_NEW_CONSOLE or NORMAL_PRIORITY_CLASS makes no difference
                       nil,
                       nil,    // PChar(WorkDir) makes no difference
                       StartupInfo,
                       ProcessInfo);

  if lOk then
  begin
    try
      WaitForSingleObject(ProcessInfo.hProcess, INFINITE);
    finally
      CloseHandle( ProcessInfo.hThread );
      CloseHandle( ProcessInfo.hProcess );
    end;
  end
  else
  begin
    LastErrorCode := GetLastError;
    ShowMessage(IntToStr(LastErrorCode) + ': ' + SysErrorMessage(LastErrorCode));
  end;
end;

procedure TFrmStartProcess.Button1Click(Sender: TObject);
begin
   StartProcess('c:\program files (x86)\axe3\','axe.exe');    // Works
end;

procedure TFrmStartProcess.Button2Click(Sender: TObject);
begin
   StartProcess('d:\','klad.xls');                            // Fails
end;

procedure TFrmStartProcess.Button3Click(Sender: TObject);
begin
   StartProcess('d:\','smimime.txt');                         // Fails
end; 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-28T09:34:40.767

该错误最可能的解释是：

1.  您尝试加载的文件不是可执行文件。`CreateProcess`要求您提供可执行文件。如果您希望能够使用其关联的应用程序打开任何文件，那么您需要`ShellExecute`而不是`CreateProcess`.
2.  加载可执行文件的依赖项之一时出现问题，即链接到可执行文件的 DLL。最常见的原因是 32 位可执行文件和 64 位 DLL 不匹配，反之亦然。要进行调查，请使用[Dependency Walker 的](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://www.dependencywalker.com/&ei=pG9lUNpV5tfRBcGvgMgI&usg=AFQjCNH2xHd_jlOFVUuUCGsxzdiAM2BlXg)配置文件模式来准确检查出了什么问题。

阅读到代码的底部，我可以看到问题是第 1 个问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T09:39:46.363

您的`Button2Click`and`Button3Click`函数通过`klad.xls`and `smimime.txt`。这些文件很可能确实不是实际的可执行文件。

为了使用与其关联的应用程序打开任意文件，请使用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-05-26T14:07:00.927

如果您是 Clion/anyOtherJetBrainsIDE 用户，并且***yourFile.exe***导致此问题，只需将其删除并让应用程序从头开始创建并将其与库链接。它有助于。

# c# - 克隆/复制/复制 IIS 7 中的现有应用程序池

> ID：12637209
> 
> 赞同：5
> 
> 时间：2012-09-28T09:24:07.350
> 
> 标签：c#, iis

在 PowerShell 中，可以将现有的 IIS 7 应用程序池克隆到新的应用程序池中，并在新池中保留所有源池设置。像这样...

```
import-module webadministration
copy IIS:\AppPools\AppPoolTemplate IIS:\AppPools\NewAppPool -force 
```

现在我想在 C# 中使用 Microsoft.Web.Administration 命名空间中的类来做同样的事情。我已经浏览了命名空间，但我找不到轻松做到这一点的方法。我可以调用 MemberwiseClone 方法来创建现有应用程序池的浅表副本，但我不知道这是否会复制所有原始应用程序池属性。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T10:19:26.227

到目前为止，我只发现了一种在 C# 中复制应用程序池的方法：

```
 private void creationizeAppPoolOldSchool(string strFullName)
    {
        RunspaceConfiguration runspaceConfiguration = RunspaceConfiguration.Create(); 
        Runspace runspace = RunspaceFactory.CreateRunspace(runspaceConfiguration); 
        runspace.Open(); 
        RunspaceInvoke scriptInvoker = new RunspaceInvoke(runspace);
        scriptInvoker.Invoke("Set-ExecutionPolicy Unrestricted");
        scriptInvoker.Invoke("import-module webadministration");
        string str = "copy IIS:\\AppPools\\_JANGO_FETT IIS:\\AppPools\\" + strFullName + " –force";
        scriptInvoker.Invoke(str);
    } 
```

因为我真正需要的是在所有新的应用程序池上都有一组预定义的设置，所以我实际上放弃了复制现有的模板池，而是使用`Microsoft.Web.Administration`. 虽然这不是最初的问题，但我还是分享了它，因为浏览这篇文章的人也可能对此感兴趣：

```
 public static void CreateCoCPITAppPool(string strName)
    {
        using (ServerManager serverManager = new ServerManager())
        {
            ApplicationPool newPool = serverManager.ApplicationPools.Add(strName);
            newPool.ManagedRuntimeVersion = "v4.0";
            newPool.AutoStart = true;
            newPool.ProcessModel.UserName = "username";
            newPool.ProcessModel.Password = "password";
            newPool.ProcessModel.IdentityType = ProcessModelIdentityType.SpecificUser;
            newPool.Recycling.PeriodicRestart.Time = TimeSpan.Zero;
            newPool.ProcessModel.IdleTimeout = TimeSpan.FromMinutes(10000); // .Zero;
            newPool.ProcessModel.ShutdownTimeLimit = TimeSpan.FromSeconds(3600);
            newPool.Failure.RapidFailProtection = false;
            serverManager.CommitChanges();
            IDictionary<string, string> attr = newPool.Recycling.RawAttributes;
            foreach (KeyValuePair<String, String> entry in attr)
            {
                // do something with entry.Value or entry.Key
                Console.WriteLine(entry.Key + " = " + entry.Value);
            }
            ConfigurationAttributeCollection coll = newPool.Recycling.Attributes;
            foreach (ConfigurationAttribute x in coll)
            {
                Console.WriteLine(x.Name + " = " + x.Value);
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T12:04:29.430

我不确定复制方法，但您可以访问当前应用程序池的属性，然后创建一个具有相同属性的新应用程序池：

```
// How to access a specific app pool
DirectoryEntry appPools = new DirectoryEntry("IIS://" + serverName + "/w3svc/apppools", adminUsername, adminPassword);
foreach (DirectoryEntry AppPool in appPools.Children)
{
    if (appPoolName.Equals(AppPool.Name, StringComparison.OrdinalIgnoreCase))
    {
        // access the properties of AppPool...
    }
} 
```

然后通过调用下面列出的方法在代码中创建一个新池：

```
CreateAppPool("IIS://Localhost/W3SVC/AppPools", "MyAppPool"); 
```

[来自MSDN](http://msdn.microsoft.com/en-us/library/ms525598%28v=vs.90%29.aspx)的应用程序池创建方法：

```
static void CreateAppPool(string metabasePath, string appPoolName)
{
    //  metabasePath is of the form "IIS://<servername>/W3SVC/AppPools"
    //    for example "IIS://localhost/W3SVC/AppPools" 
    //  appPoolName is of the form "<name>", for example, "MyAppPool"
    Console.WriteLine("\nCreating application pool named {0}/{1}:", metabasePath, appPoolName);

    try
    {
        if (metabasePath.EndsWith("/W3SVC/AppPools"))
        {
            DirectoryEntry apppools = new DirectoryEntry(metabasePath);
            DirectoryEntry newpool = apppools.Children.Add(appPoolName, "IIsApplicationPool");
            newpool.CommitChanges();
        }
        else
        {
            Console.WriteLine(" Failed in CreateAppPool; application pools can only be created in the */W3SVC/AppPools node.");
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine("Failed in CreateAppPool with the following exception: \n{0}", ex.Message);
    }
} 
```

# c# - 如何使用 Castle Windsor 注册通用装饰器？

> ID：12637216
> 
> 赞同：4
> 
> 时间：2012-09-28T09:24:28.793
> 
> 标签：c#, generics, dependency-injection, castle-windsor, decorator

`ICommandHandler<T>`我需要使用相应`DeadlockRetryCommandHandlerDecorator<T>`类型根据类型装饰所有内容

我尝试了这个解决方案，但不幸的是它不起作用。

```
container.Register(
    Component.For(typeof(ICommandHandler<>))
    .ImplementedBy(typeof(DeadlockRetryCommandHandlerDecorator<>)));

container.Register(
    AllTypes.FromThisAssembly()
        .BasedOn(typeof(ICommandHandler<>))
        .WithService.Base()); 
```

我如何注册一个通用装饰器（`DeadlockRetryCommandHandlerDecorator<T>`）来包装所有通用`ICommandHandler<T>`实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:49:26.837

目前不支持 OOTB，因为 Windsor 总是更喜欢模式特定组件而不是开放通用组件。

你可以很容易地让它工作`ISubDependencyResolver`。下面的代码假设您为装饰器命名组件`"DeadlockRetryCommandHandlerDecorator"`

```
public class CommandHandlerResolver : ISubDependencyResolver
{
    private readonly IKernel kernel;

    public FooResolver(IKernel kernel)
    {
        this.kernel = kernel;
    }

    public bool CanResolve(CreationContext context, ISubDependencyResolver contextHandlerResolver, ComponentModel model, DependencyModel dependency)
    {
        return (dependency.TargetType.IsGenericType &&
                dependency.TargetType.GetGenericTypeDefinition() == typeof (ICommandHandler<>)) &&
                (model.Implementation.IsGenericType == false ||
                model.Implementation.GetGenericTypeDefinition() != typeof (DeadlockRetryCommandHandlerDecorator<>));
    }

    public object Resolve(CreationContext context, ISubDependencyResolver contextHandlerResolver, ComponentModel model, DependencyModel dependency)
    {
        return kernel.Resolve("DeadlockRetryCommandHandlerDecorator", dependency.TargetItemType);
    }
} 
```

然而，使用 Windsor 实现类似场景的**推荐**方法是使用拦截器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T17:02:32.740

我遇到过同样的问题。我设法通过将每种类型显式注册为更具体的类型来解决它。对我来说，这个解决方案比使用子依赖解析器更清楚

```
var commandTypes = businessAssembly.GetTypes()
    .Where(t => !t.IsInterface && typeof(ICommand).IsAssignableFrom(t));

foreach(var commandType in commandTypes)
{
    var handlerInterface = typeof(ICommandHandler<>).MakeGenericType(new[] { commandType });
    var transactionalHandler = typeof(DeadlockRetryCommandHandlerDecorator<>).MakeGenericType(new[] { commandType });
    container.Register(Component.For(handlerInterface)
        .ImplementedBy(transactionalHandler)
        .LifeStyle.PerWebRequest);
} 
```

# c# - 向 Access 数据库添加新记录

> ID：12637219
> 
> 赞同：-3
> 
> 时间：2012-09-28T09:24:38.547
> 
> 标签：c#, ms-access-2007

> **可能重复：**
> [从 c#.net 添加记录以访问数据库时出错](https://stackoverflow.com/questions/12626977/error-while-adding-records-to-access-database-from-c-net)

我需要使用下面的代码向 Access 数据库添加一条新记录，但我得到了一个`IndexOutOfRangeException`. 我试图解决它，但我找不到解决方案。我应该如何克服这个错误？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication4
{
    public partial class Form2 : Form
    {
        public Form2()
        {
            InitializeComponent();
        }

        System.Data.OleDb.OleDbConnection con;
        DataSet ds1;
        System.Data.OleDb.OleDbDataAdapter da;
        int MaxRows = 0;
        int inc = 0;

        private void Form2_Load(object sender, EventArgs e)
        {
            con = new System.Data.OleDb.OleDbConnection();
            ds1 = new DataSet();
            con.ConnectionString ="Provider=Microsoft.ACE.OLEDB.12.0;DataSource=C:/Users/JaYam/Documents/jaya.accdb";
            string sql = "SELECT * From Table1"; 
            da = new System.Data.OleDb.OleDbDataAdapter(sql, con);
            con.Open();
            da.Fill(ds1, "Table1");
            NavigateRecords(); 
            con.Close();
            con.Dispose();
        }
        private void NavigateRecords()
        {
            DataRow drow =ds1.Tables["Table1"].Rows[0];
            textBox1.Text = drow.ItemArray.GetValue(0).ToString();
            textBox2.Text = drow.ItemArray.GetValue(1).ToString();
            textBox3.Text = drow.ItemArray.GetValue(2).ToString();
            textBox4.Text = drow.ItemArray.GetValue(3).ToString();
        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox3_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void button2_Click(object sender, EventArgs e)
        {
            textBox1.Clear();
            textBox2.Clear();
            textBox3.Clear();
            textBox4.Clear();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            con = new System.Data.OleDb.OleDbConnection();
            ds1 = new DataSet();
            con.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/JaYam/Documents/jaya.accdb";
            string sql = "SELECT * From Table1";
            da = new System.Data.OleDb.OleDbDataAdapter(sql, con);
            con.Open();
            da.Fill(ds1, "Table1");
            NavigateRecords();

            System.Data.OleDb.OleDbCommandBuilder cb;
            cb = new System.Data.OleDb.OleDbCommandBuilder(da);
            DataRow dRow = ds1.Tables["Table1"].NewRow();
            //dRow[0] = textBox1.Text;
            dRow[1] = textBox2.Text;
            dRow[2] = textBox3.Text;
            dRow[3] = textBox4.Text;
            dRow[4] = textBox4.Text;
            ds1.Tables["Table1"].Rows.Add(dRow);
            MaxRows = MaxRows + 1;
            inc = MaxRows - 1;
            da.Update(ds1, "Table1");
            MessageBox.Show("Entry Added");
            con.Close();
            con.Dispose();

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:52:48.267

您正在尝试通过 访问第五个不存在的列`dRow[4]`。4 表示您正在尝试访问第五个元素，因为在大多数编程语言中索引都是从零开始的。第一个索引是 0，第二个是 1，第三个是 2，等等。

考虑这段代码，您可以在其中获取值：

```
textBox1.Text = drow.ItemArray.GetValue(0).ToString();
textBox2.Text = drow.ItemArray.GetValue(1).ToString();
textBox3.Text = drow.ItemArray.GetValue(2).ToString();
textBox4.Text = drow.ItemArray.GetValue(3).ToString(); 
```

请注意您如何在位置 0 处获取值到`textBox1`. 当您尝试保存值时，您需要复制此行为，因此分配`dRow[0]`的值`textBox1`、`dRow[1]`的值`textBox2`等。

看起来您犯了一个简单的复制错误，因为您已经（正确地）分配了`textBox4`to的值`dRow[3]`，并且在下一行您尝试对`dRow[4]`根本不存在的列执行相同操作。

* * *

根据您的更新-您似乎正在尝试添加新行并将值分配给作为自动增量列的第 0 列。数据库将自行处理此列，您无需为其分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:35:30.067

这通常意味着您在数据库中没有任何行（因此 NavigateRecords(..) 中的 Rows[0] 实际上并不存在），或者您正在尝试获取不存在的列值。您确定该表中有 4 列吗？

# ios - 如何获得 Instagram 令牌？

> ID：12637221
> 
> 赞同：0
> 
> 时间：2012-09-28T09:24:49.373
> 
> 标签：ios, oauth, uiwebview, afnetworking, instagram

我正在尝试在 Instagram API 中获取 oauth_token。我看到了他们的文档。所以我看到获取令牌的操作是这样的：uiwebview 加载带有客户端 ID 和重定向 uri 的特殊请求 url，当用户单击“接受”时，服务器使用 CODE 重定向到我的重定向 uri。然后我必须发布收到的带有客户端 ID 和客户端密码的代码。这是我的 loginViewController 代码。我正在尝试使用 AFNetworking 发布数据。我究竟做错了什么？

我只能获取 CODE，但无法将其 POST 回获取令牌。

```
- (void)viewDidLoad
{
    [loginPage loadRequest:[NSURLRequest requestWithURL:
[NSURL URLWithString:@"https://api.instagram.com/oauth/authorize/?
client_id=MY_CLIENT_ID&redirect_uri=http://MY_REDIRECT_URI/&response_type=code"]]];

    [super viewDidLoad];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:
(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    //here I'm getting the CODE
    NSURL *clickedURL = [request URL];
    NSString *URLString = [clickedURL absoluteString];
    NSArray *tmpArr = [URLString componentsSeparatedByString:@"="];
    code = [tmpArr objectAtIndex:1];
    NSLog(@"code: %@", code); 
```

接下来做什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:41:23.850

我已经实施了几次 OAuth 并建议您使用[gtm-oauth](http://code.google.com/p/gtm-oauth/)。使用 OAuth 时，集成和处理所有可能的错误等相当容易。或者，AFNetworking 有一些 OAuth 项目正在开发中。[OAuth1](https://github.com/mattt/AFOAuth1Client) / [OAuth2](https://github.com/AFNetworking/AFOAuth2Client)

您可以自己构建，但您需要处理所有返回的错误，并构建一种在 webview 中的页面之间向后和第四次导航的方法，gtm-oauth 已经为您完成了。

# javascript - 创建 Facebook 帖子预览

> ID：12637223
> 
> 赞同：0
> 
> 时间：2012-09-28T09:25:02.950
> 
> 标签：javascript, html, css, facebook, preview

我们有一个网站，允许客户将图片和视频直接发布到他们的粉丝专页墙上。我们的一些客户要求对文本进行“发布预览”，以便他们查看在文本提交到 Facebook 后单词将如何对齐。

所以，我的工作是实现这一点，到目前为止我所做的是：

帖子文字写在`textarea`：

```
 <textarea id="fbMessage" name="message" placeholder="Enter your message here" rows="4" cols="47"></textarea> 
```

我创建了一个将用作帖子预览的 div，我将其宽度设置为类似于 Facebook 中用户内容文本的实际 div。在 div 中，我创建了一个将获取文本的段落，段落字体样式的设置与 Facebook 用户内容文本样式中的完全一样：

```
<div id="preview" style="margin: 10px auto; width:366px; background: #EDEDED; border: solid 1px #CCC; padding: 10px; word-wrap: break-word;">
   <p id="previewText" style="font-size: 13px; font-family: 'lucida grande',tahoma,verdana,arial,sans-serif;">Facebook Preview</p>          
</div> 
```

我用`word-wrap: break-word;`它来强制文本换行。

最后一件事是将文本从 复制`textarea`到预览 div 的 Javascript：

```
var form = document.getElementById('newFBForm');
var TheTextBox = document.getElementById("fbMessage");
var textAreaText = TheTextBox.value;

//Is used to preserve whitespace and new lines from the textarea to the div//    
previewText = textAreaText.replace(/\n/g, "<br/>").replace(/\s/g, "&nbsp");

document.getElementById('previewText').innerHTML = previewText; 
```

我的问题是，有时我的预览就像在 Facebook 上一样，这里有一个例子：

*   **在Facebook上：**

![在Facebook上](../Images/b0ffc63e609721e3915e3d87218baf11.png)

*   **在我的预览 div 上：**

![我的预览 div](../Images/4b234bbc1d1c93e83a809227db43e5d5.png)

但有时我会得到不同的对齐方式，这是示例：

*   **在Facebook上：**

![FB不好](../Images/ddc13ee3b45775f7fe663a47810493f4.png)

*   **在我的预览 div 上：**

![我的预览 div 2](../Images/f9f5f6d410a315ea18512c0944f059a2.png)

您可以看到*word11111111*的问题。这只是一个示例，但有不同的文本结构会产生与实际帖子不同的预览。

我错过了什么吗？或者我的实施有问题？你有想法改进它或添加一些东西吗？

**更新**

尝试使用时会发生这种情况`word-wrap: normal;`：

![ww 正常](../Images/b355a95836e5253dcee00866029f62b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:33:51.860

我建议您使用 Firebug 或类似工具来提取 Facebook 使用的确切 CSS 属性并将它们应用到您的 div 容器。这应该很容易导致您正在寻找的结果。其他 CSS 属性可能会产生轻微影响文本显示方式的副作用。

Firebug 和 Chrome 检查器允许查看所有 CSS 属性以及它们的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:33:52.003

问题是由`word-wrap: break-word;`定义引起的。改为使用`word-wrap: normal;`；单词将不再分成两行。

还要确保您`p`不会`div`通过添加`max-width: 100%;`或什至扩展您的外部`width: 100%;`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T14:04:44.217

```
//Is used to preserve whitespace and new lines from the textarea to the div//    
previewText = textAreaText.replace(/\n/g, "<br/>").replace(/\s/g, "&nbsp"); 
```

您正在用*不间断的*空格替换每个空白字符（替换 \n 后留下的） - 当然，即使使用`word-wrap:normal`...，这也会给您带来奇怪的效果，因为您实际上正在使每一行文本成为一个“单词” ”，因为*实际*单词之间的空格是不允许被打破的……</p>

# sqlite - 获取两个以上表的基本 SQL 子查询

> ID：12637229
> 
> 赞同：0
> 
> 时间：2012-09-28T09:25:15.553
> 
> 标签：sqlite

嗨，我有三个名为`airports`, `flights`,的表`checkin`。从这个表中，我需要检索一些字段，例如：

```
flight.code,
flight.start_time,
flight.end_time,
flights.start_id,
flights.endid,
airports.name as sloc,
airports.name as eloc 
```

条件是：

```
ckeckin.flight_id = flights.id,
airport.id = flights.startid, --for sloc
airports.id = flights.endid --for eloc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:45:01.343

像这样的东西？

```
select flights.code, flights.start_time, flights.end_time, 
flights.start_id, flights.endid, 
a.name as sloc, b.name as eloc
from flights
left join airports a on (flights.start_id = a.id)
left join airports b on (flights.endid = b.id) 
```

# javascript - SCRIPT438：对象不支持“创建”属性或方法 - IE9

> ID：12637233
> 
> 赞同：0
> 
> 时间：2012-09-28T09:25:24.777
> 
> 标签：javascript, internet-explorer-9

此代码片段用于创建新对象，它在 IE 9 以外的其他浏览器上运行良好。

```
function Item(no, name, qty, lineNo) {¬
       this.no = no;¬
       this.name = name;¬
       this.qty = qty;¬
       this.lineNo = lineNo;¬
     }¬
     Item.prototype = Object.create(null);¬ // error this line 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-01T07:33:39.687

根据[MSDN](https://msdn.microsoft.com/en-us/library/ie/ff925952(v=vs.94).aspx)

对象.创建：

支持以下文档模式：Internet Explorer 9 标准、Internet Explorer 10 标准和 Internet Explorer 11 标准。以下文档模式不支持：Quirks、Internet Explorer 6 标准、Internet Explorer 7 标准、Internet Explorer 8 标准。

因此，当您使用时，`IE9`请检查兼容模式是否设置为`standards`或`Quirks`。

# android - 从偏好类别Android中的链接布局获取视图

> ID：12637238
> 
> 赞同：1
> 
> 时间：2012-09-28T09:25:34.293
> 
> 标签：android, layout, view, preference

我想知道如何从首选项活动中的链接布局中获取视图。

```
<PreferenceCategory android:key="HEADER"
    android:layout="@layout/prefernce_top_layout"
    android:title="Application Settings" > 
```

我想从“prefernce_top_layout.xml”中获取视图...目前我正在这样做但无法获取视图..

```
addPreferencesFromResource(R.layout.
userProfilePic = (ImageView)this.findViewById(R.id.profile_DP_settings); 
```

请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:17:48.507

制作一个单独的 UI 并在 onCreat 方法中像这样加载它：

```
addPreferencesFromResource(R.xml.preference);
setContentView(R.layout.prefernce_top_layout); 
```

```
<RelativeLayout
    android:id="@+id/headerLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/profile_DP_settings"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_margin="10dp"
        android:src="@drawable/appicon"
        android:visibility="gone" />

    <TextView
        android:id="@+id/fbUserName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/profile_DP_settings"
        android:layout_toRightOf="@+id/profile_DP_settings"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:visibility="gone" />
</RelativeLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/headerLayout" /> 
```

# svg - 在 SVG-Mask 中重复图像

> ID：12637239
> 
> 赞同：4
> 
> 时间：2012-09-28T09:25:39.123
> 
> 标签：svg

我目前正在生成以下 SVG：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" version="1.1">
    <defs>
        <text id="txt1" y="100" font-weight="bold" font-family="Verdana" font-size="100" fill="white">Some Text</text>
        <image id="img1" x="0" y="0" width="425" height="319" opacity="1" xlink:href="http://designm.ag/images/0709/wood/71.jpg" />
    </defs>     
    <g id="group1" transform="translate(0 0) rotate(0)" opacity="1">
        <defs>
            <mask id="mask1" x="0%" y="0%" width="100%" height="100%" maskUnits="objectBoundingBox">
                <use x="0" y="0" width="1000" height="400" transform="rotate(0)" opacity="1" xlink:href="#txt1" />
            </mask>
        </defs>
        <g mask="url(#mask1)" opacity="1">
            <use x="0" y="0" width="1000" height="400" transform="rotate(0) scale(1)" opacity="1" xlink:href="#img1" />
        </g>
    </g>
</svg> 
```

（[预览](http://jsfiddle.net/uS9ha/)）

我已经缩短了 SVG 并且我知道有两个`defs`块，但这是我目前正在开发的应用程序完成的生成过程的结果。

问题是文本不是完全可见的，因为图像宽度只有 425 像素。是否有一种简单的方法（例如属性）来重复用于遮罩的图像？

如果`scale`大于 1，文本将可见，但图像会被拉伸，这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T12:53:24.390

您可以通过多种不同的方式执行此操作：

*   对文本使用图案填充（使用您想要的图像）（不需要遮罩）
*   在使用带有文本的蒙版的矩形上使用图案填充

这是一个[小提琴](http://jsfiddle.net/RfD9L/1/)，展示了如何做一个简单的模式。

模式定义：

```
<pattern patternUnits="userSpaceOnUse" id="pat1" x="10" y="10" 
 width="425" height="319">
    <image width="425" height="319" 
     xlink:href="http://designm.ag/images/0709/wood/71.jpg" />
</pattern> 
```

上述模式的用法：

```
<g mask="url(#mask1)" opacity="1">
    <rect width="1000" height="400" fill="url(#pat1)" />
</g> 
```

同样但[不使用 mask](http://jsfiddle.net/EAMmM/1/)：

```
<svg xmlns="http://www.w3.org/2000/svg" 
 xmlns:xlink="http://www.w3.org/1999/xlink" 
 viewBox="0 0 1000 360">
    <defs>
        <pattern patternUnits="userSpaceOnUse" id="pat1" x="10" y="10" 
         width="425" height="319">
            <image width="425" height="319" 
             xlink:href="http://designm.ag/images/0709/wood/71.jpg" />
        </pattern>
        <text id="txt1" y="100" font-weight="bold" font-family="Verdana" 
         font-size="100">Some Text</text>
    </defs>     

    <use width="1000" height="400" xlink:href="#txt1" fill="url(#pat1)"/>
</svg> 
```

# xquery - 无法让 Zorba Java API 在 Win XP 下工作

> ID：12637242
> 
> 赞同：0
> 
> 时间：2012-09-28T09:25:44.057
> 
> 标签：xquery, zorba

有没有人使用过 Zorba Java API，我无法让它工作。目前我被困在一个

```
1,144: static error [err:XQST0059]: "http://www.zorba-xquery.com/modules/xml-options": target namespace not found for schema/module "http://www.zorba-xquery.com/modules/xml-options.xsd": Could not create stream resource 
```

每当我尝试使用 Zorba 2.6.0 创建 XmlDataManager 实例时都会出错。

最好的问候，克里斯

# iphone - 只能在顶部选择 UIButton

> ID：12637246
> 
> 赞同：0
> 
> 时间：2012-09-28T09:26:20.783
> 
> 标签：iphone, uibutton

我有`UIButton`一个背景图像，按钮框架为（150x200），按钮将正确显示。当我尝试触摸 Button 时，除了触摸`UIButton`. 然后整个按钮被突出显示，触摸事件将被调用。我检查了框架大小、边界大小并将其设置`UserInteractionEnabled`为`YES`. 是否有特殊的 TouchFrame 或其他东西？谁能告诉如何解决这个问题？谢谢！！

这是我的代码：

```
CGRect thumbRect = CGRectMake(0, 20, 150, 200);
self.thumbButton = [[UIButton alloc] initWithFrame:thumbRect];
[self.thumbButton setBackgroundImage:firstPage.image300 forState:UIControlStateNormal];
[self.thumbButton addTarget:self action:@selector(imageClicked:) forControlEvents:UIControlEventTouchUpInside]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:29:52.793

为所有视图设置背景颜色，然后查看由于框架或您的视图而发生在该按钮上方的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:30:26.937

您应该使用该属性

```
[Button setTitleColor:[UIColor blackColor] forState:UIControlEventTouchUpInside]; 
```

你没有添加这个是吗？或者您可能在状态中添加了其他内容，例如

```
forState:UIControlEventTouchUpOutside 
```

当且仅当您在`UIButton`

请检查一下:)

# python - Python缩进；Tab = 4*空格？

> ID：12637248
> 
> 赞同：0
> 
> 时间：2012-09-28T09:26:28.153
> 
> 标签：python, indentation

另一个身份问题，但我在任何地方都没有找到这个特定的问题，所以就到这里了。

有没有一些简单的方法，或者一些好的编辑器，让我使用 tab 来创建一个 4*whitespace 标识而不是 hardtab 跳转？

我真的希望能够在编码时使用制表符，但我希望它符合 4 空白标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:28:04.790

Notepad++ (Windows), Sublime Text, vim (Unix/Linux) 等等。有很多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:28:43.987

您正在寻找一种称为“软标签”的功能，许多编辑器都提供了它。去谷歌；）

# sql - SQL Server 中值的部分更改

> ID：12637251
> 
> 赞同：0
> 
> 时间：2012-09-28T09:26:55.253
> 
> 标签：sql, sql-server-2008-r2

我在 SQL Server 2008 R2 数据库中有一个表，其中列的值属于一种类型

比如说在表格中`Date`，该列被称为`Day`

```
Monday November 17 2012 
```

我想更改所有包含`Monday`与它等效的其他语言的实例，将其更改为“我的语言中的星期一”，2012 年 11 月 17 日。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:30:58.000

1.  添加新列
2.  更新基于旧列的新列
3.  删除旧列
4.  用旧名称重命名“新”列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:35:48.073

没问题，我刚刚找到了答案：

```
UPDATE [dbo].[TimeDim]
SET [dbo].[TimeDim].Date_Name =REPLACE(Date_Name, 'Tuesday', 'Tuesday in my language')
WHERE [dbo].[TimeDim].Date_Name LIKE '%Tuesday%' 
```

# vb.net - 当您从 url 附加 pdf 时，abcpdf 不添加书签

> ID：12637252
> 
> 赞同：1
> 
> 时间：2012-09-28T09:26:57.320
> 
> 标签：vb.net, abcpdf

```
Dim mainDoc As New WebSupergoo.ABCpdf8.Doc()
Dim pdfDoc As New WebSupergoo.ABCpdf8.Doc()
mainDoc.Append(pdfDoc) 'merge page one
mainDoc.Page = mainDoc.AddPage()
mainDoc.AddHtml("<P><B>Description:</B>  Sample Desc </P><BR><BR>")
mainDoc.AddBookmark("1 Intro", True)
mainDoc.Page = mainDoc.AddPage()
mainDoc.AddHtml("<P><B>second page:</B>  Sample Desc </P><BR><BR>")
mainDoc.AddBookmark("1 second page", True)

'Everything fine till this
Dim testDoc As New WebSupergoo.ABCpdf8.Doc()
testDoc.Read("www.google.com")
mainDoc.Append(testDoc)
mainDoc.AddBookmark("3 Google page", True) 
```

'最后一个谷歌页面书签不起作用，总是指向第一页（简介）

谁能帮我这个...？。我想附加一个文档并为其添加书签。

谢谢安布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:49:05.163

得到它的工作。需要在添加书签之前为 maindoc 指定页码。

```
Dim pageNum =  mainDoc.PageCount
Dim testDoc As New WebSupergoo.ABCpdf8.Doc()
testDoc.Read("www.google.com")
mainDoc.Append(testDoc)
mainDoc.PageNumber = pageNum +1
mainDoc.AddBookmark("3 Google page", True) 
```

# .htaccess - 使用 htaccess 重定向；没有反斜杠的 404 错误

> ID：12637257
> 
> 赞同：0
> 
> 时间：2012-09-28T09:27:29.580
> 
> 标签：.htaccess

我的网站上有一个页面；

`page.php`我希望它可以通过`example.com/folder/page/`. 为此，我使用以下 htaccess 代码：

```
RewriteRule ^page$ page.php [NC,L] #remove .php
RewriteRule ^folder/page/$ http://www.example.com/page 
```

这有效。如果我导航到`example.com/folder/page/`我会显示正确的页面。问题是，当我访问`example.com/folder/page`(no `/`) 时，我收到 404 错误。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:32:43.883

只需通过添加使斜线可选**？**在你的正则表达式中

```
RewriteRule ^folder/page/?$ http://www.example.com/page 
```

# java - 如何更改 netbeans 平台中的默认字体？

> ID：12637258
> 
> 赞同：2
> 
> 时间：2012-09-28T09:27:31.047
> 
> 标签：java, swing, netbeans, fonts, uimanager

我想知道如何更改 netbeans 平台中使用的默认字体。我不是要求更改**Netbeans IDE**中的字体，而是要求更改**平台**中的字体，那么我的所有派生应用程序都将使用此默认字体。

netbeans 应用程序是一组*Jcomponent*，因此我可以轻松设置每个组件的字体，但仍然有诸如*通知*之类的东西，我无法直接访问以更改字体，所以我认为最好是更改字体默认。以编程方式或任何其他方式......也许编辑一个罐子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:46:54.260

的类型和大小`Font`因`platform`和使用的不同而不同`Look and Feel`，有这些可能性

*   [GraphicsEnvironment.getLocalGraphicsEnvironment().registerFont(font);](http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsEnvironment.html#getLocalGraphicsEnvironment%28%29)

和/或与

*   更改当前 JVM 实例[的 UIManager 中的键](https://stackoverflow.com/a/6276613/714968)

或者

*   [在运行时更改字体](https://stackoverflow.com/questions/9958004/change-font-at-runtime)

看看[@camickr 默认的 UImanager](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-24T08:20:23.767

如果您正在寻找更改平台应用程序中的**“编辑器”字体**，（我确实在我的平台应用程序中使用了一些 NB 编辑器），这就是方法。

创建一个`org-netbeans-modules-editor-settings-CustomFontsColors.xml`包含以下内容的文件，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fontscolors PUBLIC "-//NetBeans//DTD Editor Fonts and Colors settings 1.1//EN" "http://www.netbeans.org/dtds/EditorFontsColors-1_1.dtd">
<fontscolors>
    <fontcolor bgColor="white" foreColor="black" name="default">
        <font name="Noto Serif CJK JP" size="15"/>
    </fontcolor>
</fontscolors> 
```

在你的 layer.xml 文件中，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.2//EN" "http://www.netbeans.org/dtds/filesystem-1_2.dtd">
<filesystem>
     <folder name="Editors">
        <folder name="NetBeans">
            <folder name="Defaults">
                <file name="defaultColoring.xml" url="org-netbeans-modules-editor-settings-CustomFontsColors.xml"/>
            </folder>
        </folder>
     </folder>
</filesystem> 
```

就这样。

PS：你也可以在[这里查看来源](https://github.com/apache/netbeans/blob/0f2e98d513deaedccef831ee9cfc08d09f3650b6/ide/editor.settings.storage/test/unit/src/org/netbeans/modules/editor/settings/storage/test-layer.xml)

# android - 输入无效输入时如何重新显示 EditTestPreference？

> ID：12637260
> 
> 赞同：0
> 
> 时间：2012-09-28T09:27:32.297
> 
> 标签：android, edittextpreference

我的目标是android 2.1。

我有一个`EditTextPreference`允许用户输入一些值的。如果用户输入一个空值，我想在向用户显示错误消息后重新显示编辑首选项。

我可以显示错误消息，但无法重新显示`EditTextPreference`。

我的代码有点像这样：

```
public boolean onPreferenceChange(Preference preference, Object newValue) {
    final EditTextPreference editPreference = (EditTextPreference) preference;
    String value = editPreference.getText();
    if (value != null && value.trim() != "") {
        return true;
    } else {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("");
        builder.setMessage("O comando nºao pode ser vazio.");
        builder.setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

            }
        });
        builder.show();
        return false;
    }
  } 
```

# asp.net - 阻止 HyperLinkField 将 URL 转换为 ASP.Net 中的相对路径

> ID：12637261
> 
> 赞同：2
> 
> 时间：2012-09-28T09:27:36.790
> 
> 标签：asp.net, gridview

我有一个`HyperLinkField`in`GridView`包含一个路径`DataNavigateUrlFormatString`。指定的路径只是`edit.aspx`. 但是，当我在浏览器中查看网页时，我看到它被转换为相对路径，例如`../../../admin/post/edit.aspx`.

有什么方法可以阻止这种转换的发生。我希望它保持原样。我什至试过。`/edit.aspx`. 这也被转换了。把绝对部分`/admin/post/edit.aspx`工作。但我不想指定完整的路径。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:04:16.920

@Arun : this link might help you
1) [http://weblogs.asp.net/fmarguerie/archive/2004/05/05/avoiding-problems-with-relative-and-absolute-urls-in-asp-net.aspx](http://weblogs.asp.net/fmarguerie/archive/2004/05/05/avoiding-problems-with-relative-and-absolute-urls-in-asp-net.aspx)
2) [http://www.codeproject.com/Articles/142013/There-is-something-about-Paths-for-Asp-net-beginne](http://www.codeproject.com/Articles/142013/There-is-something-about-Paths-for-Asp-net-beginne)
You can also use `ResolveClientUrl("~/Home.aspx")`

# javascript - 在javascript中将儒略日期转换为太阳日期

> ID：12637268
> 
> 赞同：0
> 
> 时间：2012-09-28T09:28:13.237
> 
> 标签：javascript, datetime

我想在 JavaScript 中将公历日期转换为太阳能日期我对这个问题有一个想法，但我无法实现它。我对这个问题做了很多，但没有一个完成，请指导我这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:56:52.557

我认为公历日期是阳历而儒略日期是农历日期，无论如何，[这是一个](http://jesusnjim.com/common/julian-gregorian.html)具有这些功能的转换器，我没有尝试过，但您可以下载它，这可能会对您有所帮助。

```
function JulianToGregorianY(JulianDate); // returns Gregorian Year given Julian date
function JulianToGregorianMo(JulianDate) //returns Gregorian Month given Julian date
function JulianToGregorianD(JulianDate) //returns Gregorian Day given Julian date
function JulianToGregorianH(JulianDate) //returns Gregorian Hour given Julian date
function JulianToGregorianMi(JulianDate) //returns Gregorian Minutes given Julian date
function JulianToGregorianS(JulianDate) //returns Gregorian Seconds given Julian date
function JulianToGregorianMs(JulianDate) //returns Gregorian Milliseconds given Julian date
function JulianToGregorianFracSec(JulianDate) // returns Gregorian Seconds (fractional) given 
```

# android - 可点击的地图图像以选择一个省份

> ID：12637279
> 
> 赞同：1
> 
> 时间：2012-09-28T09:28:41.227
> 
> 标签：android, image, map, ontouchlistener, clickable

我有一张荷兰地图的图像，现在我想点击一个省份，然后转到下一个屏幕。给你一个[想法](http://irishpubs.nl/index.php?lang=0&page=1)：

我在 Google 和 Stackoverflow 上进行了搜索，并阅读了一些关于“OnTouchListener”的内容......

我需要它用于Android应用程序..

有人可以帮我开始吗？

# php - 将表单从文本转换为文本区域

> ID：12637283
> 
> 赞同：-2
> 
> 时间：2012-09-28T09:28:45.563
> 
> 标签：php, variables, textbox, textarea, forms

我创建了一个表单来将 PHP 值提取到我的数据库中。

我用所有结构创建了表格`type="text"`。以下是用于设置数据输入并确认其​​功能正常的代码。

```
<label>About Me: <input type="text" name="BIO_info"/></label> 
```

我将输入转换为文本区域并调整了一些参数以正确显示。不幸的是，它破坏了脚本运行的能力。下面是我编写的用于从文本区域输入转换和存储的代码。

```
 <label for="BIO_info" style="
        margin-bottom: 500px;
        margin-top: 2000px;
    ">About Me: 
    <textarea name="BIO_info" rows="20" cols="60" style="resize: none; overflow-y: hidden;vertical-align:middle;"></textarea>
  <p> 
```

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:36:09.127

我不确定我是否完全理解您的要求，但我使用过您想要操作 HTML 标签。如果有误，请更正：

```
$html = '<label>About Me: <input type="text" name="BIO_info"/></label>';

$xml = new SimpleXMLElement($html);
$xml->addAttribute("for", "BIO_info");
$xml->addAttribute("style", "margin-bottom: 500px; margin-top: 2000px;");

unset($xml->input);
$xml->addChild("textarea");

$xml->textarea->addAttribute("name", "BIO_info");
$xml->textarea->addAttribute("rows", "20");
$xml->textarea->addAttribute("cols", "60");
$xml->textarea->addAttribute("style", "resize: none; overflow-y: hidden;vertical-align:middle;");

print($xml->asXML()); 
```

输出

```
<label for="BIO_info" style="margin-bottom: 500px; margin-top: 2000px;">About Me: <textarea name="BIO_info" rows="20" cols="60" style="resize: none; overflow-y: hidden;vertical-align:middle;"/></label> 
```

# javascript - JavaScript 替代“for each”循环

> ID：12637289
> 
> 赞同：15
> 
> 时间：2012-09-28T09:29:14.427
> 
> 标签：javascript, for-loop, foreach

根据[for each...in loop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for_each...in)的 MDN 页面，此构造已被弃用。有没有做同样事情的替代品？[for...of 循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...of)不会迭代非整数（自己的可枚举）属性。如果没有替代方案，那么他们为什么要弃用它呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T09:30:45.597

要遍历对象的所有属性`obj`，您可以这样做：

```
for (var key in obj) {
   console.log(key, obj[key]);
} 
```

如果你想避免继承属性，你可以这样做：

```
for (var key in obj) {
   if (!obj.hasOwnProperty(key)) continue;
   console.log(key, obj[key]);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-28T09:50:06.947

您可以使用新的**ECMAScript 5th Edition**函数：

```
Object.keys(obj).forEach(function (key) {
    console.log(key, obj[key]);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T09:30:49.480

> 有没有做同样事情的替代品？

一个`for ... in`循环，你在代码块中做的第一件事就是复制`foo[propertyname]`到一个变量。

# c# - C# 在不同的机器上

> ID：12637290
> 
> 赞同：-9
> 
> 时间：2012-09-28T09:29:17.780
> 
> 标签：c#, cmd

我已经在 1 台 PC 上编写了一个程序，并且非常仔细地进行了测试，一切正常。但是当我把我的 .exe 带到另一台计算机上时，它没有我发现的问题是它记住了我的第一台计算机的路径，这很奇怪，因为我从来没有硬编码过任何东西。

该程序所做的是触发一个使用 Process.start() 运行 java 程序的 cmd；

这是结果：

javac：无效标志：C:\Users\Lan 用法：javac 使用 -help 获取可能选项的列表

C:\Users\Lan Nguyen\Desktop\TestGrader\f1>

如果你能看到 \TestGrader\f1; 这是正确的文件夹，这是我想要它去的地方。所以代码工作正常

但是如果您查看 javac: invalid flag: C:\Users\Lan; 这是我最初编写代码的另一台计算机。

我不知道为什么会这样，有人可以帮我解决它。谢谢你。顺便说一句，这与java无关，我只是想使用c#运行一个cmd，稍后将运行java。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Diagnostics;
using System.Threading;

namespace Gui
{
    public partial class GradingProgram : Form
    {
        private String[] studentName;
        private int index = 0;
        String projectName, cmd, compileJava, runJava, path, unzip;

        public GradingProgram()
        {
            studentName = new String[50];
            InitializeComponent();
            cmd = "cmd";
            unzip = "/K rar x ";
            compileJava = "/K javac ";
            button3.Enabled = false;
            this.AutoSize = true;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            FolderBrowserDialog folderChooser = new FolderBrowserDialog();
            folderChooser.ShowDialog();
            path = folderChooser.SelectedPath;            
        }

        private void updateLabels()
        {
            textBox2.Clear();
            for (int i = 0; i < index; i++)
            {
                textBox2.AppendText(studentName[i]);
                textBox2.AppendText(Environment.NewLine);
            } 
        }

        private void button2_Click(object sender, EventArgs e)
        {
            String currentDirectory;

            for (int i = 0; i < index; i++)
            {
                currentDirectory = @path + "\\" + studentName[i];
                Directory.SetCurrentDirectory(currentDirectory);
                foreach (String files in Directory.GetFiles(currentDirectory))
                {
                    if (Path.GetExtension(files) == ".java")
                    {
                        Process.Start(cmd, compileJava + files).WaitForExit();
                    }
                }
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            projectName = textBox1.Text;
            runJava = "/K java " + projectName;
            String currentDirectory;
            for (int i = 0; i < index; i++)
            {
                currentDirectory = @path + "\\" + studentName[i];
                Directory.SetCurrentDirectory(currentDirectory);
                textBox3.ScrollBars = ScrollBars.Vertical;
                foreach (String files in Directory.GetFiles(currentDirectory))
                {
                    if (Path.GetExtension(files) == ".java")
                    textBox3.Text += File.ReadAllText(files);
                    textBox3.AppendText("------------------------------------------------------------");
                }
                Process.Start(cmd, runJava).WaitForExit();
                try
                {
                    textBox4.Text = File.ReadAllText(Directory.GetCurrentDirectory() + "\\" + "output.txt");
                }
                catch (Exception )
                {
                    textBox4.Text = "no output";
                }
            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            Directory.SetCurrentDirectory(@path);
            foreach (String files in Directory.GetFiles(path))
            {
                if (Path.GetExtension(files) == ".rar")
                {
                    Process.Start(cmd, unzip + files).WaitForExit();
                }
            }

            foreach (String folder in Directory.GetDirectories(path))
            {
                studentName[index] = new DirectoryInfo(folder).Name;
                index++;
            }
            button4.Enabled = false;
        }

        private void button5_Click(object sender, EventArgs e)
        {
            updateLabels();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            if (this.Text != "")
            {
                button3.Enabled = true;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:03:19.387

你不应该使用这样的东西：

```
runJava = String.Format(@"/K java ""{0}""", projectName); 
```

因为您的用户名中的空格似乎失败了。如果您在两台计算机上都有同名的帐户，那么您还有两个 C:\Users\... 目录。

# objective-c - xcode 调用/从 Web 服务 asmx 获取数据

> ID：12637297
> 
> 赞同：0
> 
> 时间：2012-09-28T09:29:49.410
> 
> 标签：objective-c, xcode, web-services, cocoa-touch

我想使用 Xcode 4 在我的应用程序中从我的 Web 服务获取数据 任何机构都有关于 xcode - Web 服务的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:21:12.527

Cocoa 附带了一个称为 Web Services Core 的框架，该框架是专门为与 SOAP 交互而设计的。而且，与大多数 Apple 技术一样，Xcode 附带的文档（可在 developer.apple.com 上获得）有一个名为[Web Services Core Programming Guide](https://developer.apple.com/library/mac/#documentation/Networking/Conceptual/UsingWebservices/Introduction/Introduction.html)的文档。它有一个很好的介绍、大量的示例代码以及指向相应参考的链接。

如果您更喜欢使用 NSURLConnection 和 NSXMLDocument 而不是 Web 服务核心（就您必须编写多少逻辑而言，它们处于较低级别，但就自动参与 ARC 的 ObjC 对象而言，它们处于较高级别，等），Apple 的文档中有类似的指南和参考资料。没有关于如何将它们组合成一个完整的 Web 服务客户端的文档，但是如果您知道 Web 服务是如何工作的，那么您应该能够弄清楚。如果不是，那么在这两个术语上的快速 google 显示示例，例如[由 HTTP 数据驱动的 Cocoa 应用程序](http://cocoawithlove.com/2008/09/cocoa-application-driven-by-http-data.html)，这很明显。剩下的唯一部分是在基本 XML 之上进行 SOAPiness，但这是最容易的部分。

如果您一起搜索 Cocoa 和 SOAP，前两个结果，[与 Cocoa 中的基于 SOAP 的 Web 服务交互，第 1 部分和一个名为](http://macresearch.org/interacting-soap-based-web-services-cocoa-part-1)[SOAP Client](http://ditchnet.org/soapclient/)的开源 Cocoa 应用程序，它们似乎都提供了丰富的信息并且有助于您入门。

同时，完全没有强迫您使用 Apple 的课程；有很多 C（和一些 C++，如果你不介意 ObjC++）开源库，你可以在任何你认为合适的级别上自己获取和包装 ObjC。

或者……有什么理由必须在 ObjC 中？Applescript 与 Web 服务的绑定比 ObjC 的要简单得多；Python 和 Ruby 在其标准库中都带有比 Cocoa 更简单的工具；等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:37:04.650

如果您要使用 SOAP 服务，我的建议是不要......因为对于 SOAP 服务，您可以使用[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)构建基类， 但是您将从服务获得的响应将提供参考和整个数据结构以及响应，您无法解析响应。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T22:08:26.863

在此网站上上传您的网络服务链接，它将生成所需的类供您与您的 WS 一起使用 www.sudzc.com

# pdf - Postscript 的类似“pdftk multistamp”的实用程序？

> ID：12637299
> 
> 赞同：1
> 
> 时间：2012-09-28T09:29:51.407
> 
> 标签：pdf, postscript, pdftk

是否有用于 Postscript 文件的实用程序与pdf 文件的“ [pdftk multistamp](http://www.pdflabs.com/docs/pdftk-man-page/#dest-op-multistamp) ”执行相同的操作？

我正在寻找没有 ps 到 pdf 转换的解决方案，因为我担心在转换过程中会丢失数据，无论是文档质量还是“输出纸盘”信息。也许我错了，这些信息在转换过程中被保留了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:26:29.863

基本上，不，没有这样的实用程序。但是，您可以通过定义 BeginPage 或 EndPage 过程来获得相同的效果。

请注意，*任何*转换（甚至从 PostScript 到 PostScript）都可能会丢失与设备相关的信息，例如托盘选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:20:03.427

使用幽灵脚本。它适用于大多数主要操作系统。

# android - 如何在适配器列表视图中添加 onclick 按钮

> ID：12637301
> 
> 赞同：1
> 
> 时间：2012-09-28T09:29:51.873
> 
> 标签：android, android-layout, android-intent

我的项目包含包含按钮（btnList）的listView（homelistView）。

当我单击按钮（btnList）时，它必须转到另一个活动。我尝试了很多，但我没有找到一个很好的例子。

请给我一个很好的例子。单击时我的按钮（btnList）不起作用请解决我的错误和解决方案。请提前感谢您。

**编辑：**

最后经过 2 天的努力，我清楚地得到了 70% 的输出 ，看是[listview 适配器中的这个链接按钮](https://stackoverflow.com/questions/12650219/button-in-listview-adapter)

它看起来像这样

![在此处输入图像描述](../Images/d01f05587d91977387fa4eb66cad9a4f.png)

```
 --------------------------------A--
  text  text      button(btnList) B
  --------------------------------C---
  text  text      BUTTON(btnList) D
  --------------------------------E-- 
```

高效适配器.java

```
public class EfficientAdapter extends BaseAdapter implements SectionIndexer {

private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private LayoutInflater mInflater;
private Context context;
protected ListView mListView;
private int positions;
ViewHolder holder;

public EfficientAdapter(Context context) {
    mInflater = LayoutInflater.from(context);
    this.context = context;

    String patientListJson = CountriesList.jsonData;
    JSONObject jssson;
    try {
        jssson = new JSONObject(patientListJson);
        patientListJson = jssson.getString("PostPatientDetailResult");
    } catch (JSONException e) {
        e.printStackTrace();
    }
    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray Jarray = parser.parse(patientListJson).getAsJsonArray();
    patientListArray = new ArrayList<Patient>();
    for (JsonElement obj : Jarray) {
        Patient patientList = gson.fromJson(obj, Patient.class);
        patientListArray.add(patientList);
        Log.i("patientList", patientListJson);

    }
}

/**
 * sorting the patientListArray data
 */
public void sortMyData() {
    // sorting the patientListArray data
    Collections.sort(patientListArray, new Comparator<Object>() {
        @Override
        public int compare(Object o1, Object o2) {
            Patient p1 = (Patient) o1;
            Patient p2 = (Patient) o2;
            return p1.getName().compareToIgnoreCase(p2.getName());
        }

    });
}

public int getCount() {

    return patientListArray.size();
}

public Object getItem(int position) {

    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

    this.positions = position;

    if (convertView  == null) {                     
        convertView = mInflater.inflate(R.layout.homemplebrowview, parent,false);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView.findViewById(R.id.name);
        holder.text2 = (TextView) convertView.findViewById(R.id.mrn);
        holder.text3 = (TextView) convertView.findViewById(R.id.date);
        holder.text4 = (TextView) convertView.findViewById(R.id.age);
        holder.text5 = (TextView) convertView.findViewById(R.id.gender);
        holder.text6 = (TextView) convertView.findViewById(R.id.wardno);
        holder.text7 = (TextView) convertView.findViewById(R.id.roomno);
        holder.text8 = (TextView) convertView.findViewById(R.id.bedno);

        holder.btnList = (Button) convertView.findViewById(R.id.listbutton);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.text1.setText(Util.formatN2H(patientListArray.get(position)
            .getName()));
    holder.text2.setText(patientListArray.get(position).getMrnNumber());
    holder.text3.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text4.setText(Util.formatN2H(patientListArray.get(position)
            .getAge()));
    holder.text5.setText(Util.formatN2H(patientListArray.get(position)
            .getGender()));
    holder.text6.setText(Util.formatN2H(patientListArray.get(position)
            .getWard()));
    holder.text7.setText(Util.formatN2H(patientListArray.get(position)
            .getRoom()));
    holder.text8.setText(Util.formatN2H(patientListArray.get(position)
            .getBed()));

    //  holder.btnList.setOnClickListener(new OnClickListener(test));

    holder.btnList.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {                   
            Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
            Intent next = new Intent(context, Home.class);
            Log.i("next23", "next"+ next);
            context.startActivity(next);
        }
    });

    return convertView;
}

      /*OnItemClickListener test = new OnItemClickListener() {
onItemClick(AdapterView<?> parent, View view, int position, long id){
      ((TextView)view.findViewById(R.id.yourTextViewId)).getText();

  {
//    Button btnList=(Button)v.findViewById(R.id.listbutton);

    btnList.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {                   
        Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
        Intent next = new Intent(context, Home.class);
        Log.i("next23", "next"+ next);
        context.startActivity(next);
    }

});
      }

         };
      */

static class ViewHolder {
    public Button btnList;
    public TextView text8;
    public TextView text7;
    public TextView text6;
    public TextView text5;
    public TextView text4;
    public TextView text1;
    public TextView text2;
    public TextView text3;
}

@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
}

       /*public void onItemClick(AdapterView<?> arg0, View v, final int position,
          long arg3)
      {
    holder.btnList=(Button)v.findViewById(R.id.listbutton);

    holder.btnList.setOnClickListener(new OnClickListener(){
    public void onClick(View v) {                   
        Toast.makeText(context, "STAT", Toast.LENGTH_SHORT).show();
        Intent next = new Intent(context, Home.class);
        Log.i("next23", "next"+ next);
        context.startActivity(next);
    }

});
      }
        */

public int getPositionForSection(int section) {
    // sorting the patientListArray data
    sortMyData();
    // If there is no item for current section, previous section will be
    // selected
    for (int i = section; i >= 0; i--) {
        for (int j = 0; j < getCount(); j++) {
            if (i == 0) {
                // For numeric section
                for (int k = 0; k <= 9; k++) {
                    if (StringMatcher.match(
                            String.valueOf(patientListArray.get(j)
                                    .getName().charAt(0)),
                            String.valueOf(k)))
                        return j;
                }
            } else {
                if (StringMatcher.match(
                        String.valueOf(patientListArray.get(j).getName()
                                .charAt(0)),
                        String.valueOf(mSections.charAt(i))))
                    return j;
            }
        }
    }
    return 0;
}

public int getSectionForPosition(int position) {
    return 0;
}

public Object[] getSections() {
    String[] sections = new String[mSections.length()];
    for (int i = 0; i < mSections.length(); i++)
        sections[i] = String.valueOf(mSections.charAt(i));
    return sections;
}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:47:12.427

你必须做一些改变，比如

```
private String mSections = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ";
ArrayList<Patient> patientListArray;

private LayoutInflater mInflater;
private Context context;
protected ListView mListView;
private int positions;
ViewHolder holder;
private Activity activity; 
```

并在构造函数中

```
public EfficientAdapter(Activity act) {
mInflater = LayoutInflater.from(context);
//this.context = context;
this.activity = act; 
```

他们在 Intent 中更改 CONTEXT TO 活动。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:58:34.037

这个例子可以帮助你。

```
class EfficientAdapter extends BaseAdapter {
    Context con;

    public EfficientAdapter(Context con) {
        this.con = con;

    }

    @Override
    public int getCount() {

        return list.size();
    }

    @Override
    public Object getItem(int position) {

        return position;
    }

    @Override
    public long getItemId(int position) {

        return position;
    }

    @Override
    public View getView(int position, View convertView,
            ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) con
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.homemplebrowview, parent, false);

        Button row = (Button) rowView.findViewById(R.id.listbutton);

        final int n = position;
        row.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent next = new Intent(context, Home.class);
                    startActivity(next);

            }
        });

        return rowView;
    }
} 
```

# javascript - 清除 iOS 6图像缩略图

> ID：12637303
> 
> 赞同：4
> 
> 时间：2012-09-28T09:29:59.020
> 
> 标签：javascript, ios, ios6

从 iOS 6 开始，可以使用`<input type='file'>`访问照片库。我使用它通过 UIWebView 将图像上传到墙上。工作正常。

输入元素由 Apple 很好地实现，在按钮和文件名字段之间有一个小的自动生成的缩略图。

我唯一的问题是我似乎无法重置此缩略图。如果`.value`将输入的 设置为 null，则文件名将被清除（如最初所述，“未选择文件”）但缩略图仍然存在。如果我尝试`.reset()`封装输入的 html 表单也是一样的。小图不会消失！

任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T18:08:40.973

我能够对包含的表单进行重置工作。我刚刚使用附加的 webkit 检查器在我的设备上做了一个简单的测试。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>upload</title>
    <style>
    html, body {
        width: 300px;
    }
    </style>
</head>
<body>

<form id="con">
<input id="tgt" type="file" />
</form>

</body>
</html> 
```

我使用了上面的简单 html，然后在检查器中使用了以下 javascript：

```
var con = document.getElementById('con');
con.reset(); 
```

使用它为我删除了缩略图。我在这里包含了一个带有内联代码的示例：http: [//www.mixicon.com/downloads/input.html](http://www.mixicon.com/downloads/input.html)

# linux - 存储配置的位置

> ID：12637314
> 
> 赞同：0
> 
> 时间：2012-09-28T09:30:30.887
> 
> 标签：linux, unix, debian, sysadmin

我正在尝试将我的配置文件夹移动到我的 debian 服务器并将其存储在一个看起来最明智和最合乎逻辑的地方。我把所有东西都扔在家里，但现在看起来像这样：

软件： `/opt/`
网络文件：`/var/www`

但是，我必须将我的软件配置文件夹移动到服务器上的某个位置，以便它们可以符号链接到正确的位置。其中哪一个似乎最适合执行此操作：

`/home/configs`
`/var/cfgs`
或其他？

对不起，如果这看起来很迂腐，但你知道他们在说什么，所有东西都有一个位置；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:20:31.770

[根据FHS](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard)的说法，我建议使用`/etc`，这是放置特定于主机的系统范围配置的地方。

这假设该配置用于服务器应用程序（而不是由人类用户运行的应用程序）。

例如，我正在运行多个 zope 实例，其中包含配置文件

```
/etc/zope/instanceA/
/etc/zope/instanceB/
/etc/zope/test/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:37:56.073

这是一种品味……你是这台机器上唯一的用户吗？
如果是这样也没关系，你可以把所有东西都放在家里。

如果是服务器，你必须确保你的配置目录有正确的访问权限。所以 $HOME 不合适。

还有一件事，如果它是 Debian 机器，请留`/var/www`在原处。那是许多与网络相关的软件包安装东西的地方。如果您开始四处移动，以后升级这些软件包时可能会遇到问题。

为每个软件创建一个用户也是一种品味……我假设这些服务用户没有登录，所以甚至没有为他们设置一个 $HOME 的真正目的。`nologin`如果这些软件可以从其他机器访问并且您想避免有人损害这些用户，我什至会将它们设置为安全手段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:33:15.637

系统范围的配置文件永远不应位于用户的主目录中。太容易破坏，或错误修改，不当更改权限。

/etc 在您管理多个系统时会出现问题。最佳实践：将副本保存在另一个目录中，并酌情通过 scp 推送到所有适当的系统。

如果你的包不是由系统包管理器管理的，例如从源代码安装的，这也会变得困难。如果您有多个版本的软件正在运行，那就更难了。

随着系统数量和类型以及软件包和版本数量的增加，管理变得更加复杂。对于一台用户很少的机器，在 /etc 中进行配置就可以了。

举个反例：考虑是否自定义*foo*安装。假设这是您的发行版提供的一个包，但您需要一个稍微不同的版本。

在默认位置安装配置文件可能会导致它在下次系统升级时被破坏。（可能与您在 /usr/bin 中的修改版本一起）

一种常见的做法是将您添加/修改的内容与系统文件树完全分开。当我是一名练习系统管理员时，我将所有特殊的东西都放在 /opt 中。

```
/opt
/opt/bin
/opt/sbin
/opt/usr/bin
/opt/usr/sbin
/opt/man
/opt/etc 
```

这可以使内容远离系统，但并不总是清楚哪些文件属于哪个包。

具有许多可执行文件和手册页的包可能有自己的目录。Netpbm 和 ImageMagic、gnu utils、perl（模块）就是很好的例子。这为目录树增加了一个级别。

```
/opt/misc/bin #Contained anything that was one program, one man page
/opt/netpbm_2.1/bin
/opt/imagemagick_3.2/...
/opt/gnu_1.1/... 
```

以及所有其他目录。例如全套 /opt/{package-version}/{bin|sbin|man|etc|var}

```
This is especially true for packages where you need to keep multiple versions.  e.g.

/opt/perl4.023...
/opt/perl5.8... 
```

为大型包维护单独的树使切换变得容易——快速退出错误的更改。在大多数情况下，您将在用户的默认路径中保留符号链接以指向实际的二进制文件。例如 /usr/bin/perl -> /opt/perl5.8/bin/perl。这里的好做法是留下特定版本的链接。例如 /usr/bin/perl4 -> /opt/perl4.023/bin/perl

在某些地方，您需要处理多种架构。（我在一个地方有 11 个 unix 变体......）这可以为树添加另一个级别：

```
/opt/hpux/...
/opt/irix/...
/opt/sysv/...
/opt/solaris/... 
```

通常我只在 NFS 文件共享上保持这种方式，并且本地副本被制作到单独的机器上。

The advantages of the complex hierarchy is ease of maintenance. If /opt/apache contains all the binaries, man pages, and configurtion files, then if you decide to change to lighttpd, you don't end up with lighttpd getting confused with apache's configuration file. (Both are called httpd.conf)

It also will mean that when you try a package, and remove it, you don't leave a litter of stuff here and there.

Generally you will not want the data for an application to reside in their /opt/application tree.

There are disadvantages:

*   If config files and var can be separated from /opt, then /opt can be read only except for upgrades. This can simplify backups.

*   One side effect of this, is the problem of executable path maintenance. Keep systemwide dot files (.cshrc, .tcshrc, .bashrc) that make the necessary path changes so that the bulk of your users aren't aware of changes. These files are sourced from their default dot files.

# joomla - Joomla 2.5 显示错误的日期时间

> ID：12637322
> 
> 赞同：3
> 
> 时间：2012-09-28T09:30:55.657
> 
> 标签：joomla, joomla2.5

我在我制作的自定义组件中创建了此代码：

```
$date = date('m/d/Y h:i:s a', time())."<br>";
echo  'Current date and time is: ' . $date;

$date = JFactory::getDate();
echo 'Current date and time is: ' . $date->toFormat() ."<br>"; 
```

第一个代码正确显示日期时间，但第二个代码显示时间 +3 小时

我检查了 configuration.php 文件和 public $offset = 'Europe/Athens'; 并且是正确的。我也在从系统配置菜单更改设置，但似乎没有修复 JFactory::getDate() 以显示正确的时间。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T10:03:37.377

对于您的第二个参数`JFactory::getdate()`- 我认为您应该在第二个参数中指定时区，例如`JFactory::getDate($time=now, $tzOffset)`

```
$date = JFactory::getDate($input='now', 'UTC');
// Set the correct time zone based on the server configuration.
$config = JFactory::getConfig();
$date->setOffset($config->getValue('config.offset'));
//Print out Date
echo $date->toFormat(); 
```

附带说明一下，在组件中使用 JHtml::date() 可能更容易，因为这涉及更少的行并且更“Joomla 原生”。请参阅[此处](http://api.joomla.org/cms-2.5/classes/JHtml.html#method_date)的 API 页面。然后使用如下代码：

```
echo JHtml::date($input = 'now', 'm/d/Y h:i:s a', false); 
```

where `$input`= now 指定使用“现在”时间。第二个参数是你的日期格式，第三个参数表示时间设置是服务器时间。而不是用户选择的时间。

# c# - 使用通配符搜索文件夹内的文件

> ID：12637323
> 
> 赞同：2
> 
> 时间：2012-09-28T09:30:55.880
> 
> 标签：c#, asp.net, file, fileinfo

我尝试使用通配符搜索文件。我的代码是：

```
 string  SearchQuery ='';
           List<ATTFile> lstFiles = new List<ATTFile>();
            if (Directory.Exists(FilePath))
            {
                DirectoryInfo dirInfo = new DirectoryInfo(FilePath);//File PAth is not a problem.

              foreach (FileInfo file in dirInfo.GetFiles(SearchQuery + "?"))//Want help here  
              {

                    ATTFile obj = new ATTFile();
                    obj.FileName = file.Name;
                    obj.Folder = file.Directory.ToString();
                    obj.Size = int.Parse(file.Length.ToString());
                    obj.Extension = file.Extension;
                    lstFiles.Add(obj);

                }

            } 
```

如果我给出完整的文件名，代码可以工作。例如：在一个目录中，我有以下文件。

```
and.jpg
asp.jpg
bb.jpg
cc.jpg 
```

如果我给出完整的文件名，则使用上面的代码它的工作意味着它的工作`SearchQuery ="and.jpg"`。但如果我给`SearchQuery ="a"`我想要一个结果

```
and.jpg
asp.jpg 
```

以 .开始所有文件`a`。是否可以在内部使用通配符 `GetFiles(SearchQuery + "?")`。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:33:54.980

使用[DirectoryInfo.GetFiles Method (String)](http://msdn.microsoft.com/en-us/library/8he88b63.aspx)，你可以用它指定通配符

```
* - Zero or more characters.

? - Exactly one character. 
```

你可以试试：

```
dirInfo.GetFiles("a*"); 
```

而不是`?`您可以`*`在查询中使用以获取以任何其他字符开头`searchquery`和结尾的文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T09:38:01.687

您可以使用[`overload`](http://msdn.microsoft.com/en-us/library/8he88b63.aspx)采用搜索模式的 ：

```
String fileNamePart = "a";
String fileExtension= ".jpg";
String searchPattern = String.Format("{0}*{1}", fileNamePart, fileExtension);
dirInfo.GetFiles(searchPattern) 
```

如果你想要一个查询，你也可以使用 LINQ：

```
lstFiles = dirInfo.EnumerateFiles(searchPattern)
                  .Select(file => new ATTFile(){
                      FileName = file.Name;
                      Folder = file.Directory.ToString();
                      Size = int.Parse(file.Length.ToString());
                      Extension = file.Extension;
                  }).ToList(); 
```

请注意，我在[`DirectoryInfo.EnumerateFiles`](http://msdn.microsoft.com/en-us/library/dd383574.aspx)这里使用它是因为当您处理许多文件和目录时，它可以更节省资源。

# c++ - 连接资源中的定义和字符串

> ID：12637325
> 
> 赞同：4
> 
> 时间：2012-09-28T09:31:05.513
> 
> 标签：c++, c, resources, macros, concatenation

我有一个资源文件，需要用连接宏和字符串创建字符串定义，像这样

```
#define _STRINGIZE(n) #n
#define STRINGIZE(n) _STRINGIZE(n)
#define Word_ Word
100 DIALOGEX 0, 0, 172, 118
STYLE DS_SETFONT | DS_MODALFRAME | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "Hello"STRINGIZE(Word_)=>"Hello"Word" 
```

但需要没有平均引号的简单“HelloWord”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T22:09:54.477

对于任何关心的人：.rc 文件是来自 MFC 项目的资源文件，用于定义 UI 元素，例如对话框布局。它使用与 C++ 相同的预处理器，但它不共享 C++ 的语法——并且在窗口 CAPTION 字段中，两个字符串文字不会通过将它们并置来连接。在字符串文字中，两个双引号实际上是一个转义序列，它生成一个双引号字符。所以字面意思：

```
"Hello""World" 
```

最终看起来像

```
Hello"World 
```

在您的对话框窗口的标题中。

给出的示例的问题：

```
CAPTION "Hello"STRINGIZE(Word_) 
```

是不是必须删除“Hello”末尾的双引号，但预处理器不能这样做。但是，如果允许在宏中包含“Hello”，则可以进行连接。首先，我定义了这些宏：

```
#define CONCAT(a,b) a##b
#define STRINGIZE_(x) #x
#define STRINGIZE(x) STRINGIZE_(x) 
```

然后，在对话记录中：

```
 ...
EXSTYLE WS_EX_APPWINDOW
CAPTION STRINGIZE(CONCAT(Hello,World))
FONT 10, "Segoe UI Semibold", 600, 0, 0x0
  ... 
```

有了这个，对话框的标题最终看起来像**HelloWorld** —— 没有杂散的引号或任何东西。我希望你能使用这种技术。

# android - Android ros 订阅者自定义消息

> ID：12637326
> 
> 赞同：2
> 
> 时间：2012-09-28T09:31:13.137
> 
> 标签：android, ros

在我的 android 应用程序中为自定义消息创建新订阅者时遇到问题。我在 java 项目中有相同的代码，并且可以在终端中显示信息消息。

错误日志是：

```
E/UpdatePublisherRunnable(4793): java.lang.RuntimeException: java.net.UnknownHostException: Unable to resolve host "arturo-desktop": No address associated with hostname 
```

我以这种方式创建订阅者：

```
Subscriber<meta_msgs.NodesList> subscriber2 = connectedNode.newSubscriber("nodes_list", meta_msgs.NodesList._TYPE);
    subscriber2.addMessageListener(new MessageListener<meta_msgs.NodesList>() {
        @Override
        public void onNewMessage(meta_msgs.NodesList message) {
            Toast.makeText(getContext(), "OK. Message Received!!!", Toast.LENGTH_SHORT).show();
        }
      }); 
```

我的自定义消息也由自定义消息组成。以下是代码：

节点列表.msg：

```
Header header #for timestamp
NodeInfo[] nodes # an array of the nodes 
```

节点信息.msg：

```
# This message holds info of a ROS node
# 

# Possible levels of operations
byte OK=1
byte ERROR=0

string node_name # the name of the node
byte status # status of the ros node regarding master connectivity
ROSTopic[] subs
ROSTopic[] pubs
ROSParameter[] params # the parameters of the node
string[] errors # latest history of relevant messages sent to rosout from the node 
```

ROSParameter.msg：

```
string type # see OMTypes.msg for values
string name
uint8[] value 
```

ROSTopic.msg：

```
string name # name of the topic
string type # type of the message 
```

OMTypes.msg：

```
# Python format characters are used to simplify the Python code
string INTEGER=i    
string STRING=64p
string DOUBLE=d 
```

有人在使用 Android 尝试自定义消息时遇到问题吗？谢谢！它对我来说非常重要！

# c++ - 在构造函数中设置默认参数？句法

> ID：12637329
> 
> 赞同：1
> 
> 时间：2012-09-28T09:31:34.190
> 
> 标签：c++, syntax, constructor, default

我是 C++ 新手，需要一些语法帮助。

有人可以帮我弄清楚为什么我的构造函数不起作用吗？我正在创建 Stack 类的实现，除了我的 primeStack 只存储素数。我想要默认值 25。

每当我声明一个新的 primeStack 对象而不传递任何值时，我都会收到错误消息。25 不应该作为默认值工作吗？

在 .h 文件中：

```
primeStack(unsigned int size=25); 
```

在 primeStack.cpp 中：

```
primeStack::primeStack(unsigned int size=25)
{
    this->size = size;
    data = new int[size];
    top = 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:34:47.150

如果要在**.h 文件**中指定默认值，您仍然必须提供参数名称。

```
primeStack(unsigned int size = 25); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T09:33:59.130

使用完全相同的原型进行实现和定义，并为默认参数编写变量名。因此

```
primeStack(unsigned int size = 25); 
```

并在头文件中包含默认参数。编译器在编译时从那里获取值。

# javascript - Jconfirm 框中的“否”按钮不起作用

> ID：12637330
> 
> 赞同：-3
> 
> 时间：2012-09-28T09:31:34.460
> 
> 标签：javascript

> **可能重复：**
> [我可以向 jQuery“警报”添加按钮吗？](https://stackoverflow.com/questions/12636881/can-i-add-buttons-to-jquery-alert)

当我在确认框中单击确定或取消按钮时，两个按钮都会删除数据。我希望拥有的是当我单击确定时它将删除，当我单击取消时它将关闭弹出窗口并留在父页面。

我的确认框：

```
 $('#<%=delete.ClientID%>').click(function () {
        var result = confirm('Are you sure?');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:50:20.437

您需要返回确认方法

```
$('#<%=delete.ClientID%>').click(function () {
    return confirm('Are you sure?');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:52:15.463

从您的代码示例中，我看到您正在使用 ASP.net

你应该阅读这个： http: [//msdn.microsoft.com/en-us/library/bb428868.aspx](http://msdn.microsoft.com/en-us/library/bb428868.aspx) 我认为这就是你要找的。

你真正应该寻找的是你的函数的返回值。

因为 asp.net 按钮中已经有一些 javascript，所以我不确定它是否与 jquery 兼容。但这可能是您只需要做的：

```
$('#<%=delete.ClientID%>').click(function () {
    return confirm('are you sure')
}); 
```

# windows-phone-7 - 等待 HTTP 请求完成

> ID：12637333
> 
> 赞同：0
> 
> 时间：2012-09-28T09:31:40.403
> 
> 标签：windows-phone-7

我正在努力`visual studio`使用`Windows Phone`. `c#`我正在使用一个线程，一旦线程完成，我需要在其中调用函数，但我的问题是我的线程中有一个 http 调用，所以线程在 http 调用结束之前进入完成阶段。仅当该 http 调用结束时，我才需要结束线程。但是现在线程在调用 http 调用后结束，那么我该如何克服这个问题，谢谢。这是我的代码

```
void worker_DoWork(object sender, DoWorkEventArgs e)
{
    Deployment.Current.Dispatcher.BeginInvoke(() =>
    {
        handle.MakeRequest(WidgetsCallBack, WidgetsErrorCallBack, 
                           DeviceInfo.DeviceId, ApplicationSettings.Apikey);
    });
}

void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    // function which i should call only after the thread is completed.
    // (http cll should also be ended)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:11:35.770

没有看到你正在做的 http 调用，我相信你正在做一个异步调用。因此，如果您想在不同的线程中运行 http 调用，那么您可以使用许多异步方法中的任何一种（例如[DownloadStringAsync](http://msdn.microsoft.com/en-us/library/ms144202%28v=vs.95%29.aspx)）。因此，您不需要线程来实现这一目标。这有帮助吗？

**更新以提供基于以下评论的示例代码：**

因此，我将使用 WebClient 对象并以异步方式调用 URL，而不是工作人员：

```
// Creating the client object:
WebClient wc = new WebClient();

// Registering a handler to the async request completed event. The Handler method is HandleRequest and is wrapped:
wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(HandleRequest);

// Setting some header information (just to illustrate how to do it):
wc.Headers["Accept"] = "application/json";

// Making the actual call to a given URL:
wc.DownloadStringAsync(new Uri("http://stackoverflow.com")); 
```

以及处理程序方法的定义：

```
void HandleRequest(object sender, DownloadStringCompletedEventArgs e)
{
    if (!e.Cancelled && e.Error == null)
    {
         // Handle e.Result as there are no issues:
         ...
    }
} 
```

# php - 在 PHP 中的条件后，哪个嗅探空格？

> ID：12637336
> 
> 赞同：0
> 
> 时间：2012-09-28T09:32:02.653
> 
> 标签：php, codesniffer

我正在寻找或嗅探，它检测到：

```
if()
switch()
elseif() 
```

因为只有

```
if ()
switch ()
elseif () 
```

被允许！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:51:35.497

您可能可以使用`Squiz_Sniffs_ControlStructures_ControlSignatureSniff`它，它接受以下模式：

```
try {EOL...} catch (...) {EOL
do {EOL...} while (...);EOL
while (...) {EOL
for (...) {EOL
if (...) {EOL
foreach (...) {EOL
} else if (...) {EOL
} else {EOL 
```

如果您不喜欢这些签名，请`*_ControlSignaturesSniff`在其他命名空间中查找。

# python - 在 python 源代码中查找非 ascii 字节串

> ID：12637337
> 
> 赞同：1
> 
> 时间：2012-09-28T09:32:03.343
> 
> 标签：python, character-encoding

我所有的 python 源代码都以 utf-8 编码，并在文件顶部声明了此编码。

但有时`u`缺少 unicode 字符串之前。

例子`Umlauts = "üöä"`

上面是一个包含非 ascii 字符的字节串，这很麻烦（UnicodeDecodeError）。

我尝试了 pylint，`python -3`但我无法收到警告。

我搜索了一种自动方法来查找字节字符串中的非 ascii 字符。

我的源代码需要支持 Python 2.6 和 Python 2.7。

我得到这个众所周知的错误：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 7: ordinal not in range(128) 
```

顺便说一句：这个问题只是关于 python 源代码，而不是关于从文件或套接字读取的字符串。

**解决方案**

*   对于需要支持 Python 2.6+ 的项目，我将使用`__future__.unicode_literals`
*   对于需要支持 2.5 的项目，我将使用 thg435 的解决方案（模块 ast）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:34:46.300

当然，您想为此使用python！

```
import ast, re

with open("your_script.py") as fp:
    tree = ast.parse(fp.read())

for node in ast.walk(tree):
    if (isinstance(node, ast.Str) 
            and isinstance(node.s, str) 
            and  re.search(r'[\x80-\xFF]', node.s)):
        print 'bad string %r line %d col %d' % (node.s, node.lineno, node.col_offset) 
```

请注意，这不区分裸字符和转义的非 ascii 字符（`fuß`和`fu\xdf`）。

# objective-c - 有没有办法在不使用代码的情况下更改导航项的titleView

> ID：12637339
> 
> 赞同：1
> 
> 时间：2012-09-28T09:32:12.203
> 
> 标签：objective-c, xcode4.3

假设我只想通过故事板而不是编码来完成它。我想把titleView变成一个搜索栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:43:15.463

我不知道是什么得到了我，但是是的，您可以轻松地将 searchBar 添加到 navigationController Title View。

只需将该搜索栏拖到该位置即可。

看来我一定是不知何故错过了。它工作正常。我认为它以前不工作，但现在工作正常。我不确定发生了什么。

这是截图

![在此处输入图像描述](../Images/b0ab9d13d66a02765bf7682527cfcdf4.png)

注意：您只能添加 textView。似乎不是 UIView 或 UIImageView 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:44:12.097

您只需双击导航栏，即可输入文本。您输入的文本是导航栏的标题

它仅在故事板上可用。

# c++ - 错误：C1083：无法打开包含文件：'wdm.h'：没有这样的文件或目录

> ID：12637340
> 
> 赞同：2
> 
> 时间：2012-09-28T09:32:18.370
> 
> 标签：c++, winapi, qt-creator, include-path, kmdf

我正在尝试使用 qtcreator 构建此代码，我的意思是使用`RtlInitUnicodeString`和`IoCreateDevice`

```
#define _WIN32_WINNT 0x0501

#include <string>
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <tchar.h>
#include <stdio.h>
#include <qdebug.h>

#include <wdm.h>
#include <Ntifs.h>
#include <windows.h>

#define BUFSIZE MAX_PATH

int main(  )
{
    BOOL bFlag;
    TCHAR Buf[BUFSIZE];     // temporary buffer for volume name

    //create a new device

    NTSTATUS    ntStatus = STATUS_SUCCESS;
    UNICODE_STRING      deviceNameUnicodeString;
    UNICODE_STRING      deviceLINKNameUnicodeString;
    int i;

    RtlInitUnicodeString(&deviceNameUnicodeString, L"\\Device\\Harddisk0\\Partition3");
    RtlInitUnicodeString(&deviceLINKNameUnicodeString, L"\\DosDevices\\I:");

    ntStatus = IoCreateDevice ( theDriverObject,
                                0, // For driver extension
                                &deviceNameUnicodeString,
                                FILE_DEVICE_UNKNOWN,
                                FILE_DEVICE_SECURE_OPEN,
                                FALSE,
                                &g_MyDeviceI);

    IoCreateSymbolicLink (&deviceLINKNameUnicodeString, &deviceNameUnicodeString); 
```

我收到此错误：

```
erreur : C1083: Cannot open include file: 'wdm.h': No such file or directory 
```

这是我的 .pro 文件

```
SOURCES += \
    main.cpp \
    VolumeCreationWind.cpp \
    ChangePassWd.cpp \
    PasswordMountWind.cpp \
    MainWindow.cpp \
    DeviceInfos.cpp

HEADERS += \
    VolumeCreationWind.h \
    PasswordMountWind.h \
    ChangePassWd.h \
    MainWindow.h \
    DeviceInfos.h \

FORMS +=
CONFIG += release
INCLUDEPATH += C:\WinDDK\7600.16385.1\inc\ddk
INCLUDEPATH += C:\WinDDK\7600.16385.1\inc\wdf\kmdf\1.9 
```

1）如何修复包含路径的错误

2）任何人都可以为我解释使用`IoCreateDevice`和如何创建`theDriverObject`

请任何帮助！！！！提前致谢。

# ios - Cocos2d-x CCLabelTTF 在 iPad 上不工作

> ID：12637342
> 
> 赞同：2
> 
> 时间：2012-09-28T09:32:20.037
> 
> 标签：ios, cocos2d-iphone, cocos2d-x

我`CCLabelTTF`在我的一个自定义图层中制作了一个对象。

```
myLabel = CCLabelTTF::create( "Something", CCSizeMake( 300, 96 ), kCCTextAlignmentCenter, "Arial Rounded MT Bold", 48.0f ); 
```

在模拟器和 iPhone 设备中运行良好。但在 iPad 上，它不起作用。我已经在资源文件夹和`Info.plist`文件中添加了字体，但它仍然不起作用。

所以我尝试运行该`HelloWorld`层（同一个项目）。它有一个`CCLabelTTF`带`Thonburi`字体的。在 iPad 上运行良好。但是当我`Thonburi`在自己的图层中使用时，它不起作用！为什么它不能`Thonburi`在我自己的图层中显示带有字体的文本，而它可以在`HelloWorld`图层中显示？

`CCLabelTTF`这两个对象的区别是：

1.  `HelloWorld`版本是一个局部变量，而在我的层中它是一个成员变量。
2.  在我使用的图层中使用的`HelloWorld`版本`CCLabelTTF::create( text, font, size )``CCLabelTTF::create( text, dimension, alignment, font, size )`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T11:31:41.523

在 2.0 中，他们将 create 函数的 API 更改为 create(const char *string, const char *fontName, float fontSize, const CCSize& dimensions, CCTextAlignment hAlignment)

# entity-framework - 没有 DTO 的 Web API：POCO 对导航属性有奇怪的价值

> ID：12637343
> 
> 赞同：1
> 
> 时间：2012-09-28T09:32:31.017
> 
> 标签：entity-framework, asp.net-web-api

我正在开发一个 Web API 应用程序；我正在使用 VS2012 模板自动生成的 EF 5.0 和 POCO 类。延迟加载和代理生成被禁用。

当我的对象被序列化时，我发现导航属性包含在 JSON 输出中，并且值为“null”。

当我的对象被反序列化（即：对于“保存”操作）时，这些导航属性的值不是“null”，而是对象的空值。

下面是一个序列化的例子：

```
 [{"EmployeeTimeblockId":1,"EmployeeId":1,"DayOfWeek":0, "StartDate":"2012-05-    27T00:00:00", "EndDate":"2012-09- 02T00:00:00", "StartTime":"16:00:00","EndTime":"18:00:00","Notes":"null","Employee":null}] 
```

当我发回这个对象时，“Employee”字段仍然为空，反序列化程序会使用新的 Employee() 实例更改其值。这是一个问题，因为 Entity Framework 显然试图附加这个对象，而我不想要这种行为。

我的解决方法是手动将我的对象导航属性设置为 null，如下所示：

```
 var uow = new Infrastructure.Database.UnitOfWork();
        var rep = uow.EmployeeTimeblockRepository;
        e.Employee = null;
        rep.Update(e);
        uow.Save(); 
```

但这不是一个优雅的解决方案。关于如何在不使用 DTO 的情况下获得干净的反序列化对象的任何建议？

谢谢，尼古拉

# regex - 正则表达式帮助：尝试查找电子邮件地址

> ID：12637345
> 
> 赞同：0
> 
> 时间：2012-09-28T09:32:35.807
> 
> 标签：regex, regex-lookarounds

尝试使用 Eclipse 正则表达式搜索在特定用户不是 user.a@domain.com 或 user.b@domain.com 的文件中查找电子邮件地址（即anything@domain.com）。

使用下面的字符串需要找到粗体项目，而其他地址需要跳过： **bob@domain.com** ,user.b@domain.com, **andy@domain.com** ,user.a@domain.com

我已经做到了以下几点，但它并没有像我认为的那样工作。\b(?!user.b)\w*@domain.com\b

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:49:22.263

```
^(?!user\.b@domain.com|user\.a@domain.com).*[\w]+[\w]?[\w./]+@[\w_]+\.[a-zA-Z]+\.?[a-zA-Z]{2,4}$ 
```

这将找到所有电子邮件地址，无论域如何，只需继续附加到没有 `user\.b@domain.com|user\.a@domain.com|`更多电子邮件地址的列表并转义`"."`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:42:18.370

我不确定您的确切要求，但这将匹配非 user.[字母和数字]@domain.com 形式的任何内容（并且不包含`.`在左侧）。

```
(?<!user\.)\w+@domain\.com\b 
```

您的原件有几个问题：

*   . 是一个单词边界，所以你会从“user.a@domain.com”中匹配“a@domain.com”。
*   `.`正则表达式中是一个元字符，因此您必须对其进行转义。
*   您需要使用后视断言而不是简单的`(?! ... )`构造。

更新：[这是 Perl 正则表达式文档](http://perldoc.perl.org/perlre.html)。一般来说，Eclipse 遵循这一点。

**进一步更新：**为了澄清，我的代码与任何包含@左侧点的电子邮件地址都不匹配。如果您需要用点匹配其他地址，由于后视的性质，它实际上开始变得相当复杂。这个修改后的版本将匹配除用户之外的任何地址。后跟 1 到 5 个字符。

```
[\w\.]+(?<!user\.\w{1,5})@domain\.com\b 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T10:46:29.987

实际上，不鼓励使用正则表达式检查电子邮件地址，您能做的最好的事情就是发送确认电子邮件。我同意，这并不总是可能的，但这是您可以拥有的最可靠的方式。

请参阅[http://davidcelis.com/blog/2012/09/06/stop-validating-email-addresses-with-regex/](http://davidcelis.com/blog/2012/09/06/stop-validating-email-addresses-with-regex/)和随附的 reddit 讨论[http://de.reddit.com/r/programming/中的详细信息评论/zgumq/stop_validating_email_addresses_with_regex/](http://de.reddit.com/r/programming/comments/zgumq/stop_validating_email_addresses_with_regex/)

# iphone - 在 iOS 上的网页中显示泰文字符

> ID：12637346
> 
> 赞同：0
> 
> 时间：2012-09-28T09:32:42.637
> 
> 标签：iphone, html, macos, character-encoding, internationalization

我有 2 个翻译成泰语的 asp.Net Web 应用程序。

在 iOS 设备上查看时，某些字符（我们认为具有上下变音符号的字符）不会出现（正方形）。

*更新*- 字符是非 unicode - 63242、63243 等。

*更新 2*

*   在 OSX 上也会发生同样的情况，所以这是一个苹果问题。
*   字符是[http://www.fileformat.info/info/unicode/char/f70b/index.htm](http://www.fileformat.info/info/unicode/char/f70b/index.htm)和 f70a。（应该是 0e49 和 0e48？）

字符在 windows、android 等上显示正常。iOS 设备也可以很好地查看其他泰语页面（例如泰语维基百科）

我尝试了各种方法来纠正但没有运气；

*   在 html 标记中指定 lang="th"
*   将 font-family 更改为 Thonburi 和 sans-serif（这些适用于 th.wikipedia + others）
*   meta charset="UTF-8" 在头
*   *更新*字符集="TIS-620"

我错过了什么吗？iOS 如何选择与其他平台不同的字体和编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:42:42.340

有问题的字符不是有效的 Unicode，因此浏览器/操作系统将按预期呈现这些字符没有一致性。

唯一可靠的解决方案是将无效字符转换为有效字符。

# networking - 如何使设备或 PC 兼容 upnp

> ID：12637354
> 
> 赞同：0
> 
> 时间：2012-09-28T09:33:39.473
> 
> 标签：networking, network-protocols, upnp, zeroconf, mdns

电脑如何通过 upnp（或类似协议）识别设备或另一台电脑？

我想在 Windows 机器上使用 ac# 程序，它可以发现网络或直接连接中的 upnp 设备？（这应该是最容易的部分）

但是在另一台机器上必须做什么？

case1：机器支持upnp

case2：机器还不支持upnp

你能帮我解决这两个案例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T17:20:38.643

案例 1：机器将显示在从 PC 启动的设备发现上。是的，Windows“通常支持 upnp”，但没有基于它构建的通用发现应用程序。Windows Media Player 是基于 Windows UPnP 构建的专用 UPnP 发现器，但只会为您找到 MediaRenderers。您没有回答我的问题，您想在“其他机器”上找到哪些服务。您可以使用[英特尔 UPnP 开发工具](http://opentools.homeip.net/dev-tools-for-upnp)中的 DeviceSpy 。在 Windows 上工作，但不使用 Windows UPnP 堆栈 - 它有自己的。似乎在 Windows UPnP 之上构建了[一些有用的框架，这些框架非常简单。](http://managedupnp.codeplex.com/)

案例 2：有大量的 UPnP 库仅在低级操作系统功能（如套接字和文件系统）上构建。甚至已经提到的[英特尔 UPnP 开发工具](http://opentools.homeip.net/dev-tools-for-upnp)也可以为您生成堆栈。但是您至少需要决定要使用哪种语言来实现它。然后谷歌“UPnP Java”或“UPnP C++”或其他。

# php - 使用默认 HTTP 客户端 (Android) 的 Http Post 出现意外延迟

> ID：12637361
> 
> 赞同：3
> 
> 时间：2012-09-28T09:33:57.633
> 
> 标签：php, android, apache, post

我正在尝试从 android 应用程序上传文件，在服务器上处理它并获得结果。服务器端处理大约需要 10 秒，但是在 android 应用上，该过程大约需要 15 秒。我无法解释差异。

这是应用程序中代码的相关部分：

```
HttpParams params = new BasicHttpParams();
HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
HttpClient client = new DefaultHttpClient(params);
HttpPost httpPost = new HttpPost(url);
httpPost.setHeader("Authorization", getAuthString());
httpPost.setEntity(multipart);
httpPost.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
HttpResponse response;
try {
    Long start = System.currentTimeMillis();
    Log.v("Network Call", "Time start: " + start);
    response = client.execute(httpPost);
    Long end = System.currentTimeMillis();
    Log.v("Network Call", "Time end:" + end);
    Log.v("Network Call Response Time", "Time:" + (end - start));
} 
```

以上日志显示总时间约为 15 秒（在 11-17 秒之间随机变化） 在服务器上，我测量了发出 HTTP Post 请求的时间，以及 apache 完成请求所用的时间。这大约是 10 秒（基本一致）。

差异恰好是服务器php脚本结束与android客户端接收数据的时间之间的时间差。（传输的数据非常小 - < 5 个字符）

从客户端发送到服务器的其他请求（GET 请求）不会发生这种情况——总时间不到一秒，传输的数据更大（因此网络延迟和带宽似乎不是问题）

我的问题如下：

1.  我是否正确发布数据？有没有我应该调整的字段让 DefaultHttpClient 知道我需要等待 10 秒？
2.  有没有办法跟踪为什么这个网络调用在服务器完成处理请求和客户端接收请求之间需要时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:52:05.620

添加这个：

```
HttpConnectionParams.setConnectionTimeout(httpParams,
            TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC); 
```

# android - 反向地理编码：地址未显示为印度

> ID：12637369
> 
> 赞同：1
> 
> 时间：2012-09-28T09:34:29.330
> 
> 标签：android, gps, reverse-geocoding

```
Geocoder gcd = new Geocoder(this, Locale.getDefault());
            List<Address> addresses = gcd.getFromLocation(lat, lng, 100);
            StringBuilder result = new StringBuilder();
                                     if (addresses.size() > 0) {
                              Address address = addresses.get(0);
                for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
                    result.append(address.getAddressLine(i)).append("\n");
                result.append(address.getLocality()).append("\n");
                result.append(address.getPostalCode()).append("\n");
                result.append(address.getCountryName()); } 
```

我正在尝试反向地理编码并获取地址，我能够获取美国的地址，但不能获取印度的地址。知道如何破解吗？

# android - AsyncTask：onCancelled(Result) 未调用

> ID：12637370
> 
> 赞同：0
> 
> 时间：2012-09-28T09:34:30.453
> 
> 标签：android, android-asynctask

我正在取消`AsyncTask`父活动暂停时（onPaused）。我观察到的是任务已终止，但`onCancelled`从未调用过参数化版本。但是，如果我用无参数方法替换它[`onCancelled`](http://developer.android.com/reference/android/os/AsyncTask.html#onCancelled%28%29)，它总是会按预期调用。

我的代码：

```
 //In the activity
    @Override
    protected void onPause() {
       super.onPause();

       System.out.println("ON PAUSE!");

       if(lastTask != null){
           lastTask.cancel(true);
       }
    }

    //In asynctask implementation

    @Override
    protected Result doInBackground(Params... params) {
        for(int i = 0;!isCancelled();i++){
            System.out.printf(">>>>>>>>>>>>>> Doing some work. Iteration %d%n", i);
            SystemClock.sleep(1000);
        }
    }

    @Override
    protected void onCancelled(Result result){
        System.out.println("ON CANCELLED (args)!");
    } 
```

我在 android 2.2 AVD 中进行测试。

* * *

更新
根据文档，此方法是在 API 级别 11 中添加的。我正在 API lv8 虚拟设备中进行测试，但正在为 lv16 编译。所以这个方法在设备操作系统中不存在。我可能会期待一个例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:46:42.270

**在 API 级别 3 中引入了**protected void onCancelled () 。****

 **其中，在 API 级别 11 即 Android 3.0 上引入了**protected void onCancelled（结果结果） 。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:44:14.923

是在 API 级别 11 中引入的`onCancelled(Result result)`，即 Android 3.0。**

# orbeon - Orbeon Xforms：基于复选框过滤项目

> ID：12637374
> 
> 赞同：1
> 
> 时间：2012-09-28T09:34:40.640
> 
> 标签：orbeon, xforms

我在使用 Orbeon XForms 过滤项目时遇到问题。情况是我有一个绑定到实例的复选框，该实例定义为：

```
<xf:instance id="Include-model">
    <data>
        <value type="xs:string">true</value>
    </data>
</xf:instance> 
```

并且复选框被声明为：

```
<xf:select ref="instance('Include-model')/value" selection="closed" appearance="full" >
    <xf:item>
        <xf:label>Include all</xf:label>
        <xf:value>true</xf:value>
    </xf:item>
</xf:select> 
```

因此，该复选框最初被选中。

现在我在另一个实例中有一个项目列表，定义为：

```
<xf:instance id="items-model">
    <Items>
        <Item>
           <value>1</value>
           <status>Show</status>    
        </Item>
        <Item>
           <value>2</value>
           <status>Show</status>    
        </Item>
        <Item>
           <value>3</value>
           <status>Hide</status>    
        </Item>
    </Items>
</xf:instance> 
```

和关联的绑定：

```
<xforms:bind id="items-bind" nodeset="instance('items-model')Items/Item"> 
```

这些项目显示在中继器中

```
<xforms:repeat bind="items-bind" appearance="xxforms:internal">
    ..... 
```

我需要的是能够根据复选框的状态过滤项目。如果选中，则绑定应包括所有项目，如果未选中，则绑定应仅包含具有“显示”作为值的项目（如果它们的状态元素）。

请帮忙，把我剩下的头发留给我。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T00:19:10.420

首先，让我们摆脱几个问题：

```
<xforms:bind id="items-bind" nodeset="instance('items-model')Items/Item"> 
```

不是正确的 XPath 表达式。改用：

```
<xforms:bind id="items-bind" nodeset="instance('items-model')/Item"> 
```

这指向所有项目。那是因为`instance('items-model')`已经指向实例的根元素，所以`instance('items-model')`指向该`Items`元素。

第二件小事：你可能不想`appearance="xxforms:internal"`重复。这是一个扩展，用于告诉 XForms 引擎不要为给定的 XForms 控件生成 HTML 标记。它不受支持，`xforms:repeat`但最好还是用它来混淆代码。

第三件事，也是次要的：您可能不需要`type="xs:string"`注释，因为默认值被视为字符串。

最后，我不会使用以`-model`for 结尾的 id。我会`-instance`改用。另一件小事，但可能有点令人困惑。因此，我们将它们称为“主实例”和“项目实例”。

这就是说，关键是编写一个 XPath 表达式来过滤项目。现在的一个问题是您的绑定指向所有项目。所以如果你用`bind`属性引用你的绑定，它只是通过 id 引用绑定，你不能过滤。

一种解决方案是使用 Orbeon 扩展函数`xxf:bind()`，它允许您从 XPath 表达式中引用绑定：

```
xxf:bind('items-bind')[instance('main-instance')/value = 'true' or status = 'Show'] 
```

然后你的重复变成：

```
<xf:repeat ref="xxf:bind('items-bind')[instance('main-instance')/value = 'true' or status = 'Show']"> 
```

这是一个有效的完整示例：

```
<xh:html xmlns:xh="http://www.w3.org/1999/xhtml"
        xmlns:xf="http://www.w3.org/2002/xforms"
        xmlns:xxf="http://orbeon.org/oxf/xml/xforms"
        xmlns:ev="http://www.w3.org/2001/xml-events"
        xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xh:head>
        <xf:model>
            <xf:instance id="main-instance">
                <data>
                    <value>true</value>
                </data>
            </xf:instance>
            <xf:instance id="items-instance">
                <Items>
                    <Item>
                        <value>1</value>
                        <status>Show</status>
                    </Item>
                    <Item>
                        <value>2</value>
                        <status>Show</status>
                    </Item>
                    <Item>
                        <value>3</value>
                        <status>Hide</status>
                    </Item>
                </Items>
            </xf:instance>
            <xf:bind id="items-bind" nodeset="instance('items-instance')/Item"/>
        </xf:model>
    </xh:head>
    <xh:body>
        <xf:select ref="instance('main-instance')/value" appearance="full">
            <xf:item>
                <xf:label>Include all</xf:label>
                <xf:value>true</xf:value>
            </xf:item>
        </xf:select>
        <xf:repeat ref="xxf:bind('items-bind')[instance('main-instance')/value = 'true' or status = 'Show']">
            <xh:div>
                <xf:output value="concat('Value: ', value, ', status: ', status)"/>
            </xh:div>
        </xf:repeat>
    </xh:body>
</xh:html> 
```

# php - 某些字符会自动转义吗？

> ID：12637376
> 
> 赞同：0
> 
> 时间：2012-09-28T09:34:47.270
> 
> 标签：php

我正在将一些字段输入到数据库中。一个值为

```
foto's 
```

当我检查`$_POST[]`包含它的地方时

```
foto\'s 
```

这会自动发生吗？我的脚本中有（还没有）任何转义。

更新：所以这是魔术引号正在做的。php.ini 文件如下所示：

```
; Magic quotes
; 
```

所以我把它改成：

```
; Magic quotes
;

; Magic quotes for incoming GET/POST/Cookie data.
magic_quotes_gpc = Off

; Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
magic_quotes_runtime = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off

; Use Sybase-style magic quotes (escape ' with '' instead of \').
magic_quotes_sybase = Off 
```

但在 phpinfo 这仍然是：

```
magic_quotes_gpc    On  On 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:35:55.073

这可能是在行动中的[魔术语录。](http://php.net/manual/en/security.magicquotes.php)*立即*禁用它们，然后按照通常的最佳实践来正确转义用户提供的输入，具体取决于您要使用它做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:39:35.433

关闭**魔术引号**。

[单击此处](http://php.net/manual/en/security.magicquotes.disabling.php)查看如何将其关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:39:26.757

由于存在可移植性问题，请始终关闭魔术代码。

下面的 php 代码将对您有用，即使魔术引号打开，此代码也将起作用（低于 php 版本 6）：

```
function escape($string) {
    if (version_compare(phpversion(), '6', '<')) {
        if (get_magic_quotes_gpc())
            $string = stripcslashes($string);
    }
    if (!is_numeric($string))
        $string = addslashes($string);
    return $string;
} 
```

用法：

$sql = "INSERT INTO employee(id, name) VALUES(1001, '".escape($_POST['name'])."')";

希望这可以帮助。

# android - 更改方向时闪光灯关闭

> ID：12637377
> 
> 赞同：2
> 
> 时间：2012-09-28T09:34:48.333
> 
> 标签：android, camera

我创建了一个 android 应用程序，它允许用户通过按下按钮来打开和关闭闪光灯。如果用户打开闪光灯并改变方向，灯就会关闭。为什么会这样。请参阅下面我使用的代码。

```
cam = Camera.open();
    final Parameters p = cam.getParameters();

    torch_switch = (Button)findViewById(R.id.torch_switch);
    torch_switch.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            // TODO Auto-generated method stub
            if(isLightOn) {
                torch_switch.setText("Switch ON Torch");
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                cam.setParameters(p);
                cam.stopPreview();
                isLightOn = false;

            } else {
                torch_switch.setText("Switch OFF Torch");
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                cam.setParameters(p);
                cam.startPreview();
                isLightOn = true;
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:44:24.837

更改方向会导致您的应用程序破坏其当前活动，然后重新创建它，实质上是从头开始重新启动应用程序。

您可以通过禁止清单中的方向更改来修复它，或者将当前模式存储在您的“onStop”方法中，然后可能在“OnStart”中恢复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:39:33.773

最简单的方法是修复您的方向，将以下内容添加到您的清单中

```
<activity android:name=".abc" android:screenOrientation="portrait" /> 
```

这样，即使您的应用程序旋转，方向也不会改变。如果您打算处理方向变化，请寻求 Sean O'Toole 的解决方案

# ruby-on-rails - webrick 无法询问另一个 openssl

> ID：12637380
> 
> 赞同：0
> 
> 时间：2012-09-28T09:35:06.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我已经为 rubies 1.8.7 和 1.9.1 安装了 openssl 1.0.1c 要求，然后执行 rvm 重新安装这些 rubies。
安装 1.9.3-p194 后，当我尝试运行 webrick 失败时，会打印出以下消息：

`Exiting`

`~/.rvm/gems/ruby-1.9.3-p194@gem193p194/gems/activesupport-3.1.0/lib/active_support/dependencies.rb:240:in `require': ~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/openssl.so: undefined symbol: SSLv2_method - ~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/i686-linux/openssl.so (LoadError)h`

我已经阅读然后解决是必要的执行
`rvm install pkg openssl`

然后重新安装**所有**红宝石！

如果我这样做了，*我可能会丢失在 ruibes 1.8.7 和 1.9.1 上应用的所有补丁和修改* （调试 e openssl 的补丁和修改）？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T12:58:41.447

我有类似你的东西。

[RAILS，捆绑安装返回 - 未定义符号：SSLv2_method](https://stackoverflow.com/questions/12759767/rails-bundle-install-returns-undefined-symbol-sslv2-method)

就我而言，我写了这个链接：[http](http://awolf.ru/rails-on-ubuntu-with-rvm/) ://awolf.ru/rails-on-ubuntu-with-rvm/ 它是俄语的，但命令很简单。

# ios - 如何分离 iOS APNS 通知的沙箱和生产设备令牌

> ID：12637385
> 
> 赞同：8
> 
> 时间：2012-09-28T09:35:17.787
> 
> 标签：ios, notifications, apple-push-notifications

我不小心将沙盒和生产设备令牌混合在同一个数据库表中。这导致一些安装生产应用程序的设备无法收到推送通知。

如何从数据库表中分离沙盒令牌和生产令牌？非常感谢您的帮助！！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T22:24:29.290

您可能应该使用某种 UDID 来键入您的数据库表（您可以通过散列捆绑 ID 和设备的 MAC 地址来创建自己的）和一个指示令牌是“开发”还是“生产”的第二个字段“令牌。第三个字段可以是实际的令牌。

在 didRegisterForRemoteNotificationsWithDeviceToken 委托方法中的应用程序委托中，您可以添加逻辑以确定您的应用程序是在开发模式还是生产模式下运行，并使用基于 UDID 的设备令牌和应用程序运行的“模式”更新数据库。

您的代码可能如下所示：

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken 
{
// Update the device token record in our database
#if !defined (CONFIGURATION_Distribution)
   // Update the database with our development device token
#endif

#if defined (CONFIGURATION_Distribution)
   // Update the database with our production device token
#endif
} 
```

为此，您需要转到您的项目 -> 构建设置。在 Preprocessor Macros 部分输入 CONFIGURATION_ 并按 Enter。这应该为您的每个构建配置创建一个预处理器宏。在这种情况下，我的构建配置是 AdHoc、Debug、Distribution 和 Release。

它为我创建了 CONFIGURATION_AdHoc、CONFIGURATION_Debug、CONFIGURATION_Distribution 和 CONFIGURATION_Release。

# asp.net - 从 Web 应用程序调用服务时出现“无法连接到远程服务器”错误

> ID：12637388
> 
> 赞同：1
> 
> 时间：2012-09-28T09:35:30.017
> 
> 标签：asp.net, system.net.httpwebrequest

使用 Web 应用程序调用服务时出现“无法连接到远程服务器”错误。但是当我从控制台应用程序调用它时，同样的代码会运行。我只有服务的 URL。

这是堆栈跟踪：

```
at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, 
    SocketAddress socketAddress) 
at System.Net.Sockets.Socket.InternalConnect(EndPoint remoteEP) 
at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, 
    Socket s4, Socket s6, Socket& socket, IPAddress& address, 
    ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, 
    Exception& exception) 
```

这是我正在使用的代码：

```
 HttpWebRequest req = HttpWebRequest.Create(url) as HttpWebRequest; 
    req.Method = "POST"; 
    req.ContentType = "application/x-www-form-urlencoded"; 
                X509Certificate cert = X509Certificate.CreateFromCertFile(certificatePath); 
    req.ClientCertificates.Add(cert); 

  using (StreamReader sr = File.OpenText(inFilePath))   

  { 
        string xml = sr.ReadToEnd(); 
        string postRaw = string.Format("request={0}", System.Web.HttpUtility.UrlEncode(xml)); 
        byte[] buf = Encoding.UTF8.GetBytes(postRaw); 

        req.ContentLength = buf.Length; 
        try 
        { 
            Stream s = req.GetRequestStream(); //This is where I get the error. 

            s.Write(buf, 0, buf.Length); 
            s.Close(); 
        } 
        catch (Exception ex) 
        { 
        } 
    } 

    HttpWebResponse resp = req.GetResponse() as HttpWebResponse; 

    if (resp.StatusCode == HttpStatusCode.OK) 
    { 
        StringBuilder sb = new StringBuilder(); 

        using (StreamReader reader = new StreamReader(resp.GetResponseStream(),     System.Text.Encoding.UTF8)) 
        { 
            string line; 
            while ((line = reader.ReadLine()) != null) 
            { 
                sb.Append(line + "\r\n"); 
            } 
        } 

        string resXml = sb.ToString(); 
    } 
```

web.config 或 IIS 中是否有任何设置需要我提到才能在 Web 应用程序中工作？

我的一位团队成员已经问过这个问题，但目前还没有人回答。所以这就是我再次发布它的原因。

这是确切的内部异常：

> 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应 XX.XX.XXX.XXX:443

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:47:58.853

好的！所以你的网址是 SSL。

我们有两种可能：

1.  如果您在运行控制台应用程序的同一台计算机上测试 Web 应用程序，请更改应用程序池的标识。VS 使用一种身份，而 IIS 使用不同的身份。

2.  如果不检查您的 web.config 文件以获取绕过防火墙的设置

    ```
    <system.net> 
     <defaultProxy> 
      <proxy usesystemdefault="true" proxyaddress="http://proxy:port" bypassonlocal="false" /> 
     </defaultProxy> 
    </system.net> 
    ```

# java - 用于计算百分比的 Java 算法

> ID：12637391
> 
> 赞同：2
> 
> 时间：2012-09-28T09:35:41.173
> 
> 标签：java, math

我的 java 应用程序有一个小问题。

我必须计算他们完成时的分数，我使用这种方法：

```
public Float ScoreProcent(int questions, int correct){
    Float x = new Float(questions);
    Float y = new Float(correct);

    Float num = (float) (100 / questions * correct);
    return num;
} 
```

但是，当我有 38 个问题并且 38 个是正确的时，它会显示 76 个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T09:38:49.757

首先，你不应该到处使用`Float`——你想要的`float`；没有必要在这里打拳击。

其次，你根本没有使用`x`和`y`。

第三，我想说您表达方程式的方式至少令人困惑。有*可能*只是改成`x`and`y`就可以了，但我不会——我会改变你表达自己的整个方式。

第四，您在 PascalCase 中编写方法名称违反了 Java 命名约定。你也有拼写错误。

解决所有这些问题，您将以以下方式结束：

```
public static float getPercentageCorrect(int questions, int correct) {
    float proportionCorrect = ((float) correct) / ((float) questions);
    return proportionCorrect * 100;
} 
```

我实际上会概括这一点 - 它并不特定于“正确答案”，因此可用于任何总分中的分数：

```
/**
 * Returns a proportion (n out of a total) as a percentage, in a float.
 */
public static float getPercentage(int n, int total) {
    float proportion = ((float) n) / ((float) total);
    return proportion * 100;
} 
```

如评论中所述，这*可以*写成：

```
float proportion = (float) n / total; 
```

...但是你需要知道优先规则来验证它。我已经明确地包含了这两个强制转换，以明确我想在除法`float` *之前将每个操作数转换为。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T09:37:39.767

尝试这个。

```
float num = (correct * 100.0) / questions; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T09:36:46.753

```
Float num = (float) (100 / y * x); 
```

问题是您没有使用之前刚刚构建的浮动。

或者，我建议这样做：

```
public float getScorePercent(int questions, int correct){
    return 100f * correct / questions;
} 
```

通常建议避免`Float`和使用`float`，除非您确实需要对象（很少）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T09:37:16.837

尝试这个：

```
num = (float) (100 * (float) correct / (float) questions); 
```

或者

```
num = (correct * 100.0) / questions; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T09:39:44.880

使用以下内容：

```
Float num = (float) ((100  * correct) / questions); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T09:41:24.197

```
Float num = (float) (100 / questions * correct); 
```

它通过以下方式执行：

```
Float num = (float) ((100 / questions) * correct); 
```

由于`questions`and的类型`correct`是`int`，因此不考虑小数点后的值。

现在，`100 /questions = 100 / 38 = 2`并且，`num = (Float)(2 * 28)`= 76。

这就是你得到的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T09:45:58.080

没有不合理的问题。

您正在`correct`计算`questions`. 说这个的数学方法是：

```
 correct/questions 
```

现在，由于它们可以进入小数，您需要使用`Float`您在代码中提到的那个。所以：

```
 (float)correct/(float)quesions 
```

这就是你如何`cast`漂浮的东西。要获得百分比（100）的答案，它必须乘以 100，即

```
 100 * (float)correct/(float)quesions 
```

你去吧:)

要获得编码的正确方法，请听其他答案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-27T11:14:29.300

我将尝试以其他方式解释：

```
float hoursWorked = (float) 32.5;
final double HOURLY_RATE = 9.35;
double wages = HOURLY_RATE * hoursWorked;
final double TAX_RATE = 22; // percentage
double taxDue = TAX_RATE * wages / 100;
// to calculate using percentage need to divide by 100
System.out.print(taxDue); 
```

# c - C 预处理器：在#warning 中展开宏

> ID：12637392
> 
> 赞同：45
> 
> 时间：2012-09-28T09:35:45.807
> 
> 标签：c, gcc, c-preprocessor

我想在#warning 指令中打印一个宏值（扩展宏）。

例如，对于代码：

```
#define AAA 17
#warning AAA = ??? 
```

所需的编译时输出将是

```
warning: AAA = 17 
```

我用什么？？？，或者，我如何扩充代码？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-28T10:22:44.157

您可以使用预处理器指令`#pragma message`。

例子：

```
#define STR_HELPER(x) #x
#define STR(x) STR_HELPER(x)

#define AAA 123
#pragma message "content of AAA: " STR(AAA)

int main() { return 0; } 
```

输出可能如下所示：

```
$ gcc test.c
test.c:5:9: note: #pragma message: content of AAA: 123
 #pragma message("content of AAA: " STR(AAA))
         ^ 
```

以供参考：

*   [https://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html](https://gcc.gnu.org/onlinedocs/gcc/Diagnostic-Pragmas.html)
*   [https://msdn.microsoft.com/en-us/library/x7dkzch2.aspx](https://msdn.microsoft.com/en-us/library/x7dkzch2.aspx)
*   [https://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas](https://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-27T10:58:27.190

如果您真的想发出警告，以下内容也可以。但是，这取决于是否启用了 C99（适用于 gcc 4.8.2 或更高版本，未在早期版本上测试）：

```
#define N 77

#define __STRINGIFY(TEXT) #TEXT
#define __WARNING(TEXT) __STRINGIFY(GCC warning TEXT)
#define WARNING(VALUE) __WARNING(__STRINGIFY(N = VALUE))

#if N == 77
_Pragma (WARNING(N))
#endif 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-28T11:26:57.583

我不建议使用#warning，因为它不是标准的 C。此外，您想要警告但又不抛出错误的地方是什么？警告通常是编译器在您做一些可疑的事情时使用的东西，我们完全危险，但 C 标准允许。您在正常应用程序中没有这种情况，您将希望它编译完美或根本不编译。因此我会使用标准的#error 而不是非标准的#warning。

您不能键入预处理器定义的实际内容。这样的事情可能就足够了：

```
#if (AAA < SOMETHING) && (AAA > SOMETHING_ELSE)
  #error AAA is bad.
#endif 
```

我认为这对程序员来说已经足够详细了。但是，如果你*真的*想要更多细节并且你有一个现代的 C 编译器，你可以使用**static_assert**。然后你可以实现接近你想要的东西：

```
#include <assert.h>

#define xstr(s) str(s)
#define str(s) #s
#define err_msg(x) #x " is " xstr(x)

#define AAA 17

static_assert(AAA != 17, err_msg(AAA)); 
```

这个宏混乱应该打印 AAA is 17。关于这些宏如何工作的解释可以在[这里](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)找到。

我不确定 static_assert 是否包含在 C99 或 C11 中，它肯定包含在 C11 中。您可能必须使用一些 GCC 扩展来启用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T10:22:18.203

很多时候，我让我的 Makefile 生成一个包含所需定义的本地 generated.h 文件。

```
生成的.h：生成文件
        echo >generated.h "// 警告：生成的文件。改为更改 Makefile"
        date >>generated.h '+// 生成于 %Y-%m-%d %H:%M:%S'
        echo >>generated.h "#if AAA == AAA_bad"
        echo >>generated.h "#warning \"AAA = $(AAA_bad)\""
        回声>>生成.h“#endif”
```

#include "generated.h" 的需求是显而易见的。

当然，您可以在这里调整任何复杂性，但如果它变得多于几行，您可能希望将复杂性放入单独的脚本中，因为混乱的 Makefile 可能是一个可怕的维护问题。有了一点想象力，您就可以让循环从少量输入中生成大量测试。

让 generated.h 目标依赖于 Makefile 对于确保在目标中的指令发生更改时重新制作 generated.h 至关重要。如果您有一个单独的 generate.sh 脚本，它也将在依赖项列表中。

免责声明：未经真实测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T07:39:06.287

另一个简单的方法是，尤其是在处理 Makefile 项目（如 linux、u-boot、qemu、..）时，可以看到文件的预处理结果。
例如，

要查看 的预处理文件`arch/arm64/kernel/head.S`，
您可以执行 make `arch/arm64/kernel/head.s`。（小s）。

要查看的预处理文件`foo/bar/baz.c`，
您可以执行 make`foo/bar/baz.i`

宏都扩展为最终值。

# javascript - Base64 DataURL 图像的大小限制是多少？

> ID：12637395
> 
> 赞同：40
> 
> 时间：2012-09-28T09:35:53.087
> 
> 标签：javascript, html, web, base64

我想知道要在浏览器中加载的 Base64 DataURL 图像的最大长度是多少？

谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-28T09:38:03.557

在此引用[MDN](https://developer.mozilla.org/en-US/docs/data_URIs#Common_problems)：

> **长度限制**
> 
> 尽管 Mozilla 支持基本上无限长度的数据 URI，但浏览器不需要支持任何特定的最大数据长度。例如，Opera 11 浏览器将数据 URI 限制为大约 65000 个字符。

还有[caniuse.com](http://caniuse.com/#feat=datauri)，您还可以在其中查找跨浏览器的支持：

> Internet Explorer 8 中的支持仅限于图像和链接资源，如 CSS 文件，而不是 HTML 文件。IE8 中的最大 URI 长度为 32KB。在 IE9 中也支持 JavaScript 文件，最大大小限制设置为 4GB。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T09:38:43.463

并非所有浏览器都支持数据 URI 方案。IE7 及更早版本根本不支持数据 uri。IE8 有 32k 的限制。

[http://www.bennadel.com/blog/2002-Creating-Base64-Encoded-Data-URLs-For-Images-In-ColdFusion.htm](http://www.bennadel.com/blog/2002-Creating-Base64-Encoded-Data-URLs-For-Images-In-ColdFusion.htm)

# ruby-on-rails - Ruby on Rails with_option 无法调用类方法

> ID：12637397
> 
> 赞同：0
> 
> 时间：2012-09-28T09:36:02.933
> 
> 标签：ruby-on-rails, ruby, class, methods, with-statement

我在使用验证从**with_option**块调用类方法时遇到问题：

模型：

```
 class Model < ActiveRecord::Base
     attr_accessible :field

     with_options :if => "<not important>" do |step|
       ... bunch of validations
       step.validates :field, :inclusion => {:within => Model.field}
     end
  private
      def self.field
        (1..10)
      end
  end 
```

它返回：#Class:0x5f394a8 的未定义方法“字段”

*self.class.field*也不起作用。

它有什么问题？如何解决？

大大大大谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:57:36.353

啊。没关系。自己解决了。只需用 proc 或 lambda 封装 Model.field。

# java - Jackson 对象映射 - 将传入的 JSON 字段映射到基类中的受保护属性

> ID：12637400
> 
> 赞同：0
> 
> 时间：2012-09-28T09:36:10.597
> 
> 标签：java, json, rest, inheritance, jackson

我们将 Jersey/Jackson 用于我们的 REST 应用程序。传入的 JSON 字符串由 Jackson 映射到后端的 @Entity 对象以进行持久化。

问题来自我们用于所有实体的基类。它有一个受保护的 id 属性，我们也想通过 REST 交换它，这样当我们发送一个具有依赖关系的对象时，hibernate 会自动通过它们的 id 获取这些依赖关系。

然而，Jackson 不会访问 setter，即使我们在子类中将它覆盖为公共。我们也尝试使用 @JsonSetter 但无济于事。可能杰克逊只是查看基类并看到 ID 不可访问，因此它跳过设置它......

```
@MappedSuperclass
public abstract class AbstractPersistable<PK extends Serializable> implements Persistable<PK> {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private PK id;

    public PK getId() {
        return id;
    }

    protected void setId(final PK id) {
        this.id = id;
    } 
```

子类：

```
public class A extends AbstractPersistable<Long> {
    private String name;
}

public class B extends AbstractPersistable<Long> {
    private A a;

    private int value;

    // getter, setter

    // make base class setter accessible
    @Override
    @JsonSetter("id")
    public void setId(Long id) {
        super.setId(id);
    }
} 
```

现在，如果我们的数据库中有一些 As 并且我们想通过 REST 资源创建一个新 B：

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
@Transactional
public Response create(B b) {
    if (b.getA().getId() == null) 
        cry();
} 
```

使用这样的 JSON 字符串`{"a":{"id":"1","name":"foo"},"value":"123"}`。

**传入的 B 将具有 A 引用但没有 ID。**

* * *

有没有办法告诉杰克逊要么忽略基类设置器或告诉它使用子类设置器？

我刚刚发现，`@JsonTypeInfo`但我不确定这是我需要的或如何使用它。

谢谢你的帮助！

* * *

**编辑**

StaxMan 让我担心我在这里遗漏了一些东西，所以我将添加我的 servlet 配置，因为这是我能想到的唯一可能出错的地方，如果我所描述的行为实际上应该是可能的，而无需向设置器（如我的回答中所述）：

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
        com.sun.jersey.spi.spring.container.servlet.SpringServlet
    </servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>path.to.rest.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:27:16.120

所以，已经找到了解决方案：

必须`@XmlElement(name="id")`在所有覆盖的 ID 设置器上使用：

```
@XmlElement(name="id")
public void setId(Long id) {
    super.setId(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:45:33.847

不，它应该按原样工作。Jackson 序列化程序查看实际的运行时类（包括所有基类属性），并且应该看到 getter（“getId()”）。所以其他事情正在发生。

基于解决方案，我想知道您是否可能不使用基于 Jackson POJO 的映射，而是使用其他东西......

# hibernate-mapping - 如何在hibernate中为物化视图创建实体类和映射文件

> ID：12637403
> 
> 赞同：2
> 
> 时间：2012-09-28T09:36:17.927
> 
> 标签：hibernate-mapping

我需要为没有主键的 oracle 物化视图创建一个实体类，并且还需要映射 xml 文件。不知道怎么办，谁能给点建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T10:47:00.613

Hibernate/JPA 需要一个主键：

*   [没有主键的休眠](https://stackoverflow.com/questions/8591255/hibernate-without-primary-key?answertab=votes#tab-top)
*   [没有主键的表的休眠映射](https://stackoverflow.com/questions/3500222/hibernate-mapping-for-a-table-with-no-primary-key?answertab=votes#tab-top)
*   [如何在类中映射没有属性id的hibernate映射文件？](https://stackoverflow.com/questions/17106100/how-to-map-hibernate-mapping-file-without-attribute-id-in-the-class?answertab=votes#tab-top)

一种可能的解决方案是在每次刷新物化视图时以及在创建它时创建一个新的主键。您可以通过将其添加到 MV 的 create 语句中来做到这一点：

```
CREATE MATERIALIZED VIEW viewname 
...
WITH PRIMARY KEY AS
SELECT 
rawtohex(sys_guid()) as ID, 
...
FROM tablename; 
```

# xcode - didenterbackground 后如何更改状态栏？

> ID：12637405
> 
> 赞同：5
> 
> 时间：2012-09-28T09:36:22.577
> 
> 标签：xcode, apple-push-notifications, statusbar

我看到一个应用程序“睡眠周期”将状态栏颜色更改为红色并连续显示，即使应用程序在后台通过按主页按钮也是如此。我知道如何显示通知，但它不会连续显示并改变颜色。有人知道吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T11:06:52.950

它们是 3 种特殊的状态栏颜色：

*   共享连接时蓝色
*   通话处于活动状态时为绿色
*   应用程序在后台使用特殊电话功能（如麦克风）时为红色

在 iOS7 中，您可以通过以下任一方式更改应用程序中的状态栏

*   如果您有一个 navigationController，则设置 navigationBar 的 tintColor
*   或者设置一个带有 {0,0,screenWidth,20} 框架的矩形视图

# java - 从 Java 程序运行 Python 代码，我应该这样做吗？

> ID：12637406
> 
> 赞同：0
> 
> 时间：2012-09-28T09:36:24.310
> 
> 标签：java, python, jython

我有一个场景，我绘制一个网络并在基于摆动的 GUI 上设置它的所有参数，之后我必须将此网络转换为基于 python 的脚本，另一个框架读取并以虚拟机的形式实现这个网络。

例如，请看这里：

```
from mininet.topo import Topo, Node
class MyTopo( Topo ):
    def *__init__*( self, enable_all = True ):
        super( MyTopo, self ).__init__()
        Host = 1
        Switch = 2
        self.add_node( Switch, Node( is_switch=True ) )
        self.add_node( Host, Node( is_switch=False ) )
        self.add_edge( Host, Switch )
        self.enable_all()
topos = { 'mytopo': ( lambda: MyTopo() ) } 
```

它只是将 a 连接`host`到 a`switch`并在 python 框架上实现此拓扑。
现在为了在 Java GUI 上实现绘制的网络，我正在做的是：

我只是从 GUI 中获取信息并使用 Java 代码创建一个新的 python 文件，如上面的那个，然后使用 Java 中的`ProcessBuilder`Class 在 mininet 中运行这个文件，它以某种方式工作得很好。

我想知道，这是我如何做到这一点的正确和稳健的方式，还是我应该进一步研究 java-python 桥之类的场景，以便更有效或更专业。

**编辑：**

我想知道的选项是：

1.  以众所周知的格式（也许是 yaml？）序列化 GUI，可以由 python 反序列化，然后在 python 中添加其他功能以将该信息传递给该脚本。

2.  添加一个 Java-Python 桥以直接从代码中执行此操作？？

3.  还有什么想法吗？我应该做什么，或者我擅长这里正在做的任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:13:38.813

我建议使用易于阅读的跨语言数据格式，例如 JSON。Python 和 Java 对 JSON 有很好的支持。我已经使用这种技术完成了 PHP、Java 和 Python 之间的集成。您所做的类似于[代码生成](http://en.wikipedia.org/wiki/Automatic_programming)，这也是一种有效的方法，但也有其缺点。以下是两种方法的一些优点/缺点：

**代码生成的优点/缺点**

*   有时可以很容易实施
*   安全问题，一个程序正在生成代码以在另一个环境中执行，python 代码可以运行任何命令
*   没有验证，如果您的代码生成库有错误，则无法验证它的输出，因为它不是数据结构。再次出现潜在的安全问题。
*   非常强大，您基本上可以从您的 java 库中运行任何 python 代码

**数据交换（JSON）的优点/缺点**

*   可以进行验证以捕获生成中的任何数据损坏或错误
*   在 python 中更好的安全性解析 JSON 不执行任何代码，它只是加载数据结构
*   可以更容易查看，尤其是如果您[在 python 中漂亮地打印 json](http://docs.python.org/library/json.html)
*   需要你决定一些数据结构来将你的节点映射到 JSON
*   您将不得不编写一些东西来获取该数据结构并从中生成您的 Topo 和 Node 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:17:40.127

如果您的 Python 代码依赖于纯 Python 库，那么您可以使用[嵌入式 Jython](http://wiki.python.org/jython/LearningJython#embedding-jython-into-java)。

我的首选是将配置序列化为不可知格式的第一个选项。从 Java 编写 Python 源代码将很难维护。

如果您决定进行序列化，请考虑在 Java 端使用 JAXB 或类似的 XML 模式来构建严格的 XML 数据交换格式。然后，您可以使用 PyXB 将 XML 转换回 Python 对象。

# java - jre1.6.0_27 HashMap values() 源代码

> ID：12637408
> 
> 赞同：0
> 
> 时间：2012-09-28T09:36:37.727
> 
> 标签：java, hashmap

今天打开jre1.6.0_27 HashMap values()方法源码

```
 389  public Set<K> keySet()
  390  {
  391      Set localSet = this.keySet;
  392      return (this.keySet = new KeySet(null));
  393  }
  394
  395  public Collection<V> values()
  396  {
  397      Collection localCollection = this.values;
  398      return (this.values = new Values(null));
  399  } 
```

我认为这些源代码是错误的，但我不知道为什么它们看起来像这样。谁能告诉我为什么？

========================================

谢谢大家，我认为这是Eclipse的问题，这个源代码我使用Eclipse F3并去了它，所以它看起来像上面那个。

我刚打开src.zip，这个方法源码是对的。

```
/**
 * Returns a {@link Collection} view of the values contained in this map.
 * The collection is backed by the map, so changes to the map are
 * reflected in the collection, and vice-versa.  If the map is
 * modified while an iteration over the collection is in progress
 * (except through the iterator's own <tt>remove</tt> operation),
 * the results of the iteration are undefined.  The collection
 * supports element removal, which removes the corresponding
 * mapping from the map, via the <tt>Iterator.remove</tt>,
 * <tt>Collection.remove</tt>, <tt>removeAll</tt>,
 * <tt>retainAll</tt> and <tt>clear</tt> operations.  It does not
 * support the <tt>add</tt> or <tt>addAll</tt> operations.
 */
903    public Collection<V> values() {
904        Collection<V> vs = values;
905        return (vs != null ? vs : (values = new Values()));
906    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:40:37.893

至少在 OpenJDK 7 中它看起来是正确的：

```
 880       public Set<K> keySet() {
  881           Set<K> ks = keySet;
  882           return (ks != null ? ks : (keySet = new KeySet()));
  883       }

  916       public Collection<V> values() {
  917           Collection<V> vs = values;
  918           return (vs != null ? vs : (values = new Values()));
  919       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:51:36.000

为什么你认为这些方法是错误的？您必须查看内部类`KeySet`和`Values`内部的源代码`HashMap`才能了解它们是如何工作的。

该`keySet()`方法返回一个新`KeySet`对象。在 JDK 1.6.0_35 中，内部类的源代码`KeySet`如下所示：

```
private final class KeySet extends AbstractSet<K> {
    public Iterator<K> iterator() {
        return newKeyIterator();
    }
    public int size() {
        return size;
    }
    public boolean contains(Object o) {
        return containsKey(o);
    }
    public boolean remove(Object o) {
        return HashMap.this.removeEntryForKey(o) != null;
    }
    public void clear() {
        HashMap.this.clear();
    }
} 
```

这是一个`Set`从`HashMap`.

同样，有一个内部类`Values`以相同的方式工作。

# rabbitmq - MassTransit Saga - 错误和不一致

> ID：12637411
> 
> 赞同：4
> 
> 时间：2012-09-28T09:36:43.633
> 
> 标签：rabbitmq, messaging, servicebus, masstransit, saga

我已经实现了很多次都可以正常工作的公共交通传奇。但是，有时消息会进入错误队列或似乎消失了。我正在使用 RabbitMQ。

我想知道： 1\. 如何获取导致消息进入错误队列的原因/异常消息？（注意：我的处理程序逻辑位于 try-catch 块中，因此显然这些错误甚至在调用处理程序逻辑之前就发生了） 2\. 丢失消息的原因是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:29:19.320

我似乎已经弄清楚了：要获取异常，请配置 NLog（或 log4Net），添加对适当 NLogIntegration 库的引用，最后在服务总线的初始化中，包括 sbc.UseNLog(); （对于 NLog）。似乎没有在线文档涵盖此内容。必须通过查看 NLogIntegration 库的方法来弄清楚。

关于消息进入错误队列的问题，错误消息是“消息重试限制超出 rabbitmq://localhost/workers_sagas:08cf6e3e-d772-e62b-1803-73779fa60000”。显然，这是由于我使用 Saga Persistence 的 In-Memory 存储库这一事实造成的。因此，每当托管 saga 的进程重新启动时，所有尚未完成的 saga 都会导致上述错误，因为它们不再在存储库中。

# android - android主要布局和分类howto

> ID：12637417
> 
> 赞同：1
> 
> 时间：2012-09-28T09:37:04.977
> 
> 标签：android

在主布局中我想使用类似的东西

```
<PreferenceCategory
        android:summary="@string/menu_language_settings"
        android:title="@string/menu_language_settings" > 
```

但在这里我只有

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="50dp" > 
```

如何在主布局中使用类别？这在主布局中甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:39:56.740

是的，您可以在主布局 xml 中使用类别，如以下示例 xml 代码：-

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="@string/audio_quality" android:key="audio_quality">

       <EditTextPreference android:title="@string/echo_cancellation_tail"   android:key="echo_cancellation_tail" android:summary="@string/echo_cancellation_tail_desc" android:defaultValue="200" android:numeric="signed" /> 

       <ListPreference android:title="@string/echo_mode" android:key="echo_mode" android:summary="@string/echo_mode_desc" android:defaultValue="2" android:entryValues="@array/echo_mode_values" android:entries="@array/echo_mode_choices" /> 

     </PreferenceCategory>
</PreferenceScreen> 
```

否则在 res 中创建一个 xml 文件夹并为类别创建新的 xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:43:38.447

`PreferenceCategory`应该用于`PreferenceActivity`并在**/res/xml**文件夹中定义。我认为您不能在布局的 xml 中定义它。

# eclipse - 如何在参数 eclipse 末尾添加新行 [编辑器]

> ID：12637423
> 
> 赞同：1
> 
> 时间：2012-09-28T09:37:20.343
> 
> 标签：eclipse, editor

目前我的代码看起来像这样

```
holder a=new holder(a,s,c,v,b,n,q,w,e,r); 
```

我希望它看起来像这样

```
holder a=new holder(a,
                    s,
                    c,
                    v,
                    b,
                    n,
                    q,
                    w,
                    e,
                    r); 
```

剂量任何人都知道我怎么能用自动格式 ctrl+shift+f 做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:03:48.077

通过转到 Window -> Preferences 然后选择 Java -> Code Style -> Formatter 可以找到有关 Eclipse 自动格式化的所有选项。单击“编辑...”按钮并根据需要更改格式选项。

虽然我不确定您想要的参数的具体配置是否易于配置。单击 New Lines 选项卡并查看 Array Initializers 您想要的配置不可用。

它可能隐藏在其他地方，但我对此表示怀疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:44:57.037

日食 4.2

代码格式 --> 换行 --> 函数调用 --> 对象分配参数

选择“包装所有元素，新行中的每个元素”

# lucene - 在 Elastic Search 中查找带有特殊字符的子字符串

> ID：12637425
> 
> 赞同：6
> 
> 时间：2012-09-28T09:37:27.260
> 
> 标签：lucene, elasticsearch

我是弹性搜索的新手。我想按子字符串搜索，它由数字和符号（如“/”和“-”）组成。例如，我使用默认设置和一个索引字段创建一个索引：

```
curl -XPUT "http://localhost:9200/test/" -d ' {
    "mappings" : {
            "properties": {
                    "test_field": {
                            "type": "string"
                    }
            }
    }
} ' 
```

然后，我将一些数据添加到我的索引中：

```
curl -XPOST "http://localhost:9200/test/test_field" -d '{ "test_field" : "14/21-35" }'
curl -XPOST "http://localhost:9200/test/test_field" -d '{ "test_field" : "1/1-35" }'
curl -XPOST "http://localhost:9200/test/test_field" -d '{ "test_field" : "1/2-25" }' 
```

刷新索引后，我执行搜索。所以，我想找到“test_field”以“1/1”开头的数据。我的请求：

```
curl -X GET "http://localhost:9200/test/_search?pretty=true" -d '{"query":{"query_string":{"query":"1/1*"}}}' 
```

不返回任何命中。如果我删除**星**号，那么作为回应，我会看到两个点击：“1/1-35”和“1/2-25”。如果我尝试通过**反斜杠（“1\/1*”）转义****斜杠**符号，结果分别相同。

 **当我的查询中有“-”符号时，我必须转义这个 Lucene 特殊字符。所以我发送下一个搜索请求：

```
curl -X GET "http://localhost:9200/test/_search?pretty=true" -d '{"query":{"query_string":{"query":"*1\-3*"}}}' 
```

它返回解析错误。如果我双转义（“\\”）减号，那么我没有结果。

当查询包含这些字符时，我不知道搜索的执行方式。也许我做错了什么。

我尝试在我的自定义分析器中使用**nGram**过滤器，但它不适合搜索引擎的要求。

如果有人遇到这个问题，请回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T13:31:22.087

默认[分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/)将在索引时从您的数据中删除所有特殊字符。您可以使用[关键字分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-analyzer.html)，或者干脆不在索引时分析您的数据：

```
curl -XPUT "http://localhost:9200/test/" -d ' {
    "mappings" : {
            "properties": {
                    "test_field": {
                            "type": "string",
                            "index": "not_analyzed"
                    }
            }
    }
} ' 
```**

# javascript - 如何让 AngularJS 忽略 ajax OPTIONS 方法？

> ID：12637430
> 
> 赞同：4
> 
> 时间：2012-09-28T09:37:46.660
> 
> 标签：javascript, jquery, ajax, cross-domain, angularjs

当发出一个跨域的 Ajax POST 请求时，AngularJS 首先发送一个 HTTP OPTIONS 请求。jQuery 也是如此，我知道这是规范的一部分。不同之处在于，如果 OPTIONS 请求出现错误（例如，服务器不支持它，这通常是这种情况），jQuery 将继续发出 POST 请求，而 AngularJS 只是默默地失败并放弃。有没有办法强制它发出 POST 请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:46:52.720

正如 Guillaume86 所说，如果请求是跨域的，则 OPTIONS 请求（又名 preflight CORS 请求）由浏览器发送。请参阅此处的规格[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)。如果您设置缓存标头，浏览器将缓存它。例如：

```
 Access-Control-Max-Age: 1728000 
```

# javascript - 显示自上次点击以来已经过去了多长时间？

> ID：12637436
> 
> 赞同：1
> 
> 时间：2012-09-28T09:38:03.000
> 
> 标签：javascript, jquery

我想节省用户点击页面的时间。所以我可以稍后返回他多久前点击了一个函数。

我认为它基本上应该像这样工作：

```
var currentTime = new Date();
var lastClick = currentTime.getTime();
$("body").click(function () {
var lastClick = currentTime.getTime();
    });

function howlong() {
console.log('last click was: ' + currentTime.getTime() - lastClick + 'ms ago');
} 
```

但是我不能让它工作。howlong 一直返回 0。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T09:43:09.007

1.  您需要`var`从处理程序中删除 ，否则您将在本地范围内`lastClick` *再次*声明，并且您永远不会真正设置您认为的变量。

2.  实例`Date`不*更新*。它的价值*永远*是它被建造的时间；`new Date()`每次你*现在*想要一个新的时，你都必须做一个新的。

考虑到这两者，以下应该起作用；

```
var lastClick;
$("body").click(function () {
    lastClick = (new Date()).getTime();
});

function howlong() {
    console.log('last click was: ' + ((new Date()).getTime() - lastClick) + 'ms ago');
} 
```

*请*注意. _ `()`_ `new Date()`这确保了一个新的 Date 被构造，`getTime()`并被调用，而不是`Date().getTime()`被调用，然后`new`被调用（这是错误的！）。

您还必须将数学包含`-`在括号内`howlong()`，以便在字符串连接之前进行数学运算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:46:42.060

您修改后的代码[jsfiddle](http://jsfiddle.net/MSkyd/1/)

```
var  lastClick ;

$(document).click(function () {
      lastClick = Date.now();
        setTimeout(howlong, 100);//call howlong after 100 ms (this line for testing only). you can call howlong from anywhere in doc to get difference.
    });

function howlong() {
             console.log('last click was: ' +( Date.now() - lastClick ) + 'ms ago');
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:41:38.803

lastClick 仅在 jQuery 函数范围内有效。您需要在该函数之外声明它

```
var currentTime = new Date();
var lastClick;
$("body").click(function () {
lastClick = currentTime.getTime();
    });

function howlong() {
console.log('last click was: ' + currentTime.getTime() - lastClick + 'ms ago');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:41:44.247

使用全局变量：

```
 var lastEvent;

    $('selector').bind('event', function() {
            lastEvent = new Date().getTime();  //new Date() is important here
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:51:55.093

请试试这个：

```
<script>
var currentTime = new Date().getTime();
var lastClick = "";
var presentClick = "";
document.onclick=function(e){
 var evt=window.event || e 

 lastClick = currentTime;
 presentClick = new Date().getTime();

 idleTime = parseInt(presentClick) - parseInt(lastClick);
 alert("Last Click = "+lastClick+"\n\nPresent Click = "+presentClick+"\n\nIdle Time = "+idleTime+" ms.");

 currentTime = presentClick;

}
</script> 
```

# java - 升级 Hibernate Search 时未找到以下类加载器：org.hibernate.search.jpa.FullTextEntityManager

> ID：12637438
> 
> 赞同：0
> 
> 时间：2012-09-28T09:38:04.900
> 
> 标签：java, hibernate, jboss, hibernate-search, seam2

我正在尝试将我的应用程序从 Hibernate Search 3.1.1.GA 升级到 4.1.1.Final 但是在启动 jboss 实例（4.3.0.GA）时，我得到了：

```
Caused by: java.lang.NoClassDefFoundError: org/hibernate/search/jpa/FullTextEntityManager
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.privateGetPublicMethods(Class.java:2547)
    at java.lang.Class.getMethods(Class.java:1410)
    at org.jboss.seam.Component.hasAnnotation(Component.java:1161)
    at org.jboss.seam.Component.<init>(Component.java:221)
    at org.jboss.seam.Component.<init>(Component.java:208)
    at org.jboss.seam.init.Initialization.addComponent(Initialization.java:1186)
    ... 131 more
Caused by: java.lang.ClassNotFoundException: No ClassLoaders found for: org.hibernate.search.jpa.FullTextEntityManager
    at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:306)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:514)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:408)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 139 more
11:39:08,146 ERROR [StandardContext] Error listenerStart 
```

**应用程序.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/application_5.xsd"
             version="5">

    <display-name>MY</display-name>
    <module id="EJB3">
        <ejb>EJB3.jar</ejb>
    </module>
    <module id="WEB">
        <web>
            <web-uri>WEB.war</web-uri>
            <context-root>/</context-root>
        </web>
    </module>
    <module>
        <ejb>jboss-seam-2.2.2.Final.jar</ejb>
    </module>

</application> 
```

**班上：**

```
import javax.persistence.EntityManager;
import java.io.Serializable;

/**
 * IndexUtils contains lucene and hibernate search related utilities.
 * Legacy name.
 */
@Name("indexUtils")
@AutoCreate
@Scope(ScopeType.SESSION)
public class IndexUtils implements Serializable {

    public final static Log log = LogFactory.getLog(IndexUtils.class);

    /**
     * Will convert an entityManager to a FullTextEntityManager.
     * @param entityManager The entityManager to convert
     * @return A FullTextEntityManager
     */
    public static FullTextEntityManager getFullTextEntityManager(EntityManager entityManager) {
        if (entityManager instanceof FullTextEntityManager)
            return (FullTextEntityManager) entityManager;
        else
            return Search.getFullTextEntityManager(entityManager);
    }

    /**
     * Will index a company a new. Also lastModified will be updated as part of this.
     * @param company       The company to reindex
     * @param entityManager
     */
    private void reindex(Company company, EntityManager entityManager) {
        log.warn("--------------->>> Reindexing company " + company.getName());
        getFullTextEntityManager(entityManager).index(company);
        company.getMeta().updateTimestamp();
    }

    private void reindexWithoutModifyingLastUpdated(Company company, EntityManager entityManager) {
        log.warn("--------------->>> Reindexing without updating lastModified: " + company.getName());
        getFullTextEntityManager(entityManager).index(company);
    }    
} 
```

堆栈跟踪：

```
11:18:54,816 INFO  [ServletContextListener] Welcome to Seam 2.2.2.Final
org.jboss.deployment.DeploymentException: URL file:/Users/kalle/Projects/My/cleanup/target/my.ear/WEB.war/ deployment failed
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:376)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:108)
    at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
    at org.jboss.web.WebModule.startModule(WebModule.java:83)
    at org.jboss.web.WebModule.startService(WebModule.java:61)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy44.start(Unknown Source)
    at org.jboss.web.AbstractWebContainer.start(AbstractWebContainer.java:466)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:97)
    at org.jboss.system.InterceptorServiceMBeanSupport.invokeNext(InterceptorServiceMBeanSupport.java:238)
    at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:87)
    at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
    at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy45.start(Unknown Source)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1015)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.jmx.connector.invoker.InvokerAdaptorService.invoke(InvokerAdaptorService.java:266)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.jmx.connector.invoker.SerializableInterceptor.invoke(SerializableInterceptor.java:74)
    at org.jboss.jmx.connector.invoker.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:108)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:818)
    at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:419)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
[2012-09-28 11:18:59,677] Artifact my:ear exploded: Error during artifact deployment. See server log for details.
11:18:59,630 ERROR [ContainerBase] Exception sending context initialized event to listener instance of class org.jboss.seam.servlet.SeamListener
java.lang.RuntimeException: Could not create Component: indexUtils
    at org.jboss.seam.init.Initialization.addComponent(Initialization.java:1202)
    at org.jboss.seam.init.Initialization.installComponents(Initialization.java:1118)
    at org.jboss.seam.init.Initialization.init(Initialization.java:737)
    at org.jboss.seam.servlet.SeamListener.contextInitialized(SeamListener.java:36)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3854)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4352)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:752)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:732)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:553)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.apache.catalina.core.StandardContext.init(StandardContext.java:5300)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeployInternal(TomcatDeployer.java:295)
    at org.jboss.web.tomcat.service.TomcatDeployer.performDeploy(TomcatDeployer.java:108)
    at org.jboss.web.AbstractWebDeployer.start(AbstractWebDeployer.java:375)
    at org.jboss.web.WebModule.startModule(WebModule.java:83)
    at org.jboss.web.WebModule.startService(WebModule.java:61)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor10.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy44.start(Unknown Source)
    at org.jboss.web.AbstractWebContainer.start(AbstractWebContainer.java:466)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.interceptor.DynamicInterceptor.invoke(DynamicInterceptor.java:97)
    at org.jboss.system.InterceptorServiceMBeanSupport.invokeNext(InterceptorServiceMBeanSupport.java:238)
    at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:87)
    at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
    at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy45.start(Unknown Source)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1015)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at sun.reflect.GeneratedMethodAccessor24.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.jmx.connector.invoker.InvokerAdaptorService.invoke(InvokerAdaptorService.java:266)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.jmx.connector.invoker.SerializableInterceptor.invoke(SerializableInterceptor.java:74)
    at org.jboss.jmx.connector.invoker.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:108)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:818)
    at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:419)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/search/jpa/FullTextEntityManager
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.privateGetPublicMethods(Class.java:2547)
    at java.lang.Class.getMethods(Class.java:1410)
    at org.jboss.seam.Component.hasAnnotation(Component.java:1161)
    at org.jboss.seam.Component.<init>(Component.java:221)
    at org.jboss.seam.Component.<init>(Component.java:208)
    at org.jboss.seam.init.Initialization.addComponent(Initialization.java:1186)
    ... 131 more
Caused by: java.lang.ClassNotFoundException: No ClassLoaders found for: org.hibernate.search.jpa.FullTextEntityManager
    at org.jboss.mx.loading.LoadMgr3.beginLoadTask(LoadMgr3.java:306)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClassImpl(RepositoryClassLoader.java:514)
    at org.jboss.mx.loading.RepositoryClassLoader.loadClass(RepositoryClassLoader.java:408)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 139 more
11:18:59,630 ERROR [StandardContext] Error listenerStart
11:18:59,630 ERROR [StandardContext] Context [] startup failed due to previous errors 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T22:00:16.483

JBoss 4.3.0 包含一个相当旧的 Hibernate Core 版本，我认为是 v. 3.2.xx

Hibernate Search 4.1.1.Final 需要 Hibernate Core 4.1.x

你有两个选择：

*   更新到 JBoss EAP6 或 7.1
*   通过将所有 Hibernate 库替换为最新的及其依赖项来自定义 JBoss 4.3

我建议第一个解决方案，因为通过替换 jars，您很可能会破坏部署在该服务器上的任何其他应用程序。确定要升级哪些库和不升级哪些库需要很多技巧。

最后，看起来您正在使用 JBoss Seam。要使用这个版本的 Hibernate，您需要将 Seam 升级到 2.3.0：迁移到 JBoss EAP6 的另一个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:09:58.103

尝试`java -verbose:class`并确保 JBoss 捆绑的旧休眠版本不会干扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:45:48.233

除了您可能需要进行的所有组件升级之外，我想知道您添加了哪些新罐子？Hibernate Search 现在在多个 jar 中发布。没有找到*FullTextEntityManager*将表明您缺少一些搜索 jars。之后，您可能不得不像@Sanne 所说的那样进行几次组件升级。

# css - 如何从 QPushButton 中移除点击效果

> ID：12637440
> 
> 赞同：0
> 
> 时间：2012-09-28T09:38:12.557
> 
> 标签：css, qt, styles, stylesheet, appearance

在 QT 中：我只想显示一个图标和一些文本，所以我使用 QPushButton。但是我怎样才能从中删除点击效果呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:52:32.337

您可以继承 QPushButton 并忽略除 Paint 事件之外的所有事件：

```
class IconLabel : public QPushButton {

...

bool IconLabel::event ( QEvent * e ) {
   if (e->type() == QEvent::Paint) {
      return QPushButton::event(e);
   }
   return true;
} 
```

根据您的要求，可能需要让其他事件通过，例如，如果您想在 IconLabel 上使用工具提示：

```
 if (e->type() == QEvent::Paint ||
       e->type() == QEvent::ToolTip) {
      return QPushButton::event(e);
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:23:27.233

我还没有尝试过这个[解决方案](http://www.qtcentre.org/threads/3256-Qlabel-with-%28icon-and-text%29-HowTo)，但看起来它应该可以工作。

从上面的链接复制

为标签使用富文本，例如：

```
lbl->setTextFormat(Qt::RichText);
lbl->setText("<img src=":/myimage.png">Hello!"); 
```

# php - YII 无法在重新加载时刷新/重新发送表单

> ID：12637441
> 
> 赞同：0
> 
> 时间：2012-09-28T09:38:17.773
> 
> 标签：php, forms, yii

所以我目前正在尝试将我的网站转换为 YII 框架，但现在我主要是在玩耍并学习它是如何工作的。

一件小事困扰着我，我希望我的表单在刷新页面时不会弹出重新加载/重新发送框。在我的旧网站上，我使用`header("Location: current page")`重新加载页面并使用该框，然后使用会话变量我能够处理错误和东西。

我怎样才能使我的 Yii 表单具有与 php 标头重定向或 javascript 相同的功能？

我是 yii 的新手，所以我还没有完全理解它是如何工作的，但我掌握了我认为的基础知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T12:16:14.843

Yii 控制器带有一些重定向功能。

在任何控制器动作中

```
// to refresh current action
$this->refresh();
// or
Yii::app()->controller->refresh(); 
```

重定向到另一个动作...

```
$this->redirect('controller/action', array('queryparam1' => 'val1', ...) );
// or
Yii::app()->controller->redirect('controller/action', array('queryparam1' => 'val1', ...) );

// or
 Yii::app()->request->redirect('controller/action', array('queryparam1' => 'val1', ...) ); 
```

如果你想在页面重定向之间存储一些信息，你可以使用 Yii Flash（它使用 session 内部）。

[http://www.yiiframework.com/wiki/172/an-easy-way-to-display-a-success-page-using-flash-messages/](http://www.yiiframework.com/wiki/172/an-easy-way-to-display-a-success-page-using-flash-messages/)

# c# - SetCreationTime 不适用于共享文件夹中的文件

> ID：12637446
> 
> 赞同：4
> 
> 时间：2012-09-28T09:38:45.880
> 
> 标签：c#, .net, datetime, file-io, administration

我正在使用 File.SetCreationTime() 方法来更新文件的创建时间。它适用于本地文件夹中的文件，但由于某种原因它不适用于共享网络文件夹。我可以使用同一个应用程序创建、删除、重命名文件，但这种方法无法正常工作。我已经阅读了 MSDN 上的方法描述，它说当调用者没有适当的权限时会引发 UnauthorizedAccessException。但是，我没有得到任何例外。这种行为的原因可能是什么？是否有解决方法或设置文件创建时间的替代方法？

这是相关的代码片段：

```
try
{
   DateTime dt = fi.CreationTime; //fi is a FileInfo of the given file
   DateTime newdt = new DateTime(dt.Year, dt.Month, dt.Day, dt.Hour, dt.Minute, dt.Second, position);
   _log.DebugFormat("Setting the CreationTime attribute to {0} ticks...", newdt.Ticks);
   fi.CreationTime = newdt;
   File.SetCreationTime(filePath, newdt);
   _log.DebugFormat("CreationTime check: {0}", File.GetCreationTime(filePath).Ticks);
}
catch (Exception ex)
{
   _log.DebugFormat("Error details: {0}", ex.ToString());
} 
```

根据调试日志输出，应用程序尝试设置新的日期时间。然而，“CreationTime 检查：”仍将显示“旧”日期时间值。

# c# - 合并同一列表中的元素

> ID：12637448
> 
> 赞同：0
> 
> 时间：2012-09-28T09:38:47.673
> 
> 标签：c#, linq, list

假设我有一个来自这样的数据库的列表：

```
List<Item> list =
{
    new Item
    {
        TypeID = 2,
        Count = 5
    },
    new Item
    {
        TypeID = 2,
        Count = 7
    },
    new Item
    {
        TypeID = 5,
        Count = 2
    }
}; 
```

我想总结所有相同的元素，`TypeID`以便我有一个仅包含两个元素的最终结果列表：

```
List<Item> list =
{
    new Item
    {
        TypeID = 2,
        Count = 12
    },
    new Item
    {
        TypeID = 5,
        Count = 2
    }
}; 
```

如何使用 LINQ 实现这一目标？
干杯
西蒙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:41:15.417

```
list.GroupBy(x=>x.TypeID)
    .Select(x=>new Item(){TypeID=x.Key,Count=x.Sum(y=>y.Count) })
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T09:41:58.123

您可以先使用`GroupBy`分组`TypeID`，然后`Sum`对每个组执行以下操作：

```
var result = list.GroupBy(x => x.TypeID)
                 .Select(g => new Item() { 
                                  TypeId = g.Key, 
                                  Count = g.Sum(x => x.Count)
                         })
                 .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:42:42.813

Linq 扩展方法 Union。

```
var mergedList = list1.Union(list2).ToList(); 
```

# objective-c - 访问目标 c 中的成员变量

> ID：12637450
> 
> 赞同：0
> 
> 时间：2012-09-28T09:38:54.603
> 
> 标签：objective-c

代码有什么区别：

```
[[self label] setText:@"Hello"];
[label setText:@"Hello"]; 
```

如果我从课堂上调用它们，它们基本相同是否正确？因此，如果我从另一个班级调用它，它将是：

```
[[someclass label] setText:@"Hello"];
someclass.label.text = @"Hello"; 
```

它是否正确？这个自我让我迷失方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:43:50.277

`self`是指向已调用该方法的对象的指针。

`[label setText:]`大概会直接访问实例变量。其他方式都通过访问器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:44:13.223

是的，两种方式都是正确的。在

```
someclass.label.text = @"Hello"; 
```

您正在直接访问该属性

而在

```
[[someclass label] setText:@"Hello"]; 
```

您正在使用 setter 方法设置由目标 C 为您创建的文本属性的值。

但我更喜欢 set 方法。但是使用属性并没有错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:45:11.523

自我只是向您展示 Label 或您采取的任何东西属于当前班级的方式。self 只会告诉您该实体属于您声明它或为其分配一些值的同一当前类。

如果你将该标签分配给其他类是另一回事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:47:05.017

混淆源于`@synthesize`默认情况下会生成一个与属性同名的 iVar。

该`[[self label] setText:@"Hello"];`线路将访问该属性`label`并调用该属性`setText`。

将`[label setText:@"Hello"];`访问 iVar`label`并调用`setText`它。

不同之处在于，当您使用 iVar 时，您在属性上设置的任何设置（原子、复制、保留等）都不会受到尊重。

如果您没有任何特别的理由不使用该属性，通常最好只使用该属性。您可以通过使用另一个名称合成 iVar 来使这更容易记住；

```
@synthesize label = _label; 
```

# mysql - 如何在 mysql 服务器上创建辅助数据库..？

> ID：12637462
> 
> 赞同：0
> 
> 时间：2012-09-28T09:40:00.247
> 
> 标签：mysql

有什么方法可以使 MYSQL SERVER 上的数据库脱机/关闭/非活动/辅助数据库......这样当我们像这样查询时，`SHOW DATABASES`它会给我们活动/在线/主数据库的列表......？还使这些数据库关闭/辅助会影响与其他数据库服务器的同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:45:20.883

实际上它不是一个数据库，它是一个模式（`show databases`）。您可以关闭整个实例，但不能关闭架构。

# c++ - std::vector::erase() 不想移动

> ID：12637466
> 
> 赞同：10
> 
> 时间：2012-09-28T09:40:21.533
> 
> 标签：c++, c++11, move

我有一个`std::vector<Foo>`where`Foo`是一个包含`Foo( Foo&& ) noexcept`.

将对象添加到容器中可以完美地工作，但是使用删除它们`std::vector::erase( iterator )`却没有，GCC 4.7 尝试调用我已删除的赋值运算符。确切的错误信息是：

*错误：使用已删除的函数 'Foobar& Foobar::operator=(const Foobar&)*

**编辑：**当然`std::vector`调用赋值运算符，而不是复制构造函数（您也可以在错误消息中看到）。在描述中修复它，对不起。

以下是请求的示例源代码：

```
#include <vector>

class Foo {
    public:
        Foo() {}
        Foo( Foo&& other ) noexcept {}

        Foo( const Foo& ) = delete;
        Foo& operator=( const Foo& ) = delete;
};

int main() {
    std::vector<Foo> v;

    v.push_back( Foo{} );
    v.erase( v.begin() );
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T09:54:14.993

问题是您没有提供移动赋值运算符。这是某些功能的矢量 Movable 要求的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:48:17.770

我无法重现它。事实证明，好习惯有很长的路要走：我定义了移动赋值运算符。

在 GCC 4.7.2 上直播：http: [//liveworkspace.org/code/36c600c285f2c91649fd4f73784c2c00](http://liveworkspace.org/code/36c600c285f2c91649fd4f73784c2c00)

```
#include <iostream>
#include <vector>

struct Foo
{
    Foo() {}

    Foo(Foo const&) = delete;
    Foo(Foo&&) throw() { }

    Foo& operator=(Foo const&) = delete;
    Foo& operator=(Foo&&) throw() { return *this; }
};

int main(int argc, char* args[])
{
    std::vector<Foo> v;
    v.emplace_back();
    v.emplace_back();
    v.emplace_back();
    v.emplace_back();

    auto it = v.begin();
    it++;
    v.erase(it);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:11:15.303

DeadMG 的答案非常好，但是我想推广另一种编写赋值运算符的方式：

```
struct Foo {
    Foo() {}

    Foo(Foo const&) = delete;
    Foo(Foo&&) throw() { }

    Foo& operator=(Foo) throw() { return *this; }
}; 
```

由于您在方法开始时需要一个新的临时对象，因此编译器将选择复制或移动构造函数来自行创建此临时对象，您不必同时编写复制赋值运算符和移动赋值运算符:)

# zend-framework - 在 Wordpress 中翻译 Zend Framework 网站，如 WPML

> ID：12637470
> 
> 赞同：2
> 
> 时间：2012-09-28T09:40:36.643
> 
> 标签：zend-framework, wordpress, po

我想知道是否可以以类似于[WPML](http://wpml.org/)为[Wordpress](http://wordpress.org/)实现的方式翻译 Zend Framework 1 网站。

我想要的是制作一个可以扫描网站源代码以查找翻译变量的应用程序，然后将它们存储在数据库或*[.po](https://www.gnu.org/software/gettext/manual/html_node/PO-Files.html)*文件中。

另请注意，我对切换到另一个框架或仅在我的网站上使用 Wordpress 不感兴趣，而是对没有编程技能的人使用一种简单易用的翻译方法感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:53:31.337

PoEdit [http://www.poedit.net/download.php](http://www.poedit.net/download.php)

在我的一个 ZF 项目中，我使用这个软件为 Zend_Translate gettext 适配器创建了 .mo 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:47:37.333

你需要的是：

*   **Zend_Translate**与**gettext 适配器**
*   **Zend_Registry**
*   **编辑**

更多信息[在这里](http://www.tornstrand.com/2008/03/29/string-localization-with-gettext-and-zend-framework/)。

# jsf - JSF 无法将数据表行的更改保存到数据库

> ID：12637471
> 
> 赞同：0
> 
> 时间：2012-09-28T09:40:36.777
> 
> 标签：jsf, datatable

我有一个 primefaces 数据表。我从数据库中填充它。其中一个字段是由复选框表示的布尔值。我希望如果我选中或取消选中该复选框，我可以将更改保存回数据库。

我尝试将行的当前值传递给托管 bean 进行保存，但复选框的新值未反映在当前行对象中。如何将更改放入当前行对象，以便成功将更改保存到数据库？

这就是我现在正在做的事情......我试图提供所需要的。如果信息太多或太少，请告诉我。谢谢。

```
@ManagedBean(name = "itemManagerBean")
@ViewScoped
public class ItemManagerBean implements Serializable {
...
    public ArrayList<Item> getAllItemsForUser() {
        List list = ecf.findByPartyId(user.getPartyId());
        ArrayList<Item> itemList = new ArrayList<>(list);
        return (itemList);
    }
...
    public String saveItem(Item item){
        System.out.println(item.toString());
        ecf.updateRecord(item);
        return (null);
    }
}

//item class 
public class Item {
    private BigInteger itemId;
    private String name;
    priave boolean saleable;   //database column is not null

    //getters and setters
}

//facelet
<h:form>
<p:dataTable id="id_itemList"
             var="item" 
             value="#{itemManagerBean.allItemsForUser}" > 

    <p:column headerText="ID">  
        <h:outputText value="#{item.itemId}" />  
    </p:column>  

    <p:column headerText="Name">  
        <h:outputText value="#{item.name}" />  
    </p:column>  

    <p:column headerText="Saleable" >  
        <p:selectBooleanCheckbox value="#{item.saleable}" />
    </p:column>  

    <p:column  width="15" > 
        <p:commandButton id="id_saveRowButton" icon="ui-icon-disk" 
             title="Save" action="#{itemManagerBean.saveItem(item)}"/>  
    </p:column>  
</p:dataTable>
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:03:11.370

You need to create a `selectedItem` property in `ItemManagerBean` and update its value when the user clicks on the `commandButton`:

**In ItemManagerBean**

```
private Item selectedItem;
// getter and setter 
```

**In the xhtml page**

```
<p:column  width="15" > 
    <p:commandButton id="id_saveRowButton" icon="ui-icon-disk" 
         title="Save" action="#{itemManagerBean.saveItem}">
        <f:setPropertyActionListener value="#{item}" target="#{itemManagerBean.selectedItem}" /> 
    </p:commandButton> 
</p:column> 
```

(Note that you don't need to pass `item` through `saveItem` method. Modify `saveItem` in the managed bean in order to make it work with `selectedItem` instead of accepting an input item).

Links:

[example in the PrimeFaces showcase](http://www.primefaces.org/showcase/ui/datatableRowSelectionByColumn.jsf)

[Passing parameter to JSF action](https://stackoverflow.com/a/7402192/870122)

[BalusC blog](http://balusc.blogspot.com/2006/06/communication-in-jsf.html)

# iis - IIS 不应该发送 Keep-Alive 标头吗

> ID：12637473
> 
> 赞同：4
> 
> 时间：2012-09-28T09:40:38.320
> 
> 标签：iis, keep-alive

我在 IIS 7.5 设置中启用了“HTTP keep-alive”。但是，IIS 仍然没有响应`Connection: keep-alive`标头（对 FF 和 Chrome）

正如我所注意到的，当我启用 keep-alive 时，Nginx 会使用此标头进行响应。

服务器不`Connection: keep-alive`应该发送标头以响应请求吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T23:45:55.563

在 HTTP/1.1 中，持久连接是默认的：
[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8)

换句话说，IIS 并不真正需要（但是 Apache 似乎总是发送它）。

您可以使用 netstat 或我倾向于使用 tcpview 验证这一点（一个小型​​ sysinternals 工具，您可以从 microsoft 下载： [http](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx) ://technet.microsoft.com/en-us/sysinternals/bb897437.aspx ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:39:06.040

看来 IIS 没有发送`Connection: keep-alive`. 它仍然没有关闭连接，浏览器将其重用于进一步的请求。

# django - 在我的应用程序中放置 facebook_connect 文件的位置？

> ID：12637474
> 
> 赞同：1
> 
> 时间：2012-09-28T09:40:38.353
> 
> 标签：django, django-facebook

我已经使用**facebook 朋友应用程序**在我的应用程序中邀请朋友。所以我想知道我必须将其文件放在我的应用程序中的哪个位置，因为它具有 *模式、视图管理器、管理员、设置、url 和模板文件。*

我不确定，但可能只是将整个应用程序保留在项目中即可！！！！但这对我不起作用，这就是我问这个**问题的原因。**

这是它的 Github 项目：[https ://github.com/barszczmm/django-easy-friends](https://github.com/barszczmm/django-easy-friends)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:16:01.047

什么是 Facebook 朋友应用程序？你能提供一个链接吗？通常安装应用程序的最佳方式是设置一个虚拟环境（[http://www.virtualenv.org/en/latest/index.html](http://www.virtualenv.org/en/latest/index.html)），然后在其中安装您的应用程序（连同 Django 和您需要的所有其他东西）

```
sudo apt-get install python-virtualenv python-pip
virtualenv django-env
./django-env/bin/activate
pip install Django
pip install -e git://github.com/barszczmm/django-easy-friends.git#egg=django-easy-friends
# follow the instructions in the django-easy-friends docs 
```

# sql - 我们可以在 SELECT 查询中使用主机变量作为表名吗？

> ID：12637477
> 
> 赞同：3
> 
> 时间：2012-09-28T09:40:50.850
> 
> 标签：sql, c, oracle, oracle-pro-c

我正在试验 Pro*C 代码。

我有 3 张桌子`emp`, `mgr`, `all`; 所有 3 个表都包含`emp_id`和`emp_name`。我尝试了下面的代码，它给了我错误。请让我知道是否可能？

```
const char table_name[3]={'emp','mgr','all'}
int counter = 0;
while(counter < 3)
{
 . . .
 EXEC SQL SELECT emp_name INTO :ename 
      From :table_name[counter++] 
      where emp_id=:emp_id;
} 
```

我们可以为`SELECT`和使用变量`FROM`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:00:47.563

这称为动态 SQL：

使用此信息：

> **动态 SQL**
> 
> 虽然嵌入式 SQL 适用于固定应用程序，但有时对于程序来说动态创建整个 SQL 语句很重要。
> 使用动态 SQL，可以发出存储在字符串变量中的语句。
> PREPARE 将字符串转换为 SQL 语句，然后 EXECUTE 执行该语句。考虑以下示例。
> 
> ```
>  char *s = "INSERT INTO emp VALUES(1234, 'jon', 3)";
>    EXEC SQL PREPARE q FROM :s;
>    EXEC SQL EXECUTE q; 
> ```
> 
> 或者，PREPARE 和 EXECUTE 可以组合成一个语句：
> 
> ```
>  char *s = "INSERT INTO emp VALUES(1234, 'jon', 3)";
>    EXEC SQL EXECUTE IMMEDIATE :s; 
> ```

资料来源：http: [//infolab.stanford.edu/~ullman/fcdb/oracle/or-proc.html](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-proc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T10:46:15.207

不，我们不能使用主机变量为 Pro*C 中的静态 SQL 语句提供表名。

引用适用于 Oracle 11.2g[的 Oracle Pro*C 程序员指南](http://docs.oracle.com/cd/E11882_01/appdev.112/e10825/pc_06sql.htm#i8115)：

> 您不能使用输入主变量来提供 SQL 关键字或数据库对象的名称。[..] 如果您需要在运行时更改数据库对象名称，请使用动态 SQL。另请参见第 13 章，“Oracle 动态 SQL”。

在 Pro*C 中，Oracle 提供了不同的方法来执行 SQL 语句。主要区别在于静态方法和动态方法。对于动态，有几种允许不同自由度的子方法。

静态 SQL 语句不是 100% 静态的 - 您可以在 where 子句表达式（作为操作数）中使用输入/输出主机变量，在插入语句中提供值，作为选择目标等。但不能指定表名。这对于静态嵌入式 SQL 来说“过于动态”。

请注意，您仍然可以在动态准备的 SQL 语句中使用主机变量。建议这样做以避免 SQL 注入问题并提高性能（当一条语句执行多次时）。

示例（使用 Oracle 动态 SQL 方法 3）：

```
const char *table_name[3] = {"emp", "mgr", "all"};
unsigned table_name_size = 0;
unsigned i = 0;
for (i = 0; i<table_name_size; ++i) {
    char stmt[128] = {0};
    snprintf(stmt, 128,
        "SELECT emp_name "
        "  FROM %s " 
        "  WHERE "
        "    emp_id = :emp_id",
      table_name[i]);

    EXEC SQL PREPARE emp_stmt FROM :stmt;
    // check sqlca.sqlcode ...
    EXEC SQL DECLARE emp_cursor CURSOR FOR emp_stmt;
    EXEC SQL OPEN emp_cursor USING :emp_id;
    // check sqlca.sqlcode ...
    EXEC SQL FETCH emp_cursor INTO :ename;
    // check sqlca.sqlcode ...
    EXEC SQL CLOSE emp_cursor;
    // check sqlca.sqlcode ...

    // ...
} 
```

# javascript - 从 JSP 中提取 javascript 到 JS 文件

> ID：12637482
> 
> 赞同：2
> 
> 时间：2012-09-28T09:41:16.133
> 
> 标签：javascript, plugins, intellij-idea

我目前正在尝试使用 Intellij 重构我们的部分前端。我们的 JSP 中有很多 JavaScript。我希望能够从 JSP 中提取到 .js 文件中，并将其替换为引用该文件的脚本标记。我知道如何提取到“包含”文件，但我想要一种用适当的脚本标签提取和替换代码的方法。

有谁知道可以快速轻松地完成此任务的插件？（或者我不知道的 Intellij 中预先存在的功能）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:24:39.133

请[为这个问题投票](http://youtrack.jetbrains.com/issue/IDEA-40826)（它已有 5 年历史，票数为零）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:50:04.353

只需创建一个扩展名为 .js 的文件，复制并粘贴您的 js 代码及其函数名称。然后将该文件包含在您的 jsp 项目标题部分中。

例如：

```
<script type="text/javascript" src="js/jquery-ui.min.js"></script> 
```

就这样..

# c++ - 网络适 配器计数器

> ID：12637489
> 
> 赞同：0
> 
> 时间：2012-09-28T09:41:50.253
> 
> 标签：c++, winpcap, nic

我正在为一家公司编写一个使用 winpcap 发送和分析原始以太网数据包的软件。当软件运行时间较长时，我很少遇到丢包。我的环境相当糟糕：一台笔记本电脑有很多公司软件，包括我无法关闭的 AV。

我想通过阅读来分析丢包问题：（**错误）网络适配器的计数器**。在 C++ 或 C# 中做到这一点的最佳方法是什么？我最好的想法是 winpcap 的统计模式，但它提供的信息太少。有没有更好的办法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:47:29.427

您应该阅读[网络接口](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394340%28v=vs.85%29.aspx)的 WMI 性能统计信息- 它们可能包含您感兴趣的所有计数器。

在 C++ 实现的文章中链接了一个示例，但我很确定它也可以在 C# 中轻松完成。

# php - PDO 插入语句和逗号分隔符

> ID：12637490
> 
> 赞同：1
> 
> 时间：2012-09-28T09:41:52.447
> 
> 标签：php, pdo

我有：

```
INSERT INTO post(title,message) VALUES (:title,:message) 
```

其中`:message`value 有一些带有符号（包括逗号）的随机文本。

因为逗号是语句组件之间的分隔符：

如何*转义* `:message`值以将其包含的逗号保留在字符串上下文中而不被解释为分隔符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T09:44:18.837

你不需要。与使用 PDO 一样，使用准备好的语句的全部意义在于查询的结构与数据分开发送。这意味着数据中的字符永远不会与查询结构的某些部分混淆。

在这方面，您已经完成了使查询安全所需的所有工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:45:52.687

[准备好的陈述我的朋友。](http://php.net/manual/en/pdo.prepared-statements.php)

**这就是 php.net 必须说的；**

> 查询只需要解析（或准备）一次，但可以使用相同或不同的参数多次执行。准备好查询后，数据库将分析、编译和优化其执行查询的计划。对于复杂的查询，这个过程可能会占用足够的时间，如果需要使用不同的参数多次重复相同的查询，它会显着降低应用程序的速度。通过使用准备好的语句，应用程序避免重复分析/编译/优化循环。这意味着准备好的语句使用更少的资源，因此运行得更快。
> 
> 准备好的语句的参数不需要引用；驱动程序会自动处理这个。如果应用程序专门使用预准备语句，开发人员可以确定不会发生 SQL 注入（但是，如果查询的其他部分是使用非转义输入构建的，则仍然可能发生 SQL 注入）。

# c# - 为什么处理时间戳的这段代码使用有符号整数？

> ID：12637494
> 
> 赞同：1
> 
> 时间：2012-09-28T09:42:02.850
> 
> 标签：c#, c++, .net

[下面是一段获取 .NET 程序集构建时间的代码](https://stackoverflow.com/a/1600990)。注意这一行：

```
int secondsSince1970 = System.BitConverter.ToInt32(b, i + c_LinkerTimestampOffset); 
```

此代码提取存储在程序集中的结构`TimeDateStamp`成员。[`IMAGE_FILE_HEADER`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680313%28v=vs.85%29.aspx)结构定义如下：

```
typedef struct _IMAGE_FILE_HEADER {
  WORD  Machine;
  WORD  NumberOfSections;
  DWORD TimeDateStamp;
  DWORD PointerToSymbolTable;
  DWORD NumberOfSymbols;
  WORD  SizeOfOptionalHeader;
  WORD  Characteristics;
} IMAGE_FILE_HEADER, *PIMAGE_FILE_HEADER; 
```

并`DWORD`定义如下：

```
typedef unsigned long DWORD; 
```

并且结构描述说这`TimeDateStamp`是自过去任意时刻以来的秒数，所以它不能是负数。

为什么 C# 代码使用有符号类型`int`来存储该无符号值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T12:20:59.640

这是因为 unsigned int 不是符合 CLS 的变量类型，所有 .NET 库都应遵循公共语言规范。

有关 CLS 合规性的更多信息：http:
[//msdn.microsoft.com/en-us/library/12a7a7h3.aspx](http://msdn.microsoft.com/en-us/library/12a7a7h3.aspx)

# java - 从远程服务器捕获数据的机制

> ID：12637500
> 
> 赞同：0
> 
> 时间：2012-09-28T09:42:33.260
> 
> 标签：java, log4j, client-server, rmi, lynxos

我们有一个嵌入式系统，它以 lynx OS 作为底层操作系统，我们在其上安装了一个运行 java 程序的虚拟机。现在我需要捕获基本操作系统的进程运行和内存利用率，还需要一个跟踪系统来跟踪虚拟机上运行的多线程应用程序。我需要将捕获的数据发送到远程服务器。请就实现此方案提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:09:43.587

关于您问题的 jvm 部分：

每个 java 程序通常会在自己的 jvm 进程上运行，因此您应该独立监控它们。要监视任何 jvm 中的内存使用情况，您基本上需要监视垃圾收集统计信息。为此，您需要在命令行上添加以下命令行参数：

```
-XX:+PrintGCDetails 
```

这将输出垃圾收集的信息。

```
-XX:+PrintGCTimeStamps 
```

这将包括垃圾收集输出中的时间戳。

您可能还希望使用以下命令将 gc 输出重定向到文件：

```
-Xloggc:file 
```

其中 file 是将记录 gc 输出的文件。然后，您可以传输和处理此文件，以提取有关您的程序行为的有用信息。根据该信息，您可以根据内存使用情况调整您的应用程序。

如果您需要在**短时间内**监视 jvm 进程（即问题调查和解决），那么另一种选择是附加诸如 NetBeans 之类的分析器。这将为您提供比 gc 输出更多的信息，但是此选项只能在短时间内使用，因为分析器会降低 jvm 进程的性能。

现在关于操作系统和系统级别的统计数据，我不是 LynxOS 专家，但是我在 linux 系统中使用了一些流行的工具，例如**ganglia**和**nagios**，它们在收集统计数据方面做得很好。但是我不确定它们是否可以在 LynxOS 上使用。

# php - & 不通过 url 传入字符串变量

> ID：12637502
> 
> 赞同：1
> 
> 时间：2012-09-28T09:42:35.510
> 
> 标签：php, javascript, url

我正在尝试将一个大 url 作为字符串传递给另一个 php 页面并通过它在那里获取它，`$_REQUEST[]` 但它不起作用。这是第一页的代码（JavaScript）：

```
var url="index.php?module=Contacts&return_module=Campaigns&action=UD_DetailView&popuptype=detailview&select=enable&form=EditView&form_submit=false";
var intermediate_url="choose_template.php?variable_url="+url;

window.location=intermediate_url; 
```

其他页面上的代码是：

`<?php echo "url = ".$_REQUEST['variable_url']; ?>`

我在choose_template.php 页面上得到的回声是这样的：

```
url = index.php?module=Contacts 
```

我不明白。为什么它会在 first 发生时中断`&`？我应该怎么做才能绕过它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:46:01.880

尝试在js中使用：

```
url = encodeURIComponent(url); 
```

比在 php 中：

```
echo "url = ". urldecode($_REQUEST['variable_url']); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:45:47.267

处理 url 时，应该使用 urlencode 和 urldecode 函数

```
http://php.net/manual/en/function.urlencode.php
http://php.net/manual/en/function.urldecode.php 
```

在 JavaScript 中：

```
url = encodeURIComponent(url) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:01:16.843

尝试使用 urlencode()：

```
var url="<?php echo urlencode('index.php?module=Contacts&return_module=Campaigns&action=UD_DetailView&popuptype=detailview&select=enable&form=EditView&form_submit=false')?>";

var intermediate_url="choose_template.php??variable_url="+url;

window.location=intermediate_url; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:47:30.773

如果我正确理解您要回显当前页面的全名：使用它来获取它：

```
function curpage() {
    $pu = 'http';
    if ($_SERVER["HTTPS"] == "on") {$pu .= "s";}
    $pu .= "://";
    if ($_SERVER["SERVER_PORT"] != "80") {
    $pu .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
    } else {$pu .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];}
    return $pu;
}

<?php echo "url = ".curpage(); ?> 
```

这将始终正常工作！

# ios - 如何将 CGPDFDocument/CGPDFPage 附加到 MFMailComposeViewController

> ID：12637508
> 
> 赞同：0
> 
> 时间：2012-09-28T09:43:13.140
> 
> 标签：ios, core-graphics, nsdata, mfmailcomposeviewcontroller, cgpdfdocument

我有一个存储在本地存储中的多页 pdf 文档。我想从该 pdf 文档中提取任何页面并将其转换为 NSData 以将其附加到“MFMailComposeViewController”。使用以下代码行，我可以轻松检索所需的页面...

```
CGPDFDocumentRef pdfDoc=CGPDFDocumentCreateWithURL(pdfURL);
CGPDFPageRef pdfPage = CGPDFDocumentGetPage(pdfDoc, pageNumber); 
```

但我无法找到一种方法来转换`pdfPage`为`NSData`以便我可以将其附在邮件中。

**注意：**要求以PDF格式附加页面，所以请不要建议将PDF转换为PNG或JPEG。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:10:53.337

`CGPDF`主要用于从 PDF 绘图和从 PDF 绘图，而不是转换 PDF 数据。因此，如果要提取页面，则必须*绘制*它。使用例如：

```
// input
CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)inputData);
CGPDFDocumentRef document = CGPDFDocumentCreateWithProvider(provider);
CGPDFPageRef page = CGPDFDocumentGetPage(document, pageIndex);
CGRect mediaBox = CGPDFPageGetBoxRect(page, kCGPDFMediaBox);
// output
CGDataConsumerRef consumer = CGDataConsumerCreateWithCFData((__bridge CFMutableDataRef)outputData);
CGContextRef context = CGPDFContextCreate(consumer, &mediaBox, NULL);
// draw
CGContextBeginPage(context, &mediaBox);
CGContextDrawPDFPage(context, page);
CGContextEndPage(context);
// cleanup
CGDataProviderRelease(provider);
CGPDFDocumentRelease(document);
CGDataConsumerRelease(consumer);
CGContextRelease(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:23:27.420

这是你要做的：

```
 NSMutableData *pdfData = [[NSMutableData alloc] init];
   CGDataConsumerRef dataConsumer = CGDataConsumerCreateWithCFData((CFMutableDataRef)pdfData);
   const CGRect mediaBox = CGRectMake(0.0f, 0.0f, drawingWidth, drawingHeight);
   CGContextRef pdfContext = CGPDFContextCreate(dataConsumer, &mediaBox, NULL);

   UIGraphicsPushContext(pdfContext);
   CGContextBeginPage(pdfContext, &mediaBox);

   CGContextDrawPDFPage(pdfcontext, pdfPage);

   CGContextEndPage(pdfContext);    
   CGPDFContextClose(pdfContext);
   UIGraphicsPopContext();

   CGContextRelease(pdfContext);
   CGDataConsumerRelease(dataConsumer);

  // Mail part
  MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
  mailViewController.mailComposeDelegate = self;
  NSString *mime=@"application/pdf";            
  [mailViewController setSubject:@"Subject"];
  [mailViewController setMessageBody:@"Message Body" isHTML:NO];
  [mailViewController addAttachmentData:[pdfData copy] mimeType:mime fileName:@"page.pdf"];
  [self presentModalViewController:mailViewController animated:YES]; 
```

# android - 更改软键盘弹出键盘的背景图像

> ID：12637512
> 
> 赞同：1
> 
> 时间：2012-09-28T09:43:40.437
> 
> 标签：android, keyboard, popup

如何更改弹出键盘（用户长按某个键时出现的小键盘）的背景图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:53:11.950

你需要扩展一个`InputMethodService`

然后在以下位置构建您的 UI：

```
@Override 
public View onCreateInputView() 
```

看：

*   [http://android-developers.blogspot.co.il/2009/04/creating-input-method.html](http://android-developers.blogspot.co.il/2009/04/creating-input-method.html)

*   [http://gitorious.org/0xdroid/packages_inputmethods_latinime/blobs/ab17fca519fa27af01d29a38c553e250c9e92a9e/src/com/android/inputmethod/latin/LatinIME.java](http://gitorious.org/0xdroid/packages_inputmethods_latinime/blobs/ab17fca519fa27af01d29a38c553e250c9e92a9e/src/com/android/inputmethod/latin/LatinIME.java)

# jquery - 如何在jquery中检查viewbag并将viewbag的值分配给文本框

> ID：12637518
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:44:04.820
> 
> 标签：jquery, asp.net-mvc-3

我正在尝试将数据从 viewbag 推送到 Jquery 中的文本框。在这里，当我检查 viewbag 是否为空时，它显示错误为“条件编译已关闭”并且其他功能变得不活动。 ![在此处输入图像描述](../Images/8558012ed32a48bc1f26ba630e90d5b3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:55:30.710

```
Use @ViewBag.Phoneno inside double codes. like this "@ViewBag.Phoneno" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:58:08.767

它不能在 JQuery 中完成。Viewbag 是一个服务器端构造，提供某种方式来提供从服务器到客户端的任意数据。您可以在 JavaScript 或 JQuery 中引用它的值。但是您不能使用 Javascript 或 JQuery 为其赋值。您需要设计一些其他方式来实现您的要求。

此外，当我们在 javascript 或 JQuery 中使用 ViewData 或 ViewBag 时，它必须仅在 View 文件中使用（.cshtml、.spark 或 .aspx 等）；由于当视图被传递到客户端时 - 它被转换为 html5。`@ViewBag.YourVariable`现在在执行此操作时，这是替换标签或的地方`@ViewData["yourVariable"]`。所以这解决了为什么它不能完成的谜团。

# codeigniter - codeigniter 动态数据模板

> ID：12637533
> 
> 赞同：0
> 
> 时间：2012-09-28T09:44:36.897
> 
> 标签：codeigniter, templates

我在 view/include 有这个模板视图

```
<?php $this->load->view('include/header'); ?>
<?php $this->load->view($sidebar_column); ?>
<?php $this->load->view($result_column); ?>
<?php $this->load->view($footer_row); ?>
<?php $this->load->view('include/footer'); ?> 
```

我在 view/include 有 footer_row html

```
<div> this is footer row <?php echo $username ?></div> 
```

然后我在我的控制器中调用footer_row

```
$data['footer_row'] = 'include/footer_row';
$this->load->view('include/template',$data); 
```

我的问题，footer_row 已登录用户信息，它出现在每个页面中。使用我使用的上述方法，我必须调用并检索每个控制器中的用户信息。我怎样才能使它可重复使用，所以我不需要重复自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:11:34.763

可重用性来自对构造函数和父类的使用。看看我之前的回答：

1.  [CodeIgniter 中的页眉和页脚](https://stackoverflow.com/a/9540985/568884)
2.  [不同功能的构造函数会话验证](https://stackoverflow.com/a/12486869/568884)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:39:23.510

为什么不使用这种方法，而不是使用易于使用的模板库。我会推荐 Philsturgeons 模板库，但您可以使用更多符合您要求的模板库。

威廉姆斯概念

[http://williamsconcepts.com/ci/codeigniter/libraries/template/](http://williamsconcepts.com/ci/codeigniter/libraries/template/)

菲尔·斯特金斯

[http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/](http://philsturgeon.co.uk/demos/codeigniter-template/user_guide/)

最简单

[http://maestric.com/doc/php/codeigniter_template](http://maestric.com/doc/php/codeigniter_template)

最后是 Binpresses 的

[http://www.binpress.com/app/codeigniter-template-library/223](http://www.binpress.com/app/codeigniter-template-library/223)

# silverstripe - 在 SilverStripe CMS 中创建统计页面

> ID：12637534
> 
> 赞同：0
> 
> 时间：2012-09-28T09:44:37.753
> 
> 标签：silverstripe

银条 2.4.7

你好

我想在 CMS 中创建一个统计页面，但我不完全确定如何执行此操作。如果它是一个普通的 PHP 页面，我会查询数据库，将值保存到数组中并在表格中显示它们。我也需要它看起来与其他 CMS 页面相似。

我已经在 CMS 中包含了我自己的 php 文件，所以我想知道我可以在这里做同样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T12:50:59.577

在不提供更多详细信息的情况下，我所能做的就是将您指向 SilverStripe 3 的[站点报告](http://doc.silverstripe.org/framework/en/reference/site-reports)文档。

这将允许您根据您选择的过滤器和排序以表格形式显示您的数据对象。

如果您追求的是 SS 的基础知识，请从[教程](http://doc.silverstripe.org/framework/en/tutorials/)开始。

# android - Android按钮和文本大小

> ID：12637536
> 
> 赞同：4
> 
> 时间：2012-09-28T09:44:49.617
> 
> 标签：android, button, text-size

我有一个带有几个按钮的布局，这些按钮使用权重属性占用整个布局的空间。每个按钮上都有一些固定大小的文本，由 android:textSize="30dp" 设置，因此在小型移动设备（手机）的屏幕大小上，如果大约是按钮的大小，则文本的大小。但在大型设备（平板电脑）上，按钮大小会扩大，但文本大小保持不变（30dp）。

我希望在每个分辨率下都保持按钮大小和文本大小比例，可以使用布局 XML 代码来完成吗？我想避免以编程方式进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T09:50:25.337

解决方法很简单

您应该使用每个密度/尺寸具有不同尺寸的 dimension.xml 并将其放置在：

*   价值观-mdpi
*   价值观-hdpi
*   价值观-xhdpi
*   values-large（5.1' 5.4' y nexus7 平板电脑/手机）
*   values-xlarge（更大的平板电脑）

您也可以使用 values-sw600dp (nexus 7) 和 values-sw720dp(10')。

啊! 并将 sp 用于文本，而不是 dp。SP 为所有字体设置相同的大小。始终使用 SP 的文本

请记住，您总是可以为许多单独的配置创建值/drawables/resources：风景portrati、语言、大小、密度、夜晚或白天、android 版本......并且您可以合并它！

[http://developer.android.com/intl/es/guide/topics/resources/providing-resources.html#SmallestScreenWidthQualifier](http://developer.android.com/intl/es/guide/topics/resources/providing-resources.html#SmallestScreenWidthQualifier)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:49:59.630

应该`sp`在 dp 中提到文本大小，而不是像这样尝试

```
 android:textSize="30sp" 
```

文本的大小。推荐的文本尺寸类型是`"sp"`for `scaled-pixels`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-27T15:35:17.903

为选项卡和手机制作不同的 xml 布局文件，然后尝试这个按钮

```
android:textAppearance="@android:style/TextAppearance.DeviceDefault.Large" 
```

# silverlight - Silverlight 自定义按钮

> ID：12637539
> 
> 赞同：0
> 
> 时间：2012-09-28T09:44:52.393
> 
> 标签：silverlight, button, silverlight-4.0

我为按钮创建了一种样式：

```
<Style x:Key="TicketOnBizOptionsButton" TargetType="Button">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ColorAnimation Duration="0" To="#FFC0C0C0" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="border"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ColorAnimation Duration="0" To="#FF14548C" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="border"/>
                                    <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="Content"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="border" BorderThickness="1" Background="#FFF2F2F2" CornerRadius="8" BorderBrush="#FFD5D5D5">
                        <Border.Effect>
                            <DropShadowEffect Direction="285" ShadowDepth="2" Color="#FFDFDFDF" BlurRadius="2"/>
                        </Border.Effect>
                        <Button Content="" Margin="-1" Width="105" BorderBrush="{x:Null}" Foreground="White" Background="{x:Null}" Opacity="0"/>
                    </Border>
                    <TextBlock x:Name="Content" Margin="5,5,5,5" Text="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

样式正常工作，按钮。但是当我单击按钮时，我注意到一些不稳定的行为。

有时仅在直接单击文本上方时才有效，而有时仅在边框上单击时才有效...

我添加的边框对此有什么影响？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:33:01.147

```
 <Style x:Key="TicketOnBizOptionsButton" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" To="#FFC0C0C0" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="border"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimation Duration="0" RepeatBehavior="1x" To="#FF14548C" Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)" Storyboard.TargetName="border"/>
                                        <ColorAnimation Duration="0" RepeatBehavior="1x" To="White" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="Content"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Border x:Name="border" BorderThickness="1" Background="#FFF2F2F2" CornerRadius="8" BorderBrush="#FFD5D5D5">
                            <Border.Effect>
                                <DropShadowEffect Direction="285" ShadowDepth="2" Color="#FFDFDFDF" BlurRadius="2"/>
                            </Border.Effect>
                        </Border>
                        <TextBlock x:Name="Content" Margin="5,5,5,5" Text="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

问题是您在模板中使用了一个按钮，因此一旦您触发按下状态，它可能会导致模板内的另一个按钮出现一些问题。我刚刚删除了边界内的那个，它运行良好。

希望能帮助到你。

# ruby - 捆绑器不会运行（不部署不起作用）

> ID：12637542
> 
> 赞同：0
> 
> 时间：2012-09-28T09:44:56.810
> 
> 标签：ruby, bundler

我正在摆弄`--deployment`我的 ruby​​ 应用程序上的选项。之后，我想在我的应用程序中添加另一个 gem。我将它添加到 gemspec 中，并运行 bundle install 但新的 gem 没有安装。我删除了供应商缓存、.bundle、Gemfile.lock 并再次尝试，得到了我预期的错误：

> 您尝试在更改 Gemfile 后以部署模式安装。在其他地方运行`bundle install`并将更新的 Gemfile.lock 添加到版本控制。...

我以前见过这个，所以我开始使用`--no-deployment`flag。但由于某种原因，同样的错误再次出现。一个小时后，我仍然被困在同一个地方。无论我做什么，我都无法让 bundle install 工作并安装新的 gem。

这是某种奇怪的错误吗？还是按设计打包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T11:17:44.890

噗……不知何故，一个 .bundle 配置文件夹潜入了我的主目录，这使得我机器上的所有存储库看起来都像是捆绑器的部署存储库。删除 .bundle 文件夹解决了该问题。

# workflow - 化石的典型工作流程是什么，尤其是与 git 相比？

> ID：12637549
> 
> 赞同：4
> 
> 时间：2012-09-28T09:45:19.537
> 
> 标签：workflow, fossil

对于 git，“[一个成功的 Git 分支模型](https://nvie.com/posts/a-successful-git-branching-model/)”给出了很好的建议。

我想[试一试 Fossil](https://fossil-scm.org/home/doc/trunk/www/index.wiki)，它似乎与 git 非常兼容（到目前为止，我注意到的最显着的区别（SCM 功能）是拒绝's 功能，部分通过[回避](https://www.fossil-scm.org/index.html/doc/trunk/www/shunning.wiki)`git-rebase`功能缓解）。那么 git 工作流程可以简单地 1:1 调整，还是更推荐不同的工作流程？例如，如何集成化石的附加功能（集成的问题跟踪器和 Wiki）？

[![](../Images/719944e70fcee40819349b54f340b4e2.png)](https://nvie.com/posts/a-successful-git-branching-model/ "来自：一个成功的 Git 分支模型")
[（来源：[nvie.com](http://nvie.com/img/2009/12/Screen-shot-2009-12-24-at-11.32.03.png)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:30:37.207

据我所知，fossil 使用自动同步模式来减少可能使开发人员忙碌的分支。

因此，每个开发人员都会设置自动与主备份存储库同步。然后当想要增强一个功能时，只需在签入时设置一个分支。当该功能可用时，合并回主干。

如果您想让所有开发人员共享相同的分支树以进行审查，请在克隆时添加 --private 选项。

所以，在你给的图片中。我们可以将“开发”视为“主干”。和所有其他作为提交的 --branch 选项。

当我们想在一个分支下开发时，只需'化石更新

# c - 使用 MPI_BYTE 接收任何数据类型

> ID：12637550
> 
> 赞同：2
> 
> 时间：2012-09-28T09:45:22.207
> 
> 标签：c, mpi

我有一些特殊的问题：在一个简单的 MPI_Send/MPI_Recv 程序中，假设我们知道我们将要发送的消息类型，但在接收端我们不知道我们将收到哪种类型的数据。

所以我尝试第一次尝试如下：

```
 #include "mpi.h"
    #include <stdlib.h>
    #include <stdio.h>

    int main(int args, char** argv){
            int rank, size;
            MPI_Status status;
            MPI_Init(&args,&argv);
            MPI_Comm_rank(MPI_COMM_WORLD,&rank);
            MPI_Comm_size(MPI_COMM_WORLD,&size);

            if(rank==0){
                    int x = 10;
                    MPI_Send(&x,4,MPI_BYTE,1,0,MPI_COMM_WORLD);
            }
            if(rank==1){
                    void* datax;
                    int count = sizeof(int);
                    datax = malloc(count);
                    MPI_Recv(datax,count,MPI_BYTE,0,0,MPI_COMM_WORLD,&status);
                    //Now check if the value is received correctly
                    int z = (int) datax;
                    printf("RCV: %d \n",z);
            }

            MPI_Finalize();
            return 0;
    } 
```

程序正确编译并运行，但接收到的值是一些内存垃圾值，而不是正确的值（在这种情况下为 10）。

请问有什么建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T02:32:40.640

尽管您的评论解决了您的编程错误，但在 MPI 中发送和接收未知类型（甚至未知大小）的数据有更好的方法。

区分不同消息类型的一种常用方法是为每种类型使用不同的标签号。在您的代码中，您在`MPI_Send`调用中使用了标记号 0。使用描述消息类型的标签号，然后在通话[`MPI_Probe`](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Probe.html) 前使用`MPI_Recv`以找出您将收到的消息类型。例如，您的代码可以这样修改：

```
if (rank == 0) {
    MPI_Send(data_buf, data_size, MPI_BYTE, 1, tag_that_describes_message_type, MPI_COMM_WORLD)
} else if (rank == 1) {
    MPI_Status status;
    // Probe for a message coming from rank 0 with any tag.
    MPI_Probe(0, MPI_ANY_TAG, MPI_COMM_WORLD, &status);
    // Find out what type of message is ready to be received by accessing the MPI_TAG variable in the status struct
    if (status.MPI_TAG == 0) {
        // Receive messages of this type. Maybe you sent an array of ints?
        MPI_Recv(...)
    } else if (status.MPI_TAG == 1) {
        // Receive messages of this type. Maybe you sent an array of floats? Handle it here.
        MPI_Recv(...)
    } else if ... 
```

`MPI_Probe`还可用于在收到消息之前找出消息的大小，这使您几乎可以动态接收任何类型的消息。有关`MPI_Probe`用于此目的的更好解释和说明，请转到[本教程](http://www.mpitutorial.com/dynamic-receiving-with-mpi-probe-and-mpi-status/)。

如果您需要发送广泛不同类型的数据（太多而无法用标签号枚举），请将您的消息打包到[Google Protocol Buffer](http://code.google.com/p/protobuf/)中，将其作为 s 数组接收`MPI_BYTE`（就像您在示例中所做的那样），然后将其解包在接收方。协议缓冲区的 AC 实现在[这里](http://code.google.com/p/protobuf-c/)。

# php - 如果一个数组元素类似于请求变量，那么如何获取数组的另一个元素

> ID：12637554
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:45:41.550
> 
> 标签：php, arrays, get, request

我在问类似的问题[，将请求值与数组进行比较](https://stackoverflow.com/questions/1807217/if-get-variable-is-equal-to-array)-它对我不起作用，我的情况完全不同

```
 $mkt =   array(
        array( 
            'title' => "Photos", 
            'iconlink' => "http://example.com/xyz.png",
            'pkg' => 'test' 
        ),
        array( 
            'title' => "code",
            'iconlink' => "http://example.com/xyz.png",
            'pkg' => 'main' 
        ),
        array( 
            'title' => "code",
            'iconlink' => "http://example.com/xyz.png",
            'pkg' => 'main' 
        )); 
```

我在这个问题中有逻辑问题，问题是我通过**$_REQUEST**变量获取值，然后我将此请求值与数组 pkg 元素进行比较。如果比较是真的，那么我想得到另一个元素，除了匹配的元素。在此建议中，我正在使用 unset 删除匹配的元素的键，并且所有数组都指向新变量，它工作但不适用于数组的第一个元素，当我将请求变量与数组的第一个元素进行比较时，它显示为**null ：**

```
 $mkt = array();
$newArray = $mkt;

foreach ($newArray as $key => $value ) {

    if (in_array($pn, $mkt, true)) {
        unset($newArray[$key]);
    }
}

$rand_ad = array_rand( $newArray, 1 );

echo json_encode( $newArray[$rand_ad] ); 
```

请看看这个问题，非常感谢我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:57:16.153

在每个值中循环，如果`$pn`与该循环相等，`pkg`则未设置`unset`该元素：

```
$pn = 'main';
$newArray = $mkt;
foreach ($newArray as $key => $val) {
    if ($pn == $val['pkg']) {
        unset($newArray[$key]);
    }
}
echo json_encode($newArray);
// [{"title":"Photos","iconlink":"http:\/\/example.com\/xyz.png","pkg":"test"}] 
```

# eclipse - 导入错误：在终端中运行的 Django 可以工作，但不能在 Eclipse IDE 中运行

> ID：12637556
> 
> 赞同：0
> 
> 时间：2012-09-28T09:45:45.633
> 
> 标签：eclipse, pydev

```
from django.http import HttpResponse

import urllib2
import simplejson
import memcache

def epghome(request):
    mc=memcache.Client(['localhost:11211'])

    if mc.get("jsondata"):
        myval=mc.get("jsondata")

        return HttpResponse("<h1>This Data is coming from Cache :</h1><br> " + str(myval))

    else:

        responseFromIDubba = ""
        responseFromIDubba = urllib2.urlopen("http://www.idubba.com/apps/guide.aspx?key=4e2b0ca2328e03acce0014101d302ac7&type=1&f1=1&f2=0&channel=&gener=&page=0&summary=1").read()
        parseResponseString = simplejson.loads(responseFromIDubba)
    print(parseResponseString)
        body=""

        for data in parseResponseString["data"]:
            #for keys in data:
                #body=body+str(data .items())+".."+str(data[str(keys)])+"<br>"
                body=body+str(data.items())+"<br><br>"
            #body=body+"<br><br>"
        mc.set("epgdata3",body)

        mc.set("jsondata",responseFromIDubba)
        returndata=str(mc.get("jsondata"))
        return HttpResponse("<h1>No Cache Set</h1>" + responseFromIDubba) 
```

嗨，如果我在终端 Python 中运行此代码，则该代码可以正常工作，没有任何错误。但在 ECLIPSE IDE 中，它总是给出`Import Error`.
即使我下载并安装了这些模块。另外，我重新启动了 Eclipse 和我的系统，但这无济于事。

你能给我推荐一个可以同时获取所有图书馆的网站吗？

# ruby - 将 #to_yaml 添加到 DataMapper 模型

> ID：12637559
> 
> 赞同：2
> 
> 时间：2012-09-28T09:45:48.690
> 
> 标签：ruby, yaml, psych

我正在使用 DataMapper 进行数据库访问。我的目标是将模型作为只读对象发送到 Web 服务。这是我目前的尝试：

```
class User
  include DataMapper::Resource

  def to_yaml(opts = {})
    mini_me = OpenStruct.new
    instance_variables.each do |var|
      next if /^@_/ =~ var.to_s
      mini_me.send("#{var.to_s.gsub(/^@/, '')}=", instance_variable_get(var))
    end

    mini_me.to_yaml(opts)
  end

  ....
end

YAML::ENGINE.yamler = 'psych'

u = User.get("hulk")
p u.to_yaml
# => "--- !ruby/object:OpenStruct\ntable:\n  :uid: hulk\n  :uidNumber: 1000\n  :gidNumber: 1001\n  :email: hulk@example.com\n  :dn: uid=hulk,ou=People,o=example\n  :name: Hulk\n  :displayName: Hulk\n  :description: Hulk\n  :homeDirectory: /home/hulk\n  :accountFlags: ! '[U          ]'\n  :sambaSID: S-1-5-21-......\nmodifiable: true\n" 

p [ u ].to_yaml # TypeError: can't dump anonymous class Class 
```

任何想法如何使这项工作并摆脱异常？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:11:10.637

[`to_yaml`在 Psych 中不推荐](https://github.com/tenderlove/psych/blob/v1.3.2/lib/psych/visitors/yaml_tree.rb#L87)使用 using ，从我的测试来看，在这种情况下它似乎实际上被破坏了。

当你`to_yaml`直接调用你的对象时，你的方法被调用并且你得到你期望的结果。当您在包含您的对象的数组上调用它时，Psych 会对其进行序列化，但不会正确处理您的`to_yaml`方法，最终会退回到默认的序列化。在您的情况下，这会导致尝试序列化导致错误的匿名类。

要解决此问题，您应该改用该`encode_with`方法。如果在生成的 yaml 中将序列化表单标记为 OpenStruct 对象很重要，您可以使用`represent_object`（`nil`似乎没有使用第一个参数）：

```
def encode_with(coder)
  mini_me = OpenStruct.new
  instance_variables.each do |var|
    next if /^@_/ =~ var.to_s
    mini_me.send("#{var.to_s.gsub(/^@/, '')}=", instance_variable_get(var))
  end

  coder.represent_object(nil, mini_me)
end 
```

如果您只是为了方便而使用 OpenStruct，则另一种选择可能是：

```
def encode_with(coder)
  instance_variables.each do |var|
    next if /^@_/ =~ var.to_s
    coder[var.to_s.gsub(/^@/, '')]= instance_variable_get(var)
  end
end 
```

请注意，[Datamapper 有自己的序列化程序插件](https://github.com/datamapper/dm-serializer)，可为模型提供 yaml 序列化，可能值得研究。

# php - 使用 Curl 向 PHP 发送数据时出现问题

> ID：12637562
> 
> 赞同：2
> 
> 时间：2012-09-28T09:45:56.757
> 
> 标签：php

我需要一些关于这个 curl 脚本的建议。我正在尝试将值从 FORM 发送到 curl 脚本，但似乎 curl 脚本没有收到信息。

这是脚本：

```
<?php
        if($_SERVER['REQUEST_METHOD'] != 'POST') {
            $self = $_SERVER['PHP_SELF'];
    ?>
                      <form method="post" action="<?php echo $self; ?>" class="form-horizontal">
                          <fieldset>
                                <legend>SMS Contact</legend>
                                <div class="control-group">
                                    <label for="basic" class="control-label">Name and Surname</label>
                                    <div class="controls">
                                        <input type="text" name="name" id="name" disabled class='input-square' value="<?php print $contactname;?> <?php print $contactsurname;?>">
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="basic" class="control-label">Mobile No</label>
                                    <div class="controls">
                                        <input type="text" name="mobile" id="mobile" disabled class='input-square' value="<?php echo urlencode($contactmobile);?>">
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label for="textcounter" class="control-label" id="textcounter">Textarea</label>
                                    <div class="controls">
                                        <textarea name="textcounter" id="textcounter" class='input-square span9 counter' data-max="160" rows='6'></textarea>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button class="btn btn-primary" type="submit">Send SMS</button>
                                </div>
                          </fieldset>
                        </form>
                        <?php
        } else {

            $mobile = $_POST['mobile'];
            $text = $_POST['textcounter'];
            $username = 'xxxx';
            $password = 'xxxx';

            // Set Timezone
            date_default_timezone_set('Africa/Johannesburg');
            $date = date("m/d/y G.i:s", time());

            // Create Unique ID
            $code = md5(time());
            $newid = $code.$clientid;

            $sql="INSERT INTO sent_itmes (sent_id, sent_message, sent_date, sent_quantity, client_id, sent_mobile)VALUES('$newid', '$text', '$date', '1', '$clientid', '$mobile')";
            $result=mysql_query($sql);

    $url = "http://bulksms.2way.co.za/eapi/submission/send_sms/2/2.0"; // URL to calc.cgi
            $fields = array(
            'site'=>'',
            'username'=>($username),
            'password'=>($password),
            'message'=>urlencode($text),
            'msisdn'=>urlencode($mobile)

                            );
            $fields_string="?";
            //url-ify the data for the POST
            foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
            rtrim($fields_string,'&');

            //open connection
            $ch = curl_init();

            //set the url, number of POST vars, POST data
            curl_setopt($ch,CURLOPT_URL,$url);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);
            curl_setopt($ch,CURLOPT_POST,count($fields));
            curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

            //execute post
            ob_start();
            curl_exec($ch);
            ob_end_clean();
            echo '<div class="alert alert-block alert-success">
                                          <a class="close" data-dismiss="alert" href="#">×</a>
                                          <h4 class="alert-heading">Success!</h4>
                                          Your message has been Sent!
                                        </div><br/><br/><a href="search_contact.php" class="btn btn-large btn-round">Search Contact</a>';

            //close connection
            curl_close($ch);
        }
        ?> 
```

提交表单时，我从响应服务器收到错误“未指定收件人”，因此这意味着表单值“mobile”不会通过该值传递给 curl。

请帮助，让我失去理智。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:56:37.297

用它来发送数据

```
 //open connection
        $ch = curl_init($url);

        curl_setopt($ch,CURLOPT_POST,count($fields));
        curl_setopt($ch,CURLOPT_POSTFIELDS,POSTVARS.$fields_string); // this line is edited..
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION  ,1);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, false);

        //execute post
        ob_start();
        curl_exec($ch); 
```

你的订单错了……

更多信息[http://www.askapache.com/php/sending-post-form-data-php-curl.html](http://www.askapache.com/php/sending-post-form-data-php-curl.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:58:59.927

尝试添加一个标题来描述您发布的内容以及您应用的内容

```
 curl_setopt ( $ch, CURLOPT_HTTPHEADER, array(
        'Content-type: application/x-www-form-urlencoded',
        'Accept: text/html',
        'Expect: ',
    ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T11:51:24.443

当您提交带有禁用字段的表单时，该字段不会发送：

```
<input type="text" name="mobile" id="mobile" disabled class='input-square' value="<?php echo urlencode($contactmobile);?>"> 
```

如果要发送“移动”，则应为其添加隐藏字段。并且可能替换禁用的字段名称

# svn - 如何使用 SVN 在给定时间范围内获取用户的所有提交消息

> ID：12637565
> 
> 赞同：1
> 
> 时间：2012-09-28T09:46:04.953
> 
> 标签：svn

是否可以在给定的时间范围内获取用户的所有提交消息？过去我使用 Trac 浏览 SVN，但现在无法使用此服务。

最好的办法是在命令行上使用 Linux。

最好的问候，克里斯蒂安。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:14:46.007

```
svn log -r {date1}:{date2} --xml | xmlstarlet sel -t -m "/log/logentry/author[text()='author_name']/.." -t -v "/log/logentry/msg" 
```

请参阅 Subversion Book（[一](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.log.html)、[二](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html)）、[xmlstarlet 文档](http://xmlstar.sourceforge.net/docs.php)和[类似问题](https://stackoverflow.com/questions/2976012/how-do-i-find-the-revisions-made-by-a-specific-subversion-user)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T15:25:05.623

从 Subversion 1.8 开始，[您可以将`--search`命令行选项与`svn log`command](http://svnbook.red-bean.com/en/1.8/svn.ref.svn.c.log.html)一起使用。

此命令行选项允许您在存储库历史记录中搜索：

*   修订的作者（svn:author 未版本化的属性），
*   日期（svn：日期未版本化属性），
*   日志消息文本（svn:log unversioned 属性），
*   以及受特定版本影响的路径（使用`svn log --verbose`）。

# php - HTTP Post 文件到网络服务器失败

> ID：12637567
> 
> 赞同：0
> 
> 时间：2012-09-28T09:46:09.783
> 
> 标签：php, http, post

从我们的离线应用程序中，我们希望通过 HTTP Post 将一个 xml 文件发布到我们的网络服务器。这工作正常，但当 xml 大于 650KB 时，帖子失败。

我们网络服务器上的 PHP 设置：

*   memory_limit **128M**
*   post_max_size **32M**
*   上传最大文件大小**16M**

有人知道问题可能是什么吗？

**更新**

我在我们的网络服务器上测试了一些东西。我制作了一个带有 textarea 的表单并将 XML 粘贴到 textarea 中。当我提交表单时，我没有得到任何回显的 POST 结果，但是当我粘贴 XML 的一半时，我得到了结果。

奇怪的是我在发布整个 XML 时没有收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:50:48.773

尝试将其放在表单提交时调用的 php 文件的顶部：

```
set_time_limit(0); 
```

也许您的连接速度太慢，无法在允许的 php 脚本执行时间内发送该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:50:56.303

运行 phpinfo() 并检查这些变量是否是您所想的。也许某些 .htaccess 或其他网络服务器配置文件正在覆盖它们。还要检查是否没有连接超时。

当发布失败时，您从服务器得到什么响应？

# phonegap-plugins - 像 Facebook 一样安装 PhoneGap 插件

> ID：12637569
> 
> 赞同：0
> 
> 时间：2012-09-28T09:46:28.393
> 
> 标签：phonegap-plugins

我是 PhoneGap 的新手，我已经使用`phonegap-plugin`Eclipse 和 XCode 等编辑器为 Android 和 iPhone 实现了 PhoneGap Facebook 插件。但我想知道：

有没有其他方法可以使用`config.xml`构建应用程序来安装插件`build.phonegap`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:41:38.987

一段时间以来，PhoneGap 的人们一直在谈论向 PhoneGap Build 添加插件支持，但还没有发布任何东西。以下是他们在 2012 年 4 月前后所说的话：

[http://community.phonegap.com/nitobi/topics/_phonegap_build_future_plugin_support](http://community.phonegap.com/nitobi/topics/_phonegap_build_future_plugin_support)

# scala - 'MyType = Int => Boolean' 是什么意思

> ID：12637570
> 
> 赞同：10
> 
> 时间：2012-09-28T09:46:37.167
> 
> 标签：scala

下面的 scala 声明是什么意思：

```
type MyType = Int => Boolean 
```

这是我的理解：

我声明了一个新类型“MyType”，但高阶函数“Int => Boolean”是什么意思

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T09:48:52.473

与其声明一个新*类型*不如声明一个新类型*alias*。它们仍然是同一类型：但是别名让您可以更简洁地编写它。

`Int => Boolean`是一个函数的类型，它接受一个参数，一个 Int，并返回一个布尔值。

例如，像“大于 5”这样的函数可能有 type `Int => Boolean`：

```
type MyType = Int => Boolean
val greaterThan5: MyType = (x: Int) => x > 5
greaterThan5(7)  // true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T09:49:57.050

你是对的，以下编译：

```
type MyType = Int => Boolean
def positive(x: Int) = x > 0
val fun: MyType = positive
fun(42)  //yields true 
```

在这里，您声明类型别名，表示`MyType`相当于函数获取`Int`和返回`Boolean`。然后你创建一个匹配这种声明的方法。最后，将此方法分配给`MyType`类型的变量。它编译和工作得很好。

请注意，这只是*别名*，而不是新类型：

```
trait MyType2 extends (Int => Boolean)
val fun2: MyType2 = positive _
error: type mismatch;
 found   : Int => Boolean
 required: MyType2
       val fun2: MyType2 = positive _
                           ^ 
```

# iphone - 将手动时间设置为今天日期并在 ios6 中创建日期时间对象

> ID：12637573
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:46:41.723
> 
> 标签：iphone, ios, ios-simulator, ios6

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"yyyy-MM-dd";
NSTimeZone *gmt =  [NSTimeZone defaultTimeZone];
[dateFormatter setTimeZone:gmt];
NSString *cur_date= [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"%@",cur_date); 
```

现在我将手动时间设置为今天的日期：

```
NSString *cur_time=@"13:05:08";

dateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSDate *date_obj=[dateFormatter dateFromString:[cur_date stringByAppendingFormat:@" %@",cur_time]];
NSLog(@"%@",date_obj); 
```

但我今天要约会`NSlog`显示为

```
2012-09-28 07:35:08 +0000 
```

即使我将时间设置为`13:05:08`.

如何将手动时间设置为当前日期并从中制作一个`datetime`对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:56:23.277

```
//Try using Time Interval

[myDate addTimeInterval:entertimeinterval]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:52:21.167

做这个

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"yyyy-MM-dd";
//You can either use UTC or GMT
NSTimeZone *gmt =  [NSTimeZone timeZoneWithName:@"GMT"];// This is where I made the change
[dateFormatter setTimeZone:gmt];
NSString *cur_date= [dateFormatter stringFromDate:[NSDate date]];
NSLog(@"%@",cur_date);    

NSString *cur_time=@"13:05:08";

dateFormatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSDate *date_obj=[dateFormatter dateFromString:[cur_date stringByAppendingFormat:@" %@",cur_time]];
NSLog(@"date %@",date_obj); 
```

希望这会奏效

# magento - magento 管理后端自定义表上的 CRUD 操作

> ID：12637574
> 
> 赞同：1
> 
> 时间：2012-09-28T09:46:45.170
> 
> 标签：magento, crud, multiple-tables, magento-1.7

我添加了 2 个表，现在可能需要更多，我正在研究如何在后端添加管理页面。我发现这个 SO 问题[Magento: Custom Module: How to Manage with Multiple tables](https://stackoverflow.com/questions/8258084/magento-custom-module-how-to-manage-with-multiple-tables)这正是我需要的。用我自己的话来说，给出的答案是公正的`that's too dificult to achieve and too long to explain in SO`。

那么，有人愿意分享一些链接、教程或 DIY 一步一步的解释吗？感谢@AlanStorm 教程，我的模型已经开始工作和配置。我正在我的代码中执行 CRUD 操作，但出于管理目的，我需要从窗口的后端执行此操作。

我认为这个[Magento 自定义 CRUD 应用程序教程](http://www.amicontech.com/blog/magento-custom-crud-application-tutorial/)会对我有所帮助，但它涉及使用 magento ModuleCreator 插件，并且在 magento 1.7.0.2 上不适合我。此外，我已经完全配置了自己的模块，因此不需要模块创建者添加的许多内容。

找到[了这个示例/教程/代码](http://codemagento.com/2011/02/grids-and-forms-in-the-admin-panel/)，但我很难遵循它，有很多晦涩的点，并且不确定我在做什么，即使它是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:30:45.903

[您肯定可以从一些 adminhtml 网格中受益，如果您寻找它们](https://www.google.co.uk/search?q=magento+adminhtml+grid)，不乏教程。我写了我自己的，我现在[无耻地插在这里](http://www.knectar.com/labs/ez-speedy-make-me-grid-admin-method-ey)。

# android - 具有淡出效果的填充路径和绘制路径

> ID：12637575
> 
> 赞同：1
> 
> 时间：2012-09-28T09:46:45.610
> 
> 标签：android, canvas

我画了一个填充路径（形状）

```
canvas.drawPath(mypath, paint); 
```

这工作正常。现在我的问题：我想要一个特殊的效果，颜色的不透明度降低到路径的边界（形状）。所以在形状的中心，不透明度将是 100% 并且到边界颜色淡出到 0% ( 0 opacity )

有没有人提示我如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:45:28.157

这是不可行的，除非路径是一个简单的类似椭圆的形状（在这种情况下，您可以使用 RadialGradient 填充它）。

另一种选择是将内部模糊 MaskFilter 设置为油漆，如下所示：

```
float blurRadius = 10;
paint.setMaskFilter(new BlurMaskFilter(blurRadius,
                                       BlurMaskFilter.Blur.NORMAL)); 
```

在模糊的情况下，结果也高度依赖于路径形状。

# java - 在另一个私有函数中访问一个私有函数的变量

> ID：12637579
> 
> 赞同：1
> 
> 时间：2012-09-28T09:47:09.360
> 
> 标签：java, netbeans-6.9

给定以下代码，我如何使用`myInt`in `private void jButton1`from `private void jButton2`？

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    int myInt = (Integer)jSpinner1.getValue();
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    int b = 0;
    int c = myInt;
    do {
        try {
            Object newInstance = Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost/rk","root","root");
            PreparedStatement ps = (PreparedStatement) con.prepareStatement("INSERT INTO factors VALUES(?,?,?,?,?,?)");
            ps.setString(1,jTextField7.getText());
            ps.setString(2,jTextField8.getText());
            ps.setString(3,jTextField9.getText());
            ps.setString(4,jTextField10.getText());
            ps.setString(5,jTextField11.getText());
            ps.setString(6,jTextField12.getText());

            ps.executeUpdate();

            jTextField7.setText("");
            jTextField8.setText("");
            jTextField9.setText("");
            jTextField10.setText("");
            jTextField11.setText("");
            jTextField12.setText("");
        }
        catch (Exception e) {
            System.out.println(e);
        }

        b++;
    } while(b < my);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:48:50.133

你不能。这些是仅在方法调用期间存在的*局部变量。*

如果您想在另一个方法中使用该值，则必须通过参数将其传递，或者将其设为*实例*（或静态，如果必须）变量，使其成为对象状态的一部分。

基本上，您的`jButton1ActionPerformed`方法目前没有任何用处 - 它正在为局部变量分配一个值，然后立即超出范围。

顺便说一句，如果您不熟悉 Java 的基础知识，我*强烈*建议您在控制台应用程序中学习它们，您不需要处理复杂的用户界面。学习语言的基础知识，*然后*从用户界面开始学习一些核心库（集合、IO 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T09:50:22.380

将 myInt 传递给一个字段。

```
private int myInt;
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    myInt = (Integer)jSpinner1.getValue();
}

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    int b = 0;
    int c=myInt;
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:49:32.590

即使你有你的方法`public`，你也无法在外面访问它的局部变量。它的范围仅限于定义方法。

最好将该变量声明为类中的字段..

`myInt`您的方法中的变量`jButton1ActionPerformed`应声明为实例字段，否则将不会使用该变量..您没有在任何地方使用它..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:49:52.613

唯一的方法是将局部变量作为参数传递给另一个私有方法。局部变量（在方法内声明的变量）仅限于该方法。除非您将它们作为参数传递或返回它们，否则您不能直接在其他方法中使用它们。是的，它是否是**私有/公共/受保护/默认/静态标记的方法**并不重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T09:51:08.433

变量与[变量作用域](http://www.java2s.com/Tutorial/Java/0020__Language/VariableScope.htm)相关联。在这种情况下，`myInt`在一个方法范围中声明，然后您尝试从不同的方法范围访问它。这是不可能的。

要绕过它，您必须将`myInt`变量提升为全局（类）变量，如下所示：

```
private int myInt;
...
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    this.myInt = (Integer)jSpinner1.getValue();
}
...

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
   int b = 0;
   int c= this.myInt;
... 
```

这将意味着在类范围内声明的任何内容都可以访问此变量，这意味着您的变量现在可以从您的所有方法中访问。

# c++ - 我必须使用 0.f 初始化浮点数吗？

> ID：12637581
> 
> 赞同：17
> 
> 时间：2012-09-28T09:47:15.500
> 
> 标签：c++, variables, initialization

当我在程序中初始化`float`变量时，我通常有如下向量：

```
Vector forward(0.f,0.f,-1.f),right(1.f,0.f,0.f),up(0.f,1.f,0.f) 
```

（向量只是 3 个浮点数，如`struct Vector{ float x,y,z; };`）

这看起来*更*容易阅读为：

```
Vector forward(0,0,-1),right(1,0,0),up(0,1,0) 
```

我必须使用s初始化我的`float`变量吗？`float`当我使用整数（或`double`s）初始化 a时，我是否会丢失任何东西或招致某种惩罚`float`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T09:49:31.880

两者之间没有语义差异。但是，根据某些编译器，可能会生成额外的代码。另请参阅同一主题的[这个](https://stackoverflow.com/questions/5199338/what-is-the-significance-of-0-0f-when-initializing-in-c)和[这个](https://stackoverflow.com/questions/1384434/c-difference-between-0-and-0-0)SO 问题。

我可以确认`gcc`为所有变体生成相同的代码

```
int main()
{
    float a = 0.0f; /* or 0 or 0.0 */
    return 0;
} 
```

并且这段代码是

```
 .file   "1.c"
    .text
    .globl  main
    .type   main, @function
main:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    $0x00000000, %eax
    movl    %eax, -4(%rbp)
    movl    $0, %eax
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0:
    .size   main, .-main
    .ident  "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
    .section    .note.GNU-stack,"",@progbits 
```

相关线路是

```
 movl    $0x00000000, %eax 
```

更改`a`为`0.1`（或`0.1f`）将行更改为

```
 movl    $0x3dcccccd, %eax 
```

似乎`gcc`能够推断出正确的常数并且不会生成额外的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-23T19:27:36.893

对于单个文字常量，这无关紧要。在初始化器的上下文中，任何数字类型的常量都将被隐式转换为正在初始化的对象的类型。这是由语言标准保证的。所以所有这些：

```
float x = 0;
float x = 0.0;
float x = 0.0f;
float x = 0.0L;   // converted from long double to float 
```

同样有效并导致相同的值存储在`x`.

但是，更复杂的表达式中的文字常量可能会产生令人惊讶的结果。

在大多数情况下，每个表达式都是由自身计算的，而不管它出现在什么上下文中。在评估子表达式*后*应用任何隐式转换。

所以如果你写：

```
float x = 1 / 2; 
```

该表达式`1 / 2`将被评估为`int`，产生`0`，然后转换为`float. It will set`x `to`0.0f `, not to`0.5f`。

我认为使用无后缀浮点常量（类型为`double`）应该是安全的。

顺便说一句，您可能会考虑使用`double`而不是`float`在您的程序中。`double`正如我所提到的，它是无后缀浮点常量的类型，在某种意义上可以被认为是“默认”浮点类型。它通常比 具有更大的范围和精度`float`，并且通常在性能上没有太大差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T19:08:46.933

It could be a good programming practise to always write 0.f, 1.f etc., even if *often* gcc can figure out what the programmer means by 1.0 et al.

The problematic cases are not so much trivial float variable initializations, but numeric constants in somewhat more complex formulae, where a combination of operators, float variables and said constants can easily lead to occurrence of unintended double valued calculations and costly float-double-float conversions.

Spotting these conversions without specifically checking the compiled code for them becomes very hard if the intended type for numeric values is mostly omitted in the code and instead only included when it's absolutely required. Hence I for one would choose the approach of just typing in the f's and getting used to having them around.

# performance - 为什么整数分解是非多项式时间？

> ID：12637582
> 
> 赞同：15
> 
> 时间：2012-09-28T09:47:19.597
> 
> 标签：performance, cryptography, rsa, public-key-encryption, factorization

我只是计算机科学的初学者。我学到了一些关于运行时间的知识，但我不能确定我的理解是正确的。所以请帮助我。

所以整数分解目前不是多项式时间问题，而是素性检验。假设要检查的数字是n。如果我们运行一个程序只是为了确定从 1 到 sqrt(n) 的每个数字是否可以整除 n，如果答案是肯定的，则存储该数字。我认为这个程序是多项式时间，不是吗？

我错的一种可能方法是分解程序应该找到所有素数，而不是发现的第一个素数。所以也许这就是原因。

然而，在公钥密码学中，找到一个大数的素因数对于攻击密码学至关重要。由于通常一个大数（公钥）只是两个素数的乘积，所以找到一个素数就意味着找到另一个素数。这应该是多项式时间。那么为什么攻击很难或不可能呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T17:50:20.610

诸如“多项式因式分解算法”之类的复杂性的随意描述通常是指相对于输入*大小*的复杂性，而不是对输入的*解释*。因此，当人们说“没有已知的多项式因式分解算法”时，他们的意思是没有已知的算法可以分解*N*位自然数，该算法在时间多项式中运行关于*N*。不是关于数字本身的多项式，最多可以是 2^ *N*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T23:10:29.260

因式分解的难度是那些简单易懂的美丽数学问题之一，可以立即将您带到人类知识的边缘。总结（今天）关于这个主题的知识：我们不知道为什么它很难，没有任何程度的证明，以及我们在超过多项式时间（但也明显少于指数时间）中运行的最佳方法。[素数测试](http://en.wikipedia.org/wiki/Primality_test)甚至在 P 中的结果是最近的；请参阅链接的维基百科页面。

我所知道的最好的启发式解释是素数是随机分布的。更容易理解的结果之一是[狄利克雷定理](http://en.wikipedia.org/wiki/Dirichlet%27s_theorem_on_arithmetic_progressions)。这个定理说每个算术级数都包含无限多个素数，换句话说，你可以认为素数相对于级数是密集的，这意味着你无法避免遇到它们。这是相当大的此类结果集合中最简单的一个；在所有这些中，素数的出现方式非常类似于随机数。

因此，因式分解的困难类似于无法逆转一次性填充。在一次性垫中，有一点我们不知道与另一个我们不知道的异或。知道 XOR 的结果，我们得到关于单个位的零信息。将“bit”替换为“prime”，将乘法替换为 XOR，就会出现因式分解问题。就好像您将两个随机数相乘，并且您从产品中获得的信息非常少（而不是零信息）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T09:59:22.023

> 如果我们运行一个程序只是为了确定从 1 到 sqrt(n) 的每个数字是否可以整除 n，如果答案是肯定的，则存储该数字。

即使忽略较大数字的可分性测试将花费更长的时间，如果您仅将单个（二进制）数字添加到`n`. （实际上如果添加两个数字会花费两倍的时间）

我认为这就是指数运行时间的定义：`n`延长一点，算法需要两倍的时间。

但请注意，此观察仅适用于您提出的算法。整数分解是否是多项式仍然未知。密码学家当然希望不是这样，但也有一些替代算法不依赖于素因数分解是困难的（例如椭圆曲线密码学），以防万一......

# java - Android 2.2 Webview 导致 OpenGL ES API 没有当前上下文（每个线程记录一次）

> ID：12637584
> 
> 赞同：12
> 
> 时间：2012-09-28T09:47:22.113
> 
> 标签：java, android, web-applications, opengl-es

首先，感谢您阅读这篇文章并提前帮助我解决这个问题。我目前正在为 android 创建一个 webshel​​l 来运行 Webapps，它在 Android 2.2 SDK 上运行。

当我调试我的应用程序时出现问题（这是通过 USB 在 Android 4.0 手机上完成的）：

```
09-28 11:32:32.415: D/dalvikvm(25629): Debugger has detached; object registry had 576 entries
09-28 11:32:36.355: W/ActivityThread(25764): Application com.android_api8_webshell is waiting for the debugger on port 8100...
09-28 11:32:36.375: I/System.out(25764): Sending WAIT chunk
09-28 11:32:36.380: I/dalvikvm(25764): Debugger is active
09-28 11:32:36.575: I/System.out(25764): Debugger has connected
09-28 11:32:36.575: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:36.775: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:36.975: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:37.175: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:37.375: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:37.575: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:37.780: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:37.980: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:38.180: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:38.385: I/System.out(25764): waiting for debugger to settle...
09-28 11:32:38.585: I/System.out(25764): debugger has settled (1497)
09-28 11:32:38.710: I/webclipboard(25764): clipservice: android.sec.clipboard.ClipboardExManager@41a184d8
09-28 11:32:38.765: V/StringUrl(25764): String: http://www.cidesign.nl
09-28 11:32:38.785: D/WML_SISO(25764): InitPasteboardJni
09-28 11:32:38.795: V/(25764): NotificationPresenterImpl::setSettingsValue 0 
09-28 11:32:38.795: V/(25764): NotificationPresenterImpl::setSettingsValue 0 
09-28 11:32:38.800: D/webkit(25764): Firewall not null
09-28 11:32:38.800: D/webkit(25764): euler: isUrlBlocked = false
09-28 11:32:38.930: D/CLIPBOARD(25764): Hide Clipboard dialog at Starting input: finished by someone else... !
09-28 11:32:42.440: I/GATE(25764): <GATE-M>DEV_ACTION_COMPLETED</GATE-M>
09-28 11:32:42.455: E/libEGL(25764): call to OpenGL ES API with no current context (logged once per thread)
09-28 11:32:42.455: D/ShaderProgram(25764): couldn't load the vertex shader!
09-28 11:32:42.455: E/libEGL(25764): call to OpenGL ES API with no current context (logged once per thread)
09-28 11:32:42.455: D/ShaderProgram(25764): couldn't load the vertex shader!
09-28 11:32:42.455: E/libEGL(25764): call to OpenGL ES API with no current context (logged once per thread)
09-28 11:32:42.455: D/ShaderProgram(25764): couldn't load the vertex shader!
09-28 11:32:42.455: E/libEGL(25764): call to OpenGL ES API with no current context (logged once per thread)
09-28 11:32:42.455: D/ShaderProgram(25764): couldn't load the vertex shader!
09-28 11:32:42.455: E/libEGL(25764): call to OpenGL ES API with no current context (logged once per thread)
09-28 11:32:42.455: D/ShaderProgram(25764): couldn't load the vertex shader! 
```

这是我在主类中的代码：

```
package com.android_api8_webshell;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebSettings;

public class Main extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView myWebView = (WebView) findViewById(R.id.webView1);

        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);

        Log.v("StringUrl", "String: " + getResources().getText(R.string.url));

        myWebView.loadUrl(getResources().getText(R.string.url).toString());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }  
} 
```

最后但并非最不重要的一点是，xml im 运行于：

```
<resources>
    <string name="title_activity_main">Main</string>
    <string name="url">http://www.cidesign.nl</string>
    <string name="app_name">Android_API8_WebShell</string>
    <string name="menu_settings">Settings</string>
</resources> 
```

我知道这种配置可以帮助其他人：

```
<application android:hardwareAccelerated="true" ...> 
```

但是，对于 2.3.3 以上的 SDK，我运行的 SDK 不支持此功能。

我真的希望你能帮我解决这个问题。

提前致谢，

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T17:44:17.437

要获取`android:hardwareAccelerated`属性并仍然支持 API 8 (2.2)，请设置`targetSdkVersion`为 11，但保持`minSdkVersion`原样：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="11" />
<application android:hardwareAccelerated="true" ... 
```

在 API 11 之前的设备上运行时，`hardwareAccelerated`将被忽略。

# javascript - jquery中图像之间的间隔

> ID：12637586
> 
> 赞同：1
> 
> 时间：2012-09-28T09:47:26.383
> 
> 标签：javascript, jquery, image, transition

我开始学习 jquery，我现在正在研究与 jquery 的标题图像交叉。我让代码正常工作，但我现在需要的是图像之间的间隔，在交叉之后我希望脚本暂停特定时间，然后继续下一个图像。

我得到了这个代码。

```
$(document).ready(function(e) {
    $('.img:gt(0)').hide();
    setInterval(function(){
        $(".img:first-child").fadeOut(3000).next(".img").fadeIn(3000).end().appendTo("#kop")
    }, 4000);
}); 
```

是否可以采用这种形式，或者我必须完全更改代码。

我现在让它在我的测试服务器上运行。[swinging.icwebdesign.nl](http://swinging.icwebdesign.nl)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:48:40.407

目前正在发生的事情是您需要 3000 毫秒来进行转换，而转换函数调用之间的时间是 4000 毫秒 - 因此，您只会得到 1000 毫秒的“延迟”。
in的第二个参数`setInterval()`是`delay`时间，在下面的代码中等于`fadeTime`+`delay`时间。

```
$(document).ready(function(e) {
    var delay = 3000, 
        fadeTime = 3000;
    $('.img:gt(0)').hide();
    setInterval(function(){
        $(".img:first-child").fadeOut(fadeTime).next(".img").fadeIn(fadeTime).end().appendTo("#kop")
    }, delay+fadeTime);
}); 
```

# ios - 如何保护越狱设备中的 plist 文件？

> ID：12637588
> 
> 赞同：1
> 
> 时间：2012-09-28T09:47:29.313
> 
> 标签：ios, plist, jailbreak

我们开发了几个应用程序/游戏。我们从 plist 存储/检索数据。

*   但在越狱设备中，plist 文件可以通过多种工具进行编辑。

我已经搜索了以下内容#

*   [如何保护 plist 或 NSUserDefaults](https://stackoverflow.com/questions/4646849/how-to-secure-plist-or-nsuserdefaults)
*   [http://useyourloaf.com/blog/2010/03/29/simple-iphone-keychain-access.html](http://useyourloaf.com/blog/2010/03/29/simple-iphone-keychain-access.html)
*   [https://github.com/matthiasplappert/Secure-NSUserDefaults](https://github.com/matthiasplappert/Secure-NSUserDefaults)

这些教程讲述了如何防止您的 plist 被更改。但我们不想让用户（有害用户）显示任何数据。

*   有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:37:16.370

主要问题是你在保护谁？

1）如果你想保护你的 plist 免受不成熟的用户的窥探（只是和普通人有一些工具），你所需要的就是加密 plist（即使是硬编码的密钥也应该足够了）

2）如果你想保护它免受有权访问手机的黑客的攻击，那么你将不得不做很多动作 - 你需要一个密码，这个密码应该很长，它应该用盐和这个应（直接或间接）用作保护的关键。这样，不知道密码的黑客将无法访问您的 plist。

3）如果您试图防止恶意软件（专门设计用于从您正在运行的应用程序中获取数据），那么您就完蛋了。由于 Jailbroken 设备上的监狱已被破解，因此恶意软件实际上可以做任何事情，并且当您的应用程序解密它时，它总是能够将您的 plist 从内存中复制出来。

# deployment - 发布应用程序的所有组件何时会出现问题？

> ID：12637591
> 
> 赞同：1
> 
> 时间：2012-09-28T09:47:40.063
> 
> 标签：deployment, components, software-design

软件设计的一个共同目标似乎是构建应用程序，以便更改影响最小数量的组件（即编译的程序集），然后可以单独发布这些组件。应用了依赖倒置原则，因此稳定的组件不依赖于易失的组件，类再次以某种方式打包以将部署限制为最小的组件集。

所以我的问题是，每次更改都发布整个应用程序有什么问题？特别是如果发布是完全自动化的一键式解决方案。当然，单独部署组件意味着我必须将它们作为具有自己依赖项的迷你项目单独进行版本控制和管理？很大一部分“好设计”似乎都依赖于这样一个原则，即分别发布每个组件是一件好事，但为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:10:31.057

> 每次更改都发布整个应用程序有什么问题？

如果你能驾驭它，我认为没有任何问题。这似乎是 Facebook 采取的[方法](http://arstechnica.com/business/2012/04/exclusive-a-behind-the-scenes-look-at-facebook-release-engineering/)：

> 由于 Facebook 的整个代码库都被编译为单个二进制可执行文件，因此该公司的部署过程与您通常在 PHP 环境中所期望的完全不同。Rossi 告诉我，代表整个 Facebook 应用程序的二进制文件大小约为 1.5GB。当 Facebook 更新其代码并生成新版本时，必须将新的二进制文件推送到公司的所有服务器。

部分部署有时对于维护组件团队之间的一定程度的自主性很有用，但如果组件的特定版本组合尚未经过测试，它们可能会导致意外行为。

然而，模块化设计的动机更多是围绕易于更改（可进化性、可维护性、低耦合、高内聚）而不是进行部分部署的能力。

# javascript - 在节点 js 中的 .ajax jquery 包装器中从 POST 请求渲染 mongodb 数据库结果

> ID：12637592
> 
> 赞同：2
> 
> 时间：2012-09-28T09:47:41.957
> 
> 标签：javascript, jquery, node.js, mongodb

我正在创建一个基本功能，允许用户将他们的位置发送到服务器，然后服务器查询数据库并返回他们附近的位置。我正在使用下面的 jQuery .ajax 包装器将数据发布到服务器。这采用 latlon 点的形式，然后用作 MongoDB 中使用 nodejs 进行地理搜索的基础，并在后端表达。然后将搜索结果返回给客户端并由 createMapListings 函数呈现。

/find 页面最初是通过与以下代码分开的 mongodb 对数据库的 GET 请求呈现的。然而，在初始渲染之后，我想根据提供的位置返回结果。

POST 方法工作正常，位置已发布到服务器，并返回搜索结果，因为我可以通过控制台日志打印内容。

但是，我想在客户端呈现结果。如前所述，搜索结果在控制台中呈现，但是当我尝试传递到客户端时，我可以在#output div 中呈现数据本身（以对象数组的形式），但是 createMapListings 函数似乎没有捕捉到数据。

事实上，下面的函数似乎被调用，但打印出超过一千行，其中应捕获的数据描述为“未定义”。我尝试使用 res.render 和 res.redirect，但在第一种情况下，视图呈现在 div 中（我认为这是预期的）并且重定向失败。

当向服务器发出简单的 GET 请求时，createMapListings 函数可以正常工作，例如，对于集合中的所有对象，使用 ejs 模板。但是，我认为这里的问题可能是 POST 请求的组合，然后希望使用完整的回调将结果传递回 AJAX 请求。

如果以下代码有些迟钝，我深表歉意。我绝对是你所说的初学者。我很欣赏上述功能可能无法实现，所以如果有更好的方法，我当然会接受它（也许是 res.direct）。

这是相关的客户端脚本：

```
$(document).ready(function(){

$("#geolocate").click(function(){ 
navigator.geolocation.getCurrentPosition(geolocate, function(){

        });
     });
 });

function geolocate(pos){
     var latlonpt = [];
     var x = pos.coords.latitude;
     var y = pos.coords.longitude;
     latlonpt.push(x);
     latlonpt.push(y); 

    var obj = {
    userlocation: latitudelongitudept
    };

   $.ajax({
    url: "/find",
    type: "POST",
    contentType: "application/json",
    processData: false,
    data: JSON.stringify(obj),
    complete: function (data) {
        $('#output').html(data.responseText);
        $('#infooutput').children().remove();
        createMapListings(data.responseText); 
        }
     });
 };

 function createMapListings(maps) {
 for (var i = 0; i < maps.length; i++) {
 var url = maps[i]._id;
 var fullurl = "<a href='/show?id=" + url + "'>Route</a></div>";
 var title = "<div>" + maps[i].title + " - " + fullurl +"";
 $('#infooutput').append(title);

     };
  };

 </script> 
```

这是基本快递应用程序中用于处理上述 .ajax 包装器发出的发布请求的相关路由。

```
 exports.findbylocation = function(req, res) {
 console.log(req.body.userlocation);
 var userlocation = req.body.userlocation;
 Map.ensureIndexes;
 Map.find({loc :{ $near : userlocation }}, function(err, maps) {

 if (err) { 
          console.log(err)
          }
 else {    
       var jmaps = JSON.stringify(maps);
       console.log(jmaps);
       res.send(jmaps);
      }      
   });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:40:18.590

按照惯例，回调签名`data`中的变量名`$.ajax`指的是已解析的 HTTP 响应正文。由于您的回调是 on `complete`，我们实际上通过了 `XMLHttpRequest`used，按照约定称为`xhr`. 您正确地获取了该`responseText`属性，但这需要解析才能有用。只要我们照顾好我们`Content-Type`的 's 并且不明确禁用`processData`，jQuery 就会为我们进行编码/取消编码——我们只是处理对象。这是一件好事，因为传输格式通常对应用程序逻辑并不特别重要。如果我们使用`res.json(maps)`代替`res.send(jmaps)`，我们可以更简单地编写我们的调用：

```
$.ajax({
    url:  '/find',
    type: 'POST',
    data: obj,

    success: function(data) {},
    error:   function(xhr, text, err) {}
}); 
```

这`data`是一个已经解析并可以使用的 Javascript 对象。我们还使用默认`application/x-www-form-urlencoded`请求而不是显式设置`contentType`. 就 express 而言，这是一样的：它只会被[urlencoded](http://www.senchalabs.org/connect/urlencoded.html)而不是[json](http://www.senchalabs.org/connect/json.html)解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:47:56.983

假设你解决了你的客户问题。

由于您使用 express 没有必要`JSON.stringfy`，您可以使用`res.json(maps)`.

# java - 使用maven的两个依赖项的Maven concat/merge META-INF/service/file？

> ID：12637594
> 
> 赞同：6
> 
> 时间：2012-09-28T09:47:46.433
> 
> 标签：java, maven, jar, meta-inf

天！

我的项目中有两个依赖项，它们`config-files`在`META-INF/services/xxx`.

是否有一些程序可以*合并/合并* 这两个配置文件而不是覆盖？

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:15:37.550

也许你应该看看[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)它可能会更好。

# shell - 随机获取 File 中 20% 的行

> ID：12637599
> 
> 赞同：1
> 
> 时间：2012-09-28T09:48:09.737
> 
> 标签：shell

这是我的代码：

```
nb_lignes=`wc -l $1 | cut -d " " -f1`
for i in $(seq $nb_lignes)
do
m=`head $1 -n $i | tail -1`
//command
done 
```

请问如何更改它以随机获取文件中 20% 的行以在每行上应用“命令”？20% 或 40% 或 60 %（这是一个参数）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:04:53.877

This will randomly get 20% of the lines in the file:

```
awk -v p=20 'BEGIN {srand()} rand() <= p/100' filename 
```

So something like this for the whole solution (assuming bash):

```
#!/bin/bash
filename="$1"
pct="${2:-20}"     # specify percentage
while read line; do
  : # some command with "$line"
done < <(awk -v p="$pct" 'BEGIN {srand()} rand() <= p/100'  "$filename") 
```

If you're using a shell without command substitution (the `<(...)` bit), you can do this - but the body of the loop won't be able to have any side effects in the outer script (e.g. any variables it sets won't be set anymore once the loop completes):

```
#!/bin/sh
filename="$1"
pct="${2:-20}"     # specify percentage
awk -v p="$pct" 'BEGIN {srand()} rand() <= p/100'  "$filename" | 
 while read line; do
   : # some command with "$line"
 done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:01:20.657

你可以用 awk 做到这一点。见下文：

```
awk -v b=20 '{a[NR]=$0}END{val=((b/100)*NR)+1;for(i=1;i<val;i++)print a[i]}' all.log 
```

上面的命令打印从文件开头开始的所有行的 20%。

您只需在命令行上更改 b 的值即可获得所需的 % 行数。测试如下：

```
> cat temp
1
2
3
4
5
6
7
8
9
10
> awk -v b=10 '{a[NR]=$0}END{val=((b/100)*NR)+1;for(i=1;i<val;i++)print a[i]}' temp
1
> awk -v b=20 '{a[NR]=$0}END{val=((b/100)*NR)+1;for(i=1;i<val;i++)print a[i]}' temp
1
2
> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T03:51:13.730

shuf 将以随机顺序生成文件；如果你知道你想要多少行，你可以给 -n 参数。无需一次获得一个。所以：

```
shuf -n $(( $(wc -l < $FILE) * $PCT / 100 )) "$file" |
while read line; do 
  # do something with $line
done 
```

shuf 是 GNU/Linux 发行版 afaik 的标准配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T09:59:13.177

尝试这个：

```
file=$1
nb_lignes=$(wc -l $file | cut -d " " -f1)
num_lines_to_get=$((20*${nb_lignes}/100)) 
for (( i=0; i < $num_lines_to_get; i++))
do
  line=$(head -$((${RANDOM} % $nb_lignes)) $file | tail -1)
  echo "$line"
done 
```

请注意，`${RANDOM}`仅生成小于 32768 的数字，因此此方法不适用于大文件。

如果你已经`shuf`安装了，你可以使用下面的来获取随机行，而不是使用`$RANDOM`.

```
line=$(shuf -n 1 $file) 
```

# c# - 实体框架使用相关对象添加记录

> ID：12637602
> 
> 赞同：0
> 
> 时间：2012-09-28T09:48:18.840
> 
> 标签：c#, asp.net, entity-framework

我们有以下 AddUser 方法，它使用 EF 向数据库添加新记录：

```
 public User AddUser(User user)
    {
        using (var context = DataObjectFactory.CreateContext())
        {
            var userEntity = Mapper.Map(user);

            context.AddObject("UserEntities", userEntity);

            context.SaveChanges();

            return Mapper.Map(userEntity);
        }
    } 
```

我们的用户类型是这样的：

```
public class User
{
    public string FirstName { get; set; }

    public string LastName { get; set; }

    public Customer Customer { get; set; }     
} 
```

我们有一个 Customer 表和一个 User 表，在 User 表中我们有 customerid 作为外键。

在 USER 表中，我们有 Firstname、Lastname 和 CustomerId 字段，我们从用户那里获取 firstname、lastname 和 customerid（客户的下拉列表）详细信息，使用我们从用户那里获得的 customerid 创建 Customer 对象并将所有这些传递给`AddUser`方法，但是会发生什么情况是用户被插入到数据库中，并且新的客户也被插入到客户的表中（使用新的客户 ID），有什么办法可以阻止这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:53:17.190

您需要将`EntityState`Customer 的 设置为`Unchanged`。

就像是

```
 context.Entry<Customer>(customer).State = EntityState.Unchanged; 
```

或者

```
 context.ObjectStateManager.ChangeObjectState(userEntity.Customer, EntityState.Unchanged); 
```

（取决于您使用的上下文类型）

请参阅[http://msdn.microsoft.com/en-us/data/jj592676.aspx](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

# android - 如何链接视图属性动画

> ID：12637603
> 
> 赞同：2
> 
> 时间：2012-09-28T09:48:22.677
> 
> 标签：android, animation

我知道如何使用 AnimatorSet 链接动画，即。播放动画 1 -> 播放动画 2

但我不知道如何为 ViewPropertyAnimator 实现这一点？我应该使用“withEndAction”还是应该使用“setListener..onAnimationEnd”或其他什么？

谢谢。BR，亨利

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:10:03.667

`withEndAction()`应该可以工作，但只能从 API 级别 16 开始使用。

如果您想要在旧版本上运行的东西，包括通过 NineOldAndroids 向后移植，请使用`setListener()`和`onAnimationEnd()`. 请注意，它`AnimatorListenerAdapter`实现了所有`AnimatorListener`的方法，因此您可以扩展`AnimatorListenerAdapter`并仅覆盖您需要的那些方法。

# java - 当用户尝试通过 HTTP 连接时，发回 HTTP 响应而不是 stck 跟踪

> ID：12637606
> 
> 赞同：1
> 
> 时间：2012-09-28T09:48:29.330
> 
> 标签：java, rest, jetty

我有一个 Jetty 服务器，并且我通过休息服务禁用了 HTTP 连接，因此客户端连接只能通过 https，但是当客户端尝试通过 http 连接时，它会抛出一个 SocketException 并将其视为休息响应。我想要做的是在发生这种情况时给出响应并实际抛出一个自定义描述性错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:55:49.587

您可能想使用`Filter`这样的

```
public abstract class SSLOnlyFilter implements Filter {

  public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain)  {
    // ... cast to HTTP counterparts
    if (request.isSecure()) {
      chain.doFilter(request, response);
    } else {
      response.setStatus(HttpServletResponse.SC_OK);
      // Set the message in the body
    }
  } 
} 
```

或自定义错误页面（不太喜欢）

```
<error-page>
   <exception-type>java.net.SocketException</exception-type>
   <location>/someServletHere</location>
</error-page> 
```

在您的部署描述符中。

但是我建议在客户端尝试在没有 SSL 的情况下进行连接时发出 HTTP 重定向。有两种简单的方法来发出 HTTP 重定向：[`RewriteHandler`](http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler)模块和`Filter`.

这是如何配置模块[`RedirectRegexRule`](http://download.eclipse.org/jetty/stable-7/apidocs/org/eclipse/jetty/rewrite/handler/RedirectRegexRule.html)

```
<New id="Rewrite" class="org.eclipse.jetty.rewrite.handler.RewriteHandler">
  <Call name="addRule">
    <Arg>
      <New class="org.eclipse.jetty.rewrite.handler.RedirectRegexRule">
        <Set name="regex">/(.+)</Set>
        <Set name="replacement">https://host:port/$1</Set>
      </New>
    </Arg>
  </Call>
</New> 
```

或者，您可以使用[`Filter`](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)

```
public abstract class SSLOnlyFilter implements Filter {

  public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain)  {
    // cast to HTTP request and response
    if (request.isSecure()) {
      chain.doFilter(request, response);
    } else {
      response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);
      // Edit this line with actual parameters. Note HTTPS
      response.setHeader("Location", "https://host:port/url");
    }
  } 
} 
```

# c# - 在 NHibernate 中保存时长 XML 抛出异常

> ID：12637607
> 
> 赞同：3
> 
> 时间：2012-09-28T09:48:31.770
> 
> 标签：c#, sql-server, nhibernate

我目前有一个问题，我们试图通过 NHibernate 映射保存一些 XML，它工作正常，除非 XML 达到一定长度。映射看起来像这样：

```
Property(x => x.Expression, c =>
{
    c.NotNullable(true);
    c.Column(m => m.SqlType("xml"));
}); 
```

抛出的异常是：

> 字符串值的长度超过了映射/参数中配置的长度。

显然它告诉我字符串太长了，尽管作为一个 XML 映射，我不会认为这会是一个问题？通过插入将 XML 直接保存到 SQL Server 数据库中可以正常工作，因此看起来问题出在 NHibernate 映射上。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:32:11.473

尝试将映射更改为以下内容：

```
Property(x => x.Expression, c =>
{
    c.NotNullable(true);
    c.Type(NHibernateUtil.XmlDoc);
}); 
```

然后你的域对象使用`XmlDocument`而不是字符串。

似乎 NHibernate 并不总是正确地将 XML 映射到字符串，尤其是当它是一个长字符串时。

如果你想多一点 LINQy，你可以使用 an `XDocument`with the `NHibernateUtil.XDoc`，虽然我自己没有尝试过。

# objective-c - GROUP BY 与 SUM() 使用 Core Data

> ID：12637611
> 
> 赞同：13
> 
> 时间：2012-09-28T09:48:42.247
> 
> 标签：objective-c, ios, core-data, group-by

我遇到了类似的问题，但他们都没有一个完整的例子来说明如何完成它。

我要翻译的 SQL 查询是这样的：

```
SELECT date, SUM(amount) FROM Table GROUP BY date; 
```

我需要帮助调试以下代码（当前 fetchRequest 返回 nil）：

```
entity = [NSEntityDescription entityForName:@"Table" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

NSExpressionDescription* ex = [[NSExpressionDescription alloc] init];
[ex setExpression:[NSExpression expressionWithFormat:@"@sum.amount"]];
[ex setExpressionResultType:NSDecimalAttributeType];

[fetchRequest setPropertiesToFetch:[NSArray arrayWithObjects:@"date", ex, nil]];
[fetchRequest setPropertiesToGroupBy:[NSArray arrayWithObject:@"date"]];
[fetchRequest setResultType:NSDictionaryResultType ];

[self.managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

这是错误：

```
2012-09-28 13:58:46.319 App[12205:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T08:48:12.247

上面的代码需要

```
[ex setName:@"somename"]; 
```

在执行 fetchRequest 之前。

# php - Netbeans 代码模板 - 不能在 php 标记之外工作

> ID：12637615
> 
> 赞同：0
> 
> 时间：2012-09-28T09:48:50.203
> 
> 标签：php, netbeans, autocomplete, netbeans-7, code-templates

最近我一直在使用一些 WordPress 模板和 NetBeans。

我想在`<?php ?>`标记之外使用代码模板功能。

只要`tab`在`<?php ?>`. 但是，在 WordPress 模板中，文件中混合了`html / php`代码`.php`，因此通常您要粘贴如下内容：

`<?php the_title(); ?>`最初在其他之外`<?php ?>`

知道如何在 NeatBeans 中创建代码模板`PHP file`，但在`<?php ?>`标记之外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T18:35:16.823

转到工具、选项、编辑器，选择语言 = HTML 并添加您想要的任何缩写，例如：

缩写： t 扩展文本：

保存并使用它按 t + [TAB]

# html - 在网站中放置图像

> ID：12637619
> 
> 赞同：0
> 
> 时间：2012-09-28T09:49:03.947
> 
> 标签：html, css, image

当使用元素/标签将图像放置在 Web 文档中时`<img />`，应该对图像进行切片和编辑以适合文档的尺寸，或者它们应该按原样放置，但应该修改`width`and属性以满足需要。`height`

例如，如果我有一个图像，比如“bldg_pic.png”，它的宽度为 2000 像素，高度为 1500 像素，并且我想将其放置并适合 400 像素 X 300 像素`<div>`，我应该保持图像不变并按照

```
<img src="bldg_pic.jpg" width="400" height="300" alt="Building Picture" /> 
```

因此加载的实际图像为 2000 像素 X 1500 像素，但显示为 400 像素 X 300 像素。还是我只是编辑图像并将其缩小到 400px X 300px 并使用相同的上述代码。

我假设在放置图像时，浏览器实际上只是为图像插入一个“占位符”，如果在前面设置了`height`和`width`属性，浏览器就知道应该为它保留多少“空间/内存”。

我寻求应该使用哪种方法，它们的任何性能/最佳实践问题是否相关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:04:01.900

始终调整图像大小。动态调整图像大小也是可能的。

[https://github.com/lencioni/SLIR](https://github.com/lencioni/SLIR)

SLIR 是一个很棒的库。您获取 sir 文件夹，并将其放在您的网站根目录中。当您访问图像时，您可以这样做：

```
 <img src="/slir/w400/path/to/image.png" width="400" /> 
```

假设 /path/to/image.png 是 4000px 宽，SLIR 不仅会压缩图像，还会调整图像大小，并将此请求的缓存版本存储在服务器上的文件夹中 - 当再次请求时，它将提供缓存的版本。

如果您需要有关文件权限的任何帮助，请询问。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T09:53:54.270

从最佳实践的角度来看，您应该将图像调整为您想要显示的大小。您的访问者可能不乐意加载大图像，从而浪费他们的带宽（想想智能手机）并增加加载时间，而没有即使知道他们可以访问更大的图像。或者，您可能希望将调整大小的图像链接到完整大小的版本。

根据我的经验，一些浏览器在调整图像大小时会使图像看起来很破碎（例如，在某些情况下是 IE7），因此最好将图像设置为您想要显示的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T10:01:50.800

您必须将图像重新调整为您实际需要的大小。请不要使用 2000 像素 1500 像素的图像。

原因如下：

1.  当您缩放 html（宽度和高度）时，浏览器仍在下载完整图像并需要更多时间来加载
2.  如果您将较大的图像重新调整为非常小的尺寸，则在浏览器中看起来不太好

如果您需要两个不同的尺寸，那么您应该创建两个不同尺寸的图像。

您还可以使用工具优化图像，以便在浏览器中快速加载而不会降低图像质量。

这里有几个工具可以帮助你：

粉碎它：[http ://www.smushit.com/ysmush.it/](http://www.smushit.com/ysmush.it/)

防暴：http : [//luci.criosweb.ro/riot/](http://luci.criosweb.ro/riot/)

希望我的回答对你有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T09:53:18.680

两者都做（尽管如果尺寸正确，指定宽度/高度并不是真正必要的）。

虽然您可以使用`width`和`height`属性来缩小大图像，但它会无缘无故地影响您网站的性能和使用的带宽。

调整您的图像大小和（在 Photoshop 中），为网络/设备保存。

此外，如果您将图像放在一起以显示为一个，请确保`display:block`在您的 css 中使用以避免图像底部的间距。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T16:53:42.727

图像应调整为您使用的确切尺寸并针对网络进行优化。我建议使用较小的格式（例如 .jpg 或 .gif），而不是 .png，如果可以这样做而不会降低质量。

# .htaccess - 重写规则不向用户显示斜线并为脚本显示斜线

> ID：12637622
> 
> 赞同：2
> 
> 时间：2012-09-28T09:49:16.070
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, slash

当 CMS 创建重复项时，我处于这种情况。每个页面都可以用斜线打开，也可以不用。

因此，我需要在物理上重写搜索引擎的每个 URL，并且在结尾没有斜杠时，将 301 重定向到条件的人。

但问题是脚本随后停止工作，因为它仅适用于 URL 末尾的斜杠。

我在逻辑上做了这个 .htaccess

```
RewriteCond %{REQUEST_URI} ^(.*)/$ [NC]
RewriteRule ^(.*)(/) $1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*[^/])$ $1/ [L] 
```

但它正在重定向循环。请你帮我把它写正确。主要目的是让用户和 SE 看不到结尾斜杠 URL，但脚本需要在服务器内部使用结尾斜杠重写 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:01:46.657

> 但它正在重定向循环。请你帮我把它写正确。主要目的是让用户和 SE 看不到结尾斜杠 URL，但脚本需要在服务器内部使用结尾斜杠重写 URL。

如果要重定向，则需要匹配实际请求，否则，URI 会被重写，并且您的第一条规则会匹配它并重定向（一次又一次，一次又一次）。

所以是这样的：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\ ]*?)/($|\ )
RewriteRule ^(.*)(/) $1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*[^/])$ $1/ [L] 
```

（只改变了第一个条件）

# magento - Magento 默认分页不起作用

> ID：12637625
> 
> 赞同：0
> 
> 时间：2012-09-28T09:49:30.337
> 
> 标签：magento, grid, pagination, default

由于某种原因，分页在任何一个网格视图列表中都不起作用。我无法想象我对任何必要的事情都进行了锻炼，经过长时间的搜索后，我想我应该问自己，因为我没有发现其他人遇到的问题。

这是我的 catalog.xml 中的相关部分：

```
 <catalog_category_default translate="label">
    <label>Catalog Category (Non-Anchor)</label>
    <reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->

                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>

                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_default>
<catalog_category_layered translate="label">
    <label>Catalog Category (Anchor)</label>
    <reference name="left">
        <block type="catalog/layer_view" name="catalog.leftnav" after="currency" template="catalog/layer/view.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <!-- <action method="addReviewSummaryTemplate"><type>default</type><template>review/helper/su.phtml</template></action> -->
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>3</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>grid</mode><limit>9</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>grid</mode><limit>all</limit><label>All</label></action>
                </block>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_layered> 
```

如您所见，我创建了正确的块。但是当我转到toolbar.phtml 或pager.phtml 并尝试回显或更改或删除某些内容时。什么都没有发生。

我已经对整个项目进行了搜索，但我从来没有做过任何与工具栏相关的事情。

我希望有一个人可以帮助我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:19:30.800

一些建议：

*   **在管理员的缓存管理**中关闭布局和块缓存。
*   编辑主题 + 主题包的`toolbar.phtml`和文件，而不是基本主题。`pager.phtml`
*   通过查看**管理类别 > 定制设计来检查有问题的类别是否使用不同的主题**
*   如果您有多个站点副本，例如“live”和“localhost”，请确保您正在查看正确的副本。听起来像一个愚蠢的错误，但它可能发生在任何人身上。

# hornetq - 通过 HornetQ 的 REST 接口推送消息

> ID：12637629
> 
> 赞同：1
> 
> 时间：2012-09-28T09:49:32.923
> 
> 标签：hornetq

我正在使用 Hornetq 2.2.5 版本的 REST 接口，作为 JBoss-4.2.1 GA 应用服务器的 JMS 提供程序运行。我已经成功部署了一个具有 HornetQ REST 消息接口的 .war。我可以使用应用程序的资源正确发送消息。现在，我正在尝试将消息推送到远程 REST 资源，因此我发送了 HEAD 请求，获取了 msg-push-consumers 标头并发送了以下 POST 请求：

```
<push-registration>  
   <link href="http://remotehost:8081/TestREST/webresources/test" method="PUT" />
</push-registration> 
```

我查看了 JBoss 日志并阅读：

> 18:04:20,953 INFO [PushConsumer] 推送消费者开始于：XmlLink{className='null', rel='null', href='http://remotehost:8081/TestREST/webresources/test', type='null '，方法='PUT'}

但是，当我尝试向队列发送 JMS 测试消息时，出现以下异常：

> 18:07:08,234 错误 [ClientConsumerImpl] 无法在 org.jboss.netty.buffer.AbstractChannelBuffer.checkReadableBytes(AbstractChannelBuffer.java:657) 在 org.jboss.netty.buffer.AbstractChannelBuffer 调用 onMessage() java.lang.IndexOutOfBoundsException。 readBytes(AbstractChannelBuffer.java:337) at org.jboss.netty.buffer.AbstractChannelBuffer.readBytes(AbstractChannelBuffer.java:343) at org.hornetq.core.buffers.impl.ChannelBufferWrapper.readBytes(ChannelBufferWrapper.java:347) at org .hornetq.rest.util.HttpMessageHelper.buildMessage(HttpMessageHelper.java:97) 在 org.hornetq.rest.queue.push.UriStrategy.push(UriStrategy.java:82) 在 org.hornetq.rest.queue.push.PushConsumer .onMessage(PushConsumer.java:114) 在 org.hornetq.core.client.impl.ClientConsumerImpl。callOnMessage(ClientConsumerImpl.java:866) at org.hornetq.core.client.impl.ClientConsumerImpl.access$100(ClientConsumerImpl.java:44) at org.hornetq.core.client.impl.ClientConsumerImpl$Runner.run(ClientConsumerImpl.java :983) at org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker .run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)983) 在 org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行(ThreadPoolExecutor.java:603)983) 在 org.hornetq.utils.OrderedExecutorFactory$OrderedExecutor$1.run(OrderedExecutorFactory.java:100) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker。在 java.lang.Thread.run(Thread.java:722) 处运行(ThreadPoolExecutor.java:603)

你有什么想法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:05:54.903

可以先试用最新版本吗？有几个变化。我会推荐 2.2.14

然后我们可以调查一个可能的错误。我们将需要一个复制器来解决您的问题。

# jquery - 使用 Twitter Bootstrap 的子级下拉菜单

> ID：12637631
> 
> 赞同：0
> 
> 时间：2012-09-28T09:49:44.800
> 
> 标签：jquery, css, twitter, twitter-bootstrap

我有这个小提琴[http://jsfiddle.net/xkXdy/](http://jsfiddle.net/xkXdy/)

我想要这个下拉输入框的子菜单。现在它有这个类别。我想在鼠标悬停时有子类别。单击时将触发下拉菜单。（完毕）。然后当悬停在具有子类别的类别时，它将显示其子类别。

请帮忙。谢谢你的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:59:27.220

试试这个工作演示[http://jsfiddle.net/xkXdy/6/](http://jsfiddle.net/xkXdy/6/)

html

```
<div class="dropdown">
                        <ul>  

                            <li class="dropdown" id="accountmenu" style="list-style: none;">  
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <input type="text" placeholder="">                        
                                <b class="caret"></b></a>  
                                <ul class="dropdown-menu">  

                                         <li class="dropdown-submenu">
                                             <a tabindex="-1" href="#">PHP options</a>
                                        <ul class="dropdown-menu">

                                         <li><a href="#">PHP-sub</a></li>  

                                          <li><a href="#">PHP-sub2</a></li>
                                      </ul>   
                                </li>                                   
                                    <li><a href="#">MySQL</a></li>  
                                    <li><a href="#">JavaScript</a></li>  
                                    <li><a href="#">HTML5</a></li>  
                                </ul>  
                            </li>  
            </ul>          </div> 
```

JS

```
<script type="text/javascript">  
        $(document).ready(function () {  
            $('.dropdown-toggle').dropdown();  
        });  
   </script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T10:12:00.690

在这里，我已经完成了上述问题的完整解决方案。你可以在这里查看演示链接...

**演示** [http://codebins.com/bin/4ldqp6z](http://codebins.com/bin/4ldqp6z)

**HTML**

```
<ul class="nav nav-pills">
<li class="active"><a href="#">Regular link</a></li>
<li class="dropdown">
  <a href="#" data-toggle="dropdown" class="dropdown-toggle">Dropdown <b class="caret"></b></a>
  <ul class="dropdown-menu" id="menu1">
    <li>
        <a href="#">2-level Menu <i class="icon-arrow-right"></i></a>
        <ul class="dropdown-menu sub-menu">
            <li><a href="#">Action</a></li>
            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li class="divider"></li>
            <li class="nav-header">Nav header</li>
            <li><a href="#">Separated link</a></li>
            <li><a href="#">One more separated link</a></li>
        </ul>
    </li>
    <li><a href="#">Another action</a></li>
    <li><a href="#">Something else here</a></li>
    <li class="divider"></li>
    <li><a href="#">Separated link</a></li>
  </ul>
</li>
<li class="dropdown">
  <a href="#">Menu</a>
</li>
<li class="dropdown">
  <a href="#">Menu</a>
</li>
</ul> 
```

**CSS**

```
.dropdown-menu .sub-menu {
  left: 100%;
  position: absolute;
  top: 0;
  visibility: hidden;
  margin-top: -1px;
}

.dropdown-menu li:hover .sub-menu {
  visibility: visible;
  display: block;
}

.navbar .sub-menu:before {
  border-bottom: 7px solid transparent;
  border-left: none;
  border-right: 7px solid rgba(0, 0, 0, 0.2);
  border-top: 7px solid transparent;
  left: -7px;
  top: 10px;
}
.navbar .sub-menu:after {
  border-top: 6px solid transparent;
  border-left: none;
  border-right: 6px solid #fff;
  border-bottom: 6px solid transparent;
  left: 10px;
  top: 11px;
  left: -6px;
} 
```

**演示** [http://codebins.com/bin/4ldqp6z](http://codebins.com/bin/4ldqp6z)

# java - 找到同一个集合的两个表示 - @ElementCollection

> ID：12637642
> 
> 赞同：2
> 
> 时间：2012-09-28T09:50:18.167
> 
> 标签：java, hibernate, jpa-2.0

在这种情况下，我有两个课程。一个嵌入一个备忘录类：

```
@Entity
class Project {
  ...
  @Embed
  private Memo memo;
  ...
} 
```

和可嵌入的备忘录类：

```
@Embeddable
public class Memo implements Serializable {

  @ElementCollection(fetch = FetchType.EAGER)
  @CollectionTable(name = "MEMO_LINES")
  @MapKeyColumn(name = "TITLE",nullable = false)
  @Column(name = "VAL",nullable = false)
  private Map<String, String> memoLines = new HashMap<String, String>();

} 
```

刷新 Project 的合并实例时，我收到错误消息：

```
Caused by: org.hibernate.HibernateException: Found two representations of same collection: Project.memo.memoLines 
```

但是，在不刷新实体时不会发生。

此错误似乎通常发生在一个/多个关系中。但这里不是这样。这也不是戏剧！框架。只是普通的 Spring/JPA/Hibernate。

Spring 3.1.1.RELEASE、Hibernate 4.1.4.Final、JDK7u7、Linux 64。

有人以前有过这个吗？或者对错误实际含义的任何合理解释？

**更新：它与flush()有关**

如果只有一次冲洗，它似乎有效。如果完成了中间刷新，那么它会抛出异常。一个混乱的解决方案是在第一种方法持久化数据的出口处刷新。封闭的方法调用持久检查线程局部变量以查看它们是否应该刷新。

但肯定有更好的方法来做到这一点......

# algorithm - 具有特殊条件的子集和

> ID：12637644
> 
> 赞同：3
> 
> 时间：2012-09-28T09:50:21.263
> 
> 标签：algorithm, optimization, subset-sum

（在您回复另一个 SO 问题的链接或将其作为副本关闭之前，请仔细阅读该问题。这与此问题的标准变体不同，我已经搜索了很长时间，所以我很确定没有这里不是这样的问题）

我需要找出**最小可能的 S是否是****X[i]**的某个子集的总和> **= T**（某个目标值，小于完整集的总和）。

该集合不是很大（大约 40 个元素），但对于指数回溯解决方案来说仍然太大。

**数字和总和很大**（大约 10^15），所以动态编程不起作用（可能状态的数量很大，所以记忆表很快就会耗尽内存）。

出于同样的原因，Pisinger 的线性时间算法将不起作用（它是 O(nr)，其中 r 是总和的上限，在这种情况下太大了）。

是否有一些确定性算法可以在这种大和但很少数字的情况下帮助我？我不想求助于一些近似算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:57:19.483

鉴于上述条件，我相信带有[分支和界限](http://en.wikipedia.org/wiki/Branch_and_bound)的回溯解决方案是获得确切解决方案的最佳方法。

这个想法是检查所有子集，但您可以在算法运行期间为一些可能的子集修剪计算树。

例如，假设您正在寻找`S = 10^8`，并且您已经找到了 的解决方案`sol=10^8 + 10^7`，现在，您正在检查作为 some 的超集的所有子集，`X`您会发现`sum(X) = 10^9`。无需继续检查包含 的任何子集`X`，您可以简单地跳过它们 - 它们不会让您达到最佳状态。

我也会尝试并行化解决方案，分支和绑定通常很容易并行化，只需要不时同步新的最佳解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:04:06.410

As you said that the set wasn't very larget(around 40). I think the classic exponential time algorithm of complexity `O(2^(n/2) n)` will fit your need [http://en.wikipedia.org/wiki/Subset_sum_problem#Exponential_time_algorithm](http://en.wikipedia.org/wiki/Subset_sum_problem#Exponential_time_algorithm).

I can briefly describe the approach here. Split the set into two equal size set, say A and B. And enumerate the subset sum for them to generate two set of size `2^(n/2)`, say PA and PB. Then you can sort PA and PB and use binary search to find the sum that exceeds `T` in time `O(2^(n/2) n)`.

# java - 如何在Java中创建单个注释接受多个值

> ID：12637649
> 
> 赞同：14
> 
> 时间：2012-09-28T09:50:32.630
> 
> 标签：java, annotations, jira, sonarqube

我有一个名为的注解

```
@Retention( RetentionPolicy.SOURCE )
@Target( ElementType.METHOD )
public @interface JIRA
{
    /**
     * The 'Key' (Bug number / JIRA reference) attribute of the JIRA issue.
     */
    String key();
} 
```

允许添加这样的注释

```
@JIRA( key = "JIRA1" ) 
```

有没有办法让这种情况发生

```
@JIRA( key = "JIRA1", "JIRA2", .....  ) 
```

原因是，我们目前针对 Jira 任务或错误修复对测试进行注释，但有时，该值将被声纳解析。问题是单个测试涵盖了超过 1 个错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T09:55:01.880

将您的函数更改 `key()`为返回`String[]`，而不是`String`您可以使用传递各种值`String[]`

```
public @interface JIRA {
/**
 * The 'Key' (Bug number / JIRA reference) attribute of the JIRA issue.
 */
String[] key();
} 
```

像下面这样使用它

```
@JIRA(key = {"JIRA1", "JIRA2"}) 
```

# android - Android“应用程序全局”线程

> ID：12637656
> 
> 赞同：0
> 
> 时间：2012-09-28T09:50:58.523
> 
> 标签：android, multithreading, android-sqlite

我有一个应用程序，其中包含 3 个活动。在第一个活动中，我在 onCreate() 中启动线程并在 onDestroy() 中停止它，所以我希望这个线程在应用程序运行时能够工作。在这个线程中，我从数据库中读取数据并将其发送到服务器。

主要问题：是否有正确的方法来完成这项工作，或者第一个活动可以在应用程序工作时被破坏？如何以正确的方式做到这一点？

附带问题：由于对数据库的多次写入问题，有没有办法创建类来管理 SQLite 写入并且可以从每个活动中访问？

我考虑使用 Application 类，但对此有一些疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T09:54:18.153

向服务器发送数据通常不是连续操作，而是可重复的作业类型操作，因此看起来您应该使用`IntentService`而不是 Thread。同样设置`onCreate`和销毁`onDestroy`也不是最好的方法，因为即使应用程序在后台，您的线程也会运行（这通常意味着它没有用）。扩展应用程序是相当不错的，但我认为你不需要走那么远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T09:56:24.243

即使应用程序的其余部分处于活动状态，您也不能依赖不再需要的活动不被销毁。您可能可以让*所有*活动都能够启动/停止线程，并使用应用程序全局引用计数器，以便您知道何时要再次启动线程或只是增加引用计数。

关于你的数据库管理类，你的类有多个实例是可以的；您管理的 SQLite 数据库是线程安全的。如果您有其他原因只需要一个助手实例，您可以使用单例模式创建它，以便第一个访问它的客户端创建该实例，然后所有后续客户端都获取它的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:38:52.933

Application 类可用于管理应用程序全局的东西。每当运行一个线程是一个好主意是另一个问题。

1.  实现一个 android.app.Application 子类。应该在您的应用程序包的根目录中。

    ```
    package com.yourapp;        

    public class YourApplication extends Application {
        @Override
        public void onCreate() {
            // [...]
        }
        // [...]
    } 
    ```

2.  在 AndroidManifest 中指定应用程序类。

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
              package="com.yourapp"
              android:versionName="1.0"
              android:versionCode="1.0">
        <application android:name="YourApplication"
                     android:label="@string/app_name"
                     android:icon="@drawable/icon">
        <!-- ... -->
        </application>
    </manifest> 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T13:57:03.793

*   对于第一个问题，用于`IntentService`与服务器进行通信。
*   对于第二个问题，扩展`SQLiteOpenHelper`类并使其成为单例。就是这样。

# python - Python：在枚举中查找字符串的最快方法

> ID：12637657
> 
> 赞同：4
> 
> 时间：2012-09-28T09:51:05.600
> 
> 标签：python, string, search, python-2.7, enumeration

解析[IANA](http://www.iana.org/assignments/language-subtag-registry)子标签（参见[Cascaded string split, pythonic way](https://stackoverflow.com/q/12460634/1577343)）并列出 8600 个标签：

```
tags= ['aa',
       'ab',
       'ae',
       'af',
       'ak',
       'am',
       'an',
       'ar',
       # ... 
```

例如，我想检查`mytag="ro"`是否在列表中：最快的方法是什么：

**第一个解决方案：**

```
if mytag in tags:
    print "found" 
```

**第二种解决方案：**

```
if mytag in Set(tags):
    print "found" 
```

**第三种解决方案：**将列表转换为大字符串，例如：`'|aa|ab|ae|af|ak|am|an|ar|...'`然后查看字符串是否在另一个字符串中：

```
tags = '|aa|ab|ae|af|ak|am|an|ar|...'
if mytag in tags:
    print "found" 
```

还有其他方法吗？哪个是最快的，这是否已经测量过，如果不是，我该如何对自己进行基准测试（我应该从列表中随机取一个元素，还是应该取最后一个元素然后测试它，有人可以为“计时器”提供 python 代码）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:56:08.157

由于我无法访问原始字符串，因此任何测试都会有偏见。但是，您要的是天文台表？检查[`timeit`](http://docs.python.org/library/timeit.html)模块，旨在计时一些代码片段。

请注意，如果您使用`IPython`,`%timeit`是一个神奇的函数，可以轻松地为函数的执行计时，如下图所示。

一些评论

*   你应该替换`Set`为`set`...
*   在运行任何测试之前构造你的`set`长字符串
*   从您的`tags`列表中随机抽取一个元素确实是可行的方法。

* * *

作为`%timeit`在 IPython 中使用的示例：

```
tags = ['aa','ab','ae','af','ak','an','ar']
tags_set = set(tags)
tags_str = "|".join(tags)

%timeit 'ro' in tags
1000000 loops, best of 3: 223 ns per loop
%timeit 'ro' in tags_set
1000000 loops, best of 3: 73.5 ns per loop
%timeit 'ro' in tags_str
1000000 loops, best of 3: 98.1 ns per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:06:59.070

与时间或性能无关，但您可以通过以不同的方式构造数据，而不用担心这种事情。

查看您之前的帖子，您接受的答案包含一个`iana_parse`产生 dict 的函数。所以，如果你知道你在寻找什么预解析时间，那么你可以这样做：

```
looking_for = {'ro', 'xx', 'yy', 'zz'}
for res in iana_parse(data): # from previous post
    if res['Subtag'] in looking_for:
        print res['Subtag'], 'was found' 
```

否则（或结合使用），您可以从该函数构建一个 dict 并使用它：

```
subtag_lookup = {rec['Subtag']:rec for rec in iana_parse(data)}

ro = subtag_lookup['ro']
print ro['Description'] 
```

在某些时候，如果您确实只想要一个子标签列表，请使用：

```
subtags = list(subtag_lookup) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:02:10.977

我更喜欢#1。它也应该从您提供的选择中为您提供最佳性能，因为在比较之前您没有对列表进行额外处理。

至于如何测试性能... timeit 是你想要的。

```
import timeit
s1 = """
tags= ['aa', 'ab', 'ae', 'af', 'ak', 'am', 'an', 'ar']
mytag = 'ro'
if mytag in tags:
    print 'found'
"""
s2 = """
tags= ['aa', 'ab', 'ae', 'af', 'ak', 'am', 'an', 'ar']
mytag = 'ro'
if mytag in set(tags):
    print 'found'
"""
s3 = """
tags= ['aa', 'ab', 'ae', 'af', 'ak', 'am', 'an', 'ar']
mytag = 'ro'
if mytag in '|'.join(tags):
    print 'found'
"""

print(timeit.Timer(s1, 'gc.enable()').timeit())
print(timeit.Timer(s2, 'gc.enable()').timeit())
print(timeit.Timer(s3, 'gc.enable()').timeit())

>>> 
0.261634511713
0.476344575019
0.282574283666 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T12:29:19.873

我已经使用此代码自己完成了测试，您可以`%cpaste`在 IPython 控制台中使用并粘贴下面的代码。

```
#Get IANA language defs
import urllib
import pprint
import timeit
import IPython
import random
f = urllib.urlopen("http://www.iana.org/assignments/language-subtag-registry")
#lan.split("%%") .split("\n").split(":")
lan=f.read()
def iana_parse(data):
    for record in data.split("%%\n"):
        # skip empty records at file endings:
        if not record.strip():
            continue
        rec_data = {}
        for line in record.split("\n"):
#            key, value = line.split(":") doesn't work
            key, value = line.partition(':')[::2]
#            key, _, value = line.partition(':')
            rec_data[key.strip()] = value.strip() 
        yield rec_data

tags =[]

for k in iana_parse(lan):
#    print k
    if "Subtag" in k: tags.append(k["Subtag"])
#maybe store it in a shelve http://docs.python.org/library/shelve.html

tags_set = set(tags)
tags_str = "|".join(tags)
print "Search 'ro'" 
print "List:"
%timeit 'ro' in tags
print "Set:"
%timeit 'ro' in tags_set
print "String:"
%timeit 'ro' in tags_str

random_tag = tags[random.randint(0,len(tags)-1)]
print "Search random" 
print "List:"
%timeit random_tag in tags 
print "Set:"
%timeit random_tag in tags_set 
print "String:"
%timeit random_tag in tags_str 
```

结果是：

```
Search 'ro'
List: 1000000 loops, best of 3: 1.61 us per loop
Set: 10000000 loops, best of 3: 45.2 ns per loop
String: 1000000 loops, best of 3: 239 ns per loop

Search random
List:10000 loops, best of 3: 36.2 us per loop
Set:10000000 loops, best of 3: 50.9 ns per loop
String:100000 loops, best of 3: 4.88 us per loop 
```

所以顺序是：

1.  如果列表中的集合的初始化已经完成并且不包括在测量中，那么集合是最快的。
2.  字符串解决方案作为速度测量第二个，也不包括时间测量中的连接。
3.  令人惊讶的是，该列表是最后一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T09:57:19.187

你可以自己检查一下。只需使用`timeit`模块..

[timeit.Timer()](http://docs.python.org/library/timeit.html#)可能对你有用..

或者，您也可以使用[时间](http://docs.python.org/library/time.html)模块：-

```
import time
ct = time.clock()
if mytag in tags:
    print "found"
print "diff: ", time.clock() - ct 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T13:59:59.117

选项 #1 对于 1 次使用应该是最快的，因为它甚至不必遍历整个列表（要构建一个你需要遍历整个列表的集合），而 #2 将在所有下一次运行中最快（如果你只构建一次 set() ），因为它会在很小的恒定时间内工作。

# java - 在 Java 应用程序中使用 Drupal cms

> ID：12637661
> 
> 赞同：1
> 
> 时间：2012-09-28T09:51:20.357
> 
> 标签：java, drupal, web-applications, content-management-system

我有基于 java 的 web 应用程序。我想通过 Drupal 7 修改它的内容。drupal 7 是否可以管理基于 java 的 web 应用程序（站点）的内容？

我已经用谷歌搜索了我找不到它...在任何地方我都只能看到drupal站点的预定义文件夹结构，但java web-app具有不同的文件夹结构。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:38:08.760

是的，尽管这是一个复杂的过程，并且您需要 Drupal 和 Java 开发经验。您的基于 Java 的 Web 应用程序需要公开一个 API，以管理其内容，Drupal 可以调用该 API。此 API 通常通过 REST 或 Web 服务实现。然后，您需要创建自己的 Drupal 模块，其中包含适当的*钩子*，它将调用 REST/web 服务。

# excel - 将单元格值放入数组时出现 VBA 运行时错误

> ID：12637665
> 
> 赞同：0
> 
> 时间：2012-09-28T09:51:37.473
> 
> 标签：excel, excel-2007, runtime-error, vba

我试图找出某个值是否存在于一系列单元格中，如果不存在，则运行一个函数。我正在使用 Excel 2007。

但是我有两个问题-

1.  我`Run-time error 9 - Subscript out of range`在线上遇到错误`titles(i) = cell.Value`。
2.  我不知道可以在`If`语句中使用一个行来检查数组中是否存在值。

到目前为止，这是我的代码。任何有关如何解决这些问题的指示，或可能更好的方法的提示，将不胜感激。谢谢。

```
Sub start()

    Dim title_range As Range        ' The range that contains the column titles
    Dim cell As Range               ' The individual cell from the title range
    Dim titles() As String          ' The column titles
    Dim i As Integer                ' Dummy for count

    ' Set the column titles range
    Set title_range = ActiveWorkbook.Sheets("DJG Marketing - Client List by ").Range("A1:DZ1")
    i = 0
    For Each cell In title_range
        titles(i) = cell.Value
        i = i + 1
        ReDim Preserve titles(i)
    Next

    If {value 'Matter open month' does not exist in the array `titles`} Then
        create_month_column
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:01:13.770

试试这个代码：

```
i = 0
ReDim titles(i) 'this is missing ;)
For Each cell In title_range
    titles(i) = cell.Value
    i = i + 1
    ReDim Preserve titles(i)
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T10:01:11.060

您收到该错误是因为您试图在初始化数组之前分配一个值

```
Dim titles() As String
i = 0
For Each cell In title_range
    titles(i) = cell.Value
    '
    '
Next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:57:34.210

VBA 不是从数组中的索引 1 开始吗？

除此之外，您始终可以使用`LBound`和检查边界`UBound`。

# image - GraphicsScene 中的 Qt GLWidget 用于从图像数据（C++、Windows）中快速显示视频？

> ID：12637677
> 
> 赞同：1
> 
> 时间：2012-09-28T09:52:16.503
> 
> 标签：image, qt, opengl, video

关于在 Qt 中显示视频比将其显示为 QLabel 更有效地显示视频存在一些问题。似乎有两种方法：

*   直接写入窗口/小部件的图像缓冲区（但我找不到信息是否可以使用 Qt，而 MSVC / MSC 应用程序显然可以写入窗口句柄）

*   使用OpenGL通过硬件显示

    *   [通过 OpenGL 进行图像缩放（KeepAspectRatioByExpanding）](https://stackoverflow.com/questions/9011108/image-scaling-keepaspectratiobyexpanding-through-opengl)
    *   [在 Qt 中显示解码视频帧的最有效方法是什么？](https://stackoverflow.com/questions/1242005/what-is-the-most-efficient-way-to-display-decoded-video-frames-in-qt)

由于我当前的方法涉及从填充了我的图像数据的 QImage 创建的 QPixmapItem，即使在很小的分辨率（<1 MP，30 Hz）下，我的 Core2Duo 也报告了 40% 的负载。

我想继续使用 QGraphicsScene 来显示多个图像/视频，但我不知道是否可以在一个场景中显示（多个）QGLWidgets - 是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T19:24:48.967

也许不是几个 GLWidget，而是几个 GraphicsItem，调用`painter->beginNativePainting`它允许发出 openGL 命令。

graphicsView的**视口**必须是一个QGLwidget，后者在构造函数中用QGLFormat(QGL::SampleBuffers)初始化。请参阅[使用 opengl 的 Qt 小部件](http://doc.qt.digia.com/qq/qq26-openglcanvas.html)

当 OpenGL 活动项目在后台时，情况会更简单，因为调用 glClear 也会擦除视口背景，清除下方 zorder 较低的任何项目。

# git - Git：如何合并多年来分歧很大的复杂分支

> ID：12637678
> 
> 赞同：3
> 
> 时间：2012-09-28T09:52:17.497
> 
> 标签：git, svn, branch, git-merge, git-rebase

我目前已经将一个巨大的项目从 SVN 导入到 Git。我决定展平所有分支，只保留 2 个。主分支和分支分支。

```
Master: A-B-C-D
               \ X-Y: Bugfix

Diverged: E-F-G-H 
```

发散的包含很多不同的源代码，但有些部分仍然来自master。当我们必须做一些错误修复时，我们必须手动修补 SVN 上的 Master 和 Diverged。我想将 Bugfix 合并到 master 中（这里没问题）并将 Bugfix 合并到 Diverged 中。

请记住，我不希望将以前的提交插入到来自 master 的 Diverged 中。所以 ABCD 应该被忽略。我正在寻找的结构是这样的：

```
Master: A-B-C-D-X-Y

Diverged: E-F-G-H-X-Y 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:58:30.373

合并分歧的分支总是很痛苦的。

首先，您必须记住一些有用的`git`命令，这些命令将帮助您进行怪物合并。

`git log HEAD..origin/master`- 将向您展示分支之间的差异。

如果简单`git merge origin/master`不起作用，请尝试将合并拆分为一系列较小的任务。我建议将您的分歧分支重新设置在当前 master 之上，以便将更改本地化：

`git rebase remotes/origin/master`

您最终将完成解决每个冲突（可能在许多提交中）的无聊任务，但是这些小任务比一次处理整个合并要简单得多。

```
Master: A-B-C-D-X-Y
Diverged: E-F-G-H-X-Y

git checkout diverged
git rebase master 
```

变基完成后，您可以将 master 快进到分支的尖端：

```
Master: A-B-C-D-X-Y
                  \ E-F-G-H 
```

空提交将被省略。在最复杂的场景中，您可以在分支上使用交互式 rebase 来重新排列提交。即，对于您的方案：

虽然是体力劳动，但它仍然是一种分而治之的策略。

阅读这篇文章以获得一些深入的想法：http: [//blog.springsource.org/2010/12/21/git-and-social-coding-how-to-merge-without-fear/](http://blog.springsource.org/2010/12/21/git-and-social-coding-how-to-merge-without-fear/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T14:37:39.770

您的示例可以通过[git cherry-pick](http://git-scm.com/docs/git-cherry-pick)轻松解决（除了合并冲突）。

它复制一个提交，并将其应用于另一个分支。

```
git checkout diverged
git cherry-pick X Y 
```

这正是您在示例中描述的情况，但实际上并没有合并任何东西。

# windows - 运行多个包含“暂停”的 bat 文件

> ID：12637683
> 
> 赞同：7
> 
> 时间：2012-09-28T09:52:34.360
> 
> 标签：windows, batch-file

我有以下 2 个 bat 文件：

```
1.bat
------
//a line which does something
pause

2.bat
------
//a line which does the other something
pause 
```

现在，如何通过忽略暂停在新的 bat 文件中运行这些 bat 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T09:57:29.193

简单：删除`PAUSE`！

但我认为，您对问题的限制之一可能是您无法删除`pause`.

然后你可以使用重定向到被调用的批处理文件。

就像是

```
call 1.bat < nul
call 2.bat < nul 
```

# iphone - 另一个视图中的相机预览宽度问题

> ID：12637687
> 
> 赞同：3
> 
> 时间：2012-09-28T09:52:45.030
> 
> 标签：iphone, objective-c, ios, ios6

我在 iPhone 屏幕的一半上添加了相机预览。

```
-(void) viewDidAppear:(BOOL)animated
{
    AVCaptureSession *session = [[AVCaptureSession alloc] init];
    session.sessionPreset = AVCaptureSessionPresetMedium;

    CALayer *viewLayer = self.vImagePreview.view.layer;
    NSLog(@"viewLayer = %@", viewLayer);

    AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

    captureVideoPreviewLayer.frame = self.vImagePreview.view.bounds;
    [self.vImagePreview.view.layer addSublayer:captureVideoPreviewLayer];

    AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

    NSError *error = nil;
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
    if (!input) {
        // Handle the error appropriately.
        NSLog(@"ERROR: trying to open camera: %@", error);
    }
    [session addInput:input];

    [session startRunning];
} 
```

我在 viewDidLoad 方法中添加了相机视图控制器并设置了它的框架：

```
vImagePreview.view.frame = CGRectMake(0, 44, 320, 179); 
```

但是相机视图不是320。知道如何设置相机视图的宽度添加这种方式吗？
高度很好，但宽度约为 100 宽。
就像在这个链接上宽度是 320 但相机视图由于某种原因更小（宽度）。![在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T13:51:34.193

```
 captureVideoPreviewLayer.frame = self.vImagePreview.view.bounds; 
```

这是罪魁祸首。

您需要添加`videoGravity`（指示视频如何在播放器层的边界矩形内显示。）`AVLayerVideoGravityResizeAspectFill`属性，然后分配`bounds`最后但并非最不重要的，您需要给出`x and y- coordinates that establishes the center of a rectangle.`

```
CGRect bounds=self.vImagePreview.view.layer.bounds;
avLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
avLayer.bounds=bounds;
avLayer.position=CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T13:25:08.330

更改您的相机预览屏幕宽度并检查。

# python - 如何获得杂志中所有物品的价格总和？- django ORM

> ID：12637691
> 
> 赞同：1
> 
> 时间：2012-09-28T09:52:50.013
> 
> 标签：python, django, django-models, django-orm

```
class Item(models.Model):
    name = models.CharField(max_length=50)
    item_price = models.DecimalField(max_digits=5, decimal_places=2)

class Magazine(models.Model):
    name = models.CharField(max_length=50)
    items = models.ManyToManyField('Item', blank=True, null=True)
    owner = models.ForeignKey(User, related_name='u_item') 
```

如何获得杂志中所有物品的价格总和？

在意见中：

```
...
    user = request.user
    magazins = Magazine.objects.filter(owner= user)
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:17:55.370

首先看一下[Django 中的聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)。

它可能如下所示：

```
from django.db.models import Sum
owners_magazines = Magazine.objects.filter(owner='Your owner')
total = 0;
for magazine in owners_magazines:
    item_values_with_total = magazine.items.values().annotate(total=Sum('item_price'))
    total += <Read appropriately from item_values_with_total> 
```

您可以使用进一步尝试将事物组合在一起。返回的值将有一个名为的字段，该字段`total`将具有所需的总和。

编辑 -

您可以尝试使用非 ORM 解决方案来更好地理解它

```
from django.db.models import Sum
    owners_magazines = Magazine.objects.filter(owner='Your owner')
    total = 0;
    for magazine in owners_magazines:
        all_items = magazines.items_set.all()
        for item in all_items:
            total += item.item_price

    print total 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:18:41.663

使用[聚合](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)：

```
from django.db.models import Sum

for m in Magazine.objects.all():
   total = m.items_set.all().annotate(total=Sum('item_price'))
   print 'Total cost for items in {0} is {1}'.format(m,total) 
```

# joomla2.5 - 获取倒数第二篇文章 joomla

> ID：12637692
> 
> 赞同：0
> 
> 时间：2012-09-28T09:52:55.383
> 
> 标签：joomla2.5, joomla-extensions, joomla-module

我需要在我的 joomla 2.5 网站中使用两篇文章最新消息模块。在一个模块中，我想展示最后一篇文章，而在第二个模块中，我想展示最后一篇文章。我该如何设置这个参数？我尝试编辑 mod_articles_news 模块的 helper.php，但我不知道如何设置此参数。我想我必须添加这样的一行

```
$model->setState('somwthing', param); 
```

但问题是我不知道我要写什么。我可以将表示要在模块中显示的文章数量的变量用作参数变量，因为我强制它每个模块只显示一篇文章，这样参数现在就没有用了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T02:41:37.663

您可以使用模块设置本身来执行此操作。

首先创建 2 个“最新文章”或“最新消息”模块。

对于您的**上一篇文章**，请在后端打开模块设置：

*   将“计数”设置为“1”
*   将“订单”设置为“最近添加的优先”

对于您的**第二篇文章**，请在后端打开模块设置： - 将 'Count' 设置为 '1' - 将 'Order' 设置为 'Recently Modified First'

然后，打开您要显示为第二篇的文章，在句末或其他内容的末尾添加一个空格并重新保存。这会将修改后的时间戳更改为最新的，导致它显示在您的**第二篇文章的第二个模块中**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:11:57.123

检查这个

**mod_modulename.php：**

```
require_once (dirname(__FILE__).DS.'helper.php');

$news   = modxxxxHelper::getlatestarticles(); 
```

**助手.php**

```
class modxxxxHelper
{
    function getlatestarticles()
    {
        $db     =& JFactory::getDBO();  
        $query = 'SELECT title FROM #__content WHERE state = 1 ORDER BY id desc limit 0,1';

        $db->setQuery($query);
        $result = $db->loadResult();        

        return $result;
    }

} 
```

**默认的.php**

```
<?php echo $news; ?> 
```

# android - Android：从片段调用活动

> ID：12637693
> 
> 赞同：14
> 
> 时间：2012-09-28T09:52:57.377
> 
> 标签：android, android-intent, android-fragments, android-audiomanager, android-mediarecorder

我在活动中使用片段。我正在使用 MediaRecorder 进行录音。我有一个活动的两个部分。第一个本身将列出记录文件的活动。在右侧，当一个选择新文件记录时，音频记录活动被调用。When the any of the listed file is selected i am using AudioPlayer as to play the recorded file. 我在这里能够将 Activity 转换为片段，但是当我按下 Stop 时，它正在终止应用程序。

请任何人都可以回答。当我将它用作简单的活动时，我的录音机工作正常。任何解决方案，例如我是否可以在该片段中调用该活动或类似的东西。？如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T10:23:13.673

使用 get activity 获取父活动，然后照常执行。

```
Intent myIntent = new Intent(getActivity().getapplicationcontext(), BookmarkActivity.class);
getActivity().startActivity(myIntent); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-07T09:58:01.400

这是另一种替代方法。这对我有用。

```
public class **YourFragmentClass** extends Fragment {

    Context context; //Declare the variable context

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) {

    //Pass your layout xml to the inflater and assign it to rootView.
      View rootView = inflater.inflate(R.layout.**yourfragmentxml**, container, false); 
            context = rootView.getContext(); // Assign your rootView to context

            Button **yourButton** = (Button) rootView.findViewById(R.id.**your_button_id**);
            **yourButton**.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    //Pass the context and the Activity class you need to open from the Fragment Class, to the Intent
                    Intent intent = new Intent(context, **YourActivityClass**.class); 
                    startActivity(intent);
                }
            });
            return rootView;
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T10:06:16.263

To call another `activity` from `fragment` use this:

```
Intent i = new Intent(getActivity(), Activity.class);
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-25T20:06:00.220

**你可以简单地打电话**

```
startActivity(new Intent(getActivity(),TheNextActivity.class)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-11T10:39:25.650

**在片段类中**

```
 getActivity().startActivity(new Intent(gwtActivity(),MainActivity.class));
 getActivity().finish(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-11T11:23:06.697

从 Fragment 类调用 Activity 的最佳方法是在 Fragment 中创建接口并`onItemClick()`在该接口中添加方法。现在将它实施到您的第一个活动并从那里调用第二个活动。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-25T18:17:40.050

您的片段应该有一个父级

```
Intent intent = new Intent(getActivity(), SecondActivity.class);
getActivity().startActivity(intent); 
```

# javascript - JavaScript 代码的哪一部分触发了奇怪的请求？

> ID：12637694
> 
> 赞同：0
> 
> 时间：2012-09-28T09:53:08.537
> 
> 标签：javascript, debugging, xmlhttprequest, breakpoints

看看这个网站**[http://tinyurl.com/xhrexample](http://tinyurl.com/xhrexample)**和

*   在标题为“Vælg størrelse”的选择框中选择一个尺寸
*   按下“LÆG I INDKØBSKURV”按钮

现在触发了 3 个请求

1.  发布购物车.actions.php
2.  获取 /produkter/(...)
3.  获取 /kurv/?forajax

我有两个问题：

1.  我想知道第二个事件是从哪里来的。Chrome 中的 XHR 断点不会在第二个事件中中断。这是对现有系统的定制，所以我不知道它是如何构建的。
2.  有时（在不幸的情况下？）并非所有请求都被提出。这很难调试 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:24:00.370

好吧，POST 请求会导致带有 code 的响应`302 Found`。标`Location`头随着重定向发送到另一个页面，即`/produkter/...`，因此这是第二个请求。反过来，该资源在第 308 行包含以下 JavaScript 代码：

```
getCart("#MiniCartContents", "http://askepotsko.dk/kurv/?forajax", ...); 
```

这导致了第三个请求。

# c++ - 带有 C++11 源代码的 C++03 库

> ID：12637699
> 
> 赞同：11
> 
> 时间：2012-09-28T09:53:44.757
> 
> 标签：c++, c++11, clang, c++03

如果我有用 C++03 编写的库并将其编译为静态库，那么我可以在 C++11 中使用它吗？也可以反过来（ C++11 静态库和 C++03 ）。

*更新：* 我使用的编译器是 clang 或 LLVM

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-29T04:52:14.557

这主要取决于您如何在库中使用 C++ 标准库。

*   如果您根本不使用它，那么您不太可能遇到任何问题。

*   如果你使用`libstdc++`，那么你可能会遇到一些问题：

    *   将标准库对象传入和传出你的库并不总是有效（例如，`std::list`在 C++11 模式下最终会比当前在 C++98 模式下更大，因为它正在增长一个`size`数据成员，并且`std::string`正在更改为非参考计数的）。g++ 开发人员计划引入一种符号污染形式以在链接时捕获这些问题，因此如果遇到任何有问题的情况都会出错，但这尚未在 g++ 中实现，并且可能永远不会在铛。您可以通过确保您的库的接口不涉及标准库类型来避免此问题。

    *   某些符号可能会改变含义（例如，在 C++98 模式`std::complex::real`下`std::complex::imag`返回引用，但在 C++11 模式下按值返回，由于`constexpr`缺陷）。如果同时使用 C++98 和 C++11 形式将（未优化的）代码链接在一起，您可能选择了错误的实现，并在运行时产生奇怪的结果。

*   如果您使用`libc++`，您应该不会看到任何问题。`libc++`被设计为在 C++98 和 C++11 模式之间二进制兼容。

*   如果您`libc++`在库和`libstdc++`程序中使用，反之亦然，那么大多数不兼容性将在链接时被捕获。（`libc++`使用`inline namespace`包含`namespace std`其大部分符号的 inside，如果您尝试`libstdc++`跨边界传递 的类型，则会导致链接时不兼容）。但是，如果您的库的接口*间接*包含标准库类型（例如，如果它使用`struct`具有标准库类型作为成员的 a），您可能仍然会遇到运行时问题。对于`libc++`没有版本的类型，它旨在与二进制兼容`libstdc++`（在 C++98 和 C++11 模式下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:08:57.800

取决于编译器。例如，GCC 会在 C++11 模式下以不同方式破坏其 ABI 在 C++11 中更改的标识符。因此，例如，如果您不使用诸如 之类的东西`std::list`，那么您就可以了。

# winforms - 为什么我的 DataGridView 上缺少水平滚动条？

> ID：12637703
> 
> 赞同：0
> 
> 时间：2012-09-28T09:53:51.583
> 
> 标签：winforms, datagridview, user-controls

我有一个`UserControl`只包含一个`DataGridView`，设置为停靠以填充`UserControl`. dgv 的`ScrollBars`属性设置为`Both`，但是当我将 dgv 动态加载到客户端表单的面板中时，没有显示水平滚动条。我找到了这个问题，但我的专栏都没有被冻结。我的滚动条在哪里？

我正在绑定 dgv 的数据，它的列集合远远超过了可见宽度。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-28T11:31:27.700

所以我的简单示例可以很好地自动显示滚动条。这是我所做的：

我有一个`UserControl`其中只有一个`DataGridView`，`Dock`设置为**Full**。

它有一个我添加的公共函数，如下所示：

```
public void SetBinding(object theSource)
{
    dataGridView1.DataSource = theSource;
} 
```

只是为了对我的数据源设置绑定。

我的测试表格非常简单，看起来像这样：

```
public partial class Form1 : Form
{
    BindingSource bs = new BindingSource();
    List<Stuff> list = new List<Stuff>();

    public Form1()
    {
        InitializeComponent();
        BindSomeStuff();
    }

    private void BindSomeStuff()
    {
        for (int i = 0; i < 50; ++i)
        {
            list.Add(new Stuff
            {
                Column1 = i.ToString() + "Column1 Data",
                Column2 = i.ToString() + "Column2 Data",
                Column3 = i.ToString() + "Column3 Data",
                Column4 = i.ToString() + "Column4 Data",
                Column5 = i.ToString() + "Column5 Data",
                Column6 = i.ToString() + "Column6 Data",
                Column7 = i.ToString() + "Column7 Data",
                Column8 = i.ToString() + "Column8 Data",
            }
            );
        }
        bs.DataSource = list;
        userControl11.SetBinding(bs);
    }
} 
```

然后有一个简单的类来保存一些虚拟数据，如下所示：

```
public class Stuff
{
    public string Column1 { get; set; }
    public string Column2 { get; set; }
    public string Column3 { get; set; }
    public string Column4 { get; set; }
    public string Column5 { get; set; }
    public string Column6 { get; set; }
    public string Column7 { get; set; }
    public string Column8 { get; set; }
} 
```

My`UserControl`被放置在表单上，​​两个滚动条都出现了。

我没有对任何东西的任何属性进行任何其他更改`DataGridView`，`UserControl`它是它的一部分或`Form`拥有它的东西`UserControl`。我想知道你是否有其他我没有的设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-06-02T06:26:23.550

在这种情况下**UserControl + DataGridView + 缺少 Horizo​​ntal ScrollBar** 只需`Frozen = false`为每一列设置 DataGridView 的列内编辑器。是的，

```
 dataGridView1.ScrollBars = ScrollBars.Both; 
```

# iphone - 将现有的 iPhone 应用程序迁移到 iPad

> ID：12637706
> 
> 赞同：0
> 
> 时间：2012-09-28T09:54:01.967
> 
> 标签：iphone, ipad

我有一个相当成熟的 iPhone 应用程序，我们正计划继续开发 iPad 应用程序。iPad 应用程序将包含 iPad 独有的功能。是创建通用应用程序或维护两个独立项目的最佳方式。如果我维护两个项目，我还有办法在两个项目之间共享代码吗？任何信息都有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:26:50.030

如果这两个版本非常相似，我会说创建一个通用应用程序并为 iPad 版本提供自己的版本`view controllers`和/或`views`为该设备创建不同的界面。对于某些方法，您必须让您的代码检查它在哪个设备上运行，但我敢打赌，您的大部分逻辑都可以很好地转换到大屏幕上。我也这样做，将所有这些都集中在一个项目中很有趣。

如果您确实想将其拆分为两个项目，您可以通过引用添加公共类和资源并仅从一个中心位置对其进行编辑来添加它们。这样，在该中心项目中所做的更改将自动在引用这些资源的项目中可用。例如，我为我在项目之间共享的图像编辑类执行此操作。

# php - 文件上传和下载超时

> ID：12637708
> 
> 赞同：0
> 
> 时间：2012-09-28T09:54:11.647
> 
> 标签：php, apache, haproxy

在我公司的网站上，我们允许用户通过上传 excel 文件来上传订单。上传此文件时，会读取详细信息，创建所有必需的订单，然后将带有所需订单 ID 的列添加到用户文件并发送回用户文件。

我面临的问题是 504 网关超时。我无法诊断导致超时的确切原因。

我们有一个 HA_PROXY 负载平衡器和使用 PHP 的应用程序服务器。

我应该如何检测导致超时问题的原因？是 HA_PROXY、apache 还是用户浏览器？

PS：要发给用户的返回文件存在于服务器PHP的temp目录下但是因为连接超时没有发回给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:01:49.220

我很确定它是`HA_PROXY`。

在我们的设置中也得到了这一点：服务器仍然完成了他正在做的事情（所以它不是服务器，并且`set_time_limit(0)`不会工作），用户只是不再得到答案，因为服务器花费的时间超过了（我猜测）`HA_PROXY`允许。

如果是服务器，服务器本身的执行将被缩短，您的文件不会完全上传。

如果是浏览器，使用其他浏览器时会有差异。

我不知道该怎么做，因为我不是维护我们服务器的人，我们也从未调查过它，因为它只发生在 cron 脚本（除非调试）无论如何都没有输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:05:10.663

If you need sent back to the user at Real-time , You need add this code in the head of your file .

```
set_time_limit(0); 
```

And from your description , I think you can use asynchronous processing .

When the file has been uploaded , You can response "Processing" to the User .

Then you can write a Ajax Request to another url to check the file is right for download , every 10 seconds .

stat.php?id=file_id

If it ready , you can redirect the page to the download , like:

down.php?id=file_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T09:59:06.593

```
set_time_limit(0) 
```

这种方式增加文件上传时间

# sql-server-ce - SQL Server compact 4.0 - '[]' 不适用于关键字？

> ID：12637709
> 
> 赞同：0
> 
> 时间：2012-09-28T09:54:12.840
> 
> 标签：sql-server-ce

我在 SQL Server compact 4.0 中设置了一个列名 [End]，并在 NHibernate (v3.3) 中设置了一个映射

```
<property name="End" column="[End]" not-null="true" /> 
```

但是，我收到错误：

```
InnerException: System.Data.SqlServerCe.SqlCeException
   HResult=-2147467259
   Message=The column name is not valid. [ Node name (if any) = amendedday0_,Column name = End ]
   Source=SQL Server Compact ADO.NET Data Provider
   ErrorCode=-2147467259
   NativeError=25503 
```

NHibernate 生成的 SQL 是：

```
[SQL: SELECT table0_.[End] as column3_8_0_,] 
```

据我所知，这意味着 SQL 驱动程序在数据库中找不到列名 [End]？但是，MSDN 指导是用[] 或"" 围绕关键字，所以应该找到[End] 吗？

请你能帮我指出正确的方向来解决这个问题。

PS我知道我可以更改为不使用关键字，但我很感兴趣为什么以上不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:20:38.450

好吧，愚蠢的错误，我在设置表格时在实际列定义中使用了[End]，应该只使用End

# javascript - 在 IE7 中未选中 webgrid 中突出显示的复选框

> ID：12637713
> 
> 赞同：5
> 
> 时间：2012-09-28T09:54:29.283
> 
> 标签：javascript, asp.net, asp.net-mvc-3

我的应用程序在 MVC 3 中，我正在使用 razor 引擎，我试图在 web 网格中选择第一个项目（默认突出显示的复选框），它没有在 IE7 中被选中，这里是代码：

```
$("#@item").change(function () {

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:22:57.050

好的...让我们一步一步来...因为您没有提供太多数据...我将为您制作一个场景：

假设你有这个复选框：

```
@Html.CheckBoxFor(model=>model.isValid,new {id="chkValid"}) 
```

当然 ISValid 是一个布尔变量。

一种简单的方法是这样做：

```
@Html.CheckBoxFor(model=>model.isValid,new {@checked = "checked"}) 
```

现在，如果由于某种原因不起作用......你总是可以采用老式的方式...... Jquery：在准备好的文档中......这样做：

```
 $(document).ready(function () {
        $('chkValid').attr('checked')= true;
    }); 
```

希望能帮助到你

* * *

稍后编辑：好的......试试这个：

```
@Html.CheckBoxFor(model=>model.isValid,new {id="chkValid" , onclick="updateChk("+@model.parameter+")"}) // the value you need to send to the controller 
```

这是jquery函数：

```
 function updateChk(parameter)
    {
            if (($('#chkValid').is(':checked')) {
                var check = true;
            } else {
                check = false;
            }
    //see if checkbox is checked and pass it to the controller in an Ajax call
            $.ajax({
                type: "POST",
                url: '@Url.Action("Action", "Controller")',

                data: "{parameter:parameter, status:'" + check + "'}",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                }
            });
        } 
```

如果您不明白某些事情，请告诉我！

# c# - StreamReader — 文件解析器 — 检查行内容

> ID：12637714
> 
> 赞同：1
> 
> 时间：2012-09-28T09:54:32.153
> 
> 标签：c#, tokenize, streamreader

我已成功使 C#`StreamReader`工作：

```
using (StreamReader fileParser = new StreamReader(tbFileSelection.Text))
{
  String line = fileParser.ReadToEnd();
  Console.WriteLine(line);
} 
```

我目前正在将文件的每一行写入控制台。我现在希望遍历每一行并寻找一个特定的标签——如果该行以 [TAG1] 开头，则为 [TAG1]——我希望在控制台中显示整行。请注意，该文件不是基于 XML 的。任何人都可以提出这个想法的前进方向吗？我相信我需要标记字符串 Line？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T09:58:28.507

您可以使用`StartsWith`方法从行中进行过滤：

```
lines = File.ReadLines(tbFileSelection.Text)
            .Where(line => line.StartsWith("[TAG1]"));

foreach (var line in lines)
{
    Console.WriteLine(line);
} 
```

# css - 将背景图像添加到链接？

> ID：12637715
> 
> 赞同：0
> 
> 时间：2012-09-28T09:54:33.073
> 
> 标签：css, background-image

我有一堂课，它看起来像这样：

```
.blueButton {
    some css goes here
} 
```

现在要使用“按钮”，我使用以下 HTML 代码：

```
<a href="..." class="blueButton">link text</a> 
```

这显示了我的按钮，我唯一缺少的是链接文本右侧的背景图像。我试过了：

```
background: url('image url') no-repeat top right; 
```

但是图像没有出现......这是正确的做法吗？这是一个小提琴：http: [//jsfiddle.net/bSDYG/](http://jsfiddle.net/bSDYG/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:07:51.007

假设您希望图像和渐变都是背景，请使用以下语法：

`background: url(image-url), linear-gradient(...);`

即，要指定多个背景，用逗号分隔它们的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:08:47.697

你设置了两次背景。第一次，作为图像。然后，作为渐变。只有最后一次适用。

要在按钮旁边放置图像，您的锚点内必须有两个单独的元素（例如两个跨度）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:15:01.790

试试这个**[演示](http://jsbin.com/opexiw/1/edit)**

```
background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #98bff0), color-stop(1, #5e8dc6) );
background:-moz-linear-gradient( center top, #98bff0 5%, #5e8dc6 100% );
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#98bff0', endColorstr='#5e8dc6');
background: url('http://t1.gstatic.com/images?q=tbn:ANd9GcTjBC-ecGBr9x-QZ5Y7luNjiCNz3VuH1K7GeVu-rwabtLz_6QkrKVsUXfg') no-repeat center right;
background-color:#98bff0;
-moz-border-radius:3px;
-webkit-border-radius:3px;
border-radius:3px;
display:inline-block;
color:#ffffff;
font-family:arial;
font-size:12px;
font-weight:bold;
padding:6px 8px;
text-decoration:none; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T10:07:30.987

您不能将多个背景应用于同一元素。

您最好的选择是在您的链接中添加一个跨度并为其提供背景。

# javascript - 如何修复 ExtJS 布局错误？containerChildrenDone:dom 未设置

> ID：12637717
> 
> 赞同：1
> 
> 时间：2012-09-28T09:54:38.747
> 
> 标签：javascript, extjs

我正在将我的代码从 ExtJS 4.0.7 升级到 4.1.1，并且遇到了一些布局错误。我通过添加一些缺失的高度和宽度属性来修复了一些，但最后一个让我难过。

我附上了下面布局调试的一些输出。开始部分`--assetfield-1181`是问题，但我不知道错误消息的含义。我在文档中找不到对“dom”属性或 containerChildDone 的任何引用。

```
++componenteditor-1180<anchor> - boxParent: attributeeditor-1017 - size: natural/shrinkWrap
  --assetfield-1181<autocontainer> - size: calculated/configured
        triggeredBy: count=1
           assetfield-1181.containerChildrenDone:dom () dirty: false, setBy: ?
     ++label-1193<autocomponent> - size: natural/shrinkWrap
     ++gridpanel-1182<dock> - size: natural/configured
        ++headercontainer-1183<autocomponent> [isBoxParent] - size: calculated/configured
        ++headercontainer-1183<gridcolumn> [isBoxParent] - size: calculated/configured
           ++gridcolumn-1184<columncomponent> [isBoxParent] - size: calculated/calculatedFromShrinkWrap
           ++actioncolumn-1185<columncomponent> [isBoxParent] - size: calculated/calculatedFromShrinkWrap
     ++gridpanel-1182<autocontainer> - size: natural/configured
        ++gridview-1186<tableview> - boxParent: gridpanel-1182 - size: natural/shrinkWrap
     ++button-1192<button> - size: shrinkWrap/shrinkWrap
  ++assetfield-1181<autocomponent> - size: calculated/configured
  ++checkboxfield-1194<field> - size: calculated/shrinkWrap
  ++checkboxfield-1195<field> - size: calculated/shrinkWrap 
```

# jquery - jQuery - 从选项加载数组信息

> ID：12637722
> 
> 赞同：0
> 
> 时间：2012-09-28T09:54:53.160
> 
> 标签：jquery, html, jquery-plugins, multidimensional-array

我正在创建一个插件，它可以从 soundcloud 或用户自己的列表中加载播放列表信息。为此，我设置了如果选项中有一个名为“播放列表”的数组，它将加载该信息。下面是代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.test').Tarabu({
        soundcloud_user: '',
        soundcloud_clientId: "bcc776e7aa65dbc29c40ff21a1a94ecd",
        playlist: [
            {
                title:"Cro Magnon Man",
                artist:"The Stark Palace",
                mp3:"http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
                oga:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg",
                poster: "http://www.jplayer.org/audio/poster/The_Stark_Palace_640x360.png"
            },{
                title:"Cro Magnon Man",
                artist:"The Stark Palace",
                mp3:"http://www.jplayer.org/audio/mp3/TSP-01-Cro_magnon_man.mp3",
                oga:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg",
                poster: "http://www.jplayer.org/audio/poster/The_Stark_Palace_640x360.png"
            }
        ]
    });
}); 
```

```
(function($) {

$.fn.Tarabu = function(options) {
    $.fn.Tarabu.defaults = {
        soundcloud_user: null,
        soundcloud_clientId: null,
        playlist: 'soundcloud'
    };
    var o = $.extend({}, $.fn.Tarabu.defaults, options);
    return this.each(function() {           
        //Determine playlist type. If soundcloud is set as the playlist it will load either the complete user set (soundcloud_user must be set) or selected sets. If local playlists have been set it will load them.
        if (o.playlist == 'soundcloud') {
            alert('soundcloud');
            //Determine if the soundcloud API client ID is set. This is required to access json data.
            if(typeof(o.soundcloud_clientId) != "undefined" && o.soundcloud_clientId !== null) {
                //Determine if the user is set and then load all sets.
                if(typeof(o.soundcloud_user) != "undefined" && o.soundcloud_user !== null) {
                    alert('soundcloud user set');   
                    $.getJSON('http://api.soundcloud.com/users/'+ o.soundcloud_user +'/playlists.json?client_id=' + o.soundcloud_clientId, { get_param: 'value' },
                    function(playlists_data) {
                        $.each(playlists_data, function(index, playlists) {
                        //Get playlists data
                        i = 1;
                        $.getJSON(playlists.uri + '.json?client_id=' + o.soundcloud_clientId, { get_param: 'value' }, function(playlist) {
                            $("<div class='player row' id='id" + i +"'><div class=' four columns'><div class='artwork'><img /></div></div><div class='playlist eight columns'><div class='description'></div><ol class='tracks'></ol></div></div>").appendTo('.soundcloud');
                            //get track data
                            $.each(playlist.tracks, function(index, track) {
                                // Create a list item for track, associate it's data, and append it to the track list.
                                var $li = $('<li class="track_' + track.id + '">' + (index + 1) + '. ' + track.title + '</li>').data('track', track).appendTo('#id'+i+' .tracks');
                            // Find the appropriate stream url depending on whether the track has a secret_token or is public.
                                url = track.stream_url;
                                (url.indexOf("secret_token") == -1) ? url = url + '?' : url = url + '&';
                                url = url + 'client_id=' + o.client_id;
                            });
                            i++         
                        });
                    });
                    });
                } else {
                    alert('soundcloud not user set');   
                } 
```

我一直在尝试以与提取 soundcloud json 的方式类似的方式加载信息，但是收效甚微。我的问题是，在语义上这样做的最佳方法是什么？

为了方便起见，我在[这里创建了一个 jsfiddle](http://jsfiddle.net/qKPbN/)，但是由于代理问题，脚本无法正常运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T00:57:13.060

这能帮你吗？

```
// Soundcloud app ID 
var $appID = (your app ID),
// Soundcloud playlist JSON object url
,$listurl = 'http://api.soundcloud.com/playlists/5696199.json?client_id=' + $appID
,$i = 0
,tracks = new Array()
,trackdata = new Array()
,playlist = new Array();

// Get the JSON object (the playlist)
$.ajax({
    url: $listurl,
    async: false,
    success: function(listdata) {
        // Iterate through the object and create array of tracks in the playlist
        $.each(listdata.tracks, function(key, val) {
            tracks[$i] = val;
            $i++;
        });
        // Now, for each of the tracks, save the necessary track info formatted as options for jPlayerPlaylist, all in another array 
        for (var i=0; i < tracks.length; i++) {
            trackdata[i] = {title: tracks[i].title, mp3: tracks[i].stream_url + '?client_id=' + $appID, url: tracks[i].permalink_url, sc:"true"}
        }
        // Next, stack all these arrays into one array for use in the jPlayer playlist 
            for(i=0;i<trackdata.length;i++){
                playlist.push(trackdata[i]);
    }
    }
});

// Instantiate the jPlayer playlist object, using the Soundcloud playlist array   
new jPlayerPlaylist({
    jPlayer: "#jquery_jplayer_1",
    cssSelectorAncestor: "#jp_container_1"
}, 
playlist,
{
    playlistOptions: {
        autoPlay: false
    },
    loop: true, // For restarting the playlist after the last track
    swfPath: "../js",
    supplied: "mp3, m4a, oga",
    smoothPlayBar: true,
    keyEnabled: true
}); 
```

# java - 打开类型 MXBean 问题

> ID：12637724
> 
> 赞同：2
> 
> 时间：2012-09-28T09:55:03.803
> 
> 标签：java, javabeans, jmx, java-7, mbeans

启动 MXBean 时，我收到错误提示 Method SampleServiceMXBean.register 具有无法转换为开放类型的参数或返回类型。根据错误消息，很明显我的 MXBean 无法赶上复合类。

以更好的方式解释事物：这是我的 MXBean 接口代码

```
 public interface SampleServiceMXBean {
      public boolean register(FileInfo fi) throws IOException;   //FileInfo is a not Open Type(Composite)
 } 
```

启动 MXBean 服务器代码

```
 MBeanServer beanServer= ManagementFactory.getPlatformMBeanServer();
 ObjectName sampleName = new ObjectName("com.me.core.services:fileExt=SampleService");
 beanServer.registerMBean(sampleService,sampleName); 
```

现在，据我所知，据说 mxbean 支持复合类型参数，而不是只支持开放类型的手段，那么为什么我会收到这个错误？我想这不是使用复合类型对象的正确方法。任何想法如何启动...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:45:03.383

我猜你忘记序列化这些对象了。尝试这样做，因为据我所知开放类型由 MXBEAN 正确处理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T05:19:59.600

如果 FileInfo 是一个 Java bean，那么 JMX 应该能够处理它。但是，如果您将数据成员设为最终成员并通过构造函数设置它们，则需要使用 ConstructorParameters 注释，例如

```
public class FileInfo {
   private final String filename;
   private final String filetype;

   @ConstructorProperties({"filename", "filetype"})
   public FileInfo(String filename, String filetype) {
      this.filename = filename;
      this.filetype = filetype;
   }

   public String getFilename() {
     return filename;
   }

   public String getFiletype() {
     return filetype;
   }
} 
```

# javascript - 什么是 DOM 就绪事件？

> ID：12637725
> 
> 赞同：21
> 
> 时间：2012-09-28T09:55:21.920
> 
> 标签：javascript, domready

我需要在收到页面内容（整个 HTML 元素）后立即触发脚本，但还不必渲染它。

我认为只有一个简单的`<script>`标签在我的页面顶部执行一些代码就可以了？

换个方式来表述这个问题：DOM 就绪是否意味着所有元素和资源都已被拉取**和渲染**？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-28T09:57:07.197

DOM 就绪意味着所有 HTML 都已被浏览器接收并解析到现在可以操作的 DOM 树中。

它发生*在*页面完全呈现之前（因为外部资源可能尚未完全下载 - 包括图像、CSS、JavaScript 和任何其他链接资源）。

实际事件称为[`window.DOMContentLoaded`](https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T09:58:32.040

DOMready 表示：DOM 结构已经构建在浏览器内存中。异步页面已经开始渲染，但它可能还没有完成，因为图像、视频等外部资源将在稍后完成加载。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-28T10:03:04.800

您也可以尝试使用这些功能

```
window.onload = function(){
   //your code
  } 
```

或者

```
body.onload = function(){
   //your code
  } 
```

如果你不想使用 jQuery。

但要小心，DOM 加载并不意味着页面加载，iframe、javascript、图像和 css 可能会在该事件之后加载。

关于 DOM 事件[Javascript 教程有一个很好的教程](http://www.howtocreate.co.uk/tutorials/javascript/domevents)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-09-05T16:12:51.823

> 我需要在收到页面内容（整个 HTML 元素）后立即触发脚本，但还不必渲染它。
> 
> 我认为只有一个简单的标签在我的页面顶部执行一些代码就可以了？

那么你很可能想要[这个`DOMContentLoaded`事件](https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event)。您可以这样使用它：

```
 <head>
    <!-- … --->
        <script>
window.addEventListener('DOMContentLoaded',function () {
    //your code here
});
        </script>
    </head> 
```

> 换一种方式来表述问题：DOM 就绪是否意味着所有元素和资源都已被拉取和渲染？

没有“ *DOM 就绪*”事件。您可能会想到[jQuery`.ready()`](https://api.jquery.com/ready/)或该术语的一些类似的奇怪用法（例如，Google 也有一个类似名称的专有事件，它们指代）。

但是，对于该`DOMContentLoaded`事件（引用[MDN](https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event)）：

> DOMContentLoaded 事件在初始 HTML 文档完全加载和解析后触发，无需等待样式表、图像和子框架完成加载。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-27T09:48:19.533

文档对象模型 (DOM) 是一种跨平台且与语言无关的约定，用于表示 HTML、XHTML 和 XML 文档中的对象并与之交互。 [1] 每个文档的节点都组织在一个树结构中，称为 DOM 树

# java - 如何简单地预加载声音并在 Java 中播放？

> ID：12637726
> 
> 赞同：0
> 
> 时间：2012-09-28T09:55:27.920
> 
> 标签：java, audio, javasound, clip

如何不时在java中预加载声音并播放它？我找到了包括`Clip.open(AudioInputStream)`方法的例子，但现在 API 没有。

我知道我可以打开`AudioInputStream`并将`SourceDataLine`数据从一个复制到另一个，但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:11:42.980

Clip 用于预加载到内存中。SourceDataLine 用于太大而无法保存在内存中的声音。

您使用“打开”方法预加载剪辑。

当你准备好播放它时，你使用“开始”方法。播放后（或再次播放之前），您需要重新定位到剪辑的开头。

这是官方教程： [http ://docs.oracle.com/javase/tutorial/sound/playing.html](http://docs.oracle.com/javase/tutorial/sound/playing.html)

# java - iPad/iPhone 上的 HTTP 字节范围协议客户端行为

> ID：12637728
> 
> 赞同：12
> 
> 时间：2012-09-28T09:55:39.197
> 
> 标签：java, iphone, ipad, http, streaming

我正在测试一个支持[HTTP 字节范围请求的](http://en.wikipedia.org/wiki/Byte_serving)[HTTP servlet 实现（由 BalusC 共享）](http://balusc.blogspot.co.uk/2009/02/fileservlet-supporting-resume-and.html)。

我发现了不同 HTTP 客户端之间的一些特殊差异，并且想知道我是否没有遗漏任何东西。我在测试中使用了 >2G 的 mp4 视频文件，并且正在使用 Wireshark 捕获数据包。大致是这样的：

*   三星盖乐世 SII：

    *   对文件的 HTTP GET 请求来了，要求字节范围`[0; <almost the end of the file>]`
    *   服务器响应，开始流式传输文件
    *   每个后续块都在**同一 HTTP 响应**的范围内提供服务。不会发送新的 HTTP 请求（除非视频被快速转发到某个位置）。流式代码块非常简单，它通过以下方式读取`RandomAccessFile input`和写入：`OutputStream output``byte[] buffer`

        ```
        while ((read = input.read(buffer)) > 0) {
            output.write(buffer, 0, read);
        } 
        ```

*   iPad 1
    *   对文件的 HTTP GET 请求来了，要求字节范围`[0; <almost the end of the file>]`
    *   服务器响应，开始流式传输文件
    *   iPad 获得一两个块，然后单方面决定停止从服务器接受字节，并发出对文件下一个块的**单独`GET`请求**。新的范围边界是例如`[100, almost the end of the file]`。视频显示正常。
    *   循环从第 2 步开始再次重复。左边界总是向文件末尾移动。

我没有调查连接到底是如何终止的。可能是 iPad 停止发送 TCP ACK 数据包，我想这并不重要。

我的问题是，对于每个终止的连接，我都会遇到`java.net.SocketException: Broken pipe`异常。这不仅会污染日志（这是一个小问题/可解决的问题），而且我相信这会损害性能，因为引发异常非常昂贵。观看简单视频时，异常率约为 1 个异常/秒，但如果服务器有 100 个并发用户，那么 JVM 可能会花费大量时间来计算堆栈跟踪，而不是进行实际工作。

我还在使用 iOS 6 的 iPhone 上对此进行了测试，并且能够观察到与 iPad 1 相同的行为。重申一下，这**不会发生**在三星 Android 或我尝试过的任何桌面浏览器上，包括桌面 Mac 上的 Safari。

**问题：**

*   这是 iPad/iPhone 的已知错误/功能吗？
*   有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:29:45.783

IIRC，“断管”仅表示另一方在关闭其读取端后接收到数据。

我能想到的最合理的事情是，它试图不浪费大量带宽下载从未被观看的视频（也许他们已经与运营商达成一致，我怀疑这是[“直播”限制](https://developer.apple.com/library/ios/qa/qa1767/_index.html)背后的原因：

> “蜂窝网络上超过 10 分钟的视频流内容必须使用 HTTP 实时流，并包括基线 64 kbps 纯音频 HTTP 实时流。”

限制下载的唯一其他简单方法是停止`read()`并等待接收窗口填满，但这并不总是容易做到的（`NSURLConnection`例如，真的并不容易做到这一点）。

如果您非常幸运，客户端将关闭其写入端（这样服务器将`read()`EOF）并等待一段时间，然后再关闭其读取端。在这种情况下，*可以*安全地假设客户端不再需要下载的其余部分。[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)有点模糊（似乎忘记了套接字只能在一个方向上关闭），但提到了“优雅关闭”（[根据微软](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738547(v=vs.85).aspx)的说法，这涉及关闭写入端并完成从读取端的读取，直到超时过去），但也说

> 服务器不应该在传输响应的过程中关闭连接，除非怀疑网络或客户端故障。

因此，如果您*知道*它是一个 iDevice 并且您阅读了 EOF，那么服务器关闭套接字可能是安全的，前提是您已经*彻底测试*它不会破坏任何东西——根据 User-Agent 改变 HTTP 行为就像一个可怕的想法。

或者，不要在意。如果它是一个 iDevice（这似乎不如改变 HTTP 行为那么可怕），你可以进行 UA 嗅探并忽略异常。异常开销几乎可以肯定可以忽略不计，并且可能远低于将其打印到日志的开销。每秒 100 个异常不算什么。如果您不确定，请对其进行分析。

您也可以[向 Apple 提交错误](https://bugreport.apple.com/)，但随着这些事情的发展，这并不是[特别可疑的网络行为](https://discussions.apple.com/thread/2160614?start=0&tstart=0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T11:59:04.623

回到我们共同的发现。看看苹果网站上的[这个讨论。](https://discussions.apple.com/thread/4347104?start=195&tstart=0)现在看来，这个问题已经导致 iOS6 在流式传输时消耗过多数据的问题。

（使用荷兰语，但[这里](http://gathering.tweakers.net/forum/list_messages/1488677)报告的问题完全相同。Android 执行 1 个请求，iOS 执行多个请求）

是时候用 iOS6.0.1 重新测试这些东西，看看它们是否确实修复了范围请求问题。

刚刚在我的 iPod Touch 第 5 代 - iOS6.0.1 上进行了测试：范围请求仍然请求 0-1，然后是几次 0-full 文件，然后是更小的范围。不过看起来还是很乱

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T21:57:00.977

在 iPhone 上流式传输时，您需要发送 Accept Ranges 标头。这可能会导致您的问题。看看这个帖子

[在 iOS 上直接访问 MP4 时播放，但通过 PHP 读取时不播放](https://stackoverflow.com/questions/3128906/mp4-plays-when-accessed-directly-but-not-when-read-through-php-on-ios)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T22:54:32.787

首先，

> 花大量时间计算堆栈跟踪

如果您不打算调用 get/printStackTrace()，则不会计算。把它从原木上关掉或抓住它并在某处避开它。

我有同样的问题，它也没有消失。好吧，这些确实是愚蠢的选择，但是您可以使用负载平衡器来接受连接并将其重定向到您的服务器 tomcat 或 glassfish，无论您使用什么。当我开始在 AWS 上使用 ELB 时，我观察到了这种缺乏断管行为。NGINX 或 Apache 可以为您做一些前沿通信。

我这样说是因为即使是操作系统也可能是 JVM 没有收到正确的 TCP 通信关闭的原因，因为操作系统上的 JVM 实现。

# java - Java 输入流故障

> ID：12637731
> 
> 赞同：0
> 
> 时间：2012-09-28T09:55:55.377
> 
> 标签：java, inputstream

当我在调试模式下运行以下代码段时，只要我执行 line `str=in.readUTF()`，程序就会停止。

```
InputStream sin=socket.getInputStream();
DataInputStream in=new DataInputStream(sin);

String str="";
str=in.readUTF();

System.out.println("This line is not reached"); 
```

我使用网豆。尽管没有显示异常，但程序会停止。在调试模式下，最初，这`str=in.readUTF()`条线是绿色的，但是当我按*F7 或 F8*继续时，绿色线变成粉红色并且程序停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:04:59.577

As documented at [http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInput.html#readUTF](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInput.html#readUTF)() the calls reads a string from the stream and returns it.

Your debugger is just waiting for input.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T11:22:35.463

除非你用你写数据，否则你`DataOutputStream.writeUTF()`不能用`DataInputStream.readUTF()`. 可能您应该使用`readLine()`. 这完全取决于您如何编写数据，而您没有告诉我们。

# android - 更新 Android 应用程序时 SharedPreferences 会发生什么？

> ID：12637737
> 
> 赞同：91
> 
> 时间：2012-09-28T09:56:20.733
> 
> 标签：android, sharedpreferences, updates

我已将用户设置存储在我的应用程序的 SharedPreferences 中。当我通过 Google Play 商店将应用程序更新到新版本的应用程序时，SharedPreferences 会发生什么情况？

更新后 SharedPrefernces 是否仍然存在或将被删除？

到目前为止，我还没有在网络或 Stackoverflow 上找到答案。

你能指出一些他们描述这个过程的链接吗？

**编辑：** 同时我也找到了另一个答案：[SharedPreferences behavior on Update/Uninstall](https://stackoverflow.com/questions/7103453/sharedpreferences-update-unisntall)

**编辑 2：** 自从我第一次问这个问题以来，我最近了解到，从 Android 6.0 (API 23) 开始，也可以使用自动备份功能来*保护*您的共享偏好，如[谷歌在此处](https://developer.android.com/guide/topics/data/autobackup.html)所述。

只需`allowBackup="true"`在您的`AndroidManifest.xml`文件中添加。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-28T10:10:17.090

克里斯蒂安[在这里](https://stackoverflow.com/a/3860867/1043882)说：当用户安装更新时，您的应用程序数据将保留。

但它必须与`package name`之前的应用程序的更新相同才能检测到。

EboMike 在[警告 Android 用户应用程序更新可能导致旧应用程序版本丢失数据？](https://stackoverflow.com/questions/4083531/warning-android-user-that-app-update-could-lead-to-losing-data-from-old-app-vers)说：

> 坦率地说，由于升级而丢失数据是不可接受的。

**编辑**：

**通常**，SharedPreferences（以及其他用户数据）会在更新过程中保留，但有时，由于一些“*未知*”问题，数据可能会丢失，我猜它是你无法控制的。因此，您可以简单地相信 SharedPreferences 将被保留（[参见此处](https://stackoverflow.com/a/10201011/1043882)）。

所以，如果你想避免在升级过程中清除用户数据，你必须将主要数据保存在外部存储中（这可以是可移动存储介质，如 SD 卡或内部、不可移动的存储。）而不是为您的应用程序私有。或者至少在升级之前为用户备份数据。然后在您（升级的）应用程序的第一次运行中，检查外部存储中是否有任何备份文件。

如果您想知道***升级应用程序必须/可以发生什么事情？***,我没有对此进行任何很好的描述。它与,,和其他主题是复杂和相关的。我的`Android Security`意思`Application signing`是`copy protection`如果您在上述任何字段中更改您的应用程序的状态,它会导致不同的结果。
例如，如果您`CHANGED COPY PROTECTION FROM ON to OFF OR OFF to ON`，您的应用程序将被更新，但会导致您的所有共享偏好丢失，文件访问是不可能的......。
尽管您必须注意条件导致您的新应用程序`being considered`作为以前应用程序的更新（请参阅[无法更改的事情](http://android-developers.blogspot.de/2011/06/things-that-cannot-change.html)）。

此外，您必须注意您的代码，这可能会导致删除数据库中的数据（请参阅[使用预加载的 SQLite 更新应用程序](https://stackoverflow.com/questions/6954529/update-app-with-preloaded-sqlite)）。

**但最终，如果小心，你可以说：**

> 更新过程仅替换 apk 文件（以及其中的内容，例如可绘制文件，...）并且不会更改数据库、共享首选项和在运行时生成的任何其他文件（可能在这种情况下，新应用程序安装与前一个 App 的 UID 相同的 UID）。

您可以查看这些页面以获取更多详细信息：

[帮助！？在市场上更新我们的应用程序会删除已保存的 SharedPreferences。](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/JGquZuDK8wI)
[市场复制保护在更新后完全中断文件访问](http://code.google.com/p/android/issues/detail?id=2047)
[有人可以解释应用程序更新过程吗？](http://productforums.google.com/forum/#!topic/android-market/0y8wNUhZEWo)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-20T08:02:51.280

经过 4 个多小时的调试后，我发现我通过序列化模型将模型保存为字符串。可序列化的类有一个名为 **serialVersionUID**的唯一 id ，默认情况下在运行时设置，id 由类名、接口名和变量名计算得出。我发现我更改了模型类，添加了一个变量，然后更新了应用程序。由于类现在已更改，因此设置了新的**serialVersionUID**并因此在 update 时，它​​无法反序列化字符串并创建模型并给出 java.io.InvalidClassException

显式设置 serialVersionUID 以避免此问题

```
static final long serialVersionUID = 42L; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-28T10:09:24.827

我想当我上次通过 Google Play 更新我的应用程序时，sharedPreferences 没有受到影响。
我正在使用它们来自动登录，并且在更新后它就这样做了。
那是一个月前，我的记忆可能会变得模糊，所以最好也听听其他人的意见。

# android - 列表中的项目未正确显示

> ID：12637745
> 
> 赞同：0
> 
> 时间：2012-09-28T09:56:41.917
> 
> 标签：android

我有一个列表视图，但只有当我点击它们时才会显示这些项目。

这是我的代码：

```
 MenuListItem selectedItem;

    List<MenuListItem> menuItemList = new ArrayList<MenuListItem>();
        menuItemList.addAll(resultResidents);

        // Show dialog with list of menuListItems
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Selecteer resident");
        builder.setIcon(contactIcon);

        builder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        final ArrayAdapter<MenuListItem> arrayAdapter = new ArrayAdapter<MenuListItem>(
                this, android.R.layout.simple_list_item_1,android.R.id.text1, menuItemList);

        builder.setAdapter(arrayAdapter,
                    new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int item) {
                            selectedItem = arrayAdapter.getItem(item);
                            dialog.dismiss();
                            finish();
                        }
                    });

        AlertDialog alert = builder.create();
        alert.show(); 
```

这是 menuItemList 类：

```
public class MenuListItem {

private String itemID,itemName;

public MenuListItem(String itemID, String itemName)
{
    this.itemID = itemID;
    this.itemName = itemName;
}

public String getItemID() {
    return itemID;
}

public void setItemID(String itemID) {
    this.itemID = itemID;
}

public String getItemName() {
    return itemName;
}

public void setItemName(String itemName) {
    this.itemName = itemName;
}

@Override
public String toString() {
    return this.itemName;
}
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:10:52.337

您的项目在那里，它们只是不可见，因为文本颜色正在融入背景。这是一些 android 布局样式的错误。他们在更高版本的 android 中修复了此问题，但仍有一些布局存在此问题。

您可以简单地使用自定义字体颜色创建自己的 simple_list_item，以防止文本混入背景以解决问题。

# c# - 默认凭据在 1 个项目中有效，但在另一个项目中无效？

> ID：12637746
> 
> 赞同：0
> 
> 时间：2012-09-28T09:56:44.507
> 
> 标签：c#, asp.net, sharepoint, file-upload, defaultnetworkcredentials

我有一个网络服务，可以将文档上传到 Sharepoint，并且可以正常使用

```
System.Net.ICredentials creds = System.Net.CredentialCache.DefaultCredentials;
context.Credentials = creds; 
```

我在另一个项目中重新使用了这段代码，我得到了错误：

```
System.Net.WebException was unhandled by user code
Message=The remote server returned an error: (401) Unauthorized. 
```

据我所见，配置文件中的所有内容都相同，并且不知道为什么会失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:08:21.753

我为可能遇到此类问题的任何人解决了它。

问题出在 IIS 中，它使用的是默认应用程序池。只需将其从默认更改为您的自定义池，其中“身份”字段是您的 PC 名称或登录凭据。这可以对默认的应用程序池进行，但是，如果您有使用此池的现有项目，建议创建一个新的应用程序池，这样您就不会破坏现有项目。

# jquery - Jquery递归比较两个元素的html和属性

> ID：12637752
> 
> 赞同：2
> 
> 时间：2012-09-28T09:57:16.277
> 
> 标签：jquery, ajax, recursion, compare, updates

我正在尝试以一种智能的方式将 HTML 从一个元素复制到另一个元素。

假设我有以下内容。我想将结构从“.from”复制到“.to”。我可以使用 .html() 批量复制，但这对于一棵大树来说很慢，并且在浏览器重绘时会导致闪烁。

我想知道是否有人知道我可以递归地挖掘每个元素的树并逐个元素比较元素的方法。因此，如果只有一个元素的 HTML 或属性发生了变化，我只需要更改那个元素 - 其他一切都保持不变。

在下面的示例中，“.a”将具有未更改的属性，但更改了 HTML。".b" 需要深入挖掘它的子元素并更改 ".x" 的属性和 HTML。“.e”必须在目标元素中创建。

有谁知道这样做的智能方法？

```
<ul class="to">
    <li class="a">test1</li>
    <li class="b">
         <div class="x">test2</div>
    </li>
    <li>test3</li>
    <li class="c">test4</li>
</ul>

<ul class="from">
    <li class="a">test5</li>
    <li class="b">
         <div class="y">test6</div>
    </li>
    <li class="c">test7</li>
    <li class="d">test4</li>
    <li class="e">test</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T00:09:53.700

请看我的解决方案：http: [//javascripts.svn.sourceforge.net/viewvc/javascripts/javascripts/js.prototype-extensions/js/extensions/element.js](http://javascripts.svn.sourceforge.net/viewvc/javascripts/javascripts/js.prototype-extensions/js/extensions/element.js?view=markup) ?view=markup - 从评论开始`Smooth update of DOM subtree`，这段代码可能是很容易被 jQuery 采用。

简而言之，函数`updateSmoothly`逐个节点比较两个 DOM 子树（源和目标），试图保留现有节点并尽可能减少源子树中的更改。在您的示例中，它将更改文本值，添加/删除现有文本/元素节点的 CSS 类，并仅将一个附加`LI`到列表中。

该解决方案在生产环境中运行，即使在 IE8 中也能以足够快的速度更新具有 1300 多行的表。

PS 对另一个问题的类似回答：[Updating gigantic HTML table with ajax](https://stackoverflow.com/questions/13013900/updating-gigantic-html-table-with-ajax/13248382#13248382)

# android - 动画 webview android

> ID：12637760
> 
> 赞同：1
> 
> 时间：2012-09-28T09:57:41.363
> 
> 标签：android, animation, layout, webview

我正在尝试将 webview 滑动到一边，在其下方显示另一个 webview。我想支持 android 2.2 及更高版本，所以我不得不使用一个库来支持 3.0+ 方式的动画。我使用 NineOldAndroids 来处理动画。这很好用。但不幸的是，当 animate(mainView).x(px); 完成，在低于 3.0 的版本上，webview 中的 hitboxes 没有更新它们的位置。如何强制布局更新，以便所有按钮点击框也随着 web 视图移动？

编辑：它现在的样子是我使用 NineOldAnroids 库

`import static com.nineoldandroids.view.ViewPropertyAnimator.animate;`

并通过 px 的值（这是一个浮点数）为 x 设置动画

`animate(mainView).x(px)`

现在，当我在动画 webview 上按下链接时，它不起作用。当我在 webview 曾经所在的位置按下链接时，它可以工作。很明显，只有 webview 的像素被移动了，而不是实际的布局。我该如何解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:39:15.750

我对你提到的图书馆*一无所知。我只是建议你使用***Sliding Drawer**。只是因为你想显示动画，你所要做的就是在滑动抽屉中添加你的 WebView。你所要做的就是为第一个添加滑动动画关闭并相应地打开下一个**。**

# asp.net-mvc - MVC3 Anti Forgery - 如何使用配置文件中的 Salt

> ID：12637764
> 
> 赞同：1
> 
> 时间：2012-09-28T09:57:43.833
> 
> 标签：asp.net-mvc, asp.net-mvc-3, c#-4.0

> **可能重复：**
> [ValidateAntiForgeryToken Salt 值的运行时加载](https://stackoverflow.com/questions/2994550/runtime-loading-of-validateantiforgerytoken-salt-value)

我已将盐添加到配置文件中，但它引发了以下错误。有没有办法使用配置文件中的 Salf 值？我试图使用`Static`而不是`const`但不工作。

**错误** `constant initializer must be compile-time constant`

**代码**

```
public const string SaltValue= ConfigurationManager.AppSettings["SaltValue"]; 

[HttpPost]
[ValidateAntiForgeryToken(Salt = SaltValue)]
public ActionResult Index(SomeViewModel someViewModel)
{
    return View(); 
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:45:29.903

您应该能够使用公共静态只读 SaltValue，然后在控制器的构造函数中分配来自 ConfigurationManager.AppSettings["SaltValue"] 的值。这是两个步骤，一个是创建字符串，一个是在构造函数中填充值。然后你应该可以在你的 ValidateAntiForgeryToken 属性中使用它。

# asp.net - 在 Umbraco 博客和新闻页面中创建分页

> ID：12637765
> 
> 赞同：0
> 
> 时间：2012-09-28T09:57:46.760
> 
> 标签：asp.net, umbraco

我是 ASP.Net 和 Umbraco 的新手，在这里我想为博客和新闻列表页面创建一个分页。所以这是我的 NewsLisitng.Xslt 文件。请帮助我如何创建分页。在这里，我需要一个分页，比如显示 1 到 10 个链接。

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxml="urn:schemas-microsoft-com:xslt"
  xmlns:umbraco.library="urn:umbraco.library"
  xmlns:tagsLib="urn:tagsLib"
  xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings"
  xmlns:BlogLibrary="urn:BlogLibrary"
  exclude-result-prefixes="msxml umbraco.library tagsLib Exslt.ExsltStrings BlogLibrary">

    <xsl:output method="html" omit-xml-declaration="yes"/>

    <xsl:param name="currentPage"/>
    <xsl:variable name="numberOfPosts" select="2"/>

    <xsl:variable name="pageNumber">
        <xsl:choose>
            <xsl:when test="umbraco.library:RequestQueryString('page') &lt;= 0 or string(umbraco.library:RequestQueryString('page')) = '' or string(umbraco.library:RequestQueryString('page')) = 'NaN'">1</xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="umbraco.library:RequestQueryString('page')"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="filter">
        <xsl:choose>
            <xsl:when test="string-length(umbraco.library:Request('filterby')) &gt; 0">
                <xsl:value-of select="umbraco.library:Request('filterby')"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="''"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:variable name="numberOfRecords">
        <xsl:choose>
            <xsl:when test="$filter = ''">
                <xsl:value-of select="count($currentPage/ancestor-or-self::umbBlog//umbBlogPost)"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="count($currentPage/ancestor-or-self::umbBlog//umbBlogPost [contains(Exslt.ExsltStrings:lowercase(./tags), Exslt.ExsltStrings:lowercase($filter))])"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:variable>

    <xsl:template match="/">

        <xsl:if test="$filter != ''">
            <h2 class="page-title">
                Archive for tag:
                <span>
                    <xsl:value-of select="$filter"/>
                </span>
            </h2>
        </xsl:if>

        <xsl:if test="$currentPage [name() = 'umbDateFolder']">
            <h2 class="page-title">
                Monthly Archives: <xsl:value-of select="umbraco.library:FormatDateTime(concat($currentPage/../@nodeName,'-',$currentPage/@nodeName,'-11T10:24:46'),'MMMM yyyy')"/>
            </h2>
        </xsl:if>

        <xsl:if test="$numberOfRecords &gt; $numberOfPosts">
            <div id="nav-above" class="navigation">

                <div class="nav-previous">
                    <xsl:if test="(($pageNumber ) * $numberOfPosts) &lt; ($numberOfRecords)">
                        <span class="meta-nav">&#171; </span>
                        <a href="?page={$pageNumber +1}">Older posts</a>
                    </xsl:if>
                </div>

                <div class="nav-next">
                    <xsl:if test="$pageNumber &gt; 1">
                        <a href="?page={$pageNumber -1}">Newer posts</a>
                        <span class="meta-nav"> &#187;</span>
                    </xsl:if>
                </div>

            </div>
        </xsl:if>

        <xsl:if test="$filter = ''">

            <xsl:for-each select="$currentPage/ancestor-or-self::umbBlog//umbBlogPost">
                <xsl:sort select="./PostDate" order="descending" />

                <xsl:if test="position() &gt; $numberOfPosts * (number($pageNumber)-1) and
        position() &lt;= number($numberOfPosts * (number($pageNumber)-1) +
        $numberOfPosts )">

                    <xsl:call-template name="showpost">
                        <xsl:with-param name="post" select="."/>
                    </xsl:call-template>

                </xsl:if>

            </xsl:for-each>
        </xsl:if>

        <xsl:if test="$filter != ''">

            <xsl:for-each select="$currentPage/ancestor-or-self::umbBlog//umbBlogPost [contains(Exslt.ExsltStrings:lowercase(./tags), Exslt.ExsltStrings:lowercase($filter))]">
                <xsl:sort select="./PostDate" order="descending" />
                <xsl:if test="position() &gt; $numberOfPosts * (number($pageNumber)-1) and
        position() &lt;= number($numberOfPosts * (number($pageNumber)-1) +
        $numberOfPosts )">
                    <xsl:call-template name="showpost">
                        <xsl:with-param name="post" select="."/>
                    </xsl:call-template>
                </xsl:if>
            </xsl:for-each>
        </xsl:if>

    </xsl:template>

    <xsl:template name="showpost">
        <xsl:param name="post"/>

        <div class="latestnews-wrap one-column-block hentry post publish author-{$post/@writername} tag-boat tag-lake {umbraco.library:FormatDateTime($post/@updateDate, 'yYYYY mMM')} y2008 m10 d17 h04">
            <ul>
                <li>
                    <div class="left-column">
                        <div class="entry-date calendar">
                            <abbr class="published" title="{umbraco.library:ShortDate($post/PostDate)}">
                                <span class="day">
                                    <xsl:value-of select="umbraco.library:FormatDateTime($post/PostDate, 'MM/yy')"/>
                                </span>
                            </abbr>
                        </div>
                    </div>
                    <!--.left-column-->
                    <div class="right-column">
                        <h4 class="entry-title" id="post-{$post/@id}">
                            <a href="{umbraco.library:NiceUrl($post/@id)}" title="Permalink to {$post/@nodeName}">
                                <xsl:value-of select="$post/@nodeName"/>
                            </a>
                        </h4>
                        <xsl:if test="$post/photo != ''">
                            <xsl:variable name="media" select="umbraco.library:GetMedia($post/photo, 0)" />
                            <xsl:if test="$media">
                                <div class="thumbNail">
                                    <img src="{$media/umbracoFile}" alt="{$media/altText}"/>
                                    <xsl:if test="$post/photoCaption">
                                        <span class="caption">
                                            <xsl:value-of select="$post/photoCaption" />
                                        </span>
                                    </xsl:if>
                                </div>
                            </xsl:if>
                        </xsl:if>

                        <div class="entry-content">
                            <xsl:value-of select="$post/shortDescription" disable-output-escaping="yes"/>
                        </div>

                        <a href="{umbraco.library:NiceUrl($post/@id)}" class="more-link news-more">Read More</a>
                    </div>
                    <!--.right-column-->
                </li>
            </ul>

        </div>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:01:24.427

我强烈建议阅读[这篇文章。](http://www.nibble.be/?p=11)而[这个](https://stackoverflow.com/questions/1440908/how-to-make-pagination-in-xslt)。

考虑到您是从 ASP.NET 和 Umbraco 开始的，您将一路学习，这对您很有帮助。

# python - Python 3：生成器的发送方法

> ID：12637768
> 
> 赞同：28
> 
> 时间：2012-09-28T09:58:12.570
> 
> 标签：python, python-3.x, generator

我看不懂`send`方法。我知道它是用来操作发电机的。但语法在这里：`generator.send(value)`.

我不知何故无法理解为什么该值应该成为当前`yield`表达式的结果。我准备了一个例子：

```
def gen():
    for i in range(10):
        X = yield i
        if X == 'stop':
            break
        print("Inside the function " + str(X))

m = gen()
print("1 Outside the function " + str(next(m)) + '\n')
print("2 Outside the function " + str(next(m)) + '\n')
print("3 Outside the function " + str(next(m)) + '\n')
print("4 Outside the function " + str(next(m)) + '\n')
print('\n')
print("Outside the function " + str(m.send(None)) + '\n') # Start generator
print("Outside the function " + str(m.send(77)) + '\n')
print("Outside the function " + str(m.send(88)) + '\n')
#print("Outside the function " + str(m.send('stop')) + '\n')
print("Outside the function " + str(m.send(99)) + '\n')
print("Outside the function " + str(m.send(None)) + '\n') 
```

结果是：

```
1 Outside the function 0

Inside the function None
2 Outside the function 1

Inside the function None
3 Outside the function 2

Inside the function None
4 Outside the function 3

Inside the function None
Outside the function 4

Inside the function 77
Outside the function 5

Inside the function 88
Outside the function 6

Inside the function 99
Outside the function 7

Inside the function None
Outside the function 8 
```

好吧，坦率地说，这让我感到惊讶。

1.  在文档中我们可以读到，当一个`yield`语句被执行时，生成器的状态被冻结并且 的值`expression_list`被返回给`next`的调用者。好吧，这似乎没有发生。为什么我们可以在里面执行`if`语句和`print`函数`gen()`。
2.  我如何理解为什么`X`函数内部和外部不同？好的。让我们假设将`send(77)`77 传输到`m`. 那么，`yield`表达式变为 77。那么 是什么`X = yield i`？函数内部的 77 在外部发生时如何转换为 5？
3.  为什么第一个结果字符串没有反映生成器内部发生的任何事情？

无论如何，你能以某种方式评论这些`send`和`yield`陈述吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-28T10:32:09.880

当您在生成器中使用`send`和表达`yield`时，您将其视为协程；一个单独的执行线程，可以顺序交错运行，但不能与其调用者并行运行。

当调用者执行`R = m.send(a)`时，它将对象`a`放入生成器的输入槽，将控制权转移给生成器，并等待响应。生成器接收对象`a`作为 的结果`X = yield i`，并运行直到遇到另一个`yield`表达式，例如`Y = yield j`。然后它放入`j`它的输出槽，将控制权转移回调用者，并等待它再次恢复。调用者接收`j`到 的结果`R = m.send(a)`，并运行直到它遇到另一个`S = m.send(b)`语句，依此类推。

`R = next(m)``R = m.send(None)`和;一样 它被放入`None`生成器的输入槽，所以如果生成器检查`X = yield i`then的结果`X`将是`None`.

作为一个比喻，考虑一个[愚蠢的服务员](http://www.flickr.com/photos/duncan/7458208/)：

![愚蠢的服务员](../Images/1b8d1d6770f3ca665706f201e2c142b9.png)

当服务员接到顾客的订单时，他们将垫子放在哑巴服务员的手上，`send`然后送到厨房，然后在舱口等待菜：

```
R = kitchen.send("Ham omelette, side salad") 
```

厨师（一直在舱口等）拿起订单，准备好菜，`yield`送到餐厅，然后等待下一个订单：

```
next_order = yield [HamOmelette(), SideSalad()] 
```

服务员（一直在舱口等待）把菜拿给顾客，然后带着另一个订单回来，等等。

因为服务员和厨师都在下`send`订单或`yield`菜后在舱口等待，所以任何时候只有一个人在做任何事情，即该过程是单线程的。双方都可以使用正常的控制流，因为生成器机器（哑巴服务员）负责交错执行。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-07-11T07:50:35.740

最令人困惑的部分应该是这一行`X = yield i`，特别是当您调用`send()`生成器时。实际上，您唯一需要知道的是：

在词汇层面： **`next()`等于`send(None)`**

在解释器级别： **`X = yield i`**等于以下行（**ORDER MATTERS**）：

```
yield i
# won't continue until next() or send() is called
# and this is also the entry point of next() or send()
X = the_input_of_send 
```

`send(None)`并且，这 2 行注释是我们需要第一次调用的确切原因，因为生成器会在将值分配给**之前**`i`返回(yield `i`)**`X`**

 *** * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-27T05:49:05.810

```
def gen():
    i = 1
    while True:
        i += 1
        x = yield i
        print(x)

m = gen()
next(m)
next(m)
m.send(4) 
```

结果

```
None
4 
```

查看上面更简化的代码。
我认为导致您感到困惑的是'x = yield i'语句，这个语句并不是说从send（）方法接受的值分配给i然后我分配给x。相反，值 i 由 yield 语句返回给生成器，x 由 send() 方法分配。一个语句同时做两件事。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-07T16:30:15.187

*注意：*
为简单起见，我的回答仅限于生成器`yield`每行最多有 1 个命令的情况。

**TL;博士：**

*   `.send()`方法：

    *   **向当前挂起的命令* *发送*一个值`yield`（唤醒它），但是*
    **   **从下一个即将到来* `yield`的命令*接收*一个值。**
***   `.send()`方法发送的值的接收者是*yield 表达式本身。*
    这意味着表达式`yield 7`

    *   产生价值`7`，但是
    *   例如，它*自己的值*，即 的值`(yield 7)`，可以是 `"hello"`
        （括号通常是*强制性*的，除了最简单的情况）——如果这个`yield 7`命令是通过方法唤醒的`.send("hello")`。**

 *** * *

### 大图：

第一个`send`（带有`None`参数）启动生成器实例，因此它开始执行其命令。

[![在此处输入图像描述](../Images/bf9861c1744c65d3e77250f661dd3991.png)](https://i.stack.imgur.com/kCbAf.jpg)

* * *

### 详细地：

**前言：**

Let `g = gen()`, ie`g`是生成器迭代器的一个实例`gen()`
（下图的右侧）。

*   该命令的`next(g)`行为*与 完全相同* `g.send(None)`，因此您可以使用任何您喜欢的命令。

*   *仅当实例在使用以下命令**的语句*处暂停时才允许发送*非`None`值：*`g`*`yield`*
    [![在此处输入图像描述](../Images/7730377fb3997ddb58795b65eae3085f.png)](https://i.stack.imgur.com/kzBqE.jpg)

    *   *为什么？*因为该`.send()`方法可能只向*等待（暂停）`yield`表达式*发送一个值（请参阅下面“逐步”部分中的第**4点）。**

    因此，在发送非值之前，我们必须通过发送`None`值将生成器实例置于这种*挂起状态***`None`**。它可能很简单`g.send(None)`：

    [![在此处输入图像描述](../Images/5c60cde0aebf942d661bb9cc8437cf55.png)](https://i.stack.imgur.com/iH1gL.jpg)

*   但就在`g`被挂起之前，它产生了`yield`命令的值。这个产生的值成为`.send()`方法的返回值：

    [![在此处输入图像描述](../Images/9d290f65cfea3e03f14fd1e2c7cc795f.png)](https://i.stack.imgur.com/2vUmZ.jpg)

    我们可能想要*使用这个接收到的值*或者将它保存在一个变量中以供以后使用，所以我们先用下面的两张图片代替之前的两张图片：

* * *

**一步步：**

1.  第一个`.send()`启动实例`g`。实例`g`开始执行它的命令直到第一`yield`条语句，它产生它的值：

    [![在此处输入图像描述](../Images/1189572555794bcfd81f3ab182c1c443.png)](https://i.stack.imgur.com/4Rgic.jpg)

    这意味着，变量`from_iterator_1`中将是字符串`"first_from_iterator"`。

2.  现在，在产生它的第一个值之后，我们`g`处于暂停状态

    [![在此处输入图像描述](../Images/12ead7d70d2978c74e736bdd5dcac665.png)](https://i.stack.imgur.com/76yVw.jpg)

    这允许我们发送`g`一些**有用**的东西，而不是`None`——例如数字`1`。

3.  因此，让我们将号码发送`1`到`g`： [![在此处输入图像描述](../Images/10880a23d9ed81b41150a4b2dca6dad3.png)](https://i.stack.imgur.com/GLCsZ.jpg)

4.  由于在*表达式*`g`处暂停，*该表达式（本身）*的值 将变为。 *`yield "first_from_iterator"`*`1`**

     **（是的，`yield "first_from_iterator"` **是**一个表达式，同样`a + b`是。）

    回想一下，此时该值`"first_from_iterator"`很久以前就已经产生了。** 
***   然后实例`g`被唤醒，并且 - 反过来 -`g.send()`现在等待返回值。 [![在此处输入图像描述](../Images/17c0583f27faa4484e502545483c18d2.png)](https://i.stack.imgur.com/w8GkR.jpg)

    *   之前暂停，现在唤醒的语句将被执行。
    （在暂停之前，它没有*被执行，它只产生一个值。*） [![在此处输入图像描述](../Images/64bec10af5d5651c7fce9ceb27fbebf7.png)](https://i.stack.imgur.com/vfaYv.jpg) 在我们的简单情况下（唤醒语句是`yield "first_from_iterator"`

    *   将接收到的值 ( `1`) 保存到变量中以供以后使用？

        ```
        received_1 = yield "first_from_iterator" 
        ```

    *   还是用它执行更复杂的计算？

        ```
        result = 3 * (yield "first_from_iterator") + 2           # result: 5 
        ```

        *   `g`将执行所有后续语句，但仅执行到包含`yield`命令的下一条语句。

    [![在此处输入图像描述](../Images/c66fc802c8f85c4f1124e60fa96f20b1.png)](https://i.stack.imgur.com/crZlj.jpg)

    *   下一条语句（其中包含`yield`命令）*产生一个值*

    [![在此处输入图像描述](../Images/bbcf4dc31bee3c69ff4c5e5a98bf2e9b.png)](https://i.stack.imgur.com/DY7e6.jpg)

    它再次挂起`g`，并唤醒等待`.send()`方法（通过为其提供等待的 - 产生的 - 返回值）。

    *   它允许在它之后执行下一个命令：

    [![在此处输入图像描述](../Images/7795ee77e9fc39c9e44b0976c2dbe78e.png)](https://i.stack.imgur.com/kBWpp.jpg)

    *   现在我们**处于与第 2 点相同的情况。——**就在执行（下一个）`.send()`方法之前——所以**故事将被重复**。

    *注意：*
    将重复*与上面“前言”部分最后一点相同的问题*——我们可能不想丢弃产生的值，所以而不是命令

    ```
    g.send(1)                          # Not very appropriate 
    ```

    最好用一些东西作为

    ```
    from_iterator_2 = g.send(1)        # Saving the 2nd yielded value 
    ```

    （对于下一个`g.send(2)`命令也是如此）。** 

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-26T09:03:22.890

由于您甚至要求发表评论，请考虑以下情况：

```
def lambda_maker():
    def generator():
        value = None
        while 1:
            value = yield value
            value= value[0][1]
    f = generator()
    next(f)  # skip the first None
    return f.send  # a handy lambda value: value[0][1] 
```

现在以下两行是等价的：

```
a_list.sort(key=lambda a: a[0][1])
a_list.sort(key=lambda_maker()) 
```

（顺便说一下，在当前（2018-05-26，GDPR 后第 1 天☺）CPython2 和 CPython3 实现中，第二行的运行**速度**比第一行快，但这是与每个函数调用的框架对象初始化开销相关的细节。）

这里会发生什么？`lambda_maker`调用`f=generator()`并获取一个生成器；调用 initial`next(f)`开始运行生成器并消耗初始值，并在该行`None`暂停。`yield`然后它将绑定的方法返回`f.send`给它的调用者。从此时开始，每次调用这个绑定方法，`generator.value`本地都会接收到绑定方法的参数，重新计算`value`然后循环返回`yield`当前值，`value`等待下一个`.send`获取另一个值。

生成器对象保留在内存中，它在循环中所做的只是：

*   **产生**当前结果（最初无）
*   **接收**另一个值（任何人用作参数`.send`）
*   根据接收值重新计算当前结果
*   环回******

# php - 如果尚未从特定下拉列表中选择值，则使用 JQuery 禁用提交按钮

> ID：12637770
> 
> 赞同：-1
> 
> 时间：2012-09-28T09:58:15.813
> 
> 标签：php, jquery

如果未选择特定下拉列表中的值，我正在尝试禁用提交按钮。下拉菜单和按钮的代码如下所示：

```
 <li>
    <select name="names" id="names">
    <option value="">Constituency</option>
    <!-- populates the drop down with names -->
    <?php foreach ($cons as $constituency): ?>
    <option value="<?php htmlout($constituency['ids']); ?>">
    <?php htmlout($constituency['names']); ?>
    </option>
    <?php endforeach; ?>
    <?php if (isset($selectError)): ?>
    <p><?php htmlout($selectError); ?></p>
    <?php endif; ?>
    </select>
    </li>

    <li><input type="hidden" name="action" value="search"></li>
    <li><input type="submit" value="SEARCH" class="button search" id="jsbutton" disabled="disabled"></li> 
```

所以下拉列表的 id 为 'names' ，按钮的 id 为 'jsbutton' 并设置为 'disabled' 。

然后，我尝试使用以下 JQuery 来定位它，但无论如何该按钮仍处于禁用状态：

```
 $(document).ready(function() {

    if ($('#names').val() = '')
    {
        $('#jsbutton').attr('disabled', 'disabled');  
    }
    else
    {
        $('#jsbutton').removeAttr('disabled');
    }
    }); 
```

所以我想做的是：

*   检查是否从 dropdpwn 中选择了值。
*   如果还没有，则禁用按钮。
*   ELSE 已从下拉列表中选择了一个值，因此应启用该按钮。

对此的任何帮助表示赞赏。

PHP 填充下拉列表：

```
 try
      {
        $cons_result = $pdo->query("SELECT id, name 
                               FROM constituency 
                               ORDER BY name");
      }
      catch (PDOException $e)
      {
        $error = 'Error fetching constituencies from database!' . $e->getMessage();
        include 'error.html.php';
        exit();
      }

      foreach ($cons_result as $rows)
      {
        $cons[] = array('ids' => $rows['id'], 'names' => $rows['name']);
      }

      include 'searchform.html.php';
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:14:41.440

你可以试试这个

**HTML**

```
<select id="names">
    <option value=0>Please Select</option>
    <?php ($cons as $constituency) {...} ?>
</select>
<input id="jsbutton" type="submit" disabled /> 
```

**JS**

```
$(function(){
    $('#names').change(function(e) {
        if ($(this).prop("selectedIndex") === 0)
        {
            $('#jsbutton').prop('disabled', true);  
        }
        else
        {
            $('#jsbutton').prop('disabled', false);
        }
    });
}); 
```

[**演示**](http://jsbin.com/akuguy/1/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:22:39.673

```
$(document).ready(function() {
     $("#names").change(function () {
          var str = "";
          if ($("#names option:selected").val()=='')
            {

                $('#jsbutton').attr('disabled', 'disabled');  
            }
            else
            {

                $('#jsbutton').removeAttr('disabled');
            }
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:00:18.173

您需要检查`change`选择框的事件，因此当值更改时，您再次检查是否选择了某些内容，然后更改您的按钮！

**还要注意声明`==`中的`if`**

```
$(document).ready(function() {
    $('#names').change(function() {
        if ($('#names').val() == '')
        {
            $('#jsbutton').attr('disabled', 'disabled');  
        }
        else
        {
            $('#jsbutton').removeAttr('disabled');
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:10:27.993

```
<li>
<select name="names" id="names" onChange='editButton(this.value);'>
<option value="">Constituency</option>
<!-- populates the drop down with names -->
<?php foreach ($cons as $constituency): ?>
<option value="<?php htmlout($constituency['ids']); ?>">
<?php htmlout($constituency['names']); ?>
</option>
<?php endforeach; ?>
<?php if (isset($selectError)): ?>
<p><?php htmlout($selectError); ?></p>
<?php endif; ?>
</select>
</li>

<li><input type="hidden" name="action" value="search"></li>
<li><input type="submit" value="SEARCH" class="button search" id="jsbutton" disabled="disabled"></li>

<script type='text/javascript'>
function editButton(value){
if (value == '')
    {
        $('#jsbutton').attr('disabled', 'disabled');  
    }
    else
    {
        $('#jsbutton').removeAttr('disabled');
    }
}
</script> 
```

每次更改下拉列表中的值时都会调用 editButton 函数。因此，如果值为 null，它将禁用按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T10:11:21.347

采用

```
$('#names').val() =='' instead of $('#names').val() = '' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-02T01:29:47.970

```
 <li>
            <select name="names" id="names"> <!-- if it's not selected then disabled the submit button right? -->
            <option value="">Constituency</option>
            <!-- populates the drop down with names -->
            <?php foreach ($cons as $constituency): ?>
            <option value="<?php htmlout($constituency['ids']); ?>">
            <?php htmlout($constituency['names']); ?>
            </option>
            <?php endforeach; ?>
            <?php if (isset($selectError)): ?>
            <p><?php htmlout($selectError); ?></p>
            <?php endif; ?>
            </select>
            </li>

            <li><input type="hidden" name="action" value="search"></li>

    <!-- then below is what you need to modify, add "onchange" and disabled -->

        <li><input type="submit" value="SEARCH" class="button search" id="jsbutton" onchange="submitDisOrUndisabled();" disabled></li>

    <!-- and add function below -->
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script type="text/javascript">
        function submitDisOrUndisabled()
        {
            if($('#names').val() != 0) {
                $('#jsbutton').prop('disabled', false);
            }else{$('#jsbutton').prop('disabled', true);}

        }
 </script>   
    <!-- I've tried it and it works very well --> 
```

# tsql - T-SQL 解析选择语句中的文本

> ID：12637774
> 
> 赞同：2
> 
> 时间：2012-09-28T09:58:26.393
> 
> 标签：tsql, sql-server-2005, select, stored-procedures

我目前正在开展一个将数据从一个表导入到另一个表的项目。我正在尝试将包含 FULLNAME 的字段解析为其 LAST、FIRST、MI 部分。这些名称都采用“LAST,FIRST MI”的格式我已经编写了一个存储过程，它可以正确解析并根据需要返回结果，但我不确定如何将存储过程合并到单个 select 语句中。例如，当前我有：

```
SELECT FULLNAME From UserInfo 
```

我想要的是这样的：

```
SELECT Last, First, MI from UserInfo 
```

目前我的存储过程采用 ParseName(FULLNAME, Last as OUTPUT, First as OUTPUT, MI as OUTPUT) 的形式。如何调用此过程并将输出变量分成 3 个不同的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T12:11:21.677

[用表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)替换您的存储过程。然后，您可以将此函数应用于所有行。

下面是一个示例 - 只需输入您解析名称的逻辑

```
create FUNCTION dbo.f_parseName(@inFullName varchar(255))
RETURNS 
    @tbl TABLE (lastName varchar(255), firstName varchar(255), middleName varchar(255))
as
BEGIN
-- put your logic here
insert into @tbl(lastName,firstName,middleName)
select substring(@inFullName,0,10),substring(@inFullName,11,10), substring(@inFullName,21,10)

return

end 
```

应用函数

```
-- sample data
declare @fullNames table (fullName varchar(255))
insert into @fullNames (fullName) values
('111111111122222222223333333333')
,('AAAAAAAAAABBBBBBBBBBCCCCCCCCCC')

select 
    fn.fullName
    ,pn.lastName
    ,pn.firstName
    ,pn.middleName
from 
    @fullNames fn
    cross apply dbo.f_parseName(fn.fullName) pn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:28:14.997

您可以将存储过程的结果放在（临时）表中，如下所示（我添加了`FULLNAME`列以提供连接条件，您必须调整存储过程才能做到这一点）：

```
CREATE TABLE #temp (
  FULLNAME NVARCHAR(..)
  ,Last NVARCHAR(..)
  ,First NVARCHAR(..)
  ,MI NVARCHAR(..)
);

INSERT INTO #temp (Last, First, MI)
EXECUTE MySproc; 
```

如果您希望能够在`SELECT Last, First, MI from UserInfo`结构上执行，您必须首先向 UserInfo 添加三列作为您的名称信息，然后插入您从存储过程中获得的解析数据。

**编辑**

您提到您使用 a`SELECT ... INTO ...`将数据放入新表中。我猜新表没有该`FULLNAME`列，然后最好使用表值函数（如[this answer](https://stackoverflow.com/a/12639787/249353)所示）。但是，如果您保留该`FULLNAME`列，则可以使用它将临时表与新表连接以更新新表，如下所示：

```
UPDATE NUI
  SET NUI.Last = T.Last, NUI.First = T.First, NUI.MI = T.MI
  FROM NewUserInfo AS NUI
  INNER JOIN #temp AS T ON NUI.FULLNAME = T.FULLNAME; 
```

`UPDATE`如果您的新表中没有该列，您也可以将此方法与另一个连接条件一起使用`FULLNAME`，但请确保事先运行良好的测试以检查连接是否成立。

希望这有帮助，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:59:08.470

您可以像这样将计算列添加到表中：

```
alter table UserInfo
    add firstName as SUBSTRING(fullName, CHARINDEX(',',fullName,0)+2, LEN(fullName)-CHARINDEX(',',fullName,0)-CHARINDEX(' ', REVERSE(fullName),0)-1)
        ,lastName as SUBSTRING(fullName, 0, CHARINDEX(',',fullName,0))
        ,middleInitital as REVERSE(SUBSTRING(REVERSE(fullName),0,CHARINDEX(' ', REVERSE(fullName),0))) 
```

但最好的解决方案是反其道而行之。用真实列对数据进行规范化`firstName`，`lastName`并对`middleInitial`进行计算列`fullName`。

上面代码中的表达式可能需要更多的工作，因为我确信它们可以更有效地编写。我只是让他们工作来展示这个想法。

创建计算列后，您可以这样做：

```
select  firstName
        ,lastName
        ,middleInitital
from UserInfo 
```

# c++ - 如何将 const WCHAR * 转换为 const char *

> ID：12637779
> 
> 赞同：20
> 
> 时间：2012-09-28T09:58:37.307
> 
> 标签：c++

```
CString output ;
const WCHAR* wc = L"Hellow World" ;
if( wc != NULL )
{   
     output.Append(wc);
}
printf( "output: %s\n",output.GetBuffer(0) ); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-28T10:10:16.567

你也可以试试这个：

```
#include <comdef.h>  // you will need this
const WCHAR* wc = L"Hello World" ;
_bstr_t b(wc);
const char* c = b;
printf("Output: %s\n", c); 
```

`_bstr_t`实现以下转换运算符，我觉得这很方便：

```
operator const wchar_t*( ) const throw( ); 
operator wchar_t*( ) const throw( ); 
operator const char*( ) const; 
operator char*( ) const; 
```

编辑：关于回答评论的澄清：行`const char* c = b;`导致由`_bstr_t`实例创建和管理的字符串的窄字符副本，当它被销毁时将释放它一次。运算符只返回一个指向该副本的指针。因此，无需复制此字符串。此外，在问题中，`CString::GetBuffer`返回`LPTSTR`(ie `TCHAR*`) 而**不是** `LPCTSTR`(ie `const TCHAR*`)。

另一种选择是使用转换宏：

```
USES_CONVERSION;
const WCHAR* wc = L"Hello World" ;
const char* c = W2A(wc); 
```

这种方法的问题是转换后的字符串的内存是在堆栈上分配的，因此字符串的长度是有限的。但是，这一系列转换宏允许您选择要用于转换的代码页，如果宽字符串包含非 ANSI 字符，则通常需要此代码页。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-04T11:49:07.590

您可以`sprintf`为此目的使用：

```
const char output[256];
const WCHAR* wc = L"Hellow World" ;
sprintf(output, "%ws", wc ); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-05T18:48:21.303

我的 Linux 代码

```
// Debian GNU/Linux 8 "Jessie" (amd64)

#include <locale.h>
#include <stdlib.h>
#include <stdio.h>

// Use wcstombs(3) to convert Unicode-string (wchar_t *) to UTF-8 (char *)
// http://man7.org/linux/man-pages/man3/wcstombs.3.html

int f(const wchar_t *wcs) {
        setlocale(LC_ALL,"ru_RU.UTF-8");
        printf("Sizeof wchar_t: %d\n", sizeof(wchar_t));
        // on Windows, UTF-16 is internal Unicode encoding (UCS2 before WinXP)
        // on Linux, UCS4 is internal Unicode encoding
        for (int i = 0; wcs[i] > 0; i++) printf("%2d %08X\n",i,wcs[i]);
        char s[256];
        size_t len = wcstombs(s,wcs,sizeof(s));
        if (len > 0) {
                s[len] = '\0';
                printf("mbs: %s\n",s);
                for (int i = 0; i < len; i++)
                        printf("%2d %02X\n",i,(unsigned char)s[i]);
                printf("Size of mbs, in bytes: %d\n",len);
                return 0;
        }
        else return -1;
}

int main() {
        f(L"Привет"); // 6 symbols
        return 0;
} 
```

如何建造

```
#!/bin/sh
NAME=`basename $0 .sh`
CC=/usr/bin/g++-4.9
INCS="-I."
LIBS="-L."
$CC ${NAME}.c -o _${NAME} $INCS $LIBS 
```

输出

```
$ ./_test 
Sizeof wchar_t: 4
 0 0000041F
 1 00000440
 2 00000438
 3 00000432
 4 00000435
 5 00000442
mbs: Привет
 0 D0
 1 9F
 2 D1
 3 80
 4 D0
 5 B8
 6 D0
 7 B2
 8 D0
 9 B5
10 D1
11 82
Size of mbs, in bytes: 12 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T10:00:42.023

你可以这样做，或者你可以做一些更清洁的事情：

```
std::wcout << L"output: " << output.GetString() << std::endl; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T10:13:11.893

这很简单，因为`CString`它只是一个 typedef `CStringT`，并且您还可以访问`CStringA`and `CStringW`（您应该阅读有关差异的文档）。

```
CStringW myString = L"Hello World";
CString myConvertedString = myString; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-03T07:12:46.460

正如@l0pan 提到的那样，您可以将`sprintf`其用于此目的（但我使用`%ls`的是`%ws`）：

```
char output[256];
const WCHAR* wc = L"Hello World" ;
sprintf(output, "%ws", wc ); // did not work for me (Windows, C++ Builder)
sprintf(output, "%ls", wc ); // works 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-30T16:10:27.440

您可以使用该`std::wcsrtombs`功能。

这是用于转换的**C++17**重载集：

```
#include <iostream> // not required for the conversion function

// required for conversion
#include <cuchar>
#include <cwchar>
#include <stdexcept>
#include <string>
#include <string_view> // for std::wstring_view overload

std::string to_string(wchar_t const* wcstr){
    auto s = std::mbstate_t();
    auto const target_char_count = std::wcsrtombs(nullptr, &wcstr, 0, &s);
    if(target_char_count == static_cast<std::size_t>(-1)){
        throw std::logic_error("Illegal byte sequence");
    }

    // +1 because std::string adds a null terminator which isn't part of size
    auto str = std::string(target_char_count, '\0');
    std::wcsrtombs(str.data(), &wcstr, str.size() + 1, &s);
    return str;
}

std::string to_string(std::wstring const& wstr){
    return to_string(wstr.c_str());
}

std::string to_string(std::wstring_view const& view){
    // wstring because wstring_view is not required to be null-terminated!
    return to_string(std::wstring(view));
}

int main(){
    using namespace std::literals;

    std::cout
        << to_string(L"wchar_t const*") << "\n"
        << to_string(L"std::wstring"s) << "\n"
        << to_string(L"std::wstring_view"sv) << "\n";
} 
```

**如果你使用 Pre-C++17，你应该紧急更新你的编译器！;-)**

如果这真的不可能，这里有一个 C++11 版本：

```
#include <iostream> // not required for the conversion function

// required for conversion
#include <cwchar>
#include <stdexcept>
#include <string>

std::string to_string(wchar_t const* wcstr){
    auto s = std::mbstate_t();
    auto const target_char_count = std::wcsrtombs(nullptr, &wcstr, 0, &s);
    if(target_char_count == static_cast<std::size_t>(-1)){
        throw std::logic_error("Illegal byte sequence");
    }

    // +1 because std::string adds a null terminator which isn't part of size
    auto str = std::string(target_char_count, '\0');
    std::wcsrtombs(const_cast<char*>(str.data()), &wcstr, str.size() + 1, &s);
    return str;
}

std::string to_string(std::wstring const& wstr){
    return to_string(wstr.c_str());
}

int main(){
    std::cout
        << to_string(L"wchar_t const*") << "\n"
        << to_string(std::wstring(L"std::wstring")) << "\n";
} 
```

# .htaccess - Plesk 忽略 .htaccess 文件

> ID：12637780
> 
> 赞同：1
> 
> 时间：2012-09-28T09:58:38.810
> 
> 标签：.htaccess, iis, url-rewriting, plesk

我对 URL 重写非常陌生，我正在使用 Plesk，它是**基于 Windows 的**Web 服务器，因此我不能使用 Apache 的 mod_Rewrite.. 谁能告诉我发生这种情况的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:25:04.137

尝试IIS 的[ISAPI 重写](http://www.helicontech.com/isapi_rewrite/)。它支持 Apache 的 mod_rewrite 规则，并且被 Plesk 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-18T16:36:36.663

对于 OP 来说可能为时已晚，但它可能对遇到此问题的任何人都有用。如果在 IIS 中安装了[URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)，那么您可以按照[本指南](http://www.iis.net/learn/application-frameworks/install-and-configure-php-applications-on-iis/translate-htaccess-content-to-iis-webconfig)将 htaccess 转换为 web.config。

它适用于我的案例，在 ISAPI 下与 Plesk 和 IIS 的共享主机中运行 PHP 网站

# sql - SQL 超出最大允许错误

> ID：12637782
> 
> 赞同：1
> 
> 时间：2012-09-28T09:58:42.073
> 
> 标签：sql, sql-server-2008

嗨，我正在数据管理器中提取数据，这些数据是通过 Salesforce 提供的，因此数据类型和限制是在 Salesforce 中设置的，我无法控制。我想知道如何限制传入和插入 MS SQL 的数据量。这是错误：

```
[42000]Microsoft SQL Server Native Client 10.0
The size (32000) given to the column 'Description' exceeds the maximum allowed for any data type (8000). 
```

这是我提取数据的查询：

```
SELECT  "Id",
"IsDeleted",
"Name",
"ParentId",
"Type",
"Status",
"StartDate",
"EndDate",
"CurrencyIsoCode",
"ExpectedRevenue",
"BudgetedCost",
"ActualCost",
"Description",
"ExpectedResponse",
"NumberSent",
"IsActive",
"NumberOfLeads",
"NumberOfConvertedLeads",
"NumberOfContacts",
"NumberOfResponses",
"NumberOfOpportunities",
"NumberOfWonOpportunities",
"AmountAllOpportunities",
"AmountWonOpportunities",
"OwnerId",
"CreatedDate",
"CreatedById",
"LastModifiedDate",
"LastModifiedById",
"SystemModstamp",
"LastActivityDate",
"CampaignMemberRecordTypeId",
"Date_of_Event__c",
"Venue__c"
FROM   "SF Schema"."Campaign" 
```

无论如何要对“描述”设置限制，最大值为 8000。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:27:28.180

您可以使用 LEFT() 获取前 8000 个字符

```
SELECT LEFT(Description,8000) AS Description FROM YourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:39:20.657

这个错误什么时候发生？

您的错误不是来自您的数据，而是来自“SF Schema”.“Campaign”表的 DDL。

该表怎么可能有一个大小为 32000 的列？它是在哪里定义的？

这个小示例代码显示了如何重现您的错误消息。

```
DECLARE @table TABLE
(
    dummy nvarchar(32000)
) 
```

这会产生以下输出：

消息 131，级别 15，状态 2，第 3 行 给列“虚拟”的大小 (32000) 超过了任何数据类型允许的最大值 (8000)。

也许 LEFT，如另一个答案中所述，可以帮助您，但我想您会遇到相同的错误，因为问题出在源表的定义中。

MSDN 上的左侧：http: [//msdn.microsoft.com/es-es/library/ms177601.aspx](http://msdn.microsoft.com/es-es/library/ms177601.aspx)

# javascript - PhoneGap：变量范围

> ID：12637783
> 
> 赞同：0
> 
> 时间：2012-09-28T09:58:47.847
> 
> 标签：javascript, cordova

我正在尝试编写一个返回表示设备位置的对象的函数：我尝试过：

```
 function getDevicePosition () {
    var positionObject;
    if (isDeviceReady) {
        navigator.geolocation.getCurrentPosition(function (position) {

            positionObject = position;
            console.log('location updated');
            console.log(positionObject.coords.longitude);//1\. works
        }, function (err) {
            console.log('Failed to get device position' + err);
            return null;
        });

    } else {
        warnUser();
        return null;
    }
    console.log(positionObject.coords.longitude);//2\. doesnt work as positionObject is null.
    return positionObject;
} 
```

请注意，我添加了标记语句 1 和语句 2 的注释。如果我在语句 1 中初始化位置对象。为什么它在语句 2 中未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:01:55.347

因为[`getCurrentPosition`](https://developer.mozilla.org/en-US/docs/Using_geolocation#Getting_the_current_position)是*异步*方法。标记为的`2`行将在回调函数有机会执行之前运行，所以`positionObject`仍然是`undefined`.

您需要将所有依赖于`positionObject`回调内部的代码移动到`getCurrentPosition`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:03:13.503

The call to `navigator.geolocation.getCurrentPosition()` is asynchronous, so the execution of the rest of the function does not wait until it is finished.

So your function is at execution basically reduced to this:

```
function getDevicePosition () {
    var positionObject;
    if (isDeviceReady) {
        // trigger some asynch function ...
    } else {
        warnUser();
        return null;
    }
    console.log(positionObject.coords.longitude);
    return positionObject;
} 
```

From this code it should be pretty obvious, that at the point, your code reaches the `console.log()` your positionObject is not set, thus resulting in the error.

**EDIT**

With respect to your comment. The general design principle for such tasks is as follows:

```
// original function (triggered by a button or whatever)
function trigger() {
  // do some calculations before

  // trigger the position-retrival
  navigator.geolocation.getCurrentPosition(function (position) {
    // get the position
    // ...

    // call the handling function
    doStuff( position );
  });
}

// the function to do stuff based on the position
function doStuff( position ) {
// ...
} 
```

# asp.net - 隐藏作为 html 文件传递 到 stringbuilder 类型对象的页面中的一行

> ID：12637784
> 
> 赞同：0
> 
> 时间：2012-09-28T09:58:49.093
> 
> 标签：asp.net, html

我有一个用于预览功能的 html 页面。我将它作为 html 传递给 stringbuilder 类型对象并通过另一个页面替换内容。现在我希望在特定情况下隐藏某个部分。目前该部分是一行。那么我该怎么做呢？

我要隐藏的部分中的以下代码：

```
<tr id="rowcontent" bgcolor="E96F00">
<td style="font-family: Arial; font-size: 14px; font-weight: Bold; color:white;">Course Content Link</td>
</tr>
<tr>
<td style="font-family: calibri; font-size: 14px;">@CourseContent@<BR>&nbsp;</td>
</tr> 
```

这就是我使用上述 html 的方式：

```
file = Server.MapPath(".") + "\\Template\\Level100_Template.htm";
string input = string.Empty;
if (File.Exists(file))
{
sr = File.OpenText(file);
//input += Server.HtmlEncode(sr.ReadToEnd());
input += sr.ReadToEnd();
x.Append(input);
sr.Close();
} 
```

这就是我替换内容部分的方式：

```
if (dt.Rows[0]["CourseContentPath"].ToString() != string.Empty)
    {x.Replace   ("@CourseContent@", "<A href='" +CourseContentLink   + "' target=_blank onclick='window.open(this.href,           this.target,'height=1000px,width=1000px'); return false>Click here</A> to find the course content");
    } 
```

在特定情况下如何隐藏整个部分..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T11:15:59.317

最简单的方法是使用此代码

```
string StartStr= "<tr id=\"rowcontent\"", EndStr= "</tr>", String= x.ToString();
int Start= String.IndexOf(StartStr);
int End= String.IndexOf(EndStr, String.IndexOf(EndStr, Start)+ EndStr.Length);
x.Remove(Start,End- Start+ EndStr.Length); 
```

# android - Facebook SSO 无法在 Android 中运行

> ID：12637785
> 
> 赞同：1
> 
> 时间：2012-09-28T09:58:51.137
> 
> 标签：android, facebook, single-sign-on

我在我的应用程序中使用以下代码通过 Facebook 登录。我需要使用 Facebook SSO 执行此操作。我有正确的 app_id。

```
package com.fb.sso;

import java.io.FileNotFoundException;
import java.io.IOException;
import java.net.MalformedURLException;

import com.facebook.android.AsyncFacebookRunner;
import com.facebook.android.AsyncFacebookRunner.RequestListener;
import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

public class FBSSOActivity extends Activity {
    /** Called when the activity is first created. */

    public static final String APP_ID = "my_app_id";

    private static final String[] PERMISSIONS = new String[] {
            "publish_stream", "read_stream", "offline_access" };
    private TextView mText;
    private Handler mHandler = new Handler();

    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;
    byte[] raw;
    private SharedPreferences mPrefs;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (APP_ID == null) {
            Util.showAlert(this, "Warning",
                    "Facebook Applicaton ID must be set...");
        }

        // Initialize the content view
        setContentView(R.layout.main);

        // Initialize the Facebook session
        mFacebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);

        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if (access_token != null) {
            mFacebook.setAccessToken(access_token);
        }
        if (expires != 0) {
            mFacebook.setAccessExpires(expires);
        }

    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Log.d("FB Sample App", "onActivityResult(): " + requestCode);
        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    private class LogoutRequestListener implements RequestListener {

        @Override
        public void onComplete(String response, Object state) {
            // TODO Auto-generated method stub

Log.v("comes here>>.","sucess");
            // Only the original owner thread can touch its views
            FBSSOActivity.this.runOnUiThread(new Runnable() {
                public void run() {
                    mText.setText("Thanks for using FB Sample App. Bye bye...");

                }
            });

            // Dispatch on its own thread
            mHandler.post(new Runnable() {
                public void run() {
                }
            });

        }

        @Override
        public void onIOException(IOException e, Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onMalformedURLException(MalformedURLException e,
                Object state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFacebookError(FacebookError e, Object state) {
            // TODO Auto-generated method stub
            Log.v("facebook error","fb error");
        }
            }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main_menu, menu);
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {

        MenuItem loginItem = menu.findItem(R.id.login);

        if (mFacebook.isSessionValid()) {
            loginItem.setTitle("Logout");

        } else {
            loginItem.setTitle("Login");

        }
        loginItem.setEnabled(true);
        return super.onPrepareOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        // Login/logout toggle
        case R.id.login:

            if (!mFacebook.isSessionValid()) {

                mFacebook.authorize(this, new DialogListener() {

                    @Override
                    public void onComplete(Bundle values) {
                        // TODO Auto-generated method stub

                        Log.v("Entered ", "No ERRRRRRRRRRRR");
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                mFacebook.getAccessToken());
                        editor.putLong("access_expires",
                                mFacebook.getAccessExpires());
                        editor.commit();
                        Intent i=new Intent(FBSSOActivity.this,second.class);
                        startActivity(i);

                    }

                    @Override
                    public void onFacebookError(FacebookError e) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onError(DialogError e) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onCancel() {
                        // TODO Auto-generated method stub

                    }

                });
            }else{

                mFacebook.setAccessToken(null);
                mFacebook.setAccessExpires(0);

                AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(mFacebook);
                 asyncRunner.logout(this.getBaseContext(), new  LogoutRequestListener());
            }

            break;

        default:
            return false;

        }
        return true;
    }

    } 
```

我在我的设备中登录了预装的 Facebook 应用程序。我只有这个屏幕。 ![在此处输入图像描述](../Images/23197732d5ea0151d019201bb8e80eed.png)

在我的 Logcat 中出现了这一行。

```
09-28 15:18:24.652: E/ActivityThread(1201): Failed to find provider info for com.facebook.katana.provider.AttributionIdProvider 
```

如果我从预装的 Facebook 应用程序中注销，我的应用程序会提示我登录并询问凭据。那个时候也出现了空白屏幕。但是在预装的 Facebook 应用程序中，我可以看到我的更新。（我登录了）。

更新：

现在我只检查应用程序。我还没有将它发布到市场上。我通过参考这个网站[http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)得到了钥匙。我将它添加到应用程序中，就像这样。 ![在此处输入图像描述](../Images/fefdcb26b382ad3c85d3bb2ba22a1cd3.png)

更新 2：现在我在 logcat 中得到了这些行：

```
09-29 12:00:12.552: I/ActivityManager(73): Starting activity: Intent { cmp=com.facebook.katana/.ProxyAuth (has extras) }
09-29 12:00:13.022: I/ActivityManager(73): Displayed activity com.facebook.katana/.ProxyAuth: 436 ms (total 436 ms)
09-29 12:00:15.032: W/InputManagerService(73): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@434b2e88 (uid=10031 pid=2233)
09-29 12:00:15.032: W/IInputConnectionWrapper(2233): showStatusIcon on inactive InputConnection 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-21T11:45:35.060

这可能是由于以下原因造成的：

1.  您没有连接到互联网
2.  您没有授予 Internet 访问权限 (Manifest.xml)
3.  您没有为应用程序使用正确的哈希键
4.  您没有提供正确的 App Id

# eclipse - 对象的 Eclipse 断点条件

> ID：12637786
> 
> 赞同：2
> 
> 时间：2012-09-28T09:58:55.107
> 
> 标签：eclipse, breakpoints

我对 eclipse 断点条件模式有疑问。关于这个代码片段

```
public void updateGateway(Gateway pGatewy) {
  mGateway = pGateway; 
```

我只想在以下情况下停止该过程

```
pGateway.getNumber()==123. 
```

但是条件无效，我用这个数字测试它已经成功（但没有条件）。

我必须在断点属性对话框的编辑器中插入什么？复选框 Conditional 被选中。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:26:36.583

**更新您的状况**

> ```
> pGateway.getNumber()==123. 
> ```

到

> `pGateway.getNumber()==123`

选择**真时暂停**选项。

条件调试可以在我的机器上运行。你可以参考[这里](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/breakpoints/ref-condition_option.htm)。 ![在此处输入图像描述](../Images/df0cba9019972cf98b68d77314adf779.png)

# iphone - 如何在目标 C 中设置时间

> ID：12637788
> 
> 赞同：0
> 
> 时间：2012-09-28T09:59:01.433
> 
> 标签：iphone, objective-c

我想以这种格式设置时间。

“2012-09-27 12:03:33+05:30”

请告诉我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:03:26.480

Take a look at [NSDateFormatter](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html). Below there is a sample..

```
NSString *dateString=...your_Date_String_Here..   
 NSDateFormatter* fmt = [NSDateFormatter new];
    [fmt setTimeZone:[NSTimeZone defaultTimeZone]]; 
    [fmt setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSDate* dateFromString = [fmt dateFromString:dateString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:09:08.930

检查[NSDateFormatter](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)文档。要准确获得您正在寻找的输出，您应该这样做：

```
NSDate *date = [NSDate date];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ssZZZZZ"];
NSLog(@"%@", [dateFormatter stringFromDate:date]); 
```

# java - 当我引用一些 jre 库时，如何使用 ant 构建 android 项目

> ID：12637793
> 
> 赞同：0
> 
> 时间：2012-09-28T09:59:16.417
> 
> 标签：java, android, eclipse, ant

我使用 eclipse 开发我的 android 应用程序，并在项目中使用了 JRE 系统库。我可以使用 Eclipse 构建项目。但我无法使用 ant 构建它。它在 JRE 系统库中找不到类。如何将 JRE 系统库添加到 ant 构建路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:58:02.477

Eclipse 不会创建从命令行运行项目所需的所有文件。我是否可以建议[http://www.vogella.com/articles/AndroidBuildAnt/article.html](http://www.vogella.com/articles/AndroidBuildAnt/article.html)作为参考，指导您完成正确配置 Ant 并从命令行使用它的步骤。

# excel - Excel 中的表格转换

> ID：12637799
> 
> 赞同：0
> 
> 时间：2012-09-28T09:59:43.943
> 
> 标签：excel

我有一个包含以下格式数据的电子表格：

```
 CarID   Day   DistanceTraveled
   Ford1     1                 10
   Ford1     2                 12
   Nissan1   1                 13
   Ford1     3                 41
   Nissan1   2                 20
   Nissan1   3                 10
... 
```

等等。这种格式的记录有几百条，有几十辆汽车。

我必须将其转换为以下格式：

```
Day   Ford1  Nissan1
  1      10       13 
  2      12       20
  3      41       10 
```

在Excel中实现它有什么快速和自动的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-01T15:21:28.460

只是为了一个答案：

![SO12637799 示例](../Images/24cac80a462214fa30845bc0368334d4.png)

# java - 为什么我通过 hector 将 double/float 列插入 Cassandra 并得到不正确的值 int 数据库

> ID：12637800
> 
> 赞同：1
> 
> 时间：2012-09-28T09:59:48.337
> 
> 标签：java, floating-point, cassandra, hector

我有一些关于 Hector 将双精度/浮点数据插入 Cassandra 的问题

```
new Double("13.45")------->13.468259733915328
new Float("64.13") ------->119.87449 
```

当我通过 hector 将数据插入 Cassandra 时

```
TestDouble ch = new TestDouble("talend_bj",
        "localhost:9160");
String family = "talend_1";
ch.ensureColumnFamily(family);
List values = new ArrayList();
values.add(HFactory.createColumn("id", 2, StringSerializer.get(),
        IntegerSerializer.get()));
values.add(HFactory.createColumn("name", "zhang",
        StringSerializer.get(), StringSerializer.get()));
values.add(HFactory.createColumn("salary", 13.45,
        StringSerializer.get(), DoubleSerializer.get()));
ch.insertSuper("14", values, "user1", family, StringSerializer.get(),
        StringSerializer.get());
StringSerializer se = StringSerializer.get();
MultigetSuperSliceQuery<String, String, String, String> q = me.prettyprint.hector.api.factory.HFactory
        .createMultigetSuperSliceQuery(ch.getKeyspace(), se, se, se, se);
// q.setSuperColumn("user1").setColumnNames("id","name")
q.setKeys("12", "11","13", "14");
q.setColumnFamily(family);
q.setRange("z", "z", false, 100);
QueryResult<SuperRows<String, String, String, String>> r = q
        .setColumnNames("user1", "user").execute();
Iterator iter = r.get().iterator();
while (iter.hasNext()) {
    SuperRow superRow = (SuperRow) iter.next();
    SuperSlice s = superRow.getSuperSlice();
    List<HSuperColumn> superColumns = s.getSuperColumns();
    for (HSuperColumn superColumn : superColumns) {
        List<HColumn> columns = superColumn.getColumns();
        System.out.println(DoubleSerializer.get().fromBytes(((String) superColumn.getSubColumnByName("salary").getValue()).getBytes()));
    }
} 
```

您可以看到 13.45 但我得到的列值为 13.468259733915328

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:20:38.827

你应该把问题一分为二。编写后，如果您定义了部分架构或在命令行 cli 上使用 te ASSUME 关键字，请查看 cassandra 中的数据以查看是否正确。PlayOrm 有这个 EXACT 单元测试（它是在 astyanax 而不是 hector 之上的 PlayOrm 上），它工作得很好......请注意 -200.23 测试中的比较......

[https://github.com/deanhiller/playorm/blob/master/input/javasrc/com/alvazan/test/TestColumnSlice.java](https://github.com/deanhiller/playorm/blob/master/input/javasrc/com/alvazan/test/TestColumnSlice.java)

一旦关闭，您在 cassandra 中的数据看起来是否正确？如果是这样，那么问题在于您读取代码中的值，否则，就是写入。

# iphone - MKAnnotations 和核心数据的优化

> ID：12637803
> 
> 赞同：0
> 
> 时间：2012-09-28T09:59:55.853
> 
> 标签：iphone, ios, core-data, optimization, mapkit

我有一些位置（在本例中为 >3000）与 Core Data 一起存储。打开地图后，我会获取位置并将它们存储在一个数组中。每次更改地图视图区域时，我都会调用一个函数，该函数将计算哪些注释在当前可见，`visibleMaprect`并按像素距离过滤它们。（我知道会有更复杂的优化，比如四叉树，但如果不是非常必要的话，我现在不会真正实现它）。这是我的代码：

```
//locations is an array of NSManagedObjects     
for (int i =0 ; i < [locations count]; i++)
        {
            // managed object class for faster access, valueforkey takes ages ...
            LocationEntity * thisLocation = [locations objectAtIndex:i];
            CLLocationCoordinate2D coord  = CLLocationCoordinate2DMake( [thisLocation.latitude doubleValue],  [thisLocation.longitude doubleValue]) ;
            // mapRect is mapView.visibleMapRect
            BOOL isOnScreen = MKMapRectContainsPoint(mapRect, MKMapPointForCoordinate(coord));      
            if (isOnScreen)
            {
                CGPoint cgp =  [mapView convertCoordinate:coord toPointToView:mapView];
                // compare the distance to already existing annotations
                for (int idx = 0; idx < [annotations count] && hasEnoughDistance; idx++)    
                {        
                    CGPoint cgp_prev = [mapView convertCoordinate:[[annotations objectAtIndex:idx] coordinate] toPointToView:mapView];
                    if ( getDist(cgp, cgp_prev) < dist )    hasEnoughDistance = FALSE;
                }
            }
            if (hasEnoughDistance)
                // if it's ok, create  the  annotation, add to an array and after the for add all to the map
        } 
```

每次缩放/移动后，地图都会冻结几秒钟。我检查了时间分析器，坐标的简单获取有时需要整整 1 秒，有时只需 0.1，即使坐标是我模型中的索引属性......而且这些类型的线条似乎需要很长时间： `CGPoint cgp = [mapView convertCoordinate:coord toPointToView:mapView];`

有什么建议如何在不通过此函数的情况下计算两个注释/坐标之间的像素/点距离？或者对 Core Data 有什么优化建议？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:02:31.480

好的，我有点错过了你的解释中没有让它们太近的地方。坐标之间的转换很慢。您可以缓解它的方法是将坐标预先计算为地图点`MKMapPointForCoordinate`并永久存储它们 - 它们仅取决于坐标。然后您可以快速计算两个注释的地图点之间的距离，根据您当前的地图缩放级别对其进行缩放，这将与屏幕上的实际距离密切相关。它应该足够准确，并且会更快。

我建议计算平方距离并将其与 squared 进行比较`dist`。您将在`sqrt()`.

如果您仍然对`getDist()`(或`getSqDist()`) 感到困惑，您可以选择 kd 树或使用 Accelerate Framework 进行计算。当我需要计算许多点之间的距离并且加速非常好时，我已经完成了后者。但这个细节是另一杯茶。如果您需要任何帮助，请告诉我。

仅当您实际按坐标搜索注释时，您的坐标被索引的事实才会有所帮助，因此如果您只查看所有这些注释将无济于事。

处理来自 CoreData 的长加载时间的一种方法是尝试使您的注释尽可能轻量级，因此只存储坐标和地图点。然后，您可以根据需要获取其余的注释数据。这可以通过代理模式来完成。

还有一件事。快速枚举可能更快，也是更好的做法，所以

```
for(LocationEntity* thisLocation in locations) 
```

代替

```
for (int i =0 ; i < [locations count]; i++) 
```

# oracleclient - Oracle 客户端和 Instant 客户端的区别

> ID：12637805
> 
> 赞同：4
> 
> 时间：2012-09-28T10:00:02.407
> 
> 标签：oracleclient, instantclient

Instant 客户端和 Oracle 客户端有什么区别？

# html - Wordpress CSS 侧边栏代码问题

> ID：12637809
> 
> 赞同：1
> 
> 时间：2012-09-28T10:00:10.480
> 
> 标签：html, css, wordpress

这是问题所在。如果你看下面的屏幕截图。“来自 tekgoblin 的实时游戏”的边框正在渗入边框上方的广告代码。我不知道为什么，因为它只发生在那部分。我已经尝试并尝试解决此问题，并正在寻找其他人的意见。在 IE 中看起来不错，但在 FFox 或 Chrome 中看起来不错。

[http://www.tekgoblin.com/wp-content/uploads/Screen-Shot-2012-09-28-at-2.59.18-AM.png](http://www.tekgoblin.com/wp-content/uploads/Screen-Shot-2012-09-28-at-2.59.18-AM.png)

你可以看看 www.tekgoblin.com，你会看到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:13:36.957

如果没有进一步研究，我不确定，但您的广告没有高度，只要它始终保持相同的高度，您可以设置以下来解决问题。如果您无权访问 CSS，则只需将其放在本地 CSS 中进行覆盖，如果这不起作用，则分配`!important;`给高度以覆盖外部导入的 CSS，从而为您创建问题。

```
div.bsap_1250066 {
    display: block;
    height: 245px;
    width: 100%;
} 
```

或者您可以为您的 定义一个固定高度`h4`，实现相同但没有静态广告高度。这实际上取决于这如何影响您的全球站点，您可以使用许多修复程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:17:49.077

删除到您的 CSS 中的一个属性，如下所示：

```
div.bsap_1250066 a {
    float:left; // remove this line 
} 
```

因为你已经定义了`display:block;`。

# visual-studio-2010 - 如何引用不在同一根目录中的项目

> ID：12637815
> 
> 赞同：0
> 
> 时间：2012-09-28T10:00:34.617
> 
> 标签：visual-studio-2010, version-control, shared-libraries, perforce, projects-and-solutions

像大多数人一样，我们使用第三方库。许多有我们保留在我们的 VCS 中的源代码。

目前，如果这些库被更新，我们需要手动拉取源代码并重建二进制文件。

我正在尝试找到一种方法来从使用它们的各种解决方案中引用它们，以便在您拉取依赖项目时自动从源代码管理中提取它们，并在它们过时时自动构建它们。能够使用提供的源调试它们也很好。

我遇到的第一个问题是库与依赖项目不在同一个解决方案根目录中。例如。

```
\Libraries
 \External
  \Lib1
   Lib1.sln
\Products
 \Product1
  Product1.sln 
```

尝试添加`Lib1.csproj`到我的`Product1`解决方案会给我警告：

> 您尝试添加到源代码管理的项目可能会导致其他源代码管理用户难以打开此解决方案或获取其更新版本。要避免此问题，请从解决方案中其他源代码控制项目的绑定根 (C:\depot\Products\Products1) 下方的位置添加项目。

如果我忽略这一点，那么我可以正确设置构建依赖项，但它仍然不允许一次性拉出整个源代码树。

我想知道其他人如何设置第三方库，尤其是在有源代码的情况下。（我们正在使用 Perforce，但我想这个问题与任何 VCS 相关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:13:58.450

解决这个问题的一种方法是将所有将要重用的模块/ 3rdparty 软件放到一个单独的位置（仓库），例如“//shared”或类似的。

产品（SCMS / perforce 中的树）可以通过将所需模块映射到工作区来“链接”它们。实际上，您可以通过客户端视图来做到这一点。如果您有很多人在开发多种产品，您将需要一种简单的机制来正确地为产品设置个人工作区（无需开发人员手动设置其客户端视图）。实现这一目标的一种可能性是一个小的自写工具/脚本，它设置工作空间并根据位于产品根目录中的模板准备个人客户端视图，该模板定义“//shared”库中的哪些模块需要映射到客户端工作区中的哪个位置。

多年来，我们一直在使用这种做法，而且效果很好。危险在于客户端视图会变得非常复杂。

# java - java方法泛型实现接口

> ID：12637819
> 
> 赞同：4
> 
> 时间：2012-09-28T10:00:41.523
> 
> 标签：java, generics

这段代码有什么问题？

```
public interface FileProccessor {
    public <RT> RT setHeader(RT header);
}

public class AProcessor implements FileProccessor {

    @Override
    public Header setHeader(Header header) {
        return null;
    }
} 
```

编译器抱怨：*AProcessor 类型的方法 setHeader(Header) 必须重写或实现超类型方法*

**编辑：** 谢谢。我很困惑，因为我想要多种不同类型的方法。现在我意识到可以在类级别添加任意数量的参数化类型。喜欢`FileProcessor<T, F, M>`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T10:05:45.967

您的接口声明指定接口的所有实现都将提供具有此签名的通用方法：

```
public <RT> RT setHeader(RT header); 
```

换句话说，调用者将能够传递任何类型的对象，并返回相同类型的对象。

另一方面，您的实现声明将用户限制为单一类型，即`Header`. 这就是编译器抱怨无法覆盖的原因。

如果接口是泛型的，并且实现它的类型正在实现泛型实例，则该技巧将起作用，如下所示：

```
public interface FileProccessor<T> {
    public T setHeader(T header);
}

public class AProcessor implements FileProccessor<Header> {
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T10:03:44.370

我想你想这样做：

```
public interface FileProccessor<RT, RX> {
    public RT setHeader(RT header);
    public RX setFooter(RX footer);
}

public class AProcessor implements FileProccessor<Header, Footer> {

    @Override
    public Header setHeader(Header header) {
        return null;
    }

    @Override
    public Footer setFooter(Footer footer) {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:04:10.190

尝试像这样定义你的界面：

```
public interface FileProccessor<RT> {
    public RT setHeader(RT header);
} 
```

然后像这样实现它：

```
public class AProcessor implements FileProccessor<Header> {
    @Override
    public Header setHeader(Header header) {
        return null;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:06:01.193

您不能以这种方式覆盖方法。`AProcessor`必须能够接受所有`FileProcessor`接受作为`setHeader`. 考虑这段代码：

```
FileProcessor f = new AProcessor();
String s =  f.setHeader("Bah"); 
```

无论使用哪个具体类，此代码都应该可以工作，并且它不适用于您的`AProcessor`. 因此，类型检查器拒绝它是有道理的。

这样的事情会起作用（因为 FileProcessor 接口现在用 RT 参数化了）：

```
public interface FileProccessor<RT> {
    public RT setHeader(RT header);
}

public class AProcessor implements FileProccessor<Header> {

    @Override
    public Header setHeader(Header header) {
        return null;
    }
} 
```

现在该类的用户必须编写：

```
FileProcessor<Header> f = new AProcessor(); 
```

并且参数 to`setHeader`必须是类型`Header`...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T10:20:53.787

[JLS #8.4.2。方法签名](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.2)

> 方法 m1 的签名是方法 m2 签名的子签名，如果：
> 
> *   m2 与 m1 具有相同的签名，或
>     
>     
> *   m1 的签名与 m2 签名的擦除（第 4.6 节）相同。

在你的情况下`erasure`是不同的，即。在一次情况下，你有，而在你没有的实施类中。

**因为允许原始类型覆盖**下面的泛型方法可以在您的情况下工作。

```
 @Override
    public Object setHeader(Object header) {
        return null;
    } 
```

此外，如果您更改您的声明如下

```
 public interface FileProccessor<T> {
    public T setHeader(T header);
 } 
```

`FileProccessor<T>`您可以在扩展时根据子类中传入的类型覆盖方法

```
public class AProcessor implements FileProccessor<Header> {
    @Override
    public Header setHeader(Header header) {
        return null;
    }
} 
```

# asp.net - .net 表单的验证

> ID：12637820
> 
> 赞同：0
> 
> 时间：2012-09-28T10:00:42.367
> 
> 标签：asp.net

是否可以通过单击一次按钮同时使用 javascript 验证和 asp.net 验证器（必填字段验证器）。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:06:42.053

ASP.NET 验证器支持客户端验证。

看看：[ASP.NET 深度验证，“客户端验证”一章](http://msdn.microsoft.com/en-us/library/aa479045.aspx#aspplusvalid_clientside)

您需要设置`EnableClientScript`为`true`（但无论如何它都是默认值）。

因此，`RequiredFieldValidator`如果用户输入了某些内容，则在客户端进行检查。

# eclipse - 在 Eclipse-Photran 中为 Windows 上的 fortran 编译器配置 LAPACK

> ID：12637822
> 
> 赞同：3
> 
> 时间：2012-09-28T10:00:47.523
> 
> 标签：eclipse, fortran, lapack, photran

**更新**

感谢 Vladimir 对图书馆的有用见解。我采取了另一种方法，首先在 ubuntu 中进行开发（这比使用 Eclipse/Cygwin/ 搞砸要容易得多……现在我正在尝试移植到 Windows，这还不错，但是我对此也有一些疑问，张贴在这里：[将 fortran 程序从 ubuntu 移植到 windows 的问题](https://stackoverflow.com/questions/17869288/problems-with-porting-a-fortran-program-from-ubuntu-to-windows)

**问题**

我目前有以下设置，无法配置 lapack 库，以便我的 fortran 代码可以编译：

*   Windows 7的
*   Cygwin 安装（用于 GNU fortran），添加到 windows PATH
*   使用 cygwin 安装的 lapack 和 liblapack-devel
    *   导致文件夹 C:/cygwin/lib 中的 liblapack.a 和 libblas.a

在我的程序中，我使用以下代码调用 lapack 库

```
program myProgram
    !use lapack (stays commented now)
    ... 
```

在 Eclipse 中，我使用了以下设置（使用 Photran 包）：

*   Fortran 项目：Windows 上的可执行 GNU fortran（GCC 工具链）
*   GNU fortran 编译器：`gfortran ${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}`
*   GNU fortran 链接器：`gfortran ${COMMAND} ${FLAGS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${INPUTS}`

我编译了库 libblas.a 和 liblapack.a，用作 Windows 的静态库，它们位于 C:/cygwin/lib 文件夹中。在 GNU fortran 链接器属性中，库被调用`lapack`并且`blas`在文件夹中`C:/cygwin/lib`。这导致编译器和链接器部分`-L"C:/cygwin/lib" -llapack -lblas`中的一部分。`{$COMMAND}`（感谢@vladimir-f 的帮助）

在输出中不再有错误消息。只有我现在在 Eclipse 中得到以下错误，并且没有最终的 .exe 或 bins：

```
Errors occured during the build.
    Errors running builder 'CDT Builder' on project 'Hamfem'
    Internal error building project Hamfem configuration
    Release
    java.lang.NullPointerException
Internal error building project Hamfem configuration
Release
java.lang.NullPointerException 
```

但是，构建的结果仍然是一个可执行文件，在本例中称为 Hamfem.exe。运行此文件会导致错误消息（而不是例程）：`The program can't start because cyglapack-0.dll is missing from your computer. Try reinstalling the program to fix this problem.`

该文件当前位于`C:/cygwin/lib/lapack/`但我希望运行该程序不需要该文件，因此我可以在不同的计算机上运行它。有人可以合作吗？

其次，将 .dll 文件复制粘贴到 .exe 所在的文件夹中时，它会运行一秒钟，生成一个 stackdump 文件。由于“构建工作区”错误，我无法在 Eclipse-Photran 中使用调试器。`Binary not found`当我想在 Eclipse 中将它作为本地 Fortran 程序运行时，Eclipse 会给出消息。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:08:32.627

问题就在这里

```
L/lib/lapack –llapack 
```

尝试改变它

```
-L/lib/lapack –llapack 
```

可能它在你身上`Makefile`。

IE

```
gfortran -funderscoring -O3 -Wall -c -fmessage-length=0 -L/lib/lapack -llapack -o 
```

并确保`lapack.mod`确实在`/lib/lapack`Cygwin`C:\cygwin\lib\lapack`上。

# php - 如何根据输入的文本框id进行mysql查询？

> ID：12637824
> 
> 赞同：0
> 
> 时间：2012-09-28T10:00:52.843
> 
> 标签：php

我有一个带有两个输入文本框的表单：移动和扩展，我想通过 jQuery 提供一个自动填充来填充另一个文本框，如标题、部门等，我可以这样做

索引.php

```
//form start
<input type="text" name="mobile" id="mobile" onchange = "mobilecheck();" size="10" maxlength="30" value="" />
<input type="text" name="extension" id="extension" onchange = "extensioncheck();" size="10" maxlength="30" value="" />
//form end
//auto populate work well so I skip those codes

//function start
var url = "check.php?q=";

function mobilecheck() {
   var idValue = document.getElementById("mobile").value;
   var myRandom=parseInt(Math.random()*99999999);  // cache buster
   if (idValue=="") return;
   http.open("GET", url + escape(idValue) + "&rand=" + myRandom, true);
   http.onreadystatechange = handleHttpResponse;
   http.send(null);
}

function extensioncheck() {
   var idValue = document.getElementById("extension").value;
   //the other are same with mobilecheck() so skip it
   //function end 
```

使用相同的 php 文件执行 mysql 查询 check.php

```
//query start
$result = mysql_query("SELECT * FROM mycontact WHERE (mobile like '$q') or (extension like '$q')); 
//query end 
```

它运作良好，但我想知道是否有更好的方法来做到这一点，比如 switch 将两个功能合二为一。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:17:33.337

推荐使用 Memcache 而不是 MySQL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:21:42.730

```
//form start
<input type="text" name="mobile" id="mobile" onchange = "check('mobile');" size="10" maxlength="30" value="" />
<input type="text" name="extension" id="extension" onchange = "check('extension');" size="10" maxlength="30" value="" />
//form end

var url = "check.php?q=";

function check(type){
var idValue = document.getElementById(type).value;
var myRandom=parseInt(Math.random()*99999999);  // cache buster
if (idValue=="") return;
http.open("GET", url + escape(idValue) + "&rand=" + myRandom, true);
http.onreadystatechange = handleHttpResponse;
http.send(null);
} 
```

# javascript - 在字段中键入和粘贴之间的区别

> ID：12637828
> 
> 赞同：0
> 
> 时间：2012-09-28T10:01:14.520
> 
> 标签：javascript, security, search, xss

如果我使用 xss，输入 ALERT('DSSA'); 或只是将其粘贴到搜索文本字段有什么区别？在一个站点中，打字工作，并发出警报，但如果我只是粘贴它，它不会。为了避免这个问题，我不想破解任何网站，我只是对网络安全感兴趣。

感谢你的回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:03:51.340

这将是因为构建网站的程序员很懒惰并且没有监听`onpaste`事件。

键入会触发`onkeydown`,`onkeypress`和`onkeyup`事件，并且是在观察用户输入时要考虑的*标准事件。*

看起来这些是程序员监听的唯一事件（这使得这与网络安全无关）。

* * *

如果不是这种情况，那么他将对事件使用两个不同的事件处理程序；一个逃脱了输入，而另一个他被遗忘了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:02:48.963

我可能没有正确理解这个问题。

在元素上键入触发器`keyUp`和事件。如果代码被编程为仅捕获它们，那么*将仅捕获那些事件*。`keyDown``keyPress`

 *可以使用键盘、鼠标和浏览器选项进行粘贴。所以这取决于**你也在听哪些事件**。有一个单独的事件称为**`onpaste`**这将简化一切。

> 我的意思是，假设我的代码仅用于捕获我按“Ctrl”+“v”的粘贴，但如果使用鼠标和浏览器选项在元素上粘贴，那么它也被配置为捕获鼠标事件，它不能被捕获。*

# jquery - 如何在Firefox上设置“焦点”？

> ID：12637840
> 
> 赞同：0
> 
> 时间：2012-09-28T10:02:00.187
> 
> 标签：jquery

我有js：

```
$(document).on('focus', '.uiopis', function() {
    $(this).removeClass("textareaBlur").addClass("textareaFocus");  
}).on('blur', '.uiopis', function() {  
    $(this).removeClass("textareaFocus").addClass("textareaBlur");   
}); 
```

和html：

```
<div>
    <form>
        <textarea class="uiopis" id="os{{ us.id }}" name="os{{ us.id }}">{{ us }}</textarea>
    </form>
</div> 
```

但这不适用于Firefox，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:05:40.723

焦点/模糊事件不会冒泡，因此您需要像这样附加处理程序：

```
$('.uiopis').on('focus', function() {
    $(this).removeClass("textareaBlur").addClass("textareaFocus");  
}).on('blur', function() {  
    $(this).removeClass("textareaFocus").addClass("textareaBlur");   
}); 
```

假设`.uiopis`是动态生成的（因为您在代码中使用了委托），您必须在`.uiopis`添加到 DOM 之后添加处理程序。

# linux - 构建共享库的“soname”选项是什么？

> ID：12637841
> 
> 赞同：64
> 
> 时间：2012-09-28T10:02:07.297
> 
> 标签：linux, gcc, shared-libraries

我学习了“**[程序库 HOWTO](http://tldp.org/HOWTO/Program-Library-HOWTO/)** ”。它提到使用`soname`来管理版本，如下所示。

```
gcc -shared -fPIC -Wl,-soname,libfoo.so.1  -o libfoo.so.1.0.0 foo.c
ln -s libfoo.so.1.0.0  libfoo.so.1
ln -s libfoo.so.1 libfoo.so 
```

如果`soname`没有设置，我会得到信息。它将等于 libfoo.so.1.0.0 ，请参阅[此处](https://stackoverflow.com/questions/4071962/how-does-linker-find-shared-library-without-soname)的答案。

而且我发现它也可以在没有 soname 的情况下工作，如下所示

```
 gcc -shared -fPIC -o libfoo.so.1.0.0 foo.c
 ln -s libfoo.so.1.0.0  libfoo.so.1
 ln -s libfoo.so.1 libfoo.so 
```

所以我认为唯一有用的一点是，当您使用命令检查它时，该`soname`选项可以告诉您共享库的版本。`readelf -d libfoo.so`

**它还能做什么？**

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-30T20:56:05.503

soname 用于指示您的库支持的二进制 api 兼容性。

`SONAME`链接器在编译时使用它来从库文件中确定实际的目标库版本。gcc -l`NAME`将寻找 lib `NAME`.so 链接或文件，然后捕获其 SONAME，这肯定会更具体（例如 libnuke.so 链接到包含 SONAME libnuke.so.0 的 libnuke.so.0.1.4 ）。

在运行时，它将与此链接，然后设置为 ELF 动态部分`NEEDED`，然后应该存在具有此名称（或指向它的链接）的库。在运行时`SONAME`被忽略，所以只有链接或文件存在就足够了。

备注：SONAME 仅在链接/构建时强制执行，而不是在运行时强制执行。

可以使用“objdump -p file |grep SONAME”查看库的“SONAME”。可以使用 'objdump -p file |grep NEEDED' 看到二进制文件的 'NEEDED'。

[编辑] 警告以下是一般性评论，而不是部署在 linux 中的评论。见最后。

假设您有一个名为 libnuke.so.1.2 的库，并且您开发了一个新的 libnuke 库：

*   如果您的新库是以前的修复程序而没有更改 api，您应该保持相同的 soname，增加文件名的版本。即文件将是libnuke.so.1.2.1，但soname 仍将是libnuke.so.1.2。
*   如果你有一个新库，它只添加了新功能但没有破坏功能并且仍然与以前兼容，你想使用与以前相同的 soname 加上一个新的后缀，如 .1。即文件和soname 将是libnuke.so.1.2.1。任何与 libnuke.1.2 链接的程序仍然可以使用该程序。与 libnuke.1.2.1 链接的新程序只能与那个程序一起使用（直到新的颠覆来像 libnuke.1.2.1.1 ）。
*   如果您的新库与任何 libnuke 不兼容：libnuke.so.2
*   如果您的新库与裸旧版本兼容：libnuke.so.1.3 [即仍然与 libnuke.so.1 兼容]

[编辑]完成：linux案例。

在 linux 现实生活中 SONAME 作为一种特定形式： lib[NAME][API-VERSION].so.[major-version] major-version 只是一个整数值，每次主要库更改都会增加。API-VERSION 默认为空

前 libnuke.so.0

然后真正的文件名包括次要版本和子版本，例如：libnuke.so.0.1.5

我认为不提供 soname 是一种不好的做法，因为重命名文件会改变其行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-15T18:04:36.143

您在命名传统 libname.{a}.{b}.{c} 中创建了一个名为 libx.1.0.0 的动态库

```
{a} stand for primary version, should changes when APIs changes(which making things incompatible).
{b} stand for sub version, should changes by adding APIs.
{c} stand for mirror version, should changes by bug fixing or optimizing 
```

现在您正在发布 libx.1.2.0，并且您需要声明 libx.1.2.0 与 libx.1.0.0 兼容，因为只需添加功能和人们的可执行文件不会崩溃，只需像以前那样链接它：

将 libx.1.0.0 和 libx.1.2.0 设置为具有相同的 soname，例如 libx.1

这就是 soname 的作用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-28T14:04:08.107

这是一个支持[Johann Klasek 回答](https://stackoverflow.com/a/35991372/8037585)的示例。

简而言之，运行时需要 SONAME。在编译时，只需要链接器名称或真实名称（例如`g++ main.cpp -L. -ladd`或`g++ main.cpp -L. -l:libadd.so.1.1`）。链接器名称和实名的定义遵循[Program Library HOWTO: 3\. Shared Libraries](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)。

源树：

```
├── add.cpp
├── add.h
├── main.cpp
└── Makefile 
```

生成文件：

```
SOURCE_FILE=add.cpp
# main.cpp includes `add.h`, whose implementation is `add.cpp`
MAIN_FILE=main.cpp
SONAME=libadd.so.1
REAL_NAME=libadd.so.1.1
LINKER_NAME=libadd.so
OUTPUT_FILE=a.out

all:
   g++ -shared -fPIC -Wl,-soname,${SONAME} -o ${REAL_NAME} ${SOURCE_FILE}
   ln -s ${REAL_NAME} ${LINKER_NAME}
   g++ main.cpp -I. -L. -ladd -o ${OUTPUT_FILE} 
   # Same as `ldconfig -n .`, creates a symbolic link
   ln -s ${REAL_NAME} ${SONAME}
   #./a.out: error while loading shared libraries: libadd.so.1: cannot open 
   # shared object file: No such file or directory
   LD_LIBRARY_PATH=. ./${OUTPUT_FILE}
clean:
   rm ${SONAME} ${REAL_NAME} ${LINKER_NAME} ${OUTPUT_FILE} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-15T07:27:50.117

假设 libA.so 依赖于 libB.so，并且它们都在一个目录中（当然动态链接器找不到该目录）。如果您没有设置`soname` 则`dlopen`不起作用：

```
auto pB = dlopen("./libB.so", RTLD_LAZY | RTLD_GLOBAL);
auto pA = dlopen("./libA.so", RTLD_LAZY | RTLD_GLOBAL); 
```

因为运行时链接器找不到`libB.so`，所以`pA`设置为`NULL`.

在这种情况下`soname`，将把你从地狱中拯救出来......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-14T15:19:06.130

另一方面：至少在 Linux 上，SONAME 条目为运行时链接器系统提供了有关如何在 /lib、/lib64 等中创建适当链接的提示。运行命令 ldconfig 尝试创建一个以 SONAME 命名的符号链接，该链接也被采用进入运行时链接器缓存。标记相同 SONAME 的最新库赢得了链接竞赛。如果某些软件依赖于特定的 SONAME 并且您想要更新一个库，您必须提供此 SONAME 以使 ldconfig 坚持这个新库（如果 ldconfig 用于重建缓存和链接）。例如 libssl.so.6 和 libcrypto.so.6 就是这样的情况。

# jquery - 用另一组替换某组元素的方法？

> ID：12637843
> 
> 赞同：1
> 
> 时间：2012-09-28T10:02:09.333
> 
> 标签：jquery, html, replace

在将其标记为[JQuery 的副本之前：用另一个集合替换一组元素的优雅方式](https://stackoverflow.com/questions/10723452/jquery-elegant-way-to-replace-set-of-elements-with-another-set)，请阅读我的问题。

我上面提到的问题的答案只允许用另一个集合替换某个父选择器内的所有元素。

我想要的是替换某个集合，例如`#foo1`和`#foo3`在下面的示例中，但不是`#foo2`and `#foo4`：

```
<div id="main">
  <div id="foo1">Foo1</div>
  <div id="foo2">Foo2</div>
  <div id="foo3">Foo3</div>
  <div id="foo4">Foo4</div>
</div> 
```

只是说我想用两个 id 为 and 的 div替换元素`#foo1`和。我不想更改任何其他元素。`#foo3``#foo5``#foo6`

这远程可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:08:19.600

你可以使用`replaceWith`方法。

```
$('#foo1').replaceWith($('#foo5'))​ 
```

或者：

```
$('#foo1').replaceWith('<div id="foo5">Content</div>')​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:09:20.893

有一个`replaceWith`方法：

```
$('#foo1').replaceWith('<div id="foo5">Foo4</div>');​ 
```

编辑：bleh，太晚了，重复的答案：P

# c# - Web 应用程序页面上的空间是否重要

> ID：12637844
> 
> 赞同：2
> 
> 时间：2012-09-28T10:02:09.950
> 
> 标签：c#, asp.net, performance, web, performance-testing

我的客户抱怨我的网页包含太多空格，因此对性能不利。

网页中的空间是否重要？

**更新 ：**

我的意思是性能和成本问题的空白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T10:04:26.893

嗯，空间，就像任何其他角色一样，有它的大小。因此，如果您的页面充满空格，那么您将支付传输这些额外字节的费用。这可能会花费时间，直到客户端收到整个页面，如果带宽有限并且您需要为每个字节付费，那么这可能会花费时间。

有一些工具可以自动优化您的脚本并删除空格和不需要的换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:07:16.340

减少空白也可以减少网页的字节大小。减小网页的大小对网页的性能有积极的影响。

请注意，在某些（旧）浏览器中，如果您删除所有空白区域，您的结果将会改变。

如果您删除空白，您可以做的最好的事情是在运行时使用如下示例中的模块执行此操作：

[用于 ASP.NET 2.0 的空格删除 HTTP 模块](http://madskristensen.net/post/A-whitespace-removal-HTTP-module-for-ASPNET-20.aspx)

所以你的工作环境仍然是可读的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:08:08.133

并非如此，带有单个空格的文本文件以 1 个字节出现。

一个1024个空格，就是1kb，1024bytes。

任何一种下载速度都将是最小的，并且只需优化单个 Jpeg 就可以进行更大的优化。

搜索引擎和浏览器将忽略空白，因此它对代码的影响很小。

**如果**您的实际页面中有很多空白，那么这可能是一个好的设计元素，也可能是坏的，这取决于您的目标受众等......无论哪种方式，恕我直言，空白几乎没有什么区别。

***编辑***

如果您删除所有空白，请确保保留“正常”开发副本，否则如果您需要编辑它，您可能会遇到困难。

通常，“缩小”是在脚本而不是 HTML 上执行的，但我看不出相同概念不起作用的任何原因 - 这只是收益递减的情况。

如果您花 3 小时优化网站以节省 10kb，而不是花 3 小时创建更好的内容，您的客户真的会高兴吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T21:41:54.957

它总是有助于优化网页上的所有内容，无论多么微不足道，甚至是空格。但是，手动操作很痛苦。使用自动化流程。您没有提到您正在使用哪种服务器端技术。根据这一点，每个人都有不同的解决方法。

但是，例如，假设您使用的是 Apache，我建议您从 Google安装[mod_pagespeed 模块。](https://developers.google.com/speed/pagespeed/mod)擅长优化页面，而不仅仅是白色。

# java - @Local 接口有很多实现

> ID：12637848
> 
> 赞同：1
> 
> 时间：2012-09-28T10:02:26.553
> 
> 标签：java, jakarta-ee, glassfish, ejb-3.0

我有@Local 界面

```
@Local
public interface IRepo
{ 
```

和两个实现，但**只有 1 个**bean 实现

```
@Stateless(name = "RepoBean")
public class RepoBean implements IRepo
{ 
```

第二

```
public class SimpleRepo implements ILogRepositoryIRepo
{ 
```

并将其注入我的 Web 服务使用

```
 @EJB(name = "RepoBean")
   private IRepo repository; 
```

它运行良好`jboss`。`WebLogic`但是在`GlassFish 3.1.1`我得到错误（部署时）

```
 Cannot resolve reference Local ejb-ref name=RepoBean,Local 3.x interface =com.company.IRepo,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session because there are 2 ejbs in the application with interface com.company.IRepo. 
```

但我只有 1 个*ejb*实现。
有任何想法吗？也许我可以使用一些部署描述符或其他东西。
`EJB 3.0, Java EE 5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:28:50.460

我真的不明白您要做什么，但是如果您有两个实现相同业务接口的 bean，则必须使用 'beanName' 属性，如下所示：

```
@EJB(beanName = "RepoBean")
private IRepo repository; 
```

- 更新

看看这个：[java.net/node/702013](http://java.net/node/702013)。这个问题有一个错误问题：[java.net/jira/browse/GLASSFISH-11684](http://java.net/jira/browse/GLASSFISH-11684)

似乎这只发生在 EJB-in-WAR 打包中。在 ejb jar 中不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:21:54.497

好吧，Glassfish 比 JBoss 和 WebLogic 更正确，Business-Bean-Classes 应该都有自己的 EJB-Local-Interface。

我猜 WL 或 JBoss 会给你一个警告而不是一个错误。

# iphone - 如何检测绘图应用程序中的闭合路径

> ID：12637849
> 
> 赞同：2
> 
> 时间：2012-09-28T10:02:27.280
> 
> 标签：iphone, objective-c, path, cgcontext

正在开发绘图应用程序，我需要为每个单独的闭合路径填充颜色，如何检测闭合路径以在触摸时填充颜色，例如检测闭合路径和触摸填充选定颜色的窗口绘画应用程序自动填充器？

# c# - 如何使用散列密码连接到 MySQL 数据库

> ID：12637852
> 
> 赞同：2
> 
> 时间：2012-09-28T10:02:30.800
> 
> 标签：c#, mysql, database

目前我正在开发连接到 MySQL 数据库以检索和存储数据的软件。软件本身运行正常，但我想实现一些新的安全功能。

这些安全功能之一是将数据库用户的密码存储为哈希而不是纯文本。**为了记录，我不是使用表来验证用户，我说的是数据库用户连接到数据库本身。**

我目前正在使用一个 MySQL 连接字符串，它以纯文本形式发送密码：

```
public abstract Database()
    {
        ReadConfig();
        connectionstring = "SERVER=" + server + ";" +
                "DATABASE=" + database + ";" +
                "UID=" + username + ";" +
                "PASSWORD=" + password + ";";
        try
        {
            connection = new MySqlConnection(connectionstring);
        }
        catch (MySqlException ex)
        {
            LogService.Log("ERROR - " + ex.ToString());
        }
    } 
```

我还将这些数据存储在用户的计算机上，因此用户可以更改服务器地址、数据库、用户名和密码。正如我所说，这是以纯文本形式存储的。以纯文本形式存储的服务器地址、数据库名称和用户名对我来说很好，但我不想以纯文本形式存储密码。

生成 SHA1 散列（或其他散列方法）不是问题，因为我已经有了生成这些散列的方法。

简而言之，我想将密码保存为哈希，并在连接字符串中使用该哈希。我该如何实施？

编辑：我知道这是一个“通过默默无闻的安全”解决方案，它不是扩展我的软件安全性的最佳方式。我正在研究如何使用挑战-响应方法，但同时我想实现上述方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:47:44.277

您可以在这里做的最好的事情是加密用户的登录信息并在您想要登录时使用明文。MySQL 不会采用散列值 - 如果这样做，这不会比使用原始（未散列）值更安全。

一个“共享秘密”挑战是在您的服务器上使用代理来控制登录。当客户端想要连接时，服务器代理会发送一长串随机位。客户端会将（共享的）“秘密文本”附加到其末尾，在其上使用您的 SHA-1 哈希并将其发送回服务器。服务器将对文本执行相同的操作并比较字符串。这样，每次本质上都是一个不同的密码，并且嗅探它并不重要。

一旦客户端通过身份验证，服务器代理将启用与 mysql 进程的通信。使用 libmysql（或其 c#）等价物，您可以复制在“常规”mysql 客户端上发生的任何事情。

# java - 无法增加 java 堆大小

> ID：12637854
> 
> 赞同：7
> 
> 时间：2012-09-28T10:02:50.120
> 
> 标签：java, heap-memory

我的 Linux 机器上有 16GB RAM，并使用 -Xmx4096m 参数将最大 Java 堆内存设置为 4GB。但是当我开始我的过程时出现以下错误。

> 最大堆大小无效：-Xmx4096m 指定的大小超过了最大可表示大小。无法创建Java虚拟机。

当我将值设置为 2048m 时它工作正常。

我需要更改任何其他配置参数以增加堆大小吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:07:12.250

它不仅与您拥有多少内存有关

在 32 位机器上，最大可用堆为 1628MB 在 64 位机器上，最大可用堆为 2^64（理论上），但有限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:16:37.350

您使用的是什么操作系统？查看[Oracle 热点常见问题解答](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html)。请注意以下部分：

> 为什么我不能使用 32 位 JVM 获得更大的堆？

如果您使用的是 32 位系统，请将其降低到 1.6G。对于 64 位系统，请查看提供的链接中支持的系统列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-11T15:25:22.587

试试 -Xmx4066M 比4G少一点

键入命令提示符 (cmd) 后

```
java -XX:+PrintFlagsFinal -version | findstr /i "HeapSize PermSize ThreadStackSize" 
```

显示以下结果，以便从位到 Mb，您必须将其除以 1024^2=1'048'576 bits/mb

*   uintx HeapSizePerGCThread = 87241520 位（83,1999 ... MiB）
*   uintx InitialHeapSize = 268435456 位 (256 MiB)
*   uintx LargePageHeapSizeThreshold = 134217728 位 (128 MiB)
*   uintx MaxHeapSize = 4263510016 位 (4066 MiB)<4G

当我尝试更改 -Xmx4G 并显示时，这显示给我 MaxHeapSize =0 ...

## 但是当我做 -XmX4066M 它对我有用。

***我的问题***是 InitalHeapSize 我尝试更改 -Xms2G 或 -Xms2000M 但它对我不起作用或每次都会刷新......

在我做了一个新项目之后

```
public class MaxMemory {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    Runtime rt = Runtime.getRuntime();
    long totalMem = rt.totalMemory();
    long maxMem = rt.maxMemory();
    long freeMem = rt.freeMemory();
    long usedMem= totalMem-freeMem;
    double megs = 1048576.0;

    System.out.println ("Max Memory:   " + maxMem + " (" + (maxMem/megs) + " MiB)");
    System.out.println ("Total Memory: " + totalMem + " (" + (totalMem/megs) + " MiB)");
    System.out.println ("Used:  " + usedMem + " (" + (usedMem/megs) + " MiB)");
    System.out.println ("Free Memory:  " + freeMem + " (" + (freeMem/megs) + " MiB)");  

} 
```

它使我在我的一个程序中得到以下结果：

> 最大内存：259522560 (247.5 MiB)
> 
> 总内存：259522560 (247.5 MiB)
> 
> 已使用：246496784 (235.07765197753906 MiB)
> 
> 可用内存：13025776 (12.422348022460938 MiB)

我可能不会增加这个*我认为是****InitialHeapSize的******“最大内存”***

 **我试图改变它

> 控制面板 > java 控制面板 > java (tab) > view (button) > RuntimeParameter (block) > -Xms2000M

，当然出去后我点击**申请**，但什么也没发生......仍然耗尽我的记忆;'[**

# php - 如果 $alt 变量为空，则回退到 Wordpress 自定义函数中的 $title

> ID：12637856
> 
> 赞同：1
> 
> 时间：2012-09-28T10:02:59.560
> 
> 标签：php, wordpress, variables

我在 Wordpress 中构建了一个自定义画廊类型作为新的简码。

但是我想让它对 SEO 更友好一点，所以我尝试调用 alt 标签，如果找不到 alt 标签，请将其替换为标题。

到目前为止，我有以下内容（并且工作正常），但是如果 $alt 为空，我会试图让 $alt 回退到标题？任何想法/帮助表示赞赏！

```
$bigimageUrl = wp_get_attachment_image_src($attachment_id,$size='full-size');
$littleimageUrl = wp_get_attachment_image_src($attachment_id,$size='thumbnail');
$title_raw = $attachment->post_title;
$title = preg_replace("/[^a-zA-Z0-9\s]/", " ", $title_raw);
$alt_raw = get_post_meta($attachment_id, '_wp_attachment_image_alt', true);
$alt = preg_replace("/[^a-zA-Z0-9\s]/", " ", $alt_raw);

echo '<img class="gallerytype" title="'; echo $title; echo '" alt="'; echo $alt; echo '" data-rsTmb="'; echo $littleimageUrl[0]; echo '" src="'; echo $bigimageUrl[0]; echo '"/> '; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:36:29.047

而不是一个`echo`接一个地使用：

```
echo '<img class="gallerytype" title="';
echo $title; 
echo '" alt="'; 
echo $alt; echo '" data-rsTmb="'; 
echo $littleimageUrl[0]; 
echo '" src="'; 
echo $bigimageUrl[0]; echo '"/> '; 
```

您可以使用逗号 ( `,`) 分隔要输出的表达式：

```
echo '<img class="gallerytype" title="', $title, '" alt="', ..., '"/> '; 
```

这应该已经帮助您使代码更具可读性。

然后你想设置`$alt`为`$title`如果它是空的。所以在输出之前这样做：

```
empty($alt) && $alt = $title; 
```

读作：`$alt`是空的并且`$alt`是`$title`。

你也可以用一个`if`子句来写：

```
if (empty($alt)) $alt = $title; 
```

那应该为你做。

# html - 使用链接将 pptx 文件转换为 html

> ID：12637857
> 
> 赞同：0
> 
> 时间：2012-09-28T10:03:01.160
> 
> 标签：html, powerpoint, file-conversion

我有一个 pptx 文件，其中包含我现在想转换为 html 的工作链接。这个想法实际上是将 pptx 文件转换为网站。

我正在使用 Power Point 2010。我得到了一些关于如何进行这种转换的提示 @ [http://support.microsoft.com/kb/980553](http://support.microsoft.com/kb/980553)和一个做同样事情的工具 @ [http://www.ultrashareware.com /Ultra-PPT-To-HTML-Converter.htm](http://www.ultrashareware.com/Ultra-PPT-To-HTML-Converter.htm)

我能够获得一个 html 版本，但链接不起作用。只能通过单击在创建的 html 框架的左侧窗格中创建的幻灯片编号来进行导航。

我的问题 1\. 我如何让 html 页面上的链接像在 pptx 中一样工作 2\. 主页分为 2 个框架，左侧显示幻灯片编号。我如何完全摆脱左框架？

谢谢

萨米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:21:14.290

如果您有兴趣自己编写它，这是一项相当艰巨的任务。最直接的方法是导出每张幻灯片的图像，然后将其放入带有 IMG 标记的 HTML 中。您还需要构建一个图像映射并在其中包含幻灯片中的每个超链接 URL，以及从 PPT 的幻灯片大小标准化为您添加到 HTML 的图像大小的坐标。或者研究如何将链接放在图像顶部的 DIV 中。

如果您正在寻找一种立即可用的商业插件，可以让您更好地控制 HTML 的外观，我已经编写了一个。[在http://www.pptools.com/ppt2html/](http://www.pptools.com/ppt2html/)上有更多信息和免费演示

我很乐意回答您对此提出的任何问题，但最好不要将 SO 与支持聊天混为一谈。pptools 网站的每一页都有一个联系链接；如果您愿意，最好使用它来取得联系。

# xml - 在 QT 中更新 XML 文件

> ID：12637858
> 
> 赞同：6
> 
> 时间：2012-09-28T10:03:02.460
> 
> 标签：xml, qt, xml-parsing

我有 XML 文件

```
<root rootname="RName" otherstuff="temp">
     <somechild childname="CName" otherstuff="temp">
     </somechild>
</root> 
```

`RName`在上面的 XML中，我如何更新`RN`和`CName`使用`CN`QT。我正在使用`QDomDocument`但无法做必需的事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T11:11:46.177

如果您分享您如何使用 QDomDocument 以及究竟哪一部分是棘手的信息，这将有所帮助。但这里一般情况如何：

*   正在从文件系统中读取文件；

*   文件被解析为 QDomDocument；

*   文件内容正在修改；

*   正在将数据保存回文件。

在 Qt 代码中：

```
// Open file
QDomDocument doc("mydocument");
QFile file("mydocument.xml");
if (!file.open(QIODevice::ReadOnly)) {
    qError("Cannot open the file");
    return;
}
// Parse file
if (!doc.setContent(&file)) {
   qError("Cannot parse the content");
   file.close();
   return;
}
file.close();

// Modify content
QDomNodeList roots = elementsByTagName("root");
if (roots.size() < 1) {
   qError("Cannot find root");
   return;
}
QDomElement root = roots.at(0).toElement();
root.setAttribute("rootname", "RN");
// Then do the same thing for somechild
...

// Save content back to the file
if (!file.open(QIODevice::Truncate | QIODevice::WriteOnly)) {
    qError("Basically, now we lost content of a file");
    return;
}
QByteArray xml = doc.toByteArray();
file.write(xml);
file.close(); 
```

请注意，在现实生活中的应用程序中，您需要将数据保存到另一个文件，确保保存成功，然后用副本替换原始文件。

# jakarta-ee - 如何摆脱 JAXBElement 在 clientgen 生成的 WS 客户端 jar 中

> ID：12637860
> 
> 赞同：3
> 
> 时间：2012-09-28T10:03:03.543
> 
> 标签：jakarta-ee, soap, ant, weblogic, jax-ws

我正在通过遵循[clientgen](http://docs.oracle.com/cd/E13222_01/wls/docs103/webserv_ref/anttasks.html#wp1039270) ant 任务生成 ws 客户端

```
 <clientgen-contact
        wsdl="${wsdl-url-contact}"
        destFile="${output-file-contact}"
        packageName="${packageName}"
        type="JAXWS"
        overwrite="true"
    /> 
```

但是生成的 jar 中的某些类具有变量名`JAXBElement<Integer>`而不是`Integer`.

我怎样才能避免这种情况而得到`Integer`呢？

* * *

**解决方案**

*正如Paulius Matulionis*所说，解决方案是创建一个绑定文件。您可以将绑定文件参数提供给 clientgen，如下所示：

```
 <clientgen-contact
        wsdl="${wsdl-url-contact}"
        destFile="${output-file-contact}"
        packageName="${packageName}"
        type="JAXWS"
        overwrite="true"  
    >
        <binding file="${bindingFilePath}"/>
    </clientgen-contact> 
```

**Binding.xml 完整内容：**

```
<jaxb:bindings version="2.1" 
xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" 
xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
   <jaxb:globalBindings generateElementProperty="false"/> 
</jaxb:bindings> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T12:31:27.550

您必须创建`JAXB`绑定文件并在生成客户端时包含它。该文件应如下所示：

```
<jaxb:bindings version="2.0"
               xmlns:jaxb="http://java.sun.com/xml/ns/jaxb">
        <jaxb:globalBindings generateElementProperty="false"/>
</jaxb:bindings> 
```

标志`generateElementProperty`设置为 false ，它将阻止生成`JAXBElement<Integer>`而不是`Integer`.

# javascript - HTML5, JS Based PDF Reader for Web App

> ID：12637863
> 
> 赞同：0
> 
> 时间：2012-09-28T10:03:21.763
> 
> 标签：javascript, android, ios, pdf, cordova

Well, after a lot of searching, i realy can't find a solution for my problem. I'll explain what is about.

Im building a series of apps for iPhone, iPad, Android phone, Android Tablet, using HTML5, PhoneGap. The app is alredy coded and done, using ChildBrowser plugin for PhoneGap. So basically, i upload PDF files of magazine on my server, the app, download it and you read it on your phone or tablet.

ChildBrowser is a good solution, but for something small. My pdf files are about 15mb each, so you need to wait while it download the whole pdf file and then it will come on the screen. It is a pretty rough solution for a magazine. I tried pdf.js but it cant render graphics of the pdf. I saw flexpaper zine, but its too expensive.

Anybody have any ideas please? Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:32:49.887

有两个选项，您可以将单个 pdf(15mb) 文件切割成单页 pdf 的数量并作为用户请求加载（通常在用户完成阅读上一页之前加载下一个 2 3）或将 pdf 中的每一页转换为 jpg图像并加载到 web view .bot 这些技术需要用于切片或转换 pdf 的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:11:35.590

我对此知之甚少，但我最喜欢的杂志之一 Full Circle Magazine 使用了我所知道的最后一个[Scribd 。](http://www.scribd.com/)我不知道它是如何工作的，但它可能值得研究。

# c++ - #define StrToInt StrToIntA causes external reference error

> ID：12637865
> 
> 赞同：1
> 
> 时间：2012-09-28T10:03:27.840
> 
> 标签：c++

I am trying to compile an old project that contains a class named CVUtil with a function called `StrToInt(char *, int *)`. This function is called on several locations in the project with the syntax `CVUtil::StrToInt(pSomeChar,pSomeInt)`. When trying to compile this project VisStudio will change `StrToInt` to `StrToIntA` since somewhere the file Shlwapi.h is included and in it is the preprocessor statement
`"#define StrToInt StrToIntA"`. I Know that I can avoid this with just changing the name of the function but would like to find out how I can avoid this without doing that. Regards, Arni

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:05:25.053

You could `#undef StrToInt` in the header that contains the class definition, but the correct way would be to rename the function.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:05:18.947

You can always undefine the previous definition:

```
#ifdef StrToInt
#undef StrToInt
#endif
#define StrToInt StrToIntA 
```

However a better way would still be to pick another name.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T10:11:23.093

您最好调整链接器设置。有关 *A (Ascii) 和 *W (Wide) 函数的详细信息，请参阅[http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)。本文介绍了如何调整 Visual Studio 设置。

该指令

```
#define fun funA 
```

应该由这样的东西来保护：

```
#ifdef _UNICODE
# define fun funW
#else
# define fun funA
#endif 
```

# iphone - 点击时 UIAlertView 崩溃 - 使用 ARC

> ID：12637872
> 
> 赞同：0
> 
> 时间：2012-09-28T10:04:07.877
> 
> 标签：iphone, objective-c, ios, xcode, uialertview

我有一个名为`FlightRecorder`and的课程`BookmarkTableViewController`。现在，我介绍`BookmarkTableViewController`. 现在我正在解雇那个视图控制器。代码如下所示：

```
 [self dismissViewControllerAnimated:YES completion:^{

    FlightRecorder *fl = [[FlightRecorder alloc] init];
    [fl endBookmarkProcessWithBookmarkCollection: dict];

    } 
```

这在选择表格视图单元格后被调用。因此，`FlightRecorder`有一个名为`endBookmarkProcessWithBookmarkCollection:`where you pass on an的方法`NSDictionary`，如下所示：

```
- (void)endBookmarkProcessWithBookmarkCollection: (NSDictionary *)dict {

NSString *compiledText = @"Random Airline";

NSString *string = [NSString stringWithFormat: @"\nMiles: %.2f\nFlight: %@\nDate: %@", [[dict objectForKey: @"miles"] floatValue], compiledText, [[NSUserDefaults standardUserDefaults] objectForKey:@"tempD"]];

self.bkBookmarkAlertView = [[UIAlertView alloc] initWithTitle:@"Confirmation" message:string delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Add", nil];

[bkBookmarkAlertView show];

} 
```

如您所见，我使用字典和其他一些变量来拼凑警报视图的消息！警报视图有两个按钮，取消和添加。但问题是，当您按下其中任何一个时，它们都会崩溃，并且`clickedButtonAtIndex:`不会调用委托方法。我没有在完全相同的视图控制器中使用任何其他警报视图的这种经验。

我查看了其他一些类似方式的问题，但他们的解决方案是使用 ARC。底线他们说，`self`警报视图的代表是 nil 或过度释放或类似的东西。所以我想，也许该方法在视图加载之前被调用，即使它是在明显完成时调用的（完成块在 中`BookmarksTableViewController`）。

所以我决定把`NSLog`'s`viewDidLoad`和' 都放进去`endBookmarkProcessWithBookmarkCollection:`，但是`viewDidLoad` **首先被**调用，所以我不确定问题出在哪里。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:23:38.043

该块已完成执行，并且 f1 已超出范围并在您点击按钮之前被释放。我不熟悉您的应用程序的架构，但您需要在等待点击时找到该对象的所有者。

# c# - 如何一般地实例化 COM 类接口

> ID：12637878
> 
> 赞同：0
> 
> 时间：2012-09-28T10:04:26.553
> 
> 标签：c#, generics, com, activator

我正在尝试重构一段代码并且用尽了我能想到的选项。

这是我的原始代码：

```
 if (WebConfigSettings.ComPartition == null && HttpContext.Current != null)
            Nses = new NSession();
        else
            Nses = (INSession)Marshal.BindToMoniker(string.Format("partition:{0}/new:NuntioServer.NSession", WebConfigSettings.ComPartition)); 
```

和

```
 if (WebConfigSettings.ComPartition == null && HttpContext.Current != null)
            apses.Wses = new WSession();
        else
            apses.Wses = (IWSession)Marshal.BindToMoniker(string.Format("partition:{0}/new:NuntioServer.WSession", WebConfigSettings.ComPartition)); 
```

这就是我试图重构它的方式：（
是的，在 C# 中你可以[实例化](http://ayende.com/blog/4121/instantiating-interfaces) [一个](http://webcache.googleusercontent.com/search?q=cache%3aScTuLYESaNwJ%3airidescence.no/post/InstantiatinganInterface.aspx%20&cd=6&hl=en&ct=clnk&gl=sk) [接口](http://marcgravell.blogspot.sk/2009/08/who-says-you-cant-instantiate-interface.html)。）

```
 public static TInterface Get<TSubInterface, TInterface>() where TSubInterface: TInterface
    {
        <snip></snip>
        if (!useComPartitions)
            return Activator.CreateInstance<TSubInterface>(); // --> this is not cooperating

        return (TInterface)Marshal.BindToMoniker(.....);
    } 
```

这是我已经尝试过的：

1.  我尝试指定 new() 约束，然后执行“new TSubInterface()”：这会导致构建错误：“..必​​须是具有公共无参数构造函数的非抽象类型才能将其用作参数 'TSubInterface ' 在泛型类型或方法中.."

2.  当我使用 Activator.CreateInstance 时，我得到一个运行时异常：“无法创建接口的实例”

3.  当我使用 Activator.CreateComInstanceFrom("someAssemblyName", "typeName") 时，出现编译错误：“无法将表达式类型 'System.Runtime.Remoting.ObjectHandle' 转换为返回类型 TInterface”

**[编辑]**我可以通过添加 'where TSubInterface : 类来进行编译，但我不确定这是否有意义，因为 TSubInterface 是一个接口。
使用 CreateComInstanceFrom 也不起作用，因为它试图找到在该 dll 不存在且不应该存在的目录中指定的程序集。

我可以以某种方式编译并运行它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:41:43.507

您需要专注于能够从接口名称创建类对象的表面魔力。让我们选择一个每个人都可以尝试的例子。创建一个新的控制台应用程序并使用 Project + Add Reference，Browse 选项卡并选择 c:\windows\system32\shell32.dll。

查看使用对象浏览器生成的互操作库。请注意 Shell 类型如何成为接口类型。现在写下这段代码：

```
class Program {
    static void Main(string[] args) {
        var shl = new Shell32.Shell();
    }
} 
```

在 .exe 文件上编译并运行 ildasm.exe。你会看到的：

```
.method private hidebysig static void  Main(string[] args) cil managed
{
  .entrypoint
  // Code size       8 (0x8)
  .maxstack  1
  .locals init ([0] class [Interop.Shell32]Shell32.Shell 'shl')
  IL_0000:  nop
  IL_0001:  newobj     instance void [Interop.Shell32]Shell32.ShellClass::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ret
} // end of method Program::Main 
```

请注意类型名称是如何从 Shell**替换**为 ShellClass 的。类型库导入器创建了该类，它使用原始的 coclass 名称并将“Class”附加到名称中。编译器进行替换。

这是关键， Activator.CreateInstance() 无法进行相同的替换。除了直接使用 IFooClass 名称而不是接口名称之外，我没有看到让泛型进行相同替换的明显方法。从技术上讲，您可以检索类型库导入器应用于接口类型的 [CoClass] 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:37:27.323

可以*通过*找出该接口的 coClass 并创建其实例来完成：

```
var coClassAttribute = type.GetCustomAttribute<CoClassAttribute>(); // our extension method
return (TSubInterface)Activator.CreateInstance(coClassAttribute.CoClass); 
```

我对此并不满意，但它确实有效。（不会将此标记为正确答案）

# iphone - 用于 iOS 开发的 Windows 上的 Xcode

> ID：12637879
> 
> 赞同：9
> 
> 时间：2012-09-28T10:04:30.277
> 
> 标签：iphone, ios, objective-c, xcode, mobile

有没有办法在windows中开发ios应用程序？

如何在 Windows 上设置 Xcode？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T11:12:25.337

您可以在 Windows 上使用 VMWare 执行此操作，但为此您需要拥有配置良好的 Windows 机器。但它有以下缺点

1 你不能使用最新的MAC版本

2 无法在设备上构建应用程序

3 最后它非常慢。

如我错了请纠正我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T10:08:14.027

以下信息取自mipadi 几年前写的[**以下答案。**](https://stackoverflow.com/questions/2065343/why-isnt-there-xcode-for-windows/2065404#2065404)它现在仍然相关：

> “Xcode 是用`Objective-C`许多 OS X 框架编写并利用的，因此将其移植到 Windows 需要移植 Xcode 所依赖的所有框架。
> 
> 此外，Xcode 还使用了许多必须移植到 Windows 的编程工具（尽管其中一些已经移植）。
> 
> X-Code 在 Windows 上不可用的原因有多种：
> 
> *   大多数 Objective-C 框架的开发都是在 OS X 上进行的，而且很多框架不是开源的，因此不能移植到 Windows 上（它们必须被重写）。
>     
>     
> *   有一些开源框架可以在 Windows 上使用——例如，OS X 的 AppKit 和 Foundation 框架（大部分）作为 GNUstep 项目的一部分提供——但这些框架在 Windows 上并未广泛使用或支持，有时缺乏 OS X 对应的功能。”

也可以通过在 Windows 上使用 xCode。虚拟机；然而，结果不会是你想要的。它会很慢，而且由于您无法访问许多重要的框架，iOS 开发将​​是不可能的。

如果您只是想在 Windows 上编写 Objective-C 作为学习语言的一种方式，我建议您下载[**Codeblocks**](http://www.codeblocks.org/) -有关在其上配置 Objective C 编译器的信息，[**请参阅此文档**](http://wiki.codeblocks.org/index.php?title=Installing_Objective-C_Compiler)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T10:25:49.873

你不能在 Windows 上使用 XCode。几个月前我尝试了 2-3 天让它在 Windows 上运行，最后我买了一台 mac。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T10:08:49.140

Windows 不是 Apple 支持的平台，但有些人似乎找到了解决方法：

[http://ipodtoucher55.blogspot.com.es/2010/12/installing-ios-sdk-and-xcode-on-windows.html](http://ipodtoucher55.blogspot.com.es/2010/12/installing-ios-sdk-and-xcode-on-windows.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T07:50:27.200

我想只有在 windows pc 上虚拟化 Mac 才是正确的方法，或者得到一个[Hacintosh](http://www.hackintosh.com/)。

# java - 使用 java 套接字从服务器到客户端的文件传输。服务器端出错，传输到客户端的文件为空

> ID：12637882
> 
> 赞同：2
> 
> 时间：2012-09-28T10:04:54.720
> 
> 标签：java, sockets, filenotfoundexception

我有一个客户端和服务器，在客户端输入文件名，该文件名将在服务器端在预定义路径下检查，如果文件存在，它将在类似的预定义路径下传输到客户端。我有两个问题：

1）在服务器中，我无法比较给定预定义路径下的文件，因为它显示 FileNotFoundException（没有这样的文件/目录）。

2）即使出现上述异常，文件也被传输并且它是空的。

这是我的客户端和服务器：

客户：

```
import java.io.*;
import java.net.*;
import java.util.*;
public class ft2client
{ 
public static void main(String srgs[])throws IOException
{
Socket s=null;
BufferedReader get=null;
PrintWriter put=null;
try
{ 
s=new Socket("127.0.0.1",8085);
get=new BufferedReader(new InputStreamReader(s.getInputStream()));
put=new PrintWriter(s.getOutputStream(),true);
}  
catch(Exception e)
{
System.exit(0);
}
                    String u,f;
                    System.out.println("Enter the file name to transfer from server:");
                    DataInputStream dis=new DataInputStream(System.in);
                    f=dis.readLine();
                    put.println(f);
                    File f1=new File(f);
                    String str = "/home/user/";
                    FileOutputStream  fs=new FileOutputStream(new File(str,f1.toString()));
                    while((u=get.readLine())!=null)
                    { 
                        byte jj[]=u.getBytes();
                        fs.write(jj);
                    } 
                    fs.close();
                    System.out.println("File received");
                    s.close();
                }      
            } 
```

服务器：

```
import java.io.*;
import java.net.*;
import java.util.*;
     public class ft2server
             { 
                 public static void main(String args[])throws IOException
                 { 
                     ServerSocket ss=null;
                     try
                     {  
                         ss=new ServerSocket(8085);
                     }
                     catch(IOException e)
                     { 
                         System.out.println("couldn't listen");
                         System.exit(0);
                     }
                     Socket cs=null;
                     try
                     { 
                         cs=ss.accept();
                         System.out.println("Connection established"+cs);
                     }
                     catch(Exception e)
                     { 
                         System.out.println("Accept failed");
                         System.exit(1);
                     } 
                     PrintWriter put=new PrintWriter(cs.getOutputStream(),true);
                     BufferedReader st=new BufferedReader(new InputStreamReader(cs.getInputStream()));
                     String s=st.readLine();
                     String str = "/home/user/Desktop/";
                     String path = str + s; 
                     System.out.println("The requested file is path: "+path);
                     System.out.println("The requested file is : "+s);
                     File f=new File(path);
                     if(f.exists())
                     { 
                         BufferedReader d=new BufferedReader(new FileReader(s));
                         String line;
                         while((line=d.readLine())!=null)
                         {
                             put.write(line);
                             put.flush();
                         }
                         d.close();
                         System.out.println("File transfered");
                         cs.close();
                         ss.close();
                     }  
                 }  
             } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T11:53:34.767

看到二进制数据，您已经更改了阅读器，因为它们只能处理字符并且不能处理字节流。此外，readline 意味着读取到行尾并且在二进制文件中（'\n'）没有太大意义。
这是来自 printWriter 的文档

`It does not contain methods for writing raw bytes, for which a program should use unencoded byte streams.`

你现在想要的是使用字节数组并将它们写成这样的块：

```
import java.io.*;
import java.net.*;
import java.util.*;
     public class ft2server
         { 

             public static void main(String args[])throws IOException
             { 
                 ServerSocket ss=null;
                 try
                 {  
                     ss=new ServerSocket(8085);
                 }
                 catch(IOException e)
                 { 
                     System.out.println("couldn't listen");
                     System.exit(0);
                 }
                 Socket cs=null;
                 try
                 { 
                     cs=ss.accept();
                     System.out.println("Connection established"+cs);
                 }
                 catch(Exception e)
                 { 
                     System.out.println("Accept failed");
                     System.exit(1);
                 } 
                 BufferedOutputStream put=new BufferedOutputStream(cs.getOutputStream());
                 BufferedReader st=new BufferedReader(new InputStreamReader(cs.getInputStream()));
                 String s=st.readLine();
                 String str = "/home/milind/Desktop/";
                 String path = str + s; 
                 System.out.println("The requested file is path: "+path);
                 System.out.println("The requested file is : "+s);
                 File f=new File(path);
                 if(f.isFile())
                 { 
                     FileInputStream fis=new FileInputStream(f);

                     byte []buf=new byte[1024];
                     int read;
                     while((read=fis.read(buf,0,1024))!=-1)
                     {
                         put.write(buf,0,read);
                         put.flush();
                     }
                     //d.close();
                     System.out.println("File transfered");
                     cs.close();
                     ss.close();
                 }  
             }  
         } 
```

客户端

```
import java.io.*;
import java.net.*;
import java.util.*;
public class ft2client
{ 
    public static void main(String srgs[])throws IOException
    {
        Socket s=null;
        BufferedInputStream get=null;
        PrintWriter put=null;
        try
        { 
            s=new Socket("127.0.0.1",8085);
            get=new BufferedInputStream(s.getInputStream());
            put=new PrintWriter(s.getOutputStream(),true);

            String f;
            int u;
            System.out.println("Enter the file name to transfer from server:");
            DataInputStream dis=new DataInputStream(System.in);
            f=dis.readLine();
            put.println(f);
            File f1=new File(f);
            String str = "/home/milind/";
            FileOutputStream  fs=new FileOutputStream(new File(str,f1.toString()));
            byte jj[]=new byte[1024];
            while((u=get.read(jj,0,1024))!=-1)
            { 
                fs.write(jj,0,u);
            } 
            fs.close();
            System.out.println("File received");
            s.close();
        }catch(Exception e)
        {
            e.printStackTrace();
            System.exit(0);
        }
    }      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:36:43.597

在处理套接字时，几乎没有什么是确定的。

如果在另一端您正在读取这样的行，`get.readLine();`那么来自发送程序的程序应该像这样写入套接字 `put.writeBytes("any string variable"+"\n")`或`put.println("some string variable or literal.")`

您正在阅读，`get.readLine()` 并且正在写入从直接文件中读取的字节。

这是我的示例，当我需要纯文本以字节为单位传输时，我如何在套接字上进行读取、写入。

```
Server {
...
soc = echoServer.accept();
out = new DataOutputStream(soc.getOutputStream());
out.flush();
in = new DataInputStream(soc.getInputStream());
out.writeBytes("some text in here \n");
out.flush();

...
}

Client{

...

soc = new Socket("10.210.13.121", 62436);
out = new DataOutputStream(soc.getOutputStream());
out.flush();
in = new DataInputStream(soc.getInputStream());
...  
while(true)
    if(in.available() > 0)
       String str = in.readLine();
... 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T10:37:59.087

请使用 f.isFile() 而不是 f.exisits。这是一个已知问题。在服务器中，您错误地编写了固定代码
`BufferedReader d=new BufferedReader(new FileReader(s));`
而不是
`BufferedReader d=new BufferedReader(new FileReader(f));`
固定代码

```
import java.io.*;
import java.net.*;
import java.util.*;
     public class ft2server
         { 
             public static void main(String args[])throws IOException
             { 
                 ServerSocket ss=null;
                 try
                 {  
                     ss=new ServerSocket(8085);
                 }
                 catch(IOException e)
                 { 
                     System.out.println("couldn't listen");
                     System.exit(0);
                 }
                 Socket cs=null;
                 try
                 { 
                     cs=ss.accept();
                     System.out.println("Connection established"+cs);
                 }
                 catch(Exception e)
                 { 
                     System.out.println("Accept failed");
                     System.exit(1);
                 } 
                 PrintWriter put=new PrintWriter(cs.getOutputStream(),true);
                 BufferedReader st=new BufferedReader(new InputStreamReader(cs.getInputStream()));
                 String s=st.readLine();
                 String str = "/home/milind/Desktop/";
                 String path = str + s; 
                 System.out.println("The requested file is path: "+path);
                 System.out.println("The requested file is : "+s);
                 File f=new File(path);
                 if(f.isFile())
                 { 
                     BufferedReader d=new BufferedReader(new FileReader(f));
                     String line;
                     while((line=d.readLine())!=null)
                     {
                         put.write(line);
                         put.flush();
                     }
                     d.close();
                     System.out.println("File transfered");
                     cs.close();
                     ss.close();
                 }  
             }  
         } 
```

另一个

```
import java.io.*;
import java.net.*;
import java.util.*;
public class ft2client
{ 
    public static void main(String srgs[])throws IOException
    {
        Socket s=null;
        BufferedReader get=null;
        PrintWriter put=null;
        try
        { 
            s=new Socket("127.0.0.1",8085);
            get=new BufferedReader(new InputStreamReader(s.getInputStream()));
            put=new PrintWriter(s.getOutputStream(),true);

            String u,f;
            System.out.println("Enter the file name to transfer from server:");
            DataInputStream dis=new DataInputStream(System.in);
            f=dis.readLine();
            put.println(f);
            File f1=new File(f);
            String str = "/home/milind/";
            FileOutputStream  fs=new FileOutputStream(new File(str,f1.toString()));
            while((u=get.readLine())!=null)
            { 
                System.out.println(u);
                byte jj[]=u.getBytes();
                fs.write(jj);
            } 
            fs.close();
            System.out.println("File received");
            s.close();
        }catch(Exception e)
        {
            e.printStackTrace();
            System.exit(0);
        }
    }      
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T11:21:01.127

除非您知道内容是字符，否则不要使用`Readers`and 。`Writers`如果不这样做，请使用`InputStreams`and `OutputStreams`。在这种情况下，ZIP 文件肯定是二进制文件，而不是字符数据，因此您一定会使用`Readers`和`Writers.`

# asp.net-mvc - ViewBag null control in DropDownListFor

> ID：12637887
> 
> 赞同：0
> 
> 时间：2012-09-28T10:05:22.083
> 
> 标签：asp.net-mvc, lambda, html.dropdownlistfor, viewbag

```
@Html.DropDownListFor(model => model.TransferAvailibilities.First().CancellationID, 
(ViewBag.CancellationSchema == null ? null : 
(IEnumerable<SelectListItem>)ViewBag.CancellationSchema), new { @class = "field large" }) 
```

**And error**:

There is no ViewData item of type 'IEnumerable' that has the key 'CancellationID'.

I know that but i will bind data with ajax when i need. And my lambda not work or something for DropDownListFor...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:19:45.593

像这样创建`SelectList`：`ViewBag.CancellationSchema`

```
@Html.DropDownListFor(x => x.intClient, new SelectList(Model.Clients, "ClientId", "ClientName"), string.Empty); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T14:22:28.773

你做错了。请查看此帖子，而不是解释如何以及为什么，它将为您阐明如何使用的内容`@Html.DropDownListFor`：

[如何编写一个简单的 Html.DropDownListFor()？](https://stackoverflow.com/questions/3057873/how-to-write-a-simple-html-dropdownlistfor)

# bash - 'wait $COPROC_PID' doesn't wait

> ID：12637889
> 
> 赞同：2
> 
> 时间：2012-09-28T10:05:34.210
> 
> 标签：bash, wait, coproc

The following test script:

```
#!/bin/bash
f() { :; }

while :; do
    coproc f par1
    wait $COPROC_PID
done 
```

floods the console with:

```
./debug.sh: line 7: warning: execute_coproc: coproc [8740:COPROC] still exists
./debug.sh: line 7: warning: execute_coproc: coproc [8741:COPROC] still exists 
```

That is, `wait` doesn't wait for the coprocess to terminate.
Bash version is 4.2.0(5)-release. This does not happen with 4.1.5(1)-release.

Do you think it is a bug?

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2018-02-09T04:46:10.200

这不是错误。您将 coproc 命名为“f”，因此它位于 $f_PID 之下。

# java - Java regexp 子字符串提取模式

> ID：12637895
> 
> 赞同：0
> 
> 时间：2012-09-28T10:05:49.180
> 
> 标签：java, regex, pattern-matching, expression

我有这段文字：

```
<blockquote>1\. тест1; тест2; </blockquote>
<blockquote>2\. тест1; тест2; </blockquote>
<blockquote>1) тест1; тест2; </blockquote>
<blockquote>2) тест1; тест2; </blockquote>
<blockquote>1\. 1) тест1; тест2; </blockquote>
<blockquote>1) 1\. тест1; тест2; </blockquote>
<blockquote>1\. тест </blockquote> 
```

你能给我表达吗，用我可以提取тест1；回复2; 在这些字符串中的任何一个变量？回复1; 回复2; - 是西里尔字母。所以对于提取 тест 我需要使用 ([\p{IsCyrillic}]*) 表达式。

```
String pattern = "(.*)<blockquote>1\. ([\\p{IsCyrillic}]*) </blockquote>(.*)"; 
```

仅适用于第一个变体。这种变体的表达方式是什么？（或者你可以给我每个字符串变体的特定表达吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:16:41.470

**对于原始帖子中的所有字符串：-**

```
String pattern = "(.*)<blockquote>[\\d[\\.\\)]\\s]+([[\\p{IsCyrillic}][\\d\\;\\s]+]+) </blockquote>(.*)"; 
```

**对于下面给出的新要求字符串，请使用此模式。：-**

```
String str = "<blockquote>1\. тест </blockquote><blockquote>2\. 1) ветка; метрика </blockquote>";

String p = "[(.*)<blockquote>[\\d[\\.\\)]\\s]+([[\\p{IsCyrillic}][\\d\\;\\s]+]+) </blockquote>(.*)]+"; 
```

**好的，要匹配并返回`тест, ветка; метрика`上述字符串中的所有三个，代码如下：-**

```
String str = "<blockquote>1\. тест </blockquote><blockquote>2\. 1) ветка; метрика </blockquote>";

Pattern pattern1 = Pattern.compile("(тест)|(ветка;)|(метрика)");

Matcher matcher = pattern1.matcher(str);
while (matcher.find()) {
    System.out.print("Start index: " + matcher.start());
    System.out.print(" End index: " + matcher.end() + " ");
    System.out.println(matcher.group());
} 
```

但是，由于您只是匹配一个`fixed`字符串，因此您实际上并不需要`regex`. 您可以只使用常规`String`的类方法。使用`String.substring`,`String.indexOf`方法查找您的字符串。的真正力量`Regex`在于在一个模式上匹配多个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:14:45.960

这取决于您的确切要求。这是一个相当简单的修改，假设开头的编号可以是空格、右括号、点和数字的任意组合。

```
String pattern = 
 "(.*)<blockquote>[\\s\\.\\)\\d]+([\\p{IsCyrillic}\\;\\d\\s]*)</blockquote>(.*)"; 
```

更新：还进行了编辑，使中间部分匹配分号、数字和空格。

*更新 2：在阅读了评论中的讨论后，我不再确定需要什么，但这样做是匹配编号后的整个中间部分。匹配的部分可以是西里尔字符、分号、数字和空格的任意组合（只要它不以数字开头）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T08:11:25.857

如果您只想检索`тест1`和`тест2`. 然后您可以使用`String.substring()`和`String.indexOf()`函数执行字符串搜索。在这种情况下不需要正则表达式。

但是如果标签可以包含不同的字符串，那么您可以使用以下正则表达式。

`(?<= ).*?(?=(;| ))`

此正则表达式将分别选择 blockquote 标记内的字符串。

```
<blockquote>1\. тест1; тест2; </blockquote>
<blockquote>2\. тест1; тест2; </blockquote>
<blockquote>1) тест1; тест2; </blockquote>
<blockquote>2) тест1; тест2; </blockquote>
<blockquote>1\. 1) тест1; тест2; </blockquote>
<blockquote>1) 1\. тест1; тест2; </blockquote>
<blockquote>1\. тест </blockquote> 
```

这将选择

```
тест1 тест2
тест1 тест2
тест1 тест2
тест1 тест2
1) тест1 тест2
1\. тест1 тест2
тест 
```

分别为所有标签。

如果要从第 5 个和第 6 个标签中删除`1)`和`1.`，请相应地格式化您的字符串。

但是，如果您在同一行中有所有标签，那么它也会选择这些标签。您可以通过检查匹配的字符串是否以 开头来过滤掉它们`<`。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-28T10:18:49.090

这里的模式看起来很好，应该可以工作。但是，有时我发现一步一步地做这样的事情更容易，例如：

```
 public static void main(String[] args){

    String[] testStrings = { "<blockquote>1\. тест1; тест2; </blockquote>",
      "<blockquote>2\. тест1; тест2; </blockquote>",
      "<blockquote>1) тест1; тест2; </blockquote>",
      "<blockquote>2) тест1; тест2; </blockquote>",
      "<blockquote>1\. 1) тест1; тест2; </blockquote>",
      "<blockquote>1) 1\. тест1; тест2; </blockquote>" };

    for (String testString : testStrings){

      String result = testString
        .replace("<blockquote>", "")
        .replace("</blockquote>", "")
        .replaceAll("\\d\\.|\\d\\)", "")
        .trim();

      System.out.println(result);
    }
  } 
```

# iphone - adding NSMutableDictionary to NSMutableArray returning null

> ID：12637896
> 
> 赞同：-1
> 
> 时间：2012-09-28T10:05:56.200
> 
> 标签：iphone, xcode, nsxmlparser

Iam consuming XML response and parsing it..However when Iam adding the objects to NSMutableDictionary and then to nSMutableArray the response is null.I couldn't understand where iam going wrong? My Xmlresponse is like this:

```
<List>
<Address>
   <City>Michigan</City>
   <Line1>17</Line1>
   <line2>12</Line2>
 </Address>
<Employee>
    <EmployeeName>Williams</EmployeeName>
 </Employee>
 <Address>
   <City>NewYork</City>
   <Line1>27</Line1>
   <line2>52</Line2>
</Address>
<Employee>
    <EmployeeName>Mandarin</EmployeeName>
</Employee> 
```

My response should be like this:

```
Michigan 
17
12
Williams

NewYork
27
52
Mandarin 
```

And My Parsing Code is like this:

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI: (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

element = elementName;
if([elementName isEqualToString:@"Address"])
    {
        arr=[[NSMutableArray alloc] init];
        drr=[[NSMutableDictionary alloc] init];

    }

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
 [srr appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString   *)namespaceURI qualifiedName:(NSString *)qName {

if([elementName isEqualToString:@"City"])
{
    [drr setObject:srr forKey:@"City"];
    [srr release],srr=nil;
    return;
}  

if([elementName isEqualToString:@"Line1"])
{

     [drr setObject:srr forKey:@"Line1"];
     [srr release],srr=nil;
     return;    
}
if([elementName isEqualToString:@"Line2"])
   {

       [drr setObject:srr forKey:@"Line2"];
       [srr release],srr=nil;
       return;      
   }

if([elementName isEqualToString:@"Address"])
{
    [arr addObject:drr];
    [drr release],drr=nil;

}
[srr release],srr=nil;
}
NsLog(@"%@",arr); 
```

But when I check the response at 'arr' it returning NULL?Y is it so?Where Iam I going wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:40:01.163

请在 viewDidLoad 中初始化您的 iVar

```
arr=[[NSMutableArray alloc] init];
        drr=[[NSMutableDictionary alloc] init]; 
```

因为

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI: (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict { 
```

解析每个元素时都会调用它，因此它会一次又一次地重新分配

# php - 从 MYSQL 日期时间字段获取准确的时差

> ID：12637897
> 
> 赞同：1
> 
> 时间：2012-09-28T10:05:57.897
> 
> 标签：php, mysql, datetime, compare

我想做 StackOverflow 正在做的事情，这就是说自上一篇文章以来已经过去了多长时间。不过有一个问题，SO 会根据上一篇文章的发布时间显示某些信息——例如，如果一篇文章不到一天前，他们会发布上一篇文章的几小时前；如果帖子不到一小时前，他们会发布几分钟前的帖子，等等。

我正在使用以下格式的 MYSQL DateTime 字段：

> 2012-09-19 13:28:45

我想将上面的时间`NOW`与时间进行比较，所以我使用 PHP 的`strtotime`函数转换了那个时间，并尝试通过我放在一起的函数来比较两个日期（如下）。当然，这可能是最糟糕的方法，但是在阅读了 PHP`Date`和`DateTime`函数之后，我开始变得非常非常困惑。

```
function get_date_format($strToTimeString){

        $minute = 60;
        $hour = $minutes * 60;
        $day = $hour * 24;
        $week = $day * 7;
        $month = $week * 4;
        $year = $month * 12;

        $timeNow = strtotime("now");

        $timeDiff = $timeNow - $strToTimeString;

        if($timeDiff > $minute){
            if($timeDiff > $hour){
                if($timeDiff > $day){
                    if($timeDiff > $week){
                        if($timeDiff > $month){
                            if($timeDiff > $year){
                                // Years ago
                            }
                            else{
                                // Months ago
                            }
                        }
                        else{
                            // Weeks ago
                        }
                    }
                    else{
                        // Days ago
                    }
                }
                else
                {
                    // Hours ago
                }
            }
            else{
                // Minutes ago
            }

        }
        else{
            // Seconds ago
        }

    } 
```

有一个更好的方法吗？正如我上面提到的，我在尝试使用时没有运气`DateTime->diff`

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:15:19.907

使用[`DateTime`](http://php.net/manual/en/book.datetime.php). 这是示例：

```
$now = new DateTime('now');
$posted = new DateTime($postDateFromDBHere);
$interval = $posted->diff($now);
var_dump($interval);
echo $interval->format('%y-%m-%d %h:%m:%s'); //You can do similar to format your output as you wish. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:15:52.463

使用`DateTime`然后`DateTime:diff`检查每个值：

```
function returnInterval($date){
    $datetime1 = new DateTime($date);
    $datetime2 = new DateTime();
    $diff = $datetime1->diff($datetime2);
    $string = '';
    $pass = '';

    if($diff->y){
        $string .= ($diff->y == 1) ? $diff->y." year" : $diff->y." years";
        $pass = ', ';
    }
    if($diff->m){
        $string .= $pass;
        $string .= ($diff->m == 1) ? $diff->m." month" : $diff->m." months";
        $pass = ', ';
    }
    if($diff->d){
        $string .= $pass;
        $string .= ($diff->d == 1) ? $diff->d." day" : $diff->d." days";
        $pass = ', ';
    }
    if($diff->h){
        $string .= $pass;
        $string .= ($diff->h == 1) ? $diff->h." hour" : $diff->h." hours";
        $pass = ', ';
    }
    if($diff->i){
        $string .= $pass;
        $string .= ($diff->i == 1) ? $diff->i." minute" : $diff->i." minutes";
        $pass = ', ';
    }
    if($diff->s){
        $string .= $pass;
        $string .= ($diff->s == 1) ? $diff->s." second" : $diff->s." seconds";
    }
    $pos = strrpos($string, ',');
    $string = substr_replace($string, ' and ', $pos, 2);
    return $string;
}

echo returnInterval('2012-09-19 13:28:45');
// 8 days, 13 hours, 47 minutes and 44 seconds 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:59:05.937

经过长时间的搜索，我得到了一些接近 rottentomatoes 在他们的论坛上使用的东西：

```
function realTimeSince($time){
    define(MINUTE, 60);
    define(HOUR, 60*60);
    define(DAY, 60*60*24);
    define(MONTH, 60*60*24*30);
    $delta = strtotime(gmdate("Y-m-d H:i:s", time())) - strtotime($time);

    if ($delta < 1 * MINUTE) {
        return $delta == 1 ? "one second ago" : $delta . " seconds ago";
    }
    if ($delta < 2 * MINUTE) {
        return "a minute ago";
    }
    if ($delta < 45 * MINUTE) {
        return floor($delta / MINUTE) . " minutes ago";
    }
    if ($delta < 90 * MINUTE) {
        return "an hour ago";
    }
    if ($delta < 24 * HOUR) {
        return floor($delta / HOUR) . " hours ago";
    }
    if ($delta < 48 * HOUR) {
        return "yesterday";
    }
    if ($delta < 30 * DAY) {
        return floor($delta / DAY) . " days ago";
    }
    if ($delta < 12 * MONTH) {
        $months = floor($delta / DAY / 30);
        return $months <= 1 ? "one month ago" : $months . " months ago";
    } else {
        $years = floor($delta / DAY / 365);
        return $years <= 1 ? "one year ago" : $years . " years ago";
    }
} 
```

所以你可以像这样使用它：

```
realTimeSince('2012-11-12 00:09:54'); //which can be got from a MySQL TIMESTAMP field 
```

基于[http://www.ferdychristant.com/blog//archive/DOMM-7QEFK4稍作修改](http://www.ferdychristant.com/blog//archive/DOMM-7QEFK4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T10:09:17.677

试试下面的功能

```
 function time_ago($date)
        {
            //echo "ss";
            if (empty($date)) { 
                return "No date provided";
            }      
            $periods = array("sec", "min", "hr", "day", "week", "month", "year", "decade");
            $lengths = array("60","60","24","7","4.35","12","10");
            $now = time();
            $unix_date = strtotime($date);
            // check validity of date
            if (empty($unix_date)) {   
                return "Bad date";
            }
            // is it future date or past date
            if ($now >= $unix_date) {   
                $difference= $now - $unix_date;
                $tense = "ago";
            } else {
                $difference = $unix_date - $now;
                $tense = "from now";
            }
            for ($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
                $difference /= $lengths[$j];
            }
            $difference = round($difference);

            if ($difference != 1 && $j != 0) {
                $periods[$j].= "s";
            }
            if($difference!=0)
            return "$difference $periods[$j] {$tense}";
            else
            return "a few seconds ago";
        } 
```

或者

```
function time_elapsed_since ($postedDateTime){

    $time = time() - $postedDateTime; // to get the time since that moment

         $tokens = array (
                      31536000 => 'year',
                      2592000 => 'month',
                      604800 => 'week',
                      86400 => 'day',
                      3600 => 'hour',
                      60 => 'minute',
                      1 => 'second'
                  );

                  foreach ($tokens as $unit => $text) {
                      if ($time < $unit) continue;
                      $numberOfUnits = floor($time / $unit);
                      return $numberOfUnits.' '.$text.(($numberOfUnits>1)?'s':'');
                  }

    }

time_elapsed_since($postedDateTime).' ago'; 
```

# linux - Can't link application with mudflap

> ID：12637898
> 
> 赞同：4
> 
> 时间：2012-09-28T10:05:59.420
> 
> 标签：linux, gcc, linker, shared-libraries, undefined-reference

My application uses my shared library. Application and library must be `mudflapped` to check out of bounds reads and writes both on stack and heap. Shared library was successfully build, but while linking application I had a lot of errors.

I made a simple example that reproduces this issue. Here are steps to reproduce:

*   create C++ dynamic shared library project with 2 files: h and cpp files with some class, and in h or cpp file use `#include <iostream>`
*   create C++ application that uses this library (uses class from inside shared library)
*   build library
*   build application (here you will catch an linking error)

Here are my files:

SharedLibTest.h

```
#ifndef SHAREDLIBTEST_H_
#define SHAREDLIBTEST_H_

#include <iostream>

class SharedLibTest {
public:
    void func();
};

#endif /* SHAREDLIBTEST_H_ */ 
```

SharedLibTest.cpp

```
#include "SharedLibTest.h"

void SharedLibTest::func()
{} 
```

main.cpp

```
#include <SharedLibTest.h>

int main(int argc, char *argv[])
{
    SharedLibTest obj;
    obj.func();

    return 0;
} 
```

Building the library:

```
g++ -O0 -g3 -Wall -c -fmessage-length=0 -fmudflap -funwind-tables -fPIC -MMD -MP -MF"SharedLibTest.d" -MT"SharedLibTest.d" -o "SharedLibTest.o" "../SharedLibTest.cpp"
g++ -rdynamic -shared -o "libshared_lib.so"  ./SharedLibTest.o   -lmudflap 
```

Building the application:

```
g++ -I"/home/msviridov/work/prj/workspace/shared_lib" -O0 -g3 -Wall -c -fmessage-length=0 -fmudflap -funwind-tables -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
g++ -L"/home/msviridov/work/prj/workspace/shared_lib/Debug" -rdynamic -v -o "executable"  ./main.o   -lshared_lib -lmudflap 
```

Linker error output is:

```
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<unsigned long>::__digits'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<long>::__min'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<short>::__min'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<char>::__max'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<short>::__max'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<long>::__max'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<int>::__max'
/home/msviridov/work/prj/workspace/shared_lib/Debug/libshared_lib.so: undefined reference to `__gnu_cxx::__numeric_traits_integer<int>::__min'
collect2: ld returned 1 exit status
make: *** [executable] Error 1 
```

Though, if I remove mudflap compiler and linker flags for library the build of application will finish successfully. But it's not true for vice versa.

I don't understand what does lead to such result. My platform is Linux Mint 13 Maya 64 bit. I'll appreciate any help. Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:54:45.027

`#include <iostream>`从头文件中删除。如果你想`iostream`在你的源文件 (SharedLibTest.cpp) 中包含它。

将它包含在头文件中也会给您带来很多垃圾，并且还可能导致一些类似的引用错误。创建 SharedLibTest.o 而不包含并比较目标文件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:28:59.823

您可能遇到了[错误 53359](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53359)，但您需要最近的 4.8 代码来检查。此外，请注意，mudflap 适用于[C 和非常简单的 C++ 程序](http://gcc.gnu.org/wiki/Mudflap_Pointer_Debugging)，因此您可能会发现误报（ala [bug 19319](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=19319)）并且它还[不适用于 DSO](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=24420)。

# iphone - remove specific characters from NSString

> ID：12637899
> 
> 赞同：6
> 
> 时间：2012-09-28T10:05:59.293
> 
> 标签：iphone, ios, cocoa, nsstring

I wants to remove specific characters or group substring from NSString.

mean

NSString *str = @" **hello I am #39;doing Parsing So $#39;I get many symbols in &my response**";

I wants remove #39; and $#39; and & (Mostly these three strings comes in response)

**output should be :** hello I am doing Parsing So i get many symbols in my response

Side Question : I can't write & #39; without space here, because it converted in ' <-- this symbol. so i use $ in place of & in my question.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T10:10:02.700

您应该使用`[str stringByReplacingOccurrencesOfString:@"#39" withString:@""]` 还是需要替换具体格式的字符串，例如“#number”？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T10:34:43.693

试试下面的代码，我想你得到了你想要的任何东西，只需改变字符集，

```
NSString *string = @"hello I am #39;doing Parsing So $#39;I get many symbols in &my response";
NSCharacterSet *trim = [NSCharacterSet characterSetWithCharactersInString:@"#39;$&"];
NSString *result = [[string componentsSeparatedByCharactersInSet:trim] componentsJoinedByString:@""];
NSLog(@"%@", result); 
```

# wpf - 在 XAML 中的 ListView 内拉伸网格

> ID：12637902
> 
> 赞同：5
> 
> 时间：2012-09-28T10:06:22.727
> 
> 标签：wpf, xaml, winrt-xaml

我有一个`Grid`里面的`ListView`。如果我将 放在`Grid` *外面*，`ListView`它会正确拉伸以填满屏幕。如果我把它*放在里面*，`ListView`它不会。这是我的代码

```
 <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ListView HorizontalContentAlignment="Stretch">
        <ListViewItem>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition Width="60"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Grid.Row="0">Title</TextBlock>
                <TextBlock Grid.Column="0" Grid.Row="1">Text</TextBlock>
                <Button Grid.Column="1">Pin</Button>
            </Grid>
        </ListViewItem>            
    </ListView>
</Grid> 
```

我如何`Grid`让它伸展和填充`ListView`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T10:09:29.677

您可能需要将 的设置`HorizontalContentAlignment`为。`ListViewItem``Stretch`

# javascript - 列出当前用户可以使用 Google Drive API 编辑的文件

> ID：12637903
> 
> 赞同：2
> 
> 时间：2012-09-28T10:06:23.977
> 
> 标签：javascript, google-drive-api

我正在尝试在 Javascript 中使用 Google Drive API 来获取登录用户可以编辑的文件列表。我该怎么做呢？

我尝试使用文件/列表请求来获取默认情况下获取所有文件列表的文件列表： [https ://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)

该请求还接受搜索参数： [https ://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

例如，要搜索用户“test@example.org”可写的文件，请在 writers 中使用“test@example.org”

我需要能够说'[当前用户的电子邮件地址] in writers'或类似的东西才能工作，但我看不到任何以编程方式获取当前用户的电子邮件地址的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T22:07:02.917

应该能够通过如下查询来做到这一点：

```
'user@example.com' in owners or 'user@example.com' in writers 
```

这将返回当前用户拥有的文件或与他们共享的具有编辑权限的文件。

# java - java.lang.ClassCastException：org.primefaces.model.DefaultUploadedFile 不能转换为 java.io.File

> ID：12637905
> 
> 赞同：0
> 
> 时间：2012-09-28T10:06:34.073
> 
> 标签：java, jsf, primefaces

我正在使用 primefaces 上传文件组件一切正常：我需要检索上传的文件的问题：

```
public void handleFileUpload(FileUploadEvent event)  {
   selectedFile=(File) event.getFile();    
  } 
```

上传的文件具有 DefaultUploadedFile 类型类，但我需要 File 类类型。我尝试投射它，但出现投射错误，所以我找到了另一个解决方案，它使用 DefaultUploadedFile URI 创建文件

```
selectedFile=new File(Uri) 
```

但我找不到从中检索它的方法`event.getFile()`

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:17:33.520

我认为您不能将 ist 转换为`java.io.File`. 该`getFile()`方法返回的实例是类型的`UploadedFile`（与 java.io.File 完全无关）。但是，您可以使用该`getInputStream()`方法来检索`InputStream`和读取文件，如下所示：

```
UploadedFile file = event.getFile();
InputStream in = file.getInputStream();
// do something useful with the input stream... 
```

UploadedFile 接口提供了其他有用的方法来检查上传的文件。有关更多信息，请参阅：[http ://www.dzeek.net/javadoc/primefacesdocs/org/primefaces/model/UploadedFile.html](http://www.dzeek.net/javadoc/primefacesdocs/org/primefaces/model/UploadedFile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:16:26.383

在您的方法`InputStream`中，从`UploadedFile`. 并且从`InputStream`它很容易获得`File`。示例（[如何在 Java 中将 InputStream 转换为文件](http://www.mkyong.com/java/how-to-convert-inputstream-to-file-in-java/)）

```
public void handleFileUpload(FileUploadEvent event)  {        
    UploadedFile selectedFile = event.getFile();
    InputStream inputStream = selectedFile.getInputstream();    
    ...
} 
```

# c# - MVVM Light 4 RTM: Where are the templates?

> ID：12637906
> 
> 赞同：2
> 
> 时间：2012-09-28T10:06:34.200
> 
> 标签：c#, wpf, visual-studio-2010, mvvm-light

When I have installed the *MVVM Light v3.xx* in *Visual Studio 2010* I have many templates for creating MVVM projects.

But I need to do a clean install of *Visual Studio*, and in this ocasion I have installed the version *4 RTM* of *MVVM Light*, and I don't see any templates.

I notice that in the install wizard, There is templates for express edition of *Visual Studio*, but no to the Profesional Edition.

Is there no template in the new version of MVVM light?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:40:40.470

MVVM Light v4 更改为使用 VSIX 来安装模板。只需运行`C:/Program Files (x86)/Laurent Bugnion (GalaSoft)/Mvvm Light Toolkit/VSIX/MvvmLight.VS2010.vsix`，您就应该拥有模板。

还要确保您从以下链接下载：http: [//mvvmlight.codeplex.com/downloads/get/476364](http://mvvmlight.codeplex.com/downloads/get/476364)（我认为也有一个 VS2012-only 安装程序）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T19:01:33.017

我安装了 Visual Studio 2010 和 2012，也许这就是问题所在。但我不确定。

这就是我让它工作的方式：

1.  卸载 Visual Studio 2012
2.  卸载 MVVM 工具包
3.  安装 MVVM Toolkit 4.0（适用于 VS2010）
4.  执行`C:\Program Files (x86)\Laurent Bugnion (GalaSoft)\Mvvm Light Toolkit\Vsix\MvvmLight.VS2010.vsix`

之后，模板安装在 VS2010 中。

`4.`如果您像@RandomEngy's answer建议的那样执行文件（如果存在VS2010文件），也许就足够了。

# iphone - 我的网站在 ipad/iphone 上非常滞后，删除了 css 效果和 javascript

> ID：12637910
> 
> 赞同：2
> 
> 时间：2012-09-28T10:06:43.567
> 
> 标签：iphone, html, performance, ipad, sticky

我正在用相当多的 CSS 和一些 javascript 构建一个网站，但我在移动设备上的性能方面遇到了很多问题，尤其是在 ipad 和 iphone 上。

我尝试关闭 css 中的 box-shadow、text-shadow、radius 和 gradient 属性以及关闭所有 javascript，但它仍然严重滞后。关闭 javascript 并不能提高性能，尽管关闭这些 css 属性确实有所帮助。

更具体地说，当您尝试滚动并用手指松开时，滚动“粘”在您松开的位置。在较小的屏幕上放大和滚动也很糟糕，尤其是在 iphone 或 ipod 上。

确实感觉有些东西我忽略了。有什么线索吗？

*[我删除了该网站，但我的回答更详细地显示了潜在问题。缓慢的行为来自属性溢出：滚动]*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:09:23.900

运行 YSlow！测试。它给了我一些有趣的观点......

```
This page has 10 external Javascript scripts. Try combining them into one.
This page has 5 external stylesheets. Try combining them into one. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:23:31.037

```
overflow : scroll; 
```

是我的问题...

```
-webkit-overflow-scrolling: touch; 
```

添加这条线使滚动平滑。

最初我认为这是多个 div 堆叠在一起的问题，但后来我对其进行了更彻底的研究，发现这个网站更详细地解释了 iOS 触摸行为： [http ://remysharp.com/2012/05/24/问题与位置固定滚动在 ios/](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)

比我想象的更简单的解决方案。

**编辑：**
没那么快，现在我有一些元素的显示问题。再次研究并发现：[http ://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/](http://cantina.co/2012/03/06/ios-5-native-scrolling-grins-and-gothcas/)

这告诉我使用

```
-webkit-transform: translate3d(0,0,0); 
```

在所有相关元素上。
当我在我的一些元素上使用它时，这种方法很有效，但它又破坏了其他东西。现在，当我向下滚动时，页面大约需要 3 秒！加载以前不可见的内容...

我想这总比没有好，尽管它几乎感觉 Mobile Safari 是新的 Internet Explorer
将尝试找到另一个修复...

**edit2：**
我设法让它大部分工作。它仍然有一些显示问题（我的元素的主要背景仍然有 2-3 秒的加载问题），但至少我的其他元素是立即可见的。

我所做的是使用

```
-webkit-transform: translate3d(0,0,0); 
```

在我最上面的 (id #) 元素之一上，而不是文章中提到的所有相关元素与通用选择器 *{}

为了向后兼容滚动行为，他们提到了一个 polyfill，例如[overthrow](http://filamentgroup.github.com/Overthrow/)。

# android - 一个简单的绘图示例

> ID：12637911
> 
> 赞同：2
> 
> 时间：2012-09-28T10:06:49.437
> 
> 标签：android

这段代码应该在画东西，但是当我移动手指时它不会画任何东西。请帮我调试一下。

```
 @Override

  protected void onDraw(Canvas canvas) {
    canvas.drawPath(path, paint);
  }
  @Override
  public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();

    switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
        path.moveTo(eventX, eventY);
        return true;
      case MotionEvent.ACTION_MOVE:
        path.lineTo(eventX, eventY);
        break;
      case MotionEvent.ACTION_UP:
        // nothing to do 
        break;
      default:
        return false;
    }

    // Schedules a repaint.
    invalidate();
    return true;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:17:37.880

尝试这个

```
@Override

  protected void onDraw(Canvas canvas)
  {
    canvas.drawPath(path, paint);
  }
  @Override
  public boolean onTouchEvent(MotionEvent event) {
    float eventX = event.getX();
    float eventY = event.getY();

    switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
        path.moveTo(eventX, eventY);
        path.lineTo(eventX, eventY);
        return true;
      case MotionEvent.ACTION_MOVE:
        path.quadTo(eventX, eventY, (x + eventX)/2, (y + eventY)/2);
        break;
      case MotionEvent.ACTION_UP:
        canvas.drawPath(path, paint);
        // kill this so we don't double draw
     path.reset();
        break;
      default:
        return false;
    }

    // Schedules a repaint.
    invalidate();
    return true;
  }
} 
```

欲了解更多信息，请查看

[http://code.google.com/p/strokesformartians/source/browse/trunk/src/se/combitech/strokesformartians/drawing/FingerPaint.java?r=120](http://code.google.com/p/strokesformartians/source/browse/trunk/src/se/combitech/strokesformartians/drawing/FingerPaint.java?r=120)

这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:29:22.580

这是我的工作示例，您可以徒手绘制。

```
public class CanvasDrawingActivity extends  Activity   
{
    private ArrayList<Path> _graphics = new ArrayList<Path>();
    private Paint mPaint;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(new DrawingPanel(this));
        mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(0xFFFFFF00);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(3);

    }

    class DrawingPanel extends SurfaceView implements SurfaceHolder.Callback 
    {
        private DrawingThread _thread;
        private Path path;

        public DrawingPanel(Context context) 
        {
            super(context);
            getHolder().addCallback(this);
            _thread = new DrawingThread(getHolder(), this);
        }

        public boolean onTouchEvent(MotionEvent event) 
        {
            synchronized (_thread.getSurfaceHolder()) {
                if(event.getAction() == MotionEvent.ACTION_DOWN){
                    path = new Path();
                    path.moveTo(event.getX(), event.getY());
                    path.lineTo(event.getX(), event.getY());
                }else if(event.getAction() == MotionEvent.ACTION_MOVE){
                    path.lineTo(event.getX(), event.getY());
                }else if(event.getAction() == MotionEvent.ACTION_UP){
                    path.lineTo(event.getX(), event.getY());
                    _graphics.add(path);
                }

                return true;
            }
        }

        @Override
        public void onDraw(Canvas canvas) {
            for (Path path : _graphics) {
                //canvas.drawPoint(graphic.x, graphic.y, mPaint);
                canvas.drawPath(path, mPaint);
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                                   int height) {
            // TODO Auto-generated method stub

        }

        public void surfaceCreated(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            _thread.setRunning(true);
            _thread.start();
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // TODO Auto-generated method stub
            boolean retry = true;
            _thread.setRunning(false);
            while (retry) {
                try {
                    _thread.join();
                    retry = false;
                } catch (InterruptedException e) {
                    // we will try it again and again...
                }
            }
        }
    }

    class DrawingThread extends Thread {
        private SurfaceHolder _surfaceHolder;
        private DrawingPanel _panel;
        private boolean _run = false;

        public DrawingThread(SurfaceHolder surfaceHolder, DrawingPanel panel) {
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        public SurfaceHolder getSurfaceHolder() {
            return _surfaceHolder;
        }

        @Override
        public void run() {
            Canvas c;
            while (_run) {
                c = null;
                try {
                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder) {
                        _panel.onDraw(c);
                    }
                } finally {
                    // do this in a finally so that if an exception is thrown
                    // during the above, we don't leave the Surface in an
                    // inconsistent state
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }
} 
```

输出将如下所示，

> ![在此处输入图像描述](../Images/206415f84bcfc6e901254bf30a038c79.png)

# python - 如何在 Python 中检测 staticmethod/classmethod 的被调用者类？

> ID：12637913
> 
> 赞同：2
> 
> 时间：2012-09-28T10:06:54.547
> 
> 标签：python, class-method

我在这里发现了类似的问题，但我的问题有点不同......我在 MyUtil 类中有 log() 函数作为 staticmethod：

```
class MyUtil(object):

    @staticmethod
    def log(message, level):
    ... 
```

但现在我必须知道这个静态方法是从哪个类/对象调用的？例如：

```
class Deployer(object):

    def deploy(self):
        ...
        MyUtil.log ("Starting deployment", "info")
        ... 
```

是否可以从 MyUtil.log 函数中获取并记录这个“Deployer”类名？

（我知道这是非常不面向对象的，并且在编写良好的程序中可能永远不会有用，但无论如何......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:28:07.650

您是否考虑编写类似实现的日志记录模块。像下面这样的东西

制作一个单独的 Logger 类。当您需要一个记录器对象时，调用 Logger.get_logger(your_class_name)。此方法要么创建一个新的记录器并将其返回，要么返回已为该特定记录器名称创建的记录器。然后使用这个记录器。

这样，您可以随时使用标准记录器更改您自己的记录器。开发人员将熟悉您使用的方法。

```
logger = Logger.get_logger(Deployer.__class__.__name__)
logger.info("Starting deployment") 
```

这是一个非常简单的记录器实现。

```
"""
Sample logger implementation
"""
import datetime

class Logger:
    """
    Main logger class
    """
    _cached_loggers = dict()

    def __init__(self, logger_name):
        self.name = logger_name
        self._cached_loggers[logger_name] = self

    @classmethod
    def get_logger(cls, logger_name):
        """
        Return a new logger or already existed one
        """
        if logger_name in cls._cached_loggers:
            logger = cls._cached_loggers[logger_name]
        else:
            logger = Logger(logger_name)
        return logger

    def info(self, msg):
        """
        logging info logs
        """
        print u"{0} - {1} - {2}".format(self.name,
                                        datetime.datetime.now(),
                                        unicode(msg)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:33:22.063

这不是最好的设计，日志记录是一个具有所有缺点的“单例”，但如果您愿意接受这一点，那么可以为您的问题提供一些语言支持。您可以通过检查堆栈来获取调用者：

```
import inspect

class MyUtil(object):
    @staticmethod
    def log(message, level):
        frame, module, line, function, context, index = inspect.stack()[1]
        self_name = frame.f_code.co_varnames[0]  # Name of the first argument (usually 'self')
        instance = frame.f_locals[self_name]
        class_name = instance.__class__.__name__
        print class_name

class Deployer(object):
    def deploy(self):
        MyUtil.log ("Starting deployment", "info")

Deployer().deploy() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:10:06.590

如您所知，Python 中的所有内容都是 Object.. 所以，您实际上可以将`Class Object`作为参数传递给您的方法..

因此，您可以像这样更改方法定义：-

```
class MyUtil(object):

    @staticmethod
    def log(message, level, ClassName): 
```

并将调用类的对象传递给此方法：-

```
class Deployer(object):

    def deploy(self):
        ...
        MyUtil.log ("Starting deployment", "info", Deployer) 
```

# spring - 已登录用户的 Spring 安全重定向问题

> ID：12637915
> 
> 赞同：1
> 
> 时间：2012-09-28T10:07:01.790
> 
> 标签：spring, gwt, spring-security

在使用我的基于 GWT 的 Web 应用程序实现 spring 安全性时。我找到。一切都按预期工作正常，除了以下事实：

我打开 login.jsp 并提供了我的有效用户登录凭据。提交后，成功重定向到首页。现在，当我在地址栏中编辑 login.jsp 的 URL 时......令人惊讶的是，它允许打开我的 login.jsp，但据我所知......它不应该允许回到 login.jsp，除非我我已登录。

可能是我的 security-context.xml 文件没有正确配置。

下面是我的 security-application-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- - Sample namespace-based configuration - -->

<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-2.0.4.xsd">

    <global-method-security secured-annotations="enabled">
    </global-method-security>

    <beans:bean id="customAuthenticationProcessingFilter"
        class="edu.authentication.CustomAuthenticationProcessingFilter">
        <custom-filter position="AUTHENTICATION_PROCESSING_FILTER" />
        <beans:property name="defaultTargetUrl" value="/Home.html?gwt.codesvr=127.0.0.1:9997" />
        <beans:property name="authenticationFailureUrl" value="/login.jsp?login_error=1" /> 
        <beans:property name="authenticationManager" ref="authenticationManager" />
    </beans:bean>

    <beans:bean id="authenticationProcessingFilterEntryPoint"
        class="org.springframework.security.ui.webapp.AuthenticationProcessingFilterEntryPoint">
        <beans:property name="loginFormUrl" value="/login.jsp" />
        <beans:property name="forceHttps" value="false" />
    </beans:bean>

    <beans:bean id="customUserDetailsService"
        class="edu.authentication.CustomUserDetailsService">
        <beans:property name="urmService" ref="urmService" />
    </beans:bean>

    <http auto-config="false" entry-point-ref="authenticationProcessingFilterEntryPoint">

    <intercept-url pattern="/login.jsp*" filters="none" />
        <intercept-url pattern="/forgot_password.jsp*" filters="none" />
        <intercept-url pattern="/forgotPasswordServlet.do*" filters="none" />

    <intercept-url pattern="/myApp/**" access="IS_AUTHENTICATED_FULLY"/>
        <intercept-url pattern="/gwt/**" access="IS_AUTHENTICATED_FULLY"/>
        <intercept-url pattern="/*.html" access="IS_AUTHENTICATED_FULLY"/>

    <logout logout-url="/j_spring_security_logout"
            invalidate-session="true" logout-success-url="/login.jsp?loggedout=true"/>
    </http>

    <authentication-manager alias="authenticationManager" />

    <authentication-provider user-service-ref="customUserDetailsService">
        <password-encoder hash="md5" />
    </authentication-provider>

</beans:beans> 
```

任何帮助/建议都将非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T12:25:50.683

Spring Security 没有内置任何东西来阻止您在登录后查看登录页面。您可以通过在登录页面顶部添加以下代码来阻止登录页面。

```
<%@ taglib prefix='sec' uri='http://www.springframework.org/security/tags' %>
<sec:authorize ifNotGranted="ROLE_ANONYMOUS">
  <% response.sendRedirect("/mainpage.jsp"); %>
</sec:authorize> 
```

逻辑是如果用户没有登录，Spring Security 会为他们创建一个匿名的 Authentication 对象，并为他们提供 ROLE_ANONYMOUS 的角色。因此，您只需检查用户是否具有该角色，如果没有，您可以假设他们已登录并将他们重定向到应用程序的主页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:13:52.243

或者，您可以创建一个 Servlet 过滤器：

```
public class LoginPageFilter implements Filter
{
   public void init(FilterConfig filterConfig) throws ServletException   {
   }

   public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse,   FilterChain filterChain) throws IOException, ServletException
   {
       HttpServletRequest request = (HttpServletRequest) servletRequest;
       HttpServletResponse response = (HttpServletResponse) servletResponse;

       if(request.getUserPrincipal() != null){ //If user is already authenticated
           response.sendRedirect("");// or, forward using RequestDispatcher
       } else{
           filterChain.doFilter(servletRequest, servletResponse);
       }
   }

   public void destroy() {
   }
} 
```

网页.xml：

LoginPageFilter com.xxx.xx.LoginPageFilter

```
<filter-mapping>
    <filter-name>LoginPageFilter</filter-name>
    <url-pattern>/login</url-pattern>
</filter-mapping> 
```

# android - GridView 的自动滚动

> ID：12637920
> 
> 赞同：2
> 
> 时间：2012-09-28T10:07:16.480
> 
> 标签：android

我对我的应用程序有一个要求，并且要求指出：

当 的`View`被`GridView`填充并且`view`向下移动时，垂直滚动应自动向下滚动以显示新加载的图像。我尝试使用：

```
gridView.smoothScrollToPosition(position); 
gridView.setSelection(position); 
```

但是在使用它们时，我的应用程序崩溃了。如何为 a 启用自动垂直滚动`GridView`？帮帮我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:28:50.023

您将不得不使用 Instrumentation Library 来滚动 gridview。它为您提供了 TouchUtils，您可以在其中覆盖拖动功能并在视图上执行滚动。Robotium 是一个专门为此目的设计的免费库。

[http://code.google.com/p/robotium/](http://code.google.com/p/robotium/)

请参阅链接及其教程。一旦你弄脏了你的手，你就可以把它带到一个新的水平。还有很多人使用robotium，所以你会发现很多资源来指导你。

# wcf - 找不到“System.IdentityModel.Tokens.UserNameSecurityToken”令牌类型的令牌身份验证器。

> ID：12637921
> 
> 赞同：3
> 
> 时间：2012-09-28T10:07:17.993
> 
> 标签：wcf, wcf-binding, wcf-security

我正在尝试让第三方 Java 客户端与我编写的 WCF 服务进行通信。

收到消息时出现以下异常：

> 找不到“System.IdentityModel.Tokens.UserNameSecurityToken”令牌类型的令牌身份验证器。根据当前的安全设置，不能接受该类型的令牌。

这是我的配置：

捆绑

```
<customBinding>
    <binding name="TestSecureBinding">
        <security authenticationMode="MutualCertificate" />
        <textMessageEncoding messageVersion="Soap11WSAddressing10" />
        <httpsTransport requireClientCertificate="true" maxReceivedMessageSize="5242880" />
    </binding>
</customBinding> 
```

行为：

```
 <serviceBehaviors>
    <behavior name="TestCertificateBehavior">
      <serviceCredentials>
        <clientCertificate>
          <certificate storeLocation="LocalMachine" x509FindType="FindBySubjectName" findValue="Test 01"/>
          <authentication certificateValidationMode="PeerTrust" trustedStoreLocation="LocalMachine" revocationMode="NoCheck"/>
        </clientCertificate>
        <serviceCertificate storeLocation="LocalMachine" x509FindType="FindBySubjectName" findValue="Test 01"/>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors> 
```

端点：

```
 <service name="TestService"
           behaviorConfiguration="TestCertificateBehavior">
    <endpoint
      name="TestEndpoint"
      address="https://localhost:443"
      contract="TestServiceContract"
      binding="customBinding"
      bindingConfiguration="TestSecureBinding">
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="https://localhost:443" />
      </baseAddresses>
    </host>

  </service> 
```

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T12:47:01.190

这是因为在某处使用了错误的引用证书的方式，如果我没记错的话，您可以直接引用证书或使用密钥标识符 - 无论如何，要超越它，您应该能够将 allowSerializedSigningTokenOnReply 标签添加到您的安全性在您的客户端绑定配置上标记并将其设置为 true。

这对你来说*应该*超越它 - 记住，把这个客户端

抱歉，我找不到参考资料——我记得在某处读过它，现在找不到了！:( ****编辑这里是**** - [http://webservices20.blogspot.co.uk/2010/10/wcf-cannot-find-token-authenticator.html](http://webservices20.blogspot.co.uk/2010/10/wcf-cannot-find-token-authenticator.html)

```
<customBinding>  
<binding name="TestSecureBinding"> 
        <security allowSerializedSigningTokenOnReply="true" /> 
        etc
    </binding> 
<customBinding> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T14:26:26.553

我已经接受我不能在配置文件中执行此操作，并已诉诸在代码中创建服务主机。

这是创建绑定、绑定元素和创建服务主机的完整示例。

请注意，您可能没有使用`WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005W`- 您使用的版本可能比我必须使用的更新 - 但只需将其替换为您服务的正确版本。

```
var securityBindingElement = (AsymmetricSecurityBindingElement)SecurityBindingElement.CreateMutualCertificateBindingElement(MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10);
securityBindingElement.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());
securityBindingElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
securityBindingElement.IncludeTimestamp = true;
securityBindingElement.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.EncryptBeforeSign;

var customBinding = new CustomBinding();
customBinding.Elements.Add(securityBindingElement);
customBinding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11WSAddressing10, Encoding.UTF8));
customBinding.Elements.Add(new HttpsTransportBindingElement() { MaxReceivedMessageSize = 5242880 });

ServiceHost customServiceHost = new ServiceHost(type);
customServiceHost.AddServiceEndpoint(typeof(ITestServiceContract), customBinding, "https://localhost:443");
customServiceHost.Open(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T23:35:36.317

确保检查您的客户端正在调用的端点地址。我们为此挣扎了太久，直到我们意识到自定义绑定地址附录中有错字。

# c++ - 我可以在 python 类中使用 C++ 类作为超类吗

> ID：12637923
> 
> 赞同：9
> 
> 时间：2012-09-28T10:07:32.480
> 
> 标签：c++, python

> **可能重复：**
> [如何在 Python 中使用 C++ 类？](https://stackoverflow.com/questions/602580/how-can-i-use-c-class-in-python)

我正在用 python 设计一个软件，但是在用 python 实现它时遇到了一些内存问题，所以我打算用 C++ 扩展我的软件。所以我在想**我可以使用 C++ 定义的类并在 python 中将它用作超类并覆盖它的一些方法吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T11:49:05.660

答案是肯定的。

您可以使用[boost.python](http://wiki.python.org/moin/boost.python)**继承**和**扩展**该类。请看一下 [如何](http://wiki.python.org/moin/boost.python/Inheritance)做到这一点。

但是，要**覆盖**基 C++ 类的方法有点复杂，请查看有关该主题的[这篇](http://wiki.python.org/moin/boost.python/OverridableVirtualFunctions)文章。

另外，如果可能的话，我会考虑如何避免使用继承并使用包装器代替您的 C++ 类。

# asp.net - 如何删除 Div 中的子控件

> ID：12637927
> 
> 赞同：0
> 
> 时间：2012-09-28T10:07:54.390
> 
> 标签：asp.net, html

我有一个应用程序发送关于特定用户操作的电子邮件。在应用程序中有一个带有 Div 元素的页面，如下所示 -

```
 <div id="divResultados" runat="Server" visible="true">
       <asp:TextBox ID="firstName" runat="server"></asp:TextBox>
       <asp:TextBox ID="lastName" runat="server"></asp:TextBox>
       <asp:Calendar ID="calDOB" runat="server"></asp:Calendar>
           <asp:Button ID="Button1" runat="server" OnClientClick="return Message()" onclick="Button1_Click" Text="Button" />
    </div> 
```

在发送电子邮件时，我`InnerHtml`从元素中提取文本`Div`并将其设置在电子邮件正文中。该程序运行良好，除了一个问题 - 接收者在可扩展模式下收到带有日历控件的电子邮件。我的客户不能接受这种行为，并且日历控件不应导出到电子邮件正文中。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:21:50.353

在您的按钮单击事件上隐藏日历控件，然后发送电子邮件：

```
calDOB.Visible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:18:23.127

使用 jQuery：

您可以通过设置其**显示隐藏日历：无；**点击 Button1：

```
$(function(){
  $("#<%=Button1.ClientID%>").on("click", function(){
    $("#<%=calDOB.ClientID%>").hide();
  });
}); 
```

# javascript - 使用 d3.geo.mercator 的气泡图

> ID：12637937
> 
> 赞同：1
> 
> 时间：2012-09-28T10:08:32.443
> 
> 标签：javascript, map, d3.js, geo, bubble-chart

我完全是 D3.js n00b，所以如果这最终有一个我完全错过的超级简单的解决方案，我深表歉意。无论如何，我正在尝试在世界地图上创建一个气泡图。它将类似于[符号地图](https://github.com/mbostock/d3/tree/master/examples/symbol-map)，但使用 d3.geo.mercator 而不是 d3.geo.albersUsa。我正在使用 world-countries.json 文件并创建了自己的 world-country-centroids.json 文件。有任何想法吗？这是代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Countries of the World</title>
    <script type="text/javascript" src="../../d3.v2.js"></script>
    <style type="text/css">

svg {
  width: 960px;
  height: 500px;
}

#countries path, #country-centroids circle {
  fill: #ccc;
  stroke: #fff;
  stroke-width: 1.5px;
}

#country-centroids circle {
  fill: steelblue;
  fill-opacity: .8;
}

    </style>
  </head>
  <body>
    <script type="text/javascript">

// The radius scale for the centroids
var r = d3.scale.sqrt()
    .domain([0, 1e6])
    .range([0, 10]);

// World Map Projection
var xy = d3.geo.mercator(),
    path = d3.geo.path().projection(xy);

var svg = d3.select("body").append("svg");
svg.append("g").attr("id", "countries");
svg.append("g").attr("id", "country-centroids");

d3.json("../data/world-countries.json", function(collection) {
  svg.select("#countries")
    .selectAll("path")
      .data(collection.features)
    .enter().append("path")
      .attr("d", d3.geo.path().projection(xy));
});

d3.json("../data/world-country-centroids.json", function(collection) {
  svg.select("#country-centroids")
    .selectAll("circle")
      .data(collection.features
      .sort(function(a, b) { return b.properties.population - a.properties.population; }))
    .enter().append("circle")
      .attr("transform", function(d) { return "translate(" + xy(d.geometry.coordinates) + ")"; })
      .attr("r", 0)
    .transition()
      .duration(1000)
      .delay(function(d, i) { return i * 50; })
      .attr("r", function(d) { return r(d.properties.population); });
});

    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T14:57:45.370

您需要在 SVG 元素上设置`width`和`height`属性才能使其可见。不幸的是，这些属性不能通过样式属性设置，因为它们除了定义 SVG 元素的显示大小之外，还定义了 SVG 的坐标系。

```
var svg = d3.select("body").append("svg") 
    .attr("width", 960)
    .attr("height", 500); 
```

如果要重新缩放 SVG 元素（即，以不同于其原始大小的大小显示它），*除了*属性之外，您还可以使用样式属性，但您仍然需要设置属性。

# php - Symfony2 将另一个动作中的一个动作的响应返回给 JavaScript

> ID：12637938
> 
> 赞同：1
> 
> 时间：2012-09-28T10:08:33.657
> 
> 标签：php, javascript, forms, symfony, entity

在我的应用程序中，我有一个功能需要在更新操作上重新加载整个表单。我以为我可以对特殊操作发出 AJAX 请求，并在该操作中调用生成表单但基于不同参数的原始操作。

如何使用不同操作的 HTML 输出响应 JavaScript 请求？

我试过这样的事情：

```
if ($request->isXmlHttpRequest()) {
    return $this->editPageContentAction($responseObjects[0]->getId());
} 
```

但它不起作用（控制器必须返回响应）。

描述我想要实现的最简单的方法是：

*   我有一个表单，它使用选择“从另一个实体复制内容”和其他实体列表来编辑实体
*   当用户选择另一个实体时，我想用 AJAX 重新加载我当前打开但填充了所选实体的表单
*   我不想重定向用户以使用选定的实体编辑实体表单，我只想用现有实体的数据预填充新的实体表单，所以我虽然可以使用已经存在的操作来编辑这个实体。
*   Javascript 函数只会用新形式更新 html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:20:24.643

```
if ($request->isXmlHttpRequest()) {
    return new Response($this->editPageContentAction($responseObjects[0]->getId()));
} 
```

当您的 editPageContentAction 方法返回 html 输出时。

# mysql - 如何使用一条 SQL 语句删除 MySQL 数据库中的所有触发器？

> ID：12637945
> 
> 赞同：38
> 
> 时间：2012-09-28T10:08:53.050
> 
> 标签：mysql, triggers

我有一个已克隆的数据库，现在所有日志记录触发器都指向原始模式中的日志表。我需要一次性删除所有这些（有几十个），以便我可以重新创建它们。如何用一个命令来完成？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2015-05-20T03:48:01.390

```
SELECT Concat('DROP TRIGGER ', Trigger_Name, ';') FROM  information_schema.TRIGGERS WHERE TRIGGER_SCHEMA = 'your_schema'; 
```

复制并粘贴生成的sql

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-02-13T20:42:00.440

这是一个老问题，但由于它是在我的搜索中不断出现的问题，我想我会在这里发布一个解决方案。在我的情况下，我需要创建一个完整的文件，`mysqldump`然后删除所有触发器，然后重新添加它们。`DROP TRIGGER`在附加触发器的转储之前，我可以通过使用以下命令将语句附加到我的转储中来做到这一点。

```
mysql -u [db user] -p[db password] --skip-column-names [db name] -e 'SHOW TRIGGERS;' | cut -f1 | sed -r 's/(.*)/DROP TRIGGER IF EXISTS \1;/' >> dump.sql 
```

要在同一命令中实际删除所有触发器（正如@Stephen Crosby 在评论中提到的那样），您可以像这样将其通过管道传回 MySQL：

```
mysql -u [db user] -p[db password] --skip-column-names [db name] -e 'SHOW TRIGGERS;' | cut -f1 | sed -r 's/(.*)/DROP TRIGGER IF EXISTS \1;/' | mysql -u [db user] -p[db password] [db name] 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-05-06T11:39:56.157

不幸的是，这在常规 SQL 语句或存储过程中是不可能的。

**解决方案**

删除所有触发器的最简单解决方案可能是 bash 脚本：

```
echo "select concat('drop trigger ', trigger_name, ';')
  from information_schema.triggers where trigger_schema = 'your_database'" |
  mysql --defaults-extra-file=.mysql.conf --disable-column-names | 
  mysql --defaults-extra-file=.mysql.conf 
```

这需要一个凭证文件 ( `.mysql.conf`)，如下所示：

```
[client]
database=your_database
user=your_username
password=your_password 
```

**推理**

尝试从存储过程中删除触发器将失败。我猜这是因为变量只能保存一个字符串并且`drop trigger`需要一个触发器名称（不是包含触发器名称的字符串）：

```
create procedure drop_a_trigger()
begin
  declare var1 varchar(1024);
  set var1 = "my_second_trigger";

  drop trigger my_first_trigger;       // OK
  drop trigger address_update_before;  // ERROR 1360 (HY000): Trigger does not exist

end //
delimiter ;

call drop_a_trigger(); 
```

MySQL 论坛上有两个关于此的主题：

*   [存储过程中的删除语句](http://forums.mysql.com/read.php?98,304699,304699#msg-304699)
*   [如何在存储过程中删除触发器？](http://forums.mysql.com/read.php?98,429347,429347)

他们都得出了相同的结论，即即使使用存储过程也无济于事。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-21T17:52:37.570

使用一条 SQL 语句无法删除 MySQL 数据库中的所有触发器。

但是使用以下 SQL 代码，您可以构建所有“DROP TRIGGER”语句的列表（**将*<your_schema>*替换为您的架构名称，例如您的数据库名称**）：

```
-- set `group_concat_max_len`
SET @@session.group_concat_max_len = @@global.max_allowed_packet;

-- select all the triggers and build the `DROP TRIGGER` SQL
-- replace <your_schema> with your schema name (e.g. your database name)
SELECT GROUP_CONCAT(sql_string SEPARATOR '\n')
FROM (
    SELECT CONCAT('DROP TRIGGER IF EXISTS `', TRIGGER_NAME, '`;') AS sql_string,'1'
    FROM information_schema.TRIGGERS WHERE TRIGGER_SCHEMA = '<your_schema>'
    ) AS sql_strings
GROUP BY '1'; 
```

上一个查询的结果将产生如下内容：

```
DROP TRIGGER IF EXISTS `trigger1`;
DROP TRIGGER IF EXISTS `trigger2`;
(...) 
```

并且您可以使用这些 SQL 语句最终删除所有触发器。

服务器系统变量[group_concat_max_len](https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_group_concat_max_len)是 GROUP_CONCAT() 函数的最大允许结果长度（以字节为单位）。因为默认是 1024，所以如果我们有很多触发器，我们需要增加它以避免截断结果。我只是使用了服务器系统变量[max_allowed_pa​​cket](https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_max_allowed_packet)的值，但通常任何大整数都可以。请参阅[另一个问题](https://stackoverflow.com/questions/529105/trouble-with-concat-and-longtext)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-18T08:26:20.197

```
SELECT Trigger_Name
FROM `information_schema`.`TRIGGERS`
WHERE TRIGGER_SCHEMA = 'your_schema'; 
```

将结果复制到剪贴板

使用 ^ 和 S 标记为每个触发器转换`Trigger_name`为`DROP TRIGGER <trigger_name>;`reg.expressions 的开始和结束

作为 sql 脚本运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T11:12:39.660

不确定是否存在用于此目的的单个命令。

但这是我前段时间的做法

1.  编写脚本以获取数据库中的触发器列表。
2.  在 dropTrigger.sql 文件中创建连接列表
3.  运行 dropTrigger.SQL 文件

要获取触发器列表，您可以[在信息模式中使用](http://dev.mysql.com/doc/refman/5.6/en/triggers-table.html)[SHOW 触发器](http://dev.mysql.com/doc/refman/5.6/en/show-triggers.html)或 触发器表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-07T14:36:05.690

**使用 MAMP 的 MAC：**

需要对我们接受的答案进行一些小的调整。首先，我们需要在 MAMP 中定位 mysql。其次，`sed -r`不适用于Mac，请`sed -E`改用。假设标准 MAMP 设置，*不更改 root 用户默认值*，只需将 [db name] 替换为您的 db，然后复制并粘贴到终端并按 Enter。

```
/Applications/MAMP/Library/bin/mysql -u root -proot --skip-column-names [db name] -e 'SHOW TRIGGERS;' | cut -f1 | sed -E 's/(.*)/DROP TRIGGER IF EXISTS \1;/' | /Applications/MAMP/Library/bin/mysql -u root -proot [db name] 
```

（如果您已更新您的 root 密码，只需将“root”`-p`替换为您的密码即可

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-18T00:49:48.483

如果您想使用查询删除它们而不需要将数据库 sqldump 到文件中：

`select concat('drop trigger ', trigger_name, ';') from information_schema.triggers where trigger_schema = 'your_schema';` 然后，您需要导出结果（我发现 CSV 最简单）并在这些结果中运行查询。

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-09-28T11:48:16.327

快速回答是“不”。

但是您可以将逻辑封装在一个存储过程中：使用动态 SQL 循环获取所有触发器并删除所有触发器。

之后你可以执行：`call delete_all_triggers_api(schema_name);`

# html - 链接、vlink 和 alink 的新结构？

> ID：12637946
> 
> 赞同：0
> 
> 时间：2012-09-28T10:08:54.680
> 
> 标签：html

我的代码中有这个通用语句

```
<body link="#FFFF00" vlink="#FFFF00" alink="#FFFF00"> 
```

Web Expression 4 突出显示代码并显示一条消息“万维网联盟现在认为属性已过时。建议使用较新的构造。

不幸的是，它没有给我更多信息。

我需要什么代码才能使其保持最新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:11:59.280

您不应该在 HTML 的结构中嵌入样式 - 这就是您收到消息的原因。很长一段时间以来，文档结构和外观之间的分离被认为是一件好事 - 样式进入 CSS。

要解决此问题，请使用 CSS。

对于链接，您应该`a`使用伪类为元素设置样式`link`，`visited`和`active`：

```
a:link, a:visited, a:active {
    color: #FFFF00;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:42:55.023

这些属性仍然以与以前相同的方式工作。用 CSS 替换它们将是微不足道的，但不会改变任何东西（除非在相对罕见的情况下禁用 CSS - 然后将使用默认链接颜色）。

例如，如果您想为页面上的不同链接使用不同的颜色，则使用 CSS 会很有用。

代码的主要问题不是您设置链接颜色的方式，而是将它们设置为相同的颜色以及通常不被认为指示链接的颜色。

# ravendb - RavenDB：将自动增量添加到 ID 以外的其他属性

> ID：12637947
> 
> 赞同：2
> 
> 时间：2012-09-28T10:08:56.713
> 
> 标签：ravendb, auto-increment

有没有办法在属性上放置一个属性来告诉 RavenDB 使用这个属性，就像 ID 属性一样，并在它上面放置一个自动增量？

伪代码：

```
public class MyObj {
    public string Id { get; set; }
    [Increment]
    public int OtherProp { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:33:46.500

[Dynamicus 指出了正确的解决方案](https://stackoverflow.com/a/12643740/2429)，但**我想提供准确的示例代码**来帮助其他 Stackoverflow 用户，并可能使解决方案更易于搜索。

关于问题的示例代码，这是解决方案：

```
public class OtherPropIncrementListener : IDocumentStoreListener
{
    HiLoKeyGenerator _generator;
    IDocumentStore _store;

    public OtherPropIncrementListener(IDocumentStore store)
    {
        this._store = store;
        _generator = new HiLoKeyGenerator(store.DatabaseCommands, "MyObjs", 1);
    }

    public void AfterStore(string key, object entityInstance, RavenJObject metadata)
    {
    }

    public bool BeforeStore(string key, object entityInstance, RavenJObject metadata, RavenJObject original)
    {
        var myObj = entityInstance as MyObj;
        if(myObj != null && myObj.OtherProp == 0)
        {
            string documentKey = _generator.GenerateDocumentKey(_store.Conventions, entityInstance);
            myObj.OtherProp = int.Parse(documentKey.Substring(documentKey.IndexOf("/") + 1));
            return true;
        }

        return false;
    }
} 
```

然后在初始化之后`DocumentStore`添加此代码以使上述侦听器工作：

```
documentStore.RegisterListener(new OtherPropIncrementListener(documentStore)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:20:38.287

您可以在 RavenDB 谷歌群组中找到答案。 [https://groups.google.com/forum/#!msg/ravendb/70xaVjoMidU/ssDs4mbKoxQJ](https://groups.google.com/forum/#!msg/ravendb/70xaVjoMidU/ssDs4mbKoxQJ)

# c# - Excel转pdf，图像质量差？

> ID：12637948
> 
> 赞同：2
> 
> 时间：2012-09-28T10:08:56.787
> 
> 标签：c#, excel

好的，我有带有图片的 Excel（来自 Excel 2010 工作簿模板）工作表，当我将此工作表导出为 pdf 时，图像质量非常差。文字很好，但图像一点也不。

我使用此代码将 excel 导出为 pdf：

```
xlSS.ExportAsFixedFormat(
    XlFixedFormatType.xlTypePDF, 
    path, 
    XlFixedFormatQuality.xlQualityStandard); 
```

有没有更好的方法将 .xlsx/.xls 保存（导出）到 .pdf，这样我就可以获得很好的图像质量？

这是比较，第一个是提取到pdf时：

![在此处输入图像描述](../Images/7163e543978d20dcb1558e252da45b84.png)

![在此处输入图像描述](../Images/40bc8d721b65702033411135a691bb16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:44:09.260

解决了。解决方案是在将图片插入纸张后，您必须调整其大小，否则会降低质量。

我已经这样做了，即使将工作表导出为 pdf 文件也能保持图像质量。

# android - 在多个活动中实现片段的接口

> ID：12637951
> 
> 赞同：0
> 
> 时间：2012-09-28T10:09:04.860
> 
> 标签：android

好的，所以我有一个具有片段 A 的活动 A，以及具有片段 B 的活动 B。活动 A 是主屏幕（如登录屏幕）。现在在片段 B 中，我尝试做一些工作，当会话过期时，我发送一条消息，注销并返回主屏幕 A。

现在片段 B 有一个接口，用于与 Activity B 进行通信以实现其他不同的功能。我的活动 A 是否应该为此注销会话实现片段 B 的相同接口，还是有更好的方法？

插图：

```
public class fragmentB extends Fragment {

    public interface FragmentBProgressListener {
        public void onShowDataDialog();
        public void onRemoveData();
        public void onSessionError(String errordata);
    }

   //or should i have another interface that implements this only in activity A 

} 
```

活动 B：

```
public class ActivityB extends Activity implements FragmentBProgressListener {

    public void onShowDataDialog(){

      }

     public void onRemoveData(){

    }

    public void onSessionError(String errordata){
          // finish Activity here
   }

} 
```

活动一：

```
public class ActivityA extends Activity implements FragmentAListener, FragmentBFragmentBProgressListener {

     public void onFragA(){

   }

     public void onShowDataDialog(){

      }

     public void onRemoveData(){

    }

    public void onSessionError(String errordata){
          // show error dialog here from fragment B
   }
} 
```

这是一个好方法吗？我应该注意的任何陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:07:38.163

> 我的活动 A 是否应该为此注销会话实现片段 B 的相同接口，还是有更好的方法？

您总是可以将`onSessionError()`方法拆分到另一个接口中。

# android - 如何在android中检测颠倒方向？

> ID：12637954
> 
> 赞同：6
> 
> 时间：2012-09-28T10:09:11.620
> 
> 标签：android, android-sensors, android-orientation

在我的 android 应用程序中，我有全景图像，我正在使用 TYPE_ORIENTATION 传感器根据手机运动旋转此图像，它适用于横向和纵向。这是旋转逻辑的代码。

```
@Override
public void onSensorChanged(SensorEvent event) {
  switch (event.sensor.getType()) {
  case Sensor.TYPE_ORIENTATION:

    float[] insideval = getValPoints();
    event.values[1]=(float) (event.values[1]*2.8);
    event.values[2]=(float) (event.values[2]*2.8);
    setValPoints(event.values.clone());
        if (insideval != null) {
            float check= insideval[0] - event.values[0];            
            if (-1<=check && check <=1) {
                //Animation stoped      
                this.stopAnimation();
            }else{
                if (getdefaltDeviceOrientation() == ORENTATION_LANDSCAPE) {
                     // Natural Orientation is landscape
                      if (getcurrentDeviceOrientation() == 1) {
                        //ORIENTATION_PORTRAIT
                        startPoint = CGPoint.CGPointMake(insideval[2], insideval[1]);
                                if (insideval[0] < event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[2]+ event.values[2], insideval[1]);
                                } else if (insideval[0] > event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[2]- event.values[2], insideval[1]);
                                }
                            } else if (getcurrentDeviceOrientation() == 2) {
                                //Log.i(TAG, "ORIENTATION_LANDSCAPE");
                                startPoint = CGPoint.CGPointMake(insideval[1], insideval[2]);
                                if (insideval[0] < event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[1]- event.values[1], insideval[2]);
                                } else if (insideval[0] > event.values[0]) {
                                    endPoint = CGPoint.CGPointMake( insideval[1]+event.values[1] ,insideval[2]);                    
                                }
                            }
                        } else if (getdefaltDeviceOrientation() == ORENTATION_PROTRAIT) {
                            // Natural Orientation is portrait

                            if (getcurrentDeviceOrientation() == 1) {
                                //Log.i(TAG, "ORIENTATION_PORTRAIT");
                                startPoint = CGPoint.CGPointMake(insideval[1], insideval[2]);
                                if (insideval[0] < event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[1]+ event.values[1], insideval[2]);
                                } else if (insideval[0] > event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[1]- event.values[1], insideval[2]);
                                }
                            } else if (getcurrentDeviceOrientation() == 2) {
                                //Log.i(TAG, "ORIENTATION_LANDSCAPE");
                                startPoint = CGPoint.CGPointMake(insideval[2], insideval[1]);
                                if (insideval[0] < event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[2]- event.values[2], insideval[1]);
                                } else if (insideval[0] > event.values[0]) {
                                    endPoint = CGPoint.CGPointMake(insideval[2]+event.values[2],insideval[1]);
                                }
                            }
                        }
                        this.drawView();
                    }
                }

                break;
}
} 
```

所以我的问题是**如果设备的方向改变颠倒**图像将旋转到错误的方向（完全相反的方向）。我该如何解决这个问题以及当设备方向颠倒时会发生什么？
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T10:44:05.813

使用设备当前旋转[http://developer.android.com/reference/android/view/Display.html#getRotation()](http://developer.android.com/reference/android/view/Display.html#getRotation())

它返回 4 个选项 ROTATION_0、ROTATION_90、ROTATION_180、ROTATION_270 之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-22T22:10:12.340

Yoah 的回答是正确的，但如何从链接文档中获取 Display 并不明显。

您无法从资源/配置中获取此信息。相反，您应该使用：

```
int rotation = getWindowManager().getDefaultDisplay().getRotation(); 
```

# iphone - 我们如何在视图中隐藏第一次出现的按钮，然后它应该出现

> ID：12637958
> 
> 赞同：-1
> 
> 时间：2012-09-28T10:09:22.527
> 
> 标签：iphone, ios

我在我的第一个视图控制器中使用了完成按钮。当应用程序打开时，应该隐藏完成按钮。但是当用户转到第二个视图控制器时，我将第二个视图控制器再次推到第一个视图，然后我想在我的第一个视图控制器中显示完成按钮。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:27:59.423

制作按钮的 IBOutlet，如 IBOutlet UIButton *doneButton; 将此 IBOutlet doneButton 连接到 Button

在 ViewDidLoad [doneButton setHidden:YES];

在您展示第二个视图控制器的地方，您可以使其可见，如 [doneButton setHidden:NO];

我想你想要导航栏上的按钮所以添加按钮到导航栏使用这个

```
 UIBarButtonItem *doneNavigationBarButton = [[UIBarButtonItem alloc] initWithTitle:@"Tool" style:UIBarButtonItemStylePlain target:self action:@selector(doneNavigationBarButtonClicked)];
[[self navigationItem] setRightBarButtonItem: doneNavigationBarButton];
[doneNavigationBarButton release];

And make a method 
- (void)doneNavigationBarButtonClicked
{   NSLog(@"Done button Clicked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T10:32:58.737

取一个 Bool 变量，然后检查该变量是否为是，然后显示您的按钮，否则将其隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T10:28:15.133

在您的第一个控制器中创建一个 BOOL 属性`isDoneVisible`并将其设置为 NO 在您的`viewDidLoad`. 从第一个控制器推送时，将其值设置为 Yes 并在您的`viewWill Appear`：

```
if(isDoneVisible==YES)
{    
 [DoneButton setHidden:NO];
}
else
{
[DoneButton setHidden:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T12:26:05.707

在 viewDidload 中，设置属性`[button setHidden:YES];`

在 viewWillAppear 中，设置属性`[button setHidden:NO];`

# objective-c - 访问 cameraroll 并在 iPad 中选择图像后无法在 UIimageView 控制器上加载图像

> ID：12637964
> 
> 赞同：1
> 
> 时间：2012-09-28T10:09:48.040
> 
> 标签：objective-c, ios, xcode, ipad, uipopovercontroller

我今天遇到了一个有点棘手的情况。我按照[http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_%28Xcode_4%29下的教程进行操作](http://www.techotopia.com/index.php/An_Example_iOS_4_iPad_Camera_and_UIImagePickerController_Application_%28Xcode_4%29)

如果编码是在 ViewController.h 和 ViewController.m 下完成的，本教程帮助我访问相机和相机胶卷。

如果我尝试创建一个新的 UIViewController 并将其命名为“相机”并尝试将相同的代码放入其中并尝试通过 ViewController.m 中的按钮操作进行访问，cameraviewcontroller 会加载视图和相机，相机胶卷也会起作用，但是当我选择视图重定向的特定图像。

```
@implementation ViewController
- (IBAction)button:(id)sender {

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"Camera"];
    [vc setModalPresentationStyle:UIModalPresentationFullScreen];
    [self presentModalViewController:vc animated:YES];

}

//camera.h//

#import <UIKit/UIKit.h>
#import <MobileCoreServices/MobileCoreServices.h>
@interface Camera :UIViewController<UIImagePickerControllerDelegate,
UINavigationControllerDelegate, UIPopoverControllerDelegate>

{
    UIToolbar *toolbar;
    UIPopoverController *popoverController;
    UIImageView *imageView;
    BOOL newMedia;
}

@property (nonatomic, retain) IBOutlet UIImageView *imageView;
@property (nonatomic, retain) UIPopoverController *popoverController;
@property (nonatomic, retain) IBOutlet UIToolbar *toolbar;

- (IBAction)useCamera: (id)sender;
- (IBAction)useCameraRoll: (id)sender;

@end

//camera.m//

#import "Camera.h"

@interface Camera ()

@end

@implementation Camera
@synthesize imageView, popoverController, toolbar;

- (IBAction) useCamera: (id)sender
{
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentModalViewController:imagePicker
                                animated:YES];
        newMedia = YES;
    }
}

- (IBAction) useCameraRoll: (id)sender
{
    if ([self.popoverController isPopoverVisible]) {
        [self.popoverController dismissPopoverAnimated:YES];
    } else {
        if ([UIImagePickerController isSourceTypeAvailable:
             UIImagePickerControllerSourceTypeSavedPhotosAlbum])
        {
            UIImagePickerController *imagePicker =
            [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.sourceType =
            UIImagePickerControllerSourceTypePhotoLibrary;
            imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                      (NSString *) kUTTypeImage,
                                      nil];
            imagePicker.allowsEditing = NO;

            self.popoverController = [[UIPopoverController alloc]
                                      initWithContentViewController:imagePicker];

            popoverController.delegate = self;

            [self.popoverController 
             presentPopoverFromBarButtonItem:sender
             permittedArrowDirections:UIPopoverArrowDirectionAny
             animated:YES];
            newMedia = NO;
        }
    }
}

- (void)viewDidLoad
{
    UIBarButtonItem *cameraButton = [[UIBarButtonItem alloc] 
                                     initWithTitle:@"Camera"
                                     style:UIBarButtonItemStyleBordered
                                     target:self
                                     action:@selector(useCamera:)];
    UIBarButtonItem *cameraRollButton = [[UIBarButtonItem alloc] 
                                         initWithTitle:@"Camera Roll"
                                         style:UIBarButtonItemStyleBordered
                                         target:self
                                         action:@selector(useCameraRoll:)];
    NSArray *items = [NSArray arrayWithObjects: cameraButton,
                      cameraRollButton, nil];
    [toolbar setItems:items animated:NO];
    [super viewDidLoad];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self.popoverController dismissPopoverAnimated:true];
    NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info
                          objectForKey:UIImagePickerControllerOriginalImage];

        imageView.image = image;
        if (newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
                                           self,  
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
    else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
 contextInfo:(void *)contextInfo
{
    if (error) {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Save failed"
                              message: @"Failed to save image"\
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
    }
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self dismissModalViewControllerAnimated:YES];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

我已经用谷歌搜索找到解决方案，但是我没有解决方案，请帮助我克服这个问题。

提前致谢。

# c# - url重写时无法匹配正则表达式中的字符排除

> ID：12637967
> 
> 赞同：0
> 
> 时间：2012-09-28T10:10:00.453
> 
> 标签：c#, regex, url-rewriting

我正在尝试匹配所有具有课程/wwwwddd 的网址，并且在 dd 之后没有任何内容。（或者至少没有 / 之后的字符。

我的表达是：

```
(.*)courses\/(\w{4}\d{3})[^/] 
```

但它根本不起作用。

我知道麻烦来自 [^/] 。

我搜索了stackoverflow，我尝试了很多东西，但我无法得到任何结果。

我会很感激你的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T10:13:14.603

你想要一个负面的前瞻：

```
(.*)courses\/(\w{4}\d{3})(?!\/) 
```

这可确保最后一位数字后没有斜线。我不确定你为什么逃脱了另一个斜线，但我在那里遵循了你的例子。不过，您可能不需要其中任何一个反斜杠。

# asp.net-mvc - 带有 html 实体的 MVC 标签

> ID：12637968
> 
> 赞同：4
> 
> 时间：2012-09-28T10:10:01.927
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html-helper

我有一些带有 html 实体字符的标签文本，例如`&nbsp;`（`&eacute;`等），例如，当传递给它们`Html.Label`时`&amp;nbsp;`。从帮助者那里恢复过来的最佳方式是什么`&nbsp;`？

**编辑：**文本来自本地化资源，因此对于这种情况`Html.Label("myinput", labelText)`是`labelText`未知的，可能包含也可能不包含实体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-21T19:31:05.570

我知道这是一个非常古老的问题，但是从未正确回答过，我一直在寻找答案。

**这种情况的解决方案是：**

```
@Html.Label("myinput", HttpUtility.HtmlDecode("&hellip;yet another label")) 
```

或者如果您使用的是模型：

```
@Html.LabelFor(model=>model.SomeProperty,HttpUtility.HtmlDecode("&hellip;yet another label")) 
```

当然，如果您的标签字符串不包含任何 html 实体，它会呈现得很好，因此它使用动态标签覆盖您的情况：

```
@Html.Label("myinput", labelText) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:24:40.203

对我来说，写纯html更简单

```
<label for="myinput">This is text&nbsp;</label> 
```

# java - GWT Junit 测试用例

> ID：12637981
> 
> 赞同：2
> 
> 时间：2012-09-28T10:10:51.437
> 
> 标签：java, gwt, junit, testcase

我想用 GWT Junit 测试一个 RPC。我使用标准 GWT 示例并创建以下测试用例：

```
public class TestGreetingService extends GWTTestCase {
/**
 * Must refer to a valid module that sources this class.
 */
public String getModuleName() {
    return "com.TestGreeting";
}   

/**
 * This test will send a request to the server using the greetServer method
 * in GreetingService and verify the response.
 */
public void testGreetingService() {
    // Create the service that we will test.
    GreetingServiceAsync greetingService = GWT
            .create(GreetingService.class);
    ServiceDefTarget target = (ServiceDefTarget) greetingService;
    target.setServiceEntryPoint(GWT.getModuleBaseURL() + "TestGreeting/greet");

    // Since RPC calls are asynchronous, we will need to wait for a response
    // after this test method returns. This line tells the test runner to
    // wait
    // up to 10 seconds before timing out.
    delayTestFinish(20000);

    // Send a request to the server.
    greetingService.greetServer("GWT User", new AsyncCallback<String>() {
        public void onFailure(Throwable caught) {
            // The request resulted in an unexpected error.
            fail("Request failure: " + caught.getMessage());
        }

        public void onSuccess(String result) {
            // Verify that the response is correct.
            assertTrue(result.startsWith("Hello, GWT User!"));

            // Now that we have received a response, we need to tell the
            // test runner
            // that the test is complete. You must call finishTest() after
            // an
            // asynchronous test finishes successfully, or the test will
            // time out.
            finishTest();
        }
    });
}
} 
```

不幸的是，我收到以下错误：有人可以帮助我吗？我还上传了项目：goo.gl/UnFyt

```
 [WARN] 404 - POST /com.TestGreeting.JUnit/TestGreeting/greet (192.168.1XX.XX) 1427 bytes <br>
Request headers <br>
Host: 192.168.1XX.XX:53577 <br>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.19) Gecko/2010031422 <br> Firefox/3.0.19 <br>
Accept-Language: en-us <br>
Accept: */* <br>
Connection: Keep-Alive <br>
Referer: http://192.168.1XX.XX:53577/com.Test...8.1XX.XX:53572 <br>
X-GWT-Permutation: HostedMode <br>
X-GWT-Module-Base: http://192.168.1XX.XX:53577/com.TestGreeting.JUnit/ <br>
Content-Type: text/x-gwt-rpc; charset=utf-8 <br>
Content-Length: 181 <br>
Response headers <br>
Content-Type: text/html; charset=iso-8859-1 <br>
Content-Length: 1427 <br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:23:56.583

您收到 404 警告，找不到您的服务。您的 ServiceEntryPoint 定义一定有问题。

尝试为您的同步接口使用 @RemoteServiceRelativePath("greet") 注释或将您的 setServiceEntryPoint 更正为

```
 target.setServiceEntryPoint(GWT.getModuleBaseURL() + "greet"); 
```

另请查看 DevGuide，那里的说明帮助我很好地习惯了 GWT RPC 服务： [https ://developers.google.com/web-toolkit/doc/2.4/DevGuideServerCommunication#DevGuideImplementingServices](https://developers.google.com/web-toolkit/doc/2.4/DevGuideServerCommunication#DevGuideImplementingServices)

# php - Fuelphp 类似于 orm 的逻辑

> ID：12637993
> 
> 赞同：0
> 
> 时间：2012-09-28T10:11:25.943
> 
> 标签：php, orm, fuelphp, social-media-like

我有一个小网站，我想让用户能够使用 ajax 喜欢每个配置文件。

所以逻辑是这样的，如果用户点击它插入的点赞，但是如果这个人已经喜欢并且在数据库中找到了删除记录，这将是不同的功能。

所以控制器看起来像这样。

```
public function action_like()
{
    $response = Response::forge();
    $like = Model_Like::forge();
    $like->user_id = Input::post('user_id');
    $like->liked_by = Session::get('sentry_user');
    // find if the user already liked
    $row = Model_Like::find(array($like->user_id, $like->liked_by));
    //if liked remove from database
    if($row):
        $response->body(json_encode(array(
            'status' => 'no',
        )));
        $row->delete();
    else:
        $response->body(json_encode(array(
            'status' => 'yes',
        )));
        $like->save();
    endif;

    return $response;
} 
```

javascript

```
$('button.like').on('click', function(){
    var likeId = $(this).data('like') 
    valPlus = parseInt($('.like-total').text()) + 1;;
    $.ajax({
        type: "POST",
        url: site_url + 'profile/like/',
        data: {user_id: likeId},
        dataType: "json",
        context: this,
        //async: false,
        beforeSend: function(data) {
            $(this).attr('disabled', 'disabled');
        },
        success: function(data) {
            console.debug(data);
            if(data.status == "yes") {

                $('.like-total').text(valPlus);
            }
        }, 
        complete: function(data) {
            $(this).removeAttr('disabled', 'disabled');
        }
    })
}); 
```

所以问题是`$row`总是 retunrs `null`，所以它没有找到两个 id 并且总是插入。

请有人给我一个提示我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:22:26.317

我认为您的“在哪里”有错误。你可以试试这个吗？

```
$row = Model_Like::find()->where(array(
    array('user_id', $like->user_id), 
    array('liked_id', $like->liked_by)
)); 
```

使用您的“Where”，您可以在哪里搜索 ID 为“$like->user_id”和“$like->liked_by”的记录，而不是搜索它们的单行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:21:55.480

今天在这里看到一个类似的问题。

你可以做

```
Model_Like::find_by_user_id_and_liked_id($like->user_id, $like->liked_by); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T19:40:32.270

根据文档： find() 需要一个主键作为参数。

您可以使用“Marco Pace”和“notrab”提到的解决方案来运行查询。在第一种情况下，使用

```
Model_Like::query() 
```

并不是

```
Model_Like::find() 
```

最后一个恰好起作用，因为不传递任何参数是一种错误情况，在这种情况下，ORM 的查询对象被返回，因为它不知道要查找什么。这种行为可能会在未来的版本中改变。

# jquery - 创建顺序工具提示以向新用户显示站点功能

> ID：12637994
> 
> 赞同：1
> 
> 时间：2012-09-28T10:11:29.443
> 
> 标签：jquery

我正在寻找一种方法来实现一种简单的方法，以便在用户首次登录网站时在屏幕周围引入网站功能。

这可能是带有下一个/后退/跳过按钮或其他方法的顺序工具提示。我试图用谷歌搜索，但没有成功（这可能是因为我的搜索关键字不好）

任何人都可以帮助或说出如何做到这一点？

平台：PHP、mySql、jQuery 和 HTML

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-11T15:32:19.107

在寻找同样的东西时，我发现了这个：[http](http://codecanyon.net/item/sequential-tooltips/931033) ://codecanyon.net/item/sequential-tooltips/931033 。

看起来合法。希望有帮助。

# android - CouchBase 复制负载平衡 - 如何减少失败时客户端复制尝试的频率

> ID：12637997
> 
> 赞同：2
> 
> 时间：2012-09-28T10:11:41.387
> 
> 标签：android, couchdb, replication, couchbase

我是 Couch 的新手，并且继承了一个中型项目，该项目在大约 70 个客户端 Android 手机（所有 HTC Desire S）上使用 CouchBase Mobile（开发人员预览版 V2.0），然后与主 CouchDB 服务器同步。

不幸的是，构建系统的人已经不在了，所以我正在寻求社区的帮助。

***我的观察：***

*   客户端电话似乎处于调用复制、然后失败、然后重新调用复制、失败等几乎恒定的状态。除了无法从服务器拉取新数据之外，它还消耗过多的电池力量。
*   服务器明显负担过重。Erlang 和 Couch 占用了大量的 CPU 和内存。
*   当服务器负担较轻时，复制似乎可以正常工作。例如，在重新启动 CouchDB 服务后，复制可以正常工作一段时间。

***我的假设：***

*   对我来说，这听起来像是一个负载平衡问题。随着服务器变得繁忙，越来越多的客户端复制失败，然后它们只是更频繁地请求复制，使问题变得更糟。

***我如何尝试修复它：***

*   在客户端的 CouchBase“default.ini”文件中，我编辑了以下内容，试图限制客户端调用复制的频率。

    *   max_replication_retry_count = 1
    *   http_connections = 5
    *   连接超时 = 60000

尽管如此，我仍然可以看到 CouchBase 在 LogCat 中逐渐消失，不断尝试但未能复制。

谁能建议我如何开始调试它，以便更有效地隔离问题？指出我正确的方向？...非常感谢。

* * *

 **这是来自 LogCat 09-28 12:48:48.593***的复制错误***`"0284a8a927077abfd2b86a2616e07fed"`：I/CouchDB(4468): [info] [<0.8140.0>] Replication is using:
09-28 12:48:48.593: I/CouchDB(4468) )：4 个工作进程
09-28 12:48:48.593：I/CouchDB(4468)：工作批量大小为 500
09-28 12:48:48.593：I/CouchDB(4468)：5 个 HTTP 连接
09-28 12 :48:48.593: I/CouchDB(4468): 连接超时 60000 毫秒
09-28 12:48:48.593: I/CouchDB(4468): 套接字选项是: [{keepalive,true},{nodelay,false} ]
09-28 12:48:48.593: I/CouchDB(4468): 源开始序列 4971
09-28 12:48:49.824: I/CouchDB(4468): [info] [<0.8140.0>] 文档`funf_client_to_server_49fd7812-409d-47df-a1cd-888db15a24ae`触发复制`0284a8a927077abfd2b86a2616e07fed`
09-28 12:48:49.834: I/CouchDB(4468): [info] [<0.8139.0>]`0284a8a927077abfd2b86a2616e07fed`在 <0.8140.0> ( `funf`-> `https://*****@monarca.dk:5984/monarca_funf/`)开始新的复制
09-28 12:48:51.225: E/ CouchDB(4468)：[错误] [<0.8140.0>] ChangesReader 进程因原因死亡：{file_corruption,
09-28 12:48:51.225: E/CouchDB(4468): <<"file corruption">>}
09 -28 12:48:51.225：E/CouchDB(4468)：[错误] [<0.8140.0>] 复制`0284a8a927077abfd2b86a2616e07fed`( `funf`-> `https://*****@monarca.dk:5984/monarca_funf/`) 失败：
changes_reader_dieed 09-28 12:48:51.245：I/CouchDB(4468)：[ info] [<0.8149.0>] 重试 POST 请求到 https:// ***** @monarca.dk:5984/monarca_funf/_revs_diff 在 0.25 秒内由于错误关闭_on_request
09-28 12:48:51.245: I/CouchDB(4468): [info] [<0.8148.0>] 重试 POST 请求到 https:// ***** @monarca.dk:5984/monarca_funf/_revs_diff 在 0.25 秒内由于错误关闭_on_request
09-28 12:48:51.476：E/CouchDB（4468）：[错误] [<0.298.0>] 复制错误`0284a8a927077abfd2b86a2616e07fed`（由文档触发`funf_client_to_server_49fd7812-409d-47df-a1cd-888db15a24ae`）：changes_reader_died** 

 *** * *

***这是有问题的复制文档。***
{"_id":"funf_client_to_server_49fd7812-409d-47df-a1cd-888db15a24ae","_rev":"825-082674db3441880a23d6b6aa51be7e3e","target":"https:// ***** @monarca.dk:5984/monarca_funf","continuous" :false,"source":"funf","filter":"monarcaandroid/deletefilter","_replication_id":"3dfdfca7dfd47d9352c9048497660e4c","_replication_state":"error","_replication_state_time":"2012-09-28T12:51: 25+02:00"}

* * *

***这是复制文档引用的“删除过滤器”。***

```
"function(doc) {\n  return !doc._deleted;\n}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T18:00:48.053

错误日志显示“文件损坏”；可能暗示某些沙发数据库损坏。您可能想查看您的 _replicator 数据库是否有任何损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:29:52.070

更好地使用`_replicator`数据库进行复制。它将免费为您重新尝试复制。重新尝试复制之前的延迟呈指数增长。

可从[这里获得的信息](https://gist.github.com/832610)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T05:51:47.753

因为它是android上的couchbase mobile，我认为它基于couchdb 1.1或早期的couchdb 1.2。这可能是在您尝试的设置（max_replication_retry_count、http_connections 和 connection_timeout）登陆 couchdb 1.2 发行版之前。这只是一个猜测。您可能想要 1) 升级您的 couchdb/couchbase 版本（如果您发现更高版本，请告诉我们所有人），或 2) 只需有一个计时器任务在后台执行单个复制。**